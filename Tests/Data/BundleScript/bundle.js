(()=>{var e,t={3943:(e,t,n)=>{"use strict";function s(e){return 1!==e}function i(e){return e>1}function r(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5}function a(e){return 1!==e}function o(e){return 1!==e}function l(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function c(e){return 1!==e}function u(e){return 1!==e}function m(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function d(e){return 1!==e}function h(e){return 1!==e}function p(e){return 1!==e}function g(e){return 1===e?0:e>=2&&e<=4?1:2}function b(e){return 2===e?1:0}function N(e){return 1!==e}function f(e){return 1!==e}function _(e){return 1!==e}function v(e){return 1!==e}function E(e){return 1!==e}function C(e){return 1!==e}function w(e){return 1!==e}function y(e){return 1!==e}function S(e){return 1!==e}function T(e){return 1!==e}function k(e){return 1!==e}function I(e){return 1!==e}function A(e){return 1!==e}function Z(e){return 1!==e}function P(e){return 1!==e}function D(e){return 0}function M(e){return 1!==e}function O(e){return e>1}function x(e){return e>1}function L(e){return 1!==e}function R(e){return 1===e?0:2===e?1:e>2&&e<7?2:e>6&&e<11?3:4}function B(e){return 1===e||11===e?0:2===e||12===e?1:e>2&&e<20?2:3}function F(e){return 1!==e}function U(e){return 1!==e}function V(e){return 1!==e}function H(e){return 1!==e}function W(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function z(e){return 1!==e}function G(e){return 1!==e}function K(e){return 0}function j(e){return 1!==e}function Y(e){return e%10!=1||e%100==11}function $(e){return 1!==e}function X(e){return 0}function Q(e){return 0}function q(e){return 0}function J(e){return 0}function ee(e){return e>1}function te(e){return 1!==e}function ne(e){return 0}function se(e){return 1!==e}function ie(e){return e>1}function re(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}function ae(e){return e%10==1&&e%100!=11?0:0!==e?1:2}function oe(e){return e%10==1&&e%100!=11?0:1}function le(e){return 1!==e}function ce(e){return 1!==e}function ue(e){return 1!==e}function me(e){return 0}function de(e){return 1!==e}function he(e){return 1!==e}function pe(e){return 1!==e}function ge(e){return e>1}function be(e){return 1!==e}function Ne(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function fe(e){return 1!==e}function _e(e){return 1!==e}function ve(e){return 1===e?0:0===e||e%100>0&&e%100<20?1:2}function Ee(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function Ce(e){return 1!==e}function we(e){return e>1}function ye(e){return 1===e?0:e>=2&&e<=4?1:2}function Se(e){return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3}function Te(e){return 1!==e}function ke(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function Ie(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function Ae(e){return 1!==e}function Ze(e){return 1!==e}function Pe(e){return 1!==e}function De(e){return 1!==e}function Me(e){return 0}function Oe(e){return e>1}function xe(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}function Le(e){return 0}function Re(e){return 0}function Be(e){return 0}function Fe(e){return 0}n.r(t),n.d(t,{af:()=>s,am:()=>i,ar:()=>r,az:()=>a,bar:()=>o,be:()=>l,bg:()=>c,bn:()=>u,bs:()=>m,ca$valencia:()=>d,ca:()=>h,ckb:()=>p,cs:()=>g,cy:()=>b,da:()=>N,de_CH:()=>f,de:()=>_,el:()=>v,en_GB:()=>E,en_US:()=>C,eo:()=>w,es_:()=>y,es_419:()=>S,es_AR:()=>T,es_MX:()=>k,es_PE:()=>I,es:()=>A,et:()=>Z,eu:()=>P,fa:()=>D,fi:()=>M,fil:()=>O,fr:()=>x,fy:()=>L,ga:()=>R,gd:()=>B,gl:()=>F,gu:()=>U,he:()=>V,hi:()=>H,hr:()=>W,hu:()=>z,hy:()=>G,id:()=>K,io:()=>j,is:()=>Y,it:()=>$,ja_KS:()=>X,ja:()=>Q,jbo:()=>q,ka:()=>J,kab:()=>ee,kn:()=>te,ko:()=>ne,ku:()=>se,ln:()=>ie,lt:()=>re,lv:()=>ae,mk:()=>oe,ml:()=>le,mn:()=>ce,mr:()=>ue,ms:()=>me,nb:()=>de,nl:()=>he,nn:()=>pe,pa:()=>ge,pcm:()=>be,pl:()=>Ne,pt_BR:()=>fe,pt_PT:()=>_e,ro:()=>ve,ru:()=>Ee,sc:()=>Ce,si:()=>we,sk:()=>ye,sl:()=>Se,sq:()=>Te,sr_Latn:()=>ke,sr:()=>Ie,sv:()=>Ae,sw:()=>Ze,ta:()=>Pe,te:()=>De,th:()=>Me,tr:()=>Oe,uk:()=>xe,vi:()=>Le,zh_CN:()=>Re,zh_HK:()=>Be,zh_TW:()=>Fe})},76483:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>fe,kv:()=>me});var s=n(50590),i=n(24141),r=n(51495),a=n(78635),o=n(52581),l=n(2324),c=n(29319),u=n(51110),m=n(63145),d=n(66991),h=n(6146),p=n(50377),g=n(50063),b=n(97227);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f{constructor(){N(this,"updatedSources",new Map),N(this,"imapDelete",[]),N(this,"imapCopy",[])}addSourceUpdate(e,t,n){const s=this.updatedSources.get(t);s?s.set(e,n):this.updatedSources.set(t,new Map([[e,n]]))}addSource(e,t,n){this.addSourceUpdate(e,t,{read:n,deleted:!1,internal:!0})}removeSource(e,t){this.addSourceUpdate(e,t,void 0)}deleteSource(e,t){this.addSourceUpdate(e,t,{deleted:!0})}undeleteSource(e,t){this.addSourceUpdate(e,t,{deleted:!1})}addImapDelete(e,t,n){this.imapDelete.push({accountId:e,path:t,searchListId:n})}addImapCopy(e,t,n){const s=t.find((t=>{const n=e.sources.get(t);return n&&!n.internal}));if(s){const t=r.C.get(s);if(!t)throw new Error("Filter not found "+s);const{accountId:i,path:a}=t;this.imapCopy.push({accountId:i,path:a,destinationPath:n,searchListId:e.id})}}}function _(e){const t=new Map;return[...e.keys()].forEach((e=>{const n=r.C.get(e);if(!n)throw new Error("Filter not found "+e);const{accountId:s}=n,i=t.get(s);i?i.push(e):t.set(s,[e])})),t}async function v(e){const{updatedSources:t,imapCopy:n,imapDelete:s}=e,r=new Set;if(t.size>0&&(r.add(l.Z.searchList),r.add(l.Z.filteringQueue),r.add(l.Z.filters)),(s.length>0||n.length>0)&&(r.add(l.Z.imap),r.add(l.Z.buffer)),r.size>0){let e=[];await l.Z.transaction("rw",[...r],(async()=>{t.size>0&&(e=await h.Z.call(t),t.forEach(((e,t)=>{m.Z.call({type:"RE_RUN_SLES",priority:g.Un.HIGH,searchListIds:[t],filterIds:[...e.keys()],folderIds:[[g.of,g.rp]]})}))),n.length>0&&await d.Z.addCopy(n),s.length>0&&await d.Z.addDelete(s)})),p.Z.filter(),a.Z.flushBuffer(),e.length>0&&i.Z.updateIndex({sleUpdates:e})}}const E={markAsJunk:async function(e){const t=new f;e.forEach((e=>{const{id:n,sources:s}=e;_(s).forEach(((i,a)=>{const l=(0,b.ZA)(a)&&o.Z.getFoldersOfType(a,g.Hd);if(l&&l.length>0){const o=new Set;l.forEach((l=>{const{path:c}=l,m=r.C.getByFolder(a,c);if(!m)throw new Error("Filter not found "+a+" "+c);const{id:d}=m,h=e.sources.get(d);if(h)h.internal&&t.addImapCopy(e,i,c);else{const r=u.Z.call(s);t.addSource(d,n,r),t.addImapCopy(e,i,c)}o.add(d)})),i.forEach((s=>{if(o.has(s))return;const i=e.sources.get(s);if(!i)throw new Error("Source not found "+s+" on listEntry "+e.id);if(!i.internal){const e=r.C.get(s);if(!e)throw new Error("Filter not found "+s);t.addImapDelete(a,e.path,n),t.deleteSource(s,n)}}))}}))})),await v(t)},markAsNotJunk:async function(e){const t=new f;e.forEach((e=>{const{id:n,sources:s}=e;_(s).forEach(((i,a)=>{const l=r.C.getByIds(i),m=l.some((({accountId:e,path:t})=>c.Z.getFolderType(e,t)===g.uT));if(m)l.forEach((({id:e,accountId:s,path:i})=>{c.Z.getFolderType(s,i)===g.Hd&&(t.removeSource(e,n),t.addImapDelete(s,i,n))}));else{let m=!1;if(l.forEach((({id:r,accountId:a,path:o})=>{if(c.Z.getFolderType(a,o)===g.Hd)t.removeSource(r,n),t.addImapDelete(a,o,n);else{m=!0;const a=s.get(r);if(!a)throw new Error("Source not found");a.deleted&&(t.undeleteSource(r,n),t.addImapCopy(e,i,o))}})),!m){const l=o.Z.getFoldersOfType(a,g.e9);if(!l||0===l.length)throw new Error("No inbox found on account "+a);const c=l[0].path,m=r.C.getByFolder(a,c);if(!m)throw new Error("Inbox filter not found "+a+" "+c);const d=u.Z.call(s);t.addSource(m.id,n,d),t.addImapCopy(e,i,c)}}}))})),await v(t)}};var C=n(18484),w=n(40778),y=n(49856),S=n(91662),T=n(21622),k=n(25401),I=n(27673),A=n(30801),Z=n(54471),P=n(40545),D=n(12006),M=n(8485);const O={call:async function(e,t){await l.Z.transaction("rw",[l.Z.searchList],(()=>{l.Z.searchList.where("id").anyOf(e).modify((e=>{e.sourceFilterIds=e.sourceFilterIds.filter((e=>!t.includes(e))),t.forEach((t=>{e.sources.delete(t)}))}))}))}};var x=n(48345);const L={call:async function(e,t){const n=[],s={},o=[],c=await D.Z.loadAllAccounts(),u=[],h=[],b=new x.R;e.forEach((e=>{const{id:i,sentDate:a,messageId:l,sources:m}=e,d=t.get(i);d&&(m.size===d.length?h.push(i):b.add(d,i),d.forEach((e=>{const t=r.C.get(e);if(!t)return;const{accountId:m,path:d}=t;if(m===g.of)return;if(n.push({accountId:m,searchListId:i,sentDate:a}),m===g.u4)return void u.push({path:d,messageId:l});const h=c.find((e=>e.MAIL_EMAIL===m));h?h.accountType===g.s9.POP?s[m]?s[m].push(i):s[m]=[i]:h.accountType===g.s9.IMAP&&o.push({accountId:m,path:d,searchListId:i}):console.warn("Account "+m+" not found")})))}));const N=[l.Z.messages,l.Z.searchList,l.Z.threading,l.Z.filteringQueue,l.Z.viewIds];(o.length>0||Object.keys(s).length>0)&&(N.push(l.Z.buffer),o.length>0&&N.push(l.Z.imap),Object.keys(s).length>0&&N.push(l.Z.pop)),u.length>0&&N.push(l.Z.deletedFeedItems),await l.Z.transaction("rw",N,(async()=>{for(const{filterIds:e,searchListIds:t}of b.batches){const n=[...e];O.call(t,n);const s=new Map(n.map((e=>[e,void 0])));m.Z.call({type:"UPDATE_SLE",priority:g.Un.HIGH,searchListIds:t,sources:s})}u.length>0&&l.Z.deletedFeedItems.bulkAdd(u),h.length>0&&M.Z.call(h),o.length>0&&d.Z.addDelete(o);const e=Object.keys(s);if(e.length>0){const t=[];for(const n of e)t.push({accountId:n,searchListIds:s[n],operation:"BUFFER_OPERATION_DELETE_POP"});t.length>0&&l.Z.buffer.bulkAdd(t)}})),i.Z.updateIndex({removedSles:h}),a.Z.flushBuffer(),p.Z.filter();for(const e of n){const{accountId:t,searchListId:n,sentDate:s}=e;await P.Z.call(t,n,s).catch((()=>console.warn("Error deleting file. May not exist!",e)))}}};var R=n(24383),B=n(96244),F=n(76955),U=n(74368);const V=async function(e,t,n,s){const r=R.Z.getByFolderId([t,n]),o=R.Z.getByFolderId([t,s]);if(!r||!o)throw new Error(`Could not move messages.\n      No filter found for ${t}/${n}\n      or ${t}/${s}\n      when trying to move ${e.length} messages`);const u=new Map;e.forEach((e=>{const s=e.sources.get(r.id);if(!s)throw new Error(`Can't move message from ${t}/${n}\n        No source found for entry:\n        ${e.subject}\n        in filter: ${r.name}`);const i=new Map;i.set(r.id,void 0),i.set(o.id,{...s}),u.set(e.id,i)}));const b=e.map((e=>e.id));let N=[];await l.Z.transaction("rw",[l.Z.searchList,l.Z.buffer,l.Z.imap,l.Z.filteringQueue,l.Z.filters],(async()=>{await d.Z.addMove(b.map((e=>({accountId:t,path:n,destinationPath:s,searchListId:e})))),N=await h.Z.call(u);const e=R.Z.getByFolderIds([[g.Ry,`${t}/${n}`],[g.Ry,`${t}/${s}`]]).map((e=>e.id)),i=[[t,n],[t,s]];c.Z.getFolderType(t,n)===c.Z.getFolderType(t,s)?await m.Z.call({type:"FILTERS_SLES",priority:g.Un.HIGH,folderIds:i,filterIds:e,searchListIds:b}):await m.Z.call({type:"RE_RUN_SLES",priority:g.Un.HIGH,folderIds:i,filterIds:e,searchListIds:b})})),a.Z.flushBuffer(),p.Z.filter(),N.length>0&&i.Z.updateIndex({sleUpdates:N})};var H=n(63057),W=n(65531);const z={call:async function(e,t){const n=new Map,s=[],c=[],u=[],N=new Set,f=new Map;function _(e,t,s){const i=n.get(t),r={deleted:s,read:!0};i?i.set(e,r):n.set(t,new Map([[e,r]]))}function v(e,t,n){const{id:s,sources:i}=e;N.add(e),i.forEach(((e,i)=>{const r={...e,read:!0};t.has(i)&&(r.deleted=n);if(Object.keys(e).some((t=>e[t]!==r[t]))){const e=f.get(s);e?e.set(i,r):f.set(s,new Map([[i,r]]))}}))}function E(e,t,n){const s=t.find((t=>{const n=e.sources.get(t);return n&&!n.internal}));if(s){const{accountId:t,path:i}=r.C.get(s);c.push({key:[t,i,e.id],destinationPath:n})}}e.forEach((e=>{const{id:i}=e,a=t.get(i),l=new Map;a&&0!==a.length?(a.forEach((e=>{const t=r.C.get(e),{accountId:n}=t,s=l.get(n);s?s.push(e):l.set(n,[e])})),l.forEach(((t,a)=>{const l=(0,b.ZA)(a)&&o.Z.getFoldersOfType(a,g.uT);if(l&&l.length>0){const o=new Set;l.forEach((s=>{const{path:l}=s,c=r.C.getByFolder(a,l),{id:m}=c,d=e.sources.get(m);if(d)if(d.internal)E(e,t,l),d.deleted&&_(m,i,!1);else if(d.deleted){const t=new Set([m]);v(e,t,!1)}else u.push(e);else!function(e,t,s,i){const r=n.get(t),a={deleted:s,internal:i,read:!0};r?r.set(e,a):n.set(t,new Map([[e,a]]))}(m,i,!1,!0),E(e,t,l);o.add(m)}));const c=t.filter((e=>!o.has(e)));v(e,new Set(c),!0),c.forEach((t=>{if(!e.sources.get(t).internal){const e=r.C.get(t);s.push([a,e.path,i])}_(t,i,!0)}))}else v(e,new Set(t),!0)}))):console.warn("No deleteSourceFilterIds for id "+i)}));const C=new Set;if(n.size>0&&(C.add(l.Z.searchList),C.add(l.Z.filteringQueue),C.add(l.Z.filters)),(s.length>0||c.length>0)&&(C.add(l.Z.imap),C.add(l.Z.buffer)),N.size>0&&C.add(l.Z.flaggingQueue),C.size>0){const e=[];await l.Z.transaction("rw",[...C],(async()=>{if(N.size>0){const t=B.Z.setCustomFlags([...N],{},f);e.push(...t)}if(n.size>0){const t=await h.Z.call(n);e.push(...t);const s=new x.R;n.forEach(((e,t)=>{const n=[...e.keys()];s.add(n,t)}));for(const{filterIds:e,searchListIds:t}of s.batches)m.Z.call({type:"RE_RUN_SLES",priority:g.Un.HIGH,searchListIds:t,filterIds:[...e],folderIds:[[g.of,g.cm]]})}if(c.length>0||s.length>0){const e=s.slice();if(c.forEach((t=>{const{key:n}=t;e.find((e=>e.every(((e,t)=>e===n[t]))))||e.push(n)})),c.length>0){const e=[];for(const t of c){const{key:n,destinationPath:s}=t,[i,r,a]=n;e.push({accountId:i,path:r,searchListId:a,destinationPath:s})}await d.Z.addCopy(e)}if(s.length>0){const e=[];for(const t of s){const[n,s,i]=t;e.push({accountId:n,path:s,searchListId:i})}await d.Z.addDelete(e)}}})),p.Z.filter(),a.Z.flushBuffer(),e.length>0&&i.Z.updateIndex({sleUpdates:e})}u.length>0&&(e.length===u.length?(0,W.c)({title:(0,H.Z)("Already in trash"),icon:"resources/mail_notification_icon.png"}):(0,W.c)({title:(0,H.Z)("Some were already in trash"),icon:"resources/mail_notification_icon.png"}))}};var G=n(81270),K=n(26302);const j=async function(e){const t=await(0,K.Z)(e),n=[];return await l.Z.searchList.where("id").anyOf([...e.keys()]).modify((s=>{const{id:i,sourceFilterIds:r,sources:a}=s,o=e.get(i);o&&o.forEach(((e,i)=>{let o=!1;if(!t.has(i))throw new Error("Can not add a source for a non-existing filter ID "+i);r.includes(i)||(r.push(i),o=!0),a.has(i)||(a.set(i,{...e}),o=!0),o&&n.push(s)}))})),n};var Y=n(97634),$=n(43154),X=n(46879);const Q=async function(e){const t=[],n=[],s=[],u=[],h=new Map,b=[];for(const i of e){const{sources:e}=i;e.forEach(((e,a)=>{const{accountId:o,path:l}=r.C.get(a);c.Z.getFolderType(o,l)===g.uT?e.internal?t.push({sourceFilterId:a,listEntry:i}):n.push({sourceFilterId:a,listEntry:i}):e.internal?s.push({sourceFilterId:a,listEntry:i}):e.deleted&&u.push({sourceFilterId:a,listEntry:i})}))}const N=new Map;if(s.length>0){const e=await D.Z.loadAllAccounts(),t=[],n=[];for(const i of s){const{sourceFilterId:s,listEntry:r}=i,{id:a,sentDate:o,unseen:l,flags:c,sources:u}=r,m=R.Z.get(s),{accountId:d,path:p}=m,b=e.find((e=>e.MAIL_EMAIL===d));if(!b){console.warn("Account not found for accountId "+d);continue}if(b.accountType===g.s9.IMAP){let e=!1;for(const[t,i]of u){if(i.internal||t===s)continue;const r=R.Z.get(t);if(!r||r.accountId!==d)continue;const{path:o}=r;n.push({accountId:d,path:o,destinationPath:p,searchListId:a}),e=!0;break}if(!e){const e=await $.Z.call(d,a,o);e&&t.push({accountId:d,path:p,operation:"BUFFER_OPERATION_UPLOAD_MESSAGE",message:(0,X.Z)(e),searchListId:a})}}let f=N.get(a);f||(f={id:a,unseen:l,flags:c,sources:u},N.set(a,f));const _=u.get(s),v={read:void 0!==_&&_.read,internal:!0,deleted:!1};let E=h.get(a);E?E.set(s,v):(E=new Map([[s,v]]),h.set(a,E))}await d.Z.addCopy(n),await l.Z.buffer.bulkAdd(t)}if(u.length>0){const e=new Map;for(const t of u){const{sourceFilterId:n,listEntry:s}=t,{id:i,unseen:r,flags:a,sources:o}=s;let l=N.get(i);l||(l={id:i,unseen:r,flags:a,sources:o},N.set(i,l));const c=o.get(n),u={read:void 0!==c&&c.read,internal:!1,deleted:!1};let m=h.get(i);m?m.set(n,u):(m=new Map([[n,u]]),h.set(i,m));const d=e.get(n);d?d.push(i):e.set(n,[i])}for(const[t,n]of e){const e=r.C.get(t);if(!e)throw new Error("Filter not found, id "+t);const{accountId:s,path:i}=e;await Y.Z.deleteImapEntries(s,i,n)}}if(N.size>0){const e=B.Z.setCustomFlags([...N.values()],{[g.T4.SEEN]:!1},h,!1);b.push(...e)}const f=new Map;function _(e,t){const{id:n}=e;let s=f.get(n);if(!s){const{sourceFilterIds:t,sources:i}=e,r=new Map;for(const[e,t]of i)r.set(e,{...t});s={sourceFilterIds:t.slice(),sources:r},f.set(n,s)}const{sourceFilterIds:i,sources:r}=s;t.forEach(((e,t)=>{if(e)i.includes(t)||i.push(t);else{const e=i.indexOf(t);e>=0&&i.splice(e,1)}r.set(t,{...e})}))}const v=new Map;function E(e,t){const n=v.get(e);n?n.push(t):v.set(e,[t])}if(n.length>0){const e=[],t=[],s=new Map,i=new x.R;for(const i of n){const{sourceFilterId:n,listEntry:r}=i,{id:a,sourceFilterIds:l,sources:c}=r,u=R.Z.getByIds(l),m=u.find((e=>e.id===n)),d=u.filter((e=>e.accountId===m.accountId)),{accountId:h,path:p}=m;if(1===d.length){const t=o.Z.getFoldersOfType(h,g.e9)[0];if(!t)throw new Error("Can not undelete, an inbox folder was not found for "+h);const{path:i}=t;e.push({accountId:h,path:p,destinationPath:i,searchListId:a});const l=R.Z.getByFolderId([h,i]),u=c.get(n),m=void 0!==u&&u.read,d=new Map([[l.id,{read:m,deleted:!1,internal:!0}]]),b=new Map([[a,d]]),[N]=await j(b);if(N){_(r,d);const e=s.get(a);e?e.push(l.id):s.set(a,[l.id])}}else t.push({accountId:h,path:p,searchListId:a});E(a,n);_(r,new Map([[n,void 0]]))}d.Z.addMove(e),d.Z.addDelete(t),a.Z.flushBuffer(),s.forEach(((e,t)=>i.add(e,t)));for(const{filterIds:e,searchListIds:t}of i.batches)m.Z.call({type:"FILTERS_SLES",priority:g.Un.NORMAL,filterIds:[...e],searchListIds:t,updateFilters:!0})}if(t.length>0){const e=new Map;for(const n of t){const{listEntry:t,sourceFilterId:s}=n,{id:i}=t;E(i,s);_(t,new Map([[s,void 0]]));const r=e.get(s);r?r.push(i):e.set(s,[i])}for(const[t,n]of e){const e=r.C.get(t);if(!e)throw new Error("Filter not found, id "+t);const{accountId:s,path:i}=e;await Y.Z.uploadEntries(s,i,new Set(n)),await Y.Z.copyAndMoveEntries(s,i,n)}}if(f.size>0&&f.forEach(((e,t)=>{const{sourceFilterIds:n,sources:s}=e;b.push({id:t,updates:{sourceFilterIds:n,sources:s}})})),v.size>0){const e=[];v.forEach(((t,n)=>{const s=e.find((e=>e.filterIds.size===t.length&&t.every((t=>e.filterIds.has(t)))));s?s.searchListIds.push(n):e.push({filterIds:new Set(t),searchListIds:[n]})}));for(const{searchListIds:t,filterIds:n}of e){const e=[...n];await O.call(t,e);const s=new Map(e.map((e=>[e,void 0])));m.Z.call({type:"UPDATE_SLE",priority:g.Un.HIGH,searchListIds:t,sources:s})}}b.length>0&&i.Z.updateIndex({sleUpdates:b}),p.Z.filter()};var q=n(42954),J=n(35100),ee=n(30074),te=n(8547),ne=n(26808),se=n(85612);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const re={Red:"#f01",Orange:"#f80",Yellow:"#fd0",Green:"#3c0",Blue:"#08f",Purple:"#a09",Grey:"#666"},ae=new Image;function oe(e,t){e.push(t),t.children&&t.children.forEach((t=>oe(e,t)))}function le(e){const t=function(){const e=Z.ZP.getActiveBrowserOrPopupWindowId(),t=S.ZP.getTabs(e).find((e=>e.page.get("active")));return!(!t||!t.page)&&(0,ne.Ds)(t.page.url)}();let n=[];if(!t){const t=k.Z.get(q.uP);if(!t)return n;t.selectedIds.forEach((t=>{const s=r.C.getListEntry(t.id);s&&(e?oe(n,s):n.push(s))}))}if(!n.length||t){const e=s.Z.getActiveListEntry();if(e){const t=r.C.getListEntry(e.id);t&&(n=[t])}}return n}function ce(e,t){for(let n=0;n<e.length;n++)if(c.Z.getFolderType(e[n].accountId,e[n].path)!==t)return!0;return!1}function ue(e,t){return e.some((e=>c.Z.getFolderType(e.accountId,e.path)===t))}function me(){const e={type:"",shouldDisable:{trashButton:!1,spamButton:!1}},t=le(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].sourceFilterIds);const s=[];for(let e=0;e<n.length;e++)n[e].length>1?s.push(n[e].slice(-1).pop()):s.push(n[e][0]);const i=r.C.getByIds(s),a=ue(i,g.N1),o=ue(i,g.uT),l=ue(i,g.Hd),c=o&&ce(i,g.uT),u=l&&ce(i,g.Hd);return o&&(e.type=g.uT),a&&(e.type=g.N1,c&&(e.shouldDisable.trashButton=!0)),a||(c&&(e.shouldDisable.trashButton=!0),!c&&u&&(e.shouldDisable.spamButton=!0)),e}function de(e,t,n){const r=e.filter((e=>e&&(void 0===n||n(e)))),a=t(r);i.Z.updateIndex({sleUpdates:a});const o=s.Z.getActiveListEntry();if(o){const e=r.find((e=>e.id===o.id));e&&(o.flags=e.flags)}}function he(e,t){de(le(),e,t)}function pe(){return S.ZP.unsafeGetActivePage().isMailPage}function ge(e){return T.ZP.get(e?ee.kMailDeleteInOtherLocations:ee.kMailMarkDeleteInOtherLocations)}async function be(e){let t=s.Z.getActiveMessage();if(!t)return;const n=s.Z.getRaw();if(n&&!t.bodyParts){let s=await n.parseMainPart();e&&(s=s.concat(await n.parseAttachments())),t={...t,bodyParts:s}}return t}ae.src=`data:image/svg+xml;base64,${btoa(se.nyn.medium)}`;const Ne=new class{constructor(){ie(this,"openMessage",(()=>{const e=s.Z.getActiveListEntry(),t=s.Z.getActiveMessage();if(!e||!t)return;const n=r.C.getByIds(e.sourceFilterIds),i=n.some((e=>{const{accountId:t,path:n}=e;return t===g.of&&(n===g.Wb||n===g.J8)})),a=n.some((e=>{const{accountId:t,path:n}=e;return t===g.of&&n===g.N1})),o=c.Z.getFolderTypes(n);return i?C.Z.open(t,e.threadKey):a||o.has(g.Nz)?Ne.createDraftFromSent():void(0,G.Z)(t)})),ie(this,"getMoveToFolderMenu",(()=>{const e=le(),t=e.map((e=>{const t=[];return e.sources.forEach(((e,n)=>{e.internal||e.deleted||t.push(n)})),t}));if(0===t.length)return[];const n=t.reduce(((e,t)=>e.filter((e=>t.includes(e))))),s=[];if(r.C.getByIds(n).forEach((e=>{const{accountId:t,path:n}=e,i=c.Z.getFolderType(t,n);!x.Z.isVirtualViewFolder(t)&&[g.Oi,g.e9].includes(i)&&s.push([t,n])})),0===s.length)return[];const i=[];return s.forEach((([t,n])=>{let s=c.Z.getPathsByType(t,g.Oi);s.push(...c.Z.getPathsByType(t,g.e9)),s=s.filter((e=>e!==n)),s.length>0&&i.push({items:s.map((s=>({handler:()=>V(e,t,n,s),...(0,te.Z)(s)}))),...(0,te.Z)("Move from $1",[t+"/"+n])})})),i})),ie(this,"getCustomLabelsMenu",(e=>r.C.getByAccountId(g.ut).map((t=>({type:"checkbox",checked:e.indexOf(t.path)>-1,handler:this.toggleLabel(t.path,e),...(0,te.Z)(t.name)}))))),ie(this,"clearAllLabels",(e=>{const t=e.reduce(((e,t)=>({...e,[t]:!1})),{});this.setCustomFlags(t)})),ie(this,"toggleLabel",((e,t)=>()=>{const n=-1===t.indexOf(e);this.setCustomFlags({[e]:n})})),ie(this,"getStandardFlagsMenu",(e=>r.C.getByAccountId(g.MN).map((t=>{const n=function(e){const t=document.createElement("canvas");t.width=32,t.height=32;const n=t.getContext("2d");return n.drawImage(ae,0,0),n.globalCompositeOperation="source-in",n.fillStyle=re[e],n.fillRect(0,0,32,32),t.toDataURL("image/png").replace("data:image/png;base64,","")}(t.name);return{type:"checkbox",checked:t.path===e,handler:this.toggleStandardFlag(t.path,e),label:B.Z.translateFlag(t.path),labelEnglish:t.path,iconPNG:n,iconPNGWhite:n}})))),ie(this,"toggleStandardFlag",((e,t)=>()=>{const n=t===e?(0,J.KR)(g.T4.CLEAR_FLAGS):(0,J.KR)(e);this.setCustomFlags({[g.T4.FLAGGED]:n.flagged,[g.T4.MAIL_FLAG_BIT_0]:n.bit0,[g.T4.MAIL_FLAG_BIT_1]:n.bit1,[g.T4.MAIL_FLAG_BIT_2]:n.bit2})}))}enableThreadedView(){if(!pe())return;const e=le();e&&e.length>0&&e[0]&&i.Z.selectThread(e[0])}enableSenderView(e){if(pe())if(e)i.Z.selectContact(e);else{const e=s.Z.getActiveMessage(),t=e&&e.from[0];t&&t.address&&i.Z.selectContact(t.address)}}setActiveMailDetail(e){I.Z.dispatch({actionType:"MAIL_SET_ACTIVE_COMPONENT",mailDetail:e})}setActiveMessage(e){I.Z.dispatch({actionType:"MAIL_SET_ACTIVE_MESSAGE",message:e})}markAsReadAndGoToNextUnread(){pe()&&(Ne.markRead(),I.Z.dispatch({actionType:"MAIL_GOTO_UNREAD"}))}goToNextUnread(){pe()&&I.Z.dispatch({actionType:A.Z.MAIL_GOTO_NEXT_UNREAD})}goToPreviousUnread(){pe()&&I.Z.dispatch({actionType:A.Z.MAIL_GOTO_PREVIOUS_UNREAD})}clearIfActive(e){setTimeout((()=>{I.Z.dispatch({actionType:"MAIL_CLEAR_IF_ACTIVE",mailDetail:e})}),100)}refreshActiveMessage(){I.Z.dispatch({actionType:"MAIL_REFRESH_ACTIVE_MESSAGE"})}async createDraftFromSent(){const e=await be(!0);e&&C.Z.createDraftFromSent(e)}async reply(){const e=await be(!1);e&&await C.Z.reply(e)}async replyAll(){const e=await be(!1);e&&await C.Z.replyToAll(e)}async forward(){const e=await be(!0);e&&await C.Z.forward(e)}markRead(){pe()&&he((e=>B.Z.setRead(e,!0)))}markUnread(){pe()&&he((e=>B.Z.setRead(e,!1)))}markThreadRead(){if(!pe())return;de(le(!0),(e=>B.Z.setRead(e,!0)))}markThreadUnread(){if(!pe())return;de(le(!0),(e=>B.Z.setRead(e,!1)))}markFlagged(){he((e=>B.Z.setFlagged(e,!0)),(e=>!(0,J.u9)(e)))}markUnflagged(){he((e=>B.Z.setFlagged(e,!1)),(e=>(0,J.u9)(e)))}setCustomFlags(e){he((t=>B.Z.setCustomFlags(t,e)))}async prepareDelete(e,t,n){const s=t||le();let i;if(i=e?s.some((e=>e.sources.size>1)):s.some((e=>[...e.sources.entries()].filter((([e,t])=>!F.Z.isSourceDeleted(e,t))).length>1)),i||n){const i=w.Z.getSelectedFolder();if(!i)return void console.warn("No folder selected");const{accountId:a,path:o=g.ym,type:l}=i,u=l===g.Nz,m=function(e){let t=0;for(const n of e)for(const[e,s]of[...n.sources.entries()]){const{accountId:n,path:i}=r.C.get(e);c.Z.getFolderType(n,i)===g.Nz||s.deleted||++t}return t}(s);if(u||m<=1&&!n);else{const n=r.C.getByFolderId([a,o]),i=s.some((e=>e.sources.has(n.id))),l=ge(e);if(i){if("ask"===l)return void y.Z.showMailDeleteDialogSetting({entries:s,deletePermanently:e})}else{if(t)return void y.Z.showMailDeleteDialogConfirmAll({entries:s,deletePermanently:e});if(s.length>1){if(["selected","folders","ask"].includes(l))return void y.Z.showMailDeleteDialogConfirmAll({entries:s,deletePermanently:e})}else{if("selected"===l)return void y.Z.showMailDeleteDialogFolders({entries:s,deletePermanently:e});if(["folders","ask"].includes(l)){const t=new Set;if(s[0].sources.forEach(((e,n)=>{if(!F.Z.isSourceDeleted(n,e)){const e=R.Z.get(n);if(!e)throw new Error("Filter not found "+n);t.add(e.accountId)}})),t.size>1)return void y.Z.showMailDeleteDialogAccounts({entries:s,deletePermanently:e})}}}}}await this.delete(s,e)}async delete(e,t,n={}){const{setting:s,accountIds:i,sourceFilterIds:a}=n,o=s||ge(t),l=new Map,u=w.Z.getSelectedFolder();if(!u)return void console.warn("No folder selected");const{accountId:m,path:d=g.ym}=u,h=r.C.getByFolderId([m,d]),p=h&&e.some((e=>e.sources.has(h.id))),b=w.Z.isSentFolderSelected();if(e.forEach((e=>{const n=[];e.sources.forEach(((e,s)=>{if(!t&&F.Z.isSourceDeleted(s,e))return void U.ZP.log("Mail",["delete"],`No need to re-delete - sourceFilterId: ${s}`);if(!function(e,t,n){const{accountId:s,path:i}=r.C.get(t),a=c.Z.getFolderType(s,i);return e.deleted||a===g.Nz===n}(e,s,b))return void U.ZP.log("Mail",["delete"],`Will not delete from sent unless Sent folder is selected - isSentSelected: ${b.toString()} - sourceFilterId: ${s}`);const l=r.C.get(s);if(l)return i||a?i&&!i.get(l.accountId)?void U.ZP.log("Mail",["delete"],`Accounts selected to delete from do not match filter - sourceFilterId: ${l.id}`):a&&!a.get(s)?void U.ZP.log("Mail",["delete"],`Folders selected to delete from do not match filter - sourceFilterId: ${s}`):void n.push(s):void("selected"===o&&p?h?.id===s?n.push(s):U.ZP.log("Mail",["delete"],`filter not found - selectedFilter: ${h?h.id:"undefined"} - sourceFilterId: ${s}`):"folders"===o&&p?l.accountId===m?n.push(s):U.ZP.log("Mail",["delete"],`filter not found -  source accountId: ${l.accountId} - selected accountId: ${m} - sourceFilterId: ${s}`):n.push(s));U.ZP.log("Mail",["delete"],`sourceFilter not found! sourceFilterId: ${s}`)})),n.length>0&&l.set(e.id,n)})),0===l.size)return void U.ZP.log("Mail",["delete"],"Nothing to delete");const N=e.filter((e=>l.has(e.id)));N.forEach((e=>{C.Z.closeComposer(e.id)})),t?L.call(N,l):z.call(N,l)}undelete(){const e=le();Q(e)}markAsJunk(){const e=le();E.markAsJunk(e)}markAsNotJunk(){const e=le();E.markAsNotJunk(e)}};const fe=Ne},78635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(2121),i=n(42954);const r={};let a=0;const o={updateThreads:function(){return l("updateThreads",[...arguments])},rerunThreading:function(e,t){return l("rerunThreading",[...arguments])},filter:function(){return l("filter",[...arguments])},start:function(){return l("start",[...arguments])},stop:function(){return l("stop",[...arguments])},addAccount:function(e,t){return l("addAccount",[...arguments])},flushBuffer:function(){return l("flushBuffer",[...arguments])},updateFlags:function(){return l("updateFlags",[...arguments])},startBackgroundActions:()=>{window.addEventListener("message",c,!1)},stopBackgroundActions:()=>{window.removeEventListener("message",c,!1)}};function l(e,t){return new Promise(((n,o)=>{const l=a++;s.Z.runtime.getBackgroundPage((s=>{r[l]={resolve:n,reject:o};const a={promiseId:l,func:e,args:t};s?.postMessage({background:a},i.oP)}))}))}function c(e){if(e.origin!==i.oP)return;const{background:t}=e.data;if(t){const{promiseId:e,results:n,error:s}=t,{resolve:i,reject:a}=r[e];delete r[e],s?a(s):i(n)}}},5955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var s=n(67776),i=n(6478),r=n(21622),a=n(79290),o=n(2121),l=n(74686),c=n(30074);const u="[bookmark update]",m=function(){return new Promise((e=>{l.Z.bookmarksPrivate.updatePartners(((t,n,s)=>{o.Z.runtime.lastError&&(console.warn(u,"failed to call vivaldi.bookmarksPrivate.updatePartners:",o.Z.runtime.lastError.message),t=!1,n=!1),e([t,n,s])}))}))},d=function(e){const t=function(e,n){for(let s=0;s<e.length;s++){const i=e[s];i.url&&(i.partner?console.warn(u,"partner id in bookmark tree without version:",i.partner,i.url):n.set(i.url,i.id)),i.children&&t(i.children,n)}};return Promise.all([new Promise((e=>{o.Z.bookmarks.getTree((t=>{o.Z.runtime.lastError&&console.warn(u,"failed to call chrome.bookmarks.getTree:",o.Z.runtime.lastError.message),e(t)}))})).then((e=>{const n=new Map;return e&&t(e,n),n})),fetch("./default-bookmarks/fallback-partner-ids.json",{method:"GET"}).then((e=>e.json())).then((t=>{let n=t[e];return n||(n=t[a.Z.getFallbackLocale()]),n}))]).then((([e,t])=>{const n={numMatch:0,size:0};return t?Promise.all(function*(e,t,n){const s=Object.keys(t);e:for(const i of s){const s=t[i];n.size+=1;for(const t of s){const s=e.get(t);if(s){console.warn(u,"Match",i,t),n.numMatch+=1,yield new Promise((e=>{o.Z.bookmarks.update(s,{partner:i},(()=>{o.Z.runtime.lastError&&console.warn(u,"failed to update partner:",i,o.Z.runtime.lastError.message),e()}))}));continue e}}console.warn(u,"No match for",i,s.join(" "))}}(e,t,n)).then((()=>n)):n})).then((e=>{console.warn(u,"Urls matched",e.numMatch,"of",e.size)}))},h={init:()=>m().then((([e,t,n])=>t?d(n).then((()=>(i.Z.set(c.kBookmarksVersion,"0"),m().then((([e])=>e))))):e)).catch((e=>(console.warn(u,"error while updating bookmarks:",e),!1))).then((e=>(e||console.warn(u,"failed to update bookmarks, current version:",r.ZP.get(c.kBookmarksVersion)),e)))};var p=n(61858),g=(n(45447),n(91662)),b=n(27673),N=n(63057),f=n(92696),_=n(18345),v=n(30381),E=n.n(v),C=n(43393),w=n(2993),y=n(44025);const S="BookmarkCutIds";let T=!0,k=!0;var I=new Map;function A(){T=!0}function Z(){T=!1,M()}function P(){b.Z.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!0})}function D(){b.Z.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!1})}function M(e=!1){const t=o.Z.bookmarks.getTree(),n=fetch("./default-bookmarks/partners.json").then((e=>e.json())).catch((()=>(console.warn("Failed to load partner bookmarks"),{bookmarks:[],folders:[]})));return Promise.all([t,n]).then((([t,n])=>{b.Z.dispatch({actionType:"BOOKMARKS_INIT",bookmarks:t,failedUpgrade:e,partnerDB:n})}))}function O(e,t){T||b.Z.dispatch({actionType:"BOOKMARKS_ADD_ITEM",id:e,changes:t})}function x(e,t){T||b.Z.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:t})}function L(e,t){T||b.Z.dispatch({actionType:"BOOKMARKS_MOVE_ITEM",id:e,changes:t})}function R(e){b.Z.dispatch({actionType:"BOOKMARKS_REMOVE_ITEM",id:e})}function B(e,t){T||M()}function F(e,t){if(T)return;p.ZP.getItemById(e)&&b.Z.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:{faviconUrl:t}})}function U(e,t){T||b.Z.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:t})}function V(){!1===k&&(k=!0,l.Z.bookmarksPrivate.onFaviconChanged.removeListener(F))}function H(){!0===k&&(k=!1,l.Z.bookmarksPrivate.onFaviconChanged.addListener(F))}function W(e){"Escape"===e.key&&j.setCutIds([])}function z(e,t){if(e===S){const e=t.length>0?t.split(","):[];e.length>0?window.addEventListener("keydown",W,!0):window.removeEventListener("keydown",W,!0),b.Z.dispatch({actionType:"BOOKMARKS_SET_CUT_IDS",ids:e})}}async function G(e){const t=g.ZP.getTabs(e.windowId,!1,e.pages).map((e=>({page:e.pages?void 0:e.page,url:e.pages?void 0:e.page.get("url"),title:"group"===e.type?g.ZP.getTitleByGroupId(e.id,(0,N.Z)("Stack")):(0,y.D1)(e.page),children:e.pages?e.pages.map((e=>({page:e,url:e.get("url"),title:(0,y.D1)(e)}))).toArray():void 0}))).filter((e=>e.children||e.url));if(!t.size)return;const{parentId:n,index:s}=e;if(1!==t.size||e.forceFolder){if(e.isStack){return await Promise.all(t.map((async({children:e,title:t})=>{if(!e?.length)return;const s=await o.Z.bookmarks.create({parentId:n,title:t});return await j.createBookmarks(e,s.id,0),s.id}))).then((e=>e.filter(Boolean)[0]))}{const i={parentId:n,..."number"==typeof s?{index:s}:null},r=await o.Z.bookmarks.create(i),a=E()(r.dateAdded).format("YYYY-MM-DD, HH:mm:ss"),l=e.isSelection?(0,N.Z)("Saved Tab Selection ($1)",[a]):(0,N.Z)("Saved Tabs ($1)",[a]);return await o.Z.bookmarks.update(r.id,{title:l}),await Promise.all(t.map((async e=>{const{children:t,title:n,url:s}=e;if(t?.length){const e=await o.Z.bookmarks.create({parentId:r.id,title:n});await j.createBookmarks(t,e.id,0)}else await o.Z.bookmarks.create({parentId:r.id,title:n,url:s})}))),r.id}}{const{children:e,title:i,page:r}=t.first();if(e?.length){const t={parentId:n,title:i,..."number"==typeof s?{index:s}:null},r=await o.Z.bookmarks.create(t);return await j.createBookmarks(e,r.id,0),r.id}return r&&!e?j.bookmarkPageInFolder(r,n,s):void 0}}function K({clipboardData:e},t,n){e&&(t=p.ZP.validateForClipboard(t),e.setData("vivaldi/x-cut",n),e.setData(s.yR,JSON.stringify(t)),e.setData("text/plain",p.ZP.getDragData("text/plain",t)))}const j=new class{loadPromise(){return h.init().then((e=>M(!e))).then((()=>{T=!1,k=!1,o.Z.bookmarks.onImportBegan.addListener(A),o.Z.bookmarks.onImportEnded.addListener(Z),o.Z.bookmarks.onChanged.addListener(x),o.Z.bookmarks.onCreated.addListener(O),o.Z.bookmarks.onRemoved.addListener(R),o.Z.bookmarks.onMoved.addListener(L),o.Z.bookmarks.onChildrenReordered.addListener(B),l.Z.bookmarkContextMenu.onOpen.addListener(V),l.Z.bookmarkContextMenu.onClose.addListener(H),l.Z.menubarMenu.onOpen.addListener(V),l.Z.menubarMenu.onClose.addListener(H),l.Z.bookmarksPrivate.onFaviconChanged.addListener(F),l.Z.bookmarksPrivate.onMetaInfoChanged.addListener(U),l.Z.utilities.onSharedDataUpdated.addListener(z),l.Z.utilities.getSharedData({key:S,value:""},(e=>{e&&z(S,e)}))}))}setBookmarkBarFolderAndToggleVisibility(e){const t=p.ZP.getBookmarkBarFolderId()!==e||!r.ZP.get(c.kBookmarksBarVisible);return j.setBookmarkBarFolder(e).then((e=>{e&&i.Z.set(c.kBookmarksBarVisible,t)}))}setBookmarkBarFolderAndShow(e){return j.setBookmarkBarFolder(e).then((e=>{e&&i.Z.set(c.kBookmarksBarVisible,!0)}))}async setBookmarkBarFolder(e){const t=p.ZP.getItemById(e);if(!t||!p.ZP.isFolder(t))return!1;const n=p.ZP.getRootId();if(e===n)return!1;const s=p.ZP.getBookmarkBarFolderId();if(s===e)return!0;P();try{s!==n&&await o.Z.bookmarks.update(s,{bookmarkbar:!1}),await o.Z.bookmarks.update(e,{bookmarkbar:!0})}catch(e){console.warn(`BookmarkActions: Failed to set bookmark bar folder: ${e}`)}finally{D()}return!0}toggleSpeeddialFolder(e){const t=p.ZP.getItemById(e);t&&p.ZP.isFolder(t)&&o.Z.bookmarks.update(t.id,{speeddial:!t.speeddial})}setCutIds(e){l.Z.utilities.setSharedData({key:S,value:e.length>0?e.join():""})}async move(e,t,n){const s=p.ZP.validateForDrag(e).map((e=>p.ZP.getItemById(e)?.id)).filter(Boolean);P();const i=await function(e,{parentId:t,index:n}){return e.reduce((async(e,s)=>{const i=await e,r=i[i.length-1]?.index,a=await o.Z.bookmarks.move(s,{parentId:t,index:void 0!==r?r+1:n});return i.push(a),Promise.resolve(i)}),Promise.resolve([]))}(s,{parentId:t,index:n});return D(),i.map((e=>e.id))}reorder(e,t){return e=p.ZP.validateForDrag(e),P(),Promise.all(e.reverse().map((e=>o.Z.bookmarks.move(e,{parentId:t,index:0}).then((e=>e.id))))).then((e=>(D(),e)))}async duplicate(e,t,n){const s=(0,f.Z)(e.map((e=>p.ZP.getItemById(e))).filter((e=>e&&!e.trash)));P();const i=await Promise.all(s.map((async e=>{const{title:s,url:i,description:r,nickname:a,children:l}=e,c=await o.Z.bookmarks.create({index:n++,parentId:t,title:s,...(0,_.Z)(i?{url:i}:null),...(0,_.Z)(r?{description:r}:null),...(0,_.Z)(a?{nickname:a}:null)});if(!c)throw new Error("Bookmark was not created");if(l?.length){const e=l.map((({id:e})=>e));await this.duplicate(e,c.id,0)}return c.id})));return D(),i}async createWithPromise(e,t,n){P();const s=await((e,t,n)=>Promise.all(e.map((async e=>{if(e.separator)return this.createSeparator(t,void 0===n?void 0:n++);const s=await o.Z.bookmarks.create({title:e.title,url:e.url||(e.children?null:w.p),parentId:t,description:e.description||null,nickname:e.nickname||null,index:void 0===n?void 0:n++});return e.children?.length?await j.createWithPromise(e.children,s.id,0):s}))))(e,t,n);return D(),s}createSeparator(e,t){return o.Z.bookmarks.create({title:"---",url:w.p,parentId:e,description:"separator",nickname:"",index:t})}async createBookmarks(e,t,n){P();const s=await Promise.all(e.map((({url:e,title:s})=>o.Z.bookmarks.create({parentId:t,url:e,title:s,index:n++}).then((({id:e})=>e)))));return D(),s}remove(e=[]){return P(),Promise.all(e.map((e=>{if(I.get(e))return I.get(e);const t=p.ZP.getItemById(e);return t&&p.ZP.isFolder(t)&&t.id===r.ZP.get(c.kBookmarksSaveFolder)&&i.Z.set(c.kBookmarksSaveFolder,p.SZ),t&&p.ZP.isFolder(t)?o.Z.bookmarks.removeTree(e).catch((()=>console.warn(`Error removing bookmark tree: ${e}`))).then((()=>I.delete(e))):o.Z.bookmarks.remove(e).catch((()=>console.warn(`Error removing bookmark: ${e}`))).then((()=>I.delete(e)))}))).then((()=>D()))}async emptyTrash(){!1===await new Promise((e=>l.Z.bookmarksPrivate.emptyTrash(e)))&&console.warn("Empty trash failed.")}bookmarkAllOpenPages(e,t,n){return G({pages:g.ZP.getPages(e),windowId:e,parentId:t,index:n,isStack:!1,isSelection:!1,forceFolder:!0})}bookmarkPages(e,t,n,s,i){return G({pages:e instanceof C.List?e:C.List.of(e),windowId:t,parentId:s,index:i,isStack:n,isSelection:!0,forceFolder:e instanceof C.List})}async bookmarkPageInFolder(e,t=p.ZP.getRootNode().id,n){const{url:s}=e,i=(0,y.D1)(e),{id:r}=await o.Z.bookmarks.create({parentId:t,url:s,title:i,..."number"==typeof n?{index:n}:null});return r}cut(e,t){K(e,t,"true"),j.setCutIds(t),e.stopPropagation(),e.preventDefault()}copy(e,t){K(e,t,"false"),e.stopPropagation(),e.preventDefault()}paste({clipboardData:e},t,n){const i=p.ZP.getItemById(t);if(!i||!e)return Promise.resolve({isCut:!1,ids:[]});let r,a;if(p.ZP.isFolder(i))r=i.id,!0===n&&i.children?(a=i.children.length,a>0&&i.children[a-1].trash&&a--):a=0;else if(r=i.parentId,a=(i.index||0)+1,void 0===r)return console.log("error","Can not paste, target has no parent"),Promise.resolve({isCut:!1,ids:[]});const o=-1!==e.types.findIndex((e=>e===s.yR))?JSON.parse(e.getData(s.yR)):[];if(0===o.length)return Promise.resolve({isCut:!1,ids:[]});return p.ZP.getCutIds().length>0&&"true"===e.getData("vivaldi/x-cut")?j.move(o,r,a).then((e=>(j.setCutIds([]),{isCut:!0,ids:e}))):j.duplicate(o,r,a).then((e=>({isCut:!1,ids:e})))}async onDropEvent(e,t,n,i){if(e.dataTransfer.types.includes(s.yR)){const r=JSON.parse(e.nativeEvent.dataTransfer.getData(s.yR));s.ZP.isCopyModifierPressed(e)||i&&i.disableMove?await j.duplicate(r,t,n):await j.move(r,t,n)}else{const i=await s.ZP.getUrlsFromEventPromise(e,!0);await j.createBookmarks(i,t,n)}}},Y=j},43556:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(56026),i=n(27673),r=n(30801);const a=new class{add(e,t,n){i.Z.dispatch({actionType:r.Z.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM,pageId:e,id:t,url:n})}update(e,t,n){const a=s.Z.getQueue(e);a&&0!==a.get("id")&&a.get("url")===t&&i.Z.dispatch({actionType:r.Z.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM,pageId:e,id:a.get("id"),url:n})}remove(e,t){i.Z.dispatch({actionType:r.Z.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM,pageId:e,id:t})}}},56530:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(46540),i=n(88279),r=n(27673),a=n(2121),o=n(74686);const l="BreakModeId";function c(e,t){e===l&&"boolean"==typeof t&&r.Z.dispatch({actionType:"BREAKMODE",isActive:t})}const u={toggleBreakMode:async function(){const e=!s.Z.getState().isActive;await async function(e){const t=e?"mute":"unmute";e&&r.Z.dispatch({actionType:"TOOLTIP_SET",id:null});await i.Z.setMuting("all",t),await o.Z.utilities.setSharedData({key:l,value:e});const n=await a.Z.tabs.query({});await Promise.all(n.map((async t=>{await new Promise((n=>{if(!(t.id&&t.id>=0))return n();a.Z.tabs.sendMessage(t.id,{breakmode:e},n)}))})))}(e)},loadPromise:async function(){o.Z.utilities.onSharedDataUpdated.addListener(c),await new Promise((e=>{o.Z.utilities.getSharedData({key:l,value:!1},e)}))&&c(l,!0)}}},66854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var s=n(59896),i=n(55002),r=n(82495),a=n(75438),o=n(91761),l=n(21530),c=n(49856),u=n(38504),m=n(78508),d=n(91662),h=n(6478),p=n(21622),g=n(92144),b=n(27673),N=n(30801),f=n(54471),_=n(63057),v=n(2121),E=n(74368);const C=function(e){const t=i.Z.getCalendars().find((t=>t.id===e)),{name:n=(0,_.Z)("Events")}=t||{};v.Z.fileSystem.chooseEntry({type:"saveFile",suggestedName:`${n}.ics`,accepts:[{extensions:["ics"]}],acceptsAllTypes:!0},(t=>function(e,t){if(!e)return;const n=i.Z.getEventsPerCalendar(t);n.forEach((e=>{e.recurrenceExceptions?.length&&e.recurrenceExceptions.forEach((t=>{const s=n.find((e=>e.id===t.exception_event_id));s&&(s.recurrenceId=t.date,s.sequence=e.sequence)}))}));const s=r.Z.eventsToICalendar(n);e.createWriter((e=>{const t=new Blob([s]);e.onwriteend=n=>{0===e.length&&e.write(t)},e.truncate(0),e.onerror=e=>{E.ZP.error("Calendar",["export"],"Exporting events failed.",e)}}))}(t,e)))};var w=n(18345),y=n(80008),S=n.n(y),T=n(74686),k=n(45932),I=n(30074),A=n(54483),Z=n(85327),P=n(90870),D=n(13289),M=n(42151),O=n(53548),x=n(97562),L=n(65531),R=n(44025),B=n(34155);const{getLocalGoogleTasksCalendars:F,getPollResultText:U}=r.Z,V=new Set(S().tz.names()),H=["day","week","multiweek","month","year","agenda"],W=["day","week","agenda"];const z=()=>({title:(0,_.Z)("Change External Event"),body:(0,_.Z)("You’re changing an external event. Changes you make will only show locally and may be overwritten by changes from event organiser."),actions:[{title:(0,_.Z)("Apply Change"),action:"confirm"}],cancelAction:{title:(0,_.Z)("Cancel"),action:"cancel",default:!0}}),G=e=>{let t="",n="";switch(e){case"save":t=(0,_.Z)("Change Recurring Event"),n=(0,_.Z)("You’re changing a repeating event. Do you want to change this occurrence only, this and upcoming events or change all events from start?");break;case"trash":t=(0,_.Z)("Delete Recurring Event"),n=(0,_.Z)("You’re deleting a repeating event. Do you want to delete this occurrence only, this and upcoming events or delete all events from start?");break;case"move":t=(0,_.Z)("Reschedule Recurring Event"),n=(0,_.Z)("You’re rescheduling a repeating event. Do you want to change this occurrence only, this and upcoming events or reschedule all events from start by same amount?");break;case"copy":t=(0,_.Z)("Copy Recurring Event"),n=(0,_.Z)("You’re copying a repeating event. Do you want to copy this occurrence only, this and upcoming events or copy all events from start?")}return{title:t,body:n,actions:[{title:(0,_.Z)("Only this Event"),action:"single",default:!0},{title:(0,_.Z)("This and Upcoming"),action:"upcoming"},{title:(0,_.Z)("All Events"),action:"all"}],cancelAction:{title:(0,_.Z)("Cancel"),action:"cancel"}}};function K(e,t){const n={start:0,end:0},s=S()(t.start),i=t.end&&S()(t.end);return e.task?i?t.byDateOnly?(n.start=e.start?S()(e.start).year(s.year()).month(s.month()).date(s.date()).valueOf():t.start,n.due=e.due?S()(e.due).year(i.year()).month(i.month()).date(i.date()).valueOf():t.end):(n.start=t.start,n.due=t.end):(t.byDateOnly?n.due=e.due?S()(e.due).year(s.year()).month(s.month()).date(s.date()).valueOf():t.start:n.due=t.start,n.start=e.start&&e.due?n.due-(e.due-e.start):0):t.byDateOnly?(n.start=S()(e.start).year(s.year()).month(s.month()).date(s.date()).valueOf(),n.end=i?S()(e.due).year(i.year()).month(i.month()).date(i.date()).valueOf():e.end?n.start+e.end-e.start:0):(n.start=t.start,n.end=t.end||e.end?n.start+e.end-e.start:0),t.hasOwnProperty("allDay")&&(n.allDay=t.allDay),n}function j(e,t,n){const{calendarFilter:s}=i.Z.getCalendarState(e),{anchorDate:a,displayMode:o,selectedDate:l}=s;let c;switch(o){case"agenda":case"multiweek":c="week";break;default:c=o}const u="previous"===t?a.clone().subtract(1,c):a.clone().add(1,c);let m;if(n&&r.Z.getDisplayRange(u,o).contains(n))m=n.clone();else if("month"===o){const e=r.Z.getDisplayRange(u,o),t=(0,x.Xq)(l,a);m=(0,x.FY)(t,l.weekday(),u,!1),m.isAfter(e.end,"day")&&(m=(0,x.Ro)(l.weekday(),u,!0))}else m="previous"===t?l.clone().subtract(1,c):l.clone().add(1,c);$.updateCalendarUI(e,{anchorDate:u,selectedDate:m})}function Y(e){if(null==e){const e=new Error("No page Id given");throw E.ZP.error("Calendar","editing",e),e}let{editor:t}=i.Z.getCalendarState(e);if(e!==t.pageId&&(t=i.w.get(e)),!t){const t=new Error(`Could not find editor for page ${e}`);throw E.ZP.error("Calendar","editing",t),t}return t}const $=new class{async loadAccounts(){return new Promise((e=>T.Z.calendar.getAllAccounts(e)))}async loadCalendars(){return new Promise((e=>T.Z.calendar.getAll(e)))}async loadEvents(){return $.transformVivaldiEvents(await T.Z.calendar.getAllEvents())}async loadPromise(){if(!p.ZP.get(I.kMailIsTurnedOff)){const[e,t,n]=await Promise.all([$.loadAccounts(),$.loadEvents(),$.loadCalendars(),u.Z.loadNotifications()]);b.Z.dispatch({actionType:"CALENDAR_INIT",accounts:e,events:t,calendars:n}),$.loadAlarms()}}transformVivaldiEvents(e){return e.map((e=>{const{rrule:t,start:n=0,end:s,due:i,attachment:a,...o}=e;let l,c=0,u=0,m=0;if(e.timezone===k.$T||e.allDay){const e=S().tz.guess()||"",t=S().tz.zone(e);t&&(c=t.utcOffset(n||0)*k.lb,u=t.utcOffset(s||0)*k.lb,m=t.utcOffset(i||0)*k.lb)}else V.has(o.timezone)||(o.timezone=S().tz.guess());return t&&(e.task?n?l=(0,O.Qj)(t,n+c,e.timezone):i&&(l=(0,O.Qj)(t,i+m,e.timezone)):l=(0,O.Qj)(t,n+c,e.timezone)),{...o,...(0,w.Z)(l?{recurrence:l}:null),start:n?n+c:0,end:s?s+u:0,due:i?i+m:0,attachment:r.Z.stringToAttachments(a)}}))}loadAlarms(){v.Z.alarms.getAll((e=>{b.Z.dispatch({actionType:"CALENDAR_ALARMS_INIT",alarms:e})}))}createException(e,t,n,s){return new Promise((i=>{T.Z.calendar.createEventException(e,t,n,s,(e=>i($.transformVivaldiEvents([e])[0])))}))}createEvent(e,t=!0){return new Promise(((n,a)=>{const o=(0,x.sG)(e),l=i.Z.getCalendars().find((e=>e.id===o.calendarId));if(l&&l.hidden){const{id:e}=l;$.updateCalendar(e,{hidden:!1})}T.Z.calendar.eventCreate(o,(e=>{if(v.Z.runtime.lastError)E.ZP.error("Calendar","vivaldi.calendar.create failed:",v.Z.runtime.lastError),a("Error creating event");else{if(t&&r.Z.isRemoteCalendar(e.calendarId)){const[t]=$.transformVivaldiEvents([e]);s.Z.createEvent(t)}const i=$.transformVivaldiEvents([e])[0];i.notifications&&i.notifications.forEach((e=>{(0,u.r)(e,i)})),n(i)}}))}))}createEvents(e){return new Promise(((t,n)=>{const s=e.map((e=>{const{recurrence:t,...n}=e;return{rrule:t?A.Ci.optionsToString({...t.origOptions,count:0===t.origOptions.count?1:t.origOptions.count}):"",...n}})).map((e=>(0,x.sG)(e)));T.Z.calendar.eventsCreate(s,(e=>{v.Z.runtime.lastError&&(E.ZP.error("Calendar","vivaldi.calendar.create failed:",v.Z.runtime.lastError),n(v.Z.runtime.lastError)),t(e)}))}))}eventToCreateDetails(e){const{alarmId:t,id:n,recurrence:s,recurrenceExceptions:i,trash:a,trash_time:o,notifications:l,filteredOut:c,invites:u,attachment:m,recurrenceId:d,...h}=e,p={...h,attachment:r.Z.attachmentsToString(m),is_template:!1};return s&&(p.rrule=A.Ci.optionsToString({...s.origOptions,count:0===s.origOptions.count?1:s.origOptions.count})),p.timezone=p.timezone||S().tz.guess(),p.notifications=l?.map((e=>({name:e.name,when:e.when}))),p.invites=u?.map((e=>({address:e.address,name:e.name||"",partstat:e.partstat||"NEEDS-ACTION"}))),p}async updateEvent(e,t,n=!1){function a(t){const n=parseInt(e.id.split(":")[1]);let s=0,i=e.recurrence;if(n!==e.start){s=e.start-n;const t=(0,O.EE)(e.recurrence?.origOptions,s);i=t&&(0,O.Zm)({...t,...(0,w.Z)(t.dtstart?{dtstart:new Date((0,x.FL)(t.dtstart).valueOf()+s)}:null)})}const r=t.start+s,a=r+e.end-e.start;return{...e,uid:t.uid,id:t.id,start:r,end:a,recurrence:i}}function o(e){const{id:t,trash_time:n,recurrenceExceptions:s,recurrence:i,notifications:a,invites:o,eventExceptions:l,filteredOut:c,attachment:u,recurrenceId:m,...d}=e;return d.rrule=i?i.toString():"",new Promise((e=>T.Z.calendar.updateEvent(t,{...d,attachment:r.Z.attachmentsToString(u)},(t=>e($.transformVivaldiEvents([t])[0])))))}let c,d=(0,x.sG)(e,!1);if(d.id=d.id.split("-")[0],r.Z.isGeneratedRecurringEvent(e)){const i=d.id.split(":")[0],l=parseInt(d.id.split(":")[1]),u=r.Z.getGeneratedSourceEvent(e);switch(t){case"single":if(r.Z.getBaseEventIfException(d)){const e=u?.recurrenceExceptions?.find((e=>e.date===d.recurrenceId))?.exception_event_id;if(!e)throw new Error("Could not find exception event id");d.id=e,d.recurrence=void 0,d.recurrenceExceptions=[],c=await o(d),d=u}else{const t=$.eventToCreateDetails({...e,calendarId:e.calendarId,start:e.start,sequence:0,recurrence:void 0});c=await $.createEvent(t,!1),d=await $.createException(i,c.id,!1,l)}c.recurrenceId=l;break;case"upcoming":if(!l||!u)throw new Error(`Invalid event id to update, ${d.id}`);const{recurrence:t}=u;if(!t)throw new Error(`No recurrence on event to update, ${d.id}`);const m=new Date(l),h=(0,O._v)(t,m);if(!h){d=a(u);break}const{origOptions:p}=t,g=e.start-l,b=d.recurrence&&(0,O.EE)({...d.recurrence.origOptions},g),N=(0,O.Zm)({...p,until:h});let f,_;const E=p.count;if(E){const e=N.all().length;f=A.Ci.optionsToString({...p,count:e});const t=E-e;_=b&&(0,O.Zm)({...b,count:t,dtstart:m})}else f=A.Ci.optionsToString({...p,until:(0,x.VV)(h)}),_=b&&(0,O.Zm)({...b,dtstart:m});const C=await new Promise((e=>{T.Z.calendar.updateEvent(u.id,{rrule:f},(t=>{if(v.Z.runtime.lastError)throw new Error(v.Z.runtime.lastError);e($.transformVivaldiEvents([t])[0])}))}));return r.Z.isRemoteCalendar(C.calendarId)&&n&&s.Z.updateEvent(C),d.uid=r.Z.generateGUID(),d.href="",d.etag="",d.trash||(d.recurrence=_,d=await $.createEvent($.eventToCreateDetails(d))),d;default:if(!u)throw new Error(`Source event for ${e.id} not found`);d=a(u)}}(d.timezone===k.$T||d.allDay)&&(d.start&&(d.start=(0,x.VV)(new Date(d.start)).valueOf()),d.end&&(d.end=(0,x.VV)(new Date(d.end)).valueOf()),d.end_recurring&&(d.end_recurring=(0,x.VV)(new Date(d.end_recurring)).valueOf()),d.due&&(d.due=(0,x.VV)(new Date(d.due)).valueOf()));const h=i.Z.getEvents(),p=h.find((e=>e.id===d.id)),g=r.Z.isOwnEvent(d),b=r.Z.shouldIncrementSequence(d,h);if(g&&b){const{sequence:e}=d;d.sequence=e?e+1:1,d.trash||function(e,t,n,s=!1){if(!(t.invites&&0!==t.invites.length||n&&n.invites&&0!==n.invites.length))return;if(!t.invites||!e)throw new Error("Missing invites from draft or invalid event Id");const i=n?.invites?n.invites:[],a=(0,D.Z)(t.invites,i,"address"),o=(0,D.Z)(i,t.invites,"address"),c=(0,D.Z)(i,o,"address");if(a.forEach((t=>{T.Z.calendar.createInvite({event_id:e,name:t.name||"",address:t.address,partstat:t.partstat})})),c.forEach((e=>{const n=t.invites&&t.invites.find((t=>t.address===e.address));n&&T.Z.calendar.updateInvite({id:e.id,name:n.name,partstat:n.partstat})})),o.forEach((e=>T.Z.calendar.deleteInvite(e.id))),r.Z.isOwnEvent(t)){const e=[];a.length&&e.push(["create",a]),s&&c.length&&e.push(["update",c]),o.length&&e.push(["cancel",o]),l.Z.sendAttendeeMails(t,e)}}(d.id,d,p,!0)}return d.trash||function(e,t){const n=t.notifications||[];if(!e)throw new Error("Can not save event notifications, invalid event Id.");const[s,i]=(0,P.Z)(n,(e=>!e.id)),r=m.Z.getState().notifications.filter((e=>e.event_id===t.id)),[a,o]=(0,P.Z)(i,(e=>r.some((t=>t.id===e.id))));s.filter((e=>!r.some((t=>e.when===t.when)))).forEach((n=>{u.Z.createNotification({event_id:e,when:n.when,period:n.period||0,delay:n.delay||0,name:n.name||"",description:n.description||""},t)})),a.forEach((e=>{u.Z.updateNotification(e,t)})),o.forEach((e=>{u.Z.deleteNotification(e)}))}(d.id,d),n&&(p&&p.calendarId!==d.calendarId?(r.Z.isRemoteCalendar(p.calendarId)&&s.Z.deleteEvent(p.id),r.Z.isRemoteCalendar(d.calendarId)&&s.Z.createEvent(s.Z.resetEventRemoteData(d))):r.Z.isRemoteCalendar(d.calendarId)&&s.Z.updateEvent(d,c)),o(d)}selectEvent(e,t){b.Z.dispatch({actionType:"CALENDAR_EVENT_SELECT",editor:e,options:t})}addEventCommand(e){e.task||e.start||(e.start=(0,x.zX)(Date.now())),e.url?.startsWith("data:")&&(e.url="");const t={pageId:i.Z.getDialogResourceKey(),uid:Symbol("AddEventDialog")};$.editEvent(t,null,e),b.Z.dispatch({actionType:"MAIN_SHOW_CALENDAR_EDIT_EVENT",options:{editor:t}})}addCalendarCommand(){b.Z.dispatch({actionType:N.Z.MAIN_SHOW_CREATE_CALENDAR_DIALOG})}addEditEventCommand(e){const t=Y(e),{selectedEvent:n,events:s}=i.Z.getCalendarState(e||NaN);if(n){const e=s.find((e=>e.id===n));$.editEvent(t,e)}else $.editEvent(t)}editEventCommand(e){const t=Y(e);$.editEvent(t)}editEvent(e,t,n){let s;if(!t){const{calendarFilter:t}=i.Z.getCalendarState(e.pageId),a=e.pageId===i.Z.getPanelResourceKey(),o=t.allDaySelected&&a?"day"===t.displayMode:["day","week"].includes(t.displayMode),{start:l,end:c,task:u=!1,allDay:m=o,title:d=""}=n||{};let h=0,g=0;if(!u){const e=t.selectedDate.valueOf();h=l||e,g=c?m?S()(c).startOf("day").add(1,"day").valueOf():c:m?S()(h).add(1,"day").valueOf():h+p.ZP.get(I.kCalendarDefaultDuration)}const b=p.ZP.get(I.kCalendarDefaultNotification);let N;if(-1!==b&&(N=[{id:"",name:"",when:b*k.lb}]),!r.Z.doesCalendarsExistsAndShowWarning())return!1;const f=i.Z.getDefaultCalendar();let _=f?.id??"";const v=i.Z.getAccounts().find((e=>e.id===f?.accountId));if("google"===v?.account_type)if(u&&!f?.supportedCalendarComponent?.vtodo){const e=F(v);e.length>0&&(_=e[0].id)}else if(!f?.supportedCalendarComponent?.vevent){const e=i.Z.getCalendars().find((e=>e.accountId===v.id&&e.supportedCalendarComponent?.vevent));e&&(_=e.id)}if(n){const{is_template:e,...t}=n;s={...t,title:d,calendarId:_,uid:r.Z.generateGUID(),id:"",start:h,end:g,allDay:m,task:u,notifications:N,invites:[],attachment:[]}}}const a=i.Z.getEditState();if(a.eventDraft){"cancel"===p.ZP.get(I.kCalendarClickOutside)?this.cancelEventEdit(a.editor):this.saveEventEdit(a.editor,t||s)}b.Z.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:t?(0,M.Z)(t):s})}async pollAllCalDAVAccountsWithStatus(){const e=await $.pollAllCalDAVAccounts();g.Z.setStatus(U(e),6e3)}async pollAllCalDAVAccounts(e){const t=i.Z.getAccounts().filter((e=>e.url)).map((e=>e.id)),n={didPoll:!1,calendars:[],message:"",error:!1};if(0===t.length)return n;const s=i.Z.getCalendars().filter((e=>t.some((t=>t===e.accountId)))).filter((e=>e.active)).map((e=>e.lastChecked)).filter(Boolean).reduce(((e,t)=>t>e?t:e),0)+6e4<=Date.now();return e&&!s?n:await $.pollCalDAVAccounts(t)}async pollCalDAVAccounts(e){return await s.Z.pollCalDAV(e)}updateEventEdit(e,t){const{eventDraft:n}=i.Z.getEditState();if(n&&n.task!==t.task)if(t.task)t.start=0,t.allDay?t.due=n.end-k.hd:t.due=n.end;else if(n.due)t.end=n.due,t.start=n.start?n.start:n.due-p.ZP.get(I.kCalendarDefaultDuration);else{const e=(0,x.zX)(Date.now());t.start=e,t.end=e+p.ZP.get(I.kCalendarDefaultDuration)}if(n&&n.allDay!==t.allDay&&(t.allDay?t.end&&(t.end=t.end+k.hd):(t.end&&(t.end=t.end-k.hd),t.timezone===k.$T&&(t.timezone=""))),!t.organizer&&t.invites&&t.invites.length){const{invites:e}=t,n=i.Z.getCalendars().find((e=>e.id===t.calendarId));if(n){const s=i.Z.getAccountForCalendar(n.id),r=s&&"google"===s.account_type?s.username:p.ZP.get(I.kCalendarMailAccount);t.organizer=r,e.find((e=>e.address===r))||e.push({id:"",event_id:t.id,address:r,partstat:"ACCEPTED"})}}const{calendarId:s,task:a}=t,o=i.Z.getAccountForCalendar(s);if("google"===o?.account_type&&a&&n&&!n.task){const e=r.Z.getLocalGoogleTasksCalendars(o);e.length&&(t.calendarId=e[0].id,t.allDay=!0,t.timezone=k.$T)}b.Z.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:t})}cancelEventEdit(e){b.Z.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:null})}async saveEventEdit(e,t){const{eventDraft:n,editor:s,events:a}=i.Z.getCalendarState(e.pageId);if(!n||s.pageId!==e.pageId||s.uid!==e.uid)return!1;if(!r.Z.doesCalendarsExistsAndShowWarning())return!1;n.calendarId||(n.calendarId=i.Z.getDefaultCalendar()?.id??""),n.id=n.id.split("-")[0];const o=a.find((e=>e.id===n.id)),u=r.Z.shouldSaveEvent(n,o);if("IGNORE"===u)return $.cancelEventEdit(e),!0;if("DELETE"===u)return await $.trashEvent(e,n.id);if(n.id){if("SAVE_INVITED"!==u&&!r.Z.isOwnEvent(n)){const{action:e}=await c.Z.showModal({modal:z()});if("cancel"===e)return!0}let s="all";if(o&&r.Z.isRecurringEvent(o)){const{action:e}=await c.Z.showModal({modal:G("save")});s=e}"all"!==s&&"upcoming"!==s&&"single"!==s||$.updateEvent(n,s,!0),$.cancelEventEdit(e),t&&$.editEvent(e,t)}else{const t=await $.createEvent($.eventToCreateDetails({...n,title:n.title||""}));t?.invites?.length&&l.Z.sendAttendeeMails(t,[["create",t.invites]]),$.selectEvent(e,{event:t,publish:!1})}return!0}async moveEvent(e,t,n){const s=i.Z.getEvent(t);if(!s)return;if(!r.Z.isOwnEvent(s)){const{action:e}=await c.Z.showModal({modal:z()});if("cancel"===e)return s}const a=K(s,n);!1===n.allDay&&s.allDay&&s.end-s.start===k.hd&&(a.end=a.start+p.ZP.get(I.kCalendarDefaultDuration));const o={...s,...a};if(!r.Z.isRecurringEvent(s))return $.cancelEventEdit(e),$.updateEvent(o,void 0,!0);{const{action:e}=await c.Z.showModal({modal:G("move")});if("all"===e||"upcoming"===e||"single"===e)return $.updateEvent(o,e,!0)}}async copyEvent(e,t,n){const s=i.Z.getEvent(t);if(s){let e="";const t=K(s,n),i={...s,...t,uid:r.Z.generateGUID(),etag:"",href:""},{recurrence:a}=s;if(a){if(e=await c.Z.showModal({modal:G("copy")}),"cancel"===e)return;if("single"===e)i.recurrence=void 0;else{const t=n.start-s.start,r=(0,O.EE)(a.origOptions,t);if("upcoming"===e){r.dtstart=new Date(i.start);const e=a.origOptions.count;if(e){let t=0;const n=(0,x.VV)(new Date(s.start));a.all(((e,s)=>!(e>=n)||(t=s,!1))),r.count=e-t}}else"all"===e&&a.origOptions.dtstart&&(r.dtstart=(0,x.FL)(new Date(a.origOptions.dtstart.valueOf()+t)),i.start=r.dtstart?.valueOf()||0,i.end=i.start+s.end-s.start);a.origOptions.until&&(r.until=(0,x.FL)(new Date(a.origOptions.until.valueOf()+t))),i.recurrence=(0,O.Zm)(r)}}return $.createEvent($.eventToCreateDetails(i))}}async trashEvent(e,t,n){function a(e,t){return e.invites?.length&&r.Z.isOwnEvent(e)&&t.pageId!==i.Z.getMailResourceKey()}function o(n){const o=t.split(":")[0];i.Z.getEventsPerCalendar(n.calendarId).forEach((e=>{e.recurrenceExceptions&&e.recurrenceExceptions.forEach((e=>{const{exception_event_id:t,parent_event_id:n}=e;t&&o===n&&$.deleteEvent(t)}))})),$.updateEvent({...n,trash:!0},"all"),$.cancelEventEdit(e),r.Z.isRemoteCalendar(n.calendarId)&&s.Z.deleteEvent(o),a(n,e)&&l.Z.sendAttendeeMails(n,[["cancel",n.invites??[]]])}if(t){const[u,m]=t.split("-")[0].split(":"),d=parseInt(m),h=i.Z.getEvent(u);if(!h)return!1;if(r.Z.isRecurringEvent(h)){switch(n??(await c.Z.showModal({modal:G("trash")})).action){case"single":$.createException(u,"0",!0,d).then((t=>{if(r.Z.isRemoteCalendar(t.calendarId)&&(t.sequence=parseInt(t.sequence)+1,s.Z.updateEvent(t)),$.cancelEventEdit(e),a(h,e)){const{recurrence:e,...t}=h;l.Z.sendAttendeeMails(t,[["cancel",h.invites??[]]],!0)}}));break;case"upcoming":{const{recurrence:t}=h;if(!t||!h.start)return!1;const n=(0,O._v)(t,new Date(d));if(!n){o(h);break}const{count:s,...i}=t.origOptions,r=(0,O.Zm)({...i,until:n});if(T.Z.calendar.updateEvent(u,{rrule:r.toString()}),$.cancelEventEdit(e),a(h,e)){const e={...h,recurrence:r};l.Z.sendAttendeeMails(e,[["update",h.invites??[]]])}break}case"all":o(h)}}else o(h)}else $.cancelEventEdit(e);return!0}restoreEvent(e,t){if(t||(t=i.Z.getCalendarState(e.pageId).trashedEvents.slice(-1)[0]),t){const{id:e,calendarId:n,title:i,start:a,end:o}=t;$.updateEvent({id:e,calendarId:n,title:i,start:a,end:o,trash:!1}),t.invites?.length&&l.Z.sendAttendeeMails(t,[["create",t.invites]]),r.Z.isRemoteCalendar(n)&&s.Z.createEvent(t)}}cancelEventChange(e){const t=i.Z.getEditState();if(!t||!t.eventDraft)return;const n=i.Z.getPendingEvent();$.cancelEventEdit(e),n&&$.editEvent(e,n)}createAccount(e){return new Promise(((t,n)=>{T.Z.calendar.createAccount(e,(e=>{if(v.Z.runtime.lastError)return E.ZP.error("Calendar","create account",v.Z.runtime.lastError),n(v.Z.runtime.lastError);t(e)}))}))}updateAccount(e){const{id:t,...n}=e;T.Z.calendar.updateAccount(t,n,(e=>{v.Z.runtime.lastError&&E.ZP.error("Calendar","update account",v.Z.runtime.lastError)}))}async updateCalendar(e,t,n=!0){const a=async(e,t)=>new Promise((n=>{T.Z.calendar.update(e,t,(e=>{v.Z.runtime.lastError&&E.ZP.error("Calendar","update calendar",v.Z.runtime.lastError),n(e)}))})),l=i.Z.getAccountForCalendar(e);if(!l)return!1;let c;if(r.Z.isCalDAV(l.account_type)&&n?(await s.Z.updateCalendar(e,t),c=await a(e,t)):c=await a(e,t),t.active){const t=i.Z.getAccountForCalendar(e);t&&r.Z.isCalDAV(t.account_type)?s.Z.pollCalDAV([t.id]):"ical"===t?.account_type&&o.Z.fetchAndCreate(t)}return c}toggleCalendarVisibility(e){const t=i.Z.getCalendars().find((t=>t.id===e));t&&this.updateCalendar(e,{hidden:!t.hidden})}setDefaultCalendarId(e){i.Z.getCalendars().find((t=>t.id===e))&&(h.Z.set(I.kCalendarDefaultCalendarId,e),b.Z.dispatch({actionType:"CALENDAR_SET_DEFAULT"}))}setDefaultAccountId(e){i.Z.getAccounts().find((t=>t.id===e))&&(h.Z.set(I.kCalendarDefaultAccountId,e),b.Z.dispatch({actionType:"CALENDAR_SET_DEFAULT"}))}async createCalendar(e,t=!1){const n=i.Z.getAccounts().find((t=>t.id===e.accountId)),r=!!(e&&n&&n.url);if(n&&t&&r){const{status:t,message:i,name:r,ctag:a}=await s.Z.createCalendar(n,e);if(!t)return{result:{status:t,message:i}};e.name=r,e.ctag=a||""}try{const t=await T.Z.calendar.create(e);return{result:{status:!0,message:(0,_.Z)("Success")},calendar:t}}catch(n){E.ZP.error("Calendar","createCalendar ",n);const r=i.Z.getAccounts().find((t=>t.id===e.accountId)),a=!(!r||!r.url);return t&&r&&a&&await s.Z.deleteCalendar(r,e.name),{result:{status:!1,message:n}}}}deleteAccount(e){return new Promise(((t,n)=>{T.Z.calendar.deleteAccount(e,(e=>{if(v.Z.runtime.lastError)return E.ZP.error("Calendar","Delete calendar account",v.Z.runtime.lastError),n(!1);t(e)}))}))}async deleteCalendar(e,t=!1){const n=i.Z.getAccounts().find((t=>t.id===e.accountId));if(!n)return{status:!1,message:(0,_.Z)("No account found")};const r=!!n.url,a="ical"===n.account_type;t&&n&&r&&!a&&await s.Z.deleteCalendar(n,e.name);try{const t=await T.Z.calendar.delete(e.id);if(a){return{status:await $.deleteAccount(n.id),message:""}}return{status:t,message:""}}catch(e){return E.ZP.error("Calendar","deleteCalendar ",e),{status:!1,message:e}}}deleteEvent(e){const t=e.split("-")[0].split(":")[0],{notifications:n}=m.Z.getState(),s=n.filter((e=>e.event_id===t));return s.forEach((e=>{u.Z.deleteNotification(e)})),new Promise(((e,n)=>{T.Z.calendar.deleteEvent(t,(()=>{v.Z.runtime.lastError&&(E.ZP.error("Calendar","vivaldi.calendar.delete failed:",v.Z.runtime.lastError),n(v.Z.runtime.lastError)),e()}))}))}getPageId(){const e=f.ZP.getActiveBrowserOrPopupWindowId();return"panel"===a.Z.getContext(e).area?i.Z.getPanelResourceKey():d.ZP.getActivePage(e)?.id}setViewMode(e,t){null!=e&&(e!==i.Z.getPanelResourceKey()||W.includes(t))&&$.updateCalendarUI(e,{displayMode:t})}zoomViewMode(e,t){if(null==e)return;const n=i.Z.getCalendarState(e).calendarFilter.displayMode,s=e===i.Z.getPanelResourceKey()?W:H;let r=s.findIndex((e=>e===n))+t;r<0?r=0:r>=s.length&&(r=s.length-1),$.updateCalendarUI(e,{displayMode:s[r]})}updateCalendarUI(e,t){const{displayMode:n}=t,{calendarFilter:s}=i.Z.getCalendarState(e);if(n&&n!==s.displayMode){const a=e===i.Z.getPanelResourceKey()?I.kCalendarPanelDisplayMode:I.kCalendarDisplayMode;h.Z.set(a,n);const{anchorDate:o,selectedDate:l}=s;r.Z.getDisplayRange(o,n).contains(l)||(t.merge?t=t.merge({anchorDate:l.clone(),selectedDate:l}):(t.anchorDate=l.clone(),t.selectedDate=l))}b.Z.dispatch({actionType:"CALENDAR_UPDATE_UI",calendarUI:t,pageId:e})}selectDate(e,t,n=!1){const{calendarFilter:s}=i.Z.getCalendarState(e),{anchorDate:a,displayMode:o}=s;let l;l=r.Z.getDisplayRange(a,o).contains(t)?{selectedDate:t,allDaySelected:n}:{anchorDate:t,selectedDate:t,allDaySelected:n},$.updateCalendarUI(e,s.merge(l))}selectToday(e){if(null==e)return;const t=S()((0,x.zX)(Date.now()));$.selectDate(e,t)}viewPreviousPeriod(e,t){null!=e&&j(e,"previous",t)}viewNextPeriod(e,t){null!=e&&j(e,"next",t)}async pickFilesForImport(){return await(0,Z.WJ)()}startCalendarImport(e){(0,Z.J9)(e)}clearImportCache(){(0,Z.K2)(),b.Z.dispatch({actionType:"VIVALDI_CALENDAR_CLEAR_IMPORT_STATUS"})}setEventsToImportCount(e){b.Z.dispatch({actionType:"CALENDAR_TO_IMPORT_COUNT",eventsToImportCount:e})}setImportedEventsCount(e){b.Z.dispatch({actionType:"CALENDAR_SET_IMPORTED_COUNT",importedEventsCount:e})}setImportEventState(e){b.Z.dispatch({actionType:"CALENDAR_SET_IMPORT_STATE",importEventState:e})}importEventsDialog(e){b.Z.dispatch({actionType:"MAIN_SHOW_CALENDAR_IMPORT_EVENTS_DIALOG",options:{filePath:e}})}init(){T.Z.utilities.onBroadcastMessage.addListener($._onBroadcastMessage),p.ZP.addListener(I.kMailIsTurnedOff,X),$.startAPIChangeListeners(!0),s.Z.calendarServicerStart(),T.Z.calendar.onIcsFileOpened.addListener($.importEventsDialog)}_onBroadcastMessage(e){const t=e.calendar?.message;!window.isMailWindow&&t&&("startListeners"===t?$.startAPIChangeListeners():"stopListeners"===t?$.stopAPIChangeListeners():"loadData"===t&&$.loadPromise())}startListeners(){$.startAPIChangeListeners(),s.Z.calendarServicerStart()}stopListeners(){$.stopAPIChangeListeners(),s.Z.calendarStop()}eventCreated(e){if($.loadPromise(),!f.ZP.isActive())return;const t=d.ZP.unsafeGetActivePage();R.jk.getDisplayUrl(t.url).startsWith("vivaldi://calendar")||(0,L.c)({title:(0,_.Z)("New Event Created"),onClick:()=>{c.Z.showCalendar(e.start)}})}startAPIChangeListeners(e=!1){p.ZP.get(I.kMailIsTurnedOff)||(window.isMailWindow&&T.Z.utilities.broadcastMessage({calendar:{message:"startListeners"}}),T.Z.calendar.onEventCreated.addListener(this.eventCreated),Object.keys(Q).forEach((e=>T.Z.calendar[e].addListener($.loadPromise))),e?B.nextTick((()=>$.loadPromise())):$.loadPromise(),u.Z.startAPIChangeListeners())}stopAPIChangeListeners(){window.isMailWindow&&T.Z.utilities.broadcastMessage({calendar:{message:"stopListeners"}}),T.Z.calendar.onEventCreated.removeListener(this.eventCreated),Object.keys(Q).forEach((e=>T.Z.calendar[e].removeListener($.loadPromise)))}exportEvents(e){C(e)}};function X(e,t,n){n===I.kMailIsTurnedOff&&(t?$.stopAPIChangeListeners():$.startAPIChangeListeners())}const Q={onCalendarDataChanged:N.Z.CALENDAR_DATA_CHANGED},q=$},16910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(27673);const i={enableCapture:function(){s.Z.dispatch({actionType:"CAPTURE_ENABLE"})},disableCapture:function(){s.Z.dispatch({actionType:"CAPTURE_DISABLE"})}}},88059:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(66524),i=n(91662),r=n(82487),a=n(54471),o=n(74686);const l=["INPUT","FRAME","IFRAME","OBJECT","SELECT","TEXTAREA","EMBED"];function c(){let e;const t=function(t){const{clipboardData:n}=t;n&&n.types.indexOf("text/plain")>-1&&(e=n.getData("text/plain"),t.preventDefault())};return document.addEventListener("paste",t),document.execCommand("paste"),document.removeEventListener("paste",t),e}const u=new class{constructor(){var e,t,n;n=e=>{const t=t=>{t.clipboardData&&(t.clipboardData.setData("text/plain",e),t.stopPropagation(),t.preventDefault())};return document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t),Promise.resolve()},(t="copyTextToClipboard")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}undo(e){o.Z.editcommand.execute("undo",e)}redo(e){o.Z.editcommand.execute("redo",e)}cut(e){o.Z.editcommand.execute("cut",e)}copy(e){o.Z.editcommand.execute("copy",e)}paste(e){o.Z.editcommand.execute("paste",e)}selectAll(e){o.Z.editcommand.execute("selectAll",e)}set(e){const{body:t}=document;if(!e||!t)return;const n=document.createElement("input");n.style.position="absolute",n.style.zIndex="-1",n.value=e,t.appendChild(n),n.select(),document.execCommand("copy")||console.error("Failed to copy text."),t.removeChild(n)}pasteAsPlainText(e){o.Z.editcommand.execute("pasteAndMatchStyle",e)}pasteAsPlainTextOrPasteAndGo(e){const t=c();let n=!1;if(!a.ZP.isPopup()){const{activeElement:s}=document;s?.classList.contains("url")?(r.Z.doAction("urlPasteAndGo",{clipboardText:t}),n=!0):s?.classList.contains("vivaldi-searchfield")?(r.Z.doAction("searchPasteAndGo",{clipboardText:t}),n=!0):(l.indexOf(s?.tagName)>-1||s?.isContentEditable)&&(o.Z.editcommand.execute("pasteAndMatchStyle",e),n=!0)}n||o.Z.windowPrivate.getFocusedElementInfo(e).then((({editable:n})=>{n?o.Z.editcommand.execute("pasteAndMatchStyle",e):r.Z.doAction("urlPasteAndGo",{clipboardText:t})}))}async createNoteFromSelection(){const e=i.ZP.unsafeGetActivePage().get("id"),t=i.ZP.unsafeGetActivePage().get("url"),n=c(),r=await o.Z.utilities.getSelectedText(e);await s.Z.createNote({content:n,url:r===n?t:void 0})}copyUrlToClipboard(e){const t=function(t){t.clipboardData&&(t.clipboardData.setData("text/plain",e),t.stopPropagation(),t.preventDefault())};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}}},88999:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(71905),i=n(6478),r=n(21622),a=n(27673),o=n(79290),l=n(63057),c=n(74686),u=n(69291),m=n(93851),d=n(39023),h=n(30074);const p={version:1,chains:[{category:"CATEGORY_COMMAND_CHAIN",key:"ckqjdk4o7000001l58zh17egm",label:(0,l.Z)("command chain","Open Links and Tile"),name:"COMMAND_ckqjdk4o7000001l58zh17egm",shortcut:[],chain:[{defaultValue:"https://vivaldi.com",key:"0b01337b-4c13-4197-90c8-179c5c91cfff",param:"https://vivaldi.com",label:"COMMAND_OPEN_LINK_CURRENT",uniqueId:"ckqje6egt000001ju8eebfjru"},{defaultValue:"https://vivaldi.net",key:"f57b8092-9426-4bc8-8e39-fcf3e315b065",param:"https://vivaldi.net",label:"COMMAND_OPEN_LINK_DEFAULT",uniqueId:"ckqjh908u0001c542f1rdhmcx"},{defaultValue:"https://help.vivaldi.com",key:"f57b8092-9426-4bc8-8e39-fcf3e315b065",param:"https://help.vivaldi.com",label:"COMMAND_OPEN_LINK_DEFAULT",uniqueId:"ckqjh8gcl0000c5426oly646p"},{defaultValue:1e3,key:"2eb81004-6703-46db-9933-6afcfde924e4",param:150,uniqueId:"ckqknstqv0001wv42wtrvwo75"},{key:"e245bce5-20a7-481f-910e-23bf1de86748",uniqueId:"ckqjiearh0006c542041vvhpp"},{key:"e245bce5-20a7-481f-910e-23bf1de86748",uniqueId:"ckqjieung0007c5425s4xu1w7"},{defaultValue:1e3,key:"2eb81004-6703-46db-9933-6afcfde924e4",param:125,uniqueId:"ckqkwoqnq0000bp42ec4vy8hs"},{key:"cdd99010-5477-4508-aa28-d671de35dcb2",uniqueId:"ckqjik1520008c5428y7b22ux"},{key:"854f8a44-50bd-41bc-8277-acd51e719d1b",uniqueId:"ckqjim3ag0009c542u55t3ze9"}]},{category:"CATEGORY_COMMAND_CHAIN",key:"ckqjhvf430003c5429ni7i7bz",label:(0,l.Z)("command chain","Close Other and Open Defined Tab"),name:"COMMAND_ckqjhvf430003c5429ni7i7bz",shortcut:[],chain:[{defaultValue:"https://vivaldi.com",key:"f57b8092-9426-4bc8-8e39-fcf3e315b065",param:"https://vivaldi.com",label:"COMMAND_OPEN_LINK_DEFAULT",name:(0,l.Z)("Open Link in New Tab"),uniqueId:"ckqje6egt000001ju8eebfjru"},{key:"275ca3f7-ecfb-4445-bf87-686cd473536e",uniqueId:"ckqji854k0005c5420safcet6"}]},{category:"CATEGORY_COMMAND_CHAIN",key:"ckqkoqycf0003wv4210uduu8n",label:(0,l.Z)("command chain","Toggle Fullscreen and Reader Mode"),name:"COMMAND_ckqkoqycf0003wv4210uduu8n",shortcut:[],chain:[{key:"7420368f-565e-409f-8eec-5b5c578429af",uniqueId:"ckqkossz70004wv42t71b1lo0"},{key:"8dd47fc9-4c1f-4487-a475-f55bfa61aaf2",uniqueId:"ckqkokeau0002wv42ugnmzjdv"}]}]},g=function(e){s.Z.isNamedMenuAvailable(e)&&c.Z.menuContent.get(e,((t,n,s)=>{a.Z.dispatch({actionType:"COMMAND_SET_NAMED_MENU",name:e,content:s})}))};const b=new class{async loadPromise(){const{version:e}=p;e!==r.ZP.get(h.kChainedCommandsVersion)&&(e=>{const{chains:t}=p,n=r.ZP.get(h.kChainedCommandsDeletedCommandList),s=r.ZP.get(h.kChainedCommandsCommandList),a=s.map((e=>e.key)),o=t.filter((e=>!n.includes(e.key)&&!a.includes(e.key))),l=[...s,...o];i.Z.set(h.kChainedCommandsCommandList,l),i.Z.set(h.kChainedCommandsVersion,e)})(e);const t=r.ZP.get(h.kChainedCommandsCommandList),n=await(0,d.c)(),s=m.CN.concat(t).concat(n);s.forEach((e=>{(0,m.os)(e.name)||o.Z.addListener(e.name,b.commandChanged)}));const l=s.map((e=>e.name)),u=o.Z.getKeysSync(l),N=s.concat(t).map((e=>{const t=u[e.name];if(t)return{command:e.name,value:{...t,feature:e.feature||"browser"}}})).filter(Boolean);return a.Z.dispatch({actionType:"COMMAND_INITIALIZE",commands:N}),c.Z.menuContent.onChanged.addListener(g),Promise.resolve()}requestNamedMenu(e){s.Z.getIsInitialized()&&!s.Z.isNamedMenuAvailable(e)&&c.Z.menuContent.get(e,((t,n,s)=>{a.Z.dispatch({actionType:"COMMAND_SET_NAMED_MENU",name:e,content:s})}))}async restoreCommandShortcutKeys(){(await s.Z.getUserEditableCommands()).forEach((e=>{const t=o.Z.getDefault(e.name)||{},n=s.Z.getCommandConfiguration(e.name)?.gestures||{},i={shortcut:t.shortcut,gestures:n};o.Z.set({[e.name]:i})}))}async restoreCommandGestures(){(await s.Z.getUserEditableCommands()).forEach((e=>{const t=o.Z.getDefault(e.name);if(t){const n={shortcut:s.Z.getCommandConfiguration(e.name).shortcut,gestures:t.gestures?t.gestures:null};o.Z.set({[e.name]:n})}}))}commandChanged(e,t,n){const s=function(e){if(e.startsWith("COMMAND_"))return e}(n);s&&a.Z.dispatch({actionType:"COMMAND_UPDATE_COMMAND",commandKey:s,commandValue:t})}updateChainShortcut(e){a.Z.dispatch({actionType:"COMMAND_UPDATE_SHORTCUT_CHAIN",info:e})}removeCommandConfig(e){a.Z.dispatch({actionType:"COMMAND_REMOVE_CONFIG",commandKey:e}),o.Z.removeListener(e,b.commandChanged)}executeActions(e,t){const n=s.Z.getCommands().find((t=>t.name===e));if(!n){const t=r.ZP.get(h.kChainedCommandsCommandList);for(let n=t.length-1;n>=0;n--)if(t[n].name===e){(0,u.hT)(t[n].chain);break}return}const i=(0,m.xU)(n.name)?.defaultValue;let a=t;!a&&i&&(a=i);var o,l;(o=n.action,(l=[a])?function(){o.apply(null,l)}:o)()}},N=b},64059:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(32207),i=n(54141),r=n(27673),a=n(30801),o=n(74686);const l=new class{initializeContactStore(e){o.Z.contacts.getAll((t=>{r.Z.dispatch({actionType:a.Z.CONTACT_INITIALIZE,contacts:t,newContact:e})}))}saveContact(e){r.Z.dispatch({actionType:a.Z.CONTACT_SAVE_CONTACT,contact:e})}addGeneratedContacts(e){r.Z.dispatch({actionType:a.Z.CONTACT_ADD_CONTACTS,contacts:e})}selectContact(e,t=!1){r.Z.dispatch({actionType:a.Z.CONTACT_SELECT_CONTACT,contact:e,focusContactView:t})}deleteContactsByIds(e){return Promise.all(e.map((e=>new Promise((t=>{"number"==typeof e?t():o.Z.contacts.delete(e,(()=>{t()}))}))))).then((()=>{r.Z.dispatch({actionType:a.Z.CONTACT_DELETE_CONTACTS,ids:e})}))}newEmptyContact(){return new Promise((e=>{o.Z.contacts.create({},(t=>{const n=(0,s.Z)(t);return l.initializeContactStore(n),e(n)}))}))}newContactFromMailAddress(e,t){o.Z.contacts.create({name:e.name||""},(t=>o.Z.contacts.addEmailAddress({contactId:t.id,emailAddress:e.address},(e=>{const t=(0,s.Z)(e);l.initializeContactStore(t)}))))}putTrustedEmailAddress(e){let t=!1;i.Z.getAsArray().forEach((n=>n.emailAddresses.forEach((s=>{e.address===s.emailAddress&&(t=!0,l.update(n.id,{trusted:!0}))})))),!1===t&&o.Z.contacts.create({name:e.name||"",generatedFromSentMail:!0,trusted:!0},(t=>o.Z.contacts.addEmailAddress({contactId:t.id,emailAddress:e.address},(e=>l.addGeneratedContacts([e])))))}update(e,t){Object.keys(t).length>0&&o.Z.contacts.update(e,t,(e=>l.saveContact((0,s.Z)(e))))}updatePropertyItem(e){o.Z.contacts.updatePropertyItem(e,(e=>l.saveContact((0,s.Z)(e))))}updateEmailAddress(e,t){o.Z.contacts.updateEmailAddress(e,t,(e=>l.saveContact((0,s.Z)(e))))}addPropertyItem(e){o.Z.contacts.addPropertyItem(e,(e=>l.saveContact((0,s.Z)(e))))}removePropertyItem(e){o.Z.contacts.removePropertyItem(e,(e=>l.saveContact((0,s.Z)(e))))}addEmailAddress(e){o.Z.contacts.addEmailAddress(e,(e=>l.saveContact((0,s.Z)(e))))}removeEmailAddress(e){o.Z.contacts.removeEmailAddress(e,(e=>l.saveContact((0,s.Z)(e))))}addIfNotAddressExists(e){o.Z.contacts.getAll((t=>{const n=new Set;t.forEach((e=>e.emailAddresses.forEach((e=>{e.emailAddress&&n.add(e.emailAddress.toLowerCase())}))));const s=[];e.forEach((e=>{n.has(e.address.toLowerCase())||(o.Z.contacts.create({name:e.name||"",generatedFromSentMail:!0},(t=>{o.Z.contacts.addEmailAddress({contactId:t.id,emailAddress:e.address},(e=>l.addGeneratedContacts([e])))})),s.push(e))}))}))}},c=l},80943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(18973),i=n(27673),r=n(2121),a=n(18345),o=n(74686);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=[];function u(e){return new Promise((t=>{r.Z.downloads.search(e,t)}))}const m=new class{constructor(){l(this,"_isPolling",!1),l(this,"_openAfterDownload",new Set),l(this,"_dispatchUpdate",(e=>{i.Z.dispatch({actionType:"DOWNLOAD_PANEL_UPDATED",downloadItems:e})})),l(this,"_replaceDownloadItem",((e,t)=>{const n=s.Z.getItems({isIncognitoWindow:!1}),i=n.find((t=>t.id===e.id));if(!i)return;const r=n.indexOf(i),a=[...n.slice(0,r),t,...n.slice(r+1)];this._dispatchUpdate(a)})),l(this,"_startPolling",(()=>{this._isPolling||(this._intervalId=setInterval(this._pollInProgressDownloads,500),this._isPolling=!0)})),l(this,"_stopPolling",(()=>{this._isPolling=!1,clearInterval(this._intervalId)})),l(this,"_handleNewDownloadItem",(e=>{const t=s.Z.getFilter(),n=s.Z.getOrderBy(),o={...(0,a.Z)(t?{query:t.split(" ")}:null),...(0,a.Z)(n?{orderBy:[n]}:null)};r.Z.downloads.search(o,(t=>{this._dispatchUpdate(t);const n=s.Z.getItems({isIncognitoWindow:!1}).find((t=>t.id===e));n&&i.Z.dispatch({actionType:"DOWNLOAD_STARTED",downloadItem:n})}))})),l(this,"_updateState",(e=>{const t=s.Z.getItems({isIncognitoWindow:!1}),n=t.findIndex((t=>t.id===e.id));if(-1===n)return void this._handleNewDownloadItem(e.id);const i=[...t.slice(0,n),e,...t.slice(n+1)];this._dispatchUpdate(i)})),l(this,"_updateStateForDownloadItems",(e=>{e.forEach(this._updateState)})),l(this,"_handleInProgressSearch",(e=>{e.filter((e=>!e.paused)).length||this._stopPolling(),this._setTotalProgress(e),this._updateStateForDownloadItems(e)})),l(this,"_handleFileDeleted",((e,t)=>{this._pollInProgressDownloads(),e?r.Z.downloads.search({id:e,limit:1},(n=>{if(!n||!Array.isArray(n))return void console.warn(`DownloadActions: _handleFileDeleted: Failed to search downloads for ID ${e} (${t})`);const s=n[0];s&&this._updateState(s)})):console.warn(`DownloadActions: _handleFileDeleted: Invalid download ID ${e} (${t})`)})),l(this,"_pollInProgressDownloads",(()=>{r.Z.downloads.search({state:"in_progress"},this._handleInProgressSearch)})),l(this,"_setTotalProgress",(e=>{const t=e.filter((e=>!e.paused)),n=t.length,s=function(e){return e.length?e.map((e=>e.bytesReceived/e.totalBytes)).reduce(((e,t)=>e*t)):0}(t);i.Z.dispatch({actionType:"DOWNLOAD_SET_TOTAL_PROGRESS",totalNumberOfDownloads:n,totalProgress:s})})),l(this,"_handleDangerousFileDownload",(e=>{r.Z.windows.getLastFocused((t=>{t.id===window.vivaldiWindowId&&async function(e){if(c.push(e),!(c.length>1))do{e=c[0];try{await r.Z.downloads.acceptDanger(e)}catch(e){}c.shift()}while(c.length>0)}(e)}))})),l(this,"_onTransferChanged",(e=>{e.paused&&e.paused.previous&&!e.paused.current?this._onTransferCreated():(e.filename&&this._handleNewDownloadItem(e.id),e.danger&&e.danger.current!==e.danger.previous&&this._handleDangerousFileDownload(e.id),e.exists&&!e.exists.current&&this._handleFileDeleted(e.id,"Deleted from disk"),e.state&&("interrupted"===e.state.current&&this._handleFileDeleted(e.id,"Interrupted"),"complete"===e.state.current&&(r.Z.downloads.search({id:e.id,limit:1},(([e])=>{this._updateState(e),this._pollInProgressDownloads(),i.Z.dispatch({actionType:"DOWNLOAD_COMPLETED",downloadItem:e})})),this._openAfterDownload.has(e.id)&&(r.Z.downloads.open(e.id),this._openAfterDownload.delete(e.id)))))})),l(this,"_onTransferErased",(e=>{const t=s.Z.getItems({isIncognitoWindow:!1}),n=t.findIndex((t=>t.id===e));if(-1===n)return;const i=[...t.slice(0,n),...t.slice(n+1)];this._dispatchUpdate(i)})),l(this,"_onTransferCreated",(()=>{this._startPolling()})),l(this,"_showDownload",(e=>{r.Z.downloads.show(e)})),l(this,"_openDownload",(e=>{r.Z.downloads.open(e)})),l(this,"_pauseDownload",(e=>{r.Z.downloads.pause(e)})),l(this,"_resumeDownload",(e=>{r.Z.downloads.resume(e)})),l(this,"_eraseDownload",(e=>{r.Z.downloads.erase({id:e})})),l(this,"_restartDownload",(e=>u({id:e}).then((([t])=>{return(n={url:t.url},new Promise((e=>{r.Z.downloads.download(n,e)}))).then((e=>u({id:e}))).then((([e])=>this._replaceDownloadItem(t,e))).then((()=>{return t={id:e},new Promise((e=>{r.Z.downloads.erase(t,e)}));var t}));var n})))),l(this,"_validateDownload",(e=>{r.Z.downloads.acceptMixed(e)})),l(this,"forceUpdate",(()=>{const e=s.Z.getFilter(),t=s.Z.getOrderBy();this._searchDownloads({filter:e,orderBy:t}).then((e=>{i.Z.dispatch({actionType:"DOWNLOAD_SET_ORDER_BY",downloadItems:e,orderBy:t})}))})),l(this,"ready",(()=>{let e,t,n;return Promise.race([function t(n=0){return new Promise((s=>{o.Z.utilities.isDownloadManagerReady((i=>{if(i)return s();n++,e=setTimeout((()=>t(n)),1e3*n)}))}))}(),new Promise((e=>{n=()=>{e()},o.Z.utilities.onDownloadManagerReady.addListener(n)})),new Promise((e=>{t=setTimeout(e,2e4)}))]).then((()=>{clearTimeout(e),clearTimeout(t),o.Z.utilities.onDownloadManagerReady.removeListener(n)}))})()),l(this,"addOpenAfterDownload",(e=>{this._openAfterDownload.add(e)})),l(this,"setSearchFilter",(e=>this.ready.then((()=>this._setSearchFilter(e))))),l(this,"setOrderBy",(e=>this.ready.then((()=>this._setOrderBy(e))))),l(this,"showDownload",(e=>{this.ready.then((()=>{this._showDownload(e)}))})),l(this,"eraseDownload",(e=>{this.ready.then((()=>{this._eraseDownload(e)}))})),l(this,"openDownload",(e=>{this.ready.then((()=>{this._openDownload(e)}))})),l(this,"pauseDownload",(e=>{this.ready.then((()=>{this._pauseDownload(e)}))})),l(this,"resumeDownload",(e=>{this.ready.then((()=>{this._resumeDownload(e)}))})),l(this,"restartDownload",(e=>this.ready.then((()=>this._restartDownload(e))))),l(this,"validateMixedDownload",(e=>{this.ready.then((()=>{this._validateDownload(e)}))})),l(this,"loadPromise",(()=>(r.Z.downloads.setShelfEnabled(!1),r.Z.downloads.onChanged.addListener(this._onTransferChanged),r.Z.downloads.onCreated.addListener(this._onTransferCreated),r.Z.downloads.onErased.addListener(this._onTransferErased),this.ready.then(this._startPolling),Promise.resolve())))}_searchDownloads({filter:e,orderBy:t}){return new Promise((n=>{const s={...(0,a.Z)(e?{query:e.split(" ")}:null),...(0,a.Z)(t?{orderBy:[t]}:null)};r.Z.downloads.search(s,(e=>{n(e)}))}))}_setSearchFilter(e){if(e===s.Z.getFilter())return Promise.resolve();const t=s.Z.getOrderBy();return this._searchDownloads({filter:e,orderBy:t}).then((t=>{i.Z.dispatch({actionType:"DOWNLOAD_SET_FILTER",downloadItems:t,filter:e})}))}_setOrderBy(e){if(e===s.Z.getOrderBy())return Promise.resolve();const t=s.Z.getFilter();return this._searchDownloads({filter:t,orderBy:e}).then((t=>{i.Z.dispatch({actionType:"DOWNLOAD_SET_ORDER_BY",downloadItems:t,orderBy:e})}))}}},33433:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(56752),i=n(91662),r=n(21622),a=n(27673),o=n(82487),l=n(2121),c=n(30074);const u=new class{setFastForwardUrl(e,t,n){a.Z.dispatch({actionType:"FAST_FORWARD_SET_FORWARD_URL",pageId:e,forwardUrl:t})}_updateRewindInfo(e,t,n){a.Z.dispatch({actionType:"FAST_FORWARD_SET_REWIND_INFO",pageId:e,history:n,currentIndex:t})}setRewindInfo(e,t){e.getPageHistory(((e,n)=>{l.Z.runtime.lastError||u._updateRewindInfo(t,e,n)}))}copyFastForwardState(e,t){a.Z.dispatch({actionType:"FAST_FORWARD_COPY_STATE",pageId:e,fastForwardState:t})}navigateRewind(){const e=i.ZP.unsafeGetActivePage(),t=s.Z.getRewindRelativeIndex(e.get("id"));o.Z.go(-1*t)}navigateFastforward(){const e=i.ZP.unsafeGetActivePage();l.Z.tabs.sendMessage(e.get("id"),{navigateFastforward:!0})}isFFWEnabled(){return r.ZP.get(c.kKeyboardShortcutsSpaceFastForwards)}sendMessage(e,t,n={}){l.Z.tabs.sendMessage(e,{...n,action:t,pageId:e})}onIsFFWEnabled(e){this.isFFWEnabled()&&u.sendMessage(e,"ffwGoForward")}initTab(e){const t=this.isFFWEnabled();u.sendMessage(e,"fastForwardInit",{enabled:t})}initFastForward(){l.Z.runtime.onMessage.addListener(((e,t)=>{if(!function(e){return l.Z.runtime.id===e.id&&0===e.frameId}(t)||!e)return;if("string"!=typeof e.action||"number"!=typeof e.pageId)return;const{action:n,pageId:s}=e;"fastforwardUrlChanged"===n&&"string"==typeof e.nextUrl?u.setFastForwardUrl(s,e.nextUrl,t.url):"canFFWGoForward"===n&&u.onIsFFWEnabled(s)}))}},m=u},94103:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(2121),i=n(34770),r=n(42954);const a={};let o=0;const l={fetchRawOfMessage:function(e,t,n){return c("fetchRawOfMessage",[...arguments])},connectIMAPClient:function(e){return c("connectIMAPClient",[...arguments])},connectIMAPClients:function(){return c("connectIMAPClients",[...arguments])},disconnectIMAPClient:function(e){return c("disconnectIMAPClient",[...arguments])},reconnectIMAPClient:function(e){return c("reconnectIMAPClient",[...arguments])},reconnectIMAPClients:function(){return c("reconnectIMAPClients",[...arguments])},disconnectIMAPClients:function(){return c("disconnectIMAPClients",[...arguments])},checkNewDeletedModified:function(e,t){return c("checkNewDeletedModified",[...arguments])},rescanUnreadFlags:function(e,t){return c("rescanUnreadFlags",[...arguments])},checkForMail:function(e){return c("checkForMail",[...arguments])},setCheckInterval:function(e,t){return c("setCheckInterval",[...arguments])},preFetch:function(e){return c("preFetch",[...arguments])},subscribeMailbox:function(e,t){return c("subscribeMailbox",[...arguments])},unsubscribeMailbox:function(e,t,n){return c("unsubscribeMailbox",[...arguments])}};function c(e,t){return new Promise(((n,i)=>{const l=o++;a[l]={resolve:n,reject:i},s.Z.runtime.getBackgroundPage((n=>{const s={promiseId:l,func:e,args:t};n?.postMessage({imap:s},r.oP)}))}))}window.addEventListener("message",(function(e){if(e.origin!==r.oP)return;const{imap:t}=e.data;if(t){const{promiseId:e,results:n,error:s}=t,{resolve:r,reject:o}=a[e];delete a[e],s?o((0,i.Z)(s)):r(n)}}),!1)},24141:(e,t,n)=>{"use strict";n.d(t,{Z:()=>X});var s=n(21622),i=n(63057),r=n(2121),a=n(31054),o=n(26848),l=n(30074),c=n(33696),u=n(65531),m=n(44025);var d=n(29319),h=n(51110),p=n(18172),g=n(76906),b=n(76483),N=n(78635),f=n(39353),_=n(94103),v=n(51495),E=n(68415),C=n(40778),w=n(92144),y=n(27673),S=n(30801),T=n(98395),k=n(2324),I=n(24383),A=n(48345),Z=n(96244),P=n(55079),D=n(63145);const M=async function(e,t){const{id:n}=e;return await k.Z.searchList.update(n,{unseen:t}),[{id:n,updates:{unseen:t}}]};var O=n(50377),x=n(33478),L=n(56152),R=n(63306),B=n(50063),F=n(65741),U=n(90808),V=n(74368),H=n(74686);function W(e,t){const n=A.Z.parseQuery(e),s=Date.now();return w.Z.setStatus((0,i.Z)("Searching for $1...",[n])),V.ZP.log("Mail",["search"],`query:${e}, refined:${n}`),async function(e){return new Promise((t=>{try{H.Z.mailPrivate.searchMessages(e,t)}catch(t){console.error(`Search failed for query: ${e}`,t)}}))}(n).then((e=>{if(t()){const e=`Discarding results for outdated query: ${n}`;throw V.ZP.log("Mail",["search"],`${e}`),new Error(e)}{const t=Date.now()-s;return w.Z.setStatus((0,i.Z)("Search for $2 returned $1 result in $3ms.","Search for $2 returned $1 results in $3ms.",[e.length,n,t])),V.ZP.log("Mail",["search"],`search for ${n} returned ${e.length} results in ${t}ms`),e}}))}var z=n(35100),G=n(55039);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=new class{constructor(){K(this,"markSeenDebounced",(0,U.Z)((async e=>{const t=await M(e,!1);await D.Z.call({priority:B.Un.HIGH,type:"RE_RUN_SLES",searchListIds:[e.id]}),j.updateIndex({sleUpdates:t}),O.Z.filter()}),1e3)),K(this,"lastNotificationSentDates",new Map),I.Z.on("updateFilters",(e=>this.updateFilters(e)))}updateThreadKeys(e){y.Z.dispatch({actionType:"MAIL_UPDATE_THREAD_KEYS",updates:e})}addAccounts(e){y.Z.dispatch({actionType:"MAIL_ADD_ACCOUNTS",accounts:e})}setDisconnected(e,t,n){y.Z.dispatch({actionType:"MAIL_IS_DISCONNECTED",accountId:e,isDisconnected:t,errorMessage:n})}setConnecting(e,t){y.Z.dispatch({actionType:"MAIL_IS_CONNECTING",accountId:e,isConnecting:t})}replaceAccounts(e){y.Z.dispatch({actionType:"MAIL_REPLACE_ACCOUNTS",accounts:e})}setAllMailsInFolderAsReadCmd(){const e=C.Z.getSelectedFolder();if(e){const{accountId:t,path:n}=e;j.setAllMailsInFolderAsRead(t,n)}}deleteEntriesFromFolderCmd(){const e=C.Z.getSelectedFolder();if(e){const{accountId:t,path:n}=e;j.deleteEntriesFromFolder(t,n)}}async deleteEntriesFromFolder(e,t){const n=v.C.getListEntriesByFolder(e,t);await b.ZP.prepareDelete(!0,n)}moveAllToTrash(e,t,n){const s=v.C.getListEntriesByFolder(e,t);b.ZP.prepareDelete(!1,s,n)}setAllMailsInFolderAsRead(e,t){const n=v.C.getListEntriesByFolder(e,t),s=v.C.getByFolderId([e,t]);if(!s)throw new Error("Filter not found");const i=n.filter((e=>!h.Z.call(e.sources,s))),r=Z.Z.setRead(i,!0);j.updateIndex({sleUpdates:r})}async removeAccount(e,t,n){await k.Z.transaction("rw",[k.Z.buffer,k.Z.accounts],(async()=>{await(0,P.Z)({accountId:e,path:"",operation:"BUFFER_OPERATION_REMOVE_ACCOUNT",deleteFiles:t}),await k.Z.accounts.delete(e)})),n===B.s9.IMAP&&await _.Z.disconnectIMAPClient(e),y.Z.dispatch({actionType:"MAIL_REMOVE_ACCOUNT",accountId:e}),O.Z.removeFolders(e),N.Z.flushBuffer()}async removeAccountPath(e,t,n){await k.Z.transaction("rw",[k.Z.buffer,k.Z.accounts],(async()=>{await(0,P.Z)({accountId:e,path:t,operation:"BUFFER_OPERATION_REMOVE_ACCOUNT_PATH",deleteFiles:!0}),n===B.s9.IMAP&&await k.Z.accounts.where("accountId").equals(e).modify((e=>{delete e.folders[t]}))})),N.Z.flushBuffer()}setSearchOptions(e){y.Z.dispatch({actionType:"MAIL_SEARCH_SET_OPTIONS",options:e})}async addLabelsFilter(e){const t={name:(0,z.Xw)(e),accountId:B.ut,path:e,filterValue:{include:[[{flag:e}]],exclude:A.Z.getSearchListButtonExcludeRules(B.ut),...A.Z.getSearchListButtons(B.ut)}},n=await f.Z.addAndModifyParents(t,{include:[[{flag:e}]]},B.Un.NORMAL);O.Z.updateFilters(n)}async removeTriggers(e){await f.Z.removeTriggers(e),O.Z.updateFilters([e])}async addFilter(e,t=!0){let n;await k.Z.transaction("rw",[k.Z.filters,k.Z.filteringQueue],(async()=>{n=await f.Z.add(e),t&&D.Z.call({type:"RUN_FILTERS",priority:B.Un.HIGH,folderIds:[[e.accountId,e.path]],updateFilters:!0})})),n&&await O.Z.updateFilters(n),t&&O.Z.filter()}async putFilter(e,t){const n=function(e,t){if(e.filterValue.query!==t.filterValue.query)return!0;const{filterValue:n}=(0,p.ZP)(e,(e=>{A.Z.removeOptionalRules(e)})),{filterValue:s}=(0,p.ZP)(t,(e=>{A.Z.removeOptionalRules(e)}));return!(0,F.default)(n.include,s.include)||!(0,F.default)(n.exclude||[],s.exclude||[])||!(0,F.default)(e.triggers||[],t.triggers||[])}(e,t);await k.Z.transaction("rw",[k.Z.filters,k.Z.filteringQueue],(async()=>{const t=await f.Z.put(e);O.Z.updateFilters(t),n&&D.Z.call({type:"RUN_FILTERS",priority:B.Un.HIGH,filterIds:[e.id],updateFilters:!0,triggerFilterIdCandidates:[e.id]})})),n&&O.Z.filter()}async runSystemTasks(){await(0,G.y)()}async runSystemTask(e){await(0,G.U)(e)}async removeFilter(e){await f.Z.remove(e),O.Z.updateFilters([e]),O.Z.filter()}async rerunFilter(e,t){await D.Z.call({type:"RUN_FILTERS",priority:B.Un.LOW,folderIds:[[e,t]]}),O.Z.filter()}async runStoredQueryFilters(e){const t=v.C.getByAccountId(B.Kz);if(0===t.length)return;const n=t.map((e=>[e.accountId,e.path]));await D.Z.call({type:"FILTERS_SLES",priority:B.Un.NORMAL,folderIds:n,searchListIds:e}),O.Z.filter()}async updateFilters(e){y.Z.dispatch({actionType:"MAIL_FILTERS_CHANGED",filterIds:e});const t=[];e.forEach((e=>A.Z.getAllViewTypes().forEach((n=>t.push(e*B.XN+n))))),j.updateCounters(t)}async toggleMoveToOther(e){const t=e.path;let n,s,i="";t.startsWith(B.cs)?(n=B.W4,i=B.cs,s=t.substr(B.cs.length+1)):(n=B.cs,i=B.W4,s=t.substr(B.W4.length+1));const r=await f.Z.moveAndModifyParents(e.accountId,i,n,s);O.Z.updateFilters(r),j.selectFolder({...e,path:[n,s].join("/"),id:B.jT+"_"+[n,s].join("/")}),O.Z.filter()}async removeMailingListFilter(e){const t=e.filterValue.include,n=t&&t[0],s=n&&n[0];if(s?.listId){const t=s.listId,n={listId:t,name:t,parentFolderType:"matches",subFolderType:"none",isIgnored:!0};await O.Z.updateMailingListGroup(n);const i=await f.Z.removeAndModifyParents(e,{include:e.filterValue.include},B.Un.LOW);O.Z.updateFilters(i),y.Z.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:n}),O.Z.filter()}else s?.senderIsMailingList&&await j.toggleSenderAsMailingList(s.senderIsMailingList)}async toggleSenderAsMailingList(e){const t=B.wC,n=[B.W4,B.cs],s=[{senderIsMailingList:e}],i=n.map((n=>v.C.getByFolder(t,[n,e].join("/")))).find((e=>void 0!==e));if(i){const e=await f.Z.removeAndModifyParents(i,{include:[s]},B.Un.LOW);O.Z.updateFilters(e)}else{const n={name:e,accountId:t,path:`${B.W4}/${e}`,filterValue:{include:[s],exclude:[[{flag:B.T4.DELETED}]],...A.Z.getSearchListButtons(B.wC)}},i=await W(`from:${e}`,(()=>!1)),r=await f.Z.addAndModifyParents(n,{include:[s]},B.Un.LOW,i);O.Z.updateFilters(r)}O.Z.filter()}updateQueryResults(e,t){if(e.length>0){if(j.changeQuery(e),e.length>2){const n=E.Z.getOptions().allMessages||!1;W(e,(function(){return e!==v.C.getQuery()})).then((e=>{y.Z.dispatch({actionType:"MAIL_UPDATE_QUERY_RESULTS",queryResults:e,queryAllMessages:n,folder:t})})).catch((()=>{}))}}else w.Z.clearStatus(),j.clearQuery()}changeQuery(e){y.Z.dispatch({actionType:"MAIL_QUERY_CHANGE",query:e})}clearQuery(){y.Z.dispatch({actionType:S.Z.MAIL_CLEAR_QUERY})}async regenerateUncategorizedMailingLists(){const e=v.C.getByAccountId(B.wC),t=L.Z.mailingListGroupToFilters(e),n=x.Z.getGroups(),s=t.filter((e=>!n.some((t=>t.listId===e.path.split("/")[1]))));await j.regenerateMailingLists(s,!0)}async regenerateAllMailingLists(){const e=v.C.getByAccountId(B.wC),t=L.Z.mailingListGroupToFilters(e);await j.regenerateMailingLists(t,!0)}async regenerateExistingMailingListGroup(e,t){const n=v.C.getByAccountId(B.wC),s=L.Z.mailingListGroupToFilters(n,t);if(x.Z.get(B.ZW)?.isIgnored)await j.regenerateMailingLists(s,!0);else{const e=L.Z.mailingListGroupToFilters(n,t),i=[...new Set([...s,...e])];await j.regenerateMailingLists(i,!1)}}async regenerateMailingListGroup(e,t=!1){const n=v.C.getByAccountId(B.wC),s=L.Z.mailingListGroupToFilters(n,e);await j.regenerateMailingLists(s,t)}async regenerateMailingLists(e,t=!1){let n;if(!t){const t=e.map((e=>A.Z.getTotalViewByFilterId(e.id)));n=v.C.getListEntryIdsByViewIds(new Set(t))}for(const t of e){const e=await f.Z.removeAndModifyParents(t,{include:t.filterValue.include},B.Un.LOW);await O.Z.updateFilters(e)}await D.Z.call({priority:B.Un.LOW,type:"RE_RUN_SLES",searchListIds:n,runMailingLists:!0,updateFilters:!0}),O.Z.filter()}async refreshMailingList(){await D.Z.call({priority:B.Un.LOW,type:"RE_RUN_SLES",runMailingLists:!0,updateFilters:!0}),O.Z.filter()}async removeMailingListGroup(e){await O.Z.removeMailingListGroup(e),await j.regenerateMailingListGroup(e),y.Z.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async removeIgnoredMailingList(e){await O.Z.removeMailingListGroup(e),await j.refreshMailingList(),y.Z.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}initializeMailAccounts(){return g.Z.getAccountsAndFolders().then((e=>{j.replaceAccounts(e.accounts),d.Z.initFolders(e.folders)}))}async initializeMailFiltersStore(){await j.initMailingLists(),await j.initFilters(),await j.initIndex()}async initIndex(){const e=await k.Z.searchList.count();let t=1e3,n=-1;await async function s(){const i=Date.now(),[r,a]=await Promise.all([k.Z.searchList.where("id").above(n).limit(t).toArray(),k.Z.viewIds.where("searchListId").above(n).limit(t).toArray()]);if(y.Z.dispatch({actionType:"MAIL_INIT_INDEX_BATCH",sleBatch:r,viewIdsBatch:a,total:e}),r.length===t){const{id:e}=r[t-1];n=e;const a=Date.now();t=T.Z.adjustBatchSize(1e3,1e5,50,t,a-i),await s()}}(),y.Z.dispatch({actionType:"MAIL_INIT_INDEX_FINISHED"})}updateIndex(e){y.Z.dispatch({actionType:"MAIL_INDEX_UPDATE",updates:e});const{sleUpdates:t=[]}=e,n=v.C.getQuery(),h=j.getViewIntersection();let p=!1;const g=new Set(s.ZP.get(l.kMailAccounts).filter((e=>e.offline)).map((e=>e.MAIL_EMAIL))),b=new Map,N=new Map,f=[];function _(e,t){let n;switch(t.type){case"ADD_LABEL":n=b.get(t.label),n?n.push(e):b.set(t.label,[e]);break;case"REMOVE_LABEL":n=N.get(t.label),n?n.push(e):N.set(t.label,[e]);break;case"MARK_READ":f.push(e)}}t.forEach((e=>{const t=v.C.getListEntry(e.id),{addedViewIds:b,runTriggerFilterIds:N}=e.updates;if(t){if(n){const{updates:n}=e;p=v.C.matchesViewIntersection(t.viewIds,h)||Array.isArray(n.viewIds)&&v.C.matchesViewIntersection(n.viewIds,h)}if(s.ZP.get(l.kMailNotifications)){const e=b?.some((e=>{if(e%B.XN!=0)return!1;const n=e/B.XN,s=I.Z.get(n);if(!s)return!1;const{accountId:i,path:r}=s;if(g.has(i))return!1;if(!(d.Z.getFolderType(i,r)===B.e9))return!1;const a=j.lastNotificationSentDates.get(i)||0;return t.sentDate>a&&(j.lastNotificationSentDates.set(i,t.sentDate),!0)}));e&&function(e){const t=(0,c.Rz)(a.Z.get(e.fromIds)),n=(0,c.Rz)(a.Z.get(e.toIds));(0,u.c)({title:e.subject,body:(0,i.Z)("New mail from $1 to $2",[t,n]),icon:"resources/mail_notification_icon.png",silent:!s.ZP.get(l.kMailNotificationsSoundOn),onClick:()=>{const t=`message/${e.id}`,n=m.jk.internalUrl("mailpage",t,(0,i.Z)("Mail"));o.QJ.openURL(n);const s=r.Z.extension.getViews().find((e=>e.isMailWindow));s&&r.Z.windows.update(s.vivaldiWindowId,{drawAttention:!0})}})}(t)}if(b)for(const e of b){if(e%B.XN!=0)continue;const n=e/B.XN,s=I.Z.get(n);if(!s)throw new Error("Filter not found "+n);if(s.triggers)for(const e of s.triggers)_(t,e)}N&&N.forEach((e=>{const n=I.Z.get(e);if(!n)throw new Error("Filter not found "+e);if(n.triggers)for(const e of n.triggers)_(t,e)}))}else console.warn("ListEntry not found "+JSON.stringify(e))})),p&&j.updateQueryResults(n),b.forEach(((e,t)=>{Z.Z.setCustomFlags(e,{[t]:!0})})),N.forEach(((e,t)=>{Z.Z.setCustomFlags(e,{[t]:!1})})),f.length>0&&Z.Z.setRead(f,!0)}async initMailingLists(){await x.Z.initMailingLists(),y.Z.dispatch({actionType:"MAILING_LIST_GROUPS_INIT"})}async updateMailingListGroupName(e){await O.Z.updateMailingListGroup(e),await f.Z.updateName([[B.wC,B.W4+"/"+e.listId],[B.wC,B.cs+"/"+e.listId]],e.name),y.Z.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async updateMailingListGroup(e){const t=x.Z.get(e.listId);if(await O.Z.updateMailingListGroup(e),"uncategorized"===e.parentFolderType)await j.regenerateUncategorizedMailingLists();else if(t?.isIgnored&&!e.isIgnored)await j.refreshMailingList();else if(t)await j.regenerateExistingMailingListGroup(t,e);else{const t=!0;await j.regenerateMailingListGroup(e,t)}y.Z.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async initFilters(){await I.Z.initFilters(),y.Z.dispatch({actionType:"MAIL_FILTERS_INIT"})}async start(){w.Z.setPersistentStatus("MAIL_DB_OPEN",(0,i.Z)("Opening mail DB - This may take time if upgrades are due...")),await k.Z.open(),w.Z.clearPersistentStatus("MAIL_DB_OPEN"),await j.initializeMailAccounts(),await j.initializeMailFiltersStore()}stop(){y.Z.dispatch({actionType:"MAIL_STOP"}),I.Z.clear(),R.Z.clear(),a.Z.clear(),d.Z.clear()}addAccountIndicator(e,t,n=0,s=0){y.Z.dispatch({actionType:"MAIL_INDICATOR_ADD_ACCOUNT",accountId:e,indicator:t,current:n,total:s})}addPathIndicator(e,t,n,s=0,i=0){y.Z.dispatch({actionType:"MAIL_INDICATOR_ADD_PATH",accountId:e,path:t,indicator:n,current:s,total:i})}removeAccountIndicator(e,t){y.Z.dispatch({actionType:"MAIL_INDICATOR_REMOVE_ACCOUNT",accountId:e,indicator:t})}removePathIndicator(e,t,n){y.Z.dispatch({actionType:"MAIL_INDICATOR_REMOVE_PATH",accountId:e,path:t,indicator:n})}removeAllIndicators(e){y.Z.dispatch({actionType:"MAIL_INDICATOR_REMOVE_ALL",accountId:e})}applyFilter(){y.Z.dispatch({actionType:S.Z.MAIL_APPLY_FILTER})}updateCounters(e){let t;t=e||I.Z.getAll().reduce(((e,t)=>{const n=A.Z.getAllViewTypes().map((e=>t.id*B.XN+e));return e.concat(n)}),[]);const n=v.C.getCounterFolders(t);0!==n.length&&(v.C.getIndex().forEach((e=>{const{viewIds:t}=e;n.forEach((e=>{if(!t.includes(e.totalViewId))return;const{viewIntersections:n,counter:s}=e;n.total.every((e=>t.includes(e)))&&s.total++,n.unseen.every((e=>t.includes(e)))&&s.unseen++,n.unread.every((e=>t.includes(e)))&&s.unread++}))})),y.Z.dispatch({actionType:"MAIL_UPDATE_COUNTERS",countedFolders:n,deltaValues:!1}))}pageForward(){if(C.Z.canGoForward()){const e=C.Z.getHistoryIndex();j.selectFolderFromHistory(e+1)}}pageBack(){if(C.Z.canGoBack()){const e=C.Z.getHistoryIndex();j.selectFolderFromHistory(e-1)}}selectFolderFromHistory(e){const t=C.Z.getOptionsFromHistory(e);y.Z.dispatch({actionType:"MAIL_FOLDER_SELECT_HISTORY_INDEX",historyIndex:e}),t.threadPrefix?Y(t.threadPrefix):$()}selectFolder(e,t={}){y.Z.dispatch({actionType:"MAIL_SELECT_FOLDER",folder:e,options:t}),t.threadPrefix?Y(t.threadPrefix):$(e)}selectFolderOnSubscriptionChange(e,t){const n={...e,subscribed:t};j.selectFolder(n)}getImapFolderInfo(e){let t=e.accountId,n=e.path;if(e.accountId===B.Ry){const s=e.path.indexOf("/");t=e.path.slice(0,s),n=e.path.slice(s+1)}return{imapAccountId:t,imapPath:n}}async subscribeMailbox(e){const{imapAccountId:t,imapPath:n}=j.getImapFolderInfo(e);j.selectFolderOnSubscriptionChange(e,!0);try{await _.Z.subscribeMailbox(t,n)}catch(t){j.selectFolderOnSubscriptionChange(e,!1),w.Z.setStatus((0,i.Z)("Failed to subscribe to mailbox: $1",[t])),console.error(t)}}async unsubscribeMailbox(e,t){const{imapAccountId:n,imapPath:s}=j.getImapFolderInfo(e);try{j.selectFolderOnSubscriptionChange(e,!1);try{await _.Z.unsubscribeMailbox(n,s,t)}catch(t){throw j.selectFolderOnSubscriptionChange(e,!0),t}t&&j.removeAccountPath(n,s,B.s9.IMAP)}catch(e){w.Z.setStatus((0,i.Z)("Failed to unsubscribe from mailbox: $1",[e])),console.error(e)}}selectThread(e){const t=[e.threadKey[0],e.threadKey[1]],n={accountId:B.tQ,path:String(t),id:String(t),name:e.subject},s={threadPrefix:t};j.selectFolder(n,s)}selectContact(e){const t={accountId:B.of,path:B.ym,id:e,name:e},n=A.Z.getContactQuery(e),s={forSender:e};y.Z.dispatch({actionType:"MAIL_SELECT_FOLDER",folder:t,options:s}),j.updateQueryResults(n,t)}sortListEntries(e=!1){y.Z.dispatch({actionType:"MAIL_SORT_LIST_ENTRIES",wasThreads:e});const t=v.C.getQuery();t&&j.updateQueryResults(t)}getViewIntersection(e,t={}){if(e||(e=C.Z.getSelectedFolder()),!e)return;const{accountId:n,path:s=B.ym}=e,i=v.C.getByFolder(n,s);return i?A.Z.getViewIntersection(i):void 0}undo(){const e=R.Z.pop();if(!e)return;const{updates:t,updateItems:n,operation:s,sourcesPerSle:i}=e;if(0!==n.length&&"setFlags"===s){const e=Z.Z.setCustomFlags(n,t,i,!1);j.updateIndex({sleUpdates:e})}}};function Y(e){y.Z.dispatch({actionType:"MAIL_SELECT_THREAD",threadPrefix:e})}function $(e){y.Z.dispatch({actionType:"MAIL_INIT_MESSAGES",folderIntersection:j.getViewIntersection(e),folder:e})}const X=j},18484:(e,t,n)=>{"use strict";n.d(t,{Z:()=>L,J:()=>T});var s=n(54141),i=n(68131),r=n(51495),a=n(40778),o=n(88279),l=n(91662),c=n(21622),u=n(63057),m=n(32140),d=n(47775),h=n(31491),p=n(74311),g=n(30381),b=n.n(g),N=n(85834),f=n(33696);function _(e){try{return(0,N.Mf)(decodeURIComponent(e))}catch(e){return""}}var v=n(50063),E=n(44025),C=n(38470),w=n(30074),y=n(88077);async function S(e,t,n){const{inReplyTo:s,references:r}=I(e),{bodyParts:a=[]}=e,{cidAttachments:o}=O(a),l=M(a),c=function(e,t,n){let s=D(e,t);s=(0,C.$P)(n,s);const i=b()(e.sentDate).format("LLLL (Z)"),r=e.from,a=n?"\n\n":"<br><br>",o=r.length>0?r[0].name||r[0].address:"unknown",l=(0,u.Z)("On $1, $2 wrote:",[i,o])+a;return s?n?a+l+"> "+s.replace(/\r?\n/g,"\n> "):`${a}${l}<blockquote style="margin: 0 0 0.80ex; border-left: #0000FF 2px solid; padding-left: 1ex">${s}</blockquote>`:l}(e,o,l),{selectedAccount:m,from:d,messageId:h}=x(e),p=Date.now(),g={selectedAccount:m,messageId:h,from:[...d],subject:P(e,"Re: "),sentDate:p,threadKey:[p,e.id,p],attachments:[],to:t,cc:n,bcc:[],plaintext:l,cidAttachments:o,body:c,inReplyTo:s,references:r,focusOnBody:!0,replied:e.id};i.Z.set(g),await A()}function T(e){const{from:t,messageId:n,selectedAccount:s}=x(void 0,"account"),i=function(e){const[,t]=e.split(":",2),[n,s=""]=t.split("?",2),i={to:(0,f.D$)(_(n))};return s.split("&").forEach((e=>{["cc","bcc"].filter((t=>e.startsWith(t+"="))).forEach((t=>{const n=_(e.substr(t.length+1));i[t]=(0,f.D$)(n)})),["body","subject"].filter((t=>e.startsWith(t+"="))).forEach((t=>i[t]=_(e.substr(t.length+1))))})),i}(e);return{bcc:[],body:"",cc:[],subject:"",...i,attachments:[],from:t,messageId:n,plaintext:!0,selectedAccount:s,sentDate:Date.now()}}function k(e,t){const{bodyParts:n=[]}=e,s=M(n),{attachments:i,cidAttachments:r}=O(n),a=D(e,r),{inReplyTo:o,references:l,messageId:c,to:u,cc:m,bcc:d,subject:h,sentDate:p}=e,{selectedAccount:g,from:b}=x(e,"message");return{plaintext:s,attachments:i,cidAttachments:r,body:a,inReplyTo:o,references:l,messageId:c,to:u,cc:m,bcc:d||[],subject:h,sentDate:p,selectedAccount:g,from:[...b],threadKey:t}}function I(e){const{messageId:t,inReplyTo:n,references:s}=e,i={inReplyTo:t,references:s?s.slice():[]};return 0===i.references.length&&n&&i.references.push(n),t&&i.references.push(t),i}async function A(e){const t=Z(e);await o.Z.openURL(t,{singleton:Boolean(e)})}function Z(e){return E.jk.internalUrl("mailpage","composer/draft",(0,u.Z)("Mail - Draft"),e?JSON.stringify({id:e}):void 0)}function P(e,t=""){if(!e)return"";const n=e.subject||"";return 0===n.indexOf(t)?n:t+n}function D(e,t){const n=(0,d.Z)(!0,e.bodyParts);return n&&n.content?"html"===n.type?function(){const i={};t.forEach((e=>{e.id&&(i["cid:"+e.id]=e)}));const r=(o=e.from,o&&o.length>0&&s.Z.isTrustedEmailAddress(o[0].address)),a=(0,y.Nw)(n.content,{attachments:i,blockHTTPLeaks:!e.trusted&&!r});var o;return a.sanitized}():n.content:""}function M(e){const t=(0,d.Z)(!0,e);return!t||"html"!==t.type}function O(e){const t=[],n=[];return(0,C.yN)(e).forEach((e=>{if(e.inUse)n.push(e);else{const{id:n,inUse:s,...i}=e;t.push(i)}})),{attachments:t,cidAttachments:n}}function x(e,t){const n=c.ZP.get(w.kMailDefaultAccount)||v.Y6,s=c.ZP.get(w.kMailLastSentFrom),i=c.ZP.get(w.kMailAccounts);let o,l,u;if(i.length>0){if("account"===t){const e=a.Z.getSelectedFolder();if(e?.accountId&&(o=i.find((t=>t.MAIL_EMAIL===e.accountId))),!o&&e?.accountId===v.Ry){const t=e?.path.split("/")[0];o=i.find((e=>e.MAIL_EMAIL===t))}}else if(e){const{from:n,to:s}=e,a=n.map((e=>e.address)),l=s.map((e=>e.address));if("message"===t?a.length>0&&(o=i.find((e=>a.includes(e.MAIL_EMAIL)))):l.length>0&&(o=i.find((e=>l.includes(e.MAIL_EMAIL)))),!o){const t=r.C.getSourceFilters(e.id),n=new Set(t.map((e=>e.accountId)));o=i.find((e=>n.has(e.MAIL_EMAIL)))}}!o&&n===v.Y6&&s&&(o=i.find((e=>e.MAIL_EMAIL===s))),o||n===v.Y6||(o=i.find((e=>e.MAIL_EMAIL===n))),o||(o=i[0])}return o?(l=[{name:o.MAIL_NAME,address:o.MAIL_EMAIL}],u=(0,m.Z)(o.MAIL_EMAIL)):(l=[],u=(0,m.Z)()),{selectedAccount:o,from:l,messageId:u}}const L={closeComposer:function(e){const t=Z(e);o.Z.closeUrl(t)},createDraft:async function(e={}){const{selectedAccount:t,from:n,messageId:s}=x(void 0,"account"),{to:r,subject:a="",body:o=""}=e;if(!t)return;const l={selectedAccount:t,messageId:s,subject:a,body:o,from:[...n],sentDate:Date.now(),to:r?[...(0,f.D$)(r)]:[],cc:[],bcc:[],plaintext:!0,attachments:[]};i.Z.set(l),await A()},createDraftFromSent:function(e){const{bodyParts:t=[]}=e,n=M(t),{attachments:s,cidAttachments:r}=O(t),a=D(e,r),{selectedAccount:o,from:l,messageId:c}=x(e,"message"),{to:u,cc:m,bcc:d}=e,h={to:u,cc:m,bcc:d||[],sentDate:Date.now(),subject:P(e),plaintext:n,attachments:s,cidAttachments:r,body:a,focusOnBody:!0,selectedAccount:o,from:[...l],messageId:c};i.Z.set(h),A()},forward:async function(e){const{inReplyTo:t,references:n}=I(e),{bodyParts:s=[]}=e,{attachments:r,cidAttachments:a}=O(s),o=M(s),l=function(e,t,n){const s=D(e,t),i=new Date(parseInt(e.sentDate)),r=(0,f.Rz)(e.from),a=(0,f.Rz)(e.to),o=(0,f.Rz)(e.cc);let l=`\n\n\n----- ${(0,u.Z)("Forwarded message")} -----\n`;r&&(l+=(0,u.Z)("From: $1",[r])+"\n");a&&(l+=(0,u.Z)("To: $1",[a])+"\n");o&&(l+=(0,u.Z)("Cc: $1",[o])+"\n");e.subject&&(l+=(0,u.Z)("Subject: $1",[e.subject])+"\n");return l+=(0,u.Z)("Date: $1",[i.toString()])+"\n\n\n",(n?l:l.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"))+s}(e,a,o),{selectedAccount:c,from:m,messageId:d}=x(e),h=Date.now(),p={selectedAccount:c,messageId:d,from:[...m],sentDate:h,threadKey:[h,e.id,h],to:[],cc:[],bcc:[],subject:P(e,"Fwd: "),plaintext:o,attachments:r,cidAttachments:a,body:l,inReplyTo:t,references:n,forwarded:e.id};i.Z.set(p),await A()},open:function(e,t){const n=k(e,t);i.Z.set(n),A(e.id)},prepareDraft:async function(e){const[t,n]=await Promise.all([h.Z.call(e),(0,p.Z)(e)]);if(!t||!n)return!1;const s=k(t,n.threadKey);return i.Z.set(s),!0},reply:async function(e){let t;t=a.Z.isSentFolderSelected()?e.to:e.replyTo&&e.replyTo.length>0?e.replyTo:e.from,await S(e,t,[])},replyToAll:async function(e){const t=c.ZP.get(w.kMailAccounts)||[],{from:n,to:s,replyTo:i,cc:r}=e,a=(0,f.Yn)(...i,...n,...s).filter((e=>t.every((t=>t.MAIL_EMAIL!==e.address)))),o=(0,f.Yn)(...r).filter((e=>t.every((t=>t.MAIL_EMAIL!==e.address))));await S(e,[...a],[...o])},closeMailPages:function(){const e=E.xy.mailpage,t=l.ZP.getMutablePagesInAllWindows().filter((t=>t.url.startsWith(e)));o.Z.closePage(t)}}},49856:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var s=n(66854),i=n(82495),r=n(88279),a=n(21622),o=n(27673),l=n(30801),c=n(54471),u=n(62830),m=n.n(u),d=n(74686),h=n(12964),p=n(30074),g=n(44025);const{minimalCreateEvent:b}=i.Z;let N;const f=new class{openGuestWindow(){d.Z.runtimePrivate.switchToGuestSession((e=>{e||console.warn("Guest mode is disabled.")}))}closeGuestSession(){d.Z.runtimePrivate.closeGuestSession((e=>{e||console.warn("Guest mode is disabled.")}))}managePeople(){return d.Z.runtimePrivate.openProfileSelectionWindow()}closeActiveProfile(){d.Z.runtimePrivate.closeActiveProfile((e=>{e||console.warn("Failed to open profile window.")}))}showAddFeed(e){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_ADD_FEED,options:e})}showQuickCommand(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_QUICKCOMMANDS})}async showCalendar(e){const t=["vivaldi://calendar",e?`&anchordate=${e}`:""];await r.Z.openURL(t.join(""),{singleton:!0})}showCalendarNotification(e,t,n=!1){o.Z.dispatch({actionType:"MAIN_SHOW_CALENDAR_ALARM",options:{notification:e,event:t,fullscreen:n}})}showAddEvent(e,t){s.Z.addEventCommand(b({title:e,url:t}))}showKeyboardShortcuts(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS})}showPageAccessKeys(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_PAGE_ACCESS_KEYS})}showConfirmOpenBookmarkDialog(e){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG,options:e})}showClearBrowsingHistoryDialog(e){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG,options:e})}showClearPrivateData(){f.showClearBrowsingHistoryDialog({})}showImportCalendar(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_IMPORT_CALENDAR})}showModal(e){return new Promise((t=>o.Z.dispatch({actionType:"MAIN_SHOW_MODAL_DIALOG",options:{...e,resolve:t}})))}showImportData(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_IMPORT_DATA})}showBookmarkDialog(e){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_BOOKMARK_DIALOG,options:e})}async showMail(){await r.Z.openURL(g.jk.internals.mailpage,{singleton:!0})}showMailUnsubscribeDialog(e){const t={actionType:"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG",options:e};o.Z.dispatch(t)}showMailAuthenticationDialog(e){const t={actionType:"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG",options:e};o.Z.dispatch(t)}showMailDeleteDialogSetting(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING",options:e};o.Z.dispatch(t)}showMailDeleteDialogFolders(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS",options:e};o.Z.dispatch(t)}showMailDeleteDialogAccounts(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS",options:e};o.Z.dispatch(t)}showMailDeleteDialogConfirmAll(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL",options:e};o.Z.dispatch(t)}showSaveSession(e){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_SAVE_SESSION,options:e})}showOpenSession(){o.Z.dispatch({actionType:l.Z.MAIN_SHOW_OPEN_SESSION})}showDialog(e,t){const n={actionType:"MAIN_SHOW_DIALOG",options:e,onAfterClose:t};o.Z.dispatch(n)}async showExtensions(){await r.Z.openURL("vivaldi://extensions",{singleton:!0})}async showHistory(){await r.Z.openURL("vivaldi://history",{singleton:!0})}async showNotes(){await r.Z.openURL("vivaldi://notes",{singleton:!0})}async showBookmarks(){await r.Z.openURL("vivaldi://bookmarks",{singleton:!0})}async showWelcome(){await r.Z.openURL("vivaldi://welcome")}async showSettings(e="general",t){const n=(0,h.Z)(t)?"":Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&");a.ZP.get(p.kSettingsInTab)?await r.Z.openURL(`vivaldi://settings/${e}/?${n}`,{singleton:!0,skipParams:!0}):d.Z.utilities.broadcastMessage({showSettingsWindow:{settingsCategory:`${e}&${n}`}})}showAccountSheet(e="login"){o.Z.dispatch({actionType:"MAIN_SHOW_ACCOUNT_SHEET",options:e})}showMailAccountDialog(){o.Z.dispatch({actionType:"MAIN_SHOW_MAIL_ACCOUNT_DIALOG"})}showCalendarAccountDialog(){o.Z.dispatch({actionType:"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG"})}openNewPopAsTabOrWindow(e,t,n){if(a.ZP.get(p.kPopupsShowInTab))e.window.accept(t+";1");else{const s={identifier:m()(),incognito:n,windowBounds:{left:e.initialLeft,top:e.initialTop,width:e.initialWidth,height:e.initialHeight},ownerWindowId:t,acceptOrBlockCallback:t=>{e.window?e.window.accept(t+";1"):r.Z.openURL(e.targetUrl,{windowId:t})}};o.Z.dispatch({actionType:"POPUPWINDOW_OPENED",popupWindow:s})}}startCasting(){d.Z.utilities.startChromecast(c.ZP.getActiveBrowserOrPopupWindowId())}setPaneFocus(e){o.Z.dispatch({actionType:"MAIN_SELECTING_TOOLBAR",options:{enable:e}})}stepFocus(e){r.Z.clearSelection(c.ZP.getActiveBrowserOrPopupWindowId());const t=function(e,t){return Array.from(document.querySelectorAll(e)).map((e=>{const t=e.getBoundingClientRect(),n=function(e){let t=0,n=0;for(;e instanceof HTMLElement&&(t+=e.offsetTop,n+=e.offsetLeft,e.offsetParent);)e=e.offsetParent;return{left:n,top:t}}(e);return{elm:e,rect:{left:n.left,top:n.top,width:t.width,height:t.height}}})).sort(((e,n)=>t?e.rect.left<n.rect.left?-1:e.rect.left>n.rect.left?1:e.rect.top<n.rect.top?-1:e.rect.top>n.rect.top?1:0:e.rect.top<n.rect.top?-1:e.rect.top>n.rect.top?1:e.rect.left<n.rect.left?-1:e.rect.left>n.rect.left?1:0))},s=function(e,t){const n=t.children;let i=!1;for(let t=0;t<n.length;t++){if(n[t]===e)return!0;if(s(e,n[t])){i=!0;break}}return i},i=t(".pagefocusstop",!0),a=t(".uifocusstop",!1).concat(i);if(a.length>0){let t=-1;const o=document.activeElement;for(let e=0;e<a.length;e++)if(a[e].elm===o||s(o,a[e].elm)){t=e;break}t=-1===t?e?0:a.length-1:e?t+1<a.length?t+1:0:0===t?a.length-1:t-1;if(-1!==i.findIndex((e=>e===a[t]))){const e=parseInt(a[t].elm.getAttribute("data-id"));r.Z.activateTab(e,c.ZP.getActiveBrowserOrPopupWindowId()),n(88999).Z.executeActions("COMMAND_FOCUS_WEBVIEW"),N=setTimeout((()=>f.setPaneFocus(!1)),1e3)}else a[t].elm.focus(),N&&clearTimeout(N);f.setPaneFocus(!0)}}},_=f},91411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(27673),i=n(30801);const r=new class{setNavigationState(e,t,n){s.Z.dispatch({actionType:"NAVIGATION_SET_STATE",pageId:e,windowId:t,navigationState:n})}setSSLState(e,t){s.Z.dispatch({actionType:"PAGE_SET_SSL_STATE",pageId:e,info:t})}addBlockedPopupEvent(e,t){s.Z.dispatch({actionType:i.Z.NAVIGATION_ADD_POPUP,pageId:e,popupEvent:t})}removeBlockedPopup(e,t){s.Z.dispatch({actionType:i.Z.NAVIGATION_REMOVE_POPUP,pageId:e,targetUrl:t})}resetBlockedPopups(e){s.Z.dispatch({actionType:i.Z.NAVIGATION_RESET_BLOCKED_POPUPS,pageId:e})}setPermission(e,t,n,r,a){s.Z.dispatch({actionType:i.Z.NAVIGATION_SET_PERMISSION,pageId:e,origin:t,permission:n,requestEvent:r,state:a})}resetPermissions(e){s.Z.dispatch({actionType:i.Z.NAVIGATION_RESET_PERMISSIONS,pageId:e})}setPageHasBlockedContent(e,t){s.Z.dispatch({actionType:i.Z.NAVIGATION_SET_BLOCKED_CONTENT,content_type:t,pageId:e})}resetPageHasBlockedContent(e){s.Z.dispatch({actionType:i.Z.NAVIGATION_RESET_BLOCKED_CONTENT,pageId:e})}}},66524:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var s=n(53816),i=n(43179),r=n(39412),a=n(88279),o=n(91662),l=n(77458),c=n(97491),u=n(21622),m=n(27673),d=n(54471),h=n(63057),p=n(2121),g=n(74686),b=n(30074),N=n(65531),f=n(44025);const _="NotesCutIds";let v=!0;const E=function(){v=!0},C=function(){v=!1,w()};async function w(){const e=await new Promise((e=>g.Z.notes.getTree(e)));m.Z.dispatch({actionType:"NOTES_INIT",notes:e})}function y(e,t){if(v)return;if(m.Z.dispatch({actionType:"NOTES_ADD_ITEM",id:e,item:t}),!d.ZP.isActive())return;const n=u.ZP.get(b.kNotesCreationShowPanel),s=o.ZP.unsafeGetActivePage(),i=f.jk.getDisplayUrl(s.url).startsWith("vivaldi://notes");if(n&&!i)return void l.Z.showContent("notes");u.ZP.get(b.kNotesCreationNotify)&&!c.ZP.getIsPanelVisible("notes")&&!i&&(0,N.c)({title:(0,h.Z)("New Note Created"),onClick:()=>l.Z.showContent("notes",{setFocus:!0,selectId:e,reason:""})})}const S=function(e,t){v||m.Z.dispatch({actionType:"NOTES_MOVE_ITEM",id:e,targetFolder:t.parentId,targetIndex:t.index})},T=function(e,t){v||m.Z.dispatch({actionType:"NOTES_CHANGE_ITEM",id:e,changes:t})},k=function(e){v||m.Z.dispatch({actionType:"NOTES_REMOVE_ITEM",id:e})},I={scale:1,width:0,height:0};function A({id:e,url:t,content:n}){if(!n)return Promise.reject();const s=r.ZP.getNodeById(e);if(!s)return Promise.reject();const i={attachments:[...s.attachments||[],{content:n}],...!s.url&&t?{url:t}:null};return new Promise((t=>{g.Z.notes.update(e,i,t)}))}function Z(e){"Escape"===e.key&&x([])}function P(e,t){if(e!==_||"string"!=typeof t)return;const n=t.length>0?t.split(","):[];n.length>0?window.addEventListener("keydown",Z,!0):window.removeEventListener("keydown",Z,!0),m.Z.dispatch({actionType:"NOTES_SET_CUT_IDS",ids:n})}function D({clipboardData:e},t,n){e&&(e.setData("vivaldi/x-cut",n?"true":"false"),e.setData(r.d0,JSON.stringify(t)),e.setData("text/plain",r.ZP.getDragData("text/plain",t)))}function M(e){return new Promise((t=>{g.Z.notes.create(e,t)}))}function O(e){return new Promise(((t,n)=>{const s=new FileReader;s.onloadend=({target:e})=>{t(e.result)},s.onerror=()=>{s.abort(),n()},s.readAsDataURL(e)}))}function x(e){g.Z.utilities.setSharedData({key:_,value:e.length>0?e.join():""})}async function L(e){const t=s.Z.getActiveWebView();if(!t)return;const n=["richtexteditor","markdowneditor"].includes(t.name)?"":t.src,i=await function(e,t=I){return new Promise(((n,s)=>{e.getThumbnail(t,(e=>{p.Z.runtime.lastError&&s(p.Z.runtime.lastError.message),n(e)}))}))}(t);return A({id:e,url:n,content:i})}const R={loadPromise:async function(){await w(),v=!1,g.Z.notes.onImportBegan.addListener(E),g.Z.notes.onImportEnded.addListener(C),g.Z.notes.onCreated.addListener(y),g.Z.notes.onMoved.addListener(S),g.Z.notes.onChanged.addListener(T),g.Z.notes.onRemoved.addListener(k),g.Z.utilities.onSharedDataUpdated.addListener(P),g.Z.utilities.getSharedData({key:_,value:""},(e=>{e&&P(_,e)}))},emptyTrash:function(){return new Promise(((e,t)=>{g.Z.notes.emptyTrash((n=>{!1===n&&(console.warn("Empty trash failed."),t("Empty trash failed.")),e()}))}))},addScreenshot:L,addAreaCapture:async function(e){const t=s.Z.getActiveWebView(),n=!t||f.jk.isInternalUrl(t.src),r=!t||n?void 0:t.src;try{return A({id:e,url:r,content:await i.Z.captureAreaCommand("note")})}catch(e){}},addImageFile:async function(e,t){return A({id:e,content:await O(t)})},createNoteFromCapture:async function(e){const t=[{content:e}],n=o.ZP.unsafeGetActivePage().get("url"),s=await M({type:"note",attachments:t,url:n}),i=c.ZP.getPanelAvailable("notes");if(s)if(i){const e={selectId:s.id,setFocus:!0,reason:""};l.Z.showContent("notes",e)}else{const e=f.jk.internalUrl("notes",s.id);a.Z.openURL(e,{inCurrent:!1})}},readFileAsDataURL:O,removeAttachment:function(e,t){const n=r.ZP.getNodeById(e);if(!n||!n.attachments)return Promise.resolve();const s=n.attachments.filter((e=>e.checksum!==t.checksum));return new Promise((t=>{g.Z.notes.update(e,{attachments:s},(()=>t()))}))},createNotesFromTreeNodes:function e(t,n="",s,i){return Promise.all(t.map((async(t,a)=>{const o=s?s+a:void 0;if(t.separator)return void M({index:o,parentId:n,type:"separator"});const l=await M({parentId:n,index:o,type:r.ZP.isFolder(t)?"folder":"note",attachments:t.attachments,content:t.content,title:t.title,url:t.url});return t.children?await e(t.children,l.id,0,i):void 0}))).then((()=>{}))},createNote:async function(e,t=!0){const{content:n,url:s}=e,i=await M({type:"note",content:n,url:s});return s&&u.ZP.get(b.kNotesCreationAddScreenshot)&&t?L(i.id):i},cut:function(e,t){D(e,t,!0),x(t),e.stopPropagation(),e.preventDefault()},copy:function(e,t){D(e,t,!1),e.stopPropagation(),e.preventDefault()},setCutIds:x}},38504:(e,t,n)=>{"use strict";n.d(t,{r:()=>S,Z:()=>A});var s=n(55002),i=n(82495),r=n(49856),a=n(78508),o=n(6478),l=n(21622),c=n(27673),u=n(30801),m=n(2121),d=n(30381),h=n.n(d),p=n(74686),g=n(45932),b=n(30074),N=n(53548),f=n(97562),_=n(65531),v=n(34155);const{createEventNotificationString:E,parseEventNotificationString:C}=i.Z;let w;async function y(e){const t=await new Promise((e=>m.Z.alarms.getAll(e)));await Promise.all(t.map((async t=>{const{notificationId:n,snooze:s}=C(t.name);e!==n||s||await new Promise((e=>m.Z.alarms.clear(t.name,e)))})))}function S(e,t){const{id:n,event_id:i,when:r,delay:a=0}=e,o=t||i&&s.Z.getEvent(i);if(!o)return console.warn("Can not create alarms, event not found",e),void p.Z.calendar.deleteNotification(n);if(o.trash)return;const c=l.ZP.get(b.kCalendarLastNotificationTime)||Date.now();let u=[];const{recurrence:d}=o;if(e.period)e.when>c&&u.push(e.when);else if(d){const e=i?.split(":")[1],t=c+r+a;u=(0,N.YE)(d.toString(),t,t+7*g.hd,o.timezone).map((e=>e.valueOf()-r)).filter((t=>!e||t===e))}else{const e=(0,f.oJ)(o)-r+a;e>c&&u.push(e)}u.forEach((t=>{m.Z.alarms.create(E(n,o.id,t,Boolean(e.period)),{when:t})}))}const T=new class{async loadNotifications(){await p.Z.calendar.getAllNotifications((e=>{c.Z.dispatch({actionType:"NOTIFICATIONS_INIT",notifications:e})}))}deleteNotification(e){const{id:t,event_id:n}=e;n&&(p.Z.calendar.deleteNotification(t),y(t))}createNotification(e,t){e.event_id&&(e.event_id=e.event_id.split(":")[0]),p.Z.calendar.createNotification(e,(e=>{e.event_id&&S(e,t)}))}snooze(e,t,n){const{id:s,...i}=e;i.when=Date.now()+n*g.lb,i.period=parseInt((0,f.oJ)(t)),this.createNotification(i)}async updateNotification(e,t){let{id:n,event_id:s,...i}=e;s&&(s=s.split(":")[0]);const r=await new Promise((e=>p.Z.calendar.updateNotification(n,i,(t=>e(t)))));r.event_id&&(await y(n),await S(r,t))}async updateAlarmsForNotification(e,t){await y(e.id),await S(e,t)}async updateAllAlarms(){const e=await i.Z.getAllNotifications();await Promise.all(e.map((e=>y(e.id)))),await Promise.all(e.map((e=>S(e))))}startAPIChangeListeners(){l.ZP.get(b.kMailIsTurnedOff)?console.warn("Calendar is disabled. Not starting Notifications API listeners."):(Object.keys(I).forEach((e=>p.Z.calendar[e].addListener(T.loadNotifications))),w||(w=setInterval((()=>T.updateAllAlarms()),30*g.lb)),v.nextTick((()=>T.updateAllAlarms())))}stopAPIChangeListeners(){Object.keys(I).forEach((e=>p.Z.calendar[e].removeListener(T.loadNotifications))),w&&(clearInterval(w),w=null)}showNotification(e,t){const n=l.ZP.get(b.kCalendarNotificationType);if("none"===n)return;const s=l.ZP.get(b.kCalendarNotificationSound);if("system"===n){const n=t.title||e.name||"",s=h()((0,f.oJ)(t)).format("LT");(0,_.c)({title:`${s} - ${n}`,requireInteraction:!0,silent:!0})}else r.Z.showCalendarNotification(e,t,"dialog"!==n);if(s){new Audio(s).play()}o.Z.set(b.kCalendarLastNotificationTime,Date.now()),e.period&&p.Z.calendar.deleteNotification(e.id)}};function k(e){const{notificationId:t}=C(e.name);if(!t)return;const{notifications:n}=a.Z.getState(),i=n.find((e=>t===e.id));if(!i)return;const r=s.Z.getEvent(i.event_id||"");if(r){if(l.ZP.get(b.kCalendarHiddenHidesNotifications)){if(s.Z.getCalendars().find((e=>e.id===r.calendarId))?.hidden)return}T.showNotification(i,r)}}m.Z.alarms.onAlarm.addListener(k),l.ZP.addListener(b.kMailIsTurnedOff,(function(e,t,n){n===b.kMailIsTurnedOff&&(t?m.Z.alarms.onAlarm.removeListener(k):m.Z.alarms.onAlarm.addListener(k))}));const I={onNotificationChanged:u.Z.CALENDAR_NOTIFICATION_CHANGED},A=T},88279:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ke,y:()=>J});var s=n(43556),i=n(87716),r=n(51508),a=n(27673);var o=n(91411),l=n(91662),c=n(60253),u=n(21622),m=n(88047),d=n(78174),h=n(30801),p=(n(79290),n(82487)),g=n(52604),b=n(54471),N=n(93065),f=n(2121),_=n(48764).Buffer;const v=function(e){const t=e.match(/^(data:)(.*?)?(;charset=.*?)?(;base64)?,(.*)$/);if(!t)return e;const n=t[2],s=t[5],i=new _(s,"base64").toString("binary"),r=new Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);const a=new Uint8Array(r),o=new Blob([a],{type:n});return URL.createObjectURL(o)};var E=n(62830),C=n.n(E),w=n(95546),y=n(8575);var S=n(74686),T=n(42954);async function k(e,t){const n=await f.Z.tabs.get(e);if(!n)return;let s;try{s=JSON.parse(n.extData||"{}")}catch(e){s={}}const i={...s,...t};let r=!1;const a=Object.entries(i).reduce(((e,[t,n])=>void 0===n&&void 0!==s[t]?(r=!0,e):{...e,[t]:n}),{}),o=JSON.stringify(a);o===n.extData||!r&&"{}"===o||await f.Z.tabs.update(e,{extData:o})}var I=n(44025),A=n(43393),Z=n(45447),P=n(7509),D=n(30074),M=n(42941),O=n(24604),x=n(35767);let L=(0,A.Map)(),R=0;const B={bookmarkId:"",inBackground:!1,inCurrent:!1,inSpecificPageId:void 0,incognito:!1,transition:m.Z.AUTO_TOPLEVEL,index:void 0,post:!1,singleton:!1,skipParams:!1,groupId:void 0};async function F(e="",t=B){const n=(0,I.Gr)(e);let i=n&&"_blank"!==n?n:l.ZP.getDefaultStartpage();const r=t.windowId||b.ZP.getLastActiveBrowserWindowId();if(b.ZP.isGuestSession()&&(0,I.YC)(i))return Promise.reject("Illegal URL for Guest mode!");if(b.ZP.isIncognito(r)&&(0,I.CS)(i)&&(t.incognito=!1,t.inNewWindow=!0),i===I.xy.welcome&&S.Z.utilities.setSharedData({key:"has_shown_welcome_page",value:!0}),t.inNewWindow)return void ce(r,i,{incognito:t.incognito,transition:t.transition});const o=t.inSpecificPageId&&l.ZP.getPageById(t.inSpecificPageId)||l.ZP.unsafeGetActivePage(r);let m,d="";t.post&&([i,m]=function(e){const t=(0,y.parse)(e,!1);return[t.href.replace(t.search||"","")||"",t.query||""]}(i),d="Content-Type: application/x-www-form-urlencoded\r\n\r\n");const h=(0,I.Z7)(i),g=l.ZP.getPages(r).find((e=>(0,P.uu)(i,e.url,!!t.skipParams)));if(t.singleton&&(0,I.pM)(i)&&g)return h&&a.Z.dispatch({actionType:"PAGE_OPEN_URL",pageId:g.id,windowId:g.windowId,url:i}),void a.Z.dispatch({actionType:"PAGE_OPEN",windowId:g.windowId,pageId:g.id});if((t.inCurrent||t.inSpecificPageId)&&o.windowId&&!b.ZP.isPopup(o.windowId)){t.bookmarkId&&s.Z.add(o.id,t.bookmarkId,i);const e=o.getIn(["extData","ext_id"]);return c.Z.destroyPeriodicAlarm(e),void a.Z.dispatch({actionType:"PAGE_OPEN_URL",pageId:o.id,windowId:o.windowId,url:i,post:m,headers:d,transition:t.transition})}const N={url:t.post?"about:blank":v(i),windowId:r,index:t.index,active:!t.inBackground,transition:t.transition,openerTabId:t.addOpenerTabId&&o?o.id:void 0};t.groupId&&(N.extData=JSON.stringify({group:t.groupId}));const _=(await f.Z.tabs.create(N)).id;u.ZP.get(D.kTabsFocusWebview)&&p.Z.doAction("focusWebView"),void 0!==_&&t.bookmarkId&&s.Z.add(_,t.bookmarkId,i),t.post&&void 0!==_&&a.Z.dispatch({actionType:"PAGE_OPEN_URL",pageId:_,windowId:r,url:i,post:m,headers:d,transition:t.transition}),t.inBackground||await function(e,t){return new Promise((n=>{f.Z.windows.update(e,t,n)}))}(r,{focused:!0})}function U(e,t,n){const s=n.windowId;(b.ZP.isPopup(s)||s===window.vivaldiWindowId)&&("complete"===t.status&&(t.title=n.title),a.Z.dispatch({actionType:"CHROME_TABS_UPDATED",tabId:e,windowId:s,changeInfo:t}))}function V(e,t,n){if(b.ZP.shouldHandleWindow(e)){const s=l.ZP.unsafeGetActivePage(e);r.Z.handleShortcut(s,t,n,b.ZP.isSettings(e))}}function H(e,t,n){(class{static setMediaState(e,t){a.Z.dispatch({actionType:"PAGE_SET_MEDIASTATE",tabId:e,mediastate:t})}}).setMediaState(e,n)}function W(e,t){let n=t.adoptedLanguage;"und"===n&&(n=t.cldLanguage,"und"===n&&(n="")),d.Z.setDeterminedLanguage(e,n)}function z(e,t,n,s){d.Z.setPageTranslated(e,{isTranslated:!0,originalLang:t,translatedLang:n,error:s})}function G(e,t){!1===t&&d.Z.revertTranslation(e)}function K(e,t,n,s){let i="undecided";switch(s){case"allow":i="allowed";break;case"block":i="blocked";break;default:i="undecided"}let r=null;try{r=new URL(n)}catch(e){return}o.Z.setPermission(e,r.origin,t,null,i)}function j(e,t){b.ZP.shouldHandleWindow(e)&&(t?p.Z.back():p.Z.forward())}function Y(e,t,n){a.Z.dispatch({actionType:"VIVALDI_TABS_ATTACHED",tabId:e,fromWindowId:t}),H(e,window.vivaldiWindowId,n)}function $(e,t){a.Z.dispatch({actionType:"VIVALDI_TABS_DETACHED",tabId:e,toWindowId:t})}function X(e,t,n){a.Z.dispatch({actionType:"VIVALDI_TABS_UPDATED",pageId:e,windowId:t,tabInfo:n})}function Q(e,t){if(e!==b.ZP.getId())return;t!==l.ZP.unsafeGetActivePage().id&&ue(t,e)}function q(e,t){const n={actionType:"CHROME_TABS_REMOVED",tabId:e,removeInfo:t};a.Z.dispatch(n)}async function J(e,t){if(0===e.length)return;const n=[],s=l.ZP.getPages(t);for(let t=0;t<e.length;t++){const i=e[t],r=s.find((e=>e.id===i));r&&n.push(r.getIn(["extData","ext_id"]))}await(0,N.Z)(t,{historystack:n})}let ee;async function te(e){let t=i.ZP.tabToPage(e);const n=t.windowId,s=l.ZP.getPages(n)?l.ZP.getActivePage(n):void 0,r={ext_id:C()()},o=l.ZP.getPageHistory(n)??[];if(t.active?(0,O.AL)(o,t.id):(0,O.EQ)(o,t.id),ee){const{index:e}=await f.Z.tabs.get(t.id);t=t.set("index",e),ee=void 0}else{let e=l.ZP.findRepositionedIndex(t,n,s);if(e!==t.index){const n=await f.Z.tabs.move([t.id],{index:e});e=Array.isArray(n)?n[0].index:n.index,t=t.set("index",e)}}const c=t.openerTabId,m=u.ZP.get(D.kTabsNewPlacement),d="number"==typeof c&&l.ZP.getPageById(c);if(d){const e="openintabstackwithrelated"===m&&!(0,I.pM)(d.url)&&!d.pinned?await fe((0,A.List)([d,t])):(0,Z.av)(d),s=u.ZP.get(D.kTabsStackingOpenInCurrent);if(e&&s){const t=l.ZP.getGroup(e,d.windowId).size>1;t&&(r.group=e);const s=d.getIn(["extData","tiling"]);t&&s&&l.ZP.getTiles(s.get("id"),n).size>1&&(r.tiling=s)}}a.Z.dispatch({actionType:"CHROME_TABS_CREATE",page:t.mergeIn(["extData"],r),tabActivationHistory:o,deactivatePageId:t.active?s?.id:void 0}),await k(t.id,r);const h="number"==typeof t.openerTabId?l.ZP.getActivePage()?.imageLoading:u.ZP.get(D.kPageImageLoading);h&&await new Promise((e=>{S.Z.tabsPrivate.update(t.id,{showImages:"never"!==h,loadFromCacheOnly:"cache"===h},e)})),await J(o,n),await new Promise((e=>{n&&f.Z.windows.update(t.windowId,{focused:!0,drawAttention:!0},e)}))}function ne(e){e.windowId===window.vivaldiWindowId&&a.Z.dispatch({actionType:"CHROME_TABS_ACTIVATED",activeInfo:e})}function se(e,t){t.newWindowId===window.vivaldiWindowId&&a.Z.dispatch({actionType:"CHROME_TABS_ATTACHED",tabId:e,attachInfo:t})}function ie(e,t){t.oldWindowId===window.vivaldiWindowId&&a.Z.dispatch({actionType:"CHROME_TABS_DETACHED",tabId:e,detachInfo:t})}function re(e,t){const n=t.windowId;n===window.vivaldiWindowId&&a.Z.dispatch({actionType:"CHROME_TABS_MOVED",tabId:e,windowId:n,index:t.toIndex})}let ae=!1,oe=null;async function le(e,t,n){a.Z.dispatch({actionType:h.Z.UNLOAD_DIALOG_CLOSED,tabId:t,proceed:n,windowId:e}),ae=!1,!n&&oe?.id&&(await f.Z.tabs.remove(oe.id),oe=null)}async function ce(e,t,n={},s="normal"){"string"==typeof t&&(t=(0,I.Gr)(t));const i=b.ZP.isMaximized(e),r={url:t,incognito:!1,transition:m.Z.AUTO_TOPLEVEL,...n};!n.hasOwnProperty("left")&&i&&(r.state="maximized");const a={ext_id:C()(),windowType:s,...n.extData?JSON.parse(n.extData):null};if(r.extData=JSON.stringify(a),void 0===r.url){const e=u.ZP.get(D.kIncognitoShowIntro);r.url=r.incognito&&e?I.xy["private-intro"]:l.ZP.getDefaultStartpage()}return new Promise((e=>f.Z.windows.create(r,e)))}function ue(e,t,n=!0){a.Z.dispatch({actionType:"PAGE_OPEN",pageId:e,windowId:t,selectGroup:n})}function me(e){a.Z.dispatch({actionType:"PAGE_MINIMIZE",windowId:e})}async function de(){return!ae&&(!(!b.ZP.isPopup()&&!b.ZP.isSettings())&&(ae=!0,await g.Z.close(b.ZP.getId()),ae=!1,!0))}async function he(e){if(ae)return;const t=e instanceof A.List?e:A.List.of(e);if(0===t.size)return;ae=!0;const n=t.first().windowId,s=function(e,t){const n=l.ZP.getPages(t),{canClosePage:s}=l.ZP;if(1===n.size&&!s(n.first()))return(0,A.List)([]);const i=u.ZP.get(D.kTabsClosePinned);return"off"===i||"bury"===i?e.filter((e=>!e.pinned)):e}(t,n);a.Z.dispatch({actionType:"PAGE_CLOSE",pages:s});const i=t.find((e=>e.pinned&&e.active)),r=u.ZP.get(D.kTabsClosePinned);i&&"bury"===r&&me(n);const o=u.ZP.get(D.kTabsNeverCloseLast),c=s.count()===l.ZP.getPages(n).count();o&&c&&!oe&&(oe=await f.Z.tabs.create({url:b.ZP.isGuestSession(n)?T.Cd:v(l.ZP.getDefaultStartpage()),active:!1,transition:m.Z.AUTO_TOPLEVEL,windowId:n}));const d=s.map((e=>e.id)).toJS();!oe&&await async function(e,t){const n=e.some((e=>e.pinned)),s=u.ZP.get(D.kTabsClosePinned),i=e.some((e=>e.active));if("bury"===s&&n){const e=l.ZP.getPageHistory(t),n=e[e.length-2];return void 0!==n&&await f.Z.tabs.update(n,{active:!0})}if(1===e.size&&i){const n=l.ZP.findPageToActivateAfterClosingPage(e.first(),t)?.id;return void 0!==n&&await f.Z.tabs.update(n,{active:!0})}}(s,n);try{await f.Z.tabs.remove(d)}catch(e){console.warn(e)}oe=null,ae=!1,await async function(e,t){await new Promise((n=>{let s=!1;function i(){n(),l.ZP.removeChangeListener(r),s=!0}function r(t){t&&"removed"===t.type&&t.id===e&&!s&&i()}setTimeout((()=>{!s&&i()}),t),l.ZP.addChangeListener(r)}))}(d[0],100),oe&&void 0!==oe.id&&(await f.Z.tabs.update(oe.id,{active:!0}),oe=null)}async function pe(e,t,n){if(0!==R)return;let s=A.List.of(l.ZP.unsafeGetActivePage());const i=b.ZP.getActiveBrowserOrPopupWindowId();"other"===e?s=l.ZP.getPages(i).filter((e=>e.id!==l.ZP.unsafeGetActivePage().id)):"all"===e?s=l.ZP.getPages(i):n&&"selection"===e&&(s=n),await Promise.all(s.map((async e=>{R++;try{await S.Z.tabsPrivate.update(e.id,{muteTab:"mute"===t})}finally{R--}})))}async function ge(e,t){const n=window.vivaldiWindowId;if(e instanceof A.List){const s=e;let i=s.some((e=>e.index<t))?t+1:t;return Promise.all(s.map((async(e,t)=>(0===t?i>e.index&&i--:t>0&&i<e.index&&i++,f.Z.tabs.move(e.id,{index:i,windowId:n})))))}const s=e;return f.Z.tabs.move(s.id,{windowId:n,index:t})}async function be(e,t){const n=await f.Z.tabs.move(e.map((e=>e.id)).toJS(),{windowId:t,index:-1});await new Promise((e=>{f.Z.windows.update(t,{focused:!0},e)}));const s=e.find((e=>e.active));return s&&await f.Z.tabs.update(s.id,{active:!0}),n}async function Ne(e,t,n,s){const i=l.ZP.getStepInfo(e,t,n,s);if(!i)return;const{pages:r,index:a}=i;await Te.moveDroppedTabs(r,e.id,a,void 0,s)}async function fe(e,t,n){if(e.some((e=>e.pinned)))return console.warn("Can't group pinned pages."),"";"number"==typeof t&&await f.Z.tabs.move(e.map((e=>e.id)).toArray(),{windowId:window.vivaldiWindowId,index:t});const s=e.find(Z.av),i=s?(0,Z.av)(s):"",r=n||i||C()();return await Promise.all(e.map((async({id:e})=>{await k(e,{group:r})}))),a.Z.dispatch({actionType:"PAGE_TABSTACK_CREATE",pages:e}),r}async function _e(e){const t=e instanceof A.List?e:A.List.of(e);a.Z.dispatch({actionType:"PAGE_TABSTACK_REMOVE_FROM",pages:t}),await Promise.all(t.map((e=>k(e.id,{group:"",tiling:""}))));const n=t.first().windowId,s=l.ZP.getPages(n).last().index+1;await Te.moveToIndex(t,s)}async function ve(e,t){await Promise.all(e.map((e=>f.Z.tabs.update(e.id,{pinned:t}))))}async function Ee(e,t=l.ZP.unsafeGetActivePage()){if(!t)return;let n,s;"always"===e?(n=!0,s=!1):"cache"===e?(n=!0,s=!0):"never"===e&&(n=!1,s=!1),await S.Z.tabsPrivate.update(t.get("id"),{showImages:n,loadFromCacheOnly:s,enablePlugins:n})}async function Ce(e,t,n="selection"){const s=t||(e.count()<4?"row":"grid"),i=C()();await Promise.all(e.map((e=>k(e.id,{tiling:{layout:s,type:n,id:i}})))),a.Z.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,id:i})}function we(e,t){const n=l.ZP.getTiles(e,t);n&&ye(n)}async function ye(e){await Promise.all(e.map((e=>k(e.id,{tiling:""})))),a.Z.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,id:""})}function Se(e){a.Z.dispatch({actionType:"PAGE_SELECTION_CLEAR",windowId:e})}const Te={attachPageEventsPromise:async function(){f.Z.tabs.onCreated.addListener(te),f.Z.tabs.onUpdated.addListener(U),f.Z.tabs.onRemoved.addListener(q),f.Z.tabs.onDetached.addListener(ie),f.Z.tabs.onMoved.addListener(re),f.Z.tabs.onActivated.addListener(ne),f.Z.tabs.onDetached.addListener(ie),f.Z.tabs.onAttached.addListener(se),function(){const{tabsPrivate:e}=S.Z;e.onKeyboardShortcut.addListener(V),e.onMediaStateChanged.addListener(H),e.onPermissionAccessed.addListener(K),e.onRockerGesture.addListener(j),e.onTabIsAttached.addListener(Y),e.onTabIsDetached.addListener($),e.onTabUpdated.addListener(X),e.onBeforeUnloadDialogClosed.addListener(le),e.onLanguageDetermined.addListener(W),e.onPageTranslated.addListener(z),e.onIsPageTranslatedChanged.addListener(G)}(),function(){const{windowPrivate:e}=S.Z;e.onBeforeUnloadDialogOpened.addListener(Q)}(),u.ZP.addListener(D.kTabsSelectionIncludeActive,Se)},clear:function(){window.vivaldiWindowId=42,a.Z.dispatch({actionType:"PAGE_CLEAR"})},clearSelection:Se,clonePages:async function(e){return ee=new Promise((t=>{e.sort(((e,t)=>e.index-t.index)).filter((e=>!(0,I.m7)(e))).map(((e,t)=>async()=>{const n=e.index,s=await f.Z.tabs.duplicate(e.id);if(!s)return-1;const r=s.id;if(!r)return-1;"alwayslast"===u.ZP.get(D.kTabsActivationOnClone)&&await f.Z.tabs.move(r,{index:-1}),"rightofcurrent"===u.ZP.get(D.kTabsActivationOnClone)&&await f.Z.tabs.move(r,{index:n+1+t});const a=(0,Z.av)(e);if(a&&l.ZP.getGroup(a,e.windowId).size>1){const t=i.ZP.tabToPage(s);await fe((0,A.List)([e,t])),t.setIn(["extData","group"],a)}return r})).reduce((async(e,t)=>[...await e,await t()]),Promise.resolve([])).then(t)})),ee},close:async function(){const e=b.ZP.getActiveBrowserOrPopupWindowId();if(l.ZP.isSelecting(e)){const t=l.ZP.getSelectedPages(e);return void await he(t)}if(!await de()){const t=l.ZP.getActivePage(e);t&&await he(A.List.of(t))}},closeOther:function(e,t){const n=e instanceof A.List?e:A.List.of(e);let s;s=t?n.flatMap((e=>l.ZP.isGroup((0,Z.av)(e),e.windowId)?l.ZP.getGroup((0,Z.av)(e),e.windowId):A.List.of(e))):n;const i=s.first().windowId;he(l.ZP.getPages(i).filterNot((e=>s.some((t=>t.id===e.id)))))},closePage:he,closeTabStack:async function(e){const t=l.ZP.getPageById(e);if(!t)return;const n=(0,Z.av)(t);he(l.ZP.getGroup(n,t.windowId))},closeToLeft:async function(e,t=!1){const n=b.ZP.getActiveBrowserOrPopupWindowId(),s=(0,Z.av)(e);let i;if(i=t?l.ZP.getPages(n).skipUntil((e=>(0,Z.av)(e)===s)).takeUntil((t=>t.id===e.id)):l.ZP.isGroup((0,Z.av)(e),e.windowId)?l.ZP.getPages(n).takeUntil((t=>t.id===e.id)).filter((e=>(0,Z.av)(e)!==s)):l.ZP.getPages(n).takeUntil((t=>t.id===e.id)),!i.isEmpty())return he(i)},closeToRight:async function(e,t=!1){const n=b.ZP.getActiveBrowserOrPopupWindowId();let s=l.ZP.getPages(n).skipUntil((t=>t.id===e.id)).skip(1);const i=(0,Z.av)(e);if(t?s=s.takeUntil((e=>(0,Z.av)(e)!==i)):l.ZP.isGroup((0,Z.av)(e),e.windowId)&&(s=s.filter((e=>(0,Z.av)(e)!==i))),!s.isEmpty())return he(s)},closeUrl:function(e){const t=b.ZP.getActiveBrowserOrPopupWindowId();he(l.ZP.getPages(t).filter((t=>(0,P.uu)(e,t.url))))},closePopupOrSettingsWindow:de,createTabStack:fe,changePeriodicReloadForPages:async function(e,t){await Promise.all(e.map((e=>k(e,{interval:t}))))},cycleByHistory:function(e,t,n={goBack:!1}){a.Z.dispatch({actionType:"PAGE_CYCLE_BY_HISTORY",windowId:e,maybeEvent:t,goBack:n.goBack})},cycleByOrder:function(e,t,n={goBack:!1}){a.Z.dispatch({actionType:"PAGE_CYCLE_BY_ORDER",windowId:e,maybeEvent:t,goBack:n.goBack})},detachPage:async function(e,t,n){const s=e instanceof A.List?e:A.List.of(e);1===s.size&&await _e(s);const i=s.first(),r=s.rest(),a=await ce(i.windowId,[],{tabId:i.id,left:t,top:n,extData:JSON.stringify({isDropped:!0})});a?.id&&r.count()&&await be(r,a.id)},discardPage:function(e){e.isInspected||f.Z.tabs.discard(e.id)},exitPictureInPicture:function(e){f.Z.scripting.executeScript({target:{tabId:e},function:()=>{document.pictureInPictureElement&&document.exitPictureInPicture()}}).catch((e=>{}))},expandSelectionNext:function(e,t=!0){a.Z.dispatch({actionType:"PAGE_SELECTION_EXPAND_NEXT",page:e,addGroup:t})},expandSelectionPrevious:function(e,t=!0){a.Z.dispatch({actionType:"PAGE_SELECTION_EXPAND_PREVIOUS",page:e,addGroup:t})},expandTabStack:async function(e){const t=b.ZP.getActiveBrowserOrPopupWindowId(),n=l.ZP.getPages(t).filter((t=>(0,Z.av)(t)===e));await Promise.all(n.map((e=>k(e.id,{group:"",tiling:""}))))},gotoParentDirectory:function(e){const{url:t}=e,n=t.lastIndexOf("/");if(-1===n)return;let s;if(n+1===t.length){const e=t.substr(0,t.length-1).lastIndexOf("/");-1!==e&&(s=t.substr(0,e+1))}else s=t.substr(0,n+1);s&&!s.endsWith("://")&&Te.openURL(s,{inSpecificPageId:e.id})},loadPromise:async function(){const e=window.vivaldiWindowId;if(void 0===e)return;const t=await async function(e,t){return new Promise((n=>{f.Z.windows.get(e,t,n)}))}(e,{populate:!0}),n=t.tabs||[],s=t.extData&&function(e){try{return JSON.parse(e)}catch(e){}}(t.extData)?.historystack||[];if(a.Z.dispatch({actionType:"CHROME_TABS_INIT",tabs:n,windowId:e,historystack:s}),!b.ZP.isSettings()&&!b.ZP.isPopup()&&!b.ZP.isIncognitoOrGuest()){const e=await l.ZP.isUrlInAnyWindowPromise(I.xy.welcome);i=e,S.Z.utilities.canShowWhatsNewPage((e=>{if(e.show){const{vivaldiVersion:e}=S.Z.utilities.getVersion(),t="W";F("https://vivaldi.com/newfeatures?hl="+(0,w.Z)()+"&version="+e+"&os="+t,{inCurrent:!1,inBackground:i})}}))}var i},minimizePage:me,moveDroppedTabs:async function(e,t,n,s,i){void 0!==s&&await Promise.all(e.map((e=>k(e.id,{group:s})))),await ge(e,n),(t?e.find((e=>e.id===parseInt(t))):e.first())&&ue(t,i),await new Promise((e=>setTimeout(e,100))),ve(e.filter((e=>e.pinned)),!0)},moveToIndex:ge,moveToWindow:be,muteAllExcept:function(e){const t=b.ZP.getActiveBrowserOrPopupWindowId();pe("selection","mute",l.ZP.getPages(t).filter((t=>-1===e.findIndex((e=>e.id===t.id)))))},newTab:async function(e,t,n){const s=(0,I.Gr)(t),i=s&&"_blank"!==s?s:l.ZP.getDefaultStartpage(),r={url:i,windowId:e,index:n,active:!0},o=await f.Z.tabs.create(r);if(void 0!==o?.id){const t=o.id;return a.Z.dispatch({actionType:"PAGE_OPEN_URL",pageId:t,windowId:e,url:i,post:void 0}),t}throw new Error("Failed to create tab")},openIncognitoWindow:function(e){ce(b.ZP.getId(),e,{incognito:!0})},openLastPage:function(){const e=b.ZP.getActiveBrowserOrPopupWindowId(),t="off"===u.ZP.get(D.kTabsStackingMode),n=l.ZP.getTabs(e,t).last();n&&ue(n.page.id,e)},activateTab:ue,activateTabByIndex:function(e){const t=b.ZP.getActiveBrowserOrPopupWindowId(),n="off"===u.ZP.get(D.kTabsStackingMode),s=l.ZP.getTabs(t,n).get(e);if(!s)return;if(!Boolean(s.pages)||!s.page.active)return void ue(s.page.id,s.page.windowId);if(s.pages.last()===s.page)return void ue(s.pages.first().id,t);const i=s.pages.findIndex((e=>e.active))+1;ue(s.pages.get(i).id,t)},openURL:F,openUrls:async function(e,t){t.inNewWindow?await Te.openBrowserWindow(t.windowId||b.ZP.getId(),e,{incognito:t.incognito}):await Promise.all(e.map(((n,s)=>t.inCurrent?Te.openURL(n,{...t,inCurrent:0===s,inBackground:0!==s}):Te.openURL(n,{...t,inBackground:t.inBackground||n!==(0,M.default)(e)}))))},openBrowserWindow:ce,openWindowNew:async function(e=l.ZP.getDefaultStartpage(),t,n="normal"){"string"==typeof e&&(e=(0,I.Gr)(e)),"string"==typeof t.tabUrl&&(t.tabUrl=(0,I.Gr)(t.tabUrl));const s={incognito:!1,focused:!0,...t},i={ext_id:C()(),windowType:n,...t.extData?JSON.parse(t.extData):null};return s.extData=JSON.stringify(i),new Promise((t=>{S.Z.windowPrivate.create(e,s,n,(e=>{let n;if(-1!==e){const t=f.Z.extension.getViews({windowId:e});t&&t.length>0&&(n=t[0])}t({windowId:e,contentWindow:n})}))}))},setOriginalContentType:function(e,t,n){a.Z.dispatch({actionType:"PAGE_SET_ORIGINAL_CONTENT_TYPE",pageId:e,windowId:t,contentType:n})},reloadPage:async function(e){const t=e instanceof A.List?e:A.List.of(e);await Promise.all(t.map((e=>f.Z.tabs.reload(e))))},removeFromTabStack:_e,setFindResults:function(e){a.Z.dispatch({actionType:h.Z.FIND_IN_PAGE_RESULT_ACTION,searchText:e.searchText,numberOfMatches:e.numberOfMatches,activeMatchOrdinal:e.activeMatchOrdinal,selectionRect:e.selectionRect,...e})},setHistoryManagerState:async function(e,t){await k(e,{historyManagerState:t})},setImageInspector:function(e,t,n){a.Z.dispatch({actionType:"PAGE_SET_IMAGE_INSPECTOR",pageId:e,windowId:t,showImageInspector:n})},setImageLoading:Ee,setIsRestored:function(e,t){a.Z.dispatch({actionType:"PAGE_SET_IS_RESTORED",extId:e,restored:t})},setMuting:pe,setOrigin:function(e,t,n){let s=L.get(e);s&&clearTimeout(s.id),n&&n.length>0?(s={},s.url=n,s.id=setTimeout((()=>{s=L.get(e),a.Z.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,windowId:t,url:s.url})}),1e3),L=L.set(e,s)):(s&&(L=L.delete(e)),a.Z.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,windowId:t,url:""}))},setPageInspected:function(e,t,n){a.Z.dispatch({actionType:"PAGE_SET_IS_INSPECTED",pageId:e,windowId:t,inspected:n})},setPinned:ve,setReaderState:async function(e,t){await k(e,{readerMode:t})},setSelection:function(e,t=!1,n=!0,s=!1){a.Z.dispatch({actionType:"PAGE_SELECTION_SET",page:e,multiSelect:t,addGroup:n,excludeActive:s})},setThumbnail:async function(e,t){const n=l.ZP.getPageById(e);n&&(t?await k(e,{urlForThumbnail:n.url,thumbnail:t}):await k(e,{urlForThumbnail:void 0,thumbnail:void 0}))},setTitle:function(e,t,n){a.Z.dispatch({actionType:"PAGE_SET_TITLE",pageId:e,windowId:t,title:n})},showHomepage:async function(e){if(e.inCurrent){const e=l.ZP.getActivePage();e&&(0,x.a)(e.id,!1)}const t=u.ZP.get(D.kHomepage),n=l.ZP.getDefaultStartpage(),s=t===T.QG&&n===T.P1?n:t;await F(s,e)},stepActivePage:async function(e,t,n){await Ne(l.ZP.unsafeGetActivePage(n),e,t,n)},stepPage:Ne,tileLastActive:async function(e="row",t){const n=(0,A.List)([l.ZP.unsafeGetActivePage(t),l.ZP.getPageById((0,l.xx)(t))].filter(Boolean));n.count()>1&&(n.forEach((e=>{const n=(0,Z.jA)(e);n&&we(n,t)})),await Ce(n,e))},tilePages:Ce,tileTabStack:async function(e,t,n){const s=l.ZP.getGroup(e,t),i=n||(s.count()<4?"row":"grid");await Ce(s,i,"group")},toggleImageLoading:async function(e=l.ZP.unsafeGetActivePage()){if(e){const t=e.get("imageLoading");"always"===t?await Ee("never"):"never"===t?await Ee("cache"):await Ee("always")}},toggleMuting:async function(e){const t=e.filter((e=>!e.getIn(["extData","vivaldi_tab_muted"]))),n=e.filter((e=>e.getIn(["extData","vivaldi_tab_muted"])));await pe("selection","mute",t),await pe("selection","unmute",n)},toggleRelatedSelection:function(e){a.Z.dispatch({actionType:"PAGE_SELECTION_TOGGLE_RELATED",page:e})},toggleSelectedPagesPinned:async function(e){const t=l.ZP.isSelecting(e)?l.ZP.getSelection(e).map((t=>l.ZP.getPages(e).find((e=>e.id===t)))).filter(Boolean).toList():A.List.of(l.ZP.unsafeGetActivePage(e));t.size&&await Promise.all(t.map((async e=>{if(e)return f.Z.tabs.update(e.id,{pinned:!e.pinned})})))},treeMove:async function({pages:e,groups:t,targetPage:n,after:s,area:i,group:r="",windowId:a}){await Promise.all(e.map((async e=>{switch(i){case"pinned":return await k(e.id,{group:r,tiling:""}),void await f.Z.tabs.update(e.id,{pinned:!0});case"stack":{const t=l.ZP.getPages(a).find((e=>(0,Z.av)(e)===r&&Boolean(e.getIn(["extData","tiling"]))))?.getIn(["extData","tiling"]).toJS()||"";return await k(e.id,{group:r,tiling:t}),void await f.Z.tabs.update(e.id,{pinned:!1})}case"regular":{const n=(0,Z.av)(e),s=t.includes(n)&&n||"",i=e.getIn(["extData","tiling"]);return await k(e.id,{group:s,tiling:s&&i&&i.toJS()}),void await f.Z.tabs.update(e.id,{pinned:!1})}}})));let o=(n?n.index:0)+(s?1:0);await Promise.all(e.map((async(e,t)=>{0===t?o>e.index&&o--:t>0&&o<e.index&&o++,await f.Z.tabs.move(e.id,{windowId:a,index:o})})))},untilePages:ye,untileTileGroup:we},ke=Te},77458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var s=n(97491),i=n(6478),r=n(21622),a=n(27673),o=n(30801),l=n(18965),c=n(54471),u=n(2121),m=n(74686),d=n(30074),h=n(34155);function p(){const{vivaldiVersion:e}=m.Z.utilities.getVersion();l.Z.upgrade(e),e&&e!==r.ZP.get(d.kPanelsVersion)&&function(e){const t=r.ZP.get(d.kPanelsList),n=[...r.ZP.get(d.kPanelsList)],s=r.ZP.getDefault(d.kPanelsList);t.forEach((e=>{let t=s.findIndex((t=>t.id===e.id));-1===t&&(t=n.findIndex((t=>t.id===e.id)),-1===t?console.error("Failed to remove old panel",e.id):n.splice(t,1))})),s.forEach(((e,t)=>{if(-1===n.findIndex((t=>t.id===e.id))){const s=t>n.length?n.length:t;n.splice(s,0,e)}})),i.Z.set(d.kPanelsVersion,e),i.Z.set(d.kPanelsList,n)}(e)}const g=new class{async loadPromise(){const{vivaldiWindowId:e}=window,t=await u.Z.windows.get(e),n=t.extData?JSON.parse(t.extData):{},s=r.ZP.get(d.kPanelsState),i={showButtons:s.barVisible,showContent:s.panelVisible,width:s.width,selectedPanel:s.selectedPanel,isMail:!c.ZP.isIncognitoOrGuest(e)&&!u.Z.extension.getViews().some((e=>e.isMailWindow)),regPanelList:r.ZP.get(d.kPanelsList),webPanelItems:r.ZP.get(d.kPanelsWebItems)};n.hasOwnProperty("SHOW_PANEL_CONTENT")&&(i.showContent=n.SHOW_PANEL_CONTENT),n.hasOwnProperty("SHOW_PANEL")&&(i.showButtons=n.SHOW_PANEL),n.hasOwnProperty("PANEL_WIDTH")&&(i.width=n.PANEL_WIDTH),n.hasOwnProperty("SELECTED_PANEL")&&(i.selectedPanel=n.SELECTED_PANEL),r.ZP.get(d.kMailIsTurnedOff)&&["calendar","contacts","feeds","mail"].includes(i.selectedPanel)&&(i.selectedPanel=""),p(),r.ZP.addListener(d.kPanelsList,g.setPanels),r.ZP.addListener(d.kPanelsWebItems,g.setPanels),r.ZP.addListener(d.kMailIsTurnedOff,((e,t,n)=>{g.setPanels(null,r.ZP.get(d.kPanelsList),d.kPanelsList)})),a.Z.dispatch({actionType:"PANEL_INIT",state:i})}setFocus(){a.Z.dispatch({actionType:o.Z.PANEL_SET_FOCUS})}removeFocus(){a.Z.dispatch({actionType:"PANEL_REMOVE_FOCUS"})}toggleFloating(){a.Z.dispatch({actionType:o.Z.PANEL_TOGGLE_FLOATING})}showNextPanel(e){a.Z.dispatch({actionType:"PANEL_SHOW_NEXT",direction:e})}setContentVisible(e){a.Z.dispatch({actionType:o.Z.PANEL_SET_CONTENT_VISIBLE,visible:e})}togglePanel(){a.Z.dispatch({actionType:"PANEL_TOGGLE_PANEL"})}toggleContent(e){a.Z.dispatch({actionType:o.Z.PANEL_TOGGLE_CONTENT,panel:e})}move(e,t,n){a.Z.dispatch({actionType:o.Z.PANEL_MOVE,from:e,to:t,position:n})}showContent(e,t={selectId:"",reason:""}){const{setFocus:n=!1,selectId:s,reason:i}=t;a.Z.dispatch({actionType:"PANEL_SHOW_CONTENT",panel:e,setFocus:n,selectId:s,reason:i})}setAvailable(e,t){a.Z.dispatch({actionType:o.Z.PANEL_SET_AVAILABLE,panel:e,available:t})}setWidth(e,t){a.Z.dispatch({actionType:o.Z.PANEL_SET_WIDTH,panel:e,width:t})}closePanel(){a.Z.dispatch({actionType:"PANEL_TOGGLE_CURRENT"})}setSeparateFloating(e){const t=r.ZP.get(d.kPanelsWebItems),n=r.ZP.get(d.kPanelsList),s=t.findIndex((t=>t.id===e));if(-1!==s){const e={...t[s]};return e.floating=!e.floating,t[s]=e,void i.Z.set(d.kPanelsWebItems,t)}const a=n.findIndex((t=>t.id===e));if(-1!==a){const e={...n[a]};e.floating=!e.floating,n[a]=e,i.Z.set(d.kPanelsList,n)}}setPanelResizable(e,t){a.Z.dispatch({actionType:o.Z.PANEL_SET_RESIZABLE,panel:e,resizable:t})}setPanels(e,t,n){h.nextTick((()=>a.Z.dispatch({actionType:o.Z.PANEL_SET_PANELS,key:n,value:t,oldValue:e})))}setMailWindow(){a.Z.dispatch({actionType:o.Z.PANEL_SET_MAIL_WINDOW})}translateWithPanel(e,t){s.ZP.getIsPanelVisible("translate")||this.toggleContent("translate"),m.Z.utilities.broadcastMessage({translate:{winId:c.ZP.getId(),lang:e,text:t}})}clearTransitionState(e){a.Z.dispatch({actionType:o.Z.PANEL_CLEAR_TRANSITION_STATE,panel:e})}},b=g},60253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(88279),i=n(91662),r=n(27673),a=n(37026);const o={load:async function(){const e=new Map,t=Date.now();i.ZP.getReloadingPages().forEach((n=>{const s=n.getIn(["extData","interval"]),i=n.getIn(["extData","ext_id"]),r={id:i,periodInMinutes:s,scheduledTime:(0,a.m)({periodInMinutes:s,scheduledTime:t}),from:"tab"};e.set(i,r)})),r.Z.dispatch({actionType:"PERIODIC_RELOAD_ALL",alarms:e})},createOrDestroyAlarm:async function(e){const{alarm:t,id:n,interval:s,from:i}=e;t?.periodInMinutes===s?await this.destroyPeriodicAlarm(n):await this.createPeriodicReloadAlarm({id:n,interval:s,from:i})},createPeriodicReloadAlarm:async function(e){const{id:t,from:n,interval:o}=e;if(!o)return;const l={id:t,scheduledTime:(0,a.m)({periodInMinutes:o,scheduledTime:Date.now()}),periodInMinutes:o,from:n},c=i.ZP.getPageByReloadId(t);c&&await s.Z.changePeriodicReloadForPages([c.id],o),r.Z.dispatch({actionType:"PERIODIC_RELOAD_CREATE",alarm:{alarmId:t,alarm:l}})},destroyAllPeriodicAlarms:async function(){const e=i.ZP.getReloadingPages().map((e=>e.id)).toArray();await s.Z.changePeriodicReloadForPages(e,0),r.Z.dispatch({actionType:"PERIODIC_RELOAD_DESTROY_ALL"})},destroyPeriodicAlarm:async function(e){const t=i.ZP.getPageByReloadId(e);t&&await s.Z.changePeriodicReloadForPages([t.id],0),r.Z.dispatch({actionType:"PERIODIC_RELOAD_DESTROY",alarmId:e})},updateRunningAlarm:function(e,t){const n={alarmId:e,alarm:t};r.Z.dispatch({actionType:"PERIODIC_RELOAD_UPDATE",alarm:n})}}},72191:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(88279),i=n(91662),r=n(27673),a=n(82487),o=n(2121),l=n(68079),c=n.n(l);const u=new class{setReaderModeStyle(){r.Z.dispatch({actionType:"READERMODE_SET_STYLE"})}resetReaderModeStyle(){r.Z.dispatch({actionType:"READERMODE_RESET"})}async toggleReaderMode(e=i.ZP.unsafeGetActivePage()){c()(e.url)&&(e.extData.get("readerMode")?await s.Z.setReaderState(e.id,!1):await s.Z.setReaderState(e.id,!0),a.Z.doAction("focusWebView"))}};o.Z.runtime.onMessage.addListener((function(e){if(e&&e.type)switch(e.type){case"SET_RM":if(!e.payload||"boolean"!=typeof e.payload.isReaderable||"number"!=typeof e.payload.pageId)return;const t=e.payload.pageId,n=e.payload.isReaderable;o.Z.tabs.get(t,(e=>{r.Z.dispatch({actionType:"READERMODE",supportsReaderMode:n,pageId:t,windowId:e.windowId})}));break;case"SET_RM_STYLE":u.setReaderModeStyle()}}));const m=u},37711:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(91662),i=n(21622),r=n(27673),a=n(30801),o=n(79290),l=n(30074),c=n(34155);const{SEARCH_FIELD_SET_STATE:u,SEARCH_FIELD_ADD_TYPED_HISTORY:m,SEARCH_FIELD_DELETE_TYPED_HISTORY:d,SEARCH_FIELD_INIT_TYPED_HISTORY:h,SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:p,SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:g}=a.Z,b=new class{setState(e){const t=s.ZP.unsafeGetActivePage();r.Z.dispatch({actionType:u,state:e,page:t})}addTypedSearchHistory(e){const t=i.ZP.get(l.kAddressBarSearchTypedHistoryEnabled),n=!1!==s.ZP.unsafeGetActivePage().get("incognito");t&&!n&&c.nextTick((()=>{r.Z.dispatch({actionType:m,query:e})}))}deleteTypedSearchHistory(e){r.Z.dispatch({actionType:d,query:e})}load(){const e=o.Z.getSync("TYPED_SEARCH_HISTORY");r.Z.dispatch({actionType:h,typedHistory:e})}};i.ZP.addListener(l.kHistoryDaysToKeepVisits,((e,t)=>{0===t?r.Z.dispatch({actionType:p}):0===e&&t>0&&r.Z.dispatch({actionType:g})}));const N=b},92144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(27673),i=n(2121);let r;const a=new class{setStatus(e,t){clearTimeout(r),s.Z.dispatch({actionType:"STATUS_SET_STATUS",status:e}),t&&(r=setTimeout(a.clearStatus,t))}clearStatus(){clearTimeout(r),s.Z.dispatch({actionType:"STATUS_SET_STATUS",status:""})}setPersistentStatus(e,t){s.Z.dispatch({actionType:"STATUS_SET_PERSISTENT_STATUS",key:e,status:t})}clearPersistentStatus(e){s.Z.dispatch({actionType:"STATUS_CLEAR_PERSISTENT_STATUS",key:e})}};i.Z.runtime.onMessage.addListener(((e,t)=>{if(i.Z.runtime.id!==t.id||"object"!=typeof e||null==e)return;const{action:n,status:s}=e;"setStatus"===n&&"string"==typeof s&&a.setStatus(s)}));const o=a},20748:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(43179),i=n(16910),r=n(91662),a=n(21622),o=n(27673),l=n(30801),c=n(63057),u=n(30074),m=n(65531);const d=new class{newBackgroundTab(e,t){o.Z.dispatch({actionType:l.Z.TAB_NEW_BACKGROUND_TAB,url:e,addOpenerTabId:t})}switchTabBackBySetting(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_BACK_SETTING,maybeEvent:t})}switchTabForwardBySetting(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_FORWARD_SETTING,maybeEvent:t})}switchTabBackByHistory(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_BACK_HISTORY,maybeEvent:t})}switchTabForwardByHistory(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_FORWARD_HISTORY,maybeEvent:t})}switchTabBackByOrder(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_BACK_ORDER,maybeEvent:t})}switchTabForwardByOrder(e,t){o.Z.dispatch({actionType:l.Z.TAB_SWITCH_FORWARD_ORDER,maybeEvent:t})}closeAllButActiveTab(){o.Z.dispatch({actionType:l.Z.TAB_CLOSE_ALL_BUT_ACTIVE_TAB})}stackUntile(){o.Z.dispatch({actionType:l.Z.TAB_STACK_UNTILE})}stackCreate(){o.Z.dispatch({actionType:l.Z.TAB_STACK_CREATE})}stackDissolve(){o.Z.dispatch({actionType:l.Z.TAB_STACK_DISSOLVE})}stackRemove(){o.Z.dispatch({actionType:l.Z.TAB_STACK_REMOVE})}stackTileGrid(){o.Z.dispatch({actionType:l.Z.TAB_STACK_TILE_GRID})}stackTileHorizontal(){o.Z.dispatch({actionType:l.Z.TAB_STACK_TILE_HORIZONTAL})}stackTileVertical(){o.Z.dispatch({actionType:l.Z.TAB_STACK_TILE_VERTICAL})}viewPageSource(){o.Z.dispatch({actionType:l.Z.TAB_VIEW_PAGE_SOURCE})}toggleTabThumbnail(){o.Z.dispatch({actionType:l.Z.TAB_TOGGLE_THUMBNAIL})}async capturePage(e){const t=r.ZP.unsafeGetActivePage(),n=t?t.id:0;if(n){const t=a.ZP.get(u.kWebpagesCaptureCompressionFormat),{success:i}=await s.Z.captureFullpage(n,t,e);i&&"clipboard"===e&&(0,m.c)({title:(0,c.Z)("Page Captured"),body:(0,c.Z)("Image stored in the clipboard.")})}}async captureArea(e){i.Z.enableCapture();try{await s.Z.captureAreaCommand(e)}catch(e){}}}},25342:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var s=n(65792),i=n.n(s),r=(n(45447),n(6478)),a=n(21622),o=n(14705),l=n(27673),c=n(54471),u=n(63057),m=n(74686),d=n(42151),h=n(65741),p=n(30074);const g=[p.kSystemAccentColor,p.kSystemDesktopThemeColor,p.kSystemHasDesktopWallpaperProtocol,p.kThemePrivateWindow,p.kThemeScheduleEnabled,p.kThemeScheduleOS,p.kThemeScheduleTimeline,p.kThemeUseAnimation,p.kThemesCurrent,p.kThemesPreview,p.kThemesCurrentPrivate,p.kThemesSystem,p.kThemesUser];let b;function N(e,t){i().valid(t)?l.Z.dispatch({actionType:"THEME_SET_META",tabId:e,color:i()(t)}):console.warn("Invalid meta theme color supplied for tabId",t,e)}function f(e){return o.Z.getPreview()?.id||_(e)}function _(e){if(e&&c.ZP.isIncognito(e))return a.ZP.get(p.kThemesCurrentPrivate);switch(a.ZP.get(p.kThemeScheduleEnabled)){case"timeline":return o.Z.getTimerByDate(new Date,"current").themeId;case"system":return a.ZP.get(p.kThemeScheduleOS)[a.ZP.get(p.kSystemDesktopThemeColor)];default:return a.ZP.get(p.kThemesCurrent)}}function v(e){switch(a.ZP.get(p.kThemeScheduleEnabled)){case"timeline":const t=(0,d.Z)(a.ZP.get(p.kThemeScheduleTimeline)),n=o.Z.getTimerByDate(new Date,"current"),s=t.findIndex((e=>e.id===n.id));t[s].themeId=e,r.Z.set(p.kThemeScheduleTimeline,t);break;case"system":const i=(0,d.Z)(a.ZP.get(p.kThemeScheduleOS));i[a.ZP.get(p.kSystemDesktopThemeColor)]=e,r.Z.set(p.kThemeScheduleOS,i);break;default:r.Z.set(p.kThemesCurrent,e)}y()}function E(){const e=new Date,t=o.Z.getTimerByDate(e,"next");if(w(),t&&"timeline"===a.ZP.get(p.kThemeScheduleEnabled)){const n=60*(t.minutes+60*t.hours-60*e.getHours()-e.getMinutes())-e.getSeconds();b=setTimeout((async()=>{const e=o.Z.getThemeWithFallback(t.themeId),n=await o.Z.getImageVars(e.backgroundImage,e.backgroundPosition);l.Z.dispatch({actionType:"THEME_SET",style:n}),E()}),1e3*n)}}async function C(){const e=a.ZP.get(p.kThemeScheduleEnabled);if(["system","timeline"].includes(e)){const e=await new Promise((e=>m.Z.windowPrivate.getCurrentId(e))),t=o.Z.getThemeWithFallback(f(e)),{backgroundImage:n,backgroundPosition:s}=t,i=await o.Z.getImageVars(n,s);l.Z.dispatch({actionType:"THEME_SET",style:i})}"timeline"===e?E():w()}function w(){b&&clearTimeout(b)}function y(){r.Z.set(p.kThemesPreview,[])}const S={getCurrentId:f,getCurrentIdWithoutPreview:_,createTheme:function(e){const t=(0,d.Z)(a.ZP.get(p.kThemesUser)),n=(0,d.Z)(o.Z.getThemeWithFallback(e));return n.id=m.Z.utilities.generateGUID(),n.name=(0,u.Z)("$1 copy",[n.name]),t.push(n),r.Z.set(p.kThemesUser,t),v(n.id),n.id},deleteTheme:function(e){const t=(0,d.Z)(a.ZP.get(p.kThemesUser)),n=(0,d.Z)(a.ZP.get(p.kThemeScheduleOS)),s=(0,d.Z)(a.ZP.get(p.kThemeScheduleTimeline)),i=t.findIndex((t=>t.id===e));let o;if(-1!==i){if(t[i+1])o=t[i+1].id;else if(t[i-1])o=t[i-1].id;else{const e=a.ZP.get(p.kThemesSystem);o=e[e.length-1].id}if(a.ZP.get(p.kThemesCurrent)===e&&r.Z.set(p.kThemesCurrent,o),[n.light,n.dark].includes(e)&&(n.dark===e&&(n.dark=o),n.light===e&&(n.light=o),r.Z.set(p.kThemeScheduleOS,n)),s.some((t=>t.themeId===e))){for(let t=0;t<s.length;t++){const n=s[t];n.themeId===e&&(n.themeId=o)}r.Z.set(p.kThemeScheduleTimeline,s)}r.Z.set(p.kThemesUser,t.filter((t=>t.id!==e)))}else console.warn(`Theme ${e} is not a user theme and cannot be deleted.`)},exportTheme:async function(e,t){await m.Z.themePrivate.export({...e,engineVersion:1},{windowId:t,dialogTitle:(0,u.Z)("Select Export Location")})},installTheme:function(){const e=(0,d.Z)(a.ZP.get(p.kThemesPreview)[0]);if(e){const t=(0,d.Z)(a.ZP.get(p.kThemesUser));t.push(e),r.Z.set(p.kThemesUser,t),v(e.id),y()}},updateTheme:function(){const e=a.ZP.get(p.kThemesPreview)[0];if(e){const t=(0,d.Z)(a.ZP.get(p.kThemesUser)),n=t.findIndex((t=>t.id===e.id));t[n]=e,r.Z.set(p.kThemesUser,t),v(e.id),y()}},clearThemePreview:y,loadFavicon:function(e,t){const n=new Image,s=e.url;n.crossOrigin="Anonymous",n.onload=()=>{n.height=16,n.width=16;const s=o.Z.getPalette(n).map((e=>i()(e)));l.Z.dispatch({actionType:"THEME_SET_PAGE_PALETTE",favIconUrl:e.favIconUrl,hostname:t,windowId:e.windowId,colors:s})},n.onerror=()=>{l.Z.dispatch({actionType:"THEME_SET_FAILED_FAVICON_URL",url:s})},n.src=e.favIconUrl},loadPromise:async function(){a.ZP.get(p.kThemesPreview)?.length>0&&r.Z.set(p.kThemesPreview,[]);for(const[e]of c.ZP.getState()){const t=o.Z.getThemeWithFallback(f(e)),{backgroundImage:n,backgroundPosition:s}=t,i=await o.Z.getImageVars(n,s);l.Z.dispatch({actionType:"THEME_INIT",style:i,windowId:e})}E(),a.ZP.addListener(g,((e,t,n)=>async function(e,t,n,s){if((0,h.default)(n,s))return;const i=o.Z.getThemeWithFallback(f(e.vivaldiWindowId)),r=(0,d.Z)(await o.Z.getImageVars(i.backgroundImage,i.backgroundPosition)),c=o.Z.getThemeWithFallback(a.ZP.get(p.kThemesCurrentPrivate)),u=(0,d.Z)(await o.Z.getImageVars(c.backgroundImage,c.backgroundPosition));switch(t){case p.kThemeScheduleEnabled:case p.kThemeScheduleTimeline:l.Z.dispatch({actionType:"THEME_SET",style:r}),"timeline"===a.ZP.get(p.kThemeScheduleEnabled)?E():w();break;case p.kThemeScheduleOS:case p.kThemesCurrent:case p.kSystemHasDesktopWallpaperProtocol:case p.kSystemDesktopThemeColor:l.Z.dispatch({actionType:"THEME_SET",style:r});break;case p.kThemesCurrentPrivate:l.Z.dispatch({actionType:"THEME_SET_PRIVATE",style:u});break;case p.kThemesSystem:case p.kThemesUser:case p.kSystemAccentColor:case p.kThemeUseAnimation:case p.kThemesPreview:l.Z.dispatch({actionType:"THEME_SET",style:r}),l.Z.dispatch({actionType:"THEME_SET_PRIVATE",style:u})}}(window,n,t,e))),m.Z.tabsPrivate.onThemeColorChanged.addListener(N),m.Z.utilities.onSuspend.addListener(w),m.Z.utilities.onResume.addListener(C)},revertSystemTheme:function(e){const t=(0,d.Z)(a.ZP.get(p.kThemesSystem)),n=t.findIndex((t=>t.id===e)),s=a.ZP.getDefault(p.kThemesSystem),i=(0,d.Z)(s.find((t=>t.id===e)));void 0!==n&&void 0!==i?(t[n]=i,r.Z.set(p.kThemesSystem,t)):console.warn(e,"is not a valid system theme id")},setNextTheme:function(){const e=a.ZP.get(p.kThemesSystem),t=a.ZP.get(p.kThemesUser),n=(0,d.Z)(e.concat(t));let s;switch(a.ZP.get(p.kThemeScheduleEnabled)){case"timeline":s=o.Z.getTimerByDate(new Date,"current").themeId;break;case"system":const e=a.ZP.get(p.kThemeScheduleOS),t=a.ZP.get(p.kSystemDesktopThemeColor);s=e[t];break;default:s=a.ZP.get(p.kThemesCurrent)}const i=n.findIndex((e=>e.id===s));v(n[i+1]?n[i+1].id:n[0].id)},setPreviousTheme:function(){const e=a.ZP.get(p.kThemesSystem),t=a.ZP.get(p.kThemesUser),n=(0,d.Z)(e.concat(t));let s;switch(a.ZP.get(p.kThemeScheduleEnabled)){case"timeline":s=o.Z.getTimerByDate(new Date,"current").themeId;break;case"system":const e=a.ZP.get(p.kThemeScheduleOS),t=a.ZP.get(p.kSystemDesktopThemeColor);s=e[t];break;default:s=a.ZP.get(p.kThemesCurrent)}const i=n.findIndex((e=>e.id===s));v(n[i-1]?n[i-1].id:n[n.length-1].id)},setTheme:v,setThemeBackgroundImageFromUrl:function(e,t){const n=_(e);t.startsWith("file:")?m.Z.utilities.storeImage({themeId:n,url:t}):fetch(t).then((e=>e.blob())).then((e=>{e.arrayBuffer().then((t=>{m.Z.utilities.storeImage({themeId:n,mimeType:e.type,data:t})}))}))},setThemeByNameWithFallback:function(e){const t=a.ZP.get(p.kThemesSystem),n=a.ZP.get(p.kThemesUser),s=t.concat(n).find((t=>t?.name===e))?.id;s?v(s):console.warn((0,u.Z)("Unable to find a theme named $1",[e]))}}},55570:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(27673);const i=(e,t)=>t?setTimeout(e,t):e();let r;const a=new class{showTooltip(e,t=0){clearTimeout(r),r=i((()=>s.Z.dispatch({actionType:"TOOLTIP_SET",id:e})),t)}hideTooltip(e=0){clearTimeout(r),r=i((()=>s.Z.dispatch({actionType:"TOOLTIP_SET",id:null})),e)}}},78174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(72450),i=n(91662),r=n(77458),a=n(21622),o=n(7997),l=n(14705),c=n(40061),u=n(27673),m=n(54471),d=n(2121),h=n(95546),p=n(74686),g=n(30074);const b={translateSelection(e,t){s.Z.detectTextLanguage(e,t).then((n=>{if(a.ZP.get(g.kPanelsTranslateRedirect)){if(!n){n=c.Z.getPageState(e).pageLanguage||""}r.Z.translateWithPanel(n,t)}else{let i=(0,h.Z)();i=i.substring(0,2);const r=s.Z.getTranslationCode(i);d.Z.tabs.sendMessage(e,{action:"translateSelection",tabId:e,text:t,textLanguage:n,destLanguage:s.Z.getTranslationCode(r),allLanguages:s.Z.getTranslationLocales()},(()=>{}))}}))},async sendInitDataToInjectedScript(e,t){let n=(0,h.Z)();n=n.substring(0,2);const r=s.Z.getTranslationCode(n),c=await p.Z.utilities.getCommandLineValue("translate-server-url");c&&console.warn("Translate server overridden: "+c);const u=i.ZP.getPageById(e)?.windowId,m=u?o.Z.getState().windowStyles.get(u):l.Z.getFallbackStyle();d.Z.tabs.sendMessage(e,{action:"initData",tabId:e,pageLanguage:s.Z.getTranslationCode(t),destLanguage:s.Z.getTranslationCode(r),allLanguages:s.Z.getTranslationLocales(),buttonEnabled:a.ZP.get(g.kWebpagesTranslateSelectionButtonEnabled),resultInPanel:a.ZP.get(g.kPanelsTranslateRedirect),styles:m,overrideServer:c},(()=>{}))},sendTextLanguageToInjectedScript(e,t){d.Z.tabs.sendMessage(e,{action:"textLanguage",tabId:e,textLanguage:t,textLanguageName:s.Z.getHumanReadableLanguageFromCode(t)},(()=>{}))},init(){p.Z.tabsPrivate.onShowTranslationUI.addListener(((e,t,n,s)=>{u.Z.dispatch({actionType:"VIVALDI_TABS_TRANSLATION_PROGRESS",tabId:e,translateStep:t,error:n,autoTranslate:s})})),b.dispatchLanguageChanges(),a.ZP.addListener(g.kVivaldiTranslateLanguageList,(()=>{b.dispatchLanguageChanges()})),d.Z.runtime.onMessage.addListener((function(e,t,n){if("translateSelectionReady"===e.action){const t=e.tabId,s=c.Z.getPageState(t);return b.sendInitDataToInjectedScript(t,s.pageLanguage?s.pageLanguage:""),n(),!0}if("translateDetermineLanguage"===e.action){const t=e.tabId;s.Z.detectTextLanguage(t,e.text).then((e=>{b.sendTextLanguageToInjectedScript(t,e)}))}else"translateResult"===e.action?m.ZP.isActive()&&p.Z.translateHistory.add(e.item,0):"translateInPanel"===e.action&&m.ZP.isActive()&&r.Z.translateWithPanel(e.lang,e.text);return!1}))},dispatchLanguageChanges(){const e=a.ZP.get(g.kVivaldiTranslateLanguageList);e.length>0&&(s.Z.invalidateTranslationLocales(),u.Z.dispatch({actionType:"VIVALDI_SET_SERVER_LANGUAGES",languages:e}))},setDeterminedLanguage(e,t){u.Z.dispatch({actionType:"VIVALDI_TABS_LANGUAGE_DETERMINED",tabId:e,pageLanguage:t}),b.sendInitDataToInjectedScript(e,t)},setPageTranslated(e,t){u.Z.dispatch({actionType:"VIVALDI_TABS_PAGE_TRANSLATED",tabId:e,message:t})},revertTranslation(e){u.Z.dispatch({actionType:"VIVALDI_TABS_PAGE_TRANSLATED_REVERT",tabId:e})},resetTranslationParameters(e){u.Z.dispatch({actionType:"PAGE_RESET_TRANSLATION_PARAMETERS",tabId:e})},async translatePage(e){let t=(0,h.Z)();t=t.substring(0,2);const n=s.Z.getTranslationCode(t),i=c.Z.getPageState(e);n&&i&&await p.Z.tabsPrivate.translatePage(e,i.pageLanguage?i.pageLanguage:"auto",n)}},N=b},37816:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(88279),i=n(88652),r=n(27673),a=n(2121),o=n(14919),l=n(74686);const c=new class{emptyTrash(){l.Z.utilities.clearAllRecentlyClosedSessions()}undeleteTab(e){return new Promise(((t,n)=>{const i=JSON.parse(e.extData||"{}").ext_id;s.Z.setIsRestored(i,!0),a.Z.sessions.restore(e.sessionId,(s=>{a.Z.runtime.lastError&&(console.warn("Error restoring tab: ",e,a.Z.runtime.lastError),n()),t()}))}))}async undeletePreviousTab(){const e=i.Z.getTrash().find((e=>e.tab));e?.tab&&await c.undeleteTab(e.tab)}undeleteWindow(e){a.Z.sessions.restore(e.sessionId,(t=>{a.Z.runtime.lastError&&console.warn("Error restoring page: ",e,a.Z.runtime.lastError.message)}))}loadPromise(){return new Promise(((e,t)=>a.Z.sessions.getRecentlyClosed((t=>{a.Z.windows.getAll({},(n=>{const s=t.filter((e=>{if(e.tab)return!0;if(!e.window)return!1;let t=!0;const s=(0,o.Z)(e.window.extData);for(let e=0;e<n.length;e++){if(t=(0,o.Z)(n[e].extData).ext_id!==s.ext_id,!t)break}return t}));r.Z.dispatch({actionType:"CHROME_SET_SESSION",session:s}),e()}))}))))}};a.Z.sessions.onChanged.addListener(c.loadPromise);const u=c},32135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var s=n(88279),i=n(21622),r=n(82535),a=n(37711),o=n(88047),l=n(35767),c=n(27673),u=n(79290),m=n(54471),d=n(2121);const h=function(e){const t=e.replace(/^.*?\:\/\//,"");return!!t.includes('"')&&(!t.includes("/")||t.indexOf('"')<t.indexOf("/"))};var p=n(74686),g=n(7509),b=n(14854),N=n(30074),f=n(34155);const _=[];async function v({url:e,options:t}){const{addTypedSearchHistory:n,enableSearch:i,allowOverride:r,useSearchEngine:a,...o}=t;await s.Z.openURL(e.replace(/ /g,"%20"),{inCurrent:!t.hasOwnProperty("inBackground"),...o})}function E(e,t,n,s){s?a.Z.addTypedSearchHistory(t):_.push({url:e,keywordId:n,searchTerms:t})}function C({url:e}){if(f.nextTick((()=>{c.Z.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"})})),void 0===e)return;const t=_.findIndex((t=>t.url===e));if(-1!==t){const n=_.splice(t,1);p.Z.historyPrivate.setKeywordSearchTermsForURL(e,n[0].keywordId,n[0].searchTerms)}}function w(e,t){return e.replace(/%s/g,encodeURIComponent(t).replace("'","%27")).replace(/%S/g,t)}function y(e,t={}){const n=e,s=t.addTypedSearchHistory,i=t.windowId?t.windowId:m.ZP.getId();if(t.useSearchEngine){const e=t.useSearchEngine.historyId,i=w(t.useSearchEngine.url,n);return E(i,n,e,s),{url:i,options:{...t}}}const a=r.Z.getByQuery(n);if(a){const e=n.substr(a.keyword.length+1),i=w(a.url,e);return E(i,e,a.historyId,s),{url:i,options:{...t,post:a.post,transition:o.Z.KEYWORD}}}const l=r.Z.getDefault(m.ZP.isIncognito(i));if(l){const e=w(l.url,n);return E(e,n,l.historyId,s),{url:e,options:{...t,post:l.post,transition:o.Z.GENERATED}}}return{url:e,options:{...t}}}async function S(e,t){if(function(e){const t=e.split(" ");return t.length>=2&&r.Z.hasKeyword(t[0])}(e))return Promise.resolve(y(e,t));const n=e.trimEnd().replace(/^https:\/(?!\/)/i,"https://").replace(/^https:\/{3,}/i,"https://").replace(/^http:\/(?!\/)/i,"http://").replace(/^http:\/{3,}/i,"http://"),{urlValid:s,isBrowserUrl:i,schemeParsed:a,normalizedUrl:o}=p.Z.utilities.isUrlValid(n);if((0,b.A)(n)){const e=(0,g.q9)(n);return Promise.resolve({url:e,options:t})}const l=s&&i&&("http"===a||"https"===a)||""===a||!o,c=/\s/.test(n),u=c&&/^(\w{1,}\:(\/\/)?)?(\w{1,}(\.\w{1,})?(:\d{1,5})?[/?#])/.test(n),m=/\.(.{2,})(\/)/.test(n.split(" ")[0]),d=/^([a-zA-Z0-9\-\._~!$&'()\*+,;=%]*(:[a-zA-Z0-9\-\._~!$&'()\*+,;=%]*)?)?@\S*/.test(n),N=/^[^/^ ]{1,}:(\/\/)?[^/^ ]{1,}(\/|\?|#)/.test(n);let f;function _(){return f||(f=p.Z.utilities.canOpenUrlExternally(n)),f}const v=function(e){if(!e.includes(":"))return!1;if(e.includes(" ")&&e.indexOf(" ")<e.indexOf(":"))return!1;try{const t=parseInt(e.split(":")[1].split("/")[0]);return t>=0&&t<=65535}catch(e){return!1}}(n);if(t.enableSearch&&!N&&!d&&!m&&!v&&(l&&c&&!u||""!==a&&!i&&!await _())){const{url:e,options:s}=y(n,t);return Promise.resolve({url:e,options:s})}if(s&&(i||await _()))return Promise.resolve({url:n,options:t});const E=n.startsWith("?");if(E||(0,g.HZ)(n)||t.enableSearch&&h(n)){const{url:e,options:s}=y(E?n.substr(1):n,t);return Promise.resolve({url:e,options:s})}const C=(0,g.q9)(n),w=/[a-z]+\/$/.test(n),S=/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(n),T=p.Z.utilities.getUrlFragments(C),k=Boolean(T.tld);if(t.enableSearch&&!S&&!k&&!w){const{url:e,options:s}=y(n,t);return Promise.resolve({url:e,options:s})}try{return new URL(C),Promise.resolve({url:C,options:t})}catch(e){if(t.enableSearch){const{url:e,options:s}=y(n,t);return Promise.resolve({url:e,options:s})}return Promise.resolve({url:"vivaldi://network-error/-300",options:t})}}function T(){c.Z.dispatch({actionType:"URLFIELD_TYPED_HISTORY_SHOW"})}function k(){c.Z.dispatch({actionType:"URLFIELD_TYPED_HISTORY_HIDE"})}d.Z.history.onVisitRemoved.addListener((function(e){c.Z.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"}),e&&e.allHistory&&c.Z.dispatch({actionType:"NAVIGATION_HISTORY_ALL_DELETED"})}));const I={clearUrlfieldState:function(e){c.Z.dispatch({actionType:"URLFIELD_CLEAR_STATE",pageId:e})},setUrlfieldState:function(e,t){c.Z.dispatch({actionType:"URLFIELD_SET_STATE",pageId:e,state:t})},clearSelection:function(e){c.Z.dispatch({actionType:"URLFIELD_SET_STATE",state:{selectionStart:-1,selectionEnd:-1},pageId:e})},goSearchURL:async function(e,t){const{url:n,options:s}=y(e,t);await v({url:n,options:s})},toggleTypedHistory:function(){!0===l.Z.showTypedHistory()?k():T()},deleteHistory:function(e){c.Z.dispatch({actionType:"URLFIELD_HISTORY_DELETE",url:e})},copyUrlfieldState:function(e,t){c.Z.dispatch({actionType:"URLFIELD_COPY_STATE",pageId:e,state:t})},showTypedHistory:T,hideTypedHistory:k,go:async function(e,t){await Promise.all(e.map(((n,s)=>{const i=n.trimStart();if(!i)return Promise.resolve();const r={...t};return e.length>1&&(r.inBackground=s!==e.length-1),S(i,r).then(v)})))},processSearchUrl:y,migrateTypedHistory:function(){f.nextTick((()=>{let e;try{e=JSON.parse(u.Z.getSync("TYPED_HISTORY"))}catch(e){return}if(!e||!e.h)return;const t=o.Z.TYPED,n=i.ZP.get(N.kAddressBarInlineSearchEnabled);e.h.forEach((e=>S(e.u,{enableSearch:n,transition:t}).then((({url:n,options:s})=>{p.Z.historyPrivate.migrateOldTypedUrl(n,e.w,s.transition||t)})))),u.Z.remove("TYPED_HISTORY")})),d.Z.history.onVisited.addListener(C),c.Z.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"})},toggleDownloadPopout:function(){c.Z.dispatch({actionType:"URLBAR_DOWNLOAD_POPOUT_TOGGLE"})}}},82487:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(53816),i=n(24141),r=(n(45447),n(91662)),a=n(27673),o=n(30801),l=n(15770),c=n(54471);const u=new class{doAction(e,t){const n=c.ZP.getId(),s=r.ZP.getActivePage(n);a.Z.dispatch({actionType:o.Z.WEBPAGEVIEW_ACTIONS,action:e,pageId:s?s.id:0,...t?{payload:t}:null})}findInPage(e,t,n){const i=s.Z.getActiveWebView(),r={findNext:!1,matchCase:n||!1};i&&i.find(t,r,this._findCallback.bind(this,e,t,n))}findNextInPage(e,t,n,i){const r=s.Z.getActiveWebView(),a={backward:n||!1,findNext:!0,matchCase:i||!1};r&&r.find(t,a,this._findCallback.bind(this,e,t,i))}_findCallback(e,t,n,s){!0!==s.canceled&&a.Z.dispatch({actionType:o.Z.FIND_IN_PAGE_RESULT_ACTION,matchCase:n,pageId:e,searchText:t,...s})}showFindInPageToolbar(e){a.Z.dispatch({actionType:o.Z.SHOW_FIND_IN_PAGE_ACTION,pageId:e})}closeFindInPageToolbar(e){return!0===l.Z.isFindInPageOpen(e)&&(a.Z.dispatch({actionType:o.Z.CLOSE_FIND_IN_PAGE_ACTION,pageId:e}),!0)}go(e){a.Z.dispatch({actionType:o.Z.PAGE_GO,index:e||0})}back(){r.ZP.unsafeGetActivePage().isMailPage?i.Z.pageBack():a.Z.dispatch({actionType:o.Z.PAGE_BACK})}forward(){r.ZP.unsafeGetActivePage().isMailPage?i.Z.pageForward():a.Z.dispatch({actionType:o.Z.PAGE_FORWARD})}getPageHistory(e){a.Z.dispatch({actionType:o.Z.PAGE_GET_HISTORY,callback:e})}stop(){a.Z.dispatch({actionType:o.Z.PAGE_STOP})}reload(e,t=!1){a.Z.dispatch({actionType:o.Z.PAGE_RELOAD,pageId:e,bypassCache:t})}updated(e){a.Z.dispatch({actionType:o.Z.PAGE_UPDATED,pageId:e.id})}}},52604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var s=n(6478),i=n(21622),r=n(92144),a=n(27673),o=n(30801),l=n(54471),c=n(63057),u=n(2121),m=n(14919),d=n(74686),h=n(30074),p=n(34155);function g(e,t){a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:t})}function b(e,t){a.Z.dispatch({actionType:"WINDOW_ACTIVATED",windowId:e,activated:t}),d.Z.utilities.broadcastMessage({windowActiveStateChanged:{windowId:e,activated:t}})}function N(e,t,n,s){l.ZP.isMinimalUI(e)||a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_UPDATE_FROM_PREFS})}const f=new class{constructor(){d.Z.windowPrivate.onStateChanged.addListener(g),d.Z.windowPrivate.onActivated.addListener(b)}minimize(e){d.Z.windowPrivate.setState(e,"minimized"),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:"minimized"})}minimizeAll(){d.Z.utilities.broadcastMessage({minimizeAll:!0})}maximize(e){d.Z.windowPrivate.setState(e,"maximized"),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:"maximized"})}restore(e){d.Z.windowPrivate.setState(e,"normal"),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:"normal"})}setFullscreen(e){d.Z.windowPrivate.setState(e,"fullscreen"),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:"fullscreen"})}toggleFullscreen(e){if(l.ZP.isFullscreen(e)){const t=l.ZP.getRestoreStateFullscreen(e);d.Z.windowPrivate.setState(e,t),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:t})}else f.setFullscreen(e)}restoreStateAfterHTMLFullscreen(e){const t=l.ZP.getRestoreStateHtml5Fullscreen(e);d.Z.windowPrivate.setState(e,t),a.Z.dispatch({actionType:"WINDOW_STATE_CHANGED",windowId:e,state:t})}async close(e){return function(e){return new Promise((t=>u.Z.windows.remove(e,t)))}(e)}onHTML5FullScreen(e,t){if(e)d.Z.windowPrivate.setState(t,"fullscreen");else{const e=l.ZP.getRestoreStateHtml5Fullscreen(t);d.Z.windowPrivate.setState(t,e)}a.Z.dispatch({actionType:"WINDOW_HTML5_FULL_SCREEN",windowId:t,html5FullScreen:e})}toggleMinimalUI(e){a.Z.dispatch({actionType:o.Z.WINDOW_MINIMAL_UI,windowId:e,minimalUI:!l.ZP.isMinimalUI(e)})}toggleBookmarksBar(e){l.ZP.isMinimalUI(e)?a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_TOGGLE_BOOKMARKS_BAR}):l.ZP.isGuestSession(e)||s.Z.toggle(h.kBookmarksBarVisible,!0,!1)}toggleAddressBar(e){l.ZP.isMinimalUI(e)?a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_TOGGLE_ADDRESS_BAR}):s.Z.toggle(h.kAddressBarVisible,!0,!1)}toggleTabs(e){l.ZP.isMinimalUI(e)?a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_TOGGLE_TABS}):s.Z.toggle(h.kTabsVisible,!0,!1)}togglePanelToggle(e){l.ZP.isMinimalUI(e)?a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_TOGGLE_PANEL_TOGGLE}):s.Z.toggle(h.kPanelsShowToggle,!0,!1)}toggleStatusBar(e){l.ZP.isMinimalUI(e)?a.Z.dispatch({windowId:e,actionType:o.Z.WINDOW_TOGGLE_STATUS_BAR}):(s.Z.toggle(h.kStatusBarDisplay,"on",i.ZP.get(h.kStatusBarMinimized)),p.nextTick((()=>{"overlay"===i.ZP.get(h.kStatusBarDisplay)&&r.Z.setStatus((0,c.Z)("Status Info set to Overlay"),2e3)})))}__initForTests(){window.vivaldiWindowId=42,a.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:{active:!0,state:"maximized",restoreStateFullscreen:"normal",restoreStateHtml5Fullscreen:"normal",fullscreenMenubarShown:!1,guest:!1,html5FullScreen:!1,incognito:!1,nativeDecorations:!1,minimalUI:!1,type:"normal",visibleUI:{addressBar:!1,bookmarksBar:!1,panelToggle:!1,tabs:!0,statusBar:"on"}},windowId:42})}loadPromise(){return new Promise((e=>{return t=t=>{if("number"!=typeof t.id)throw new Error("WindowActions: Window does not have an id.");const n=t.id,s=(0,m.Z)(t.extData);window.vivaldiWindowId=n;const r=s.windowType?s.windowType:"normal";let c;s.fullScreen&&i.ZP.get(h.kStartupRememberFullScreen)?(d.Z.windowPrivate.setState(n,"fullscreen"),c="fullscreen"):c="maximized"===t.state?"maximized":"normal",d.Z.runtimePrivate.isGuestSession(n,(p=>{const g={active:t.focused,state:c,restoreStateFullscreen:"maximized"===t.state?"maximized":"normal",restoreStateHtml5Fullscreen:"normal",fullscreenMenubarShown:!1,guest:p,html5FullScreen:!1,incognito:t.incognito&&!p,minimalUI:s.minimalUI,nativeDecorations:i.ZP.get(h.kWindowsUseNativeDecoration),type:r,visibleUI:l.ZP.getUIFromPrefs()};s.visibleUI&&(0,l.TF)(g)&&(g.visibleUI=s.visibleUI),a.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:g,windowId:n}),d.Z.utilities.broadcastMessage({windowAdded:{windowId:n,windowState:g}}),"object"==typeof s.tiles&&a.Z.dispatch({actionType:o.Z.TILES_INITIALIZED,tilesState:s.tiles}),i.ZP.addListener([h.kAddressBarVisible,h.kBookmarksBarVisible,h.kPanelsShowToggle,h.kStatusBarDisplay,h.kTabsVisible],N.bind(null,window.vivaldiWindowId)),u.Z.windows.getAll({populate:!0},(e=>{e.forEach(((e,t)=>{if(e.id){const t=e.id,n=(0,m.Z)(e.extData);d.Z.runtimePrivate.isGuestSession(t,(s=>{const r={active:e.focused,state:"locked-fullscreen"===e.state?"normal":e.state,restoreStateFullscreen:"maximized"===e.state?"maximized":"normal",restoreStateHtml5Fullscreen:"normal",fullscreenMenubarShown:!1,guest:s,html5FullScreen:!1,incognito:e.incognito&&!p,minimalUI:n.minimalUI,nativeDecorations:i.ZP.get(h.kWindowsUseNativeDecoration),type:"normal",visibleUI:l.ZP.getUIFromPrefs()};n.visibleUI&&l.ZP.isMinimalUI(t)&&(r.visibleUI=n.visibleUI),a.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:r,windowId:t})}))}}))})),e()}))},void d.Z.windowPrivate.getCurrentId((e=>{if(u.Z.runtime.lastError)throw new Error("getCurrentWindow: No current browserwindow.");u.Z.windows.get(e,t)}));var t}))}},_=f},44342:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var s=n(53816),i=n(91662),r=n(21622),a=n(92144),o=n(27673),l=n(46268),c=n(63057),u=n(74686),m=n(43184),d=n(30074),h=n(44025);const p=new class{async setUIZoomPercentage(e){await p.setUIZoom(e/100)}async setUIZoom(e){const t=Math.min(Math.max(e,m.bI),m.OK);await u.Z.zoom.setVivaldiUIZoom(t)}setPageZoomPercentage(e){p.setPageZoom(e/100)}setPageZoom(e){const t=Math.min(Math.max(e,m.XF),m.qt);i.ZP.unsafeGetActivePage().url.startsWith(h.jk.internals.notes)?o.Z.dispatch({actionType:"ZOOM_NOTES",zoomData:t}):o.Z.dispatch({actionType:"ZOOM_PAGE",zoomData:t});const n=s.Z.getActiveWebView();n&&(n.setZoom(t),"overlay"!==r.ZP.get(d.kStatusBarDisplay)&&r.ZP.get(d.kToolbarsStatus).includes("Zoom")||a.Z.setStatus((0,c.Z)("Page Zoom $1%",[Math.round(100*t)]),2e3))}async uiZoomIn(){const{uiZoom:e}=l.Z.getState(),t=parseFloat(e+m.pL);await p.setUIZoom(t)}async uiZoomOut(){const{uiZoom:e}=l.Z.getState(),t=parseFloat(e-m.pL);await p.setUIZoom(t)}async pageZoomIn(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e+m.Zh).toFixed(2)))}async pageZoomOut(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e-m.Zh).toFixed(2)))}async pageZoomHalf(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e/2).toFixed(2)))}async pageZoomReset(){const e=await u.Z.zoom.getDefaultZoom();p.setPageZoom(e)}async pageZoomDouble(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((2*e).toFixed(2)))}getActiveZoom(){return new Promise((e=>{const t=s.Z.getActiveWebView();t?t.getZoom((t=>{e(t)})):e(m.rM)})).then((e=>e))}dispatchZoomUI(e){o.Z.dispatch({actionType:"ZOOM_SET_UI",zoomData:e})}};function g(e){o.Z.dispatch({actionType:"ZOOM_PAGE_DEFAULT",zoomData:e})}u.Z.zoom.getVivaldiUIZoom((e=>{p.dispatchZoomUI(e)})),u.Z.zoom.onUIZoomChanged.addListener((e=>{const t=s.Z.getActiveWebView();t&&["richtexteditor","markdowneditor"].includes(t.name)||p.dispatchZoomUI(e)})),u.Z.zoom.getDefaultZoom(g),u.Z.zoom.onDefaultZoomChanged.addListener(g);const b=p},33125:(e,t,n)=>{"use strict";var s=n(67294),i=(n(44620),n(5955)),r=n(56530),a=n(66854),o=n(88999),l=n(80943),c=n(33433),u=n(93737),m=n(27673),d=n(79290),h=n(2121),p=n(30381),g=n.n(p),b=n(74686),N=n(15085);let f=!1;const _=[];function v(){const e=g()().startOf("date"),t=g()().endOf("date");return new Promise((n=>{b.Z.historyPrivate.visitSearch({startTime:e.valueOf(),endTime:t.valueOf()},(e=>{m.Z.dispatch({actionType:"HISTORY_LOAD_TODAY",items:e}),n()}))}))}function E(e){for(;e.timeRemaining()>0&&_.length>0;){const e=_.pop();e.length>0&&m.Z.dispatch({actionType:"HISTORY_LOAD_YESTERDAY_AND_OLDER",items:e}),_.length>0&&requestIdleCallback(E)}}const C=new class{loadPromise(){return v().then((()=>{m.Z.dispatch({actionType:"HISTORY_INIT"});const e="HISTORY_"+u.Z.getPanelResourceKey(),t=d.Z.getSync(e);t&&m.Z.dispatch({actionType:"HISTORY_INIT_FILTER",id:u.Z.getPanelResourceKey(),setting:t}),h.Z.history.onVisited.addListener(v)}))}loadAll(){if(!f){f=!0;const e="month",t=g()().subtract(1,"d").endOf("d"),n=36,s=[],i=g()().subtract(n+1,e).endOf(e),r=g()("1970-01-01");s.push({e:i.valueOf(),s:r.valueOf()});for(let i=n;i>=0;i--){const n=g()(t).subtract(i,e).endOf(0===i?"d":e),r=g()(n).startOf(e);s.push({e:n.valueOf(),s:r.valueOf()})}s.forEach((e=>{b.Z.historyPrivate.visitSearch({startTime:e.s.valueOf(),endTime:e.e.valueOf()},(e=>{e.length>0&&(_.push(e),requestIdleCallback(E))}))}))}}deleteHistoryPromise(e){return m.Z.dispatch({actionType:"HISTORY_REMOVE_VISITS",visits:e}),Promise.all(e.map((e=>new Promise((t=>{const n=g()(e.at);let s={startTime:g()(n.startOf("day")).valueOf(),endTime:g()(n.endOf("day")).valueOf()};e.isFolder?h.Z.history.deleteRange(s,(()=>{t()})):(s={...s,url:e.url||""},b.Z.historyPrivate.deleteVisits(s,(()=>{t()})))})))))}removeLocalHistory(e){g()(e).isSame(g()(),"day")?v():m.Z.dispatch({actionType:"HISTORY_REMOVE_AFTER",since:e})}searchHistory(e,t){m.Z.dispatch({actionType:"HISTORY_SEARCH",filter:t,id:e})}saveStateFromSearchQuery(e,t){const n=t.toJS();u.Z.isPanel(e)?d.Z.set({["HISTORY_"+e]:{rangePicker:n.rangePicker,startTime:n.startTime.valueOf(),endTime:n.endTime.valueOf()}}):d.Z.set({HISTORY_MANAGER_STATE:{displayMode:n.displayMode,startTime:n.startTime.valueOf(),endTime:n.endTime.valueOf(),dayPickerVisible:n.dayPickerVisible,moreInfoVisible:n.moreInfoVisible,monthEntriesVisible:n.monthEntriesVisible}})}},w=C;var y=n(31963),S=n.n(y),T=n(18172);class k extends(S()){getInitialState(){return{lights:new Map,groups:new Map}}reduce(e,t){return"HUE_LIGHTS_UPDATE"===t.actionType?(0,T.ZP)(e,(e=>(e.groups=t.groups,e.lights=t.lights,e))):"HUE_LIGHTS_SET"===t.actionType?(0,T.ZP)(e,(t=>e||t)):e}}const I=new k(m.Z);var A=n(21622),Z=n(7997),P=n(30074);const D=[P.kHueBridgeIp,P.kHueEnabled,P.kHueLights,P.kHueUsername];let M;async function O(){const e=A.ZP.get(P.kHueBridgeIp),t=A.ZP.get(P.kHueUsername);if(!e||!t)return void m.Z.dispatch({actionType:"HUE_LIGHTS_UPDATE",groups:new Map,lights:new Map});const n=await fetch(`http://${e}/api/${t}/lights`);n.ok||console.warn(`Unable to retrieve lights from bridge at ${e}`);const s=await n.json(),i=new Map(Object.entries(s)),r=await fetch(`http://${e}/api/${t}/groups`);r.ok||console.warn(`Unable to retrieve lights from bridge at ${e}`);const a=await r.json(),o=new Map(Object.entries(a));for(const[e,t]of o){t.lights.map((e=>i.get(e))).some((e=>e?.capabilities?.control?.colorgamuttype))||o.delete(e)}m.Z.dispatch({actionType:"HUE_LIGHTS_UPDATE",groups:o,lights:i})}function x(){const e=A.ZP.get(P.kHueBridgeIp),t=A.ZP.get(P.kHueUsername),n=A.ZP.get(P.kHueLights);if(!e||!t||!n)return;const s=function(e){let t=e.get("rgb.r"),n=e.get("rgb.g"),s=e.get("rgb.b");t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/13.02,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;const i=.664511*t+.154324*n+.162028*s,r=.283881*t+.668433*n+.047685*s,a=88e-6*t+.07231*n+.986039*s;return[i/(i+r+a),r/(i+r+a)]}(Z.Z.getState().browserColor),i=`http://${e}/api/${t}`;for(const[e,t]of I.getState().lights)n.includes(t.uniqueid)&&fetch(`${i}/lights/${e}/state/`,{method:"put",body:JSON.stringify({transitiontime:3,xy:s})}).catch((e=>{console.warn("Unable to set Hue light",t.name,e)}))}async function L(e,t,n){switch(n){case P.kHueEnabled:await O(),t?(x(),M=Z.Z.addListener(x)):M.remove();break;case P.kHueLights:m.Z.dispatch({actionType:"HUE_LIGHTS_SET",lights:t})}}const R={loadPromise:async function(){A.ZP.get(P.kHueEnabled)&&(M=Z.Z.addListener(x),await O(),x()),A.ZP.addListener(D,L)},updateLights:O,flash:function(e){const t=A.ZP.get(P.kHueBridgeIp),n=A.ZP.get(P.kHueUsername);fetch(`http://${t}/api/${n}/lights/${e}/state`,{method:"put",body:JSON.stringify({alert:"select"})})}};var B=n(40833),F=n(71905),U=n(75438),V=n(91662),H=n(37026),W=n(54471),z=n(91744),G=n(26591);var K=n(24141),j=n(64059),Y=n(34770),$=n(88279),X=n(92144),Q=n(42954);const q={contact:j.Z,mail:K.Z,page:$.Z,status:X.Z};function J(e){if(e.origin!==Q.oP||!e.data||!e.data.actions)return;const{actionType:t,action:n,args:s}=e.data.actions,i=q[t];if(!i)throw new Error("Action creator not found for action type "+t);if("function"!=typeof i[n])throw new Error("Action "+i+"."+n+" not found");"status"===t&&"setStatus"===n&&(s[0]=(0,Y.Z)(s[0])),i[n](...s)}var ee=n(78635),te=n(94103),ne=n(18484),se=n(49856),ie=n(77458),re=n(97491);const ae={};let oe=0;const le={checkForMail:function(e){return ce("checkForMail",[...arguments])},deletePopMail:function(e,t){return ce("deletePopMail",[...arguments])},getPopMessage:function(e,t,n){return ce("getPopMessage",[...arguments])},setCheckInterval:function(e,t){return ce("setCheckInterval",[...arguments])},verifyPopLogin:function(e){return ce("verifyPopLogin",[...arguments])}};function ce(e,t){return new Promise(((n,s)=>{const i=oe++;ae[i]={resolve:n,reject:s},h.Z.runtime.getBackgroundPage((n=>{const s={promiseId:i,func:e,args:t};n&&n.postMessage({pop:s},Q.oP)}))}))}window.addEventListener("message",(function(e){if(e.origin!==Q.oP)return;const{pop:t}=e.data;if(t){const{promiseId:e,results:n,error:s}=t,{resolve:i,reject:r}=ae[e];delete ae[e],s?r(new Error((0,Y.Z)(s))):i(n)}}),!1);var ue=n(63057),me=n(50377),de=n(95582),he=n(50063);const pe=/\b(?:https?:\/\/|ftp:\/\/|www\.)\S+/gi;function ge(e,t,n){let s="";for(;e.endsWith(".")||e.endsWith(":");)s=e[e.length-1]+s,e=e.substr(0,e.length-1);"&lt;"===n.substr(t-4,4)&&e.endsWith("&gt;")?(s="&gt;"+s,e=e.substr(0,e.length-4)):[["(",")"],["[","]"]].forEach((([i,r])=>{n[t-1]===i&&e.endsWith(r)&&(s=r+s,e=e.substr(0,e.length-1))}));return`<a href="${e.startsWith("www.")?"http://"+e:e}" target="_blank">${e}</a>${s}`}function be(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(pe,ge).replace(/(^|[^\/:=])\b([A-Z0-9\-\_\.]+@(?:[A-Z\_-]+\.)+[A-Z]+)/gi,'$1<a href="mailto:$2">$2</a>')}function Ne(e){const t=function(e){return`https://www.youtube-nocookie.com/embed/${e}?rel=0`}(e);return`<iframe src="${t}" frameborder="0" allowfullscreen></iframe>`}var fe=n(33696);function _e(e,t){const n=e[t];return"string"==typeof n?n:""}function ve(e,t){if(e.match(/^\s*#/g))return e;try{return new URL(e,t).href}catch(t){return e}}function Ee(e){try{return new URL(e),!0}catch(e){return!1}}function Ce(e,t){const n=[...e.attributes].find((e=>e.nodeName.toLowerCase()===t));return n?n.nodeName:""}const we=/^\s*(https?|ftp|file):/i;function ye(e,t){if(!(t&&t.match(we)&&Ee(t)&&e.match(/<[a-z][\w\-:]*[\s\/][^>]*=|<style\b/i)))return e;const n=(new DOMParser).parseFromString(e,"text/html"),s=n.documentElement,i=n.head,r=n.body;if(!(n&&s instanceof Element&&i instanceof Element&&r instanceof Element))return e;const a=e.match(/<html\b/i),o=e.match(/<head\b/i),l=e.match(/<(body|frameset)\b/i),c=s.attributes.length,u=i.attributes.length,m=r.attributes.length,d=i.childNodes.length,h=r.childNodes.length;let p;if(o||u||d||!i.parentNode||i.parentNode.removeChild(i),l||m||h||!r.parentNode||r.parentNode.removeChild(r),a||c)p=n.createElement("div"),p.appendChild(s);else{if(!s.children.length)return e;p=l||m||o||u||d&&h?s:d?i:r}return Se(p,t).innerHTML}function Se(e,t){if(!t||!t.match(we)||!Ee(t))return e;const n=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),s=[...e.getElementsByTagName("base")].filter((e=>Ce(e,"href")));if(s.length){const e=s[0].getAttribute(Ce(s[0],"href"));if(e&&e.match(we)&&Ee(e))t=e;else if(e&&!e.match(/^\s*[a-z0-9\-\+\.]+:/i)){const n=ve(e,t);!n.match(we)&&Ee(n)||(t=n)}s.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}const i=n.documentElement;if(!i)return e;const r=n.createElement("base");r instanceof HTMLBaseElement&&(r.href=t,i.appendChild(r));const a=n.importNode(e,!0);i&&i.appendChild(a);const o=[{attr:"action",prop:"action",check:"",pattern:null,replacer:null},{attr:"archive",prop:"",check:"archive",pattern:/([^\s]+)/g,replacer:function(e,n){return ve(n,t)}},{attr:"background",prop:"",check:"background",pattern:null,replacer:null},{attr:"cite",prop:"cite",check:"",pattern:null,replacer:null},{attr:"data",prop:"data",check:"",pattern:null,replacer:null},{attr:"formaction",prop:"formAction",check:"",pattern:null,replacer:null},{attr:"longdesc",prop:"longDesc",check:"",pattern:null,replacer:null},{attr:"href",prop:"href",check:"",pattern:null,replacer:null},{attr:"poster",prop:"poster",check:"",pattern:null,replacer:null},{attr:"src",prop:"src",check:"",pattern:null,replacer:null},{attr:"srcset",prop:"",check:"srcset",pattern:/([^,\s]+)(\s+[^,\s]+)/g,replacer:function(e,n,s){return ve(n,t)+s}},{attr:"xml:link",prop:"",check:"",pattern:null,replacer:null}],l=a.getElementsByTagName("*");for(let e=0;e<l.length;e++){const s=l[e];let r;try{r=n.createElement(s.localName.toLowerCase())}catch(e){r=n.createElement(s.localName.toLowerCase().replace(/[^\w:\-].*$/,""))}i.appendChild(r);for(const{attr:e,prop:n,check:i,pattern:a,replacer:l}of o){const o=Ce(s,e);if(o){const c=s.getAttribute(o)||"";if(r.setAttribute(e,c),a&&l){if(i&&_e(r,i)||!i){const e=c.replace(a,l);c!==e&&s.setAttribute(o,e)}}else if(n){const e=_e(r,n);e&&(c===e||c.match(/^\s*#/g)||s.setAttribute(o,e))}else if(i&&_e(r,i)||!i){const e=ve(c,t);c!==e&&s.setAttribute(o,e)}}}const a=function(e,n){return'url("'+ve(n,t)+'")'},c=/\burl\("([^"]+)"\)/g,u=Ce(s,"style");if(u){r.setAttribute("style",s.getAttribute(u)||"");const e=r.style.cssText;if(e){const t=e.replace(c,a);e!==t&&s.setAttribute(u,t)}}if(r instanceof HTMLStyleElement&&s.textContent.length&&r.sheet instanceof CSSStyleSheet){r.textContent=s.textContent;const e=[...r.sheet.cssRules].map((e=>e.cssText)).join("\n"),t=e.replace(c,a);e!==t&&(s.textContent=t)}i.removeChild(r)}return e.ownerDocument.adoptNode(a)}function Te(){}function ke(){this.category=[],this.cloud=[],this.people=new Me,this.feeditems=[],this.generator=null,this.haserrors=!1,this.htmlrights="",this.htmldescription="",this.htmltitle="",this.icon=null,this.id="",this.image=null,this.language="",this.lastbuilddate="",this.links=new Ze,this.plaintitle="",this.pubdate="",this.publishdate="",this.rating="",this.skipdays=new Be,this.skiphours=[],this.textinput=[],this.ttl="",this.updated="",this.updatedate="",this.updatefrequency="",this.updateperiod=""}function Ie(){this.category=[],this.people=new Me,this.htmlbody="",this.htmlcontent="",this.htmldescription="",this.htmlrights="",this.htmlsummary="",this.htmltitle="",this.id="",this.links=new Ze,this.plaintitle="",this.pubdate="",this.publishdate="",this.published="",this.source=null,this.updated="",this.updatedate="",this.xmloriginal=""}function Ae(){this.description="",this.height="",this.link="",this.title="",this.url="",this.width=""}function Ze(){this.alternate=[],this.comments=[],this.docs=[],this.enclosure=[],this.next=[],this.prev=[],this.related=[],this.self=[],this.serviceedit=[],this.servicepost=[],this.via=[]}function Pe(){this.hreflang="",this.bytelength="",this.mimetype="",this.title="",this.url=""}function De(){this.label="",this.scheme="",this.term=""}function Me(){this.author=[],this.contributor=[],this.managingeditor=[],this.webmaster=[]}function Oe(){this.email="",this.name="",this.url=""}function xe(){this.name="",this.url="",this.version=""}function Le(){this.domain="",this.path="",this.port="",this.protocol="",this.registerprocedure=""}function Re(){this.htmldescription="",this.link="",this.name="",this.title=""}function Be(){this.sunday=this.monday=this.tuesday=this.wednesday=this.thursday=this.friday=this.saturday=!1}function Fe(){this.htmltitle="",this.items=[],this.ownername="",this.owneremail="",this.ownerurl="",this.plaintitle="",this.publishdate="",this.updatedate=""}function Ue(){this.category="",this.created="",this.feedurl="",this.htmldescription="",this.htmltitle="",this.items=[],this.language="",this.pageurl="",this.plaintitle="",this.supported=!0}const Ve="http://www.w3.org/1999/xhtml";function He(e){return(e||"").replace(/^\s+|\s+$/g,"")}function We(e){return(e||"").replace(/^\s*[\r\n]|\s+$/g,"")}function ze(e){return document.createElementNS(Ve,"div").appendChild(document.createTextNode(e)).parentNode.innerHTML}function Ge(e){const t=document.implementation.createHTMLDocument().createElementNS(Ve,"div");return t.innerHTML=e,He(t.textContent)}function Ke(e,t,n){return e.match(/&(#\d+|#x[0-9a-e]+|[a-z][0-9a-z]*);|<[a-z][a-z0-9\-]*\b[^>]*>/i)?ye(He(e),Je("",t,n)):be(ze(We(e)))}function je(e){return e.toLowerCase()}function Ye(e,t){return He(e||t).toLowerCase()}function $e(e){let t="";for(let n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType!==Node.TEXT_NODE&&e.childNodes[n].nodeType!==Node.CDATA_SECTION_NODE||(t+=e.childNodes[n].nodeValue);return t}function Xe(e,t,n){for(let s=t.length-1;s>=0;s--)if(t[s]){if(e.hasAttributeNS(t[s],n))return e.getAttributeNS(t[s],n);if(e.namespaceURI===t[s]&&(!s||e.hasAttributeNS("",n)))return e.getAttributeNS("",n);if(!s)return null}else{if(!s&&e.namespaceURI)return null;if(!s||!e.namespaceURI&&e.hasAttributeNS("",n))return e.getAttributeNS("",n)}}function Qe(e,t,n){for(let s=t.length-1;s>=0;s--)if(t[s]){if(e.hasAttributeNS(t[s],n))return!0;if(e.namespaceURI===t[s]&&(!s||e.hasAttributeNS("",n)))return!!s||e.hasAttributeNS("",n);if(!s)return!1}else{if(!s&&e.namespaceURI)return!1;if(!s||!e.namespaceURI&&e.hasAttributeNS("",n))return!!s||e.getAttributeNS("",n)}}function qe(e){try{return new URL(e),!0}catch(e){return!1}}function Je(e,t,n){const s=/^[a-z0-9\-\+\.]+:/i;if(e.match(s))return e;const i=/^(https?|ftp|file):/i,r=[e];let a,o=!1;for(;!o&&t.nodeType===Node.ELEMENT_NODE;){if(t.hasAttribute("xml:base")&&(a=He(t.getAttribute("xml:base")),a.length)){const e=a.match(s);o=a.match(i)&&qe(a),e&&!o||(r[r.length]=a)}t=t.parentNode}if(!o){if(!n.match(i)||!qe(n))return e;r[r.length]=n}for(n=r.pop();void 0!==(a=r.pop());)try{n=new URL(a,n).href}catch(t){return e}return n||(n=e),n}const et=new RegExp("^[\\p{Ps}\\p{Pi}\"'<]+|[\\p{Pe}\\p{Pf}\"'>]+$","ug");Te.prototype.parseFeed=function(e,t,n){const s="http://www.w3.org/2005/Atom",i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r="http://purl.org/rss/1.0/",a="http://channel.netscape.com/rdf/simple/0.9/",o="http://purl.org/dc/elements/1.1/";function l(e,t){let n="";const s=new XMLSerializer;e=e.cloneNode(!0);const i=document.createTreeWalker(e,NodeFilter.SHOW_CDATA_SECTION);for(;i.nextNode();)i.currentNode.parentNode.replaceChild(i.currentNode.ownerDocument.createTextNode(i.currentNode.nodeValue),i.currentNode);if(t)for(let t=0;t<e.childNodes.length;t++)n+=s.serializeToString(e.childNodes[t]);else n=s.serializeToString(e).replace(/^<[^>]+>|<[^>]+>$/g,"");return n}function c(e,t,n){if(1===t.length)return e.getElementsByTagNameNS(t[0],n);const s=e.getElementsByTagName("*"),i=[];for(let e=0;e<s.length;e++)s[e].localName===n&&-1!==t.indexOf(s[e].namespaceURI)&&(i[i.length]=s[e]);return i}function u(e,t){const s=Ye(Xe(e,T,"type"),"");if(e.children.length){if(e.children.length>1||e.children[0]!==(e.getElementsByTagNameNS(Ve,"div")[0]||e.getElementsByTagNameNS(e.namespaceURI,"div")[0])||function(e){for(let t=0;t<e.childNodes.length;t++)if(e.childNodes[t].nodeType===Node.TEXT_NODE&&e.childNodes[t].nodeValue.replace(/^\s+|\s+$/g,"")||e.childNodes[t].nodeType===Node.CDATA_SECTION_NODE)return!0;return!1}(e)){return l(Se(e,Je("",e,n)))}return l(Se(e.children[0],Je("",e.children[0],n)),e.children[0].namespaceURI===Ve)}if("html"===s||"text/html"===s||"xhtml"===s||s.match(/^application\/.*\+xml$/))return ye(He($e(e)),Je("",e,n));if(s&&"text"!==s&&!s.match(/^text\/plain$/)&&s.match(/^[\-\w]+\/[\-\w\+]+$/)){if(t){const n=new Pe;n.url="data:"+s+";base64,"+He($e(e)).replace(/\s+/g,""),n.mimetype=s,h(n,t)}return""}return be(ze(We($e(e))))}function m(e){if(e.children.length){return l(Se(e,Je("",e,n)))}return Ke($e(e),e,n)}function d(e){const t=new Ae;if(e.children.length){for(let s,i,r=0;r<e.children.length;r++)if(s=e.children[r],i=je(s.localName),-1!==T.indexOf(s.namespaceURI))if("url"===i||"link"===i){const e=He($e(s));e&&(t[i]=Je(e,s,n))}else if("feedlink"===i){const e=He($e(s));e&&(t.link=Je(e,s,n))}else"title"===i||"feedtitle"===i?t.title=He($e(s)):"description"!==i&&"width"!==i&&"height"!==i||(t[i]=He($e(s)))}else{const s=He($e(e));s&&(t.url=Je(s,e,n))}return t}function h(e,t){const n=t.find((t=>t.url===e.url&&t.title===e.title&&t.hreflang===e.hreflang));n?(!n.mimetype&&e.mimetype&&(n.mimetype=e.mimetype),!n.bytelength&&e.bytelength&&(n.bytelength=e.bytelength)):t[t.length]=e}function p(e,t){let s,i;if("enclosure"===e.localName||"comments"===e.localName||"docs"===e.localName?s=e.localName:"source"===e.localName||"feedsource"===e.localName?s="via":"relation"===e.localName?s="related":(s=Ye(Xe(e,T,"rel"),"alternate"),s=s.replace(/\W/g,"")),"source"!==e.localName&&"feedsource"!==e.localName&&e.childNodes.length?i=He($e(e)):Qe(e,T,"href")?i=He(Xe(e,T,"href")):Qe(e,T,"url")?i=He(Xe(e,T,"url")):e.namespaceURI===o&&(i=He($e(e))),i&&s&&t.links.hasOwnProperty(s)){const r=new Pe;r.url=Je(i,e,n),"source"===e.localName||"feedsource"===e.localName?r.title=He($e(e)):r.title=He(Xe(e,T,"title")),r.mimetype=He(Xe(e,T,"type")),r.hreflang=He(Xe(e,T,"hreflang")),r.bytelength=He(Xe(e,T,"length")),h(r,t.links[s])}}function g(e){const t=new De,n=He($e(e));return n.length?(t.label=t.term=n,t.scheme=He(Xe(e,T,"domain"))):(t.term=He(Xe(e,T,"term")),t.label=He(Xe(e,T,"label")||t.term),t.scheme=He(Xe(e,T,"scheme"))),t}function b(e){const t=new xe;t.name=He($e(e));const s=He(Xe(e,T,"uri"));return s&&(t.url=Je(s,e,n)),t.version=He(Xe(e,T,"version")),t}function N(e){let t;if(e.children.length){t=new Oe;for(let s,r,a=0;a<e.children.length;a++)if(s=e.children[a],r=je(s.localName),-1!==T.indexOf(s.namespaceURI)){if("name"===r||"email"===r)t[r]=He($e(s));else if("uri"===r){const e=He($e(s));e&&(t.url=Je(e,s,n))}}else if("http://xmlns.com/foaf/0.1"===s.namespaceURI)if("name"===r)t[r]=He($e(s));else if("homepage"===r){const e=He(s.getAttributeNS(i,"resource"));e&&(t.url=Je(e,s,n))}else"mbox"===r&&(t.email=He(s.getAttributeNS(i,"resource")).replace(/^[a-z]+:/i,""))}else{const n=He($e(e));(0,fe.HZ)(n)?(t=new Oe,t.email=n):t=f(null,n)}return t}function f(e,t){const n=new Oe,s=e?$e(e):t;n.name=He(s.replace(/[\s<(]*(mailto\s*:\s*)?[^\s<>():,@]+@[^\s<>():,@]+[\s>)]*/i," ")).replace(et,"");const i=s.match(/[^\s<>():,@]+@[^\s<>():,@]+/);return i&&(n.email=i[0].replace(/^"([^\"]*)"$/,"$1")),n}function _(e){const t=new Le;return t.domain=He(Xe(e,T,"domain")),t.port=He(Xe(e,T,"port")),t.path=He(Xe(e,T,"path")),t.registerprocedure=He(Xe(e,T,"registerProcedure"))||He(Xe(e,T,"registerprocedure")),t.protocol=He(Xe(e,T,"protocol")),t}function v(e){const t=new Re;for(let s,i,r=0;r<e.children.length;r++)if(s=e.children[r],i=je(s.localName),-1!==T.indexOf(s.namespaceURI))if("description"===i)t.htmldescription=m(s);else if("title"===i||"feedtitle"===i)t.title=He($e(s));else if("name"===i)t.name=He($e(s));else if("link"===i||"feedlink"===i){const e=He($e(s));e&&(t.link=Je(e,s,n))}return t}function E(e,t){for(let n,s,i=0;i<e.children.length;i++)n=e.children[i],-1!==T.indexOf(n.namespaceURI)&&"day"===je(n.localName)&&(s=He($e(n)).toLowerCase(),t.hasOwnProperty(s)&&(t[s]=!0))}function C(e,t){for(let n,s,i=0;i<e.children.length;i++)n=e.children[i],-1!==T.indexOf(n.namespaceURI)&&"hour"===je(n.localName)&&(s=He($e(n)).toLowerCase(),s.match(/^\d+$/)&&1*s<24&&1*s>=0&&(t[s]=!0))}function w(t){const s=new XMLSerializer;let i=s.serializeToString(t);const r=/^([^>]+)\sxmlns="http:\/\/www.w3.org\/1999\/xhtml"/;if(S&&(i=i.replace(/<(\/?)feed(source|link|image|title)\b/g,"<$1$2"),i=i.replace(r,"$1")),!k.contains(t)){let e=s.serializeToString(k.cloneNode(!1));S&&(e=e.replace(r,"$1")),i=`${e}${i}`}for(;t&&t.parentNode!==e;){const a=(t=t.parentNode).cloneNode(!1),o=Je("",t,n);a.setAttribute("xml:base",o),S&&t!==k&&t!==e.documentElement&&t.hasAttribute("xmlns")&&a.removeAttribute("xmlns");let l=s.serializeToString(a);l=l.replace(/^<([\w\-:]+)\b([^>]*)\/>$/,"<$1$2></$1>"),S&&(l=l.replace(r,"$1")),l=l.split("></"),i=l[0]+">"+i+"</"+l[1]}return i}function y(t){const n=new ke;for(let e,s,i=0;i<t.children.length;i++)e=t.children[i],s=je(e.localName),-1!==T.indexOf(e.namespaceURI)?"id"===s?n[s]=He($e(e)):"image"===s||"feedimage"===s?e.children.length&&(n.image=d(e)):"logo"===s?n.image=d(e):"icon"===s?n[s]=d(e):"generator"===s?n[s]=b(e):"title"===s||"feedtitle"===s?("channel"===t.localName?n.htmltitle=m(e):n.htmltitle=u(e),n.plaintitle=Ge(n.htmltitle)):"rights"===s?n.htmlrights=u(e):"subtitle"===s?n.htmldescription=u(e):"copyright"===s?n.htmlrights=m(e):"description"===s?n.htmldescription=m(e):"updated"===s||"lastbuilddate"===s||"pubdate"===s||"rating"===s||"language"===s||"ttl"===s?n[s]=He($e(e)):"category"===s?n[s][n[s].length]=g(e):"link"===s||"feedlink"===s||"docs"===s?p(e,n):"cloud"===s?n[s][n[s].length]=_(e):"author"===s||"contributor"===s||"managingeditor"===s||"webmaster"===s?n.people[s][n.people[s].length]=N(e):"textinput"===s?e.children.length&&(n[s][n[s].length]=v(e)):"skipdays"===s?E(e,n[s]):"skiphours"===s&&C(e,n[s]):"http://purl.org/rss/1.0/modules/syndication/"===e.namespaceURI?"updateperiod"!==s&&"updatefrequency"!==s||(n[s]=He($e(e)).toLowerCase()):e.namespaceURI===o&&("title"===s?(n.htmltitle=m(e),n.plaintitle=Ge(n.htmltitle)):"description"===s?n.htmldescription=m(e):"date"===s?n.pubdate=He($e(e)):"language"===s?n[s]=He($e(e)):"rights"===s?n.htmlrights=m(e):"subject"===s?n.category[n.category.length]=g(e):"source"===s||"relation"===s?p(e,n):"publisher"===s?n.people.managingeditor[n.people.managingeditor.length]=f(e):"creator"===s?n.people.author[n.people.author.length]=f(e):"contributor"===s&&(n.people[s][n.people[s].length]=f(e)));if(!n.language){const s=je(t.localName);"source"===s||"feedsource"===s?t.hasAttribute("xml:lang")&&(n.language=He(t.getAttribute("xml:lang"))):e.documentElement.hasAttribute("xml:lang")&&(n.language=He(e.documentElement.getAttribute("xml:lang")))}if(n.publishdate=n.pubdate||n.updated||n.lastbuilddate,n.updatedate=n.lastbuilddate||n.updated||n.pubdate,n.ttl.match(/^\d+$/))n.ttl=parseInt(n.ttl)||"";else if(n.updateperiod||n.updatefrequency){let e;e=n.updatefrequency.match(/^\d+$/)&&parseInt(n.updatefrequency)||1;const t={hourly:60,daily:1440,weekly:10080,monthly:306600,yearly:3679200};t.hasOwnProperty(n.updateperiod)?n.ttl=Math.round(t[n.updateperiod]/e):n.ttl=Math.round(t.daily/e)}else n.ttl="";return n}let S=!1;if("string"!=typeof t)return"HTMLStringNotString";if("string"!=typeof n)return"FeedURLNotString";if(!e||e.getElementsByTagNameNS(Ve,"parsererror").length){if(t&&t.match(/^\w*</)&&(t.match(/<[\w\-:]+[^>]*>/g)||[]).length>3&&(t.match(/<\/[\w\-:]+>/g)||[]).length>3){for(;t.match(/<(source|link|image|title)\b(([^\/>]|\/[^>])*>[^<]*((?!<\1\b([^\/>]|\/[^>])*>)<[^<]*)*?)<\/\1>/i);)t=t.replace(/<(source|link|image|title)\b(([^\/>]|\/[^>])*>[^<]*((?!<\1\b([^\/>]|\/[^>])*>)<[^<]*)*?)<\/\1>/gi,"<feed$1$2</feed$1>");t=(t=t.replace(/<(\w+:link|\w+:category|category|\w+:cloud|cloud|\w+:enclosure|enclosure)\b([^>]*)\/>/gi,"<$1$2></$1>")).replace(/<!\[CDATA\[([\w\W]*?)\]\]>/gi,((e,t)=>ze(t))),t="<!doctype html><html><head><title></title></head><body>"+t+"</body></html>",e=(new DOMParser).parseFromString(t,"text/html"),S=!0}if(!e||e.getElementsByTagNameNS(Ve,"parsererror").length)return"NoDocumentNode";e.body&&((e=e.body).documentElement=e.children[0])}if(!e.documentElement)return"NoDocumentElement";const T=[e.documentElement.namespaceURI];let k;if(T[0]||"feed"!==e.documentElement.localName?T[0]===i&&(T[1]=r,T[2]=a):T[1]=s,k="feed"===e.documentElement.localName?e.documentElement:c(e.documentElement,T,"channel")[0],!k)return"NoChannelElement";-1===T.indexOf(s)&&T.unshift(s),-1===T.indexOf(r)&&T.unshift(r),-1===T.indexOf(a)&&T.unshift(a);const I=y(k);if(I.haserrors=S,e.documentElement!==k&&e.documentElement.children.length>1)for(let t,n,s=0;s<e.documentElement.children.length;s++)t=e.documentElement.children[s],n=je(t.localName),-1!==T.indexOf(t.namespaceURI)&&("image"===n||"feedimage"===n?I.image=d(t):"textinput"===n&&(I[n][I[n].length]=v(t)));let A;A="feed"===k.localName?c(e,T,"entry"):c(e,T,"item");for(let e=0;e<A.length;e++){let t=!1;I.feeditems[e]=new Ie;for(let n,s,i=0;i<A[e].children.length;i++)if(n=A[e].children[i],s=je(n.localName),-1!==T.indexOf(n.namespaceURI))"link"===s||"feedlink"===s||"enclosure"===s||"comments"===s?p(n,I.feeditems[e]):"title"===s||"feedtitle"===s?("item"===n.parentNode.localName?I.feeditems[e].htmltitle=m(n):I.feeditems[e].htmltitle=u(n),I.feeditems[e].plaintitle=Ge(I.feeditems[e].htmltitle)):"summary"===s||"rights"===s?I.feeditems[e]["html"+s]=u(n):"content"===s?I.feeditems[e].htmlcontent=u(n,I.feeditems[e].links.enclosure):"description"===s?t?I.feeditems[e].htmlsummary=m(n):I.feeditems[e].htmldescription=m(n):"author"===s||"contributor"===s?I.feeditems[e].people[s][I.feeditems[e].people[s].length]=N(n):"category"===s?I.feeditems[e][s][I.feeditems[e][s].length]=g(n):"id"===s||"published"===s||"updated"===s||"pubdate"===s?I.feeditems[e][s]=He($e(n)):"guid"===s?(I.feeditems[e].id=He($e(n)),"false"!==Ye(Xe(n,T,"isPermaLink"),"")&&"false"!==Ye(Xe(n,T,"ispermalink"),"")&&p(n,I.feeditems[e])):"source"!==s&&"feedsource"!==s||("item"===n.parentNode.localName?p(n,I.feeditems[e]):I.feeditems[e].source=y(n));else if(n.namespaceURI===o)"title"===s?(I.feeditems[e].htmltitle=m(n),I.feeditems[e].plaintitle=Ge(I.feeditems[e].htmltitle)):"description"===s?I.feeditems[e].htmldescription=m(n):"date"===s?I.feeditems[e].pubdate=He($e(n)):"rights"===s?I.feeditems[e].htmlrights=m(n):"subject"===s?I.feeditems[e].category[I.feeditems[e].category.length]=g(n):"identifier"===s?(I.feeditems[e].id||(I.feeditems[e].id=He($e(n))),p(n,I.feeditems[e])):"source"===s||"relation"===s?p(n,I.feeditems[e]):"publisher"===s||"creator"===s?I.feeditems[e].people.author[I.feeditems[e].people.author.length]=f(n):"contributor"===s&&(I.feeditems[e].people[s][I.feeditems[e].people[s].length]=f(n));else if("http://purl.org/rss/1.0/modules/content/"===n.namespaceURI)"encoded"===s&&(t||I.feeditems[e].htmlsummary||(I.feeditems[e].htmlsummary=I.feeditems[e].htmldescription),t=!0,I.feeditems[e].htmldescription=$e(n));else if("http://search.yahoo.com/mrss/"===n.namespaceURI)switch(s){case"group":{const t=n.getElementsByTagName("media:description")[0]?.innerHTML;if(t){const n=be(t);I.feeditems[e].htmldescription+=`<div class="preformatted">${n}</div>`}const s=n.getElementsByTagName("media:thumbnail")[0];if(s){const t=new Ae;t.url=s.getAttribute("url"),t.width=s.getAttribute("width"),t.height=s.getAttribute("height"),I.feeditems[e].links.enclosure.push(t)}break}}else if("http://www.youtube.com/xml/schemas/2015"===n.namespaceURI){if("videoid"===s)I.feeditems[e].htmldescription+=`<div class="video-wrapper">${Ne(n.innerHTML)}</div>`}else if("http://www.itunes.com/dtds/podcast-1.0.dtd"===n.namespaceURI)switch(s){case"author":case"block":case"category":case"duration":case"email":case"explicit":case"keywords":case"name":case"new":case"owner":case"pubDate":case"subtitle":case"summary":case"episodetype":case"season":case"episode":case"title":break;case"image":{const t=new Ae;t.url=n.getAttribute("href"),I.feeditems[e].links.enclosure.push(t);break}}I.feeditems[e].publishdate=I.feeditems[e].published||I.feeditems[e].pubdate||I.feeditems[e].updated,I.feeditems[e].updatedate=I.feeditems[e].updated||I.feeditems[e].pubdate||I.feeditems[e].published,I.feeditems[e].htmlbody=I.feeditems[e].htmlcontent||I.feeditems[e].htmldescription||I.feeditems[e].htmlsummary,I.feeditems[e].xmloriginal=w(A[e])}return I},Te.prototype.parseOPML=function(e,t){function n(e,i){for(let r,a,o=0;o<e.children.length;o++)if(r=e.children[o],a=je(r.localName),-1!==s.indexOf(r.namespaceURI)&&"outline"===a&&"true"!==Ye(Xe(r,s,"isComment"),"")){const e=new Ue;if(-1!==["rss","atom"].indexOf(Ye(Xe(r,s,"type"),""))&&(e.feedurl=He(Xe(r,s,"xmlUrl")),e.feedurl)){e.feedurl=Je(e.feedurl,r,t),e.created=He(Xe(r,s,"created")),e.htmldescription=Ke(Xe(r,s,"description")||"",r,t),e.language=He(Xe(r,s,"language")),e.pageurl=He(Xe(r,s,"htmlUrl"))||He(Xe(r,s,"url")),e.pageurl&&(e.pageurl=Je(e.pageurl,r,t));const n=Ye(Xe(r,s,"version"),"");e.supported=Boolean(!n||n.match(/^(rss\d*|atom\s*[\d\.]*)$/i))}if(Qe(r,s,"category")?e.category=He(Xe(r,s,"category")):e.category=i.category||"",r.children.length&&n(r,e),e.feedurl||e.items.length){i.items[i.items.length]=e;const n=He(Xe(r,s,"text")),a=He(Xe(r,s,"title"));n&&a&&n!==a?(e.htmltitle=Ke(n.length<=a.length?n:a,r,t),e.htmldescription||(e.htmldescription=Ke(n.length<=a.length?a:n,r,t))):e.htmltitle=Ke(n||a,r,t)||ze(e.feedurl),e.plaintitle=Ge(e.htmltitle)}}}const s=[null,"","http://opml.org/spec2"];if("string"!=typeof t)return"FeedURLNotString";if(!e||e.getElementsByTagNameNS(Ve,"parsererror").length)return"NoDocumentNode";if(!e.documentElement)return"NoDocumentElement";if("opml"!==e.documentElement.localName&&"outlineDocument"!==e.documentElement.localName||-1===s.indexOf(e.documentElement.namespaceURI))return"WrongDocumentElement";const i=new Fe;for(let r,a,o=0;o<e.documentElement.children.length;o++)if(r=e.documentElement.children[o],-1!==s.indexOf(e.documentElement.namespaceURI))if(a=je(r.localName),"head"===a){for(let e,n,a=0;a<r.children.length;a++)if(e=r.children[a],-1!==s.indexOf(e.namespaceURI))if(n=je(e.localName),"title"===n)i.htmltitle=Ke($e(e),e,t),i.plaintitle=Ge(i.htmltitle);else if("ownername"===n||"owneremail"===n)i[n]=He($e(e));else if("datecreated"===n)i.publishdate=He($e(e));else if("datemodified"===n)i.updatedate=He($e(e));else if("ownerid"===n){const n=He($e(e));n&&(i.ownerurl=Je(n,e,t))}}else"body"===a&&n(r,i);return i};var tt,nt=n(39353),st=n(6478);const it=new(tt=class{constructor(){var e,t,n;n=()=>{window.isMailWindow?Ft():h.Z.runtime.sendMessage({refreshRSS:!0})},(t="updateAllFeeds")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}add(e){const t=A.ZP.get(P.kRssSettings),n=e.filter((e=>!t.some((t=>t.url===e.url))));n.length&&st.Z.set(P.kRssSettings,[...t,...n])}async removeAllFeeds(){const e=A.ZP.get(P.kRssSettings);try{for(const t of e)await K.Z.removeAccountPath(he.u4,t.path,"RSS");st.Z.set(P.kRssSettings,[])}catch(e){console.error(e)}}async removeFeed(e){const t=A.ZP.get(P.kRssSettings),n=t.findIndex((t=>t.path===e));try{K.Z.removeAccountPath(he.u4,e,"RSS");const s=[...t];s.splice(n,1),st.Z.set(P.kRssSettings,s)}catch(e){console.error(e)}}async edit(e,t){const n=A.ZP.get(P.kRssSettings),s=n[t];if(s.title!==e.title){const t=await nt.Z.setFilterName(he.u4,s.path,e.title);me.Z.updateFilters(t)}n[t]=e,st.Z.set(P.kRssSettings,n)}},tt),rt=it;var at=n(74368),ot=n(77150),lt=n.n(ot),ct=n(4111);function ut(e){let t=new Date(e);return mt(t)||(t=dt(e)),t}const mt=e=>e instanceof Date&&!isNaN(e),dt=(e="")=>new Date(e.trim().replace(/\b[a-z]+$/i,(e=>ct.Z[e.toUpperCase()]||"+0000")));var ht=n(98395),pt=n(48345);var gt=n(87422);const bt=/^\s*data:/i,Nt="x-vivaldi/feed-embeddable-media/youtube";function ft(e){if(""===e)return[];const t=(new Te).parseFeed((new DOMParser).parseFromString(e,"application/xml"),e,"");if("string"==typeof t)return[{type:"html",content:`<html><body><p>${(0,ue.Z)("Error: $1",[t])}</p></body></html>`}];const{feeditems:n}=t;if(!n.length)return[{type:"html",content:`<html><body><p>${(0,ue.Z)("Error: $1",["NO_FEED_ITEM"])}</p></body></html>`}];const{htmlbody:s,htmlrights:i,links:r}=n[0],a=[{type:"html",content:`<main>\n      ${s}\n    </main>\n    ${wt(r,s)}\n    ${_t(i)}`}];return["alternate","enclosure","related","via","comments","serviceedit"].forEach((e=>{let t=1;r[e].filter((e=>e.url.match(bt))).forEach((n=>{const s=function(e,t){let n="us-ascii",s="text/plain";if(t){const e=t.match(/;\s*charset\s*=\s*("\s*)?([^\s;"]+)/i);e&&(n=e[2]),s=t.replace(/;[\w\W]*$|\s+/g,"")||s}const i={valid:!1,protocol:"",mimeType:s,charset:n,base64:!1,data:""},r=e.match(/^\s*data:([^,]*),([\w\W]*)$/i);if(r){i.valid=!0,i.protocol="data:",i.data=r[2];const e=r[1].split(";");e.forEach(((t,n)=>{if(!n&&t.match(/^\s*[a-z]*\/[\w!#$&\-^\.\+]+\s*$/))i.mimeType=t.replace(/\s+/g,"").toLowerCase();else{let s,r;const a=t.indexOf("=");-1===a?s=t:(s=t.substring(0,a),r=t.substring(a+1).replace(/^\s+|"|\s+$/g,"")),s=s.toLowerCase().replace(/^\s+|\s+$/g,""),"charset"===s&&r?i.charset=r.toLowerCase():"base64"===s&&-1===a&&n===e.length-1&&(i.base64=!0,i.data=i.data.replace(/\s+/g,""))}}))}return i}(n.url,n.mimetype),{valid:i,mimeType:r,charset:o,base64:l}=s;let{data:c}=s;if(i&&c){let s=n.title.replace(/[\\\/?%*:|"<>\s]/g,"")||`${e}${t++}`;const i=s.replace(/^([^\.]*$|[\w\W]*\.)/,"").toLowerCase(),u=(0,gt.nv)(r,i);if(u!==i&&(s=`${s}.${u}`),!l){if("utf-8"===o)try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}else if("us-ascii"===o||"iso-8859-1"===o)c=unescape(c);else{const e=c.length;let t=0;const n=[];for(;t<e;){const s=c.substring(t,t+1);if("%"===s&&e-t>=3){const e=c.substring(t+1,t+2),i=c.substring(t+2,t+3);isNaN(parseInt(e,16))||isNaN(parseInt(i,16))?n.push(s.charCodeAt(0)):(n.push(parseInt(`${e}${i}`,16)),t+=2)}else{const e=s.charCodeAt(0);if(e>255){(new TextEncoder).encode(s).forEach((e=>n.push(e)))}else n.push(e)}t++}try{c=new TextDecoder(o).decode(new Uint8Array(n))}catch(e){try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}}}c=new Uint8Array((new TextEncoder).encode(c))}a.push({type:"attachment",mimeType:r,filename:s,content:c})}}))})),a}const _t=e=>e?`<footer>${e}</footer>`:"",vt=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Et=(e,t)=>{const n=e.hreflang?` hreflang="${vt(e.hreflang)}`:"";return`<li>\n    <a href="${vt(e.url)}"${n}>\n    ${vt(e.title?e.title:t.length?t:e.url)}\n    </a>\n    </li>`},Ct=(e,t)=>`<figure>\n    ${e}\n    ${t?`<figcaption>${vt(t)}</figcaption>`:""}\n    </figure>`;const wt=(e,t)=>{const n=[],s=e=>!e.url.match(bt),i=document.createElement("video"),r=/^(image|img)\/(jpe?g|gif|a?png|svg+xml|bmp|x-icon|webp)(\b|$)/i,a=/^[^\?#]*\.(jpe?g|gif|a?png|svg|bmp|ico|cur|webp)(\?|#|$)/i,o=e.enclosure.filter(s);let l=[];t.match(/<(img|image)\s/i)||(l=o.filter((e=>e.mimetype?e.mimetype.match(r):e.url.match(a))));const c=o.filter((e=>{if(e.mimetype?.match(/^video\//i))return i.canPlayType(e.mimetype);if(A.ZP.get(P.kRssEmbedYoutubeAttachments)){const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/gi.exec(e.url);if(t&&t[1])return e.mimeType=Nt,e.url=t[1],!0}return!1})),u=o.filter((e=>!(!e.mimetype||!e.mimetype.match(/^audio\//i))&&i.canPlayType(e.mimetype))),m=o.filter((e=>!(l.includes(e)||c.includes(e)||u.includes(e))));n.push("<nav>");const d=e.alternate.filter(s),h=function(e,t){if(!t.length)return null;if(1===t.length)return t[0];let n=t.filter((e=>""!==e.hreflang));const s=t.filter((e=>""===e.hreflang));if(!n.length)return s[0];e=e.map((e=>e.replace(/_/g,"-").toLowerCase())),n=n.map((e=>({lang:e.hreflang.replace(/_/g,"-").toLowerCase(),val:e})));let i=!1;do{for(let t=0;t<e.length;t++){const s=n.find((n=>n.lang===e[t]));if(s)return s.val}i=!1,n.forEach((e=>{const t=e.lang.lastIndexOf("-");-1!==t&&(i=!0,e.lang=e.lang.substring(0,t))}))}while(i);e=e.map((e=>e.replace(/-[\w\W]*$/g,"").toLowerCase()));for(let t=0;t<e.length;t++){const s=n.find((n=>n.lang===e[t]));if(s)return s.val}return s.length?s[0]:n[0].val}(navigator.languages,d);n.push('<ul class="mainbutton">'),h&&n.push(Et(h,(0,ue.Z)("Open article"))),n.push("</ul>"),d.length>1&&(n.push(`<h2>${(0,ue.Z)("Main article")}</h2><ul>`),d.forEach((e=>{e!==h&&n.push(Et(e,(0,ue.Z)("Open article")))})),n.push("</ul>")),m.length&&(n.push(`<h2>${(0,ue.Z)("Attachments")}</h2><ul>`),m.forEach((e=>{n.push(Et(e,""))})),n.push("</ul>"));const p=e.related.filter(s);p.length&&(n.push(`<h2>${(0,ue.Z)("Related content")}</h2><ul>`),p.forEach((e=>{n.push(Et(e,""))})),n.push("</ul>"));const g=e.via.filter(s);g.length&&(n.push(`<h2>${(0,ue.Z)("Sources")}</h2><ul>`),g.forEach((e=>{n.push(Et(e,""))})),n.push("</ul>"));const b=e.comments.filter(s);b.length&&(n.push(`<h2>${(0,ue.Z)("Comments")}</h2><ul>`),b.forEach((e=>{n.push(Et(e,""))})),n.push("</ul>"));const N=e.serviceedit.filter(s);return N.length&&(n.push(`<h2>${(0,ue.Z)("Edit blog post")}</h2><ul>`),N.forEach((e=>{n.push(Et(e,""))})),n.push("</ul>")),n.push("</nav>"),(l.length||c.length||u.length)&&(c.length&&(n.push(`<section><h2>${(0,ue.Z)("Linked videos")}</h2>`),c.forEach((e=>{e.mimeType===Nt?n.push(function({url:e}){return Ct(Ne(e))}(e)):n.push((e=>Ct(`<video controls src="${vt(e.url)}"></video>`,e.title))(e))})),n.push("</section>")),u.length&&(n.push(`<section><h2>${(0,ue.Z)("Linked audio")}</h2>`),u.forEach((e=>{n.push((e=>Ct(`<audio controls src="${vt(e.url)}"></audio>`,e.title))(e))})),n.push("</section>")),l.length&&(n.push(`<section><h2>${(0,ue.Z)("Linked images")}</h2>`),l.forEach((e=>{n.push((e=>{const t=e.title?` alt="${vt(e.title)}"`:"";return Ct(`<img src="${vt(e.url)}"${t}>`,e.title)})(e))})),n.push("</section>"))),n.join("")};var yt=n(91113),St=n(2324);const Tt=async function(e){return await St.Z.deletedFeedItems.where("path").equals(e).toArray()};const kt=async function(e){return await St.Z.searchList.where("messageId").anyOf(e).toArray()};var It=n(93506),At=n(30983),Zt=n(65531),Pt=n(44025),Dt=n(34155);async function Mt(e,t){if(!await nt.Z.get(he.u4,t)){const n={name:e,accountId:he.u4,path:t,filterValue:{include:[[{accountId:he.u4},{path:t}]],exclude:pt.Z.getSearchListButtonExcludeRules(he.u4),...pt.Z.getSearchListButtons(he.u4)}};await K.Z.addFilter(n,!1)}}function Ot(e,t){const n=t.length,s=ht.Z.adjustBatchSize.bind(void 0,10,100,500);let i,r=10,a=0;return new Promise(((o,l)=>{Dt.nextTick((function l(){const c=t.slice(a,a+r);a+=r,a>n&&(a=n);const u=Date.now();if(0===c.length)return void o(i);return async function(e,t){const n=t.map((e=>e.messageId)),s=await kt(n),i=await Tt(e),r=new Set;for(const e of s)r.add(e.messageId);for(const e of i)r.add(e.messageId);const a=t.filter((e=>!r.has(e.messageId)));if(0===a.length)return;const o=await(0,yt.Z)(he.u4,e,he.Oi,a);K.Z.updateIndex({addedSles:o});for(const e of a){const t=o.find((t=>t.messageId===e.messageId)),n=ft(e.raw);b.Z.mailPrivate.addMessageBody(t.id,(0,At.H)(n),(e=>{e||console.warn("Failed to add body to FTS db",t.id)})),await(0,It.Z)(he.u4,e.sentDate,t.id,e.raw)}return o[0]}(e,c).then((t=>{t&&!i?i=t:t&&X.Z.setStatus((0,ue.Z)("Loading feed $1: $2/$3",[e,a,n]));const o=Date.now();r=s(r,o-u)})).then((()=>Dt.nextTick(l)))}))}))}function xt(e,t){return e.id+(t.pubDate?e.publishdate:e.updatedate)+e.links.alternate.map((e=>e.url)).join(" | ")}function Lt(e){const t=e.url,n=new Te,s=new XMLHttpRequest,i=new Promise(((e,i)=>{s.overrideMimeType("text/xml"),s.open("GET",t,!0),s.onload=function(){if(s.status>=400)return;let r=s.responseURL;r.match(/^(https?|ftp|file):/i)||(r=t);try{const t=n.parseFeed(s.responseXML,s.responseText,r);"string"==typeof t?i(t):e(t)}catch(e){i(e)}},s.onreadystatechange=()=>{s.status>=400&&i(s.status)},s.onerror=s.onabort=function(e){i(e)},s.send()})),r=A.ZP.get(P.kRssSettings);return i.then((n=>{const s=r.findIndex((t=>t.url===e.url));if(-1===s)return Promise.reject("Feed deleted");const i=r[s],a={pubDate:!1};t.match(/^https?:\/\/(\w+\.)?youtube\.com\//i)&&(a.pubDate=!0);const o=n.plaintitle;i.title||(i.title=o),i.path||(i.path=e.url);const l=n.feeditems.map((t=>{return{accountId:he.u4,path:e.url,subject:t.plaintitle,raw:t.xmloriginal,sentDate:ut(t.updatedate).getTime()||0,messageId:lt()(xt(t,a)),from:[{name:o,address:o}],replyTo:(s=t.people.author.concat(t.people.contributor,n.people.author,n.people.managingeditor,n.people.webmaster),s.filter((e=>e.email)).map((e=>({name:e.name?e.name:e.email,address:e.email})))),to:[],cc:[],flags:[]};var s}));return async function(e,t,n){const s=n.length;await Mt(e,t);const i=await Ot(t,n);if(!i)return;const r=()=>{const e=["message",i.id].join("/"),t=Pt.jk.internalUrl("mailpage",e,i.subject);$.Z.openURL(t);const n=h.Z.extension.getViews().find((e=>e.isMailWindow));n&&h.Z.windows.update(n.vivaldiWindowId,{drawAttention:!0})};if(A.ZP.get(P.kRssShowNotifications)){const e=(0,ue.Z)("New Feed from $2","New Feeds from $2",[s,t]);(0,Zt.c)({title:i.subject,body:e,icon:"resources/mail_notification_icon.png",onClick:r})}X.Z.setStatus((0,ue.Z)("Finished loading feed $2. $1 message loaded","Finished loading feed $2. $1 messages loaded",[s,t]),he.QM),me.Z.filter()}(i.title,i.path,l).then((()=>{i&&(i.lastChecked=(new Date).valueOf(),rt.edit(i,s))}))})).catch((n=>{n instanceof Error?at.ZP.error("Mail",["feeds","parsing"],(0,ue.Z)("Encountered an error when parsing feed $1",[t]),n):at.ZP.warn("Mail",["feeds","loading"],(0,ue.Z)("Failed to load feed $1",[t]),n),Mt(e.title,e.path)}))}let Rt;async function Bt(e){const t=(new Date).valueOf(),n=e.filter((e=>{const{refreshInterval:n,lastChecked:s=0,offline:i}=e;return t>=6e4*n+s&&!i}));for(const e of n)await Lt(e)}function Ft(){Bt(A.ZP.get(P.kRssSettings).map((e=>({...e,lastChecked:0}))))}function Ut(){if(!re.ZP.getIsMailWindow()||A.ZP.get(P.kMailIsTurnedOff))return;0!==A.ZP.get(P.kRssSettings).length&&(Ft(),void 0!==Rt&&(console.warn("RSSStartup: Did not expect an existing polling interval ID"),clearInterval(Rt)),Rt=setInterval((()=>Bt(A.ZP.get(P.kRssSettings))),6e4))}function Vt(){clearInterval(Rt),Rt=void 0}var Ht=n(55039);const Wt=new BroadcastChannel("actions");function zt(){const e=A.ZP.get(P.kMailCheckInterval);"one_minute"===e?(te.Z.setCheckInterval(!0,1),le.setCheckInterval(!0,1)):"fifteen_minutes"===e?(te.Z.setCheckInterval(!0,15),le.setCheckInterval(!0,15)):(te.Z.setCheckInterval(!1),le.setCheckInterval(!1))}function Gt(){K.Z.sortListEntries()}function Kt(e){K.Z.sortListEntries("threads"===e)}async function jt(){ee.Z.startBackgroundActions();const e=A.ZP.get(P.kMailAccounts),t=A.ZP.get(P.kRssSettings);if(0===e.length&&0===t.length)return;console.time("Mail Startup time"),X.Z.setPersistentStatus("MAIL_STARTUP",(0,ue.Z)("Mail client starting...")),A.ZP.addListener(P.kMailSearchSortOrder,Gt),A.ZP.addListener(P.kMailSearchSortField,Kt),A.ZP.addListener(P.kMailCheckInterval,zt),Wt.addEventListener("message",J,!1),window.addEventListener("online",Xt,!1),window.addEventListener("offline",Qt,!1);try{await K.Z.start(),await ee.Z.start(),await(0,Ht.y)()}catch(e){return console.error(e),Yt(),void X.Z.setStatus((0,ue.Z)("Mail client startup failed. Error: $1",[e.message||e]))}finally{X.Z.clearPersistentStatus("MAIL_STARTUP")}const n=d.Z.getSync("FOLDER_SELECTION");K.Z.selectFolder(n),me.Z.filter(),ee.Z.updateFlags(),de.Z.sendAll(!1),te.Z.connectIMAPClients(),le.checkForMail(),ee.Z.flushBuffer(),zt(),ee.Z.updateThreads(),j.Z.initializeContactStore(),console.timeEnd("Mail Startup time"),X.Z.setStatus((0,ue.Z)("Mail client started"),he.QM)}async function Yt(){ne.Z.closeMailPages(),ee.Z.stopBackgroundActions(),A.ZP.removeListener(P.kMailSearchSortOrder,Gt),A.ZP.removeListener(P.kMailSearchSortField,Kt),A.ZP.removeListener(P.kMailCheckInterval,zt),Wt.removeEventListener("message",J,!1),window.removeEventListener("online",Xt,!1),window.removeEventListener("offline",Qt,!1),te.Z.setCheckInterval(!1),le.setCheckInterval(!1),await te.Z.disconnectIMAPClients(),K.Z.stop(),ee.Z.stop()}const $t={start:async function(){re.ZP.getIsMailWindow()&&!A.ZP.get(P.kMailIsTurnedOff)&&(await jt(),Ut()),h.Z.runtime.onMessage.addListener((async e=>{e&&(e.changedMailClientWindow&&e.windowId===window.vivaldiWindowId?(ie.Z.setMailWindow(),A.ZP.get(P.kMailIsTurnedOff)||(await jt(),Ut())):e.addFeed&&e.feeds?se.Z.showAddFeed(e.feeds):re.ZP.getIsMailWindow()&&e.refreshRSS&&Ft())})),A.ZP.addListener(P.kMailIsTurnedOff,(async()=>{A.ZP.get(P.kMailIsTurnedOff)?(Vt(),await Yt()):re.ZP.getIsMailWindow()&&(await jt(),Ut())})),A.ZP.addListener([P.kMailAccounts,P.kRssSettings],(async(e,t,n)=>{const s=A.ZP.get(P.kMailAccounts),i=A.ZP.get(P.kRssSettings);if(1===e.length&&0===t.length&&0===s.length&&0===i.length?(ee.Z.flushBuffer(),await Yt()):0!==e.length||1!==t.length||0!==s.length&&0!==i.length||re.ZP.getIsMailWindow()&&(ee.Z.stopBackgroundActions(),await jt()),n===P.kRssSettings)if(1===e.length&&0===t.length)Vt();else if(0===e.length&&1===t.length)Ut();else if(e.length<t.length){Bt(t.filter((t=>!e.some((e=>e.url===t.url)))))}}))}};async function Xt(e){await Promise.all([te.Z.connectIMAPClients,le.checkForMail]),ee.Z.flushBuffer()}function Qt(e){te.Z.disconnectIMAPClients()}const qt=$t;var Jt=n(53816),en=n(67776),tn=n(61858),nn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksfoldersflatlist.jsx";function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(){return tn.ZP.hasBeenInitialized()?{nodes:tn.ZP.getFoldersWithin(tn.ZP.getTopNodes(),0),bookmarksBarFolderId:tn.ZP.getBookmarkBarFolderId()}:{nodes:null,bookmarksBarFolderId:void 0}}class an extends s.Component{constructor(...e){super(...e),sn(this,"state",rn()),sn(this,"_onStoreChange",(()=>{this.setState(rn())})),sn(this,"getFolderId",(e=>{if(this.props.selectedItemID){const t=e.find((e=>e.id===this.props.selectedItemID));if(t)return t.id;console.warn("Bookmark folder not found")}return this.state.bookmarksBarFolderId}))}UNSAFE_componentWillMount(){tn.ZP.addChangeListener(this._onStoreChange)}componentWillUnmount(){tn.ZP.removeChangeListener(this._onStoreChange)}render(){if(!this.state.nodes)return null;const e=this.getFolderId(this.state.nodes),t=this.state.nodes.find((t=>t.id===e))?.title||tn.Ei,n=this.state.nodes.map((e=>s.createElement("option",{key:"dir_"+e.id,value:e.id,__source:{fileName:nn,lineNumber:54,columnNumber:7}}," ".repeat(3*e.level),e.title)));return s.createElement("span",{className:"bookmark-folder-picker",__source:{fileName:nn,lineNumber:61,columnNumber:7}},s.createElement("input",{type:"text",value:t,tabIndex:"-1",readOnly:!0,__source:{fileName:nn,lineNumber:62,columnNumber:9}}),s.createElement("select",{className:"bookmark-folders",value:e,onChange:this.props.onChange,__source:{fileName:nn,lineNumber:63,columnNumber:9}},n))}}const on=an;var ln=n(52152),cn=n(85612),un="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\BookmarkDialog.jsx";function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class dn extends s.PureComponent{constructor(...e){super(...e),mn(this,"state",{title:"",url:"",description:"",nickname:"",thumbnail:"",isFolder:!1,parentId:""}),mn(this,"_parentId",""),mn(this,"_index",0),mn(this,"onCancel",(()=>{this.props.onClose()})),mn(this,"onSave",(()=>{if("edit"===this.props.mode){const e=this.props.id,t=en.ZP.verifyForUpdate({title:this.state.title,url:this.state.url,thumbnail:this.state.thumbnail,nickname:this.state.nickname,description:this.state.description},this.state.isFolder),n=tn.ZP.getItemById(e);n&&n.parentId!==this.state.parentId?i.Z.move([n.id],this.state.parentId,0).then((()=>{h.Z.bookmarks.update(e,t).then((()=>this.props.onClose()))})):h.Z.bookmarks.update(e,t).then((()=>this.props.onClose()))}else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){const e=en.ZP.verifyForCreate({parentId:this.state.parentId,index:this.state.parentId===this._parentId?this._index:0,title:this.state.title,url:this.state.url,nickname:this.state.nickname,description:this.state.description},this.state.isFolder);h.Z.bookmarks.create(e).then((()=>this.props.onClose()))}else this.props.onClose()})),mn(this,"changeValue",((e,t)=>{const n={};n[e]=t.target.value,this.setState(n)}))}componentWillMount(){const e=tn.ZP.getItemById(this.props.id);if("edit"===this.props.mode)e&&this.setState({title:e.title,url:e.url,thumbnail:e.thumbnail,description:e.description,nickname:e.nickname,isFolder:tn.ZP.isFolder(e),parentId:e.parentId});else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){e&&tn.ZP.isFolder(e)?(this._parentId=e.id,this._index=0):(this._parentId=e.parentId,this._index=e.index+1);const t={};if("addbookmark"===this.props.mode){const e=V.ZP.unsafeGetActivePage();e&&(t.title=e.title,t.url=e.url,t.thumbnail=e.getIn(["extData","thumbnail"]))}t.isFolder="addfolder"===this.props.mode,t.parentId=this._parentId,this.setState(t)}}render(){let e;switch(this.props.mode){case"edit":e=this.state.isFolder?(0,ue.Z)("Edit Folder"):(0,ue.Z)("Edit Bookmark");break;case"addbookmark":e=(0,ue.Z)("New Bookmark");break;case"addfolder":e=(0,ue.Z)("title","New Folder")}if(void 0===e)return null;const t=this.state.isFolder?(0,ue.Z)("Folder Name"):(0,ue.Z)("Bookmark Name");return s.createElement(ln.Z,{onRequestClose:this.onCancel,__source:{fileName:un,lineNumber:160,columnNumber:7}},s.createElement("div",{className:"edit-bookmark",__source:{fileName:un,lineNumber:161,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:un,lineNumber:162,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:un,lineNumber:163,columnNumber:13}},e)),s.createElement("form",{onSubmit:this.onSave,__source:{fileName:un,lineNumber:165,columnNumber:11}},false,s.createElement("div",{className:"dialog-content",__source:{fileName:un,lineNumber:181,columnNumber:15}},s.createElement("input",{className:"title",type:"text",value:this.state.title,onChange:this.changeValue.bind(this,"title"),title:t,placeholder:t,autoFocus:!0,__source:{fileName:un,lineNumber:182,columnNumber:17}}),!1===this.state.isFolder&&s.createElement("input",{className:"address",type:"text",value:this.state.url,onChange:this.changeValue.bind(this,"url"),title:(0,ue.Z)("Address"),placeholder:(0,ue.Z)("Address"),__source:{fileName:un,lineNumber:193,columnNumber:17}}),void 0!==this.state.parentId&&s.createElement(on,{selectedItemID:this.state.parentId,title:(0,ue.Z)("Folder"),onChange:this.changeValue.bind(this,"parentId"),__source:{fileName:un,lineNumber:204,columnNumber:17}}),!1===this.state.isFolder&&s.createElement("input",{className:"nickname",type:"text",value:this.state.nickname,onChange:this.changeValue.bind(this,"nickname"),title:(0,ue.Z)("Nickname"),placeholder:(0,ue.Z)("Nickname"),__source:{fileName:un,lineNumber:212,columnNumber:17}}),!1===this.state.isFolder&&s.createElement("textarea",{className:"description",type:"text",value:this.state.description,onChange:this.changeValue.bind(this,"description"),title:(0,ue.Z)("Description"),placeholder:(0,ue.Z)("Description"),__source:{fileName:un,lineNumber:223,columnNumber:17}})),s.createElement("footer",{className:"dialog-footer",__source:{fileName:un,lineNumber:235,columnNumber:13}},s.createElement("input",{type:"submit",className:"primary",value:(0,ue.Z)("Save"),__source:{fileName:un,lineNumber:236,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:un,lineNumber:239,columnNumber:15}})))))}}const hn=dn;var pn=n(73935),gn=n(94184),bn=n.n(gn);const Nn={kNone:-1,kLeft:0,kCenter:1,kRight:2,kBack:3,kForward:4,isContextMenuButton:e=>2===e,isNavigationButton:e=>3===e||4===e,isNoModifierPressed:e=>!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey),setWebviewPointerEvents:(e,t)=>{const n=e?"":"none";for(const e of t.getElementsByTagName("WEBVIEW"))e.style.pointerEvents=n}};function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _n extends s.PureComponent{constructor(...e){super(...e),fn(this,"_reportSize",(()=>{const e=pn.findDOMNode(this.refs.button);e instanceof HTMLElement&&this.props.onRendered(e.offsetWidth,e.offsetHeight)})),fn(this,"_handleKeyDown",(e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id,"Enter"===e.key,!0);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()})),fn(this,"_handleMouseDown",(e=>{e.preventDefault()})),fn(this,"_handleItemMouseUp",(e=>{e.button===Nn.kCenter&&e.preventDefault()})),fn(this,"_handleClick",(e=>{this.props.onItemActivated(this.props.id,!0,!0,e),e.preventDefault(),e.stopPropagation()})),fn(this,"_handleBlur",(()=>{this.props.onItemBlur(this.props.id)})),fn(this,"_handleFocus",(()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)})),fn(this,"_handleMouseEnter",(e=>{this.props.onItemEnter(this.props.id)})),fn(this,"_handleMouseLeave",(e=>{this.props.onItemLeave(this.props.id)}))}componentDidMount(){this._reportSize()}componentDidUpdate(){this._reportSize()}render(){return s.createElement("button",{ref:"button",className:bn()({bookmarkbarItem:!0,chevron:!0,highlighted:this.props.highlighted}),"data-id":this.props.id,"data-offset":this.props.offset,tabIndex:this.props.keyAccess,title:(0,ue.Z)("More bookmarks"),dangerouslySetInnerHTML:{__html:cn.zwh},onKeyDown:this._handleKeyDown,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseUp:this._handleItemMouseUp,onBlur:this._handleBlur,onFocus:this._handleFocus,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\BookmarkBarExtender.jsx",lineNumber:116,columnNumber:7}})}}const vn=_n;var En=n(60500),Cn=n(62077),wn=n(72536),yn=n(86635),Sn=n(68551),Tn=n(13253),kn=n(89661),In=n(34155);let An=!1;const Zn={show:function(e,t,n,s,i,r,a){const o=function(e){a(e)},l=function(){In.nextTick((()=>{a("")}))};An||(An=!0,function(e,t){return new Promise((e=>{b.Z.zoom.getVivaldiUIZoom((n=>{t.forEach((e=>{e.rect.x=parseInt((e.rect.x+1)*n),e.rect.y=parseInt((e.rect.y+0)*n),e.rect.width=parseInt(e.rect.width*n),e.rect.height=parseInt(e.rect.height*n)})),e()}))}))}(0,n).then((()=>{b.Z.menubarMenu.onOpenBookmark.addListener(En.Z.onOpen),b.Z.menubarMenu.onBookmarkAction.addListener(En.Z.onAction),b.Z.menubarMenu.onHover.addListener(En.Z.onHover),b.Z.bookmarkContextMenu.onOpen.addListener(o),b.Z.bookmarkContextMenu.onClose.addListener(l),b.Z.bookmarkContextMenu.show({windowId:e.vivaldiWindowId,id:t,siblings:n,sortField:s,sortOrder:i,edge:F.Z.getBookmarkExtrasEdge(),icons:[G.Z,yn.Z,Sn.Z,Tn.Z,kn.Z,Cn.Z,wn.Z]},(()=>{An=!1,En.Z.onHover(""),b.Z.menubarMenu.onOpenBookmark.removeListener(En.Z.onOpen),b.Z.menubarMenu.onBookmarkAction.removeListener(En.Z.onAction),b.Z.menubarMenu.onHover.addListener(En.Z.onHover),b.Z.bookmarkContextMenu.onOpen.removeListener(o),b.Z.bookmarkContextMenu.onClose.removeListener(l)}))})))}},Pn=Zn;var Dn=n(82535),Mn=n(8547);const On=new Map;function xn(e,t){const n=W.ZP.getId(),s=Dn.Z.getDefault(e);if(t&&On.has(n)){return Dn.Z.getById(On.get(n))||s}return s}const Ln={settingsState:{linkurl:"",linktitle:"",pageurl:"",pagetitle:"",srcurl:"",selection:"",printableselection:"",selectionurl:"",keywordurl:"",isdevtools:!1,iseditable:!1,isimage:!1,isframe:!1,ismailcontent:!1,iswebpanel:!1,ismailto:!1,support:{copy:!1,audio:!1,canvas:!1,editoptions:!1,emoji:!1,extensions:!1,pictureinpicture:!1,password:!1,passwordgeneration:!1,passwordshowall:!1,paste:!1,plugin:!1,qrcode:!1,sendlinktodevices:!1,sendpagetodevices:!1,video:!1},textfield:"document"},getLabelWithParameter:function(e,t,n){switch(e.action){case"DOCUMENT_LOOK_UP":if(e.title){const s=e.title;return delete e.title,{...n?z.Z.makeLabelPair(s):z.Z.makeLabelPair(s.replace("$1",t))}}return{...n?(0,Mn.Z)("Look Up “$1”"):(0,Mn.Z)("Look Up “$1”",[t])};case"DOCUMENT_GOTO_URL":if(e.title){const s=e.title;return delete e.title,{...n?z.Z.makeLabelPair(s):z.Z.makeLabelPair(s.replace("$1",t))}}return{...n?(0,Mn.Z)("Go to “$1”"):(0,Mn.Z)("Go to “$1”",[t])};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const s="DOCUMENT_SEARCH_LAST_USED"===e.action,i=W.ZP.getId(),r=xn(W.ZP.isIncognito(i),s);if(e.title){const s=e.title;return delete e.title,{...n?z.Z.makeLabelPair(s):z.Z.makeLabelPair(s.replace("$1",r.name).replace("$2",t))}}return n?s?{...(0,Mn.Z)("Search $1 for “$2” (With Last Used Engine)")}:{...(0,Mn.Z)("Search $1 for “$2”")}:{...(0,Mn.Z)("Search $1 for “$2”",[r.name,t])}}default:return z.Z.makeLabelPair("")}},setSearchEngine:function(e){const t=W.ZP.getId();-1!==t&&On.set(t,e.id)},getSearchEngine:xn,getShortcuts:function(e){return F.Z.getMenuItem({id:"",type:"command",action:e},!0).shortcuts||[]}};const Rn={actions:function(){return["DOCUMENT_CONTAINER_DEVELOPER_TOOLS","DOCUMENT_VALIDATE_URL","DOCUMENT_VIEW_SOURCE","DOCUMENT_VIEW_FRAME_SOURCE","DOCUMENT_RELOAD_FRAME","DOCUMENT_INSPECT"]},options:function(e,t){const n=void 0===t,s=t||Ln.settingsState,i={...z.Z.commandItem};switch(e.action){case"DOCUMENT_CONTAINER_DEVELOPER_TOOLS":return i.settingsLabel=(0,ue.Z)("[Developer Tools]"),i.type="container",{...i,...(0,Mn.Z)("Developer Tools")};case"DOCUMENT_VALIDATE_URL":return{...i,...(0,Mn.Z)("Validate")};case"DOCUMENT_VIEW_SOURCE":{const e=Ln.getShortcuts("COMMAND_TAB_VIEW_PAGE_SOURCE");return{...i,shortcuts:s.iswebpanel?[]:e,...s.iswebpanel?(0,Mn.Z)("View Panel Source"):(0,Mn.Z)("View Page Source")}}case"DOCUMENT_VIEW_FRAME_SOURCE":return{...i,...(0,Mn.Z)("View Frame Source")};case"DOCUMENT_RELOAD_FRAME":return{...i,...(0,Mn.Z)("Reload Frame")};case"DOCUMENT_INSPECT":{const e=Ln.getShortcuts("COMMAND_DEVELOPER_TOOLS");return{...i,shortcuts:s.iswebpanel?[]:e,...(0,Mn.Z)("Inspect")}}default:return F.Z.getMenuItem(e,n)}}};const Bn={actions:function(){return["DOCUMENT_CONTAINER_AV","DOCUMENT_CONTAINER_EXTENSIONS"].concat(Rn.actions())},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"DOCUMENT_CONTAINER_AV":return s.settingsLabel=(0,ue.Z)("[Media Controls]"),s.type="container",{...s,...(0,Mn.Z)("Media Controls")};case"DOCUMENT_CONTAINER_EXTENSIONS":return s.settingsLabel=(0,ue.Z)("[Extensions]"),s.type="container",{...s,...(0,Mn.Z)("Extensions")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const Fn={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_CONTAINER_OPEN_IN_WINDOW","CONTEXT_BOOKMARK","CONTEXT_NEW_BOOKMARK","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...s,...(0,Mn.Z)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...s,...(0,Mn.Z)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...s,...(0,Mn.Z)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...s,...(0,Mn.Z)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...s,...(0,Mn.Z)("Open in Private Window")};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":return s.settingsLabel=(0,ue.Z)("[Open in Another Window]"),s.type="container",{...s,...(0,Mn.Z)("Open in Another Window")};case"CONTEXT_BOOKMARK":return{...s,...(0,Mn.Z)("Add Active Tab")};case"CONTEXT_NEW_BOOKMARK":return{...s,...(0,Mn.Z)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...s,...(0,Mn.Z)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...s,...(0,Mn.Z)("New Separator")};case"CONTEXT_EDIT":return{...s,...(0,Mn.Z)("command","Edit")};case"CONTEXT_RENAME":return{...s,...(0,Mn.Z)("Rename")};case"CONTEXT_CUT":return{...s,...(0,Mn.Z)("win_linux","Cut")};case"CONTEXT_COPY":return{...s,...(0,Mn.Z)("win_linux","Copy")};case"CONTEXT_PASTE":return{...s,...(0,Mn.Z)("win_linux","Paste")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("other","Delete")};default:return F.Z.getMenuItem(e,n)}}};const Un={actions:function(){return["CONTEXT_BOOKMARK","CONTEXT_NEW_BOOKMARK","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_PASTE","CONTEXT_CONTAINER_SORT"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_BOOKMARK":return{...s,...(0,Mn.Z)("Add Active Tab")};case"CONTEXT_NEW_BOOKMARK":return{...s,...(0,Mn.Z)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...s,...(0,Mn.Z)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...s,...(0,Mn.Z)("New Separator")};case"CONTEXT_PASTE":return{...s,...(0,Mn.Z)("win_linux","Paste")};case"CONTEXT_CONTAINER_SORT":return s.settingsLabel=(0,ue.Z)("[Sort Options]"),s.type="container",{...s,...(0,Mn.Z)("Sort")};default:return F.Z.getMenuItem(e,n)}}};const Vn={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_CONTAINER_OPEN_IN_WINDOW","CONTEXT_SET_SPEEDDIAL","CONTEXT_UNSET_SPEEDDIAL","CONTEXT_SET_BOOKMARK_BAR","CONTEXT_UNSET_BOOKMARK_BAR","CONTEXT_MOVE_TO_BOOKMARK_BAR","CONTEXT_BOOKMARK","CONTEXT_BOOKMARK_ALL","CONTEXT_NEW_ITEM","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","CONTEXT_IMPORT","CONTEXT_SETTINGS","CONTEXT_CONTAINER_SEARCH"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...s,...(0,Mn.Z)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...s,...(0,Mn.Z)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...s,...(0,Mn.Z)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...s,...(0,Mn.Z)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...s,...(0,Mn.Z)("Open in Private Window")};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":return s.settingsLabel=(0,ue.Z)("[Open in Another Window]"),s.type="container",{...s,...(0,Mn.Z)("Open in Another Window")};case"CONTEXT_SET_SPEEDDIAL":return{...s,...(0,Mn.Z)("Use as Speed Dial")};case"CONTEXT_UNSET_SPEEDDIAL":return{...s,...(0,Mn.Z)("Remove from Speed Dial")};case"CONTEXT_SET_BOOKMARK_BAR":return{...s,...(0,Mn.Z)("Set as Bookmark Bar Folder")};case"CONTEXT_UNSET_BOOKMARK_BAR":return{...s,...(0,Mn.Z)("Remove as Bookmark Bar Folder")};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{...s,...(0,Mn.Z)("Move to Bookmark Bar Folder")};case"CONTEXT_BOOKMARK":return{...s,...(0,Mn.Z)("Bookmark Active Page")};case"CONTEXT_BOOKMARK_ALL":return{...s,...(0,Mn.Z)("Bookmark All Open Pages")};case"CONTEXT_NEW_ITEM":return{...s,...(0,Mn.Z)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...s,...(0,Mn.Z)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...s,...(0,Mn.Z)("New Separator")};case"CONTEXT_RENAME":return{...s,...(0,Mn.Z)("Rename")};case"CONTEXT_CUT":return{...s,...(0,Mn.Z)("verb","Cut")};case"CONTEXT_COPY":return{...s,...(0,Mn.Z)("verb","Copy")};case"CONTEXT_PASTE":return{...s,...(0,Mn.Z)("verb","Paste")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("verb","Delete")};case"CONTEXT_EMPTY_TRASH":return{...s,...(0,Mn.Z)("Empty Trash")};case"CONTEXT_EXPAND_ALL":return{...s,...(0,Mn.Z)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...s,...(0,Mn.Z)("Collapse All Folders")};case"CONTEXT_IMPORT":return s.ellipsis=!0,{...s,...(0,Mn.Z)("Import Bookmarks")};case"CONTEXT_SETTINGS":return s.type="folder",{...s,...(0,Mn.Z)("Settings")};case"CONTEXT_CONTAINER_SEARCH":return s.settingsLabel=(0,ue.Z)("[Search Settings]"),s.type="container",{...s,...(0,Mn.Z)("command","Search")};default:return F.Z.getMenuItem(e,n)}}};const Hn={actions:function(){return["CONTEXT_CONTAINER_CLOSED_TAB"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};return"CONTEXT_CONTAINER_CLOSED_TAB"===e.action?(s.settingsLabel=(0,ue.Z)("[All Closed Tabs]"),s.type="container",{...s,...(0,Mn.Z)("Closed Tabs")}):F.Z.getMenuItem(e,n)}};const Wn={actions:function(){return["CONTEXT_COMPOSE_MAIL","CONTEXT_VIEW_ALL_MESSAGES","CONTEXT_NEW_ITEM","CONTEXT_EDIT","CONTEXT_DELETE","CONTEXT_CONTAINER_DEFAULT_ACTION"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_COMPOSE_MAIL":return{...s,...(0,Mn.Z)("Compose Mail")};case"CONTEXT_VIEW_ALL_MESSAGES":return{...s,...(0,Mn.Z)("View All Messages")};case"CONTEXT_NEW_ITEM":return{...s,...(0,Mn.Z)("New Contact")};case"CONTEXT_EDIT":return{...s,...(0,Mn.Z)("command","Edit")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("verb","Delete")};case"CONTEXT_CONTAINER_DEFAULT_ACTION":return s.settingsLabel=(0,ue.Z)("[Default Action]"),s.type="container",{...s,...(0,Mn.Z)("Default Action")};default:return F.Z.getMenuItem(e,n)}}};const zn={actions:function(){return["DOCUMENT_SUGGEST_PASSWORD","DOCUMENT_SHOW_PASSWORDS","DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","DOCUMENT_PASTE_AS_PLAIN_TEXT","DOCUMENT_SELECT_ALL","DOCUMENT_ADD_AS_SEARCH_ENGINE","COMMAND_COPY_SELECTION_TO_NOTE","DOCUMENT_GOTO_URL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_SEARCH","DOCUMENT_SEARCH_LAST_USED","DOCUMENT_CONTAINER_SEARCH_WITH","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CONTAINER_SPEECH"].concat(Rn.actions())},options:function(e,t){const n=void 0===t,s=t||Ln.settingsState,i={...z.Z.commandItem};switch(e.action){case"DOCUMENT_SUGGEST_PASSWORD":return i.ellipsis=!0,{...i,...(0,Mn.Z)("Suggest Password")};case"DOCUMENT_SHOW_PASSWORDS":return i.ellipsis=!0,{...i,...(0,Mn.Z)("Show all Saved Passwords")};case"DOCUMENT_LOOK_UP":case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":return{...i,...Ln.getLabelWithParameter(e,s.printableselection,n)};case"DOCUMENT_EMOJI":return{...i,...(0,Mn.Z)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...i,shortcuts:["ctrl+z"],...(0,Mn.Z)("win_linux","Undo")};case"DOCUMENT_REDO":return{...i,shortcuts:["ctrl+y"],...(0,Mn.Z)("win_linux","Redo")};case"DOCUMENT_CUT":return{...i,shortcuts:["ctrl+x"],...(0,Mn.Z)("win_linux","Cut")};case"DOCUMENT_COPY":return{...i,shortcuts:["ctrl+c"],...(0,Mn.Z)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...i,shortcuts:["ctrl+v"],...(0,Mn.Z)("win_linux","Paste")};case"DOCUMENT_PASTE_AS_PLAIN_TEXT":{const e=Ln.getShortcuts("COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT");return{...i,shortcuts:e,...(0,Mn.Z)("win_linux","Paste as Plain Text")}}case"DOCUMENT_SELECT_ALL":return{...i,shortcuts:["ctrl+a"],...(0,Mn.Z)("win_linux","Select All")};case"DOCUMENT_GOTO_URL":return{...i,...Ln.getLabelWithParameter(e,s.selectionurl,n)};case"DOCUMENT_ADD_AS_SEARCH_ENGINE":return i.ellipsis=!0,{...i,...(0,Mn.Z)("Add as Search Engine")};case"COMMAND_COPY_SELECTION_TO_NOTE":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("Copy to Note")};case"DOCUMENT_CONTAINER_NOTES":return i.settingsLabel=(0,ue.Z)("[All notes]"),i.type="container",{...i,...(0,Mn.Z)("Insert Note")};case"DOCUMENT_CONTAINER_SEARCH_WITH":return i.settingsLabel=(0,ue.Z)("[All search engines]"),i.type="container",{...i,...(0,Mn.Z)("Search With")};case"DOCUMENT_CONTAINER_EXTENSIONS":return i.settingsLabel=(0,ue.Z)("[Extensions]"),i.type="container",{...i,...(0,Mn.Z)("Extensions")};case"DOCUMENT_CONTAINER_SPELLCHECK":return i.settingsLabel=(0,ue.Z)("[Spell Check]"),i.type="container",{...i,...(0,Mn.Z)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return i.settingsLabel=(0,ue.Z)("[Spell Check Options]"),i.type="container",{...i,...(0,Mn.Z)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return i.settingsLabel=(0,ue.Z)("[Writing Direction Options]"),i.type="container",{...i,...(0,Mn.Z)("Writing Direction")};case"DOCUMENT_CONTAINER_SPEECH":return i.settingsLabel=(0,ue.Z)("[Speech Commands]"),i.type="container",{...i,...(0,Mn.Z)("Speech")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const Gn={actions:function(){return["CONTEXT_OPEN_FILE","CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_FILEMANAGER","CONTEXT_COPY_ADDRESS","CONTEXT_COPY_PATH","CONTEXT_RESTART","CONTEXT_STOP","CONTEXT_RESUME","CONTEXT_REMOVE","CONTEXT_REMOVE_ALL_FINISHED"]},options:function(e,t){const n=void 0===t,s=t||{numAddresses:1,numFiles:1,numImages:1,hasActive:!1,hasPaused:!1,hasCompleted:!1},i={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_FILE":return{...i,...n||s.numFiles<2?(0,Mn.Z)("the file","Open"):(0,Mn.Z)("Open Files")};case"CONTEXT_OPEN_IN":return i.type="folder",{...i,...n||s.numFiles<2?(0,Mn.Z)("Open Image in"):(0,Mn.Z)("Open Images in")};case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...(0,Mn.Z)("open in","New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...(0,Mn.Z)("Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...(0,Mn.Z)("Current Tab")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...(0,Mn.Z)("open in","New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...(0,Mn.Z)("open in","Private Window")};case"CONTEXT_FILEMANAGER":return{...i,...(0,Mn.Z)("Show in File Manager")};case"CONTEXT_COPY_ADDRESS":return{...i,...n||s.numAddresses<2?(0,Mn.Z)("Copy Download Address"):(0,Mn.Z)("Copy Download Addresses")};case"CONTEXT_COPY_PATH":return{...i,...n||s.numFiles<2?(0,Mn.Z)("Copy Local Path"):(0,Mn.Z)("Copy Local Paths")};case"CONTEXT_RESTART":return{...i,...(0,Mn.Z)("command","Restart")};case"CONTEXT_STOP":return{...i,...(0,Mn.Z)("other","Stop")};case"CONTEXT_RESUME":return{...i,...(0,Mn.Z)("Resume Download")};case"CONTEXT_REMOVE":return{...i,...(0,Mn.Z)("verb","Remove")};case"CONTEXT_REMOVE_ALL_FINISHED":return{...i,...(0,Mn.Z)("Remove All Finished")};default:return F.Z.getMenuItem(e,n)}}};const Kn={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_CONTAINER_OPEN_IN_WINDOW","CONTEXT_FILTER_BY","CONTEXT_COPY","CONTEXT_SAVE","CONTEXT_DELETE","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL"]},options:function(e,t){const n=t||{address:""},s=void 0===t,i={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...(0,Mn.Z)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...(0,Mn.Z)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...(0,Mn.Z)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...(0,Mn.Z)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...(0,Mn.Z)("Open in Private Window")};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":return i.settingsLabel=(0,ue.Z)("[Open in Another Window]"),i.type="container",{...i,...(0,Mn.Z)("Open in Another Window")};case"CONTEXT_FILTER_BY":return i.settingsLabel=(0,ue.Z)("Filter by Address"),{...i,...s?(0,Mn.Z)("Filter by Address"):(0,Mn.Z)("Filter by “$1”",[n.address])};case"CONTEXT_COPY":return{...i,...(0,Mn.Z)("Copy Address")};case"CONTEXT_SAVE":return{...i,...(0,Mn.Z)("Save as Bookmarks")};case"CONTEXT_DELETE":return{...i,...(0,Mn.Z)("verb","Delete")};case"CONTEXT_EXPAND_ALL":return{...i,...(0,Mn.Z)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...i,...(0,Mn.Z)("Collapse All Folders")};default:return F.Z.getMenuItem(e,s)}}};const jn={actions:function(){return["DOCUMENT_OPEN_IMAGE_IN_NEW_TAB","DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB","DOCUMENT_OPEN_IMAGE_IN_TAB","DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW","DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW","DOCUMENT_SAVE_IMAGE","DOCUMENT_COPY_IMAGE","DOCUMENT_COPY_IMAGE_ADDRESS","DOCUMENT_SHOW_IMAGE_PROPERTIES","DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND","DOCUMENT_RELOAD_IMAGE","DOCUMENT_SEARCH_FOR IMAGE","DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE","DOCUMENT_CONTAINER_EXTENSIONS"].concat(Rn.actions())},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"DOCUMENT_OPEN_IMAGE_IN_NEW_TAB":return{...s,...(0,Mn.Z)("Open Image in New Tab")};case"DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB":return{...s,...(0,Mn.Z)("Open Image in Background Tab")};case"DOCUMENT_OPEN_IMAGE_IN_TAB":return{...s,...(0,Mn.Z)("Open Image")};case"DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW":return{...s,...(0,Mn.Z)("Open Image in New Window")};case"DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW":return{...s,...(0,Mn.Z)("Open Image in Private Window")};case"DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE":return s.settingsLabel=(0,ue.Z)("[Open Image in Another Profile]"),s.type="container",{...s,...(0,Mn.Z)("Open Image in Another Profile")};case"DOCUMENT_SAVE_IMAGE":return s.ellipsis=!0,{...s,...(0,Mn.Z)("Save Image As")};case"DOCUMENT_COPY_IMAGE":return{...s,...(0,Mn.Z)("Copy Image")};case"DOCUMENT_COPY_IMAGE_ADDRESS":return{...s,...(0,Mn.Z)("Copy Image Address")};case"DOCUMENT_SHOW_IMAGE_PROPERTIES":return s.ellipsis=!0,{...s,...(0,Mn.Z)("Image Properties")};case"DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND":return{...s,...(0,Mn.Z)("Use Image as Start Page Background")};case"DOCUMENT_RELOAD_IMAGE":return{...s,...(0,Mn.Z)("Reload Image")};case"DOCUMENT_QR_CODE":return{...s,...(0,Mn.Z)("command","Create QR Code for This Image")};case"DOCUMENT_SEARCH_FOR IMAGE":return{...s,...(0,Mn.Z)("Search for Image")};case"DOCUMENT_CONTAINER_EXTENSIONS":return s.settingsLabel=(0,ue.Z)("[Extensions]"),s.type="container",{...s,...(0,Mn.Z)("Extensions")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const Yn={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_COPY","COMMAND_COPY_SELECTION_TO_NOTE","COMMAND_TRANSLATE_SELECTION","DOCUMENT_PRINT","DOCUMENT_GOTO_URL","DOCUMENT_SEARCH","DOCUMENT_SEARCH_LAST_USED","DOCUMENT_CONTAINER_SEARCH_WITH","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_SEND_BY_MAIL","DOCUMENT_ADD_TO_CALENDAR","DOCUMENT_CONTAINER_SPEECH"].concat(Rn.actions())},options:function(e,t){const n=void 0===t,s=t||Ln.settingsState,i={...z.Z.commandItem};switch(e.action){case"DOCUMENT_LOOK_UP":case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":return{...i,...Ln.getLabelWithParameter(e,s.printableselection,n)};case"DOCUMENT_COPY":return{...i,...(0,Mn.Z)("command","Copy")};case"COMMAND_COPY_SELECTION_TO_NOTE":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("Copy to Note")};case"COMMAND_TRANSLATE_SELECTION":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("Translate Selection")};case"DOCUMENT_PRINT":return i.ellipsis=!0,{...i,...(0,Mn.Z)("command","Print")};case"DOCUMENT_GOTO_URL":return{...i,...Ln.getLabelWithParameter(e,s.selectionurl,n)};case"DOCUMENT_CONTAINER_SEARCH_WITH":return i.settingsLabel=(0,ue.Z)("[All search engines]"),i.type="container",{...i,...(0,Mn.Z)("Search With")};case"DOCUMENT_CONTAINER_EXTENSIONS":return i.settingsLabel=(0,ue.Z)("[Extensions]"),i.type="container",{...i,...(0,Mn.Z)("Extensions")};case"DOCUMENT_SEND_BY_MAIL":return{...i,...(0,Mn.Z)("Send by Mail")};case"DOCUMENT_ADD_TO_CALENDAR":return{...i,...(0,Mn.Z)("Add as Calendar Event")};case"DOCUMENT_CONTAINER_SPEECH":return i.settingsLabel=(0,ue.Z)("[Speech Commands]"),i.type="container",{...i,...(0,Mn.Z)("Speech")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const $n={actions:function(){const e=["DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_DEVELOPER_TOOLS"].concat(Rn.actions());return["DOCUMENT_OPEN_IN_NEW_TAB","DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB","DOCUMENT_OPEN_IN_TAB","DOCUMENT_OPEN_IN_NEW_WINDOW","DOCUMENT_OPEN_IN_PRIVATE_WINDOW","DOCUMENT_ADD_LINK_TO_BOOKMARKS","DOCUMENT_ADD_LINK_TO_WEBPANEL","DOCUMENT_SEND_LINK_BY_MAIL","DOCUMENT_COPY_LINK_ADDRESS","DOCUMENT_COPY_LINK_TEXT","DOCUMENT_CONTAINER_OPEN_IN_PWA","DOCUMENT_CONTAINER_OPEN_IN_PROFILE","DOCUMENT_CONTAINER_SEND_TO_DEVICES","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_LINK_SELECTION","DOCUMENT_CONTAINER_LINKED_IMAGE","DOCUMENT_CONTAINER_OPEN_IN_WINDOW"].concat(Yn.actions().filter((t=>!e.includes(t)))).concat(jn.actions().filter((t=>!e.includes(t)))).concat(Bn.actions().filter((t=>!e.includes(t)))).concat(Rn.actions())},options:function(e,t){const n=void 0===t,s=t||Ln.settingsState,i={...z.Z.commandItem};switch(e.action){case"DOCUMENT_OPEN_IN_NEW_TAB":return{...i,...(0,Mn.Z)("Open Link in New Tab")};case"DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...(0,Mn.Z)("Open Link in Background Tab")};case"DOCUMENT_OPEN_IN_TAB":return{...i,...(0,Mn.Z)("Open Link")};case"DOCUMENT_OPEN_IN_NEW_WINDOW":return{...i,...(0,Mn.Z)("Open Link in New Window")};case"DOCUMENT_OPEN_IN_PRIVATE_WINDOW":return{...i,...(0,Mn.Z)("Open Link in Private Window")};case"DOCUMENT_CONTAINER_OPEN_IN_PWA":return i.settingsLabel=(0,ue.Z)("[Open Link in Progressive Web Apps]"),i.type="container",{...i,...(0,Mn.Z)("Open Link in Progressive Web Apps")};case"DOCUMENT_CONTAINER_OPEN_IN_PROFILE":return i.settingsLabel=(0,ue.Z)("[Open Link in Another Profile]"),i.type="container",{...i,...(0,Mn.Z)("Open Link in Another Profile")};case"DOCUMENT_CONTAINER_OPEN_IN_WINDOW":return i.settingsLabel=(0,ue.Z)("[Open Link in Another Window]"),i.type="container",{...i,...(0,Mn.Z)("Open Link in Another Window")};case"DOCUMENT_ADD_LINK_TO_BOOKMARKS":return{...i,...(0,Mn.Z)("Bookmark Link")};case"DOCUMENT_ADD_LINK_TO_WEBPANEL":return{...i,...(0,Mn.Z)("Add Link to Web Panel")};case"DOCUMENT_SEND_LINK_BY_MAIL":return{...i,...(0,Mn.Z)("Send Link by Mail")};case"DOCUMENT_SAVE_LINK":return i.ellipsis=!0,{...i,...(0,Mn.Z)("Save Link As")};case"DOCUMENT_COPY_LINK_ADDRESS":return{...i,...!n&&s.ismailto?(0,Mn.Z)("Copy Email Address"):(0,Mn.Z)("Copy Link Address")};case"DOCUMENT_COPY_LINK_TEXT":return{...i,...(0,Mn.Z)("Copy Link Text")};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return i.settingsLabel=(0,ue.Z)("[Send Link to Your Devices]"),i.type="container",{...i,...(0,Mn.Z)("Send Link to Your Devices")};case"DOCUMENT_CONTAINER_EXTENSIONS":return i.settingsLabel=(0,ue.Z)("[Extensions]"),i.type="container",{...i,...(0,Mn.Z)("Extensions")};case"DOCUMENT_CONTAINER_LINK_SELECTION":return i.settingsLabel=(0,ue.Z)("[Selection menu]"),i.type="container",{...i,...(0,Mn.Z)("Text Selection")};case"DOCUMENT_CONTAINER_LINKED_IMAGE":return i.settingsLabel=(0,ue.Z)("[Image menu]"),i.type="container",{...i,...(0,Mn.Z)("Image")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):Yn.actions().includes(e.action)?Yn.options(e,t):jn.actions().includes(e.action)?jn.options(e,t):Bn.actions().includes(e.action)?Bn.options(e,t):F.Z.getMenuItem(e,n)}}};const Xn={actions:function(){return["DOCUMENT_MAIL_BACK","DOCUMENT_MAIL_FORWARD","COMMAND_SAVE_PAGE","DOCUMENT_PRINT","COMMAND_TAB_VIEW_PAGE_SOURCE","DOCUMENT_CONTAINER_DEVELOPER_TOOLS","DOCUMENT_INSPECT"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"COMMAND_PAGE_BACK":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("navigation","Back")};case"COMMAND_PAGE_FORWARD":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("navigation","Forward")};case"COMMAND_SAVE_PAGE":return s.ellipsis=!0,{...s,...F.Z.getMenuItem(e,n),...(0,Mn.Z)("command","Save As")};case"DOCUMENT_PRINT":{const e=Ln.getShortcuts("COMMAND_PRINT_PAGE");return s.ellipsis=!0,{...s,shortcuts:e,...(0,Mn.Z)("command","Print")}}case"COMMAND_TAB_VIEW_PAGE_SOURCE":return s.type="checkbox",{...s,...F.Z.getMenuItem(e,n),...(0,Mn.Z)("Show Raw Message")};case"DOCUMENT_INSPECT":return{...s,shortcuts:[],...(0,Mn.Z)("Inspect")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const Qn={actions:function(){return["CONTEXT_BACK","CONTEXT_FORWARD","CONTEXT_COPY","CONTEXT_SENDER_IS_MAILING_LIST","COMMAND_TAB_VIEW_PAGE_SOURCE"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"COMMAND_PAGE_BACK":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("navigation","Back")};case"COMMAND_PAGE_FORWARD":return{...F.Z.getMenuItem(e,n),...(0,Mn.Z)("navigation","Forward")};case"CONTEXT_COPY":return{...s,...(0,Mn.Z)("win_linux","Copy")};case"CONTEXT_SENDER_IS_MAILING_LIST":return s.type="checkbox",{...s,...(0,Mn.Z)("Treat Sender as a Mailing List")};case"COMMAND_TAB_VIEW_PAGE_SOURCE":return{...s,...F.Z.getMenuItem(e,n),...(0,Mn.Z)("Show Raw Message")};default:return F.Z.getMenuItem(e,n)}}};const qn={actions:function(){return["CONTEXT_VIEW_ALL_MESSAGES","CONTEXT_RERUN_FILTER","CONTEXT_MARK_ALL_AS_READ","CONTEXT_MOVE_ALL_TO_TRASH","CONTEXT_EMPTY_TRASH","CONTEXT_CHECK_FOR_MAIL","CONTEXT_SEND","CONTEXT_RESCAN_UNREAD","CONTEXT_SUBSCRIBE","CONTEXT_UNSUBSCRIBE","CONTEXT_RERUN_THREADING","CONTEXT_MOVE_INTO_IMPORTANT","CONTEXT_MOVE_INTO_OTHER","CONTEXT_DELETE","CONTEXT_DELETE_ALL","CONTEXT_RENAME","CONTEXT_REGENERATE","CONTEXT_ADVANCED"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_VIEW_ALL_MESSAGES":return{...s,...(0,Mn.Z)("View All Messages")};case"CONTEXT_RERUN_FILTER":return{...s,...(0,Mn.Z)("Rerun Filter for Folder")};case"CONTEXT_MARK_ALL_AS_READ":return{...s,...(0,Mn.Z)("Mark All as Read")};case"CONTEXT_MOVE_ALL_TO_TRASH":return{...s,...(0,Mn.Z)("mail","Move All to Trash")};case"CONTEXT_EMPTY_TRASH":return{...s,...(0,Mn.Z)("mail","Empty Trash")};case"CONTEXT_CHECK_FOR_MAIL":return{...s,...(0,Mn.Z)("Check for Mail")};case"CONTEXT_SEND":return{...s,...(0,Mn.Z)("Send")};case"CONTEXT_RESCAN_UNREAD":return{...s,...(0,Mn.Z)("Rescan Unread Flags")};case"CONTEXT_SUBSCRIBE":return{...s,...(0,Mn.Z)("Subscribe")};case"CONTEXT_UNSUBSCRIBE":return{...s,...(0,Mn.Z)("Unsubscribe")};case"CONTEXT_RERUN_THREADING":return{...s,...(0,Mn.Z)("Rerun Threading")};case"CONTEXT_MOVE_INTO_IMPORTANT":return{...s,...(0,Mn.Z)("Move into Important")};case"CONTEXT_MOVE_INTO_OTHER":return{...s,...(0,Mn.Z)("Move into Other")};case"CONTEXT_DELETE_ALL":return{...s,...(0,Mn.Z)("Delete all")};case"CONTEXT_REGENERATE":return{...s,...(0,Mn.Z)("Regenerate")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("verd","Delete")};case"CONTEXT_RENAME":return{...s,...(0,Mn.Z)("Rename")};case"CONTEXT_ADVANCED":return s.type="folder",{...s,...(0,Mn.Z)("Advanced")};default:return F.Z.getMenuItem(e,n)}}};const Jn={actions:function(){return["COMMAND_MAIL_REPLY","COMMAND_MAIL_REPLY_ALL","COMMAND_MAIL_FORWARD","COMMAND_MAIL_MARK_READ","COMMAND_MAIL_MARK_UNREAD","COMMAND_MAIL_GOTO_NEXT_UNREAD","COMMAND_MAIL_GOTO_PREVIOUS_UNREAD","COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD","CONTEXT_CONTAINER_MOVE","CONTEXT_ADD_FLAG","CONTEXT_REMOVE_FLAG","CONTEXT_CONTAINER_FLAGS","CONTEXT_CONTAINER_LABELS","CONTEXT_EDIT","CONTEXT_SEND","CONTEXT_CONTAINER_TRASH","COMMAND_MAIL_ENABLE_THREADED_VIEW","COMMAND_MAIL_MARK_THREAD_READ","COMMAND_MAIL_MARK_THREAD_UNREAD","COMMAND_MAIL_ENABLE_SENDER_VIEW","CONTEXT_SENDER_IS_MAILING_LIST","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","COMMAND_MAIL_COMPOSE_NEW_MESSAGE"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_GOTO":return s.type="folder",{...s,...(0,Mn.Z)("Go to")};case"CONTEXT_CONTAINER_MOVE":return s.settingsLabel=(0,ue.Z)("[Move to Folders]"),s.type="container",{...s,...(0,Mn.Z)("Move")};case"CONTEXT_ADD_FLAG":return{...s,...(0,Mn.Z)("Add Flag")};case"CONTEXT_REMOVE_FLAG":return{...s,...(0,Mn.Z)("Remove Flag")};case"CONTEXT_CONTAINER_FLAGS":return s.settingsLabel=(0,ue.Z)("[All Flags]"),s.type="container",{...s,...(0,Mn.Z)("Flags")};case"CONTEXT_CONTAINER_LABELS":return s.settingsLabel=(0,ue.Z)("[All Labels]"),s.type="container",{...s,...(0,Mn.Z)("Labels")};case"CONTEXT_EDIT":return{...s,...(0,Mn.Z)("mail","Edit")};case"CONTEXT_MARK_AS_SPAM":return{...s,...(0,Mn.Z)("mail","Mark Message as Spam")};case"CONTEXT_NOT_SPAM":return{...s,...(0,Mn.Z)("mail","Not Spam")};case"CONTEXT_SEND":return{...s,...(0,Mn.Z)("Send")};case"CONTEXT_CONTAINER_TRASH":return s.settingsLabel=(0,ue.Z)("[Trash elements]"),s.type="container",{...s,...(0,Mn.Z)("Trash")};case"CONTEXT_THREAD":return s.type="folder",{...s,...(0,Mn.Z)("Thread")};case"CONTEXT_SENDER":return s.type="folder",{...s,...(0,Mn.Z)("Sender")};case"CONTEXT_SENDER_IS_MAILING_LIST":return s.type="checkbox",{...s,...(0,Mn.Z)("Treat Sender as a Mailing List")};case"CONTEXT_EXPAND_ALL":return{...s,...(0,Mn.Z)("Expand All Threads")};case"CONTEXT_COLLAPSE_ALL":return{...s,...(0,Mn.Z)("Collapse All Threads")};default:return F.Z.getMenuItem(e,n)}}};const es={actions:function(){return["CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR","CONTEXT_CONTAINER_BACKWARD_HISTORY","CONTEXT_CONTAINER_FORWARD_HISTORY"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR":return s.settingsLabel=(0,ue.Z)("[Customize]"),s.type="container",{...s,...(0,Mn.Z)("Customize")};case"CONTEXT_CONTAINER_BACKWARD_HISTORY":return s.settingsLabel=(0,ue.Z)("[Backward History]"),s.type="container",{...s,...(0,Mn.Z)("Backward History")};case"CONTEXT_CONTAINER_FORWARD_HISTORY":return s.settingsLabel=(0,ue.Z)("[Forward History]"),s.type="container",{...s,...(0,Mn.Z)("Forward History")};default:return F.Z.getMenuItem(e,n)}}};const ts={actions:function(){return["CONTEXT_CONTAINER_OPEN_IN_WINDOW","CONTEXT_OPEN_ADDRESS","CONTEXT_NEW_FROM_SELECTION","CONTEXT_NEW_ITEM","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","CONTEXT_EMPTY_TRASH","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","CONTEXT_SETTINGS","CONTEXT_CONTAINER_SEARCH"]},options:function(e,t){const n=t||{inManager:!1},s=void 0===t,i={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...(0,Mn.Z)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...(0,Mn.Z)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...(0,Mn.Z)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...(0,Mn.Z)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...(0,Mn.Z)("Open in Private Window")};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":return i.settingsLabel=(0,ue.Z)("[Open in Another Window]"),i.type="container",{...i,...(0,Mn.Z)("Open in Another Window")};case"CONTEXT_SET_SPEEDDIAL":return{...i,...(0,Mn.Z)("Use as Speed Dial")};case"CONTEXT_UNSET_SPEEDDIAL":return{...i,...(0,Mn.Z)("Remove from Speed Dial")};case"CONTEXT_SET_BOOKMARK_BAR":return{...i,...(0,Mn.Z)("Set as Bookmark Bar Folder")};case"CONTEXT_UNSET_BOOKMARK_BAR":return{...i,...(0,Mn.Z)("Remove as Bookmark Bar Folder")};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{...i,...(0,Mn.Z)("Move to Bookmark Bar Folder")};case"CONTEXT_BOOKMARK":return{...i,...(0,Mn.Z)("Bookmark Active Page")};case"CONTEXT_BOOKMARK_ALL":return{...i,...(0,Mn.Z)("Bookmark All Open Pages")};case"CONTEXT_OPEN_ADDRESS":return{...i,...(0,Mn.Z)("Open Note Address")};case"CONTEXT_NEW_FROM_SELECTION":return{...i,...(0,Mn.Z)("Copy Selection to New Note")};case"CONTEXT_NEW_ITEM":return{...i,...(0,Mn.Z)("New Note")};case"CONTEXT_NEW_FOLDER":return{...i,...(0,Mn.Z)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...i,...(0,Mn.Z)("New Separator")};case"CONTEXT_EDIT":return s?{...i,...(0,Mn.Z)("command","Edit")}:{...i,...n.inManager?(0,Mn.Z)("Edit in New Tab"):(0,Mn.Z)("Edit in Notes Manager")};case"CONTEXT_RENAME":return{...i,...(0,Mn.Z)("Rename")};case"CONTEXT_CUT":return{...i,...(0,Mn.Z)("verb","Cut")};case"CONTEXT_COPY":return{...i,...(0,Mn.Z)("verb","Copy")};case"CONTEXT_PASTE":return{...i,...(0,Mn.Z)("verb","Paste")};case"CONTEXT_DELETE":return{...i,...(0,Mn.Z)("verb","Delete")};case"CONTEXT_EMPTY_TRASH":return{...i,...(0,Mn.Z)("Empty Trash")};case"CONTEXT_EXPAND_ALL":return{...i,...(0,Mn.Z)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...i,...(0,Mn.Z)("Collapse All Folders")};case"CONTEXT_SETTINGS":return i.type="folder",{...i,...(0,Mn.Z)("Settings")};case"CONTEXT_CONTAINER_SEARCH":return i.settingsLabel=(0,ue.Z)("[Search Settings]"),i.type="container",{...i,...(0,Mn.Z)("command","Search")};default:return F.Z.getMenuItem(e,s)}}};const ns={actions:function(){return["DOCUMENT_BACK","DOCUMENT_FORWARD","DOCUMENT_RELOAD","COMMAND_ADD_BOOKMARK","DOCUMENT_ADD_TO_WEBPANEL","DOCUMENT_SEND_BY_MAIL","DOCUMENT_SAVE","DOCUMENT_PRINT","DOCUMENT_CAST","DOCUMENT_COPY_ADDRESS","DOCUMENT_CONTAINER_SEND_TO_DEVICES","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_QR_CODE","DOCUMENT_CONTAINER_PLUGIN_ROTATION"].concat(Rn.actions())},options:function(e,t){const n=void 0===t,s=t||Ln.settingsState,i={...z.Z.commandItem};switch(e.action){case"DOCUMENT_BACK":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_PAGE_BACK");return{...i,shortcuts:e,...(0,Mn.Z)("navigation","Back")}}case"DOCUMENT_FORWARD":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_PAGE_FORWARD");return{...i,shortcuts:e,...(0,Mn.Z)("navigation","Forward")}}case"DOCUMENT_RELOAD":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_PAGE_REFRESH");return{...i,shortcuts:e,...(0,Mn.Z)("navigation","Reload")}}case"COMMAND_ADD_BOOKMARK":return{...F.Z.getMenuItem(e,n),...i,...(0,Mn.Z)("Bookmark Page")};case"DOCUMENT_ADD_TO_WEBPANEL":return{...i,...(0,Mn.Z)("Add Page to Web Panel")};case"DOCUMENT_SEND_BY_MAIL":return{...i,...(0,Mn.Z)("Send by Mail")};case"DOCUMENT_SAVE":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_SAVE_PAGE");return i.ellipsis=!0,{...i,shortcuts:e,...(0,Mn.Z)("Save As")}}case"DOCUMENT_PRINT":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_PRINT_PAGE");return i.ellipsis=!0,{...i,shortcuts:e,...(0,Mn.Z)("command","Print")}}case"DOCUMENT_CAST":return i.ellipsis=!0,{...i,...(0,Mn.Z)("Cast")};case"DOCUMENT_COPY_ADDRESS":return{...i,...s.iswebpanel?(0,Mn.Z)("Copy Panel Address"):(0,Mn.Z)("Copy Page Address")};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return i.settingsLabel=(0,ue.Z)("[Send to Your Devices]"),i.type="container",{...i,...(0,Mn.Z)("Send to Your Devices")};case"DOCUMENT_QR_CODE":{const e=s.iswebpanel?[]:Ln.getShortcuts("COMMAND_PAGE_QR_CODE");return{...i,shortcuts:e,...(0,Mn.Z)("command","Create QR Code for This Page")}}case"DOCUMENT_CONTAINER_EXTENSIONS":return i.settingsLabel=(0,ue.Z)("[Extensions]"),i.type="container",{...i,...(0,Mn.Z)("Extensions")};case"DOCUMENT_CONTAINER_PLUGIN_ROTATION":return i.settingsLabel=(0,ue.Z)("[Plugin Rotation Commands]"),i.type="container",{...i,...(0,Mn.Z)("Plugin Rotation")};default:return Rn.actions().includes(e.action)?Rn.options(e,t):F.Z.getMenuItem(e,n)}}};const ss={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_COPY_ADDRESS","CONTEXT_DESKTOP_VERSION","CONTEXT_MOBILE_VERSION","CONTEXT_SEPARATE_WIDTH","CONTEXT_CONTAINER_TOOLBAR","CONTEXT_REMOVE_WEB_PANEL","CONTEXT_CONTAINER_REG_PANELS","CONTEXT_CONTAINER_WEB_PANELS","CONTEXT_CONTAINER_REMOVED_PANELS","CONTEXT_CONTAINER_PERIODIC_TIMER","CONTEXT_SEPARATE_FLOATING"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_CONTAINER_PERIODIC_TIMER":return s.settingsLabel=(0,ue.Z)("[Periodic Reload]"),s.type="container",{...s,...(0,Mn.Z)("Periodic Reload")};case"CONTEXT_MENU_OPEN":return s.type="folder",{...s,...(0,Mn.Z)("Open in")};case"CONTEXT_OPEN_IN_NEW_TAB":return{...s,...(0,Mn.Z)("open in","New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...s,...(0,Mn.Z)("Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...s,...(0,Mn.Z)("Current Tab")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...s,...(0,Mn.Z)("open in","New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...s,...(0,Mn.Z)("open in","Private Window")};case"CONTEXT_COPY_ADDRESS":return{...s,...(0,Mn.Z)("Copy Panel Address")};case"CONTEXT_DESKTOP_VERSION":return{...s,...(0,Mn.Z)("Show Desktop Version")};case"CONTEXT_MOBILE_VERSION":return{...s,...(0,Mn.Z)("Show Mobile Version")};case"CONTEXT_SEPARATE_FLOATING":return s.type="checkbox",{...s,...(0,Mn.Z)("Toggle Floating")};case"CONTEXT_SEPARATE_WIDTH":return s.type="checkbox",{...s,...(0,Mn.Z)("Separate Width")};case"CONTEXT_CONTAINER_TOOLBAR":return s.settingsLabel=(0,ue.Z)("[Toolbar]"),s.type="container",{...s,...(0,Mn.Z)("Toolbar")};case"CONTEXT_REMOVE_WEB_PANEL":return{...s,...(0,Mn.Z)("Remove Web Panel")};case"CONTEXT_MENU_PANEL":return s.type="folder",{...s,...(0,Mn.Z)("Panels")};case"CONTEXT_CONTAINER_REG_PANELS":return s.settingsLabel=(0,ue.Z)("[All Regular Panels]"),s.type="container",{...s,...(0,Mn.Z)("Regular Panels")};case"CONTEXT_CONTAINER_WEB_PANELS":return s.settingsLabel=(0,ue.Z)("[All Web Panels]"),s.type="container",{...s,...(0,Mn.Z)("Web Panels")};case"CONTEXT_CONTAINER_REMOVED_PANELS":return s.settingsLabel=(0,ue.Z)("[All Removed Panels]"),s.type="container",{...s,...(0,Mn.Z)("Removed Panels")};default:return F.Z.getMenuItem(e,n)}}};const is={actions:function(){return["CONTEXT_CONTAINER_REG_PANELS","CONTEXT_CONTAINER_WEB_PANELS","CONTEXT_CONTAINER_REMOVED_PANELS"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_CONTAINER_REG_PANELS":return s.settingsLabel=(0,ue.Z)("[All Regular Panels]"),s.type="container",{...s,...(0,Mn.Z)("Regular Panels")};case"CONTEXT_CONTAINER_WEB_PANELS":return s.settingsLabel=(0,ue.Z)("[All Web Panels]"),s.type="container",{...s,...(0,Mn.Z)("Web Panels")};case"CONTEXT_CONTAINER_REMOVED_PANELS":return s.settingsLabel=(0,ue.Z)("[All Removed Panels]"),s.type="container",{...s,...(0,Mn.Z)("Removed Panels")};default:return F.Z.getMenuItem(e,n)}}};const rs={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_CONTAINER_OPEN_IN_WINDOW","CONTEXT_OPEN_ALL","CONTEXT_SET_THUMBNAIL","CONTEXT_CLEAR_THUMBNAIL","CONTEXT_RELOAD","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...s,...(0,Mn.Z)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...s,...(0,Mn.Z)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...s,...(0,Mn.Z)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...s,...(0,Mn.Z)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...s,...(0,Mn.Z)("Open in Private Window")};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":return s.settingsLabel=(0,ue.Z)("[Open in Another Window]"),s.type="container",{...s,...(0,Mn.Z)("Open in Another Window")};case"CONTEXT_OPEN_ALL":return{...s,...(0,Mn.Z)("Open All Bookmarks")};case"CONTEXT_SET_THUMBNAIL":return s.ellipsis=!0,{...s,...(0,Mn.Z)("Select Custom Thumbnail")};case"CONTEXT_CLEAR_THUMBNAIL":return{...s,...(0,Mn.Z)("Clear Custom Thumbnail")};case"CONTEXT_RELOAD":return{...s,...(0,Mn.Z)("Reload")};case"CONTEXT_EDIT":return{...s,...(0,Mn.Z)("command","Edit")};case"CONTEXT_RENAME":return{...s,...(0,Mn.Z)("Rename")};case"CONTEXT_CUT":return{...s,...(0,Mn.Z)("win_linux","Cut")};case"CONTEXT_COPY":return{...s,...(0,Mn.Z)("win_linux","Copy")};case"CONTEXT_PASTE":return{...s,...(0,Mn.Z)("win_linux","Paste")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("other","Delete")};default:return F.Z.getMenuItem(e,n)}}};const as={actions:function(){return["CONTEXT_RENAME","CONTEXT_REMOVE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_RENAME":return{...s,...(0,Mn.Z)("Rename")};case"CONTEXT_REMOVE":return{...s,...(0,Mn.Z)("Remove from Speed Dial")};default:return F.Z.getMenuItem(e,n)}}};const os={actions:function(){return["CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL","CONTEXT_ADD_FOLDER_TO_SPEEDDIAL","CONTEXT_PASTE","CONTEXT_CUSTOMIZE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL":return{...s,...(0,Mn.Z)("command","Add Bookmark to Speed Dial")};case"CONTEXT_ADD_FOLDER_TO_SPEEDDIAL":return{...s,...(0,Mn.Z)("command","Add Speed Dial Folder")};case"CONTEXT_PASTE":return{...s,...(0,Mn.Z)("win_linux","Paste")};case"CONTEXT_CUSTOMIZE":return s.ellipsis=!0,{...s,...(0,Mn.Z)("other","Customize")};default:return F.Z.getMenuItem(e,n)}}};const ls={actions:function(){return["CONTEXT_NEW","CONTEXT_TOGGLE_SUBSTRIP_LOCK","CONTEXT_BOOKMARK_ALL","CONTEXT_SAVE_SESSION","CONTEXT_REOPEN"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_LOCK_SUBSTRIP":case"CONTEXT_UNLOCK_SUBSTRIP":return{...s,visible:!1};case"CONTEXT_NEW":return{...s,...(0,Mn.Z)("command","New Tab")};case"CONTEXT_TOGGLE_SUBSTRIP_LOCK":return{...s,...(0,Mn.Z)("Lock Second Tab Row")};case"CONTEXT_BOOKMARK_ALL":return{...s,...(0,Mn.Z)("Bookmark All Tabs")};case"CONTEXT_SAVE_SESSION":return F.Z.getMenuItem({...e,action:"COMMAND_SAVE_SESSION"},n);case"CONTEXT_REOPEN":return F.Z.getMenuItem({...e,action:"COMMAND_TAB_REOPEN_RECENTLY_CLOSED"},n);default:return F.Z.getMenuItem(e,n)}}};const cs={actions:function(){return["CONTEXT_CLOSE","CONTEXT_TABSTACK_REMOVE_FROM"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_CLOSE":return{...s,...(0,Mn.Z)("Close Tab")};case"CONTEXT_TABSTACK_REMOVE_FROM":return{...s,...(0,Mn.Z)("Remove from Tab Stack")};default:return F.Z.getMenuItem(e,n)}}};const us={actions:function(){return["CONTEXT_NEW","CONTEXT_RELOAD","CONTEXT_CLONE","CONTEXT_PIN","CONTEXT_UNPIN","CONTEXT_MUTE","CONTEXT_MUTE_OTHER","CONTEXT_OPTIMIZE_FS_VIDEOS","CONTEXT_BOOKMARK","CONTEXT_BOOKMARK_STACK","CONTEXT_BOOKMARK_ALL","CONTEXT_SAVE_SESSION","CONTEXT_TABSTACK_BY_SELECTION","CONTEXT_TABSTACK_BY_HOST","CONTEXT_TABSTACK_RENAME","CONTEXT_TABSTACK_REMOVE_FROM","CONTEXT_TABSTACK_UNGROUP","CONTEXT_TILE_TABSTACK","CONTEXT_UNTILE_TABSTACK","CONTEXT_TILE_TABS","CONTEXT_UNTILE_SELECTION","CONTEXT_HIBERNATE_TAB","CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS","CONTEXT_HIBERNATE_TABSTACK","CONTEXT_HIBERNATE_BACKGROUND","CONTEXT_CLOSE","CONTEXT_CLOSE_TABSTACK","CONTEXT_CLOSE_OTHER","CONTEXT_CLOSE_LEFT","CONTEXT_CLOSE_RIGHT","CONTEXT_REOPEN","CONTEXT_CUSTOMIZE","CONTEXT_CONTAINER_PWA","CONTEXT_CONTAINER_MOVE_TO_WINDOW","CONTEXT_MOVE","CONTEXT_TABSTACK_MOVE","CONTEXT_MOVE_LEFT","CONTEXT_MOVE_RIGHT","CONTEXT_CONTAINER_PERIODIC_TIMER","CONTEXT_TABSTACK_BY_HOSTS","CONTEXT_MOVE_STACK_LEFT","CONTEXT_MOVE_STACK_RIGHT"]},options:function(e,t){const n=t||{isMultiSelect:!1,count:-1,closableCount:-1,unSelectedCount:0,unpinned:0,pinned:0,playing:0,hostname:"",hostnameCount:-1,canHibernateCount:-1,horizontal:!0,someIncognito:!1,canCloneCount:-1},s=void 0===t,i={...z.Z.commandItem};switch(e.action){case"CONTEXT_NEW":return{...i,...(0,Mn.Z)("command","New Tab")};case"CONTEXT_RELOAD":return{...i,...n.isMultiSelect?(0,Mn.Z)("Reload $1 Tab","Reload $1 Tabs",[n.count]):(0,Mn.Z)("Reload Tab")};case"CONTEXT_CLONE":return{...i,...n.isMultiSelect?(0,Mn.Z)("Clone $1 Tab","Clone $1 Tabs",[n.canCloneCount]):(0,Mn.Z)("Clone Tab")};case"CONTEXT_PIN":return{...i,...n.isMultiSelect?(0,Mn.Z)("Pin $1 Tab","Pin $1 Tabs",[n.unpinned]):(0,Mn.Z)("Pin Tab")};case"CONTEXT_UNPIN":return{...i,...n.isMultiSelect?(0,Mn.Z)("Unpin $1 Tab","Unpin $1 Tabs",[n.pinned]):(0,Mn.Z)("Unpin Tab")};case"CONTEXT_CONTAINER_PERIODIC_TIMER":return i.settingsLabel=(0,ue.Z)("[Periodic Reload]"),i.type="container",{...i,...(0,Mn.Z)("Periodic Reload")};case"CONTEXT_MUTE":return i.type="checkbox",{...i,...n.isMultiSelect?(0,Mn.Z)("Mute $1 Tab","Mute $1 Tabs",[n.playing]):(0,Mn.Z)("Mute Tab")};case"CONTEXT_MUTE_OTHER":return{...i,...(0,Mn.Z)("Mute Other Tabs")};case"CONTEXT_OPTIMIZE_FS_VIDEOS":return{...i,...(0,Mn.Z)("Optimize fullscreen videos")};case"CONTEXT_BOOKMARK":return{...i,...n.isMultiSelect?(0,Mn.Z)("Bookmark $1 Tab","Bookmark $1 Tabs",[n.count]):(0,Mn.Z)("Bookmark Tab")};case"CONTEXT_BOOKMARK_STACK":return{...i,...(0,Mn.Z)("Bookmark Tab Stack")};case"CONTEXT_BOOKMARK_ALL":return{...i,...(0,Mn.Z)("Bookmark All Tabs")};case"CONTEXT_SAVE_SESSION":return{...i,...n.count>0?(0,Mn.Z)("Save $1 Selected Tab as Session","Save $1 Selected Tabs as Session",[n.count]):(0,Mn.Z)("Save All Tabs as Session")};case"CONTEXT_TABSTACK_BY_SELECTION":return{...i,...s?(0,Mn.Z)("Stack Selected Tabs"):(0,Mn.Z)("Stack $1 Selected Tab","Stack $1 Selected Tabs",[n.unpinned])};case"CONTEXT_TABSTACK_BY_HOST":return{...i,...s?(0,Mn.Z)("Stack Tabs by Host"):(0,Mn.Z)("Stack Tabs by Host ($1 of $2)",[n.hostnameCount,n.hostname])};case"CONTEXT_TABSTACK_BY_HOSTS":return{...i,...(0,Mn.Z)("Stack Tabs by Hosts")};case"CONTEXT_TABSTACK_RENAME":return{...i,...(0,Mn.Z)("Rename Tab Stack")};case"CONTEXT_TABSTACK_REMOVE_FROM":return{...i,...(0,Mn.Z)("Remove from Tab Stack")};case"CONTEXT_TABSTACK_UNGROUP":return{...i,...(0,Mn.Z)("Unstack Tabs")};case"CONTEXT_TILE_TABSTACK":return{...i,...(0,Mn.Z)("Tile Tab Stack")};case"CONTEXT_UNTILE_TABSTACK":return{...i,...(0,Mn.Z)("Untile Tab Stack")};case"CONTEXT_TILE_TABS":return{...i,...s?(0,Mn.Z)("Tile Tabs"):(0,Mn.Z)("Tile $1 Tab","Tile $1 Tabs",[n.count])};case"CONTEXT_UNTILE_SELECTION":return{...i,...(0,Mn.Z)("Untile Selection")};case"CONTEXT_HIBERNATE_TAB":return{...i,...(0,Mn.Z)("Hibernate Tab")};case"CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS":return{...i,...s?(0,Mn.Z)("Hibernate Selected Background Tabs"):(0,Mn.Z)("Hibernate $1 Background Tab","Hibernate $1 Background Tabs",[n.canHibernateCount])};case"CONTEXT_HIBERNATE_TABSTACK":return{...i,...(0,Mn.Z)("Hibernate Tab Stack")};case"CONTEXT_HIBERNATE_BACKGROUND":return{...i,...(0,Mn.Z)("Hibernate Background Tabs")};case"CONTEXT_CLOSE":return{...i,...n.isMultiSelect?(0,Mn.Z)("Close $1 Tab","Close $1 Tabs",[n.closableCount]):(0,Mn.Z)("Close Tab")};case"CONTEXT_CLOSE_TABSTACK":return{...i,...(0,Mn.Z)("Close Tab Stack")};case"CONTEXT_CLOSE_OTHER":return{...i,...n.isMultiSelect&&n.unSelectedCount>0?(0,Mn.Z)("Close Other ($1 Unselected Tab)","Close Other ($1 Unselected Tabs)",[n.unSelectedCount]):(0,Mn.Z)("Close Other Tabs")};case"CONTEXT_CLOSE_LEFT":return{...i,...n.horizontal?(0,Mn.Z)("Close Tabs to the Left"):(0,Mn.Z)("Close the Tabs Above")};case"CONTEXT_CLOSE_RIGHT":return{...i,...n.horizontal?(0,Mn.Z)("Close Tabs to the Right"):(0,Mn.Z)("Close the Tabs Below")};case"CONTEXT_REOPEN":return F.Z.getMenuItem({...e,action:"COMMAND_TAB_REOPEN_RECENTLY_CLOSED"},s);case"CONTEXT_CUSTOMIZE":return i.ellipsis=!0,{...i,...(0,Mn.Z)("panel","Customize")};case"CONTEXT_CONTAINER_PWA":return i.settingsLabel=(0,ue.Z)("[All Progressive Web Apps]"),i.type="container",{...i,...(0,Mn.Z)("Progressive Web Apps")};case"CONTEXT_CONTAINER_MOVE_TO_WINDOW":return i.settingsLabel=(0,ue.Z)("[All Window Destinations]"),i.type="container",{...i,...(0,Mn.Z)("Window Destinations")};case"CONTEXT_MOVE":return i.type="folder",{...i,...n.isMultiSelect&&!n.someIncognito?(0,Mn.Z)("Move $1 Tab","Move $1 Tabs",[n.count]):(0,Mn.Z)("Move Tab")};case"CONTEXT_TABSTACK_MOVE":return i.type="folder",{...i,...(0,Mn.Z)("Move Tab Stack")};case"CONTEXT_MOVE_LEFT":case"CONTEXT_MOVE_STACK_LEFT":return{...i,...n.horizontal?(0,Mn.Z)("navigation","Left"):(0,Mn.Z)("Up")};case"CONTEXT_MOVE_RIGHT":case"CONTEXT_MOVE_STACK_RIGHT":return{...i,...n.horizontal?(0,Mn.Z)("navigation","Right"):(0,Mn.Z)("Down")};default:return F.Z.getMenuItem(e,s)}}};const ms={actions:function(){return["CONTEXT_COPY","CONTEXT_DELETE"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem};switch(e.action){case"CONTEXT_COPY":return{...s,...(0,Mn.Z)("verb","Copy")};case"CONTEXT_COPY_ALL":return{...s,...(0,Mn.Z)("Copy All")};case"CONTEXT_DELETE":return{...s,...(0,Mn.Z)("verb","Delete")};default:return F.Z.getMenuItem(e,n)}}};const ds={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","DOCUMENT_PASTE_AS_PLAIN_TEXT","DOCUMENT_SELECT_ALL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CONTAINER_SPEECH"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem},i=t||Ln.settingsState;switch(e.action){case"DOCUMENT_LOOK_UP":return{...s,...Ln.getLabelWithParameter(e,i.printableselection,n)};case"DOCUMENT_EMOJI":return{...s,...(0,Mn.Z)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...s,shortcuts:["ctrl+z"],...(0,Mn.Z)("win_linux","Undo")};case"DOCUMENT_REDO":return{...s,shortcuts:["ctrl+y"],...(0,Mn.Z)("win_linux","Redo")};case"DOCUMENT_CUT":return{...s,shortcuts:["ctrl+x"],...(0,Mn.Z)("win_linux","Cut")};case"DOCUMENT_COPY":return{...s,shortcuts:["ctrl+c"],...(0,Mn.Z)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...s,shortcuts:["ctrl+v"],...(0,Mn.Z)("win_linux","Paste")};case"DOCUMENT_PASTE_AS_PLAIN_TEXT":{const e=Ln.getShortcuts("COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT");return{...s,shortcuts:e,...(0,Mn.Z)("win_linux","Paste as Plain Text")}}case"DOCUMENT_SELECT_ALL":return{...s,shortcuts:["ctrl+a"],...(0,Mn.Z)("win_linux","Select All")};case"DOCUMENT_CONTAINER_NOTES":return s.settingsLabel=(0,ue.Z)("[All notes]"),s.type="container",{...s,...(0,Mn.Z)("Insert Note")};case"DOCUMENT_CONTAINER_SPELLCHECK":return s.settingsLabel=(0,ue.Z)("[Spell Check]"),s.type="container",{...s,...(0,Mn.Z)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return s.settingsLabel=(0,ue.Z)("[Spell Check Options]"),s.type="container",{...s,...(0,Mn.Z)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return s.settingsLabel=(0,ue.Z)("[Writing Direction Options]"),s.type="container",{...s,...(0,Mn.Z)("Writing Direction")};case"DOCUMENT_CONTAINER_SPEECH":return s.settingsLabel=(0,ue.Z)("[Speech Commands]"),s.type="container",{...s,...(0,Mn.Z)("Speech")};default:return F.Z.getMenuItem(e,n)}}};const hs={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO","DOCUMENT_SELECT_ALL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CUSTOMIZE","DOCUMENT_SHOW_FULL_ADDRESS","DOCUMENT_CONTAINER_SPEECH"]},options:function(e,t){const n=void 0===t,s={...z.Z.commandItem},i=t||Ln.settingsState;switch(e.action){case"DOCUMENT_LOOK_UP":return{...s,...Ln.getLabelWithParameter(e,i.printableselection,n)};case"DOCUMENT_EMOJI":return{...s,...(0,Mn.Z)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...s,shortcuts:["ctrl+z"],...(0,Mn.Z)("win_linux","Undo")};case"DOCUMENT_REDO":return{...s,shortcuts:["ctrl+y"],...(0,Mn.Z)("win_linux","Redo")};case"DOCUMENT_CUT":return{...s,shortcuts:["ctrl+x"],...(0,Mn.Z)("win_linux","Cut")};case"DOCUMENT_COPY":return{...s,shortcuts:["ctrl+c"],...(0,Mn.Z)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...s,shortcuts:["ctrl+v"],...(0,Mn.Z)("win_linux","Paste")};case"DOCUMENT_SELECT_ALL":return{...s,shortcuts:["ctrl+a"],...(0,Mn.Z)("win_linux","Select All")};case"DOCUMENT_CONTAINER_NOTES":return s.settingsLabel=(0,ue.Z)("[All notes]"),s.type="container",{...s,...(0,Mn.Z)("Insert Note")};case"DOCUMENT_CONTAINER_SPELLCHECK":return s.settingsLabel=(0,ue.Z)("[Spell Check]"),s.type="container",{...s,...(0,Mn.Z)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return s.settingsLabel=(0,ue.Z)("[Spell Check Options]"),s.type="container",{...s,...(0,Mn.Z)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return s.settingsLabel=(0,ue.Z)("[Writing Direction Options]"),s.type="container",{...s,...(0,Mn.Z)("Writing Direction")};case"DOCUMENT_CUSTOMIZE":return s.ellipsis=!0,{...s,...(0,Mn.Z)("panel","Customize")};case"DOCUMENT_SHOW_FULL_ADDRESS":return s.type="checkbox",{...s,...(0,Mn.Z)("Show Full Address")};case"DOCUMENT_CONTAINER_SPEECH":return s.settingsLabel=(0,ue.Z)("[Speech Commands]"),s.type="container",{...s,...(0,Mn.Z)("Speech")};default:return F.Z.getMenuItem(e,n)}}};const ps={actions:function(){return["CONTEXT_NEW","CONTEXT_NEW_STACK","CONTEXT_NEW_STACK_FOR_HOST","CONTEXT_TABSTACK_UNGROUP","CONTEXT_CLONE","CONTEXT_RELOAD","CONTEXT_HIBERNATE_TAB","CONTEXT_PIN","CONTEXT_UNPIN","CONTEXT_TILE_TABS","CONTEXT_UNTILE_TABS","CONTEXT_MUTE","CONTEXT_MUTE_OTHER","CONTEXT_UNMUTE","CONTEXT_RENAME","CONTEXT_COPY","CONTEXT_SAVE","CONTEXT_SAVE_ALL","CONTEXT_EXPORT","CONTEXT_EXPORT_ALL","CONTEXT_DELETE","CONTEXT_EMPTY_TRASH","CONTEXT_REOPEN","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL"]},options:function(e,t){const n=t||{hostname:"",selectedCount:0},s=void 0===t,i={...z.Z.commandItem};switch(e.action){case"CONTEXT_NEW":return{...i,...(0,Mn.Z)("command","New Tab")};case"CONTEXT_NEW_STACK":return{...i,...(0,Mn.Z)("Stack $1 Selected Tab","Stack $1 Selected Tabs",[n.selectedCount])};case"CONTEXT_NEW_STACK_FOR_HOST":return{...i,...s?(0,Mn.Z)("Stack Tabs by Host"):(0,Mn.Z)("Stack Tabs by Host ($1)",[n.hostname])};case"CONTEXT_TABSTACK_UNGROUP":return{...i,...(0,Mn.Z)("Unstack Tabs")};case"CONTEXT_CLONE":return{...i,...(0,Mn.Z)("Clone")};case"CONTEXT_RELOAD":return{...i,...(0,Mn.Z)("Reload")};case"CONTEXT_HIBERNATE_TAB":return{...i,...(0,Mn.Z)("Hibernate")};case"CONTEXT_PIN":return{...i,...(0,Mn.Z)("Pin")};case"CONTEXT_UNPIN":return{...i,...(0,Mn.Z)("Unpin")};case"CONTEXT_TILE_TABS":return{...i,...(0,Mn.Z)("Tile")};case"CONTEXT_UNTILE_TABS":return{...i,...(0,Mn.Z)("Untile")};case"CONTEXT_MUTE":return{...i,...(0,Mn.Z)("Mute")};case"CONTEXT_MUTE_OTHER":return{...i,...(0,Mn.Z)("Mute Others")};case"CONTEXT_UNMUTE":return{...i,...(0,Mn.Z)("Unmute")};case"CONTEXT_RENAME":return{...i,...(0,Mn.Z)("Rename")};case"CONTEXT_COPY":return{...i,...(0,Mn.Z)("Copy Address")};case"CONTEXT_SAVE":return{...i,...(0,Mn.Z)("Save as Bookmarks")};case"CONTEXT_SAVE_ALL":return{...i,...(0,Mn.Z)("Save All as Bookmarks")};case"CONTEXT_EXPORT":return{...i,...(0,Mn.Z)("Save as Session")};case"CONTEXT_EXPORT_ALL":return{...i,...(0,Mn.Z)("Save All as Session")};case"CONTEXT_DELETE":return{...i,...(0,Mn.Z)("Close")};case"CONTEXT_EMPTY_TRASH":return{...i,...(0,Mn.Z)("command","Clear All")};case"CONTEXT_REOPEN":return{...i,...(0,Mn.Z)("Reopen")};case"CONTEXT_EXPAND_ALL":return{...i,...(0,Mn.Z)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...i,...(0,Mn.Z)("Collapse All Folders")};default:return F.Z.getMenuItem(e,s)}}},gs=[{name:(0,ue.Z)("Web Page"),group:"8",indent:0,sort:!0},{name:(0,ue.Z)("Mail"),group:"6",indent:0,sort:!0},{name:(0,ue.Z)("section","Start page"),group:"1",indent:0,sort:!0},{name:(0,ue.Z)("Panels"),group:"4",indent:0,sort:!0},{name:(0,ue.Z)("Tabs"),group:"2",indent:0,sort:!0},{name:(0,ue.Z)("Bookmarks"),group:"5",indent:0,sort:!0},{name:(0,ue.Z)("context","Address Bar"),group:"3",indent:0,sort:!1},{name:(0,ue.Z)("Other"),group:"7",indent:0,sort:!0}],bs={tab:{name:(0,ue.Z)("context","Tab"),group:"2",...us},tabstackthumbnails:{name:(0,ue.Z)("Tab Stack Thumbnails"),group:"2",...cs},tabbar:{name:(0,ue.Z)("context","Tab Bar"),group:"2",...ls},closedtab:{name:(0,ue.Z)("Tab Trash Can"),group:"2",...Hn},windowlist:{name:(0,ue.Z)("Window List"),group:"2",...ps},bookmarkbar:{name:(0,ue.Z)("Bookmark Bar"),group:"5",...Un},bookmarkbaritem:{name:(0,ue.Z)("Bookmark Bar Button"),group:"5",...Fn},bookmarklist:{name:(0,ue.Z)("Bookmark List"),group:"5",...Vn},panelbar:{name:(0,ue.Z)("Panel Bar"),group:"4",...is},panelbaritem:{name:(0,ue.Z)("Panel Bar Button"),group:"4",...ss},backwardbutton:{name:(0,ue.Z)("Back Button"),group:"3",...es},forwardbutton:{name:(0,ue.Z)("Forward Button"),group:"3",...es},rewindbutton:{name:(0,ue.Z)("Rewind Button"),group:"3",...es},fastforwardbutton:{name:(0,ue.Z)("Fast Forward Button"),group:"3",...es},reloadbutton:{name:(0,ue.Z)("Reload Button"),group:"3",...es},homebutton:{name:(0,ue.Z)("Home Button"),group:"3",...es},urledit:{name:(0,ue.Z)("Text Field"),group:"3",...hs},speeddialitem:{name:(0,ue.Z)("Speed Dial Button"),group:"1",...rs},startpage:{name:(0,ue.Z)("context","Start Page"),group:"1",...os},startpagebar:{name:(0,ue.Z)("Start Page Bar"),group:"1",...as},mailheader:{name:(0,ue.Z)("Message Header"),group:"6",...Qn},mailpanellist:{name:(0,ue.Z)("mail","Panel"),group:"6",...qn},mailsearchlist:{name:(0,ue.Z)("Message List"),group:"6",...Jn},mailcontent:{name:(0,ue.Z)("Message Content"),group:"6",...Xn},contactlist:{name:(0,ue.Z)("Contacts"),group:"6",...Wn},noteslist:{name:(0,ue.Z)("Notes List"),group:"7",...ts},historylist:{name:(0,ue.Z)("History List"),group:"7",...Kn},downloadlist:{name:(0,ue.Z)("Download List"),group:"7",...Gn},translatehistory:{name:(0,ue.Z)("Translate History"),group:"7",...ms},uiedit:{name:(0,ue.Z)("Text Field"),group:"7",...ds},link:{name:(0,ue.Z)("Link"),group:"8",...$n},image:{name:(0,ue.Z)("Image"),group:"8",...jn},page:{name:(0,ue.Z)("Page"),group:"8",...ns},selection:{name:(0,ue.Z)("context","Selection"),group:"8",...Yn},docedit:{name:(0,ue.Z)("Text Field"),group:"8",...zn},audiovideo:{name:(0,ue.Z)("Audio and Video"),group:"8",...Bn}},Ns=()=>Object.keys(bs),fs=e=>gs.some((t=>t.group===e)),_s=e=>{if(fs(e)){const t=gs.findIndex((t=>t.group===e));return gs[t].name}return bs[e].name},vs=e=>bs[e].options,Es=e=>bs[e].actions;function Cs(e,t,n,s){const i=vs(e);if(i){const e=e=>Promise.resolve(i(e));return ws(n,t||e,s)}return Promise.resolve([])}function ws(e,t,n){return Promise.all(e.map((e=>t(e).then((s=>{let i=z.Z.commandItem;switch(e.type){case"folder":i={...s,type:e.type,id:e.id,items:[],commandName:e.action};break;case"command":case"checkbox":i={...s,type:e.type,id:e.id,commandName:e.action};break;case"radio":break;case"container":n?s.container?(s.container.cpp=!0,s.container.mode=e.containermode||"folder",s.container.edge=e.containeredge||"off",i={type:e.type,id:e.id,...s}):"inline"===e.containermode?(s.items||(s.items=[]),i={...s,type:"container",id:e.id}):"folder"===e.containermode&&(delete s.type,i={...s,type:"folder",id:e.id}):(s.container={content:e.action,mode:e.containermode,edge:e.containeredge,cpp:!1},i={...s,type:e.type,id:e.id,commandName:e.action});break;case"separator":i={...z.Z.separatorItem,id:e.id}}return void 0!==e.title&&(i.label&&(i.label=e.title),i.labelEnglish&&(i.labelEnglish=e.title),i.settingsLabel&&delete i.settingsLabel,i.ellipsis=!1),void 0!==e.custom&&(i.custom=e.custom),i.showshortcut=e.showshortcut,"folder"===e.type&&e.children&&!1!==s.visible?ws(e.children,t,n).then((e=>(Array.prototype.push.apply(i.items,e),i))):i}))))).then((e=>e.reduce(((e,t)=>!1===t.visible?[...e]:"container"===t.type&&t.items&&n?[...e,...t.items]:[...e,t]),[])))}const ys={isSection:fs,getKeys:Ns,getSettingsList:()=>{const e={};Object.keys(bs).forEach((t=>{const n=bs[t];e[n.group]||(e[n.group]=[]),e[n.group].push(t)}));let t=[];return gs.forEach((n=>{if(e[n.group]){const s={key:n.group,indent:n.indent,name:n.name},i=e[n.group].map((e=>({key:e,indent:n.indent+1,name:_s(e)}))).sort(((e,t)=>!1===n.sort?0:e.name<t.name?-1:e.name>t.name?1:0));i&&i.length>0&&(t=[...t,s,...i])}})),t},getNamedMenu:(e,t)=>new Promise((n=>{b.Z.menuContent.get(e,((s,i,r)=>{n(r?Cs(e,t,r,!0):[])}))})),makeMenuWithContent:(e,t)=>Cs(e,void 0,t,!1),makeCommandList:e=>{if(void 0===bs[e])return[];const t={id:"",type:"command",action:""},n=vs(e);return Es(e)().map((e=>(t.action=e,{action:e,...n(t),id:e})))},hasName:e=>Ns().includes(e)||fs(e),getName:_s,getOptionFunction:vs,getActionList:Es},Ss=ys;var Ts=n(24325),ks=n.n(Ts),Is=n(8575),As=n(7509),Zs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Favicon.jsx";function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ds=["/resources","chrome://favicon","data:"];function Ms(e){return Ds.some((t=>e.startsWith(t)))}function Os(e){if(Ms(e))return e;const{hostname:t}=Is.parse(e);return`https://${(t||"").split(".").slice(-2).join(".")}/favicon.ico`}class xs extends s.PureComponent{constructor(...e){super(...e),Ps(this,"state",{loadFailed:!1}),Ps(this,"handleImageLoadError",(()=>{this.setState({loadFailed:!0})})),Ps(this,"getUrl",(()=>{const e=this.props.fallbackUrl?(0,Pt.w$)(this.props.fallbackUrl):void 0,t=(0,Pt.w$)(this.props.url);return this.state.loadFailed?e&&Ms(e)?{type:"faviconSkipCache",url:e}:{type:"faviconSkipCache",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABiUlEQVR42u2XK08DURBG6U/D80eQeMIjqGJAocCA6hqqUBASakCBAYUqSbvb92u3j6VZZjYcQ3q3hWlSRJucfF8yt3PPlbuxtb2zUtYC/1dAfge/ZHOlAkgsXSBJkn0B9ki6nvE87z5Twi7g5vtM4pCwC0yn0yPZn6KdBATcEnaBfBzHx4p0EvIIuCTMAnLhqXCiaCcBgSwJk8B4PD6Ti1K0k3QE5kn8WWA0Gl24mEwm5wjMk7AIXA6Hw6tZ6EzO7GZhFpCLChBFkUfSyVmEYVgwC8gF14PBoKhoJwGY/ThflB2HJoF+v38jL0mRTi5MLpezCchLbnu9HtyRdFLRsyTdLNDtdkvykgdFOgkl0oVZoNPpPMqip0Vot9tkiv7XLNBqtZ5l2YuinVTkAtLJMgTeMngl6STdLNBsNt+h0WiQdNI5NwvIonK9XnfxQToomwVkiV+r1YJZ6IwEYGYWCIKgbcEs4Pt+JIQOIpJO0s0ClUrls1qtQkwqOiM5R9JNAktk9QLrb0MXX53cKptKU4a6AAAAAElFTkSuQmCC"}:"page"===this.props.loadType?t.startsWith("javascript")?{type:"svg",url:ks()}:{type:"page",url:t}:t.startsWith("<svg")?{type:"svg",url:t}:Ms(t)?{type:"faviconSkipCache",url:t}:{type:this.props.loadType,url:t}}))}componentDidUpdate(e,t){t.loadFailed&&this.props.url!==e.url&&this.props.loadType!==e.loadType&&this.setState({loadFailed:!1})}render(){const{type:e,url:t}=this.getUrl();if("svg"===e)return s.createElement("span",{ref:this.props.refFavicon,className:this.props.className,style:this.props.style,dangerouslySetInnerHTML:{__html:t},__source:{fileName:Zs,lineNumber:100,columnNumber:9}});const n=(0,As.q9)(t).replace("vivaldi://","chrome://"),i="page"===e?"":"iconurl/",r=this.props.size||16,a="faviconSkipCache"===e?t:`chrome://favicon/size/${r}@1x/${i}${n} 1x,chrome://favicon/size/${r}@2x/${i}${n} 2x`;return s.createElement("img",{ref:this.props.refFavicon,className:this.props.className,width:r,height:r,srcSet:a,style:this.props.style,onError:this.handleImageLoadError,__source:{fileName:Zs,lineNumber:118,columnNumber:7}})}}const Ls=xs;var Rs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FolderIcon.jsx";class Bs extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=()=>this.props.trash?cn.nre:this.props.speeddial?this.props.open?cn.g0V:cn.$II:this.props.open?cn.fHR:cn._TQ,(n="getImageSet")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=bn()("folder-icon",this.props.className,{sd:this.props.speeddial});return s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:{marginLeft:this.props.leftMargin?this.props.leftMargin:null,marginRight:this.props.rightMargin?this.props.rightMargin:null},__source:{fileName:Rs,lineNumber:53,columnNumber:7}},this.props.icon?this.props.icon:s.createElement("g",{className:"fill-override",dangerouslySetInnerHTML:{__html:(this.props.imageSet||this.getImageSet()).small},__source:{fileName:Rs,lineNumber:63,columnNumber:13}}),(this.props.isConnecting||this.props.disconnected)&&s.createElement("g",{className:this.props.isConnecting?"folder-evaluating":"folder-error",onClick:this.props.onClickStatusIcon,__source:{fileName:Rs,lineNumber:69,columnNumber:11}},s.createElement("circle",{cx:"10.5",cy:"10.5",r:"5",__source:{fileName:Rs,lineNumber:71,columnNumber:13}}),this.props.isConnecting?s.createElement("text",{x:"7.5",y:"14",fontSize:"10px",__source:{fileName:Rs,lineNumber:73,columnNumber:17}},"~"):s.createElement("text",{x:"9.5",y:"14",fontSize:"10px",__source:{fileName:Rs,lineNumber:74,columnNumber:17}},"!")))}}const Fs=Bs,Us={getMenu:async(e,t)=>new Promise((e=>{h.Z.windows.getAll({populate:!0,windowTypes:["normal"]},(t=>{const n=W.ZP.getId();t=t.filter((e=>!e.extData||"settings"!==JSON.parse(e.extData).windowType)).filter((e=>e.id!==n)),e(t)}))})).then((n=>Promise.all(n.map((e=>new Promise((t=>{e.id?b.Z.runtimePrivate.isGuestSession(e.id,(n=>{t({window:e,isGuest:n})})):t({window:e,isGuest:!1})}))))).then((n=>n.filter((e=>{const t=W.ZP.getId();return W.ZP.isGuestSession(t)?e.isGuest:W.ZP.isIncognito(t)?e.window.incognito&&!e.isGuest:!e.isGuest})).map(((n,s)=>{const i=n.window.tabs||[],r=i.find((e=>e.active)),a=r&&r.url?Pt.jk.getDisplayTitleByUrl(r.url,r.title||r.url):s+1,o=n.window.incognito?(0,ue.Z)("Private Window with $1 Active Tab ($2)","Private Window with $1 Active Tabs ($2)",[i.length,a]):(0,ue.Z)("Window with $1 Active Tab ($2)","Window with $1 Active Tabs ($2)",[i.length,a]);return{handler:()=>{b.Z.utilities.broadcastMessage({open:{winId:parseInt(n.window.id),prompt:e,urls:t}})},...z.Z.makeNumberMnemonic(o,s)}}))))))};var Vs=n(62434),Hs=n(38064);const Ws=(e,t,n,s)=>{if(e.dataTransfer.setData("text/uri-list",t),e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("vivaldi/x-title",n),!s){const s="text/plain",i=`${s}:${`${n.replace(/[<>:"/\\|?*\n\r]/g,"_").substring(0,100)}.url`}:data:${s};base64,${btoa("[InternetShortcut]\nURL="+t)}`;e.dataTransfer.setData("DownloadURL",i)}return e};var zs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbarItem.jsx";function Gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ks extends s.Component{constructor(e){super(e),Gs(this,"dropMode",{support:!1,copy:!1}),Gs(this,"centerButtonPressed",!1),Gs(this,"regularWidth",-1),Gs(this,"canHandleClick",!0),Gs(this,"_edit",(()=>{se.Z.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})})),Gs(this,"_rename",(()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged(this.props.node.id)})),Gs(this,"_handleEditChange",(e=>{this.setState({title:e.target.value})})),Gs(this,"_handleEditKeyDown",(e=>{switch(e.key){case"Enter":this._saveTitle(e.currentTarget.value),this.refs.input.blur();break;case"Escape":this._cancelEdit(),this.refs.input.blur()}})),Gs(this,"_killEvent",(e=>{e.preventDefault(),e.stopPropagation()})),Gs(this,"_cancelEdit",(()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged("")})),Gs(this,"_saveTitle",(e=>{h.Z.bookmarks.update(this.props.node.id,{title:e})})),Gs(this,"_handleFocus",(e=>{e.currentTarget.select()})),Gs(this,"_handleEditBlur",(e=>{this.state.title||this._cancelEdit(),this.props.onEditChanged(""),this.props.onRendered(this.props.node.id,this.regularWidth)})),Gs(this,"_delete",(()=>{i.Z.remove([this.props.node.id])})),Gs(this,"_handleItemMouseDown",(e=>{e.button!==Nn.kLeft&&(this.centerButtonPressed=e.button===Nn.kCenter,e.preventDefault()),this.canHandleClick=!this.props.menuOpen})),Gs(this,"_handleItemMouseUp",(e=>{e.button===Nn.kCenter&&(e.preventDefault(),!0===this.centerButtonPressed&&0===e.buttons&&this.props.onItemActivated(this.props.node.id,!0,!1,e))})),Gs(this,"_handleClick",(e=>{this.canHandleClick&&this.props.onItemActivated(this.props.node.id,!0,!0,e),e.preventDefault(),e.stopPropagation()})),Gs(this,"_handleKeyDown",(e=>{switch("Enter"===e.key&&!0===e.repeat&&e.preventDefault(),e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.node.id,"Enter"===e.key,!0,e);break;case"ArrowLeft":this.props.moveFocus(this.props.node.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.node.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()})),Gs(this,"_handleDrop",(e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support&&""!==this.props.dragover.position){const t="on"===this.props.dragover.position?this.props.node.id:this.props.node.parentId,n="on"===this.props.dragover.position?0:this.props.dragover.index+("right"===this.props.dragover.position?1:0);t&&i.Z.onDropEvent(e,t,n)}this.props.resetDragover()})),Gs(this,"_handleDragStart",(e=>{const t=W.ZP.isIncognito(this.context.vivaldiWindowId);this.props.onDragStart(this.props.node.id),this.setState({dragging:!0});const n=JSON.stringify([this.props.node.id.toString()]);e.dataTransfer.setData(en.yR,n);const s=Pt.jk.getHoverUrl(tn.ZP.getUrlByNode(this.props.node));Ws(e,s,this.props.node.title,t),e.dataTransfer.effectAllowed="all"})),Gs(this,"_handleDragEnd",(e=>{this.setState({dragging:!1}),this.props.onDragEnd()})),Gs(this,"_handleDragLeave",(e=>{})),Gs(this,"_handleDragEnter",(e=>{this.dropMode=this.props.getDropModeForEvent(e)})),Gs(this,"_handleDragOver",(e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move",this.props.onDragOver(this.props.node,e))})),Gs(this,"_handleBlur",(()=>{this.props.onItemBlur(this.props.node.id)})),Gs(this,"_handleMouseEnter",(e=>{if(!this.props.statusOff){const e=tn.ZP.getUrlByNode(this.props.node);X.Z.setStatus(e||this.props.node.title)}this.props.onItemEnter(this.props.node.id)})),Gs(this,"_handleMouseLeave",(e=>{this.props.statusOff||X.Z.clearStatus(),this.centerButtonPressed=!1,this.props.onItemLeave(this.props.node.id)})),Gs(this,"_openInNewWindow",((e,t)=>{const n={bookmarks:en.ZP.getBookmarksByNode(e),inNewWindow:!0,incognito:t};en.ZP.open(n,!0)})),Gs(this,"_openInNewTab",((e,t)=>{const n={bookmarks:en.ZP.getBookmarksByNode(e),inCurrent:!1,inBackground:t||A.ZP.get(P.kTabsOpenNewInBackground)};en.ZP.open(n,!0)})),Gs(this,"_open",(e=>{const t={bookmarks:en.ZP.getBookmarksByNode(e),inCurrent:!0};en.ZP.open(t,!0)})),Gs(this,"_getContextMenuItems",((e,t)=>{const n=tn.ZP.isSeparator(t),s=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this._openInNewTab(t,!1),visible:!n,...s(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this._openInNewTab(t,!0),visible:!n&&!A.ZP.get(P.kTabsOpenNewInBackground),...s(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:()=>this._open(t),visible:!n,...s(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>this._openInNewWindow(t,!1),visible:!n,...s(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>this._openInNewWindow(t,!0),visible:!n,...s(e,{})};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":{const t=await Us.getMenu(!0,en.ZP.getUrlsByNodes([e]));return{visible:!n&&t.length>0,items:t,...s(e,{})}}case"CONTEXT_BOOKMARK":return{handler:this.props.addActiveTab,visible:!n,...s(e,{})};case"CONTEXT_NEW_BOOKMARK":return{handler:this.props.createNewBookmark,...s(e,{})};case"CONTEXT_NEW_FOLDER":return{handler:this.props.createNewFolder,...s(e,{})};case"CONTEXT_NEW_SEPARATOR":return{handler:this.props.createNewSeparator,visible:!this.props.isSorted,...s(e,{})};case"CONTEXT_EDIT":return{handler:this._edit,visible:!n,...s(e,{})};case"CONTEXT_RENAME":return{handler:this._rename,visible:!n,...s(e,{})};case"CONTEXT_CUT":return{handler:this.props.onCut,visible:!n,...s(e,{})};case"CONTEXT_COPY":return{handler:this.props.onCopy,visible:!n,...s(e,{})};case"CONTEXT_PASTE":return{handler:this.props.onPaste,visible:!n,...s(e,{})};case"CONTEXT_DELETE":return{handler:this._delete,...s(e,{})};default:return{...s(e,{})}}}))})),Gs(this,"_onContextMenu",(e=>{this.props.editTitle?e.stopPropagation():(e.persist(),e.preventDefault(),e.stopPropagation(),this._getContextMenuItems("bookmarkbaritem",this.props.node).then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)})))})),Gs(this,"_onFocus",(()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.node.id)})),this.state={dragging:!1,title:e.node.title}}componentDidUpdate(){const e=pn.findDOMNode(this.refs.button);e instanceof HTMLElement&&(this.props.onRendered(this.props.node.id,e.offsetWidth),this.props.editTitle||(this.regularWidth=e.offsetWidth))}componentDidMount(){const e=pn.findDOMNode(this.refs.button);e instanceof HTMLElement&&this.props.onRendered(this.props.node.id,e.offsetWidth)}render(){const e=this.props.node,t=tn.ZP.getUrlByNode(e),n=tn.ZP.isSeparator(e),i=tn.ZP.isFolder(e);let r;i&&"icon"!==this.props.display?r=(0,ue.Z)("Show folder contents"):"icon"===this.props.display&&e.title?(r=e.title,t&&(r=r+"\n"+t)):t&&(r=t);let a=!1;"icon"!==this.props.display&&(a="iconexceptfolders"!==this.props.display||!t);const o=e.faviconUrl?e.faviconUrl:e.url,l=e.faviconUrl?"faviconFromCache":"page";return s.createElement("button",{key:e.id,ref:"button","data-id":e.id,"data-offset":0,title:r,tabIndex:this.props.keyAccess,className:bn()({uifocusstop:this.props.uiFocus,bookmarkbarItem:!0,highlighted:this.props.highlighted||this.props.menuOpen,folder:!n&&!e.url,"data-cut":this.props.isCut,dragging:this.state.dragging,dragover:this.props.dragover.id===e.id&&"on"===this.props.dragover.position,dragoverLeft:this.props.dragover.id===e.id&&"left"===this.props.dragover.position,dragoverRight:this.props.dragover.id===e.id&&"right"===this.props.dragover.position}),draggable:!this.props.editTitle,onDragStart:this._handleDragStart,onDragEnd:this._handleDragEnd,onDragEnter:this._handleDragEnter,onDragOver:this._handleDragOver,onDrop:this._handleDrop,onBlur:this._handleBlur,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onClick:this.props.editTitle?void 0:this._handleClick,onMouseDown:this.props.editTitle?void 0:this._handleItemMouseDown,onMouseUp:this.props.editTitle?void 0:this._handleItemMouseUp,onKeyDown:this.props.editTitle?void 0:this._handleKeyDown,onContextMenu:this._onContextMenu,onFocus:this._onFocus,onKeyUp:this._killEvent,__source:{fileName:zs,lineNumber:526,columnNumber:7}},n&&s.createElement("span",{className:"separator",__source:{fileName:zs,lineNumber:562,columnNumber:26}}),!n&&o&&"text"!==this.props.display&&s.createElement(Ls,{url:o,loadType:l,__source:{fileName:zs,lineNumber:564,columnNumber:11}}),!n&&!e.url&&"text"!==this.props.display&&s.createElement(Fs,{speeddial:e.speeddial,__source:{fileName:zs,lineNumber:568,columnNumber:11}}),!n&&!this.props.editTitle&&a&&e.title&&s.createElement("span",{__source:{fileName:zs,lineNumber:572,columnNumber:11}},("text"===this.props.display&&i?"▾ ":"")+e.title),this.props.editTitle&&s.createElement("input",{ref:"input",type:"text",value:this.state.title,onFocus:this._handleFocus,onBlur:this._handleEditBlur,onClick:this._killEvent,onKeyDown:this._handleEditKeyDown,onChange:this._handleEditChange,autoFocus:!0,__source:{fileName:zs,lineNumber:580,columnNumber:11}}))}}Gs(Ks,"contextType",Vs.Z);const js=Ks;var Ys=n(65914),$s=n(35272),Xs=n(56371);function Qs(){return Qs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qs.apply(this,arguments)}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Js extends s.PureComponent{constructor(...e){super(...e),qs(this,"componentDidMount",(()=>{this._attachObserver()})),qs(this,"componentWillUnmount",(()=>{this._detachObserver()})),qs(this,"_attachObserver",(()=>{const{Element:e,ResizeObserver:t}=this.context,n=pn.findDOMNode(this);if(n instanceof e)try{this._observer=new t(this.props.onResize),this._observer.observe(n)}catch(e){console.warn(e)}})),qs(this,"_detachObserver",(()=>{const{Element:e}=this.context,t=pn.findDOMNode(this);t instanceof e&&this._observer.unobserve(t)}))}componentDidUpdate(e){this.props.attached&&!e.attached&&this._detachObserver(),!this.props.attached&&e.attached&&this._attachObserver()}render(){const e=this.props.component,t=(0,Xs.Z)(this.props,["onResize","component","children","attached"]);return s.createElement(e,Qs({},t,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\vivaldi\\NativeResizeObserver.js",lineNumber:78,columnNumber:7}}),this.props.children)}}qs(Js,"contextType",Vs.Z),qs(Js,"defaultProps",{className:"resize",component:"div",children:null,attached:!0});const ei=Js;var ti=n(51602),ni=n(92696);function si(e){return!!e&&e.contains(document.activeElement)}function ii(e){return e.querySelectorAll("a[href]:not([tabindex='-1']),\n    button:not([disabled]):not([tabindex='-1']),\n    input:not([disabled]):not([tabindex='-1']),\n    select:not([disabled]):not([tabindex='-1']),\n    textarea:not([disabled]):not([tabindex='-1']),\n    [contenteditable]:not([tabindex='-1']),\n    [tabindex]:not([disabled]):not([tabindex='-1'])")}function ri(e,t){const n=[...ii(t||e)],s=n.findIndex((t=>t===e.activeElement));n[(s+1)%n.length].focus()}var ai=n(97748),oi=n(34155),li="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbar.jsx";function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ui extends s.PureComponent{constructor(e,t){super(e),ci(this,"acceptEnterId",""),ci(this,"draggedId",""),ci(this,"dropMode",{support:!1,copy:!1}),ci(this,"clipboardId",""),ci(this,"timer",null),ci(this,"_onStoreChange",(()=>{const e=tn.ZP.getBookmarksBarNodes();this.setState((t=>{const n=this._getRenderedItems(e,t.sorting,!0===t.newItemAdded?t.editId:"");return{nodes:e,map:new Map,renderedArray:n,cutIds:tn.ZP.getCutIds()}}))})),ci(this,"_onCommandSpy",(()=>{si(pn.findDOMNode(this))||this.state.renderedArray.length>0&&this._moveFocus(this.state.renderedArray[0].id,"current",!0)})),ci(this,"_getRenderedItems",((e,t,n)=>{const s=(0,ni.Z)(e);if(s.length>0&&t&&t.sortOrder>=ti.Z.ASCENDING_SORT){const e=(e,n)=>tn.ZP.treeSortComparator(e,n,{sortOrder:t.sortOrder,sortField:t.sortField});if(ti.Z.treeSort(s,e),""!==n){const e=s.findIndex((e=>e.id===n));-1!==e&&s.splice(0,0,s.splice(e,1)[0])}}return s})),ci(this,"_handleKeyDown",(e=>{e.keyCode===$s.Z.KEY_ESCAPE&&this._resetDragover()})),ci(this,"_onButtonRendered",((e,t)=>{this.state.map.get(e)!==t&&this.setState((n=>{const s=new Map(n.map);return s.set(e,t),{map:s}}))})),ci(this,"_onExtenderRendered",((e,t)=>{this.setState({extenderWidth:e})})),ci(this,"_onResize",(e=>{const t=e[0].target;this.setState({maxWidth:Math.floor(t.clientWidth)})})),ci(this,"_addActiveTab",(()=>{i.Z.bookmarkPageInFolder(V.ZP.unsafeGetActivePage(),tn.ZP.getBookmarkBarFolderId(),0)})),ci(this,"_getItemInsertIndex",(e=>{const t=this.state.renderedArray.length;return"number"!=typeof e||t<e?t:e})),ci(this,"_createNewBookmark",(()=>{se.Z.showBookmarkDialog({mode:"addbookmark",id:tn.ZP.getBookmarkBarFolderId(),index:0})})),ci(this,"_createNewFolder",(()=>{se.Z.showBookmarkDialog({mode:"addfolder",id:tn.ZP.getBookmarkBarFolderId(),index:0})})),ci(this,"_createNewSeparator",(e=>{i.Z.createSeparator(tn.ZP.getBookmarkBarFolderId(),this._getItemInsertIndex(e))})),ci(this,"_resetDragover",(()=>{this.setState({dragover:{id:"",position:"",index:0}})})),ci(this,"_onEditChanged",(e=>{""===e?this.setState((e=>({renderedArray:this._getRenderedItems(e.nodes,e.sorting,""),newItemAdded:!1,editId:""}))):this.setState({editId:e})})),ci(this,"_onDragEndBookmark",(()=>{this.draggedId="",this._resetDragover()})),ci(this,"_onDropBar",(e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=tn.ZP.getBookmarkBarFolderId(),n=tn.ZP.getBookmarksBarNodes().length;i.Z.onDropEvent(e,t,n)}this._resetDragover()})),ci(this,"_onDragEnter",(e=>{this.dropMode=this._getDropModeForEvent(e)})),ci(this,"_onDragOverBar",(e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move")})),ci(this,"_onDragOver",((e,t)=>{if(e.id!==this.draggedId&&void 0!==e.index){var n="";if(this.state.sorting.sortOrder===ti.Z.NO_SORTING){const s=t.currentTarget.getBoundingClientRect(),i=(t.clientX-s.left)/s.width;n=tn.ZP.isFolder(e)?i<=.33?"left":i>.66?"right":"on":i<=.5?"left":"right"}else tn.ZP.isFolder(e)&&(n="on");(this.state.dragover.id!==e.id||this.state.dragover.id===e.id&&this.state.dragover.position!==n)&&this.setState({dragover:{id:e.id,position:n,index:e.index}})}})),ci(this,"_onDragStart",(e=>{this.draggedId=e})),ci(this,"_getDropModeForEvent",(e=>{const t={support:!1,copy:!1};return t.support=e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===en.yR)),t.support&&(e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))?t.copy=!1:t.copy=t.support&&(en.ZP.isCopyModifierPressed(e)||!e.dataTransfer.types.some((e=>e===en.yR)))),t})),ci(this,"_onCut",(e=>{i.Z.cut(e,[this.clipboardId]),e.stopPropagation(),e.preventDefault()})),ci(this,"_onCopy",(e=>{i.Z.copy(e,[this.clipboardId]),e.stopPropagation(),e.preventDefault()})),ci(this,"_onPaste",(e=>{const t=this.clipboardId===tn.ZP.getBookmarkBarFolderId();i.Z.paste(e,this.clipboardId,t),e.preventDefault(),e.stopPropagation()})),ci(this,"_onCutContextMenu",(e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("cut",this._onCut),t.execCommand("cut"),t.removeEventListener("cut",this._onCut)})),ci(this,"_onCopyContextMenu",(e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("copy",this._onCopy),t.execCommand("copy"),t.removeEventListener("copy",this._onCopy)})),ci(this,"_onPasteContextMenu",(e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("paste",this._onPaste),t.execCommand("paste"),t.removeEventListener("paste",this._onPaste)})),ci(this,"_onSortOrderChange",(()=>{const e=this.state.sorting.sortOrder===ti.Z.DESCENDING_SORT?ti.Z.ASCENDING_SORT:ti.Z.DESCENDING_SORT;this._onSortChange(e,this.state.sorting.sortField)})),ci(this,"_onTitleSortChange",(e=>{let t=this.state.sorting.sortOrder;"manually"!==e&&t===ti.Z.NO_SORTING?t=ti.Z.ASCENDING_SORT:"manually"===e&&(t=ti.Z.NO_SORTING),this._onSortChange(t,e)})),ci(this,"_onSortChange",((e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}});const n={sortOrder:e,sortField:t};st.Z.set(P.kBookmarksBarSorting,n),this.setState((e=>({renderedArray:this._getRenderedItems(e.nodes,n,!0===e.newItemAdded?e.editId:"")})))})),ci(this,"_getContextMenuItems",(e=>{const t=this.state.sorting.sortOrder!==ti.Z.NO_SORTING,n=Ss.getOptionFunction(e),s=()=>[{handler:this._onTitleSortChange.bind(this,"manually"),type:"checkbox",checked:"manually"===this.state.sorting.sortField,...(0,Mn.Z)("radio","Manually")},{handler:this._onTitleSortChange.bind(this,"title"),type:"checkbox",checked:"title"===this.state.sorting.sortField,...(0,Mn.Z)("by Title")},{handler:this._onTitleSortChange.bind(this,"url"),type:"checkbox",checked:"url"===this.state.sorting.sortField,...(0,Mn.Z)("by Address")},{handler:this._onTitleSortChange.bind(this,"nickname"),type:"checkbox",checked:"nickname"===this.state.sorting.sortField,...(0,Mn.Z)("by Nickname")},{handler:this._onTitleSortChange.bind(this,"description"),type:"checkbox",checked:"description"===this.state.sorting.sortField,...(0,Mn.Z)("by Description")},{handler:this._onTitleSortChange.bind(this,"dateadded"),type:"checkbox",checked:"dateadded"===this.state.sorting.sortField,...(0,Mn.Z)("by Date Created")},z.Z.separatorItem,{handler:this._onSortOrderChange,visible:this.state.sorting.sortOrder!==ti.Z.NO_SORTING&&this.state.sorting.sortOrder===ti.Z.ASCENDING_SORT,...(0,Mn.Z)("Descending")},{handler:this._onSortOrderChange,visible:this.state.sorting.sortOrder!==ti.Z.NO_SORTING&&this.state.sorting.sortOrder!==ti.Z.ASCENDING_SORT,...(0,Mn.Z)("Ascending")}];return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_BOOKMARK":return{handler:this._addActiveTab,...n(e,{})};case"CONTEXT_NEW_BOOKMARK":return{handler:this._createNewBookmark,...n(e,{})};case"CONTEXT_NEW_FOLDER":return{handler:this._createNewFolder,...n(e,{})};case"CONTEXT_NEW_SEPARATOR":return{handler:()=>{this._createNewSeparator(void 0)},visible:!t,...n(e,{})};case"CONTEXT_PASTE":return{handler:()=>{this._onPasteContextMenu(tn.ZP.getBookmarkBarFolderId())},...n(e,{})};case"CONTEXT_CONTAINER_SORT":return{items:s(),...n(e,{})};default:return{...n(e,{})}}}))})),ci(this,"_moveFocus",((e,t,n)=>{const{document:s}=this.context;if(!0===n||si(pn.findDOMNode(this))){const n=Array.from(s.querySelectorAll("button.bookmarkbarItem")).map((e=>e.getAttribute("data-id"))).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:n.indexOf(e);if(-1===t)return;e=n[t]}else if("right"===t||"left"===t){if(1===n.length)return;let s=n.indexOf(e);s="right"===t?s+1>=n.length?0:s+1:s<=0?n.length-1:s-1,e=n[s]}const i=s.querySelector(`button.bookmarkbarItem[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&this.setState({highlightedId:e},(()=>i.focus()))}})),ci(this,"_handleItemActivated",((e,t,n,s)=>{const i=tn.ZP.getItemById(e);if(i)if(tn.ZP.isFolder(i)&&n){const e=this._getMenuSorting(),t="top"===A.ZP.get(P.kBookmarksBarPosition)?"bottom":"top";Pn.show(this.context,i.id,this._getFolderSiblings(),e.field,e.order,t,this._onMenuVisibilityChanged)}else if(t&&s){const e=(0,ai.Z)({ctrlKey:s.ctrlKey,altKey:s.altKey,shiftKey:s.shiftKey,metaKey:s.metaKey,button:"number"==typeof s.button?s.button:-1});en.ZP.open({...e,bookmarks:en.ZP.getBookmarksByNode(i)},!0),se.Z.setPaneFocus(!1)}})),ci(this,"_handleItemEnter",(e=>{""!==this.acceptEnterId&&this.acceptEnterId!==e||(si(pn.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))})),ci(this,"_handleItemLeave",(e=>{""===this.state.openMenuId&&this.setState({highlightedId:""})})),ci(this,"_handleItemBlur",(e=>{oi.nextTick((()=>{si(pn.findDOMNode(this))||this.setState({highlightedId:""})}))})),ci(this,"_handleItemHighlightMissing",(e=>{this.setState({highlightedId:e})})),ci(this,"_handleLeaveBar",(()=>{se.Z.setPaneFocus(!1),o.Z.executeActions("COMMAND_FOCUS_WEBVIEW")})),ci(this,"_getMenuSorting",(()=>ti.Z.toMenuSorting(this.state.sorting.sortOrder,this.state.sorting.sortField))),ci(this,"_getFolderSiblings",(()=>{const{document:e}=this.context;return Array.from(e.querySelectorAll("button.bookmarkbarItem")).filter((e=>e.classList.contains("folder")||e.classList.contains("chevron"))).map((e=>{const t=e.getBoundingClientRect();return{id:e.dataset.id,offset:Number(e.dataset.offset),folderGroup:Boolean(e.classList.contains("folder")),rect:{x:parseInt(t.left),y:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height)}}}))})),ci(this,"_onMenuVisibilityChanged",(e=>{""===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout((()=>{this.acceptEnterId="",this.timer=null}),100),si(pn.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:""})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e})})),ci(this,"_isSorted",(()=>"manually"!==this.state.sorting.sortField)),ci(this,"_onContextMenu",(e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this._getContextMenuItems("bookmarkbar").then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))})),ci(this,"_renderBookmarkBarButton",((e,t)=>s.createElement(js,{ref:e.id,key:e.id,node:e,editTitle:this.state.editId===e.id,isCut:-1!==this.state.cutIds.indexOf(e.id),menuOpen:this.state.openMenuId===e.id,display:this.props.display,statusOff:this.props.statusOff,dragover:this.state.dragover,highlighted:this.state.highlightedId===e.id,keyAccess:0===t?this.props.keyAccess:-1,uiFocus:0===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,onEditChanged:this._onEditChanged,onDragStart:this._onDragStart,onDragEnd:this._onDragEndBookmark,onDragOver:this._onDragOver,getDropModeForEvent:this._getDropModeForEvent,addActiveTab:this._addActiveTab,createNewBookmark:this._createNewBookmark,createNewFolder:this._createNewFolder,createNewSeparator:()=>this._createNewSeparator(t),isSorted:this._isSorted(),resetDragover:this._resetDragover,onRendered:this._onButtonRendered,onCut:this._onCutContextMenu.bind(this,e.id),onCopy:this._onCopyContextMenu.bind(this,e.id),onPaste:this._onPasteContextMenu.bind(this,e.id),__source:{fileName:li,lineNumber:722,columnNumber:7}})));const{document:n}=t;this.state={nodes:tn.ZP.getBookmarksBarNodes(),map:new Map,dragover:{id:"",position:"",index:0},maxWidth:n.documentElement?n.documentElement.clientWidth:0,extenderWidth:0,sorting:{sortOrder:ti.Z.NO_SORTING,sortField:"manually"},cutIds:tn.ZP.getCutIds(),editId:"",newItemAdded:!1,renderedArray:[],openMenuId:"",highlightedId:""}}componentDidMount(){const e=A.ZP.get(P.kBookmarksBarSorting);this._onSortChange(e.sortOrder,e.sortField),tn.ZP.addChangeListener(this._onStoreChange),Ys.Z.addListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}componentWillUnmount(){this.timer&&clearTimeout(this.timer),tn.ZP.removeChangeListener(this._onStoreChange),Ys.Z.removeListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}render(){let e=0;const t=[];let n=0,i="",r=0;for(let s=0;s<this.state.renderedArray.length;s++){const a=this.state.renderedArray[s];if(!this._isSorted()||!tn.ZP.isSeparator(a)){const o=this.state.map.get(a.id),l=e+("number"==typeof o?o:0);if(l>this.state.maxWidth||l+this.state.extenderWidth>this.state.maxWidth&&s+1<this.state.renderedArray.length){n=s,""===this.state.editId&&this.state.renderedArray[0].parentId&&(i=this.state.renderedArray[0].parentId);break}t.push(this._renderBookmarkBarButton(a,r)),r++,e=l}}const a=""!==i?s.createElement(vn,{id:i,offset:n,keyAccess:-1,menuOpen:this.state.openMenuId===i,highlighted:this.state.highlightedId===i,moveFocus:this._moveFocus,onRendered:this._onExtenderRendered,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,__source:{fileName:li,lineNumber:792,columnNumber:7}}):null;return s.createElement("div",{className:`bookmark-bar ${this.props.display}`,onDragEnter:this._onDragEnter,onDragOver:this._onDragOverBar,onDragLeave:this._resetDragover,onDrop:this._onDropBar,onContextMenu:this._onContextMenu,__source:{fileName:li,lineNumber:809,columnNumber:7}},s.createElement(ei,{className:"observer",onKeyDown:this._handleKeyDown,onResize:this._onResize,__source:{fileName:li,lineNumber:816,columnNumber:9}},t,a))}}ci(ui,"contextType",Vs.Z);const mi=ui;var di=n(46540),hi=n(43179),pi=n(16910),gi=n(96675),bi=n(46528);function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fi extends s.Component{constructor(...e){super(...e),Ni(this,"setCheckedDisabledRadio",(e=>{this.getRadios().forEach((t=>{t.value===e.value.toString()&&(t.checked=!0),t.disabled=Boolean(e.disabled)}))})),Ni(this,"getRadios",(()=>pn.findDOMNode(this).querySelectorAll('input[type="radio"]')))}componentDidMount(){this.getRadios().forEach((e=>{e.name=this.props.name,e.addEventListener("change",this.props.onChange)})),this.setCheckedDisabledRadio(this.props)}componentDidUpdate(e){e.value===this.props.value&&e.disabled===this.props.disabled||this.setCheckedDisabledRadio(this.props)}componentWillUnmount(){this.getRadios().forEach((e=>{e.removeEventListener("change",this.props.onChange)}))}render(){return s.createElement("div",{className:this.props.className,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RadioGroup.jsx",lineNumber:62,columnNumber:7}},this.props.children)}}const _i=fi;var vi="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureControlPanel.jsx";const Ei=[{icon:cn.oa7,mode:"area",label:(0,ue.Z)("capture","Selection")},{icon:cn.$O3,mode:"fullpage",label:(0,ue.Z)("Full Page")}],Ci=[{value:"png",label:(0,ue.Z)("Save as PNG")},{value:"jpg",label:(0,ue.Z)("Save as JPEG")},{value:"clipboard",label:(0,ue.Z)("Copy to Clipboard")},{value:"note",label:(0,ue.Z)("Create note with...")}],wi=12;function yi(e){e.keyCode===$s.Z.KEY_ESCAPE&&hi.Z.cancelCallback()}const Si=e=>{const t=(0,s.useContext)(Vs.Z),{innerWidth:n}=t,{isOffScreenBelow:i,isOffScreenLeft:r,isOffScreenTopAndBottom:a}=function(e){const t=(0,s.useContext)(Vs.Z);let n=!1,i=!1,r=!1,a=!1;if(!e)return{isOffScreenTopAndBottom:r,isOffScreenBelow:n,isOffScreenLeft:a};const{top:o,height:l,left:c,width:u}=e,{innerHeight:m}=t;return i=o<46,a=c+u<300,n=m>o+l+34+17,r=!n&&i,{isOffScreenBelow:n,isOffScreenLeft:a,isOffScreenTopAndBottom:r}}(e);if(!e)return null;const{top:o,height:l,left:c}=e;return a?{left:c+wi,top:o+l-34-wi}:e?{top:i?e.top+e.height+wi:e.top-34-wi,...r?{left:e.left}:{right:n-(e.left+e.width)}}:null},Ti=[P.kWebpagesCaptureSaveLocation,P.kWebpagesCaptureCompressionFormat,P.kKeyboardTabToAll];const ki=(0,bi.Z)((function({captureSquare:e,mode:t,setMode:n,inProgress:i,isInternalUrl:r,prefValues:a,setFormat:o,doScreenshot:l}){const c=Si(e),u=a[P.kWebpagesCaptureSaveLocation],m="clipboard"===u||"note"===u?u:a[P.kWebpagesCaptureCompressionFormat],d=bn()("ControlPanel",{Default:!c,InProgress:i});return s.createElement("form",{className:d,style:c,onKeyDown:yi,onSubmit:l,__source:{fileName:vi,lineNumber:189,columnNumber:5}}," ",i?s.createElement(s.Fragment,null,s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.GO5.medium},__source:{fileName:vi,lineNumber:196,columnNumber:9}}),s.createElement("span",{__source:{fileName:vi,lineNumber:197,columnNumber:9}},(0,ue.Z)("Capture in Progress..."))):s.createElement(gi.Z,{focusName:"focus-capture-dialog",forceTrap:!0,__source:{fileName:vi,lineNumber:199,columnNumber:9}},!e&&s.createElement(_i,{name:"modePicker",className:"ControlPanel-ModeSelector",onChange:n,disabled:r,value:t,__source:{fileName:vi,lineNumber:204,columnNumber:9}},Ei.map((e=>{if(e.mode.includes("fullpage")&&r)return null;const n=bn()("ControlPanel-ModeSelector--Option",{Active:e.mode.includes(t)});return s.createElement("label",{key:e.mode,className:n,__source:{fileName:vi,lineNumber:219,columnNumber:15}},s.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon},__source:{fileName:vi,lineNumber:222,columnNumber:17}}),s.createElement("input",{type:"radio",value:e.mode,tabIndex:r?-1:a[P.kKeyboardTabToAll],__source:{fileName:vi,lineNumber:223,columnNumber:17}}),s.createElement("span",{__source:{fileName:vi,lineNumber:228,columnNumber:17}},e.label))}))),s.createElement("div",{className:"ControlPanel-Output",__source:{fileName:vi,lineNumber:234,columnNumber:9}},s.createElement("p",{className:"ControlPanel-Output--Description",__source:{fileName:vi,lineNumber:235,columnNumber:11}},(0,ue.Z)("format","Output:")),s.createElement("select",{className:"ControlPanel-Output--Select",onChange:o,value:m,__source:{fileName:vi,lineNumber:238,columnNumber:11}},Ci.map((e=>s.createElement("option",{key:e.value,value:e.value,__source:{fileName:vi,lineNumber:245,columnNumber:17}},e.label)))),s.createElement("input",{className:"ControlPanel-Output--CaptureButton primary",type:"submit",disabled:"fullpage"!==t&&!("area"===t&&void 0!==e),value:(0,ue.Z)("image","Capture"),__source:{fileName:vi,lineNumber:253,columnNumber:11}}))))}),Ti);var Ii="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureArea.jsx";const Ai=10,Zi=[P.kWebpagesCaptureCaptureMode,P.kWebpagesCaptureSaveLocation],Pi=["TopLeft","TopMid","TopRight","BottomLeft","BottomMid","BottomRight","MidLeft","MidRight"],Di=()=>{const e=V.ZP.getActivePage();return!(!e?.id||!e?.url)&&Pt.jk.isInternalUrl(e?.url)};const Mi=(0,bi.Z)((function({prefValues:e}){const t=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(0),r=(0,s.useRef)(0),a=(0,s.useRef)(0),o=(0,s.useRef)(0),l=(0,s.useRef)({}),[c,u]=(0,s.useState)(Di()),m=c?"area":e[P.kWebpagesCaptureCaptureMode],d=(0,s.useContext)(Vs.Z),[h,p]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),[N,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t.current?.focus()}),[]),(0,s.useEffect)((()=>{const e=()=>{u(Di())};return V.ZP.addChangeListener(e),()=>{V.ZP.removeChangeListener(e)}}),[]);const _=()=>{const{x3:e,x4:t,y3:n,y4:s}={x3:Math.round(Math.min(i.current,r.current)),x4:Math.round(Math.max(i.current,r.current)),y3:Math.round(Math.min(a.current,o.current)),y4:Math.round(Math.max(a.current,o.current))},l=d.innerWidth,c=d.innerHeight;p({rectStyle:{left:e,top:n,width:t-e,height:s-n},areaStyle:{background:"transparent",borderWidth:`${n}px ${l-t}px ${c-s}px ${e}px`}})},v=e=>{b(!0),_();const t=Math.round(e.clientX),n=Math.round(e.clientY),s=Math.abs(t-i.current)<=8,c=Math.abs(t-r.current)<=8,u=Math.abs(n-a.current)<=8,m=Math.abs(n-o.current)<=8;l.current={x1:s,x2:c,y1:u,y2:m},e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString())},E=e=>{g&&(l.current.x1&&(i.current=e.clientX),l.current.x2&&(r.current=e.clientX),l.current.y1&&(a.current=e.clientY),l.current.y2&&(o.current=e.clientY),C(),_())},C=()=>{const e=i.current,t=r.current,n=a.current,s=o.current,{innerWidth:l,innerHeight:c}=d;e>l?i.current=l:t>e?(l-t<Ai&&(r.current=l),e<Ai&&(i.current=0)):t<Ai&&(r.current=0),n>c?a.current=c:s>n?(c-s<Ai&&(o.current=c),n<Ai&&(a.current=0)):s<Ai&&(o.current=0)},w=e=>{if(g){e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString()),b(!1);const{current:t}=n;if(!t)return;const{width:s,height:i}=t.getBoundingClientRect();(s<=3||i<=3)&&hi.Z.cancelCallback()}},y=()=>{const{current:e}=n,{current:s}=t;if(e&&s)if("area"===m){p({areaStyle:{borderColor:"rgba(0,0,0,0)",visibility:"hidden"},rectStyle:null}),b(!0),s.addEventListener("transitionend",S,!0)}else f(!0),T()},S=()=>{t.current?.removeEventListener("transitionend",S);const e={x:Math.min(i.current,r.current),y:Math.min(a.current,o.current),width:Math.max(r.current,i.current)-Math.min(i.current,r.current),height:Math.max(o.current,a.current)-Math.min(o.current,a.current)};hi.Z.performCapture(d.vivaldiWindowId,m,e)},T=async()=>{const t=e[P.kWebpagesCaptureSaveLocation],n=e[P.kWebpagesCaptureCompressionFormat],s=V.ZP.getActivePage()?.get("id");if(!s)return;const{image:i}=await hi.Z.captureFullpage(s,n,t);f(!1),pi.Z.disableCapture(),hi.Z.handleCaptureLocation(m,i)},k=bn()("CaptureArea","PreserveTransitions",{Area:"area"===m,FullPage:"area"!==m}),I=bn()("CaptureRect",{Hidden:!h?.rectStyle});return s.createElement(s.Fragment,null,s.createElement("div",{ref:t,style:h?.areaStyle,id:"capture-area",className:k,tabIndex:0,onKeyDown:e=>{const{keyCode:t}=e;t===$s.Z.KEY_ESCAPE?(hi.Z.cancelCallback(),g&&b(!1)):t!==$s.Z.KEY_ENTER&&t!==$s.Z.KEY_RETURN||y()},onPointerDown:e=>{m.includes("area")&&(b(!0),i.current=r.current=e.clientX,a.current=o.current=e.clientY,_(),e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString()))},onPointerMove:e=>{g&&(r.current=e.clientX,o.current=e.clientY,C(),_())},onPointerUp:w,__source:{fileName:Ii,lineNumber:363,columnNumber:7}}),!g&&s.createElement(ki,{captureSquare:h?.rectStyle,isInternalUrl:c,inProgress:N,mode:m,setMode:e=>{const{value:t}=e.currentTarget;"area"!==t&&"fullpage"!==t||st.Z.set(P.kWebpagesCaptureCaptureMode,t)},setFormat:e=>{const{value:t}=e.currentTarget;"png"===t||"jpg"===t?(st.Z.set(P.kWebpagesCaptureSaveLocation,"file"),st.Z.set(P.kWebpagesCaptureCompressionFormat,t)):st.Z.set(P.kWebpagesCaptureSaveLocation,t)},doScreenshot:y,__source:{fileName:Ii,lineNumber:375,columnNumber:9}}),s.createElement("div",{ref:n,style:h?.rectStyle,className:I,__source:{fileName:Ii,lineNumber:385,columnNumber:7}},Pi.map((e=>s.createElement("div",{key:e,className:`CaptureRect-Corner ${e}`,onPointerDown:v,onPointerMove:E,onPointerUp:w,__source:{fileName:Ii,lineNumber:391,columnNumber:13}})))))}),Zi);class Oi extends(S()){getInitialState(){return{capturing:!1}}reduce(e,t){switch(t.actionType){case"CAPTURE_ENABLE":return{capturing:!0};case"CAPTURE_DISABLE":return{capturing:!1}}return e}getCapturingState(){return this.getState().capturing}}const xi=new Oi(m.Z);var Li=n(66524),Ri=n(26729),Bi=n.n(Ri),Fi=n(30801);const Ui="change";class Vi extends(Bi()){constructor(){super(),m.Z.register((e=>{if(e.actionType===Fi.Z.WEBVIEW_SET_UTILITY_VIEW)this._utilityWebView=e.webview,this.emit(Ui)}))}getUtilityWebView(){return this._utilityWebView}addChangeListener(e){this.on(Ui,e)}removeChangeListener(e){this.removeListener(Ui,e)}}const Hi=new Vi;var Wi=n(18965);const zi=new class{clearBrowsingData(e,t){const n=Hi.getUtilityWebView();n&&n.clearData({since:t},(0,Xs.Z)(e,["downloads","formData","history","serverBoundCertificates","serviceWorkers","siteUsageData","pluginData","passwords","typedHistory","translateHistory","siteSettings","discardUserData"]),(()=>{h.Z.runtime.lastError&&console.warn("Error clearing data: "+h.Z.runtime.lastError.message),h.Z.browsingData.remove({since:t},(0,Xs.Z)(e,["typedHistory","translateHistory","sessionCookies","persistentCookies","discardUserData"]),(()=>{h.Z.runtime.lastError&&console.warn("Error clearing data: "+h.Z.runtime.lastError.message),e.history&&w.removeLocalHistory(t),e.translateHistory&&b.Z.translateHistory.reset(t),e.discardUserData&&(i.Z.emptyTrash(),Li.Z.emptyTrash(),Wi.Z.emptyTrash()),m.Z.dispatch({actionType:Fi.Z.BROWSING_DATA_REMOVED,dataTypes:e,since:t})}))}))}},Gi="change",Ki=new class extends(Bi()){emitChangeParam(e,t){this.emit(Gi,e,t)}addChangeListener(e){this.on(Gi,e)}removeChangeListener(e){this.removeListener(Gi,e)}};m.Z.register((e=>{if(e.actionType!==Fi.Z.BROWSING_DATA_REMOVED)return!0;!function(e){Ki.emitChangeParam("browsingDataRemoved",e)}(e)}));const ji=Ki;var Yi=n(9776),$i="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\ClearBrowsingHistory.jsx";function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qi=1e6,qi=[{text:(0,ue.Z)("Past Hour"),value:"past_hour",format:"h",difference:-1},{text:(0,ue.Z)("Past Day"),value:"past_day",format:"d",difference:-1},{text:(0,ue.Z)("Past Week"),value:"past_week",format:"d",difference:-7},{text:(0,ue.Z)("Past 4 Weeks"),value:"past_4_weeks",format:"d",difference:-28},{text:(0,ue.Z)("All Time"),value:"everything",format:"",difference:0}],Ji=[{value:"history",category:"history",text:(0,ue.Z)("Browsing History")},{value:"typedHistory",category:"history",text:(0,ue.Z)("Typed History")},{value:"siteUsageData",category:"history",text:(0,ue.Z)("Site Usage Data")},{value:"translateHistory",category:"history",text:(0,ue.Z)("Translation History")},{value:"downloads",category:"downloads",text:(0,ue.Z)("Downloads")},{value:"cookies",category:"sitedata",text:(0,ue.Z)("Cookies")},{value:"sessionCookies",category:"sitedata",text:(0,ue.Z)("Cookies")},{value:"persistentCookies",category:"sitedata",text:(0,ue.Z)("Cookies")},{value:"pluginData",category:"sitedata",text:(0,ue.Z)("Plugin Data")},{value:"localStorage",category:"storage",text:(0,ue.Z)("Storage (including Extension Storage)")},{value:"fileSystems",category:"storage",text:(0,ue.Z)("File Systems")},{value:"webSQL",category:"storage",text:(0,ue.Z)("Web SQL")},{value:"serverBoundCertificates",category:"storage",text:(0,ue.Z)("Server Bound Certificates")},{value:"indexedDB",category:"storage",text:(0,ue.Z)("Indexed DB")},{value:"serviceWorkers",category:"storage",text:(0,ue.Z)("Service Workers")},{value:"cache",category:"caches",text:(0,ue.Z)("Cache")},{value:"cacheStorage",category:"caches",text:(0,ue.Z)("Cache Storage")},{value:"discardUserData",category:"caches",text:(0,ue.Z)("Discard User Data")},{value:"passwords",category:"passwords",text:(0,ue.Z)("Passwords (including your Sync login password)")},{value:"formData",category:"forms",text:(0,ue.Z)("Form Autofill Data")},{value:"appcache",category:"appcache",text:(0,ue.Z)("Applications Cache")},{value:"siteSettings",category:"sitesettings",text:(0,ue.Z)("Site Settings")}];class er extends s.PureComponent{constructor(e){super(e),Xi(this,"_onBrowsingDataStoreChange",(()=>{this.props.onYes&&this.props.onYes()})),Xi(this,"selectChanged",(e=>{this.updateClearDownloadsCounters({deleteHistoryFrom:e.target.value}),this.updateClearBrowsingHistoryCounters({deleteHistoryFrom:e.target.value}),this.setState({deleteHistoryFrom:e.target.value})})),Xi(this,"_onYes",(e=>{st.Z.set(P.kClearPrivateDataEntries,this.state.dataToRemove),st.Z.set(P.kClearPrivateDataRange,this.state.deleteHistoryFrom),this.setState({inProgress:!0}),e={deleteHistoryFrom:this.state.deleteHistoryFrom,...e};const t=qi.find((e=>this.state.deleteHistoryFrom===e.value)),n=t&&"everything"!==this.state.deleteHistoryFrom?g()().add(t.difference,t.format).startOf(t.format).valueOf():0;zi.clearBrowsingData({...this.state.dataToRemove},n)})),Xi(this,"_onNo",(()=>{this.props.onNo&&this.props.onNo()})),Xi(this,"updateClearDownloadsCounters",(e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,downloads:this.state.dataToRemove.downloads,...e}).deleteHistoryFrom)h.Z.downloads.search({},(e=>{this.setState((t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,downloads:e.length}})))}));else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);h.Z.downloads.search({},(e=>{const n=e.filter((e=>g()(e.startTime).valueOf()>t));this.setState((e=>({dataToRemoveCounters:{...e.dataToRemoveCounters,downloads:n.length}})))}))}})),Xi(this,"getSelectedStartTime",(e=>{const t=qi.find((t=>e===t.value));let n;return n=t?g()().add(t.difference,t.format).startOf(t.format).valueOf():g()().add(-1,"h").startOf("h").valueOf(),n})),Xi(this,"updateClearBrowsingHistoryCounters",(e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,history:this.state.dataToRemove.history,...e}).deleteHistoryFrom)h.Z.history.search({text:"",startTime:0,maxResults:Qi},(e=>{this.setState((t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}})))}));else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);h.Z.history.search({text:"",maxResults:Qi,startTime:t},(e=>{this.setState((t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}})))}))}})),Xi(this,"toggleAll",(()=>{this.setState((e=>{const t=!e.all,n={};return Object.keys(e.dataToRemove).forEach((e=>{n[e]=t})),{all:t,dataToRemove:n}}))})),Xi(this,"toggleOne",((e,t)=>{"history"===e&&this.updateClearBrowsingHistoryCounters({history:t.target.checked}),"downloads"===e&&this.updateClearDownloadsCounters({downloads:t.target.checked});const n=Ji.reduce(((n,s)=>(s.category===e&&(n[s.value]=t.target.checked),n)),{});this.setState((e=>{const t={...e.dataToRemove,...n};return{dataToRemove:t,all:Boolean(!Object.keys(t).find((e=>!1===t[e])))}}))}));const t=Ji.reduce(((e,t)=>(e[t.value]=!1,e)),{}),n=A.ZP.get(P.kClearPrivateDataEntries);n&&Object.entries(n).forEach((([e,s])=>{void 0===t[e]&&delete n[e]})),Object.assign(t,n);const s=new Map;Ji.forEach((e=>{const t=s.get(e.category);t?t.push(e):s.set(e.category,[e])})),s.forEach((e=>{if(e.length>1){let n=0;e.forEach((e=>{t[e.value]&&n++})),0!==n&&n!==e.length&&e.forEach((e=>{t[e.value]=!0}))}}));const i={};let r=!0;Object.keys(t).forEach((e=>{i[e]=0,t[e]||(r=!1)})),this.state={all:r,inProgress:!1,deleteHistoryFrom:A.ZP.get(P.kClearPrivateDataRange),dataToRemove:t,dataToRemoveCounters:i}}componentDidMount(){ji.addChangeListener(this._onBrowsingDataStoreChange),this.updateClearDownloadsCounters(),this.updateClearBrowsingHistoryCounters()}componentWillUnmount(){ji.removeChangeListener(this._onBrowsingDataStoreChange)}render(){if(W.ZP.isGuestSession(this.context.vivaldiWindowId))return s.createElement("header",{className:"dialog-header",__source:{fileName:$i,lineNumber:363,columnNumber:15}},s.createElement("p",{className:"error",__source:{fileName:$i,lineNumber:364,columnNumber:9}},(0,ue.Z)("Delete Browsing Data not available from guest windows.")));const e=qi.map((e=>s.createElement("option",{key:e.value,value:e.value,__source:{fileName:$i,lineNumber:369,columnNumber:15}},e.text))),t=Boolean(!Object.keys(this.state.dataToRemove).find((e=>!0===this.state.dataToRemove[e]))),n=Ji.map(((e,t,n)=>{if(!n[t-1]||e.category!==n[t-1].category)return s.createElement("li",{key:e.value,style:{paddingLeft:"18px"},__source:{fileName:$i,lineNumber:381,columnNumber:9}},s.createElement("label",{__source:{fileName:$i,lineNumber:382,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.dataToRemove[e.value],onChange:t=>this.toggleOne(e.category,t),__source:{fileName:$i,lineNumber:383,columnNumber:13}}),s.createElement("span",{__source:{fileName:$i,lineNumber:387,columnNumber:13}},e.text),this.state.dataToRemoveCounters[e.value]>0&&this.state.dataToRemove[e.value]&&s.createElement("span",{className:"item-count",__source:{fileName:$i,lineNumber:390,columnNumber:15}},this.state.dataToRemoveCounters[e.value])))}));var i=s.createElement("div",{className:"dialog-clear-data",__source:{fileName:$i,lineNumber:400,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:$i,lineNumber:401,columnNumber:9}},s.createElement("h1",{__source:{fileName:$i,lineNumber:402,columnNumber:11}},(0,ue.Z)("Delete Browsing Data"))),s.createElement("form",{className:"dialog-clear-data",onSubmit:this._onYes,__source:{fileName:$i,lineNumber:405,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:$i,lineNumber:406,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:407,columnNumber:13}},s.createElement("label",{__source:{fileName:$i,lineNumber:408,columnNumber:15}},s.createElement("span",{__source:{fileName:$i,lineNumber:409,columnNumber:17}},(0,ue.Z)("Delete Data for:")),s.createElement("select",{onChange:this.selectChanged,value:this.state.deleteHistoryFrom,autoFocus:!0,__source:{fileName:$i,lineNumber:410,columnNumber:17}},e))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:$i,lineNumber:418,columnNumber:13}},s.createElement("ul",{__source:{fileName:$i,lineNumber:419,columnNumber:15}},s.createElement("li",{style:{paddingBottom:"6px"},__source:{fileName:$i,lineNumber:420,columnNumber:17}},s.createElement("label",{__source:{fileName:$i,lineNumber:421,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:this.state.all,onChange:this.toggleAll,__source:{fileName:$i,lineNumber:422,columnNumber:21}}),s.createElement("span",{__source:{fileName:$i,lineNumber:425,columnNumber:21}},(0,ue.Z)("browser","All")))),n))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:$i,lineNumber:433,columnNumber:11}},s.createElement("input",{type:"submit",disabled:this.state.inProgress||t,value:(0,ue.Z)("title","Delete"),__source:{fileName:$i,lineNumber:434,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this._onNo,disabled:this.state.inProgress,value:(0,ue.Z)("Cancel"),__source:{fileName:$i,lineNumber:438,columnNumber:13}}),this.state.inProgress&&s.createElement("p",{className:"in-progress",__source:{fileName:$i,lineNumber:443,columnNumber:15}}))));return(0,Yi.ZP)(i,this.props.filter)}}Xi(er,"contextType",Vs.Z);const tr=er;var nr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ClearBrowsingHistoryDialog.jsx";function sr(e){return s.createElement(ln.Z,{onRequestClose:e.onClose,__source:{fileName:nr,lineNumber:12,columnNumber:5}},s.createElement(tr,{onNo:e.onClose,onYes:e.onClose,__source:{fileName:nr,lineNumber:13,columnNumber:7}}))}var ir="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ConfirmOpenMultipleLinksDialog.jsx";function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ar extends s.Component{constructor(...e){super(...e),rr(this,"state",{doNotShowAgain:!1}),rr(this,"_onNo",(()=>{this.props.onRequestClose()})),rr(this,"_onYes",(()=>{st.Z.set(P.kBookmarksConfirmOpening,!this.state.doNotShowAgain),this.props.onRequestClose(),$.Z.openUrls(this.props.urls,{...this.props.openOptions})})),rr(this,"_toggleDoNotShowAgain",(()=>{this.setState((e=>({doNotShowAgain:!e.doNotShowAgain})))}))}render(){return s.createElement(ln.Z,{onRequestClose:this._onNo,__source:{fileName:ir,lineNumber:43,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:ir,lineNumber:44,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:ir,lineNumber:45,columnNumber:11}},(0,ue.Z)("Open Multiple Links"))),s.createElement("form",{onSubmit:this._onYes,__source:{fileName:ir,lineNumber:48,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:ir,lineNumber:49,columnNumber:11}},s.createElement("p",{__source:{fileName:ir,lineNumber:50,columnNumber:13}},(0,ue.Z)("Do you want to open $1 link?","Do you want to open $1 links?",[this.props.urls.length])),s.createElement("label",{className:"dialog-checkbox",__source:{fileName:ir,lineNumber:55,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._toggleDoNotShowAgain,__source:{fileName:ir,lineNumber:56,columnNumber:15}}),s.createElement("span",{__source:{fileName:ir,lineNumber:59,columnNumber:17}},(0,ue.Z)("Do not ask again")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:ir,lineNumber:63,columnNumber:11}},s.createElement("input",{type:"submit",onClick:this._onYes,value:(0,ue.Z)("Open All Links"),autoFocus:!0,__source:{fileName:ir,lineNumber:64,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this._onNo,value:(0,ue.Z)("Cancel"),__source:{fileName:ir,lineNumber:68,columnNumber:13}}))))}}var or=n(62830),lr=n.n(or);function cr(e,t){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_SET_COLLECTION,collection:t,writeToSettings:!1})}const ur=new class{loadPromise(){return new Promise(((e,t)=>{const n=d.Z.getSync("SEARCH_ENGINE_COLLECTION"),s=d.Z.getDefaultSearchEngines();if(n.version!==s.version){const e={...n};e.version=s.version,e.engines=(0,ni.Z)(e.engines),s.engines.forEach((t=>{const n=e.engines.find((e=>e.id===t.id));if(n){if(!0!==n.removed)if(n.custom)if(n.url===(t.url||"")&&n.suggestUrl===(t.suggestUrl||"")&&n.name===(t.name||"")&&n.post===Boolean(t.post)){const s={...t};s.custom=!0,s.keyword=n.keyword;const i=e.engines.findIndex((e=>e.id===t.id));e.engines.splice(i,1,s)}else{const s={...n};s.id=lr()(),e.engines.push(s),e.default===n.id&&(e.default=s.id),e.defaultPrivate===n.id&&(e.defaultPrivate=s.id);const i=e.engines.findIndex((e=>e.id===t.id));e.engines.splice(i,1,t)}else{const s={historyId:n.historyId,...t};s.post=Boolean(t.post);const i=e.engines.findIndex((e=>e.id===t.id));e.engines.splice(i,1,s)}}else e.engines.push(t)})),e.engines=e.engines.map((t=>(-1!==s.engines.findIndex((e=>e.id===t.id))||!1!==Boolean(t.custom)||e.default!==t.id&&e.defaultPrivate!==t.id||(t.custom=!0),t))).filter((t=>-1!==s.engines.findIndex((e=>e.id===t.id))||!1!==Boolean(t.custom)||(e.default===t.id&&(e.default=s.default,e.defaultChanged=!1),e.current===t.id&&(e.current=void 0),!1))),e.default!==s.default&&!0!==e.defaultChanged&&(e.default=s.default);const t=[];e.engines.forEach(((n,s)=>{!0!==n.removed&&!0===n.custom&&n.keyword&&(-1===t.findIndex((e=>e===n.keyword))?t.push(n.keyword):e.engines[s].keyword="")})),e.engines.forEach(((n,s)=>{!0!==n.removed&&!0!==n.custom&&n.keyword&&(-1===t.findIndex((e=>e===n.keyword))?t.push(n.keyword):e.engines[s].keyword="")})),d.Z.set({SEARCH_ENGINE_COLLECTION:e}),m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_INIT,collection:e})}else m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_INIT,collection:n});d.Z.addListener("SEARCH_ENGINE_COLLECTION",cr),e()}))}add(e,t){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_ADD,engine:e,makeDefault:t})}remove(e){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_REMOVE,id:e})}modify(e,t){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_MODIFY,engine:e,makeDefault:t})}reorder(e,t){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_REORDER,id:e,index:t})}setDefault(e,t,n=!0){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"defaultPrivate":"default",writeToSettings:n})}setDefaultForSearchField(e,t,n=!0){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"currentPrivate":"current",writeToSettings:n})}setDefaultForSpeedDial(e,t){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"currentSD",writeToSettings:!t})}setDefaultForContextMenu(e,t=!0){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"context",writeToSettings:t})}restore(e){m.Z.dispatch({actionType:Fi.Z.SEARCH_ENGINES_RESTORE,keepCustomSearches:e})}};var mr=n(57458),dr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngine.jsx";function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pr extends s.Component{constructor(e){super(e),hr(this,"getDataUri",((e,t)=>{const n=new Image;n.onload=function(){const n=document.createElement("canvas");n.width=this.naturalWidth,n.height=this.naturalHeight,n.getContext("2d").drawImage(this,0,0),t(n.toDataURL(e))},n.src=e})),hr(this,"constructFavicon",(e=>{if(e){const t=(0,As.q9)(e.trim()),n=document.createElement("a");n.href=t;const s=n.protocol+"//"+n.host+"/favicon.ico";this.getDataUri(s,(e=>{this.faviconUrl=e}))}})),hr(this,"updateFavicon",(e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();if(t)return void this.constructFavicon(t)}this.faviconUrl=""})),hr(this,"canCreate",(()=>this.state.name.trim()&&this.state.url.trim()&&!1===this.state.nicknameTaken)),hr(this,"create",(()=>{if(this.canCreate()){const e=Dn.Z.getNewEngine();e.name=this.state.name,e.keyword=this.refs.newKeyword.value,e.url=(0,mr.encode)(this.state.url),e.suggestUrl=this.refs.newSuggestUrl?(0,mr.encode)(this.refs.newSuggestUrl.value):"",e.faviconUrl=this.faviconUrl,ur.add(e,this.state.default),"function"==typeof this.props.onClose&&this.props.onClose()}})),hr(this,"nameChange",(e=>{"string"==typeof e.target.value&&this.setState({name:e.target.value})})),hr(this,"defaultChange",(e=>{"boolean"==typeof e.target.checked&&this.setState({default:e.target.checked})})),hr(this,"urlChange",(e=>{"string"==typeof e.target.value&&this.setState({url:e.target.value})})),hr(this,"nicknameChange",(e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();this.setState({nicknameTaken:t.length>0&&Dn.Z.hasKeyword(t)})}})),this.state={name:this.props.name?this.props.name:"",url:this.props.url?this.props.url.replace("{searchTerms}","%s"):"",nicknameTaken:!1,default:!1},this.faviconUrl=""}componentDidMount(){this.constructFavicon(this.props.url)}render(){const e=this.state.nicknameTaken?Dn.Z.getByKeyword(this.refs.newKeyword.value.trim()):null,t=e?e.name:"";return s.createElement("form",{onSubmit:this.create,__source:{fileName:dr,lineNumber:135,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:dr,lineNumber:136,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:dr,lineNumber:137,columnNumber:11}},(0,ue.Z)("Add Search Engine"))),s.createElement("div",{className:"dialog-content",__source:{fileName:dr,lineNumber:140,columnNumber:9}},s.createElement("label",{className:"fieldset",__source:{fileName:dr,lineNumber:141,columnNumber:11}},s.createElement("input",{className:"searchengine_url setting-single-flex",type:"text",placeholder:(0,ue.Z)("URL"),value:this.state.url,onChange:this.urlChange,onBlur:this.updateFavicon,__source:{fileName:dr,lineNumber:142,columnNumber:13}})),s.createElement("label",{className:"fieldset",__source:{fileName:dr,lineNumber:152,columnNumber:11}},s.createElement("input",{className:"setting-single-flex",type:"text",value:this.state.name,placeholder:(0,ue.Z)("Description"),onChange:this.nameChange,autoFocus:!0,__source:{fileName:dr,lineNumber:153,columnNumber:13}}),s.createElement("input",{className:"searchengine_keyword setting-single-noflex",type:"text",ref:"newKeyword",placeholder:(0,ue.Z)("Nickname"),onChange:this.nicknameChange,__source:{fileName:dr,lineNumber:162,columnNumber:13}})),this.state.nicknameTaken&&s.createElement("p",{className:"info",style:{textAlign:"right"},__source:{fileName:dr,lineNumber:172,columnNumber:13}},(0,ue.Z)("Nickname in use by $1 search engine",[t])),s.createElement("label",{className:"fieldset",__source:{fileName:dr,lineNumber:177,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.default,onChange:this.defaultChange,__source:{fileName:dr,lineNumber:178,columnNumber:13}}),s.createElement("span",{__source:{fileName:dr,lineNumber:183,columnNumber:13}},(0,ue.Z)("Set as Default Search")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:dr,lineNumber:187,columnNumber:9}},s.createElement("input",{type:"submit",onClick:this.create,disabled:!this.canCreate(),value:(0,ue.Z)("Add"),__source:{fileName:dr,lineNumber:188,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.props.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:dr,lineNumber:194,columnNumber:11}})))}}const gr=pr;var br="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngineDlg.jsx";function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fr extends s.Component{constructor(...e){super(...e),Nr(this,"state",{msg:"",shown:!0,modalShown:!1}),Nr(this,"handleClose",(()=>{this.state.shown&&this.props.onClose(),this.setState((e=>({shown:!e.shown})))}))}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}render(){return this.state.shown?s.createElement(ln.Z,{onRequestClose:this.handleClose,__source:{fileName:br,lineNumber:41,columnNumber:9}},s.createElement("div",{className:"dialog-addsearch",__source:{fileName:br,lineNumber:42,columnNumber:11}},s.createElement(gr,{onClose:this.handleClose,name:this.props.name,url:this.props.url,__source:{fileName:br,lineNumber:43,columnNumber:13}}))):null}}const _r=fr,vr=1024,Er=[(0,ue.Z)("bytes"),(0,ue.Z)("KB"),(0,ue.Z)("MB"),(0,ue.Z)("GB"),(0,ue.Z)("TB"),(0,ue.Z)("PB")];function Cr(e,t){if(isNaN(e))return e?e.toString():"";if(e<=0)return(0,ue.Z)("0 bytes");void 0===t&&(t=e<vr?0:2);let n=Er.length-1;for(var s=0;s<Er.length;s++)if(e<Math.pow(vr,s+1)){n=s;break}let i=(e/Math.pow(vr,n)).toLocaleString(void 0,{maximumFractionDigits:t});if(t>0){const e="."+"0".repeat(t);i.endsWith(e)&&(i=i.substring(0,i.length-e.length))}return i+(Er[n]?" "+Er[n]:"")}function wr(){return wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wr.apply(this,arguments)}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Sr=function(e){return class extends s.Component{constructor(...e){super(...e),yr(this,"state",{disabled:!0}),yr(this,"enable",(()=>this.setState({disabled:this.props.disabled||!1})))}componentDidMount(){this.timeout=setTimeout(this.enable,500)}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{disabled:t,...n}=this.props,i=e||"input";return s.createElement(i,wr({},n,{disabled:this.state.disabled,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\withDelay.jsx",lineNumber:31,columnNumber:14}}))}}};var Tr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\downloadDialog.jsx";function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ir=Sr("input");class Ar extends s.Component{constructor(...e){super(...e),kr(this,"state",{shown:!0,modalShown:!1,askNextTime:!1}),kr(this,"onOpen",(()=>{this.props.customData.request.allow("open"),this.setState((e=>({shown:!e.shown}))),this.maybeShowDownloads(),this.close()})),kr(this,"onSave",(()=>{this.props.customData.request.allow(),this.setState((e=>({shown:!e.shown}))),this.maybeShowDownloads(),this.close()})),kr(this,"onSaveAs",(()=>{this.props.customData.request.allow("saveas"),this.setState((e=>({shown:!e.shown}))),this.maybeShowDownloads(),this.close()})),kr(this,"onCancel",(()=>{this.props.customData.request.deny(),this.setState((e=>({shown:!e.shown}))),this.close()})),kr(this,"close",(()=>{st.Z.set(P.kDownloadsStartAutomatically,this.state.askNextTime),this.props.onClose()})),kr(this,"onAskDownloadChanged",(({target:e})=>{this.setState({askNextTime:e.checked})}))}componentDidMount(){this.refs.defaultAction.focus()}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}maybeShowDownloads(){!document.querySelector("#panels-container .downloads.active")&&A.ZP.get(P.kDownloadsOpenPanelOnNew)&&(A.ZP.get(P.kDownloadsUsePopout)?o.Z.executeActions("COMMAND_SHOW_DOWNLOADS_POPOUT"):o.Z.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"))}render(){const e=this.props.customData.url.startsWith("data:");let t="",n="";this.props.customData.suggestedFilename&&e||({hostname:t,pathname:n}=Is.parse(this.props.customData.url));const i=this.props.customData.suggestedFilename?this.props.customData.suggestedFilename:(n||"").split("/").pop(),r=e?(0,ue.Z)("Data URL"):t,a=-1===this.props.customData.fileSize?(0,ue.Z)("Unknown"):Cr(this.props.customData.fileSize);return s.createElement(ln.Z,{ignoreEscape:!1,onRequestClose:this.onCancel,__source:{fileName:Tr,lineNumber:126,columnNumber:7}},s.createElement("div",{className:"dialog-download",__source:{fileName:Tr,lineNumber:128,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:Tr,lineNumber:129,columnNumber:11}},s.createElement("h1",{className:"dialog-title",title:i,__source:{fileName:Tr,lineNumber:130,columnNumber:13}},(0,ue.Z)("Download “$1”?",[i]))),s.createElement("div",{className:"dialog-content",__source:{fileName:Tr,lineNumber:136,columnNumber:11}},s.createElement("p",{__source:{fileName:Tr,lineNumber:137,columnNumber:13}},s.createElement("span",{className:"label",title:i,__source:{fileName:Tr,lineNumber:138,columnNumber:15}},(0,ue.Z)("File Name:")),i),s.createElement("p",{__source:{fileName:Tr,lineNumber:141,columnNumber:13}},s.createElement("span",{className:"label",__source:{fileName:Tr,lineNumber:141,columnNumber:16}},(0,ue.Z)("File Size:")),a),s.createElement("p",{__source:{fileName:Tr,lineNumber:142,columnNumber:13}},s.createElement("span",{className:"label",__source:{fileName:Tr,lineNumber:142,columnNumber:16}},(0,ue.Z)("Host:")),r),s.createElement("label",{className:"autosave",__source:{fileName:Tr,lineNumber:143,columnNumber:13}},s.createElement("input",{type:"checkbox",onChange:this.onAskDownloadChanged,__source:{fileName:Tr,lineNumber:144,columnNumber:15}}),s.createElement("span",{__source:{fileName:Tr,lineNumber:147,columnNumber:15}},(0,ue.Z)("Always Save Files to Default Download Location")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Tr,lineNumber:150,columnNumber:11}},s.createElement("input",{type:"button",className:"primary",onClick:this.onSave,ref:"defaultAction",value:(0,ue.Z)("Save"),__source:{fileName:Tr,lineNumber:151,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onSaveAs,value:(0,ue.Z)("Save As..."),__source:{fileName:Tr,lineNumber:157,columnNumber:13}}),s.createElement(Ir,{type:"button",onClick:this.onOpen,value:(0,ue.Z)("Open"),__source:{fileName:Tr,lineNumber:161,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:Tr,lineNumber:165,columnNumber:13}}))))}}const Zr=Ar;var Pr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\overlayinfobubble.jsx";function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mr extends s.Component{constructor(e){super(e),Dr(this,"startHover",(e=>{this.setState({hover:!0})})),Dr(this,"endHover",(e=>{this.setState({hover:!1})})),Dr(this,"showSelf",(()=>{this._timeoutID&&clearTimeout(this._timeoutID),this.setState({show:!0}),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!0)})),Dr(this,"hideSelf",(e=>{this._timeoutID&&clearTimeout(this._timeoutID),this._timeoutID=setTimeout(this.onClose,e)})),Dr(this,"onClose",(()=>{this.setState({show:!1,hover:!1}),this.props.onClose&&this.props.onClose(),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!1)})),Dr(this,"onContextMenu",(e=>{this._timeoutID&&clearTimeout(this._timeoutID),this.props.onContextMenu&&this.props.onContextMenu(e)})),Dr(this,"show",(()=>{this.showSelf(),this.hideSelf(4e3)})),this.state={hover:!1,show:!0}}componentDidMount(){this.hideSelf(4e3)}componentWillUnmount(){this._timeoutID&&clearTimeout(this._timeoutID)}render(){var e=bn()({overlayinfobubble:!0,show:this.state.hover||this.state.show});return s.createElement("div",{onMouseEnter:this.startHover,onMouseLeave:this.endHover,__source:{fileName:Pr,lineNumber:96,columnNumber:7}},s.createElement("div",{className:e,onContextMenu:this.onContextMenu,onClick:this.hideSelf.bind(this,0),__source:{fileName:Pr,lineNumber:99,columnNumber:9}},this.props.overlayText))}}const Or=Mr;function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lr extends s.Component{constructor(e){super(e),xr(this,"overlayRef",null),xr(this,"overlayVisible",!0),xr(this,"showSelf",(()=>{this.setState({show:!0}),this.overlayRef&&this.overlayRef.show()})),xr(this,"hideSelf",(()=>{this.setState({show:!1,contextOpen:!1})})),xr(this,"alwaysHide",(()=>{st.Z.set(P.kWebpagesFullScreenShowBubble,!1),this.hideSelf()})),xr(this,"shouldShow",(()=>!!A.ZP.get(P.kWebpagesFullScreenShowBubble)&&(this.state.contextOpen||this.state.show))),xr(this,"onOverlayVisibilityChanged",(e=>{this.overlayVisible=e})),xr(this,"onContextMenu",(e=>{const t=[{handler:this.hideSelf.bind(this),...(0,Mn.Z)("Hide Fullscreen Reminder")},{handler:this.alwaysHide,...(0,Mn.Z)("Never Show Fullscreen Reminder")}];(0,Hs.Z)(this.context.vivaldiWindowId,t,(e=>this.setState({contextOpen:e})))(e)})),this.state={contextOpen:!1,show:!0}}render(){let e=null;if(this.shouldShow()){const t=(0,ue.Z)("Press Escape key to exit fullscreen.");e=s.createElement(Or,{ref:e=>this.overlayRef=e,customData:this.props.customData,onClose:this.props.closeDialog,onContextMenu:this.onContextMenu,onVisibilityChanged:this.onOverlayVisibilityChanged,overlayText:t,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\fullscreeninfowrapper.jsx",lineNumber:94,columnNumber:17}})}return e}}xr(Lr,"contextType",Vs.Z);const Rr=Lr;class Br{static setImportProgress(e,t,n,s,i){m.Z.dispatch({actionType:"IMPORT_PROGRESS",importType:e,importItemType:t,current:n,total:s,key:i})}static addImportWarning(e,t,n){m.Z.dispatch({actionType:"IMPORT_PROGRESS_WARN",importType:e,importItemType:t,message:n})}static addImportError(e,t,n){m.Z.dispatch({actionType:"IMPORT_PROGRESS_ERROR",importType:e,importItemType:t,message:n})}static clearImportProgress(e){m.Z.dispatch({actionType:"IMPORT_PROGRESS_CLEAR",importType:e})}}const Fr=()=>[{value:5,name:(0,ue.Z)("Every 5 Minutes")},{value:15,name:(0,ue.Z)("Every 15 Minutes")},{value:30,name:(0,ue.Z)("Every 30 Minutes")},{value:60,name:(0,ue.Z)("Every Hour")},{value:120,name:(0,ue.Z)("Every 2 Hours")},{value:360,name:(0,ue.Z)("Every 6 Hours")},{value:720,name:(0,ue.Z)("Every 12 Hours")},{value:1440,name:(0,ue.Z)("Daily")},{value:10080,name:(0,ue.Z)("Weekly")}].map((e=>s.createElement("option",{key:e.value,value:e.value,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rss\\RSSUtilities.js",lineNumber:17,columnNumber:3}},e.name)));var Ur="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rss\\AddFeedDialog.jsx";function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Hr extends s.PureComponent{constructor(e){super(e),Vr(this,"mapFeeds",(e=>e.map((e=>({url:e.url||"",path:e.path||"",title:e.title||"",refreshInterval:e.refreshInterval?e.refreshInterval:1440,offline:!1,lastChecked:0}))))),Vr(this,"addFeed",(()=>{const{feeds:e}=this.state;Br.setImportProgress("Feeds (OPML)","Feeds",0,e.length),rt.add(e),Br.setImportProgress("Feeds (OPML)","Feeds",e.length,e.length),this.props.dismissable&&this.onDismiss()})),Vr(this,"onDismiss",(()=>{this.props.onClose()})),Vr(this,"onChange",(e=>{const{name:t,value:n,id:s}=e.target;this.setState((e=>{let i=0;return{feeds:e.feeds.map((e=>(i++,"fid"+i===s?{...e,[t]:n}:e)))}}))})),Vr(this,"feeds",(()=>{let e=0;return this.state.feeds.map((t=>{e++;const n="fid"+e;return s.createElement("div",{key:n,className:"feed-list-item",__source:{fileName:Ur,lineNumber:73,columnNumber:14}},s.createElement("input",{type:"text",placeholder:(0,ue.Z)("Title"),onChange:this.onChange,title:(0,ue.Z)("Title"),value:t.title,name:"title",id:n,__source:{fileName:Ur,lineNumber:74,columnNumber:9}}),s.createElement("input",{type:"text",placeholder:(0,ue.Z)("Address"),onChange:this.onChange,title:(0,ue.Z)("Address"),value:t.url,name:"url",id:n,__source:{fileName:Ur,lineNumber:83,columnNumber:9}}),s.createElement("select",{onChange:this.onChange,value:t.refreshInterval,name:"refreshInterval",id:n,__source:{fileName:Ur,lineNumber:92,columnNumber:9}},Fr()))}))})),Vr(this,"render",(()=>s.createElement("div",{className:"dialog-add-feed",__source:{fileName:Ur,lineNumber:104,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:Ur,lineNumber:105,columnNumber:7}},s.createElement("h1",{__source:{fileName:Ur,lineNumber:106,columnNumber:9}},(0,ue.Z)("browser","Add Feed"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Ur,lineNumber:108,columnNumber:7}},this.feeds()),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Ur,lineNumber:111,columnNumber:7}},s.createElement("input",{type:"button",value:(0,ue.Z)("Add Feed","Add Feeds",[this.state.feeds.length]),className:"primary",onClick:this.addFeed,__source:{fileName:Ur,lineNumber:112,columnNumber:9}}),this.props.dismissable&&s.createElement("input",{type:"button",onClick:this.onDismiss,value:(0,ue.Z)("Cancel"),__source:{fileName:Ur,lineNumber:117,columnNumber:11}}))))),this.state={feeds:this.mapFeeds(this.props.options)}}}const Wr=Hr;var zr=n(46879),Gr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ImportOpmlDialog.jsx";function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Yr(e,t,"set"),n),n}function Yr(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function $r(e){let t=[];return e.forEach((e=>{e.feedurl&&t.push({title:e.plaintitle,url:e.feedurl,path:e.feedurl,supported:e.supported}),e.items.length&&(t=t.concat($r(e.items)))})),t}function Xr(e){(0,Zt.c)({title:(0,ue.Z)("Import Feeds (OPML file)"),body:e}),X.Z.setStatus(e)}var Qr=new WeakMap;class qr extends s.PureComponent{constructor(...e){super(...e),Qr.set(this,{writable:!0,value:!1}),Kr(this,"state",{listFeeds:!1,feeds:{}}),Kr(this,"chooseAndParseFile",(async()=>{const e=await async function(){return new Promise(((e,t)=>{h.Z.fileSystem.chooseEntry({type:"openFile",accepts:[{mimeTypes:["text/*"],extensions:["opml","txt"],description:(0,ue.Z)(".opml and .txt files")}]},(n=>{h.Z.runtime.lastError||!n?t(h.Z.runtime.lastError||"Cancelled opening file"):e(n)}))}))}();if(e){A.ZP.get(P.kMailIsTurnedOff)&&(at.ZP.info("Mail",["import"],"Mail is turned off - turning it on for importing an OPML file"),st.Z.set(P.kMailIsTurnedOff,!1),ie.Z.showContent("feeds"));const s=await(n=e,new Promise((e=>{n.file((t=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsArrayBuffer(t),n.onerror=e=>console.error(n.error)}))}))),i=s instanceof ArrayBuffer?new Uint8Array(s):null;if(!i)throw new Error("Must be read as an ArrayBuffer");const r=(0,zr.Z)(i),a=new DOMParser;try{const e=a.parseFromString(r,"application/xml"),n=(new Te).parseOPML(e,"http://localhost/");if("string"==typeof n)Xr((0,ue.Z)("File does not appear to be of OPML format."));else{const e=$r(n.items),s=e.filter((e=>e.supported));0===s.length?Xr((0,ue.Z)("No items in this file are supported")):(e.length>s.length?Xr((0,ue.Z)(e.length-s.length+" items in this file are not supported")):X.Z.clearStatus(),function(e,t){return t.get?t.get.call(e):t.value}(t=this,Yr(t,Qr,"get"))&&this.setState({listFeeds:!0,feeds:s}))}}catch(e){throw Xr((0,ue.Z)("Error parsing file - Not valid XML")),new Error(`Parsing failed: ${e}`)}}var t,n}))}componentDidMount(){jr(this,Qr,!0),this.props.setChooseFile(this.chooseAndParseFile)}componentWillUnmount(){jr(this,Qr,!1)}render(){return s.createElement("div",{className:"import-data",__source:{fileName:Gr,lineNumber:165,columnNumber:7}},this.state.listFeeds&&s.createElement(Wr,{onClose:async()=>{},options:this.state.feeds,dismissable:!1,__source:{fileName:Gr,lineNumber:167,columnNumber:11}}))}}Kr(qr,"contextType",Vs.Z);const Jr=qr;function ea(e,t,n,s){return e[t]=e[t]||{},e[t][n]=e[t][n]||{current:0,total:0},s&&(e[t][n].children=e[t][n].children||{},e[t][n].children&&(e[t][n].children[s]=e[t][n].children[s]||{current:0,total:0})),e}class ta extends(S()){getInitialState(){return{}}reduce(e,t){switch(t.actionType){case"IMPORT_PROGRESS":return(0,T.ZP)(e,(e=>{const{importType:n,importItemType:s,current:i,total:r,key:a}=t;e=ea(e,n,s,a),a&&e[n][s].children?(e[n][s].children[a].current=i,e[n][s].children[a].total=r):(e[n][s].current=i,e[n][s].total=r)}));case"IMPORT_PROGRESS_WARN":return(0,T.ZP)(e,(e=>{const{importType:n,importItemType:s,message:i}=t;(e=ea(e,n,s))[n][s].warnings=e[n][s].warnings||[],e[n][s].warnings.push(i)}));case"IMPORT_PROGRESS_ERROR":return(0,T.ZP)(e,(e=>{const{importType:n,importItemType:s,message:i}=t;(e=ea(e,n,s))[n][s].errors=e[n][s].errors||[],e[n][s].errors.push(i)}));case"IMPORT_PROGRESS_CLEAR":return(0,T.ZP)(e,(e=>{e[t.importType]={}}));default:return e}}getImportProgress(){return this.getState()}numImportsInStore(){return Object.keys(this.getState()).length}isImportTypeInProgress(e){const t=this.getImportProgress();for(const n in t[e]){const s=t[e][n];if(!s.children&&s.current<s.total)return!0;if(s.children)for(const e in s.children){const t=s.children[e];if(t.current<t.total)return!0}}return!1}}const na=new ta(m.Z);var sa=n(43393),ia=n(76906),ra=n(54141),aa=n(52581),oa=n(5677),la=n(24383),ca=n(29319),ua=n(74311),ma=n(19162),da=n(24247);const ha=[["is_read",he.T4.SEEN],["is_replied",he.T4.ANSWERED],["is_forwarded",he.T4.FORWARDED],["is_resent",void 0],["is_outgoing",void 0],["is_sent",void 0],["is_queued",void 0],["is_seen",void 0],["is_timequeued",void 0],["is_deleted",he.T4.DELETED],["has_attachment",void 0],["has_image_attachment",void 0],["has_audio_attachment",void 0],["has_video_attachment",void 0],["has_zip_attachment",void 0],["is_onepart_message",void 0],["currently unused bit",void 0],["is_waiting_for_indexing",void 0],["is_newsfeed_message",void 0],["partially_fetched",void 0],["is_news_message",void 0],["allow_8bit",void 0],["is_imported",void 0],["has_priority",void 0],["has_priority_low",void 0],["has_priority_max",void 0],["is_control_message",void 0],["allow_quotestring_qp",void 0],["has_keywords",void 0],["permanently_removed",void 0],["dir_forced_ltr",void 0],["dir_forced_rtl",void 0]];var pa=n(44511),ga=n(819),ba=n(22445),Na=n(45527),fa=n(47078),_a=n(14624);async function va(e){const t=await b.Z.mailPrivate.readFileToBuffer(e);return new Uint8Array(t)}function Ea(e,t){let n;const s=e.match(/(account[0-9]+)/i);if(s){const e=s[1].toLowerCase();n=t.get(e)}return n}function Ca(e,t,n,s,i){Br.setImportProgress(e,t,n,s,i)}async function wa(e){const{profilePath:t}=e;await St.Z.importStatus.get(t)?await St.Z.importStatus.update(t,e):await St.Z.importStatus.add(e)}function ya(e,...t){return"/"!==e[e.length-1]&&(e+="/"),e+t.join("/")}async function Sa(e){const t=await async function(e){const t=ya(e,"mail"),n=ya(t,"accounts.ini");try{const e=await b.Z.mailPrivate.readFileToText(n);if(e)return e;at.ZP.log("Mail",["import"],`accounts.ini file not found in Opera Mail path: ${t}`)}catch(e){at.ZP.log("Mail",["import"],`Failed to read accounts.ini file for Opera Mail path: ${t} - Error: ${e.message||e}`)}}(e);return t?function(e){const t={section:/^\[(Account(s)?[0-9]+)\]$/,param:/^([^=]+?)\s*=\s*(.*?)$/,comment:/^[;#].*$/},n=new Map,s=e.split(/[\r\n]+/);let i=null;return s.forEach((e=>{const s=e.trim();if(!t.comment.test(s))if(t.param.test(s)){const e=s.split("=",2),t=e[0].toLowerCase().replace(/\s+/g,"_"),r=isNaN(e[1])?e[1]:Number(e[1]);if(i){const e={...n.get(i),[t]:r};n.set(i,e)}else n.set(t,r)}else t.section.test(s)?(i=s.substr(1,s.length-2).toLowerCase(),n.set(i,{})):0===e.length&&i?i=null:at.ZP.log("Mail",["parsing","accounts"],"ignored line:",s)})),at.ZP.log("Mail",["parsing","accounts"],"parseMap:",n),(0,da.Z)(n).filter((([e,t])=>t.account_name)).map((([e,t])=>(t.email||at.ZP.warn("Mail",["parsing","accounts"],`Account in section ${e} has no email address. Protocol: ${t.incoming_protocol}`),{section:e,MAIL_EMAIL:t.email||"",MAIL_PORT:t.incoming_port,MAIL_SERVER:t.incoming_servername||"",MAIL_USER:t.incoming_username||"",MAIL_SMTP_SERVER:t.outgoing_servername||"",MAIL_SMTP_PORT:t.outgoing_port,MAIL_SMTP_SOCKET_TYPE:587===t.outgoing_port?"starttls":"ssl",MAIL_SMTP_USER:t.outgoing_username||"",accountType:t.incoming_protocol,offline:!0,MAIL_PASSWORD:"",MAIL_SMTP_PASSWORD:""})))}(t):[]}async function Ta(e,t,n){A.ZP.get(P.kMailIsTurnedOff)&&(at.ZP.log("Mail",["import"],"Mail is turned off - turning it on for importing from m2"),st.Z.set(P.kMailIsTurnedOff,!1),ie.Z.showContent("mail")),e&&"/"!==e[e.length-1]&&(e+="/"),await wa({profilePath:e});const s=await async function(e,t,n){at.ZP.log("Mail",["import"],"importing accounts from",e);const s=aa.Z.getAll(),i=(await Sa(e)).filter((e=>n.includes(e.MAIL_EMAIL))),r=new Map;for(let e=0;e<i.length;e++){const n=i[e];Ca(t,"MailAccounts",e+1,i.length);try{if(![he.s9.IMAP,he.s9.POP].includes(n.accountType.toUpperCase())){console.warn(`Importing accounts of type "${n.accountType}" is not supported`),Br.addImportWarning(t,"MailAccounts",(0,ue.Z)(`Importing accounts of type "${n.accountType}" is not supported`));continue}if(r.set(n.section,n.MAIL_EMAIL),s[n.MAIL_EMAIL])continue;const e=(0,Xs.Z)(n,"section");await ee.Z.addAccount(e,[""]),(0,ga.Z)(e),at.ZP.log("Mail",["import"],"... imported account",n.MAIL_EMAIL)}catch(e){Br.addImportError(t,"MailAccounts",(0,ue.Z)("Failed importing account $1",[n.MAIL_EMAIL])),console.error(`Failed importing account ${JSON.stringify(n)}`)}}return wa({profilePath:e}),r}(e,t,n);await async function(e,t){at.ZP.log("Mail",["import"],"importing contacts from",e);const n=ra.Z.getMailAddresses(),s=await async function(e){const t=ya(e,"contacts.adr"),n=await b.Z.mailPrivate.readFileToText(t);n||(h.Z.runtime.lastError?console.error(h.Z.runtime.lastError):console.warn(`contacts.adr file not found in Opera profile path: ${e}`));return n}(e);if(!s)return Br.addImportWarning(t,"MailContacts",(0,ue.Z)("No contacts found in $1",e)),void at.ZP.log("Mail",["import"],"... no contacts found in",e);const i=function(e){const t=e.split("#FOLDER")[0].split("#CONTACT");t.shift();const n=t.map((e=>e.replace(/\t/g,""))).map((e=>e.split(/[\r\n]+/g))).map((e=>{const t={};return e.forEach((e=>{const n=e.trim(),s=n.split("=")[0].toLowerCase(),i=n.split("=")[1];s.length&&(t[s]=i)})),t}));return at.ZP.log("Mail",["parsing","contacts"],"parsed:",n),n.map((e=>{const{mail:t}=e,n=String.fromCharCode(2)+String.fromCharCode(2);return{avatarUrl:"",birthday:0,emailAddresses:t.split(n).map((e=>({emailAddress:e,id:lr()(),type:""}))),id:e.id,name:e.name,note:e.description,phoneNumbers:[{phoneNumber:e.phone,id:lr()(),type:""}],postalAddresses:[{id:lr()(),postalAddress:e.postalAddress,type:""}],separator:!1,trusted:!0,isEmpty:()=>!1,clearGenerated:()=>{}}}))}(s);let r=0;for(let e=0;e<i.length;e++){const s=i[e];Ca(t,"MailContacts",e+1,i.length),at.ZP.log("Mail",["import"],`... importing contact ${++r}/${i.length}`);for(const e of s.emailAddresses)n.get(e.emailAddress)||j.Z.newContactFromMailAddress({address:e.emailAddress,name:s.name},!1)}at.ZP.log("Mail",["import"],`... compared and/or imported ${i.length} contacts`)}(e,t),await async function(e,t,n){at.ZP.log("Mail",["import"],"importing messages from",t);let s=0;for(const i of e){const[r,a]=i,o=await b.Z.mailPrivate.getFilePaths(ya(t,"mail","store",r));s+=o.length,o.sort(),at.ZP.log("Mail",["import"],`... found ${o.length} messages to import for account ${a}`),await Za(e,t,n,o,(async(t,s,i,r)=>{await Aa(e,t,n,s,i,r)})),at.ZP.log("Mail",["import"],"... finished importing messages for account",a)}at.ZP.log("Mail",["import"],"... finished importing",s,"messages"),X.Z.setStatus((0,ue.Z)("Finished importing $1 messages",[s]),he.QM)}(s,e,t)}let ka=0,Ia=0;async function Aa(e,t,n,s,i,r){at.ZP.log("Mail",["import"],`... importing ${r}/${i}`);const a=Date.now(),o={};for(let t=0;t<s.length;t++){const a=s[t],l=Ea(a,e),c=await va(a);await xa(l,c,o,a),Ca(n,"MailMessages",r+t+1,i,l)}try{await async function(e){const t={};for(const n in e){t[n]=new Set;for(const s in e[n]){t[n].add(s);const{folderType:i,messages:r}=e[n][s];for(const e of r){const t=(0,Na.PW)((0,Na.Zp)(e.raw));if(t){const{bodyParts:n,raw:s}=await ma.Z.parse(e.raw,t.mimeTree);e.bodyParts=n,e.raw=s}}await(0,oa.Z)(n,s,r);const a=await(0,fa.qe)(n,s,i,r);K.Z.updateIndex(a);const{addedSles:o=[],sleUpdates:l=[]}=a,c=[];for(const e of o){const t=r.findIndex((t=>t.messageId===e.messageId&&t.sentDate===e.sentDate&&t.subject===e.subject));if(!(t>-1))throw new Error("Added sle not found in incoming batch");{c.push(e.id);const s=r[t];await ba.Z.call(n,e.sentDate,e.id,s.raw)}}c.length>0&&await(0,_a.o)(n,c);for(const e of l){const s=await(0,ua.Z)(e.id);if(!s)throw new Error("Updated sle not found in db");const i=r.findIndex((e=>e.messageId===s.messageId&&e.sentDate===s.sentDate&&e.subject===s.subject));if(i>-1)for(const e of s.sourceFilterIds){const a=la.Z.get(e);if(!a)throw new Error(`Filter not found for filterId ${e}`);t[a.accountId]=t[a.accountId]||new Set,t[a.accountId].add(a.path),await ba.Z.call(a.accountId,s.sentDate,s.id,r[i].raw),await(0,_a.h)(n,s.id)}else console.warn("Updated sle not found in incoming batch",s.subject,s.id)}}}me.Z.filter(),ee.Z.updateThreads()}(o)}catch(e){Br.addImportError(n,"MailMessages",(0,ue.Z)("Failed importing messages. Error: $1",[e.message||e])),console.error(e)}const l=Date.now();ka+=(l-a)/1e3,Ia+=s.length;const c=Ia/ka,u=new Date((i-r)/c*1e3);X.Z.setStatus((0,ue.Z)("Importing: $1/$2. Batch size: $3. Rate: $4/s. Remaining: $5h:$6m:$7s",[r,i,s.length,c.toFixed(1),u.getHours(),u.getMinutes(),u.getSeconds()]))}async function Za(e,t,n,s,i){const r=ht.Z.adjustBatchSize.bind(void 0,25,1e3,500);let a=25;let o=(await St.Z.importStatus.get(t))?.currentIndex||0;return new Promise(((n,l)=>{!async function c(){const u=s.slice(o,o+a);if(0===u.length)return void n();const m=Date.now();try{await i(t,u,s.length,o,e),o+=u.length,await wa({profilePath:t,currentIndex:o})}catch(e){return void l(e)}const d=Date.now();a=r(a,d-m),c()}()}))}async function Pa(e,t){let n=la.Z.getByFolderId([e,t]);if(!n&&(n=await nt.Z.get(e,t),!n)){const s=Da(t);if(n=pt.Z.getDefaultFilterForPath(e,t,s),await K.Z.addFilter(n,!1),s===he.Oi){const n=pt.Z.getDefaultCustomFolderFilter(e,t),s=await St.Z.filters.add(n);me.Z.updateFilters([s])}}}function Da(e){let t=he.Oi;switch(e.toLowerCase()){case"archive":t=he.hn;break;case"drafts":t=he.kY;break;case"inbox":t=he.e9;break;case"junk":case"spam":t=he.Hd;break;case"sent":t=he.Nz;break;case"trash":t=he.uT}return t}async function Ma(e,t){const n=ca.Z.getFolders();if(!("inbox"===t.toLowerCase()&&n[e]&&Object.keys(n[e]).some((e=>"inbox"===e.toLowerCase()))||n[e]&&n[e][t])){const n=Da(t),s=aa.Z.getAll(),i=t.indexOf(".")>-1?".":"/",r=t.split(i),a={name:r[r.length-1],path:t,delimiter:i,type:n},o=s[e]?s[e].folders:{};o[n]=o[n]||[],o[n].push(a),await ia.Z.addFolders(e,o),me.Z.addFolders(e,o)}}function Oa(e,t,n,s){const i=Da(t);s[e]||(s[e]={}),s[e][t]||(s[e][t]={folderType:i,messages:[]}),s[e][t].messages.push(n)}async function xa(e,t,n,s){const i=(0,pa.Z)(t);let r,a=!1,o=!1;if(i.received){const e=i.received.match(/\bfor\s<(.+@.+\..+)>/);e&&(r=e[1])}if(e&&r&&e===r)a=!0;else if(e){i.from.map((e=>e.address)).includes(e)&&(o=!0);i.to.map((e=>e.address)).includes(e)&&(a=!0);i.cc.map((e=>e.address)).includes(e)&&(a=!0)}const l=i.operaStatus?function(e){const t={mappedFlags:[],otherFlags:[]},n=e.substring(34,42);if(null==n.match(/^[A-Fa-f0-9]{8}$/))return console.error("invalid flags hex value"),t;const s=parseInt(n,16);for(let e=0;e<ha.length;e++){const n=ha[e],i=s&Math.pow(2,e);i&&n[1]?t.mappedFlags.push(n[1]):i&&t.otherFlags.push(n[0])}return t}(i.operaStatus):{mappedFlags:[],otherFlags:[]};let c;if(i.operaLocation){const e=i.operaLocation.match(/^([^\s:]+):(\d+)$/);e&&(c=e[1])}else l.otherFlags.includes("is_sent")&&(c=he.N1);const u={to:i.to,from:i.from,cc:i.cc,inReplyTo:i.inReplyTo,replyTo:i.replyTo,subject:i.subject,sentDate:i.sentDate,messageId:i.messageId||"",listId:i.listId,references:i.references,flags:l.mappedFlags,internal:!0,raw:t};if(e)(a||!a&&!o)&&(await Ma(e,c||he.Gf),await Pa(e,c||he.Gf),Oa(e,c||he.Gf,u,n)),o&&(await Ma(e,c||he.N1),await Pa(e,c||he.N1),Oa(e,c||he.N1,u,n));else{s.match(/\/store\/drafts\//i)?Oa(he.of,he.Wb,u,n):console.error("Found no fitting folder for message:",s,i.operaLocation)}}var La="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ImportProfileDialog.jsx";function Ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ba(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Ua(e,t,"get"))}function Fa(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ua(e,t,"set"),n),n}function Ua(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Va=new WeakMap;class Ha extends s.PureComponent{constructor(e){super(e),Va.set(this,{writable:!0,value:!1}),Ra(this,"onImportItemStarted",(e=>{this.setItemState(e,"IMPORT_STARTED")})),Ra(this,"onImportItemEnded",(e=>{this.setItemState(e,"IMPORT_COMPLETED")})),Ra(this,"onImportItemFailed",((e,t)=>{this.setItemState(e,"IMPORT_FAILED",t)})),Ra(this,"importMail",(async e=>{this.setItemState("email","IMPORT_STARTED");const t=this.state.accountSelection.filter((e=>e.selected)).map((e=>e.account));await Ta(e,this.props.profile.name,t),this.setItemState("email","IMPORT_COMPLETED")})),Ra(this,"startImport",(()=>{if(na.isImportTypeInProgress(this.props.profile.name))return void(0,Zt.c)({title:(0,ue.Z)("Import for this profile is currently running")});const e=this.state.importOptions,t=e.history,n=e.favorites,s=e.passwords,i=e.search,r=e.notes,a=e.speeddial,o=e.email,l=e.hasDefaultInstall&&this.state.useDefaultLocation;let c="";this.refs.userProfile&&(c=""===this.state.selectedProfile?this.refs.userProfile.value:this.state.selectedProfile);const u=[this.props.index.toString(),t.toString(),n.toString(),s.toString(),i.toString(),r.toString(),l.toString(),c.toString(),a.toString()];let m=e.hasDefaultInstall&&this.state.useDefaultLocation?e.profilePath:this.state.selectedFolder||this.state.selectedFile;m?(m.endsWith("operaprefs.ini")&&(m=m.substring(0,m.indexOf("operaprefs.ini"))),b.Z.importData.startImport(u,this.state.masterPassword,m,(()=>{o&&(this.setItemState("email","IMPORT_STARTED"),this.importMail(m).then((()=>{this.setItemState("email","IMPORT_COMPLETED")})).catch((e=>{this.setItemState("email","IMPORT_FAILED"),console.error(e.message||e)})))}))):(0,Zt.c)({title:(0,ue.Z)("Import source path not found!")})})),Ra(this,"openFile",(async e=>new Promise(((t,n)=>{h.Z.fileSystem.chooseEntry({type:"openFile",accepts:[{mimeTypes:["text/*"],extensions:e,description:(0,ue.Z)("files of type $1",[e])}]},(e=>{h.Z.runtime.lastError||!e?n(h.Z.runtime.lastError||"Cancelled opening file"):t(e)}))})))),Ra(this,"openFolder",(async()=>new Promise(((e,t)=>{h.Z.fileSystem.chooseEntry({type:"openDirectory"},(n=>{h.Z.runtime.lastError||!n?t(h.Z.runtime.lastError||"Cancelled opening folder"):e(n)}))})))),Ra(this,"chooseFile",(async()=>{const e=await this.openFile(["html"]),t=await b.Z.mailPrivate.getFullPath(e.filesystem.name,e.fullPath);this.setState({selectedFile:t},this.startImport)})),Ra(this,"chooseFolder",(async()=>{const e=await this.openFolder(),t=await b.Z.mailPrivate.getFullPath(e.filesystem.name,e.fullPath);this.setState({selectedFolder:t},(()=>this.offerAccountSelection(t)))})),Ra(this,"handlePasswordChange",(e=>{e.target instanceof HTMLInputElement&&this.setState({masterPassword:e.target.value.toString()})})),Ra(this,"handleUserProfileChange",(e=>{e.target instanceof HTMLSelectElement&&this.setState({selectedProfile:e.target.value})})),Ra(this,"_onAccountSelection",(e=>{this.setState((t=>({...t,accountSelection:t.accountSelection.map((t=>(t.account===e.account&&(t.selected=!t.selected),t)))})))})),this.state={useDefaultLocation:!0,importOptions:JSON.parse(JSON.stringify(e.profile)),selectedProfile:"",masterPassword:"",importItemStatus:(0,sa.List)(),accountSelection:[],selectedFolder:"",selectedFile:""}}componentDidMount(){Fa(this,Va,!0),b.Z.importData.onImportItemStarted.addListener(this.onImportItemStarted),b.Z.importData.onImportItemEnded.addListener(this.onImportItemEnded),b.Z.importData.onImportItemFailed.addListener(this.onImportItemFailed),this.offerAccountSelection(this.props.profile.profilePath),this.props.setStartImport(this.startImport),this.props.setChooseFile(this.chooseFile)}componentWillUnmount(){Fa(this,Va,!1),b.Z.importData.onImportItemStarted.removeListener(this.onImportItemStarted),b.Z.importData.onImportItemEnded.removeListener(this.onImportItemEnded),b.Z.importData.onImportItemFailed.removeListener(this.onImportItemFailed)}componentDidUpdate(e){e.profile!==this.props.profile&&(this.setState({importOptions:JSON.parse(JSON.stringify(this.props.profile))}),this.offerAccountSelection(this.props.profile.profilePath))}offerAccountSelection(e){this.props.profile.email&&(e.endsWith("operaprefs.ini")&&(e=e.substring(0,e.indexOf("operaprefs.ini"))),Sa(e).then((e=>{const t=e.filter((e=>e.MAIL_EMAIL&&[he.s9.IMAP,he.s9.POP].includes(e.accountType))).map((e=>e.MAIL_EMAIL)).map((e=>({account:e,selected:!0})));Ba(this,Va)&&this.setState({accountSelection:t})})))}setItemState(e,t,n){Ba(this,Va)&&this.setState((s=>{let i=s.importItemStatus;const r=i.filter((t=>t.itemName===e)).first(),a={itemName:e,state:t,errorMsg:n};return i=r?i.map((t=>t.itemName===e?"IMPORT_FAILED"===t.state?t:{...a}:t)):i.push(a),{importItemStatus:i}}))}_toggleDefault(){this.setState((e=>({useDefaultLocation:!e.useDefaultLocation})),(()=>{this.state.useDefaultLocation?this.offerAccountSelection(this.props.profile.profilePath):this.offerAccountSelection(this.state.selectedFolder)}))}_changeSelection(e){this.setState((t=>{const n={...t.importOptions};return n[e]=!n[e],{importOptions:n}}))}_setSelection(e,t){this.setState((n=>{const s={...n.importOptions};return s[e]=t,{importOptions:s}}))}_getImportItemMarkup(e,t,n,i,r){return s.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:319,columnNumber:7}},s.createElement("div",{className:"import-setting",__source:{fileName:La,lineNumber:320,columnNumber:9}},s.createElement("input",{id:t,type:"checkbox",checked:i,onChange:this._changeSelection.bind(this,e),disabled:r,__source:{fileName:La,lineNumber:321,columnNumber:11}}),s.createElement("label",{htmlFor:t,__source:{fileName:La,lineNumber:326,columnNumber:11}},n)))}render(){const e=this.props.profile,t=this.state.importOptions;if(t){const n=Boolean(!(t.passwords||t.history||t.notes||t.search||t.speeddial||t.email));let i;return e&&e.UserProfiles&&e.UserProfiles.length>0&&(i=e.UserProfiles.map((e=>s.createElement("option",{key:e.profileName,value:e.profileName,__source:{fileName:La,lineNumber:367,columnNumber:13}},e.profileDisplayName)))),s.createElement("div",{className:"import-data",__source:{fileName:La,lineNumber:375,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:La,lineNumber:376,columnNumber:11}},s.createElement("fieldset",{__source:{fileName:La,lineNumber:377,columnNumber:13}},i&&s.createElement("div",{className:"profile",__source:{fileName:La,lineNumber:379,columnNumber:17}},s.createElement("label",{htmlFor:"userProfile",__source:{fileName:La,lineNumber:380,columnNumber:19}},(0,ue.Z)("Chrome User Profile")),s.createElement("select",{ref:"userProfile",id:"userProfile",onChange:this.handleUserProfileChange,value:this.state.selectedProfile,__source:{fileName:La,lineNumber:381,columnNumber:19}},i)),e&&e.favorites&&this._getImportItemMarkup("favorites","f-favorites",(0,ue.Z)("Bookmarks"),!!t&&t.favorites,n),e.passwords&&this._getImportItemMarkup("passwords","f-passwords",(0,ue.Z)("Passwords"),!!t&&t.passwords,!1),e.supportsMasterPassword&&s.createElement("div",{className:"setting-single import-masterpassword",__source:{fileName:La,lineNumber:406,columnNumber:17}},s.createElement("label",{htmlFor:"f-masterpassword",__source:{fileName:La,lineNumber:407,columnNumber:19}},(0,ue.Z)("Master password, if needed:")),s.createElement("input",{id:"f_masterpassword",type:"password",onChange:this.handlePasswordChange,__source:{fileName:La,lineNumber:410,columnNumber:19}})),e.history&&this._getImportItemMarkup("history","f-history",(0,ue.Z)("History"),!!t&&t.history,!1),e.notes&&this._getImportItemMarkup("notes","f-notes",(0,ue.Z)("Notes"),!!t&&t.notes,!1),e.search&&this._getImportItemMarkup("search","f-search",(0,ue.Z)("Search Engines"),!!t&&t.search,!1),e.speeddial&&this._getImportItemMarkup("speeddial","f-speeddial",(0,ue.Z)("Speed Dial"),!!t&&t.speeddial,!1),e.email&&this._getImportItemMarkup("email","f-email",(0,ue.Z)("Mail"),!!t&&t.email,this.state.accountSelection.every((e=>!e.selected))),e.email&&s.createElement("div",{className:"import-mail-account",__source:{fileName:La,lineNumber:455,columnNumber:17}},this.state.accountSelection.map((e=>s.createElement("div",{className:"imported-email",key:e.account,__source:{fileName:La,lineNumber:458,columnNumber:23}},s.createElement("input",{id:e.account,type:"checkbox",checked:e.selected,onChange:()=>this._onAccountSelection(e),disabled:!t.email,__source:{fileName:La,lineNumber:459,columnNumber:25}}),s.createElement("label",{htmlFor:e.account,__source:{fileName:La,lineNumber:464,columnNumber:25}},e.account))))),e&&e.supportsStandaloneImport&&e.hasDefaultInstall&&s.createElement("div",{__source:{fileName:La,lineNumber:473,columnNumber:17}},s.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:474,columnNumber:19}},s.createElement("input",{id:"f-location",type:"checkbox",checked:this.state.useDefaultLocation&&e.hasDefaultInstall,onChange:this._toggleDefault.bind(this),disabled:!1===e.hasDefaultInstall,__source:{fileName:La,lineNumber:475,columnNumber:21}}),s.createElement("label",{htmlFor:"f-location",__source:{fileName:La,lineNumber:480,columnNumber:21}},(0,ue.Z)("Use Default Profile Location"))))),e&&e.hasDefaultInstall&&this.state.useDefaultLocation&&e.profilePath.length>0&&s.createElement("div",{className:"import-pathname",__source:{fileName:La,lineNumber:491,columnNumber:15}},(0,ue.Z)("Detected Profile Path:"),s.createElement("br",{__source:{fileName:La,lineNumber:492,columnNumber:46}}),s.createElement("input",{type:"text",value:e.profilePath,readOnly:!0,__source:{fileName:La,lineNumber:493,columnNumber:17}})),e?.supportsStandaloneImport&&(!e?.hasDefaultInstall||!this.state.useDefaultLocation)&&s.createElement(s.Fragment,null,s.createElement("div",{className:"import-pathname",__source:{fileName:La,lineNumber:501,columnNumber:17}},(0,ue.Z)("Selected Profile Path:"),s.createElement("br",{__source:{fileName:La,lineNumber:502,columnNumber:48}}),s.createElement("input",{type:"text",value:this.state.selectedFolder||(0,ue.Z)("No folder selected"),readOnly:!0,__source:{fileName:La,lineNumber:503,columnNumber:19}})),s.createElement("div",{__source:{fileName:La,lineNumber:507,columnNumber:17}},s.createElement("input",{type:"button",className:"primary",onClick:this.chooseFolder,value:(0,ue.Z)("Choose a Folder..."),__source:{fileName:La,lineNumber:508,columnNumber:19}})))))}return null}}Ra(Ha,"contextType",Vs.Z);const Wa=Ha;var za=n(90808),Ga="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ImportProgressDialog.jsx";function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,$a(e,t,"get"))}function Ya(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$a(e,t,"set"),n),n}function $a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Xa=new WeakMap,Qa=new WeakMap;class qa extends s.PureComponent{constructor(e){super(e),Xa.set(this,{writable:!0,value:!1}),Qa.set(this,{writable:!0,value:void 0}),Ka(this,"onProgress",(0,za.Z)((()=>{ja(this,Xa)&&this.setState({progress:na.getImportProgress()})}),300,{leading:!0})),Ka(this,"renderItem",((e,t)=>s.createElement("div",{key:e,className:"setting-single import-status-table",__source:{fileName:Ga,lineNumber:89,columnNumber:7}},s.createElement("span",{__source:{fileName:Ga,lineNumber:90,columnNumber:9}},e),this._getImportItemStatus(t)))),Ka(this,"renderIndentedItem",((e,t)=>s.createElement("div",{key:e,className:"setting-single import-mail-account imported-email import-status-table",__source:{fileName:Ga,lineNumber:98,columnNumber:7}},s.createElement("span",{__source:{fileName:Ga,lineNumber:99,columnNumber:9}},e),this._getImportItemStatus(t)))),Ka(this,"renderItems",(e=>{const t=[],n=na.isImportTypeInProgress(e)?(0,ue.Z)("title","Running"):(0,ue.Z)("title","Completed");t.push(s.createElement("header",{key:e,className:"dialog-header",__source:{fileName:Ga,lineNumber:111,columnNumber:7}},s.createElement("h4",{className:"dialog-title",__source:{fileName:Ga,lineNumber:112,columnNumber:9}},e," ",n)));for(const n in this.state.progress[e]){const s=this.state.progress[e][n];if(t.push(this.renderItem(n,s)),s.children)for(const e in s.children){const n=s.children[e];t.push(this.renderIndentedItem(e,n))}}return t})),Ka(this,"renderTypes",(e=>{const t=[];for(const n of e)t.push(s.createElement("div",{key:n,className:"import-data",__source:{fileName:Ga,lineNumber:132,columnNumber:9}},s.createElement("div",{className:"dialog-content imported-data",__source:{fileName:Ga,lineNumber:133,columnNumber:11}},this.renderItems(n))));return t})),Ka(this,"numImportsToReport",(()=>Object.keys(this.state.progress).length)),this.state={progress:na.getImportProgress()}}componentDidMount(){Ya(this,Xa,!0),Ya(this,Qa,na.addListener(this.onProgress))}componentWillUnmount(){Ya(this,Xa,!1),ja(this,Qa).remove()}_getImportItemStatus(e){return e.errors?s.createElement("div",{className:"import-result",__source:{fileName:Ga,lineNumber:54,columnNumber:9}},s.createElement("div",{className:"import-failed",title:e.errors,__source:{fileName:Ga,lineNumber:55,columnNumber:11}},s.createElement("span",{className:"status-icon",dangerouslySetInnerHTML:{__html:n(25531)},__source:{fileName:Ga,lineNumber:56,columnNumber:13}}),(0,ue.Z)("Error"))):!e.children&&e.current>=e.total?s.createElement("div",{className:"import-result",__source:{fileName:Ga,lineNumber:65,columnNumber:9}},s.createElement("div",{className:e.warnings?"import-warning":"import-success",title:e.warnings,__source:{fileName:Ga,lineNumber:66,columnNumber:11}},s.createElement("span",{className:"status-icon",dangerouslySetInnerHTML:{__html:n(75124)},__source:{fileName:Ga,lineNumber:68,columnNumber:13}}),(0,ue.Z)("other","Done"))):!e.children&&e.total>1?s.createElement("div",{className:"import-result numbers",__source:{fileName:Ga,lineNumber:77,columnNumber:9}},s.createElement("div",{className:e.warnings?"import-warning":"import-success",title:e.warnings,__source:{fileName:Ga,lineNumber:78,columnNumber:11}},e.current+"/"+e.total)):void 0}render(){const e=this.numImportsToReport(),t=Object.keys(this.state.progress);return s.createElement("div",{__source:{fileName:Ga,lineNumber:150,columnNumber:7}},e>0&&s.createElement("div",{className:"import-container",__source:{fileName:Ga,lineNumber:152,columnNumber:11}},this.renderTypes(t)))}}const Ja=qa;var eo=n(65792),to=n.n(eo),no=n(14705),so=n(95077),io=n(71157),ro="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonPopup.jsx";function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(e,t,n,s){if(!s)return{};const i={};return"above"===t?i.bottom=Math.round(s.height-n.top-s.top+3)+"px":i.top=Math.round(n.bottom-s.top+3)+"px","left"===e?i.right=Math.round(Math.max(s.right-n.right,3))+"px":i.left="right"===e?Math.round(Math.max(n.left,3))+"px":Math.round(n.left+n.width/2)+"px",i}class lo extends s.PureComponent{constructor(e,t){super(e),ao(this,"onIntersect",(e=>{e[0].intersectionRatio<=0&&this.props.hidePopup()})),ao(this,"onWindowResize",(()=>{this.forceUpdate()})),ao(this,"getEdgeMargin",(e=>{let t=Number.MAX_SAFE_INTEGER;const n=this.props.buttonRef.getBoundingClientRect();return"right"===e?t=n.left:"left"===e&&(t=this.context.innerWidth-n.right),t<=3?3-t:0})),ao(this,"handleClickOutside",(e=>{this.props.hidePopup()})),ao(this,"keyDown",(e=>{e.keyCode===$s.Z.KEY_ESCAPE&&(this.props.hidePopup(),e.preventDefault(),e.stopPropagation())})),this.portalContainer=t.document.getElementById("browser")}componentDidMount(){this.context.addEventListener("resize",this.onWindowResize,!1),this.intersectionObserver=new IntersectionObserver(this.onIntersect,{root:this.portalContainer}),this.intersectionObserver.observe(this.props.buttonRef)}componentDidUpdate(e){this.props.buttonRef!==e.buttonRef&&(this.intersectionObserver.disconnect(),this.intersectionObserver.observe(this.props.buttonRef))}componentWillUnmount(){this.context.removeEventListener("resize",this.onWindowResize,!1),this.intersectionObserver.disconnect()}render(){const e=W.ZP.getVisibleUI(this.context.vivaldiWindowId).addressBar,t=Boolean(this.props.buttonRef.closest(".UrlBar")),n=e||!t,{popupClassName:i,hasLightArrow:r,verticalPosition:a}=this.props,o=this.props.buttonRef.getBoundingClientRect(),l=this.props.width||200,c=this.context.document.body?.getBoundingClientRect(),u=function(e,t,n,s){if(!n)return"center";const i=n.right,r=t.left-n.left,a=i-t.right,o=e/2<r+t.width/2-3,l=e/2<a+t.width/2-3,c=e+t.width<a,u=e+t.width<r;if(o&&l){if("left"===s)return"right";if("right"===s)return"left"}else{if(u)return"left";if(c)return"right"}return"center"}(l,o,c,this.props.anchorPosition);let m={"--popupWidth":Math.round(l)+"px","--buttonWidth":Math.round(o.width)+"px","--buttonHeight":Math.round(o.height)+"px","--edgeMargin":Math.round(this.getEdgeMargin(u))+"px"};n&&(m={...m,...oo(u,a,o,c)});const d=s.createElement(io.Z,{classNames:"button-popup",in:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:ro,lineNumber:200,columnNumber:7}},s.createElement(gi.Z,{focusName:"focus-popup-area",forceTrap:!0,onKeyDown:this.keyDown,style:m,className:bn()(i,"button-popup",`button-popup-${u}`,`button-popup-${a}`,"button-popup-arrow-"+(r?"light":"dark")),__source:{fileName:ro,lineNumber:211,columnNumber:9}},this.props.children));return this.portalContainer&&n?pn.createPortal(d,this.portalContainer):d}}ao(lo,"contextType",Vs.Z);const co=(0,so.Z)(lo);var uo=n(5264),mo=n.n(uo),ho=n(52373);function po(e,t,n=((e,t,n)=>(0,ho.Z)(t[e],n[e]))){if(e===t)return!0;const s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(let i=0;i<s.length;i++)if(!t.hasOwnProperty(s[i])||!n(s[i],e,t))return!1;return!0}var go=n(81502),bo=n(34155),No="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButton.jsx";function fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,vo(e,t,"set"),n),n}function vo(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const Eo=["mousedown","pointerdown","touchstart"],Co=n(39135),wo=[P.kKeyboardTabToAll];function yo(e,t,n){switch(e){case"children":return!t.isPopupVisible&&!n.isPopupVisible||t.children===n.children;case"buttonStyle":case"style":return t[e]&&n[e]?po(t[e],n[e]):t[e]===n[e];case"menu":return!0}return t[e]===n[e]}var So=new WeakMap;class To extends s.Component{constructor(...e){super(...e),fo(this,"dragImage",new Image),fo(this,"uuid",lr()()),fo(this,"setButtonRef",(e=>{this.buttonRef=e,this.buttonRef&&this.props.isPopupVisible&&this.forceUpdate()})),So.set(this,{writable:!0,value:void 0}),fo(this,"state",{theme:Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)||no.Z.getDefaultTheme(),themeStyle:Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||no.Z.getFallbackStyle(),isDragging:!1,isDragOver:!1,horizontalPosition:null,verticalPosition:null,isMenuVisible:!1}),fo(this,"updateThemeStyle",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId),t=Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId);this.setState({theme:t,themeStyle:e})})),fo(this,"onMouseEnter",(()=>{this.updateDragImage(this.props.dragImage,this.props.image,String(this.state.themeStyle["--colorHighlightBg"]))})),fo(this,"updateDragImage",mo()(1)(((e,t,n)=>{if(!e&&!t)return void(this.dragImage.src="");const s=document.createElement("canvas"),i=new Image;i.onerror=(e,t)=>{console.warn(`Error loading image for ${this.props.name||this.props.title||"unnamed button"}`,e)},i.onload=()=>{const t=32,r=s.getContext("2d");if(s.width=t,s.height=t,r.fillStyle=n,r.fillRect(0,0,t,t),e)r.drawImage(i,4,4,24,24);else{const e=to()(n).luminance()<.4;e&&(r.fillStyle="white",r.globalCompositeOperation="difference",r.fillRect(0,0,t,t)),r.globalCompositeOperation="multiply",r.drawImage(i,4,4,24,24),e&&(r.globalCompositeOperation="difference",r.fillRect(0,0,t,t))}r.beginPath(),r.moveTo(16,0),r.bezierCurveTo(0,0,0,0,0,16),r.bezierCurveTo(0,t,0,t,16,t),r.bezierCurveTo(t,t,t,t,t,16),r.bezierCurveTo(t,0,t,0,16,0),r.rect(0,0,t,t),r.closePath(),r.clip(),r.clearRect(0,0,t,t),this.dragImage.src=s.toDataURL()},e?i.src=e:t&&(i.src="data:image/svg+xml;charset=utf-8,"+t)}))),fo(this,"setFocus",(()=>{this.buttonRef?.focus()})),fo(this,"getContextMenuHandler",(e=>this.hasMenu()||Boolean(this.props.customizeMenu)?this.showCustomizeMenu(e,e.target):null)),fo(this,"showMenu",(async e=>{if(this.state.isDragging)return;if(!this.props.menuOrigin)return void console.warn("ToolbarButton: showMenu called without menuOrigin");let t;const n=e||this.buttonRef;if(this.props.menu){const e=this.props.menu();t=Array.isArray(e)?e:await e}else t=[];this.props.customizeMenu&&(t=t.concat(this.props.customizeMenu)),0!==t.length?(this.context.removeEventListener("pointerup",this.pointerUp,!0),(0,Hs.Z)(this.context.vivaldiWindowId,t,this.menuVisibilityChanged,this.props.menuOrigin,n||void 0)()):console.warn("ToolbarButton: showMenu called without a menu")})),fo(this,"showCustomizeMenu",(async(e,t)=>{if(this.props.disabled&&!this.props.alwaysMenu)return;let n;if(e.persist(),e.preventDefault(),e.stopPropagation(),this.props.menu){const e=this.props.menu();n=Array.isArray(e)?e:await e}else n=[];this.props.customizeMenu&&(n=n.concat(this.props.customizeMenu)),(0,Hs.Z)(this.context.vivaldiWindowId,n,this.menuVisibilityChanged)(e)})),fo(this,"getRect",(()=>this.buttonRef?.getBoundingClientRect())),fo(this,"hidePopup",(async()=>{this.props.hidePopup?.()})),fo(this,"onBlur",(e=>{this.props.onBlur?.(e)})),fo(this,"onFocus",(async e=>{e.persist(),this.props.onFocus?.(e)})),fo(this,"onDragStart",(e=>{e.persist(),e.shiftKey?(clearTimeout(this.menuTimer),e.dataTransfer.dropEffect="move",this.dragImage.src&&e.dataTransfer.setDragImage(this.dragImage,0,0),this.props.mimeType&&this.props.mimeContent&&(e.dataTransfer.setData(this.props.mimeType,this.props.mimeContent),e.dataTransfer.setData("text/plain","")),this.setState({isDragging:!0},(()=>{this.props.onDragStart&&this.props.onDragStart(e)}))):e.preventDefault()})),fo(this,"onDragEnter",(e=>{this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)&&(e.persist(),this.setState({isDragOver:!0},(()=>{this.props.onDragEnter&&this.props.mimeContent?this.props.onDragEnter(e,this.props.mimeContent):this.props.onDragEnter&&this.props.onDragEnter(e)})))})),fo(this,"onDragLeave",(e=>{this.setState({verticalPosition:null,horizontalPosition:null,isDragOver:!1})})),fo(this,"onDragOver",(e=>{if(this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)){let t=.5;void 0!==this.props.edgeAmount&&this.props.edgeAmount>=0&&this.props.edgeAmount<=.5&&(t=this.props.edgeAmount);const n=this.getRect();if(n){const s=e.clientX-n.left,i=e.clientY-n.top,r=s<n.width*t,a=s>n.width*(1-t),o=i<n.height*t,l=i>n.height*(1-t);e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.setState({isDragOver:!0,verticalPosition:o?"top":l?"bottom":"center",horizontalPosition:r?"left":a?"right":"center"})}}})),fo(this,"onDrop",(e=>{const t=this.state.verticalPosition||"center",n=this.state.horizontalPosition||"center";this.setState({verticalPosition:null,horizontalPosition:null,isDragging:!1,isDragOver:!1}),e.persist(),this.props.onDrop&&this.props.onDrop(e,n,t)})),fo(this,"onDragEnd",(e=>{e.persist(),this.setState({isDragging:!1},(()=>{this.props.onDragEnd&&this.props.onDragEnd(e)}))})),fo(this,"pointerEnter",(e=>{e.persist(),this.props.onPointerEnter&&this.props.onPointerEnter(e)})),fo(this,"pointerLeave",(e=>{clearTimeout(this.menuTimer),this.props.onPointerLeave&&this.props.onPointerLeave(e)})),fo(this,"limitToDrag",(e=>{e.shiftKey||e.preventDefault()})),fo(this,"menuVisibilityChanged",(e=>{e?this.setState({isMenuVisible:!0}):bo.nextTick((()=>{this.setState({isMenuVisible:!1})}))})),fo(this,"onMenuIndicator",(e=>{const{parentElement:t}=e.target;t instanceof HTMLElement&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation()),this.state.isMenuVisible||setTimeout((()=>this.showMenu(t)),90)})),fo(this,"pointerDown",(e=>{const t=Date.now();if(this.pointerTimestamp&&t-this.pointerTimestamp<150)return void e.preventDefault();e.persist();const n=e.shiftKey;if(n||e.button!==Nn.kLeft||"function"!=typeof this.props.onPointerDown){if(!n){const n=e.currentTarget;let s=!0;e.preventDefault(),e.button===Nn.kLeft&&this.hasMenu()?this.props.onClick?this.menuTimer=setTimeout((()=>this.showMenu(n)),650):this.state.isMenuVisible&&(s=!1):e.button===Nn.kRight&&(this.hasMenu()||this.props.customizeMenu)&&(e.stopPropagation(),s=!1),s&&(this.pointerTimestamp=t,this.context.addEventListener("pointerup",this.pointerUp,!0))}}else this.props.onPointerDown(e)})),fo(this,"pointerUp",(e=>{this.context.removeEventListener("pointerup",this.pointerUp,!0),clearTimeout(this.menuTimer);const t=this.buttonRef;if(t&&(e.target===t||e.target===t.parentElement)){const t=e.ctrlKey;if(e.button===Nn.kCenter||t)e.preventDefault(),e.stopPropagation(),this.props.onMiddleClick&&this.props.onMiddleClick(e);else if(e.button===Nn.kLeft){const t=Date.now()-this.pointerTimestamp;this.props.onClick&&("mouse"===e.pointerType||t<650)?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLElement&&this.showMenu(e.target))}}})),fo(this,"onAuxClick",(e=>{e.button===Nn.kCenter&&(e.preventDefault(),e.stopPropagation())})),fo(this,"keyDown",(e=>{if(clearTimeout(this.menuTimer),this.hasMenu()){const t=e.keyCode;(t===$s.Z.KEY_DOWN&&"bottom"===this.props.menuOrigin||t===$s.Z.KEY_UP&&"top"===this.props.menuOrigin)&&(this.showMenu(e.currentTarget),e.preventDefault(),e.stopPropagation())}else this.props.onKeyDown&&this.props.onKeyDown(e)})),fo(this,"keyUp",(e=>{const t=e.keyCode;t!==$s.Z.KEY_SPACE&&t!==$s.Z.KEY_ENTER&&t!==$s.Z.KEY_RETURN||(this.props.onClick?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),this.showMenu(e.currentTarget)))})),fo(this,"onDoubleClick",(e=>{e.stopPropagation()}))}componentDidMount(){_o(this,So,Z.Z.addListener(this.updateThemeStyle))}shouldComponentUpdate(e,t){return!po(this.props,e,yo)||!po(this.state,t)}componentWillUnmount(){var e,t;(e=this,t=So,function(e,t){return t.get?t.get.call(e):t.value}(e,vo(e,t,"get"))).remove(),this.context.removeEventListener("pointerup",this.pointerUp,!0)}hasMenu(){return Boolean(this.props.menu)}render(){const e=this.props.disabled,t="number"==typeof this.props.tabIndex?this.props.tabIndex:this.props.prefValues[P.kKeyboardTabToAll],n=this.props.image||null,i=this.props.imagePath||null,r=this.props.title||null,a=this.props.badgeText||null,o=this.props.isMenuIndicatorVisible||!1,l=this.props.isPopupVisible||!1,c=!(!this.props.onDragStart||!this.props.mimeType),u=!(!this.props.onDrop||!this.props.onDragEnter),m=this.props.children||null,d=100*(this.props.progress??0),h=bn()("ToolbarButton-Button",{"button-on":this.props.isOn,"button-textonly":!n&&!i,"button-pressed":this.props.isPressed||l,"button-dragged":this.state.isDragging,"button-dragover":this.state.isDragOver,"button-dragover-top":"top"===this.state.verticalPosition,"button-dragover-bottom":"bottom"===this.state.verticalPosition,"button-dragover-center":"center"===this.state.verticalPosition&&"center"===this.state.horizontalPosition,"button-dragover-left":"left"===this.state.horizontalPosition,"button-dragover-right":"right"===this.state.horizontalPosition});if(!r&&!this.props.tooltip)return console.warn("Button hidden due to missing title and tooltip"),null;const p=[this.uuid,this.props.outsideClickIgnoreClass||""];return s.createElement("div",{className:bn()("button-toolbar",this.props.className,{[this.uuid]:m,"button-menu":this.props.isMenuIndicatorVisible}),onContextMenu:e?this.getContextMenuHandler:null,style:this.props.style,onMouseEnter:this.onMouseEnter,draggable:e&&c||null,onPointerDown:e&&c?this.limitToDrag:null,onDragStart:e&&c?this.onDragStart:null,onDragEnd:c?this.onDragEnd:null,onDragEnter:u?this.onDragEnter:null,onDragOver:u?this.onDragOver:null,onDragLeave:u?this.onDragLeave:null,onDrop:u?this.onDrop:null,title:e?this.props.tooltip||r:null,__source:{fileName:No,lineNumber:705,columnNumber:12}},s.createElement("button",{name:this.props.name,ref:this.setButtonRef,disabled:e,draggable:!e&&c||null,onDragStart:c?this.onDragStart:null,tabIndex:0!==t?t:null,onKeyDown:this.keyDown,onKeyUp:this.keyUp,onPointerDown:this.pointerDown,onAuxClick:this.onAuxClick,autoFocus:this.props.autoFocus,onPointerEnter:this.pointerEnter,onPointerLeave:this.pointerLeave,onDoubleClick:this.onDoubleClick,onContextMenu:this.getContextMenuHandler,onBlur:this.onBlur,onFocus:this.onFocus,style:this.props.buttonStyle||null,title:e?null:this.props.tooltip||r,type:"button",className:h||null,__source:{fileName:No,lineNumber:723,columnNumber:7}},!i&&n&&s.createElement("span",{dangerouslySetInnerHTML:{__html:n},__source:{fileName:No,lineNumber:745,columnNumber:36}}),i&&s.createElement("img",{src:i,alt:"",__source:{fileName:No,lineNumber:746,columnNumber:26}}),(n||i)&&a&&s.createElement("span",{className:"button-badge",style:this.props.badgeColor?(0,go.E$)(this.state.theme,this.props.badgeColor.hex()):{},__source:{fileName:No,lineNumber:748,columnNumber:13}},a),r&&s.createElement("span",{className:"button-title",__source:{fileName:No,lineNumber:759,columnNumber:22}},r),o&&s.createElement("span",{className:"button-toolbar-menu-indicator",onPointerDown:this.state.isMenuVisible?void 0:this.onMenuIndicator,dangerouslySetInnerHTML:{__html:Co},__source:{fileName:No,lineNumber:761,columnNumber:13}}),!n&&!i&&a&&s.createElement("span",{className:"button-badge",style:this.props.badgeColor?(0,go.E$)(this.state.theme,this.props.badgeColor.hex()):{},__source:{fileName:No,lineNumber:769,columnNumber:13}},a)),d>0&&d<100&&s.createElement("div",{className:"progress",__source:{fileName:No,lineNumber:782,columnNumber:11}},s.createElement("div",{className:"loaded",style:{width:`${d}%`},__source:{fileName:No,lineNumber:783,columnNumber:13}})),l&&m&&this.props.hidePopup&&this.props.popupPosition&&this.buttonRef&&s.createElement(co,{eventTypes:Eo,outsideClickIgnoreClass:p,hasLightArrow:this.props.hasLightArrow,hidePopup:this.hidePopup,verticalPosition:this.props.popupPosition,className:this.props.className,buttonRef:this.buttonRef,width:this.props.popupWidth,popupClassName:this.props.popupClassName,anchorPosition:this.props.popupAnchor,__source:{fileName:No,lineNumber:793,columnNumber:11}},m))}}fo(To,"contextType",Vs.Z);const ko=(0,bi.Z)(To,wo);var Io="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ImportDialog.jsx";function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zo(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Do(e,t,"get"))}function Po(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Do(e,t,"set"),n),n}function Do(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Mo=new WeakMap,Oo=new WeakMap;class xo extends s.PureComponent{constructor(e){super(e),Mo.set(this,{writable:!0,value:!1}),Oo.set(this,{writable:!0,value:void 0}),Ao(this,"getProfileName",(()=>this.state.selectedIndex<this.state.profiles.length?this.state.profiles[this.state.selectedIndex].name:"Feeds")),Ao(this,"onImportItemStarted",(e=>{Br.setImportProgress(this.getProfileName(),e,0,0)})),Ao(this,"onImportItemEnded",(e=>{Br.setImportProgress(this.getProfileName(),e,1,1)})),Ao(this,"onImportItemFailed",((e,t)=>{Br.addImportError(this.getProfileName(),e,t)})),Ao(this,"onImportStarted",(()=>{b.Z.importData.onImportItemStarted.addListener(this.onImportItemStarted),b.Z.importData.onImportItemEnded.addListener(this.onImportItemEnded),b.Z.importData.onImportItemFailed.addListener(this.onImportItemFailed),b.Z.importData.onImportEnded.addListener(this.onImportEnded),b.Z.importData.onImportStarted.removeListener(this.onImportStarted),this.setState({importState:"IMPORT_STARTED",selectedPane:"status",numImportsInStore:na.numImportsInStore()})})),Ao(this,"onImportEnded",(e=>{b.Z.importData.onImportItemStarted.removeListener(this.onImportItemStarted),b.Z.importData.onImportItemEnded.removeListener(this.onImportItemEnded),b.Z.importData.onImportItemFailed.removeListener(this.onImportItemFailed),b.Z.importData.onImportEnded.removeListener(this.onImportEnded),this.setState({importState:0===e?"IMPORT_COMPLETED":"IMPORT_FAILED",numImportsInStore:na.numImportsInStore()})})),Ao(this,"onProgress",(()=>{const e=na.numImportsInStore();e!==this.state.numImportsInStore&&this.setState({numImportsInStore:e})})),Ao(this,"setStartImport",(e=>{Zo(this,Mo)&&this.setState({startImport:()=>{this.onImportStarted(),e()}})})),Ao(this,"setChooseFile",(e=>{Zo(this,Mo)&&this.setState({chooseFile:e})})),this.state={importState:"IDLE",profiles:[],selectedIndex:0,selectedPane:A.ZP.get(P.kMailImportSelectedPane),numImportsInStore:0,startImport:()=>{},chooseFile:()=>Promise.resolve()}}componentDidMount(){Po(this,Mo,!0),b.Z.importData.getProfiles((e=>{Zo(this,Mo)&&this.setState({profiles:e,numImportsInStore:na.numImportsInStore()})})),Po(this,Oo,na.addListener(this.onProgress))}componentWillUnmount(){Po(this,Mo,!1),Zo(this,Oo).remove()}handleSelectionChange(e){if(e.target instanceof HTMLSelectElement){const t=parseInt(e.target.value,10);this.setState({selectedIndex:t})}}renderImportFooter(){const e=this.state.selectedIndex<this.state.profiles.length?this.state.profiles[this.state.selectedIndex]:void 0,t=e?.hasDefaultInstall||e?.supportsStandaloneImport||"none"===e?.willShowDialogType,n=!e||"file"===e.willShowDialogType&&"Safari"!==e.name;return t?s.createElement("footer",{className:"dialog-footer",__source:{fileName:Io,lineNumber:158,columnNumber:9}},s.createElement("div",{__source:{fileName:Io,lineNumber:159,columnNumber:11}},s.createElement("input",{type:"button",className:"primary",onClick:this.state.startImport,value:(0,ue.Z)("Start Import"),__source:{fileName:Io,lineNumber:160,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.props.onClose,value:(0,ue.Z)("Close"),__source:{fileName:Io,lineNumber:164,columnNumber:13}}))):n?s.createElement("footer",{className:"dialog-footer",__source:{fileName:Io,lineNumber:172,columnNumber:9}},s.createElement("div",{__source:{fileName:Io,lineNumber:173,columnNumber:11}},s.createElement("input",{type:"button",className:"primary",onClick:this.state.chooseFile,value:(0,ue.Z)("Choose a File..."),__source:{fileName:Io,lineNumber:174,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.props.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:Io,lineNumber:178,columnNumber:13}}))):void 0}renderStatusFooter(){return s.createElement("footer",{className:"dialog-footer",__source:{fileName:Io,lineNumber:189,columnNumber:7}},s.createElement("div",{__source:{fileName:Io,lineNumber:190,columnNumber:9}},s.createElement("input",{type:"button",className:"primary",onClick:this.props.onClose,value:(0,ue.Z)("OK"),__source:{fileName:Io,lineNumber:191,columnNumber:11}}),s.createElement("input",{type:"button",onClick:()=>this._selectPane("import"),value:(0,ue.Z)("New Import..."),__source:{fileName:Io,lineNumber:195,columnNumber:11}})))}_selectPane(e){st.Z.set(P.kMailImportSelectedPane,e),this.setState({selectedPane:e})}render(){const e=this.state.profiles.map((e=>s.createElement("option",{key:e.index,value:e.index,__source:{fileName:Io,lineNumber:211,columnNumber:9}},e.name)));return e.push(s.createElement("option",{key:"opml-import",value:this.state.profiles.length,__source:{fileName:Io,lineNumber:217,columnNumber:7}},(0,ue.Z)("Import Feeds (OPML file)"))),s.createElement(ln.Z,{onRequestClose:this.props.onClose,__source:{fileName:Io,lineNumber:223,columnNumber:7}},s.createElement("div",{className:"StatusPopup-Header",__source:{fileName:Io,lineNumber:224,columnNumber:7}},s.createElement("h2",{__source:{fileName:Io,lineNumber:225,columnNumber:9}},(0,ue.Z)("Imports"))),s.createElement("div",{className:"toolbar toolbar-default import",__source:{fileName:Io,lineNumber:229,columnNumber:7}},s.createElement("div",{className:"toolbar-group equal-width",__source:{fileName:Io,lineNumber:230,columnNumber:9}},s.createElement(ko,{title:(0,ue.Z)("Import"),isPressed:"import"===this.state.selectedPane,onClick:()=>this._selectPane("import"),__source:{fileName:Io,lineNumber:231,columnNumber:11}}),s.createElement(ko,{title:(0,ue.Z)("Import Status ($1)",[this.state.numImportsInStore]),isPressed:"status"===this.state.selectedPane,onClick:()=>this._selectPane("status"),__source:{fileName:Io,lineNumber:236,columnNumber:11}}))),"import"===this.state.selectedPane&&s.createElement("div",{className:"import-data",__source:{fileName:Io,lineNumber:245,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:Io,lineNumber:246,columnNumber:11}},s.createElement("fieldset",{__source:{fileName:Io,lineNumber:247,columnNumber:13}},s.createElement("label",{htmlFor:"browserSel",className:"from",__source:{fileName:Io,lineNumber:248,columnNumber:15}},(0,ue.Z)("import","From")),s.createElement("select",{id:"browserSel",onChange:this.handleSelectionChange.bind(this),value:this.state.selectedIndex,autoFocus:!0,__source:{fileName:Io,lineNumber:252,columnNumber:15}},e)),this.state.selectedIndex<this.state.profiles.length&&s.createElement(Wa,{profile:this.state.profiles[this.state.selectedIndex],importState:this.state.importState,index:this.state.selectedIndex,setStartImport:this.setStartImport,setChooseFile:this.setChooseFile,__source:{fileName:Io,lineNumber:260,columnNumber:15}}),this.state.selectedIndex>=this.state.profiles.length&&s.createElement(Jr,{importState:this.state.importState,setStartImport:this.setStartImport,setChooseFile:this.setChooseFile,__source:{fileName:Io,lineNumber:269,columnNumber:15}})),this.renderImportFooter()),"status"===this.state.selectedPane&&s.createElement("div",{className:"import-data",__source:{fileName:Io,lineNumber:280,columnNumber:9}},s.createElement(Ja,{__source:{fileName:Io,lineNumber:281,columnNumber:11}}),this.renderStatusFooter()))}}const Lo=xo;var Ro=n(96122),Bo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\javascriptDialog.jsx";function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Uo extends s.Component{constructor(...e){super(...e),Fo(this,"_pendingAction",!0),Fo(this,"state",{promptValue:this.props.customData.defaultPromptText}),Fo(this,"handleLoadStart",(e=>{e.isTopLevel&&this.onCancel()})),Fo(this,"onOk",(e=>{this._pendingAction&&(e.preventDefault(),this._pendingAction=!1,this.props.customData.dialog.ok(this.state.promptValue)),this.props.onClose()})),Fo(this,"onCancel",(()=>{this._pendingAction&&(this._pendingAction=!1,this.props.customData.dialog.cancel()),this.props.onClose()})),Fo(this,"handlePrompt",(e=>{this.setState({promptValue:e.target.value})}))}componentDidMount(){this.props.customData.webview.addEventListener("loadstart",this.handleLoadStart),"prompt"!==this.props.customData.messageType?(0,Ro.Z)((()=>this.refs.okButton.focus()),80):(0,Ro.Z)((()=>this.refs.promptInput.select()),80)}componentWillUnmount(){this.props.customData.webview.removeEventListener("loadstart",this.handleLoadStart)}render(){const e=(0,Is.parse)(this.props.customData.url).hostname,t=this.props.customData.messageType,n=e?(0,ue.Z)("JavaScript from “$1”",[e]):(0,ue.Z)("JavaScript from localhost");return s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancel,ignoreClick:!0,viewMode:"dialog-javascript slide",__source:{fileName:Bo,lineNumber:82,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Bo,lineNumber:88,columnNumber:11}},s.createElement("h1",{className:"dialog-title",title:n,__source:{fileName:Bo,lineNumber:89,columnNumber:13}},n)),s.createElement("form",{onSubmit:this.onOk,__source:{fileName:Bo,lineNumber:91,columnNumber:11}},s.createElement("div",{className:"dialog-content",__source:{fileName:Bo,lineNumber:92,columnNumber:13}},s.createElement("p",{__source:{fileName:Bo,lineNumber:93,columnNumber:15}},this.props.customData.messageText),"prompt"===t&&s.createElement("input",{type:"text",ref:"promptInput",value:this.state.promptValue,onChange:this.handlePrompt,__source:{fileName:Bo,lineNumber:97,columnNumber:17}})),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Bo,lineNumber:104,columnNumber:13}},s.createElement("input",{ref:"okButton",type:"submit",value:(0,ue.Z)("OK"),__source:{fileName:Bo,lineNumber:105,columnNumber:15}}),"alert"!==t&&s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:Bo,lineNumber:111,columnNumber:17}}))))}}const Vo=Uo;var Ho="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\QRSharePopup.jsx";function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zo(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Go(e,t,"set"),n),n}function Go(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const Ko=287;function jo(e){const t=e.length;switch(!0){case t>180&&t<Ko:return 426;case t>122:return 354;case t>84:return 306;default:return 258}}var Yo=new WeakMap;class $o extends s.Component{constructor(e){super(e),Yo.set(this,{writable:!0,value:!1}),Wo(this,"onUrlInputChanged",(e=>{const t=e.currentTarget.value;this.setState({data:t}),t&&t.length>2&&b.Z.utilities.generateQRCode(t,(e=>{this.setState({qrImage:e,dataChanged:!0})}))})),Wo(this,"onGenerate",((e,t)=>{if(this.props.data){const n=(0,ue.Z)("QR Code Generated");b.Z.utilities.generateQRCode(this.props.data,e,(t=>{var s;"dataurl"===e?function(e,t){return t.get?t.get.call(e):t.value}(s=this,Go(s,Yo,"get"))&&this.setState({qrImage:t,data:this.props.data}):"clipboard"===e&&(0,Zt.c)({title:n,body:(0,ue.Z)("Image stored in the clipboard.")})})),t&&this.props.hidePopup()}})),Wo(this,"onCancel",(()=>{this.props.hidePopup()})),Wo(this,"renderDialogHeader",(()=>s.createElement("div",{className:"dialog-header",__source:{fileName:Ho,lineNumber:102,columnNumber:12}},s.createElement("h3",{__source:{fileName:Ho,lineNumber:102,columnNumber:43}},(0,ue.Z)("Scan QR Code"))))),Wo(this,"renderQRImage",(()=>s.createElement("div",{className:"dialog-content",__source:{fileName:Ho,lineNumber:106,columnNumber:12}},this.state.data.length>Ko?s.createElement("p",{__source:{fileName:Ho,lineNumber:108,columnNumber:11}},(0,ue.Z)("Address is too long, QR code source cannot exceed $1 characters.",[Ko])):s.createElement("img",{src:this.state.qrImage,className:"qr-image",__source:{fileName:Ho,lineNumber:112,columnNumber:11}}),s.createElement("input",{type:"text",value:this.state.data,spellCheck:"false",maxLength:Ko,onChange:this.onUrlInputChanged,onFocus:e=>e.target.select(),autoFocus:!0,__source:{fileName:Ho,lineNumber:114,columnNumber:7}})))),Wo(this,"renderSaveCancel",(()=>s.createElement("footer",{className:"dialog-footer",__source:{fileName:Ho,lineNumber:125,columnNumber:12}},s.createElement("input",{type:"button",onClick:this.onGenerate.bind(this,"clipboard",!0),disabled:this.state.data.length>Ko,value:(0,ue.Z)("verb","Copy"),__source:{fileName:Ho,lineNumber:126,columnNumber:7}}),s.createElement("input",{type:"button",onClick:this.onGenerate.bind(this,"file",!0),disabled:this.state.data.length>Ko,value:(0,ue.Z)("Save to Download"),__source:{fileName:Ho,lineNumber:130,columnNumber:7}})))),Wo(this,"renderPopupContents",(()=>s.createElement("div",{className:"qr-share-dialog",__source:{fileName:Ho,lineNumber:138,columnNumber:12}},this.renderDialogHeader(),this.renderQRImage(),this.renderSaveCancel()))),this.state={qrImage:"",data:this.props.data,dataChanged:!1}}componentDidMount(){zo(this,Yo,!0),this.onGenerate("dataurl")}componentWillUnmount(){zo(this,Yo,!1)}componentDidUpdate(e){this.state.dataChanged||this.props.data===e.data||this.setState({data:this.props.data},this.onGenerate.bind(this,"dataurl"))}render(){return this.props.useModal?s.createElement(ln.Z,{dialogWidth:jo(this.state.data),onRequestClose:this.onCancel,__source:{fileName:Ho,lineNumber:147,columnNumber:14}},this.renderPopupContents()):this.renderPopupContents()}}const Xo=$o;var Qo=n(25342),qo=n(89555),Jo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ThemePreviewDialog.jsx";function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tl extends s.Component{constructor(...e){super(...e),el(this,"state",{awaiting:60}),el(this,"expirePreview",(()=>{this.setState((e=>{const t=e.awaiting-1;return t<=0&&(clearInterval(this.expireInterval),Qo.Z.clearThemePreview()),{awaiting:t}}))})),el(this,"acceptPreview",(()=>{this.props.isUpdate?Qo.Z.updateTheme():Qo.Z.installTheme(),this.props.onClose()})),el(this,"discardPreview",(()=>{Qo.Z.clearThemePreview(),this.props.onClose()}))}componentDidMount(){this.expireInterval=setInterval((()=>this.expirePreview()),1e3)}componentWillUnmount(){clearInterval(this.expireInterval)}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,dialogWidth:400,viewMode:"slide",ignoreClick:!0,__source:{fileName:Jo,lineNumber:59,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Jo,lineNumber:60,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Jo,lineNumber:61,columnNumber:11}},(0,ue.Z)("Theme Preview"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Jo,lineNumber:63,columnNumber:9}},this.state.awaiting>0&&s.createElement(s.Fragment,null,s.createElement("p",{__source:{fileName:Jo,lineNumber:65,columnNumber:13}},this.props.isUpdate?(0,ue.Z)("This is a preview of the updated “$1” theme. Would you like to install this update and apply it?",[this.props.themeName]):(0,ue.Z)("This is a preview of the “$1” theme. Would you like to install and apply it?",[this.props.themeName])),s.createElement("p",{className:"info",__source:{fileName:Jo,lineNumber:73,columnNumber:13}},(0,ue.Z)("Theme preview expires in $1 second.","Theme preview expires in $1 seconds.",[this.state.awaiting]))),this.state.awaiting<1&&s.createElement("p",{__source:{fileName:Jo,lineNumber:82,columnNumber:13}},(0,ue.Z)("Preview of the “$1” theme has expired, please reload the theme again if you wish to install it.",[this.props.themeName]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Jo,lineNumber:89,columnNumber:9}},s.createElement("input",{type:"submit",value:this.props.isUpdate?(0,ue.Z)("Update"):(0,ue.Z)("Install"),onClick:this.acceptPreview,disabled:this.state.awaiting<1,autoFocus:!0,__source:{fileName:Jo,lineNumber:90,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this.discardPreview,__source:{fileName:Jo,lineNumber:97,columnNumber:11}})))}}const nl=tl;var sl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\dialogRenderWrapper.jsx";const il=function({customData:e,closeDialog:t}){switch(e.dialogtype){case"download":return s.createElement(Zr,{customData:e,onClose:t,__source:{fileName:sl,lineNumber:43,columnNumber:9}});case"import":return s.createElement(Lo,{onClose:t,__source:{fileName:sl,lineNumber:50,columnNumber:9}});case"createSearch":return s.createElement(_r,{onClose:t,name:e.Name,url:e.Url,__source:{fileName:sl,lineNumber:56,columnNumber:9}});case"javascript":return s.createElement("div",{className:"modal-overlay",__source:{fileName:sl,lineNumber:65,columnNumber:9}},s.createElement(Vo,{customData:e,onClose:t,__source:{fileName:sl,lineNumber:66,columnNumber:11}}));case"fullscreen":return s.createElement(Rr,{customData:e,closeDialog:t,__source:{fileName:sl,lineNumber:74,columnNumber:9}});case"pointerLock":{const n=(0,ue.Z)("Press Escape key to exit the pointer lock.");return s.createElement(Or,{customData:e,onClose:t,overlayText:n,__source:{fileName:sl,lineNumber:82,columnNumber:9}})}case"qrcode":return s.createElement("div",{className:"modal-overlay",__source:{fileName:sl,lineNumber:90,columnNumber:9}},s.createElement(Xo,{useModal:!0,data:e.url,hidePopup:t,__source:{fileName:sl,lineNumber:91,columnNumber:11}}));case"themePreview":return s.createElement("div",{className:"modal-overlay",__source:{fileName:sl,lineNumber:100,columnNumber:9}},s.createElement(nl,{themeName:e.themeName,isUpdate:e.isUpdate,onClose:t,__source:{fileName:sl,lineNumber:101,columnNumber:11}}));default:return console.error("DialogRenderWrapper.render: unknown dialogtype:"+e.dialogtype),null}};var rl=n(50590),al=n(88059),ol=n(72450),ll=n(40778),cl=n(95798),ul=n(47877),ml=n(88047),dl=n(78174),hl=n(8241);const pl=e=>{let t=e;return t&&(t=t.replace(/^data\:([^\;]+)\;base64,/gim,"")),t},gl=(e,t,n=9,s)=>{const i=pl(t.faviconUrl);return{handler:()=>{Ln.setSearchEngine(t),ul.Z.withTextAndEngine(e,t.id)},emphasized:t.id===s?.id,iconPNG:i,iconPNGWhite:i,...z.Z.makeNumberMnemonic(t.name,n)}},bl=(e,t)=>{if(0===e.length)return[];const n=Ln.getSearchEngine(t,!0);return Dn.Z.getList().map(((t,s)=>gl(e,t,s,n)))},Nl=e=>[{commandName:"DOCUMENT_DIRECTION_DEFAULT",type:"checkbox",...(0,Mn.Z)("command","Default")},{commandName:"DOCUMENT_DIRECTION_LTR",type:"checkbox",...(0,Mn.Z)("Left to Right")},{commandName:"DOCUMENT_DIRECTION_RTL",type:"checkbox",...(0,Mn.Z)("Right to Left")}],fl=e=>[{commandName:"DOCUMENT_LOOP",type:"checkbox",...(0,Mn.Z)("context","Loop")},{commandName:"DOCUMENT_SHOW_CONTROLS",type:"checkbox",...(0,Mn.Z)("Show Controls")},z.Z.separatorItem,{commandName:"DOCUMENT_OPEN_AV_NEW_TAB",...e.support.audio?(0,Mn.Z)("Open Audio in New Tab"):(0,Mn.Z)("Open Video in New Tab")},{commandName:"DOCUMENT_SAVE_AV",ellipsis:!0,...e.support.audio?(0,Mn.Z)("Save Audio As"):(0,Mn.Z)("Save Video As")},{commandName:"DOCUMENT_COPY_AV_ADDRESS",ellipsis:!0,...e.support.audio?(0,Mn.Z)("Copy Audio Address"):(0,Mn.Z)("Copy Video Address")},{commandName:"DOCUMENT_CAST",ellipsis:!0,...(0,Mn.Z)("Cast")},z.Z.separatorItem,{commandName:"DOCUMENT_PICTURE_IN_PICTURE",visible:e.support.video&&e.support.pictureinpicture,...(0,Mn.Z)("Picture in Picture")}],_l=async(e,t,n,s,i)=>{switch(s.action){case"DOCUMENT_CONTAINER_DEVELOPER_TOOLS":return{visible:!n&&!t.isdevtools,items:await vl(e,t,n,i),...i(s,t)};case"DOCUMENT_VALIDATE_URL":return{visible:!(t.iswebpanel||t.isimage||t.isdevtools||t.ismailcontent),handler:()=>{const e=d.Z.getSync("VALIDATION_URL");$.Z.openURL(e.replace("%s",t.pageurl),{inCurrent:!1})},...i(s,t)};case"DOCUMENT_VIEW_SOURCE":return{visible:!(t.isimage&&t.pageurl===t.srcurl)&&!t.isdevtools&&!t.ismailcontent,commandName:"DOCUMENT_VIEW_SOURCE",...i(s,t)};case"DOCUMENT_VIEW_FRAME_SOURCE":return{visible:t.isframe&&!t.isdevtools&&!t.ismailcontent,commandName:"DOCUMENT_VIEW_FRAME_SOURCE",...i(s,t)};case"DOCUMENT_RELOAD_FRAME":return{visible:t.isframe&&!t.isdevtools&&!t.ismailcontent,commandName:"DOCUMENT_RELOAD_FRAME",...i(s,t)};case"DOCUMENT_INSPECT":return{commandName:"DOCUMENT_INSPECT",visible:!t.isdevtools,...i(s,t)};default:return Promise.resolve({...i(s,t)})}},vl=async(e,t,n,s)=>Promise.all(["DOCUMENT_VALIDATE_URL","DOCUMENT_VIEW_SOURCE","DOCUMENT_VIEW_FRAME_SOURCE","DOCUMENT_RELOAD_FRAME","DOCUMENT_INSPECT"].map((i=>_l(e,t,n,{id:"",type:"command",action:i},s)))),El=e=>[{commandName:"DOCUMENT_LANGUAGE_SETTINGS",...(0,Mn.Z)("Language Settings")}],Cl=async(e,t,n,s,i)=>{switch(s.action){case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0&&!n,...i(s,t)};case"DOCUMENT_COPY":case"DOCUMENT_PRINT":return{...i(s,t)};case"DOCUMENT_GOTO_URL":return{handler:()=>{$.Z.openURL(t.selectionurl,{inCurrent:!1,inBackground:A.ZP.get(P.kTabsOpenNewInBackground)})},visible:t.selectionurl.length>0,...i(s,t)};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const n=Ln.getSearchEngine(e.isIncognito,"DOCUMENT_SEARCH_LAST_USED"===s.action);return{...gl(t.selection,n),mnemonic:!0,...i(s,t)}}case"DOCUMENT_CONTAINER_SEARCH_WITH":return{items:bl(t.selection,e.isIncognito),...i(s,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!n,container:{content:"extensions"},...i(s,t)};case"DOCUMENT_SEND_BY_MAIL":return{handler:()=>{ne.Z.createDraft({subject:t.pageurl,body:t.selection})},visible:!A.ZP.get(P.kMailIsTurnedOff),...i(s,t)};case"DOCUMENT_ADD_TO_CALENDAR":return{handler:()=>{se.Z.showAddEvent(t.selection,t.pageurl)},visible:!e.isGuest&&!A.ZP.get(P.kMailIsTurnedOff),...i(s,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...i(s,t)};case"COMMAND_FULLSCREEN":return{visible:!n,...i(s,t)};case"COMMAND_TRANSLATE_SELECTION":{const{id:e,url:n}=V.ZP.unsafeGetActivePage();return{visible:ol.Z.canTranslateSelection(n,t.selection),...i(s,t),handler:()=>{dl.Z.translateSelection(e,t.selection)}}}default:return Rn.actions().includes(s.action)?_l(e,t,n,s,i):Promise.resolve({...i(s,t)})}},wl=async(e,t,n,s,i)=>{switch(s.action){case"DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB":return{visible:!A.ZP.get(P.kTabsOpenNewInBackground),...i(s,t)};case"DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW":return{visible:!e.isIncognito||e.isGuest,...i(s,t)};case"DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW":return{visible:!e.isGuest,...i(s,t)};case"DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE":return{container:{content:"imageinprofile"},...i(s,t)};case"DOCUMENT_SEARCH_FOR IMAGE":{const e=pl(hl.K$);return{iconPNG:e,iconPNGWhite:e,...i(s,t)}}case"DOCUMENT_SHOW_IMAGE_PROPERTIES":return{handler:async()=>{const e=V.ZP.getActivePage();if(e){const n=e.windowId;if(V.ZP.isDisplayingImage(e.id))$.Z.setImageInspector(e.id,n,!0);else{await $.Z.openURL(t.srcurl,{inCurrent:!1,transition:ml.Z.AUTO_TOPLEVEL}),await new Promise((e=>V.ZP.once(V.O7,e)));const e=V.ZP.getPages(n).last();$.Z.setImageInspector(e.id,n,!0)}}},enabled:t.isimage,...i(s,t)};case"DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND":return{handler:()=>{Qo.Z.setThemeBackgroundImageFromUrl(e.id,t.srcurl)},...i(s,t)};case"DOCUMENT_QR_CODE":return{visible:t.support.qrcode,...i(s,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!n,container:{content:"extensions"},...i(s,t)};case"COMMAND_FULLSCREEN":return{visible:!n,...i(s,t)};default:return Rn.actions().includes(s.action)?_l(e,t,n,s,i):Promise.resolve({...i(s,t)})}},yl=async(e,t,n,s,i)=>{switch(s.action){case"DOCUMENT_CONTAINER_AV":return{items:fl(t),...i(s,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!n,container:{content:"extensions"},...i(s,t)};default:return Rn.actions().includes(s.action)?_l(e,t,!1,s,i):Promise.resolve({...i(s,t)})}},Sl=(e,t,n)=>{const s="image",i=Ss.getOptionFunction(s);return Ss.getNamedMenu(s,(async s=>wl(e,t,n,s,i)))},Tl=(e,t,n)=>{const s="selection",i=Ss.getOptionFunction(s);return Ss.getNamedMenu(s,(async s=>Cl(e,t,n,s,i)))},kl={show:(e,t,n)=>{const s=(e,t,n)=>{(0,Hs.Z)(e,n,void 0,"pointer",void 0,t)()},i={id:e,isGuest:W.ZP.isGuestSession(e),isIncognito:W.ZP.isIncognito(e),isMac:!1};n.iseditable?"regular"===n.textfield?((e,t)=>{const n="uiedit",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...s(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...s(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...s(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},visible:!e.isGuest,...s(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:El(),...s(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...s(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Nl(),...s(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...s(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":return{visible:!e.isGuest&&t.selection.length>0,...s(n,t),handler:()=>{Li.Z.createNote({content:t.selection,url:""})}};case"COMMAND_TRANSLATE_SELECTION":{const{id:e,url:i}=V.ZP.unsafeGetActivePage();return{visible:ol.Z.canTranslateSelection(i,t.selection),...s(n,t),handler:()=>{dl.Z.translateSelection(e,t.selection)}}}default:return Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)})):["addressfield","searchfield"].includes(n.textfield)?((e,t)=>{const n="urledit",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...s(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...s(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...s(n,t)};case"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO":return{enabled:t.support.paste,...s(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},visible:!e.isGuest,...s(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:El(),...s(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...s(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Nl(),...s(n,t)};case"DOCUMENT_CUSTOMIZE":return{visible:!e.isGuest,handler:()=>{se.Z.showSettings("search")},...s(n,t)};case"DOCUMENT_SHOW_FULL_ADDRESS":const i=A.ZP.get(P.kAddressBarShowFullUrl);return{enabled:!e.isGuest,checked:i,visible:"addressfield"===t.textfield,handler:()=>{st.Z.set(P.kAddressBarShowFullUrl,!i)},...s(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...s(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":return{visible:!e.isGuest&&t.selection.length>0,...s(n,t),handler:()=>{Li.Z.createNote({content:t.selection,url:""})}};case"COMMAND_TRANSLATE_SELECTION":{const{id:e,url:i}=V.ZP.unsafeGetActivePage();return{visible:ol.Z.canTranslateSelection(i,t.selection),...s(n,t),handler:()=>{dl.Z.translateSelection(e,t.selection)}}}default:return Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)})):((e,t)=>{const n="docedit",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"DOCUMENT_SUGGEST_PASSWORD":return{visible:t.support.passwordgeneration,...s(n,t)};case"DOCUMENT_SHOW_PASSWORDS":return{visible:t.support.passwordshowall,handler:()=>se.Z.showSettings("privacy"),...s(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...s(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...s(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...s(n,t)};case"DOCUMENT_PASTE_AS_PLAIN_TEXT":return{visible:t.support.editoptions,...s(n,t)};case"DOCUMENT_ADD_AS_SEARCH_ENGINE":return{visible:!e.isGuest&&t.keywordurl.length>0,...s(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},visible:!e.isGuest,...s(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:El(),...s(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...s(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Nl(),...s(n,t)};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const i=Ln.getSearchEngine(e.isIncognito,"DOCUMENT_SEARCH_LAST_USED"===n.action);return{...gl(t.selection,i),mnemonic:!0,visible:t.selection.length>0,...s(n,t)}}case"DOCUMENT_CONTAINER_SEARCH_WITH":return{items:bl(t.selection,e.isIncognito),visible:t.selection.length>0,...s(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...s(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...s(n,t)};case"DOCUMENT_GOTO_URL":return{handler:()=>{$.Z.openURL(t.selectionurl,{inCurrent:!1,inBackground:A.ZP.get(P.kTabsOpenNewInBackground)})},visible:t.selectionurl.length>0,...s(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":{const{url:i}=V.ZP.unsafeGetActivePage();return{visible:!e.isGuest&&t.selection.length>0,...s(n,t),handler:()=>{Li.Z.createNote({content:t.selection,url:i})}}}case"COMMAND_TRANSLATE_SELECTION":{const{id:e,url:i}=V.ZP.unsafeGetActivePage();return{visible:ol.Z.canTranslateSelection(i,t.selection),...s(n,t),handler:()=>{dl.Z.translateSelection(e,t.selection)}}}default:return Rn.actions().includes(n.action)?_l(e,t,!1,n,s):Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)})):n.linkurl.length>0?((e,t)=>{const n="link",s=Ss.getOptionFunction(n),i=Ss.getActionList("image")(),r=Ss.getActionList("selection")(),a=Ss.getActionList("audiovideo")();return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"DOCUMENT_OPEN_IN_NEW_TAB":case"DOCUMENT_OPEN_IN_TAB":case"DOCUMENT_SAVE_LINK":return{visible:!t.ismailto,...s(n,t)};case"DOCUMENT_OPEN_IN_NEW_WINDOW":return{visible:!t.ismailto&&(!e.isIncognito||e.isGuest),...s(n,t)};case"DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB":return{visible:!t.ismailto&&!A.ZP.get(P.kTabsOpenNewInBackground),...s(n,t)};case"DOCUMENT_OPEN_IN_PRIVATE_WINDOW":return{visible:!t.ismailto&&!e.isGuest,...s(n,t)};case"DOCUMENT_CONTAINER_OPEN_IN_PWA":return{visible:!t.ismailto,container:{content:"linkinpwa"},...s(n,t)};case"DOCUMENT_CONTAINER_OPEN_IN_PROFILE":return{visible:!t.ismailto,container:{content:"linkinprofile"},...s(n,t)};case"DOCUMENT_CONTAINER_OPEN_IN_WINDOW":{const e=await Us.getMenu(!1,[t.linkurl]);return{visible:e.length>0,items:e,...s(n,t)}}case"DOCUMENT_ADD_LINK_TO_BOOKMARKS":return{handler:()=>{h.Z.bookmarks.create({parentId:tn.ZP.getRootNode().id,title:t.linktitle,url:t.linkurl})},visible:!t.ismailto&&!t.iswebpanel&&!e.isGuest,...s(n,t)};case"DOCUMENT_ADD_LINK_TO_WEBPANEL":return{handler:()=>{Wi.Z.addByUrl(t.linkurl)},visible:!t.ismailto&&!t.iswebpanel&&!e.isGuest,...s(n,t)};case"DOCUMENT_SEND_LINK_BY_MAIL":return{handler:()=>{ne.Z.createDraft({subject:t.linktitle||t.linkurl,body:t.linkurl})},visible:!A.ZP.get(P.kMailIsTurnedOff),...s(n,t)};case"DOCUMENT_COPY_LINK_TEXT":return{visible:!t.isimage&&t.linktitle.length>0,...s(n,t)};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return{visible:!t.iswebpanel&&t.support.sendlinktodevices,container:{content:"sendlinktodevices"},...s(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...s(n,t)};case"DOCUMENT_CONTAINER_LINK_SELECTION":return t.selection.length>0&&!t.isimage&&!t.support.canvas?{items:await Tl(e,t,!0),...s(n,t)}:{items:[],visible:!1,...s(n,t)};case"DOCUMENT_CONTAINER_LINKED_IMAGE":return t.isimage||t.support.canvas?{items:await Sl(e,t,!0),...s(n,t)}:{items:[],visible:!1,...s(n,t)};default:return Rn.actions().includes(n.action)?_l(e,t,!1,n,s):r.includes(n.action)?t.selection.length>0&&!t.isimage&&!t.support.canvas?Cl(e,t,!1,n,s):{visible:!1,...s(n,t)}:i.includes(n.action)?t.isimage||t.support.canvas?wl(e,t,!1,n,s):{visible:!1,...s(n,t)}:a.includes(n.action)?t.support.audio||t.support.video?yl(e,t,!1,n,s):{visible:!1,...s(n,t)}:Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)})):n.isimage||n.support.canvas?Sl(i,n,!1).then((n=>{s(e,t,n)})):n.support.audio||n.support.video?((e,t)=>{const n="audiovideo",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>yl(e,t,!1,n,s)))})(i,n).then((n=>{s(e,t,n)})):n.selection.length>0?Tl(i,n,!1).then((n=>{s(e,t,n)})):n.ismailcontent?((e,t)=>{const n="mailcontent",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"COMMAND_PAGE_BACK":return{visible:ll.Z.canGoBack(),...s(n,t)};case"COMMAND_PAGE_FORWARD":return{visible:ll.Z.canGoForward(),...s(n,t)};case"COMMAND_TAB_VIEW_PAGE_SOURCE":return{checked:Boolean(rl.Z.getIsRawMode()),...s(n,t)};default:return Rn.actions().includes(n.action)?_l(e,t,!1,n,s):Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)})):((e,t)=>{const n="page",s=Ss.getOptionFunction(n);return Ss.getNamedMenu(n,(async n=>{switch(n.action){case"COMMAND_ADD_BOOKMARK":return{visible:!t.iswebpanel&&!e.isGuest,...s(n,t)};case"DOCUMENT_ADD_TO_WEBPANEL":return{handler:()=>{Wi.Z.addByUrl(t.pageurl)},visible:!t.iswebpanel&&!e.isGuest,...s(n,t)};case"DOCUMENT_SEND_BY_MAIL":return{handler:()=>{ne.Z.createDraft({subject:t.pagetitle||t.pageurl,body:t.pageurl})},visible:!A.ZP.get(P.kMailIsTurnedOff),...s(n,t)};case"DOCUMENT_COPY_ADDRESS":return{handler:()=>{al.Z.copyUrlToClipboard(t.pageurl)},...s(n,t)};case"DOCUMENT_SAVE":case"DOCUMENT_CAST":return{visible:!t.iswebpanel,...s(n,t)};case"DOCUMENT_QR_CODE":return{visible:t.support.qrcode,...s(n,t)};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return{visible:!t.iswebpanel&&t.support.sendpagetodevices,container:{content:"sendpagetodevices"},...s(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...s(n,t)};case"DOCUMENT_CONTAINER_PLUGIN_ROTATION":{const e=!t.iswebpanel&&t.support.plugin;return{visible:e,items:e?[{commandName:"DOCUMENT_ROTATE_CLOCKWISE",...(0,Mn.Z)("Rotate Clockwise")},{commandName:"DOCUMENT_ROTATE_COUNTERCLOCKWISE",...(0,Mn.Z)("Rotate Counterclockwise")}]:[],...s(n,t)}}case"CONTAINER_PERIODIC_RELOAD":if(t.iswebpanel){const e=re.ZP.getSelectedWebPanelIndex();if(-1===e)return{visible:!1,...s(n,t)};{const i=re.ZP.getWebPanels()[e];return{...s(n,t),items:cl.Z.getMenu(i.id,"panel")}}}return{...s(n,t)};default:return Rn.actions().includes(n.action)?_l(e,t,!1,n,s):Promise.resolve({...s(n,t)})}}))})(i,n).then((n=>{s(e,t,n)}))}},Il=kl;var Al="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformFFMPEGDialog.jsx";function Zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pl=[P.kStartupShowFfmpegInformation];class Dl extends s.Component{constructor(e){super(e),Zl(this,"_onClose",(()=>{st.Z.set(P.kStartupShowFfmpegInformation,!this.state.doNotShowAgain),this.props.onClose()})),Zl(this,"_onInformation",(()=>{$.Z.openURL("https://help.vivaldi.com/article/html5-proprietary-media-on-linux/"),this._onClose()})),Zl(this,"_onCheckChanged",(()=>{this.setState((e=>({doNotShowAgain:!e.doNotShowAgain})))})),this.state={doNotShowAgain:!1}}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,dialogWidth:400,viewMode:"slide",__source:{fileName:Al,lineNumber:54,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Al,lineNumber:59,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Al,lineNumber:60,columnNumber:11}},(0,ue.Z)("Media support"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Al,lineNumber:63,columnNumber:9}},s.createElement("p",{__source:{fileName:Al,lineNumber:64,columnNumber:11}},(0,ue.Z)("Vivaldi lacks a suitable component to play HTML5 ‘proprietary’ media (H.264/AAC)")),s.createElement("label",{className:"dialog-checkbox",__source:{fileName:Al,lineNumber:68,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:Al,lineNumber:69,columnNumber:13}}),s.createElement("span",{__source:{fileName:Al,lineNumber:72,columnNumber:13}},(0,ue.Z)("Do not show again")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Al,lineNumber:76,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:Al,lineNumber:77,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this._onClose,__source:{fileName:Al,lineNumber:82,columnNumber:11}})))}}const Ml=(0,bi.Z)(Dl,Pl);var Ol="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformGitDirectoryFoundDialog.jsx";const xl=[P.kStartupShowGitDirectoryWarning];class Ll extends s.Component{constructor(e){var t,n,s;super(e),s=()=>{st.Z.set(P.kStartupShowGitDirectoryWarning,!1),this.props.onClose()},(n="_onClose")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,dialogWidth:500,viewMode:"slide",__source:{fileName:Ol,lineNumber:36,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Ol,lineNumber:41,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Ol,lineNumber:42,columnNumber:11}},(0,ue.Z)("Warning: Your profile folder might be in a Git repository"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Ol,lineNumber:45,columnNumber:9}},s.createElement("p",{__source:{fileName:Ol,lineNumber:46,columnNumber:11}},(0,ue.Z)("A .git directory was detected in your Vivaldi profile folder, or a parent of that folder.")),s.createElement("p",{__source:{fileName:Ol,lineNumber:49,columnNumber:11}},(0,ue.Z)("A file, .gitignore, has been added to the profile folder to prevent accidental sharing to public git services (eg. GitHub). If adding the profile to the Git repository was intentional, edit the .gitignore file to select what really should be ignored.")),s.createElement("p",{__source:{fileName:Ol,lineNumber:52,columnNumber:11}},(0,ue.Z)("Sharing your profile with a public Git repository will allow others to see your private data, such as website logins, cookies and cache files."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Ol,lineNumber:57,columnNumber:9}},s.createElement("input",{type:"button",value:(0,ue.Z)("Close"),onClick:this._onClose,__source:{fileName:Ol,lineNumber:58,columnNumber:11}})))}}const Rl=(0,bi.Z)(Ll,xl);var Bl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformMediaAvailableDialog.jsx";function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ul=[P.kStartupShowMediaAvailableInformation];class Vl extends s.Component{constructor(e){super(e),Fl(this,"_onClose",(()=>{st.Z.set(P.kStartupShowMediaAvailableInformation,!this.state.doNotShowAgain),this.props.onClose()})),Fl(this,"_onInformation",(()=>{$.Z.openURL("https://www.microsoft.com/en-us/software-download/mediafeaturepack"),this._onClose()})),Fl(this,"_onCheckChanged",(()=>{this.setState((e=>({doNotShowAgain:!e.doNotShowAgain})))})),this.state={doNotShowAgain:!1}}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,dialogWidth:400,viewMode:"slide",__source:{fileName:Bl,lineNumber:55,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Bl,lineNumber:60,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Bl,lineNumber:61,columnNumber:11}},(0,ue.Z)("Media support"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Bl,lineNumber:64,columnNumber:9}},s.createElement("p",{__source:{fileName:Bl,lineNumber:65,columnNumber:11}},(0,ue.Z)("This Windows N edition lacks the media package to play HTML5 ‘proprietary’ media (H.264/AAC).")),s.createElement("label",{className:"dialog-checkbox",__source:{fileName:Bl,lineNumber:69,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:Bl,lineNumber:70,columnNumber:13}}),s.createElement("span",{__source:{fileName:Bl,lineNumber:73,columnNumber:13}},(0,ue.Z)("Do not show again")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Bl,lineNumber:77,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:Bl,lineNumber:78,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this._onClose,__source:{fileName:Bl,lineNumber:83,columnNumber:11}})))}}const Hl=(0,bi.Z)(Vl,Ul);var Wl=n(51508),zl=n(43889),Gl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\AccessKeys.jsx";const Kl=[P.kWebpagesAccessKeys],jl=st.Z.getEventHandler;class Yl extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:Gl,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:Gl,lineNumber:26,columnNumber:9}},s.createElement("h3",{__source:{fileName:Gl,lineNumber:27,columnNumber:11}},(0,ue.Z)("Access Keys")),s.createElement("div",{className:"setting-single",__source:{fileName:Gl,lineNumber:28,columnNumber:11}},s.createElement("label",{__source:{fileName:Gl,lineNumber:29,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesAccessKeys],onChange:jl(P.kWebpagesAccessKeys),__source:{fileName:Gl,lineNumber:30,columnNumber:15}}),s.createElement("span",{__source:{fileName:Gl,lineNumber:33,columnNumber:15}},(0,ue.Z)("Allow Access Keys"))),s.createElement("p",{className:"info",__source:{fileName:Gl,lineNumber:35,columnNumber:13}},(0,ue.Z)("Some websites may use this accessibility feature to register shortcuts for certain elements, using $1 modifier.",["Shift+Alt"])))))}}const $l=(0,bi.Z)(Yl,Kl),Xl=function(e){switch(e){case"CATEGORY_COMMAND_APPLICATION":return(0,ue.Z)("win_linux","Window");case"CATEGORY_COMMAND_APPEARANCE":return(0,ue.Z)("win_linux","View");case"CATEGORY_COMMAND_TAB_ACTION":return(0,ue.Z)("command","Tab");case"CATEGORY_COMMAND_WEBPAGE_NAVIGATION":return(0,ue.Z)("Page");case"CATEGORY_COMMAND_MAIL":return(0,ue.Z)("Mail");case"CATEGORY_COMMAND_CALENDAR":return(0,ue.Z)("Calendar");case"CATEGORY_COMMAND_CHAIN":return(0,ue.Z)("Chains");default:return"Unknown"}};var Ql="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\ConfigureSingleKeyShortcuts.jsx";const ql=st.Z.getEventHandler;class Jl extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:Ql,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:Ql,lineNumber:27,columnNumber:9}},s.createElement("h3",{__source:{fileName:Ql,lineNumber:28,columnNumber:11}},(0,ue.Z)("Keyboard Shortcuts")),s.createElement("div",{className:"setting-single",__source:{fileName:Ql,lineNumber:30,columnNumber:11}},s.createElement("label",{__source:{fileName:Ql,lineNumber:31,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kKeyboardShortcutsEnable],onChange:ql(P.kKeyboardShortcutsEnable),__source:{fileName:Ql,lineNumber:32,columnNumber:15}}),s.createElement("span",{__source:{fileName:Ql,lineNumber:35,columnNumber:15}},(0,ue.Z)("Enable Keyboard Shortcuts")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:Ql,lineNumber:38,columnNumber:11}},s.createElement("label",{__source:{fileName:Ql,lineNumber:39,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kKeyboardShortcutsEnableSingleKey],onChange:ql(P.kKeyboardShortcutsEnableSingleKey),disabled:!this.props.prefValues[P.kKeyboardShortcutsEnable],__source:{fileName:Ql,lineNumber:40,columnNumber:15}}),s.createElement("span",{__source:{fileName:Ql,lineNumber:46,columnNumber:15}},(0,ue.Z)("Single Key Shortcuts")))),!this.props.prefValues[P.kMailIsTurnedOff]&&s.createElement("div",{className:"setting-single pad-left",__source:{fileName:Ql,lineNumber:50,columnNumber:13}},s.createElement("label",{__source:{fileName:Ql,lineNumber:51,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kKeyboardShortcutsEnableSingleKeyForMail],onChange:ql(P.kKeyboardShortcutsEnableSingleKeyForMail),disabled:!this.props.prefValues[P.kKeyboardShortcutsEnable],__source:{fileName:Ql,lineNumber:52,columnNumber:17}}),s.createElement("span",{__source:{fileName:Ql,lineNumber:59,columnNumber:17}},(0,ue.Z)("Mail and Calendar Single Key Shortcuts")))),s.createElement("div",{className:"setting-single",__source:{fileName:Ql,lineNumber:63,columnNumber:11}},s.createElement("label",{__source:{fileName:Ql,lineNumber:64,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kKeyboardShortcutsSpaceFastForwards],onChange:ql(P.kKeyboardShortcutsSpaceFastForwards),__source:{fileName:Ql,lineNumber:65,columnNumber:15}}),s.createElement("span",{__source:{fileName:Ql,lineNumber:69,columnNumber:15}},(0,ue.Z)("Space Key to Fast Forward")))),s.createElement("div",{className:"setting-single",__source:{fileName:Ql,lineNumber:73,columnNumber:13}},s.createElement("label",{__source:{fileName:Ql,lineNumber:74,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kKeyboardShortcutsAltOpensMenu],onChange:ql(P.kKeyboardShortcutsAltOpensMenu),__source:{fileName:Ql,lineNumber:75,columnNumber:17}}),s.createElement("span",{__source:{fileName:Ql,lineNumber:79,columnNumber:17}},(0,ue.Z)("Alt Key for Main Menu"))))))}}const ec=Jl;var tc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\FullKeyAccess.jsx";function nc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sc=[P.kKeyboardTabToAll,P.kKeyboardTabToAllUsesSystemDefault,P.kWebpagesFocusTrap],ic=st.Z.getEventHandler;class rc extends s.Component{constructor(...e){super(...e),nc(this,"handleDarwinKeyAccess",(e=>{const t=A.ZP.get(P.kSystemMacKeyboardUiMode),n=e.target&&e.target.checked;n||-1===this.props.prefValues[P.kKeyboardTabToAll]?n&&2===t&&0!==this.props.prefValues[P.kKeyboardTabToAll]?st.Z.set(P.kKeyboardTabToAll,0):n&&0===t&&-1!==this.props.prefValues[P.kKeyboardTabToAll]&&st.Z.set(P.kKeyboardTabToAll,-1):st.Z.set(P.kKeyboardTabToAll,-1),st.Z.set(P.kKeyboardTabToAllUsesSystemDefault,n)})),nc(this,"renderFullKeyboardAccess",(()=>s.createElement("div",{className:"setting-group",__source:{fileName:tc,lineNumber:51,columnNumber:7}},s.createElement("h3",{__source:{fileName:tc,lineNumber:52,columnNumber:9}},(0,ue.Z)("Full Keyboard Access")),!1,s.createElement(_i,{name:"keyAccessSetting",className:"setting-single",value:this.props.prefValues[P.kKeyboardTabToAll],onChange:ic(P.kKeyboardTabToAll),__source:{fileName:tc,lineNumber:66,columnNumber:9}},s.createElement("label",{__source:{fileName:tc,lineNumber:70,columnNumber:11}},s.createElement("input",{type:"radio",value:"0",disabled:this.props.prefValues[P.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:tc,lineNumber:71,columnNumber:13}}),s.createElement("span",{__source:{fileName:tc,lineNumber:74,columnNumber:13}},(0,ue.Z)("Focus All Controls"))),s.createElement("p",{className:"info",__source:{fileName:tc,lineNumber:76,columnNumber:11}},(0,ue.Z)("Press TAB key to focus all controls")),s.createElement("label",{__source:{fileName:tc,lineNumber:80,columnNumber:11}},s.createElement("input",{type:"radio",value:"-1",disabled:this.props.prefValues[P.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:tc,lineNumber:81,columnNumber:13}}),s.createElement("span",{__source:{fileName:tc,lineNumber:84,columnNumber:13}},(0,ue.Z)("Focus Input"))),s.createElement("p",{className:"info",__source:{fileName:tc,lineNumber:86,columnNumber:11}},(0,ue.Z)("Press TAB key to focus text boxes and lists only")))))),nc(this,"onFocusCyclingChanged",(e=>{const t="1"===e.target.value;st.Z.set(P.kWebpagesFocusTrap,t)})),nc(this,"renderFocusCycling",(()=>s.createElement("div",{className:"setting-group",__source:{fileName:tc,lineNumber:101,columnNumber:7}},s.createElement("h3",{__source:{fileName:tc,lineNumber:102,columnNumber:9}},(0,ue.Z)("Focus Cycling")),s.createElement(_i,{name:"toolbarFocusCycling",className:"setting-single",value:this.props.prefValues[P.kWebpagesFocusTrap]?"1":"0",onChange:this.onFocusCyclingChanged,__source:{fileName:tc,lineNumber:103,columnNumber:9}},s.createElement("label",{__source:{fileName:tc,lineNumber:107,columnNumber:11}},s.createElement("input",{type:"radio",value:"1",__source:{fileName:tc,lineNumber:108,columnNumber:13}}),s.createElement("span",{__source:{fileName:tc,lineNumber:109,columnNumber:13}},(0,ue.Z)("Cycle in Component"))),s.createElement("p",{className:"info",__source:{fileName:tc,lineNumber:111,columnNumber:11}},(0,ue.Z)("TAB key focus is bound to individual toolbars or webpage")),s.createElement("label",{__source:{fileName:tc,lineNumber:114,columnNumber:11}},s.createElement("input",{type:"radio",value:"0",__source:{fileName:tc,lineNumber:115,columnNumber:13}}),s.createElement("span",{__source:{fileName:tc,lineNumber:116,columnNumber:13}},(0,ue.Z)("Cycle All"))),s.createElement("p",{className:"info",__source:{fileName:tc,lineNumber:118,columnNumber:11}},(0,ue.Z)("TAB key focus cycles through whole application"))))))}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:tc,lineNumber:128,columnNumber:7}},this.renderFocusCycling(),this.renderFullKeyboardAccess())}}const ac=(0,bi.Z)(rc,sc);var oc=n(82189),lc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\KeyboardShortcutEditSetting.jsx";function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const uc=(e,t)=>Wl.Z.isSingleKeyShortcut(e)?t?"singlefeatures":"single":"",mc=["shift+tab","tab","space","enter","left","right","up","down","pageup","pagedown","numlock","home","end","insert","del"],dc=["alt+shift+f4","alt+f4","shift+insert","ctrl+insert","shift+f10"];class hc extends s.Component{constructor(...e){super(...e),cc(this,"state",{keyValue:this.props.command.shortcut||[],selectedCombo:"",active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),cc(this,"findExistingShortcut",((e,t)=>this.props.commandArray.filter((e=>e.shortcut)).find((n=>n.shortcut?.includes(e)&&(n.feature||"browser")===(t||"browser"))))),cc(this,"isTweakedShortcut",(e=>(!this.props.command.shortcut||!this.props.command.shortcut.includes(e))&&(this.props.command.tweakedShortcut&&this.props.command.tweakedShortcut===e))),cc(this,"restoreDefault",(()=>{const e=d.Z.getDefault(this.props.command.name);if(e.shortcut)for(let t=0;t<e.shortcut.length;t++){const n=this.findExistingShortcut(e.shortcut[t],this.props.command.feature);if(n&&this.props.command.name!==n.name&&!this.isTweakedShortcut(e.shortcut[t]))return void this.setState({duplicateCombo:{shortcut:(0,oc.$)(e.shortcut[t]),label:n.label},systemReservedCombo:"",singleKeyWarning:!1})}this.setState({keyValue:e.shortcut||null},this.save)})),cc(this,"onClearComboButton",(()=>{const{selectedCombo:e}=this.state,t=this.props.command.shortcut;if(!e||!t)return void this.setState({keyValue:[]},this.save);const n=t.indexOf(e);if(n<0)return void this.setState({selectedCombo:""},this.save);const s=[...t.slice(0,n),...t.slice(n+1)];this.setState({keyValue:s,selectedCombo:s[n]||""},this.save)})),cc(this,"onClearComboButtonMouseDown",(e=>{e.preventDefault()})),cc(this,"handleKeyEvent",(e=>{const t=Wl.Z.keyComboFromEvent(e.nativeEvent);if(!t)return;"tab"!==t&&"shift+tab"!==t&&e.preventDefault();const n=this.findExistingShortcut(t,this.props.command.feature);if("PageUp"!==e.nativeEvent.key&&"PageDown"!==e.nativeEvent.key||!e.nativeEvent.ctrlKey||e.preventDefault(),e.getModifierState("AltGraph"))return;const s=this.props.prefValues[P.kKeyboardShortcutsEnableSingleKey]||this.props.prefValues[P.kKeyboardShortcutsEnableSingleKeyForMail]&&["calendar","mail"].includes(this.props.command.feature),{selectedCombo:i}=this.state;if("backspace"===t||i&&"del"===t){let e=this.props.command.shortcut;i&&e?e.splice(e.indexOf(i),1):e&&(e=e.slice(0,e.length-1)),this.setState({keyValue:e||[],duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1},this.save),this.refs.comboInput.focus()}else if(Wl.Z.isSingleKeyShortcut(t)&&!s)this.setState({duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!0});else if(n&&!this.isTweakedShortcut(t))this.setState({duplicateCombo:{shortcut:(0,oc.$)(t),label:n.label},systemReservedCombo:"",singleKeyWarning:!1});else if(-1!==dc.indexOf(t))this.setState({systemReservedCombo:(0,oc.$)(t),duplicateCombo:null,singleKeyWarning:!1});else if(-1===mc.indexOf(t)){const e=this.props.command.shortcut||[];this.setState({keyValue:e.slice().concat(t),duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1},this.save)}else this.navigateWithArrowKeys(e)})),cc(this,"navigateWithArrowKeys",(e=>{let t=null;if(!this.state.keyValue||0===this.state.keyValue.length)return;const n=Wl.Z.keyComboFromEvent(e.nativeEvent),{document:s,HTMLElement:i}=this.context,r=s.activeElement;switch(n){case"left":r&&(t=r.previousElementSibling);break;case"right":r&&(t=r.nextElementSibling);break;case"up":r&&r.parentNode&&(t=r.parentNode.firstChild);break;case"down":r&&r.parentNode&&(t=r.parentNode.lastChild)}t instanceof i&&(e.preventDefault(),e.stopPropagation(),t.focus())})),cc(this,"save",(()=>{const e={name:this.props.command.name,shortcut:this.state.keyValue,gestures:this.props.command.gestures};d.Z.set({[this.props.command.name]:e})})),cc(this,"onTextFocus",(()=>{this.setState({active:!0})})),cc(this,"onTextBlur",(e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()})),cc(this,"onButtonFocus",(()=>{this.setState({active:!0})})),cc(this,"onButtonBlur",(e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()})),cc(this,"onComboFocus",(e=>{this.setState({selectedCombo:e.currentTarget.dataset.raw,active:!0})})),cc(this,"onComboBlur",(()=>{this.setState({selectedCombo:"",active:!1})})),cc(this,"renderCombos",(()=>{if(this.props.command.shortcut&&this.props.command.shortcut.length>0){const e=["mail","calendar"].includes(this.props.command.feature);return this.props.command.shortcut&&this.props.command.shortcut.map(((t,n)=>s.createElement("button",{key:n,className:`multiinput-item ${uc(t,e)}`,"data-raw":t,onFocus:this.onComboFocus,onBlur:this.onComboBlur,onKeyDown:this.handleKeyEvent,__source:{fileName:lc,lineNumber:347,columnNumber:11}},(0,oc.$)(t))))}})),cc(this,"renderKeyboardShortcutEditSetting",(()=>s.createElement("div",{className:bn()({controls:!0,active:this.state.active}),__source:{fileName:lc,lineNumber:362,columnNumber:7}},s.createElement("div",{className:"multiinput",__source:{fileName:lc,lineNumber:366,columnNumber:9}},s.createElement("div",{className:"multiinput-group",__source:{fileName:lc,lineNumber:367,columnNumber:11}},this.renderCombos(),s.createElement("input",{type:"text",ref:"comboInput",id:this.props.id,defaultValue:"",onKeyDown:this.handleKeyEvent,onFocus:this.onTextFocus,onBlur:this.onTextBlur,__source:{fileName:lc,lineNumber:369,columnNumber:13}}))),s.createElement("input",{type:"button",className:"circular restorekey",title:(0,ue.Z)("Restore default shortcut"),onClick:this.restoreDefault,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:lc,lineNumber:379,columnNumber:9}}),s.createElement("input",{type:"button",className:"circular clearkey",title:(0,ue.Z)("Clear shortcut"),onMouseDown:this.onClearComboButtonMouseDown,onClick:this.onClearComboButton,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:lc,lineNumber:386,columnNumber:9}}),this.state.duplicateCombo&&s.createElement("p",{className:"info",__source:{fileName:lc,lineNumber:395,columnNumber:9}},(0,ue.Z)("Shortcut $1 is already assigned to “$2” command.",[this.state.duplicateCombo.shortcut.toUpperCase(),this.state.duplicateCombo&&this.state.duplicateCombo.label])),this.state.systemReservedCombo&&s.createElement("p",{className:"info",__source:{fileName:lc,lineNumber:402,columnNumber:9}},(0,ue.Z)("Shortcut $1 is reserved by the system.",[this.state.systemReservedCombo.toUpperCase()])),this.state.singleKeyWarning&&s.createElement("p",{className:"info",__source:{fileName:lc,lineNumber:408,columnNumber:9}},(0,ue.Z)("Single Key Shortcuts are currently disabled.")))))}render(){return this.renderKeyboardShortcutEditSetting()}}cc(hc,"contextType",Vs.Z);const pc=hc;class gc extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),this.props.onClick())},(n="onKeyDown")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement("span",{title:this.props.title,className:"InlineText",tabIndex:A.ZP.get(P.kKeyboardTabToAll),onMouseDown:e=>e.preventDefault(),onClick:this.props.onClick,onKeyDown:this.onKeyDown,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InlineTextButton.jsx",lineNumber:25,columnNumber:7}},this.props.children)}}var bc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategory.jsx";function Nc(){return Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nc.apply(this,arguments)}function fc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _c="https://vivaldi.com/privacy/";function vc(e){return"string"!=typeof e.type}class Ec extends s.Component{constructor(e){super(e),fc(this,"hiddenWhenFilter",""),fc(this,"hiddenChildComponents",{}),fc(this,"unfilteredChildren",(e=>s.Children.map(e.children,(e=>e&&vc(e)?s.cloneElement(e,{filter:""}):e)))),fc(this,"filteredChildren",(e=>s.Children.map(e.children,((t,n)=>!t||vc(t)?t:(0,Yi.ZP)(t,e.filter))))),fc(this,"searchChildren",(e=>{if(!e.filter)return s.Children.map(e.children,(e=>e));return e.categoryTitle.toLowerCase().includes(e.filter.toLowerCase())?this.unfilteredChildren(e):this.filteredChildren(e)})),fc(this,"shouldSearchHiddenComponent",((e,t)=>!t||e.length>=t.length||e!==t.slice(0,e.length))),fc(this,"hideCategoryIfEmpty",(()=>{this.root&&(1===this.root.children.length||!0===this.props.displayPrivacyLink&&2===this.root.children.length?(this.root.style.display="none",this.hiddenWhenFilter=this.props.filter):(this.root.style.removeProperty("display"),this.hiddenWhenFilter=""))})),fc(this,"openPrivacyPage",(()=>{$.Z.openURL(_c)})),this.state={children:this.searchChildren(this.props)}}componentDidMount(){this.hideCategoryIfEmpty()}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter?this.hiddenWhenFilter?this.shouldSearchHiddenComponent(this.hiddenWhenFilter,e.filter)&&this.setState({children:this.searchChildren(e)}):this.setState({children:this.searchChildren(e)}):this.props.children!==e.children&&this.setState({children:this.searchChildren(e)})}componentDidUpdate(){this.hideCategoryIfEmpty()}render(){const e=this.props.categoryTitle&&s.createElement("h2",{__source:{fileName:bc,lineNumber:127,columnNumber:7}},this.props.categoryTitle),t=(0,Yi.ZP)(e,this.props.filter)||e,n=(0,Xs.Z)(this.props,["filter","categoryTitle","displayPrivacyLink"]);return s.createElement("div",Nc({ref:e=>e?this.root=e:null},n,{__source:{fileName:bc,lineNumber:137,columnNumber:7}}),t,e&&!0===this.props.displayPrivacyLink&&s.createElement("div",{className:"privacy-link",__source:{fileName:bc,lineNumber:140,columnNumber:11}},s.createElement(gc,{title:_c,onClick:this.openPrivacyPage,__source:{fileName:bc,lineNumber:141,columnNumber:13}},(0,ue.Z)("Learn more about Privacy in Vivaldi"))),this.state.children)}}fc(Ec,"defaultProps",{displayPrivacyLink:!1});const Cc=Ec,wc=(e,t)=>{for(const n of e){let e=!1;for(const s of t)0!==s.indexOf(n)||(e=!0);if(!e)return!1}return!0};var yc=n(93851),Sc=n(60933),Tc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\Keyboard.jsx";function kc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ic=[P.kMailIsTurnedOff,P.kChainedCommandsCommandList,P.kKeyboardShortcutsAltOpensMenu,P.kKeyboardShortcutsEnable,P.kKeyboardShortcutsEnableSingleKey,P.kKeyboardShortcutsEnableSingleKeyForMail,P.kKeyboardShortcutsSpaceFastForwards];async function Ac(){return(await F.Z.getAllCommands()).filter((e=>!(0,yc.xU)(e.name)&&!(0,Sc.jD)(e.name)&&!(0,Sc.Ed)(e.name))).map((e=>{const t=F.Z.getCommandConfiguration(e.name)?.shortcut;return{...e,...t&&{shortcut:t}}}))}class Zc extends s.Component{constructor(...e){super(...e),kc(this,"state",{commandArray:[],openCategories:["CATEGORY_COMMAND_APPLICATION"],confirmation:!1,hideFullKeyAccess:0,hideConfigureSingleKeyShortcut:0,shouldHideKeyboardShortcuts:!1,keyboardShortcutFilter:""}),kc(this,"_onStoreChange",(()=>{this._initialSetup()})),kc(this,"_initialSetup",(async()=>{const e=await Ac();this.setState({commandArray:e})})),kc(this,"switchCategory",(e=>{this.setState((t=>{const n=t.openCategories;return n.indexOf(e)>-1?n.splice(n.indexOf(e),1):n.push(e),{openCategories:n}}))})),kc(this,"confirmRestoreKeys",(()=>{this.setState({confirmation:!0})})),kc(this,"restoreKeys",(()=>{o.Z.restoreCommandShortcutKeys(),this.setState({confirmation:!1})})),kc(this,"onCancel",(()=>{this.setState({confirmation:!1})})),kc(this,"renderModal",(()=>s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:Tc,lineNumber:161,columnNumber:7}},s.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:Tc,lineNumber:164,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:Tc,lineNumber:165,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Tc,lineNumber:166,columnNumber:13}},(0,ue.Z)("Restore Keyboard Shortcuts?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:Tc,lineNumber:170,columnNumber:11}},s.createElement("p",{__source:{fileName:Tc,lineNumber:171,columnNumber:13}},(0,ue.Z)("All keyboard shortcuts will be restored to default."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Tc,lineNumber:175,columnNumber:11}},s.createElement("input",{type:"button",className:"danger",onClick:this.restoreKeys,value:(0,ue.Z)("Restore"),__source:{fileName:Tc,lineNumber:176,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),autoFocus:!0,__source:{fileName:Tc,lineNumber:181,columnNumber:13}})))))),kc(this,"renderKeyboardCommandCategories",((e,t)=>{const n=e.reduce(((e,t)=>(e[t.category]=(e[t.category]||[]).concat(t),e)),{}),i=Object.keys(n).map(((e,s)=>this.renderKeyboardCommandCategory(e,n[e],t)));return i.length>0?s.createElement("div",{className:"setting-single",__source:{fileName:Tc,lineNumber:211,columnNumber:9}},s.createElement("div",{className:"keystrokes",__source:{fileName:Tc,lineNumber:212,columnNumber:11}},i),!this.props.filter&&"read-only"!==this.props.view&&s.createElement("input",{type:"button",onClick:this.confirmRestoreKeys,value:(0,ue.Z)("Restore Default Keys"),__source:{fileName:Tc,lineNumber:216,columnNumber:13}})):null})),kc(this,"renderKeyboardCommandCategory",((e,t,n)=>{const i=Xl(e),r=n||this.state.openCategories.indexOf(e)>-1?"show":"hide";return s.createElement("div",{className:"category "+r,key:e,__source:{fileName:Tc,lineNumber:234,columnNumber:7}},s.createElement("button",{onClick:this.switchCategory.bind(this,e),__source:{fileName:Tc,lineNumber:235,columnNumber:9}},(0,Yi.CH)(i,n)),s.createElement("div",{className:"list",__source:{fileName:Tc,lineNumber:238,columnNumber:9}},t.map(((e,t)=>this.renderCommandKeys(e,t,n)))))})),kc(this,"renderCommandKeys",((e,t,n)=>{const i=!this.props.prefValues[P.kKeyboardShortcutsEnable],r=!this.props.prefValues[P.kKeyboardShortcutsEnableSingleKey];if("read-only"===this.props.view)return s.createElement("div",{className:"keycombo",key:t,__source:{fileName:Tc,lineNumber:258,columnNumber:7}},s.createElement("label",{__source:{fileName:Tc,lineNumber:259,columnNumber:9}},(0,Yi.CH)(e.label,n)),e.shortcut&&e.shortcut.map(((e,t)=>[s.createElement("span",{key:t,title:i?(0,ue.Z)("Keyboard Shortcuts are disabled"):1===e.length&&r?(0,ue.Z)("Single Key Shortcuts are disabled"):"",__source:{fileName:Tc,lineNumber:261,columnNumber:11}},s.createElement("input",{type:"button",disabled:!0,className:e.length>1?"item regular":"item single",value:(0,oc.$)(e),__source:{fileName:Tc,lineNumber:265,columnNumber:13}}))])));if(!(0,yc.os)(e.name)){const t=e.name.toLowerCase();return s.createElement("div",{className:"keycombo",key:t,__source:{fileName:Tc,lineNumber:278,columnNumber:9}},s.createElement("label",{htmlFor:"combo-"+t,__source:{fileName:Tc,lineNumber:279,columnNumber:11}},(0,Yi.CH)(e.label,this.props.filter)),s.createElement(pc,{prefValues:this.props.prefValues,id:"combo-"+t,key:t,commandArray:this.state.commandArray,command:e,__source:{fileName:Tc,lineNumber:282,columnNumber:11}}))}return null})),kc(this,"renderListOfKeyboardCommands",(e=>{let t=[];if("read-only"===this.props.view){t=this.state.commandArray.filter((e=>Boolean(e.shortcut&&e.shortcut.length>0)))}else t=this.state.commandArray;if(e){const n=this.tokenize(e);t=t.filter((t=>{if((t.label||t.name).toLowerCase().indexOf(e.toLowerCase())>-1)return!(0,yc.os)(t.name);return(t.shortcut||[]).some((e=>{const t=this.tokenize(e);return wc(n,t)}))}))}return t.length>0?s.createElement("div",{className:"keyboard-shortcut-list",__source:{fileName:Tc,lineNumber:326,columnNumber:9}},e&&s.createElement("header",{__source:{fileName:Tc,lineNumber:328,columnNumber:13}},s.createElement("h3",{__source:{fileName:Tc,lineNumber:329,columnNumber:15}},(0,ue.Z)("Showing all keyboard shortcut entries matching $1.",[e]))),this.renderKeyboardCommandCategories(t,e)):null})),kc(this,"tokenize",(e=>new Set(e.match(/[^,\s\+]+/g)||[])))}componentDidMount(){this._initialSetup(),F.Z.addChangeListener(this._onStoreChange),A.ZP.addListener(P.kMailIsTurnedOff,this._onStoreChange)}componentWillUnmount(){F.Z.removeChangeListener(this._onStoreChange),A.ZP.removeListener(P.kMailIsTurnedOff,this._onStoreChange)}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter&&this.setState({keyboardShortcutFilter:""})}render(){const e=this.state.keyboardShortcutFilter||this.props.filter;if("read-only"===this.props.view)return this.renderListOfKeyboardCommands(e);const{prefValues:t}=this.props;return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Keyboard"),className:bn()({"keyboard-shortcut-list":!0,singlekeydisabled:!t[P.kKeyboardShortcutsEnableSingleKey],singlekeydisabledfeatures:!t[P.kKeyboardShortcutsEnableSingleKeyForMail]}),filter:this.props.filter,__source:{fileName:Tc,lineNumber:354,columnNumber:7}},this.state.confirmation&&this.renderModal(),s.createElement(ac,{filter:this.props.filter,__source:{fileName:Tc,lineNumber:366,columnNumber:9}}),s.createElement($l,{filter:this.props.filter,__source:{fileName:Tc,lineNumber:368,columnNumber:9}}),s.createElement(ec,{filter:this.props.filter,prefValues:t,__source:{fileName:Tc,lineNumber:370,columnNumber:9}}),this.renderListOfKeyboardCommands(e))}}const Pc=(0,bi.Z)(Zc,Ic);var Dc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\singleshortcut\\SingleShortcut.jsx";function Mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Oc extends s.PureComponent{constructor(...e){super(...e),Mc(this,"state",{commands:[],error:null}),Mc(this,"componentDidMount",(()=>{this._initialSetup(),F.Z.addChangeListener(this.onStoreChange)})),Mc(this,"componentWillUnmount",(()=>{F.Z.removeChangeListener(this.onStoreChange)})),Mc(this,"_initialSetup",(async()=>{const e=await Ac();this.setState({commands:e})})),Mc(this,"onStoreChange",(()=>{this._initialSetup()})),Mc(this,"getCommand",(()=>this.state.commands.find((e=>e.name===this.props.name)))),Mc(this,"findExistingShortcut",(e=>this.state.commands.filter((e=>e.shortcut)).find((t=>t.shortcut?.includes(e))))),Mc(this,"isDefault",(()=>{const e=d.Z.getDefault(this.props.name).shortcut,t=this.getCommand()?.shortcut;return void 0===t||(!!e?.every(((e,n)=>e===t[n]))||void 0===e&&0===t.length)})),Mc(this,"restoreDefault",(()=>{const e=d.Z.getDefault(this.props.name);if(e.shortcut)for(let t=0;t<e.shortcut.length;t++){const n=e.shortcut[t],s=this.findExistingShortcut(n);if(s&&s.name!==this.props.name)return void this.setState({error:(0,ue.Z)("Shortcut $1 is already assigned to “$2” command.",[(0,oc.$)(n).toUpperCase(),s.label])})}const t=this.getCommand();t&&this.save(t,e.shortcut||[])})),Mc(this,"handleKeyEvent",(e=>{const t=this.getCommand();if(!t||["Escape","Tab"].includes(e.key)||e.getModifierState("AltGraph"))return void this.setState({error:null});e.preventDefault();const n=Wl.Z.keyComboFromEvent(e.nativeEvent);if("Backspace"!==e.key){if(n){const e=this.findExistingShortcut(n);if(!A.ZP.get(P.kKeyboardShortcutsEnableSingleKey)&&Wl.Z.isSingleKeyShortcut(n))this.setState({error:(0,ue.Z)("Single Key Shortcuts are currently disabled.")});else if(e)this.setState({error:(0,ue.Z)("Shortcut $1 is already assigned to “$2” command.",[(0,oc.$)(n).toUpperCase(),e.label])});else if(-1!==dc.indexOf(n)){const e=(0,oc.$)(n);this.setState({error:(0,ue.Z)("Shortcut $1 is reserved by the system.",[e.toUpperCase()])})}else-1===mc.indexOf(n)&&this.setState({error:null},(()=>{const e=(t.shortcut||[]).concat(n);this.save(t,e,(()=>{this.refs.comboInput.focus()}))}))}}else{const e=t.shortcut?.slice(0,t.shortcut.length-1);e&&this.setState({error:null},(()=>{this.save(t,e)}))}})),Mc(this,"deleteCombo",((e,t,n,s)=>{const i=n.filter(((e,t)=>t!==s));if("Delete"===e.key){const n=e.currentTarget.nextElementSibling;this.save(t,i,(()=>{n instanceof HTMLElement&&n.focus()}))}else if("Backspace"===e.key&&n){const n=e.currentTarget.previousElementSibling||e.currentTarget.nextElementSibling;this.save(t,i,(()=>{n instanceof HTMLElement&&n.focus()}))}else this.handleKeyEvent(e)})),Mc(this,"save",((e,t,n)=>{const{name:s,gestures:i,showInQC:r}=e;this.setState({error:null},(()=>{d.Z.set({[s]:{name:s,shortcut:t,gestures:i,showInQC:r}},n)}))}))}render(){const e=this.getCommand(),t=e&&Array.isArray(e.shortcut)&&e.shortcut;return s.createElement(s.Fragment,null,s.createElement("div",{className:"SingleShortcut-Toolbar toolbar toolbar-default",__source:{fileName:Dc,lineNumber:201,columnNumber:9}},s.createElement("div",{className:"multiinput",__source:{fileName:Dc,lineNumber:203,columnNumber:11}},s.createElement("div",{className:"multiinput-group",__source:{fileName:Dc,lineNumber:204,columnNumber:13}},e&&t&&t.map(((n,i)=>s.createElement("button",{key:n,style:{textTransform:"capitalize"},className:"multiinput-item",onKeyDown:n=>{this.deleteCombo(n,e,t,i)},__source:{fileName:Dc,lineNumber:206,columnNumber:17}},(0,oc.$)(n)))),s.createElement("input",{type:"text",ref:"comboInput",placeholder:t&&0===t.length&&this.props.placeholder||null,onKeyDown:this.handleKeyEvent,__source:{fileName:Dc,lineNumber:217,columnNumber:15}}))),s.createElement(ko,{onClick:this.restoreDefault,image:cn.GO5.medium,disabled:void 0!==e&&this.isDefault(),tooltip:(0,ue.Z)("Restore default shortcut"),__source:{fileName:Dc,lineNumber:226,columnNumber:11}})),this.state.error&&s.createElement("p",{className:"SingleShortcut-Error",dangerouslySetInnerHTML:{__html:cn.Si$.small+this.state.error},__source:{fileName:Dc,lineNumber:235,columnNumber:11}}))}}const xc=Oc;var Lc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\breakmode\\BreakModePopup.jsx";const Rc=[P.kPrivacyBreakModeIntroductionShow];class Bc extends s.PureComponent{render(){return s.createElement("div",{className:"popup-scrollarea",__source:{fileName:Lc,lineNumber:29,columnNumber:7}},s.createElement("div",{className:"BreakModePopup--Graphic",dangerouslySetInnerHTML:{__html:cn.Gvk.large},__source:{fileName:Lc,lineNumber:30,columnNumber:9}}),s.createElement("h1",{__source:{fileName:Lc,lineNumber:35,columnNumber:9}},(0,ue.Z)("Take a Break")),s.createElement("p",{className:"BreakModePopup-Intro",__source:{fileName:Lc,lineNumber:38,columnNumber:9}},(0,ue.Z)("Vivaldi is fading content and pausing media. Focus elsewhere for a while.")),s.createElement("h3",{__source:{fileName:Lc,lineNumber:42,columnNumber:9}},(0,ue.Z)("Keyboard Shortcut")),s.createElement(xc,{name:"COMMAND_BREAKMODE_TOGGLE",placeholder:(0,ue.Z)("No shortcut assigned"),__source:{fileName:Lc,lineNumber:45,columnNumber:9}}),s.createElement("label",{__source:{fileName:Lc,lineNumber:50,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:!this.props.prefValues[P.kPrivacyBreakModeIntroductionShow],onChange:()=>{st.Z.toggle(P.kPrivacyBreakModeIntroductionShow,!0,!1)},__source:{fileName:Lc,lineNumber:51,columnNumber:11}}),s.createElement("span",{__source:{fileName:Lc,lineNumber:58,columnNumber:11}},(0,ue.Z)("Do not show again"))))}}const Fc=(0,bi.Z)(Bc,Rc);var Uc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\breakmode\\BreakModeButton.jsx";function Vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hc=[P.kPrivacyBreakModeIntroductionShow];class Wc extends s.PureComponent{constructor(...e){super(...e),Vc(this,"state",{shouldShowPopup:di.Z.getState().isActive&&this.props.prefValues[P.kPrivacyBreakModeIntroductionShow],isInBreakMode:di.Z.getState().isActive}),Vc(this,"componentDidMount",(()=>{this.breakModeStoreToken=di.Z.addListener(this.onBreakModeChanged)})),Vc(this,"componentWillUnmount",(()=>{this.breakModeStoreToken.remove()})),Vc(this,"onBreakModeChanged",(()=>{const e=di.Z.getState().isActive,t=e&&this.props.prefValues[P.kPrivacyBreakModeIntroductionShow];this.setState({isInBreakMode:e,shouldShowPopup:t})})),Vc(this,"hidePopup",(()=>{this.setState({shouldShowPopup:!1})}))}render(){return s.createElement(ko,{className:"panel-clickoutside-ignore",tooltip:this.state.isInBreakMode?(0,ue.Z)("End Break"):(0,ue.Z)("Take a Break"),onClick:r.Z.toggleBreakMode,isOn:this.state.isInBreakMode,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,image:this.state.isInBreakMode?cn._qK[this.props.size]:cn.Gvk[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"BreakModePopup ToolbarButtonPopup-DefaultStyles",popupWidth:220,isPopupVisible:this.state.shouldShowPopup,menu:()=>[{type:"checkbox",checked:this.props.prefValues[P.kPrivacyBreakModeIntroductionShow],handler:()=>{st.Z.toggle(P.kPrivacyBreakModeIntroductionShow,!0,!1)},...(0,Mn.Z)("Show Break Mode Introduction")}],__source:{fileName:Uc,lineNumber:84,columnNumber:12}},s.createElement(Fc,{__source:{fileName:Uc,lineNumber:118,columnNumber:7}}))}}const zc=(0,bi.Z)(Wc,Hc);var Gc=n(55002),Kc=n(82495),jc=n(64791),Yc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FormFeedback.jsx";function $c(e){switch(e){case"error":return cn.viW;case"warning":return cn.h6;case"success":return cn.JLz;default:return cn.GH$}}class Xc extends s.Component{constructor(...e){var t,n,i;super(...e),t=this,n="_refFeedback",i=s.createRef(),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this._refFeedback.current?.scrollIntoViewIfNeeded()}componentDidUpdate(){this._refFeedback.current?.scrollIntoViewIfNeeded()}render(){const{type:e="info",children:t}=this.props;return s.createElement("div",{ref:this._refFeedback,className:`FormFeedback FormFeedback--${e}`,__source:{fileName:Yc,lineNumber:55,columnNumber:7}},s.createElement("span",{className:"FormFeedback-Icon",dangerouslySetInnerHTML:{__html:$c(e)},__source:{fileName:Yc,lineNumber:58,columnNumber:9}}),t)}}const Qc=Xc;var qc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\StatusPopupLogs.jsx";function Jc(e){return e.map((function(e){return"string"==typeof e?e:Array.isArray(e)?`[${Jc(e).join(", ")}]`:e instanceof Error?`Error: ${e.message}`:void 0}))}function eu(e){switch(e){case"warn":return"warning";case"log":return"info";default:return e}}function tu(e){for(const t of e)if(t instanceof Error)return t}function nu(e){const{component:t,tags:n,level:s,timestamp:i,args:r}=e,a=g()(i).format("HH:mm:ss.SSS"),o=Jc(r).join(" "),l=`${a} ${s} [${t} - ${n.join(", ")}] ${o}\r\n`,c=tu(r);return c?`${l}${c.stack}\r\n`:l}function su(e){const t=s.useContext(Vs.Z);function n(){al.Z.copyTextToClipboard(nu(e.entry))}const{args:i,level:r,tags:a,timestamp:o}=e.entry,l=tu(i);return s.createElement(Qc,{type:eu(r),__source:{fileName:qc,lineNumber:83,columnNumber:5}},s.createElement("div",{className:"StatusPopup-LogEntryMessage","data-index":e.index,onContextMenu:function(e){(0,Hs.Z)(t.vivaldiWindowId,[{handler:n,...(0,Mn.Z)("verb","Copy")}])(e)},__source:{fileName:qc,lineNumber:84,columnNumber:7}},s.createElement("span",{className:"StatusPopup-LogEntryTags",__source:{fileName:qc,lineNumber:89,columnNumber:9}},"[",a.join(", "),"]"),Jc(i).join(" "),s.createElement("span",{className:"StatusPopup-LogEntryTimestamp",__source:{fileName:qc,lineNumber:91,columnNumber:9}},!!l&&s.createElement("span",{className:"StatusPopup-LogEntryStacktrace",title:l.stack,dangerouslySetInnerHTML:{__html:cn.AE4.small},__source:{fileName:qc,lineNumber:93,columnNumber:13}}),g()(o).format("HH:mm:ss.SSS"))))}const iu=function(e){return s.createElement(s.Fragment,null,s.createElement("div",{className:"StatusPopup-List",tabIndex:e.logs.length?"-1":"0",__source:{fileName:qc,lineNumber:125,columnNumber:7}},e.logs.map(((e,t)=>s.createElement(su,{key:e.timestamp,entry:e,index:t,__source:{fileName:qc,lineNumber:130,columnNumber:11}})))),s.createElement("div",{className:"StatusPopup-Footer",__source:{fileName:qc,lineNumber:133,columnNumber:7}},s.createElement(ko,{onClick:function(){const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.logs.map(nu).join(""))),t.download=`Vivaldi_${e.component}_log.txt`,t.click()},title:(0,ue.Z)("Save to File"),__source:{fileName:qc,lineNumber:134,columnNumber:9}}),s.createElement(ko,{onClick:function(){const t=e.logs.map(nu).join("");al.Z.copyTextToClipboard(t)},title:(0,ue.Z)("Copy to Clipboard"),__source:{fileName:qc,lineNumber:141,columnNumber:9}}),s.createElement(ko,{onClick:()=>jc.Z.clear(e.component),title:(0,ue.Z)("Clear"),__source:{fileName:qc,lineNumber:148,columnNumber:9}})))};var ru=n(45932),au=n(9926),ou=n(76259),lu=n.n(ou),cu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarStatusPopup.jsx";function uu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mu(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,hu(e,t,"get"))}function du(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,hu(e,t,"set"),n),n}function hu(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function pu(e){switch(e.account_type){case"google":return`<img src="${hl.K$}" />`;case"ical":case"caldav":return cn.eTS.small;case"vivaldi":return lu();default:return cn.bcq.small}}function gu(){const[e,t]=s.useState({}),n=Gc.Z.getAccounts();async function i(e){!function(e){t((t=>({...t,[e.id]:{pending:!0,error:!1,success:!1,message:""}})))}(e);const n=await a.Z.pollCalDAVAccounts([e.id]),s=Kc.Z.getPollResultText(n);!function(e,n,s){t((t=>({...t,[e.id]:{pending:!1,success:!n,error:n,message:s}})))}(e,n.error,s)}return s.createElement(s.Fragment,null,s.createElement("div",{className:"StatusPopup-List",__source:{fileName:cu,lineNumber:106,columnNumber:5}},n.map((t=>{const n=Gc.Z.getCalendars().filter((e=>e.accountId===t.id)),r=Math.max(...n.map((e=>e.lastChecked)).filter(Boolean));return s.createElement(s.Fragment,{key:t.id,__source:{fileName:cu,lineNumber:117,columnNumber:11}},s.createElement("div",{className:"StatusPopup-Account",__source:{fileName:cu,lineNumber:118,columnNumber:13}},s.createElement("span",{className:"StatusPopup-AccountIcon",dangerouslySetInnerHTML:{__html:pu(t)},__source:{fileName:cu,lineNumber:119,columnNumber:15}}),s.createElement("span",{className:bn()("StatusPopup-AccountName",{"StatusPopup-AccountName--Local":"local"===t.account_type}),__source:{fileName:cu,lineNumber:123,columnNumber:15}},t.name),"local"!==t.account_type&&s.createElement("div",{className:"StatusPopup-AccountStatus",__source:{fileName:cu,lineNumber:132,columnNumber:17}},e[t.id]?.pending&&s.createElement("span",{className:"spinner",dangerouslySetInnerHTML:{__html:cn.H0I},__source:{fileName:cu,lineNumber:134,columnNumber:21}}),e[t.id]?.error&&s.createElement("span",{className:"StatusPopup-AccountStatus--Error",title:e[t.id].message,dangerouslySetInnerHTML:{__html:cn.viW},__source:{fileName:cu,lineNumber:140,columnNumber:21}}),e[t.id]?.success&&s.createElement("span",{className:"StatusPopup-AccountStatus--Success",title:e[t.id].message,dangerouslySetInnerHTML:{__html:cn.JLz},__source:{fileName:cu,lineNumber:147,columnNumber:21}}),s.createElement(ko,{onClick:()=>i(t),title:(0,ue.Z)("Refresh"),__source:{fileName:cu,lineNumber:153,columnNumber:19}})),n.map((e=>{const t=Kc.Z.createCalendarIcon(e,8);return s.createElement(s.Fragment,{key:e.id,__source:{fileName:cu,lineNumber:165,columnNumber:25}},s.createElement("span",{className:"StatusPopup-CalendarIcon",dangerouslySetInnerHTML:{__html:t},__source:{fileName:cu,lineNumber:166,columnNumber:19}}),s.createElement("span",{key:e.id,className:"StatusPopup-CalendarName",__source:{fileName:cu,lineNumber:170,columnNumber:19}},e.description||e.name))})),"local"!==t.account_type&&s.createElement("div",{className:"StatusPopup-AccountPoll",__source:{fileName:cu,lineNumber:180,columnNumber:17}},(0,ue.Z)("Last Checked $1",[g()(r).fromNow()]))))}))),s.createElement("div",{className:"StatusPopup-Footer",__source:{fileName:cu,lineNumber:190,columnNumber:5}},s.createElement(ko,{onClick:()=>async function(e){for(const t of e)await i(t)}(n),title:(0,ue.Z)("Refresh All"),__source:{fileName:cu,lineNumber:191,columnNumber:7}})))}function bu(e){const{selectedEvent:t}=e;return s.createElement(s.Fragment,null,e.events.length>0&&s.createElement("h3",{__source:{fileName:cu,lineNumber:206,columnNumber:35}},(0,ue.Z)("Upcoming Events")),s.createElement("div",{className:"StatusPopup-List",__source:{fileName:cu,lineNumber:208,columnNumber:7}},e.events.slice(0,5).map((e=>{const t=Kc.Z.getEventColors(e.calendarId);return s.createElement("button",{key:Kc.Z.generateKey(e),tabIndex:A.ZP.get(P.kKeyboardTabToAll),className:bn()("StatusPopup-Event",{"StatusPopup-Event--AllDay":e.allDay}),style:t,__source:{fileName:cu,lineNumber:212,columnNumber:11}},s.createElement("span",{className:"StatusPopup-EventIcon",dangerouslySetInnerHTML:{__html:Kc.Z.getEventSquircle()},__source:{fileName:cu,lineNumber:220,columnNumber:13}}),s.createElement("span",{className:"StatusPopup-EventDate",__source:{fileName:cu,lineNumber:224,columnNumber:13}},!e.task&&e.start&&g()(e.start).format("l HH:mm"),e.task&&e.due&&g()(e.due).format("l HH:mm")),s.createElement("span",{className:"StatusPopup-EventTitle",__source:{fileName:cu,lineNumber:230,columnNumber:13}},e.title))}))),t&&s.createElement("dl",{className:"StatusPopup-EventDetail",__source:{fileName:cu,lineNumber:236,columnNumber:9}},s.createElement("dt",{__source:{fileName:cu,lineNumber:237,columnNumber:11}},(0,ue.Z)("Selected")),s.createElement("dd",{__source:{fileName:cu,lineNumber:243,columnNumber:11}},t.title),s.createElement("dt",{__source:{fileName:cu,lineNumber:244,columnNumber:11}},"Id"),s.createElement("dd",{__source:{fileName:cu,lineNumber:245,columnNumber:11}},t.id),s.createElement("dt",{__source:{fileName:cu,lineNumber:246,columnNumber:11}},"Date"),s.createElement("dd",{__source:{fileName:cu,lineNumber:247,columnNumber:11}},`${g()(t.start).format("l HH:mm")} - ${g().duration(t.start-t.end).humanize()}`),s.createElement("dt",{__source:{fileName:cu,lineNumber:250,columnNumber:11}},"UID"),s.createElement("dd",{__source:{fileName:cu,lineNumber:251,columnNumber:11}},t.uid),s.createElement("dt",{__source:{fileName:cu,lineNumber:252,columnNumber:11}},"Sequence"),s.createElement("dd",{__source:{fileName:cu,lineNumber:253,columnNumber:11}},t.sequence),t.recurrence&&s.createElement(s.Fragment,null,s.createElement("dt",{__source:{fileName:cu,lineNumber:256,columnNumber:15}},"Recurrence"),s.createElement("dd",{__source:{fileName:cu,lineNumber:257,columnNumber:15}},t.recurrence.toString()),s.createElement("dt",{__source:{fileName:cu,lineNumber:258,columnNumber:15}},"Exceptions")),!!t.recurrenceExceptions?.length&&s.createElement(s.Fragment,null,s.createElement("dd",{__source:{fileName:cu,lineNumber:263,columnNumber:15}},t.recurrenceExceptions.map(((e,t)=>s.createElement("p",{key:t,__source:{fileName:cu,lineNumber:265,columnNumber:19}},!!e.date&&`${g()(e.date).format("l HH:mm")}`,` Cancel: ${e.cancelled?.toString()??"false"}`,!!e.exception_event_id&&"0"!==e.exception_event_id&&` Exc. Id: ${e.exception_event_id}`)))))),s.createElement("div",{className:"StatusPopup-Footer",__source:{fileName:cu,lineNumber:280,columnNumber:7}}))}function Nu(e){return{upcomingEvents:au.C.call(Gc.Z.getVisibleEvents()),selectedEvent:Gc.Z.getSelectedEvent(V.ZP.getActivePage(e)?.id)}}var fu=new WeakMap;class _u extends s.PureComponent{constructor(...e){super(...e),uu(this,"state",{...Nu(this.context.vivaldiWindowId),selectedPane:A.ZP.get(P.kCalendarStatusSelectedPane)}),fu.set(this,{writable:!0,value:void 0}),uu(this,"_onStoreChange",(e=>{"calendarDataReady"===e&&this.setState(Nu(this.context.vivaldiWindowId))})),uu(this,"_selectPane",(e=>{st.Z.set(P.kCalendarStatusSelectedPane,e),this.setState({selectedPane:e})})),uu(this,"_viewLog",(()=>{b.Z.devtoolsPrivate.toggleDevtools("console"),this.props.hidePopup()})),uu(this,"_startChangeListeners",(()=>{a.Z.startAPIChangeListeners(),this.props.hidePopup()})),uu(this,"openCalendarSettings",(()=>{se.Z.showSettings("calendar"),this.props.hidePopup()})),uu(this,"getContextMenu",(()=>[{handler:this.openCalendarSettings,...(0,Mn.Z)("Calendar Settings")},{handler:this._viewLog,...(0,Mn.Z)("View Log")},{handler:this._startChangeListeners,...(0,Mn.Z)("Start Calendar Change Listeners")}]))}componentDidMount(){Gc.Z.addChangeListener(this._onStoreChange),du(this,fu,setInterval((()=>this._onStoreChange("calendarDataReady")),ru.lb))}componentWillUnmount(){mu(this,fu)&&clearInterval(mu(this,fu)),Gc.Z.removeChangeListener(this._onStoreChange)}render(){return s.createElement(s.Fragment,null,s.createElement("div",{className:"StatusPopup-Header",__source:{fileName:cu,lineNumber:365,columnNumber:9}},s.createElement("h2",{__source:{fileName:cu,lineNumber:366,columnNumber:11}},(0,ue.Z)("Calendar Status")),s.createElement("div",{className:"toolbar button-popup-header-toolbar",__source:{fileName:cu,lineNumber:367,columnNumber:11}},s.createElement(ko,{onClick:()=>{se.Z.showCalendar(),this.props.hidePopup()},menuOrigin:"bottomLeft",title:(0,ue.Z)("Show Calendar"),__source:{fileName:cu,lineNumber:368,columnNumber:13}}),s.createElement(ko,{className:"StatusPopup-ButtonCog",menuOrigin:"bottomLeft",image:cn.bqs.small,menu:this.getContextMenu,tooltip:(0,ue.Z)("Settings"),__source:{fileName:cu,lineNumber:376,columnNumber:13}}))),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:cu,lineNumber:386,columnNumber:9}},s.createElement("div",{className:"toolbar-group equal-width",__source:{fileName:cu,lineNumber:387,columnNumber:11}},s.createElement(ko,{title:(0,ue.Z)("Accounts"),isPressed:"accounts"===this.state.selectedPane,onClick:()=>this._selectPane("accounts"),__source:{fileName:cu,lineNumber:388,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Events"),isPressed:"events"===this.state.selectedPane,onClick:()=>this._selectPane("events"),__source:{fileName:cu,lineNumber:393,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Logs"),isPressed:"logs"===this.state.selectedPane,onClick:()=>this._selectPane("logs"),badgeText:"logs"!==this.state.selectedPane&&this.props.hasLoggedError?"!":"",__source:{fileName:cu,lineNumber:398,columnNumber:13}}))),s.createElement("div",{className:"StatusPopup-Content",__source:{fileName:cu,lineNumber:410,columnNumber:9}},s.createElement("div",{className:"StatusPopup-ContentPane",__source:{fileName:cu,lineNumber:411,columnNumber:11}},"accounts"===this.state.selectedPane&&s.createElement(gu,{__source:{fileName:cu,lineNumber:413,columnNumber:13}}),"events"===this.state.selectedPane&&s.createElement(bu,{events:this.state.upcomingEvents,selectedEvent:this.state.selectedEvent,__source:{fileName:cu,lineNumber:416,columnNumber:13}}),"logs"===this.state.selectedPane&&s.createElement(iu,{logs:this.props.logs,component:"Calendar",__source:{fileName:cu,lineNumber:422,columnNumber:13}}))))}}uu(_u,"contextType",Vs.Z);const vu=_u;class Eu extends(S()){constructor(){super(m.Z)}getInitialState(){return[]}getLogsByComponent(e){return this.getState().filter((t=>t.component===e))}reduce(e,t){switch(t.actionType){case"COMPONENT_LOGGER_LOG":{let n;return e.length>=1e3?(n=e.slice(1),n.push(t.entry)):n=e.concat(t.entry),n}case"COMPONENT_LOGGER_CLEAR":return e.filter((e=>e.component!==t.component))}return e}}const Cu=new Eu;var wu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarStatusButton.jsx";function yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Su(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Tu(e,t,"set"),n),n}function Tu(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const ku=[P.kCalendarStatusButtonStyle,P.kMailIsTurnedOff];function Iu(e){return e.some((e=>"error"===e.level))}var Au=new WeakMap;class Zu extends s.PureComponent{constructor(e){super(e),Au.set(this,{writable:!0,value:null}),yu(this,"componentDidMount",(()=>{Su(this,Au,Cu.addListener(this.logsUpdated))})),yu(this,"componentWillUnmount",(()=>{var e,t;(e=this,t=Au,function(e,t){return t.get?t.get.call(e):t.value}(e,Tu(e,t,"get")))?.remove()})),yu(this,"logsUpdated",(()=>{const e=Cu.getLogsByComponent("Calendar");this.setState({logs:e,hasLoggedError:Iu(e)})})),yu(this,"hidePopup",(()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})})),yu(this,"togglePopup",(()=>{this.setState((e=>({isPopupOpen:!e.isPopupOpen})))})),yu(this,"openCalendarSettings",(()=>{se.Z.showSettings("calendar")})),yu(this,"getTooltip",(()=>(0,ue.Z)("Calendar Status")));const t=Cu.getLogsByComponent("Calendar");this.state={isPopupOpen:!1,lastPoll:0,logs:t,hasLoggedError:Iu(t)}}render(){if(W.ZP.isGuestSession(this.context.vivaldiWindowId)||this.props.prefValues[P.kMailIsTurnedOff])return null;const e=this.props.prefValues[P.kCalendarStatusButtonStyle],t=[{handler:this.openCalendarSettings,...(0,Mn.Z)("Calendar Settings")},{items:[{type:"checkbox",checked:"imageandtext"===e,handler:()=>st.Z.set(P.kCalendarStatusButtonStyle,"imageandtext"),...(0,Mn.Z)("Image and Text")},{type:"checkbox",checked:"image"===e,handler:()=>st.Z.set(P.kCalendarStatusButtonStyle,"image"),...(0,Mn.Z)("Image Only")},{type:"checkbox",checked:"text"===e,handler:()=>st.Z.set(P.kCalendarStatusButtonStyle,"text"),...(0,Mn.Z)("Text Only")}],...(0,Mn.Z)("Button Style")}];return s.createElement(ko,{badgeText:this.state.hasLoggedError?"!":"",className:"StatusButton "+(this.state.hasLoggedError?"StatusButton--HasError":""),disabled:!1,onClick:this.togglePopup,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,tooltip:this.getTooltip(),title:"image"!==e?(0,ue.Z)("Calendar Status"):void 0,image:"text"!==e?cn.bcq[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"StatusPopup",popupWidth:400,isPopupVisible:this.state.isPopupOpen,menu:()=>t,__source:{fileName:wu,lineNumber:154,columnNumber:7}},s.createElement(vu,{hidePopup:this.hidePopup,logs:this.state.logs,hasLoggedError:this.state.hasLoggedError,__source:{fileName:wu,lineNumber:181,columnNumber:9}}))}}yu(Zu,"contextType",Vs.Z);const Pu=(0,bi.Z)(Zu,ku),Du={getTimeFormat:()=>A.ZP.get(P.kClockShowSeconds)?"LTS":"LT",getDateFormat:()=>B.ZP.getShortDateFormat(),getTimeAndDateFormat:()=>Du.getDateFormat()+"  "+Du.getTimeFormat(),setTimer:(e,t)=>{const n=new Date;if(e.date<n){const t=new Date(e.date);t.setDate(t.getDate()+1),e.date=t.valueOf()}st.Z.set(P.kClockTimers,[...A.ZP.get(P.kClockTimers),{...e,type:t,id:lr()()}])},removeTimer:e=>{const t=A.ZP.get(P.kClockTimers).filter((t=>e!==t.id));st.Z.set(P.kClockTimers,t)},completeTimer:e=>{const t=A.ZP.get(P.kClockNotificationSound),n={title:Du.getName(e),silent:!1,requireInteraction:!0};if(t){new Audio(t).play()}(0,Zt.c)(n)},getName:e=>e.name||("alarm"===e.type?(0,ue.Z)("Alarm"):(0,ue.Z)("Countdown")),getActiveLabel:(e,t)=>{const n=g()(e.date),s=g().duration(n.diff(new Date)),i=s.hours(),r=s.minutes();let a;if(a="alarm"===e.type?n.format("LT"):i&&r?(0,ue.Z)("$1h $2m",[i,r]):i?(0,ue.Z)("$1h",[i]):r?(0,ue.Z)("$1m",[r]):(0,ue.Z)("Now"),t){return`${a} - ${Du.getName(e)}`}return a},getAlarm:e=>A.ZP.get(P.kClockTimers).find((t=>t.id===e&&"alarm"===t.type)),setAlarmWithPreset:e=>{const t=new Date;t.setSeconds(0),t.setHours(e.hour),t.setMinutes(e.minute);const n={name:e.name,date:t.valueOf()};Du.setTimer(n,"alarm")},getAlarmPreset:e=>A.ZP.get(P.kClockAlarmPresets).find((t=>t.id===e)),saveAlarmPreset:(e,t,n)=>{const s=lr()();st.Z.set(P.kClockAlarmPresets,[...A.ZP.get(P.kClockAlarmPresets),{name:e,hour:t,minute:n,id:s}])},removeAlarmPreset:e=>{const t=A.ZP.get(P.kClockAlarmPresets).filter((t=>t.id!==e));st.Z.set(P.kClockAlarmPresets,t)},getCountdown:e=>A.ZP.get(P.kClockTimers).find((t=>t.id===e&&"countdown"===t.type)),setCountdownWithPreset:e=>{const t=new Date,n={name:e.name,date:t.setSeconds(t.getSeconds()+e.seconds).valueOf()};Du.setTimer(n,"countdown")},getCountdownPreset:e=>A.ZP.get(P.kClockCountdownPresets).find((t=>t.id===e)),saveCountdownPreset:(e,t)=>{const n=lr()();st.Z.set(P.kClockCountdownPresets,[...A.ZP.get(P.kClockCountdownPresets),{name:e,seconds:t,id:n}])},removeCountdownPreset:e=>{const t=A.ZP.get(P.kClockCountdownPresets).filter((t=>t.id!==e));st.Z.set(P.kClockCountdownPresets,t)}},Mu=Du;var Ou=n(34155),xu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TimeInput.jsx";function Lu(){return Lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lu.apply(this,arguments)}function Ru(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Bu=["hour","minute","meridiem"],Fu=function(e){return 1===e.length?`0${e}`:e.length>2?e.slice(e.length-2):e};class Uu extends s.PureComponent{constructor(e){super(e),Ru(this,"_focused",!1),Ru(this,"hidden",s.createRef()),Ru(this,"fieldRefs",{hour:s.createRef(),minute:s.createRef(),meridiem:s.createRef()}),Ru(this,"hr12",""),Ru(this,"getFormat",(()=>this.props.format||g()().localeData().longDateFormat("LT"))),Ru(this,"setCache",(()=>{const[e="",t=""]=this.props.value.split(":");this.setState({hour:e,minute:t,dateCache:g()(`2010-10-20 ${this.props.value}`)})})),Ru(this,"processChange",(e=>{1!==this.state.hour.length&&1!==this.state.minute.length&&this.props.onChange(e)})),Ru(this,"select",(e=>{e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())})),Ru(this,"focus",(()=>{this.fieldRefs.hour.current?.focus()})),Ru(this,"onKeyDown",(e=>{const{key:t,target:n}=e,s=n.dataset.type;if(t){const n=Bu.indexOf(s);switch(t){case"ArrowRight":e.preventDefault();const t=n+1===Bu.length?n:n+1;return void this.fieldRefs[Bu.slice(t,t+1)[0]].current?.select();case"ArrowLeft":e.preventDefault();const s=0===n?n:n-1;return void this.fieldRefs[Bu.slice(s,s+1)[0]].current?.select()}}isNaN(Number(t))&&Ou.nextTick((()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}))})),Ru(this,"switchMeridiem",(e=>{const{target:t}=e,n="string"==typeof e.key?e.key:"",s=this.state.dateCache.set("minute",parseInt(this.state.minute)).add(12,"hour"),{type:i}=e.target.dataset;"meridiem"===i&&("ArrowUp"===n||"ArrowDown"===n||"wheel"===e.type&&t===document.activeElement||n.toLowerCase()===s.format("a")[0].toLowerCase())&&(e.preventDefault(),this.setInput(s),this.setState({dateCache:s})),!A.ZP.get(P.kCalendarAutoTabDatetime)||"a"!==n.toLowerCase()&&"p"!==n.toLowerCase()?this.onKeyDown(e):ri(document)})),Ru(this,"onChangeTime",(e=>{const{type:t}=e.target.dataset;let n=parseInt(e.target.value);const s=!e.nativeEvent.inputType,i=s&&this.props.step?parseInt(this.props.step):1;let r=!1;if(s&&"minute"===t&&n%i!=0){const e=parseInt(this.state.minute);r=!0,n<e?n=e-n%i:n-=n%i}const a="minute"===t?59:this.hr12?12:23,o="minute"===t?60:this.hr12?12:24;n>a?s?n%=o:this.hr12&&"hour"===t?(n%=o,this.state.dateCache.hour(n+12)):n=a:n<0&&(n=s?(n+o)%o:0);let l=n.toString();s&&(l=Fu(l)),r&&e.target.setAttribute("value",l),!s&&(10*n>a||e.target.value.length>=2)&&(l=Fu(l),this.skipToNextField(t)),this.setState({[t]:l},(()=>{let{hour:e}=this.state;this.hr12&&parseInt(e)<12&&"pm"===this.state.dateCache.format(this.hr12).toLowerCase()&&(e=parseInt(e)+12);const t=g()(this.state.dateCache).set("hour",parseInt(e)).set("minute",parseInt(this.state.minute));t.isValid()&&this.setInput(t)}))})),Ru(this,"setInput",(e=>{const t=this.hidden.current,n=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;t&&n&&(n.call(t,(0,B.mr)(e)),t.dispatchEvent(new Event("input",{bubbles:!0})))})),Ru(this,"onFocus",(e=>{if(e.persist(),e.preventDefault(),this._focused||!(e.target instanceof HTMLElement))return;const t=e.target.closest(".dateInput");Ou.nextTick((()=>{this.props.onFocus&&t instanceof HTMLElement&&si(t)&&(this._focused=!0,this.props.onFocus(e))}))})),Ru(this,"onBlur",(e=>{const{hour:t,minute:n}=this.state;(t.length<2||n.length<2)&&this.setState({hour:Fu(t),minute:Fu(n)}),e.preventDefault(),e.persist();const s=e.target.closest(".dateInput");Ou.nextTick((()=>{this.props.onBlur&&s instanceof HTMLElement&&!si(s)&&(this._focused=!1,this.props.onBlur(e))}))})),Ru(this,"keepFocusWithin",(e=>{e.preventDefault(),si(e.target.nextElementSibling)||this.focus()})),Ru(this,"renderFields",(()=>{const e=this.getFormat().replace(/[hma:]/gi,""),t={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.onKeyDown,onChange:this.onChangeTime,disabled:this.props.disabled};let n=this.state.hour;return 1!==n.length&&(n=this.hr12?Fu(((parseInt(this.state.hour)+11)%12+1).toString()):this.state.hour),s.createElement("span",{className:"faux time",__source:{fileName:xu,lineNumber:338,columnNumber:12}},s.createElement("input",Lu({},t,{className:"dateInputHour",tabIndex:this.props.tabIndex,type:"number",ref:this.fieldRefs.hour,"data-type":"hour",placeholder:(0,ue.Z)("hh"),value:n,__source:{fileName:xu,lineNumber:339,columnNumber:7}})),s.createElement("span",{className:"dateInputSeparator",__source:{fileName:xu,lineNumber:350,columnNumber:7}},":"),s.createElement("input",Lu({},t,{className:"dateInputMinute",type:"number",ref:this.fieldRefs.minute,"data-type":"minute",tabIndex:this.props.tabIndex,step:this.props.step,placeholder:(0,ue.Z)("time","mm"),value:this.state.minute,__source:{fileName:xu,lineNumber:351,columnNumber:7}})),this.hr12&&s.createElement("span",{__source:{fileName:xu,lineNumber:363,columnNumber:22}},e),this.hr12&&s.createElement("input",Lu({},t,{type:"text",ref:this.fieldRefs.meridiem,"data-type":"meridiem",className:"dateInputAmPm",tabIndex:this.props.tabIndex,placeholder:"--",value:this.state.dateCache.format(this.hr12).trim(),onKeyDown:this.switchMeridiem,onWheel:this.switchMeridiem,onChange:this.select,__source:{fileName:xu,lineNumber:365,columnNumber:9}})))}));const t=this.getFormat().replace(/[hm:]/gi,"").trim();t&&(this.hr12=t);const[n="",i=""]=this.props.value.split(":");this.state={hour:n,minute:i,dateCache:g()(`2010-10-20 ${this.props.value}`)}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}skipToNextField(e){const t=this.hr12?3:2,n=Bu.indexOf(e)+1;n===t&&A.ZP.get(P.kCalendarAutoTabDatetime)?ri(document):Ou.nextTick((()=>{const e=Bu[Math.min(n,t-1)];this.fieldRefs[e].current?.select()}))}render(){return s.createElement("span",{className:"dateInput time",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:xu,lineNumber:384,columnNumber:7}},s.createElement("input",{type:"time",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",value:this.props.value,disabled:this.props.disabled,onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:xu,lineNumber:389,columnNumber:9}}),this.renderFields())}}const Vu=Uu;var Hu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupAlarm.jsx";function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zu=[P.kKeyboardTabToAll,P.kClockAlarmPresets,P.kClockTimers];class Gu extends s.PureComponent{constructor(...e){super(...e),Wu(this,"state",{selectedPresetId:null,name:""}),Wu(this,"isPresetSelected",(e=>e.id===this.state.selectedPresetId&&e.name===this.state.name&&this.props.minute===e.minute&&this.props.hour===e.hour)),Wu(this,"setAlarm",(()=>{const e=this.state.name,t=new Date;t.setHours(this.props.hour),t.setMinutes(this.props.minute),t.setSeconds(0),this.setState({selectedPresetId:null,name:""},(()=>{this.props.hidePopup({name:e,date:t.valueOf()},"alarm")}))})),Wu(this,"setName",(e=>{this.setState({name:e.currentTarget.value})})),Wu(this,"selectPreset",(e=>{const t=e.name,n=e.id;this.props.setHour(e.hour),this.props.setMinute(e.minute),this.setState({name:t,selectedPresetId:n})})),Wu(this,"timeChange",(e=>{const t=e.currentTarget.value.split(":"),n=parseInt(t[0]),s=parseInt(t[1]);this.props.setHour(n),this.props.setMinute(s)})),Wu(this,"savePreset",(()=>{Mu.saveAlarmPreset(this.state.name,this.props.hour,this.props.minute)})),Wu(this,"setPreview",(()=>{this.props.setMode("alarm")}))}render(){const e=this.props.prefValues[P.kClockAlarmPresets],t=this.state.selectedPresetId&&Mu.getAlarmPreset(this.state.selectedPresetId),n=this.props.alarms,i=new Date;i.setHours(this.props.hour),i.setMinutes(this.props.minute);const r=[],a=[];return n.forEach((e=>{this.props.now.valueOf()<e.date?r.push(e):a.push(e)})),s.createElement("div",{className:"ClockPopup-Alarms",__source:{fileName:Hu,lineNumber:129,columnNumber:12}},s.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:Hu,lineNumber:130,columnNumber:7}},e.map((e=>{const n=t&&this.isPresetSelected(e);return s.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:Hu,lineNumber:133,columnNumber:18}},s.createElement("button",{className:bn()("ClockPopup-Preset",{"ClockPopup-Preset--selected":n}),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:Hu,lineNumber:134,columnNumber:13}},e.name),s.createElement("button",{className:bn()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":n}),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>Mu.removeAlarmPreset(e.id),dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:Hu,lineNumber:143,columnNumber:13}}))}))),s.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setAlarm,__source:{fileName:Hu,lineNumber:155,columnNumber:7}},s.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:Hu,lineNumber:159,columnNumber:9}},s.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:Hu,lineNumber:160,columnNumber:11}},s.createElement("h3",{__source:{fileName:Hu,lineNumber:161,columnNumber:13}},(0,ue.Z)("Time")),s.createElement(Vu,{className:"ClockPopup-DateInputField",onChange:this.timeChange,step:"5",title:(0,ue.Z)("Alarm time"),onFocus:this.setPreview,value:g()(i).format("HH:mm"),__source:{fileName:Hu,lineNumber:162,columnNumber:13}})),s.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:Hu,lineNumber:171,columnNumber:11}},s.createElement("h3",{__source:{fileName:Hu,lineNumber:172,columnNumber:13}},(0,ue.Z)("Alarm preset","Name")),s.createElement("input",{className:"ClockPopup-Name",type:"text",onFocus:this.setPreview,placeholder:(0,ue.Z)("Alarm preset","Name"),onChange:this.setName,value:this.state.name,__source:{fileName:Hu,lineNumber:173,columnNumber:13}}))),s.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:Hu,lineNumber:184,columnNumber:9}},s.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:(0,ue.Z)("Save Preset"),__source:{fileName:Hu,lineNumber:185,columnNumber:11}}),s.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:(0,ue.Z)("Start"),__source:{fileName:Hu,lineNumber:195,columnNumber:11}}))))}}const Ku=(0,bi.Z)(Gu,zu);var ju="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupCountdown.jsx";function Yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $u=[P.kKeyboardTabToAll,P.kClockCountdownPresets,P.kClockTimers];class Xu extends s.PureComponent{constructor(...e){super(...e),Yu(this,"state",{selectedPresetId:null,name:""}),Yu(this,"isPresetSelected",(e=>{const t=60*this.props.minute+3600*this.props.hour;return e.id===this.state.selectedPresetId&&e.name===this.state.name&&t===e.seconds})),Yu(this,"setCountdown",(()=>{const e=this.state.name,t=g()().add(this.props.hour,"hours").add(this.props.minute,"minutes").valueOf();this.setState({selectedPresetId:null,name:""},(()=>{this.props.hidePopup({name:e,date:t},"countdown")}))})),Yu(this,"setMinute",(e=>{const{value:t}=e.currentTarget,n=Math.min(Math.max(parseInt(t),0),59);this.props.setMinute(n)})),Yu(this,"setHour",(e=>{const{value:t}=e.currentTarget,n=Math.min(Math.max(parseInt(t),0),23);this.props.setHour(n)})),Yu(this,"decrementHour",(()=>{this.props.setHour(this.props.hour-1)})),Yu(this,"incrementHour",(()=>{this.props.setHour(this.props.hour+1)})),Yu(this,"decrementMinute",(()=>{this.props.setMinute(this.props.minute-1)})),Yu(this,"incrementMinute",(()=>{this.props.setMinute(this.props.minute+1)})),Yu(this,"setName",(e=>{this.setState({name:e.currentTarget.value})})),Yu(this,"setPreview",(()=>{this.props.setMode("countdown")})),Yu(this,"selectPreset",(e=>{const t=g().duration(e.seconds,"seconds"),n=e.name,s=t.hours(),i=t.minutes();this.props.setHour(s),this.props.setMinute(i),this.setState({name:n,selectedPresetId:e.id})})),Yu(this,"savePreset",(()=>{const e=60*this.props.hour*60+60*this.props.minute;Mu.saveCountdownPreset(this.state.name,e)}))}render(){const e=this.props.prefValues[P.kClockCountdownPresets],t=this.state.selectedPresetId&&Mu.getCountdownPreset(this.state.selectedPresetId),n=this.props.countdowns,i=[],r=[];return n.forEach((e=>{this.props.now.valueOf()<e.date?i.push(e):r.push(e)})),s.createElement("div",{className:"ClockPopup-Countdowns",__source:{fileName:ju,lineNumber:146,columnNumber:12}},s.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:ju,lineNumber:148,columnNumber:7}},e.map((e=>{const n=t&&this.isPresetSelected(e);return s.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:ju,lineNumber:151,columnNumber:18}},s.createElement("button",{className:bn()("ClockPopup-Preset",{"ClockPopup-Preset--selected":n}),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:ju,lineNumber:152,columnNumber:13}},e.name),s.createElement("button",{className:bn()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":n}),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>Mu.removeCountdownPreset(e.id),dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:ju,lineNumber:161,columnNumber:13}}))}))),s.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setCountdown,__source:{fileName:ju,lineNumber:173,columnNumber:7}},s.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:ju,lineNumber:177,columnNumber:9}},s.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:ju,lineNumber:178,columnNumber:11}},s.createElement("h3",{__source:{fileName:ju,lineNumber:179,columnNumber:13}},(0,ue.Z)("Hours")),s.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"hour",step:1,min:0,max:23,onFocus:this.setPreview,placeholder:(0,ue.Z)("hh"),onChange:this.setHour,value:this.props.hour,__source:{fileName:ju,lineNumber:180,columnNumber:13}}),s.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:ju,lineNumber:192,columnNumber:13}},s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],disabled:23===this.props.hour,onClick:this.incrementHour,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:ju,lineNumber:193,columnNumber:15}}),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],disabled:0===this.props.hour,type:"button",onClick:this.decrementHour,className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:ju,lineNumber:200,columnNumber:15}}))),s.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:ju,lineNumber:210,columnNumber:11}},s.createElement("h3",{__source:{fileName:ju,lineNumber:211,columnNumber:13}},(0,ue.Z)("Minutes")),s.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"minute",step:1,min:0,max:59,placeholder:(0,ue.Z)("time","mm"),onChange:this.setMinute,onFocus:this.setPreview,value:this.props.minute,__source:{fileName:ju,lineNumber:212,columnNumber:13}}),s.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:ju,lineNumber:224,columnNumber:13}},s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],disabled:59===this.props.minute,onClick:this.incrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:ju,lineNumber:225,columnNumber:15}}),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],disabled:0===this.props.minute,onClick:this.decrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:ju,lineNumber:232,columnNumber:15}}))),s.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:ju,lineNumber:241,columnNumber:11}},s.createElement("h3",{__source:{fileName:ju,lineNumber:242,columnNumber:13}},(0,ue.Z)("Countdown preset","Name")),s.createElement("input",{className:"ClockPopup-Name",type:"text",placeholder:(0,ue.Z)("Countdown preset","Name"),onChange:this.setName,onFocus:this.setPreview,value:this.state.name,__source:{fileName:ju,lineNumber:243,columnNumber:13}}))),s.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:ju,lineNumber:254,columnNumber:9}},s.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:(0,ue.Z)("Save Preset"),__source:{fileName:ju,lineNumber:255,columnNumber:11}}),s.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:(0,ue.Z)("Start"),__source:{fileName:ju,lineNumber:265,columnNumber:11}}))))}}const Qu=(0,bi.Z)(Xu,$u);var qu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopup.jsx";function Ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const em=[P.kKeyboardTabToAll,P.kClockShowSeconds,P.kClockMode];class tm extends s.PureComponent{constructor(e){super(e),Ju(this,"setAlarmHour",(e=>{this.setState({alarmHour:e})})),Ju(this,"setAlarmMinute",(e=>{this.setState({alarmMinute:e})})),Ju(this,"setCountdownHour",(e=>{this.setState({countdownHour:e})})),Ju(this,"setCountdownMinute",(e=>{this.setState({countdownMinute:e})})),Ju(this,"setMode",(e=>{st.Z.set(P.kClockMode,e),this.setState({previewMode:e})})),Ju(this,"setPreviewMode",(e=>{this.setState({previewMode:e})})),Ju(this,"getClockStyle",(()=>{const e=this.props.now.getHours(),t=this.props.prefValues[P.kClockShowSeconds]?this.props.now.getSeconds():0,n=this.props.now.getMinutes(),s=n/60,i={"--hourDeg":(e+s)%12*30-90+"deg","--minuteDeg":6*n+"deg","--secondDeg":this.props.prefValues[P.kClockShowSeconds]?6*t+360*n+60*e*360+"deg":"0deg"};if("countdown"===this.state.previewMode&&(i["--hourPercent"]=this.state.countdownHour<12?this.state.countdownHour/.12:100,i["--minutePercent"]=this.state.countdownMinute/.6),"alarm"===this.state.previewMode){const t=this.state.alarmHour>e?this.state.alarmHour-e:this.state.alarmHour-e+60,r=t>0?t-s:0,a=this.state.alarmMinute>n?this.state.alarmMinute-n:this.state.alarmMinute-n+60;i["--hourPercent"]=r<12?r/.12:100,i["--minutePercent"]=a/.6}return i})),Ju(this,"getInfoText",(e=>{const t=e.filter((e=>"alarm"===e.type)),n=e.filter((e=>"countdown"===e.type));return t.length>0&&n.length>0?(0,ue.Z)("$1 alarm","$1 alarms",[t.length])+", "+(0,ue.Z)("$1 countdown","$1 countdowns",[n.length]):t.length>0?(0,ue.Z)("$1 alarm","$1 alarms",[t.length]):n.length>0?(0,ue.Z)("$1 countdown","$1 countdowns",[n.length]):g()().format(Mu.getTimeAndDateFormat())})),this.state={alarmHour:13,alarmMinute:37,countdownHour:0,countdownMinute:0,previewMode:"alarm"===this.props.prefValues[P.kClockMode]?"alarm":"countdown"}}render(){const e=this.props.timers,t=e.filter((e=>this.props.now.valueOf()<e.date)),n=e.filter((e=>this.props.now.valueOf()>e.date));return s.createElement(s.Fragment,null,s.createElement("div",{className:"ClockPopup-Header",__source:{fileName:qu,lineNumber:155,columnNumber:7}},s.createElement("h2",{__source:{fileName:qu,lineNumber:156,columnNumber:9}},(0,ue.Z)("Clock")),s.createElement("div",{className:"info",__source:{fileName:qu,lineNumber:157,columnNumber:9}},this.getInfoText(t))),s.createElement("div",{className:"popup-scrollarea",__source:{fileName:qu,lineNumber:162,columnNumber:7}},s.createElement("div",{style:this.getClockStyle(),className:bn()("ClockPopup-BigClock",{"ClockPopup-BigClock--ShowSeconds":this.props.prefValues[P.kClockShowSeconds]}),dangerouslySetInnerHTML:{__html:cn.gep},__source:{fileName:qu,lineNumber:163,columnNumber:9}}),s.createElement("div",{className:"ClockPopup-Active",__source:{fileName:qu,lineNumber:170,columnNumber:9}},t.map(((e,t)=>s.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Active",__source:{fileName:qu,lineNumber:172,columnNumber:20}},s.createElement("button",{className:"ClockPopup-Timer-Name",__source:{fileName:qu,lineNumber:173,columnNumber:15}},Mu.getActiveLabel(e,!0)),s.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>Mu.removeTimer(e.id),dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:qu,lineNumber:176,columnNumber:15}}))))),n.length>0&&s.createElement(s.Fragment,null,s.createElement("h2",{__source:{fileName:qu,lineNumber:188,columnNumber:13}},(0,ue.Z)("Past Timers")),s.createElement("div",{className:"ClockPopup-Passed",__source:{fileName:qu,lineNumber:191,columnNumber:13}},n.map((e=>s.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Passed",__source:{fileName:qu,lineNumber:193,columnNumber:17}},s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"ClockPopup-Timer-Name",__source:{fileName:qu,lineNumber:197,columnNumber:19}},Mu.getName(e)),s.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>Mu.removeTimer(e.id),dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:qu,lineNumber:203,columnNumber:19}})))))),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:qu,lineNumber:215,columnNumber:9}},s.createElement("div",{className:"toolbar-group",__source:{fileName:qu,lineNumber:216,columnNumber:11}},s.createElement(ko,{title:(0,ue.Z)("Countdown"),isPressed:"countdown"===this.props.prefValues[P.kClockMode],onClick:()=>this.setMode("countdown"),__source:{fileName:qu,lineNumber:217,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Alarm"),isPressed:"alarm"===this.props.prefValues[P.kClockMode],onClick:()=>this.setMode("alarm"),__source:{fileName:qu,lineNumber:222,columnNumber:13}}))),"countdown"===this.props.prefValues[P.kClockMode]&&s.createElement(Qu,{now:this.props.now,hour:this.state.countdownHour,minute:this.state.countdownMinute,hidePopup:this.props.hidePopup,setHour:this.setCountdownHour,setMinute:this.setCountdownMinute,setMode:this.setPreviewMode,countdowns:e.filter((e=>"countdown"===e.type)),__source:{fileName:qu,lineNumber:230,columnNumber:11}}),"alarm"===this.props.prefValues[P.kClockMode]&&s.createElement(Ku,{now:this.props.now,alarms:e.filter((e=>"alarm"===e.type)),hidePopup:this.props.hidePopup,hour:this.state.alarmHour,minute:this.state.alarmMinute,setHour:this.setAlarmHour,setMode:this.setPreviewMode,setMinute:this.setAlarmMinute,__source:{fileName:qu,lineNumber:242,columnNumber:11}})))}}const nm=(0,bi.Z)(tm,em);var sm="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockButton.jsx";function im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rm=[P.kClockButtonShowDate,P.kClockButtonShowName,P.kClockButtonStyle,P.kClockAlarmPresets,P.kClockCountdownPresets,P.kClockNotificationSound,P.kClockShowSeconds,P.kClockTimers],am={"":(0,ue.Z)("other","None"),"../../resources/notification_ding.opus":(0,ue.Z)("Ding"),"../../resources/notification_rooster.opus":(0,ue.Z)("Rooster"),"../../resources/notification_tada.opus":(0,ue.Z)("Tada")};class om extends s.PureComponent{constructor(e){super(e),im(this,"buttonRef",s.createRef()),im(this,"heartbeat",(()=>{this.now=new Date;const e=this.now.getMinutes(),t=this.now.getHours();let n=!1;e!==this.state.minute&&t!==this.state.hour?(this.setState({hour:t,minute:e}),n=!0):e!==this.state.minute?(this.setState({minute:e}),n=!0):this.props.prefValues[P.kClockShowSeconds]&&(this.forceUpdate(),n=!0),this.props.prefValues[P.kClockTimers].forEach((e=>{Math.round(e.date/1e3)===Math.round(this.now.valueOf()/1e3)&&(n||this.forceUpdate(),Mu.completeTimer(e))}))})),im(this,"getActiveTimers",(()=>this.props.prefValues[P.kClockTimers].sort(((e,t)=>e.date-t.date)).filter((e=>this.now.valueOf()<e.date)))),im(this,"getFirstTimer",(()=>this.getActiveTimers()[0])),im(this,"getActiveMode",(()=>{const e=this.getFirstTimer();return e?e.type:"time"})),im(this,"hidePopup",((e,t)=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1},(()=>{e&&t&&setTimeout((()=>{Mu.setTimer(e,t)}),120)}))})),im(this,"togglePopup",(()=>{this.setState((e=>({isPopupOpen:!e.isPopupOpen})))})),im(this,"getClockStyle",(()=>{const e=this.getFirstTimer(),t=this.now.getHours(),n=this.now.getMinutes(),s={"--hourDeg":30*(t+n/60)-90+"deg","--minuteDeg":6*n+360*t+"deg"};if(e&&"countdown"===e.type){const t=g()(e.date).diff(this.now,"seconds"),n=g().duration(t,"seconds"),i=n.hours();s["--countdownHourPercent"]=i%12/.12,s["--countdownMinutePercent"]=i>0?100:n.minutes()/.6}return s})),im(this,"getButtonText",(()=>{const e="image"!==this.props.prefValues[P.kClockButtonStyle],t=this.props.prefValues[P.kClockButtonShowDate],n=this.props.prefValues[P.kClockButtonShowName],s=this.getFirstTimer();return e&&s&&"countdown"===s.type?Mu.getActiveLabel(s,n):e&&t?g()(this.now).format(Mu.getTimeAndDateFormat()):e?g()(this.now).format(Mu.getTimeFormat()):t?g()(this.now).format(Mu.getDateFormat()):void 0})),im(this,"getTooltip",(()=>{const e=this.getActiveTimers();let t=g()(this.now).format("LL LT");if(e.length>0){const n=e.filter((e=>"countdown"===e.type)),s=e.filter((e=>"alarm"===e.type));n.length>0&&(t+="\n\n"+(0,ue.Z)("Countdowns"),n.forEach((e=>{t+="\n"+Mu.getActiveLabel(e,!0)}))),s.length>0&&(t+="\n\n"+(0,ue.Z)("Alarms"),s.forEach((e=>{t+="\n"+Mu.getActiveLabel(e,!0)})))}return t})),this.now=new Date,this.state={isPopupOpen:!1,hour:this.now.getHours(),minute:this.now.getMinutes()}}componentDidMount(){this.intervalRef=setInterval(this.heartbeat,1e3)}componentWillUnmount(){clearInterval(this.intervalRef)}render(){const e=this.props.prefValues[P.kClockTimers].sort(((e,t)=>e.date-t.date)),t=this.getActiveMode(),n=this.getFirstTimer(),i=this.props.prefValues[P.kClockButtonStyle],r=[{visible:this.props.prefValues[P.kClockCountdownPresets].length>0,items:this.props.prefValues[P.kClockCountdownPresets].map((e=>({handler:()=>Mu.setCountdownWithPreset(e),...(0,Mn.Z)(e.name)}))),...(0,Mn.Z)("New Countdown")},{visible:this.props.prefValues[P.kClockAlarmPresets].length>0,items:this.props.prefValues[P.kClockAlarmPresets].map((e=>({handler:()=>Mu.setAlarmWithPreset(e),...(0,Mn.Z)(e.name)}))),...(0,Mn.Z)("New Alarm")},{items:[{type:"checkbox",checked:"imageandtext"===i,handler:()=>st.Z.set(P.kClockButtonStyle,"imageandtext"),...(0,Mn.Z)("Image and Text")},{type:"checkbox",checked:"image"===i,handler:()=>st.Z.set(P.kClockButtonStyle,"image"),...(0,Mn.Z)("Image Only")},{type:"checkbox",checked:"text"===i,handler:()=>st.Z.set(P.kClockButtonStyle,"text"),...(0,Mn.Z)("Text Only")}],...(0,Mn.Z)("Button Style")},{items:[{type:"checkbox",checked:this.props.prefValues[P.kClockButtonShowName],handler:()=>st.Z.set(P.kClockButtonShowName,!0),...(0,Mn.Z)("Show Name")},{type:"checkbox",checked:!this.props.prefValues[P.kClockButtonShowName],handler:()=>st.Z.set(P.kClockButtonShowName,!1),...(0,Mn.Z)("Time Only")}],...(0,Mn.Z)("Button Label")},{items:Object.keys(am).map((e=>{const t=am[e];return{type:"checkbox",checked:this.props.prefValues[P.kClockNotificationSound]===e,handler:()=>st.Z.set(P.kClockNotificationSound,e),...(0,Mn.Z)(t)}})),...(0,Mn.Z)("Notification Sound")},{type:"checkbox",checked:this.props.prefValues[P.kClockShowSeconds],handler:()=>st.Z.set(P.kClockShowSeconds,!this.props.prefValues[P.kClockShowSeconds]),...(0,Mn.Z)("Show Seconds")},{type:"checkbox",checked:this.props.prefValues[P.kClockButtonShowDate],handler:()=>st.Z.set(P.kClockButtonShowDate,!this.props.prefValues[P.kClockButtonShowDate]),...(0,Mn.Z)("Show Date")}];return s.createElement(ko,{className:`ClockButton ClockButton--${t}`,isOn:"time"!==t,onClick:this.togglePopup,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,ref:this.buttonRef,tooltip:this.getTooltip(),title:this.getButtonText(),image:"text"!==i?cn.kY4[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,popupWidth:210,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"ClockPopup",isPopupVisible:this.state.isPopupOpen,menu:()=>r,style:this.getClockStyle(),__source:{fileName:sm,lineNumber:330,columnNumber:12}},s.createElement(nm,{now:this.now,timers:e,firstTimer:n,hidePopup:this.hidePopup,__source:{fileName:sm,lineNumber:357,columnNumber:7}}))}}const lm=(0,bi.Z)(om,rm);var cm="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\game\\GameButton.jsx";function um(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mm=[P.kStartpageSpeedDialGameButtonShow];function dm(){return s.createElement("div",{className:"GamePreviewPopup",__source:{fileName:cm,lineNumber:80,columnNumber:11}},s.createElement("h2",{className:"GamePreviewPopup-HeaderText",__source:{fileName:cm,lineNumber:81,columnNumber:5}},(0,ue.Z)("Vivaldia Game")),s.createElement("button",{className:"GamePreviewPopup-SettingsButton",title:(0,ue.Z)("Settings"),dangerouslySetInnerHTML:{__html:cn.bqs.large},onClick:()=>{$.Z.openURL("vivaldi://settings/startpage/",{inBackground:!1})},__source:{fileName:cm,lineNumber:82,columnNumber:5}}),s.createElement("img",{className:"GamePreviewPopup-PreviewImage",src:"resources/game_screenshot.png",__source:{fileName:cm,lineNumber:88,columnNumber:5}}),s.createElement("button",{onClick:()=>{$.Z.openURL("vivaldi://game/",{inCurrent:!1,inBackground:!1})},className:"GamePreviewPopup-StartButton FormButton primary",title:(0,ue.Z)("Click to Play"),__source:{fileName:cm,lineNumber:89,columnNumber:5}},(0,ue.Z)("Click to Play")))}class hm extends s.PureComponent{constructor(...e){super(...e),um(this,"state",{isPopupOpen:!1,isIconHovered:!1}),um(this,"hidePopup",(()=>{this.setState({isPopupOpen:!1})})),um(this,"togglePopup",(()=>{this.setState((e=>({isPopupOpen:!e.isPopupOpen})))}))}render(){const{isStartPage:e}=this.props,t=this.state.isPopupOpen||this.state.isIconHovered&&e?"resources/game_icon_alternate.png":"resources/game_icon.png",n=[{type:"checkbox",handler:()=>{st.Z.toggle(P.kStartpageSpeedDialGameButtonShow,!0,!1)},checked:this.props.prefValues[P.kStartpageSpeedDialGameButtonShow],...(0,Mn.Z)("Show Game on Speed Dial")}];return s.createElement(ko,{className:"GameButton",customizeMenu:this.props.customizeMenu||void 0,tooltip:(0,ue.Z)("Vivaldia the game"),popupPosition:this.props.popupPosition||"above",name:this.props.name||"Game",image:cn.rNG[this.props.size||"large"],imagePath:e?t:void 0,mimeType:this.props.mimeType||"vivaldi/x-button-toolbar",mimeContent:this.props.name||"Game",menu:()=>n,hidePopup:this.hidePopup,onClick:this.togglePopup,isPopupVisible:this.state.isPopupOpen,menuOrigin:this.props.menuOrigin||void 0,popupPosition:this.props.popupPosition||"above",popupWidth:180,onDragStart:this.props.onDragStart||qo.default,onDragEnd:this.props.onDragEnd||void 0,onDrop:this.props.onDrop||void 0,onDragEnter:this.props.onDragEnter||void 0,onPointerEnter:()=>this.setState({isIconHovered:!0}),onPointerLeave:()=>this.setState({isIconHovered:!1}),popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",__source:{fileName:cm,lineNumber:130,columnNumber:12}},s.createElement(dm,{__source:{fileName:cm,lineNumber:155,columnNumber:7}}))}}const pm=(0,bi.Z)(hm,mm);var gm=n(68415),bm=n(82487),Nm="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\MailNavButton.jsx";function fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _m=[P.kMailIsTurnedOff,P.kMailSearchSortField,P.kMailViewLayout];class vm extends s.PureComponent{constructor(...e){super(...e),fm(this,"state",{canGoBack:!1,canGoForward:!1}),fm(this,"_isMounted",!1),fm(this,"updateNavigationButtons",(()=>{this.setState({canGoBack:ll.Z.canGoBack(),canGoForward:ll.Z.canGoForward()})})),fm(this,"checkForMail",(()=>{te.Z.checkForMail()})),fm(this,"_onHistorySelection",(e=>{K.Z.selectFolderFromHistory(e)})),fm(this,"_getHistoryMenuPromise",(e=>()=>{const t=ll.Z.getHistoryIndex(),n=V.ZP.unsafeGetActivePage().url,s=ll.Z.getSelectionHistory(),i="backward"===e?s.slice(0,t).reverse():s.slice(t+1),r="backward"===e?(e,t)=>e-t-1:(e,t)=>e+t+1,a=i.map(((e,s)=>({url:n,handler:this._onHistorySelection.bind(null,r(t,s)),...z.Z.makeNumberMnemonic(e.name,s)})));return Promise.resolve(a)})),fm(this,"selectHistoryItem",(e=>{K.Z.selectFolderFromHistory(e)})),fm(this,"rewindFolderSelection",(()=>{K.Z.selectFolderFromHistory(0)})),fm(this,"forwardToEndOfFolderSelection",(()=>{K.Z.selectFolderFromHistory(ll.Z.getSelectionHistory().length-1)})),fm(this,"toggleLayout",(()=>{const e=["horizontal","vertical","vertical_wide"],t=e.indexOf(this.props.prefValues[P.kMailViewLayout]),n=e[(t+1)%3];st.Z.set(P.kMailViewLayout,n)}))}componentDidMount(){this._isMounted=!0,gm.Z.addChangeListener(this.updateNavigationButtons),rl.Z.addChangeListener(this.updateNavigationButtons)}componentWillUnmount(){this._isMounted=!1,gm.Z.removeChangeListener(this.updateNavigationButtons),rl.Z.removeChangeListener(this.updateNavigationButtons)}render(){const{name:e,size:t}=this.props;switch(e){case"MailBack":return s.createElement(ko,{menuOrigin:this.props.menuOrigin,disabled:!this.state.canGoBack,onClick:bm.Z.back,tooltip:(0,ue.Z)("Go to previous page")+"\n"+(0,ue.Z)("Hold for history list"),menu:this._getHistoryMenuPromise("backward"),customizeMenu:this.props.customizeMenu,image:cn.mgF[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Nm,lineNumber:157,columnNumber:16}});case"MailForward":return s.createElement(ko,{menuOrigin:this.props.menuOrigin,disabled:!this.state.canGoForward,onClick:bm.Z.forward,tooltip:(0,ue.Z)("Go to next page")+"\n"+(0,ue.Z)("Hold for forward history list"),menu:this._getHistoryMenuPromise("forward"),image:cn.Zu[this.props.size],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Nm,lineNumber:174,columnNumber:16}});case"MailReload":return s.createElement(ko,{disabled:this.props.disabled,menuOrigin:this.props.menuOrigin,tooltip:(0,ue.Z)("Check for mail"),onClick:this.checkForMail,image:cn.QPh[this.props.size],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Nm,lineNumber:191,columnNumber:16}});case"MailViewLayout":const n=this.props.prefValues[P.kMailViewLayout];let i=cn.s2Z[t];return"vertical"===n?i=cn.Q_G[t]:"vertical_wide"===n&&(i=cn.hR9[t]),s.createElement(ko,{tooltip:(0,ue.Z)("Toggle View"),onClick:this.toggleLayout,disabled:this.props.prefValues[P.kMailIsTurnedOff],image:i,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Nm,lineNumber:214,columnNumber:16}});case"MailViewThreading":const r="threads"===this.props.prefValues[P.kMailSearchSortField];return s.createElement(ko,{tooltip:r?(0,ue.Z)("Hide Message Threads"):(0,ue.Z)("Show Message Threads"),onClick:()=>st.Z.set(P.kMailSearchSortField,r?"sentDate":"threads"),image:r?cn.AE4[t]:cn.eCP[t],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Nm,lineNumber:230,columnNumber:16}});default:return console.warn(`ToolbarButton “${e}” not found`),null}}}const Em=(0,bi.Z)(vm,_m);var Cm=n(51495);function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ym extends s.PureComponent{constructor(...e){super(...e),wm(this,"state",{query:this.props.filterQuery}),wm(this,"doDebounceSearch",(0,za.Z)((()=>{this.doSearch()}),200)),wm(this,"doSearch",(()=>{const e=this.state.query;K.Z.changeQuery(e),K.Z.updateQueryResults(e)})),wm(this,"onKeyDown",(e=>{if(A.ZP.get(P.kMailSearchOnEnter))switch(e.key){case"Enter":case"Return":this.doSearch()}})),wm(this,"onQueryChange",(()=>{const e=A.ZP.get(P.kMailSearchOnEnter)&&this.refs.searchInput.value?void 0:this.doDebounceSearch;this.setState({query:this.refs.searchInput.value},e)}))}render(){return s.createElement("input",{ref:"searchInput",className:"searchfield-input",type:"search",placeholder:(0,ue.Z)("mail","Search"),value:this.state.query,onChange:this.onQueryChange,onKeyDown:this.onKeyDown,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchField.jsx",lineNumber:58,columnNumber:7}})}}const Sm=ym;var Tm=n(26808),km="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchListButtons.jsx";function Im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Am=[P.kPanelsAsOverlayEnabled,P.kPanelsPosition,P.kMailViewDimensions,P.kMailViewLayout,P.kToolbarsMail,P.kToolbarsMailComposer,P.kToolbarsMailMessage];class Zm extends s.Component{constructor(...e){super(...e),Im(this,"state",{allMessages:!1,searchInput:"",showMailingLists:!0,showMailingListsButton:!1,showRead:!0,showReadButton:!1,showDeleted:!1,showDeletedButton:!1,showCustomFolder:!0,showCustomFolderButton:!1,showJunk:!1,showJunkButton:!1,showFeeds:!1,showFeedsButton:!1,showArchived:!1,showArchivedButton:!1,panelWidth:re.ZP.getPanelWidth(),panelButtonsVisible:re.ZP.getPanelButtonsVisible(),panelContentVisible:re.ZP.getPanelContentVisible(),folder:""}),Im(this,"panelStoreChanged",(()=>{this.setState({panelWidth:re.ZP.getPanelWidth(),panelButtonsVisible:re.ZP.getPanelButtonsVisible(),panelContentVisible:re.ZP.getPanelContentVisible()})})),Im(this,"checkIfAllMessages",(()=>{const e=gm.Z.getOptions();this.setState({allMessages:!!e.allMessages})})),Im(this,"selectedFolderChanged",(()=>{let e,t;const n=ll.Z.getSelectedFolder(),s=ll.Z.getOptionsFromHistory();if(!n)return;e=n.accountId,t=n.path;const i=Cm.C.getByFolder(e,t||he.ym),r=i?i.filterValue:{...pt.Z.getSearchListButtons("")};i&&this.updateViews(i),this.updateShowButtons(r);const a=s.forSender?pt.Z.getContactQuery(s.forSender):i?.filterValue.query;this.setState({folder:e+t,filterQuery:a})})),Im(this,"updateViews",(e=>{this.setState(pt.Z.getFilterOptions(e))})),Im(this,"_toggleFilter",(e=>{const t=ll.Z.getSelectedFolder(),n=t&&this.getOldFilter(t);n&&this.setState((t=>{const s=!t[e],i=(0,T.Uy)(n,(t=>{t.filterValue[e]=s}));return K.Z.putFilter(i,n),{[e]:s}}))})),Im(this,"toggleShowFeedsInUnread",(()=>{this._toggleFilter("showFeeds")})),Im(this,"toggleShowMailingLists",(()=>{this._toggleFilter("showMailingLists")})),Im(this,"toggleShowRead",(()=>{const e=ll.Z.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const n=(0,T.Uy)(t,(e=>{pt.Z.toggleExcludeFlag(e.filterValue,he.T4.SEEN)}));this.setState({showRead:!pt.Z.shouldExcludeFlag(n.filterValue,he.T4.SEEN)}),K.Z.putFilter(n,t)})),Im(this,"toggleShowDeleted",(()=>{const e=ll.Z.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const n=(0,T.Uy)(t,(e=>{const t=e.accountId,n=e.filterValue;pt.Z.isVirtualViewFolder(t)?pt.Z.shouldExcludeFlag(n,he.T4.DELETED)!==pt.Z.shouldExcludeFolderType(n,he.uT)?pt.Z.toggleExcludeFlag(n,he.T4.DELETED):(pt.Z.toggleExcludeFlag(n,he.T4.DELETED),pt.Z.toggleExcludeFolderType(n,he.uT)):(pt.Z.shouldIncludeAccountFolderType(n,t,he.uT)===pt.Z.shouldExcludeFlag(n,he.T4.DELETED)||pt.Z.toggleIncludeAccountFolderType(n,t,he.uT),pt.Z.toggleExcludeFlag(n,he.T4.DELETED))}));this.setState({showDeleted:!pt.Z.shouldExcludeFlag(n.filterValue,he.T4.DELETED)}),K.Z.putFilter(n,t)})),Im(this,"toggleShowJunk",(()=>{const e=ll.Z.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const n=(0,T.Uy)(t,(e=>{const t=e.accountId,n=e.filterValue;pt.Z.isVirtualViewFolder(t)?(pt.Z.toggleExcludeFolderType(n,he.Hd),this.setState({showJunk:!pt.Z.shouldExcludeFolderType(n,he.Hd)})):(pt.Z.toggleIncludeAccountFolderType(n,t,he.Hd),this.setState({showJunk:pt.Z.shouldIncludeAccountFolderType(n,t,he.Hd)}))}));K.Z.putFilter(n,t)})),Im(this,"toggleshowCustomFolder",(async()=>{const e=ll.Z.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const n=(0,T.Uy)(t,(e=>{const{accountId:t,filterValue:n}=e;pt.Z.isVirtualViewFolder(t)&&(pt.Z.toggleExcludeFolderType(n,he.Oi),this.setState({showCustomFolder:!pt.Z.shouldExcludeFolderType(n,he.Oi)}))}));K.Z.putFilter(n,t)})),Im(this,"toggleshowArchived",(()=>{const e=ll.Z.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const n=(0,T.Uy)(t,(e=>{const t=e.accountId,n=e.filterValue;pt.Z.isVirtualViewFolder(t)?(pt.Z.toggleExcludeFolderType(n,he.hn),this.setState({showArchived:!pt.Z.shouldExcludeFolderType(n,he.hn)})):(pt.Z.toggleIncludeAccountFolderType(n,t,he.hn),this.setState({showArchived:pt.Z.shouldIncludeAccountFolderType(n,t,he.hn)}))}));K.Z.putFilter(n,t)})),Im(this,"getOldFilter",(e=>Cm.C.getByFolder(e.accountId,e.path||he.ym))),Im(this,"updateShowButtons",(e=>{this.setState({showMailingListsButton:this._updateShowButton(e,"showMailingListsButton"),showReadButton:this._updateShowButton(e,"showReadButton"),showDeletedButton:this._updateShowButton(e,"showDeletedButton"),showJunkButton:this._updateShowButton(e,"showJunkButton"),showFeedsButton:this._updateShowButton(e,"showFeedsButton"),showCustomFolderButton:this._updateShowButton(e,"showCustomFolderButton"),showArchivedButton:this._updateShowButton(e,"showArchivedButton")})})),Im(this,"_updateShowButton",((e,t)=>!e.hasOwnProperty(t)||e[t])),Im(this,"getFieldStyle",(e=>{const{prefValues:t}=this.props,{panelWidth:n,panelButtonsVisible:s,panelContentVisible:i}=this.state,r="list"!==e?0:6,a=!t[P.kPanelsAsOverlayEnabled]&&"left"===t[P.kPanelsPosition],o=34*t["composer"===e?P.kToolbarsMailComposer:"message"===e?P.kToolbarsMailMessage:P.kToolbarsMail].indexOf("MailSearch");if("horizontal"===t[P.kMailViewLayout])return{flexBasis:"list"!==e?0:360,marginRight:r};const l=a?o>n?o-n:0:o,c=t[P.kMailViewDimensions],u=t[P.kPanelsAsOverlayEnabled]&&s?i?34:n:0,m="vertical_wide"===t[P.kMailViewLayout];return{width:"list"!==e?0:Math.min(Math.max((m?c.widthWide:c.width)-l+u-(a&&i?0:r),270),800),marginRight:r}}))}componentDidMount(){re.ZP.addChangeListener(this.panelStoreChanged),ll.Z.addChangeListener(this.selectedFolderChanged),gm.Z.addChangeListener(this.checkIfAllMessages),this.selectedFolderChanged(),this.checkIfAllMessages()}componentWillUnmount(){re.ZP.removeChangeListener(this.panelStoreChanged),gm.Z.removeChangeListener(this.checkIfAllMessages),ll.Z.removeChangeListener(this.selectedFolderChanged)}getLeftSpacerStyle(e){const{prefValues:t}=this.props,{panelWidth:n}=this.state,s="list"!==e?0:6,i=!t[P.kPanelsAsOverlayEnabled]&&"left"===t[P.kPanelsPosition],r=34*t["composer"===e?P.kToolbarsMailComposer:"message"===e?P.kToolbarsMailMessage:P.kToolbarsMail].indexOf("MailSearch");return"horizontal"===t[P.kMailViewLayout]?{width:Math.max(i?n-r:s,s),flexShrink:5}:{width:i?Math.max(n-r,s):s,flexShrink:5}}render(){const e=this.state.allMessages,t=V.ZP.unsafeGetActivePage().url;let n="list";return(0,Tm.vE)(t)?n="composer":(0,Tm.Ds)(t)&&(n="message"),s.createElement(s.Fragment,null,s.createElement("div",{style:this.getLeftSpacerStyle(n),__source:{fileName:km,lineNumber:436,columnNumber:9}}),s.createElement("div",{className:"toolbar",style:this.getFieldStyle(n),__source:{fileName:km,lineNumber:437,columnNumber:9}},"list"===n&&s.createElement("div",{className:"SearchField",__source:{fileName:km,lineNumber:439,columnNumber:13}},s.createElement(Sm,{key:this.state.folder+(this.state.filterQuery||""),filterQuery:this.state.filterQuery||"",__source:{fileName:km,lineNumber:440,columnNumber:15}}),s.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:km,lineNumber:445,columnNumber:15}},this.state.showReadButton&&!e&&s.createElement(ko,{isOn:this.state.showRead,tooltip:(0,ue.Z)("Show Read"),onClick:this.toggleShowRead,image:this.state.showRead?cn.tD0:cn.LDV.small,__source:{fileName:km,lineNumber:447,columnNumber:19}}),this.state.showCustomFolderButton&&!e&&s.createElement(ko,{isOn:this.state.showCustomFolder,tooltip:(0,ue.Z)("Show Messages from Custom IMAP Folders"),onClick:this.toggleshowCustomFolder,image:this.state.showCustomFolder?cn.Hj9:cn.dMx.small,__source:{fileName:km,lineNumber:457,columnNumber:19}}),this.state.showMailingListsButton&&!e&&s.createElement(ko,{isOn:this.state.showMailingLists,tooltip:(0,ue.Z)("Show Mailing Lists"),onClick:this.toggleShowMailingLists,image:this.state.showMailingLists?cn.ibx:cn.GAD.small,__source:{fileName:km,lineNumber:468,columnNumber:19}}),this.state.showFeedsButton&&!e&&s.createElement(ko,{isOn:this.state.showFeeds,tooltip:(0,ue.Z)("Show Feeds"),onClick:this.toggleShowFeedsInUnread,image:this.state.showFeeds?cn.hCY:cn.ZU_.small,__source:{fileName:km,lineNumber:478,columnNumber:19}}),this.state.showJunkButton&&!e&&s.createElement(ko,{isOn:this.state.showJunk,tooltip:(0,ue.Z)("Show Junk"),onClick:this.toggleShowJunk,image:this.state.showJunk?cn.K30:cn.Qwh.small,__source:{fileName:km,lineNumber:488,columnNumber:19}}),this.state.showDeletedButton&&!e&&s.createElement(ko,{isOn:this.state.showDeleted,tooltip:(0,ue.Z)("Show Trash"),onClick:this.toggleShowDeleted,image:this.state.showDeleted?cn.Y41:cn.nre.small,__source:{fileName:km,lineNumber:498,columnNumber:19}}),this.state.showArchivedButton&&!e&&s.createElement(ko,{isOn:this.state.showArchived,tooltip:(0,ue.Z)("Show Archived"),onClick:this.toggleshowArchived,image:this.state.showArchived?cn.sBl:cn._w1.small,__source:{fileName:km,lineNumber:508,columnNumber:19}})))))}}const Pm=(0,bi.Z)(Zm,Am);var Dm=n(47513),Mm=n.n(Dm),Om=n(42151);class xm extends(S()){getInitialState(){return{accounts:new Map,maxSles:5}}reduce(e,t){switch(t.actionType){case"MAIL_INDEX_UPDATE":m.Z.waitFor([Cm.C.dispatchToken]);const{addedSles:n,removedSles:s,sleUpdates:i}=t.updates;return(0,T.ZP)(e,(e=>{s&&function(e,t){const n=new Set(e);t.accounts.forEach((e=>{e.sles=e.sles.filter((({id:e})=>!n.has(e)))}))}(s,e),n&&Lm(n,e),i&&function(e,t){for(const n of t.accounts){const t=n[1];for(const n of t.sles)for(const t of e)t.id===n.id&&t.updates.sources&&t.updates.sources.forEach(((e,t)=>{if(e){const s=n.sources.get(t);if(s)n.sources.set(t,{...s,...e});else{const{read:s,deleted:i,internal:r}=e;void 0!==s&&void 0!==i&&void 0!==r&&n.sources.set(t,{read:s,deleted:i,internal:r})}}else n.sources.delete(t)}))}}(i,e)}));case"MAIL_INIT_INDEX_BATCH":return m.Z.waitFor([Cm.C.dispatchToken]),(0,T.ZP)(e,(e=>{Lm(t.sleBatch,e)}));case"MAIL_STOP":return this.getInitialState();default:return e}}getSles(e){const{accounts:t}=this.getState(),n=[...t.keys()],s=new Map(n.map((e=>[e,0]))),i=[];for(;i.length<e;){let e,r;for(const i of n){const n=s.get(i);if(void 0===n)throw new Error("account index not found "+i);const a=t.get(i);if(void 0===a)throw new Error("account data not found "+i);const o=a.sles[n];o&&((!r||o.sentDate>r.sentDate)&&(r=o,e=i))}if(!e||!r)break;{const t=s.get(e);if(void 0===t)throw new Error("account index not found "+e);s.set(e,t+1),i.push(r)}}return i}getSlesByAccountId(e,t){const n=this.getState().accounts.get(e);if(!n)throw new Error("Account "+e+" not found");const{sles:s}=n;return s.slice(0,t)}}function Lm(e,t){const{accounts:n,maxSles:s}=t;for(const t of e){const e=new Set,i=la.Z.getByIds(t.sourceFilterIds);for(const t of i){const{accountId:n,path:s}=t;ca.Z.getFolderType(n,s)===he.e9&&e.add(n)}for(const i of e){let e=n.get(i);e||(e={sles:[]},n.set(i,e));const{sles:r}=e;let a=Mm()(r,t,((e,t)=>t.sentDate-e.sentDate));a<0&&(a=-a-1),a<s&&(r.splice(a,0,(0,Om.Z)(t)),r.length>s&&r.pop())}}}const Rm=new xm(m.Z),Bm="change",Fm=new Set,Um=new Set,Vm=new Map,Hm=new class extends(Bi()){emitChange(e){this.emit(Bm,e)}addChangeListener(e){this.on(Bm,e)}removeChangeListener(e){this.removeListener(Bm,e)}hasError(e){return this.isDisconnected(e)&&void 0!==this.getErrorMessage(e)}hasAuthenticationError(e){if(this.hasError(e)){const t=this.getErrorMessage(e);return!!t&&t.toString().toLowerCase().indexOf("authentication")>=0}return!1}isDisconnected(e){return Um.has(e)}isConnecting(e){return Fm.has(e)}isConnected(e){return!this.isConnecting(e)&&!this.isDisconnected(e)}getErrorMessage(e){return Vm.get(e)}};m.Z.register((e=>{switch(e.actionType){case"MAIL_IS_DISCONNECTED":{const{accountId:t,isDisconnected:n,errorMessage:s}=e;let i=!1;n?(i=!Um.has(t),Um.add(t)):(i=Um.has(t),Um.delete(t)),s?Vm.set(t,s):Vm.delete(t),i&&Hm.emitChange({accountId:t,isDisconnected:n});break}case"MAIL_IS_CONNECTING":{const{accountId:t,isConnecting:n}=e;let s=!1;n?(s=!Fm.has(t),Fm.add(t)):(s=Fm.has(t),Fm.delete(t)),s&&Hm.emitChange({accountId:t,isConnecting:n});break}}}));const Wm=Hm;Gm.defaultProps={size:32};const zm="/resources/vivaldi_mail_default.png";function Gm(e){let t=e.emailAddress.split("@")[1];return t="gmail.com"===t?"ssl.gstatic.com/ui/v1/icons/mail/images/favicon5.ico":"googleusercontent.com"===t?"google.com/favicon.ico":Os(t),s.createElement(Ls,{size:e.size,className:e.className,url:t?`https://${t}`:zm,fallbackUrl:zm,style:e.style,loadType:"faviconSkipCache",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFavicon.jsx",lineNumber:31,columnNumber:5}})}const Km=Gm;var jm=n(51110),Ym=n(12006),$m=n(31054),Xm=n(81270),Qm="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailStatusPopup.jsx";function qm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jm=[P.kKeyboardTabToAll];class ed extends s.PureComponent{constructor(e){super(e),qm(this,"checkIfMailTabActive",(()=>{const e=V.ZP.unsafeGetActivePage()?.get("isMailPage");this.setState({isMailTabActive:e})})),qm(this,"handleActiveMessageStoreChange",(()=>{this.updateCurrentMessageDebounced()})),qm(this,"updateCurrentMessageDebounced",(0,za.Z)((()=>{this.setState({activeListEntry:rl.Z.getActiveListEntry()})}))),qm(this,"_selectPane",(e=>{st.Z.set(P.kMailStatusSelectedPane,e),this.setState({selectedPane:e})})),qm(this,"_openMessage",(async e=>{const t=await St.Z.messages.get(e);this.props.hidePopup(),(0,Xm.Z)(t)})),qm(this,"_authenticate",(async e=>{const t=await Ym.Z.loadAccount(e);se.Z.showMailAuthenticationDialog({account:t}),this.props.hidePopup()})),qm(this,"_viewLog",(()=>{b.Z.devtoolsPrivate.toggleDevtools("console"),this.props.hidePopup()})),qm(this,"_rebuildMailSearchDB",(async()=>{const e={title:(0,ue.Z)("title","Rebuild Mail Search Database"),body:(0,ue.Z)("Note: This task could take several minutes."),actions:[{title:(0,ue.Z)("Rebuild"),action:"confirm"}],cancelAction:{title:(0,ue.Z)("Cancel"),action:"cancel",default:!0}},{action:t}=await se.Z.showModal({modal:e});"cancel"!==t&&b.Z.mailPrivate.rebuildDatabase()})),qm(this,"_openAccount",(async e=>{this.props.hidePopup()})),qm(this,"openMailSettings",(()=>{se.Z.showSettings("mail"),this.props.hidePopup()})),qm(this,"getContextMenu",(()=>{const e=A.ZP.get(P.kMailAccounts),t=[he.of].concat(e.map((e=>e.MAIL_EMAIL)));return[{handler:this.openMailSettings,...(0,Mn.Z)("Mail Settings")},{handler:this._viewLog,...(0,Mn.Z)("View Log")},{handler:this._rebuildMailSearchDB,...(0,Mn.Z)("command","Rebuild Mail Search Database")},{...(0,Mn.Z)("Select Folder"),items:t.map((e=>({type:"checkbox",checked:this.props.accountId===e,handler:()=>this.props.updateRecentMessages(e),...(0,Mn.Z)(e)})))}]})),this.state={activeListEntry:rl.Z.getActiveListEntry(),isMailTabActive:V.ZP.unsafeGetActivePage()?.get("isMailPage"),selectedPane:A.ZP.get(P.kMailStatusSelectedPane)}}componentDidMount(){rl.Z.addChangeListener(this.handleActiveMessageStoreChange),V.ZP.addChangeListener(this.checkIfMailTabActive)}componentWillUnmount(){rl.Z.removeChangeListener(this.handleActiveMessageStoreChange),V.ZP.removeChangeListener(this.checkIfMailTabActive)}render(){const e=A.ZP.get(P.kMailAccounts),t=this.state.activeListEntry;return s.createElement(s.Fragment,null,s.createElement("div",{className:"StatusPopup-Header",__source:{fileName:Qm,lineNumber:216,columnNumber:7}},s.createElement("h2",{__source:{fileName:Qm,lineNumber:217,columnNumber:9}},(0,ue.Z)("Mail Status")),s.createElement("div",{className:"toolbar button-popup-header-toolbar",__source:{fileName:Qm,lineNumber:220,columnNumber:9}},s.createElement(ko,{onClick:()=>{se.Z.showMail(),this.props.hidePopup()},disabled:this.state.isMailTabActive,menuOrigin:"bottomLeft",title:(0,ue.Z)("Show Mail"),__source:{fileName:Qm,lineNumber:221,columnNumber:11}}),s.createElement(ko,{className:"StatusPopup-ButtonCog",menuOrigin:"bottomLeft",image:cn.bqs.small,menu:this.getContextMenu,tooltip:(0,ue.Z)("Recent message settings"),__source:{fileName:Qm,lineNumber:230,columnNumber:11}}))),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Qm,lineNumber:240,columnNumber:7}},s.createElement("div",{className:"toolbar-group equal-width",__source:{fileName:Qm,lineNumber:241,columnNumber:9}},s.createElement(ko,{title:(0,ue.Z)("Accounts"),isPressed:"accounts"===this.state.selectedPane,onClick:()=>this._selectPane("accounts"),__source:{fileName:Qm,lineNumber:242,columnNumber:11}}),s.createElement(ko,{title:(0,ue.Z)("Messages"),isPressed:"messages"===this.state.selectedPane,onClick:()=>this._selectPane("messages"),__source:{fileName:Qm,lineNumber:247,columnNumber:11}}),s.createElement(ko,{title:(0,ue.Z)("Logs"),isPressed:"logs"===this.state.selectedPane,onClick:()=>this._selectPane("logs"),badgeText:"logs"!==this.state.selectedPane&&this.props.hasLoggedError?"!":"",__source:{fileName:Qm,lineNumber:252,columnNumber:11}}))),s.createElement("div",{className:"StatusPopup-Content",__source:{fileName:Qm,lineNumber:264,columnNumber:7}},"accounts"===this.state.selectedPane&&s.createElement("div",{className:"StatusPopup-ContentPane",__source:{fileName:Qm,lineNumber:266,columnNumber:9}},s.createElement("div",{className:"StatusPopup-List",__source:{fileName:Qm,lineNumber:267,columnNumber:11}},e.map((e=>{const t=e.MAIL_EMAIL;let n;return e.offline?n="offline":Wm.isConnected(t)?n="connected":Wm.isConnecting(t)?n="connecting":Wm.hasAuthenticationError(t)?n="needsAuth":Wm.hasError(t)&&(n="hasError"),s.createElement(s.Fragment,{key:t,__source:{fileName:Qm,lineNumber:283,columnNumber:22}},s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>this._openAccount(t),className:"StatusPopup-Account",__source:{fileName:Qm,lineNumber:284,columnNumber:17}},s.createElement(Km,{emailAddress:t,size:16,className:"StatusPopup-AccountIcon",__source:{fileName:Qm,lineNumber:291,columnNumber:19}}),s.createElement("div",{className:"StatusPopup-AccountName",__source:{fileName:Qm,lineNumber:296,columnNumber:19}},t),s.createElement("div",{className:"StatusPopup-AccountStatus",__source:{fileName:Qm,lineNumber:299,columnNumber:19}},"offline"===n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Success",title:(0,ue.Z)("Offline"),dangerouslySetInnerHTML:{__html:cn.bBo.small},__source:{fileName:Qm,lineNumber:301,columnNumber:23}}),(0,ue.Z)("Offline")),"connected"===n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Success",title:(0,ue.Z)("Connected"),dangerouslySetInnerHTML:{__html:cn.JLz},__source:{fileName:Qm,lineNumber:309,columnNumber:23}}),(0,ue.Z)("Connected")),"connecting"===n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Warning",title:(0,ue.Z)("Connecting..."),dangerouslySetInnerHTML:{__html:cn.rvX.small},__source:{fileName:Qm,lineNumber:317,columnNumber:23}}),(0,ue.Z)("Connecting...")),"needsAuth"===n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Error",title:(0,ue.Z)("Authentication Error"),dangerouslySetInnerHTML:{__html:cn.viW},__source:{fileName:Qm,lineNumber:325,columnNumber:23}}),(0,ue.Z)("Authentication Error")),"hasError"===n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Error",title:(0,ue.Z)("Error"),dangerouslySetInnerHTML:{__html:cn.viW},__source:{fileName:Qm,lineNumber:333,columnNumber:23}}),(0,ue.Z)("Error")),!n&&s.createElement(s.Fragment,null,s.createElement("span",{className:"StatusPopup-AccountStatus--Warn",title:(0,ue.Z)("Unknown"),dangerouslySetInnerHTML:{__html:cn.GH$},__source:{fileName:Qm,lineNumber:341,columnNumber:23}}),(0,ue.Z)("Status Unknown")),"needsAuth"===n&&s.createElement("a",{className:"StatusPopup-AccountStatusRetry",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this._authenticate.bind(this,t),href:"",__source:{fileName:Qm,lineNumber:349,columnNumber:23}},(0,ue.Z)("Retry")))))}))),s.createElement("div",{className:"StatusPopup-Footer",__source:{fileName:Qm,lineNumber:363,columnNumber:11}})),"messages"===this.state.selectedPane&&s.createElement("div",{className:"StatusPopup-ContentPane",__source:{fileName:Qm,lineNumber:369,columnNumber:9}},s.createElement(s.Fragment,null,this.props.recentMessages.length>0&&s.createElement("h3",{__source:{fileName:Qm,lineNumber:372,columnNumber:15}},this.props.accountId===he.of?(0,ue.Z)("Recent in All Messages"):(0,ue.Z)("Recent in $1",[(0,ue.Z)(this.props.accountId)])),s.createElement("div",{className:"StatusPopup-List",__source:{fileName:Qm,lineNumber:380,columnNumber:13}},this.props.recentMessages.map((e=>{const t=$m.Z.get(e.toIds),n=t.length>0?t[0].address:"",i=$m.Z.get(e.fromIds),r=i.length>0?i[0].address:"";return s.createElement("button",{key:e.id,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:bn()("StatusPopup-Mail",{"StatusPopup-Mail--Unread":!jm.Z.call(e.sources)}),onClick:()=>this._openMessage(e.id),__source:{fileName:Qm,lineNumber:387,columnNumber:24}},s.createElement(Km,{emailAddress:n,size:16,className:"StatusPopup-MailIcon",__source:{fileName:Qm,lineNumber:397,columnNumber:19}}),s.createElement("div",{className:"StatusPopup-MailTitle",__source:{fileName:Qm,lineNumber:402,columnNumber:19}},e.subject),s.createElement("div",{className:"StatusPopup-MailReceiver",__source:{fileName:Qm,lineNumber:405,columnNumber:19}},r," ➝ ",n),s.createElement("div",{className:"StatusPopup-MailDate",__source:{fileName:Qm,lineNumber:408,columnNumber:19}},g()(e.sentDate).fromNow()))}))),t&&s.createElement(s.Fragment,null,s.createElement("dl",{className:"StatusPopup-MailDetail",__source:{fileName:Qm,lineNumber:417,columnNumber:17}},s.createElement("dt",{__source:{fileName:Qm,lineNumber:418,columnNumber:19}},(0,ue.Z)("Current Message")),s.createElement("dd",{__source:{fileName:Qm,lineNumber:419,columnNumber:19}},t.subject),s.createElement("dt",{__source:{fileName:Qm,lineNumber:420,columnNumber:19}},(0,ue.Z)("Internal ID")),s.createElement("dd",{__source:{fileName:Qm,lineNumber:421,columnNumber:19}},t.id),s.createElement("dt",{__source:{fileName:Qm,lineNumber:422,columnNumber:19}},(0,ue.Z)("Thread ID")),s.createElement("dd",{__source:{fileName:Qm,lineNumber:423,columnNumber:19}},t.threadKey),[...t.sources.entries()].map((([e,t])=>{const n=la.Z.get(e);if(n)return s.createElement(s.Fragment,{key:e,__source:{fileName:Qm,lineNumber:427,columnNumber:31}},s.createElement("dt",{__source:{fileName:Qm,lineNumber:428,columnNumber:25}},(0,ue.Z)("Filter ID: $1",[e])),s.createElement("dd",{__source:{fileName:Qm,lineNumber:431,columnNumber:25}},s.createElement("span",{__source:{fileName:Qm,lineNumber:432,columnNumber:27}},t.read?(0,ue.Z)("Read"):(0,ue.Z)("Unread")),", ",s.createElement("span",{__source:{fileName:Qm,lineNumber:437,columnNumber:27}},t.deleted?(0,ue.Z)("Deleted"):(0,ue.Z)("Not deleted")),", ",s.createElement("span",{__source:{fileName:Qm,lineNumber:442,columnNumber:27}},t.internal?(0,ue.Z)("Internal"):(0,ue.Z)("External")),s.createElement("br",{__source:{fileName:Qm,lineNumber:446,columnNumber:27}}),s.createElement("span",{__source:{fileName:Qm,lineNumber:447,columnNumber:27}},`${n.accountId} ${n.path}`)))}))))),s.createElement("div",{className:"StatusPopup-Footer",__source:{fileName:Qm,lineNumber:458,columnNumber:11}},s.createElement(ko,{onClick:()=>te.Z.checkForMail(),title:(0,ue.Z)("Check for New Messages"),__source:{fileName:Qm,lineNumber:459,columnNumber:13}}))),"logs"===this.state.selectedPane&&s.createElement("div",{className:"StatusPopup-ContentPane",__source:{fileName:Qm,lineNumber:467,columnNumber:9}},s.createElement(iu,{logs:this.props.logs,component:"Mail",__source:{fileName:Qm,lineNumber:468,columnNumber:11}}))))}}qm(ed,"contextType",Vs.Z);const td=(0,bi.Z)(ed,Jm);var nd=n(65741);const sd=[P.kMailCountersPanelSwitcherEnabled,P.kMailCountersPanelUnseenEnabled];function id(e){if(e>0)return e>9999?(0,ue.Z)("$1 K",[Math.floor(e/1e3)]):e.toString()}const rd=(0,bi.Z)((function(e){const[t,n]=(0,s.useState)(0),[i,r]=(0,s.useState)(0);if((0,s.useEffect)((()=>{function e(e){if("counters"!==e.target)return;const t=Cm.C.getCounters("All Messages","Unread");n(t?t.unseen:0),r(t?t.unread:0)}return Cm.C.addChangeListener(e),function(){Cm.C.removeChangeListener(e)}}),[]),!e.prefValues[P.kMailCountersPanelSwitcherEnabled])return null;const a=id(e.prefValues[P.kMailCountersPanelUnseenEnabled]?t:i);if(a){const t=e.prefValues[P.kMailCountersPanelUnseenEnabled]?{}:(0,go.E$)(e.theme,e.theme.colorBg);return s.createElement("span",{className:"button-badge",style:t,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailUnseenCounter.jsx",lineNumber:76,columnNumber:7}},a)}return null}),sd);var ad="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailStatusButton.jsx";function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ld(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ud(e,t,"get"))}function cd(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ud(e,t,"set"),n),n}function ud(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const md=[P.kMailAccounts,P.kMailCountersPanelUnseenEnabled,P.kMailCountersStatusButtonEnabled,P.kMailIsTurnedOff,P.kMailStatusButtonStyle,P.kRssSettings];function dd(){const e=Cm.C.getCounters("All Messages","Unread");return{unseen:e?.unseen||0,unread:e?.unread||0}}function hd(e){return e.some((e=>"error"===e.level))}function pd(){const e=dd(),t=Cu.getLogsByComponent("Mail");return{accountId:he.of,isMailWindow:re.ZP.getIsMailWindow(),isPopupOpen:!1,recentMessages:[],logs:t,hasLoggedError:hd(t),...e,windowStyle:{}}}var gd=new WeakMap,bd=new WeakMap,Nd=new WeakMap,fd=new WeakMap;class _d extends s.PureComponent{constructor(e,t){super(e),gd.set(this,{writable:!0,value:null}),bd.set(this,{writable:!0,value:!1}),Nd.set(this,{writable:!0,value:void 0}),fd.set(this,{writable:!0,value:void 0}),od(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId);(0,nd.default)(e,this.state.windowStyle)||this.setState({windowStyle:e})})),od(this,"logsUpdated",(()=>{const e=Cu.getLogsByComponent("Mail");this.setState({logs:e,hasLoggedError:hd(e)})})),od(this,"getMessageCount",(()=>this.props.prefValues[P.kMailCountersPanelUnseenEnabled]?this.state.unseen:this.state.unread)),od(this,"handleMailFiltersStoreChange",(e=>{if("counters"!==e.target);else{const e=dd();this.setState(e)}})),od(this,"handleMailLatestStoreChange",(()=>{this.updateRecentMessagesDebounced(this.state.accountId)})),od(this,"handlePanelStoreChange",(()=>{this.setState({isMailWindow:re.ZP.getIsMailWindow()})})),od(this,"hidePopup",(()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})})),od(this,"togglePopup",(()=>{this.setState((e=>({isPopupOpen:!e.isPopupOpen})))})),od(this,"openMailAccountSheet",(()=>{se.Z.showMailAccountDialog()})),od(this,"openMailSettings",(()=>{se.Z.showSettings("mail")})),od(this,"updateRecentMessages",(e=>{try{if(ld(this,bd)){const t=(e===he.of?Rm.getSles(5):Rm.getSlesByAccountId(e,5)).map((e=>Cm.C.createListEntry(e,[])));this.setState({accountId:e,recentMessages:t})}}catch(e){console.error(e)}})),od(this,"updateRecentMessagesDebounced",(0,za.Z)((e=>this.updateRecentMessages(e)),500,{leading:!0,maxWait:1e3})),od(this,"getTooltip",(()=>{const e=this.props.prefValues[P.kMailIsTurnedOff],t=this.props.prefValues[P.kMailAccounts].length+this.props.prefValues[P.kRssSettings].length>0;if(e||!t)return(0,ue.Z)("Mail");const n=this.props.prefValues[P.kMailCountersPanelUnseenEnabled],s=this.getMessageCount();let i=(0,ue.Z)("Mail Status");return s>0&&(i+=" "+(n?(0,ue.Z)("($1 unseen)","($1 unseen)",[s]):(0,ue.Z)("($1 unread)","($1 unread)",[s]))),this.state.recentMessages.length>0&&(i+="\n\n"),this.state.recentMessages.forEach(((e,t)=>{t>0&&(i+="\n\n"),i+=e.subject;const n=$m.Z.get(e.fromIds);n.length>0&&(i+="\n"+n[0].address)})),i})),this.state={...pd(),windowStyle:Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||{}}}componentDidMount(){cd(this,fd,Z.Z.addListener(this.onThemeStoreChanged)),Cm.C.addChangeListener(this.handleMailFiltersStoreChange),re.ZP.addChangeListener(this.handlePanelStoreChange),cd(this,Nd,Rm.addListener(this.handleMailLatestStoreChange)),cd(this,gd,Cu.addListener(this.logsUpdated)),cd(this,bd,!0)}componentWillUnmount(){cd(this,bd,!1),ld(this,fd).remove(),Cm.C.removeChangeListener(this.handleMailFiltersStoreChange),re.ZP.removeChangeListener(this.handlePanelStoreChange),ld(this,Nd).remove()}static getDerivedStateFromError(){return pd()}render(){if(!re.ZP.getIsMailWindow())return null;const e=this.props.prefValues[P.kMailStatusButtonStyle],t=this.props.prefValues[P.kMailCountersStatusButtonEnabled],n=this.props.prefValues[P.kMailIsTurnedOff],i=this.props.prefValues[P.kMailAccounts].length+this.props.prefValues[P.kRssSettings].length>0,r=this.props.prefValues[P.kMailCountersPanelUnseenEnabled];if(n)return null;const a=[{handler:this.openMailSettings,...(0,Mn.Z)("Mail Settings")},{items:[{type:"checkbox",checked:"imageandtext"===e,handler:()=>st.Z.set(P.kMailStatusButtonStyle,"imageandtext"),...(0,Mn.Z)("Image and Text")},{type:"checkbox",checked:"image"===e,handler:()=>st.Z.set(P.kMailStatusButtonStyle,"image"),...(0,Mn.Z)("Image Only")},{type:"checkbox",checked:"text"===e,handler:()=>st.Z.set(P.kMailStatusButtonStyle,"text"),...(0,Mn.Z)("Text Only")}],...(0,Mn.Z)("Button Style")},{type:"checkbox",checked:t,handler:()=>st.Z.set(P.kMailCountersStatusButtonEnabled,!t),...(0,Mn.Z)("Show Message Counter")}];let o="";return this.state.hasLoggedError?o="!":t&&(o=id(this.getMessageCount())),s.createElement(ko,{badgeColor:r||!this.state.windowStyle["--colorFg"]?void 0:to()(String(this.state.windowStyle["--colorFg"])),badgeText:o??"",className:"StatusButton "+(this.state.hasLoggedError?"StatusButton--HasError":""),disabled:n,onClick:i?this.togglePopup:this.openMailAccountSheet,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,tooltip:this.getTooltip(),title:"image"!==e?(0,ue.Z)("Mail Status"):void 0,image:"text"!==e?cn.lvj[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"StatusPopup",popupWidth:400,isPopupVisible:this.state.isPopupOpen,menu:()=>a,__source:{fileName:ad,lineNumber:317,columnNumber:12}},s.createElement(td,{hidePopup:this.hidePopup,updateRecentMessages:this.updateRecentMessages,recentMessages:this.state.recentMessages,accountId:this.state.accountId,logs:this.state.logs,hasLoggedError:this.state.hasLoggedError,__source:{fileName:ad,lineNumber:355,columnNumber:7}}))}}od(_d,"contextType",Vs.Z);const vd=(0,bi.Z)(_d,md);let Ed;const Cd="change",wd=new class extends(Bi()){getDraftIdAndCancelDraftUpdates(){if(Ed)return Ed.cancelPendingChanges(),Ed.props.id}getMessagePromise(){return Ed?Ed.buildMessage():Promise.resolve()}getComposer(){return Ed}emitChange(e){this.emit(Cd,e)}addChangeListener(e){this.on(Cd,e)}removeChangeListener(e){this.removeListener(Cd,e)}};m.Z.register((e=>{switch(e.actionType){case"MAIL_SET_ACTIVE_COMPOSER":Ed!==e.mailComposer&&(Ed=e.mailComposer);break;case"MAIL_CLEAR_ACTIVE_COMPOSER":Ed===e.mailComposer&&(Ed=void 0);break;case"MAIL_ACTIVE_COMPOSER_MODAL":e.noRecipients&&wd.emitChange("noRecipients")}}));const yd=wd;var Sd,Td=n(86802),kd=n(8485);const Id=new(Sd=class{constructor(){var e,t,n;n={},(t="drafts")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}setActiveMailComposer(e){m.Z.dispatch({actionType:"MAIL_SET_ACTIVE_COMPOSER",mailComposer:e}),Id.drafts[e.state.id]=1}clearActiveMailComposer(e){m.Z.dispatch({actionType:"MAIL_CLEAR_ACTIVE_COMPOSER",mailComposer:e})}deleteDraftMessage(){const e=yd.getDraftIdAndCancelDraftUpdates();e&&(kd.Z.call([e]),K.Z.updateIndex({removedSles:[e]}))}async queueMessage(e){const t=yd.getComposer();if(!t)return;const{to:n,cc:s,bcc:i}=t.state;if([n,s,i].every((e=>0===e.length)))return void m.Z.dispatch({actionType:"MAIL_ACTIVE_COMPOSER_MODAL",noRecipients:!0});const{id:r}=t.props;let a;if(r){if(await t.flushPendingChanges(),a=await(0,ua.Z)(r),a){Cm.C.getByIds(a.sourceFilterIds).some((e=>e.accountId===he.of&&e.path===he.Wb))&&(a=await async function(e,t){const n={filteringPriority:he.Un.HIGH,addedProperties:t?{}:{searchList:{queued:!0}}},{sleUpdate:s,updatedSle:i}=await(0,Td.Z)(e,he.of,he.Wb,he.of,he.J8,n);return K.Z.updateIndex({sleUpdates:[s]}),me.Z.filter(),i}(r,e))}}else t.cancelPendingChanges();if(!a){const t=await yd.getMessagePromise();if(!t)return;a=await de.Z.storeMessage(t,e)}e&&de.Z.sendSelected([a]),$.Z.close()}sendMessage(){Id.queueMessage(!0)}async chooseAttachments(){const e=await new Promise(((e,t)=>h.Z.fileSystem.chooseEntry({type:"openFile",acceptsMultiple:!0},(n=>n?e(n):t())))),t=await Promise.all(e.map((e=>new Promise((t=>e.file((n=>{const s=new FileReader;s.onloadend=s=>t({type:"attachment",content:new Uint8Array(s.target.result),filename:e.name,mimeType:n.type}),s.readAsArrayBuffer(n)})))))));Id.addAttachments(t)}addAttachments(e){const t=yd.getComposer();t&&t.setState({attachments:[...t.state.attachments,...e]},t.onBodyChange)}},Sd);const Ad=Id;var Zd=n(76483);const Pd={getItems:function(e,t){const n=[],s="read"===t?A.ZP.get(P.kMailReadHeadersHidden):A.ZP.get(P.kMailComposeHeadersHidden);return e.map((e=>{n.push({type:"checkbox",checked:!s.includes(e.ref),handler:this._setField.bind(this,e.ref,t),...e.labels})})),n},_setField:function(e,t){const n="read"===t?P.kMailReadHeadersHidden:P.kMailComposeHeadersHidden;let s=A.ZP.get(n).slice();s.includes(e)?s=s.filter((t=>t!==e)):s.push(e),st.Z.set(n,s)}};var Dd=n(35100),Md="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailCustomLabelDlg.jsx";function Od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xd extends s.Component{constructor(...e){super(...e),Od(this,"state",{newLabel:""}),Od(this,"onSave",(()=>{const e=(0,Dd.A4)(this.state.newLabel);this.props.onClose(!0,e)})),Od(this,"onCancel",(()=>{this.props.onClose(!1,this.state.newLabel)})),Od(this,"doesLabelExist",(e=>Cm.C.getByAccountId(he.ut).map((e=>e.name.toLowerCase())).includes(e.toLowerCase()))),Od(this,"newLabelChanged",(e=>{const t=(0,Dd.Tv)(e.target.value);t!==this.state.newLabel&&this.setState({newLabel:t})})),Od(this,"onKeyDown",(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),this.onSave())}))}render(){return s.createElement(ln.Z,{onRequestClose:this.onCancel,viewMode:this.props.viewMode,__source:{fileName:Md,lineNumber:58,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:Md,lineNumber:59,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:Md,lineNumber:60,columnNumber:11}},(0,ue.Z)("Create New Label"))),s.createElement("form",{onSubmit:this.onSave,__source:{fileName:Md,lineNumber:62,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:Md,lineNumber:63,columnNumber:11}},s.createElement("input",{type:"text",className:"new-label",onChange:this.newLabelChanged,onKeyDown:this.onKeyDown,value:this.state.newLabel,autoFocus:!0,__source:{fileName:Md,lineNumber:64,columnNumber:13}})),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Md,lineNumber:71,columnNumber:11}},s.createElement("input",{type:"submit",className:"primary",value:this.doesLabelExist(this.state.newLabel)?(0,ue.Z)("Already Exists"):(0,ue.Z)("Save"),disabled:""===this.state.newLabel||this.doesLabelExist(this.state.newLabel),__source:{fileName:Md,lineNumber:72,columnNumber:13}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this.onCancel,__source:{fileName:Md,lineNumber:79,columnNumber:13}}))))}}const Ld=xd;const Rd=function(e,t){const n=[];return e?(n.push({handler:()=>Zd.ZP.prepareDelete(!0),...(0,Mn.Z)("mail","Delete Permanently")}),t!==he.AF.toolbar&&n.push({handler:Zd.ZP.undelete,...(0,Mn.Z)("mail","Undelete")})):t!==he.AF.toolbar&&n.push({handler:()=>Zd.ZP.prepareDelete(!1),...(0,Mn.Z)("mail","Move to Trash")}),n};var Bd="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageActionButtons.jsx";function Fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ud=[{ref:"from",labels:(0,Mn.Z)("sender","From")},{ref:"cc",labels:(0,Mn.Z)("Carbon Copy")},{ref:"bcc",labels:(0,Mn.Z)("Blind Carbon Copy")}],Vd=[P.kMailSendOrQueue];class Hd extends s.PureComponent{constructor(...e){super(...e),Fd(this,"state",{standardFlag:"",customLabels:[],unread:!1,messageSelected:!1,showLabel:!1}),Fd(this,"activeMessageStoreChanged",(()=>{const e=rl.Z.getActiveListEntry();if(e){const t=Cm.C.getListEntry(e.id);if(t){const e=ll.Z.getSelectedFolder(),n=e&&Cm.C.getByFolder(e.accountId,e.path);this.setState({messageSelected:!0,unread:!jm.Z.call(t.sources,n),standardFlag:(0,Dd.Zr)(t.flags),customLabels:(0,Dd.Q3)(t.flags)})}else this.setState({messageSelected:!1})}else this.setState({messageSelected:!1})})),Fd(this,"createCustomLabel",(()=>{this.setState({showLabel:!0})})),Fd(this,"onCustomLabelDlgClose",((e,t)=>{e&&(Zd.ZP.toggleLabel(t,this.state.customLabels)(),K.Z.addLabelsFilter(t)),this.setState({showLabel:!1})})),Fd(this,"closeCustomFlagDlg",(()=>{this.setState({showLabel:!1})})),Fd(this,"getSendQueueMenu",(()=>[{type:"checkbox",checked:"send"===this.props.prefValues[P.kMailSendOrQueue],handler:this.sendAndSetSendAsDefault,...(0,Mn.Z)("Send")},{type:"checkbox",checked:"queue"===this.props.prefValues[P.kMailSendOrQueue],handler:this.queueAndSetQueueAsDefault,...(0,Mn.Z)("Queue")}])),Fd(this,"sendAndSetSendAsDefault",(()=>{"send"!==this.props.prefValues[P.kMailSendOrQueue]&&st.Z.set(P.kMailSendOrQueue,"send")})),Fd(this,"queueAndSetQueueAsDefault",(()=>{"queue"!==this.props.prefValues[P.kMailSendOrQueue]&&st.Z.set(P.kMailSendOrQueue,"queue")})),Fd(this,"deleteDraftMessage",(()=>{$.Z.close(),Ad.deleteDraftMessage()})),Fd(this,"customLabelsMenuData",(()=>{const e=Zd.ZP.getCustomLabelsMenu(this.state.customLabels);return e.push(z.Z.separatorItem,{handler:this.createCustomLabel,...(0,Mn.Z)("Add New Label...")}),this.state.customLabels.length>0&&e.push(z.Z.separatorItem,{handler:Zd.ZP.clearAllLabels.bind(null,this.state.customLabels),...(0,Mn.Z)("Clear All Labels")}),e})),Fd(this,"getId",(e=>{switch(e){case"MailMsgReply":case"MailMsgReplyToAll":return he.s0;case"MailMsgForward":return he.QV;case"MailMsgStatusRead":return ll.Z.isOptionAllowedAsDefault(he.tq)?he.tq:he.kp;case"MailMsgFlag":return he.q0;case"MailMsgLabel":return he.pz;case"MailMsgSpam":return he.H6}return""}))}componentDidMount(){rl.Z.addChangeListener(this.activeMessageStoreChanged),this.activeMessageStoreChanged()}componentWillUnmount(){rl.Z.removeChangeListener(this.activeMessageStoreChanged)}render(){const e=rl.Z.isTrash(),t=rl.Z.isJunk(),n=this.props.size;if(!ll.Z.isOptionAllowedAsDefault(this.getId(this.props.name)))return null;switch(this.props.name){case"MailMsgEdit":return ll.Z.isFolderAnEditMailFolder()?s.createElement(ko,{tooltip:(0,ue.Z)("mail","Edit"),onClick:Zd.ZP.openMessage,disabled:!this.state.messageSelected,image:cn.NNg[n],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:272,columnNumber:18}}):null;case"MailMsgReply":return s.createElement(ko,{tooltip:(0,ue.Z)("Reply"),onClick:Zd.ZP.reply,disabled:!this.state.messageSelected,image:cn.hGk[n],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:289,columnNumber:16}});case"MailMsgReplyToAll":return s.createElement(ko,{tooltip:(0,ue.Z)("Reply to All"),onClick:Zd.ZP.replyAll,disabled:!this.state.messageSelected,image:cn.Sap[n],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:304,columnNumber:16}});case"MailMsgForward":return s.createElement(ko,{tooltip:(0,ue.Z)("mail","Forward"),onClick:Zd.ZP.forward,disabled:!this.state.messageSelected,image:cn.upG[n],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:319,columnNumber:16}});case"MailMsgStatusRead":const i=ll.Z.getSelectedFolder();let r=!0;return i&&i.accountId&&i.path&&(r=ca.Z.getFolderType(i.accountId,i.path)!==he.tB),s.createElement(ko,{tooltip:this.state.unread?(0,ue.Z)("Mark Read"):(0,ue.Z)("Mark Unread"),onClick:this.state.unread?Zd.ZP.markRead:Zd.ZP.markUnread,disabled:!this.state.messageSelected,isMenuIndicatorVisible:r,menu:()=>ll.Z.getGoToMenuItems(he.AF.toolbar),image:this.state.unread?cn.aAJ[n]:cn.LDV[n],menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:340,columnNumber:16}});case"MailMsgFlag":return s.createElement(ko,{tooltip:(0,ue.Z)("Flag"),onClick:Zd.ZP.toggleStandardFlag(this.state.standardFlag?this.state.standardFlag:he.T4.RED,this.state.standardFlag),disabled:!this.state.messageSelected,image:cn.nyn[n],isMenuIndicatorVisible:!0,menu:()=>Zd.ZP.getStandardFlagsMenu(this.state.standardFlag),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:363,columnNumber:16}});case"MailMsgLabel":return s.createElement(ko,{tooltip:(0,ue.Z)("Label"),disabled:!this.state.messageSelected,image:cn.rpm[n],isMenuIndicatorVisible:!0,menu:this.customLabelsMenuData,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,size:n,hidePopup:this.closeCustomFlagDlg,hasLightArrow:!0,popupClassName:"ToolbarButtonPopup-DefaultStyles",popupPosition:this.props.popupPosition,isPopupVisible:this.state.showLabel,__source:{fileName:Bd,lineNumber:382,columnNumber:16}},s.createElement(Ld,{onClose:this.onCustomLabelDlgClose,viewMode:"slide",__source:{fileName:Bd,lineNumber:402,columnNumber:11}}));case"MailMsgTrash":const a=Rd(e,he.AF.toolbar);return s.createElement(ko,{tooltip:e?(0,ue.Z)("Undelete"):(0,ue.Z)("Move to Trash"),onClick:e?Zd.ZP.undelete:()=>Zd.ZP.prepareDelete(!1),disabled:!this.state.messageSelected||ll.Z.shouldDisableTrashButton(),image:cn.nre[n],isMenuIndicatorVisible:a.length>0,menu:()=>a,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:410,columnNumber:16}});case"MailMsgMove":return s.createElement(ko,{tooltip:(0,ue.Z)("Move to Folder"),disabled:!this.state.messageSelected,image:cn.Kt8[n],isMenuIndicatorVisible:!0,menu:Zd.ZP.getMoveToFolderMenu,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:430,columnNumber:16}});case"MailMsgSend":const o="send"===this.props.prefValues[P.kMailSendOrQueue];return s.createElement(ko,{tooltip:o?(0,ue.Z)("Send"):(0,ue.Z)("Queue"),onClick:o?Ad.sendMessage:Ad.queueMessage.bind(null,!1),image:cn.zLp[n],menu:this.getSendQueueMenu,isMenuIndicatorVisible:!0,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:448,columnNumber:16}});case"MailMsgDiscard":return s.createElement(ko,{tooltip:(0,ue.Z)("Discard Draft"),onClick:this.deleteDraftMessage,image:cn.GqE[n],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:468,columnNumber:16}});case"MailMsgAttach":return s.createElement(ko,{tooltip:(0,ue.Z)("Add Attachment"),onClick:Ad.chooseAttachments,image:cn.UEH[n],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:484,columnNumber:16}});case"MailMsgSpam":return s.createElement(ko,{tooltip:t?(0,ue.Z)("Not Spam"):(0,ue.Z)("Mark Message as Spam"),onClick:t?Zd.ZP.markAsNotJunk:Zd.ZP.markAsJunk,disabled:!this.state.messageSelected||e&&!t||ll.Z.shouldDisableSpamButton(),image:cn.Qwh[n],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:500,columnNumber:16}});case"MailMsgShowHeaders":return s.createElement(ko,{tooltip:(0,ue.Z)("Show Headers"),isMenuIndicatorVisible:!1,image:cn.x6W[this.props.size],menu:Pd.getItems(Ud,"composer"),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:Bd,lineNumber:521,columnNumber:16}});default:return console.warn(`ToolbarButton “${this.props.name}” not found`),null}}}Fd(Hd,"contextType",Vs.Z);const Wd=(0,bi.Z)(Hd,Vd);var zd=n(56752),Gd=n(1877),Kd=n(45447),jd="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\NavButton.jsx";function Yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $d(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Xd(e,t,"set"),n),n}function Xd(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Qd=new WeakMap;class qd extends s.PureComponent{constructor(e){super(e),Yd(this,"_isMounted",!1),Qd.set(this,{writable:!0,value:void 0}),Yd(this,"fastForwardStoreChanged",(()=>{this.setState((e=>this.getFastForwardStoreState(e.activePageId)))})),Yd(this,"getFastForwardStoreState",(e=>({forwardUrl:zd.Z.getFastForwardUrl(e),rewindRelativeIndex:zd.Z.getRewindRelativeIndex(e)}))),Yd(this,"navigationStoreChanged",(()=>{this.setState((e=>({navigationInfo:Gd.Z.getNavigationInfo(e.activePageId)})))})),Yd(this,"pageStoreChanged",(()=>{if(!this._isMounted)return;const e=V.ZP.unsafeGetActivePage(),t=Pt.jk.isInternalPage(e)&&!e.url.startsWith(Pt.jk.internals.startpage);e.id!==this.state.activePageId?this.setState({activePageId:e.id,isInternalPage:t,navigationInfo:Gd.Z.getNavigationInfo(e.id),...this.getFastForwardStoreState(e.id)}):t!==this.state.isInternalPage&&this.setState({isInternalPage:t})})),Yd(this,"reload",(()=>{if(this.state.navigationInfo)if(this.state.navigationInfo.isLoading)bm.Z.stop();else{const e=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId);bm.Z.reload(e.id)}})),Yd(this,"cloneSelectedTabs",(()=>{V.ZP.isSelecting(this.context.vivaldiWindowId)?$.Z.clonePages(V.ZP.getSelectedPages(this.context.vivaldiWindowId)):$.Z.clonePages(sa.List.of(V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId)))})),Yd(this,"back",(e=>{bm.Z.back()})),Yd(this,"backInBackground",(()=>{this.openURLFromHistory(-1)})),Yd(this,"forward",(()=>{bm.Z.forward()})),Yd(this,"forwardInBackground",(()=>{this.openURLFromHistory(1)})),Yd(this,"openURLFromHistory",(e=>{bm.Z.getPageHistory(((t,n)=>{const s=t+e;if(s>=0||s<n.length){const e=V.ZP.getPageById(this.state.activePageId),t=e?(0,Kd.av)(e):null;$.Z.openURL(n[s].url,{inCurrent:!1,inBackground:!0,transition:ml.Z.RELOAD,groupId:t&&this.isSubstripVisible(t)?t:void 0})}}))})),Yd(this,"rewind",(()=>{bm.Z.go(-1*this.state.rewindRelativeIndex)})),Yd(this,"rewindInBackground",(()=>{if(this.state.rewindRelativeIndex>0){const e=V.ZP.unsafeGetActivePage(),t=zd.Z.getRewindHistory(e);t.length>0&&$.Z.openURL(t[0].url,{inBackground:!0,transition:ml.Z.RELOAD})}})),Yd(this,"goHome",(()=>{$.Z.showHomepage({inCurrent:!0})})),Yd(this,"goHomeInBackground",(()=>{$.Z.showHomepage({inBackground:!0})})),Yd(this,"getHistory",(()=>new Promise((e=>bm.Z.getPageHistory(((t,n)=>this.setState({pageHistoryIndex:t},e(n)))))))),Yd(this,"_onHistorySelection",((e,t,n)=>{const{ctrlKey:s,shiftKey:i,altKey:r,button:a,metaKey:o}=n;if(t&&(s||i||r||o||0!==a)){const e=(0,ai.Z)({button:a,ctrlKey:Boolean(s),altKey:Boolean(r),shiftKey:Boolean(i),metaKey:Boolean(o)});$.Z.openUrls([t],{...e})}else bm.Z.go(e-this.state.pageHistoryIndex)})),Yd(this,"getHistoryMenuPromise",(e=>()=>this.getHistory().then((t=>{const n="backward"===e?t.slice(0,this.state.pageHistoryIndex).reverse():t.slice(this.state.pageHistoryIndex+1),s="backward"===e?(e,t)=>e-t-1:(e,t)=>e+t+1;return n.map(((e,t)=>({...z.Z.makeNumberMnemonic(e.name,t),url:e.url,handler:this._onHistorySelection.bind(null,s(this.state.pageHistoryIndex,t),e.url)})))})))),Yd(this,"getContextMenuPromise",(e=>{const t=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR":return{items:this.props.customizeMenu,...t(e,{})};case"CONTEXT_CONTAINER_FORWARD_HISTORY":return this.getHistoryMenuPromise("forward")().then((n=>({items:n,...t(e,{})})));case"CONTEXT_CONTAINER_BACKWARD_HISTORY":return this.getHistoryMenuPromise("backward")().then((n=>({items:n,...t(e,{})})));default:return{...t(e,{})}}}))})),Yd(this,"getbackwardbuttonContextMenu",(()=>this.getContextMenuPromise("backwardbutton"))),Yd(this,"getforwardbuttonContextMenu",(()=>this.getContextMenuPromise("forwardbutton"))),Yd(this,"getrewindbuttonContextMenu",(()=>this.getContextMenuPromise("rewindbutton"))),Yd(this,"getfastforwardbuttonContextMenu",(()=>this.getContextMenuPromise("fastforwardbutton"))),Yd(this,"getreloadbuttonContextMenu",(()=>this.getContextMenuPromise("reloadbutton"))),Yd(this,"gethomebuttonContextMenu",(()=>this.getContextMenuPromise("homebutton")));const t=V.ZP.unsafeGetActivePage();this.state={activePageId:t.id,isInternalPage:Pt.jk.isInternalPage(t),navigationInfo:Gd.Z.getNavigationInfo(t.id),pageHistoryIndex:-1,...this.getFastForwardStoreState(t.id)}}componentDidMount(){this._isMounted=!0,$d(this,Qd,zd.Z.addListener(this.fastForwardStoreChanged)),Gd.Z.addChangeListener(this.navigationStoreChanged),V.ZP.addChangeListener(this.pageStoreChanged)}componentWillUnmount(){var e,t;this._isMounted=!1,(e=this,t=Qd,function(e,t){return t.get?t.get.call(e):t.value}(e,Xd(e,t,"get"))).remove(),Gd.Z.removeChangeListener(this.navigationStoreChanged),V.ZP.removeChangeListener(this.pageStoreChanged)}isSubstripVisible(e){const t=V.ZP.getTabs(this.context.vivaldiWindowId,!0,V.ZP.getGroup(e,this.context.vivaldiWindowId));return"substrip"===A.ZP.get(P.kTabsStackingMode)&&(A.ZP.get(P.kTabsStackingSubstripLocked)||t.size>1)}render(){const{isInternalPage:e,navigationInfo:t}=this.state,n="top"===A.ZP.get(P.kAddressBarPosition)?"bottomLeft":"topLeft";switch(this.props.name){case"Back":return s.createElement(ko,{menuOrigin:n,disabled:!t||!t.canGoBack,onClick:this.back,onMiddleClick:this.backInBackground,tooltip:(0,ue.Z)("Go to previous page")+"\n"+(0,ue.Z)("Hold for history list"),menu:this.getbackwardbuttonContextMenu,alwaysMenu:!0,image:cn.mgF[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:350,columnNumber:16}});case"Forward":return s.createElement(ko,{menuOrigin:n,disabled:!t||!t.canGoForward,onClick:this.forward,onMiddleClick:this.forwardInBackground,tooltip:(0,ue.Z)("Go to next page")+"\n"+(0,ue.Z)("Hold for forward history list"),menu:this.getforwardbuttonContextMenu,alwaysMenu:!0,image:cn.Zu[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:367,columnNumber:16}});case"Rewind":return s.createElement(ko,{className:"button-narrow",disabled:!(Number.isInteger(this.state.rewindRelativeIndex)&&this.state.rewindRelativeIndex>0),onClick:this.rewind,onMiddleClick:this.rewindInBackground,tooltip:(0,ue.Z)("Rewind by visited domain")+"\n"+(0,ue.Z)("Hold for history domain list"),menu:this.getrewindbuttonContextMenu,alwaysMenu:!0,menuOrigin:n,image:cn.jtA[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:384,columnNumber:16}});case"FastForward":return s.createElement(ko,{className:"button-narrow",menuOrigin:n,tooltip:this.state.forwardUrl?(0,ue.Z)("Fast Forward - $1",[this.state.forwardUrl]):(0,ue.Z)("Fast Forward"),menuOrigin:n,onClick:c.Z.navigateFastforward,disabled:!this.state.forwardUrl,menu:this.getfastforwardbuttonContextMenu,alwaysMenu:!0,image:cn.Wmx[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:406,columnNumber:16}});case"Reload":case"COMMAND_PAGE_REFRESH":const i=!!t&&t.isLoading;return s.createElement(ko,{disabled:e,menuOrigin:n,menu:this.getreloadbuttonContextMenu,alwaysMenu:!0,tooltip:i&&!e?(0,ue.Z)("verb","Stop"):(0,ue.Z)("Reload current page"),onClick:this.reload,onMiddleClick:this.cloneSelectedTabs,image:i&&!e?cn.YVA[this.props.size]:cn.GO5[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:431,columnNumber:16}});case"Home":case"COMMAND_SHOW_HOMEPAGE":return s.createElement(ko,{tooltip:(0,ue.Z)("Go to homepage"),menuOrigin:n,menu:this.gethomebuttonContextMenu,alwaysMenu:!0,onClick:this.goHome,onMiddleClick:this.goHomeInBackground,image:cn.PaK[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:jd,lineNumber:456,columnNumber:16}});default:return null}}}Yd(qd,"contextType",Vs.Z);const Jd=qd;function eh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class th extends s.Component{constructor(...e){super(...e),eh(this,"state",{taskInfo:this.props.taskInfo}),eh(this,"onContextMenu",(e=>{const{taskInfo:t}=this.props;(0,Hs.Z)(this.context.vivaldiWindowId,t.menuItems)}))}render(){const{taskInfo:e}=this.props;return s.createElement("p",{className:"button-toolbar-small in-progress",id:e.id,title:e.title+"\n"+e.description,onContextMenu:this.onContextMenu,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatus.jsx",lineNumber:34,columnNumber:7}},this.state.taskInfo.text)}}eh(th,"contextType",Vs.Z);const nh=th,sh="change";let ih=(0,sa.List)();const rh=new class extends(Bi()){getBackgroundTasks(){return ih}emitChange(){this.emit(sh)}addChangeListener(e){this.on(sh,e)}removeChangeListener(e){this.removeListener(sh,e)}};m.Z.register((e=>{if(e.actionType===Fi.Z.BACKGROUND_TASKS_SET)t=e.tasks,ih=(0,sa.List)(t),rh.emitChange();var t}));const ah=rh;function oh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lh extends s.PureComponent{constructor(...e){super(...e),oh(this,"state",{backgroundTasks:ah.getBackgroundTasks()}),oh(this,"onBackgroundTaskStoreChange",(()=>{this.setState({backgroundTasks:ah.getBackgroundTasks()})}))}componentDidMount(){ah.addChangeListener(this.onBackgroundTaskStoreChange)}componentWillUnmount(){ah.removeChangeListener(this.onBackgroundTaskStoreChange)}render(){return s.createElement(s.Fragment,null,this.state.backgroundTasks.map((e=>s.createElement(nh,{key:e.id,taskInfo:e,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatusList.jsx",lineNumber:41,columnNumber:9}}))))}}const ch=lh;var uh=n(31390);async function mh(e){const t=(0,uh.S2)(e),n=V.ZP.unsafeGetActivePage(),s=Pt.jk.isInternalUrl(n.url);if(!t||s)return void pi.Z.enableCapture();const i=A.ZP.get(P.kWebpagesCaptureSaveLocation),r=A.ZP.get(P.kWebpagesCaptureCompressionFormat),{image:a}=await hi.Z.captureFullpage(n.id,r,i);hi.Z.handleCaptureLocation("fullpage",a)}const dh=e=>s.createElement(ko,{tooltip:(0,ue.Z)("title","Capture Page"),onClick:mh,image:cn.z8c[e.size],size:e.size,customizeMenu:e.customizeMenu,menuOrigin:e.menuOrigin,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDrop:e.onDrop,onDragEnter:e.onDragEnter,mimeType:e.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:e.mimeContent,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureImages.jsx",lineNumber:60,columnNumber:5}});var hh=n(39023),ph="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\page-actions\\PageActionChooser.jsx";function gh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class bh extends s.PureComponent{constructor(...e){super(...e),gh(this,"state",{pageactionFiles:[],drawerOpen:!1,currentTarget:null,scriptOverrides:[],contentScripts:[]}),gh(this,"updateScriptList",(()=>{b.Z.pageActions.getScripts((e=>{this.setState({contentScripts:e})}))})),gh(this,"onOverridesChanged",(e=>{e===this.props.pageId&&this.updateScriptOverrides()})),gh(this,"updateScriptOverrides",(()=>{b.Z.pageActions.getScriptOverridesForTab(this.props.pageId,(e=>{this.setState({scriptOverrides:e})}))})),gh(this,"togglePopup",(()=>{this.setState((e=>({drawerOpen:!e.drawerOpen})))})),gh(this,"hidePopup",(()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})})),gh(this,"onItemClicked",((e,t)=>{this.isScriptEnabled(e)?b.Z.pageActions.setScriptOverrideForTab(e,this.props.pageId,"no_override",(()=>{})):b.Z.pageActions.setScriptOverrideForTab(e,this.props.pageId,"enabled",(()=>{}))})),gh(this,"hasScriptOverrides",(()=>0!==this.state.scriptOverrides.length)),gh(this,"isScriptEnabled",(e=>{const t=this.state.scriptOverrides.find((t=>t.script===e));return!!t&&"enabled"===t.override})),gh(this,"keyDownHandler",((e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()})),gh(this,"moveFocus",((e,t,n)=>{const s=pn.findDOMNode(this);if(s instanceof HTMLElement&&(!0===n||si(s))){const n=Array.from(s.querySelectorAll("input")).map((e=>e.getAttribute("data-id"))).filter(Boolean);if(console.log("ids",n),0===n.length)return;let i;switch(t){case"current":if(""===e&&(e=n[0]),i=n.indexOf(e),-1===i)return;break;case"up":case"down":if(1===n.length)return;if(i=n.indexOf(e),-1===i)return;if("up"===t){if(i--,i<0)return}else if(i++,i>=n.length)return;break;default:return}e=n[i];const r=s.querySelector(`input[data-id="${e}"]`);r&&r.focus()}}))}componentDidMount(){b.Z.pageActions.onScriptsChanged.addListener(this.updateScriptList),b.Z.pageActions.onOverridesChanged.addListener(this.onOverridesChanged),this.updateScriptList(),this.updateScriptOverrides()}componentWillUnmount(){b.Z.pageActions.onScriptsChanged.removeListener(this.updateScriptList),b.Z.pageActions.onOverridesChanged.removeListener(this.onOverridesChanged)}componentDidUpdate(e){this.props.pageId!==e.pageId&&this.updateScriptOverrides()}render(){return s.createElement(ko,{tooltip:(0,ue.Z)("Page Actions"),disabled:this.props.disabled,isPopupVisible:this.state.drawerOpen,isOn:this.hasScriptOverrides(),onClick:this.togglePopup,hidePopup:this.hidePopup,image:cn.jVs[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,hasLightArrow:"above"===this.props.popupPosition,popupWidth:225,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:this.props.mimeContent,__source:{fileName:ph,lineNumber:207,columnNumber:12}},s.createElement("h2",{__source:{fileName:ph,lineNumber:228,columnNumber:7}},(0,ue.Z)("Page Actions")),s.createElement("div",{className:"popup-scrollarea",__source:{fileName:ph,lineNumber:229,columnNumber:7}},this.state.contentScripts.map(((e,t)=>{const n=t.toString();return s.createElement("label",{key:t,onKeyDown:this.keyDownHandler.bind(this,n),__source:{fileName:ph,lineNumber:233,columnNumber:13}},s.createElement("input",{"data-id":n,autoFocus:0===t,type:"checkbox",onChange:this.onItemClicked.bind(this,e),checked:this.isScriptEnabled(e),__source:{fileName:ph,lineNumber:235,columnNumber:15}}),s.createElement("span",{__source:{fileName:ph,lineNumber:241,columnNumber:15}},(0,hh.g)(e)))}))))}}const Nh=bh;var fh=n(44342),_h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\ZoomIndicator.jsx";function vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Eh=[P.kAppearanceRangeButtons,P.kKeyboardTabToAll];class Ch extends s.PureComponent{constructor(...e){super(...e),vh(this,"state",{editing:!1}),vh(this,"setZoomLevel",((e,t,n)=>{this.props.onZoomUpdated(e,n),this.refs.editZoom&&(this.refs.editZoom.value=Math.round(100*e))})),vh(this,"resetZoom",(()=>{this.setZoomLevel(this.props.defaultZoomLevel),fh.Z.dispatchZoomUI(this.props.defaultZoomLevel)})),vh(this,"updateZoomLevel",(()=>{const e=parseFloat(this.props.zoom);this.setZoomLevel(e,this.props.delay)})),vh(this,"zoomInStep",(()=>{this.setZoomLevel(parseFloat((this.props.zoom+this.props.step).toFixed(2)))})),vh(this,"zoomOutStep",(()=>{this.setZoomLevel(parseFloat((this.props.zoom-this.props.step).toFixed(2)))})),vh(this,"zoomHalf",(()=>{this.setZoomLevel(parseFloat((this.props.zoom/2).toFixed(2)))})),vh(this,"zoomDouble",(()=>{this.setZoomLevel(parseFloat((2*this.props.zoom).toFixed(2)))})),vh(this,"handleKeyDown",(e=>{e.keyCode===$s.Z.KEY_LEFT?(this.zoomOutStep(),e.preventDefault()):e.keyCode===$s.Z.KEY_RIGHT&&(this.zoomInStep(),e.preventDefault())})),vh(this,"rangeChanged",(e=>{const{value:t}=e.target;this.setZoomLevel(parseFloat(t),this.state.editing,this.props.delay)})),vh(this,"_onEditKeyDown",(e=>{const{step:t,zoom:n}=this.props;if(e.keyCode===$s.Z.KEY_ESCAPE)this.setState({editing:!1});else if(e.keyCode===$s.Z.KEY_SUBTRACT)this.setZoomLevel(n-t,!0),e.preventDefault();else if(e.keyCode===$s.Z.KEY_ADD)this.setZoomLevel(n+t,!0),e.preventDefault();else if(e.keyCode===$s.Z.KEY_RETURN){let e=this.refs.editZoom.value/100;0!==e&&e===parseFloat(e)||(e=1),this.setZoomLevel(e)}})),vh(this,"toggleEditZoom",(()=>{this.props.disabled||this.setState((e=>({editing:!e.editing})),(()=>{this.refs.editZoom.select()}))})),vh(this,"_onEditZoomBlur",(()=>{this.setState({editing:!1})})),vh(this,"onMouseEnter",(()=>{!1!==this.props.scrolling&&document.addEventListener("wheel",this.onMouseWheel,!0)})),vh(this,"onMouseLeave",(()=>{!1!==this.props.scrolling&&document.removeEventListener("wheel",this.onMouseWheel,!0)})),vh(this,"onMouseDown",(()=>{this._activeElement=document.activeElement})),vh(this,"onMouseUp",(()=>{this.props.delay&&this.updateZoomLevel(),this._activeElement&&(this._activeElement.focus(),delete this._activeElement)})),vh(this,"onMouseWheel",(e=>{e.deltaX<0?this.zoomOutStep():e.deltaX>0?this.zoomInStep():e.deltaY>0?this.zoomOutStep():e.deltaY<0&&this.zoomInStep()})),vh(this,"incrementCount",(()=>{this.setZoomLevel(this.props.zoom+this.props.step)})),vh(this,"decrementCount",(()=>{this.setZoomLevel(this.props.zoom-this.props.step)})),vh(this,"onPageZoomUpdated",(e=>{const t=Jt.Z.getActiveWebView();t&&t.setZoom(e)})),vh(this,"showCustomizeMenu",((e,t)=>{const n=this.props.customizeMenu;n&&(e.persist(),e.preventDefault(),e.stopPropagation(),(0,Hs.Z)(this.context.vivaldiWindowId,n)(e))}))}render(){const e=s.Fragment,{customizeMenu:t,zoom:n}=this.props,i=this.props.prefValues[P.kAppearanceRangeButtons],r=this.props.disabled||(this.props.defaultZoomLevel?this.props.defaultZoomLevel===n:1===n),a=this.state.editing?s.createElement("input",{className:"zoom-percent",type:"number",ref:"editZoom",defaultValue:Math.round(100*n),onKeyDown:this._onEditKeyDown,onBlur:this._onEditZoomBlur,step:"1",disabled:this.props.disabled,__source:{fileName:_h,lineNumber:239,columnNumber:9}}):s.createElement("span",{className:bn()({"zoom-percent":!0,disabled:this.props.disabled}),onClick:this.toggleEditZoom,__source:{fileName:_h,lineNumber:248,columnNumber:9}},`${Math.round(100*n)} %`),o=this.props.inFooter?this.props.prefValues[P.kKeyboardTabToAll]:0;return s.createElement("div",{onContextMenu:t?this.showCustomizeMenu:null,className:"page-zoom-controls",__source:{fileName:_h,lineNumber:260,columnNumber:7}},s.createElement(ko,{className:"reset-zoom",onClick:this.resetZoom,tooltip:(0,ue.Z)("Reset Zoom"),disabled:r,title:(0,ue.Z)("Reset"),tabIndex:o,__source:{fileName:_h,lineNumber:262,columnNumber:9}}),!i&&s.createElement(e,{__source:{fileName:_h,lineNumber:272,columnNumber:11}},s.createElement("input",{type:"range",min:this.props.minLevel,max:this.props.maxLevel,step:this.props.step,onChange:this.rangeChanged,onKeyDown:this.handleKeyDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:-1===o?this.onMouseDown:null,onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp,value:n,disabled:this.props.disabled,tabIndex:o,__source:{fileName:_h,lineNumber:273,columnNumber:13}}),a),i&&s.createElement(e,{__source:{fileName:_h,lineNumber:294,columnNumber:11}},s.createElement(ko,{onClick:this.decrementCount,tooltip:(0,ue.Z)("Zoom Out"),disabled:this.props.disabled,image:cn.M2k.medium,tabIndex:o,__source:{fileName:_h,lineNumber:295,columnNumber:13}}),a,s.createElement(ko,{onClick:this.incrementCount,tooltip:(0,ue.Z)("Zoom In"),disabled:this.props.disabled,image:cn.md4.medium,tabIndex:o,__source:{fileName:_h,lineNumber:303,columnNumber:13}})))}}vh(Ch,"contextType",Vs.Z),vh(Ch,"defaultProps",{disabled:!1});const wh=(0,bi.Z)(Ch,Eh);var yh=n(46268),Sh=n(43184);function Th(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kh extends s.PureComponent{constructor(...e){super(...e),Th(this,"state",{disabled:!Jt.Z.getActiveWebView(),defaultPageZoom:yh.Z.getState().defaultPageZoom,zoom:yh.Z.getState().zoom,notesZoom:yh.Z.getState().notesZoom,isNoteWebView:!1}),Th(this,"_onActiveWebViewStoreChanged",(()=>{const e=Jt.Z.getActiveWebView();e&&e.getZoom((t=>{this._updateZoomState(this.rangeCheck(t),e.name)})),this.setState({disabled:!e})})),Th(this,"_onZoomStoreChanged",(()=>{const{defaultPageZoom:e,zoom:t,notesZoom:n}=yh.Z.getState();this.setState({defaultPageZoom:e,zoom:t,notesZoom:n})})),Th(this,"_onTabZoomChange",(e=>{const t=Jt.Z.getActiveWebView();t&&t.getZoom((n=>{n===e.oldZoomFactor&&e.tabId===this.props.pageId&&this._updateZoomState(e.newZoomFactor,t.name)}))})),Th(this,"_onPageZoom",((e,t)=>{if(e!==this.context.vivaldiWindowId)return;const n=Jt.Z.getActiveWebView();n&&n.getZoom((e=>{e+=.1*t,this._updateZoomState(e,n.name)}))})),Th(this,"_updateZoomState",((e,t)=>{"markdowneditor"===t||"richtexteditor"===t?this.setState({notesZoom:e,isNoteWebView:!0}):this.setState({zoom:e,isNoteWebView:!1})})),Th(this,"setZoomLevel",(e=>{fh.Z.setPageZoom(this.rangeCheck(e))})),Th(this,"rangeCheck",(e=>Math.min(Math.max(e,Sh.XF),Sh.qt)))}componentDidMount(){this._zoomDetectStoreToken=yh.Z.addListener(this._onZoomStoreChanged),h.Z.tabs.onZoomChange.addListener(this._onTabZoomChange),b.Z.tabsPrivate.onPageZoom.addListener(this._onPageZoom),Jt.Z.addChangeListener(this._onActiveWebViewStoreChanged),this._onActiveWebViewStoreChanged()}componentWillUnmount(){Jt.Z.removeChangeListener(this._onActiveWebViewStoreChanged),h.Z.tabs.onZoomChange.removeListener(this._onTabZoomChange),b.Z.tabsPrivate.onPageZoom.removeListener(this._onPageZoom),this._zoomDetectStoreToken.remove()}render(){const{disabled:e,zoom:t,notesZoom:n,isNoteWebView:i,defaultPageZoom:r}=this.state;return s.createElement(wh,{zoom:i?n:t,key:"zoomslider",scrolling:!0,inFooter:!0,defaultZoomLevel:r,maxLevel:Sh.qt,minLevel:Sh.XF,step:Sh.Zh,disabled:e,customizeMenu:this.props.customizeMenu,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\PageZoomIndicator.jsx",lineNumber:156,columnNumber:7}})}}Th(kh,"contextType",Vs.Z);const Ih=kh;class Ah extends(S()){constructor(){super(m.Z)}getInitialState(){return{status:"",persistentStatuses:new Map}}reduce(e,t){switch(t.actionType){case"STATUS_SET_STATUS":return(0,T.ZP)(e,(e=>{e.status=t.status}));case"STATUS_SET_PERSISTENT_STATUS":return(0,T.ZP)(e,(e=>{e.persistentStatuses.set(t.key,t.status)}));case"STATUS_CLEAR_PERSISTENT_STATUS":return(0,T.ZP)(e,(e=>{e.persistentStatuses.delete(t.key)}));case"CHROME_TABS_ACTIVATED":return(0,T.ZP)(e,(e=>{e.status=""}))}return e}}const Zh=new Ah;var Ph="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\StatusInfo.jsx";function Dh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mh extends s.PureComponent{constructor(...e){super(...e),Dh(this,"state",{status:Zh.getState().status,visible:!1}),Dh(this,"onStoreChange",(()=>{clearTimeout(this._statusTimeout),clearInterval(this._persistentStatusInterval);const{status:e,persistentStatuses:t}=Zh.getState();e?this.setState({status:e,visible:!0}):1===t.size?this.setState({status:[...t.values()][0],visible:!0}):t.size>1?this._persistentStatusInterval=setInterval((()=>{this._persistentStatusIndex=this._persistentStatusIndex%t.size;const e=[...t.values()][this._persistentStatusIndex++];this.setState({status:e,visible:!0})}),2e3):this._statusTimeout=setTimeout((()=>this.setState({visible:!1})),200)}))}componentDidMount(){this._statusStoreToken=Zh.addListener(this.onStoreChange),this._persistentStatusIndex=0}componentWillUnmount(){clearTimeout(this._statusTimeout),clearInterval(this._persistentStatusInterval),this._statusStoreToken.remove()}render(){return s.createElement("p",{style:this.props.style,className:bn()({StatusInfo:!0,"StatusInfo--Visible":this.state.visible}),__source:{fileName:Ph,lineNumber:76,columnNumber:7}},s.createElement("span",{className:"StatusInfo-Content",__source:{fileName:Ph,lineNumber:82,columnNumber:9}},this.state.status))}}const Oh=Mh;class xh extends(S()){getInitialState(){return{engineData:{engineState:"stopped",disableReasons:[],protocolErrorType:"success",protocolErrorDescription:"",protocolErrorClientAction:"unknown",usesEncryptionPassword:!1,needsDecryptionPassword:!1,isEncryptingEverything:!1,isSetupInProgress:!1,isFirstSetupComplete:!1,syncEverything:!0,dataTypes:[],isReady:!1},cycleData:{cycleStartTime:0,downloadUpdatesStatus:"not_synced",commitStatus:"not_synced",nextRetryTime:0,isReady:!1}}}reduce(e,t){switch(t.actionType){case"SYNC_ENGINE_STATE_CHANGED":return{engineData:t.engineData,cycleData:e.cycleData};case"SYNC_CYCLE_COMPLETED":return{engineData:e.engineData,cycleData:t.cycleData}}return e}}const Lh=new xh(m.Z);function Rh(e){return e.hasToken?"loggedIn":"invalid_credentials"===e.lastTokenFetchError.errorType?"loginFailed":0!==e.tokenRequestTime?"loggingIn":e.accountInfo.accountId?"credentialsMissing":"loggedOut"}class Bh extends(S()){getInitialState(){return{accountInfo:{accountId:"",username:"",pictureUrl:""},hasSavedPassword:!1,hasToken:!1,accessToken:"",hasEncryptedToken:!1,tokenRequestTime:0,nextTokenRequestTime:0,lastTokenFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},lastAccountInfoFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},isReady:!1}}reduce(e,t){return t.actionType===Fi.Z.VIVALDI_ACCOUNT_STATE_UPDATED?t.state:e}}const Fh=new Bh(m.Z),Uh="▽",Vh="▼",Hh="△",Wh="▲",zh="⭍",Gh={not_synced:(0,ue.Z)("Not synced"),success:(0,ue.Z)("process","Done"),in_progress:(0,ue.Z)("In progress..."),auth_error:(0,ue.Z)("Sync server refused your credentials"),server_error:(0,ue.Z)("Sync server encountered an error"),network_error:(0,ue.Z)("Network error"),client_error:(0,ue.Z)("Client error"),conflict:(0,ue.Z)("Conflict with another client’s data occurred"),throttled:(0,ue.Z)("Sync server throttled the connection"),other_error:(0,ue.Z)("Unexpected error")};function Kh(e,t){return function(e,t){switch(e){case"not_synced":case"in_progress":return t?Uh:Hh;case"success":return t?Vh:Wh;default:return zh}}(e,t)+" "+(t?(0,ue.Z)("Download: $1",[Gh[e]]):(0,ue.Z)("Upload: $1",[Gh[e]]))}function jh(e){return[Gh[e.downloadUpdatesStatus],Gh[e.commitStatus]]}function Yh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $h extends s.Component{constructor(...e){super(...e),Yh(this,"state",{statusText:(0,ue.Z)("Sync"),statusOverlay:"none",active:!1}),Yh(this,"onStoreChange",(()=>{const e=Rh(Fh.getState()),t=Fh.getState().accountInfo.username,n=Lh.getState().engineData,s=Lh.getState().cycleData,i=n.isFirstSetupComplete&&"stopped"!==n.engineState;let r="none";"loggedOut"!==e&&(n.isFirstSetupComplete&&("credentialsMissing"===e||"loginFailed"===e||n.needsDecryptionPassword)||"failed"===n.engineState&&!n.disableReasons.includes("not_signed_in")||"disable_sync_on_client"===n.protocolErrorClientAction?r="failed":["started","stopped"].includes(n.engineState)&&0===parseInt(s.nextRetryTime)||(r="waiting"));let a=(0,ue.Z)("Sync");if("loggedOut"===e)a=(0,ue.Z)("Sync not connected");else if("failed"===r)a=(0,ue.Z)("Failed to start Sync for “$1”",[t]);else if("clearing_data"===n.engineState)a=(0,ue.Z)("Clearing Sync server data for “$1”",[t]);else if("configuration_pending"===n.engineState)a=(0,ue.Z)("Setting up Sync for “$1”",[t]);else if("started"===n.engineState){if(a=(0,ue.Z)("Connected to Sync as “$1”",[t]),"not_synced"!==s.downloadUpdatesStatus){const[e,t]=function(e){return[Kh(e.downloadUpdatesStatus,!0),Kh(e.commitStatus,!1)]}(s);a+="\n"+(0,ue.Z)("Last sync: $1",[g()(s.cycleStartTime).calendar()])+"\n"+e+"\n"+t}}else a=(0,ue.Z)("Connecting to Sync as “$1”...",[t]);this.setState({active:i,statusOverlay:r,statusText:a})})),Yh(this,"openSyncSettings",(()=>{se.Z.showSettings("sync")})),Yh(this,"getImageForStatus",(e=>{let t=cn.UTS;return"failed"===this.state.statusOverlay?t=cn.bBo:"waiting"===this.state.statusOverlay?t=cn.rvX:this.state.active&&(t=cn.ssx),t}))}componentDidMount(){this.syncStoreToken=Lh.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=Fh.addListener(this.onStoreChange),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return s.createElement(ko,{onClick:this.openSyncSettings,image:this.getImageForStatus(status)[this.props.size],tooltip:this.state.statusText,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\SyncStatus.jsx",lineNumber:145,columnNumber:12}})}}const Xh=$h;var Qh="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleImages.jsx";function qh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jh=[{title:(0,ue.Z)("Always"),profile:"always"},{title:(0,ue.Z)("Cached"),profile:"cache"},{title:(0,ue.Z)("title","Never"),profile:"never"}],ep=[{title:(0,ue.Z)("command","Loop"),profile:"allowed"},{title:(0,ue.Z)("Once"),profile:"once"},{title:(0,ue.Z)("command","Never"),profile:"none"}];class tp extends s.PureComponent{constructor(...e){super(...e),qh(this,"_isMounted",!1),qh(this,"state",{imageProfile:"always",animationProfile:"allowed",drawerOpen:!1}),qh(this,"_onPageStoreChanged",(()=>{this._isMounted&&this.setState({imageProfile:V.ZP.unsafeGetActivePage().get("imageLoading")})})),qh(this,"_onAnimationPolicyChanged",(()=>{h.Z.accessibilityFeatures.animationPolicy.get({},(({value:e})=>{this._isMounted&&this.setState({animationProfile:e})}))})),qh(this,"onImageProfileSelected",(e=>{switch(e){case"never":this.updatePageImageState(!1,!1,!1);break;case"cache":this.updatePageImageState(!0,!0,!0);break;case"always":this.updatePageImageState(!0,!1,!0)}})),qh(this,"onAnimationsProfileSelected",(e=>{this.setState({animationProfile:e},(()=>{h.Z.accessibilityFeatures.animationPolicy.set({value:e})}))})),qh(this,"updatePageImageState",((e,t,n)=>{b.Z.tabsPrivate.update(V.ZP.unsafeGetActivePage().get("id"),{showImages:e,loadFromCacheOnly:t,enablePlugins:n})})),qh(this,"hidePopup",(()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})})),qh(this,"togglePopup",(()=>{this.setState((e=>({drawerOpen:!e.drawerOpen})))}))}componentDidMount(){this._isMounted=!0,V.ZP.addChangeListener(this._onPageStoreChanged),h.Z.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){this._isMounted=!1,V.ZP.removeChangeListener(this._onPageStoreChanged),h.Z.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){const e=this.state.imageProfile,t=this.state.animationProfile,n=this.props.disabled;return s.createElement(ko,{buttonStyle:{"--displayImagesAll":"always"===e?"block":"none","--displayImagesCached":"cache"!==e||n?"none":"block","--displayImagesNever":"never"!==e||n?"none":"block","--displayAnimationOnce":"once"===t?"block":"none","--displayAnimationNever":"none"===t?"block":"none"},tooltip:(0,ue.Z)("Toggle images and animation"),onClick:this.togglePopup,disabled:this.props.disabled,image:cn.myO[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.drawerOpen,onDragStart:this.props.onDragStart,hasLightArrow:"above"===this.props.popupPosition,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:this.props.mimeContent,__source:{fileName:Qh,lineNumber:159,columnNumber:7}},s.createElement("form",{__source:{fileName:Qh,lineNumber:185,columnNumber:9}},s.createElement("h2",{__source:{fileName:Qh,lineNumber:186,columnNumber:11}},(0,ue.Z)("title","Load Images")),s.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:Qh,lineNumber:187,columnNumber:11}},Jh.map((({title:t,profile:n},i)=>s.createElement("label",{key:"imagePolicy-"+n,__source:{fileName:Qh,lineNumber:189,columnNumber:15}},s.createElement("input",{autoFocus:e===n,type:"radio",name:"toggle-image-group",checked:e===n,onChange:this.onImageProfileSelected.bind(this,n),__source:{fileName:Qh,lineNumber:190,columnNumber:17}}),t)))),s.createElement("h2",{__source:{fileName:Qh,lineNumber:202,columnNumber:11}},(0,ue.Z)("Play Image Animation")),s.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:Qh,lineNumber:203,columnNumber:11}},ep.map((({title:e,profile:n})=>s.createElement("label",{key:"animationPolicy-"+n,__source:{fileName:Qh,lineNumber:205,columnNumber:15}},s.createElement("input",{type:"radio",name:"toggle-animations-group",checked:t===n,onChange:this.onAnimationsProfileSelected.bind(this,n),__source:{fileName:Qh,lineNumber:206,columnNumber:17}}),e))))))}}const np=tp;var sp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleTiling.jsx";function ip(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rp=function(e){const t=V.ZP.unsafeGetActivePage(e),n=(0,Kd.jA)(t);return{groupId:t.getIn(["extData","group"]),tileId:n&&V.ZP.getTiles(n,e).count()>1?n:"",tileMode:t.getIn(["extData","tiling","layout"]),disabled:1===V.ZP.getPages(e).count()}};class ap extends s.PureComponent{constructor(e,t){super(e),ip(this,"_isMounted",!1),ip(this,"_onPageStoreChange",(()=>{this._isMounted&&this.setState(rp(this.context.vivaldiWindowId))})),ip(this,"togglePopup",(()=>{this.setState((e=>({drawerOpen:!e.drawerOpen})))})),ip(this,"hidePopup",(()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})})),ip(this,"setTiling",(e=>{if(e.hasOwnProperty("button")&&e.button!==Nn.kLeft)return;const t=this.context.vivaldiWindowId,n=e.currentTarget.value,s=V.ZP.getSelection(t);if(s.count()>1){const e=s.map((e=>V.ZP.getPageById(e))).filter(Boolean).toList();$.Z.tilePages(e,n),$.Z.clearSelection(t)}else if(this.state.tileId){const e=V.ZP.getTiles(this.state.tileId,t);$.Z.tilePages(e,n)}else V.ZP.isGroup(this.state.groupId,t)?$.Z.tileTabStack(this.state.groupId,this.context.vivaldiWindowId,n):$.Z.tileLastActive(n,t);this.hidePopup()})),ip(this,"untile",(()=>{$.Z.untileTileGroup(this.state.tileId,this.context.vivaldiWindowId),this.hidePopup()})),ip(this,"keyDownHandler",(e=>{const t=e.currentTarget,n=t.parentElement?.querySelectorAll(".PageTiling-Button:not([disabled])");if(n?.length)switch(e.key){case"ArrowUp":let e=[].indexOf.call(n,t)-1;e<0&&(e=n.length-1),n[e].focus();break;case"ArrowDown":let s=[].indexOf.call(n,t)+1;s>=n.length&&(s=0),n[s].focus();break;default:return}})),this.state={drawerOpen:!1,...rp(t.vivaldiWindowId)}}componentDidMount(){this._isMounted=!0,V.ZP.addChangeListener(this._onPageStoreChange)}componentDidUpdate(e){this._isMounted&&e.pageId!==this.props.pageId&&this.hidePopup()}componentWillUnmount(){this._isMounted=!1,V.ZP.removeChangeListener(this._onPageStoreChange)}render(){return s.createElement(ko,{customizeMenu:this.props.customizeMenu,tooltip:(0,ue.Z)("Page tiling")+"\n"+(0,ue.Z)("Tile the current tab selection, tab stack, or last active tab"),buttonStyle:{"--displayTileColumn":!this.state.tileId||"column"!==this.state.tileMode&&"grid"!==this.state.tileMode?"none":"unset","--displayTileRow":!this.state.tileId||"row"!==this.state.tileMode&&"grid"!==this.state.tileMode?"none":"unset"},className:`tilingtoggle ${this.props.size}`,disabled:this.state.disabled,image:cn.Dx_[this.props.size],size:this.props.size,onClick:this.togglePopup,onPointerDown:this.togglePopup,isPopupVisible:this.state.drawerOpen,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,hasLightArrow:!0,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:`ToolbarButtonPopup-DefaultStyles ${this.props.size}`,mimeContent:this.props.mimeContent,__source:{fileName:sp,lineNumber:188,columnNumber:12}},s.createElement("h2",{__source:{fileName:sp,lineNumber:220,columnNumber:7}},(0,ue.Z)("Page Tiling")),s.createElement("button",{className:bn()("PageTiling-Button",{"button-on":"row"===this.state.tileMode}),title:(0,ue.Z)("Tile vertically"),onKeyDown:this.keyDownHandler,onClick:this.setTiling,onMouseUp:this.setTiling,value:"row",dangerouslySetInnerHTML:{__html:cn.Dx_[this.props.size]+(0,ue.Z)("Tile Vertically")},style:{"--displayTileColumn":"none","--displayTileRow":"unset"},__source:{fileName:sp,lineNumber:223,columnNumber:7}}),s.createElement("button",{className:bn()("PageTiling-Button",{"button-on":"column"===this.state.tileMode}),title:(0,ue.Z)("Tile horizontally"),onKeyDown:this.keyDownHandler,onClick:this.setTiling,onMouseUp:this.setTiling,value:"column",dangerouslySetInnerHTML:{__html:cn.Dx_[this.props.size]+(0,ue.Z)("Tile Horizontally")},style:{"--displayTileColumn":"unset","--displayTileRow":"none"},__source:{fileName:sp,lineNumber:239,columnNumber:7}}),s.createElement("button",{className:bn()("PageTiling-Button",{"button-on":"grid"===this.state.tileMode}),title:(0,ue.Z)("Tile to grid"),onKeyDown:this.keyDownHandler,onClick:this.setTiling,onMouseUp:this.setTiling,value:"grid",dangerouslySetInnerHTML:{__html:cn.Dx_[this.props.size]+(0,ue.Z)("Tile to Grid")},style:{"--displayTileColumn":"unset","--displayTileRow":"unset"},__source:{fileName:sp,lineNumber:255,columnNumber:7}}),s.createElement("button",{className:"PageTiling-Button",title:(0,ue.Z)("Untile pages"),disabled:!this.state.tileMode,onKeyDown:this.keyDownHandler,onClick:this.untile,onMouseUp:this.untile,value:"none",dangerouslySetInnerHTML:{__html:cn.Dx_[this.props.size]+(0,ue.Z)("Untile Pages")},style:{"--displayTileColumn":"none","--displayTileRow":"none"},__source:{fileName:sp,lineNumber:271,columnNumber:7}}))}}ip(ap,"contextType",Vs.Z);const op=ap;var lp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\StatusButton.jsx";function cp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const up=[P.kBiscuitVersion,P.kPanelsPosition],mp=(0,ue.Z)("$1 click to toggle panel floating",[(0,ue.Z)("key","Control")]),dp=function(){const e=V.ZP.unsafeGetActivePage();return{activePageId:e.id,activePageUrl:e.url}};let hp="";class pp extends s.PureComponent{constructor(e,t){super(e),cp(this,"_isMounted",!1),cp(this,"_onPageStoreChange",(()=>{this._isMounted&&this.setState(dp())})),cp(this,"_onPanelStoreChanged",(()=>{this._isMounted&&this.setState({panelOpen:re.ZP.getPanelButtonsVisible()})})),cp(this,"_onWindowStoreChanged",(()=>{const e=W.ZP.getVisibleUI(this.context.vivaldiWindowId).statusBar;this._isMounted&&this.state.statusBarDisplay!==e&&this.setState({statusBarDisplay:e})})),this.state={panelOpen:re.ZP.getPanelButtonsVisible(),statusBarDisplay:W.ZP.getVisibleUI(t.vivaldiWindowId).statusBar,...dp()}}componentDidMount(){this._isMounted=!0,V.ZP.addChangeListener(this._onPageStoreChange),re.ZP.addChangeListener(this._onPanelStoreChanged),this._windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged)}componentWillUnmount(){this._isMounted=!1,re.ZP.removeChangeListener(this._onPanelStoreChanged),V.ZP.removeChangeListener(this._onPageStoreChange),this._windowStoreToken.remove()}render(){switch(this.props.name){case"PanelToggle":return s.createElement(ko,{className:"panel-clickoutside-ignore",tooltip:this.state.panelOpen?(0,ue.Z)("Hide Panel")+"\n"+mp:(0,ue.Z)("verb","Show Panel")+"\n"+mp,onClick:ie.Z.togglePanel,onMiddleClick:ie.Z.toggleFloating,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,style:{transform:"right"===this.props.prefValues[P.kPanelsPosition]?"scaleX(-1)":"unset"},image:cn.sxI[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:155,columnNumber:16}});case"SyncStatus":return!W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)&&s.createElement(Xh,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:180,columnNumber:11}});case"StatusInfo":return"overlay"!==this.state.statusBarDisplay?s.createElement(Oh,{__source:{fileName:lp,lineNumber:194,columnNumber:11}}):null;case"TaskList":return s.createElement(ch,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,__source:{fileName:lp,lineNumber:197,columnNumber:16}});case"VersionInfo":return this.props.prefValues[P.kBiscuitVersion]?s.createElement("div",{className:"biscuit-setting-version",__source:{fileName:lp,lineNumber:204,columnNumber:13}},s.createElement("span",{className:"application-icon-biscuit",dangerouslySetInnerHTML:{__html:cn.Qa2},__source:{fileName:lp,lineNumber:205,columnNumber:15}}),s.createElement("span",{className:"biscuit-string",__source:{fileName:lp,lineNumber:208,columnNumber:15}}," ",function(){if(!hp){const{vivaldiVersion:e,chromiumVersion:t}=b.Z.utilities.getVersion();hp=`Vivaldi ${e} / Chrome ${t}`}return hp}()," ")):null;case"CaptureImages":return s.createElement(dh,{key:"capture-images",customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:213,columnNumber:16}});case"TilingToggle":return s.createElement(op,{pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:227,columnNumber:16}});case"ImagesToggle":return s.createElement(np,{key:"toggle-images",disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:244,columnNumber:16}});case"PageActions":return s.createElement(Nh,{key:"pageaction-chooser",pageId:this.state.activePageId,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lp,lineNumber:260,columnNumber:16}});case"Zoom":return s.createElement(Ih,{key:"zoomslider",pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,__source:{fileName:lp,lineNumber:277,columnNumber:16}});default:return null}}}cp(pp,"contextType",Vs.Z);const gp=(0,bi.Z)(pp,up);var bp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonSwitcher.jsx";class Np extends s.Component{render(){switch(this.props.name){case"Back":case"Forward":case"Rewind":case"FastForward":case"Reload":case"Home":return s.createElement(Jd,{name:this.props.name,customizeMenu:this.props.customizeMenu,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:53,columnNumber:16}});case"BreakMode":return s.createElement(zc,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:65,columnNumber:14}});case"Clock":return s.createElement(lm,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:79,columnNumber:16}});case"MailStatus":return s.createElement(vd,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:93,columnNumber:16}});case"CalendarStatus":return s.createElement(Pu,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:106,columnNumber:16}});case"PanelToggle":case"SyncStatus":case"StatusInfo":case"TaskList":case"VersionInfo":case"CaptureImages":case"TilingToggle":case"ImagesToggle":case"PageActions":case"Zoom":return s.createElement(gp,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:129,columnNumber:16}});case"MailBack":case"MailForward":case"MailReload":case"MailViewLayout":case"MailViewThreading":return s.createElement(Em,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,disabled:!1,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:147,columnNumber:16}});case"MailSearch":return s.createElement(Pm,{__source:{fileName:bp,lineNumber:161,columnNumber:16}});case"MailMsgEdit":case"MailMsgReply":case"MailMsgReplyToAll":case"MailMsgForward":case"MailMsgStatusRead":case"MailMsgFlag":case"MailMsgLabel":case"MailMsgSend":case"MailMsgShowHeaders":case"MailMsgSpam":case"MailMsgDiscard":case"MailMsgAttach":case"MailMsgTrash":case"MailMsgMove":return s.createElement(Wd,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:bp,lineNumber:178,columnNumber:16}});case"Game":return s.createElement(pm,{customizeMenu:this.props.customizeMenu,isStartPage:!1,name:this.props.name,menuOrigin:this.props.menuOrigin,mimeType:this.props.mimeType,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,popupPosition:this.props.popupPosition,size:this.props.size,__source:{fileName:bp,lineNumber:192,columnNumber:16}});case"Spacer":return s.createElement("div",{className:"toolbar-spacer",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:bp,lineNumber:209,columnNumber:16}});case"FlexibleSpacer":return s.createElement("div",{className:"toolbar-spacer-flexible",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:bp,lineNumber:218,columnNumber:16}});default:return console.warn(`ToolbarButton “${this.props.name}” not found`),null}}}var fp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\Toolbar.jsx";function _p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vp="vivaldi/x-button-toolbar",Ep="vivaldi/x-toolbar-name",Cp="vivaldi/x-button-index";let wp=!1;class yp extends s.PureComponent{constructor(...e){super(...e),_p(this,"_dropOnSelf",!1),_p(this,"_dragIndex",null),_p(this,"state",{buttons:this.props.name?A.ZP.get(this.props.name):[]}),_p(this,"onPrefsChanged",((e,t)=>{this.setState({buttons:t})})),_p(this,"reset",(()=>{this.props.name&&st.Z.reset(this.props.name)})),_p(this,"removeButton",(e=>{if(!this.props.name)return;const t=A.ZP.get(this.props.name);this.props.name&&st.Z.set(this.props.name,t.filter(((t,n)=>e!==n)))})),_p(this,"onDrop",((e,t,n)=>{wp=!0;const s=this.state.buttons.slice(),i="right"===t?1:0,r=(this._dragIndex||0)+i,a=e.dataTransfer.getData(vp),o=e.dataTransfer.getData(Cp);this._dropOnSelf=this.props.name===e.dataTransfer.getData(Ep),this._dropOnSelf?(s[o]=null,s.splice(r,0,a),this.props.name&&st.Z.set(this.props.name,s.filter((e=>e)))):(s.splice(r,0,a),this.props.name&&st.Z.set(this.props.name,s))})),_p(this,"getButtonMenu",(e=>[z.Z.separatorItem,{items:[{handler:this.removeButton.bind(this,e),...(0,Mn.Z)("Remove From Toolbar")},z.Z.separatorItem,{handler:this.reset,...(0,Mn.Z)("Reset Toolbar to Default")}],...(0,Mn.Z)("command","Customize")}]))}componentDidMount(){this.props.name&&A.ZP.addListener(this.props.name,this.onPrefsChanged)}componentWillUnmount(){this.props.name&&A.ZP.removeListener(this.props.name,this.onPrefsChanged)}render(){return s.createElement("div",{className:bn()("toolbar","toolbar-droptarget",this.props.className,"toolbar-"+this.props.size),__source:{fileName:fp,lineNumber:140,columnNumber:7}},this.state.buttons.map(((e,t)=>s.createElement(Np,{key:t,name:e,menuOrigin:this.props.menuOrigin,customizeMenu:this.getButtonMenu(t),popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:e=>{wp=!1,this._dropOnSelf=!1,e.dataTransfer.setData(Cp,t),e.dataTransfer.setData(Ep,this.props.name)},onDragEnd:e=>{!this._dropOnSelf&&wp&&this.removeButton(t),this._dropOnSelf=!1,this._dragIndex=null},onDrop:this.onDrop,onDragEnter:()=>{this._dragIndex=t},mimeType:vp,__source:{fileName:fp,lineNumber:148,columnNumber:11}}))))}}var Sp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailBar.jsx";const Tp=[P.kAddressBarPosition,P.kToolbarsMail,P.kToolbarsMailComposer,P.kToolbarsMailMessage];class kp extends s.PureComponent{render(){const{prefValues:e,url:t}=this.props,n="top"===e[P.kAddressBarPosition]?"bottomLeft":"topLeft",i="top"===e[P.kAddressBarPosition]?"below":"above";return s.createElement(gi.Z,{focusName:"focus_mailbar",className:"toolbar toolbar-mainbar toolbar-mailbar",__source:{fileName:Sp,lineNumber:43,columnNumber:7}},!t&&s.createElement(yp,{className:"toolbar-mainbar",menuOrigin:n,popupPosition:i,size:"large",__source:{fileName:Sp,lineNumber:47,columnNumber:11}}),!(0,Tm.vE)(t)&&!(0,Tm.Ds)(t)&&s.createElement(yp,{name:P.kToolbarsMail,className:"toolbar-mainbar",menuOrigin:n,popupPosition:i,size:"large",__source:{fileName:Sp,lineNumber:55,columnNumber:11}}),(0,Tm.Ds)(t)&&s.createElement(yp,{name:P.kToolbarsMailMessage,className:"toolbar-mainbar message",menuOrigin:n,popupPosition:i,size:"large",__source:{fileName:Sp,lineNumber:64,columnNumber:11}}),(0,Tm.vE)(t)&&s.createElement(yp,{name:P.kToolbarsMailComposer,className:"toolbar-mainbar composer",menuOrigin:n,popupPosition:i,size:"large",__source:{fileName:Sp,lineNumber:73,columnNumber:11}}))}}const Ip=(0,bi.Z)(kp,Tp);var Ap=n(98082),Zp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountPopup.jsx";function Pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Dp=[P.kKeyboardTabToAll];class Mp extends s.Component{constructor(e){super(e),Pp(this,"attachListeners",(()=>{b.Z.windowPrivate.onWindowCreated.addListener(this.onWindowUpdated),b.Z.windowPrivate.onWindowClosed.addListener(this.onWindowUpdated)})),Pp(this,"detachListeners",(()=>{b.Z.windowPrivate.onWindowCreated.removeListener(this.onWindowUpdated),b.Z.windowPrivate.onWindowClosed.removeListener(this.onWindowUpdated)})),Pp(this,"onWindowUpdated",(()=>{b.Z.runtimePrivate.hasGuestSession((e=>{this.state&&this.setState({hasGuestSession:e})}))})),Pp(this,"getAllProfileImages",(()=>{b.Z.runtimePrivate.getUserProfileImages((e=>{this.setState({profileImages:e})}))})),Pp(this,"openNamedProfile",(e=>{b.Z.runtimePrivate.openNamedProfile(e,(t=>{t||console.warn("Failed to open profile: "+e),this.props.hidePopup()}))})),Pp(this,"getProfileImage",(e=>e.customAvatar?e.customAvatar:e.image)),Pp(this,"toggleGuestProfile",(()=>{this.state.hasGuestSession?se.Z.closeGuestSession():se.Z.openGuestWindow(),this.props.hidePopup()})),Pp(this,"managePeople",(()=>{this.setState({accountState:"list"})})),Pp(this,"manageUser",(()=>{this.props.isLoggedIn?(se.Z.showSettings("sync"),this.props.hidePopup()):this.setState({accountState:"edit"})})),Pp(this,"exitUser",(()=>{se.Z.closeActiveProfile()})),Pp(this,"getFormattedName_",(()=>this.props.accountInfo.username&&this.props.isLoggedIn?s.createElement("div",{className:"profile-name-text",__source:{fileName:Zp,lineNumber:172,columnNumber:14}},s.createElement("div",{className:"active-sync-item-label",__source:{fileName:Zp,lineNumber:173,columnNumber:7}},(0,ue.Z)("Logged in as"),s.createElement("br",{__source:{fileName:Zp,lineNumber:174,columnNumber:28}})),s.createElement("div",{__source:{fileName:Zp,lineNumber:176,columnNumber:7}},this.props.accountInfo.username)):this.props.activeProfile.name)),Pp(this,"selectActiveProfileImage",((e,t)=>{this.setState({activeImageIndex:e,activeImageUrl:t})})),Pp(this,"selectCustomProfileImage",(()=>{b.Z.utilities.selectLocalImage({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Custom Image"),profileImage:!0})})),Pp(this,"goBack",(()=>{let e="none";"info"===this.state.accountState&&(e="list"),this.state&&this.setState({accountState:e,editedName:this.props.activeProfile.name,activeImageIndex:this.props.activeProfile.imageIndex,canRemoveActive:!1})})),Pp(this,"onSave",(()=>{let e=!0;if("edit"===this.state.accountState){if(this.state.editedName.length){const t=(0,Ap.Z)(this.state.editedName).trim();if(!t.length)return;const n=this.state.hasDesktopShortcut!==this.state.createDesktopShortcut||this.state.activeImageIndex!==this.props.activeProfile.imageIndex;b.Z.runtimePrivate.updateActiveProfile(t,this.state.activeImageIndex,n?this.state.createDesktopShortcut:void 0,(t=>{e=t}))}}else if("new"===this.state.accountState&&this.state.suggestedName.length){const t=(0,Ap.Z)(this.state.suggestedName).trim();if(!t.length)return;b.Z.runtimePrivate.createProfile(t,this.state.activeImageIndex,this.state.createDesktopShortcut,(t=>{e=t}))}this.props.hidePopup&&e&&this.props.hidePopup()})),Pp(this,"onCancel",(()=>{this.goBack()})),Pp(this,"onSignin",(()=>{se.Z.showSettings("sync"),this.props.hidePopup()})),Pp(this,"onRegister",(()=>{se.Z.showSettings("sync",{view:"register"}),this.props.hidePopup()})),Pp(this,"createProfile",(()=>{this.setState({accountState:"new",activeImageIndex:0})})),Pp(this,"showProfileInfo",((e,t)=>{this.setState({accountState:"info",selectedProfilePath:e}),t.preventDefault(),t.stopPropagation(),b.Z.runtimePrivate.getProfileStatistics(e,(e=>{e.map((e=>{switch(e.category){case"Autofill":e.category=(0,ue.Z)("Autofill");break;case"Bookmarks":e.category=(0,ue.Z)("Bookmarks");break;case"Passwords":e.category=(0,ue.Z)("Passwords");break;case"BrowsingHistory":e.category=(0,ue.Z)("Browsing History")}})),this.setState({profileStats:e})}))})),Pp(this,"confirmRemoval",(()=>{this.setState({canRemoveActive:!0})})),Pp(this,"removeProfile",(()=>{b.Z.runtimePrivate.deleteProfile(this.state.selectedProfilePath,(e=>{e&&this.goBack()}))})),Pp(this,"handleNameInput",(e=>{"new"===this.state.accountState?this.setState({suggestedName:e.target.value}):this.setState({editedName:e.target.value})})),Pp(this,"changeDesktopShortcut",(e=>{this.setState({createDesktopShortcut:e.currentTarget.checked})})),Pp(this,"handleFocus",(e=>{e.currentTarget.select()})),Pp(this,"renderNavigationBack",(()=>{const e=(0,ue.Z)("profiles","Back");return s.createElement("button",{type:"button",title:e,className:"nav-back",onClick:this.goBack,dangerouslySetInnerHTML:{__html:cn.mgF.medium+e},__source:{fileName:Zp,lineNumber:332,columnNumber:7}})})),Pp(this,"renderDialogHeader",(()=>{let e;switch(this.state.accountState){case"new":e=(0,ue.Z)("Create New Person");break;case"info":break;default:e=(0,ue.Z)("Edit Person")}return e?s.createElement("div",{className:"profile-section-header",__source:{fileName:Zp,lineNumber:356,columnNumber:14}},e):null})),Pp(this,"renderNameEdit",(()=>{const e="new"===this.state.accountState?this.state.suggestedName:this.state.editedName;return s.createElement("label",{className:"profile-section-name",__source:{fileName:Zp,lineNumber:364,columnNumber:12}},s.createElement("input",{type:"text",name:"name",placeholder:(0,ue.Z)("profiles","Name"),onChange:this.handleNameInput,value:e,onFocus:this.handleFocus,autoFocus:!0,__source:{fileName:Zp,lineNumber:365,columnNumber:9}}))})),Pp(this,"renderSaveCancel",(()=>s.createElement("footer",{className:"dialog-footer",__source:{fileName:Zp,lineNumber:377,columnNumber:12}},s.createElement("input",{type:"submit",className:"primary",value:"new"===this.state.accountState?(0,ue.Z)("Add Person"):(0,ue.Z)("Save"),__source:{fileName:Zp,lineNumber:378,columnNumber:7}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:Zp,lineNumber:382,columnNumber:7}})))),Pp(this,"renderProfileInfo",(()=>{const e=[],t=this.props.allProfiles.filter((e=>e.path===this.state.selectedProfilePath));if(t&&t[0]){const n=this.getProfileImage(t[0]);e.push(s.createElement("div",{className:"profile-details",key:"apv_details",__source:{fileName:Zp,lineNumber:395,columnNumber:9}},s.createElement("div",{className:"profile-image",style:{backgroundImage:`url(${n})`},__source:{fileName:Zp,lineNumber:396,columnNumber:11}}),s.createElement("div",{className:"profile-name",__source:{fileName:Zp,lineNumber:399,columnNumber:11}},t[0].name)))}return this.state.profileStats.forEach(((t,n)=>{e.push(s.createElement("div",{className:"profile-stat-row",key:t.category,__source:{fileName:Zp,lineNumber:407,columnNumber:9}},s.createElement("div",{className:"profile-category",__source:{fileName:Zp,lineNumber:408,columnNumber:11}},t.category),s.createElement("div",{className:"profile-count",__source:{fileName:Zp,lineNumber:411,columnNumber:11}},t.count)))})),this.state.canRemoveActive&&e.push(s.createElement("p",{className:"alert",key:"apv_alert",__source:{fileName:Zp,lineNumber:419,columnNumber:9}},(0,ue.Z)("You are about to remove the active person. All profile data will be deleted and cannot be restored. Do you still want to proceed?"))),e.push(s.createElement("input",{type:"button",key:"apv_button",className:"danger remove-person-button",onClick:t[0].active&&!this.state.canRemoveActive?this.confirmRemoval:this.removeProfile,value:(0,ue.Z)("Remove Person"),__source:{fileName:Zp,lineNumber:425,columnNumber:7}})),e})),Pp(this,"renderSelectableProfileImages",(()=>{const e=[];e.push(s.createElement("button",{key:"custom-image",title:(0,ue.Z)("Select custom avatar image"),type:"button",className:"avatarbox avatarbox-custom",onClick:this.selectCustomProfileImage.bind(this),dangerouslySetInnerHTML:{__html:cn.IJb},__source:{fileName:Zp,lineNumber:443,columnNumber:7}}));let t=this.state.profileImages.map((e=>{const t=bn()({"avatarbox-image":!0,"avatarbox-selected":this.state.activeImageIndex===e.index});return s.createElement("button",{key:e.index,title:e.name,type:"button",className:"avatarbox",onClick:this.selectActiveProfileImage.bind(this,e.index,e.image),__source:{fileName:Zp,lineNumber:458,columnNumber:9}},s.createElement("div",{className:t,style:{backgroundImage:`url(${e.image})`},__source:{fileName:Zp,lineNumber:465,columnNumber:11}}))}));return t=e.concat(t),s.createElement("div",{className:"avatarlist",__source:{fileName:Zp,lineNumber:472,columnNumber:12}},t)})),Pp(this,"renderCreateProfileShortcut",(()=>this.state.canCreateDesktopShortcut?s.createElement("label",{__source:{fileName:Zp,lineNumber:478,columnNumber:9}},s.createElement("input",{className:"dialog-checkbox",checked:this.state.createDesktopShortcut,onChange:this.changeDesktopShortcut,type:"checkbox",__source:{fileName:Zp,lineNumber:479,columnNumber:11}}),s.createElement("span",{__source:{fileName:Zp,lineNumber:483,columnNumber:11}},(0,ue.Z)("Create Desktop Shortcut"))):null)),Pp(this,"renderAllProfiles",(()=>{const e=[];return this.props.allProfiles.forEach((t=>{const n=this.getProfileImage(t);e.push(s.createElement("button",{className:"account-item-large",key:t.path,title:t.name,onClick:this.showProfileInfo.bind(this,t.path),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],autoFocus:-1!==this.props.prefValues[P.kKeyboardTabToAll],__source:{fileName:Zp,lineNumber:495,columnNumber:9}},s.createElement("img",{src:n,__source:{fileName:Zp,lineNumber:503,columnNumber:11}}),s.createElement("span",{className:"profile-name",__source:{fileName:Zp,lineNumber:504,columnNumber:11}},t.name)))})),e})),Pp(this,"renderActiveProfileHeader",(()=>{let e=this.props.accountInfo.pictureUrl;return e&&this.props.isLoggedIn||(e=this.getProfileImage(this.props.activeProfile)),s.createElement(s.Fragment,null,s.createElement("div",{className:"account-item active-profile",onClick:this.manageUser,__source:{fileName:Zp,lineNumber:518,columnNumber:7}},s.createElement("div",{className:"profile-name",__source:{fileName:Zp,lineNumber:519,columnNumber:9}},s.createElement("img",{src:e,__source:{fileName:Zp,lineNumber:520,columnNumber:11}}),this.getFormattedName_()),(this.props.isLoggedIn||!this.props.accountInfo.username)&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.Zu.medium},__source:{fileName:Zp,lineNumber:524,columnNumber:11}})),this.props.accountInfo.username&&!this.props.isLoggedIn&&s.createElement("input",{type:"button",onClick:this.onSignin,value:(0,ue.Z)("Log in"),autoFocus:!0,__source:{fileName:Zp,lineNumber:528,columnNumber:9}}))})),Pp(this,"renderInActiveProfiles",(()=>{const e=this.props.allProfiles.filter((e=>!e.active)),t=[];return e.forEach((e=>{const n=this.getProfileImage(e);t.push(s.createElement("button",{className:"account-item",key:e.path,title:e.name,onClick:this.openNamedProfile.bind(this,e.path),__source:{fileName:Zp,lineNumber:545,columnNumber:9}},s.createElement("img",{src:n,__source:{fileName:Zp,lineNumber:551,columnNumber:11}}),s.createElement("span",{className:"profile-name",__source:{fileName:Zp,lineNumber:552,columnNumber:11}},e.name)))})),t})),Pp(this,"renderGuestEntry",(()=>{const e=this.state.hasGuestSession?(0,ue.Z)("Exit Guest Session"):(0,ue.Z)("Open Guest Window");return s.createElement("button",{className:"account-item",onClick:this.toggleGuestProfile,title:e,dangerouslySetInnerHTML:{__html:cn.LaO.medium+e},__source:{fileName:Zp,lineNumber:564,columnNumber:12}})})),Pp(this,"renderManagePeople",(()=>{const e=(0,ue.Z)("Manage People");return s.createElement("button",{className:"account-item",onClick:this.managePeople,title:e,dangerouslySetInnerHTML:{__html:cn.LaO.medium+e},__source:{fileName:Zp,lineNumber:575,columnNumber:12}})})),Pp(this,"renderExitUser",(()=>{const e=(0,ue.Z)("Exit $1",[this.props.activeProfile.name]);return s.createElement("button",{className:"account-item",onClick:this.exitUser,title:e,dangerouslySetInnerHTML:{__html:cn.kze+e},__source:{fileName:Zp,lineNumber:587,columnNumber:12}})})),Pp(this,"renderSyncCTA",(()=>s.createElement("div",{className:"account-create",__source:{fileName:Zp,lineNumber:597,columnNumber:12}},s.createElement("p",{__source:{fileName:Zp,lineNumber:598,columnNumber:7}},(0,ue.Z)("Create a Vivaldi account to start syncing data across your devices.")),s.createElement("span",{dangerouslySetInnerHTML:{__html:n(71665)},__source:{fileName:Zp,lineNumber:601,columnNumber:7}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Create Account"),onClick:this.onRegister,__source:{fileName:Zp,lineNumber:603,columnNumber:7}})))),this.state={hasGuestSession:!1,accountState:"none",editedName:e.activeProfile.name,suggestedName:"",activeImageIndex:e.activeProfile.imageIndex,activeImageUrl:this.getProfileImage(e.activeProfile),profileImages:[],profileStats:[],selectedProfilePath:"",hasDesktopShortcut:!1,createDesktopShortcut:!1,canCreateDesktopShortcut:!0,canRemoveActive:!1}}componentDidMount(){this.attachListeners(),this.onWindowUpdated(),this.getAllProfileImages(),b.Z.runtimePrivate.getProfileDefaults((e=>{this.setState({suggestedName:e})})),b.Z.runtimePrivate.hasDesktopShortcut(((e,t)=>{this.setState({hasDesktopShortcut:e,createDesktopShortcut:e,canCreateDesktopShortcut:t})}))}componentWillUnmount(){this.detachListeners()}render(){return"edit"===this.state.accountState||"new"===this.state.accountState?s.createElement("form",{className:"account-dialog",onSubmit:this.onSave,__source:{fileName:Zp,lineNumber:617,columnNumber:14}},this.renderNavigationBack(),this.renderDialogHeader(),this.renderNameEdit(),this.renderSelectableProfileImages(),this.renderCreateProfileShortcut(),this.renderSaveCancel()):"list"===this.state.accountState?s.createElement("div",{className:"account-dialog",__source:{fileName:Zp,lineNumber:628,columnNumber:14}},this.renderNavigationBack(),s.createElement("div",{className:"account-listing-large",__source:{fileName:Zp,lineNumber:630,columnNumber:9}},this.renderAllProfiles()),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Zp,lineNumber:633,columnNumber:9}},s.createElement("input",{type:"submit",className:"primary",onClick:this.createProfile,value:(0,ue.Z)("Add Person"),__source:{fileName:Zp,lineNumber:634,columnNumber:11}}))):"info"===this.state.accountState?s.createElement("div",{className:"account-dialog",__source:{fileName:Zp,lineNumber:643,columnNumber:14}},this.renderNavigationBack(),this.renderDialogHeader(),s.createElement("div",{className:"profile-stat",__source:{fileName:Zp,lineNumber:646,columnNumber:9}},this.renderProfileInfo())):this.props.activeProfile.guest?s.createElement("div",{className:"account-dialog",__source:{fileName:Zp,lineNumber:653,columnNumber:14}},this.renderInActiveProfiles(),this.renderGuestEntry()):s.createElement("div",{className:"account-dialog",__source:{fileName:Zp,lineNumber:659,columnNumber:12}},s.createElement("header",{__source:{fileName:Zp,lineNumber:660,columnNumber:7}},this.renderActiveProfileHeader()),s.createElement("div",{className:"popup-scrollarea",__source:{fileName:Zp,lineNumber:663,columnNumber:7}},!this.props.accountInfo.username&&!this.props.isLoggedIn&&this.renderSyncCTA(),this.renderInActiveProfiles(),this.renderManagePeople(),this.renderGuestEntry(),this.props.allProfiles.length>1&&this.renderExitUser()))}}Pp(Mp,"contextType",Vs.Z);const Op=(0,bi.Z)(Mp,Dp);var xp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountButton.jsx";function Lp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Rp="/resources/contact-person.png";class Bp extends s.PureComponent{constructor(...e){super(...e),Lp(this,"state",{popupVisible:!1,activeProfile:void 0,allProfiles:[],isLoggedIn:Fh.getState().hasToken,accountInfo:Fh.getState().accountInfo}),Lp(this,"profilesUpdated",(()=>{b.Z.runtimePrivate.getUserProfiles((e=>{const t=e.find((e=>!0===e.active));this.setState({allProfiles:e}),t&&this.setState({activeProfile:t})}))})),Lp(this,"onVivaldiAccountChange",(()=>{const e=Fh.getState();this.setState({isLoggedIn:e.hasToken&&e.isReady,accountInfo:e.accountInfo})})),Lp(this,"togglePopup",(()=>{this.setState((e=>({popupVisible:!e.popupVisible})))})),Lp(this,"hidePopup",(()=>{this.setState({popupVisible:!1})}))}componentDidMount(){b.Z.runtimePrivate.onProfilesUpdated.addListener(this.profilesUpdated),this.profilesUpdated(),this.vivaldiAccountStoreToken=Fh.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange()}componentWillUnmount(){b.Z.runtimePrivate.onProfilesUpdated.removeListener(this.profilesUpdated)}render(){let e=this.state.accountInfo.username,t=this.state.accountInfo.pictureUrl;const n=this.state.activeProfile;return n?(n.guest?(n.image=t=Rp,n.name=e=(0,ue.Z)("Guest User")):this.state.isLoggedIn||(e=n.name,t=n.customAvatar?n.customAvatar:n.image),t||(t=Rp),s.createElement(ko,{imagePath:t,tooltip:e,onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,className:"button-circularimage button-cropimage profile-popup",popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:260,size:this.props.size,__source:{fileName:xp,lineNumber:100,columnNumber:14}},s.createElement(Op,{activeProfile:n,allProfiles:this.state.allProfiles,hidePopup:this.hidePopup,isLoggedIn:this.state.isLoggedIn,accountInfo:this.state.accountInfo,__source:{fileName:xp,lineNumber:112,columnNumber:9}}))):null}}const Fp=Bp;var Up=n(91411),Vp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentPopup.jsx";function Hp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Wp extends s.PureComponent{constructor(...e){super(...e),Hp(this,"handleClickOutside",(e=>{this.props.onPopupClosed(e)})),Hp(this,"loadBlockedContent",(()=>{const e=Jt.Z.getActiveWebView();e&&e.allowBlockedInsecureContent(),Up.Z.resetPageHasBlockedContent(this.props.pageId)})),Hp(this,"allowCookiesContent",(()=>{const e=new URL(this.props.url).origin;b.Z.utilities.setContentSettings({type:"cookies",primaryPattern:e+"/*",secondaryPattern:"",value:"allow",incognito:!1}),Up.Z.resetPageHasBlockedContent(this.props.pageId)})),Hp(this,"openManageCookies",(()=>{se.Z.showSettings("privacy")}))}render(){return s.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:Vp,lineNumber:103,columnNumber:7}},s.createElement("header",{className:"addressfield-popup-header blocked-content",__source:{fileName:Vp,lineNumber:104,columnNumber:9}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.W4h.small},__source:{fileName:Vp,lineNumber:105,columnNumber:11}}),s.createElement("h1",{__source:{fileName:Vp,lineNumber:108,columnNumber:11}},(0,ue.Z)("Blocked Content"))),s.createElement("div",{className:"addressfield-popup-content blocked-content",__source:{fileName:Vp,lineNumber:111,columnNumber:9}},(()=>{let e=(0,sa.Map)();this.props.blockedPageContent.map((t=>{let n=e.get(t);e=n?e.set(t,++n):e.set(t,1)}));const t=[];for(const[n,i]of e)switch(n){case"ads":t.push(s.createElement("div",{className:"blocked-section",key:n,__source:{fileName:Vp,lineNumber:64,columnNumber:15}},(0,ue.Z)("Advertisements on this page are flagged as abusive and blocked.")));break;case"cookies":t.push(s.createElement("div",{className:"blocked-section",key:n,__source:{fileName:Vp,lineNumber:71,columnNumber:15}},(0,ue.Z)("$1 cookie is blocked","$1 cookies are blocked",[i]),s.createElement("div",{className:"clickable",onClick:this.allowCookiesContent,__source:{fileName:Vp,lineNumber:73,columnNumber:17}},(0,ue.Z)("Allow cookies for this site"))));break;case"mixed-script":t.push(s.createElement("div",{className:"blocked-section",key:n,__source:{fileName:Vp,lineNumber:81,columnNumber:15}},(0,ue.Z)("$1 unsafe resource is blocked","$1 unsafe resources are blocked",[i]),s.createElement("div",{className:"clickable",onClick:this.loadBlockedContent,__source:{fileName:Vp,lineNumber:87,columnNumber:17}},(0,ue.Z)("Load the unsafe resource","Load the unsafe resources",[i]))));break;default:console.warn("Unhandled blocked content $1",n)}return t})()),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Vp,lineNumber:115,columnNumber:9}},this.props.blockedPageContent.contains("cookies")&&s.createElement("input",{type:"button",onClick:this.openManageCookies,value:(0,ue.Z)("Manage Cookies"),__source:{fileName:Vp,lineNumber:117,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.props.onPopupClosed,value:(0,ue.Z)("Close"),__source:{fileName:Vp,lineNumber:123,columnNumber:11}})))}}const zp=(0,so.Z)(Wp);var Gp="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentNotificator.jsx";function Kp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jp extends s.Component{constructor(...e){super(...e),Kp(this,"state",{popupVisible:!1}),Kp(this,"onTogglePopupOpen",(e=>{e.preventDefault(),this.setState((e=>({popupVisible:!e.popupVisible})))})),Kp(this,"onClosePopup",(()=>{this.setState({popupVisible:!1})}))}render(){return s.createElement("div",{className:"button-toolbar",__source:{fileName:Gp,lineNumber:45,columnNumber:7}},s.createElement(ko,{image:cn.W4h.small,tooltip:(0,ue.Z)("Content has been blocked."),onClick:this.onTogglePopupOpen,popupPosition:this.props.position,className:"button-addressfield permission-popup is-blocking",hidePopup:this.onClosePopup,isPopupVisible:this.state.popupVisible,popupClassName:"addressfield-popup-container",popupWidth:240,__source:{fileName:Gp,lineNumber:46,columnNumber:9}},s.createElement(zp,{pageId:this.props.pageId,url:this.props.url,onPopupClosed:this.onClosePopup,blockedPageContent:this.props.blockedPageContent,__source:{fileName:Gp,lineNumber:56,columnNumber:11}})))}}const Yp=jp;var $p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkTreeTitleCell.jsx";function Xp({onExpandClick:e,inManager:t,fullView:n,node:i,inlineEditText:r,onChange:a,onBlur:o,onFocus:l,showBadge:c,onMouseEnter:u,onMouseLeave:m}){const d=16*(i.level+1)+"px",h=16*i.level+"px",p=Boolean(i.children),g=Boolean(p&&i.children.length);return s.createElement("label",{key:"0","data-parent":i.parentId,onMouseEnter:u,onMouseLeave:m,__source:{fileName:$p,lineNumber:44,columnNumber:10}},p&&g&&s.createElement("span",{className:"expand-icon",style:{marginLeft:h},onMouseUp:()=>e(i.id),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:$p,lineNumber:52,columnNumber:7}}),p&&i.trash&&s.createElement(Fs,{speeddial:i.speeddial,open:i.isExpanded,trash:!0,leftMargin:g?0:d,__source:{fileName:$p,lineNumber:61,columnNumber:7}}),p&&!i.trash&&s.createElement(Fs,{speeddial:i.speeddial,open:i.isExpanded,trash:!1,leftMargin:g?0:d,__source:{fileName:$p,lineNumber:70,columnNumber:7}}),!p&&s.createElement(Ls,{url:i.faviconUrl?i.faviconUrl:i.url,loadType:i.faviconUrl?"faviconFromCache":"page",style:{marginLeft:d},className:"tree-row-image",__source:{fileName:$p,lineNumber:79,columnNumber:7}}),void 0!==r&&s.createElement("input",{type:"text",value:r,onChange:a,onFocus:l,onBlur:o,autoFocus:!0,__source:{fileName:$p,lineNumber:91,columnNumber:7}}),void 0===r&&s.createElement("span",{className:"title",__source:{fileName:$p,lineNumber:102,columnNumber:7}},i.title?i.title:tn.ZP.isBookmark(i)&&!t?i.url:""),c&&g&&!n&&s.createElement("span",{className:"item-count",__source:{fileName:$p,lineNumber:113,columnNumber:7}},i.children.filter((e=>!tn.ZP.isSeparator(e))).length))}const Qp=class{constructor(e=!0){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1,this.multiSelect_=e}isSelected(e){for(const t of this.selectedIds_)if(t.id===e)return t.selected;return!1}get length(){return this.selectedIds_.length}get isSingleItemSelected(){return 1===this.selectedIds_.length}get FirstSingleItemSelected(){return this.isSingleItemSelected?this.selectedIds_[0].id:-1}get selectedIds(){return this.selectedIds_}resetSelectionModel(){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1}getData(){return{selectedIds_:this.selectedIds_,anchorIndex_:this.anchorIndex_,leadIndex_:this.leadIndex_}}setData(e){this.anchorIndex_=e.anchorIndex_,this.leadIndex_=e.leadIndex_,this.selectedIds_=e.selectedIds_}unSelectAll(){this.selectedIds_=[]}selectAll(e){this.multiSelect&&(e.forEach((e=>{this.selectedIds_.push({id:e,selected:!0})})),e.length>0&&(-1===this.anchorIndex_&&(this.anchorIndex_=e[0]),-1===this.leadIndex_&&(this.leadIndex_=e[0])))}setSelectedIds(e){this.multiSelect?this.selectedIds_=e.map((e=>({id:e,selected:!0}))):this.setIndexSelected(this.leadIndex,!0)}setLeadIndex(e){this.leadIndex=e}setIndexSelected(e,t){var n=this.selectedIds_.map((e=>e.id)).indexOf(e),s=this.selectedIds_[n];if((!s||s.selected!==t)&&(this.multiSelect||this.resetSelectionModel(),this.leadIndex=e,this.anchorIndex=e,-1!==e))if(t)this.selectedIds_.push({id:e,selected:t});else{var i=this.selectedIds_.map((e=>e.id)).indexOf(e);-1!==i&&this.selectedIds_.splice(i,1)}}get leadIndex(){return this.leadIndex_}set leadIndex(e){this.leadIndex_=e}get anchorIndex(){return this.anchorIndex_}set anchorIndex(e){this.anchorIndex_=e}get multiSelect(){return this.multiSelect_}set multiSelect(e){this.multiSelect_=e}};var qp=n(25401),Jp=n(34155);const eg={throttleSync:function(e,t={}){return function(){if(!t.isRunning){t.isRunning=!0;try{e.apply(this,arguments)}finally{Jp.nextTick((()=>{t.isRunning=!1}))}}}}};var tg="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TreeItem.jsx";function ng(){return ng=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ng.apply(this,arguments)}function sg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ig(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ag(e,t,"get"))}function rg(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ag(e,t,"set"),n),n}function ag(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function og(e,t,n){switch(e){case"style":case"componentProps":return po(t[e],n[e])}return(0,ho.Z)(t[e],n[e])}var lg=new WeakMap,cg=new WeakMap;class ug extends s.Component{constructor(...e){super(...e),lg.set(this,{writable:!0,value:{}}),cg.set(this,{writable:!0,value:void 0}),sg(this,"isFolder",(()=>this.props.isFolder(this.props.treeItem))),sg(this,"hasChildren",(()=>this.props.hasChildren(this.props.treeItem))),sg(this,"onClick",(e=>{this.props.onItemClick(this.props.treeItem,e),e.stopPropagation()})),sg(this,"onDoubleClick",(e=>{void 0===this.props.inlineEditText&&(this.isFolder()&&this.onExpandClick(e),this.props.onItemDoubleClick(this.props.treeItem,e))})),sg(this,"onDragStart",(e=>{const{inlineEditText:t,validateForDrag:n,getAllSelectedItems:s,mimeType:i}=this.props;if(!n||void 0!==t)return;let r=s().map((e=>e.id));r=n(r),0!==r.length&&(this.props.onDragStart(),i&&e.dataTransfer.setData(i,JSON.stringify(r)),e.dataTransfer.setData("text/uri-list",this.props.getDragData?.("text/uri-list",r)),e.dataTransfer.setData("text/plain",this.props.getDragData?.("text/plain",r)),e.dataTransfer.setData("vivaldi/x-title",this.props.getDragData?.("vivaldi/x-title",r)),this.props.setCustomDragData&&this.props.setCustomDragData(e.dataTransfer,r),e.dataTransfer.effectAllowed="all",rg(this,cg,!0),Nn.setWebviewPointerEvents(!1,this.context.document))})),sg(this,"onDragEnd",(e=>{rg(this,cg,!1),Nn.setWebviewPointerEvents(!0,this.context.document),this.props.onDragEnd()})),sg(this,"onDragEnter",(e=>{this.props.supportDrop&&rg(this,lg,this.props.supportDrop(this.props.treeItem,e))})),sg(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation(),!0===ig(this,lg).available&&this.props.onDrop(this.props.treeItem,ig(this,lg),e)})),sg(this,"onDragOver",(e=>{const{onDragOver:t,treeItem:n}=this.props;e.stopPropagation(),!0===ig(this,lg).available&&t&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",t(n,ig(this,lg),e))})),sg(this,"onDragLeave",(e=>{e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&!0===ig(this,lg).available&&this.props.onDragLeave(this.props.treeItem,e)})),sg(this,"onMouseDown",(e=>{const t=!this.props.isDraggable&&void 0===this.props.inlineEditText;this.props.onMouseDown(this.props.treeItem,t,e)})),sg(this,"onMouseUp",(e=>{this.props.onMouseUp(this.props.treeItem,e),0===e.buttons&&ig(this,cg)&&this.onDragEnd(e)})),sg(this,"onExpandClick",(e=>{this.props.treeItem.children&&this.props.treeItem.children.length>0&&(this.props.toggle(this.props.treeItem.id),e.preventDefault(),e.stopPropagation())}))}shouldComponentUpdate(e){return!po(this.props,e,og)}render(){const{Component:e,componentProps:t}=this.props,n=!!this.props.isSeparator&&this.props.isSeparator(this.props.treeItem),i=this.props.selected,r=this.props.dragOverObj.id===this.props.treeItem.id,a=this.props.dragOverObj.position;return s.createElement("div",{style:this.props.style,"data-id":this.props.treeItem.id,className:"tree-item","data-selected":i?"":null,"data-lead":this.props.lead?"":null,"data-cut":this.props.isCut?"":null,"data-expanded":this.props.isExpanded?"":null,onDragEnter:this.props.enableDragAndDrop?this.onDragEnter:null,onDragOver:this.props.enableDragAndDrop?this.onDragOver:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeave:null,onDrop:this.props.enableDragAndDrop?this.onDrop:null,onContextMenu:this.props.onContextMenu,__source:{fileName:tg,lineNumber:208,columnNumber:7}},s.createElement("div",{className:bn()("tree-row",{folder:this.isFolder(),"tree-row-selected":i,"tree-row-selected--first":this.props.isFirstSelected,"tree-row-selected--last":this.props.isLastSelected,dragover:r&&"on"===a,dragoverAbove:r&&"above"===a,dragoverBelow:r&&"below"===a,"speeddial-folder":this.isFolder()&&this.props.treeItem.speeddial}),"data-separator":n?"":null,"data-selected":i?"":null,"data-nofocus":i&&!this.props.hasFocus?"":null,onClick:this.onClick,onDoubleClick:this.onDoubleClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,draggable:this.props.isDraggable,onDragStart:this.props.enableDragAndDrop?this.onDragStart:null,onDragEnd:this.props.enableDragAndDrop?this.onDragEnd:null,__source:{fileName:tg,lineNumber:221,columnNumber:9}},s.createElement(e,ng({},t,{__source:{fileName:tg,lineNumber:242,columnNumber:11}}))))}}sg(ug,"contextType",Vs.Z);const mg=ug;var dg=n(52604),hg=n(45850);const pg=(e,t)=>{const n={...A.ZP.get(P.kAppearanceTreeColumnsEntries),[t]:e};st.Z.set(P.kAppearanceTreeColumnsEntries,n)},gg=()=>A.ZP.get(P.kAppearanceTreeColumnsEntries),bg=e=>e.filter((e=>e.visible)).reduce(((e,t)=>(e.push({id:t.value,width:t.width||100,key:t.key}),e)),[]),Ng=e=>e.map((e=>e.key?`minmax(${Math.min(e.width/2,100)}px, 1fr)`:`minmax(36px, ${e.width}px)`)).join(" ");var fg=n(94906),_g=n(34155),vg="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiTreeList.jsx";function Eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Cg=24;function wg(e){e.target.select()}class yg extends s.PureComponent{constructor(e){super(e),Eg(this,"emptyDragOverObj",{id:-1,position:""}),Eg(this,"refTreeListEntries",s.createRef()),Eg(this,"_dropSupport",{available:!1,onto:!1,edge:!1}),Eg(this,"inlineEditTimeoutId",-1),Eg(this,"expandTimer",void 0),Eg(this,"_leftMouseTimeStamp",0),Eg(this,"expandId",-1),Eg(this,"_isMounted",!1),Eg(this,"_hasCutCopyPasteListeners",!1),Eg(this,"_isComposing",!1),Eg(this,"_scrollTopNeedsUpdate",!1),Eg(this,"_canCutCopyPaste",!1),Eg(this,"resetSelectionModel",(()=>{this.selectionModel.resetSelectionModel(),this.updateSelectionState()})),Eg(this,"updateSelectionState",(e=>{this.forceUpdate(e)})),Eg(this,"SelectionMixinSelectAll",(()=>{this.selectionModel.selectAll(this.getAllIds()),this.updateSelectionState()})),Eg(this,"SelectionMixinSetLead",(e=>{this.selectionModel.setLeadIndex(e),this.updateSelectionState()})),Eg(this,"SelectionMixinSelectItem",((e,t,n,s,i)=>{this.selectionModel.setLeadIndex(e);const r=t;let a=this.selectionModel.isSelected(e);if(r||n)a=i||!a;else{if(i&&this.selectionModel.length>1)return;this.selectionModel.unSelectAll(),a=!0}if(n&&-1!==this.selectionModel.anchorIndex){const t=this.getSelectedIdsFromIdToAnchor(e);this.selectionModel.setSelectedIds(t)}else this.selectionModel.setIndexSelected(e,a);this.updateSelectionState()})),Eg(this,"getHeight",(()=>this.state.height)),Eg(this,"getSelectedIdsFromIdToAnchor",(e=>{const t=this.selectionModel.anchorIndex;return this.getIdsBetween(t,e)})),Eg(this,"_initializeSettings",(e=>{if(!e.settings)return;this._expandSettings="EXPAND_"+e.settings,this._scrollTopSettings="SCROLL_TOP_"+e.settings,this._scrollTopNeedsUpdate=!0,this._searchStyleSettings="SEARCH_STYLE_"+e.settings,this._onRowsRenderedOptions="ON_ROWS_RENDERED_OPTIONS_"+e.settings;let t={};"always"===e.defaultFolderExpansion?t=this.getAllFoldersExpandedModel(e.nodes):(t=d.Z.getSync("EXPAND_"+e.settings),t||"fallback"!==e.defaultFolderExpansion||(t=this.getAllFoldersExpandedModel(e.nodes)),t||(t={})),this.prepareDataForRender(e.nodes,t,e.sorting)})),Eg(this,"_updateSelectionStateIfNeeded",(e=>{if(e.settings){this._selectionSettings="SELECTION_"+e.settings;const t=d.Z.getSync(this._selectionSettings);if(t){const n=this.getSelectedItem();this.selectionModel.setData(t),this.updateSelectionState((()=>{const{onSelect:t}=e;if(t){const e=this.getSelectedItem();let s=-1;!e||n&&e.id===n.id?n&&(s=n.id):(s=e.id,t(e)),_g.nextTick((()=>{-1!==s&&this.scrollToId(s)}))}}))}else if(e.autoFocus&&e.nodes.length>0){const t=e.nodes[0].id;-1!==t&&_g.nextTick((()=>this.selectById(t)))}else this.resetSelectionModel()}})),Eg(this,"focusTree",(()=>{const e=pn.findDOMNode(this.refTreeListEntries.current);e instanceof HTMLElement&&e.focus()})),Eg(this,"prepareDataForRender",((e,t,n)=>{const s=this.getRenderedItems(e,t,n);this.setState({renderedArray:s,expandModel:t}),"function"==typeof this.props.rowHeight&&this.rerenderVisibleTreeItems()})),Eg(this,"setCutIds",(e=>{this.props.setCutIds&&this.props.setCutIds(e)})),Eg(this,"onCut",(e=>{e.preventDefault();const{isValidForClipboard:t}=this.props;if(!this._canCutCopyPaste||!t)return;const n=this.getAllSelectedItems().filter((e=>t(e))).map((e=>e.id));this.props.onCut?this.props.onCut(e,n):(this.setCutIds(n),this.setClipboard(e,!0))})),Eg(this,"onCopy",(e=>{const{isValidForClipboard:t,onCopy:n}=this.props;if(this._canCutCopyPaste&&t)if(n){n(e,this.getAllSelectedItems().filter((e=>t(e))).map((e=>e.id)))}else this.setClipboard(e,!1)})),Eg(this,"toggleSelectedExpansion",(e=>{this.stopInlineEditTimer();const t=e||this.selectionModel.leadIndex;if(-1===t)return;if(this.state.inlineEditId===t)return;const n=this.findTreeItem(t);n&&this.props.isFolder(n)&&this.toggleExpandModel(n.id)})),Eg(this,"expand",(e=>{const t=this.findTreeItem(e);t&&this.props.isFolder(t)&&!t.isExpanded&&this.toggleExpandModel(t.id)})),Eg(this,"collapse",(e=>{const t=this.findTreeItem(e);t&&this.props.isFolder(t)&&t.isExpanded&&this.toggleExpandModel(t.id)})),Eg(this,"toggleExpandModel",(e=>{this.state.expandModel[e]=void 0===this.state.expandModel[e]?!this.props.expandedByDefault:!this.state.expandModel[e],this.state.expandModel[e]===Boolean(this.props.expandedByDefault)&&delete this.state.expandModel[e],this.saveExpandModel(this.state.expandModel),this.prepareDataForRender(this.props.nodes,this.state.expandModel,this.props.sorting)})),Eg(this,"saveExpandModel",(e=>{if(this.props.settings&&"always"!==this.props.defaultFolderExpansion){const t={};t[this._expandSettings]=e,d.Z.set(t)}})),Eg(this,"saveSelectionModel",(()=>{if(this.props.settings){const e={};e[this._selectionSettings]=this.selectionModel.getData(),d.Z.set(e)}})),Eg(this,"_findTreeIndex",(e=>this.state.renderedArray.findIndex((t=>t.id===e)))),Eg(this,"_scrollLeadNodeIntoView",(()=>{const e=this._findTreeIndex(this.selectionModel.leadIndex);this.scrollIntoView(e)})),Eg(this,"getAllFoldersCollapsedModel",(e=>{const t={};if(this.props.expandedByDefault){const n=e=>{this.props.isFolder(e)&&(t[e.id]=!1),this.props.hasChildren(e)&&e.children.forEach(n)};e.forEach(n)}return t})),Eg(this,"collapseAll",(()=>{const e=this.getAllFoldersCollapsedModel(this.props.nodes);this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()})),Eg(this,"getAllFoldersExpandedModel",(e=>{const t={};if(!this.props.expandedByDefault){const n=e=>{this.props.isFolder(e)&&(t[e.id]=!0),this.props.hasChildren(e)&&e.children.forEach(n)};e.forEach(n)}return t})),Eg(this,"getExpandModel",(()=>this.state.expandModel)),Eg(this,"expandWithModel",(e=>{this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()})),Eg(this,"expandAll",(()=>{this.expandAllExcept([])})),Eg(this,"expandAllExcept",(e=>{const t=this.getAllFoldersExpandedModel(this.props.nodes);e.forEach((e=>{this.props.expandedByDefault?t[e]=!1:delete t[e]})),this.saveExpandModel(t),this.prepareDataForRender(this.props.nodes,t,this.props.sorting),this._scrollLeadNodeIntoView()})),Eg(this,"isExpanded",(e=>Boolean(this.findTreeItem(e)?.isExpanded))),Eg(this,"onImport",(()=>{this.props.onImport&&this.props.onImport()})),Eg(this,"setClipboard",((e,t)=>{const{isValidForClipboard:n,getDragData:s,mimeType:i}=this.props;if(!i||!n||!s)return;const r=this.getAllSelectedItems().filter((e=>n(e))).map((e=>e.id));e.clipboardData.setData("vivaldi/x-cut",t),e.clipboardData.setData(i,JSON.stringify(r)),e.clipboardData.setData("text/plain",s("text/plain",r));const a=this.selectionModel.leadIndex;-1!==a&&e.clipboardData.setData("text/html",s("text/html",[a])),e.stopPropagation(),e.preventDefault()})),Eg(this,"contextMenuSpy",(e=>{this._canCutCopyPaste=!1;const t=pn.findDOMNode(this);let n=e.target;for(;n;){if(n===t){this._canCutCopyPaste=!0;break}n=n.parentNode}})),Eg(this,"keyDownSpy",(e=>{this._canCutCopyPaste=!0})),Eg(this,"onPaste",(e=>{if(e.preventDefault(),!this._canCutCopyPaste)return;const{mimeType:t,onPaste:n}=this.props;if(n){const t=this.getSelectedItem();return void(t&&n(e,t))}if(!t)return;const s=this.getTargetFromSelection(),i=e.clipboardData;if(!i)return;const r=-1!==i.types.findIndex((e=>e===t))?JSON.parse(i.getData(t)):[];if(0===r.length)return;if("true"===i.getData("vivaldi/x-cut")){if(!(this.props.cutIds&&this.props.cutIds.length>0)||!this.props.onMove)return;this.props.onMove(r,s.parentId,s.index,"on").then((e=>{this.setCutIds([]),this.selectionModel.setSelectedIds(e);const{onSelect:t}=this.props;if(e.length>0&&t){const n=this.findTreeItem(e[0]);n&&t(n)}this.rerenderVisibleTreeItems()}))}else{const e=(0,ni.Z)(r.map((e=>this.findTreeItem(e))));this.props.onCreate&&this.props.onCreate(e,s.parentId,s.index,!1).then((e=>{const t=Array.isArray(e)?e:e?.items||[];Boolean(t)&&t.length>0&&(this.selectionModel.setSelectedIds(t.map((e=>e.id))),this.SelectionMixinSetLead(t[0].id),this.rerenderVisibleTreeItems())}))}})),Eg(this,"moveNode",((e,t)=>{this.props.onMove&&this.canMoveUpDown(e,t)&&(t?this.props.onMove([e.id],e.parentId,e.index-1,"above"):this.props.onMove([e.id],e.parentId,e.index+2,"below"))})),Eg(this,"canMoveUpDown",((e,t)=>{if(!0===t&&0===e.index)return!1;if(!1===t){let t=0;if(e.parentId===this.props.rootId)t=this.props.nodes.length,t>0&&this.props.nodes[t-1].trash&&t--;else{const n=this.findTreeItem(e.parentId);n&&n.children&&(t=n.children.length)}if(e.index+1>=t)return!1}const n=!!this.props.sorting&&this.props.sorting.sortOrder!==ti.Z.NO_SORTING,s=!this.props.supportsUpDownMove||this.props.supportsUpDownMove(e,t);return!n&&s})),Eg(this,"getKeyEventMap",(()=>({esc:this.onKeyEscUp,up:this.onKeyArrowUp,down:this.onKeyArrowDown,"alt+up":this.onKeyArrowUp,"alt+down":this.onKeyArrowDown,left:this._collapseFolderOrSelectParent,right:this._expandFolder,del:this.onKeyDelete,home:this.onKeyHome,end:this.onKeyEnd,pageup:this.onKeyPageUp,pagedown:this.onKeyPageDown,"shift+del":this.onKeyShiftDelete,"shift+up":this.onKeyArrowUp,"shift+down":this.onKeyArrowDown,"shift+home":this.onKeyHome,"shift+end":this.onKeyEnd,"shift+pageup":this.onKeyPageUp,"shift+pagedown":this.onKeyPageDown,"ctrl+a":this.onKeySelectAll,"ctrl+left":this._collapseFolderOrSelectParent,"ctrl+right":this._expandFolder,"ctrl+space":this.onKeyCtrlSpace,"ctrl+up":this.onKeyCtrlUp,"ctrl+down":this.onKeyCtrlDown}))),Eg(this,"enableCutCopyPasteListeners",(e=>{if(this._canCutCopyPaste=e,this._hasCutCopyPasteListeners!==e){this._hasCutCopyPasteListeners=e;const{document:t}=this.context;this._hasCutCopyPasteListeners?(t.addEventListener("cut",this.onCut),t.addEventListener("copy",this.onCopy),t.addEventListener("paste",this.onPaste),t.addEventListener("contextmenu",this.contextMenuSpy),t.addEventListener("keydown",this.keyDownSpy)):(t.removeEventListener("cut",this.onCut),t.removeEventListener("copy",this.onCopy),t.removeEventListener("paste",this.onPaste),t.removeEventListener("contextmenu",this.contextMenuSpy),t.removeEventListener("keydown",this.keyDownSpy))}})),Eg(this,"onLostFocus",(()=>{this.stopInlineEditTimer(),this.enableCutCopyPasteListeners(!1),this.setState({hasFocus:!1})})),Eg(this,"onGotFocus",(()=>{if(-1===this.state.inlineEditId){let e=this.getSelectedItem();e&&-1===this._findTreeIndex(e.id)&&(e=void 0),this.props.autoFocus&&!e&&this.state.renderedArray.length>0&&this.selectById(this.state.renderedArray[0].id),this.enableCutCopyPasteListeners(!0),this.setState({hasFocus:!0})}})),Eg(this,"scrollIntoView",(e=>{this.refTreeListEntries.current?.scrollToRow(e)})),Eg(this,"setSelectedIds",(e=>{this.selectionModel.resetSelectionModel(),this.selectionModel.selectAll(e),this.saveSelectionModel(),this.updateSelectionState()})),Eg(this,"selectByIndex",(e=>{this.state.renderedArray.length>e&&this.selectByNode(this.state.renderedArray[e])})),Eg(this,"selectById",((e,t,n)=>{const s=-1===e?void 0:this.props.onSelect?this.findTreeItem(e):{id:e};this.selectByNode(s,t,n)})),Eg(this,"selectByNode",((e,t,n)=>{const s=e?e.id:-1;this.props.onSelect&&(e&&this.selectionModel.FirstSingleItemSelected===e.id||this.props.onSelect(e)),n||(n=this._findTreeIndex(s)),-1!==n&&this.scrollIntoView(n),t?this.SelectionMixinSelectItem(s,t.ctrlKey,t.shiftKey,t.metaKey,"contextmenu"===t.type):this.SelectionMixinSelectItem(s),this.saveSelectionModel()})),Eg(this,"scrollToId",(e=>{this.scrollIntoView(this._findTreeIndex(e))})),Eg(this,"onItemClick",((e,t)=>{t.stopPropagation(),this.props.onItemClick&&this.props.onItemClick(t,e)})),Eg(this,"onItemDoubleClick",((e,t)=>{this.stopInlineEditTimer(),this.props.onItemDoubleClick&&(this.props.canDoubleClick&&this.props.canDoubleClick(e)||!this.props.isFolder(e))&&this.props.onItemDoubleClick(t,e)})),Eg(this,"onItemMouseDown",((e,t,n)=>{if(Nn.isNavigationButton(n.button))return;const s=this.selectionModel.selectedIds;let i=!1;for(const t of s)if(t.id===e.id){i=!0;break}this.state.hasFocus&&i&&1===s.length&&n.button===Nn.kLeft&&!(0,hg.Z)(n)&&n.target instanceof HTMLElement&&"title"===n.target.className&&n.timeStamp-this._leftMouseTimeStamp>300?this.startInlineEditTimerForId(e.id):this.stopInlineEditTimer();const r=n.ctrlKey;i&&!r||(i&&r&&1===s.length?this.unSelectAll():this.selectByNode(e,n)),"function"==typeof this.props.onItemMouseDown&&this.props.onItemMouseDown(e,n),n.button===Nn.kLeft&&(this._leftMouseTimeStamp=n.timeStamp),t&&this.focusTree()})),Eg(this,"onItemMouseUp",((e,t)=>{if(Nn.isNavigationButton(t.button))return;const n=this.selectionModel.selectedIds,s=t.ctrlKey;n.length>1&&t.button!==Nn.kRight&&!s&&this.selectByNode(e,t),this.props.onItemMouseUp?.(e,t)})),Eg(this,"onContextMenuOpen",((e,t)=>{t&&this.scrollIntoView(this._findTreeIndex(t.id))})),Eg(this,"rerenderVisibleTreeItems",(()=>{this.refTreeListEntries.current?.recomputeRowHeights()})),Eg(this,"getParentAndIndex",((e,t)=>{let n,s;if(e)if(this.props.isFolder(e))n=e.id,!e.isExpanded&&t&&this.toggleExpandModel(e.id);else{n=e.parentId;const{id:t}=e;if(n===this.props.rootId)this.props.nodes&&(s=this.props.nodes.findIndex((e=>e.id===t))+1);else{const e=this.findTreeItem(n);e&&e.children&&(s=e.children.findIndex((e=>e.id===t))+1)}}else n=this.props.rootId;return{parentId:n,index:s}})),Eg(this,"getTargetFromSelection",(()=>{const e=this.selectionModel.FirstSingleItemSelected;let t;return e&&-1!==e&&(t=this.findTreeItem(e),this.props.isValidAddTarget&&!this.props.isValidAddTarget(t)&&(t=void 0)),this.getParentAndIndex(t,!0)})),Eg(this,"onAdd",(async(e,t)=>{const n={children:e?[]:void 0,isNew:!0};t&&(n.title=t.title,n.content=t.content,n.url=t.url,n.separator=t.separator);const{parentId:s,index:i}=this.getTargetFromSelection();if(!this.props.onCreate)return;const r=await this.props.onCreate([n],s,i,!0);if(!r)return;const a=Array.isArray(r)?r:r.items,o=!Array.isArray(r)&&r.props.edit;if(1!==a.length)return;const[l]=a;this.getSelected()!==l.id&&this.selectByNode(l),o&&this.startInlineEdit(l.id)})),Eg(this,"onSave",(()=>{const{onSave:e}=this.props;e&&e(this.getAllSelectedItems().map((e=>e.id)))})),Eg(this,"onSaveAll",(()=>{this.props.onSave&&this.props.onSave([])})),Eg(this,"onExport",(()=>{const{onExport:e}=this.props;e&&e(this.getAllSelectedItems().map((e=>e.id)))})),Eg(this,"onExportAll",(()=>{this.props.onExport&&this.props.onExport([])})),Eg(this,"onDelete",(e=>{let t=this.getAllSelectedItems().map((e=>e.id));return this.props.validateForDeletion&&(t=this.props.validateForDeletion(t)),this.setState({isDeleting:!0}),this.onDeleteItems(t,e)})),Eg(this,"onDeleteItems",((e,t)=>{if(e&&e.length>0){let n=-1;const s=this.selectionModel.selectedIds;for(const e of s){const t=this._findTreeIndex(e.id);(-1===n||t<n)&&(n=t)}n<0&&(n=0);const i=this.state.renderedArray[n];if(!this.props.delete)return Promise.resolve();let r=void 0!==i.parentId?this.findTreeItem(i.parentId):void 0;return this.props.delete(e,t).then((()=>{if(this.props.disableSelectAfterDelete)return;const t=this.state.renderedArray.filter((t=>!e.includes(t.id)));if(0===t.length)this.selectByNode(void 0);else if(r)if(this.props.hasChildren(r)&&(r={...r},r.children=r.children.filter((t=>!e.includes(t.id))),r.children=this.sortItems(r.children,this.props.sorting)),this.props.hasChildren(r)){const e=r.children;if(1===e.length)this.selectByNode(e[0]);else{const s=e[0],i=e[e.length-1],r=this._findTreeIndex(s.id),a=this._findTreeIndex(i.id);if(n<=r)this.selectByNode(s);else if(n>=a)this.selectByNode(i);else{let s=0;if(a-r+1>e.length){const e=n-r;for(let n=0;n<e;n++){const e=t[r+n];this.props.hasChildren(e)&&e.isExpanded&&(s-=e.children.length)}}const i=e[n-r+s];this.selectByNode(i)}}}else this.selectByNode(r);else{let e=this.state.renderedArray.filter((e=>e.parentId===this.props.rootId||!0===e.trash));const s=e.findIndex((e=>e.id===i.id));if(s>=0){e=t.filter((e=>e.parentId===this.props.rootId||!0===e.trash));const n=e.length-1,i=e[Math.min(s,n)];this.selectByNode(i)}else{const e=t.length-1,s=t[Math.min(n,e)];this.selectByNode(s)}}})).catch((()=>{}))}return Promise.resolve()})),Eg(this,"onKeyCtrlUp",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t);if(0===n)return;const s=-1===n?this.state.renderedArray.length-1:n-1;if(s<0)return;const i=this.state.renderedArray[s];this.SelectionMixinSetLead(i.id),this.scrollIntoView(s)}))),Eg(this,"onKeyCtrlDown",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t);if(n===this.state.renderedArray.length-1)return;const s=n+1,i=this.state.renderedArray[s];this.SelectionMixinSetLead(i.id),this.scrollIntoView(s)}))),Eg(this,"onKeyArrowDown",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t);if(n!==this.state.renderedArray.length-1){if(!0===e.altKey)this.moveNode(this.state.renderedArray[n],!1);else{const t=n+1,s=this.state.renderedArray[t];this.selectByNode(s,e,t)}e.preventDefault(),e.stopPropagation()}}))),Eg(this,"onKeyArrowUp",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t);if(0!==n){if(!0===e.altKey)this.moveNode(this.state.renderedArray[n],!0);else{const t=-1===n?this.state.renderedArray.length-1:n-1;if(t<0)return;const s=this.state.renderedArray[t];this.selectByNode(s,e,t)}e.preventDefault(),e.stopPropagation()}}))),Eg(this,"onKeyEscUp",(e=>{this.selectionModel.setSelectedIds([])})),Eg(this,"onKeyHome",(e=>{const t=this.state.renderedArray[0];this.selectByNode(t,e,0),e.preventDefault(),e.stopPropagation()})),Eg(this,"onKeyEnd",(e=>{const t=this.state.renderedArray.length,n=this.state.renderedArray[t-1];this.selectByNode(n,e,t-1),e.preventDefault(),e.stopPropagation()})),Eg(this,"onKeyPageDown",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t),s=this.state.renderedArray.length;let i=this.state.height,r=n;for(;r<s-1;){const e="function"==typeof this.props.rowHeight?this.props.rowHeight({index:r}):this.props.rowHeight||Cg;if(!(i>=e))break;i-=e,r++}if(r===n)return;const a=this.state.renderedArray[r];this.selectByNode(a,e,r),e.preventDefault(),e.stopPropagation()}))),Eg(this,"onKeyPageUp",eg.throttleSync((e=>{const t=this.selectionModel.leadIndex,n=this._findTreeIndex(t);let s=this.state.height,i=n;for(;i>0;){const e="function"==typeof this.props.rowHeight?this.props.rowHeight({index:i}):this.props.rowHeight||Cg;if(!(s>=e))break;s-=e,i--}if(i===n)return;const r=this.state.renderedArray[i];this.selectByNode(r,e,i),e.preventDefault(),e.stopPropagation()}))),Eg(this,"onKeyShiftDelete",(e=>{this.onKeyDelete(e,!0)})),Eg(this,"onKeyDelete",((e,t=!1)=>{this.onDelete(t),e.preventDefault(),e.stopPropagation()})),Eg(this,"onKeySelectAll",(()=>{this.SelectionMixinSelectAll(),this.saveSelectionModel()})),Eg(this,"onKeyCtrlSpace",(e=>{const t=this.selectionModel.leadIndex;this.SelectionMixinSelectItem(t,e.ctrlKey,e.shiftKey,e.metaKey,"contextmenu"===e.type)})),Eg(this,"_setExpandState",((e,t)=>{if(this.state.expandModel&&this.selectionModel.isSingleItemSelected){const e=this.findTreeItem(this.selectionModel.leadIndex);e&&(e.isExpanded&&!t||!e.isExpanded&&t)&&-1!==this.selectionModel.FirstSingleItemSelected&&this.toggleExpandModel(this.selectionModel.FirstSingleItemSelected)}e.preventDefault(),e.stopPropagation()})),Eg(this,"_collapseFolderOrSelectParent",(e=>{const t=this.getSelectedItem();if(t&&!0===this.isfolderAndHasItems(t)&&t.isExpanded)this._setExpandState(e,!1);else{const e=this.selectionModel.leadIndex;if(e){const t=this._findTreeIndex(e);if(t){const e=this.state.renderedArray[t].level;for(let n=t-1;n>=0;n--){const t=this.state.renderedArray[n];if(t.level<e){this.selectByNode(t);break}}}}}})),Eg(this,"expandToId",(e=>{let t=this.findTreeItem(e);for(;t;)t=this.findTreeItem(t.parentId),t&&this.isFolder(t)&&!t.isExpanded&&this.toggleExpandModel(t.id)})),Eg(this,"_expandFolder",(e=>{const t=this.getSelectedItem();t&&!0===this.isfolderAndHasItems(t)&&this._setExpandState(e,!0)})),Eg(this,"unSelectAll",(()=>{this.selectByNode(void 0)})),Eg(this,"isItemLead",(e=>e===this.selectionModel.leadIndex)),Eg(this,"isItemSelected",(e=>this.selectionModel.isSelected(e))),Eg(this,"supportDropForItem",((e,t)=>this.props.getDropSupport?this.props.getDropSupport(e,t):{available:!1,onto:!1,edge:!1})),Eg(this,"onDragLeaveItem",((e,t)=>{this.cancelDragOverObject(),this.resetAutoExpandTimer()})),Eg(this,"onDragOverItem",((e,t,n)=>{const s=n.currentTarget;if(!this.supportDropForItem(e,n).available)return;const i=s.getBoundingClientRect(),r="function"==typeof this.props.rowHeight?this.props.rowHeight({index:e.treeIndex}):this.props.rowHeight||Cg,a=(n.clientY-i.top)/r;let o="";!0===t.onto?o=a<=.25?t.edge?"above":"on":a>.75&&t.edge?"below":"on":t.edge&&(a<=.5?o="above":a>.5&&(o="below")),(this.state.dragOverObj.id!==e.id||this.state.dragOverObj.id===e.id&&this.state.dragOverObj.position!==o)&&this.setState({dragOverObj:{id:e.id,position:o}},this.initAutoExpandTimer(e,o))})),Eg(this,"initAutoExpandTimer",((e,t)=>{e.isExpanded||!this.props.isFolder(e)||"on"!==t?this.resetAutoExpandTimer():this.expandId!==e.id&&(this.resetAutoExpandTimer(),this.expandId=e.id,this.expandTimer=setTimeout(this.onAutoExpandTimer,1200))})),Eg(this,"resetAutoExpandTimer",(()=>{this.expandTimer&&(clearTimeout(this.expandTimer),this.expandTimer=void 0,this.expandId=-1)})),Eg(this,"onAutoExpandTimer",(()=>{-1!==this.expandId&&(this.state.dragOverObj.id===this.expandId&&"on"===this.state.dragOverObj.position&&this.toggleExpandModel(this.expandId),this.resetAutoExpandTimer())})),Eg(this,"onDragEmptyArea",(e=>{if(this.state.renderedArray.length>0){const t=this.state.renderedArray[this.state.renderedArray.length-1];this._dropSupport=this.supportDropForItem(t,e),this._dropSupport.available&&this._dropSupport.edge&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",this.state.dragOverObj.id!==t.id&&"below"!==this.state.dragOverObj.position&&this.setState({dragOverObj:{id:t.id,position:"below"}}))}e.stopPropagation()})),Eg(this,"onDropEmptyArea",(e=>{if(this.resetAutoExpandTimer(),this.state.renderedArray.length>0&&this._dropSupport.available){const t=this.state.renderedArray[this.state.renderedArray.length-1];this.onDrop(t,this._dropSupport,e),this._dropSupport={available:!1,onto:!1,edge:!1}}e.preventDefault(),e.stopPropagation()})),Eg(this,"onDrop",((e,t,n)=>{this.resetAutoExpandTimer();const s=en.ZP.isCopyModifierPressed(n),i=this.state.dragOverObj.position,{mimeType:r}=this.props;switch(i){case"above":case"below":if(!1===t.edge)return void this.cancelDragOverObject();break;case"on":if(!1===t.onto)return void this.cancelDragOverObject();break;default:return void this.cancelDragOverObject()}let a;if(r&&n.dataTransfer&&-1!==n.dataTransfer.types.findIndex((e=>e===r))?a=JSON.parse(n.dataTransfer.getData(r)):this.props.onDrop&&this.props.onDrop(n,e,i).then((e=>{this.cancelDragOverObject(),e&&e.length>0&&this.selectByNode(e[0])})),!a||a.length<=0)return void this.cancelDragOverObject();const o=this.props.isFolder(e);let l=!1,c={id:e.id,index:0,parentId:void 0};this.props.getTargetSpec?c=this.props.getTargetSpec(e,i):"above"===i?(c.index=parseInt(e.index),c.parentId=e.parentId):"on"===i?c.parentId=o?e.id:e.parentId:"below"===i&&(e.isExpanded?c.parentId=e.id:(c.index=parseInt(e.index)+1,c.parentId=e.parentId));const u=a.map((t=>{if(t===e.id)return void(l=!0);const n=this.findTreeItem(t);if(s||!this.props.isFolder(n)||!n||!this.findItemInFolder(n,e.id))return n;l=!0})).filter((e=>null!==e));if(l||u.length<=0)this.cancelDragOverObject();else if(s){const e=(0,ni.Z)(u);this.props.onCreate&&this.props.onCreate(e,c.parentId,c.index,!1).then(this.cancelDragOverObject())}else{const e=u.map((e=>e.id));this.props.onMove?.(e,c.parentId,c.index,i).then((()=>{this.cancelDragOverObject()}))}})),Eg(this,"cancelDragOverObject",(()=>{this.setState({dragOverObj:this.emptyDragOverObj})})),Eg(this,"onDragEndItem",(()=>{this.cancelDragOverObject()})),Eg(this,"onCompositionStart",(()=>{this._isComposing=!0})),Eg(this,"onCompositionEnd",(()=>{this._isComposing=!1})),Eg(this,"onKeyDown",(async e=>{const t=(0,uh.VV)(e);if(this.stopInlineEditTimer(),-1!==this.state.inlineEditId)return void("Escape"===e.key&&t?(e.preventDefault(),await this.cancelInlineEdit(),this.focusTree()):"Enter"!==e.key||this._isComposing?"F2"===e.key&&e.preventDefault():(e.preventDefault(),await this.saveInlineEdit(),this.focusTree()));if("Escape"===e.key&&t)this.setCutIds([]),e.preventDefault();else if(this.props.supportsInlineEdit&&"F2"===e.key){const t=!0===this.props.supportsInlineEdit?this.getSelectedItem():void 0;if(t){return void(this.startInlineEdit(t.id)&&e.preventDefault())}}let n=!1;if(this.props.onItemsActivated&&"Enter"===e.key){if(!1===e.repeat){const t=this.getAllSelectedItems();t&&this.props.onItemsActivated&&this.props.onItemsActivated(e,t)}n=!0,e.preventDefault()}var s=Wl.Z.keyComboFromEvent(e.nativeEvent),i=this.getKeyEventMap()[s];i&&i(e.nativeEvent),!n&&this.props.onKeyDown&&this.props.onKeyDown(e)})),Eg(this,"startInlineEditTimerForId",(e=>{this.stopInlineEditTimer(),!0===this.props.supportsInlineEdit&&(this.inlineEditTimeoutId=setTimeout(this.startInlineEdit.bind(this,e),700))})),Eg(this,"stopInlineEditTimer",(()=>{-1!==this.inlineEditTimeoutId&&(clearTimeout(this.inlineEditTimeoutId),this.inlineEditTimeoutId=-1)})),Eg(this,"startInlineEditForSelectedItem",(()=>{const e=this.selectionModel.FirstSingleItemSelected;-1!==e&&this.startInlineEdit(e)})),Eg(this,"startInlineEdit",(e=>{const t=this.selectionModel.selectedIds;if(1===t.length&&t[0].id===e){const t=this.state.renderedArray.filter((t=>t.id===e));if(1===t.length&&this.props.isValidToEdit?.(t[0].id))return this.setState({inlineEditId:e,inlineEditText:this.props.getTitle?this.props.getTitle(e):""}),!0}return!1})),Eg(this,"getInlineEditId",(()=>-1===this.state.inlineEditId?void 0:this.state.inlineEditId)),Eg(this,"setInlineEditText",(e=>{const t=e.target.value;this.setState({inlineEditText:t})})),Eg(this,"cancelInlineEdit",(()=>new Promise((e=>{this.setState({inlineEditId:-1,inlineEditText:""},e)})))),Eg(this,"saveInlineEdit",(()=>new Promise(((e,t)=>{if(-1===this.state.inlineEditId||!this.props.saveTitle)return t();this.props.saveTitle(this.state.inlineEditId,this.state.inlineEditText),this.setState({inlineEditId:-1,inlineEditText:""},e)})))),Eg(this,"onRowsRendered",(e=>{this.props.onRowsRendered&&(this.props.onRowsRendered(e),d.Z.set({[this._onRowsRenderedOptions]:e})),this.updateScrollTop()})),Eg(this,"updateScrollTop",(()=>{if(this._scrollTopNeedsUpdate){this._scrollTopNeedsUpdate=!1;const e=d.Z.getSync(this._scrollTopSettings);this.refTreeListEntries.current?.scrollToPosition(e)}})),Eg(this,"onScroll",(0,za.Z)((e=>{const{scrollTop:t}=e;this._scrollTopSettings&&d.Z.set({[this._scrollTopSettings]:t})}),500)),Eg(this,"getSelectedItem",(()=>this.findTreeItem(this.selectionModel.leadIndex))),Eg(this,"isFolder",(e=>e&&this.props.isFolder(e))),Eg(this,"isfolderAndHasItems",(e=>e.children&&e.children.length>0)),Eg(this,"getSelected",(()=>this.selectionModel.FirstSingleItemSelected)),Eg(this,"getRenderedItems",((e,t,n)=>{const s=[];if(!e||0===e.length)return s;e=this.sortItems(e,n);const i=n&&n.sortOrder!==ti.Z.NO_SORTING,r=e=>{if(!(i&&this.props.isSeparator&&this.props.isSeparator(e)))if(s.push(e),this.props.hasChildren(e)){if(e.isExpanded="0"===e.id||(t&&this.props.expandedByDefault?!1!==t[e.id]:t[e.id]||!1),e.isExpanded)for(const t of e.children)t.level=e.level+1,r(t)}else delete e.isExpanded};for(const t of e)t.level=0,r(t);return s})),Eg(this,"canSort",(e=>e&&e.sortOrder&&e.sortOrder!==ti.Z.NO_SORTING)),Eg(this,"sortItems",((e,t)=>{if(!t||!this.canSort(t))return e;!1!==this.props.supportsDeepCopy&&(e=(0,ni.Z)(e));const n=t.comparator||ti.Z.getDefaultComparator(t.sortOrder,t.sortField);return ti.Z.treeSort(e,n),e})),Eg(this,"getSelectedFromTree",(()=>{const e=[],t=function(n,s){for(let i=0;i<s.length;i++){const r=s[i];n.selectionModel.isSelected(r.id)?e.push(r):r.children&&t(n,r.children)}};return t(this,this.props.nodes),e})),Eg(this,"getAllSelectedItems",(()=>{const e=this.selectionModel.selectedIds;if(0===e.length)return e;if(e.length>1&&!this.canSort(this.props.sorting))return this.getSelectedFromTree();const t=function(e,n){for(let s=0;s<e.length;s++){let i=e[s];if(i.id===n)return i;if(i.children&&(i=t(i.children,n),i))return i}},n=e.map((e=>t(this.props.nodes,e.id))).filter((e=>void 0!==e));return this.sortItems(n,this.props.sorting)})),Eg(this,"findTreeItem",(e=>{let t=null;const n=s=>{if(s.id===e)return t=s;s.children&&s.children.forEach(n)};return this.props.nodes.forEach(n),t})),Eg(this,"findItemInFolder",((e,t)=>{let n=null;const s=e=>{if(e.id===t)return n=e;e.children&&e.children.forEach(s)};return e.children.forEach(s),n})),Eg(this,"getIdsBetween",((e,t)=>{const n=this._findTreeIndex(e),s=this._findTreeIndex(t);let i=[];return i=n>s?this.state.renderedArray.slice(s,n+1):this.state.renderedArray.slice(n,s+1),i.map((e=>e.id))})),Eg(this,"getAllIds",(()=>this.state.renderedArray.map(((e,t)=>e.id||t)))),Eg(this,"getSearchStyle",(()=>{let e=d.Z.getSync(this._searchStyleSettings);return void 0===e&&(e="tree"),e})),Eg(this,"setSearchStyle",(e=>{const t={};t[this._searchStyleSettings]=e,d.Z.set(t,(()=>{this.props.onSearchStyleChanged&&this.props.onSearchStyleChanged(e)}))})),Eg(this,"getNamedContextMenuItems",((e,t)=>{const n=Ss.getOptionFunction(e.name),{document:s}=this.context,i=e.getState?e.getState():{};return Ss.getNamedMenu(e.name,(async r=>{switch(r.action){case"CONTEXT_EXPAND_ALL":return{handler:this.expandAll,visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_COLLAPSE_ALL":return{handler:this.collapseAll,...n(r,i),visible:e.getVisibility(r,t)};case"CONTEXT_NEW_ITEM":return{handler:()=>{this.onAdd(!1)},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_NEW_FOLDER":return{handler:()=>{this.onAdd(!0)},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_NEW_SEPARATOR":return{handler:()=>{this.onAdd(!1,{separator:!0})},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_EDIT":return{handler:()=>{this.props.onEdit?.()},visible:e.getVisibility(r,t)&&"function"==typeof this.props.onEdit,...n(r,i)};case"CONTEXT_RENAME":return{handler:()=>{this.startInlineEditForSelectedItem()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_CUT":return{handler:()=>{s.execCommand("cut")},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_COPY":return{handler:()=>{s.execCommand("copy")},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_PASTE":return{handler:()=>{s.execCommand("paste")},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_SAVE":return{handler:()=>{this.onSave()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_SAVE_ALL":return{handler:()=>{this.onSaveAll()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_EXPORT":return{handler:()=>{this.onExport()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_EXPORT_ALL":return{handler:()=>{this.onExportAll()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_DELETE":return{handler:()=>{this.onDelete(!1)},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_IMPORT":return{handler:()=>{this.onImport()},visible:e.getVisibility(r,t),...n(r,i)};case"CONTEXT_CONTAINER_SEARCH":{const s=this.getSearchStyle();return{items:[{type:"radio",radiogroup:1,checked:"flat"===s,handler:this.setSearchStyle.bind(this,"flat"),...(0,Mn.Z)("Flat Search")},{type:"radio",radiogroup:1,checked:"tree"===s,handler:this.setSearchStyle.bind(this,"tree"),...(0,Mn.Z)("Tree Search")}],visible:e.getVisibility(r,t),...n(r,i)}}default:return e.getCapability(r,n,t,i)}}))})),Eg(this,"getContextMenuItemsPromise",(e=>this.props.getContextMenuItemsPromise?this.props.getContextMenuItemsPromise(e).then((t=>this.appendStandardMenuItems(e,t))):Promise.resolve([]))),Eg(this,"getContextMenuItems",(e=>{if(!0===this.props.appendContextItems){let t=this.appendStandardMenuItems(e,[]);const n=this.props.getContextMenuItems?this.props.getContextMenuItems(e):[];return t.length>0&&n.length>0&&(t=t.concat([z.Z.separatorItem]),t=t.concat(n)),t}{const t=this.props.getContextMenuItems?this.props.getContextMenuItems(e):[];return this.appendStandardMenuItems(e,t)}})),Eg(this,"appendStandardMenuItems",((e,t)=>{const n=this.props.getContextMenuItemProps?this.props.getContextMenuItemProps(e):{},s=()=>{t.length>0&&(t=t.concat([z.Z.separatorItem]))};if((n.showNewItem||n.showNewFolder||n.showNewSeparator||n.showEdit||n.showMoveUp||n.showMoveDown||n.showRename)&&(s(),n.showNewItem&&t.push({handler:()=>{this.onAdd(!1)},testVisibility:()=>n.showNewItem,...this.props.getContextMenuNewItemString?this.props.getContextMenuNewItemString():{label:"",labelEnglish:""}}),n.showNewFolder&&t.push({handler:()=>{this.onAdd(!0)},testVisibility:()=>n.showNewFolder,...(0,Mn.Z)("command","New Folder")}),n.showNewSeparator&&t.push({handler:()=>{this.onAdd(!1,{separator:!0})},testVisibility:()=>n.showNewSeparator,...(0,Mn.Z)("New Separator")}),(n.showEdit||n.showRename)&&s(),n.showEdit&&t.push({handler:()=>{this.props.onEdit&&this.props.onEdit()},testVisibility:()=>n.showEdit,...(0,Mn.Z)("verb","Edit")}),n.showRename&&t.push({handler:()=>this.startInlineEditForSelectedItem(),testVisibility:()=>n.showRename,...(0,Mn.Z)("Rename")}),(n.showMoveUp||n.showMoveDown)&&(s(),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!0)},testVisibility:()=>n.showMoveUp,...(0,Mn.Z)("Move Up")}),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!1)},testVisibility:()=>n.showMoveDown,...(0,Mn.Z)("Move Down")}))),n.showCut||n.showCopy||n.showPaste){s();const{document:e}=this.context;t=t.concat([{handler:()=>{e.execCommand("cut")},visible:!0===n.showCut,...(0,Mn.Z)("verb","Cut")},{handler:()=>{e.execCommand("copy")},visible:!0===n.showCopy,...this.props.getContextMenuCopyString?this.props.getContextMenuCopyString():(0,Mn.Z)("verb","Copy")},{handler:()=>{e.execCommand("paste")},visible:!0===n.showPaste,...(0,Mn.Z)("verb","Paste")}])}if((n.showSave||n.showSaveAll)&&(s(),n.showSave&&(t=t.concat([{handler:()=>{this.onSave()},...this.props.getContextMenuSaveString?this.props.getContextMenuSaveString():(0,Mn.Z)("verb","Save")}])),n.showSaveAll&&(t=t.concat([{handler:()=>{this.onSaveAll()},...this.props.getContextMenuSaveAllString?this.props.getContextMenuSaveAllString():(0,Mn.Z)("verb","Save All")}]))),(n.showExport||n.showExportAll)&&(s(),n.showExport&&(t=t.concat([{handler:()=>{this.onExport()},...this.props.getContextMenuExportString?this.props.getContextMenuExportString():(0,Mn.Z)("verb","Export")}])),n.showExportAll&&(t=t.concat([{handler:()=>{this.onExportAll()},...this.props.getContextMenuExportAllString?this.props.getContextMenuExportAllString():(0,Mn.Z)("verb","Export All")}]))),n.showDelete&&(s(),t.push({handler:()=>{this.onDelete(!1)},...this.props.getContextMenuDeleteString?this.props.getContextMenuDeleteString():(0,Mn.Z)("verb","Delete")})),n.showExpandCollapse&&(s(),t=t.concat([{handler:this.expandAll,...(0,Mn.Z)("Expand All Folders")},{handler:this.collapseAll,...(0,Mn.Z)("Collapse All Folders")}])),n.showImport&&(s(),t.push({handler:this.onImport,ellipsis:!0,...this.props.getContextMenuImportString?this.props.getContextMenuImportString():(0,Mn.Z)("Import")})),n.showSettings){s();const e=this.getSearchStyle();t=t.concat([{items:[{type:"checkbox",checked:"flat"===e,handler:this.setSearchStyle.bind(this,"flat"),...(0,Mn.Z)("Flat Search")},{type:"checkbox",checked:"tree"===e,handler:this.setSearchStyle.bind(this,"tree"),...(0,Mn.Z)("Tree Search")}],...(0,Mn.Z)("Settings")}])}return n.showCustomSettings&&(s(),this.props.addCustomSettingMenu&&(t=t.concat([this.props.addCustomSettingMenu()]))),n.showFullscreen&&(s(),t=t.concat([{handler:()=>dg.Z.toggleFullscreen(this.context.vivaldiWindowId),...(0,Mn.Z)("Fullscreen")}])),t})),Eg(this,"onResize",(e=>{const t=e[0].contentRect;this.updateTreeSize(t.width,t.height)})),Eg(this,"updateTreeSize",((e,t)=>{this._isMounted&&this.setState({width:e,height:t})})),Eg(this,"onContextMenu",(async e=>{const t=this.getSelectedItem();if(this.props.menu)return e.persist(),e.preventDefault(),e.stopPropagation(),void(this.props.menu&&this.getNamedContextMenuItems(this.props.menu,t).then((n=>{(0,Hs.Z)(this.context.vivaldiWindowId,n,(n=>{n&&this.onContextMenuOpen(e,t)}))(e)})));let n;e.preventDefault(),e.stopPropagation(),this.props.getContextMenuItemsPromise?(e.persist(),n=await this.getContextMenuItemsPromise(t)):n=this.getContextMenuItems(t),(0,Hs.Z)(this.context.vivaldiWindowId,n,(n=>{n&&this.onContextMenuOpen(e,t)}))(e)})),Eg(this,"renderTreeItem",(e=>{const{key:t,index:n,style:i}=e,r=this.state.renderedArray[n];r.treeIndex=n,void 0===r.id&&(r.id=n);const a=this.selectionModel.isSelected(r.id),o=this.state.renderedArray[n-1]?.id,l=this.state.renderedArray[n+1]?.id,c=n>=0&&o&&this.selectionModel.isSelected(o),u=l&&this.selectionModel.isSelected(l),m=this.selectionModel.leadIndex===r.id,d=this.props.cutIds&&this.props.cutIds.indexOf(r.id)>-1;let h=!1;!0===a&&(h=this.state.hasFocus||r.id===this.state.inlineEditId);let p=this.props.enableDragAndDrop&&this.state.inlineEditId!==r.id;p&&this.props.isValidDragSource&&(p=this.props.isValidDragSource(r));const g=this.state.inlineEditId===r.id?this.state.inlineEditText:void 0,b={node:r,isSelected:a,inlineEditText:g,onChange:this.setInlineEditText,onFocus:wg,onBlur:()=>{this.saveInlineEdit()}},{rowComponent:N,getRowComponentProps:f}=this.props,_=f?f(b):b;return s.createElement(mg,{key:t,index:n,Component:N,componentProps:_,treeItem:r,style:i,isExpanded:r.isExpanded,isSeparator:this.props.isSeparator,toggle:this.toggleExpandModel,onContextMenu:this.onContextMenu,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,selected:a,isFirstSelected:a&&!c,isLastSelected:a&&!u,hasFocus:h,lead:m,isCut:d,validateForDrag:this.props.validateForDrag,onDragStart:this.stopInlineEditTimer,supportDrop:this.props.enableDragAndDrop?this.supportDropForItem:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeaveItem:null,onDragOver:this.props.enableDragAndDrop?this.onDragOverItem:null,onDragEnd:this.onDragEndItem,onDrop:this.onDrop,mimeType:this.props.mimeType,getDragData:this.props.getDragData,setCustomDragData:this.props.setCustomDragData,dragover:this.state.dragOverObj.id===r.id,dragOverObj:this.state.dragOverObj,inlineEditText:g,getAllSelectedItems:this.getAllSelectedItems,isFolder:this.props.isFolder,isDraggable:p,hasChildren:this.props.hasChildren,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,enableDragAndDrop:this.props.enableDragAndDrop,__source:{fileName:vg,lineNumber:2854,columnNumber:9}})})),Eg(this,"getStyle",mo()(1)((e=>({"--gridColumns":e&&Ng(e)}))));let t={};"always"===e.defaultFolderExpansion?t=this.getAllFoldersExpandedModel(e.nodes):e.settings&&(t=d.Z.getSync("EXPAND_"+e.settings),t||"fallback"!==e.defaultFolderExpansion||(t=this.getAllFoldersExpandedModel(e.nodes)),t||(t={}));const{multiSelect:n}=e;this.selectionModel=new Qp(n),this.state={dragOverObj:this.emptyDragOverObj,hasFocus:!1,expandModel:t,renderedArray:this.getRenderedItems(e.nodes,t,e.sorting),inlineEditId:-1,inlineEditText:"",width:0,height:("number"==typeof e.rowHeight?e.rowHeight:Cg)*e.nodes.length,isDeleting:!1}}UNSAFE_componentWillMount(){this._updateSelectionStateIfNeeded(this.props)}componentDidMount(){const{selectionStoreKey:e}=this.props;if(e){if(qp.Z.has(e))throw new Error(`Key ${e} has already been set in\n          SelectionStore. VivaldiTreeList expects instances using\n          selectionStoreKey props to be singleton.`);qp.Z.set(e,this.selectionModel)}this._initializeSettings(this.props),this._isMounted=!0;const t=pn.findDOMNode(this);if(t){t.addEventListener("focus",this.onGotFocus,!0);const e=t.parentElement;e&&this.updateTreeSize(e.clientWidth,e.clientHeight)}}UNSAFE_componentWillReceiveProps(e){if(this.props.multiSelect!==e.multiSelect&&(this.selectionModel.multiSelect=Boolean(e.multiSelect)),e.settings!==this.props.settings)this._initializeSettings(e),this._updateSelectionStateIfNeeded(e),this.updateScrollTop();else{let t={};if(Object.keys(this.state.expandModel).length>0&&"always"===this.props.defaultFolderExpansion&&!this.state.isDeleting){const n=this.getAllFoldersExpandedModel(e.nodes);t=Object.assign(n,this.state.expandModel)}else t=this.state.expandModel;!0===this.state.isDeleting&&this.setState({isDeleting:!1}),this.prepareDataForRender(e.nodes,t,e.sorting)}}componentDidUpdate(e,t){if(this.state.renderedArray.length===t.renderedArray.length)this.rerenderVisibleTreeItems();else if(e.columns!==this.props.columns){(e.columns&&e.columns.flatMap((e=>e.id)).join())!==(this.props.columns&&this.props.columns.flatMap((e=>e.id)).join())&&this.rerenderVisibleTreeItems()}}componentWillUnmount(){this.enableCutCopyPasteListeners(!1),this.stopInlineEditTimer(),this.resetAutoExpandTimer(),this._isMounted=!1;const e=pn.findDOMNode(this);e&&e.removeEventListener("focus",this.onGotFocus,!0);const{selectionStoreKey:t}=this.props;t&&qp.Z.get(t)===this.selectionModel&&qp.Z.delete(t)}render(){const e=bn()(this.props.className,{"vivaldi-tree":!this.props.className,"no-selection":-1===this.selectionModel.anchorIndex});return s.createElement(ei,{style:this.getStyle(this.props.columns),className:e,onBlur:this.onLostFocus,onKeyDown:this.onKeyDown,onDragOver:this.props.enableDragAndDrop?this.onDragEmptyArea:null,onDragLeave:this.props.enableDragAndDrop?this.cancelDragOverObject:null,onDrop:this.props.enableDragAndDrop?this.onDropEmptyArea:null,onClick:this.unSelectAll,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onContextMenu:this.onContextMenu,onResize:this.onResize,__source:{fileName:vg,lineNumber:2931,columnNumber:7}},s.createElement(fg.aV,{ref:this.refTreeListEntries,onRowsRendered:this.onRowsRendered,onScroll:this.onScroll,width:this.state.width,height:this.state.height,rowHeight:this.props.rowHeight||Cg,rowRenderer:this.renderTreeItem,rowCount:this.state.renderedArray.length,overscanRowCount:0,onScrollbarPresenceChange:this.props.onScrollbarPresenceChange,scrollToAlignment:this.props.scrollToAlignment,containerStyle:{pointerEvents:"auto"},__source:{fileName:vg,lineNumber:2946,columnNumber:9}}))}}Eg(yg,"contextType",Vs.Z),Eg(yg,"defaultProps",{enableDragAndDrop:!0,rowHeight:Cg});const Sg=yg;var Tg=n(34155),kg="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\FolderList.jsx";function Ig(){return Ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ig.apply(this,arguments)}function Ag(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zg({node:e,inlineEditText:t,onFocus:n,onChange:i,onBlur:r,onExpandClick:a}){return s.createElement(Xp,{key:e.id,node:e,inlineEditText:t,inManager:!1,fullView:!1,showBadge:!1,onExpandClick:a,onFocus:n,onChange:i,onBlur:r,__source:{fileName:kg,lineNumber:19,columnNumber:10}})}const Pg=tn.ZP.getRootId();class Dg extends s.PureComponent{constructor(...e){super(...e),Ag(this,"refTreeList",s.createRef()),Ag(this,"setSelectedId",(e=>{this.refTreeList.current?.setSelectedIds([e])})),Ag(this,"scrollToId",(e=>{this.refTreeList.current?.scrollToId(e)})),Ag(this,"expand",(e=>{this.refTreeList.current?.expand(e)})),Ag(this,"expandAll",(()=>{this.refTreeList.current?.expandAll()})),Ag(this,"toggleSelectedExpansion",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),Ag(this,"startInlineEdit",(e=>{this.setSelectedId(e),this.scrollToId(e),this.focus(),this.refTreeList.current?.startInlineEdit(e)})),Ag(this,"focus",(()=>{this.refTreeList.current?.focusTree()}))}componentDidMount(){this.setFolderTreeView()}componentDidUpdate(e){const t=this.refTreeList.current?.getSelected();e.selectedId===this.props.selectedId||t===this.props.selectedId||this.props.isEditing||this.setFolderTreeView()}async setFolderTreeView(){const{selectedId:e}=this.props,t=this.refTreeList.current?.getSelected();t!==e&&this.setSelectedId(e),this.props.expandAll?this.refTreeList.current?.expandAll():(this.refTreeList.current?.collapseAll(),await new Promise((e=>Tg.nextTick(e))),e&&e!==Pg?this.refTreeList.current?.expandToId(e):this.refTreeList.current?.expand(Pg)),await new Promise((e=>Tg.nextTick(e)));e&&"1"!==e&&this.refTreeList.current?.scrollToId(e)}render(){const{folders:e,onSelect:t}=this.props;return s.createElement(Sg,{ref:this.refTreeList,className:bn()(this.props.className,"vivaldi-tree"),nodes:e,hasChildren:e=>e.children?.length,isFolder:e=>Boolean(e.children?.length&&!e.url),onSelect:e=>e&&t(e.id),rowComponent:e=>s.createElement(Zg,Ig({},e,{onExpandClick:e=>this.toggleSelectedExpansion(e),__source:{fileName:kg,lineNumber:137,columnNumber:9}})),saveTitle:this.props.onFolderTitleChange,isValidToEdit:()=>!0,getTitle:()=>this.props.defaultEditFolderText,enableDragAndDrop:!1,__source:{fileName:kg,lineNumber:127,columnNumber:12}})}}var Mg="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\icon\\Icon.jsx";function Og(e,t){return t?t>16?e.large:t<16?e.small:e.medium:e.medium}function xg({icon:e,size:t,className:n}){const i=t&&{"--IconSize":t};return s.createElement("span",{style:i,className:bn()("VivaldiSvgIcon",n),dangerouslySetInnerHTML:{__html:e},__source:{fileName:Mg,lineNumber:40,columnNumber:5}})}function Lg({size:e,className:t}){const n=Og(cn.nre,e);return s.createElement(xg,{icon:n,size:e,className:t,__source:{fileName:Mg,lineNumber:50,columnNumber:10}})}function Rg({size:e,className:t}){return s.createElement(xg,{icon:cn.oJy,size:e,className:t,__source:{fileName:Mg,lineNumber:54,columnNumber:10}})}function Bg({size:e,className:t}){return s.createElement(xg,{icon:cn.u0H,size:e,className:t,__source:{fileName:Mg,lineNumber:58,columnNumber:10}})}function Fg({size:e,className:t}){return s.createElement(xg,{size:e,className:t,icon:'\n<svg width="8" height="12" viewBox="0 0 8 12" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.06006 1.60666L6.1134 0.666656L4.00006 2.77999L1.88673 0.666656L0.940063 1.60666L4.00006 4.66666L7.06006 1.60666ZM0.940063 10.3933L1.88673 11.3333L4.00006 9.21999L6.1134 11.3333L7.0534 10.3933L4.00006 7.33332L0.940063 10.3933Z"/>\n</svg>\n    ',__source:{fileName:Mg,lineNumber:62,columnNumber:10}})}function Ug({size:e,className:t}){const n=Og(cn._TQ,e);return s.createElement(xg,{icon:n,size:e,className:t,__source:{fileName:Mg,lineNumber:75,columnNumber:10}})}function Vg({size:e,className:t}){const n=Og(cn.fph,e);return s.createElement(xg,{icon:n,size:e,className:t,__source:{fileName:Mg,lineNumber:80,columnNumber:10}})}function Hg({size:e,className:t}){const n=Og(cn.$II,e);return s.createElement(xg,{icon:n,size:e,className:t,__source:{fileName:Mg,lineNumber:85,columnNumber:10}})}function Wg({size:e,className:t}){return s.createElement(xg,{size:e,className:t,icon:'\n<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n  <rect x="1" y="1" width="7" height="7" rx="2"/>\n  <rect x="1" y="10" width="7" height="7" rx="2"/>\n  <rect x="10" y="10" width="7" height="7" rx="2"/>\n  <rect x="10" y="1" width="7" height="7" rx="2"/>\n</svg>\n    ',__source:{fileName:Mg,lineNumber:89,columnNumber:10}})}function zg({size:e,className:t}){const n=Og(cn.YvR,e);return s.createElement(xg,{icon:n,size:e,className:t,__source:{fileName:Mg,lineNumber:105,columnNumber:10}})}function Gg({size:e,className:t}){return s.createElement(xg,{icon:cn.AXs,size:e,className:t,__source:{fileName:Mg,lineNumber:109,columnNumber:10}})}function Kg({size:e,className:t}){return s.createElement(xg,{icon:cn.uw2,size:e,className:t,__source:{fileName:Mg,lineNumber:113,columnNumber:10}})}function jg({size:e,className:t,type:n}){switch(n){case"trash":return s.createElement(Lg,{className:t,size:e,__source:{fileName:Mg,lineNumber:133,columnNumber:14}});case"bookmark":return s.createElement(Rg,{className:t,size:e,__source:{fileName:Mg,lineNumber:136,columnNumber:14}});case"caret":case"chevron":return s.createElement(Bg,{className:t,size:e,__source:{fileName:Mg,lineNumber:140,columnNumber:14}});case"contract":return s.createElement(Fg,{className:t,size:e,__source:{fileName:Mg,lineNumber:143,columnNumber:14}});case"folder":return s.createElement(Ug,{className:t,size:e,__source:{fileName:Mg,lineNumber:146,columnNumber:14}});case"folder-arrow":return s.createElement(Vg,{className:t,size:e,__source:{fileName:Mg,lineNumber:149,columnNumber:14}});case"speed-dial-folder":return s.createElement(Hg,{className:t,size:e,__source:{fileName:Mg,lineNumber:152,columnNumber:14}});case"speed-dial":return s.createElement(Wg,{className:t,size:e,__source:{fileName:Mg,lineNumber:155,columnNumber:14}});case"search":return s.createElement(zg,{className:t,size:e,__source:{fileName:Mg,lineNumber:158,columnNumber:14}});case"download-speed":return s.createElement(Gg,{className:t,size:e,__source:{fileName:Mg,lineNumber:161,columnNumber:14}});case"download-placeholder":return s.createElement(Kg,{className:t,size:e,__source:{fileName:Mg,lineNumber:164,columnNumber:14}})}}var Yg=n(34155),$g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\BookmarkLocationSelector.jsx";function Xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qg(e){return e.children?e.children.reduce(((e,t)=>{if(t.speeddial)return e.push(t),e;if(t.children?.length){const n=Qg(t);(n?.length||t.speeddial)&&e.push({...t,children:n})}return e}),[]):[]}function qg({onValueChange:e,value:t,placeholder:n,onAddClick:i}){return s.createElement("div",{className:"BookmarkLocationSelector-SearchInput",__source:{fileName:$g,lineNumber:46,columnNumber:10}},s.createElement("input",{placeholder:n,className:"BookmarkLocationSelector-SearchInput-Input",type:"search",value:t,onChange:({currentTarget:t})=>e(t.value),__source:{fileName:$g,lineNumber:47,columnNumber:5}}),s.createElement(jg,{type:"search",size:18,className:"BookmarkLocationSelector-SearchInput-Icon",__source:{fileName:$g,lineNumber:54,columnNumber:5}}),s.createElement("button",{type:"button",className:"BookmarkLocationSelector-SearchInput-Button",onClick:i,title:t?(0,ue.Z)("Create “$1” Folder",[t]):(0,ue.Z)("command","New Folder"),__source:{fileName:$g,lineNumber:59,columnNumber:5}},s.createElement(Fs,{__source:{fileName:$g,lineNumber:67,columnNumber:7}})))}const Jg=Object.freeze({folders:!0,bookmarks:!1});class eb extends s.PureComponent{constructor(...e){super(...e),Xg(this,"refFolderList",s.createRef()),Xg(this,"state",{nodes:tn.ZP.getFilteredTree("",{...Jg,root:"bookmarks"===this.props.mode}).nodes,filter:"",isEditing:!1}),Xg(this,"handleBookmarkStoreChange",(()=>{const e=[...tn.ZP.getFilteredTree("",{...Jg,root:"bookmarks"===this.props.mode}).nodes];this.setState({nodes:e})})),Xg(this,"handleNewFolderButtonClick",(async()=>{this.setState({isEditing:!0});const e=this.state.filter||(0,ue.Z)("command","New Folder"),t=this.state.filter?"1":this.props.parentId,n="speeddial"===this.props.mode&&"1"===t,s=await h.Z.bookmarks.create({parentId:t,title:e,speeddial:n});this.refFolderList.current?.expand(t),await this.setParent(s.id),this.refFolderList.current?.startInlineEdit(s.id),this.setState({filter:""})})),Xg(this,"setParent",(async e=>{await this.props.onParentIdChange(e)})),Xg(this,"scrollToId",(async e=>{await new Promise((e=>Yg.nextTick(e))),this.refFolderList.current?.scrollToId(e),await new Promise((e=>Yg.nextTick(e)))})),Xg(this,"handleFolderTabChange",(async e=>{await this.props.onModeChange(e),this.handleBookmarkStoreChange(),this.refFolderList.current?.focus()})),Xg(this,"handleFolderTitleChange",((e,t)=>{this.setState({isEditing:!1}),this.props.onFolderTitleChange(e,t)})),Xg(this,"handleFilterChange",(e=>{const t=[...tn.ZP.getFilteredTree(e,{...Jg,root:"bookmarks"===this.props.mode}).nodes];this.setState({filter:e,nodes:t},(()=>this.refFolderList.current?.expandAll()))}))}componentDidMount(){tn.ZP.addChangeListener(this.handleBookmarkStoreChange)}componentWillUnmount(){tn.ZP.removeChangeListener(this.handleBookmarkStoreChange)}render(){const{className:e}=this.props,t=this.state.nodes,n="speeddial"===this.props.mode?Qg({children:t}):t;return s.createElement("div",{className:bn()("BookmarkLocationSelector",e),__source:{fileName:$g,lineNumber:182,columnNumber:12}},s.createElement("div",{className:"BookmarkLocationSelector-Header",__source:{fileName:$g,lineNumber:183,columnNumber:7}},s.createElement("button",{type:"button",className:bn()("BookmarkLocationSelector-ToggleButtonGroup-Button",{"BookmarkLocationSelector-ToggleButtonGroup-Button--Pressed":"bookmarks"===this.props.mode}),onClick:()=>this.handleFolderTabChange("bookmarks"),__source:{fileName:$g,lineNumber:184,columnNumber:9}},s.createElement(Fs,{speeddial:!1,open:!1,__source:{fileName:$g,lineNumber:190,columnNumber:11}}),(0,ue.Z)("Bookmarks")),s.createElement("button",{type:"button",className:bn()("BookmarkLocationSelector-ToggleButtonGroup-Button",{"BookmarkLocationSelector-ToggleButtonGroup-Button--Pressed":"speeddial"===this.props.mode}),onClick:()=>this.handleFolderTabChange("speeddial"),__source:{fileName:$g,lineNumber:193,columnNumber:9}},s.createElement(Fs,{speeddial:!0,open:!1,__source:{fileName:$g,lineNumber:199,columnNumber:11}}),(0,ue.Z)("Speed Dials"))),s.createElement(qg,{value:this.state.filter,onValueChange:this.handleFilterChange,placeholder:"speeddial"===this.props.mode?(0,ue.Z)("Find in Speed Dial Folders"):(0,ue.Z)("Find in All Folders"),onAddClick:this.handleNewFolderButtonClick,__source:{fileName:$g,lineNumber:204,columnNumber:7}}),s.createElement(Dg,{key:this.props.mode,ref:this.refFolderList,folders:n,onSelect:this.setParent,selectedId:this.props.parentId,isEditing:this.state.isEditing,expandAll:"speeddial"===this.props.mode,onFolderTitleChange:this.handleFolderTitleChange,className:"BookmarkLocationSelector-FolderList",defaultEditFolderText:this.state.filter||(0,ue.Z)("command","New Folder"),__source:{fileName:$g,lineNumber:215,columnNumber:7}}))}}var tb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\Dialog.jsx";function nb({children:e,className:t,height:n}){const i={"--Height":n||48};return s.createElement("footer",{style:i,className:bn()("DialogFooter",t),__source:{fileName:tb,lineNumber:32,columnNumber:5}},e)}function sb(e){const{children:t,className:n,height:i}=e,r={"--Height":i||48};return s.createElement("div",{style:r,className:bn()("DialogContent",n),__source:{fileName:tb,lineNumber:48,columnNumber:10}},t)}var ib="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\BookmarkPopup.jsx";function rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ab({value:e,title:t,onChange:n,autoFocus:i}){return s.createElement("label",{className:"BookmarkInputField",__source:{fileName:ib,lineNumber:22,columnNumber:10}},s.createElement("span",{className:"BookmarkInputField-Title",__source:{fileName:ib,lineNumber:23,columnNumber:5}},t),s.createElement("input",{className:"BookmarkInputField-Input",type:"text",value:e,onChange:n,autoFocus:i,__source:{fileName:ib,lineNumber:24,columnNumber:5}}))}class ob extends s.PureComponent{constructor(...e){super(...e),rb(this,"refLocationSelector",s.createRef()),rb(this,"scrollToId",(async e=>{await(this.refLocationSelector.current?.scrollToId(e))}))}render(){const{title:e,onTitleChange:t,autoFocus:n,url:i,onUrlChange:r,nickname:a,onNicknameChange:o,description:l,onDescriptionChange:c,onParentIdChange:u,parentId:m,onFolderTitleChange:d,locationSelectMode:h,onDeleteBookmarkClick:p,onClosePopupClick:g,onLocationSelectModeChange:b}=this.props,N=(f=m,tn.ZP.getItemById(f)?.title);var f;return s.createElement("form",{className:"BookmarkPopup",onSubmit:g,__source:{fileName:ib,lineNumber:91,columnNumber:12}},s.createElement("header",{className:"DialogHeader BookmarkPopup-Header",__source:{fileName:ib,lineNumber:92,columnNumber:7}},s.createElement("h1",{className:"DialogHeader-HeaderText",__source:{fileName:ib,lineNumber:93,columnNumber:9}},(0,ue.Z)("Added Bookmark")),N&&s.createElement("p",{__source:{fileName:ib,lineNumber:97,columnNumber:23}},(0,ue.Z)("to $1",[N]))),s.createElement(sb,{className:"BookmarkPopup-Content",__source:{fileName:ib,lineNumber:100,columnNumber:7}},s.createElement("div",{className:"BookmarkPopup-TextInputWrapper",__source:{fileName:ib,lineNumber:101,columnNumber:9}},s.createElement(ab,{title:(0,ue.Z)("bookmarkeditor","Name"),value:e,onChange:({currentTarget:e})=>{t(e.value)},autoFocus:"title"===n,__source:{fileName:ib,lineNumber:102,columnNumber:11}}),s.createElement(ab,{title:(0,ue.Z)("URL"),value:i,onChange:({currentTarget:e})=>r(e.value),autoFocus:"url"===n,__source:{fileName:ib,lineNumber:110,columnNumber:11}}),s.createElement(ab,{title:(0,ue.Z)("Nickname"),value:a,onChange:({currentTarget:e})=>o(e.value),autoFocus:"nickname"===n,__source:{fileName:ib,lineNumber:117,columnNumber:11}}),s.createElement(ab,{title:(0,ue.Z)("Description"),value:l,onChange:({currentTarget:e})=>c(e.value),autoFocus:"description"===n,__source:{fileName:ib,lineNumber:124,columnNumber:11}})),s.createElement(eb,{ref:this.refLocationSelector,className:"BookmarkPopup-LocationSelector",onParentIdChange:u,parentId:m,onFolderTitleChange:d,mode:h,onModeChange:b,__source:{fileName:ib,lineNumber:133,columnNumber:9}})),s.createElement(nb,{className:"BookmarkPopup-Footer",__source:{fileName:ib,lineNumber:144,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("bookmarkeditor","Done"),__source:{fileName:ib,lineNumber:145,columnNumber:9}}),s.createElement("input",{type:"button",className:"danger",onClick:p,value:(0,ue.Z)("bookmarkeditor","Remove"),__source:{fileName:ib,lineNumber:149,columnNumber:9}})))}}var lb=n(15770);function cb(e,t,n){return new Promise(((s,i)=>{h.Z.tabs.sendMessage(e,t,n,(e=>{h.Z.runtime.lastError?i(h.Z.runtime.lastError.message):s(e)}))}))}let ub;function mb({type:e,data:t}){if("bookmarkData"===e){const{title:e,url:n,description:s,image:i}=t;ub&&ub({title:e,url:n,description:s,thumbnail:i}),h.Z.runtime.onMessage.removeListener(mb)}}async function db(e){const t=new Promise((e=>{ub=e}));h.Z.runtime.onMessage.addListener(mb);try{await cb(e,{action:"fetchBookmarkMetadata"})}catch(e){return console.error(e),null}return t}var hb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkButton\\BookmarkButton.jsx";function pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gb(e,t){return h.Z.bookmarks.update(e,t)}function bb(e){return A.ZP.get(P.kBookmarksFetchPageMetadata)&&!(0,Pt.cw)(e)}function Nb(e){const t=e?.getIn(["extData","thumbnail"])||"";return{url:e?.url||"",title:e?(0,Pt.d6)(e.url,e.title):"",description:"",thumbnail:t}}class fb extends s.PureComponent{constructor(...e){super(...e),pb(this,"state",{status:"standby",isBookmarkPopupOpen:!1,title:this.props.bookmarkData?.title||"",url:this.props.bookmarkData?.url||"",description:this.props.bookmarkData?.description||"",thumbnail:this.props.bookmarkData?.thumbnail||"",nickname:this.props.bookmarkData?.nickname||"",parentId:this.props.bookmarkData?.parentId||"",popupLocationSelectMode:"bookmarks"}),pb(this,"onWebpageviewStoreChanged",(async e=>{if("WEBPAGEVIEW_ACTIONS"!==e.type||"addBookmark"!==e.action)return;const t=V.ZP.getPageById(e.pageId);if(!t)return;const n=e.pageId;if(tn.ZP.findByUrl(t.url))return void this.setState({isBookmarkPopupOpen:!0});const s=bb(t.url)&&await db(n)||Nb(t);await this.bookmarkPage(s),A.ZP.get(P.kBookmarksConfirmAdding)&&this.setState({isBookmarkPopupOpen:!0})})),pb(this,"bookmarkPage",(async e=>{let t=A.ZP.get(P.kBookmarksSaveFolder);tn.ZP.getItemById(t)||(t=tn.SZ);const n=await this.props.setBookmarked({...e,parentId:t});n.parentId&&this.refBookmarkPopup.current?.scrollToId(n.parentId)})),pb(this,"onDeleteBookmarkClick",(async()=>{this.setState({status:"standby"}),this.props.bookmarkData&&(await i.Z.remove([this.props.bookmarkData.id]),this.setState({isBookmarkPopupOpen:!1}))})),pb(this,"onBookmarkButtonClicked",(async()=>{if(this.setState((e=>({isBookmarkPopupOpen:!e.isBookmarkPopupOpen}))),!this.props.bookmarkData){const e=V.ZP.getPageById(this.props.pageId);if(!e)return;const t=bb(e.url)&&await db(this.props.pageId)||Nb(e);await this.bookmarkPage(t)}})),pb(this,"handleParentIdChange",(async e=>{this.props.bookmarkData&&(await i.Z.move([this.props.bookmarkData.id],e),st.Z.set(P.kBookmarksSaveFolder,e),this.setState({parentId:e}))})),pb(this,"handleTitleChange",(e=>{this.setState({title:e})})),pb(this,"handleUrlChange",(e=>{this.setState({url:e})})),pb(this,"handleNicknameChange",(e=>{this.setState({nickname:e})})),pb(this,"handleDescriptionChange",(e=>{this.setState({description:e})})),pb(this,"handleFolderTitleChange",((e,t)=>{gb(e,{title:t})})),pb(this,"hidePopup",(()=>{this.setState({isBookmarkPopupOpen:!1})})),pb(this,"onLocationSelectModeChange",(e=>{this.setState({popupLocationSelectMode:e})})),pb(this,"refBookmarkPopup",s.createRef())}componentDidMount(){lb.Z.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){lb.Z.removeChangeListener(this.onWebpageviewStoreChanged)}componentDidUpdate(e,t){if(t.isBookmarkPopupOpen&&!this.state.isBookmarkPopupOpen&&this.props.bookmarkData){const{title:e,url:t,description:n,nickname:s}=this.state;gb(this.props.bookmarkData.id,{title:e,url:t,description:n,nickname:s})}else this.props.bookmarkData?e.bookmarkData||this.setState({title:this.props.bookmarkData.title,url:this.props.bookmarkData.url,description:this.props.bookmarkData.description,thumbnail:this.props.bookmarkData.thumbnail,nickname:this.props.bookmarkData.nickname,parentId:this.props.bookmarkData.parentId,status:"bookmarked"}):this.setState({title:"",url:"",description:"",thumbnail:"",nickname:"",parentId:""}),"bookmarked"===this.state.status&&setTimeout((()=>{this.setState({status:"standby"})}),4e3)}render(){const{title:e,url:t,nickname:n,description:i,thumbnail:r,parentId:a}=this.state,o="bookmarked"===this.state.status||this.state.isBookmarkPopupOpen,l="bookmarked"===this.state.status?(0,ue.Z)("Added bookmark"):"";return s.createElement("div",{className:bn()("BookmarkButton",{"BookmarkButton--Active":o}),__source:{fileName:hb,lineNumber:260,columnNumber:12}},s.createElement(ko,{onClick:this.onBookmarkButtonClicked,tooltip:(0,ue.Z)("Bookmark Page"),image:cn.oJy,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.isBookmarkPopupOpen,popupWidth:356,className:"BookmarkButton-Button",isOn:Boolean(this.props.bookmarkData),title:l,popupAnchor:"right",__source:{fileName:hb,lineNumber:263,columnNumber:9}},s.createElement(ob,{ref:this.refBookmarkPopup,onDeleteBookmarkClick:this.onDeleteBookmarkClick,onClosePopupClick:this.hidePopup,onParentIdChange:this.handleParentIdChange,onTitleChange:this.handleTitleChange,onUrlChange:this.handleUrlChange,onNicknameChange:this.handleNicknameChange,onDescriptionChange:this.handleDescriptionChange,onFolderTitleChange:this.handleFolderTitleChange,title:e,url:t,nickname:n,description:i,image:r,parentId:a,autoFocus:"title",locationSelectMode:this.state.popupLocationSelectMode,onLocationSelectModeChange:this.onLocationSelectModeChange,__source:{fileName:hb,lineNumber:276,columnNumber:11}})))}}var _b=n(92342),vb=n(58848),Eb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\blocker\\ContentBlockerPopup.jsx";function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wb=(0,ue.Z)("(Default)"),yb="\n• ",Sb=["tracking","ad_blocking"];class Tb extends s.PureComponent{constructor(...e){super(...e),Cb(this,"buttonStyle",{"--trackers":"0","--blocking":"0","--ads":"0"}),Cb(this,"state",{adBlockingEnabled:!1,trackerBlockingEnabled:!1,isBlockingAds:!1,isBlockingTrackers:!1,blockedTrackerList:void 0,blockedAdList:void 0,showBlockedTrackers:!1,showBlockedAds:!1,popupOpen:!1,ruleSourceReady:!1}),Cb(this,"getRules",(()=>Sb.forEach((e=>(0,_b.pg)(e,(t=>{this.setState(t,(()=>this.updateException(e)))})))))),Cb(this,"getHostname",(e=>{let t="";try{t=new URL(e||this.props.url).hostname}catch(e){}return t})),Cb(this,"togglePopup",(()=>this.setState((e=>({popupOpen:!e.popupOpen}))))),Cb(this,"hidePopup",(()=>this.setState({popupOpen:!1}))),Cb(this,"showSettings",(()=>{this.togglePopup(),se.Z.showSettings("privacy",{scroll:"tracker_and_ad_blocking"})})),Cb(this,"getActiveExceptionList",(e=>{const t="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";return this.state[t]?"exempt_list":"process_list"})),Cb(this,"updateBlockingState",(()=>{Sb.map((e=>this.updateException(e))),Sb.map((e=>this.updateBlocked(e,[this.props.pageId])))})),Cb(this,"updateException",(e=>b.Z.contentBlocking.isExemptOfFiltering(e,this.props.url,(t=>{this._isMounted&&("tracking"===e?this.setState({isBlockingTrackers:!t}):this.setState({isBlockingAds:!t}))})))),Cb(this,"updateSources",(()=>Sb.forEach((e=>{b.Z.contentBlocking.getRuleSources(e,(e=>{this._isMounted&&(e.find((e=>""!==e.rules_list_checksum))?this.setState({ruleSourceReady:!0}):this.setState({ruleSourceReady:!1}))}))})))),Cb(this,"updateBlocked",(0,vb.default)(((e,t)=>{const n="tracking"===e?"blockedTrackerList":"blockedAdList";t.includes(this.props.pageId)&&b.Z.contentBlocking.getBlockedUrlsInfo(e,[this.props.pageId],(e=>{this._isMounted&&this.setState({[n]:e[0]})}))}),500)),Cb(this,"setPageBlocking",(e=>{const t=e.currentTarget.value,n=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0),s=this.getHostname();(0,_b.fs)(s,t,!0,n)})),Cb(this,"handleExpandClick",((e,t)=>{t.preventDefault(),"tracking"===e?this.setState((e=>({showBlockedTrackers:!e.showBlockedTrackers}))):this.setState((e=>({showBlockedAds:!e.showBlockedAds})))})),Cb(this,"renderBlocked",(e=>{if(!this.props.blockerVisible)return null;const t="tracking"===e?this.state.blockedTrackerList:this.state.blockedAdList;if(!t)return null;const n=t.blocked_urls_info.slice(0).reduce(((e,t)=>{const n=this.getHostname(t.url);return e[n]=(e[n]||0)+t.blocked_count,e}),{});for(const e of t.blocked_trackers_info){const t=e.domain;n[t]=(n[t]||0)+e.blocked_count}const i=this.state.showBlockedTrackers&&"tracking"===e||this.state.showBlockedAds&&"ad_blocking"===e;return s.createElement(s.Fragment,null,s.createElement("button",{className:bn()({"ContentBlocker-Blocked-Arrow":!0,"ContentBlocker-Blocked-Arrow--Expanded":i}),onClick:this.handleExpandClick.bind(null,e),tabIndex:this.props.tabIndex,__source:{fileName:Eb,lineNumber:238,columnNumber:7}},s.createElement("h3",{__source:{fileName:Eb,lineNumber:245,columnNumber:9}},"tracking"===e?(0,ue.Z)("$1 Tracker Blocked","$1 Trackers Blocked",[t.total_blocked_count]):(0,ue.Z)("$1 Ad Blocked","$1 Ads Blocked",[t.total_blocked_count])),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:Eb,lineNumber:252,columnNumber:9}})),i&&s.createElement("ul",{__source:{fileName:Eb,lineNumber:255,columnNumber:9}},Object.keys(n).sort(((e,t)=>n[e]>n[t]?-1:1)).map((e=>s.createElement("li",{key:e,__source:{fileName:Eb,lineNumber:259,columnNumber:15}},s.createElement("span",{__source:{fileName:Eb,lineNumber:260,columnNumber:17}},e),s.createElement("span",{__source:{fileName:Eb,lineNumber:261,columnNumber:17}},n[e]))))))})),Cb(this,"getButtonStyle",((e,t,n,s,i,r,a)=>({"--trackers":!e&&t&&1===n?"1":"0","--ads":!e&&t&&2===n?"1":"0","--blocking":s&&i||r&&a?"1":"0"})))}componentDidMount(){this._isMounted=!0,this.getRules(),this.updateSources(),this.updateBlockingState(),b.Z.contentBlocking.onStateChanged.addListener(this.getRules),b.Z.contentBlocking.onUrlsBlocked.addListener(this.updateBlocked),b.Z.contentBlocking.onExceptionsChanged.addListener(this.getRules),b.Z.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),b.Z.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources),b.Z.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),h.Z.webNavigation.onCommitted.addListener(this.updateBlockingState)}componentDidUpdate(e){this.props.url!==e.url&&this.updateBlockingState()}componentWillUnmount(){this._isMounted=!1,b.Z.contentBlocking.onStateChanged.removeListener(this.getRules),b.Z.contentBlocking.onUrlsBlocked.removeListener(this.updateBlocked),b.Z.contentBlocking.onExceptionsChanged.removeListener(this.getRules),b.Z.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),b.Z.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources),b.Z.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),h.Z.webNavigation.onCommitted.removeListener(this.updateBlockingState)}render(){const{ruleSourceReady:e,trackerBlockingEnabled:t,isBlockingTrackers:n,blockedTrackerList:i,adBlockingEnabled:r,isBlockingAds:a,blockedAdList:o}=this.state,{blockerVisible:l,tabIndex:c}=this.props,u=0+(t?1:0)+(r?1:0),m=0+(n?1:0)+(a?1:0),d=i||o;return s.createElement(ko,{buttonStyle:this.getButtonStyle(Boolean(d),l,m,Boolean(i),n,Boolean(o),a),tooltip:(0,ue.Z)("Content Blocker")+(e&&n?yb+(0,ue.Z)("Tracker Blocking Active"):"")+(a&&e?yb+(0,ue.Z)("Ad Blocking Active"):"")+(e?"":yb+(0,ue.Z)("Blocking is inactive due to missing or disabled rule lists")),onClick:this.togglePopup,image:cn.Tu3,hidePopup:this.hidePopup,popupPosition:this.props.position,popupWidth:240,popupClassName:"ContentBlocker ToolbarButtonPopup-DefaultStyles",className:"ContentBlocker-Control",isPopupVisible:this.state.popupOpen,__source:{fileName:Eb,lineNumber:303,columnNumber:7}},s.createElement(gi.Z,{focusName:"focus_content-blocker",__source:{fileName:Eb,lineNumber:332,columnNumber:9}},s.createElement("h2",{className:"ContentBlocker-Header",__source:{fileName:Eb,lineNumber:333,columnNumber:11}},l?(0,ue.Z)("Blocking Level on $1",[this.getHostname()]):(0,ue.Z)("Content Blocker")),l&&s.createElement("div",{className:"ContentBlocker-Field",__source:{fileName:Eb,lineNumber:341,columnNumber:13}},s.createElement("button",{tabIndex:c,className:bn()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":0===m}),value:"0",onClick:this.setPageBlocking,__source:{fileName:Eb,lineNumber:343,columnNumber:15}},s.createElement("span",{className:"ContentBlocker-Label-Icon",dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:Eb,lineNumber:352,columnNumber:17}}),s.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:Eb,lineNumber:356,columnNumber:17}},(0,ue.Z)("No Blocking"),0===u&&s.createElement("span",{className:"keep-ea-words",__source:{fileName:Eb,lineNumber:359,columnNumber:21}},wb))),s.createElement("button",{tabIndex:c,className:bn()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":1===m}),value:"1",onClick:this.setPageBlocking,__source:{fileName:Eb,lineNumber:364,columnNumber:15}},s.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:Eb,lineNumber:373,columnNumber:17}}),s.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:Eb,lineNumber:378,columnNumber:17}},(0,ue.Z)("Block Trackers"),1===u&&s.createElement("span",{className:"keep-ea-words",__source:{fileName:Eb,lineNumber:381,columnNumber:21}},wb))),s.createElement("button",{tabIndex:c,className:bn()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":2===m}),value:"2",onClick:this.setPageBlocking,__source:{fileName:Eb,lineNumber:386,columnNumber:15}},s.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:Eb,lineNumber:395,columnNumber:17}}),s.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:Eb,lineNumber:400,columnNumber:17}},(0,ue.Z)("Block Trackers and Ads"),2===u&&s.createElement("span",{className:"keep-ea-words",__source:{fileName:Eb,lineNumber:403,columnNumber:21}},wb)))),d&&s.createElement("div",{className:"ContentBlocker-Blocked",__source:{fileName:Eb,lineNumber:412,columnNumber:13}},i&&this.renderBlocked("tracking"),o&&this.renderBlocked("ad_blocking")),s.createElement("div",{className:"ContentBlocker-Field",__source:{fileName:Eb,lineNumber:422,columnNumber:11}},s.createElement("input",{type:"button",onClick:this.showSettings,value:(0,ue.Z)("Manage Default Settings"),autoFocus:0===c,__source:{fileName:Eb,lineNumber:423,columnNumber:13}}))))}}const kb=Tb;var Ib=n(61667),Ab=n(7153),Zb=n(33466),Pb=n(93245),Db="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadChart.jsx";function Mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ob={top:0,right:0,bottom:0,left:0},xb={data:{fill:"var(--colorSuccessBgAlpha)",stroke:"var(--colorSuccessBg)",strokeWidth:2}},Lb={grid:{stroke:"var(--colorFgAlpha)"}};class Rb extends s.PureComponent{constructor(...e){super(...e),Mb(this,"dataPointCounter",0),Mb(this,"timeline",[]),Mb(this,"maxSpeed",.1)}render(){if(this.props.speed>this.maxSpeed&&(this.maxSpeed=1.1*this.props.speed),this.timeline=(0,T.ZP)(this.timeline,(e=>{e.push({x:this.dataPointCounter++,y:this.props.speed}),300===e.length&&e.splice(0,1)})),this.timeline.length<=1)return null;const e={x:[this.timeline[0].x,Math.max(this.timeline.at(-1).x,5)],y:[0,this.maxSpeed]};return s.createElement(Ib.Z,{height:50,padding:Ob,domain:e,domainPadding:[300,0],scale:"linear",containerComponent:s.createElement(Ab.Z,{preserveAspectRatio:"none",__source:{fileName:Db,lineNumber:75,columnNumber:11}}),__source:{fileName:Db,lineNumber:68,columnNumber:7}},s.createElement(Zb.Z,{standalone:!1,style:Lb,offsetY:-10,__source:{fileName:Db,lineNumber:80,columnNumber:9}}),s.createElement(Zb.Z,{dependentAxis:!0,standalone:!1,style:Lb,offsetX:-10,__source:{fileName:Db,lineNumber:85,columnNumber:9}}),s.createElement(Pb.Z,{data:this.timeline,interpolation:"linear",standalone:!1,style:xb,__source:{fileName:Db,lineNumber:91,columnNumber:9}}))}}var Bb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelPathField.jsx";function Fb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ub extends s.PureComponent{constructor(...e){super(...e),Fb(this,"pathButtonTitle",(0,ue.Z)("Show in File Manager")),Fb(this,"_openUrl",(()=>{this.props.url&&$.Z.openURL((0,As.Fn)(this.props.url))}))}render(){const{node:e}=this.props,t="complete"===e?.state?e.totalBytes:e?.bytesReceived||0,n=e?Cr(t):"",i=e?e.currentSpeed:0,r=e?Cr(i)+"/s":"",a="in_progress"===e?.state;return s.createElement(s.Fragment,null,s.createElement("div",{className:"container",__source:{fileName:Bb,lineNumber:47,columnNumber:7}},s.createElement("div",{className:"completed",__source:{fileName:Bb,lineNumber:48,columnNumber:9}},n),s.createElement("div",{className:"speed",__source:{fileName:Bb,lineNumber:49,columnNumber:9}},r?s.createElement(s.Fragment,null,s.createElement(jg,{type:"download-speed",__source:{fileName:Bb,lineNumber:52,columnNumber:15}}),r):(0,ue.Z)("Download Speed")),s.createElement("div",{className:"chart",__source:{fileName:Bb,lineNumber:56,columnNumber:9}},s.createElement(Rb,{key:this.props.finalName,speed:i,__source:{fileName:Bb,lineNumber:57,columnNumber:11}})),s.createElement("div",{className:"actionbuttons",__source:{fileName:Bb,lineNumber:62,columnNumber:9}},this.props.canResumeDownload&&this.props.hasPausedTransfersSelected?s.createElement("input",{type:"button",className:"action-button",value:(0,ue.Z)("navigation","Resume"),tabIndex:this.props.tabIndex,onClick:this.props.onDownloadResume,__source:{fileName:Bb,lineNumber:64,columnNumber:15}}):s.createElement("input",{type:"button",className:"action-button",disabled:a,value:(0,ue.Z)("navigation","Restart"),tabIndex:this.props.tabIndex,onClick:this._openUrl,__source:{fileName:Bb,lineNumber:71,columnNumber:15}}),s.createElement("input",{id:"show-in-folder-button",type:"button",className:"action-button",tabIndex:this.props.tabIndex,disabled:a,onClick:this.props.openFile,value:this.pathButtonTitle,title:this.pathButtonTitle,__source:{fileName:Bb,lineNumber:80,columnNumber:11}}))))}}const Vb=Ub;var Hb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadProgressbar.jsx";const Wb="in_progress",zb="complete",Gb="interrupted";function Kb({item:e}){const t=e.state===Wb,n=e.paused||e.state===Gb,i=e.bytesReceived,r=e.totalBytes&&e.state!==zb?(i/e.totalBytes*100).toFixed(2):"100",a=Math.min(e.totalBytes/100,500);return s.createElement("div",{className:bn()("DownloadItem-ProgressBar",{"unknown-filesize":!e.totalBytes,visible:t,loading:!n}),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":r,"aria-valuetext":(0,ue.Z)("Download in progress"),"aria-hidden":!t,__source:{fileName:Hb,lineNumber:30,columnNumber:5}},s.createElement("div",{className:"value",style:{width:r+"%",transition:"0.00"===r?"none":`width ${a}ms linear`},__source:{fileName:Hb,lineNumber:41,columnNumber:7}}))}var jb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelProgressField.jsx";function Yb({node:e}){const{bytesReceived:t=0,fileSize:n=1,startTime:i="",endTime:r=""}=e||{},a=(t/n*100).toFixed(0),o=!isNaN(parseInt(a)),l=g()(i),c=g()(r),u=l.isSame(c,"day");return s.createElement("div",{className:"panel-timefield",__source:{fileName:jb,lineNumber:27,columnNumber:5}},s.createElement("div",{className:"container",__source:{fileName:jb,lineNumber:28,columnNumber:7}},s.createElement("div",{className:"started",__source:{fileName:jb,lineNumber:29,columnNumber:9}},(0,ue.Z)("Started:")),s.createElement("div",{className:"started-time",__source:{fileName:jb,lineNumber:30,columnNumber:9}},l.isValid()?l.format("l, LT"):""),s.createElement("div",{className:"completed",__source:{fileName:jb,lineNumber:31,columnNumber:9}},r?(0,ue.Z)("Finished:"):o&&(0,ue.Z)("Completed:")),s.createElement("div",{className:"progress",__source:{fileName:jb,lineNumber:34,columnNumber:9}},c.isValid()?c.format(u?"LT":"l, LT"):e&&o&&s.createElement(s.Fragment,null,a+"%",s.createElement(Kb,{item:e,__source:{fileName:jb,lineNumber:39,columnNumber:17}})))))}var $b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadEditor.jsx";const Xb=(0,ue.Z)("File Name");class Qb extends s.Component{render(){const e=this.props.downloadItem,t=(e?.filename||"").split("\\").pop().split("/").pop(),n=e?.url||"",i=t.length?t:Xb;return s.createElement("div",{className:bn()({data:!0,"downloads-cardwrapper":!0,cardview:!0,disabled:!e}),__source:{fileName:$b,lineNumber:31,columnNumber:7}},s.createElement("div",{className:"downloads-panel-actions",__source:{fileName:$b,lineNumber:37,columnNumber:9}},s.createElement("span",{className:"download-panel title",title:i,__source:{fileName:$b,lineNumber:38,columnNumber:11}},i),s.createElement("input",{type:"text",className:"cardview url downloads",tabIndex:this.props.keyAccess,placeholder:(0,ue.Z)("File URL"),disabled:!e,value:n,readOnly:!0,__source:{fileName:$b,lineNumber:43,columnNumber:11}})),s.createElement(Yb,{node:e,__source:{fileName:$b,lineNumber:54,columnNumber:9}}),s.createElement("div",{className:"panel-pathfield",__source:{fileName:$b,lineNumber:56,columnNumber:9}},s.createElement(Vb,{node:e,finalName:i,url:n,tabIndex:this.props.keyAccess,openFile:this.props.onShow,canResumeDownload:this.props.canResumeDownload,hasPausedTransfersSelected:this.props.hasPausedTransfersSelected,onDownloadResume:this.props.onDownloadResume,__source:{fileName:$b,lineNumber:57,columnNumber:11}})))}}const qb=Qb;var Jb="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanelHeader.jsx";function eN({downloadItem:e,canResumeDownload:t,filter:n,hasActiveTransfersSelected:i,hasCompletedTransfers:r,hasCompletedTransfersSelected:a,hasPausedTransfersSelected:o,keyAccess:l,onDownloadResume:c,onFilterChange:u,onRemoveAllFinished:m,onRemoveSelected:d,onRestartSelectedDownload:h,onStopSelectedDownload:p,title:g}){return s.createElement("header",{__source:{fileName:Jb,lineNumber:54,columnNumber:5}},s.createElement("h1",{__source:{fileName:Jb,lineNumber:55,columnNumber:7}},g),s.createElement("div",{className:"toolbar toolbar-default toolbar-medium toolbar-wrap",__source:{fileName:Jb,lineNumber:56,columnNumber:7}},s.createElement("input",{type:"search",placeholder:(0,ue.Z)("verb","Search"),value:n,onChange:u,__source:{fileName:Jb,lineNumber:57,columnNumber:9}}),s.createElement("div",{className:"toolbar",__source:{fileName:Jb,lineNumber:62,columnNumber:9}},s.createElement("div",{className:"toolbar-group",__source:{fileName:Jb,lineNumber:63,columnNumber:11}},o||t?s.createElement(ko,{tooltip:(0,ue.Z)("Resume Download"),onClick:c,image:cn.sxZ.small,__source:{fileName:Jb,lineNumber:65,columnNumber:15}}):s.createElement(ko,{tooltip:(0,ue.Z)("verb","Pause"),onClick:p,disabled:!i,image:cn.Q9E.small,__source:{fileName:Jb,lineNumber:71,columnNumber:15}}),s.createElement(ko,{tooltip:(0,ue.Z)("command","Restart"),disabled:!e,onClick:h,image:cn.Ibx.small,__source:{fileName:Jb,lineNumber:79,columnNumber:13}}),s.createElement(ko,{tooltip:(0,ue.Z)("verb","Remove"),disabled:!(a||o||e&&"interrupted"===e.state),onClick:d,image:cn.M2k.small,__source:{fileName:Jb,lineNumber:85,columnNumber:13}}),s.createElement(ko,{tooltip:(0,ue.Z)("Remove all finished"),disabled:!r,onClick:m,image:cn.DwE.small,__source:{fileName:Jb,lineNumber:97,columnNumber:13}})))))}var tN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPlaceholder.jsx";function nN(){return s.createElement("div",{className:"download-placeholder",__source:{fileName:tN,lineNumber:11,columnNumber:5}},s.createElement("div",{className:"happy-note",__source:{fileName:tN,lineNumber:12,columnNumber:7}},s.createElement(jg,{type:"download-placeholder",size:46,__source:{fileName:tN,lineNumber:13,columnNumber:9}}),s.createElement("h1",{__source:{fileName:tN,lineNumber:14,columnNumber:9}},(0,ue.Z)("Your download history is empty."))))}var sN=n(18973),iN=n(22098);const rN="in_progress",aN="complete",oN="interrupted";function lN({item:e}){const t=(new Date).getTime()+2e3,n=new Date(e.estimatedEndTime).getTime(),i=e.state===rN,r=e.bytesReceived,{currentHumanized:a,endHumanized:o}=function(e,t){let n=Cr(e);const s=Cr(t||e);return n.split(" ")[1]===s.split(" ")[1]&&(n=n.split(" ")[0]),{currentHumanized:n,endHumanized:s}}(r,e.totalBytes),l=function(e,t,n){return e&&t>n?g()(t).fromNow():e&&t<=n?(0,ue.Z)("about a second"):""}(i,n,t),c=(0,ue.Z)("$1/s",[Cr(e.currentSpeed)]),u=e.paused||e.state===oN,m=e.error?function(e){switch(e){case"FILE_NO_SPACE":return(0,ue.Z)("Disk is full");case"FILE_TOO_LARGE":return(0,ue.Z)("File too large");case"FILE_FAILED":return(0,ue.Z)("Download error");case"FILE_ACCESS_DENIED":return(0,ue.Z)("Insufficient permissions");case"FILE_NAME_TOO_LONG":return(0,ue.Z)("Path too long");case"FILE_VIRUS_INFECTED":return(0,ue.Z)("Virus detected");case"FILE_TRANSIENT_ERROR":return(0,ue.Z)("System busy");case"FILE_BLOCKED":return(0,ue.Z)("Blocked");case"FILE_SECURITY_CHECK_FAILED":return(0,ue.Z)("Virus scan failed");case"FILE_TOO_SHORT":return(0,ue.Z)("File truncated");case"FILE_SAME_AS_SOURCE":return(0,ue.Z)("Already downloaded");case"FILE_HASH_MISMATCH":return(0,ue.Z)("Hash mismatch");case"NETWORK_FAILED":return(0,ue.Z)("Network");case"NETWORK_TIMEOUT":return(0,ue.Z)("Timeout");case"NETWORK_DISCONNECTED":return(0,ue.Z)("Disconnected");case"NETWORK_SERVER_DOWN":return(0,ue.Z)("Server unavailable");case"NETWORK_INVALID_REQUEST":return(0,ue.Z)("Invalid network request");case"SERVER_FAILED":return(0,ue.Z)("Server failed");case"SERVER_NO_RANGE":return(0,ue.Z)("Server does not support range");case"SERVER_BAD_CONTENT":return(0,ue.Z)("The server could not find the file");case"SERVER_UNAUTHORIZED":return(0,ue.Z)("Unauthorized");case"SERVER_CERT_PROBLEM":return(0,ue.Z)("Certificate problem");case"SERVER_FORBIDDEN":return(0,ue.Z)("Forbidden");case"SERVER_UNREACHABLE":return(0,ue.Z)("Unreachable");case"SERVER_CONTENT_LENGTH_MISMATCH":return(0,ue.Z)("Content length mismatch");case"SERVER_CROSS_ORIGIN_REDIRECT":return(0,ue.Z)("Cross origin redirect");case"USER_CANCELED":return(0,ue.Z)("Cancelled");case"USER_SHUTDOWN":return(0,ue.Z)("Shutdown");case"CRASH":return(0,ue.Z)("Crashed")}return e}(e.error):"",d=u?(0,ue.Z)("$1 of $2 - stopped",[a,o]):(0,ue.Z)("$1 of $2 at $3",[a,o,c]);return s.createElement("div",{className:"DownloadItem-FileSize",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadSize.jsx",lineNumber:159,columnNumber:5}},e.state===aN?o:e.error?m:d,l&&` (${l})`)}var cN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadActionButtons.jsx";function uN({onClick:e}){return s.createElement("button",{onClick:e,title:(0,ue.Z)("verb","Pause"),className:"DownloadItem-ActionButton circular",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn.Q9E.small},__source:{fileName:cN,lineNumber:19,columnNumber:5}})}function mN({onClick:e}){return s.createElement("button",{onClick:e,title:(0,ue.Z)("Resume Download"),className:"DownloadItem-ActionButton circular resume",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn.sxZ.small},__source:{fileName:cN,lineNumber:29,columnNumber:5}})}function dN({onClick:e}){return s.createElement("button",{onClick:e,title:(0,ue.Z)("Show in File Manager"),className:"DownloadItem-ActionButton circular reveal",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn._TQ.small},__source:{fileName:cN,lineNumber:39,columnNumber:5}})}function hN({onClick:e}){return s.createElement("button",{onClick:e,title:(0,ue.Z)("verb","Remove"),className:"DownloadItem-ActionButton circular remove",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn.M2k.small},__source:{fileName:cN,lineNumber:51,columnNumber:5}})}function pN(e){return new Promise(((t,n)=>{h.Z.downloads.getFileIcon(e,{size:32},(e=>{t(e)}))}))}var gN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadItem.jsx";function bN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NN(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,_N(e,t,"get"))}function fN(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,_N(e,t,"set"),n),n}function _N(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const vN="\n• ",EN="in_progress",CN="complete";function wN(e){const t=e.state===EN,n=e.bytesReceived,s=(0,ue.Z)("$1/s",[Cr(e.currentSpeed)]);return e.url+vN+(0,ue.Z)("Added: $1",[g()(e.startTime).format("l, LT")])+(t&&e.totalBytes?vN+(0,ue.Z)("Downloading: $1% $2",[(0,iN.Z)(n/e.totalBytes*100,0),e.paused?(0,ue.Z)("(stopped)"):""]):"")+(e.endTime?vN+(0,ue.Z)("Complete: $1",[g()(e.endTime).format("l, LT")]):"")+vN+(0,ue.Z)("Speed: $1",[s])}var yN=new WeakMap;class SN extends s.PureComponent{constructor(e){super(e),yN.set(this,{writable:!0,value:!1}),bN(this,"state",{icon:void 0}),bN(this,"handleMouseEnter",(()=>{X.Z.setStatus(this.props.item.url)})),bN(this,"handleMouseLeave",(()=>{X.Z.clearStatus()})),bN(this,"renderDownloadButton",(()=>{const{item:e,onPause:t,onResume:n,onShow:i,onErase:r}=this.props;return e.state!==EN||e.paused?e.canResume?s.createElement(mN,{onClick:n.bind(null,e.id),__source:{fileName:gN,lineNumber:116,columnNumber:14}}):e.state===CN&&e.exists?s.createElement(dN,{onClick:i.bind(null,e.id),__source:{fileName:gN,lineNumber:120,columnNumber:14}}):s.createElement(hN,{onClick:r.bind(null,e.id),__source:{fileName:gN,lineNumber:123,columnNumber:12}}):s.createElement(uN,{onClick:t.bind(null,e.id),__source:{fileName:gN,lineNumber:112,columnNumber:14}})})),bN(this,"renderKeepDiscardMixedContent",(()=>{const{item:e,onErase:t,onValidateMixedDownload:n}=this.props;return s.createElement("div",{className:"DownloadItem-KeepDiscard",__source:{fileName:gN,lineNumber:128,columnNumber:13}},(0,ue.Z)("This file can't be downloaded securely."),s.createElement("button",{onClick:()=>t(e.id),title:(0,ue.Z)("Discard insecure download"),className:"DownloadItem-KeepDiscard-KeepDiscardButton-default",tabIndex:"-1",defaultChecked:!0,__source:{fileName:gN,lineNumber:130,columnNumber:7}},(0,ue.Z)("Discard")),s.createElement("button",{onClick:()=>n(e.id),title:(0,ue.Z)("Keep insecure download"),className:"DownloadItem-KeepDiscard-KeepDiscardButton",tabIndex:"-1",__source:{fileName:gN,lineNumber:135,columnNumber:7}},(0,ue.Z)("Keep")))})),g().relativeTimeThreshold("ss",2)}componentDidMount(){fN(this,yN,!0),pN(this.props.item.id).then((e=>{NN(this,yN)&&this.setState({icon:e})}))}componentWillUnmount(){fN(this,yN,!1)}componentDidUpdate(e,t){this.state.icon||e.item.state===this.props.item.state||pN(this.props.item.id).then((e=>{NN(this,yN)&&this.setState({icon:e})}))}render(){const{item:e}=this.props,t=(e.filename||e.finalUrl).split("\\").pop().split("/").pop(),{icon:n}=this.state;return s.createElement("div",{className:bn()("DownloadItem",{"DownloadItem--Unavailable":!1===e.exists}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,title:wN(e),__source:{fileName:gN,lineNumber:154,columnNumber:7}},n&&s.createElement("img",{src:n,className:"DownloadItem-Icon",__source:{fileName:gN,lineNumber:162,columnNumber:18}}),s.createElement("div",{className:"DownloadItem-FileName",__source:{fileName:gN,lineNumber:164,columnNumber:9}},t),s.createElement(Kb,{item:e,__source:{fileName:gN,lineNumber:168,columnNumber:9}}),s.createElement(lN,{item:e,__source:{fileName:gN,lineNumber:169,columnNumber:9}}),this.renderDownloadButton(),"block"===e.mixedState&&this.renderKeepDiscardMixedContent())}}const TN=SN;function kN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IN(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}var AN=new WeakMap;class ZN extends s.Component{constructor(...e){super(...e),AN.set(this,{writable:!0,value:s.createRef()}),kN(this,"componentDidMount",(()=>{const e=IN(this,AN).current;e&&(e.addEventListener("pointerdown",this.handlePointerDown,!0),e.addEventListener("pointerup",this.handlePointerUp,!0),e.addEventListener("pointercancel",this.handleStop,!0))})),kN(this,"componentWillUnmount",(()=>{const e=IN(this,AN).current;e&&(e.removeEventListener("pointerdown",this.handlePointerDown,!0),e.removeEventListener("pointerup",this.handlePointerUp,!0),e.removeEventListener("pointercancel",this.handleStop,!0))})),kN(this,"handleDoubleClick",(e=>{this.props.onDoubleClick&&(this.props.onDoubleClick(),e.stopPropagation())})),kN(this,"handlePointerDown",(e=>{e.preventDefault(),e.button===Nn.kLeft&&(e.currentTarget.setPointerCapture(e.pointerId),Nn.setWebviewPointerEvents(!1,this.context.document),e.currentTarget.addEventListener("pointermove",this.handlePointerMove,!0),this.props.onStart&&this.props.onStart())})),kN(this,"handlePointerUp",(e=>{e.button===Nn.kCenter?this.handleDoubleClick(e):this.handleStop(e)})),kN(this,"handlePointerMove",(e=>{if(!e.buttons)return void this.handleStop(e);const t=this.props.returnOffset?e.movementX/devicePixelRatio:e.pageX+(this.props.offset||0),n=this.props.returnOffset?e.movementY/devicePixelRatio:e.pageY+(this.props.offset||0);requestAnimationFrame((()=>{this.props.onSlidebarPosition(t,n,e)}))})),kN(this,"handleStop",(({currentTarget:e,pointerId:t})=>{e.releasePointerCapture(t),Nn.setWebviewPointerEvents(!0,this.context.document),e.removeEventListener("pointermove",this.handlePointerMove,!0),this.props.onStop&&this.props.onStop()}))}render(){const{position:e}=this.props,t="left"===e||"right"===e?"SlideBar--FullHeight":"SlideBar--FullWidth",n="right"===e||"bottom"===e;return s.createElement("button",{type:"button",tabIndex:"-1",ref:IN(this,AN),style:this.props.style,onDoubleClick:this.handleDoubleClick,className:bn()("SlideBar",this.props.className,t,{alternate:n}),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SlideBar.jsx",lineNumber:132,columnNumber:7}})}}kN(ZN,"contextType",Vs.Z),kN(ZN,"defaultProps",{offset:0});const PN=ZN;var DN=n(34155),MN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortingSelector.jsx";function ON(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xN="vivaldi/x-sortfield";class LN extends s.PureComponent{constructor(e){super(e),ON(this,"getWidth",(e=>{const{HTMLElement:t}=this.context,n=pn.findDOMNode(this),s=n instanceof t?n.getBoundingClientRect():null;s&&s.width&&this.setState({maxWidth:s.width,dataKey:e})})),ON(this,"saveColumnsToSettings",(()=>{this.dragged="",this.props.onSaveRow&&this.props.onSaveRow()})),ON(this,"resizeRow",((e,t,n)=>{const{dataKey:s}=this.state;this.setState((t=>{const i=t.columns?[...t.columns]:[],r=i.flatMap((e=>e.id)).indexOf(s),a=n.target.parentElement,o=Math.round(e-a.getClientRects()[0].left),l=r+1,c=a.nextSibling,u=Math.round(a.clientWidth+c.clientWidth)-o;return o<0||u<0||(i[l].key||0===r&&!i[r].key?i[r]={...i[r],width:o}:i[l]={...i[l],width:u},this.props.onUpdateRow&&this.props.onUpdateRow(i)),{columns:i}}))})),ON(this,"updateField",(e=>{const t=e.target.value;let n;n="manually"===t?ti.Z.NO_SORTING:this.props.sortOrder===ti.Z.NO_SORTING?ti.Z.ASCENDING_SORT:this.props.sortOrder,this.props.onSortChange(n,t)})),ON(this,"updateSort",((e,t)=>{let n;if(t.preventDefault(),e===this.props.sortField)switch(this.props.sortOrder){case ti.Z.ASCENDING_SORT:n=ti.Z.DESCENDING_SORT;break;case ti.Z.DESCENDING_SORT:n=!1!==this.props.manualSorting?ti.Z.NO_SORTING:ti.Z.ASCENDING_SORT;break;case ti.Z.NO_SORTING:n=ti.Z.ASCENDING_SORT}else n=ti.Z.ASCENDING_SORT;n&&this.props.onSortChange(n,e)})),ON(this,"updateOrder",(()=>{const e=this.props.sortOrder===ti.Z.DESCENDING_SORT?ti.Z.ASCENDING_SORT:ti.Z.DESCENDING_SORT;this.props.onSortChange(e,this.props.sortField)})),ON(this,"onDragStart",((e,t)=>{this.dragged=e,t.dataTransfer.setData(xN,!0),t.stopPropagation()})),ON(this,"onDragOver",((e,t)=>{const{HTMLElement:n}=this.context;if(t.dataTransfer&&!t.dataTransfer.types.includes(xN))return;if(t.preventDefault(),t.stopPropagation(),e===this.dragged||!(t.currentTarget instanceof n))return;const s=t.currentTarget.getBoundingClientRect(),i=(t.clientX-s.left)/s.width<=.5?"left":"right";this.setState({dragOverField:{id:e,position:i}})})),ON(this,"onDrop",(e=>{if(this.state.columns&&void 0!==this.state.dragOverField&&this.state.columns.length>1&&e.dataTransfer.getData(xN)){const{columns:t,dragOverField:n}=this.state,s=t.findIndex((e=>e.id===this.dragged)),i=Math.max(0,t.findIndex((e=>e.id===n.id))+("right"===n.position?1:0)),r=s-i;if(0===r||!this.state.columns)return;e.preventDefault(),e.stopPropagation(),this.setState((e=>{if(e.columns){const t=[...e.columns];return t.splice(Math.max(0,i-(r<0?1:0)),0,t.splice(s,1)[0]),this.resetDragOverField(),this.props.onUpdateRow&&this.props.onUpdateRow(t),{columns:t}}})),DN.nextTick((()=>this.saveColumnsToSettings()))}})),ON(this,"resetDragOverField",(()=>{this.setState({dragOverField:void 0})})),ON(this,"resetColumns",(()=>{const e=bg(this.props.fields);e&&(this.setState({columns:e}),this.props.onUpdateRow&&this.props.onUpdateRow(e))})),ON(this,"onContextMenu",(e=>{if(!this.state.columns)return;const t=this.state.columns.flatMap((e=>e.id)),n=this.props.fields.filter((e=>!e.key)).map((e=>({handler:this.toggleColumn.bind(this,e.value),type:"checkbox",checked:t.includes(e.value),...z.Z.makeLabelPair(e.text)})),[]);this.props.columns&&(n.push(z.Z.separatorItem),n.push({handler:this.resetColumns,...(0,Mn.Z)("Reset Columns")})),(0,Hs.Z)(this.context.vivaldiWindowId,n)(e)})),ON(this,"toggleColumn",(e=>{if(!this.state.columns)return;const t=this.state.columns.flatMap((e=>e.id));t.includes(e)?this.setState((n=>{const s=n.columns||[];if(s){const n=t.indexOf(e),i=[...s.slice(0,n),...s.slice(n+1)];return this.props.onUpdateRow&&this.props.onUpdateRow(i),{columns:i}}})):this.setState((t=>{const n=t.columns||[],s=this.props.fields.find((t=>t.value===e));if(s&&n.length>0){const t=this.props.fields.indexOf(s),i=[...n.slice(0,t),{id:e,width:s.width||20},...n.slice(t)];return this.props.onUpdateRow&&this.props.onUpdateRow(i),{columns:i}}})),DN.nextTick((()=>this.saveColumnsToSettings()))})),ON(this,"_getSortLabel",(e=>{const t=e.text,n=e.value,i=e.isSortField??!0,r=this.props.sortField===n,a=e.fullScreenTitle,{dragOverField:o}=this.state,l=o&&o.id===e.value,c=o&&o.position||"",u=bn()({"sortselector-button":!0,"sortselector-button-active":r&&this.props.sortOrder!==ti.Z.NO_SORTING,"direction-ascending":r&&this.props.sortOrder===ti.Z.ASCENDING_SORT,"direction-descending":r&&this.props.sortOrder===ti.Z.DESCENDING_SORT,"over-left":l&&"left"===c,"over-right":l&&"right"===c,"drag-over":l}),{columns:m}=this.state,d=m.findIndex((e=>e.id===n)),h=m[d];return s.createElement("div",{key:"key_"+n+t+a,onContextMenu:this.onContextMenu,__source:{fileName:MN,lineNumber:367,columnNumber:7}},s.createElement("button",{draggable:1!==this.props.fields.length,onDragStart:this.onDragStart.bind(this,n),onDragOver:this.onDragOver.bind(this,n),onDragLeave:this.resetDragOverField,onDrop:this.onDrop,className:u,onClick:this.updateSort.bind(this,n),title:a||(0,ue.Z)("Toggle Sort Order"),disabled:!i,tabIndex:this.props.keyAccess,__source:{fileName:MN,lineNumber:370,columnNumber:9}},h&&h.width<80?s.createElement("span",{className:"column-icon",dangerouslySetInnerHTML:{__html:e.icon?e.icon:cn.NNg.small},__source:{fileName:MN,lineNumber:382,columnNumber:15}}):s.createElement("span",{className:"column-label",__source:{fileName:MN,lineNumber:387,columnNumber:15}},t),s.createElement("span",{className:"column-sort-order",dangerouslySetInnerHTML:{__html:cn.u0H},__source:{fileName:MN,lineNumber:389,columnNumber:13}})),m&&d>-1&&d<m.length-1&&s.createElement(PN,{onSlidebarPosition:this.resizeRow,onStart:()=>this.getWidth(n),onStop:this.saveColumnsToSettings,style:this.props.style,position:"right",__source:{fileName:MN,lineNumber:395,columnNumber:11}}))})),this.state={columns:e.columns||[],maxWidth:0,dataKey:"",dragOverField:void 0}}render(){const e=bn()({"sortselector-button":!0,"direction-ascending":this.props.sortOrder===ti.Z.ASCENDING_SORT,"direction-descending":this.props.sortOrder===ti.Z.DESCENDING_SORT}),t=this.props.sortOrder===ti.Z.NO_SORTING;let n=this.state.columns&&this.state.columns.length>0?this.state.columns.map((e=>{const t=this.props.fields.find((t=>t.value===e.id));if(t)return this._getSortLabel(t)})):this.props.fields.map((e=>this._getSortLabel(e)));if(!0===this.props.fullsize){const e=this.props.columns&&Ng(this.props.columns);return s.createElement("div",{className:bn()("sortselector","sortselector-tableheader",{"tableheader-add-scrollbar-spacing":!!this.props.alignHeaderWithScrollbar}),style:{gridTemplateColumns:e},__source:{fileName:MN,lineNumber:428,columnNumber:9}},n)}return 1!==this.props.fields.length||this.props.compact?(n=this.props.fields.filter((({isSortField:e})=>e??!0)).map((e=>s.createElement("option",{key:e.value,value:e.value,__source:{fileName:MN,lineNumber:450,columnNumber:11}},e.fullScreenTitle))),!1!==this.props.manualSorting&&n.unshift(s.createElement("option",{key:"manually",value:"manually",__source:{fileName:MN,lineNumber:458,columnNumber:11}},(0,ue.Z)("Sort Manually"))),s.createElement("div",{className:"sortselector sortselector-compact",__source:{fileName:MN,lineNumber:465,columnNumber:9}},s.createElement("div",{className:"sortselector-area",__source:{fileName:MN,lineNumber:466,columnNumber:11}},s.createElement("select",{className:"sortselector-dropdown",title:(0,ue.Z)("Sort by..."),value:this.props.sortField,tabIndex:this.props.keyAccess,onChange:this.updateField,__source:{fileName:MN,lineNumber:467,columnNumber:13}},n)),s.createElement("button",{className:e,onClick:this.updateOrder,title:this.props.sortOrder===ti.Z.ASCENDING_SORT?(0,ue.Z)("Sort Descending"):(0,ue.Z)("Sort Ascending"),tabIndex:t?-1:this.props.keyAccess,disabled:t,dangerouslySetInnerHTML:{__html:cn.u0H},__source:{fileName:MN,lineNumber:476,columnNumber:11}}))):s.createElement("div",{className:"sortselector sortselector-tableheader single",__source:{fileName:MN,lineNumber:440,columnNumber:9}},n)}}ON(LN,"contextType",Vs.Z);const RN=LN;var BN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadTree.jsx";function FN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const UN=[{text:(0,ue.Z)("title","Name"),value:"filename",fullScreenTitle:(0,ue.Z)("Sort by Name")},{text:(0,ue.Z)("Type"),value:"extension",fullScreenTitle:(0,ue.Z)("Sort by Type")},{text:(0,ue.Z)("Size"),value:"bytesReceived",fullScreenTitle:(0,ue.Z)("Sort by Size")},{text:(0,ue.Z)("Date"),value:"startTime",fullScreenTitle:(0,ue.Z)("Sort by Date")},{text:(0,ue.Z)("Address"),value:"url",fullScreenTitle:(0,ue.Z)("Sort by Address")}];class VN extends s.PureComponent{constructor(...e){super(...e),FN(this,"refTreeList",s.createRef()),FN(this,"getExtension",(e=>{const t=e?e.lastIndexOf("."):-1;return-1!==t?e.substring(t+1):""})),FN(this,"sortForExtension",((e,t)=>{const{sortOrder:n}=this.props;if(n<=ti.Z.NO_SORTING)return 0;const s=e,i=t;let r=this.getExtension(s.filename),a=this.getExtension(i.filename);if(!r&&!a)return 0;if(!r)return n===ti.Z.ASCENDING_SORT?1:-1;if(!a)return n===ti.Z.ASCENDING_SORT?-1:1;if("number"==typeof r&&"number"==typeof a)return n===ti.Z.ASCENDING_SORT?r-a:a-r;if(r=r.toString().toLowerCase(),a=a.toString().toLowerCase(),r>a)return n===ti.Z.ASCENDING_SORT?1:-1;if(r<a)return n===ti.Z.ASCENDING_SORT?-1:1;return ti.Z.getDefaultComparator(n,"filename")(e,t)})),FN(this,"returnFalse",(()=>!1)),FN(this,"selectByIds",(e=>{e.forEach((e=>{this.refTreeList.current?.selectById(e,{ctrlKey:!0,metaKey:!0})}))})),FN(this,"selectByNode",(e=>{this.refTreeList.current?.selectByNode(e)})),FN(this,"selectByIndex",(e=>{this.refTreeList.current?.selectByIndex(e)})),FN(this,"scrollToId",(e=>{this.refTreeList.current?.scrollToId(e)})),FN(this,"isSelected",(e=>this.refTreeList.current?.isItemSelected(e))),FN(this,"getSelectedNodes",(()=>this.refTreeList.current?.selectionModel.selectedIds||[])),FN(this,"getSelectedNode",(()=>this.refTreeList.current?.getSelectedItem())),FN(this,"onNodeMouseDown",(()=>{this.refTreeList.current?.focusTree()})),FN(this,"onNodeSelected",(e=>{e?this.props.onSelected(parseInt(e.id)<0?void 0:e):this.props.onSelected(void 0)})),FN(this,"onNodeDoubleClick",((e,t)=>{this.props.onOpen(t.id)})),FN(this,"onNodesActivated",((e,t)=>{t.forEach((e=>{this.props.onOpen(e.id)}))})),FN(this,"handleErase",(e=>(this.props.nodes.filter((t=>e.includes(t.id))).forEach((({id:e})=>this.props.onErase(e))),Promise.resolve()))),FN(this,"rowComponent",(e=>{const t=e.node;return s.createElement(TN,{key:t.id,item:t,onErase:this.props.onErase,onShow:this.props.onShow,onPause:this.props.onPause,onResume:this.props.onResume,onValidateMixedDownload:this.props.onValidateMixedDownload,__source:{fileName:BN,lineNumber:169,columnNumber:7}})}))}render(){const e=W.ZP.isIncognito(this.context.vivaldiWindowId),t="extension"===this.props.sortField?{sortOrder:this.props.sortOrder,sortField:this.props.sortField,comparator:this.sortForExtension}:void 0;return s.createElement(s.Fragment,null,sN.Z.hasDownloads({isIncognitoWindow:e})&&s.createElement(RN,{fields:UN,manualSorting:!1,onSortChange:this.props.onSortChange,keyAccess:this.props.keyAccess,sortField:this.props.sortField,sortOrder:this.props.sortOrder,__source:{fileName:BN,lineNumber:191,columnNumber:9}}),s.createElement("section",{className:"outerScrollbar",__source:{fileName:BN,lineNumber:199,columnNumber:7}},s.createElement(Sg,{ref:this.refTreeList,settings:"DOWNLOADS_TREE",rowComponent:this.rowComponent,nodes:this.props.nodes,menu:this.props.menu,isFolder:this.returnFalse,hasChildren:this.returnFalse,delete:this.handleErase,onSelect:this.onNodeSelected,enableDragAndDrop:!1,onItemMouseDown:this.onNodeMouseDown,onItemDoubleClick:this.onNodeDoubleClick,onItemsActivated:this.onNodesActivated,rowHeight:52,sorting:t,__source:{fileName:BN,lineNumber:200,columnNumber:9}})))}}const HN=VN;var WN=n(34155),zN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanel.jsx";function GN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KN(e,t){const n="startTime";if("extension"===e)return n;if(t===ti.Z.ASCENDING_SORT)return e;switch(e){case"bytesReceived":return"-bytesReceived";case"endTime":return"-endTime";case"filename":return"-filename";case"startTime":return"-startTime";case"url":return"-url"}return n}const jN=[P.kDownloadsPanelEditorHeight];function YN(e){return"complete"===e.state&&e.mime.startsWith("image/")}class $N extends s.PureComponent{constructor(...e){super(...e),GN(this,"refTree",s.createRef()),GN(this,"defaultHeight",A.ZP.getDefault(P.kDownloadsPanelEditorHeight)),GN(this,"state",{downloadItems:[],hasActiveDownloadItemsSelected:!1,hasPausedDownloadItemsSelected:!1,hasCompletedDownloadItemsSelected:!1,hasCompletedDownloadItems:!1,selectedDownloadItem:void 0,filter:sN.Z.getFilter(),editorHeight:A.ZP.get(P.kDownloadsPanelEditorHeight),...A.ZP.get(P.kDownloadsPanelSorting)}),GN(this,"fetchDownloadItemsAndUpdateState",(()=>new Promise((e=>{const t=W.ZP.isIncognito(this.context.vivaldiWindowId),n=sN.Z.getItems({isIncognitoWindow:t});let s;this.state.selectedDownloadItem&&(s=n.find((e=>{if(this.state.selectedDownloadItem)return e.id===this.state.selectedDownloadItem.id})),this.updateActiveProgressState());const i=n;this.setState({filter:sN.Z.getFilter(),selectedDownloadItem:s,downloadItems:i,hasCompletedDownloadItems:n.length>0,...A.ZP.get(P.kDownloadsPanelSorting)},e)})))),GN(this,"scrollDownloadItemIntoView",(e=>{this.refTree.current?.scrollToId(e.id)})),GN(this,"selectDownloadItem",(e=>{this.refTree.current?.selectByNode(e)})),GN(this,"onDownloadStoreChange",(e=>{switch(e.reason){case"download_completed":{const{downloadItem:t}=e;return void this.onTransferFinished(t)}case"download_started":{const{downloadItem:t}=e;return void this.fetchDownloadItemsAndUpdateState().then((()=>{this.scrollDownloadItemIntoView(t),this.selectDownloadItem(t)}))}case"download_panel_updated":return void this.fetchDownloadItemsAndUpdateState()}})),GN(this,"onPanelStoreChange",(e=>{this.props.open&&"setFocus"===e&&!si(pn.findDOMNode(this))&&this.focusTree()})),GN(this,"_onWindowStoreChange",(()=>{this.props.open&&W.ZP.isActive(this.context.vivaldiWindowId)&&l.Z.forceUpdate()})),GN(this,"onTransferFinished",(e=>{h.Z.windows.getLastFocused((t=>{if(t.id!==this.context.vivaldiWindowId)return;if(!A.ZP.get(P.kDownloadsNotifyOnComplete))return;if(!e)return;const n=e.filename.split("\\").pop().split("/").pop();const s=(0,ue.Z)("Download Complete"),i=l.Z.showDownload.bind(null,e.id);h.Z.downloads.getFileIcon(e.id,{size:32},(e=>{(0,Zt.c)({body:n,icon:e,title:s,onClick:i})}))})),this.updateActiveProgressState()})),GN(this,"getMenuState",(()=>{const e=this.updateActiveProgressState();return{numAddresses:this.getNumSelectedAddresses(),numFiles:this.getNumSelectedFiles(),numImages:this.getNumSelectedImages(),hasPaused:e.hasPausedDownloadItemsSelected,hasCompleted:e.hasCompletedDownloadItemsSelected,hasActive:e.hasActiveDownloadItemsSelected}})),GN(this,"getMenuCapability",(async(e,t,n,s)=>{switch(e.action){case"CONTEXT_OPEN_FILE":return{handler:this.openSelected,visible:Boolean(n)&&s.hasCompleted&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN":return{visible:Boolean(n)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>{this.openSelectedInTab(!1,A.ZP.get(P.kTabsOpenNewInBackground))},visible:Boolean(n)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>{this.openSelectedInTab(!1,!0)},visible:Boolean(n)&&!A.ZP.get(P.kTabsOpenNewInBackground)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN_TAB":return{handler:()=>{this.openSelectedInTab(!0,!1)},visible:Boolean(n)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>{this.openSelectedInWindow(!1)},visible:Boolean(n)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>{this.openSelectedInWindow(!0)},visible:Boolean(n)&&s.numImages>0&&s.numFiles>0,...t(e,s)};case"CONTEXT_FILEMANAGER":return{handler:()=>{this.showSelectedInFilemanager()},visible:Boolean(n)&&s.numFiles>0,...t(e,s)};case"CONTEXT_COPY_ADDRESS":return{handler:()=>{this.copySelectedAddress()},visible:Boolean(n),...t(e,s)};case"CONTEXT_COPY_PATH":return{handler:()=>{this.copySelectedPath()},visible:Boolean(n)&&s.hasCompleted&&s.numFiles>0,...t(e,s)};case"CONTEXT_RESTART":return{handler:()=>{this.restartSelected()},visible:Boolean(n)&&(s.hasCompleted||this.fileErrors()),...t(e,s)};case"CONTEXT_STOP":return{handler:()=>{this.stopSelected()},visible:Boolean(n)&&s.hasActive,...t(e,s)};case"CONTEXT_RESUME":return{handler:()=>{this.resumeSelected()},visible:Boolean(n)&&s.hasPaused,...t(e,s)};case"CONTEXT_REMOVE":return{handler:()=>{this.removeSelected()},visible:Boolean(n),...t(e,s)};case"CONTEXT_REMOVE_ALL_FINISHED":return{handler:()=>{this.removeAllFinished()},visible:Boolean(n)&&s.hasCompleted,...t(e,s)};default:return{...t(e,s)}}})),GN(this,"getSelectedDownloadItems",(()=>{const e=this.refTree.current?.getSelectedNodes().map((e=>e.id))||[];return this.state.downloadItems.filter((t=>-1!==e.findIndex((e=>e===t.id))))})),GN(this,"getNumSelectedImages",(()=>this.getSelectedDownloadItems().filter(YN).length)),GN(this,"getNumSelectedAddresses",(()=>this.getSelectedDownloadItems().filter((e=>Boolean(e.url))).length)),GN(this,"getNumSelectedFiles",(()=>{let e=0;const t=this.getSelectedDownloadItems();for(let n=0;n<t.length;n++){const s=t[n];s.exists&&!s.error&&e++}return e})),GN(this,"fileErrors",(()=>{const e=this.getSelectedDownloadItems().map((e=>e.error));if(e.length)return!e.includes(void 0)})),GN(this,"getActiveProgressStateForSelectedDownloadItems",(()=>{const e=this.getSelectedDownloadItems(),t=this.state.downloadItems;let n=!1,s=!1,i=!1,r=!1;for(let t=0;t<e.length;t++){const a=e[t];if("in_progress"===a.state?a.paused?s=!0:n=!0:"complete"===a.state&&(i=r=!0),n&&s&&i)break}return r=r||!!t.find((e=>"complete"===e.state)),{hasActiveDownloadItemsSelected:n,hasPausedDownloadItemsSelected:s,hasCompletedDownloadItemsSelected:i,hasCompletedDownloadItems:r}})),GN(this,"updateActiveProgressState",(()=>{const e=this.getActiveProgressStateForSelectedDownloadItems();return this.setState(e),e})),GN(this,"canResumeSelected",(()=>{const e=this.getSelectedDownloadItems();if(1===e.length){return e[0].canResume}return!1})),GN(this,"stopSelected",(()=>{this.getSelectedDownloadItems().filter((e=>!e.paused)).forEach((({id:e})=>l.Z.pauseDownload(e)))})),GN(this,"resumeSelected",(()=>{this.getSelectedDownloadItems().filter((e=>e.canResume)).forEach((({id:e})=>l.Z.resumeDownload(e)))})),GN(this,"restartSelected",(()=>{this.getSelectedDownloadItems().forEach((({id:e})=>l.Z.restartDownload(e)))})),GN(this,"showSelectedInFilemanager",(()=>{this.getSelectedDownloadItems().forEach((({id:e})=>l.Z.showDownload(e)))})),GN(this,"onSortChange",((e,t)=>{st.Z.set(P.kDownloadsPanelSorting,{sortOrder:e,sortField:t}),this.setState({sortField:t,sortOrder:e},(()=>{const n=KN(t,e);l.Z.setOrderBy(n)}))})),GN(this,"openSelected",(()=>{this.getSelectedDownloadItems().forEach((e=>{"complete"===e.state&&l.Z.openDownload(e.id)}))})),GN(this,"openSelectedInTab",((e,t)=>{const n=this.getSelectedDownloadItems().filter((e=>"complete"===e.state&&e.mime.startsWith("image/"))).map((e=>"file://"+e.filename));if(n.length>0){const s=n[n.length-1];n.forEach((n=>{const i={inCurrent:e,inBackground:t};!1===t&&(i.inBackground=n!==s),$.Z.openURL(n,i),e=!1}))}})),GN(this,"openSelectedInWindow",(e=>{const t=this.getSelectedDownloadItems().filter((e=>"complete"===e.state&&e.mime.startsWith("image/"))).map((e=>"file://"+e.filename)),n={inNewWindow:!0,incognito:e};t.forEach((e=>{$.Z.openURL(e,n)}))})),GN(this,"onSelected",(e=>{this.setState({selectedDownloadItem:e},(()=>{l.Z.forceUpdate(),this.updateActiveProgressState()}))})),GN(this,"removeAllFinished",(()=>{this.state.downloadItems.filter((e=>"complete"===e.state)).forEach((({id:e})=>l.Z.eraseDownload(e)))})),GN(this,"removeSelected",(()=>{this.getSelectedDownloadItems().forEach((({id:e})=>l.Z.eraseDownload(e)))})),GN(this,"copySelectedAddress",(()=>{const e=this.getSelectedDownloadItems().map((e=>e.url));0!==e.length&&navigator.clipboard.writeText(e.join("\n"))})),GN(this,"copySelectedPath",(()=>{const e=this.getSelectedDownloadItems().filter((e=>"complete"===e.state)).map((e=>e.filename));0!==e.length&&navigator.clipboard.writeText(e.join("\n"))})),GN(this,"handleFilterChange",(e=>{const t=e.target.value;this.setState({filter:t},(()=>l.Z.setSearchFilter(t)))})),GN(this,"onSlidebarPosition",((e,t)=>{this.setState((e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,216),0)})))})),GN(this,"onSlideBarStop",(()=>{this.setState((e=>{const t=e.editorHeight<Q.Cn?0:e.editorHeight;return st.Z.set(P.kDownloadsPanelEditorHeight,parseInt(t)),{editorHeight:t}}))})),GN(this,"onSlidebarToggle",(()=>{this.setState((e=>{let t=e.editorHeight;return t>Q.Cn?(t=0,st.Z.set(P.kDownloadsPanelEditorHeight,t)):(t=216,st.Z.reset(P.kDownloadsPanelEditorHeight)),{editorHeight:parseInt(t)}}))})),GN(this,"focusTree",(()=>{this.refTree.current?.refTreeList.current?.focusTree()})),GN(this,"showSelectedDownloadItem",(()=>{this.state.selectedDownloadItem&&l.Z.showDownload(this.state.selectedDownloadItem.id)})),GN(this,"menu",{name:"downloadlist",getState:this.getMenuState,getCapability:this.getMenuCapability,getVisibility:()=>!1})}componentDidMount(){re.ZP.addChangeListener(this.onPanelStoreChange),sN.Z.addChangeListener(this.onDownloadStoreChange),l.Z.setOrderBy(KN(this.state.sortField,this.state.sortOrder)),l.Z.setSearchFilter(this.state.filter),this.windowStoreToken=W.ZP.addListener(this._onWindowStoreChange),this.fetchDownloadItemsAndUpdateState()}componentDidUpdate(e,t){return t.filter!==this.state.filter?this.fetchDownloadItemsAndUpdateState():"extension"===this.state.sortField||t.sortField===this.state.sortField&&t.sortOrder===this.state.sortOrder?(t.selectedDownloadItem!==this.state.selectedDownloadItem&&this.updateActiveProgressState(),void(!e.open&&this.props.open&&WN.nextTick((()=>{this.focusTree(),0===this.refTree.current?.getSelectedNodes().length&&this.refTree.current?.selectByIndex(0)})))):this.fetchDownloadItemsAndUpdateState()}componentWillUnmount(){sN.Z.removeChangeListener(this.onDownloadStoreChange),re.ZP.removeChangeListener(this.onPanelStoreChange),this.windowStoreToken.remove()}render(){if(!this.props.open)return null;const e=this.canResumeSelected(),t=W.ZP.isIncognito(this.context.vivaldiWindowId),n=!sN.Z.hasDownloads({isIncognitoWindow:t})&&""===this.state.filter;return s.createElement("div",{className:"panel downloads",__source:{fileName:zN,lineNumber:683,columnNumber:7}},s.createElement(eN,{title:this.props.title,filter:this.state.filter,onFilterChange:this.handleFilterChange,keyAccess:this.props.keyAccess,canResumeDownload:e,onDownloadResume:this.resumeSelected,hasPausedTransfersSelected:this.state.hasPausedDownloadItemsSelected,hasActiveTransfersSelected:this.state.hasActiveDownloadItemsSelected,hasCompletedTransfersSelected:this.state.hasCompletedDownloadItemsSelected,hasCompletedTransfers:this.state.hasCompletedDownloadItems,onStopSelectedDownload:this.stopSelected,onRestartSelectedDownload:this.restartSelected,downloadItem:this.state.selectedDownloadItem?this.state.selectedDownloadItem:void 0,onRemoveSelected:this.removeSelected,onRemoveAllFinished:this.removeAllFinished,__source:{fileName:zN,lineNumber:684,columnNumber:9}}),s.createElement(HN,{ref:this.refTree,keyAccess:this.props.keyAccess,menu:this.menu,nodes:this.state.downloadItems,onSelected:this.onSelected,onSortChange:this.onSortChange,sortField:this.state.sortField,sortOrder:this.state.sortOrder,onErase:l.Z.eraseDownload,onResume:l.Z.resumeDownload,onPause:l.Z.pauseDownload,onShow:l.Z.showDownload,onOpen:l.Z.openDownload,onValidateMixedDownload:l.Z.validateMixedDownload,__source:{fileName:zN,lineNumber:705,columnNumber:9}}),n?s.createElement(nN,{__source:{fileName:zN,lineNumber:722,columnNumber:11}}):s.createElement("section",{className:"download-editor",style:{flexBasis:this.state.editorHeight},__source:{fileName:zN,lineNumber:724,columnNumber:11}},s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,onDoubleClick:this.onSlidebarToggle,position:"bottom",returnOffset:!0,__source:{fileName:zN,lineNumber:728,columnNumber:13}}),this.state.editorHeight>0&&s.createElement(qb,{downloadItem:this.state.selectedDownloadItem,keyAccess:this.props.keyAccess,onShow:this.showSelectedDownloadItem,canResumeDownload:e,hasPausedTransfersSelected:this.state.hasPausedDownloadItemsSelected,onDownloadResume:this.resumeSelected,__source:{fileName:zN,lineNumber:737,columnNumber:15}})))}}GN($N,"contextType",Vs.Z);const XN=(0,bi.Z)($N,jN);var QN=n(32135),qN="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\DownloadButton.jsx";function JN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ef extends s.PureComponent{constructor(...e){super(...e),JN(this,"state",{downloadProgress:0}),JN(this,"_onDownloadStoreChange",(()=>{this.setState({downloadProgress:sN.Z.getTotalProgress()})})),JN(this,"togglePopup",(()=>{QN.Z.toggleDownloadPopout()})),JN(this,"hidePopup",(()=>{this.props.isPopupVisible&&QN.Z.toggleDownloadPopout()}))}componentDidMount(){sN.Z.addChangeListener(this._onDownloadStoreChange)}componentWillUnmount(){sN.Z.removeChangeListener(this._onDownloadStoreChange)}render(){return s.createElement(ko,{popupClassName:"download-popout",tooltip:(0,ue.Z)("Downloads"),alwaysMenu:!0,onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.togglePopup,isPopupVisible:this.props.isPopupVisible,popupWidth:350,image:cn.izi[this.props.size||"small"],progress:this.state.downloadProgress,__source:{fileName:qN,lineNumber:59,columnNumber:7}},s.createElement(XN,{keyAccess:-1,title:(0,ue.Z)("Downloads"),panelId:"bar",open:!0,onOpenDialog:qo.default,__source:{fileName:qN,lineNumber:71,columnNumber:9}}))}}const tf=ef;function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sf=[P.kAddressBarPosition];class rf extends s.Component{constructor(...e){super(...e),nf(this,"state",{width:25,height:25,hasLoadedPopup:!1}),nf(this,"popupContainer",s.createRef()),nf(this,"webviewelm",null),nf(this,"attachListeners",(()=>{this.webviewelm?.addEventListener("sizechanged",this.onSizeChanged),this.webviewelm?.addEventListener("close",this.onClose),this.webviewelm?.addEventListener("newwindow",this.onNewWindow),this.webviewelm?.addEventListener("loadstop",this.onLoadStop),this.webviewelm?.addEventListener("dialog",this.onShowDialog),Wl.Z.bind("esc",this.onCloseWithKeyboard)})),nf(this,"focusPopup",(()=>{const e=this.popupContainer.current?.parentElement?.parentElement?.parentElement?.querySelector(".focus-popup-area");e&&e.focus()})),nf(this,"detachListeners",(()=>{this.webviewelm?.removeEventListener("sizechanged",this.onSizeChanged),this.webviewelm?.removeEventListener("close",this.onClose),this.webviewelm?.removeEventListener("newwindow",this.onNewWindow),this.webviewelm?.removeEventListener("loadstop",this.onLoadStop),this.webviewelm?.removeEventListener("dialog",this.onShowDialog),Wl.Z.unbind("esc",this.onCloseWithKeyboard)})),nf(this,"handleClickOutside",(e=>{this.props.popupWantsToClose()})),nf(this,"removeWebView",(()=>{this.detachListeners(),this.webviewelm&&(this.webviewelm.parentNode?.removeChild(this.webviewelm),this.webviewelm=null),this.setState({hasLoadedPopup:!1})})),nf(this,"recreateWebView",(()=>{b.Z.zoom.getVivaldiUIZoom((e=>{const t=this.popupContainer.current;if(!t)return;this.props.extensionAnchor?.current&&this.props.extensionAnchor.current.appendChild(t);let n=800,s=600;e>=1&&(n=Math.round(800*e),s=Math.round(600*e));const i=document.createElement("webview"),{extensionId:r,popupPage:a}=this.props;r&&a&&(i.setAttribute("autosize","on"),i.setAttribute("minwidth",String(25)),i.setAttribute("minheight",String(25)),i.setAttribute("maxwidth",String(n)),i.setAttribute("maxheight",String(s)),i.setAttribute("partition","persist:"+r),i.setAttribute("class","ignore-react-onclickoutside"),i.setAttribute("vivaldi_view_type","extension_popup"),i.setAttribute("src",a),pn.findDOMNode(t)?.appendChild(i),this.webviewelm=i,this.attachListeners())}))})),nf(this,"onSizeChanged",(e=>{this.setState({width:e.newWidth,height:e.newHeight})})),nf(this,"onLoadStop",(e=>{this.props.enableOnClickOutside(),this.setState({hasLoadedPopup:!0}),setTimeout((e=>{this.webviewelm&&this.webviewelm.focus()}),50)})),nf(this,"onNewWindow",(e=>{e.window.accept(this.context.vivaldiWindowId+";1")})),nf(this,"onShowDialog",(e=>{this.props.disableOnClickOutside(),e.webview=this.webviewelm,e.preventDefault(),e.dialogtype="javascript",se.Z.showDialog(e,this.onClose)})),nf(this,"onCloseWithKeyboard",(()=>{this.props.popupWantsToClose(),this.focusPopup()})),nf(this,"onClose",(()=>{this.props.popupWantsToClose()}))}componentWillUnmount(){this.detachListeners(),this.webviewelm=null}render(){let e=0,t=0;if(this.props.popupRect){const n=this.props.popupRect;e="bottom"===this.props.prefValues[P.kAddressBarPosition]?n.top-parseInt(this.state.height,10)-10+6:n.bottom+10-6,t=n.left-this.state.width+n.width/2+17}const n=this.state.hasLoadedPopup&&this.props.popupVisible;return s.createElement("div",{className:bn()({"extension-popup":!0,"address-bar-visible":this.props.isAddressBarVisible,bottom:"bottom"===this.props.prefValues[P.kAddressBarPosition],top:"top"===this.props.prefValues[P.kAddressBarPosition]}),style:{height:this.state.height,width:this.state.width,position:"fixed",left:t,top:e,visibility:n?"visible":"hidden"},ref:this.popupContainer,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionPopup.jsx",lineNumber:209,columnNumber:12}})}}nf(rf,"contextType",Vs.Z);const af=(0,bi.Z)((0,so.Z)(rf),sf);var of=n(69291),lf="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionToolbar.jsx";function cf(){return cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cf.apply(this,arguments)}function uf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mf=[P.kAddressBarPosition,P.kAddressBarVisible],df=["mousedown","pointerdown","touchstart"],hf="vivaldi/x-button-extension";class pf extends s.PureComponent{constructor(...e){super(...e),uf(this,"state",{extensions:[],popupId:null,popupPage:null,popupVisible:!1,popupRect:void 0,extensionPopup:!1,shouldToggleHiddenExtensionsOnly:!1,shouldExpandHiddenExtensions:!0,shouldRenderHiddenExtensionsOnToolbar:!1,shouldRenderAllExtensionsOnToolbar:!1,toggleArrowIcon:cn.eFz.large,isToggleArrowPointingRight:!0}),uf(this,"_extensionActionShortcuts",[]),uf(this,"_removedIdToIndex",{}),uf(this,"_shortcutCallbacks",[]),uf(this,"_toolbarButtons",[]),uf(this,"refWrapper",s.createRef()),uf(this,"extensionActionPopupRef",s.createRef()),uf(this,"extensionSubscriber",(e=>{const t=this._toolbarButtons.find((t=>t?.props.mimeContent===e)),n=this.props.prefValues[P.kAddressBarVisible];this.state.popupId!==e&&this.setState({popupVisible:!1,popupPage:null,popupRect:void 0,popupId:null});const s=t&&n?t.getRect():(()=>{const e=document.getElementById("webview-container");if(!e)return;const{right:t,top:n,bottom:s}=e.getBoundingClientRect();return{top:s,left:t-25,bottom:n,width:0,height:0,right:0}})();this.onExtensionActionClicked(e,s)})),uf(this,"getExtensionIndex",(e=>this.state.extensions.findIndex((t=>t.id===e)))),uf(this,"onIconLoaded",(({badgeIcon:e,id:t})=>{const n=this.getExtensionIndex(t);-1!==n&&this.setState((t=>{const s=t.extensions.slice();return s[n]&&(s[n].badgeIcon=e),{extensions:s}}))})),uf(this,"assignShortcut",((e,t,n)=>{t&&(this._extensionActionShortcuts[n]=t,this._shortcutCallbacks[n]=()=>{const t=this._toolbarButtons[n],s=t?.getRect();if(s&&0!==s.left)t&&this.onExtensionActionClicked(e,t.getRect());else if(this.props.extensionAnchor?.current){const t=this.props.extensionAnchor.current.getBoundingClientRect(),n={top:0,bottom:t.top,left:t.right-34-20,right:t.right-20,width:34,height:34};this.onExtensionActionClicked(e,n)}},Wl.Z.bind(t.toLowerCase(),this._shortcutCallbacks[n]))})),uf(this,"removeShortcut",((e,t)=>{e&&(Wl.Z.unbind(e.toLowerCase(),this._shortcutCallbacks[t]),this._extensionActionShortcuts[t]="",delete this._shortcutCallbacks[t])})),uf(this,"updateShortcut",((e,t,n)=>{(t||this._extensionActionShortcuts[n])&&(t&&!this._extensionActionShortcuts[n]?this.assignShortcut(e,t,n):!t&&this._extensionActionShortcuts[n]?this.removeShortcut(t,n):t!==this._extensionActionShortcuts[n]&&(this.removeShortcut(t,n),this.assignShortcut(e,t,n)))})),uf(this,"onActionChanged",((e,t)=>{if(t&&t===W.ZP.getId()){const t=this.getExtensionIndex(e.id);-1!==t&&this.setState((n=>{const s=n.extensions.slice();return s[t]=e,{extensions:s}}),this.updateShortcut.bind(this,e.id,e.keyboardShortcut,t))}})),uf(this,"onActionAdded",(e=>{this.setState((t=>{const n=this._removedIdToIndex[e.id];delete this._removedIdToIndex[e.id];const s=t.extensions.slice();return"number"==typeof n&&n<t.extensions.length?s.splice(n,0,e):s.push(e),{extensions:s}}),this.saveBrowserOrder)})),uf(this,"onActionRemoved",(e=>{const t=this.getExtensionIndex(e.id);-1!==t&&this.setState((n=>{this._removedIdToIndex[e.id]=t;const s=n.extensions.slice();return s.splice(t,1),{extensions:s}}),this.saveBrowserOrder)})),uf(this,"onCommandAdded",((e,t)=>{const n=this.getExtensionIndex(e);this.assignShortcut(e,t,n)})),uf(this,"onCommandRemoved",((e,t)=>{const n=this.getExtensionIndex(e);this.removeShortcut(t,n)})),uf(this,"onExtensionActionClicked",((e,t,n)=>{const s=this.getExtensionIndex(e),i=this.state.extensions[s];if(i&&!i.visible){let e;n&&n.target instanceof HTMLElement&&(e=n.target);const t="top"===this.props.prefValues[P.kAddressBarPosition]?"bottomLeft":"topRight";return void this.getContextMenu(i).then((n=>{(0,Hs.Z)(this.context.vivaldiWindowId,n,void 0,t,e)()}))}b.Z.extensionActionUtils.executeExtensionAction(e,this.context.vivaldiWindowId,(n=>{n&&(this.setState((s=>({popupVisible:!s.popupVisible,popupPage:n,popupRect:t,popupId:e}))),this.state.popupVisible&&this.extensionActionPopupRef.current?.recreateWebView())}))})),uf(this,"popupWantsToClose",(()=>{this.setState({popupVisible:!1}),this.extensionActionPopupRef.current?.removeWebView()})),uf(this,"onDrop",((e,t,n)=>{if(!this._dragOverId)return;let s=this.getExtensionIndex(this._dragOverId);if(this._dragOverId=null,-1===s)return;const i=e.dataTransfer.getData(hf);if(!i)return;const r=this.getExtensionIndex(i);if(-1===r||r===s)return;if("right"===t&&s++,r===s)return;const a=this.state.extensions[r],o=this.state.extensions.slice();o.splice(r,1),r<s&&s--,o.splice(s,0,a),this.setState((e=>({extensions:o})),this.saveBrowserOrder)})),uf(this,"onDragStart",(e=>{})),uf(this,"onDragEnter",((e,t)=>{this._dragOverId=t})),uf(this,"executeExtensionAction",((e,t)=>{if(this.state.popupVisible)return void this.setState({popupVisible:!1});const{HTMLElement:n}=this.context;t.target instanceof n&&(this.state.popupId!==e&&this.setState({popupVisible:!1,popupPage:null,popupRect:void 0,popupId:null}),this.onExtensionActionClicked(e,t.target.getBoundingClientRect(),t))})),uf(this,"removeExtension",(e=>{b.Z.extensionActionUtils.removeExtension(e,this.context.vivaldiWindowId)})),uf(this,"showOptionsPage",(e=>{b.Z.extensionActionUtils.showExtensionOptions(e,this.context.vivaldiWindowId)})),uf(this,"toggleVisiblity",(e=>{this.state.extensionPopup&&this.hideHiddenExtensionsPopup(),b.Z.extensionActionUtils.toggleBrowserActionVisibility(e)})),uf(this,"isExtensionAvailable",(e=>!(W.ZP.isIncognito(this.context.vivaldiWindowId)&&!e.allowInIncognito))),uf(this,"getHiddenExtensions",(()=>this.state.extensions.filter((e=>e.actionIsHidden)))),uf(this,"hasHiddenExtensions",(()=>this.state.extensions.some((e=>e.actionIsHidden)))),uf(this,"toggleHiddenExtensionsPopup",(()=>{this.setState((e=>({extensionPopup:!e.extensionPopup})))})),uf(this,"hideHiddenExtensionsPopup",(()=>{this.setState({extensionPopup:!1})})),uf(this,"onCustomMenuSelected",((e,t)=>{b.Z.extensionActionUtils.executeMenuAction(e,this.context.vivaldiWindowId,t,(e=>{h.Z.runtime.lastError&&h.Z.runtime.lastError.message&&console.warn("Error invoking menu item action: "+h.Z.runtime.lastError.message)}))})),uf(this,"getContextMenu",(e=>new Promise(((t,n)=>{const s=e.homepage||"https://chrome.google.com/webstore/detail/"+e.id,i=this.props.showHiddenExtensionsButton;b.Z.extensionActionUtils.getExtensionMenu(e.id,(r=>{h.Z.runtime.lastError&&n(h.Z.runtime.lastError);const a=r.map((t=>{const n={handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked,...z.Z.makeLabelPair(t.name)};return t.submenu&&(n.items=t.submenu.map((t=>({handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked,...z.Z.makeLabelPair(t.name)})))),n})),o=[{handler:()=>$.Z.openURL(s),...z.Z.makeLabelPair(e.name||"")},...a.length>0?[z.Z.separatorItem,...a,z.Z.separatorItem]:[],{handler:this.showOptionsPage.bind(this,e.id),visible:void 0!==e.optionspage&&""!==e.optionspage,...(0,Mn.Z)("Options")},{handler:this.removeExtension.bind(this,e.id),visible:"componentAction"!==e.extensionType,ellipsis:!0,...(0,Mn.Z)("Remove Extension")},{handler:this.toggleVisiblity.bind(this,e.id),visible:i&&!this.props.showToggleButton&&e.actionIsHidden,...(0,Mn.Z)("Show Button")},{handler:this.toggleVisiblity.bind(this,e.id),visible:i&&!this.props.showToggleButton&&!e.actionIsHidden,...(0,Mn.Z)("Hide Button")},z.Z.separatorItem,{handler:se.Z.showExtensions,...(0,Mn.Z)("Manage Extensions")}];return t(o)}))})))),uf(this,"toggleSwitcherOnToolbar",(e=>{e?this.setState((e=>({shouldRenderAllExtensionsOnToolbar:!e.shouldRenderAllExtensionsOnToolbar}))):this.setState((e=>({shouldRenderHiddenExtensionsOnToolbar:!e.shouldRenderHiddenExtensionsOnToolbar})))})),uf(this,"switchToggleButton",(()=>{this.props.showAllExtensionsButton?this.toggleSwitcherOnToolbar(!0):this.toggleSwitcherOnToolbar(!1),this.state.isToggleArrowPointingRight&&this.setState({toggleArrowIcon:cn.S$A.large}),this.state.isToggleArrowPointingRight||this.setState({toggleArrowIcon:cn.eFz.large}),this.setState((e=>({isToggleArrowPointingRight:!e.isToggleArrowPointingRight})))})),uf(this,"renderExtensionToggleButton",(()=>{const e=this.state.toggleArrowIcon,t=this.props.showAllExtensionsButton;return(this.hasHiddenExtensions()||t)&&(this.props.showToggleButton||this.state.extensions.length>0)?s.createElement(ko,{tooltip:(0,ue.Z)("Toggle extensions"),onClick:()=>{this.switchToggleButton()},image:e,hidePopup:this.hideHiddenExtensionsPopup,__source:{fileName:lf,lineNumber:631,columnNumber:7}}):null})),uf(this,"renderHiddenExtensionInPopup",(()=>{const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,n=this.state.extensions.filter((n=>e?this.isExtensionAvailable:t?n.actionIsHidden&&this.isExtensionAvailable(n):void 0));return s.createElement(ko,{image:cn.yaZ.large,tooltip:(0,ue.Z)("Show hidden extensions"),onClick:this.toggleHiddenExtensionsPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideHiddenExtensionsPopup,isPopupVisible:this.state.extensionPopup,popupWidth:Math.min(34*n.length,442),className:"extensionPopupIcons",popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",hasLightArrow:!0,size:this.props.size,__source:{fileName:lf,lineNumber:653,columnNumber:7}},s.createElement("div",{ref:this.refWrapper,className:"toolbar toolbar-mainbar toolbar-wrap",tabIndex:"-1",__source:{fileName:lf,lineNumber:667,columnNumber:9}},n.map(((e,t)=>{const n=this.getExtensionIndex(e.id);return s.createElement(ko,{className:"ExtensionDropdownIcon extensionId",key:e.id,badgeText:e.badgeText,tooltip:e.name,tabIndex:0,imagePath:e.badgeIcon,ref:e=>{this._toolbarButtons[n]=e},onClick:this.executeExtensionAction.bind(this,e.id),menu:this.getContextMenu.bind(this,e),dragImage:e.badgeIcon,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:hf,mimeContent:e.id,onDrop:this.onDrop,__source:{fileName:lf,lineNumber:674,columnNumber:22}})}))))}))}componentDidMount(){b.Z.extensionActionUtils.onAdded.addListener(this.onActionAdded),b.Z.extensionActionUtils.onRemoved.addListener(this.onActionRemoved),b.Z.extensionActionUtils.onUpdated.addListener(this.onActionChanged),b.Z.extensionActionUtils.onCommandAdded.addListener(this.onCommandAdded),b.Z.extensionActionUtils.onCommandRemoved.addListener(this.onCommandRemoved),b.Z.extensionActionUtils.onIconLoaded.addListener(this.onIconLoaded),b.Z.extensionActionUtils.getToolbarExtensions((e=>{const t=d.Z.getSync("EXTENSION_BUTTON_ORDER_BROWSER");e.sort(((e,n)=>t.indexOf(e.id)-t.indexOf(n.id))),this.setState({extensions:e}),e.filter((e=>this.isExtensionAvailable(e))).forEach((e=>{const t=this.getExtensionIndex(e.id);this.updateShortcut(e.id,e.keyboardShortcut,t)}))})),of.g2.addChangeListener(this.extensionSubscriber)}componentDidUpdate(e,t){!t.extensionPopup&&this.state.extensionPopup&&this.refWrapper.current&&this.refWrapper.current.focus()}componentWillUnmount(){b.Z.extensionActionUtils.onAdded.removeListener(this.onActionAdded),b.Z.extensionActionUtils.onRemoved.removeListener(this.onActionRemoved),b.Z.extensionActionUtils.onUpdated.removeListener(this.onActionChanged),b.Z.extensionActionUtils.onIconLoaded.removeListener(this.onIconLoaded),b.Z.extensionActionUtils.onCommandAdded.removeListener(this.onCommandAdded),b.Z.extensionActionUtils.onCommandRemoved.removeListener(this.onCommandRemoved),of.g2.removeChangeListener(this.extensionSubscriber)}saveBrowserOrder(){d.Z.set({EXTENSION_BUTTON_ORDER_BROWSER:this.state.extensions.map((e=>e.id))})}render(){const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,n=this.state.shouldRenderAllExtensionsOnToolbar&&!this.props.renderInDropdown,i=this.state.shouldRenderHiddenExtensionsOnToolbar&&!this.props.renderInDropdown,r=this.state.extensions.filter((e=>this.isExtensionAvailable(e)));return 0===r.length?null:s.createElement("div",{className:bn()("toolbar",{"toolbar-mainbar":!0,"toolbar-extensions":!0,"toolbar-large":!0}),__source:{fileName:lf,lineNumber:715,columnNumber:7}},r.filter((s=>t&&i||t&&!s.actionIsHidden||e&&n)).map(((e,n)=>{const i=e.badgeIcon?e.badgeIcon:"data:image/svg+xml;utf8,"+cn.N_W,r={dragImage:i,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:hf,mimeContent:e.id,onDrop:this.onDrop},a=this.getExtensionIndex(e.id);let o,l=e.badgeBackgroundColor?to()(e.badgeBackgroundColor):void 0;return l&&l.alpha()<.5?l=void 0:l&&l?.alpha()<1&&(l=l.alpha(1)),o=e.badgeIcon?e.badgeText:e.name?e.name.charAt(0).toUpperCase():"",s.createElement(ko,cf({key:e.id,badgeColor:l,badgeText:o,onClick:this.executeExtensionAction.bind(this,e.id),menu:this.getContextMenu.bind(this,e),tooltip:e.badgeTooltip||e.name||(0,ue.Z)("Extension"),popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",size:this.props.size,className:bn()(e.id,"ExtensionIcon","extensionId",{"ExtensionIcon--Hidden":t&&e.actionIsHidden}),menuOrigin:"bottomLeft",imagePath:i,ref:e=>{this._toolbarButtons[a]=e}},r,{__source:{fileName:lf,lineNumber:759,columnNumber:20}}))})),r.length>0&&!this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.props.showHiddenExtensionsButton)&&this.renderExtensionToggleButton(),r.length>0&&this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.hasHiddenExtensions()&&this.props.showHiddenExtensionsButton)&&this.renderHiddenExtensionInPopup(),this.state.popupId&&s.createElement("div",{__source:{fileName:lf,lineNumber:803,columnNumber:9}},s.createElement(af,{ref:this.extensionActionPopupRef,extensionAnchor:this.props.extensionAnchor,isAddressBarVisible:this.props.isAddressBarVisible,eventTypes:df,outsideClickIgnoreClass:"extensionId",popupVisible:this.state.popupVisible,popupPage:this.state.popupPage,popupRect:this.state.popupRect,extensionId:this.state.popupId,popupWantsToClose:this.popupWantsToClose,__source:{fileName:lf,lineNumber:804,columnNumber:11}})))}}uf(pf,"contextType",Vs.Z);const gf=(0,bi.Z)(pf,mf);var bf;const Nf="change";let ff=new sa.Map;const _f=new(bf=class extends(Bi()){constructor(...e){var t,n,s;super(...e),t=this,n="emitChange",s=(0,vb.default)((e=>{this.emit(Nf,e)}),250),n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}getProgressInfo(e){const t=ff.get(e);if(t)return t}addChangeListener(e){this.on(Nf,e)}removeChangeListener(e){this.removeListener(Nf,e)}},bf);_f.dispatchToken=m.Z.register((e=>{switch(e.actionType){case"PAGE_SET_PROGRESS":{const{pageId:t,progressState:n}=e;!function(e,t){const n=ff.get(t);e!==n&&(n&&n.progress>e.progress&&(e.progress=n.progress),ff=ff.set(t,e),_f.emitChange())}(n,t);break}case"PAGE_CLOSE":!function(e){e.forEach((e=>{ff.has(e.id)&&(ff=ff.remove(e.id),_f.emitChange())}))}(e.pages)}}));const vf=_f;var Ef="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\progress\\PageloadProgress.jsx";function Cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wf={bytes:0,bytesDisplayed:0,currentPageId:null,elLoaded:0,elLoadedDisplayed:0,elTotal:0,isProgressing:!1,isStarted:!1,progress:0,stopped:!1,pageloadTicker:""},yf=[P.kAddressBarShowProgress,P.kThemeUseAnimation];class Sf extends s.PureComponent{constructor(...e){super(...e),Cf(this,"_isMounted",!1),Cf(this,"state",wf),Cf(this,"_onUpdateProgressState",(e=>{this.setState(e)})),Cf(this,"_onNavigationStoreChanged",(()=>{this._onProgressStateStoreChanged()})),Cf(this,"_onProgressStateStoreChanged",(()=>{const e=this.props.pageId,t=V.ZP.getPageById(e);if(t){const e=t.url;if((0,As.xl)(e))return}const n=vf.getProgressInfo(e),s=(Gd.Z.getNavigationInfo(e)||{}).trigger,{progress:i=0,loadedBytes:r=0,loadedElements:a=0,totalElements:o=0}=n||{};"start"===s?this.setState({...wf,currentPageId:e,isProgressing:!0,isStarted:!0}):"stop"===s?this.setState((e=>({isProgressing:!1,...e.stopped&&{}||{progress:1}}))):"commit"!==s||this.state.stopped||(this.setState({bytes:r,elLoaded:a,elTotal:o,isProgressing:!0,isStarted:!0,progress:i}),this.updateCount())})),Cf(this,"_onWebpageviewStoreChanged",(e=>{"PAGE_STOP"===e.type&&1!==this.state.progress&&this.setState({isProgressing:!1,stopped:!0})})),Cf(this,"getIncrement",((e,t)=>{const n=t-e;let s=0;return n>10?s=Math.floor(n/5):n>4?s=2:n>0&&(s=1),e+s})),Cf(this,"updateCount",(()=>{if(clearTimeout(this._updateTimer),!this._isMounted)return;const e=this.state.bytes,t=this.state.bytesDisplayed,n=this.state.elLoadedDisplayed;let s=this.state.elLoaded;1===this.state.progress&&s<this.state.elTotal&&(s=this.state.elTotal);const i=this.getIncrement(t,e),r=this.getIncrement(n,s);!1===this.props.prefValues[P.kThemeUseAnimation]?this.setState({elLoadedDisplayed:s,bytesDisplayed:e}):(s>n&&this.setState({elLoadedDisplayed:r}),e>t&&this.setState({bytesDisplayed:i}),!this.state.stopped&&(s>r||e>i)&&(this._updateTimer=setTimeout(this.updateCount,80)));const a=Cr(e,e>1048576?1:0);this.setState({pageloadTicker:a})}))}componentDidMount(){this._isMounted=!0,Gd.Z.addChangeListener(this._onNavigationStoreChanged),vf.addChangeListener(this._onProgressStateStoreChanged),lb.Z.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){clearTimeout(this._updateTimer),this._isMounted=!1,Gd.Z.removeChangeListener(this._onNavigationStoreChanged),vf.removeChangeListener(this._onProgressStateStoreChanged),lb.Z.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){const n=this.props.pageId;if(n!==t.currentPageId){const e=vf.getProgressInfo(this.props.pageId),{progress:t=0,loadedBytes:s=0,loadedElements:i=0,totalElements:r=0}=e||{};let a={};a=0===t||1===t||void 0===t?{...wf,currentPageId:n}:{...wf,currentPageId:n,progress:t,bytes:s,elLoaded:i,elTotal:r},this._onUpdateProgressState(a)}}render(){if(!this.props.open||isNaN(this.state.progress))return null;const e=this.state.progress,t=this.state.elLoadedDisplayed,n=this.state.elTotal,i=this.state.isProgressing,r=this.state.isStarted,a=!0===this.state.stopped,o=bn()({pageload:!0,unstarted:!r,progressing:i,"progress-done":1===e||a,stopped:a});return s.createElement("div",{className:o,__source:{fileName:Ef,lineNumber:262,columnNumber:7}},this.props.prefValues[P.kAddressBarShowProgress]&&s.createElement("progress",{className:"pageload-indicator",value:100*this.state.progress,max:100,__source:{fileName:Ef,lineNumber:264,columnNumber:11}}),s.createElement("div",{className:"pageload-ticker",__source:{fileName:Ef,lineNumber:269,columnNumber:9}},this.state.pageloadTicker),s.createElement("div",{className:"pageload-ticker",__source:{fileName:Ef,lineNumber:272,columnNumber:9}},t+"/"+n))}}const Tf=(0,bi.Z)(Sf,yf);var kf="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\OkChangeButton.jsx";const If=({onDialogClosed:e,onChange:t})=>s.createElement("section",{__source:{fileName:kf,lineNumber:11,columnNumber:3}},s.createElement("input",{type:"button",className:"primary",onClick:e,value:(0,ue.Z)("OK"),autoFocus:!0,__source:{fileName:kf,lineNumber:12,columnNumber:5}}),s.createElement("input",{type:"button",onClick:t,value:(0,ue.Z)("Change"),__source:{fileName:kf,lineNumber:17,columnNumber:5}}));var Af="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionPopup.jsx";function Zf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pf=Sr("input");class Df extends s.PureComponent{constructor(...e){super(...e),Zf(this,"handleClickOutside",(()=>{this.props.onDialogClosed()})),Zf(this,"allow",(()=>{this.props.onPermissionClicked(!1)})),Zf(this,"deny",(()=>{this.props.onPermissionClicked(!0)})),Zf(this,"renderAllowDenyQuery",(()=>{const e=this.props.renderNotice?this.props.renderNotice():null;return s.createElement("section",{__source:{fileName:Af,lineNumber:38,columnNumber:7}},e,s.createElement(Pf,{type:"button",onClick:this.allow,value:(0,ue.Z)("command","Allow"),__source:{fileName:Af,lineNumber:40,columnNumber:9}}),s.createElement("input",{type:"button",className:"primary",onClick:this.deny,value:(0,ue.Z)("Deny"),autoFocus:!0,__source:{fileName:Af,lineNumber:44,columnNumber:9}}))}))}render(){return s.createElement("section",{className:"addressfield-popup",__source:{fileName:Af,lineNumber:56,columnNumber:7}},s.createElement("header",{className:"addressfield-popup-header",__source:{fileName:Af,lineNumber:57,columnNumber:9}},this.props.image&&s.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:Af,lineNumber:59,columnNumber:13}}),s.createElement("h1",{__source:{fileName:Af,lineNumber:61,columnNumber:11}},this.props.message)),s.createElement("section",{className:"addressfield-popup-content",__source:{fileName:Af,lineNumber:63,columnNumber:9}},!1===this.props.isDecided?this.renderAllowDenyQuery():s.createElement(If,{onDialogClosed:this.props.onDialogClosed,onChange:this.props.onSettingsClicked,__source:{fileName:Af,lineNumber:66,columnNumber:15}})))}}const Mf=(0,so.Z)(Df);var Of="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionNotificator.jsx";function xf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lf(e,t){switch(e){case"camera":case"microphone_and_camera":case"videocapture":return cn.TVZ[t];case"location":case"geolocation":return cn.awi[t];case"audiocapture":case"microphone":return cn.nl[t];case"sensors":return cn.Y_k[t];case"midi-sysex":return cn.Nek[t];default:return cn.nlo[t]}}class Rf extends s.PureComponent{constructor(...e){super(...e),xf(this,"state",{isDialogOpen:"undecided"===this.props.permission.state,iconTypeSmall:Lf(this.props.permissionType,"small"),iconTypeMedium:Lf(this.props.permissionType,"medium")}),xf(this,"onNotificatorClicked",(()=>{this.setState((e=>({isDialogOpen:!e.isDialogOpen})))})),xf(this,"onDialogClosed",(()=>{this.setState({isDialogOpen:!1})})),xf(this,"onPermissionClicked",(e=>{const t=this.props.permission.requestEvent;if(t){!1===e?t.allow():t.deny();const n=this.props.permissionType;n&&Up.Z.setPermission(this.props.pageId,this.props.origin,n,t,e?"blocked":"allowed")}this.onDialogClosed()})),xf(this,"onSettingsClicked",(()=>{$.Z.openURL(this.getSettingsURL())})),xf(this,"getSettingsURL",(()=>{switch(this.props.permissionType){case"location":case"geolocation":return"chrome://settings/content/location";case"notifications":return"chrome://settings/content/notifications";case"camera":case"videocapture":return"chrome://settings/content/camera";case"audiocapture":case"microphone":return"chrome://settings/content/microphone";case"microphone_and_camera":return"chrome://settings/content#media-stream-mic";case"sensors":return"chrome://settings/content/sensors";case"midi-sysex":return"chrome://settings/content/midiDevices";default:console.warn("unknown permissiontype")}})),xf(this,"getMessageText",(()=>{const e="blocked"===this.props.permission.state,t="undecided"!==this.props.permission.state,n=this.props.origin,s=this.props.permissionType;if(!s)return"";if(t)if(e)switch(s){case"location":case"geolocation":return(0,ue.Z)("Website “$1” has been denied location access.",[n]);case"notifications":return(0,ue.Z)("Website “$1” has been denied showing notifications.",[n]);case"camera":case"videocapture":return(0,ue.Z)("Website “$1” has been denied access to your camera.",[n]);case"audiocapture":case"microphone":return(0,ue.Z)("Website “$1” has been denied access to your microphone.",[n]);case"microphone_and_camera":return(0,ue.Z)("Website “$1” has been denied access to your microphone and camera.",[n]);case"sensors":return(0,ue.Z)("Website “$1” has been denied access to motion sensors.",[n]);case"midi-sysex":return(0,ue.Z)("Website “$1” has been denied access to MIDI devices.",[n])}else switch(s){case"location":case"geolocation":return(0,ue.Z)("Website “$1” is accessing your location.",[n]);case"notifications":return(0,ue.Z)("Website “$1” is authorized to show notifications.",[n]);case"camera":case"videocapture":return(0,ue.Z)("Website “$1” is using your camera.",[n]);case"audiocapture":case"microphone":return(0,ue.Z)("Website “$1” is recording with your microphone.",[n]);case"microphone_and_camera":return(0,ue.Z)("Website “$1” is using your microphone and camera.",[n]);case"sensors":return(0,ue.Z)("Website “$1” is using your motion sensors.",[n]);case"midi-sysex":return(0,ue.Z)("Website “$1” is using your MIDI devices.",[n])}else switch(s){case"location":case"geolocation":return(0,ue.Z)("Website “$1” would like to access your location.",[n]);case"notifications":return(0,ue.Z)("Website “$1” would like to show notifications.",[n]);case"camera":case"videocapture":return(0,ue.Z)("Website “$1” would like to use your camera.",[n]);case"audiocapture":case"microphone":return(0,ue.Z)("Website “$1” would like to use your microphone.",[n]);case"microphone_and_camera":return(0,ue.Z)("Website “$1” would like to use your microphone and camera.",[n]);case"sensors":return(0,ue.Z)("Website “$1” would like to use motion sensors.",[n]);case"midi-sysex":return(0,ue.Z)("Website “$1” would like to use MIDI devices.",[n])}return console.warn("Unknown permissiontype: "+s),s})),xf(this,"renderNotice",(()=>"geolocation"===this.props.permissionType?s.createElement("div",{className:"geo-notice",__source:{fileName:Of,lineNumber:214,columnNumber:11}},s.createElement("a",{href:"",title:(0,ue.Z)("Vivaldi Browser Privacy Policy"),onClick:this._privacyNotice,__source:{fileName:Of,lineNumber:215,columnNumber:13}},(0,ue.Z)("Privacy Notice"))):null))}_privacyNotice(){$.Z.openURL("https://vivaldi.com/privacy/browser/")}render(){const e="blocked"===this.props.permission.state,t="undecided"!==this.props.permission.state,n={"button-addressfield":!0,"permission-popup":!0,"is-allowing":!e&&t,"is-dialog-open":this.state.isDialogOpen};return s.createElement("div",{className:"button-toolbar",__source:{fileName:Of,lineNumber:239,columnNumber:7}},s.createElement(ko,{tooltip:this.getMessageText(),onClick:this.onNotificatorClicked,image:this.state.iconTypeSmall,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:bn()(n),popupClassName:"addressfield-popup-container",popupWidth:400,__source:{fileName:Of,lineNumber:240,columnNumber:9}},s.createElement(Mf,{onPermissionClicked:this.onPermissionClicked,isDecided:t,onDialogClosed:this.onDialogClosed,onSettingsClicked:this.onSettingsClicked,settingsUrl:"",image:this.state.iconTypeMedium,renderNotice:this.renderNotice,message:this.getMessageText(),__source:{fileName:Of,lineNumber:250,columnNumber:11}})))}}const Bf=Rf;var Ff="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionsToolbar.jsx";class Uf extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=e=>!e.requestEvent&&"undecided"!==e.state,(n="_isPermissionUsage")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}mergeSortMicCamPermissions(e){const t=(e=e.sortBy(((e,t)=>t))).get("microphone"),n=e.get("camera"),s=e.get("microphone_and_camera");return t&&n&&this._isPermissionUsage(t)&&this._isPermissionUsage(n)&&!s?e=(e=(e=e.delete("microphone")).delete("camera")).set("microphone_and_camera",t):s&&this._isPermissionUsage(s)&&(t&&this._isPermissionUsage(t)&&(e=e.delete("microphone")),n&&this._isPermissionUsage(n)&&(e=e.delete("camera"))),e}render(){if(!this.props.pagePermissions.size)return null;const e=[];return this.props.pagePermissions.forEach(((t,n)=>{this.mergeSortMicCamPermissions(t).forEach(((t,i)=>{e.push(s.createElement(Bf,{pageId:this.props.pageId,key:i,permission:t,origin:n,permissionType:i,popupPosition:this.props.popupPosition,__source:{fileName:Ff,lineNumber:73,columnNumber:9}}))}))})),s.createElement("div",{className:"button-toolbar",__source:{fileName:Ff,lineNumber:85,columnNumber:7}},e)}}var Vf="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerDialog.jsx";function Hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Wf extends s.Component{constructor(...e){super(...e),Hf(this,"handleClickOutside",(()=>{this.props.onDialogClosed()})),Hf(this,"onBlockedPopupUrlClicked",((e,t)=>{t.preventDefault(),this.props.onPopupAllowed(e)})),Hf(this,"renderItem",(e=>s.createElement("a",{className:"popupblocker-blocked-page",onClick:this.onBlockedPopupUrlClicked.bind(this,e),key:e.targetUrl+e.timeStamp,title:e.targetUrl,href:e.targetUrl,__source:{fileName:Vf,lineNumber:29,columnNumber:7}},e.targetUrl))),Hf(this,"renderItems",(e=>s.createElement("div",{className:"popupblocker-blocked-pages",__source:{fileName:Vf,lineNumber:41,columnNumber:7}},e.map((e=>this.renderItem(e)))))),Hf(this,"onShouldBlockClicked",(e=>{this.props.onShouldBlockClicked(e)})),Hf(this,"renderAlwaysBlockQuery",(()=>s.createElement("section",{className:"dialog-footer",__source:{fileName:Vf,lineNumber:53,columnNumber:7}},s.createElement("label",{__source:{fileName:Vf,lineNumber:54,columnNumber:9}},s.createElement("input",{type:"radio",name:"blocked",value:"false",defaultChecked:!1!==this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!0),__source:{fileName:Vf,lineNumber:55,columnNumber:11}}),(0,ue.Z)("Block Popups")),s.createElement("label",{__source:{fileName:Vf,lineNumber:60,columnNumber:9}},s.createElement("input",{type:"radio",name:"blocked",value:"true",defaultChecked:!1===this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!1),__source:{fileName:Vf,lineNumber:61,columnNumber:11}}),(0,ue.Z)("Always Allow")))))}render(){return this.props.blockedPopups.size>0?s.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:Vf,lineNumber:73,columnNumber:9}},s.createElement("header",{className:"addressfield-popup-header",__source:{fileName:Vf,lineNumber:75,columnNumber:11}},this.props.image&&s.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:Vf,lineNumber:77,columnNumber:15}}),s.createElement("h1",{__source:{fileName:Vf,lineNumber:79,columnNumber:13}},(0,ue.Z)("Blocked Popup Pages"))),s.createElement("div",{className:"addressfield-popup-content",__source:{fileName:Vf,lineNumber:81,columnNumber:11}},this.renderItems(this.props.blockedPopups)),this.renderAlwaysBlockQuery()):null}}const zf=(0,so.Z)(Wf);var Gf="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerNotificator.jsx";function Kf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jf extends s.Component{constructor(...e){super(...e),Kf(this,"state",{isDialogOpen:!1,shouldBlockPopups:!0}),Kf(this,"onNotificatorClicked",(()=>{this.setState((e=>({isDialogOpen:!e.isDialogOpen})))})),Kf(this,"onDialogClosed",(()=>{this.setState({isDialogOpen:!1})})),Kf(this,"onShouldBlockClicked",(e=>{const t={primary_pattern:this.props.url,secondary_pattern:this.props.url,type:"popups",setting:e?"block":"allow"};b.Z.settings.setContentSetting(t),this.setState({shouldBlockPopups:e})}))}componentDidMount(){this.props.url&&h.Z.contentSettings.popups.get({primaryUrl:this.props.url},(e=>{h.Z.runtime.lastError&&h.Z.runtime.lastError.message&&console.warn("ERROR getting content settings for popups. Original message:\n"+h.Z.runtime.lastError.message)}))}render(){var e={"button-addressfield":!0,"permission-popup":!0,"is-blocking":!0===this.state.shouldBlockPopups,"is-allowing":!1===this.state.shouldBlockPopups,"is-dialog-open":this.state.isDialogOpen};return s.createElement("div",{className:"button-toolbar",__source:{fileName:Gf,lineNumber:84,columnNumber:7}},s.createElement(ko,{tooltip:(0,ue.Z)("Blocked Popup Pages"),onClick:this.onNotificatorClicked,image:cn.nY6.small,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:bn()(e),popupClassName:"addressfield-popup-container",popupWidth:300,__source:{fileName:Gf,lineNumber:85,columnNumber:9}},s.createElement(zf,{image:cn.nY6.medium,shouldBlockPopups:this.state.shouldBlockPopups,onShouldBlockClicked:this.onShouldBlockClicked,blockedPopups:this.props.blockedPopups,onPopupAllowed:this.props.onPopupAllowed,onDialogClosed:this.onDialogClosed,__source:{fileName:Gf,lineNumber:95,columnNumber:11}})))}}const Yf=jf;var $f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\QRShareButton.jsx";function Xf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qf extends s.PureComponent{constructor(...e){super(...e),Xf(this,"state",{popupVisible:!1}),Xf(this,"togglePopup",(()=>{this.setState((e=>({popupVisible:!e.popupVisible})))})),Xf(this,"hidePopup",(()=>{this.setState({popupVisible:!1})}))}render(){return s.createElement(ko,{className:"create-qr-code",image:cn.ERJ,tooltip:(0,ue.Z)("Share Page with QR Code"),onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:jo(this.props.data),size:this.props.size,__source:{fileName:$f,lineNumber:40,columnNumber:12}},s.createElement(Xo,{hidePopup:this.hidePopup,data:this.props.data,__source:{fileName:$f,lineNumber:52,columnNumber:7}}))}}const qf=Qf;function Jf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class e_ extends s.PureComponent{constructor(...e){super(...e),Jf(this,"getMenuItems",(()=>this.props.feeds.map((e=>({...z.Z.makeLabelPair(e.title+" - "+e.type),items:[{handler:$.Z.openURL.bind(this,e.href),...(0,Mn.Z)("Preview")},{handler:rt.add.bind(this,[{url:e.href,path:e.path,title:e.title,refreshInterval:5,lastChecked:0,offline:!1}]),...(0,Mn.Z)("Subscribe")}]}))).toJS())),Jf(this,"render",(()=>s.createElement(ko,{image:cn.ZU_.small,menu:this.getMenuItems,menuOrigin:"bottomLeft",tooltip:(0,ue.Z)("Page offers feeds"),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rssdetect\\RSSFeedDropdown.jsx",lineNumber:57,columnNumber:7}})))}}const t_=e_,n_=(0,sa.Record)({href:"",title:"",type:""});class s_ extends(S()){constructor(){super(m.Z)}getInitialState(){return(0,sa.Map)()}reduce(e,t){switch(t.actionType){case Fi.Z.RSS_FEEDS_FOUND:{const{tabId:n,feeds:s}=t;return e.set(n,(0,sa.List)(s).map(n_))}case"PAGE_CLOSE":{const{pages:n}=t;return n.forEach((t=>{e=e.delete(t.id)})),e}case Fi.Z.RSS_CLEAR_FEEDS:{const{tabId:n}=t;return e.delete(n)}default:return e}}}const i_=new s_;var r_=n(72182);const a_=function(e="",t="",n){if(t.startsWith("data:"))return t;const i=e.toLowerCase().split(" ");let r;try{r=new RegExp("("+i.map((e=>(0,r_.Z)(e.toLowerCase()))).filter((e=>e.trim().length>0)).join("|")+")","i")}catch(e){return t}const a=t.toLowerCase().split(r);let o=0;return s.createElement("span",{className:n},a.reduce(((e,n,i)=>{const a=o,l=n.match(r);return o+=n.length,l?e.concat(s.createElement("b",{key:i},t.substr(a,n.length))):e.concat(s.createElement("span",{key:i},t.substr(a,n.length)))}),[]))};var o_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniLinkItem.jsx";function l_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c_ extends s.PureComponent{constructor(...e){super(...e),l_(this,"domElement",s.createRef()),l_(this,"handleMouseUp",(e=>{const{type:t,id:n,index:s}=this.props;e.button===Nn.kCenter&&this.props.onMiddleClick(t,n,s)})),l_(this,"handleClick",(e=>{const{type:t,id:n,index:s}=this.props;this.props.onClick(t,n,s,e)})),l_(this,"handleDelete",(e=>{if(!this.props.onDelete)return;const{type:t,id:n,index:s}=this.props;this.props.onDelete(t,n,s),e.stopPropagation()})),l_(this,"renderFavicon",(()=>{const{faviconUrl:e,faviconType:t}=this.props;return e?s.createElement(Ls,{url:e,loadType:"img"===t?"faviconFromCache":"page",__source:{fileName:o_,lineNumber:68,columnNumber:12}}):null}))}componentDidUpdate(e){!e.isHighlighted&&this.props.isHighlighted&&this.domElement.current&&this.domElement.current.scrollIntoViewIfNeeded()}render(){const{displayText:e,index:t,isHighlighted:n,onMouseOver:i,pattern:r,nickname:a,url:o,urls:l,type:c}=this.props,u=bn()({"omni-clickable":!0,OmniLinkItem:!0,"OmniLinkItem--Highlighted":n,"OmniLinkItem--SingleValue":!this.props.details});return s.createElement("div",{"data-index":t,"data-url":a||o||"",ref:this.domElement,className:u,onClick:this.handleClick,onMouseUp:this.handleMouseUp,onMouseOver:i,__source:{fileName:o_,lineNumber:92,columnNumber:7}},this.props.faviconUrl&&s.createElement("div",{className:"OmniLinkItem-Favicon",__source:{fileName:o_,lineNumber:106,columnNumber:11}},this.renderFavicon()),s.createElement("span",{className:"OmniLinkItem-Url",__source:{fileName:o_,lineNumber:109,columnNumber:9}},r?a_(r,e,"OmniLinkItem-Url"):e),this.props.details&&s.createElement("span",{className:"OmniLinkItem-Details",__source:{fileName:o_,lineNumber:116,columnNumber:11}},r&&a_(r,this.props.details||"","OmniLinkItem-Details")||this.props.details,"OMNI_RESULT_FOLDER_NICKNAME"===c&&" – "+(0,ue.Z)("Open all bookmarks in folder ($1)",[l&&l.length||0])),this.props.onDelete&&s.createElement("span",{className:"OmniLinkItem-EraseButton",title:(0,ue.Z)("Delete history item"),onClick:this.handleDelete,dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:o_,lineNumber:129,columnNumber:11}}))}}var u_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniDropdown.jsx";function m_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d_ extends s.PureComponent{constructor(...e){super(...e),m_(this,"state",{searchEngineKeyword:"",searchEngineName:""}),m_(this,"getNumberOfItems",(()=>this.props.items.reduce(((e,{items:t})=>e+t.length),0))),m_(this,"onLinkItemClicked",((e,t,n,s)=>{const i={ctrlKey:s.ctrlKey,altKey:s.altKey,shiftKey:s.shiftKey,metaKey:s.metaKey,button:s.button},r=this.findLinkItem(e,t,n);r&&this.props.onLinkItemClicked(r,(0,ai.Z)(i))})),m_(this,"onDeleteItem",((e,t,n)=>{const s=this.findLinkItem(e,t,n);s&&!s.disableDelete&&this.props.onDeleteItem(s)})),m_(this,"onLinkItemMiddleClicked",((e,t,n)=>{const s=ai.k.openInBackgroundTab,i=this.findLinkItem(e,t,n);i&&this.props.onLinkItemClicked(i,s)})),m_(this,"findLinkItem",((e,t,n)=>{const s=this.props.items.find((n=>n.items.some((n=>n.type===e&&n.id===t))))?.items[n];if(s)return s;console.error("linkItem id doesn't match",t)})),m_(this,"renderLinkItem",((e,t)=>{const n=this._linkItemCount===this.props.selectionIndex,i=function(e){return e.displayText?e.displayText:e.url?e.url:e.title?e.title:e.text?e.text:""}(e);return this._linkItemCount++,s.createElement(c_,{key:e.type+"-"+e.id+t,id:e.id,displayText:i,index:t,isHighlighted:n,details:e.nickname||e.title||void 0,onClick:this.onLinkItemClicked,onMiddleClick:this.onLinkItemMiddleClicked,onDelete:this.onDeleteItem,pattern:e.disablePatternHighlight?void 0:this.props.pattern,hideIcons:Boolean(this.props.hideIcons),nickname:e.nickname||"",url:e.url||"",urls:e.urls||void 0,type:e.type,faviconUrl:e.faviconUrl||void 0,faviconType:e.faviconType||void 0,__source:{fileName:u_,lineNumber:169,columnNumber:7}})})),m_(this,"renderCollection",(({items:e,title:t,type:n})=>{if(!e||0===e.length)return null;const i=`${n}-${t||""}`;return s.createElement("section",{key:i,className:"OmniDropdown-Collection",__source:{fileName:u_,lineNumber:199,columnNumber:7}},t&&s.createElement("label",{className:"OmniDropdown-Label",__source:{fileName:u_,lineNumber:200,columnNumber:19}},(0,ue.Z)(t)),e.map(this.renderLinkItem))}))}static getDerivedStateFromProps(e){const t=(e.typedSearchEngine||e.defaultSearchEngine||{name:""}).name;return{searchEngineKeyword:!e.typedSearchEngine&&e.defaultSearchEngine&&e.defaultSearchEngine.keyword&&e.defaultSearchEngine.keyword+" "||"",searchEngineName:t}}componentDidUpdate(e,t){if(this.props.selectionIndex!==e.selectionIndex){const e=this.getCurrentValue(this.props.selectionIndex);this.props.onSelectedItemChanged&&e&&this.props.onSelectedItemChanged(e)}const n=this.getNumberOfItems();this.props.onNumberOfSelectableItemsChanged&&this.props.onNumberOfSelectableItemsChanged(n)}getCurrentValue(e){return this.props.items.reduce(((e,t)=>[...e,...t.items]),[])[e]}render(){const{items:e}=this.props;return this._linkItemCount=0,s.createElement("div",{className:"OmniDropdown",__source:{fileName:u_,lineNumber:214,columnNumber:7}},e.map(this.renderCollection))}}const h_=d_;var p_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenuItem.jsx";function g_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b_ extends s.PureComponent{constructor(...e){super(...e),g_(this,"_handleMouseUp",(e=>{e.button!==Nn.kLeft?e.stopPropagation():this.props.onItemActivated(this.props.item,e)})),g_(this,"_killEvent",(e=>{e.preventDefault(),e.stopPropagation()})),g_(this,"_handleMouseOver",(()=>{this.props.setSelected(this.props.index)})),g_(this,"_getDisplayName",(()=>s.createElement("span",{__source:{fileName:p_,lineNumber:53,columnNumber:13}},this.props.item.name))),g_(this,"_getDisplayShortcut",(()=>{if(this.props.item.shortcut){const e=this.props.item.noPrettifying?this.props.item.shortcut:(0,oc.$)(this.props.item.shortcut);return s.createElement("span",{className:"shortcut",__source:{fileName:p_,lineNumber:61,columnNumber:15}},e)}return null})),g_(this,"_getIcon",(()=>{if(this.props.item.iconSVG)return this.props.item.iconSVG;{let e;return e=this.props.item.icon?this.props.item.icon:this.props.item.url?"chrome://favicon/origin/"+this.props.item.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","<img src='"+e+"'>"}})),g_(this,"_renderItem",(()=>{const e=this.props.item.type||"Normal";return s.createElement("li",{className:bn()({selectedItem:this.props.isSelected}),onMouseOver:this._handleMouseOver,onMouseDown:this._killEvent,onMouseUp:this._handleMouseUp,__source:{fileName:p_,lineNumber:91,columnNumber:7}},"Normal"===e&&s.createElement("a",{tabIndex:"0",__source:{fileName:p_,lineNumber:98,columnNumber:11}},s.createElement("label",{className:"menu-icon",dangerouslySetInnerHTML:{__html:this._getIcon()},__source:{fileName:p_,lineNumber:99,columnNumber:13}}),s.createElement("label",{className:"menu-label",__source:{fileName:p_,lineNumber:101,columnNumber:13}},this._getDisplayName(),this._getDisplayShortcut())),"Checkbox"===e&&s.createElement("a",{tabIndx:"0",__source:{fileName:p_,lineNumber:109,columnNumber:11}},s.createElement("label",{__source:{fileName:p_,lineNumber:110,columnNumber:13}},s.createElement("span",{className:"menu-icon",__source:{fileName:p_,lineNumber:111,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.item.checked,readOnly:!0,__source:{fileName:p_,lineNumber:112,columnNumber:17}})),s.createElement("span",{className:"menu-label",__source:{fileName:p_,lineNumber:115,columnNumber:15}},this._getDisplayName()))),"Radio"===e&&s.createElement("a",{tabIndex:"0",__source:{fileName:p_,lineNumber:121,columnNumber:11}},s.createElement("label",{__source:{fileName:p_,lineNumber:122,columnNumber:13}},s.createElement("span",{className:"menu-icon",__source:{fileName:p_,lineNumber:123,columnNumber:15}},s.createElement("input",{className:"menu-icon",type:"radio",name:"radiomenu",checked:this.props.item.checked,readOnly:!0,__source:{fileName:p_,lineNumber:124,columnNumber:17}})),s.createElement("span",{className:"menu-label",__source:{fileName:p_,lineNumber:127,columnNumber:15}},this._getDisplayName()))))})),g_(this,"_renderDivider",(()=>s.createElement("li",{className:"divider",__source:{fileName:p_,lineNumber:136,columnNumber:12}})))}UNSAFE_componentWillReceiveProps(e){if(e.isSelected&&!this.props.isSelected){const e=pn.findDOMNode(this);e&&e instanceof HTMLElement&&e.scrollIntoViewIfNeeded(!1)}}render(){return"Separator"===this.props.item.type?this._renderDivider():this._renderItem()}}const N_=b_;var f_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenu.jsx";function __(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v_ extends s.PureComponent{constructor(...e){super(...e),__(this,"state",{selectedItemIndex:this.props.items.findIndex((e=>e.id===this.props.selectedItem?.id))}),__(this,"_takeFocus",(e=>{e&&e.stopPropagation&&e.stopPropagation();const t=pn.findDOMNode(this);if(t&&t instanceof HTMLElement){const e=t.querySelector(".menu .focusTrap");e&&e instanceof HTMLButtonElement&&e.focus()}})),__(this,"_onKeyboardFocusIn",(()=>{const e=pn.findDOMNode(this);e&&e instanceof HTMLElement&&e.addEventListener("keydown",this._handleKeyboardNavigation)})),__(this,"_onKeyboardFocusOut",(()=>{const e=pn.findDOMNode(this);e&&e instanceof HTMLElement&&e.removeEventListener("keydown",this._handleKeyboardNavigation)})),__(this,"_handleKeyboardNavigation",(e=>{switch(e.preventDefault(),e.which){case $s.Z.KEY_SPACE:case $s.Z.KEY_RETURN:const t=this.state.selectedItemIndex;t>=0&&t<=this._getMaxMenuIndex()&&this._onItemActivated(this.props.items[t],e);break;case $s.Z.KEY_ESCAPE:this.props.onClose?.();break;case $s.Z.KEY_UP:this._stepSelection(!1);break;case $s.Z.KEY_DOWN:this._stepSelection(!0);break;default:e.stopPropagation()}})),__(this,"_stepSelection",(e=>{let t=this.state.selectedItemIndex;if(0!==this.props.items.filter((e=>"Separator"!==e.type)).length){do{t+=e?1:-1,t=(t+this.props.items.length)%this.props.items.length}while("Separator"===this.props.items[t].type);this._setSelected(t)}})),__(this,"_getMaxMenuIndex",(()=>this.props.items.length-1)),__(this,"_setSelected",(e=>{"Separator"===this.props.items[e].type||e>this._getMaxMenuIndex()||this.setState({selectedItemIndex:e})})),__(this,"_onClicked",(e=>{e.preventDefault(),e.stopPropagation();const t=e.nativeEvent.target;t&&t instanceof HTMLElement&&t.focus()})),__(this,"_onItemActivated",((e,t)=>{t.stopPropagation(),this.props.onItemActivated(e)})),__(this,"handleClickOutside",(e=>{this.props.onClose?.()}))}render(){return s.createElement("nav",{className:bn()("menu",this.props.className),onMouseOver:this._takeFocus,onMouseDown:this._onClicked,onMouseUp:this._onClicked,onBlur:()=>this.props.onClose?.(),tabIndex:"-1",__source:{fileName:f_,lineNumber:136,columnNumber:7}},s.createElement("input",{type:"text",className:"focusTrap",autoFocus:!0,onFocus:this._onKeyboardFocusIn,onBlur:this._onKeyboardFocusOut,__source:{fileName:f_,lineNumber:142,columnNumber:7}}),s.createElement("ul",{__source:{fileName:f_,lineNumber:149,columnNumber:9}},this.props.items.map(((e,t)=>s.createElement(N_,{key:t,index:t,item:e,isSelected:this.state.selectedItemIndex===t,setSelected:this._setSelected,onItemActivated:this._onItemActivated,__source:{fileName:f_,lineNumber:151,columnNumber:13}})))))}}const E_=(0,so.Z)(v_);var C_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchEngineSelect.jsx";function w_({onClick:e,icon:t}){return s.createElement(ko,{onClick:e,tooltip:(0,ue.Z)("Change search engine"),imagePath:t,__source:{fileName:C_,lineNumber:25,columnNumber:10}})}function y_({onClick:e}){return s.createElement(ko,{onClick:e,tooltip:(0,ue.Z)("Change search engine"),image:cn.L$F,__source:{fileName:C_,lineNumber:33,columnNumber:10}})}class S_ extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=({id:e})=>{this.props.onItemClicked(e)},(n="onItemClicked")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement(s.Fragment,{__source:{fileName:C_,lineNumber:47,columnNumber:7}},s.createElement("div",{className:"toolbar-insideinput SearchEngineSelect-Icon",__source:{fileName:C_,lineNumber:48,columnNumber:9}},this.props.useFavicon?s.createElement(w_,{onClick:this.props.toggleOpen,icon:this.props.icon,__source:{fileName:C_,lineNumber:50,columnNumber:15}}):s.createElement(y_,{onClick:this.props.toggleOpen,__source:{fileName:C_,lineNumber:54,columnNumber:15}})),this.props.isOpen&&s.createElement(E_,{items:this.props.items,onClose:this.props.onClose,onItemActivated:this.onItemClicked,__source:{fileName:C_,lineNumber:61,columnNumber:11}}))}}const T_=S_;var k_=n(37711),I_=n(25776),A_=n(95078),Z_=n(77398);const P_={};let D_=[];const M_=[],O_=new class extends Ri.EventEmitter{emitChange(){this.emit(Fi.Z.CHANGED)}getSearchText(){const e=V.ZP.unsafeGetActivePage(),t=P_[e.get("id")];return t&&t.editText||""}getTypedSearchHistory(){return D_||[]}addChangeListener(e){this.on(Fi.Z.CHANGED,e)}removeChangeListener(e){this.removeListener(Fi.Z.CHANGED,e)}};function x_(e,t=qo.default){let n=M_;try{e&&(n=JSON.parse(e))}catch(e){console.warn("Unable to parse typed history JSON. TODO: fix!",e)}n&&t(function(e=[]){if(!Array.isArray(e))throw TypeError("typedhistory must be an array");return(0,A_.Z)(e.map((e=>"string"==typeof e?{id:e,url:e,when:Date.now()}:e&&["id","url","when"].every((t=>e.hasOwnProperty(t)))?e:null)))}(n))}function L_(e){!function(e){if("function"!=typeof e)throw TypeError("loadTypedHistory: callback required");A.ZP.get(P.kHistoryDaysToKeepVisits)>0?x_(d.Z.getSync("TYPED_SEARCH_HISTORY"),e):x_(JSON.stringify(D_),e)}((t=>{let n=function(e,t){var n=e||M_;return e&&Array.isArray(e)&&e.length>=30&&(n=(0,I_.default)(e,30)),n&&t&&(n=n.filter((({url:e})=>e!==t))),n}(t,e.query);n=[{id:e.query,url:e.query,when:Date.now()}].concat(n),A.ZP.get(P.kHistoryDaysToKeepVisits)>0&&d.Z.set({TYPED_SEARCH_HISTORY:JSON.stringify(n)}),D_=n,O_.emitChange()}))}function R_(){d.Z.remove("TYPED_SEARCH_HISTORY")}m.Z.register((e=>{switch(e.actionType){case Fi.Z.SEARCH_FIELD_SET_STATE:!function(e){const t=e.page.get("id");P_[t]=Object.assign(P_[t]||{},(0,Xs.Z)(e.state,"searchEngine")),O_.emitChange()}(e);break;case Fi.Z.SEARCH_FIELD_ADD_TYPED_HISTORY:L_(e);break;case"CHROME_TABS_REMOVED":!function(e){P_[e.tabId]=void 0}(e);break;case Fi.Z.SEARCH_FIELD_DELETE_TYPED_HISTORY:!function(e){const t=D_.filter((({url:t})=>e!==t));A.ZP.get(P.kHistoryDaysToKeepVisits)>0&&d.Z.set({TYPED_SEARCH_HISTORY:JSON.stringify(t)}),D_=t,O_.emitChange()}(e.query);break;case Fi.Z.SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:R_();break;case Fi.Z.NAVIGATION_HISTORY_ALL_DELETED:R_(),D_=[],O_.emitChange();break;case Fi.Z.SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:d.Z.set({TYPED_SEARCH_HISTORY:JSON.stringify(D_)});break;case Fi.Z.SEARCH_FIELD_INIT_TYPED_HISTORY:x_(e.typedHistory,(e=>{D_=e,O_.emitChange()}));break;case Fi.Z.BROWSING_DATA_REMOVED:!0===(0,Z_.default)(e,"dataTypes.typedHistory")&&function({since:e,dataTypes:{typedHistory:t}}){if(null==t)throw TypeError("Typed history must be true or false");const n=D_.filter((({when:t})=>e-t>0));A.ZP.get(P.kHistoryDaysToKeepVisits)>0&&d.Z.set({TYPED_SEARCH_HISTORY:JSON.stringify(n)}),D_=n,O_.emitChange()}(e)}}));const B_=O_,F_=new class extends Ri.EventEmitter{emitChange(){this.emit(Fi.Z.CHANGED)}emitChangeParam(e){this.emit(Fi.Z.CHANGED,e)}getSearchSuggestURL(e,t=""){return t.replace(/\%s/gi,encodeURIComponent(e))}addChangeListener(e){this.on(Fi.Z.CHANGED,e)}removeChangeListener(e){this.removeListener(Fi.Z.CHANGED,e)}};m.Z.register((e=>{if(e.actionType===Fi.Z.SEARCH_SUGGEST_RESULT){const t=JSON.parse(e.json)[1].filter((e=>"string"==typeof e));F_.emitChangeParam({query:e.query,suggestions:t,uid:e.uid})}}));const U_=F_;var V_=n(90458);const H_={abort:qo.default,responseText:""};let W_={...H_},z_="";function G_(e,t){if(W_&&W_.readyState===XMLHttpRequest.DONE&&200===W_.status)try{const t=W_.responseText,n={actionType:Fi.Z.SEARCH_SUGGEST_RESULT,query:z_,json:t,uid:e};m.Z.dispatch(n)}finally{W_={...H_},z_=""}}const K_=(e,t)=>{if(e.length<2)return void m.Z.dispatch({actionType:Fi.Z.SEARCH_SUGGEST_RESULT,query:"",json:'["", []]',cuid:lr()});if(V.ZP.unsafeGetActivePage().get("incognito"))return;if(!t.suggestUrl)return;const n=U_.getSearchSuggestURL(e,t.suggestUrl);W_&&(W_.abort(),z_="",W_={...H_});const s=lr()();return z_=e,W_=new XMLHttpRequest,W_.onreadystatechange=(0,V_.Z)(G_,s,n),W_.open("GET",n,!0),W_.send(),s};var j_=n(34155);function Y_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $_{constructor(e){Y_(this,"_numberOfSelectableItems",0),Y_(this,"_selectionIndex",-1),Y_(this,"setNumberOfSelectableItems",(e=>{this._numberOfSelectableItems=e})),Y_(this,"getNumberOfSelectableItems",(()=>this._numberOfSelectableItems)),Y_(this,"setSelectionIndex",(e=>{this._selectionIndex=e})),Y_(this,"getSelectionIndex",(()=>this._selectionIndex)),Y_(this,"_moveHighlight",((e,t)=>{const n=this._inputComponent.getDropdown(),s=pn.findDOMNode(n);if(!(s instanceof HTMLElement))return Promise.reject();let i=-1;const r=Array.from(s.getElementsByClassName("omni-clickable")),a=this.getSelectionIndex(),o=this.getNumberOfSelectableItems();if(null==a||-1===a||null==r[a])i=e?0:o-1;else{const n=r[a],l=0===a||parseInt(s.scrollTop)+10>n.offsetTop;switch(t){case"page":if(e)l?i=r.findIndex((e=>e.offsetTop+e.offsetHeight>s.offsetHeight)):(s.scrollTop=n.offsetTop,i=r.findIndex((e=>e.offsetTop>s.offsetHeight+s.scrollTop))),-1===i&&(i+=o);else if(l)s.scrollTop-=s.offsetHeight;else{let e=r.length-1;for(;e>0&&!(r[e].offsetTop-r[e].offsetHeight<s.scrollTop);e--);i=e}break;case"section":if(e){let e=this._getSectionIndex(!0,a+1,r);-1===e&&(e=this._getSectionIndex(!0,0,r)),-1!==e&&(i=e)}else{let e=this._getSectionIndex(!1,a-1,r);-1===e&&(e=this._getSectionIndex(!1,r.length-1,r)),-1!==e&&(i=e)}break;case"line":i=a+(e?1:-1),e?i>=o&&(i=-1):i<-1&&(i=o-1)}}return Number.isInteger(i)?(this._inputComponent.setAutocompleteHighlight(i,!0),new Promise((e=>{j_.nextTick(e)}))):Promise.reject()})),Y_(this,"_getSectionIndex",((e,t,n)=>{if(e)for(let e=t;e<n.length;e++){if("0"===n[e].dataset.index)return e}else for(let e=t;e>=0;e--){if("0"===n[e].dataset.index)return e}return-1})),Y_(this,"up",(()=>this._moveHighlight(!1,"line"))),Y_(this,"down",(()=>this._moveHighlight(!0,"line"))),Y_(this,"pageUp",(()=>this._moveHighlight(!1,"page"))),Y_(this,"pageDown",(()=>this._moveHighlight(!0,"page"))),Y_(this,"sectionUp",(()=>this._moveHighlight(!1,"section"))),Y_(this,"sectionDown",(()=>this._moveHighlight(!0,"section"))),this._inputComponent=e}}var X_=n(3650),Q_=n(40037),q_=n(34155),J_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchField.jsx";function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tv=[];const nv=(0,vb.default)(((e,t)=>{const n=K_(e,t);tv=(0,X_.Z)(tv.concat(n),10)}),500,{leading:!1}),sv=[P.kAddressBarSearchFieldWidth,P.kAddressBarSearchInNewTab,P.kAddressBarSearchTypedHistoryEnabled,P.kAddressBarSearchKeepSelected,P.kKeyboardTabToAll,P.kStartpageSpeedDialTrackerSuggestionShow];function iv({disabled:e,tabIndex:t,onMouseDown:n,onClick:i}){return s.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:J_,lineNumber:118,columnNumber:5}},s.createElement("div",{className:"button-toolbar",__source:{fileName:J_,lineNumber:119,columnNumber:7}},s.createElement("button",{disabled:e,tabIndex:t,title:(0,ue.Z)("Show search history"),onMouseDown:n,onClick:i,dangerouslySetInnerHTML:{__html:cn.V34},__source:{fileName:J_,lineNumber:120,columnNumber:9}})))}function rv({onClick:e,tabIndex:t}){return s.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:J_,lineNumber:135,columnNumber:5}},s.createElement("div",{className:"button-toolbar",__source:{fileName:J_,lineNumber:136,columnNumber:7}},s.createElement("button",{onMouseDown:e=>e.preventDefault(),tabIndex:t,title:(0,ue.Z)("verb","Search"),className:"SearchField-ExecuteSearchButton",onClick:e,dangerouslySetInnerHTML:{__html:cn.V34},__source:{fileName:J_,lineNumber:137,columnNumber:9}})))}class av extends s.PureComponent{constructor(...e){super(...e),ev(this,"_isPasting",!1),ev(this,"_nav",new $_(this)),ev(this,"_isIMEOpen",!1),ev(this,"_justClosedIME",!1),ev(this,"_isOnSpeedDial","speed_dial_view"===this.props.origin),ev(this,"_omniDropdownRef",s.createRef()),ev(this,"_suppressReplace",!1),ev(this,"state",{dropdownSelectionIndex:-1,editText:"",typedValue:"",filteredTypedHistoryStore:[],isOmniDropdownOpen:!1,searchSuggestionStore:[],showAll:!1,searchEngineSelectItems:[],typedHistoryStore:[],currentSearchEngine:void 0,selectedItem:void 0,numberOfSelectableItems:0,isSearchEngineSelectOpen:!1,firstLaunch:Dn.Z.getFirstLaunch(),previousSelectedEngine:Dn.Z.getCurrentPopupEngine()}),ev(this,"_onWebpageviewStoreChanged",(e=>{if(e.type===Fi.Z.WEBPAGEVIEW_ACTIONS)if("searchPasteAndGo"===e.action&&e.payload){const t=e.payload;!this._isOnSpeedDial&&q_.nextTick((()=>this._pasteAndGo(t)))}else"focusSearchField"===e.action&&q_.nextTick(this.focusField)})),ev(this,"_pasteAndGo",(({openOptions:e,clipboardText:t})=>{this._search({value:t,openOptions:e})})),ev(this,"_onSearchSuggestionsChanged",(({suggestions:e,query:t,uid:n})=>{const{document:s}=this.context;if(s.activeElement!==this._refSearch||!tv.includes(n))return;const i=e.map((e=>({id:e,url:e,type:"OMNI_RESULT_SUGGEST"})));this.state.editText&&t&&(this.state.editText.startsWith(t)||t.startsWith(this.state.editText))&&this.setState({searchSuggestionStore:i},(()=>this._showDropdown()))})),ev(this,"_onSearchEngineStoreChanged",(e=>{if(e.actionType===Fi.Z.SEARCH_ENGINES_SET_COLLECTION&&W.ZP.isActive(this.context.vivaldiWindowId)||this._isOnSpeedDial&&("current"===e.type||"currentPrivate"===e.type)||!this._isOnSpeedDial&&"currentSD"===e.type)return;const t=this.props.prefValues[P.kAddressBarSearchKeepSelected],n=W.ZP.isIncognito(this.context.vivaldiWindowId),s=this._isOnSpeedDial?Dn.Z.getCurrentSD(n):Dn.Z.getCurrent(n),i=Dn.Z.getDefault(n);let r=s;s&&(e.type&&!e.type.startsWith("default")||t||!this.state.firstLaunch&&"field"!==this.props.shouldRenderAs)||(r=i);const a=Dn.Z.getList().map((e=>({name:e.name,icon:e.faviconUrl,shortcut:e.keyword,noPrettifying:!0,id:e.id,url:e.url})));if(!Dn.Z.getHasCustomOrder()){[i,s].forEach((e=>{if(e){const t=a.findIndex((t=>t.id===e.id));a.unshift(a.splice(t,1)[0])}}))}Dn.Z.setPopupEngine(r),this.setState({currentSearchEngine:r,searchEngineSelectItems:a})})),ev(this,"_onSearchFieldStoreChanged",(()=>{const{document:e}=this.context,t=B_.getTypedSearchHistory().map((e=>({...e,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"}))),n={};if(n.typedHistoryStore=t,e.activeElement===this._refSearch){const e=B_.getSearchText(),s=e.trim()&&t.filter((t=>t.url.toLowerCase().startsWith(e.toLowerCase())))||[];n.editText=e,n.filteredTypedHistoryStore=s}this.setState(n)})),ev(this,"_onCompositionStart",(()=>{this._isIMEOpen=!0})),ev(this,"_onCompositionEnd",(()=>{this._isIMEOpen=!1,this._justClosedIME=!0})),ev(this,"_search",(({value:e,openOptions:t})=>{const{document:n}=this.context;nv.cancel&&nv.cancel(),this._refSearch&&n.activeElement===this._refSearch&&this._refSearch.blur(),tv=[],this.setState({editText:e}),k_.Z.setState({editText:e});let s=!t||!1!==t.inCurrent;this.props.prefValues[P.kAddressBarSearchInNewTab]&&(this._isOnSpeedDial||(s=!1));const i=e.indexOf(" "),r=e.split(" ")[0],a=Dn.Z.getByKeyword(r);if(e=a?e.substring(i,e.length):e,a){const e=W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId);this._isOnSpeedDial?ur.setDefaultForSpeedDial(a.id,e):ur.setDefaultForSearchField(a.id,e)}const o={...t,inCurrent:s,addTypedSearchHistory:!0};e.length>0&&this.props.onSearch(e,this.state.currentSearchEngine,o)})),ev(this,"onKeyDowned",(e=>{this._justClosedIME=!1;const t=e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey,n=!(0,hg.Z)(e),{isOmniDropdownOpen:s}=this.state;switch(e.key){case"ArrowUp":return void(s&&(e.preventDefault(),e.stopPropagation()));case"ArrowDown":return void(t&&this.onKeyPressed(e));case"Tab":if(!s)return;return n&&(e.preventDefault(),e.stopPropagation(),q_.nextTick(this._nav.down)),void(t&&(e.preventDefault(),e.stopPropagation(),q_.nextTick(this._nav.up)));case"Escape":return void("button"!==this.props.shouldRenderAs?(e.stopPropagation(),e.preventDefault(),this.setState((e=>({editText:e.typedValue})))):this.state.isOmniDropdownOpen&&(e.stopPropagation(),e.preventDefault(),this.setState({isOmniDropdownOpen:!1})));case"Enter":return void(n||this.onKeyPressed(e))}})),ev(this,"onExecuteSearchButtonClick",(e=>{const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},n=(0,ai.Z)(t),s=this.state.selectedItem?this.state.selectedItem.url:this.state.typedValue;this._search({value:s,openOptions:n})})),ev(this,"onKeyPressed",(e=>{const{key:t,shiftKey:n,currentTarget:s}=e;switch(t){case"Enter":{this._justClosedIME=!1,nv.cancel&&nv.cancel();const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},n=(0,ai.Z)(t);return void this._search({value:s.value,openOptions:n})}case"ArrowDown":if(!n)return;return void(this.state.typedHistoryStore.length>0&&this.props.prefValues[P.kAddressBarSearchTypedHistoryEnabled]&&this._showDropdown({showAll:!0}));case"Tab":return void this._hideDropdown()}})),ev(this,"onSearchEngineChanged",(e=>{const t=this._refSearch?this._refSearch.value:"";if(this._refSearch&&""===t&&this._refSearch.focus(),t.length>0){const n=Dn.Z.getById(e),s={addTypedSearchHistory:!0,inCurrent:this._isOnSpeedDial||!0!==this.props.prefValues[P.kAddressBarSearchInNewTab]};this.props.onSearch(t,n,s)}const n=W.ZP.isIncognito(this.context.vivaldiWindowId);this._isOnSpeedDial?ur.setDefaultForSpeedDial(e,n):ur.setDefaultForSearchField(e,n),this.setState({searchSuggestionStore:[],isSearchEngineSelectOpen:!1})})),ev(this,"onTypedSearchHistoryClicked",(e=>{k_.Z.setState({editText:e}),this.props.onSearch(e,this.state.currentSearchEngine)})),ev(this,"onTypedSearchHistoryDeleted",(e=>{const{url:t}=e;k_.Z.deleteTypedSearchHistory(t)})),ev(this,"_showDropdown",((e={})=>{if(!0===this._isPasting)return;const{document:t}=this.context;let{showAll:n}=e;"boolean"!=typeof n&&(n=!1),this.setState({showAll:n}),!0!==this.state.isOmniDropdownOpen&&(this._refSearch&&t.activeElement!==this._refSearch&&this._refSearch.focus(),this.setState({isOmniDropdownOpen:!0}))})),ev(this,"_hideDropdown",(()=>{this.state.isOmniDropdownOpen&&this.setState({selectedItem:void 0,isOmniDropdownOpen:!1,showAll:!1,searchSuggestionStore:[]})})),ev(this,"getDropdown",(()=>this._omniDropdownRef.current)),ev(this,"setAutocompleteHighlight",((e,t)=>{this.setState({dropdownSelectionIndex:e}),t&&this.setState((e=>({editText:e.selectedItem&&e.selectedItem.url||e.editText})))})),ev(this,"_esc",(()=>{this._isIMEOpen||this._justClosedIME||(!0===this.state.isOmniDropdownOpen?this._hideDropdown():this.state.editText?(this.setState({typedValue:""}),k_.Z.setState({editText:""})):bm.Z.doAction("focusWebView")),this._justClosedIME=!1})),ev(this,"_onDelete",(()=>{this.state.selectedItem&&this.onTypedSearchHistoryDeleted(this.state.selectedItem)})),ev(this,"_onKeyboardChanged",((e,t,n,s)=>{if(t&&0===n)switch(s){case $s.Z.KEY_DOWN:if(this._isIMEOpen)return;!0===this.state.isOmniDropdownOpen?this._nav.down():this.setState({isSearchEngineSelectOpen:!0});break;case $s.Z.KEY_UP:this._isIMEOpen||this._nav.up();break;case $s.Z.KEY_END:this.setAutocompleteHighlight(this.state.numberOfSelectableItems-1,!0);break;case $s.Z.KEY_ESCAPE:"button"!==this.props.shouldRenderAs&&this._esc();break;case $s.Z.KEY_HOME:this.setAutocompleteHighlight(0,!0);break;case $s.Z.KEY_PAGE_DOWN:this._nav.pageDown();break;case $s.Z.KEY_PAGE_UP:this._nav.pageUp();break;case $s.Z.KEY_DELETE:this._onDelete()}})),ev(this,"onFocus",(()=>{b.Z.tabsPrivate.onKeyboardChanged.addListener(this._onKeyboardChanged)})),ev(this,"onBlur",(e=>{const{getSelection:t}=this.context;this._hideDropdown();const n=t();n&&n.empty(),b.Z.tabsPrivate.onKeyboardChanged.removeListener(this._onKeyboardChanged)})),ev(this,"onMouseDown",(e=>{const{document:t}=this.context;this._focusedOnMouseDown=t.activeElement})),ev(this,"onMouseUp",(({currentTarget:e})=>{const{document:t}=this.context;t.activeElement===e&&(this._focusedOnMouseDown!==this._refSearch&&e.selectionStart===e.selectionEnd&&e.select(),this._focusedOnMouseDown=void 0)})),ev(this,"onDoubleClick",(e=>{e.preventDefault(),e.stopPropagation()})),ev(this,"onPaste",(e=>{this._isPasting=!0,setTimeout((()=>this._isPasting=!1),5)})),ev(this,"onChange",(({currentTarget:{value:e}})=>{k_.Z.setState({editText:e});const t=e.length>0&&e.indexOf(" ")>=1?Dn.Z.getByQuery(e):null;t&&this.setState({currentSearchEngine:t}),this.props.suggestEnabled&&e.trim()&&e.length>1?this.state.currentSearchEngine&&nv(e,this.state.currentSearchEngine):this.setState({searchSuggestionStore:[]}),this.setState({dropdownSelectionIndex:-1,typedValue:e})})),ev(this,"onDragStart",(e=>{this._suppressReplace=!0})),ev(this,"onDragOver",(e=>{e.stopPropagation()})),ev(this,"onDragEnter",(e=>{if(e.stopPropagation(),this._suppressReplace)return;e.preventDefault();const t=e.target;t instanceof HTMLInputElement&&""!==t.value&&t.classList.add("pseudo-selected")})),ev(this,"onDragLeave",(e=>{if(!this._suppressReplace){const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")}})),ev(this,"onDropped",(e=>{if(this._suppressReplace)this._suppressReplace=!1;else{const t=e.dataTransfer.getData("text/plain");e.dataTransfer.types.length>1&&""!==t&&(e.preventDefault(),this.setState({editText:t}),k_.Z.setState({editText:t}));const n=e.target;n instanceof HTMLInputElement&&n.classList.remove("pseudo-selected")}})),ev(this,"onToggleDropdownClicked",(e=>{if(e.preventDefault(),"click"!==e.type||0===e.clientX||0===e.clientY)return this.state.isOmniDropdownOpen?void this._hideDropdown():(this._onSearchFieldStoreChanged(),void this._showDropdown({showAll:!0}))})),ev(this,"onSlidebarPosition",((e,t)=>{if(this._refSearchField){const t=this._refSearchField.getBoundingClientRect();st.Z.set(P.kAddressBarSearchFieldWidth,Math.floor(t.right-e))}})),ev(this,"getWidth",(()=>(0,Q_.default)(this.props.prefValues[P.kAddressBarSearchFieldWidth],175,800))),ev(this,"focusField",(()=>{const e=Boolean("field"===this.props.shouldRenderAs&&W.ZP.getVisibleUI(this.context.vivaldiWindowId).addressBar);this._refSearch&&this._isOnSpeedDial!==e&&this._refSearch.select()})),ev(this,"setFocusInSearchField",(()=>{this._refSearch&&this._refSearch.select()})),ev(this,"onOmniDropdownItemClicked",((e,t)=>{this._search({value:e.url,openOptions:t})})),ev(this,"onContextMenu",(e=>{e.stopPropagation()})),ev(this,"onOmniDropdownSelectedItemChange",(e=>{this.setState({selectedItem:e})})),ev(this,"renderDropdown",(()=>{const e=[{items:this.state.showAll?this.state.typedHistoryStore:this.state.filteredTypedHistoryStore,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"},{items:this.props.suggestEnabled?this.state.searchSuggestionStore.map((e=>({...e,disableDelete:!0}))):[],type:"OMNI_RESULT_SUGGEST"}];return 0===e.length?null:s.createElement(h_,{hideIcons:!0,onSelectedItemChanged:this.onOmniDropdownSelectedItemChange,defaultSearchEngine:this.state.currentSearchEngine,onDeleteItem:this.onTypedSearchHistoryDeleted,onLinkItemClicked:this.onOmniDropdownItemClicked,pattern:this.state.editText,ref:this._omniDropdownRef,selectionIndex:this.state.dropdownSelectionIndex,setAutocompleteHighlight:this.setAutocompleteHighlight,items:e,__source:{fileName:J_,lineNumber:909,columnNumber:7}})})),ev(this,"toggleSearchEngineSelectOpen",(()=>{this.setState((e=>({isSearchEngineSelectOpen:!e.isSearchEngineSelectOpen})))})),ev(this,"closeSearchEngineSelect",(()=>{this.setState({isSearchEngineSelectOpen:!1})})),ev(this,"shouldShowTrackerMessage",(()=>"speed_dial_view"===this.props.origin&&this.props.prefValues[P.kStartpageSpeedDialTrackerSuggestionShow]&&this.state.currentSearchEngine&&Dn.Z.isTracker(this.state.currentSearchEngine.id)))}componentDidMount(){this._onSearchEngineStoreChanged({type:"default"}),this._onSearchFieldStoreChanged(),Dn.Z.addChangeListener(this._onSearchEngineStoreChanged),B_.addChangeListener(this._onSearchFieldStoreChanged),U_.addChangeListener(this._onSearchSuggestionsChanged),lb.Z.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){Dn.Z.removeChangeListener(this._onSearchEngineStoreChanged),B_.removeChangeListener(this._onSearchFieldStoreChanged),U_.removeChangeListener(this._onSearchSuggestionsChanged),lb.Z.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex);const n=(this.state.showAll?this.state.typedHistoryStore.length:this.state.filteredTypedHistoryStore.length)+this.state.searchSuggestionStore.length;this._nav.setNumberOfSelectableItems(n)}render(){const e=this.state.currentSearchEngine?(0,ue.Z)("Search $1",[this.state.currentSearchEngine.name]):"",t=0===this.state.typedHistoryStore.length,n=Boolean(this.state.typedValue),i=!n&&this.props.prefValues[P.kAddressBarSearchTypedHistoryEnabled];return s.createElement(s.Fragment,{__source:{fileName:J_,lineNumber:952,columnNumber:7}},s.createElement("div",{ref:e=>this._refSearchField=e,className:bn()(this.props.className,"iconmenu-container","SearchField"),onContextMenu:this.onContextMenu,style:{"--SearchFieldWidth":this.getWidth()},__source:{fileName:J_,lineNumber:953,columnNumber:7}},"button"!==this.props.shouldRenderAs&&s.createElement(PN,{className:"SearchField-SlideBar",onSlidebarPosition:this.onSlidebarPosition,offset:2,position:"left",__source:{fileName:J_,lineNumber:964,columnNumber:11}}),s.createElement(T_,{onItemClicked:this.onSearchEngineChanged,items:this.state.searchEngineSelectItems,isOpen:this.state.isSearchEngineSelectOpen,onClose:this.closeSearchEngineSelect,toggleOpen:this.toggleSearchEngineSelectOpen,icon:this.state.currentSearchEngine?this.state.currentSearchEngine.faviconUrl:"",useFavicon:this.props.useFavicon,__source:{fileName:J_,lineNumber:972,columnNumber:9}}),s.createElement("input",{ref:e=>this._refSearch=e,className:"vivaldi-searchfield searchfield-input",onBlur:this.onBlur,onChange:this.onChange,autoFocus:"button"===this.props.shouldRenderAs,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDropped,onFocus:this.onFocus,onKeyDown:this.onKeyDowned,onKeyPress:this.onKeyPressed,onCompositionStart:this._onCompositionStart,onCompositionUpdate:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onPaste:this.onPaste,placeholder:e,tabIndex:this._isOnSpeedDial?0:null,type:"search",value:this.state.editText,__source:{fileName:J_,lineNumber:985,columnNumber:9}}),this.state.isOmniDropdownOpen&&this.renderDropdown(),n&&s.createElement(rv,{onClick:this.onExecuteSearchButtonClick,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],__source:{fileName:J_,lineNumber:1015,columnNumber:11}}),i&&s.createElement(iv,{disabled:t,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onMouseDown:this.onToggleDropdownClicked,onClick:this.onToggleDropdownClicked,__source:{fileName:J_,lineNumber:1022,columnNumber:11}})),this.shouldShowTrackerMessage()&&s.createElement("div",{className:bn()(this.props.className,"iconmenu-container","SearchField","tracker-warning"),style:{"--SearchFieldWidth":this.getWidth(),zIndex:0},__source:{fileName:J_,lineNumber:1032,columnNumber:9}},(0,ue.Z)("Are you using Google to search the web? Try Startpage.\n              They are our partner and use the Google engine but\n              without collecting any data about you."),s.createElement("button",{className:"close",onClick:()=>{st.Z.set(P.kStartpageSpeedDialTrackerSuggestionShow,!1)},dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:J_,lineNumber:1046,columnNumber:11}})))}}ev(av,"contextType",Vs.Z);const ov=(0,bi.Z)(av,sv);var lv=n(86480),cv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchFieldButton.jsx";function uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class mv extends s.PureComponent{constructor(...e){super(...e),uv(this,"state",{showPopup:!1}),uv(this,"onWebpageviewStoreChanged",(e=>{"focusSearchField"===e.action&&this.toggleHiddenSearchFieldPopup()})),uv(this,"hideSearchField",(()=>{this.setState({showPopup:!1})})),uv(this,"toggleHiddenSearchFieldPopup",(()=>{this.setState((e=>({showPopup:!e.showPopup})))})),uv(this,"onSearch",((e,t,n={})=>{t&&t.url&&(QN.Z.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...n}),this.hideSearchField())})),uv(this,"onSearchAddTypedSearchHistory",(0,lv.Z)(this.onSearch,{addTypedSearchHistory:!0,windowId:this.context.vivaldiWindowId}))}componentDidMount(){lb.Z.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){lb.Z.removeChangeListener(this.onWebpageviewStoreChanged)}render(){const{prefValues:e}=this.props;return s.createElement(ko,{image:this.props.size?cn.YvR[this.props.size]:void 0,tooltip:(0,ue.Z)("Show Search Field"),onClick:this.toggleHiddenSearchFieldPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideSearchField,isPopupVisible:this.state.showPopup,popupWidth:this.props.popupWidth,hasLightArrow:!0,size:this.props.size,popupClassName:"SearchField-Popup",__source:{fileName:cv,lineNumber:92,columnNumber:7}},s.createElement(ov,{onSearch:this.onSearchAddTypedSearchHistory,useFavicon:e[P.kAddressBarSearchShowFavicon],suggestEnabled:e[P.kAddressBarSearchSuggestEnabled],shouldRenderAs:this.props.shouldRenderAs,__source:{fileName:cv,lineNumber:104,columnNumber:9}}))}}uv(mv,"contextType",Vs.Z);const dv=mv;var hv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\SiteInfoButton.jsx";function pv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gv({pageSecurity:e}){switch(e){case"web":case"warning":return s.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:hv,lineNumber:53,columnNumber:9}},s.createElement("g",{__source:{fileName:hv,lineNumber:54,columnNumber:11}},s.createElement("path",{d:"M7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8V11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11V8Z",__source:{fileName:hv,lineNumber:55,columnNumber:13}}),s.createElement("path",{d:"M8 6C8.55228 6 9 5.55228 9 5C9 4.44772 8.55228 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z",__source:{fileName:hv,lineNumber:56,columnNumber:13}}),s.createElement("path",{fillRule:"evenodd",d:"M15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z",__source:{fileName:hv,lineNumber:57,columnNumber:13}})));case"secure":case"certified":return s.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:hv,lineNumber:66,columnNumber:9}},s.createElement("path",{d:"M12.2 6.7C12.2 4 10.5 2 8 2 5.8 2 3.8 4 3.8 6.7V7H3v7h10V7h-.8v-.3zM10.7 8H5.3V6.7c0-1.7 1.4-3 2.8-3 1.7 0 2.8 1.3 2.8 3V8z",__source:{fileName:hv,lineNumber:67,columnNumber:11}}));case"insecure":return s.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:hv,lineNumber:74,columnNumber:9}},s.createElement("path",{d:"M5.4 7v-.7c0-1.4 1-2.6 2.4-2.6 1 0 1-1.7 0-1.7h-.2c-2 0-3.8 2-3.8 4.3V7H3v7h10V7H5.4z",__source:{fileName:hv,lineNumber:75,columnNumber:11}}));case"internal":return s.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:hv,lineNumber:82,columnNumber:9}},s.createElement("path",{d:"M10.4 5c-.4-.8 0-1.8 1-2 .7 0 1.5.4 1.6 1.2a1.4 1.4 0 0 1-.2 1l-4 7c-.3.5-.7.8-1.2.8-.6 0-1-.2-1.3-.7L3.8 7.8 2.2 5c-.5-.8 0-2 1-2 .7 0 1 .2 1.4.7l1 2 1 1.4a2 2 0 0 0 1.7 1.5 2.2 2.2 0 0 0 2.3-2V6c0-.3 0-.6-.2-1z",__source:{fileName:hv,lineNumber:83,columnNumber:11}}));default:return null}}class bv extends s.PureComponent{constructor(...e){super(...e),pv(this,"doActionShowPageInfo",(()=>{if(this.props.isEditingUrl)return this.props.fieldGo();Jt.Z.getActiveWebView()&&h.Z.windows.getCurrent({},(e=>{b.Z.zoom.getVivaldiUIZoom((t=>{const n=this.refs.siteInfoButton.getBoundingClientRect(),{left:s=0,top:i=0}=e,r=n.left*t+s-1,a=this.props.isInternal?60:360,{screen:o}=this.context,l=(o.availHeight-(n.bottom+i)*t>a?n.bottom+6:n.top-6)*t+i,c=Jt.Z.getActiveWebView();c&&c.showPageInfo({top:Math.round(l),left:Math.round(r)})}))}))}))}render(){const e=this.props.isEditingUrl||this.props.isInternal?"internal":"none"===(t=this.props.sslState)?"internal":"security_error"===t?"insecure":"warning"===t?"warning":"secure_no_ev"===t?"secure":"secure_with_ev"===t?"certified":"web";var t;return s.createElement("button",{ref:"siteInfoButton",className:`button-addressfield SiteInfoButton ${e}`,title:this.props.isEditingUrl?(0,ue.Z)("Go to address"):(0,ue.Z)("Site info"),onClick:this.doActionShowPageInfo,draggable:this.props.draggable,onDragStart:this.props.onDragStart,tabIndex:this.props.tabIndex,__source:{fileName:hv,lineNumber:139,columnNumber:7}},s.createElement("div",{className:"SiteInfoButton-SecurityBadge",__source:{fileName:hv,lineNumber:152,columnNumber:9}},s.createElement(gv,{pageSecurity:e,__source:{fileName:hv,lineNumber:153,columnNumber:11}})),"certified"===e&&s.createElement("span",{className:"siteinfo-text",__source:{fileName:hv,lineNumber:157,columnNumber:11}},this.props.sslIssuer),"warning"===e&&s.createElement("span",{className:"siteinfo-text",__source:{fileName:hv,lineNumber:163,columnNumber:11}},(0,ue.Z)("Not Secure")))}}pv(bv,"contextType",Vs.Z);const Nv=bv,fv="change",_v=new class extends(Bi()){emitChangeParam(e){this.emit(fv,e)}emitChange(){this.emit(fv)}addChangeListener(e){this.on(fv,e)}removeChangeListener(e){this.removeListener(fv,e)}};m.Z.register((e=>{switch(e.actionType){case Fi.Z.TAB_NEW_TAB:_v.emitChangeParam({action:"newTab",url:e.url});break;case Fi.Z.TAB_NEW_BACKGROUND_TAB:_v.emitChangeParam({action:"newBackgroundTab",url:e.url,addOpenerTabId:e.addOpenerTabId});break;case Fi.Z.TAB_CLOSE_ALL_BUT_ACTIVE_TAB:_v.emitChangeParam({action:"closeAllButActiveTab"});break;case Fi.Z.TAB_SWITCH_BACK_SETTING:_v.emitChangeParam({action:"switchTabBackBySetting",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_SWITCH_FORWARD_SETTING:_v.emitChangeParam({action:"switchTabForwardBySetting",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_SWITCH_BACK_HISTORY:_v.emitChangeParam({action:"switchTabBackByHistory",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_SWITCH_FORWARD_HISTORY:_v.emitChangeParam({action:"switchTabForwardByHistory",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_SWITCH_BACK_ORDER:_v.emitChangeParam({action:"switchTabBackByOrder",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_SWITCH_FORWARD_ORDER:_v.emitChangeParam({action:"switchTabForwardByOrder",maybeEvent:e.maybeEvent});break;case Fi.Z.TAB_UNDO_RECENTLY_CLOSED:_v.emitChangeParam({action:"reopenRecentlyClosed"});break;case Fi.Z.TAB_VIEW_PAGE_SOURCE:_v.emitChangeParam({action:"viewPageSource"});break;case Fi.Z.TAB_STACK_CREATE:_v.emitChangeParam({action:"stackCreate"});break;case Fi.Z.TAB_STACK_DISSOLVE:_v.emitChangeParam({action:"stackDissolve"});break;case Fi.Z.TAB_STACK_REMOVE:_v.emitChangeParam({action:"stackRemove"});break;case Fi.Z.TAB_STACK_UNTILE:_v.emitChangeParam({action:"stackUntile"});break;case Fi.Z.TAB_STACK_TILE_GRID:_v.emitChangeParam({action:"stackTileGrid"});break;case Fi.Z.TAB_STACK_TILE_HORIZONTAL:_v.emitChangeParam({action:"stackTileHorizontal"});break;case Fi.Z.TAB_STACK_TILE_VERTICAL:_v.emitChangeParam({action:"stackTileVertical"});break;case Fi.Z.TAB_TOGGLE_THUMBNAIL:_v.emitChangeParam({action:"tabThumbnail"});break;case Fi.Z.UNLOAD_DIALOG_CLOSED:_v.emitChangeParam({action:"unloadDialogClosed",proceed:e.proceed})}}));const vv=_v;var Ev=n(40061),Cv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\TranslatePopup.jsx";function wv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const yv=[P.kTranslateEnabled];class Sv extends s.Component{constructor(e,t){super(e),wv(this,"_getLanguages",(()=>ol.Z.getTranslationLocales().map((e=>({id:ol.Z.getTranslationCode(e.key),name:ol.Z.getFormattedName(e)}))))),wv(this,"_onTranslationStateStoreChanged",(()=>{const e=this._getLanguages();this.setState({languages:e})})),wv(this,"shouldShowAlwaysTranslateShortcut",(()=>{if(!this.state.sourceLang||this.state.settings.shouldShowNeverTranslateShortcut)return!1;const e=V.ZP.getPageById(this.props.tabId);return Boolean(e&&!e.incognito)})),wv(this,"shouldShowNeverTranslateShortcut",(()=>!(!this.state.sourceLang||this.state.settings.isLanguagePairOnAlwaysTranslateList)&&this.state.settings.shouldShowNeverTranslateShortcut)),wv(this,"isTranslationInProgress",(()=>"translating"===this.props.translateStep)),wv(this,"onCancel",(()=>{this.props.hidePopup()})),wv(this,"onAskForLanguageSupport",(()=>{!this.state.isLanguageSupported&&this.state.sourceLang&&this.ReportLanguageRequest(),this.onCancel()})),wv(this,"onTranslate",(()=>{const e=ol.Z.getTranslationCode(this.state.targetLang),t=this.state.sourceLang?ol.Z.getTranslationCode(this.state.sourceLang):"auto";console.log("Translate from '"+t+"' to '"+e+"'"),b.Z.tabsPrivate.translatePage(this.props.tabId,t,e,(e=>{})),this.setActionPerformed()})),wv(this,"onRevert",(()=>{b.Z.tabsPrivate.revertTranslatePage(this.props.tabId,(e=>{})),this.setActionPerformed()})),wv(this,"onTargetLanguageSelected",(e=>{const{value:t}=e.currentTarget;t!==this.state.targetLang&&this.setState({targetLang:t})})),wv(this,"setAlwaysTranslate",(e=>{b.Z.prefs.setLanguagePairToAlwaysTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,(t=>{t&&(this.updateLanguageTranslateSettings(),e&&!this.props.isTranslated&&this.onTranslate())})),this.setActionPerformed()})),wv(this,"setNeverTranslate",(e=>{b.Z.prefs.setLanguageToNeverTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,(e=>{e&&this.updateLanguageTranslateSettings()})),this.setActionPerformed()})),wv(this,"setNeverTranslateSite",(e=>{b.Z.prefs.setSiteToNeverTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,(t=>{t&&(this.updateLanguageTranslateSettings(),e&&this.props.isTranslated&&this.onRevert())})),this.setActionPerformed()})),wv(this,"toggleOfferToTranslate",(()=>{st.Z.set(P.kTranslateEnabled,!this.props.prefValues[P.kTranslateEnabled]),this.setActionPerformed()})),wv(this,"_onAlwaysTranslate",(e=>{const t=e.target.checked;this.setAlwaysTranslate(t),this.setActionPerformed()})),wv(this,"_onNeverTranslate",(e=>{const t=e.target.checked;this.setNeverTranslate(t),this.setActionPerformed()})),wv(this,"openTranslatePage",(()=>{$.Z.openURL("https://www.vivaldi.com/translate/")})),wv(this,"isError",(()=>this.props.error&&"no_error"!==this.props.error)),wv(this,"handleCloseClick",(e=>{this.reportDialogClosing(!0),this.onCancel()})),wv(this,"handleMenuClick",(e=>{const t=[];t.push({...(0,Mn.Z)("Always Translate $1",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang)]),type:"checkbox",handler:this.setAlwaysTranslate.bind(this,!this.state.settings.isLanguagePairOnAlwaysTranslateList),visible:!0,checked:this.state.settings.isLanguagePairOnAlwaysTranslateList}),t.push({...(0,Mn.Z)("Never Translate $1",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang)]),type:"checkbox",handler:this.setNeverTranslate.bind(this,!this.state.settings.isLanguageInNeverTranslateList),visible:!0,checked:this.state.settings.isLanguageInNeverTranslateList}),t.push({...(0,Mn.Z)("Never Translate This Site"),handler:this.setNeverTranslateSite.bind(this,!this.state.settings.isSiteOnNeverTranslateList),type:"checkbox",visible:!0,checked:this.state.settings.isSiteOnNeverTranslateList}),t.push({...(0,Mn.Z)("Offer to Translate Pages"),type:"checkbox",handler:this.toggleOfferToTranslate.bind(this),visible:!0,checked:this.props.prefValues[P.kTranslateEnabled]}),(0,Hs.Z)(this.context.vivaldiWindowId,t)(e),e.preventDefault(),e.stopPropagation()})),wv(this,"renderDialogHeader",(()=>s.createElement("div",{className:"TranslatePopup-Header",__source:{fileName:Cv,lineNumber:367,columnNumber:7}},s.createElement("h3",{__source:{fileName:Cv,lineNumber:368,columnNumber:9}},(0,ue.Z)("browser","Translate Page")),this.state.isLanguageSupported&&s.createElement(s.Fragment,null,s.createElement("button",{className:bn()({"TranslatePopup-Header-CloseButton":!0}),title:(0,ue.Z)("Close Dialog"),dangerouslySetInnerHTML:{__html:cn.vyJ},onClick:this.handleCloseClick,__source:{fileName:Cv,lineNumber:371,columnNumber:11}}))))),wv(this,"renderContent",(()=>{if(this.isTranslationInProgress())return null;if(!1===this.state.isLanguageSupported)return s.createElement("div",{className:"dialog-content",__source:{fileName:Cv,lineNumber:391,columnNumber:9}},(0,ue.Z)("Vivaldi Translate does not currently support $1 ($2).",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang),this.state.sourceLang]));if(this.state.languages&&this.state.languages.length>0&&!this.props.isTranslated){const e=this.state.languages.map((e=>e.id===this.state.targetLang?s.createElement("option",{key:e.id,value:e.id,defaultValue:!0,__source:{fileName:Cv,lineNumber:405,columnNumber:13}},e.name):e.id!==this.state.sourceLang?s.createElement("option",{key:e.id,value:e.id,__source:{fileName:Cv,lineNumber:412,columnNumber:13}},e.name):void 0));return s.createElement("div",{className:"dialog-content",__source:{fileName:Cv,lineNumber:419,columnNumber:9}},s.createElement("label",{className:"TranslatePopup-SelectLabel",key:"select",__source:{fileName:Cv,lineNumber:420,columnNumber:11}},(0,ue.Z)("To:")),s.createElement("select",{onChange:this.onTargetLanguageSelected,disabled:!1,value:this.state.targetLang,__source:{fileName:Cv,lineNumber:423,columnNumber:11}},e))}return null})),wv(this,"renderButtons",(()=>{const e=[];if(this.state.isLanguageSupported){const t=this.isTranslationInProgress();this.isError()?e.push(s.createElement(Qc,{type:"error",key:"error",__source:{fileName:Cv,lineNumber:441,columnNumber:11}},(0,ue.Z)("Error translating page."))):t&&e.push(s.createElement("label",{key:"progress",className:"TranslatePopup-Status",__source:{fileName:Cv,lineNumber:447,columnNumber:11}},(0,ue.Z)("Translating..."))),this.props.isTranslated&&!t?(e.push(s.createElement("label",{key:"status",className:"TranslatePopup-Status",__source:{fileName:Cv,lineNumber:454,columnNumber:11}},(0,ue.Z)("This page has been translated to $1 ($2).",[ol.Z.getHumanReadableLanguageFromCode(this.state.targetLang),this.state.targetLang]))),e.push(s.createElement("div",{className:"TranslatePopup-Buttons",key:"translate-buttons",__source:{fileName:Cv,lineNumber:461,columnNumber:11}},s.createElement("input",{type:"button",key:"translate-revert",className:"TranslatePopup-Buttons-Revert",onClick:this.onRevert,disabled:!1,autoFocus:!0,value:(0,ue.Z)("Revert to $1",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang)]),__source:{fileName:Cv,lineNumber:462,columnNumber:13}})))):t||(this.shouldShowAlwaysTranslateShortcut()&&e.push(s.createElement("label",{className:"TranslatePopup-Checkbox",key:"alwaysTranslate",__source:{fileName:Cv,lineNumber:476,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.settings.isLanguagePairOnAlwaysTranslateList,onChange:this._onAlwaysTranslate,__source:{fileName:Cv,lineNumber:477,columnNumber:15}}),s.createElement("span",{__source:{fileName:Cv,lineNumber:481,columnNumber:15}},(0,ue.Z)("Always translate $1",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang)])))),this.shouldShowNeverTranslateShortcut()&&e.push(s.createElement("label",{className:"TranslatePopup-Checkbox",key:"neverTranslate",__source:{fileName:Cv,lineNumber:490,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.settings.isLanguageInNeverTranslateList,onChange:this._onNeverTranslate,__source:{fileName:Cv,lineNumber:491,columnNumber:15}}),s.createElement("span",{__source:{fileName:Cv,lineNumber:495,columnNumber:15}},(0,ue.Z)("Never translate $1",[ol.Z.getHumanReadableLanguageFromCode(this.state.sourceLang)])))),e.push(s.createElement("div",{className:"TranslatePopup-Buttons",key:"translate-buttons",__source:{fileName:Cv,lineNumber:503,columnNumber:11}},s.createElement("input",{type:"button",key:"translate-button",className:"TranslatePopup-Buttons-Translate primary",onClick:this.onTranslate,disabled:!1,value:(0,ue.Z)("verb","Translate"),autoFocus:!0,__source:{fileName:Cv,lineNumber:504,columnNumber:13}}),s.createElement("button",{className:"TranslatePopup-Buttons-MenuButton",onClick:this.handleMenuClick,__source:{fileName:Cv,lineNumber:510,columnNumber:13}},s.createElement("span",{className:"TranslatePopup-Buttons-MenuButton-Span",key:"translate-menu",value:"options",dangerouslySetInnerHTML:{__html:cn.bqs.small},__source:{fileName:Cv,lineNumber:513,columnNumber:15}}),s.createElement("label",{className:"TranslatePopup-Buttons-MenuButton-Label",__source:{fileName:Cv,lineNumber:518,columnNumber:15}},(0,ue.Z)("Options"))))))}else 0;return e})),wv(this,"renderFooter",(()=>s.createElement("footer",{className:"dialog-footer",__source:{fileName:Cv,lineNumber:541,columnNumber:7}},s.createElement("div",{className:"TranslatePopup-FooterText",__source:{fileName:Cv,lineNumber:542,columnNumber:9}},(0,ue.Z)("Powered by Lingvanex, hosted by Vivaldi."),s.createElement("a",{href:"",className:"TranslatePopup-ReadMoreLink",onClick:this.openTranslatePage,title:(0,ue.Z)("Read more about Vivaldi Translate"),__source:{fileName:Cv,lineNumber:544,columnNumber:11}},(0,ue.Z)("Learn More")))))),this.state={languages:[],sourceLang:ol.Z.getTranslationCode(this.props.pageLanguage),targetLang:ol.Z.getTranslationCode(this.props.targetLang),serverLanguages:Ev.Z.getState().serverLanguages,settings:{isLanguagePairOnAlwaysTranslateList:!1,isLanguageInNeverTranslateList:!1,isSiteOnNeverTranslateList:!1,shouldShowNeverTranslateShortcut:!1,shouldShowAlwaysTranslateShortcut:!0},isLanguageSupported:!1},this.state.languages=this._getLanguages(),this.state.isLanguageSupported=this.state.serverLanguages.includes(this.state.sourceLang)}componentDidMount(){this.actionPerformed_=!1,this.updateLanguageTranslateSettings(),this._translationStateStoreToken=Ev.Z.addListener(this._onTranslationStateStoreChanged)}componentDidUpdate(e){e.translateStep!==this.props.translateStep&&"after_translate"===this.props.translateStep&&this.onCancel()}componentWillUnmount(){this._translationStateStoreToken.remove()}reportDialogClosing(e){this.state.isLanguageSupported&&!this.props.isTranslated&&!1===this.actionPerformed_&&(b.Z.prefs.setTranslationDeclined(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,(()=>{})),this.setActionPerformed())}setActionPerformed(){this.actionPerformed_=!0}updateLanguageTranslateSettings(){this.state.sourceLang&&this.state.targetLang&&b.Z.prefs.getTranslateSettings(this.props.tabId,this.state.sourceLang,this.state.targetLang,(e=>{this.setState({settings:e})}))}async ReportLanguageRequest(){try{const e="https://mimir.vivaldi.com/request-support?lang="+this.state.sourceLang;!function(e){if(!(e.status>=200&&e.status<300))throw new Error(e.statusText)}(await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"}}))}catch(e){console.log("Error contacting server: "+e)}}render(){return s.createElement(ln.Z,{dialogWidth:350,onRequestClose:this.onCancel,__source:{fileName:Cv,lineNumber:557,columnNumber:7}},s.createElement("div",{className:"TranslatePopup",__source:{fileName:Cv,lineNumber:558,columnNumber:9}},this.renderDialogHeader(),this.renderContent(),this.renderButtons(),this.renderFooter()))}}wv(Sv,"contextType",Vs.Z);const Tv=(0,bi.Z)(Sv,yv);var kv=n(95546),Iv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\TranslateButton.jsx";function Av(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Zv extends s.PureComponent{constructor(e){super(e),Av(this,"getStateFromStore",(()=>{const e=Ev.Z.getPageState(this.props.tabId);if(e){return{pageLanguage:e.pageLanguage?e.pageLanguage:"",isTranslated:Boolean(e.isTranslated),error:e.error,translateStep:e.translateStep,autoTranslate:e.autoTranslate}}return{pageLanguage:"",isTranslated:!1,error:"no_error",translateStep:"idle",autoTranslate:!1}})),Av(this,"_onTranslationStateStoreChanged",(()=>{const e=this.getStateFromStore();"translating"!==e.translateStep&&"before_translate"!==e.translateStep||this.state.popupVisible||e.autoTranslate?"idle"===e.translateStep&&this.hidePopup():this.showPopup(),this.setState(e)})),Av(this,"showPopup",(()=>{this.setState({popupVisible:!0})})),Av(this,"hidePopup",(()=>{this.setState({popupVisible:!1})})),Av(this,"togglePopup",(()=>{this.setState((e=>({popupVisible:!e.popupVisible})))}));const t=this.getStateFromStore();let n=(0,kv.Z)();n=n.substring(0,2),this.state={popupVisible:!1,pageLanguage:t.pageLanguage,isTranslated:t.isTranslated,translateStep:t.translateStep,error:"no_error",targetLang:ol.Z.getTranslationCode(n),autoTranslate:!1}}componentDidMount(){this._translationStateStoreToken=Ev.Z.addListener(this._onTranslationStateStoreChanged)}componentWillUnmount(){this._translationStateStoreToken.remove()}static getDerivedStateFromProps(e){const{tabId:t}=e,n=Ev.Z.getPageState(t);if(n){const e=n.pageLanguage?n.pageLanguage:"",t=Boolean(n.isTranslated),s={pageLanguage:e,isTranslated:t,error:n.error,translateStep:n.translateStep,autoTranslate:n.autoTranslate};return t&&(s.targetLang=n.translatedLang,n.originalLang&&(s.pageLanguage=n.originalLang)),s}return null}render(){if(!this.state.pageLanguage||this.state.targetLang===this.state.pageLanguage)return null;const e=this.state.isTranslated;return s.createElement(ko,{isPressed:e,isOn:e,image:cn.IeE,tooltip:e?(0,ue.Z)("Revert Page Translation"):(0,ue.Z)("title","Translate Page"),onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,size:this.props.size,popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:300,__source:{fileName:Iv,lineNumber:154,columnNumber:12}},s.createElement(Tv,{hidePopup:this.hidePopup,tabId:this.props.tabId,isTranslated:this.state.isTranslated,pageLanguage:this.state.pageLanguage,error:this.state.error,targetLang:this.state.targetLang,translateStep:this.state.translateStep,__source:{fileName:Iv,lineNumber:168,columnNumber:7}}))}}const Pv=Zv,Dv={onDidAbortWithError:(0,ue.Z)("Update Error"),onDidFindValidUpdate:(0,ue.Z)("Update Available"),onUpdaterDidNotFindUpdate:(0,ue.Z)("Already up to date"),onWillDownloadUpdate:(0,ue.Z)("Downloading Update"),onDidDownloadUpdate:(0,ue.Z)("Update Downloaded"),onWillInstallUpdateOnQuit:(0,ue.Z)("Update Ready"),onUpdaterDidRelaunchApplication:(0,ue.Z)("Vivaldi was Updated")},Mv={onDidAbortWithError:(0,ue.Z)("Unable to check for update."),onDidFindValidUpdate:(0,ue.Z)("Update to Vivaldi available."),onUpdaterDidNotFindUpdate:(0,ue.Z)("Vivaldi is up to date."),onWillDownloadUpdate:(0,ue.Z)("Downloading update to Vivaldi."),onDidDownloadUpdate:(0,ue.Z)("Update downloaded."),onWillInstallUpdateOnQuit:(0,ue.Z)("Restart Vivaldi to complete the update."),onUpdaterDidRelaunchApplication:(0,ue.Z)("Vivaldi was updated.")};class Ov extends(S()){getInitialState(){return{message:void 0,status:void 0,version:void 0,releaseNotesUrl:void 0}}reduce(e,t){return"VIVALDI_AUTOUPDATE_SET_STATUS"===t.actionType?(0,T.ZP)(e,(e=>{e.message=t.message,e.status=t.status,e.version=t.version,e.version=t.releaseNotesUrl})):e}}const xv=new Ov(m.Z);var Lv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UpdatePopup.jsx";class Rv extends s.Component{render(){const{message:e,status:t,version:n,releaseNotesUrl:i}=this.props.updateState;return t?s.createElement(s.Fragment,null,s.createElement("h2",{__source:{fileName:Lv,lineNumber:27,columnNumber:7}},Dv[t]),s.createElement("div",{className:"popup-scrollarea",__source:{fileName:Lv,lineNumber:30,columnNumber:7}},"onWillInstallUpdateOnQuit"===t&&n&&s.createElement(s.Fragment,null,s.createElement("p",{className:"popup-infotext",__source:{fileName:Lv,lineNumber:33,columnNumber:13}},'_("$1 is ready to be installed.", [version])'),s.createElement("br",{__source:{fileName:Lv,lineNumber:36,columnNumber:13}})),s.createElement("p",{className:"popup-infotext",__source:{fileName:Lv,lineNumber:39,columnNumber:9}},Mv[t]),e&&s.createElement(s.Fragment,null,s.createElement("br",{__source:{fileName:Lv,lineNumber:44,columnNumber:13}}),s.createElement("p",{className:"popup-infotext",__source:{fileName:Lv,lineNumber:45,columnNumber:13}},e))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:Lv,lineNumber:52,columnNumber:7}},i&&s.createElement("input",{type:"submit",className:"primary",onClick:()=>{i&&$.Z.openURL(i),this.props.hidePopup()},value:(0,ue.Z)("Show Release Notes"),__source:{fileName:Lv,lineNumber:54,columnNumber:11}}),"onWillInstallUpdateOnQuit"===t&&s.createElement("input",{type:"submit",className:"danger",onClick:()=>b.Z.autoUpdate.installUpdateAndRestart(),value:(0,ue.Z)("browser","Restart"),__source:{fileName:Lv,lineNumber:65,columnNumber:11}}))):null}}const Bv=Rv;var Fv="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UpdateButton.jsx";function Uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vv(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Wv(e,t,"get"))}function Hv(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Wv(e,t,"set"),n),n}function Wv(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var zv=new WeakMap,Gv=new WeakMap;class Kv extends s.PureComponent{constructor(){super(),zv.set(this,{writable:!0,value:void 0}),Gv.set(this,{writable:!0,value:()=>{this.setState({updateState:xv.getState()})}}),Uv(this,"togglePopup",(()=>{this.setState((e=>({popupVisible:!e.popupVisible})))})),Uv(this,"hidePopup",(()=>{this.setState({popupVisible:!1})})),this.state={popupVisible:!1,updateState:xv.getState()}}componentDidMount(){Hv(this,zv,xv.addListener(Vv(this,Gv)))}componentWillUnmount(){Vv(this,zv).remove()}render(){const{status:e}=this.state.updateState;if(!e)return null;const t=this.props.size||"large";return s.createElement(ko,{image:cn.nuh[t],title:Dv[e],onClick:this.togglePopup,popupClassName:"UpdatePopup ToolbarButtonPopup-DefaultStyles",popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,size:t,__source:{fileName:Fv,lineNumber:73,columnNumber:12}},s.createElement(Bv,{hidePopup:this.hidePopup,updateState:this.state.updateState,__source:{fileName:Fv,lineNumber:83,columnNumber:7}}))}}const jv=Kv;function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $v extends s.PureComponent{constructor(...e){super(...e),Yv(this,"state",{selectionStart:-1,selectionEnd:-1}),Yv(this,"inputField",s.createRef()),Yv(this,"focus",(()=>{this.inputField.current&&this.inputField.current.focus()})),Yv(this,"select",(()=>{this.inputField.current&&this.inputField.current.select()})),Yv(this,"blur",(()=>{this.inputField.current&&this.inputField.current.blur()})),Yv(this,"onKeyPress",(e=>{this.props.onKeyPress(e),this.props.typedValue+e.key===e.currentTarget.value&&this.props.onValueChange(e.currentTarget.value)})),Yv(this,"onChange",(({currentTarget:e})=>{this.props.onValueChange(e.value||"")}))}static getDerivedStateFromProps(e){const{typedValue:t,autocompleteValue:n}=e,{selectionStart:s,selectionEnd:i}=function(e,t){if(!e||!t)return{selectionStart:-1,selectionEnd:-1};if(!e.toLowerCase().startsWith(t.toLowerCase()))return{selectionStart:-1,selectionEnd:-1};const n=t.length,s=e.length;return n===s?{selectionStart:-1,selectionEnd:-1}:{selectionStart:n,selectionEnd:s}}(n,t);return{selectionStart:s,selectionEnd:i}}componentDidUpdate(e,t){const n=this.inputField.current;if(n){if(t.selectionStart!==this.state.selectionEnd){const e=this.state.selectionStart;if(-1===e)return;n.selectionStart!==e&&(n.selectionStart=e)}if(t.selectionEnd!==this.state.selectionEnd){const e=this.state.selectionEnd;if(-1===e)return;n.selectionEnd!==e&&(n.selectionEnd=e)}this.props.typedValue!==this.props.autocompleteValue&&(n.selectionDirection="backward")}}render(){return s.createElement("input",{ref:this.inputField,value:this.props.autocompleteValue,autoComplete:"off",spellCheck:"false",type:"text",autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onCompositionStart:this.props.onCompositionStart,onCompositionUpdate:this.props.onCompositionUpdate,onCompositionEnd:this.props.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onKeyDown:this.props.onKeyDown,onCut:this.props.onCut,onCopy:this.props.onCopy,onPaste:this.props.onPaste,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\InputElement.jsx",lineNumber:163,columnNumber:7}})}}var Xv=n(99479);function Qv(e,t){if(!e)return!0;if(e.score&&t.score&&t.score!==e.score)return t.score>e.score;return(0,As.Ph)(t.url).length<(0,As.Ph)(e.url).length}function qv(e){return/\w{1,}\.[a-z]{2}/g.test(e)}function Jv(e,t){if(!qv(e))return!1;return new RegExp((0,r_.Z)(e)+"/").test(t)}function eE(e,t){let n=t.url.indexOf("://")+1;n>0&&(n+=2);const s=function(e,t){let n=t.url.indexOf("://")+1;n>0&&(n+=2);let s=t.url.toLowerCase().indexOf(e.toLowerCase());return 0!==s&&(s=t.url.substr(n).toLowerCase().indexOf(e.toLowerCase()),s>-1&&(s+=n)),s}(e,t);return 0===s||s===n||s===n+4&&"www."===t.url.substr(n,4)}function tE({preferBookmarks:e,firstBookmarkItem:t,firstBookmarkNicknameItem:n,firstHistoryItem:s,firstTypedHistoryItem:i,firstBookmarkTitleItem:r,firstInternalUrlItem:a}){const o=(e?[n,t,r,i,s,a]:[s,i,t,a]).find(Boolean);return i&&s&&o===i&&(l=i.url,c=s.url,(0,Xv.Z)(l).startsWith((0,Xv.Z)(c)))?s:o;var l,c}function nE(e,t,n){if(0===t.length)return;const{autocompleteOnTitle:s,preferBookmarks:i}=n,{firstBookmarkIndex:r,firstBookmarkTitleIndex:a,firstHistoryIndex:o,firstTypedHistoryIndex:l,firstBookmarkNicknameIndex:c,firstInternalUrlIndex:u}=function({items:e,value:t,autocompleteOnTitle:n}){let s=-1,i=-1,r=-1,a=-1,o=-1,l=-1;for(let n=0;n<e.length;n++){const c=e[n];if("OMNI_RESULT_FOLDER_NICKNAME"!==c.type&&(c.url&&!Jv(t,c.url))){if(c.nickname&&c.nickname.toLowerCase().startsWith(t.toLowerCase()))return{firstBookmarkIndex:n,firstBookmarkTitleIndex:i,firstHistoryIndex:r,firstTypedHistoryIndex:a,firstBookmarkNicknameIndex:o,firstInternalUrlIndex:l};if(eE(t,c))switch(c.type){case"OMNI_RESULT_HISTORY_PROMOTED":case"OMNI_RESULT_HISTORY_URL":Qv(e[r],c)&&(r=n);break;case"OMNI_RESULT_BOOKMARK_PROMOTED":case"OMNI_RESULT_BOOKMARK_DESCRIPTION":case"OMNI_RESULT_BOOKMARK_NICKNAME":case"OMNI_RESULT_BOOKMARK_TITLE":case"OMNI_RESULT_BOOKMARK_TITLE_EXACT":case"OMNI_RESULT_BOOKMARK_UNKNOWN":case"OMNI_RESULT_BOOKMARK_URL":case"OMNI_RESULT_BOOKMARK_URL_HOST":Qv(e[s],c)&&(s=n);break;case"OMNI_RESULT_TYPED_HISTORY":case"OMNI_RESULT_TYPED_HISTORY_SEARCH":Qv(e[a],c)&&(a=n);break;case"OMNI_RESULT_INTERNAL":-1===l&&(l=n)}if(c.type.startsWith("OMNI_RESULT_BOOKMARK")){if(c.title.toLowerCase().startsWith(t.toLowerCase())&&!qv(t)){(-1===i||e[i].title.length<c.title.length)&&(i=n);continue}if(c.nickname&&c.nickname.toLowerCase().startsWith(t.toLowerCase())&&-1===o){o=n;continue}}}}return{firstBookmarkIndex:s,firstBookmarkTitleIndex:i,firstHistoryIndex:r,firstTypedHistoryIndex:a,firstBookmarkNicknameIndex:o,firstInternalUrlIndex:l}}({items:t,value:e,autocompleteOnTitle:s});return tE({preferBookmarks:i,firstBookmarkItem:t[r],firstBookmarkNicknameItem:t[c],firstHistoryItem:t[o],firstTypedHistoryItem:t[l],firstBookmarkTitleItem:s?t[a]:void 0,firstInternalUrlItem:t[u]})}function sE(e){switch(e){case"OMNI_RESULT_BOOKMARK_URL_HOST":return 200;case"OMNI_RESULT_BOOKMARK_PROMOTED":return 100;default:return 0}}function iE(e,t){return(t.visitCount?t.visitCount:0)+("OMNI_RESULT_HISTORY_PROMOTED"===e?200:0)-100*(((t.url||"").match(/\//g)||[]).length-3)}function rE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,lE(e,t,"set"),n),n}function oE(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,lE(e,t,"get"))}function lE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function cE(e,t){if(!e)return t;if("OMNI_RESULT_BOOKMARK_TITLE_EXACT"===e.type){return t+(e.title?e.title.substr(t.length):"")}if("OMNI_RESULT_BOOKMARK_NICKNAME"===e.type)return t+e.nickname.substring(t.length);e.url||"about:blank"!==e.title||(e.url="about:blank");const{url:n}=e,s=n.includes("://")?n.indexOf("://")+3:0,i=n.startsWith(t)?0:n.substr(s).toLowerCase().indexOf(t.toLowerCase())+s;return(n.substr(0,i)+t+n.substr(i+t.length)).substr(i)}function uE(e){return{typedValue:"",autocompleteValue:"",shouldAutocompleteValue:!0,autocompleteItem:void 0,url:e.url||"",hasFocus:!1,typedValueSetByInputEvent:!1}}var mE=new WeakMap,dE=new WeakMap,hE=new WeakMap;class pE extends s.PureComponent{constructor(...e){super(...e),mE.set(this,{writable:!0,value:!1}),dE.set(this,{writable:!0,value:!1}),hE.set(this,{writable:!0,value:""}),rE(this,"refUrlInput",s.createRef()),rE(this,"focus",(()=>{this.refUrlInput.current?.focus()})),rE(this,"blur",(()=>{this.refUrlInput.current?.blur()})),rE(this,"select",(()=>{this.refUrlInput.current?.select()})),rE(this,"state",uE(this.props)),rE(this,"_makeSubmit",(e=>{const t={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey},{typedValue:n}=this.state,s=this.state.autocompleteItem?this.state.autocompleteItem.url:this.state.autocompleteValue;this.props.onSubmit({autocompletedValue:s,typedValue:n},t)})),rE(this,"onKeyDown",(e=>{if(this.props.onKeyDown(e),"Escape"===e.key&&this.setState({shouldAutocompleteValue:!1,typedValue:"",autocompleteValue:this.props.url},(()=>{this.select()})),"Enter"===e.key&&(e.altKey||e.ctrlKey||e.metaKey))return this._makeSubmit(e),void this.setState({shouldAutocompleteValue:!1});"Backspace"===e.key&&oE(this,dE)&&aE(this,mE,!0)})),rE(this,"onKeyPress",(e=>{this.props.onKeyPress(e),"Enter"!==e.key&&13!==e.which||e.altKey||e.ctrlKey||this._makeSubmit(e)})),rE(this,"onValueChange",(e=>{const t=this.state.autocompleteValue;this.state.typedValue===e?this.setState({autocompleteValue:e,typedValue:e,autocompleteItem:void 0,shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}):this.setState((n=>({typedValue:e,typedValueSetByInputEvent:!0,shouldAutocompleteValue:!oE(this,dE)&&(e.length>=n.typedValue.length||t===oE(this,hE))}))),this.props.onValueChange(e)})),rE(this,"onSelect",(e=>{const{selectionStart:t,selectionEnd:n,value:s}=e.currentTarget;t===n&&this.setState({typedValue:s}),this.props.onSelect(e),aE(this,hE,s.substring(t,n))})),rE(this,"onFocus",(e=>{this.setState({hasFocus:!0}),this.props.onFocus(e)})),rE(this,"onBlur",(e=>{this.setState({hasFocus:!1}),this.state.autocompleteValue&&this.state.typedValue&&this.state.typedValue!==this.state.autocompleteValue&&this.props.onValueChange(this.state.autocompleteValue),this.props.onBlur(e)})),rE(this,"onCompositionStart",(()=>{aE(this,dE,!0)})),rE(this,"onCompositionUpdate",(()=>{aE(this,dE,!0)})),rE(this,"onCompositionEnd",(e=>{const t=e.currentTarget.value;this.setState((e=>{const n=!oE(this,mE)&&t.length>=e.typedValue.length;return aE(this,mE,!1),{typedValue:t,shouldAutocompleteValue:n}})),aE(this,dE,!1)})),rE(this,"onCut",(e=>{this.setState({shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}),this.props.onCut(e)})),rE(this,"onPaste",(e=>{this.setState({shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}),this.props.onPaste(e)}))}get isIMEOpen(){return oE(this,dE)}static getDerivedStateFromProps(e,t){if(e.url!==t.url)return{url:e.url,shouldAutocompleteValue:!1};if(!t.shouldAutocompleteValue||!e.value)return t.hasFocus&&!t.typedValueSetByInputEvent?{autocompleteValue:e.value,typedValueSetByInputEvent:!1}:{autocompleteItem:void 0,autocompleteValue:e.value,shouldAutocompleteValue:!1};const n={autocompleteOnTitle:e.autocompleteOnTitle},{autocompleteValue:s,autocompleteItem:i}=function(e,t,{autocompleteOnTitle:n}){if(0===e.length)return{autocompleteItem:void 0,autocompleteValue:t};const s=nE(t,e,{preferBookmarks:A.ZP.get(P.kAddressBarAutocompletePreferBookmarks),autocompleteOnTitle:n});return s?{autocompleteItem:s,autocompleteValue:cE(s,t)}:{autocompleteItem:void 0,autocompleteValue:t}}(e.autocompleteData,e.value,n);return{typedValue:e.value,autocompleteItem:i,autocompleteValue:s,typedValueSetByInputEvent:e.value===s&&t.hasFocus&&t.typedValueSetByInputEvent}}componentDidUpdate(e,t){t.autocompleteValue!==this.state.autocompleteValue&&this.props.onAutocompleteValueChange(this.state.autocompleteValue),this.props.stateResetKey!==e.stateResetKey&&this.setState(uE(this.props))}render(){return s.createElement($v,{ref:this.refUrlInput,autocompleteValue:this.state.autocompleteValue,typedValue:this.state.typedValue,autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onBlur:this.onBlur,onFocus:this.onFocus,onSelect:this.onSelect,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:this.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onCut:this.onCut,onCopy:this.props.onCopy,onPaste:this.onPaste,onKeyDown:this.onKeyDown,onValueChange:this.onValueChange,onKeyPress:this.onKeyPress,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\AutocompleteInput.jsx",lineNumber:395,columnNumber:7}})}}const gE=function(e,t){return 0===(t=t.replace(/^https?\:\/\/(www+\.)?/,"")).indexOf(e)};function bE({nickname:e,children:t,url:n,title:s,description:i},r){const a=r.join(" ");let o=[];return r[0].startsWith("data:")||(o=r.map((e=>new RegExp((0,r_.Z)(e),"i")))),function(e,t){return!(!t||!e||!t.toLowerCase().startsWith(e.toLowerCase()))}(a,e)?t?"OMNI_RESULT_FOLDER_NICKNAME":"OMNI_RESULT_BOOKMARK_NICKNAME":t||"string"!=typeof n?void 0:gE(a,n)?"OMNI_RESULT_BOOKMARK_URL_HOST":s&&s.toLowerCase().startsWith(a.toLowerCase())?"OMNI_RESULT_BOOKMARK_TITLE_EXACT":n&&o.every((e=>n.match(e)))?n.endsWith("/")?"OMNI_RESULT_BOOKMARK_PROMOTED":"OMNI_RESULT_BOOKMARK_URL":s&&o.every((e=>s.match(e)))?"OMNI_RESULT_BOOKMARK_TITLE":i&&o.every((e=>i.match(e)))?"OMNI_RESULT_BOOKMARK_DESCRIPTION":void 0}class NE{constructor(){var e,t,n;n=e=>{if(!e)return Promise.resolve([]);const t=e.startsWith("data:")?[]:e.replace(/\s+/g," ").split(" ");return 0===t.length?Promise.resolve([]):function(e){const t=[];for(const n of tn.ZP.iterateTree()){const s=bE(n,e);if(!s)continue;const{id:i,title:r,nickname:a,children:o}=n,l=sE(s);if(o){const e=o.filter((e=>tn.ZP.isBookmark(e))).map((e=>e.url));t.push({id:i,title:r,type:s,nickname:a,score:l,urls:e})}else if(tn.ZP.isBookmark(n)&&n.url){const e=Pt.jk.getDisplayUrl(n.url);t.push({id:i,title:r,type:s,nickname:a,score:l,url:e})}}return Promise.resolve(t)}(t)},(t="search")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}const fE=["http:","https:","file:","ftp:"];class _E{constructor(){var e,t,n;n=(e,t)=>{if(!e)return Promise.resolve([]);const[n,...s]=e.replace(/\s+/g," ").trim().split(" ");return new Promise((e=>{b.Z.historyPrivate.dbSearch({text:n,maxResults:1e3},(n=>{e(n.filter((e=>{const t=e.url&&0!==e.lastVisitTime&&e.url.length<2048&&fE.some((t=>(e.url||"").startsWith(t)));return function(e,t){if(0===e.length)return!0;const{title:n,url:s}=t;return n&&e.every((e=>n.toLowerCase().includes(e.toLowerCase())))||s&&e.every((e=>s.toLowerCase().includes(e.toLowerCase())))}(s,e)&&t})).map((e=>{const t=function(e,t){const n=t.map((e=>new RegExp((0,r_.Z)(e),"i"))),{url:s,title:i}=e;return s&&n.every((e=>s.toLowerCase().match(e)))?"/"===s.charAt(s.length-1)?"OMNI_RESULT_HISTORY_PROMOTED":"OMNI_RESULT_HISTORY_URL":i&&n.every((e=>i.toLowerCase().match(e)))?"OMNI_RESULT_HISTORY_TITLE":"OMNI_RESULT_HISTORY_UNKNOWN"}(e,s);return((e,t)=>{const{id:n,title:s,typedCount:i,url:r}=e,a={type:t,id:n,score:iE(t,e),title:s||"",typed:Boolean(i&&i>0),url:Pt.jk.getDisplayUrl(r||"")};return e.lastVisitTime&&(a.lastVisitTime=e.lastVisitTime),e.visitCount&&(a.visitCount=e.visitCount),a})(e,t)})).sort(((e,t)=>(t.score||0)-(e.score||0))).filter(((e,n)=>n<t.count)))}))}))},(t="search")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}const vE=class{constructor({provider:e}){this._searchProvider=e}search(e,t){const n=new Promise(((s,i)=>this._searchProvider.search(e,t).then(((...e)=>{n!==this._newestInstanceSearch&&i("A more recent search is in progress"),s(...e)}))));return this._newestInstanceSearch=n,this._newestInstanceSearch}};var EE=n(85958);class CE{constructor(){var e,t,n;n=(e,t)=>e?new Promise((n=>{const s=Dn.Z.getByQuery(e),i=s?s.historyId:-1;b.Z.historyPrivate.getTypedHistory(e,i,t.count,(e=>n((0,EE.Z)(e))))})):Promise.resolve([]),(t="search")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}}var wE=n(68337);function yE(e,t,n,s){return e.substring(0,n)+t+e.substring(s)}const SE=/^(.*?:\/\/\/*)(.*)$/,TE=/(.*?)\/*([#?].*)/;var kE="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\HostFragment.jsx";function IE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AE extends s.Component{constructor(...e){super(...e),IE(this,"refComponent",s.createRef()),IE(this,"componentWillUnmount",(()=>{this.props.onBaseDomainObscured(!1),this._intersectionObserver?.disconnect()})),IE(this,"onIntersectionChange",(e=>{const t=e<1;this.props.onBaseDomainObscured(t)}))}componentDidMount(){if(!this.refComponent.current)return;this._intersectionObserver=new IntersectionObserver((([e])=>{this.onIntersectionChange(e.intersectionRatio)}),{threshold:1}),this._intersectionObserver.observe(this.refComponent.current)}render(){const{urlFragment:e,onGoToPath:t,tld:n,basedomain:i,subdomain:r,port:a,scheme:o}=this.props,l=(o?`${o}://`:"")+(e||"")+(a?`:${a}`:"");return i?s.createElement(PE,{url:l,onGoToPath:t,__source:{fileName:kE,lineNumber:81,columnNumber:12}},s.createElement("span",{ref:this.refComponent,__source:{fileName:kE,lineNumber:82,columnNumber:7}},r&&s.createElement("span",{className:"UrlFragment--Lowlight UrlFragment-HostFragment-Subdomain",__source:{fileName:kE,lineNumber:84,columnNumber:11}},r,"."),s.createElement("span",{className:"UrlFragment--Highlight UrlFragment-HostFragment-Basedomain",__source:{fileName:kE,lineNumber:88,columnNumber:9}},i),n&&s.createElement("span",{className:"UrlFragment--Highlight UrlFragment-HostFragment-TLD",__source:{fileName:kE,lineNumber:92,columnNumber:11}},".",n),a&&s.createElement("span",{className:"UrlFragment--Lowlight UrlFragment-HostFragment-Port",__source:{fileName:kE,lineNumber:97,columnNumber:11}},":",a))):s.createElement(PE,{url:l,onGoToPath:t,__source:{fileName:kE,lineNumber:64,columnNumber:14}},s.createElement("span",{ref:this.refComponent,__source:{fileName:kE,lineNumber:65,columnNumber:9}},s.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:kE,lineNumber:66,columnNumber:11}},e),a&&s.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:kE,lineNumber:74,columnNumber:20}},":",a)))}}var ZE="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlFragments.jsx";function PE({url:e,className:t,children:n,onGoToPath:i}){return s.createElement("span",{className:bn()("UrlFragment-Link",t),onClick:()=>i(e),onMouseOver:()=>X.Z.setStatus(e),onMouseOut:()=>X.Z.clearStatus(),__source:{fileName:ZE,lineNumber:35,columnNumber:10}},n)}function DE({urlFragment:e,onGoToPath:t,host:n,scheme:i,port:r}){return e?e.split("/").slice(1).map((e=>`/${e}`)).map(((e,a,o)=>{const l=(i?`${i}://`:"")+(n||"")+(r?`:${r}`:"")+o.slice(0,a+1).join("");return s.createElement(PE,{key:l,className:"UrlFragment--Lowlight",onGoToPath:t,url:l,__source:{fileName:ZE,lineNumber:73,columnNumber:15}},e)})):null}function ME({urlFragment:e}){return s.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:ZE,lineNumber:86,columnNumber:10}},e)}function OE({urlFragment:e}){return s.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:ZE,lineNumber:91,columnNumber:10}},e,"://")}function xE({urlFragment:e}){return e?s.createElement(s.Fragment,null,s.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:ZE,lineNumber:107,columnNumber:5}},"data:"),s.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:ZE,lineNumber:110,columnNumber:5}},e.substring("data:".length,Q.RL))):null}function LE({url:e,shouldShowFullUrl:t,onGoToPath:n,isClickable:i,shouldHighlightBaseDomain:r,onBaseDomainObscured:a,urlFragments:o}){if(!e)return null;const l=(0,wE.ZP)(e);if(!l)return null;if(!["http","https","ftp","data"].includes(e.substring(0,e.indexOf(":"))))return s.createElement("div",{className:"UrlFragment-Wrapper",__source:{fileName:ZE,lineNumber:150,columnNumber:12}},s.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:ZE,lineNumber:151,columnNumber:7}},l.substring(0,Q.RL)));const{schema:c}=function(e){if(e.startsWith("data:"))return{schema:"data:",host:"",postfix:"",path:e.substring("data:".length)};let t;try{t=new URL(e)}catch(e){return{schema:"",host:"",path:"",postfix:""}}const n=e.match(SE),s=n&&n[1]||"",i=e.match(TE),r=i&&i[2]||"",a=t.hostname+(t.port?`:${t.port}`:"");let o;try{o=decodeURI(t.pathname)}catch(e){o=t.pathname}return"vivaldi://"===s?{schema:s,host:a,path:o.startsWith("//")?o.substring(2,o.length-1):o,postfix:r}:{schema:s,host:a,path:o,postfix:r}}(l);if("data:"===c)return s.createElement("div",{className:bn()("UrlFragment-Wrapper",{"UrlFragment-Wrapper--ShouldHighlight":r}),__source:{fileName:ZE,lineNumber:160,columnNumber:12}},s.createElement(xE,{urlFragment:e,__source:{fileName:ZE,lineNumber:165,columnNumber:7}}),";");const u=function(e){return(e.scheme?.length||0)+(e.username?.length||0)+(e.password?.length||0)+(e.host?.length||0)+(e.path?.length||0)+(e.ref?.length||0)+(e.query?.length||0)+(e.port?.length||0)+(e.tld?.length||0)>=Q.RL}(o);if(u)return s.createElement("div",{className:"UrlFragment-Wrapper",__source:{fileName:ZE,lineNumber:173,columnNumber:12}},s.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:ZE,lineNumber:174,columnNumber:7}},l.substring(0,Q.RL)));const{scheme:m,host:d}=o,h=function(e){return(null!==e.query?`?${e.query}`:"")+(null!==e.ref?`#${e.ref}`:"")}(o),p=o.path||!o.ref&&!o.query?o.path:"/",{subdomain:g,basedomain:b}=(0,wE.gC)(o.host,o.tld)||{subdomain:"",basedomain:""};return s.createElement("div",{className:bn()("UrlFragment-Wrapper",{"UrlFragment-Wrapper--Clickable":i,"UrlFragment-Wrapper--ShouldHighlight":r}),__source:{fileName:ZE,lineNumber:195,columnNumber:5}},t&&m&&s.createElement(OE,{urlFragment:m,__source:{fileName:ZE,lineNumber:201,columnNumber:40}}),s.createElement("span",{className:"UrlFragment-LinkWrapper",__source:{fileName:ZE,lineNumber:202,columnNumber:7}},s.createElement(AE,{urlFragment:o.host,scheme:m||"",tld:o.tld,port:o.port,basedomain:b,subdomain:g,onGoToPath:n,onBaseDomainObscured:e=>a&&a(e),__source:{fileName:ZE,lineNumber:203,columnNumber:9}}),(t||!t&&"/"!==p)&&s.createElement(DE,{urlFragment:p,onGoToPath:n,host:d,port:o.port,scheme:m||"",__source:{fileName:ZE,lineNumber:218,columnNumber:11}})),t&&h&&s.createElement(ME,{urlFragment:h,__source:{fileName:ZE,lineNumber:228,columnNumber:41}}))}var RE=n(35767),BE=n(43724),FE=n(34155),UE="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlField.jsx";function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HE(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,zE(e,t,"set"),n),n}function WE(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,zE(e,t,"get"))}function zE(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const GE=!1,KE="text/plain",jE="text/uri-list",YE=[P.kAddressBarAutocompleteSuffixExpansionValue,P.kAddressBarAutocompleteSuffixExpansionEnabled,P.kAddressBarInlineSearchEnabled,P.kAddressBarInlineSearchSuggestEnabled,P.kAddressBarInlineSearchSuggestOnNickname,P.kAddressBarOmniboxCutcopyEncoded,P.kAddressBarOmniboxEnabled,P.kAddressBarOmniboxShowBookmarks,P.kAddressBarOmniboxShowBrowserHistory,P.kAddressBarOmniboxShowTopSites,P.kAddressBarOmniboxShowTypedHistory,P.kAddressBarSelectOnClick,P.kAddressBarShowFullUrl,P.kAddressBarTypedHistoryEnabled,P.kAddressBarUrlOpenShortcut,P.kAddressBarOmniboxNumberOfBookmarkResults,P.kAddressBarOmniboxNumberOfHistoryResults,P.kAddressBarOmniboxNumberOfTypedHistoryResults,P.kAddressBarOmniboxNumberOfSearchSuggestions,P.kAddressBarStripJavascriptOnPaste,P.kAddressBarHighlightBaseDomain];let $E=[];const XE=[["vivaldi://version/",(0,ue.Z)("Vivaldi Version")],["vivaldi://help/",(0,ue.Z)("Help Pages")],["vivaldi://about/",(0,ue.Z)("About")],["vivaldi://welcome/",(0,ue.Z)("Vivaldi Welcome Tour")],["vivaldi://notes/",(0,ue.Z)("Notes")],["vivaldi://bookmarks/",(0,ue.Z)("Bookmarks")],["vivaldi://history/",(0,ue.Z)("History")],["vivaldi://settings/",(0,ue.Z)("Settings")],["vivaldi://extensions/",(0,ue.Z)("Extensions")],["vivaldi://experiments/",(0,ue.Z)("Experiments")],["vivaldi://game/",(0,ue.Z)("Vivaldia Game")]].map((([e,t],n)=>({url:e,score:n,title:t,disableDelete:!0,id:e,type:"OMNI_RESULT_INTERNAL",faviconUrl:e,faviconType:"favicon"}))),QE=XE.map((e=>({...e,url:e.url.replace(/\//g,"")})));function qE(e){return e.startsWith("vivaldi:/")?XE.filter((t=>t.url.startsWith(e))):e.startsWith("vivaldi:")?QE.filter((t=>t.url.startsWith(e))):[]}var JE=new WeakMap,eC=new WeakMap,tC=new WeakMap,nC=new WeakMap,sC=new WeakMap,iC=new WeakMap,rC=new WeakMap,aC=new WeakMap;class oC extends s.PureComponent{constructor(...e){super(...e),JE.set(this,{writable:!0,value:!1}),eC.set(this,{writable:!0,value:!1}),tC.set(this,{writable:!0,value:!1}),nC.set(this,{writable:!0,value:!1}),sC.set(this,{writable:!0,value:!1}),iC.set(this,{writable:!0,value:""}),rC.set(this,{writable:!0,value:!1}),aC.set(this,{writable:!0,value:0}),VE(this,"_nav",new $_(this)),VE(this,"_omniDropdownElement",s.createRef()),VE(this,"_urlInput",s.createRef()),VE(this,"bookmarkSearch",new NE),VE(this,"historySearch",new vE({provider:new _E})),VE(this,"typedHistorySearch",new CE),VE(this,"state",{typedUrl:"",isOmniDropdownOpen:!1,bookmarkResults:[],historyResults:[],typedHistoryResults:[],nicknameResults:[],suggestResults:[],dropdownSelectionIndex:-1,selectedItem:void 0,autocompletedItem:void 0,value:"",isMetaKeyPressed:!1,autocompleteData:[]}),VE(this,"setUrlfieldState",(e=>{QN.Z.setUrlfieldState(this.props.pageId,e)})),VE(this,"globalKeydownListener",((e,t,n,s)=>{s===$s.Z.KEY_CONTROL&&this.setState({isMetaKeyPressed:t})})),VE(this,"_onWindowStoreChanged",(()=>{this.setState({isMetaKeyPressed:!1})})),VE(this,"_isSuggestEnabled",(()=>{const{prefValues:e}=this.props,t=Boolean(this.props.typedSearchEngine);return!!e[P.kAddressBarInlineSearchSuggestEnabled]&&e[P.kAddressBarOmniboxEnabled]&&(!e[P.kAddressBarInlineSearchSuggestOnNickname]||t)})),VE(this,"_onSearchSuggestionsChanged",(({suggestions:e})=>{this.searchDoneSuggest(e)})),VE(this,"_onUrlbarStoreChanged",(e=>{"URLFIELD_TYPED_HISTORY_UPDATE"===e&&this.state.isOmniDropdownOpen&&this.typedHistorySearch.search(this.state.typedUrl,{count:A.ZP.get(P.kAddressBarOmniboxNumberOfTypedHistoryResults)}).then(this.searchDoneTypedHistory)})),VE(this,"getTypedURL",(()=>this.state.typedUrl)),VE(this,"_getInputWasIncrementedOrDecremented",((e,t)=>{let n,s;return t?(n=e.startsWith(t)||!(this.props.editUrl||"").startsWith(e),s=(t||"").startsWith(e)&&e.length<t.length):(n=e.startsWith(this.props.editUrl||"")||null==this.props.editUrl||null==this.props.displayUrl,s=(this.props.displayUrl||"").startsWith(e)),s&&n&&(n=!1),{inputWasIncremented:n,inputWasDecremented:s}})),VE(this,"searchDoneBookmarks",(e=>{const t=(0,I_.default)(e.filter((e=>e.type.startsWith("OMNI_RESULT_BOOKMARK")&&!e.type.includes("OMNI_RESULT_BOOKMARK_NICKNAME"))),A.ZP.get(P.kAddressBarOmniboxNumberOfBookmarkResults)),n=(0,I_.default)(e.filter((e=>e.type.startsWith("OMNI_RESULT_BOOKMARK_NICKNAME")||e.type.startsWith("OMNI_RESULT_FOLDER_NICKNAME"))),A.ZP.get(P.kAddressBarOmniboxNumberOfBookmarkResults));this.setState({nicknameResults:n,bookmarkResults:t})})),VE(this,"searchDoneHistory",(e=>{WE(this,JE)&&this.setState({historyResults:e})})),VE(this,"searchDoneTypedHistory",(e=>{if(!WE(this,JE))return;const t=this.props.prefValues[P.kAddressBarTypedHistoryEnabled]?e:[];this.setState({typedHistoryResults:t})})),VE(this,"_maybePrefixWithKeyword",(e=>this.props.typedSearchEngine&&this.props.typedSearchEngine.keyword&&!e.startsWith(this.props.typedSearchEngine.keyword+" ")?this.props.typedSearchEngine.keyword+" "+e:e)),VE(this,"searchDoneSuggest",(e=>{const t=A.ZP.get(P.kAddressBarOmniboxNumberOfSearchSuggestions),n=(0,I_.default)(e,t).map((e=>{const t=this._maybePrefixWithKeyword(e),n=this.props.typedSearchEngine||this.props.defaultSearchEngine;return{id:e,type:"OMNI_RESULT_SUGGEST",disableDelete:!0,url:t,favicon:s.createElement("img",{src:n&&n.faviconUrl,__source:{fileName:UE,lineNumber:539,columnNumber:26}})}}));this.setState({suggestResults:n})})),VE(this,"_throttledSearchSuggest",(0,vb.default)(((e,t)=>{const n=K_(e,t);$E=(0,X_.Z)($E.concat(n),10)}),500,{leading:!1})),VE(this,"onClick",(async e=>{if(!this.props.prefValues[P.kAddressBarSelectOnClick])return;const{button:t,currentTarget:n}=e,{selectionStart:s,selectionEnd:i,value:r}=n;if(0===t&&Date.now()-WE(this,aC)<350)return;HE(this,aC,Date.now());const a=0===s&&i===r.length;if(s===i||a){if(this.isUrlInputFocusedOnMouseDown())return void this.handleInputSelect(n);0===t&&await new Promise((e=>FE.nextTick(e))),n.select(),this._focusedOnMouseDown=null}})),VE(this,"onMouseDown",(()=>{this._focusedOnMouseDown=document.activeElement})),VE(this,"onValueChange",(e=>{this.setUrlfieldState({editUrl:e}),this.setState({typedUrl:e,selectedItem:void 0},(()=>{e?this.performSearch(e):this.hideDropdown()}))})),VE(this,"onAutocompleteValueChange",(e=>{HE(this,iC,e),this.props.onChange&&this.props.onChange(e),FE.nextTick((()=>{this.props.editUrl&&this.setUrlfieldState({autocompleteValue:e})}))})),VE(this,"handleInputSelect",(e=>{WE(this,tC)?HE(this,tC,!1):""!==e.value.trim()&&"none"===e.selectionDirection&&(e.selectionDirection="forward")})),VE(this,"onSelected",(e=>{const{currentTarget:t,nativeEvent:n}=e;"selectionchange"===n.type&&""===document.getSelection()?.toString()&&t.value!==this.props.displayUrl&&this.setUrlfieldState({editUrl:t.value}),"mouseup"!==n.type&&this.handleInputSelect(t)})),VE(this,"_handleUndo",(e=>{const t=e.currentTarget,{value:n}=this.state;if(this.state.value.length<t.value.length){e.preventDefault();const t=e.currentTarget.selectionStart-1;t>0?this.setUrlfieldState({editUrl:n.substring(0,t)}):(this.setUrlfieldState({editUrl:""}),this.hideDropdown())}""===n&&(e.preventDefault(),this.revertUrl())})),VE(this,"_cleanupState",(()=>{HE(this,sC,!1)})),VE(this,"_constructSearchSuggestion",(()=>{const{typedSearchEngine:e,defaultSearchEngine:t}=this.props,n=e||t;if(!n)return;if(!(this._isSuggestEnabled()&&(e&&e.suggestUrl||!e&&t&&t.suggestUrl)))return;const s=e&&function(e,t){return t&&e.startsWith(t.keyword+" ")?e.substr(t.keyword.length+1):e}(this.state.typedUrl,this.props.typedSearchEngine)||this.state.typedUrl;return s.trim()?this._throttledSearchSuggest(s.trim(),n):void 0})),VE(this,"_updateAutocompleteItem",(e=>{WE(this,JE)&&this.setState({autocompleteData:e})})),VE(this,"_throttledSearch",(0,vb.default)((async(e,t)=>{if(!WE(this,JE)||this.props.pageId!==e||WE(this,eC))return;this._cleanupState(),this._constructSearchSuggestion();const n=this.historySearch.search(t,{count:A.ZP.get(P.kAddressBarOmniboxNumberOfHistoryResults)}).catch((()=>[]));n.then(this.searchDoneHistory);const s=this.typedHistorySearch.search(t,{count:A.ZP.get(P.kAddressBarOmniboxNumberOfTypedHistoryResults)});s.then(this.searchDoneTypedHistory);const i=this.bookmarkSearch.search(t);if(i.then(this.searchDoneBookmarks),this.updateDropdown(),!this.props.autocompletionEnabled)return void await Promise.all([n,s,i]);if(WE(this,rC))return this.setState({autocompleteData:[]}),HE(this,rC,!1),void await Promise.all([i,n,s]);const r=await i,a=A.ZP.get(P.kAddressBarAutocompletePreferBookmarks),o=qE(t);a&&0!==r.length&&this._updateAutocompleteItem([...r,...o]);const[l,c]=await Promise.all([n,s]);this._updateAutocompleteItem([...r,...l,...c,...o])}),200)),VE(this,"performSearch",(e=>{if(""===e.trim())return;const{inputWasIncremented:t,inputWasDecremented:n}=this._getInputWasIncrementedOrDecremented(e,this.state.typedUrl);(n||!t&&!n)&&this.setState({autocompletedItem:void 0}),HE(this,eC,!1),this._throttledSearch(this.props.pageId,e)})),VE(this,"revertUrl",(e=>{WE(this,JE)&&(this.setUrlfieldState({editUrl:e,autocompleteValue:void 0}),this.setState({typedUrl:"",value:""}))})),VE(this,"_openOmniDropDown",(()=>{this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen||!this.props.prefValues[P.kAddressBarTypedHistoryEnabled]||QN.Z.showTypedHistory()})),VE(this,"_onEscPressed",(()=>{this._urlInput.current?.isIMEOpen||(this.hideDropdown(),"string"==typeof this.props.editUrl?(this.revertUrl(),this.setState({autocompleteData:[]}),this.select()):(this.blur(),o.Z.executeActions("COMMAND_FOCUS_WEBVIEW")))})),VE(this,"hideDropdown",(()=>{this.state.isOmniDropdownOpen&&this.setState((e=>({isOmniDropdownOpen:!1,dropdownSelectionIndex:-1,selectedItem:void 0}))),this.props.isTypedHistoryOpen&&this.setState((e=>(FE.nextTick((()=>{QN.Z.hideTypedHistory()})),{dropdownSelectionIndex:-1,selectedItem:void 0})))})),VE(this,"getDropdown",(()=>this._omniDropdownElement.current&&this._omniDropdownElement.current)),VE(this,"onPaste",(e=>{const{clipboardData:t}=e;if(t.types[0]!==KE)return;const n=t.getData(KE);n.trim()||e.preventDefault();const s=/^(\s*javascript:)+/i,i=e.currentTarget.selectionStart;if(A.ZP.get(P.kAddressBarStripJavascriptOnPaste)){if(s.test(n)){e.preventDefault();const t=n.replace(/javascript:/gi,""),s=yE(this.state.typedUrl||"",t,i,e.currentTarget.selectionEnd);return void this.onValueChange(s)}if(s.test(this.state.typedUrl+n)){e.preventDefault();const t=yE("",(this.state.typedUrl+n).replace(/javascript:/gi,""),i,e.currentTarget.selectionEnd);return void this.onValueChange(t)}}HE(this,rC,!0)})),VE(this,"onClipboardEvent",(e=>{const{clipboardData:t,type:n,currentTarget:s}=e;if(!(s instanceof HTMLInputElement&&t))return;if(0!==s.selectionStart||s.selectionEnd!==s.value.length)return;let i=s.value;s.selectionEnd&&s.selectionEnd!==s.value.length&&(i=s.value.substring(0,s.selectionEnd));const r=this.props.editUrl===i;if(this.props.prefValues[P.kAddressBarOmniboxCutcopyEncoded]&&!r&&(i=encodeURI(i).replace(/%25/g,"%")),i.length>=Q.RL&&i.endsWith("...")&&void 0!==this.props.pageUrl&&this.props.pageUrl.startsWith(i.substring(0,Q.RL))&&(i=this.props.pageUrl),(0,As.Zj)(i)&&i.match(/[\.\/]/)&&this.state.value===this.props.displayUrl){const e=Is.parse(Pt.jk.getDisplayUrl(this.props.pageUrl||""));e&&e.protocol&&(i=e.protocol+(e.slashes?"//":"")+i)}if(t.setData("text",i),"cut"===n){const e=s.value.substr(s.selectionEnd);this.setUrlfieldState({editUrl:e}),s.setSelectionRange(0,0),this.setState({selectedItem:void 0,typedUrl:e})}e.preventDefault()})),VE(this,"_saveStateOnKeyEvent",(({currentTarget:e})=>{const t=e.value?e.value:"";e.selectionStart===e.selectionEnd&&e.selectionStart===t.length&&this.setState({typedUrl:t})})),VE(this,"_shortcutListener",((e,t,n,s)=>{if(t)switch(s){case $s.Z.KEY_ESCAPE:this._onEscPressed();break;case $s.Z.KEY_BACK_SPACE:case $s.Z.KEY_DELETE:1===n&&this.state.selectedItem&&this.onOmniDropdownItemDelete(this.state.selectedItem)}})),VE(this,"_setUpComponentEventListeners",(()=>{b.Z.tabsPrivate.onKeyboardChanged.addListener(this._shortcutListener)})),VE(this,"_tearDownComponentEventListeners",(()=>{b.Z.tabsPrivate.onKeyboardChanged.removeListener(this._shortcutListener)})),VE(this,"onFocus",(e=>{HE(this,nC,!0),this.props.onFocus&&this.props.onFocus(e),this.props.showDropdown&&this._setUpComponentEventListeners()})),VE(this,"onBlur",(e=>{const{getSelection:t}=this.context;HE(this,nC,!1);const n=t();if(n&&n.focusNode instanceof Element&&"UrlField"===n.focusNode.className&&n.removeAllRanges(),this.props.onBlur&&this.props.onBlur(),this.props.showDropdown&&this._tearDownComponentEventListeners(),this.state.selectedItem&&this.state.selectedItem.url){const e=this.state.selectedItem.url;this.setUrlfieldState({editUrl:e})}this.hideDropdown(),FE.nextTick((()=>{document.activeElement?.classList.contains("uifocusstop")||se.Z.setPaneFocus(!1)}))})),VE(this,"_handleSelectedItemChanged",(()=>{if(!this.props.onChange)return;const e=this.state.selectedItem&&this.state.selectedItem.url?this.state.selectedItem.url:"";this.props.onChange(e)})),VE(this,"onKeyDown",(e=>{if((this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen)&&(!this._urlInput.current||!this._urlInput.current.isIMEOpen)){const t=e.ctrlKey,n=e.altKey,s=e.shiftKey,i=GE,r=!t&&n&&!s&&!i,a=!t&&!n&&s&&!i,o=!(t||n||s||i);switch(e.key){case"Escape":e.preventDefault(),e.stopPropagation();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),r?this._nav.sectionUp().then(this._handleSelectedItemChanged):this._nav.up().then(this._handleSelectedItemChanged);break;case"Tab":o?(e.preventDefault(),e.stopPropagation(),this._nav.down().then(this._handleSelectedItemChanged)):a&&(e.preventDefault(),e.stopPropagation(),this._nav.up().then(this._handleSelectedItemChanged));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),r?this._nav.sectionDown().then(this._handleSelectedItemChanged):this._nav.down().then(this._handleSelectedItemChanged);break;case"PageUp":this._nav.pageUp().then(this._handleSelectedItemChanged);break;case"PageDown":this._nav.pageDown().then(this._handleSelectedItemChanged)}}const t="z"===e.key&&!e.shiftKey&&e.ctrlKey;if((0,hg.Z)(e)||"ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&"End"!==e.key&&"Home"!==e.key)if(t)this._handleUndo(e);else if("ArrowDown"!==e.key)if("ArrowUp"!==e.key);else{0===e.currentTarget.selectionStart&&(e.preventDefault(),this._openOmniDropDown())}else this._openOmniDropDown();else this._saveStateOnKeyEvent(e)})),VE(this,"_urlFieldGo",(async(e,t)=>{this.props.onSubmit&&(this.blur(),this.revertUrl(e),this.setState({autocompleteData:[]}),this.hideDropdown(),await(this.props.onSubmit?.({url:e,...t?{options:t}:null})),HE(this,eC,!0))})),VE(this,"onKeyPress",(e=>{this.props.onKeyPress&&this.props.onKeyPress(e)})),VE(this,"onDragStart",(e=>{HE(this,sC,!0);e.currentTarget.value===window.getSelection().toString()&&this.props.onUrlDrag&&this.props.onUrlDrag(e)})),VE(this,"onDragEnd",(()=>{HE(this,sC,!1)})),VE(this,"onDragEnter",(e=>{if(e.stopPropagation(),!WE(this,sC)&&(e.preventDefault(),this.isDropAllowed(e))){const t=e.target;t instanceof HTMLInputElement&&t.classList.add("pseudo-selected")}})),VE(this,"onDragOver",(e=>{this.isDropAllowed(e)&&e.preventDefault()})),VE(this,"onDragLeave",(e=>{if(WE(this,sC))return;const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")})),VE(this,"onDrop",(e=>{const t=e.target;if(t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected"),"function"==typeof this.props.onDrop)WE(this,sC)||(this.props.onDrop(e),e.stopPropagation(),e.preventDefault());else if(this.props.handleDrop){e.stopPropagation(),e.preventDefault();let t="";const n=e.dataTransfer?e.dataTransfer.getData(jE):"";if(n.length>0){const e=n.split("\n");e.length>0&&(t=e[0])}else t=e.dataTransfer?e.dataTransfer.getData(KE):"";this.setUrlfieldState({editUrl:t}),this.focus()}})),VE(this,"isDropAllowed",(e=>{if(!e||!e.dataTransfer)return!1;const t=[en.yR,jE,KE],n=e.dataTransfer;return!(1===n.types.length&&n.types.includes(KE)&&""===n.getData(KE))&&n.types.some((e=>t.includes(e)))})),VE(this,"setDropdownSelectionIndex",(e=>{this.setState({dropdownSelectionIndex:e,autocompleteData:[]})})),VE(this,"setAutocompleteHighlight",this.setDropdownSelectionIndex),VE(this,"onOmniDropdownItemClicked",((e,t)=>{this.revertUrl(),this.blur(),QN.Z.setUrlfieldState(this.props.pageId,{editUrl:void 0}),Array.isArray(e.urls)?QN.Z.go(e.urls,{...t,inCurrent:!1}):e.url&&("OMNI_TYPE_SEARCH"===e.type?QN.Z.goSearchURL(e.url,{...t,incognito:t.incognito||W.ZP.isGuestSession(this.context.vivaldiWindowId)}):QN.Z.go([e.url],{...t,enableSearch:!0})),this.hideDropdown()})),VE(this,"_deleteBookmarkItem",(e=>{const{id:t}=e;i.Z.remove([t]),this.setState((e=>({bookmarkResults:e.bookmarkResults.filter((e=>e.id!==t)),selectedItem:void 0,dropdownSelectionIndex:-1})))})),VE(this,"_deleteHistoryItem",(e=>{QN.Z.deleteHistory(e.url),this.setState((t=>({historyResults:t.historyResults.filter((t=>t.url!==e.url)),typedHistoryResults:t.typedHistoryResults.filter((t=>t.url!==e.url)),selectedItem:void 0,dropdownSelectionIndex:-1})))})),VE(this,"onOmniDropdownItemDelete",(e=>{if(function(e){return Boolean(e.type)&&e.type.startsWith("OMNI_RESULT_BOOKMARK")}(e)){const t=e;return void this._deleteBookmarkItem(t)}const t=e;this._deleteHistoryItem(t)})),VE(this,"isUrlInputFocusedOnMouseDown",(()=>{if(!this._urlInput.current)return!1;return pn.findDOMNode(this._urlInput.current)===this._focusedOnMouseDown})),VE(this,"getSearchEngine",(()=>{if(!this.props.prefValues[P.kAddressBarInlineSearchEnabled]&&!this.props.typedSearchEngine)return;const e=this.props.typedSearchEngine||this.props.defaultSearchEngine,t="OMNI_TYPE_SEARCH";if(!e)return;const n=this.state.typedUrl;return{title:(0,ue.Z)("Search $1",[e.name]),type:t,items:[{id:e.id,type:t,displayText:this.props.typedSearchEngine?n.substring(e.keyword.length+1):n,text:n,url:n,disableDelete:!0,disablePatternHighlight:!0,faviconUrl:e.faviconUrl,faviconType:"img"}]}})),VE(this,"_getFormattedOmniDropdownItems",(()=>{const e=this.getSearchEngine(),t=this.props.topSites?(0,I_.default)(this.props.topSites.filter((e=>e.title.includes(this.state.typedUrl)||e.url.includes(this.state.typedUrl))).map((e=>({...e,id:e.url,type:"OMNI_RESULT_TOPSITE"}))),5):[];return[{type:"OMNI_TYPED_SUGGESTION",items:qE(this.state.typedUrl)},...e?[e]:[],{title:(0,ue.Z)("Nickname"),type:"OMNI_RESULT_BOOKMARK_NICKNAME",items:this.state.nicknameResults.map((e=>({...e,disableDelete:!0,faviconUrl:e.url?e.url:"/resources/folder@2x.png",faviconType:e.url?"favicon":"img"})))},{title:(0,ue.Z)("Frequently Visited Pages"),type:"OMNI_RESULT_TOPSITE",items:this.props.prefValues[P.kAddressBarOmniboxShowTopSites]?t.map((e=>({...e,faviconUrl:e.url,faviconType:"favicon"}))):[]},{title:(0,ue.Z)("Typed History"),type:"OMNI_RESULT_TYPED_HISTORY",items:this.props.prefValues[P.kAddressBarOmniboxShowTypedHistory]&&this.props.prefValues[P.kAddressBarTypedHistoryEnabled]?this.state.typedHistoryResults.map((e=>({...e,faviconUrl:e.url,faviconType:"favicon"}))):[]},{title:(0,ue.Z)("Suggestions"),type:"OMNI_RESULT_SUGGEST",items:this.state.suggestResults},{title:(0,ue.Z)("Bookmarks"),type:"OMNI_RESULT_BOOKMARK_UNKNOWN",items:this.props.prefValues[P.kAddressBarOmniboxShowBookmarks]?this.state.bookmarkResults.map((e=>({...e,disableDelete:!0,faviconUrl:e.url,faviconType:"favicon"}))):[]},{title:(0,ue.Z)("Browser History"),type:"OMNI_RESULT_HISTORY_UNKNOWN",items:this.props.prefValues[P.kAddressBarOmniboxShowBrowserHistory]?this.state.historyResults.map((e=>({...e,faviconUrl:e.url,faviconType:"favicon"}))):[]}]})),VE(this,"_getFormattedTypedHistoryItems",(()=>{const e=this.props.typedHistory?this.props.typedHistory.map((({url:e,text:t})=>({displayText:t||e,url:e,faviconUrl:e,faviconType:"favicon"}))):[];return[{type:"OMNI_RESULT_TYPED_HISTORY",title:(0,ue.Z)("Typed History"),items:e}]})),VE(this,"onTypedHistoryItemDelete",(e=>{QN.Z.deleteHistory(e.url)})),VE(this,"handleSelectedItemChange",(e=>{this.setState({selectedItem:e})})),VE(this,"renderDropdown",(({typedHistoryItems:e,omniDropdownItems:t})=>this.props.isTypedHistoryOpen?s.createElement(h_,{ref:this._omniDropdownElement,onSelectedItemChanged:this.handleSelectedItemChange,onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:e,selectionIndex:this.state.dropdownSelectionIndex,onDeleteItem:this.onTypedHistoryItemDelete,__source:{fileName:UE,lineNumber:1634,columnNumber:9}}):this.props.prefValues[P.kAddressBarOmniboxEnabled]&&this.state.isOmniDropdownOpen?s.createElement(h_,{ref:this._omniDropdownElement,onSelectedItemChanged:e=>this.setState({selectedItem:e}),onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:t,selectionIndex:this.state.dropdownSelectionIndex,typedSearchEngine:this.props.typedSearchEngine,defaultSearchEngine:this.props.defaultSearchEngine,onDeleteItem:this.onOmniDropdownItemDelete,pattern:this.state.typedUrl,setAutocompleteHighlight:this.setDropdownSelectionIndex,__source:{fileName:UE,lineNumber:1653,columnNumber:7}}):null)),VE(this,"handleSubmit",(async({autocompletedValue:e,typedValue:t},n)=>{if(n.ctrlKey&&this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionEnabled]&&this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionValue])return void await this._urlFieldGo((0,As.Ei)(t,this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionValue]));const s=e,i=n.shiftKey&&"shift"===this.props.prefValues[P.kAddressBarUrlOpenShortcut]||n.altKey&&"alt"===this.props.prefValues[P.kAddressBarUrlOpenShortcut]||GE,r=i&&n.ctrlKey,a={...(0,ai.Z)({ctrlKey:n.ctrlKey,altKey:n.altKey,shiftKey:n.shiftKey,metaKey:n.metaKey}),inCurrent:!i,inBackground:r,transition:ml.Z.TYPED,incognito:W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)},{selectedItem:o}=this.state;if(o)return"OMNI_RESULT_FOLDER_NICKNAME"===o.type?void QN.Z.go(o.urls,{...a,inCurrent:!1}):"OMNI_TYPE_SEARCH"===o.type?void QN.Z.goSearchURL(o.url,{inBackground:a.inBackground,inCurrent:a.inCurrent,inNewWindow:a.inNewWindow,incognito:a.incognito||W.ZP.isGuestSession(this.context.vivaldiWindowId),allowOverride:a.allowOverride,transition:a.transition}):void await this._urlFieldGo(o.url,a);if(tn.ZP.hasNickname(s)){const{transition:e,...t}=a;return en.ZP.open({bookmarks:tn.ZP.getNicknamed(s,!0),...t},!0),this.revertUrl(s),this.blur(),this.hideDropdown(),this.setState({autocompleteData:[]}),void HE(this,eC,!0)}await this._urlFieldGo(s,a)})),VE(this,"onMouseUp",(e=>{const{getSelection:t}=this.context,{button:n,currentTarget:s}=e}))}get autocompletedValue(){return WE(this,iC)}componentDidMount(){HE(this,JE,!0),U_.addChangeListener(this._onSearchSuggestionsChanged),RE.Z.addChangeListener(this._onUrlbarStoreChanged),this._windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged),b.Z.tabsPrivate.onKeyboardChanged.addListener(this.globalKeydownListener)}componentWillUnmount(){HE(this,JE,!1),U_.removeChangeListener(this._onSearchSuggestionsChanged),RE.Z.removeChangeListener(this._onUrlbarStoreChanged),this._tearDownComponentEventListeners(),this._windowStoreToken.remove(),b.Z.tabsPrivate.onKeyboardChanged.removeListener(this.globalKeydownListener)}static getDerivedStateFromProps(e,t){return-1===t.dropdownSelectionIndex&&(0,BE.Z)(e.displayUrl)!==t.typedUrl?{value:"string"==typeof e.editUrl?e.editUrl:e.displayUrl||t.typedUrl}:t.selectedItem?{value:t.selectedItem.text||t.selectedItem.url||""}:{value:e.editUrl||t.typedUrl}}focus(){this._urlInput.current?.focus()}blur(){this._urlInput.current?.blur()}select(){this._urlInput.current?.select()}updateDropdown(){if(!WE(this,eC)&&this.props.showDropdown){if(!this.props.prefValues[P.kAddressBarOmniboxEnabled])return;if(!WE(this,nC))return;this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen&&this.hideDropdown(),HE(this,tC,!0),this.setState({isOmniDropdownOpen:!0,dropdownSelectionIndex:-1})}}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex),this.props.isTypedHistoryOpen&&!e.isTypedHistoryOpen&&this.focus(),this.props.pageId!==e.pageId&&this._cleanupState(),this.props.stateResetKey!==e.stateResetKey&&this.setState({typedUrl:"",isOmniDropdownOpen:!1,bookmarkResults:[],historyResults:[],typedHistoryResults:[],nicknameResults:[],suggestResults:[],dropdownSelectionIndex:-1,selectedItem:void 0,autocompletedItem:void 0,value:"",isMetaKeyPressed:!1,autocompleteData:[]})}render(){const e={typedHistoryItems:this._getFormattedTypedHistoryItems(),omniDropdownItems:this._getFormattedOmniDropdownItems()},t=this.props.prefValues[P.kAddressBarShowFullUrl],n=this.props.prefValues[P.kAddressBarHighlightBaseDomain],{value:i}=this.state,r=this.props.onSubmit?(0,wE.gG)(this.props.urlFragments):void 0;return s.createElement(s.Fragment,null,s.createElement("div",{className:bn()("UrlField",{"UrlField--HasEditText":Boolean(this.props.editUrl),"UrlField--IsEmpty":""===this.state.value}),__source:{fileName:UE,lineNumber:1809,columnNumber:7}},s.createElement(pE,{stateResetKey:this.props.pageId,ref:this._urlInput,autoFocus:this.props.autoFocus,className:this.props.className||"",url:this.props.pageUrl||"",autocompleteOnTitle:Boolean(this.props.autocompleteOnTitle),onSubmit:this.handleSubmit,autocompleteData:this.state.autocompleteData,value:i,onValueChange:this.onValueChange,onAutocompleteValueChange:this.onAutocompleteValueChange,disabled:this.props.disabled?this.props.disabled:void 0,placeholder:this.props.placeholder?this.props.placeholder:void 0,title:this.props.title?this.props.title:void 0,readOnly:this.props.readonly,onBlur:this.onBlur,onFocus:this.onFocus,onSelect:this.onSelected,onClick:this.onClick,onContextMenu:this.onClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onKeyPress:this.onKeyPress,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onKeyDown:this.onKeyDown,onCut:this.onClipboardEvent,onCopy:this.onClipboardEvent,onPaste:this.onPaste,__source:{fileName:UE,lineNumber:1816,columnNumber:9}}),r&&s.createElement(LE,{urlFragments:r,url:this.props.displayUrl,shouldShowFullUrl:t,onGoToPath:this._urlFieldGo,isClickable:this.state.isMetaKeyPressed,onBaseDomainObscured:this.props.onBaseDomainObscured,shouldHighlightBaseDomain:n,__source:{fileName:UE,lineNumber:1860,columnNumber:11}})),this.renderDropdown(e))}}VE(oC,"contextType",Vs.Z),VE(oC,"defaultProps",{urlFragments:(0,wE.kG)()});const lC=(0,bi.Z)(oC,YE);const cC=function(e){if(!e)return"";const{hostname:t}=Is.parse(e);return t&&(e=t),0===e.indexOf("www.")&&(e=e.split("www.")[1]),e.includes("/")&&(e=e.split("/")[0]),e},uC=new class{setActiveWebView(e){m.Z.dispatch({actionType:"WEBVIEW_SET_ACTIVE",component:e})}clearIfActive(e){m.Z.dispatch({actionType:"WEBVIEW_CLEAR_IF_ACTIVE",component:e})}};var mC=n(43556),dC=n(56026),hC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBar.jsx";function pC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gC extends s.PureComponent{constructor(e){super(e),pC(this,"onCloseClicked",(()=>{b.Z.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,"dismiss")})),pC(this,"onActionClicked",((e,t)=>{t.stopPropagation(),t.preventDefault(),b.Z.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,e)}))}render(){return s.createElement("div",{className:"page-confirm-info-bar",__source:{fileName:hC,lineNumber:35,columnNumber:7}},s.createElement("label",{__source:{fileName:hC,lineNumber:36,columnNumber:9}},this.props.infoBar.messageText),s.createElement("div",{className:"infobar-controls",__source:{fileName:hC,lineNumber:37,columnNumber:9}},this.props.infoBar.buttons.map((e=>s.createElement("input",{type:"button",value:e.text,key:e.action,title:(0,ue.Z)("Select action"),onClick:this.onActionClicked.bind(this,e.action),__source:{fileName:hC,lineNumber:39,columnNumber:21}}))),s.createElement("span",{className:"infobar-close",value:"close",title:(0,ue.Z)("Cancel infobar"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:hC,lineNumber:45,columnNumber:11}})))}}const bC=gC;var NC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBarCollection.jsx";function fC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _C extends s.PureComponent{constructor(e){super(e),fC(this,"_onInfobarCreated",(e=>{this.props.tabId===e.tabId&&this.setState((t=>({infoBars:t.infoBars.insert(0,e)})))})),fC(this,"_onInfobarRemoved",((e,t)=>{this.props.tabId===e&&this.setState((e=>({infoBars:e.infoBars.filter((e=>{e.identifier}))})))})),this.state={infoBars:(0,sa.List)()}}componentDidMount(){b.Z.infobars.onInfobarCreated.addListener(this._onInfobarCreated),b.Z.infobars.onInfobarRemoved.addListener(this._onInfobarRemoved)}componentWillUnmount(){b.Z.infobars.onInfobarRemoved.removeListener(this._onInfobarRemoved),b.Z.infobars.onInfobarCreated.removeListener(this._onInfobarCreated)}render(){return s.createElement(s.Fragment,{__source:{fileName:NC,lineNumber:57,columnNumber:7}},this.state.infoBars.map((e=>s.createElement(bC,{key:e.identifier,infoBar:e,__source:{fileName:NC,lineNumber:59,columnNumber:11}}))))}}const vC=_C;var EC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\devtools\\devTools.jsx";function CC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wC={dialog:"handleOnJavascriptDialog"};class yC extends s.PureComponent{constructor(e){super(e),CC(this,"handleOnJavascriptDialog",(e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)})),CC(this,"showDialog",(e=>{e.webview=this.webview,this.setState({dialogParentElement:this.refs.devTools,customData:e})})),CC(this,"handleOnCloseDialog",(()=>{this.setState({dialogParentElement:null})})),CC(this,"attachWebviewHandlers",(()=>{Object.keys(wC).forEach((e=>{this.webview&&this.webview.addEventListener(e,this[wC[e]])}))})),CC(this,"removeWebviewHandlers",(()=>{Object.keys(wC).forEach((e=>{this.webview&&this.webview.removeEventListener(e,this[wC[e]])}))})),this.webview=null,this.state={dialogParentElement:null,customData:null}}componentDidMount(){this.webview=this.refs.webviewdiv?this.refs.webviewdiv.firstChild:null,this.attachWebviewHandlers()}componentWillUnmount(){this.removeWebviewHandlers()}render(){return"off"!==this.props.dockingState?s.createElement("div",{__source:{fileName:EC,lineNumber:89,columnNumber:15}},s.createElement("section",{ref:"devTools",className:"devtools-content",__source:{fileName:EC,lineNumber:90,columnNumber:9}},s.createElement("div",{ref:"webviewdiv",dangerouslySetInnerHTML:{__html:`<webview name="${String("vivaldi-devtools-"+this.props.dockingState)}"\n                partition="persist:storage"\n                inspect_tab_id="${String(this.props.tabId)}" />`},__source:{fileName:EC,lineNumber:93,columnNumber:11}})),this.props.active&&this.state.dialogParentElement&&this.state.customData&&s.createElement(il,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:EC,lineNumber:104,columnNumber:11}})):null}}const SC=yC;var TC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ErrorBoundary.jsx";class kC extends s.Component{constructor(...e){var t,n,s;super(...e),t=this,n="state",s={hasError:!1,stack:"",existingChildren:this.props.children},n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}static getDerivedStateFromProps(e,t){return e.children!==t.existingChildren?{hasError:!1,existingChildren:e.children}:null}static getDerivedStateFromError(e){return{hasError:!0,stack:e.stack}}componentDidCatch(e,t){return null}openBugReport(){$.Z.openURL("https://vivaldi.com/bugreport/")}render(){return this.state.hasError?s.createElement("div",{className:"error-boundary",__source:{fileName:TC,lineNumber:59,columnNumber:9}},s.createElement("h1",{__source:{fileName:TC,lineNumber:60,columnNumber:11}},(0,ue.Z)("An error occurred")),s.createElement("pre",{__source:{fileName:TC,lineNumber:61,columnNumber:11}},this.state.stack),s.createElement("p",{__source:{fileName:TC,lineNumber:62,columnNumber:11}},(0,ue.Z)("Please consider reporting the issue to help us fix it")),s.createElement("input",{type:"button",onClick:this.openBugReport,value:(0,ue.Z)("Report issue"),__source:{fileName:TC,lineNumber:65,columnNumber:11}})):this.props.children}}const IC=kC;var AC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionPageBanner.jsx";function ZC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class PC extends s.PureComponent{constructor(e,t){super(e),ZC(this,"onGoClicked",(()=>{$.Z.openURL("https://vvld.in/chrome-web-store")})),ZC(this,"onCloseClicked",(()=>{this.setState({show:!1}),st.Z.set(P.kShowExtensionsBanner,!1)})),this.state={show:A.ZP.get(P.kShowExtensionsBanner)}}render(){return!this.state.show||this.props.url.indexOf("chrome://extensions")<0?null:s.createElement("div",{className:"vivaldi-extension-banner",__source:{fileName:AC,lineNumber:46,columnNumber:7}},s.createElement("label",{__source:{fileName:AC,lineNumber:47,columnNumber:9}},(0,ue.Z)("You can install any extension from the Chrome Web Store directly to Vivaldi. Just open the web store and click “Add to Chrome” on your extension of choice.")),s.createElement("div",{className:"controls",__source:{fileName:AC,lineNumber:48,columnNumber:9}},s.createElement("input",{type:"button",value:(0,ue.Z)("Chrome Web Store"),title:(0,ue.Z)("Open Chrome Web Store"),onClick:this.onGoClicked,__source:{fileName:AC,lineNumber:49,columnNumber:11}}),s.createElement("span",{className:"close",value:"close",title:(0,ue.Z)("Close"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:AC,lineNumber:52,columnNumber:11}})))}}const DC=PC;var MC=n(12666),OC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPageHitEntry.jsx";function xC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class LC extends s.PureComponent{constructor(e){super(e),xC(this,"_getNewSelectionImage",((e,t)=>{e={left:e.left,top:e.top,width:e.width,height:e.height};if(!Jt.Z.getActiveWebView())return!1;const n={fullPage:!1,rect:e};b.Z.thumbnails.captureTab(t,n,((e,t)=>{e?this.setState({hitImage:t,justFound:!0}):this.resetJustFound()}))})),xC(this,"resetJustFound",(()=>{this.setState({justFound:!1})})),this.state={hitImage:null,justFound:!1,uiZoom:1},b.Z.zoom.getVivaldiUIZoom((e=>{this.setState({uiZoom:e})}))}componentDidUpdate(e){(this.props.selectionRect.top!==e.selectionRect.top||this.props.selectionRect.left!==e.selectionRect.left||this.props.selectionRect.width!==e.selectionRect.width||this.props.selectionRect.height!==e.selectionRect.height)&&this.props.selectionRect.width&&this.props.selectionRect.height&&this._getNewSelectionImage(this.props.selectionRect,this.props.tabId)}render(){const e=Jt.Z.getActiveWebView();if(!this.state.hitImage||!e)return null;const{selectionRect:t,hitOffset:n}=this.props,{uiZoom:i}=this.state,r={position:"absolute",top:parseInt(t.top/i)+n,left:parseInt(t.left/i),width:parseInt(t.width/i),height:parseInt(t.height/i)};return s.createElement(MC.ZP,{in:this.state.justFound,appear:!0,enter:!0,exit:!0,unmountOnExit:!0,onEntered:(e,t)=>this.resetJustFound(),timeout:{appear:200,enter:200,exit:200},__source:{fileName:OC,lineNumber:119,columnNumber:7}},(e=>s.createElement("img",{src:this.state.hitImage,style:r,className:`fip-active-hit ${e}`,__source:{fileName:OC,lineNumber:132,columnNumber:11}})))}}xC(LC,"contextType",Vs.Z);const RC=LC;var BC="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPage.jsx";function FC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class UC extends s.PureComponent{constructor(e){super(e),FC(this,"_isIMEOpen",!1),FC(this,"onCompositionStart",(()=>{this._isIMEOpen=!0})),FC(this,"onCompositionEnd",(()=>{this._isIMEOpen=!1,this.onFindInPageTextChanged()})),FC(this,"onWebpageviewStoreChanged",(e=>{if(!e.pageId||e.pageId===this.props.pageId&&Jt.Z.getActiveWebView()){switch(e.type){case Fi.Z.FIND_IN_PAGE_RESULT_ACTION:this.setState(this._getStateFromStores(!0));break;case Fi.Z.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?this.setState(this._getStateFromStores(!1),this.populateWithPageSelection):"findNextInPage"===e.action?(this.focusFindInPageInput(),this.onNextClicked()):"findPreviousInPage"===e.action&&(this.focusFindInPageInput(),this.onPreviousClicked());break;case Fi.Z.CLOSE_FIND_IN_PAGE_ACTION:this.setState(this._getStateFromStores(!1));break;case Fi.Z.FIND_IN_PAGE_FOCUS:this.focusFindInPageInput()}if(this.refs.fipToolbar){const e=this.refs.fipToolbar.getBoundingClientRect();this.setState({hitOffset:e.height})}}})),FC(this,"populateWithPageSelection",(()=>{b.Z.utilities.getSelectedText(this.props.pageId,(e=>{if(e.length>0){this.refs.inputText.value=e.substring(0,128),this.onFindInPageTextChanged()}this.focusFindInPageInput()}))})),FC(this,"scrollBy",(e=>{let t;t=A.ZP.get(P.kWebpagesSmoothScrollingEnabled)?e?()=>window.scrollBy({top:window.innerHeight,behavior:"smooth"}):()=>window.scrollBy({top:-window.innerHeight,behavior:"smooth"}):e?()=>window.scrollBy({top:window.innerHeight,behavior:"auto"}):()=>window.scrollBy({top:-window.innerHeight,behavior:"auto"}),h.Z.scripting.executeScript({target:{tabId:this.props.pageId},function:t},(()=>{h.Z.runtime.lastError}))})),FC(this,"onKeyDown",(e=>{if(!(0,uh.Mr)(e))switch(e.key){case"PageDown":return void this.scrollBy(!0);case"PageUp":return void this.scrollBy(!1)}"m"===e.key&&(0,uh.Np)(e)&&this.onMatchCaseClicked(),"Enter"===e.key&&((0,uh.Mr)(e)?this.onPreviousClicked():(0,uh.Np)(e)?this.closeAndActivate():this.onNextClicked())})),FC(this,"focusFindInPageInput",(()=>{const e=this.refs.inputText;e&&(e.focus(),e.value&&e.select())})),FC(this,"_getFindInPageText",(()=>{const e=this.refs.inputText;return e?e.value:""})),FC(this,"onMatchCaseClicked",(()=>{this.props.onFindInPage(this._getFindInPageText(),!this.state.matchCase),this.setState((e=>({matchCase:!e.matchCase})))})),FC(this,"onPreviousClicked",(()=>{this.props.onFindNextInPage(this._getFindInPageText(),!0,this.state.matchCase)})),FC(this,"onNextClicked",(()=>{this.props.onFindNextInPage(this._getFindInPageText(),!1,this.state.matchCase)})),FC(this,"onCloseClicked",(()=>{bm.Z.closeFindInPageToolbar(this.props.pageId)})),FC(this,"closeAndActivate",(()=>{this.onCloseClicked();const e=Jt.Z.getActiveWebView();e&&e.stopFinding("activate")})),FC(this,"onFindInPageTextChanged",(()=>{if(this._isIMEOpen)return;const e=this._getFindInPageText();this.state.findInPageText!==e&&(this.setState({findInPageText:e}),this.props.onFindInPage(e,this.state.matchCase))})),FC(this,"_getStateFromStores",(e=>{const t=lb.Z.getFindResultsForPage(this.props.pageId);let n={};return n=e?{...this.state,activeMatchOrdinal:t.activeMatchOrdinal,matchCase:t.matchCase||!1,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect}:{activeMatchOrdinal:t.activeMatchOrdinal,findInPageText:t.searchText,hitOffset:0,isFindInPageToolbarOpen:t.isFindInPageToolbarOpen,matchCase:t.matchCase,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect},n})),this.state=this._getStateFromStores(!1)}componentDidMount(){this.props.isActive&&lb.Z.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){lb.Z.removeChangeListener(this.onWebpageviewStoreChanged)}componentDidUpdate(e){e.isActive!==this.props.isActive&&(this.props.isActive?lb.Z.addChangeListener(this.onWebpageviewStoreChanged):lb.Z.removeChangeListener(this.onWebpageviewStoreChanged))}render(){if(A.ZP.get(P.kThemeUseAnimation)){const e=Jt.Z.getActiveWebView();e&&(0!==this.state.numberOfMatches&&this.state.isFindInPageToolbarOpen?(e.style.transition="filter 100ms",e.style.filter="brightness(95%)"):e.style.filter="brightness(100%)")}return s.createElement("div",{className:"find-in-page-wrapper",__source:{fileName:BC,lineNumber:321,columnNumber:12}},s.createElement(io.Z,{classNames:"find-in-page",in:this.state.isFindInPageToolbarOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:BC,lineNumber:322,columnNumber:7}},s.createElement("div",{ref:"fipToolbar",onKeyDown:this.onKeyDown,className:bn()("find-in-page","toolbar","toolbar-default",{"fip-nomatches":0===this.state.numberOfMatches&&this.state.findInPageText.length>0}),tabIndex:"-1",__source:{fileName:BC,lineNumber:333,columnNumber:9}},s.createElement("span",{className:"fip-input-label",__source:{fileName:BC,lineNumber:341,columnNumber:11}},(0,ue.Z)("Find in Page:")),s.createElement("div",{className:"fip-input-container toolbar toolbar-default",__source:{fileName:BC,lineNumber:345,columnNumber:11}},s.createElement("input",{ref:"inputText",type:"search",onChange:this.onFindInPageTextChanged,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,defaultValue:this.state.findInPageText,__source:{fileName:BC,lineNumber:346,columnNumber:13}}),s.createElement("span",{className:"fip-results",style:{display:this.state.findInPageText.length>0?"inline":"none"},__source:{fileName:BC,lineNumber:354,columnNumber:13}},(0,ue.Z)("$1 of $2",[this.state.activeMatchOrdinal,this.state.numberOfMatches]))),s.createElement("div",{className:"toolbar-group",__source:{fileName:BC,lineNumber:366,columnNumber:11}},s.createElement(ko,{className:"button-narrow",onClick:this.onPreviousClicked,image:cn.Whf,tooltip:(0,ue.Z)("Previous match"),__source:{fileName:BC,lineNumber:367,columnNumber:13}}),s.createElement(ko,{className:"button-narrow",onClick:this.onNextClicked,image:cn.ze0,tooltip:(0,ue.Z)("Next match"),__source:{fileName:BC,lineNumber:373,columnNumber:13}})),s.createElement(ko,{onClick:this.onCloseClicked,image:cn.vyJ,tooltip:(0,ue.Z)("Cancel search"),__source:{fileName:BC,lineNumber:381,columnNumber:11}}),s.createElement("label",{className:"toolbar-group",__source:{fileName:BC,lineNumber:387,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.matchCase,onChange:this.onMatchCaseClicked,__source:{fileName:BC,lineNumber:388,columnNumber:13}}),s.createElement("span",{className:"fip-checkbox-label",__source:{fileName:BC,lineNumber:391,columnNumber:13}},(0,ue.Z)("Match Case"))))),A.ZP.get(P.kThemeUseAnimation)&&0!==this.state.numberOfMatches&&s.createElement(RC,{tabId:this.props.pageId,selectionRect:this.state.selectionRect,hitOffset:this.state.hitOffset,hitText:this.state.findInPageText,__source:{fileName:BC,lineNumber:402,columnNumber:9}}))}}FC(UC,"contextType",Vs.Z);const VC=UC,HC=!1,WC={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},zC={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},GC={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},KC={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},jC={ColorSpace:{0:"Unknown",1:"sRGB",65535:"Adobe RGB / ProPhoto RGB"},ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function YC(e){return!!e.exifdata}function $C(e,t){function n(n){var s=function(e){var t=new DataView(e);HC;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var n=2,s=e.byteLength;for(;n<s;){if(255!==t.getUint8(n))return!1;if(225===t.getUint8(n+1))return tw(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}(n),i=function(e){var t=new DataView(e);HC;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var n=2,s=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<s;){if(i(t,n)){var r=t.getUint8(n+7);return r%2!=0&&(r+=1),0===r&&(r=4),QC(e,n+8+r,t.getUint16(n+6+r))}n++}}(n),r=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);HC;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var n=2,s=e.byteLength,i=new DOMParser;for(;n<s-4;){if("http"===ew(t,n,4)){var r=n-1,a=t.getUint16(n-2)-1,o=ew(t,r,a),l=o.indexOf("xmpmeta>")+8,c=(o=o.substring(o.indexOf("<x:xmpmeta"),l)).indexOf("x:xmpmeta")+10;return o=o.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+o.slice(c),sw(i.parseFromString(o,"text/xml"))}n++}}(n);e.exifdata=s||{},e.iptcdata=i||{},e.xmpdata=r||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),s=n.length,i=new ArrayBuffer(s),r=new Uint8Array(i),a=0;a<s;a++)r[a]=n.charCodeAt(a);return i}(e.src));else if(/^blob\:/i.test(e.src)){const t=new FileReader;t.onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!==this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(e=>{t.readAsArrayBuffer(e)}))}else{var s=new XMLHttpRequest;s.onload=function(){if(200!==this.status&&0!==this.status)throw"Could not load image";n(s.response),s=null},s.open("GET",e.src,!0),s.responseType="arraybuffer",s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){const t=new FileReader;t.onload=function(e){n(e.target.result)},t.readAsArrayBuffer(e)}}const XC={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function QC(e,t,n){for(var s,i,r,a,o=new DataView(e),l={},c=t;c<t+n;)28===o.getUint8(c)&&2===o.getUint8(c+1)&&(a=o.getUint8(c+2))in XC&&(r=o.getInt16(c+3),i=XC[a],s=ew(o,c+5,r),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(s):l[i]=[l[i],s]:l[i]=s),c++;return l}function qC(e,t,n,s,i){var r,a=e.getUint16(n,!i),o={};for(let l=0;l<a;l++)r=n+12*l+2,o[s[e.getUint16(r,!i)]]=JC(e,r,t,n,i);return o}function JC(e,t,n,s,i){var r,a,o,l,c,u,m=e.getUint16(t+2,!i),d=e.getUint32(t+4,!i),h=e.getUint32(t+8,!i)+n;switch(m){case 1:case 7:if(1===d)return e.getUint8(t+8,!i);r=d>4?h:t+8,a=[];for(let t=0;t<d;t++)a[t]=e.getUint8(r+t);return a;case 2:return ew(e,r=d>4?h:t+8,d-1);case 3:if(1===d)return e.getUint16(t+8,!i);r=d>2?h:t+8,a=[];for(let t=0;t<d;t++)a[t]=e.getUint16(r+2*t,!i);return a;case 4:if(1===d)return e.getUint32(t+8,!i);for(a=[],l=0;l<d;l++)a[l]=e.getUint32(h+4*l,!i);return a;case 5:if(1===d)return c=e.getUint32(h,!i),u=e.getUint32(h+4,!i),(o=new Number(c/u)).numerator=c,o.denominator=u,o;a=[];for(let t=0;t<d;t++)c=e.getUint32(h+8*t,!i),u=e.getUint32(h+4+8*t,!i),a[t]=new Number(c/u),a[t].numerator=c,a[t].denominator=u;return a;case 9:if(1===d)return e.getInt32(t+8,!i);a=[];for(let t=0;t<d;t++)a[t]=e.getInt32(h+4*t,!i);return a;case 10:if(1===d)return e.getInt32(h,!i)/e.getInt32(h+4,!i);a=[];for(let t=0;t<d;t++)a[t]=e.getInt32(h+8*t,!i)/e.getInt32(h+4+8*t,!i);return a}}function ew(e,t,n){var s="";for(let i=t;i<t+n;i++)s+=String.fromCharCode(e.getUint8(i));return s}function tw(e,t){if("Exif"!==ew(e,t,4))return!1;var n,s,i,r,a,o=t+6;if(18761===e.getUint16(o))n=!1;else{if(19789!==e.getUint16(o))return!1;n=!0}if(42!==e.getUint16(o+2,!n))return!1;var l=e.getUint32(o+4,!n);if(l<8)return!1;if((s=qC(e,o,o+l,zC,n)).ExifIFDPointer)for(i in r=qC(e,o,o+s.ExifIFDPointer,WC,n)){switch(i){case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"ColorSpace":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[i]=jC[i][r[i]];break;case"LightSource":const e={1:5500,2:3500,3:2700,4:5e3,9:6e3,10:6e3,11:6500,12:7100,13:5400,14:4500,15:3700};s.kelvin=e[r[i]],r[i]=jC[i][r[i]];break;case"ExifVersion":case"FlashpixVersion":r[i]=String.fromCharCode(r[i][0],r[i][1],r[i][2],r[i][3]);break;case"ComponentsConfiguration":r[i]=jC.Components[r[i][0]]+jC.Components[r[i][1]]+jC.Components[r[i][2]]+jC.Components[r[i][3]]}s[i]=r[i]}if(s.GPSInfoIFDPointer)for(i in a=qC(e,o,o+s.GPSInfoIFDPointer,GC,n)){if("GPSVersionID"===i)a[i]=a[i][0]+"."+a[i][1]+"."+a[i][2]+"."+a[i][3];s[i]=a[i]}return s.thumbnail=function(e,t,n,s){var i=function(e,t,n){var s=e.getUint16(t,!n);return e.getUint32(t+2+12*s,!n)}(e,t+n,s);if(!i)return{};if(i>e.byteLength)return{};var r=qC(e,t,t+i,KC,s);if(r.Compression)switch(r.Compression){case 6:if(r.JpegIFOffset&&r.JpegIFByteCount){var a=t+r.JpegIFOffset,o=r.JpegIFByteCount;r.blob=new Blob([new Uint8Array(e.buffer,a,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",r.Compression)}else 2===r.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return r}(e,o,l,n),s}function nw(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var s=e.attributes.item(n);t["@attributes"][s.nodeName]=s.nodeValue}}}else if(3===e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var r=e.childNodes.item(i),a=r.nodeName;if(t[a]){if(!t[a].push){var o=t[a];t[a]=[],t[a].push(o)}t[a].push(nw(r))}else t[a]=nw(r)}return t}function sw(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var s=e.children.item(n),i=s.attributes;for(var r in i){var a=i[r],o=a.nodeName,l=a.nodeValue;void 0!==o&&(t[o]=l)}var c=s.nodeName;if(void 0===t[c])t[c]=nw(s);else{if(void 0===t[c].push){var u=t[c];t[c]=[],t[c].push(u)}t[c].push(nw(s))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}const iw={getData:function(e,t){return!1!==e.complete&&(YC(e)?t&&t.call(e):$C(e,t),!0)},getTag:function(e,t){if(YC(e))return e.exifdata[t]},getAllTags:function(e){if(!YC(e))return{};var t,n=e.exifdata,s={};for(t in n)n.hasOwnProperty(t)&&(s[t]=n[t]);return s},pretty:function(e){if(!YC(e))return"";var t,n=e.exifdata,s="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?s+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":s+=t+" : ["+n[t].length+" values]\r\n":s+=t+" : "+n[t]+"\r\n");return s}};var rw="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GPSCoordinates.jsx";function aw(e){$.Z.openURL(e)}function ow(e){return`${e[0]}° ${e[1]}' ${e[2]}"`}const lw=function({GPSLatitude:e,GPSLatitudeRef:t,GPSLongitude:n,GPSLongitudeRef:i}){const r=`http://tools.wmflabs.org/geohack/geohack.php?language=en&params=${e.join("_")}_${t}_${n&&n.join("_")}_${i}_`,a=`${ow(e)} ${t},\n            ${ow(n)} ${i}`;return s.createElement("div",{className:"image-metadata-generic",__source:{fileName:rw,lineNumber:36,columnNumber:5}},s.createElement("h3",{__source:{fileName:rw,lineNumber:37,columnNumber:7}},(0,ue.Z)("Location")),s.createElement("div",{__source:{fileName:rw,lineNumber:38,columnNumber:7}},s.createElement("a",{onClick:aw.bind(null,r),href:r,title:(0,ue.Z)("Open in GeoHack"),__source:{fileName:rw,lineNumber:39,columnNumber:9}},a)))};var cw="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GenericMetadata.jsx";const uw=function({value:e,name:t}){return s.createElement("div",{className:"image-metadata-generic",__source:{fileName:cw,lineNumber:10,columnNumber:5}},s.createElement("h3",{__source:{fileName:cw,lineNumber:11,columnNumber:7}},t),s.createElement("div",{__source:{fileName:cw,lineNumber:12,columnNumber:7}},e))};var mw="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\ImageInspector.jsx";function dw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hw=[P.kKeyboardTabToAll],pw=["0°",(0,ue.Z)("Vertical Mirror"),"180°",(0,ue.Z)("Horizontal Mirror"),(0,ue.Z)("90° Horizontal Mirror"),"270°",(0,ue.Z)("270° Vertical Mirror"),"90°"],gw=document.createElement("canvas"),bw=gw.getContext("2d"),Nw=document.createElement("canvas"),fw=Nw.getContext("2d");class _w extends s.Component{constructor(e){super(e),dw(this,"refButtonForTests",s.createRef()),dw(this,"style",no.Z.convertColorsToVariables(go.ZP.forTheme(no.Z.getThemeWithFallback("Vivaldi2")))),dw(this,"loadPhoto",(()=>{this.props.url?this.setState({status:1},(()=>{const e=this.props.url,t=document.createElement("img"),n=[{fill:to()("#f00"),data:[]},{fill:to()("#0f0"),data:[]},{fill:to()("#00f"),data:[]},{fill:to()("#999"),data:[]}],s=n[0],i=n[1],r=n[2],a=n[3];let o,l=0;t.onload=()=>iw.getData(t,(()=>{o&&URL.revokeObjectURL(o);const e=t.width/t.height;let c=gw.width,u=c/e,m=0,d=0;u>gw.height?(u=gw.height,c=u*e,m=(gw.width-c)/2):d=(gw.height-u)/2,bw.clearRect(0,0,gw.width,gw.height),bw.drawImage(t,m,d,c,u);const h=bw.getImageData(0,0,gw.width,gw.height);for(let e=0;e<256;e+=1)s.data[e]=0,i.data[e]=0,r.data[e]=0,a.data[e]=0;const p=h.data.length/256;for(let e=0,t=h.data.length;e<t;e+=4)if(h.data[e+3]>0){const t=h.data[e],n=h.data[e+1],a=h.data[e+2];s.data[t]+=1/p,i.data[n]+=1/p,r.data[a]+=1/p}for(let e=0;e<256;e+=1)a.data[e]=.2126*s.data[e]+.7152*i.data[e]+.0722*r.data[e];this.setState({data:iw.getAllTags(t),histogramChannels:n,height:t.naturalHeight,width:t.naturalWidth,size:l,status:2},this.updateHistogram)})),fetch(e).then((e=>e.blob())).then((e=>{l=e.size,o=URL.createObjectURL(e),t.src=o})).catch((e=>{this.setState({status:3})}))})):this.setState({status:0})})),dw(this,"_createClipboardData",(()=>this.props.url+"\n\n"+this.state.width+" x "+this.state.height+"\n"+Cr(this.state.size)+"\n\n"+JSON.stringify(this.state.data,null,2))),dw(this,"copyToClipboard",(e=>{if(!(this.state.size&&this.state.width&&this.state.height))return;const t=this._createClipboardData();navigator.clipboard.writeText(t)})),this.state={histogramChannels:[],histogramStyle:3,histogramImage:null,height:0,width:0,size:0,data:{},status:0},Nw.width=768,Nw.height=300,fw.globalCompositeOperation="lighter",fw.lineWidth=1.5,gw.width=600,gw.height=400}componentDidMount(){this.props.open&&this.loadPhoto()}componentDidUpdate(e){this.props.open&&0===this.state.status&&this.loadPhoto()}updateHistogram(){let e=[];switch(this.state.histogramStyle){case 0:e=[this.state.histogramChannels[0]];break;case 1:e=[this.state.histogramChannels[1]];break;case 2:e=[this.state.histogramChannels[2]];break;case 4:e=[this.state.histogramChannels[3]];break;case 3:e=[this.state.histogramChannels[0],this.state.histogramChannels[1],this.state.histogramChannels[2]]}fw.clearRect(0,0,Nw.width,Nw.height),e.forEach((e=>{fw.beginPath(),fw.moveTo(0,Nw.height);for(let t=0;t<e.data.length+1;t+=1){const n=Math.round(e.data[t]*Nw.height);fw.lineTo(3*t,Nw.height-n)}fw.lineTo(Nw.width,Nw.height),fw.strokeStyle=e.fill.css(),fw.fillStyle=e.fill.alpha(.3).css(),fw.fill(),fw.stroke(),fw.closePath()})),this.setState({histogramImage:Nw.toDataURL()})}setHistogramStyle(e){this.setState({histogramStyle:e},this.updateHistogram)}render(){if(!this.props.open)return s.createElement("div",{ref:"imageinspector",__source:{fileName:mw,lineNumber:341,columnNumber:14}});const e=this.state.data,t=Object.keys(e).length>0&&e.DateTimeOriginal,n=decodeURI(this.props.url.split("/").pop().split("#")[0].split("?")[0].toString()),i=e.ExposureTime?e.ExposureTime.valueOf():void 0;return s.createElement("div",{className:"image-inspector",ref:"imageinspector",style:this.style,__source:{fileName:mw,lineNumber:353,columnNumber:7}},s.createElement("header",{__source:{fileName:mw,lineNumber:354,columnNumber:9}},s.createElement("h1",{__source:{fileName:mw,lineNumber:355,columnNumber:11}},n),s.createElement("button",{className:"close no-stroke",title:(0,ue.Z)("Close inspector"),onClick:this.props.toggleImageInspector,dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:mw,lineNumber:356,columnNumber:11}})),s.createElement("div",{className:"image-inspector-container",__source:{fileName:mw,lineNumber:362,columnNumber:9}},1===this.state.status&&s.createElement("p",{className:"in-progress",__source:{fileName:mw,lineNumber:364,columnNumber:11}},(0,ue.Z)("Analyzing image...")),3===this.state.status&&s.createElement("p",{__source:{fileName:mw,lineNumber:369,columnNumber:11}},(0,ue.Z)("Unable to analyze image.")),2===this.state.status&&s.createElement("div",{className:"image-inspector-metadata",__source:{fileName:mw,lineNumber:375,columnNumber:11}},s.createElement("div",{className:"image-histogram",__source:{fileName:mw,lineNumber:377,columnNumber:13}},s.createElement("img",{className:"histogram",title:(0,ue.Z)("Histogram"),src:this.state.histogramImage,__source:{fileName:mw,lineNumber:378,columnNumber:15}}),s.createElement("div",{className:"toolbar text",__source:{fileName:mw,lineNumber:383,columnNumber:15}},s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"button-toolbar "+(4===this.state.histogramStyle?"button-selected":""),onClick:this.setHistogramStyle.bind(this,4),__source:{fileName:mw,lineNumber:384,columnNumber:17}},(0,ue.Z)("Brightness")),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"button-toolbar "+(3===this.state.histogramStyle?"button-selected":""),onClick:this.setHistogramStyle.bind(this,3),__source:{fileName:mw,lineNumber:393,columnNumber:17}},"RGB"),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"button-toolbar "+(0===this.state.histogramStyle?"button-selected":""),onClick:this.setHistogramStyle.bind(this,0),__source:{fileName:mw,lineNumber:401,columnNumber:17}},"R"),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"button-toolbar "+(1===this.state.histogramStyle?"button-selected":""),onClick:this.setHistogramStyle.bind(this,1),__source:{fileName:mw,lineNumber:409,columnNumber:17}},"G"),s.createElement("button",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],className:"button-toolbar "+(2===this.state.histogramStyle?"button-selected":""),onClick:this.setHistogramStyle.bind(this,2),__source:{fileName:mw,lineNumber:418,columnNumber:17}},"B"))),t&&s.createElement("div",{className:"image-metadata-device",__source:{fileName:mw,lineNumber:431,columnNumber:15}},s.createElement("span",{className:"image-camera",dangerouslySetInnerHTML:{__html:cn.b0l},__source:{fileName:mw,lineNumber:432,columnNumber:17}}),s.createElement("h3",{__source:{fileName:mw,lineNumber:436,columnNumber:17}},"Canon"===e.Make?"":e.Make," ",e.Model)),t&&s.createElement("div",{className:"image-metadata-core",__source:{fileName:mw,lineNumber:441,columnNumber:15}},s.createElement("div",{title:(0,ue.Z)("Aperture"),__source:{fileName:mw,lineNumber:442,columnNumber:17}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.S1h},__source:{fileName:mw,lineNumber:443,columnNumber:19}}),e.FNumber&&`f/${e.FNumber.valueOf()}`),s.createElement("div",{title:(0,ue.Z)("ISO Speed"),__source:{fileName:mw,lineNumber:446,columnNumber:17}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.KyY},__source:{fileName:mw,lineNumber:447,columnNumber:19}}),e.ISOSpeedRatings&&e.ISOSpeedRatings),s.createElement("div",{title:(0,ue.Z)("Exposure time"),__source:{fileName:mw,lineNumber:450,columnNumber:17}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.CKA},__source:{fileName:mw,lineNumber:451,columnNumber:19}}),i&&i<1&&(0,ue.Z)("1/$1 second","1/$1 seconds",[Math.round(1/i*100)/100]),i&&i>=1&&(0,ue.Z)("$1 second","$1 seconds",[i])),s.createElement("div",{title:(0,ue.Z)("Focal length"),__source:{fileName:mw,lineNumber:460,columnNumber:17}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.heI},__source:{fileName:mw,lineNumber:461,columnNumber:19}}),e.FocalLengthIn35mmFilm||e.FocalLength&&`${e.FocalLengthIn35mmFilm?e.FocalLengthIn35mmFilm.valueOf():e.FocalLength.valueOf()} mm`)),e.WhiteBalance&&s.createElement("div",{className:"image-white-balance",__source:{fileName:mw,lineNumber:472,columnNumber:15}},s.createElement("h3",{__source:{fileName:mw,lineNumber:473,columnNumber:17}},(0,ue.Z)("White Balance")),e.LightSource&&"Unknown"!==e.LightSource?e.LightSource:e.WhiteBalance,e.kelvin&&s.createElement("div",{className:"image-kelvinscale",__source:{fileName:mw,lineNumber:478,columnNumber:19}},s.createElement("span",{className:"kelvin-indicator",style:{left:(e.kelvin-2e3)/70+"%"},__source:{fileName:mw,lineNumber:479,columnNumber:21}},e.kelvin,"K"))),this.state.width&&this.state.height&&s.createElement(uw,{value:this.state.width+" x "+this.state.height+" ("+Math.round(this.state.height*this.state.width/1e5)/10+"MP)",name:(0,ue.Z)("Dimensions"),__source:{fileName:mw,lineNumber:490,columnNumber:15}}),this.state.size&&s.createElement(uw,{value:Cr(this.state.size),name:(0,ue.Z)("Size"),__source:{fileName:mw,lineNumber:500,columnNumber:15}}),e.ColorSpace&&s.createElement(uw,{value:`${e.ColorSpace}`,name:(0,ue.Z)("Color Space"),__source:{fileName:mw,lineNumber:503,columnNumber:15}}),e.GPSLatitude&&e.GPSLatitudeRef&&e.GPSLongitude&&e.GPSLongitudeRef&&s.createElement(lw,{GPSLatitude:e.GPSLatitude,GPSLatitudeRef:e.GPSLatitudeRef,GPSLongitude:e.GPSLongitude,GPSLongitudeRef:e.GPSLongitudeRef,__source:{fileName:mw,lineNumber:508,columnNumber:15}}),e.Copyright&&""!==e.Copyright.trim()&&s.createElement(uw,{value:e.Copyright,name:(0,ue.Z)("Copyright"),__source:{fileName:mw,lineNumber:514,columnNumber:15}}),e.DateTimeOriginal&&s.createElement(uw,{value:e.DateTimeOriginal,name:(0,ue.Z)("Captured at"),__source:{fileName:mw,lineNumber:518,columnNumber:15}}),e.Orientation&&s.createElement(uw,{value:pw[e.Orientation-1],name:(0,ue.Z)("Orientation"),__source:{fileName:mw,lineNumber:522,columnNumber:15}}),e.Software&&s.createElement(uw,{value:e.Software,name:(0,ue.Z)("Software"),__source:{fileName:mw,lineNumber:528,columnNumber:15}}),s.createElement("div",{className:"toolbar text alldata-toolbar",__source:{fileName:mw,lineNumber:530,columnNumber:13}},s.createElement("button",{ref:this.refButtonForTests,className:"button-toolbar",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.copyToClipboard,__source:{fileName:mw,lineNumber:531,columnNumber:15}},(0,ue.Z)("Copy Data to Clipboard"))))))}}const vw=(0,bi.Z)(_w,hw),Ew="change";let Cw=[];const ww=new class extends(Bi()){getAction(){for(;Cw.length>500;)Cw.shift();return Cw.join("\r\n")}clear(){Cw=[],this.emitChange()}emitChange(){this.emit(Ew)}addChangeListener(e){0===this.listeners(Ew).length&&(this.dispatchToken=m.Z.register((e=>{const t=(new Date).toLocaleString("is")+": ";let n;switch(e.actionType){case"STATUS_SET_STATUS":n=e.status;break;case"MAIL_SELECT_FOLDER":n=JSON.stringify(e.folder.accountId)+", "+JSON.stringify(e.folder.path);break;case"MAIL_SEARCH_SET_OPTIONS":n=JSON.stringify(e.options);break;case"MAIL_FILTERS_INIT":break;case Fi.Z.CONTACT_SAVE_CONTACT:case Fi.Z.CONTACT_SELECT_CONTACT:n=JSON.stringify(e.contact);break;case Fi.Z.CONTACT_DELETE_CONTACTS:Cw.push(t+" "+e.actionType+": "+JSON.stringify(e.ids));break;case Fi.Z.CONTACT_ADD_CONTACTS:n=e.contacts.length+" contacts";break;case"MAIL_IS_DISCONNECTED":n=e.accountId+", "+e.isDisconnected.toString()+", "+(e.errorMessage||"");break;case"MAIL_IS_CONNECTING":n=e.accountId+", "+e.isConnecting.toString();break;case"URLFIELD_SET_STATE":n=Object.getOwnPropertyNames(e.state).map((t=>`${t}: ${e.state[t]}`)).join(", ");break;case"MAIL_INDEX_UPDATE":const s=e.updates;n="",s.addedSles&&(n+="Added: "+JSON.stringify(s.addedSles)),s.removedSles&&(n+="Removed: "+JSON.stringify(s.removedSles)),s.sleUpdates&&(n+="Updated: "+JSON.stringify(s.sleUpdates));break;default:n=""}const s=n?": "+n:"";Cw.push(t+e.actionType+s),ww.emitChange()}))),this.on(Ew,e)}removeChangeListener(e){1===this.listeners(Ew).length&&m.Z.unregister(this.dispatchToken),this.removeListener(Ew,e)}};const yw=ww;var Sw="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\actionlog\\ActionLog.jsx";function Tw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kw extends s.Component{constructor(...e){super(...e),Tw(this,"state",{actionLog:""}),Tw(this,"_actionLoggerChanged",(()=>{this.setState({actionLog:yw.getAction()})})),Tw(this,"getContextMenuItems",(()=>[{handler:yw.clear.bind(yw),...(0,Mn.Z)("Clear")}])),Tw(this,"onContextMenu",(e=>{(0,Hs.Z)(this.context.vivaldiWindowId,this.getContextMenuItems())(e)}))}UNSAFE_componentWillMount(){yw.addChangeListener(this._actionLoggerChanged)}componentWillUnmount(){yw.removeChangeListener(this._actionLoggerChanged)}render(){return s.createElement("div",{className:"actionlog",id:"action_logger",tabIndex:"0",onContextMenu:this.onContextMenu,__source:{fileName:Sw,lineNumber:50,columnNumber:7}},s.createElement("textarea",{className:"actionlogs",readOnly:!0,value:this.state.actionLog,__source:{fileName:Sw,lineNumber:52,columnNumber:9}}))}}Tw(kw,"contextType",Vs.Z);const Iw=kw;var Aw=n(54155);function Zw(e,t){t.define({element:"kind",fields:{type:Aw.Ku.attribute("type"),value:Aw.Ku.text()},namespace:"vivaldi:legend",path:"message.kind"})}function Pw(e,t){t.define({element:"foo",fields:{type:Aw.Ku.attribute("type"),value:Aw.Ku.text()},namespace:"http://example.com/p/foo",path:"message.mystanza"}),t.define({path:"client.bareJid"}),e.bareJid=e.config.jid.split("@")[0],e.sendMyStanza=(t,n)=>e.sendMessage({to:t,from:e.config.jid,body:"Foo",mystanza:{type:"bar",value:n}}),e.on("message",(t=>{t.mystanza&&e.emit("mystanza",t)}))}var Dw=n(83216);function Mw(e){const{to:t,message:n,toThread:s,threadId:i,kind:r}=e,a=t.includes("conference")?"groupchat":"chat",o=A.ZP.get(P.kChatProcessHintNoStore),l={to:t,from:zw.getClient().jid,body:n,type:a,read:!0,delay:{timestamp:new Date},processingHints:{noStore:o},thread:i||"foo",parentThread:s||"bar",kind:{value:r}},c=Rw(zw.getClient().jid);!t.includes("conference")&&t!==c&&Xw.receivedMessage(l),zw.getClient().sendMessage(l)}function Ow(e){return e.split("@")[0]}function xw(e){return{type:"title",name:(0,ue.Z)(e)}}function Lw(e){return{displayName:e.split("@")[0],type:"conversation",address:e}}function Rw(e){return e.split("/")[0]}function Bw(e){return"chat"===e.type?Ow(e.from):e.from.split("/")[1]}function Fw(e){if("groupchat"===e.type&&Bw(e)===zw.getClient().bareJid)return;const t=()=>{re.ZP.getIsPanelVisible("chat")||ie.Z.showContent("chat")},n="chat"===e.type,s=n?Bw(e):e.from.split("@")[0],i=n?e.body:`${Bw(e)}: ${e.body}`;A.ZP.get(P.kChatNotifications)&&(0,Zt.c)({title:s||"",body:i||"",icon:"resources/chat_notification_icon.png",requireInteraction:!1,silent:!A.ZP.get(P.kChatNotificationsSoundOn),onClick:t})}async function Uw(e,t){const n=(0,Dw.Z)(t,{paging:{max:50,before:""}}),s=A.ZP.get(P.kChatConversationTimestamps).find((t=>t.name===e));let i;e.includes("conference")?i=await zw.getClient().searchHistory(e,n):(n.with=e,i=await zw.getClient().searchHistory(n));const r=await i.results.filter((e=>e.item.message.body)).map((e=>{const{delay:t}=e.item.message;let n=!1;if(t&&t.timestamp&&s){const e=new Date(t.timestamp);n=s.timestamp>e}return{...e.item.message,read:n}})),{first:a="",last:o=""}=i.paging;return{messages:r,first:a,last:o}}function Vw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hw="change";let Ww;const zw=new class extends(Bi()){constructor(...e){super(...e),Vw(this,"createClient",((e,t,n="https://xmpp.vivaldi.net:5443/bosh",s="wss://xmpp.vivaldi.net:5443/ws")=>{Ww=Aw.eI({jid:e,password:t,resource:"legend",transports:{websocket:s,bosh:n}}),Ww.use(Pw),Ww.use(Zw),Ww.on("available",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"available")})),Ww.on("auth:failed",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"auth:failed")})),Ww.on("auth:success",(e=>{Xw.loggingIn(),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"auth:success")})),Ww.on("chat:state",(e=>{if(Bw(e)!==Ww.bareJid){const t={type:e.chatState,typing:e};this.emitChange(t)}"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"chat:state")})),Ww.on("disconnected",(e=>{Xw.disconnected(),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"disconnected")})),Ww.on("connected",(e=>{Xw.connected(),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"connected")})),Ww.on("raw:outgoing",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e)})),Ww.on("session:started",(async()=>{await Ww.enableCarbons(),Ww.sendPresence(),Xw.init(),[{type:"conversation",displayName:"Bachelor",address:"bachelor@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Feedback",address:"feedback@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Random",address:"random@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Vivaldi Configs",address:"vivaldi_configs@conference.xmpp.vivaldi.net"}].forEach((e=>{e.address&&Ww.joinRoom(e.address,Ww.bareJid)})),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log("session started event")})),Ww.on("session:end",(()=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log("Chat: Got ended")})),Ww.on("muc:join",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"joined")})),Ww.on("muc:available",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"available")})),Ww.on("muc:declined",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"declined")})),Ww.on("muc:*",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"everything muc")})),Ww.on("muc:destroyed",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"destroyed")})),Ww.on("muc:error",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"error")})),Ww.on("muc:failed",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"failed")})),Ww.on("muc:invite",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"invite")})),Ww.on("muc:leave",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"leave")})),Ww.on("muc:other",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"other")})),Ww.on("muc:topic",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"muc:topic")})),Ww.on("raw:incoming",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"raw:incoming")})),Ww.on("muc:unavailable",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"unavailable")})),Ww.on("marker:acknowledged",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"ackMsg")})),Ww.on("marker:displayed",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"disMsg")})),Ww.on("marker:received",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"recMsg")})),Ww.on("chat",(e=>{Xw.receivedMessage(e,!0),Fw(e),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"chat")})),Ww.on("groupchat",(e=>{Xw.receivedMessage(e,!0),Fw(e),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"groupchat")})),Ww.on("presence",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"presence")})),Ww.on("subscribe",(e=>{Ww.acceptSubscription(e.from),"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e,"subscribe")})),Ww.on("sm",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"sm")})),Ww.on("message:error",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.error(e,"message:error")})),Ww.on("stream:management:ack",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"stream:management:ack")})),Ww.on("stanza:acked",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"stanza:acked")})),Ww.on("stanza:failed",(()=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.error("Message not sent")})),Ww.on("stream:data",(e=>{"verbose"===A.ZP.get(P.kChatDebugOutput)&&console.log(e,"stream:data")})),Ww.on("unavailable",(e=>{"off"!==A.ZP.get(P.kChatDebugOutput)&&console.log(e)})),Ww.connect()})),Vw(this,"signOut",(()=>{Ww.disconnect(),Xw.signOut()})),Vw(this,"getClient",(()=>{if(!Ww)throw new Error("Client wasn't ready");return Ww}))}emitChange(e){this.emit(Hw,e)}addChangeListener(e){this.on(Hw,e)}removeChangeListener(e){this.removeListener(Hw,e)}};var Gw=n(42941);function Kw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jw extends(S()){constructor(...e){super(...e),Kw(this,"getMessagesFrom",(e=>this.getState().messages.get(e))),Kw(this,"hasUnreadMessages",(e=>{const t=A.ZP.get(P.kChatConversationTimestamps).find((t=>t.name===e)),n=this.getState().messages.get(e);if(n){const e=zw.getClient().bareJid;return n.messages.some((n=>{if(!n.delay||!t)return;const s=Bw(n),i=new Date(n.delay.timestamp).getTime();return t.timestamp<i&&s!==e}))}return!1})),Kw(this,"getLastMessageFrom",(e=>{const t=this.getMessagesFrom(e);return t?(0,Gw.default)(t.messages):""})),Kw(this,"getActiveConversation",(()=>this.getState().active)),Kw(this,"getSortedConversationByNewest",(()=>[...this.getState().messages.entries()].sort(((e,t)=>{const n=(0,Gw.default)(e[1].messages),s=(0,Gw.default)(t[1].messages);if(!(n&&s&&n.delay&&s.delay))return 1;return new Date(n.delay.timestamp).getTime()<new Date(s.delay.timestamp).getTime()?1:-1})).map((e=>e[0])))),Kw(this,"getUnreadCount",(()=>{const e=A.ZP.get(P.kChatConversationTimestamps);let t=0;const n=this.getState(),s=n.active,i=zw.getClient().bareJid;return n.messages.forEach(((n,r)=>{const a=e.find((e=>e.name===r));if(a){n.messages.some((e=>{if(!e.delay)return;const t=new Date(e.delay.timestamp).getTime(),n=Bw(e);return a.timestamp<t&&r!==s&&n!==i}))&&t++}})),t}))}getInitialState(){return{messages:new Map,isConnected:!1,isLoggedIn:!1,active:""}}reduce(e,t){switch(t.actionType){case"CHAT_INIT":return{...e,messages:t.messages};case"CHAT_LOG_IN":return{...e,isLoggedIn:!0};case"CHAT_SIGN_OUT":return{...e,isLoggedIn:!1};case"CHAT_HISTORY":case"CHAT_MESSAGE_RECEIVED":case"CHAT_ACTIVITY_ACTION":{const{messages:n}=e;return n.set(t.origin,t.messages),{...e,messages:n}}case"CHAT_CONNECTED":return{...e,isConnected:!0};case"CHAT_DISCONNECTED":return{...e,isConnected:!1};case"CHAT_ACTIVE_ACTION":return{...e,active:t.active}}return e}}const Yw=new jw(m.Z);function $w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xw=new class{constructor(){$w(this,"init",(()=>{fetch("https://xmpp.vivaldi.net:5555/lastmsgs",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:zw.getClient().bareJid})}).then((e=>e.json())).then((e=>{(e=e.concat([{type:"conversation",displayName:"Bachelor",address:"bachelor@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Feedback",address:"feedback@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Random",address:"random@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Vivaldi Configs",address:"vivaldi_configs@conference.xmpp.vivaldi.net"}])).forEach((async e=>{const t=e.displayName?e.address:`${e.username}@xmpp.vivaldi.net`,n=await Uw(t),{messages:s}=Yw.getState();s.set(t,n),m.Z.dispatch({actionType:"CHAT_INIT",messages:s})}))}))})),$w(this,"receivedMessage",(async(e,t=!1)=>{if(!e.body)return;const n=Rw(t?e.from:e.to);e.read=!1;const s=Yw.getMessagesFrom(n);let i;if(s&&(i={...s,messages:[...s.messages,e]}),!i){i={...await Uw(n)}}m.Z.dispatch({actionType:"CHAT_MESSAGE_RECEIVED",origin:n,messages:i})})),$w(this,"loggingIn",(()=>{m.Z.dispatch({actionType:"CHAT_LOG_IN"})})),$w(this,"signOut",(()=>{m.Z.dispatch({actionType:"CHAT_SIGN_OUT"})})),$w(this,"connected",(()=>{m.Z.dispatch({actionType:"CHAT_CONNECTED"})})),$w(this,"disconnected",(()=>{m.Z.dispatch({actionType:"CHAT_DISCONNECTED"})})),$w(this,"getMoreHistory",(async e=>{const t=Yw.getMessagesFrom(e);if(!t)return;const n=t?t.first:"",s=t?t.messages:[],i={paging:{max:30,before:n}},r=await Uw(e,i);if(!r.messages.length||!r.first.length)return;const a={messages:[...r.messages,...s],first:r.first,last:r.last};m.Z.dispatch({actionType:"CHAT_HISTORY",origin:e,messages:a})})),$w(this,"updateLastActivity",((e,t)=>{if(!e.length)return;const n=A.ZP.get(P.kChatConversationTimestamps),s=n.findIndex((t=>t.name===e));if(-1!==s?n.splice(s,1,{name:e,timestamp:Date.now()}):n.push({name:e,timestamp:Date.now()}),st.Z.set(P.kChatConversationTimestamps,n),!t.length)return;const i=Yw.getMessagesFrom(e);if(!i)return;for(let e=i.messages.findIndex((e=>e.id===t[t.length-1]))-1;e<i.messages.length;e++)i.messages[e].read=!0;m.Z.dispatch({actionType:"CHAT_ACTIVITY_ACTION",origin:e,messages:i})})),$w(this,"updateActiveConversation",(e=>{m.Z.dispatch({actionType:"CHAT_ACTIVE_ACTION",active:e})}))}};class Qw extends s.Component{render(){const{address:e}=this.props;if(!e)return null;const t=e.substring(0,2),n=t.substring(0,1).toUpperCase()+t.substring(1);return s.createElement("span",{className:"profile-picture",style:{backgroundColor:"#eee"},__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ProfilePicture.jsx",lineNumber:22,columnNumber:7}},n)}}const qw=Qw;var Jw="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatContactRow.jsx";function ey(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ty extends s.Component{constructor(...e){super(...e),ey(this,"state",{isHovered:!1,latestMessage:null,hasUnread:!1}),ey(this,"didSelectContact",(e=>{const{contact:t,didSelectNewRecipient:n,isPanel:s}=this.props,{ctrlKey:i,shiftKey:r,altKey:a,metaKey:o}=e;A.ZP.get(P.kChatTabMode)||i||r||a||o?$.Z.openURL(`vivaldi://chat/${t.address}`,{singleton:!0}):s?n(t.address):$.Z.openURL(`vivaldi://chat/${t.address}`,{singleton:!0})})),ey(this,"_chatStoreListener",(()=>{const{contact:e}=this.props,t=Yw.hasUnreadMessages(e.address),n=Yw.getLastMessageFrom(e.address);this.setState((e=>({latestMessage:n||e.latestMessage,hasUnread:t})))})),ey(this,"onDragStart",(e=>{const{contact:t,isDragging:n}=this.props,s=W.ZP.isIncognito(this.context.vivaldiWindowId);Ws(e,`vivaldi://chat/${t.address}`,t.address,s),n(!0)})),ey(this,"onDragEnd",(e=>{this.props.isDragging(!1)})),ey(this,"onMouseEnter",(()=>{this.setState({isHovered:!0})})),ey(this,"onMouseLeave",(()=>{this.setState({isHovered:!1})})),ey(this,"removeFromFav",(e=>{const{contact:t,removeFav:n}=this.props;e.preventDefault(),e.stopPropagation(),"function"==typeof n&&n(t)}))}componentDidMount(){this._chatStoreToken=Yw.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{contact:e,style:t,isTyping:n,isFav:i}=this.props,{isHovered:r,latestMessage:a,hasUnread:o}=this.state,l=a?a.body:"",c=n&&!o?s.createElement("i",{__source:{fileName:Jw,lineNumber:126,columnNumber:46}},"Writing..."):l;return s.createElement("div",{className:bn()({"chat-contact-row":!0,"chat-contact-row--HasUnread":o}),draggable:!0,onClick:this.didSelectContact,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:t,__source:{fileName:Jw,lineNumber:129,columnNumber:7}},s.createElement(qw,{address:e.address,__source:{fileName:Jw,lineNumber:141,columnNumber:9}}),s.createElement("div",{className:"main-info",__source:{fileName:Jw,lineNumber:142,columnNumber:9}},s.createElement("p",{className:"name",__source:{fileName:Jw,lineNumber:143,columnNumber:11}},e.displayName),s.createElement("p",{className:"preview",__source:{fileName:Jw,lineNumber:144,columnNumber:11}},c)),i&&r&&s.createElement("span",{className:"close",title:(0,ue.Z)("Close"),tabIndex:"-1",onClick:this.removeFromFav,dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:Jw,lineNumber:146,columnNumber:32}}))}}ey(ty,"contextType",Vs.Z);const ny=ty;var sy=n(75637),iy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatContacts.jsx";function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ay="vivaldi://chat/";class oy extends s.Component{constructor(...e){super(...e),ry(this,"treeEntries",s.createRef()),ry(this,"state",{favorites:A.ZP.get(P.kChatFavorites),isDragging:!1,width:0,conversations:[{type:"conversation",displayName:"Bachelor",address:"bachelor@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Feedback",address:"feedback@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Random",address:"random@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Vivaldi Configs",address:"vivaldi_configs@conference.xmpp.vivaldi.net"}]}),ry(this,"_chatStoreListener",(()=>{const e=Yw.getSortedConversationByNewest(),t=[...A.ZP.get(P.kChatFavorites)].map((e=>e.address)),n=(0,sy.Z)(e,t);this.chatSetup(n)})),ry(this,"chatSetup",(e=>{const t=xw("Rooms"),n=xw("Chats"),s=e.filter((e=>!e.includes("@conference"))).map((e=>Lw(e)));s.length&&s.unshift(n);const i=e.filter((e=>e.includes("@conference"))).map((e=>Lw(e)));i.length&&i.unshift(t);const r=[...i,...s];this.setState({conversations:r})})),ry(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.getData("text/plain");if(t.includes(ay)){t=t.split(ay)[1];const e={address:t,type:"conversation",displayName:Ow(t)};if(this.state.favorites.some((t=>t.address===e.address)))return;!function(e){const t=[...A.ZP.get(P.kChatFavorites)];st.Z.set(P.kChatFavorites,[...t,e])}(e),this.setState((n=>({conversations:[...n.conversations].filter((e=>"title"===e.type||!e.address.includes(t))),favorites:[...n.favorites,e],isDragging:!1})))}else this.setState({isDragging:!1})})),ry(this,"onDragOver",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),ry(this,"setDragState",(e=>{this.setState({isDragging:e})})),ry(this,"setNewRecipient",(e=>{this.props.didSelectNewRecipient(e)})),ry(this,"removeFav",(e=>{this.setState((t=>{const n=[...t.favorites],s=n.findIndex((t=>t.address===e.address));return n.splice(s,1),function(e){const t=[...A.ZP.get(P.kChatFavorites)];t.splice(e,1),st.Z.set(P.kChatFavorites,t)}(s),{favorites:n}}))})),ry(this,"onResize",(e=>{const{contentRect:t}=e[0];this.setState({width:t.width})})),ry(this,"renderItem",(e=>{const{index:t,style:n,key:i}=e,r=this.state.conversations[t],{typers:a}=this.props,o=r.address?r.address:"",l=a.get(o),c=(l?l.length:0)>0;switch(r.type){case"title":return s.createElement("h1",{style:n,key:i,className:"section-heading",__source:{fileName:iy,lineNumber:206,columnNumber:11}},r.name);case"conversation":return s.createElement(ny,{contact:r,key:i,style:n,didSelectNewRecipient:this.props.didSelectNewRecipient,isDragging:this.setDragState,isTyping:c,isPanel:this.props.isPanel,__source:{fileName:iy,lineNumber:215,columnNumber:18}});default:return null}}))}componentDidUpdate(e,t){this.props.typers&&this.treeEntries&&this.treeEntries.current&&this.treeEntries.current.forceUpdateGrid(),t.favorites!==this.state.favorites&&this._chatStoreListener()}componentDidMount(){this._chatStoreToken=Yw.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{conversations:e,favorites:t,isDragging:n,width:i}=this.state,{isPanel:r}=this.props,a=n||t.length>0;return s.createElement("div",{className:"chat-contacts outerScrollbar",__source:{fileName:iy,lineNumber:242,columnNumber:7}},a&&s.createElement("h1",{className:"section-heading",__source:{fileName:iy,lineNumber:244,columnNumber:13}},"Favorites"),s.createElement("div",{className:bn()({"favorites-view":!0,"view-hide":!a,"view-expand":a}),onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:iy,lineNumber:246,columnNumber:11}},t.map(((e,t)=>s.createElement(ny,{key:`${e.displayName}-${t}`,contact:e,didSelectNewRecipient:this.setNewRecipient,isDragging:this.setDragState,isFav:!0,isPanel:r,removeFav:this.removeFav,__source:{fileName:iy,lineNumber:257,columnNumber:17}})))),s.createElement(ei,{className:"chat-resize-observer",onResize:this.onResize,__source:{fileName:iy,lineNumber:269,columnNumber:11}},s.createElement(fg.aV,{ref:this.treeEntries,height:44*e.length,rowHeight:44,width:i,rowRenderer:this.renderItem,rowCount:e.length,__source:{fileName:iy,lineNumber:272,columnNumber:13}})))}}const ly=oy;var cy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesImageAttachment.jsx";function uy({onDelete:e,onContextMenu:t,item:n,onOpen:i,onDragStart:r,draggable:a}){return s.createElement("div",{className:"AttachmentItem",onDragStart:r?e=>r(e,n):null,draggable:a,__source:{fileName:cy,lineNumber:19,columnNumber:5}},s.createElement("img",{className:"AttachmentItem-Image",src:n.content,__source:{fileName:cy,lineNumber:24,columnNumber:7}}),s.createElement("button",{className:"AttachmentItem-DeleteButton",title:(0,ue.Z)("Remove attachment"),onClick:()=>e(),tabIndex:"-1",__source:{fileName:cy,lineNumber:25,columnNumber:7}}),s.createElement("button",{className:bn()({"AttachmentItem-ViewOverlayButton":!0,"dragging-enabled":a}),title:(0,ue.Z)("View attachment"),onContextMenu:t,onClick:i,__source:{fileName:cy,lineNumber:29,columnNumber:7}}))}var my="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Switch.jsx";function dy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hy=12;class py extends s.PureComponent{constructor(...e){super(...e),dy(this,"state",{dragging:!1,position:this.props.checked?hy:0}),dy(this,"updateButtonPosition",(()=>{this.setState({position:this.props.checked?hy:0})})),dy(this,"onChange",(e=>{const t=e.target.checked?hy:0;this.setState({position:t}),this.props.onChange&&this.props.onChange(e)})),dy(this,"onClick",(e=>{this.state.dragging?(e.preventDefault(),this.setState({dragging:!1})):this.toggleSwitch()})),dy(this,"toggleSwitch",(()=>{if(this._switchInput){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});this._switchInput.dispatchEvent(e)}})),dy(this,"cancelEvent",(e=>{e.preventDefault()})),dy(this,"onPointerMove",(e=>{if(1===e.buttons&&this._switchInput&&this._switchButton===document.activeElement){this.state.dragging||this.setState({dragging:!0});const t=this._switchInput.getBoundingClientRect(),n=Math.max(0,Math.min(e.clientX-t.left-6,hy));this.setState({position:n}),e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString())}})),dy(this,"onPointerUp",(e=>{if(this.state.dragging){e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString());const{position:t}=this.state;t>=0&&t<=6?(this.setState({position:0}),this.props.checked&&this.toggleSwitch()):(this.setState({position:hy}),this.props.checked||this.toggleSwitch())}}))}componentDidUpdate(e){e.checked!==this.props.checked&&this.updateButtonPosition()}render(){const{position:e}=this.state;return s.createElement("div",{className:bn()("Switch",{"Switch--Disabled":this.props.disabled}),__source:{fileName:my,lineNumber:111,columnNumber:7}},s.createElement("input",{ref:e=>this._switchInput=e,className:"Switch-Input",type:"checkbox",onChange:this.onChange,checked:this.props.checked,disabled:this.props.disabled,value:this.props.value,onPointerDown:this.cancelEvent,tabIndex:this.props.tabIndex,__source:{fileName:my,lineNumber:116,columnNumber:9}}),s.createElement("button",{ref:e=>this._switchButton=e,className:bn()({"Switch-Button":!0,dragging:this.state.dragging}),style:{transform:`translateX(${e}px)`},onPointerMove:this.onPointerMove,onPointerUp:this.onPointerUp,onClick:this.onClick,tabIndex:"-1",__source:{fileName:my,lineNumber:127,columnNumber:9}}))}}const gy=py;var by=n(98767),Ny="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatInputView.jsx";function fy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _y=[P.kChatProcessHintNoStore],vy=st.Z.getEventHandler;class Ey extends s.Component{constructor(...e){super(...e),fy(this,"fileInput",s.createRef()),fy(this,"textAreaRef",s.createRef()),fy(this,"state",{message:"",files:[]}),fy(this,"onChangeMessage",(e=>{this.setState({message:e.target.value})})),fy(this,"focusInputField",(()=>{this.textAreaRef&&this.textAreaRef.current&&this.textAreaRef.current.focus()})),fy(this,"handleInputKey",(e=>{const{message:t,files:n}=this.state;"Enter"!==e.key||e.shiftKey?(this.sendCurrentTyping(),this.sendPausedEvent()):(n.length&&this.uploadFiles(n),t.trim().length&&this._sendMessage(),e.preventDefault())})),fy(this,"uploadFiles",(e=>{e.map((async e=>{const t=await fetch(e.uploadSlot.upload.url,{method:"put",body:e.file});if(201===t.status){const{to:e}=this.props;this.setState((e=>{const n=[...e.files],s=n.findIndex((e=>e.uploadSlot.download.includes(t.url)));return n.splice(s,1),{files:n}})),Mw({to:e,message:t.url,kind:"file"})}}))})),fy(this,"sendTypingEvent",(e=>{if(A.ZP.get(P.kChatTypingIndication)){const t=this.props.to.includes("conference")?"groupchat":"chat";zw.getClient().sendMessage({to:this.props.to,type:t,chatState:e})}})),fy(this,"sendCurrentTyping",(0,vb.default)((()=>this.sendTypingEvent("composing")),750)),fy(this,"sendPausedEvent",(0,za.Z)((()=>this.sendTypingEvent("paused")),1500)),fy(this,"_sendMessage",(async()=>{const{message:e}=this.state,{to:t}=this.props;Mw({to:t,message:e,kind:"text"}),this.setState({message:"",files:[]}),this.sendTypingEvent("paused")})),fy(this,"handleClick",(()=>{this.fileInput.current&&this.fileInput.current.click()})),fy(this,"_testImage",(async e=>{const t=[...this.state.files],n=Promise.all((0,by.default)(e.target.files).map((async e=>({...await this._processFiles(e)}))));this.setState({files:[...t,...await n]},(()=>{this.focusInputField()}))})),fy(this,"_processFiles",(async e=>({content:await Li.Z.readFileAsDataURL(e),uploadSlot:await zw.getClient().getUploadSlot("upload.xmpp.vivaldi.net",{name:e.name,size:e.size,mediaType:e.type}),file:e,uploaded:!1}))),fy(this,"onPaste",(async e=>{const{files:t}=e.clipboardData;if(t.length){e.preventDefault(),e.stopPropagation();const n=[...this.state.files],s=await this._processFiles(t[0]);this.setState({files:[...n,s]})}})),fy(this,"onDrop",(async e=>{e.preventDefault(),e.stopPropagation();const{files:t}=e.dataTransfer;if(t.length){const e=[...this.state.files],n=await this._processFiles(t[0]);this.setState({files:[...e,n]})}})),fy(this,"onDragOver",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),fy(this,"deleteItem",(e=>{this.setState((t=>{const n=t.files;return n.splice(e,1),{files:n}}))})),fy(this,"_openFile",((e,t)=>{let n={inCurrent:!1};const s={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};e&&(n=(0,ai.Z)(s)),$.Z.openURL(t.content,n)}))}componentDidMount(){this.focusInputField()}render(){const{files:e,message:t}=this.state,n=!t.length&&!e.length;return s.createElement("div",{className:"input-view",onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:Ny,lineNumber:222,columnNumber:7}},s.createElement("div",{className:"NotesAttachments",__source:{fileName:Ny,lineNumber:227,columnNumber:9}},e.length?e.map(((e,t)=>s.createElement(uy,{key:t,onDelete:()=>this.deleteItem(t),onContextMenu:()=>{},onOpen:t=>this._openFile(t,e),item:e,draggable:!1,__source:{fileName:Ny,lineNumber:229,columnNumber:13}}))):null),s.createElement("textarea",{ref:this.textAreaRef,className:"chat-text-input",onChange:this.onChangeMessage,onKeyDown:this.handleInputKey,onPaste:this.onPaste,placeholder:(0,ue.Z)("Type message..."),value:t,__source:{fileName:Ny,lineNumber:240,columnNumber:9}}),s.createElement("div",{className:"toolbar toolbar-default composing-toolbar",__source:{fileName:Ny,lineNumber:248,columnNumber:11}},s.createElement(ko,{className:"primary send-button",tooltip:(0,ue.Z)("Send"),onClick:this._sendMessage,disabled:n,image:cn.yt5.medium,__source:{fileName:Ny,lineNumber:249,columnNumber:13}}),s.createElement("label",{className:"button-toolbar",title:(0,ue.Z)("Attach new file..."),__source:{fileName:Ny,lineNumber:256,columnNumber:13}},s.createElement("input",{ref:this.fileInput,type:"file",style:{display:"none"},accept:"image/*,text/plain,.pdf",multiple:!0,onChange:e=>this._testImage(e),__source:{fileName:Ny,lineNumber:259,columnNumber:15}}),s.createElement("button",{onClick:this.handleClick,__source:{fileName:Ny,lineNumber:267,columnNumber:15}},s.createElement("div",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:cn.onv},__source:{fileName:Ny,lineNumber:268,columnNumber:17}}))),s.createElement("label",{className:"incognito-switch",__source:{fileName:Ny,lineNumber:274,columnNumber:13}},s.createElement(gy,{value:"system",checked:this.props.prefValues[P.kChatProcessHintNoStore],onChange:vy(P.kChatProcessHintNoStore),__source:{fileName:Ny,lineNumber:275,columnNumber:15}}),s.createElement("span",{__source:{fileName:Ny,lineNumber:280,columnNumber:15}},(0,ue.Z)("Incognito")))))}}const Cy=(0,bi.Z)(Ey,_y);var wy=n(27856),yy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatMessage.jsx";function Sy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ty extends s.PureComponent{constructor(...e){super(...e),Sy(this,"state",{isHovered:!1,data:null}),Sy(this,"textToHtml",(e=>(0,wy.sanitize)(be(e.replace("\n","<br />")),{FORBID_TAGS:["style"]}))),Sy(this,"handleLinkClick",(e=>{const t=e.target.closest("a");if(!t)return;const n={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button},s=(0,ai.Z)(n);s.inCurrent=!1,$.Z.openURL(t.href,s)})),Sy(this,"onMouseEnter",(()=>{this.setState({isHovered:!0})})),Sy(this,"onMouseLeave",(()=>{this.setState({isHovered:!1})})),Sy(this,"renderImage",(()=>{const{msg:e}=this.props,{data:t}=this.state;t||this.compressImageFile(e.body);const n=t?t.base:e.body;return s.createElement("img",{height:t?t.height:200,src:n,width:t?t.width:null,className:"image-preview",draggable:!0,alt:"",onClick:()=>$.Z.openURL(e.body),__source:{fileName:yy,lineNumber:106,columnNumber:7}})}))}compressImageFile(e){const t="image/png",n=document.createElement("canvas"),s=new Image;s.src=e;const i=n.getContext("2d");s.onload=()=>{const e=Math.min(200/s.width,200/s.height),r=Math.floor(s.width*e),a=Math.floor(s.height*e);n.width=r,n.height=a,i.imageSmoothingEnabled=!1,i.drawImage(s,0,0,r,a);const o=n.toDataURL(t,.66);this.setState((()=>({data:{base:o,width:r,height:a}})))},s.onerror=e=>{console.log("Image loading failed",e)}}render(){const{index:e,msg:t,style:n,prevMsg:i}=this.props,{isHovered:r}=this.state,{body:a}=t,o=Bw(t),l=Bw(i),c=t.delay?g().utc(t.delay.timestamp).local().format("HH:mm:ss (YYYY-MM-DD)"):"",u=t.delay?g().utc(t.delay.timestamp).local().format("HH:mm"):"",m=r?c:u,d=t.processingHints&&t.processingHints.noStore,h=l!==o||0===e;return s.createElement("div",{className:bn()({"chat-message":!0,"no-store":d}),style:n,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:yy,lineNumber:134,columnNumber:7}},h&&s.createElement(s.Fragment,null,s.createElement(qw,{address:Bw(t),__source:{fileName:yy,lineNumber:145,columnNumber:13}}),s.createElement("p",{className:"from",__source:{fileName:yy,lineNumber:148,columnNumber:13}},o)),s.createElement("div",{className:"main-section",__source:{fileName:yy,lineNumber:151,columnNumber:9}},s.createElement("p",{className:"timestamp",__source:{fileName:yy,lineNumber:152,columnNumber:9}},m),"file"===t.kind?.value?this.renderImage():s.createElement("span",{onClick:this.handleLinkClick,className:"message-content",dangerouslySetInnerHTML:{__html:this.textToHtml(a)},__source:{fileName:yy,lineNumber:155,columnNumber:11}})))}}const ky=Ty;var Iy=n(29940),Ay=n(96405),Zy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\MessageList.jsx";function Py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Dy extends s.Component{constructor(e){super(e),Py(this,"treeEntries",s.createRef()),Py(this,"startIndex",0),Py(this,"endIndex",0),Py(this,"_cellCache",new Iy.t1({defaultHeight:50,minHeight:30,fixedWidth:!0})),Py(this,"focusLastMessage",(()=>{this.treeEntries.current&&this.treeEntries.current.scrollToRow(this.props.messages.length)})),Py(this,"clearSeenMessages",(()=>{this.setState({seenMessages:[]})})),Py(this,"rerenderVisibleTreeItems",(()=>{this.treeEntries.current&&(this.treeEntries.current.forceUpdateGrid(),this.focusLastMessage())})),Py(this,"loadMoreHistory",(()=>{Xw.getMoreHistory(this.props.to)})),Py(this,"onResize",(e=>{const{contentRect:t}=e[0];this.setState({width:t.width,height:t.height})})),Py(this,"_recalculateRowHeights",(()=>{this._cellCache.clearAll(),this.treeEntries&&this.treeEntries.current&&this.treeEntries.current.recomputeRowHeights()})),Py(this,"addMessageToSeen",(e=>{const{seenMessages:t}=this.state,n=e.filter((e=>!1===e.read)).map((e=>e.id)),s=(0,Ay.Z)([...t,...n]);s.length>t.length&&this.setState({seenMessages:s})})),Py(this,"_onIndexChanged",(e=>{const{messages:t}=this.props;if(0===e.startIndex)return;e.startIndex<=Math.floor(t.length/4)&&this.loadMoreHistory(),this.addMessageToSeen(t.slice(e.startIndex));const n=t[e.stopIndex].id;this.setState({activeMessageId:n}),this.startIndex=e.startIndex,this.endIndex=e.stopIndex})),Py(this,"setScrollPosition",(e=>{const t=e.target;t instanceof HTMLElement&&this.setState({bottomOffset:t.scrollHeight-(t.scrollTop+t.clientHeight)})})),Py(this,"renderEmptyState",(()=>{const{to:e}=this.props;if(e)return s.createElement("div",{className:"empty-state-no-messages",__source:{fileName:Zy,lineNumber:184,columnNumber:9}},s.createElement("img",{src:"/resources/room-default.png",className:"empty-state-icon",alt:"",__source:{fileName:Zy,lineNumber:185,columnNumber:11}}),s.createElement("h1",{__source:{fileName:Zy,lineNumber:190,columnNumber:11}},"No messages"),s.createElement("p",{__source:{fileName:Zy,lineNumber:191,columnNumber:11}},"This is your first conversation with ",e))})),Py(this,"renderMessageItem",(e=>{const{messages:t}=this.props,{index:n,parent:i,style:r,key:a}=e,o=t[n],l=0===n?t[n]:t[n-1];return s.createElement(Iy.Z8,{cache:this._cellCache,columnIndex:0,key:a,parent:i,rowIndex:n,__source:{fileName:Zy,lineNumber:204,columnNumber:7}},(()=>s.createElement(ky,{style:r,index:n,msg:o,prevMsg:l,__source:{fileName:Zy,lineNumber:212,columnNumber:11}})))})),this.state={height:0,width:0,bottomOffset:0,seenMessages:[],activeMessageId:""}}componentDidUpdate(e,t){if(e.messages!==this.props.messages)if(0===e.messages.length||t.bottomOffset<=150)this.focusLastMessage();else if(this.treeEntries.current){const e=this.props.messages.findIndex((e=>e.id===t.activeMessageId));this.treeEntries.current.scrollToRow(e),this._recalculateRowHeights()}t.width!==this.state.width&&this._recalculateRowHeights()}componentWillUnmount(){Xw.updateLastActivity(this.props.to,this.state.seenMessages)}shouldComponentUpdate(e,t){return!(0,nd.default)(this.state,t)||(!(0,nd.default)(e.messages,this.props.messages)||this.props.to!==e.to)}render(){const{messages:e}=this.props,{height:t,width:n}=this.state,i=t<300?1e3:t;return s.createElement(s.Fragment,null,s.createElement(ei,{className:"chat-resize-observer outerScrollbar",onScroll:this.setScrollPosition,onResize:this.onResize,__source:{fileName:Zy,lineNumber:229,columnNumber:7}},s.createElement(fg.aV,{ref:this.treeEntries,deferredMeasurementCache:this._cellCache,className:"messages-list",height:i,onRowsRendered:this._onIndexChanged,rowHeight:this._cellCache.rowHeight,overscanRowCount:25,noRowsRenderer:this.renderEmptyState,width:n,rowRenderer:this.renderMessageItem,rowCount:e.length,__source:{fileName:Zy,lineNumber:233,columnNumber:11}})))}}const My=Dy;var Oy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatConversation.jsx";function xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ly extends s.PureComponent{constructor(...e){super(...e),xy(this,"state",{editorHeight:160,messages:[]}),xy(this,"_chatStoreListener",(()=>{const e=Yw.getMessagesFrom(this.props.to);e?this.setState({messages:e.messages}):Xw.getMoreHistory(this.props.to)})),xy(this,"onSlidebarPosition",((e,t)=>{this.setState((e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,260),0)})))})),xy(this,"onSlideBarStop",(()=>{this.setState((e=>({editorHeight:e.editorHeight})))}))}componentDidMount(){this._chatStoreToken=Yw.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}componentDidUpdate(e){const{to:t}=this.props;e.to!==t&&this._chatStoreListener()}renderTypers(){const{typers:e}=this.props;return e?function(e){const t=e.map((e=>e.author));if(t.length>=5)return"Many people are typing.";if(t.length<=4&&t.length>2){const e=t.map(((e,t,n)=>4===n.length?t<=2?`${e},`:e:t<=1?`${e},`:e)),n=e.filter((e=>e.includes(",")));return e.splice(n.length,0,"and"),e.join(" ")+" are typing."}return 2===t.length?t.join(" and ")+" are typing.":1===t.length?t.join("")+" is typing.":void 0}(e):null}render(){const{editorHeight:e,messages:t}=this.state,{to:n}=this.props;return s.createElement(s.Fragment,null,s.createElement("section",{__source:{fileName:Oy,lineNumber:91,columnNumber:9}},s.createElement(My,{messages:t,to:n,__source:{fileName:Oy,lineNumber:92,columnNumber:11}})),s.createElement("section",{className:"chat-input–view",style:{flexBasis:e},__source:{fileName:Oy,lineNumber:97,columnNumber:9}},s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,position:"bottom",returnOffset:!0,__source:{fileName:Oy,lineNumber:100,columnNumber:11}}),s.createElement(Cy,{to:n,__source:{fileName:Oy,lineNumber:106,columnNumber:11}}),s.createElement("div",{className:"typing-indicator",__source:{fileName:Oy,lineNumber:107,columnNumber:11}},s.createElement("span",{__source:{fileName:Oy,lineNumber:108,columnNumber:13}},this.renderTypers()))))}}const Ry=Ly;var By="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatOnboarding.jsx";function Fy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Uy extends s.Component{constructor(...e){super(...e),Fy(this,"state",{jid:"",password:""}),Fy(this,"jidInputChange",(e=>{this.setState({jid:e.target.value})})),Fy(this,"passwordInputChange",(e=>{this.setState({password:e.target.value})})),Fy(this,"keyChange",(e=>{"Enter"===e.key&&this.login()})),Fy(this,"login",(()=>{const{jid:e,password:t}=this.state,n=e.trim();n.length&&t.length&&zw.createClient(n,t)})),Fy(this,"openProductPage",(()=>{$.Z.openURL("https://vivaldi.com")}))}render(){const{jid:e,password:t}=this.state,n=e.trim().length&&t.trim().length;return s.createElement(s.Fragment,null,s.createElement("div",{className:"chat-onboarding outerScrollbar",__source:{fileName:By,lineNumber:60,columnNumber:9}},s.createElement("div",{className:"info-section",__source:{fileName:By,lineNumber:61,columnNumber:9}},s.createElement("span",{className:"chat-icon",dangerouslySetInnerHTML:{__html:cn.zLp.small},__source:{fileName:By,lineNumber:62,columnNumber:11}}),s.createElement("h1",{className:"heading",__source:{fileName:By,lineNumber:66,columnNumber:11}},"Vivaldi Chat"),s.createElement("p",{className:"onboarding-pitch",__source:{fileName:By,lineNumber:67,columnNumber:11}},(0,ue.Z)("Private and lightning fast messaging with friends and groups."))),s.createElement("div",{className:"login-container",__source:{fileName:By,lineNumber:72,columnNumber:9}},s.createElement("input",{className:"login-input",placeholder:"user@xmpp.vivaldi.net",onChange:this.jidInputChange,onKeyDown:this.keyChange,type:"text",value:e,__source:{fileName:By,lineNumber:73,columnNumber:11}}),s.createElement("input",{className:"login-input",placeholder:(0,ue.Z)("Password"),onChange:this.passwordInputChange,onKeyDown:this.keyChange,type:"password",value:t,__source:{fileName:By,lineNumber:81,columnNumber:11}}),s.createElement("input",{className:"login-input login-button",type:"button",disabled:!n,onClick:this.login,value:(0,ue.Z)("Sign In"),__source:{fileName:By,lineNumber:89,columnNumber:11}})),s.createElement("a",{href:"",className:"chat-read-more-link",onClick:this.openProductPage,title:(0,ue.Z)("Read more about Vivaldi Chat"),__source:{fileName:By,lineNumber:97,columnNumber:9}},(0,ue.Z)("Learn More"))))}}const Vy=Uy;var Hy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ConversationDetail.jsx";function Wy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zy extends s.Component{constructor(...e){super(...e),Wy(this,"state",{description:"Description and member list is coming soon."}),Wy(this,"addPanel",(()=>{Wi.Z.addByUrl(`vivaldi://chat/${this.props.to}`)}))}render(){const{description:e}=this.state,{to:t}=this.props;return s.createElement("div",{className:"conversation-detail",__source:{fileName:Hy,lineNumber:30,columnNumber:7}},s.createElement("h1",{__source:{fileName:Hy,lineNumber:31,columnNumber:9}},t),s.createElement("p",{__source:{fileName:Hy,lineNumber:32,columnNumber:9}},e),s.createElement("input",{type:"button",onClick:this.addPanel,value:(0,ue.Z)("Add Panel"),__source:{fileName:Hy,lineNumber:33,columnNumber:9}}))}}const Gy=zy;var Ky="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\NewChat.jsx";function jy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Yy extends s.PureComponent{constructor(...e){super(...e),jy(this,"searchField",s.createRef()),jy(this,"state",{error:"",to:""}),jy(this,"focusInputField",(()=>{this.searchField&&this.searchField.current&&this.searchField.current.focus()})),jy(this,"inputDidChange",(e=>{this.setState({error:"",to:e.target.value})})),jy(this,"newConversation",(()=>{const{to:e}=this.state;if(e.includes("@"))e.includes("@conference")&&zw.getClient().joinRoom(e,zw.getClient().bareJid),this.props.setNewConversation(e.trim()),this.props.onRequestClose();else{const e=(0,ue.Z)("Please enter a valid XMPP address");this.setState({error:e})}}))}componentDidMount(){this.focusInputField()}render(){const{error:e,to:t}=this.state;return s.createElement("div",{className:"chat-new-conversation",__source:{fileName:Ky,lineNumber:61,columnNumber:7}},s.createElement("h1",{__source:{fileName:Ky,lineNumber:62,columnNumber:9}},(0,ue.Z)("New Chat")),s.createElement("p",{__source:{fileName:Ky,lineNumber:63,columnNumber:9}},(0,ue.Z)("Find people from the Vivaldi.net community. XMPP addresses from other services are also welcome.")),s.createElement("form",{className:"input-form",onSubmit:this.newConversation,__source:{fileName:Ky,lineNumber:65,columnNumber:9}},s.createElement("input",{type:"text",placeholder:"user@vivaldi.net",ref:this.searchField,onChange:this.inputDidChange,value:t,__source:{fileName:Ky,lineNumber:68,columnNumber:11}}),s.createElement("input",{type:"button",className:"primary",disabled:!t.length,value:(0,ue.Z)("Start Conversation"),onClick:this.newConversation,__source:{fileName:Ky,lineNumber:75,columnNumber:11}})),e&&s.createElement("p",{className:"validation-error",__source:{fileName:Ky,lineNumber:84,columnNumber:20}},e))}}const $y=Yy;var Xy="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatWrapper.jsx";function Qy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qy extends s.Component{constructor(...e){super(...e),Qy(this,"state",{displayConversationDetail:!1,displayCreateConversation:!1,isConnected:!1,isLoggedIn:!1,isPopupOpen:!1,to:this.props.initialTo,typers:new Map}),Qy(this,"chatStoreListener",(()=>{const e=Yw.getState();this.setState({isConnected:e.isConnected,isLoggedIn:e.isLoggedIn})})),Qy(this,"_chatChangeListener",(e=>{if(e.typing&&e.typing.from)switch(e.type){case"composing":this.processComposingType(e.typing);break;case"paused":this.processPausedType(e.typing)}})),Qy(this,"processComposingType",(e=>{const{typers:t}=this.state,n=Rw(e.from),s=Bw(e),i=t.get(n);if(i){const e=[...i],r=e.findIndex((e=>e.author===s));-1!==r?e[r].time=Date.now():e.push({author:s,time:Date.now()}),t.set(n,e)}else{const e=[{author:s,time:Date.now()}];t.set(n,e)}this.setState({typers:t})})),Qy(this,"processPausedType",(e=>{const{typers:t}=this.state,n=Rw(e.from),s=Bw(e),i=t.get(n);if(i&&i.length>1){const e=[...i],r=e.findIndex((e=>e.author===s));e.splice(r,1),t.set(n,e)}else t.delete(n);this.setState({typers:t})})),Qy(this,"guardTypingFromDroppedConnections",(()=>{this.guardInterval=setInterval((()=>{const{typers:e}=this.state;e.size&&Array.from(e.values()).forEach((t=>{t.forEach(((t,n,s)=>{t.time<=Date.now()-2e3&&(s.splice(n,1),this.setState({typers:e}))}))}))}),15e3)})),Qy(this,"connect",(()=>{zw.getClient().connect()})),Qy(this,"navigateBack",(()=>{this.setNewRecipient("")})),Qy(this,"setNewRecipient",(e=>{Xw.updateActiveConversation(e),this.setState({to:e})})),Qy(this,"toggleNewConversation",(()=>{this.setState((e=>({displayCreateConversation:!e.displayCreateConversation})))})),Qy(this,"toggleConversationDetail",(()=>{this.setState((e=>({displayConversationDetail:!e.displayConversationDetail})))})),Qy(this,"renderMainView",(()=>{const{isLoggedIn:e,to:t,typers:n}=this.state,i=t&&t.length;return s.createElement(s.Fragment,null,!e&&s.createElement(Vy,{__source:{fileName:Xy,lineNumber:203,columnNumber:26}}),e&&!i&&s.createElement(ly,{didSelectNewRecipient:this.setNewRecipient,isPanel:!0,typers:n,__source:{fileName:Xy,lineNumber:205,columnNumber:11}}),e&&i&&s.createElement(Ry,{to:t,typers:n.get(t),__source:{fileName:Xy,lineNumber:211,columnNumber:11}}))})),Qy(this,"togglePopup",(()=>{this.setState((e=>({isPopupOpen:!e.isPopupOpen})))})),Qy(this,"hidePopup",(()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})}))}componentDidMount(){zw.addChangeListener(this._chatChangeListener),g().locale(B.ZP.fixMomentLocale(h.Z.i18n.getUILanguage())),this._chatStoreToken=Yw.addListener(this.chatStoreListener),this.chatStoreListener(),this.guardTypingFromDroppedConnections()}componentWillUnmount(){zw.removeChangeListener(this._chatChangeListener),this._chatStoreToken.remove(),clearInterval(this.guardInterval)}render(){const{displayConversationDetail:e,displayCreateConversation:t,isConnected:n,isLoggedIn:i,isPopupOpen:r,to:a}=this.state,o=a.length>0&&i?Ow(a):"Chat";return s.createElement(s.Fragment,null,s.createElement("header",{__source:{fileName:Xy,lineNumber:246,columnNumber:9}},s.createElement("h1",{className:"chat-title",__source:{fileName:Xy,lineNumber:247,columnNumber:11}},(0,ue.Z)(o)),i&&s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Xy,lineNumber:248,columnNumber:26}},a.length>0&&!A.ZP.get(P.kChatTabMode)&&s.createElement(s.Fragment,null,s.createElement(ko,{className:"button-toolbar",onClick:this.navigateBack,image:cn.eFz.medium,title:"Back",tooltip:(0,ue.Z)("Back to Contacts"),__source:{fileName:Xy,lineNumber:252,columnNumber:17}}),s.createElement(ko,{className:"button-toolbar",onClick:this.toggleConversationDetail,title:"Info",tooltip:(0,ue.Z)("Info"),__source:{fileName:Xy,lineNumber:259,columnNumber:17}})),!a.length&&s.createElement(s.Fragment,null,s.createElement(ko,{className:"button-toolbar",onClick:this.toggleNewConversation,image:cn.md4.small,title:(0,ue.Z)("New"),tooltip:(0,ue.Z)("Create new conversation"),__source:{fileName:Xy,lineNumber:268,columnNumber:15}}),s.createElement(ko,{className:"button-toolbar",onClick:this.togglePopup,title:(0,ue.Z)("Profile"),tooltip:(0,ue.Z)("View Profile info"),hidePopup:this.hidePopup,isPopupVisible:r,popupClassName:"ChatProfilePopup ToolbarButtonPopup-DefaultStyles",popupPosition:"below",popupWidth:180,__source:{fileName:Xy,lineNumber:275,columnNumber:15}},s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:Xy,lineNumber:287,columnNumber:19}},zw.getClient().bareJid),s.createElement("p",{__source:{fileName:Xy,lineNumber:288,columnNumber:19}},Rw(zw.getClient().jid))))),!n&&s.createElement("span",{className:"chat-connection-status",onClick:this.connect,__source:{fileName:Xy,lineNumber:293,columnNumber:31}},(0,ue.Z)("Disconnected️")))),this.renderMainView(),e&&s.createElement(ln.Z,{onRequestClose:this.toggleConversationDetail,viewMode:"slide",__source:{fileName:Xy,lineNumber:305,columnNumber:13}},s.createElement(Gy,{to:a,__source:{fileName:Xy,lineNumber:308,columnNumber:15}})),t&&s.createElement(ln.Z,{onRequestClose:this.toggleNewConversation,viewMode:"slide",__source:{fileName:Xy,lineNumber:312,columnNumber:40}},s.createElement($y,{onRequestClose:this.toggleNewConversation,setNewConversation:this.setNewRecipient,__source:{fileName:Xy,lineNumber:315,columnNumber:13}})))}}const Jy=qy;var eS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\ExperimentItem.jsx";function tS({enabled:e,locked:t,fullName:n,description:i,onValueChange:r}){return s.createElement("div",{className:"setting-single",__source:{fileName:eS,lineNumber:15,columnNumber:5}},s.createElement("label",{__source:{fileName:eS,lineNumber:16,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:e,disabled:t,onChange:({currentTarget:e})=>r(e.checked),__source:{fileName:eS,lineNumber:17,columnNumber:9}}),s.createElement("span",{__source:{fileName:eS,lineNumber:23,columnNumber:9}},n)),s.createElement("p",{className:"info",__source:{fileName:eS,lineNumber:25,columnNumber:7}},i))}var nS=n(52967),sS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\Experiments.jsx";function iS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rS(){return s.createElement("div",{className:"Experiments-Caution",__source:{fileName:sS,lineNumber:12,columnNumber:5}},(0,ue.Z)("These experimental features may change, break, disappear, not work as intended or at all."),s.createElement("br",{__source:{fileName:sS,lineNumber:14,columnNumber:7}}),(0,ue.Z)("Please proceed with caution."))}class aS extends s.PureComponent{constructor(...e){super(...e),iS(this,"state",{experiments:nS.Z.getFlags()}),iS(this,"_handleChange",((e,t)=>{nS.Z.enableFeature(e,t).then((()=>this.setState({experiments:nS.Z.getFlags()})))}))}render(){return s.createElement("div",{className:"Experiments vivaldi-settings",tabIndex:"0",__source:{fileName:sS,lineNumber:39,columnNumber:7}},s.createElement("h2",{className:"Experiments-Header",__source:{fileName:sS,lineNumber:40,columnNumber:9}},(0,ue.Z)("Experimental features")),s.createElement(rS,{__source:{fileName:sS,lineNumber:42,columnNumber:9}}),s.createElement("div",{className:"setting-subgroup",__source:{fileName:sS,lineNumber:44,columnNumber:9}},this.state.experiments.map((e=>s.createElement(tS,{key:e.name,fullName:e.friendlyName,description:e.description,locked:e.locked,enabled:e.value,onValueChange:this._handleChange.bind(null,e.name),__source:{fileName:sS,lineNumber:46,columnNumber:13}})))))}}var oS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\guest-intro\\GuestIntro.jsx";const lS="https://vvld.in/guest";function cS(e){e.preventDefault(),$.Z.openURL(lS,{inCurrent:!1,inBackground:!1})}class uS extends s.Component{render(){return s.createElement("div",{className:"guest-intro",__source:{fileName:oS,lineNumber:28,columnNumber:7}},s.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:oS,lineNumber:30,columnNumber:9}},s.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:oS,lineNumber:31,columnNumber:11}})),s.createElement("div",{className:"guest-intro-content",__source:{fileName:oS,lineNumber:34,columnNumber:9}},s.createElement("h1",{__source:{fileName:oS,lineNumber:35,columnNumber:11}},(0,ue.Z)("title","Guest Profile")),s.createElement("span",{className:"guest-intro-icon",dangerouslySetInnerHTML:{__html:cn.LaO.medium},__source:{fileName:oS,lineNumber:36,columnNumber:11}}),s.createElement("p",{__source:{fileName:oS,lineNumber:43,columnNumber:11}},(0,ue.Z)("Browsing with a Guest profile means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),s.createElement("p",{__source:{fileName:oS,lineNumber:44,columnNumber:11}},s.createElement("a",{tabIndex:0,href:lS,onClick:cS,__source:{fileName:oS,lineNumber:45,columnNumber:13}},(0,ue.Z)("Learn more about Guest Profiles")))))}}const mS=uS;var dS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ConfirmationDlg.jsx";function hS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pS extends s.Component{constructor(...e){super(...e),hS(this,"onRequestClose",(()=>{this.props.onRequestClose?this.props.onRequestClose():this.props.onClose(!1)})),hS(this,"onClose",(()=>{this.props.onClose(!1)})),hS(this,"onConfirmed",(()=>{this.props.onClose(!0)}))}render(){return s.createElement(ln.Z,{viewMode:"slide",dialogWidth:this.props.dialogWidth||400,onRequestClose:this.onRequestClose,__source:{fileName:dS,lineNumber:36,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:dS,lineNumber:40,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:dS,lineNumber:41,columnNumber:11}},this.props.title)),s.createElement("div",{className:"dialog-content",tabIndex:this.props.danger?"0":null,__source:{fileName:dS,lineNumber:43,columnNumber:9}},this.props.prompt),s.createElement("footer",{className:"dialog-footer",__source:{fileName:dS,lineNumber:46,columnNumber:9}},s.createElement("input",{type:"submit",className:this.props.danger?"danger":null,value:this.props.positive,onClick:this.onConfirmed,autoFocus:!this.props.danger,__source:{fileName:dS,lineNumber:47,columnNumber:11}}),!this.props.hideNegative&&s.createElement("input",{type:"button",value:this.props.negative,onClick:this.onClose,__source:{fileName:dS,lineNumber:55,columnNumber:13}})))}}const gS=pS;var bS=n(68131),NS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\CreateLinkModal.jsx";const fS="https://";function _S({onCreateLink:e,onCancelCreateLink:t,link:n,useAddress:i}){const r=s.useRef(),a=i?n?(0,ue.Z)("Edit Address"):(0,ue.Z)("Add Address"):n?(0,ue.Z)("Edit Link"):(0,ue.Z)("Create Link");return s.createElement(ln.Z,{dialogWidth:400,onRequestClose:t,__source:{fileName:NS,lineNumber:37,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:NS,lineNumber:38,columnNumber:7}},s.createElement("h1",{className:"dialog-title",__source:{fileName:NS,lineNumber:39,columnNumber:9}},a)),s.createElement("form",{onSubmit:()=>{e(r.current?(0,As.q9)(r.current.value):fS)},__source:{fileName:NS,lineNumber:41,columnNumber:7}},s.createElement("div",{className:"dialog-content",__source:{fileName:NS,lineNumber:42,columnNumber:9}},s.createElement("input",{ref:r,defaultValue:n||fS,type:"text",autoFocus:!0,onFocus:e=>e.currentTarget.select(),__source:{fileName:NS,lineNumber:43,columnNumber:11}})),s.createElement("footer",{className:"dialog-footer",__source:{fileName:NS,lineNumber:51,columnNumber:9}},s.createElement("input",{type:"submit",className:"primary",value:(0,ue.Z)("Save Link"),__source:{fileName:NS,lineNumber:52,columnNumber:11}}),s.createElement("input",{type:"button",onClick:t,value:(0,ue.Z)("Cancel"),__source:{fileName:NS,lineNumber:53,columnNumber:11}}))))}var vS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposerToolbar.jsx";function ES(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CS=[[{command:"bold",text:(0,ue.Z)("Bold"),icon:cn.q7H},{command:"italic",text:(0,ue.Z)("Italic"),icon:cn.znb},{command:"underline",text:(0,ue.Z)("Underline"),icon:cn.slH},{command:"strikeThrough",text:(0,ue.Z)("Strike through"),icon:cn._QD}],[{command:"justifyLeft",text:(0,ue.Z)("Left align"),icon:cn.W_c},{command:"justifyCenter",text:(0,ue.Z)("Center align"),icon:cn.vxN},{command:"justifyRight",text:(0,ue.Z)("Right align"),icon:cn.JUc},{command:"justifyFull",text:(0,ue.Z)("Justify"),icon:cn.FsT}],[{command:"insertOrderedList",text:(0,ue.Z)("Numbered list"),icon:cn.o_D},{command:"insertUnorderedList",text:(0,ue.Z)("Bullet list"),icon:cn.rr$}],[{command:"outdent",text:(0,ue.Z)("Remove indentation"),icon:cn.XKb},{command:"indent",text:(0,ue.Z)("Indent"),icon:cn.b2r}],[{command:"createLink",text:(0,ue.Z)("Create Link"),icon:cn.v2I},{command:"insertImage",text:(0,ue.Z)("Insert Image"),icon:cn.kkq}],[{command:"undo",text:(0,ue.Z)("win_linux","Undo"),icon:cn.LwO},{command:"redo",text:(0,ue.Z)("win_linux","Redo"),icon:cn.W9w}],[{command:"removeFormat",text:(0,ue.Z)("Remove formatting"),icon:cn.mHT}]];class wS extends s.Component{constructor(...e){super(...e),ES(this,"state",{anchor:"",link:"",buttonState:[],createLinkModalOpen:!1,formatBlock:"p",fontName:"sans-serif",fontSize:"2",foreColor:"#111111",backColor:"#f6f6f6"}),ES(this,"updateButtonState",(e=>{const t=CS.flat().map((e=>e.command)).indexOf("createLink"),n=e&&e[0]||[];n[t]=Boolean(this.state.link||this.state.anchor),this.setState({buttonState:n})})),ES(this,"updateDropdownAndColorState",(e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])){const[t,n,s,i,r]=e[0];this.setState({formatBlock:""===t||"div"===t?"p":t,fontName:n.startsWith('"')&&n.endsWith('"')?n.substring(1,n.length-1):n,fontSize:s,foreColor:"rgb(0, 0, 0)"===i?"#111111":to()(i).hex(),backColor:"rgba(0, 0, 0, 0)"===r?"#f6f6f6":to()(r).hex()})}})),ES(this,"updateLinkState",(e=>{this.setState((t=>{if(t.anchor!==e)return{anchor:e}}))})),ES(this,"onCreateLink",(e=>{this.setState({createLinkModalOpen:!1}),this.props.onCreateLink(e)})),ES(this,"onCancelCreateLink",(()=>{this.setState({createLinkModalOpen:!1}),this.props.onCancelCreateLink()})),ES(this,"showCreateLinkModal",(()=>this.setState({createLinkModalOpen:!0})))}render(){let e=0;return s.createElement("div",{className:"editor-html-toolbar",__source:{fileName:vS,lineNumber:232,columnNumber:7}},this.state.createLinkModalOpen&&s.createElement(_S,{onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,link:this.state.link||this.state.anchor,__source:{fileName:vS,lineNumber:234,columnNumber:11}}),s.createElement("select",{onChange:e=>this.props.onChange("formatBlock",e),value:this.state.formatBlock,title:(0,ue.Z)("Paragraph Format"),tabIndex:"-1",__source:{fileName:vS,lineNumber:240,columnNumber:9}},s.createElement("option",{value:"h1",__source:{fileName:vS,lineNumber:246,columnNumber:11}},(0,ue.Z)("Heading 1")),s.createElement("option",{value:"h2",__source:{fileName:vS,lineNumber:247,columnNumber:11}},(0,ue.Z)("Heading 2")),s.createElement("option",{value:"h3",__source:{fileName:vS,lineNumber:248,columnNumber:11}},(0,ue.Z)("Heading 3")),s.createElement("option",{value:"h4",__source:{fileName:vS,lineNumber:249,columnNumber:11}},(0,ue.Z)("Heading 4")),s.createElement("option",{value:"p",__source:{fileName:vS,lineNumber:250,columnNumber:11}},(0,ue.Z)("Paragraph")),s.createElement("option",{value:"pre",__source:{fileName:vS,lineNumber:251,columnNumber:11}},(0,ue.Z)("Preformatted")),s.createElement("option",{value:"blockquote",__source:{fileName:vS,lineNumber:252,columnNumber:11}},(0,ue.Z)("Quote"))),s.createElement("select",{onChange:e=>this.props.onChange("fontName",e),value:this.state.fontName,title:(0,ue.Z)("Font"),tabIndex:"-1",__source:{fileName:vS,lineNumber:254,columnNumber:9}},s.createElement("option",{value:"serif",__source:{fileName:vS,lineNumber:260,columnNumber:11}},(0,ue.Z)("Serif")),s.createElement("option",{value:"sans-serif",__source:{fileName:vS,lineNumber:261,columnNumber:11}},(0,ue.Z)("Sans-Serif")),s.createElement("option",{value:"monospace",__source:{fileName:vS,lineNumber:262,columnNumber:11}},(0,ue.Z)("Fixed Width"))),s.createElement("select",{onChange:e=>this.props.onChange("fontSize",e),value:this.state.fontSize,title:(0,ue.Z)("Font Size"),tabIndex:"-1",__source:{fileName:vS,lineNumber:264,columnNumber:9}},s.createElement("option",{value:"1",__source:{fileName:vS,lineNumber:270,columnNumber:11}},(0,ue.Z)("Extra Small")),s.createElement("option",{value:"2",__source:{fileName:vS,lineNumber:271,columnNumber:11}},(0,ue.Z)("mail","Small")),s.createElement("option",{value:"3",__source:{fileName:vS,lineNumber:272,columnNumber:11}},(0,ue.Z)("Normal")),s.createElement("option",{value:"4",__source:{fileName:vS,lineNumber:273,columnNumber:11}},(0,ue.Z)("mail","Large")),s.createElement("option",{value:"5",__source:{fileName:vS,lineNumber:274,columnNumber:11}},(0,ue.Z)("Larger")),s.createElement("option",{value:"6",__source:{fileName:vS,lineNumber:275,columnNumber:11}},(0,ue.Z)("Extra Large"))),s.createElement("input",{type:"color",tabIndex:"-1",className:"text-color",title:(0,ue.Z)("Text Color"),value:this.state.foreColor,onChange:e=>this.props.onChangeColor("foreColor",e),onFocus:()=>this.props.onFocuscolorPickerButton("foreColor"),__source:{fileName:vS,lineNumber:277,columnNumber:9}}),s.createElement("input",{type:"color",tabIndex:"-1",className:"text-bg-color",title:(0,ue.Z)("Text Background Color"),value:this.state.backColor,onChange:e=>this.props.onChangeColor("backColor",e),onFocus:()=>this.props.onFocuscolorPickerButton("backColor"),__source:{fileName:vS,lineNumber:286,columnNumber:9}}),CS.map(((t,n)=>(n>0&&(e+=CS[n-1].length),s.createElement("span",{key:n,className:"editor-button-group",__source:{fileName:vS,lineNumber:301,columnNumber:13}},t.map(((t,n)=>s.createElement("button",{key:t.command,tabIndex:"-1",onClick:()=>this.props.onClick(t.command),title:t.text,className:this.state.buttonState[e+n]?"active":null,dangerouslySetInnerHTML:{__html:t.icon},__source:{fileName:vS,lineNumber:303,columnNumber:17}}))))))))}}var yS=n(88077);function SS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TS(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,kS(e,t,"set"),n),n}function kS(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var IS=new WeakMap;class AS extends s.Component{constructor(e,t){super(e),SS(this,"refWebview",s.createRef()),IS.set(this,{writable:!0,value:void 0}),SS(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||no.Z.getFallbackStyle();e!==this.state.windowStyle&&this.setState({windowStyle:e},this.setStyle)})),SS(this,"getContentAsBodyParts",(()=>{const e=this.refWebview.current;return e?new Promise(((t,n)=>{e.executeScript({code:"document.body.innerHTML"},(e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"html",content:e[0]}]):n("RichTextEdit.getContentAsBodyParts: Couldn't get contet from Webview")}))})):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")})),SS(this,"postMessage",(e=>{this.refWebview.current?.contentWindow?.postMessage?.(e,Q.oP)})),SS(this,"setContent",((e,t)=>{this.postMessage({type:"SET_CONTENT",isPlainText:t,value:e})})),SS(this,"setStyle",(()=>{let e=no.Z.createStyleRoot(this.state.windowStyle);e+=this.props.isNote?"\n    html, body, iframe {\n      background-color: transparent;\n      padding: 0;\n      margin: 0;\n      font-family: sans-serif;\n      overflow: initial;\n    }\n    body[contenteditable=\"plaintext-only\"] {\n      font-family: monospace;\n    }\n    body {\n      --EditorPadding: 12px;\n      --MaxWidth: 700px;\n      margin-left: var(--EditorPadding);\n      padding-left: calc(calc(50% - calc(var(--MaxWidth) / 2) - var(--EditorPadding))) !important;\n      padding-right: calc(50% - calc(var(--MaxWidth) / 2)) !important;\n      padding-top: var(--EditorPadding);\n      padding-bottom: calc(var(--EditorPadding) * 3);\n      color: var(--colorFgIntense);\n      font-size: 100%;\n      cursor: text;\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    a:-webkit-any-link {\n      color: var(--colorHighlightBg);\n      cursor: pointer;\n    }\n  \n    html, body, iframe {\n      font-family: sans-serif;\n      font-size: 100%;\n    }\n    body {\n      overflow: overlay;\n    }\n    input[type=checkbox] {\n      appearance: none;\n      position: relative;\n      width: 16px;\n      height: 16px;\n      min-width: 16px;\n      min-height: 16px;\n      vertical-align: middle;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n      margin: unset;\n      border-width: 1px;\n      border-style: solid;\n      border-color: rgba(0,0,0,0.2);\n      background-color: var(--colorBgIntense);\n    }\n    input[type='checkbox']:disabled {\n      opacity: 1;\n      filter: grayscale(1);\n    }\n    input[type=checkbox]:before,\n    input[type=checkbox]:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: var(--colorHighlight);\n      transform-origin: 0 0;\n    }\n    input[type=checkbox]:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0.4);\n    }\n    input[type=checkbox]:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(1.2);\n    }\n    \n    .tooltip {\n      --TipWidth: 480px;\n      position: relative;\n    }\n    .tooltip .tooltip-text * {\n      user-select: none;\n    }\n    .tooltip-text input {\n      margin-left: 3px;\n      border: 1px solid var(--colorBorder);\n      border-radius: 2px;\n      font-size: small;\n      opacity: 0.8;\n      color: var(--colorFg);\n      background-color: var(--colorBg);\n    }\n    .tooltip-text input:active {\n      background-color: var(--colorBgDark);\n    }\n    .tooltip-text input:first-of-type {\n      margin-left: 12px;\n    }\n    .tooltip-text a {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--colorFg);\n    }\n    .tooltip .tooltip-text {\n      cursor: default;\n      position: absolute;\n      z-index: 1;\n      display: flex;\n      top: 100%;\n      left: -6px;\n      max-width: var(--TipWidth);\n      padding: 6px 6px 6px 12px;\n      color:var(--colorFg);\n      background-color: var(--colorBg);\n      border: 1px solid var(--colorBgDark);\n      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 3px 10px rgba(0, 0, 0, 0.3);\n      border-radius: 3px;\n    }\n  \n  ":function(){const e="black_on_white"===A.ZP.get(P.kMailComposerColors);return`html, body {\n      overflow: initial;\n    }\n    body {\n      margin: 12px 24px 24px;\n      font-family: sans-serif;\n      font-size: 100%;\n      color: ${e?"black;":"var(--colorFgIntense)"};\n      background-color: ${e?"white;":"var(--colorBgIntense)"};\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    blockquote {\n      padding-inline-start: 18px;\n      border-left: 3px solid inherit;\n      margin: 0;\n      opacity: 0.85;\n    }\n    pre {\n      white-space: pre-wrap;\n    }\n    \n    .tooltip {\n      --TipWidth: 480px;\n      position: relative;\n    }\n    .tooltip .tooltip-text * {\n      user-select: none;\n    }\n    .tooltip-text input {\n      margin-left: 3px;\n      border: 1px solid var(--colorBorder);\n      border-radius: 2px;\n      font-size: small;\n      opacity: 0.8;\n      color: var(--colorFg);\n      background-color: var(--colorBg);\n    }\n    .tooltip-text input:active {\n      background-color: var(--colorBgDark);\n    }\n    .tooltip-text input:first-of-type {\n      margin-left: 12px;\n    }\n    .tooltip-text a {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--colorFg);\n    }\n    .tooltip .tooltip-text {\n      cursor: default;\n      position: absolute;\n      z-index: 1;\n      display: flex;\n      top: 100%;\n      left: -6px;\n      max-width: var(--TipWidth);\n      padding: 6px 6px 6px 12px;\n      color:var(--colorFg);\n      background-color: var(--colorBg);\n      border: 1px solid var(--colorBgDark);\n      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 3px 10px rgba(0, 0, 0, 0.3);\n      border-radius: 3px;\n    }\n  `}(),this.postMessage({type:"SET_STYLE",isNote:this.props.isNote,style:e}),this.contentLoadHandled=!1})),SS(this,"debouncedUpdateState",(0,za.Z)((()=>{this.props.updateButtonState(),this.props.updateDropdownAndColorState()}),100)),SS(this,"handleConsoleMessage",(e=>{const[t,n=""]=e.message.split(" ",2);switch(t){case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"linkupdate":case"createLink":case"editLink":case"copyLink":case"unlink":this.props.handleLinkEvent(t,n);break;default:throw new Error(e.message)}})),SS(this,"handleLinkClicked",(e=>{e.targetUrl.startsWith("#")||($.Z.openURL(e.targetUrl),e.preventDefault())})),SS(this,"handleContentLoad",(()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(),this.props.onContentLoad&&this.props.onContentLoad())})),SS(this,"keyEventListener",((e,t,n,s,i)=>{1===n&&t&&s===$s.Z.KEY_TAB&&document.activeElement&&document.activeElement===this.refWebview.current&&this.props.focusPreviousElement()})),SS(this,"execCommand",((e,t)=>{this.postMessage({type:"EXEC_COMMAND",command:e,value:t}),setTimeout((()=>this.refWebview.current?.focus()),0)})),SS(this,"onChange",((e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownAndColorState()})),SS(this,"onClick",(e=>{switch(e){case"createLink":this.props.handleLinkEvent("createLinkClicked");break;case"insertImage":this.insertImage();break;default:this.execCommand(e,""),this.props.updateButtonState()}})),SS(this,"insertImage",(()=>{h.Z.fileSystem.chooseEntry({type:"openFile",accepts:[{mimeTypes:["image/*"]}]},(e=>{!h.Z.runtime.lastError&&e&&e.file((t=>{const n=URL.createObjectURL(t);this.execCommand("insertHTML",`<img src="${n}" ${yS.ZR}="${t.type}" ${yS.Gx}="${e.name}" />`)}))}))})),SS(this,"unlink",(()=>{this.execCommand("unlink",!1)})),SS(this,"selectSurrounding",(()=>{this.postMessage({type:"SELECT_SURROUNDING"})})),SS(this,"setZoomLevel",(e=>{const t=this.refWebview.current;t&&(t.setZoomMode("per-view"),t.setZoom(e))})),SS(this,"executeScript",(e=>new Promise(((t,n)=>{this.refWebview.current?this.refWebview.current.executeScript(e,t):n()}))));const n=Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||no.Z.getFallbackStyle();this.state={windowStyle:n}}componentDidMount(){TS(this,IS,Z.Z.addListener(this.onThemeStoreChanged)),this.refWebview.current?.addEventListener("consolemessage",this.handleConsoleMessage),this.refWebview.current?.addEventListener("contentload",this.handleContentLoad),this.refWebview.current?.addEventListener("newwindow",this.handleLinkClicked),b.Z.tabsPrivate.onKeyboardChanged.addListener(this.keyEventListener)}componentWillUnmount(){var e,t;(e=this,t=IS,function(e,t){return t.get?t.get.call(e):t.value}(e,kS(e,t,"get"))).remove(),this.refWebview.current?.removeEventListener("consolemessage",this.handleConsoleMessage),this.refWebview.current?.removeEventListener("contentload",this.handleContentLoad),this.refWebview.current?.removeEventListener("newwindow",this.handleLinkClicked),b.Z.tabsPrivate.onKeyboardChanged.removeListener(this.keyEventListener)}focus(){return this.refWebview.current?.focus()}hasFocus(){return!!this.refWebview.current&&this.refWebview.current===document.activeElement}render(){return s.createElement("webview",{className:"editor-webview",name:"richtexteditor",ref:this.refWebview,style:this.props.hidden||this.props.disabled?{display:"none"}:{},allowtransparency:"on",src:"components/notes/richtexteditor/richtexteditor.html",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RichTextEditor.jsx",lineNumber:274,columnNumber:7}})}}function ZS(e,t){const{document:n,vivaldiWindowId:i,Element:r}=(0,s.useContext)(Vs.Z),[a,o]=(0,s.useState)(!1),l=(0,s.useCallback)((e=>{e.dataTransfer.types.includes("Files")&&(e.preventDefault(),o(!0))}),[]),c=(0,s.useCallback)((e=>{if(!(e.target instanceof r))return;let t=e.target;for(;t&&t!==e.currentTarget;){if("file-dropzone"===t.className){e.preventDefault(),o(!1);break}t=t.parentElement}}),[r]),u=(0,s.useCallback)((t=>{const n=[...t.dataTransfer.items].filter((e=>"file"===e.kind)).map((e=>e.getAsFile()));n.length>0&&(t.preventDefault(),e(n))}),[e]),m=function(e){const[t,n]=(0,s.useState)(e.getState());return(0,s.useEffect)((()=>{const t=e.addListener((()=>n(e.getState())));return()=>t.remove()}),[e]),t}(W.ZP).get(i)?.active;return(0,s.useEffect)((()=>{const e=t?.current;m||(e?.style.setProperty("pointer-events","none"),n.addEventListener("mouseover",(function t(s){n.removeEventListener("mouseover",t),o(!1),e?.style.removeProperty("pointer-events")})))}),[m,n,t]),[a,{onDragLeave:c,onDragOver:l,onDrop:u}]}SS(AS,"contextType",Vs.Z),SS(AS,"defaultProps",{hidden:!1});var PS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposerEditor.jsx";function DS(){return DS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},DS.apply(this,arguments)}const MS=(0,s.forwardRef)(((e,t)=>{const n=(0,s.useRef)(null),i=(0,s.useRef)(null),r=(0,s.useRef)("");function a(){const e=n.current?.refWebview.current;e&&e.executeScript({code:"['formatBlock', 'fontName', 'fontSize', 'foreColor', 'backColor'].map(\n         command => document.queryCommandValue(command));"},(e=>{i.current&&i.current.updateDropdownAndColorState(e)}))}(0,s.useImperativeHandle)(t,(()=>({focus:()=>{n.current&&n.current.focus()},getContentAsBodyParts:()=>{if(!n.current)throw new Error("MailComposer: Building body parts after body is gone");return n.current.getContentAsBodyParts()},setContent:(e,t)=>{n.current?.setContent(e,t)}})),[]);const[o,l]=(c=n.current?.refWebview,ZS((0,s.useCallback)((async e=>{const t=[];for(const n of e){let e;try{e=await n.arrayBuffer()}catch(e){console.error("useAttachmentDrop: "+e.toString()),X.Z.setStatus(e.toString());continue}t.push({type:"attachment",content:new Uint8Array(e),filename:n.name,mimeType:n.type})}Ad.addAttachments(t)}),[]),c));var c;return s.createElement("div",DS({className:"editor-html"},l,{__source:{fileName:PS,lineNumber:180,columnNumber:5}}),s.createElement(wS,{ref:i,onClick:function(e){n.current&&n.current.onClick(e)},onCreateLink:function(e){const t=n.current;t&&(""===e?t.execCommand("unlink"):"https://"!==e&&t.execCommand("createLink",e),t.focus())},onCancelCreateLink:function(){n.current&&n.current.focus()},onChange:function(e,t){n.current&&n.current.execCommand(e,t.currentTarget.value),a()},onChangeColor:function(e,t){{const s=n.current;s&&(s.refWebview.current?.focus(),s.execCommand(e,t.currentTarget.value))}},onFocuscolorPickerButton:function(e){const t=n.current;r.current&&t&&(t.focus(),t.execCommand(e,r.current),r.current="")},__source:{fileName:PS,lineNumber:184,columnNumber:7}}),o&&s.createElement("div",{className:"file-dropzone",__source:{fileName:PS,lineNumber:194,columnNumber:9}},s.createElement("h1",{__source:{fileName:PS,lineNumber:195,columnNumber:11}},(0,ue.Z)("Drop file(s) here"))),s.createElement(AS,{ref:n,onChange:e.onBodyChange,onContentLoad:e.onContentLoad,focusPreviousElement:e.focusPreviousElement,updateDropdownAndColorState:a,updateButtonState:function(){const e=n.current?.refWebview.current,t='"'+CS.flat().map((e=>e.command)).join('","')+'"';e&&e.executeScript({code:`[${t}].map(command => document.queryCommandState(command));`},(e=>{i.current&&i.current.updateButtonState(e)}))},handleLinkEvent:function(e,t){const s=i.current;if(!s)return;const{link:r,anchor:a}=s.state;switch(e){case"linkupdate":s.updateLinkState(t||"");break;case"createLink":case"editLink":s.showCreateLinkModal();break;case"copyLink":break;case"unlink":(r||a)&&n.current&&n.current.unlink();break;case"createLinkClicked":(r||a)&&n.current&&n.current.selectSurrounding(),s.showCreateLinkModal()}},__source:{fileName:PS,lineNumber:198,columnNumber:7}}))}));var OS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MultiInput.jsx";function xS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class LS extends s.Component{constructor(e){super(e),xS(this,"refMultiInputOptions",{}),xS(this,"selectionModel",new Qp),xS(this,"onKeyArrowUp",(()=>{const e=this.selectionModel.leadIndex;e>0&&(this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(e-1,!0),this.forceUpdate())})),xS(this,"onKeyArrowDown",(()=>{const e=this.selectionModel.leadIndex;e<this.state.filteredList.length-1&&(this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(e+1,!0),this.forceUpdate())})),xS(this,"resetSelectionModel",(()=>{this.selectionModel.resetSelectionModel(),this.forceUpdate()})),xS(this,"tokenize",((e,t)=>{const n=/[\S]+/g;let s=[];if(e&&(s=s.concat(e.match(n)||[])),t){const e=t.match(/[^@.+]+/g)||[];s=s.concat([...e,...t.split("@"),t])}return new Set(s.map((e=>e.toLowerCase())))})),xS(this,"filterItems",(e=>{const t=mo()(1)(((e,t)=>{const n=new Map(e);return t.forEach((({address:e,name:t})=>{n.has(e)&&n.delete(e)})),n}))(this.props.allItems,this.props.selectedItems);return mo()(1)(((e,t)=>{const n=[];for(const[s,i]of t){(0===i.size?new Set([""]):i).forEach((t=>{if(e.length>0){const i=this.tokenize(e),r=this.tokenize(t,s);wc(i,r)&&n.push({address:s,name:t})}else n.push({address:s,name:t})}))}return this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(0,!0),n}))(e,t)})),xS(this,"inputChanged",(()=>{const e=this.refInputField?this.refInputField.value:"",t=this.filterItems(e);let n=!0;0!==e.length&&0!==t.length||(n=!1);const s=this.props.setIsValidInput;if(s){let t=!1;if(e.trim().length>0){const n=(0,fe.D$)(e);if(n.length>0){const e=n[0];(0,fe.HZ)(e.address)&&(t=!0)}}s(t)}this.setState({inputValue:e,filteredList:t,dropDownVisible:n})})),xS(this,"onOptionClick",(e=>{this.selectOption(e)})),xS(this,"onItemClick",(e=>{this.removeOption(e)})),xS(this,"removeOption",(0,za.Z)((e=>{const t=this.props.selectedItems,[n]=t.splice(e,1);this.setState({inputValue:(0,fe.li)(n)},(()=>this.refInputField&&this.refInputField.select())),this.props.itemSelectionCallback(t)}))),xS(this,"inputConfirmed",(e=>{let t=!1;if(e&&e.value&&e.value.trim().length>0){let n="";const s=this.props.selectedItems,i=(0,fe.D$)(e.value);for(;i.length>0;){const e=i.shift();if(!(0,fe.HZ)(e.address)){i.unshift(e),n=(0,fe.Rz)(i);break}s.push(e),t=!0}t&&(this.setState({inputValue:n,dropDownVisible:!1}),this.props.itemSelectionCallback(s))}return t})),xS(this,"selectOption",(e=>{this.selectionModel.resetSelectionModel(),this.setState(((t,n)=>{const s=[...n.selectedItems,e];return n.itemSelectionCallback(s),{inputValue:"",dropDownVisible:!1}}))})),xS(this,"inputKeyDown",(e=>{const t=e.keyCode,n=!this.refInputField||0===this.refInputField.value.trim().length,s=this.props.selectedItems,i=this.state.filteredList[this.selectionModel.leadIndex],r=t===$s.Z.KEY_TAB||t===$s.Z.KEY_RETURN;r||","===e.key?n||(void 0!==i&&r?(this.selectOption(i),e.preventDefault()):this.inputConfirmed(this.refInputField)&&e.preventDefault(),e.stopPropagation()):n&&t===$s.Z.KEY_BACK_SPACE&&s.length>0?(this.removeOption(s.length-1),e.preventDefault()):t===$s.Z.KEY_ESCAPE?(n||e.stopPropagation(),this.setState({inputValue:"",dropDownVisible:!1})):this.state.dropDownVisible&&t===$s.Z.KEY_DOWN?(this.onKeyArrowDown(),e.preventDefault()):this.state.dropDownVisible&&t===$s.Z.KEY_UP&&(this.onKeyArrowUp(),e.preventDefault())})),xS(this,"inputLostFocus",(e=>{this.inputConfirmed(this.refInputField),this.setState({dropDownVisible:!1})})),xS(this,"itemKeyDown",((e,t)=>{const n=t.keyCode;this.refInputField&&e===this.props.selectedItems.length-1&&this.refInputField.focus(),n!==$s.Z.KEY_BACK_SPACE&&n!==$s.Z.KEY_DELETE||this.removeOption(e)})),xS(this,"renderSelectedItem",((e,t)=>{let n="";return e.address?n=e.address:"string"==typeof e&&(n=e),s.createElement("button",{key:"selected_item_"+t,title:n,onKeyDown:this.itemKeyDown.bind(this,t),onClick:this.onItemClick.bind(this,t),className:bn()("multiinput-item",this.props.className),tabIndex:this.props.tabIndex?this.props.tabIndex:0,__source:{fileName:OS,lineNumber:283,columnNumber:7}},e.name&&s.createElement("span",{className:"multiinput-item-primary",__source:{fileName:OS,lineNumber:293,columnNumber:11}},e.name),e.address&&s.createElement("span",{className:"multiinput-item-secondary",__source:{fileName:OS,lineNumber:299,columnNumber:11}},"<"+e.address+">"),"string"==typeof e&&s.createElement("span",{className:"multiinput-item-primary",__source:{fileName:OS,lineNumber:305,columnNumber:11}},e))})),xS(this,"focus",(()=>{this.refInputField&&this.refInputField.focus()})),xS(this,"renderMailAddressForOption",(e=>s.createElement("div",{__source:{fileName:OS,lineNumber:320,columnNumber:5}},e.name?s.createElement(s.Fragment,{__source:{fileName:OS,lineNumber:322,columnNumber:9}},s.createElement("div",{className:"multiinput-option-primary",__source:{fileName:OS,lineNumber:323,columnNumber:11}},e.name),s.createElement("div",{className:"multiinput-option-secondary",__source:{fileName:OS,lineNumber:326,columnNumber:11}},"<"+e.address+">")):s.createElement("div",{className:"multiinput-option-primary",__source:{fileName:OS,lineNumber:331,columnNumber:9}},e.address)))),xS(this,"renderInputField",(()=>s.createElement("input",{type:"text",ref:e=>this.refInputField=e,value:this.state.inputValue,onChange:this.inputChanged,onBlur:this.inputLostFocus,onKeyDown:this.inputKeyDown,autoComplete:"false",spellCheck:"false",placeholder:this.props.placeholder,tabIndex:this.props.tabIndex?this.props.tabIndex:0,__source:{fileName:OS,lineNumber:340,columnNumber:7}}))),xS(this,"renderOption",((e,t)=>{const n=this.selectionModel.isSelected(t);return s.createElement("div",{className:"multiinput-option",key:"option_"+t,ref:e=>this.refMultiInputOptions["option_"+t]=e,role:"option","data-id":t,"data-selected":n?"":null,onClick:this.onOptionClick.bind(this,e),__source:{fileName:OS,lineNumber:358,columnNumber:7}},this.renderMailAddressForOption(e))})),xS(this,"renderDropDown",(()=>s.createElement("div",{role:"listbox",className:"multiinput-select",__source:{fileName:OS,lineNumber:372,columnNumber:7}},this.state.filteredList.map(this.renderOption)))),this.state={filteredList:[],inputValue:"",dropDownVisible:!1}}render(){return s.createElement("div",{ref:e=>this.refMultiInputEnvelope=e,className:"multiinput",__source:{fileName:OS,lineNumber:380,columnNumber:7}},this.props.selectedItems.map(this.renderSelectedItem),s.createElement("div",{className:"multiinput-group",ref:this.refs.ref,__source:{fileName:OS,lineNumber:383,columnNumber:9}},this.renderInputField(),this.state.dropDownVisible?this.renderDropDown():""))}}const RS=LS;var BS=n(32140);const FS=(0,ue.Z)("Sent with Vivaldi Mail. Download Vivaldi for free at vivaldi.com");var US=n(38470),VS=n(34155),HS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposer.jsx";function WS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zS=[P.kKeyboardTabToAll,P.kMailAccounts,P.kMailComposeHeadersHidden];function GS(e,t,n){let s="";if(0===e.length)return s;const i=e[0].address,r=t.find((e=>e.MAIL_EMAIL===i));return r?(void 0===r.signature?s=FS:""!==r.signature&&(s=r.signature),n||(s=s.replace(/\n/g,"<br>")),s):s}class KS extends s.PureComponent{constructor(e){super(e),WS(this,"draftCreated",!1),WS(this,"refBody",s.createRef()),WS(this,"refSubject",s.createRef()),WS(this,"messageId",(0,BS.Z)()),WS(this,"draftIsPlaintext",!1),WS(this,"cidAttachments",[]),WS(this,"focusOnBody",!1),WS(this,"_initDraft",(()=>{const e=this.props.prefValues[P.kMailAccounts],t={from:e.length>0?[{address:e[0].MAIL_EMAIL}]:[],to:[],cc:[],bcc:[],subject:"",attachments:[],mailAddresses:ra.Z.getMailAddresses(),showModal:!1},n=this.props.mailto&&!this.props.id?(0,ne.J)(this.props.mailto):bS.Z.get();if(!n)return this.sentDate=Date.now(),this.draftIsPlaintext=!0,this.bodyDraft=GS(t.from,e,this.draftIsPlaintext),this.bodyDraft&&(this.bodyDraft=(0,US.Kb)(this.draftIsPlaintext)+this.bodyDraft),t;this.sentDate=n.sentDate,this.threadKey=n.threadKey,this.references=n.references,this.messageId=n.messageId,this.cidAttachments=n.cidAttachments||[],this.inReplyTo=n.inReplyTo,this.forwarded=n.forwarded,this.replied=n.replied,this.draftIsPlaintext=n.plaintext,this.focusOnBody=n.focusOnBody,this.selectedAccount=n.selectedAccount,t.attachments=n.attachments,t.bcc=n.bcc,t.cc=n.cc,t.from=n.from,t.subject=n.subject,t.to=n.to;const s=GS(t.from,e,this.draftIsPlaintext);return this.bodyDraft=(0,US.tb)(n.body,s,this.draftIsPlaintext),t})),WS(this,"_setIfActive",(e=>{e.isActive?(this._bind(),VS.nextTick((()=>Ad.setActiveMailComposer(this)))):(this._unbind(),VS.nextTick((()=>Ad.clearActiveMailComposer(this))),this.flushPendingChanges())})),WS(this,"_contactsChanged",(()=>{const e=ra.Z.getMailAddresses();this.setState({mailAddresses:e})})),WS(this,"_showModal",(e=>{"noRecipients"===e&&this.setState({showModal:!0})})),WS(this,"_hideModal",(()=>{this.setState({showModal:!1})})),WS(this,"onContentLoad",(()=>{this.bodyDraft&&setTimeout((()=>{""!==this.bodyDraft&&this.refBody.current&&this.refBody.current.setContent(this.bodyDraft,this.draftIsPlaintext),this.bodyDraft="",this.draftIsPlaintext=!1}),150)})),WS(this,"_updateSignature",((e,t)=>{const n=this.props.prefValues[P.kMailAccounts],s=GS(t,n,!1),i=GS(e,n,!1);if(!s&&!i)return;const r=this.refBody.current;r&&r.getContentAsBodyParts().then((e=>{const{content:t}=e[0],n=(0,US.tb)(t,i);r.setContent(n,!1)}))})),WS(this,"buildMessage",(()=>this.refBody.current?this.refBody.current.getContentAsBodyParts().then(this.processBodyParts).then((e=>({from:this.state.from,to:this.state.to,cc:this.state.cc,bcc:this.state.bcc,subject:this.state.subject,sentDate:this.sentDate,threadKey:this.threadKey,bodyParts:e,flags:["\\Seen"],inReplyTo:this.inReplyTo,replied:this.replied,forwarded:this.forwarded,...this.references?{references:this.references}:null,internal:!0,messageId:this.messageId,queued:!1}))):Promise.reject())),WS(this,"_createDraftMessage",(e=>(0,yt.Z)(he.of,he.Wb,he.kY,[e],{filteringPriority:he.Un.HIGH}).then((e=>{if(this.threadKey=e[0].threadKey,this._isMounted){const t=`${this.props.url}&query={"id":${e[0].id}}`;h.Z.tabs.update(this.props.id,{url:t})}K.Z.updateIndex({addedSles:e}),me.Z.filter(),ee.Z.updateThreads()})))),WS(this,"updateAttribute",(e=>this.props.id?e(this.props.id):this.draftCreated?Promise.resolve():(this.draftCreated=!0,this.buildMessage().then(this._createDraftMessage)))),WS(this,"updateBody",(0,vb.default)((e=>this.updateAttribute((async t=>{await function(e,t){return St.Z.messages.update(e,{bodyParts:t})}(t,e),this.updateIndex(t,{attachment:(0,US.tZ)(e)})}))),5e3,{leading:!1})),WS(this,"processBodyParts",(e=>{if("html"===e[0].type){const{blobFreeHTML:t,cidsInUse:n,newImages:s}=(0,yS.o6)(e[0].content),i=this.cidAttachments.filter((e=>e.id&&n.includes("cid:"+e.id)));return e[0].content=t,Promise.all(s.map((({dataOrBlobUrl:e,cid:t,mimeType:n,filename:s})=>fetch(e).then((e=>e.arrayBuffer())).then((e=>({type:"attachment",content:new Uint8Array(e),filename:s,id:t,mimeType:n})))))).then((t=>e.concat(this.state.attachments,i,t)))}return Promise.resolve(e.concat(this.state.attachments))})),WS(this,"onBodyChange",(()=>this._isMounted&&this.refBody.current?.getContentAsBodyParts?this.refBody.current.getContentAsBodyParts().then(this.processBodyParts).then(this.updateBody):Promise.reject())),WS(this,"flushPendingChanges",(async()=>{await this.toSelected.flush(),await this.ccSelected.flush(),await this.bccSelected.flush(),await this.subjectChange.flush(),await this.updateBody.flush()})),WS(this,"cancelPendingChanges",(()=>{this.toSelected.cancel(),this.ccSelected.cancel(),this.bccSelected.cancel(),this.subjectChange.cancel(),this.updateBody.cancel()})),WS(this,"updateIndex",((e,t)=>{if(!this.threadKey)throw new Error("MailComposer: Trying to update an unsaved draft");const n=[{id:e,updates:t}];K.Z.updateIndex({sleUpdates:n})})),WS(this,"fromChange",(e=>{this.selectedAccount=this.props.prefValues[P.kMailAccounts].find((t=>t.MAIL_EMAIL===e.target.value));const t=this.state;this.setState({from:this.selectedAccount?[{name:this.selectedAccount.MAIL_NAME,address:this.selectedAccount.MAIL_EMAIL}]:[]},(()=>(this._updateSignature(this.state.from,t.from),this.updateAttribute((async e=>{await function(e,t){return St.Z.transaction("rw",[St.Z.messages,St.Z.searchList],(()=>{St.Z.searchList.update(e,{from:t}),St.Z.messages.update(e,{from:t})}))}(e,this.state.from),this.updateIndex(e,{from:this.state.from})}))))),this.selectedAccount&&(this.messageId=(0,BS.Z)(this.selectedAccount.MAIL_EMAIL))})),WS(this,"toSelected",(0,vb.default)((()=>this.updateAttribute((async e=>{await function(e,t){return St.Z.transaction("rw",[St.Z.messages,St.Z.searchList],(()=>{St.Z.searchList.update(e,{to:t}),St.Z.messages.update(e,{to:t})}))}(e,this.state.to),this.updateIndex(e,{to:this.state.to})}))),5e3,{leading:!1})),WS(this,"onToSelected",(e=>{this.setState({to:[...e]},(()=>this.toSelected()))})),WS(this,"ccSelected",(0,vb.default)((()=>this.updateAttribute((e=>function(e,t){return St.Z.transaction("rw",[St.Z.messages,St.Z.searchList],(()=>{St.Z.searchList.update(e,{cc:t}),St.Z.messages.update(e,{cc:t})}))}(e,this.state.cc)))),5e3,{leading:!1})),WS(this,"onCcSelected",(e=>{this.setState({cc:[...e]},(()=>this.ccSelected()))})),WS(this,"bccSelected",(0,vb.default)((()=>this.updateAttribute((e=>function(e,t){return St.Z.messages.update(e,{bcc:t})}(e,this.state.bcc)))),5e3,{leading:!1})),WS(this,"onBccSelected",(e=>{this.setState({bcc:[...e]},(()=>this.bccSelected()))})),WS(this,"subjectChange",(0,vb.default)((()=>this.updateAttribute((async e=>{await function(e,t){return St.Z.transaction("rw",[St.Z.messages,St.Z.searchList],(()=>{St.Z.searchList.update(e,{subject:t}),St.Z.messages.update(e,{subject:t})}))}(e,this.state.subject),this.updateIndex(e,{subject:this.state.subject})}))),5e3,{leading:!1})),WS(this,"onSubjectChange",(e=>{this.setState({subject:e.target.value},(()=>this.subjectChange()))})),WS(this,"focusSubject",(()=>{this.refSubject.current&&this.refSubject.current.focus()})),WS(this,"removeAttachment",(e=>{this.setState((t=>({attachments:t.attachments.filter(((t,n)=>n!==e))})),(()=>this.updateAttribute(this.onBodyChange)))})),WS(this,"_queueMessage",(()=>{Ad.queueMessage(!1)})),WS(this,"_bind",(()=>{Wl.Z.bind("mod+enter",Ad.sendMessage),Wl.Z.bind("mod+shift+enter",this._queueMessage)})),WS(this,"_unbind",(()=>{Wl.Z.unbind("mod+enter",Ad.sendMessage),Wl.Z.unbind("mod+shift+enter",this._queueMessage)})),WS(this,"_onContextMenu",((e,t)=>{const n=[{handler:this.removeAttachment.bind(this,e),...(0,Mn.Z)("mail","Remove")}];(0,Hs.Z)(this.context.vivaldiWindowId,n)(t)})),this.state=this._initDraft()}componentDidMount(){this._isMounted=!0,this._setIfActive(this.props),yd.addChangeListener(this._showModal),ra.Z.addChangeListener(this._contactsChanged),this.focusOnBody&&this.refBody.current?this.refBody.current.focus():this.refs.to&&this.refs.to.focus();const{id:e}=this.props;e&&VS.nextTick((async()=>{if(await ne.Z.prepareDraft(e)&&this._isMounted){const e=this._initDraft();this.setState(e,this.onContentLoad)}}))}UNSAFE_componentWillReceiveProps(e){e.isActive!==this.props.isActive&&this._setIfActive(e)}componentWillUnmount(){this._isMounted=!1,this._unbind(),yd.removeChangeListener(this._showModal),ra.Z.removeChangeListener(this._contactsChanged),VS.nextTick((()=>Ad.clearActiveMailComposer(this))),this.flushPendingChanges()}render(){const{from:e,to:t,cc:n,bcc:i,subject:r,attachments:a}=this.state,o=this.props.prefValues[P.kMailComposeHeadersHidden];return s.createElement("div",{id:"mail_composer",__source:{fileName:HS,lineNumber:555,columnNumber:7}},s.createElement("header",{__source:{fileName:HS,lineNumber:556,columnNumber:9}},!o.includes("from")&&s.createElement("div",{__source:{fileName:HS,lineNumber:558,columnNumber:11}},s.createElement("label",{htmlFor:"from",__source:{fileName:HS,lineNumber:559,columnNumber:13}},(0,ue.Z)("sender","From")),s.createElement("div",{className:"headerItemWrapper",__source:{fileName:HS,lineNumber:560,columnNumber:13}},s.createElement("select",{ref:"from",id:"from",onChange:this.fromChange,value:e.length>0?e[0].address:"",__source:{fileName:HS,lineNumber:561,columnNumber:15}},this.props.prefValues[P.kMailAccounts].map(((e,t)=>s.createElement("option",{key:t,value:e.MAIL_EMAIL,__source:{fileName:HS,lineNumber:566,columnNumber:21}},(e.MAIL_NAME?e.MAIL_NAME:"")+" ("+e.MAIL_EMAIL+")")))))),s.createElement("div",{__source:{fileName:HS,lineNumber:576,columnNumber:11}},s.createElement("label",{htmlFor:"to",__source:{fileName:HS,lineNumber:577,columnNumber:13}},(0,ue.Z)("To")),s.createElement("div",{className:"headerItemWrapper",__source:{fileName:HS,lineNumber:578,columnNumber:13}},s.createElement(RS,{ref:"to",id:"to",selectedItems:t,allItems:this.state.mailAddresses,itemSelectionCallback:this.onToSelected,__source:{fileName:HS,lineNumber:579,columnNumber:15}}))),(n.length>0||!o.includes("cc"))&&s.createElement("div",{__source:{fileName:HS,lineNumber:587,columnNumber:11}},s.createElement("label",{htmlFor:"cc",title:(0,ue.Z)("Carbon copy"),__source:{fileName:HS,lineNumber:588,columnNumber:13}},(0,ue.Z)("Cc")),s.createElement("div",{className:"headerItemWrapper",__source:{fileName:HS,lineNumber:589,columnNumber:13}},s.createElement(RS,{id:"cc",selectedItems:n,allItems:this.state.mailAddresses,itemSelectionCallback:this.onCcSelected,__source:{fileName:HS,lineNumber:590,columnNumber:15}}))),(i.length>0||!o.includes("bcc"))&&s.createElement("div",{__source:{fileName:HS,lineNumber:599,columnNumber:11}},s.createElement("label",{htmlFor:"bcc",title:(0,ue.Z)("Blind carbon copy"),__source:{fileName:HS,lineNumber:600,columnNumber:13}},(0,ue.Z)("Bcc")),s.createElement("div",{className:"headerItemWrapper",__source:{fileName:HS,lineNumber:601,columnNumber:13}},s.createElement(RS,{id:"bcc",selectedItems:i,allItems:this.state.mailAddresses,itemSelectionCallback:this.onBccSelected,__source:{fileName:HS,lineNumber:602,columnNumber:15}}))),s.createElement("div",{__source:{fileName:HS,lineNumber:610,columnNumber:11}},s.createElement("label",{htmlFor:"subject",__source:{fileName:HS,lineNumber:611,columnNumber:13}},(0,ue.Z)("Subject")),s.createElement("div",{className:"headerItemWrapper",__source:{fileName:HS,lineNumber:612,columnNumber:13}},s.createElement("input",{type:"text",ref:this.refSubject,tabIndex:"0",id:"subject",value:r,onChange:this.onSubjectChange,__source:{fileName:HS,lineNumber:613,columnNumber:15}}))),a.length>0&&s.createElement("div",{__source:{fileName:HS,lineNumber:623,columnNumber:13}},s.createElement("label",{__source:{fileName:HS,lineNumber:624,columnNumber:15}},(0,ue.Z)("Attachments")),s.createElement("div",{className:"composer-attachments",__source:{fileName:HS,lineNumber:625,columnNumber:15}},a.map(((e,t)=>s.createElement("div",{onContextMenu:this._onContextMenu.bind(this,t),key:`attachment${t}`,className:"attachment",title:e.filename,__source:{fileName:HS,lineNumber:627,columnNumber:19}},s.createElement("span",{className:"attachment-title",__source:{fileName:HS,lineNumber:639,columnNumber:21}},e.filename),s.createElement("button",{className:"attachment-remove",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.removeAttachment.bind(this,t),dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:HS,lineNumber:642,columnNumber:21}}))))))),s.createElement("main",{__source:{fileName:HS,lineNumber:652,columnNumber:9}},this.state.showModal&&s.createElement(gS,{title:(0,ue.Z)("Missing Recipients"),prompt:(0,ue.Z)("At least one address must be added to the To, Cc, or Bcc fields in order to send this email."),positive:(0,ue.Z)("OK"),onClose:this._hideModal,hideNegative:!0,__source:{fileName:HS,lineNumber:654,columnNumber:13}}),s.createElement(MS,{ref:this.refBody,focusPreviousElement:this.focusSubject,onBodyChange:this.onBodyChange,onContentLoad:this.onContentLoad,__source:{fileName:HS,lineNumber:662,columnNumber:11}})))}}WS(KS,"contextType",Vs.Z);const jS=(0,bi.Z)(KS,zS);var YS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDisabled.jsx";const $S=function(){return s.createElement("div",{className:"MailDisabled",__source:{fileName:YS,lineNumber:9,columnNumber:5}},s.createElement("h1",{__source:{fileName:YS,lineNumber:10,columnNumber:7}},(0,ue.Z)("Mail, Calendar and Feeds are Turned Off")),s.createElement("p",{__source:{fileName:YS,lineNumber:11,columnNumber:7}},(0,ue.Z)("Vivaldi email client is turned off. Go to Settings\n        to enable it, set up accounts or change preferences.")),s.createElement("input",{type:"button",onClick:()=>se.Z.showSettings("general",{scroll:"features"}),tabIndex:0,value:(0,ue.Z)("Go to Settings"),__source:{fileName:YS,lineNumber:13,columnNumber:7}}))};var XS="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageBody.jsx";function QS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qS(e){const{markup:t,style:n,prepend:s}=e;return`{\n  let container = document.querySelector('.VIVcontainer');\n  if (!container) {\n    container = document.createElement('div');\n    container.className = 'VIVcontainer';\n    container.style = 'all:initial';\n    document.body.${s?"prepend":"append"}(container);\n  }\n  let style;\n  let content;\n  let shadowRoot;\n  if (!container.shadowRoot) {\n    style = document.createElement('style');\n    content = document.createElement('div');\n    shadowRoot = container.attachShadow({ mode: 'open' });\n    shadowRoot.appendChild(style);\n    shadowRoot.appendChild(content);\n  } else {\n    shadowRoot = container.shadowRoot;\n    style = shadowRoot.querySelector('style');\n    content = shadowRoot.querySelector('div');\n  }\n  style.textContent = ${JSON.stringify(n)};\n  content.innerHTML = ${JSON.stringify(t)};}`}class JS extends s.PureComponent{constructor(...e){super(...e),QS(this,"refWebview",s.createRef()),QS(this,"state",{leakPrevented:!1}),QS(this,"updateWebviewEventListeners",(e=>{const t=this.refWebview.current,n=e;this.refWebview.current=n,t&&(t.removeEventListener("newwindow",this.handleNewWindow),t.removeEventListener("targeturlchanged",this.handleTargetURLChanged),t.removeEventListener("consolemessage",this.handleConsoleMessage),t.removeEventListener("fullscreen",this.handleOnFullscreen)),n&&(b.Z.zoom.getDefaultZoom((e=>n.setZoom(e))),n.addEventListener("newwindow",this.handleNewWindow),n.addEventListener("targeturlchanged",this.handleTargetURLChanged),n.addEventListener("consolemessage",this.handleConsoleMessage),n.addEventListener("fullscreen",this.handleOnFullscreen))})),QS(this,"handleOnFullscreen",(e=>{dg.Z.onHTML5FullScreen(e.enterFullscreen,this.context.vivaldiWindowId)})),QS(this,"handleNewWindow",(e=>{switch(e.preventDefault(),e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.window.accept(this.context.vivaldiWindowId+";1");break;case"new_background_tab":e.window.accept(this.context.vivaldiWindowId+";0");break;case"new_window":$.Z.openBrowserWindow(this.context.vivaldiWindowId,e.targetUrl);break;case"off_the_record":$.Z.openBrowserWindow(this.context.vivaldiWindowId,e.targetUrl,{incognito:!0})}})),QS(this,"handleTargetURLChanged",(({newUrl:e})=>{const t=(0,wE.ZP)(e);X.Z.setStatus(t)})),QS(this,"handleConsoleMessage",(e=>{const t=this.props.inject&&this.props.inject.messageHandler;t&&"function"==typeof t&&t(e)})),QS(this,"getDefaultStyle",(e=>`<style type="text/css">\n    ${no.Z.createStyleRoot(this.props.style)}\n    html {\n      overflow-y: auto;\n    }\n    body {\n      ${e?"":"white-space: pre-wrap;"}\n      color: ${e?"black":"var(--colorFgIntense)"};\n      background-color: ${e?"white":"var(--colorBgIntense)"};\n      font-family: ${e?"sans-serif":"monospace"};\n      margin: 24px;\n      line-height: 1.3;\n      height: auto !important;\n      min-height: calc(100% - 48px);\n    }\n    ${e?"":"a { color: var(--colorHighlightBg); }"}\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    </style>`)),QS(this,"getDefaultRssStyle",(()=>`<style type="text/css">\n    ${no.Z.createStyleRoot(this.props.style)}\n    html {\n      background: var(--colorBgIntense);\n      color: var(--colorFgIntense);\n      font-family: sans-serif;\n      overflow-y: auto;\n    }\n    body {\n      margin: 24px;\n      height: auto !important;\n      min-height: calc(100% - 48px);\n    }\n    body > main {\n      font-size: initial;\n      /* feeds should not be using these variables */\n      /* prevent the feed from copying a custom theme for phishing */\n      --colorBg: white;\n      --colorFg: black;\n    }\n    body > main a {\n      color: var(--colorHighlightBg);\n    }\n    body > nav ul.mainbutton a {\n      display: inline-block;\n      padding: 0.3em 12px;\n      font-size: initial;\n      color: var(--colorHighlightFg);\n      background-color: var(--colorHighlightBg);\n      border-radius: 4px;\n    }\n    body > nav ul.mainbutton::after {\n      content: "";\n      display: block;\n      border-bottom: 1px solid var(--colorBorder);\n      height: 0.7em;\n      opacity: 0.3;\n    }\n    body > nav h2,\n    body > section h2 {\n      font-weight: normal;\n      font-size: larger;\n    }\n    body > nav h2::after,\n    body > section h2::after {\n      content: ":";\n    }\n    body > nav ul,\n    body > nav li {\n      display: block;\n      margin-left: 0;\n      padding-left: 0;\n    }\n    body > nav a {\n      color: var(--colorHighlightBg);\n      text-decoration: none;\n    }\n    body > section img,\n    body > section video,\n    main img,\n    main video,\n    main image,\n    main image,\n    main object,\n    main embed {\n      max-width: 100%;\n      /* allow default image ratio to work in cases where height has been set */\n      height: auto !important;\n    }\n    main iframe {\n      border: none;\n      max-width: 100%;\n    }\n    body > footer {\n      opacity: 0.5;\n    }\n\n    div.video-wrapper {\n      background: #111;\n      margin-left: -24px;\n      margin-top: -24px;\n      margin-right: -24px;\n      margin-bottom: 24px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    div.video-wrapper iframe {\n      --cinema-mode-height: 40vw;\n      height: var(--cinema-mode-height);\n      width: calc(var(--cinema-mode-height) / .5625);\n      min-height: 320px;\n      max-height: 100vh;\n    }\n\n    div.preformatted {\n      white-space: pre-wrap;\n    }\n\n    /* Overrides for specific feed issues */\n    main figure[style*="width"] {\n      /* WordPress hard codes a width which creates scrollbars.\n      Max-width does not fix it because of the default margin.\n      Fix it without breaking feeds that have floating figures. Assume that if\n      a figure has a style attribute with width, it is probably not well\n      styled, and width should be ignored. */\n      width: auto !important;\n    }\n    </style>`))}componentDidUpdate(e){if(!(0,nd.default)(e.style,this.props.style)){const e=no.Z.createStyleRoot(this.props.style);this.refWebview.current?.executeScript({code:`\n        document.styleSheets[0].deleteRule(0);\n        document.styleSheets[0].insertRule("${e}", 0\n        );`})}const{textOrHtml:t,blockHTTPLeaks:n,bodyParts:s,isRss:i,showRaw:r}=this.props,{content:a,type:o}=t,l=this.refWebview.current;let c=!1;if(e.textOrHtml!==t||"html"===o&&e.blockHTTPLeaks!==n){let e,t=!1;if(r){const t=document.createTextNode(a),n=document.createElement("p");n.appendChild(t),e=`<html>${this.getDefaultStyle(!1)}<body>${n.innerHTML}</body></html>`}else if("html"===o){const r={};(s||[]).forEach((e=>{"attachment"===e.type&&e.id&&(r["cid:"+e.id]=e)}));const o=(0,yS.Nw)(a,{attachments:r,blockHTTPLeaks:n});t=o.leakPrevented,e=i?this.getDefaultRssStyle()+o.sanitized:this.getDefaultStyle(!0)+o.sanitized}else e=`<html>${this.getDefaultStyle(!1)}<body>${be(a)}</body></html>`;this.setState({leakPrevented:t}),l?.executeScript&&(c=!0,l.executeScript({code:`document.open();\n           document.write(${JSON.stringify(e)});\n           document.close();`}))}this.props.inject&&(c||e.inject!==this.props.inject)&&l?.executeScript({code:qS(this.props.inject)})}render(){const{fromAddress:e,onUnblockExternalContent:t}=this.props,{leakPrevented:n}=this.state;return s.createElement(s.Fragment,null,n&&s.createElement("div",{className:"mail-content-blocked",__source:{fileName:XS,lineNumber:366,columnNumber:11}},s.createElement("div",{className:"content-blocked-text",__source:{fileName:XS,lineNumber:367,columnNumber:13}},(0,ue.Z)("This message was prevented from loading external content.")),s.createElement("label",{title:(0,ue.Z)("Always allow $1",[e]),className:"content-blocked-toggle-container",__source:{fileName:XS,lineNumber:370,columnNumber:13}},s.createElement("input",{className:"content-blocked-toggle",ref:"contentBlockedToggle",type:"checkbox",__source:{fileName:XS,lineNumber:373,columnNumber:15}}),s.createElement("span",{className:"content-blocked-toggle-text",__source:{fileName:XS,lineNumber:377,columnNumber:17}},(0,ue.Z)("Always allow $1",[e]))),s.createElement("input",{className:"content-blocked-action",type:"button",title:(0,ue.Z)("Load External Content"),onClick:()=>t(this.refs.contentBlockedToggle.checked),value:(0,ue.Z)("Load External Content"),__source:{fileName:XS,lineNumber:381,columnNumber:13}})),s.createElement("div",{className:"mail_body",__source:{fileName:XS,lineNumber:389,columnNumber:9}},s.createElement("section",{tabIndex:"0",__source:{fileName:XS,lineNumber:390,columnNumber:11}},s.createElement("webview",{name:"vivaldi-mail",ref:this.updateWebviewEventListeners,src:"data:text/html,<html/>",__source:{fileName:XS,lineNumber:391,columnNumber:13}}))))}}QS(JS,"contextType",Vs.Z);const eT=JS;var tT=n(8754);function nT(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,iT(e,t,"set"),n),n}function sT(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,iT(e,t,"get"))}function iT(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}async function rT(e){const{mimeTree:t,raw:n}=await ma.Z.getMimeTree(e);return new lT(t,n)}var aT=new WeakMap,oT=new WeakMap;class lT{constructor(e,t){aT.set(this,{writable:!0,value:void 0}),oT.set(this,{writable:!0,value:void 0}),this.lock=function(){let e=Promise.resolve();return async function(){const t=e;let n;if(e=new Promise((e=>n=e)),await t,!n)throw new Error("createMutex.lock: Expected release to be defined");return n}}(),this.mimeTree=e,this.raw=t}async getByteString(){let e="";const t=await this.lock();try{e=(0,zr.Z)(this.raw)}finally{t()}return e}async parse(e){let t=[];const n=await this.lock();try{const s=await ma.Z.parse(this.raw,e);t=s.bodyParts,this.raw=s.raw}finally{n()}return t}async parseAttachments(){if(sT(this,aT))return sT(this,aT);const e=[],t=(0,Na.Dc)(this.mimeTree);for(const n of t){(await this.parse(n.mimeTree)).forEach((t=>{"attachment"===t.type&&e.push(t)}))}return nT(this,aT,e),e}async parseCalendar(){let e;const t=(0,Na.fN)(this.mimeTree);if(t){const n=await this.parse(t.mimeTree);n.length&&(e=n[0])}return e}async parseMainPart(){if(sT(this,oT))return sT(this,oT);const e=(0,Na.yQ)(this.mimeTree);if(!e)return[];let t=[];const n=await this.lock();try{const s=await ma.Z.parse(this.raw,e.mimeTree);t=s.bodyParts,this.raw=s.raw}finally{n()}return nT(this,oT,t),t}async saveAs(e){const t=await this.lock(),n=new Blob([this.raw],{type:"message/rfc822"}),s=URL.createObjectURL(n);h.Z.downloads.download({url:s,filename:e,saveAs:!0},(e=>{URL.revokeObjectURL(s),t()}))}async writeBufferToDisk(e,t,n){const s=await this.lock();try{await ba.Z.call(e,t,n,this.raw)}finally{s()}}}var cT=n(21530);function uT(e,t){return St.Z.messages.update(e,{rsvpState:t})}var mT=n(54483),dT=n(85327);function hT(e="Undefined"){const t=(Gc.Z.getEvents()||[]).find((t=>t.uid===e&&!t.trash));if(!t)throw new Error(`Event with uid "${e}" not found.`);return t}const pT=new class{async replyToInvite(e,t,n){if("DECLINECOUNTER"===n)return void at.ZP.error("Calendar",["invite"],"Can not reply to invite with method",n);let s,i=!1,r=!1;try{s=hT(e.uid)}catch(e){}if(s&&s.invites?s.invites.forEach((e=>{if(e.address===t){e.partstat=n,i=!0;const{event_id:t,...s}=e;b.Z.calendar.updateInvite(s)}})):e.invites&&e.invites.forEach((e=>{e.address===t&&(e.partstat=n,i=!0,"ACCEPTED"!==n&&"TENTATIVE"!==n||(r=!0))})),!i)return void at.ZP.warn("Calendar",["invite"],"Attendee not found. Not replying to event invite");let a=s;r&&(a=await this.addEventToCalendar(e)),a||(a=function(e){const t=(e.invites||[]).map((e=>({...e,event_id:"",id:""}))),n=(e.notifications||[]).map((e=>({...e,id:""}))),{is_template:s,...i}=e;return{...i,id:"",start:e.start||0,end:e.end||0,notifications:n,invites:t,attachment:Kc.Z.stringToAttachments(e.attachment)}}(e));const o=(a.invites||[]).find((e=>e.address===t));if(!o)throw new Error("Attendee email address not found");{a.invites=[o],await cT.Z.sendReplyMails(a,t,n);const e=rl.Z.getActiveMessage();e&&(e.rsvpState=n,uT(e.id,e.rsvpState),Zd.ZP.setActiveMessage(e))}}async declineCounter(e,t){let n;try{n=hT(e.uid)}catch(t){return void at.ZP.error("Calendar",["invite"],"Error finding existing event to decline counter for",e)}await cT.Z.sendReplyMails(n,t,"DECLINECOUNTER");const s=rl.Z.getActiveMessage();if(s){const e={...s,rsvpState:"DECLINECOUNTER"};uT(e.id,e.rsvpState),Zd.ZP.setActiveMessage(e)}}addEventToCalendar(e){const{recurrence:t,...n}=e;return t&&(n.rrule=mT.Ci.optionsToString({...t.origOptions,count:0===t.origOptions.count?1:t.origOptions.count})),a.Z.createEvent(n)}updateEventInCalendar(e,t){const{is_template:n,...s}=e,i=t.invites||[],r=s.invites||[],o=i.map((e=>{const t=r.find((t=>t.address===e.address));if(t)return e.partstat=t.partstat,e.name=t.name,e})).filter(Boolean);r.forEach((e=>{i.find((t=>t.address===e.address))||o.push({...e,event_id:t.id,id:""})}));const l={...s,id:t.id,start:s.start||t.start,end:s.end||t.end,notifications:t.notifications,invites:o,attachment:Kc.Z.stringToAttachments(s.attachment)};a.Z.updateEvent(l)}handleCancellation(e,t){const n={pageId:Gc.Z.getMailResourceKey()},s=hT(e.uid);if(t){const e=(0,dT.Uq)(t),i=`${s.id}:${e}`;a.Z.trashEvent(n,i,"single")}else a.Z.trashEvent(n,s.id)}handleReply(e){const t=hT(e.uid);if(!t.invites)throw new Error("Target event missing invites data.");if(!e.invites)throw new Error("Incoming event missing invites data.");const n=e.invites[0];let s=!1;t.invites.forEach((e=>{e.address===n.address&&(b.Z.calendar.updateInvite({id:e.id,partstat:n.partstat}),s=!0)})),s&&a.Z.loadPromise()}},gT=pT;var bT=n(49237);const NT=function(){const[e,t]=s.useState(Gc.Z.getEvents());return s.useEffect((()=>{const e=e=>{"calendarDataReady"===e&&t(Gc.Z.getEvents())};return Gc.Z.addChangeListener(e),()=>{Gc.Z.removeChangeListener(e)}}),[]),e};var fT=n(34155),_T="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\DateInput.jsx";function vT(){return vT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vT.apply(this,arguments)}function ET(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CT=function(e,t){return"0"!==e&&e.length<t?e.padStart(t,"0"):e.length>t?e.slice(e.length-t):e};class wT extends s.PureComponent{constructor(e){super(e),ET(this,"_focused",!1),ET(this,"hidden",s.createRef()),ET(this,"fieldRefs",{day:this.props.dayInputRef||s.createRef(),month:s.createRef(),year:s.createRef()}),ET(this,"inputPosition",-1),ET(this,"setCache",(()=>{const[e,t,n]=this.props.value.split("-");this.setState({year:e,month:t,day:n})})),ET(this,"getOrder",(()=>{const e=this.getFormat().match(/(d+|m+|y+)/gi);if(!e)throw new Error("Incompatible date format found.");return e.map((e=>({type:e.replace(/^d+/i,"day").replace(/^m+/i,"month").replace(/^y+/i,"year"),format:e})))})),ET(this,"getFormat",(()=>this.props.format||g().localeData().longDateFormat("L"))),ET(this,"processChange",(e=>{this.props.onChange(e)})),ET(this,"select",(e=>{this.inputPosition=-1,e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())})),ET(this,"focus",(()=>{const e=this.fieldRefs[this._template[0].type];e&&e.current.focus()})),ET(this,"onKeyDown",(e=>{const{key:t,target:n}=e,s=n.dataset.type,i=this._template.findIndex((e=>e.type===s));if(t&&("ArrowLeft"===t||"ArrowRight"===t||"ArrowDown"===t))switch(t){case"ArrowRight":e.preventDefault();const t=this.fieldRefs[this._template[i+1].type];return void(t&&t.current.select());case"ArrowLeft":e.preventDefault();const n=this.fieldRefs[this._template[i-1].type];return void(n&&n.current.select());case"ArrowDown":return void(e.altKey&&(e.preventDefault(),this.hidden.current&&this.hidden.current.focus()))}isNaN(Number(t))&&fT.nextTick((()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()}))})),ET(this,"onChangeDate",(e=>{const{type:t}=e.target.dataset;let n=parseInt(e.target.value);const s=[this.state.year,this.state.month,this.state.day],i=!e.nativeEvent.inputType,r=i&&this.props.step?parseInt(this.props.step):1;let a=!1;if(i&&"day"===t){const e=parseInt(this.state.day);a=!0,n=n<e?e-r:e+r}const o="year"!==t?2:(this.getFormat().match(/y/gi)||"YYYY").length,l="year"===t?9999:"month"===t?12:g()(this.props.value).daysInMonth(),c=e.target.value===o||i?1:0;parseInt(n)>l?i?n%=l:n=l:n<c&&(n=i?l:c);let u=n.toString();i&&(u=CT(u,o)),a&&e.target.setAttribute("value",u),!i&&(10*n>l||e.target.value.length>=o)&&(u=CT(u,o),this.skipToNextField(t)),this.setState({[t]:u},(()=>{const e=["year","month","day"].indexOf(t);if(u.length<o)return;s[e]=u;const n=g()(s.join("-"));if(n.isValid()){if(this.props.min&&n.isBefore(g()(this.props.min))||this.props.max&&n.isAfter(g()(this.props.max)))return;const e=this.hidden.current,t=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;e&&t&&(t.call(e,(0,B.SI)(n)),e.dispatchEvent(new Event("input",{bubbles:!0})))}}))})),ET(this,"onFocus",(e=>{if(e.persist(),e.preventDefault(),this._focused)return;const t=e.target.closest(".dateInput");fT.nextTick((()=>{this.props.onFocus&&t instanceof HTMLElement&&si(t)&&(this._focused=!0,this.props.onFocus(e))}))})),ET(this,"onBlur",(e=>{const t=this._template.reduce(((e,t)=>{const n=this.state[t.type];return n.length<t.format.length&&(e[t.type]=CT(n,t.format.length)),e}),{});Object.keys(t).length>0&&this.setState(t),e.preventDefault(),e.persist();const n=e.target.closest(".dateInput");fT.nextTick((()=>{this.props.onBlur&&n instanceof HTMLElement&&!si(n)&&(this._focused=!1,this.props.onBlur(e))}))})),ET(this,"keepFocusWithin",(e=>{e.preventDefault(),si(e.target.nextElementSibling)||this.focus()})),ET(this,"renderFields",(()=>{const e=this.getFormat().match(/([^d+|m+|y+]+)/gi)||["/","/"],t=[this._template[0].type,e[0],this._template[1].type,e[1],this._template[2].type],n={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.onKeyDown,onChange:this.onChangeDate,disabled:this.props.disabled};return s.createElement("span",{className:"faux date",__source:{fileName:_T,lineNumber:330,columnNumber:12}},t.map(((e,t)=>{switch(e.toLowerCase()){case"day":return s.createElement("input",vT({},n,{key:"dd_"+t,className:"dateInputDay",type:"number",ref:this.fieldRefs.day,"data-type":"day",tabIndex:this.props.tabIndex,placeholder:(0,ue.Z)("dd"),value:this.state.day,__source:{fileName:_T,lineNumber:335,columnNumber:15}}));case"month":return s.createElement("input",vT({},n,{key:"mm_"+t,className:"dateInputMonth",type:"number",ref:this.fieldRefs.month,"data-type":"month",tabIndex:this.props.tabIndex,placeholder:(0,ue.Z)("date","mm"),value:this.state.month,__source:{fileName:_T,lineNumber:350,columnNumber:15}}));case"year":return s.createElement("input",vT({},n,{key:"yy_"+t,className:"dateInputYear",type:"number",ref:this.fieldRefs.year,"data-type":"year",tabIndex:this.props.tabIndex,placeholder:(0,ue.Z)("yyyy"),value:this.state.year,__source:{fileName:_T,lineNumber:365,columnNumber:15}}));default:return s.createElement("span",{key:"separator_"+t,className:"dateInputSeparator",__source:{fileName:_T,lineNumber:380,columnNumber:15}},e)}})))})),this._template=this.getOrder();const[t,n,i]=this.props.value.split("-");this.state={year:t,month:n,day:i}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}skipToNextField(e){const t=this._template.length,n=this._template.findIndex((t=>t.type===e))+1;n===t&&A.ZP.get(P.kCalendarAutoTabDatetime)?ri(document):fT.nextTick((()=>{const e=this._template[Math.min(n,t-1)].type;this.fieldRefs[e].current?.select()}))}render(){const{format:e,onChange:t,tabIndex:n,onFocus:i,onBlur:r,dayInputRef:a,...o}=this.props;return s.createElement("span",{className:"dateInput",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:_T,lineNumber:396,columnNumber:7}},s.createElement("input",vT({},o,{type:"date",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:_T,lineNumber:401,columnNumber:9}})),this.renderFields(),s.createElement("span",{className:"arrowDown",dangerouslySetInnerHTML:{__html:cn.yaZ.medium},__source:{fileName:_T,lineNumber:411,columnNumber:9}}))}}const yT=wT;var ST=n(15559),TT=n(80008),kT=n.n(TT),IT=n(53548),AT=n(97562);function ZT(e){return{[mT.Ci.DAILY]:"days",[mT.Ci.WEEKLY]:"weeks",[mT.Ci.MONTHLY]:"months",[mT.Ci.YEARLY]:"years"}[e]||"none"}var PT="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\RecurrenceEditor.jsx";function DT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const MT=new Map([["none",{name:(0,ue.Z)("No repeat"),frequency:void 0}],["days",{name:(0,ue.Z)("Daily"),frequency:mT.Ci.DAILY}],["weeks",{name:(0,ue.Z)("Weekly"),frequency:mT.Ci.WEEKLY}],["months_dom",{name:(0,ue.Z)("Monthly by date"),frequency:mT.Ci.MONTHLY}],["months_dow",{name:(0,ue.Z)("Monthly by week"),frequency:mT.Ci.MONTHLY}],["years",{name:(0,ue.Z)("Yearly"),frequency:mT.Ci.YEARLY}]]),OT=new Map([[mT.Ci.DAILY,["day","days"]],[mT.Ci.WEEKLY,["week","weeks"]],[mT.Ci.MONTHLY,["month","months"]],[mT.Ci.YEARLY,["year","years"]]]),xT=e=>{if(!e)return(0,ue.Z)("No repeat");const{count:t,dtstart:n,until:s,interval:i=1}=e.origOptions,r=kT()(n).format("LL");let a="",o="";if(i<=2)switch(e.origOptions.freq){case mT.Ci.DAILY:a=(0,ue.Z)("Repeats daily","Repeats every other day",[i]);break;case mT.Ci.WEEKLY:a=(0,ue.Z)("Repeats weekly","Repeats every other week",[i]);break;case mT.Ci.MONTHLY:a=(0,ue.Z)("Repeats monthly","Repeats every other month",[i]);break;case mT.Ci.YEARLY:a=(0,ue.Z)("Repeats yearly","Repeats every other year",[i])}else switch(e.origOptions.freq){case mT.Ci.DAILY:a=(0,ue.Z)("Repeats every $1 days","Repeats every $1 days",[i]);break;case mT.Ci.WEEKLY:a=(0,ue.Z)("Repeats every $1 weeks","Repeats every $1 weeks",[i]);break;case mT.Ci.MONTHLY:a=(0,ue.Z)("Repeats every $1 months","Repeats every $1 months",[i]);break;case mT.Ci.YEARLY:a=(0,ue.Z)("Repeats every $1 years","Repeats every $1 years",[i])}if(t&&t>0)o=(0,ue.Z)("$1 time beginning $2","$1 times beginning $2",[t,r]);else if(s){const e=kT()(s).format("LL");o=(0,ue.Z)("from $1 to $2",[r,e])}else o=(0,ue.Z)("beginning $1",[r]);return(0,ue.Z)("$1, $2",[a,o])};class LT extends s.Component{constructor(e){super(e),DT(this,"domPickerRef",s.createRef()),DT(this,"storedFocusElement",null),DT(this,"isTypingDate",!1),DT(this,"endDateElement",s.createRef()),DT(this,"changeField",(e=>{const{recurrence:t}=this.props.event;if(!t)return;const n=e.currentTarget.name;let{value:s}=e.currentTarget;"number"===e.currentTarget.type&&(s=parseInt(s),(isNaN(s)||s<1)&&(s=0)),this.props.event.recurrence=(0,IT.yu)(t,{[n]:s}),this.props.updateEvent(this.props.event)})),DT(this,"verifyValidValue",(e=>{const{recurrence:t}=this.props.event;if(!t)return;const n=e.currentTarget.name;let{value:s}=e.currentTarget;"number"===e.currentTarget.type&&(s=parseInt(s),(isNaN(s)||s<1)&&(s=1,this.props.event.recurrence=(0,IT.yu)(t,{[n]:s}),this.props.updateEvent(this.props.event)))})),DT(this,"changeRecurrence",(e=>{this.props.updateEvent(function(e,t){const n=new Date((0,AT.oJ)(t));let s;switch(e){case"days":s=(0,IT.Zm)({dtstart:n,freq:mT.Ci.DAILY,interval:1});break;case"weeks":s=(0,IT.Zm)({dtstart:n,freq:mT.Ci.WEEKLY,interval:1,byweekday:(n.getDay()+6)%7});break;case"months_dom":s=(0,IT.Zm)({dtstart:n,freq:mT.Ci.MONTHLY,interval:1,bymonthday:n.getDate()});break;case"months_dow":const e=Math.ceil(n.getDate()/7),t=(0,IT._7)(n.getDay()).nth(e);s=(0,IT.Zm)({dtstart:n,freq:mT.Ci.MONTHLY,interval:1,byweekday:t});break;case"years":s=(0,IT.Zm)({dtstart:n,freq:mT.Ci.YEARLY,interval:1})}return t.recurrence=s,t}(e.currentTarget.value,this.props.event))})),DT(this,"changeDate",(e=>{this.props.updateEvent(function(e,t){const n=t.recurrence;return n?(t.recurrence=(0,IT.yu)(n,{until:kT()(e).endOf("day").toDate(),count:void 0}),t):t}(e.currentTarget.value,this.props.event))})),DT(this,"changeEnds",(e=>{this.props.updateEvent(function(e,t){const n=t.recurrence;if(!n)return t;let s;switch(e){case"forever":s=(0,IT.yu)(n,{until:void 0,count:void 0});break;case"endDate":const e=ZT(n.origOptions.freq);s=(0,IT.yu)(n,{count:void 0,until:kT()((0,AT.oJ)(t)).add(1,e).toDate()});break;case"count":s=(0,IT.yu)(n,{count:1,until:void 0})}return t.recurrence=s,t}(e.target.value,this.props.event))})),DT(this,"changeDayOfMonth",(e=>{const{recurrence:t}=this.props.event;if(!t)return;const n=this.state.monthDates.split(",").map((e=>parseInt(e))).filter((e=>e>=1&&e<=31));n.length&&(this.props.event.recurrence=(0,IT.yu)(t,{bymonthday:n}),this.props.updateEvent(this.props.event))})),DT(this,"typeDayOfMonth",(e=>{this.setState({monthDates:e.currentTarget.value})})),DT(this,"toggleDayOfMonthPicker",(()=>{const{document:e}=this.context;this.setState((e=>({showMonthPicker:!e.showMonthPicker})),(()=>{if(this.state.showMonthPicker){this.storedFocusElement=e.activeElement;const t=e.querySelector("button[name='1-dayOfMonth']");t&&t.focus()}}))})),DT(this,"hideDayOfMonthPicker",(()=>{this.setState({showMonthPicker:!1},(()=>{this.storedFocusElement&&(this.storedFocusElement.focus(),this.storedFocusElement=null)}))})),DT(this,"dayOfWeekPickerClick",(e=>{e.target.focus();const{recurrence:t}=this.props.event;if(!t)return;const n=parseInt(e.target.name);if(isNaN(n))throw new Error("Can not select day, invalid day value");const s=new Set((0,IT.IK)(t));s.has(n)&&s.size>1?s.delete(n):s.add(n),this.props.event.recurrence=(0,IT.yu)(t,{byweekday:Array.from(s)}),this.props.updateEvent(this.props.event)})),DT(this,"dayOfMonthPickerClick",(e=>{e.target.focus();const t=parseInt(e.target.name);this.selectDayOfMonth(t)})),DT(this,"selectDayOfMonth",(e=>{const{recurrence:t}=this.props.event;if(!t)return;const n=new Set((0,IT.v1)(t));n.has(e)&&n.size>1?n.delete(e):n.add(e),this.props.event.recurrence=(0,IT.yu)(t,{bymonthday:Array.from(n).sort(((e,t)=>e-t))}),this.props.updateEvent(this.props.event)})),DT(this,"monthPickerBlur",(e=>{const t=this.domPickerRef.current;t&&e.relatedTarget instanceof Node&&!t.contains(e.relatedTarget)&&this.setState({showMonthPicker:!1})})),DT(this,"dayOfWeekPickerKeyDown",(e=>{const{document:t}=this.context,n=t.activeElement;if(!n||!n.hasAttribute("name"))return;const s=kT()().localeData().firstDayOfWeek(),i=(parseInt(n.name)-s+7)%7;let r=null;switch(ST.Z[e.keyCode]){case"Left":i>0&&(r=i-1);break;case"Right":i<6&&(r=i+1);break;default:return}if(null!==r){r=(r+s)%7;const e=t.querySelector(`button[name='${r}-dayOfWeek']`);e&&(e.tabIndex=0,e.focus(),n.tabIndex=-1)}})),DT(this,"dayOfMonthPickerKeyDown",(e=>{if(!this.state.showMonthPicker&&"Down"===ST.Z[e.keyCode])return void this.toggleDayOfMonthPicker();const{document:t}=this.context,n=t.activeElement;if(!n||!n.hasAttribute("name"))return;const s=parseInt(n.name);let i;switch(ST.Z[e.keyCode]){case"Up":s>7&&(i=s-7);break;case"Down":s<25&&(i=s+7);break;case"Left":s%7!=1&&(i=s-1);break;case"Right":s%7!=0&&(i=s+1);break;case"Enter":return this.selectDayOfMonth(s),void e.stopPropagation();case"Escape":return e.stopPropagation(),void this.hideDayOfMonthPicker();default:return}if(i){const e=t.querySelector(`button[name='${i}-dayOfMonth']`);e&&e.focus()}})),DT(this,"weekOfMonthChange",(e=>{const{recurrence:t}=this.props.event;if(!t)return;const n=parseInt(e.currentTarget.value);let[s,i]=e.currentTarget.name.split("-");s=parseInt(s);const r=(0,IT.QX)(t),a=r[s];"weekOfMonthWeek"===i?r[s]=r[s].nth(n):"weekOfMonthDay"===i&&(r[s]=IT.z3[n],void 0!==a.n&&(r[s]=r[s].nth(a.n))),this.props.event.recurrence=(0,IT.yu)(t,{byweekday:r}),this.props.updateEvent(this.props.event)})),DT(this,"addWeekOfMonth",(()=>{const{event:e}=this.props,{recurrence:t}=e;if(!t)return;const n=kT()(e.start),s=Math.ceil(n.date()/7),i=(0,IT._7)(n.day()).nth(s),r=(0,IT.QX)(t);r.push(i),e.recurrence=(0,IT.yu)(t,{byweekday:r}),this.props.updateEvent(e)})),DT(this,"deleteWeekOfMonth",(e=>{const t=parseInt(e.currentTarget.name),{event:n}=this.props,{recurrence:s}=n;if(!s)return;const i=(0,IT.QX)(s).splice(t,1),r=(0,IT.yu)(s,{byweekday:i});n.recurrence=r,this.props.updateEvent(n)}));const t=kT()().startOf("week");this.week=[...Array(7).keys()].map((()=>{const e={name:t.format("dddd"),number:(t.day()+6)%7};return t.add(1,"day"),e})),this.state={showMonthPicker:!1,bymonthday:[],monthDates:""}}static getDerivedStateFromProps(e,t){const{recurrence:n}=e.event,s={bymonthday:n?n.origOptions.bymonthday:void 0};return n&&t.bymonthday!==n.origOptions.bymonthday&&(s.monthDates=(0,IT.v1)(n).join(", "),s.bymonthday=n.origOptions.bymonthday),s}renderWeekSelection(){const{recurrence:e}=this.props.event;if(!e)return null;const t=(0,IT.IK)(e),n=this.week.map(((e,n)=>{const i=t.includes(e.number),r=`${e.number}-dayOfWeek`;return s.createElement(s.Fragment,{key:r,__source:{fileName:PT,lineNumber:502,columnNumber:14}},s.createElement(ko,{name:r,onClick:this.dayOfWeekPickerClick,onKeyDown:this.dayOfWeekPickerKeyDown,title:e.name.substr(0,1),tooltip:e.name,tabIndex:i?this.props.tabIndex:-1,isPressed:i,__source:{fileName:PT,lineNumber:503,columnNumber:9}}),n<this.week.length-1&&s.createElement("hr",{__source:{fileName:PT,lineNumber:513,columnNumber:11}}))}));return s.createElement("div",{className:"edit-group capped-width",__source:{fileName:PT,lineNumber:518,columnNumber:7}},s.createElement("div",{className:"toolbar toolbar-default calendar-week-picker",__source:{fileName:PT,lineNumber:519,columnNumber:9}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:PT,lineNumber:520,columnNumber:11}},n)))}renderDayOfMonthSelection(){const{event:e}=this.props,{recurrence:t}=e;if(!t)return null;const n=(0,IT.v1)(t);return s.createElement("div",{className:"edit-group capped-width",__source:{fileName:PT,lineNumber:536,columnNumber:7}},s.createElement("label",{__source:{fileName:PT,lineNumber:537,columnNumber:9}},s.createElement("span",{__source:{fileName:PT,lineNumber:539,columnNumber:11}},(0,ue.Z)("On days")),s.createElement("input",{type:"text",id:"day_of_month",value:this.state.monthDates||kT().tz(e.start,e.timezone).date(),onChange:this.typeDayOfMonth,onBlur:this.changeDayOfMonth,__source:{fileName:PT,lineNumber:540,columnNumber:11}}),s.createElement(ko,{className:"button-narrow",image:cn.bcq.small,popupPosition:"below",isPopupVisible:this.state.showMonthPicker,popupWidth:240,onClick:this.toggleDayOfMonthPicker,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,tooltip:(0,ue.Z)("Show date picker"),hidePopup:this.hideDayOfMonthPicker,popupClassName:"ToolbarButtonPopup-DefaultStyles",__source:{fileName:PT,lineNumber:547,columnNumber:11}},s.createElement("div",{className:"dom-picker",ref:this.domPickerRef,onBlur:this.monthPickerBlur,__source:{fileName:PT,lineNumber:561,columnNumber:13}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:PT,lineNumber:566,columnNumber:15}},[...Array(31).keys()].map((e=>{const t=e+1;return s.createElement(ko,{isPressed:n.includes(t),name:`${t}-dayOfMonth`,key:t,onKeyDown:this.dayOfMonthPickerKeyDown,onClick:this.dayOfMonthPickerClick,tabIndex:this.state.showMonthPicker?this.props.tabIndex:-1,title:t.toString(),tooltip:(0,ue.Z)("Repeat monthly on day $1",[t]),__source:{fileName:PT,lineNumber:570,columnNumber:19}})})))))))}renderWeekOfMonthSelection(){const{recurrence:e}=this.props.event;if(!e)return null;const t=(0,IT.QX)(e);return t.map(((e,n)=>s.createElement("div",{className:"edit-group",key:n,__source:{fileName:PT,lineNumber:597,columnNumber:7}},s.createElement("label",{__source:{fileName:PT,lineNumber:598,columnNumber:9}},s.createElement("select",{name:`${n}-weekOfMonthWeek`,onChange:this.weekOfMonthChange,tabIndex:this.props.tabIndex,value:e.n,__source:{fileName:PT,lineNumber:599,columnNumber:11}},s.createElement("option",{value:"1",__source:{fileName:PT,lineNumber:606,columnNumber:13}},(0,ue.Z)("First")),s.createElement("option",{value:"2",__source:{fileName:PT,lineNumber:608,columnNumber:13}},(0,ue.Z)("ordering","Second")),s.createElement("option",{value:"3",__source:{fileName:PT,lineNumber:610,columnNumber:13}},(0,ue.Z)("Third")),s.createElement("option",{value:"4",__source:{fileName:PT,lineNumber:612,columnNumber:13}},(0,ue.Z)("Fourth")),s.createElement("option",{value:"5",__source:{fileName:PT,lineNumber:614,columnNumber:13}},(0,ue.Z)("Fifth")),s.createElement("option",{value:"-1",__source:{fileName:PT,lineNumber:616,columnNumber:13}},(0,ue.Z)("Last")),s.createElement("option",{value:"-2",__source:{fileName:PT,lineNumber:618,columnNumber:13}},(0,ue.Z)("Second last"))),s.createElement("select",{name:`${n}-weekOfMonthDay`,onChange:this.weekOfMonthChange,tabIndex:this.props.tabIndex,value:e.weekday,__source:{fileName:PT,lineNumber:620,columnNumber:11}},this.week.map((e=>s.createElement("option",{key:e.number,value:e.number,__source:{fileName:PT,lineNumber:627,columnNumber:15}},e.name)))),t.length>1&&s.createElement("input",{type:"button",className:"circular",name:`${n}`,onClick:this.deleteWeekOfMonth,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,title:(0,ue.Z)("Remove rule"),value:"–",__source:{fileName:PT,lineNumber:632,columnNumber:13}}),s.createElement("input",{type:"button",className:"circular",onClick:this.addWeekOfMonth,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,title:(0,ue.Z)("Add rule"),value:"+",__source:{fileName:PT,lineNumber:645,columnNumber:11}})))))}render(){const{event:e}=this.props,t=e.recurrence||{origOptions:{}},{freq:n,interval:i,count:r,until:a}=t.origOptions,o=n===mT.Ci.MONTHLY?t.origOptions.byweekday?"months_dow":"months_dom":ZT(n),l=void 0!==r?"count":a?"endDate":"forever",c=OT.get(n)||["",""],u=(0,ue.Z)(...c,[i]);return s.createElement(s.Fragment,null,s.createElement("div",{className:"edit-group capped-width",__source:{fileName:PT,lineNumber:677,columnNumber:9}},s.createElement("select",{name:"frequency",ref:this.props.focusRef,onChange:this.changeRecurrence,tabIndex:this.props.tabIndex,value:o,__source:{fileName:PT,lineNumber:678,columnNumber:11}},Array.from(MT).map((([e,t])=>s.createElement("option",{key:e,value:e,__source:{fileName:PT,lineNumber:686,columnNumber:17}},t.name))))),"weeks"===o&&this.renderWeekSelection(),"months_dom"===o&&this.renderDayOfMonthSelection(),"months_dow"===o&&this.renderWeekOfMonthSelection(),"none"!==o&&s.createElement("div",{className:"edit-group capped-width",__source:{fileName:PT,lineNumber:702,columnNumber:11}},s.createElement("label",{__source:{fileName:PT,lineNumber:703,columnNumber:13}},s.createElement("span",{__source:{fileName:PT,lineNumber:705,columnNumber:15}},(0,ue.Z)("every")),s.createElement("input",{type:"number",name:"interval",min:"1",disabled:!o,onChange:this.changeField,onBlur:this.verifyValidValue,tabIndex:this.props.tabIndex,value:i||"",__source:{fileName:PT,lineNumber:706,columnNumber:15}}),s.createElement("span",{__source:{fileName:PT,lineNumber:716,columnNumber:15}},u))),"none"!==o&&s.createElement("div",{className:"edit-group",__source:{fileName:PT,lineNumber:722,columnNumber:11}},s.createElement("select",{name:"endsRepeating",ref:this.props.focusRef,onChange:this.changeEnds,tabIndex:this.props.tabIndex,value:l,__source:{fileName:PT,lineNumber:723,columnNumber:13}},s.createElement("option",{value:"forever",__source:{fileName:PT,lineNumber:731,columnNumber:15}},(0,ue.Z)("Forever")),s.createElement("option",{value:"endDate",__source:{fileName:PT,lineNumber:733,columnNumber:15}},(0,ue.Z)("Ending")),s.createElement("option",{value:"count",__source:{fileName:PT,lineNumber:735,columnNumber:15}},(0,ue.Z)("Repeating"))),s.createElement(s.Fragment,null,"endDate"===l&&s.createElement(yT,{name:"endDate",onChange:this.changeDate,min:kT()(e.start).format("YYYY-MM-DD"),tabIndex:this.props.tabIndex,ref:this.endDateElement,value:kT()(a).format("YYYY-MM-DD"),__source:{fileName:PT,lineNumber:740,columnNumber:17}}),"count"===l&&s.createElement("label",{__source:{fileName:PT,lineNumber:751,columnNumber:17}},s.createElement("input",{size:"3",type:"number",name:"count",onChange:this.changeField,onBlur:this.verifyValidValue,min:"1",tabIndex:this.props.tabIndex,value:r||"",__source:{fileName:PT,lineNumber:752,columnNumber:19}}),s.createElement("span",{__source:{fileName:PT,lineNumber:763,columnNumber:19}},(0,ue.Z)("time","times",[r]))))))}}DT(LT,"contextType",Vs.Z);const RT=LT,BT={title:"",calendarId:"",is_template:!1},FT=new TextDecoder("utf-8",{fatal:!0}),UT={ACCEPTED:{existing:(0,ue.Z)("You have accepted the invite"),update:(0,ue.Z)("You accepted the previous invite")},DECLINED:{existing:(0,ue.Z)("You have declined the invite"),update:(0,ue.Z)("You declined the previous invite")},TENTATIVE:{existing:(0,ue.Z)("You have tentatively accepted the invite"),update:(0,ue.Z)("You tentatively accepted the previous invite")},"NEEDS-ACTION":{existing:(0,ue.Z)("You still have to reply to the invite"),update:(0,ue.Z)("You did not reply to the previous invite")},DECLINECOUNTER:{existing:(0,ue.Z)("You have declined the counter proposal"),update:""},DELEGATED:{existing:(0,ue.Z)("You delegated invite to another person"),update:(0,ue.Z)("You delegated previous invite to another person")}};function VT(e){return(0,yS.Nw)(be(e).replace(/\n/g,"<br />"),{attachments:{}}).sanitized}function HT(e,t,n){const s=[],{url:i,location:r,organizer:a,invites:o,recurrence:l}=t,c=g()(t.start),u=g()(t.end);t.allDay?c.isSame(u,"day")?(s.push([(0,ue.Z)("Date"),c.format("LL"),""]),s.push(["","",""])):(s.push([(0,ue.Z)("Starts"),c.format("LL"),""]),s.push([(0,ue.Z)("Ends"),u.format("LL"),""])):(s.push([(0,ue.Z)("Starts"),c.format("LLLL"),""]),s.push([(0,ue.Z)("Ends"),u.format("LLLL"),""])),s.push([" ",l?xT(l):"",""]),s.push([(0,ue.Z)("Organizer"),a||"",""]),s.push([(0,ue.Z)("Attendees"),o&&o.map((e=>`<p>${e.address}</p>`)).join("\r\n"),""]),s.push([(0,ue.Z)("Location"),r,""]),s.push([(0,ue.Z)("URL"),i?`<a href="${i}">${i}</a>`:"",""]),s.push([(0,ue.Z)("Description"),VT(t.description||""),""]);const m=parseInt(n?.sequence)||0,d=parseInt(t.sequence)||0,h=n&&("REQUEST"===e&&m<d||"COUNTER"===e&&m===d);if(h&&n){const e=g()(n.start),c=g()(n.end);if(n.allDay!==t.allDay)n.allDay?(s[0][2]=`<p>${e.format("LL")}</p>`,e.isSame(c,"day")||(s[1][2]=`<p>${c.format("LL")}</p>`)):(s[0][2]=`<p>${e.format("LLLL")}</p>`,s[1][2]=`<p>${c.format("LLLL")}</p>`);else{const i=t.allDay?"LL":"LLLL";n.start!==t.start&&(s[0][2]=`<p>${e.format(i)}</p>`),n.end!==t.end&&(s[1][2]=`<p>${c.format(i)}</p>`)}if((0,nd.default)(n.recurrence,l)||(s[2][2]=`<p>${xT(n.recurrence)}</p>`),n.organizer!==a&&(s[3][2]=`<p>${n.organizer||"&nbsp"}</p>`),(0,nd.default)((n.invites||[]).map((e=>e.address)),(o||[]).map((e=>e.address)))||(s[4][2]=n.invites&&n.invites.map((e=>`<p ${t.invites?.some((t=>t.address===e.address))?'class=" Event-Attendee--Exists"':""}>${e.address}</p>`)).join("\r\n")||"&nbsp"),r&&n.location!==r&&(s[5][2]=`<p>${n.location||"&nbsp"}</p>`),i&&n.url!==i){const e=n.url;s[6][2]=e?`<p><a href="${e}">${e}</a></p>`:"&nbsp"}t.description&&n.description!==t.description&&(s[7][2]=`<p>${VT(n.description||"")}</p>`||"&nbsp")}const p=s.filter((e=>e[1]||e[2])),b=`<h1 class="Event-Title">${t.title}</h1>`;if(h&&n){return`\n      <dl class="Event-Props Event-Props--Diff">\n        <dt />\n        <dd>${b}</dd>\n        <dd>${`<h2 class="${t.title===n.title?"Event-Title--Previous":"Event-Title--Previous Event-Title--Changed"}">${n.title}</h2>`}</dd>\n      ${p.map((([e,t,n])=>`\n        <dt>${e}</dt>\n        <dd>${t||""}</dd>\n        <dd class="Event-Prop--Previous">${n||""}</dd>`)).join("\r\n")}\n      </dl>\n    `}return`\n    ${b}\n    <dl class="Event-Props">\n    ${p.map((([e,t])=>`\n      <dt>${e}</dt>\n      <dd>${t||""}</dd>`)).join("\r\n")}\n    </dl>\n  `}function WT(e){return no.Z.createStyleRoot(e)+"\n  .Event {\n    color: var(--colorFg);\n    background-color: var(--colorBg);\n    font-family: 'SF', '.SFNSDisplay', HelveticaNeue, LucidaGrande, system-ui, sans-serif;\n    font-size: 13px;\n    font-weight: 400;\n    border: 1px solid var(--colorBorder);\n    border-radius: var(--radius);\n    margin-bottom: 12px;\n  }\n  .Event-Message {\n    padding: 12px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    border-bottom: 1px solid var(--colorBorder);\n    align-items: start;\n  }\n  .Event-Rsvp {\n    margin-bottom: 12px;\n    padding: 12px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    background-color: var(--colorBgDark);\n    border-bottom: 1px solid var(--colorBorder);\n  }\n  .Event-Title {\n    font-size: 16px;\n    margin: 12px;\n  }\n  .Event-Title--Previous {\n    font-size: 16px;\n    margin: 0;\n    font-weight: normal;\n  }\n  .Event-Title--Changed {\n    text-decoration: line-through;\n  }\n  .Event-Props {\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    gap: 6px 18px;\n    margin: 12px;\n  }\n  .Event-Props--Diff {\n    grid-template-columns: max-content 1fr 1fr;\n  }\n  .Event-Props--Diff .Event-Title {\n    margin: 0;\n  }\n  .Event-Prop--Previous p {\n    text-decoration: line-through;\n  }\n  .Event-Prop--Previous p.Event-Attendee--Exists {\n    text-decoration: none;\n  }\n  span {\n    flex: 1 1 auto;\n  }\n  input[type=button] {\n    padding: 6px 24px;\n    margin-left: 12px;\n  }\n  dd, dt, p {\n    margin: 0 0 3px 0;\n    padding: 0;\n    word-break: break-word;\n  }\n  p:last-child {\n    margin: 0;\n  }\n  dt {\n    font-weight: 600;\n  }\n  "}function zT(e,t=!1){const n=t?(0,ue.Z)("Can not determine email address to reply from. Which one should be used to send your reply?"):(0,ue.Z)("More than one of your email addresses are invited. Which one should be used to send your reply?");return{title:(0,ue.Z)("Select Reply Mail"),body:n,actions:e.map(((e,t)=>({title:e,action:e,default:0===t}))),cancelAction:{title:(0,ue.Z)("Cancel"),action:"cancel"}}}function GT(e,t,n){let s,i,r;try{const e=(0,bT.Z)(t);if(!e.METHOD)return at.ZP.error("Mail",["invite"],"No invite method"),{inviteInfo:{type:"parsing_error",message:(0,ue.Z)("No invite method")},incomingEvent:BT};i=e.METHOD;let n=e.VEVENT[0];if(1===n.EXCEPTIONS?.length&&1===Object.keys(n).length&&(n=n.EXCEPTIONS[0]),!n)return at.ZP.error("Mail",["invite"],"No event in invite"),{inviteInfo:{type:"parsing_error",message:(0,ue.Z)("No event in invite")},incomingEvent:BT};r=n["RECURRENCE-ID"],s=(0,dT.rP)(n)}catch(e){return at.ZP.error("Mail",["invite"],"Error parsing iCalendar"),{inviteInfo:{type:"parsing_error",message:e.message},incomingEvent:BT}}const a=s.invites||[],o=n.find((e=>e.uid===s.uid&&!e.trash)),l={incomingEvent:s,existingEvent:o,method:i};if(o&&"ical"===Gc.Z.getAccountForCalendar(o.calendarId)?.account_type)return{...l,inviteInfo:{type:"invite_existing_ical"}};const c=e?.rsvpState||"NEEDS-ACTION",u=s.sequence??0,m=o?.sequence??0;if("PUBLISH"===i)return o?m<u?{...l,inviteInfo:{type:"publish_update"}}:{...l,inviteInfo:{type:"publish_existing"}}:{...l,inviteInfo:{type:"publish_not_existing"}};if("REQUEST"===i)return o?o.organizer!==s.organizer?{...l,inviteInfo:{type:"update_fraudulent"}}:m<u?"NEEDS-ACTION"===c?{...l,inviteInfo:{type:"update_unanswered",prevState:c}}:{...l,inviteInfo:{type:"update_answered",state:c}}:m===u?"NEEDS-ACTION"===c?{...l,inviteInfo:{type:"invite_existing_unanswered"}}:{...l,inviteInfo:{type:"invite_existing_answered",state:c}}:{...l,inviteInfo:{type:"invite_outdated"}}:"NEEDS-ACTION"===c?{...l,inviteInfo:{type:"invite_unanswered"}}:{...l,inviteInfo:{type:"invite_answered",state:c}};if("CANCEL"===i)return r&&function(e,t){const n=e?.recurrenceExceptions;if(n?.length){const e=(0,dT.Uq)(t);return Boolean(n.find((t=>t.cancelled&&t.date===e)))}return!1}(o,r)?{...l,inviteInfo:{type:"cancel_recurring_cancelled"}}:o?{...l,inviteInfo:{type:"cancel_existing",recurrenceId:r}}:{...l,inviteInfo:{type:"cancel_not_existing"}};if("REPLY"===i){if(!s.organizer||1!==a.length||u>m)return{...l,inviteInfo:{type:"reply_invalid"}};const e=a[0];if(!o)return{...l,inviteInfo:{type:"reply_not_existing"}};const t=o.invites||[];if(!t.some((t=>t.address===e.address)))return{...l,inviteInfo:{type:"reply_fraudulent"}};if(u===m&&1===a.length){const{partstat:e,address:n}=a[0],s=t.find((e=>e.address===n));if(s&&s.partstat===e)return{...l,inviteInfo:{type:"reply_not_changed"}};if(s&&s.partstat!==e)return{...l,inviteInfo:{type:"reply_changed"}}}if(u<m)return{...l,inviteInfo:{type:"reply_outdated"}}}return"COUNTER"===i?u>m?{...l,inviteInfo:{type:"counter_invalid"}}:u<m?{...l,inviteInfo:{type:"counter_outdated"}}:o?c?{...l,inviteInfo:{type:"counter_existing_answered",state:c}}:{...l,inviteInfo:{type:"counter_existing_unanswered"}}:{...l,inviteInfo:{type:"counter_not_existing"}}:{...l,inviteInfo:{type:"invite_unsupported_method"}}}function KT(e,t,n,i){const r=NT(),[a,o]=s.useState();return s.useMemo((()=>{t&&!n?t.parseCalendar().then((t=>{let n;if(t){let s="";s="string"==typeof t.content?t.content:FT.decode(t.content),n=function(e,t,n,s){const{incomingEvent:i,existingEvent:r,method:a,inviteInfo:o}=GT(e,t,n),l=A.ZP.get(P.kMailAccounts),c=ll.Z.getSelectedFolder(),u=(i.invites||[]).map((e=>e.address));let m=l.filter((e=>u.includes(e.MAIL_EMAIL))).map((e=>e.MAIL_EMAIL));const{accountId:d,path:h}=c||{};m.includes(d)?m=[d]:h&&d===he.Ry&&(m=[h.split("/")[0]]);const p=`\n    <input type="button" value="${(0,ue.Z)("Accept")}" onclick="console.log('Accept')" />\n    <input type="button" value="${(0,ue.Z)("Maybe")}" onclick="console.log('Maybe')" />\n    <input type="button" value="${(0,ue.Z)("Decline")}" onclick="console.log('Decline')" />\n  `,g=`\n    <input type="button" value="${(0,ue.Z)("Accept")}" onclick="console.log('AcceptCounter')" />\n    <input type="button" value="${(0,ue.Z)("Decline")}" onclick="console.log('DeclineCounter')" />\n  `;let b,N="",f="",_="";switch(o.type){case"invite_existing_ical":N=(0,ue.Z)("This message contains changes for an event that you have in a read only web calendar. Updates should be handled on the relevant server.");break;case"publish_not_existing":N=(0,ue.Z)("This message contains event data published for your information."),f=`<input type="button" value="${(0,ue.Z)("Add To Calendar")}" onclick="console.log('Add')" />`;break;case"publish_existing":N=(0,ue.Z)("This message contains event data that you already have in your calendar.");break;case"publish_update":N=(0,ue.Z)("This message contains event update published for your information."),f=`<input type="button" value="${(0,ue.Z)("Update in Calendar")}" onclick="console.log('Update')" />`;break;case"invite_unanswered":N=0===m.length?(0,ue.Z)("This message contains a calendar event invite. No matching email account was found for event invitees. Check the attendee list below to make sure this invite is intended for you."):(0,ue.Z)("This message contains a calendar event invite."),f=`<input type="button" value="${(0,ue.Z)("Add To Calendar")}" onclick="console.log('Add')" />`,_+=p;break;case"invite_answered":N=(0,ue.Z)("This message contains a calendar event invite you have responded to but you don't have the event in your calendar."),f=`<input type="button" value="${(0,ue.Z)("Add To Calendar")}" onclick="console.log('Add')" />`,_+=UT[o.state].existing;break;case"invite_outdated":N=(0,ue.Z)("This message contains a calendar event invite. You have a more recent version of the event in your calendar.");break;case"invite_existing_unanswered":N=(0,ue.Z)("This message contains an invitation to an event you have in your calendar. You have not responded to the invitation."),_+=p;break;case"invite_existing_answered":N=(0,ue.Z)("This message contains an existing event you have in your calendar."),_+=UT[o.state].existing;break;case"update_unanswered":N=(0,ue.Z)("This message contains an update to a calendar event.")+UT[o.prevState].update,f=`<input type="button" value="${(0,ue.Z)("Update in Calendar")}" onclick="console.log('Update')" />`,_+=p;break;case"update_answered":N=(0,ue.Z)("This message contains an update to a calendar event.")+UT[o.state].update,f=`<input type="button" value="${(0,ue.Z)("Update in Calendar")}" onclick="console.log('Update')" />`,_+=UT[o.state].existing;break;case"update_fraudulent":N=(0,ue.Z)("This message contains an update to a calendar event. It does not match the event you have in your calendar. Check the event details below and if it looks correct you have to delete the existing event in your calendar before you can accept this one.");break;case"cancel_existing":N=(0,ue.Z)("This message contains an event cancellation."),f=`<input type="button" value="${(0,ue.Z)("Remove from Calendar")}" onclick="console.log('Delete')" />`,b=o.recurrenceId;break;case"cancel_not_existing":N=(0,ue.Z)("This message contains cancellation of an event you don’t have in your calendar.");break;case"cancel_recurring_cancelled":N=(0,ue.Z)("This message contains cancellation of an event already cancelled in your calendar.");break;case"reply_not_existing":N=(0,ue.Z)("This message contains an invite reply for an event you do not have in your calendar.");break;case"reply_invalid":N=(0,ue.Z)("Invalid event invite reply found.");break;case"reply_fraudulent":N=(0,ue.Z)("Fraudulent event invite reply found.");break;case"reply_not_changed":N=(0,ue.Z)("This message contains an event invite reply which is already processed.");break;case"reply_changed":N=(0,ue.Z)("This message contains an event invite reply."),f=`<input type="button" value="${(0,ue.Z)("Update Event in Calendar")}" onclick="console.log('Partstat')" />`;break;case"reply_outdated":N=(0,ue.Z)("This message contains an event invite reply for an older version of the event.");break;case"counter_not_existing":N=(0,ue.Z)("This message contains a counter proposal for an event which was not found. It will be ignored.");break;case"counter_existing_unanswered":N=(0,ue.Z)("This message contains a counter proposal for the following event."),f=g;break;case"counter_existing_answered":N=(0,ue.Z)("This message contains a counter proposal for the following event."),N+=UT[o.state].existing;break;case"counter_outdated":N=(0,ue.Z)("This message contains an outdated counter proposal. It will be ignored.");break;case"counter_invalid":N=(0,ue.Z)("This message contains an invalid counter proposal. It will be ignored.");break;case"invite_unsupported_method":N=(0,ue.Z)("Unsupported method parameter “$1”.",[a]);break;case"parsing_error":N=(0,ue.Z)("This message contains invalid calendar data. See logs for details")}return _&&(_=`<span>${(0,ue.Z)("RSVP")}</span>`+_),{markup:`\n    <div class="Event">\n      <div class="Event-Message"><span>${N}</span>${f}</div>\n      ${_?`<div class="Event-Rsvp">${_}</div>`:""}\n      ${HT(a,i,r)}\n    </div>\n      `,style:WT(s),prepend:!0,messageHandler:async t=>{const{message:n}=t;let s="";if("DeclineCounter"===n)s=e?.from[0].address||"";else if(["Accept","Maybe","Decline","AcceptCounter"].includes(n)||"DeclineCounter"===n&&!s){if(1===m.length)s=m[0];else if(0===m.length){if(1===l.length)s=l[0].MAIL_EMAIL;else if(c){const{accountId:e,path:t}=c;l.some((t=>t.MAIL_EMAIL===e))?s=e:t&&e===he.Ry&&(s=t.split("/")[0])}if(!s){const{action:e}=await se.Z.showModal({modal:zT(l.map((e=>e.MAIL_EMAIL)),!0)});s=e}}else{const{action:e}=await se.Z.showModal({modal:zT(m)});s=e}if("cancel"===s)return}switch(n){case"Accept":gT.replyToInvite(i,s,"ACCEPTED");break;case"Maybe":gT.replyToInvite(i,s,"TENTATIVE");break;case"Decline":gT.replyToInvite(i,s,"DECLINED");break;case"Add":gT.addEventToCalendar(i);break;case"Update":case"AcceptCounter":r&&gT.updateEventInCalendar(i,r);break;case"DeclineCounter":gT.declineCounter(i,s);break;case"Delete":gT.handleCancellation(i,b);break;case"Partstat":gT.handleReply(i)}}}}(e,s,r,i)}o(n)})):o()}),[t,n,r,e,i]),a}const jT={type:"text",content:""};const YT=s.forwardRef((function(e,t){const{style:n,fromAddress:i,isRss:r,isSenderTrusted:a,message:o,onUnblockExternalContent:l,raw:c,showRaw:u}=e,m=function(e,t,n){const[i,r]=s.useState([]);return s.useMemo((()=>{if(e)if(n)if(t)t.getByteString().then((e=>r([{type:"text",content:e}])));else if(e.bodyParts&&"string"==typeof e.bodyParts[0].content){const t=e.bodyParts[0].content,n=(0,US.yN)(e.bodyParts);tT.Z.build(e,t,n).then((e=>r([{type:"text",content:e}])))}else r([]);else e.bodyParts?r(e.bodyParts):t&&t.parseMainPart().then(r);else r([])}),[e,t,n]),i}(o,c,u),d=function(e,t){const[n,i]=s.useState();return s.useEffect((()=>{const n=[];return!e||t?i():((async()=>{const t=(0,Na.Dc)(e.mimeTree).filter((e=>e.mimeType&&e.mimeType.startsWith("image/")));for(const s of t){const t=await e.parse(s.mimeTree);if(1===t.length&&"attachment"===t[0].type){const{content:e,mimeType:s}=t[0],i=new Blob([e],{type:"string"==typeof s?s:""}),r=URL.createObjectURL(i);n.push(r)}}if(n.length>0){const e={markup:n.map((e=>`<img src="${e}" />`)).join(""),style:"img {\n            margin-top: 12px;\n            display: inline-block;\n            vertical-align: top;\n            max-width: 100%;\n            height: auto;\n          }",prepend:!1};i(e)}else i()})(),()=>{n.forEach((e=>URL.revokeObjectURL(e)))})}),[e,t]),n}(c,u),h=KT(o,c,u,n);let p;m.length>0&&(p=h||d);const g=[];let b;if(o&&(b=m.find((e=>"html"===e.type)),b||(b=m.find((e=>"text"===e.type)))),b||(b=jT),"html"===b.type||"text"===b.type){const e=!!o&&!o.trusted&&!a;g.push(s.createElement(eT,{style:n,blockHTTPLeaks:e,bodyParts:"html"===b.type?m:void 0,fromAddress:i,inject:p,isRss:r,onUnblockExternalContent:l,ref:t,textOrHtml:b,showRaw:u,key:"mainBody",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageBodyPart.jsx",lineNumber:145,columnNumber:21}}))}return g}));var $T="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Hint.jsx";function XT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const QT="HintTooltip",qT={show:100,hide:300},JT="top",ek={position:"relative"};class tk extends s.Component{constructor(...e){super(...e),XT(this,"_container",s.createRef()),XT(this,"_hint",s.createRef()),XT(this,"state",{visible:!1,at:JT,top:0,left:0}),XT(this,"getScrollParent",(e=>{const{overflowY:t}=this.context.getComputedStyle(e);return!["visible","hidden"].includes(t)&&e.scrollHeight>e.clientHeight?e:e.parentElement?this.getScrollParent(e.parentElement):e})),XT(this,"getHintPosition",(()=>{let e=this.props.position||JT;const{top:t,left:n,width:s,height:i}=this._container.current?.getBoundingClientRect()||{top:0,left:0,width:0,height:0},{width:r,height:a}=this._hint.current?.getBoundingClientRect()||{width:0,height:0};if(!this.props.position){const o=this._container.current?.parentElement?this.getScrollParent(this._container.current.parentElement):this.context.document.documentElement;if(!o)return;const{top:l,left:c}=o.getBoundingClientRect()||{top:0,left:0},{clientHeight:u,clientWidth:m}=o,d={left:n-c-r>0,right:n-c+s+r<m,bottom:t-l+i+a<u,top:t-l-a>0};switch(e){case"left":d.left||(e="right",d.right||(e="top",d.top||(e="bottom")));break;case"right":d.right||(e="left",d.left||(e="top",d.top||(e="bottom")));break;case"bottom":d.bottom||(e="top",d.top||(e="right",d.right||(e="left")));break;default:d.top||(e="bottom",d.bottom||(e="right",d.right||(e="left")))}}let o,l;switch(e){case"left":o=(i-a)/2,l=-r;break;case"right":o=(i-a)/2,l=s;break;case"bottom":o=i,l=(s-r)/2;break;default:o=-a,l=s-r>0?s-r:(s-r)/2}this.setState({at:e,top:o,left:l})})),XT(this,"showHint",(()=>{const{show:e}=this.props.delay||qT;clearTimeout(this._timeout),this._timeout=setTimeout((()=>this.setState({visible:!0},(()=>this.getHintPosition()))),e)})),XT(this,"hideHint",(()=>{const{hide:e}=this.props.delay||qT;clearTimeout(this._timeout),this._timeout=setTimeout((()=>this.setState({visible:!1})),e)})),XT(this,"toggleHint",(()=>{const{show:e,hide:t}=this.props.delay||qT,n=this.state.visible;clearTimeout(this._timeout),this._timeout=setTimeout((()=>this.setState({visible:n},(()=>n&&this.getHintPosition()))),n?t:e)}))}componentWillUnmount(){clearTimeout(this._timeout)}render(){const{label:e,className:t}=this.props,{at:n,top:i,left:r}=this.state;return s.createElement("div",{style:ek,className:bn()(t,QT,[`HintTooltip--${n||JT}`],["HintTooltip--"+(this.state.visible?"Visible":"Hidden")]),role:"tooltip",ref:this._container,onFocus:this.showHint,onBlur:this.hideHint,onMouseEnter:this.showHint,onMouseLeave:this.hideHint,onTouchEnd:this.toggleHint,__source:{fileName:$T,lineNumber:200,columnNumber:7}},s.createElement("div",{ref:this._hint,style:{top:i,left:r},className:"HintTooltip__content",__source:{fileName:$T,lineNumber:215,columnNumber:9}},e),this.props.children)}}XT(tk,"contextType",Vs.Z);var nk=n(32207),sk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeaderButtonWithDropdown.jsx";function ik(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rk extends s.Component{constructor(...e){super(...e),ik(this,"state",{activeItemIndex:-1,openDropdownMenu:!1,contact:this.props.mailAddress?ra.Z.getContactsWithAddress(this.props.mailAddress.address):void 0,status:""}),ik(this,"contactChanged",(()=>{if(this.props.mailAddress){const e=this.props.mailAddress.address.toLowerCase(),t=this.state.contact&&ra.Z.getNodeById(this.state.contact.id);t?.emailAddresses.some((t=>t.emailAddress.toLowerCase()===e))?this.setState({contact:t}):this.setState({contact:ra.Z.getContactsWithAddress(e)})}})),ik(this,"onClickDropdown",(()=>{this.setState((e=>({openDropdownMenu:!e.openDropdownMenu})))})),ik(this,"openMenu",(()=>{this.setState({openDropdownMenu:!0})})),ik(this,"closeMenu",(()=>{this.setState({activeItemIndex:-1,openDropdownMenu:!1})})),ik(this,"handleKeyDown",(e=>{switch(e.key){case"Escape":case"Tab":this.closeMenu();break;case"Enter":case"Space":if(e.stopPropagation(),e.preventDefault(),this.state.activeItemIndex>-1){const e=this.getDropdownMenuItems()[this.state.activeItemIndex];e.onSuccessText?e.handler().then((()=>this.onMenuItemClicked(e.onSuccessText)),(()=>this.onMenuItemClicked(e.onErrorText))):(e.handler(),this.closeMenu())}else this.props.onClick();break;case"ArrowUp":this.setState((e=>{const t=e.activeItemIndex-1;if(t>-1)return{activeItemIndex:t}}));break;case"ArrowDown":this.setState((e=>{const t=e.activeItemIndex+1;if(t<this.getDropdownMenuItems().length)return{openDropdownMenu:!0,activeItemIndex:t}}))}})),ik(this,"onMenuItemClicked",(e=>{this.statusTimeout&&clearTimeout(this.statusTimeout);this.setState({status:e}),this.closeMenu(),this.statusTimeout=setTimeout((()=>this.setState({status:""})),1e3)})),ik(this,"contactOrAddressString",(()=>this.props.mailAddress&&this.state.contact?this.state.contact.name?this.state.contact.name+" <"+this.props.mailAddress.address+">":this.props.mailAddress.address:this.props.buttonTitle)),ik(this,"onEditContact",(e=>{e&&(ie.Z.showContent("contacts",{setFocus:!0,selectId:e.id,reason:"edit"}),K.Z.selectContact(e.emailAddresses[0].emailAddress),$.Z.openURL(Pt.jk.internals.mailpage,{singleton:!0}))})),ik(this,"onAddContact",(e=>{ie.Z.showContent("contacts"),j.Z.newContactFromMailAddress(e,!0),K.Z.selectContact(e.address),$.Z.openURL(Pt.jk.internals.mailpage,{singleton:!0})})),ik(this,"getDropdownMenuItems",(()=>{if(this.props.mailAddress){const e=this.props.mailAddress;return this.state.contact?[...this.props.dropdownMenuItems,{...(0,Mn.Z)("Edit contact"),handler:this.onEditContact.bind(this,this.state.contact)}]:[...this.props.dropdownMenuItems,{...(0,Mn.Z)("Add to contacts"),handler:this.onAddContact.bind(this,e)}]}return this.props.dropdownMenuItems})),ik(this,"onContextMenu",(e=>{const t=this.getDropdownMenuItems().map((e=>({label:e.label,labelEnglish:e.labelEnglish,handler:e.handler})));(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))}componentDidMount(){this.props.mailAddress&&ra.Z.addChangeListener(this.contactChanged)}componentWillUnmount(){this.props.mailAddress&&ra.Z.removeChangeListener(this.contactChanged)}render(){return s.createElement("div",{className:"button-with-dropdown-wrapper",__source:{fileName:sk,lineNumber:238,columnNumber:7}},s.createElement("div",{className:"button-with-dropdown-container",onMouseLeave:this.closeMenu,title:this.contactOrAddressString(),onContextMenu:this.onContextMenu,__source:{fileName:sk,lineNumber:239,columnNumber:9}},s.createElement("button",{onKeyDown:this.handleKeyDown,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.props.onClick,__source:{fileName:sk,lineNumber:244,columnNumber:11}},this.state.contact&&s.createElement("img",{src:this.state.contact.avatarUrl||nk.g,__source:{fileName:sk,lineNumber:249,columnNumber:36}}),s.createElement("span",{__source:{fileName:sk,lineNumber:250,columnNumber:13}},this.contactOrAddressString())),s.createElement("button",{tabIndex:-1,onMouseDown:this.onClickDropdown,dangerouslySetInnerHTML:{__html:cn.yaZ.medium},__source:{fileName:sk,lineNumber:252,columnNumber:11}}),this.state.openDropdownMenu&&s.createElement("ul",{className:"dropdown-menu",__source:{fileName:sk,lineNumber:258,columnNumber:13}},this.getDropdownMenuItems().map(((e,t)=>s.createElement("li",{key:e.label,onMouseUp:e.onSuccessText?()=>e.handler().then((()=>this.onMenuItemClicked(e.onSuccessText)),(()=>this.onMenuItemClicked(e.onErrorText))):()=>{e.handler&&e.handler(),this.closeMenu()},className:this.state.activeItemIndex===t?"active":void 0,__source:{fileName:sk,lineNumber:260,columnNumber:17}},e.label)))),this.state.status&&s.createElement("div",{className:"status",__source:{fileName:sk,lineNumber:278,columnNumber:33}},this.state.status)))}}ik(rk,"contextType",Vs.Z);const ak=rk;var ok="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeaderAddressField.jsx";function lk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ck extends s.PureComponent{constructor(...e){super(...e),lk(this,"state",{maxShown:5}),lk(this,"onClickAddress",(e=>{e.address&&Zd.ZP.enableSenderView(e.address)}))}render(){const e=this.state.maxShown,t=this.props.mailAddresses;return s.createElement("span",{key:"detail",className:"detail",__source:{fileName:ok,lineNumber:40,columnNumber:7}},t.slice(0,e).map(((e,t)=>{const n=(0,fe.li)(e),i=[{...(0,Mn.Z)("Copy address"),handler:()=>al.Z.copyTextToClipboard(n),onSuccessText:(0,ue.Z)("Copied to clipboard",[n]),onErrorText:(0,ue.Z)("Failed to copy address")},{...(0,Mn.Z)("See messages to and from address"),handler:this.onClickAddress.bind(this,e)}];return s.createElement(ak,{key:n+String(t),prefValues:this.props.prefValues,onClick:this.onClickAddress.bind(this,e),mailAddress:e,buttonTitle:n,dropdownMenuItems:i,__source:{fileName:ok,lineNumber:58,columnNumber:15}})})),t.length>this.state.maxShown&&s.createElement("a",{key:"more",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>this.setState({maxShown:t.length}),__source:{fileName:ok,lineNumber:70,columnNumber:11}},(0,ue.Z)("... $1 more","... $1 more",[t.length-this.state.maxShown,t.length-this.state.maxShown])))}}const uk=ck;var mk=n(76955),dk=n(25834),hk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailLabels.jsx";function pk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gk extends s.Component{constructor(...e){super(...e),pk(this,"mailLabelRef",s.createRef()),pk(this,"state",{breakpoint:!1,componentMaxWidth:32,shouldDetachObserver:!1,numberOfVisibleLabelsAllowed:0,numberOfCheckedLabels:(0,Dd.Q3)(this.props.flags).length}),pk(this,"observerHandler",(()=>{0===this.state.numberOfCheckedLabels?this.setState({shouldDetachObserver:!0}):this.setState({shouldDetachObserver:!1})})),pk(this,"observeTargetHandler",(e=>{const t=e[0].target;this.setNumberOfVisibleLabelsAllowed(t.clientWidth),t.clientWidth>this.state.componentMaxWidth&&this.setBreakpoint(!1),t.clientWidth<this.state.componentMaxWidth&&this.setBreakpoint(!0)})),pk(this,"setNumberOfVisibleLabelsAllowed",(e=>{const t=e/(32+(3+3*(e/32)));this.setState({numberOfVisibleLabelsAllowed:t})})),pk(this,"setNumberOfCheckedLabels",(e=>{this.setState({numberOfCheckedLabels:e})})),pk(this,"setBreakpoint",(e=>{this.setState({breakpoint:e})})),pk(this,"setComponentMaxWidth",(e=>{this.setState({componentMaxWidth:e})})),pk(this,"getComponentMaxWidth",(()=>{const e=(0,Dd.Q3)(this.props.flags);return(32+3*this.state.numberOfVisibleLabelsAllowed)*e.length}))}componentDidMount(){this.state.numberOfCheckedLabels>0&&(this.setComponentMaxWidth(this.getComponentMaxWidth()),this.observerHandler())}componentDidUpdate(e,t){const n=this.mailLabelRef.current&&this.mailLabelRef.current.clientWidth;this.props.flags!==e.flags&&(this.setComponentMaxWidth(this.getComponentMaxWidth()),this.setNumberOfCheckedLabels((0,Dd.Q3)(this.props.flags).length),this.observerHandler(),n&&(n>this.state.componentMaxWidth&&this.setBreakpoint(!1),n<this.state.componentMaxWidth&&this.setBreakpoint(!0)))}render(){if(0===this.state.numberOfCheckedLabels)return null;let e=[],t=[];this.state.breakpoint?(e=(0,Dd.Q3)(this.props.flags).slice(this.state.numberOfVisibleLabelsAllowed).map((e=>(0,Dd.Xw)(e))),t=(0,Dd.Q3)(this.props.flags).slice(0,this.state.numberOfVisibleLabelsAllowed).map((e=>(0,Dd.Xw)(e)))):t=(0,Dd.Q3)(this.props.flags).map((e=>(0,Dd.Xw)(e)));const n=e.join("\n");return s.createElement("div",{className:this.props.className,ref:this.mailLabelRef,__source:{fileName:hk,lineNumber:131,columnNumber:7}},s.createElement(ei,{className:"MailLabels-Observer",onResize:this.observeTargetHandler,attached:this.state.shouldDetachObserver,__source:{fileName:hk,lineNumber:135,columnNumber:9}},s.createElement("ul",{className:"MailLabels-Container",style:this.props.style,__source:{fileName:hk,lineNumber:140,columnNumber:11}},t.map(((e,t)=>s.createElement("li",{title:(0,Dd.Xw)(e),className:"MailLabels-Label",key:e,__source:{fileName:hk,lineNumber:144,columnNumber:15}},(0,Dd.Xw)(e)))),e.length>0&&s.createElement("li",{title:n,className:"MailLabels-Label MailLabels-Tooltip",__source:{fileName:hk,lineNumber:152,columnNumber:13}},`+${e.length}`))))}}const bk=gk;var Nk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeader.jsx";function fk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _k=[P.kDownloadsNotifyOnComplete,P.kDownloadsOpenPanelOnNew,P.kDownloadsStartAutomatically,P.kKeyboardTabToAll],vk=(0,ue.Z)("Reply To"),Ek=(0,ue.Z)("Does not match the “From” address. Therefore make sure you trust this address before sending.");function Ck(e){return e?g()(e).format("LLL"):""}class wk extends s.PureComponent{constructor(e){let t;super(e),fk(this,"activeMessageStoreChanged",(()=>{if(rl.Z.getActiveListEntry()===this.props.listEntry){const e=rl.Z.getAttachments(),t=rl.Z.getRaw();this.setState({attachments:e,raw:t})}})),fk(this,"onClickSubject",(()=>{Zd.ZP.enableThreadedView()})),fk(this,"_toggleSenderAsMailingList",(()=>{this.props.fromAddress&&K.Z.toggleSenderAsMailingList(this.props.fromAddress)})),fk(this,"_copyHeader",(()=>{const{from:e,listEntry:t,message:n}=this.props,{sentDate:s,subject:i}=t,r=n?n.to:$m.Z.get(t.toIds),{cc:a=[],bcc:o=[]}=n||{},l=[[(0,ue.Z)("mail","From"),e],[(0,ue.Z)("To"),r],[(0,ue.Z)("Cc"),a],[(0,ue.Z)("Bcc"),o]];let c=i+"\n"+Ck(s);for(const[e,t]of l)t.length>0&&(c+=`\n${e}: ${(0,fe.Rz)(t)}`);c+="\n",al.Z.copyTextToClipboard(c)})),fk(this,"getContextMenuItemsPromise",((e,t)=>{const n=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"COMMAND_PAGE_BACK":return{visible:ll.Z.canGoBack(),...n(e,{})};case"COMMAND_PAGE_FORWARD":return{visible:ll.Z.canGoForward(),...n(e,{})};case"CONTEXT_COPY":return{handler:this._copyHeader,...n(e,{})};case"COMMAND_TAB_VIEW_PAGE_SOURCE":return{handler:this.props.toggleRaw,checked:this.props.showRaw,...n(e,{})};case"CONTEXT_SENDER_IS_MAILING_LIST":return{handler:this._toggleSenderAsMailingList,checked:Cm.C.isSenderMailingList(this.props.fromAddress),...n(e,{})};default:return{...n(e,{})}}}))})),fk(this,"handleOnCloseDialog",(()=>{this.setState({dialogParentElement:null})})),fk(this,"showDialog",(e=>{e.webview=this.refs.webview,this.setState({dialogParentElement:this.refs.webpagecontainer,customData:e})})),fk(this,"onHeaderContextMenu",(e=>(e.persist(),e.preventDefault(),e.stopPropagation(),this.getContextMenuItemsPromise("mailheader",e).then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)})),!1))),fk(this,"onAttachmentContextMenu",((e,t)=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)})),fk(this,"renderAttachmentButtons",((e,t)=>e.slice(0,t).map(((e,t)=>{const n=[{...(0,Mn.Z)("Save"),handler:()=>this.onClickAttachmentDropdown(e)},{...(0,Mn.Z)("Save As"),handler:()=>this.onClickAttachmentDropdown(e,"saveas")}];return s.createElement("button",{className:"attachment-button",key:e.filename+String(t),onClick:this.onClickAttachment.bind(this,e),title:e.filename,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onContextMenu:this.onAttachmentContextMenu.bind(this,n),__source:{fileName:Nk,lineNumber:362,columnNumber:9}},e.filename)})))),fk(this,"renderSubjectButton",(e=>s.createElement(ak,{prefValues:this.props.prefValues,onClick:this.onClickSubject,buttonTitle:e,dropdownMenuItems:[{...(0,Mn.Z)("Copy subject"),handler:()=>al.Z.copyTextToClipboard(e),onSuccessText:(0,ue.Z)("Copied to clipboard"),onErrorText:(0,ue.Z)("Failed to copy subject")},{...(0,Mn.Z)("See message thread"),handler:this.onClickSubject}],__source:{fileName:Nk,lineNumber:378,columnNumber:7}}))),fk(this,"shouldWarnUser",(()=>{const{from:e,message:t}=this.props;return!!(t&&t.replyTo[0]&&e[0]&&(t.replyTo.length>1||e.length>1||e[0].address!==t.replyTo[0].address))}));let n=[];rl.Z.getActiveListEntry()===e.listEntry&&(n=rl.Z.getAttachments(),t=rl.Z.getRaw()),this.state={attachments:n,dialogParentElement:null,customData:null,maxShownAttachments:5,raw:t}}componentDidMount(){rl.Z.addChangeListener(this.activeMessageStoreChanged)}componentWillUnmount(){rl.Z.removeChangeListener(this.activeMessageStoreChanged)}async maybeParse(e){if("attachment"===e.type)return e;if(this.state.raw){const[t]=await this.state.raw.parse(e.mimeTree);if(t&&"attachment"===t.type)return t}}async onClickAttachment(e){const t=await this.maybeParse(e);t&&(this.props.prefValues[P.kDownloadsStartAutomatically]?((0,dk.Ve)(t),this.props.prefValues[P.kDownloadsOpenPanelOnNew]&&re.ZP.canAutoOpen("downloads")&&ie.Z.toggleContent("downloads")):this.showDialog((0,dk.JX)(t)))}async onClickAttachmentDropdown(e,t){const n=await this.maybeParse(e);n&&((0,dk.Ve)(n,t),this.props.prefValues[P.kDownloadsOpenPanelOnNew]&&re.ZP.canAutoOpen("downloads")&&ie.Z.toggleContent("downloads"))}async onClickDownloadAll(){if(!this.state.raw)return;(await this.state.raw.parseAttachments()).forEach((e=>(0,dk.Ve)(e)))}onClickSaveAll(){const{raw:e}=this.state;e&&h.Z.fileSystem.chooseEntry({type:"openDirectory"},(t=>{const n=h.Z.runtime.lastError;n?"User cancelled"!==n.message&&console.error("Error saving attachments",n.message||n):t?h.Z.fileSystem.getWritableEntry(t,(n=>{const s={create:!0};e.parseAttachments().then((e=>{for(const t of e){const e=(0,dk.up)(t);n.getFile((0,dk.BZ)(t.filename),s,(t=>{t.createWriter((t=>{t.write(e)}))}))}if(this.props.prefValues[P.kDownloadsNotifyOnComplete]){const e=new Notification(this.props.fromAddress,{body:(0,ue.Z)("Attachments have been saved to $1",t.name),icon:"resources/mail_notification_icon.png"});setTimeout((()=>e.close()),he.QM)}}))})):console.error("Error saving attachments, directory entry missing")}))}render(){const{listEntry:e,message:t}=this.props,{sentDate:i,sources:r,subject:a}=e,{cc:o=[],bcc:l=[],replyTo:c=[]}=t||{},u=t?t.to:$m.Z.get(e.toIds),m=(0,Dd.Zr)(e.flags).toLowerCase(),d=this.shouldWarnUser(),h=[],p=[];return Cm.C.getByIds([...r.keys()]).forEach((e=>{const{accountId:t,path:n}=e;h.push(t),p.push(n)})),s.createElement("header",{onContextMenu:this.onHeaderContextMenu,className:bn()({"mail-detail-header":!0,"is-unread":jm.Z.call(r)}),__source:{fileName:Nk,lineNumber:427,columnNumber:7}},this.state.dialogParentElement&&this.state.customData&&s.createElement(Zr,{customData:this.state.customData,onClose:this.handleOnCloseDialog,__source:{fileName:Nk,lineNumber:435,columnNumber:11}}),a&&s.createElement("h1",{className:"subject",ref:"Subject",__source:{fileName:Nk,lineNumber:442,columnNumber:11}},this.renderSubjectButton(a)),s.createElement("div",{className:"mail-indicators",__source:{fileName:Nk,lineNumber:449,columnNumber:9}},mk.Z.isMessageDeleted(r)&&s.createElement("span",{className:"mail-status-indicator read-status trash",style:{display:"flex"},dangerouslySetInnerHTML:{__html:cn.nre.small},__source:{fileName:Nk,lineNumber:451,columnNumber:11}}),(0,Dd.XN)(this.props.listEntry)&&s.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:cn.upG.small},__source:{fileName:Nk,lineNumber:459,columnNumber:11}}),(0,Dd.B_)(this.props.listEntry)&&s.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:cn.hGk.small},__source:{fileName:Nk,lineNumber:466,columnNumber:11}}),m&&s.createElement("span",{className:`flag-color flag-${m}`,title:(0,ue.Z)("Flagged"),dangerouslySetInnerHTML:{__html:cn.nyn.small},__source:{fileName:Nk,lineNumber:473,columnNumber:11}})),s.createElement("div",{ref:"webpageview",className:"mail-details",__source:{fileName:Nk,lineNumber:481,columnNumber:9}},s.createElement("div",{ref:"webpagecontainer",className:"mail-detail-main",__source:{fileName:Nk,lineNumber:482,columnNumber:11}},this.props.from.length>0&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",__source:{fileName:Nk,lineNumber:485,columnNumber:15}},(0,ue.Z)("mail","From")),s.createElement(uk,{ref:"From",prefValues:this.props.prefValues,mailAddresses:this.props.from,__source:{fileName:Nk,lineNumber:486,columnNumber:15}})),c.length>0&&!(0,nd.default)(this.props.from,c)&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",__source:{fileName:Nk,lineNumber:494,columnNumber:15}},d?s.createElement(tk,{label:Ek,position:"right",className:"warning",__source:{fileName:Nk,lineNumber:496,columnNumber:21}},vk):vk),s.createElement(uk,{prefValues:this.props.prefValues,mailAddresses:c,__source:{fileName:Nk,lineNumber:505,columnNumber:15}})),u.length>0&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",__source:{fileName:Nk,lineNumber:513,columnNumber:13}},(0,ue.Z)("To")),s.createElement(uk,{ref:"To",prefValues:this.props.prefValues,mailAddresses:u,__source:{fileName:Nk,lineNumber:514,columnNumber:13}})),o.length>0&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",title:(0,ue.Z)("Carbon copy"),__source:{fileName:Nk,lineNumber:522,columnNumber:15}},(0,ue.Z)("Cc")),s.createElement(uk,{prefValues:this.props.prefValues,mailAddresses:o,__source:{fileName:Nk,lineNumber:523,columnNumber:15}})),l.length>0&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",title:(0,ue.Z)("Blind carbon copy"),__source:{fileName:Nk,lineNumber:530,columnNumber:15}},(0,ue.Z)("Bcc")),s.createElement(uk,{prefValues:this.props.prefValues,mailAddresses:l,__source:{fileName:Nk,lineNumber:533,columnNumber:15}})),(e.attachment>0||this.state.attachments.length>0)&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",title:(0,ue.Z)("Attachment"),dangerouslySetInnerHTML:{__html:n(51843)},__source:{fileName:Nk,lineNumber:540,columnNumber:15}}),s.createElement("span",{className:"detail attachments",__source:{fileName:Nk,lineNumber:545,columnNumber:15}},this.renderAttachmentButtons(this.state.attachments,this.state.maxShownAttachments),this.state.attachments.length>this.state.maxShownAttachments&&s.createElement("a",{tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:()=>this.setState((e=>({maxShownAttachments:e.attachments.length}))),__source:{fileName:Nk,lineNumber:549,columnNumber:19}},(0,ue.Z)("... $1 more","... $1 more",[this.state.attachments.length-this.state.maxShownAttachments,this.state.attachments.length-this.state.maxShownAttachments])),this.state.attachments.length>1&&s.createElement("button",{className:"attachment-button",href:"#",onClick:this.onClickSaveAll.bind(this),__source:{fileName:Nk,lineNumber:561,columnNumber:19}},(0,ue.Z)("attachments","Save All")),this.state.attachments.length>1&&s.createElement("button",{className:"attachment-button",href:"#",onClick:this.onClickDownloadAll.bind(this),__source:{fileName:Nk,lineNumber:569,columnNumber:19}},(0,ue.Z)("attachments","Download All")))),(0,Dd.OK)(e.flags)&&s.createElement(s.Fragment,null,s.createElement("span",{className:"label",__source:{fileName:Nk,lineNumber:581,columnNumber:15}},(0,ue.Z)("Label")),s.createElement("div",{className:"adjustment-mail-labels",__source:{fileName:Nk,lineNumber:582,columnNumber:15}},s.createElement(bk,{flags:e.flags,__source:{fileName:Nk,lineNumber:583,columnNumber:17}})))),s.createElement("div",{className:"mail-detail-side",__source:{fileName:Nk,lineNumber:589,columnNumber:11}},!h.some((e=>e===he.u4))&&s.createElement("div",{className:"mail-detail-item",__source:{fileName:Nk,lineNumber:591,columnNumber:15}},p.join(", ")),s.createElement("div",{className:"mail-detail-item",ref:"Date",__source:{fileName:Nk,lineNumber:595,columnNumber:13}},Ck(i)))))}}fk(wk,"contextType",Vs.Z);const yk=(0,bi.Z)(wk,_k);var Sk=n(55079),Tk=n(31491);const kk={call:function(e){return St.Z.pop.where("searchListId").equals(e).toArray()}};var Ik=n(43154),Ak=n(34155),Zk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDetail.jsx";function Pk(){return Pk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pk.apply(this,arguments)}function Dk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mk(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ok(e,t,"set"),n),n}function Ok(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}async function xk(e,t,n){const{id:s,sentDate:i}=t,{accountId:r}=n;await e.writeBufferToDisk(r,i,s),"imap"===n.type?await(0,_a.h)(r,s):await St.Z.pop.update([r,n.uidl],{headersOnly:!1})}var Lk=new WeakMap;class Rk extends s.Component{constructor(e,t){super(e),Lk.set(this,{writable:!0,value:void 0}),Dk(this,"messageBody",s.createRef()),Dk(this,"messageHeader",s.createRef()),Dk(this,"isRssFeedMessage",!1),Dk(this,"_setIfActive",(e=>{Ak.nextTick((()=>{const t=this.messageBody.current?.refWebview.current;e.pageIsActive?(Zd.ZP.setActiveMailDetail(this),t&&uC.setActiveWebView(t)):(Zd.ZP.clearIfActive(this),t&&uC.clearIfActive(t))}))})),Dk(this,"_markSeenIfHasBody",(()=>{K.Z.markSeenDebounced.cancel();const{listEntry:e}=this.props,{message:t,raw:n}=this.state;if(e&&t){const{bodyParts:s}=t;e&&e.unseen&&(n||s)&&K.Z.markSeenDebounced(e)}})),Dk(this,"onConnectionChanged",(e=>{Wm.isDisconnected(e.accountId)||this.state.raw||this.props.listEntry&&(at.ZP.log("Mail",["detail-view","fetch-message"],"connection established - fetch message"),this.fetchMessage(this.props))})),Dk(this,"checkIfReadyToReadFromDisk",(e=>{"finishIndexProgress"===e.target&&(Cm.C.removeChangeListener(this.checkIfReadyToReadFromDisk),this.fetchMessage(this.props))})),Dk(this,"onCommandSpy",(e=>{this.props.pageIsActive&&this.toggleRaw()})),Dk(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||{};this.setState({style:e})})),Dk(this,"addMessageBody",(async(e,t)=>{const n=(0,At.H)(t);if(!await b.Z.mailPrivate.addMessageBody(e,n))throw new Error(`Failed to add body to FTS db for id ${e}`)})),Dk(this,"fetchMessage",(async e=>{Wm.removeChangeListener(this.onConnectionChanged);const{listEntry:t}=e;if(this.setState({message:void 0,raw:void 0,showRaw:!1},(()=>{Ak.nextTick(Zd.ZP.refreshActiveMessage)})),!t)return void at.ZP.log("Mail",["detail-view","fetch-message"],"no listEntry");const{id:n,sentDate:s,sourceFilterIds:i,fromIds:r}=t;this._currentId=n;const a=await Tk.Z.call(n);if(!a)return void at.ZP.log("Mail",["detail-view","fetch-message"],"no message");const o=()=>{const e=this._currentId!==a.id;return e&&at.ZP.log("Mail",["detail-view","fetch-message"],"selection changed"),e};if(o())return;const l=A.ZP.get(P.kMailAccounts),c=ll.Z.getSelectedFolder(),u=c&&l.find((e=>e.MAIL_EMAIL===c.accountId)),m=Cm.C.getByIds(i),d=[];if(c&&u)for(const e of m)e.accountId!==c.accountId||c.path!==he.ym&&e.path!==c.path||d.push(e);0===d.length&&d.push(...m);const h=d.filter((e=>{const n=t.sources.get(e.id);return n&&!n.internal}));let p,g,b;for(const e of d)if(p=await Ik.Z.call(e.accountId,n,s),p)break;if(!o()){if(this.isRssFeedMessage=d.some((e=>e.accountId===he.u4)),!p){if(this.setState({message:a},Zd.ZP.refreshActiveMessage),this.isRssFeedMessage)return void at.ZP.warn("Mail",["detail-view","fetch-message"],"Unexpected rss messages without a raw");if(0===h.length)return void at.ZP.log("Mail",["detail-view","fetch-message"],"no external source filter");const e=l.filter((e=>e.accountType===he.s9.IMAP&&!e.offline)),t=h.filter((t=>e.find((e=>e.MAIL_EMAIL===t.accountId)))),s={},i=l.filter((e=>e.accountType===he.s9.POP));if(i.length>0){const e=await Ym.Z.loadAllAccounts(),t=h.filter((e=>i.find((t=>t.MAIL_EMAIL===e.accountId))));for(const n of t){const t=e.find((e=>e.MAIL_EMAIL===n.accountId));t&&(s[n.accountId]=t)}}for(const e of t){const{accountId:t,path:n}=e;try{if(p=await te.Z.fetchRawOfMessage(t,n,a.id),p){g={accountId:t,type:"imap"};break}}catch(e){at.ZP.info(e)}}if(!p&&Object.keys(s).length>0){const e=(await kk.call(n)).filter((e=>e.headersOnly));for(const t of e){const{accountId:e,uidl:n}=t,i=s[e];try{p=await le.getPopMessage(i,n,a),g={accountId:e,type:"pop",uidl:n};break}catch(e){at.ZP.info(e)}}}if(!p)return at.ZP.log("Mail",["detail-view","fetch-message"],"Failed to fetch message"),void Wm.addChangeListener(this.onConnectionChanged);if(o()){if(p&&g){const e=await rT(p),t=await e.parseMainPart();await this.addMessageBody(n,t),await xk(e,a,g),K.Z.runStoredQueryFilters([n]),h.length>1&&(0,Sk.Z)({operation:"BUFFER_OPERATION_FETCH_RAW_FOR_ALL_SOURCES",searchListId:n}).then(ee.Z.flushBuffer)}return}}if(this.isRssFeedMessage){b=ft(new TextDecoder("utf-8").decode(p))}this.setState({isSenderTrusted:this.isRssFeedMessage||$m.Z.get(r).every((e=>ra.Z.isTrustedEmailAddress(e.address))),message:this.isRssFeedMessage?{...a,bodyParts:b}:a,raw:this.isRssFeedMessage?new lT({contentType:{value:"application/rss+xml",params:{}},contentID:void 0,disposition:void 0,transferEncoding:"7bit",bodyStart:0,byteLength:p.byteLength,byteOffset:p.byteOffset},p):await rT(p)},(async()=>{Zd.ZP.refreshActiveMessage(),h.length>1&&(0,Sk.Z)({operation:"BUFFER_OPERATION_FETCH_RAW_FOR_ALL_SOURCES",searchListId:n}).then(ee.Z.flushBuffer);const e=this.state.raw;if(!e||!g)return void(e||at.ZP.log("Mail",["detail-view","fetch-message"],"no rawWrapper"));const t=await e.parseMainPart();await this.addMessageBody(n,t),await xk(e,a,g),K.Z.runStoredQueryFilters([n])}))}})),Dk(this,"toggleRaw",(()=>{this.setState((e=>({showRaw:!e.showRaw})))})),Dk(this,"onUnblockExternalContent",(e=>{const t=this.state.message;var n;if(t)if(e){const e=t.from;e[0]&&(j.Z.putTrustedEmailAddress(e[0]),this.setState({isSenderTrusted:!0}))}else n=t.id,St.Z.messages.update(n,{trusted:!0}),this.setState((e=>e.message?{message:{...e.message,trusted:!0}}:null))})),this.state={style:Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||{},message:void 0,showRaw:!1,isSenderTrusted:!1}}componentDidMount(){Ys.Z.addListener("COMMAND_TAB_VIEW_PAGE_SOURCE",this.onCommandSpy),Mk(this,Lk,Z.Z.addListener(this.onThemeStoreChanged)),Cm.C.getIndex().length>0?this.fetchMessage(this.props):Cm.C.addChangeListener(this.checkIfReadyToReadFromDisk),this._setIfActive(this.props)}_isBeingActivated(e){return!this.props.pageIsActive&&e.pageIsActive}UNSAFE_componentWillReceiveProps(e){const t=e.listEntry?e.listEntry.id:void 0;if((this.props.listEntry?this.props.listEntry.id:void 0)!==t)this.fetchMessage(e);else if(this._isBeingActivated(e)){if(void 0!==t&&Ad.drafts[t]){const t=yd.getComposer();t&&t.flushPendingChanges().then((()=>this.fetchMessage(e)))}Ad.drafts={}}e.pageIsActive!==this.props.pageIsActive&&this._setIfActive(e)}shouldComponentUpdate(e,t){return e.hasNoListEntries!==this.props.hasNoListEntries||(!po(this.state,t)||!!this.props.prefValues&&!!e.prefValues&&this.props.prefValues[P.kMailViewLayout]!==e.prefValues[P.kMailViewLayout])}componentDidUpdate(){this._markSeenIfHasBody()}componentWillUnmount(){var e,t;Ys.Z.removeListener("COMMAND_TAB_VIEW_PAGE_SOURCE",this.onCommandSpy),Cm.C.removeChangeListener(this.checkIfReadyToReadFromDisk),Wm.removeChangeListener(this.onConnectionChanged),(e=this,t=Lk,function(e,t){return t.get?t.get.call(e):t.value}(e,Ok(e,t,"get"))).remove(),this._currentId=-1,Ak.nextTick((()=>{Zd.ZP.clearIfActive(this);const e=this.messageBody.current?.refWebview.current;e&&uC.clearIfActive(e)}))}render(){let e=[],t="";const{listEntry:n,hasNoListEntries:i}=this.props;if(n){const{fromIds:s}=n;e=$m.Z.get(s),t=e.length>0?e[0].address:""}return s.createElement("div",{id:"mail_detail",__source:{fileName:Zk,lineNumber:532,columnNumber:7}},n&&s.createElement(yk,{ref:this.messageHeader,message:this.state.message,listEntry:n,toggleRaw:this.toggleRaw,showRaw:this.state.showRaw,from:e,fromAddress:t,__source:{fileName:Zk,lineNumber:534,columnNumber:11}}),s.createElement("div",Pk({},!this.props.listEntry&&{style:{display:"none"}},{className:"message-body-part",__source:{fileName:Zk,lineNumber:544,columnNumber:9}}),s.createElement(YT,{ref:this.messageBody,isRss:this.isRssFeedMessage,style:this.state.style,message:this.state.message,raw:this.state.raw,showRaw:this.state.showRaw,isSenderTrusted:this.state.isSenderTrusted,fromAddress:t,onUnblockExternalContent:this.onUnblockExternalContent,__source:{fileName:Zk,lineNumber:548,columnNumber:11}})),!n&&!i&&s.createElement("section",{className:"no-message-selected",__source:{fileName:Zk,lineNumber:561,columnNumber:11}},s.createElement("div",{dangerouslySetInnerHTML:{__html:cn.Fii},__source:{fileName:Zk,lineNumber:562,columnNumber:13}}),s.createElement("div",{__source:{fileName:Zk,lineNumber:565,columnNumber:13}},(0,ue.Z)("No message selected"))))}}Dk(Rk,"contextType",Vs.Z);const Bk=Rk;var Fk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailMessage.jsx";function Uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Vk extends s.PureComponent{constructor(...e){super(...e),Uk(this,"state",{listEntry:void 0}),Uk(this,"onMailFilterStoreChange",(e=>{"finishIndexProgress"===e.target&&(this.getListEntry(),Cm.C.removeChangeListener(this.onMailFilterStoreChange))}))}componentDidMount(){Cm.C.isInitialized()?this.getListEntry():Cm.C.addChangeListener(this.onMailFilterStoreChange)}componentWillUnmount(){Cm.C.removeChangeListener(this.onMailFilterStoreChange)}getListEntry(){const e=Cm.C.getListEntry(this.props.id);this.setState({listEntry:e})}render(){return s.createElement("div",{id:"mail_view",className:"top",__source:{fileName:Fk,lineNumber:47,columnNumber:7}},s.createElement(Bk,{hasNoListEntries:!0,listEntry:this.state.listEntry,pageIsActive:this.props.isActive,__source:{fileName:Fk,lineNumber:48,columnNumber:9}}))}}const Hk=Vk;var Wk="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\VerticalMailEntry.jsx";function zk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gk extends s.PureComponent{constructor(...e){super(...e),zk(this,"renderTopEntryLine",(()=>s.createElement(s.Fragment,null,this.props.isParent&&s.createElement("div",{className:"status-indicators",__source:{fileName:Wk,lineNumber:41,columnNumber:11}},s.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:n(4103)},__source:{fileName:Wk,lineNumber:42,columnNumber:13}})),s.createElement("div",{className:"subject",__source:{fileName:Wk,lineNumber:48,columnNumber:9}},this.props.queued&&s.createElement("span",{className:"mail-queued",dangerouslySetInnerHTML:{__html:n(48783)},__source:{fileName:Wk,lineNumber:50,columnNumber:13}}),s.createElement("div",{className:"subject-title",__source:{fileName:Wk,lineNumber:54,columnNumber:11}},this.props.variables.subject)),s.createElement(bk,{className:"labels",flags:this.props.flags,__source:{fileName:Wk,lineNumber:58,columnNumber:9}})))),zk(this,"renderLowerEntryLine",(()=>{const e=void 0!==this.props.level&&this.props.level>0,t=this.props.variables,i=e&&!this.props.isParent?16:0;let r=0;return"number"==typeof this.props.level&&(r=16*(this.props.level-1)),s.createElement(s.Fragment,null,s.createElement("div",{className:"status-indicators",__source:{fileName:Wk,lineNumber:79,columnNumber:9}},this.props.renderStatusIndicator(t,"vertical")),s.createElement("div",{className:"from",style:{paddingLeft:this.props.level?`${r+i}px`:0,minWidth:this.props.level?`${50+r+i}px`:0},__source:{fileName:Wk,lineNumber:83,columnNumber:9}},this.props.isParent&&e&&s.createElement("div",{className:"status-indicators",__source:{fileName:Wk,lineNumber:95,columnNumber:13}},s.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:n(4103)},__source:{fileName:Wk,lineNumber:96,columnNumber:15}})),s.createElement("div",{className:"mail-contact-name",__source:{fileName:Wk,lineNumber:103,columnNumber:11}},t.contactString),0!==this.props.attachment&&s.createElement("span",{className:"mail-status-indicator mail-attachment-indicator",title:(0,ue.Z)("Attachment"),dangerouslySetInnerHTML:{__html:n(51843)},__source:{fileName:Wk,lineNumber:107,columnNumber:13}})),e&&s.createElement(bk,{className:"labels",flags:this.props.flags,__source:{fileName:Wk,lineNumber:114,columnNumber:11}}),s.createElement("div",{className:"maildate",__source:{fileName:Wk,lineNumber:119,columnNumber:9}},s.createElement("div",{className:"mailDateInfo",__source:{fileName:Wk,lineNumber:120,columnNumber:11}},t.datetime)))})),zk(this,"getTitle",(()=>{const e=ll.Z.getSelectedFolder(),t=e&&Cm.C.getByFolder(e.accountId,e.path),n=this.props.variables,s=jm.Z.call(this.props.sources,t)?"":` (${this.props.unseen?(0,ue.Z)("Unseen"):(0,ue.Z)("Unread")})`;return`${n.subject}${s}\n`+(0,ue.Z)("From: $1",[n.contactString])+"\n"+(0,ue.Z)("Sent: $1",[n.datetime])}))}render(){const e=0===this.props.level,t=0!==this.props.level;return s.createElement("div",{className:this.props.variables.classes,"data-id":this.props.id,title:this.getTitle(),__source:{fileName:Wk,lineNumber:148,columnNumber:7}},e&&s.createElement(s.Fragment,null,s.createElement("div",{className:"mail_entry_row",__source:{fileName:Wk,lineNumber:154,columnNumber:11}},this.renderTopEntryLine()),s.createElement("div",{className:"mail_entry_row",__source:{fileName:Wk,lineNumber:155,columnNumber:11}},this.renderLowerEntryLine())),t&&s.createElement("div",{className:"mail_entry_row",__source:{fileName:Wk,lineNumber:159,columnNumber:11}},this.renderLowerEntryLine()))}}const Kk=Gk;const jk=function(e){const t=new Map;if([...e.entries()].some((([e,n])=>{if(n.deleted)return!1;const s=la.Z.get(e);if(!s)return console.error("Source filter not found "+e),!1;const{accountId:i,path:r}=s,a=ca.Z.getFolderType(i,r);if(a===he.hn)return!0;if(i.toLowerCase().endsWith("@gmail.com")){const e=t.get(i);e?e.push(a):t.set(i,[a])}return!1})))return!0;if(t.size>0)for(const e of t.values())if(1===e.length&&e[0]===he.SK)return!0;return!1};var Yk=n(19550),$k="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailEntry.jsx";function Xk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qk=[P.kCalendarRelativeDates],qk={sameDay:(0,ue.Z)("[Today] $1",["LT"]),lastDay:(0,ue.Z)("[Yesterday] $1",["LT"]),nextDay:(0,ue.Z)("[Tomorrow]",["LT"]),nextWeek:(0,ue.Z)("[Next] $1",["dddd"]),lastWeek:"dddd LT",sameElse:"LL LT"},Jk={...qk,lastWeek:"dddd LT",sameElse:"ll LT"},eI={...qk,lastWeek:"ddd LT",sameElse:"L LT"},tI=[145,170,205];class nI extends s.Component{constructor(...e){super(...e),Xk(this,"renderStatusIndicator",((e,t)=>{const i="small",r=s.createElement("span",{className:"mail-status-indicator",__source:{fileName:$k,lineNumber:86,columnNumber:26}}),{selectedFilter:a,sources:o}=this.props,l=(0,Yk.Z)(o),c=!!a&&ca.Z.getFolderType(a.accountId,a.path)===he.Nz,u=a?mk.Z.isMessageDeleted(o,a,c):mk.Z.isMessageDeleted(o),m=jm.Z.call(o,a),d=this.props.isParent&&this.props.unreadInThread&&m,h=jk(o);return l?s.createElement("span",{className:"mail-status-indicator read-status spam",dangerouslySetInnerHTML:{__html:cn.Qwh.small},__source:{fileName:$k,lineNumber:105,columnNumber:9}}):u?s.createElement("span",{className:"mail-status-indicator read-status trash",dangerouslySetInnerHTML:{__html:cn.nre.small},__source:{fileName:$k,lineNumber:112,columnNumber:9}}):h?s.createElement("span",{className:"mail-status-indicator read-status",dangerouslySetInnerHTML:{__html:cn._w1.small},__source:{fileName:$k,lineNumber:119,columnNumber:9}}):e.messageIsFlagged&&"vertical"===t?this.renderFlags(this.props,e,i):(0,Dd.XN)(this.props)?s.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:cn.upG.small},__source:{fileName:$k,lineNumber:128,columnNumber:11}}):(0,Dd.B_)(this.props)?s.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:cn.hGk.small},__source:{fileName:$k,lineNumber:134,columnNumber:9}}):!m||d?s.createElement("span",{className:"mail-status-indicator read-status",dangerouslySetInnerHTML:{__html:n(d?85382:88826)},__source:{fileName:$k,lineNumber:139,columnNumber:15}}):r})),Xk(this,"renderFlags",((e,t,n)=>s.createElement("span",{className:`mail-status-indicator ${t.flagColor}`,dangerouslySetInnerHTML:{__html:cn.nyn[n]},__source:{fileName:$k,lineNumber:152,columnNumber:7}}))),Xk(this,"renderMailEntryHorizontal",(e=>{const{columns:t}=this.props;if(!t)return null;const i=this.props.level&&!this.props.isParent?16:0;let r=0;"number"==typeof this.props.level&&(r=16*this.props.level);const a=g()(this.props.sentDate).format("LT"),o=g()().isSame(this.props.sentDate,"day");return s.createElement("div",{className:e.classes,"data-id":this.props.id,__source:{fileName:$k,lineNumber:173,columnNumber:7}},t.map((l=>{switch(l.id){case"unread":return s.createElement("label",{key:l.id,__source:{fileName:$k,lineNumber:180,columnNumber:17}},this.renderStatusIndicator(e,"horizontal"));case"sender":return s.createElement("label",{key:l.id,className:"from",__source:{fileName:$k,lineNumber:186,columnNumber:17}},s.createElement("span",{__source:{fileName:$k,lineNumber:187,columnNumber:19}},e.contactString));case"subject":return s.createElement("label",{key:l.id,className:"subject",style:{width:t?"var(--subjectWidth)":null,marginLeft:this.props.level?`${r+i}px`:0},__source:{fileName:$k,lineNumber:192,columnNumber:17}},this.props.isParent&&s.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:n(4103)},__source:{fileName:$k,lineNumber:202,columnNumber:21}}),this.props.queued&&s.createElement("span",{className:"mail-queued",dangerouslySetInnerHTML:{__html:n(48783)},__source:{fileName:$k,lineNumber:208,columnNumber:21}}),s.createElement("span",{__source:{fileName:$k,lineNumber:212,columnNumber:19}},e.subject));case"label":return s.createElement("label",{key:l.id,className:"labels",__source:{fileName:$k,lineNumber:217,columnNumber:17}},s.createElement("div",{className:"adjustment-mail-labels",__source:{fileName:$k,lineNumber:218,columnNumber:19}},s.createElement(bk,{flags:this.props.flags,style:{paddingLeft:"unset"},__source:{fileName:$k,lineNumber:219,columnNumber:21}})));case"flag":return s.createElement("label",{key:l.id,__source:{fileName:$k,lineNumber:228,columnNumber:17}},e.messageIsFlagged&&this.renderFlags(this.props,e,"small"));case"attachment":return s.createElement("label",{key:l.id,className:"mail-status-indicator",__source:{fileName:$k,lineNumber:235,columnNumber:17}},this.props.attachment>0&&2048!==this.props.attachment&&s.createElement("span",{__source:{fileName:$k,lineNumber:237,columnNumber:21}},(0,ue.Z)("$1 item","$1 items",[this.props.attachment])),2048===this.props.attachment&&s.createElement("span",{__source:{fileName:$k,lineNumber:241,columnNumber:21}},(0,ue.Z)("1+ items")));case"size":return s.createElement("label",{key:l.id,__source:{fileName:$k,lineNumber:247,columnNumber:17}},s.createElement("span",{__source:{fileName:$k,lineNumber:248,columnNumber:19}}));case"sentDate":return s.createElement("label",{key:l.id,className:"maildate",__source:{fileName:$k,lineNumber:253,columnNumber:17}},o&&l.width<=tI[0]?s.createElement("span",{__source:{fileName:$k,lineNumber:255,columnNumber:23}},a):s.createElement(s.Fragment,null,s.createElement("span",{__source:{fileName:$k,lineNumber:257,columnNumber:25}},e.datetime.split(a)[0]),l.width>tI[0]&&s.createElement("span",{__source:{fileName:$k,lineNumber:259,columnNumber:27}},a)));case"threads":return s.createElement("label",{key:l.id,__source:{fileName:$k,lineNumber:267,columnNumber:17}},s.createElement("span",{__source:{fileName:$k,lineNumber:268,columnNumber:19}}));default:console.warn("Unknown column:",l.id)}})))}))}contactsToString(e){let t="";if(e&&e.length>0){$m.Z.get(e).forEach((e=>{t&&(t+=", "),t+=e.name?e.name:e.address}))}return t}render(){const e={mail_entry:!0,"mail-parent":this.props.isParent,"mail-child":this.props.isChild},t={classes:bn()(e,"loading"),contactString:"",contactColumnTitle:"",datetime:"",flagColor:"",messageIsFlagged:!1,subject:""};t.subject=this.props.subject||"(no subject)",t.messageIsFlagged=(0,Dd.u9)(this.props),t.classes=bn()(e,{unread:!jm.Z.call(this.props.sources,this.props.selectedFilter)&&!this.props.unseen,unseen:this.props.unseen});const n=ll.Z.getSelectedFolder(),i=n&&(n.type||n.path);[he.Nz,he.kY,he.fZ].includes(i)?(t.contactString=this.contactsToString(this.props.toIds),t.contactColumnTitle=(0,ue.Z)("mail","To")):(t.contactString=this.contactsToString(this.props.fromIds),t.contactColumnTitle=(0,ue.Z)("mail","From")),t.messageIsFlagged&&(t.flagColor=`flag-color flag-${(0,Dd.Zr)(this.props.flags).toLowerCase()}`);const r=(this.props.columns||[]).find((e=>"sentDate"===e.id)),a=r&&r.width>tI[1]?r.width>tI[2]?qk:Jk:eI;return t.datetime=this.props.prefValues[P.kCalendarRelativeDates]?g()(this.props.sentDate).calendar(null,a):g()(this.props.sentDate).format(a.sameElse),"horizontal"===this.props.direction||"vertical_wide"===this.props.direction?this.renderMailEntryHorizontal(t):s.createElement(Kk,{variables:t,handleExpandClick:this.props.handleExpandClick,unseen:this.props.unseen,id:this.props.id,queued:this.props.queued,flags:this.props.flags,sources:this.props.sources,isParent:this.props.isParent,level:this.props.level,attachment:this.props.attachment,renderStatusIndicator:this.renderStatusIndicator,__source:{fileName:$k,lineNumber:351,columnNumber:14}})}}const sI=(0,bi.Z)(nI,Qk);var iI=n(75643),rI=n(32145);const aI=function(e){return!!e.isParent&&!e.isExpanded&&!!e.unreadInThread},oI=function(e,t,n){for(let s=t+1;s<e.length;s++){const t=e[s];if(!jm.Z.call(t.sources,n)||aI(t))return s}return-1},lI=function(e,t,n){for(let s=t-1;s>=0;s--){const t=e[s];if(!jm.Z.call(t.sources,n)||aI(t))return s}return-1},cI=function(e,t,n,s,i="undefined"){if("undefined"===i){if(n){const n=oI(e,t,s);return n>-1?n:lI(e,t,s)}{const n=lI(e,t,s);return n>-1?n:oI(e,t,s)}}return"previous"===i?n?lI(e,t,s):oI(e,t,s):n?("next"!==i&&console.warn("Direction to look for unread mail is not correct"),oI(e,t,s)):lI(e,t,s)};var uI=n(17252),mI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchList.jsx";function dI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class hI extends s.PureComponent{constructor(...e){super(...e),dI(this,"refTree",s.createRef()),dI(this,"state",{list:Cm.C.getListEntries(),showCreateLabel:!1}),dI(this,"messageListChanged",(e=>{switch(e.target){case"gotoUnread":return void this._gotoUnreadFiltered();case"gotoNextUnread":return void this._gotoNextUnread();case"gotoPreviousUnread":return void this._gotoPreviousUnread();case"listEntries":return void this.updateListEntriesDebounced(e)}})),dI(this,"updateListEntriesDebounced",(0,za.Z)((e=>{const{isLoading:t,updateSelection:n,updateScrollPosition:s}=e,i=t?{isLoading:!0}:{isLoading:!1,list:Cm.C.getListEntries()};this.setState(i,(()=>{n&&this.updateMessageSelection(s)}))}),100,{maxWait:200})),dI(this,"delete",((e,t)=>ll.Z.isTrashFolderSelected()||t?Zd.ZP.prepareDelete(!0):Zd.ZP.prepareDelete(!1))),dI(this,"isValidForClipboard",(e=>!1)),dI(this,"isValidAddTarget",(e=>!1)),dI(this,"hasChildren",(e=>e.children&&e.children.length)),dI(this,"isFolder",(e=>this.hasChildren(e))),dI(this,"getSelectedNodes",(()=>{const e=this.refTree.current;if(!e)return[];const t=e.selectionModel.selectedIds,n=e.state.renderedArray;return t.map((e=>n.find((t=>t.id===e.id)))).filter(Boolean)})),dI(this,"getNumSelected",(()=>this.refTree.current?this.refTree.current.selectionModel.selectedIds.length:0)),dI(this,"_findIndex",((e,t,n)=>{if(-1===e)return 0===t.length||"ascending"===A.ZP.get(P.kMailSearchSortOrder)?-1:-t.length-1;let s=Cm.C.getListEntry(e);if(s||this.selectedEntry?.id!==e||(s=this.selectedEntry),!s)return-1;if("threads"===A.ZP.get(P.kMailSearchSortField)&&"descending"===A.ZP.get(P.kMailSearchSortOrder)){const e=(e,t)=>e.threadKey[0]===t.threadKey[0]?t.threadKey[1]-e.threadKey[1]:t.threadKey[0]-e.threadKey[0];let n=Mm()(t,s,e);if(n>=0){for(;n>0&&0===e(t[n-1],s)&&(0,uI.HT)(t[n],s)>0;)n--;for(;n<t.length-1&&0===e(t[n],s)&&(0,uI.HT)(t[n],s)<0;)n++;s!==t[n]&&(n=-n-1)}return n}return Mm()(t,s,n)})),dI(this,"setMessageSelection",((e=[],t)=>{const n=this.refTree.current;if(!n)return;const s=t?t.id:-1;n.selectionModel.setSelectedIds(e),n.selectionModel.leadIndex=s,n.selectionModel.anchorIndex=s,n.updateSelectionState(),n.saveSelectionModel(),this.onSelect(t)})),dI(this,"updateMessageSelection",((e=!1)=>{const t=this.refTree.current;if(!t)return this.onSelect();const n=t.state.renderedArray;if(0===n.length)return this.setMessageSelection();const s=Cm.C.getListEntryComparator(),i=t.selectionModel.selectedIds.map((e=>e.id)).filter((e=>this._findIndex(e,n,s)>=0));if(0===i.length){let e=t.selectionModel.leadIndex;if(-1===e&&(e=t.selectionModel.anchorIndex),-1===e)return this.setMessageSelection();let r=this._findIndex(e,n,s);r<0&&(r=-r-1);const a=Math.min(r,n.length-1),o=n[a];i.push(o.id)}const r=i[0],a=this._findIndex(r,n,s),o=n[a];this.setMessageSelection(i,o),e&&t.scrollIntoView(a)})),dI(this,"_markSelectedRead",(()=>{Zd.ZP.markRead()})),dI(this,"_markSelectedThreadRead",(()=>{"threads"===!A.ZP.get(P.kMailSearchSortField)?Zd.ZP.markRead():Zd.ZP.markThreadRead()})),dI(this,"_markSelectedUnread",(()=>{Zd.ZP.markUnread()})),dI(this,"_markSelectedFlagged",(()=>{Zd.ZP.markFlagged()})),dI(this,"_toggleSenderAsMailingList",(()=>{this.getSelectedNodes().forEach((e=>{const t=$m.Z.get(e.fromIds);K.Z.toggleSenderAsMailingList(t[0].address)}))})),dI(this,"_markSelectedUnflagged",(()=>{Zd.ZP.markUnflagged()})),dI(this,"_goToNext",(()=>{const e=this.refTree.current;if(!e)return;const t=e.selectionModel.leadIndex,n=e.state.renderedArray;let s=this._findIndex(t,n,Cm.C.getListEntryComparator());if(s<0&&(s=-s-1),s<n.length-1){const t=n[s+1];t.isParent&&!t.isExpanded?(e.toggleExpandModel(t.id),this._goToNext()):t&&e.selectByNode(t)}})),dI(this,"_goToNextUnread",(e=>{const t=this.refTree.current;if(!t)return;const n=t.selectionModel.leadIndex,s=t.state.renderedArray;let i=this._findIndex(n,s,Cm.C.getListEntryComparator());i<0&&(i=-i-1);const r=ll.Z.getSelectedFolder(),a=r&&Cm.C.getByFolder(r.accountId,r.path);if(!a)throw new Error("Filter not found");const o=cI(s,i,"ascending"===A.ZP.get(P.kMailSearchSortOrder),a,e);if(o>-1){const n=s[o];n.isParent&&!n.isExpanded?(t.toggleExpandModel(n.id),this._goToNextUnread(e)):t.selectByNode(n)}})),dI(this,"_markAndGotoNextUnread",eg.throttleSync((()=>{this._markSelectedRead(),this._gotoUnreadFiltered("undefined")}))),dI(this,"_gotoNextUnread",eg.throttleSync((()=>{this._gotoUnreadFiltered("next")}))),dI(this,"_gotoPreviousUnread",eg.throttleSync((()=>{this._gotoUnreadFiltered("previous")}))),dI(this,"_gotoUnreadFiltered",((e="undefined")=>{const t=ll.Z.getSelectedFolder();if(!t)return;const n=Cm.C.getByFolder(t.accountId,t.path);n&&pt.Z.shouldExcludeFlag(n.filterValue,he.T4.SEEN)||this._goToNextUnread(e)})),dI(this,"createCustomLabel",(()=>{this.setState({showCreateLabel:!0})})),dI(this,"getLabelMenuItems",(()=>{const e=rl.Z.getActiveListEntry(),t=e?(0,Dd.Q3)(e.flags):[],n=Zd.ZP.getCustomLabelsMenu(t);return n.push(z.Z.separatorItem,{handler:this.createCustomLabel,ellipsis:!0,...(0,Mn.Z)("Add New Label")}),t.length>0&&n.push(z.Z.separatorItem,{handler:Zd.ZP.clearAllLabels.bind(null,t),...(0,Mn.Z)("Clear All Labels")}),n})),dI(this,"_scrollOrMarkAndGotoNext",(e=>{const t=document.querySelector("#mail_view .mail_body webview");t instanceof HTMLElement&&"function"==typeof t.executeScript&&t.executeScript({code:this._injectCode(e.shiftKey)},(e=>{e&&!1===e[0]&&(this._markSelectedRead(),this._goToNext())}))})),dI(this,"_injectCode",(e=>e?"b__ = document.documentElement.querySelector('body');\n      if (b__.scrollTop !== 0) {\n        b__.scrollBy({\n          top: - b__.clientHeight - 30,\n          left: 0,\n          behavior: 'smooth'\n        });\n        true;\n      }":"b__ = document.documentElement.querySelector('body');\n      if (b__.scrollHeight - b__.scrollTop > b__.clientHeight) {\n        b__.scrollBy({\n          top: b__.clientHeight - 30,\n          left: 0,\n          behavior: 'smooth'\n        });\n        true;\n      } else {\n        false;\n      }")),dI(this,"_getTrashPath",(e=>ia.Z.getFolderByType(e,he.uT).then((e=>e&&e.length?e[0].path:void 0)))),dI(this,"_sendSelected",(()=>{de.Z.sendSelected(this.getSelectedNodes())})),dI(this,"customFlagMenuData",(()=>{const e=rl.Z.getActiveListEntry(),t=e?(0,Dd.Zr)(e.flags):"";return Zd.ZP.getStandardFlagsMenu(t)})),dI(this,"getMenuCapability",((e,t,n)=>{const s=!ll.Z.shouldDisableTrashButton()&&!ll.Z.shouldDisableSpamButton()&&ll.Z.isOptionAllowedAsDefault(he.H6),i=e=>{const t=ll.Z.getSelectedFolder(),n=t&&Cm.C.getByFolder(t.accountId,t.path);return Boolean(e)&&jm.Z.call(e.sources,n)},r=e=>{const t=ll.Z.getSelectedFolder();if(t&&Cm.C.getByFolder(t.accountId,t.path))return(0,Yk.Z)(e.sources)},a=e=>"threads"===A.ZP.get(P.kMailSearchSortField)&&1===this.getNumSelected()&&Boolean(e)&&Boolean(e.children),o=e=>1===this.getNumSelected()&&Boolean(e)&&e.fromIds.length>0?$m.Z.get(e.fromIds)[0].address:"",l=()=>Cm.C.getByIds(n.sourceFilterIds).some((e=>e.accountId===he.of&&e.path===he.J8)),c=()=>{const e=ll.Z.getSelectedFolder();return!!e&&ca.Z.getFolderType(e.accountId,e.path)===he.tB};switch(e.action){case"COMMAND_MAIL_COMPOSE_NEW_MESSAGE":return Promise.resolve({handler:ne.Z.createDraft.bind(null,void 0),...t(e,{})});case"CONTEXT_SEND":return Promise.resolve({handler:this._sendSelected,visible:Boolean(n)&&l(),...t(e,{})});case"COMMAND_MAIL_REPLY":return Promise.resolve({visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.s0),...t(e,{})});case"COMMAND_MAIL_REPLY_ALL":return Promise.resolve({handler:Zd.ZP.replyAll,visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.s0),...t(e,{})});case"COMMAND_MAIL_FORWARD":return Promise.resolve({visible:Boolean(n)&&!l(),...t(e,{})});case"COMMAND_MAIL_MARK_READ":return Promise.resolve({visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.kp)&&!i(n),...t(e,{})});case"COMMAND_MAIL_MARK_UNREAD":return Promise.resolve({visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.kp)&&i(n),...t(e,{})});case"CONTEXT_GOTO":case"COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD":case"CONTEXT_SENDER":case"CONTEXT_THREAD":return Promise.resolve({visible:Boolean(n),...t(e,{})});case"COMMAND_MAIL_GOTO_NEXT_UNREAD":case"COMMAND_MAIL_GOTO_PREVIOUS_UNREAD":return Promise.resolve({visible:Boolean(n)&&!c(),...t(e,{})});case"CONTEXT_CONTAINER_MOVE":return Promise.resolve({items:Zd.ZP.getMoveToFolderMenu(),visible:Boolean(n),...t(e,{})});case"CONTEXT_ADD_FLAG":return Promise.resolve({handler:this._markSelectedFlagged,visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.q0)&&!(0,Dd.u9)(n),...t(e,{})});case"CONTEXT_REMOVE_FLAG":return Promise.resolve({handler:this._markSelectedUnflagged,visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.q0)&&(0,Dd.u9)(n),...t(e,{})});case"CONTEXT_CONTAINER_FLAGS":return Promise.resolve({items:this.customFlagMenuData(),visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.q0),...t(e,{})});case"CONTEXT_CONTAINER_LABELS":return Promise.resolve({items:this.getLabelMenuItems(),visible:Boolean(n)&&ll.Z.isOptionAllowedAsDefault(he.pz),...t(e,{})});case"CONTEXT_EDIT":return Promise.resolve({handler:Zd.ZP.openMessage,visible:Boolean(n)&&ll.Z.isFolderAnEditMailFolder(),...t(e,{})});case"CONTEXT_MARK_AS_SPAM":return Promise.resolve({handler:Zd.ZP.markAsJunk,visible:Boolean(n)&&s&&!1===r(n),...t(e,{})});case"CONTEXT_NOT_SPAM":return Promise.resolve({handler:Zd.ZP.markAsNotJunk,visible:Boolean(n)&&s&&!0===r(n),...t(e,{})});case"CONTEXT_CONTAINER_TRASH":const u=(e=>{const t=ll.Z.getSelectedFolder(),n=t&&Cm.C.getByFolder(t.accountId,t.path);if(Boolean(e)&&n){const t=ca.Z.getFolderType(n.accountId,n.path)===he.Nz;return mk.Z.isMessageDeleted(e.sources,n,t)}})(n);return Promise.resolve({items:null==u||ll.Z.shouldDisableTrashButton()?[]:Rd(u,he.AF.list),visible:Boolean(n)&&void 0!==u,...t(e,{})});case"COMMAND_MAIL_ENABLE_SENDER_VIEW":{const s=o(n);return Promise.resolve({visible:Boolean(n)&&1===this.getNumSelected()&&s.length>0,...t(e,{})})}case"CONTEXT_SENDER_IS_MAILING_LIST":{const s=o(n);return Promise.resolve({handler:this._toggleSenderAsMailingList,checked:Cm.C.isSenderMailingList(s),visible:Boolean(n)&&1===this.getNumSelected()&&s.length>0,...t(e,{})})}case"COMMAND_MAIL_ENABLE_THREADED_VIEW":return Promise.resolve({visible:Boolean(n)&&1===this.getNumSelected(),...t(e,{})});case"COMMAND_MAIL_MARK_THREAD_READ":return Promise.resolve({visible:Boolean(n)&&a(n)&&!i(n),...t(e,{})});case"COMMAND_MAIL_MARK_THREAD_UNREAD":return Promise.resolve({visible:Boolean(n)&&a(n)&&i(n),...t(e,{})});default:return Promise.resolve({...t(e,{})})}})),dI(this,"getMenuVisibility",((e,t)=>{switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return"threads"===A.ZP.get(P.kMailSearchSortField);default:return!1}})),dI(this,"handleExpandClick",(()=>{this.refTree.current&&this.refTree.current.toggleSelectedExpansion()})),dI(this,"onItemDoubleClick",(e=>{Zd.ZP.openMessage()})),dI(this,"onItemMouseDown",((e,t)=>{1===t.button&&(t.preventDefault(),t.stopPropagation())})),dI(this,"onItemMouseUp",((e,t)=>{1===t.button&&(t.preventDefault(),t.stopPropagation())})),dI(this,"getRowComponentProps",(e=>{const t=e.node,n=ll.Z.getSelectedFolder();let s;if(n){const{accountId:e,path:t}=n;s=Cm.C.getByFolder(e,t)}else console.warn("No folder selected");return{...t,direction:"horizontal"===this.props.position||"vertical_wide"===this.props.position?"horizontal":"vertical",handleExpandClick:this.handleExpandClick,selectedFilter:s,columns:this.props.columns}})),dI(this,"getHeight",(({index:e})=>"vertical"===this.props.position?"threads"!==!A.ZP.get(P.kMailSearchSortField)&&this.refTree.current&&this.refTree.current.state.renderedArray[e].isChild?24:48:24)),dI(this,"onSelect",(e=>{this.selectedEntry=e,this.props.onSelect(e)})),dI(this,"onEmptyTrash",(()=>{console.error("not implemented")})),dI(this,"onFocus",(()=>{Wl.Z.bind("enter",Zd.ZP.openMessage)})),dI(this,"_unbind",(()=>{Wl.Z.unbind("enter",Zd.ZP.openMessage)})),dI(this,"onBlur",(()=>{this._unbind()})),dI(this,"onCustomLabelDlgClose",((e,t)=>{if(e){const e=rl.Z.getActiveListEntry(),n=e?(0,Dd.Q3)(e.flags):[];Zd.ZP.toggleLabel(t,n)(),K.Z.addLabelsFilter(t)}this.setState({showCreateLabel:!1})})),dI(this,"onKeyDown",(e=>{const t=!!e.ctrlKey;switch(e.key){case"z":!t||e.shiftKey||e.altKey||(K.Z.undo(),e.preventDefault(),e.stopPropagation());break;case" ":e.preventDefault(),e.repeat||this._scrollOrMarkAndGotoNext(e)}}))}componentDidMount(){Cm.C.addChangeListener(this.messageListChanged)}componentWillUnmount(){this._unbind(),Cm.C.removeChangeListener(this.messageListChanged)}render(){const e=ll.Z.getSelectedFolder(),t="threads"===A.ZP.get(P.kMailSearchSortField)?rI.Z.getThreadsAsTree(this.state.list.slice(),"ascending"===A.ZP.get(P.kMailSearchSortOrder)):this.state.list;let n,i=!1;e&&(n="MAIL_SEARCH_"+e.accountId+e.path,iI.Z.isSubscribable(e)&&(i=!e.subscribed));const r="vertical"===A.ZP.get(P.kMailViewLayout)?this.getHeight:24,a={name:"mailsearchlist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement("div",{className:"list-wrapper",onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,__source:{fileName:mI,lineNumber:926,columnNumber:7}},!i&&this.state.isLoading&&s.createElement("span",{className:"mail-loading",__source:{fileName:mI,lineNumber:931,columnNumber:9}},(0,ue.Z)("Loading selected view...")),!i&&!this.state.isLoading&&this.state.list.length>0&&s.createElement(Sg,{ref:this.refTree,rowComponent:sI,getRowComponentProps:this.getRowComponentProps,nodes:t,onSelect:this.onSelect,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,delete:this.delete,disableSelectAfterDelete:!0,isFolder:this.isFolder,menu:a,hasChildren:this.hasChildren,settings:n,rootId:0,isValidAddTarget:this.isValidAddTarget,isValidForClipboard:this.isValidForClipboard,rowHeight:r,expandedByDefault:!0,selectionStoreKey:Q.uP,columns:this.props.columns,autoFocus:!0,__source:{fileName:mI,lineNumber:936,columnNumber:11}}),this.state.showCreateLabel&&s.createElement(Ld,{onClose:this.onCustomLabelDlgClose,viewMode:"float",__source:{fileName:mI,lineNumber:962,columnNumber:11}}),!i&&!this.state.isLoading&&0===this.state.list.length&&s.createElement("span",{className:"mail-loading",__source:{fileName:mI,lineNumber:967,columnNumber:11}},(0,ue.Z)("No messages in selected view")),e&&i&&s.createElement("div",{className:"mail-folder-subscribe",__source:{fileName:mI,lineNumber:972,columnNumber:11}},s.createElement("h2",{__source:{fileName:mI,lineNumber:973,columnNumber:13}},(0,ue.Z)("Subscribe to Folder")),s.createElement("p",{__source:{fileName:mI,lineNumber:974,columnNumber:13}},(0,ue.Z)("You are currently not subscribed to the folder $2 of $1.",[e.accountId,e.path])),s.createElement("input",{type:"button",className:"primary",value:(0,ue.Z)("Subscribe"),onClick:K.Z.subscribeMailbox.bind(this,e),__source:{fileName:mI,lineNumber:977,columnNumber:13}})))}}const pI=hI;var gI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchOptions.jsx";function bI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const NI=[P.kKeyboardTabToAll];class fI extends s.Component{constructor(...e){super(...e),bI(this,"_isMounted",!1),bI(this,"state",{allMessages:Boolean(!!gm.Z.getOptions()&&gm.Z.getOptions().allMessages),numFound:Cm.C.getListEntries().length,queryFound:Cm.C.getQueryNumFound()}),bI(this,"shouldSearchAllMessages",(e=>{const t={...gm.Z.getOptions(),allMessages:e};K.Z.setSearchOptions(t),K.Z.updateQueryResults(Cm.C.getQuery())})),bI(this,"updateSearchOptions",(()=>{const e=gm.Z.getOptions(),t=Boolean(e&&e.allMessages);this._isMounted&&this.setState({allMessages:t})})),bI(this,"updateResults",(()=>{this._isMounted&&this.setState({numFound:Cm.C.getListEntries().length,queryFound:Cm.C.getQueryNumFound()})})),bI(this,"removeFilter",(()=>{const e=Cm.C.getByFolder(this.props.currentAccountId,this.props.currentPath);e&&K.Z.removeFilter(e.id)}))}UNSAFE_componentWillMount(){gm.Z.addChangeListener(this.updateSearchOptions),Cm.C.addChangeListener(this.updateResults)}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1,gm.Z.removeChangeListener(this.updateSearchOptions),Cm.C.removeChangeListener(this.updateResults)}render(){const e=this.state.allMessages,t=Cm.C.getByFolder(this.props.currentAccountId,this.props.currentPath);let n=(0,ue.Z)("Selected");const i=this.props.currentAccountId===he.Kz;return t&&("string"==typeof t.selectedAccountId&&"string"==typeof t.selectedName?n=(0,ue.Z)(t.selectedAccountId)+"/"+(0,ue.Z)(t.selectedName):i||(n=(0,ue.Z)(this.props.currentAccountId)+"/"+(0,ue.Z)(this.props.currentName))),s.createElement("div",{className:"toolbar toolbar-default mail-search",__source:{fileName:gI,lineNumber:124,columnNumber:7}},s.createElement("span",{__source:{fileName:gI,lineNumber:126,columnNumber:9}},(0,ue.Z)("Search in")),s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:gI,lineNumber:128,columnNumber:9}},s.createElement(ko,{isPressed:!e,onClick:this.shouldSearchAllMessages.bind(null,!1),title:n,__source:{fileName:gI,lineNumber:129,columnNumber:11}}),s.createElement(ko,{ref:e=>this._allButton=e,isPressed:e,onClick:this.shouldSearchAllMessages.bind(null,!0),title:(0,ue.Z)("mail","All"),__source:{fileName:gI,lineNumber:134,columnNumber:11}})),s.createElement("span",{title:e?(0,ue.Z)("Found in all folders: $1",[this.state.queryFound]):(0,ue.Z)("Found in all folders: $1. Found in current folder: $2",[this.state.queryFound,this.state.numFound]),__source:{fileName:gI,lineNumber:142,columnNumber:9}},(0,ue.Z)("Found: $1",[this.state.numFound])),s.createElement(ko,{style:{marginLeft:"auto"},onClick:i?this.removeFilter:this.props.saveSearch,title:i?(0,ue.Z)("mail_filter","Delete"):(0,ue.Z)("Save"),tooltip:i?(0,ue.Z)("mail_filter","Delete Filter"):(0,ue.Z)("Save search as Filter"),__source:{fileName:gI,lineNumber:152,columnNumber:9}}))}}const _I=(0,bi.Z)(fI,NI);var vI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearch.jsx";function EI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CI=[P.kKeyboardTabToAll,P.kMailSearchSortField,P.kMailSearchSortOrder,P.kMailViewLayout];class wI extends s.Component{constructor(e){super(e),EI(this,"setSlideBarStyle",(()=>{Cm.C.hasNoListEntries()?this.setState({slideBarStyle:{backgroundColor:"unset"}}):this.setState({slideBarStyle:{}})})),EI(this,"getMailSortFields",(e=>{const t=this.props.selectedFolder&&[he.Nz,he.kY,he.fZ].includes(ca.Z.getFolderType(this.props.selectedFolder.accountId,this.props.selectedFolder.path));return[{value:"unread",text:(0,ue.Z)("Unread"),icon:cn.XQw.small,fullScreenTitle:(0,ue.Z)("Unread"),width:36,visible:"vertical"!==e,isSortField:!1},{value:"flag",text:(0,ue.Z)("Flag"),icon:cn.nyn.small,fullScreenTitle:(0,ue.Z)("Flag"),width:36,visible:"vertical"!==e,isSortField:!1},{value:"sender",text:t?(0,ue.Z)("Recipient"):(0,ue.Z)("Sender"),icon:cn.HXY,fullScreenTitle:t?(0,ue.Z)("Sort by Message Recipient"):(0,ue.Z)("Sort by Message Sender"),width:150,visible:"vertical"!==e},{value:"subject",text:(0,ue.Z)("Subject"),fullScreenTitle:(0,ue.Z)("Sort by Subject"),width:300,visible:"vertical"!==e,key:!0},{value:"label",text:(0,ue.Z)("Labels"),icon:cn.rpm.small,fullScreenTitle:(0,ue.Z)("Labels"),width:"vertical_wide"===e?36:140,visible:"vertical"!==e,isSortField:!1},{value:"attachment",text:(0,ue.Z)("Attachment"),icon:cn.onv,fullScreenTitle:(0,ue.Z)("Attachment"),width:36,visible:"vertical"!==e,isSortField:!1},{value:"size",text:(0,ue.Z)("Size"),icon:cn.W9U,fullScreenTitle:(0,ue.Z)("Size"),width:100,visible:"horizontal"===e,isSortField:!1},{value:"sentDate",text:(0,ue.Z)("Date"),icon:cn.V_c,fullScreenTitle:t?(0,ue.Z)("Sort by Date Sent"):(0,ue.Z)("Sort by Date Received"),width:150,visible:"vertical"!==e}]})),EI(this,"onSortChange",((e,t)=>{const n=this.props.prefValues[P.kMailSearchSortOrder],s=this.props.prefValues[P.kMailSearchSortField];("ascending"===n&&e!==ti.Z.ASCENDING_SORT||"descending"===n&&e!==ti.Z.DESCENDING_SORT)&&st.Z.set(P.kMailSearchSortOrder,this.getMailSortOrder(e)),s!==t&&st.Z.set(P.kMailSearchSortField,t)})),EI(this,"saveSearch",(e=>{const t=Cm.C.getByFolder(this.props.selectedFolder.accountId,this.props.selectedFolder.path)||{},n=Cm.C.getQuery(),s={...t.filterValue,query:n},i={name:n,accountId:he.Kz,path:Math.random().toString(36).substring(2),filterValue:{...s},selectedAccountId:this.props.selectedFolder.accountId,selectedName:t.name};K.Z.addFilter(i)})),EI(this,"onUpdateRow",(e=>{this.setState({columns:e})})),EI(this,"onSaveRow",(()=>{pg(this.state.columns,"vertical_wide"===this.props.prefValues[P.kMailViewLayout]?"mail_vertical":"mail_horizontal")})),this.state={columns:gg()["vertical_wide"===this.props.prefValues[P.kMailViewLayout]?"mail_vertical":"mail_horizontal"]||bg(this.getMailSortFields(e.prefValues[P.kMailViewLayout])),slideBarStyle:Cm.C.hasNoListEntries()?{backgroundColor:"unset"}:{}}}UNSAFE_componentWillReceiveProps(e){this.props.prefValues[P.kMailSearchSortOrder]!==e.prefValues[P.kMailSearchSortOrder]&&K.Z.applyFilter(),this.props.prefValues[P.kMailViewLayout]!==e.prefValues[P.kMailViewLayout]&&this.setState({columns:gg()["vertical_wide"===e.prefValues[P.kMailViewLayout]?"mail_vertical":"mail_horizontal"]||bg(this.getMailSortFields(e.prefValues[P.kMailViewLayout]))})}componentDidUpdate(e){this.props.hasNoListEntries!==e.hasNoListEntries&&this.setSlideBarStyle()}getSortOrder(){return"ascending"===this.props.prefValues[P.kMailSearchSortOrder]?ti.Z.ASCENDING_SORT:ti.Z.DESCENDING_SORT}getMailSortOrder(e){switch(e){case ti.Z.ASCENDING_SORT:return"ascending";case ti.Z.DESCENDING_SORT:return"descending";default:throw new Error("Non existent mail sort order "+e)}}render(){const e=this.getMailSortFields(this.props.prefValues[P.kMailViewLayout]),t=this.getSortOrder(),n=this.props.selectedFolder,i="horizontal"===this.props.position?"top":"left";return s.createElement("div",{id:"mail_search",style:this.props.style,__source:{fileName:vI,lineNumber:291,columnNumber:7}},(this.props.queryString||n&&n.accountId===he.Kz)&&s.createElement(_I,{saveSearch:this.saveSearch,currentPath:this.props.selectedFolder.path,currentName:this.props.selectedFolder.name,currentAccountId:this.props.selectedFolder.accountId,__source:{fileName:vI,lineNumber:294,columnNumber:11}}),n&&n.accountId===he.tQ&&s.createElement("div",{className:"toolbar toolbar-default mail-search",__source:{fileName:vI,lineNumber:302,columnNumber:11}},s.createElement("span",{className:"mail-search-toolbar-label",__source:{fileName:vI,lineNumber:303,columnNumber:13}},(0,ue.Z)("Displaying a single thread"))),s.createElement(RN,{key:this.state.columns.flatMap((e=>e.id)).join()||"sortfield",fields:e,columns:this.state.columns,onSortChange:this.onSortChange,sortField:this.props.prefValues[P.kMailSearchSortField],sortOrder:t,manualSorting:!1,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],fullsize:"horizontal"===this.props.prefValues[P.kMailViewLayout]||"vertical_wide"===this.props.prefValues[P.kMailViewLayout],onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,style:this.state.slideBarStyle,__source:{fileName:vI,lineNumber:308,columnNumber:9}}),s.createElement(pI,{position:this.props.position,onSelect:this.props.onSelect,columns:this.state.columns,__source:{fileName:vI,lineNumber:323,columnNumber:9}}),s.createElement(PN,{onSlidebarPosition:this.props.onSlidebarPosition,position:i,__source:{fileName:vI,lineNumber:328,columnNumber:9}}))}}const yI=(0,bi.Z)(wI,CI);var SI=n(34155),TI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailView.jsx";function kI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const II=[P.kMailViewLayout,P.kMailViewDimensions];class AI extends s.PureComponent{constructor(...e){super(...e),kI(this,"mailSearchRef",s.createRef()),kI(this,"state",{listEntry:void 0,hasNoListEntries:Cm.C.hasNoListEntries(),queryString:Cm.C.getQuery()}),kI(this,"onSlidebarPosition",((e,t)=>{const n=pn.findDOMNode(this.mailSearchRef.current);if(!(n instanceof Element))return;var s=n.getBoundingClientRect(),i=t-s.top,r=e-s.left;const a={...this.props.prefValues[P.kMailViewDimensions]};"horizontal"===this.props.prefValues[P.kMailViewLayout]?(i>2e3?i=2e3:i<120&&(i=120),a.height=Math.floor(i)):(r>2e3?r=2e3:r<200&&(r=200),"vertical_wide"===this.props.prefValues[P.kMailViewLayout]?a.widthWide=Math.floor(r):a.width=Math.floor(r)),st.Z.set(P.kMailViewDimensions,a)})),kI(this,"_onFiltersChanged",(()=>{if(this.state.hasNoListEntries!==Cm.C.hasNoListEntries()&&this.setState({hasNoListEntries:Cm.C.hasNoListEntries()}),ll.Z.getSelectedFolder()){const e=Cm.C.getQuery();this.setState({queryString:e})}})),kI(this,"_folderChanged",(()=>{const e=ll.Z.getSelectedFolder();if(!e)return;const t=(0,ue.Z)(e.name),n=(0,ue.Z)(e.accountId);let s=t;t!==n&&(s+=" ("+n+")"),SI.nextTick((()=>$.Z.setTitle(this.props.id,this.context.vivaldiWindowId,s)))})),kI(this,"handleSelection",(0,za.Z)((e=>{this.setState({listEntry:e})}),200,{leading:!0,trailing:!0}))}componentDidMount(){ll.Z.addChangeListener(this._folderChanged),Cm.C.addChangeListener(this._onFiltersChanged)}componentWillUnmount(){ll.Z.removeChangeListener(this._folderChanged),Cm.C.removeChangeListener(this._onFiltersChanged)}render(){const e="vertical_wide"===this.props.prefValues[P.kMailViewLayout],t="horizontal"===this.props.prefValues[P.kMailViewLayout]?{height:this.props.prefValues[P.kMailViewDimensions].height}:{width:this.props.prefValues[P.kMailViewDimensions][e?"widthWide":"width"]};return s.createElement("div",{id:"mail_view",className:this.props.prefValues[P.kMailViewLayout],__source:{fileName:TI,lineNumber:148,columnNumber:7}},s.createElement(yI,{ref:this.mailSearchRef,selectedFolder:ll.Z.getSelectedFolder(),queryString:this.state.queryString,onSlidebarPosition:this.onSlidebarPosition,position:this.props.prefValues[P.kMailViewLayout],style:t,hasNoListEntries:this.state.hasNoListEntries,onSelect:this.handleSelection,__source:{fileName:TI,lineNumber:149,columnNumber:9}}),s.createElement(Bk,{listEntry:this.state.listEntry,prefValues:this.props.prefValues,hasNoListEntries:this.state.hasNoListEntries,pageIsActive:this.props.isActive,__source:{fileName:TI,lineNumber:159,columnNumber:9}}))}}kI(AI,"contextType",Vs.Z);const ZI=(0,bi.Z)(AI,II);var PI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\private-intro\\PrivateWindowIntro.jsx";function DI(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}const MI=[P.kIncognitoShowIntro],OI=st.Z.getEventHandler,xI="https://vvld.in/privacy-and-security";var LI=new WeakMap,RI=new WeakMap,BI=new WeakMap;class FI extends s.Component{constructor(...e){var t,n,s;super(...e),t=this,n="state",s={searchEngines:Dn.Z.getList()},n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,LI.set(this,{writable:!0,value:()=>{this.setState({searchEngines:Dn.Z.getList()})}}),RI.set(this,{writable:!0,value:e=>{e.preventDefault(),$.Z.openURL(xI,{inCurrent:!1,inBackground:!1})}}),BI.set(this,{writable:!0,value:e=>{ur.setDefault(e.currentTarget.value,!0)}})}componentDidMount(){Dn.Z.addChangeListener(DI(this,LI))}componentWillUnmount(){Dn.Z.removeChangeListener(DI(this,LI))}render(){const e=Dn.Z.getDefault(!0);return s.createElement("div",{className:"private-intro",__source:{fileName:PI,lineNumber:66,columnNumber:7}},s.createElement("svg",{className:"private-window-background",viewBox:"0 0 1244 860",__source:{fileName:PI,lineNumber:68,columnNumber:9}},s.createElement("defs",{__source:{fileName:PI,lineNumber:70,columnNumber:11}},s.createElement("linearGradient",{x1:"0.15",y1:"0.3",x2:"0.3",y2:"0.5",id:"private-intro-bg-gradient",__source:{fileName:PI,lineNumber:71,columnNumber:13}},s.createElement("stop",{offset:"0",stopColor:"var(--colorFg)",stopOpacity:"0.03",__source:{fileName:PI,lineNumber:72,columnNumber:15}}),s.createElement("stop",{offset:"1",stopColor:"var(--colorFg)",stopOpacity:"0.003",__source:{fileName:PI,lineNumber:73,columnNumber:15}})),s.createElement("linearGradient",{x1:"1",y1:"0",x2:"0",y2:"1",id:"private-intro-accent-gradient",__source:{fileName:PI,lineNumber:76,columnNumber:13}},s.createElement("stop",{offset:"0",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:PI,lineNumber:77,columnNumber:15}}),s.createElement("stop",{offset:"0.5",stopColor:"var(--colorAccentBg)",stopOpacity:"1",__source:{fileName:PI,lineNumber:78,columnNumber:15}}),s.createElement("stop",{offset:"1",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:PI,lineNumber:79,columnNumber:15}}))),s.createElement("path",{fill:"url(#private-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:PI,lineNumber:83,columnNumber:11}}),s.createElement("path",{stroke:"url(#private-intro-accent-gradient)",strokeWidth:"2",d:"M854 839.979L1103.98 407",__source:{fileName:PI,lineNumber:84,columnNumber:11}}),s.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M951 649.979L1200.98 217",__source:{fileName:PI,lineNumber:85,columnNumber:11}}),s.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M969 628.452L1126.86 356",__source:{fileName:PI,lineNumber:86,columnNumber:11}}),s.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M802 686.452L959.86 414",__source:{fileName:PI,lineNumber:87,columnNumber:11}}),s.createElement("path",{stroke:"url(#private-intro-accent-gradient)",opacity:".5",d:"M735 790.452L892.86 518",__source:{fileName:PI,lineNumber:88,columnNumber:11}})),s.createElement("div",{className:"private-intro-content",__source:{fileName:PI,lineNumber:91,columnNumber:9}},s.createElement("h1",{__source:{fileName:PI,lineNumber:92,columnNumber:11}},(0,ue.Z)("title","Private Window")),s.createElement("span",{className:"private-intro-ghost",dangerouslySetInnerHTML:{__html:n(51491)},__source:{fileName:PI,lineNumber:93,columnNumber:11}}),s.createElement("p",{__source:{fileName:PI,lineNumber:96,columnNumber:11}},(0,ue.Z)("Browsing in a Private Window means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),s.createElement("p",{__source:{fileName:PI,lineNumber:97,columnNumber:11}},s.createElement("a",{tabIndex:0,href:xI,onClick:DI(this,RI),__source:{fileName:PI,lineNumber:98,columnNumber:13}},(0,ue.Z)("Learn more about Privacy & Security"))),s.createElement("h2",{__source:{fileName:PI,lineNumber:106,columnNumber:11}},(0,ue.Z)("Default Search")),s.createElement("p",{className:"private-intro-blurb",__source:{fileName:PI,lineNumber:107,columnNumber:11}},s.createElement("span",{__source:{fileName:PI,lineNumber:108,columnNumber:13}},(0,ue.Z)("While in a Private Window, Vivaldi will use $1 to answer your searches.",[e.name])),s.createElement("span",{__source:{fileName:PI,lineNumber:111,columnNumber:13}},"DuckDuckGo"===e.name&&" "+(0,ue.Z)("DuckDuckGo is a search engine that does not track your search history, enabling you to search privately."))),s.createElement("h3",{__source:{fileName:PI,lineNumber:119,columnNumber:11}},(0,ue.Z)("Search with")),s.createElement("label",{className:"private-intro-select-searchengine",__source:{fileName:PI,lineNumber:120,columnNumber:11}},s.createElement("img",{className:"private-intro-favicon",src:e.faviconUrl,__source:{fileName:PI,lineNumber:121,columnNumber:13}}),s.createElement("select",{value:e.id,onChange:DI(this,BI),__source:{fileName:PI,lineNumber:122,columnNumber:13}},this.state.searchEngines.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:PI,lineNumber:124,columnNumber:17}},e.name))))),s.createElement("label",{className:"private-intro-disable",__source:{fileName:PI,lineNumber:131,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:!this.props.prefValues[P.kIncognitoShowIntro],onChange:OI(P.kIncognitoShowIntro,"inverse"),__source:{fileName:PI,lineNumber:132,columnNumber:13}}),s.createElement("span",{__source:{fileName:PI,lineNumber:135,columnNumber:13}},(0,ue.Z)("Do Not Show Introduction Again")))))}}const UI=(0,bi.Z)(FI,MI);function VI(){return s.createElement("webview",{src:`${Q.oP}/saga/saga.html`,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\saga\\SagaPage.jsx",lineNumber:10,columnNumber:10}})}const HI={SpeedDial:"startpage",Bookmarks:"bookmarks",History:"history",Calendar:"calendar",NotesManager:"notes"};var WI=n(61666),zI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarDropdown.jsx";const GI=st.Z.getEventHandler;class KI extends s.Component{render(){const e=this.props.prefValues;return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Address Field Drop-Down Menu"),__source:{fileName:zI,lineNumber:28,columnNumber:7}},s.createElement(WI.C,{text:(0,ue.Z)("Show Drop-Down when Typing"),__source:{fileName:zI,lineNumber:32,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarOmniboxEnabled],onChange:GI(P.kAddressBarOmniboxEnabled),__source:{fileName:zI,lineNumber:33,columnNumber:11}})),s.createElement(WI.C,{text:(0,ue.Z)("Include Bookmarks"),className:"pad-left",__source:{fileName:zI,lineNumber:40,columnNumber:9}},s.createElement("input",{type:"checkbox",disabled:!e[P.kAddressBarOmniboxEnabled],checked:e[P.kAddressBarOmniboxShowBookmarks],onChange:GI(P.kAddressBarOmniboxShowBookmarks),__source:{fileName:zI,lineNumber:44,columnNumber:11}})),s.createElement(WI.C,{text:(0,ue.Z)("Include Typed History"),className:"pad-left",__source:{fileName:zI,lineNumber:52,columnNumber:9}},s.createElement("input",{type:"checkbox",disabled:!e[P.kAddressBarOmniboxEnabled],checked:e[P.kAddressBarOmniboxShowTypedHistory],onChange:GI(P.kAddressBarOmniboxShowTypedHistory),__source:{fileName:zI,lineNumber:56,columnNumber:11}})),s.createElement(WI.C,{text:(0,ue.Z)("Include Frequently Visited Pages"),className:"pad-left",__source:{fileName:zI,lineNumber:64,columnNumber:9}},s.createElement("input",{type:"checkbox",disabled:!e[P.kAddressBarOmniboxEnabled],checked:e[P.kAddressBarOmniboxShowTopSites],onChange:GI(P.kAddressBarOmniboxShowTopSites),__source:{fileName:zI,lineNumber:68,columnNumber:11}})),s.createElement(WI.C,{text:(0,ue.Z)("Include Browser History"),className:"pad-left",__source:{fileName:zI,lineNumber:76,columnNumber:9}},s.createElement("input",{type:"checkbox",disabled:!e[P.kAddressBarOmniboxEnabled],checked:e[P.kAddressBarOmniboxShowBrowserHistory],onChange:GI(P.kAddressBarOmniboxShowBrowserHistory),__source:{fileName:zI,lineNumber:80,columnNumber:11}})))}}const jI=KI;var YI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarShortcuts.jsx";const $I=st.Z.getEventHandler;class XI extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:YI,lineNumber:19,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:YI,lineNumber:20,columnNumber:9}},s.createElement("h3",{__source:{fileName:YI,lineNumber:21,columnNumber:11}},(0,ue.Z)("Open Address in New Tab")),s.createElement(_i,{name:"urlfieldShortcut",className:"setting-single",value:this.props.value,onChange:$I(P.kAddressBarUrlOpenShortcut),__source:{fileName:YI,lineNumber:22,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:YI,lineNumber:26,columnNumber:13}},s.createElement("label",{__source:{fileName:YI,lineNumber:27,columnNumber:15}},s.createElement("input",{type:"radio",value:"alt",__source:{fileName:YI,lineNumber:28,columnNumber:17}}),s.createElement("span",{__source:{fileName:YI,lineNumber:29,columnNumber:17}},"Alt + Enter"))),s.createElement("div",{className:"setting-single",__source:{fileName:YI,lineNumber:36,columnNumber:13}},s.createElement("label",{__source:{fileName:YI,lineNumber:37,columnNumber:15}},s.createElement("input",{type:"radio",value:"shift",__source:{fileName:YI,lineNumber:38,columnNumber:17}}),s.createElement("span",{__source:{fileName:YI,lineNumber:39,columnNumber:17}},"Shift + Enter"))))))}}const QI=XI;var qI="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBar.jsx";const JI=[P.kAddressBarAutocompleteSuffixExpansionEnabled,P.kAddressBarAutocompleteSuffixExpansionValue,P.kAddressBarAutocompleteEnabled,P.kAddressBarAutocompletePreferBookmarks,P.kAddressBarExtensionsShowAllToggle,P.kAddressBarExtensionsShowHiddenToggle,P.kAddressBarExtensionsRenderInDropdown,P.kAddressBarOmniboxCutcopyEncoded,P.kAddressBarOmniboxEnabled,P.kAddressBarOmniboxShowBookmarks,P.kAddressBarOmniboxShowTopSites,P.kAddressBarOmniboxShowTypedHistory,P.kAddressBarOmniboxShowBrowserHistory,P.kAddressBarPosition,P.kAddressBarSelectOnClick,P.kAddressBarShowFullUrl,P.kAddressBarShowProfile,P.kAddressBarShowProgress,P.kAddressBarShowQrGenerator,P.kAddressBarStripJavascriptOnPaste,P.kAddressBarUrlOpenShortcut,P.kAddressBarVisible,P.kAddressBarHighlightBaseDomain],eA=st.Z.getEventHandler;class tA extends s.Component{constructor(...e){var t,n,i;super(...e),i=()=>s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Security Features"),__source:{fileName:qI,lineNumber:272,columnNumber:12}},s.createElement(WI.C,{text:(0,ue.Z)("Strip JavaScript From Pasted Text"),__source:{fileName:qI,lineNumber:273,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarStripJavascriptOnPaste],onChange:eA(P.kAddressBarStripJavascriptOnPaste),__source:{fileName:qI,lineNumber:274,columnNumber:9}})),s.createElement(WI.C,{text:(0,ue.Z)("Highlight Base Domain in Address"),__source:{fileName:qI,lineNumber:280,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarHighlightBaseDomain],onChange:eA(P.kAddressBarHighlightBaseDomain),__source:{fileName:qI,lineNumber:281,columnNumber:9}}))),(n="renderSecurityFeatures")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}changeExtensionToggleAll(e){const t=e.target.checked;!1===t&&(st.Z.set(P.kAddressBarExtensionsShowAllToggle,!0),st.Z.set(P.kAddressBarExtensionsShowHiddenToggle,!1)),st.Z.set(P.kAddressBarExtensionsShowHiddenToggle,!1),st.Z.set(P.kAddressBarExtensionsShowAllToggle,t)}changeExtensionToggleHidden(e){const t=e.target.checked;!1===t&&(st.Z.set(P.kAddressBarExtensionsShowHiddenToggle,!0),st.Z.set(P.kAddressBarExtensionsShowAllToggle,!1)),st.Z.set(P.kAddressBarExtensionsShowHiddenToggle,t),st.Z.set(P.kAddressBarExtensionsShowAllToggle,!1)}enableExtensionRenderInDropdown(e){const t=e.target.checked;!1===t&&st.Z.set(P.kAddressBarExtensionsRenderInDropdown,!0),!0===t&&st.Z.set(P.kAddressBarExtensionsRenderInDropdown,!1),st.Z.set(P.kAddressBarExtensionsRenderInDropdown,t)}renderShowAddressBar(){return s.createElement(WI.j,{filter:this.props.filter,className:"unlimited",__source:{fileName:qI,lineNumber:116,columnNumber:13}},s.createElement(WI.C,{text:(0,ue.Z)("Show Address Bar"),__source:{fileName:qI,lineNumber:117,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarVisible],onChange:eA(P.kAddressBarVisible),__source:{fileName:qI,lineNumber:118,columnNumber:9}})))}renderAddressBarPosition(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Address Bar Position"),__source:{fileName:qI,lineNumber:126,columnNumber:13}},s.createElement(_i,{name:"addressbar-position",value:this.props.prefValues[P.kAddressBarPosition],onChange:eA(P.kAddressBarPosition),className:"group",__source:{fileName:qI,lineNumber:127,columnNumber:7}},s.createElement(WI.C,{text:(0,ue.Z)("Top"),__source:{fileName:qI,lineNumber:133,columnNumber:9}},s.createElement("input",{type:"radio",value:"top",__source:{fileName:qI,lineNumber:134,columnNumber:11}})),s.createElement(WI.C,{text:(0,ue.Z)("Bottom"),__source:{fileName:qI,lineNumber:136,columnNumber:9}},s.createElement("input",{type:"radio",value:"bottom",__source:{fileName:qI,lineNumber:137,columnNumber:11}}))))}renderAddressBarOptions(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Address Field Options"),__source:{fileName:qI,lineNumber:144,columnNumber:13}},s.createElement(WI.C,{text:(0,ue.Z)("Show Full Address"),__source:{fileName:qI,lineNumber:145,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarShowFullUrl],onChange:eA(P.kAddressBarShowFullUrl),__source:{fileName:qI,lineNumber:146,columnNumber:9}})),s.createElement(WI.C,{text:(0,ue.Z)("Select Address on Activation"),__source:{fileName:qI,lineNumber:150,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarSelectOnClick],onChange:eA(P.kAddressBarSelectOnClick),__source:{fileName:qI,lineNumber:151,columnNumber:9}})),s.createElement(WI.C,{text:(0,ue.Z)("Copy and Cut Encoded Address"),__source:{fileName:qI,lineNumber:155,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarOmniboxCutcopyEncoded],onChange:eA(P.kAddressBarOmniboxCutcopyEncoded),__source:{fileName:qI,lineNumber:156,columnNumber:9}})),s.createElement(WI.C,{text:(0,ue.Z)("Page Load Progress Bar"),__source:{fileName:qI,lineNumber:160,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarShowProgress],onChange:eA(P.kAddressBarShowProgress),__source:{fileName:qI,lineNumber:161,columnNumber:9}})),s.createElement(WI.C,{text:(0,ue.Z)("QR Code Generator"),__source:{fileName:qI,lineNumber:165,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarShowQrGenerator],onChange:eA(P.kAddressBarShowQrGenerator),__source:{fileName:qI,lineNumber:166,columnNumber:9}})))}renderAddressBarAutoComplete(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Address Auto-Complete"),__source:{fileName:qI,lineNumber:174,columnNumber:13}},s.createElement(WI.C,{text:(0,ue.Z)("radio","Enabled"),__source:{fileName:qI,lineNumber:175,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarAutocompleteEnabled],onChange:eA(P.kAddressBarAutocompleteEnabled),__source:{fileName:qI,lineNumber:176,columnNumber:9}})),s.createElement(WI.C,{className:"pad-left",text:(0,ue.Z)("Always Prefer Bookmarks"),__source:{fileName:qI,lineNumber:182,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarAutocompletePreferBookmarks],disabled:!this.props.prefValues[P.kAddressBarAutocompleteEnabled],onChange:eA(P.kAddressBarAutocompletePreferBookmarks),__source:{fileName:qI,lineNumber:183,columnNumber:9}})))}renderDomainExpansion(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Domain Expansion"),__source:{fileName:qI,lineNumber:195,columnNumber:13}},s.createElement("p",{className:"info pad-top",__source:{fileName:qI,lineNumber:196,columnNumber:7}},(0,ue.Z)("Expand top level domains with Ctrl + Enter. This shortcut takes precedence over tab opening modifiers")),s.createElement(WI.C,{text:(0,ue.Z)("radio","Enabled"),__source:{fileName:qI,lineNumber:200,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionEnabled],onChange:eA(P.kAddressBarAutocompleteSuffixExpansionEnabled),__source:{fileName:qI,lineNumber:201,columnNumber:9}})),s.createElement(WI.C,{className:"pad-left",text:(0,ue.Z)("Suffix"),__source:{fileName:qI,lineNumber:206,columnNumber:7}},s.createElement("input",{disabled:!this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionEnabled],type:"text",defaultValue:this.props.prefValues[P.kAddressBarAutocompleteSuffixExpansionValue],maxLength:"256",onChange:eA(P.kAddressBarAutocompleteSuffixExpansionValue),__source:{fileName:qI,lineNumber:207,columnNumber:9}})))}renderExtensions(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Extension Visibility"),__source:{fileName:qI,lineNumber:218,columnNumber:13}},s.createElement(WI.C,{label:(0,ue.Z)("Show and hide only hidden extensions"),text:(0,ue.Z)("Toggle Only Hidden Extensions"),__source:{fileName:qI,lineNumber:219,columnNumber:7}},s.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[P.kAddressBarExtensionsShowHiddenToggle],onChange:this.changeExtensionToggleHidden,__source:{fileName:qI,lineNumber:223,columnNumber:9}})),s.createElement(WI.C,{label:(0,ue.Z)("Show and hide all extensions"),text:(0,ue.Z)("Toggle All Extensions"),__source:{fileName:qI,lineNumber:231,columnNumber:7}},s.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[P.kAddressBarExtensionsShowAllToggle],onChange:this.changeExtensionToggleAll,__source:{fileName:qI,lineNumber:235,columnNumber:9}})),s.createElement(WI.C,{label:(0,ue.Z)("Enable the drop-down menu for hidden extensions"),text:(0,ue.Z)("Expand Hidden Extensions to Drop-Down Menu"),__source:{fileName:qI,lineNumber:243,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarExtensionsRenderInDropdown],onChange:this.enableExtensionRenderInDropdown,__source:{fileName:qI,lineNumber:247,columnNumber:9}})))}renderProfileManagement(){return s.createElement(WI.j,{filter:this.props.filter,heading:(0,ue.Z)("Profile Management"),__source:{fileName:qI,lineNumber:257,columnNumber:13}},s.createElement(WI.C,{text:(0,ue.Z)("Show Profile Button"),__source:{fileName:qI,lineNumber:258,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarShowProfile],onChange:eA(P.kAddressBarShowProfile),__source:{fileName:qI,lineNumber:259,columnNumber:9}})),s.createElement("input",{type:"button",onClick:se.Z.managePeople,value:(0,ue.Z)("Manage Profiles"),__source:{fileName:qI,lineNumber:263,columnNumber:7}}))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("title","Address Bar"),filter:this.props.filter,__source:{fileName:qI,lineNumber:291,columnNumber:7}},this.renderShowAddressBar(),this.renderAddressBarPosition(),this.renderAddressBarOptions(),s.createElement(QI,{value:this.props.prefValues[P.kAddressBarUrlOpenShortcut],filter:this.props.filter,__source:{fileName:qI,lineNumber:296,columnNumber:9}}),this.renderAddressBarAutoComplete(),s.createElement(jI,{prefValues:this.props.prefValues,filter:this.props.filter,__source:{fileName:qI,lineNumber:303,columnNumber:9}}),this.renderDomainExpansion(),this.renderProfileManagement(),this.renderExtensions(),this.renderSecurityFeatures())}}const nA=(0,bi.Z)(tA,JI);var sA=n(34155);function iA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rA extends s.PureComponent{constructor(...e){super(...e),iA(this,"state",{zoom:yh.Z.getState().uiZoom}),iA(this,"_onZoomStoreChanged",(()=>{this.setState({zoom:yh.Z.getState().uiZoom})})),iA(this,"setZoomLevel",((e,t)=>{t?this.setState({zoom:e}):fh.Z.setUIZoom(e),sA.nextTick((()=>{this.props.onUIZoomUpdate()}))}))}componentDidMount(){this._zoomDetectStoreToken=yh.Z.addListener(this._onZoomStoreChanged)}componentWillUnmount(){this._zoomDetectStoreToken.remove()}render(){const{zoom:e}=this.state;return s.createElement(wh,{inFooter:!1,zoom:e,defaultZoomLevel:Sh.an,key:"zoomslider",scrolling:!1,maxLevel:Sh.OK,minLevel:Sh.bI,step:Sh.Wp,delay:!0,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\UIZoomIndicator.jsx",lineNumber:57,columnNumber:12}})}}const aA=rA;var oA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\Appearance.jsx";function lA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cA=[P.kAppearanceCssUiModsDirectory,P.kAppearanceHudEnabled,P.kAppearanceRangeButtons,P.kPopupsShowInTab,P.kSettingsInTab,P.kStatusBarDisplay,P.kStatusBarMinimized,P.kThemeUseAnimation,P.kWindowsLinuxAltControls,P.kWindowsUseNativeDecoration],uA=st.Z.getEventHandler,mA=[{key:P.kToolbarsNavigation,name:(0,ue.Z)("Reset Address Bar")},{key:P.kToolbarsStatus,name:(0,ue.Z)("Reset Status Bar")}];class dA extends s.Component{constructor(...e){super(...e),lA(this,"state",{modFolder:this.props.prefValues[P.kAppearanceCssUiModsDirectory]}),lA(this,"reportStatusBar",(e=>{const{value:t}=e.target;st.Z.set(P.kStatusBarDisplay,t),"on"!==t&&(st.Z.set(P.kStatusBarMinimized,t),"overlay"===t&&X.Z.setStatus((0,ue.Z)("Status Info set to Overlay"),2e3))})),lA(this,"handleResetToolbarClick",(e=>{st.Z.reset(e)})),lA(this,"uiZoomUpdate",(()=>{const e=pn.findDOMNode(this.refs.ui_zoom_setting),{Element:t}=this.context;e instanceof t&&e.scrollIntoViewIfNeeded()})),lA(this,"selectCSSFolder",(()=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Folder for CSS UI Mods"),type:"folder"}).then((e=>{e&&(this.setState({modFolder:e}),st.Z.set(P.kAppearanceCssUiModsDirectory,e))}))})),lA(this,"onChangeCSSModFolder",(e=>{this.setState({modFolder:e.target.value}),st.Z.set(P.kAppearanceCssUiModsDirectory,e.target.value)}))}renderUseNativeWindow(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:89,columnNumber:7}},s.createElement("label",{__source:{fileName:oA,lineNumber:90,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWindowsUseNativeDecoration],onChange:uA(P.kWindowsUseNativeDecoration),__source:{fileName:oA,lineNumber:91,columnNumber:11}}),s.createElement("span",{__source:{fileName:oA,lineNumber:94,columnNumber:11}},(0,ue.Z)("Use Native Window"))),s.createElement("p",{className:"info",__source:{fileName:oA,lineNumber:96,columnNumber:9}},(0,ue.Z)("This setting requires a restart to take full effect.")))}renderOpenInTabs(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:105,columnNumber:7}},s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:106,columnNumber:9}},s.createElement("label",{__source:{fileName:oA,lineNumber:107,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kSettingsInTab],onChange:uA(P.kSettingsInTab),__source:{fileName:oA,lineNumber:108,columnNumber:13}}),s.createElement("span",{__source:{fileName:oA,lineNumber:112,columnNumber:13}},(0,ue.Z)("Open Settings in a Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:115,columnNumber:9}},s.createElement("label",{__source:{fileName:oA,lineNumber:116,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPopupsShowInTab],onChange:uA(P.kPopupsShowInTab),__source:{fileName:oA,lineNumber:117,columnNumber:13}}),s.createElement("span",{__source:{fileName:oA,lineNumber:120,columnNumber:13}},(0,ue.Z)("Open Popups in Tabs")))))}renderShowUI(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:129,columnNumber:7}},s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:130,columnNumber:9}},s.createElement("label",{__source:{fileName:oA,lineNumber:131,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kThemeUseAnimation],onChange:uA(P.kThemeUseAnimation),__source:{fileName:oA,lineNumber:132,columnNumber:13}}),s.createElement("span",{__source:{fileName:oA,lineNumber:135,columnNumber:13}},(0,ue.Z)("Use Animation")))),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:139,columnNumber:9}},s.createElement("label",{__source:{fileName:oA,lineNumber:140,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAppearanceRangeButtons],onChange:uA(P.kAppearanceRangeButtons),__source:{fileName:oA,lineNumber:141,columnNumber:13}}),s.createElement("span",{__source:{fileName:oA,lineNumber:144,columnNumber:13}},(0,ue.Z)("Use Buttons in Range Controls")))))}renderWindowsControlPosition(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:153,columnNumber:7}},s.createElement("h3",{__source:{fileName:oA,lineNumber:154,columnNumber:9}},(0,ue.Z)("Window Controls Position")),s.createElement(_i,{className:"linuxAltControls",name:"linuxAltControls",value:this.props.prefValues[P.kWindowsLinuxAltControls],onChange:uA(P.kWindowsLinuxAltControls,"convert"),__source:{fileName:oA,lineNumber:155,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:159,columnNumber:11}},s.createElement("label",{__source:{fileName:oA,lineNumber:160,columnNumber:13}},s.createElement("input",{type:"radio",value:"false",__source:{fileName:oA,lineNumber:161,columnNumber:15}}),s.createElement("span",{__source:{fileName:oA,lineNumber:162,columnNumber:15}},(0,ue.Z)("Right Side")))),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:165,columnNumber:11}},s.createElement("label",{__source:{fileName:oA,lineNumber:166,columnNumber:13}},s.createElement("input",{type:"radio",value:"true",__source:{fileName:oA,lineNumber:167,columnNumber:15}}),s.createElement("span",{__source:{fileName:oA,lineNumber:168,columnNumber:15}},(0,ue.Z)("Left Side"))))))}renderStatusBar(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:178,columnNumber:7}},s.createElement("h3",{__source:{fileName:oA,lineNumber:179,columnNumber:9}},(0,ue.Z)("title","Status Bar")),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:180,columnNumber:9}},s.createElement(_i,{name:"StatusBar",className:"group",value:this.props.prefValues[P.kStatusBarDisplay],onChange:this.reportStatusBar,__source:{fileName:oA,lineNumber:181,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:185,columnNumber:13}},s.createElement("label",{__source:{fileName:oA,lineNumber:186,columnNumber:15}},s.createElement("input",{type:"radio",value:"on",__source:{fileName:oA,lineNumber:187,columnNumber:17}}),s.createElement("span",{__source:{fileName:oA,lineNumber:188,columnNumber:17}},(0,ue.Z)("verb","Show Status Bar")))),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:191,columnNumber:13}},s.createElement("label",{__source:{fileName:oA,lineNumber:192,columnNumber:15}},s.createElement("input",{type:"radio",value:"overlay",__source:{fileName:oA,lineNumber:193,columnNumber:17}}),s.createElement("span",{__source:{fileName:oA,lineNumber:194,columnNumber:17}},(0,ue.Z)("Status Info Overlay")))),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:197,columnNumber:13}},s.createElement("label",{__source:{fileName:oA,lineNumber:198,columnNumber:15}},s.createElement("input",{type:"radio",value:"off",__source:{fileName:oA,lineNumber:199,columnNumber:17}}),s.createElement("span",{__source:{fileName:oA,lineNumber:200,columnNumber:17}},(0,ue.Z)("verb","Hide Status Bar")))))))}renderToolbarCustomizations(){const e=mA.map((e=>s.createElement("div",{className:"setting-single",key:e.key,__source:{fileName:oA,lineNumber:212,columnNumber:9}},s.createElement("input",{type:"button",onClick:this.handleResetToolbarClick.bind(this,e.key),value:e.name,__source:{fileName:oA,lineNumber:213,columnNumber:11}}))));return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:220,columnNumber:7}},s.createElement("h3",{__source:{fileName:oA,lineNumber:221,columnNumber:9}},(0,ue.Z)("Toolbar Customization")),e)}renderUserInterfaceZoom(){return s.createElement("div",{className:"setting-group unlimited",ref:"ui_zoom_setting",__source:{fileName:oA,lineNumber:238,columnNumber:7}},s.createElement("h3",{__source:{fileName:oA,lineNumber:239,columnNumber:9}},(0,ue.Z)("User Interface Zoom")),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:240,columnNumber:9}},s.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:oA,lineNumber:241,columnNumber:11}},s.createElement(aA,{onUIZoomUpdate:this.uiZoomUpdate,__source:{fileName:oA,lineNumber:242,columnNumber:12}}))))}renderCustomStylingOptions(){return nS.Z.isEnabled("css_mods")?s.createElement("div",{className:"setting-subgroup",__source:{fileName:oA,lineNumber:271,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:272,columnNumber:11}},s.createElement("div",{className:"setting-single folder-selection",__source:{fileName:oA,lineNumber:273,columnNumber:13}},s.createElement("input",{type:"text",value:this.state.modFolder,title:(0,ue.Z)("Enter Custom UI Modifications Path"),onChange:this.onChangeCSSModFolder,__source:{fileName:oA,lineNumber:274,columnNumber:15}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Select Folder..."),onClick:this.selectCSSFolder,__source:{fileName:oA,lineNumber:278,columnNumber:17}})),s.createElement("p",{className:"info",__source:{fileName:oA,lineNumber:282,columnNumber:13}},(0,ue.Z)("Directory for custom CSS UI modification files."),s.createElement("br",{__source:{fileName:oA,lineNumber:283,columnNumber:69}}),(0,ue.Z)("They must have a .css extension to be included."),s.createElement("br",{__source:{fileName:oA,lineNumber:284,columnNumber:69}}),(0,ue.Z)("No guarantees are made that these will work in new versions of Vivaldi."),s.createElement("br",{__source:{fileName:oA,lineNumber:285,columnNumber:93}}),(0,ue.Z)("This requires a restart to apply.")))):null}renderHUD(){return s.createElement("div",{className:"setting-group",__source:{fileName:oA,lineNumber:297,columnNumber:12}},s.createElement("h3",{__source:{fileName:oA,lineNumber:298,columnNumber:7}},(0,ue.Z)("Status Indicator Overlay")),s.createElement("div",{className:"setting-single",__source:{fileName:oA,lineNumber:299,columnNumber:7}},s.createElement("label",{__source:{fileName:oA,lineNumber:300,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAppearanceHudEnabled],onChange:uA(P.kAppearanceHudEnabled),__source:{fileName:oA,lineNumber:301,columnNumber:11}}),s.createElement("span",{__source:{fileName:oA,lineNumber:305,columnNumber:11}},(0,ue.Z)("Show when entering or exiting Break Mode")))))}render(){return s.createElement(s.Fragment,null,s.createElement(Cc,{categoryTitle:(0,ue.Z)("Window Appearance"),filter:this.props.filter,__source:{fileName:oA,lineNumber:314,columnNumber:9}},this.renderOpenInTabs(),this.renderShowUI(),this.renderUseNativeWindow(),!1,this.renderStatusBar(),this.renderToolbarCustomizations(),this.renderUserInterfaceZoom(),this.renderHUD()),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Custom UI Modifications"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:oA,lineNumber:328,columnNumber:9}},this.renderCustomStylingOptions()))}}lA(dA,"contextType",Vs.Z);const hA=(0,bi.Z)(dA,cA);var pA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\updates\\Autoupdate.jsx";function gA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bA(e,t,n,s){return _A(e,t),fA(n,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,n,s),s}function NA(e,t,n){return _A(e,t),fA(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function fA(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _A(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}const vA=[P.kUpdateNotifier,P.kUpdateSchedule];class EA extends s.Component{constructor(...e){super(...e),gA(this,"_isMounted",!1),gA(this,"_updateNotifierStatusKnown",!1),gA(this,"state",{showUpdateSettings:!1,updateNotifierEnabled:!1,autoInstallUpdate:!0}),gA(this,"refreshUpdateNotifierEnabled",(()=>{b.Z.autoUpdate.isUpdateNotifierEnabled((e=>{this.setUpdateNotifierEnabled(e)}))})),gA(this,"setUpdateNotifierEnabled",(e=>{this._isMounted&&this.setState({updateNotifierEnabled:e})})),gA(this,"refreshAutoInstallUpdates",(()=>{b.Z.autoUpdate.getAutoInstallUpdates((e=>{this._isMounted&&this.setState({autoInstallUpdate:e})}))})),gA(this,"toggleUpdateSettings",(()=>{this._updateNotifierStatusKnown||(this._updateNotifierStatusKnown=!0,this.refreshUpdateNotifierEnabled()),this.setState((e=>({showUpdateSettings:!e.showUpdateSettings})))})),gA(this,"toggleUpdateNotifier",(e=>{e.target.checked?b.Z.autoUpdate.enableUpdateNotifier((e=>{e?this.setUpdateNotifierEnabled(!0):this.refreshUpdateNotifierEnabled()})):b.Z.autoUpdate.disableUpdateNotifier((e=>{e?this.setUpdateNotifierEnabled(!1):this.refreshUpdateNotifierEnabled()}))})),gA(this,"toggleAutoInstallUpdate",(e=>{const t=e.target.checked;b.Z.autoUpdate.setAutoInstallUpdates(t),this.refreshAutoInstallUpdates()}))}componentDidMount(){this._isMounted=!0,void 0===NA(EA,EA,CA)&&b.Z.autoUpdate.hasAutoUpdates().then((e=>{bA(EA,EA,CA,e),this._isMounted&&this.forceUpdate()}))}componentWillUnmount(){this._isMounted=!1}getUpdateLabel(){return!1===NA(EA,EA,CA)?(0,ue.Z)("Notify About Updates"):(0,ue.Z)("Automatically Download and Install Updates")}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Updates"),filter:this.props.filter,__source:{fileName:pA,lineNumber:138,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:pA,lineNumber:139,columnNumber:9}},s.createElement("p",{className:"info",__source:{fileName:pA,lineNumber:141,columnNumber:11}},(0,ue.Z)("Get the latest security fixes by allowing automatic updates of Vivaldi.")),!1,s.createElement("div",{className:"setting-single",__source:{fileName:pA,lineNumber:180,columnNumber:13}},s.createElement("input",{type:"button",value:this.state.showUpdateSettings?(0,ue.Z)("Hide Update Settings"):(0,ue.Z)("Show Update Settings"),onClick:this.toggleUpdateSettings,__source:{fileName:pA,lineNumber:181,columnNumber:15}})),this.state.showUpdateSettings&&s.createElement("div",{className:"setting-single",__source:{fileName:pA,lineNumber:191,columnNumber:13}},s.createElement("label",{__source:{fileName:pA,lineNumber:192,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.state.updateNotifierEnabled,onChange:this.toggleUpdateNotifier,__source:{fileName:pA,lineNumber:193,columnNumber:17}}),s.createElement("span",{__source:{fileName:pA,lineNumber:196,columnNumber:17}},this.getUpdateLabel()))),!1))}}var CA={writable:!0,value:void 0};const wA=(0,bi.Z)(EA,vA);var yA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\biscuit\\BiscuitMode.jsx";const SA=[P.kBiscuitLoadBookmarks,P.kBiscuitLogLevel,P.kBiscuitVersion],TA=st.Z.getEventHandler;class kA extends s.Component{render(){return"🐶"!==this.props.filter?null:s.createElement("span",{__source:{fileName:yA,lineNumber:33,columnNumber:7}},s.createElement("h2",{__source:{fileName:yA,lineNumber:34,columnNumber:9}},"Biscuit Area 🐶"),s.createElement("div",{className:"setting-group",__source:{fileName:yA,lineNumber:35,columnNumber:9}},s.createElement("h3",{__source:{fileName:yA,lineNumber:36,columnNumber:11}},"Biscuit Mode"),s.createElement("div",{className:"setting-single",__source:{fileName:yA,lineNumber:37,columnNumber:13}},s.createElement("label",{__source:{fileName:yA,lineNumber:38,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBiscuitVersion],onChange:TA(P.kBiscuitVersion),__source:{fileName:yA,lineNumber:39,columnNumber:17}}),s.createElement("span",{__source:{fileName:yA,lineNumber:42,columnNumber:19}},"Show Browser Version on Status Bar"))),s.createElement("div",{className:"setting-single",__source:{fileName:yA,lineNumber:45,columnNumber:13}},s.createElement("label",{__source:{fileName:yA,lineNumber:46,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBiscuitLoadBookmarks],onChange:TA(P.kBiscuitLoadBookmarks),__source:{fileName:yA,lineNumber:47,columnNumber:17}}),s.createElement("span",{__source:{fileName:yA,lineNumber:50,columnNumber:19}},"Upgrade Bookmarks Every Startup"))),s.createElement("div",{className:"setting-single",__source:{fileName:yA,lineNumber:53,columnNumber:13}},s.createElement("span",{__source:{fileName:yA,lineNumber:54,columnNumber:15}},"Log level"),s.createElement("select",{value:this.props.prefValues[P.kBiscuitLogLevel],onChange:TA(P.kBiscuitLogLevel),__source:{fileName:yA,lineNumber:55,columnNumber:15}},s.createElement("option",{value:"info",__source:{fileName:yA,lineNumber:58,columnNumber:17}},"Debug"),s.createElement("option",{value:"info",__source:{fileName:yA,lineNumber:59,columnNumber:17}},"Info"),s.createElement("option",{value:"warn",__source:{fileName:yA,lineNumber:60,columnNumber:17}},"Warn"),s.createElement("option",{value:"error",__source:{fileName:yA,lineNumber:61,columnNumber:17}},"Error"),s.createElement("option",{value:"none",__source:{fileName:yA,lineNumber:62,columnNumber:17}},"None")))))}}const IA=(0,bi.Z)(kA,SA);var AA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkBar.jsx";const ZA=[P.kBookmarksBarDisplay,P.kBookmarksBarPosition,P.kBookmarksBarVisible],PA=st.Z.getEventHandler;class DA extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{i.Z.setBookmarkBarFolder(e.target.value)},(n="onFolderChange")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Bookmark Bar"),filter:this.props.filter,__source:{fileName:AA,lineNumber:36,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:AA,lineNumber:37,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:38,columnNumber:11}},s.createElement("label",{__source:{fileName:AA,lineNumber:39,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksBarVisible],onChange:PA(P.kBookmarksBarVisible),__source:{fileName:AA,lineNumber:40,columnNumber:15}}),s.createElement("span",{__source:{fileName:AA,lineNumber:43,columnNumber:15}},(0,ue.Z)("Show Bookmark Bar"))))),s.createElement("div",{className:"setting-group",__source:{fileName:AA,lineNumber:48,columnNumber:9}},s.createElement("h3",{__source:{fileName:AA,lineNumber:49,columnNumber:11}},(0,ue.Z)("Select Bookmark Bar Folder")),s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:50,columnNumber:11}},s.createElement(on,{onChange:this.onFolderChange,__source:{fileName:AA,lineNumber:51,columnNumber:13}}))),s.createElement("div",{className:"setting-group",__source:{fileName:AA,lineNumber:56,columnNumber:9}},s.createElement("h3",{__source:{fileName:AA,lineNumber:57,columnNumber:11}},(0,ue.Z)("Bookmark Bar Position")),s.createElement(_i,{name:"bookmark-position",value:this.props.prefValues[P.kBookmarksBarPosition],onChange:PA(P.kBookmarksBarPosition),__source:{fileName:AA,lineNumber:58,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:61,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:62,columnNumber:15}},s.createElement("input",{type:"radio",value:"top",__source:{fileName:AA,lineNumber:63,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:64,columnNumber:17}},(0,ue.Z)("Top")))),s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:67,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:68,columnNumber:15}},s.createElement("input",{type:"radio",value:"bottom",__source:{fileName:AA,lineNumber:69,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:70,columnNumber:17}},(0,ue.Z)("Bottom")))))),s.createElement("div",{className:"setting-group",__source:{fileName:AA,lineNumber:76,columnNumber:9}},s.createElement("h3",{__source:{fileName:AA,lineNumber:77,columnNumber:11}},(0,ue.Z)("Bookmark Bar Display")),s.createElement(_i,{name:"bookmark_bar_display",value:this.props.prefValues[P.kBookmarksBarDisplay],onChange:PA(P.kBookmarksBarDisplay),__source:{fileName:AA,lineNumber:79,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:82,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:83,columnNumber:15}},s.createElement("input",{type:"radio",value:"default",__source:{fileName:AA,lineNumber:84,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:85,columnNumber:17}},(0,ue.Z)("Text and Icon")))),s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:88,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:89,columnNumber:15}},s.createElement("input",{type:"radio",value:"text",__source:{fileName:AA,lineNumber:90,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:91,columnNumber:17}},(0,ue.Z)("Text Only")))),s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:94,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:95,columnNumber:15}},s.createElement("input",{type:"radio",value:"icon",__source:{fileName:AA,lineNumber:96,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:97,columnNumber:17}},(0,ue.Z)("Icon Only")))),s.createElement("div",{className:"setting-single",__source:{fileName:AA,lineNumber:100,columnNumber:13}},s.createElement("label",{__source:{fileName:AA,lineNumber:101,columnNumber:15}},s.createElement("input",{type:"radio",value:"iconexceptfolders",__source:{fileName:AA,lineNumber:102,columnNumber:17}}),s.createElement("span",{__source:{fileName:AA,lineNumber:103,columnNumber:17}},(0,ue.Z)("Bookmark Icon Only")))))))}}const MA=(0,bi.Z)(DA,ZA);var OA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkSettings.jsx";function xA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const LA=[P.kBookmarksConfirmAdding,P.kBookmarksConfirmOpening,P.kBookmarksConfirmOpeningThreshold,P.kBookmarksFetchPageMetadata,P.kBookmarksOpenInNewTab,P.kBookmarksSingleClickOpens,P.kBookmarksUnderlineMenuLetter],RA=st.Z.getEventHandler;class BA extends s.Component{constructor(...e){super(...e),xA(this,"minThreshold",1),xA(this,"maxThreshold",99)}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Bookmarks"),filter:this.props.filter,__source:{fileName:OA,lineNumber:41,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:OA,lineNumber:42,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:OA,lineNumber:43,columnNumber:11}},s.createElement("label",{__source:{fileName:OA,lineNumber:44,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksOpenInNewTab],onChange:RA(P.kBookmarksOpenInNewTab),__source:{fileName:OA,lineNumber:45,columnNumber:15}}),s.createElement("span",{__source:{fileName:OA,lineNumber:50,columnNumber:15}},(0,ue.Z)("Open Bookmarks in New Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:OA,lineNumber:53,columnNumber:11}},s.createElement("label",{__source:{fileName:OA,lineNumber:54,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksSingleClickOpens],onChange:RA(P.kBookmarksSingleClickOpens),__source:{fileName:OA,lineNumber:55,columnNumber:15}}),s.createElement("span",{__source:{fileName:OA,lineNumber:58,columnNumber:17}},(0,ue.Z)("Open Bookmark Panel Items with Single Click")))),s.createElement("div",{className:"setting-single",__source:{fileName:OA,lineNumber:62,columnNumber:13}},s.createElement("label",{__source:{fileName:OA,lineNumber:63,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksUnderlineMenuLetter],onChange:RA(P.kBookmarksUnderlineMenuLetter),__source:{fileName:OA,lineNumber:64,columnNumber:17}}),s.createElement("span",{__source:{fileName:OA,lineNumber:68,columnNumber:19}},(0,ue.Z)("Use “&” in Title to Underline Next Letter in Menus")))),s.createElement("div",{className:"setting-single max-bookmarks",__source:{fileName:OA,lineNumber:72,columnNumber:11}},s.createElement("label",{__source:{fileName:OA,lineNumber:73,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksConfirmOpening],onChange:RA(P.kBookmarksConfirmOpening),__source:{fileName:OA,lineNumber:74,columnNumber:15}}),s.createElement("span",{__source:{fileName:OA,lineNumber:79,columnNumber:15}},(0,ue.Z)("Confirm Opening Bookmarks over Maximum of")),s.createElement("input",{type:"number",size:"2",disabled:!this.props.prefValues[P.kBookmarksConfirmOpening],value:this.props.prefValues[P.kBookmarksConfirmOpeningThreshold],onChange:RA(P.kBookmarksConfirmOpeningThreshold),min:this.minThreshold,max:this.maxThreshold,__source:{fileName:OA,lineNumber:80,columnNumber:15}}))),s.createElement("div",{className:"setting-single max-bookmarks",__source:{fileName:OA,lineNumber:90,columnNumber:11}},s.createElement(WI.C,{text:(0,ue.Z)("Fetch Bookmark Data from Page Metadata"),__source:{fileName:OA,lineNumber:91,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksFetchPageMetadata],onChange:RA(P.kBookmarksFetchPageMetadata),__source:{fileName:OA,lineNumber:92,columnNumber:15}}))),s.createElement("div",{className:"setting-single",__source:{fileName:OA,lineNumber:99,columnNumber:11}},s.createElement(WI.C,{text:(0,ue.Z)("Always Open Bookmark Dialog"),__source:{fileName:OA,lineNumber:100,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kBookmarksConfirmAdding],onChange:RA(P.kBookmarksConfirmAdding),__source:{fileName:OA,lineNumber:101,columnNumber:15}})))))}}const FA=(0,bi.Z)(BA,LA);var UA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\NotificationsEditor.jsx";function VA(e){if(e%1440==0){const t=e/1440;return(0,ue.Z)("$1 day before","$1 days before",[t])}if(e%60==0){const t=e/60;return(0,ue.Z)("$1 hour before","$1 hours before",[t])}return(0,ue.Z)("$1 minute before","$1 minutes before",[e])}const HA=[[-1,(0,ue.Z)("No alarm")],[0,(0,ue.Z)("At event time")],[5,VA(5)],[10,VA(10)],[15,VA(15)],[30,VA(30)],[45,VA(45)],[60,VA(60)],[120,VA(120)],[1440,VA(1440)],[2880,VA(2880)]],WA=6e4;function zA(e){"Enter"===ST.Z[e.keyCode]&&e.stopPropagation()}const GA=function(e){const t=s.useContext(Vs.Z),{document:n}=t,[i,r]=s.useState(!1);s.useEffect((()=>{if(i){const e=n.querySelectorAll(".cal-event-alarm-time");e.length&&e[e.length-1].focus(),r(!1)}}),[i,n]);const a=t=>{const{event:n}=e,{value:s}=t.target,i="+"===s?0:parseInt(s),a={id:"",event_id:n.id,name:n.title,when:i*WA};n.notifications=[...n.notifications||[],a],r(!0),e.updateEvent(n)},o=(t,n)=>{const{notifications:s}=e.event,i=parseInt(n.target.value);if(!s||isNaN(i))return;if(-1===i)return void l(t,n);const r=s.indexOf(t);-1!==r&&(s[r].when=i*WA,e.updateEvent(e.event))},l=(t,n)=>{const{notifications:s}=e.event;if(!s)return;const i=n.target.closest(".calendar-event");if(i instanceof HTMLElement){const e=ii(i);e.forEach(((t,s)=>{t===n.target&&e[s-1]&&e[s-1].focus()}))}const r=s.indexOf(t);-1!==r&&(s.splice(r,1),e.updateEvent(e.event))},{event:c}=e;return s.createElement(s.Fragment,null,e.label&&s.createElement("h2",{__source:{fileName:UA,lineNumber:137,columnNumber:22}},e.label),c.notifications&&c.notifications.length>0?s.createElement(s.Fragment,null,c.notifications.map(((t,n)=>{const i=t.when/WA,r=[...HA];return r.find((([e])=>e===i))||(r.push([i,VA(i)]),r.sort((([e],[t])=>e-t))),s.createElement("div",{key:t.id||n,className:"edit-group",__source:{fileName:UA,lineNumber:147,columnNumber:18}},s.createElement("label",{__source:{fileName:UA,lineNumber:148,columnNumber:13}},s.createElement("select",{className:"cal-event-alarm-time",tabIndex:e.tabIndex,onChange:o.bind(null,t),value:i,disabled:0===r.length,__source:{fileName:UA,lineNumber:149,columnNumber:15}},r.map((([e,t])=>s.createElement("option",{key:e,value:e,__source:{fileName:UA,lineNumber:157,columnNumber:21}},t)))),s.createElement("input",{className:"circular",onClick:l.bind(null,t),onKeyDown:zA,tabIndex:e.tabIndex,type:"button",title:(0,ue.Z)("Remove alarm"),value:"–",__source:{fileName:UA,lineNumber:159,columnNumber:15}}),s.createElement("input",{className:"circular",onClick:a,onKeyDown:zA,tabIndex:e.tabIndex,type:"button",title:(0,ue.Z)("Add another alarm"),value:"+",__source:{fileName:UA,lineNumber:168,columnNumber:15}})))}))):s.createElement("div",{className:"edit-group",__source:{fileName:UA,lineNumber:181,columnNumber:9}},s.createElement("label",{__source:{fileName:UA,lineNumber:182,columnNumber:11}},s.createElement("select",{className:"cal-event-alarm-time",tabIndex:e.tabIndex,onChange:a,value:-1,disabled:0===HA.length,__source:{fileName:UA,lineNumber:183,columnNumber:13}},HA.map((([e,t])=>s.createElement("option",{key:e,value:e,__source:{fileName:UA,lineNumber:191,columnNumber:19}},t)))))))};var KA="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CalendarSettings.jsx";const jA=[P.kCalendarAutoAdjustEnd,P.kCalendarAutoTabDatetime,P.kCalendarClickOutside,P.kCalendarCollapseHours,P.kCalendarDayEnds,P.kCalendarDayStarts,P.kCalendarDefaultDuration,P.kCalendarDefaultNotification,P.kCalendarDisplayDensity,P.kCalendarHandleIcsDownloads,P.kCalendarDisplayEventIcons,P.kCalendarDisplayWeekNumber,P.kCalendarEditMode,P.kCalendarHiddenHidesNotifications,P.kCalendarMailAccount,P.kCalendarNotificationType,P.kCalendarNotificationSound,P.kCalendarOnlyHourlyDivider,P.kCalendarOnlyHourlyKeynav,P.kCalendarSendInviteEmailAction,P.kCalendarTimeIncrements,P.kMailAccounts],YA=st.Z.getEventHandler,$A=[["",(0,ue.Z)("other","None")],["../../../resources/notification_ding.opus",(0,ue.Z)("Ding")],["../../../resources/notification_rooster.opus",(0,ue.Z)("Rooster")],["../../../resources/notification_tada.opus",(0,ue.Z)("Tada")]],XA=[[0,(0,ue.Z)("No Duration")],[5*ru.lb,(0,ue.Z)("$1 minute","$1 minutes",[5])],[10*ru.lb,(0,ue.Z)("$1 minute","$1 minutes",[10])],[15*ru.lb,(0,ue.Z)("$1 minute","$1 minutes",[15])],[30*ru.lb,(0,ue.Z)("$1 minute","$1 minutes",[30])],[45*ru.lb,(0,ue.Z)("$1 minute","$1 minutes",[45])],[1*ru.QI,(0,ue.Z)("$1 hour","$1 hours",[1])],[2*ru.QI,(0,ue.Z)("$1 hour","$1 hours",[2])],[3*ru.QI,(0,ue.Z)("$1 hour","$1 hours",[3])],[8*ru.QI,(0,ue.Z)("$1 hour","$1 hours",[8])]],QA=g()().startOf("day"),qA=[];for(;QA.hour()<13;){const e=QA.hour();qA.push(s.createElement("option",{key:e,value:e,__source:{fileName:KA,lineNumber:92,columnNumber:20}},QA.format("LT"))),QA.add(1,"hour")}QA.hour(12);const JA=[];for(;QA.hour()>0;){QA.add(1,"hour");const e=QA.hour()||24;JA.push(s.createElement("option",{key:e,value:e,__source:{fileName:KA,lineNumber:100,columnNumber:18}},QA.format("LT")))}class eZ extends s.Component{renderMailAccountSelection(){const e=this.props.prefValues[P.kMailAccounts],t=this.props.prefValues[P.kCalendarMailAccount],n=e.find((e=>e.MAIL_EMAIL===t));return s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:115,columnNumber:7}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:116,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:118,columnNumber:11}},(0,ue.Z)("Calendar Mail Account")),s.createElement("select",{value:t,onChange:YA(P.kCalendarMailAccount),__source:{fileName:KA,lineNumber:119,columnNumber:11}},!n&&s.createElement("option",{value:t,disabled:!0,__source:{fileName:KA,lineNumber:124,columnNumber:15}},(0,ue.Z)("Select mail account")),e.map((e=>s.createElement("option",{key:e.MAIL_EMAIL,value:e.MAIL_EMAIL,__source:{fileName:KA,lineNumber:127,columnNumber:15}},e.MAIL_EMAIL))))))}render(){return s.createElement(s.Fragment,null,s.createElement(Cc,{categoryTitle:(0,ue.Z)("Calendar Display"),filter:this.props.filter,__source:{fileName:KA,lineNumber:142,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:146,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:147,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:148,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarDisplayEventIcons],onChange:YA(P.kCalendarDisplayEventIcons),__source:{fileName:KA,lineNumber:149,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:152,columnNumber:15}},(0,ue.Z)("Show Event Property Icons")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:155,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:156,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarDisplayWeekNumber],onChange:YA(P.kCalendarDisplayWeekNumber),__source:{fileName:KA,lineNumber:157,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:160,columnNumber:15}},(0,ue.Z)("Show Week Number"))),s.createElement("p",{className:"info",__source:{fileName:KA,lineNumber:162,columnNumber:13}},(0,ue.Z)("For week settings see Language under General Settings.")))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:168,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:169,columnNumber:11}},(0,ue.Z)("Events Layout")),s.createElement(_i,{name:"calendar-density",value:this.props.prefValues[P.kCalendarDisplayDensity],onChange:YA(P.kCalendarDisplayDensity),className:"group",__source:{fileName:KA,lineNumber:170,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:176,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:177,columnNumber:15}},s.createElement("input",{type:"radio",value:"full",__source:{fileName:KA,lineNumber:178,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:179,columnNumber:17}},(0,ue.Z)("Full")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:182,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:183,columnNumber:15}},s.createElement("input",{type:"radio",value:"compact",__source:{fileName:KA,lineNumber:184,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:185,columnNumber:17}},(0,ue.Z)("calendar","Compact")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:188,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:189,columnNumber:15}},s.createElement("input",{type:"radio",value:"minimal",__source:{fileName:KA,lineNumber:190,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:191,columnNumber:17}},(0,ue.Z)("Minimal")))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:197,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:199,columnNumber:11}},(0,ue.Z)("Day Settings")),s.createElement("div",{className:"setting-single full-width",__source:{fileName:KA,lineNumber:200,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:201,columnNumber:13}},s.createElement("span",{__source:{fileName:KA,lineNumber:202,columnNumber:15}},(0,ue.Z)("Day Starts At")),s.createElement("select",{name:"day_starts",value:this.props.prefValues[P.kCalendarDayStarts],onChange:YA(P.kCalendarDayStarts),__source:{fileName:KA,lineNumber:203,columnNumber:15}},qA))),s.createElement("div",{className:"setting-single full-width",__source:{fileName:KA,lineNumber:213,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:214,columnNumber:13}},s.createElement("span",{__source:{fileName:KA,lineNumber:215,columnNumber:15}},(0,ue.Z)("Day Ends At")),s.createElement("select",{name:"day_ends",value:this.props.prefValues[P.kCalendarDayEnds],onChange:YA(P.kCalendarDayEnds),__source:{fileName:KA,lineNumber:216,columnNumber:15}},JA))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:226,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:227,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarCollapseHours],onChange:YA(P.kCalendarCollapseHours),__source:{fileName:KA,lineNumber:228,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:233,columnNumber:15}},(0,ue.Z)("Collapse Excluded Hours"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:238,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:239,columnNumber:11}},(0,ue.Z)("Time Increments")),s.createElement(_i,{name:"time-increments",value:this.props.prefValues[P.kCalendarTimeIncrements],onChange:YA(P.kCalendarTimeIncrements),className:"group",__source:{fileName:KA,lineNumber:240,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:246,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:247,columnNumber:15}},s.createElement("input",{type:"radio",value:"15",__source:{fileName:KA,lineNumber:248,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:249,columnNumber:17}},(0,ue.Z)("15 Minutes")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:252,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:253,columnNumber:15}},s.createElement("input",{type:"radio",value:"30",__source:{fileName:KA,lineNumber:254,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:255,columnNumber:17}},(0,ue.Z)("30 Minutes")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:258,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:259,columnNumber:15}},s.createElement("input",{type:"radio",value:"60",__source:{fileName:KA,lineNumber:260,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:261,columnNumber:17}},(0,ue.Z)("1 Hour"))))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:265,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:266,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarOnlyHourlyDivider],onChange:YA(P.kCalendarOnlyHourlyDivider),__source:{fileName:KA,lineNumber:267,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:272,columnNumber:15}},(0,ue.Z)("Show Only 1 Hour Grid Lines")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:275,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:276,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarOnlyHourlyKeynav],onChange:YA(P.kCalendarOnlyHourlyKeynav),__source:{fileName:KA,lineNumber:277,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:282,columnNumber:15}},(0,ue.Z)("Use 1 Hour Increments for Keyboard Navigation"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:287,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:289,columnNumber:11}},(0,ue.Z)("Click Outside Event Should")),s.createElement(_i,{name:"click-outside",value:this.props.prefValues[P.kCalendarClickOutside],onChange:YA(P.kCalendarClickOutside),className:"group",__source:{fileName:KA,lineNumber:290,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:296,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:297,columnNumber:15}},s.createElement("input",{type:"radio",value:"cancel",__source:{fileName:KA,lineNumber:298,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:300,columnNumber:17}},(0,ue.Z)("Discard Changes")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:303,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:304,columnNumber:15}},s.createElement("input",{type:"radio",value:"save_and_close",__source:{fileName:KA,lineNumber:305,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:307,columnNumber:17}},(0,ue.Z)("Save Changes")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:310,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:311,columnNumber:15}},s.createElement("input",{type:"radio",value:"save_and_new",__source:{fileName:KA,lineNumber:312,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:314,columnNumber:17}},(0,ue.Z)("Save Changes and Create new Event"))))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Calendar Editing"),filter:this.props.filter,__source:{fileName:KA,lineNumber:321,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:325,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:327,columnNumber:11}},(0,ue.Z)("Edit Mode")),s.createElement(_i,{name:"edit-mode",value:this.props.prefValues[P.kCalendarEditMode],onChange:YA(P.kCalendarEditMode),className:"group",__source:{fileName:KA,lineNumber:328,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:334,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:335,columnNumber:15}},s.createElement("input",{type:"radio",value:"inline",__source:{fileName:KA,lineNumber:336,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:338,columnNumber:17}},(0,ue.Z)("Inline")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:341,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:342,columnNumber:15}},s.createElement("input",{type:"radio",value:"popup",__source:{fileName:KA,lineNumber:343,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:345,columnNumber:17}},(0,ue.Z)("radio","Dialog")))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:350,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:352,columnNumber:11}},(0,ue.Z)("Default Event Duration")),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:353,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:354,columnNumber:13}},s.createElement("select",{value:this.props.prefValues[P.kCalendarDefaultDuration],onChange:YA(P.kCalendarDefaultDuration),__source:{fileName:KA,lineNumber:355,columnNumber:15}},XA.map((([e,t])=>s.createElement("option",{key:e,value:e,__source:{fileName:KA,lineNumber:360,columnNumber:19}},t))))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:371,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:373,columnNumber:11}},(0,ue.Z)("Auto Adjust End Time")),s.createElement("p",{className:"info",__source:{fileName:KA,lineNumber:374,columnNumber:11}},(0,ue.Z)("Automatically update end time when editing to keep same event duration.")),s.createElement(_i,{name:"auto-adjust-end",value:this.props.prefValues[P.kCalendarAutoAdjustEnd],onChange:YA(P.kCalendarAutoAdjustEnd),className:"group",__source:{fileName:KA,lineNumber:377,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:383,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:384,columnNumber:15}},s.createElement("input",{type:"radio",value:"always",__source:{fileName:KA,lineNumber:385,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:386,columnNumber:17}},(0,ue.Z)("Always")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:389,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:390,columnNumber:15}},s.createElement("input",{type:"radio",value:"never",__source:{fileName:KA,lineNumber:391,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:392,columnNumber:17}},(0,ue.Z)("other","Never")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:395,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:396,columnNumber:15}},s.createElement("input",{type:"radio",value:"timed_only",__source:{fileName:KA,lineNumber:397,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:399,columnNumber:17}},(0,ue.Z)("Except for All Day Events")))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:404,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:406,columnNumber:11}},(0,ue.Z)("Auto Focus Next Date/Time")),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:407,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:408,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarAutoTabDatetime],onChange:YA(P.kCalendarAutoTabDatetime),__source:{fileName:KA,lineNumber:409,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:412,columnNumber:15}},(0,ue.Z)("Automatically move focus to next field after typing complete date or time value")))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Calendar Notifications"),filter:this.props.filter,__source:{fileName:KA,lineNumber:418,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:422,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:423,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:424,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarHiddenHidesNotifications],onChange:YA(P.kCalendarHiddenHidesNotifications),__source:{fileName:KA,lineNumber:425,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:429,columnNumber:15}},(0,ue.Z)("Disable for Hidden Calendars"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:434,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:435,columnNumber:11}},(0,ue.Z)("Notification type")),s.createElement(_i,{name:"calendarnotificationgroup",value:this.props.prefValues[P.kCalendarNotificationType]||"",onChange:YA(P.kCalendarNotificationType),__source:{fileName:KA,lineNumber:436,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:441,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:442,columnNumber:15}},s.createElement("input",{type:"radio",value:"system",__source:{fileName:KA,lineNumber:443,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:444,columnNumber:17}},(0,ue.Z)("System Notification")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:447,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:448,columnNumber:15}},s.createElement("input",{type:"radio",value:"dialog",__source:{fileName:KA,lineNumber:449,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:451,columnNumber:17}},(0,ue.Z)("calendar","Dialog")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:454,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:455,columnNumber:15}},s.createElement("input",{type:"radio",value:"melt",__source:{fileName:KA,lineNumber:456,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:458,columnNumber:17}},(0,ue.Z)("Melt Browser")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:461,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:462,columnNumber:15}},s.createElement("input",{type:"radio",value:"burn",__source:{fileName:KA,lineNumber:463,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:465,columnNumber:17}},(0,ue.Z)("Burn Browser")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:468,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:469,columnNumber:15}},s.createElement("input",{type:"radio",value:"none",__source:{fileName:KA,lineNumber:470,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:472,columnNumber:17}},(0,ue.Z)("calendar","None")))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:478,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:479,columnNumber:11}},(0,ue.Z)("Notification Sound")),s.createElement(_i,{name:"calendarnotificationsoundgroup",value:this.props.prefValues[P.kCalendarNotificationSound]||"",onChange:YA(P.kCalendarNotificationSound),__source:{fileName:KA,lineNumber:480,columnNumber:11}},$A.map((([e,t])=>s.createElement("div",{className:"setting-single",key:e,__source:{fileName:KA,lineNumber:486,columnNumber:15}},s.createElement("label",{__source:{fileName:KA,lineNumber:487,columnNumber:17}},s.createElement("input",{type:"radio",value:e,__source:{fileName:KA,lineNumber:488,columnNumber:19}}),s.createElement("span",{__source:{fileName:KA,lineNumber:489,columnNumber:19}},t))))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:496,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:497,columnNumber:11}},(0,ue.Z)("Default Event Notification")),s.createElement("select",{value:this.props.prefValues[P.kCalendarDefaultNotification],onChange:YA(P.kCalendarDefaultNotification),__source:{fileName:KA,lineNumber:498,columnNumber:11}},HA.map((([e,t])=>s.createElement("option",{key:e,value:e,__source:{fileName:KA,lineNumber:503,columnNumber:15}},t)))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Calendar Integration"),filter:this.props.filter,__source:{fileName:KA,lineNumber:514,columnNumber:7}},this.renderMailAccountSelection(),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:520,columnNumber:9}},s.createElement("h3",{__source:{fileName:KA,lineNumber:521,columnNumber:11}},(0,ue.Z)("Send Invite Email Messages")),s.createElement(_i,{name:"calendarinviteemailsgroup",value:this.props.prefValues[P.kCalendarSendInviteEmailAction]||"",onChange:YA(P.kCalendarSendInviteEmailAction),__source:{fileName:KA,lineNumber:522,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:527,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:528,columnNumber:15}},s.createElement("input",{type:"radio",value:"ask",__source:{fileName:KA,lineNumber:529,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:530,columnNumber:17}},(0,ue.Z)("Ask Each Time")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:533,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:534,columnNumber:15}},s.createElement("input",{type:"radio",value:"send",__source:{fileName:KA,lineNumber:535,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:536,columnNumber:17}},(0,ue.Z)("Always Send Messages")))),s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:539,columnNumber:13}},s.createElement("label",{__source:{fileName:KA,lineNumber:540,columnNumber:15}},s.createElement("input",{type:"radio",value:"cancel",__source:{fileName:KA,lineNumber:541,columnNumber:17}}),s.createElement("span",{__source:{fileName:KA,lineNumber:542,columnNumber:17}},(0,ue.Z)("Never Send Messages")))))),s.createElement("div",{className:"setting-group",__source:{fileName:KA,lineNumber:548,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KA,lineNumber:549,columnNumber:11}},s.createElement("label",{__source:{fileName:KA,lineNumber:550,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarHandleIcsDownloads],onChange:YA(P.kCalendarHandleIcsDownloads),__source:{fileName:KA,lineNumber:551,columnNumber:15}}),s.createElement("span",{__source:{fileName:KA,lineNumber:555,columnNumber:15}},(0,ue.Z)("Open ICS files in Vivaldi")))))))}}const tZ=(0,bi.Z)(eZ,jA);var nZ=n(85619),sZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Capture.jsx";function iZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rZ=[P.kWebpagesCaptureDirectory,P.kWebpagesCaptureSaveFilePattern],aZ=st.Z.getEventHandler,oZ=new Date,lZ="139cea89-3ed1-4ccd-bd3c-7a6a36f824d5",cZ=[{tag:"$timestamp",title:(0,ue.Z)("Long date"),format:"YYYY-MM-DD HH.mm.ss"},{tag:"$year",title:(0,ue.Z)("Year"),format:"YYYY"},{tag:"$month",title:(0,ue.Z)("Month"),format:"MM"},{tag:"$day",title:(0,ue.Z)("Day"),format:"DD"},{tag:"$hour",title:(0,ue.Z)("Hour"),format:"HH"},{tag:"$minute",title:(0,ue.Z)("Minute"),format:"mm"},{tag:"$second",title:(0,ue.Z)("time","Second"),format:"ss"},{tag:"$ms",title:(0,ue.Z)("Millisecond"),format:"SSS"},{tag:"$longid",title:(0,ue.Z)("Unique ID"),value:lZ},{tag:"$shortid",title:(0,ue.Z)("Short unique ID"),value:lZ.substring(24)},{tag:"$host",title:(0,ue.Z)("Active tab host name"),value:"example.com"},{tag:"$title",title:(0,ue.Z)("Active tab title"),value:(0,ue.Z)("Example Page Title")}];class uZ extends s.Component{constructor(...e){super(...e),iZ(this,"handleDragEnter",(e=>{const{dataTransfer:t,target:n}=e;n&&t.types.includes("text/plain")&&(n.setSelectionRange(n.value.length,n.value.length),n.focus())})),iZ(this,"setDragData",(e=>{const{dataTransfer:t,target:n}=e;t.setData("text/plain",n.innerText),t.dropEffect="none",t.effectAllowed="copyMove",t.setDragImage(n,0,0)})),iZ(this,"handleDoubleClick",(e=>{const{HTMLInputElement:t}=this.context,{target:n}=e;let s=n.innerText;if(this._inputRef instanceof t){const e=this._inputRef.selectionStart,t=this._inputRef.value||"";s=" "+s+" ";let n=e>0?t.substr(0,e)+s+t.substr(e):t+s;n=n.replace(/ {2}/g," ").trim(),st.Z.set(P.kWebpagesCaptureSaveFilePattern,n),this._inputRef&&this._inputRef.focus()}})),iZ(this,"resetSetting",(()=>{st.Z.reset(P.kWebpagesCaptureSaveFilePattern)})),iZ(this,"parseFileName",(()=>{let e=this.props.prefValues[P.kWebpagesCaptureSaveFilePattern];return cZ.forEach((t=>{const n=new RegExp((0,nZ.Z)(t.tag),"gi"),s=t.format?g()(oZ).format(t.format):t.value;e=e.replace(n,s)})),(e||lZ)+".png"})),iZ(this,"selectCaptureFolder",(()=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Capture Folder"),type:"folder"}).then((e=>{e&&st.Z.set(P.kWebpagesCaptureDirectory,e)}))})),iZ(this,"renderTags",(()=>cZ.map(((e,t)=>s.createElement("span",{draggable:"true",key:t,onDoubleClick:this.handleDoubleClick,onDragStart:this.setDragData,title:e.title+(e.format?" ("+e.format+")":""),__source:{fileName:sZ,lineNumber:125,columnNumber:11}},e.tag)))))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Image Capture"),filter:this.props.filter,__source:{fileName:sZ,lineNumber:139,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:sZ,lineNumber:142,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:sZ,lineNumber:143,columnNumber:11}},s.createElement("h3",{__source:{fileName:sZ,lineNumber:144,columnNumber:13}},(0,ue.Z)("Capture Storage Folder")),s.createElement("div",{className:"setting-single folder-selection",__source:{fileName:sZ,lineNumber:145,columnNumber:13}},s.createElement("input",{type:"text",value:this.props.prefValues[P.kWebpagesCaptureDirectory],title:(0,ue.Z)("Enter capture storage folder"),spellCheck:"false",onChange:aZ(P.kWebpagesCaptureDirectory),__source:{fileName:sZ,lineNumber:146,columnNumber:15}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Select Folder..."),onClick:this.selectCaptureFolder,__source:{fileName:sZ,lineNumber:151,columnNumber:17}})))),s.createElement("div",{className:"setting-group",__source:{fileName:sZ,lineNumber:157,columnNumber:9}},s.createElement("div",{className:"setting-single capture-name-template",__source:{fileName:sZ,lineNumber:158,columnNumber:11}},s.createElement("h3",{__source:{fileName:sZ,lineNumber:159,columnNumber:13}},(0,ue.Z)("Capture File Name Template")),s.createElement("input",{type:"text",ref:e=>this._inputRef=e,onDragEnter:this.handleDragEnter,value:this.props.prefValues[P.kWebpagesCaptureSaveFilePattern],title:(0,ue.Z)("Modify file name template"),spellCheck:"false",onChange:aZ(P.kWebpagesCaptureSaveFilePattern),__source:{fileName:sZ,lineNumber:160,columnNumber:13}}),s.createElement("p",{className:"info",__source:{fileName:sZ,lineNumber:167,columnNumber:13}},this.parseFileName()),s.createElement("p",{className:"info",__source:{fileName:sZ,lineNumber:170,columnNumber:13}},this.renderTags()),s.createElement("input",{type:"button",value:(0,ue.Z)("Restore Default"),onClick:this.resetSetting,__source:{fileName:sZ,lineNumber:173,columnNumber:13}}))))}}iZ(uZ,"contextType",Vs.Z);const mZ=(0,bi.Z)(uZ,rZ);var dZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\chat\\ChatSettings.jsx";function hZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pZ=[P.kChatDebugOutput,P.kChatNotifications,P.kChatNotificationsSoundOn,P.kChatProcessHintNoStore,P.kChatTabMode,P.kChatTypingIndication],gZ=st.Z.getEventHandler;class bZ extends s.Component{constructor(...e){super(...e),hZ(this,"state",{isLoggedIn:!1}),hZ(this,"chatStoreListener",(()=>{const e=Yw.getState();this.setState({isLoggedIn:e.isLoggedIn})})),hZ(this,"connect",(()=>{zw.getClient().connect()})),hZ(this,"disconnect",(()=>{zw.getClient().disconnect()})),hZ(this,"signOut",(()=>{zw.signOut()}))}componentDidMount(){this._chatStoreToken=Yw.addListener(this.chatStoreListener),this.chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{isLoggedIn:e}=this.state,{filter:t,prefValues:n}=this.props;return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Chat"),filter:t,__source:{fileName:dZ,lineNumber:82,columnNumber:7}},e&&s.createElement(s.Fragment,null,s.createElement("div",{className:"setting-group unlimited",__source:{fileName:dZ,lineNumber:87,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:88,columnNumber:13}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:89,columnNumber:15}},"Account"),s.createElement("p",{__source:{fileName:dZ,lineNumber:90,columnNumber:15}},Rw(zw.getClient().jid)),s.createElement("label",{__source:{fileName:dZ,lineNumber:91,columnNumber:15}},s.createElement("input",{type:"button",className:"danger",onClick:this.signOut,value:(0,ue.Z)("Logout"),__source:{fileName:dZ,lineNumber:92,columnNumber:17}})))),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:dZ,lineNumber:101,columnNumber:11}},s.createElement("div",{className:"setting-group",__source:{fileName:dZ,lineNumber:102,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:103,columnNumber:15}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:104,columnNumber:17}},"Debug"),s.createElement("input",{type:"button",onClick:this.disconnect,value:(0,ue.Z)("Disconnect"),__source:{fileName:dZ,lineNumber:105,columnNumber:17}}),s.createElement("input",{type:"button",onClick:this.connect,value:(0,ue.Z)("Connect"),__source:{fileName:dZ,lineNumber:110,columnNumber:17}}))),s.createElement("div",{className:"setting-group",__source:{fileName:dZ,lineNumber:117,columnNumber:13}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:118,columnNumber:15}},(0,ue.Z)("Debug Console Output")),s.createElement(_i,{name:"menuStyle",value:this.props.prefValues[P.kChatDebugOutput],onChange:gZ(P.kChatDebugOutput),className:"setting-single",__source:{fileName:dZ,lineNumber:119,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:124,columnNumber:17}},s.createElement("label",{__source:{fileName:dZ,lineNumber:125,columnNumber:19}},s.createElement("input",{type:"radio",value:"off",__source:{fileName:dZ,lineNumber:126,columnNumber:21}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:127,columnNumber:21}},(0,ue.Z)("Off")))),s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:130,columnNumber:17}},s.createElement("label",{__source:{fileName:dZ,lineNumber:131,columnNumber:19}},s.createElement("input",{type:"radio",value:"simple",__source:{fileName:dZ,lineNumber:132,columnNumber:21}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:133,columnNumber:21}},(0,ue.Z)("Simple")))),s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:136,columnNumber:17}},s.createElement("label",{__source:{fileName:dZ,lineNumber:137,columnNumber:19}},s.createElement("input",{type:"radio",value:"verbose",__source:{fileName:dZ,lineNumber:138,columnNumber:21}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:139,columnNumber:21}},(0,ue.Z)("Verbose")))))))),s.createElement("div",{className:"setting-group",__source:{fileName:dZ,lineNumber:147,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:148,columnNumber:11}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:149,columnNumber:13}},(0,ue.Z)("Notifications")),s.createElement("label",{__source:{fileName:dZ,lineNumber:150,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:n[P.kChatNotifications],onChange:gZ(P.kChatNotifications),__source:{fileName:dZ,lineNumber:151,columnNumber:15}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:156,columnNumber:17}},(0,ue.Z)("Notifications Enabled")))),s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:159,columnNumber:11}},s.createElement("label",{__source:{fileName:dZ,lineNumber:160,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:n[P.kChatNotificationsSoundOn],onChange:gZ(P.kChatNotificationsSoundOn),__source:{fileName:dZ,lineNumber:161,columnNumber:15}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:166,columnNumber:15}},(0,ue.Z)("Play Sound"))))),s.createElement("div",{className:"setting-group",__source:{fileName:dZ,lineNumber:170,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:171,columnNumber:11}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:172,columnNumber:13}},(0,ue.Z)("Typing Indication")),s.createElement("label",{__source:{fileName:dZ,lineNumber:173,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:n[P.kChatTypingIndication],onChange:gZ(P.kChatTypingIndication),__source:{fileName:dZ,lineNumber:174,columnNumber:15}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:179,columnNumber:15}},(0,ue.Z)("Send My Typing Status"))),s.createElement("p",{className:"info",__source:{fileName:dZ,lineNumber:181,columnNumber:13}},(0,ue.Z)("Let other people see you’re typing a message")))),s.createElement("div",{className:"setting-group",__source:{fileName:dZ,lineNumber:186,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:187,columnNumber:11}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:188,columnNumber:13}},(0,ue.Z)("Store Messages")),s.createElement("label",{__source:{fileName:dZ,lineNumber:189,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:n[P.kChatProcessHintNoStore],onChange:gZ(P.kChatProcessHintNoStore),__source:{fileName:dZ,lineNumber:190,columnNumber:15}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:195,columnNumber:15}},(0,ue.Z)("Avoid Storing Messages"))),s.createElement("p",{className:"info",__source:{fileName:dZ,lineNumber:197,columnNumber:13}},(0,ue.Z)("Tell the server to not store messages you send")))),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:dZ,lineNumber:202,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:dZ,lineNumber:203,columnNumber:11}},s.createElement("h3",{__source:{fileName:dZ,lineNumber:204,columnNumber:13}},(0,ue.Z)("Presentation")),s.createElement("p",{className:"info",__source:{fileName:dZ,lineNumber:205,columnNumber:13}},(0,ue.Z)("Always open conversations in tabs")),s.createElement("label",{__source:{fileName:dZ,lineNumber:208,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:n[P.kChatTabMode],onChange:gZ(P.kChatTabMode),__source:{fileName:dZ,lineNumber:209,columnNumber:15}}),s.createElement("span",{__source:{fileName:dZ,lineNumber:214,columnNumber:15}},(0,ue.Z)("Tab Mode"))))))}}(0,bi.Z)(bZ,pZ);var NZ=n(3120);const fZ="https://downloads.vivaldi.com/",_Z={[fZ+"ddg/tds-v2-current.json"]:"DuckDuckGo Tracker Radar",[fZ+"easylist/easyprivacy-current.txt"]:"EasyPrivacy",[fZ+"easylist/easylist-current.txt"]:"EasyList",[fZ+"lists/abp/abp-filters-anti-cv-current.txt"]:"ABP anti-circumvention list",[fZ+"lists/vivaldi/partners-current.txt"]:(0,ue.Z)("Allow ads from our partners (support Vivaldi)"),"https://www.i-dont-care-about-cookies.eu/abp/":(0,ue.Z)("Remove cookie warnings ($1)",["I don’t care about cookies"]),"https://secure.fanboy.co.nz/fanboy-cookiemonster.txt":(0,ue.Z)("Remove cookie warnings ($1)",["Easylist Cookie List"]),"https://easylist-downloads.adblockplus.org/Liste_AR.txt":(0,ue.Z)("Arabic ($1)",["Liste AR"]),"http://stanev.org/abp/adblock_bg.txt":(0,ue.Z)("Bulgarian ($1)",["Bulgarian List"]),"https://easylist-downloads.adblockplus.org/easylistchina.txt":(0,ue.Z)("Chinese ($1)",["EasyList China"]),"https://raw.githubusercontent.com/cjx82630/cjxlist/master/cjx-annoyance.txt":(0,ue.Z)("Chinese ($1)",["CJX’s Annoyance List"]),"https://raw.githubusercontent.com/yecarrillo/adblock-colombia/master/adblock_co.txt":(0,ue.Z)("Colombian ($1)",["Colombian List by Yecarrillo"]),"https://raw.githubusercontent.com/tomasko126/easylistczechandslovak/master/filters.txt":(0,ue.Z)("Czech and Slovak ($1)",["Czech and Slovak filter list"]),"https://easylist-downloads.adblockplus.org/easylistdutch.txt":(0,ue.Z)("Dutch ($1)",["EasyList Dutch"]),"https://pgl.yoyo.org/adservers/serverlist.php?hostformat=adblockplus&mimetype=plaintext":(0,ue.Z)("English ($1)",["Peter Lowe’s List"]),"https://adblock.ee/list.php":(0,ue.Z)("Estonian ($1)",["Eesti saitidele kohandatud filter"]),"https://gurud.ee/ab.txt":(0,ue.Z)("Estonian ($1)",["Filters by Gurud.ee"]),"https://cdn.rawgit.com/SlashArash/adblockfa/master/adblockfa.txt":(0,ue.Z)("Farsi ($1)",["AdBlock Farsi"]),"https://raw.githubusercontent.com/finnish-easylist-addition/finnish-easylist-addition/master/Finland_adb.txt":(0,ue.Z)("Finnish ($1)",["EasyList Finland"]),"https://easylist-downloads.adblockplus.org/liste_fr.txt":(0,ue.Z)("French ($1)",["Liste FR"]),"https://easylist.to/easylistgermany/easylistgermany.txt":(0,ue.Z)("German ($1)",["EasyList Germany"]),"https://www.void.gr/kargig/void-gr-filters.txt":(0,ue.Z)("Greek ($1)",["void.gr"]),"https://raw.githubusercontent.com/easylist/EasyListHebrew/master/EasyListHebrew.txt":(0,ue.Z)("Hebrew ($1)",["EasyList Hebrew"]),"https://raw.githubusercontent.com/hufilter/hufilter/master/hufilter.txt":(0,ue.Z)("Hungarian ($1)",["hufilter"]),"https://adblock.gardar.net/is.abp.txt":(0,ue.Z)("Icelandic ($1)",["Icelandic ABP List"]),"https://easylist-downloads.adblockplus.org/indianlist.txt":(0,ue.Z)("Indian ($1)",["Indian List"]),"https://raw.githubusercontent.com/heradhis/indonesianadblockrules/master/subscriptions/abpindo.txt":(0,ue.Z)("Indonesian ($1)",["ABPindo"]),"https://raw.githubusercontent.com/gioxx/xfiles/master/filtri.txt":(0,ue.Z)("Italian ($1)",["X Files"]),"https://easylist-downloads.adblockplus.org/easylistitaly.txt":(0,ue.Z)("Italian ($1)",["EasyList Italy"]),"https://raw.githubusercontent.com/k2jp/abp-japanese-filters/master/abpjf.txt":(0,ue.Z)("Japanese ($1)",["ABP Japanese filters"]),"https://raw.githubusercontent.com/eEIi0A5L/adblock_filter/master/mochi_filter.txt":(0,ue.Z)("Japanese ($1)",["もちフィルタ（広告ブロック）"]),"https://raw.githubusercontent.com/eEIi0A5L/adblock_filter/master/tamago_filter.txt":(0,ue.Z)("Japanese ($1)",["たまごフィルタ（mobile filter）"]),"https://easylist-downloads.adblockplus.org/koreanlist.txt":(0,ue.Z)("Korean ($1)",["Korean List"]),"https://raw.githubusercontent.com/yous/YousList/master/youslist.txt":(0,ue.Z)("Korean ($1)",["YousList"]),"https://notabug.org/latvian-list/adblock-latvian/raw/master/lists/latvian-list.txt":(0,ue.Z)("Latvian ($1)",["Latvian List"]),"https://raw.githubusercontent.com/EasyList-Lithuania/easylist_lithuania/master/easylistlithuania.txt":(0,ue.Z)("Lithuanian ($1)",["EasyList Lithuania"]),"https://raw.githubusercontent.com/DandelionSprout/adfilt/master/NorwegianExperimentalList%20alternate%20versions/NordicFiltersABP.txt":(0,ue.Z)("Nordic ($1)",["Dandelion Sprout’s Nordic Filters"]),"https://easylist-downloads.adblockplus.org/easylistpolish.txt":(0,ue.Z)("Polish ($1)",["EasyList Polish"]),"https://easylist-downloads.adblockplus.org/easylistportuguese.txt":(0,ue.Z)("Portuguese ($1)",["EasyList Portuguese"]),"https://www.zoso.ro/pages/rolist.txt":(0,ue.Z)("Romanian ($1)",["ROLIST"]),"https://easylist-downloads.adblockplus.org/advblock.txt":(0,ue.Z)("Russian ($1)",["RU AdList"]),"https://easylist-downloads.adblockplus.org/easylistspanish.txt":(0,ue.Z)("Spanish ($1)",["EasyList Spanish"]),"https://secure.fanboy.co.nz/fanboy-turkish.txt":(0,ue.Z)("Turkish ($1)",["Fanboy’s Turkish"]),"https://raw.githubusercontent.com/abpvn/abpvn/master/filter/abpvn.txt":(0,ue.Z)("Vietnamese ($1)",["ABPVN List"])};function vZ(e){return _Z[e]||e}var EZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerSources.jsx";function CZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wZ={success:(0,ue.Z)("Fetched successfully"),download_failed:(0,ue.Z)("Failed to download"),file_not_found:(0,ue.Z)("File cannot be located"),file_read_error:(0,ue.Z)("File cannot be read"),file_unsupported:(0,ue.Z)("Invalid format"),failed_saving_parsed_rules:(0,ue.Z)("Cannot save to the profile"),unknown:(0,ue.Z)("Fetch not completed")};class yZ extends s.PureComponent{constructor(...e){super(...e),CZ(this,"fileInput",s.createRef()),CZ(this,"state",{blockerSources:[],sortedList:[],cachedSource:void 0,newSource:"",showEditor:0,importError:""}),CZ(this,"updateSources",(()=>{b.Z.contentBlocking.getRuleSources(this.props.ruleGroup,(e=>{this.setState({blockerSources:e,sortedList:this.remapSources(e)})})),this.state.cachedSource&&b.Z.contentBlocking.getRuleSource(this.props.ruleGroup,this.state.cachedSource.id,(e=>{"success"===e.last_fetch_result?this.setState({cachedSource:e,showEditor:3,importError:""}):this.setState({showEditor:1,importError:wZ[e.last_fetch_result]})}))})),CZ(this,"remapSources",(e=>{if(e){return e.map(((e,t)=>{const n=e.unsafe_adblock_metadata,s=e.is_from_url?e.source_url:e.source_file,i=n.title&&vZ(s)===s?n.title:vZ(s);return{key:e.id.toString(),name:i,isDefault:e.source_url.startsWith(fZ),enabled:e.loaded,id:e.id}})).sort(((e,t)=>e.name<t.name?-1:1)).sort(((e,t)=>e.isDefault&&!t.isDefault?-1:1))}return[]})),CZ(this,"updateNewSource",(e=>{const{value:t}=e.currentTarget;this.setState({newSource:t})})),CZ(this,"onImportFromFile",(e=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select a Blocker List Text File"),type:"file",accepts:[{ext:"txt"}]}).then((e=>{e?this.importFromFile(e):this.closeDialog()}))})),CZ(this,"importFromFile",(e=>{b.Z.contentBlocking.addKnownSourceFromFile(this.props.ruleGroup,e,(e=>this.finishImport(e)))})),CZ(this,"importFromUrl",(()=>{this.state.newSource.includes(fZ)?this.setState({importError:(0,ue.Z)("Failed to add internal list")}):b.Z.contentBlocking.addKnownSourceFromURL(this.props.ruleGroup,this.state.newSource,(e=>this.finishImport(e)))})),CZ(this,"finishImport",(e=>{h.Z.runtime.lastError?(console.warn(Object.values(h.Z.runtime.lastError)),this.setState({cachedSource:void 0,importError:(0,ue.Z)("Failed to add list")})):b.Z.contentBlocking.getRuleSource(this.props.ruleGroup,e,(e=>{this.setState({cachedSource:e,showEditor:2,importError:""})}))})),CZ(this,"onToggleStatus",(e=>{this.state.sortedList[e]&&this.toggleStatus(this.state.sortedList[e].id)})),CZ(this,"toggleStatus",(e=>{const t=this.state.blockerSources.find((t=>t.id===e));t&&(t.loaded?b.Z.contentBlocking.disableSource(this.props.ruleGroup,e):b.Z.contentBlocking.enableSource(this.props.ruleGroup,e))})),CZ(this,"copySource",(e=>{const t=this.state.blockerSources.find((t=>e===t.id));if(t){const e=t.is_from_url?t.source_url:t.source_file;al.Z.set(e)}})),CZ(this,"onRemoveSource",(e=>{this.state.sortedList[e]&&this.removeSource(this.state.sortedList[e].id)})),CZ(this,"removeSource",(e=>{b.Z.contentBlocking.deleteKnownSource(this.props.ruleGroup,e)})),CZ(this,"restoreSources",(()=>{b.Z.contentBlocking.resetPresetSources(this.props.ruleGroup),this.updateSources()})),CZ(this,"onContextMenu",((e,t)=>{const n=this.state.sortedList[e];if(!n)return;const s=[{handler:this.copySource.bind(null,n.id),...(0,Mn.Z)("Copy List Origin")},{handler:this.toggleStatus.bind(null,n.id),visible:!n.enabled,...(0,Mn.Z)("Enable List")},{handler:this.toggleStatus.bind(null,n.id),visible:n.enabled,...(0,Mn.Z)("Disable List")},{...z.Z.separatorItem,visible:!n.isDefault||"ad_blocking"===this.props.ruleGroup},{handler:this.removeSource.bind(null,n.id),visible:!n.isDefault,...(0,Mn.Z)("Remove List")},{handler:this.restoreSources,visible:"ad_blocking"===this.props.ruleGroup,...(0,Mn.Z)("Restore Built-In Lists")}];(0,Hs.Z)(this.context.vivaldiWindowId,s)(t)})),CZ(this,"showDialog",(()=>{this.setState({showEditor:1})})),CZ(this,"onCancel",(()=>{this.state.cachedSource&&this.removeSource(this.state.cachedSource.id),this.closeDialog()})),CZ(this,"closeDialog",(()=>{this.setState({cachedSource:void 0,newSource:"",importError:"",showEditor:0})})),CZ(this,"renderDialog",(()=>{const{cachedSource:e,showEditor:t}=this.state,n=e?e.unsafe_adblock_metadata:void 0;return s.createElement(ln.Z,{dialogWidth:500,onRequestClose:this.state.showEditor<2?this.onCancel:qo.default,__source:{fileName:EZ,lineNumber:299,columnNumber:12}},s.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:EZ,lineNumber:302,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:EZ,lineNumber:303,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:EZ,lineNumber:304,columnNumber:11}},(0,ue.Z)("Import New Blocker List"))),1===t&&s.createElement("div",{className:"dialog-content",__source:{fileName:EZ,lineNumber:310,columnNumber:11}},s.createElement("p",{className:"info",__source:{fileName:EZ,lineNumber:311,columnNumber:13}},(0,ue.Z)("Enter URL to import blocker rules")),s.createElement("div",{className:"dialog-row",__source:{fileName:EZ,lineNumber:314,columnNumber:13}},s.createElement("input",{type:"text",value:this.state.newSource,onChange:this.updateNewSource,autoFocus:!0,__source:{fileName:EZ,lineNumber:315,columnNumber:15}}),s.createElement("label",{__source:{fileName:EZ,lineNumber:321,columnNumber:15}},s.createElement("button",{type:"button",title:(0,ue.Z)("Import from a file..."),dangerouslySetInnerHTML:{__html:cn._TQ.medium},onClick:this.onImportFromFile,__source:{fileName:EZ,lineNumber:322,columnNumber:17}})))),e&&2===t&&s.createElement("div",{className:"dialog-content",__source:{fileName:EZ,lineNumber:334,columnNumber:11}},s.createElement("h3",{__source:{fileName:EZ,lineNumber:335,columnNumber:13}},(0,ue.Z)("Loading..."))),e&&3===t&&s.createElement("div",{className:"dialog-content",__source:{fileName:EZ,lineNumber:340,columnNumber:11}},s.createElement("h3",{__source:{fileName:EZ,lineNumber:341,columnNumber:13}},n?n.title:e.source_url),n&&s.createElement("p",{className:"info",__source:{fileName:EZ,lineNumber:343,columnNumber:15}},e.source_url),s.createElement("p",{__source:{fileName:EZ,lineNumber:345,columnNumber:13}},(0,ue.Z)("Valid rules: $1",[e.rules_info.valid_rules]),s.createElement("br",{__source:{fileName:EZ,lineNumber:346,columnNumber:76}}),(0,ue.Z)("Invalid rules: $1",[e.rules_info.invalid_rules]),s.createElement("br",{__source:{fileName:EZ,lineNumber:347,columnNumber:80}}),(0,ue.Z)("Unsupported rules: $1",[e.rules_info.unsupported_rules]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:EZ,lineNumber:353,columnNumber:9}},this.state.importError&&s.createElement("p",{className:"info",__source:{fileName:EZ,lineNumber:355,columnNumber:13}},this.state.importError),(1===t||2===t)&&s.createElement("input",{type:"submit",className:"primary",onClick:this.importFromUrl,value:(0,ue.Z)("Import..."),__source:{fileName:EZ,lineNumber:358,columnNumber:13}}),3===t&&s.createElement("input",{type:"submit",className:"primary",onClick:this.closeDialog,value:(0,ue.Z)("blocker","Done"),autoFocus:!0,__source:{fileName:EZ,lineNumber:366,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:EZ,lineNumber:374,columnNumber:11}}))))})),CZ(this,"renderItem",((e,t)=>{const n=this.state.blockerSources.find((e=>t.id===e.id));return n?s.createElement("div",{className:"ContentBlocker-SourceItem",__source:{fileName:EZ,lineNumber:388,columnNumber:12}},s.createElement("input",{type:"checkbox",onMouseDown:e=>e.stopPropagation(),checked:t.enabled,onChange:this.toggleStatus.bind(null,n.id),__source:{fileName:EZ,lineNumber:389,columnNumber:7}}),s.createElement("span",{className:"title",__source:{fileName:EZ,lineNumber:395,columnNumber:7}},e),s.createElement("p",{className:"info",__source:{fileName:EZ,lineNumber:398,columnNumber:7}},""!==n.rules_list_checksum?(0,ue.Z)("Updated on $1",[g()(n.last_update).format("lll")]):n.loaded?(0,ue.Z)("Not fetched"):(0,ue.Z)("Disabled"),n.is_fetching?" "+(0,ue.Z)("(Fetching...)"):"")):null}))}componentDidMount(){this.updateSources(),b.Z.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),b.Z.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),b.Z.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources)}componentWillUnmount(){b.Z.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),b.Z.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),b.Z.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources)}render(){const{sortedList:e}=this.state,t=Math.min(44*e.length+22,200);return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:EZ,lineNumber:413,columnNumber:7}},0!==this.state.showEditor&&this.renderDialog(),s.createElement("h3",{__source:{fileName:EZ,lineNumber:415,columnNumber:9}},this.props.title),s.createElement("div",{className:"ContentBlocker-Sources master-detail sortable-list",style:{minHeight:t},__source:{fileName:EZ,lineNumber:416,columnNumber:9}},s.createElement(NZ.Z,{items:e,renderListItem:this.renderItem,filter:this.props.filter,onActivate:this.onToggleStatus,onContextMenu:this.onContextMenu,onCreateItem:this.showDialog,onRemove:this.onRemoveSource,addTipString:(0,ue.Z)("Add List"),deleteTipString:(0,ue.Z)("Remove List"),supportDragAndDrop:!1,__source:{fileName:EZ,lineNumber:419,columnNumber:11}})))}}CZ(yZ,"contextType",Vs.Z);const SZ=yZ;var TZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerRules.jsx";function kZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const IZ=["tracking","ad_blocking"];class AZ extends s.PureComponent{constructor(...e){super(...e),kZ(this,"_refSelect",s.createRef()),kZ(this,"state",{exceptionRules:void 0,exceptionList:[],trackerBlockingEnabled:!1,adBlockingEnabled:!1,blockerSources:[],newException:{name:"",level:"2"},addExceptionDialog:!1,showSources:!1,incorrectFormat:!1}),kZ(this,"getRules",(()=>IZ.forEach((e=>(0,_b.pg)(e,(e=>{this.setState(e,(()=>this.updateExceptions()))})))))),kZ(this,"updateExceptions",(()=>b.Z.contentBlocking.getAllExceptionLists((e=>{const t=Object.values(e).reduce(((e,t)=>e=e.concat(t.exempt_list).concat(t.process_list)),[]),n=this.remapExceptions((0,Ay.Z)(t).sort());this.setState({exceptionRules:e,exceptionList:n})})))),kZ(this,"setDefaultBlocking",(e=>{const{value:t}=e.target;switch(t){case"0":b.Z.contentBlocking.setActiveExceptionsList("tracking","process_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"1":b.Z.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"2":b.Z.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list")}this.getRules()})),kZ(this,"deleteException",(e=>{if("number"==typeof e&&this.state.exceptionList){const t=this.state.exceptionList[e].key;["tracking","ad_blocking"].forEach((e=>["process_list","exempt_list"].forEach((n=>b.Z.contentBlocking.removeExceptionForDomain(e,n,t))))),this.updateExceptions()}})),kZ(this,"deleteAllExceptions",(()=>{["tracking","ad_blocking"].forEach((e=>["process_list","exempt_list"].forEach((t=>b.Z.contentBlocking.removeAllExceptions(e,t))))),this.updateExceptions()})),kZ(this,"remapExceptions",(e=>e?e.map((e=>({key:e,name:e}))):[])),kZ(this,"onContextMenu",((e,t)=>{const n=[{handler:this.deleteException.bind(null,e),...(0,Mn.Z)("Remove Site")},{handler:this.deleteAllExceptions,...(0,Mn.Z)("Remove All Sites from List")}];(0,Hs.Z)(this.context.vivaldiWindowId,n)(t)})),kZ(this,"updateNewException",(e=>{const t=e.currentTarget;"name"===t.name?this.setState((e=>({newException:{...e.newException,name:t.value}}))):this.setState((e=>({newException:{...e.newException,level:t.value}})))})),kZ(this,"onAddNewException",(()=>this.setState({addExceptionDialog:!0}))),kZ(this,"onClose",(()=>this.setState((e=>({newException:{...e.newException,name:""},addExceptionDialog:!1,incorrectFormat:!1}))))),kZ(this,"toggleSources",(()=>this.setState((e=>({showSources:!e.showSources}))))),kZ(this,"saveException",(()=>{const{newException:e}=this.state,t=(0,As.Ph)((0,As.Qj)(e.name));t?((0,_b.fs)(t,e.level),this.onClose()):this.setState({incorrectFormat:!0})})),kZ(this,"getPageBlockingLevel",(e=>{const{exceptionRules:t}=this.state;if(!t)return;let n=0;return!t.tracking.process_list.includes(e)&&t.tracking.exempt_list.includes(e)||n++,!t.ad_blocking.process_list.includes(e)&&t.ad_blocking.exempt_list.includes(e)||n++,n})),kZ(this,"changePageBlocking",(e=>{const{name:t,value:n}=e.target;(0,_b.fs)(t,n,!0)})),kZ(this,"renderModal",(()=>s.createElement(ln.Z,{dialogWidth:500,onRequestClose:this.onClose,__source:{fileName:TZ,lineNumber:247,columnNumber:5}},s.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:TZ,lineNumber:248,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:TZ,lineNumber:249,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:TZ,lineNumber:250,columnNumber:11}},(0,ue.Z)("Add a New Site to Exception List"))),s.createElement("div",{className:"dialog-content",__source:{fileName:TZ,lineNumber:254,columnNumber:9}},s.createElement("input",{type:"text",name:"name",placeholder:(0,ue.Z)("e.g. example.com"),value:this.state.newException.name,onChange:this.updateNewException,autoFocus:!0,__source:{fileName:TZ,lineNumber:255,columnNumber:11}}),this.state.incorrectFormat&&s.createElement("p",{className:"info",__source:{fileName:TZ,lineNumber:264,columnNumber:13}},(0,ue.Z)("Enter a valid domain name excluding the protocol")),s.createElement("select",{value:this.state.newException.level,onChange:this.updateNewException,name:"level",__source:{fileName:TZ,lineNumber:266,columnNumber:11}},s.createElement("option",{value:"0",__source:{fileName:TZ,lineNumber:270,columnNumber:13}},(0,ue.Z)("No Blocking")),s.createElement("option",{value:"1",__source:{fileName:TZ,lineNumber:271,columnNumber:13}},(0,ue.Z)("Block Trackers")),s.createElement("option",{value:"2",__source:{fileName:TZ,lineNumber:272,columnNumber:13}},(0,ue.Z)("Block Trackers and Ads")))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:TZ,lineNumber:275,columnNumber:9}},s.createElement("input",{type:"submit",className:"primary",onClick:this.saveException,value:(0,ue.Z)("other","Add Site"),__source:{fileName:TZ,lineNumber:276,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:TZ,lineNumber:282,columnNumber:11}})))))),kZ(this,"onSelectItem",(e=>{const{HTMLSelectElement:t}=this.context,n=this._refSelect.current?.refItems.current?.children;if(!n||0===n.length)return;const s=n[e].children[1];s instanceof t&&(this.currentSelection=s)})),kZ(this,"onActivate",((e,t)=>{t.target!==this.currentSelection&&this.currentSelection?.focus()})),kZ(this,"renderItem",((e,t)=>{if(!t)return null;const n=this.getPageBlockingLevel(t.key);return s.createElement(s.Fragment,null,s.createElement("span",{__source:{fileName:TZ,lineNumber:318,columnNumber:9}},e),s.createElement("select",{value:n,name:t.name,onMouseDown:e=>e.stopPropagation(),onChange:this.changePageBlocking,tabIndex:"-1",__source:{fileName:TZ,lineNumber:319,columnNumber:9}},s.createElement("option",{value:"0",__source:{fileName:TZ,lineNumber:325,columnNumber:11}},(0,ue.Z)("No Blocking")),s.createElement("option",{value:"1",__source:{fileName:TZ,lineNumber:326,columnNumber:11}},(0,ue.Z)("Block Trackers")),s.createElement("option",{value:"2",__source:{fileName:TZ,lineNumber:327,columnNumber:11}},(0,ue.Z)("Block Trackers and Ads"))))}))}componentDidMount(){this.getRules(),this.updateExceptions(),b.Z.contentBlocking.onExceptionsChanged.addListener(this.updateExceptions),b.Z.contentBlocking.onStateChanged.addListener(this.getRules)}componentWillUnmount(){b.Z.contentBlocking.onExceptionsChanged.removeListener(this.updateExceptions),b.Z.contentBlocking.onStateChanged.removeListener(this.getRules)}render(){const e=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0);return s.createElement(Cc,{categoryTitle:(0,ue.Z)("title","Tracker and Ad Blocking"),"data-anchor":"tracker_and_ad_blocking",filter:this.props.filter,__source:{fileName:TZ,lineNumber:339,columnNumber:7}},this.state.addExceptionDialog&&this.renderModal(),s.createElement("div",{className:"ContentBlocker",__source:{fileName:TZ,lineNumber:346,columnNumber:9}},s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:TZ,lineNumber:348,columnNumber:11}},s.createElement("h3",{__source:{fileName:TZ,lineNumber:349,columnNumber:13}},(0,ue.Z)("Blocking Level")),s.createElement("p",{className:"info",__source:{fileName:TZ,lineNumber:350,columnNumber:13}},(0,ue.Z)("Select default level of protection.")),s.createElement("label",{className:bn()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":0===e}),__source:{fileName:TZ,lineNumber:354,columnNumber:13}},s.createElement("button",{value:"0",title:(0,ue.Z)("No content blocking will be applied to any site by default."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:TZ,lineNumber:359,columnNumber:15}}),s.createElement("span",{className:"keep-ea-words",__source:{fileName:TZ,lineNumber:366,columnNumber:17}},(0,ue.Z)("No Blocking"))),s.createElement("label",{className:bn()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":1===e}),__source:{fileName:TZ,lineNumber:370,columnNumber:13}},s.createElement("button",{value:"1",title:(0,ue.Z)("Online trackers collect personal information and browsing habits across multiple sites."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:TZ,lineNumber:375,columnNumber:15}}),s.createElement("span",{className:"keep-ea-words",__source:{fileName:TZ,lineNumber:383,columnNumber:17}},(0,ue.Z)("Block Trackers"))),s.createElement("label",{className:bn()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":2===e}),__source:{fileName:TZ,lineNumber:387,columnNumber:13}},s.createElement("button",{value:"2",title:(0,ue.Z)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:cn.Tu3},__source:{fileName:TZ,lineNumber:392,columnNumber:15}}),s.createElement("span",{className:"keep-ea-words",__source:{fileName:TZ,lineNumber:400,columnNumber:17}},(0,ue.Z)("Block Trackers and Ads")))),s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:TZ,lineNumber:405,columnNumber:11}},s.createElement("h3",{__source:{fileName:TZ,lineNumber:406,columnNumber:13}},(0,ue.Z)("Exceptions")),s.createElement("p",{className:"info",__source:{fileName:TZ,lineNumber:407,columnNumber:13}},(0,ue.Z)("Manage blocking level per site")),this.state.exceptionList&&s.createElement("div",{className:"ContentBlocker-Exceptions master-detail sortable-list",__source:{fileName:TZ,lineNumber:409,columnNumber:15}},s.createElement(NZ.Z,{ref:this._refSelect,items:this.state.exceptionList,renderListItem:this.renderItem,filter:this.props.filter,onContextMenu:this.onContextMenu,onCreateItem:this.onAddNewException,onRemove:this.deleteException,addTipString:(0,ue.Z)("Add Site Exception"),deleteTipString:(0,ue.Z)("Remove Site Exception"),supportDragAndDrop:!1,onSelectItem:this.onSelectItem,onActivate:this.onActivate,__source:{fileName:TZ,lineNumber:410,columnNumber:17}})),s.createElement("input",{type:"button",value:this.state.showSources?(0,ue.Z)("Hide Sources"):(0,ue.Z)("Manage Sources"),onClick:this.toggleSources,__source:{fileName:TZ,lineNumber:426,columnNumber:13}})),this.state.showSources&&s.createElement(s.Fragment,null,s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:TZ,lineNumber:437,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:TZ,lineNumber:438,columnNumber:17}},s.createElement(SZ,{filter:this.props.filter,ruleGroup:"tracking",title:(0,ue.Z)("Tracker Blocking Sources"),__source:{fileName:TZ,lineNumber:439,columnNumber:19}}))),s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:TZ,lineNumber:447,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:TZ,lineNumber:448,columnNumber:17}},s.createElement(SZ,{filter:this.props.filter,ruleGroup:"ad_blocking",title:(0,ue.Z)("Ad Blocking Sources"),__source:{fileName:TZ,lineNumber:449,columnNumber:19}}))))))}}kZ(AZ,"contextType",Vs.Z);const ZZ=AZ;var PZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieItem.jsx";function DZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class MZ extends s.Component{constructor(...e){super(...e),DZ(this,"state",{viewInfo:null,viewCookies:!1}),DZ(this,"deleteCookie",(e=>{this.state.viewInfo?(this.removeChromeEntry(this.state.viewInfo),this.setState({viewCookies:Boolean(this.props.count>1),viewInfo:null})):(this.props.items.map((e=>this.removeChromeEntry(e))),this.setState({viewCookies:!1,viewInfo:null})),e.stopPropagation()})),DZ(this,"removeChromeEntry",(e=>{const t={url:"http"+(e.secure?"s":"")+"://"+e.domain+e.path,name:e.name};h.Z.cookies.remove(t,(e=>{this.props.onCookieDelete(e)}))})),DZ(this,"showDetail",(()=>{this.setState((e=>({viewCookies:!e.viewCookies,viewInfo:!0===e.viewCookies?null:e.viewInfo})))})),DZ(this,"showInfo",(e=>{this.setState({viewInfo:e})})),DZ(this,"renderCookies",(()=>this.props.items.map(((e,t)=>s.createElement("a",{tabIndex:"0",key:"cookie-"+e.name.toLowerCase(),onFocus:this.showInfo.bind(this,e),__source:{fileName:PZ,lineNumber:82,columnNumber:7}},e.name))))),DZ(this,"renderInfo",(()=>s.createElement("dl",{__source:{fileName:PZ,lineNumber:92,columnNumber:7}},s.createElement("dt",{__source:{fileName:PZ,lineNumber:93,columnNumber:9}},(0,ue.Z)("Expires:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:94,columnNumber:9}},this.state.viewInfo&&g()(this.state.viewInfo.expirationDate).format("l LT")),s.createElement("dt",{__source:{fileName:PZ,lineNumber:98,columnNumber:9}},(0,ue.Z)("Path:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:99,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.path),s.createElement("dt",{__source:{fileName:PZ,lineNumber:100,columnNumber:9}},(0,ue.Z)("Host Only:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:101,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.hostOnly.toString()),s.createElement("dt",{__source:{fileName:PZ,lineNumber:102,columnNumber:9}},(0,ue.Z)("HTTP Only:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:103,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.httpOnly.toString()),s.createElement("dt",{__source:{fileName:PZ,lineNumber:104,columnNumber:9}},(0,ue.Z)("Session:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:105,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.session.toString()),s.createElement("dt",{__source:{fileName:PZ,lineNumber:106,columnNumber:9}},(0,ue.Z)("Secure:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:107,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.secure.toString()),s.createElement("dt",{__source:{fileName:PZ,lineNumber:108,columnNumber:9}},(0,ue.Z)("Value:")),s.createElement("dd",{__source:{fileName:PZ,lineNumber:109,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.value))))}render(){const{domain:e}=this.props,t=e.replace("/^./g","");return s.createElement("li",{__source:{fileName:PZ,lineNumber:119,columnNumber:7}},s.createElement("div",{className:"overview",onClick:this.showDetail,__source:{fileName:PZ,lineNumber:120,columnNumber:9}},s.createElement(Ls,{className:"site-icon",url:t,loadType:"page",__source:{fileName:PZ,lineNumber:121,columnNumber:11}}),e,!this.state.viewCookies&&s.createElement("span",{className:"count",__source:{fileName:PZ,lineNumber:124,columnNumber:13}},this.props.count),s.createElement("span",{className:"controls",__source:{fileName:PZ,lineNumber:126,columnNumber:11}},s.createElement("input",{type:"button",className:"circular clearkey",title:this.state.viewInfo?(0,ue.Z)("Delete selected cookie"):(0,ue.Z)("Delete cookies"),onClick:this.deleteCookie,__source:{fileName:PZ,lineNumber:127,columnNumber:13}}))),this.state.viewCookies&&s.createElement("div",{className:"detail",__source:{fileName:PZ,lineNumber:135,columnNumber:11}},this.renderCookies(),this.state.viewInfo&&s.createElement("div",{className:"info",__source:{fileName:PZ,lineNumber:138,columnNumber:15}},this.renderInfo())))}}const OZ=MZ;var xZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieManager.jsx";function LZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RZ extends s.PureComponent{constructor(...e){super(...e),LZ(this,"state",{cookieData:{},cookieFilter:"",confirmation:!1,showCookies:!1}),LZ(this,"getAllCookies",(()=>{h.Z.cookies.getAll({},(e=>{this.setState({cookieData:e.reduce(((e,t)=>{var n=e[t.domain]||[];return n.push(t),e[t.domain]=n,e}),{})})}))})),LZ(this,"deleteFilteredCookies",(()=>{h.Z.cookies.getAll({},(e=>{for(var t=0;t<e.length;t++)e[t].domain.toLowerCase().includes(this.state.cookieFilter.toLowerCase())&&h.Z.cookies.remove({url:this.getCookieUrl(e[t]),name:e[t].name});this.getAllCookies()}))})),LZ(this,"deleteAllCookies",(()=>{var e=0;h.Z.cookies.getAll({},(n=>{e=n.length;for(var s=0;s<n.length;s++)h.Z.cookies.remove({url:this.getCookieUrl(n[s]),name:n[s].name},t)}));var t=t=>{0===--e&&this.setState({cookieData:{},confirmation:!1,showCookies:!1})}})),LZ(this,"getCookieUrl",(e=>"http"+(e.secure?"s":"")+"://"+e.domain+e.path)),LZ(this,"deleteCookie",(()=>{this.getAllCookies()})),LZ(this,"onSettingsFilter",(e=>{this.setState({cookieFilter:e.target.value})})),LZ(this,"onAskToDelete",(()=>{this.setState({confirmation:!0})})),LZ(this,"onCancel",(()=>{this.setState({confirmation:!1})})),LZ(this,"renderModal",(()=>s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:xZ,lineNumber:116,columnNumber:7}},s.createElement("div",{className:"dialog-delete-cookies",__source:{fileName:xZ,lineNumber:119,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:xZ,lineNumber:120,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:xZ,lineNumber:121,columnNumber:13}},(0,ue.Z)("Delete All Cookies?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:xZ,lineNumber:125,columnNumber:11}},s.createElement("p",{__source:{fileName:xZ,lineNumber:126,columnNumber:13}},(0,ue.Z)("All cookies will be removed."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:xZ,lineNumber:130,columnNumber:11}},s.createElement("input",{type:"button",className:"primary",onClick:this.deleteAllCookies,value:(0,ue.Z)("other","Delete"),autoFocus:!0,__source:{fileName:xZ,lineNumber:131,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:xZ,lineNumber:136,columnNumber:13}})))))),LZ(this,"showCookieList",(()=>{this.setState((e=>({showCookies:!e.showCookies})))}))}componentDidMount(){this.getAllCookies()}render(){if(!this.state.cookieData)return s.createElement("div",{className:"saved-passwords",__source:{fileName:xZ,lineNumber:156,columnNumber:9}},s.createElement("p",{__source:{fileName:xZ,lineNumber:157,columnNumber:11}},(0,ue.Z)("No cookies found.")));const{cookieData:e,cookieFilter:t}=this.state,n=t.toLowerCase(),i=Object.keys(e).length,r=Object.keys(e).reduce(((t,n)=>t+e[n].length),0);return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:xZ,lineNumber:169,columnNumber:7}},s.createElement("div",{className:"setting-group setting-cookies unlimited",__source:{fileName:xZ,lineNumber:170,columnNumber:9}},this.state.confirmation&&this.renderModal(),s.createElement("h3",{__source:{fileName:xZ,lineNumber:172,columnNumber:11}},(0,ue.Z)("Saved Cookies")),s.createElement("p",{__source:{fileName:xZ,lineNumber:174,columnNumber:11}},(0,ue.Z)("Vivaldi currently stores $1 from $2.",[(0,ue.Z)("$1 cookie entry","$1 cookie entries",[r]),(0,ue.Z)("$1 domain","$1 domains",[i])])),this.state.showCookies&&s.createElement("div",{__source:{fileName:xZ,lineNumber:185,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:xZ,lineNumber:186,columnNumber:15}},s.createElement("input",{type:"search",placeholder:(0,ue.Z)("Filter by domain"),value:t,onChange:this.onSettingsFilter,__source:{fileName:xZ,lineNumber:187,columnNumber:17}})),s.createElement("div",{className:"setting-single",__source:{fileName:xZ,lineNumber:193,columnNumber:15}},s.createElement("ul",{__source:{fileName:xZ,lineNumber:194,columnNumber:17}},Object.keys(e).filter((e=>e.includes(n))).map((t=>s.createElement(OZ,{key:"domain-"+t,domain:t,count:e[t].length,items:e[t],onCookieDelete:this.deleteCookie,__source:{fileName:xZ,lineNumber:198,columnNumber:21}}))),0===Object.keys(e).filter((e=>e.includes(n))).length&&t&&s.createElement("li",{style:{margin:"6px"},__source:{fileName:xZ,lineNumber:208,columnNumber:19}},(0,ue.Z)("Query “$1” matches no result.",[t]))))),s.createElement("div",{className:"setting-single",__source:{fileName:xZ,lineNumber:217,columnNumber:11}},s.createElement("input",{type:"button",value:this.state.showCookies?(0,ue.Z)("Hide Saved Cookies"):(0,ue.Z)("Show Saved Cookies"),disabled:0===r,onClick:this.showCookieList,__source:{fileName:xZ,lineNumber:218,columnNumber:13}}),s.createElement("input",{type:"button",className:"danger",onClick:this.onAskToDelete,disabled:0===r,value:(0,ue.Z)("Delete All Cookies"),__source:{fileName:xZ,lineNumber:224,columnNumber:13}}),t&&s.createElement("input",{type:"button",onClick:this.deleteFilteredCookies,value:(0,ue.Z)("Delete Filtered Cookies"),__source:{fileName:xZ,lineNumber:231,columnNumber:15}}))))}}const BZ=RZ;var FZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieSettings.jsx";function UZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class VZ extends s.Component{constructor(...e){super(...e),UZ(this,"state",{cookieSetting:"",cookieMode:"off"}),UZ(this,"handleCookieModeChange",(e=>{const t=e.target.value;b.Z.utilities.setBlockThirdPartyCookies(t,(e=>{})),this.setState({cookieMode:t})})),UZ(this,"handleChange",(e=>{const t=e.target.value;this.setState({cookieSetting:t}),b.Z.utilities.setDefaultContentSettings("cookies",t,qo.default)}))}UNSAFE_componentWillMount(){b.Z.utilities.getDefaultContentSettings("cookies",(e=>{this.setState({cookieSetting:e})})),b.Z.utilities.getBlockThirdPartyCookies((e=>{this.setState({cookieMode:e})}))}render(){const e="block"===this.state.cookieSetting;return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Cookies"),filter:this.props.filter,__source:{fileName:FZ,lineNumber:57,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:FZ,lineNumber:58,columnNumber:9}},s.createElement("h3",{__source:{fileName:FZ,lineNumber:59,columnNumber:11}},(0,ue.Z)("Accept Cookies")),s.createElement(_i,{className:"cookieSelection",name:"cookieSelGroup",value:this.state.cookieSetting,onChange:this.handleChange,__source:{fileName:FZ,lineNumber:61,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:65,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:66,columnNumber:15}},s.createElement("input",{type:"radio",value:"allow",__source:{fileName:FZ,lineNumber:67,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:68,columnNumber:17}},(0,ue.Z)("radio","All")))),s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:71,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:72,columnNumber:15}},s.createElement("input",{type:"radio",value:"session_only",__source:{fileName:FZ,lineNumber:73,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:74,columnNumber:17}},(0,ue.Z)("title","Session Only")))),s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:77,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:78,columnNumber:15}},s.createElement("input",{type:"radio",value:"block",__source:{fileName:FZ,lineNumber:79,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:80,columnNumber:17}},(0,ue.Z)("other","Never")))))),s.createElement("div",{className:"setting-group",__source:{fileName:FZ,lineNumber:86,columnNumber:9}},s.createElement("h3",{__source:{fileName:FZ,lineNumber:87,columnNumber:11}},(0,ue.Z)("Third-Party Cookies")),s.createElement("p",{className:"info",__source:{fileName:FZ,lineNumber:88,columnNumber:11}},(0,ue.Z)("Disabling third party cookies might make some pages fail to work as intended.")),s.createElement(_i,{className:"cookieSelection",name:"cookieSelGroup2",value:this.state.cookieMode,onChange:this.handleCookieModeChange,__source:{fileName:FZ,lineNumber:92,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:96,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:97,columnNumber:15}},s.createElement("input",{type:"radio",value:"off",disabled:e,__source:{fileName:FZ,lineNumber:98,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:99,columnNumber:17}},(0,ue.Z)("radio","Allow All")))),s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:102,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:103,columnNumber:15}},s.createElement("input",{type:"radio",value:"BlockThirdPartyIncognitoOnly",disabled:e,__source:{fileName:FZ,lineNumber:104,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:106,columnNumber:17}},(0,ue.Z)("radio","Block In Incognito Mode Only")))),s.createElement("div",{className:"setting-single",__source:{fileName:FZ,lineNumber:109,columnNumber:13}},s.createElement("label",{__source:{fileName:FZ,lineNumber:110,columnNumber:15}},s.createElement("input",{type:"radio",value:"BlockThirdParty",disabled:e,__source:{fileName:FZ,lineNumber:111,columnNumber:17}}),s.createElement("span",{__source:{fileName:FZ,lineNumber:113,columnNumber:17}},(0,ue.Z)("radio","Block All")))))),s.createElement(BZ,{filter:this.props.filter,__source:{fileName:FZ,lineNumber:118,columnNumber:9}}))}}const HZ=VZ;var WZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\downloads\\Downloads.jsx";function zZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const GZ=[P.kDownloadDefaultDirectory,P.kDownloadsNotifyOnComplete,P.kDownloadsOpenPanelOnNew,P.kDownloadsStartAutomatically,P.kDownloadsUpdateDefaultDownloadWhenSavingAs,P.kDownloadsUsePopout],KZ=st.Z.getEventHandler;class jZ extends s.Component{constructor(...e){super(...e),zZ(this,"selectDownloadFolder",(()=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Download Folder"),type:"folder"}).then((e=>{e&&st.Z.set(P.kDownloadDefaultDirectory,e)}))}))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Downloads"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:WZ,lineNumber:54,columnNumber:7}},s.createElement("div",{className:"setting-subgroup",__source:{fileName:WZ,lineNumber:57,columnNumber:9}},s.createElement("h3",{__source:{fileName:WZ,lineNumber:58,columnNumber:11}},(0,ue.Z)("Download Location")),s.createElement("div",{className:"setting-single",__source:{fileName:WZ,lineNumber:59,columnNumber:11}},s.createElement("div",{className:"setting-single folder-selection",__source:{fileName:WZ,lineNumber:60,columnNumber:13}},s.createElement("input",{type:"text",value:this.props.prefValues[P.kDownloadDefaultDirectory],title:(0,ue.Z)("Enter Default Download Directory Path"),onChange:KZ(P.kDownloadDefaultDirectory),__source:{fileName:WZ,lineNumber:61,columnNumber:15}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Select Folder..."),onClick:this.selectDownloadFolder,__source:{fileName:WZ,lineNumber:65,columnNumber:17}}))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:WZ,lineNumber:70,columnNumber:11}},s.createElement("label",{__source:{fileName:WZ,lineNumber:71,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kDownloadsStartAutomatically],onChange:KZ(P.kDownloadsStartAutomatically),__source:{fileName:WZ,lineNumber:72,columnNumber:15}}),s.createElement("span",{__source:{fileName:WZ,lineNumber:75,columnNumber:15}},(0,ue.Z)("Save Files to Default Location Without Asking")))),s.createElement("div",{className:"setting-single",__source:{fileName:WZ,lineNumber:78,columnNumber:11}},s.createElement("label",{__source:{fileName:WZ,lineNumber:79,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kDownloadsUpdateDefaultDownloadWhenSavingAs],onChange:KZ(P.kDownloadsUpdateDefaultDownloadWhenSavingAs),__source:{fileName:WZ,lineNumber:80,columnNumber:15}}),s.createElement("span",{__source:{fileName:WZ,lineNumber:83,columnNumber:15}},(0,ue.Z)("Update Default Location When Choosing Save as Location")))),s.createElement("div",{className:"setting-single",__source:{fileName:WZ,lineNumber:86,columnNumber:11}},s.createElement("label",{__source:{fileName:WZ,lineNumber:87,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kDownloadsUsePopout],onChange:KZ(P.kDownloadsUsePopout),__source:{fileName:WZ,lineNumber:88,columnNumber:15}}),s.createElement("span",{__source:{fileName:WZ,lineNumber:92,columnNumber:15}},(0,ue.Z)("Display Downloads in a Popup")))),s.createElement("div",{className:"setting-single",__source:{fileName:WZ,lineNumber:95,columnNumber:11}},s.createElement("label",{__source:{fileName:WZ,lineNumber:96,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kDownloadsOpenPanelOnNew],onChange:KZ(P.kDownloadsOpenPanelOnNew),__source:{fileName:WZ,lineNumber:97,columnNumber:15}}),s.createElement("span",{__source:{fileName:WZ,lineNumber:100,columnNumber:15}},this.props.prefValues[P.kDownloadsUsePopout]?(0,ue.Z)("Open Download Popup Automatically"):(0,ue.Z)("Open Download Panel Automatically")))),s.createElement("div",{className:"setting-single",__source:{fileName:WZ,lineNumber:107,columnNumber:11}},s.createElement("label",{__source:{fileName:WZ,lineNumber:108,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kDownloadsNotifyOnComplete],onChange:KZ(P.kDownloadsNotifyOnComplete),__source:{fileName:WZ,lineNumber:109,columnNumber:15}}),s.createElement("span",{__source:{fileName:WZ,lineNumber:112,columnNumber:15}},(0,ue.Z)("Notify on Completed Downloads"))))))}}zZ(jZ,"contextType",Vs.Z);const YZ=(0,bi.Z)(jZ,GZ);var $Z=n(59980),XZ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\FeaturesSettings.jsx";const QZ=st.Z.getEventHandler,qZ=[P.kMailIsTurnedOff];const JZ=function(e){const t=(0,$Z.Z)(qZ);return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Productivity Features"),filter:e.filter,"data-anchor":"features",__source:{fileName:XZ,lineNumber:27,columnNumber:5}},s.createElement(zl.Z,{filter:e.filter,__source:{fileName:XZ,lineNumber:32,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:XZ,lineNumber:33,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:XZ,lineNumber:34,columnNumber:11}},s.createElement("label",{__source:{fileName:XZ,lineNumber:35,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:!t[P.kMailIsTurnedOff],onChange:QZ(P.kMailIsTurnedOff,"inverse"),__source:{fileName:XZ,lineNumber:36,columnNumber:15}}),s.createElement("span",{__source:{fileName:XZ,lineNumber:41,columnNumber:15}},(0,ue.Z)("Enable Mail, Calendar and Feeds")))))))};var eP="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fonts.jsx";function tP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nP={standard:{localizedFamily:(0,ue.Z)("Standard")},sansserif:{localizedFamily:(0,ue.Z)("Sans-serif")},serif:{localizedFamily:(0,ue.Z)("Serif")},fixed:{localizedFamily:(0,ue.Z)("Monospaced")},cursive:{localizedFamily:(0,ue.Z)("Cursive")},fantasy:{localizedFamily:(0,ue.Z)("Fantasy")}},sP=[9,10,11,12,13,14,16,18,20,24],iP=[0,4,6,7,8,...sP],rP=[P.kWebKitDefaultFontSize,P.kWebKitMinimumFontSize],aP=st.Z.getEventHandler;class oP extends s.Component{constructor(...e){super(...e),tP(this,"state",{fontList:[],fonts:{}}),tP(this,"_getFonts",(e=>{this.setState((t=>({fonts:{...t.fonts,[e.genericFamily]:{font:e.fontId,localizedFamily:nP[e.genericFamily].localizedFamily}}})))})),tP(this,"mapObject",((e,t)=>Object.keys(e).map((n=>t(n,e[n]))))),tP(this,"changeHandler",((e,t)=>{let n=P.kWebKitStandardFontFamily;switch(e){case"standard":n=P.kWebKitStandardFontFamily;break;case"fantasy":n=P.kWebKitFantasyFontFamily;break;case"fixed":n=P.kWebKitFixedFontFamily;break;case"sansserif":n=P.kWebKitSansSerifFontFamily;break;case"serif":n=P.kWebKitSerifFontFamily;break;case"cursive":n=P.kWebKitCursiveFontFamily}st.Z.set(n,t.target.value)})),tP(this,"renderOptions",(e=>{const t="default"===e?parseInt(this.props.prefValues[P.kWebKitDefaultFontSize]):parseInt(this.props.prefValues[P.kWebKitMinimumFontSize]),n="default"===e?sP:iP;return n.includes(t)||(n.push(t),n.sort(((e,t)=>e-t))),n.map((e=>s.createElement("option",{key:e,__source:{fileName:eP,lineNumber:160,columnNumber:29}},e)))}))}componentDidMount(){h.Z.fontSettings.onFontChanged.addListener(this._getFonts),h.Z.fontSettings.getFontList((e=>{this.setState({fontList:e})})),this.mapObject(nP,((e,t)=>{h.Z.fontSettings.getFont({genericFamily:e},(n=>{this.setState((s=>({fonts:{...s.fonts,[e]:{font:n.fontId,localizedFamily:t.localizedFamily}}})))}))}))}componentWillUnmount(){h.Z.fontSettings.onFontChanged.removeListener(this._getFonts)}render(){const{prefValues:e}=this.props,t=this.state.fontList.map((e=>s.createElement("option",{key:e.fontId,value:e.fontId,__source:{fileName:eP,lineNumber:166,columnNumber:14}},e.displayName)));return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Fonts"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:eP,lineNumber:170,columnNumber:7}},s.createElement("div",{className:"setting-group-double font-slider",__source:{fileName:eP,lineNumber:175,columnNumber:9}},s.createElement("label",{__source:{fileName:eP,lineNumber:176,columnNumber:11}},s.createElement("span",{__source:{fileName:eP,lineNumber:177,columnNumber:13}},(0,ue.Z)("Default Font Size")),s.createElement("span",{className:"fake-dataset",__source:{fileName:eP,lineNumber:178,columnNumber:13}},s.createElement("input",{type:"number",min:"6",max:"99",value:e[P.kWebKitDefaultFontSize],onChange:aP(P.kWebKitDefaultFontSize),__source:{fileName:eP,lineNumber:179,columnNumber:15}}),s.createElement("select",{value:e[P.kWebKitDefaultFontSize],onChange:aP(P.kWebKitDefaultFontSize),__source:{fileName:eP,lineNumber:185,columnNumber:15}},this.renderOptions("default")))),s.createElement("label",{__source:{fileName:eP,lineNumber:192,columnNumber:11}},s.createElement("span",{__source:{fileName:eP,lineNumber:193,columnNumber:13}},(0,ue.Z)("Minimum Font Size")),s.createElement("span",{className:"fake-dataset",__source:{fileName:eP,lineNumber:194,columnNumber:13}},s.createElement("input",{type:"number",min:"0",max:"99",value:e[P.kWebKitMinimumFontSize],onChange:aP(P.kWebKitMinimumFontSize),__source:{fileName:eP,lineNumber:195,columnNumber:15}}),s.createElement("select",{value:e[P.kWebKitMinimumFontSize],onChange:aP(P.kWebKitMinimumFontSize),__source:{fileName:eP,lineNumber:201,columnNumber:15}},this.renderOptions("minimum"))))),s.createElement("div",{className:"setting-group-double pad-top font-face-list",__source:{fileName:eP,lineNumber:210,columnNumber:9}},s.createElement("h3",{__source:{fileName:eP,lineNumber:211,columnNumber:11}},(0,ue.Z)("Default Fonts")),this.mapObject(this.state.fonts,((e,n)=>s.createElement("label",{key:e,className:"setting-single",__source:{fileName:eP,lineNumber:214,columnNumber:15}},s.createElement("span",{__source:{fileName:eP,lineNumber:215,columnNumber:17}},n.localizedFamily),s.createElement("select",{onChange:this.changeHandler.bind(this,e),value:n.font,__source:{fileName:eP,lineNumber:216,columnNumber:17}},t))))))}}const lP=(0,bi.Z)(oP,rP);var cP=n(74144),uP="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\HueIntegration.jsx";function mP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dP=[P.kHueBridgeIp,P.kHueEnabled,P.kHueLights,P.kHueUsername];class hP extends s.PureComponent{constructor(...e){super(...e),mP(this,"initialState",(()=>{const{lights:e,groups:t}=I.getState();return{groups:t,lights:e,validBridge:!1,validUsername:!1,waitingForButtonPress:!1,givenUp:!1,manualIp:""}})),mP(this,"_isMounted",!1),mP(this,"state",this.initialState()),mP(this,"onHueStoreChanged",(()=>{const{lights:e,groups:t}=I.getState();this.setState({lights:e,groups:t})})),mP(this,"verifyBridge",(()=>{const e=A.ZP.get(P.kHueBridgeIp);e?fetch(`http://${e}/description.xml`).then((e=>{e.ok?this.setState({validBridge:!0},this.verifyUsername):this.getBridge()})).catch((e=>{this.getBridge()})):this.getBridge()})),mP(this,"getBridge",(()=>{fetch("https://discovery.meethue.com/").then((e=>{e.ok?e.json().then((e=>{e&&e[0]&&e[0].internalipaddress?(st.Z.set(P.kHueBridgeIp,e[0].internalipaddress),this.verifyBridge()):this.setState({givenUp:!0})})):this.setState({givenUp:!0})})).catch((e=>{this.setState({givenUp:!0})}))})),mP(this,"setBridge",(()=>{st.Z.set(P.kHueBridgeIp,this.state.manualIp),this.verifyBridge()})),mP(this,"verifyUsername",(()=>{const e=A.ZP.get(P.kHueBridgeIp),t=A.ZP.get(P.kHueUsername);t?fetch(`http://${e}/api/${t}/`).then((e=>{e.ok?e.json().then((e=>{e[0]?.error?(st.Z.set(P.kHueUsername,""),this.getUsername()):e?.config&&this.setState({validUsername:!0,waitingForButtonPress:!1},R.updateLights)})):this.setState({givenUp:!0})})).catch((e=>{this.setState({givenUp:!0})})):this.getUsername()})),mP(this,"getUsername",(()=>{const e=A.ZP.get(P.kHueBridgeIp);e&&fetch(`http://${e}/api`,{method:"POST",body:JSON.stringify({devicetype:"vivaldi_browser#desktop_hue"})}).then((e=>{e.ok?e.json().then((e=>{e[0]?.success?.username?(st.Z.set(P.kHueUsername,e[0].success.username),this.verifyUsername()):e[0]?.error&&101===e[0].error.type&&(this.setState({waitingForButtonPress:!0}),setTimeout((()=>{this._isMounted&&this.getUsername()}),1e3))})):this.setState({givenUp:!0})})).catch((e=>{this.setState({givenUp:!0})}))})),mP(this,"toggleLight",((e,t)=>{const n=!A.ZP.get(P.kHueLights).includes(t),s=A.ZP.get(P.kHueLights).filter((e=>e!==t));n&&s.push(t),R.flash(e),st.Z.set(P.kHueLights,s)})),mP(this,"resetBridge",(()=>{st.Z.reset(P.kHueBridgeIp),st.Z.reset(P.kHueUsername),this.setState(this.initialState())})),mP(this,"changeManualIp",(e=>{this.setState({manualIp:e.currentTarget.value})}))}componentDidMount(){this._isMounted=!0,this.hueStoreToken=I.addListener(this.onHueStoreChanged),this.props.prefValues[P.kHueEnabled]&&this.props.prefValues[P.kHueBridgeIp]&&this.verifyBridge()}componentWillUnmount(){this.hueStoreToken.remove(),this._isMounted=!1}render(){const e=this.props.prefValues[P.kHueEnabled],t=this.props.prefValues[P.kHueLights],{waitingForButtonPress:n,validBridge:i,validUsername:r,groups:a,lights:o}=this.state;return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Philips Hue Theme Integration"),filter:this.props.filter,__source:{fileName:uP,lineNumber:266,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:uP,lineNumber:271,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:uP,lineNumber:272,columnNumber:11}},s.createElement("label",{__source:{fileName:uP,lineNumber:273,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e,onChange:st.Z.getEventHandler(P.kHueEnabled),__source:{fileName:uP,lineNumber:274,columnNumber:15}}),s.createElement("span",{__source:{fileName:uP,lineNumber:278,columnNumber:15}},(0,ue.Z)("Enable Hue"))),e&&i&&!n?s.createElement("p",{className:"info",__source:{fileName:uP,lineNumber:281,columnNumber:15}},(0,ue.Z)("Connected to Hue Bridge at $1.",[this.props.prefValues[P.kHueBridgeIp]])):s.createElement("p",{className:"info",__source:{fileName:uP,lineNumber:286,columnNumber:15}},(0,ue.Z)("Requires a Philips Hue lighting system on the local network.")))),e&&i&&s.createElement("div",{className:"setting-group",__source:{fileName:uP,lineNumber:294,columnNumber:11}},s.createElement("input",{type:"button",className:"danger",value:(0,ue.Z)("Reset Bridge Connection"),onClick:this.resetBridge,__source:{fileName:uP,lineNumber:295,columnNumber:13}})),e&&(!i||n)&&s.createElement("div",{className:"setting-group unlimited",__source:{fileName:uP,lineNumber:303,columnNumber:11}},s.createElement("h3",{__source:{fileName:uP,lineNumber:304,columnNumber:13}},(0,ue.Z)("Bridge Discovery")),!n&&s.createElement("div",{className:"setting-group",__source:{fileName:uP,lineNumber:306,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.changeManualIp,label:(0,ue.Z)("Bridge IP (Leave blank to autodiscover)"),placeholder:"127.0.0.1",value:this.state.manualIp,__source:{fileName:uP,lineNumber:307,columnNumber:15}}),s.createElement("div",{className:"setting-single",__source:{fileName:uP,lineNumber:314,columnNumber:15}},s.createElement("input",{type:"button",className:"primary",value:this.state.manualIp?(0,ue.Z)("Connect"):(0,ue.Z)("Find Bridge"),onClick:this.state.manualIp?this.setBridge:this.getBridge,__source:{fileName:uP,lineNumber:315,columnNumber:17}}))),n&&s.createElement("div",{className:"setting-group unlimited",__source:{fileName:uP,lineNumber:329,columnNumber:13}},s.createElement("p",{className:"info",__source:{fileName:uP,lineNumber:330,columnNumber:15}},(0,ue.Z)("Found Bridge at $1. Waiting for button press...",[this.props.prefValues[P.kHueBridgeIp]])),s.createElement("div",{className:"hue-press-button",dangerouslySetInnerHTML:{__html:`${cn.I_V}${(0,ue.Z)("Press the button on your Bridge")}`},__source:{fileName:uP,lineNumber:335,columnNumber:15}}))),e&&r&&a.size>0&&o.size>0&&s.createElement("div",{className:"setting-group unlimited",__source:{fileName:uP,lineNumber:345,columnNumber:11}},s.createElement("p",{className:"info",__source:{fileName:uP,lineNumber:346,columnNumber:13}},(0,ue.Z)("Only lights that support color can be selected."),"* "+(0,ue.Z)("Light currently unreachable.")),[...a.keys()].map((e=>s.createElement("div",{className:"setting-group",key:e,__source:{fileName:uP,lineNumber:352,columnNumber:15}},s.createElement("h3",{__source:{fileName:uP,lineNumber:353,columnNumber:17}},a.get(e)?.name),a.get(e)?.lights.map((e=>{const n=o.get(e);if(!n)return null;const i=t&&t.some((e=>e===n.uniqueid)),r=n.type.toLowerCase().includes("color light");return s.createElement("div",{className:"setting-single",key:n.uniqueid,__source:{fileName:uP,lineNumber:367,columnNumber:21}},s.createElement("label",{__source:{fileName:uP,lineNumber:368,columnNumber:23}},s.createElement("input",{type:"checkbox",checked:i,disabled:!r,onChange:()=>{this.toggleLight(e,n.uniqueid)},__source:{fileName:uP,lineNumber:369,columnNumber:25}}),s.createElement("span",{__source:{fileName:uP,lineNumber:376,columnNumber:25}},n.name,!n.state.reachable&&"*")))})))))))}}const pP=(0,bi.Z)(hP,dP);var gP=n(49269),bP="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\AcceptLanguage.jsx";function NP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const fP=[P.kTranslateEnabled],_P=st.Z.getEventHandler;class vP extends s.PureComponent{constructor(...e){super(...e),NP(this,"_isMounted",!1),NP(this,"state",{language:h.Z.i18n.getUILanguage(),acceptLangs:[],acceptLangsList:[]}),NP(this,"updateAcceptedList",(()=>{h.Z.i18n.getAcceptLanguages((e=>{h.Z.runtime.lastError?(console.error(h.Z.runtime.lastError.message),this._isMounted&&this.setState({acceptLangs:[]})):this._isMounted&&this.setState({acceptLangs:e})}))})),NP(this,"onContextMenu",((e,t)=>{const n=[];e>=0&&e<this.state.acceptLangs.length&&(n.push({...(0,Mn.Z)("Move to Top"),handler:this.moveItemToTop.bind(this,e),visible:0!==e}),n.push({...(0,Mn.Z)("Move Up"),handler:this.moveItem.bind(this,e,e-1),visible:e>1}),n.push({...(0,Mn.Z)("Move Down"),handler:this.moveItem.bind(this,e,e+1),visible:e!==this.state.acceptLangs.length-1}),n.push({...(0,Mn.Z)("verb","Remove"),handler:this.removeItem.bind(this,e),visible:this.state.acceptLangs[e]!==this.state.language&&this.state.acceptLangs.length>1})),(0,Hs.Z)(this.context.vivaldiWindowId,n)(t)})),NP(this,"addItem",(e=>{if(e&&e.target){const t=e.target.value;h.Z.languageSettingsPrivate.enableLanguage(t),this.updateAcceptedList()}})),NP(this,"moveItem",((e,t)=>{const n=t<e?"UP":"DOWN",s=Math.abs(e-t);(0,gP.Z)(s,(()=>{h.Z.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],n)})),this.updateAcceptedList()})),NP(this,"moveItemToTop",(e=>{h.Z.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],"TOP"),this.updateAcceptedList()})),NP(this,"removeItem",(e=>{this.state.acceptLangs.length<=1||(h.Z.languageSettingsPrivate.disableLanguage(this.state.acceptLangs[e]),this.updateAcceptedList())})),NP(this,"resetToDefault",(()=>{st.Z.reset(P.kAcceptLanguages),this.updateAcceptedList()})),NP(this,"resetTranslationSettingsToDefault",(()=>{b.Z.prefs.resetTranslationPrefs()})),NP(this,"remapLangs",(()=>this.state.acceptLangs.map((e=>({key:e,name:e,isDefault:e===this.state.language||this.state.acceptLangs.length<=1}))))),NP(this,"renderItem",((e,t)=>s.createElement("span",{__source:{fileName:bP,lineNumber:185,columnNumber:12}},e)))}componentDidMount(){this._isMounted=!0,h.Z.languageSettingsPrivate.getLanguageList((e=>{h.Z.runtime.lastError?console.error(h.Z.runtime.lastError.message):this._isMounted&&this.setState({acceptLangsList:e.sort(((e,t)=>e.code.localeCompare(t.code))).map((e=>({key:e.code,value:e.nativeDisplayName})))})})),this.updateAcceptedList()}componentWillUnmount(){this._isMounted=!1}render(){const e=this.state.acceptLangsList.filter((e=>!this.state.acceptLangs.includes(e.key)));return e.unshift({key:"",value:(0,ue.Z)("Select Language")}),s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:bP,lineNumber:198,columnNumber:7}},s.createElement("div",{className:"setting-group accept-language-list",__source:{fileName:bP,lineNumber:199,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:bP,lineNumber:200,columnNumber:11}},s.createElement("h3",{__source:{fileName:bP,lineNumber:201,columnNumber:13}},(0,ue.Z)("Accept Languages")),s.createElement("p",{className:"info",__source:{fileName:bP,lineNumber:202,columnNumber:13}},(0,ue.Z)("Preferred languages, accepted by compatible websites in given order")),this.state.acceptLangsList.length>0?s.createElement(s.Fragment,null,s.createElement("div",{className:"master-detail sortable-list",__source:{fileName:bP,lineNumber:206,columnNumber:15}},s.createElement(NZ.Z,{items:this.remapLangs(),filter:this.props.filter,onCreateItem:this.addItem,moveItem:this.moveItem,onRemove:this.removeItem,onContextMenu:this.onContextMenu,renderListItem:this.renderItem,optionsList:e,addTipString:(0,ue.Z)("Add Language"),deleteTipString:(0,ue.Z)("Remove Language"),supportDragAndDrop:!0,mimeType:"vivaldi/x-settings-accept-langage",__source:{fileName:bP,lineNumber:207,columnNumber:17}})),s.createElement("input",{type:"button",value:(0,ue.Z)("Reset to Default"),onClick:this.resetToDefault,__source:{fileName:bP,lineNumber:222,columnNumber:15}})):s.createElement("p",{__source:{fileName:bP,lineNumber:228,columnNumber:15}},(0,ue.Z)("Language list retrieval for “$1” failed",[this.state.language]))),s.createElement("div",{className:"setting-single offer-translate",__source:{fileName:bP,lineNumber:232,columnNumber:11}},s.createElement("label",{__source:{fileName:bP,lineNumber:233,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTranslateEnabled],onChange:_P(P.kTranslateEnabled),__source:{fileName:bP,lineNumber:234,columnNumber:15}}),s.createElement("span",{__source:{fileName:bP,lineNumber:237,columnNumber:15}},s.createElement("h3",{__source:{fileName:bP,lineNumber:238,columnNumber:15}},(0,ue.Z)("Automatically Offer to Translate Pages")))),s.createElement("p",{className:"info",__source:{fileName:bP,lineNumber:241,columnNumber:13}},(0,ue.Z)("When unchecked, translation popup and automatic translations will be disabled. Translation can still be manually triggered on each page.")),s.createElement("input",{type:"button",value:(0,ue.Z)("Reset Translation Settings to Default"),onClick:this.resetTranslationSettingsToDefault,__source:{fileName:bP,lineNumber:244,columnNumber:13}}))))}}NP(vP,"contextType",Vs.Z);const EP=(0,bi.Z)(vP,fP);var CP=n(85909),wP="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\LanguageSetting.jsx";function yP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const SP=[P.kCalendarDateFormat,P.kCalendarStartOfWeek,P.kCalendarWeekNumberRule],TP=st.Z.getEventHandler;class kP extends s.Component{constructor(...e){super(...e),yP(this,"locales",[...CP.lE].sort(((e,t)=>e.local.localeCompare(t.local)))),yP(this,"_isMounted",!1),yP(this,"state",{initialLanguage:"",language:"",confirmation:!1,localMoment:B.ZP.getLocale()}),yP(this,"langChanged",(e=>{const t=e.currentTarget.selectedOptions[0].dataset.lang;this.setState({language:t})})),yP(this,"saveLanguage",(()=>{b.Z.utilities.setLanguage(this.state.language,(()=>{this.setState((e=>({initialLanguage:e.language,confirmation:!1})))}))})),yP(this,"saveDateFormat",(e=>{const t=e.target.value;st.Z.set(P.kCalendarDateFormat,t)})),yP(this,"updateFormatPreview",(()=>{b.Z.utilities.getSystemDateFormat((e=>{this._isMounted&&this.setState({localMoment:B.ZP.getLocale(e)})}))})),yP(this,"confirmLanguageChange",(()=>{this.setState({confirmation:!0})})),yP(this,"onCancel",(()=>{this.setState((e=>({language:e.initialLanguage,confirmation:!1})))})),yP(this,"renderModal",(()=>{const e=this.locales.find((e=>e.key===this.state.language));return e?s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:wP,lineNumber:132,columnNumber:7}},s.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:wP,lineNumber:135,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:wP,lineNumber:136,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:wP,lineNumber:137,columnNumber:13}},(0,ue.Z)("Save New Language?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:wP,lineNumber:141,columnNumber:11}},s.createElement("p",{__source:{fileName:wP,lineNumber:142,columnNumber:13}},(0,ue.Z)("Vivaldi user interface language will be set to:")),s.createElement("p",{__source:{fileName:wP,lineNumber:143,columnNumber:13}},s.createElement("strong",{__source:{fileName:wP,lineNumber:143,columnNumber:16}},e.local+(e.value!==e.local?" – "+e.value:""))),s.createElement("p",{__source:{fileName:wP,lineNumber:147,columnNumber:13}},(0,ue.Z)("Browser restart is required for new setting to take effect."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:wP,lineNumber:149,columnNumber:11}},s.createElement("input",{type:"button",className:"danger",onClick:this.saveLanguage,value:(0,ue.Z)("Save Language"),__source:{fileName:wP,lineNumber:150,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),autoFocus:!0,__source:{fileName:wP,lineNumber:154,columnNumber:13}})))):null}))}componentDidMount(){this._isMounted=!0,b.Z.utilities.getLanguage((e=>{this._isMounted&&this.setState({language:e,initialLanguage:e})})),this.updateFormatPreview()}componentDidUpdate(e,t){const n=this.props.prefValues,s=e.prefValues;n[P.kCalendarDateFormat]===s[P.kCalendarDateFormat]&&n[P.kCalendarStartOfWeek]===s[P.kCalendarStartOfWeek]&&n[P.kCalendarWeekNumberRule]===s[P.kCalendarWeekNumberRule]||this.updateFormatPreview()}componentWillUnmount(){this._isMounted=!1}render(){const e=g()(),{longDateFormat:t,week:n,weekdays:i}=this.state.localMoment;return e.localeData()._week=this.state.localMoment.week,s.createElement(Cc,{categoryTitle:(0,ue.Z)("Language"),"data-anchor":"language",filter:this.props.filter,__source:{fileName:wP,lineNumber:172,columnNumber:7}},this.state.confirmation&&this.renderModal(),s.createElement("p",{className:"info",__source:{fileName:wP,lineNumber:178,columnNumber:9}},(0,ue.Z)("These settings require a restart to take full effect.")),s.createElement("form",{className:"setting-group",onSubmit:this.confirmLanguageChange,__source:{fileName:wP,lineNumber:182,columnNumber:9}},s.createElement("h3",{__source:{fileName:wP,lineNumber:183,columnNumber:11}},(0,ue.Z)("User Interface Language")),s.createElement("div",{className:"setting-single",__source:{fileName:wP,lineNumber:184,columnNumber:11}},s.createElement("select",{onChange:this.langChanged,value:this.state.language.toLowerCase(),__source:{fileName:wP,lineNumber:185,columnNumber:13}},this.locales.map((e=>s.createElement("option",{key:e.key,value:e.key.toLowerCase(),"data-lang":e.key,__source:{fileName:wP,lineNumber:190,columnNumber:21}},e.local+(e.value!==e.local?" – "+e.value:""))))),s.createElement("input",{type:"submit",className:"primary",disabled:this.state.language===this.state.initialLanguage,value:(0,ue.Z)("Save Language"),__source:{fileName:wP,lineNumber:196,columnNumber:13}}))),s.createElement("div",{className:"setting-group",__source:{fileName:wP,lineNumber:203,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:wP,lineNumber:204,columnNumber:11}},s.createElement("h3",{__source:{fileName:wP,lineNumber:205,columnNumber:13}},(0,ue.Z)("Preferred Date & Time Format")),s.createElement("p",{className:"info",__source:{fileName:wP,lineNumber:206,columnNumber:13}},(0,ue.Z)("Affects beginning day of week, time and date display format.")),s.createElement("select",{value:this.props.prefValues[P.kCalendarDateFormat],onChange:this.saveDateFormat,__source:{fileName:wP,lineNumber:209,columnNumber:13}},s.createElement("option",{value:"system",__source:{fileName:wP,lineNumber:212,columnNumber:15}},(0,ue.Z)("Inherit from Operating System")),s.createElement("option",{value:"language",__source:{fileName:wP,lineNumber:213,columnNumber:15}},(0,ue.Z)("Same as Selected Language")))),s.createElement("div",{className:"setting-single",__source:{fileName:wP,lineNumber:217,columnNumber:11}},s.createElement("h3",{__source:{fileName:wP,lineNumber:219,columnNumber:13}},(0,ue.Z)("Week Starts On")),s.createElement("label",{__source:{fileName:wP,lineNumber:220,columnNumber:13}},s.createElement("select",{name:"week_starts",value:this.props.prefValues[P.kCalendarStartOfWeek],onChange:TP(P.kCalendarStartOfWeek),__source:{fileName:wP,lineNumber:221,columnNumber:15}},s.createElement("option",{value:"system",__source:{fileName:wP,lineNumber:226,columnNumber:17}},(0,ue.Z)("System Default")),s.createElement("option",{value:"sunday",__source:{fileName:wP,lineNumber:227,columnNumber:17}},(0,ue.Z)("Sunday")),s.createElement("option",{value:"monday",__source:{fileName:wP,lineNumber:228,columnNumber:17}},(0,ue.Z)("Monday")),s.createElement("option",{value:"tuesday",__source:{fileName:wP,lineNumber:229,columnNumber:17}},(0,ue.Z)("Tuesday")),s.createElement("option",{value:"wednesday",__source:{fileName:wP,lineNumber:230,columnNumber:17}},(0,ue.Z)("Wednesday")),s.createElement("option",{value:"thursday",__source:{fileName:wP,lineNumber:231,columnNumber:17}},(0,ue.Z)("Thursday")),s.createElement("option",{value:"friday",__source:{fileName:wP,lineNumber:232,columnNumber:17}},(0,ue.Z)("Friday")),s.createElement("option",{value:"saturday",__source:{fileName:wP,lineNumber:233,columnNumber:17}},(0,ue.Z)("Saturday"))))),s.createElement("div",{className:"setting-single",__source:{fileName:wP,lineNumber:238,columnNumber:11}},s.createElement("h3",{__source:{fileName:wP,lineNumber:240,columnNumber:13}},(0,ue.Z)("First Week Number")),s.createElement("label",{__source:{fileName:wP,lineNumber:241,columnNumber:13}},s.createElement("select",{name:"week_number_rule",value:this.props.prefValues[P.kCalendarWeekNumberRule],onChange:TP(P.kCalendarWeekNumberRule),__source:{fileName:wP,lineNumber:242,columnNumber:15}},s.createElement("option",{value:"4",__source:{fileName:wP,lineNumber:248,columnNumber:17}},(0,ue.Z)("First 4 Day Week (ISO8601)")),s.createElement("option",{value:"1",__source:{fileName:wP,lineNumber:250,columnNumber:17}},(0,ue.Z)("First Week in Calendar Year")),s.createElement("option",{value:"7",__source:{fileName:wP,lineNumber:252,columnNumber:17}},(0,ue.Z)("First Whole Week"))))),s.createElement("dl",{className:"info",style:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"2px 8px",margin:"12px 0"},__source:{fileName:wP,lineNumber:257,columnNumber:11}},s.createElement("dt",{__source:{fileName:wP,lineNumber:266,columnNumber:13}},(0,ue.Z)("Time Format")),s.createElement("dd",{__source:{fileName:wP,lineNumber:267,columnNumber:13}},e.format(t.LT)),s.createElement("dt",{__source:{fileName:wP,lineNumber:268,columnNumber:13}},(0,ue.Z)("Short Date")),s.createElement("dd",{__source:{fileName:wP,lineNumber:269,columnNumber:13}},e.format(t.L)),s.createElement("dt",{__source:{fileName:wP,lineNumber:270,columnNumber:13}},(0,ue.Z)("Long Date")),s.createElement("dd",{__source:{fileName:wP,lineNumber:271,columnNumber:13}},e.format(t.LLLL)),s.createElement("dt",{__source:{fileName:wP,lineNumber:272,columnNumber:13}},(0,ue.Z)("Start of Week")),s.createElement("dd",{__source:{fileName:wP,lineNumber:273,columnNumber:13}},i[n.dow]),s.createElement("dt",{__source:{fileName:wP,lineNumber:274,columnNumber:13}},(0,ue.Z)("Week Number")),s.createElement("dd",{__source:{fileName:wP,lineNumber:275,columnNumber:13}},e.week()))),s.createElement(EP,{filter:this.props.filter,__source:{fileName:wP,lineNumber:279,columnNumber:9}}))}}const IP=(0,bi.Z)(kP,SP);var AP=n(59896),ZP=n(91761),PP=n(98517),DP=n(43792),MP=n(40838),OP=n(2344);var xP=n(79777);var LP=n(70015);const{basicHttpAuthenticationHeader:RP,concatUrl:BP}=DP.Z;async function FP(e,t){const n={foundService:!1,url:"",calendarCount:0,eventCount:0,statusMessage:""},{username:s,url:i}=e,r=i,a=await UP(e,t);if(!a.continueDiscovery)return n.statusMessage=a.message,n;const{userPrincipal:o,isCalendarUrl:l}=a;if(o&&!e.url.endsWith(o))e.url=BP(e.url,o);else{const n=await async function(e,t,n){const s=e&&Is.parse(e).host||"",i=(0,ru.II)(s);return new Promise(((s,r)=>{const a=new XMLHttpRequest;a.open("GET",i,!0,t,n),a.setRequestHeader("Authorization",RP(t,n)),a.onload=()=>{if(404===a.status)return void s({continueDiscovery:!1,redirectedUrl:""});const t=Is.parse(a.responseURL),n=Is.parse(e);t.href===n.href||s({continueDiscovery:!1,redirectedUrl:t.href})},a.onerror=()=>{s({continueDiscovery:!0,redirectedUrl:""})},a.send(null)}))}(i,s,t);if(n.redirectedUrl){e.url=n.redirectedUrl;const{userPrincipal:s}=await UP(e,t);s&&!e.url.endsWith(s)&&(e.url=BP(e.url,s))}}const c=await async function(e,t){const{username:n,url:s}=e,i=await fetch(s,{method:"PROPFIND",credentials:"omit",headers:{"Content-Type":"text/xml;charset=UTF-8",Authorization:RP(n,t),Brief:"t",Depth:"0"},body:(0,OP.sp)()});if(i.ok){const e=function(e){const t=(0,MP.Z)(e),n={calendarHomeSet:"",errorMsg:""};if(t.d_error)return n.errorMsg="Error parsing calendar HomeSet",n;if(!t.parserror){if(!t.d_multistatus)return n.errorMsg="Error parsing calendar HomeSet",n;t.d_multistatus.d_response.forEach((e=>{const{d_propstat:t}=e,{d_prop:s}=t,{c_calendarHomeSet:i}=s;if(!i)return;const r=i.d_href.content;n.calendarHomeSet=r}))}return n}(await i.text());if(e.calendarHomeSet)return e.calendarHomeSet;at.ZP.warn("Calendar","Error fetching homeset",i.status,await i.text())}return""}(e,t);if(!c){const s=await async function(e,t){const{username:n,url:s}=e,i=await fetch(s,{method:"PROPFIND",credentials:"omit",headers:{"Content-Type":"text/xml;charset=UTF-8",Authorization:RP(n,t),Brief:"t",Depth:"1"},body:(0,OP.sp)()});if(i.ok){const e=await i.text();return(0,xP.Z)(e)}at.ZP.warn("Calendar","Error fetching url's",i.status,await i.text());return[]}(e,t);if(s.length)return n.calendarCount=s.length,n.foundService=!0,n.url=e.url,n}if(l)n.foundService=!0,e.url=r;else{if(!c)return n.url=r,n.foundService=!1,n.statusMessage=(0,ue.Z)("No calendars found. Please try different URL."),n;e.url=BP(e.url,c),n.foundService=!0}const u={...e,oauth2Token:"",password:t},m=await(0,LP.Z)((0,OP.ZP)(u),e.url),d=(0,xP.Z)(m.response);return d.length&&(n.calendarCount=d.length,n.foundService=!0,n.url=e.url),n}async function UP(e,t){const{username:n,url:s}=e,i={authenticated:!1,userPrincipal:"",continueDiscovery:!1,message:"",isCalendarUrl:!1};try{const e=await fetch(s,{method:"PROPFIND",credentials:"omit",headers:{Brief:"t",Depth:"0","Content-Type":"text/xml;charset=UTF-8",Authorization:RP(n,t)},body:(0,OP.P_)()}),{status:r,ok:a}=e;if(a)r>=200&&r<=299&&(i.authenticated=!0);else{if(401===r)return i.message=(0,ue.Z)("Authentication error"),i;if(404===r)return i.message=(0,ue.Z)("CalDAV service not found"),i.continueDiscovery=!0,i;if(405===r)return i.continueDiscovery=!0,i}const o=await e.text(),l=(0,MP.Z)(o);if(l.d_error||!l.d_multistatus)return i.message=(0,ue.Z)("Parser error"),i.continueDiscovery=!0,i;const c=function(e){let t="";const n=(0,MP.Z)(e);return!n.parsererror&&"d_multistatus"===n.root&&n.d_multistatus.d_response&&n.d_multistatus.d_response.forEach((e=>{if(e?.d_propstat?.d_prop?.d_currentUserPrincipal){const{d_href:n}=e.d_propstat.d_prop.d_currentUserPrincipal;t=n.content}else e?.d_href?.content&&(t=e.d_href.content)})),t}(o);c&&(i.userPrincipal=c,i.continueDiscovery=!0)}catch{i.message=(0,ue.Z)("CalDAV service not found: $1",[e.url])}return i}async function VP(e,t){const{account_type:n,username:s,url:i}=e,{urlValid:r}=b.Z.utilities.isUrlValid(i),a={url:i,calendarCount:0,eventCount:0,foundService:!1,statusMessage:""};if(!r)return{statusMessage:(0,ue.Z)("Invalid URL"),...a};let o;try{o="google"===n?await PP.Z.getAuthentication(e):{oauth2Token:"",id:"",name:"",url:i,username:"vivaldi"===n?s.toLowerCase():s,password:t}}catch(e){return Promise.resolve(a)}try{const e=await(0,LP.Z)((0,OP.ZP)(o),i),t=(0,xP.Z)(e.response);return{...a,foundService:!0,calendarCount:t.length}}catch(e){return e.status&&PP.Z.resetRefreshTokenAndFetchNew(o.username),{...a,statusMessage:e.statusText}}}var HP="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\AccountItem.jsx";function WP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{isCalDAV:zP,getPassword:GP,savePassword:KP,deletePassword:jP}=Kc.Z,{UNKNOWN:YP,VERIFYING:$P,OK:XP,ERROR:QP}=ru.LB;class qP extends s.Component{constructor(e){super(e),WP(this,"componentDidMount",(()=>{const{url:e,username:t}=this.state;e&&t&&GP(e,t).then((e=>{e.found&&this.setState({password:e.password})}))})),WP(this,"probeAccounts",(async()=>{const{account:e}=this.props,{account_type:t}=e,{password:n}=this.state;let s={foundService:!1,statusText:""};if(this.logStatus((0,ue.Z)("Verifying..."),$P),"ical"===t){s=await ZP.Z.probeWebCalendar(this.getAccount(),n);const{foundService:e,eventCount:t}=s;if(e)return this.logStatus((0,ue.Z)("Connected to Web Calendar. Found $1 Event(s)",[t]),XP),e}else if("google"===t)s=await VP(this.getAccount(),n);else{if(!this.state.password)return this.logStatus((0,ue.Z)("Password Missing..."),QP),!1;s=await VP(this.getAccount(),n)}return s.foundService?(this.logStatus((0,ue.Z)("Connected to CalDAV. Found $1 Calendar(s)",[s.calendarCount]),XP),AP.Z.resetStatus(this.props.account.name)):this.logStatus((0,ue.Z)("Not connected. $1",[s.statusMessage||""]),QP),s.foundService})),WP(this,"isAccountChanged",(()=>this.state.name!==this.props.account.name||this.state.username!==this.props.account.username||this.state.url!==this.props.account.url||this.state.passwordChanged)),WP(this,"onChangeCredentials",(e=>{const t=e.target.value,n=this.state.url,s=this.state.username;this.setState({password:t,passwordChanged:!0,status:YP});const{urlValid:i}=b.Z.utilities.isUrlValid(n);i?(this.logStatus("",YP),KP(n,s,t).then((e=>{e.result||this.logStatus(e.message,QP)}))):this.logStatus((0,ue.Z)("Invalid URL"),$P)})),WP(this,"getAccount",(()=>({id:this.props.account.id,name:this.state.name,username:this.state.username,url:this.state.url,account_type:this.props.account.account_type}))),WP(this,"logStatus",((e,t)=>{this.setState({status:t,statusText:e})})),WP(this,"saveAccount",(async()=>{let e=!0;const{account_type:t}=this.props.account;"local"!==t&&(e=await this.probeAccounts()),this.setState({passwordChanged:!1},(()=>{e&&this.props.saveAccount(this.getAccount())}))})),WP(this,"changeName",(e=>{const t=e.target.value;this.setState({name:t})})),WP(this,"changeUrl",(e=>{const t=e.target.value;this.setState({url:t},(()=>{const{urlValid:e}=b.Z.utilities.isUrlValid(t);e?this.logStatus("",YP):this.logStatus((0,ue.Z)("Invalid URL"),$P)}))})),WP(this,"changeUsername",(e=>{const t=e.target.value;t!==this.state.username&&(jP(this.state.url,this.state.username),this.setState({username:t},(()=>{KP(this.state.url,t,this.state.password).then((e=>{e.result||this.logStatus(e.message,QP)}))})))})),this.state={status:YP,statusText:"",password:"",passwordChanged:!1,name:e.account.name,username:e.account.username,url:e.account.url,refreshing:!1}}render(){const{name:e,url:t,account_type:n,username:i}=this.getAccount(),{password:r}=this.state,a=this.state.status===QP?"error":this.state.status===XP?"success":"info";return s.createElement("form",{className:"detail",onSubmit:this.saveAccount,__source:{fileName:HP,lineNumber:220,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:HP,lineNumber:221,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:HP,lineNumber:223,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:HP,lineNumber:224,columnNumber:11}},s.createElement(cP.Z,{type:"text",onChange:this.changeName,label:this.props.searchableStrings.Name,value:e,__source:{fileName:HP,lineNumber:225,columnNumber:13}}))),"local"!==n&&s.createElement("div",{className:"setting-group",__source:{fileName:HP,lineNumber:235,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:HP,lineNumber:236,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.changeUrl,label:this.props.searchableStrings.URL,value:t,__source:{fileName:HP,lineNumber:237,columnNumber:15}}))),(zP(n)||"ical"===n)&&s.createElement("div",{className:"setting-group",__source:{fileName:HP,lineNumber:248,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:HP,lineNumber:249,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.changeUsername,name:"username",label:this.props.searchableStrings.Username,value:i,__source:{fileName:HP,lineNumber:250,columnNumber:15}}))),["vivaldi","caldav","ical"].includes(n)&&s.createElement("div",{className:"setting-group",__source:{fileName:HP,lineNumber:262,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:HP,lineNumber:263,columnNumber:13}},s.createElement(cP.Z,{type:"password",onChange:this.onChangeCredentials,name:"password",label:this.props.searchableStrings.Password,value:r,__source:{fileName:HP,lineNumber:264,columnNumber:15}}))),this.state.statusText&&s.createElement("div",{className:"setting-group-double",__source:{fileName:HP,lineNumber:276,columnNumber:11}},s.createElement(Qc,{type:a,__source:{fileName:HP,lineNumber:277,columnNumber:13}},this.state.statusText))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:HP,lineNumber:284,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Save"),disabled:!this.isAccountChanged(),__source:{fileName:HP,lineNumber:285,columnNumber:9}}),"local"!==n&&s.createElement("input",{type:"button",onClick:this.probeAccounts,value:(0,ue.Z)("Test"),__source:{fileName:HP,lineNumber:292,columnNumber:9}})))}}const JP=qP;var eD=n(32901);const tD=s.createContext({editor:{pageId:NaN},displayDensity:"full",isActivePage:!1,isPanel:!1});var nD=n(34155);function sD(e,t){nD.nextTick((()=>{X.Z.setStatus(e,t)}))}const iD=function(e,t){const[n,i]=s.useState(Gc.Z.getCalendarState(e,t));return s.useEffect((()=>{const t=(t,n)=>{if(!(e>0&&n>0&&n!==e&&void 0!==n))if("importCount"===t)(()=>{for(const e of Gc.Z.getAllImportStates()){const t=e[1],{eventsToImportCount:n,importEventState:s,importedEventsCount:i}=t;if("IMPORT_ERROR"===s)sD((0,ue.Z)("Import Error"));else if("IMPORTING"===s){const e=i.reduce(((e,t)=>e+t),0),t=Math.round(e/n*100);e>0&&sD((0,ue.Z)("Imported $1 of $2 ($3%)",[e,n,t]))}}})();else i(Gc.Z.getCalendarState(e))};return Gc.Z.addChangeListener(t),()=>{Gc.Z.removeChangeListener(t)}}),[e]),n};var rD=n(34155),aD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarStoreSubscription.jsx";function oD(){return oD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oD.apply(this,arguments)}const lD=[P.kCalendarDisplayDensity];const cD=function(e,t){return s.forwardRef((function(n,i){const{pageId:r}=n,o=iD(r,t),l=(0,$Z.Z)(lD),[c,u]=s.useState(V.ZP.getActivePage()?.id===r),m=s.useMemo((()=>({pageId:r,uid:o.editor.uid})),[r,o.editor.uid]);s.useEffect((()=>{const e=()=>{u(V.ZP.getActivePage()?.id===r)};return V.ZP.addChangeListener(e),()=>{V.ZP.removeChangeListener(e),rD.nextTick((()=>a.Z.saveEventEdit(m)))}}),[m,r]);const d=l[P.kCalendarDisplayDensity],h=s.useMemo((()=>({editor:m,displayDensity:d,isActivePage:c,isPanel:!1})),[m,d,c]);return s.createElement(tD.Provider,{value:h,__source:{fileName:aD,lineNumber:82,columnNumber:7}},s.createElement(e,oD({},n,{ref:i},o,{__source:{fileName:aD,lineNumber:83,columnNumber:9}})))}))};var uD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\ConfigureCalendarAccount.jsx";function mD(e){const t=Gc.Z.getDefaultCalendar()?.id,[n,i]=s.useState("local"===(r=e.account)?.account_type?Gc.Z.getCalendars().filter((e=>e.accountId===r.id)):[]);var r;const[o,l]=s.useState({}),c=s.useRef();return c.current={calendars:n,syncedCalendars:o},s.useEffect((()=>{function t(){const t=Gc.Z.getCalendars().filter((t=>t.accountId===e.account?.id));l(Object.fromEntries(t.map((e=>[e.id,!o.hasOwnProperty(e.id)||o[e.id]])))),i(t)}return Gc.Z.addChangeListener(t),()=>{Gc.Z.removeChangeListener(t)}}),[e.account,o]),s.useEffect((()=>()=>{c.current?.calendars.forEach((e=>{const t=!1!==c.current?.syncedCalendars[e.id];t!==e.active&&a.Z.updateCalendar(e.id,{active:t})}))}),[]),s.createElement("form",{className:"detail",onSubmit:e.showTips,__source:{fileName:uD,lineNumber:98,columnNumber:5}},s.createElement("div",{className:"detail-content",__source:{fileName:uD,lineNumber:102,columnNumber:7}},e.onboarding&&s.createElement(s.Fragment,null,s.createElement("span",{className:"ShowMailTipsAndTricks-allSetIcon",dangerouslySetInnerHTML:{__html:cn.mXV},__source:{fileName:uD,lineNumber:104,columnNumber:11}}),s.createElement("h1",{__source:{fileName:uD,lineNumber:108,columnNumber:11}},(0,ue.Z)("Great, You’re All Set!"))),s.createElement("p",{__source:{fileName:uD,lineNumber:110,columnNumber:9}},(0,ue.Z)("We found the following calendars:")),n.length>0&&s.createElement("table",{__source:{fileName:uD,lineNumber:112,columnNumber:11}},s.createElement("thead",{__source:{fileName:uD,lineNumber:113,columnNumber:13}},s.createElement("tr",{__source:{fileName:uD,lineNumber:114,columnNumber:15}},s.createElement("td",{__source:{fileName:uD,lineNumber:115,columnNumber:17}},(0,ue.Z)("Calendar")),s.createElement("td",{__source:{fileName:uD,lineNumber:116,columnNumber:17}},(0,ue.Z)("Sync")),s.createElement("td",{__source:{fileName:uD,lineNumber:117,columnNumber:17}},(0,ue.Z)("show","Hide")),"ical"!==e.account?.account_type&&s.createElement("td",{__source:{fileName:uD,lineNumber:119,columnNumber:19}},(0,ue.Z)("calendar","Default")))),s.createElement("tbody",{__source:{fileName:uD,lineNumber:123,columnNumber:13}},n.map((n=>s.createElement("tr",{key:n.id,__source:{fileName:uD,lineNumber:125,columnNumber:17}},s.createElement("td",{__source:{fileName:uD,lineNumber:126,columnNumber:19}},n.description||n.name),s.createElement("td",{__source:{fileName:uD,lineNumber:127,columnNumber:19}},s.createElement("input",{type:"checkbox",onChange:e=>function(e,t){l({...o,[t.id]:e.target.checked})}(e,n),checked:o[n.id],__source:{fileName:uD,lineNumber:128,columnNumber:21}})),s.createElement("td",{__source:{fileName:uD,lineNumber:134,columnNumber:19}},s.createElement("input",{type:"checkbox",onChange:e=>function(e,t){t.hidden=e.target.checked,a.Z.updateCalendar(t.id,{hidden:t.hidden})}(e,n),checked:n.hidden,__source:{fileName:uD,lineNumber:135,columnNumber:21}})),"ical"!==e.account?.account_type&&s.createElement("td",{__source:{fileName:uD,lineNumber:142,columnNumber:21}},s.createElement("input",{type:"radio",onChange:e=>function(e,t){a.Z.setDefaultCalendarId(t.id)}(0,n),checked:t===n.id,__source:{fileName:uD,lineNumber:143,columnNumber:23}}))))))),0===n.length&&s.createElement("p",{__source:{fileName:uD,lineNumber:156,columnNumber:11}},s.createElement("span",{className:"spinner",dangerouslySetInnerHTML:{__html:cn.H0I},__source:{fileName:uD,lineNumber:157,columnNumber:13}}),(0,ue.Z)("None yet, hold on a moment. If the list is not populated soon then something went wrong.")),e.onboarding&&s.createElement("p",{__source:{fileName:uD,lineNumber:167,columnNumber:11}},(0,ue.Z)("Where to next?"))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:uD,lineNumber:171,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Show Tips and Tricks"),__source:{fileName:uD,lineNumber:172,columnNumber:9}}),s.createElement("input",{type:"button",onClick:e.addAnother,value:(0,ue.Z)("Add Another Account"),__source:{fileName:uD,lineNumber:173,columnNumber:9}}),e.onboarding&&s.createElement("input",{type:"button",value:(0,ue.Z)("Open Vivaldi Calendar"),onClick:()=>{se.Z.showCalendar(),e.done?.()},__source:{fileName:uD,lineNumber:179,columnNumber:11}}),!e.onboarding&&s.createElement("input",{type:"button",value:(0,ue.Z)("calendar","Done"),onClick:()=>{e.done?.()},__source:{fileName:uD,lineNumber:189,columnNumber:11}})))}var dD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CreateCalendarAccount.jsx";function hD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{createLocalAccountAndCalendar:pD}=eD.Z,{ensureAccountType:gD,isCalDAV:bD,savePassword:ND}=Kc.Z,{UNKNOWN:fD,VERIFYING:_D,OK:vD,ERROR:ED}=ru.LB;function CD(e){switch(e){case"vivaldi":return(0,ue.Z)("user@vivaldi.net");case"google":return(0,ue.Z)("user@gmail.com");default:return""}}function wD(e,t="vivaldi"){return{status:fD,statusText:"",name:(0,ue.Z)("New Account"),url:"",account_type:t,username:"",password:"",step:"accountType",initial:e}}class yD extends s.Component{constructor(...e){super(...e),hD(this,"state",wD(!0,this.props.onboarding?"local":"vivaldi")),hD(this,"account",null),hD(this,"changeType",(e=>{const t=gD(e);t!==this.state.account_type?this.setState({account_type:t,url:"",username:"",password:""}):this.setState({account_type:t})})),hD(this,"handleChange",(e=>{const{target:{name:t,value:n}}=e;this.setState({[t]:n})})),hD(this,"selectAccountType",(()=>{const e=eD.Z.getLocalAccount();"local"===this.state.account_type&&e?this.setState({step:"accountSummary"}):this.setState({step:"accountInfo"})})),hD(this,"goBack",(()=>{"accountInfo"===this.state.step&&this.setState({step:"accountType"})})),hD(this,"addAnother",(()=>{this.account=null,this.setState(wD(!1))})),hD(this,"createAccount",(async()=>{const{name:e,url:t,account_type:n,username:s}=this.state;let i,r;if(bD(n))i=await this.createCalDAVAccount();else if("ical"===n)i=await this.createWebCalendar();else if("local"===n){r=(await pD({name:e,url:t,account_type:n,username:s},null)).calendar}i?(this.account=i,this.setState({step:"accountSummary"})):r&&this.setState({step:"accountSummary"})})),hD(this,"log",((e,t)=>{this.setState({statusText:e,status:t})})),hD(this,"createWebCalendar",(async()=>{this.log((0,ue.Z)("Verifying..."),_D);const{name:e,url:t,account_type:n,username:s,password:i}=this.state,r={name:e,url:t,account_type:n,username:s,interval:ru.jC},{foundService:o,statusMessage:l,eventCount:c}=await ZP.Z.probeWebCalendar({id:"",...r},i);let u;return!o&&l?this.log(l,ED):(u=await a.Z.createAccount(r),await ND(r.url,r.username,i),this.log((0,ue.Z)("Connected to Web Calendar, found $1 event(s).",[c]),vD)),u})),hD(this,"createCalDAVAccount",(async()=>{this.log((0,ue.Z)("Verifying..."),_D);const{name:e,url:t,account_type:n,username:s,password:i}=this.state,r={name:e,url:t,account_type:n,username:s,interval:ru.jC};"vivaldi"===n&&-1===s.indexOf("@")&&(r.username=`${s}@vivaldi.net`,this.setState({username:r.username}));let o,l={statusMessage:"",foundService:!1};if("caldav"===n)l=await FP({id:"",...r},i),l.foundService?(r.url=l.url,this.log((0,ue.Z)("Connected to CalDAV, found $1 calendar.","Connected to CalDAV, found $1 calendars.",[l.calendarCount]),vD)):this.log(l.statusMessage,ED);else if("google"===n){if(r.url=(0,ru.A2)(r.username),l=await VP({id:"",...r},i),!l.foundService)return void this.log((0,ue.Z)("Could not connect. Make sure to enter a valid email address."),ED)}else"vivaldi"===n&&(r.url=(0,ru.Mf)(r.username),l=await FP({id:"",...r},i));if(l?.foundService){const e=await ND(r.url,r.username,i);this.setState({url:r.url,password:i}),e.result?(o=await a.Z.createAccount(r),this.log((0,ue.Z)("Account created"),vD)):this.log((0,ue.Z)("Error saving password"),ED)}else this.log(l.statusMessage,_D);return o}))}render(){const{name:e,url:t,account_type:n,username:i}=this.state,{password:r}=this.state,a=["vivaldi","google","caldav","ical"];eD.Z.getLocalAccount()||a.unshift("local");const o=this.state.status===ED?"error":this.state.status===vD?"success":"info";let l;if("accountInfo"===this.state.step)switch(this.state.account_type){case"vivaldi":l=(0,ue.Z)("Vivaldi.net account, OK - now enter your login details below and let us fetch your calendars.");break;case"caldav":l=(0,ue.Z)("CalDAV account, OK - now enter the server URL and your login details below and let us fetch your calendars.");break;case"google":l=(0,ue.Z)("Google account, OK - now enter your username below and then log in using the google dialog shown.");break;case"ical":l=(0,ue.Z)("Web calendar, OK - now enter the calendar URL below and let us fetch your events.")}return s.createElement(s.Fragment,null,"accountType"===this.state.step&&s.createElement("form",{className:"detail",onSubmit:this.selectAccountType,__source:{fileName:dD,lineNumber:268,columnNumber:9}},s.createElement("div",{className:"detail-content",__source:{fileName:dD,lineNumber:269,columnNumber:11}},this.props.onboarding&&s.createElement(s.Fragment,null,s.createElement("img",{src:"/resources/vivaldi_calendar_default.png",alt:"",width:"64",height:"64",__source:{fileName:dD,lineNumber:271,columnNumber:15}}),this.state.initial&&s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:dD,lineNumber:273,columnNumber:17}},(0,ue.Z)("Welcome to Vivaldi Calendar")),s.createElement("p",{__source:{fileName:dD,lineNumber:274,columnNumber:17}},(0,ue.Z)("Let’s get you going by adding your first account."))),!this.state.initial&&s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:dD,lineNumber:277,columnNumber:17}},(0,ue.Z)("Vivaldi Calendar")),s.createElement("p",{__source:{fileName:dD,lineNumber:278,columnNumber:17}},(0,ue.Z)("Great, let’s add another account.")))),!this.props.onboarding&&s.createElement("p",{__source:{fileName:dD,lineNumber:282,columnNumber:15}},(0,ue.Z)("Select account type to add.")),s.createElement("div",{className:"toolbar toolbar-pills toolbar-wrap",__source:{fileName:dD,lineNumber:284,columnNumber:13}},this.props.onboarding&&!a.includes("local")&&s.createElement(ko,{isPressed:"local"===this.state.account_type,title:this.props.searchableStrings.local,onClick:()=>this.changeType("local"),__source:{fileName:dD,lineNumber:286,columnNumber:17}}),a.map((e=>s.createElement(ko,{key:e,isPressed:e===this.state.account_type,title:this.props.searchableStrings[e],onClick:()=>this.changeType(e),__source:{fileName:dD,lineNumber:294,columnNumber:17}}))))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:dD,lineNumber:304,columnNumber:11}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Continue"),autoFocus:!0,__source:{fileName:dD,lineNumber:305,columnNumber:13}}))),"accountInfo"===this.state.step&&s.createElement("form",{className:"detail",onSubmit:this.createAccount,__source:{fileName:dD,lineNumber:311,columnNumber:9}},s.createElement("div",{className:"detail-content",__source:{fileName:dD,lineNumber:312,columnNumber:11}},this.props.onboarding&&s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:dD,lineNumber:314,columnNumber:15}},(0,ue.Z)("Add Your First Calendar Account")),s.createElement("p",{__source:{fileName:dD,lineNumber:315,columnNumber:15}},l)),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:dD,lineNumber:317,columnNumber:13}},s.createElement("div",{className:"setting-group",__source:{fileName:dD,lineNumber:318,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:dD,lineNumber:319,columnNumber:17}},s.createElement(cP.Z,{type:"text",name:"name",onChange:this.handleChange,label:this.props.searchableStrings.Name,value:e,autoFocus:!0,__source:{fileName:dD,lineNumber:320,columnNumber:19}}))),["caldav","ical"].includes(n)&&s.createElement("div",{className:"setting-group",__source:{fileName:dD,lineNumber:331,columnNumber:17}},s.createElement("div",{className:"setting-single",__source:{fileName:dD,lineNumber:332,columnNumber:19}},s.createElement(cP.Z,{type:"text",name:"url",onChange:this.handleChange,label:this.props.searchableStrings.URL,value:t,__source:{fileName:dD,lineNumber:333,columnNumber:21}})))),(bD(n)||"ical"===n)&&s.createElement("div",{className:"setting-group unlimited",__source:{fileName:dD,lineNumber:346,columnNumber:15}},s.createElement("div",{className:"setting-group",__source:{fileName:dD,lineNumber:347,columnNumber:17}},s.createElement("div",{className:"setting-single",__source:{fileName:dD,lineNumber:348,columnNumber:19}},s.createElement(cP.Z,{type:"text",name:"username",onChange:this.handleChange,label:this.props.searchableStrings.Username,value:i,placeholder:CD(n),__source:{fileName:dD,lineNumber:349,columnNumber:21}}))),["vivaldi","caldav","ical"].includes(n)&&s.createElement("div",{className:"setting-group",__source:{fileName:dD,lineNumber:361,columnNumber:19}},s.createElement("div",{className:"setting-single",__source:{fileName:dD,lineNumber:362,columnNumber:21}},s.createElement(cP.Z,{type:"password",name:"password",onChange:this.handleChange,label:this.props.searchableStrings.Password,value:r,__source:{fileName:dD,lineNumber:363,columnNumber:23}})))),this.state.statusText&&s.createElement("div",{className:"setting-group-double",__source:{fileName:dD,lineNumber:377,columnNumber:15}},s.createElement(Qc,{type:o,__source:{fileName:dD,lineNumber:378,columnNumber:17}},this.state.statusText))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:dD,lineNumber:385,columnNumber:11}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Add Account"),__source:{fileName:dD,lineNumber:386,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.goBack,value:(0,ue.Z)("navigation","Back"),__source:{fileName:dD,lineNumber:387,columnNumber:13}}))),"accountSummary"===this.state.step&&s.createElement(mD,{account:this.account,addAnother:this.addAnother,done:this.props.done,showTips:this.props.showTips,onboarding:this.props.onboarding,__source:{fileName:dD,lineNumber:393,columnNumber:9}}))}}const SD=yD;var TD=n(16489),kD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\MasterDetailListItem.jsx";class ID extends s.PureComponent{render(){let e=this.props.iconPath;return"gmail.com"===e?e="ssl.gstatic.com/ui/v1/icons/mail/images/favicon5.ico":"googleusercontent.com"===e?e="google.com/favicon.ico":e&&(e=Os(e)),s.createElement(s.Fragment,null,s.createElement(Ls,{size:32,className:"item-icon",url:e?`https://${e}`:this.props.iconFallbackPath,fallbackUrl:this.props.iconFallbackPath,style:this.props.style,loadType:"faviconSkipCache",__source:{fileName:kD,lineNumber:28,columnNumber:9}}),s.createElement("div",{className:"item-title",__source:{fileName:kD,lineNumber:39,columnNumber:9}},this.props.title),s.createElement("div",{className:"item-meta",__source:{fileName:kD,lineNumber:42,columnNumber:9}},this.props.meta))}}const AD=ID;var ZD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ShowCalendarTipsAndTricks.jsx";const PD=["editor","density","help"];function DD(e){const[t,i]=s.useState(A.ZP.get(P.kCalendarEditMode));return s.createElement(s.Fragment,null,e.onboarding&&s.createElement("h3",{__source:{fileName:ZD,lineNumber:38,columnNumber:7}},(0,ue.Z)("Calendar Settings")),s.createElement("h1",{__source:{fileName:ZD,lineNumber:40,columnNumber:5}},(0,ue.Z)("Adding Events")),s.createElement("p",{__source:{fileName:ZD,lineNumber:41,columnNumber:5}},(0,ue.Z)("We’re all about choice. By default, we add and edit events inline, right inside the calendar without any popups.")),s.createElement("div",{className:"ShowCalendarTipsAndTricks-Selectbox",__source:{fileName:ZD,lineNumber:42,columnNumber:5}},s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":"inline"===t}),onClick:function(){i("inline"),st.Z.set(P.kCalendarEditMode,"inline")},type:"button",__source:{fileName:ZD,lineNumber:43,columnNumber:7}},s.createElement("div",{className:"selectbox-image",__source:{fileName:ZD,lineNumber:50,columnNumber:9}},s.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:n(36502)},__source:{fileName:ZD,lineNumber:51,columnNumber:9}}),s.createElement("div",{dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZD,lineNumber:56,columnNumber:11}})),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZD,lineNumber:58,columnNumber:9}},(0,ue.Z)("Inline Editor"))),s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":"popup"===t}),onClick:function(){i("popup"),st.Z.set(P.kCalendarEditMode,"popup")},type:"button",__source:{fileName:ZD,lineNumber:62,columnNumber:7}},s.createElement("div",{className:"selectbox-image",__source:{fileName:ZD,lineNumber:69,columnNumber:9}},s.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:n(46647)},__source:{fileName:ZD,lineNumber:70,columnNumber:9}}),s.createElement("div",{dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZD,lineNumber:75,columnNumber:11}})),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZD,lineNumber:77,columnNumber:9}},(0,ue.Z)("Dialog Editor")))))}function MD(e){const[t,i]=s.useState(A.ZP.get(P.kCalendarDisplayDensity));return s.createElement(s.Fragment,null,e.onboarding&&s.createElement("h3",{__source:{fileName:ZD,lineNumber:97,columnNumber:7}},(0,ue.Z)("Calendar Settings")),s.createElement("h1",{__source:{fileName:ZD,lineNumber:99,columnNumber:5}},(0,ue.Z)("Calendar Density")),s.createElement("p",{__source:{fileName:ZD,lineNumber:100,columnNumber:5}},(0,ue.Z)("We can show you all the details from an event right in the calendar, or just the title. It’s up to you.")),s.createElement("div",{className:"ShowCalendarTipsAndTricks-Selectbox",__source:{fileName:ZD,lineNumber:101,columnNumber:5}},s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":"full"===t}),onClick:function(){i("full"),st.Z.set(P.kCalendarDisplayDensity,"full")},type:"button",__source:{fileName:ZD,lineNumber:102,columnNumber:7}},s.createElement("div",{className:"selectbox-image",__source:{fileName:ZD,lineNumber:109,columnNumber:9}},s.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:n(87922)},__source:{fileName:ZD,lineNumber:110,columnNumber:9}}),s.createElement("div",{dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZD,lineNumber:115,columnNumber:11}})),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZD,lineNumber:117,columnNumber:9}},(0,ue.Z)("Full Details"))),s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":"minimal"===t}),onClick:function(){i("minimal"),st.Z.set(P.kCalendarDisplayDensity,"minimal")},type:"button",__source:{fileName:ZD,lineNumber:121,columnNumber:7}},s.createElement("div",{className:"selectbox-image",__source:{fileName:ZD,lineNumber:128,columnNumber:9}},s.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:n(18767)},__source:{fileName:ZD,lineNumber:129,columnNumber:9}}),s.createElement("div",{dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZD,lineNumber:134,columnNumber:11}})),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZD,lineNumber:136,columnNumber:9}},(0,ue.Z)("Title Only")))))}function OD(e){return s.createElement(s.Fragment,null,e.onboarding&&s.createElement("h3",{__source:{fileName:ZD,lineNumber:147,columnNumber:7}},(0,ue.Z)("Calendar Help")),s.createElement("h1",{__source:{fileName:ZD,lineNumber:149,columnNumber:5}},(0,ue.Z)("Get All the Help You Need")),s.createElement("div",{className:"ShowCalendarTipsAndTricks-WithImage",__source:{fileName:ZD,lineNumber:150,columnNumber:5}},s.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:cn.Kuf},__source:{fileName:ZD,lineNumber:151,columnNumber:7}}),s.createElement("div",{className:"ShowCalendarTipsAndTricks-TextBlock",__source:{fileName:ZD,lineNumber:154,columnNumber:7}},s.createElement("p",{__source:{fileName:ZD,lineNumber:155,columnNumber:9}},(0,ue.Z)("Want more tips and tricks? Our Help pages contain all the documentation you need.")),s.createElement("p",{__source:{fileName:ZD,lineNumber:156,columnNumber:9}},s.createElement("a",{onClick:()=>$.Z.openURL("https://help.vivaldi.com/calendar/"),__source:{fileName:ZD,lineNumber:156,columnNumber:12}},(0,ue.Z)("Visit our Help pages for Calendar."))))))}function xD(e){const[t,n]=s.useState(PD[0]);const i=t===PD[PD.length-1];return s.createElement("div",{className:"ShowCalendarTipsAndTricks",__source:{fileName:ZD,lineNumber:178,columnNumber:5}},s.createElement("form",{className:"detail",onSubmit:function(){n(PD[PD.indexOf(t)+1])},__source:{fileName:ZD,lineNumber:179,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:ZD,lineNumber:180,columnNumber:9}},"editor"===t&&s.createElement(DD,{onboarding:e.onboarding,__source:{fileName:ZD,lineNumber:181,columnNumber:33}}),"density"===t&&s.createElement(MD,{onboarding:e.onboarding,__source:{fileName:ZD,lineNumber:182,columnNumber:34}}),"help"===t&&s.createElement(OD,{onboarding:e.onboarding,__source:{fileName:ZD,lineNumber:183,columnNumber:31}})),s.createElement("div",{className:"detail-toolbar",__source:{fileName:ZD,lineNumber:186,columnNumber:9}},!i&&s.createElement("input",{type:"submit",value:(0,ue.Z)("Next tip"),__source:{fileName:ZD,lineNumber:188,columnNumber:13}}),s.createElement("input",{type:i?"submit":"button",value:(0,ue.Z)("Open Vivaldi Calendar"),onClick:()=>{se.Z.showCalendar(),e?.onClose?.()},__source:{fileName:ZD,lineNumber:193,columnNumber:11}}),e.onClose&&s.createElement("input",{type:"button",value:(0,ue.Z)("calendar","Done"),onClick:()=>{e?.onClose?.()},__source:{fileName:ZD,lineNumber:202,columnNumber:13}}))))}var LD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\ListCalendarAccounts.jsx";function RD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BD(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,FD(e,t,"set"),n),n}function FD(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const{startDeletingCalendars:UD}=eD.Z,{prepareForDeleteAccount:VD}=AP.Z,HD="/resources/vivaldi_calendar_default.png",WD={...ru.d3,"Calendar Type":(0,ue.Z)("Calendar Type"),Name:(0,ue.Z)("calendar","Name"),URL:(0,ue.Z)("Address"),Password:(0,ue.Z)("Password"),Username:(0,ue.Z)("Username"),"Refresh Interval":(0,ue.Z)("Refresh Interval"),Timezone:(0,ue.Z)("Timezone"),Description:(0,ue.Z)("Description")};var zD=new WeakMap;class GD extends s.Component{constructor(...e){super(...e),RD(this,"state",{deletingAccount:"",isCreating:!1,setupStep:"setup"}),zD.set(this,{writable:!0,value:!1}),RD(this,"onCreateItem",(()=>{BD(this,zD,!0),this.setState({isCreating:!0,setupStep:"setup"})})),RD(this,"onCancelCreateItem",(()=>{"setup"===this.state.setupStep?this.setState({isCreating:!1}):this.setState({isCreating:!1,setupStep:"setup"})})),RD(this,"showTips",(()=>{this.setState({setupStep:"tips"})})),RD(this,"done",(()=>{this.setState({setupStep:"setup"})})),RD(this,"saveAccount",(e=>{a.Z.updateAccount(e)})),RD(this,"getFallbackIcon",(e=>"caldav"===e?"/resources/calendar_caldav.png":"ical"===e?"/resources/calendar_web.png":HD)),RD(this,"renderListItem",((e,t)=>{const n=Kc.Z.ensureAccountType(t.account_type);let i="";if("vivaldi"===n||"google"===n){const{hostname:e}=Is.parse(t.url);i=(e||"").split(".").slice(-2).join(".")}return s.createElement(AD,{title:t.name,meta:ru.d3[n],iconPath:i,iconFallbackPath:this.getFallbackIcon(n),__source:{fileName:LD,lineNumber:132,columnNumber:7}})})),RD(this,"renderCreateListItem",(()=>s.createElement(AD,{title:(0,ue.Z)("New Account"),meta:(0,ue.Z)("Setup in progress..."),iconFallbackPath:HD,style:{opacity:.3},__source:{fileName:LD,lineNumber:143,columnNumber:7}}))),RD(this,"renderContent",((e,t)=>{const n=this.props.accounts[e],i=lt()(Object.values(n).reduce(((e,t)=>e+t)));return s.createElement(s.Fragment,null,"setup"===this.state.setupStep&&s.createElement(JP,{key:i,filter:this.props.filter,searchableStrings:t,account:n,saveAccount:this.saveAccount,__source:{fileName:LD,lineNumber:165,columnNumber:11}}),"configuration"===this.state.setupStep&&s.createElement(mD,{account:n,addAnother:this.onCreateItem,done:this.done,showTips:this.showTips,onboarding:!1,__source:{fileName:LD,lineNumber:174,columnNumber:11}}),"tips"===this.state.setupStep&&s.createElement(xD,{onClose:this.done,onboarding:!1,__source:{fileName:LD,lineNumber:183,columnNumber:11}}))})),RD(this,"remapAccounts",(()=>this.props.accounts.map((e=>({...e,key:e.id}))))),RD(this,"renderCreate",(e=>s.createElement(SD,{done:this.onCancelCreateItem,filter:this.props.filter,searchableStrings:e,__source:{fileName:LD,lineNumber:197,columnNumber:5}}))),RD(this,"deleteAccountDialog",(e=>{const{account:t,onClose:n}=e,i=this.state.deletingAccount===t.id;return s.createElement("div",{__source:{fileName:LD,lineNumber:219,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:LD,lineNumber:220,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:LD,lineNumber:221,columnNumber:11}},(0,ue.Z)("Are you sure you want to remove this account and its events?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:LD,lineNumber:225,columnNumber:9}},s.createElement("p",{__source:{fileName:LD,lineNumber:226,columnNumber:11}},(0,ue.Z)("This operation cannot be undone."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:LD,lineNumber:228,columnNumber:9}},s.createElement("input",{type:"button",className:"danger",disabled:i,onClick:async()=>{this.setState({deletingAccount:t.id}),"local"===t.account_type?UD(t.id):VD({accountId:t.id,onRemoval:UD})},value:i?(0,ue.Z)("Removing Account"):(0,ue.Z)("verb","Remove"),autoFocus:!0,__source:{fileName:LD,lineNumber:229,columnNumber:11}}),s.createElement("input",{type:"button",onClick:n,value:(0,ue.Z)("Cancel"),__source:{fileName:LD,lineNumber:237,columnNumber:11}})))}))}componentDidUpdate(e){var t;(function(e,t){return t.get?t.get.call(e):t.value})(t=this,FD(t,zD,"get"))&&e.accounts.length<this.props.accounts.length&&this.setState({setupStep:"configuration"})}render(){return s.createElement(TD.Z,{title:(0,ue.Z)("Calendar Accounts"),style:{height:320},className:"account-settings",deleteDialog:this.deleteAccountDialog,addTipString:(0,ue.Z)("Add Account"),deleteTipString:(0,ue.Z)("tooltip","Delete Account"),emptyListGraphic:n(28888),emptyListString:(0,ue.Z)("No accounts added"),filter:this.props.filter,items:this.remapAccounts(),masterLayout:0,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,isCreating:this.state.isCreating,onCreateItem:this.onCreateItem,onCancelCreateItem:this.onCancelCreateItem,renderCreate:this.renderCreate,contentStrings:WD,createStrings:WD,onRemove:qo.default,__source:{fileName:LD,lineNumber:245,columnNumber:7}})}}const KD=cD(GD);var jD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorPicker.jsx";function YD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $D extends s.Component{constructor(e){super(e),YD(this,"handleClickOutside",(e=>{this.props.hide(this.props.name,e)})),YD(this,"_abort",(()=>{this.props.setColor(to()(this.state.originalColor),this.props.name),this.props.hide(this.props.name)})),YD(this,"getColorFromPlot",(e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top,i=(t.height-s)/t.height,r=n/t.width;r>1||r<0||i>1||i<0?this.setState({dragging:!1}):this.setState({s:r,v:i},(()=>{const e=to().hsv(this.state.h,r,i);this.props.setColor(e,this.props.name,!0)}))})),YD(this,"startPlotMove",(e=>{this.getColorFromPlot(e),this.setState({dragging:!0})})),YD(this,"plotMove",(e=>{this.state.dragging&&this.getColorFromPlot(e)})),YD(this,"stopPlotMove",(()=>{this.setState({dragging:!1})})),YD(this,"onPlotRecticleKeyDown",(e=>{if("Enter"===e.key||"Tab"===e.key&&e.shiftKey)return this.props.hide(this.props.name),void e.preventDefault();if("Escape"===e.key)return e.preventDefault(),void this._abort();if("ArrowUp"===e.key||"ArrowRight"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key){e.preventDefault();const t=e.shiftKey?10:1;let n=this.state.s,s=this.state.v;if("ArrowUp"===e.key?s+=.01*t:"ArrowDown"===e.key?s-=.01*t:"ArrowRight"===e.key?n+=.01*t:"ArrowLeft"===e.key&&(n-=.01*t),n>1||n<0||s>1||s<0)return;this.setState({s:n,v:s},(()=>{const e=to().hsv(this.state.h,n,s);this.props.setColor(e,this.props.name)}))}})),YD(this,"onHueSliderChange",(e=>{this.setState({h:e.currentTarget.value},(()=>{const e=to().hsv(this.state.h,this.state.s,this.state.v);this.props.setColor(e,this.props.name)}))})),YD(this,"onSystemPickerChange",(e=>{const t=to()(e.currentTarget.value);this.setState({h:t.get("hsv.h"),s:t.get("hsv.s"),v:t.get("hsv.v")},(()=>{this.props.setColor(t,this.props.name,!0)}))})),YD(this,"onSystemPickerKeyDown",(e=>{"Escape"===e.key?(e.preventDefault(),this._abort()):"Tab"!==e.key||e.shiftKey||this.props.hide(this.props.name)}));const t=to()(this.props.color),n=t.get("hsv.h");this.state={dragging:!1,originalColor:this.props.color,h:Number.isNaN(n)?0:n,s:t.get("hsv.s"),v:t.get("hsv.v")}}componentDidMount(){this.context.addEventListener("mouseup",this.stopPlotMove),this.refs.reticle.focus()}shouldComponentUpdate(e,t){if(!(0,nd.default)(this.state,t))return!0;if(this.props.name!==e.name)return!0;if(this.props.color!==e.color){const t=to().hsv(this.state.h,this.state.s,this.state.v);if(!(0,nd.default)(t.hex(),e.color))return!0}return!1}componentWillUnmount(){this.context.removeEventListener("mouseup",this.stopPlotMove)}render(){if(!this.props.name||!this.props.color)return null;const e=to().hsv(this.state.h,this.state.s,this.state.v),t=128-128*this.state.v,n=`translateX(${128*this.state.s}px)translateY(${t}px)`;return s.createElement("div",{className:`colorpicker ignore-onclickoutside-${this.props.name}`,__source:{fileName:jD,lineNumber:206,columnNumber:7}},s.createElement("div",{className:"colorpicker-plot",onMouseDown:this.startPlotMove,onMouseMove:this.plotMove,style:{backgroundColor:to().hsv(this.state.h,1,1).hex()},__source:{fileName:jD,lineNumber:207,columnNumber:9}},s.createElement("button",{type:"button",ref:"reticle",className:"colorpicker-plot-reticle",onKeyDown:this.onPlotRecticleKeyDown,style:{transform:n},__source:{fileName:jD,lineNumber:211,columnNumber:11}})),s.createElement("input",{type:"range",className:"rangeHue",min:0,max:359,value:this.state.h,onMouseDown:this.onHueSliderChange,onChange:this.onHueSliderChange,__source:{fileName:jD,lineNumber:218,columnNumber:9}}),s.createElement("input",{type:"color",title:(0,ue.Z)("Show system color picker"),className:"colorpicker-system",value:e.hex(),onKeyDown:this.onSystemPickerKeyDown,onChange:this.onSystemPickerChange,__source:{fileName:jD,lineNumber:226,columnNumber:9}}))}}YD($D,"contextType",Vs.Z);const XD=(0,so.Z)($D);var QD="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiDropdown.jsx";function qD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JD({className:e}){return s.createElement("span",{className:e,dangerouslySetInnerHTML:{__html:cn.V34},__source:{fileName:QD,lineNumber:30,columnNumber:10}})}function eM({item:e}){return s.createElement("span",{className:"VivaldiDropdown-SelectedValue",__source:{fileName:QD,lineNumber:34,columnNumber:10}},s.createElement("img",{src:e.icon,className:"VivaldiDropdown-SelectedValue-Icon",__source:{fileName:QD,lineNumber:35,columnNumber:5}}),s.createElement("span",{className:"VivaldiDropdown-SelectedValue-Title",__source:{fileName:QD,lineNumber:36,columnNumber:5}},e.name),s.createElement(JD,{className:"VivaldiDropdown-SelectedValue-Arrow",__source:{fileName:QD,lineNumber:37,columnNumber:5}}))}class tM extends s.Component{constructor(...e){super(...e),qD(this,"refButton",s.createRef()),qD(this,"state",{isExpanded:!1}),qD(this,"onItemActivated",(({id:e})=>{this.props.onValueChange(e),this.collapse()})),qD(this,"collapse",(()=>{this.setState({isExpanded:!1}),this.focus()})),qD(this,"expand",(()=>{this.setState({isExpanded:!0})})),qD(this,"handleKeyDown",(e=>{switch(e.which){case $s.Z.KEY_UP:case $s.Z.KEY_DOWN:this.expand()}})),qD(this,"focus",(()=>{this.refButton.current?.focus()}))}render(){const e=this.props.items.find((e=>e.id===this.props.value));return s.createElement("div",{className:bn()("VivaldiDropdown",this.props.className),__source:{fileName:QD,lineNumber:80,columnNumber:7}},s.createElement("button",{type:"button",ref:this.refButton,disabled:this.props.disabled,onMouseDown:()=>this.expand(),title:this.props.tooltip,className:bn()("VivaldiDropdown-Button",{"VivaldiDropdown-Button--isActive":this.state.isExpanded}),onKeyDown:this.handleKeyDown,__source:{fileName:QD,lineNumber:81,columnNumber:9}},this.props.hideButtonText?s.createElement(JD,{className:"VivaldiDropdown-SelectedValue-Arrow",__source:{fileName:QD,lineNumber:93,columnNumber:15}}):s.createElement(eM,{item:e||this.props.items[0],__source:{fileName:QD,lineNumber:94,columnNumber:15}})),this.state.isExpanded&&s.createElement(E_,{className:"VivaldiDropdown-DropdownMenu",items:this.props.items,onClose:this.collapse,onItemActivated:this.onItemActivated,selectedItem:e,__source:{fileName:QD,lineNumber:98,columnNumber:11}}))}}const nM=tM;var sM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorEditor.jsx";function iM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rM=/^([0-9a-f]{3}){1,2}$/i;class aM extends s.Component{constructor(e){super(e),iM(this,"createColorIcon",(e=>`<svg width="16" height="16" viewBox="0 0 16 16">\n      <rect x="0" y="0" width="16" height="16" rx="2" ry="2" fill="${e}" />\n    </svg>`)),iM(this,"hexInputEvents",(e=>{let t=e.currentTarget.value;if("#"===t.charAt(0)&&(t=t.substring(1)),t.length>6&&(t=t.substring(0,6)),this.setState({color:t}),6===t.length){const e=to()(t);e&&this.props.setColor(e,this.props.colorKey)}})),iM(this,"toggleColorPicker",(()=>{this.setState((e=>(this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!e.isPickerVisible),{isPickerVisible:!e.isPickerVisible})))})),iM(this,"hideColorPicker",((e,t)=>{t.target!==this.refs.colorToggle&&(t.stopPropagation(),this.setState({isPickerVisible:!1}),this.refs.colorToggle.focus(),this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!1))})),iM(this,"onColorPicked",((e,t,n=!1)=>{this.setState({color:e.hex().substring(1)}),n?this.debouncedSetColor(e,t):this.props.setColor(e,t)})),iM(this,"onDropdownColorSelected",(e=>{const t=to()(e);t&&(this.setState({color:t.hex().substring(1)}),this.props.setColor(t,this.props.colorKey))})),this.state={isPickerVisible:!1,color:e.colorValue.substring(1)},this.debouncedSetColor=(0,za.Z)(this.props.setColor,100,{leading:!1}),e.predefinedColors&&(this.dropdownColors=e.predefinedColors.map((e=>({type:"Normal",name:e.name,iconSVG:this.createColorIcon(e.value),noPrettifying:!0,id:e.value}))))}componentWillUnmount(){this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!1)}render(){const e=this.props.colorKey,t=this.props.predefinedColors&&this.props.predefinedColors.length>0;let{color:n}=this.state;return rM.test(n)||(n=this.props.colorValue.replace("#","")),s.createElement("div",{className:bn()("ColorEditor",{"with-dropdown":t}),__source:{fileName:sM,lineNumber:142,columnNumber:7}},this.props.label&&s.createElement("label",{htmlFor:e,className:"color-name",__source:{fileName:sM,lineNumber:146,columnNumber:11}},this.props.label),s.createElement("div",{className:"ColorEditor-ColorPickerContainer",__source:{fileName:sM,lineNumber:151,columnNumber:9}},s.createElement("button",{type:"button",className:"color-preview",disabled:this.props.disabled,tabIndex:0,ref:"colorToggle",onClick:this.toggleColorPicker,style:{backgroundColor:`#${n}`},__source:{fileName:sM,lineNumber:152,columnNumber:11}}),this.state.isPickerVisible&&s.createElement(XD,{key:e,name:e,color:`#${n}`,setColor:this.onColorPicked,hide:this.hideColorPicker,__source:{fileName:sM,lineNumber:163,columnNumber:13}}),t&&s.createElement(nM,{className:"ColorEditor-VivaldiDropdown",disabled:this.props.disabled,items:this.dropdownColors,onValueChange:this.onDropdownColorSelected,tooltip:(0,ue.Z)("Choose a Color"),value:n,hideButtonText:!0,__source:{fileName:sM,lineNumber:172,columnNumber:13}})),s.createElement("div",{className:"ColorEditor-HexTextInput",__source:{fileName:sM,lineNumber:184,columnNumber:9}},s.createElement("span",{className:"ColorEditor-HexTextInput-Octothorpe",__source:{fileName:sM,lineNumber:185,columnNumber:11}},"#"),s.createElement("input",{className:"ColorEditor-HexTextInput-InputField",type:"text",id:e,disabled:this.props.disabled,value:this.state.color,spellCheck:"false",onChange:this.hexInputEvents,__source:{fileName:sM,lineNumber:186,columnNumber:11}})))}}const oM=aM;var lM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CalendarItem.jsx";function cM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{isLocalCalendar:uM}=Kc.Z,{UNKNOWN:mM,OK:dM,ERROR:hM}=ru.LB;class pM extends s.Component{constructor(...e){super(...e),cM(this,"state",{status:mM,statusText:"",calendar:this.props.calendar}),cM(this,"isCalendarChanged",(()=>{const e=this.props.calendar;if(!e)return!1;return!(this.state.calendar.name===e.name&&this.state.calendar.description===e.description&&this.state.calendar.color===e.color&&this.state.calendar.hidden===e.hidden&&this.state.calendar.active===e.active&&this.state.calendar.timezone===e.timezone)})),cM(this,"setCalendarProperty",(e=>{this.setState((t=>({calendar:{...t.calendar,...e}})))})),cM(this,"onChange",(e=>{const{name:t,value:n}=e.target,s={},i="iconindex"===t?isNaN(n)?0:parseInt(n):n;s[t]=i,this.setCalendarProperty(s)})),cM(this,"logStatus",((e,t)=>{this.setState({status:t,statusText:e})})),cM(this,"saveCalendar",(()=>{this.state.calendar.description?this.props.save(this.state.calendar):this.setState({statusText:(0,ue.Z)("Calendar Name cannot be empty")})})),cM(this,"setColor",((e,t,n=!1)=>{this.setCalendarProperty({color:e.hex()})})),cM(this,"onChangeCheckbox",(e=>{const{checked:t,name:n}=e.target;this.setState((e=>({calendar:{...e.calendar,[n]:t}})))})),cM(this,"exportCalendar",(()=>a.Z.exportEvents(this.state.calendar.id)))}render(){const{description:e,color:t,hidden:n,active:i,id:r}=this.state.calendar,a=this.state.status===hM?"error":this.state.status===dM?"success":"info";return s.createElement("form",{className:"detail",onSubmit:this.saveCalendar,__source:{fileName:lM,lineNumber:126,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:lM,lineNumber:127,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:lM,lineNumber:129,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:lM,lineNumber:130,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.onChange,name:"description",label:this.props.searchableStrings["Calendar Name"],value:e,disabled:this.props.readOnly,__source:{fileName:lM,lineNumber:131,columnNumber:15}})),s.createElement("div",{className:"setting-single",__source:{fileName:lM,lineNumber:140,columnNumber:13}},s.createElement("label",{__source:{fileName:lM,lineNumber:141,columnNumber:15}},s.createElement("input",{type:"checkbox",name:"hidden",checked:n,onChange:this.onChangeCheckbox,__source:{fileName:lM,lineNumber:142,columnNumber:17}}),s.createElement("span",{__source:{fileName:lM,lineNumber:148,columnNumber:17}},this.props.searchableStrings["Hide from Calendar View"])))),s.createElement("div",{className:"setting-group",__source:{fileName:lM,lineNumber:152,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:lM,lineNumber:153,columnNumber:13}},s.createElement(oM,{label:this.props.searchableStrings.Color,colorKey:"color",colorValue:t||Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)?.colorHighlightBg||no.Z.getDefaultTheme().colorHighlightBg,setColor:this.setColor,predefinedColors:ru.hx,__source:{fileName:lM,lineNumber:154,columnNumber:15}}))),!uM(r)&&s.createElement("div",{className:"setting-group",__source:{fileName:lM,lineNumber:168,columnNumber:11}},s.createElement("h3",{__source:{fileName:lM,lineNumber:169,columnNumber:13}},(0,ue.Z)("Sync Calendar")),s.createElement("div",{className:"setting-single",__source:{fileName:lM,lineNumber:170,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Active"),__source:{fileName:lM,lineNumber:171,columnNumber:15}},s.createElement("input",{type:"checkbox",name:"active",checked:i,onChange:this.onChangeCheckbox,__source:{fileName:lM,lineNumber:172,columnNumber:17}}),s.createElement("span",{__source:{fileName:lM,lineNumber:178,columnNumber:17}},this.props.searchableStrings.Active)))),this.state.statusText&&s.createElement("div",{className:"setting-group-double",__source:{fileName:lM,lineNumber:184,columnNumber:13}},s.createElement(Qc,{type:a,__source:{fileName:lM,lineNumber:185,columnNumber:15}},this.state.statusText))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:lM,lineNumber:191,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Save"),disabled:!this.isCalendarChanged(),__source:{fileName:lM,lineNumber:192,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.exportCalendar,value:(0,ue.Z)("Export Calendar"),__source:{fileName:lM,lineNumber:197,columnNumber:11}})))}}const gM=pM;var bM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CreateCalendar.jsx";function NM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{getCalendarCreateParams:fM}=eD.Z;class _M extends s.PureComponent{constructor(e){super(e),NM(this,"setColor",((e,t,n=!1)=>this.setCalendarProperty(t,e.hex()))),NM(this,"onAccountChange",(e=>{this.setCalendarProperty("accountId",e.target.value)})),NM(this,"onCalendarChange",(e=>{const{name:t,value:n}=e.target,s="iconindex"===t?isNaN(n)?0:parseInt(n):n;this.setCalendarProperty(t,s)})),NM(this,"setCalendarProperty",((e,t)=>this.setState((n=>({calendar:{...n.calendar,[e]:t}}))))),NM(this,"createCalendar",(()=>{this.props.createCalendar(this.state.calendar)})),NM(this,"isCalendarValid",(()=>Boolean(this.state.calendar.description))),this.state={calendar:fM()}}render(){const{color:e,description:t,accountId:n}=this.state.calendar,i=Gc.Z.getAccounts();return s.createElement("form",{className:"detail",onSubmit:this.createCalendar,__source:{fileName:bM,lineNumber:67,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:bM,lineNumber:68,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:bM,lineNumber:69,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:bM,lineNumber:70,columnNumber:13}},i.length>1&&s.createElement("label",{className:"floating-label",__source:{fileName:bM,lineNumber:72,columnNumber:17}},s.createElement("span",{__source:{fileName:bM,lineNumber:73,columnNumber:19}},(0,ue.Z)("Account")),s.createElement("select",{onChange:this.onAccountChange,value:n,__source:{fileName:bM,lineNumber:74,columnNumber:19}},i.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:bM,lineNumber:76,columnNumber:23}},e.name))))))),s.createElement("div",{className:"setting-group",__source:{fileName:bM,lineNumber:85,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:bM,lineNumber:86,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.onCalendarChange,name:"description",label:this.props.searchableStrings["Calendar Name"],value:t,autoFocus:!0,__source:{fileName:bM,lineNumber:87,columnNumber:15}}))),s.createElement("div",{className:"setting-group",__source:{fileName:bM,lineNumber:98,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:bM,lineNumber:99,columnNumber:13}},s.createElement(oM,{label:this.props.searchableStrings.Color,colorKey:"color",colorValue:e||eD.Z.getCalendarCreateColor(),setColor:this.setColor,predefinedColors:ru.hx,__source:{fileName:bM,lineNumber:100,columnNumber:15}})))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:bM,lineNumber:112,columnNumber:9}},s.createElement("input",{className:"primary",type:"submit",disabled:!this.isCalendarValid(),value:(0,ue.Z)("Create Calendar"),__source:{fileName:bM,lineNumber:113,columnNumber:11}})))}}const vM=_M;var EM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\ListCalendars.jsx";function CM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{ensureAccountType:wM,isCalDAV:yM}=Kc.Z,SM={"Add your First Calendar":(0,ue.Z)("Add your First Calendar"),"Press the “Add” button to the left to add a new Calendar.":(0,ue.Z)("Press the “Add” button to the left to add a new Calendar.")},TM={...ru.d3,"Calendar Name":(0,ue.Z)("Calendar Name"),Active:(0,ue.Z)("Active"),"Hide from Calendar View":(0,ue.Z)("Hide from Calendar View"),"Calendar Type":(0,ue.Z)("Calendar Type"),Name:(0,ue.Z)("calendar","Name"),CalDav:(0,ue.Z)("CalDAV"),URL:(0,ue.Z)("Address"),Subscribe:(0,ue.Z)("Subscribe"),Password:(0,ue.Z)("Password"),Username:(0,ue.Z)("Username"),"Event Template":(0,ue.Z)("Event Template"),"Refresh Interval":(0,ue.Z)("Refresh Interval"),Timezone:(0,ue.Z)("Timezone"),Color:(0,ue.Z)("calendar","Color"),Index:(0,ue.Z)("Index")};class kM extends s.PureComponent{constructor(...e){super(...e),CM(this,"removeAt",(e=>{const t=this.props.calendars[e];a.Z.deleteCalendar(t,!0)})),CM(this,"renderListItem",((e,t)=>{const n=this.props.accounts.find((e=>e.id===t.accountId));if(n){const i=wM(n.account_type),r="local"===i?cn.bcq:cn.eTS;return s.createElement(s.Fragment,null,s.createElement("span",{className:"item-icon",style:{fill:t.color||Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)?.colorHighlightBg},dangerouslySetInnerHTML:{__html:r.large},__source:{fileName:EM,lineNumber:88,columnNumber:9}}),s.createElement("div",{className:"item-title",__source:{fileName:EM,lineNumber:95,columnNumber:11}},e),s.createElement("div",{className:"item-meta",__source:{fileName:EM,lineNumber:98,columnNumber:11}},`${n.name} (${ru.d3[i]})`))}return s.createElement("div",{__source:{fileName:EM,lineNumber:104,columnNumber:14}})})),CM(this,"renderCreateListItem",(()=>s.createElement(s.Fragment,null,s.createElement("div",{className:"item-title",__source:{fileName:EM,lineNumber:110,columnNumber:7}},(0,ue.Z)("New Calendar")),s.createElement("div",{className:"item-meta",__source:{fileName:EM,lineNumber:111,columnNumber:7}}," ")))),CM(this,"save",(e=>{const{id:t,...n}=e;a.Z.updateCalendar(t,n)})),CM(this,"createCalendar",(e=>{0===Gc.Z.getAccounts().length?eD.Z.createLocalAccountAndCalendar(null,e):(a.Z.setDefaultAccountId(e.accountId),a.Z.createCalendar(e,!0))})),CM(this,"renderContent",((e,t)=>{const{calendars:n}=this.props,i=n&&n[e],r=lt()(Object.values(i).reduce(((e,t)=>e+t))),a=this.props.accounts.find((e=>e.id===i.accountId)),o=!!a&&yM(a.account_type);return s.createElement(gM,{key:r,save:this.save,searchableStrings:t,calendar:i,readOnly:o,__source:{fileName:EM,lineNumber:144,columnNumber:7}})})),CM(this,"renderCreate",(e=>s.createElement(vM,{searchableStrings:e,createCalendar:this.createCalendar,__source:{fileName:EM,lineNumber:155,columnNumber:5}}))),CM(this,"renderEmpty",(e=>s.createElement("div",{className:"detail",__source:{fileName:EM,lineNumber:162,columnNumber:5}},s.createElement("div",{className:"detail-content",__source:{fileName:EM,lineNumber:163,columnNumber:7}},s.createElement("h3",{__source:{fileName:EM,lineNumber:164,columnNumber:9}},SM["Add your First Calendar"]),s.createElement("p",{__source:{fileName:EM,lineNumber:165,columnNumber:9}},SM["Press the “Add” button to the left to add a new Calendar."]))))),CM(this,"remapCalendars",(()=>this.props.calendars.map((e=>({...e,name:e.description||e.name,key:e.id})))))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Calendars"),filter:this.props.filter,__source:{fileName:EM,lineNumber:186,columnNumber:7}},s.createElement(TD.Z,{style:{height:280},className:"allowOverflow",deleteTitle:(0,ue.Z)("title","Delete Calendar"),addTipString:(0,ue.Z)("Add Calendar"),deleteTipString:(0,ue.Z)("tooltip","Delete Calendar"),emptyListGraphic:n(28888),emptyListString:(0,ue.Z)("No Calendars added"),filter:this.props.filter,items:this.remapCalendars(),masterLayout:0,onRemove:this.removeAt,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,renderCreate:this.renderCreate,renderEmpty:this.renderEmpty,contentStrings:TM,emptyStrings:SM,createStrings:TM,__source:{fileName:EM,lineNumber:190,columnNumber:7}}))}}CM(kM,"contextType",Vs.Z);const IM=cD(kM);var AM=n(48460),ZM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailServerForm.jsx";function PM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const DM={Port:(0,ue.Z)("Port"),"Incoming Server":(0,ue.Z)("Incoming Server"),Username:(0,ue.Z)("Username"),Password:(0,ue.Z)("Password"),"App Password":(0,ue.Z)("App Password"),"Outgoing Server":(0,ue.Z)("Outgoing Server"),"Use App Password":(0,ue.Z)("Use App Password"),"Use OAuth":(0,ue.Z)("Use OAuth")};class MM extends s.PureComponent{constructor(...e){super(...e),PM(this,"toggleOAuth",(()=>{this.props.setAccountProperty("useOAuth",!this.props.account.useOAuth)})),PM(this,"onChangeEvent",(e=>{const{name:t,value:n}=e.target;this.props.setAccountProperty(t,n)})),PM(this,"areServersGmail",(()=>{const{MAIL_SERVER:e,MAIL_SMTP_SERVER:t}=this.props.account;return[e,t].every((e=>e&&e.includes("gmail.com")))}))}isImap(){return this.props.account.accountType===he.s9.IMAP}render(){const{MAIL_SERVER:e,MAIL_PORT:t,MAIL_USER:n,MAIL_PASSWORD:i,MAIL_SMTP_SERVER:r,MAIL_SMTP_PORT:a,MAIL_SMTP_USER:o,MAIL_SMTP_PASSWORD:l,MAIL_SMTP_SOCKET_TYPE:c}=this.props.account;return s.createElement("div",{className:"setting-group-block",__source:{fileName:ZM,lineNumber:69,columnNumber:7}},s.createElement("div",{key:"mail__imap",className:"setting-group",__source:{fileName:ZM,lineNumber:70,columnNumber:9}},s.createElement("div",{className:"setting-single setting-single-flex",__source:{fileName:ZM,lineNumber:71,columnNumber:11}},s.createElement(cP.Z,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SERVER",label:this.props.searchableStrings["Incoming Server"],labelImportant:!0,placeholder:"mail.vivaldi.net",isVerified:this.props.incomingVerified,hasError:this.props.showErrors&&!e,value:e||"",style:{width:"calc(75% - 6px)",flex:1},__source:{fileName:ZM,lineNumber:72,columnNumber:13}}),s.createElement(cP.Z,{type:"number",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_PORT",label:this.props.searchableStrings.Port,placeholder:this.isImap()?"993":"995",isVerified:this.props.incomingVerified,value:t||"",style:{width:"25%"},__source:{fileName:ZM,lineNumber:88,columnNumber:13}})),s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:99,columnNumber:11}},s.createElement("label",{className:"floating-label",disabled:!0,__source:{fileName:ZM,lineNumber:100,columnNumber:13}},(0,ue.Z)("Connection Security"),s.createElement("select",{name:"MAIL_SOCKET_TYPE",value:"ssl",disabled:!0,__source:{fileName:ZM,lineNumber:102,columnNumber:15}},s.createElement("option",{value:"ssl",__source:{fileName:ZM,lineNumber:107,columnNumber:17}},"SSL/TLS")))),s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:111,columnNumber:11}},s.createElement(cP.Z,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_USER",label:this.props.searchableStrings.Username,placeholder:"user@vivaldi.net",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!n,value:n||"",__source:{fileName:ZM,lineNumber:112,columnNumber:13}})),!this.props.account.useOAuth&&s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:125,columnNumber:13}},s.createElement(cP.Z,{type:"password",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_PASSWORD",label:this.props.isGmail?this.props.searchableStrings["App Password"]:this.props.searchableStrings.Password,placeholder:"",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!i,value:i||"",__source:{fileName:ZM,lineNumber:126,columnNumber:15}}))),s.createElement("div",{key:"mail__smtp",className:"setting-group",__source:{fileName:ZM,lineNumber:143,columnNumber:9}},s.createElement("div",{className:"setting-single setting-single-flex",__source:{fileName:ZM,lineNumber:144,columnNumber:11}},s.createElement(cP.Z,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_SERVER",label:this.props.searchableStrings["Outgoing Server"],labelImportant:!0,placeholder:"mail.vivaldi.net",isVerified:this.props.smtpVerified,hasError:this.props.showErrors&&!r,value:r||"",style:{width:"calc(50% - 6px)",flex:1},__source:{fileName:ZM,lineNumber:145,columnNumber:13}}),s.createElement(cP.Z,{type:"number",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_PORT",label:this.props.searchableStrings.Port,placeholder:"465",value:a||"",isVerified:this.props.smtpVerified,style:{width:"25%"},__source:{fileName:ZM,lineNumber:161,columnNumber:13}})),s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:173,columnNumber:11}},s.createElement("label",{className:"floating-label",__source:{fileName:ZM,lineNumber:174,columnNumber:13}},(0,ue.Z)("Connection Security"),s.createElement("select",{name:"MAIL_SMTP_SOCKET_TYPE",onChange:this.onChangeEvent,value:c||"ssl",__source:{fileName:ZM,lineNumber:176,columnNumber:15}},s.createElement("option",{value:"ssl",__source:{fileName:ZM,lineNumber:181,columnNumber:17}},(0,ue.Z)("SSL/TLS (Recommended)")),s.createElement("option",{value:"starttls",__source:{fileName:ZM,lineNumber:182,columnNumber:17}},"StartTLS")))),s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:186,columnNumber:11}},s.createElement(cP.Z,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_USER",label:this.props.searchableStrings.Username,placeholder:"user@vivaldi.net",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!o,value:o||"",__source:{fileName:ZM,lineNumber:187,columnNumber:13}})),!this.props.account.useOAuth&&s.createElement("div",{className:"setting-single",__source:{fileName:ZM,lineNumber:200,columnNumber:13}},s.createElement(cP.Z,{type:"password",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_PASSWORD",label:this.props.isGmail?this.props.searchableStrings["App Password"]:this.props.searchableStrings.Password,placeholder:"",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!l,value:l||"",__source:{fileName:ZM,lineNumber:201,columnNumber:15}})),(this.props.isGmail||this.areServersGmail()||(0,AM.rs)(this.props.account))&&s.createElement("label",{className:"setting-single",__source:{fileName:ZM,lineNumber:217,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:!!this.props.account.useOAuth&&this.props.account.useOAuth,onChange:this.toggleOAuth,__source:{fileName:ZM,lineNumber:218,columnNumber:15}}),s.createElement("span",{__source:{fileName:ZM,lineNumber:223,columnNumber:15}},this.props.searchableStrings["Use OAuth"]))))}}const OM=MM;var xM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\PopDeletionSettings.jsx";class LM extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=e=>{let{name:t,value:n,checked:s}=e.target;n===he.qd&&s&&(n=he.kA);const i={...this.props.account.popDeletion,[t]:n};this.props.setAccountProperty("popDeletion",i)},(n="onChange")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=this.props.account.popDeletion||{},{when:t=he.qd,howManyDays:n=he.CH}=e;return s.createElement("div",{className:"setting-group",__source:{fileName:xM,lineNumber:42,columnNumber:9}},s.createElement(_i,{name:"popdeletiongroup",value:t,onChange:this.onChange,disabled:t===he.qd,name:"when",__source:{fileName:xM,lineNumber:43,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:xM,lineNumber:48,columnNumber:13}},s.createElement("label",{__source:{fileName:xM,lineNumber:49,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t!==he.qd,value:he.qd,onChange:this.onChange,name:"when",__source:{fileName:xM,lineNumber:50,columnNumber:17}}),s.createElement("span",{__source:{fileName:xM,lineNumber:56,columnNumber:17}},(0,ue.Z)("Delete mail from server")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:xM,lineNumber:59,columnNumber:13}},s.createElement("label",{className:"pop-how-many-days",__source:{fileName:xM,lineNumber:60,columnNumber:15}},s.createElement("input",{type:"radio",value:he.kA,default:!0,__source:{fileName:xM,lineNumber:61,columnNumber:17}}),s.createElement("input",{type:"number",min:"1",disabled:t!==he.kA,value:n,placeholder:he.CH,onChange:this.onChange,name:"howManyDays",className:"pop-how-many-days-input",__source:{fileName:xM,lineNumber:62,columnNumber:17}}),s.createElement("span",{__source:{fileName:xM,lineNumber:72,columnNumber:17}},(0,ue.Z)("days after receiving from server")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:xM,lineNumber:75,columnNumber:13}},s.createElement("label",{__source:{fileName:xM,lineNumber:76,columnNumber:15}},s.createElement("input",{type:"radio",value:he.Qp,__source:{fileName:xM,lineNumber:77,columnNumber:17}}),s.createElement("span",{__source:{fileName:xM,lineNumber:78,columnNumber:17}},(0,ue.Z)("when deleting locally")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:xM,lineNumber:81,columnNumber:13}},s.createElement("label",{__source:{fileName:xM,lineNumber:82,columnNumber:15}},s.createElement("input",{type:"radio",value:he.eQ,__source:{fileName:xM,lineNumber:83,columnNumber:17}}),s.createElement("span",{__source:{fileName:xM,lineNumber:84,columnNumber:17}},(0,ue.Z)("when received from server"))))))}}const RM=LM;var BM="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\PopMaxSizeSettings.jsx";const FM={"Limit size when loading":(0,ue.Z)("Limit size when loading"),"Limit (MB)":(0,ue.Z)("Limit (MB)")};class UM extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=e=>{const{name:t,value:n,checked:s}=e.target,i={...this.props.popMaxSize,[t]:"limited"===t?s:n};"limited"===t&&s&&!i.limit&&(i.limit=he.yX),this.props.setAccountProperty("popMaxSize",i)},(n="onChange")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const{limited:e=!1,limit:t=he.yX}=this.props.popMaxSize||{};return s.createElement(s.Fragment,null,s.createElement("label",{className:"setting-single",__source:{fileName:BM,lineNumber:43,columnNumber:9}},s.createElement("input",{type:"checkbox",name:"limited",checked:e,onChange:this.onChange,__source:{fileName:BM,lineNumber:44,columnNumber:11}}),s.createElement("span",{__source:{fileName:BM,lineNumber:48,columnNumber:11}},FM["Limit size when loading"])),s.createElement("label",{className:"setting-single setting-single-flex",__source:{fileName:BM,lineNumber:53,columnNumber:9}},s.createElement("input",{type:"number",name:"limit",placeholder:he.yX,disabled:!e,onChange:this.onChange,value:t,style:{width:90},__source:{fileName:BM,lineNumber:54,columnNumber:11}}),s.createElement("span",{__source:{fileName:BM,lineNumber:63,columnNumber:11}},FM["Limit (MB)"])))}}const VM=UM;var HM=n(88810),WM=n(66609);function zM(e){if(0===e.length)throw new Error("raceToResolve: Need an array with at least one Promise.");let t;return new Promise(((n,s)=>Promise.all(e.map((e=>e.then(n).catch((e=>t=e))))).then((()=>s(t)))))}async function GM(e){const t=await e.listWellKnownFolders();for(const n of[he.e9,he.Nz,he.uT])if(Array.isArray(t[n])&&t[n].length>0){const{path:s,subscribed:i}=t[n][0];i||await e.subscribeMailbox({path:s})}}const{OK:KM,ERROR:jM,OFFLINE:YM}=he.In,$M=async function(e){try{const t=await WM.Z.getIMAPClient(e);return t.onError=e=>new Error((0,ue.Z)("Login for incoming server failed. IMAP server responded with: $1",[e.message])),await t.login(),t}catch(e){throw new Error((0,ue.Z)("Login for incoming server failed. IMAP server responded with: $1",[e.message]))}},XM=function(e){return WM.Z.getSMTPClient(e).then((e=>new Promise(((t,n)=>{e.onidle=e.quit,e.onerror=n,e.onclose=t,e.connect()})))).catch((e=>{throw new Error((0,ue.Z)("Login for outgoing server failed. Server responded with: $1",[e.message]))}))},QM=(e,t=!1)=>{const[n,s,i,r]=t?[e.MAIL_SMTP_PORT,e.MAIL_SMTP_SERVER,e.MAIL_SMTP_USER,e.MAIL_SMTP_PASSWORD]:[e.MAIL_PORT,e.MAIL_SERVER,e.MAIL_USER,e.MAIL_PASSWORD];if(!n||"number"!=typeof n)throw new Error(t?(0,ue.Z)("Outgoing port is missing or not a number"):(0,ue.Z)("Incoming port is missing or not a number"));if(!s)throw new Error(t?(0,ue.Z)("Outgoing server information is missing"):(0,ue.Z)("Incoming server information is missing"));if(!e.useOAuth){if(!i)throw new Error(t?(0,ue.Z)("Outgoing username is missing"):(0,ue.Z)("Incoming username is missing"));if(!r)throw new Error(t?(0,ue.Z)("Outgoing password is missing"):(0,ue.Z)("Incoming password is missing"))}},qM=(e,t,n,s,i)=>new Promise(((i,r)=>{const a=HM.default.open(e,t,{useSecureTransport:"ssl"===n});a.onerror=e=>{r({})},a.onopen=()=>{a.close(),i("MAIL_SMTP_SERVER"===s?{MAIL_SMTP_SERVER:e,MAIL_SMTP_PORT:t,MAIL_SMTP_SOCKET_TYPE:n}:{MAIL_SERVER:e,MAIL_PORT:t})}})),JM=(e,t,n)=>{const s={...e,MAIL_SMTP_USER:n};return XM(s).then((()=>[KM,"Outgoing connection success",s,t])).catch((t=>{throw[jM,t.message,e]}))},eO=(e,t,n)=>new Promise(((s,i)=>{const r=new XMLHttpRequest;r.onload=async function(){if(200===r.status)try{const n=r.responseXML;let a,o,l,c,u;for(const e of n.getElementsByTagName("incomingServer"))e.getAttribute("type")===t&&"ssl"===e.getElementsByTagName("socketType")[0].textContent.toLowerCase()&&(a=e.getElementsByTagName("hostname")[0].textContent,o=e.getElementsByTagName("port")[0].textContent);for(const e of n.getElementsByTagName("outgoingServer"))"smtp"===e.getAttribute("type")&&"plain"!==e.getElementsByTagName("socketType")[0].textContent.toLowerCase()&&(l=e.getElementsByTagName("hostname")[0].textContent,c=e.getElementsByTagName("port")[0].textContent,u=e.getElementsByTagName("socketType")[0].textContent.toLowerCase());if(!(a&&o&&l&&c&&u))return i(new Error("autodiscover: Missing Outgoing or Incoming Server/Port information"));const m={...e,MAIL_SERVER:a,MAIL_PORT:Number(o),MAIL_SMTP_SERVER:l,MAIL_SMTP_PORT:Number(c),MAIL_SMTP_SOCKET_TYPE:"ssl"===u?"ssl":"starttls"},d=await WM.Z.getCapabilities(m);s([KM,m,d])}catch(e){i(new Error(`autodiscover: ${e}`))}else i(new Error("autodiscover: Not in autoconfing"))},r.timeout=2e3;const a=function(){i(new Error("autodiscover: Error looking up in autoconfig"))};r.onerror=a,r.ontimeout=a,r.open("GET",n),r.responseType="document",r.send()})),tO={isValidEmail:e=>{if(!e||!e.MAIL_EMAIL)return!1;const t=e.MAIL_EMAIL.split("@");if(t&&2===t.length){const e=t[1].split(".");return!!(e&&e[1]&&e[1].length>1)}return!1},verify:(e,t)=>{e.offline?t(YM,e):(async e=>(QM(e,!0),await XM(e)))(e).then((()=>(async e=>{if(QM(e,!1),e.accountType!==he.s9.IMAP)return le.verifyPopLogin(e);(await $M(e)).logout()})(e))).then((()=>{t(KM,e)}),(n=>{t(jM,e,n)}))},autofill:(e,t)=>{if(!tO.isValidEmail(e))return void t(jM,e,[]);const n=e.MAIL_EMAIL,s=e.MAIL_EMAIL&&n.split("@")[1];let i="imap",r=993;e.accountType===he.s9.POP&&(i="pop",r=995),((e,t,n)=>{const s=[`https://autoconfig.${t}/mail/config-v1.1.xml?emailaddress=${e.MAIL_EMAIL}`,`https://autoconfig.vivaldi.net/v1.1/${t}`,`https://${t}/.well-known/autoconfig/mail/config-v1.1.xml?emailaddress=${e.MAIL_EMAIL}`],i="pop"===n?"pop3":n;return zM(s.map((t=>eO(e,i,t))))})(e,s,i).catch((()=>((e,t,n,s)=>{const i=[`${n}.${t}`,`mail.${t}`,`${n}.mail.${t}`],r=[`smtp.${t}`,`mail.${t}`,`smtp.mail.${t}`];let a,o,l;return Promise.race([new Promise((e=>setTimeout(e,1e4))),Promise.allSettled([zM([...i.map((e=>qM(e,s,"ssl","MAIL_SERVER")))]).then((async t=>{a=t,o=await WM.Z.getCapabilities({...e,...a})})),new Promise((e=>Promise.allSettled([zM([...r.map((e=>qM(e,465,"ssl","MAIL_SMTP_SERVER")))]).then((t=>{l=t,e()})),zM([...r.map((e=>qM(e,587,"starttls","MAIL_SMTP_SERVER")))]).then((e=>{l||(l=e)}))]).then(e)))])]).then((()=>{const t={...e,...a,...l};return[["MAIL_SERVER","MAIL_PORT","MAIL_SMTP_SERVER","MAIL_SMTP_PORT","MAIL_SMTP_SOCKET_TYPE"].every((e=>t[e]))?KM:jM,t,o]}))})(e,s,i,r))).then((e=>{t(...e)}))},signIn:async(e,t)=>{if(e.offline)return t(YM,"offline",e);e.MAIL_PORT||(e.MAIL_PORT=e.accountType===he.s9.IMAP?993:995),e.MAIL_SMTP_PORT||(e.MAIL_SMTP_PORT=465,e.MAIL_SMTP_SOCKET_TYPE="ssl");try{QM(e,!1),QM(e,!0)}catch(n){return void t(jM,n.message,e)}let n;try{n=await WM.Z.getCapabilities(e)}catch(n){const s=(0,ue.Z)("Could not connect to server. Received following message: $1",[n.message]);return void t(jM,s,e)}if(e.useOAuth){return void t(...await JM(e,n,e.MAIL_EMAIL))}const s=[e.MAIL_USER],i=[e.MAIL_SMTP_USER];if(e.MAIL_EMAIL===e.MAIL_USER&&e.MAIL_EMAIL===e.MAIL_SMTP_USER&&e.MAIL_EMAIL.includes("@")){const t=e.MAIL_EMAIL.split("@")[0];s.push(t),i.push(t)}const r=await Promise.allSettled([zM(i.map((t=>JM(e,n,t)))),zM(s.map((t=>(async(e,t)=>{const n={...e,MAIL_USER:t};try{if(e.accountType===he.s9.IMAP){const e=await $M(n);return[KM,"Incoming connection success",n,[],e]}return await le.verifyPopLogin(e),[KM,"Incoming connection success",n]}catch(t){throw[jM,t.message,e,[]]}})(e,t))))]);let a={...e},o=KM,l="",c=!1;for(const e of r)if(e.reason)o=jM,l=e.reason[1],a={...a,...e.reason[2]};else if(e.value&&(a={...a,...e.value[2]},5===e.value.length)){const t=e.value[4];c||(await GM(t),c=!0),t.logout()}t(o,l,a)}},nO=tO;var sO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\CreateMailAccount.jsx";function iO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{UNKNOWN:rO,VERIFYING:aO,OK:oO,ERROR:lO}=he.In,cO={Back:(0,ue.Z)("account creation","Back"),IMAP:(0,ue.Z)("IMAP"),"Manual Setup":(0,ue.Z)("Manual Setup"),"Edit Servers":(0,ue.Z)("Edit Servers"),Manual:(0,ue.Z)("Manual"),POP:(0,ue.Z)("POP"),"Email Address":(0,ue.Z)("Email Address"),Password:(0,ue.Z)("Password"),"Offline Account":(0,ue.Z)("Offline Account"),"Prefetch Full Messages":(0,ue.Z)("Prefetch Full Messages"),"Upload Sent Messages to Sent Folder":(0,ue.Z)("Upload Sent Messages to Sent Folder"),"Add your First Account":(0,ue.Z)("Add your First Account"),"Add Mail Account":(0,ue.Z)("Add Mail Account"),"Enter your email address below and we’ll help you get going with your first account.":(0,ue.Z)("Enter your email address below and we’ll help you get going with your first account."),"Enter your email address below and we’ll help you get going.":(0,ue.Z)("Enter your email address below and we’ll help you get going."),"If you would like a new mail account, we offer a free account when you register with vivaldi.net.":(0,ue.Z)("If you would like a new mail account, we offer a free account when you register with vivaldi.net."),"Don’t have an email address?":(0,ue.Z)("Don’t have an email address?"),"We have a selection of trusted email providers for you to choose from.":(0,ue.Z)("We have a selection of trusted email providers for you to choose from."),"Please provide the password for your account":(0,ue.Z)("Please provide the password for your account"),"Enter your password":(0,ue.Z)("Enter your password"),...DM,"IMAP Server":(0,ue.Z)("IMAP Server"),"POP Server":(0,ue.Z)("POP Server"),"SMTP Server":(0,ue.Z)("SMTP Server"),"Account Type":(0,ue.Z)("Account Type"),Port:(0,ue.Z)("Port")},uO="https://vivaldi.com/email-signup/";class mO extends s.PureComponent{constructor(e){super(e),iO(this,"_isMounted",!1),iO(this,"setAccountProperty",((e,t)=>{"MAIL_EMAIL"===e?this.setState((e=>{const n=e.syncUsernames&&e.account.MAIL_EMAIL===e.account.MAIL_USER&&e.account.MAIL_EMAIL===e.account.MAIL_SMTP_USER,s={...e.account,MAIL_EMAIL:t,MAIL_USER:n?t:e.account.MAIL_USER,MAIL_SMTP_USER:n?t:e.account.MAIL_SMTP_USER};return{addressValidated:!this.accountExists(t)&&(e.account.offline||nO.isValidEmail(s)),account:s,syncUsernames:n}})):"MAIL_PASSWORD"===e?this.setState((e=>{const n=e.syncPasswords&&e.account.MAIL_PASSWORD===e.account.MAIL_SMTP_PASSWORD;return{account:{...e.account,MAIL_PASSWORD:t,MAIL_SMTP_PASSWORD:n?t:e.account.MAIL_SMTP_PASSWORD},syncPasswords:n}})):"MAIL_PORT"===e||"MAIL_SMTP_PORT"===e?this.setState((n=>({account:{...n.account,[e]:""!==t?Number(t):NaN},..."MAIL_PORT"===e?{incomingVerified:!1}:{smtpVerified:!1}}))):"MAIL_SERVER"===e||"MAIL_SMTP_SERVER"===e?this.setState((n=>({account:{...n.account,[e]:t},incomingVerified:"MAIL_SERVER"!==e&&n.incomingVerified,smtpVerified:"MAIL_SMTP_SERVER"!==e&&n.smtpVerified}))):this.setState((n=>({account:{...n.account,[e]:t}})))})),iO(this,"onChangeAccountProperty",(e=>{const{name:t,value:n}=e.target;this.setAccountProperty(t,n)})),iO(this,"autofill",(()=>{this.state.account.offline?this.createOffline():this.setState((e=>({isEdited:e.status===lO,status:aO,statusText:(0,ue.Z)("Attempting account autodiscovery...")})),(()=>{nO.autofill(this.state.account,this.autofillCallback)}))})),iO(this,"signIn",(()=>{this.setState((e=>({isAdding:!1,isEdited:e.status===lO,status:aO,statusText:(0,ue.Z)("Attempting sign in...")})),(()=>{nO.signIn(this.state.account,this.signInCallback)}))})),iO(this,"completeDiscovery",(e=>{this.setState({account:e,isAdding:!1,status:oO,statusText:(0,ue.Z)("Autodiscovery completed."),incomingVerified:!0,smtpVerified:!0,userVerified:!1})})),iO(this,"onCancel",(()=>{this.setState({showConfirmOAuth:!1,status:oO})})),iO(this,"onConfirmOAuth",(e=>{this.setState((t=>({account:{...t.account,useOAuth:e},showConfirmOAuth:!1}))),e?this.signIn():this.completeDiscovery(this.state.account)})),iO(this,"autofillCallback",((e,t,n)=>{if(this._isMounted)if(e===oO)(0,AM.hi)(n)||(0,AM.rs)(t)?this.setState({account:{...t},showConfirmOAuth:!0}):this.completeDiscovery(t);else if(e===lO){const e=t.MAIL_SERVER&&t.MAIL_PASSWORD&&t.MAIL_SMTP_SERVER&&t.MAIL_SMTP_PASSWORD;this.setState((n=>{const s={...n.account,...t};return{status:lO,statusText:e?(0,ue.Z)("This should not happen"):(0,ue.Z)("Autodiscovery failed. Please enter server settings"),showManual:!e,account:s,userVerified:!1}}))}})),iO(this,"signInCallback",((e,t,n)=>{this._isMounted&&e===oO?this.setState({account:n,isAdding:!1,status:oO,statusText:(0,ue.Z)("Login completed."),incomingVerified:!0,smtpVerified:!0,userVerified:!0},this.saveAccount):this._isMounted&&e===lO&&this.setState((e=>{const s={...e.account,...n};return{status:lO,statusText:t,account:s,userVerified:!1}}))})),iO(this,"considerAddingAccount",(e=>{const t=e.target.name||"",n="BACK"===t,s="MANUAL"===t&&!this.state.isAdding||n;"Enter"!==e.key||s||this.onSubmit()})),iO(this,"createOffline",(()=>{const e=lt()(this.state.account.MAIL_EMAIL).substring(0,6);b.Z.mailPrivate.createFileDirectory(e,(()=>{(0,ga.Z)(this.state.account)}))})),iO(this,"createAccountBooleanHandler",(e=>t=>{const{checked:n}=t.target;this.setState((t=>({account:{...t.account,[e]:n}})))})),iO(this,"saveAccount",(()=>{(0,ga.Z)(this.state.account),ee.Z.addAccount(this.state.account,this.state.capability)})),iO(this,"setViewType",(e=>{const t=e.target.name;this.setState((e=>({showManual:"MANUAL"===t})))})),iO(this,"onSubmit",(()=>{!this.state.addressValidated||this.isCreating()||(this.state.isAdding&&!this.state.showManual?this.autofill():this.signIn())})),iO(this,"renderSubmitButton",(()=>{const e=this.state.status!==lO&&!this.state.showManual,t=this.state.status===lO&&!this.state.showManual;let n;this.state.showManual?n=(0,ue.Z)("Add Account"):this.state.isAdding?n=(0,ue.Z)("Continue"):e?n=(0,ue.Z)("Sign In"):t&&(n=(0,ue.Z)("Retry login"));const i=!this.state.addressValidated||this.isCreating();return s.createElement("input",{onClick:this.onSubmit,className:"primary",disabled:i,type:"button",value:n,__source:{fileName:sO,lineNumber:388,columnNumber:12}})})),iO(this,"onChangeMailAccountType",(e=>{const t=e.target.value===he.s9.POP?he.s9.POP:he.s9.IMAP;this.setState((e=>({account:{...e.account,accountType:t}})))})),iO(this,"isCreating",(()=>this.state.status===aO)),iO(this,"renderStatusCheck",(()=>{if(this.state.status===aO||this.state.status===lO)return s.createElement(Qc,{type:this.state.status===lO?"error":"info",__source:{fileName:sO,lineNumber:418,columnNumber:9}},this.state.statusText)})),iO(this,"onSignUpClicked",(()=>{$.Z.openURL(uO),this.props.onClose&&this.props.onClose()})),this.state={isAdding:!0,status:rO,statusText:"",account:{accountType:he.s9.IMAP},capability:[],addressValidated:!1,incomingVerified:!1,smtpVerified:!1,userVerified:!1,isEdited:!1,showManual:!1,syncUsernames:!0,syncPasswords:!0,showConfirmOAuth:!1}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}accountExists(e){return(A.ZP.get(P.kMailAccounts)||[]).findIndex((t=>t.MAIL_EMAIL===e))>=0}render(){const e=this.isCreating(),t=this.state.account.accountType===he.s9.POP,n=!this.state.account.useOAuth&&this.state.showManual,i=(0,AM.hi)(this.state.capability);return s.createElement("div",{className:"detail",__source:{fileName:sO,lineNumber:439,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:sO,lineNumber:440,columnNumber:9}},s.createElement("div",{className:"setting-group-double",__source:{fileName:sO,lineNumber:441,columnNumber:11}},this.state.isAdding&&!this.state.showManual&&s.createElement(s.Fragment,null,s.createElement("h2",{__source:{fileName:sO,lineNumber:444,columnNumber:17}},this.props.emptyAccounts?cO["Add your First Account"]:cO["Add Mail Account"]),s.createElement("p",{className:"mail-setup-description",__source:{fileName:sO,lineNumber:449,columnNumber:17}},this.props.emptyAccounts?cO["Enter your email address below and we’ll help you get going with your first account."]:cO["Enter your email address below and we’ll help you get going."])),!this.state.isAdding&&!this.state.showManual&&s.createElement(s.Fragment,null,s.createElement("h2",{__source:{fileName:sO,lineNumber:459,columnNumber:17}},cO["Enter your password"]),s.createElement("p",{className:"mail-setup-description no-margin",__source:{fileName:sO,lineNumber:460,columnNumber:17}},(0,ue.Z)("Please provide the password for your account")),s.createElement("a",{className:"mail-setup-email-link",href:"mailto:"+this.state.account.MAIL_EMAIL,__source:{fileName:sO,lineNumber:463,columnNumber:17}},this.state.account.MAIL_EMAIL))),s.createElement("div",{className:"setting-group-double",onKeyPress:this.considerAddingAccount,__source:{fileName:sO,lineNumber:469,columnNumber:11}},this.state.isAdding&&s.createElement("div",{className:"setting-single mail-address",__source:{fileName:sO,lineNumber:471,columnNumber:15}},s.createElement(cP.Z,{focusInput:this.props.focusInput,type:"text",disabled:e,isVerified:this.state.addressValidated,label:"",name:"MAIL_EMAIL",onChange:this.onChangeAccountProperty,placeholder:(0,ue.Z)("Enter your email address"),__source:{fileName:sO,lineNumber:472,columnNumber:17}}),s.createElement("select",{className:"CreateMailAccount-dropdown",onChange:this.onChangeMailAccountType,value:this.state.account.accountType,__source:{fileName:sO,lineNumber:482,columnNumber:17}},s.createElement("option",{value:he.s9.IMAP,__source:{fileName:sO,lineNumber:486,columnNumber:19}},(0,ue.Z)("IMAP")),s.createElement("option",{value:he.s9.POP,__source:{fileName:sO,lineNumber:487,columnNumber:19}},(0,ue.Z)("POP3")))),!this.state.isAdding&&!this.state.showManual&&s.createElement("div",{className:"setting-single mail-address",__source:{fileName:sO,lineNumber:492,columnNumber:15}},s.createElement(cP.Z,{type:"password",disabled:e,label:"",autoFocus:!0,placeholder:(0,ue.Z)("My long safe password"),onChange:this.onChangeAccountProperty,name:"MAIL_PASSWORD",__source:{fileName:sO,lineNumber:493,columnNumber:17}})),t&&this.state.showManual&&s.createElement(RM,{account:this.state.account,setAccountProperty:this.setAccountProperty,__source:{fileName:sO,lineNumber:505,columnNumber:15}})&&s.createElement(VM,{popMaxSize:this.state.account.popMaxSize,setAccountProperty:this.setAccountProperty,__source:{fileName:sO,lineNumber:509,columnNumber:15}}),this.state.showManual&&s.createElement(OM,{variant:"create",account:this.state.account,incomingVerified:this.state.incomingVerified,searchableStrings:this.props.searchableStrings,showErrors:this.state.status===lO,smtpVerified:this.state.smtpVerified,userVerified:this.state.userVerified,setAccountProperty:this.setAccountProperty,isGmail:i,__source:{fileName:sO,lineNumber:515,columnNumber:15}}),s.createElement("div",{className:"setting-group-double",__source:{fileName:sO,lineNumber:527,columnNumber:13}},this.renderStatusCheck(),this.renderSubmitButton(),!n&&s.createElement("input",{onClick:this.setViewType,type:"button",name:"MANUAL",value:this.state.isAdding?this.props.searchableStrings["Manual Setup"]:this.props.searchableStrings["Edit Servers"],__source:{fileName:sO,lineNumber:531,columnNumber:17}}),n&&s.createElement("input",{onClick:this.setViewType,type:"button",name:"BACK",value:this.props.searchableStrings.Back,__source:{fileName:sO,lineNumber:543,columnNumber:17}}))),s.createElement("div",{className:"footer",__source:{fileName:sO,lineNumber:552,columnNumber:11}},this.state.isAdding&&!this.state.showManual&&s.createElement("div",{className:"email-partnership",__source:{fileName:sO,lineNumber:554,columnNumber:15}},s.createElement("h3",{__source:{fileName:sO,lineNumber:555,columnNumber:17}},cO["Don’t have an email address?"]),s.createElement("a",{href:uO,onClick:this.onSignUpClicked,__source:{fileName:sO,lineNumber:556,columnNumber:17}},cO["We have a selection of trusted email providers for you to choose from."])))),this.state.showConfirmOAuth&&s.createElement(gS,{title:(0,ue.Z)("Pick Authentication Type"),prompt:(0,ue.Z)("OAuth follows your normal login process. App-specific passwords are single use passwords that you can generate to login."),negative:(0,ue.Z)("Use App-Specific Password"),positive:(0,ue.Z)("Use OAuth"),onRequestClose:this.onCancel,onClose:this.onConfirmOAuth,__source:{fileName:sO,lineNumber:564,columnNumber:11}}))}}const dO=mO;var hO=n(34155),pO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\EditMailAccount.jsx";function gO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{VERIFYING:bO,OK:NO,ERROR:fO,OFFLINE:_O}=he.In,vO={"Sender Name":(0,ue.Z)("Sender Name"),Signature:(0,ue.Z)("Signature"),"Prefetch Full Messages":(0,ue.Z)("Prefetch Full Messages"),"Offline Account":(0,ue.Z)("Offline Account"),"Upload Sent Messages to Sent Folder":(0,ue.Z)("Upload Sent Messages to Sent Folder"),"Update Account":(0,ue.Z)("Update Account"),Identity:(0,ue.Z)("Identity"),Servers:(0,ue.Z)("Servers"),"Name and signature":(0,ue.Z)("Name and signature"),"Add a sender name and signature for this account.":(0,ue.Z)("Add a sender name and signature for this account."),...DM},EO=["MAIL_EMAIL","MAIL_PORT","MAIL_SERVER","MAIL_USER","MAIL_PASSWORD","MAIL_SMTP_PORT","MAIL_SMTP_SERVER","MAIL_SMTP_USER","MAIL_SMTP_PASSWORD","offline"];class CO extends s.PureComponent{constructor(e){super(e),gO(this,"_isMounted",!1),gO(this,"_hasVerified",!1),gO(this,"_isConnectionUpdated",((e,t)=>EO.some((n=>e[n]!==t[n])))),gO(this,"saveAccount",(async()=>{const e=this.props.accountSettings,t=this.state.accountSettings,n=this._isConnectionUpdated(e,t);t.accountType===he.s9.POP?le.checkForMail():t.accountType===he.s9.IMAP&&(n?(await te.Z.disconnectIMAPClient(e.MAIL_EMAIL),te.Z.connectIMAPClient(t)):t.MAIL_PASSWORD!==e.MAIL_PASSWORD&&t.accountType===he.s9.IMAP&&te.Z.reconnectIMAPClient(t.MAIL_EMAIL)),e&&(n&&(this.setState({status:bO,statusText:(0,ue.Z)("Verifying..."),incomingVerified:!1,smtpVerified:!1,userVerified:!1}),nO.verify(this.state.accountSettings,this.verifyAccountCallback)),(0,ga.Z)(t,e))})),gO(this,"setAccountProperty",((e,t)=>{"MAIL_PORT"===e||"MAIL_SMTP_PORT"===e?this.setState((n=>({accountSettings:{...n.accountSettings,[e]:Number(t)}}))):this.setState((n=>({accountSettings:{...n.accountSettings,[e]:t}})))})),gO(this,"autoSetAccountProperty",((e,t)=>{t!==this.props.accountSettings[e]&&this.setState((n=>({accountSettings:{...n.accountSettings,[e]:t}})),(()=>(0,ga.Z)(this.state.accountSettings,this.props.accountSettings)))})),gO(this,"autoSaveAccountProperty",(e=>{const{name:t,value:n}=e.target;this.autoSetAccountProperty(t,n)})),gO(this,"areNonAutosavedPropertiesSame",(()=>{const e=this.props.accountSettings,t=this.state.accountSettings;return t.MAIL_EMAIL===e.MAIL_EMAIL&&t.MAIL_PASSWORD===e.MAIL_PASSWORD&&t.MAIL_PORT===e.MAIL_PORT&&t.MAIL_SERVER===e.MAIL_SERVER&&t.MAIL_SMTP_PASSWORD===e.MAIL_SMTP_PASSWORD&&t.MAIL_SMTP_PORT===e.MAIL_SMTP_PORT&&t.MAIL_SMTP_SERVER===e.MAIL_SMTP_SERVER&&t.MAIL_SMTP_USER===e.MAIL_SMTP_USER&&t.MAIL_USER===e.MAIL_USER&&t.popDeletion===e.popDeletion&&t.useOAuth===e.useOAuth&&t.MAIL_SMTP_SOCKET_TYPE===e.MAIL_SMTP_SOCKET_TYPE})),gO(this,"verifyAccountCallback",((e,t,n)=>{if(!this._isMounted)return;const s=lt()(t.MAIL_EMAIL).substring(0,6);new Promise(((e,t)=>{b.Z.mailPrivate.getFileDirectory(s,(n=>{h.Z.runtime.lastError?new Promise((e=>{b.Z.mailPrivate.createFileDirectory(s,(s=>{h.Z.runtime.lastError?t((0,ue.Z)("Error creating data directory")):e(n)}))})).then(e(n)):e(n)}))})).then((s=>{if(this._isMounted&&e===NO)this.setState({status:NO,statusText:(0,ue.Z)("Verified"),incomingVerified:!0,smtpVerified:!0,userVerified:!0});else if(this._isMounted&&e===fO){const e="string"==typeof t.MAIL_SERVER&&t.MAIL_SERVER.length>3,s="string"==typeof t.MAIL_SMTP_SERVER&&t.MAIL_SMTP_SERVER.length>3;this.setState({status:fO,statusText:(0,ue.Z)("Error: $1",[n.message]),incomingVerified:e&&!isNaN(t.MAIL_PORT),smtpVerified:s&&!isNaN(t.MAIL_SMTP_PORT),userVerified:!1})}else this._isMounted&&e===_O&&this.setState({status:_O,statusText:(0,ue.Z)("Offline")})})).catch((e=>{this.setState({status:fO,statusText:e})}))})),gO(this,"toggleOffline",(e=>{const{checked:t}=e.target,{offline:n}=this.state.accountSettings;this.setState((e=>({accountSettings:{...e.accountSettings,offline:t}})),(()=>{(0,ga.H)(this.state.accountSettings),n&&!t&&this.setState({view:"servers"})}))})),gO(this,"togglePrefetch",(e=>{const{checked:t}=e.target,{preFetch:n,MAIL_EMAIL:s}=this.state.accountSettings;this.setState((e=>({accountSettings:{...e.accountSettings,preFetch:t}})),(()=>{(0,ga.H)(this.state.accountSettings),!n&&t&&setTimeout((()=>te.Z.preFetch(s)),200)}))})),gO(this,"toggleUploadSent",(e=>{const{checked:t}=e.target;this.setState((e=>({accountSettings:{...e.accountSettings,uploadSent:t}})),(()=>{(0,ga.H)(this.state.accountSettings)}))})),gO(this,"setViewType",(e=>{"servers"!==e||this._hasVerified||(this._hasVerified=!0,nO.verify(this.props.accountSettings,this.verifyAccountCallback)),this.setState({view:e})})),this.state={status:bO,statusText:(0,ue.Z)("Verifying..."),accountSettings:this.props.accountSettings,incomingVerified:!1,smtpVerified:!1,userVerified:!1,view:"identity"}}static getDerivedStateFromProps(e,t){return e.accountSettings.MAIL_EMAIL!==t.accountSettings.MAIL_EMAIL?{accountSettings:e.accountSettings}:null}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(e,t){this.props.accountSettings!==e.accountSettings&&this._isConnectionUpdated(e.accountSettings,this.props.accountSettings)&&hO.nextTick((()=>{this._isMounted&&(this.setState({status:bO,statusText:(0,ue.Z)("Verifying..."),incomingVerified:!1,smtpVerified:!1,userVerified:!1}),nO.verify(this.props.accountSettings,this.verifyAccountCallback))}))}render(){const e=this.props.showTips,t=this.state.accountSettings,n=t.accountType===he.s9.POP,i=this.state.status===fO?"error":this.state.status===NO?"success":"info";return s.createElement("div",{className:"detail",__source:{fileName:pO,lineNumber:359,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:pO,lineNumber:360,columnNumber:9}},e&&s.createElement(s.Fragment,null,s.createElement("h2",{__source:{fileName:pO,lineNumber:363,columnNumber:15}},vO["Name and signature"]),s.createElement("p",{className:"mail-setup-description",__source:{fileName:pO,lineNumber:364,columnNumber:15}},vO["Add a sender name and signature for this account."])),!e&&s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:pO,lineNumber:371,columnNumber:13}},s.createElement("div",{className:"toolbar-group",__source:{fileName:pO,lineNumber:372,columnNumber:15}},s.createElement(ko,{isPressed:"identity"===this.state.view,onClick:()=>this.setViewType("identity"),title:this.props.searchableStrings.Identity,__source:{fileName:pO,lineNumber:373,columnNumber:17}}),s.createElement(ko,{isPressed:"servers"===this.state.view,onClick:()=>this.setViewType("servers"),title:this.props.searchableStrings.Servers,__source:{fileName:pO,lineNumber:378,columnNumber:17}}))),"identity"===this.state.view&&s.createElement("div",{className:"setting-group-block mail-identity",__source:{fileName:pO,lineNumber:387,columnNumber:13}},s.createElement("div",{className:"setting-group",__source:{fileName:pO,lineNumber:388,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:pO,lineNumber:389,columnNumber:17}},s.createElement("h3",{__source:{fileName:pO,lineNumber:390,columnNumber:19}},this.props.searchableStrings["Sender Name"]),s.createElement(cP.Z,{type:"text",onChange:this.autoSaveAccountProperty,name:"MAIL_NAME",label:"",placeholder:"John Doe",value:t.MAIL_NAME?t.MAIL_NAME:"",__source:{fileName:pO,lineNumber:391,columnNumber:19}}))),s.createElement("div",{className:"setting-group",__source:{fileName:pO,lineNumber:401,columnNumber:15}},!n&&s.createElement("label",{className:"setting-single",__source:{fileName:pO,lineNumber:403,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:!!t.preFetch&&t.preFetch,onChange:this.togglePrefetch,disabled:t.offline,__source:{fileName:pO,lineNumber:404,columnNumber:21}}),s.createElement("span",{__source:{fileName:pO,lineNumber:409,columnNumber:21}},this.props.searchableStrings["Prefetch Full Messages"])),!n&&s.createElement("label",{className:"setting-single",title:(0,ue.Z)("Some mail servers (e.g. Outlook), will create a copy of the sent message in its Sent folder. It is only for such cases that this should be unchecked"),__source:{fileName:pO,lineNumber:415,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:t.uploadSent??!0,onChange:this.toggleUploadSent,disabled:t.offline,__source:{fileName:pO,lineNumber:417,columnNumber:21}}),s.createElement("span",{__source:{fileName:pO,lineNumber:421,columnNumber:21}},this.props.searchableStrings["Upload Sent Messages to Sent Folder"])),n&&s.createElement(VM,{popMaxSize:t.popMaxSize,setAccountProperty:this.autoSetAccountProperty,__source:{fileName:pO,lineNumber:427,columnNumber:19}}),s.createElement("label",{className:"setting-single",__source:{fileName:pO,lineNumber:432,columnNumber:17}},s.createElement("input",{type:"checkbox",checked:!!t.offline&&t.offline,onChange:this.toggleOffline,__source:{fileName:pO,lineNumber:433,columnNumber:19}}),s.createElement("span",{__source:{fileName:pO,lineNumber:437,columnNumber:19}},this.props.searchableStrings["Offline Account"]))),s.createElement("div",{className:"setting-single mail-signature",__source:{fileName:pO,lineNumber:440,columnNumber:15}},s.createElement("h3",{__source:{fileName:pO,lineNumber:441,columnNumber:17}},this.props.searchableStrings.Signature),s.createElement(cP.Z,{type:"textarea",rows:"4",onChange:this.autoSaveAccountProperty,name:"signature",label:"",placeholder:void 0===t.signature?FS:"",value:t.signature||"",__source:{fileName:pO,lineNumber:442,columnNumber:17}})),e&&s.createElement("div",{className:"setting-group-double",__source:{fileName:pO,lineNumber:454,columnNumber:17}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Continue"),onClick:()=>e(),__source:{fileName:pO,lineNumber:455,columnNumber:19}}))),"servers"===this.state.view&&s.createElement("form",{onSubmit:this.saveAccount,__source:{fileName:pO,lineNumber:465,columnNumber:13}},n&&s.createElement(RM,{account:t,setAccountProperty:this.setAccountProperty,__source:{fileName:pO,lineNumber:467,columnNumber:17}}),s.createElement(OM,{variant:"create",disabled:t.useOAuth,account:t,incomingVerified:this.state.incomingVerified,showErrors:this.state.status===fO,smtpVerified:this.state.smtpVerified,userVerified:this.state.userVerified,setAccountProperty:this.setAccountProperty,searchableStrings:this.props.searchableStrings,isGmail:(0,AM.hi)(this.props.capability),__source:{fileName:pO,lineNumber:472,columnNumber:15}}),s.createElement("div",{className:"setting-group-double",__source:{fileName:pO,lineNumber:484,columnNumber:15}},this.state.statusText&&s.createElement(Qc,{type:i,__source:{fileName:pO,lineNumber:486,columnNumber:19}},this.state.statusText),s.createElement("input",{type:"submit",value:(0,ue.Z)("Update Account"),disabled:this.areNonAutosavedPropertiesSame(),__source:{fileName:pO,lineNumber:490,columnNumber:17}})))))}}const wO=CO;var yO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailAccountDeleteDialog.jsx";class SO extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s={deleteFiles:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}async onSubmit(e){const{MAIL_EMAIL:t,accountType:n}=this.props.account;e.preventDefault(),(0,ga.H)({...this.props.account,isDeleted:!0}),K.Z.removeAccount(t,this.state.deleteFiles,n),this.props.onClose()}onChangeFileDeletion(){this.setState((e=>({deleteFiles:!e.deleteFiles})))}render(){const{MAIL_EMAIL:e}=this.props.account;return s.createElement("form",{onSubmit:this.onSubmit.bind(this),__source:{fileName:yO,lineNumber:48,columnNumber:7}},s.createElement("header",{className:"dialog-double-header",__source:{fileName:yO,lineNumber:49,columnNumber:9}},s.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:cn.Si$.large},__source:{fileName:yO,lineNumber:50,columnNumber:11}}),s.createElement("h1",{className:"dialog-title",__source:{fileName:yO,lineNumber:53,columnNumber:11}},(0,ue.Z)("Delete Account $1",[e]))),s.createElement("div",{className:"dialog-content",__source:{fileName:yO,lineNumber:57,columnNumber:9}},s.createElement("label",{__source:{fileName:yO,lineNumber:58,columnNumber:11}},s.createElement("input",{autoFocus:!0,type:"checkbox",checked:this.state.deleteFiles,onChange:this.onChangeFileDeletion.bind(this),__source:{fileName:yO,lineNumber:59,columnNumber:13}}),(0,ue.Z)("Also delete message files from disk")),s.createElement("p",{className:"info",__source:{fileName:yO,lineNumber:67,columnNumber:11}},(0,ue.Z)("If checked, all message files for $1 will be deleted. Otherwise they will remain on disk.",[e]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:yO,lineNumber:71,columnNumber:9}},s.createElement("input",{type:"submit",className:"danger",value:(0,ue.Z)("verb","Delete"),autoFocus:!0,__source:{fileName:yO,lineNumber:72,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.props.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:yO,lineNumber:73,columnNumber:11}})))}}const TO=SO;var kO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\ShowMailTipsAndTricks.jsx";function IO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AO extends s.PureComponent{constructor(...e){super(...e),IO(this,"SM",["start","singlekey","unseen","filterbuttons","feeds","final"]),IO(this,"state",{current:"start"}),IO(this,"getNextState",(()=>{const e=this.SM.indexOf(this.state.current),t=this.SM[e+1];this.setState({current:t})})),IO(this,"openMail",(()=>{this.props.onClose&&this.props.onClose(),ie.Z.showContent("mail",{setFocus:!0,selectId:"",reason:""}),se.Z.showMail(),K.Z.selectFolder({name:(0,ue.Z)("Unread"),accountId:he.of,path:he.tB,id:he.w1+"_"+he.tB})}))}renderState(){switch(this.state.current){case"start":return s.createElement("div",{className:"ShowMailTipsAndTricks-allSetContainer",__source:{fileName:kO,lineNumber:39,columnNumber:11}},s.createElement("span",{className:"ShowMailTipsAndTricks-allSetIcon",dangerouslySetInnerHTML:{__html:cn.mXV},__source:{fileName:kO,lineNumber:40,columnNumber:13}}),s.createElement("h1",{className:"ShowMailTipsAndTricks-allSetTitle",__source:{fileName:kO,lineNumber:44,columnNumber:13}},(0,ue.Z)("Great, you’re all set!")),s.createElement("p",{className:"ShowMailTipsAndTricks-description",__source:{fileName:kO,lineNumber:45,columnNumber:13}},(0,ue.Z)("Where to next?")));case"singlekey":const e="https://help.vivaldi.com/desktop/shortcuts/keyboard-shortcuts/";return s.createElement(s.Fragment,null,s.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:kO,lineNumber:51,columnNumber:11}},(0,ue.Z)("Mail Tips & Tricks")),s.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:kO,lineNumber:52,columnNumber:13}},(0,ue.Z)("Single key shortcuts")),s.createElement("p",{className:"ShowMailTipsAndTricks-description",__source:{fileName:kO,lineNumber:53,columnNumber:13}},(0,ue.Z)("When you’re in Mail you can hit a single key to get common tasks done faster")),s.createElement("div",{className:"ShowMailTipsAndTricks-shortcuts",__source:{fileName:kO,lineNumber:54,columnNumber:13}},s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:55,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:56,columnNumber:17}},"R"),(0,ue.Z)("Reply")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:59,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:60,columnNumber:17}},"T"),(0,ue.Z)("Threaded View")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:63,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:64,columnNumber:17}},"F"),(0,ue.Z)("mail","Forward")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:67,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:68,columnNumber:17}},"G"),(0,ue.Z)("Mark the current e-mail as read and jump to the next unread.")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:71,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:72,columnNumber:17}},"K"),(0,ue.Z)("Mark as Read")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:75,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:76,columnNumber:17}},"E"),(0,ue.Z)("Enable Sender View (only show emails to and from the sender)")),s.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:kO,lineNumber:79,columnNumber:15}},s.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:kO,lineNumber:80,columnNumber:17}},"M"),(0,ue.Z)("Mark Thread as Read")),s.createElement("a",{href:e,onClick:()=>$.Z.openURL(e),__source:{fileName:kO,lineNumber:83,columnNumber:15}},(0,ue.Z)("Learn more about keyboard shortcuts"))));case"unseen":const t="https://help.vivaldi.com/mail/mail-get-started/view-and-manage-messages/#Message_read_status";return s.createElement(s.Fragment,null,s.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:kO,lineNumber:92,columnNumber:13}},(0,ue.Z)("Mail Tips & Tricks")),s.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:kO,lineNumber:93,columnNumber:13}},(0,ue.Z)("Unseen and Unread")),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:kO,lineNumber:94,columnNumber:13}},s.createElement("span",{className:"ShowMailTipsAndTricks-icon--Unseen",dangerouslySetInnerHTML:{__html:cn.tG3},__source:{fileName:kO,lineNumber:95,columnNumber:15}}),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide ShowMailTipsAndTricks-descriptionSide--Unseen",__source:{fileName:kO,lineNumber:99,columnNumber:15}},s.createElement("p",{__source:{fileName:kO,lineNumber:100,columnNumber:17}},(0,ue.Z)("In Vivaldi Mail, we separate between emails you’ve seen and those you have read.")),s.createElement("p",{__source:{fileName:kO,lineNumber:101,columnNumber:17}},(0,ue.Z)("Emails are not marked read until you press K or G on the keyboard (or use the toolbar buttons).")),s.createElement("a",{href:t,onClick:()=>$.Z.openURL(t),__source:{fileName:kO,lineNumber:102,columnNumber:17}},(0,ue.Z)("Learn more about Unseen emails.")))));case"filterbuttons":const n="https://help.vivaldi.com/mail/mail-get-started/view-and-manage-messages/#Display_messages";return s.createElement(s.Fragment,null,s.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:kO,lineNumber:112,columnNumber:13}},(0,ue.Z)("Mail Tips & Tricks")),s.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:kO,lineNumber:113,columnNumber:13}},(0,ue.Z)("View Toggles")),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:kO,lineNumber:114,columnNumber:13}},s.createElement("span",{className:"ShowMailTipsAndTricks-icon",dangerouslySetInnerHTML:{__html:cn.Wt0},__source:{fileName:kO,lineNumber:115,columnNumber:15}}),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:kO,lineNumber:119,columnNumber:15}},s.createElement("p",{__source:{fileName:kO,lineNumber:120,columnNumber:17}},(0,ue.Z)("They are Show Read, Show Custom IMAP folders, Show Mailing Lists, Show Feeds, Show Junk, and Show Deleted.")),s.createElement("p",{__source:{fileName:kO,lineNumber:121,columnNumber:17}},(0,ue.Z)("For global views, such as the Unread view, you can quickly filter out messages that have already been dealt with (like read messages) or sorted (like e-mail in other folders than your Inbox).")),s.createElement("a",{href:n,onClick:()=>$.Z.openURL(n),__source:{fileName:kO,lineNumber:122,columnNumber:17}},(0,ue.Z)("Learn more about View Toggles")))));case"feeds":const i="https://help.vivaldi.com/mail/mail-feeds/feeds/";return s.createElement(s.Fragment,null,s.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:kO,lineNumber:132,columnNumber:13}},(0,ue.Z)("Mail Tips & Tricks")),s.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:kO,lineNumber:133,columnNumber:13}},(0,ue.Z)("Feeds")),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:kO,lineNumber:134,columnNumber:13}},s.createElement("span",{className:"ShowMailTipsAndTricks-feedsIcon",dangerouslySetInnerHTML:{__html:cn.ooy},__source:{fileName:kO,lineNumber:135,columnNumber:15}}),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:kO,lineNumber:139,columnNumber:15}},s.createElement("p",{__source:{fileName:kO,lineNumber:140,columnNumber:17}},(0,ue.Z)("That’s right, we have a Feed reader built into our email client!")),s.createElement("p",{__source:{fileName:kO,lineNumber:141,columnNumber:17}},(0,ue.Z)("You can add feeds directly in the Mail Panel, or use the standalone Feeds panel.")),s.createElement("a",{href:i,onClick:()=>$.Z.openURL(i),__source:{fileName:kO,lineNumber:142,columnNumber:17}},(0,ue.Z)("Learn more about the Feed reader")))));case"final":const r="https://help.vivaldi.com/mail/#mail-get-started";return s.createElement(s.Fragment,null,s.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:kO,lineNumber:152,columnNumber:13}},(0,ue.Z)("Mail Tips & Tricks")),s.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:kO,lineNumber:153,columnNumber:13}},(0,ue.Z)("Get all the help you need")),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:kO,lineNumber:154,columnNumber:13}},s.createElement("span",{className:"ShowMailTipsAndTricks-icon",dangerouslySetInnerHTML:{__html:cn.Kuf},__source:{fileName:kO,lineNumber:155,columnNumber:15}}),s.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:kO,lineNumber:159,columnNumber:15}},s.createElement("p",{__source:{fileName:kO,lineNumber:160,columnNumber:17}},(0,ue.Z)("Want more tips and tricks? Our Help pages contain all the documentation you need.")),s.createElement("p",{__source:{fileName:kO,lineNumber:161,columnNumber:17}},(0,ue.Z)("Visit our Help pages for Mail.")),s.createElement("a",{href:r,onClick:()=>$.Z.openURL(r),__source:{fileName:kO,lineNumber:162,columnNumber:17}},(0,ue.Z)("Learn more about Vivaldi Mail")))));default:return}}render(){return s.createElement("div",{className:"ShowMailTipsAndTricks",__source:{fileName:kO,lineNumber:198,columnNumber:7}},this.renderState(),s.createElement("div",{className:"ShowMailTipsAndTricks-buttonContainer",__source:{fileName:kO,lineNumber:200,columnNumber:9}},"final"!==this.state.current&&s.createElement("input",{type:"submit",className:"ShowMailTipsAndTricks-button",value:"start"===this.state.current?(0,ue.Z)("Show me tips and tricks"):(0,ue.Z)("Next tip"),onClick:this.getNextState,__source:{fileName:kO,lineNumber:202,columnNumber:13}}),"start"===this.state.current&&s.createElement("input",{type:"button",className:"ShowMailTipsAndTricks-button",value:(0,ue.Z)("Add another account"),onClick:this.props.onCreateItem,__source:{fileName:kO,lineNumber:210,columnNumber:13}}),s.createElement("input",{type:"button",className:"ShowMailTipsAndTricks-button",value:(0,ue.Z)("Open Vivaldi Mail"),onClick:this.openMail,__source:{fileName:kO,lineNumber:217,columnNumber:11}})))}}const ZO=AO;var PO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\ListMailAccounts.jsx";function DO(){return DO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},DO.apply(this,arguments)}function MO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const OO="/resources/vivaldi_mail_default.png";class xO extends s.PureComponent{constructor(...e){super(...e),MO(this,"_isMounted",!1),MO(this,"state",{isCreating:!1,accounts:[],capabilities:{},setupStep:"setup"}),MO(this,"loadAccountsAndCapabilities",(async e=>{const t=await Ym.Z.loadAllAccounts();if(t.length<this.state.accounts.length)this.setState({accounts:t});else{let n;e&&t.length>this.state.accounts.length&&(n="signature");const s=await ia.Z.getCapabilities();this._isMounted&&(n?this.setState({accounts:t,capabilities:s,setupStep:n,isCreating:!1}):this.setState({accounts:t,capabilities:s}))}})),MO(this,"renderListItem",((e,t)=>{if(t.name){const e=t.MAIL_EMAIL.split("@")[1],n=t.isDeleted?(0,ue.Z)("Deleting..."):e;return s.createElement(AD,{title:t.name,meta:n,iconPath:e,iconFallbackPath:OO,__source:{fileName:PO,lineNumber:103,columnNumber:14}})}return null})),MO(this,"showDirectory",(e=>{b.Z.mailPrivate.getFileDirectory(e,(e=>{e&&$.Z.openURL(`file://${e}`,{inCurrent:!1,inBackground:!1})}))})),MO(this,"onContextMenu",((e,t)=>{const n=this.state.accounts[e],s=n&&n.MAIL_EMAIL,i=lt()(s).substring(0,6),r=[{handler:this.showDirectory.bind(this,i),visible:!0,...(0,Mn.Z)("Reveal Data Folder")}];(0,Hs.Z)(this.context.vivaldiWindowId,r)(t)})),MO(this,"renderCreateListItem",(()=>s.createElement(AD,{title:(0,ue.Z)("New Account"),meta:(0,ue.Z)("Setup in progress..."),iconFallbackPath:OO,style:{opacity:.3},__source:{fileName:PO,lineNumber:142,columnNumber:7}}))),MO(this,"renderContent",((e,t)=>{const n=this.state.accounts[e],i=this.state.capabilities[n.MAIL_EMAIL]||[];return"tips"===this.state.setupStep?s.createElement(ZO,{onCreateItem:this.onCreateItem,__source:{fileName:PO,lineNumber:155,columnNumber:14}}):s.createElement(wO,{accountSettings:n,capability:i,searchableStrings:t,showTips:"signature"===this.state.setupStep?()=>this.showTips():void 0,__source:{fileName:PO,lineNumber:159,columnNumber:12}})})),MO(this,"showTips",(()=>{this.setState({setupStep:"tips"})})),MO(this,"renderCreate",(e=>s.createElement(dO,{key:"create",focusInput:!0,emptyAccounts:0===this.state.accounts.length,searchableStrings:e,__source:{fileName:PO,lineNumber:174,columnNumber:12}}))),MO(this,"renderEmpty",(e=>s.createElement(dO,{key:"empty",emptyAccounts:!0,searchableStrings:e,__source:{fileName:PO,lineNumber:183,columnNumber:5}}))),MO(this,"remapAccounts",(()=>this.state.accounts.map((e=>({...e,key:e.MAIL_EMAIL,name:e.MAIL_EMAIL}))))),MO(this,"deleteDialog",(e=>s.createElement(TO,DO({},e,{__source:{fileName:PO,lineNumber:197,columnNumber:12}})))),MO(this,"onCreateItem",(()=>{this.setState({isCreating:!0,setupStep:"setup"})})),MO(this,"onCancelCreateItem",(()=>{this.setState({isCreating:!1})}))}componentDidMount(){this._isMounted=!0,this.loadAccountsAndCapabilities()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(e){if(e.prefValues[P.kMailAccounts]!==this.props.prefValues[P.kMailAccounts]){const e=!0;this.loadAccountsAndCapabilities(e)}}render(){return s.createElement(TD.Z,{title:(0,ue.Z)("Mail Accounts"),addTipString:(0,ue.Z)("Add account"),items:this.remapAccounts(),masterLayout:0,onRemove:()=>{},deleteDialog:this.deleteDialog,onContextMenu:this.onContextMenu,emptyListGraphic:n(89182),emptyListString:(0,ue.Z)("No accounts added"),renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,contentStrings:vO,isCreating:this.state.isCreating,onCreateItem:this.onCreateItem,onCancelCreateItem:this.onCancelCreateItem,renderCreate:this.renderCreate,className:"setting-mail-account",createStrings:cO,renderEmpty:this.renderEmpty,emptyStrings:cO,filter:this.props.filter,__source:{fileName:PO,lineNumber:213,columnNumber:12}})}}MO(xO,"contextType",Vs.Z);const LO=(0,bi.Z)(xO,[P.kMailAccounts]);var RO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\rss\\RSSAccountItem.jsx";function BO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const FO={Title:(0,ue.Z)("Title"),Address:(0,ue.Z)("Address"),"Every 5 minutes":(0,ue.Z)("Every 5 minutes"),"Every 15 minutes":(0,ue.Z)("Every 15 minutes"),"Every 30 minutes":(0,ue.Z)("Every 30 minutes"),"Every hour":(0,ue.Z)("Every hour"),"Every 2 hours":(0,ue.Z)("Every 2 hours"),"Every 6 hours":(0,ue.Z)("Every 6 hours"),"Every 12 hours":(0,ue.Z)("Every 12 hours"),Daily:(0,ue.Z)("Daily"),Weekly:(0,ue.Z)("Weekly"),Offline:(0,ue.Z)("Offline")};class UO extends s.Component{constructor(e){super(e),BO(this,"isAccountChanged",(()=>{const e=this.props.account;if(!e||!this.state.urlValidated)return!1;const{url:t,path:n,title:s,refreshInterval:i,offline:r}=this.state.account;return!(s===e.title&&t===e.url&&n===e.path&&i===e.refreshInterval&&r===e.offline)})),BO(this,"isUrlValid",(e=>""!==e.trim()&&(e.split(/\s/).filter((e=>e))||[e]).every((e=>(0,As.C3)(e))))),BO(this,"setAccountProperty",(e=>{const{name:t,value:n}=e.target,s=this.isUrlValid("url"===t?n:this.state.account.url);this.setState((e=>({account:{...e.account,[t]:n},urlValidated:s})))})),BO(this,"changeOffline",(e=>{const{checked:t}=e.target,n=this.isUrlValid(this.state.account.url);this.setState((e=>({account:{...e.account,offline:t},urlValidated:n})))})),BO(this,"saveAccount",(()=>{const{url:e,path:t,title:n,refreshInterval:s,lastChecked:i,offline:r}=this.state.account;this.props.save({url:e,path:t,title:n,refreshInterval:s,lastChecked:i,offline:r},this.props.accountIndex)})),this.state={account:this.props.account,accountIndex:this.props.accountIndex,urlValidated:!1}}render(){return s.createElement("form",{className:"detail",onSubmit:this.saveAccount,__source:{fileName:RO,lineNumber:115,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:RO,lineNumber:116,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:RO,lineNumber:117,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:RO,lineNumber:118,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.setAccountProperty,name:"title",label:this.props.searchableStrings.Title,placeholder:(0,ue.Z)("Feed Title"),value:this.state.account.title,autoFocus:!this.state.account.title,__source:{fileName:RO,lineNumber:119,columnNumber:15}})),s.createElement("div",{className:"setting-single",__source:{fileName:RO,lineNumber:130,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.setAccountProperty,name:"url",label:this.props.searchableStrings.Address,placeholder:(0,ue.Z)("Feed Address"),isVerified:this.state.urlValidated,value:this.state.account.url,__source:{fileName:RO,lineNumber:131,columnNumber:15}})),s.createElement("div",{className:"setting-single",__source:{fileName:RO,lineNumber:141,columnNumber:13}},s.createElement("label",{className:"floating-label",__source:{fileName:RO,lineNumber:142,columnNumber:15}},s.createElement("span",{__source:{fileName:RO,lineNumber:143,columnNumber:17}},(0,ue.Z)("Refresh Interval")),s.createElement("select",{onChange:this.setAccountProperty,value:this.state.account.refreshInterval,name:"refreshInterval",__source:{fileName:RO,lineNumber:144,columnNumber:17}},Fr()))),s.createElement("div",{className:"setting-single",__source:{fileName:RO,lineNumber:153,columnNumber:13}},s.createElement("label",{__source:{fileName:RO,lineNumber:154,columnNumber:15}},s.createElement("input",{type:"checkbox",name:"offline",checked:!!this.state.account.offline&&this.state.account.offline,onChange:this.changeOffline,__source:{fileName:RO,lineNumber:155,columnNumber:17}}),s.createElement("span",{__source:{fileName:RO,lineNumber:161,columnNumber:17}},this.props.searchableStrings.Offline))))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:RO,lineNumber:167,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Save"),disabled:!this.isAccountChanged(),__source:{fileName:RO,lineNumber:168,columnNumber:11}})))}}const VO=UO;var HO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\rss\\ListRSSAccounts.jsx";function WO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zO="/resources/vivaldi_rss_default.png",GO=[P.kRssDetectFeeds,P.kRssEmbedYoutubeAttachments,P.kRssShowNotifications],KO=st.Z.getEventHandler,jO={"Add your First Newsfeed Account":(0,ue.Z)("Add your First Newsfeed Account"),"Press the “Add” button to the left to add a new account.":(0,ue.Z)("Press the “Add” button to the left to add a new account.")};class YO extends s.PureComponent{constructor(e){super(e),WO(this,"componentDidMount",(()=>{A.ZP.addListener(P.kRssSettings,this._onSettingsChanged)})),WO(this,"componentWillUnmount",(()=>{A.ZP.removeListener(P.kRssSettings,this._onSettingsChanged)})),WO(this,"_onSettingsChanged",((e,t)=>{this.setState({accounts:t})})),WO(this,"removeAt",(e=>{const{path:t}=this.state.accounts[e];rt.removeFeed(t)})),WO(this,"renderListItem",((e,t)=>{const{hostname:n}=Is.parse(t.url),i=(n||"").split(".").slice(-2).join(".");return s.createElement(AD,{key:t.url,title:t.title,meta:t.url,iconPath:i,iconFallbackPath:zO,__source:{fileName:HO,lineNumber:82,columnNumber:12}})})),WO(this,"renderCreateListItem",(()=>s.createElement(s.Fragment,null,s.createElement(AD,{title:(0,ue.Z)("New Feed"),meta:(0,ue.Z)("Setup in progress..."),iconFallbackPath:zO,style:{opacity:.3},__source:{fileName:HO,lineNumber:92,columnNumber:5}})))),WO(this,"save",((e,t)=>{const{accounts:n}=this.state;if(t<n.length)rt.edit(e,t);else{const t=[],n=e.url.split(/\s/).filter((e=>e));n.length>1?n.forEach((n=>{const{title:s,path:i}=e;t.some((e=>e.url===n))||t.push({url:n,path:i,title:s,refreshInterval:5,lastChecked:0,offline:!1})})):t.push(e),rt.add(t)}})),WO(this,"renderContent",((e,t)=>{const{accounts:n}=this.state,i=n&&n[e];return i?s.createElement(VO,{key:i.url,save:this.save,searchableStrings:t,account:i,accountIndex:e,__source:{fileName:HO,lineNumber:134,columnNumber:9}}):null})),WO(this,"renderCreate",(e=>{const{accounts:t}=this.state;return s.createElement(VO,{save:this.save,searchableStrings:e,account:{title:"",url:"",path:"",lastChecked:0,refreshInterval:0,offline:!1},accountIndex:t.length,__source:{fileName:HO,lineNumber:157,columnNumber:7}})})),WO(this,"renderEmpty",(e=>s.createElement("div",{className:"detail",__source:{fileName:HO,lineNumber:167,columnNumber:5}},s.createElement("div",{className:"detail-content",__source:{fileName:HO,lineNumber:168,columnNumber:7}},s.createElement("h3",{__source:{fileName:HO,lineNumber:169,columnNumber:9}},e["Add your First Newsfeed Account"]),s.createElement("p",{__source:{fileName:HO,lineNumber:170,columnNumber:9}},e["Press the “Add” button to the left to add a new account."]))))),WO(this,"remapAccounts",(()=>this.state.accounts.map((e=>({...e,key:e.title,name:e.title}))))),this.state={accounts:A.ZP.get(P.kRssSettings)}}render(){return s.createElement(Cc,{filter:this.props.filter,categoryTitle:(0,ue.Z)("Newsfeed Accounts"),__source:{fileName:HO,lineNumber:183,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:HO,lineNumber:187,columnNumber:9}},s.createElement(TD.Z,{deleteTitle:(0,ue.Z)("title","Delete Feed"),addTipString:(0,ue.Z)("title","Add Feed"),deleteTipString:(0,ue.Z)("tooltip","Delete Feed"),emptyListGraphic:n(55592),emptyListString:(0,ue.Z)("No Feeds added"),filter:this.props.filter,items:this.remapAccounts(),masterLayout:0,onRemove:this.removeAt,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,renderCreate:this.renderCreate,renderEmpty:this.renderEmpty,contentStrings:FO,emptyStrings:jO,style:{height:300},__source:{fileName:HO,lineNumber:188,columnNumber:11}}),s.createElement("div",{className:"setting-single",__source:{fileName:HO,lineNumber:207,columnNumber:11}},s.createElement("input",{type:"button",onClick:rt.updateAllFeeds,value:(0,ue.Z)("Update All Feeds"),__source:{fileName:HO,lineNumber:208,columnNumber:13}}))),s.createElement("div",{className:"setting-group",__source:{fileName:HO,lineNumber:216,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:HO,lineNumber:217,columnNumber:11}},s.createElement("h3",{__source:{fileName:HO,lineNumber:218,columnNumber:13}},(0,ue.Z)("Feed Detection")),s.createElement("label",{title:(0,ue.Z)("Use Vivaldi Feeds to detect, preview and subscribe to feeds."),__source:{fileName:HO,lineNumber:219,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kRssDetectFeeds],onChange:KO(P.kRssDetectFeeds),__source:{fileName:HO,lineNumber:222,columnNumber:15}}),s.createElement("span",{__source:{fileName:HO,lineNumber:227,columnNumber:15}},(0,ue.Z)("Detect Feeds in Web Pages"))))),s.createElement("div",{className:"setting-group",__source:{fileName:HO,lineNumber:232,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:HO,lineNumber:233,columnNumber:11}},s.createElement("h3",{__source:{fileName:HO,lineNumber:234,columnNumber:13}},(0,ue.Z)("Feed Notifications")),s.createElement("label",{__source:{fileName:HO,lineNumber:235,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kRssShowNotifications],onChange:KO(P.kRssShowNotifications),__source:{fileName:HO,lineNumber:236,columnNumber:15}}),s.createElement("span",{__source:{fileName:HO,lineNumber:240,columnNumber:15}},(0,ue.Z)("Show Notifications for New Feed Items"))))),s.createElement("div",{className:"setting-group",__source:{fileName:HO,lineNumber:245,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:HO,lineNumber:246,columnNumber:11}},s.createElement("h3",{__source:{fileName:HO,lineNumber:247,columnNumber:13}},(0,ue.Z)("Attachments")),s.createElement("label",{__source:{fileName:HO,lineNumber:248,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kRssEmbedYoutubeAttachments],onChange:KO(P.kRssEmbedYoutubeAttachments),__source:{fileName:HO,lineNumber:249,columnNumber:15}}),s.createElement("span",{__source:{fileName:HO,lineNumber:253,columnNumber:15}},(0,ue.Z)("Embed YouTube Links in Attachments"))))))}}const $O=(0,bi.Z)(YO,GO);var XO="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterSelector.jsx";function QO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qO extends s.PureComponent{constructor(...e){super(...e),QO(this,"rules",{from:(0,ue.Z)("sender","From"),to:(0,ue.Z)("To"),cc:(0,ue.Z)("Cc"),subject:(0,ue.Z)("Subject"),body:(0,ue.Z)("Body"),anywhere:(0,ue.Z)("Anywhere")}),QO(this,"state",{rule:"",conjunction:this.props.isEmpty?"":"AND",ruleName:"anywhere",mailAddresses:ra.Z.getMailAddresses(),isValidInput:!1,condition:"include"}),QO(this,"_mailAddressesChanged",(()=>{this.setState({mailAddresses:ra.Z.getMailAddresses()})})),QO(this,"onChangeRuleName",(e=>{const t=e.target.value;switch(t){case"subject":case"body":case"to":case"from":case"cc":case"anywhere":this.setState({ruleName:t})}})),QO(this,"onChange",(e=>{this.setState({rule:e.target.value,isValidInput:e.target.value.trim().length>0})})),QO(this,"onChangeConjunction",(e=>{switch(e.target.value){case"NOT":case"AND":case"OR":this.setState({conjunction:e.target.value})}})),QO(this,"onSubmit",(()=>{!this.state.rule||["from","cc","to"].includes(this.state.ruleName)&&this.state.condition.includes("equal")||(this.props.onSubmit(this.state.ruleName,this.state.rule,this.state.condition,this.state.conjunction),this.setState({rule:""}))})),QO(this,"addAddressToRuleGroup",(e=>{if(e.length>0){const t=e[0].address,n=this.state.condition,s=this.state.conjunction;this.props.onSubmit(this.state.ruleName,t,n,s)}})),QO(this,"setIsValidInput",(e=>{this.state.isValidInput!==e&&this.setState({isValidInput:e})})),QO(this,"onChangeCondition",(e=>{const t=e.target.value;switch(t){case"equal":case"include":case"starts_with":this.setState({condition:t})}}))}componentDidMount(){ra.Z.addChangeListener(this._mailAddressesChanged)}componentWillUnmount(){ra.Z.removeChangeListener(this._mailAddressesChanged)}render(){const e=this.state.ruleName,t=this.state.condition;return s.createElement("form",{onSubmit:this.onSubmit,className:"MailFilterSelector",__source:{fileName:XO,lineNumber:142,columnNumber:7}},!this.props.isEmpty&&s.createElement("select",{onChange:this.onChangeConjunction,value:this.state.conjunction,className:"MailFilterSelector-conjunctionContainer",__source:{fileName:XO,lineNumber:144,columnNumber:11}},s.createElement("option",{value:"AND",__source:{fileName:XO,lineNumber:149,columnNumber:13}},(0,ue.Z)("AND")),s.createElement("option",{value:"OR",__source:{fileName:XO,lineNumber:150,columnNumber:13}},(0,ue.Z)("OR")),s.createElement("option",{value:"NOT",__source:{fileName:XO,lineNumber:151,columnNumber:13}},(0,ue.Z)("NOT"))),s.createElement("select",{onChange:this.onChangeRuleName,value:this.state.ruleName,__source:{fileName:XO,lineNumber:154,columnNumber:9}},this.rules&&Object.keys(this.rules).map((e=>s.createElement("option",{key:e,value:e,__source:{fileName:XO,lineNumber:158,columnNumber:17}},this.rules[e])))),s.createElement("select",{onChange:this.onChangeCondition,value:this.state.condition,__source:{fileName:XO,lineNumber:165,columnNumber:9}},["from","cc","to"].includes(e)&&s.createElement(s.Fragment,null,s.createElement("option",{value:"equal",__source:{fileName:XO,lineNumber:171,columnNumber:15}},(0,ue.Z)("equals"))),s.createElement("option",{value:"include",__source:{fileName:XO,lineNumber:174,columnNumber:11}},(0,ue.Z)("includes")),s.createElement("option",{value:"starts_with",__source:{fileName:XO,lineNumber:175,columnNumber:11}},(0,ue.Z)("starts with")),["subject","body","anywhere"].includes(e)&&s.createElement(s.Fragment,null,s.createElement("option",{value:"equal",__source:{fileName:XO,lineNumber:178,columnNumber:15}},(0,ue.Z)("equals")))),s.createElement("div",{className:"MailFilterSelector-inputContainer",__source:{fileName:XO,lineNumber:182,columnNumber:9}},["from","to","cc"].includes(e)&&"equal"===t?s.createElement(RS,{id:e,selectedItems:[],allItems:this.state.mailAddresses||new Map,itemSelectionCallback:this.addAddressToRuleGroup,setIsValidInput:this.setIsValidInput,className:"MailFilterSelector-input",__source:{fileName:XO,lineNumber:184,columnNumber:13}}):s.createElement("input",{type:"text",onChange:this.onChange,value:this.state.rule,className:"MailFilterSelector-input",__source:{fileName:XO,lineNumber:193,columnNumber:13}}),s.createElement("input",{type:"button",disabled:!this.state.isValidInput,onClick:this.onSubmit,value:(0,ue.Z)("Add to Search"),__source:{fileName:XO,lineNumber:200,columnNumber:11}})))}}const JO=qO;var ex="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailTriggerSelector.jsx";function tx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nx=new Map([["ADD_LABEL",(0,ue.Z)("Add label")],["REMOVE_LABEL",(0,ue.Z)("Remove label")],["MARK_READ",(0,ue.Z)("Mark as read")]]);class sx extends s.PureComponent{constructor(...e){super(...e),tx(this,"onChangeType",(e=>{const t=e.target.value;let n;"ADD_LABEL"===t?n={type:"ADD_LABEL",label:(0,Dd.A4)(this.props.trigger.label||"")}:"REMOVE_LABEL"===t?n={type:"REMOVE_LABEL",label:(0,Dd.A4)(this.props.trigger.label||"")}:"MARK_READ"===t&&(n={type:"MARK_READ"}),n&&this.props.editTrigger(this.props.triggerIndex,n)})),tx(this,"onChangeLabel",(e=>{const t=(0,Dd.Tv)(e.target.value);switch(this.props.trigger.type){case"ADD_LABEL":const e={type:"ADD_LABEL",label:t?(0,Dd.A4)(t):""};this.props.editTrigger(this.props.triggerIndex,e);break;case"REMOVE_LABEL":const n={type:"REMOVE_LABEL",label:t?(0,Dd.A4)(t):""};this.props.editTrigger(this.props.triggerIndex,n)}})),tx(this,"renderAction",(()=>{switch(this.props.trigger.type){case"ADD_LABEL":case"REMOVE_LABEL":return this.renderLabel();case"MARK_READ":return}})),tx(this,"renderLabel",(()=>s.createElement("input",{type:"text",onChange:this.onChangeLabel,value:this.props.trigger.label?(0,Dd.mA)(this.props.trigger.label):"",__source:{fileName:ex,lineNumber:80,columnNumber:7}})))}render(){return s.createElement("form",{className:"MailTriggerSelector",__source:{fileName:ex,lineNumber:90,columnNumber:7}},s.createElement("select",{className:"MailTriggerSelector-select",onChange:this.onChangeType,value:this.props.trigger.type,__source:{fileName:ex,lineNumber:91,columnNumber:9}},[...nx.keys()].map((e=>s.createElement("option",{key:e,value:e,__source:{fileName:ex,lineNumber:94,columnNumber:15}},nx.get(e))))),this.renderAction(),!this.props.lastTrigger&&s.createElement("input",{type:"button",onClick:this.props.removeTrigger.bind(this,this.props.triggerIndex),className:"MailTriggerSelector-button circular remove",__source:{fileName:ex,lineNumber:102,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.props.addTrigger,className:"MailTriggerSelector-button circular add",__source:{fileName:ex,lineNumber:108,columnNumber:9}}))}}const ix=sx;var rx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterManagerEditor.jsx";function ax(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ox={"Mail Filter":(0,ue.Z)("Mail Filter"),Search:(0,ue.Z)("mail filters","Search"),Save:(0,ue.Z)("Save"),Name:(0,ue.Z)("mail filters","Filter Name")};class lx extends s.Component{constructor(...e){super(...e),ax(this,"state",{filter:this.props.filter}),ax(this,"updateName",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({filter:e})=>{e.name=t})))})),ax(this,"updateFilter",((e,t)=>{const n=t.target.value;this.setState((0,T.Uy)((({filter:t})=>{"query"===e&&(t.name&&t.name!==t.filterValue.query||(t.name=n)),t.filterValue[e]=n})))})),ax(this,"addQuery",((e,t,n,s)=>{this.setState((0,T.Uy)((({filter:i})=>{const r=i.filterValue.query;let a=t;n.includes("equal")&&["body","subject","anywhere"].includes(e)?a=`"${a}"`:n.startsWith("start")&&(["body","subject","anywhere"].includes(e)&&(a=`"${a}"`),a="^"+a),"anywhere"!==e&&(a=`${e}:${a}`),s&&(a=`${r?" ":""}${s} `+a),i.name&&i.name!==i.filterValue.query||(i.name+=a),i.filterValue.query=i.filterValue.query?i.filterValue.query+a:a,i={...i}})))})),ax(this,"saveFilter",(()=>{this.state.filter.id?this.props.filter.id&&K.Z.putFilter(this.state.filter,this.props.filter):K.Z.addFilter(this.state.filter,!0)})),ax(this,"getNewTrigger",(()=>({type:"ADD_LABEL",label:""}))),ax(this,"addTrigger",(()=>{const e=this.getNewTrigger();this.setState((0,T.Uy)((({filter:t})=>{t.triggers?t.triggers.push(e):t.triggers=[e]})))})),ax(this,"removeTrigger",(e=>{this.setState((0,T.Uy)((({filter:t})=>{const{triggers:n}=t;n&&(n.splice(e,1),0===n.length&&delete t.triggers)})))})),ax(this,"editTrigger",((e,t)=>{this.setState((0,T.Uy)((({filter:n})=>{const{triggers:s}=n;s&&(s[e]=t)})))}))}UNSAFE_componentWillReceiveProps(e){this.setState({filter:e.filter})}render(){return s.createElement("div",{className:"detail",__source:{fileName:rx,lineNumber:162,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:rx,lineNumber:163,columnNumber:9}},s.createElement("div",{className:"setting-group-double",__source:{fileName:rx,lineNumber:164,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:rx,lineNumber:165,columnNumber:13}},s.createElement(cP.Z,{type:"text",onChange:this.updateName,label:this.props.searchableStrings.Name,value:this.state.filter.name||"",labelImportant:!0,__source:{fileName:rx,lineNumber:166,columnNumber:15}})),s.createElement("div",{className:"setting-single",__source:{fileName:rx,lineNumber:174,columnNumber:13}},s.createElement(JO,{key:this.state.filter.filterValue.query,isEmpty:!this.state.filter.filterValue.query,onSubmit:this.addQuery,__source:{fileName:rx,lineNumber:175,columnNumber:15}})),this.state.filter.filterValue.query&&s.createElement("div",{className:"setting-single",__source:{fileName:rx,lineNumber:182,columnNumber:15}},s.createElement(cP.Z,{type:"textarea",rows:"3",onChange:this.updateFilter.bind(this,"query"),label:this.props.searchableStrings.Search,labelImportant:!0,title:(0,ue.Z)("Tokenized search through content, recipients, and subject field"),value:this.state.filter.filterValue.query||"",__source:{fileName:rx,lineNumber:183,columnNumber:17}})),s.createElement("div",{className:"setting-single",__source:{fileName:rx,lineNumber:196,columnNumber:13}},s.createElement("div",{className:"MailActionManagerEditor-mailTriggerSelectors",__source:{fileName:rx,lineNumber:197,columnNumber:15}},this.state.filter.triggers?this.state.filter.triggers.map(((e,t)=>s.createElement(ix,{key:t,trigger:e,triggerIndex:t,removeTrigger:this.removeTrigger,addTrigger:this.addTrigger,editTrigger:this.editTrigger,lastTrigger:!1,__source:{fileName:rx,lineNumber:205,columnNumber:19}}))):s.createElement("input",{type:"button",value:(0,ue.Z)("Add Action"),onClick:this.addTrigger,__source:{fileName:rx,lineNumber:199,columnNumber:17}}))))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:rx,lineNumber:222,columnNumber:9}},!this.state.filter.id&&s.createElement("input",{type:"button",className:"primary",onClick:this.saveFilter.bind(this),disabled:this.props.filter===this.state.filter,value:(0,ue.Z)("Add Mail Filter"),__source:{fileName:rx,lineNumber:223,columnNumber:37}}),this.state.filter.id&&s.createElement("input",{type:"button",className:"primary",onClick:this.saveFilter.bind(this),disabled:this.props.filter===this.state.filter,value:(0,ue.Z)("Update Mail Filter"),__source:{fileName:rx,lineNumber:230,columnNumber:36}}),s.createElement("input",{type:"button",disabled:this.props.filter===this.state.filter,onClick:()=>{this.setState({filter:this.props.filter})},value:(0,ue.Z)("Cancel"),__source:{fileName:rx,lineNumber:237,columnNumber:11}})))}}const cx=lx;var ux="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterManager.jsx";function mx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dx=[P.kMailAccounts,P.kMailIsTurnedOff],hx={"Filters added in the mail panel will appear here.":(0,ue.Z)("Filters added in the mail panel will appear here.")};class px extends s.PureComponent{constructor(e){super(e),mx(this,"mailFiltersChanged",(e=>{if("filters"!==e.target)return;const t=this.loadMailFilters();this.state.mailFilters.length===t.length&&this.state.mailFilters.every(((e,n)=>e===t[n]))||this.setState({mailFilters:t})})),mx(this,"loadMailFilters",(()=>la.Z.getAll().filter((e=>e.accountId===he.Kz&&e.path!==he.ym)))),mx(this,"remapMailFilters",(e=>e.map(((e,t)=>({...e,key:String(t)}))))),mx(this,"renderListItem",((e,t)=>s.createElement(s.Fragment,null,s.createElement("span",{className:"item-icon",dangerouslySetInnerHTML:{__html:cn.EnF.small},__source:{fileName:ux,lineNumber:96,columnNumber:7}}),s.createElement("div",{className:"item-title",__source:{fileName:ux,lineNumber:102,columnNumber:7}},e)))),mx(this,"renderContent",((e,t)=>s.createElement(cx,{searchableStrings:t,filter:this.state.mailFilters[e],__source:{fileName:ux,lineNumber:109,columnNumber:5}}))),mx(this,"renderCreateListItem",(()=>s.createElement("div",{className:"item-title",__source:{fileName:ux,lineNumber:115,columnNumber:5}},(0,ue.Z)("New Filter")))),mx(this,"renderCreate",(e=>{const t={name:"",accountId:he.Kz,path:Math.random().toString(36).substring(2),filterValue:{}};return s.createElement(cx,{searchableStrings:e,filter:t,__source:{fileName:ux,lineNumber:127,columnNumber:12}})})),mx(this,"renderEmpty",(e=>s.createElement("div",{className:"detail",__source:{fileName:ux,lineNumber:133,columnNumber:5}},s.createElement("div",{className:"detail-content",__source:{fileName:ux,lineNumber:134,columnNumber:7}},s.createElement("p",{__source:{fileName:ux,lineNumber:135,columnNumber:9}},e["Filters added in the mail panel will appear here."]))))),mx(this,"removeAt",(e=>{const t=this.state.mailFilters[e];K.Z.removeFilter(t.id)})),this.state={mailFilters:this.loadMailFilters()}}componentDidMount(){Cm.C.addChangeListener(this.mailFiltersChanged)}componentWillUnmount(){Cm.C.removeChangeListener(this.mailFiltersChanged)}render(){return 0===this.props.prefValues[P.kMailAccounts].length||this.props.prefValues[P.kMailIsTurnedOff]?null:s.createElement(TD.Z,{title:(0,ue.Z)("Mail Filters"),deleteTitle:(0,ue.Z)("Delete Filter"),addTipString:(0,ue.Z)("Add Mail Filter"),deleteTipString:(0,ue.Z)("Delete Mail Filter"),masterLayout:1,items:this.remapMailFilters(this.state.mailFilters),onRemove:this.removeAt,renderListItem:this.renderListItem,renderContent:this.renderContent,contentStrings:ox,renderCreate:this.renderCreate,renderCreateListItem:this.renderCreateListItem,renderEmpty:this.renderEmpty,emptyStrings:hx,filter:this.props.filter,style:{height:400},__source:{fileName:ux,lineNumber:151,columnNumber:7}})}}const gx=(0,bi.Z)(px,dx);var bx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\mail\\MailSettings.jsx";const Nx=[P.kCalendarRelativeDates,P.kMailAccounts,P.kMailCheckInterval,P.kMailComposerColors,P.kMailCountersPanelDraftsEnabled,P.kMailCountersPanelSwitcherEnabled,P.kMailCountersPanelTrashEnabled,P.kMailCountersPanelUnseenEnabled,P.kMailCountersStatusButtonEnabled,P.kMailDefaultAccount,P.kMailDeleteInOtherLocations,P.kMailImapLogsOn,P.kMailMarkDeleteInOtherLocations,P.kMailNotifications,P.kMailNotificationsOnSuccessfullySent,P.kMailNotificationsSoundOn,P.kMailPanelActivityIndicatorsEnabled,P.kMailShowUnsubscribed,P.kMailSingleClickTabs,P.kMailSmtpLogsOn,P.kMailSearchOnEnter,P.kMailViewLayout],fx=st.Z.getEventHandler;class _x extends s.Component{constructor(...e){var t,n,i;super(...e),i=e=>e.map(((e,t)=>s.createElement("div",{className:"setting-single",key:"default-account-"+t,__source:{fileName:bx,lineNumber:72,columnNumber:7}},s.createElement("label",{__source:{fileName:bx,lineNumber:73,columnNumber:9}},s.createElement("input",{type:"radio",value:e.MAIL_EMAIL,__source:{fileName:bx,lineNumber:74,columnNumber:11}}),s.createElement("span",{__source:{fileName:bx,lineNumber:75,columnNumber:11}},e.MAIL_EMAIL))))),(n="renderMailAccountRadioGroup")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}render(){const e=this.props.prefValues[P.kMailAccounts];return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Mail Settings"),filter:this.props.filter,__source:{fileName:bx,lineNumber:85,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:86,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:87,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:88,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailImapLogsOn],onChange:fx(P.kMailImapLogsOn),__source:{fileName:bx,lineNumber:89,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:92,columnNumber:15}},(0,ue.Z)("Turn on IMAP Logs in Console"),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:93,columnNumber:15}},(0,ue.Z)("Reconnect mail accounts to make this effective. Note that this will degrade performance of the mail client."))))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:99,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:100,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailSmtpLogsOn],onChange:fx(P.kMailSmtpLogsOn),__source:{fileName:bx,lineNumber:101,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:104,columnNumber:15}},(0,ue.Z)("Turn on SMTP Logs in Console"),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:105,columnNumber:15}},(0,ue.Z)("Turn this on for debugging problems with sending mail. Will take effect immediately. No need to reconnect.")))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:113,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:114,columnNumber:11}},(0,ue.Z)("Mail View Layout")),s.createElement(_i,{name:"mailviewgroup",value:this.props.prefValues[P.kMailViewLayout],onChange:fx(P.kMailViewLayout),__source:{fileName:bx,lineNumber:115,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:118,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:119,columnNumber:15}},s.createElement("input",{type:"radio",value:"horizontal",__source:{fileName:bx,lineNumber:120,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:121,columnNumber:17}},(0,ue.Z)("mail","Horizontal")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:124,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:125,columnNumber:15}},s.createElement("input",{type:"radio",value:"vertical",__source:{fileName:bx,lineNumber:126,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:127,columnNumber:17}},(0,ue.Z)("mail","Vertical")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:130,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:131,columnNumber:15}},s.createElement("input",{type:"radio",value:"vertical_wide",__source:{fileName:bx,lineNumber:132,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:133,columnNumber:17}},(0,ue.Z)("Vertical Wide"))))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:bx,lineNumber:138,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:139,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kCalendarRelativeDates],onChange:fx(P.kCalendarRelativeDates),__source:{fileName:bx,lineNumber:140,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:144,columnNumber:15}},(0,ue.Z)("Use Relative Dates"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:149,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:150,columnNumber:11}},(0,ue.Z)("Mail Notifications")),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:151,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:152,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailNotifications],onChange:fx(P.kMailNotifications),__source:{fileName:bx,lineNumber:153,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:157,columnNumber:15}},(0,ue.Z)("mail","Enabled")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:bx,lineNumber:160,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:161,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailNotificationsSoundOn],disabled:!this.props.prefValues[P.kMailNotifications],onChange:fx(P.kMailNotificationsSoundOn),__source:{fileName:bx,lineNumber:162,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:167,columnNumber:15}},(0,ue.Z)("Play Sound")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:170,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:171,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailNotificationsOnSuccessfullySent],disabled:!this.props.prefValues[P.kMailNotifications],onChange:fx(P.kMailNotificationsOnSuccessfullySent),__source:{fileName:bx,lineNumber:172,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:176,columnNumber:15}},(0,ue.Z)("Notify on Successfully Sent"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:181,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:182,columnNumber:11}},(0,ue.Z)("Unseen Messages")),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:183,columnNumber:11}},(0,ue.Z)("Enables a workflow where you deliberately mark messages as read")),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:187,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:188,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailCountersPanelUnseenEnabled],onChange:fx(P.kMailCountersPanelUnseenEnabled),__source:{fileName:bx,lineNumber:189,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:192,columnNumber:15}},(0,ue.Z)("Count Unseen Messages"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:198,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:199,columnNumber:11}},(0,ue.Z)("Mail Search")),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:200,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:201,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailSearchOnEnter],onChange:fx(P.kMailSearchOnEnter),__source:{fileName:bx,lineNumber:202,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:205,columnNumber:15}},(0,ue.Z)("Start Search Using Enter Key"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:211,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:212,columnNumber:11}},(0,ue.Z)("Mail Counters")),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:213,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:214,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailCountersStatusButtonEnabled],onChange:fx(P.kMailCountersStatusButtonEnabled),__source:{fileName:bx,lineNumber:215,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:218,columnNumber:15}},(0,ue.Z)("Show on Status Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:222,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:223,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailCountersPanelSwitcherEnabled],onChange:fx(P.kMailCountersPanelSwitcherEnabled),__source:{fileName:bx,lineNumber:224,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:227,columnNumber:15}},(0,ue.Z)("Show on Panel Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:232,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:233,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailCountersPanelTrashEnabled],onChange:fx(P.kMailCountersPanelTrashEnabled),__source:{fileName:bx,lineNumber:234,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:237,columnNumber:15}},(0,ue.Z)("Include Trashed Messages")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:243,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:244,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailCountersPanelDraftsEnabled],onChange:fx(P.kMailCountersPanelDraftsEnabled),__source:{fileName:bx,lineNumber:245,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:248,columnNumber:15}},(0,ue.Z)("Include Draft Messages"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:256,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:257,columnNumber:11}},(0,ue.Z)("mail","Panel")),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:258,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:259,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailSingleClickTabs],onChange:fx(P.kMailSingleClickTabs),__source:{fileName:bx,lineNumber:260,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:263,columnNumber:15}},(0,ue.Z)("Open Mail Tabs with Single Click")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:267,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:268,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailPanelActivityIndicatorsEnabled],onChange:fx(P.kMailPanelActivityIndicatorsEnabled),__source:{fileName:bx,lineNumber:269,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:272,columnNumber:15}},(0,ue.Z)("Show Activity Indicators"))),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:276,columnNumber:13}},(0,ue.Z)("Briefly display status next to folders when updating."))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:280,columnNumber:11}},s.createElement("label",{__source:{fileName:bx,lineNumber:281,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailShowUnsubscribed],onChange:fx(P.kMailShowUnsubscribed),__source:{fileName:bx,lineNumber:282,columnNumber:15}}),s.createElement("span",{__source:{fileName:bx,lineNumber:285,columnNumber:15}},(0,ue.Z)("Show Unsubscribed Mailboxes"))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:291,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:292,columnNumber:11}},(0,ue.Z)("Check For New Mail")),s.createElement(_i,{name:"mailcheckintervalgroup",value:this.props.prefValues[P.kMailCheckInterval],onChange:fx(P.kMailCheckInterval),__source:{fileName:bx,lineNumber:294,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:297,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:298,columnNumber:15}},s.createElement("input",{type:"radio",value:"one_minute",__source:{fileName:bx,lineNumber:299,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:300,columnNumber:17}},(0,ue.Z)("Every Minute")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:303,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:304,columnNumber:15}},s.createElement("input",{type:"radio",value:"fifteen_minutes",__source:{fileName:bx,lineNumber:305,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:306,columnNumber:17}},(0,ue.Z)("Every 15 Minutes")))),s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:309,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:310,columnNumber:15}},s.createElement("input",{type:"radio",value:"manual",__source:{fileName:bx,lineNumber:311,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:312,columnNumber:17}},(0,ue.Z)("mail","Manually")))))),e&&s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:319,columnNumber:11}},s.createElement("h3",{__source:{fileName:bx,lineNumber:320,columnNumber:13}},(0,ue.Z)("Default Sender in New Messages")),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:321,columnNumber:13}},(0,ue.Z)("Used as fallback if no account is selected")),s.createElement(_i,{name:"maildefaultaccountgroup",value:this.props.prefValues[P.kMailDefaultAccount]||he.Y6,onChange:fx(P.kMailDefaultAccount),__source:{fileName:bx,lineNumber:324,columnNumber:13}},this.renderMailAccountRadioGroup(e),s.createElement("div",{className:"setting-single",key:"default-account-mru",__source:{fileName:bx,lineNumber:328,columnNumber:15}},s.createElement("label",{__source:{fileName:bx,lineNumber:329,columnNumber:17}},s.createElement("input",{type:"radio",value:he.Y6,__source:{fileName:bx,lineNumber:330,columnNumber:19}}),s.createElement("span",{__source:{fileName:bx,lineNumber:331,columnNumber:19}},(0,ue.Z)("Most Recently Used")))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:338,columnNumber:9}},s.createElement("h3",{__source:{fileName:bx,lineNumber:339,columnNumber:11}},(0,ue.Z)("Composer Colors")),s.createElement("p",{className:"info",__source:{fileName:bx,lineNumber:340,columnNumber:11}},(0,ue.Z)("Doesn’t affect the color of sent messages")),s.createElement(_i,{name:"mailcomposercolors",value:this.props.prefValues[P.kMailComposerColors],onChange:fx(P.kMailComposerColors),__source:{fileName:bx,lineNumber:343,columnNumber:11}},s.createElement("div",{className:"setting-single",key:"composer-background-white",__source:{fileName:bx,lineNumber:346,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:347,columnNumber:15}},s.createElement("input",{type:"radio",value:"black_on_white",__source:{fileName:bx,lineNumber:348,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:349,columnNumber:17}},(0,ue.Z)("Black on White")))),s.createElement("div",{className:"setting-single",key:"composer-background-theme",__source:{fileName:bx,lineNumber:352,columnNumber:13}},s.createElement("label",{__source:{fileName:bx,lineNumber:353,columnNumber:15}},s.createElement("input",{type:"radio",value:"inherit_themes",__source:{fileName:bx,lineNumber:354,columnNumber:17}}),s.createElement("span",{__source:{fileName:bx,lineNumber:355,columnNumber:17}},(0,ue.Z)("Inherit Theme Colors")))))),s.createElement("div",{className:"setting-group",__source:{fileName:bx,lineNumber:361,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:bx,lineNumber:362,columnNumber:11}},s.createElement("h3",{__source:{fileName:bx,lineNumber:363,columnNumber:13}},(0,ue.Z)("Delete Duplicate Messages")),s.createElement("select",{value:this.props.prefValues[P.kMailMarkDeleteInOtherLocations],onChange:fx(P.kMailMarkDeleteInOtherLocations),__source:{fileName:bx,lineNumber:364,columnNumber:13}},s.createElement("option",{value:"ask",__source:{fileName:bx,lineNumber:367,columnNumber:15}},(0,ue.Z)("Ask")),s.createElement("option",{value:"folders",__source:{fileName:bx,lineNumber:368,columnNumber:15}},(0,ue.Z)("From All Folders on Current Account")),s.createElement("option",{value:"accounts",__source:{fileName:bx,lineNumber:369,columnNumber:15}},(0,ue.Z)("From All Accounts and Folders")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:bx,lineNumber:372,columnNumber:11}},s.createElement("h3",{__source:{fileName:bx,lineNumber:373,columnNumber:13}},(0,ue.Z)("Permanently Delete Duplicate Messages")),s.createElement("select",{value:this.props.prefValues[P.kMailDeleteInOtherLocations],onChange:fx(P.kMailDeleteInOtherLocations),__source:{fileName:bx,lineNumber:374,columnNumber:13}},s.createElement("option",{value:"ask",__source:{fileName:bx,lineNumber:377,columnNumber:15}},(0,ue.Z)("Ask")),s.createElement("option",{value:"selected",__source:{fileName:bx,lineNumber:378,columnNumber:15}},(0,ue.Z)("From the Current Folder Only")),s.createElement("option",{value:"folders",__source:{fileName:bx,lineNumber:379,columnNumber:15}},(0,ue.Z)("From All Folders on Current Account")),s.createElement("option",{value:"accounts",__source:{fileName:bx,lineNumber:380,columnNumber:15}},(0,ue.Z)("From All Accounts and Folders"))))))}}const vx=(0,bi.Z)(_x,Nx);var Ex=n(33478),Cx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListIgnoredLists.jsx";function wx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class yx extends s.PureComponent{constructor(...e){super(...e),wx(this,"state",{ignoredMailingLists:Ex.Z.getIgnored()}),wx(this,"mailingListsChanged",(e=>{if("mailingLists"===e.target){const e=Ex.Z.getIgnored();if(this.state.ignoredMailingLists.length===e.length&&this.state.ignoredMailingLists.every(((t,n)=>t===e[n])))return;this.setState({ignoredMailingLists:e})}})),wx(this,"remap",(e=>e.map(((e,t)=>({name:e.listId,key:String(t)}))))),wx(this,"renderListItem",((e,t)=>s.createElement("span",{title:t.listId,__source:{fileName:Cx,lineNumber:56,columnNumber:12}},e))),wx(this,"onRemove",(e=>{K.Z.removeIgnoredMailingList(this.state.ignoredMailingLists[e])})),wx(this,"onChangeIgnoreAll",(e=>{const{value:t}=e.target,n="true"===t,s=Ex.Z.get(he.ZW);s&&s.isIgnored!==n&&(s.isIgnored=!s.isIgnored,K.Z.updateMailingListGroup(s))}))}componentDidMount(){Cm.C.addChangeListener(this.mailingListsChanged)}componentWillUnmount(){Cm.C.removeChangeListener(this.mailingListsChanged)}render(){return s.createElement("div",{className:"detail",__source:{fileName:Cx,lineNumber:75,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:Cx,lineNumber:76,columnNumber:9}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:Cx,lineNumber:77,columnNumber:11}},s.createElement("h3",{__source:{fileName:Cx,lineNumber:78,columnNumber:13}},(0,ue.Z)("Uncategorized mailing lists")),s.createElement("p",{className:"info",__source:{fileName:Cx,lineNumber:79,columnNumber:13}},(0,ue.Z)("Manage the rest of the mailing lists that have been automatically generated using the list-id attribute"))),s.createElement(_i,{name:"subFolderType",value:Ex.Z.areUncategorizedMailingListsIgnored(),onChange:this.onChangeIgnoreAll,className:"setting-group unlimited",__source:{fileName:Cx,lineNumber:81,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:Cx,lineNumber:87,columnNumber:13}},s.createElement("label",{__source:{fileName:Cx,lineNumber:88,columnNumber:15}},s.createElement("input",{type:"radio",value:!0,__source:{fileName:Cx,lineNumber:89,columnNumber:17}}),s.createElement("span",{__source:{fileName:Cx,lineNumber:90,columnNumber:17}},(0,ue.Z)("mailinglist subfolder","Ignore All")))),s.createElement("div",{className:"setting-single",__source:{fileName:Cx,lineNumber:93,columnNumber:13}},s.createElement("label",{__source:{fileName:Cx,lineNumber:94,columnNumber:15}},s.createElement("input",{type:"radio",value:!1,__source:{fileName:Cx,lineNumber:95,columnNumber:17}}),s.createElement("span",{__source:{fileName:Cx,lineNumber:96,columnNumber:17}},(0,ue.Z)("Ignore Selected"))))),s.createElement("div",{className:"setting-single master-detail sortable-list",__source:{fileName:Cx,lineNumber:100,columnNumber:11}},s.createElement(NZ.Z,{items:this.remap(this.state.ignoredMailingLists),renderListItem:this.renderListItem,filter:this.props.filter,deleteTipString:(0,ue.Z)("Stop ignoring uncategorized mailing list"),supportDragAndDrop:!1,onRemove:this.onRemove,__source:{fileName:Cx,lineNumber:101,columnNumber:13}}))))}}const Sx=yx;var Tx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListManagerEditor.jsx";function kx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ix={Sender:(0,ue.Z)("Sender"),"List ID":(0,ue.Z)("List ID")};class Ax extends s.Component{constructor(...e){super(...e),kx(this,"state",{mailingList:this.props.mailingList,updating:!1}),kx(this,"updateListId",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({mailingList:e})=>{e.listId===e.name&&(e.name=t),e.listId=t})))})),kx(this,"updateName",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({mailingList:e})=>{e.name=t})))})),kx(this,"onlyPathChanged",(()=>Object.keys(this.state.mailingList).every((e=>"name"===e?this.state.mailingList[e]!==this.props.mailingList[e]:this.state.mailingList[e]===this.props.mailingList[e])))),kx(this,"saveMailingList",(async()=>{this.setState({updating:!0}),this.onlyPathChanged()?await K.Z.updateMailingListGroupName(this.state.mailingList):await K.Z.updateMailingListGroup(this.state.mailingList)})),kx(this,"hasChanged",(()=>this.state.mailingList!==this.props.mailingList)),kx(this,"isIgnoredChanged",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({mailingList:e})=>{e.isIgnored="true"===t})))})),kx(this,"onChangeSubfolderType",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({mailingList:e})=>{e.subFolderType=t})))})),kx(this,"onChangeParentFolder",(e=>{const t=e.target.value;this.setState((0,T.Uy)((({mailingList:e})=>{e.parentFolderType=t})))})),kx(this,"cancel",(()=>{this.setState({mailingList:this.props.mailingList})}))}UNSAFE_componentWillReceiveProps(e){e.mailingList!==this.props.mailingList&&this.setState((0,T.Uy)((t=>{t.mailingList=e.mailingList,t.updating=!1})))}render(){const e=this.state.mailingList;return s.createElement("form",{className:"detail",style:{overflowY:"scroll"},__source:{fileName:Tx,lineNumber:113,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:Tx,lineNumber:114,columnNumber:9}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:Tx,lineNumber:115,columnNumber:11}},s.createElement("h3",{__source:{fileName:Tx,lineNumber:116,columnNumber:13}},(0,ue.Z)("Mailing List Group")),s.createElement("p",{className:"info",__source:{fileName:Tx,lineNumber:117,columnNumber:13}},(0,ue.Z)("Group your autogenerated mailing lists. When a match is found, the whole list ID is used to group messages."))),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:Tx,lineNumber:123,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:Tx,lineNumber:124,columnNumber:13}},s.createElement("label",{__source:{fileName:Tx,lineNumber:125,columnNumber:15}},this.props.searchableStrings["List ID"],s.createElement("select",{name:"parentFolderType",value:e.parentFolderType,onChange:this.onChangeParentFolder,__source:{fileName:Tx,lineNumber:127,columnNumber:17}},s.createElement("option",{value:"endsWith",__source:{fileName:Tx,lineNumber:132,columnNumber:19}},(0,ue.Z)("Ends with")),s.createElement("option",{value:"startsWith",__source:{fileName:Tx,lineNumber:133,columnNumber:19}},(0,ue.Z)("Starts with"))),s.createElement("input",{type:"text",onChange:this.updateListId,value:e.listId,disabled:!this.props.isCreating,__source:{fileName:Tx,lineNumber:135,columnNumber:17}}))),s.createElement(_i,{name:"mailcheckintervalgroup",value:e.isIgnored,onChange:this.isIgnoredChanged,className:"setting-single",__source:{fileName:Tx,lineNumber:143,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:Tx,lineNumber:148,columnNumber:15}},s.createElement("label",{__source:{fileName:Tx,lineNumber:149,columnNumber:17}},s.createElement("input",{type:"radio",value:"true",__source:{fileName:Tx,lineNumber:150,columnNumber:19}}),s.createElement("span",{__source:{fileName:Tx,lineNumber:151,columnNumber:19}},(0,ue.Z)("Not a Mailing List")))),s.createElement("div",{className:"setting-single",__source:{fileName:Tx,lineNumber:154,columnNumber:15}},s.createElement("label",{__source:{fileName:Tx,lineNumber:155,columnNumber:17}},s.createElement("input",{type:"radio",value:"false",__source:{fileName:Tx,lineNumber:156,columnNumber:19}}),s.createElement("span",{__source:{fileName:Tx,lineNumber:157,columnNumber:19}},(0,ue.Z)("A Mailing List"))))),s.createElement("div",{className:"setting-single",__source:{fileName:Tx,lineNumber:161,columnNumber:13}},s.createElement("label",{__source:{fileName:Tx,lineNumber:162,columnNumber:15}},s.createElement("span",{__source:{fileName:Tx,lineNumber:163,columnNumber:17}},(0,ue.Z)("Folder Name")),s.createElement("input",{type:"text",onChange:this.updateName,disabled:e.isIgnored,value:e.name,__source:{fileName:Tx,lineNumber:164,columnNumber:17}}))),s.createElement("div",{className:"setting-single",__source:{fileName:Tx,lineNumber:172,columnNumber:13}},s.createElement("label",{__source:{fileName:Tx,lineNumber:173,columnNumber:15}},s.createElement("span",{__source:{fileName:Tx,lineNumber:174,columnNumber:17}},(0,ue.Z)("Subfolder Grouping")),s.createElement("select",{disabled:e.isIgnored,name:"subFolderType",value:e.subFolderType,onChange:this.onChangeSubfolderType,__source:{fileName:Tx,lineNumber:175,columnNumber:17}},s.createElement("option",{value:"none",__source:{fileName:Tx,lineNumber:181,columnNumber:19}},(0,ue.Z)("mailinglist subfolder","None")),s.createElement("option",{value:"host",__source:{fileName:Tx,lineNumber:182,columnNumber:19}},(0,ue.Z)("Host")),s.createElement("option",{value:"title",__source:{fileName:Tx,lineNumber:183,columnNumber:19}},(0,ue.Z)("Title")),s.createElement("option",{value:"senderName",__source:{fileName:Tx,lineNumber:184,columnNumber:19}},(0,ue.Z)("Sender Name"))))),this.state.updating&&s.createElement(Qc,{type:"info",__source:{fileName:Tx,lineNumber:190,columnNumber:15}},(0,ue.Z)("Updating")))),s.createElement("div",{className:"detail-toolbar",__source:{fileName:Tx,lineNumber:194,columnNumber:9}},!this.props.isCreating&&s.createElement(s.Fragment,null,s.createElement("input",{type:"submit",className:"primary",disabled:!this.hasChanged()||this.state.updating,onClick:this.saveMailingList,value:(0,ue.Z)("Update Mailing List Group"),__source:{fileName:Tx,lineNumber:197,columnNumber:15}}),s.createElement("input",{type:"button",disabled:!this.hasChanged(),onClick:this.cancel,value:(0,ue.Z)("Cancel"),__source:{fileName:Tx,lineNumber:204,columnNumber:15}})),this.props.isCreating&&s.createElement("input",{type:"submit",className:"primary",disabled:this.props.mailingList===this.state.mailingList||this.state.updating,onClick:this.saveMailingList,value:(0,ue.Z)("Add Mailing List Group"),__source:{fileName:Tx,lineNumber:213,columnNumber:13}})))}}const Zx=Ax;var Px="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListManager.jsx";function Dx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Mx=[P.kMailAccounts,P.kMailIsTurnedOff],Ox={"Mailing lists added in the mail panel will appear here.":(0,ue.Z)("Mailing lists added in the mail panel will appear here.")};class xx extends s.PureComponent{constructor(e){super(e),Dx(this,"mailingListGroupsChanged",(e=>{if("mailingLists"===e.target){const e=this.getMailingLists();if(this.state.mailingListGroups.length===e.length&&this.state.mailingListGroups.every(((t,n)=>t===e[n])))return;this.setState({mailingListGroups:e})}})),Dx(this,"getMailingLists",(()=>Ex.Z.getGroups())),Dx(this,"remapMailingListGroups",(e=>{const t=[...e];return t.push({name:"Uncategorized mailing lists",isDefault:!0}),t.map(((e,t)=>{let n=e.name;return e.listId&&n!==e.listId&&(n+=" ("+e.listId+")"),{...e,name:n,key:String(t)}}))})),Dx(this,"getFavicon",(e=>{if(e){const t=e.split("@");if(t&&2===t.length){const e=t[1].split(".");if(e&&e[1]&&e[1].length>1)return s.createElement(Ls,{key:0,className:"item-icon",url:`${t[1]}`,loadType:"page",__source:{fileName:Px,lineNumber:98,columnNumber:13}})}}return s.createElement("svg",{className:"item-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",key:0,__source:{fileName:Px,lineNumber:109,columnNumber:7}},s.createElement("path",{opacity:".35",d:"M0 3h8v1H0zM0 5h3v1H0zM0 7h3v1H0z",__source:{fileName:Px,lineNumber:114,columnNumber:9}}),s.createElement("path",{d:"M15 5H5a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zm-1 4l-4 2-4-2V7l4 2 4-2z",__source:{fileName:Px,lineNumber:115,columnNumber:9}}))})),Dx(this,"renderListItem",((e,t)=>s.createElement(s.Fragment,null,"matches"!==t.parentFolderType&&this.getFavicon(t.listId),s.createElement("div",{className:"item-title",__source:{fileName:Px,lineNumber:125,columnNumber:7}},e)))),Dx(this,"renderContent",((e,t)=>this.state.mailingListGroups.length===e?s.createElement(Sx,{filter:this.props.filter,__source:{fileName:Px,lineNumber:133,columnNumber:14}}):s.createElement(Zx,{searchableStrings:t,mailingList:this.state.mailingListGroups[e],__source:{fileName:Px,lineNumber:137,columnNumber:14}}))),Dx(this,"renderEmpty",(e=>s.createElement("div",{className:"detail",__source:{fileName:Px,lineNumber:144,columnNumber:5}},s.createElement("div",{className:"detail-content",__source:{fileName:Px,lineNumber:145,columnNumber:7}},s.createElement("p",{__source:{fileName:Px,lineNumber:146,columnNumber:9}},e["Mailing lists added in the mail panel will appear here."]))))),Dx(this,"renderCreateListItem",(()=>s.createElement("div",{className:"item-title",__source:{fileName:Px,lineNumber:152,columnNumber:5}},(0,ue.Z)("New Mailing List Group")))),Dx(this,"renderCreate",(e=>s.createElement(Zx,{isCreating:!0,searchableStrings:e,mailingList:{name:"",isIgnored:!1,subFolderType:"host",parentFolderType:"endsWith",listId:""},__source:{fileName:Px,lineNumber:163,columnNumber:12}}))),Dx(this,"removeAt",(e=>{this.setState((t=>{const n=[...t.mailingListGroups],[s]=n.splice(e,1);return K.Z.removeMailingListGroup(s),{mailingListGroups:n}}))})),this.state={mailingListGroups:this.getMailingLists()}}componentDidMount(){Cm.C.addChangeListener(this.mailingListGroupsChanged)}componentWillUnmount(){Cm.C.removeChangeListener(this.mailingListGroupsChanged)}render(){if(0===this.props.prefValues[P.kMailAccounts].length||this.props.prefValues[P.kMailIsTurnedOff])return null;const e=this.remapMailingListGroups(this.state.mailingListGroups);return s.createElement(TD.Z,{key:e.length,title:(0,ue.Z)("Mailing Lists"),className:"setting-mailing-lists",deleteTitle:(0,ue.Z)("Delete List"),addTipString:(0,ue.Z)("Add Mailing List"),deleteTipString:(0,ue.Z)("Delete Mailing List"),items:e,onRemove:this.removeAt,masterLayout:1,renderListItem:this.renderListItem,renderContent:this.renderContent,contentStrings:Ix,renderCreate:this.renderCreate,renderCreateListItem:this.renderCreateListItem,renderEmpty:this.renderEmpty,emptyStrings:Ox,filter:this.props.filter,style:{height:400},__source:{fileName:Px,lineNumber:186,columnNumber:7}})}}const Lx=(0,bi.Z)(xx,Mx);var Rx=n(34258);const Bx="vivaldi/x-commanditem",Fx="vivaldi/x-commandfolder",Ux="vivaldi/x-commandmixed",Vx="vivaldi/x-menuitem",Hx="vivaldi/x-menudefaulttopfolder",Wx="vivaldi/x-menufolder",zx="vivaldi/x-menumixed",Gx="vivaldi/x-bookmarkcontainer";function Kx(e){return(0,oc.$)(e)}var jx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\CommandList.jsx";function Yx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $x extends s.Component{constructor(...e){super(...e),Yx(this,"refTreeList",s.createRef()),Yx(this,"_searchKey",""),Yx(this,"_appendToSearch",!1),Yx(this,"_isIMEOpen",!1),Yx(this,"state",{commandItems:[],searchFilter:""}),Yx(this,"_initialSetup",(0,za.Z)((async(e="")=>{if(!this._isMounted)return!1;const{commandItems:t,searchFilter:n}=await this._getStateWithSearchFilter(e);this.setState({commandItems:t,searchFilter:n})}),200)),Yx(this,"_onCommandStoreChanged",(e=>{if("menu"===e){const e=this.state.searchFilter;this._initialSetup(e)}})),Yx(this,"_getStateWithSearchFilter",(async e=>{const t="chainfolder",n="appfolder",s=e=>e.sort(((e,t)=>{if("container"===e.type&&"container"===t.type){const n=e.settingsLabel||"",s=t.settingsLabel||"";return n<s?-1:n>s?1:0}return"container"===e.type&&"container"!==t.type?"separator"===t.type?1:-1:"container"!==e.type&&"container"===t.type?"separator"===e.type?-1:1:"separator"===e.type||"separator"===t.type||e.label<t.label?-1:e.label>t.label?1:0})),i=(e,t)=>({parentId:e,id:t.id||"",type:t.type,label:t.settingsLabel||t.label,action:"",shortcuts:t.shortcuts}),r=e=>s(F.Z.makeCommandList().filter((t=>-1!==(t.settingsLabel||t.label||"").toLowerCase().indexOf(e)))),a=async e=>{const t=await F.Z.getChainCommandsShortcuts();return s(A.ZP.get(P.kChainedCommandsCommandList).map((e=>{const n=t.find((t=>t.name===e.name));return{type:"command",action:e.name,id:e.name,...z.Z.makeLabelPair(e.label),shortcuts:n?.shortcuts}})).filter((t=>-1!==(t.label||"").toLowerCase().indexOf(e))))},o=async(e,o)=>{const l=((e,t)=>s(Ss.makeCommandList(e).filter((e=>{const n=e.settingsLabel||e.label;return void 0===n?(console.warn("Action ignored for command list",e.action),!1):-1!==n.toLowerCase().indexOf(t)}))))(e,o).map((e=>i(t,e))),c=r(o).map((e=>i(n,e))),u=(await a(o)).map((e=>i(t,e)));return[{id:"contextfolder",parentId:"",label:(0,ue.Z)("Context Commands"),action:"",type:"folder",children:l},{id:n,parentId:"",label:(0,ue.Z)("Application Commands"),action:"",type:"folder",children:c},{id:t,parentId:"",label:(0,ue.Z)("Command Chains"),action:"",type:"folder",children:u}]};let l=[];if(!Ss.isSection(this.props.menu)){const s=e.toLowerCase();l=Ss.getKeys().includes(this.props.menu)?await o(this.props.menu,s):await(async e=>{const s=r(e).map((e=>i(n,e))),o=(await a(e)).map((e=>i(t,e)));return[{id:n,parentId:"",label:(0,ue.Z)("Application Commands"),action:"",type:"folder",children:s},{id:t,parentId:"",label:(0,ue.Z)("Command Chains"),action:"",type:"folder",children:o}]})(s);const c={parentId:"",id:"separator",type:"separator",action:"",label:""};l.splice(0,0,c);const u=F.Z.makeCommandList(F.Z.getOpenLinkName());if(u&&1===u.length&&u[0].id){const e={parentId:"",id:u[0].id,type:u[0].type,action:"",label:u[0].label};l.splice(0,0,e)}}return{searchFilter:e,commandItems:l}})),Yx(this,"_hasChildren",(e=>Boolean(e.children?.length))),Yx(this,"_isFolder",(e=>Boolean(e.children))),Yx(this,"_isSeparator",(e=>"separator"===e.type)),Yx(this,"_isValidDragSource",(e=>!this._isFolder(e))),Yx(this,"_validateForDrag",(e=>e)),Yx(this,"_getDragData",((e,t)=>"")),Yx(this,"_getNodeById",(e=>{const t=n=>{if(n)for(let s=0;s<n.length;s++){const i=n[s];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(this.state.commandItems)})),Yx(this,"_getMimeData",(e=>{let t="";const n=[];return e.forEach((e=>{const s=this._getNodeById(e);if(s&&void 0!==s.type){t="folder"===s.type?""===t||t===Fx?Fx:Ux:""===t||t===Bx?Bx:Ux;const e={id:"",type:s.type,action:s.id};"folder"===s.type&&(e.title=s.label);const i=F.Z.getCommandParameter(e.action);if(i&&(e.parameter=i),F.Z.getOpenLinkName()===e.action){const t=F.Z.getCommandLabel(e.action);t&&(e.title=t)}const r={menu:"contextfolder"===s.parentId?this.props.menu:"",node:e};n.push(r)}})),{mimeType:t,payload:JSON.stringify(n)}})),Yx(this,"_setDragData",((e,t)=>{const n=this._getMimeData(t);e.setData(n.mimeType,n.payload)})),Yx(this,"_copy",((e,t)=>{const n=e.clipboardData;if(n){const e=this._getMimeData(t);n.setData(e.mimeType,e.payload)}(0,Rx.Z)(e)})),Yx(this,"_onKeyDown",(e=>{const t=(e,t,n)=>{for(let s=t;s<n.length;s++){const t=n[s];if(t.label&&t.label.toUpperCase().startsWith(e))return t}};switch(e.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:if((0,uh.VV)(e)){const n=this.refTreeList.current?.getSelectedItem(),s=n?this._getNodeById(n.parentId):void 0,i=s?s.children||[]:this.state.commandItems,r=(n?i.findIndex((e=>e.id===n.id)):-1)+1,a=this._searchKey.length;if("ArrowLeft"===e.key||"ArrowRight"===e.key){if(0===a)break}else if(this._appendToSearch&&!1===e.repeat){const t=e.key.toUpperCase();1===a&&this._searchKey[0]===t||(this._searchKey+=t)}else this._searchKey=e.key.toUpperCase();let o=t(this._searchKey,r,i);o||0===r||(o=t(this._searchKey,0,i)),o&&(this.refTreeList.current?.selectByNode(o),e.preventDefault()),clearTimeout(this._timeout),this._appendToSearch=!0,this._timeout=setTimeout((()=>{this._appendToSearch=!1}),400)}}})),Yx(this,"_onSearchFilterChange",(async e=>{if(this._isIMEOpen)this.setState({searchFilter:e.target.value});else{const t=await this._getStateWithSearchFilter(e.target.value);this.setState(t)}})),Yx(this,"_handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),Yx(this,"_getContextMenuItems",(e=>e?[{testVisibility:()=>this._isValidForClipboard(e)&&this.props.canAddToTree(),handler:()=>{const t=this._getMimeData(e.id?[e.id]:[]);this.props.addToTree(t.mimeType,t.payload)},...(0,Mn.Z)("Add to Content")}]:[])),Yx(this,"_getContextMenuItemProps",(e=>({showCopy:this._isValidForClipboard(e)}))),Yx(this,"_isValidForClipboard",(e=>!this._isFolder(e))),Yx(this,"rowComponent",(e=>{const t=e.node,n=16*t.level+"px",i=16*(t.level+1)+"px";if(this._isSeparator(t))return s.createElement("label",{key:"0",style:{marginLeft:i},__source:{fileName:jx,lineNumber:521,columnNumber:9}},s.createElement("hr",{className:"separator-left",__source:{fileName:jx,lineNumber:522,columnNumber:11}}),(0,ue.Z)("Menu Separator"),s.createElement("hr",{className:"separator-right",__source:{fileName:jx,lineNumber:524,columnNumber:11}}));let r=t.label;t.ellipsis&&(r+=z.Z.ellipsisString()),"container"===t.type&&t.settingsLabel&&(r=t.settingsLabel);const a=this._isFolder(t)&&this._hasChildren(t);let o=A.ZP.get(P.kKeyboardShortcutsEnable);return t.shortcuts?.length>0&&1===t.shortcuts[0].length&&o&&(o=z.Z.isFeatureCommand(t)?A.ZP.get(P.kKeyboardShortcutsEnableSingleKeyForMail):A.ZP.get(P.kKeyboardShortcutsEnableSingleKey)),s.createElement("label",{key:"0",__source:{fileName:jx,lineNumber:551,columnNumber:7}},a&&s.createElement("span",{className:"expand-icon",style:{marginLeft:n},onMouseDown:Rx.Z,onMouseUp:()=>this._handleExpandClick(t.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:jx,lineNumber:553,columnNumber:11}}),s.createElement("span",{className:"title",style:a?null:{marginLeft:i},__source:{fileName:jx,lineNumber:560,columnNumber:9}},r),t.shortcuts&&t.shortcuts.length>0&&s.createElement("span",{className:"item-count",__source:{fileName:jx,lineNumber:566,columnNumber:11}},Kx(t.shortcuts[0])))}))}componentDidMount(){this._isMounted=!0,this._initialSetup(),F.Z.addChangeListener(this._onCommandStoreChanged)}componentWillUnmount(){this._isMounted=!1,clearTimeout(this._timeout),F.Z.removeChangeListener(this._onCommandStoreChanged)}componentDidUpdate(e,t){0===t.commandItems?.length&&this.state.commandItems.length>0&&this.refTreeList.current?.selectByNode(this.state.commandItems[0]),this.props.menu!==e.menu&&this._initialSetup(this.state.searchFilter)}render(){return s.createElement(s.Fragment,null,s.createElement(Sg,{ref:this.refTreeList,rowComponent:this.rowComponent,nodes:this.state.commandItems,enableDragAndDrop:!0,validateForDrag:this._validateForDrag,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,hasChildren:this._hasChildren,isFolder:this._isFolder,isValidForClipboard:this._isValidForClipboard,onCopy:this._copy,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,onKeyDown:this._onKeyDown,__source:{fileName:jx,lineNumber:577,columnNumber:9}}),s.createElement("div",{className:"setting-single",__source:{fileName:jx,lineNumber:594,columnNumber:9}},s.createElement("input",{type:"search",className:"menu-search",value:this.state.searchFilter,placeholder:(0,ue.Z)("Filter Commands"),onCompositionStart:()=>this._isIMEOpen=!0,onCompositionEnd:e=>{this._isIMEOpen=!1,this._onSearchFilterChange(e)},onChange:this._onSearchFilterChange,__source:{fileName:jx,lineNumber:595,columnNumber:11}})))}}const Xx=$x;var Qx=n(34155),qx="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\MenuTree.jsx";function Jx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const eL="MenuTree",tL="MenuCutIds";class nL extends s.Component{constructor(e){super(e),Jx(this,"refTreeList",s.createRef()),Jx(this,"_isMounted",!1),Jx(this,"_isMac",!1),Jx(this,"_editHasFocus",!1),Jx(this,"_onUrlbarStoreChanged",(()=>{const{editUrl:e,autocompleteValue:t}=RE.Z.getUrlfieldStateFromId(eL);this.setState({autocompleteValue:t,editUrl:e})})),Jx(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),Jx(this,"_onMenuChanged",((e,t,n,s)=>{e===this.props.menu&&this._setMenu(e,t,n,this.state.role,s,!1)})),Jx(this,"_loadMenu",(()=>{Ss.isSection(this.props.menu)?this._isMounted&&this.setState({rootId:"",role:"",menuItems:[]}):b.Z.menuContent.get(this.props.menu,((e,t,n)=>{this._setMenu(this.props.menu,e,"",t,n,!0)}))})),Jx(this,"_setMenu",((e,t,n,s,i,r)=>{const a=(e,t,n)=>{e.index=n,e.parentId=t,e.items&&(e.children=e.items,e.children.forEach(((t,n)=>{a(t,e.id,n)})))};((e,t,n)=>"context"===t?Ss.makeMenuWithContent(e,n):Promise.resolve(F.Z.makeMenuWithContent(n,!1)))(e,s,i).then((e=>{e.forEach(((e,n)=>{a(e,t,n)})),this._isMounted&&this.setState({rootId:t,role:s,menuItems:e},(()=>{if(!0===r&&this.state.menuItems.length>0)this.refTreeList.current?.selectByNode(this.state.menuItems[0]);else{const e=this._getNodeById(n);e&&this.refTreeList.current?.selectByNode(e)}}))}))})),Jx(this,"_getNodeById",(e=>{const t=n=>{if(n)for(let s=0;s<n.length;s++){const i=n[s];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(this.state.menuItems)})),Jx(this,"_hasChildren",(e=>Boolean(e.children)&&e.children.length>0)),Jx(this,"_isFolder",(e=>Boolean(e.children))),Jx(this,"_isContainer",(e=>"container"===e.type)),Jx(this,"_isBookmarkContainer",(e=>"CONTAINER_BOOKMARK"===e.container?.content)),Jx(this,"_isSeparator",(e=>"separator"===e.type)),Jx(this,"_isLink",(e=>e.commandName===F.Z.getOpenLinkName())),Jx(this,"_isDefaultTopFolder",(e=>!this._isContextMenu()&&(!!this._isMac&&["MENU_APPLE_APP","MENU_FILE","MENU_EDIT","MENU_VIEW","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName)))),Jx(this,"_isPersistent",(e=>!this._isContextMenu()&&(!!this._isMac&&["MENU_APPLE_APP","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName)))),Jx(this,"_canDeleteNode",(e=>!!this._isContextMenu()||(!this._isMac||!this._isPersistent(e)&&!this._isBookmarkContainer(e)))),Jx(this,"_isValidForClipboard",(e=>this._isValidDragSource(e))),Jx(this,"_isValidDragSource",(e=>!!this._isContextMenu()||(!this._isMac||!["MENU_APPLE_APP"].includes(e.commandName)))),Jx(this,"_validateForDrag",(e=>e.map(this._getNodeById).filter(Boolean).filter(this._isValidDragSource).map((e=>e.id)))),Jx(this,"_validateForDeletion",(e=>e.map(this._getNodeById).filter(Boolean).filter(this._canDeleteNode).map((e=>e.id)))),Jx(this,"_validateForRename",(e=>{const t=this._getNodeById(e);return!!t&&(!this._isSeparator(t)&&!1!==t.settingsRename)})),Jx(this,"_validateForEdit",(e=>{const t=this._getNodeById(e);return!!t&&this._isLink(t)})),Jx(this,"_reset",(e=>{b.Z.menuContent.reset(this.props.menu,[e],qo.default)})),Jx(this,"_setContainerMode",((e,t)=>{b.Z.menuContent.update(this.props.menu,e,{containerMode:t},qo.default)})),Jx(this,"_setShowShorcut",((e,t)=>{b.Z.menuContent.update(this.props.menu,e,{showshortcut:t},qo.default)})),Jx(this,"_setContainerEdge",((e,t)=>{b.Z.menuContent.update(this.props.menu,e,{containerEdge:t},qo.default)})),Jx(this,"_onEdit",(()=>{const e=this.getSelectedItem();if(e){const t=e.url||"https://www.vivaldi.com";QN.Z.setUrlfieldState(eL,{selectionStart:0,selectionEnd:t.length,editUrl:void 0,autocompleteValue:""}),this.setState({editId:e.id,editTitle:e.label,url:t})}})),Jx(this,"_onTitleChanged",(e=>{const t=e.target.value;this.setState({editTitle:t})})),Jx(this,"_onUrlChanged",(e=>{this.setState({editUrl:e||""})})),Jx(this,"_onEditFocus",(()=>{this._editHasFocus=!0})),Jx(this,"_onEditBlur",(()=>{this._editHasFocus=!1,Qx.nextTick((()=>{this._saveEdit(!this._editHasFocus,!1)}))})),Jx(this,"_cancelEdit",(()=>{this.setState({editId:"",editTitle:"",editUrl:""})})),Jx(this,"_saveEdit",((e,t)=>{const n=this.state.editId;let s=(this.state.autocompleteValue||this.state.editUrl||this.state.url||"").trim();void 0===b.Z.utilities.getUrlFragments(s).scheme&&(s="http://"+s),b.Z.menuContent.update(this.props.menu,n,{title:this.state.editTitle,parameter:s},(()=>{e&&this.setState({editId:"",editTitle:"",editUrl:""},(()=>{const e=this._getNodeById(n);e&&(t&&this.refTreeList.current?.focusTree(),this.refTreeList.current?.expandToId(n),this.refTreeList.current?.selectByNode(e))}))}))})),Jx(this,"_handleEditKeyPress",(e=>{"Escape"===e.key&&(e.preventDefault(),this._cancelEdit()),"Enter"===e.key&&(e.preventDefault(),this._saveEdit(!0,!0))})),Jx(this,"_getTitle",(e=>{const t=this._getNodeById(e);if(t){let e=t.label;return t.ellipsis&&(e+=z.Z.ellipsisString()),e}return""})),Jx(this,"_saveTitle",((e,t)=>{b.Z.menuContent.update(this.props.menu,e,{title:t},qo.default)})),Jx(this,"_isMenubarMenu",(()=>"mac"===this.state.role||"horizontal"===this.state.role)),Jx(this,"_isContextMenu",(()=>"context"===this.state.role)),Jx(this,"_getDragData",((e,t)=>"")),Jx(this,"_getMimeData",(e=>{let t="",n=!1,s=!1;e.forEach((e=>{const i=this._getNodeById(e);i&&(this._isFolder(i)?(this._isDefaultTopFolder(i)&&(n=!0),t=""===t||t===Wx?Wx:zx):(this._isBookmarkContainer(i)&&(s=!0),t=""===t||t===Vx?Vx:zx))}));const i=[];return i.push({mimeType:t,payload:JSON.stringify(e)}),n&&i.push({mimeType:Hx,payload:JSON.stringify(e)}),s&&i.push({mimeType:Gx,payload:JSON.stringify(e)}),i})),Jx(this,"_setDragData",((e,t)=>{this._getMimeData(t).forEach((t=>{e.setData(t.mimeType,t.payload)}))})),Jx(this,"_getDropSupport",((e,t)=>{const n={available:!1,onto:!1,edge:!1};return n.available=t.dataTransfer.types.some((e=>e===Vx||e===Wx||e===zx||e===Bx||e===Fx||e===Ux)),n.available&&(n.onto=this._canDropOnto(e,t),n.edge=this._canDropOnEdge(e,t)),n})),Jx(this,"_canDropOnto",((e,t)=>{if(this._isFolder(e)){if(this._isMac){if(t.dataTransfer.types.some((e=>e===Gx)))return!1;if(t.dataTransfer.types.some((e=>e===Wx))&&t.dataTransfer.types.some((e=>e===Hx)))return!1}return!0}return!1})),Jx(this,"_canDropOnEdge",((e,t)=>0!==e.level||!this._isMenubarMenu()||(!this._isMac||0!==e.index)&&t.dataTransfer.types.some((e=>e===Wx||e===zx||e===Fx||e===Ux)))),Jx(this,"_getTargetSpec",((e,t)=>{const n={id:e.id,index:0,parentId:""};return this._isFolder(e)&&"on"===t?n.parentId=e.id:(n.parentId=e.parentId,n.index=e.index+("below"===t?1:0)),n})),Jx(this,"_canAddToTopLevel",(e=>{let t=!0;return this._isMenubarMenu()&&e.forEach((e=>{"folder"!==e.type&&(t=!1)})),t})),Jx(this,"_handleMimeData",((e,t,n,s,i)=>{const r={type:""};if(this._hasCommandMimeType(s,r)){const n=JSON.parse(i(r.type)).map((e=>{if(!e.menu||e.menu===this.props.menu)return e.node})).filter(Boolean);return this._add(e,t,n,!0).then((()=>Promise.resolve([])))}if(this._hasMenuMimeType(s,r)){const s=i(r.type),a=JSON.parse(s);if(n){const n=[];return this._getContentTree(n,a),this._add(e,t,n,!1).then((()=>Promise.resolve([])))}return this._onMove(a,e,t).then((e=>{if(e&&e.length>0){const t=e[0];this.refTreeList.current?.expandToId(t),this.refTreeList.current?.setSelectedIds(e),this._setCutIds([])}return Promise.resolve([])}))}return Promise.resolve([])})),Jx(this,"_onDrop",((e,t,n)=>{const s="on"===n?t.id:t.parentId,i="on"===n?0:t.index+("below"===n?1:0),r=en.ZP.isCopyModifierPressed(e);return this._handleMimeData(s,i,r,e.dataTransfer.types,(t=>e.dataTransfer.getData(t)))})),Jx(this,"addToNode",((e,t,n)=>{const s=this._isFolder(e)?e.id:e.parentId,i=this._isFolder(e)?0:e.index+1;return this._add(s,i,JSON.parse(t),n)})),Jx(this,"_add",((e,t,n,s,i)=>this._addAtPosition(e,t,n,s).then((e=>{e?.length>0&&(this.refTreeList.current?.expandToId(e[0]),this.refTreeList.current?.setSelectedIds(e))})))),Jx(this,"_addAtPosition",((e,t,n,s)=>{const i=(e,t,n)=>Promise.all(e.map((e=>new Promise((s=>{b.Z.menuContent.create(this.props.menu,t,n++,[e],((t,n)=>{e.children?i(e.children,n[0],0).then((()=>{s(n[0])})):s(n[0])}))}))))),r=s&&1===n.length&&n[0].action===F.Z.getOpenLinkName();return i(n,e,t).then((e=>(r&&Qx.nextTick(this._onEdit),e)))})),Jx(this,"_supportsUpDownMove",((e,t)=>!!this._isValidDragSource(e)&&!(0===e.level&&!0===t&&e.index<=1))),Jx(this,"_onMove",((e,t,n)=>new Promise((s=>{b.Z.menuContent.move(this.props.menu,e,t,n,(t=>{s(e)}))})))),Jx(this,"_onKeyPressed",(e=>{"Escape"===e.key&&this._setCutIds([])})),Jx(this,"_setCutIds",(e=>{b.Z.utilities.setSharedData({key:tL,value:e.length>0?e.join():""})})),Jx(this,"_onSharedDataChanged",((e,t)=>{if(e===tL){const e=t.length>0?t.split(","):[];e.length>0?window.addEventListener("keydown",this._onKeyPressed,!0):window.removeEventListener("keydown",this._onKeyPressed,!0),this.setState({cutIds:e})}})),Jx(this,"_cut",((e,t)=>{this._setCutIds(t);const n=e.clipboardData;if(n){n.setData("vivaldi/x-cut","true");this._getMimeData(t).forEach((e=>{n.setData(e.mimeType,e.payload)}))}(0,Rx.Z)(e)})),Jx(this,"_copy",((e,t)=>{const n=e.clipboardData;if(n){this._getMimeData(t).forEach((e=>{n.setData(e.mimeType,e.payload)}))}(0,Rx.Z)(e)})),Jx(this,"_getContentTree",((e,t)=>{t.forEach((t=>{const n=this._getNodeById(t);if(n){const t={id:"",action:n.commandName||"",type:n.type};if(t.action===F.Z.getOpenLinkName()&&(t.parameter=n.url,t.title=n.label),"folder"===t.type&&(t.title=n.label,t.children=[],n.children)){const e=n.children.map((e=>e.id)),s=[];this._getContentTree(s,e),t.children=s}e.push(t)}}))})),Jx(this,"_hasCommandMimeType",((e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];switch(s){case Bx:case Fx:case Ux:return t.type=s,!0}}return t.type="",!1})),Jx(this,"_hasMenuMimeType",((e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];switch(s){case Vx:case Wx:case zx:return t.type=s,!0}}return t.type="",!1})),Jx(this,"_paste",((e,t)=>{const n=e.clipboardData;if(!n)return Promise.resolve([]);const s="true"===n.getData("vivaldi/x-cut");if(s&&0===this.state.cutIds.length)return Promise.resolve([]);const i=this._isFolder(t)?t.id:t.parentId,r=this._isFolder(t)?0:t.index+1;return this._handleMimeData(i,r,!s,n.types,(e=>n.getData(e))).then((e=>(s&&this._setCutIds([]),e)))})),Jx(this,"_onCreate",((e,t,n,s)=>s?new Promise((s=>{const i=[];let r=!1,a=!1;e.forEach(((e,t)=>{if(e.children)r=0===t,i.push({id:"",type:"folder",action:"",title:(0,ue.Z)("command","New Folder")});else if(e.separator)i.push({id:"",type:"separator",action:""});else{a=0===t;const e=F.Z.getOpenLinkName();i.push({id:"",type:"command",action:e,title:F.Z.getCommandLabel(e)||"",parameter:F.Z.getCommandParameter(e)||""})}})),b.Z.menuContent.create(this.props.menu,t,void 0===n?-1:n,i,((e,t)=>{a&&Qx.nextTick(this._onEdit);const n={items:t.map((e=>({id:e}))),props:{edit:r}};s(n)}))})):Promise.resolve({items:[]}))),Jx(this,"_onRemove",(e=>new Promise((t=>{b.Z.menuContent.remove(this.props.menu,e,(e=>{t(e)}))})))),Jx(this,"_handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),Jx(this,"_getContextMenuItemProps",(e=>Ss.isSection(this.props.menu)?{}:e?{showMoveUp:this.refTreeList.current?.canMoveUpDown(e,!0),showMoveDown:this.refTreeList.current?.canMoveUpDown(e,!1),showRename:this._validateForRename(e.id),showEdit:this._validateForEdit(e.id),showDelete:this._canDeleteNode(e),showNewItem:!0,showNewSeparator:!0,showNewFolder:!0,showCut:this._canDeleteNode(e),showCopy:!0,showPaste:!0}:{showNewSeparator:!this._isMenubarMenu(),showNewFolder:!0,showPaste:!0})),Jx(this,"_getContextMenuNewItemString",(()=>(0,Mn.Z)("New Link"))),Jx(this,"_getNodeMenuItems",(e=>[{handler:()=>this._reset(e.id),testVisibility:()=>this._isFolder(e)&&!e.custom,...(0,Mn.Z)("Restore Default Folder")},{testVisibility:()=>this._isContainer(e)&&!this._isBookmarkContainer(e),...(0,Mn.Z)("Show as Subfolder"),type:"checkbox",checked:"folder"===e.container?.mode,handler:()=>this._setContainerMode(e.id,"folder"===e.container?.mode?"inline":"folder")},{testVisibility:()=>this._isBookmarkContainer(e),...(0,Mn.Z)("Show 'Add Active Tab'"),items:[{type:"radio",checked:"above"===e.container?.edge,radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"above"),...(0,Mn.Z)("Above List")},{type:"radio",checked:"below"===e.container?.edge,radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"below"),...(0,Mn.Z)("Below List")},{type:"separator",name:""},{type:"radio",checked:"off"===e.container?.edge,handler:this._setContainerEdge.bind(this,e.id,"off"),radiogroup:2,...(0,Mn.Z)("radio","Hide")}]},{testVisibility:()=>!0,...(0,Mn.Z)("Show Shortcuts in Menu"),type:"checkbox",enabled:A.ZP.get(P.kKeyboardShortcutsEnable),checked:!1!==e.showshortcut,handler:()=>this._setShowShorcut(e.id,!(!1!==e.showshortcut))}])),Jx(this,"_getContextMenuItems",(e=>e?this._getNodeMenuItems(e):[])),Jx(this,"rowComponent",(e=>{const{inlineEditText:t,node:n,onBlur:i,onChange:r,onFocus:a}=e,o=16*n.level+"px",l=16*(n.level+1)+"px";if(this._isSeparator(n))return s.createElement("label",{key:"0",__source:{fileName:qx,lineNumber:1079,columnNumber:9}},s.createElement("hr",{style:{marginLeft:l},className:"separator",__source:{fileName:qx,lineNumber:1080,columnNumber:11}}));let c=n.label;n.ellipsis&&(c+=z.Z.ellipsisString()),"container"===n.type&&(n.settingsLabel?c="inline"===n.container?.mode||this._isBookmarkContainer(n)?n.settingsLabel:(0,ue.Z)("$1 (as Subfolder)",[n.settingsLabel]):"folder"===n.container?.mode&&(c=(0,ue.Z)("$1 (as Subfolder)",[c])));const u=this._isFolder(n)&&this._hasChildren(n);let m=A.ZP.get(P.kKeyboardShortcutsEnable);n.shortcuts?.length>0&&1===n.shortcuts[0].length&&m&&(m=z.Z.isFeatureCommand(n)?A.ZP.get(P.kKeyboardShortcutsEnableSingleKeyForMail):A.ZP.get(P.kKeyboardShortcutsEnableSingleKey));const d=!1!==n.showshortcut;return s.createElement("label",{key:"0",__source:{fileName:qx,lineNumber:1117,columnNumber:7}},u&&s.createElement("span",{className:"expand-icon",style:{marginLeft:o},onMouseDown:Rx.Z,onMouseUp:()=>this._handleExpandClick(n.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:qx,lineNumber:1119,columnNumber:11}}),void 0!==t&&s.createElement("input",{type:"text",value:t,onChange:r,onFocus:a,onBlur:i,autoFocus:!0,__source:{fileName:qx,lineNumber:1127,columnNumber:11}}),void 0===t&&s.createElement("span",{className:"title",style:u?null:{marginLeft:l},__source:{fileName:qx,lineNumber:1137,columnNumber:11}},c),n.shortcuts?.length>0&&!d&&m&&s.createElement("span",{style:{textDecoration:"line-through"},className:"item-count",__source:{fileName:qx,lineNumber:1145,columnNumber:11}},Kx(n.shortcuts[0])),n.shortcuts?.length>0&&d&&m&&s.createElement("span",{className:"item-count",__source:{fileName:qx,lineNumber:1151,columnNumber:11}},Kx(n.shortcuts[0])))})),this.state={rootId:"",role:"",menuItems:[],editId:"",editTitle:"",editUrl:"",autocompleteValue:"",url:"",cutIds:[]}}componentDidMount(){this._isMounted=!0,b.Z.menuContent.onChanged.addListener(this._onMenuChanged),b.Z.utilities.onSharedDataUpdated.addListener(this._onSharedDataChanged),RE.Z.addChangeListener(this._onUrlbarStoreChanged),this._loadMenu()}componentWillUnmount(){this._isMounted=!1,b.Z.menuContent.onChanged.removeListener(this._onMenuChanged),b.Z.utilities.onSharedDataUpdated.removeListener(this._onSharedDataChanged),RE.Z.removeChangeListener(this._onUrlbarStoreChanged)}componentDidUpdate(e,t){this.props.menu!==e.menu&&(this._cancelEdit(),this._loadMenu())}render(){return this.state?this.state.editId?s.createElement("div",{onKeyDown:this._handleEditKeyPress,__source:{fileName:qx,lineNumber:1167,columnNumber:9}},s.createElement("div",{className:"UrlField",__source:{fileName:qx,lineNumber:1168,columnNumber:11}},s.createElement("input",{type:"text",placeholder:(0,ue.Z)("Title"),value:this.state.editTitle,onChange:this._onTitleChanged,onBlur:this._onEditBlur,onFocus:this._onEditFocus,__source:{fileName:qx,lineNumber:1169,columnNumber:13}})),s.createElement(lC,{placeholder:(0,ue.Z)("Address"),title:(0,ue.Z)("Enter webpage address"),pageId:eL,autocompletionEnabled:!0,autoFocus:!1,displayUrl:this.state.url,editUrl:this.state.editUrl,handleDrop:!0,onChange:this._onUrlChanged,onBlur:this._onEditBlur,onFocus:this._onEditFocus,autoFocus:!0,__source:{fileName:qx,lineNumber:1177,columnNumber:11}})):s.createElement(s.Fragment,null,s.createElement(Sg,{ref:this.refTreeList,rowComponent:this.rowComponent,nodes:this.state.menuItems,rootId:this.state.rootId,cutIds:this.state.cutIds,enableDragAndDrop:!Ss.isSection(this.props.menu),validateForDrag:this._validateForDrag,validateForDeletion:this._validateForDeletion,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,getDropSupport:this._getDropSupport,onDrop:this._onDrop,onMove:this._onMove,onCreate:this._onCreate,onEdit:this._onEdit,delete:this._onRemove,isValidForClipboard:this._isValidForClipboard,onCut:this._cut,onCopy:this._copy,onPaste:this._paste,hasChildren:this._hasChildren,isFolder:this._isFolder,appendContextItems:!0,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,getContextMenuNewItemString:this._getContextMenuNewItemString,getTitle:this._getTitle,saveTitle:this._saveTitle,supportsInlineEdit:!0,supportsUpDownMove:this._supportsUpDownMove,isValidToEdit:this._validateForRename,__source:{fileName:qx,lineNumber:1195,columnNumber:9}}),s.createElement("div",{className:"setting-single",__source:{fileName:qx,lineNumber:1229,columnNumber:9}},s.createElement("input",{type:"button",onClick:this.props.confirmReset,value:(0,ue.Z)("Restore Default Menu"),__source:{fileName:qx,lineNumber:1230,columnNumber:11}}))):null}}const sL=nL;var iL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\Menu.jsx";function rL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const aL=[P.kMenuDisplay];class oL extends s.Component{constructor(e){super(e),rL(this,"_onMenuChange",(e=>{this.setState({menu:e.target.value})})),rL(this,"_handleResetMenu",(()=>{b.Z.menuContent.reset(this.state.menu,void 0,(()=>{})),this.closeConfirmation()})),rL(this,"_canAddToTree",(()=>!!this.refs.menuTree.getSelectedItem())),rL(this,"_addToTree",((e,t)=>{const n=this.refs.menuTree.getSelectedItem();n&&this.refs.menuTree.addToNode(n,t,!0)})),rL(this,"confirmReset",(()=>this.setState({confirmation:!0}))),rL(this,"closeConfirmation",(()=>this.setState({confirmation:!1}))),rL(this,"getMenuName",(e=>{if(e||(e=this.state.menu),Ss.hasName(e))return Ss.getName(e);switch(e){case"vivaldi":return(0,ue.Z)("Vivaldi Button Menu");case"menubar":return(0,ue.Z)("Horizontal Menu");case"mac":return(0,ue.Z)("Application Menu");default:return e}})),rL(this,"renderModal",(()=>{const e=this.getMenuName();return s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.closeConfirmation,viewMode:"anchor slide",__source:{fileName:iL,lineNumber:91,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:iL,lineNumber:95,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:iL,lineNumber:96,columnNumber:11}},(0,ue.Z)("Reset $1?",[e]))),s.createElement("div",{className:"dialog-content",__source:{fileName:iL,lineNumber:100,columnNumber:9}},s.createElement("p",{__source:{fileName:iL,lineNumber:101,columnNumber:11}},(0,ue.Z)("$1 will be reset to its default state.",[e]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:iL,lineNumber:105,columnNumber:9}},s.createElement("input",{type:"button",className:"primary",onClick:this._handleResetMenu,value:(0,ue.Z)("Reset to Default"),autoFocus:!0,__source:{fileName:iL,lineNumber:106,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.closeConfirmation,value:(0,ue.Z)("Cancel"),__source:{fileName:iL,lineNumber:111,columnNumber:11}})))})),rL(this,"_getOptionItems",(()=>[...["vivaldi","menubar"].map((e=>({key:e,indent:1,name:this.getMenuName(e)}))),...Ss.getSettingsList()]));const t="top"===this.props.prefValues[P.kMenuDisplay]?"menubar":"vivaldi";this.state={menu:t,confirmation:!1}}render(){const e=this._getOptionItems().map((e=>0===e.indent?s.createElement("optgroup",{key:e.key,label:e.name,__source:{fileName:iL,lineNumber:134,columnNumber:16}}):s.createElement("option",{key:e.key,value:e.key,__source:{fileName:iL,lineNumber:136,columnNumber:16}}," ".repeat(2*e.indent),e.name)));return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:iL,lineNumber:144,columnNumber:7}},this.state.confirmation&&this.renderModal(),s.createElement("div",{className:"setting-single",__source:{fileName:iL,lineNumber:148,columnNumber:9}},s.createElement("h3",{__source:{fileName:iL,lineNumber:149,columnNumber:11}},(0,ue.Z)("Menu Customization")),s.createElement("select",{className:"menu-list",value:this.state.menu,onChange:this._onMenuChange,__source:{fileName:iL,lineNumber:150,columnNumber:11}},e)),s.createElement("div",{className:"menu-lists",__source:{fileName:iL,lineNumber:158,columnNumber:9}},s.createElement("div",{className:"setting-single menu-commands",__source:{fileName:iL,lineNumber:159,columnNumber:11}},s.createElement("h3",{__source:{fileName:iL,lineNumber:160,columnNumber:13}},(0,ue.Z)("Content"))),s.createElement("div",{className:"setting-single menu-commands",__source:{fileName:iL,lineNumber:162,columnNumber:11}},s.createElement("h3",{__source:{fileName:iL,lineNumber:163,columnNumber:13}},(0,ue.Z)("Commands"))),s.createElement("div",{className:"setting-single menu-items",__source:{fileName:iL,lineNumber:165,columnNumber:11}},s.createElement(sL,{ref:"menuTree",menu:this.state.menu,confirmReset:this.confirmReset,filter:this.props.filter,__source:{fileName:iL,lineNumber:166,columnNumber:13}})),s.createElement("div",{className:"setting-single menu-commands",__source:{fileName:iL,lineNumber:173,columnNumber:11}},s.createElement(Xx,{canAddToTree:this._canAddToTree,addToTree:this._addToTree,menu:this.state.menu,filter:this.props.filter,__source:{fileName:iL,lineNumber:174,columnNumber:13}}))))}}const lL=(0,bi.Z)(oL,aL);var cL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\MenuType.jsx";const uL=[P.kMenuDisplay,P.kMenuIconType],mL=st.Z.getEventHandler;class dL extends s.PureComponent{render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Menu"),filter:this.props.filter,__source:{fileName:cL,lineNumber:29,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:cL,lineNumber:31,columnNumber:11}},s.createElement("h3",{__source:{fileName:cL,lineNumber:32,columnNumber:13}},(0,ue.Z)("title","Menu Position")),s.createElement(_i,{name:"menuPosition",value:this.props.prefValues[P.kMenuDisplay],onChange:mL(P.kMenuDisplay),className:"group",__source:{fileName:cL,lineNumber:33,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:cL,lineNumber:37,columnNumber:15}},s.createElement("label",{__source:{fileName:cL,lineNumber:38,columnNumber:17}},s.createElement("input",{type:"radio",value:"vivaldi",__source:{fileName:cL,lineNumber:39,columnNumber:19}}),s.createElement("span",{__source:{fileName:cL,lineNumber:40,columnNumber:19}},(0,ue.Z)("menu","Vivaldi Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:cL,lineNumber:43,columnNumber:15}},s.createElement("label",{__source:{fileName:cL,lineNumber:44,columnNumber:17}},s.createElement("input",{type:"radio",value:"top",__source:{fileName:cL,lineNumber:45,columnNumber:19}}),s.createElement("span",{__source:{fileName:cL,lineNumber:46,columnNumber:19}},(0,ue.Z)("menu","Horizontal")))))),s.createElement("div",{className:"setting-group",__source:{fileName:cL,lineNumber:53,columnNumber:11}},s.createElement("h3",{__source:{fileName:cL,lineNumber:54,columnNumber:13}},(0,ue.Z)("Menu Icon Style")),s.createElement(_i,{name:"menuStyle",value:this.props.prefValues[P.kMenuIconType],onChange:mL(P.kMenuIconType),className:"group",__source:{fileName:cL,lineNumber:55,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:cL,lineNumber:59,columnNumber:15}},s.createElement("label",{__source:{fileName:cL,lineNumber:60,columnNumber:17}},s.createElement("input",{type:"radio",value:"icon",__source:{fileName:cL,lineNumber:61,columnNumber:19}}),s.createElement("span",{__source:{fileName:cL,lineNumber:62,columnNumber:19}},(0,ue.Z)("Vivaldi Icon")))),s.createElement("div",{className:"setting-single",__source:{fileName:cL,lineNumber:65,columnNumber:15}},s.createElement("label",{__source:{fileName:cL,lineNumber:66,columnNumber:17}},s.createElement("input",{type:"radio",value:"burger",__source:{fileName:cL,lineNumber:67,columnNumber:19}}),s.createElement("span",{__source:{fileName:cL,lineNumber:68,columnNumber:19}},(0,ue.Z)("Menu Icon")))))),s.createElement(lL,{filter:this.props.filter,__source:{fileName:cL,lineNumber:74,columnNumber:9}}))}}const hL=(0,bi.Z)(dL,uL);const pL=function(e,t,n,s){var i=40;n=n||"#006ed7",s=s||"#FFFFFF",this.window=e,this.points=[],this.points_buffer=[],this.stopped=!0,this.canvas=t,this.init_points=function(){this.points=[],this.points_buffer=[];var e={x:i,y:i};this.points.push(e);var t,n=function(e){var t,n=0,s=0,i=0,r=0,a=0,o=0;for(t=0;t<e.length;t++)"0"===e[t]?a+=1:"4"===e[t]&&(a-=1),a>n&&(n=a),a<s&&(s=a);for(t=0;t<e.length;t++)"2"===e[t]?o-=1:"6"===e[t]&&(o+=1),o>i&&(i=o),o<r&&(r=o);return s>0&&(s=0),r>0&&(r=0),120/Math.max(Math.abs(n-s),Math.abs(i-r))}(this.sequence);for(t=0;t<this.sequence.length;t++){var s={};"0"===this.sequence[t]?(s.x=this.points[t].x+n,s.y=this.points[t].y):"2"===this.sequence[t]?(s.x=this.points[t].x,s.y=this.points[t].y+n):"4"===this.sequence[t]?(s.x=this.points[t].x-n,s.y=this.points[t].y):"6"===this.sequence[t]&&(s.x=this.points[t].x,s.y=this.points[t].y-n),this.points.push(s)}var r=this.points[0].x,a=this.points[0].y,o=this.points[0].x,l=this.points[0].y;for(t=1;t<this.points.length;t++)this.points[t].x<r&&(r=this.points[t].x),this.points[t].x>o&&(o=this.points[t].x),this.points[t].y<a&&(a=this.points[t].y),this.points[t].y>l&&(l=this.points[t].y);if(r<i){for(t=0;t<this.points.length;t++)this.points[t].x+=-(r-i);o+=-(r-i)}if(a<i){for(t=0;t<this.points.length;t++)this.points[t].y+=-(a-i);l+=-(a-i)}for(t=0;t<this.points.length;t++)this.points[t].x+=(160-o)/2,this.points[t].y+=(160-l-8)/2;for(t=0;t<this.points.length;t++){var c={x:this.points[t].x,y:this.points[t].y};this.points_buffer.push(c)}},this.reset_points=function(){var e;for(e=0;e<this.points_buffer.length;e++)this.points[e].x=this.points_buffer[e].x,this.points[e].y=this.points_buffer[e].y},this.draw_point=function(e){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,8,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fillStyle=n,this.ctx.fill()},this.idx=0,this.timeout=0,this.draw_segment=function(){if(!this.stopped){if(this.idx>=this.points.length)return this.timeout>=50?(this.timeout=0,this.idx=0,this.reset_points(),void(this.requestId=this.window.requestAnimationFrame((()=>{this.draw_segment()})))):(this.ctx.fillStyle=to()(s).alpha(.15).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.timeout++,void(this.requestId=this.window.requestAnimationFrame((()=>{this.draw_segment()}))));this.timeout=0,this.ctx.fillStyle=to()(s).alpha(.1).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.draw_point(this.points[this.idx]),!this.points[this.idx+1]||this.points[this.idx].x===this.points[this.idx+1].x&&this.points[this.idx].y===this.points[this.idx+1].y?(this.idx++,this.draw_segment()):(this.points[this.idx].x<this.points[this.idx+1].x?this.points[this.idx].x+=4:this.points[this.idx].x>this.points[this.idx+1].x&&(this.points[this.idx].x-=4),this.points[this.idx].y<this.points[this.idx+1].y?this.points[this.idx].y+=4:this.points[this.idx].y>this.points[this.idx+1].y&&(this.points[this.idx].y-=4),this.requestId=this.window.requestAnimationFrame((()=>{this.draw_segment()})))}},this.clear_canvas=function(){this.ctx.fillStyle=s,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},this.start=function(e){this.sequence=e,this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=3,this.clear_canvas(),this.init_points(),this.stopped&&(this.stopped=!1,this.requestId=this.window.requestAnimationFrame((()=>{this.draw_segment()})))},this.stop=function(){this.stopped=!0,this.current_point_index=0,this.timeout=0,this.idx=0,this.window.cancelAnimationFrame(this.requestId)}};var gL=n(77635),bL=n(34155),NL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\mouse\\MouseGestures.jsx";function fL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,vL(e,t,"set"),n),n}function vL(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const EL=Pt.jk.settingCategories,CL=[P.kMouseGesturesAltGesturesEnabled,P.kMouseGesturesDoubleClickMenuEnabled,P.kMouseGesturesEnabled,P.kMouseGesturesStrokeTolerance,P.kMouseGesturesRockerGesturesEnabled],wL=st.Z.getEventHandler;var yL=new WeakMap;class SL extends s.Component{constructor(e,t){super(e),yL.set(this,{writable:!0,value:void 0}),fL(this,"lastX",0),fL(this,"lastY",0),fL(this,"_initialSetup",(async()=>{const e=await(async()=>(await F.Z.getUserEditableCommands()).filter((e=>!(0,yc.xU)(e.name)&&!(0,Sc.Ed)(e.name))).map((e=>({...F.Z.getCommandConfiguration(e.name),...e}))))();this.setState({commandArray:e,selectedCommand:this._getTopCommand(e),assignedArray:F.Z.getCommandsGestures(),addingGesture:0})})),fL(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||no.Z.getFallbackStyle(),t=e["--colorHighlightBg"],n=e["--colorBg"];t===this.state.colorHighlightBg&&n===this.state.colorBg||this.setState({colorHighlightBg:t,colorBg:n})})),fL(this,"_onCommandStoreChange",(()=>{this._initialSetup()})),fL(this,"populateAngleMap",(()=>{const e=2*Math.PI/4,t=2*Math.PI/100,n=[];for(let s=-e/2;s<=2*Math.PI-e/2;s+=t){const t=2*Math.floor((s+e/2)/e);n.push(t)}return n})),fL(this,"_getCommandByGesture",(e=>this.state.commandArray.find((t=>{if(t.gestures&&t.gestures[0]===e)return t})))),fL(this,"_getTopCommand",(e=>e.find((e=>e.gestures)))),fL(this,"onGestureListChange",(e=>{const t=this.state.selectedCommand;let n=e&&"focus"===e.type&&t&&t.gestures?t.gestures[0]:e.target.value;const s=e&&"focus"===e.type&&t?t:this._getCommandByGesture(n);n&&(this.animation&&!this.animation.stopped||(this.animation=new pL(this.context.window,this.refs.gestureCanvas,this.state.colorHighlightBg,this.state.colorBg)),0===n.indexOf("e")&&(n=n.substring(1,n.length)),this.animation.stop(),this.animation.start(n),this.setState({addingGesture:0,selectedCommand:s}))})),fL(this,"addGesture",(()=>{this.setState({addingGesture:1})})),fL(this,"onCancelGesture",(()=>{this.moves=[],this.clearAnimation();const e=this.state.commandArray;this.setState({addingGesture:0,gestureExists:!1,selectedCommand:this._getTopCommand(e)})})),fL(this,"_findNextCommandGesture",(()=>{const e=this.state.selectedCommand,t=this.state.commandArray.filter((e=>e.gestures));if(t&&e){const n=t.findIndex((t=>t.name===e.name));return n<t.length-1?t[n+1]:t[n-1]}})),fL(this,"removeGesture",(()=>{const e=this._findNextCommandGesture(),t=this.state.selectedCommand;if(!t)return;const n={gestures:null,shortcut:t.shortcut};d.Z.set({[t.name]:n}),this.setState({selectedCommand:e}),this.animation&&e?.gestures&&this.animation.start(e.gestures[0])})),fL(this,"editGesture",(()=>{const e=this.state.selectedCommand;e&&this.setState((t=>({addingGesture:2,selectedCommand:t.commandArray.find((t=>t.name===e.name))})))})),fL(this,"restoreGestures",(()=>{o.Z.restoreCommandGestures(),this.setState({confirmation:!1})})),fL(this,"confirmRestore",(()=>{this.setState({confirmation:!0})})),fL(this,"onCancel",(()=>{this.setState({confirmation:!1})})),fL(this,"consolidateCommands",(()=>this.state.commandArray.filter((e=>!e.gestures&&e)))),fL(this,"save",(()=>{if(!this.moves)return;let e=this.moves.join("");const t=this.state.selectedCommand;if(!t)return;(0,Sc.jD)(t.name)&&(e="e"+e);const n={gestures:[e],shortcut:t.shortcut};d.Z.set({[t.name]:n}),this.moves=[],bL.nextTick((()=>this.refs.gestureList&&this.refs.gestureList.focus()))})),fL(this,"addPoint",((e,t,n)=>{this.pointX.push(e),this.pointY.push(t),n&&this.pointDrag.push(n)})),fL(this,"addMove",((e,t)=>{const n=2*Math.PI/4;let s=Math.atan2(t,e)+n/2;s<0&&(s+=2*Math.PI);const i=Math.floor(s/(2*Math.PI)*100);Array.isArray(this.moves)&&this.moves.push(this.state.angleMap[i])})),fL(this,"redraw",(()=>{const e=this.refs.gestureCanvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.strokeStyle=this.state.colorHighlightBg,e.lineJoin="round",e.lineWidth=16;for(let t=0;t<this.pointX.length;t++)e.beginPath(),this.pointDrag[t]&&t?e.moveTo(this.pointX[t-1],this.pointY[t-1]):e.moveTo(this.pointX[t]-1,this.pointY[t]),e.lineTo(this.pointX[t],this.pointY[t]),e.closePath(),e.stroke()})),fL(this,"penDown",(e=>{if(2!==this.state.addingGesture||e.button&&0!==e.button)return;e.touches&&(e=e.touches[0]),this.clearAnimation(),this.clearCanvas(),this.moves=[],this.paint=!0;const t=this.refs.gestureCanvas.getBoundingClientRect();this.addPoint(e.pageX-t.left,e.pageY-t.top),this.redraw()})),fL(this,"penMove",(e=>{if(2===this.state.addingGesture&&(e.touches&&(e=e.touches[0]),this.paint)){const t=this.refs.gestureCanvas.getBoundingClientRect();if(this.addPoint(e.pageX-t.left,e.pageY-t.top,!0),0===this.lastX)return this.lastX=e.pageX-t.left,void(this.lastY=e.pageY-t.top);const n=e.pageX-t.left-this.lastX,s=e.pageY-t.top-this.lastY,i=10;n*n+s*s>i*i&&(this.lastX=e.pageX-t.left,this.lastY=e.pageY-t.top,this.addMove(n,s)),this.redraw()}})),fL(this,"penUp",(()=>{if(this.paint=!1,2!==this.state.addingGesture||!this.moves||this.moves.length<3)return;this.moves.length&&(this.moves=this.moves.map(((e,t,n)=>{if(e!==n[t-1]&&e===n[t+1])return e})).filter((e=>void 0!==e)));let e=this.moves.join("");e.length>5&&(e=e.substring(e.length-5)),this.animation=new pL(this.context.window,this.refs.gestureCanvas,this.state.colorHighlightBg,this.state.colorBg),this.animation.start(e);const{assignedArray:t,selectedCommand:n}=this.state;let s;s=n&&(0,Sc.jD)(n.name)?t["e"+e]:t[e],this.setState({gestureExists:Boolean(s)})})),fL(this,"penLeave",(()=>{this.paint&&(this.paint=!1,this.moves=[],this.forceUpdate())})),fL(this,"clearAnimation",(()=>{if(void 0!==this.animation){this.animation.stop();const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)}})),fL(this,"clearCanvas",(()=>{this.paint=!1,this.pointX=[],this.pointY=[],this.pointDrag=[];const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)})),fL(this,"renderGesture",(()=>s.createElement("canvas",{ref:"gestureCanvas",width:"200",height:"200",onTouchStart:this.penDown,onTouchMove:this.penMove,onTouchEnd:this.penUp,onTouchCancel:this.penLeave,onMouseDown:this.penDown,onMouseMove:this.penMove,onMouseUp:this.penUp,onMouseLeave:this.penLeave,__source:{fileName:NL,lineNumber:535,columnNumber:7}}))),fL(this,"renderSearchableCommands",(()=>{const e=this.consolidateCommands(),t=this.props.category!==EL.all;return s.createElement(gL.Z,{placeholder:(0,ue.Z)("Filter commands..."),isClearable:!0,autoFocus:t,openMenuOnFocus:!0,isMulti:!1,setSelectedItem:this.setSelectedCommand,commands:e,__source:{fileName:NL,lineNumber:555,columnNumber:7}})})),fL(this,"setSelectedCommand",(e=>{this.setState({selectedCommand:e})})),fL(this,"renderCommands",(()=>this.state.commandArray.map((e=>{const{gestures:t}=e;return t?s.createElement("option",{key:`id-gesture-${e.label.split(" ").join("_")}`,value:t[0],__source:{fileName:NL,lineNumber:577,columnNumber:11}},e.label):null})))),fL(this,"renderModal",(()=>s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:NL,lineNumber:590,columnNumber:7}},s.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:NL,lineNumber:593,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:NL,lineNumber:594,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:NL,lineNumber:595,columnNumber:13}},(0,ue.Z)("Restore Gestures?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:NL,lineNumber:599,columnNumber:11}},s.createElement("p",{__source:{fileName:NL,lineNumber:600,columnNumber:13}},(0,ue.Z)("All command gestures will be restored to default settings."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:NL,lineNumber:604,columnNumber:11}},s.createElement("input",{type:"button",className:"danger",onClick:this.restoreGestures,value:(0,ue.Z)("Restore"),__source:{fileName:NL,lineNumber:605,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),autoFocus:!0,__source:{fileName:NL,lineNumber:610,columnNumber:13}}))))));const n=Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||no.Z.getFallbackStyle();this.state={commandArray:[],assignedArray:F.Z.getCommandsGestures(),selectedCommand:null,addingGesture:0,gestureExists:!1,angleMap:this.populateAngleMap(),confirmation:!1,colorHighlightBg:n["--colorHighlightBg"],colorBg:n["--colorBg"]}}componentDidMount(){this._initialSetup(),_L(this,yL,Z.Z.addListener(this.onThemeStoreChanged)),F.Z.addChangeListener(this._onCommandStoreChange),this.props.category!==EL.all&&bL.nextTick((()=>this.refs.gestureList.focus()))}componentWillUnmount(){var e,t;(e=this,t=yL,function(e,t){return t.get?t.get.call(e):t.value}(e,vL(e,t,"get"))).remove(),void 0!==this.animation&&this.animation.stop(),F.Z.removeChangeListener(this._onCommandStoreChange)}componentDidUpdate(e,t){!this.animation||this.state.colorBg===t.colorBg&&this.state.colorHighlightBg===t.colorHighlightBg||(this.clearAnimation(),this.animation=new pL(this.context.window,this.refs.gestureCanvas,this.state.colorHighlightBg,this.state.colorBg),this.state.selectedCommand?.gestures&&this.animation.start(this.state.selectedCommand.gestures[0]))}render(){const e=this.props.prefValues,t=this.state.selectedCommand,n=t&&t.gestures?t.gestures[0]:void 0,i=!this.moves||0===this.moves.length,r=this.state.gestureExists&&!i?this.state.commandArray.find((e=>e.gestures&&e.gestures.includes(this.moves.join("")))):void 0,a=" "+(0,ue.Z)("This setting requires a restart to take full effect.");return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Mouse"),filter:this.props.filter,__source:{fileName:NL,lineNumber:637,columnNumber:7}},this.state.confirmation&&this.renderModal(),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:NL,lineNumber:639,columnNumber:9}},s.createElement("h3",{__source:{fileName:NL,lineNumber:640,columnNumber:11}},(0,ue.Z)("Gestures")),s.createElement("div",{className:"setting-single",__source:{fileName:NL,lineNumber:642,columnNumber:11}},s.createElement("label",{__source:{fileName:NL,lineNumber:643,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kMouseGesturesEnabled],onChange:wL(P.kMouseGesturesEnabled),__source:{fileName:NL,lineNumber:644,columnNumber:15}}),s.createElement("span",{__source:{fileName:NL,lineNumber:647,columnNumber:15}},(0,ue.Z)("Allow Gestures"))),s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:649,columnNumber:13}},(0,ue.Z)("Hold down right mouse button and perform a gesture to issue related command.")+a)),s.createElement("div",{className:"setting-single",__source:{fileName:NL,lineNumber:654,columnNumber:11}},s.createElement("label",{__source:{fileName:NL,lineNumber:655,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kMouseGesturesAltGesturesEnabled],onChange:wL(P.kMouseGesturesAltGesturesEnabled),__source:{fileName:NL,lineNumber:656,columnNumber:15}}),s.createElement("span",{__source:{fileName:NL,lineNumber:659,columnNumber:15}},(0,ue.Z)("win_linux","Perform Gestures with Alt Key"))),s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:665,columnNumber:13}},(0,ue.Z)("Use gestures with trackpad or other input device.")))),s.createElement("div",{className:"setting-group unlimited gestures",__source:{fileName:NL,lineNumber:670,columnNumber:9}},s.createElement("div",{className:"setting-single pad-top",__source:{fileName:NL,lineNumber:671,columnNumber:11}},s.createElement("h3",{__source:{fileName:NL,lineNumber:672,columnNumber:13}},(0,ue.Z)("Gesture Mapping")),s.createElement("div",{className:"gesture-map setting-single",__source:{fileName:NL,lineNumber:673,columnNumber:13}},s.createElement("select",{ref:"gestureList",className:"gesture-list",value:n,onChange:this.onGestureListChange,onFocus:this.onGestureListChange,onBlur:this.clearAnimation,size:"9",__source:{fileName:NL,lineNumber:674,columnNumber:15}},this.renderCommands()),s.createElement("div",{className:2===this.state.addingGesture?"active gesture":"gesture",__source:{fileName:NL,lineNumber:684,columnNumber:15}},this.renderGesture())),s.createElement("div",{className:"setting-single record-gesture",__source:{fileName:NL,lineNumber:690,columnNumber:13}},0===this.state.addingGesture&&s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:NL,lineNumber:692,columnNumber:17}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:NL,lineNumber:693,columnNumber:19}},s.createElement(ko,{tooltip:(0,ue.Z)("New gesture"),onClick:this.addGesture,image:cn.md4.medium,__source:{fileName:NL,lineNumber:694,columnNumber:21}}),s.createElement("hr",{__source:{fileName:NL,lineNumber:699,columnNumber:21}}),s.createElement(ko,{tooltip:(0,ue.Z)("Remove gesture"),onClick:this.removeGesture,disabled:!t,image:cn.M2k.medium,__source:{fileName:NL,lineNumber:700,columnNumber:21}})),s.createElement(ko,{tooltip:(0,ue.Z)("Edit gesture"),onClick:this.editGesture,disabled:!t,image:cn.NNg.medium,__source:{fileName:NL,lineNumber:707,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("Restore Default Gestures"),onClick:this.confirmRestore,__source:{fileName:NL,lineNumber:713,columnNumber:19}})),1===this.state.addingGesture&&s.createElement("form",{onSubmit:this.editGesture,__source:{fileName:NL,lineNumber:720,columnNumber:17}},s.createElement("h3",{className:"pad-top",__source:{fileName:NL,lineNumber:721,columnNumber:19}},(0,ue.Z)("Pick a Command")),s.createElement("div",{className:"toolbar",__source:{fileName:NL,lineNumber:722,columnNumber:19}},this.renderSearchableCommands(),s.createElement("input",{type:"submit",disabled:!t,value:(0,ue.Z)("Next..."),__source:{fileName:NL,lineNumber:724,columnNumber:19}}),s.createElement("input",{type:"button",onClick:this.onCancelGesture,value:(0,ue.Z)("Cancel"),__source:{fileName:NL,lineNumber:727,columnNumber:19}}))),t&&2===this.state.addingGesture&&s.createElement(s.Fragment,null,s.createElement("h3",{className:"pad-top",__source:{fileName:NL,lineNumber:736,columnNumber:19}},(0,ue.Z)("Recording “$1” Gesture",[t.label])),s.createElement("div",{className:"add-gesture",__source:{fileName:NL,lineNumber:739,columnNumber:19}},s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:740,columnNumber:21}},(0,ue.Z)("Draw a new gesture in the highlighted area using the primary input. Gesture may consist of horizontal and vertical lines, limited to maximum of five strokes.")),s.createElement("div",{className:"save",__source:{fileName:NL,lineNumber:741,columnNumber:21}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Save Gesture"),onClick:this.save,disabled:i||this.state.gestureExists,__source:{fileName:NL,lineNumber:742,columnNumber:23}}),s.createElement("input",{type:"button",onClick:this.onCancelGesture,value:(0,ue.Z)("Cancel"),__source:{fileName:NL,lineNumber:746,columnNumber:23}}),r&&s.createElement("p",{className:"alert",__source:{fileName:NL,lineNumber:750,columnNumber:25}},(0,ue.Z)("This gesture is already used by “$1” command.",[r.label])))))))),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:NL,lineNumber:761,columnNumber:9}},s.createElement("div",{className:"setting-single pad-top",__source:{fileName:NL,lineNumber:762,columnNumber:11}},s.createElement("h3",{__source:{fileName:NL,lineNumber:763,columnNumber:13}},(0,ue.Z)("Gesture Sensitivity")),s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:764,columnNumber:13}},(0,ue.Z)("Set minimum stroke length to be recognized as a gesture move.")),s.createElement("div",{className:"setting-single tolerance",__source:{fileName:NL,lineNumber:765,columnNumber:13}},s.createElement("div",{className:"gesture-preview",__source:{fileName:NL,lineNumber:766,columnNumber:15}},s.createElement("span",{className:"meter-bg",__source:{fileName:NL,lineNumber:767,columnNumber:17}}),s.createElement("span",{className:"meter",style:{width:e[P.kMouseGesturesStrokeTolerance]+"px"},__source:{fileName:NL,lineNumber:768,columnNumber:17}}),s.createElement("span",{__source:{fileName:NL,lineNumber:770,columnNumber:17}},(0,ue.Z)("$1 pixels",[e[P.kMouseGesturesStrokeTolerance]]))),s.createElement("input",{type:"range",min:5,max:100,step:5,onChange:wL(P.kMouseGesturesStrokeTolerance),value:e[P.kMouseGesturesStrokeTolerance],__source:{fileName:NL,lineNumber:772,columnNumber:15}}))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:NL,lineNumber:781,columnNumber:11}},s.createElement("h3",{__source:{fileName:NL,lineNumber:782,columnNumber:13}},(0,ue.Z)("Rocker Gestures")),s.createElement("label",{__source:{fileName:NL,lineNumber:783,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kMouseGesturesRockerGesturesEnabled],onChange:wL(P.kMouseGesturesRockerGesturesEnabled),__source:{fileName:NL,lineNumber:784,columnNumber:15}}),s.createElement("span",{__source:{fileName:NL,lineNumber:787,columnNumber:15}},(0,ue.Z)("Allow Rocker Gestures"))),s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:789,columnNumber:13}},(0,ue.Z)("Press right mouse button followed by left mouse button click to go back in history. Press left mouse button followed by right click to advance forward in history.")+a)),nS.Z.isEnabled("double_click_menu")&&s.createElement("div",{className:"setting-single pad-top",__source:{fileName:NL,lineNumber:795,columnNumber:13}},s.createElement("h3",{__source:{fileName:NL,lineNumber:796,columnNumber:15}},(0,ue.Z)("Double Click Context Menu")),s.createElement("label",{__source:{fileName:NL,lineNumber:797,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kMouseGesturesDoubleClickMenuEnabled],onChange:wL(P.kMouseGesturesDoubleClickMenuEnabled),__source:{fileName:NL,lineNumber:798,columnNumber:17}}),s.createElement("span",{__source:{fileName:NL,lineNumber:803,columnNumber:17}},(0,ue.Z)("Allow Double Click to Show Context Menu"))),s.createElement("p",{className:"info",__source:{fileName:NL,lineNumber:805,columnNumber:15}},(0,ue.Z)("Use a double click to show the context menu.")+a))))}}fL(SL,"contextType",Vs.Z);const TL=(0,bi.Z)(SL,CL);var kL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\network\\NetworkSettings.jsx";function IL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AL extends s.Component{constructor(...e){super(...e),IL(this,"onClick",(()=>{b.Z.utilities.launchNetworkSettings(this.context.vivaldiWindowId)}))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Network"),filter:this.props.filter,__source:{fileName:kL,lineNumber:24,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:kL,lineNumber:25,columnNumber:11}},s.createElement("h3",{__source:{fileName:kL,lineNumber:26,columnNumber:13}},(0,ue.Z)("Proxies")),s.createElement("div",{className:"setting-single",__source:{fileName:kL,lineNumber:28,columnNumber:13}},s.createElement("label",{__source:{fileName:kL,lineNumber:29,columnNumber:15}},s.createElement("input",{type:"button",value:(0,ue.Z)("Proxy Settings"),onClick:this.onClick,__source:{fileName:kL,lineNumber:30,columnNumber:17}})))))}}IL(AL,"contextType",Vs.Z);const ZL=AL;var PL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\panel\\Panel.jsx";const DL=[P.kMailContactDefaultAction,P.kMailSingleClickTabs,P.kNotesCreationAddScreenshot,P.kNotesCreationNotify,P.kNotesCreationShowPanel,P.kPanelsAsOverlayAutoClose,P.kPanelsLazyLoad,P.kPanelsAsOverlayEnabled,P.kPanelsPosition,P.kPanelsShowFolderBadge,P.kPanelsShowToggle,P.kPanelsTranslatePaste,P.kPanelsTranslateRedirect,P.kPanelsWindowDragToStack,P.kPanelsWindowShowPinnedGroup,P.kPanelsWindowSingleClickOpens,P.kPanelsWindowShowUnread,P.kTabsCounterDetection],ML=st.Z.getEventHandler;class OL extends s.Component{render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Panels"),filter:this.props.filter,__source:{fileName:PL,lineNumber:60,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:61,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:62,columnNumber:11}},(0,ue.Z)("Panel Position")),s.createElement(_i,{name:"panelPosition",value:this.props.prefValues[P.kPanelsPosition],onChange:ML(P.kPanelsPosition),className:"group",__source:{fileName:PL,lineNumber:63,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:67,columnNumber:13}},s.createElement("label",{__source:{fileName:PL,lineNumber:68,columnNumber:15}},s.createElement("input",{type:"radio",value:"left",__source:{fileName:PL,lineNumber:69,columnNumber:17}}),s.createElement("span",{__source:{fileName:PL,lineNumber:70,columnNumber:17}},(0,ue.Z)("Left Side")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:74,columnNumber:13}},s.createElement("label",{__source:{fileName:PL,lineNumber:75,columnNumber:15}},s.createElement("input",{type:"radio",value:"right",__source:{fileName:PL,lineNumber:76,columnNumber:17}}),s.createElement("span",{__source:{fileName:PL,lineNumber:77,columnNumber:17}},(0,ue.Z)("Right Side")))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:84,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:85,columnNumber:11}},(0,ue.Z)("Panel Options")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:86,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Display a panel toggle button along the side"),__source:{fileName:PL,lineNumber:87,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsShowToggle],onChange:ML(P.kPanelsShowToggle),__source:{fileName:PL,lineNumber:88,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:91,columnNumber:15}},(0,ue.Z)("Show Panel Toggle")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:94,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Overlay panel over browser content"),__source:{fileName:PL,lineNumber:95,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsAsOverlayEnabled],onChange:ML(P.kPanelsAsOverlayEnabled),__source:{fileName:PL,lineNumber:96,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:99,columnNumber:15}},(0,ue.Z)("Floating Panel")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:PL,lineNumber:102,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Automatically collapse panel upon losing focus"),__source:{fileName:PL,lineNumber:103,columnNumber:13}},s.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[P.kPanelsAsOverlayEnabled],checked:this.props.prefValues[P.kPanelsAsOverlayAutoClose],onChange:ML(P.kPanelsAsOverlayAutoClose),__source:{fileName:PL,lineNumber:104,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:108,columnNumber:15}},(0,ue.Z)("Auto-Close Inactive Panel")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:111,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:112,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsShowFolderBadge],onChange:ML(P.kPanelsShowFolderBadge),__source:{fileName:PL,lineNumber:113,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:116,columnNumber:15}},(0,ue.Z)("Show Folder Counters"))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:121,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:122,columnNumber:11}},(0,ue.Z)("Web Panels")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:123,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:PL,lineNumber:124,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsCounterDetection],onChange:ML(P.kTabsCounterDetection),__source:{fileName:PL,lineNumber:125,columnNumber:17}}),s.createElement("span",{__source:{fileName:PL,lineNumber:128,columnNumber:17}},(0,ue.Z)("Detect Page Title Notifications")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:131,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Wait to Load Panels Until Activated"),__source:{fileName:PL,lineNumber:132,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsLazyLoad],onChange:ML(P.kPanelsLazyLoad),__source:{fileName:PL,lineNumber:133,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:136,columnNumber:15}},(0,ue.Z)("Lazy Load"))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:141,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:142,columnNumber:11}},(0,ue.Z)("title","Notes Panel")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:143,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Show panel content when adding a note from a page"),__source:{fileName:PL,lineNumber:144,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kNotesCreationShowPanel],onChange:ML(P.kNotesCreationShowPanel),__source:{fileName:PL,lineNumber:145,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:148,columnNumber:15}},(0,ue.Z)("Open Panel Automatically")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:152,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:153,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kNotesCreationNotify],onChange:ML(P.kNotesCreationNotify),__source:{fileName:PL,lineNumber:154,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:157,columnNumber:15}},(0,ue.Z)("Notify on Adding New Note")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:161,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Add a screenshot when adding a note from a page"),__source:{fileName:PL,lineNumber:162,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kNotesCreationAddScreenshot],onChange:ML(P.kNotesCreationAddScreenshot),__source:{fileName:PL,lineNumber:163,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:166,columnNumber:15}},(0,ue.Z)("Fetch Screenshot for New Notes"))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:172,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:173,columnNumber:11}},(0,ue.Z)("title","Window Panel")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:174,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:175,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsWindowSingleClickOpens],onChange:ML(P.kPanelsWindowSingleClickOpens),__source:{fileName:PL,lineNumber:176,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:179,columnNumber:15}},(0,ue.Z)("Activate with Single Click")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:183,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:184,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsWindowShowPinnedGroup],onChange:ML(P.kPanelsWindowShowPinnedGroup),__source:{fileName:PL,lineNumber:185,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:188,columnNumber:15}},(0,ue.Z)("Pinned Folder")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:192,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:193,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsWindowDragToStack],onChange:ML(P.kPanelsWindowDragToStack),__source:{fileName:PL,lineNumber:194,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:197,columnNumber:15}},(0,ue.Z)("Make Tab Stack with Mouse Drag")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:201,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:202,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsWindowShowUnread],onChange:ML(P.kPanelsWindowShowUnread),__source:{fileName:PL,lineNumber:203,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:206,columnNumber:15}},(0,ue.Z)("Show Unread Tabs Badge"))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:212,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:213,columnNumber:11}},(0,ue.Z)("title","Contacts Panel")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:214,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:215,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMailSingleClickTabs],onChange:ML(P.kMailSingleClickTabs),__source:{fileName:PL,lineNumber:216,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:219,columnNumber:15}},(0,ue.Z)("Activate with Single Click")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:PL,lineNumber:223,columnNumber:11}},s.createElement("h3",{__source:{fileName:PL,lineNumber:224,columnNumber:13}},(0,ue.Z)("Default Contact Action")),s.createElement(_i,{name:"contactDefaulAction",value:this.props.prefValues[P.kMailContactDefaultAction],onChange:ML(P.kMailContactDefaultAction),className:"group",__source:{fileName:PL,lineNumber:225,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:229,columnNumber:15}},s.createElement("label",{__source:{fileName:PL,lineNumber:230,columnNumber:17}},s.createElement("input",{type:"radio",value:"viewAllMessages",__source:{fileName:PL,lineNumber:231,columnNumber:19}}),s.createElement("span",{__source:{fileName:PL,lineNumber:232,columnNumber:19}},(0,ue.Z)("View All Mail Messages")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:235,columnNumber:15}},s.createElement("label",{__source:{fileName:PL,lineNumber:236,columnNumber:17}},s.createElement("input",{type:"radio",value:"compose",__source:{fileName:PL,lineNumber:237,columnNumber:19}}),s.createElement("span",{__source:{fileName:PL,lineNumber:238,columnNumber:19}},(0,ue.Z)("radio","Compose New Message"))))))),s.createElement("div",{className:"setting-group",__source:{fileName:PL,lineNumber:245,columnNumber:9}},s.createElement("h3",{__source:{fileName:PL,lineNumber:246,columnNumber:11}},(0,ue.Z)("title","Translate Panel")),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:247,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:248,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsTranslateRedirect],onChange:ML(P.kPanelsTranslateRedirect),__source:{fileName:PL,lineNumber:249,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:252,columnNumber:15}},(0,ue.Z)("Use Panel Instead of Dialog")))),s.createElement("div",{className:"setting-single",__source:{fileName:PL,lineNumber:255,columnNumber:11}},s.createElement("label",{__source:{fileName:PL,lineNumber:256,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPanelsTranslatePaste],onChange:ML(P.kPanelsTranslatePaste),__source:{fileName:PL,lineNumber:257,columnNumber:15}}),s.createElement("span",{__source:{fileName:PL,lineNumber:260,columnNumber:15}},(0,ue.Z)("Translate when pasting text"))))))}}const xL=(0,bi.Z)(OL,DL);var LL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\GlobalPermissions.jsx";function RL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const BL={sound:(0,ue.Z)("Sound"),notifications:(0,ue.Z)("Notifications"),location:(0,ue.Z)("Geolocation"),"media-stream-camera":(0,ue.Z)("Camera"),"media-stream-mic":(0,ue.Z)("Microphone"),sensors:(0,ue.Z)("Motion Sensors"),"bluetooth-scanning":(0,ue.Z)("Bluetooth Devices"),"midi-sysex":(0,ue.Z)("MIDI Devices"),popups:(0,ue.Z)("Popups"),"idle-detection":(0,ue.Z)("Idle Detection")},FL=["sensors","sound","popups"];class UL extends s.PureComponent{constructor(...e){super(...e),RL(this,"initPermissionState",(()=>{Object.keys(BL).forEach((e=>{b.Z.utilities.getDefaultContentSettings(e,(t=>{this.setState({[e]:t})}))}))})),RL(this,"changePermission",(e=>{const{name:t,value:n}=e.target;b.Z.utilities.setDefaultContentSettings(t,n,(()=>this.setState({[t]:n})))})),RL(this,"resetToDefaults",(()=>{Object.keys(BL).forEach((e=>{b.Z.utilities.setDefaultContentSettings(e,"default",qo.default)})),this.initPermissionState()}))}componentDidMount(){this.initPermissionState()}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:LL,lineNumber:74,columnNumber:7}},s.createElement("div",{className:"setting-group global-permissions",__source:{fileName:LL,lineNumber:75,columnNumber:9}},s.createElement("h3",{__source:{fileName:LL,lineNumber:76,columnNumber:11}},(0,ue.Z)("Default Permissions")),s.createElement("p",{className:"info",__source:{fileName:LL,lineNumber:77,columnNumber:11}},(0,ue.Z)("Certain website permissions can be controlled globally.")),s.createElement("div",{className:"setting-single",__source:{fileName:LL,lineNumber:78,columnNumber:11}},this.state&&Object.keys(this.state).map((e=>s.createElement("label",{key:e,__source:{fileName:LL,lineNumber:81,columnNumber:17}},s.createElement("span",{__source:{fileName:LL,lineNumber:82,columnNumber:19}},BL[e]),s.createElement("select",{value:this.state[e],onChange:this.changePermission,name:e,__source:{fileName:LL,lineNumber:83,columnNumber:19}},s.createElement("option",{value:"allow",__source:{fileName:LL,lineNumber:87,columnNumber:21}},(0,ue.Z)("other","Allow")),!FL.includes(e)&&s.createElement("option",{value:"ask",__source:{fileName:LL,lineNumber:89,columnNumber:23}},(0,ue.Z)("Ask")),s.createElement("option",{value:"block",__source:{fileName:LL,lineNumber:91,columnNumber:21}},(0,ue.Z)("Block"))))))),s.createElement("div",{className:"setting-single",__source:{fileName:LL,lineNumber:97,columnNumber:11}},s.createElement("input",{type:"button",value:(0,ue.Z)("Reset to Defaults"),onClick:this.resetToDefaults,__source:{fileName:LL,lineNumber:98,columnNumber:13}}))))}}const VL=UL;var HL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\HistorySetting.jsx";const WL=[P.kHistoryDaysToKeepVisits,P.kSavingBrowserHistoryDisabled];class zL extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{const t=parseInt(e.target.value,10);st.Z.set(P.kHistoryDaysToKeepVisits,t),0===t?st.Z.set(P.kSavingBrowserHistoryDisabled,!0):st.Z.set(P.kSavingBrowserHistoryDisabled,!1)},(n="onHistoryDaysChanged")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=this.props.prefValues[P.kHistoryDaysToKeepVisits],t=[0,1,7,31,91,182,365,3650].includes(e);return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:HL,lineNumber:40,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:HL,lineNumber:41,columnNumber:9}},s.createElement("h3",{__source:{fileName:HL,lineNumber:42,columnNumber:11}},(0,ue.Z)("other","Save Browsing History")),s.createElement("div",{className:"setting-single",__source:{fileName:HL,lineNumber:43,columnNumber:11}},s.createElement("select",{onChange:this.onHistoryDaysChanged,value:e,__source:{fileName:HL,lineNumber:44,columnNumber:13}},s.createElement("option",{value:"0",__source:{fileName:HL,lineNumber:47,columnNumber:15}},(0,ue.Z)("command","Session Only")),s.createElement("option",{value:"1",__source:{fileName:HL,lineNumber:48,columnNumber:15}},(0,ue.Z)("One Day")),s.createElement("option",{value:"7",__source:{fileName:HL,lineNumber:49,columnNumber:15}},(0,ue.Z)("One Week")),s.createElement("option",{value:"31",__source:{fileName:HL,lineNumber:50,columnNumber:15}},(0,ue.Z)("One Month")),s.createElement("option",{value:"91",__source:{fileName:HL,lineNumber:51,columnNumber:15}},(0,ue.Z)("Three Months")),s.createElement("option",{value:"182",__source:{fileName:HL,lineNumber:52,columnNumber:15}},(0,ue.Z)("Six Months")),s.createElement("option",{value:"365",__source:{fileName:HL,lineNumber:53,columnNumber:15}},(0,ue.Z)("One Year")),s.createElement("option",{value:"3650",__source:{fileName:HL,lineNumber:54,columnNumber:15}},(0,ue.Z)("Forever")),!t&&s.createElement("option",{value:e,__source:{fileName:HL,lineNumber:56,columnNumber:17}},(0,ue.Z)("Other ($1 Days)",[e])))),s.createElement("p",{className:"info",__source:{fileName:HL,lineNumber:62,columnNumber:11}},(0,ue.Z)("Browser restart is required for new setting to take effect."))))}}const GL=(0,bi.Z)(zL,WL);var KL="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\Privacy.jsx";function jL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const YL=[P.kAddressBarInlineSearchEnabled,P.kAddressBarInlineSearchSuggestEnabled,P.kAddressBarSearchSuggestEnabled,P.kAddressBarSearchTypedHistoryEnabled,P.kAddressBarTypedHistoryEnabled,P.kAlternateErrorPagesEnabled,P.kEnableDoNotTrack,P.kPrivacyAdverseAdBlockEnabled,P.kPrivacyAutofillServerAssist,P.kPrivacyGoogleComponentExtensionsCryptoToken,P.kPrivacyGoogleComponentExtensionsHangoutServices,P.kPrivacyGoogleComponentExtensionsWebStore,P.kSafeBrowsingEnabled,P.kIncognitoShowIntro,P.kWebRTCIPHandlingPolicy];const $L=st.Z.getEventHandler;class XL extends s.Component{constructor(...e){super(...e),jL(this,"toggleChromePrivacyWebRTCChange",(()=>{const e=this.webRTCAnnouncesIPs()?"disable_non_proxied_udp":"default";st.Z.set(P.kWebRTCIPHandlingPolicy,e)})),jL(this,"webRTCAnnouncesIPs",(()=>["default","default_public_interface_only","default_public_and_private_interfaces"].some((e=>this.props.prefValues[P.kWebRTCIPHandlingPolicy]===e))))}render(){const e=this.props.prefValues;return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Privacy"),displayPrivacyLink:!0,filter:this.props.filter,__source:{fileName:KL,lineNumber:80,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:85,columnNumber:9}},s.createElement("h3",{__source:{fileName:KL,lineNumber:86,columnNumber:11}},(0,ue.Z)("Google Services")),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:87,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:88,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kSafeBrowsingEnabled],onChange:$L(P.kSafeBrowsingEnabled),__source:{fileName:KL,lineNumber:89,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:92,columnNumber:15}},(0,ue.Z)("Phishing and malware protection")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:96,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:97,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kAlternateErrorPagesEnabled],onChange:$L(P.kAlternateErrorPagesEnabled),__source:{fileName:KL,lineNumber:98,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:101,columnNumber:15}},(0,ue.Z)("DNS to help resolve navigation errors")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:107,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:108,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kPrivacyAutofillServerAssist],onChange:$L(P.kPrivacyAutofillServerAssist),__source:{fileName:KL,lineNumber:109,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:112,columnNumber:15}},(0,ue.Z)("Form Autofill Assist"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:119,columnNumber:9}},s.createElement("h3",{__source:{fileName:KL,lineNumber:120,columnNumber:11}},(0,ue.Z)("Google Extensions")),s.createElement("p",{className:"info",__source:{fileName:KL,lineNumber:121,columnNumber:11}},(0,ue.Z)("Browser restart is required for new settings to take effect.")),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:123,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:124,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kPrivacyGoogleComponentExtensionsCryptoToken],onChange:$L(P.kPrivacyGoogleComponentExtensionsCryptoToken),__source:{fileName:KL,lineNumber:125,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:128,columnNumber:15}},(0,ue.Z)("Crypto Token"))),s.createElement("p",{className:"info",__source:{fileName:KL,lineNumber:132,columnNumber:13}},(0,ue.Z)("You will be unable to log in to Google services with this option disabled."))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:137,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:138,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kPrivacyGoogleComponentExtensionsHangoutServices],onChange:$L(P.kPrivacyGoogleComponentExtensionsHangoutServices),__source:{fileName:KL,lineNumber:139,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:142,columnNumber:15}},(0,ue.Z)("Hangouts")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:148,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:149,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kPrivacyGoogleComponentExtensionsWebStore],onChange:$L(P.kPrivacyGoogleComponentExtensionsWebStore),__source:{fileName:KL,lineNumber:150,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:153,columnNumber:15}},(0,ue.Z)("Web Store"))),s.createElement("p",{className:"info",__source:{fileName:KL,lineNumber:157,columnNumber:13}},(0,ue.Z)("You will be unable to install extensions with this option disabled.")))),s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:164,columnNumber:9}},s.createElement("h3",{__source:{fileName:KL,lineNumber:165,columnNumber:11}},(0,ue.Z)("noun","Search")),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:166,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:167,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarInlineSearchEnabled],onChange:$L(P.kAddressBarInlineSearchEnabled),__source:{fileName:KL,lineNumber:168,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:171,columnNumber:15}},(0,ue.Z)("Search in Address Field")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:175,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:176,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarInlineSearchSuggestEnabled],onChange:$L(P.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:KL,lineNumber:177,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:180,columnNumber:15}},(0,ue.Z)("Suggestions in Address Field")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:184,columnNumber:11}},s.createElement("label",{__source:{fileName:KL,lineNumber:185,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarSearchSuggestEnabled],onChange:$L(P.kAddressBarSearchSuggestEnabled),__source:{fileName:KL,lineNumber:186,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:189,columnNumber:15}},(0,ue.Z)("Suggestions in Search Field"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:194,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:195,columnNumber:11}},s.createElement("h3",{__source:{fileName:KL,lineNumber:196,columnNumber:13}},(0,ue.Z)("Do Not Track")),s.createElement("label",{title:(0,ue.Z)("Send “Do Not Track” directive to supporting websites"),__source:{fileName:KL,lineNumber:197,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kEnableDoNotTrack],onChange:$L(P.kEnableDoNotTrack),__source:{fileName:KL,lineNumber:198,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:201,columnNumber:15}},(0,ue.Z)("Ask Websites Not to Track Me")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:204,columnNumber:11}},s.createElement("label",{title:"Reject advertisement on websites listed by Google as privacy offenders",__source:{fileName:KL,lineNumber:205,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kPrivacyAdverseAdBlockEnabled],onChange:$L(P.kPrivacyAdverseAdBlockEnabled),__source:{fileName:KL,lineNumber:206,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:209,columnNumber:15}},(0,ue.Z)("Block Ads on Abusive Sites")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:212,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Web Real-Time Communication broadcast may leak IP address to services"),__source:{fileName:KL,lineNumber:213,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.webRTCAnnouncesIPs(),onChange:this.toggleChromePrivacyWebRTCChange,__source:{fileName:KL,lineNumber:214,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:218,columnNumber:15}},(0,ue.Z)("Broadcast IP for Best WebRTC Performance"))))),s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:223,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:224,columnNumber:11}},s.createElement("h3",{__source:{fileName:KL,lineNumber:225,columnNumber:13}},(0,ue.Z)("Show Typed History")),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:226,columnNumber:13}},s.createElement("label",{__source:{fileName:KL,lineNumber:227,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarTypedHistoryEnabled],onChange:$L(P.kAddressBarTypedHistoryEnabled),__source:{fileName:KL,lineNumber:228,columnNumber:17}}),s.createElement("span",{__source:{fileName:KL,lineNumber:232,columnNumber:17}},(0,ue.Z)("radio","In Address Field")))),s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:235,columnNumber:13}},s.createElement("label",{__source:{fileName:KL,lineNumber:236,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kAddressBarSearchTypedHistoryEnabled],onChange:$L(P.kAddressBarSearchTypedHistoryEnabled),__source:{fileName:KL,lineNumber:237,columnNumber:17}}),s.createElement("span",{__source:{fileName:KL,lineNumber:242,columnNumber:17}},(0,ue.Z)("radio","In Search Field")))))),s.createElement(GL,{filter:this.props.filter,__source:{fileName:KL,lineNumber:248,columnNumber:9}}),s.createElement(VL,{filter:this.props.filter,__source:{fileName:KL,lineNumber:249,columnNumber:9}}),s.createElement("div",{className:"setting-group",__source:{fileName:KL,lineNumber:251,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:KL,lineNumber:252,columnNumber:11}},s.createElement("h3",{__source:{fileName:KL,lineNumber:253,columnNumber:13}},(0,ue.Z)("Private Windows")),s.createElement("label",{__source:{fileName:KL,lineNumber:254,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kIncognitoShowIntro],onChange:$L(P.kIncognitoShowIntro),__source:{fileName:KL,lineNumber:255,columnNumber:15}}),s.createElement("span",{__source:{fileName:KL,lineNumber:258,columnNumber:15}},(0,ue.Z)("Show Introduction"))))),!1)}}const QL=(0,bi.Z)(XL,YL);var qL=n(46418),JL=n(40594),eR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\QuickCommands.jsx";function tR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nR=[P.kQuickCommandsKeepValue,P.kQuickCommandsOpenUrlInNewTab,P.kQuickCommandsSearchEnglish,P.kQuickCommandsMatchNickname,P.kQuickCommandsLimitResults,P.kQuickCommandsSearchPriority,P.kQuickCommandsShowBookmarks,P.kQuickCommandsShowCalculator,P.kQuickCommandsShowExtensions,P.kQuickCommandsShowHistory,P.kQuickCommandsShowPageActions,P.kQuickCommandsShowNotes,P.kQuickCommandsUseNotesManager],sR=st.Z.getEventHandler;class iR extends s.Component{constructor(...e){super(...e),tR(this,"toggleSetting",(e=>{st.Z.set(e,!this.props.prefValues[e])})),tR(this,"renderListItem",((e,t)=>{const n=JL.Y.find((e=>e.key===t.key))?.pref,i=n&&this.props.prefValues[n];return s.createElement("div",{onDoubleClick:n?()=>this.toggleSetting(n):null,__source:{fileName:eR,lineNumber:77,columnNumber:12}},n?s.createElement("input",{type:"checkbox",value:t.key,checked:i,onChange:sR(n),__source:{fileName:eR,lineNumber:79,columnNumber:11}}):s.createElement("span",{style:{width:16},__source:{fileName:eR,lineNumber:85,columnNumber:11}}),t.name)})),tR(this,"resetList",(()=>{st.Z.reset(P.kQuickCommandsSearchPriority)})),tR(this,"moveItem",((e,t)=>{const n=this.props.prefValues[P.kQuickCommandsSearchPriority],s=n.splice(e,1)[0];n.splice(t,0,s),st.Z.set(P.kQuickCommandsSearchPriority,n)}))}render(){const e=this.props.prefValues,t=d.Z.getSync("COMMAND_SHOW_QUICK_COMMANDS").shortcut;return s.createElement(s.Fragment,null,s.createElement(Cc,{categoryTitle:(0,ue.Z)("Quick Commands"),filter:this.props.filter,__source:{fileName:eR,lineNumber:109,columnNumber:9}},s.createElement("p",{className:"info",__source:{fileName:eR,lineNumber:111,columnNumber:11}},t&&t.length>0&&(0,ue.Z)("Open Quick Commands with $2 shortcut.","Open Quick Commands with $2 shortcuts.",[t.length,(0,oc.$)(t).toUpperCase()])," ",(0,ue.Z)("Press Down or Up keys with $1 modifier to skip to next search result section. Press Right key to auto-complete input from current list selection.",["Alt"])),s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:eR,lineNumber:125,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:126,columnNumber:13}},s.createElement("h3",{__source:{fileName:eR,lineNumber:127,columnNumber:15}},(0,ue.Z)("Search Types and Priority")),s.createElement("p",{className:"info",__source:{fileName:eR,lineNumber:128,columnNumber:15}},(0,ue.Z)("Select data types to include in Quick Command search results. Reorder the list to change default search highlight priority.")),s.createElement("div",{className:"master-detail sortable-list qc-priority",__source:{fileName:eR,lineNumber:131,columnNumber:15}},s.createElement(NZ.Z,{filter:this.props.filter,items:(n=e[P.kQuickCommandsSearchPriority],n.map((e=>({key:e,name:JL.Y.find((t=>t.key===e))?.name||""})))),moveItem:this.moveItem,renderListItem:this.renderListItem,supportDragAndDrop:!0,mimeType:"vivaldi/x-settings-quick-command-type",__source:{fileName:eR,lineNumber:132,columnNumber:17}})),s.createElement("input",{type:"button",onClick:this.resetList,value:(0,ue.Z)("Reset Priority"),__source:{fileName:eR,lineNumber:141,columnNumber:15}}))),s.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:eR,lineNumber:149,columnNumber:11}},s.createElement("h3",{__source:{fileName:eR,lineNumber:150,columnNumber:13}},(0,ue.Z)("Quick Command Options")),s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:152,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:153,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsKeepValue],onChange:sR(P.kQuickCommandsKeepValue),__source:{fileName:eR,lineNumber:154,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:157,columnNumber:17}},(0,ue.Z)("Keep Last Typed Value")))),s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:161,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:162,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsLimitResults],onChange:sR(P.kQuickCommandsLimitResults),__source:{fileName:eR,lineNumber:163,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:166,columnNumber:17}},(0,ue.Z)("Limit Number of Visible Search Results")))),!navigator.language.startsWith("en")&&s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:171,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:172,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsSearchEnglish],onChange:sR(P.kQuickCommandsSearchEnglish),__source:{fileName:eR,lineNumber:173,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:176,columnNumber:17}},(0,ue.Z)("Include English Search Terms"))),s.createElement("p",{className:"info",__source:{fileName:eR,lineNumber:178,columnNumber:15}},(0,ue.Z)("Include English equivalent of command names in search results"))),s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:182,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:183,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsOpenUrlInNewTab],onChange:sR(P.kQuickCommandsOpenUrlInNewTab),__source:{fileName:eR,lineNumber:184,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:188,columnNumber:19}},(0,ue.Z)("Open Links in New Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:192,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:193,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsMatchNickname],onChange:sR(P.kQuickCommandsMatchNickname),__source:{fileName:eR,lineNumber:194,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:198,columnNumber:19}},(0,ue.Z)("Open Bookmarks on Nickname Match")))),s.createElement("div",{className:"setting-single",__source:{fileName:eR,lineNumber:202,columnNumber:13}},s.createElement("label",{__source:{fileName:eR,lineNumber:203,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kQuickCommandsUseNotesManager],onChange:sR(P.kQuickCommandsUseNotesManager),__source:{fileName:eR,lineNumber:204,columnNumber:17}}),s.createElement("span",{__source:{fileName:eR,lineNumber:208,columnNumber:19}},(0,ue.Z)("Open Notes in Notes Manager")))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Command Chains"),filter:this.props.filter,__source:{fileName:eR,lineNumber:214,columnNumber:9}},s.createElement(qL.Z,{filter:this.props.filter,category:this.props.category,__source:{fileName:eR,lineNumber:216,columnNumber:11}})));var n}}const rR=(0,bi.Z)(iR,nR);var aR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\RazerChromaIntegration.jsx";function oR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const lR=["keyboard","mouse","chromalink","mousemat","headset"],cR=[P.kRazerChromaDevices,P.kRazerChromaEnabled],uR=[{device:"keyboard",text:(0,ue.Z)("Keyboard")},{device:"mouse",text:(0,ue.Z)("Mouse")},{device:"mousemat",text:(0,ue.Z)("Mouse Mat")},{device:"headset",text:(0,ue.Z)("Headset")},{device:"chromalink",text:(0,ue.Z)("Chroma Link")}];class mR extends s.Component{constructor(e){super(e),oR(this,"isDeviceEnabled",((e,t)=>e.findIndex((e=>e===t))>-1)),oR(this,"onChromaEnabled",(e=>{const t=e.target.checked;st.Z.set(P.kRazerChromaEnabled,t)})),oR(this,"onDeviceChecked",((e,t)=>{const n=t.target.checked,s=this.props.prefValues[P.kRazerChromaDevices],i=lR.filter((t=>e===t?n:this.isDeviceEnabled(s,t)));st.Z.set(P.kRazerChromaDevices,i)}))}renderDeviceList(){const e=this.props.prefValues[P.kRazerChromaDevices];return uR.map((t=>s.createElement("div",{key:t.device,className:"setting-single pad-left",__source:{fileName:aR,lineNumber:67,columnNumber:9}},s.createElement("label",{__source:{fileName:aR,lineNumber:68,columnNumber:11}},s.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[P.kRazerChromaEnabled],checked:Boolean(this.isDeviceEnabled(e,t.device)),onChange:this.onDeviceChecked.bind(this,t.device),__source:{fileName:aR,lineNumber:69,columnNumber:13}}),s.createElement("span",{__source:{fileName:aR,lineNumber:74,columnNumber:13}},t.text)))))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Razer Chroma Theme Integration"),filter:this.props.filter,__source:{fileName:aR,lineNumber:86,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:aR,lineNumber:89,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:aR,lineNumber:90,columnNumber:11}},s.createElement("label",{__source:{fileName:aR,lineNumber:91,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kRazerChromaEnabled],onChange:this.onChromaEnabled,__source:{fileName:aR,lineNumber:92,columnNumber:15}}),s.createElement("span",{__source:{fileName:aR,lineNumber:96,columnNumber:15}},(0,ue.Z)("Enable Razer Chroma Integration"))),s.createElement("p",{className:"info",__source:{fileName:aR,lineNumber:98,columnNumber:13}},(0,ue.Z)("Requires Razer Chroma enabled devices connected to the local machine."))),this.renderDeviceList()))}}const dR=(0,bi.Z)(mR,cR);var hR=n(72191),pR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\readermode\\ReaderModeControls.jsx";function gR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bR(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,NR(e,t,"set"),n),n}function NR(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const fR=st.Z.getEventHandler,_R=[P.kKeyboardTabToAll,P.kWebpagesReaderAllowVertical,P.kWebpagesReaderControls,P.kWebpagesReaderStyle],vR=["ja","ja-KS","ko","zh-CN","zh-TW"].includes(navigator.language);var ER=new WeakMap;class CR extends s.Component{constructor(e,t){super(e),ER.set(this,{writable:!0,value:void 0}),gR(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId);this.setState({windowStyle:e})})),gR(this,"setTheme",(e=>()=>{this.setStyle({themeStyle:e})})),gR(this,"setFontFamily",(e=>()=>{this.setStyle({fontFamily:e})})),gR(this,"setLineHeight",(e=>()=>{const t=(this.props.prefValues[P.kWebpagesReaderStyle].lineHeight+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({lineHeight:parseFloat(t)})})),gR(this,"setFontSize",(e=>()=>{const t=(this.props.prefValues[P.kWebpagesReaderStyle].fontSize+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({fontSize:parseFloat(t)})})),gR(this,"setWidth",(e=>()=>{const t=this.props.prefValues[P.kWebpagesReaderStyle];this.setStyle({width:Math.round(t.width+("increment"===e?50:-50))})})),gR(this,"setDirection",(e=>()=>{this.setStyle({writingMode:e})})),gR(this,"setStyle",(0,vb.default)((e=>{st.Z.set(P.kWebpagesReaderStyle,{...this.props.prefValues[P.kWebpagesReaderStyle],...e}),hR.Z.setReaderModeStyle()}),300,{leading:!0,trailing:!0})),gR(this,"toggleControls",(()=>{this.setState((e=>({isOpen:!e.isOpen})))})),gR(this,"canFontGrow",(()=>this.props.prefValues[P.kWebpagesReaderStyle].fontSize<2)),gR(this,"canFontShrink",(()=>this.props.prefValues[P.kWebpagesReaderStyle].fontSize>.5)),gR(this,"canLineHeightGrow",(()=>this.props.prefValues[P.kWebpagesReaderStyle].lineHeight<2)),gR(this,"canLineHeightShrink",(()=>this.props.prefValues[P.kWebpagesReaderStyle].lineHeight>1)),gR(this,"canColumnGrow",(()=>{const e=this.props.prefValues[P.kWebpagesReaderStyle],t=document.body?document.body.clientWidth:0,n=document.body?document.body.clientHeight:0,s=Math.max(t-80,2e3),i=Math.max(n-100,900),r="vertical-rl"===e.writingMode;return e.width<(r?i:s)})),gR(this,"canColumnShrink",(()=>this.props.prefValues[P.kWebpagesReaderStyle].width>300)),this.state={isOpen:!1,windowStyle:Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||{}}}componentDidMount(){bR(this,ER,Z.Z.addListener(this.onThemeStoreChanged))}componentWillUnmount(){var e,t;(e=this,t=ER,function(e,t){return t.get?t.get.call(e):t.value}(e,NR(e,t,"get"))).remove()}render(){const e=this.props.prefValues[P.kWebpagesReaderAllowVertical],t=this.props.prefValues[P.kWebpagesReaderStyle],n=this.state.windowStyle["--colorFg"],i="vertical-rl"===t.writingMode;if(this.props.prefs){const n=s.createElement("div",{className:"setting-group unlimited",__source:{fileName:pR,lineNumber:194,columnNumber:9}},s.createElement("h2",{__source:{fileName:pR,lineNumber:195,columnNumber:11}},(0,ue.Z)("Reader")),s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:199,columnNumber:11}},s.createElement("label",{__source:{fileName:pR,lineNumber:200,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesReaderControls],onChange:fR(P.kWebpagesReaderControls),__source:{fileName:pR,lineNumber:201,columnNumber:15}}),s.createElement("span",{__source:{fileName:pR,lineNumber:204,columnNumber:15}},(0,ue.Z)("Display Settings on Page in Reader")))),!vR&&s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:209,columnNumber:13}},s.createElement("label",{__source:{fileName:pR,lineNumber:210,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e,onChange:fR(P.kWebpagesReaderAllowVertical),__source:{fileName:pR,lineNumber:211,columnNumber:17}}),s.createElement("span",{__source:{fileName:pR,lineNumber:214,columnNumber:17}},(0,ue.Z)("Allow Vertical Text Direction")))),s.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:pR,lineNumber:219,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:220,columnNumber:13}},s.createElement("h3",{__source:{fileName:pR,lineNumber:221,columnNumber:15}},(0,ue.Z)("Font Face")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:222,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:223,columnNumber:17}},s.createElement(ko,{title:(0,ue.Z)("Sans-serif"),image:cn.g4W.medium,isPressed:"sans-serif"===t.fontFamily,onClick:this.setFontFamily("sans-serif"),tabIndex:0,__source:{fileName:pR,lineNumber:224,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:231,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("Serif"),image:cn.USP.medium,isPressed:"serif"===t.fontFamily,onClick:this.setFontFamily("serif"),tabIndex:0,__source:{fileName:pR,lineNumber:232,columnNumber:19}})))),s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:243,columnNumber:13}},s.createElement("h3",{__source:{fileName:pR,lineNumber:244,columnNumber:15}},(0,ue.Z)("Font Size")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:245,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:246,columnNumber:17}},s.createElement(ko,{className:"decrease-font-size",tooltip:(0,ue.Z)("Decrease font size"),title:(0,ue.Z)("Decrease"),image:cn.g4W.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),tabIndex:0,__source:{fileName:pR,lineNumber:247,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:256,columnNumber:19}}),s.createElement(ko,{className:"increase-font-size",tooltip:(0,ue.Z)("Increase font size"),title:(0,ue.Z)("Increase"),image:cn.g4W.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),tabIndex:0,__source:{fileName:pR,lineNumber:257,columnNumber:19}})),s.createElement("span",{__source:{fileName:pR,lineNumber:267,columnNumber:17}},Math.round(100*t.fontSize)+" %"))),s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:273,columnNumber:13}},s.createElement("h3",{className:"pad-top",__source:{fileName:pR,lineNumber:274,columnNumber:15}},(0,ue.Z)("Line Height")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:275,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:276,columnNumber:17}},s.createElement(ko,{title:(0,ue.Z)("Tighten"),tooltip:(0,ue.Z)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:cn.sss,tabIndex:0,__source:{fileName:pR,lineNumber:277,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:285,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("Loosen"),tooltip:(0,ue.Z)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:cn.zDC,tabIndex:0,__source:{fileName:pR,lineNumber:286,columnNumber:19}})),s.createElement("span",{__source:{fileName:pR,lineNumber:295,columnNumber:17}},parseFloat(t.lineHeight).toFixed(1)))),s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:301,columnNumber:13}},s.createElement("h3",{__source:{fileName:pR,lineNumber:302,columnNumber:15}},(0,ue.Z)("Column Width")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:303,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:304,columnNumber:17}},s.createElement(ko,{title:(0,ue.Z)("Shrink"),tooltip:(0,ue.Z)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:cn.Gpq,tabIndex:0,__source:{fileName:pR,lineNumber:305,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:313,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("Grow"),tooltip:(0,ue.Z)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:cn.Fib,tabIndex:0,__source:{fileName:pR,lineNumber:314,columnNumber:19}})),s.createElement("span",{__source:{fileName:pR,lineNumber:323,columnNumber:17}},t.width+" px"))),(vR||e)&&s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:330,columnNumber:15}},s.createElement("h3",{__source:{fileName:pR,lineNumber:331,columnNumber:17}},(0,ue.Z)("Text Direction")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:332,columnNumber:17}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:333,columnNumber:19}},s.createElement(ko,{tooltip:(0,ue.Z)("Horizontal Text"),title:(0,ue.Z)("title","Horizontal"),onClick:this.setDirection("unset"),isPressed:"vertical-rl"!==t.writingMode,image:cn.weK,tabIndex:0,__source:{fileName:pR,lineNumber:334,columnNumber:21}}),s.createElement(ko,{tooltip:(0,ue.Z)("Vertical Text"),title:(0,ue.Z)("title","Vertical"),isPressed:"vertical-rl"===t.writingMode,onClick:this.setDirection("vertical-rl"),image:cn.lIQ,tabIndex:0,__source:{fileName:pR,lineNumber:342,columnNumber:21}})))),s.createElement("div",{className:"setting-single",__source:{fileName:pR,lineNumber:355,columnNumber:13}},s.createElement("h3",{__source:{fileName:pR,lineNumber:356,columnNumber:15}},(0,ue.Z)("Color Scheme")),s.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:pR,lineNumber:357,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:pR,lineNumber:358,columnNumber:17}},s.createElement(ko,{title:(0,ue.Z)("other","Light"),image:cn.XQw.medium,onClick:this.setTheme("light"),isPressed:"light"===t.themeStyle,buttonStyle:{"--kIconCircleFill":"#f6f6f6","--kIconCircleStroke":"var(--colorFg)"},tabIndex:0,__source:{fileName:pR,lineNumber:359,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:370,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("other","Dark"),image:cn.XQw.medium,onClick:this.setTheme("dark"),isPressed:"dark"===t.themeStyle,buttonStyle:{"--kIconCircleFill":"#111111","--kIconCircleStroke":"var(--colorFg)"},tabIndex:0,__source:{fileName:pR,lineNumber:371,columnNumber:19}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:382,columnNumber:19}}),s.createElement(ko,{title:(0,ue.Z)("other","Theme"),image:cn.XQw.medium,isPressed:"theme"===t.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":"var(--colorAccentBg)","--kIconCircleStroke":"var(--colorFg)"},tabIndex:0,__source:{fileName:pR,lineNumber:383,columnNumber:19}}))))),s.createElement("div",{className:"setting-group unlimited pad-top",__source:{fileName:pR,lineNumber:399,columnNumber:11}},s.createElement("input",{type:"button",value:(0,ue.Z)("Reset to Defaults"),onClick:hR.Z.resetReaderModeStyle,__source:{fileName:pR,lineNumber:400,columnNumber:13}})));return(0,Yi.ZP)(n,this.props.filter)}return[s.createElement(io.Z,{key:"toolbar",classNames:"reader-toolbar",in:this.state.isOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:pR,lineNumber:411,columnNumber:11}},s.createElement("div",{className:"toolbar toolbar-default toolbar-medium reader-toolbar",__source:{fileName:pR,lineNumber:422,columnNumber:13}},s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:424,columnNumber:15}},s.createElement(ko,{tooltip:(0,ue.Z)("Sans-serif"),image:cn.g4W.medium,isPressed:"sans-serif"===t.fontFamily,onClick:this.setFontFamily("sans-serif"),__source:{fileName:pR,lineNumber:425,columnNumber:17}}),s.createElement(ko,{tooltip:(0,ue.Z)("Serif"),image:cn.USP.medium,buttonStyle:{fontFamily:"serif"},isPressed:"serif"===t.fontFamily,onClick:this.setFontFamily("serif"),__source:{fileName:pR,lineNumber:431,columnNumber:17}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:440,columnNumber:15}},s.createElement(ko,{className:"decrease-font-size",tooltip:(0,ue.Z)("Decrease font size"),image:cn.g4W.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),__source:{fileName:pR,lineNumber:441,columnNumber:17}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:448,columnNumber:17}}),s.createElement(ko,{className:"increase-font-size",tooltip:(0,ue.Z)("Increase font size"),image:cn.g4W.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),__source:{fileName:pR,lineNumber:449,columnNumber:17}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:458,columnNumber:15}},s.createElement(ko,{className:i?"button-rotateimage":"",tooltip:(0,ue.Z)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:cn.sss,__source:{fileName:pR,lineNumber:459,columnNumber:17}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:466,columnNumber:17}}),s.createElement(ko,{className:i?"button-rotateimage":"",tooltip:(0,ue.Z)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:cn.zDC,__source:{fileName:pR,lineNumber:467,columnNumber:17}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:476,columnNumber:15}},s.createElement(ko,{className:i?"button-rotateimage":"",tooltip:(0,ue.Z)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:cn.Gpq,__source:{fileName:pR,lineNumber:477,columnNumber:17}}),s.createElement("hr",{__source:{fileName:pR,lineNumber:484,columnNumber:17}}),s.createElement(ko,{className:i?"button-rotateimage":"",tooltip:(0,ue.Z)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:cn.Fib,__source:{fileName:pR,lineNumber:485,columnNumber:17}})),(vR||e)&&s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:495,columnNumber:17}},s.createElement(ko,{tooltip:(0,ue.Z)("Horizontal Text"),isPressed:"vertical-rl"!==t.writingMode,onClick:this.setDirection("unset"),image:cn.weK,__source:{fileName:pR,lineNumber:496,columnNumber:19}}),s.createElement(ko,{tooltip:(0,ue.Z)("Vertical Text"),isPressed:"vertical-rl"===t.writingMode,onClick:this.setDirection("vertical-rl"),image:cn.lIQ,__source:{fileName:pR,lineNumber:502,columnNumber:19}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:pR,lineNumber:511,columnNumber:15}},s.createElement(ko,{tooltip:(0,ue.Z)("other","Light"),image:cn.XQw.medium,onClick:this.setTheme("light"),isPressed:"light"===t.themeStyle,buttonStyle:{"--kIconCircleFill":"white","--kIconCircleStroke":"var(--colorFg)"},__source:{fileName:pR,lineNumber:512,columnNumber:17}}),s.createElement(ko,{tooltip:(0,ue.Z)("other","Dark"),image:cn.XQw.medium,onClick:this.setTheme("dark"),image:cn.XQw.medium,isPressed:"dark"===t.themeStyle,buttonStyle:{"--kIconCircleFill":"black","--kIconCircleStroke":"var(--colorFg)"},__source:{fileName:pR,lineNumber:522,columnNumber:17}}),s.createElement(ko,{tooltip:(0,ue.Z)("other","Inherit Theme"),image:cn.XQw.medium,isPressed:"theme"===t.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":"var(--colorAccentBg)","--kIconCircleStroke":"var(--colorFg)"},__source:{fileName:pR,lineNumber:533,columnNumber:17}})))),s.createElement(ko,{buttonStyle:this.state.isOpen?void 0:{fill:String(n)},key:"reader-settings-toggle",className:"reader-settings-toggle",onClick:this.toggleControls,tooltip:(0,ue.Z)("Reader settings"),image:cn.bqs.medium,__source:{fileName:pR,lineNumber:548,columnNumber:11}})]}}gR(CR,"contextType",Vs.Z);const wR=(0,bi.Z)(CR,_R);var yR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordItem.jsx";class SR extends s.Component{render(){const{origin:e,username:t,password:n}=this.props.savedPassword,{columns:i}=this.props;return i.length<1||!this.props.savedPassword?null:i.map((i=>{switch(i.id){case"origin":return s.createElement("label",{key:i.id,__source:{fileName:yR,lineNumber:34,columnNumber:13}},s.createElement("span",{className:"site-icon",onDoubleClick:this.props.openLink.bind(null,e),title:(0,ue.Z)("Double-click to visit $1",[e]),__source:{fileName:yR,lineNumber:35,columnNumber:15}},s.createElement(Ls,{url:e,loadType:"page",__source:{fileName:yR,lineNumber:39,columnNumber:17}})),s.createElement("span",{__source:{fileName:yR,lineNumber:41,columnNumber:15}},e));case"username":return s.createElement("label",{key:i.id,__source:{fileName:yR,lineNumber:47,columnNumber:13}},s.createElement("input",{type:"text",value:t,tabIndex:-1,readOnly:!0,__source:{fileName:yR,lineNumber:48,columnNumber:15}}));case"password":return s.createElement("div",{key:i.id,__source:{fileName:yR,lineNumber:54,columnNumber:13}},s.createElement("label",{__source:{fileName:yR,lineNumber:55,columnNumber:15}},this.props.showPassword?s.createElement("input",{type:"text",value:n,tabIndex:-1,readOnly:!0,__source:{fileName:yR,lineNumber:57,columnNumber:21}}):s.createElement("span",{__source:{fileName:yR,lineNumber:58,columnNumber:21}},"•••••••")),s.createElement("button",{type:"button",className:"listcontrol",title:this.props.showPassword?(0,ue.Z)("Hide password"):(0,ue.Z)("other","Show password"),tabIndex:-1,onClick:this.props.togglePassword.bind(null,this.props.savedPassword.index),dangerouslySetInnerHTML:{__html:cn.sgm},__source:{fileName:yR,lineNumber:61,columnNumber:15}}));default:return null}}))}}const TR=SR;var kR=n(6826);function IR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class AR extends s.PureComponent{constructor(...e){super(...e),IR(this,"_passwordTree",s.createRef()),IR(this,"state",{visiblePasswords:[]}),IR(this,"togglePassword",(e=>{b.Z.savedpasswords.authenticate(this.context.vivaldiWindowId,(t=>{t&&this.onShowPassword(e)}))})),IR(this,"onShowPassword",(e=>{this.setState((t=>{const n=t.visiblePasswords.slice(0);return n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),{visiblePasswords:n}}))})),IR(this,"onPasswordDeleted",(e=>{this.state.visiblePasswords.includes(e)&&this.setState((t=>{const n=t.visiblePasswords.slice(0);return n.splice(n.indexOf(e),1),{visiblePasswords:n}}))})),IR(this,"openLink",(e=>{$.Z.openURL(e)})),IR(this,"copyPassword",(e=>{b.Z.savedpasswords.authenticate(this.context.vivaldiWindowId,(t=>{t&&al.Z.set(e)}))})),IR(this,"getContextMenuItems",(e=>{const t=this.state.visiblePasswords.includes(e.index);return[{handler:this.onShowPassword.bind(null,e.index),visible:t,...(0,Mn.Z)("Hide Password")},{handler:this.togglePassword.bind(null,e.index),visible:!t,...(0,Mn.Z)("Show Password")},z.Z.separatorItem,{handler:this.copyPassword.bind(null,e.password),...(0,Mn.Z)("Copy Password")},{handler:al.Z.set.bind(null,e.username),...(0,Mn.Z)("Copy Account Name")},{handler:this.openLink.bind(null,e.origin),visible:(0,As.q9)(e.origin).startsWith("http"),...(0,Mn.Z)("Visit Page")},z.Z.separatorItem,{handler:this.props.onDelete.bind(null,e),...(0,Mn.Z)("Delete Password")}]})),IR(this,"onKeyDown",(e=>{if(!this._passwordTree.current)return;const t=this._passwordTree.current.getSelectedItem();if(t)switch(e.key){case"Delete":case"Backspace":this.props.onDelete(t);break;case"Enter":this.openLink(t.origin)}})),IR(this,"onMouseDown",(()=>{this._passwordTree.current&&this._passwordTree.current.focusTree()})),IR(this,"getRowComponentProps",(e=>({columns:this.props.columns,savedPassword:e.node,showPassword:this.state.visiblePasswords.includes(e.node.index),togglePassword:this.togglePassword,openLink:this.openLink})))}componentDidMount(){this._passwordTree.current&&this._passwordTree.current.focusTree()}render(){return s.createElement(Sg,{ref:this._passwordTree,rowComponent:TR,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,enableDragAndDrop:!1,onItemMouseDown:this.onMouseDown,onItemDoubleClick:qo.default,onKeyDown:this.onKeyDown,getContextMenuItems:this.getContextMenuItems,isFolder:kR.Z,isValidForClipboard:kR.Z,hasChildren:kR.Z,sorting:this.props.sorting,columns:this.props.columns,multiSelect:!1,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordsTree.jsx",lineNumber:164,columnNumber:7}})}}IR(AR,"contextType",Vs.Z);const ZR=AR;var PR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswords.jsx";function DR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const MR=h.Z.passwordsPrivate.onPasswordsFileExportProgress,OR=[P.kCredentialsEnableService],xR=st.Z.getEventHandler,LR="passwords",RR=[{text:(0,ue.Z)("Website"),value:"origin",fullScreenTitle:(0,ue.Z)("Sort by website"),width:300,visible:!0,key:!0},{text:(0,ue.Z)("title","Account Name"),value:"username",fullScreenTitle:(0,ue.Z)("Sort by account name"),width:160,visible:!0},{text:(0,ue.Z)("Password"),value:"password",fullScreenTitle:(0,ue.Z)("Sort by password"),width:160,visible:!0}];class BR extends s.Component{constructor(e){super(e),DR(this,"passwordTree",s.createRef()),DR(this,"sortComparator",((e,t)=>e.index<t.index?1:-1)),DR(this,"onSortChange",((e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}})})),DR(this,"onUpdateRow",(e=>this.setState({columns:e}))),DR(this,"onSaveRow",(()=>pg(this.state.columns,LR))),DR(this,"exportProgress",(e=>{this.setState({exportStatus:e.status}),console.log("status: "+e.status)})),DR(this,"getSavedPassords",(()=>b.Z.savedpasswords.getList((e=>{this.setState({savedPasswordsData:e})})))),DR(this,"deleteSavedPassword",(()=>{const e=this.state.toRemove;e&&(b.Z.savedpasswords.remove(e.index,(()=>{this.passwordTree.current&&this.passwordTree.current.onPasswordDeleted(e.index),this.getSavedPassords()})),this.setState({confirmation:!1,toRemove:null}))})),DR(this,"onAskToDelete",(e=>this.setState({confirmation:!0,toRemove:e}))),DR(this,"onCancel",(()=>this.setState({confirmation:!1,toRemove:null}))),DR(this,"togglePasswordList",(()=>this.setState((e=>({passwordsVisible:!e.passwordsVisible,siteFilter:""}))))),DR(this,"exportPasswords",(()=>{h.Z.passwordsPrivate.exportPasswords((()=>{}))})),DR(this,"filterEntries",(e=>this.setState({siteFilter:e.target.value}))),DR(this,"renderDeleteConfirmationModal",(()=>{const e=this.state.toRemove;if(!e)return null;const t=Is.parse(e.origin).hostname;return s.createElement(ln.Z,{onRequestClose:this.onCancel,dialogWidth:400,__source:{fileName:PR,lineNumber:190,columnNumber:7}},s.createElement("div",{className:"dialog-delete-password",__source:{fileName:PR,lineNumber:191,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:PR,lineNumber:192,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:PR,lineNumber:193,columnNumber:13}},(0,ue.Z)("Delete password for $1?",[t||e.origin]))),s.createElement("div",{className:"dialog-content",__source:{fileName:PR,lineNumber:197,columnNumber:11}},s.createElement("p",{__source:{fileName:PR,lineNumber:198,columnNumber:13}},(0,ue.Z)("Password for user “$1” on page “$2” will be removed.",[e.username,e.origin]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:PR,lineNumber:204,columnNumber:11}},s.createElement("input",{type:"button",className:"primary",onClick:this.deleteSavedPassword,value:(0,ue.Z)("other","Delete"),autoFocus:!0,__source:{fileName:PR,lineNumber:205,columnNumber:13}}),s.createElement("input",{type:"button",onClick:this.onCancel,value:(0,ue.Z)("Cancel"),__source:{fileName:PR,lineNumber:210,columnNumber:13}}))))}));const t=gg().passwords;this.state={savedPasswordsData:[],confirmation:!1,toRemove:null,siteFilter:"",passwordsVisible:!1,columns:t||bg(RR),sorting:{sortOrder:1,sortField:"manually",comparator:this.sortComparator},exportStatus:"NOT_STARTED"}}componentDidMount(){this.getSavedPassords(),MR.addListener(this.exportProgress)}componentWillUnmount(){MR.removeListener(this.exportProgress)}render(){const{siteFilter:e}=this.state,t=e.toLowerCase(),n=this.state.savedPasswordsData.filter((e=>e.username.toLowerCase().includes(t)||e.origin.toLowerCase().includes(t)));return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Passwords"),filter:this.props.filter,className:"saved-passwords setting-group unlimited",__source:{fileName:PR,lineNumber:229,columnNumber:7}},this.state.confirmation&&this.renderDeleteConfirmationModal(),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:PR,lineNumber:234,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:PR,lineNumber:235,columnNumber:11}},s.createElement("label",{__source:{fileName:PR,lineNumber:236,columnNumber:13}},s.createElement("input",{type:"checkbox",onChange:xR(P.kCredentialsEnableService),checked:this.props.prefValues[P.kCredentialsEnableService],__source:{fileName:PR,lineNumber:237,columnNumber:15}}),s.createElement("span",{__source:{fileName:PR,lineNumber:241,columnNumber:15}},(0,ue.Z)("Save Webpage Passwords")))),this.state.passwordsVisible&&s.createElement("div",{className:"setting-single",__source:{fileName:PR,lineNumber:246,columnNumber:13}},s.createElement("input",{type:"search",defaultValue:"",placeholder:(0,ue.Z)("Filter Passwords"),onChange:this.filterEntries,__source:{fileName:PR,lineNumber:247,columnNumber:15}})),this.state.passwordsVisible&&s.createElement("div",{className:"saved-passwords-tree",__source:{fileName:PR,lineNumber:257,columnNumber:13}},s.createElement(RN,{fields:RR,fullsize:!0,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,keyAccess:0,manualSorting:!1,__source:{fileName:PR,lineNumber:258,columnNumber:15}}),s.createElement(ZR,{ref:this.passwordTree,sorting:this.state.sorting,columns:this.state.columns,onDelete:this.onAskToDelete,nodes:n,__source:{fileName:PR,lineNumber:269,columnNumber:15}})),0===n.length&&s.createElement("div",{className:"saved-passwords",__source:{fileName:PR,lineNumber:279,columnNumber:13}},e?(0,ue.Z)("Query “$1” matches no result.",[e]):(0,ue.Z)("No saved passwords found.")),n.length>0&&s.createElement("div",{className:"setting-single",__source:{fileName:PR,lineNumber:288,columnNumber:13}},s.createElement("input",{type:"button",onClick:this.togglePasswordList,value:this.state.passwordsVisible?(0,ue.Z)("Hide Passwords"):(0,ue.Z)("Show Saved Passwords"),__source:{fileName:PR,lineNumber:289,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this.exportPasswords,value:(0,ue.Z)("Export Passwords"),disabled:"IN_PROGRESS"===this.state.exportStatus,__source:{fileName:PR,lineNumber:297,columnNumber:15}}),"FAILED_CANCELLED"===this.state.exportStatus||"FAILED_WRITE_FAILED"===this.state.exportStatus&&s.createElement(Qc,{type:"error",key:"error",__source:{fileName:PR,lineNumber:305,columnNumber:17}},(0,ue.Z)("Export failed.")),s.createElement("p",{className:"info",__source:{fileName:PR,lineNumber:309,columnNumber:15}},(0,ue.Z)("Passwords are exported in clear text without encryption.")))))}}const FR=(0,bi.Z)(BR,OR);var UR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\EditSearchEngine.jsx";function VR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const HR={title:(0,ue.Z)("title","Name"),Nickname:(0,ue.Z)("Nickname"),"Nickname in use by $1":(0,ue.Z)("Nickname in use by $1",[""]),URL:(0,ue.Z)("URL"),"Substitute search keyword in address with %s or %S":(0,ue.Z)("Substitute search keyword in address with %s or %S"),"Suggest URL":(0,ue.Z)("Suggest URL"),"Use POST method":(0,ue.Z)("Use POST method"),"Set as Default Search":(0,ue.Z)("Set as Default Search"),"Set as Private Search":(0,ue.Z)("Set as Private Search"),Save:(0,ue.Z)("Save")};function WR(e){const t=Dn.Z.getById(e);return t?{id:e,name:t.name?t.name.trim():"",url:t.url?t.url.trim():"",suggestUrl:t.suggestUrl?t.suggestUrl.trim():"",faviconUrl:t.faviconUrl?t.faviconUrl.trim():"",keyword:t.keyword?t.keyword.trim().toLowerCase():"",post:Boolean(t.post),default:Dn.Z.isDefault(e,!1),defaultFixed:Dn.Z.isDefault(e,!1),private:Dn.Z.isDefault(e,!0),nicknameTaken:!1}:{id:e,name:"",url:"",suggestUrl:"",faviconUrl:"",keyword:"",post:!1,default:!1,defaultFixed:!1,private:!1,nicknameTaken:!1}}class zR extends s.Component{constructor(e){super(e),VR(this,"urlHasChanged",!1),VR(this,"handleKeyDown",(e=>{"Enter"===e.key&&this.save()})),VR(this,"handleBlur",(()=>{this.props.id===this.state.id&&this.save()})),VR(this,"getDataUri",((e,t)=>{const n=new Image;n.onload=function(){const n=document.createElement("canvas");n.width=this.naturalWidth,n.height=this.naturalHeight,n.getContext("2d").drawImage(this,0,0),t(n.toDataURL(e))},n.src=e})),VR(this,"constructFavicon",(e=>{if(e&&!this.state.faviconUrl){const t=(0,As.q9)(e.trim()),n=document.createElement("a");n.href=t;const s=n.protocol+"//"+n.host+"/favicon.ico";this.getDataUri(s,(e=>{this.urlHasChanged&&this.setState({faviconUrl:e},(()=>this.save()))}))}})),VR(this,"canSave",(e=>e.id&&!e.nicknameTaken)),VR(this,"save",((e=this.state,t=!0)=>{if(this.canSave(e)){const n=e.url.trim(),s=Dn.Z.getById(e.id);if(s){const i=(0,Om.Z)(s);i.name=e.name,i.keyword=e.keyword,i.url=n?n.includes(":")?n:(0,As.q9)(n):"",i.suggestUrl=""!==e.suggestUrl.trim()?(0,As.q9)(e.suggestUrl):"",this.urlHasChanged&&(i.faviconUrl=e.faviconUrl),i.post=e.post;const r=Dn.Z.getDefault(!1).id,a=Dn.Z.getDefault(!0).id;(0,nd.default)(s,i)&&e.default===(r===this.state.id)&&e.private===(a===this.state.id)||(ur.modify(i,e.default),e.private?ur.setDefault(i.id,!0):a===i.id&&ur.setDefault(r,!0)),t&&this.setState((e=>({defaultFixed:e.default})))}}})),VR(this,"nameChange",(e=>{this.setState({name:e.target.value})})),VR(this,"nicknameChange",(e=>{const t=e.target.value.trim();let n=t.length>0&&Dn.Z.hasKeyword(t);if(n&&this.props.id){const e=Dn.Z.getById(this.props.id);e&&e.keyword===t&&(n=!1)}this.setState({keyword:t,nicknameTaken:n})})),VR(this,"urlChange",(e=>{const t=e.target.value;(0,As.C3)(t)&&this.constructFavicon(t),this.setState({url:t}),this.urlHasChanged=!0})),VR(this,"suggestUrlChange",(e=>{this.setState({suggestUrl:e.target.value})})),VR(this,"defaultChange",(e=>{this.setState({default:e.target.checked},(()=>this.save()))})),VR(this,"privateChange",(e=>{this.setState({private:e.target.checked},(()=>this.save()))})),VR(this,"postChange",(e=>{this.setState({post:e.target.checked},(()=>this.save()))})),this.state=WR(e.id)}static getDerivedStateFromProps(e,t){return e.id!==t.id?WR(e.id):null}componentDidUpdate(e,t){e.id!==this.props.id&&(this.save(t,!1),this.urlHasChanged=!1)}render(){const e=this.state.nicknameTaken?Dn.Z.getByKeyword(this.state.keyword):null,t=e?e.name:"";return s.createElement("div",{className:"detail",__source:{fileName:UR,lineNumber:244,columnNumber:7}},s.createElement("div",{className:"detail-content",__source:{fileName:UR,lineNumber:245,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:247,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:248,columnNumber:11}},s.createElement(cP.Z,{type:"text",focusInput:this.props.focusNameInput,label:this.props.searchableStrings.title,value:this.state.name,onBlur:this.handleBlur,onChange:this.nameChange,onKeyDown:this.handleKeyDown,__source:{fileName:UR,lineNumber:249,columnNumber:13}}))),s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:260,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:261,columnNumber:11}},s.createElement(cP.Z,{type:"text",label:this.props.searchableStrings.Nickname,value:this.state.keyword,onBlur:this.handleBlur,onChange:this.nicknameChange,onKeyDown:this.handleKeyDown,__source:{fileName:UR,lineNumber:262,columnNumber:13}})),this.state.nicknameTaken&&s.createElement("span",{className:"info dropfade",__source:{fileName:UR,lineNumber:271,columnNumber:13}},(0,Yi.CH)((0,ue.Z)("Nickname in use by $1",[t]),this.props.filter))),s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:280,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:281,columnNumber:11}},s.createElement(cP.Z,{type:"text",label:this.props.searchableStrings.URL,value:this.state.url,onBlur:this.handleBlur,onChange:this.urlChange,onKeyDown:this.handleKeyDown,__source:{fileName:UR,lineNumber:282,columnNumber:13}})),s.createElement("p",{className:"info",__source:{fileName:UR,lineNumber:290,columnNumber:11}},this.props.searchableStrings["Substitute search keyword in address with %s or %S"])),s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:295,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:296,columnNumber:11}},s.createElement(cP.Z,{type:"text",label:this.props.searchableStrings["Suggest URL"],value:this.state.suggestUrl,onBlur:this.handleBlur,onChange:this.suggestUrlChange,onKeyDown:this.handleKeyDown,__source:{fileName:UR,lineNumber:297,columnNumber:13}}))),s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:307,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:308,columnNumber:11}},s.createElement("label",{__source:{fileName:UR,lineNumber:309,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.default,disabled:this.state.default,onChange:this.defaultChange,__source:{fileName:UR,lineNumber:310,columnNumber:15}}),s.createElement("span",{__source:{fileName:UR,lineNumber:314,columnNumber:15}},this.props.searchableStrings["Set as Default Search"]))),s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:317,columnNumber:11}},s.createElement("label",{__source:{fileName:UR,lineNumber:318,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.private,disabled:this.state.default&&this.state.private,onChange:this.privateChange,__source:{fileName:UR,lineNumber:319,columnNumber:15}}),s.createElement("span",{__source:{fileName:UR,lineNumber:323,columnNumber:15}},this.props.searchableStrings["Set as Private Search"])))),s.createElement("div",{className:"setting-group",__source:{fileName:UR,lineNumber:328,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:UR,lineNumber:329,columnNumber:11}},s.createElement("label",{__source:{fileName:UR,lineNumber:330,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.post,onChange:this.postChange,__source:{fileName:UR,lineNumber:331,columnNumber:15}}),s.createElement("span",{__source:{fileName:UR,lineNumber:334,columnNumber:15}},this.props.searchableStrings["Use POST method"]))),s.createElement("p",{className:"info",__source:{fileName:UR,lineNumber:337,columnNumber:11}},(0,ue.Z)("Submit searches as POST requests.")),s.createElement("p",{className:"info",__source:{fileName:UR,lineNumber:338,columnNumber:11}},(0,ue.Z)("Warning: Unless the engine supports POST requests, enabling this will break searches with this engine.")))))}}const GR=zR;var KR=n(34155),jR="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\SearchEngines.jsx";function YR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $R=[P.kAddressBarInlineSearchEnabled,P.kAddressBarInlineSearchSuggestEnabled,P.kAddressBarInlineSearchSuggestOnNickname,P.kAddressBarSearchDisplay,P.kAddressBarSearchInNewTab,P.kAddressBarSearchKeepSelected,P.kAddressBarSearchShowFavicon,P.kAddressBarSearchSuggestEnabled,P.kPageSearchInBackground,P.kStartpageSpeedDialDisplaySearch],XR=st.Z.getEventHandler;function QR({engines:e,selectedEngine:t,onValueChange:n,tooltip:i}){const r=e.map((e=>({type:"Normal",id:e.id,name:e.name,icon:e.faviconUrl,checked:t.id===e.id})));return s.createElement(s.Fragment,null,s.createElement(nM,{items:r,value:t.id,onValueChange:n,tooltip:i,__source:{fileName:jR,lineNumber:75,columnNumber:5}}))}class qR extends s.Component{constructor(...e){super(...e),YR(this,"_focusEditor",!1),YR(this,"_editorKey",0),YR(this,"state",{confirmation:!1,foundSearchEngine:!1,keepCustomEngines:!1,searchEngines:Dn.Z.getList(),creatingId:""}),YR(this,"_onSearchEngineStoreChanged",(()=>{this.setState({searchEngines:Dn.Z.getList()})})),YR(this,"restoreSearchEngines",(()=>{ur.restore(this.state.keepCustomEngines),this.setState({confirmation:!1})})),YR(this,"setDefault",((e,t)=>{ur.setDefault(e,t),this._editorKey++})),YR(this,"confirmRestoreDefaults",(()=>{this.setState({confirmation:!0}),KR.nextTick((()=>this._editorKey++))})),YR(this,"onCancelConfirm",(()=>{this.setState({confirmation:!1})})),YR(this,"toggleKeepCustomEngines",(()=>{this.setState((e=>({keepCustomEngines:!e.keepCustomEngines})))})),YR(this,"renderModal",(()=>{const e=this.state.keepCustomEngines?(0,ue.Z)("Search engines will be reset to default settings, but your custom search engines will be kept."):(0,ue.Z)("Search engines will be reset to default settings, which will also reset your custom search engines.");return s.createElement(ln.Z,{dialogWidth:400,onRequestClose:this.onCancelConfirm,__source:{fileName:jR,lineNumber:165,columnNumber:7}},s.createElement("div",{className:"dialog-restore-search",__source:{fileName:jR,lineNumber:168,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:jR,lineNumber:169,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:jR,lineNumber:170,columnNumber:13}},(0,ue.Z)("Restore Default Search Engines?"))),s.createElement("div",{className:"dialog-content",__source:{fileName:jR,lineNumber:174,columnNumber:11}},s.createElement("p",{__source:{fileName:jR,lineNumber:175,columnNumber:13}},e)),s.createElement("footer",{className:"dialog-footer",__source:{fileName:jR,lineNumber:179,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:180,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.keepCustomEngines,onChange:this.toggleKeepCustomEngines,__source:{fileName:jR,lineNumber:181,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:184,columnNumber:15}},(0,ue.Z)("Keep Custom Searches"))),s.createElement("span",{__source:{fileName:jR,lineNumber:186,columnNumber:13}},s.createElement("input",{type:"button",className:"danger",onClick:this.restoreSearchEngines,value:(0,ue.Z)("Restore"),__source:{fileName:jR,lineNumber:187,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this.onCancelConfirm,value:(0,ue.Z)("Cancel"),autoFocus:!0,__source:{fileName:jR,lineNumber:192,columnNumber:15}})))))})),YR(this,"removeAt",(e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e],n=Dn.Z.getDefault(!1);n&&n.id!==t.id&&ur.remove(t.id)}})),YR(this,"renderListItem",((e,t)=>this.renderEngine(Dn.Z.getById(t.key),e))),YR(this,"renderCreateListItem",(()=>this.state.creatingId?this.renderEngine(Dn.Z.getById(this.state.creatingId)):null)),YR(this,"renderEngine",((e,t)=>{const n=Dn.Z.isDefault(e.id,!0),i=e.faviconUrl?e.faviconUrl:"/resources/default_favicon_64.png";return s.createElement(s.Fragment,null,s.createElement("img",{className:"item-icon",src:i,__source:{fileName:jR,lineNumber:232,columnNumber:9}}),s.createElement("div",{className:"item-title",__source:{fileName:jR,lineNumber:233,columnNumber:9}},t||e.name),n&&s.createElement("span",{className:"item-badge",__source:{fileName:jR,lineNumber:237,columnNumber:11}},(0,ue.Z)("Private")),s.createElement("div",{className:"item-meta",__source:{fileName:jR,lineNumber:239,columnNumber:9}},e.keyword))})),YR(this,"onCreateEngine",(()=>{const e=Dn.Z.getNewEngine();e.name=(0,ue.Z)("New Engine"),ur.add(e,!1),this._focusEditor=!0,this.setState({creatingId:e.id},KR.nextTick((()=>this._focusEditor=!1)))})),YR(this,"renderContent",((e,t)=>{const n=this.state.searchEngines[e];return n?s.createElement(GR,{key:n.id,focusNameInput:this._focusEditor,searchableStrings:t,filter:this.props.filter,id:n.id,__source:{fileName:jR,lineNumber:261,columnNumber:7}}):null})),YR(this,"onContextMenu",((e,t)=>{const n=[];if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];Dn.Z.isDefault(t.id,!1)||n.push({handler:this.setDefault.bind(this,t.id,!1),...(0,Mn.Z)("searchengine","Set as Default Search")}),Dn.Z.isDefault(t.id,!0)||n.push({handler:this.setDefault.bind(this,t.id,!0),...(0,Mn.Z)("searchengine","Set as Private Search")})}(0,Hs.Z)(this.context.vivaldiWindowId,n)(t)})),YR(this,"onActivate",(e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];this.setDefault(t.id,!1)}})),YR(this,"renderCreate",(e=>s.createElement(GR,{key:this._editorKey,searchableStrings:e,filter:this.props.filter,__source:{fileName:jR,lineNumber:302,columnNumber:12}}))),YR(this,"moveEngine",((e,t)=>{if(e>=0&&e<this.state.searchEngines.length){const n=this.state.searchEngines[e];ur.reorder(n.id,t)}}))}componentDidMount(){Dn.Z.addChangeListener(this._onSearchEngineStoreChanged)}componentWillUnmount(){Dn.Z.removeChangeListener(this._onSearchEngineStoreChanged)}UNSAFE_componentWillReceiveProps(e){e.filter&&e.filter.length>0&&this.setState((t=>({foundSearchEngine:void 0!==t.searchEngines.find((t=>(t.keyword+t.url+t.name).toLowerCase().indexOf(e.filter.toLowerCase())>-1))})))}render(){if(!this.state.searchEngines)return null;const e=Dn.Z.getDefault(!1),t=Dn.Z.getDefault(!0),n=this.state.searchEngines.map((t=>({key:t.id,name:t.name,isDefault:t.id===e.id})));return s.createElement(Cc,{categoryTitle:(0,ue.Z)("noun","Search"),filter:this.props.filter,__source:{fileName:jR,lineNumber:333,columnNumber:7}},this.state.confirmation&&this.renderModal(),s.createElement("div",{__source:{fileName:jR,lineNumber:339,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:jR,lineNumber:340,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:341,columnNumber:13}},s.createElement("h3",{__source:{fileName:jR,lineNumber:342,columnNumber:15}},(0,ue.Z)("Default Search Engine")),s.createElement(QR,{engines:this.state.searchEngines,selectedEngine:e,onValueChange:e=>ur.setDefault(e,!1),tooltip:(0,ue.Z)("Select Default Search Engine"),__source:{fileName:jR,lineNumber:343,columnNumber:15}}))),s.createElement("div",{className:"setting-group",__source:{fileName:jR,lineNumber:352,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:353,columnNumber:13}},s.createElement("h3",{__source:{fileName:jR,lineNumber:354,columnNumber:15}},(0,ue.Z)("Private Window Search Engine")),s.createElement(QR,{engines:this.state.searchEngines,selectedEngine:t,onValueChange:e=>ur.setDefault(e,!0),tooltip:(0,ue.Z)("Select Private Window Search Engine"),__source:{fileName:jR,lineNumber:355,columnNumber:15}})))),s.createElement("div",{className:"setting-group",__source:{fileName:jR,lineNumber:365,columnNumber:9}},s.createElement("h3",{__source:{fileName:jR,lineNumber:366,columnNumber:11}},(0,ue.Z)("Search Field Display")),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:368,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:369,columnNumber:13}},s.createElement(_i,{name:"renderSearchField",value:this.props.prefValues[P.kAddressBarSearchDisplay],onChange:XR(P.kAddressBarSearchDisplay),__source:{fileName:jR,lineNumber:370,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:374,columnNumber:17}},s.createElement("label",{__source:{fileName:jR,lineNumber:375,columnNumber:19}},s.createElement("input",{type:"radio",value:"field",__source:{fileName:jR,lineNumber:376,columnNumber:21}}),s.createElement("span",{__source:{fileName:jR,lineNumber:380,columnNumber:21}},(0,ue.Z)("Show in Address Bar")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:383,columnNumber:17}},s.createElement("label",{__source:{fileName:jR,lineNumber:384,columnNumber:19}},s.createElement("input",{type:"radio",value:"button",__source:{fileName:jR,lineNumber:385,columnNumber:21}}),s.createElement("span",{__source:{fileName:jR,lineNumber:389,columnNumber:21}},(0,ue.Z)("Show as a Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:392,columnNumber:17}},s.createElement("label",{__source:{fileName:jR,lineNumber:393,columnNumber:19}},s.createElement("input",{type:"radio",value:"disabled",__source:{fileName:jR,lineNumber:394,columnNumber:21}}),s.createElement("span",{__source:{fileName:jR,lineNumber:398,columnNumber:21}},(0,ue.Z)("Disable"))))))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:405,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:406,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarSearchInNewTab],disabled:"disabled"===this.props.prefValues[P.kAddressBarSearchDisplay],onChange:XR(P.kAddressBarSearchInNewTab),__source:{fileName:jR,lineNumber:407,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:412,columnNumber:15}},(0,ue.Z)("Always Search in New Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:416,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:417,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarSearchShowFavicon],disabled:"disabled"===this.props.prefValues[P.kAddressBarSearchDisplay],onChange:XR(P.kAddressBarSearchShowFavicon),__source:{fileName:jR,lineNumber:418,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:424,columnNumber:15}},(0,ue.Z)("Show Search Engine Icon"))))),s.createElement("div",{className:"setting-group",__source:{fileName:jR,lineNumber:429,columnNumber:9}},s.createElement("h3",{__source:{fileName:jR,lineNumber:430,columnNumber:11}},(0,ue.Z)("Search Options")),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:431,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:432,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarInlineSearchEnabled],onChange:XR(P.kAddressBarInlineSearchEnabled),__source:{fileName:jR,lineNumber:433,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:437,columnNumber:15}},(0,ue.Z)("Search in Address Field")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:441,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:442,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kStartpageSpeedDialDisplaySearch],onChange:XR(P.kStartpageSpeedDialDisplaySearch),__source:{fileName:jR,lineNumber:443,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:446,columnNumber:15}},(0,ue.Z)("Show Search Field on Speed Dial")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:450,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:451,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarSearchKeepSelected],onChange:XR(P.kAddressBarSearchKeepSelected),__source:{fileName:jR,lineNumber:452,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:455,columnNumber:15}},(0,ue.Z)("Keep Last Selected Search Engine")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:459,columnNumber:11}},s.createElement("label",{__source:{fileName:jR,lineNumber:460,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPageSearchInBackground],onChange:XR(P.kPageSearchInBackground),__source:{fileName:jR,lineNumber:461,columnNumber:15}}),s.createElement("span",{__source:{fileName:jR,lineNumber:464,columnNumber:15}},(0,ue.Z)("Page Selection Search in Background"))))),s.createElement("div",{className:"setting-group",__source:{fileName:jR,lineNumber:469,columnNumber:9}},s.createElement("div",{id:"searchSuggest",className:"setting-group",__source:{fileName:jR,lineNumber:470,columnNumber:11}},s.createElement("h3",{__source:{fileName:jR,lineNumber:471,columnNumber:13}},(0,ue.Z)("Allow Search Suggestions")),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:472,columnNumber:13}},s.createElement("label",{__source:{fileName:jR,lineNumber:473,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarInlineSearchSuggestEnabled],onChange:XR(P.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:jR,lineNumber:474,columnNumber:17}}),s.createElement("span",{__source:{fileName:jR,lineNumber:477,columnNumber:17}},(0,ue.Z)("searchengine","In Address Field")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:jR,lineNumber:480,columnNumber:13}},s.createElement("label",{__source:{fileName:jR,lineNumber:481,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarInlineSearchSuggestOnNickname],disabled:!this.props.prefValues[P.kAddressBarInlineSearchSuggestEnabled],onChange:XR(P.kAddressBarInlineSearchSuggestOnNickname),__source:{fileName:jR,lineNumber:482,columnNumber:17}}),s.createElement("span",{__source:{fileName:jR,lineNumber:486,columnNumber:17}},(0,ue.Z)("Only when Using Search Engine Nickname")))),s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:489,columnNumber:13}},s.createElement("label",{__source:{fileName:jR,lineNumber:490,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kAddressBarSearchSuggestEnabled],onChange:XR(P.kAddressBarSearchSuggestEnabled),__source:{fileName:jR,lineNumber:491,columnNumber:17}}),s.createElement("span",{__source:{fileName:jR,lineNumber:496,columnNumber:17}},(0,ue.Z)("searchengine","In Search Field")))))),s.createElement(TD.Z,{className:"setting-search-engine",filter:this.props.filter,subtitle:(0,ue.Z)("Search Engines"),deleteTitle:(0,ue.Z)("title","Delete Search Engine"),addTipString:(0,ue.Z)("Add Search Engine"),deleteTipString:(0,ue.Z)("tooltip","Delete Search Engine"),items:n,supportDragAndDrop:!0,masterLayout:1,mimeType:Dn.g,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,contentStrings:HR,renderCreate:this.renderCreate,moveItem:this.moveEngine,onContextMenu:this.onContextMenu,onActivate:this.onActivate,onRemove:this.removeAt,onCreateItem:this.onCreateEngine,__source:{fileName:jR,lineNumber:502,columnNumber:9}}),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:jR,lineNumber:524,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:jR,lineNumber:525,columnNumber:11}},s.createElement("input",{type:"button",onClick:this.confirmRestoreDefaults,value:(0,ue.Z)("Restore Defaults"),__source:{fileName:jR,lineNumber:526,columnNumber:13}}),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:jR,lineNumber:529,columnNumber:15}}))))}}YR(qR,"contextType",Vs.Z);const JR=(0,bi.Z)(qR,$R);var eB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSidebar.jsx";function tB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nB=[P.kMailIsTurnedOff];function sB(e,t){const n=t[P.kMailIsTurnedOff];return Object.keys(Pt.mh).filter((e=>!("calendar"===e&&n||"mail"===e&&n||"rss"===e&&n||"chat"===e))).filter((t=>{const n=Pt.mh[t].section,s=!n||n===t,i=!!e&&n===e.section;return s||i})).map((e=>({...Pt.mh[e],key:e})))}class iB extends s.PureComponent{constructor(...e){super(...e),tB(this,"rowComponent",(e=>{const t=e.node,n=this.props.selectedCategory.title===t.title,i=t.section&&t.section!==t.key&&t.section===this.props.selectedCategory.section;return s.createElement("div",{key:t.id,onMouseDown:e=>e.preventDefault(),className:bn()({"button-category":!0,"category-selected":n,section:i}),__source:{fileName:eB,lineNumber:80,columnNumber:7}},!i&&s.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon},__source:{fileName:eB,lineNumber:89,columnNumber:11}}),t.title)})),tB(this,"handleItemClick",((e,{key:t})=>{this.props.onCategorySelected(t)})),tB(this,"handleItemsActivated",((e,t)=>{this.props.onCategorySelected(t[0].key)})),tB(this,"handleFilterChange",(({currentTarget:e})=>{this.props.onFilterChange(e.value)}))}render(){return s.createElement("div",{className:"settings-sidebar",__source:{fileName:eB,lineNumber:109,columnNumber:12}},s.createElement("header",{className:"settings-navigation-header",__source:{fileName:eB,lineNumber:110,columnNumber:7}},s.createElement("input",{className:"settings-search",type:"search",ref:this.props.focusRef,placeholder:(0,ue.Z)("verb","Search"),value:this.props.filter,onChange:this.handleFilterChange,autoFocus:W.ZP.isSettings(this.context.vivaldiWindowId),tabIndex:"0",__source:{fileName:eB,lineNumber:111,columnNumber:9}})),s.createElement(Sg,{rowComponent:this.rowComponent,nodes:sB(this.props.selectedCategory,this.props.prefValues),className:"settings-navigation",settings:"SETTINGS_TREE",onItemClick:this.handleItemClick,onItemsActivated:this.handleItemsActivated,enableDragAndDrop:!1,rowHeight:28,isFolder:kR.Z,hasChildren:kR.Z,__source:{fileName:eB,lineNumber:122,columnNumber:7}}))}}const rB=(0,bi.Z)(iB,nB);var aB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startpage\\StartPage.jsx";const oB=[P.kStartpageNavigation,P.kStartpageSpeedDialAddButtonVisible,P.kStartpageSpeedDialAllowDnd,P.kStartpageSpeedDialColumns,P.kStartpageSpeedDialControlsVisible,P.kStartpageSpeedDialDeleteVisible,P.kStartpageSpeedDialFaviconVisible,P.kStartpageSpeedDialGameButtonShow,P.kStartpageSpeedDialTitlesVisible,P.kStartpageSpeedDialWidth],lB=st.Z.getEventHandler;class cB extends s.PureComponent{render(){const{filter:e,prefValues:t}=this.props;return s.createElement("div",{__source:{fileName:aB,lineNumber:49,columnNumber:7}},s.createElement(Cc,{categoryTitle:(0,ue.Z)("verb","Start Page"),filter:e,__source:{fileName:aB,lineNumber:50,columnNumber:9}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:aB,lineNumber:54,columnNumber:11}},s.createElement("div",{className:"setting-group",__source:{fileName:aB,lineNumber:56,columnNumber:13}},s.createElement("h3",{__source:{fileName:aB,lineNumber:57,columnNumber:15}},(0,ue.Z)("Start Page Navigation")),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:58,columnNumber:15}},s.createElement(_i,{name:"StartPageNavigation",value:t[P.kStartpageNavigation],onChange:lB(P.kStartpageNavigation),__source:{fileName:aB,lineNumber:59,columnNumber:17}},s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:63,columnNumber:19}},s.createElement("label",{__source:{fileName:aB,lineNumber:64,columnNumber:21}},s.createElement("input",{type:"radio",value:"on",__source:{fileName:aB,lineNumber:65,columnNumber:23}}),s.createElement("span",{__source:{fileName:aB,lineNumber:66,columnNumber:23}},(0,ue.Z)("Show on Internal Pages")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:69,columnNumber:19}},s.createElement("label",{__source:{fileName:aB,lineNumber:70,columnNumber:21}},s.createElement("input",{type:"radio",value:"speed_dial_only",__source:{fileName:aB,lineNumber:71,columnNumber:23}}),s.createElement("span",{__source:{fileName:aB,lineNumber:72,columnNumber:23}},(0,ue.Z)("Show on Speed Dial Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:75,columnNumber:19}},s.createElement("label",{__source:{fileName:aB,lineNumber:76,columnNumber:21}},s.createElement("input",{type:"radio",value:"off",__source:{fileName:aB,lineNumber:77,columnNumber:23}}),s.createElement("span",{__source:{fileName:aB,lineNumber:78,columnNumber:23}},(0,ue.Z)("radio","Hide Titles"))))))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Speed Dial"),filter:e,__source:{fileName:aB,lineNumber:87,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:aB,lineNumber:88,columnNumber:11}},s.createElement("h3",{__source:{fileName:aB,lineNumber:89,columnNumber:13}},(0,ue.Z)("Speed Dial Appearance")),s.createElement(_i,{name:"SpeedDialTitles",value:t[P.kStartpageSpeedDialTitlesVisible],onChange:lB(P.kStartpageSpeedDialTitlesVisible),__source:{fileName:aB,lineNumber:91,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:95,columnNumber:15}},s.createElement("label",{__source:{fileName:aB,lineNumber:96,columnNumber:17}},s.createElement("input",{type:"radio",value:"always",__source:{fileName:aB,lineNumber:97,columnNumber:19}}),s.createElement("span",{__source:{fileName:aB,lineNumber:98,columnNumber:19}},(0,ue.Z)("Show Title")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:101,columnNumber:15}},s.createElement("label",{__source:{fileName:aB,lineNumber:102,columnNumber:17}},s.createElement("input",{type:"radio",value:"hover",__source:{fileName:aB,lineNumber:103,columnNumber:19}}),s.createElement("span",{__source:{fileName:aB,lineNumber:104,columnNumber:19}},(0,ue.Z)("Show Title on Hover")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:107,columnNumber:15}},s.createElement("label",{__source:{fileName:aB,lineNumber:108,columnNumber:17}},s.createElement("input",{type:"radio",value:"never",__source:{fileName:aB,lineNumber:109,columnNumber:19}}),s.createElement("span",{__source:{fileName:aB,lineNumber:110,columnNumber:19}},(0,ue.Z)("Hide Title"))))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:115,columnNumber:13}},s.createElement("label",{__source:{fileName:aB,lineNumber:116,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialFaviconVisible],onChange:lB(P.kStartpageSpeedDialFaviconVisible),disabled:"never"===t[P.kStartpageSpeedDialTitlesVisible],__source:{fileName:aB,lineNumber:117,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:123,columnNumber:17}},(0,ue.Z)("Show Favicon")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:aB,lineNumber:127,columnNumber:13}},s.createElement("label",{__source:{fileName:aB,lineNumber:128,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialDeleteVisible],onChange:lB(P.kStartpageSpeedDialDeleteVisible),__source:{fileName:aB,lineNumber:129,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:132,columnNumber:17}},(0,ue.Z)("Show Delete Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:135,columnNumber:13}},s.createElement("label",{__source:{fileName:aB,lineNumber:136,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialControlsVisible],onChange:lB(P.kStartpageSpeedDialControlsVisible),__source:{fileName:aB,lineNumber:137,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:140,columnNumber:17}},(0,ue.Z)("Show Thumbnail Control Buttons")))),s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:143,columnNumber:13}},s.createElement("label",{__source:{fileName:aB,lineNumber:144,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialAddButtonVisible],onChange:lB(P.kStartpageSpeedDialAddButtonVisible),__source:{fileName:aB,lineNumber:145,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:148,columnNumber:17}},(0,ue.Z)("Show “Add” button"))),s.createElement("p",{className:"info",__source:{fileName:aB,lineNumber:150,columnNumber:15}},(0,ue.Z)("When disabled, new bookmarks can be added by double-clicking the Speed Dial background.")))),s.createElement("div",{className:"setting-group",__source:{fileName:aB,lineNumber:154,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:155,columnNumber:13}},s.createElement("h3",{__source:{fileName:aB,lineNumber:156,columnNumber:15}},(0,ue.Z)("Maximum Columns")),s.createElement("select",{className:"max-columns",value:t[P.kStartpageSpeedDialColumns],onChange:lB(P.kStartpageSpeedDialColumns),title:(0,ue.Z)("Maximum number of Speed Dial columns"),__source:{fileName:aB,lineNumber:157,columnNumber:15}},s.createElement("option",{value:1,__source:{fileName:aB,lineNumber:161,columnNumber:17}},"1"),s.createElement("option",{value:2,__source:{fileName:aB,lineNumber:162,columnNumber:17}},"2"),s.createElement("option",{value:3,__source:{fileName:aB,lineNumber:163,columnNumber:17}},"3"),s.createElement("option",{value:4,__source:{fileName:aB,lineNumber:164,columnNumber:17}},"4"),s.createElement("option",{value:5,__source:{fileName:aB,lineNumber:165,columnNumber:17}},"5"),s.createElement("option",{value:6,__source:{fileName:aB,lineNumber:166,columnNumber:17}},"6"),s.createElement("option",{value:7,__source:{fileName:aB,lineNumber:167,columnNumber:17}},"7"),s.createElement("option",{value:8,__source:{fileName:aB,lineNumber:168,columnNumber:17}},"8"),s.createElement("option",{value:10,__source:{fileName:aB,lineNumber:169,columnNumber:17}},"10"),s.createElement("option",{value:12,__source:{fileName:aB,lineNumber:170,columnNumber:17}},"12"),s.createElement("option",{value:99,__source:{fileName:aB,lineNumber:172,columnNumber:17}},(0,ue.Z)("Unlimited")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:aB,lineNumber:176,columnNumber:13}},s.createElement("h3",{__source:{fileName:aB,lineNumber:177,columnNumber:15}},(0,ue.Z)("Speed Dial Thumbnail Size")),s.createElement("select",{className:"max-columns",value:t[P.kStartpageSpeedDialWidth],onChange:lB(P.kStartpageSpeedDialWidth),__source:{fileName:aB,lineNumber:178,columnNumber:15}},s.createElement("option",{value:120,__source:{fileName:aB,lineNumber:181,columnNumber:17}},(0,ue.Z)("Tiny")),s.createElement("option",{value:170,__source:{fileName:aB,lineNumber:182,columnNumber:17}},(0,ue.Z)("other","Small")),s.createElement("option",{value:220,__source:{fileName:aB,lineNumber:183,columnNumber:17}},(0,ue.Z)("other","Default")),s.createElement("option",{value:270,__source:{fileName:aB,lineNumber:184,columnNumber:17}},(0,ue.Z)("other","Large")),s.createElement("option",{value:320,__source:{fileName:aB,lineNumber:185,columnNumber:17}},(0,ue.Z)("Huge")),s.createElement("option",{value:-1,__source:{fileName:aB,lineNumber:187,columnNumber:17}},(0,ue.Z)("Scale to Fit Columns")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:aB,lineNumber:191,columnNumber:13}},s.createElement("label",{__source:{fileName:aB,lineNumber:192,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialAllowDnd],onChange:lB(P.kStartpageSpeedDialAllowDnd),__source:{fileName:aB,lineNumber:193,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:196,columnNumber:17}},(0,ue.Z)("Allow Drag and Drop Reordering"))))),s.createElement("div",{className:"setting-group",__source:{fileName:aB,lineNumber:201,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:aB,lineNumber:202,columnNumber:13}},s.createElement("h3",{__source:{fileName:aB,lineNumber:203,columnNumber:15}},(0,ue.Z)("Vivaldia, the Vivaldi Game")),s.createElement("label",{__source:{fileName:aB,lineNumber:204,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:t[P.kStartpageSpeedDialGameButtonShow],onChange:lB(P.kStartpageSpeedDialGameButtonShow),__source:{fileName:aB,lineNumber:205,columnNumber:17}}),s.createElement("span",{__source:{fileName:aB,lineNumber:208,columnNumber:17}},(0,ue.Z)("Show on Speed Dial")))))))}}const uB=(0,bi.Z)(cB,oB);var mB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\CloseWindowConfirmation.jsx";const dB=st.Z.getEventHandler,hB=[P.kWindowsShowWindowCloseConfirmationDialog];class pB extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:mB,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:mB,lineNumber:27,columnNumber:9}},s.createElement("h3",{__source:{fileName:mB,lineNumber:28,columnNumber:11}},(0,ue.Z)("Close Window Confirmation")),s.createElement("div",{className:"setting-single",__source:{fileName:mB,lineNumber:29,columnNumber:11}},s.createElement("label",{__source:{fileName:mB,lineNumber:30,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWindowsShowWindowCloseConfirmationDialog],onChange:dB(P.kWindowsShowWindowCloseConfirmationDialog),__source:{fileName:mB,lineNumber:31,columnNumber:15}}),s.createElement("span",{__source:{fileName:mB,lineNumber:36,columnNumber:15}},(0,ue.Z)("Show Close Window Confirmation Dialog"))))))}}const gB=(0,bi.Z)(pB,hB);var bB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\ExitConfirmation.jsx";const NB=st.Z.getEventHandler,fB=[P.kSystemShowExitConfirmationDialog];class _B extends s.Component{renderMacQuitConfirmation(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:bB,lineNumber:32,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:bB,lineNumber:33,columnNumber:11}},s.createElement("h3",{__source:{fileName:bB,lineNumber:34,columnNumber:13}},(0,ue.Z)("Quit Confirmation")),s.createElement("div",{className:"setting-single",__source:{fileName:bB,lineNumber:35,columnNumber:13}},s.createElement("label",{__source:{fileName:bB,lineNumber:36,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kConfirmToQuitEnabled],onChange:NB(P.kConfirmToQuitEnabled),__source:{fileName:bB,lineNumber:37,columnNumber:17}}),s.createElement("span",{__source:{fileName:bB,lineNumber:42,columnNumber:17}},(0,ue.Z)("Show Quit Confirmation Dialog"))))))}renderExitConfirmation(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:bB,lineNumber:52,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:bB,lineNumber:53,columnNumber:9}},s.createElement("h3",{__source:{fileName:bB,lineNumber:54,columnNumber:11}},(0,ue.Z)("Exit Confirmation")),s.createElement("div",{className:"setting-single",__source:{fileName:bB,lineNumber:55,columnNumber:11}},s.createElement("label",{__source:{fileName:bB,lineNumber:56,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kSystemShowExitConfirmationDialog],onChange:NB(P.kSystemShowExitConfirmationDialog),__source:{fileName:bB,lineNumber:57,columnNumber:15}}),s.createElement("span",{__source:{fileName:bB,lineNumber:62,columnNumber:15}},(0,ue.Z)("Show Exit Confirmation Dialog"))))))}render(){return this.renderExitConfirmation()}}const vB=(0,bi.Z)(_B,fB);var EB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\HomePageSetting.jsx";function CB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wB="about:blank",yB=[P.kHomepage,P.kHomepageCache];class SB extends s.Component{constructor(...e){super(...e),CB(this,"state",{customHomepage:this.props.prefValues[P.kHomepageCache]}),CB(this,"saveHomePage",(({currentTarget:e})=>{this.setState({customHomepage:e.value});const t=""!==e.value?(0,As.Rz)(e.value):e.value;st.Z.set(P.kHomepage,t||wB),t!==Q.QG&&st.Z.set(P.kHomepageCache,t)}))}render(){const e=(this.props.prefValues[P.kHomepage]===wB?"":this.props.prefValues[P.kHomepage])===Q.QG;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:EB,lineNumber:60,columnNumber:7}},s.createElement("div",{className:"setting-group homepage",__source:{fileName:EB,lineNumber:61,columnNumber:9}},s.createElement("h3",{__source:{fileName:EB,lineNumber:62,columnNumber:11}},(0,ue.Z)("noun","Homepage")),s.createElement("div",{className:"setting-single",__source:{fileName:EB,lineNumber:64,columnNumber:11}},s.createElement("label",{__source:{fileName:EB,lineNumber:65,columnNumber:13}},s.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:e,value:Q.QG,__source:{fileName:EB,lineNumber:66,columnNumber:15}}),s.createElement("span",{__source:{fileName:EB,lineNumber:72,columnNumber:15}},(0,ue.Z)("other","Start Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:EB,lineNumber:76,columnNumber:11}},s.createElement("label",{__source:{fileName:EB,lineNumber:77,columnNumber:13}},s.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:!e,value:this.props.prefValues[P.kHomepageCache],__source:{fileName:EB,lineNumber:78,columnNumber:15}}),s.createElement("span",{__source:{fileName:EB,lineNumber:84,columnNumber:15}},(0,ue.Z)("Specific Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:EB,lineNumber:88,columnNumber:11}},s.createElement("input",{type:"text",placeholder:(0,ue.Z)("Address"),disabled:e,onChange:this.saveHomePage,value:this.state.customHomepage,__source:{fileName:EB,lineNumber:89,columnNumber:13}}))))}}const TB=(0,bi.Z)(SB,yB);var kB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSessionItem.jsx";class IB extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{var t=this.props.urlItem;t.url=e.target.value,this.props.onSave(t)},(n="handleUrlChange")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:kB,lineNumber:24,columnNumber:7}},s.createElement("div",{className:"setting-single",__source:{fileName:kB,lineNumber:25,columnNumber:9}},s.createElement("input",{className:"edit",type:"text",value:this.props.urlItem.url,onChange:this.handleUrlChange,__source:{fileName:kB,lineNumber:26,columnNumber:11}}),s.createElement("input",{type:"button",tabIndex:"-1",className:"circular clearkey",onClick:this.props.onDelete,title:(0,ue.Z)("Remove page"),__source:{fileName:kB,lineNumber:29,columnNumber:11}})))}}const AB=IB;var ZB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSession.jsx";function PB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class DB extends s.Component{constructor(...e){super(...e),PB(this,"state",{STARTUP_SESSION_URLS:[],hasUrlInInput:!1}),PB(this,"handleInputChange",(e=>{if(e.target.value.length>2?this.setState({hasUrlInInput:!0}):this.setState({hasUrlInInput:!1}),e.keyCode===$s.Z.KEY_ESCAPE)e.target.value="",this.setState({hasUrlInInput:!1});else{if(e.keyCode!==$s.Z.KEY_RETURN&&e.keyCode!==$s.Z.KEY_ENTER)return;e.target.value.length>2&&this.addUrl()}})),PB(this,"saveChanges",(()=>{for(var e=[],t=this.state.STARTUP_SESSION_URLS,n=0;n<t.length;n++)e.push(t[n].url);st.Z.set(P.kURLsToRestoreOnStartup,e)})),PB(this,"addUrl",(()=>{var e=this.refs.createUrlField.value.trim();-1===e.indexOf("://")&&(e="http://"+e),this.refs.createUrlField.value="",this.setState({hasUrlInInput:!1});var t=0;this.state.STARTUP_SESSION_URLS.length>0&&(t=Math.max.apply(Math,this.state.STARTUP_SESSION_URLS.map((e=>e.id?e.id:0)))),this.state.STARTUP_SESSION_URLS.push({url:e,id:t+1}),this.saveChanges()})),PB(this,"save",(e=>{this.setState((t=>{for(var n=t.STARTUP_SESSION_URLS,s=0;s<n.length;s++)if(n[s].id===e.id){var i=e.url;-1===i.indexOf(":")&&(i="http://"+i),n[s].url=i;break}return{STARTUP_SESSION_URLS:n}}),(()=>{this.saveChanges()}))})),PB(this,"deleteUrl",(e=>{this.setState((t=>{for(var n=t.STARTUP_SESSION_URLS,s=0;s<n.length;s++)if(n[s].url===e.url){n.splice(s,1);break}return{STARTUP_SESSION_URLS:n}}),(()=>{this.saveChanges()}))})),PB(this,"useCurrentPages",(()=>{h.Z.tabs.query({windowType:"normal"},(e=>{const t=e.filter((e=>!Pt.jk.isInternalPage(e))).map(((e,t)=>({id:t+1,url:e.url||""})));this.setState({STARTUP_SESSION_URLS:t}),this.saveChanges()}))}))}UNSAFE_componentWillMount(){var e=A.ZP.get(P.kURLsToRestoreOnStartup).map(((e,t)=>({url:e,id:t})));this.setState({STARTUP_SESSION_URLS:e})}render(){var e=this.state.STARTUP_SESSION_URLS.map((e=>s.createElement(AB,{urlItem:e,key:e.id,onDelete:this.deleteUrl.bind(this,e),onSave:this.save,filter:this.props.filter,__source:{fileName:ZB,lineNumber:154,columnNumber:9}})));return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:ZB,lineNumber:164,columnNumber:7}},s.createElement("div",{className:"setting-group setting-startup-specific-pages",__source:{fileName:ZB,lineNumber:165,columnNumber:9}},s.createElement("h3",{__source:{fileName:ZB,lineNumber:166,columnNumber:11}},(0,ue.Z)("Startup Pages")),e,s.createElement("div",{className:"setting-flexgroup",__source:{fileName:ZB,lineNumber:169,columnNumber:11}},s.createElement("input",{type:"text",className:"setting-single-flex",ref:"createUrlField",value:this.props.url,onChange:this.handleInputChange,placeholder:(0,ue.Z)("Enter page URL"),__source:{fileName:ZB,lineNumber:170,columnNumber:13}}),s.createElement("input",{type:"button",className:"setting-single-noflex",onClick:this.addUrl,disabled:!this.state.hasUrlInInput,value:(0,ue.Z)("Add"),__source:{fileName:ZB,lineNumber:177,columnNumber:13}})),s.createElement("input",{type:"button",onClick:this.useCurrentPages,value:(0,ue.Z)("Use Current Pages"),__source:{fileName:ZB,lineNumber:184,columnNumber:11}})))}}const MB=DB;var OB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettings.jsx";function xB(){return xB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xB.apply(this,arguments)}function LB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const RB=[P.kTabsAlwaysLoadPinnedAfterRestore,P.kTabsDeferLoadingAfterRestore],BB=st.Z.getEventHandler;class FB extends s.PureComponent{constructor(...e){super(...e),LB(this,"_isMounted",!1),LB(this,"state",{STARTUP_OPTIONS:"last"}),LB(this,"saveStartup",(e=>{const t=e.target.value,n=A.ZP.get(P.kURLsToRestoreOnStartup);b.Z.utilities.setStartupAction(t,n,(e=>{this.setState({STARTUP_OPTIONS:e})}))}))}componentDidMount(){this._isMounted=!0,b.Z.utilities.getStartupAction((e=>{this._isMounted&&this.setState({STARTUP_OPTIONS:e})}))}componentWillUnmount(){this._isMounted=!1}render(){const e="urls"===this.state.STARTUP_OPTIONS?s.createElement(MB,xB({},this.props,{__source:{fileName:OB,lineNumber:68,columnNumber:7}})):null;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:OB,lineNumber:71,columnNumber:7}},s.createElement("span",{__source:{fileName:OB,lineNumber:72,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:OB,lineNumber:73,columnNumber:11}},s.createElement("h3",{__source:{fileName:OB,lineNumber:74,columnNumber:13}},(0,ue.Z)("Startup with")),s.createElement(_i,{name:"startupSettings",value:this.state.STARTUP_OPTIONS,onChange:this.saveStartup,__source:{fileName:OB,lineNumber:76,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:OB,lineNumber:79,columnNumber:15}},s.createElement("label",{__source:{fileName:OB,lineNumber:80,columnNumber:17}},s.createElement("input",{type:"radio",value:"last",__source:{fileName:OB,lineNumber:81,columnNumber:19}}),s.createElement("span",{__source:{fileName:OB,lineNumber:82,columnNumber:19}},(0,ue.Z)("Last Session")))),s.createElement("div",{className:"setting-single",__source:{fileName:OB,lineNumber:85,columnNumber:15}},s.createElement("label",{__source:{fileName:OB,lineNumber:86,columnNumber:17}},s.createElement("input",{type:"radio",value:"homepage",__source:{fileName:OB,lineNumber:87,columnNumber:19}}),s.createElement("span",{__source:{fileName:OB,lineNumber:88,columnNumber:19}},(0,ue.Z)("radio","Homepage")))),s.createElement("div",{className:"setting-single",__source:{fileName:OB,lineNumber:91,columnNumber:15}},s.createElement("label",{__source:{fileName:OB,lineNumber:92,columnNumber:17}},s.createElement("input",{type:"radio",value:"speeddial",__source:{fileName:OB,lineNumber:93,columnNumber:19}}),s.createElement("span",{__source:{fileName:OB,lineNumber:94,columnNumber:19}},(0,ue.Z)("radio","Start Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:OB,lineNumber:97,columnNumber:15}},s.createElement("label",{__source:{fileName:OB,lineNumber:98,columnNumber:17}},s.createElement("input",{type:"radio",value:"urls",__source:{fileName:OB,lineNumber:99,columnNumber:19}}),s.createElement("span",{__source:{fileName:OB,lineNumber:100,columnNumber:19}},(0,ue.Z)("Specific Pages"))))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:OB,lineNumber:106,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Wait to load restored session content until tab is activated."),__source:{fileName:OB,lineNumber:107,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsDeferLoadingAfterRestore],onChange:BB(P.kTabsDeferLoadingAfterRestore),__source:{fileName:OB,lineNumber:109,columnNumber:17}}),s.createElement("span",{__source:{fileName:OB,lineNumber:113,columnNumber:17}},(0,ue.Z)("Lazy Load Restored Tabs")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:OB,lineNumber:117,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Load pinned tabs before they are activated."),__source:{fileName:OB,lineNumber:118,columnNumber:15}},s.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[P.kTabsDeferLoadingAfterRestore],checked:this.props.prefValues[P.kTabsAlwaysLoadPinnedAfterRestore],onChange:BB(P.kTabsAlwaysLoadPinnedAfterRestore),__source:{fileName:OB,lineNumber:120,columnNumber:17}}),s.createElement("span",{__source:{fileName:OB,lineNumber:127,columnNumber:17}},(0,ue.Z)("Always Load Pinned Tabs"))))),e))}}const UB=(0,bi.Z)(FB,RB);var VB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupWelcome.jsx";const HB=[P.kWelcomeReadPages,P.kWelcomeSeenPages];class WB extends s.Component{constructor(...e){var t,n,s;super(...e),s=()=>{st.Z.set(P.kWelcomeReadPages,[]),st.Z.set(P.kWelcomeSeenPages,[])},(n="resetSeen")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=this.props.prefValues[P.kWelcomeReadPages].length>0,t=this.props.prefValues[P.kWelcomeSeenPages].length>0;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:VB,lineNumber:36,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:VB,lineNumber:37,columnNumber:9}},s.createElement("h3",{__source:{fileName:VB,lineNumber:38,columnNumber:11}},(0,ue.Z)("Welcome Page")),s.createElement("div",{className:"setting-single",__source:{fileName:VB,lineNumber:40,columnNumber:11}},s.createElement("label",{__source:{fileName:VB,lineNumber:41,columnNumber:13}},s.createElement("input",{type:"button",disabled:e+t===0,value:(0,ue.Z)("Reset Welcome Page"),onClick:this.resetSeen,__source:{fileName:VB,lineNumber:42,columnNumber:15}})))))}}(0,bi.Z)(WB,HB);var zB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultSettings.jsx";function GB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const KB=[P.kStartupCheckIsDefault],jB=st.Z.getEventHandler;class YB extends s.Component{constructor(...e){super(...e),GB(this,"_isMounted",!1),GB(this,"state",{isVivaldiDefault:!0}),GB(this,"getDefaultBrowserValue",(()=>{b.Z.utilities.isVivaldiDefaultBrowser((e=>{this._isMounted&&this.setState({isVivaldiDefault:!0===e})}))})),GB(this,"setVivaldiDefault",(()=>{b.Z.utilities.setVivaldiAsDefaultBrowser((e=>{this._isMounted&&this.setState({isVivaldiDefault:!0===e})})),this.props.onClose&&this.props.onClose()})),GB(this,"renderCheckbox",(()=>s.createElement("label",{title:(0,ue.Z)("Check if Vivaldi is your default browser upon every startup"),__source:{fileName:zB,lineNumber:71,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kStartupCheckIsDefault],onChange:jB(P.kStartupCheckIsDefault),__source:{fileName:zB,lineNumber:73,columnNumber:9}}),s.createElement("span",{__source:{fileName:zB,lineNumber:76,columnNumber:9}},(0,ue.Z)("Check on Startup")))))}componentDidMount(){this.getDefaultBrowserValue(),this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return this.props.onClose?s.createElement("form",{onSubmit:this.setVivaldiDefault,className:"SuggestDefault",__source:{fileName:zB,lineNumber:84,columnNumber:9}},s.createElement("span",{__source:{fileName:zB,lineNumber:85,columnNumber:11}},(0,ue.Z)("Enjoying Vivaldi? Make it your default browser.")),s.createElement("input",{type:"submit",value:(0,ue.Z)("browser","Set as Default Browser"),__source:{fileName:zB,lineNumber:86,columnNumber:11}}),this.renderCheckbox(),s.createElement("button",{type:"button",className:"SuggestDefault-Close",dangerouslySetInnerHTML:{__html:cn.vyJ},onClick:this.props.onClose,__source:{fileName:zB,lineNumber:88,columnNumber:11}})):s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:zB,lineNumber:99,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:zB,lineNumber:100,columnNumber:9}},!this.props.onClose&&s.createElement("h3",{__source:{fileName:zB,lineNumber:102,columnNumber:13}},(0,ue.Z)("Default Browser")),s.createElement("div",{className:"setting-single",__source:{fileName:zB,lineNumber:104,columnNumber:11}},this.state.isVivaldiDefault?s.createElement("p",{__source:{fileName:zB,lineNumber:112,columnNumber:17}},(0,ue.Z)("Vivaldi is set as your default browser.")):s.createElement("div",{__source:{fileName:zB,lineNumber:106,columnNumber:15}},s.createElement("p",{__source:{fileName:zB,lineNumber:107,columnNumber:17}},(0,ue.Z)("Vivaldi isn’t your default browser.")),s.createElement("input",{type:"button",onClick:this.setVivaldiDefault,value:(0,ue.Z)("browser","Set as Default"),__source:{fileName:zB,lineNumber:108,columnNumber:17}}))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:zB,lineNumber:115,columnNumber:11}},this.renderCheckbox())))}}const $B=(0,bi.Z)(YB,KB);var XB="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettingsSection.jsx";function QB(){return QB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},QB.apply(this,arguments)}class qB extends s.Component{render(){return s.createElement(s.Fragment,null,s.createElement(Cc,{categoryTitle:(0,ue.Z)("Startup"),filter:this.props.filter,__source:{fileName:XB,lineNumber:19,columnNumber:7}},s.createElement($B,QB({},this.props,{__source:{fileName:XB,lineNumber:22,columnNumber:9}})),s.createElement(TB,QB({},this.props,{__source:{fileName:XB,lineNumber:23,columnNumber:9}})),s.createElement(UB,QB({},this.props,{__source:{fileName:XB,lineNumber:24,columnNumber:9}})),!1),s.createElement(Cc,{key:"2",categoryTitle:(0,ue.Z)("title","Close and Exit"),filter:this.props.filter,__source:{fileName:XB,lineNumber:27,columnNumber:7}},s.createElement(vB,QB({},this.props,{__source:{fileName:XB,lineNumber:33,columnNumber:9}})),s.createElement(gB,QB({},this.props,{__source:{fileName:XB,lineNumber:35,columnNumber:11}}))))}}const JB=qB;function eF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tF extends s.PureComponent{constructor(...e){super(...e),eF(this,"state",{remaining:g().duration({})}),eF(this,"componentDidMount",(()=>{this.nextTick()})),eF(this,"componentWillUnmount",(()=>{clearTimeout(this.timer)})),eF(this,"nextTick",(()=>{this.timer=setTimeout(this.nextTick,1e3),this.props.end.isAfter(g()())?(this.setState({remaining:g().duration(this.props.end.diff(g()()))}),this.props.onElapsed(!1)):(this.setState({remaining:g().duration(this.props.end.diff(g()()))}),this.props.onElapsed(!0))}))}render(){const e=this.state.remaining;return s.createElement("span",{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Countdown.jsx",lineNumber:46,columnNumber:13}},(0,ue.Z)(this.props.label,[e.minutes().toString().padStart(2,"0")+":"+e.seconds().toString().padStart(2,"0")]))}}const nF=tF;function sF(e){m.Z.dispatch({actionType:Fi.Z.VIVALDI_ACCOUNT_STATE_UPDATED,state:e})}const iF=new class{login(e,t,n){b.Z.vivaldiAccount.login(e,t,n),b.Z.sync.start()}logout(){b.Z.sync.stop(),b.Z.vivaldiAccount.logout()}loadPromise(){return-1!==W.ZP.getId()&&W.ZP.isIncognitoOrGuest()?Promise.resolve():new Promise((e=>b.Z.vivaldiAccount.getState((t=>{sF(t),b.Z.vivaldiAccount.onAccountStateChanged.addListener(sF),e()}))))}},rF=iF;var aF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\LoggedInUserSection.jsx";function oF(){$.Z.openURL("https://login.vivaldi.net/profile/samlsso")}function lF(){rF.logout()}function cF({deviceName:e,pictureUrl:t,username:n,isLoggedIn:i}){return s.createElement("div",{className:"sync-status",__source:{fileName:aF,lineNumber:33,columnNumber:5}},s.createElement("div",{className:"avatar-username",__source:{fileName:aF,lineNumber:34,columnNumber:7}},s.createElement("img",{src:t||"/resources/default-avatar.png",className:"profile-picture",title:(0,ue.Z)("View account profile page"),onClick:oF,alt:"",__source:{fileName:aF,lineNumber:35,columnNumber:9}}),s.createElement("div",{className:"user-info",__source:{fileName:aF,lineNumber:41,columnNumber:9}},s.createElement("strong",{className:"username",onClick:oF,__source:{fileName:aF,lineNumber:42,columnNumber:11}},n),s.createElement("span",{className:"info",__source:{fileName:aF,lineNumber:45,columnNumber:11}},e&&" "+(0,ue.Z)("on $1",[e])))),i&&s.createElement("input",{type:"button",value:(0,ue.Z)("Log Out"),onClick:lF,__source:{fileName:aF,lineNumber:50,columnNumber:23}}))}var uF=n(34155),mF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\PasswordInput.jsx";function dF(){return dF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dF.apply(this,arguments)}function hF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pF extends s.PureComponent{constructor(...e){super(...e),hF(this,"_refInput",s.createRef()),hF(this,"state",{type:"password"}),hF(this,"toggleVisibility",(()=>{const e={start:this._refInput.current?.selectionStart||0,end:this._refInput.current?.selectionEnd||0};this.setState((e=>({type:"text"===e.type?"password":"text"}))),uF.nextTick((()=>{this._refInput.current&&(this._refInput.current.selectionStart=e.start,this._refInput.current.selectionEnd=e.end)}))}))}render(){const{hideButton:e,...t}=this.props;return s.createElement("span",{className:"PasswordInputWrapper",__source:{fileName:mF,lineNumber:38,columnNumber:12}},s.createElement("input",dF({},t,{ref:this._refInput,type:this.state.type,className:"PasswordInput",__source:{fileName:mF,lineNumber:39,columnNumber:7}})),!e&&s.createElement("button",{type:"button",title:"password"===this.state.type?(0,ue.Z)("title","Show password"):(0,ue.Z)("Hide password"),onClick:this.toggleVisibility,className:"PasswordToggle",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn.sgm},__source:{fileName:mF,lineNumber:46,columnNumber:9}}))}}var gF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountLogin.jsx";function bF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const NF="•••••••",fF=st.Z.getEventHandler,_F="17006";class vF extends s.PureComponent{constructor(e){super(e),bF(this,"onCountDownElapsed",(e=>{this.setState({countdownElapsed:e})})),bF(this,"onUsernameChange",(e=>{this.setState({username:e.target.value})})),bF(this,"onPasswordChange",(e=>{this.setState({password:e.target.value})})),bF(this,"onSavePasswordChange",(e=>{this.setState({savePassword:e.target.checked})})),bF(this,"onRecoverAccount",(()=>{$.Z.openURL("https://login.vivaldi.net/profile/id/recoverAccount",{inCurrent:!1})})),bF(this,"onPasswordReset",(()=>{$.Z.openURL("https://login.vivaldi.net/profile/id/userInfoView",{inCurrent:!1})})),bF(this,"onLogin",(()=>{this.state.username&&this.state.password&&rF.login(this.state.username,this.state.password===NF?"":this.state.password,this.state.savePassword)})),bF(this,"onLogout",(()=>{rF.logout()})),bF(this,"onRegister",(()=>{this.props.onChangeDisplay()})),bF(this,"renderForm",(e=>{const t=""!==this.props.accountState.accountInfo.accountId,n=this.props.accountState.hasSavedPassword&&this.props.accountState.accountInfo.username===this.state.username,i=n&&this.state.password===NF;return s.createElement("form",{onSubmit:this.onLogin,noValidate:!0,__source:{fileName:gF,lineNumber:130,columnNumber:7}},s.createElement("h1",{__source:{fileName:gF,lineNumber:131,columnNumber:9}},(0,ue.Z)("Log in to Your Account")),s.createElement("p",{__source:{fileName:gF,lineNumber:132,columnNumber:9}},(0,ue.Z)("To begin with data synchronization, a confirmed Vivaldi account is required. New to Vivaldi?")," ",s.createElement(gc,{onClick:this.onRegister,__source:{fileName:gF,lineNumber:135,columnNumber:11}},(0,ue.Z)("Create an Account."))),s.createElement("div",{className:"AccountSheet-Form",__source:{fileName:gF,lineNumber:140,columnNumber:9}},s.createElement("label",{__source:{fileName:gF,lineNumber:141,columnNumber:11}},(0,ue.Z)("Username"),s.createElement("input",{type:"text",value:this.state.username,disabled:t,onChange:this.onUsernameChange,autoFocus:this.props.autoFocus,__source:{fileName:gF,lineNumber:143,columnNumber:13}})),!i&&s.createElement(gc,{onClick:this.onRecoverAccount,__source:{fileName:gF,lineNumber:153,columnNumber:13}},(0,ue.Z)("Forgot Username?")),s.createElement("label",{__source:{fileName:gF,lineNumber:158,columnNumber:11}},(0,ue.Z)("Password"),s.createElement(pF,{value:this.state.password,onChange:this.onPasswordChange,hideButton:i,__source:{fileName:gF,lineNumber:160,columnNumber:13}})),!n&&s.createElement(gc,{onClick:this.onPasswordReset,__source:{fileName:gF,lineNumber:168,columnNumber:13}},(0,ue.Z)("Forgot Password?")),s.createElement("label",{className:"AccountSheet-Password",__source:{fileName:gF,lineNumber:173,columnNumber:11}},s.createElement("input",{type:"checkbox",disabled:i,checked:this.state.savePassword||i,onChange:this.onSavePasswordChange,__source:{fileName:gF,lineNumber:174,columnNumber:13}}),(0,ue.Z)("Save Password")),s.createElement("label",{__source:{fileName:gF,lineNumber:182,columnNumber:11}},(0,ue.Z)("Device Name"),s.createElement("input",{type:"text",defaultValue:this.props.customSessionName,placeholder:this.props.defaultSessionName,onChange:fF(P.kSyncSessionName),__source:{fileName:gF,lineNumber:184,columnNumber:13}}))),e&&s.createElement(Qc,{type:"error",__source:{fileName:gF,lineNumber:193,columnNumber:11}},e),s.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:gF,lineNumber:196,columnNumber:9}},t&&s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this.onLogout,__source:{fileName:gF,lineNumber:198,columnNumber:13}}),s.createElement("input",{type:"submit",value:(0,ue.Z)("Login"),__source:{fileName:gF,lineNumber:202,columnNumber:11}})))})),this.state={username:e.accountState.accountInfo.username,password:e.accountState.hasSavedPassword?NF:"",sessionName:"",savePassword:!1,countdownElapsed:!1}}render(){if(W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId))return null;const{accountState:e,defaultSessionName:t}=this.props,n=e.accountInfo.username,i=e.lastTokenFetchError.serverMessage,r=e.lastTokenFetchError.errorCode,a=g()(e.nextTokenRequestTime),o=A.ZP.get(P.kSyncSessionName)||t;let l=null;switch(Rh(e)){case"loggedIn":return s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:gF,lineNumber:226,columnNumber:11}},(0,ue.Z)("Connected")),s.createElement("p",{__source:{fileName:gF,lineNumber:227,columnNumber:11}},(0,ue.Z)("Vivaldi account is active and connected.")),s.createElement(cF,{deviceName:o,pictureUrl:e.accountInfo.pictureUrl,username:n,isLoggedIn:!0,__source:{fileName:gF,lineNumber:228,columnNumber:11}}));case"loginFailed":if(i){if(e.lastTokenFetchError.serverMessage.startsWith(_F))break;l=function(e){const t=parseInt(e.substring(0,5));switch(t){case 17001:return(0,ue.Z)("$1 Account doesn’t exist.",[t]);case 17002:return(0,ue.Z)("$1 Invalid credentials are provided.",[t]);case 17003:return(0,ue.Z)("$1 Account is locked after multiple incorrect login attempts, please wait 5 minutes.",[t]);case 17004:return(0,ue.Z)("$1 Account is disabled.",[t]);case 17005:return(0,ue.Z)("$1 Account has been temporarily locked as a result of multiple unsuccessful login attempts. Please wait 5 minutes before trying again.",[t]);case 17006:return(0,ue.Z)("$1 Account hasn’t been activated yet. Please check your email to finish the registration process.",[t]);default:return e}}(i)}else l=-1===r?(0,ue.Z)("You must use a vivaldi.net user account to log in."):(0,ue.Z)("Vivaldi.net rejected your credentials: Error code $1",[r]);break;case"loggingIn":return a.isAfter(g()())&&("network_error"===e.lastTokenFetchError.errorType&&(l=(0,ue.Z)("Unable to connect to vivaldi.net: $1 ($2)",[i,r])),"server_error"===e.lastTokenFetchError.errorType&&(l=i?(0,ue.Z)("Vivaldi.net is experiencing issues: $1 ($2)",[i,r]):(0,ue.Z)("Vivaldi.net is experiencing issues: Error code $1",[r]))),s.createElement(s.Fragment,null,s.createElement("div",{className:"AccountSheet-Form",__source:{fileName:gF,lineNumber:274,columnNumber:13}},s.createElement("p",{className:l?null:"in-progress",__source:{fileName:gF,lineNumber:275,columnNumber:15}},(0,ue.Z)("Logging in to Vivaldi.net as $1.",[n]),!l&&" "+(0,ue.Z)("Please wait."))),l&&s.createElement(Qc,{type:"error",__source:{fileName:gF,lineNumber:281,columnNumber:15}},l," ",s.createElement(nF,{label:"Retrying in $1",end:a,onElapsed:this.onCountDownElapsed,__source:{fileName:gF,lineNumber:284,columnNumber:17}})),s.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:gF,lineNumber:290,columnNumber:13}},s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:this.onLogout,__source:{fileName:gF,lineNumber:291,columnNumber:15}})));case"credentialsMissing":l=e.hasEncryptedToken?(0,ue.Z)("Failed to decrypt your credentials. Please log in again."):(0,ue.Z)("Failed to retreive your credentials. Please log in again.")}return this.renderForm(l)}}bF(vF,"contextType",Vs.Z);const EF=vF;var CF=n(34155),wF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountSignup.jsx";function yF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const SF="[a-zA-Z0-9]{3,30}",TF=".+@[^\\.]+?\\.\\w[\\w\\.]+?",kF=h.Z.i18n.getUILanguage().replace("-","_"),IF=st.Z.getEventHandler;let AF=new AbortController;const ZF=()=>AF.abort();function PF(e,t){ZF();const n=new Promise(((n,s)=>{AF=new AbortController,fetch(e,{method:"POST",body:JSON.stringify(t),signal:AF.signal,headers:{"Content-Type":"application/json"}}).then((e=>{e.ok||s(e.text()),n(e.json())}))})),s=new Promise(((e,t)=>{const n=setTimeout((()=>{clearTimeout(n),t({status:0,statusText:"Error: Connection timed out [9010]"})}),6e4)}));return Promise.race([n,s])}class DF extends s.PureComponent{constructor(e){super(e),yF(this,"_refEmailField",s.createRef()),yF(this,"_refConfirmEmailField",s.createRef()),yF(this,"_refUsernameField",s.createRef()),yF(this,"_refAgeField",s.createRef()),yF(this,"_refPasswordField",s.createRef()),yF(this,"_refConfirmPasswordField",s.createRef()),yF(this,"_refVerifyAccountField",s.createRef()),yF(this,"getError",(e=>{switch(e){case 1001:case 1005:return{error:(0,ue.Z)("Please choose a username between 3 and 30 letters (a-z) and numbers (0-9) only."),step:1,field:"username"};case 1002:return{error:(0,ue.Z)("Please enter a valid email address."),step:1,field:"email"};case 1003:return{error:(0,ue.Z)("We require our members to be at least 16 years old to join."),step:1,field:"age"};case 1004:return{error:(0,ue.Z)("This email is already linked with another account."),step:1,field:"email"};case 1006:return{error:(0,ue.Z)("Please choose a password at least 12 characters long."),step:2,field:"password"};case 1007:return{error:(0,ue.Z)("Username “$1” already exists, please enter another one.",[this.state.username]),step:1,field:"username"};case 1008:return{error:(0,ue.Z)("Email is in wrong format."),step:1,field:"email"};case 1010:return{error:(0,ue.Z)("Please enter a realistic lifespan number."),step:1,field:"age"};case 2001:return{error:(0,ue.Z)("Username contains a reserved word."),step:1,field:"username"};case 2002:return{error:(0,ue.Z)("Email domain has been blacklisted."),step:1,field:"email"};case 2003:return{error:(0,ue.Z)("IP address has been blacklisted."),step:1,field:"username"};case 3001:return{error:(0,ue.Z)("Claims are missing."),step:1,field:"username"};case 4001:return{error:(0,ue.Z)("Code does not match."),step:3,field:"activationCode"};case 4002:return{error:(0,ue.Z)("The code has expired. Please request a new activation code."),step:3,field:"activationCode"};case 4004:return{error:(0,ue.Z)("The code has been invalidated. Please request a new activation code."),step:3,field:"activationCode"};case 5001:return{error:(0,ue.Z)("Failed to send account activation email."),step:3,field:"activationCode"};case 4003:case 5002:return{error:(0,ue.Z)("Account has been locked."),step:3,field:"activationCode"};case 9e3:return{error:(0,ue.Z)("Please fill in the required fields."),step:1,field:"username"};case 9001:return{error:(0,ue.Z)("Email addresses need to match."),step:1,field:"email"};case 9002:return{error:(0,ue.Z)("Passwords need to match."),step:2,field:"password"};case 9003:return{error:(0,ue.Z)("You need to agree to Terms and Conditions."),step:2,field:"password"};case 9004:return{error:(0,ue.Z)("Activation code should consist of $1 number.","Activation code should consist of $1 numbers.",[6]),step:3,field:"activationCode"};case 9010:return{error:(0,ue.Z)("Connection error"),step:1,field:"username"};case 9020:return{error:(0,ue.Z)("Please fill in the username"),step:1,field:"username"};case 9021:return{error:(0,ue.Z)("Please provide your age"),step:2,field:"age"};case 9022:return{error:(0,ue.Z)("Please provide your email"),step:1,field:"email"};case 9023:return{error:(0,ue.Z)("Please fill in the email confirmation"),step:1,field:"confirmEmail"};case 9024:return{error:(0,ue.Z)("Please provide your password"),step:3,field:"password"};case 9025:return{error:(0,ue.Z)("Please fill in the password confirmation"),step:2,field:"confirmPassword"};default:return{error:(0,ue.Z)("Unknown error"),step:1,field:"username"}}})),yF(this,"onRegister",(e=>{const t=e.currentTarget;t.password.checkValidity()&&t.confirmPassword.checkValidity()&&t.agreed.checkValidity()&&(this.setState({fetching:!0}),PF("https://login.vivaldi.net/profile/sync-registration",{username:this.state.username,emailaddress:this.state.email,password:this.state.password,age:this.state.age,lang:kF,disableNonce:!0,newsletter:this.state.agreedToNewsletter}).then((e=>{this.parseResponse(e)})).catch((e=>{console.warn("Registration request failed:",e.statusText),this.setState({fetching:!1,error:this.getError(9010).error})})))})),yF(this,"onCheckUserCredentials",(e=>{const t=e.currentTarget;t.username.checkValidity()&&t.age.checkValidity()&&t.email.checkValidity()&&t.confirmEmail.checkValidity()&&(this.setState({fetching:!0}),this.validateServerData("username").then((()=>this.validateServerData("email"))).then((()=>{this.goToStep(2),this.setState({fetching:!1})})).catch((e=>{console.warn("Account credentials validation failed",e.statusText),this.setState({fetching:!1})})))})),yF(this,"parseResponse",(e=>{if(e.error){const t=e.error,n=function(e){const t=e.match(/\[(\d+)\]/);return t?parseInt(t[1]):0}(t),{error:s,step:i,field:r}=this.getError(n);this.setState((r=>{let{activationCount:a}=r;return 0===n?{error:t,step:r.step,activationCount:a,fetching:!1}:(a=4001===n?e.attempts_remaining:0,{error:s,step:i,activationCount:a})})),CF.nextTick((()=>this.reportValidity(r,s)))}else e.success?.includes("Registration")?(this.goToStep(3),b.Z.vivaldiAccount.setPendingRegistration({username:this.state.username,recovery_email:this.state.email,password:this.state.savePassword?this.state.password:""})):e.success?.includes("Code has been sent")?this.setState({activationCount:-1}):e.success?.includes("verified")&&(this.resetActivation(),this.state.username&&this.state.password?rF.login(this.state.username,this.state.password,this.state.savePassword):(this.goToStep(1),this.props.onChangeDisplay()))})),yF(this,"validateServerData",(e=>PF("https://login.vivaldi.net/profile/validateField",{field:e,value:this.state[e]}).then((e=>{this.parseResponse(e)})).catch((t=>(console.warn("Field validation failed",t.statusText,e),this.setState({fetching:!1,error:this.getError(9010).error}),Promise.reject()))))),yF(this,"debouncedValidate",(0,za.Z)((e=>this.validateServerData(e).catch((()=>{}))),500)),yF(this,"reportValidity",((e,t)=>{let n=null;switch(e){case"age":n=this._refAgeField.current;break;case"username":n=this._refUsernameField.current;break;case"email":n=this._refEmailField.current;break;case"confirmEmail":n=this._refConfirmEmailField.current;break;case"password":n=this._refPasswordField.current?._refInput.current;break;case"confirmPassword":n=this._refConfirmPasswordField.current;break;case"activationCode":n=this._refVerifyAccountField.current}n&&(n.setCustomValidity(t),n.focus())})),yF(this,"onUsernameChange",(e=>{this.resetValidity(e);const t=e.target.value.trim();t.match(SF)&&this.debouncedValidate("username"),this.setState({username:t})})),yF(this,"onAgeChange",(e=>{this.resetValidity(e),this.setState({age:parseInt(e.target.value)})})),yF(this,"onEmailChange",(e=>{this.resetValidity(e),this._refConfirmEmailField.current?.setCustomValidity("");const t=e.target.value;this.setState({email:t}),t.match(TF)&&this.debouncedValidate("email")})),yF(this,"onPasswordChange",(e=>{this.resetValidity(e),this._refConfirmPasswordField?.current?.setCustomValidity(""),this.setState({password:e.target.value})})),yF(this,"onSavePasswordChange",(({target:e})=>{this.setState({savePassword:e.checked})})),yF(this,"agreeToTerms",(e=>{this.resetValidity(e),this.setState({agreedToTerms:e.target.checked})})),yF(this,"agreeToNewsletter",(({target:e})=>{this.setState({agreedToNewsletter:e.checked})})),yF(this,"onActivationCodeChange",(e=>{const{value:t}=e.target;this.resetValidity(e),this.setState({activationCode:t.trim().substring(0,6)})})),yF(this,"verifyAccount",(()=>{let{activationCode:e,username:t}=this.state;if(e=e.trim(),6!==e.length||null!==e.match(/[^\d]/)){const{error:e,field:t}=this.getError(9004);return this.reportValidity(t,e),void this.setState({fetching:!1,error:this.getError(9004).error,activationCount:0})}PF("https://login.vivaldi.net/profile/activation-code",{username:t,activation_code:e,lang:kF}).then((e=>{this.parseResponse(e)})).catch((e=>{console.warn("Code verification failed",e.statusText),this.setState({fetching:!1,error:this.getError(9010).error})}))})),yF(this,"sendVerificationCode",(()=>{this.setState({error:"",activationCode:""}),PF("https://login.vivaldi.net/profile/resend-activation-code",{username:this.state.username,lang:kF}).then((e=>{this.parseResponse(e)})).catch((e=>{console.warn("Verification code request failed",e.statusText),this.setState({fetching:!1,error:this.getError(9010).error})}))})),yF(this,"goToStep",(e=>this.setState({step:e,error:"",activationCount:0}))),yF(this,"openNewsletterPage",(()=>{$.Z.openURL("https://vivaldi.com/newsletter/",{inCurrent:!1})})),yF(this,"openPrivacyPage",(()=>{$.Z.openURL("https://vivaldi.com/privacy/",{inCurrent:!1})})),yF(this,"setValidity",(e=>{const{name:t,validity:n}=e.target;let s="";switch(!0){case n.rangeUnderflow&&"age"===t:s=this.getError(1003).error;break;case n.rangeOverflow&&"age"===t:s=this.getError(1010).error;break;case n.stepMismatch:case n.rangeUnderflow:case n.rangeOverflow:case n.typeMismatch:case n.patternMismatch:case n.badInput:case n.tooLong:case n.tooShort:"username"===t&&(s=this.getError(1001).error),"password"===t&&(s=this.getError(1006).error),"email"===t&&(s=this.getError(1002).error),"confirmEmail"===t&&(s=this.getError(9001).error),"confirmPassword"===t&&(s=this.getError(9002).error);break;case n.valueMissing:s=this.getError(9e3).error,"agreed"===t&&(s=this.getError(9003).error),"username"===t&&(s=this.getError(9020).error),"age"===t&&(s=this.getError(9021).error),"email"===t&&(s=this.getError(9022).error),"confirmEmail"===t&&(s=this.getError(9023).error),"password"===t&&(s=this.getError(9024).error),"confirmPassword"===t&&(s=this.getError(9025).error);break;case n.customError:s=e.target.validationMessage;case n.valid:}e.target.setCustomValidity(s),e.target.focus(),e.preventDefault(),this.setState({error:s})})),yF(this,"resetValidity",(e=>{e.target.setCustomValidity(""),this.setState({error:""})})),yF(this,"resetActivation",(()=>{b.Z.vivaldiAccount.setPendingRegistration()})),yF(this,"renderUserDetails",(()=>s.createElement("form",{onSubmit:this.onCheckUserCredentials,noValidate:!0,__source:{fileName:wF,lineNumber:753,columnNumber:7}},s.createElement("h1",{__source:{fileName:wF,lineNumber:757,columnNumber:9}},(0,ue.Z)("Create an Account")),s.createElement("p",{__source:{fileName:wF,lineNumber:758,columnNumber:9}},(0,ue.Z)("To start syncing data across devices, a confirmed Vivaldi account is required. Already have an account?")," ",s.createElement(gc,{onClick:this.props.onChangeDisplay,__source:{fileName:wF,lineNumber:761,columnNumber:11}},(0,ue.Z)("Log in."))),s.createElement("div",{className:"AccountSheet-Form AccountSheet-FormGrid",__source:{fileName:wF,lineNumber:766,columnNumber:9}},s.createElement("label",{__source:{fileName:wF,lineNumber:767,columnNumber:11}},s.createElement(tk,{label:(0,ue.Z)("Username is used for email, blog link and forum display name. It can only contain letters and numbers, and cannot be changed."),__source:{fileName:wF,lineNumber:768,columnNumber:13}},(0,ue.Z)("Username")),s.createElement("input",{ref:this._refUsernameField,type:"text",name:"username",value:this.state.username,onChange:this.onUsernameChange,onInvalid:this.setValidity,required:!0,pattern:SF,autoFocus:this.props.autoFocus,__source:{fileName:wF,lineNumber:771,columnNumber:13}})),s.createElement("label",{__source:{fileName:wF,lineNumber:784,columnNumber:11}},s.createElement(tk,{label:(0,ue.Z)("We need this information to prove to authorities that you are older than 16 to comply with the European General Data Protection Regulation (GDPR)."),__source:{fileName:wF,lineNumber:785,columnNumber:13}},(0,ue.Z)("Age")),s.createElement("input",{ref:this._refAgeField,type:"number",name:"age",value:this.state.age>=0?this.state.age:"",onChange:this.onAgeChange,onInvalid:this.setValidity,required:!0,min:"16",max:"150",__source:{fileName:wF,lineNumber:788,columnNumber:13}})),s.createElement("label",{__source:{fileName:wF,lineNumber:801,columnNumber:11}},s.createElement(tk,{label:(0,ue.Z)("We’ll use this email address to send you account-related messages (activation, password reset) and technical updates."),__source:{fileName:wF,lineNumber:802,columnNumber:13}},(0,ue.Z)("Recovery Email")),s.createElement("input",{ref:this._refEmailField,type:"email",name:"email",placeholder:"name@provider.com",value:this.state.email,onChange:this.onEmailChange,onInvalid:this.setValidity,pattern:TF,required:!0,__source:{fileName:wF,lineNumber:805,columnNumber:13}})),s.createElement("label",{__source:{fileName:wF,lineNumber:818,columnNumber:11}},(0,ue.Z)("Confirm Recovery Email"),s.createElement("input",{ref:this._refConfirmEmailField,type:"email",name:"confirmEmail",defaultValue:"",onChange:this.resetValidity,onInvalid:this.setValidity,pattern:(0,r_.Z)(this.state.email),required:!0,__source:{fileName:wF,lineNumber:820,columnNumber:13}}))),this.state.error&&s.createElement(Qc,{type:"error",__source:{fileName:wF,lineNumber:833,columnNumber:11}},this.state.error),s.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:wF,lineNumber:835,columnNumber:9}},!this.state.fetching&&s.createElement("input",{type:"submit",value:(0,ue.Z)("Next"),__source:{fileName:wF,lineNumber:837,columnNumber:13}}),this.state.fetching&&s.createElement("span",{className:"FormButton primary in-progress",__source:{fileName:wF,lineNumber:840,columnNumber:13}},(0,ue.Z)("Checking...")))))),yF(this,"renderPasswordDetails",(()=>s.createElement("form",{onSubmit:this.onRegister,noValidate:!0,__source:{fileName:wF,lineNumber:849,columnNumber:7}},s.createElement("h1",{__source:{fileName:wF,lineNumber:853,columnNumber:9}},(0,ue.Z)("Create an Account")),s.createElement(cF,{pictureUrl:"",username:this.state.username,deviceName:this.state.email,__source:{fileName:wF,lineNumber:855,columnNumber:9}}),s.createElement("div",{className:"AccountSheet-Form AccountSheet-FormGrid",__source:{fileName:wF,lineNumber:861,columnNumber:9}},s.createElement("label",{__source:{fileName:wF,lineNumber:862,columnNumber:11}},s.createElement(tk,{label:(0,ue.Z)("Use 12 or more characters. We recommend using several words separated by spaces."),__source:{fileName:wF,lineNumber:863,columnNumber:13}},(0,ue.Z)("Password")),s.createElement(pF,{ref:this._refPasswordField,name:"password",value:this.state.password,onChange:this.onPasswordChange,onInvalid:this.setValidity,minLength:"12",required:!0,autoFocus:this.props.autoFocus,__source:{fileName:wF,lineNumber:866,columnNumber:13}})),s.createElement("label",{__source:{fileName:wF,lineNumber:878,columnNumber:11}},(0,ue.Z)("Confirm Password"),s.createElement("input",{type:"password",ref:this._refConfirmPasswordField,name:"confirmPassword",defaultValue:"",onChange:this.resetValidity,onInvalid:this.setValidity,pattern:(0,r_.Z)(this.state.password),required:!0,__source:{fileName:wF,lineNumber:880,columnNumber:13}})),s.createElement("label",{className:"columnRow",__source:{fileName:wF,lineNumber:892,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.savePassword,onChange:this.onSavePasswordChange,__source:{fileName:wF,lineNumber:893,columnNumber:13}}),(0,ue.Z)("Save Password")),s.createElement("label",{className:"fullRow",__source:{fileName:wF,lineNumber:900,columnNumber:11}},(0,ue.Z)("Device Name"),s.createElement("input",{type:"text",className:"device",defaultValue:this.props.customSessionName,placeholder:this.props.defaultSessionName,onChange:IF(P.kSyncSessionName),__source:{fileName:wF,lineNumber:902,columnNumber:13}})),s.createElement("span",{className:"fullRow columnRow link",__source:{fileName:wF,lineNumber:910,columnNumber:11}},s.createElement("label",{__source:{fileName:wF,lineNumber:911,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.state.agreedToNewsletter,onChange:this.agreeToNewsletter,__source:{fileName:wF,lineNumber:912,columnNumber:15}}),(0,ue.Z)("I want to receive the Vivaldi newsletter.")),s.createElement(gc,{title:(0,ue.Z)("Learn more about Vivaldi Newsletter"),onClick:this.openNewsletterPage,__source:{fileName:wF,lineNumber:918,columnNumber:13}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vvh.small},__source:{fileName:wF,lineNumber:921,columnNumber:15}}))),s.createElement("span",{className:"fullRow columnRow link",__source:{fileName:wF,lineNumber:925,columnNumber:11}},s.createElement("label",{__source:{fileName:wF,lineNumber:926,columnNumber:13}},s.createElement("input",{type:"checkbox",name:"agreed",required:!0,checked:this.state.agreedToTerms,onInvalid:this.setValidity,onChange:this.agreeToTerms,__source:{fileName:wF,lineNumber:927,columnNumber:15}}),(0,ue.Z)("I have read and agree to the Terms of Use and Privacy Policy.")),s.createElement(gc,{title:(0,ue.Z)("Visit Vivaldi Privacy page"),onClick:this.openPrivacyPage,__source:{fileName:wF,lineNumber:936,columnNumber:13}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vvh.small},__source:{fileName:wF,lineNumber:939,columnNumber:15}})))),this.state.error&&s.createElement(Qc,{type:"error",__source:{fileName:wF,lineNumber:947,columnNumber:11}},this.state.error),s.createElement("div",{className:"AccountSheet-Footer AccountSheet-Footer--Justified",__source:{fileName:wF,lineNumber:949,columnNumber:9}},s.createElement("input",{type:"button",value:(0,ue.Z)("navigation","Back"),onClick:()=>{ZF(),this.goToStep(1)},__source:{fileName:wF,lineNumber:950,columnNumber:11}}),!this.state.fetching&&s.createElement("input",{type:"submit",value:(0,ue.Z)("Register"),__source:{fileName:wF,lineNumber:957,columnNumber:13}}),this.state.fetching&&s.createElement("span",{className:"FormButton primary in-progress",__source:{fileName:wF,lineNumber:960,columnNumber:13}},(0,ue.Z)("Registering...")))))),yF(this,"renderAccountVerification",(()=>s.createElement("form",{onSubmit:this.verifyAccount,noValidate:!0,__source:{fileName:wF,lineNumber:969,columnNumber:7}},s.createElement("h1",{__source:{fileName:wF,lineNumber:973,columnNumber:9}},(0,ue.Z)("Activate Your Account")),s.createElement(cF,{pictureUrl:"",username:this.state.username,deviceName:this.state.email,__source:{fileName:wF,lineNumber:974,columnNumber:9}}),s.createElement("div",{className:"AccountSheet-Form",__source:{fileName:wF,lineNumber:980,columnNumber:9}},s.createElement("p",{__source:{fileName:wF,lineNumber:981,columnNumber:11}},this.state.email?(0,ue.Z)("Activation code has been sent to “$1”.",[this.state.email]):(0,ue.Z)("Activation code has been sent to your email.")," ",(0,ue.Z)("Please enter the 6 digit code.")),s.createElement("input",{ref:this._refVerifyAccountField,type:"text",onChange:this.onActivationCodeChange,value:this.state.activationCode,name:"activationCode",className:"AccountSheet-Verification",size:6,placeholder:"000000",autoFocus:!0,__source:{fileName:wF,lineNumber:990,columnNumber:11}}),s.createElement("p",{__source:{fileName:wF,lineNumber:1002,columnNumber:11}},(0,ue.Z)("Don’t see the email? Please check your spam folder.")," ",-1!==this.state.activationCount&&s.createElement(gc,{onClick:this.sendVerificationCode,__source:{fileName:wF,lineNumber:1006,columnNumber:15}},(0,ue.Z)("Or get another activation code.")))),this.state.error&&s.createElement(Qc,{type:"error",__source:{fileName:wF,lineNumber:1015,columnNumber:11}},this.state.error," ",this.state.error===this.getError(4001).error&&this.state.activationCount>0&&this.state.activationCount<3&&(0,ue.Z)("$1 attempt remaining.","$1 attempts remaining.",[this.state.activationCount]),this.state.error===this.getError(4001).error&&0===this.state.activationCount&&(0,ue.Z)("Please request a new activation code.")),!this.state.error&&-1===this.state.activationCount&&s.createElement(Qc,{type:"info",__source:{fileName:wF,lineNumber:1038,columnNumber:11}},(0,ue.Z)("New activation code was sent.")),s.createElement("div",{className:"AccountSheet-Footer AccountSheet-Footer--Justified",__source:{fileName:wF,lineNumber:1043,columnNumber:9}},s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:()=>{this.resetActivation(),this.props.onChangeDisplay()},__source:{fileName:wF,lineNumber:1044,columnNumber:11}}),s.createElement("input",{type:"submit",value:(0,ue.Z)("Activate Account"),__source:{fileName:wF,lineNumber:1052,columnNumber:11}}))))),this.state={username:e.accountState.accountInfo.username||"",email:"",error:"",age:-1,password:"",savePassword:!0,step:e.unverified?3:1,fetching:!1,agreedToTerms:!1,agreedToNewsletter:!1,activationCode:"",activationCount:0},e.unverified&&b.Z.vivaldiAccount.getPendingRegistration((e=>{e&&this.setState({username:e.username,email:e.recovery_email,password:e.password},(()=>this.goToStep(3)))}))}componentWillUnmount(){ZF()}render(){const{step:e}=this.state;return s.createElement(s.Fragment,null,1===e&&this.renderUserDetails(),2===e&&this.renderPasswordDetails(),3===e&&this.renderAccountVerification())}}const MF=DF;var OF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountSheet.jsx";function xF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LF(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,RF(e,t,"set"),n),n}function RF(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const BF=[P.kSyncSessionName];var FF=new WeakMap;class UF extends s.PureComponent{constructor(e){super(e),FF.set(this,{writable:!0,value:!1}),xF(this,"setDefaultSession",(async()=>{if(!function(e,t){return t.get?t.get.call(e):t.value}(e=this,RF(e,FF,"get")))return;var e;const t=await(async()=>b.Z.sync.getDefaultSessionName())();this.setState({defaultSessionName:t})})),xF(this,"onVivaldiAccountChange",(()=>{const e=Fh.getState();this.setState({accountState:e}),e.lastTokenFetchError.serverMessage.includes(_F)&&"loginFailed"===Rh(e)?this.setState({display:"register",unverified:!0}):b.Z.vivaldiAccount.getPendingRegistration((e=>{e&&this.setState({display:"register",unverified:!0})}))})),xF(this,"onChangeDisplay",(()=>{this.setState((e=>({display:"login"===e.display?"register":"login",unverified:!1})))}));const t=Fh.getState();this.state={display:"register"===this.props.view?"register":"login",accountState:t,defaultSessionName:"",unverified:!1}}componentDidMount(){LF(this,FF,!0),this.vivaldiAccountStoreToken=Fh.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange(),this.setDefaultSession()}componentWillUnmount(){LF(this,FF,!1),this.vivaldiAccountStoreToken.remove()}render(){const{display:e}=this.state;return s.createElement("div",{className:"AccountSheet",__source:{fileName:OF,lineNumber:111,columnNumber:7}},s.createElement("span",{className:"AccountSheet-Logo",dangerouslySetInnerHTML:{__html:n(38151)},__source:{fileName:OF,lineNumber:112,columnNumber:9}}),"register"===e&&s.createElement(MF,{autoFocus:this.props.autoFocus,onClose:this.props.onClose,onChangeDisplay:this.onChangeDisplay,defaultSessionName:this.state.defaultSessionName,customSessionName:this.props.prefValues[P.kSyncSessionName],accountState:this.state.accountState,unverified:this.state.unverified,__source:{fileName:OF,lineNumber:116,columnNumber:11}}),"login"===e&&s.createElement(EF,{autoFocus:this.props.autoFocus,onClose:this.props.onClose,onChangeDisplay:this.onChangeDisplay,defaultSessionName:this.state.defaultSessionName,accountState:this.state.accountState,customSessionName:this.props.prefValues[P.kSyncSessionName],__source:{fileName:OF,lineNumber:127,columnNumber:11}}))}}const VF=(0,bi.Z)(UF,BF);function HF(e){m.Z.dispatch({actionType:"SYNC_ENGINE_STATE_CHANGED",engineData:e})}function WF(e){m.Z.dispatch({actionType:"SYNC_CYCLE_COMPLETED",cycleData:e})}const zF=new class{start(){b.Z.sync.start()}stop(){b.Z.sync.stop()}clearData(){b.Z.sync.clearData()}setEncryptionPassword(e,t){b.Z.sync.setEncryptionPassword(e,(e=>t(e)))}async loadPromise(){if(-1!==W.ZP.getId()&&W.ZP.isIncognitoOrGuest())return;const e=new Promise((e=>b.Z.sync.getEngineState((t=>{HF(t),b.Z.sync.onEngineStateChanged.addListener((e=>HF(e))),e()})))),t=new Promise((e=>b.Z.sync.getLastCycleState((t=>{WF(t),b.Z.sync.onCycleCompleted.addListener((e=>WF(e))),e()}))));await Promise.all([e,t])}};var GF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TabbedView.jsx";class KF extends s.PureComponent{constructor(e){var t,n,s;if(super(e),s=e=>{this.props.onTabClick&&this.props.onTabClick(e),this.setState({selectedTabId:e})},(n="onTabClick")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,e.children instanceof Array){const t=e.children[0];this.state={selectedTabId:e.activeTabId||t.props.id}}}componentDidUpdate(e){e.activeTabId!==this.props.activeTabId&&this.setState({selectedTabId:this.props.activeTabId})}render(){const{children:e,icons:t}=this.props,n=this.state.selectedTabId;return e instanceof Array&&e.length>1?s.createElement("div",{className:"TabbedView",__source:{fileName:GF,lineNumber:74,columnNumber:7}},s.createElement("nav",{className:"TabbedView-List",role:"tablist",__source:{fileName:GF,lineNumber:75,columnNumber:9}},e.map(((e,i)=>{const{id:r,label:a}=e.props;return s.createElement("button",{"aria-selected":r===n?"true":"false",type:"button",role:"tab",key:r,className:r===n?"active":null,onMouseDown:e=>e.preventDefault(),onClick:()=>this.onTabClick(r),dangerouslySetInnerHTML:{__html:(t?t[i]:"")+a},__source:{fileName:GF,lineNumber:79,columnNumber:15}})}))),e.map((e=>{if(e.props.id===n)return s.createElement("div",{className:"TabbedView-Content",role:"tabpanel","aria-labelledby":e.props.id,key:e.props.id,__source:{fileName:GF,lineNumber:97,columnNumber:15}},e.props.children)}))):(console.warn("TabbedView error: expecting multiple TabGroupEntries"),null)}}const jF=KF;var YF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncConfigure.jsx";function $F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const XF={bookmarks:{label:(0,ue.Z)("Bookmarks"),description:(0,ue.Z)("Sync bookmarks and Speed Dials"),icon:cn.CLf.small},preferences:{label:(0,ue.Z)("Settings"),description:(0,ue.Z)("Sync Vivaldi settings (not all settings are yet syncable)"),icon:cn.bqs.small},passwords:{label:(0,ue.Z)("Passwords"),description:(0,ue.Z)("Sync stored webpage passwords"),icon:cn._ZF},autofill:{label:(0,ue.Z)("Autofill"),description:(0,ue.Z)("Sync form autofill information"),icon:cn.lku},typed_urls:{label:(0,ue.Z)("History"),description:(0,ue.Z)("Sync typed URLs and open tabs"),icon:cn.hcy.small},extensions:{label:(0,ue.Z)("Extensions"),description:(0,ue.Z)("Sync browser extensions and settings"),icon:cn.eRB},notes:{label:(0,ue.Z)("Notes"),description:(0,ue.Z)("Sync Vivaldi Notes (attachments are not syncable)"),icon:cn.fbI}};class QF extends s.Component{constructor(e){super(e),$F(this,"syncAllId","syncAll__"+lr()()),$F(this,"syncPartsId","syncParts__"+lr()()),$F(this,"onCountDownElapsed",(e=>{this.setState({countdownElapsed:e})})),$F(this,"onSyncEverythingChange",(()=>{this.setChangeFeedback(),b.Z.sync.setTypes(!0,this.props.syncState.engineData.dataTypes),b.Z.sync.setupComplete(),this.setState((e=>({dataTypes:e.dataTypes.map((e=>(e.enabled=!0,e)))})))})),$F(this,"onDataTypeChange",(e=>{const t=e.target.name,n=e.target.checked;this.setState((e=>{const s=e.dataTypes,i=s.find((e=>e.dataType===t));return i&&(i.enabled=n),{dataTypes:s}})),b.Z.sync.setTypes(this.props.syncState.engineData.syncEverything,this.props.syncState.engineData.dataTypes)})),$F(this,"setChangeFeedback",(()=>{clearTimeout(this.changeTimeout),this.setState({showChangeFeedback:!0},(()=>this.changeTimeout=setTimeout(this.resetChangeFeedback,1e3)))})),$F(this,"resetChangeFeedback",(()=>{this.setState({showChangeFeedback:!1})})),$F(this,"onApplyChanges",(()=>{this.setChangeFeedback(),b.Z.sync.setTypes(!1,this.state.dataTypes),b.Z.sync.setupComplete()})),$F(this,"onClearData",(()=>{this.setState({showConfirmClearDataDialog:!0})})),$F(this,"onConfirmClearDataDialog",(e=>{this.setState({showConfirmClearDataDialog:!1}),e&&zF.clearData()})),$F(this,"onSaveBackupKey",(()=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Save Backup Encryption Key"),type:"save_file",accepts:[{ext:"txt"}]}).then((e=>{e&&b.Z.sync.backupEncryptionToken(e,(e=>{e||console.warn("File not saved (vivaldi.sync)")}))}))})),$F(this,"renderResetButton",(()=>"configuration_pending"===this.props.syncState.engineData.engineState?null:s.createElement("input",{type:"button",onClick:this.onClearData,value:(0,ue.Z)("Reset Remote Data"),__source:{fileName:YF,lineNumber:218,columnNumber:7}}))),this.state={countdownElapsed:!1,showConfirmClearDataDialog:!1,showChangeFeedback:!1,dataTypes:e.syncState.engineData.dataTypes}}componentWillUnmount(){clearTimeout(this.changeTimeout)}render(){const{cycleData:e,engineData:t}=this.props.syncState,n="not_synced"!==this.props.syncState.cycleData.downloadUpdatesStatus?g()(this.props.syncState.cycleData.cycleStartTime).calendar():"...",i=this.state.dataTypes.map((e=>s.createElement("li",{key:e.dataType,__source:{fileName:YF,lineNumber:235,columnNumber:7}},s.createElement("label",{className:"grid",__source:{fileName:YF,lineNumber:236,columnNumber:9}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:XF[e.dataType].icon},__source:{fileName:YF,lineNumber:237,columnNumber:11}}),s.createElement("h3",{__source:{fileName:YF,lineNumber:243,columnNumber:11}},XF[e.dataType].label),s.createElement("span",{className:"description",__source:{fileName:YF,lineNumber:244,columnNumber:11}},XF[e.dataType].description),s.createElement("input",{type:"checkbox",name:e.dataType,checked:e.enabled,onChange:this.onDataTypeChange,__source:{fileName:YF,lineNumber:248,columnNumber:11}}))))),[r,a]=this.state.showChangeFeedback?[jh(e)[0],(0,ue.Z)("Updating")]:jh(e),o=this.state.showChangeFeedback?"in_progress":e.commitStatus;let l=null;if(0!==parseInt(e.nextRetryTime)){const t=g()(e.nextRetryTime);l=t.isBefore(g()())?s.createElement("p",{className:"in-progress",__source:{fileName:YF,lineNumber:270,columnNumber:23}},(0,ue.Z)("Retrying")):s.createElement(nF,{label:"Retrying in $1",end:t,onElapsed:this.onCountDownElapsed,__source:{fileName:YF,lineNumber:273,columnNumber:11}})}const c=t.syncEverything?this.syncAllId:this.syncPartsId,u="configuration_pending"===t.engineState;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:YF,lineNumber:282,columnNumber:7}},s.createElement("div",{className:"setting-group-double",__source:{fileName:YF,lineNumber:283,columnNumber:9}},!u&&s.createElement("div",{className:"sync-status detail",__source:{fileName:YF,lineNumber:285,columnNumber:13}},s.createElement("span",{className:"time",__source:{fileName:YF,lineNumber:286,columnNumber:15}},(0,ue.Z)("Last sync:")," ",s.createElement("strong",{__source:{fileName:YF,lineNumber:289,columnNumber:17}},n)),s.createElement("span",{className:`data-in ${e.downloadUpdatesStatus}`,__source:{fileName:YF,lineNumber:291,columnNumber:15}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:cn.OXd},__source:{fileName:YF,lineNumber:292,columnNumber:17}}),(0,ue.Z)("Download: $1",[r])),s.createElement("span",{className:`data-out ${o}`,__source:{fileName:YF,lineNumber:297,columnNumber:15}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:cn.uUH},__source:{fileName:YF,lineNumber:298,columnNumber:17}}),(0,ue.Z)("Upload: $1",[a]))),l&&s.createElement(Qc,{type:"info",__source:{fileName:YF,lineNumber:306,columnNumber:27}},l),t.isEncryptingEverything&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status",__source:{fileName:YF,lineNumber:310,columnNumber:15}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:cn._ZF},__source:{fileName:YF,lineNumber:311,columnNumber:17}}),(0,ue.Z)("Data secured by encryption password.")),s.createElement("div",{className:"status",__source:{fileName:YF,lineNumber:315,columnNumber:15}},s.createElement("label",{__source:{fileName:YF,lineNumber:316,columnNumber:17}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:cn.SpM},__source:{fileName:YF,lineNumber:317,columnNumber:19}}),s.createElement(tk,{label:(0,ue.Z)("Store the backup recovery key in a secure place. If you forget your encryption password, you may use this key to retrieve your sync data. We won’t be able to recover your data since your password and backup key are never sent to us."),__source:{fileName:YF,lineNumber:320,columnNumber:19}},s.createElement(gc,{onClick:this.onSaveBackupKey,__source:{fileName:YF,lineNumber:321,columnNumber:21}},(0,ue.Z)("Save Backup Encryption Key")))))),!t.isEncryptingEverything&&s.createElement(Qc,{type:"error",__source:{fileName:YF,lineNumber:333,columnNumber:13}},(0,ue.Z)("Sync encryption failed. We recommend that you clear remote Sync data and restart Sync with your current browser data.")),this.state.showConfirmClearDataDialog&&s.createElement(gS,{title:(0,ue.Z)("Delete Remote Sync Data"),prompt:(0,ue.Z)("This will remove all sync data stored on the Vivaldi server, reset your encryption password, and log you out."),positive:(0,ue.Z)("Delete Sync Data"),negative:(0,ue.Z)("Cancel"),onClose:this.onConfirmClearDataDialog,danger:!0,__source:{fileName:YF,lineNumber:339,columnNumber:13}})),u&&s.createElement("div",{className:"sync-status-confirmed",__source:{fileName:YF,lineNumber:351,columnNumber:11}},s.createElement("h3",{__source:{fileName:YF,lineNumber:352,columnNumber:13}},(0,ue.Z)("All set! Time to decide what data to sync between devices."))),s.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:YF,lineNumber:356,columnNumber:9}},s.createElement(jF,{activeTabId:c,icons:[cn.uWq,cn.o7J],__source:{fileName:YF,lineNumber:357,columnNumber:11}},s.createElement("div",{label:(0,ue.Z)("Sync All Data"),id:this.syncAllId,__source:{fileName:YF,lineNumber:361,columnNumber:13}},s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:YF,lineNumber:362,columnNumber:15}},s.createElement("p",{__source:{fileName:YF,lineNumber:363,columnNumber:17}},!u&&t.syncEverything&&(0,ue.Z)("All data is sychronized, and synchronization of new data types is automatically enabled."),!u&&!t.syncEverything&&(0,ue.Z)("Selected data subset is sychronized.")," ",(!t.isFirstSetupComplete||!t.syncEverything)&&(0,ue.Z)("Sychronize all data, and automatically enable synchronization of new data types."))),s.createElement("div",{className:"TabbedView-Footer",__source:{fileName:YF,lineNumber:376,columnNumber:15}},this.renderResetButton(),s.createElement("input",{type:"submit",value:t.isFirstSetupComplete?(0,ue.Z)("Sync All Data"):(0,ue.Z)("Start Syncing"),onClick:this.onSyncEverythingChange,disabled:t.syncEverything&&!u,autoFocus:t.isFirstSetupComplete&&this.props.autoFocus,__source:{fileName:YF,lineNumber:378,columnNumber:17}}))),s.createElement("div",{label:(0,ue.Z)("Sync Selected Data"),id:this.syncPartsId,__source:{fileName:YF,lineNumber:391,columnNumber:13}},s.createElement("form",{onSubmit:this.onApplyChanges,__source:{fileName:YF,lineNumber:392,columnNumber:15}},s.createElement("ul",{__source:{fileName:YF,lineNumber:393,columnNumber:17}},i),s.createElement("div",{className:"TabbedView-Footer",__source:{fileName:YF,lineNumber:396,columnNumber:17}},this.renderResetButton(),s.createElement("input",{type:"submit",disabled:!u&&(!t.isSetupInProgress&&t.isFirstSetupComplete||(0,nd.default)(this.state.dataTypes,this.props.syncState.engineData.dataTypes)),value:t.isFirstSetupComplete?(0,ue.Z)("Apply Changes"):(0,ue.Z)("Start Syncing"),autoFocus:!t.isFirstSetupComplete&&this.props.autoFocus,__source:{fileName:YF,lineNumber:398,columnNumber:19}})))))))}}$F(QF,"contextType",Vs.Z);const qF=QF;var JF="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptDecryptionPassword.jsx";function eU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tU extends s.Component{constructor(...e){super(...e),eU(this,"ID1","fm1__"+lr()()),eU(this,"ID2","fm2__"+lr()()),eU(this,"state",{encryptionPassword:"",wrongPasswordEntered:!1,wrongBackupKey:"key"===this.props.unlockAttempt,showConfirmClearDataDialog:!1}),eU(this,"onEncryptionPasswordChange",(e=>{this.setState({wrongPasswordEntered:!1,wrongBackupKey:!1,encryptionPassword:e.target.value})})),eU(this,"onDecrypt",(()=>{this.setState({wrongPasswordEntered:!1}),zF.setEncryptionPassword(this.state.encryptionPassword,(e=>{this.props.onUnlockAttempt("passphrase"),e||this.setState({wrongPasswordEntered:!0,wrongBackupKey:!1})}))})),eU(this,"onPasswordLost",(()=>{this.setState({showConfirmClearDataDialog:!0,wrongPasswordEntered:!1,wrongBackupKey:!1})})),eU(this,"resetErrorState",(()=>{this.setState({wrongPasswordEntered:!1,wrongBackupKey:!1})})),eU(this,"onConfirmClearDataDialog",(e=>{this.setState({showConfirmClearDataDialog:!1}),e&&zF.clearData()})),eU(this,"onUploadEncyptionKey",(()=>{b.Z.utilities.selectFile({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Backup Encryption Key file"),type:"file",accepts:[{ext:"txt"}]}).then((e=>{e&&b.Z.sync.restoreEncryptionToken(e).then((e=>{this.props.onUnlockAttempt("key"),e||this.setState({wrongPasswordEntered:!1,wrongBackupKey:!0})}))}))})),eU(this,"renderForgotPassword",(()=>s.createElement(gc,{onClick:this.onPasswordLost,__source:{fileName:JF,lineNumber:123,columnNumber:7}},(0,ue.Z)("Forgot Password?"))))}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Encryption Password"),filter:this.props.filter,__source:{fileName:JF,lineNumber:132,columnNumber:7}},s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:JF,lineNumber:135,columnNumber:9}},s.createElement("div",{className:"setting-group-double",__source:{fileName:JF,lineNumber:136,columnNumber:11}},this.state.showConfirmClearDataDialog&&s.createElement(gS,{title:(0,ue.Z)("Delete Remote Sync Data"),prompt:(0,ue.Z)("Without your current encryption password we’re unable to decrypt your data. Reseting this password requires deleting all existing Sync data on Vivaldi servers."),positive:(0,ue.Z)("Delete Sync Data"),negative:(0,ue.Z)("Cancel"),onClose:this.onConfirmClearDataDialog,danger:!0,__source:{fileName:JF,lineNumber:138,columnNumber:15}}),s.createElement(jF,{activeTabId:"key"===this.props.unlockAttempt?this.ID2:void 0,icons:[cn.WHX,cn.c02],onTabClick:this.resetErrorState,__source:{fileName:JF,lineNumber:147,columnNumber:13}},s.createElement("div",{label:(0,ue.Z)("Encryption Password"),id:this.ID1,__source:{fileName:JF,lineNumber:152,columnNumber:15}},s.createElement("form",{onSubmit:this.onDecrypt,__source:{fileName:JF,lineNumber:153,columnNumber:17}},s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:JF,lineNumber:154,columnNumber:19}},s.createElement("p",{__source:{fileName:JF,lineNumber:155,columnNumber:21}},(0,ue.Z)("The data received from the Sync server is encrypted. Please provide your encryption password to decrypt it.")),s.createElement("label",{className:"setting-single encryption",__source:{fileName:JF,lineNumber:156,columnNumber:21}},s.createElement("span",{__source:{fileName:JF,lineNumber:157,columnNumber:23}},(0,ue.Z)("Encryption Password")),s.createElement(pF,{value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,autoFocus:this.props.autoFocus,__source:{fileName:JF,lineNumber:158,columnNumber:23}})),this.state.wrongPasswordEntered&&s.createElement(Qc,{type:"error",__source:{fileName:JF,lineNumber:164,columnNumber:23}},(0,ue.Z)("Wrong password entered."))),s.createElement("div",{className:"TabbedView-Footer",__source:{fileName:JF,lineNumber:169,columnNumber:19}},this.renderForgotPassword(),s.createElement("input",{type:"submit",value:(0,ue.Z)("Decrypt"),__source:{fileName:JF,lineNumber:171,columnNumber:21}})))),s.createElement("div",{label:(0,ue.Z)("Load Encryption Key"),id:this.ID2,__source:{fileName:JF,lineNumber:175,columnNumber:15}},s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:JF,lineNumber:176,columnNumber:17}},s.createElement("p",{__source:{fileName:JF,lineNumber:177,columnNumber:19}},(0,ue.Z)("To recover data without a password, you may use your Backup Encryption Key, provided you have saved it earlier.")),this.state.wrongBackupKey&&s.createElement(Qc,{type:"error",__source:{fileName:JF,lineNumber:179,columnNumber:21}},(0,ue.Z)("Unable to decrypt with given backup encryption key."))),s.createElement("div",{className:"TabbedView-Footer",__source:{fileName:JF,lineNumber:184,columnNumber:17}},this.renderForgotPassword(),s.createElement("input",{type:"button",onClick:this.onUploadEncyptionKey,value:(0,ue.Z)("Load"),__source:{fileName:JF,lineNumber:186,columnNumber:19}})))))))}}eU(tU,"contextType",Vs.Z);const nU=tU;var sU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptEncryptionPassword.jsx";function iU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rU extends s.Component{constructor(...e){super(...e),iU(this,"_input",s.createRef()),iU(this,"state",{encryptionPassword:"",shortPassword:!1}),iU(this,"onSetPassword",(()=>{!this.state.encryptionPassword||this.state.encryptionPassword.length<12?(this.setState({shortPassword:!0}),this._input.current?._refInput.current?.focus()):this.doSetPassword(this.state.encryptionPassword)})),iU(this,"doSetPassword",(e=>{zF.setEncryptionPassword(e,(e=>{e&&this.setState({shortPassword:!1})}))})),iU(this,"onEncryptionPasswordChange",(e=>{this.setState({encryptionPassword:e.target.value}),e.target.value.length>=12&&this.setState({shortPassword:!1})}))}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:sU,lineNumber:68,columnNumber:7}},s.createElement("h2",{__source:{fileName:sU,lineNumber:69,columnNumber:9}},(0,ue.Z)("Set a New Encryption Password")),s.createElement("form",{onSubmit:this.onSetPassword,__source:{fileName:sU,lineNumber:70,columnNumber:9}},s.createElement("div",{className:"setting-group-double",__source:{fileName:sU,lineNumber:71,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:sU,lineNumber:72,columnNumber:13}},s.createElement("p",{__source:{fileName:sU,lineNumber:73,columnNumber:15}},(0,ue.Z)("To encrypt and protect your sync data (passwords, bookmarks, notes, and more), please create an encryption password. This password will never be sent to us."))),s.createElement("div",{className:"setting-single",__source:{fileName:sU,lineNumber:75,columnNumber:13}},s.createElement("label",{className:"encryption-password",__source:{fileName:sU,lineNumber:76,columnNumber:15}},s.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:cn._ZF},__source:{fileName:sU,lineNumber:77,columnNumber:17}}),(0,ue.Z)("Encryption Password"),s.createElement(pF,{ref:this._input,value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,__source:{fileName:sU,lineNumber:80,columnNumber:17}})),this.state.shortPassword&&s.createElement(Qc,{type:"error",__source:{fileName:sU,lineNumber:86,columnNumber:17}},(0,ue.Z)("Minimum password length of $1 character is required.","Minimum password length of $1 characters is required.",[12]))),s.createElement("div",{className:"setting-single align-right pad-top",__source:{fileName:sU,lineNumber:95,columnNumber:13}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Save and Continue"),autoFocus:this.props.autoFocus,__source:{fileName:sU,lineNumber:96,columnNumber:15}})))))}}iU(rU,"contextType",Vs.Z);const aU=rU;var oU=n(34155),lU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\Sync.jsx";function cU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const uU=[P.kSyncSessionName];class mU extends s.Component{constructor(e){super(e),cU(this,"onSyncStoreChange",(()=>{this.setState({syncState:Lh.getState()})})),cU(this,"onVivaldiAccountChange",(()=>{this.setState({accountState:Fh.getState()})})),cU(this,"onUnlockAttempt",(e=>{this.setState({unlockAttempt:e})})),cU(this,"restartSync",(()=>{zF.stop(),oU.nextTick((()=>zF.start()))})),cU(this,"startSync",(()=>{zF.start()})),cU(this,"stopSync",(()=>{zF.stop()})),cU(this,"getContent",(()=>{const e=this.state.syncState.engineData;if(e.disableReasons.includes("platform_override"))return s.createElement("p",{__source:{fileName:lU,lineNumber:118,columnNumber:14}},(0,ue.Z)("Sync is disabled by your operating system"));if(e.disableReasons.includes("enterprise_policy"))return s.createElement("p",{__source:{fileName:lU,lineNumber:122,columnNumber:14}},(0,ue.Z)("Sync has been disabled by your administrator"));const t=e.engineState;if(!this.state.accountState.hasToken)return null;switch(t){case"stopped":return s.createElement("div",{className:"setting-group-double",__source:{fileName:lU,lineNumber:132,columnNumber:11}},"disable_sync_on_client"===e.protocolErrorClientAction&&s.createElement("p",{__source:{fileName:lU,lineNumber:135,columnNumber:43}},(0,ue.Z)("Sync was stopped following a request from the server: $1",["not_my_birthday"===e.protocolErrorType?(0,ue.Z)("Sync server data was reset"):e.protocolErrorDescription])),s.createElement("input",{type:"button",onClick:this.startSync,value:(0,ue.Z)("Start Sync"),__source:{fileName:lU,lineNumber:142,columnNumber:13}}));case"failed":if(e.disableReasons.includes("not_signed_in"))return s.createElement("div",{className:"setting-group-double",__source:{fileName:lU,lineNumber:150,columnNumber:19}},s.createElement("p",{className:"in-progress",__source:{fileName:lU,lineNumber:151,columnNumber:13}},(0,ue.Z)("Waiting for account details")),s.createElement("input",{type:"button",onClick:this.stopSync,value:(0,ue.Z)("Cancel"),__source:{fileName:lU,lineNumber:152,columnNumber:13}}));if(e.disableReasons.includes("flag"))return s.createElement("p",{__source:{fileName:lU,lineNumber:160,columnNumber:19}},(0,ue.Z)("Sync was disabled from the command line"));let t=(0,ue.Z)("Unexpected error. You may need to restart Vivaldi.");if(e.disableReasons.includes("unrecoverable_error")){if("upgrade_client"===e.protocolErrorClientAction)return s.createElement("p",{__source:{fileName:lU,lineNumber:168,columnNumber:23}},(0,ue.Z)("You must upgrade Vivaldi in order to use Sync"));t=(0,ue.Z)("Sync must be restarted: $1",[e.protocolErrorDescription])}return s.createElement("div",{className:"setting-group-double",__source:{fileName:lU,lineNumber:175,columnNumber:17}},s.createElement("p",{__source:{fileName:lU,lineNumber:176,columnNumber:11}},t),s.createElement("input",{type:"button",onClick:this.restartSync,value:(0,ue.Z)("sync","Restart"),__source:{fileName:lU,lineNumber:177,columnNumber:11}}));case"starting":return s.createElement("p",{className:"in-progress",__source:{fileName:lU,lineNumber:184,columnNumber:11}},(0,ue.Z)("Initializing Sync..."));case"starting_server_error":return s.createElement("p",{className:"in-progress",__source:{fileName:lU,lineNumber:189,columnNumber:11}},(0,ue.Z)("The sync server is experiencing issues. Retrying initialization soon."));case"clearing_data":return s.createElement("p",{className:"in-progress",__source:{fileName:lU,lineNumber:194,columnNumber:11}},(0,ue.Z)("Clearing Sync data. Please wait."));case"configuration_pending":case"started":return e.needsDecryptionPassword?s.createElement(nU,{filter:this.props.filter,autoFocus:this.props.category!==Pt.jk.settingCategories.all,unlockAttempt:this.state.unlockAttempt,onUnlockAttempt:this.onUnlockAttempt,__source:{fileName:lU,lineNumber:201,columnNumber:13}}):e.usesEncryptionPassword?s.createElement(qF,{filter:this.props.filter,syncState:this.state.syncState,autoFocus:this.props.category!==Pt.jk.settingCategories.all,__source:{fileName:lU,lineNumber:217,columnNumber:13}}):s.createElement(aU,{filter:this.props.filter,autoFocus:this.props.category!==Pt.jk.settingCategories.all,__source:{fileName:lU,lineNumber:210,columnNumber:13}})}return null})),this.state={syncState:Lh.getState(),accountState:Fh.getState(),defaultSessionName:"",unlockAttempt:""}}componentDidMount(){this.syncStoreToken=Lh.addListener(this.onSyncStoreChange),this.vivaldiAccountStoreToken=Fh.addListener(this.onVivaldiAccountChange),this.onSyncStoreChange(),this.onVivaldiAccountChange(),b.Z.sync.getDefaultSessionName((e=>this.setState({defaultSessionName:e})))}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){if(W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId))return s.createElement("p",{__source:{fileName:lU,lineNumber:230,columnNumber:14}},(0,ue.Z)("Sync settings are unavailable in Private Windows."));if(!this.state.syncState.engineData.isReady||!this.state.syncState.cycleData.isReady||!this.state.accountState.isReady)return null;const e=this.getContent(),{username:t,pictureUrl:n}=this.state.accountState.accountInfo,i=this.props.prefValues[P.kSyncSessionName]||this.state.defaultSessionName,r=Rh(this.state.accountState);return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Sync"),filter:this.props.filter,className:"sync-setup",__source:{fileName:lU,lineNumber:247,columnNumber:7}},s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:lU,lineNumber:252,columnNumber:9}},s.createElement("div",{className:"setting-group-double",__source:{fileName:lU,lineNumber:253,columnNumber:11}},"loggedIn"!==r?s.createElement(VF,{key:this.props.url,onClose:qo.default,view:(a=this.props.url,"register"===(0,As.DP)(a).view?"register":"login"),autoFocus:this.props.category!==Pt.jk.settingCategories.all,__source:{fileName:lU,lineNumber:255,columnNumber:17}}):s.createElement(cF,{pictureUrl:n,username:t,deviceName:i,isLoggedIn:!0,__source:{fileName:lU,lineNumber:261,columnNumber:17}}))),e&&s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:lU,lineNumber:272,columnNumber:11}},e));var a}}cU(mU,"contextType",Vs.Z);const dU=(0,bi.Z)(mU,uU);var hU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabActivation.jsx";const pU=st.Z.getEventHandler,gU=[P.kTabsActivationOnClose,P.kTabsActivationPreferRelated,P.kTabsAlignNext,P.kTabsDoubleClickClose,P.kTabsFocusWebview,P.kTabsBarPosition,P.kTabsNeverCloseLast];class bU extends s.Component{constructor(...e){var t,n,s;super(...e),s=()=>{const e=this.props.prefValues[P.kTabsBarPosition];return"top"===e||"bottom"===e},(n="isHorizontal")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const{prefValues:e}=this.props;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:hU,lineNumber:44,columnNumber:7}},s.createElement("span",{__source:{fileName:hU,lineNumber:45,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:hU,lineNumber:46,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:47,columnNumber:13}},s.createElement("h3",{__source:{fileName:hU,lineNumber:48,columnNumber:15}},(0,ue.Z)("Close Tab Activation")),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:50,columnNumber:15}},s.createElement("label",{title:(0,ue.Z)("Activate tabs related by origin first"),__source:{fileName:hU,lineNumber:51,columnNumber:17}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsActivationPreferRelated],onChange:pU(P.kTabsActivationPreferRelated),__source:{fileName:hU,lineNumber:52,columnNumber:19}}),s.createElement("span",{__source:{fileName:hU,lineNumber:56,columnNumber:19}},(0,ue.Z)("Always Activate Related Tab")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:hU,lineNumber:60,columnNumber:15}},s.createElement(_i,{name:"tabActivate",value:e[P.kTabsActivationOnClose],onChange:pU(P.kTabsActivationOnClose),__source:{fileName:hU,lineNumber:61,columnNumber:17}},s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:66,columnNumber:19}},s.createElement("label",{__source:{fileName:hU,lineNumber:67,columnNumber:21}},s.createElement("input",{type:"radio",value:"activation_order",__source:{fileName:hU,lineNumber:68,columnNumber:23}}),s.createElement("span",{__source:{fileName:hU,lineNumber:69,columnNumber:23}},(0,ue.Z)("Activate in Recently Used Order")))),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:73,columnNumber:19}},s.createElement("label",{__source:{fileName:hU,lineNumber:74,columnNumber:21}},s.createElement("input",{type:"radio",value:"left",__source:{fileName:hU,lineNumber:75,columnNumber:23}}),s.createElement("span",{__source:{fileName:hU,lineNumber:76,columnNumber:23}},this.isHorizontal()?(0,ue.Z)("Activate Left in Tab Order"):(0,ue.Z)("Activate Above in Tab Order")))),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:82,columnNumber:19}},s.createElement("label",{__source:{fileName:hU,lineNumber:83,columnNumber:21}},s.createElement("input",{type:"radio",value:"right",__source:{fileName:hU,lineNumber:84,columnNumber:23}}),s.createElement("span",{__source:{fileName:hU,lineNumber:85,columnNumber:23}},this.isHorizontal()?(0,ue.Z)("Activate Right in Tab Order"):(0,ue.Z)("Activate Below in Tab Order")))))))),s.createElement("div",{className:"setting-group",__source:{fileName:hU,lineNumber:95,columnNumber:11}},s.createElement("h3",{__source:{fileName:hU,lineNumber:96,columnNumber:13}},(0,ue.Z)("Tab Handling")),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:97,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Align the close buttons to easily close multiple tabs"),__source:{fileName:hU,lineNumber:98,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsAlignNext],onChange:pU(P.kTabsAlignNext),__source:{fileName:hU,lineNumber:100,columnNumber:17}}),s.createElement("span",{__source:{fileName:hU,lineNumber:104,columnNumber:17}},(0,ue.Z)("Align Next Close Button")))),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:108,columnNumber:13}},s.createElement("label",{__source:{fileName:hU,lineNumber:109,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsDoubleClickClose],onChange:pU(P.kTabsDoubleClickClose),__source:{fileName:hU,lineNumber:110,columnNumber:17}}),s.createElement("span",{__source:{fileName:hU,lineNumber:114,columnNumber:17}},(0,ue.Z)("Close Tab on Double Click")))),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:118,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Prevents window closing along with last tab."),__source:{fileName:hU,lineNumber:119,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsNeverCloseLast],onChange:pU(P.kTabsNeverCloseLast),__source:{fileName:hU,lineNumber:120,columnNumber:17}}),s.createElement("span",{__source:{fileName:hU,lineNumber:123,columnNumber:17}},(0,ue.Z)("Keep Window Open When Last Tab is Closed")))),s.createElement("div",{className:"setting-single",__source:{fileName:hU,lineNumber:127,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Focus page content instead of addressfield"),__source:{fileName:hU,lineNumber:128,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsFocusWebview],onChange:pU(P.kTabsFocusWebview),__source:{fileName:hU,lineNumber:129,columnNumber:17}}),s.createElement("span",{__source:{fileName:hU,lineNumber:132,columnNumber:17}},(0,ue.Z)("Focus Page Content on New Tab")))))))}}const NU=(0,bi.Z)(bU,gU);var fU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabCycling.jsx";const _U=st.Z.getEventHandler,vU=[P.kMouseWheelTabSwitch,P.kTabsCycleByRecentOrder,P.kTabsMinimize,P.kTabsVisualSwitchEnable,P.kTabsVisualSwitchListLayout];class EU extends s.Component{render(){const e=this.props.prefValues;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:fU,lineNumber:36,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:fU,lineNumber:37,columnNumber:9}},s.createElement("h3",{htmlFor:"tabSelection",__source:{fileName:fU,lineNumber:38,columnNumber:11}},(0,ue.Z)("Tab Cycling")),s.createElement(_i,{name:"tabCyclingOrder",value:this.props.prefValues[P.kTabsCycleByRecentOrder],onChange:_U(P.kTabsCycleByRecentOrder,"convert"),__source:{fileName:fU,lineNumber:40,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:fU,lineNumber:43,columnNumber:13}},s.createElement("label",{__source:{fileName:fU,lineNumber:44,columnNumber:15}},s.createElement("input",{type:"radio",value:"true",__source:{fileName:fU,lineNumber:45,columnNumber:17}}),s.createElement("span",{__source:{fileName:fU,lineNumber:46,columnNumber:17}},(0,ue.Z)("Cycle in Recently Used Order")))),s.createElement("div",{className:"setting-single",__source:{fileName:fU,lineNumber:49,columnNumber:13}},s.createElement("label",{__source:{fileName:fU,lineNumber:50,columnNumber:15}},s.createElement("input",{type:"radio",value:"false",__source:{fileName:fU,lineNumber:51,columnNumber:17}}),s.createElement("span",{__source:{fileName:fU,lineNumber:52,columnNumber:17}},(0,ue.Z)("Cycle in Tab Order"))))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:fU,lineNumber:57,columnNumber:11}},s.createElement("label",{__source:{fileName:fU,lineNumber:58,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsVisualSwitchEnable],onChange:_U(P.kTabsVisualSwitchEnable),__source:{fileName:fU,lineNumber:59,columnNumber:15}}),s.createElement("span",{__source:{fileName:fU,lineNumber:62,columnNumber:15}},(0,ue.Z)("Show Tab Cycler")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:fU,lineNumber:66,columnNumber:11}},s.createElement("label",{__source:{fileName:fU,lineNumber:67,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsVisualSwitchListLayout],disabled:!this.props.prefValues[P.kTabsVisualSwitchEnable],onChange:_U(P.kTabsVisualSwitchListLayout),__source:{fileName:fU,lineNumber:68,columnNumber:15}}),s.createElement("span",{__source:{fileName:fU,lineNumber:72,columnNumber:15}},(0,ue.Z)("Display Tab Cycler as List")))),s.createElement("div",{className:"setting-single",__source:{fileName:fU,lineNumber:76,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Scroll over Tab Bar to switch tabs by order, or scroll anywhere else while holding Alt key to switch tabs per Tab Cycling setting."),__source:{fileName:fU,lineNumber:77,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e[P.kMouseWheelTabSwitch],onChange:_U(P.kMouseWheelTabSwitch),__source:{fileName:fU,lineNumber:80,columnNumber:15}}),s.createElement("span",{__source:{fileName:fU,lineNumber:83,columnNumber:15}},(0,ue.Z)("Switch Tabs by Scrolling")))),s.createElement("div",{className:"setting-single",__source:{fileName:fU,lineNumber:87,columnNumber:11}},s.createElement("label",{__source:{fileName:fU,lineNumber:88,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsMinimize],onChange:_U(P.kTabsMinimize),__source:{fileName:fU,lineNumber:89,columnNumber:15}}),s.createElement("span",{__source:{fileName:fU,lineNumber:92,columnNumber:15}},(0,ue.Z)("Minimize Active Tab"))),s.createElement("p",{className:"info",__source:{fileName:fU,lineNumber:94,columnNumber:13}},(0,ue.Z)("Click current tab to switch to last active tab.")))))}}const CU=(0,bi.Z)(EU,vU);var wU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabMuting.jsx";const yU=st.Z.getEventHandler,SU=[P.kTabsAutoMuting];class TU extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:wU,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:wU,lineNumber:27,columnNumber:9}},s.createElement("h3",{__source:{fileName:wU,lineNumber:28,columnNumber:11}},(0,ue.Z)("Mute Tab Audio")),s.createElement(_i,{name:"mutableTabs",value:this.props.prefValues[P.kTabsAutoMuting],onChange:yU(P.kTabsAutoMuting),__source:{fileName:wU,lineNumber:29,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:wU,lineNumber:32,columnNumber:13}},s.createElement("label",{__source:{fileName:wU,lineNumber:33,columnNumber:15}},s.createElement("input",{type:"radio",value:"off",__source:{fileName:wU,lineNumber:34,columnNumber:17}}),s.createElement("span",{__source:{fileName:wU,lineNumber:35,columnNumber:17}},(0,ue.Z)("Play All Audio")))),s.createElement("div",{className:"setting-single",__source:{fileName:wU,lineNumber:38,columnNumber:13}},s.createElement("label",{__source:{fileName:wU,lineNumber:39,columnNumber:15}},s.createElement("input",{type:"radio",value:"onlyActive",__source:{fileName:wU,lineNumber:40,columnNumber:17}}),s.createElement("span",{__source:{fileName:wU,lineNumber:41,columnNumber:17}},(0,ue.Z)("Play Only in Active Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:wU,lineNumber:44,columnNumber:13}},s.createElement("label",{__source:{fileName:wU,lineNumber:45,columnNumber:15}},s.createElement("input",{type:"radio",value:"prioritizeActive",__source:{fileName:wU,lineNumber:46,columnNumber:17}}),s.createElement("span",{__source:{fileName:wU,lineNumber:47,columnNumber:17}},(0,ue.Z)("Prioritize Active Tab")))))))}}const kU=(0,bi.Z)(TU,SU);var IU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOpen.jsx";const AU=st.Z.getEventHandler,ZU=[P.kTabsActivationOnClone,P.kTabsNewPlacement,P.kTabsOpenNewInBackground];class PU extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:IU,lineNumber:30,columnNumber:7}},s.createElement("span",{__source:{fileName:IU,lineNumber:31,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:IU,lineNumber:32,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:33,columnNumber:13}},s.createElement("h3",{__source:{fileName:IU,lineNumber:34,columnNumber:15}},(0,ue.Z)("New Tab Position")),s.createElement(_i,{name:"tabOpen",value:this.props.prefValues[P.kTabsNewPlacement],onChange:AU(P.kTabsNewPlacement),__source:{fileName:IU,lineNumber:35,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:38,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:39,columnNumber:19}},s.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:IU,lineNumber:40,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:41,columnNumber:21}},(0,ue.Z)("After Related Tabs")))),s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:44,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:45,columnNumber:19}},s.createElement("input",{type:"radio",value:"directrightofcurrent",__source:{fileName:IU,lineNumber:46,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:47,columnNumber:21}},(0,ue.Z)("After Active Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:50,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:51,columnNumber:19}},s.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:IU,lineNumber:52,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:53,columnNumber:21}},(0,ue.Z)("As Last Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:56,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:57,columnNumber:19}},s.createElement("input",{type:"radio",value:"openintabstackwithrelated",__source:{fileName:IU,lineNumber:58,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:59,columnNumber:21}},(0,ue.Z)("As Tab Stack with Related Tab"))))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:IU,lineNumber:64,columnNumber:15}},s.createElement("label",{__source:{fileName:IU,lineNumber:65,columnNumber:17}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsOpenNewInBackground],onChange:AU(P.kTabsOpenNewInBackground),__source:{fileName:IU,lineNumber:66,columnNumber:19}}),s.createElement("span",{__source:{fileName:IU,lineNumber:69,columnNumber:19}},(0,ue.Z)("New Tab from Link Opens in Background")))))),s.createElement("div",{className:"setting-group",__source:{fileName:IU,lineNumber:76,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:77,columnNumber:13}},s.createElement("h3",{__source:{fileName:IU,lineNumber:78,columnNumber:15}},(0,ue.Z)("Cloned Tab Position")),s.createElement(_i,{name:"tabClone",value:this.props.prefValues[P.kTabsActivationOnClone],onChange:AU(P.kTabsActivationOnClone),__source:{fileName:IU,lineNumber:79,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:82,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:83,columnNumber:19}},s.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:IU,lineNumber:84,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:85,columnNumber:21}},(0,ue.Z)("Next to Original Tab")))),s.createElement("div",{className:"setting-single",__source:{fileName:IU,lineNumber:88,columnNumber:17}},s.createElement("label",{__source:{fileName:IU,lineNumber:89,columnNumber:19}},s.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:IU,lineNumber:90,columnNumber:21}}),s.createElement("span",{__source:{fileName:IU,lineNumber:91,columnNumber:21}},(0,ue.Z)("As Last Tab")))))))))}}const DU=(0,bi.Z)(PU,ZU);var MU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOptions.jsx";const OU=st.Z.getEventHandler,xU=[P.kTabsActiveMinSize,P.kTabsAtEdge,P.kTabsCloseButtonLeft,P.kTabsCloseButtonPermanent,P.kTabsCounterDetection,P.kTabsDimHibernated,P.kTabsPageLoadInfo,P.kTabsBarPosition,P.kTabsShowCloseButton,P.kTabsShowSeparator,P.kTabsThumbnails,P.kTabsTooltip,P.kTabsUnread];class LU extends s.Component{render(){const{prefValues:e}=this.props;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:MU,lineNumber:56,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:MU,lineNumber:57,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:58,columnNumber:11}},s.createElement("h3",{__source:{fileName:MU,lineNumber:59,columnNumber:13}},(0,ue.Z)("Tab Options")),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:61,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:62,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsTooltip],onChange:OU(P.kTabsTooltip),__source:{fileName:MU,lineNumber:63,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:66,columnNumber:17}},(0,ue.Z)("Show Popup Thumbnails")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:70,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:71,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsThumbnails],onChange:OU(P.kTabsThumbnails),__source:{fileName:MU,lineNumber:72,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:75,columnNumber:17}},(0,ue.Z)("Show Tab Thumbnails")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:79,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:80,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsShowCloseButton],onChange:OU(P.kTabsShowCloseButton),__source:{fileName:MU,lineNumber:81,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:84,columnNumber:17}},(0,ue.Z)("Display Close Button")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:MU,lineNumber:88,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:89,columnNumber:15}},s.createElement("input",{type:"checkbox",disabled:!e[P.kTabsShowCloseButton],checked:e[P.kTabsCloseButtonLeft],onChange:OU(P.kTabsCloseButtonLeft),__source:{fileName:MU,lineNumber:90,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:94,columnNumber:17}},(0,ue.Z)("On Left Side")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:MU,lineNumber:98,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:99,columnNumber:15}},s.createElement("input",{type:"checkbox",disabled:!e[P.kTabsShowCloseButton],checked:e[P.kTabsCloseButtonPermanent],onChange:OU(P.kTabsCloseButtonPermanent),__source:{fileName:MU,lineNumber:100,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:104,columnNumber:17}},(0,ue.Z)("Permanently")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:108,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:MU,lineNumber:109,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsCounterDetection],onChange:OU(P.kTabsCounterDetection),__source:{fileName:MU,lineNumber:110,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:113,columnNumber:17}},(0,ue.Z)("Detect Page Title Notifications")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:117,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:118,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsAtEdge],onChange:OU(P.kTabsAtEdge),disabled:"left"===e[P.kTabsBarPosition]||"right"===e[P.kTabsBarPosition],__source:{fileName:MU,lineNumber:119,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:125,columnNumber:17}},(0,ue.Z)("Remove Tab Spacing in Maximized Windows")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:133,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Display a triangle symbol for unread Tabs"),__source:{fileName:MU,lineNumber:134,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsUnread],onChange:OU(P.kTabsUnread),__source:{fileName:MU,lineNumber:135,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:138,columnNumber:17}},(0,ue.Z)("Use Unread Indicators"))),s.createElement("div",{className:e[P.kTabsUnread]?"img-setting":"img-setting disabled",__source:{fileName:MU,lineNumber:140,columnNumber:15}},s.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:n(33271)},__source:{fileName:MU,lineNumber:142,columnNumber:17}}))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:150,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:151,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsDimHibernated],onChange:OU(P.kTabsDimHibernated),__source:{fileName:MU,lineNumber:152,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:155,columnNumber:17}},(0,ue.Z)("Dim Icon when Hibernated")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:159,columnNumber:13}},s.createElement("label",{__source:{fileName:MU,lineNumber:160,columnNumber:15}},s.createElement("input",{type:"checkbox",disabled:"top"===e[P.kTabsBarPosition]||"bottom"===e[P.kTabsBarPosition],checked:e[P.kTabsShowSeparator],onChange:OU(P.kTabsShowSeparator),__source:{fileName:MU,lineNumber:161,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:167,columnNumber:17}},(0,ue.Z)("Show Separator Below Pinned Tabs")))))),s.createElement("div",{className:"setting-group tab-min-width",__source:{fileName:MU,lineNumber:173,columnNumber:9}},s.createElement("h3",{__source:{fileName:MU,lineNumber:174,columnNumber:11}},(0,ue.Z)("Active Tab Minimum Width")),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:175,columnNumber:11}},s.createElement("label",{title:(0,ue.Z)("Minimum width of horizontally scaled active tab"),__source:{fileName:MU,lineNumber:176,columnNumber:13}},s.createElement("input",{type:"range",value:e[P.kTabsActiveMinSize],min:30,max:180,step:30,onChange:OU(P.kTabsActiveMinSize),__source:{fileName:MU,lineNumber:178,columnNumber:15}}),s.createElement("span",{__source:{fileName:MU,lineNumber:185,columnNumber:15}},(0,ue.Z)("$1 pixel","$1 pixels",[parseInt(e[P.kTabsActiveMinSize])]))))),s.createElement("div",{className:"setting-group",__source:{fileName:MU,lineNumber:190,columnNumber:9}},s.createElement("h3",{__source:{fileName:MU,lineNumber:191,columnNumber:11}},(0,ue.Z)("Page Load Progress")),s.createElement(_i,{name:"tabPageLoadInfo",value:this.props.prefValues[P.kTabsPageLoadInfo],onChange:OU(P.kTabsPageLoadInfo),__source:{fileName:MU,lineNumber:192,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:195,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Display tab progress bar while page is loading"),__source:{fileName:MU,lineNumber:196,columnNumber:15}},s.createElement("input",{type:"radio",value:"progress_bar",__source:{fileName:MU,lineNumber:197,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:198,columnNumber:17}},(0,ue.Z)("Progress Bar")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:201,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Display circular progress in place of favicon while page is loading"),__source:{fileName:MU,lineNumber:202,columnNumber:15}},s.createElement("input",{type:"radio",value:"progress_icon",__source:{fileName:MU,lineNumber:203,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:204,columnNumber:17}},(0,ue.Z)("Favicon Progress")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:207,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Display spinner in place of favicon while page is loading"),__source:{fileName:MU,lineNumber:208,columnNumber:15}},s.createElement("input",{type:"radio",value:"spinner",__source:{fileName:MU,lineNumber:209,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:210,columnNumber:17}},(0,ue.Z)("Favicon Spinner")))),s.createElement("div",{className:"setting-single",__source:{fileName:MU,lineNumber:213,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Don’t display page loading progress"),__source:{fileName:MU,lineNumber:214,columnNumber:15}},s.createElement("input",{type:"radio",value:"none",__source:{fileName:MU,lineNumber:215,columnNumber:17}}),s.createElement("span",{__source:{fileName:MU,lineNumber:216,columnNumber:17}},(0,ue.Z)("radio","None")))))))}}const RU=(0,bi.Z)(LU,xU);var BU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPage.jsx";function FU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const UU=st.Z.getEventHandler,VU=[P.kExtensionURLOverrides,P.kTabsNewPageLink];class HU extends s.Component{constructor(...e){super(...e),FU(this,"state",{customUrl:A.ZP.get(P.kTabsNewPageCustomUrl)}),FU(this,"_handleCustomUrlChange",(({currentTarget:e})=>{const t=e.value;this.setState({customUrl:t}),this._saveCustomUrl(t)})),FU(this,"_saveCustomUrl",(e=>{const t=(0,As.q9)(e);st.Z.set(P.kTabsNewPageCustomUrl,t),this.props.prefValues[P.kTabsNewPageLink]!==Q.Fp.CUSTOM&&st.Z.set(P.kTabsNewPageLink,Q.Fp.CUSTOM)})),FU(this,"focusCustomUrlInput",(()=>{this._customPageRef&&this._customPageRef.focus()}))}render(){const e=this.props.prefValues,t=e[P.kExtensionURLOverrides].newtab?.some((e=>e.active)),n=e[P.kTabsNewPageLink]===Q.Fp.EXTENSION;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:BU,lineNumber:68,columnNumber:7}},s.createElement("div",{className:"setting-group new-tab-page",__source:{fileName:BU,lineNumber:69,columnNumber:9}},s.createElement("h3",{__source:{fileName:BU,lineNumber:70,columnNumber:11}},(0,ue.Z)("title","New Tab Page")),s.createElement(_i,{name:"tabPageSettings",value:e[P.kTabsNewPageLink],onChange:UU(P.kTabsNewPageLink),__source:{fileName:BU,lineNumber:71,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:BU,lineNumber:74,columnNumber:13}},s.createElement("label",{__source:{fileName:BU,lineNumber:75,columnNumber:15}},s.createElement("input",{type:"radio",value:Q.Fp.STARTPAGE,checked:e[P.kTabsNewPageLink]===Q.Fp.STARTPAGE||e[P.kTabsNewPageLink]===Q.Fp.EXTENSION,onChange:UU(P.kTabsNewPageLink),__source:{fileName:BU,lineNumber:76,columnNumber:17}}),s.createElement("span",{__source:{fileName:BU,lineNumber:83,columnNumber:17}},(0,ue.Z)("noun","Start Page")))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:BU,lineNumber:86,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Allow installed third-party extensions to control the Start Page"),__source:{fileName:BU,lineNumber:87,columnNumber:15}},s.createElement("input",{type:"checkbox",disabled:!t,checked:n,onChange:UU(P.kTabsNewPageLink),value:n?Q.Fp.STARTPAGE:Q.Fp.EXTENSION,__source:{fileName:BU,lineNumber:89,columnNumber:17}}),s.createElement("span",{__source:{fileName:BU,lineNumber:97,columnNumber:17}},(0,ue.Z)("Controlled by Extension")))),s.createElement("div",{className:"setting-single",__source:{fileName:BU,lineNumber:100,columnNumber:13}},s.createElement("label",{__source:{fileName:BU,lineNumber:101,columnNumber:15}},s.createElement("input",{type:"radio",value:Q.Fp.HOMEPAGE,__source:{fileName:BU,lineNumber:102,columnNumber:17}}),s.createElement("span",{__source:{fileName:BU,lineNumber:103,columnNumber:17}},(0,ue.Z)("other","Homepage")))),s.createElement("div",{className:"setting-single",__source:{fileName:BU,lineNumber:106,columnNumber:13}},s.createElement("label",{__source:{fileName:BU,lineNumber:107,columnNumber:15}},s.createElement("input",{type:"radio",value:Q.Fp.BLANKPAGE,__source:{fileName:BU,lineNumber:108,columnNumber:17}}),s.createElement("span",{__source:{fileName:BU,lineNumber:109,columnNumber:17}},(0,ue.Z)("other","Blank Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:BU,lineNumber:112,columnNumber:13}},s.createElement("label",{__source:{fileName:BU,lineNumber:113,columnNumber:15}},s.createElement("input",{type:"radio",className:"pad-top",onMouseUp:this.focusCustomUrlInput,value:Q.Fp.CUSTOM,__source:{fileName:BU,lineNumber:114,columnNumber:17}}),s.createElement("span",{__source:{fileName:BU,lineNumber:118,columnNumber:17}},s.createElement("input",{type:"text",ref:e=>this._customPageRef=e,placeholder:(0,ue.Z)("Specific Page"),onChange:this._handleCustomUrlChange,value:this.state.customUrl,tabIndex:e[P.kTabsNewPageLink]===Q.Fp.CUSTOM?0:-1,__source:{fileName:BU,lineNumber:119,columnNumber:19}})))))))}}const WU=(0,bi.Z)(HU,VU);var zU="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPinning.jsx";const GU=[P.kTabsClosePinned],KU=st.Z.getEventHandler;class jU extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:zU,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:zU,lineNumber:27,columnNumber:9}},s.createElement("h3",{__source:{fileName:zU,lineNumber:28,columnNumber:11}},(0,ue.Z)("Pinned Tabs")),s.createElement(_i,{name:"closablePinnedTabs",value:this.props.prefValues[P.kTabsClosePinned],onChange:KU(P.kTabsClosePinned),__source:{fileName:zU,lineNumber:29,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:zU,lineNumber:32,columnNumber:13}},s.createElement("label",{__source:{fileName:zU,lineNumber:33,columnNumber:15}},s.createElement("input",{type:"radio",value:"off",__source:{fileName:zU,lineNumber:34,columnNumber:17}}),s.createElement("span",{__source:{fileName:zU,lineNumber:35,columnNumber:17}},(0,ue.Z)("Don’t Close Pinned Tabs")))),s.createElement("div",{className:"setting-single",__source:{fileName:zU,lineNumber:38,columnNumber:13}},s.createElement("label",{__source:{fileName:zU,lineNumber:39,columnNumber:15}},s.createElement("input",{type:"radio",value:"bury",__source:{fileName:zU,lineNumber:40,columnNumber:17}}),s.createElement("span",{__source:{fileName:zU,lineNumber:41,columnNumber:17}},(0,ue.Z)("Minimize Instead of Close")))),s.createElement("div",{className:"setting-single",__source:{fileName:zU,lineNumber:44,columnNumber:13}},s.createElement("label",{__source:{fileName:zU,lineNumber:45,columnNumber:15}},s.createElement("input",{type:"radio",value:"on",__source:{fileName:zU,lineNumber:46,columnNumber:17}}),s.createElement("span",{__source:{fileName:zU,lineNumber:47,columnNumber:17}},(0,ue.Z)("Close as Other Tabs")))))))}}const YU=(0,bi.Z)(jU,GU);var $U="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TabPositionPreview.jsx";function XU(){return XU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XU.apply(this,arguments)}const QU={top:(0,ue.Z)("Top"),right:(0,ue.Z)("Right"),bottom:(0,ue.Z)("Bottom"),left:(0,ue.Z)("Left")};class qU extends s.Component{render(){if(!this.props.position)return null;const e=this.props.position,t=QU[this.props.position],n=bn()({selectbox:!0,"selectbox-selected":this.props.selected}),i=(0,Xs.Z)(this.props,["position","vivaldiSettings"]);return s.createElement("button",XU({className:n,title:t},i,{__source:{fileName:$U,lineNumber:36,columnNumber:7}}),s.createElement("div",{className:"selectbox-image",__source:{fileName:$U,lineNumber:41,columnNumber:9}},s.createElement("svg",{viewBox:"0 0 96 76",xmlns:"http://www.w3.org/2000/svg",className:"tab-preview",__source:{fileName:$U,lineNumber:42,columnNumber:11}},"top"===e&&s.createElement("g",{__source:{fileName:$U,lineNumber:46,columnNumber:15}},s.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:$U,lineNumber:47,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h96v12H0z",__source:{fileName:$U,lineNumber:48,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 2h30v8H33zM64 2h30v8H64z",__source:{fileName:$U,lineNumber:49,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:$U,lineNumber:50,columnNumber:17}})),"right"===e&&s.createElement("g",{__source:{fileName:$U,lineNumber:54,columnNumber:15}},s.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:$U,lineNumber:55,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorBgDark",d:"M62 0h34v76H62z",__source:{fileName:$U,lineNumber:56,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-non-active-tab",d:"M64 11h30v8H64zM64 20h30v8H64z",__source:{fileName:$U,lineNumber:57,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M64 2h30v8H64z",__source:{fileName:$U,lineNumber:58,columnNumber:17}})),"bottom"===e&&s.createElement("g",{__source:{fileName:$U,lineNumber:62,columnNumber:15}},s.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:$U,lineNumber:63,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 64h96v12H0z",__source:{fileName:$U,lineNumber:64,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 66h30v8H33zM64 66h30v8H64z",__source:{fileName:$U,lineNumber:65,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 66h30v8H2z",__source:{fileName:$U,lineNumber:66,columnNumber:17}})),"left"===e&&s.createElement("g",{__source:{fileName:$U,lineNumber:70,columnNumber:15}},s.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:$U,lineNumber:71,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h34v76H0z",__source:{fileName:$U,lineNumber:72,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-non-active-tab",d:"M2 11h30v8H2zM2 20h30v8H2z",__source:{fileName:$U,lineNumber:73,columnNumber:17}}),s.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:$U,lineNumber:74,columnNumber:17}}))),s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:$U,lineNumber:78,columnNumber:11}},s.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:$U,lineNumber:81,columnNumber:13}}))),s.createElement("div",{className:"selectbox-title",__source:{fileName:$U,lineNumber:85,columnNumber:9}},t))}}const JU=qU;var eV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPosition.jsx";const tV="left",nV="right",sV="bottom",iV=[P.kKeyboardTabToAll,P.kTabsBarPosition,P.kTabsVisible],rV=st.Z.getEventHandler;class aV extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{st.Z.set(P.kTabsBarPosition,e)},(n="setTabPosition")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=this.props.prefValues,t=e[P.kTabsBarPosition];return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:eV,lineNumber:43,columnNumber:7}},s.createElement("div",{style:{display:"inline"},__source:{fileName:eV,lineNumber:44,columnNumber:9}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:eV,lineNumber:45,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:eV,lineNumber:46,columnNumber:13}},s.createElement("label",{__source:{fileName:eV,lineNumber:47,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:e[P.kTabsVisible],onChange:rV(P.kTabsVisible),__source:{fileName:eV,lineNumber:48,columnNumber:17}}),s.createElement("span",{__source:{fileName:eV,lineNumber:51,columnNumber:17}},(0,ue.Z)("radio","Show Tab Bar"))))),s.createElement("div",{className:"setting-group unlimited",__source:{fileName:eV,lineNumber:55,columnNumber:11}},s.createElement("div",{className:"setting-single",__source:{fileName:eV,lineNumber:56,columnNumber:13}},s.createElement("h3",{__source:{fileName:eV,lineNumber:57,columnNumber:15}},(0,ue.Z)("Tab Bar Position")),s.createElement(JU,{position:"top",selected:"top"===t,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"top"),__source:{fileName:eV,lineNumber:59,columnNumber:15}}),s.createElement(JU,{position:"left",selected:t===tV,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,tV),__source:{fileName:eV,lineNumber:64,columnNumber:15}}),s.createElement(JU,{position:"right",selected:t===nV,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,nV),__source:{fileName:eV,lineNumber:69,columnNumber:15}}),s.createElement(JU,{position:"bottom",selected:t===sV,tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,sV),__source:{fileName:eV,lineNumber:74,columnNumber:15}})))))}}const oV=(0,bi.Z)(aV,iV);var lV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabSelection.jsx";const cV=st.Z.getEventHandler,uV=[P.kTabsSelectionEnabled,P.kTabsSelectionIncludeActive];class mV extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:lV,lineNumber:27,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:lV,lineNumber:28,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:lV,lineNumber:29,columnNumber:11}},s.createElement("h3",{__source:{fileName:lV,lineNumber:30,columnNumber:13}},(0,ue.Z)("Tab Selection")),s.createElement("div",{className:"setting-single",__source:{fileName:lV,lineNumber:32,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("Select multiple tabs with Ctrl and Shift"),__source:{fileName:lV,lineNumber:33,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsSelectionEnabled],onChange:cV(P.kTabsSelectionEnabled),__source:{fileName:lV,lineNumber:37,columnNumber:17}}),s.createElement("span",{__source:{fileName:lV,lineNumber:41,columnNumber:17}},(0,ue.Z)("Enable Tab Selection")))),s.createElement("div",{className:"setting-single",__source:{fileName:lV,lineNumber:45,columnNumber:13}},s.createElement("label",{title:(0,ue.Z)("The active tab will always be part of the initial tab selection"),__source:{fileName:lV,lineNumber:46,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kTabsSelectionIncludeActive],onChange:cV(P.kTabsSelectionIncludeActive),__source:{fileName:lV,lineNumber:50,columnNumber:17}}),s.createElement("span",{__source:{fileName:lV,lineNumber:54,columnNumber:17}},(0,ue.Z)("Include Active Tab in Initial Selection")))))))}}const dV=(0,bi.Z)(mV,uV);var hV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabStacking.jsx";const pV=st.Z.getEventHandler,gV=[P.kTabsStackingAllowDnd,P.kTabsStackingAutoExpand,P.kTabsStackingMode,P.kTabsStackingOpenInCurrent,P.kTabsBarWidth,P.kTabsBarPosition,P.kTabsStackingPreferDotted];class bV extends s.Component{render(){const{prefValues:e}=this.props;return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:hV,lineNumber:39,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:hV,lineNumber:40,columnNumber:9}},s.createElement("h3",{__source:{fileName:hV,lineNumber:41,columnNumber:11}},(0,ue.Z)("Tab Stacking")),s.createElement("div",{className:"setting-single",__source:{fileName:hV,lineNumber:43,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:44,columnNumber:13}},s.createElement("input",{name:"tab-stack-style",type:"radio",value:"dotted",checked:"dotted"===e[P.kTabsStackingMode],onChange:pV(P.kTabsStackingMode),__source:{fileName:hV,lineNumber:45,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:52,columnNumber:15}},(0,ue.Z)("radio","Compact"))),s.createElement("div",{className:"dotted"===e[P.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hV,lineNumber:54,columnNumber:13}},s.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:n(18998)},__source:{fileName:hV,lineNumber:56,columnNumber:15}}))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:hV,lineNumber:64,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:65,columnNumber:13}},s.createElement("input",{name:"tab-stack-style",type:"radio",value:"substrip",checked:"substrip"===e[P.kTabsStackingMode],onChange:()=>{st.Z.set(P.kTabsBarWidth,260),st.Z.set(P.kTabsStackingMode,"substrip")},__source:{fileName:hV,lineNumber:66,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:74,columnNumber:15}},(0,ue.Z)("Two-Level"))),s.createElement("div",{className:"substrip"===e[P.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hV,lineNumber:76,columnNumber:13}},s.createElement("span",{className:e[P.kTabsStackingPreferDotted]?"image alternate":"image",dangerouslySetInnerHTML:{__html:n(86681)},__source:{fileName:hV,lineNumber:78,columnNumber:15}}))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:hV,lineNumber:86,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:87,columnNumber:13}},s.createElement("input",{type:"checkbox",disabled:"substrip"!==e[P.kTabsStackingMode],checked:e[P.kTabsStackingPreferDotted],onChange:pV(P.kTabsStackingPreferDotted),__source:{fileName:hV,lineNumber:88,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:94,columnNumber:15}},(0,ue.Z)("Use Compact Display Style")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:hV,lineNumber:97,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:98,columnNumber:13}},s.createElement("input",{name:"tab-stack-style",type:"radio",value:"accordion",checked:"accordion"===e[P.kTabsStackingMode],onChange:pV(P.kTabsStackingMode),__source:{fileName:hV,lineNumber:99,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:104,columnNumber:15}},(0,ue.Z)("Accordion"))),s.createElement("div",{className:"accordion"===e[P.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hV,lineNumber:106,columnNumber:13}},s.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:n(86484)},__source:{fileName:hV,lineNumber:108,columnNumber:15}}))),s.createElement("div",{className:"setting-single pad-left",__source:{fileName:hV,lineNumber:115,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:116,columnNumber:13}},s.createElement("input",{type:"checkbox",disabled:"accordion"!==e[P.kTabsStackingMode],checked:e[P.kTabsStackingAutoExpand],onChange:pV(P.kTabsStackingAutoExpand),__source:{fileName:hV,lineNumber:117,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:123,columnNumber:15}},(0,ue.Z)("Auto Expand")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:hV,lineNumber:126,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:127,columnNumber:13}},s.createElement("input",{name:"tab-stack-style",type:"radio",value:"off",checked:"off"===e[P.kTabsStackingMode],onChange:pV(P.kTabsStackingMode),__source:{fileName:hV,lineNumber:128,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:133,columnNumber:15}},(0,ue.Z)("Disable"))))),s.createElement("div",{className:"setting-group",__source:{fileName:hV,lineNumber:137,columnNumber:9}},s.createElement("h3",{__source:{fileName:hV,lineNumber:138,columnNumber:11}},(0,ue.Z)("Tab Stack Options")),s.createElement("div",{className:"setting-single",__source:{fileName:hV,lineNumber:140,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:141,columnNumber:13}},s.createElement("input",{type:"checkbox",disabled:"off"===e[P.kTabsStackingMode],checked:e[P.kTabsStackingOpenInCurrent],onChange:pV(P.kTabsStackingOpenInCurrent),__source:{fileName:hV,lineNumber:142,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:146,columnNumber:15}},(0,ue.Z)("Open Tabs in Current Tab Stack")))),s.createElement("div",{className:"setting-single",__source:{fileName:hV,lineNumber:150,columnNumber:11}},s.createElement("label",{__source:{fileName:hV,lineNumber:151,columnNumber:13}},s.createElement("input",{type:"checkbox",disabled:"off"===e[P.kTabsStackingMode],checked:e[P.kTabsStackingAllowDnd],onChange:pV(P.kTabsStackingAllowDnd),__source:{fileName:hV,lineNumber:152,columnNumber:15}}),s.createElement("span",{__source:{fileName:hV,lineNumber:157,columnNumber:15}},(0,ue.Z)("Allow Stacking by Drag and Drop"))))))}}const NV=(0,bi.Z)(bV,gV);var fV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabsSettingSection.jsx";function _V(){return _V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_V.apply(this,arguments)}class vV extends s.Component{render(){return s.createElement("span",{__source:{fileName:fV,lineNumber:23,columnNumber:7}},s.createElement(Cc,{categoryTitle:(0,ue.Z)("Tabs"),filter:this.props.filter,__source:{fileName:fV,lineNumber:24,columnNumber:9}},s.createElement(oV,_V({},this.props,{__source:{fileName:fV,lineNumber:25,columnNumber:11}})),s.createElement(WU,_V({},this.props,{__source:{fileName:fV,lineNumber:26,columnNumber:11}})),s.createElement(DU,_V({},this.props,{__source:{fileName:fV,lineNumber:27,columnNumber:11}})),s.createElement(NU,_V({},this.props,{__source:{fileName:fV,lineNumber:28,columnNumber:11}}))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Tab Display"),filter:this.props.filter,__source:{fileName:fV,lineNumber:31,columnNumber:9}},s.createElement(RU,_V({},this.props,{__source:{fileName:fV,lineNumber:32,columnNumber:11}}))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Tab Features"),filter:this.props.filter,__source:{fileName:fV,lineNumber:35,columnNumber:9}},s.createElement(CU,_V({},this.props,{__source:{fileName:fV,lineNumber:36,columnNumber:11}})),s.createElement(dV,_V({},this.props,{__source:{fileName:fV,lineNumber:37,columnNumber:11}})),s.createElement(NV,_V({},this.props,{__source:{fileName:fV,lineNumber:38,columnNumber:11}})),s.createElement(YU,_V({},this.props,{__source:{fileName:fV,lineNumber:39,columnNumber:11}})),s.createElement(kU,_V({},this.props,{__source:{fileName:fV,lineNumber:40,columnNumber:11}}))))}}const EV=vV;var CV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeEditorColorPicker.jsx";function wV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class yV extends s.PureComponent{constructor(...e){super(...e),wV(this,"state",{hexString:void 0}),wV(this,"delayedSetColor",(0,vb.default)((e=>{this.props.setColor(e)}),DV,{trailing:!0,leading:!0})),wV(this,"updateHexString",(e=>{const t="#"+e.currentTarget.value;7===t.length&&to().valid(t)?(this.props.setColor(t),this.setState({hexString:void 0})):this.setState({hexString:t})}))}render(){return s.createElement("div",{className:"ThemeEditorColorPicker",__source:{fileName:CV,lineNumber:39,columnNumber:12}},this.props.label&&s.createElement("div",{className:"ThemeEditorColorPicker-Label",__source:{fileName:CV,lineNumber:41,columnNumber:9}},this.props.label),s.createElement("input",{type:"color",className:"ThemeEditorColorPicker-ColorInput",disabled:this.props.disabled,value:this.props.color,onChange:e=>this.delayedSetColor(e.currentTarget.value),__source:{fileName:CV,lineNumber:45,columnNumber:7}}),s.createElement("input",{className:"ThemeEditorColorPicker-HexSymbol",disabled:!0,type:"text",value:"#",__source:{fileName:CV,lineNumber:52,columnNumber:7}}),s.createElement("input",{className:"ThemeEditorColorPicker-HexInput",type:"text",disabled:this.props.disabled,value:(this.state.hexString||this.props.color).substring(1),onChange:this.updateHexString,__source:{fileName:CV,lineNumber:57,columnNumber:7}}))}}const SV=yV;var TV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themes\\ThemePreview.jsx";const kV=[P.kThemeScheduleEnabled,P.kThemeScheduleOS,P.kThemeScheduleTimeline,P.kThemesSystem,P.kThemesUser,P.kThemesCurrent,P.kThemesCurrentPrivate];class IV extends s.PureComponent{constructor(e){super(e),this.state={style:no.Z.createStyle(this.props.theme)};const{backgroundImage:t,backgroundPosition:n}=this.props.theme;no.Z.getImageVars(t,n).then((e=>{e=(0,Om.Z)(e),Object.assign(e,no.Z.createStyle(this.props.theme)),this.setState({style:e})}))}componentDidUpdate(e,t){if(!(0,nd.default)(e.theme,this.props.theme)){const{backgroundImage:e,backgroundPosition:t}=this.props.theme;no.Z.getImageVars(e,t).then((e=>{e=(0,Om.Z)(e),Object.assign(e,no.Z.createStyle(this.props.theme)),this.setState({style:e})}))}}render(){const e=this.props.theme.id,t=this.props.prefValues[P.kThemeScheduleEnabled],n=this.props.prefValues[P.kThemeScheduleOS],i=this.props.prefValues[P.kThemeScheduleTimeline],r=no.Z.createClassnames(this.props.theme,this.state.style),a=bn()("ThemePreview",{"ThemePreview--Selected":this.props.isCurrent&&this.props.themeChangeCallback}),o=this.props.classNames?this.props.classNames:a;return s.createElement("div",{className:o,__source:{fileName:TV,lineNumber:95,columnNumber:12}},s.createElement("button",{disabled:!this.props.themeChangeCallback,onClick:this.props.themeChangeCallback?()=>{const e=this.props.theme.id;Qo.Z.setTheme(e),this.props.themeChangeCallback&&this.props.themeChangeCallback(e)}:null,className:bn()("ThemePreview-Image",r),style:this.state.style,__source:{fileName:TV,lineNumber:98,columnNumber:7}},s.createElement("div",{className:"ThemePreview-TabBar",__source:{fileName:TV,lineNumber:111,columnNumber:9}},s.createElement("div",{className:"ThemePreview-TabBar-Tab ThemePreview-TabBar-Tab--Active",__source:{fileName:TV,lineNumber:112,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-TabBar-Tab",__source:{fileName:TV,lineNumber:113,columnNumber:11}})),s.createElement("div",{className:"ThemePreview-AddressBar",__source:{fileName:TV,lineNumber:115,columnNumber:9}},s.createElement("div",{className:"ThemePreview-AddressBar-Icon ThemePreview-AddressBar-Icon--Active",__source:{fileName:TV,lineNumber:116,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-AddressBar-Icon ThemePreview-AddressBar-Icon--Active",__source:{fileName:TV,lineNumber:117,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-AddressBar-Icon",__source:{fileName:TV,lineNumber:118,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-AddressBar-Input",__source:{fileName:TV,lineNumber:119,columnNumber:11}})),s.createElement("div",{className:"ThemePreview-Panel",__source:{fileName:TV,lineNumber:121,columnNumber:9}},s.createElement("div",{className:"ThemePreview-Panel-Item ThemePreview-Panel-Item--Active",__source:{fileName:TV,lineNumber:122,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-Panel-Item",__source:{fileName:TV,lineNumber:123,columnNumber:11}}),s.createElement("div",{className:"ThemePreview-Panel-Item",__source:{fileName:TV,lineNumber:124,columnNumber:11}}))),(this.props.themeChangeCallback||this.props.welcomePage)&&s.createElement("div",{className:"ThemePreview-Label",__source:{fileName:TV,lineNumber:128,columnNumber:9}},this.props.theme.name),this.props.themeChangeCallback&&!this.props.welcomePage&&s.createElement("div",{className:"ThemePreview-Label-Meta",__source:{fileName:TV,lineNumber:134,columnNumber:9}},this.props.theme.id===this.props.prefValues[P.kThemesCurrentPrivate]&&s.createElement("span",{__source:{fileName:TV,lineNumber:136,columnNumber:13}},(0,ue.Z)("Private")),"system"===t&&e===n.light&&s.createElement("span",{__source:{fileName:TV,lineNumber:139,columnNumber:13}},(0,ue.Z)("theme","Light")),"system"===t&&e===n.dark&&s.createElement("span",{__source:{fileName:TV,lineNumber:142,columnNumber:13}},(0,ue.Z)("theme","Dark")),"timeline"===t&&i.some((t=>t.themeId===e))&&s.createElement("span",{__source:{fileName:TV,lineNumber:145,columnNumber:13}},(0,ue.Z)("Schedule"))),!this.props.isSystem&&this.props.onConfirmDeletion&&s.createElement("button",{className:"ThemePreview-Delete",onClick:()=>{void 0!==this.props.onConfirmDeletion&&this.props.onConfirmDeletion(e)},dangerouslySetInnerHTML:{__html:cn.uN0},__source:{fileName:TV,lineNumber:151,columnNumber:9}}))}}const AV=(0,bi.Z)(IV,kV);var ZV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeEditor.jsx";function PV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const DV=50,MV="chrome://vivaldi-data/desktop-image/0",OV=[P.kSystemAccentColor,P.kSystemHasDesktopWallpaperProtocol,P.kThemesSystem,P.kThemesUser],xV={colorBg:(0,ue.Z)("Background"),colorFg:(0,ue.Z)("Foreground"),colorHighlightBg:(0,ue.Z)("Highlight"),colorAccentBg:(0,ue.Z)("Accent"),colorWindowBg:(0,ue.Z)("background color","Window")},LV={"#EDEEF2":(0,ue.Z)("background","Light"),"#1D1E21":(0,ue.Z)("background","Dark"),"#BBDFEF":(0,ue.Z)("background","Blue"),"#fce370":(0,ue.Z)("background","Yellow"),"#a4edd9":(0,ue.Z)("background","Green"),"#ffb6c9":(0,ue.Z)("background","Pink"),"#A9C8B3":(0,ue.Z)("background","Soft Green"),"#BEB0CB":(0,ue.Z)("background","Purple"),"#EFE5DD":(0,ue.Z)("background","Sand"),"#FA7C68":(0,ue.Z)("background","Orange")},RV={"/resources/4-0-wallpaper-light.jpg":(0,ue.Z)("Blurred Circle Light"),"/resources/4-0-wallpaper-dark.jpg":(0,ue.Z)("Blurred Circle Dark"),"/resources/bg_alt_7.jpg":(0,ue.Z)("Human"),"/resources/bg_alt_1.jpg":(0,ue.Z)("Pink Cloud"),"/resources/bg_alt_6.webp":(0,ue.Z)("Blueprint"),"/resources/bg_alt_4.webp":(0,ue.Z)("Beach"),"/resources/bg_geometric_1.jpg":(0,ue.Z)("Purple Rain")},BV=(0,vb.default)(((e,t)=>{st.Z.set(e,t)}),DV,{trailing:!0,leading:!0});class FV extends s.PureComponent{constructor(...e){super(...e),PV(this,"_isIMEOpen",!1),PV(this,"colorId",b.Z.utilities.generateGUID()),PV(this,"backgroundId",b.Z.utilities.generateGUID()),PV(this,"settingsId",b.Z.utilities.generateGUID()),PV(this,"state",{backgroundType:"image",baseBgShowPicker:!1,baseFgShowPicker:!1,highlightBgShowPicker:!1,accentBgShowPicker:!1,view:"colors"})}render(){const{theme:e,isCurrent:t,isSystem:n,prefValues:i}=this.props,r=n?P.kThemesSystem:P.kThemesUser,a=i[P.kThemesSystem].concat(i[P.kThemesUser]),o=(0,Om.Z)(i[r]),l=o.findIndex((t=>t.id===e.id)),c=a.reduce(((e,t)=>{const n=t.backgroundImage,s=[...Object.keys(e),...Object.keys(RV)];return n&&!s.includes(n)&&n!==MV&&(e[n]=(0,ue.Z)("From $1",[t.name])),e}),{}),u={...RV,...c};return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:ZV,lineNumber:142,columnNumber:5}},s.createElement("div",{className:"ThemeEditor",__source:{fileName:ZV,lineNumber:143,columnNumber:7}},s.createElement("div",{className:"ThemeEditor-Header",__source:{fileName:ZV,lineNumber:145,columnNumber:9}},s.createElement("div",{className:"ThemeEditor-HeaderBasics",__source:{fileName:ZV,lineNumber:147,columnNumber:11}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:ZV,lineNumber:149,columnNumber:13}},s.createElement("select",{value:e.id,onChange:e=>{this.props.themeChangeCallback&&this.props.themeChangeCallback(e.currentTarget.value)},__source:{fileName:ZV,lineNumber:150,columnNumber:15}},a.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:ZV,lineNumber:159,columnNumber:19}},e.name)))),s.createElement("input",{type:"button",className:"primary",disabled:t,onClick:()=>Qo.Z.setTheme(e.id),value:(0,ue.Z)("Enable"),__source:{fileName:ZV,lineNumber:163,columnNumber:15}}),n&&s.createElement("input",{type:"button",className:"danger",disabled:no.Z.isSystemThemeModified(no.Z.getThemeWithFallback(e.id)),onClick:()=>Qo.Z.revertSystemTheme(e.id),value:(0,ue.Z)("Reset"),__source:{fileName:ZV,lineNumber:172,columnNumber:17}})),s.createElement("div",{className:"ThemeEditor-Name",__source:{fileName:ZV,lineNumber:182,columnNumber:13}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:183,columnNumber:15}},(0,ue.Z)("theme","Name")),s.createElement("input",{className:"theme-name",type:"text",disabled:n,ref:"themeNameInput",onCompositionStart:()=>this._isIMEOpen=!0,onCompositionEnd:e=>{this._isIMEOpen=!1,o[l].name=e.target.value,st.Z.set(r,o)},onChange:e=>{o[l].name=e.target.value,!this._isIMEOpen&&st.Z.set(r,o)},defaultValue:e.name,key:e.id,__source:{fileName:ZV,lineNumber:184,columnNumber:15}}))),s.createElement("div",{__source:{fileName:ZV,lineNumber:206,columnNumber:11}},s.createElement(AV,{isCurrent:t,isSystem:n,key:e.id,theme:e,__source:{fileName:ZV,lineNumber:207,columnNumber:13}}))),s.createElement(jF,{icons:[cn.v5q.small,cn.yhu.small,cn.d$r.small],__source:{fileName:ZV,lineNumber:216,columnNumber:9}},s.createElement("div",{id:this.colorId,label:(0,ue.Z)("Colors"),__source:{fileName:ZV,lineNumber:217,columnNumber:11}},s.createElement("div",{className:"ThemeEditorColors",__source:{fileName:ZV,lineNumber:219,columnNumber:13}},s.createElement("div",{className:"ThemeEditorColors-Base",__source:{fileName:ZV,lineNumber:220,columnNumber:15}},["colorBg","colorFg"].map((t=>s.createElement(SV,{key:e.id+t,label:xV[t],color:e[t],setColor:e=>{o[l][t]=to()(e).hex(),st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:223,columnNumber:26}})))),s.createElement("div",{className:"ThemeEditorColors-Accent",__source:{fileName:ZV,lineNumber:234,columnNumber:15}},["colorHighlightBg","colorAccentBg"].map((t=>s.createElement(SV,{key:e.id+t,label:xV[t],disabled:["colorHighlightBg"].includes(t)&&e.preferSystemAccent,color:e[t],setColor:e=>{o[l][t]=to()(e).hex(),st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:236,columnNumber:26}}))),s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:251,columnNumber:17}},s.createElement("label",{__source:{fileName:ZV,lineNumber:252,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.preferSystemAccent,onChange:e=>{o[l].preferSystemAccent=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:253,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:259,columnNumber:21}},(0,ue.Z)("Prefer System Color")))))),s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:ZV,lineNumber:269,columnNumber:13}},s.createElement("div",{className:"setting-group",__source:{fileName:ZV,lineNumber:271,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:273,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:274,columnNumber:19}},(0,ue.Z)("Color Overrides")),s.createElement("label",{__source:{fileName:ZV,lineNumber:275,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.accentFromPage,onChange:e=>{o[l].accentFromPage=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:276,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:282,columnNumber:21}},(0,ue.Z)("Accent from Page")))),s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:287,columnNumber:17}},s.createElement("label",{__source:{fileName:ZV,lineNumber:288,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.accentOnWindow,onChange:e=>{o[l].accentOnWindow=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:289,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:295,columnNumber:21}},(0,ue.Z)("Accent on Window")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:ZV,lineNumber:301,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:302,columnNumber:19}},(0,ue.Z)("Background Window Behavior")),s.createElement("label",{__source:{fileName:ZV,lineNumber:303,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.dimBlurred,onChange:e=>{o[l].dimBlurred=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:304,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:310,columnNumber:21}},(0,ue.Z)("Fade Foreground Colors"))))),s.createElement("div",{className:"setting-group",__source:{fileName:ZV,lineNumber:318,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:319,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:320,columnNumber:19}},(0,ue.Z)("Contrast")),s.createElement("label",{__source:{fileName:ZV,lineNumber:321,columnNumber:19}},s.createElement("input",{type:"range",min:-10,max:20,step:1,onChange:e=>{o[l].contrast=Number(e.target.value),BV(r,o)},value:e.contrast,__source:{fileName:ZV,lineNumber:322,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:332,columnNumber:21}},e.contrast))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:ZV,lineNumber:337,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:338,columnNumber:19}},(0,ue.Z)("Limit Accent Color Saturation")),s.createElement("label",{__source:{fileName:ZV,lineNumber:339,columnNumber:19}},s.createElement("input",{type:"range",title:(0,ue.Z)("Limit accent color saturation"),min:.2,max:1,step:.05,value:e.accentSaturationLimit,onChange:e=>{o[l].accentSaturationLimit=Number(e.target.value),BV(r,o)},__source:{fileName:ZV,lineNumber:340,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:351,columnNumber:21}},`${Math.floor(100*e.accentSaturationLimit)}%`)))))),s.createElement("div",{id:this.backgroundId,label:(0,ue.Z)("Background"),__source:{fileName:ZV,lineNumber:361,columnNumber:11}},s.createElement("div",{className:"ThemeEditor-BackgroundMeta",__source:{fileName:ZV,lineNumber:363,columnNumber:13}},s.createElement("div",{className:"ThemeEditor-BackgroundMetaBasic",__source:{fileName:ZV,lineNumber:365,columnNumber:15}},s.createElement("span",{__source:{fileName:ZV,lineNumber:366,columnNumber:17}},(0,ue.Z)("Type:")),s.createElement("select",{value:this.state.backgroundType,onChange:e=>{const t=e.target.value;this.setState({backgroundType:t})},__source:{fileName:ZV,lineNumber:369,columnNumber:17}},s.createElement("option",{value:"image",__source:{fileName:ZV,lineNumber:376,columnNumber:19}},(0,ue.Z)("theme background","Image")),s.createElement("option",{value:"color",__source:{fileName:ZV,lineNumber:379,columnNumber:19}},(0,ue.Z)("theme background","Color"))),"color"===this.state.backgroundType&&s.createElement(s.Fragment,null,s.createElement("span",{__source:{fileName:ZV,lineNumber:385,columnNumber:19}},(0,ue.Z)("Custom Color")),s.createElement(SV,{color:e.colorWindowBg,setColor:e=>{o[l].colorWindowBg=to()(e).hex(),st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:388,columnNumber:19}})),"image"===this.state.backgroundType&&s.createElement(s.Fragment,null,s.createElement("select",{value:e.backgroundPosition,onChange:e=>{o[l].backgroundPosition=e.target.value,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:398,columnNumber:19}},s.createElement("option",{value:"stretch",__source:{fileName:ZV,lineNumber:405,columnNumber:21}},(0,ue.Z)("Stretch to Fit")),s.createElement("option",{value:"repeat",__source:{fileName:ZV,lineNumber:408,columnNumber:21}},(0,ue.Z)("verb","Repeat")),s.createElement("option",{value:"center",__source:{fileName:ZV,lineNumber:411,columnNumber:21}},(0,ue.Z)("Center"))),this.props.prefValues[P.kSystemHasDesktopWallpaperProtocol]&&s.createElement("input",{className:"ThemeEditor-BackgroundCustomButton",type:"button",disabled:e.backgroundImage===MV,value:(0,ue.Z)("Use Desktop Image"),onClick:()=>{o[l].backgroundImage=MV,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:418,columnNumber:21}}),s.createElement("input",{className:"ThemeEditor-BackgroundCustomButton",type:"button",value:(0,ue.Z)("Select Image..."),onClick:()=>{b.Z.utilities.selectLocalImage({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Background Image"),themeId:o[l].id})},__source:{fileName:ZV,lineNumber:430,columnNumber:19}}))),"color"===this.state.backgroundType&&e.backgroundImage&&e.colorWindowBg&&s.createElement("div",{className:"ThemeEditor-BackgroundMetaInfoBar",__source:{fileName:ZV,lineNumber:450,columnNumber:17}},s.createElement("span",{__source:{fileName:ZV,lineNumber:451,columnNumber:19}},(0,ue.Z)("This theme has a background image set that may obscure the color.")),s.createElement("input",{type:"button",value:(0,ue.Z)("Clear Image"),onClick:()=>{o[l].backgroundImage="",st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:454,columnNumber:19}}))),s.createElement("div",{className:"TabbedView--Padded ThemeEditor-Background",__source:{fileName:ZV,lineNumber:467,columnNumber:13}},s.createElement("div",{className:"ThemeEditor-BackgroundList",__source:{fileName:ZV,lineNumber:469,columnNumber:15}},"color"===this.state.backgroundType&&s.createElement(s.Fragment,null,s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":!e.colorWindowBg}),onClick:()=>{o[l].colorWindowBg="",st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:472,columnNumber:19}},s.createElement("div",{className:"selectbox-image",style:{backgroundColor:e.colorBg},dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZV,lineNumber:481,columnNumber:21}}),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZV,lineNumber:485,columnNumber:21}},(0,ue.Z)("No color"))),Object.keys(LV).map((t=>s.createElement("button",{key:t,title:LV[t],className:bn()("selectbox",{"selectbox-selected":t===e.colorWindowBg}),onClick:e=>{o[l].colorWindowBg=t,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:490,columnNumber:28}},s.createElement("div",{className:"selectbox-image",style:{backgroundColor:t},dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZV,lineNumber:501,columnNumber:23}}),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZV,lineNumber:505,columnNumber:23}},LV[t]))))),"image"===this.state.backgroundType&&s.createElement(s.Fragment,null,s.createElement("button",{className:bn()("selectbox",{"selectbox-selected":!e.backgroundImage}),onClick:e=>{o[l].backgroundImage="",st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:515,columnNumber:19}},s.createElement("div",{className:"selectbox-image",style:{backgroundColor:e.colorWindowBg},dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZV,lineNumber:524,columnNumber:21}}),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZV,lineNumber:528,columnNumber:21}},(0,ue.Z)("No image"))),Object.keys(u).map((t=>s.createElement("button",{key:t,title:u[t],className:bn()("selectbox",{"selectbox-selected":t===e.backgroundImage}),onClick:e=>{o[l].backgroundImage=t,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:533,columnNumber:57}},s.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${t})`},dangerouslySetInnerHTML:{__html:cn.ziY},__source:{fileName:ZV,lineNumber:544,columnNumber:21}}),s.createElement("div",{className:"selectbox-title",__source:{fileName:ZV,lineNumber:548,columnNumber:21}},u[t])))))))),s.createElement("div",{id:this.settingsId,label:(0,ue.Z)("Settings"),__source:{fileName:ZV,lineNumber:561,columnNumber:11}},s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:ZV,lineNumber:563,columnNumber:13}},s.createElement("div",{className:"setting-group",__source:{fileName:ZV,lineNumber:565,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:566,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:567,columnNumber:19}},(0,ue.Z)("Blur")),s.createElement("label",{__source:{fileName:ZV,lineNumber:568,columnNumber:19}},s.createElement("input",{type:"range",title:(0,ue.Z)("Blur"),min:0,max:10,step:1,value:e.blur,onChange:e=>{o[l].blur=Number(e.target.value),BV(r,o)},__source:{fileName:ZV,lineNumber:569,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:580,columnNumber:21}},e.blur))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:ZV,lineNumber:586,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:587,columnNumber:19}},(0,ue.Z)("Transparency")),s.createElement("label",{__source:{fileName:ZV,lineNumber:588,columnNumber:19}},s.createElement("input",{type:"range",title:(0,ue.Z)("Alpha"),min:.75,max:1,step:.01,value:e.alpha,onChange:e=>{o[l].alpha=Number(e.target.value),BV(r,o)},__source:{fileName:ZV,lineNumber:589,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:600,columnNumber:21}},100*e.alpha+"%"))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:ZV,lineNumber:603,columnNumber:17}},s.createElement("label",{__source:{fileName:ZV,lineNumber:604,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.transparencyTabBar,onChange:e=>{o[l].transparencyTabBar=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:605,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:611,columnNumber:21}},(0,ue.Z)("Transparent Tab Bar")))),s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:616,columnNumber:17}},s.createElement("label",{__source:{fileName:ZV,lineNumber:617,columnNumber:19}},s.createElement("input",{type:"checkbox",checked:e.transparencyTabs,onChange:e=>{o[l].transparencyTabs=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:618,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:624,columnNumber:21}},(0,ue.Z)("Transparent Background Tabs"))))),s.createElement("div",{className:"setting-group",__source:{fileName:ZV,lineNumber:633,columnNumber:15}},s.createElement("div",{className:"setting-single",__source:{fileName:ZV,lineNumber:635,columnNumber:19}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:636,columnNumber:21}},(0,ue.Z)("Scrollbar Style")),s.createElement("label",{__source:{fileName:ZV,lineNumber:637,columnNumber:21}},s.createElement("input",{type:"checkbox",checked:e.simpleScrollbar,onChange:e=>{o[l].simpleScrollbar=e.target.checked,st.Z.set(r,o)},__source:{fileName:ZV,lineNumber:638,columnNumber:23}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:646,columnNumber:23}},(0,ue.Z)("Use Simple Scrollbars")))),s.createElement("div",{className:bn()("setting-single",{"pad-top":!0}),__source:{fileName:ZV,lineNumber:651,columnNumber:17}},s.createElement("h3",{__source:{fileName:ZV,lineNumber:655,columnNumber:19}},(0,ue.Z)("Corner Rounding")),s.createElement("label",{__source:{fileName:ZV,lineNumber:656,columnNumber:19}},s.createElement("input",{type:"range",title:(0,ue.Z)("Adjust interface corner rounding"),min:-1,max:14,value:e.radius,onChange:e=>{o[l].radius=Number(e.target.value),BV(r,o)},__source:{fileName:ZV,lineNumber:657,columnNumber:21}}),s.createElement("span",{__source:{fileName:ZV,lineNumber:667,columnNumber:21}},-1===e.radius?(0,ue.Z)("Disabled"):e.radius)))))))))}}PV(FV,"contextType",Vs.Z);const UV=(0,bi.Z)(FV,OV);var VV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeScheduling.jsx";function HV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const WV=[P.kThemeScheduleEnabled,P.kThemeScheduleOS,P.kThemeScheduleTimeline,P.kThemesSystem,P.kThemesUser],zV=st.Z.getEventHandler;class GV extends s.PureComponent{constructor(e){super(e),HV(this,"updateNow",(()=>{this.setState({now:new Date})})),HV(this,"startPointerReschedule",((e,t)=>{t.persist(),t.preventDefault(),this.setState({dragging:!0,selectedScheduleId:e},(()=>{this.handlePointerReschedule(t)}))})),HV(this,"pointerReschedule",(e=>{e.preventDefault(),this.state.dragging&&this.handlePointerReschedule(e)})),HV(this,"stopPointerReschedule",(()=>{if(this.state.dragging){this.setState({dragging:!1});const e=no.Z.getTimerByDate(new Date,"current");e&&Qo.Z.setTheme(e.themeId)}})),HV(this,"handlePointerReschedule",(e=>{const t=this.refs.scheduleTimeline.getBoundingClientRect(),n=e.clientX-t.left,s=5*Math.floor(1439/t.width*n/5);if(s<0||s>1439)return;const i=(0,Om.Z)(this.props.prefValues[P.kThemeScheduleTimeline]),r=i.findIndex((e=>e.id===this.state.selectedScheduleId));i[r].hours=Math.floor(s/60),i[r].minutes=s-60*i[r].hours,st.Z.set(P.kThemeScheduleTimeline,i)})),HV(this,"addSchedule",(()=>{const e=(0,Om.Z)(this.props.prefValues[P.kThemeScheduleTimeline]),t=b.Z.utilities.generateGUID();e.push({id:t,minutes:0,hours:12,themeId:no.Z.getDefaultTheme().id,undeletable:!1}),st.Z.set(P.kThemeScheduleTimeline,e),this.setState({selectedScheduleId:t})})),HV(this,"removeSelectedScheduleOnDelete",(e=>{["KeyCode.KEY_BACK_SPACE","KeyCode.KEY_DELETE"].includes(e.keyCode)&&this.removeSelectedSchedule()})),HV(this,"handleKeyboardReschedule",((e,t)=>{if([$s.Z.KEY_LEFT,$s.Z.KEY_RIGHT].includes(t.keyCode)){const n=(0,Om.Z)(this.props.prefValues[P.kThemeScheduleTimeline]),s=n.findIndex((t=>t.id===e));let i=60*n[s].hours+n[s].minutes;t.shiftKey?t.keyCode===$s.Z.KEY_LEFT&&i>29?i-=30:t.keyCode===$s.Z.KEY_RIGHT&&i<1409&&(i+=30):t.keyCode===$s.Z.KEY_LEFT&&i>4?i-=5:t.keyCode===$s.Z.KEY_RIGHT&&i<1434&&(i+=5),n[s].hours=Math.floor(i/60),n[s].minutes=i-60*n[s].hours,this.setState({selectedScheduleId:e}),st.Z.set(P.kThemeScheduleTimeline,n)}else[$s.Z.KEY_BACK_SPACE,$s.Z.KEY_DELETE].includes(t.keyCode)&&this.removeSelectedSchedule()})),HV(this,"removeSelectedSchedule",(()=>{const e=(0,Om.Z)(this.props.prefValues[P.kThemeScheduleTimeline]),t=e.findIndex((e=>e.id===this.state.selectedScheduleId));e[t].undeletable||(e.splice(t,1),st.Z.set(P.kThemeScheduleTimeline,e),this.setState({selectedScheduleId:void 0}))})),HV(this,"updateOSTheme",(e=>{const t=this.props.prefValues[P.kThemeScheduleOS];st.Z.set(P.kThemeScheduleOS,{...t,[e.target.name]:e.target.value})})),HV(this,"indicatorFocus",((e,t)=>{t.stopPropagation(),this.setState({selectedScheduleId:e})})),HV(this,"indicatorBlur",(()=>{this.setState({selectedScheduleId:void 0})})),this.state={dragging:!1,now:new Date,selectedScheduleId:e.prefValues[P.kThemeScheduleTimeline][0].id}}componentDidMount(){this.context.addEventListener("pointerup",this.stopPointerReschedule),this.timer=setInterval(this.updateNow,6e4)}componentWillUnmount(){clearInterval(this.timer),this.context.removeEventListener("pointerup",this.stopPointerReschedule)}render(){const e=(0,Om.Z)(this.props.prefValues[P.kThemeScheduleTimeline]),t=this.state.now,n=(t.getMinutes()+60*t.getHours())/14.4+"%",{prefValues:i}=this.props,r=i[P.kThemesSystem].concat(i[P.kThemesUser]),a="timeline"!==i[P.kThemeScheduleEnabled],o="system"!==i[P.kThemeScheduleEnabled],l=!1===e.find((e=>e.id===this.state.selectedScheduleId))?.undeletable;return e.sort(((e,t)=>60*e.hours+e.minutes-(60*t.hours+t.minutes))),e.unshift(e[e.length-1]),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Updates Themes According To"),className:"setting-group unlimited",filter:this.props.filter,onPointerMove:this.pointerReschedule,__source:{fileName:VV,lineNumber:252,columnNumber:7}},s.createElement("div",{className:"setting-group-double",__source:{fileName:VV,lineNumber:259,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:VV,lineNumber:261,columnNumber:11}},s.createElement("label",{__source:{fileName:VV,lineNumber:262,columnNumber:13}},s.createElement("input",{type:"radio",value:"off",checked:"off"===i[P.kThemeScheduleEnabled],onChange:zV(P.kThemeScheduleEnabled),__source:{fileName:VV,lineNumber:263,columnNumber:15}}),s.createElement("span",{__source:{fileName:VV,lineNumber:269,columnNumber:15}},(0,ue.Z)("No Schedule")))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:VV,lineNumber:273,columnNumber:11}},s.createElement("label",{__source:{fileName:VV,lineNumber:274,columnNumber:13}},s.createElement("input",{type:"radio",value:"system",checked:"system"===i[P.kThemeScheduleEnabled],onChange:zV(P.kThemeScheduleEnabled),__source:{fileName:VV,lineNumber:275,columnNumber:15}}),s.createElement("span",{__source:{fileName:VV,lineNumber:281,columnNumber:15}},(0,ue.Z)("Operating System")))),s.createElement("div",{className:"setting-single",__source:{fileName:VV,lineNumber:285,columnNumber:11}},s.createElement("label",{__source:{fileName:VV,lineNumber:286,columnNumber:13}},s.createElement("span",{__source:{fileName:VV,lineNumber:287,columnNumber:15}},(0,ue.Z)("theme","Light")),s.createElement("select",{name:"light",value:i[P.kThemeScheduleOS].light,disabled:o,onChange:this.updateOSTheme,__source:{fileName:VV,lineNumber:288,columnNumber:15}},r.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:VV,lineNumber:294,columnNumber:26}},e.name))))),s.createElement("label",{__source:{fileName:VV,lineNumber:301,columnNumber:13}},s.createElement("span",{__source:{fileName:VV,lineNumber:302,columnNumber:15}},(0,ue.Z)("theme","Dark")),s.createElement("select",{name:"dark",value:i[P.kThemeScheduleOS].dark,disabled:o,onChange:this.updateOSTheme,__source:{fileName:VV,lineNumber:303,columnNumber:15}},r.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:VV,lineNumber:309,columnNumber:26}},e.name)))))),s.createElement("div",{className:"setting-single",__source:{fileName:VV,lineNumber:317,columnNumber:11}},s.createElement("label",{__source:{fileName:VV,lineNumber:318,columnNumber:13}},s.createElement("input",{type:"radio",value:"timeline",checked:"timeline"===i[P.kThemeScheduleEnabled],onChange:zV(P.kThemeScheduleEnabled),__source:{fileName:VV,lineNumber:319,columnNumber:15}}),s.createElement("span",{__source:{fileName:VV,lineNumber:325,columnNumber:15}},(0,ue.Z)("Manual Schedule"))))),s.createElement("div",{className:"theme-schedule-timeline"+(a?" schedule-disabled":""),ref:"scheduleTimeline",__source:{fileName:VV,lineNumber:330,columnNumber:9}},!a&&s.createElement("span",{className:"theme-schedule-now-indicator",style:{left:n},__source:{fileName:VV,lineNumber:334,columnNumber:13}},(0,ue.Z)("Now")),e.map(((t,n)=>{const i=0===n?0:(60*t.hours+t.minutes)/14.4,o=e[n+1],l=o?60*o.hours+o.minutes:1440,c=String(t.hours).padStart(2,"0"),u=String(t.minutes).padStart(2,"0"),m=no.Z.getThemeWithFallback(t.themeId),d=go.ZP.forTheme(m),h=no.Z.convertColorsToVariables(d),p=this.state.selectedScheduleId===t.id;return s.createElement("div",{key:n,className:bn()("theme-schedule-timeslice",{"timeslice-selected":!a&&p}),style:{width:l/14.4-i+"%",left:`${i}%`},__source:{fileName:VV,lineNumber:356,columnNumber:15}},0!==n&&s.createElement(s.Fragment,null,!a&&s.createElement("div",{title:m.name,className:"timeslice-bubble",onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur,disabled:a,onPointerDown:e=>this.startPointerReschedule(t.id,e),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:VV,lineNumber:366,columnNumber:21}},s.createElement("div",{__source:{fileName:VV,lineNumber:377,columnNumber:23}},`${c}:${u}`)),s.createElement("div",{className:"theme-schedule-timeslice-indicator",__source:{fileName:VV,lineNumber:380,columnNumber:19}},s.createElement("input",{type:"button",className:"theme-schedule-timeslice-draghandle",title:m.name,onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur,disabled:a,onPointerDown:e=>this.startPointerReschedule(t.id,e),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:VV,lineNumber:381,columnNumber:21}}))),s.createElement("select",{disabled:a,value:t.themeId,style:h,title:m.name,onFocus:this.indicatorFocus.bind(this,t.id),onKeyDown:this.removeSelectedScheduleOnDelete,onChange:e=>function(e,t){const n=(0,Om.Z)(A.ZP.get(P.kThemeScheduleTimeline)),s=n.findIndex((t=>t.id===e));n[s].themeId=t,console.log(n),st.Z.set(P.kThemeScheduleTimeline,n)}(t.id,e.target.value),__source:{fileName:VV,lineNumber:396,columnNumber:17}},r.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:VV,lineNumber:407,columnNumber:28}},e.name)))))}))),s.createElement("div",{className:"toolbar toolbar-default toolbar-group",__source:{fileName:VV,lineNumber:417,columnNumber:9}},s.createElement("div",{className:"toolbar-group",__source:{fileName:VV,lineNumber:418,columnNumber:11}},s.createElement(ko,{disabled:a,onClick:this.addSchedule,image:cn.md4.medium,title:(0,ue.Z)("Add"),__source:{fileName:VV,lineNumber:419,columnNumber:13}}),s.createElement("hr",{__source:{fileName:VV,lineNumber:425,columnNumber:13}}),s.createElement(ko,{disabled:a||!l||void 0===this.state.selectedScheduleId,onClick:this.removeSelectedSchedule,image:cn.M2k.medium,title:(0,ue.Z)("other","Remove"),__source:{fileName:VV,lineNumber:426,columnNumber:13}}))))}}HV(GV,"contextType",Vs.Z);const KV=(0,bi.Z)(GV,WV);var jV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\Themes.jsx";function YV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $V=[P.kSystemAccentColor,P.kThemeScheduleEnabled,P.kThemeScheduleOS,P.kThemeScheduleTimeline,P.kThemesSystem,P.kThemesUser,P.kThemesCurrent,P.kThemesPreview,P.kThemesCurrentPrivate];class XV extends s.PureComponent{constructor(e,t){super(e),YV(this,"libraryId",b.Z.utilities.generateGUID()),YV(this,"editorId",b.Z.utilities.generateGUID()),YV(this,"onAddTheme",((e,t)=>{const n=t.currentTarget.closest(".settings-content");n&&n.scrollTop>150&&n.scrollTo({top:150,behavior:"smooth"});const s=Qo.Z.createTheme(e);this.setState({editorThemeId:s,tabbedViewId:this.editorId})})),YV(this,"onConfirmDeletion",(e=>{this.setState({confirmDeletionId:e})})),YV(this,"closeDialog",(()=>{this.setState({confirmDeletionId:void 0})})),YV(this,"deleteTheme",(()=>{this.state.confirmDeletionId&&Qo.Z.deleteTheme(this.state.confirmDeletionId),this.closeDialog()})),YV(this,"renderDialog",(()=>{const e=no.Z.getThemeWithFallback(this.state.confirmDeletionId).name;return s.createElement(ln.Z,{onRequestClose:this.closeDialog,viewMode:"float",__source:{fileName:jV,lineNumber:109,columnNumber:12}},s.createElement("header",{className:"dialog-header",__source:{fileName:jV,lineNumber:110,columnNumber:7}},s.createElement("h1",{className:"dialog-title",__source:{fileName:jV,lineNumber:111,columnNumber:9}},(0,ue.Z)("Deleting “$1”",[e])),s.createElement("p",{__source:{fileName:jV,lineNumber:114,columnNumber:9}},(0,ue.Z)("Do you want to permanently delete the “$1” theme?",[e]))),s.createElement("div",{className:"dialog-footer",__source:{fileName:jV,lineNumber:118,columnNumber:7}},s.createElement("input",{type:"button",className:"danger",onClick:this.deleteTheme,value:(0,ue.Z)("Delete Theme"),__source:{fileName:jV,lineNumber:119,columnNumber:9}}),s.createElement("input",{type:"button",onClick:this.closeDialog,value:(0,ue.Z)("Cancel"),__source:{fileName:jV,lineNumber:125,columnNumber:9}})))}));const n=t.vivaldiWindowId;this.state={editorThemeId:Qo.Z.getCurrentIdWithoutPreview(n),tabbedViewId:this.libraryId,confirmDeletionId:void 0}}renderFooter(e){return s.createElement("div",{className:"TabbedView-Footer",__source:{fileName:jV,lineNumber:131,columnNumber:12}},s.createElement(ko,{title:(0,ue.Z)("Open Theme..."),onClick:async()=>{st.Z.set(P.kThemesPreview,[]);const e=await b.Z.themePrivate.import({windowId:this.context.vivaldiWindowId,dialogTitle:(0,ue.Z)("Select Theme to Import")}),{error:t}=e;if(t)throw new Error(`${t.kind} - ${t.details}`)},__source:{fileName:jV,lineNumber:132,columnNumber:7}}),s.createElement(ko,{title:(0,ue.Z)("Export Theme..."),onClick:async()=>{const t=no.Z.getThemeWithFallback(e);await Qo.Z.exportTheme(t,this.context.vivaldiWindowId)},__source:{fileName:jV,lineNumber:150,columnNumber:7}}),s.createElement("a",{href:"https://themes.vivaldi.net",onClick:()=>$.Z.openURL("https://themes.vivaldi.net"),style:{margin:"auto 0 auto auto"},__source:{fileName:jV,lineNumber:158,columnNumber:7}},(0,ue.Z)("Get more themes")))}render(){const e=no.Z.getSystemThemes(),t=e.concat(this.props.prefValues[P.kThemesUser]),n=Qo.Z.getCurrentIdWithoutPreview(this.context.vivaldiWindowId);return s.createElement(s.Fragment,null,s.createElement(Cc,{filter:this.props.filter,categoryTitle:(0,ue.Z)("Themes"),__source:{fileName:jV,lineNumber:177,columnNumber:7}},s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:jV,lineNumber:178,columnNumber:9}},s.createElement("p",{className:"info",style:{maxWidth:"477px",fontSize:"unset"},__source:{fileName:jV,lineNumber:179,columnNumber:11}},(0,ue.Z)("Select any of our pre-installed themes, make your own in the Theme Editor or head over to vivaldi.net and download even more great themes made by our users.")),s.createElement(jF,{icons:[cn.v5q.small,cn.B$9.small],activeTabId:this.state.tabbedViewId,onTabClick:e=>{this.setState({tabbedViewId:e})},__source:{fileName:jV,lineNumber:183,columnNumber:11}},s.createElement("div",{id:this.libraryId,label:(0,ue.Z)("Library"),__source:{fileName:jV,lineNumber:191,columnNumber:13}},s.createElement("div",{className:"TabbedView--Padded ThemePreviews",__source:{fileName:jV,lineNumber:192,columnNumber:15}},this.state.confirmDeletionId&&this.renderDialog(),t.map((t=>s.createElement("div",{key:t.id,onDoubleClick:()=>{this.setState({tabbedViewId:this.editorId})},__source:{fileName:jV,lineNumber:197,columnNumber:19}},s.createElement(AV,{isCurrent:t.id===n,isSystem:e.some((e=>e.id===t.id)),theme:t,themeChangeCallback:e=>{this.setState({editorThemeId:e})},onConfirmDeletion:this.onConfirmDeletion,__source:{fileName:jV,lineNumber:202,columnNumber:21}})))),s.createElement("div",{className:"ThemePreview ThemePreview--New",__source:{fileName:jV,lineNumber:214,columnNumber:17}},s.createElement("button",{onClick:e=>this.onAddTheme(n,e),className:"ThemePreview-Image",dangerouslySetInnerHTML:{__html:cn.Clf},__source:{fileName:jV,lineNumber:215,columnNumber:19}}),s.createElement("div",{className:"ThemePreview-Label",__source:{fileName:jV,lineNumber:220,columnNumber:19}},(0,ue.Z)("New Theme...")),s.createElement("div",{className:"ThemePreview-Label-Meta",__source:{fileName:jV,lineNumber:223,columnNumber:19}}))),this.renderFooter(n)),s.createElement("div",{id:this.editorId,label:(0,ue.Z)("Editor"),__source:{fileName:jV,lineNumber:230,columnNumber:13}},s.createElement("div",{className:"TabbedView--Padded",__source:{fileName:jV,lineNumber:231,columnNumber:15}},s.createElement(UV,{theme:no.Z.getThemeWithFallback(this.state.editorThemeId),isCurrent:this.state.editorThemeId===n,isSystem:e.some((e=>e.id===this.state.editorThemeId)),filter:this.props.filter,themeChangeCallback:e=>{this.setState({editorThemeId:e})},__source:{fileName:jV,lineNumber:232,columnNumber:17}})),this.renderFooter(this.state.editorThemeId||n))))),s.createElement(Cc,{categoryTitle:(0,ue.Z)("Private Window theme"),filter:this.props.filter,__source:{fileName:jV,lineNumber:251,columnNumber:7}},s.createElement("div",{className:"setting-single setting-single--LeadingText",__source:{fileName:jV,lineNumber:255,columnNumber:9}},s.createElement("label",{__source:{fileName:jV,lineNumber:256,columnNumber:11}},s.createElement("span",{__source:{fileName:jV,lineNumber:257,columnNumber:13}},(0,ue.Z)("Select theme for Private Windows")),s.createElement("select",{value:this.props.prefValues[P.kThemesCurrentPrivate],onChange:e=>st.Z.set(P.kThemesCurrentPrivate,e.currentTarget.value),__source:{fileName:jV,lineNumber:258,columnNumber:13}},t.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:jV,lineNumber:265,columnNumber:17}},e.name))))))),s.createElement(KV,{filter:this.props.filter,__source:{fileName:jV,lineNumber:272,columnNumber:7}}))}}YV(XV,"contextType",Vs.Z);const QV=(0,bi.Z)(XV,$V);var qV="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesPlugins.jsx";const JV=[P.kPluginsAlwaysOpenPdfExternally,P.kPluginsWidevineEnabled],eH=st.Z.getEventHandler;class tH extends s.Component{constructor(e){super(e)}render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Plugins"),filter:this.props.filter,__source:{fileName:qV,lineNumber:32,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:qV,lineNumber:33,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:qV,lineNumber:34,columnNumber:11}},s.createElement("label",{__source:{fileName:qV,lineNumber:35,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:!this.props.prefValues[P.kPluginsAlwaysOpenPdfExternally],onChange:eH(P.kPluginsAlwaysOpenPdfExternally,"inverse"),__source:{fileName:qV,lineNumber:36,columnNumber:15}}),s.createElement("span",{__source:{fileName:qV,lineNumber:41,columnNumber:15}},(0,ue.Z)("Enable Internal PDF Viewer")))),s.createElement("div",{className:"setting-single",__source:{fileName:qV,lineNumber:44,columnNumber:11}},s.createElement("label",{__source:{fileName:qV,lineNumber:45,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kPluginsWidevineEnabled],onChange:eH(P.kPluginsWidevineEnabled),__source:{fileName:qV,lineNumber:46,columnNumber:15}}),s.createElement("span",{__source:{fileName:qV,lineNumber:49,columnNumber:15}},(0,ue.Z)("Enable Widevine Plugin"))))))}}const nH=(0,bi.Z)(tH,JV);function sH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iH(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,rH(e,t,"set"),n),n}function rH(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var aH=new WeakMap;class oH extends s.PureComponent{constructor(...e){super(...e),sH(this,"state",{zoom:1}),aH.set(this,{writable:!0,value:!1}),sH(this,"rangeCheck",(e=>Math.min(Math.max(e,Sh.VH),Sh.oJ))),sH(this,"_onDefaultZoomChanged",(e=>{var t;(function(e,t){return t.get?t.get.call(e):t.value})(t=this,rH(t,aH,"get"))&&this.setState({zoom:this.rangeCheck(e)})})),sH(this,"setZoomLevel",(e=>{const t=this.rangeCheck(e);b.Z.zoom.setDefaultZoom(t)}))}componentDidMount(){iH(this,aH,!0),b.Z.zoom.onDefaultZoomChanged.addListener(this._onDefaultZoomChanged),b.Z.zoom.getDefaultZoom(this._onDefaultZoomChanged)}componentWillUnmount(){iH(this,aH,!1),b.Z.zoom.onDefaultZoomChanged.removeListener(this._onDefaultZoomChanged)}render(){const{zoom:e}=this.state;return s.createElement(wh,{zoom:e,defaultZoomLevel:Sh.XZ,key:"zoomslider",scrolling:!0,inFooter:!1,maxLevel:Sh.oJ,minLevel:Sh.VH,step:Sh.s5,disabled:!1,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\DefaultPageZoomIndicator.jsx",lineNumber:54,columnNumber:12}})}}const lH=oH;var cH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\DefaultGlobalZoom.jsx";function uH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mH=[P.kMouseWheelPageZoom,P.kWebpagesTabZoomEnabled],dH=st.Z.getEventHandler;class hH extends s.Component{constructor(...e){super(...e),uH(this,"state",{defaultGlobalZoom:1}),uH(this,"updateLocalState",(e=>{this.setState({defaultGlobalZoom:e})})),uH(this,"handleZoomUpdated",(e=>{b.Z.zoom.setDefaultZoom(e)}))}UNSAFE_componentWillMount(){b.Z.zoom.getDefaultZoom((e=>{this.setState({defaultGlobalZoom:e})})),b.Z.zoom.onDefaultZoomChanged.addListener(this.updateLocalState)}componentWillUnmount(){b.Z.zoom.onDefaultZoomChanged.removeListener(this.updateLocalState)}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:cH,lineNumber:61,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:cH,lineNumber:62,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:cH,lineNumber:63,columnNumber:11}},s.createElement("h3",{__source:{fileName:cH,lineNumber:64,columnNumber:13}},(0,ue.Z)("Default Webpage Zoom")),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:cH,lineNumber:65,columnNumber:13}},s.createElement(lH,{__source:{fileName:cH,lineNumber:66,columnNumber:15}}))),s.createElement("div",{className:"setting-single pad-top",__source:{fileName:cH,lineNumber:69,columnNumber:11}},s.createElement("label",{__source:{fileName:cH,lineNumber:70,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kMouseWheelPageZoom],onChange:dH(P.kMouseWheelPageZoom),__source:{fileName:cH,lineNumber:71,columnNumber:17}}),s.createElement("span",{__source:{fileName:cH,lineNumber:74,columnNumber:17}},(0,ue.Z)("Use $1+Scroll to Zoom Page",["Ctrl"])))),s.createElement("div",{className:"setting-single",__source:{fileName:cH,lineNumber:78,columnNumber:11}},s.createElement("label",{__source:{fileName:cH,lineNumber:79,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesTabZoomEnabled],onChange:dH(P.kWebpagesTabZoomEnabled),__source:{fileName:cH,lineNumber:80,columnNumber:13}}),s.createElement("span",{__source:{fileName:cH,lineNumber:83,columnNumber:15}},(0,ue.Z)("Use Tab Zoom"))),s.createElement("p",{className:"info",__source:{fileName:cH,lineNumber:85,columnNumber:13}},(0,ue.Z)("Retain zoom level when navigating between websites")))))}}const pH=(0,bi.Z)(hH,mH);var gH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fullscreen.jsx";const bH=[P.kWebpagesFullScreenShowBubble];bH.push(P.kWebpagesFullScreenHideMouse);const NH=st.Z.getEventHandler;class fH extends s.Component{render(){const e=s.createElement("div",{className:"setting-single",__source:{fileName:gH,lineNumber:31,columnNumber:5}},s.createElement("label",{__source:{fileName:gH,lineNumber:32,columnNumber:7}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesFullScreenShowBubble],onChange:NH(P.kWebpagesFullScreenShowBubble),__source:{fileName:gH,lineNumber:33,columnNumber:9}}),s.createElement("span",{__source:{fileName:gH,lineNumber:37,columnNumber:9}},(0,ue.Z)("Show Fullscreen Reminder")))),t=s.createElement("div",{className:"setting-single",__source:{fileName:gH,lineNumber:44,columnNumber:7}},s.createElement("label",{__source:{fileName:gH,lineNumber:45,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesFullScreenHideMouse],onChange:NH(P.kWebpagesFullScreenHideMouse),__source:{fileName:gH,lineNumber:46,columnNumber:11}}),s.createElement("span",{__source:{fileName:gH,lineNumber:50,columnNumber:9}},(0,ue.Z)("Hide the Mouse Cursor for Page-initiated Fullscreen"))));return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:gH,lineNumber:56,columnNumber:7}},s.createElement("span",{__source:{fileName:gH,lineNumber:57,columnNumber:9}},s.createElement("div",{className:"setting-group",__source:{fileName:gH,lineNumber:58,columnNumber:11}},s.createElement("h3",{__source:{fileName:gH,lineNumber:59,columnNumber:13}},(0,ue.Z)("Fullscreen Mode")),e,t)))}}const _H=(0,bi.Z)(fH,bH);var vH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\HardwareAcceleration.jsx";const EH=[P.kHardwareAccelerationModeEnabled],CH=st.Z.getEventHandler;class wH extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:vH,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:vH,lineNumber:27,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:vH,lineNumber:28,columnNumber:11}},s.createElement("label",{__source:{fileName:vH,lineNumber:29,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kHardwareAccelerationModeEnabled],onChange:CH(P.kHardwareAccelerationModeEnabled),__source:{fileName:vH,lineNumber:30,columnNumber:15}}),s.createElement("span",{__source:{fileName:vH,lineNumber:34,columnNumber:15}},(0,ue.Z)("Use Hardware Acceleration When Available"))),s.createElement("p",{className:"info",__source:{fileName:vH,lineNumber:36,columnNumber:13}},(0,ue.Z)("This setting requires a restart to take full effect.")))))}}const yH=(0,bi.Z)(wH,EH);var SH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageAnimation.jsx";function TH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kH extends s.Component{constructor(...e){super(...e),TH(this,"state",{animationPolicy:"allowed"}),TH(this,"_onAnimationPolicyChanged",(()=>{h.Z.accessibilityFeatures.animationPolicy.get({},(({value:e})=>{this.setState({animationPolicy:e})}))})),TH(this,"onSelected",(e=>{const t=e.target.value;this.setState({animationPolicy:t},(()=>{h.Z.accessibilityFeatures.animationPolicy.set({value:t})}))}))}componentDidMount(){h.Z.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){h.Z.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:SH,lineNumber:55,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:SH,lineNumber:56,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:SH,lineNumber:57,columnNumber:11}},s.createElement("h3",{__source:{fileName:SH,lineNumber:58,columnNumber:13}},(0,ue.Z)("Play Image Animation")),s.createElement(_i,{name:"animationPolicy",value:this.state.animationPolicy,onChange:this.onSelected,__source:{fileName:SH,lineNumber:59,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:SH,lineNumber:63,columnNumber:15}},s.createElement("label",{__source:{fileName:SH,lineNumber:64,columnNumber:17}},s.createElement("input",{type:"radio",value:"allowed",__source:{fileName:SH,lineNumber:65,columnNumber:19}}),s.createElement("span",{__source:{fileName:SH,lineNumber:66,columnNumber:19}},(0,ue.Z)("command","Loop")))),s.createElement("div",{className:"setting-single",__source:{fileName:SH,lineNumber:69,columnNumber:15}},s.createElement("label",{__source:{fileName:SH,lineNumber:70,columnNumber:17}},s.createElement("input",{type:"radio",value:"once",__source:{fileName:SH,lineNumber:71,columnNumber:19}}),s.createElement("span",{__source:{fileName:SH,lineNumber:72,columnNumber:19}},(0,ue.Z)("Once")))),s.createElement("div",{className:"setting-single",__source:{fileName:SH,lineNumber:75,columnNumber:15}},s.createElement("label",{__source:{fileName:SH,lineNumber:76,columnNumber:17}},s.createElement("input",{type:"radio",value:"none",__source:{fileName:SH,lineNumber:77,columnNumber:19}}),s.createElement("span",{__source:{fileName:SH,lineNumber:78,columnNumber:19}},(0,ue.Z)("radio","Never"))))))))}}const IH=kH;var AH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageLoading.jsx";function ZH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class PH extends s.Component{constructor(...e){super(...e),ZH(this,"state",{imageLoading:"always"}),ZH(this,"_initState",(()=>{const e=A.ZP.get(P.kPageImageLoading);e&&this.setState({imageLoading:e})})),ZH(this,"_onSettingsChanged",((e,t)=>{this.setState({imageLoading:t})})),ZH(this,"onSelected",(e=>{const t=e.currentTarget.value;this.setState({imageLoading:t},(()=>{st.Z.set(P.kPageImageLoading,t)}))}))}componentDidMount(){this._initState(),A.ZP.addListener(P.kPageImageLoading,this._onSettingsChanged)}componentWillUnmount(){A.ZP.removeListener(P.kPageImageLoading,this._onSettingsChanged)}render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:AH,lineNumber:58,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:AH,lineNumber:59,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:AH,lineNumber:60,columnNumber:11}},s.createElement("h3",{__source:{fileName:AH,lineNumber:61,columnNumber:13}},(0,ue.Z)("page settings","Load Images")),s.createElement("p",{className:"info",__source:{fileName:AH,lineNumber:62,columnNumber:13}},(0,ue.Z)("Image loading setting for new tabs. Tabs opened from links will not use this setting, but will inherit the setting from the parent tab.")),s.createElement(_i,{name:"imageLoadingPolicy",value:this.state.imageLoading,onChange:this.onSelected,__source:{fileName:AH,lineNumber:65,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:AH,lineNumber:69,columnNumber:15}},s.createElement("label",{__source:{fileName:AH,lineNumber:70,columnNumber:17}},s.createElement("input",{type:"radio",value:"always",__source:{fileName:AH,lineNumber:71,columnNumber:19}}),s.createElement("span",{__source:{fileName:AH,lineNumber:72,columnNumber:19}},(0,ue.Z)("radio","Always")))),s.createElement("div",{className:"setting-single",__source:{fileName:AH,lineNumber:75,columnNumber:15}},s.createElement("label",{__source:{fileName:AH,lineNumber:76,columnNumber:17}},s.createElement("input",{type:"radio",value:"never",__source:{fileName:AH,lineNumber:77,columnNumber:19}}),s.createElement("span",{__source:{fileName:AH,lineNumber:78,columnNumber:19}},(0,ue.Z)("radio","Never")))),s.createElement("div",{className:"setting-single",__source:{fileName:AH,lineNumber:81,columnNumber:15}},s.createElement("label",{__source:{fileName:AH,lineNumber:82,columnNumber:17}},s.createElement("input",{type:"radio",value:"cache",__source:{fileName:AH,lineNumber:83,columnNumber:19}}),s.createElement("span",{__source:{fileName:AH,lineNumber:84,columnNumber:19}},(0,ue.Z)("radio","Cached"))))))))}}const DH=PH;var MH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\PictureInPicture.jsx";const OH=[P.kWebpagesPictureInPictureButtonEnabled],xH=st.Z.getEventHandler;class LH extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:MH,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:MH,lineNumber:26,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:MH,lineNumber:27,columnNumber:11}},s.createElement("label",{__source:{fileName:MH,lineNumber:28,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesPictureInPictureButtonEnabled],onChange:xH(P.kWebpagesPictureInPictureButtonEnabled),__source:{fileName:MH,lineNumber:29,columnNumber:15}}),s.createElement("span",{__source:{fileName:MH,lineNumber:33,columnNumber:15}},(0,ue.Z)("Picture-in-Picture Button On Videos"))),s.createElement("p",{className:"info",__source:{fileName:MH,lineNumber:35,columnNumber:13}},(0,ue.Z)("This setting requires a restart to take effect.")))))}}const RH=(0,bi.Z)(LH,OH);var BH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SelectTextInLink.jsx";const FH=[P.kWebpagesAllowSelectionInLinks],UH=st.Z.getEventHandler;class VH extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:BH,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:BH,lineNumber:26,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:BH,lineNumber:27,columnNumber:11}},s.createElement("label",{__source:{fileName:BH,lineNumber:28,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesAllowSelectionInLinks],onChange:UH(P.kWebpagesAllowSelectionInLinks),__source:{fileName:BH,lineNumber:29,columnNumber:15}}),s.createElement("span",{__source:{fileName:BH,lineNumber:33,columnNumber:15}},(0,ue.Z)("Allow Text Selection in Links"))))))}}const HH=(0,bi.Z)(VH,FH);var WH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Smoothscrolling.jsx";const zH=[P.kWebpagesSmoothScrollingEnabled],GH=st.Z.getEventHandler;class KH extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:WH,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:WH,lineNumber:26,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:WH,lineNumber:27,columnNumber:11}},s.createElement("label",{__source:{fileName:WH,lineNumber:28,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesSmoothScrollingEnabled],onChange:GH(P.kWebpagesSmoothScrollingEnabled),__source:{fileName:WH,lineNumber:29,columnNumber:15}}),s.createElement("span",{__source:{fileName:WH,lineNumber:32,columnNumber:15}},(0,ue.Z)("Smooth Scrolling"))),s.createElement("p",{className:"info",__source:{fileName:WH,lineNumber:34,columnNumber:13}},(0,ue.Z)("This setting requires a restart to take full effect.")))))}}const jH=(0,bi.Z)(KH,zH);var YH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SpatialNavigation.jsx";const $H=[P.kWebpagesSpatialNavigationEnabled],XH=st.Z.getEventHandler;class QH extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:YH,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:YH,lineNumber:26,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:YH,lineNumber:27,columnNumber:11}},s.createElement("h3",{__source:{fileName:YH,lineNumber:28,columnNumber:13}},(0,ue.Z)("Spatial Navigation")),s.createElement("p",{className:"info",__source:{fileName:YH,lineNumber:29,columnNumber:13}},(0,ue.Z)("Navigate between links and elements by holding shift and pressing the arrow keys.")),s.createElement("label",{__source:{fileName:YH,lineNumber:32,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesSpatialNavigationEnabled],onChange:XH(P.kWebpagesSpatialNavigationEnabled),__source:{fileName:YH,lineNumber:33,columnNumber:15}}),s.createElement("span",{__source:{fileName:YH,lineNumber:36,columnNumber:15}},(0,ue.Z)("spatial navigation","Enabled"))))))}}const qH=(0,bi.Z)(QH,$H);var JH="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\TabToFocus.jsx";const eW=st.Z.getEventHandler,tW=[P.kWebpagesTabFocusesLinks];class nW extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:JH,lineNumber:26,columnNumber:7}},s.createElement("div",{className:"setting-group",__source:{fileName:JH,lineNumber:27,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:JH,lineNumber:28,columnNumber:11}},s.createElement("h3",{__source:{fileName:JH,lineNumber:29,columnNumber:13}},(0,ue.Z)("Webpage Focus")),s.createElement("p",{className:"info",__source:{fileName:JH,lineNumber:30,columnNumber:13}},(0,ue.Z)("This setting takes effect in new tabs or windows only.")),s.createElement(_i,{name:"tabToFocusSetting",className:"setting-single",value:this.props.prefValues[P.kWebpagesTabFocusesLinks],onChange:eW(P.kWebpagesTabFocusesLinks,"convert"),__source:{fileName:JH,lineNumber:33,columnNumber:13}},s.createElement("div",{className:"setting-single",__source:{fileName:JH,lineNumber:37,columnNumber:15}},s.createElement("label",{__source:{fileName:JH,lineNumber:38,columnNumber:17}},s.createElement("input",{type:"radio",value:"false",__source:{fileName:JH,lineNumber:39,columnNumber:19}}),s.createElement("span",{__source:{fileName:JH,lineNumber:40,columnNumber:19}},(0,ue.Z)("Focus Forms Only")))),s.createElement("div",{className:"setting-single",__source:{fileName:JH,lineNumber:43,columnNumber:15}},s.createElement("label",{className:"setting-single",__source:{fileName:JH,lineNumber:44,columnNumber:17}},s.createElement("input",{type:"radio",value:"true",__source:{fileName:JH,lineNumber:45,columnNumber:19}}),s.createElement("span",{__source:{fileName:JH,lineNumber:46,columnNumber:19}},(0,ue.Z)("Focus All Controls and Links"))))))))}}const sW=(0,bi.Z)(nW,tW);var iW="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\TranslateSelection.jsx";const rW=[P.kWebpagesTranslateSelectionButtonEnabled],aW=st.Z.getEventHandler;class oW extends s.Component{render(){return s.createElement(zl.Z,{filter:this.props.filter,__source:{fileName:iW,lineNumber:25,columnNumber:7}},s.createElement("div",{className:"setting-group unlimited",__source:{fileName:iW,lineNumber:26,columnNumber:9}},s.createElement("div",{className:"setting-single",__source:{fileName:iW,lineNumber:27,columnNumber:11}},s.createElement("label",{__source:{fileName:iW,lineNumber:28,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:this.props.prefValues[P.kWebpagesTranslateSelectionButtonEnabled],onChange:aW(P.kWebpagesTranslateSelectionButtonEnabled),__source:{fileName:iW,lineNumber:29,columnNumber:15}}),s.createElement("span",{__source:{fileName:iW,lineNumber:33,columnNumber:15}},(0,ue.Z)("Show Selected Text Translate Button"))))))}}const lW=(0,bi.Z)(oW,rW);var cW="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesSettingSection.jsx";function uW(){return uW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uW.apply(this,arguments)}class mW extends s.Component{render(){return s.createElement(Cc,{categoryTitle:(0,ue.Z)("Webpages"),filter:this.props.filter,__source:{fileName:cW,lineNumber:24,columnNumber:7}},s.createElement(jH,uW({},this.props,{__source:{fileName:cW,lineNumber:25,columnNumber:9}})),s.createElement(yH,uW({},this.props,{__source:{fileName:cW,lineNumber:26,columnNumber:9}})),s.createElement(RH,uW({},this.props,{__source:{fileName:cW,lineNumber:27,columnNumber:9}})),s.createElement(HH,uW({},this.props,{__source:{fileName:cW,lineNumber:28,columnNumber:9}})),s.createElement(lW,uW({},this.props,{__source:{fileName:cW,lineNumber:29,columnNumber:9}})),s.createElement(sW,uW({},this.props,{__source:{fileName:cW,lineNumber:30,columnNumber:9}})),s.createElement(qH,uW({},this.props,{__source:{fileName:cW,lineNumber:31,columnNumber:9}})),s.createElement(_H,uW({},this.props,{__source:{fileName:cW,lineNumber:32,columnNumber:9}})),s.createElement(IH,uW({},this.props,{__source:{fileName:cW,lineNumber:33,columnNumber:9}})),s.createElement(DH,uW({},this.props,{__source:{fileName:cW,lineNumber:34,columnNumber:9}})),s.createElement(pH,uW({},this.props,{__source:{fileName:cW,lineNumber:35,columnNumber:9}})))}}const dW=mW;var hW="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\Settings.jsx";function pW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gW=Pt.jk.settingCategories,bW="http://example.com/?path=",NW=[P.kMailIsTurnedOff,P.kThemesPreview,P.kThemesUser];function fW(e){const t=(0,As.DP)(e),n=t.query,s=n?"all":t.path,i=s&&s.split("/");let r;if(!n&&i&&i.length>0&&gW[i[0]]&&(r=gW[i[0]],i.length>1)){const e=i.join("_");r=gW[e]}return r||(n?gW.all:gW.general)}function _W(){return s.createElement("div",{className:"guest-intro",__source:{fileName:hW,lineNumber:132,columnNumber:5}},s.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:hW,lineNumber:133,columnNumber:7}},s.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:hW,lineNumber:134,columnNumber:9}})),s.createElement("div",{className:"guest-intro-content",__source:{fileName:hW,lineNumber:136,columnNumber:7}},s.createElement("h1",{__source:{fileName:hW,lineNumber:137,columnNumber:9}},(0,ue.Z)("Settings Unavailable")),s.createElement("p",{__source:{fileName:hW,lineNumber:138,columnNumber:9}},(0,ue.Z)("Settings are not available in guest windows.")),s.createElement("p",{__source:{fileName:hW,lineNumber:141,columnNumber:9}},s.createElement("a",{tabIndex:0,href:lS,onClick:cS,__source:{fileName:hW,lineNumber:142,columnNumber:11}},(0,ue.Z)("Learn more about Guest Profiles")))))}class vW extends s.Component{constructor(...e){var t;super(...e),pW(this,"refSidebar",s.createRef()),pW(this,"refContent",s.createRef()),pW(this,"state",{category:fW(this.props.url),filter:(t=this.props.url,(0,As.DP)(t)?.search||""),showThemePreview:void 0}),pW(this,"closeThemePreview",(()=>this.setState({showThemePreview:void 0}))),pW(this,"focusFilterInput",(()=>this.refSidebar.current?.focus())),pW(this,"scrollToAnchor",(e=>{const{HTMLElement:t}=this.context,n=function(e){const t=(0,As.DP)(e);return t.scroll?t.scroll:""}(e);if(!n)return;const s=pn.findDOMNode(this);if(!(s instanceof t))return;const i=s.querySelector(`[data-anchor='${n}']`);i&&i.scrollIntoView()})),pW(this,"onMacMenuAction",((e,t,n)=>{this.context.vivaldiWindowId===e&&F.Z.isActionWhitelistedForSettings(t)&&o.Z.executeActions(t)})),pW(this,"getWindowTitle",(()=>this.state.category?(0,ue.Z)("Vivaldi Settings: $1",[this.state.category.title]):(0,ue.Z)("Vivaldi Settings"))),pW(this,"show",(e=>{const t=this.state.category&&this.state.category===gW.all,n=this.state.category&&this.state.category===e;return t||n})),pW(this,"onSettingsFilterChange",(e=>{this.setState({filter:e}),this.state.category!==gW.all&&this._setCategory("all")})),pW(this,"setCategory",(e=>{this.setState({filter:""}),this._setCategory(e)})),pW(this,"scrollTop",(()=>{this.refContent.current&&(this.refContent.current.scrollTop=0)})),pW(this,"_setCategory",(e=>{const t=this.context.vivaldiWindowId;W.ZP.isSettings(t)?this.setState({category:gW[e]}):$.Z.openURL(Pt.jk.internalUrl("settings",e),{inCurrent:!0,windowId:t})}))}static getDerivedStateFromProps(e,t){return e.url.startsWith(bW)?null:{category:fW(e.url)}}componentDidMount(){const{document:e,vivaldiWindowId:t}=this.context;W.ZP.isSettings(t)&&(e.title=this.getWindowTitle()),this.scrollToAnchor(this.props.url),this.focusFilterInput()}componentDidUpdate(e,t){const{document:n,vivaldiWindowId:s}=this.context;if(W.ZP.isSettings(s)&&t.category!==this.state.category&&(n.title=this.getWindowTitle()),t.category!==this.state.category&&this.scrollTop(),e.prefValues[P.kThemesPreview]?.length<this.props.prefValues[P.kThemesPreview]?.length){const{name:t,id:n}=this.props.prefValues[P.kThemesPreview][0];W.ZP.isSettings(this.context.vivaldiWindowId)&&W.ZP.isActive(this.context.vivaldiWindowId)?this.setState({showThemePreview:{themeName:t,isUpdate:this.props.prefValues[P.kThemesUser].findIndex((e=>e.id===n))>-1}}):e.prefValues[P.kThemesPreview].length<this.props.prefValues[P.kThemesPreview].length&&this.closeThemePreview()}}componentWillUnmount(){0}render(){if(W.ZP.isGuestSession(this.context.vivaldiWindowId))return s.createElement(_W,{__source:{fileName:hW,lineNumber:308,columnNumber:14}});const{filter:e}=this.state,t=e.length>=2?e:"",n=!this.props.prefValues[P.kMailIsTurnedOff];return s.createElement(gi.Z,{focusName:"focus_settings",className:"vivaldi-settings",__source:{fileName:hW,lineNumber:322,columnNumber:7}},s.createElement("header",{className:"settings-header",__source:{fileName:hW,lineNumber:327,columnNumber:9}},s.createElement("h1",{__source:{fileName:hW,lineNumber:328,columnNumber:11}},this.getWindowTitle())),s.createElement(rB,{focusRef:this.refSidebar,filter:this.state.filter,onFilterChange:this.onSettingsFilterChange,selectedCategory:this.state.category,onCategorySelected:this.setCategory,__source:{fileName:hW,lineNumber:331,columnNumber:9}}),this.state.category&&s.createElement("div",{className:"settings-content",ref:this.refContent,__source:{fileName:hW,lineNumber:341,columnNumber:11}},this.show(gW.general)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:345,columnNumber:13}},s.createElement(JB,{filter:t,__source:{fileName:hW,lineNumber:346,columnNumber:15}})),this.show(gW.general)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:351,columnNumber:13}},s.createElement(wA,{filter:t,__source:{fileName:hW,lineNumber:352,columnNumber:15}})),this.show(gW.general)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:356,columnNumber:13}},s.createElement(IP,{filter:t,__source:{fileName:hW,lineNumber:357,columnNumber:15}})),this.show(gW.general)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:361,columnNumber:13}},s.createElement(JZ,{filter:t,__source:{fileName:hW,lineNumber:362,columnNumber:15}})),this.show(gW.appearance)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:366,columnNumber:13}},s.createElement(hA,{filter:t,__source:{fileName:hW,lineNumber:367,columnNumber:15}})),this.show(gW.appearance)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:371,columnNumber:13}},s.createElement(hL,{filter:t,__source:{fileName:hW,lineNumber:372,columnNumber:15}})),this.show(gW.themes)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:376,columnNumber:13}},s.createElement(QV,{filter:t,__source:{fileName:hW,lineNumber:377,columnNumber:15}})),this.show(gW.themes)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:381,columnNumber:13}},s.createElement(dR,{filter:t,__source:{fileName:hW,lineNumber:382,columnNumber:15}}),s.createElement(pP,{filter:t,__source:{fileName:hW,lineNumber:383,columnNumber:15}})),this.show(gW.startpage)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:388,columnNumber:13}},s.createElement(uB,{filter:t,__source:{fileName:hW,lineNumber:389,columnNumber:15}})),this.show(gW.tabs)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:394,columnNumber:13}},s.createElement(EV,{filter:t,__source:{fileName:hW,lineNumber:395,columnNumber:15}})),this.show(gW.panel)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:400,columnNumber:13}},s.createElement(xL,{filter:t,__source:{fileName:hW,lineNumber:401,columnNumber:15}})),this.show(gW.addressbar)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:406,columnNumber:13}},s.createElement(nA,{filter:t,__source:{fileName:hW,lineNumber:407,columnNumber:15}})),this.show(gW.bookmarks)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:412,columnNumber:13}},s.createElement(FA,{filter:t,__source:{fileName:hW,lineNumber:413,columnNumber:15}}),s.createElement(MA,{filter:t,__source:{fileName:hW,lineNumber:414,columnNumber:15}})),this.show(gW.qc)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:418,columnNumber:13}},s.createElement(rR,{filter:t,category:this.state.category,__source:{fileName:hW,lineNumber:419,columnNumber:15}})),this.show(gW.keyboard)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:424,columnNumber:13}},s.createElement(Pc,{filter:t,view:"editable",__source:{fileName:hW,lineNumber:425,columnNumber:15}})),this.show(gW.mouse)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:429,columnNumber:13}},s.createElement(TL,{filter:t,category:this.state.category,__source:{fileName:hW,lineNumber:430,columnNumber:15}})),this.show(gW.search)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:435,columnNumber:13}},s.createElement(JR,{filter:t,__source:{fileName:hW,lineNumber:436,columnNumber:15}})),this.show(gW.privacy)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:440,columnNumber:13}},s.createElement(QL,{filter:t,__source:{fileName:hW,lineNumber:441,columnNumber:15}})),this.show(gW.privacy)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:445,columnNumber:13}},s.createElement(ZZ,{filter:t,__source:{fileName:hW,lineNumber:446,columnNumber:15}})),this.show(gW.privacy)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:450,columnNumber:13}},s.createElement(FR,{filter:t,__source:{fileName:hW,lineNumber:451,columnNumber:15}})),this.show(gW.privacy)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:455,columnNumber:13}},s.createElement(HZ,{filter:t,__source:{fileName:hW,lineNumber:456,columnNumber:15}})),this.show(gW.downloads)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:460,columnNumber:13}},s.createElement(YZ,{filter:t,__source:{fileName:hW,lineNumber:461,columnNumber:15}})),this.show(gW.sync)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:466,columnNumber:13}},s.createElement(dU,{url:this.props.url,category:this.state.category,filter:t,__source:{fileName:hW,lineNumber:467,columnNumber:15}})),this.show(gW.webpages)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:475,columnNumber:13}},s.createElement(dW,{filter:t,__source:{fileName:hW,lineNumber:476,columnNumber:15}})),this.show(gW.webpages)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:480,columnNumber:13}},s.createElement(nH,{filter:t,__source:{fileName:hW,lineNumber:481,columnNumber:15}})),this.show(gW.webpages)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:485,columnNumber:13}},s.createElement(wR,{prefs:!0,filter:t,__source:{fileName:hW,lineNumber:486,columnNumber:15}})),this.show(gW.webpages)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:490,columnNumber:13}},s.createElement(mZ,{filter:t,__source:{fileName:hW,lineNumber:491,columnNumber:15}})),this.show(gW.webpages)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:495,columnNumber:13}},s.createElement(lP,{filter:t,__source:{fileName:hW,lineNumber:496,columnNumber:15}})),this.show(gW.network)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:502,columnNumber:13}},s.createElement(ZL,{filter:t,__source:{fileName:hW,lineNumber:503,columnNumber:15}})),n&&this.show(gW.rss)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:508,columnNumber:13}},s.createElement($O,{filter:t,__source:{fileName:hW,lineNumber:509,columnNumber:15}})),n&&this.show(gW.mail)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:514,columnNumber:13}},s.createElement(LO,{filter:t,__source:{fileName:hW,lineNumber:515,columnNumber:15}})),n&&this.show(gW.calendar)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:520,columnNumber:13}},s.createElement(KD,{filter:t,pageId:-1,__source:{fileName:hW,lineNumber:521,columnNumber:15}}),s.createElement(IM,{filter:t,pageId:-1,__source:{fileName:hW,lineNumber:522,columnNumber:15}}),s.createElement(tZ,{filter:t,__source:{fileName:hW,lineNumber:523,columnNumber:15}})),!1,n&&this.show(gW.mail)&&s.createElement(s.Fragment,{__source:{fileName:hW,lineNumber:534,columnNumber:13}},s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:535,columnNumber:15}},s.createElement(vx,{filter:t,__source:{fileName:hW,lineNumber:536,columnNumber:17}})),s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:538,columnNumber:15}},s.createElement(Lx,{filter:t,__source:{fileName:hW,lineNumber:539,columnNumber:17}})),s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:541,columnNumber:15}},s.createElement(gx,{filter:t,__source:{fileName:hW,lineNumber:542,columnNumber:17}}))),this.show(gW.biscuit)&&s.createElement("section",{className:"setting-section",__source:{fileName:hW,lineNumber:549,columnNumber:13}},s.createElement(IA,{filter:t,__source:{fileName:hW,lineNumber:550,columnNumber:15}}))),this.state.showThemePreview&&s.createElement(nl,{onClose:this.closeThemePreview,themeName:this.state.showThemePreview.themeName,isUpdate:this.state.showThemePreview.isUpdate,__source:{fileName:hW,lineNumber:558,columnNumber:11}}))}}pW(vW,"contextType",Vs.Z);const EW=(0,bi.Z)(vW,NW);function CW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wW(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,SW(e,t,"get"))}function yW(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,SW(e,t,"set"),n),n}function SW(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var TW=new WeakMap,kW=new WeakMap,IW=new WeakMap,AW=new WeakMap;class ZW{constructor(e=500){if(TW.set(this,{writable:!0,value:void 0}),kW.set(this,{writable:!0,value:0}),IW.set(this,{writable:!0,value:(0,sa.List)()}),AW.set(this,{writable:!0,value:new Event("undoredo")}),CW(this,"undoDisabled",!0),CW(this,"redoDisabled",!0),e<1)throw new Error("Stack size must be greater than 0");yW(this,TW,e)}record(e){yW(this,IW,wW(this,IW).slice(wW(this,kW),wW(this,TW)-1+wW(this,kW)).unshift(e)),yW(this,kW,0),this._onChange()}clear(){yW(this,IW,(0,sa.List)()),yW(this,kW,0),this._onChange()}undo(){this.undoDisabled||(wW(this,IW).get(wW(this,kW)).undo(),yW(this,kW,wW(this,kW)+1),this._onChange(),document.dispatchEvent(wW(this,AW)))}redo(){this.redoDisabled||(yW(this,kW,wW(this,kW)-1),wW(this,IW).get(wW(this,kW)).redo(),this._onChange(),document.dispatchEvent(wW(this,AW)))}_onChange(){this.undoDisabled=wW(this,kW)===wW(this,IW).size,this.redoDisabled=0===wW(this,kW)}}var PW=new WeakMap,DW=new WeakMap;class MW{constructor(e,t,n){PW.set(this,{writable:!0,value:void 0}),DW.set(this,{writable:!0,value:void 0}),yW(this,PW,e),yW(this,DW,t),this._updateFunction=n}undo(){this._updateFunction(wW(this,PW))}redo(){this._updateFunction(wW(this,DW))}}var OW=n(64626);function xW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class LW{constructor(){xW(this,"cut",i.Z.cut),xW(this,"copy",i.Z.copy),this.undoStack=new ZW}undo(){this.undoStack.undo()}redo(){this.undoStack.redo()}clearUndoStack(){this.undoStack.clear()}async paste(e,t,n){const s=tn.ZP.getCutIds(),r=s.length>0?tn.ZP.getItemById(s[0]).parentId:"",a=await i.Z.paste(e,t,n),{isCut:o,ids:l}=a;return this.undoStack.record(new MW({sourceId:r,isCut:o,ids:l},{sourceId:r,targetId:t,isCut:o,ids:l},(e=>{e.targetId?i.Z.move(e.ids,e.targetId,0):o?i.Z.move(e.ids,e.sourceId,0):i.Z.remove(e.ids)}))),a}async create(e){const t=await h.Z.bookmarks.create(e);if(t)return this.undoStack.record(new MW({createdId:t.id,remove:!0},{createdId:t.id,parentId:t.parentId},(e=>{e.remove?i.Z.remove([e.createdId]):i.Z.move([e.createdId],e.parentId||"",t.index||0)}))),t}async createWithPromise(e,t,n){const s=await i.Z.createWithPromise(e,t,n),r=s.map((e=>e.id));return this.undoStack.record(new MW({createdIds:r,parentId:t,index:n,remove:!0},{createdIds:r,parentId:t,index:n},(e=>{e.remove?i.Z.remove(e.createdIds):i.Z.move(e.createdIds,e.parentId,e.index||0)}))),s}update(e,t){const n=tn.ZP.getItemById(e);return h.Z.bookmarks.update(e,t).then((s=>(this.undoStack.record(new MW({nodeId:e,item:(0,OW.Z)(n,Object.keys(t))},{nodeId:e,item:t},(e=>{h.Z.bookmarks.update(e.nodeId,e.item)}))),s)))}async mergeWithPromise(e,t,n){const s=(await this.createWithPromise([{parentId:e.parentId,children:[],title:n}],e.parentId||"",0))[0].id;return await this.move([e.id,t.id],s,0),s}async move(e,t,n){const s=e.length>0?tn.ZP.getItemById(e[0]).parentId:"",r=await i.Z.move(e,t,n);return this.undoStack.record(new MW({ids:e,parentId:s,index:0},{ids:e,parentId:t,index:n},(e=>{i.Z.move(e.ids,e.parentId,e.index)}))),r}async reorder(e,t){const n={nodeId:t,order:tn.ZP.getItemById(t).children.map((e=>e.id))},s=await i.Z.reorder(e,t);return this.undoStack.record(new MW(n,{nodeId:t,order:e},(e=>{i.Z.reorder(e.order,e.nodeId)}))),s}async remove(e=[]){if(0===e.length)return;const t={removed:e,parentId:tn.ZP.getItemById(e[0]).parentId};await i.Z.remove(e),this.undoStack.record(new MW(t,{ids:e},(e=>{e.removed?i.Z.move(e.removed,e.parentId||"",0):i.Z.remove(e.ids)})))}async duplicate(e,t,n){const s=await i.Z.duplicate(e,t,n);return this.undoStack.record(new MW({ids:s,remove:!0},{ids:s,parentId:t,index:n},(e=>{e.remove?i.Z.remove(e.ids):i.Z.move(e.ids,e.parentId,e.index)}))),s}async createBookmarks(e,t,n){const s=await i.Z.createBookmarks(e,t,n);return this.undoStack.record(new MW({ids:s,remove:!0},{ids:s,parentId:t,index:n},(e=>{e.remove?i.Z.remove(e.ids):i.Z.move(e.ids,e.parentId,e.index)}))),s}onDropEvent(e,t,n,s){if(e.dataTransfer.types.includes(en.yR)){const i=JSON.parse(e.nativeEvent.dataTransfer.getData(en.yR));en.ZP.isCopyModifierPressed(e)||s&&s.disableMove?this.duplicate(i,t,n):this.move(i,t,n)}else en.ZP.getUrlsFromEventPromise(e,!0).then((e=>this.createBookmarks(e,t,n)))}}var RW="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\thumbnail\\Thumbnail.jsx";function BW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class FW extends s.PureComponent{constructor(...e){super(...e),BW(this,"_imageElementKey",0),BW(this,"_reloadRetryCount",0),BW(this,"onImageError",(()=>{if(void 0!==this._reloadRetryTimer)return;if(this._reloadRetryCount>=4)return void(4===this._reloadRetryCount&&(this._reloadRetryCount=5,this.props.onImageLoadError&&this.props.onImageLoadError(this.props.src)));this._reloadRetryCount++;const e=1e3*Math.pow(2,this._reloadRetryCount);this._reloadRetryTimer=setTimeout(this.onTryReload,e)})),BW(this,"onTryReload",(()=>{this._reloadRetryTimer=void 0,this._imageElementKey++,this.forceUpdate()}))}componentDidUpdate(e){e.src!==this.props.src&&this.finishErrorRecovery()}componentWillUnmount(){this.finishErrorRecovery()}finishErrorRecovery(){this._reloadRetryCount=0,void 0!==this._reloadRetryTimer&&(clearTimeout(this._reloadRetryTimer),this._reloadRetryTimer=void 0)}render(){const e=this.props.className||"thumbnail-image";return this.props.src?s.createElement("div",{className:e,style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,__source:{fileName:RW,lineNumber:85,columnNumber:9}},s.createElement("img",{ref:"thumbnail",width:"100%",height:"auto",src:this.props.src,onError:this.onImageError,key:this._imageElementKey,__source:{fileName:RW,lineNumber:95,columnNumber:11}})):s.createElement("div",{className:e,style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,dangerouslySetInnerHTML:this.props.isFolder?{__html:cn.feS}:{__html:cn.lrx},__source:{fileName:RW,lineNumber:107,columnNumber:7}})}}const UW=FW,VW=new class{setBackgroundTasks(e){m.Z.dispatch({actionType:Fi.Z.BACKGROUND_TASKS_SET,tasks:e})}};const HW=function(e,t,n,s,i,r){this.id=e,this.title=n,this.description=i,this.menuItems=r,this.progress=0,this.text=t};function WW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zW="thumbnailCapture";const GW=new class{constructor(){WW(this,"pendingEntries",[]),WW(this,"activeEntries",[]),WW(this,"tasks",[]),WW(this,"add",((e,t,n)=>{this.pendingEntries.push({id:e,url:t,callback:n})})),WW(this,"run",(()=>{for(;;){if(this.activeEntries.length>=1)return;if(0===this.pendingEntries.length)return void(0===this.activeEntries.length&&(this.removeFromArrayById(zW,this.tasks),VW.setBackgroundTasks(this.tasks)));const e=this.pendingEntries.shift();this.activeEntries.push(e);let t=this.getFromArrayById(zW,this.tasks);t||(t=new HW(zW,"","Thumbnail Capture","",[{name:(0,ue.Z)("Cancel"),handler:function(){this.pendingEntries=[]}.bind(this)}]),this.tasks.push(t)),t.title=(0,ue.Z)("Updating thumbnail for $1",[e.url]),t.description=(0,ue.Z)("$1 bookmark waiting for update.","$1 bookmarks waiting for update.",[this.pendingEntries.length]),t.text=this.pendingEntries.length+this.activeEntries.length,VW.setBackgroundTasks(this.tasks),e.callback.call(null,e.id,e.url)}})),WW(this,"onLoaded",(e=>{this.removeFromArrayById(e,this.activeEntries),this.run()})),WW(this,"contains",(e=>this.isInArrayById(e,this.pendingEntries)||this.isInArrayById(e,this.activeEntries))),WW(this,"getFromArrayById",((e,t)=>t.find((t=>t.id===e)))),WW(this,"isInArrayById",((e,t)=>t.length&&void 0!==this.getFromArrayById(e,t))),WW(this,"removeFromArrayById",((e,t)=>{const n=t.findIndex((t=>t.id===e));-1!==n&&t.splice(n,1)}))}};let KW=0;const jW=new Map,YW={getPageThumbnail(e,t,n){KW>4||(KW++,e.getThumbnail($W(t),(e=>{KW--,h.Z.runtime.lastError?n(void 0):n(e||void 0)})))},updateForBookmark(e,t){this.updateForBookmarks([{id:e,url:t}])},updateForBookmarks(e){for(const t of e){const e=t.url;e&&!GW.contains(t.id)&&(GW.add(t.id,Pt.jk.getUrl(e),XW),QW(t.id))}GW.run()},linkAndQueryUpdatingBookmark:(e,t)=>t?(jW.set(e,t),GW.contains(t)):(jW.delete(e),!1),unlinkBookmarkComponent(e){jW.delete(e)}},$W=e=>e.compact?{width:330,height:270}:{width:440,height:360},XW=(e,t)=>{const n={bookmarkId:e,url:t};b.Z.thumbnails.captureBookmark(n).then((t=>{GW.onLoaded(e),QW(e)}))};function QW(e){for(const[t,n]of jW)n===e&&t.forceUpdate()}const qW=YW;var JW=n(34155),ez="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkEditor.jsx";function tz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nz="BookmarkEditor",sz=[P.kBookmarksBarVisible];class iz extends s.Component{constructor(...e){super(...e),tz(this,"refTitle",s.createRef()),tz(this,"refUrlField",s.createRef()),tz(this,"_isCreating",!1),tz(this,"_disableSaveOnBlur",!1),tz(this,"state",{id:"",title:"",url:"",nickname:"",description:"",thumbnail:"",speeddial:!1,isFolder:!1,isTrash:!1,isSeparator:!1,dateAdded:null,editUrl:null,dataChanged:!1,autocompleteValue:""}),tz(this,"resetUrlField",(()=>{QN.Z.setUrlfieldState(nz,{editUrl:void 0,autocompleteValue:void 0})})),tz(this,"setIsCreating",(e=>{this._isCreating=e})),tz(this,"getIsCreating",(()=>this._isCreating)),tz(this,"_onUrlbarStoreChanged",(()=>{const{isActive:e,isOmniDropdownOpen:t,selectionEnd:n,selectionStart:s,...i}=RE.Z.getUrlfieldStateFromId(nz);this.setState(i)})),tz(this,"onSubmit",(()=>{this._save(),this.props.onFocusTree()})),tz(this,"_save",(()=>{if(this.state.isTrash||""===this.state.id||!1===this.state.dataChanged)return Promise.resolve();const e=this.state.autocompleteValue||this.state.editUrl||this.state.url,t=en.ZP.verifyForUpdate({title:this.state.title,url:e,nickname:this.state.nickname,description:this.state.description,speeddial:this.state.speeddial},this.state.isFolder);return this._updateStoreWithFields(this.state.id,t)})),tz(this,"_saveOnBlur",(()=>{!1===this._disableSaveOnBlur&&this._save().then(this.setIsCreating(!1))})),tz(this,"_updateStoreWithFields",((e,t)=>new Promise((n=>{h.Z.bookmarks.update(e,t).then((s=>{const i={};e===this.state.id&&(i.url=tn.ZP.filterUrl(t.url||""),i.description=s.description),this.setState(i),this.resetUrlField(),n()}))})))),tz(this,"_updateStateWithItem",((e={id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},t)=>{const n=tn.ZP.isSeparator(e);this.setState({id:e.id,title:n?"":e.title,url:n?"":tn.ZP.getUrlByNode(e),nickname:n?"":e.nickname,description:n?"":e.description,speeddial:!n&&e.speeddial,thumbnail:n?"":e.thumbnail,isFolder:!n&&!e.url,isTrash:!n&&tn.ZP.isTrashed(e),isSeparator:n,dateAdded:e.dateAdded?new Date(e.dateAdded):null,dataChanged:!1},(()=>{t&&t()}))})),tz(this,"handleKeyPress",(e=>{if(e.stopPropagation(),"Escape"===e.key){e.preventDefault(),QN.Z.clearUrlfieldState(nz);const t=this.state.id;this.getIsCreating()?(this.setIsCreating(!1),this._updateStateWithItem({id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},(()=>{this.props.onCancel(t,!0)}))):this.props.onCancel(t,!1)}})),tz(this,"focusUrlField",(()=>{this.refUrlField.current&&this.refUrlField.current.focus()})),tz(this,"focusTitleField",(()=>{this.refTitle.current&&this.refTitle.current.focus()})),tz(this,"handleFocus",(e=>{this.props.updateLayout&&this.props.updateLayout();const{HTMLInputElement:t}=this.context;e.target instanceof t&&e.target.select()})),tz(this,"handleUpdateThumbnail",(e=>{if(e.stopPropagation(),this.state.isFolder)return void h.Z.bookmarks.update(this.state.id,{thumbnail:""});const t=en.ZP.verifyForUpdate({url:this.state.url},!1);t.url&&qW.updateForBookmark(this.state.id,t.url)})),tz(this,"onBookmarkStoreChange",(()=>{const e=this.state.id;if(e){const t=tn.ZP.getItemById(e);t&&t?.id===this.state.id&&this._updateStateWithItem(t)}})),tz(this,"handleSetCustomThumbnail",(e=>{e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),b.Z.utilities.selectLocalImage({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Custom Image"),thumbnailBookmarkId:this.state.id})})),tz(this,"checkChangeSpeeddial",(()=>{this.setState((e=>({speeddial:!e.speeddial,dataChanged:!0})),(()=>{this._save()}))})),tz(this,"isBookmarkBarChecked",(()=>tn.ZP.getBookmarkBarFolderId()===this.state.id&&this.props.prefValues[P.kBookmarksBarVisible])),tz(this,"checkChangeBookmarkBar",(()=>{this.setState((e=>({dataChanged:!0})),(()=>{i.Z.setBookmarkBarFolderAndToggleVisibility(this.state.id)}))})),tz(this,"onInputChange",((e,t)=>{this.setState({[e]:t.target.value,dataChanged:!0})})),tz(this,"onUrlChange",(e=>{this.setState({url:e||"",dataChanged:!0})})),tz(this,"setItem",(e=>{QN.Z.clearUrlfieldState(nz),this._updateStateWithItem(e,(()=>{this.getIsCreating()&&(this._disableSaveOnBlur=!0,this.state.isFolder?this.focusTitleField():this.state.isTrash||this.focusUrlField(),this._disableSaveOnBlur=!1)}))}))}componentDidMount(){RE.Z.addChangeListener(this._onUrlbarStoreChanged),tn.ZP.addChangeListener(this.onBookmarkStoreChange),JW.nextTick((()=>{const e=this.props.getSelectedItem();e&&this.setItem(e)}))}componentDidUpdate(e,t){t.id!==this.state.id&&this.resetUrlField()}componentWillUnmount(){RE.Z.removeChangeListener(this._onUrlbarStoreChanged),tn.ZP.removeChangeListener(this.onBookmarkStoreChange),this._save(),JW.nextTick((()=>QN.Z.clearUrlfieldState(nz))),qW.unlinkBookmarkComponent(this)}render(){const e=qW.linkAndQueryUpdatingBookmark(this,this.state.id),{isFolder:t,isTrash:n}=this.state,i=g()(this.state.dateAdded).format("LLL"),r=!this.state.id||this.state.isSeparator||n;return s.createElement("div",{className:"manager-editor",onKeyDown:this.handleKeyPress,__source:{fileName:ez,lineNumber:384,columnNumber:7}},s.createElement("form",{className:"addbookmark-cardwrapper cardview",onSubmit:this.onSubmit,__source:{fileName:ez,lineNumber:385,columnNumber:9}},s.createElement("div",{className:"upper-half",__source:{fileName:ez,lineNumber:388,columnNumber:11}},s.createElement("div",{className:"title-and-address",__source:{fileName:ez,lineNumber:389,columnNumber:13}},s.createElement("div",{className:"fieldset",__source:{fileName:ez,lineNumber:390,columnNumber:15}},s.createElement("input",{className:"cardview title",ref:this.refTitle,placeholder:(0,ue.Z)("Title"),onChange:this.onInputChange.bind(this,"title"),value:this.state.title,disabled:r,type:"text",onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:ez,lineNumber:391,columnNumber:17}})),s.createElement("div",{className:t?"fieldset collapse":"fieldset",__source:{fileName:ez,lineNumber:402,columnNumber:15}},s.createElement(lC,{ref:this.refUrlField,stateResetKey:this.state.id,pageId:nz,autocompletionEnabled:!0,autoFocus:!1,className:"cardview address",disabled:r||t,displayUrl:this.state.url,editUrl:this.state.editUrl,handleDrop:!0,onBlur:this._saveOnBlur,onFocus:this.handleFocus,onKeyPress:this.handleKeyPress,onChange:this.onUrlChange,placeholder:(0,ue.Z)("Address"),title:(0,ue.Z)("Enter webpage address"),__source:{fileName:ez,lineNumber:403,columnNumber:17}})),s.createElement("div",{className:"fieldset",__source:{fileName:ez,lineNumber:422,columnNumber:15}},s.createElement("input",{className:"cardview nickname",placeholder:(0,ue.Z)("Nickname"),value:this.state.nickname,onChange:this.onInputChange.bind(this,"nickname"),type:"text",disabled:r,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:ez,lineNumber:423,columnNumber:17}}))),s.createElement("div",{className:"preview",__source:{fileName:ez,lineNumber:435,columnNumber:13}},s.createElement(UW,{key:this.state.id,isFolder:t,src:this.state.thumbnail,__source:{fileName:ez,lineNumber:436,columnNumber:15}}),!r&&s.createElement("div",{className:"thumb-controls",__source:{fileName:ez,lineNumber:441,columnNumber:17}},s.createElement("button",{type:"button",tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:bn()({circular:!0,"set-custom-thumbnail":!0}),title:(0,ue.Z)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:cn.a8r},__source:{fileName:ez,lineNumber:442,columnNumber:19}}),s.createElement("button",{type:"button",tabIndex:"-1",className:bn()({circular:!0,"update-thumbnail":!0,updating:e}),title:(0,ue.Z)("Update thumbnail"),onClick:this.handleUpdateThumbnail,dangerouslySetInnerHTML:{__html:cn.GO5.large},__source:{fileName:ez,lineNumber:452,columnNumber:19}})))),s.createElement("div",{className:"lower-half",__source:{fileName:ez,lineNumber:467,columnNumber:11}},s.createElement("div",{className:"fieldset resizable",__source:{fileName:ez,lineNumber:468,columnNumber:13}},s.createElement("textarea",{className:"description",placeholder:(0,ue.Z)("Description"),value:this.state.description,onChange:this.onInputChange.bind(this,"description"),type:"text",disabled:r,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:ez,lineNumber:469,columnNumber:15}})),s.createElement("div",{className:"speeddial-bookmarksbar",__source:{fileName:ez,lineNumber:479,columnNumber:13}},s.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:ez,lineNumber:480,columnNumber:15}},s.createElement("label",{__source:{fileName:ez,lineNumber:482,columnNumber:17}},s.createElement("input",{className:"cardview",disabled:r||!t||n,checked:this.state.speeddial,onChange:this.checkChangeSpeeddial,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:ez,lineNumber:483,columnNumber:19}}),s.createElement("span",{__source:{fileName:ez,lineNumber:490,columnNumber:19}},(0,ue.Z)("Speed Dial")))),s.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:ez,lineNumber:493,columnNumber:15}},s.createElement("label",{__source:{fileName:ez,lineNumber:495,columnNumber:17}},s.createElement("input",{className:"cardview",disabled:r||!t||n,checked:this.isBookmarkBarChecked(),onChange:this.checkChangeBookmarkBar,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:ez,lineNumber:496,columnNumber:19}}),s.createElement("span",{__source:{fileName:ez,lineNumber:503,columnNumber:19}},(0,ue.Z)("Bookmark Bar"))))),this.state.dateAdded&&s.createElement("div",{className:"fieldset",__source:{fileName:ez,lineNumber:508,columnNumber:15}},s.createElement("div",{className:"meta-icon date fieldset",dangerouslySetInnerHTML:{__html:cn.V_c},__source:{fileName:ez,lineNumber:509,columnNumber:17}}),s.createElement("span",{className:"dateCreated bookmark",title:(0,ue.Z)("Date created"),__source:{fileName:ez,lineNumber:511,columnNumber:17}},i))),s.createElement("input",{type:"submit",hidden:!0,__source:{fileName:ez,lineNumber:519,columnNumber:11}})))}}tz(iz,"contextType",Vs.Z);const rz=(0,bi.Z)(iz,sz);var az=n(34155),oz="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkTree.jsx";function lz(){return lz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lz.apply(this,arguments)}function cz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uz(e){return!!e&&tn.ZP.isTrashed(e)}function mz(e){return!e.trash}function dz(e){return!uz(e)}function hz(e){X.Z.setStatus(Pt.jk.getHoverUrl(tn.ZP.getUrlByNode(e)))}function pz(){X.Z.clearStatus()}function gz(e,t){t.button===Nn.kCenter&&(t.preventDefault(),t.stopPropagation())}function bz(e){return e&&Boolean(e.trash)}function Nz(e,t){const n={bookmarks:t,incognito:e,inNewWindow:!0};en.ZP.open(n,!0)}function fz(e,t){const n=(0,ai.Z)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}),s=t.map((e=>en.ZP.getBookmarksByNode(e))).flat();en.ZP.open({...n,bookmarks:s},!0)}function _z(e,t){h.Z.bookmarks.update(e,{title:t})}function vz(e){return Boolean(e.speeddial)}function Ez(e){return!bz(e)}function Cz(e){return!!e.children&&e.children.length>0}function wz(e){return!(!e||!e.children&&e.url)}function yz(e){const{columns:t,node:n}=e,{onExpandClick:i,inManager:r,fullView:a}=e,o=tn.ZP.isSeparator(n),l=16*(n.level+1)+"px";if(o){const e=0===(t?t.findIndex((e=>"title"===e.id)):0)?l:0;return s.createElement("label",{"data-parent":n.parentId,key:"0",__source:{fileName:oz,lineNumber:186,columnNumber:12}},s.createElement("hr",{style:{marginLeft:e},className:"separator",__source:{fileName:oz,lineNumber:187,columnNumber:7}}))}return a?t.map((t=>{switch(t.id){case"title":return s.createElement(Xp,{key:n.id,node:n,inlineEditText:e.inlineEditText,onExpandClick:i,inManager:r,fullView:a,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,showBadge:e.showBadge,onMouseEnter:()=>hz(n),onMouseLeave:()=>pz(),__source:{fileName:oz,lineNumber:212,columnNumber:9}});case"url":return s.createElement("label",{key:t.id,__source:{fileName:oz,lineNumber:230,columnNumber:9}},Cz(n)&&a?s.createElement("span",{className:"secondary",__source:{fileName:oz,lineNumber:232,columnNumber:15}},(0,ue.Z)("$1 item","$1 items",[n.children.length])):s.createElement("span",{__source:{fileName:oz,lineNumber:237,columnNumber:15}},Pt.jk.getHoverUrl(tn.ZP.getUrlByNode(n))));case"nickname":return s.createElement("label",{key:t.id,__source:{fileName:oz,lineNumber:243,columnNumber:9}},s.createElement("span",{__source:{fileName:oz,lineNumber:244,columnNumber:11}},n.nickname));case"description":return s.createElement("label",{key:t.id,__source:{fileName:oz,lineNumber:249,columnNumber:9}},s.createElement("span",{__source:{fileName:oz,lineNumber:250,columnNumber:11}},n.description));case"dateAdded":return s.createElement("label",{key:t.id,className:"right-aligned",__source:{fileName:oz,lineNumber:255,columnNumber:9}},s.createElement("span",{__source:{fileName:oz,lineNumber:256,columnNumber:11}},g()(n.dateAdded).format("ll")))}})):s.createElement(Xp,{key:n.id,node:n,inlineEditText:e.inlineEditText,onExpandClick:i,inManager:r,fullView:a,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,showBadge:e.showBadge,onMouseEnter:()=>hz(n),onMouseLeave:()=>pz(),__source:{fileName:oz,lineNumber:192,columnNumber:12}})}class Sz extends s.PureComponent{constructor(...e){super(...e),cz(this,"refTreeList",s.createRef()),cz(this,"state",{nodes:[],cutIds:[],showBadge:A.ZP.get(P.kPanelsShowFolderBadge)}),cz(this,"expandModel",{}),cz(this,"_onStoreChange",(()=>{this.onFilterChange(this.props.filter)})),cz(this,"onFilterChange",((e,t)=>{if(e&&e.length>0){const n={bookmarks:!0,folders:!0};if("tree"===this.refTreeList.current?.getSearchStyle()){const s=tn.ZP.getFilteredTree(e,n);this.setState({nodes:s.nodes,cutIds:tn.ZP.getCutIds()},t?.(s.collapsed))}else{const s=tn.ZP.getFilteredFlat(e,n);this.setState({nodes:s,cutIds:tn.ZP.getCutIds()},t?.([]))}}else this.setState({nodes:tn.ZP.getTopNodes(),cutIds:tn.ZP.getCutIds()},t?.([]))})),cz(this,"_onBadgeChanged",((e,t)=>{this.setState({showBadge:Boolean(t)})})),cz(this,"deleteSelectedItems",(()=>this.refTreeList.current?.onDelete())),cz(this,"expandAll",(()=>{this.refTreeList.current?.expandAll()})),cz(this,"collapseAll",(()=>{this.refTreeList.current?.collapseAll()})),cz(this,"setSearchStyle",(e=>{this.refTreeList.current?.setSearchStyle(e)})),cz(this,"onSearchStyleChanged",(e=>{this.props.filter&&this.onFilterChange(this.props.filter,(t=>{"tree"===e&&az.nextTick((()=>{this.refTreeList.current?.expandAllExcept(t)}))}))})),cz(this,"scrollToId",(e=>{this.refTreeList.current?.scrollToId(e)})),cz(this,"getTargetSpec",((e,t)=>{const n={...en.ZP.getEmptyNode(),id:e.id,index:0,parentId:void 0};if(bz(e)&&"on"!==t){const e=tn.ZP.getLastTopNode();e?(n.parentId=e.parentId,n.index=(e.index||0)+1):n.parentId=tn.ZP.getRootNode().id}else if(wz(e)&&"on"===t)n.parentId=e.id;else{Boolean(this.refTreeList.current?.isExpanded(e.id))&&"below"===t?n.parentId=e.id:(n.parentId=e.parentId,n.index=(e.index||0)+("below"===t?1:0))}return n})),cz(this,"onDrop",((e,t,n)=>{const s=this.getTargetSpec(t,n),i=s.parentId,r=s.index;return void 0===i||void 0===r?Promise.resolve([]):en.ZP.getUrlsFromEventPromise(e,!0).then((e=>{const t=e.map((e=>({...en.ZP.getEmptyNode(),url:e.url,title:e.title})));return this.onCreate(t,i,r,!1)}))})),cz(this,"onAdd",(e=>{const t=e?{title:(0,ue.Z)("title","New Folder")}:{};this.refTreeList.current?.onAdd(e,t)})),cz(this,"bookmarkActivePage",(async e=>{const t=this.refTreeList.current?.getParentAndIndex(e,!0),n=V.ZP.unsafeGetActivePage();if(void 0!==t?.parentId){const e=await i.Z.bookmarkPages(n,n.windowId,!1,t.parentId,t.index);"string"==typeof e&&this.refTreeList.current?.selectById(e)}})),cz(this,"bookmarkAllOpenPages",(async e=>{const t=this.refTreeList.current?.getParentAndIndex(e,!0);if(void 0!==t?.parentId){const e=await i.Z.bookmarkAllOpenPages(this.context.vivaldiWindowId,t.parentId,t.index);"string"==typeof e&&this.refTreeList.current?.selectById(e)}})),cz(this,"onRootPasteContextMenu",(e=>{document.addEventListener("paste",this.onRootPaste),document.execCommand("paste"),document.removeEventListener("paste",this.onRootPaste)})),cz(this,"onRootPaste",(e=>{i.Z.paste(e,tn.ZP.getRootNode().id,!0)})),cz(this,"getSelectedBookmarks",(()=>(this.refTreeList.current?.getAllSelectedItems()||[]).map((e=>en.ZP.getBookmarksByNode(e))).flat())),cz(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),cz(this,"_openInNewTab",(e=>{const t={bookmarks:this.getSelectedBookmarks(),inCurrent:!1,inBackground:e||A.ZP.get(P.kTabsOpenNewInBackground)};en.ZP.open(t,!0)})),cz(this,"_openBookmark",(()=>{const e={bookmarks:this.getSelectedBookmarks(),inCurrent:!0};en.ZP.open(e,!0)})),cz(this,"_supportSingleClick",(()=>A.ZP.get(P.kBookmarksSingleClickOpens)&&!this.props.inManager)),cz(this,"getMenuCapability",(async(e,t,n)=>{const s=Boolean(n)&&!bz(n)&&!tn.ZP.isSeparator(n);switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this._openInNewTab(!1),visible:s,...t(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this._openInNewTab(!0),visible:s&&!A.ZP.get(P.kTabsOpenNewInBackground),...t(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:this._openBookmark,visible:s,...t(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>Nz(!1,this.getSelectedBookmarks()),visible:s,...t(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>Nz(!0,this.getSelectedBookmarks()),visible:s,...t(e,{})};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":{const n=en.ZP.getUrlsByNodes(this.refTreeList.current?.getAllSelectedItems()||[]),i=await Us.getMenu(!0,n);return{visible:s&&i.length>0,items:i,...t(e,{})}}case"CONTEXT_SET_SPEEDDIAL":return{handler:()=>{i.Z.toggleSpeeddialFolder(n.id)},visible:Boolean(n)&&!uz(n)&&!vz(n)&&wz(n)&&tn.ZP.validateForEdit(n.id),...t(e,{})};case"CONTEXT_UNSET_SPEEDDIAL":return{handler:()=>{i.Z.toggleSpeeddialFolder(n.id)},visible:Boolean(n)&&!uz(n)&&vz(n)&&wz(n)&&tn.ZP.validateForEdit(n.id),...t(e,{})};case"CONTEXT_SET_BOOKMARK_BAR":{const s=Boolean(n)&&A.ZP.get(P.kBookmarksBarVisible)&&tn.ZP.getBookmarkBarFolderId()===n.id;return{handler:n?()=>i.Z.setBookmarkBarFolderAndToggleVisibility(n.id):()=>i.Z.setBookmarkBarFolderAndShow(tn.ZP.getRootId()),visible:!n||wz(n)&&!s&&!bz(n),...t(e,{})}}case"CONTEXT_UNSET_BOOKMARK_BAR":return{handler:()=>i.Z.setBookmarkBarFolderAndToggleVisibility(n.id),visible:Boolean(n)&&A.ZP.get(P.kBookmarksBarVisible)&&tn.ZP.getBookmarkBarFolderId()===n.id,...t(e,{})};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{handler:()=>async function(e){const t=tn.ZP.getBookmarkBarFolderId(),n=tn.ZP.getItemById(t);if(!n||tn.ZP.isDescendantOf(n,e))return;const s=tn.ZP.getItemById(e);s&&s.parentId!==t&&await h.Z.bookmarks.move(e,{parentId:t})}(n.id),visible:Boolean(n)&&!bz(n),...t(e,{})};case"CONTEXT_BOOKMARK":return{handler:n?()=>this.bookmarkActivePage(n):()=>this.bookmarkActivePage(tn.ZP.getRootNode()),visible:!bz(n),...t(e,{})};case"CONTEXT_BOOKMARK_ALL":return Promise.resolve({handler:n?()=>this.bookmarkAllOpenPages(n):()=>this.bookmarkAllOpenPages(tn.ZP.getRootNode()),visible:!bz(n),...t(e,{})});case"CONTEXT_EMPTY_TRASH":return{handler:()=>{i.Z.emptyTrash()},visible:Boolean(n)&&bz(n),...t(e,{})};default:return{...t(e,{})}}})),cz(this,"getMenuVisibility",((e,t)=>{if(t)if(bz(t))switch(e.action){case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}else{const n=bz(t)||tn.ZP.isSeparator(t);switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":case"CONTEXT_CUT":case"CONTEXT_COPY":case"CONTEXT_PASTE":return!n;case"CONTEXT_NEW_SEPARATOR":return!t.trash&&this.props.sorting.sortOrder===ti.Z.NO_SORTING;case"CONTEXT_RENAME":return tn.ZP.validateForEdit(t.id);case"CONTEXT_DELETE":return!bz(t);case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}else switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":case"CONTEXT_PASTE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;case"CONTEXT_NEW_SEPARATOR":return this.props.sorting.sortOrder===ti.Z.NO_SORTING;default:return!1}})),cz(this,"onContextMenu",(e=>{this.refTreeList.current?.onContextMenu(e)})),cz(this,"getDropSupport",((e,t)=>{const n=t.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===en.yR));return{available:n,onto:n&&wz(e),edge:!0}})),cz(this,"handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),cz(this,"onItemClick",((e,t)=>{e.button!==Nn.kCenter&&this._supportSingleClick()&&!wz(t)&&void 0===this.refTreeList.current?.getInlineEditId()&&this.openWithEventModifiers(e)})),cz(this,"onItemDoubleClick",((e,t)=>{e.button===Nn.kCenter||this._supportSingleClick()||wz(t)||this.openWithEventModifiers(e)})),cz(this,"onItemMouseUp",((e,t)=>{t.button===Nn.kCenter&&(this._openInNewTab(!0),t.preventDefault(),t.stopPropagation())})),cz(this,"openWithEventModifiers",(e=>{const t=(0,ai.Z)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey});en.ZP.open({...t,bookmarks:this.getSelectedBookmarks()},!0)})),cz(this,"getRowComponentProps",(e=>({...e,childCount:e.node.children?e.node.children.length:0,columns:this.props.columns||[],showBadge:this.state.showBadge}))),cz(this,"unSelectAll",(()=>{this.refTreeList.current?.unSelectAll()})),cz(this,"onSelect",(async e=>{if(e){const t=tn.ZP.getItemById(e.id);t&&this.props.onSelect(t)}else this.props.onSelect()})),cz(this,"onCreate",(async(e,t,n,s)=>{const r=await i.Z.createWithPromise(e,t,n),a=1===r.length&&tn.ZP.isSeparator(en.ZP.convertToPrivateType(r[0]));return this.props.onCreate(!a&&s),r}))}componentDidMount(){tn.ZP.addChangeListener(this._onStoreChange),A.ZP.addListener(P.kPanelsShowFolderBadge,this._onBadgeChanged),this.onFilterChange(this.props.filter,(()=>{const e=this.refTreeList.current?.getSelectedItem();e&&this.onSelect(e)}))}UNSAFE_componentWillReceiveProps(e){if(this.props.filter!==e.filter){const t=e.filter.length,n=this.props.filter.length;0===n&&t>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this.onFilterChange(e.filter,(e=>{t>0?az.nextTick((()=>{this.refTreeList.current?.expandAllExcept(e)})):n>0&&0===t&&az.nextTick((()=>{this.refTreeList.current?.expandWithModel(this.expandModel)}))}))}}componentWillUnmount(){A.ZP.removeListener(P.kPanelsShowFolderBadge,this._onBadgeChanged),tn.ZP.removeChangeListener(this._onStoreChange)}render(){const e={name:"bookmarklist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement(Sg,{ref:this.refTreeList,rowComponent:e=>s.createElement(yz,lz({},e,{onExpandClick:e=>this.handleExpandClick(e),inManager:this.props.inManager,fullView:this.props.fullView,__source:{fileName:oz,lineNumber:805,columnNumber:18}})),getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,cutIds:this.state.cutIds,onSelect:this.onSelect,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:gz,onItemMouseUp:this.onItemMouseUp,onItemsActivated:fz,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:i.Z.remove,onMove:i.Z.move,onEdit:this.props.onEdit,onCut:i.Z.cut,onCopy:i.Z.copy,onImport:se.Z.showImportData,isFolder:wz,isSeparator:tn.ZP.isSeparator,supportsInlineEdit:!0,menu:e,mimeType:en.yR,getDropSupport:this.getDropSupport,getDragData:tn.ZP.getDragData,hasChildren:Cz,settings:this.props.inManager?"BOOKMARKS_MANAGER":"BOOKMARKS_PANEL",multiSelect:!this._supportSingleClick(),setCutIds:i.Z.setCutIds,getTitle:tn.ZP.getTitle,saveTitle:_z,getTargetSpec:this.getTargetSpec,sorting:this.props.sorting,onDrop:this.onDrop,rootId:tn.ZP.getRootId(),isValidAddTarget:dz,isValidDragSource:Ez,isValidForClipboard:mz,isValidToEdit:tn.ZP.validateForEdit,validateForDrag:tn.ZP.validateForDrag,validateForDeletion:tn.ZP.validateForDeletion,columns:this.props.columns,__source:{fileName:oz,lineNumber:802,columnNumber:7}})}}cz(Sz,"contextType",Vs.Z);const Tz=Sz;var kz="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks-manager\\BookmarksManager.jsx";function Iz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Az=[{text:(0,ue.Z)("Title"),value:"title",fullScreenTitle:(0,ue.Z)("Sort by title"),width:300,visible:!0,key:!0},{text:(0,ue.Z)("Address"),value:"url",icon:cn.iD7,fullScreenTitle:(0,ue.Z)("Sort by address"),width:300,visible:!0},{text:(0,ue.Z)("Nickname"),value:"nickname",icon:cn.vvh.small,fullScreenTitle:(0,ue.Z)("Sort by nickname"),width:100,visible:!0},{text:(0,ue.Z)("Description"),value:"description",icon:cn.sWI,fullScreenTitle:(0,ue.Z)("Sort by description"),width:200,visible:!0},{text:(0,ue.Z)("Date Created"),value:"dateAdded",icon:cn.V_c,fullScreenTitle:(0,ue.Z)("Sort by creation date"),width:150,visible:!1}];class Zz extends s.PureComponent{constructor(...e){super(...e),Iz(this,"refEditor",s.createRef()),Iz(this,"refTree",s.createRef()),Iz(this,"state",{filter:"",sorting:{sortOrder:ti.Z.NO_SORTING,sortField:"manually",comparator:this.sortComparator},columns:gg().bookmarks||bg(Az)}),Iz(this,"onSortChange",((e,t)=>{const n={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:n});const s={sortOrder:e,sortField:t};st.Z.set(P.kBookmarksManagerSorting,s)})),Iz(this,"sortComparator",((e,t)=>tn.ZP.treeSortComparator(e,t,this.state.sorting))),Iz(this,"importData",(()=>{se.Z.showImportData()})),Iz(this,"focusTree",(()=>{this.refTree.current?.refTreeList.current?.focusTree()})),Iz(this,"onSelect",(e=>{this.refEditor.current?.setItem(e)})),Iz(this,"onCreate",(e=>{e&&this.refEditor.current?.setIsCreating(!0)})),Iz(this,"onEditorCanceled",((e,t)=>{const n=this.refTree.current;n&&t&&e?n.deleteSelectedItems()?.then((()=>{h.Z.bookmarks.remove(e),this.focusTree()})):this.focusTree()})),Iz(this,"onUpdateRow",(e=>{this.setState({columns:e})})),Iz(this,"onSaveRow",(()=>{pg(this.state.columns,"bookmarks")})),Iz(this,"getSelectedItem",(()=>this.refTree.current?.getSelectedItem())),Iz(this,"deleteItem",(()=>{this.refTree.current?.deleteSelectedItems()})),Iz(this,"_updateThumbnails",(()=>{const e=[],t=this.refTree.current?.getSelectedBookmarks();if(t)for(const n of tn.ZP.iterateTrees(t,!0))n.url&&e.push({id:n.id,url:n.url});qW.updateForBookmarks(e)})),Iz(this,"onSearchChange",(e=>{this.setState({filter:e.target.value})})),Iz(this,"createBookmark",(()=>{this.refTree.current?.onAdd(!1)})),Iz(this,"createFolder",(()=>{this.refTree.current?.onAdd(!0)})),Iz(this,"onContextMenu",(e=>{e.nativeEvent.buttons>0&&this.refTree.current?.unSelectAll(),this.refTree.current?.onContextMenu(e)}))}UNSAFE_componentWillMount(){const e=A.ZP.get(P.kBookmarksManagerSorting);this.onSortChange(e.sortOrder,e.sortField)}render(){return s.createElement("div",{className:"bookmark manager",__source:{fileName:kz,lineNumber:216,columnNumber:7}},s.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:kz,lineNumber:218,columnNumber:9}},s.createElement("input",{value:this.state.filter,onChange:this.onSearchChange,type:"search",tabIndex:"0",placeholder:(0,ue.Z)("verb","Search"),__source:{fileName:kz,lineNumber:219,columnNumber:11}}),s.createElement("div",{className:"toolbar-group",__source:{fileName:kz,lineNumber:226,columnNumber:11}},s.createElement(ko,{onClick:this.createBookmark,image:cn.md4.medium,tooltip:(0,ue.Z)("New Bookmark"),__source:{fileName:kz,lineNumber:227,columnNumber:13}}),s.createElement(ko,{onClick:this.deleteItem,image:cn.M2k.medium,tooltip:(0,ue.Z)("other","Delete"),__source:{fileName:kz,lineNumber:232,columnNumber:13}})),s.createElement(ko,{onClick:this.createFolder,image:cn._TQ.medium,title:(0,ue.Z)("command","New Folder"),__source:{fileName:kz,lineNumber:238,columnNumber:11}}),s.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:kz,lineNumber:244,columnNumber:11}},s.createElement(ko,{onClick:this.importData,image:cn.feZ.medium,title:(0,ue.Z)("Import..."),__source:{fileName:kz,lineNumber:245,columnNumber:13}}),s.createElement(ko,{onClick:this._updateThumbnails,image:cn.GO5.medium,title:(0,ue.Z)("Update Thumbnails"),__source:{fileName:kz,lineNumber:250,columnNumber:13}}))),s.createElement("div",{className:"manager-content",__source:{fileName:kz,lineNumber:258,columnNumber:9}},s.createElement("div",{className:"manager-treeview",__source:{fileName:kz,lineNumber:259,columnNumber:11}},s.createElement(RN,{fields:Az,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:A.ZP.get(P.kKeyboardTabToAll),__source:{fileName:kz,lineNumber:261,columnNumber:13}}),s.createElement("div",{className:"vivaldi-tree-container",onContextMenu:this.onContextMenu,__source:{fileName:kz,lineNumber:273,columnNumber:13}},s.createElement(Tz,{filter:this.state.filter,ref:this.refTree,fullView:!0,inManager:!0,onEdit:this.onSelect,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,columns:this.state.columns,__source:{fileName:kz,lineNumber:276,columnNumber:15}}))),s.createElement(rz,{ref:this.refEditor,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:kz,lineNumber:290,columnNumber:11}})))}}const Pz=Zz;var Dz="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TaskDueTimeEditor.jsx";const Mz=function(e){const{event:t,updateEvent:n}=e,i=s.createRef(),r=s.createRef(),a=s.useRef("");s.useEffect((()=>{"date"===a.current?r.current?.focus():"add"===a.current&&i.current?.focus(),a.current=""}),[i,r,a]);const o=s.useCallback((()=>{t.due=(0,AT.zX)(Date.now()),n(t),a.current="date"}),[t,n]),l=s.useCallback((()=>{t.due=0,n(t),a.current="add"}),[t,n]),c=(0,AT.Yu)(t);return s.createElement(s.Fragment,null,t.task&&!t.due&&s.createElement("input",{type:"button",onClick:o,value:(0,ue.Z)("Add Due Time"),tabIndex:e.tabIndex,ref:i,__source:{fileName:Dz,lineNumber:50,columnNumber:7}}),t.task&&!!t.due&&s.createElement(s.Fragment,null,s.createElement(yT,{className:"cal-event-date-picker",onChange:e.onDateChange,tabIndex:e.tabIndex,title:(0,ue.Z)("Task Due Date"),value:kT().tz(t.due,c).format("YYYY-MM-DD"),dayInputRef:r,__source:{fileName:Dz,lineNumber:60,columnNumber:7}}),!t.allDay&&s.createElement(Vu,{className:"cal-event-time-picker",disabled:t.allDay,onChange:e.onTimeChange,tabIndex:e.tabIndex,step:"5",title:(0,ue.Z)("Task Due Time"),value:t.allDay?"00:00":kT().tz(t.due,c).format("HH:mm"),__source:{fileName:Dz,lineNumber:69,columnNumber:9}}),s.createElement("input",{className:"circular",onClick:l,tabIndex:e.tabIndex,type:"button",title:(0,ue.Z)("Clear Due Time"),value:"x",__source:{fileName:Dz,lineNumber:79,columnNumber:7}})))};function Oz(){return Oz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Oz.apply(this,arguments)}function xz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Lz extends s.Component{constructor(e){super(e),xz(this,"shouldComponentUpdate",(()=>{const{document:e}=this.context;return!(this.element&&this.element===e.activeElement)})),xz(this,"setRef",(e=>{this.element=e,e&&this.props.setElementRef&&this.props.setElementRef(e)})),xz(this,"updateContent",(e=>{if(this.element){const e=this.element.innerText;this.props.updateContent(e||"")}}))}render(){const e=(this.props.className||"")+" editable",t=(0,Xs.Z)(this.props,["className","content","updateContent","formatter","setElementRef"]);return s.createElement("p",Oz({},t,{className:e,contentEditable:"plaintext-only",onBlur:this.updateContent,onInput:this.updateContent,ref:this.setRef,suppressContentEditableWarning:!0,"data-placeholder":this.props.placeholder?this.props.placeholder:"",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\Editable.jsx",lineNumber:55,columnNumber:7}}),this.props.formatter(this.props.content))}}xz(Lz,"contextType",Vs.Z);const Rz=Lz;class Bz extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{const{event:t,field:n}=this.props;(e&&e!==t[n]||!e&&t[n])&&this.props.updateEvent({...t,[n]:e})},(n="updateText")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const{event:e}=this.props;return s.createElement(Rz,{setElementRef:e=>{this.props.focusRef&&e&&(this.props.focusRef.current=e)},tabIndex:this.props.tabIndex,title:this.props.label,placeholder:this.props.label,className:`cal-event-${this.props.field}`,content:e[this.props.field],formatter:e=>e,updateContent:this.updateText,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TextEditor.jsx",lineNumber:25,columnNumber:7}})}}const Fz=Bz;var Uz="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\DateTimeEditor.jsx";function Vz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hz=[s.createElement("option",{key:"current",value:ru.ad,__source:{fileName:Uz,lineNumber:26,columnNumber:3}},(0,ue.Z)("Current ($1)",[kT().tz.guess()])),s.createElement("option",{key:"floating",value:ru.$T,__source:{fileName:Uz,lineNumber:27,columnNumber:3}},(0,ue.Z)("Always in Local Time")),s.createElement("option",{key:"UTC",value:"UTC",__source:{fileName:Uz,lineNumber:28,columnNumber:3}},"UTC")].concat(kT().tz.names().filter((e=>-1!==e.indexOf("/"))).map((e=>s.createElement("option",{key:e,value:e,__source:{fileName:Uz,lineNumber:31,columnNumber:14}},e))));function Wz(e,t,n){const s=(0,AT.Yu)(e),i=kT().tz(e[t],s).format("YYYY-MM-DD");return Gz(t,e,kT().tz(`${i} ${n}`,s).valueOf())}function zz(e,t,n){const s=(0,AT.Yu)(e),i=kT().tz(e[t],s).format("HH:mm"),r=kT().tz(`${n} ${i}`,s);return e.allDay&&"end"===t&&r.add(1,"day"),Gz(t,e,r.valueOf())}function Gz(e,t,n){if(!isNaN(n)){const s=A.ZP.get(P.kCalendarAutoAdjustEnd);if("start"===e&&("always"===s||"timed_only"===s&&!t.allDay)){const e=t.end-t.start;t.start=n,t.end=n+e}else t[e]=n}return t}class Kz extends s.Component{constructor(...e){super(...e),Vz(this,"createTimeHandler",(e=>t=>{const{value:n}=t.currentTarget;this.props.updateEvent(Wz(this.props.event,e,n))})),Vz(this,"createDateHandler",(e=>t=>{const{value:n}=t.currentTarget;this.props.updateEvent(zz(this.props.event,e,n))})),Vz(this,"setTimezone",(e=>{const{value:t}=e.currentTarget;t!==this.props.event.timezone&&this.props.updateEvent((0,AT.bn)(this.props.event,t))})),Vz(this,"setAllDay",(e=>{const{checked:t}=e.currentTarget;this.props.event.allDay=t,this.props.updateEvent(this.props.event)}))}render(){const{event:e}=this.props,{start:t,end:n}=(0,AT.aE)(e);return s.createElement("div",{__source:{fileName:Uz,lineNumber:118,columnNumber:7}},!e.task&&s.createElement(s.Fragment,null,s.createElement("div",{className:"edit-group large-gap",__source:{fileName:Uz,lineNumber:120,columnNumber:11}},s.createElement(yT,{className:"cal-event-date-picker",onChange:this.createDateHandler("start"),tabIndex:this.props.tabIndex,title:(0,ue.Z)("Event Start Date"),value:t.format("YYYY-MM-DD"),__source:{fileName:Uz,lineNumber:121,columnNumber:13}}),!e.allDay&&s.createElement(Vu,{className:"cal-event-time-picker",onChange:this.createTimeHandler("start"),ref:this.props.focusRef,tabIndex:this.props.tabIndex,step:"5",title:(0,ue.Z)("Event Start Time"),value:t.format("HH:mm"),__source:{fileName:Uz,lineNumber:129,columnNumber:15}})),s.createElement("div",{className:"edit-group large-gap",__source:{fileName:Uz,lineNumber:140,columnNumber:11}},s.createElement(yT,{className:"cal-event-date-picker",onChange:this.createDateHandler("end"),tabIndex:this.props.tabIndex,title:(0,ue.Z)("Event End Date"),value:n.format("YYYY-MM-DD"),__source:{fileName:Uz,lineNumber:141,columnNumber:13}}),!e.allDay&&s.createElement(Vu,{className:"cal-event-time-picker",onChange:this.createTimeHandler("end"),tabIndex:this.props.tabIndex,step:"5",title:(0,ue.Z)("Event End Time"),value:n.format("HH:mm"),__source:{fileName:Uz,lineNumber:149,columnNumber:15}}))),e.task&&s.createElement("div",{className:"edit-group large-gap",__source:{fileName:Uz,lineNumber:161,columnNumber:11}},s.createElement(Mz,{event:e,onDateChange:this.createDateHandler("due"),onTimeChange:this.createTimeHandler("due"),updateEvent:this.props.updateEvent,tabIndex:this.props.tabIndex,__source:{fileName:Uz,lineNumber:162,columnNumber:13}})),s.createElement("div",{className:"edit-group large-gap",__source:{fileName:Uz,lineNumber:171,columnNumber:9}},s.createElement("label",{__source:{fileName:Uz,lineNumber:172,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:e.allDay,onChange:this.setAllDay,tabIndex:this.props.tabIndex,__source:{fileName:Uz,lineNumber:173,columnNumber:13}}),s.createElement("span",{__source:{fileName:Uz,lineNumber:180,columnNumber:13}},(0,ue.Z)("All Day"))),s.createElement("label",{__source:{fileName:Uz,lineNumber:182,columnNumber:11}},s.createElement("select",{disabled:e.allDay,onChange:this.setTimezone,value:e.allDay?ru.$T:e.timezone,tabIndex:this.props.tabIndex,__source:{fileName:Uz,lineNumber:183,columnNumber:13}},Hz))),s.createElement(GA,{event:e,tabIndex:this.props.tabIndex,updateEvent:this.props.updateEvent,label:(0,ue.Z)("Notifications"),__source:{fileName:Uz,lineNumber:193,columnNumber:9}}))}}const jz=Kz;var Yz=n(81723),$z="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\RenderUtilities.jsx";const Xz=new DOMParser;function Qz(e){let t="";if(void 0!==e){t=`${g()(e).format("LT")}`}return t}function qz(e){const t=(0,ue.Z)("Ctrl/Cmd-click to follow link");return e.replace(/(href="([^"]*)")/gi,`$1 title="${t}\n\n$2"`)}function Jz(e){const t=e.target.closest("a");t&&e.currentTarget.contains(t)&&t.href&&(e.stopPropagation(),e.preventDefault(),$.Z.openURL(t.href))}const eG=(e,t,n)=>{let i=t.trim();if(!i)return null;const r=function(e){for(let t=0;t<e.length;t++)if("<"===e[t]){let n=0;for(let s=t+1;s<e.length;s++){const i=e[s];if("<"===i)n++;else if(">"===i){if(!n){if("/"===e[s-1]){t=s+1;break}{const n=e.slice(t+1,s),i=n.match(/\w+/i)?.[0];if(i){const n=`</${i}>`,r=e.indexOf(n,s);if(-1!==r){t=s+r+n.length+1;break}}e=`${e.slice(0,t)}&lt;${n}&gt;${e.slice(s+1)}`,t=s+6;break}}n--}if(s===e.length-1){e=`${e.slice(0,t)}&lt;${e.slice(t+1)}`;break}}}return e}(i);return i=function(e){return-1===e.indexOf("<")||Xz.parseFromString(e,"text/html").body?.innerText===e}(r)?(e=>{const t=e.match(/(\n|[^\r\n]+)/g);return t&&1!==t.length?t.map((e=>-1!==e.indexOf("\n")?"<br />":e.startsWith("-::")?`<p class="delimiter">${e}</p>`:`<p>${e}</p>`)).join(""):e})(be(i)):(0,wy.sanitize)(i,{FORBID_TAGS:["style"]}),s.createElement("span",{ref:n,className:`cal-event-${e}`,key:e,onClick:Jz,dangerouslySetInnerHTML:{__html:qz(i)},__source:{fileName:$z,lineNumber:159,columnNumber:5}})},tG=(e,t,n,i)=>{const r=Gc.Z.getCalendars();if(0===r.length)return s.createElement("div",{__source:{fileName:$z,lineNumber:191,columnNumber:7}},(0,ue.Z)("You have no calendars set up, event can not be saved"));const a=e.calendarId??Gc.Z.getDefaultCalendar()?.id,o=r.find((e=>e.id===a));if(!o)return;const l=Gc.Z.getAccounts().find((e=>e.id===o.accountId));if(!l)return;if("ical"===l.account_type)return s.createElement("div",{__source:{fileName:$z,lineNumber:212,columnNumber:12}},s.createElement("label",{__source:{fileName:$z,lineNumber:213,columnNumber:7}},(0,ue.Z)("Calendar Name")),s.createElement("p",{__source:{fileName:$z,lineNumber:214,columnNumber:7}},o.description||o.name));let c=[];if("google"===l.account_type&&e.task)c=Kc.Z.getLocalGoogleTasksCalendars(l);else{const e=Gc.Z.getAccounts().filter((e=>"ical"===e.account_type)).map((e=>e.id));c=(0,Yz.Z)(Gc.Z.getCalendars(),e,((e,t)=>e.accountId===t));const t=Kc.Z.getLocalGoogleTasksCalendars(l).map((e=>e.id));c=(0,Yz.Z)(c,t,((e,t)=>e.id===t))}let u=c.find((e=>e.id===a));return u||(u=c[0]),s.createElement(ko,{className:"CalendarSelector",title:u.description||u.name,image:Kc.Z.createCalendarIcon(u,10),menu:()=>function(e){return e.map((e=>{const n=Kc.Z.createCalendarIconPNG(e);return{handler:()=>t(e.id),label:e.description||e.name,labelEnglish:e.description||e.name,iconPNG:n,iconPNGWhite:n}}))}(c),menuOrigin:"bottomLeft",__source:{fileName:$z,lineNumber:248,columnNumber:5}})};var nG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\BasicsEditor.jsx";function sG(){return sG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sG.apply(this,arguments)}function iG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rG extends s.Component{constructor(...e){super(...e),iG(this,"createTimeHandler",(e=>t=>{const{value:n}=t.currentTarget;this.props.updateEvent(Wz(this.props.event,e,n))})),iG(this,"createDateHandler",(e=>t=>{const{value:n}=t.currentTarget;this.props.updateEvent(zz(this.props.event,e,n))})),iG(this,"onCalendarChange",(e=>{this.props.event.calendarId=e.target.value,this.props.updateEvent(this.props.event)})),iG(this,"onCalendarSelected",(e=>{a.Z.setDefaultCalendarId(e),this.props.event.calendarId=e,this.props.updateEvent(this.props.event)}))}render(){const{event:e}=this.props,{start:t,end:n}=(0,AT.aE)(e);return s.createElement(s.Fragment,null,s.createElement("div",{className:"edit-group large-gap",__source:{fileName:nG,lineNumber:52,columnNumber:9}},s.createElement(Fz,sG({...this.props,label:(0,ue.Z)("Title"),field:"title"},{__source:{fileName:nG,lineNumber:53,columnNumber:11}}))),s.createElement("div",{className:"edit-group large-gap",__source:{fileName:nG,lineNumber:61,columnNumber:9}},!e.task&&e.allDay&&s.createElement(s.Fragment,null,s.createElement(yT,{className:"cal-event-date-picker",onChange:this.createDateHandler("start"),tabIndex:this.props.tabIndex,title:(0,ue.Z)("Event Start Date"),value:t.format("YYYY-MM-DD"),__source:{fileName:nG,lineNumber:63,columnNumber:13}}),s.createElement("span",{__source:{fileName:nG,lineNumber:70,columnNumber:13}},"-"),s.createElement(yT,{className:"cal-event-date-picker",onChange:this.createDateHandler("end"),tabIndex:this.props.tabIndex,title:(0,ue.Z)("Event End Date"),value:n.format("YYYY-MM-DD"),__source:{fileName:nG,lineNumber:71,columnNumber:13}})),!e.task&&!e.allDay&&s.createElement(s.Fragment,null,s.createElement(Vu,{className:"cal-event-time-picker",onChange:this.createTimeHandler("start"),tabIndex:this.props.tabIndex,step:"5",title:(0,ue.Z)("Event Start Time"),value:t.format("HH:mm"),__source:{fileName:nG,lineNumber:80,columnNumber:13}}),s.createElement("span",{__source:{fileName:nG,lineNumber:88,columnNumber:13}},"-"),s.createElement(Vu,{className:"cal-event-time-picker",onChange:this.createTimeHandler("end"),tabIndex:this.props.tabIndex,step:"5",title:(0,ue.Z)("Event End Time"),value:n.format("HH:mm"),__source:{fileName:nG,lineNumber:89,columnNumber:13}})),e.task&&s.createElement(Mz,{event:e,updateEvent:this.props.updateEvent,onDateChange:this.createDateHandler("due"),onTimeChange:this.createTimeHandler("due"),tabIndex:this.props.tabIndex,__source:{fileName:nG,lineNumber:99,columnNumber:13}})),e&&s.createElement("div",{className:"edit-group large-gap capped-width",__source:{fileName:nG,lineNumber:110,columnNumber:11}},tG(e,this.onCalendarSelected,this.props.tabIndex)))}}const aG=rG;var oG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\ParticipantsEditor.jsx";function lG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cG={ACCEPTED:{icon:cn.wHY,text:(0,ue.Z)("Has accepted the invite")},DECLINED:{icon:cn.dHk,text:(0,ue.Z)("Has declined the invite")},TENTATIVE:{icon:cn.owS,text:(0,ue.Z)("Has tentatively accepted the invite")},"NEEDS-ACTION":{icon:cn.DvK,text:(0,ue.Z)("Has not replied to the invite")},DELEGATED:{icon:cn.upG.large,text:(0,ue.Z)("Has delegated invite to another person")}};class uG extends s.Component{constructor(e){super(e),lG(this,"contacts",new Map),lG(this,"showNoMailWarning",!1),lG(this,"stopEnterEvent",(e=>{e.keyCode===$s.Z.KEY_RETURN&&e.stopPropagation()})),lG(this,"contactSelected",(e=>{if(!e.length)return;const t=e.pop(),{event:n}=this.props,s={id:"",event_id:n.id,name:t.name,address:t.address,sent:!1};n.invites?n.invites=[s,...n.invites]:n.invites=[s],this.props.updateEvent(n),this.contacts=this.getRemainingContacts(this.contacts),this.forceUpdate()})),lG(this,"removeInvite",((e,t)=>{const{event:n}=this.props;if(!n.invites||0===n.invites.length)return;const{invites:s}=n,i=s.findIndex((t=>t.address===e));if(-1===i)return;s.splice(i,1);const r=t.target.closest(".calendar-event");if(r instanceof HTMLElement){const e=ii(r);e.forEach(((n,s)=>{n===t.target&&e[s-1]&&e[s-1].focus()}))}this.props.updateEvent(n),this.contacts=this.getRemainingContacts(ra.Z.getMailAddresses()),this.forceUpdate()})),this.contacts=this.getRemainingContacts(ra.Z.getMailAddresses())}getRemainingContacts(e){const{event:t}=this.props;if(!t.invites||0===t.invites.length)return e;const n=new Set(t.invites.map((e=>e.address)));return new Map([...e.entries()].filter((([e,t])=>!n.has(e))))}render(){const{event:e}=this.props,t=(e.invites||[]).filter((t=>t.address!==e.organizer));return e.task?s.createElement("div",{className:"cal-event-participants",__source:{fileName:oG,lineNumber:130,columnNumber:14}},s.createElement("p",{className:"info",__source:{fileName:oG,lineNumber:131,columnNumber:9}},(0,ue.Z)("Participants not supported for Tasks"))):s.createElement("div",{className:"cal-event-participants",__source:{fileName:oG,lineNumber:138,columnNumber:7}},s.createElement(RS,{ref:this.props.focusRef,id:"foo_this_property_is_not_used",allItems:this.contacts,itemSelectionCallback:this.contactSelected,selectedItems:[],placeholder:this.props.label,tabIndex:this.props.tabIndex,__source:{fileName:oG,lineNumber:141,columnNumber:9}}),!!e.invites?.length&&s.createElement("div",{className:"cal-event-participantslist",__source:{fileName:oG,lineNumber:151,columnNumber:11}},e.organizer&&s.createElement("div",{key:e.organizer,className:"cal-event-participant",title:(0,ue.Z)("Event Organizer"),__source:{fileName:oG,lineNumber:153,columnNumber:15}},s.createElement("span",{className:"cal-event-participant-status",dangerouslySetInnerHTML:{__html:cn.LaO.small},__source:{fileName:oG,lineNumber:158,columnNumber:17}}),s.createElement("span",{className:"cal-event-participant-address",__source:{fileName:oG,lineNumber:164,columnNumber:17}},e.organizer),s.createElement("input",{onClick:this.removeInvite.bind(this,e.organizer||""),onKeyDown:this.stopEnterEvent,tabIndex:this.props.tabIndex,type:"button",value:(0,ue.Z)("verb","Remove"),__source:{fileName:oG,lineNumber:167,columnNumber:17}})),t.map(((e,t)=>{const n=e.partstat||"NEEDS-ACTION",i=cG[n]?cG[n]:cG["NEEDS-ACTION"];return s.createElement("div",{key:e.address,className:"cal-event-participant",title:i.text,__source:{fileName:oG,lineNumber:184,columnNumber:17}},s.createElement("span",{className:"cal-event-participant-status",dangerouslySetInnerHTML:{__html:i.icon},__source:{fileName:oG,lineNumber:189,columnNumber:19}}),s.createElement("span",{className:"cal-event-participant-address",__source:{fileName:oG,lineNumber:195,columnNumber:19}},e.address),s.createElement("input",{onClick:this.removeInvite.bind(this,e.address),onKeyDown:this.stopEnterEvent,tabIndex:this.props.tabIndex,type:"button",value:(0,ue.Z)("verb","Remove"),__source:{fileName:oG,lineNumber:198,columnNumber:19}}))}))),!A.ZP.get(P.kCalendarMailAccount)&&s.createElement("p",{className:"info",__source:{fileName:oG,lineNumber:212,columnNumber:11}},(0,ue.Z)("In order to send invitations you will need to select a mail account in calendar settings.")))}}const mG=uG,dG=e=>{const{editor:t}=s.useContext(tD),n=s.useCallback((()=>{a.Z.saveEventEdit(t)}),[t]),i=s.useCallback((()=>{a.Z.cancelEventChange(t)}),[t]),r=s.useCallback((e=>{a.Z.updateEventEdit(t,e)}),[t]),o=s.useCallback((()=>{a.Z.trashEvent(t,e.id)}),[t,e]),l=s.useCallback((n=>{a.Z.selectEvent(t,{event:e}),n?al.Z.cut(W.ZP.getId()):al.Z.copy(W.ZP.getId())}),[e,t]),c=s.useCallback((()=>[{handler:()=>l(!0),...(0,Mn.Z)("verb","Cut")},{handler:()=>l(!1),...(0,Mn.Z)("verb","Copy")},{handler:o,...(0,Mn.Z)("Delete Event")}]),[o,l]);return{saveEvent:n,discardChanges:i,updateEvent:r,trashEvent:o,getContextMenu:c}};var hG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventFull.jsx";function pG(){return pG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pG.apply(this,arguments)}const gG=e=>{const{event:t}=e,{updateEvent:n,getContextMenu:i}=dG(t),r=s.useRef(),o=s.useContext(Vs.Z),{document:l,getSelection:c}=o;s.useEffect((()=>{const e=r.current,t=c();if(e&&t){e.focus();const n=l.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}),[l,c]);const u={updateEvent:n,event:t,tabIndex:0},m=t=>s=>{const{value:i}=s.currentTarget;n(Wz(e.event,t,i))},d=t=>s=>{const{value:i}=s.currentTarget;n(zz(e.event,t,i))},h=(t,s)=>{e.event[t]=s.currentTarget.checked,e.event.task&&(e.event.invites=[]),n(e.event)},{start:p,end:g}=(0,AT.aE)(t);return s.createElement("div",{className:"CalendarEventFull",onContextMenu:e=>{(0,Hs.Z)(o.vivaldiWindowId,i())(e)},style:{backgroundImage:cn.wo7},__source:{fileName:hG,lineNumber:123,columnNumber:5}},s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:128,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.NNg.small},__source:{fileName:hG,lineNumber:129,columnNumber:9}}),s.createElement(Fz,pG({},u,{field:"title",label:(0,ue.Z)("Title"),focusRef:r,__source:{fileName:hG,lineNumber:133,columnNumber:9}}))),s.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:hG,lineNumber:141,columnNumber:7}},s.createElement(Fz,pG({},u,{field:"description",label:(0,ue.Z)("Description"),__source:{fileName:hG,lineNumber:142,columnNumber:9}}))),!t.task&&s.createElement(s.Fragment,null,s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:150,columnNumber:9}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.hcy.small},__source:{fileName:hG,lineNumber:151,columnNumber:11}}),s.createElement("div",{__source:{fileName:hG,lineNumber:155,columnNumber:11}},s.createElement(yT,{onChange:d("start"),title:(0,ue.Z)("Event Start Date"),value:p.format("YYYY-MM-DD"),__source:{fileName:hG,lineNumber:156,columnNumber:13}}),!t.allDay&&s.createElement(Vu,{onChange:m("start"),step:"5",title:(0,ue.Z)("Event Start Time"),value:p.format("HH:mm"),__source:{fileName:hG,lineNumber:162,columnNumber:15}}),"–",!t.allDay&&s.createElement(Vu,{onChange:m("end"),step:"5",title:(0,ue.Z)("Event End Time"),value:g.format("HH:mm"),__source:{fileName:hG,lineNumber:171,columnNumber:15}}),s.createElement(yT,{onChange:d("end"),title:(0,ue.Z)("Event End Date"),value:g.format("YYYY-MM-DD"),__source:{fileName:hG,lineNumber:178,columnNumber:13}}))),s.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:hG,lineNumber:185,columnNumber:9}},s.createElement("div",{className:"edit-group",__source:{fileName:hG,lineNumber:186,columnNumber:11}},s.createElement("label",{__source:{fileName:hG,lineNumber:187,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:t.allDay,onChange:t=>{const{checked:s}=t.currentTarget;e.event.allDay=s,n(e.event)},__source:{fileName:hG,lineNumber:188,columnNumber:15}}),s.createElement("span",{__source:{fileName:hG,lineNumber:194,columnNumber:15}},(0,ue.Z)("All Day")))))),t.task&&s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:201,columnNumber:9}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.hcy.small},__source:{fileName:hG,lineNumber:202,columnNumber:11}}),s.createElement(Mz,{event:t,updateEvent:n,onDateChange:d("due"),onTimeChange:m("due"),__source:{fileName:hG,lineNumber:206,columnNumber:11}})),(!t.task||!!t.due)&&s.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:hG,lineNumber:216,columnNumber:9}},s.createElement("div",{className:"edit-group",__source:{fileName:hG,lineNumber:217,columnNumber:11}},s.createElement("label",{__source:{fileName:hG,lineNumber:218,columnNumber:13}},s.createElement("select",{disabled:t.allDay,onChange:t=>{const{value:s}=t.currentTarget;s!==e.event.timezone&&n((0,AT.bn)(e.event,s))},value:t.allDay?ru.$T:t.timezone,__source:{fileName:hG,lineNumber:219,columnNumber:15}},Hz)))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:231,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.wo7.small},__source:{fileName:hG,lineNumber:232,columnNumber:9}}),s.createElement("div",{className:"edit-group",__source:{fileName:hG,lineNumber:236,columnNumber:9}},s.createElement("label",{__source:{fileName:hG,lineNumber:237,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:t.task,disabled:t.task,onChange:h.bind(null,"task"),__source:{fileName:hG,lineNumber:238,columnNumber:13}}),s.createElement("span",{__source:{fileName:hG,lineNumber:245,columnNumber:13}},(0,ue.Z)("Is a Task"))),s.createElement("label",{__source:{fileName:hG,lineNumber:247,columnNumber:11}},s.createElement("input",{disabled:!t.task,type:"checkbox",checked:t.complete,onChange:h.bind(null,"complete"),__source:{fileName:hG,lineNumber:248,columnNumber:13}}),s.createElement("span",{__source:{fileName:hG,lineNumber:255,columnNumber:13}},(0,ue.Z)("Complete"))))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:260,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.sel.small},__source:{fileName:hG,lineNumber:261,columnNumber:9}}),s.createElement(Fz,pG({},u,{field:"location",label:(0,ue.Z)("Location"),__source:{fileName:hG,lineNumber:265,columnNumber:9}}))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:272,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:cn.ghF.small},__source:{fileName:hG,lineNumber:273,columnNumber:9}}),s.createElement("div",{className:"CalendarEventFull-Recurrence",__source:{fileName:hG,lineNumber:277,columnNumber:9}},s.createElement(RT,pG({},u,{field:"recurrence",label:"recurrence",__source:{fileName:hG,lineNumber:278,columnNumber:11}})))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:286,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.iD7},__source:{fileName:hG,lineNumber:287,columnNumber:9}}),s.createElement(Fz,pG({},u,{field:"url",label:(0,ue.Z)("URL"),__source:{fileName:hG,lineNumber:291,columnNumber:9}}))),t.attachment&&t.attachment.length>0&&s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:299,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:cn.onv},__source:{fileName:hG,lineNumber:300,columnNumber:9}}),t.attachment.map((e=>s.createElement("div",{className:"CalendarEventFull-Attachment",key:e.url,__source:{fileName:hG,lineNumber:305,columnNumber:11}},s.createElement("a",{onClick:()=>$.Z.openURL(e.url),title:e.url,__source:{fileName:hG,lineNumber:306,columnNumber:13}},e.filename||e.url))))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:317,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:cn.l0O.small},__source:{fileName:hG,lineNumber:318,columnNumber:9}}),s.createElement("div",{className:"CalendarEventFull-Notifications",__source:{fileName:hG,lineNumber:322,columnNumber:9}},s.createElement(GA,{event:t,updateEvent:n,buttonText:(0,ue.Z)("Add Notification"),__source:{fileName:hG,lineNumber:323,columnNumber:11}}))),s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:331,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:cn.LaO.small},__source:{fileName:hG,lineNumber:332,columnNumber:9}}),s.createElement("div",{className:"CalendarEventFull-Notifications",__source:{fileName:hG,lineNumber:336,columnNumber:9}},s.createElement(mG,pG({},u,{field:"attendees",label:(0,ue.Z)("Type to add Participants"),__source:{fileName:hG,lineNumber:337,columnNumber:11}})))),t.calendarId!==ru.xu&&s.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:hG,lineNumber:346,columnNumber:7}},s.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:cn.bcq.small},__source:{fileName:hG,lineNumber:347,columnNumber:9}}),tG(t,(e=>{a.Z.setDefaultCalendarId(e),t.calendarId=e,n(t)}))))};var bG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventBubble.jsx";const NG=function(e){const t=s.useContext(Vs.Z),n=s.useRef(s.createRef().current),i=s.useRef(),r=s.useCallback(((e,n)=>{i.current||(i.current=requestAnimationFrame((()=>{(async function(e,t,n){const s=e.current,i=t.current;if(!s||!i)return;const r=s.parentElement?.getBoundingClientRect()||{left:0,top:0,bottom:0},a=s.getBoundingClientRect(),o=i.getBoundingClientRect(),l=o.left-r.left,c=n.innerWidth-o.right;c>=a.width?(s.style.left=o.right-r.left+"px",s.style.right="auto",s.classList.remove("CalendarEventBubble--RightArrow"),s.classList.add("CalendarEventBubble--LeftArrow")):l>=a.width?(s.style.right=n.innerWidth-o.left+"px",s.style.left="auto",s.classList.remove("CalendarEventBubble--LeftArrow"),s.classList.add("CalendarEventBubble--RightArrow")):l>c?(s.style.left="0px",s.style.right="auto",s.classList.remove("CalendarEventBubble--LeftArrow"),s.classList.add("CalendarEventBubble--RightArrow")):(s.style.right="0px",s.style.left="auto",s.classList.remove("CalendarEventBubble--RightArrow"),s.classList.add("CalendarEventBubble--LeftArrow"));const u=s.querySelector(".CalendarEventBubble-Arrow"),m=o.top-r.top,d=n.innerHeight-o.bottom,h=(a.height-o.height)/2;if(m>h&&d>h){if(s.style.top=o.top-r.top-h+"px",s.style.bottom="auto",u){const e=h+o.height/2;u.style.top=`${e}px`}}else if(d<h){if(s.style.bottom="0px",s.style.top="auto",u){const e=Math.min(a.height-20,a.height-d-o.height/2+20);u.style.top=`${e}px`}}else if(s.style.top="0px",s.style.bottom="auto",u){const e=Math.max(20,o.top-r.top+o.height/2);u.style.top=`${e}px`}})(e,n,t).then((()=>{i.current=null}))})))}),[i,t]);return s.useEffect((()=>{function s(){r(n,e.eventRef)}const i=new ResizeObserver(s),a=e.eventRef.current?.closest(".calendar-viewport");return a&&a.addEventListener("scroll",s),t.addEventListener("resize",s),e.eventRef.current&&i.observe(e.eventRef.current),r(n,e.eventRef),()=>{a&&a.removeEventListener("scroll",s),e.eventRef.current&&i.unobserve(e.eventRef.current),t.removeEventListener("resize",s)}}),[e.eventRef,r,t]),s.createElement("div",{className:"CalendarEventBubble",ref:n,"data-top":"225px",__source:{fileName:bG,lineNumber:137,columnNumber:5}},s.createElement("div",{className:"CalendarEventBubble-Arrow",__source:{fileName:bG,lineNumber:142,columnNumber:7}}),s.createElement("div",{className:"CalendarEventBubble-Inner",__source:{fileName:bG,lineNumber:143,columnNumber:7}},s.createElement(gG,{event:e.event,__source:{fileName:bG,lineNumber:144,columnNumber:9}}),s.createElement("div",{className:"CalendarEventBubble-Buttons",__source:{fileName:bG,lineNumber:145,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("calendar","Done"),onClick:e.saveEvent,__source:{fileName:bG,lineNumber:146,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("calendar","Cancel"),onClick:e.discardChanges,__source:{fileName:bG,lineNumber:151,columnNumber:11}}))))};var fG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventResizer.jsx";function _G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vG extends s.PureComponent{constructor(...e){super(...e),_G(this,"state",{resizeMode:"",eventResized:"",resizeBox:{top:0,bottom:0},resizePosition:0}),_G(this,"onResizeMouseDown",((e,t,n)=>{e.preventDefault(),e.stopPropagation(),document.addEventListener("mousemove",this.onResizeMouseMove),document.addEventListener("mouseup",this.onResizeMouseUp);const s=e.currentTarget.parentElement.getBoundingClientRect();this.setState({resizeMode:n,eventResized:t.id,resizeBox:{top:s.top,bottom:s.bottom},resizePosition:e.clientY})})),_G(this,"onResizeMouseMove",(e=>{const t=e.clientY;this.setState((e=>e.resizeMode?{resizePosition:t}:null))})),_G(this,"onResizeMouseUp",(e=>{document.removeEventListener("mousemove",this.onResizeMouseMove),document.removeEventListener("mouseup",this.onResizeMouseUp),this.setState((e=>{if(!e.resizeMode)return null;const t=this.props.event,{newTime:n=g()()}=this.getResizedTime(t);if("bottom"===e.resizeMode){const e=t.start;a.Z.moveEvent(this.context.editor,t.id,{start:e,end:n.valueOf()})}else{const e=t.end;a.Z.moveEvent(this.context.editor,t.id,{start:n.valueOf(),end:e})}return{resizeMode:"",eventResized:"",resizeBox:{top:0,bottom:0},resizePosition:0}}))})),_G(this,"getResizedTime",(e=>{let t=0,n=0,s=0;if(this.state.resizeMode){const{top:e,bottom:i}=this.state.resizeBox,r=i-e;if(s="bottom"===this.state.resizeMode?Math.max(this.state.resizePosition-e,5):Math.max(i-this.state.resizePosition,5),s<r)t=s/r;else{n=(s-r)/((document.body.getBoundingClientRect().height-200)/24)}}let i=0;const r=6e4*this.props.stepSize;if(t){const n=e.end-e.start;i="bottom"===this.state.resizeMode?e.start+n*t:e.end-n*t}else n&&(i="bottom"===this.state.resizeMode?e.end+n*ru.QI:e.start-n*ru.QI);return i=Math.round(i/r)*r,"bottom"===this.state.resizeMode?i=Math.min(g()(e.end).endOf("day").valueOf(),i):"top"===this.state.resizeMode&&(i=Math.max(g()(e.start).startOf("day").valueOf(),i)),{newTime:g()(i),overlayHeight:s}}))}render(){if(this.props.disabled||!this.props.stepSize)return s.createElement(s.Fragment,null,this.props.children);const e=this.props.event;let t,n={};if(this.state.resizeMode){const s=this.getResizedTime(e),i=s.overlayHeight,r=Gc.Z.getCalendars().find((t=>t.id===e.calendarId));n={...Kc.Z.getCalendarColors(r)},t=s.newTime,n.height=i||0,"bottom"===this.state.resizeMode?n.top=0:"top"===this.state.resizeMode&&(n.bottom=0)}return s.createElement(s.Fragment,null,s.createElement("div",{onMouseDown:t=>this.onResizeMouseDown(t,e,"top"),className:"calendar-event-resizer",__source:{fileName:fG,lineNumber:179,columnNumber:9}}),this.props.children,s.createElement("div",{className:"calendar-event-resizer",onMouseDown:t=>this.onResizeMouseDown(t,e,"bottom"),__source:{fileName:fG,lineNumber:184,columnNumber:9}}),this.state.resizeMode&&s.createElement("div",{className:"calendar-event-resize-overlay",style:n,__source:{fileName:fG,lineNumber:189,columnNumber:11}},t?t.format("LT"):""))}}_G(vG,"contextType",tD);const EG=vG;var CG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\DescriptionEditor.jsx";function wG(){return wG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wG.apply(this,arguments)}class yG extends s.Component{render(){const{event:e}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{className:"edit-group large-gap",__source:{fileName:CG,lineNumber:17,columnNumber:9}},s.createElement(Fz,wG({...this.props,label:(0,ue.Z)("Description"),field:"description"},{__source:{fileName:CG,lineNumber:18,columnNumber:11}}))),s.createElement("div",{className:"edit-group",__source:{fileName:CG,lineNumber:27,columnNumber:9}},s.createElement(Fz,wG({...this.props,label:(0,ue.Z)("URL"),field:"url"},{__source:{fileName:CG,lineNumber:28,columnNumber:11}}))),e.attachment&&e.attachment.length>0&&s.createElement("div",{className:"cal-event-attchments",__source:{fileName:CG,lineNumber:38,columnNumber:9}},e.attachment.map((e=>s.createElement("div",{className:"cal-event-attachment",key:e.url,__source:{fileName:CG,lineNumber:40,columnNumber:13}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.UEH.small},__source:{fileName:CG,lineNumber:41,columnNumber:15}}),s.createElement("a",{onClick:()=>$.Z.openURL(e.url),title:e.url,__source:{fileName:CG,lineNumber:42,columnNumber:15}},e.filename||e.url))))))}}const SG=yG;var TG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\EventTabs.jsx";class kG extends s.PureComponent{render(){return s.createElement("div",{className:"cal-edit-tabs",ref:e=>{e&&!e.classList.contains("right-edge")&&requestAnimationFrame((()=>{const t=e.getBoundingClientRect().right,n=e.closest(".calendar-viewport");n&&t>n.getBoundingClientRect().right&&e.classList.add("right-edge")}))},__source:{fileName:TG,lineNumber:18,columnNumber:7}},this.props.tabs.map((e=>{const{id:t,label:n,icon:i}=e;return s.createElement("button",{className:bn()("cal-edit-tab",{selected:this.props.currentTabId===t}),dangerouslySetInnerHTML:{__html:i},key:`tab-${t}`,onClick:this.props.onSelectTab.bind(null,t),tabIndex:"-1",title:n,__source:{fileName:TG,lineNumber:38,columnNumber:13}})})))}}const IG=kG;var AG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TaskEditor.jsx";class ZG extends s.Component{constructor(...e){var t,n,s;super(...e),s=(e,t)=>{this.props.event[e]=t.currentTarget.checked,this.props.event.task&&(this.props.event.invites=[]),this.props.updateEvent(this.props.event)},(n="changeField")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const{event:e}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{className:"edit-group large-gap",__source:{fileName:AG,lineNumber:22,columnNumber:9}},s.createElement("label",{__source:{fileName:AG,lineNumber:23,columnNumber:11}},s.createElement("input",{type:"checkbox",ref:this.props.focusRef,checked:e.task,disabled:e.task,onChange:this.changeField.bind(null,"task"),tabIndex:this.props.tabIndex,__source:{fileName:AG,lineNumber:24,columnNumber:13}}),s.createElement("span",{__source:{fileName:AG,lineNumber:33,columnNumber:13}},(0,ue.Z)("Is a Task")))),s.createElement("div",{className:"edit-group",__source:{fileName:AG,lineNumber:36,columnNumber:9}},s.createElement("label",{__source:{fileName:AG,lineNumber:37,columnNumber:11}},s.createElement("input",{disabled:!e.task,type:"checkbox",checked:e.complete,onChange:this.changeField.bind(null,"complete"),tabIndex:e.task?this.props.tabIndex:-1,__source:{fileName:AG,lineNumber:38,columnNumber:13}}),s.createElement("span",{__source:{fileName:AG,lineNumber:46,columnNumber:13}},(0,ue.Z)("Complete")))))}}const PG=ZG,DG="basics";const MG=function(e,t,n,i){const r=s.useContext(Vs.Z),[a,o]=s.useState({tabId:DG,toFocus:""}),l=s.useRef({});l.current={currentTabState:a,tabs:e,editing:n};const c=s.useRef(!1),u=s.useRef(null),m=(e,t)=>{if(e.tabIndex<0){const t=e.tabIndex;e.tabIndex=0,e.focus(),e.tabIndex=t}else e.focus();const n=r.getSelection();if(n)if(e instanceof HTMLInputElement&&"number"===e.type)e.select();else{if(n.focusNode&&n.focusNode.childNodes[n.focusOffset]===e)return;{const s=r.document.createRange();if(!(s&&e instanceof HTMLElement))return;s.selectNodeContents(e);const i=e.hasChildNodes()?e.childNodes[0]:null;if(t&&i)try{s.setStart(i,t.start),s.setEnd(i,t.end)}catch(e){s.collapse(!1),at.ZP.error("Calendar","Setting caret position failed!",e)}else s.collapse(!1);n.removeAllRanges(),n.addRange(s)}}},d=s.useCallback(((t,n="")=>{const s=l.current.currentTabState.tabId;if(!e.get(t)||t===s)return;const i=e.get(s),a=i&&i.containerRef.current,c=r.getSelection();if(a&&a.contains(r.document.activeElement)){const e=[];if(c)for(let t=0;t<c.rangeCount;t++)e.push(c.getRangeAt(t));const t={element:r.document.activeElement,ranges:e};i&&(i.storedFocus=t)}r.document.activeElement&&r.document.activeElement.blur(),o({tabId:t,toFocus:n})}),[e,r]);return s.useEffect((()=>{const e=e=>{const{tabs:t,currentTabState:n}=l.current,s=t.get(n.tabId);let i;"next"===e?(i=s&&s.index+1||0,i=i<t.size?i:0):(i=s&&s.index-1||0,i=i<0?t.size-1:i);const r=[...t.values()].find((e=>e.index===i)),a="next"===e?"first":"last";d(r&&r.id||DG,a)},n=e.bind(null,"next"),s=e.bind(null,"previous"),r=t=>{const{changeTab:n,direction:s}=(e=>{const t=ST.Z[e.keyCode];return"PageUp"===t||"Tab"===t&&e.altKey&&e.shiftKey?{changeTab:!0,direction:"previous"}:"PageDown"===t||"Tab"===t&&e.altKey?{changeTab:!0,direction:"next"}:{changeTab:!1,direction:"next"}})(t);n&&(t.preventDefault(),e(s))},a=e=>{const{tabs:t,currentTabState:n}=l.current;let s;t.forEach((t=>{const n=t.containerRef.current;n&&e.target instanceof HTMLElement&&n.contains(e.target)&&(s=t.id)})),s&&s!==n.tabId&&d(s)},o=i&&i[0].current,c=i&&i[1].current;o&&o.addEventListener("focusin",s),c&&c.addEventListener("focusin",n);const u=t.current;return u&&(u.addEventListener("keydown",r),u.addEventListener("focusin",a)),()=>{u&&(u.removeEventListener("keydown",r),u.removeEventListener("focusin",a)),o&&o.removeEventListener("focusin",s),c&&c.removeEventListener("focusin",n)}}),[n,t,d,i]),s.useEffect((()=>{const s=n&&!1===c.current;if(c.current=n,!n)return;const o=t.current,l=r.getSelection(),d=e.get(a.tabId);if(o&&d)if(s){e.forEach((e=>e.storedFocus=null)),o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});const t=d.focusRef&&d.focusRef.current;t&&m(t,u.current)}else if(i&&["first","last"].includes(a.toFocus)){let e=[];if(o instanceof HTMLElement&&(e=ii(o)),i&&i.length&&(e=Array.from(e).slice(1,-1)),e.length)"first"===a.toFocus?m(e[0]):m(e[e.length-1]);else{const e=d.focusRef&&d.focusRef.current;e&&m(e)}}else if(d.storedFocus){const e=d.storedFocus;e.element&&e.element.focus(),l&&(l.removeAllRanges(),e.ranges.forEach((e=>l.addRange(e))))}else if(!o.contains(r.document.activeElement)){const e=d.focusRef&&d.focusRef.current;e&&m(e)}}),[n,a]),[a.tabId,e=>d(e,"first")]};var OG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEvent.jsx";function xG(){return xG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xG.apply(this,arguments)}const LG=[P.kCalendarEditMode,P.kCalendarDisplayEventIcons],RG=[["basics",(0,ue.Z)("Basic Event Info"),cn.NNg.small],["time",(0,ue.Z)("Date and Time"),cn.hcy.small],["recurrence",(0,ue.Z)("Recurrence"),cn.ghF.small],["location",(0,ue.Z)("Location"),cn.sel.small],["description",(0,ue.Z)("Description"),cn.iD7],["task",(0,ue.Z)("Task"),cn.wo7.small],["participants",(0,ue.Z)("Type to add Participants"),cn.LaO.small]],BG=e=>{const t=function(e){const{start:t,end:n,due:s}=(0,AT.aE)(e,!0);let i,r="";return i=e.allDay?g().localeData().longDateFormat("LL"):"LT",e.start&&e.end&&t.valueOf()===n.valueOf()?r=`${t.format(i)}`:e.start&&e.end?r=`${t.format(i)}-${n.format(i)}`:e.start&&e.due?r=`${t.format(i)}-${s.format(i)}`:e.due&&(r=`${s.format(i)}`),r}(e),n=xT(e.recurrence);let s=`${e.title||""}`;return t&&(s+=` (${t})`),e.location&&(s+=`\n${e.location}`),e.description&&(s+=`\n${e.description}`),n&&(s+=`\n${n}`),s};function FG(e){["Space","Enter"].includes(ST.Z[e.keyCode])&&e.stopPropagation()}function UG(e){const t=s.useContext(tD),n=s.useContext(Vs.Z),i=(e,t)=>e.length>=t?`${e.substring(0,t)}...`:e||"",r=s.useRef(new Map(RG.map(((e,t)=>{const[n,i,r]=e;return[n,{id:n,label:i,icon:r,index:t,focusRef:s.createRef(),containerRef:s.createRef(),storedFocus:null}]})))),{event:o,isSelected:l,isEditing:c,isAllDay:u,isFiltering:m}=e,d=s.useRef(null),h=s.useRef(null),p=s.useRef(null),g=(0,$Z.Z)(LG),[b,N]=MG(r.current,d,c,[h,p]),{saveEvent:f,discardChanges:_,updateEvent:v,trashEvent:E,getContextMenu:C}=dG(o),w=r.current.get("title"),y=w&&w.focusRef||s.createRef(),S=r.current.get("time"),T=S&&S.focusRef||s.createRef(),k=""===o.id,I=g[P.kCalendarEditMode];const A=s.useCallback((()=>{k?_():E()}),[_,E,k]);let Z;if(c&&"popup"===I){const e=document.querySelector("#main > .inner");e&&(t.isActivePage||t.isPanel)&&(Z=pn.createPortal(s.createElement(NG,{event:o,eventRef:d,saveEvent:f,discardChanges:_,__source:{fileName:OG,lineNumber:188,columnNumber:9}}),e))}return s.createElement(s.Fragment,null,s.createElement(EG,{event:o,disabled:c&&"popup"===I||!e.resizeStepSize,stepSize:e.resizeStepSize||0,__source:{fileName:OG,lineNumber:200,columnNumber:5}},s.createElement("div",{className:bn()("calendar-event",{selected:l||c,editing:c&&"inline"===I,"all-day":u,solid:"solid"===e.displayStyle,"filtered-out":o.filteredOut,"task-completed":o.task&&o.complete,compact:"compact"===t.displayDensity,"event-passed":!m&&!c&&o.end&&o.end<Date.now()}),style:Kc.Z.getEventColors(o.calendarId),ref:d,onContextMenu:function(e){a.Z.selectEvent(t.editor,{event:o}),(0,Hs.Z)(n.vivaldiWindowId,C())(e)},title:BG(o),__source:{fileName:OG,lineNumber:205,columnNumber:7}},c&&"inline"===I&&s.createElement(IG,{tabs:Array.from(r.current.values()),currentTabId:b,onSelectTab:N,__source:{fileName:OG,lineNumber:222,columnNumber:11}}),s.createElement("div",{className:"cal-event-body",__source:{fileName:OG,lineNumber:228,columnNumber:9}},c&&"inline"===I&&s.createElement(s.Fragment,null,s.createElement("span",{className:"sentry",tabIndex:"0",ref:h,__source:{fileName:OG,lineNumber:233,columnNumber:13}}),Array.from(r.current.values(),(e=>{const{id:t,label:n,focusRef:i}=e,r=b===t,a=r?0:-1,l={event:o,updateEvent:v,field:t,label:n,focusRef:i,tabIndex:a};let c;switch(t){case"basics":c=s.createElement(aG,xG({},l,{__source:{fileName:OG,lineNumber:249,columnNumber:29}}));break;case"recurrence":c=s.createElement(RT,xG({},l,{__source:{fileName:OG,lineNumber:252,columnNumber:29}}));break;case"description":c=s.createElement(SG,xG({},l,{__source:{fileName:OG,lineNumber:255,columnNumber:29}}));break;case"time":c=s.createElement(jz,xG({},l,{__source:{fileName:OG,lineNumber:258,columnNumber:29}}));break;case"task":c=s.createElement(PG,xG({},l,{__source:{fileName:OG,lineNumber:261,columnNumber:29}}));break;case"participants":c=s.createElement(mG,xG({},l,{__source:{fileName:OG,lineNumber:264,columnNumber:29}}));break;default:c=s.createElement("div",{className:"edit-group",__source:{fileName:OG,lineNumber:268,columnNumber:21}},s.createElement(Fz,xG({},l,{__source:{fileName:OG,lineNumber:269,columnNumber:23}})))}return s.createElement("div",{key:e.id,ref:e.containerRef,className:bn()("cal-event-body-edit",{selected:r}),__source:{fileName:OG,lineNumber:274,columnNumber:17}},c,s.createElement("div",{className:"cal-event-body-buttons",__source:{fileName:OG,lineNumber:282,columnNumber:19}},s.createElement("input",{onClick:f,onKeyDown:FG,tabIndex:a,type:"submit",value:(0,ue.Z)("calendar","Done"),__source:{fileName:OG,lineNumber:283,columnNumber:21}}),s.createElement("input",{onClick:A,onKeyDown:FG,tabIndex:a,type:"button",value:k?(0,ue.Z)("Cancel"):(0,ue.Z)("verb","Delete"),__source:{fileName:OG,lineNumber:290,columnNumber:21}})))})),s.createElement("span",{className:"sentry",tabIndex:"0",ref:p,__source:{fileName:OG,lineNumber:301,columnNumber:13}})),(!c||"popup"===I)&&s.createElement(s.Fragment,null,s.createElement("div",{className:"cal-event-header",__source:{fileName:OG,lineNumber:307,columnNumber:13}},!u&&"transparent"===e.displayStyle&&!o.task&&s.createElement("span",{className:"cal-event-dot",dangerouslySetInnerHTML:{__html:Kc.Z.getEventSquircle()},__source:{fileName:OG,lineNumber:310,columnNumber:17}}),o.task&&s.createElement("input",{type:"checkbox",checked:o.complete,onChange:function(t){const{checked:n}=t.target;e.event.complete=n,a.Z.updateEvent(e.event,void 0,!0)},onClick:e=>e.stopPropagation(),tabIndex:l?"0":"-1",__source:{fileName:OG,lineNumber:319,columnNumber:17}}),!u&&!!o.start&&s.createElement("span",{className:"cal-event-time",ref:T,__source:{fileName:OG,lineNumber:329,columnNumber:17}},Qz(o.start)),!u&&!o.start&&!!o.due&&s.createElement("span",{className:"cal-event-time",ref:T,__source:{fileName:OG,lineNumber:335,columnNumber:17}},Qz(o.due)),eG("title",((e,n,s)=>{switch(t.displayDensity){case"full":default:return e;case"compact":return i(e,n);case"minimal":return s?i(e,s):""}})(o.title,80,80),y),g[P.kCalendarDisplayEventIcons]&&s.createElement("div",{className:"cal-event-icons",__source:{fileName:OG,lineNumber:344,columnNumber:17}},o.url&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.iD7},__source:{fileName:OG,lineNumber:346,columnNumber:21}}),o.location&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.sel.small},__source:{fileName:OG,lineNumber:349,columnNumber:21}}),!(!o.notifications||!o.notifications.length)&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.l0O.small},__source:{fileName:OG,lineNumber:352,columnNumber:21}}),Kc.Z.isRecurringEvent(o)&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.ghF.small},__source:{fileName:OG,lineNumber:355,columnNumber:21}}),o.attachment&&o.attachment.length>0&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.UEH.small},__source:{fileName:OG,lineNumber:358,columnNumber:21}}))),"minimal"!==t.displayDensity&&s.createElement("div",{className:"cal-event-body-content",__source:{fileName:OG,lineNumber:365,columnNumber:13}},eG("description",o.description||""),eG("location",o.location||""),eG("url",o.url||"")))))),Z)}const VG=(e,t)=>!e.isEditing&&!t.isEditing&&(e.event===t.event&&e.isSelected===t.isSelected&&e.isAllDay===t.isAllDay&&e.isFiltering===t.isFiltering),HG=s.memo(UG,VG),WG="vivaldi/x-calendar-event",zG="vivaldi/x-calendar-create-event";var GG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarGridEvent.jsx";const KG=function(e){const{event:t,position:n,isActiveEditor:i,editor:r,editingEvent:o,eventKeyDown:l,displayStyle:c,isDragging:u,isFiltering:m,selectedEvent:d,setIsDragging:h}=e,[p,g]=s.useState("");return s.useMemo((function(){const e=Kc.Z.isAllDayEvent(t),b=u&&p===t.id,N=t.id===d,f=!!o&&o.id===t.id&&i,_=f&&o?o:t,v=Kc.Z.generateKey(t);return s.createElement("div",{key:`${v}-${n?n.gridRowStart:""}`,className:bn()("event-dragger",{dragged:b,selected:N||f}),style:n,draggable:!0,onDragStart:f?Rx.Z:e=>{if(e.dataTransfer){const{id:n,calendarId:s}=t;e.dataTransfer.setData(WG,JSON.stringify({id:n,calendarId:s})),e.stopPropagation(),h(!0),g(t.id)}},onDragEnd:e=>{e.dataTransfer.types.some((e=>e===WG))&&e.stopPropagation(),h(!1),g("")},onClick:e=>{(!o||o&&o.id!==t.id)&&a.Z.editEvent(r,t)},onKeyDown:e=>l(e,t),ref:e=>{N&&e&&requestAnimationFrame((()=>{e.scrollIntoViewIfNeeded({block:"nearest",inline:"nearest"})}))},__source:{fileName:GG,lineNumber:84,columnNumber:7}},s.createElement(HG,{displayStyle:c,event:_,isEditing:f,isSelected:N,resizeStepSize:e?0:5,isAllDay:e,isFiltering:m,__source:{fileName:GG,lineNumber:105,columnNumber:9}}))}),[o,t,r,p,l,i,u,m,n,d,h,c])};var jG="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\MonthDayPicker.jsx";const YG=function(e){const t=e.date.clone(),n=new Date,i=n.getFullYear(),r=n.getMonth(),o=n.getDate(),l=e.date.year(),c=e.date.month(),u=e.date.week(),m=e.date.date();t.startOf("month").subtract(1,"week").startOf("week");const d=[];for(;d.length<7;){const e=t.format("dd");d.push(s.createElement("div",{key:e,className:"MonthDayPicker-DayOfWeek",__source:{fileName:jG,lineNumber:29,columnNumber:7}},e)),t.add(1,"day")}const h=e.date.clone().endOf("month");for(;t.isSameOrBefore(h)||0!==t.weekday();){const n=t.date()===o&&t.month()===r&&t.year()===i,h=t.date()===m&&t.month()===c&&t.year()===l,p=t.week()===u&&t.year()===l;d.push(s.createElement("div",{className:bn()("MonthDayPicker-Day",{"MonthDayPicker-Day--Current":n,"MonthDayPicker-Day--Selected":h,"MonthDayPicker-Day--SelectedWeek":p&&!h&&!n,"MonthDayPicker-Day--OtherMonth":t.month()!==r}),key:t.format("M-D"),onClick:a.Z.selectDate.bind(null,e.pageId,t.clone()),__source:{fileName:jG,lineNumber:42,columnNumber:7}},t.date())),t.add(1,"day")}return s.createElement("div",{className:"MonthDayPicker",__source:{fileName:jG,lineNumber:60,columnNumber:5}},s.createElement("header",{className:"MonthDayPicker-Header",__source:{fileName:jG,lineNumber:61,columnNumber:7}},s.createElement("h2",{className:"MonthDayPicker-Month",__source:{fileName:jG,lineNumber:62,columnNumber:9}},e.date.format("MMMM"))),d)},{minimalCreateEvent:$G}=Kc.Z;function XG(e,t,n){const[i,r]=s.useState(null),[o,l]=s.useState(""),{document:c,getComputedStyle:u}=s.useContext(Vs.Z),m=s.useRef(),d=s.useRef((()=>{})),h=s.useRef({dragging:!1,cancelled:!1,currentX:null,currentY:null,initialTime:0,initialEndTime:0,initialStartRow:0,initialEndRow:0,initialLeftCol:0,initialRightCol:0});s.useEffect((()=>{const e=c.createElement("div");e.classList.add("calendar-drag-image"),m.current=e,c.body?.append(e)}),[c]);const p=s.useCallback((()=>{e&&l({gridTemplateColumns:u(e).gridTemplateColumns,gridTemplateRows:u(e).gridTemplateRows})}),[e,u]),g=s.useCallback((()=>{l(null)}),[]),b=s.useCallback((()=>{r(null),h.current.dragging=!1,h.current.cancelled=!1,h.current.initialTime=0,h.current.initialStartRow=0,h.current.currentX=null,h.current.currentY=null,g()}),[g]);return d.current=s.useCallback((()=>{if(h.current.dragging){const n=t(e,h.current,i);n?r(n):b(),requestAnimationFrame(d.current)}else h.current.cancelled||i&&a.Z.editEvent(n,null,$G({start:i.startTime,end:i.endTime,allDay:i.isAllDay})),b()}),[b,i,n,e,t]),{gridFrozen:o,handlers:{onDragStart:e=>{e.dataTransfer.items.length||(m.current&&e.dataTransfer.setDragImage(m.current,0,0),e.dataTransfer.setData(zG,!0),h.current.dragging=!0,h.current.currentX=e.clientX,h.current.currentY=e.clientY,p(),e.stopPropagation(),requestAnimationFrame(d.current))},onDragOver:e=>{e.dataTransfer.types.some((e=>e===zG))&&(h.current.currentX=e.clientX,h.current.currentY=e.clientY,e.stopPropagation(),e.preventDefault())},onDragEnd:e=>{"none"===e.dataTransfer.dropEffect&&(h.current.dragging=!1,h.current.cancelled=!0,e.stopPropagation(),e.preventDefault())},onDrop:e=>{e.dataTransfer.types.some((e=>e===zG))&&(h.current.currentX=e.clientX,h.current.currentY=e.clientY,h.current.dragging=!1,e.stopPropagation())}},overlay:i}}var QG=n(23542),qG=n(90870);function JG(e){return e.task?e.start?{start:e.start,end:e.due||0}:{start:e.due||0,end:e.due?e.due+1:0}:{start:e.start,end:e.end}}const eK=(e,t=!1)=>{const n=t?Math.ceil:Math.floor,s=new Date(e);let i=s.getHours();return 0===i&&t&&(i=24),4*i+n(s.getMinutes()/15)},tK=(e,t)=>{e.items.forEach((n=>{const s=rK(e.items,n,t).sort(((e,t)=>e.stacking-t.stacking));let i=0;for(;s[i]&&i===s[i].stacking;)i++;n.stacking=i,n.adjacent=s}))},nK=e=>{e.items.forEach((e=>{const t=new Set(e.adjacent.map((e=>e.stacking))).size;e.stackSize=t+1}))},sK=(e,t)=>0===t?e:sK(t,e%t),iK=(e,t)=>e*t/sK(e,t),rK=(e,t,n)=>e.filter((e=>(!!t.events||e.event.id!==t.event.id)&&("day"===n?e.startRow<t.endRow&&e.endRow>t.startRow:e.startCol<t.endCol&&e.endCol>t.startCol))),aK=mo()(2)(((e,t,n)=>{let s=((e,t)=>{e.sort(((e,t)=>{const{start:n,end:s}=JG(e),{start:i,end:r}=JG(t);if(n!==i)return n-i;const a=s-n,o=r-i;return a!==o?o-a:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)}));const n=e.map((e=>{const{start:t,end:n}=JG(e),s=eK(t),i=eK(n,!0);return{event:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startRow:s,endRow:i>s?i:s+1,startCol:0,endCol:0}}));return{columns:-1,maxStackSize:0,items:n}})(e);return tK(s,"day"),nK(s),s=(e=>{const t=[...new Set(e.items.map((e=>e.stackSize)))],n=t.reduce(((e,t)=>t>e?t:e),-1),s=t.reduce(((e,t)=>iK(e,t)),1),i=s/n;return{columns:s,maxStackSize:n,items:e.items.map((e=>(e.startCol=e.stacking*i,e.endCol=(e.stacking+1)*i,e)))}})(s),(e=>{e.items.sort(((e,t)=>t.stacking-e.stacking)).forEach((t=>{t.canExpand=t.stacking!==e.maxStackSize-1&&!t.adjacent.filter((e=>e.stacking===t.stacking+1)).some((e=>!1===e.canExpand))}))})(s),(e=>{e.items.filter((e=>e.canExpand)).sort(((e,t)=>{const n=e.adjacent.filter((e=>e.canExpand)).length,s=t.adjacent.filter((e=>e.canExpand)).length;return n===s?e.stacking-t.stacking:s-n})).forEach((t=>{const n=e.columns/e.maxStackSize,s=t.adjacent.filter((e=>e.stacking>t.stacking)),i=s.filter((e=>e.canExpand)),r=s.filter((e=>!e.canExpand)),a=((0===r.length?e.maxStackSize*n:r.reduce(((e,t)=>t.startCol<e?t.startCol:e),1/0))-t.startCol)/((new Set(i.map((e=>e.stacking))).size+1)*n),o=Math.round(n*a-n);t.endCol+=o,t.canExpand=!1,i.forEach((e=>{e.startCol+=o,e.endCol+=o}))}))})(s),s}));const oK=mo()(2)(((e,t,n)=>{let s=function(e,t,n){const s=t.clone().startOf("day"),i=e=>{let{start:t,end:i}=JG(e);return i===g()(i).startOf("day").valueOf()&&(i-=1),[(0,Q_.default)(g()(t).diff(s,"day"),0,n-1),(0,Q_.default)(g()(i).diff(s,"day")+1,1,n)]};let[r,a]=(0,qG.Z)(e,(e=>{const[t,n]=i(e);return n-t>1}));const o=r.sort(((e,t)=>{const{start:n,end:s}=JG(e),{start:i,end:r}=JG(t),a=(s||Q.Lc)-n,o=(r||Q.Lc)-i;return a!==o?o-a:n!==i?n-i:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)})).map((e=>{const[t,n]=i(e);return{event:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startCol:t,endCol:n,startRow:0,endRow:0}}));a=a.sort(((e,t)=>{if(!e.id||!t.id)return e.id?-1:1;const n=Kc.Z.isAllDayEvent(e);if(n!==Kc.Z.isAllDayEvent(t))return n?-1:1;const{start:s,end:i}=JG(e),{start:r,end:a}=JG(t);if(s!==r)return s-r;const o=(i||Q.Lc)-s,l=(a||Q.Lc)-r;return o!==l?l-o:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)}));const l=[],c=s.clone();for(;c.diff(s,"day")<n;){const e=Kc.Z.filterEventsByPeriod(a,c,"day"),t=(0,Q_.default)(c.diff(s,"day"),0,n-1);l.push({events:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startCol:t,endCol:t+1,startRow:0,endRow:0,date:c.valueOf()}),c.add(1,"day")}return{rows:-1,maxStackSize:0,items:o,multiEventItems:l}}(e,t,n);return tK(s,"week"),nK(s),s=(e=>{const t=[...new Set(e.items.map((e=>e.stackSize)))].reduce(((e,t)=>t>e?t:e),0);return{rows:t,maxStackSize:t,items:e.items.map((e=>(e.startRow=e.stacking,e.endRow=e.stacking+1,e))),multiEventItems:e.multiEventItems}})(s),s=(e=>{const t=e.multiEventItems.length?e.rows+1:e.rows,n=e.multiEventItems.map((n=>{const s=rK(e.items,n,"week"),i=Math.max(0,...s.map((e=>e.endRow)));return{...n,startRow:i,endRow:t}}));return{...e,rows:t,multiEventItems:n}})(s),s}));var lK="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarDaysGrid.jsx";function cK(){return cK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cK.apply(this,arguments)}const uK=(0,QG.extendMoment)(g()),mK=[P.kCalendarClickOutside,P.kCalendarDisplayWeekNumber],{minimalCreateEvent:dK,getDisplayRange:hK}=Kc.Z,pK=mo()(2)((function(e,t,n){const s=hK(t,n),i=[],r=s.start.clone(),a="week"===n?2:7;for(;r<s.end;){const t=r.valueOf(),n=t+a*ru.hd,s=Kc.Z.filterEventsByPeriod(e,r,"day",a).map((e=>e.start<t||e.end>n?{...e,id:`${e.id}-${r.dayOfYear()}`}:e));i.push(oK(s,r,a)),r.add(a,"day")}return{grids:i,displayRange:s}}));function gK(e,t){const n=e?.querySelectorAll(".calendar-drop-target");if(n){const e=!t.initialTime,s=t.currentX||1e5,i=t.currentY||1e5,r=[...n].find((e=>{const t=e.getBoundingClientRect();return t.bottom>i&&t.right>s}));if(r&&e&&(t.initialTime=parseInt(r.dataset.date),t.initialStartRow=parseInt(r.style.gridRowStart),t.initialEndRow=t.initialStartRow+parseInt(r.style.gridRowEnd.match(/\d/)?.[0]),t.initialLeftCol=parseInt(r.style.gridColumnStart),t.initialRightCol=t.initialLeftCol+1),r){const e=t.initialLeftCol,n=t.initialStartRow,s=parseInt(r.style.gridColumnStart),i=parseInt(r.style.gridRowStart);let a,o,l,c,u,m,d=!0;return n<i?(a=e,o=parseInt(r.style.gridColumnStart)+1,l=n,c=parseInt(r.style.gridRowStart)+parseInt(r.style.gridRowEnd.match(/\d/)?.[0])):n>i?(a=s,o=t.initialRightCol,l=i,c=t.initialEndRow,d=!1):(l=n,c=t.initialEndRow,e<=s?(a=e,o=parseInt(r.style.gridColumnStart)+1):(a=parseInt(r.style.gridColumnStart),o=t.initialRightCol,d=!1)),d?(u=t.initialTime,m=parseInt(r.dataset.date)):(u=parseInt(r.dataset.date),m=t.initialTime),{startCol:a,endCol:o,startRow:l,endRow:c,startTime:u,endTime:m,isAllDay:!0}}}}function bK(e){const t=(0,$Z.Z)(mK);if(!e.overlay)return null;const{startRow:n,endRow:i,startCol:r,endCol:a,startTime:o,endTime:l}=e.overlay,c="week"===e.displayMode?1:2,u=t[P.kCalendarDisplayWeekNumber]&&"week"!==e.displayMode?2:1,m="week"===e.displayMode?2:7;return e.grids.reduce((([e,t],c)=>{const d=c.rows+2,h=t===n,p=t+d===i,g=bn()("calendar-drag-overlay",{left:h,right:p});if(h){const i={gridRowStart:n,gridRowEnd:t+d,gridColumnStart:r,gridColumnEnd:p?a:u+m};e.push(s.createElement("div",{key:t,className:g,style:i,__source:{fileName:lK,lineNumber:229,columnNumber:9}},s.createElement("div",{className:"start-time",__source:{fileName:lK,lineNumber:230,columnNumber:11}},h&&s.createElement(s.Fragment,null,uK(o).format("L"))),s.createElement("div",{className:"end-time",__source:{fileName:lK,lineNumber:233,columnNumber:11}},p&&s.createElement(s.Fragment,null,uK(l).format("L")))))}else if(t>n&&t<i){const n={gridRowStart:t,gridRowEnd:t+d,gridColumnStart:u,gridColumnEnd:p?a:u+m};e.push(s.createElement("div",{key:t,className:g,style:n,__source:{fileName:lK,lineNumber:245,columnNumber:9}},s.createElement("div",{className:"start-time",__source:{fileName:lK,lineNumber:246,columnNumber:11}},h&&s.createElement("span",{__source:{fileName:lK,lineNumber:247,columnNumber:25}},uK(o).format("L"))),s.createElement("div",{className:"end-time",__source:{fileName:lK,lineNumber:249,columnNumber:11}},p&&s.createElement("span",{__source:{fileName:lK,lineNumber:250,columnNumber:23}},uK(l).format("L")))))}return[e,t+d]}),[[],c])}function NK(e){const t=e.showWeekNumber?2:1,n=uK().startOf("week");return[...Array(7).keys()].map((e=>{const i=s.createElement(s.Fragment,{key:e,__source:{fileName:lK,lineNumber:264,columnNumber:7}},s.createElement("header",{style:{gridColumnStart:e+t},className:"calendar-header-date",__source:{fileName:lK,lineNumber:265,columnNumber:9}},n.format("dddd")));return n.add(1,"days"),i}))}function fK(e){const[t,n]=s.useState(""),i=(0,$Z.Z)(mK),r=e.displayRange.start.valueOf(),o=i[P.kCalendarDisplayWeekNumber]&&"week"!==e.displayMode,l=s.useMemo((()=>{const l=e=>{e.dataTransfer.types.some((e=>e===WG))&&(e.preventDefault(),e.stopPropagation())},c=uK(r),u=o?2:1,m=e.filter.anchorDate.month(),d=(new Date).getMonth(),h=(new Date).getDate(),p="week"===e.displayMode?2:7;let g="week"===e.displayMode?2:3;return e.grids.flatMap(((r,b)=>{const N=[];return o&&N.push(s.createElement(s.Fragment,{key:b,__source:{fileName:lK,lineNumber:379,columnNumber:11}},s.createElement("div",{className:"week-number",style:{gridRowStart:g-1,gridRowEnd:`span ${r.rows+2}`},__source:{fileName:lK,lineNumber:380,columnNumber:13}},s.createElement("span",{className:"week-number-value",__source:{fileName:lK,lineNumber:387,columnNumber:15}},c.week())))),[...Array(p).keys()].forEach((o=>{if("week"===e.displayMode&&3===b&&1===o)return;const p=`${b}-${o}`,f=c.valueOf(),_=c.month()===m,v=Number(c.format("E"))>5,E="week"!==e.displayMode&&(0===b&&0===o||1===c.date()),C=c.date()===h&&c.month()===d,w=c.isSame(e.filter.selectedDate,"day"),y=t=>((t,n)=>{"click"===t.type&&t.stopPropagation();const s=n+(new Date).getHours()*ru.QI;if(a.Z.selectDate(e.editor.pageId,uK(s),!0),Gc.Z.getEditState().eventDraft)switch(i[P.kCalendarClickOutside]){case"cancel":a.Z.cancelEventEdit(e.editor);break;case"save_and_close":a.Z.saveEventEdit(e.editor);break;case"save_and_new":"contextmenu"===t.type?(a.Z.saveEventEdit(e.editor),a.Z.selectDate(e.editor.pageId,uK(s),!0)):a.Z.editEvent(e.editor,null,dK({start:s}))}else"contextmenu"===t.type?a.Z.selectDate(e.editor.pageId,uK(s),!0):a.Z.editEvent(e.editor,null,dK({start:s}))})(t,f);N.push(s.createElement(s.Fragment,{key:p,__source:{fileName:lK,lineNumber:410,columnNumber:11}},s.createElement("div",{className:bn()("calendar-drop-target",{current:C,"dragged-over":p===t,"out-of-view":"month"===e.displayMode&&!_,weekend:v}),"data-date":f,style:{gridRowStart:g-1,gridRowEnd:`span ${r.rows+2}`,gridColumnStart:o+u},onDragEnter:e=>((e,t)=>{e.dataTransfer.types.some((e=>e===WG))&&(e.preventDefault(),e.stopPropagation(),n(t))})(e,p),onDragOver:l,onDragLeave:e=>((e,t)=>{e.dataTransfer.types.some((e=>e===WG))&&(e.preventDefault(),e.stopPropagation(),n((e=>e===t?"":t)))})(e,p),onDrop:t=>((t,s)=>{const i=t.dataTransfer;if(i.types.some((e=>e===WG))){t.preventDefault(),t.stopPropagation();const r=JSON.parse(i.getData(WG)).id.split("-")[0];e.events.find((e=>e.id===r))&&(a.Z.moveEvent(e.editor,r,{start:s,byDateOnly:!0}),n(""))}})(t,f),onClick:y,onContextMenu:y,__source:{fileName:lK,lineNumber:411,columnNumber:13}},s.createElement("span",{className:C?"current-day":"day",ref:e=>{w&&e&&requestAnimationFrame((()=>{e.scrollIntoView({block:"nearest",inline:"nearest"})}))},__source:{fileName:lK,lineNumber:432,columnNumber:15}},c.format("D")),"week"===e.displayMode&&s.createElement("span",{__source:{fileName:lK,lineNumber:445,columnNumber:17}},c.format("ddd")),E&&s.createElement("span",{className:"month",__source:{fileName:lK,lineNumber:448,columnNumber:17}},c.format("MMM"))))),c.add(1,"day")})),g+=r.rows+2,N}))}),[t,r,e.displayMode,e.filter,e.grids,i,e.editor,e.events,o]),c=[...l],u="week"===e.displayMode?2:7,m=e.filter.selectedDate.valueOf()-r,d=Math.floor(m/(u*ru.hd)),h=e.grids.slice(0,d+1).reduce(((e,t)=>e+t.rows+2),0)+("week"===e.displayMode?0:1),p=Math.floor(m/ru.hd)%u+(o?2:1),g=!e.selectedEvent&&!e.editingEvent;if(c.push(s.createElement("div",{key:"add-event-button",className:bn()("calendar-add-event-button","selected","bottom",{active:g}),style:{gridRowStart:h,gridRowEnd:"span 1",gridColumnStart:p},ref:e=>{g&&e&&requestAnimationFrame((()=>{e.scrollIntoViewIfNeeded({block:"nearest",inline:"nearest"})}))},__source:{fileName:lK,lineNumber:476,columnNumber:5}},g&&"+")),"week"===e.displayMode){const t=7+e.grids[0].rows+e.grids[1].rows+e.grids[2].rows;c.push(s.createElement("div",{className:"calendar-day-picker",key:"pickerCell",style:{gridRowStart:t,gridRowEnd:`span ${e.grids[3].rows+2}`,gridColumnStart:2},__source:{fileName:lK,lineNumber:504,columnNumber:7}},s.createElement(YG,{date:e.filter.selectedDate,pageId:e.editor.pageId,__source:{fileName:lK,lineNumber:513,columnNumber:9}})))}return c}function _K(e){const t=(0,$Z.Z)(mK),{displayMode:n,editingEvent:i,grids:r,filter:a,selectedEvent:o}=e,l=Boolean(e.filter.filterText),c=s.useMemo((()=>({displayStyle:"transparent",editingEvent:e.editingEvent,editor:e.editor,eventKeyDown:e.eventKeyDown,isActiveEditor:e.isActiveEditor,isDragging:e.isDragging,isFiltering:l,selectedEvent:e.selectedEvent,setIsDragging:e.setIsDragging})),[e.editor,e.editingEvent,e.eventKeyDown,e.selectedEvent,e.isActiveEditor,e.isDragging,l,e.setIsDragging]);let u=[],m="week"===n?2:3;const d=t[P.kCalendarDisplayWeekNumber]&&"week"!==n?1:0;return r.forEach((e=>{u=u.concat(e.items.map((e=>s.createElement(KG,cK({key:Kc.Z.generateKey(e.event),event:e.event,position:{gridRowStart:e.startRow+m,gridColumnStart:e.startCol+d+1,gridColumnEnd:e.endCol+d+1}},c,{__source:{fileName:lK,lineNumber:564,columnNumber:9}}))))),u=u.concat(e.multiEventItems.map((t=>{const n=i&&t.events.some((e=>e.id===i.id)),r=new Date(t.date),l=r.getDate()===a.selectedDate.date()&&r.getMonth()===a.selectedDate.month(),u=l&&!o&&!i,h=r.toDateString();return s.createElement("div",{key:`${h}-${m}`,className:bn()("event-container",{selected:n}),style:{gridRowStart:t.startRow+m,gridRowEnd:e.rows+m,gridColumnStart:t.startCol+d+1,gridColumnEnd:t.endCol+d+1},__source:{fileName:lK,lineNumber:586,columnNumber:9}},t.events.map((e=>s.createElement(KG,cK({key:Kc.Z.generateKey(e),event:e},c,{__source:{fileName:lK,lineNumber:599,columnNumber:13}})))),l&&s.createElement("div",{className:bn()("calendar-add-event-button top",{active:u,selected:l}),id:h,__source:{fileName:lK,lineNumber:606,columnNumber:13}}))}))),m+=e.rows+2})),u}const vK=function(e){const t=(0,$Z.Z)(mK),n=s.useContext(tD),i=s.useRef(null),[r,o]=s.useState([]),[l,c]=s.useState(uK.range()),[u,m]=s.useState(!1),d=s.useMemo((()=>({pageId:n.editor.pageId,uid:e.editorUid})),[n.editor.pageId,e.editorUid]),{gridFrozen:h,handlers:p,overlay:g}=XG(i.current,gK,d),b=s.useRef({initialFocusTaken:!1,wasEditing:!!e.editingEvent&&n.editor.uid===d.uid,selectedEventCache:new Map,lastSelectedEvent:null,navigationPending:!1,updateCreateOverlay:()=>{}}),{events:N,filter:f,displayMode:_}=e;s.useMemo((()=>{const e=pK(N,f.anchorDate,_);o(e.grids),c(e.displayRange)}),[_,N,f.anchorDate]),s.useEffect((()=>{b.current.wasEditing=!!e.editingEvent&&n.editor.uid===d.uid}));const v=(t,n,s)=>{b.current.navigationPending=!1;const i=e.filter.selectedDate,r=t||b.current.lastSelectedEvent,o=r?document.getElementById(r.id):document.getElementById(i.toDate().toDateString()),l=i.clone();if("Left"===s?l.subtract(1,"day"):l.add(1,"day"),!o)return b.current.selectedEventCache.clear(),void a.Z.selectDate(d.pageId,l,!0);const c=n.map((e=>{const t=document.getElementById(e.id);return{event:e,element:t,bounds:t?t.getBoundingClientRect():{top:0,bottom:0}}})).filter((e=>Boolean(e.element))),u=o.getBoundingClientRect(),m=c.filter((e=>e.bounds.bottom>u.top&&e.bounds.top<u.bottom)).sort(((e,t)=>{const n=(u.top+u.bottom)/2,s=(e.bounds.top+e.bounds.bottom)/2,i=(t.bounds.top+t.bounds.bottom)/2;return Math.abs(s-n)-Math.abs(i-n)}));if(m.length){const e=m[0];E(e.event,l)}else a.Z.selectDate(d.pageId,l,!0)},E=(e,t)=>{if(e){const t=uK(e.start).format("YYYY-MM-DD");b.current.selectedEventCache.set(t,e),b.current.lastSelectedEvent=e}else b.current.selectedEventCache=new Map,b.current.lastSelectedEvent=null;a.Z.selectEvent(d,{event:e,date:t,allDay:!0})},C=e=>e.reduce(((e,t)=>e=(e=e.concat(t.items.map((e=>e.event)))).concat(t.multiEventItems.reduce(((e,t)=>e.concat(t.events)),[]))),[]);let w={};if(h)w=h;else{const t="week"===e.displayMode?"":"max-content ";w.gridTemplateRows=r.reduce(((e,t)=>`${e} 1.9em ${"max-content ".repeat(Math.max(t.rows-1,0))} ${t.rows?"min-content ":""} minmax(20px, 1fr) `),t)}const y=t[P.kCalendarDisplayWeekNumber]&&"week"!==_;return s.createElement("div",cK({className:bn()("calendar-grid calendar-grid-days",`calendar-grid-${e.displayMode}`,{"is-dragging":u,"show-weeknumber":y}),onKeyDown:t=>{const n=C(r),s=t.altKey;if(!e.editingEvent){const i="week"===e.displayMode?2:7,r=n.find((t=>t.id===e.selectedEvent)),o=e.filter.selectedDate,c=o.weekday();let u,m,h,p,g;switch(ST.Z[t.keyCode]){case"Left":if(b.current.navigationPending||c%i==0)break;if(m=o.clone().subtract(1,"day"),h=m.format("YYYY-MM-DD"),p=b.current.selectedEventCache.get(h),p){E(p,m);break}r||b.current.lastSelectedEvent?(u=Kc.Z.filterEventsByPeriod(n,m,"day"),requestAnimationFrame(v.bind(this,r,u,"Left")),b.current.navigationPending=!0):a.Z.selectDate(d.pageId,m,!0);break;case"Right":if(b.current.navigationPending||c%i==i-1||6===c)break;if(m=o.clone().add(1,"day"),h=m.format("YYYY-MM-DD"),p=b.current.selectedEventCache.get(h),p){E(p,m);break}r||b.current.lastSelectedEvent?(u=Kc.Z.filterEventsByPeriod(n,m,"day"),requestAnimationFrame(v.bind(this,r,u,"Right")),b.current.navigationPending=!0):a.Z.selectDate(d.pageId,m,!0);break;case"Up":if(b.current.selectedEventCache=new Map,b.current.lastSelectedEvent=null,u=Kc.Z.filterEventsByPeriod(n,o,"day"),g=u.findIndex((t=>t.id===e.selectedEvent)),-1===g&&u.length&&!s)E(u[u.length-1],o);else if(0===g||!u.length||s){let t=i;"week"===e.displayMode&&c<2&&(t=0===c?1:3),a.Z.selectDate(d.pageId,o.clone().subtract(t,"day"),!0)}else E(u[g-1],o);break;case"Down":b.current.selectedEventCache=new Map,b.current.lastSelectedEvent=null,u=Kc.Z.filterEventsByPeriod(n,o,"day"),g=u.findIndex((t=>t.id===e.selectedEvent));let N=i;if("week"===e.displayMode&&c>=5&&(N=5===c?3:1),s){const e=o.clone().add(N,"day");a.Z.selectDate(d.pageId,e,!0)}else if(-1===g){const e=o.clone().add(N,"day");if(e.isAfter(l.end,"day")){const t=au.t.call(Gc.Z.getEvents(),e,"day"),n=oK(t,e,1);u=C([n])}else u=Kc.Z.filterEventsByPeriod(n,e,"day");u.length?E(u[0],e):a.Z.selectDate(d.pageId,e,!0)}else g===u.length-1?E(null):E(u[g+1],o);break;case"Enter":if((0,Rx.Z)(t),e.selectedEvent){const t=n.find((t=>t.id===e.selectedEvent));a.Z.editEvent(d,t)}else{const e=o.clone().hours((new Date).getHours()).valueOf();a.Z.editEvent(d,null,dK({start:e}))}break;case"Escape":(0,Rx.Z)(t),e.selectedEvent&&E(null)}}},draggable:!0},p,{style:w,tabIndex:"0",ref:t=>{t&&(!e.editingEvent&&b.current.wasEditing||!b.current.initialFocusTaken)&&(t.focus(),b.current.initialFocusTaken=!0),i.current=t},__source:{fileName:lK,lineNumber:888,columnNumber:5}}),"week"!==e.displayMode&&s.createElement(NK,{showWeekNumber:y,__source:{fileName:lK,lineNumber:911,columnNumber:9}}),s.createElement(fK,{displayRange:l,displayMode:_,editingEvent:e.editingEvent,editor:d,events:N,filter:f,grids:r,selectedEvent:e.selectedEvent,__source:{fileName:lK,lineNumber:916,columnNumber:7}}),s.createElement(_K,{grids:r,displayMode:_,editor:d,editingEvent:e.editingEvent,selectedEvent:e.selectedEvent,filter:f,eventKeyDown:e.eventKeyDown,isActiveEditor:n.editor.uid===d.uid,isDragging:u,setIsDragging:m,__source:{fileName:lK,lineNumber:927,columnNumber:7}}),s.createElement(bK,{overlay:g,displayMode:_,grids:r,__source:{fileName:lK,lineNumber:940,columnNumber:7}}))};function EK(e){return"time"in e}function CK(e,t,n,s){let i,r,a;const o=n||t;let l;const c=s[8];switch(e){case"Left":l=o.isAllDay?o:t,i=e=>e.navigation.right<o.navigation.right&&e.navigation.top<l.navigation.bottom&&e.navigation.bottom>l.navigation.top,r=(e,t)=>t.navigation.right-e.navigation.right,a=(e,t)=>e.navigation.top-t.navigation.top;break;case"Right":l=o.isAllDay?o:t,i=e=>e.navigation.right>o.navigation.right&&e.navigation.left>=o.navigation.left&&e.navigation.top<l.navigation.bottom&&e.navigation.bottom>l.navigation.top,r=(e,t)=>e.navigation.left-t.navigation.left,a=(e,t)=>e.navigation.top-t.navigation.top;break;case"Up":{const e=c.display.bottom-c.display.top-1;l=o.isAllDay?t:o,i=e=>e.navigation.bottom<=o.navigation.top&&e.navigation.left<l.navigation.right&&e.navigation.right>l.navigation.left,r=(t,n)=>{const s=EK(t)||t.isAllDay?t.navigation.bottom:t.navigation.bottom+e;return(EK(n)||n.isAllDay?n.navigation.bottom:n.navigation.bottom+e)-s},a=(e,t)=>e.navigation.left-t.navigation.left;break}case"Down":{const e=c.display.bottom-c.display.top-1;l=o.isAllDay?t:o,i=e=>e.navigation.top>=o.navigation.bottom&&e.navigation.left<l.navigation.right&&e.navigation.right>l.navigation.left,r=(t,n)=>(!EK(t)||t.isAllDay?t.navigation.top-e:t.navigation.top)-(!EK(n)||n.isAllDay?n.navigation.top-e:n.navigation.top),a=(e,t)=>e.navigation.left-t.navigation.left;break}default:return}const u=s.filter(i).sort(((e,t)=>{const n=r(e,t);return 0!==n?n:EK(e)!==EK(t)?EK(e)?1:-1:a(e,t)}));return u.length?u[0]:null}var wK=n(72877),yK=n(26199),SK="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarHoursGrid.jsx";function TK(){return TK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},TK.apply(this,arguments)}const kK=[P.kCalendarCollapseHours,P.kCalendarClickOutside,P.kCalendarDayEnds,P.kCalendarDayStarts,P.kCalendarOnlyHourlyKeynav,P.kCalendarTimeIncrements],{minimalCreateEvent:IK}=Kc.Z,AK={day:{row:1,column:2},week:{row:2,column:2},year:{row:1,column:2}},ZK=96,PK={adjacent:[],stacking:0,stackSize:0,canExpand:!1,startRow:0,endRow:1,startCol:0,endCol:1};function DK(e,t,n){const s=g()();if(e.isSame(s,t)){const e=eK(s.valueOf())+AK[t].row,i=Math.round(s.minutes()%15/15*100);let r=0,a=n[0]+1;if("week"===t){const e=s.weekday();r=(0,wK.Z)(n.slice(0,e))+e,a=n[e]+1}return{row:e,percentage:i,column:r,columnSpan:a}}}function MK(e,t,n,s){const i=s?(0,wK.Z)(s.slice(0,n.startCol)):n.startCol,r=s?(0,wK.Z)(s.slice(0,n.endCol)):n.endCol;return{left:t+i,top:e+n.startRow,right:t+r,bottom:e+n.endRow}}const OK=mo()(2)((function(e,t,n,s,i,r){const[a,o]=(0,qG.Z)(e,Kc.Z.isAllDayEvent);a.sort(((e,t)=>{if(e.start!==t.start)return e.start-t.start;const n=(e.task?e.due:e.end)||0,s=(t.task?t.due:t.end)||0;return n!==s?n-s:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)}));const[l,c,u]=function(e,t,n,s){const i=[];if("day"===s)i.push(aK(e,n));else if("week"===s){const t=n.clone().startOf("week");[...Array(7).keys()].forEach((n=>{const s=Kc.Z.filterEventsByPeriod(e,t,"day");i.push(aK(s,t)),t.add(1,"days")}))}let r;r="day"===s?{maxStackSize:1,rows:t.length,items:[],multiEventItems:t.length?[{...PK,date:n.valueOf(),events:t}]:[]}:oK(t,n.clone().startOf("week"),7);const a=i.map((e=>e.columns));return[i,r,a]}(o,a,t,n),{timeCells:m,eventCells:d}=function(e,t,n,s,i,r,a,o){function l(e){return 60*e.hour()+e.minute()}const c=g()(e).startOf(t),u=i.map((e=>e+1)),m=s?s.rows+1:1;let d,h,p=[],b=AK[t].row,N=[];b=AK[t].row,d=AK[t].column,s&&(N=N.concat(s.items.map((e=>{const t=MK(b,d,e,u);return{display:t,navigation:t,isAllDay:!0,event:e.event}}))),N=N.concat(s.multiEventItems.map((e=>{const t=MK(b,d,e,u);return{display:t,navigation:t,isAllDay:!0,events:e.events}})))),b+=m,d=AK[t].column,N=N.concat(n.flatMap((e=>{const t=e.items.map((e=>({display:{...MK(b,d,e)},navigation:{...MK(b,d,e)},isAllDay:!1,event:e.event})));return d+=e.columns+1,t}))),b=AK[t].row,d=AK[t].column,h=c.clone(),p=p.concat(u.map((e=>{const t=h.valueOf();h.add(1,"day");const n=h.valueOf(),s=d,i=b,r=d+e,a=b+m,o=N.filter((e=>e.navigation.left<r&&e.navigation.right>s&&e.navigation.top<a&&e.navigation.bottom>i)).reduce(((e,t)=>Math.max(e,t.navigation.bottom)),i);return d+=e,{display:{left:s,top:i,right:r,bottom:a},navigation:{left:s,top:o,right:r,bottom:a},isAllDay:!0,time:{start:t,end:n}}}))),b+=m,d=AK[t].column,h=c.clone();const f=Math.max(60*r-o,0),_=60*a;return h.add(f,"minute"),p=p.concat(u.flatMap(((e,t)=>{const n=[];for(;h.diff(c,"day")===t;){const t=d,s=l(h)===f?b:b+l(h)/15,i=d+e,r=h.valueOf();h.add(o,"minute");const a=l(h),c=a>_||0===a?b+ZK:b+l(h)/15,u=h.valueOf(),m=N.filter((e=>e.navigation.left<i&&e.navigation.right>t&&e.navigation.top<c&&e.navigation.bottom>s)),p=m.reduce(((e,t)=>Math.max(e,t.navigation.right)),t),g={display:{left:t,top:s,right:i,bottom:c},navigation:{left:p,top:s,right:i,bottom:c},isAllDay:!1,time:{start:r,end:u}};l(h)>_&&(h.add(1,"day").startOf("day"),g.time.end=h.valueOf(),h.add(f,"minute")),n.push(g)}return d+=e,n}))),{timeCells:p,eventCells:N}}(t,n,l,c,u,s,i,r);return{grids:l,gridColumns:u,allDayGrid:c,timeCells:m,eventCells:d}}));function xK(e,t,n){const s=e?.querySelectorAll(".quarter"),i=e?.querySelectorAll(".calendar-background-day");if(s&&i){let e=!1;const r=[...s].find(((t,s)=>{const i=t.getBoundingClientRect(),r=i.bottom>n;return r&&0===s&&n<i.top&&(e=!0),r})),a=[...i].find((e=>e.getBoundingClientRect().right>t));if(r&&a)return{currentRow:r,currentCol:a,isAllDayRow:e}}return{}}function LK(e,t,n){const s=t.currentX||1e5,i=t.currentY||1e5;let{currentRow:r,currentCol:a,isAllDayRow:o}=xK(e,s,i);if(r&&a){const e=!t.initialTime,s=e?o:n?.isAllDay||!1;if(e&&(t.initialTime=parseInt(a.dataset.date)+parseInt(r.dataset.starttime),t.initialEndTime=parseInt(a.dataset.date)+parseInt(r.dataset.endtime),t.initialStartRow=parseInt(r.style.gridRowStart),t.initialEndRow=parseInt(r.style.gridRowEnd),t.initialLeftCol=parseInt(a.style.gridColumnStart),t.initialRightCol=parseInt(a.style.gridColumnEnd)),s&&(r=a),r&&a){const e=t.initialLeftCol,n=t.initialStartRow,i=parseInt(a.style.gridColumnStart),o=parseInt(r.style.gridRowStart);let l,c,u,m,d,h,p=!0;return e<i?(l=e,c=parseInt(a.style.gridColumnEnd),s?(u=parseInt(r.style.gridRowStart),m=n):(u=n,m=parseInt(r.style.gridRowEnd))):e>i?(l=parseInt(a.style.gridColumnStart),c=t.initialRightCol,u=parseInt(r.style.gridRowStart),m=t.initialEndRow,p=!1):(l=e,c=t.initialRightCol,n<=o?(u=n,m=parseInt(r.style.gridRowEnd)):(u=parseInt(r.style.gridRowStart),m=t.initialEndRow,p=!1)),p?(d=t.initialTime,h=s?parseInt(a.dataset.date):parseInt(a.dataset.date)+parseInt(r.dataset.endtime)):(d=s?parseInt(a.dataset.date):parseInt(a.dataset.date)+parseInt(r.dataset.starttime),h=t.initialEndTime),{startCol:l,endCol:c,startRow:u,endRow:m,isAllDay:s,startTime:d,endTime:h}}}}function RK(e){if(!e.overlay)return null;const{startRow:t,endRow:n,startCol:i,endCol:r,startTime:a,endTime:o}=e.overlay;if(e.overlay.isAllDay){const e={gridRowStart:t,gridRowEnd:n,gridColumnStart:i,gridColumnEnd:r};return s.createElement("div",{className:"calendar-drag-overlay start end",style:e,__source:{fileName:SK,lineNumber:519,columnNumber:7}},s.createElement("div",{className:"start-time",__source:{fileName:SK,lineNumber:520,columnNumber:9}},g()(a).format("L")),s.createElement("div",{className:"end-time",__source:{fileName:SK,lineNumber:523,columnNumber:9}},g()(o).format("L")))}{const[l]=e.columnSizes.reduce((([l,c],u)=>{const m=u+1,d=c===i,h=c+m===r,p=bn()("calendar-drag-overlay",{start:d,end:h});if(d){const r=i,m=c+u,b={gridRowStart:t,gridRowEnd:h?n:e.rowOffset+ZK,gridColumnStart:r,gridColumnEnd:m};l.push(s.createElement("div",{key:c,className:p,style:b,__source:{fileName:SK,lineNumber:544,columnNumber:11}},s.createElement("div",{className:"start-time",__source:{fileName:SK,lineNumber:545,columnNumber:13}},d&&s.createElement(s.Fragment,null,g()(a).format("LT"))),s.createElement("div",{className:"end-time",__source:{fileName:SK,lineNumber:548,columnNumber:13}},h&&s.createElement(s.Fragment,null,g()(o).format("LT")))))}else if(c>i&&c<r){const t=c,i=c+u,r={gridRowStart:e.rowOffset,gridRowEnd:h?n:e.rowOffset+ZK,gridColumnStart:t,gridColumnEnd:i};l.push(s.createElement("div",{key:c,className:p,style:r,__source:{fileName:SK,lineNumber:560,columnNumber:11}},s.createElement("div",{className:"start-time",__source:{fileName:SK,lineNumber:561,columnNumber:13}},d&&s.createElement("span",{__source:{fileName:SK,lineNumber:562,columnNumber:27}},g()(a).format("LT"))),s.createElement("div",{className:"end-time",__source:{fileName:SK,lineNumber:564,columnNumber:13}},h&&s.createElement("span",{__source:{fileName:SK,lineNumber:565,columnNumber:25}},g()(o).format("LT")))))}return[l,c+m]}),[[],e.colOffset]);return l}}function BK(e){const t=(0,$Z.Z)([P.kCalendarCollapseHours,P.kCalendarDayEnds,P.kCalendarDayStarts,P.kCalendarTimeIncrements,P.kCalendarOnlyHourlyDivider]),{anchorDate:n,displayMode:i,allDayGrid:r}=e;return s.useMemo((function(){const e=t[P.kCalendarCollapseHours],a=e?t[P.kCalendarDayStarts]:0,o=e&&t[P.kCalendarDayEnds]||24,l=n.clone().startOf("day").hour(a),c=parseInt(t[P.kCalendarTimeIncrements]);let u=AK[i].row;r&&(u+=r.rows+1);const m=(0,yK.Z)(a,o);let d=[];return d=15===c?[{rowOffset:0,span:1,startOffset:0,endOffset:9e5},{rowOffset:1,span:1,startOffset:9e5,endOffset:18e5},{rowOffset:2,span:1,startOffset:18e5,endOffset:27e5},{rowOffset:3,span:1,startOffset:27e5,endOffset:36e5}]:30===c?[{rowOffset:0,span:2,startOffset:0,endOffset:18e5},{rowOffset:2,span:2,startOffset:18e5,endOffset:36e5}]:[{rowOffset:0,span:4,startOffset:0,endOffset:36e5}],s.createElement(s.Fragment,null,s.createElement("div",{className:"hour-track",style:{gridRowEnd:ZK+u},__source:{fileName:SK,lineNumber:620,columnNumber:9}}),a>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"hour",style:{gridRowStart:u},__source:{fileName:SK,lineNumber:622,columnNumber:11}},s.createElement("div",{className:"hour-value",__source:{fileName:SK,lineNumber:623,columnNumber:13}},"0:00")),s.createElement("div",{className:"quarter collapsed morning","data-starttime":a*ru.QI-c*ru.lb,"data-endtime":a*ru.QI,style:{gridRowStart:u,gridRowEnd:u+4*a},__source:{fileName:SK,lineNumber:625,columnNumber:11}}),s.createElement("div",{className:"hour-line",style:{gridRowStart:u},__source:{fileName:SK,lineNumber:634,columnNumber:11}})),m.map(((e,n)=>{const i=u+4*e,r=s.createElement(s.Fragment,{key:`fr${n}`,__source:{fileName:SK,lineNumber:639,columnNumber:13}},s.createElement("div",{className:"hour",style:{gridRowStart:i},__source:{fileName:SK,lineNumber:640,columnNumber:15}},s.createElement("div",{className:"hour-value",__source:{fileName:SK,lineNumber:644,columnNumber:17}},l.format("H:mm"))),d.map(((n,r)=>s.createElement(s.Fragment,{key:n.rowOffset,__source:{fileName:SK,lineNumber:646,columnNumber:54}},s.createElement("div",{className:"quarter",style:{gridRowStart:i+n.rowOffset,gridRowEnd:i+n.rowOffset+n.span},"data-starttime":e*ru.QI+n.startOffset,"data-endtime":e*ru.QI+n.endOffset,__source:{fileName:SK,lineNumber:647,columnNumber:17}}),0!==r&&!t[P.kCalendarOnlyHourlyDivider]&&s.createElement("div",{className:"quarter-line",style:{gridRowStart:i+n.rowOffset},__source:{fileName:SK,lineNumber:657,columnNumber:19}})))),s.createElement("div",{className:"hour-line",style:{gridRowStart:i},__source:{fileName:SK,lineNumber:660,columnNumber:15}}));return l.add(1,"hour"),r})),o<24&&s.createElement(s.Fragment,null,s.createElement("div",{className:"hour-line",style:{gridRowStart:u+4*o},__source:{fileName:SK,lineNumber:667,columnNumber:11}}),s.createElement("div",{className:"hour",style:{gridRowStart:u+4*o},__source:{fileName:SK,lineNumber:668,columnNumber:11}},s.createElement("div",{className:"hour-value",__source:{fileName:SK,lineNumber:672,columnNumber:13}},l.format("H:mm"))),s.createElement("div",{className:"quarter collapsed evening","data-starttime":o*ru.QI,"data-endtime":o*ru.QI+c*ru.lb,style:{gridRowStart:u+4*o,gridRowEnd:u+ZK},__source:{fileName:SK,lineNumber:674,columnNumber:11}})),s.createElement("div",{className:"hour hour-last",style:{gridRowStart:u+ZK-1},__source:{fileName:SK,lineNumber:684,columnNumber:9}},s.createElement("div",{className:"hour-value",__source:{fileName:SK,lineNumber:688,columnNumber:11}},"0:00")))}),[t,r,n,i])}function FK(e){const{anchorDate:t,displayMode:n,gridColumns:i}=e;return s.useMemo((function(){const e=[];if("week"===n){const n=t.clone().startOf("week");let r=2;i.forEach(((t,i)=>{const a=n.format(B.ZP.getWeekdayFormat(B.ZP.getShortDateFormat()));e.push(s.createElement(s.Fragment,{key:i,__source:{fileName:SK,lineNumber:710,columnNumber:11}},s.createElement("header",{style:{gridRowStart:1,gridColumnStart:r,gridColumnEnd:r+t+1},className:"calendar-header-date",__source:{fileName:SK,lineNumber:711,columnNumber:13}},a),s.createElement("div",{style:{gridRowStart:2,gridRowEnd:"grid-bottom",gridColumnStart:r,gridColumnEnd:r+t+1},className:bn()("calendar-background-day",{weekend:n.day()%6==0}),"data-date":n.valueOf(),__source:{fileName:SK,lineNumber:721,columnNumber:13}}))),r+=t+1,n.add(1,"days")}))}else e.push(s.createElement("div",{key:"day",style:{gridRowStart:1,gridRowEnd:"grid-bottom",gridColumnStart:2,gridColumnEnd:i[0]+3},className:bn()("calendar-background-day",{weekend:t.day()%6==0}),"data-date":t.clone().startOf("day").valueOf(),__source:{fileName:SK,lineNumber:740,columnNumber:9}}));return e}),[t,n,i])}function UK(e){return e.marker?[s.createElement("div",{key:"marker",className:"current-time",style:{gridRowStart:e.marker.row,gridColumnStart:e.marker.column+2,gridColumnEnd:`span ${e.marker.columnSpan}`},__source:{fileName:SK,lineNumber:762,columnNumber:8}},s.createElement("span",{className:"marker",style:{top:`${e.marker.percentage}%`},__source:{fileName:SK,lineNumber:769,columnNumber:9}}))]:null}function VK(e){const{cells:t,selectedEvent:n,editingEvent:i,allDaySelected:r,selectedDate:a}=e;return s.useMemo((function(){return t.map(((e,t)=>{const{display:o,isAllDay:l,navigation:c,time:u}=e;if(!u)return null;const m=a.valueOf(),d=r===l&&u.start<=m&&u.end>m;if(!d)return null;const h=d&&!n&&!i;return s.createElement(s.Fragment,{key:`sel${t}`,__source:{fileName:SK,lineNumber:811,columnNumber:9}},d&&s.createElement("div",{className:bn()("calendar-add-event-button",{active:h,selected:d,"with-event":c.left!==o.left}),style:{pointerEvents:"none",gridRowStart:c.top,gridRowEnd:c.bottom,gridColumnStart:c.left,gridColumnEnd:c.right},ref:e=>e&&requestAnimationFrame((()=>{e.scrollIntoView({block:"nearest",inline:"nearest"})})),__source:{fileName:SK,lineNumber:813,columnNumber:13}},h&&"+"))}))}),[r,t,i,a,n])}function HK(e){const t=Boolean(e.filter.filterText),n=s.useMemo((()=>({displayStyle:"solid",editingEvent:e.editingEvent,editor:e.editor,eventKeyDown:e.eventKeyDown,isFiltering:t,isActiveEditor:e.isActiveEditor,isDragging:e.isDragging,selectedEvent:e.selectedEvent,setIsDragging:e.setIsDragging})),[e.editor,e.editingEvent,e.eventKeyDown,e.selectedEvent,e.isActiveEditor,e.isDragging,t,e.setIsDragging]);return s.useMemo((()=>e.cells.map(((t,i)=>{if(t.event){const e=t.event;return e?s.createElement(KG,TK({key:e.id,event:e,position:{gridRowStart:t.display.top,gridRowEnd:t.display.bottom,gridColumnStart:t.display.left,gridColumnEnd:t.display.right}},n,{__source:{fileName:SK,lineNumber:881,columnNumber:16}})):null}if(t.events){const i=t.events;return i.length?s.createElement("div",{key:Kc.Z.generateKey(i[0]),className:bn()("event-container",{"calendar-day-allday":t.isAllDay&&"day"===e.displayMode}),style:{gridRowStart:t.display.top,gridRowEnd:t.display.bottom,gridColumnStart:t.display.left,gridColumnEnd:t.display.right},__source:{fileName:SK,lineNumber:898,columnNumber:11}},i.map((e=>s.createElement(KG,TK({key:e.id,event:e},n,{__source:{fileName:SK,lineNumber:910,columnNumber:34}}))))):null}}))),[e.cells,e.displayMode,n])}const WK=function(e){const t=s.useContext(tD),n=s.useRef(null),[i,r]=s.useState(null),[o,l]=s.useState([]),[c,u]=s.useState([]),[m,d]=s.useState([]),[h,p]=s.useState(!1),[b,N]=s.useState(null),[f,_]=s.useState(null),v=(0,$Z.Z)(kK),E=s.useRef({updateTimer:null,initialFocusTaken:!1,wasEditing:!!e.editingEvent&&t.editor.uid===e.editorUid,updateCreateOverlay:()=>{},dragCreate:{dragging:!1,cancelled:!1,currentX:null,currentY:null,initialTime:0,initialEndTime:0,initialStartRow:0,initialEndRow:0,initialLeftCol:0,initialRightCol:0},hover:{x:0,y:0}});s.useEffect((()=>{E.current.updateTimer||(E.current.updateTimer=setInterval((()=>{N(DK(e.anchorDate,e.displayMode,o))}),6e4));const{editor:n}=t;return E.current.wasEditing=!!e.editingEvent&&n.uid===e.editorUid,()=>{E.current.updateTimer&&clearInterval(E.current.updateTimer)}}));const{anchorDate:C,displayMode:w,events:y}=e,S=v[P.kCalendarCollapseHours],T=S?v[P.kCalendarDayStarts]:0,k=S&&v[P.kCalendarDayEnds]||24,I=v[P.kCalendarOnlyHourlyKeynav]?60:v[P.kCalendarTimeIncrements];s.useMemo((()=>{const e=OK(y,C,w,T,k,I);l(e.gridColumns),r(e.allDayGrid),u(e.timeCells),d(e.eventCells)}),[C,w,T,k,y,I]),s.useMemo((()=>{const e=DK(C,w,o);e&&i&&(e.row=e.row+i.rows+1),N(e)}),[C,w,i,o]);const A=s.useMemo((()=>({pageId:t.editor.pageId,uid:e.editorUid})),[t.editor.pageId,e.editorUid]),{gridFrozen:Z,handlers:D,overlay:M}=XG(n.current,LK,A),O=()=>{if(E.current.hover.x&&E.current.hover.y){const{currentRow:e,currentCol:t,isAllDayRow:s}=xK(n.current,E.current.hover.x,E.current.hover.y);_({gridColumnStart:parseInt(t.style.gridColumnStart),gridRowStart:s?2:parseInt(e.style.gridRowStart),gridColumnEnd:parseInt(t.style.gridColumnEnd),gridRowEnd:s?parseInt(e.style.gridRowStart):parseInt(e.style.gridRowEnd)||parseInt(e.style.gridRowStart)+1})}else _(null)},x={...D};x.onDragOver=e=>{e.dataTransfer.types.some((e=>e===WG))?(E.current.hover.x=e.clientX,E.current.hover.y=e.clientY,requestAnimationFrame(O),e.preventDefault(),e.stopPropagation()):D.onDragOver(e)},x.onDrop=e=>{const t=e.dataTransfer;if(t.types.some((e=>e===WG))){e.preventDefault(),e.stopPropagation();const{currentRow:s,currentCol:i,isAllDayRow:r}=xK(n.current,e.clientX,e.clientY);if(s&&i){const e=parseInt(i.dataset.date)+parseInt(s.dataset.starttime),n=JSON.parse(t.getData(WG)).id;a.Z.moveEvent(A,n,{start:e,allDay:r})}}else D.onDrop(e)};const L=s.useCallback((t=>{if(t.shiftKey||t.ctrlKey||t.metaKey)return;const{selectedDate:n,allDaySelected:s}=e.filter;if(!e.editingEvent){const i=ST.Z[t.keyCode],r=t.altKey;switch(i){case"Up":case"Down":case"Left":case"Right":t.preventDefault();const o=r?[]:m,[l,u,d]=function(e,t,n,s,i,r=!1){const a=s.valueOf(),o=t.find((e=>e.isAllDay===r&&e.time.start<=a&&e.time.end>a));if(!o)return[null,null,!1];const l=n.find((e=>e.event&&e.event.id===i||e.events&&e.events.some((e=>e.id===i)))),c=l||o;if(c.events&&("Up"===e||"Down"===e)){const t=c.events.findIndex((e=>e.id===i));if("Up"===e&&t>0||"Down"===e&&t<c.events.length-1){const n="Up"===e?-1:1,s=c.events[t+n];return[o.time&&o.time.start,s,o.isAllDay]}}let u;switch(e){case"Up":case"Down":case"Left":case"Right":u=CK(e,o,l,[...t,...n])}if(u){let n;if(u.time)return[u.time.start,null,u.isAllDay];if(u.event)n=u.event;else if(u.events){const t="Up"===e?u.events.length-1:0;n=u.events[t]}if(n){if(function(e,t){return e.time.start<(t.end||1/0)&&e.time.end>t.start}(o,n))return[o.time&&o.time.start,n,u.isAllDay];let s;if(s=c.isAllDay?function(e,t,n){let s;s="Left"===n?t=>t.navigation.right===e.navigation.right:t=>t.navigation.left===e.navigation.left;const i=t.filter(s).sort(((e,t)=>e.navigation.top-t.navigation.top));return i.length?i[0]:null}(u,[...t],e):CK(e,o,null,[...t]),s&&s.time)return[s.time.start,n,u.isAllDay]}}return[null,null,!1]}(i,c,o,n,e.selectedEvent,s);if(!l)return void function(e,t,n,s){let i;switch(e){case"Left":i=t.clone().subtract(1,"day");break;case"Right":i=t.clone().add(1,"day")}i&&a.Z.selectDate(s.pageId,i,n)}(i,n,s,A);(u||e.selectedEvent)&&a.Z.selectEvent(A,{event:u,date:g()(l),allDay:d}),u||a.Z.selectDate(A.pageId,g()(l),d);break;case"Enter":if(t.preventDefault(),e.selectedEvent){const t=y.find((t=>t.id===e.selectedEvent));a.Z.editEvent(A,t)}else{const t=e.filter.selectedDate.valueOf();a.Z.editEvent(A,null,IK({start:t,allDay:e.filter.allDaySelected}))}break;case"Escape":t.preventDefault(),e.selectedEvent&&a.Z.selectEvent(A,{event:null})}_(null)}}),[A,m,c,e.selectedEvent,e.editingEvent,e.filter,y]);let R={};if(Z)R=Z;else{const t="auto ",n=o.reduce(((e,n)=>`${e} ${t.repeat(n)} 16px`),"var(--calendar-hour-column-width) ");R.gridTemplateColumns=n+" [grid-right]";let s="";AK[e.displayMode].row-1&&(s="max-content ");const r=v[P.kCalendarCollapseHours],a=r?v[P.kCalendarDayStarts]:0,l=r&&v[P.kCalendarDayEnds]||24;let c=a>0?`repeat(${4*a}, min-content) `:"";c+=`repeat(${4*(24-a-(24-l))}, auto) `,c+=l<24?`repeat(${4*(24-l)}, min-content) `:"",i?.rows&&(s+=`repeat(${i.rows}, auto) `),s+=`1.5em ${c} [grid-bottom]`,R.gridTemplateRows=s}return s.createElement("div",TK({className:bn()("calendar-grid calendar-grid-hours",`calendar-grid-${e.displayMode}`,{"is-dragging":h}),onKeyDown:L,style:R,tabIndex:"0",draggable:!0},x,{onMouseMove:e=>{e.target===n.current?(E.current.hover.x=e.clientX,E.current.hover.y=e.clientY):(E.current.hover.x=0,E.current.hover.y=0),requestAnimationFrame(O)},onClick:e=>{if(e.target!==e.currentTarget)return;const{currentRow:t,currentCol:s,isAllDayRow:i}=xK(n.current,e.clientX,e.clientY);if(t&&s){const n=parseInt(s.dataset.date)+parseInt(t.dataset.starttime);if(Gc.Z.getEditState().eventDraft){switch(v[P.kCalendarClickOutside]){case"cancel":a.Z.cancelEventEdit(A),a.Z.selectDate(A.pageId,g()(n),i);break;case"save_and_close":a.Z.saveEventEdit(A),a.Z.selectDate(A.pageId,g()(n),i);break;case"save_and_new":"contextmenu"===e.type?(a.Z.saveEventEdit(A),a.Z.selectDate(A.pageId,g()(n),i)):a.Z.editEvent(A,null,IK({start:n,allDay:i}))}}else"contextmenu"===e.type?a.Z.selectDate(A.pageId,g()(n),i):a.Z.editEvent(A,null,IK({start:n,allDay:i}));_(null)}},ref:t=>{t&&(!e.editingEvent&&E.current.wasEditing||!E.current.initialFocusTaken)&&(t.focus(),E.current.initialFocusTaken=!0),n.current=t},__source:{fileName:SK,lineNumber:1219,columnNumber:5}}),s.createElement(FK,{anchorDate:C,displayMode:w,gridColumns:o,__source:{fileName:SK,lineNumber:1243,columnNumber:7}}),s.createElement(BK,{allDayGrid:i,anchorDate:C,displayMode:w,__source:{fileName:SK,lineNumber:1249,columnNumber:7}}),f&&s.createElement("div",{className:"calendar-grid-hover",style:f,__source:{fileName:SK,lineNumber:1256,columnNumber:9}}),s.createElement(VK,{cells:c,editingEvent:e.editingEvent,editor:A,allDaySelected:e.filter.allDaySelected,selectedDate:e.filter.selectedDate,selectedEvent:e.selectedEvent,setIsDragging:p,__source:{fileName:SK,lineNumber:1259,columnNumber:7}}),s.createElement(UK,{marker:b,__source:{fileName:SK,lineNumber:1269,columnNumber:7}}),s.createElement(HK,{cells:m,editingEvent:e.editingEvent,editor:A,eventKeyDown:e.eventKeyDown,filter:e.filter,isDragging:h,isActiveEditor:t.editor.uid===e.editorUid,selectedEvent:e.selectedEvent,setIsDragging:p,displayMode:e.filter.displayMode,__source:{fileName:SK,lineNumber:1271,columnNumber:7}}),s.createElement(RK,{overlay:M,rowOffset:AK[e.displayMode].row+(i&&i.rows+1||0),colOffset:AK[e.displayMode].column,columnSizes:o,__source:{fileName:SK,lineNumber:1284,columnNumber:7}}))};var zK="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarMonth.jsx";const GK=[P.kCalendarDisplayWeekNumber];function KK(e){const t=Gc.Z.getCalendars().find((t=>t.id===e.event.calendarId)),n=Math.max(0,Math.floor((e.event.start-e.startTime)/ru.lq)),i=Math.max(Math.min(96,Math.floor((e.event.end-e.startTime)/ru.lq)),n+1);return s.createElement("line",{stroke:"var(--colorCalendarBg)",style:Kc.Z.getCalendarColors(t),x1:110,x2:110,y1:n,y2:i,__source:{fileName:zK,lineNumber:52,columnNumber:5}})}function jK(e){const t=Gc.Z.getCalendars().find((t=>t.id===e.event.calendarId)),n=Math.floor(48-10*(e.count-1)-10)+20*e.index,i=n+14;return s.createElement("line",{key:e.event.id,stroke:"var(--colorCalendarBg)",x1:10,x2:10,y1:n,y2:i,style:Kc.Z.getCalendarColors(t),__source:{fileName:zK,lineNumber:74,columnNumber:5}})}function YK(e){const[t,n]=(0,qG.Z)(Kc.Z.filterEventsByPeriod(e.events,e.day,"day"),Kc.Z.isAllDayEvent),i=e.day.clone();return s.createElement(s.Fragment,{key:e.day.valueOf(),__source:{fileName:zK,lineNumber:98,columnNumber:5}},s.createElement("div",{className:bn()("CalendarMonth-Day",{"CalendarMonth-Day--OtherMonth":!e.isSameMonth,"CalendarMonth-Day--Selected":e.isSelected,"CalendarMonth-Day--Current":e.day.isSame(Date.now(),"day"),"CalendarMonth-Day--Weekend":e.day.day()%6==0}),onClick:()=>e.onSelect(i),__source:{fileName:zK,lineNumber:99,columnNumber:7}},s.createElement("span",{__source:{fileName:zK,lineNumber:108,columnNumber:9}},e.day.format("D")),!(!n.length&&!t.length)&&s.createElement("svg",{viewBox:"0 0 120 96",__source:{fileName:zK,lineNumber:110,columnNumber:11}},n.map((t=>s.createElement(KK,{key:t.id,event:t,startTime:e.day.valueOf(),__source:{fileName:zK,lineNumber:112,columnNumber:15}}))),t.map(((e,n)=>s.createElement(jK,{key:e.id,event:e,index:n,count:t.length,__source:{fileName:zK,lineNumber:119,columnNumber:15}}))))))}function $K(e){const t=s.useContext(tD),n=(0,$Z.Z)(GK)[P.kCalendarDisplayWeekNumber],{events:i,month:r}=e,a=r.clone().startOf("month").startOf("week");let o;if(e.fixedHeight)o=[...Array(42).keys()].map((e=>a.clone().add(e,"day")));else{const e=Kc.Z.getDisplayRange(r,"month");o=Array.from(e.by("day"))}const l=o.slice(0,7);return s.createElement("div",{className:bn()("CalendarMonth",{"CalendarMonth--ShowWeeknumber":n}),__source:{fileName:zK,lineNumber:150,columnNumber:5}},n&&s.createElement("span",{__source:{fileName:zK,lineNumber:155,columnNumber:26}}),l.map((e=>s.createElement("span",{key:`hdr-${e.valueOf()}`,className:"CalendarMonth-DayOfWeek",__source:{fileName:zK,lineNumber:157,columnNumber:9}},e.format("dd")[0]))),o.map(((a,o)=>{const l=a.isSame(r,"month");return n&&o%7==0?s.createElement(s.Fragment,{key:o,__source:{fileName:zK,lineNumber:169,columnNumber:13}},s.createElement("span",{className:"CalendarMonth-Week",__source:{fileName:zK,lineNumber:170,columnNumber:15}},a.week()),e.showOutOfMonthDays||l?s.createElement(YK,{day:a,events:i,pageId:t.editor.pageId,isSelected:e.selectedDate.isSame(a,e.highlightMode),isSameMonth:l,onSelect:e.onSelect,__source:{fileName:zK,lineNumber:172,columnNumber:19}}):s.createElement("span",{__source:{fileName:zK,lineNumber:180,columnNumber:19}})):e.showOutOfMonthDays||l?s.createElement(YK,{key:a.valueOf(),day:a,events:i,pageId:t.editor.pageId,isSelected:e.selectedDate.isSame(a,e.highlightMode),isSameMonth:l,onSelect:e.onSelect,__source:{fileName:zK,lineNumber:186,columnNumber:15}}):s.createElement("span",{key:a.valueOf(),__source:{fileName:zK,lineNumber:195,columnNumber:15}})})))}$K.defaultProps={highlightMode:"day",fixedHeight:!1};const XK=$K;var QK="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarMonthsGrid.jsx";const qK=function(e){const t=s.useContext(tD),n=s.useRef(),i=()=>{const e=n.current;if(!e)return 0;const t=!!e.childElementCount&&e.children[0];return t?Math.max(1,Math.floor(e.clientWidth/t.clientWidth)):0},{anchorDate:r,displayMode:o}=e.filter,l=Kc.Z.getDisplayRange(r,o),c=Array.from(l.by("month"));return s.createElement("div",{className:`calendar-grid-${e.filter.displayMode} calendar-grid`,onKeyDown:n=>{const s=e.filter.selectedDate;let r,o;switch(ST.Z[n.keyCode]){case"Left":if(0===s.weekday()||1===s.date()){const e=(0,AT.Xq)(s);r=(0,AT.FY)(e,6,s.clone().subtract(1,"month"),!0)}else r=s.clone().subtract(1,"day");break;case"Right":if(r=s.clone().endOf("month"),6===s.weekday()||s.isSame(r,"day")){const e=(0,AT.Xq)(s);r=(0,AT.FY)(e,0,s.clone().add(1,"month"),!0)}else r=s.clone().add(1,"day");break;case"Up":o=i(),s.date()<8?(r=s.clone().subtract(o,"month"),r=(0,AT.Ro)(s.weekday(),r)):r=s.clone().subtract(1,"week");break;case"Down":o=i(),r=s.clone().endOf("month"),r.date()-s.date()<7?(r=s.clone().add(o,"month"),r=(0,AT.PX)(s.weekday(),r)):r=s.clone().add(1,"week")}r&&(r.hour(s.hour()).minute(s.minute()),a.Z.selectDate(t.editor.pageId,r))},ref:n,tabIndex:"0",__source:{fileName:QK,lineNumber:103,columnNumber:5}},c.map((n=>{const i=Kc.Z.filterEventsByPeriod(e.events,n,"month");return s.createElement("div",{key:n.valueOf(),__source:{fileName:QK,lineNumber:113,columnNumber:11}},s.createElement("p",{className:"month-name",__source:{fileName:QK,lineNumber:114,columnNumber:13}},n.format("MMMM")),s.createElement(XK,{events:i,month:n,selectedDate:e.filter.selectedDate,onSelect:e=>a.Z.selectDate(t.editor.pageId,e),__source:{fileName:QK,lineNumber:115,columnNumber:13}}))})))};var JK="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarTasksGrid.jsx";function ej(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{minimalCreateEvent:tj}=Kc.Z,nj=[P.kCalendarClickOutside],sj="YYYY-MM-DD",ij="!todos";function rj(e,t,n,s=0){const i=s>0?{...n,id:`${n.id}-${s}`}:n,r=e.get(t);Array.isArray(r)?(r.push(i),e.set(t,r)):e.set(t,[i])}const aj=mo()(2)((function(e){const t=new Map;return e.forEach((e=>{if(e.task&&!e.start){const n=e.due||e.end;if(n){const s=g()(n).format(sj);rj(t,s,e)}else rj(t,ij,e)}else if(e.start){const n=g()(e.start).startOf("day");let s=0;const i=e.task?e.due||e.start:e.end;for(;n.valueOf()<i||n.valueOf()===e.start;){const i=n.format(sj);rj(t,i,e,s),n.add(1,"day"),s++}}})),t.forEach((e=>e.sort(((e,t)=>{if(!e.id||!t.id)return e.id?-1:1;const n=Kc.Z.isAllDayEvent(e);return n!==Kc.Z.isAllDayEvent(t)?n?-1:1:e.task&&t.task?(e.due||1/0)-(t.due||1/0):e.start-t.start})))),t}));class oj extends s.Component{constructor(...e){super(...e),ej(this,"state",{eventGroups:new Map,selectedDate:g()()}),ej(this,"initialFocusTaken",!1),ej(this,"wasEditing",!!this.props.editingEvent&&this.context.editor.uid===this.props.editorUid),ej(this,"componentDidUpdate",(()=>{const{editor:e}=this.context;this.wasEditing=!!this.props.editingEvent&&e.uid===this.props.editorUid})),ej(this,"getEditor",(()=>({pageId:this.context.editor.pageId,uid:this.props.editorUid}))),ej(this,"onClickBackground",(e=>{if(e.target===e.currentTarget&&this.props.editingEvent){const{editor:e}=Gc.Z.getEditState();"cancel"===this.props.prefValues[P.kCalendarClickOutside]?a.Z.cancelEventEdit(e):a.Z.saveEventEdit(e)}})),ej(this,"onClickDay",((e,t)=>{const n=t+(new Date).getHours()*ru.QI,s=this.getEditor();if(this.props.editingEvent){switch(this.props.prefValues[P.kCalendarClickOutside]){case"cancel":a.Z.cancelEventEdit(s),a.Z.selectDate(s.pageId,g()(n));break;case"save_and_close":a.Z.saveEventEdit(s),a.Z.selectDate(s.pageId,g()(n));break;case"save_and_new":a.Z.editEvent(s,null,tj({start:n}))}}else a.Z.editEvent(s,null,tj({start:n}))})),ej(this,"onClickEvent",(e=>{const{editingEvent:t}=this.props;(!t||t&&t.id!==e.id)&&a.Z.editEvent(this.getEditor(),e)})),ej(this,"onKeyDown",(e=>{const t=e.altKey;if(!this.props.editingEvent){const n=Kc.Z.getDisplayRange(this.props.filter.anchorDate,this.props.displayMode),s=this.state.selectedDate,i=Array.from(this.state.eventGroups.keys()).sort();let r,o;switch(ST.Z[e.keyCode]){case"Up":if((0,Rx.Z)(e),r=this.state.eventGroups.get(s.format(sj))||[],o=r.findIndex((e=>e.id===this.props.selectedEvent)),t||0===o||0===r.length){const e=i.findIndex((e=>s.isSame(e,"day")));e<=0?a.Z.viewPreviousPeriod(this.getEditor().pageId,n.start.clone().subtract(1,"day")):a.Z.selectDate(this.getEditor().pageId,g()(i[e-1]))}else if(this.props.selectedEvent){const e=r[o-1];a.Z.selectEvent(this.getEditor(),{event:e})}else{const e=r[r.length-1];a.Z.selectEvent(this.getEditor(),{event:e})}break;case"Down":if((0,Rx.Z)(e),r=this.state.eventGroups.get(s.format(sj))||[],o=r.findIndex((e=>e.id===this.props.selectedEvent)),t||-1===o||!this.props.selectedEvent){const e=i.findIndex((e=>s.isSame(e,"day")));r=this.state.eventGroups.get(i[e+1])||[],e>=i.length-1?a.Z.viewNextPeriod(this.getEditor().pageId,n.end.clone().add(1,"day")):r.length&&!t?a.Z.selectEvent(this.getEditor(),{event:r[0],date:s.clone().add(1,"day")}):a.Z.selectDate(this.getEditor().pageId,g()(i[e+1]))}else o===r.length-1?a.Z.selectEvent(this.getEditor(),{event:null}):a.Z.selectEvent(this.getEditor(),{event:r[o+1]});break;case"Enter":if((0,Rx.Z)(e),this.props.selectedEvent){r=this.state.eventGroups.get(s.format(sj))||[];const e=r.find((e=>e.id===this.props.selectedEvent));a.Z.editEvent(this.getEditor(),e)}else{const e=s.clone().hours((new Date).getHours()).valueOf();a.Z.editEvent(this.getEditor(),null,tj({start:e}))}break;case"Escape":(0,Rx.Z)(e),this.props.selectedEvent&&a.Z.selectEvent(this.getEditor(),{event:null})}}})),ej(this,"renderEvents",(()=>{const e=[],t=this.state.selectedDate.format(sj),n=Boolean(this.props.filter.filterText),i=[...this.state.eventGroups.keys()].sort();for(const r of i){const i=this.state.eventGroups.get(r)||[],a=t===r;e.push(s.createElement("div",{className:"cal-tasks-row",key:r,ref:e=>{a&&e&&e.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},__source:{fileName:JK,lineNumber:303,columnNumber:9}},r!==ij&&s.createElement("div",{className:"cal-tasks-row-date",__source:{fileName:JK,lineNumber:313,columnNumber:13}},g()(r).format("ll")),s.createElement("div",{className:bn()("cal-tasks-row-events",{selected:a}),__source:{fileName:JK,lineNumber:317,columnNumber:11}},i.map((e=>{const{editor:t}=this.context,i=this.props.selectedEvent===e.id&&t.uid===this.props.editorUid,r=!!this.props.editingEvent&&this.props.editingEvent.id===e.id&&t.uid===this.props.editorUid,a=r&&this.props.editingEvent?this.props.editingEvent:e;return s.createElement("div",{key:Kc.Z.generateKey(a),className:"event-container",onClick:this.onClickEvent.bind(null,a),onKeyDown:e=>this.props.eventKeyDown(e,a),__source:{fileName:JK,lineNumber:333,columnNumber:17}},s.createElement(HG,{event:a,displayStyle:this.props.eventDisplayStyle,isSelected:i,isEditing:r,resizeStepSize:15,isAllDay:Kc.Z.isAllDayEvent(a),isFiltering:n,__source:{fileName:JK,lineNumber:340,columnNumber:19}}))})),!this.props.editingEvent&&s.createElement("div",{className:bn()("calendar-add-event-button",{active:a&&!this.props.selectedEvent,selected:a}),onClick:e=>this.onClickDay(e,Date.parse(r)),ref:e=>{a&&!this.props.selectedEvent&&e&&e.scrollIntoViewIfNeeded({block:"nearest",inline:"nearest",behavior:"smooth"})},__source:{fileName:JK,lineNumber:353,columnNumber:15}},"+"))))}return e}))}componentDidMount(){const{editor:e}=this.context;this.wasEditing=!!this.props.editingEvent&&e.uid===this.props.editorUid}renderAddEvent(){const e=0===Gc.Z.getEvents().length;return s.createElement("div",{className:"cal-tasks-row",__source:{fileName:JK,lineNumber:382,columnNumber:7}},s.createElement("div",{className:"cal-tasks-row-events selected",__source:{fileName:JK,lineNumber:383,columnNumber:9}},e&&s.createElement("h2",{__source:{fileName:JK,lineNumber:387,columnNumber:13}},(0,ue.Z)("Your calendar contains no events. Add the first one below!")),s.createElement("div",{className:"calendar-add-event-button selected active",onClick:e=>this.onClickDay(e,Date.now()),__source:{fileName:JK,lineNumber:389,columnNumber:13}},"+")))}render(){return s.createElement("div",{className:`calendar-grid-${this.props.displayMode}`,onKeyDown:this.onKeyDown,onClick:this.onClickBackground,tabIndex:"0",ref:e=>{e&&(!this.props.editingEvent&&this.wasEditing||!this.initialFocusTaken)&&(e.focus(),this.initialFocusTaken=!0)},__source:{fileName:JK,lineNumber:402,columnNumber:7}},0===this.props.events.length&&this.renderAddEvent(),this.renderEvents())}}ej(oj,"contextType",tD),ej(oj,"getDerivedStateFromProps",((e,t)=>{const n=aj(e.events);let s;const i=e.filter.selectedDate.format(sj),r=[...n.keys()].sort();for(const e of r)if(!s&&i<=e){s=g()(e);break}if(!s&&r.length){const e=r.pop();e!==ij&&(s=g()(e))}return{eventGroups:n,selectedDate:s||e.filter.selectedDate}}));const lj=(0,bi.Z)(oj,nj);var cj=n(53728),uj=n(34155),mj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\Calendar.jsx";const{minimalCreateEvent:dj}=Kc.Z;const hj=function(e){const t=s.useContext(tD),n=s.useContext(Vs.Z),i=s.useRef(null);s.useEffect((()=>{A.ZP.get(P.kCalendarOnboardingShown)||(st.Z.set(P.kCalendarOnboardingShown,!0),uj.nextTick((()=>{se.Z.showCalendarAccountDialog()})))}),[]),s.useEffect((()=>{const n={pageId:t.editor.pageId,uid:e.editorUid};return Gc.w.set(n.pageId,n),()=>{Gc.w.delete(n.pageId)}}),[t.editor,e.editorUid]);const r=()=>{const e=Gc.Z.getCalendarState().trashedEvents.sort(((e,t)=>(e.trash_time||0)-(t.trash_time||0))).slice(-1);e.length&&a.Z.restoreEvent(t.editor,e[0])},o=s.useCallback(((e,t)=>{const s=Gc.Z.getEditState(),r=n.document.getSelection(),a=n.document.activeElement,o=s.selectedEvent||s.eventDraft?.id;if(o&&(!r||r.isCollapsed)&&i.current&&i.current.contains(a)){const{clipboardData:n}=e;if(!n)throw new Error("No clipboardData on copy event");e.preventDefault();const s=Gc.Z.getEvent(o);if(!s)return void at.ZP.warn("Calendar",`Event to copy (id: ${o}) not found`);n.setData("text/plain",s.title),n.setData(WG,o),n.setData("vivaldi/x-cut",t)}}),[n.document]),l=s.useCallback((e=>{o(e,"true")}),[o]),c=s.useCallback((e=>{o(e,"false")}),[o]),u=s.useCallback((async s=>{if(i.current&&i.current.contains(n.document.activeElement)){const{clipboardData:n}=s;if(!n)throw new Error("No clipboardData on paste event");const i=Gc.Z.getEditState().eventDraft;if(i&&"DELETE"!==Kc.Z.shouldSaveEvent(i))return;const r=n.getData(WG);if(r){s.preventDefault();const o=e.filter.selectedDate.valueOf(),l=e.filter.allDaySelected;let c;c="true"===n.getData("vivaldi/x-cut")?await a.Z.moveEvent(t.editor,r,{start:o,byDateOnly:l}):await a.Z.copyEvent(t.editor,r,{start:o,byDateOnly:l}),i?a.Z.editEvent(t.editor,c):a.Z.selectEvent(t.editor,{event:c})}else{const s=n.getData("text/plain");s&&a.Z.editEvent(t.editor,null,dj({title:s,start:e.filter.selectedDate.valueOf()}))}}}),[n.document,t.editor,e.filter]);s.useEffect((()=>{Wl.Z.bind("ctrl+z",r);const e=i.current;return e&&(n.document.addEventListener("cut",l),n.document.addEventListener("copy",c),n.document.addEventListener("paste",u)),()=>{Wl.Z.unbind("ctrl+z",r),e&&(n.document.removeEventListener("cut",l),n.document.removeEventListener("cut",c),n.document.removeEventListener("paste",u))}}));const m=s.useCallback(((e,n)=>{"Enter"!==ST.Z[e.keyCode]||e.shiftKey||(e.preventDefault(),e.stopPropagation(),a.Z.saveEventEdit(t.editor))}),[t.editor]),d=s.useCallback((n=>{Gc.w.get(t.editor.pageId)?.uid!==e.editorUid&&Gc.w.set(t.editor.pageId,{pageId:t.editor.pageId,uid:e.editorUid})}),[t.editor,e.editorUid]),h=s.useCallback((()=>()=>{const{editor:e,eventDraft:n}=Gc.Z.getEditState();if(n&&e.uid===t.editor.uid&&(t.isActivePage||t.isPanel)){switch(A.ZP.get(P.kCalendarClickOutside)){case"cancel":a.Z.cancelEventEdit(t.editor);break;case"save_and_close":case"save_and_new":a.Z.saveEventEdit(t.editor)}}}),[t.editor,t.isActivePage,t.isPanel]),p=s.useCallback((()=>i.current),[]);(0,cj.Z)(p,h,["calendar-viewport","calendar-modal","calendar-dialog","CalendarEventBubble"]);const g=e.displayMode||e.filter.displayMode,b=Gc.Z.getDefaultCalendar(),N=t.editor.pageId===Gc.Z.getPanelResourceKey();return s.createElement("div",{ref:i,className:"calendar-viewport",onContextMenu:e=>{const t=e.target instanceof HTMLElement&&e.target.closest(".calendar-grid");t&&t!==document.activeElement&&t instanceof HTMLElement&&t.focus(),(0,Hs.Z)(n.vivaldiWindowId,(()=>{const e=[{handler:()=>al.Z.paste(n.vivaldiWindowId),...(0,Mn.Z)("verb","Paste")}];return Gc.Z.getCalendarState().trashedEvents.length&&e.push({handler:r,...(0,Mn.Z)("Restore Event from Trash")}),e})())(e)},onFocus:d,onKeyDown:n=>{const{editingEvent:s,selectedEvent:i}=e,r=n.ctrlKey;if(s)switch(ST.Z[n.keyCode]){case"Escape":a.Z.cancelEventEdit(t.editor);break;case"Del":case"Backspace":r&&a.Z.trashEvent(t.editor,s.id)}else switch(ST.Z[n.keyCode]){case"Del":case"Backspace":i&&a.Z.trashEvent(t.editor,i),n.preventDefault(),n.stopPropagation()}},style:Kc.Z.getCalendarColors(b),__source:{fileName:mj,lineNumber:289,columnNumber:5}},("day"===g||"week"===g&&!N)&&s.createElement(WK,{anchorDate:e.anchorDate||e.filter.anchorDate,filter:e.filter,events:e.events,displayMode:g,selectedEvent:e.selectedEvent,editingEvent:e.editingEvent,editorUid:e.editorUid,eventKeyDown:m,__source:{fileName:mj,lineNumber:298,columnNumber:9}}),("week"===g&&N||"multiweek"===g||"month"===g)&&s.createElement(vK,{filter:e.filter,events:e.events,displayMode:g,selectedEvent:e.selectedEvent,editingEvent:e.editingEvent,editorUid:e.editorUid,eventKeyDown:m,__source:{fileName:mj,lineNumber:314,columnNumber:9}}),"year"===g&&s.createElement(qK,{filter:e.filter,events:e.events,__source:{fileName:mj,lineNumber:326,columnNumber:9}}),"agenda"===g&&s.createElement(lj,{filter:e.filter,events:e.events,displayMode:g,eventDisplayStyle:e.eventDisplayStyle||"transparent",selectedEvent:e.selectedEvent,editingEvent:e.editingEvent,editorUid:e.editorUid,eventKeyDown:m,__source:{fileName:mj,lineNumber:333,columnNumber:9}}))};var pj=n(78330),gj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarSearchList.jsx";function bj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nj extends s.Component{constructor(e){super(e),bj(this,"cache",{}),bj(this,"state",{eventsToRender:[]}),bj(this,"selectEvent",(e=>{const{start:t}=e,n=g()(t),s={anchorDate:n,selectedDate:n};this.props.onUpdateUI(s)})),bj(this,"setSelectedIndex",(e=>{const{selectedEvent:t}=this.props,{eventsToRender:n}=this.state,s=n.flatMap((e=>e.events));if(t){let n=s.findIndex((e=>e.id===t));"Up"===e?n=Math.max(0,n-1):"Down"===e&&(n=Math.min(s.length-1,n+1)),a.Z.selectEvent(this.getEditor(),{event:s[n]})}else a.Z.selectEvent(this.getEditor(),{event:s[0]})})),bj(this,"getEditor",(()=>({pageId:this.context.editor.pageId,uid:this.props.editorUid}))),bj(this,"onKeyDown",(e=>{switch(ST.Z[e.keyCode]){case"Up":case"Down":this.setSelectedIndex(ST.Z[e.keyCode])}})),bj(this,"renderDay",(({index:e,parent:t,key:n,style:i})=>{const{eventsToRender:r}=this.state;if(0===r.length)return;const a=r[e],o=a.events.map(((e,t)=>this.renderEvent(e))),{title:l}=a;return s.createElement(Iy.Z8,{key:n,cache:this.cache,parent:t,columnIndex:0,rowIndex:e,__source:{fileName:gj,lineNumber:138,columnNumber:7}},s.createElement("div",{className:"cal-tasks-row",style:i,__source:{fileName:gj,lineNumber:144,columnNumber:9}},s.createElement("div",{className:"cal-tasks-row-date",__source:{fileName:gj,lineNumber:145,columnNumber:11}},l),s.createElement("div",{className:bn()("cal-tasks-row-events"),__source:{fileName:gj,lineNumber:146,columnNumber:13}},o)))})),bj(this,"eventClick",(e=>{this.props.onSelectEvent(e.id)})),bj(this,"renderEvent",(e=>{const t=Kc.Z.isAllDayEvent(e),{selectedEvent:n}=this.props,i=n===e.id,r=!!this.props.editingEvent&&this.props.editingEvent.id===e.id,a=Kc.Z.isRecurringEvent(e),o=Boolean(this.props.filterText);let l;if(a){const{recurrence:t}=e;if(t){const n=xT(e.recurrence),s=(0,IT.qh)(t,new Date,g()().add(1,"y").toDate(),3).map((e=>g()(e).format("LL")));l=`${(0,ue.Z)("Next occurrences:")}\n          ${s.join(", ")}. ${n}.`}}return s.createElement("div",{key:e.id,onClick:this.eventClick.bind(null,e),className:"event-container",__source:{fileName:gj,lineNumber:182,columnNumber:7}},s.createElement(HG,{event:e,displayStyle:"transparent",isSelected:i,isEditing:r,isAllDay:t,isFiltering:o,__source:{fileName:gj,lineNumber:185,columnNumber:9}}),l&&s.createElement("div",{__source:{fileName:gj,lineNumber:193,columnNumber:11}},l))})),this.cache=new Iy.t1({defaultHeight:50})}componentDidUpdate(e,t){this.props.filterText!==e.filterText&&this.cache.clearAll()}render(){const{eventsToRender:e}=this.state,t=Gc.Z.getDefaultCalendar();return s.createElement("div",{className:"manager-content",__source:{fileName:gj,lineNumber:204,columnNumber:7}},s.createElement("div",{className:"calendar-viewport",style:Kc.Z.getCalendarColors(t),__source:{fileName:gj,lineNumber:205,columnNumber:9}},s.createElement("div",{className:"search-results",__source:{fileName:gj,lineNumber:209,columnNumber:11}},(0,ue.Z)("$1 result for “$2”","$1 results for “$2”",[e.length,this.props.filterText]),s.createElement("button",{onClick:this.props.onClose,__source:{fileName:gj,lineNumber:213,columnNumber:13}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:gj,lineNumber:214,columnNumber:15}}))),s.createElement("div",{className:"calendar-grid-agenda search-results-list",onKeyDown:this.onKeyDown,__source:{fileName:gj,lineNumber:217,columnNumber:11}},s.createElement(pj.q,{__source:{fileName:gj,lineNumber:221,columnNumber:13}},(({height:t,width:n})=>s.createElement(fg.aV,{width:n,height:t,defferredMeasurementCache:this.cache,rowHeight:this.cache.rowHeight,rowRenderer:this.renderDay,rowCount:e.length,__source:{fileName:gj,lineNumber:223,columnNumber:15}}))))))}}bj(Nj,"contextType",tD),bj(Nj,"getDerivedStateFromProps",((e,t)=>{const n=Gc.Z.getEvents()||[];return{eventsToRender:Kc.Z.searchEvents(n,e.filterText).reduce(((e,t)=>{const n=g()(t.start).format("ll"),s=e.findIndex((e=>e.title===n));return-1===s?e.push({title:n,events:[t]}):e[s].events.unshift(t),e}),[])}}));const fj=Nj;function _j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vj extends s.PureComponent{constructor(...e){super(...e),_j(this,"undeleteEvent",(e=>{a.Z.restoreEvent(this.context.editor,e)})),_j(this,"undo",(()=>{const{trashedEvents:e}=this.props;e.length>0&&this.undeleteEvent(e[0])})),_j(this,"trimTitle",(e=>(e.length>70&&(e=e.substring(0,70)+"..."),e))),_j(this,"getContextMenuItems",(()=>this.props.trashedEvents.sort(((e,t)=>(t.trash_time||0)-(e.trash_time||0))).map((e=>({mnemonic:!1,url:e.id,handler:this.undeleteEvent.bind(this,e),...z.Z.makeLabelPair(e.title||"")}))).filter(Boolean).concat([z.Z.separatorItem,{handler:this.clearAll,...(0,Mn.Z)("other","Clear All")}]))),_j(this,"clearAll",(()=>{const{trashedEvents:e}=this.props;e.forEach((e=>{const{id:t}=e;a.Z.deleteEvent(t)}))})),_j(this,"onDrop",(e=>{const t=e.dataTransfer.getData(WG);if(t){e.preventDefault(),e.stopPropagation();const n=JSON.parse(t),{id:s}=n;a.Z.trashEvent(this.context.editor,s)}})),_j(this,"render",(()=>s.createElement(ko,{className:"toggle-trash",onDrop:this.onDrop,onDragEnter:qo.default,disabled:0===this.props.trashedEvents.length,image:cn.nre.medium,onMiddleClick:this.undo,menu:this.getContextMenuItems,menuOrigin:"bottomLeft",mimeType:WG,edgeAmount:0,tooltip:(0,ue.Z)("Trashed Events"),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarTrash.jsx",lineNumber:86,columnNumber:5}})))}}_j(vj,"contextType",tD);const Ej=vj;var Cj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarPicker.jsx";const{isRemoteCalendar:wj}=Kc.Z,yj=e=>{a.Z.toggleCalendarVisibility(e)},Sj=e=>{const{key:t}=e;" "!==t&&"Enter"!==t||e.target.dispatchEvent(new Event("click",{bubbles:!0}))};const Tj=function(e){const t=s.useRef(),n=s.useRef(),i=s.useRef(),r=s.useRef(!1),o=s.useRef(),l=s.useContext(Vs.Z),{document:c}=l,[u,m]=s.useState(!1);s.useEffect((()=>(t.current&&t.current.focus(),()=>{o.current&&clearTimeout(o.current)})),[]);const d=e=>{a.Z.setDefaultCalendarId(e),t.current&&t.current.focus()},h=e=>{e.currentTarget.focus();const t=e.currentTarget.classList.contains("CalendarPicker-Item--Submenu")||e.currentTarget.closest(".CalendarPicker-Item--Submenu");t?u?o.current&&(o.current=clearTimeout(o.current)):m(!0):!t&&u&&(o.current=setTimeout((()=>{m(!1),o.current=null}),500))},p=e=>{t.current&&t.current.focus()},g=Gc.Z.getDefaultCalendar()?.id,b=r.current;r.current=!1;const N=e.calendars.some((e=>wj(e.id))),f=Gc.Z.getAccounts().filter((e=>"ical"!==e.account_type)),_=e.calendars.filter((e=>f.some((t=>t.id===e.accountId))));return s.createElement("div",{className:"CalendarPicker",onKeyDown:e=>{const s=c.activeElement,{key:a}=e;if(s&&s.classList.contains("CalendarPicker-Item")){if(s){const e=((e,t)=>{const n=e.parentElement&&e.parentElement.children;return n&&n.length?[...n].filter((e=>e.classList.contains(t))):[]})(s,"CalendarPicker-Item"),n=e.indexOf(s);if(0===e.length||-1===n)return;if("ArrowDown"===a)e[(n+1)%e.length].focus();else if("ArrowUp"===a)e[(n-1+e.length)%e.length].focus();else if("ArrowLeft"===a){if(u&&t.current){const e=t.current.querySelector(".CalendarPicker-Item--Submenu");e&&e.focus(),m(!1)}}else if("ArrowRight"===a&&s.classList.contains("CalendarPicker-Item--Submenu"))if(u){const e=s.querySelectorAll(".CalendarPicker-Item");e.length&&e[0].focus()}else m(!0),r.current=!0}}else"ArrowUp"===a?i.current&&i.current.focus():"ArrowDown"===a&&(n.current?n.current.focus():i.current&&i.current.focus())},ref:t,tabIndex:0,__source:{fileName:Cj,lineNumber:177,columnNumber:5}},e.calendars.length>0&&s.createElement(s.Fragment,null,e.calendars.map(((e,t)=>{const i=Kc.Z.createCalendarIcon(e,16,!e.hidden);return s.createElement("button",{onMouseEnter:h,onMouseLeave:p,className:"CalendarPicker-Item",key:e.id,onClick:yj.bind(null,e.id),ref:0===t?n:null,__source:{fileName:Cj,lineNumber:189,columnNumber:13}},s.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:i},__source:{fileName:Cj,lineNumber:197,columnNumber:15}}),s.createElement("span",{className:bn()("CalendarPicker-Title",{"CalendarPicker-Title--Default":e.id===g}),__source:{fileName:Cj,lineNumber:201,columnNumber:15}},e.description||e.name))})),_.length>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:Cj,lineNumber:214,columnNumber:11}}),s.createElement("div",{className:"CalendarPicker-Item CalendarPicker-Item--Submenu",onClick:()=>m(!u),onMouseEnter:h,onMouseLeave:p,onKeyUp:Sj,tabIndex:0,__source:{fileName:Cj,lineNumber:215,columnNumber:11}},s.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:Cj,lineNumber:223,columnNumber:13}},(0,ue.Z)("Default Calendar")),s.createElement("span",{className:"CalendarPicker-SubmenuIcon",dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:Cj,lineNumber:226,columnNumber:13}}),u&&s.createElement("div",{className:"CalendarPicker-Submenu",__source:{fileName:Cj,lineNumber:231,columnNumber:15}},_.map(((e,t)=>{const n=g===e.id,i=Kc.Z.createCalendarIcon(e,16,n);return s.createElement("button",{className:"CalendarPicker-Item",key:e.id,onClick:d.bind(null,e.id),onMouseEnter:h,onMouseLeave:p,autoFocus:0===t&&b,__source:{fileName:Cj,lineNumber:239,columnNumber:21}},s.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:i},__source:{fileName:Cj,lineNumber:247,columnNumber:23}}),s.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:Cj,lineNumber:251,columnNumber:23}},e.description||e.name))}))))),s.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:Cj,lineNumber:263,columnNumber:11}})),s.createElement("button",{className:"CalendarPicker-Item",onClick:()=>{a.Z.addCalendarCommand(),e.requestClose&&e.requestClose()},onMouseEnter:h,onMouseLeave:p,__source:{fileName:Cj,lineNumber:267,columnNumber:7}},s.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:cn.md4.medium},__source:{fileName:Cj,lineNumber:273,columnNumber:9}}),s.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:Cj,lineNumber:277,columnNumber:9}},(0,ue.Z)("New Calendar"))),N&&s.createElement(s.Fragment,null,s.createElement("button",{className:"CalendarPicker-Item",onClick:async()=>{e.requestClose&&e.requestClose(),a.Z.pollAllCalDAVAccountsWithStatus()},onMouseEnter:h,onMouseLeave:p,__source:{fileName:Cj,lineNumber:283,columnNumber:9}},s.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:cn.GO5.medium},__source:{fileName:Cj,lineNumber:289,columnNumber:11}}),s.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:Cj,lineNumber:293,columnNumber:11}},(0,ue.Z)("Refresh"))),s.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:Cj,lineNumber:297,columnNumber:9}})),s.createElement("button",{className:"CalendarPicker-Item",onClick:()=>{se.Z.showSettings("calendar"),e.requestClose&&e.requestClose()},onMouseEnter:h,onMouseLeave:p,ref:i,__source:{fileName:Cj,lineNumber:301,columnNumber:7}},s.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:cn.bqs.medium},__source:{fileName:Cj,lineNumber:308,columnNumber:9}}),s.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:Cj,lineNumber:312,columnNumber:9}},(0,ue.Z)("Calendar Settings"))))};var kj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarVisibilityButtons.jsx";const Ij=function(e){const[t,n]=s.useState(!1);return s.createElement(s.Fragment,null,s.createElement("div",{className:"toolbar-dropdown-container",__source:{fileName:kj,lineNumber:33,columnNumber:7}},s.createElement(ko,{image:cn.bcq.medium,isPressed:t,onClick:()=>n(!t),popupPosition:"below",hidePopup:()=>{},title:(0,ue.Z)("Calendars"),__source:{fileName:kj,lineNumber:34,columnNumber:9}}),t&&s.createElement(ln.Z,{dialogWidth:"auto",viewMode:"calendar-picker",onRequestClose:e=>{e&&e.target.addEventListener("click",Rx.Z,{once:!0}),n(!1)},__source:{fileName:kj,lineNumber:43,columnNumber:11}},s.createElement(Tj,{calendars:e.calendars,requestClose:()=>n(!1),__source:{fileName:kj,lineNumber:48,columnNumber:13}}))))};var Aj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\FilterAndSearch.jsx";const{isAllDayEvent:Zj,searchEvents:Pj}=Kc.Z,Dj={events:[],count:0,totalCount:0};const Mj=function(e){const t=s.useContext(Vs.Z),{document:n}=t,[i,r]=s.useState(!1),[a,o]=s.useState(Dj),[l,c]=s.useState(-1),u=s.useRef(),m=s.useRef();s.useEffect((()=>{i&&u.current?.focus()}),[i]),s.useEffect((()=>{function e(){m.current?.focus(),r(!0)}return Ys.Z.addListener("COMMAND_CALENDAR_SEARCH",e),()=>{Ys.Z.removeListener("COMMAND_CALENDAR_SEARCH",e)}}),[]);const d=t=>{b(),e.onSelectEvent(t)},h=()=>{b(),e.onShowSearchResults()},p=t=>{const n=Gc.Z.getEvents()||[];let s=Pj(n,t||e.filterText);const i=s.length;return i>10&&(s=s.slice(0,10)),{events:s,count:s.length,totalCount:i}},b=()=>{r(!1),c(-1)},N=t=>{switch(ST.Z[t.keyCode]){case"Enter":o(p()),r(!0);break;case"Escape":e.onSearchChange(""),r(!1)}},f=s.useRef(null),_=s.useCallback((()=>b),[]),v=s.useCallback((()=>f.current),[]);return(0,cj.Z)(v,_),s.createElement("div",{ref:f,className:"toolbar-group FilterAndSearch",__source:{fileName:Aj,lineNumber:232,columnNumber:5}},s.createElement("input",{type:"search",className:"FilterAndSearch-Input",tabIndex:"0",ref:m,placeholder:(0,ue.Z)("Filter and Search"),title:(0,ue.Z)("Type to filter. Press enter or click button to search."),value:e.filterText,onChange:t=>{const{value:n}=t.target;e.onSearchChange(n),""===n&&b(),i&&o(p(n))},onKeyDown:N,__source:{fileName:Aj,lineNumber:235,columnNumber:7}}),s.createElement("input",{className:"FilterAndSearch-Button",type:"button",disabled:0===e.filterText.length,onClick:h,value:(0,ue.Z)("verb","Search"),__source:{fileName:Aj,lineNumber:247,columnNumber:7}}),i&&a.count>0&&s.createElement("div",{className:"SearchDropdown",ref:u,tabIndex:"0",onFocus:e=>{e.target===u.current&&l<0&&c(0)},onKeyDown:e=>{switch(ST.Z[e.keyCode]){case"Space":case"Enter":l>=0&&l<a.count&&(d(a.events[l].id),e.stopPropagation());break;case"Escape":b(),m.current&&m.current.focus();break;case"Up":c((e=>Math.max(0,e-1)));break;case"Down":c((e=>Math.min(a.count-1,e+1)));break;case"Tab":n.activeElement===u.current&&(!e.shiftKey&&l<a.count-1?(c((e=>e+1)),e.preventDefault()):e.shiftKey&&l>0&&(c((e=>e-1)),e.preventDefault()))}},__source:{fileName:Aj,lineNumber:255,columnNumber:9}},s.createElement("ul",{__source:{fileName:Aj,lineNumber:262,columnNumber:11}},a.events.map(((t,n)=>{const i=Gc.Z.getCalendars(),{title:r,id:a,start:o=0,end:u=0}=t,m=g()(o),h=g()(u),p=i.find((e=>e.id===t.calendarId)),b=p?Kc.Z.createCalendarIcon(p,9):"";return s.createElement("li",{className:bn()("SearchDropdown-Item",{"SearchDropdown-Item--Selected":l===n}),key:n,onKeyDown:N,onMouseUp:d.bind(null,a),onMouseOver:()=>c(n),__source:{fileName:Aj,lineNumber:195,columnNumber:7}},s.createElement("div",{className:"SearchDropdown-ItemEvent",__source:{fileName:Aj,lineNumber:203,columnNumber:9}},s.createElement("p",{className:"SearchDropdown-ItemEventTitle",__source:{fileName:Aj,lineNumber:204,columnNumber:11}},(0,Yi.CH)(r,e.filterText))),s.createElement("div",{className:"SearchDropdown-ItemMetaData",__source:{fileName:Aj,lineNumber:208,columnNumber:9}},s.createElement("div",{className:"SearchDropdown-ItemIcon",__source:{fileName:Aj,lineNumber:209,columnNumber:11}},s.createElement("span",{dangerouslySetInnerHTML:{__html:b},__source:{fileName:Aj,lineNumber:210,columnNumber:13}})),s.createElement("p",{className:"SearchDropdown-ItemEventCalendar",__source:{fileName:Aj,lineNumber:212,columnNumber:11}},!!p&&(p.description||p.name)),s.createElement("div",{className:"SearchDropdown-ItemDate",__source:{fileName:Aj,lineNumber:215,columnNumber:11}},(e=>{const{start:t,end:n}=e,s=g()(t),i=g()(n);return i.isAfter(s,"day")?(0,ue.Z)("$1 - $2 $3",[s.format(B.ZP.getShortDateFormat()),i.format(B.ZP.getShortDateFormat()),s.format("YYYY")]):(0,ue.Z)("$1. $2",[s.format("ddd"),s.format("ll")])})(t),s.createElement("br",{__source:{fileName:Aj,lineNumber:217,columnNumber:13}}),!Zj(t)&&`${m.format("LT")}-${h.format("LT")}`)))}))),a.count!==a.totalCount&&s.createElement("div",{className:"SearchDropdown-MoreItems",__source:{fileName:Aj,lineNumber:266,columnNumber:13}},(0,ue.Z)("More results, showing first $1 items out of $2 total.",[a.count,a.totalCount])),s.createElement("input",{className:"SearchDropdown-Button",type:"button",onClick:h,value:(0,ue.Z)("Go to Search Results"),__source:{fileName:Aj,lineNumber:271,columnNumber:11}})))};var Oj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\DatePickerPopup.jsx";function xj(e){const t=s.useRef(),n=s.useRef(),i=(0,$Z.Z)([P.kKeyboardTabToAll]),[r,a]=s.useState("month"===e.mode),[o,l]=s.useState((()=>e.initialPeriod.clone())),[c,u]=s.useState((()=>e.initialPeriod.clone())),m=s.useCallback((e=>{l(e),u(e)}),[]);function d(e){e.year()!==c.year()&&c.year(e.year()),m(e)}function h(){r?u(c.clone().subtract(1,"year")):d(o.clone().subtract(1,"month"))}function p(){r?u(c.clone().add(1,"year")):d(o.clone().add(1,"month"))}function b(t){e.setPeriod(t),e.requestClose()}function N(t){"month"===e.mode?b(t):(m(t),a(!1))}function f(e){const t=e.currentTarget;if(t instanceof HTMLElement){const e=t.dataset.month;N(c.clone().month(parseInt(e)))}}function _(t){if(t.keyCode){const e=ST.Z[t.keyCode];if(t.repeat||"Space"!==e&&"Enter"!==e)return}t.stopPropagation(),t.preventDefault(),a((t=>!t||"month"===e.mode))}return s.useEffect((()=>(t.current=document.activeElement,n.current?.focus(),l(e.initialPeriod.clone()),a("month"===e.mode),()=>{t.current?.focus()})),[e.initialPeriod,e.mode]),s.createElement("div",{className:"DatePickerPopup",ref:n,onMouseDown:Rx.Z,onClick:Rx.Z,onKeyDown:function(t){let n;switch(ST.Z[t.keyCode]){case"Left":n=r?c.clone().subtract(1,"month"):o.clone().subtract(1,"day");break;case"Right":n=r?c.clone().add(1,"month"):o.clone().add(1,"day");break;case"Up":n=r?c.clone().subtract(3,"month"):o.clone().subtract(1,"week");break;case"Down":n=r?c.clone().add(3,"month"):o.clone().add(1,"week");break;case"PageUp":h();break;case"PageDown":p();break;case"Enter":if((0,Rx.Z)(t),t.target!==t.currentTarget)return;r?N(c.clone()):b(o);break;case"Escape":(0,Rx.Z)(t),e.requestClose()}n&&!r?(n.year()!==c.year()&&c.year(n.year()),m(n)):n&&r&&u(n)},tabIndex:"0",__source:{fileName:Oj,lineNumber:181,columnNumber:5}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Oj,lineNumber:189,columnNumber:7}},s.createElement("h1",{onMouseDown:_,onKeyDown:_,tooltip:r?(0,ue.Z)("Show Days"):(0,ue.Z)("Show Months"),tabIndex:i[P.kKeyboardTabToAll],__source:{fileName:Oj,lineNumber:190,columnNumber:9}},r?c.format("YYYY"):o.format("MMMM YYYY")),s.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:Oj,lineNumber:202,columnNumber:9}},s.createElement(ko,{className:"button-narrow",onClick:h,tooltip:r?(0,ue.Z)("Previous Year"):(0,ue.Z)("Previous Month"),image:cn.mgF.medium,__source:{fileName:Oj,lineNumber:203,columnNumber:11}}),s.createElement(ko,{onClick:function(){const e=g()();m(e),u(e)},title:(0,ue.Z)("Today"),__source:{fileName:Oj,lineNumber:213,columnNumber:11}}),s.createElement(ko,{className:"button-narrow",onClick:p,tooltip:r?(0,ue.Z)("Next Year"):(0,ue.Z)("Next Month"),image:cn.Zu.medium,__source:{fileName:Oj,lineNumber:218,columnNumber:11}}))),!r&&s.createElement(XK,{events:[],month:o,onSelect:b,selectedDate:o,showOutOfMonthDays:!0,highlightMode:"week"===e.mode?"week":"day",fixedHeight:!0,__source:{fileName:Oj,lineNumber:231,columnNumber:9}}),r&&s.createElement(s.Fragment,null,s.createElement("div",{className:"DatePickerPopup-YearMonths",__source:{fileName:Oj,lineNumber:243,columnNumber:9}},g().months().map(((e,t)=>{const n=t===o.month()&&o.year()===c.year(),i=t===c.month();return s.createElement("div",{className:bn()("DatePickerPopup-YearMonth",{"DatePickerPopup-YearMonth--Selected":n,"DatePickerPopup-YearMonth--Highlighted":i}),key:e,"data-month":t,onClick:f,__source:{fileName:Oj,lineNumber:249,columnNumber:15}},e)})))))}xj.defaultProps={mode:"day"};const Lj=xj;var Rj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\PeriodPicker.jsx";const Bj=function(e){const[t,n]=s.useState(!1),i=(0,$Z.Z)([P.kKeyboardTabToAll]),r=s.useContext(Vs.Z);function a(){n(!1)}function o(e){if(e.keyCode){const t=ST.Z[e.keyCode];if(e.repeat||"Space"!==t&&"Enter"!==t||e.target!==e.currentTarget)return}n(!t)}let l,c;switch(s.useEffect((()=>{function t(){const{area:t}=U.Z.getContext(r.vivaldiWindowId);(!e.inPanel&&"panel"!==t||e.inPanel&&"panel"===t)&&n(!0)}return Ys.Z.addListener("COMMAND_CALENDAR_GOTO_DATE",t),()=>{Ys.Z.removeListener("COMMAND_CALENDAR_GOTO_DATE",t)}}),[e.inPanel,r]),e.displayMode){case"year":c="month",l=e.startDate.year();break;case"month":c="month",l=(0,ue.Z)("$1 $2",[e.initialPeriod.format("MMMM"),e.initialPeriod.format("YYYY")]);break;case"multiweek":case"week":c="week",l=(0,ue.Z)("$1 – $2",[e.startDate.format("ll"),e.endDate?.format("ll")]);break;case"day":c="day",l=g()(e.startDate).format(B.ZP.getWeekdayFormat("LL"));break;case"agenda":c="day",l=(0,ue.Z)("$1 – $2",[e.startDate.format("ll"),e.endDate?.format("ll")])}return s.createElement("div",{className:"PeriodPicker",onKeyDown:o,onMouseDown:o,tabIndex:i[P.kKeyboardTabToAll],__source:{fileName:Rj,lineNumber:109,columnNumber:5}},s.createElement("h1",{title:(0,ue.Z)("Click to Select Period"),__source:{fileName:Rj,lineNumber:115,columnNumber:7}},l),s.createElement(ko,{tooltip:(0,ue.Z)("Click to Select Period"),popupPosition:"below",image:cn.yaZ.small,onClick:o,hidePopup:a,isPopupVisible:t,popupWidth:300,outsideClickIgnoreClass:"PeriodPicker",tabIndex:-1,__source:{fileName:Rj,lineNumber:118,columnNumber:7}},s.createElement(Lj,{initialPeriod:e.initialPeriod,setPeriod:e.setPeriod,mode:c,requestClose:a,__source:{fileName:Rj,lineNumber:129,columnNumber:9}})))};var Fj=n(81365),Uj=n(44854),Vj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\util\\react\\withDragDropContext.js";function Hj(){return Hj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hj.apply(this,arguments)}function Wj(e){return t=>s.createElement(Fj.W,{backend:Uj.HTML5Backend,__source:{fileName:Vj,lineNumber:11,columnNumber:5}},s.createElement(e,Hj({},t,{__source:{fileName:Vj,lineNumber:12,columnNumber:7}})))}var zj=n(34155),Gj="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarManager.jsx";function Kj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jj=(0,QG.extendMoment)(g()),{minimalCreateEvent:Yj}=Kc.Z,$j=[P.kCalendarDisplayDensity,P.kCalendarDisplayWeekNumber,P.kMailIsTurnedOff];class Xj extends s.Component{constructor(...e){super(...e),Kj(this,"didManagerGetFocus",!1),Kj(this,"mainEditorUid",Symbol("CalendarManagerMainView")),Kj(this,"sidebarEditorUid",Symbol("CalendarManagerSidebarView")),Kj(this,"displayModeList",["day","week","multiweek","month","year","agenda"]),Kj(this,"reverse_swipe",!1),Kj(this,"state",{showDaySidebar:A.ZP.get(P.kCalendarShowDaySidebar),showTasksSidebar:A.ZP.get(P.kCalendarShowTasksSidebar),repeatedEventDialog:!1,calendarId:""}),Kj(this,"handleDisplayModeChange",(e=>{this.onUpdateUI({displayMode:e,anchorDate:this.props.calendarFilter.selectedDate})})),Kj(this,"viewPrevious",(()=>a.Z.viewPreviousPeriod(this.props.pageId))),Kj(this,"viewNext",(()=>a.Z.viewNextPeriod(this.props.pageId))),Kj(this,"toggleSidebar",(()=>{this.setState((e=>{if("agenda"===this.props.calendarFilter.displayMode){const t=!e.showTasksSidebar;return st.Z.set(P.kCalendarShowTasksSidebar,t),{showTasksSidebar:t}}{const t=!e.showDaySidebar;return st.Z.set(P.kCalendarShowDaySidebar,t),{showDaySidebar:t}}}))})),Kj(this,"toggleCompleted",(e=>{this.onUpdateUI({showCompletedTasks:!this.props.calendarFilter.showCompletedTasks})})),Kj(this,"setToday",(()=>{a.Z.selectToday(this.props.pageId)})),Kj(this,"setDate",(e=>{this.onUpdateUI({anchorDate:e,selectedDate:e})})),Kj(this,"onUpdateUI",(e=>{const t=this.props.calendarFilter.merge(e);a.Z.updateCalendarUI(this.props.pageId,t)})),Kj(this,"onSearchChange",(e=>{this.onUpdateUI({filterText:e,...!e&&{showSearchResults:!1}})})),Kj(this,"showSearchResults",(()=>{this.onUpdateUI({showSearchResults:!0})})),Kj(this,"closeSearcResults",(()=>{this.onUpdateUI({showSearchResults:!1,filterText:""})})),Kj(this,"setDensityMinimal",(()=>{st.Z.set(P.kCalendarDisplayDensity,"minimal")})),Kj(this,"setDensityCompact",(()=>{st.Z.set(P.kCalendarDisplayDensity,"compact")})),Kj(this,"setDensityFull",(()=>{st.Z.set(P.kCalendarDisplayDensity,"full")})),Kj(this,"newEvent",(()=>{const e=this.props.calendarFilter.selectedDate.valueOf();a.Z.addEventCommand(Yj({start:e}))})),Kj(this,"eventSearchSelected",(e=>{const t=Gc.Z.getEvent(e);if(t){const{start:e}=t,n=jj(e),s={anchorDate:n,selectedDate:n,showSearchResults:!1};this.onUpdateUI(s)}})),Kj(this,"_calendars",(()=>this.props.calendars.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:Gj,lineNumber:221,columnNumber:6}},e.description||e.name))))),Kj(this,"setCalendar",(e=>a.Z.setDefaultCalendarId(e.target.value)))}componentDidMount(){const e=(0,As.DP)(this.props.url);if(e.anchordate){const t=jj(parseInt(e.anchordate));zj.nextTick((()=>{this.setDate(t)}))}!1===this.didManagerGetFocus&&this.context.isActivePage&&(this.didManagerGetFocus=!0,a.Z.pollAllCalDAVAccounts(!0))}componentDidUpdate(){!1===this.didManagerGetFocus&&this.context.isActivePage&&(a.Z.pollAllCalDAVAccounts(!0),this.didManagerGetFocus=!0),!1===this.context.isActivePage&&(this.didManagerGetFocus=!1)}render(){if(this.props.prefValues[P.kMailIsTurnedOff])return s.createElement($S,{__source:{fileName:Gj,lineNumber:231,columnNumber:9}});const{displayMode:e,anchorDate:t,selectedDate:n,filterText:i,showSearchResults:r}=this.props.calendarFilter,a=Kc.Z.getDisplayRange(t,e),o=this.props.eventDraft,{calendars:l,events:c,tasks:u,trashedEvents:m,selectedEvent:d}=this.props,h=["agenda","year"].includes(e)?0===c.length:c.every((e=>!0===e.filteredOut));let p;const g=this.props.prefValues[P.kCalendarDisplayWeekNumber],b=n.format(B.ZP.getWeekdayFormat("LL"));if("day"===e)p=g&&(0,ue.Z)("Week $1",[n.week()]);else if("week"===e)p=g&&(0,ue.Z)("Week $1",[n.week()]);else if("multiweek"===e){const{start:e,end:t}=a;p=g&&(0,ue.Z)("Weeks $1 - $2",[e.week(),t.week()])}else if("month"===e){const e=jj(t);p=g&&(0,ue.Z)("Weeks $1 - $2",[e.startOf("month").week(),e.endOf("month").week()])}else if("agenda"===e){const{start:e,end:t}=a;p=g&&(0,ue.Z)("Weeks $1 - $2",[e.week(),t.week()])}const N=this.props.prefValues[P.kCalendarDisplayDensity],f=["week","multiweek","month","year"].includes(e)&&(!0===this.state.showDaySidebar||"year"===e)||"agenda"===e&&this.state.showTasksSidebar;return s.createElement(gi.Z,{focusName:"focus_calendar",__source:{fileName:Gj,lineNumber:279,columnNumber:7}},s.createElement("div",{className:"manager calendar",__source:{fileName:Gj,lineNumber:280,columnNumber:9}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Gj,lineNumber:283,columnNumber:11}},s.createElement(Bj,{initialPeriod:t,setPeriod:this.setDate,startDate:a.start,endDate:a.end,displayMode:e,inPanel:!1,__source:{fileName:Gj,lineNumber:284,columnNumber:13}}),p&&s.createElement("p",{className:"weeks",__source:{fileName:Gj,lineNumber:293,columnNumber:15}},p),s.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:Gj,lineNumber:296,columnNumber:13}},s.createElement("span",{className:"density-label",__source:{fileName:Gj,lineNumber:297,columnNumber:15}},(0,ue.Z)("Layout")),s.createElement(ko,{tooltip:(0,ue.Z)("Minimal display"),isPressed:"minimal"===N,onClick:this.setDensityMinimal,image:cn.NBh.medium,__source:{fileName:Gj,lineNumber:300,columnNumber:15}}),s.createElement(ko,{tooltip:(0,ue.Z)("Compact display"),isPressed:"compact"===N,onClick:this.setDensityCompact,image:cn.EEk.medium,__source:{fileName:Gj,lineNumber:306,columnNumber:15}}),s.createElement(ko,{tooltip:(0,ue.Z)("Full display"),isPressed:"full"===N,onClick:this.setDensityFull,image:cn.Bd5.medium,__source:{fileName:Gj,lineNumber:312,columnNumber:15}})),s.createElement(Mj,{filterText:i,onSearchChange:this.onSearchChange,onSelectEvent:this.eventSearchSelected,onShowSearchResults:this.showSearchResults,onUpdateUI:this.onUpdateUI,__source:{fileName:Gj,lineNumber:320,columnNumber:13}})),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Gj,lineNumber:328,columnNumber:11}},s.createElement(ko,{onClick:this.newEvent,title:(0,ue.Z)("New Event"),image:cn.md4.medium,__source:{fileName:Gj,lineNumber:329,columnNumber:13}}),s.createElement(Ij,{calendars:l,defaultCalendarId:this.props.defaultCalendarId,__source:{fileName:Gj,lineNumber:336,columnNumber:13}}),s.createElement(ko,{style:{marginLeft:"auto"},onClick:this.setToday,title:(0,ue.Z)("Today"),__source:{fileName:Gj,lineNumber:341,columnNumber:13}}),s.createElement("div",{className:"toolbar-group",__source:{fileName:Gj,lineNumber:348,columnNumber:13}},s.createElement(ko,{className:"button-narrow",onClick:this.viewPrevious,tooltip:(0,ue.Z)("Previous"),image:cn.mgF.medium,__source:{fileName:Gj,lineNumber:349,columnNumber:15}}),s.createElement(ko,{className:"button-narrow",onClick:this.viewNext,tooltip:(0,ue.Z)("Next"),image:cn.Zu.medium,__source:{fileName:Gj,lineNumber:356,columnNumber:15}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:Gj,lineNumber:365,columnNumber:13}},s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"day"),title:(0,ue.Z)("Day"),tooltip:(0,ue.Z)("Day (d)"),isPressed:"day"===e,__source:{fileName:Gj,lineNumber:366,columnNumber:15}}),s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"week"),title:(0,ue.Z)("Week"),tooltip:(0,ue.Z)("Week (w)"),isPressed:"week"===e,__source:{fileName:Gj,lineNumber:374,columnNumber:15}}),s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"multiweek"),title:(0,ue.Z)("Multiweek"),tooltip:(0,ue.Z)("Multiweek (n)"),isPressed:"multiweek"===e,__source:{fileName:Gj,lineNumber:382,columnNumber:15}}),s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"month"),title:(0,ue.Z)("Month"),tooltip:(0,ue.Z)("Month (m)"),isPressed:"month"===e,__source:{fileName:Gj,lineNumber:390,columnNumber:15}}),s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"year"),title:(0,ue.Z)("Year"),tooltip:(0,ue.Z)("Year (y)"),isPressed:"year"===e,__source:{fileName:Gj,lineNumber:398,columnNumber:15}}),s.createElement(ko,{onClick:this.handleDisplayModeChange.bind(this,"agenda"),title:(0,ue.Z)("Agenda"),tooltip:(0,ue.Z)("Agenda (a)"),isPressed:"agenda"===e,__source:{fileName:Gj,lineNumber:406,columnNumber:15}})),s.createElement(Ej,{trashedEvents:m,__source:{fileName:Gj,lineNumber:416,columnNumber:13}}),s.createElement(ko,{onClick:this.toggleSidebar,disabled:"day"===e||"year"===e,tooltip:(0,ue.Z)("Show Sidebar"),isPressed:"agenda"===e?this.state.showTasksSidebar:this.state.showDaySidebar||"year"===e,image:cn.xMN,__source:{fileName:Gj,lineNumber:418,columnNumber:13}})),!r&&h&&i&&s.createElement("div",{className:"no-search-results",__source:{fileName:Gj,lineNumber:429,columnNumber:11}},(0,ue.Z)("Showing filtered results. Press “Search” for full results.")),s.createElement("div",{className:`manager-view ${e}`,__source:{fileName:Gj,lineNumber:432,columnNumber:11}},r&&s.createElement(fj,{selectedEvent:d,onSelectEvent:this.eventSearchSelected,filterText:i,onUpdateUI:this.onUpdateUI,onClose:this.closeSearcResults,editingEvent:o,editorUid:this.mainEditorUid,__source:{fileName:Gj,lineNumber:434,columnNumber:13}}),!r&&s.createElement("div",{className:"manager-content",__source:{fileName:Gj,lineNumber:445,columnNumber:13}},s.createElement(hj,{filter:this.props.calendarFilter,events:c,selectedEvent:d,editingEvent:o,editorUid:this.mainEditorUid,__source:{fileName:Gj,lineNumber:446,columnNumber:15}})),f&&s.createElement("div",{className:"manager-detail",__source:{fileName:Gj,lineNumber:457,columnNumber:13}},"agenda"!==e&&s.createElement("div",{className:"header",__source:{fileName:Gj,lineNumber:459,columnNumber:17}},s.createElement("h1",{__source:{fileName:Gj,lineNumber:460,columnNumber:19}},b)),"agenda"===e&&s.createElement("div",{className:"header",__source:{fileName:Gj,lineNumber:464,columnNumber:17}},s.createElement("h1",{__source:{fileName:Gj,lineNumber:465,columnNumber:19}},(0,ue.Z)("Tasks"))),s.createElement(hj,{filter:this.props.calendarFilter,events:"agenda"!==e?Kc.Z.filterEventsByPeriod(c,this.props.calendarFilter.selectedDate,"day"):u,anchorDate:this.props.calendarFilter.selectedDate,displayMode:"agenda"===e?"agenda":"day",eventDisplayStyle:"agenda"===e?"solid":null,selectedEvent:d,editingEvent:o,editorUid:"year"===e?this.mainEditorUid:this.sidebarEditorUid,__source:{fileName:Gj,lineNumber:471,columnNumber:15}}),"agenda"===e&&s.createElement("div",{className:"footer cal-tasks",__source:{fileName:Gj,lineNumber:485,columnNumber:17}},s.createElement("label",{__source:{fileName:Gj,lineNumber:486,columnNumber:19}},s.createElement("input",{type:"checkbox",value:this.props.calendarFilter.showCompletedTasks,onChange:this.toggleCompleted,__source:{fileName:Gj,lineNumber:487,columnNumber:21}}),s.createElement("span",{__source:{fileName:Gj,lineNumber:492,columnNumber:21}},(0,ue.Z)("Show Completed Tasks"))))))))}}const Qj=cD(Wj((0,bi.Z)(Xj,$j)));var qj=n(62510),Jj=n(9740),eY=n(97891),tY=n(76148),nY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryMoreInfo.jsx";function sY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class iY extends s.PureComponent{constructor(...e){super(...e),sY(this,"state",{externalMutations:void 0}),sY(this,"getDiff",(()=>{const{data:e}=this.props;if(e.length>2){const t=[e[0].id,e[e.length-1].id];return g()(t[0]).diff(g()(t[1]),"days")}return e.length})),sY(this,"formatTick",((e,t)=>{let n;switch(!0){case t<6:n="H:00",0===g()(e).hour()&&(n="ddd D");break;case t<20:n="H:00",0===g()(e).hour()&&(n="ddd D"),1===g()(e).date()&&(n="MMM",0===g()(e).month()&&(n="MMM YYYY"));break;case t<80:n="ddd D",1===g()(e).date()&&(n="MMM D",0===g()(e).month()&&(n="MMM YYYY"));break;default:n="MMM",0===g()(e).month()&&(n="YYYY")}return g()(e).format(n)})),sY(this,"formatTotalLabel",(({datum:e},t)=>{if(!e)return null;const n=this.formatTick(new Date(Math.round(e.unixDate)),t);return e.visits<1?n:(0,ue.Z)("$1\nViews: $2\nPages: $3",[n,Math.round(e.visits),Math.round(e.pages)])})),sY(this,"formatPieLabel",((e,t)=>{const n=e.slice.data;if(Number.isInteger(n.count)){const e=(0,iN.Z)(n.count/t*100,0);if(e>0)return`${n.print}\n${e} %`}})),sY(this,"removeMutation",(()=>{this.setState({externalMutations:void 0})})),sY(this,"toggleLabel",((e,t)=>{this.setState({externalMutations:[{target:"labels",eventKey:"all",mutation:()=>({active:!1}),callback:()=>this.removeMutation()},{target:"data",eventKey:"all",mutation:()=>({style:void 0}),callback:()=>this.removeMutation()},{target:"labels",eventKey:String(e),mutation:()=>({active:t}),callback:()=>this.removeMutation()},{target:"data",eventKey:String(e),mutation:()=>t?{style:{opacity:.5,fill:this.props.groupedHistoryData.linkTypeColors[e],stroke:"var(--colorBg)",strokeWidth:2}}:{style:void 0},callback:()=>this.removeMutation()}]})}))}render(){const{title:e,data:t,max:n,scaleY:i,groupedHistoryData:r,chartData:a}=this.props;if(0===Object.keys(r).length)return null;const o=0===t.length,{linkTypeColors:l,linkTypeTotal:c,linkTypes:u,combinedTopPages:m,pageCount:d,pageViewsCount:h,siteCount:p}=r,b=this.getDiff(),N=b<2,f={y:N?[0,n/2]:[0,n]},_={x:"time",y:i},v={duration:400,onLoad:{duration:0}},E=[l[0],l[3]],C="linear";return s.createElement("div",{className:"manager-editor more-info",__source:{fileName:nY,lineNumber:199,columnNumber:7}},s.createElement("div",{className:"header",__source:{fileName:nY,lineNumber:200,columnNumber:9}},s.createElement("h1",{__source:{fileName:nY,lineNumber:201,columnNumber:11}},e)),s.createElement("div",{className:"moreinfo-stats",__source:{fileName:nY,lineNumber:204,columnNumber:9}},s.createElement("h2",{__source:{fileName:nY,lineNumber:205,columnNumber:11}},(0,ue.Z)("Browsing Activity")),s.createElement("div",{className:"moreinfo-activity",__source:{fileName:nY,lineNumber:206,columnNumber:11}},!1===o&&s.createElement(Ib.Z,{containerComponent:s.createElement(qj.Z,{mouseFollowTooltips:!0,voronoiDimension:"x",__source:{fileName:nY,lineNumber:210,columnNumber:17}}),width:245,height:200,padding:{top:6,right:12,bottom:40,left:30},domain:f,scale:_,__source:{fileName:nY,lineNumber:208,columnNumber:13}},s.createElement(Zb.Z,{tickCount:N?13:void 0,tickFormat:e=>this.formatTick(e,b),standalone:!1,style:{axis:{stroke:"var(--colorFg)"},axisLabel:{fontSize:12,padding:20},grid:{stroke:"var(--colorFgAlpha)"},tickLabels:{angle:-45,textAnchor:"end",fontSize:11,padding:5,fontWeight:600,fontFamily:"inherit"}},__source:{fileName:nY,lineNumber:221,columnNumber:15}}),s.createElement(Zb.Z,{dependentAxis:!0,standalone:!1,style:{axis:{stroke:"var(--colorFg)"},axisLabel:{fontSize:12,padding:20},grid:{stroke:"var(--colorFgAlpha)"},ticks:{stroke:"var(--colorFg)"},tickLabels:{fontSize:11,padding:5,fontFamily:"inherit"}},__source:{fileName:nY,lineNumber:235,columnNumber:15}}),s.createElement(Jj.Z,{animate:v,standalone:!0,responsive:!1,colorScale:E,style:{labels:{fontSize:13,padding:0,fontFamily:"inherit"}},labels:e=>this.formatTotalLabel(e,b),labelComponent:s.createElement(eY.Z,{constrainToVisibleArea:!0,pointerLength:0,flyoutStyle:{stroke:"var(--colorBorder)",fill:"var(--colorBg)"},__source:{fileName:nY,lineNumber:258,columnNumber:19}}),__source:{fileName:nY,lineNumber:248,columnNumber:15}},s.createElement(Pb.Z,{data:a,interpolation:C,standalone:!1,x:e=>g()(e.unixDate).toDate(),y:"pages",__source:{fileName:nY,lineNumber:268,columnNumber:17}}),s.createElement(Pb.Z,{data:a,interpolation:C,standalone:!1,x:e=>g()(e.unixDate).toDate(),y:e=>e.visits-e.pages,__source:{fileName:nY,lineNumber:276,columnNumber:17}})))),s.createElement("ul",{className:"moreinfo-activity-labels",__source:{fileName:nY,lineNumber:289,columnNumber:11}},s.createElement("li",{className:"visits",__source:{fileName:nY,lineNumber:290,columnNumber:13}},s.createElement("span",{style:{backgroundColor:E[1]},__source:{fileName:nY,lineNumber:291,columnNumber:15}}),(0,ue.Z)("Page Views: $1",[h])),s.createElement("li",{className:"pages",__source:{fileName:nY,lineNumber:294,columnNumber:13}},s.createElement("span",{style:{backgroundColor:E[0]},__source:{fileName:nY,lineNumber:295,columnNumber:15}}),(0,ue.Z)("Pages: $1",[d]))),s.createElement("h2",{__source:{fileName:nY,lineNumber:300,columnNumber:11}},(0,ue.Z)("Link Transition Type")),s.createElement("div",{className:"moreinfo-link-types",__source:{fileName:nY,lineNumber:301,columnNumber:11}},!1===o&&s.createElement(tY.Z,{externalEventMutations:this.state.externalMutations,data:u,x:"type",y:"count",width:160,height:160,innerRadius:40,padding:10,colorScale:l,animate:v,style:{labels:{fontSize:13,padding:0,fontFamily:"inherit"}},labels:e=>this.formatPieLabel(e,c),labelComponent:s.createElement(eY.Z,{center:{x:80,y:80},pointerWidth:0,pointerLength:0,cornerRadius:0,flyoutStyle:{stroke:"none",fill:"transparent"},__source:{fileName:nY,lineNumber:319,columnNumber:19}}),events:[{target:"data",eventHandlers:{onMouseEnter:()=>[{target:"labels",mutation:()=>({active:!0})},{target:"data",mutation:e=>({style:{...e.style,fill:l[e.index],opacity:.5,stroke:"var(--colorBg)",strokeWidth:2}})}],onMouseOut:()=>[{target:"labels",mutation:()=>({active:!1})},{target:"data",mutation:()=>({style:void 0})}]}}],__source:{fileName:nY,lineNumber:303,columnNumber:15}}),!1===o&&s.createElement("ul",{className:"moreinfo-link-labels",__source:{fileName:nY,lineNumber:359,columnNumber:15}},u.map(((e,t)=>s.createElement("li",{key:e.type,onMouseEnter:()=>this.toggleLabel(t,!0),onMouseOut:()=>this.toggleLabel(t,!1),title:e.print.length>7?e.print:null,className:0===e.count?"disabled":null,__source:{fileName:nY,lineNumber:362,columnNumber:21}},s.createElement("span",{style:{backgroundColor:e.color},__source:{fileName:nY,lineNumber:368,columnNumber:23}}),e.print))))),s.createElement("h2",{__source:{fileName:nY,lineNumber:377,columnNumber:11}},(0,ue.Z)("Top Domains of $1 Total",[p])),m.length>0&&s.createElement("ul",{className:"moreinfo-top-domains",__source:{fileName:nY,lineNumber:379,columnNumber:13}},m.map(((e,t)=>{if(t<5)return s.createElement("li",{key:"top_domain_"+t,onClick:this.props.onOpenDomain.bind(this,e.url),onContextMenu:this.props.onDomainContextMenu.bind(this,e.url),__source:{fileName:nY,lineNumber:383,columnNumber:21}},s.createElement(Ls,{url:e.url,loadType:"page",__source:{fileName:nY,lineNumber:387,columnNumber:23}}),s.createElement("span",{className:"title link",__source:{fileName:nY,lineNumber:388,columnNumber:23}},e.url?e.url:"localhost"),s.createElement("span",{className:"item-count",__source:{fileName:nY,lineNumber:391,columnNumber:23}},e.visitCount))})))))}}const rY=iY,aY=function(e){if(""===e||void 0===e)return new N.K;const t=["title","url"],n={},s=e.match(/(\S+:\s*'.*')|(\S+:\s*".*")|(\S+:\s*\S+)|(\S+)/g);if(null===s)return new N.K;let i="";for(let e=0;e<s.length;e++){const r=s[e].trim();if(r.length>0){let e=!1;for(let s=0;s<t.length;s++){const a=r.toLowerCase().indexOf(t[s]+":"),o=t[s].length+1;a>-1&&(e=!0,void 0===n[t[s]]?(i=t[s],n[t[s]]=r.slice(a+o).trim()):n[t[s]]+=" "+r.slice(a+o).trim())}e||(i?n[i]=n[i]+" "+r:void 0===n.query?n.query=r:n.query+=" "+r)}}return new N.K({title:n.title||"",url:n.url||"",query:n.query||""})};var oY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistorySearch.jsx";function lY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class cY extends s.Component{constructor(...e){super(...e),lY(this,"search",(e=>{this.props.search(this.props.historyFilter.merge(e))})),lY(this,"focusField",(()=>{this.refs.search.focus()})),lY(this,"onSearchChange",(e=>{this.updateFilter(e.target.value)})),lY(this,"updateFilter",(e=>{const t=aY(e.trim()),n={text:e,parsedFilter:t};this.search(n)})),lY(this,"onStartTimeChange",(e=>{const t=g()(e.target.value).startOf("day");t.isValid()&&this.search({startTime:t})})),lY(this,"onEndTimeChange",(e=>{const t=g()(e.target.value).endOf("day");this.search({endTime:t})})),lY(this,"onSelectOption",(()=>{const e=u.Z.getTimeByRange({rangePicker:this.refs.datePicker.value},this.props.minDate.startOf("day"));this.search(e)})),lY(this,"convertDate",(e=>(0,B.SI)(g()(e))))}render(){const e=this.props.historyFilter,t=this.convertDate(new Date);return s.createElement(s.Fragment,null,s.createElement("input",{ref:"search",type:"search",tabIndex:"0",style:{flexShrink:2},value:e.text,onChange:this.onSearchChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:(0,ue.Z)("verb","Search"),__source:{fileName:oY,lineNumber:71,columnNumber:7}}),this.props.showPicker&&s.createElement("select",{ref:"datePicker",style:{flexShrink:2},value:this.props.historyFilter.rangePicker,onChange:this.onSelectOption,__source:{fileName:oY,lineNumber:83,columnNumber:9}},s.createElement("option",{value:"today",__source:{fileName:oY,lineNumber:88,columnNumber:11}},(0,ue.Z)("Today")),s.createElement("option",{value:"yesterday",__source:{fileName:oY,lineNumber:89,columnNumber:11}},(0,ue.Z)("Yesterday")),s.createElement("option",{value:"7",__source:{fileName:oY,lineNumber:90,columnNumber:11}},(0,ue.Z)("Last 7 Days")),s.createElement("option",{value:"30",__source:{fileName:oY,lineNumber:91,columnNumber:11}},(0,ue.Z)("Last 30 Days")),s.createElement("option",{value:"date_range",__source:{fileName:oY,lineNumber:92,columnNumber:11}},(0,ue.Z)("Date Range...")),s.createElement("option",{value:"all",__source:{fileName:oY,lineNumber:93,columnNumber:11}},(0,ue.Z)("All History"))),this.props.showPicker&&"date_range"===this.props.historyFilter.rangePicker&&s.createElement("div",{className:"date-range",__source:{fileName:oY,lineNumber:99,columnNumber:9}},s.createElement(yT,{title:(0,ue.Z)("Start Date"),max:t,value:this.convertDate(e.startTime),onChange:this.onStartTimeChange,__source:{fileName:oY,lineNumber:100,columnNumber:11}}),s.createElement(yT,{title:(0,ue.Z)("End Date"),max:t,value:this.convertDate(e.endTime),onChange:this.onEndTimeChange,__source:{fileName:oY,lineNumber:105,columnNumber:11}})))}}const uY=cY;function mY(){return mY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mY.apply(this,arguments)}function dY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hY=function(e){return class extends s.Component{constructor(e){super(e),dY(this,"_onStoreChange",((e,t)=>{if(t===this.id||void 0===t)if("filterChange"===e){const e=u.Z.getFilter(this.id);this.setState({historyFilter:e})}else"searchResultsReady"===e&&this.setState(this._getSearchStateById(this.id))})),dY(this,"_getSearchStateById",(e=>{const t=u.Z.getHistorySearchResults(e);return{historyItems:t.items,historyFilter:t.filter,historyStatistics:u.Z.getStatistics(e),oldestHistoryDate:t.oldestHistoryDate}})),this.id=e.pageId||u.Z.getPanelResourceKey(),this.state=this._getSearchStateById(this.id)}UNSAFE_componentWillMount(){u.Z.addChangeListener(this._onStoreChange)}componentWillUnmount(){u.Z.removeChangeListener(this._onStoreChange)}render(){return s.createElement(e,mY({},this.props,this.state,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryStoreSubscription.jsx",lineNumber:71,columnNumber:14}}))}}};var pY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryFolder.jsx";class gY extends s.Component{constructor(...e){var t,n,s;super(...e),s=(e,t)=>{e.preventDefault(),e.altKey?this.props.historyItem.isExpanded?this.props.collapseAll():this.props.expandAll():this.props.toggle(t)},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const e=this.props.historyItem,t=e.children.reduce(((e,t)=>e+t.visitCount),0),n=B.ZP.getWeekdayFormat("LL"),i=g()(e.visitTime).format(n);return s.createElement("label",{"data-parent":e.id,onClick:this.props.fullView?t=>this.handleClick(t,e.id):null,__source:{fileName:pY,lineNumber:44,columnNumber:7}},!this.props.fullView&&s.createElement("span",{className:"expand-icon",onMouseDown:Rx.Z,onMouseUp:t=>this.handleClick(t,e.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:pY,lineNumber:47,columnNumber:11}}),s.createElement("span",{className:"url",__source:{fileName:pY,lineNumber:52,columnNumber:9}},i),!0===this.props.showBadge&&s.createElement("span",{className:"item-count",__source:{fileName:pY,lineNumber:56,columnNumber:11}},t))}}const bY=gY;var NY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryItem.jsx";function fY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _Y extends s.Component{constructor(...e){super(...e),fY(this,"onDragStart",(e=>{const t=this.props.historyItem;var n=document.createElement("img");n.srcset="chrome://favicon/size/16@1x/"+t.url+" 1x,chrome://favicon/size/16@2x/"+t.url+" 2x",e.dataTransfer.setDragImage(n,n.width-n.width/3,n.height-n.height/3),n.remove(),Ws(e,t.url,t.title,this.props.isPrivateWindow)})),fY(this,"handleMouseEnter",(e=>{X.Z.setStatus(e)})),fY(this,"handleMouseLeave",(()=>{X.Z.clearStatus()}))}render(){const e=this.props.historyItem,t=g()(e.visitTime),n=e.url.split("\\").pop().split("/").pop()||e.url,i=B.ZP.getWeekdayFormat("LL");return this.props.fullView?this.props.columns?s.createElement(s.Fragment,null,this.props.columns.map((r=>{switch(r.id){case"visitTime":return s.createElement("label",{key:r.id,className:"date",title:t.format(i),draggable:"true",onDragStart:this.onDragStart,__source:{fileName:NY,lineNumber:59,columnNumber:21}},s.createElement("span",{__source:{fileName:NY,lineNumber:65,columnNumber:23}},t.format("LTS")));case"title":return s.createElement("label",{key:r.id,className:"title",title:e.title?e.title:n,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:NY,lineNumber:70,columnNumber:21}},s.createElement(Ls,{url:e.url,loadType:"page",__source:{fileName:NY,lineNumber:76,columnNumber:23}}),s.createElement("span",{__source:{fileName:NY,lineNumber:77,columnNumber:23}},e.title?e.title:n));case"address":return s.createElement("label",{key:r.id,className:"url",title:e.url,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:NY,lineNumber:82,columnNumber:21}},e.isBookmarked&&s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:NY,lineNumber:89,columnNumber:25}},s.createElement("path",{d:"M4.5,13.5v-12h7v12L8,10.7L4.5,13.5z",__source:{fileName:NY,lineNumber:91,columnNumber:27}})),s.createElement("span",{__source:{fileName:NY,lineNumber:94,columnNumber:23}},e.url));case"visitCount":return s.createElement("label",{key:r.id,className:"visits",draggable:"true",onDragStart:this.onDragStart,__source:{fileName:NY,lineNumber:99,columnNumber:21}},e.visitCount>1&&s.createElement("span",{className:"item-count",__source:{fileName:NY,lineNumber:105,columnNumber:25}},e.visitCount));default:console.warn("Unknown sorting field:",r.id)}}))):null:s.createElement("label",{title:t.format("LTS")+"\n"+t.format(i)+"\n• "+(e.title?(0,ue.Z)("Title: $1",[e.title])+"\n• ":"")+(0,ue.Z)("Address: $1",[e.url]),onMouseEnter:this.handleMouseEnter.bind(this,e.url),onMouseLeave:this.handleMouseLeave,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:NY,lineNumber:121,columnNumber:9}},s.createElement(Ls,{url:e.url,loadType:"page",__source:{fileName:NY,lineNumber:130,columnNumber:11}}),s.createElement("span",{className:"title",__source:{fileName:NY,lineNumber:131,columnNumber:11}},s.createElement("span",{className:"time",__source:{fileName:NY,lineNumber:132,columnNumber:13}},t.format("LT")),e.title?e.title:e.url),e.visitCount>1&&s.createElement("span",{className:"item-count",__source:{fileName:NY,lineNumber:138,columnNumber:13}},e.visitCount))}}const vY=_Y;var EY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryTree.jsx";function CY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wY(e,t){A.ZP.get(P.kBookmarksConfirmOpening)&&e.length>=A.ZP.get(P.kBookmarksConfirmOpeningThreshold)?se.Z.showConfirmOpenBookmarkDialog({urls:e,openOptions:{inCurrent:t.inCurrent,inNewWindow:t.inNewWindow,inBackground:t.inBackground,incognito:t.incognito}}):$.Z.openUrls((0,Ay.Z)(e),t)}class yY extends s.PureComponent{constructor(...e){super(...e),CY(this,"refTreeList",s.createRef()),CY(this,"_isPrivateWindow",W.ZP.isIncognito(this.context.vivaldiWindowId)),CY(this,"mapObject",((e,t)=>Object.keys(e).map((n=>t(n,e[n]))))),CY(this,"state",{showBadge:A.ZP.get(P.kPanelsShowFolderBadge)}),CY(this,"_onBadgeChanged",((e,t)=>{this.setState({showBadge:Boolean(t)})})),CY(this,"hasChildren",(e=>!!e.children&&e.children.length>0)),CY(this,"isFolder",(e=>!!e&&!!e.children)),CY(this,"unSelectAll",(()=>{this.refTreeList.current?.unSelectAll()})),CY(this,"getSelectedItems",(()=>{const e=this.refTreeList.current?.getAllSelectedItems().map((e=>e.id));return this.getItemsByIds(e,!0)})),CY(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),CY(this,"getItemById",(e=>{const t=function(n){for(let s=0;s<n.length;s++){let i=n[s];if(i.id===e)return i;if(i.children&&(i=t(i.children),i))return i}};return t(this.props.nodes)})),CY(this,"getItemsByIds",((e,t)=>{const n=[];return e.forEach((e=>{const s=this.getItemById(e);s&&(s.children&&t?Array.prototype.push.apply(n,s.children):n.push(s))})),n})),CY(this,"openSelected",(()=>{wY(this.getSelectedItems().map((({url:e})=>e)),{inCurrent:!0,inBackground:!1})})),CY(this,"openSelectedInNewTab",(e=>{wY(this.getSelectedItems().map((({url:e})=>e)),{inCurrent:!1,inBackground:e||A.ZP.get(P.kTabsOpenNewInBackground)})})),CY(this,"openSelectedInNewWindow",(e=>{wY(this.getSelectedItems().map((({url:e})=>e)),{inNewWindow:!0,incognito:e})})),CY(this,"copy",((e,t)=>{const n=this.getItemsByIds(t,!0).map((e=>e.url));e.clipboardData.setData("text/plain",n.join("\n")),e.clipboardData.setData("text/uri-list",n),e.preventDefault()})),CY(this,"delete",(e=>{const t=[];return this.getItemsByIds(e,this.props.historyFilter&&this.props.historyFilter.text.length>0).forEach((e=>{this.isFolder(e)?t.push({isFolder:!0,at:g()(e.id)}):t.push({isFolder:!1,url:e.url,at:e.visitTime})})),w.deleteHistoryPromise(t)})),CY(this,"_saveBookmarks",(e=>{const t=this.getItemsByIds(e,!0).map((e=>({url:e.url,title:e.title})));i.Z.createBookmarks(t,tn.ZP.getRootNode().id)})),CY(this,"handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),CY(this,"expandAll",(()=>{this.refTreeList.current?.expandAll()})),CY(this,"collapseAll",(()=>{this.refTreeList.current?.collapseAll()})),CY(this,"getMenuCapability",(async(e,t,n)=>{const s={address:n?n.address:""};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this.openSelectedInNewTab(!1),visible:Boolean(n),...t(e,s)};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this.openSelectedInNewTab(!0),visible:!A.ZP.get(P.kTabsOpenNewInBackground)&&Boolean(n),...t(e,s)};case"CONTEXT_OPEN_IN_TAB":return{handler:this.openSelected,visible:Boolean(n),...t(e,s)};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>this.openSelectedInNewWindow(!1),visible:Boolean(n),...t(e,s)};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>this.openSelectedInNewWindow(!0),visible:Boolean(n),...t(e,s)};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":{const s=this.getSelectedItems().map((({url:e})=>e)),i=await Us.getMenu(!0,s);return{visible:Boolean(n)&&i.length>0,items:i,...t(e,{})}}case"CONTEXT_FILTER_BY":return{handler:()=>this.props.onSearchDomain(n.address),visible:Boolean(n)&&!this.isFolder(n),...t(e,s)};default:return{...t(e,s)}}})),CY(this,"getMenuVisibility",((e,t)=>{if(t)switch(e.action){case"CONTEXT_COPY":case"CONTEXT_SAVE":case"CONTEXT_DELETE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}else switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}})),CY(this,"onContextMenu",(e=>{this.refTreeList.current?.onContextMenu(e)})),CY(this,"onItemMouseDown",((e,t)=>{t.button===Nn.kCenter&&(t.preventDefault(),t.stopPropagation())})),CY(this,"onItemMouseUp",((e,t)=>{t.button===Nn.kCenter&&(this.openSelectedInNewTab(!0),t.preventDefault(),t.stopPropagation())})),CY(this,"onItemDoubleClick",(e=>{e.button!==Nn.kCenter&&this.onItemsActivated(e,this.getSelectedItems())})),CY(this,"onItemsActivated",((e,t)=>{const n=(0,ai.Z)(e);wY(this.getItemsByIds(t.map((e=>e.id)),!0).map((({url:e})=>e)),{...n})})),CY(this,"isValidForClipboard",(()=>!0)),CY(this,"validateForDeletion",(e=>e)),CY(this,"getRowComponentProps",(e=>({...e,columns:this.props.columns,showBadge:this.state.showBadge}))),CY(this,"rowComponent",(e=>{const{columns:t,node:n}=e,i=[];return this.isFolder(n)?i.push(s.createElement(bY,{key:"history_tree_folder_"+n.id+"_"+n.visitTime,historyItem:n,toggle:this.handleExpandClick,expandAll:this.expandAll,collapseAll:this.collapseAll,showBadge:e.showBadge,fullView:this.props.fullView,__source:{fileName:EY,lineNumber:371,columnNumber:9}})):i.push(s.createElement(vY,{columns:t,key:"history_tree_item_"+n.id+"_"+n.visitTime,historyItem:n,isPrivateWindow:this._isPrivateWindow,fullView:this.props.fullView,__source:{fileName:EY,lineNumber:382,columnNumber:9}})),i}))}componentDidMount(){A.ZP.addListener(P.kPanelsShowFolderBadge,this._onBadgeChanged)}componentWillUnmount(){A.ZP.removeListener(P.kPanelsShowFolderBadge,this._onBadgeChanged)}render(){if(!this.props.nodes)return null;const e={name:"historylist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement(Sg,{settings:this.props.inManager?"HISTORY_MANAGER":"HISTORY_PANEL",ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,columns:this.props.columns,defaultFolderExpansion:"always",hasChildren:this.hasChildren,isFolder:this.isFolder,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onItemsActivated,onCopy:this.copy,onSave:this._saveBookmarks,menu:e,delete:this.delete,disableSelectAfterDelete:!1,enableDragAndDrop:!1,isValidForClipboard:this.isValidForClipboard,validateForDeletion:this.validateForDeletion,__source:{fileName:EY,lineNumber:404,columnNumber:7}})}}CY(yY,"contextType",Vs.Z);const SY=yY;var TY=n(71649);const kY=function(e,t,n){if(!e||0===e.length)return{combinedTopPages:[],linkTypes:[],linkTypeColors:[],linkTypeTotal:0,pageCount:0,pageViewsCount:0,siteCount:0};const s={},i={},r=Z.Z.getState().windowThemes.get(n)?.colorHighlightBg||no.Z.getDefaultTheme().colorHighlightBg,a=to()(r).get("hsl.h"),o=to()(r).get("hsl.s"),l=to().scale([r,to()(r).set("hsl.h",a+50).desaturate(o),to()(r).set("hsl.h",a+130).desaturate(o),to()(r).set("hsl.h",a+180).desaturate(o),to()(r).set("hsl.h",a+230).desaturate(o),to()(r).set("hsl.h",a-50).desaturate(o)]).mode("lab").colors(6);let c=[{type:"auto_toplevel",count:0,color:l[0],print:(0,ue.Z)("linktype","Direct")},{type:"typed",count:0,color:l[1],print:(0,ue.Z)("linktype","Typed")},{type:"link",count:0,color:l[2],print:(0,ue.Z)("linktype","Link")},{type:"reload",count:0,color:l[3],print:(0,ue.Z)("linktype","Reload")},{type:"form_submit",count:0,color:l[4],print:(0,ue.Z)("linktype","Form")},{type:"other",count:0,color:l[5],print:(0,ue.Z)("linktype","Other")}],u=[];e.forEach((e=>{u=u.concat(t[e.id]?t[e.id].mostVisited:[]),c=e.children.map((e=>e.transition_type)).reduce(((e,t)=>{const n=e.find((e=>e.type===t));if(n)n.count=n.count+1;else{const t=e.find((e=>"other"===e.type));t&&(t.count=t.count+1)}return e}),c)}));const m=c.map((e=>e.color)),d=c.reduce(((e,t)=>e+t.count),0);e.forEach((e=>{e.children.forEach((e=>{s[e.address]=s[e.address]?e.visitCount+s[e.address]||0:e.visitCount,i[e.url]=i[e.url]?e.visitCount+i[e.url]||0:e.visitCount}))}));const h=Object.keys(i).length,p=Object.keys(s).length,g=Object.values(i).reduce(((e,t)=>e+parseInt(t)),0);return{linkTypeColors:m,linkTypeTotal:d,combinedTopPages:Object.keys(s).map((e=>({url:e,visitCount:s[e]}))).sort(((e,t)=>t.visitCount-e.visitCount)),linkTypes:c,pageCount:h,pageViewsCount:g,siteCount:p}};var IY="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryManager.jsx";function AY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ZY=[P.kStartpageNavigation],PY=[{text:(0,ue.Z)("Date"),fullScreenTitle:(0,ue.Z)("Sort by visit time"),value:"visitTime",icon:cn.V_c,width:100,visible:!0},{text:(0,ue.Z)("Title"),fullScreenTitle:(0,ue.Z)("Sort by page title"),value:"title",width:300,visible:!0,key:!0},{text:(0,ue.Z)("Address"),fullScreenTitle:(0,ue.Z)("Sort by page address"),value:"address",icon:cn.iD7,width:300,visible:!0},{text:(0,ue.Z)("Views"),fullScreenTitle:(0,ue.Z)("Sort by number of page views"),value:"visitCount",icon:cn.boz,width:100,visible:!0}],DY=(0,QG.extendMoment)(g());class MY extends s.PureComponent{constructor(...e){super(...e),AY(this,"state",{columns:gg().history||bg(PY)}),AY(this,"_locale",{weekdays:B.ZP.getWeekdays("long"),weekdaysShort:B.ZP.getWeekdays("short"),monthsShort:B.ZP.getMonths("short"),weekStartsOn:DY.localeData().firstDayOfWeek()}),AY(this,"_selecting",!1),AY(this,"_selectionHighlight",!1),AY(this,"_anchorDate",DY()),AY(this,"_shortDayFormat",B.ZP.getWeekdayFormat(B.ZP.getShortDateFormat())),AY(this,"_searchHasFocus",!1),AY(this,"_tree",null),AY(this,"_saveStateByFilter",((e,t)=>{const n={displayMode:t.displayMode,startTime:t.startTime.valueOf(),endTime:t.endTime.valueOf(),dayPickerVisible:t.dayPickerVisible,moreInfoVisible:t.moreInfoVisible,monthEntriesVisible:t.monthEntriesVisible};$.Z.setHistoryManagerState(e,n),w.saveStateFromSearchQuery(e,t)})),AY(this,"_setRange",((e,t,n=null,s=!1)=>{const{historyFilter:i}=this.props,r=DY.range(DY(e).startOf("day"),DY(t).endOf("day")),a=i.merge({startTime:r.start,endTime:r.end,displayMode:n||i.displayMode,range:r});this._selectionHighlight=s,this.onSearch(a)})),AY(this,"_setDayPickRange",((e,t)=>{const{historyFilter:n}=this.props,s=DY.range(n.startTime,n.endTime),i=DY.range(DY(e).startOf("day"),DY(t).endOf("day"));if(DY(e).within(s)&&DY(t).within(s)){const e=n.merge({range:i});this.onSearch(e),this._selectionHighlight=!0}else if(i.overlaps(s)){const e=i.add(s);this._setRange(e.start,e.end,null,!1)}else this._setRange(DY(t).startOf(n.displayMode),DY(t).endOf(n.displayMode),null,!1)})),AY(this,"toggleDayPicker",(()=>{const e="dayPickerVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)})),AY(this,"toggleMoreInfo",(()=>{const e="moreInfoVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)})),AY(this,"_setView",(e=>{const t=e.target.value,n=this.props.historyFilter,s=n.merge({[t]:!n[t]});this.onSearch(s)})),AY(this,"onSortChange",((e,t)=>{const{historyFilter:n}=this.props,s=n.merge({sortOrder:e,sortField:t});this.onSearch(s)})),AY(this,"onUpdateRow",(e=>{this.setState({columns:e})})),AY(this,"onSaveRow",(()=>{pg(this.state.columns,"history")})),AY(this,"onSelectAll",(()=>{const e=DY(),t=this.props.oldestHistoryDate,n=this.props.historyFilter.merge({startTime:t.toDate(),endTime:e.endOf("day").toDate()});this.onSearch(n),this._setRange(t,e.endOf("day"),"range",!1)})),AY(this,"onIncludeUrlChange",(()=>{const e=!this.props.historyFilter.searchURL,t=this.props.historyFilter.merge({searchURL:e});this.onSearch(t)})),AY(this,"onClearBrowsingData",(()=>{se.Z.showClearBrowsingHistoryDialog({})})),AY(this,"onCalendarSelect",((e,t)=>{if(!0===this._selecting)return void(this._selecting=!1);const n=t?t.nativeEvent?t.nativeEvent.shiftKey:t.shiftKey:0,s=DY(e);if(n){const e=this.expandRange(s);this._setRange(e.start,e.end)}else DY(e).within(this.props.historyFilter.range)||(this._selectionHighlight=!0,this._anchorDate=s,this._setRange(s,s,null,!0))})),AY(this,"expandRange",(e=>{const t=this.props.historyFilter.range,n=DY.range(e,e);return t.contains(n)?t:e.unix()>t.start.unix()?DY.range(t.start,n.end.endOf("day")):DY.range(n.start.startOf("day"),t.end)})),AY(this,"handleMouseDown",((e,t)=>{const n=t.nativeEvent?t.nativeEvent.button:t.button,s=(t.nativeEvent?t.nativeEvent.ctrlKey:t.ctrlKey,t.nativeEvent?t.nativeEvent.shiftKey:t.shiftKey);if(n&&0!==n)return;const i=DY(e);let r;s?(r=this.expandRange(i),this._setDayPickRange(r.start,r.end)):this._setDayPickRange(i,i),this._selecting=!0,this._anchorDate=DY(e)})),AY(this,"handleMouseUp",((e,t)=>{this._selecting&&this.props.historyFilter.range&&(this._selecting=!1)})),AY(this,"handleMouseEnter",((e,t)=>{if(!this._selecting||!this.props.historyFilter.range)return;const n=this.expandRange(DY(e));this._setDayPickRange(n.start,n.end)})),AY(this,"onSearch",(e=>{const t=this.props.pageId;if(t){const n=this.props.historyFilter.merge(e);this._saveStateByFilter(t,n),w.searchHistory(t,n)}})),AY(this,"onSearchDomain",(e=>{e=cC(e);const{historyFilter:t}=this.props,n=aY(e),s=t.merge({text:e,parsedFilter:n,searchURL:!0});this.onSearch(s)})),AY(this,"onOpenDomain",(e=>{$.Z.openURL((0,As.q9)(e))})),AY(this,"handleDisplayModeChange",((e="day")=>{if("range"===e)this._anchorDate=DY(),this._setRange(this.props.oldestHistoryDate,DY(),e,!1);else{const t=this._anchorDate||DY();this._setRange(DY(t).startOf(e),DY(t).endOf(e),e,!1)}})),AY(this,"restoreSelection",(()=>{this._selectionHighlight=!1;const{displayMode:e}=this.props.historyFilter;this.handleDisplayModeChange(e)})),AY(this,"viewCurrent",(()=>{const{displayMode:e}=this.props.historyFilter;this._setRange(DY().startOf(e),DY().endOf(e))})),AY(this,"viewPrevious",(e=>{const{startTime:t,displayMode:n}=this.props.historyFilter,s="range"===n?"day":n,i=DY(t).subtract(1,s).startOf(s),r=DY(i).endOf(s);this._setRange(i,r)})),AY(this,"viewNext",(()=>{const{startTime:e,displayMode:t}=this.props.historyFilter,n="range"===t?"day":t,s=DY(e).add(1,n).startOf(n),i=DY(s).endOf(n);this._setRange(s,i)})),AY(this,"getNumWeeksForMonth",((e,t)=>{let n=new Date(e,t-1,1).getDay()-this._locale.weekStartsOn;n<0&&(n+=7);const s=new Date(e,t,0).getDate();return Math.ceil((s+n)/7)})),AY(this,"getDomainMenuItems",(e=>[{handler:()=>this.onSearchDomain(e),...(0,Mn.Z)("Filter by “$1”",[e])},{handler:()=>this.onOpenDomain(e),...(0,Mn.Z)("Go to “$1”",[e])}])),AY(this,"onDomainContextMenu",((e,t)=>{(0,Hs.Z)(this.context.vivaldiWindowId,this.getDomainMenuItems(e))(t)})),AY(this,"getActivityLevel",((e,t,n)=>e>=t-t/10?"max":e>=n&&e<t-t/10?"high":e>=n/2&&e<n?"mid":e>0&&e<n/2?"low":"min")),AY(this,"renderMonthDay",((e,t,n,i,r)=>{r=DY(r);const{historyStatistics:a,historyFilter:o}=this.props,l=a[(0,B.SI)(r)];if(!l)return s.createElement("div",{className:r.within(o.range)?"selected":null,__source:{fileName:IY,lineNumber:492,columnNumber:9}},s.createElement("span",{className:"Cal__Day__day",__source:{fileName:IY,lineNumber:493,columnNumber:11}},r.date()));const c=a[(0,B.SI)(r)].visits||0,u=this.getActivityLevel(c,e,t),m=Math.max(Math.floor((n-72)/15),1);let d=[];o.text.length>0?d=l.mostVisited.map((e=>e.url)):(d=l.mostVisited.map((e=>cC(e.url))),d=(0,Ay.Z)(d));const h=d.map(((e,t)=>{if(t<m)return s.createElement("li",{title:e,key:r.unix()+"_"+t,onContextMenu:this.onDomainContextMenu.bind(this,e),__source:{fileName:IY,lineNumber:522,columnNumber:11}},e)}));return s.createElement("div",{className:r.within(o.range)?"selected":null,__source:{fileName:IY,lineNumber:532,columnNumber:7}},s.createElement("span",{className:"Cal__Day__day",__source:{fileName:IY,lineNumber:533,columnNumber:9}},r.date()),s.createElement("h4",{className:bn()({heat:!0,[`${u}`]:!0}),__source:{fileName:IY,lineNumber:534,columnNumber:9}},s.createElement("span",{className:"visits",__source:{fileName:IY,lineNumber:538,columnNumber:11}},s.createElement("strong",{__source:{fileName:IY,lineNumber:539,columnNumber:13}},l.visits),(0,ue.Z)("view","views",[l.visits])),s.createElement("span",{className:"pages",__source:{fileName:IY,lineNumber:542,columnNumber:11}},s.createElement("strong",{__source:{fileName:IY,lineNumber:543,columnNumber:13}},l.pages),(0,ue.Z)("page","pages",[l.pages]))),s.createElement("ul",{className:"top-links",__source:{fileName:IY,lineNumber:548,columnNumber:9}},h))})),AY(this,"renderCalWeek",(()=>{const{historyItems:e,historyFilter:t}=this.props,{range:n}=this.props.historyFilter;let i=Array.from(n.by("days"));if(DY(i[0]).day()!==this._locale.weekStartsOn||i.length<7){const e=DY(i[0]).startOf("week"),t=DY(i[0]).endOf("week");i=Array.from(DY.range(e,t).by("days"))}else i.length>7&&(i=i.slice(0,6));return s.createElement("div",{className:"week-container",__source:{fileName:IY,lineNumber:570,columnNumber:7}},i.map((i=>{const r=DY(i).within(n),a=e.find((e=>e.id===(0,B.SI)(i))),o=DY(i).within(DY.range(this.props.oldestHistoryDate,DY()));return s.createElement("div",{className:"week-day",key:"week_"+(0,B.SI)(i),__source:{fileName:IY,lineNumber:580,columnNumber:13}},s.createElement("header",{onClick:o?this._setDayPickRange.bind(this,i,i):null,className:bn()({selected:r,disabled:!o}),__source:{fileName:IY,lineNumber:581,columnNumber:15}},i.format(this._shortDayFormat)),s.createElement("div",{className:"tree",__source:{fileName:IY,lineNumber:590,columnNumber:15}},a&&s.createElement(SY,{key:"week_"+i.id,ref:e=>this._tree=e,fullView:!1,inManager:!0,nodes:a.children,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:IY,lineNumber:592,columnNumber:17}})))})))})),AY(this,"renderCalDay",((e,t,n)=>{n=DY(n);const{historyStatistics:i,historyFilter:r}=this.props,a=DY(this.props.oldestHistoryDate).within(r.range)&&DY().within(r.range);let o,l="min";return i[(0,B.SI)(n)]?(o=i[(0,B.SI)(n)].visits||0,l=this.getActivityLevel(o,e,t)):o=0,s.createElement("span",{title:(0,ue.Z)("$1 visit","$1 visits",[o]),className:bn()({heat:!0,selected:!a&&n.within(r.range),[`${l}`]:!0}),key:n.unix()+"_"+n,__source:{fileName:IY,lineNumber:626,columnNumber:7}})})),AY(this,"padStats",(e=>{const{historyStatistics:t,historyFilter:n,historyItems:s}=this.props;let i=e.start.clone(),r=e.end.clone();s.length===e.duration("days")&&(i=i.startOf(n.displayMode),r=r.endOf(n.displayMode));const a=DY.range(i,r),o=new Map;for(const[e,n]of Object.entries(t)){const t=DY(e,"YYYY-MM-DD");t.within(a)&&o.set(e,{hour:0,pages:n&&"number"==typeof n.pages?n.pages:0,visits:n&&"number"==typeof n.visits?n.visits:0,unixDate:t.valueOf()})}for(;i.diff(r)<=0;){const e=(0,B.SI)(i);o.has(e)||o.set(e,{hour:0,pages:0,visits:0,unixDate:i.valueOf()}),i.add(1,"d")}return[...o.values()].sort(((e,t)=>e.unixDate>t.unixDate?1:t.unixDate>e.unixDate?-1:0))}))}componentDidMount(){w.loadAll()}render(){const{historyFilter:e,historyStatistics:t}=this.props,n=e.range,i=this.props.historyItems.filter((e=>e.id>=(0,B.SI)(n.start)&&e.id<=(0,B.SI)(n.end)));let r=[];if(!i||"number"!=typeof this.props.maxHeight)return null;const a=e.text.length>1||e.moreInfoVisible?kY(i,t,this.context.vivaldiWindowId):{combinedTopPages:[],linkTypeColors:[],linkTypeTotal:0,linkTypes:[],pageCount:0,pageViewsCount:0,siteCount:0};e.moreInfoVisible&&(r=Object.keys(t).length>0&&1===i.length&&i[0].id&&t[i[0].id]?t[i[0].id].timeArr:this.padStats(n));const o=DY(e.startTime),l=this.getNumWeeksForMonth(o.year(),o.month()+1),c=(0,B.SI)(n.start)===(0,B.SI)(DY(this.props.oldestHistoryDate))&&(0,B.SI)(n.end)===(0,B.SI)(DY());let u,m,d,h=[],p="";switch(i.length>1&&(h=[DY(i[0].visitTime).format("l"),DY(i[i.length-1].visitTime).format("l")],p="visitTime"===e.sortField&&2===e.sortOrder?h[0]+" – "+h[1]:h[1]+" – "+h[0]),u="month"===e.displayMode?(0,ue.Z)("$1 $2",[DY(o).format("MMMM"),DY(o).format("YYYY")]):"week"===e.displayMode?(0,ue.Z)("Week $1, $2",[DY(o).week(),DY(o).year()]):i.length>1?p:DY(e.startTime).format("LL"),m=i.length>1?p:1===i.length?DY(i[0].visitTime).format("LL"):DY(e.startTime).format("LL"),e.displayMode){case"month":d=(0,ue.Z)("This Month");break;case"week":d=(0,ue.Z)("This Week");break;default:d=(0,ue.Z)("Today")}const g=DY(Object.keys(t).sort()[0]).startOf("month"),b=DY(),N=DY(this.props.oldestHistoryDate).isBefore(b.subtract(2,"m"))?DY(this.props.oldestHistoryDate):b.subtract(2,"m"),f=Object.keys(t).map((e=>t[e].visits)),_=Math.max(Math.max.apply(Math,f),10);f.sort(((e,t)=>e-t));const v=(f[Math.floor((f.length-1)/2)]+f[Math.ceil((f.length-1)/2)])/2,E="on"===this.props.prefValues[P.kStartpageNavigation]?51:0,C=e.text.length>1?40:0,w=this.props.maxHeight-(E+C+40+21),y=w/l;return s.createElement("div",{className:"history manager",__source:{fileName:IY,lineNumber:810,columnNumber:7}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:IY,lineNumber:811,columnNumber:9}},s.createElement(ko,{onClick:this.toggleDayPicker,tooltip:(0,ue.Z)("Day picker calendar"),isPressed:e.dayPickerVisible,image:cn.eVT,__source:{fileName:IY,lineNumber:812,columnNumber:11}}),s.createElement(uY,{ref:"searchField",search:this.onSearch,onFocus:()=>{this._searchHasFocus=!0},onBlur:()=>{this._searchHasFocus=!1},historyFilter:e,minDate:this.props.oldestHistoryDate,__source:{fileName:IY,lineNumber:819,columnNumber:11}}),s.createElement("h1",{onClick:this.restoreSelection,style:{marginLeft:"auto",marginRight:"auto",flexShrink:5},__source:{fileName:IY,lineNumber:827,columnNumber:11}},u),s.createElement(ko,{onClick:this.viewCurrent,title:d,__source:{fileName:IY,lineNumber:838,columnNumber:11}}),s.createElement("div",{className:"toolbar-group",__source:{fileName:IY,lineNumber:843,columnNumber:11}},s.createElement(ko,{onClick:this.viewPrevious.bind(this,g),tooltip:(0,ue.Z)("Previous"),className:"button-narrow",disabled:DY(this.props.oldestHistoryDate).within(n),image:cn.mgF.medium,__source:{fileName:IY,lineNumber:844,columnNumber:13}}),s.createElement(ko,{onClick:this.viewNext,className:"button-narrow",tooltip:(0,ue.Z)("Next"),disabled:b.within(n),image:cn.Zu.medium,__source:{fileName:IY,lineNumber:851,columnNumber:13}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:IY,lineNumber:860,columnNumber:11}},s.createElement(ko,{title:(0,ue.Z)("List"),isPressed:"range"===e.displayMode,onClick:()=>this.handleDisplayModeChange("range"),__source:{fileName:IY,lineNumber:861,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Day"),isPressed:"day"===e.displayMode,onClick:()=>this.handleDisplayModeChange("day"),__source:{fileName:IY,lineNumber:866,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Week"),isPressed:"week"===e.displayMode,onClick:()=>this.handleDisplayModeChange("week"),__source:{fileName:IY,lineNumber:871,columnNumber:13}}),s.createElement(ko,{title:(0,ue.Z)("Month"),isPressed:"month"===e.displayMode,onClick:()=>this.handleDisplayModeChange("month"),__source:{fileName:IY,lineNumber:876,columnNumber:13}})),s.createElement(ko,{onClick:this.onClearBrowsingData,tooltip:(0,ue.Z)("title","Clear browsing data"),image:cn.DwE.medium,__source:{fileName:IY,lineNumber:883,columnNumber:11}}),s.createElement(ko,{onClick:this.toggleMoreInfo,tooltip:e.moreInfoVisible?(0,ue.Z)("Hide info"):(0,ue.Z)("More info"),image:cn.GH$,isPressed:e.moreInfoVisible,__source:{fileName:IY,lineNumber:888,columnNumber:11}})),e.text.length>1&&s.createElement("div",{className:"toolbar toolbar-default toolbar-medium search-options",__source:{fileName:IY,lineNumber:898,columnNumber:11}},s.createElement(ko,{onClick:this.onSelectAll,title:(0,ue.Z)("Search All History"),disabled:c,__source:{fileName:IY,lineNumber:899,columnNumber:13}}),s.createElement("label",{__source:{fileName:IY,lineNumber:904,columnNumber:13}},s.createElement("input",{type:"checkbox",checked:e.searchURL,onChange:this.onIncludeUrlChange,__source:{fileName:IY,lineNumber:905,columnNumber:15}}),(0,ue.Z)("Include Address in Search Results")),s.createElement("div",{className:"filtered-entries",__source:{fileName:IY,lineNumber:910,columnNumber:13}},(0,ue.Z)("$1 Entry","$1 Entries",[a.pageViewsCount]))),s.createElement("div",{className:bn()({"history-view":!0,selecting:this._selectionHighlight}),__source:{fileName:IY,lineNumber:916,columnNumber:9}},e.dayPickerVisible&&s.createElement("div",{className:"manager-editor",__source:{fileName:IY,lineNumber:921,columnNumber:13}},s.createElement("div",{className:"timeline",onMouseLeave:this.handleMouseUp,__source:{fileName:IY,lineNumber:922,columnNumber:15}},s.createElement(TY.ZP,{Component:(0,TY.ig)((0,TY.Ee)(TY.f)),width:270,height:w,rowHeight:50,selected:n.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,min:g.toDate(),max:b.toDate(),minDate:N.toDate(),maxDate:b.toDate(),displayOptions:{showHeader:!1,showOverlay:!0,showTodayHelper:!1,overscanMonthCount:6},locale:this._locale,autoFocus:!1,tabIndex:0,renderMonthDay:this.renderCalDay.bind(this,_,v),__source:{fileName:IY,lineNumber:923,columnNumber:17}}))),s.createElement("div",{className:"manager-content history-calendar-container",__source:{fileName:IY,lineNumber:952,columnNumber:11}},"range"===e.displayMode&&s.createElement("div",{className:"view range",__source:{fileName:IY,lineNumber:955,columnNumber:13}},s.createElement(RN,{fields:PY,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:IY,lineNumber:956,columnNumber:15}}),i.length>0?s.createElement("div",{className:"history-tree",__source:{fileName:IY,lineNumber:970,columnNumber:19}},s.createElement(SY,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:i,onSearchDomain:this.onSearchDomain,historyFilter:e,__source:{fileName:IY,lineNumber:971,columnNumber:21}})):s.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:IY,lineNumber:980,columnNumber:19}},(0,ue.Z)("No browsing history data for selected period."))),"day"===e.displayMode&&s.createElement("div",{className:"view day",__source:{fileName:IY,lineNumber:988,columnNumber:13}},s.createElement(RN,{fields:PY,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:IY,lineNumber:989,columnNumber:15}}),i.length>0?s.createElement("div",{className:"history-tree",__source:{fileName:IY,lineNumber:1003,columnNumber:19}},s.createElement(SY,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:i,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:IY,lineNumber:1004,columnNumber:21}})):s.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:IY,lineNumber:1013,columnNumber:19}},(0,ue.Z)("No browsing history data for selected period."))),"week"===e.displayMode&&s.createElement("div",{className:"view week",__source:{fileName:IY,lineNumber:1021,columnNumber:13}},this.renderCalWeek()),"month"===e.displayMode&&s.createElement("div",{className:"view month",__source:{fileName:IY,lineNumber:1027,columnNumber:13}},s.createElement("div",{className:"month-calendar",__source:{fileName:IY,lineNumber:1028,columnNumber:15}},s.createElement(TY.ZP,{Component:(0,TY.ig)((0,TY.Ee)(TY.f)),width:"100%",height:w,rowHeight:y>100?y:100,selected:n.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,longWeekdays:!0,min:DY(o.startOf("month")).toDate(),max:DY(o.endOf("month")).toDate(),minDate:DY(o.startOf("month")).toDate(),maxDate:DY(o.endOf("month")).toDate(),displayOptions:{showHeader:!1,showOverlay:!1,showTodayHelper:!1,overscanMonthCount:0},locale:this._locale,autoFocus:!this._searchHasFocus,tabIndex:0,renderMonthDay:this.renderMonthDay.bind(this,_,v,y,Math.floor(this.props.maxWidth/7)),__source:{fileName:IY,lineNumber:1029,columnNumber:17}})),e.monthEntriesVisible&&s.createElement("div",{className:"month-links",__source:{fileName:IY,lineNumber:1059,columnNumber:17}},s.createElement("ul",{className:"Cal__Weekdays__root",__source:{fileName:IY,lineNumber:1060,columnNumber:19}},s.createElement("li",{className:"Cal__Weekdays__day",__source:{fileName:IY,lineNumber:1061,columnNumber:21}},(0,ue.Z)("Entries"))),s.createElement(SY,{ref:"tree",fullView:!1,inManager:!0,nodes:i,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:IY,lineNumber:1065,columnNumber:19}})),s.createElement("button",{className:"toggle-month-entries",title:e.monthEntriesVisible?(0,ue.Z)("Hide entries"):(0,ue.Z)("Show entries"),onClick:this._setView,value:"monthEntriesVisible",tabIndex:this.props.keyAccess,__source:{fileName:IY,lineNumber:1075,columnNumber:15}},e.monthEntriesVisible?">":"<"))),e.moreInfoVisible&&s.createElement(rY,{title:m,data:i,groupedHistoryData:a,onOpenDomain:this.onOpenDomain,chartData:r,max:_,scaleY:"sqrt",onDomainContextMenu:this.onDomainContextMenu,__source:{fileName:IY,lineNumber:1090,columnNumber:11}})))}}AY(MY,"contextType",Vs.Z);const OY=(0,bi.Z)(hY(MY),ZY);var xY=n(39412),LY=n(50564),RY=n(64271),BY=n.n(RY),FY=n(89927),UY=n(63549),VY=n(57570),HY=n.n(VY),WY=n(96936),zY=n.n(WY),GY=n(5460),KY=n.n(GY),jY=n(61519),YY=n.n(jY),$Y=n(56827),XY=n.n($Y),QY=n(6691),qY=n.n(QY),JY=n(74006),e$=n.n(JY),t$=n(4499),n$=n.n(t$),s$=n(91833),i$=n.n(s$),r$=n(45253),a$=n.n(r$),o$=n(27055),l$=n.n(o$),c$=n(85215),u$=n.n(c$),m$=n(29560),d$=n.n(m$),h$=n(37721),p$=n.n(h$),g$=n(96344),b$=n.n(g$),N$=n(82026),f$=n.n(N$),_$=n(23874),v$=n.n(_$),E$=n(93839),C$=n.n(E$),w$=n(61083),y$=n.n(w$),S$=n(66842),T$=n.n(S$),k$=n(42387),I$=n.n(k$),A$=n(61896),Z$=n.n(A$),P$=n(78529),D$=n.n(P$),M$=n(30308),O$=n.n(M$),x$=n(58473),L$=n.n(x$),R$=n(36632),B$=n.n(R$),F$=n(19514),U$=n.n(F$),V$=n(97181),H$=n.n(V$),W$=n(26306),z$=n.n(W$),G$=n(91533),K$=n.n(G$),j$=n(5298),Y$=n.n(j$),$$=n(42157),X$=n.n($$);const Q$={FORBID_TAGS:["style"],ALLOW_UNKNOWN_PROTOCOLS:!0};class q${constructor(){HY().registerLanguage("apache",zY()),HY().registerLanguage("applescript",KY()),HY().registerLanguage("bash",YY()),HY().registerLanguage("basic",XY()),HY().registerLanguage("coffeescript",qY()),HY().registerLanguage("cpp",e$()),HY().registerLanguage("css",n$()),HY().registerLanguage("diff",i$()),HY().registerLanguage("django",a$()),HY().registerLanguage("dockerfile",l$()),HY().registerLanguage("dos",u$()),HY().registerLanguage("ini",d$()),HY().registerLanguage("java",p$()),HY().registerLanguage("javascript",b$()),HY().registerLanguage("json",f$()),HY().registerLanguage("less",v$()),HY().registerLanguage("markdown",C$()),HY().registerLanguage("mathematica",y$()),HY().registerLanguage("matlab",T$()),HY().registerLanguage("nginx",I$()),HY().registerLanguage("objectivec",Z$()),HY().registerLanguage("perl",D$()),HY().registerLanguage("python",O$()),HY().registerLanguage("ruby",L$()),HY().registerLanguage("scss",B$()),HY().registerLanguage("shell",U$()),HY().registerLanguage("sql",H$()),HY().registerLanguage("swift",z$()),HY().registerLanguage("typescript",K$()),HY().registerLanguage("vim",Y$()),HY().registerLanguage("xml",X$()),this.remarkable=new FY._("commonmark",{html:!0,breaks:!0,typographer:!1,quotes:(0,ue.Z)("“”‘’"),highlight:(e,t)=>{if(t&&HY().getLanguage(t))try{return HY().highlight(t,e).value}catch(e){}return""}}),this.remarkable.use(BY()),this.remarkable.use(UY.N);const e=this.remarkable.inline.validateLink,t=/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,n=/^\s*blob:chrome-extension:\/\/[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i;this.remarkable.inline.validateLink=s=>e(s)||s.match(t)||s.match(n),this.remarkable.inline.ruler.enable(["del","mark","sub","sup"]),this.remarkable.block.ruler.enable(["table"])}getRawMarkup(e){return(0,wy.sanitize)(this.remarkable.render(e),Q$)}}var J$="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\PlainTextEditor.jsx";function eX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tX(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,nX(e,t,"set"),n),n}function nX(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var sX=new WeakMap;class iX extends s.Component{constructor(e,t){super(e),eX(this,"refWebview",s.createRef()),sX.set(this,{writable:!0,value:void 0}),eX(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||no.Z.getFallbackStyle();e!==this.state.windowStyle&&this.setState({windowStyle:e},this.setStyle)})),eX(this,"handleContentLoad",(()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(),this.props.onContentLoad&&this.props.onContentLoad())})),eX(this,"handleGoToURL",(e=>{e.preventDefault(),e.targetUrl.startsWith("#")||$.Z.openURL(e.targetUrl)})),eX(this,"getContentAsBodyParts",(()=>{const e=this.refWebview.current;return e?new Promise(((t,n)=>{e.executeScript({code:"document.body.innerText"},(e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"text",content:e[0],charset:"UTF-8"}]):n("PlainTextEdit.getContentAsBodyParts: Couldn't get content from Webview")}))})):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")})),eX(this,"onClick",(e=>{if("createLink"===e)this.props.handleLinkEvent(e);else this.execCommand(e,""),this.props.updateButtonState?.()})),eX(this,"onChange",((e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownState?.()})),eX(this,"setContent",(e=>{this.refWebview.current?.executeScript({code:`document.body.innerText = unescape('${escape(e)}');`},this.setStyle)})),eX(this,"setStyle",(()=>{this.refWebview.current?.executeScript({code:"document.head.innerHTML = `<style>"+no.Z.createStyleRoot(this.state.windowStyle)+"\n    html, body, iframe {\n      background-color: transparent;\n      padding: 0;\n      margin: 0;\n      font-family: sans-serif;\n      overflow: initial;\n    }\n    body[contenteditable=\"plaintext-only\"] {\n      font-family: monospace;\n    }\n    body {\n      --EditorPadding: 12px;\n      --MaxWidth: 700px;\n      margin-left: var(--EditorPadding);\n      padding-left: calc(calc(50% - calc(var(--MaxWidth) / 2) - var(--EditorPadding))) !important;\n      padding-right: calc(50% - calc(var(--MaxWidth) / 2)) !important;\n      padding-top: var(--EditorPadding);\n      padding-bottom: calc(var(--EditorPadding) * 3);\n      color: var(--colorFgIntense);\n      font-size: 100%;\n      cursor: text;\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    a:-webkit-any-link {\n      color: var(--colorHighlightBg);\n      cursor: pointer;\n    }\n  \n    html, body, iframe {\n      font-family: sans-serif;\n      font-size: 100%;\n    }\n    body {\n      overflow: overlay;\n    }\n    input[type=checkbox] {\n      appearance: none;\n      position: relative;\n      width: 16px;\n      height: 16px;\n      min-width: 16px;\n      min-height: 16px;\n      vertical-align: middle;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n      margin: unset;\n      border-width: 1px;\n      border-style: solid;\n      border-color: rgba(0,0,0,0.2);\n      background-color: var(--colorBgIntense);\n    }\n    input[type='checkbox']:disabled {\n      opacity: 1;\n      filter: grayscale(1);\n    }\n    input[type=checkbox]:before,\n    input[type=checkbox]:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: var(--colorHighlight);\n      transform-origin: 0 0;\n    }\n    input[type=checkbox]:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0.4);\n    }\n    input[type=checkbox]:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(1.2);\n    }\n    \n    .tooltip {\n      --TipWidth: 480px;\n      position: relative;\n    }\n    .tooltip .tooltip-text * {\n      user-select: none;\n    }\n    .tooltip-text input {\n      margin-left: 3px;\n      border: 1px solid var(--colorBorder);\n      border-radius: 2px;\n      font-size: small;\n      opacity: 0.8;\n      color: var(--colorFg);\n      background-color: var(--colorBg);\n    }\n    .tooltip-text input:active {\n      background-color: var(--colorBgDark);\n    }\n    .tooltip-text input:first-of-type {\n      margin-left: 12px;\n    }\n    .tooltip-text a {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--colorFg);\n    }\n    .tooltip .tooltip-text {\n      cursor: default;\n      position: absolute;\n      z-index: 1;\n      display: flex;\n      top: 100%;\n      left: -6px;\n      max-width: var(--TipWidth);\n      padding: 6px 6px 6px 12px;\n      color:var(--colorFg);\n      background-color: var(--colorBg);\n      border: 1px solid var(--colorBgDark);\n      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 3px 10px rgba(0, 0, 0, 0.3);\n      border-radius: 3px;\n    }\n  \n  ".replace(/\n|\r/g,"")+"</style>`;"})})),eX(this,"debouncedUpdateState",(0,za.Z)((()=>{this.props.updateButtonState?.(),this.props.updateDropdownState?.()}),100)),eX(this,"handleConsoleMessage",(e=>{const[t,n]=e.message.split(" ",2);switch(t){case"caretState":this.onCaretStateEvent(n);break;case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"createLink":this.props.handleLinkEvent(t,n);break;default:throw new Error(e.message)}})),eX(this,"setZoomLevel",(e=>{const t=this.refWebview.current;t&&(t.setZoomMode("per-view"),t.setZoom(e))})),this.state={startOffsetOnNewline:0,createLinkModalOpen:!1,caretState:{bold:!1,italic:!1,strikeThrough:!1,formatBlock:"p",insertOrderedList:!1,insertUnorderedList:!1},windowStyle:Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||no.Z.getFallbackStyle()},this.markdownFormatter=new q$}componentDidMount(){tX(this,sX,Z.Z.addListener(this.onThemeStoreChanged)),this.refWebview.current?.addEventListener("consolemessage",this.handleConsoleMessage),this.refWebview.current?.addEventListener("contentload",this.handleContentLoad),this.refWebview.current?.addEventListener("newwindow",this.handleGoToURL)}componentWillUnmount(){var e,t;(e=this,t=sX,function(e,t){return t.get?t.get.call(e):t.value}(e,nX(e,t,"get"))).remove(),this.refWebview.current?.removeEventListener("consolemessage",this.handleConsoleMessage),this.refWebview.current?.removeEventListener("contentload",this.handleContentLoad),this.refWebview.current?.removeEventListener("newwindow",this.handleGoToURL)}onCaretStateEvent(e){if(!e)return;let t;try{t=JSON.parse(e)}catch(e){return}this._updateCaretState(t)}_updateCaretState(e){this.setState((t=>({caretState:{...t.caretState,...e}})),(()=>this.props.updateButtonState?.()))}focus(){this.refWebview.current?.focus()}hasFocus(){const{document:e}=this.context;return Boolean(this.refWebview.current)&&this.refWebview.current===e.activeElement}execCommand(e,t){this.refWebview.current?.contentWindow?.postMessage({type:"BUTTON_CLICK",command:e,value:t},Q.oP)}render(){const{disabled:e,hidden:t}=this.props;return s.createElement("div",{className:"editor-html",__source:{fileName:J$,lineNumber:251,columnNumber:7}},s.createElement("webview",{className:"editor-webview",partition:"persist:markdowneditor",name:"markdowneditor",ref:this.refWebview,style:t||e?{display:"none"}:{},allowtransparency:"on",src:"components/notes/markdowneditor/markdowneditor.html",__source:{fileName:J$,lineNumber:252,columnNumber:9}}))}}eX(iX,"contextType",Vs.Z);var rX=n(24925),aX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\AddAttachmentButton.jsx";function oX({disabled:e,keyAccess:t,noteId:n,text:i,onOpenDialog:r}){const a=s.useRef(null);return s.createElement("label",{className:bn()("button-toolbar",{disabled:e}),title:(0,ue.Z)("Attach new file..."),tabIndex:t,__source:{fileName:aX,lineNumber:27,columnNumber:5}},s.createElement("input",{ref:a,type:"file",style:{display:"none"},accept:"image/*",disabled:e,onChange:e=>Li.Z.addImageFile(n,e.target.files[0]),__source:{fileName:aX,lineNumber:32,columnNumber:7}}),s.createElement("button",{disabled:e,tabIndex:t,onClick:function(){r?.(),a.current?.click()},__source:{fileName:aX,lineNumber:40,columnNumber:7}},s.createElement("div",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:cn.onv},__source:{fileName:aX,lineNumber:41,columnNumber:9}}),s.createElement("span",{__source:{fileName:aX,lineNumber:42,columnNumber:9}},i)))}var lX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentContainer.jsx";function cX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uX(e,t,n){const s={inCurrent:t,inBackground:n};$.Z.openURL(e.content,s)}function mX(e,t){const n={inNewWindow:!0,incognito:t};$.Z.openURL(e.content,n)}function dX(e,t){const n=(0,ai.Z)({ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey});$.Z.openURL(e.content,{...n})}class hX extends s.Component{constructor(...e){super(...e),cX(this,"onContextMenu",((e,t)=>{const n=[{items:[{handler:uX.bind(null,e,!0,!1),...(0,Mn.Z)("Current Tab")},{handler:uX.bind(null,e,!1,A.ZP.get(P.kTabsOpenNewInBackground)),...(0,Mn.Z)("open in","New Tab")},{handler:uX.bind(null,e,!1,!0),visible:!A.ZP.get(P.kTabsOpenNewInBackground),...(0,Mn.Z)("Background Tab")},z.Z.separatorItem,{handler:mX.bind(null,e,!1),...(0,Mn.Z)("open in","New Window")},{handler:mX.bind(null,e,!0),...(0,Mn.Z)("open in","Private Window")}],...(0,Mn.Z)("Open in")},z.Z.separatorItem,{handler:(e=>{e.checksum&&this.props.onInsertMarkdown(e.checksum)}).bind(null,e),...(0,Mn.Z)("Insert Markdown"),visible:!!this.props.onInsertMarkdown},{handler:this.props.onRemoveAttachment.bind(null,e),...(0,Mn.Z)("verb","Remove")}];(0,Hs.Z)(this.context.vivaldiWindowId,n)(t)})),cX(this,"onDragStart",((e,t)=>{if(!t.checksum||!this.props.noteId)return;const n=`${this.props.noteId}/${t.checksum}`;"html"===this.props.dragFormat?e.dataTransfer.setData("text/html",`<img src="chrome://vivaldi-data/notes-attachment/${n}" />`):e.dataTransfer.setData("text/plain",`attachment:${n}`)}))}render(){const{attachments:e}=this.props;return s.createElement("div",{className:"NotesAttachments",__source:{fileName:lX,lineNumber:128,columnNumber:7}},e.map(((e,t)=>s.createElement(uy,{key:e.checksum,item:e,onContextMenu:this.onContextMenu.bind(null,e),onOpen:dX.bind(null,e),onDelete:this.props.onRemoveAttachment.bind(null,e),onDragStart:this.onDragStart,draggable:!!this.props.onInsertMarkdown,__source:{fileName:lX,lineNumber:130,columnNumber:11}}))))}}cX(hX,"contextType",Vs.Z),cX(hX,"defaultProps",{onInsertMarkdown:()=>Promise.resolve(),dragFormat:"url"});const pX=hX;var gX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentPopup.jsx";function bX({noteId:e,attachments:t,onRemoveAttachment:n,onInsertMarkdown:i,dragFormat:r}){return s.createElement("div",{className:"NotesAttachmentPopup",__source:{fileName:gX,lineNumber:20,columnNumber:5}},s.createElement(pX,{noteId:e,attachments:t,onRemoveAttachment:n,onInsertMarkdown:i,dragFormat:r,__source:{fileName:gX,lineNumber:21,columnNumber:7}}),s.createElement(oX,{noteId:e,disabled:!1,keyAccess:-1,text:(0,ue.Z)("Add attachment"),__source:{fileName:gX,lineNumber:29,columnNumber:7}}))}var NX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerToolbar.jsx";function fX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _X=[[{command:"bold",text:(0,ue.Z)("Bold"),icon:cn.q7H},{command:"italic",text:(0,ue.Z)("Italic"),icon:cn.znb},{command:"strikeThrough",text:(0,ue.Z)("Strike through"),icon:cn._QD}],[{command:"insertOrderedList",text:(0,ue.Z)("Numbered list"),icon:cn.o_D},{command:"insertUnorderedList",text:(0,ue.Z)("Bullet list"),icon:cn.rr$},{command:"outdent",text:(0,ue.Z)("Remove indentation"),icon:cn.XKb},{command:"indent",text:(0,ue.Z)("Indent"),icon:cn.b2r}],[{command:"createLink",text:(0,ue.Z)("Create Link"),icon:cn.v2I}],[{command:"undo",text:(0,ue.Z)("win_linux","Undo"),icon:cn.LwO},{command:"redo",text:(0,ue.Z)("win_linux","Redo"),icon:cn.W9w}]];class vX extends s.Component{constructor(...e){super(...e),fX(this,"state",{anchor:"",buttonState:[],createLinkModalOpen:!1,formatBlock:"p",link:"",isAttachmentPopupOpen:!1}),fX(this,"updateButtonState",((e,t)=>{this.setState((n=>({buttonState:e||n.buttonState,formatBlock:t||n.formatBlock})))})),fX(this,"updateLinkState",(e=>{this.setState((t=>{if(t.anchor!==e)return{anchor:e}}))})),fX(this,"onCreateLink",(e=>{this.setState({createLinkModalOpen:!1}),this.props.onCreateLink(e)})),fX(this,"onCancelCreateLink",(()=>{this.setState({createLinkModalOpen:!1}),this.props.onCancelCreateLink()})),fX(this,"showCreateLinkModal",(()=>this.setState({createLinkModalOpen:!0}))),fX(this,"cacheFocus",(()=>{const{document:e}=this.context;e.activeElement?this._focusCache=e.activeElement:this._focusCache=void 0})),fX(this,"restoreFocus",(()=>{this._focusCache&&this._focusCache.focus()}))}render(){const{noteId:e}=this.props;let t=0;return s.createElement("div",{className:"NotesManager-Toolbar",__source:{fileName:NX,lineNumber:185,columnNumber:7}},this.state.createLinkModalOpen&&s.createElement(_S,{onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,link:this.state.link||this.state.anchor,__source:{fileName:NX,lineNumber:187,columnNumber:11}}),s.createElement("div",{className:"toolbar toolbar-default NotesManager-Buttons",__source:{fileName:NX,lineNumber:193,columnNumber:9}},s.createElement(ko,{tooltip:this.props.inFullView?(0,ue.Z)("Enter Full View"):(0,ue.Z)("Exit Full View"),onClick:this.props.toggleFullEditor,image:this.props.inFullView?cn.ADs.medium:cn.BB1.medium,__source:{fileName:NX,lineNumber:194,columnNumber:11}}),s.createElement("select",{onChange:e=>{this.props.onParagraphFormatChange("formatBlock",e),this.restoreFocus()},onMouseDown:this.cacheFocus,value:this.state.formatBlock,title:(0,ue.Z)("Paragraph Format"),tabIndex:"-1",disabled:this.props.disabled,__source:{fileName:NX,lineNumber:208,columnNumber:11}},s.createElement("option",{value:"h1",__source:{fileName:NX,lineNumber:219,columnNumber:13}},(0,ue.Z)("Heading 1")),s.createElement("option",{value:"h2",__source:{fileName:NX,lineNumber:220,columnNumber:13}},(0,ue.Z)("Heading 2")),s.createElement("option",{value:"h3",__source:{fileName:NX,lineNumber:221,columnNumber:13}},(0,ue.Z)("Heading 3")),s.createElement("option",{value:"h4",__source:{fileName:NX,lineNumber:222,columnNumber:13}},(0,ue.Z)("Heading 4")),s.createElement("option",{value:"p",__source:{fileName:NX,lineNumber:223,columnNumber:13}},(0,ue.Z)("Paragraph")),s.createElement("option",{value:"pre",__source:{fileName:NX,lineNumber:224,columnNumber:13}},(0,ue.Z)("Preformatted"))),_X.map(((e,n)=>{const i=e.map(((e,n)=>s.createElement(ko,{key:e.command,tooltip:e.text,image:e.icon,onClick:()=>this.props.onStylingButtonClicked(e.command),tabIndex:-1,disabled:this.props.disabled,isPressed:!0===this.state.buttonState[t+n],__source:{fileName:NX,lineNumber:229,columnNumber:15}})));return t+=i.length,s.createElement("div",{key:n,className:"toolbar-group",__source:{fileName:NX,lineNumber:241,columnNumber:15}},i)})),s.createElement(ko,{style:{marginLeft:"auto"},title:(0,ue.Z)("$1 Attachment","$1 Attachments",[this.props.attachments.length]),onClick:()=>this.setState((e=>({isAttachmentPopupOpen:!e.isAttachmentPopupOpen}))),isPopupVisible:this.state.isAttachmentPopupOpen,hidePopup:()=>this.setState({isAttachmentPopupOpen:!1}),popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:222,popupPosition:"below",image:cn.onv,disabled:this.props.disabled,__source:{fileName:NX,lineNumber:247,columnNumber:13}},e&&s.createElement(bX,{attachments:this.props.attachments,noteId:e,onRemoveAttachment:t=>{Li.Z.removeAttachment(e,t)},onInsertMarkdown:this.props.handleAttachmentMarkdown,dragFormat:this.props.visualMode?"html":"url",__source:{fileName:NX,lineNumber:268,columnNumber:17}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:NX,lineNumber:280,columnNumber:13}},s.createElement(ko,{title:(0,ue.Z)("Text"),onClick:()=>this.props.setVisualMode(!1),isPressed:!this.props.visualMode,disabled:this.props.disabled,__source:{fileName:NX,lineNumber:281,columnNumber:15}}),s.createElement(ko,{title:(0,ue.Z)("Visual"),onClick:()=>this.props.setVisualMode(!0),isPressed:this.props.visualMode,disabled:this.props.disabled,__source:{fileName:NX,lineNumber:287,columnNumber:15}}))),s.createElement(VC,{isActive:this.props.isActive,pageId:this.props.pageId,onFindInPage:(e,t)=>bm.Z.findInPage(this.props.pageId,e,t),onFindNextInPage:(e,t,n)=>bm.Z.findNextInPage(this.props.pageId,e,t,n),__source:{fileName:NX,lineNumber:296,columnNumber:9}}))}}fX(vX,"contextType",Vs.Z);function EX(e,t){if(e.title)return e.title;if(!e.content)return t||"";return e.content.split("\n")[0].trim().replace(/ {2,}/g," ").replace(/^#+ /g,"").substr(0,128).trim()}function CX({content:e}){return e?e.replace(/\n+/g,"").length:0}function wX({content:e}){return e?e.trim().split(/\s+/g).length:0}var yX=n(5846),SX=n(34155),TX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerEditor.jsx";function kX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class IX extends s.Component{constructor(...e){super(...e),kX(this,"refMarkdownEditor",s.createRef()),kX(this,"refVisualEditor",s.createRef()),kX(this,"refToolbar",s.createRef()),kX(this,"markdownFormatter",new q$),kX(this,"turndownService",(0,rX.Z)({headingStyle:"atx",codeBlockStyle:"fenced"})),kX(this,"state",{visualMode:!A.ZP.get(P.kNotesManagerShowMarkdown)}),kX(this,"focus",(()=>{this.state.visualMode?this.refVisualEditor.current?.focus():this.refMarkdownEditor.current&&this.refMarkdownEditor.current.focus()})),kX(this,"hasFocus",(()=>this.state.visualMode&&this.refVisualEditor.current?this.refVisualEditor.current.hasFocus():!!this.refMarkdownEditor.current&&this.refMarkdownEditor.current.hasFocus())),kX(this,"handleAttachmentMarkdown",(async e=>{this.refVisualEditor.current&&this.props.note&&this.refVisualEditor.current.execCommand("insertImage",`chrome://vivaldi-data/notes-attachment/${this.props.note.id}/${e}`)})),kX(this,"onHtmlChange",(()=>{if(!this.refVisualEditor.current)throw new Error("VisualEditor: Building body parts after body is gone");return this.refVisualEditor.current.getContentAsBodyParts().then((e=>{if("html"===e[0].type){const t=this.turndownService.turndown(e[0].content);this.props.updateNoteContent(t,(()=>{this.refMarkdownEditor&&this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setContent(t)}))}}))})),kX(this,"onMarkDownChange",(async()=>{if(!this.refMarkdownEditor.current)throw new Error("MarkdownEditor: Building body parts after body is gone");const e=await this.refMarkdownEditor.current.getContentAsBodyParts();if("text"!==e[0].type)return;const t=e[0].content;this.props.updateNoteContent(t,(()=>{}))})),kX(this,"setZoomLevel",(()=>{const e=yh.Z.getState().notesZoom;this.refVisualEditor.current?.setZoomLevel(e),this.refMarkdownEditor.current?.setZoomLevel(e)})),kX(this,"onRichContentLoad",(()=>{const{note:e}=this.props,t=this.markdownFormatter.getRawMarkup(e?.content||"");SX.nextTick((()=>{this.refVisualEditor.current?.setContent(t,!1),this.setZoomLevel()}))})),kX(this,"onMarkdownContentLoad",(()=>{const{note:e}=this.props;SX.nextTick((()=>{this.refMarkdownEditor.current?.setContent(e?.content||""),this.setZoomLevel()}))})),kX(this,"onStylingButtonClicked",(e=>{this.state.visualMode?this.refVisualEditor.current?.onClick(e):this.refMarkdownEditor.current?.onClick(e)})),kX(this,"onParagraphFormatChange",((e,t)=>{this.state.visualMode?this.refVisualEditor.current?.onChange(e,t):this.refMarkdownEditor.current?.onChange(e,t)})),kX(this,"onCreateLink",(e=>{const t=this.state.visualMode?this.refVisualEditor.current:this.refMarkdownEditor.current;t&&(""===e?t.execCommand("unlink"):"https://"!==e&&t.execCommand("createLink",e),t.focus())})),kX(this,"onCancelCreateLink",(()=>{this.focus()})),kX(this,"handleLinkEvent",((e,t)=>{const n=this.refToolbar.current;if(!n)return;const{link:s,anchor:i}=n.state;switch(e){case"linkupdate":n.updateLinkState(t||"");break;case"createLink":case"editLink":n.showCreateLinkModal();break;case"copyLink":break;case"unlink":(s||i)&&this.refVisualEditor.current?.unlink();break;case"createLinkClicked":(s||i)&&this.refVisualEditor.current?.selectSurrounding(),n.showCreateLinkModal()}})),kX(this,"focusFindInPage",(()=>{SX.nextTick((()=>bm.Z.showFindInPageToolbar(this.props.pageId)))})),kX(this,"setActiveWebView",(()=>{this.clearActiveWebViews();const e=this.refVisualEditor.current?.refWebview.current,t=this.refMarkdownEditor.current?.refWebview.current;this.state.visualMode&&e?uC.setActiveWebView(e):this.refMarkdownEditor&&t&&uC.setActiveWebView(t)})),kX(this,"clearActiveWebViews",(()=>{const e=this.refVisualEditor.current?.refWebview.current,t=this.refMarkdownEditor.current?.refWebview.current;e&&uC.clearIfActive(e),t&&uC.clearIfActive(t)})),kX(this,"setVisualMode",(e=>this.setState({visualMode:e},(()=>{this.setActiveWebView(),this.onRichContentLoad(),st.Z.set(P.kNotesManagerShowMarkdown,!this.state.visualMode)})))),kX(this,"updateDropdownAndColorState",(()=>{this.refVisualEditor.current?.executeScript({code:"['formatBlock'].map(command => document.queryCommandValue(command));"}).then((e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])){const[t]=e[0],n=""===t||"div"===t?"p":t;this.refToolbar.current?.updateButtonState(void 0,n)}}))})),kX(this,"updateButtonState",(()=>{const e=this.refToolbar.current;if(e)if(this.state.visualMode){const t=`[${'"'+_X.flat().map((e=>e.command)).join('","')+'"'}].map(command => document.queryCommandState(command));`;this.refVisualEditor.current?.executeScript({code:t}).then((t=>{const n=_X.flat().map((e=>e.command)).indexOf("createLink"),s=t&&t[0]||[];s[n]=!!e.state.anchor,e.updateButtonState(s)}))}else{const t=this.refMarkdownEditor.current;if(!t)return;const n=_X.flat().map((e=>e.command)).map((e=>t.state.caretState[e])).filter(yX.Z),{formatBlock:s}=t.state.caretState;e.updateButtonState(n,s)}}))}componentDidMount(){this.turndownService.use(LY.r0),this.turndownService.addRule("strikethrough",{filter:["del","s","strike"],replacement:e=>"~~"+e+"~~"}),this.turndownService.addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");let s=n.bulletListMarker+" ",i=t.parentNode;if("OL"===i.nodeName){const e=i.getAttribute("start"),n=Array.prototype.indexOf.call(i.children,t);s=(e?Number(e)+n:n+1)+". "}let r=-1;for(;i&&("OL"===i.nodeName||"UL"===i.nodeName);)r+=1,i=i.parentNode;return"    ".repeat(r)+s+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),this.refVisualEditor.current&&this.refVisualEditor.current.focus()}componentDidUpdate(e){e.noteId!==this.props.noteId&&(this.onRichContentLoad(),this.onMarkdownContentLoad())}render(){const{note:e}=this.props,t=e?.attachments?e.attachments:[];return s.createElement(s.Fragment,null,s.createElement(vX,{ref:this.refToolbar,isActive:this.props.isActive,noteId:e?e.id:void 0,pageId:this.props.pageId,attachments:t,disabled:!e||this.props.isFolder,inFullView:this.props.inFullView,visualMode:this.state.visualMode,handleAttachmentMarkdown:this.handleAttachmentMarkdown,onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,onParagraphFormatChange:this.onParagraphFormatChange,onStylingButtonClicked:this.onStylingButtonClicked,setVisualMode:this.setVisualMode,toggleFullEditor:this.props.toggleFullEditor,__source:{fileName:TX,lineNumber:355,columnNumber:9}}),s.createElement("div",{className:"NotesManager-Editor",__source:{fileName:TX,lineNumber:372,columnNumber:9}},s.createElement("div",{className:"editor-html",__source:{fileName:TX,lineNumber:373,columnNumber:11}},s.createElement(AS,{ref:this.refVisualEditor,onChange:this.onHtmlChange,onContentLoad:this.onRichContentLoad,focusPreviousElement:()=>{},isNote:!0,hidden:!this.state.visualMode,disabled:!e||this.props.isFolder,updateDropdownAndColorState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,__source:{fileName:TX,lineNumber:374,columnNumber:13}})),s.createElement(iX,{ref:this.refMarkdownEditor,onChange:this.onMarkDownChange,onContentLoad:this.onMarkdownContentLoad,hidden:this.state.visualMode,disabled:this.state.visualMode||!e||this.props.isFolder,updateDropdownState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,__source:{fileName:TX,lineNumber:388,columnNumber:11}})),e&&s.createElement("footer",{className:"NotesManager-Footer",__source:{fileName:TX,lineNumber:401,columnNumber:11}},s.createElement("div",{className:"NotesManager-WordCount",__source:{fileName:TX,lineNumber:402,columnNumber:13}},(0,ue.Z)("$1 word","$1 words",[wX(e)])+", "+(0,ue.Z)("$1 character","$1 characters",[CX(e)]))))}}var AX=n(34155),ZX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesTree.jsx";function PX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DX(e){$.Z.openURL(Pt.jk.internalUrl("notes",e.id),{singleton:!0})}class MX extends s.PureComponent{constructor(...e){super(...e),PX(this,"refTreeList",s.createRef()),PX(this,"state",{nodes:[],populated:!1,cutIds:[],showBadge:A.ZP.get(P.kPanelsShowFolderBadge)}),PX(this,"expandModel",{}),PX(this,"isEmpty",(()=>this.state.populated&&0===this.state.nodes.length)),PX(this,"isInManager",(()=>Boolean(this.props.columns))),PX(this,"deleteSelectedItems",(()=>this.refTreeList.current?.onDelete()||Promise.reject())),PX(this,"delete",((e=[])=>Promise.all(e.map((e=>"string"!=typeof e?Promise.resolve():new Promise((t=>{b.Z.notes.get(e,(n=>{n&&n.length>0&&!this.isTrashCan(n[0])?b.Z.notes.remove(e,t):t()}))}))))))),PX(this,"isFolder",(e=>xY.ZP.isFolder(e))),PX(this,"isTrashCan",(e=>Boolean(e.trash))),PX(this,"isEditable",(()=>!1)),PX(this,"getUrlsByNodes",(e=>e.map((e=>xY.ZP.getNodeById(e.id))).filter((e=>!!e&&!!e.url)).map((e=>(0,As.Fn)(e.url))))),PX(this,"onItemMouseDown",((e,t)=>{t.button===Nn.kCenter&&(0,Rx.Z)(t)})),PX(this,"onItemMouseUp",((e,t)=>{if(t.button===Nn.kCenter){const n=this.getUrlsByNodes([e]);n.length>0?$.Z.openUrls(n,{...(0,ai.Z)({button:t.button,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey})}):DX(e),(0,Rx.Z)(t)}})),PX(this,"onItemDoubleClick",((e,t)=>{const n=this.getUrlsByNodes([t]);n.length>0?$.Z.openUrls(n,{...(0,ai.Z)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey})}):DX(t)})),PX(this,"onNodesActivated",((e,t)=>{const n=this.getUrlsByNodes(t);$.Z.openUrls(n,{...(0,ai.Z)({ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey})})})),PX(this,"onFilterChange",((e,t=qo.default)=>{let n=[],s=[];if(xY.ZP.hasNotes())if(e.length>0){let t=e.toLowerCase();const i={};if(t.startsWith("url:")?(t=t.substring(4),i.url=t.length>0,i.content=!1):t.startsWith("content:")&&(t=t.substring(8),i.url=!1,i.content=t.length>0),"."===t&&(i.url=!1),"tree"===this.refTreeList.current?.getSearchStyle()){const e=xY.ZP.getFilteredTree(t,i);n=e.nodes,s=e.collapsed}else n=xY.ZP.getFilteredFlat(t,i)}else n=xY.ZP.getRootNode().children;this.setState((e=>({nodes:n,populated:!0,cutIds:xY.ZP.getCutIds()})),(()=>t(s)))})),PX(this,"_onStoreChange",(()=>{this.onFilterChange(this.props.filter)})),PX(this,"_onBadgeChanged",((e,t)=>{this.setState({showBadge:Boolean(t)})})),PX(this,"hasChildren",(e=>!!e.children&&e.children.length>0)),PX(this,"handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),PX(this,"unSelectAll",(()=>{this.refTreeList.current?.unSelectAll()})),PX(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),PX(this,"expandAll",(()=>{this.refTreeList.current?.expandAll()})),PX(this,"collapseAll",(()=>{this.refTreeList.current?.collapseAll()})),PX(this,"setSearchStyle",(e=>{this.refTreeList.current?.setSearchStyle(e)})),PX(this,"onSearchStyleChanged",(e=>{this.props.filter&&this.onFilterChange(this.props.filter,(t=>{"tree"===e&&AX.nextTick((()=>{this.refTreeList.current?.expandAllExcept(t)}))}))})),PX(this,"isValidForClipboard",(e=>!this.isTrashCan(e))),PX(this,"isValidDragSource",(e=>!this.isTrashCan(e))),PX(this,"isValidAddTarget",(e=>!this.isTrashed(e))),PX(this,"isTrashed",(e=>!!e&&(!!this.isTrashCan(e)||!!e.parentId&&this.isTrashed(this.refTreeList.current?.findTreeItem(e.parentId))))),PX(this,"onAddFolder",(()=>{const e={title:(0,ue.Z)("title","New Folder")};this.refTreeList.current?.onAdd(!0,e)})),PX(this,"onAddNote",(e=>this.refTreeList.current?.onAdd(!1,e))),PX(this,"selectById",(e=>{this.refTreeList.current?.selectById(e)})),PX(this,"onDrop",((e,t,n)=>{const s=e.dataTransfer.getData("text/plain");if(s.length>0){const e=this.getTargetSpec(t,n),i={content:s};return this.onCreate([i],e.parentId,e.index,!0)}return Promise.resolve()})),PX(this,"getTargetSpec",((e,t)=>{const n={id:e.id,index:0,parentId:void 0};if(this.isTrashCan(e)&&"on"!==t){const e=xY.ZP.getLastTopNode();e?(n.parentId=e.parentId,n.index=(e.index||0)+1):n.parentId=xY.ZP.getRootNode().id}else this.isFolder(e)&&"on"===t||e.isExpanded&&"below"===t?n.parentId=e.id:(n.parentId=e.parentId,n.index=(e.index||0)+("below"===t?1:0));return n})),PX(this,"onCreate",(async(e,t,n,s)=>{const i=t||"";await Li.Z.createNotesFromTreeNodes(e,i,n,s),await this.props.onCreated()})),PX(this,"onMove",((e,t="",n)=>(e=xY.ZP.validateForDrag(e),Promise.all(e.map((e=>new Promise((s=>{const i={parentId:t,index:n||void 0},r=xY.ZP.getNodeById(e);if(b.Z.notes.move(e,i,(()=>{s(e)})),!n)return;const a=r?.index;r&&a&&(r.parentId!==t||a>n)&&n++})))))))),PX(this,"getText",(()=>new Promise((e=>{const t=V.ZP.unsafeGetActivePage().get("id");b.Z.utilities.getSelectedText(t,e)})))),PX(this,"getMenuCapability",(async(e,t,n)=>{const s={inManager:this.isInManager()};switch(e.action){case"CONTEXT_OPEN_ADDRESS":{const i=n?.url;return{handler:()=>!!i&&$.Z.openUrls([i],{inNewWindow:!1,inCurrent:!1,inBackground:A.ZP.get(P.kTabsOpenNewInBackground)}),visible:!!i,...t(e,s)}}case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":{const s=n?.url,i=await Us.getMenu(!0,[s||""]);return{visible:!!s&&i.length>0,items:i,...t(e,{})}}case"CONTEXT_NEW_FROM_SELECTION":return this.getText().then((n=>{const i=V.ZP.unsafeGetActivePage().get("url");return{visible:!!n,handler:()=>{this.refTreeList.current?.onAdd(!1,{content:n,url:i})},...t(e,s)}}));case"CONTEXT_EDIT":return{handler:()=>DX(n),visible:Boolean(n)&&!this.isTrashCan(n),...t(e,s)};case"CONTEXT_EMPTY_TRASH":return{handler:()=>{Li.Z.emptyTrash()},visible:Boolean(n)&&this.isTrashCan(n),...t(e,s)};default:return{...t(e,s)}}})),PX(this,"getMenuVisibility",((e,t)=>{if(t)if(this.isTrashCan(t))switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}else{const n=this.isTrashCan(t)||xY.ZP.isSeparator(t);switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":case"CONTEXT_CUT":case"CONTEXT_COPY":case"CONTEXT_PASTE":case"CONTEXT_DELETE":return!this.isTrashCan(t);case"CONTEXT_NEW_SEPARATOR":return!this.isTrashCan(t)&&this.props.sorting.sortOrder===ti.Z.NO_SORTING;case"CONTEXT_RENAME":return!n;case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}else switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":case"CONTEXT_PASTE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;case"CONTEXT_NEW_SEPARATOR":return this.props.sorting.sortOrder===ti.Z.NO_SORTING;default:return!1}})),PX(this,"onContextMenu",(e=>{this.refTreeList.current?.onContextMenu(e)})),PX(this,"getDropSupport",((e,t)=>{const n={available:!1,onto:!1,edge:!0};return n.available=t.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===xY.d0)),n.available&&(n.onto=this.isFolder(e)),n})),PX(this,"saveTitle",((e,t)=>{b.Z.notes.update(e,{title:t})})),PX(this,"renderTitleRow",(e=>{const t=e.node,n=16*(t.level+1)+"px",i=16*t.level+"px",r=this.isFolder(t);return s.createElement("label",{key:t.id,__source:{fileName:ZX,lineNumber:606,columnNumber:7}},r&&this.hasChildren(t)&&s.createElement("span",{className:"expand-icon",style:{marginLeft:i},onMouseDown:Rx.Z,onMouseUp:()=>this.handleExpandClick(t.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:ZX,lineNumber:609,columnNumber:11}}),r&&s.createElement(Fs,{trash:this.isTrashCan(t),open:t.isExpanded,leftMargin:this.hasChildren(t)?0:n,__source:{fileName:ZX,lineNumber:617,columnNumber:11}}),!r&&!t.url&&s.createElement("span",{style:{marginLeft:n},className:"tree-icon",dangerouslySetInnerHTML:{__html:cn.zKr},__source:{fileName:ZX,lineNumber:624,columnNumber:11}}),!r&&!!t.url&&s.createElement("span",{style:{marginLeft:n},className:"tree-icon",dangerouslySetInnerHTML:{__html:cn.NwZ},__source:{fileName:ZX,lineNumber:630,columnNumber:11}}),void 0!==e.inlineEditText&&s.createElement("input",{type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:ZX,lineNumber:636,columnNumber:11}}),void 0===e.inlineEditText&&s.createElement("span",{className:"title",title:EX(t),__source:{fileName:ZX,lineNumber:646,columnNumber:11}},EX(t)),e.showBadge&&!this.props.fullView&&this.hasChildren(t)&&s.createElement("span",{className:"item-count",__source:{fileName:ZX,lineNumber:656,columnNumber:11}},t.children?.length))})),PX(this,"getRowComponentProps",(e=>({...e,childCount:e.node.children?e.node.children.length:0,columns:this.props.columns,showBadge:this.state.showBadge}))),PX(this,"rowComponent",(e=>{const t=e.node,n=xY.ZP.isSeparator(t),i=this.isFolder(t),r=16*(t.level+1)+"px",{columns:a}=e,o=[];return n?o.push(s.createElement("label",{key:`${t.id}__separator__${o.length}`,"data-parent":t.parentId,__source:{fileName:ZX,lineNumber:685,columnNumber:9}},s.createElement("hr",{style:{marginLeft:r},className:"separator",__source:{fileName:ZX,lineNumber:688,columnNumber:11}}))):this.props.fullView?(a||[]).map((n=>{switch(n.id){case"title":o.push(this.renderTitleRow(e));break;case"url":o.push(s.createElement("label",{key:n.id,__source:{fileName:ZX,lineNumber:701,columnNumber:15}},s.createElement("span",{__source:{fileName:ZX,lineNumber:702,columnNumber:17}},t.url)));break;case"content":o.push(s.createElement("label",{key:n.id,__source:{fileName:ZX,lineNumber:708,columnNumber:15}},!i&&s.createElement("span",{__source:{fileName:ZX,lineNumber:710,columnNumber:19}},t.content),i&&t.children&&t.children.length>0&&s.createElement("span",{className:"secondary",__source:{fileName:ZX,lineNumber:713,columnNumber:19}},(0,ue.Z)("$1 item","$1 items",[t.children.length]))));break;case"attachments":o.push(s.createElement("label",{key:n.id,className:"right-aligned",__source:{fileName:ZX,lineNumber:722,columnNumber:15}},s.createElement("span",{__source:{fileName:ZX,lineNumber:723,columnNumber:17}},t.attachments&&t.attachments.length>0?t.attachments.length:"")));break;case"dateAdded":o.push(s.createElement("label",{key:n.id,className:"right-aligned",__source:{fileName:ZX,lineNumber:732,columnNumber:15}},!i&&s.createElement("span",{__source:{fileName:ZX,lineNumber:734,columnNumber:19}},g()(t.dateAdded).format("ll"))))}})):o.push(this.renderTitleRow(e)),o}))}componentDidMount(){A.ZP.addListener(P.kPanelsShowFolderBadge,this._onBadgeChanged),xY.ZP.addChangeListener(this._onStoreChange),this.onFilterChange(this.props.filter)}componentWillUnmount(){A.ZP.removeListener(P.kPanelsShowFolderBadge,this._onBadgeChanged),xY.ZP.removeChangeListener(this._onStoreChange)}UNSAFE_componentWillReceiveProps(e){if(this.props.filter!==e.filter){const t=e.filter.length,n=this.props.filter.length;0===n&&t>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this.onFilterChange(e.filter,(e=>{t>0?AX.nextTick((()=>{this.refTreeList.current?.expandAllExcept(e)})):n>0&&0===t&&AX.nextTick((()=>{this.refTreeList.current?.expandWithModel(this.expandModel)}))}))}}render(){if(!this.state.populated&&!this.props.filter)return null;const e=xY.ZP.getRootNode().id,t={name:"noteslist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement(Sg,{ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,cutIds:this.state.cutIds,settings:this.props.settings,rootId:e,onSelect:this.props.onItemSelected,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onNodesActivated,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:this.delete,onMove:this.onMove,onDrop:this.onDrop,onCut:Li.Z.cut,onCopy:Li.Z.copy,supportsInlineEdit:!0,mimeType:xY.d0,getDropSupport:this.getDropSupport,getDragData:xY.ZP.getDragData,isFolder:this.isFolder,isSeparator:xY.ZP.isSeparator,hasChildren:this.hasChildren,menu:t,setCutIds:Li.Z.setCutIds,getTitle:xY.ZP.getTitle,saveTitle:this.saveTitle,getTargetSpec:this.getTargetSpec,isValidAddTarget:this.isValidAddTarget,isValidDragSource:this.isValidDragSource,isValidForClipboard:this.isValidForClipboard,isValidToEdit:xY.ZP.validateForEdit,validateForDrag:xY.ZP.validateForDrag,validateForDeletion:xY.ZP.validateForDeletion,sorting:this.props.sorting,columns:this.props.columns,__source:{fileName:ZX,lineNumber:759,columnNumber:7}})}}const OX=MX;var xX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesWelcome.jsx";function LX({onAddNote:e}){return s.createElement("div",{className:"notes-welcome",__source:{fileName:xX,lineNumber:13,columnNumber:5}},s.createElement("div",{className:"happy-note",onClick:e,__source:{fileName:xX,lineNumber:14,columnNumber:7}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.SXC},__source:{fileName:xX,lineNumber:15,columnNumber:9}}),s.createElement("h1",{__source:{fileName:xX,lineNumber:16,columnNumber:9}},(0,ue.Z)("Write Your First Note")),s.createElement("p",{__source:{fileName:xX,lineNumber:17,columnNumber:9}},(0,ue.Z)("Add a new note to begin, or select text on any webpage and create a note from contextual menu."))))}var RX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanelToolbar.jsx";class BX extends s.PureComponent{constructor(...e){var t,n,i;super(...e),t=this,n="refSearch",i=s.createRef(),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}focusSearch(){this.refSearch.current&&this.refSearch.current.focus()}render(){const{editorLayout:e,filter:t,onFilterValueChange:n,onAddNote:i,onDeleteSelectedItems:r,onAddFolder:a,onSetLayout:o,isDeleteDisabled:l}=this.props;return s.createElement("div",{className:"toolbar toolbar-default toolbar-small toolbar-wrap",__source:{fileName:RX,lineNumber:49,columnNumber:7}},s.createElement("input",{ref:this.refSearch,type:"search",className:"notesearch",placeholder:(0,ue.Z)("verb","Search"),value:t,title:(0,ue.Z)("Limit the search to address or content by $1 or $2",["URL:","CONTENT:"]),onChange:({currentTarget:e})=>n(e.value),__source:{fileName:RX,lineNumber:50,columnNumber:9}}),s.createElement("div",{className:"toolbar",style:e?{flexGrow:1}:{},__source:{fileName:RX,lineNumber:61,columnNumber:9}},s.createElement("div",{className:"toolbar-group",__source:{fileName:RX,lineNumber:68,columnNumber:11}},s.createElement(ko,{onClick:i,tooltip:(0,ue.Z)("New Note"),image:cn.md4.small,__source:{fileName:RX,lineNumber:69,columnNumber:13}}),s.createElement(ko,{onClick:r,tooltip:(0,ue.Z)("other","Delete"),image:cn.M2k.small,disabled:l,__source:{fileName:RX,lineNumber:74,columnNumber:13}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:RX,lineNumber:81,columnNumber:11}},s.createElement(ko,{onClick:a,image:cn._TQ.small,tooltip:(0,ue.Z)("command","New Folder"),__source:{fileName:RX,lineNumber:82,columnNumber:13}})),e&&s.createElement(ko,{style:{marginLeft:"auto"},onClick:o,image:"vertical"===e?cn.Q_G.small:cn.s2Z.small,tooltip:(0,ue.Z)("command","Toggle Layout"),__source:{fileName:RX,lineNumber:90,columnNumber:13}})))}}var FX=n(34155),UX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManager.jsx";function VX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const HX=[{text:(0,ue.Z)("Title"),value:"title",fullScreenTitle:(0,ue.Z)("Sort by title"),width:300,visible:!0,key:!0},{text:(0,ue.Z)("Content"),value:"content",icon:cn.sWI,fullScreenTitle:(0,ue.Z)("Sort by content"),width:300,visible:!1},{text:(0,ue.Z)("Address"),value:"url",icon:cn.iD7,fullScreenTitle:(0,ue.Z)("Sort by address"),width:300,visible:!0},{text:(0,ue.Z)("Date Created"),value:"dateAdded",icon:cn.V_c,fullScreenTitle:(0,ue.Z)("Sort by creation date"),width:120,visible:!0},{text:(0,ue.Z)("Attachments"),value:"attachments",icon:cn.onv,fullScreenTitle:(0,ue.Z)("Sort by attachments"),width:60,visible:!0}],WX=(0,za.Z)(zX,xY.mS,{trailing:!0,leading:!1});function zX({id:e,changes:t}){return new Promise(((n,s)=>{b.Z.notes.update(e,t,(()=>h.Z.runtime.lastError?s(h.Z.runtime.lastError):n()))}))}class GX extends s.PureComponent{constructor(e){super(e),VX(this,"refBody",s.createRef()),VX(this,"_tree",s.createRef()),VX(this,"_onPageStoreChange",(()=>{if(V.ZP.unsafeGetActivePage().id!==this.props.pageId){const e=this.refBody.current;e&&FX.nextTick(e.clearActiveWebViews)}else FX.nextTick((()=>{if(this.state.note){this.state.note.id!==this.props.id&&this._tree?.current?.selectById(this.props.id);const e=EX(this.state.note),{vivaldiWindowId:t}=this.context;$.Z.setTitle(this.props.pageId,t,e)}this.refBody.current?.setActiveWebView()}))})),VX(this,"_onStoreChange",((e,t)=>{switch(e){case"added":{if(V.ZP.unsafeGetActivePage().id!==this.props.pageId||this.panelHasFocus())return;const e=xY.ZP.getNodeById(t);return this.setState({note:e}),void(e&&!xY.ZP.isSeparator(e)&&FX.nextTick((()=>{this._tree?.current?.selectById(e.id)})))}case"init":{const e=xY.ZP.getNodeById(this.props.id);return this.setState({note:e}),void this._tree.current?.selectById(this.props.id)}case"changed":{if(!this.state.note||this.state.note.id!==t)return;const e=xY.ZP.getNodeById(t),n=this.refBody.current;if(n?.state.visualMode&&n?.hasFocus())return;return this.setState({note:e}),n?.state.visualMode||n?.hasFocus()||n?.onMarkdownContentLoad(),void n?.onRichContentLoad()}}})),VX(this,"panelHasFocus",(()=>{const{document:e}=this.context,t=e.getElementById("panels-container");return"notes"===re.ZP.getSelectedPanel()&&Boolean(t?.contains(e.activeElement))})),VX(this,"sortComparator",((e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(xY.ZP.isFolder(e)&&!xY.ZP.isFolder(t))return-1;if(xY.ZP.isFolder(t)&&!xY.ZP.isFolder(e))return 1;const{sortOrder:n,sortField:s}=this.state.sorting;if("title"===s)return this.sortByTitle(e,t,n);return ti.Z.getDefaultComparator(n,s)(e,t)})),VX(this,"sortByTitle",((e,t,n)=>{if(n<=ti.Z.NO_SORTING)return 0;const s=e.title||EX(e),i=t.title||EX(t);return s||i?s?i?n===ti.Z.ASCENDING_SORT?s.toLowerCase().localeCompare(i.toLowerCase()):i.toLowerCase().localeCompare(s.toLowerCase()):n===ti.Z.ASCENDING_SORT?-1:1:n===ti.Z.ASCENDING_SORT?1:-1:0})),VX(this,"onSortChange",((e,t)=>{this.setState((n=>({sorting:{...n.sorting,sortOrder:e,sortField:t}}))),st.Z.set(P.kNotesManagerSorting,{sortOrder:e,sortField:t})})),VX(this,"onUpdateRow",(e=>{this.setState({columns:e})})),VX(this,"onSaveRow",(()=>{pg(this.state.columns,"horizontal"===this.state.editorLayout?"notes":"notes_vertical")})),VX(this,"onItemCreated",(()=>{const e=this.state.note&&xY.ZP.isFolder(this.state.note);this.refBody.current&&!e&&this.refBody.current.focus(),e&&FX.nextTick((()=>{const e=this._tree.current?.refTreeList.current;e?.startInlineEditForSelectedItem()}))})),VX(this,"onItemSelected",(e=>{this.setState({note:e,markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0},(()=>{e&&$.Z.openURL(Pt.jk.internalUrl("notes",e.id),{inCurrent:!0})}))})),VX(this,"handleFilterChange",(e=>{this.setState({filter:e})})),VX(this,"onAddNote",(()=>{A.ZP.get(P.kNotesManagerShowMarkdown)&&this.refBody.current&&this.refBody.current.setVisualMode(!1),this.setState({filter:""}),this._tree.current?.onAddNote()})),VX(this,"onAddFolder",(()=>{this.setState({filter:""}),this._tree.current?.onAddFolder()})),VX(this,"onDeleteSelectedItems",(()=>{this._tree.current?.deleteSelectedItems()})),VX(this,"toggleFullEditor",(()=>{const{innerWidth:e,innerHeight:t}=this.context;this.setState((n=>{const s="vertical"===n.editorLayout?P.kNotesManagerTreeWidth:P.kNotesManagerTreeHeight,i="vertical"===n.editorLayout?e:t,r=0===n.treeViewSize?Math.round(i/3):0;return st.Z.set(s,r),{treeViewSize:r}}))})),VX(this,"onSlidebarPosition",((e,t)=>{this.setState((n=>({treeViewSize:"vertical"===n.editorLayout?Math.max(n.treeViewSize+e,0):Math.max(n.treeViewSize+t,0)})))})),VX(this,"onSlidebarStop",(()=>{this.setState((e=>{const t="horizontal"===e.editorLayout?P.kNotesManagerTreeHeight:P.kNotesManagerTreeWidth,n=e.treeViewSize>60?e.treeViewSize:0;return st.Z.set(t,n),{treeViewSize:n}}))})),VX(this,"updateNoteContent",((e,t)=>{this.setState((t=>t.note?{note:{...t.note,content:e}}:null),t),this.state.note&&WX({id:this.state.note.id,changes:{content:e}})})),VX(this,"onKeyUp",(e=>{const t=e.key.toLowerCase();if(e.ctrlKey){if("f"!==t)return;this.refBody.current?.focusFindInPage()}else"f3"===t&&this.refBody.current?.focusFindInPage()})),VX(this,"onSaveLink",(e=>{const{note:t}=this.state;t&&zX({id:t.id,changes:{url:e}}),this.setState({editLinkModal:!1})})),VX(this,"onCancelEditLink",(()=>this.setState({editLinkModal:!1}))),VX(this,"onEditLink",(()=>this.setState({editLinkModal:!0}))),VX(this,"toggleManagerLayout",(()=>this.setState((e=>{const t="horizontal"===e.editorLayout?"vertical":"horizontal",n="horizontal"===t?A.ZP.get(P.kNotesManagerTreeHeight):A.ZP.get(P.kNotesManagerTreeWidth),s="horizontal"===t?"notes":"notes_vertical";return st.Z.set(P.kNotesManagerLayout,t),{editorLayout:t,treeViewSize:n,columns:gg()[s]||bg(HX)}}))));const t=A.ZP.get(P.kNotesManagerSorting),n=A.ZP.get(P.kNotesManagerLayout),i="horizontal"===n?"notes":"notes_vertical";this.state={filter:"",note:void 0,markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0,editorLayout:n,editLinkModal:!1,treeViewSize:"vertical"===n?A.ZP.get(P.kNotesManagerTreeWidth):A.ZP.get(P.kNotesManagerTreeHeight),sorting:{sortOrder:t.sortOrder,sortField:t.sortField,comparator:this.sortComparator},columns:gg()[i]||bg(HX)}}componentDidMount(){V.ZP.addChangeListener(this._onPageStoreChange),xY.ZP.addChangeListener(this._onStoreChange),this.props.id&&"-1"!==this.props.id&&FX.nextTick((()=>{this._tree.current?.selectById(this.props.id)}))}componentDidUpdate(e,t){FX.nextTick((()=>{this.state.note&&this.state.note.id!==t.note?.id&&this._onPageStoreChange()}))}componentWillUnmount(){V.ZP.removeChangeListener(this._onPageStoreChange),xY.ZP.removeChangeListener(this._onStoreChange)}render(){const{note:e,editorLayout:t}=this.state;return s.createElement("div",{className:bn()({"NotesManager manager":!0,"NotesManager--Vertical":"vertical"===t}),onKeyUp:this.onKeyUp,__source:{fileName:UX,lineNumber:508,columnNumber:7}},this.state.editLinkModal&&s.createElement(_S,{onCreateLink:this.onSaveLink,onCancelCreateLink:this.onCancelEditLink,link:e?e.url:"",useAddress:!0,__source:{fileName:UX,lineNumber:515,columnNumber:11}}),s.createElement("div",{className:bn()({"NotesManager-Tree":!0,"NotesManager-Tree--Collapsed":0===this.state.treeViewSize}),style:{flexBasis:this.state.treeViewSize},__source:{fileName:UX,lineNumber:522,columnNumber:9}},s.createElement(BX,{filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onAddFolder:this.onAddFolder,onDeleteSelectedItems:this.onDeleteSelectedItems,onSetLayout:this.toggleManagerLayout,editorLayout:t,isDeleteDisabled:!this.state.note,__source:{fileName:UX,lineNumber:529,columnNumber:11}}),s.createElement("div",{className:"NotesManager-Tree-Container",__source:{fileName:UX,lineNumber:540,columnNumber:11}},s.createElement(RN,{key:this.state.editorLayout,fields:HX,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:A.ZP.get(P.kKeyboardTabToAll),manualSorting:!0,__source:{fileName:UX,lineNumber:541,columnNumber:13}}),s.createElement(OX,{ref:this._tree,settings:`NOTES_MANAGER_TREE_${this.props.pageId}`,filter:this.state.filter,sorting:this.state.sorting,onItemSelected:this.onItemSelected,onCreated:this.onItemCreated,editLink:this.onEditLink,columns:this.state.columns,noteId:this.state.note?this.state.note.id:"-1",pageId:this.props.pageId,fullView:!0,__source:{fileName:UX,lineNumber:554,columnNumber:13}}))),xY.ZP.hasNotes()?s.createElement("div",{className:"NotesManager-Note",__source:{fileName:UX,lineNumber:573,columnNumber:11}},s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.toggleFullEditor,returnOffset:!0,position:"vertical"===t?"right":"bottom",__source:{fileName:UX,lineNumber:574,columnNumber:13}}),s.createElement(IX,{ref:this.refBody,inFullView:this.state.treeViewSize>0,noteId:this.state.note?.id||"-1",note:this.state.note,pageId:this.props.pageId,isFolder:!!e&&xY.ZP.isFolder(e),toggleFullEditor:this.toggleFullEditor,updateNoteContent:this.updateNoteContent,isActive:this.props.isActive,__source:{fileName:UX,lineNumber:582,columnNumber:13}})):s.createElement(LX,{onAddNote:this.onAddNote,__source:{fileName:UX,lineNumber:571,columnNumber:11}}))}}VX(GX,"contextType",Vs.Z);var KX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialSuggestSection.jsx";function jX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class YX extends s.Component{constructor(e){super(e),jX(this,"keyDownHandler",((e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()})),jX(this,"mouseBlockHandler",(e=>{e.preventDefault()})),jX(this,"moveFocus",((e,t,n)=>{const s=pn.findDOMNode(this);if(s instanceof HTMLElement&&(!0===n||si(s))){const n=Array.from(s.querySelectorAll("button.dial")),i=n.map((e=>e.getAttribute("data-id"))).filter(Boolean);if(0===i.length||i.length!==n.length)return!1;let r,a=0,o=-1;switch(n.forEach((e=>{const t=e.getBoundingClientRect();o<t.left&&(a++,o=t.left)})),t){case"current":if(""===e||"first"===e?e=i[0]:"last"===e&&(e=i[0===this.props.keyAccess?i.length-1:0]),r=i.indexOf(e),-1===r)return!1;break;case"left":case"right":if(1===i.length)return!1;if(r=i.indexOf(e),-1===r)return!1;if("right"===t){if((r+1)%a==0)return!1;if(r+=1,r>=i.length)return!1}else{if(r%a==0)return!1;if(r-=1,r>=i.length)return!1}break;case"up":case"down":if(1===i.length)return!1;if(r=i.indexOf(e),-1===r)return!1;if("up"===t){if(r-=a,r<0)return!1}else if(r+=a,r>=i.length)return!1;break;default:return!1}e=i[r];const l=s.querySelector(`button.dial[data-id="${e}"]`);if(l)return l.focus(),!0}return!1})),jX(this,"closeDrawer",(()=>{this.props.onSpeedDialDrawerDone()})),this.state={suggestions:[]}}componentDidMount(){this.updateSuggestions()}updateSuggestions(){if(!W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)){const e=tn.ZP.getSpeeddialFolders()[0].children,t=[];e.forEach((e=>{e.url?t.push(e.url):e.children.forEach((e=>{t.push(e.url)}))})),h.Z.topSites.get((e=>{const n=e.filter((e=>!t.includes(e.url)));this.setState({suggestions:n})}))}}addSpeedDial(e,t){if(this.props.node){const n={parentId:this.props.node.id,title:e,url:(0,As.q9)(t)};this.props.onSpeedDialDrawerDone(n)}else this.props.onSpeedDialDrawerDone()}render(){const e=2*Math.floor((this.props.width-36)/90),t=W.ZP.isIncognito(this.context.vivaldiWindowId),{suggestions:n}=this.state;return s.createElement("section",{className:"drawer-suggestions",__source:{fileName:KX,lineNumber:228,columnNumber:7}},s.createElement("header",{__source:{fileName:KX,lineNumber:230,columnNumber:9}},s.createElement("h2",{__source:{fileName:KX,lineNumber:231,columnNumber:11}},(0,ue.Z)("Suggestions")),s.createElement("button",{className:"close",tabIndex:"-1",dangerouslySetInnerHTML:{__html:cn.kze},onClick:this.closeDrawer,__source:{fileName:KX,lineNumber:232,columnNumber:11}})),t&&s.createElement("p",{__source:{fileName:KX,lineNumber:239,columnNumber:11}},(0,ue.Z)("Suggestions are not available in private window.")),!t&&s.createElement("div",{className:"dials dial-suggestions",style:n.length>0?{display:"grid",gridTemplateColumns:"repeat(auto-fit, 90px)",gridTemplateRows:"repeat(2, 64px)"}:null,__source:{fileName:KX,lineNumber:242,columnNumber:11}},n.length>0?n.slice(0,e).map(((e,t)=>{const n=t.toString();return s.createElement("button",{key:t,className:"dial",tabIndex:0===t?"0":this.props.keyAccess,"data-id":n,title:e.title+"\n"+e.url,onMouseDown:this.mouseBlockHandler,onMouseUp:this.mouseBlockHandler,onKeyDown:this.keyDownHandler.bind(this,n),onClick:this.addSpeedDial.bind(this,e.title,e.url),"data-dialurl":e.url,__source:{fileName:KX,lineNumber:253,columnNumber:19}},s.createElement("div",{className:"dial-image suggest-thumbnail-image",__source:{fileName:KX,lineNumber:263,columnNumber:21}},s.createElement(Ls,{url:e.url,size:32,loadType:"page",__source:{fileName:KX,lineNumber:264,columnNumber:23}})),s.createElement("div",{className:"dial-title",__source:{fileName:KX,lineNumber:266,columnNumber:21}},e.title))})):s.createElement("p",{__source:{fileName:KX,lineNumber:270,columnNumber:17}},(0,ue.Z)("No history to choose from yet."))))}}jX(YX,"contextType",Vs.Z);const $X=YX;var XX="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialDrawer.jsx";function QX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qX="speed_Dial_Drawer";function JX(e){const t=e.trim();return!!(0,As.K2)((0,As.q9)(t))||!(0,As.Zj)(t)}class eQ extends s.Component{constructor(e){super(e),QX(this,"_onUrlbarStoreChanged",(()=>{const{isActive:e,isOmniDropdownOpen:t,selectionEnd:n,selectionStart:s,...i}=RE.Z.getUrlfieldStateFromId(qX);this.setState(i)})),QX(this,"addSpeedDialFolder",(()=>{if(this.props.node){const e={parentId:this.props.node.id,title:(0,ue.Z)("title","New Folder")};this.props.onSpeedDialDrawerDone(e)}})),QX(this,"drawerSubmitHandler",(e=>{e.stopPropagation(),e.preventDefault();let t=(this.state.autocompleteValue||this.state.editUrl||"").trim();if(0===t.length)return;t=(0,As.q9)(t);const n=t;this.addSpeedDial(n,t)})),QX(this,"onUrlFieldChanged",(()=>{const e=this.state.autocompleteValue||this.state.editUrl||"";this.setState({isSpeedDialURLValid:JX(e)})})),QX(this,"focusUrlField",(()=>{this.refs.urlField.focus()})),this.state={addSpeedDialTitle:"",editUrl:"",autocompleteValue:"",isSpeedDialURLValid:!1}}componentDidMount(){RE.Z.addChangeListener(this._onUrlbarStoreChanged)}componentWillUnmount(){RE.Z.removeChangeListener(this._onUrlbarStoreChanged)}addSpeedDial(e,t){if(this.props.node&&this.props.node.id){const n={parentId:this.props.node.id,title:e,url:(0,As.q9)(t),thumbnail:void 0};QN.Z.clearUrlfieldState(qX),this.props.onSpeedDialDrawerDone(n)}}render(){return s.createElement(gi.Z,{focusName:"focus-startpage-drawer",forceTrap:!0,style:{display:"contents"},__source:{fileName:XX,lineNumber:124,columnNumber:7}},s.createElement("aside",{key:"drawer",className:"startpage-drawer",__source:{fileName:XX,lineNumber:128,columnNumber:9}},s.createElement("section",{className:"drawer-adddial",style:{width:400},__source:{fileName:XX,lineNumber:129,columnNumber:11}},s.createElement("header",{__source:{fileName:XX,lineNumber:131,columnNumber:13}},s.createElement("h2",{__source:{fileName:XX,lineNumber:132,columnNumber:15}},(0,ue.Z)("Add Bookmark to Speed Dial"))),s.createElement("form",{className:"drawer-addform",onSubmit:this.drawerSubmitHandler,__source:{fileName:XX,lineNumber:134,columnNumber:13}},s.createElement(lC,{ref:"urlField",pageId:qX,autoFocus:!0,autocompletionEnabled:!0,className:"address",displayUrl:"",editUrl:this.state.editUrl||"",onChange:this.onUrlFieldChanged,handleDrop:!0,title:(0,ue.Z)("Enter page address"),placeholder:"https://vivaldi.com",__source:{fileName:XX,lineNumber:136,columnNumber:15}}),s.createElement("input",{className:"add-dial-submit primary",type:"submit",disabled:!this.state.isSpeedDialURLValid,value:(0,ue.Z)("Add"),__source:{fileName:XX,lineNumber:147,columnNumber:17}})),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:XX,lineNumber:153,columnNumber:13}},s.createElement(ko,{tabIndex:0,onClick:this.addSpeedDialFolder,image:cn._TQ.medium,title:(0,ue.Z)("command","New Folder"),__source:{fileName:XX,lineNumber:154,columnNumber:15}}))),s.createElement($X,{width:this.props.maxWidth-400,onSpeedDialDrawerDone:this.props.onSpeedDialDrawerDone,onHandoverFocus:this.focusUrlField,keyAccess:this.props.keyAccess,node:this.props.node,__source:{fileName:XX,lineNumber:162,columnNumber:11}})))}}const tQ=eQ;var nQ=n(66702),sQ=n(34155),iQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialTitle.jsx";function rQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class aQ extends s.PureComponent{constructor(...e){super(...e),rQ(this,"bookmarkActions",this.props.bookmarkActions||i.Z),rQ(this,"state",{isEditing:!1,title:this.props.bookmark.title,fallbackTitle:this.props.bookmark.title}),rQ(this,"_documentClickHandler",(e=>{const t=pn.findDOMNode(this),n=e.target;t&&n instanceof HTMLElement&&!t.contains(n)?this.refs.input.blur():document.removeEventListener("click",this._documentClickHandler)})),rQ(this,"handleMouseDown",(e=>{e.preventDefault()})),rQ(this,"handleClick",(e=>{"click"!==this.props.howToEdit?this.props.onSelect&&this.props.onSelect(e):sQ.nextTick((()=>this.enableEditing()))})),rQ(this,"handleDoubleClick",(e=>{"doubleClick"===this.props.howToEdit&&this.enableEditing()})),rQ(this,"handleBlur",(e=>{this.finishEdit("save")})),rQ(this,"handleChange",(e=>{const t=e.target.value;this.setState({title:t})})),rQ(this,"handleKeyDown",(e=>{switch(e.stopPropagation(),e.key){case"Enter":this.finishEdit("save");break;case"Escape":this.props.needsInitialEdit&&this.state.title===tn.ZP.getDefaultFolderName()?this.finishEdit("delete"):this.finishEdit("undo")}})),rQ(this,"removeSpeedDial",(()=>{h.Z.bookmarks.update(this.props.bookmark.id,{speeddial:!1})})),rQ(this,"containEvent",(e=>{e.stopPropagation()})),rQ(this,"onContextMenu",(e=>{this.state.isEditing?e.stopPropagation():(e.persist(),e.preventDefault(),e.stopPropagation(),this.props.getContextMenuItemsPromise(this.props.bookmark).then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)})))}))}componentDidUpdate(e,t){!1===e.needsInitialEdit&&!0===this.props.needsInitialEdit&&!1===this.state.isEditing&&this.enableEditing(),!1===t.isEditing&&!0===this.state.isEditing&&this.refs.input&&this.refs.input.value&&(this.refs.input.setSelectionRange(0,this.refs.input.value.length),this.refs.input.focus())}enableEditing(){!1===this.state.isEditing&&(document.addEventListener("click",this._documentClickHandler),this.setState({isEditing:!0}))}finishEdit(e){if(!1===this.state.isEditing)return;document.removeEventListener("click",this._documentClickHandler),this.props.needsInitialEdit&&this.props.setSpeedDialAwaitingEdit("");const t=this.props.bookmark.id;switch(e){case"save":this.setState({isEditing:!1},(()=>{h.Z.bookmarks.update(t,{title:this.state.title}).then((()=>{this.props.onFinished&&this.props.onFinished(!1)}))}));break;case"undo":this.setState((e=>({title:e.fallbackTitle,isEditing:!1})),(()=>{h.Z.bookmarks.update(t,{title:this.state.title}).then((()=>{this.props.onFinished&&this.props.onFinished(!1)}))}));break;case"delete":this.setState({isEditing:!1},(()=>{this.props.onFinished&&this.props.onFinished(!0),this.bookmarkActions.remove([t])}))}}render(){const e=bn()({"editable-title-container":!0,edit:this.state.isEditing}),t={...this.props.style,width:this.props.bookmark.title.length+"ch"};return s.createElement("span",{className:e,onBlur:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation(),onContextMenu:this.onContextMenu,__source:{fileName:iQ,lineNumber:229,columnNumber:7}},this.state.isEditing?s.createElement("input",{type:"text",ref:"input",className:"sd-title-editor",value:this.state.title,onBlur:this.handleBlur,style:t,onKeyDown:this.handleKeyDown,onMouseDown:this.containEvent,onChange:this.handleChange,autoFocus:!0,__source:{fileName:iQ,lineNumber:249,columnNumber:13}}):s.createElement("button",{className:this.props.className,"data-id":this.props.bookmark.id,tabIndex:this.props.keyAccess,onClick:this.handleClick,title:this.props.bookmark.title,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this,this.props.bookmark.id):void 0,onMouseDown:this.handleMouseDown,style:this.props.style,onDoubleClick:this.handleDoubleClick,__source:{fileName:iQ,lineNumber:235,columnNumber:13}},this.props.bookmark.title))}}rQ(aQ,"contextType",Vs.Z);const oQ=aQ;var lQ=n(34155),cQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDial.jsx";function uQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mQ=new Set;class dQ extends s.PureComponent{constructor(e){super(e),uQ(this,"_hasClipboardListener",!1),uQ(this,"_customThumbnail",!1),uQ(this,"handleRemoveDial",(()=>{const e=si(pn.findDOMNode(this))?this.props.getNextFocusable(this.props.node.id):"";this.props.bookmarkActions.remove([this.props.node.id]).then((()=>{e&&this.props.moveFocus(e,"current",!1)}))})),uQ(this,"enableClipboardListener",(e=>{if(this._hasClipboardListener!==e){this._hasClipboardListener=e;const{document:t}=this.context;this._hasClipboardListener?(t.addEventListener("cut",this.onCut),t.addEventListener("copy",this.onCopy),t.addEventListener("paste",this.onPaste)):(t.removeEventListener("cut",this.onCut),t.removeEventListener("copy",this.onCopy),t.removeEventListener("paste",this.onPaste))}})),uQ(this,"handleCutDial",(()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("cut",this.onCut),e.execCommand("cut"),t||e.removeEventListener("cut",this.onCut)})),uQ(this,"handleCopyDial",(()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("copy",this.onCopy),e.execCommand("copy"),t||e.removeEventListener("copy",this.onCopy)})),uQ(this,"handlePasteDial",(()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("paste",this.onPaste),e.execCommand("paste"),t||e.removeEventListener("paste",this.onPaste)})),uQ(this,"handleRename",(()=>{this.refs.title.enableEditing()})),uQ(this,"onRenameFinished",(e=>{e?lQ.nextTick((()=>{this.props.moveFocus("add","current",!1)})):this.props.moveFocus(this.props.node.id,"current",!1)})),uQ(this,"handleEdit",(()=>{se.Z.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})})),uQ(this,"handleUpdateThumbnail",(()=>{this.props.node.url&&qW.updateForBookmark(this.props.node.id,this.props.node.url)})),uQ(this,"handleSetCustomThumbnail",(()=>{b.Z.utilities.selectLocalImage({windowId:this.context.vivaldiWindowId,title:(0,ue.Z)("Select Custom Image"),thumbnailBookmarkId:this.props.node.id})})),uQ(this,"handleClearCustomThumbnail",(()=>{this.props.bookmarkActions.update(this.props.node.id,{thumbnail:""})})),uQ(this,"onThumbnailImageLoadError",(e=>{e&&!(0,As.Li)(e)&&b.Z.bookmarksPrivate.isCustomThumbnail(this.props.node.id,(t=>{e===this.props.node.thumbnail&&(t||mQ.has(e)||(mQ.add(e),this.props.node.url&&qW.updateForBookmark(this.props.node.id,this.props.node.url)))}))})),uQ(this,"openSpeedDialNodeHandler",(e=>{const t=e.ctrlKey;let n=!1,s=!1;if(e.shiftKey&&!e.altKey&&t)return void $.Z.openBrowserWindow(this.context.vivaldiWindowId,this.props.node.url,{incognito:!1,transition:ml.Z.AUTO_BOOKMARK});const i="number"==typeof e.button?e.button:Nn.kNone;if(!e.shiftKey||e.altKey||t)if(e.shiftKey||e.altKey||!t){if(i===Nn.kCenter)n=!0,s=!0,e.preventDefault();else if(Nn.isContextMenuButton(i)||Nn.isNavigationButton(i))return}else n=!0,s=!0;else n=!0;this.openSpeedDialNode(this.props.node,{openInBackground:s,openInNewTab:n}),X.Z.clearStatus()})),uQ(this,"openSpeedDialNode",((e,t)=>{this.props.openSpeedDialNode(e,t)})),uQ(this,"handlePointerEnter",(()=>{const{node:e}=this.props,{children:t}=e,n=t?(0,ue.Z)("$1 Folder",[e.title||""]):e?Pt.jk.getHoverUrl(tn.ZP.getUrlByNode(e)):"";X.Z.setStatus(n)})),uQ(this,"handlePointerLeave",(()=>{X.Z.clearStatus()})),uQ(this,"dialPointerDownHandler",(e=>{this.props.onPointerDown(this.props.node,e)})),uQ(this,"pointerDownHandler",(e=>{e.button,Nn.kCenter,e.button!==Nn.kLeft&&e.preventDefault(),b.Z.bookmarksPrivate.isCustomThumbnail(this.props.node.id,(e=>{this._customThumbnail=e}))})),uQ(this,"pointerUpHandler",(e=>{this.openSpeedDialNodeHandler(e),this.focusedElement&&setTimeout((()=>{this.focusedElement&&this.focusedElement.focus(),this.focusedElement=null}),1)})),uQ(this,"keyDownHandler",(e=>{switch(e.key){case" ":case"Enter":this.openSpeedDialNodeHandler(e);break;case"F2":this.handleRename();break;case"ArrowLeft":if(!this.props.moveFocus(this.props.node.id,"left",!1))return;break;case"ArrowRight":if(!this.props.moveFocus(this.props.node.id,"right",!1))return;break;case"ArrowUp":if(!this.props.moveFocus(this.props.node.id,"up",!1))return;break;case"ArrowDown":if(!this.props.moveFocus(this.props.node.id,"down",!1))return;break;default:return}e.preventDefault(),e.stopPropagation()})),uQ(this,"cancelEvent",(e=>{e.preventDefault(),e.stopPropagation()})),uQ(this,"getContextMenuItems",((e,t)=>{const n=Ss.getOptionFunction(e),s="always"===this.props.titleVisibility;return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewTab:!0,openInBackground:this.props.openTabsInBackground}),visible:this.isBookmark(),...n(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewTab:!0,openInBackground:!0}),visible:this.isBookmark()&&!this.props.openTabsInBackground,...n(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:()=>this.openSpeedDialNode(t),visible:this.isBookmark(),...n(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewWindow:!0}),visible:this.isBookmark(),...n(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewWindow:!0,incognito:!0}),visible:this.isBookmark(),...n(e,{})};case"CONTEXT_CONTAINER_OPEN_IN_WINDOW":{const s=await Us.getMenu(!0,[t.url||""]);return{visible:this.isBookmark()&&s.length>0,items:s,...n(e,{})}}case"CONTEXT_OPEN_ALL":return{handler:this.openSpeedDialNode.bind(this,t,{openInBackground:!0}),visible:this.isFolder(),...n(e,{})};case"CONTEXT_SET_THUMBNAIL":return{handler:this.handleSetCustomThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...n(e,{})};case"CONTEXT_CLEAR_THUMBNAIL":return{handler:this.handleClearCustomThumbnail,visible:this._customThumbnail,...n(e,{})};case"CONTEXT_RELOAD":return{handler:this.handleUpdateThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...n(e,{})};case"CONTEXT_EDIT":return{handler:this.handleEdit,...n(e,{})};case"CONTEXT_RENAME":return{handler:this.handleRename,visible:s,...n(e,{})};case"CONTEXT_CUT":return{handler:this.handleCutDial,...n(e,{})};case"CONTEXT_COPY":return{handler:this.handleCopyDial,...n(e,{})};case"CONTEXT_PASTE":return{handler:this.handlePasteDial,...n(e,{})};case"CONTEXT_DELETE":return{handler:this.handleRemoveDial,...n(e,{})};default:return{...n(e,{})}}}))})),uQ(this,"onContextMenu",((e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getContextMenuItems("speeddialitem",e).then((e=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)}))})),uQ(this,"onDragOver",(e=>{e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===en.yR))&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=en.ZP.isCopyModifierPressed(e)?"copy":"move",this.setState({canDrop:!0}))})),uQ(this,"onDragLeave",(e=>{this.state.canDrop&&this.setState({canDrop:!1})})),uQ(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation(),this.props.bookmarkActions.onDropEvent(e,this.props.node.id,0),this.setState({canDrop:!1})})),uQ(this,"onCut",(e=>{this.props.bookmarkActions.cut(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()})),uQ(this,"onCopy",(e=>{this.props.bookmarkActions.copy(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()})),uQ(this,"onPaste",(e=>{this.props.bookmarkActions.paste(e,this.props.node.id),e.stopPropagation(),e.preventDefault()})),uQ(this,"getContextMenuItemsPromise",(e=>this.getContextMenuItems("speeddialitem",e))),uQ(this,"getTitleStyle",mo()(1)((e=>e?{}:{textAlign:"center"}))),this.focusedElement=null,this.state={canDrop:!1,isHovered:!1}}componentWillUnmount(){this.enableClipboardListener(!1),qW.unlinkBookmarkComponent(this)}isFolder(){return!this.props.node.url}isBookmark(){return!this.isFolder()}renderThumbnails(){const e=this.props.node;return e.children?e.thumbnail?s.createElement(UW,{key:"thumb__folder__"+e.id,src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,className:"thumbnail-folder-image",__source:{fileName:cQ,lineNumber:580,columnNumber:9}}):e.children.map(((t,n)=>{if(n<4)return s.createElement(UW,{key:"thumb__"+e.id+"__"+n,src:t.thumbnail?t.thumbnail:"",className:"Mini-Thumbnail",onImageLoadError:this.onThumbnailImageLoadError,isFolder:!!t.children,__source:{fileName:cQ,lineNumber:590,columnNumber:11}})})):null}render(){const e=this.props.node,{children:t}=e,n=qW.linkAndQueryUpdatingBookmark(this,e.id),i=e.url?e.url:"",r=e.faviconUrl?e.faviconUrl:Pt.jk.getFavicon(i),{showFavicon:a,titleVisibility:o,deleteVisible:l,controlsVisible:c}=this.props,u="never"!==o,m=u?45:10;return s.createElement("div",{tabIndex:this.props.keyAccess,onPointerDown:this.dialPointerDownHandler,className:bn()("draggable","dial",{dragging:this.props.dragging,dragover:this.props.highlight,folder:Boolean(t),isCut:this.props.isCut}),style:{...this.props.style,height:this.props.backgroundHeight,width:this.props.thumbnailWidth},"data-id":e.id,onContextMenu:this.onContextMenu.bind(this,e),onBlur:()=>this.enableClipboardListener(!1),onFocus:()=>this.enableClipboardListener(!0),onKeyDown:this.keyDownHandler,onPointerEnter:()=>this.setState({isHovered:!0}),onPointerLeave:()=>this.setState({isHovered:!1}),onDoubleClick:this.cancelEvent,onPointerUpCapture:this.props.onPointerUp,__source:{fileName:cQ,lineNumber:628,columnNumber:7}},t?s.createElement("div",{className:bn()({"thumbnail-image":!0,"dial-folder-icon":!0,"drop-hover":this.state.canDrop}),title:e.url,style:{height:this.props.thumbnailHeight,width:"100%"},onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,onPointerCancel:this.pointerUpHandler,onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDrop.bind(this),key:e.id,__source:{fileName:cQ,lineNumber:664,columnNumber:11}},0===t.length&&!e.thumbnail&&s.createElement(UW,{src:"",isFolder:!0,__source:{fileName:cQ,lineNumber:685,columnNumber:15}}),t.length>0&&!e.thumbnail&&s.createElement("div",{className:"preview",__source:{fileName:cQ,lineNumber:688,columnNumber:15}},this.renderThumbnails()),e.thumbnail&&s.createElement(UW,{className:"thumbnail-folder-image",src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,__source:{fileName:cQ,lineNumber:693,columnNumber:15}})):s.createElement(UW,{onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,key:e.id,src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,thumbnailHeight:this.props.thumbnailHeight,thumbnailWidth:"100%",__source:{fileName:cQ,lineNumber:653,columnNumber:11}}),e.url&&c&&s.createElement("div",{className:"thumb-controls",style:{bottom:m},__source:{fileName:cQ,lineNumber:702,columnNumber:11}},s.createElement("button",{tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:bn()({circular:!0,"set-custom-thumbnail":!0}),title:(0,ue.Z)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:cn.a8r},__source:{fileName:cQ,lineNumber:705,columnNumber:13}}),!this.props.incognito&&s.createElement("button",{tabIndex:"-1",onClick:this.handleUpdateThumbnail,className:bn()({circular:!0,"update-thumbnail":!0,updating:n}),disabled:n,title:(0,ue.Z)("Update thumbnail"),dangerouslySetInnerHTML:{__html:cn.GO5.large},__source:{fileName:cQ,lineNumber:715,columnNumber:15}})),l&&s.createElement("button",{tabIndex:"-1",onClick:this.handleRemoveDial,title:(0,ue.Z)("other","Delete"),className:"close circular",dangerouslySetInnerHTML:{__html:cn.uN0},__source:{fileName:cQ,lineNumber:732,columnNumber:11}}),u&&s.createElement("div",{className:bn()({"thumbnail-title":!0,hidden:"hover"===o}),__source:{fileName:cQ,lineNumber:740,columnNumber:11}},a&&!t&&s.createElement(Ls,{className:"favicon",url:r||i,loadType:r?"faviconFromCache":"page",__source:{fileName:cQ,lineNumber:746,columnNumber:15}}),a&&t&&s.createElement(Fs,{rightMargin:0,className:"favicon",__source:{fileName:cQ,lineNumber:752,columnNumber:15}}),s.createElement(oQ,{ref:"title",bookmark:e,bookmarkActions:this.props.bookmarkActions,className:"button-title",getContextMenuItemsPromise:this.getContextMenuItemsPromise,howToEdit:"click",keyAccess:-1,needsInitialEdit:this.props.awaitingInitialEditId===e.id,onSelect:this.pointerUpHandler,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,style:this.getTitleStyle(a),onFinished:this.onRenameFinished,titleMargin:this.props.titleMargin,__source:{fileName:cQ,lineNumber:754,columnNumber:13}})))}}uQ(dQ,"contextType",Vs.Z);const hQ=dQ;var pQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialAddButton.jsx";function gQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bQ="add",NQ=[P.kStartpageSpeedDialFaviconVisible,P.kStartpageSpeedDialTitlesVisible];class fQ extends s.Component{constructor(...e){super(...e),gQ(this,"_hasClipboardListener",!1),gQ(this,"_enableClipboardListener",(e=>{if(this._hasClipboardListener!==e){this._hasClipboardListener=e,this.props.onSetClipboardListener(this._hasClipboardListener);const{document:t}=this.context;this._hasClipboardListener?t.addEventListener("paste",this.onPaste):t.removeEventListener("paste",this.onPaste)}})),gQ(this,"onPaste",(e=>{this.props.onPaste(e)})),gQ(this,"keyDownHandler",(e=>{if(" "===e.key||"Enter"===e.key)this.props.addItem();else switch(e.key){case"ArrowLeft":this.props.moveFocus(bQ,"left",!1);break;case"ArrowRight":this.props.moveFocus(bQ,"right",!1);break;case"ArrowUp":this.props.moveFocus(bQ,"up",!1);break;case"ArrowDown":this.props.moveFocus(bQ,"down",!1);break;default:return}e.preventDefault(),e.stopPropagation()})),gQ(this,"_handleItemMouseDown",(e=>{e.button!==Nn.kLeft&&e.preventDefault()}))}componentWillUnmount(){this._enableClipboardListener(!1)}render(){const{prefValues:e}=this.props,t=e[P.kStartpageSpeedDialFaviconVisible],n=bn()("dial","add",{active:this.props.drawerIsOpen,"SpeedDial-Dial--Favicon":t,"SpeedDial-Dial--Title":"never"!==e[P.kStartpageSpeedDialTitlesVisible]}),i=t?{}:{textAlign:"center"};return s.createElement("div",{className:n,"data-id":bQ,style:this.props.style,onBlur:()=>this._enableClipboardListener(!1),onFocus:()=>this._enableClipboardListener(!0),onMouseDown:this._handleItemMouseDown,tabIndex:this.props.keyAccess,onKeyDown:this.keyDownHandler,__source:{fileName:pQ,lineNumber:116,columnNumber:7}},s.createElement("button",{ref:"openAddSpeedDial",className:"thumbnail-image",title:this.props.title,style:{height:this.props.thumbnailHeight},tabIndex:this.props.keyAccess,onClick:this.props.addItem,dangerouslySetInnerHTML:{__html:cn.irc},__source:{fileName:pQ,lineNumber:125,columnNumber:9}}),s.createElement("div",{className:"thumbnail-title",__source:{fileName:pQ,lineNumber:135,columnNumber:9}},t&&s.createElement(Ls,{className:"favicon SpeedDialAddButton-Favicon",url:cn.a8r,loadType:"faviconFromCache",__source:{fileName:pQ,lineNumber:137,columnNumber:11}}),"never"!==e[P.kStartpageSpeedDialTitlesVisible]&&s.createElement("span",{className:"button-title",style:i,__source:{fileName:pQ,lineNumber:144,columnNumber:11}},(0,ue.Z)("Add New Speed Dial"))))}}gQ(fQ,"contextType",Vs.Z);const _Q=(0,bi.Z)(fQ,NQ);var vQ=n(76662),EQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialView.jsx";function CQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wQ=[P.kAddressBarSearchSuggestEnabled,P.kThemeUseAnimation,P.kStartpageSpeedDialAddButtonVisible,P.kStartpageSpeedDialAllowDnd,P.kStartpageSpeedDialColumns,P.kStartpageSpeedDialControlsVisible,P.kStartpageSpeedDialDeleteVisible,P.kStartpageSpeedDialFaviconVisible,P.kStartpageSpeedDialTitlesVisible,P.kStartpageSpeedDialWidth,P.kTabsOpenNewInBackground,P.kStartpageSpeedDialDisplaySearch],yQ={stiffness:400,damping:32,precision:.1};class SQ extends s.PureComponent{constructor(...e){super(...e),CQ(this,"animate",!1),CQ(this,"dragStartX",0),CQ(this,"dragStartY",0),CQ(this,"dragDialStartPos",[0,0]),CQ(this,"state",{dialNodes:[],pressed:"none",lastPress:null,dragDialXY:[0,0],dragOrder:null,transitionType:"down",dialId:null,highlightParentButton:!1}),CQ(this,"setSpeeddialRef",(e=>{this.speeddialRef=e})),CQ(this,"_onWebpageViewStoreChanged",(e=>{"PAGE_RELOAD"===e.type&&this._handlePageReload()})),CQ(this,"onSearch",((e,t,n={})=>{if(t&&t.url){const s={...n,useSearchEngine:t,post:!0===t.post};QN.Z.goSearchURL(e,s)}})),CQ(this,"handleSpeedDialPointerDown",((e,t)=>{"none"!==this.state.pressed&&this.finishPointerClick(!1,t),0!==t.button&&1!==t.button||!this.props.prefValues[P.kStartpageSpeedDialAllowDnd]||document.activeElement&&"sd-title-editor"===document.activeElement.className||(this.setState({pressed:"pressed",lastPress:e.id}),this.dragStartX=t.pageX,this.dragStartY=t.pageY)})),CQ(this,"onPointerMove",(e=>{const{pressed:t}=this.state;if("none"===t||!this.props.prefValues[P.kStartpageSpeedDialAllowDnd])return;if(0===e.buttons)return void this.finishPointerClick(!1,e);if(!(1&e.buttons))return;const{lastPress:n}=this.state;if(null===n||"dragcancel"===t)return;this.setState({highlightParentButton:this.isPointerOverParentButton(e)});const s=e.pageX-this.dragStartX,i=e.pageY-this.dragStartY;if("pressed"===t&&Math.abs(s)<=5&&Math.abs(i)<=5)return;const r=this.getSpeedDialGeometry(),a=this.getLastPressPosition();"pressed"===t&&(this.setDialDragListeners(!0),this.dragDialStartPos=this.computeLayout(r,a),this.setState({pressed:"dragging"}));let[o,l]=this.dragDialStartPos;o+=s,l+=i,this.setState({dragDialXY:[o,l]});const{cols:c,rows:u,dialWidth:m,dialHeight:d,thumbnailWidth:h,backgroundHeight:p}=this.getSpeedDialGeometry(),g=this.state.dialNodes.length,b=o+Math.ceil(h/3.5),N=l+Math.ceil(p/3.5),f=s<0?Math.round:Math.floor,_=i<0?Math.round:Math.floor,v=(0,Q_.default)(f(b/m),0,c-1),E=(0,Q_.default)(_(N/d),0,u-1),C=Math.min(E*c+v,g-1);a!==C&&this.moveDial(C,a)})),CQ(this,"moveDial",((e,t)=>this.setState((n=>{const s=(n.dragOrder||n.dialNodes.map((e=>e.id))).slice(0),i=s.splice(t,1)[0];return s.splice(e,0,i),{dragOrder:s}})))),CQ(this,"onPointerPressEnd",(e=>{const{pressed:t}=this.state;"dragging"!==t&&"dragcancel"!==t||(e.stopPropagation(),e.preventDefault()),this.finishPointerClick(!0,e)})),CQ(this,"onDragEscapeKey",(()=>{this.setState({pressed:"dragcancel",dragOrder:null})})),CQ(this,"isPointerOverParentButton",(e=>!(!e||!this.parentButtonRect)&&(e.pageX>this.parentButtonRect.x&&e.pageX<this.parentButtonRect.x+this.parentButtonRect.width&&e.pageY>this.parentButtonRect.y&&e.pageY<this.parentButtonRect.y+this.parentButtonRect.height))),CQ(this,"getDraggedNode",(()=>{const{dialNodes:e,dragOrder:t}=this.state,n=this.getLastPressPosition();return t?e.find((e=>e.id===t[n])):this.state.dialNodes[n]})),CQ(this,"onSDPointerUp",(async e=>{const{pressed:t}=this.state,n=e.currentTarget.getAttribute("data-id");if(!n||"dragging"!==t)return;const s=e.currentTarget.classList.contains("folder"),i=this.getDraggedNode();if(i&&i.id!==n){if(e.stopPropagation(),e.preventDefault(),s)await this.props.bookmarkActions.move([i.id],n,0);else if(function(e){return!!e&&!e.url}(i))await this.props.bookmarkActions.move([n],i.id,0);else{const e=tn.ZP.getItemById(n),t=await this.props.bookmarkActions.mergeWithPromise(i,e,(0,ue.Z)("title","New Folder"));this.props.setSpeedDialAwaitingEdit(t)}this.onBookmarksMoved(),this.setState({pressed:"dragcancel"})}else this.finishPointerClick(!0,e)})),CQ(this,"onBookmarksMoved",(()=>{h.Z.runtime.lastError&&(this.setState({dragOrder:null}),console.warn("Error moving bookmark: ",h.Z.runtime.lastError))})),CQ(this,"onDragOverHandler",(e=>{e.preventDefault(),e.stopPropagation()})),CQ(this,"openParentNode",(()=>{this.props.speedDialNode&&this.props.speedDialNode.parentId&&h.Z.bookmarks.getSubTree(this.props.speedDialNode.parentId,(e=>{if(h.Z.runtime.lastError)return;const t=e[0];t&&this.props.openSpeedDialNode(t)}))})),CQ(this,"isTopLevel",(()=>!this.props.speedDialNode||!this.props.speedDialSetNode||this.props.speedDialNode.id===this.props.speedDialSetNode.id)),CQ(this,"_handlePageReload",(()=>{!this.props.incognito&&this.props.speedDialNode&&h.Z.bookmarks.getChildren(this.props.speedDialNode.id,(e=>{if(!e)return;const t=[];e.forEach(((e,n,s)=>{b.Z.bookmarksPrivate.isCustomThumbnail(e.id,(i=>{!1===i&&e.url&&t.push({id:e.id,url:e.url}),n===s.length-1&&qW.updateForBookmarks(t)}))}))}))})),CQ(this,"onDragUrlOver",(e=>{e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===en.yR))&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")})),CQ(this,"onDropUrlOn",(e=>{const t=this.props.speedDialNode;if(t){const n=t.children?t.children.length:0,s={disableMove:!0};this.props.bookmarkActions.onDropEvent(e,t.id,n,s)}})),CQ(this,"onKeyDown",(e=>{const t=e.key.toLowerCase();if(e.ctrlKey)switch(t){case"z":e.shiftKey?this.props.bookmarkActions.redo():this.props.bookmarkActions.undo();break;case"y":this.props.bookmarkActions.redo()}})),CQ(this,"onPaste",(e=>{this.props.speedDialNode&&this.props.bookmarkActions.paste(e,this.props.speedDialNode.id,!0),e.stopPropagation(),e.preventDefault()})),CQ(this,"getNextFocusable",(e=>{const t=pn.findDOMNode(this.speeddialRef);if(t instanceof HTMLElement){const n=Array.from(t.querySelectorAll("div.dial")).map((e=>e.getAttribute("data-id"))).filter(Boolean);let s=n.indexOf(e);return-1===s?"":(s=s>0?s-1:s+1,s>=n.length?"":n[s])}return""})),CQ(this,"moveFocus",((e,t,n)=>{const s=pn.findDOMNode(this.speeddialRef);if(s instanceof HTMLElement){const n=Array.from(s.querySelectorAll("div.dial")).map((e=>e.getAttribute("data-id"))).filter(Boolean);if(0===n.length)return!1;let i;const r=this.getSpeedDialGeometry();switch(t){case"current":if(""===e&&(e=n[0]),i=n.indexOf(e),-1===i)return!1;break;case"left":case"right":if(1===n.length)return!1;if(i=n.indexOf(e),-1===i)return!1;if("right"===t){if((i+1)%r.cols==0)return!1;if(i+=1,i>=n.length)return!1}else{if(i%r.cols==0)return!1;if(i-=1,i>=n.length)return!1}break;case"up":case"down":if(1===n.length)return!1;if(i=n.indexOf(e),-1===i)return!1;if("up"===t){if(i-=r.cols,i<0){const e=s.getElementsByClassName("button-startpage up-level")[0];return!!e&&(e.focus(),!0)}}else if(i+=r.cols,i>=n.length)return!1;break;default:return!1}e=n[i];const a=s.querySelector(`div.dial[data-id="${e}"]`);if(a)return a.focus(),!0}return!1})),CQ(this,"renderNavigation",(()=>this.isTopLevel()?null:s.createElement("nav",{className:"startpage-folder-navigation",__source:{fileName:EQ,lineNumber:875,columnNumber:9}},s.createElement("button",{ref:e=>{this.parentFolderButtonRef=e},onClick:this.openParentNode,title:(0,ue.Z)("Show Parent Folder"),"data-name":"up-button",className:bn()("button-startpage","up-level",{highlight:this.state.highlightParentButton}),__source:{fileName:EQ,lineNumber:876,columnNumber:11}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.zwh},__source:{fileName:EQ,lineNumber:886,columnNumber:13}}),this.props.speedDialNode?this.props.speedDialNode.title:""))))}static getDerivedStateFromProps(e,t){const n=t.dialId,s=e.speedDialNode,i=s&&s.id,r=(s&&s.children||[]).filter((e=>!tn.ZP.isSeparator(e)));if(n===i){let{lastPress:e,dragOrder:n}=t;if(null===e||n||r.every((t=>t.id!==e))&&(e=null),null===e)n=null;else if(n){const e=t.dialNodes;e.length===r.length&&e.every(((e,t)=>e.id===r[t].id))||(n=null)}return{...t,dialNodes:r,lastPress:e,dragOrder:n}}let a="down";if(s&&n&&n!==s.parentId)if(r.find((e=>e.id===n)))a="up";else{const t=e.speedDialSet;if(t){const e=t.findIndex((e=>e.id===n)),s=t.findIndex((e=>e.id===i));-1!==s&&-1!==e&&(s<e?a="right":s>e&&(a="left"))}}return{...t,dialNodes:r,lastPress:null,dragOrder:null,transitionType:a,dialId:i}}getLastPressPosition(){const{dialNodes:e,lastPress:t,dragOrder:n}=this.state;return n?n.findIndex((e=>e===t)):e.findIndex((e=>e.id===t))}componentDidMount(){lb.Z.addChangeListener(this._onWebpageViewStoreChanged),this.animate=!0}componentDidUpdate(e,t){const n=pn.findDOMNode(this.parentFolderButtonRef);if(n){const e=n instanceof HTMLElement&&n.getBoundingClientRect();e instanceof DOMRect&&(this.parentButtonRect=e)}}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout),lb.Z.removeChangeListener(this._onWebpageViewStoreChanged),this.finishPointerClick(!1)}maybeSpring(e,t){return this.animate&&this.props.prefValues[P.kThemeUseAnimation]?(0,vQ.ST)(e,t):e}setDialDragListeners(e){if(!this.props.prefValues[P.kStartpageSpeedDialAllowDnd])return;const t=this.context;e?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerPressEnd,!1),t.addEventListener("pointercancel",this.onPointerPressEnd,!0),t.addEventListener("pointerdown",this.onPointerPressEnd,!0),Wl.Z.bind("esc",this.onDragEscapeKey)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerPressEnd,!1),t.removeEventListener("pointercancel",this.onPointerPressEnd,!0),t.removeEventListener("pointerdown",this.onPointerPressEnd,!0),Wl.Z.unbind("esc",this.onDragEscapeKey));const n=document.getElementById("browser");n&&(n.style.pointerEvents=e?"none":"auto")}async finishPointerClick(e,t){const{pressed:n}=this.state;if("none"!==n){if("dragging"===n||"dragcancel"===n){this.setDialDragListeners(!1);let s=!1;const{dragOrder:i}=this.state,r=this.getDraggedNode();if("dragging"===n&&e&&this.isPointerOverParentButton(t)){const e=this.props.speedDialNode&&this.props.speedDialNode.parentId;r&&e&&(await this.props.bookmarkActions.move([r.id],e,0),s=!0)}else if("dragging"===n&&e&&i){const e=this.getLastPressPosition();if(!r)return;if(("number"==typeof r.index?r.index:e)!==e){const e=r.parentId||"";await this.props.bookmarkActions.reorder(i,e),s=!0}}s?this.onBookmarksMoved():this.setState({dragOrder:null})}this.setState({pressed:"dragcancel",highlightParentButton:!1})}}getSpeedDialGeometry(){const{prefValues:e}=this.props;let t=e[P.kStartpageSpeedDialWidth];const n="always"===e[P.kStartpageSpeedDialTitlesVisible];if(-1===t){const e=Math.round(this.props.maxWidth/(1.4*this.props.prefValues[P.kStartpageSpeedDialColumns]));t=Math.max(Math.min(e,320),120)}const s=Math.round(t/1.22),i=Math.round(t/12);let r=this.state.dialNodes.length;e[P.kStartpageSpeedDialAddButtonVisible]&&r++;const a=6*i,o=e[P.kStartpageSpeedDialColumns];let l=s;n&&(l=s+33);const c=t+2*i,u=l+2*i;let m=Math.max(1,Math.min(Math.floor((this.props.maxWidth-a)/c),o));this.props.maxWidth<c*m+a&&(m=1);return{backgroundHeight:l,count:r,cols:m,rows:Math.ceil(r/m),dialWidth:c,dialHeight:u,thumbnailWidth:t,thumbnailHeight:s,dialSpace:i}}computeLayout(e,t){const n=Math.floor(t/Number(e.cols)),s=t%Number(e.cols);return[Number(e.dialWidth)*s,Number(e.dialHeight)*n]}render(){const{open:e,maxWidth:t,speedDialSet:n,prefValues:i}=this.props;if(!1===e||!t)return null;const r=i[P.kStartpageSpeedDialAllowDnd],a=i[P.kStartpageSpeedDialFaviconVisible],o=i[P.kStartpageSpeedDialTitlesVisible],l=i[P.kTabsOpenNewInBackground],c=i[P.kStartpageSpeedDialControlsVisible],u=i[P.kStartpageSpeedDialDeleteVisible],{pressed:m,dialId:d}=this.state,h=bn()({dials:!0,speeddial:!0,"sd-titles-onhover":"hover"===o}),p=n.length>0,g=this.getSpeedDialGeometry(),{backgroundHeight:b,count:N,cols:f,rows:_,dialWidth:v,dialHeight:E,thumbnailWidth:C,thumbnailHeight:w,dialSpace:y}=g,S=f*v-2*y,T=Math.round(C/20);return s.createElement(s.Fragment,null,this.props.prefValues[P.kStartpageSpeedDialDisplaySearch]&&s.createElement(ov,{className:"SpeedDialView-SearchField",useFavicon:!0,key:"speed_dial_search",origin:"speed_dial_view",onSearch:this.onSearch,suggestEnabled:i[P.kAddressBarSearchSuggestEnabled],__source:{fileName:EQ,lineNumber:930,columnNumber:9}}),s.createElement(nQ.Z,{className:bn()({"dials-wrapper":!0,dragging:"dragging"===m,"dragging-disabled":!r}),transitionName:this.state.transitionType,transitionEnterTimeout:300,transitionLeaveTimeout:300,overflowHidden:!1,__source:{fileName:EQ,lineNumber:940,columnNumber:7}},s.createElement("div",{onDragOver:this.onDragUrlOver,onDrop:this.onDropUrlOn,onKeyDown:this.onKeyDown,key:"node__"+(d||"unset"),ref:this.setSpeeddialRef,className:h,__source:{fileName:EQ,lineNumber:950,columnNumber:9}},this.renderNavigation(),s.createElement("div",{className:"dial-columns",onPointerMove:"pressed"===m&&r?this.onPointerMove:null,onPointerUp:this.onPointerPressEnd,onPointerCancel:this.onPointerPressEnd,style:{width:S,height:_*E,marginLeft:y,marginRight:y},__source:{fileName:EQ,lineNumber:959,columnNumber:9}},function(e,t){const n=Array(e);for(let s=0;s<e;s++)n[s]=t(s);return n}(N,(e=>{const{dialNodes:t}=this.state;let n=null;if(e<t.length){const{dragOrder:s}=this.state;n=s?t.find((t=>t.id===s[e])):t[e]}const i=!!n&&n.id===this.state.lastPress,r=i&&"dragging"===m;let d;if(r){const[e,t]=this.state.dragDialXY;d={translateX:e,translateY:t,opacity:this.maybeSpring(.95,yQ)}}else if(n){const[t,n]=this.computeLayout(g,e);d={translateX:this.maybeSpring(t,yQ),translateY:this.maybeSpring(n,yQ),opacity:this.maybeSpring(1,yQ)}}else{const[t,n]=this.computeLayout(g,e);d={translateX:this.maybeSpring(t,yQ),translateY:this.maybeSpring(n,yQ),opacity:1}}return s.createElement(vQ.y_,{key:n?"node_"+n.id:"add_button",style:d,children:qo.default,__source:{fileName:EQ,lineNumber:1011,columnNumber:15}},(({translateX:t,translateY:d,opacity:h})=>{const g="dragging"===m;return n?s.createElement(hQ,{incognito:this.props.incognito,onPointerDown:this.handleSpeedDialPointerDown,dragging:r,style:{transform:`translate3d(${t}px, ${d}px, 0)`,zIndex:i?999:e,opacity:h,pointerEvents:r?"none":"auto"},isCut:this.props.cutIds.includes(n.id),backgroundHeight:b,thumbnailHeight:w,thumbnailWidth:C,highlight:g,onPointerUp:this.onSDPointerUp,titleMargin:T,node:n,bookmarkActions:this.props.bookmarkActions,keyAccess:0===e?0:-1,moveFocus:this.moveFocus,getNextFocusable:this.getNextFocusable,openSpeedDialNode:this.props.openSpeedDialNode,awaitingInitialEditId:this.props.awaitingInitialEditId,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,showFavicon:a,titleVisibility:o,openTabsInBackground:l,controlsVisible:c,deleteVisible:u,__source:{fileName:EQ,lineNumber:1023,columnNumber:21}}):s.createElement(_Q,{style:{transform:`translate3d(${t}px, ${d}px, 0)`,zIndex:0,height:b,width:C},id:this.props.speedDialNode?.id,thumbnailHeight:w,drawerIsOpen:this.props.drawerIsOpen,title:p?(0,ue.Z)("title","Add bookmark to Speed Dial"):(0,ue.Z)("First add a new Speed Dial folder"),keyAccess:0===e?0:-1,moveFocus:this.moveFocus,onPaste:this.onPaste,onSetClipboardListener:this.props.onSetClipboardListener,addItem:this.props.toggleStartpageDrawer,__source:{fileName:EQ,lineNumber:1059,columnNumber:21}})}))}))))))}}CQ(SQ,"contextType",Vs.Z);const TQ=(0,bi.Z)(SQ,wQ);var kQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\startpage-topmenu.jsx";function IQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const AQ=[P.kMailIsTurnedOff,P.kStartpageSpeedDialAddButtonVisible];class ZQ extends s.Component{constructor(...e){super(...e),IQ(this,"openMenuItem",((e,t,n)=>{this.props.openMenuItem(e,t,n)})),IQ(this,"openSection",((e,t,n)=>{this.props.section!==e&&$.Z.openURL(Pt.jk.internals[e],{inCurrent:!0}),e===HI.SpeedDial&&this.props.openMenuItem(HI.SpeedDial,t,n)})),IQ(this,"createSpeedDialSet",(()=>{this.props.section!==HI.SpeedDial&&$.Z.openURL(Pt.jk.internals[HI.SpeedDial],{inCurrent:!0}),this.props.createSpeedDialSet()})),IQ(this,"getContextMenuItems",(e=>{const t="startpagebar",n=Ss.getOptionFunction(t);return Ss.getNamedMenu(t,(async t=>{switch(t.action){case"CONTEXT_RENAME":return{visible:e.length>0,handler:()=>this.handleRename(e),...n(t,{})};case"CONTEXT_REMOVE":return{visible:e.length>0,handler:()=>this.handleRemove(e),...n(t,{})};default:return{...n(t,{})}}}))})),IQ(this,"onContextMenu",(e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getContextMenuItems("").then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))})),IQ(this,"handleRename",(e=>{this.refs[e].enableEditing()})),IQ(this,"handleRemove",(e=>{this.refs[e].removeSpeedDial()})),IQ(this,"handleMouseDown",(e=>{e.preventDefault()})),IQ(this,"handleKeyDown",((e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;default:return}t.preventDefault(),t.stopPropagation()})),IQ(this,"moveFocus",((e,t,n)=>{const s=pn.findDOMNode(this);if(s instanceof HTMLElement&&(!0===n||si(s))){const n=Array.from(s.querySelectorAll("button.button-startpage")).map((e=>e.getAttribute("data-id"))).filter(Boolean);if("current"===t){if(""===e){const t=document.getElementsByClassName("div.button-startpage active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=n.indexOf(e);if(-1===t)return;e=n[t]}else if("right"===t||"left"===t){if(1===n.length)return;let s=n.indexOf(e);if(-1===s)return;s="right"===t?s+1>=n.length?0:s+1:s<=0?n.length-1:s-1,e=n[s]}const i=s.querySelector(`button.button-startpage[data-id="${e}"]`);i&&i.focus()}}))}render(){let e=-1===this.props.keyAccess;const t=t=>{let n=-1;return!e&&t&&(e=!0,n=0),n};return s.createElement("nav",{className:"startpage-navigation",onContextMenu:this.onContextMenu,__source:{fileName:kQ,lineNumber:211,columnNumber:7}},s.createElement("div",{className:"startpage-navigation-group",__source:{fileName:kQ,lineNumber:213,columnNumber:9}},this.props.speedDialSet.map((function(e,n){const i=this.props.section===HI.SpeedDial&&this.props.speedDialSetNode&&this.props.speedDialSetNode.id===e.id,r="title"+n;return s.createElement(oQ,{className:bn()({active:i,"button-startpage":!0,"no-page-focus":!0}),ref:r,key:e.id,bookmark:e,howToEdit:"doubleClick",getContextMenuItemsPromise:this.getContextMenuItems.bind(this,r),keyAccess:t(i),onSelect:this.openSection.bind(this,HI.SpeedDial,e),onKeyDown:this.handleKeyDown,needsInitialEdit:this.props.initialEditSpeedDialSet===e.id,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,__source:{fileName:kQ,lineNumber:222,columnNumber:15}})}),this),this.props.prefValues[P.kStartpageSpeedDialAddButtonVisible]&&s.createElement("button",{onClick:this.createSpeedDialSet,"data-id":"add",className:"button-startpage add-set no-page-focus",title:(0,ue.Z)("Add new Speed Dial folder"),tabIndex:t(!0),onKeyDown:this.handleKeyDown.bind(this,"add"),dangerouslySetInnerHTML:{__html:cn.md4.medium},__source:{fileName:kQ,lineNumber:246,columnNumber:17}})),s.createElement("div",{className:"startpage-navigation-group",__source:{fileName:kQ,lineNumber:258,columnNumber:9}},s.createElement("button",{onClick:this.openSection.bind(this,HI.Bookmarks,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,HI.Bookmarks),title:(0,ue.Z)("Bookmarks"),"data-id":HI.Bookmarks,tabIndex:t(!0),className:bn()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===HI.Bookmarks}),dangerouslySetInnerHTML:{__html:cn.CLf.medium+(0,ue.Z)("Bookmarks")},__source:{fileName:kQ,lineNumber:259,columnNumber:11}}),s.createElement("button",{onClick:this.openSection.bind(this,HI.History,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,HI.History),title:(0,ue.Z)("History"),"data-id":HI.History,tabIndex:t(!0),className:bn()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===HI.History}),dangerouslySetInnerHTML:{__html:cn.hcy.medium+(0,ue.Z)("History")},__source:{fileName:kQ,lineNumber:272,columnNumber:11}}),s.createElement("button",{onClick:this.openSection.bind(this,HI.NotesManager,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,HI.NotesManager),title:(0,ue.Z)("Notes"),"data-id":HI.NotesManager,tabIndex:t(!0),className:bn()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===HI.NotesManager}),dangerouslySetInnerHTML:{__html:cn.cyI.large+(0,ue.Z)("Notes")},__source:{fileName:kQ,lineNumber:285,columnNumber:11}}),this.props.prefValues[P.kMailIsTurnedOff]?null:s.createElement("button",{onClick:this.openSection.bind(this,HI.Calendar,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,HI.Calendar),title:(0,ue.Z)("Calendar"),"data-id":HI.Calendar,tabIndex:t(!0),className:bn()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===HI.Calendar}),dangerouslySetInnerHTML:{__html:cn.bcq.medium+(0,ue.Z)("Calendar")},__source:{fileName:kQ,lineNumber:299,columnNumber:15}})))}}IQ(ZQ,"contextType",Vs.Z);const PQ=(0,bi.Z)(ZQ,AQ);var DQ=n(55667),MQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\StartPage.jsx";function OQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xQ=[P.kBookmarksConfirmOpening,P.kBookmarksConfirmOpeningThreshold,P.kKeyboardTabToAll,P.kStartpageNavigation,P.kStartpageSpeedDialAddButtonVisible,P.kStartpageSpeedDialGameButtonShow,P.kTabsBarPosition,P.kTabsBarWidth];class LQ extends s.PureComponent{constructor(e,t){super(e),OQ(this,"_speeddialview",s.createRef()),OQ(this,"bookmarkActions",new LW),OQ(this,"_hasClipboardListener",!1),OQ(this,"_onStoreChange",(()=>{const e=tn.ZP.getSpeeddialFolders();let t=e[0],n=t;for(const s of e)this.getUpdatedNode(s,this.state.currentSpeeddial)&&(n=this.getUpdatedNode(s,this.state.currentSpeeddial)),this.getUpdatedNode(s,this.state.menuSpeeddial)&&(t=this.getUpdatedNode(s,this.state.menuSpeeddial));this.setState({bookmarksAvailable:!0,speeddialFolders:e,menuSpeeddial:t,currentSpeeddial:n,cutIds:tn.ZP.getCutIds()})})),OQ(this,"_onTaskStoreChange",(()=>{this.forceUpdate()})),OQ(this,"jumpToTop",(()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&(e.scrollTop=0)})),OQ(this,"scrollToBottom",(()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&e.scrollTo({top:e.scrollHeight,left:0,behavior:"smooth"})})),OQ(this,"onResize",(e=>{const t=e[0].contentRect;(this.state.viewHeight!==t.height||this.state.viewWidth!==t.width)&&this.setState({viewWidth:t.width,viewHeight:t.height})})),OQ(this,"getUpdatedNode",((e,t)=>{if(e&&e.id&&t&&t.id){if(e.id===t.id)return e;if(e.children){for(var n=0;n<e.children.length;n++){var s=this.getUpdatedNode(e.children[n],t);if(s&&s.id===t.id)return s}return null}return null}return null})),OQ(this,"showStartpageDrawer",((e,t)=>{this.setState({drawerIsOpen:e},(()=>{!1===e&&""===this.state.awaitingInitialEditId&&this._speeddialview.current?.moveFocus(t||"add","current",!1)}))})),OQ(this,"closeStartpageDrawer",(()=>{this.showStartpageDrawer(!1,"")})),OQ(this,"toggleStartpageDrawer",(()=>{0===this.state.speeddialFolders.length?this.createSpeedDialSet():this.showStartpageDrawer(!this.state.drawerIsOpen)})),OQ(this,"handleDoubleClick",(()=>{this.state.section!==HI.SpeedDial||this.props.prefValues[P.kStartpageSpeedDialAddButtonVisible]||this.toggleStartpageDrawer()})),OQ(this,"onSetClipboardListener",(e=>{this._hasClipboardListener=e})),OQ(this,"handlePaste",(()=>{const e=this._hasClipboardListener;e||document.addEventListener("paste",this.onPaste),document.execCommand("paste"),e||document.removeEventListener("paste",this.onPaste)})),OQ(this,"onPaste",(e=>{this.state.currentSpeeddial&&(this.bookmarkActions.paste(e,this.state.currentSpeeddial.id,!0),e.stopPropagation(),e.preventDefault())})),OQ(this,"createSpeedDialSet",(async()=>{const e=await this.bookmarkActions.create({parentId:tn.ZP.getRootId(),title:tn.ZP.getDefaultFolderName()});e&&this.bookmarkActions.update(e.id,{speeddial:!0}).then((e=>{this.setState({initialEditSpeedDialSet:e.id})}))})),OQ(this,"openMenuItem",((e,t,n)=>{this.props.updatePageThumbnailWithActiveWebview(1e3);const s=t&&t.id&&t;this.jumpToTop(),this.setState({section:e,menuSpeeddial:s,currentSpeeddial:s})})),OQ(this,"isFolder",(e=>!e.url)),OQ(this,"openFolder",((e,t)=>{if(!0===(t=t||{}).openInBackground){if(this.props.prefValues[P.kBookmarksConfirmOpening]&&e.children&&e.children.length>this.props.prefValues[P.kBookmarksConfirmOpeningThreshold]){const n={bookmarks:e.children,inBackground:t.openInBackground,newTab:t.openInNewTab};return void se.Z.showConfirmOpenBookmarkDialog(n)}h.Z.bookmarks.getChildren(e.id,(e=>{e.forEach((e=>{$.Z.openURL(e.url,{inCurrent:!1,inBackground:!0})}))}))}else this.jumpToTop(),this.setState({currentSpeeddial:e},(()=>{this._speeddialview.current?.moveFocus("","current",!1),this.bookmarkActions.clearUndoStack()}))})),OQ(this,"openSpeedDialNode",((e,t)=>{t=t||{},this.isFolder(e)?this.openFolder(e,t):t.openInNewWindow?$.Z.openBrowserWindow(this.context.vivaldiWindowId,e.url,{incognito:t.incognito,transition:ml.Z.AUTO_BOOKMARK}):e.url&&$.Z.openURL(e.url,{inCurrent:!t.openInNewTab,inBackground:t.openInBackground,bookmarkId:e.id,addOpenerTabId:!0,inSpecificPageId:t.openInNewTab?void 0:this.props.pageId,transition:ml.Z.AUTO_BOOKMARK})})),OQ(this,"setSpeedDialAwaitingEdit",(e=>{this.setState({awaitingInitialEditId:e})})),OQ(this,"onSpeedDialDrawerDone",(async e=>{if(!e)return void this.closeStartpageDrawer();const t=await this.bookmarkActions.create(e);if(!t)return void this.closeStartpageDrawer();const n=t.url;n?W.ZP.isIncognito(this.context.vivaldiWindowId)||qW.updateForBookmark(t.id,n):this.setSpeedDialAwaitingEdit(t.id),this.showStartpageDrawer(!1,t.id)})),OQ(this,"customize",(()=>{se.Z.showSettings("startpage")})),OQ(this,"renderSection",(e=>{if(this.state.section===HI.Bookmarks)return s.createElement(Pz,{__source:{fileName:MQ,lineNumber:418,columnNumber:14}});if(this.state.section===HI.History)return s.createElement(OY,{pageId:this.props.pageId,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,__source:{fileName:MQ,lineNumber:421,columnNumber:9}});if(this.state.section===HI.SpeedDial)return this.state.bookmarksAvailable?s.createElement(TQ,{ref:this._speeddialview,bookmarkActions:this.bookmarkActions,open:!0,cutIds:this.state.cutIds,speedDialNode:this.state.currentSpeeddial,speedDialSetNode:this.state.menuSpeeddial,speedDialSet:this.state.speeddialFolders,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],drawerIsOpen:this.state.drawerIsOpen,maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,openSpeedDialNode:this.openSpeedDialNode,toggleStartpageDrawer:this.toggleStartpageDrawer,onSetClipboardListener:this.onSetClipboardListener,incognito:e,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,awaitingInitialEditId:this.state.awaitingInitialEditId,__source:{fileName:MQ,lineNumber:432,columnNumber:9}}):null;if(this.state.section===HI.Calendar)return s.createElement(Qj,{pageId:this.props.pageId,url:this.props.url,__source:{fileName:MQ,lineNumber:454,columnNumber:9}});if(this.state.section===HI.NotesManager){const e=new URL(this.props.url).searchParams.get("path")||"-1";return s.createElement(GX,{key:`notes-manager-${this.props.pageId}`,id:e,pageId:this.props.pageId,isActive:this.props.isActive,__source:{fileName:MQ,lineNumber:459,columnNumber:9}})}return console.warn("Unknown Startpage Section: ",this.state.section),null})),OQ(this,"getContextMenuItems",(e=>{const t=!1===this.state.drawerIsOpen&&Boolean(this.state.currentSpeeddial)&&!1===W.ZP.isGuestSession(this.context.vivaldiWindowId),n=!1===this.state.drawerIsOpen&&!this.state.currentSpeeddial&&!1===W.ZP.isGuestSession(this.context.vivaldiWindowId),s=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL":return{handler:this.toggleStartpageDrawer,visible:t,...s(e,{})};case"CONTEXT_ADD_FOLDER_TO_SPEEDDIAL":return{handler:this.createSpeedDialSet,visible:n,...s(e,{})};case"CONTEXT_PASTE":return{handler:this.handlePaste,...s(e,{})};case"CONTEXT_CUSTOMIZE":return{handler:this.customize,visible:!W.ZP.isGuestSession(this.context.vivaldiWindowId),...s(e,{})};default:return Promise.resolve({...s(e,{})})}}))})),OQ(this,"onContextMenu",(e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getContextMenuItems("startpage").then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))}));const n=tn.ZP.getSpeeddialFolders(),i=n[0],r=(0,re.JD)(),a=this.props.prefValues[P.kTabsBarWidth],o=this.props.prefValues[P.kTabsBarPosition],l="left"===o||"right"===o?a:0;this.state={section:e.view,bookmarksAvailable:tn.ZP.hasBeenInitialized(),speeddialFolders:n,menuSpeeddial:i,currentSpeeddial:i,drawerIsOpen:!1,awaitingInitialEditId:"",initialEditSpeedDialSet:"",viewWidth:t.innerWidth-r-l,viewHeight:t.innerHeight,wallpaperId:lr()(),cutIds:tn.ZP.getCutIds()}}componentDidMount(){tn.ZP.addChangeListener(this._onStoreChange),ah.addChangeListener(this._onTaskStoreChange)}componentWillUnmount(){tn.ZP.removeChangeListener(this._onStoreChange),ah.removeChangeListener(this._onTaskStoreChange),Wl.Z.unbind("esc",this.closeStartpageDrawer)}componentDidUpdate(e,t){t.drawerIsOpen!==this.state.drawerIsOpen&&(this.state.drawerIsOpen?Wl.Z.bind("esc",this.closeStartpageDrawer):Wl.Z.unbind("esc",this.closeStartpageDrawer)),e.view!==this.props.view&&this.setState({section:this.props.view})}render(){if(!this.props.open)return null;const e=W.ZP.isIncognito(this.context.vivaldiWindowId);return s.createElement(ei,{ref:"startpage",className:"startpage",onResize:this.onResize,__source:{fileName:MQ,lineNumber:533,columnNumber:7}},("on"===this.props.prefValues[P.kStartpageNavigation]||"speed_dial_only"===this.props.prefValues[P.kStartpageNavigation]&&this.state.section===HI.SpeedDial)&&s.createElement(PQ,{openMenuItem:this.openMenuItem,section:this.state.section,speedDialSet:this.state.speeddialFolders,speedDialSetNode:this.state.menuSpeeddial,createSpeedDialSet:this.createSpeedDialSet,initialEditSpeedDialSet:this.state.initialEditSpeedDialSet,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],__source:{fileName:MQ,lineNumber:541,columnNumber:11}}),s.createElement("div",{className:"startpage-content",onContextMenu:this.state.section===HI.SpeedDial?this.onContextMenu:null,onDoubleClick:this.handleDoubleClick,__source:{fileName:MQ,lineNumber:552,columnNumber:9}},s.createElement("div",{className:"sdwrapper",ref:"sdWrapper",__source:{fileName:MQ,lineNumber:558,columnNumber:11}},this.renderSection(e)),this.state.section===HI.SpeedDial&&this.props.prefValues[P.kStartpageSpeedDialGameButtonShow]&&s.createElement("div",{className:"StartPage-GameButton",__source:{fileName:MQ,lineNumber:566,columnNumber:13}},s.createElement(pm,{isStartPage:!0,__source:{fileName:MQ,lineNumber:567,columnNumber:15}}))),s.createElement(DQ.Z,{className:"startpage-drawer-wrapper",__source:{fileName:MQ,lineNumber:572,columnNumber:9}},this.state.section===HI.SpeedDial&&this.state.drawerIsOpen&&s.createElement(io.Z,{classNames:"startpage-drawer-transition",timeout:{enter:500,exit:200},__source:{fileName:MQ,lineNumber:575,columnNumber:11}},s.createElement(tQ,{node:this.state.currentSpeeddial,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],maxWidth:this.state.viewWidth,onSpeedDialDrawerDone:this.onSpeedDialDrawerDone,__source:{fileName:MQ,lineNumber:578,columnNumber:13}}))))}}OQ(LQ,"contextType",Vs.Z);const RQ=(0,bi.Z)(LQ,xQ);var BQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themecolors\\ToolbarDemo.jsx";const FQ=[cn.mgF,cn.jtA,cn.PaK,cn.CLf,cn.bcq,cn.yt5,cn.izi,cn.hcy,cn.lvj,cn.cyI,cn.LaO,cn.bqs,cn.NxY,cn.zAT,cn.P3X,cn.ZU6,cn.JJT,cn.wp6,cn.hYC,cn.Xgf,cn.ySD,cn.cMC],UQ={small:"toolbar toolbar-statusbar",medium:"toolbar toolbar-default",large:"toolbar toolbar-mainbar"};class VQ extends s.PureComponent{render(){return s.createElement(s.Fragment,null,s.createElement("h1",{__source:{fileName:BQ,lineNumber:86,columnNumber:7}},(0,ue.Z)("Toolbar Test Page")),s.createElement("div",{__source:{fileName:BQ,lineNumber:90,columnNumber:7}},Object.keys(UQ).map((e=>s.createElement("div",{key:e,className:UQ[e],__source:{fileName:BQ,lineNumber:93,columnNumber:9}},FQ.map(((t,n)=>s.createElement(ko,{key:n,tooltip:"Test for icon",image:t[e],__source:{fileName:BQ,lineNumber:95,columnNumber:13}}))))))))}}const HQ=(0,bi.Z)(VQ,[]);var WQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themecolors\\ThemeColors.jsx";function zQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GQ(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,KQ(e,t,"set"),n),n}function KQ(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var jQ=new WeakMap;class YQ extends s.PureComponent{constructor(...e){super(...e),jQ.set(this,{writable:!0,value:void 0}),zQ(this,"state",{windowStyle:Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||{}}),zQ(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId);this.setState({windowStyle:e})}))}componentDidMount(){GQ(this,jQ,Z.Z.addListener(this.onThemeStoreChanged))}componentWillUnmount(){var e,t;(e=this,t=jQ,function(e,t){return t.get?t.get.call(e):t.value}(e,KQ(e,t,"get"))).remove()}render(){const e=Object.entries(this.state.windowStyle),t=e.filter((([e,t])=>e.includes("colorSuccess")||e.includes("colorWarning")||e.includes("colorError"))),n=e.filter((([e,t])=>e.includes("radius"))),i=e.filter((([e,t])=>e.includes("colorBg"))),r=e.filter((([e,t])=>e.includes("colorFg"))),a=e.filter((([e,t])=>e.includes("colorAccent"))),o=e.filter((([e,t])=>e.includes("colorHighlight"))),l=e.filter((([e,t])=>e.includes("colorBorder")));return s.createElement("div",{className:"theme-test",tabIndex:"0",__source:{fileName:WQ,lineNumber:50,columnNumber:7}},s.createElement(HQ,{__source:{fileName:WQ,lineNumber:51,columnNumber:9}}),s.createElement("h1",{__source:{fileName:WQ,lineNumber:52,columnNumber:9}},(0,ue.Z)("Theme Color Test Page")),s.createElement("p",{__source:{fileName:WQ,lineNumber:55,columnNumber:9}},(0,ue.Z)("$1 color and $2 radius variables created",[Object.entries(this.state.windowStyle).length,n.length])),s.createElement("div",{__source:{fileName:WQ,lineNumber:62,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:63,columnNumber:11}},`${(0,ue.Z)("Info Colors")} (${t.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:64,columnNumber:11}},t.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:66,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:67,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:68,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:74,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:75,columnNumber:11}},`${(0,ue.Z)("Foreground Colors")} (${r.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:76,columnNumber:11}},r.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:78,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:79,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:80,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:86,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:87,columnNumber:11}},`${(0,ue.Z)("Background Colors")} (${i.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:88,columnNumber:11}},i.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:90,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:91,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:92,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:98,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:99,columnNumber:11}},`${(0,ue.Z)("Border Colors")} (${l.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:100,columnNumber:11}},l.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:102,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:103,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:104,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:111,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:112,columnNumber:11}},`${(0,ue.Z)("Accent Colors")} (${a.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:113,columnNumber:11}},a.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:115,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:116,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:117,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:123,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:124,columnNumber:11}},`${(0,ue.Z)("Highlight Colors")} (${o.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:125,columnNumber:11}},o.map((([e,t])=>s.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:WQ,lineNumber:127,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:128,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:129,columnNumber:17}})))))),s.createElement("div",{__source:{fileName:WQ,lineNumber:135,columnNumber:9}},s.createElement("h2",{__source:{fileName:WQ,lineNumber:136,columnNumber:11}},`${(0,ue.Z)("Border radius")} (${n.length})`),s.createElement("div",{className:"list",__source:{fileName:WQ,lineNumber:137,columnNumber:11}},n.map((([e,t])=>s.createElement("div",{key:e,style:{radius:t},__source:{fileName:WQ,lineNumber:139,columnNumber:15}},s.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:WQ,lineNumber:140,columnNumber:17}}),s.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:WQ,lineNumber:141,columnNumber:17}})))))))}}zQ(YQ,"contextType",Vs.Z);const $Q=YQ;var XQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomeCard.jsx";class QQ extends s.Component{render(){const e=this.props.style||{};return this.props.backgroundImage&&(e.backgroundImage=`url(${this.props.backgroundImage})`),s.createElement("button",{className:bn()({"welcome-card":!0,"card-has-background":this.props.backgroundImage,"card-has-image-zoom":this.props.hasImageZoom,"card-is-done":this.props.done,"card-is-selected":this.props.selected}),disabled:this.props.done,onClick:this.props.onClick,title:this.props.tooltip?this.props.title+"\n"+this.props.tooltip:this.props.title,style:e,__source:{fileName:XQ,lineNumber:30,columnNumber:7}},s.createElement("div",{className:"card-outline",__source:{fileName:XQ,lineNumber:46,columnNumber:9}}),this.props.image&&s.createElement("div",{className:"card-image",__source:{fileName:XQ,lineNumber:49,columnNumber:11}},s.createElement("img",{src:this.props.image,height:"78",width:"78",__source:{fileName:XQ,lineNumber:50,columnNumber:13}})),this.props.svg&&s.createElement("div",{className:"card-image",dangerouslySetInnerHTML:{__html:this.props.svg},__source:{fileName:XQ,lineNumber:56,columnNumber:11}}),this.props.renderContent&&this.props.renderContent(),s.createElement("div",{className:"card-text",__source:{fileName:XQ,lineNumber:64,columnNumber:9}},this.props.title))}}const qQ=QQ;var JQ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageImport.jsx";function eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const tq=[{names:["chrome"],imageName:"welcomepage-chrome.svg"},{names:["chromium"],imageName:"welcomepage-chromium.svg"},{names:["firefox"],imageName:"welcomepage-firefox.svg"},{names:["opera 12"],imageName:"welcomepage-opera-12.svg"},{names:["opera"],imageName:"welcomepage-opera.svg"},{names:["safari"],imageName:"welcomepage-safari.svg"},{names:["edge legacy"],imageName:"welcomepage-edge.svg"},{names:["explorer"],imageName:"welcomepage-explorer.svg"},{names:["vivaldi"],imageName:"welcomepage-vivaldi.svg"},{names:["brave"],imageName:"welcomepage-brave.svg"},{names:["edge"],imageName:"welcomepage-edge-chromium.svg"},{names:["yandex","яндекс"],imageName:"welcomepage-yandex.svg"}],nq=["safari","edge","explorer"];class sq extends s.Component{constructor(e){super(e),eq(this,"toggleImport",(e=>{const{toImport:t}=this.state;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({toImport:t})})),eq(this,"importSelected",(()=>{this.startImport(this.state.toImport[0]),this.toggleImport(this.state.toImport[0])})),eq(this,"onImportEnded",(e=>{const t=this.state.profileStatus.concat([]);for(let n=0;n<this.state.profileStatus.length;n++)"STARTED"===t[n]&&(t[n]=0===e?"COMPLETED":"FAILED");0===e?this.setState({error:null,profileStatus:t}):this.setState({error:(0,ue.Z)("An error occurred during import"),profileStatus:t}),this.state.toImport.length>0&&this.importSelected()})),this.state={error:null,profileStatus:[],profiles:[],toImport:[]}}componentDidMount(){b.Z.importData.getProfiles((e=>{this.setState({profileStatus:e.map((()=>"IDLE")),profiles:e})})),b.Z.importData.onImportEnded.addListener(this.onImportEnded)}componentWillUnmount(){b.Z.importData.onImportEnded.removeListener(this.onImportEnded)}startImport(e){const t=this.state.profiles[e];let n="";t.UserProfiles&&t.UserProfiles[0]&&t.UserProfiles[0].profileName&&(n=t.UserProfiles[0].profileName),this.setState((t=>{const n=t.profileStatus.concat([]);return n[e]="STARTED",{profileStatus:n}}),(()=>{b.Z.importData.startImport([e.toString(),t.history.toString(),t.favorites.toString(),t.passwords.toString(),t.search.toString(),t.notes.toString(),true.toString(),n.toString(),t.speeddial.toString()],"","",qo.default)}))}render(){return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:JQ,lineNumber:156,columnNumber:7}},s.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:JQ,lineNumber:157,columnNumber:9}},s.createElement("h1",{__source:{fileName:JQ,lineNumber:158,columnNumber:11}},this.props.title),s.createElement("p",{__source:{fileName:JQ,lineNumber:161,columnNumber:11}},(0,ue.Z)("To import data from another browser, select it below and press Import.")),s.createElement("p",{__source:{fileName:JQ,lineNumber:162,columnNumber:11}},(0,ue.Z)("For more choices see Import in the File menu or Quick Commands.")),s.createElement("div",{className:"cards-container",__source:{fileName:JQ,lineNumber:164,columnNumber:11}},this.state.profiles.map(((e,t)=>{const{name:n,imageName:i}=function(e){const t=e.toLowerCase();for(let e=0;e<tq.length;e++)for(let n=0;n<tq[e].names.length;n++)if(t.includes(tq[e].names[n]))return{name:tq[e].names[n],imageName:tq[e].imageName};return{name:e,imageName:""}}(e.name),r=this.state.profileStatus[t];return e.hasDefaultInstall||nq.includes(n)?s.createElement(qQ,{key:t,done:"COMPLETED"===r,onClick:()=>this.toggleImport(t),selected:this.state.toImport.includes(t),title:"COMPLETED"===r?(0,ue.Z)("Imported"):e.name,image:`resources/${i}`,__source:{fileName:JQ,lineNumber:174,columnNumber:17}}):null}))),s.createElement("p",{className:"pad-top",__source:{fileName:JQ,lineNumber:188,columnNumber:11}},s.createElement("input",{type:"submit",className:"welcome-button",onClick:this.importSelected,disabled:0===this.state.toImport.length,value:(0,ue.Z)("Import"),__source:{fileName:JQ,lineNumber:189,columnNumber:13}}),s.createElement("button",{tabIndex:0,className:"welcome-button primary pad-left",onClick:this.props.continue,__source:{fileName:JQ,lineNumber:196,columnNumber:13}},this.props.continueText)),this.state.error&&s.createElement("p",{__source:{fileName:JQ,lineNumber:205,columnNumber:13}},this.state.error)))}}eq(sq,"contextType",Vs.Z);const iq=sq;var rq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePagePersonalize.jsx";const aq=[P.kThemeScheduleEnabled,P.kThemeScheduleOS,P.kThemeScheduleTimeline,P.kThemesCurrent,P.kThemesSystem];class oq extends s.Component{constructor(...e){var t,n,s;super(...e),s=()=>{const e="system"===this.props.prefValues[P.kThemeScheduleEnabled]?"off":"system";st.Z.set(P.kThemeScheduleEnabled,e)},(n="toggleOSSchedule")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){const{prefValues:e}=this.props,t=Qo.Z.getCurrentIdWithoutPreview();return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:rq,lineNumber:51,columnNumber:7}},s.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:rq,lineNumber:53,columnNumber:9}},s.createElement("h1",{__source:{fileName:rq,lineNumber:55,columnNumber:11}},this.props.title),s.createElement("p",{__source:{fileName:rq,lineNumber:56,columnNumber:11}},(0,ue.Z)("Vivaldi will by default change colors with the operating system. For more themes, to create your own and more fine-grained control head over to Settings.")),s.createElement("label",{className:"welcome-pref-checkbox",__source:{fileName:rq,lineNumber:60,columnNumber:11}},s.createElement(gy,{value:"system",checked:"system"===e[P.kThemeScheduleEnabled],onChange:this.toggleOSSchedule,__source:{fileName:rq,lineNumber:61,columnNumber:13}}),s.createElement("span",{__source:{fileName:rq,lineNumber:66,columnNumber:13}},(0,ue.Z)("Use Operating System Theme"))),s.createElement("div",{className:"cards-container",__source:{fileName:rq,lineNumber:68,columnNumber:11}},e[P.kThemesSystem].slice(0,8).map((e=>{const n=e.id===t,i=bn()("ThemePreview","ThemePreview-Welcome","welcome-card",{"card-is-selected":n});return s.createElement("div",{key:e.id,onClick:()=>Qo.Z.setTheme(e.id),__source:{fileName:rq,lineNumber:81,columnNumber:19}},s.createElement(AV,{classNames:i,theme:e,welcomePage:!0,isCurrent:!1,isSystem:!0,__source:{fileName:rq,lineNumber:86,columnNumber:21}}))}))),s.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:rq,lineNumber:98,columnNumber:11}},this.props.continueText)))}}const lq=(0,bi.Z)(oq,aq);var cq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTabs.jsx";const uq=[P.kTabsBarPosition],mq={top:{title:(0,ue.Z)("Top"),image:n(48753)},left:{title:(0,ue.Z)("Left"),image:n(31614)},bottom:{title:(0,ue.Z)("Bottom"),image:n(34511)},right:{title:(0,ue.Z)("Right"),image:n(76201)}};class dq extends s.Component{constructor(...e){var t,n,s;super(...e),s=e=>{st.Z.set(P.kTabsBarPosition,e)},(n="setPosition")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:cq,lineNumber:51,columnNumber:7}},s.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:cq,lineNumber:52,columnNumber:9}},s.createElement("h1",{__source:{fileName:cq,lineNumber:53,columnNumber:11}},this.props.title),s.createElement("p",{__source:{fileName:cq,lineNumber:56,columnNumber:11}},(0,ue.Z)("Where would you like your Tab Bar? Experiment with the options below to find a layout that fits.")),s.createElement("div",{className:"cards-container",__source:{fileName:cq,lineNumber:60,columnNumber:11}},Object.keys(mq).map((e=>s.createElement(qQ,{key:e,onClick:this.setPosition.bind(this,e),title:mq[e].title,selected:e===this.props.prefValues[P.kTabsBarPosition],svg:mq[e].image,__source:{fileName:cq,lineNumber:62,columnNumber:15}})))),s.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:cq,lineNumber:71,columnNumber:11}},this.props.continueText)))}}const hq=(0,bi.Z)(dq,uq);var pq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTouch.jsx";class gq extends s.Component{render(){return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:pq,lineNumber:18,columnNumber:7}},s.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:pq,lineNumber:19,columnNumber:9}},s.createElement("h1",{__source:{fileName:pq,lineNumber:20,columnNumber:11}},this.props.title),s.createElement("p",{__source:{fileName:pq,lineNumber:23,columnNumber:11}},(0,ue.Z)("Want to get the most out of your new browser? Here are three popular features you can try right away. To see other helpful features, head over to vivaldi.com")),s.createElement("div",{className:"cards-container welcome-intouch",__source:{fileName:pq,lineNumber:27,columnNumber:13}},s.createElement(qQ,{onClick:()=>{$.Z.openURL("http://vvld.in/welcomepage-notes")},svg:n(17349),title:(0,ue.Z)("Notes"),__source:{fileName:pq,lineNumber:29,columnNumber:15}}),s.createElement(qQ,{onClick:()=>{$.Z.openURL("http://vvld.in/welcomepage-webpanels")},svg:n(33427),title:(0,ue.Z)("Web Panels"),__source:{fileName:pq,lineNumber:36,columnNumber:15}}),s.createElement(qQ,{onClick:()=>{$.Z.openURL("http://vvld.in/welcomepage-tabtiling")},svg:n(4798),title:(0,ue.Z)("Tab Tiling"),__source:{fileName:pq,lineNumber:43,columnNumber:15}})),s.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:pq,lineNumber:52,columnNumber:11}},this.props.continueText)))}}const bq=gq;var Nq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTrackerAndAd.jsx";function fq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _q extends s.Component{constructor(...e){super(...e),fq(this,"state",{trackerBlockingEnabled:!1,adBlockingEnabled:!1}),fq(this,"updateRules",(()=>{["ad_blocking","tracking"].forEach((e=>{b.Z.contentBlocking.getActiveExceptionsList(e,(t=>{const n="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";this.setState({[n]:"exempt_list"===t})}))}))})),fq(this,"setNoBlocking",(()=>{b.Z.contentBlocking.setActiveExceptionsList("tracking","process_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()})),fq(this,"setTrackerBlocking",(()=>{b.Z.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()})),fq(this,"setTrackerAndAdBlocking",(()=>{b.Z.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),b.Z.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list"),this.updateRules()})),fq(this,"getBlockLevel",(()=>{let e=0;return this.state.trackerBlockingEnabled&&(e=1),this.state.trackerBlockingEnabled&&this.state.adBlockingEnabled&&(e=2),e}))}componentDidMount(){this.updateRules(),b.Z.contentBlocking.onStateChanged.addListener(this.updateRules)}componentWillUnmount(){b.Z.contentBlocking.onStateChanged.removeListener(this.updateRules)}render(){const e=this.getBlockLevel();return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:Nq,lineNumber:85,columnNumber:7}},s.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Nq,lineNumber:86,columnNumber:9}},s.createElement("h1",{__source:{fileName:Nq,lineNumber:87,columnNumber:11}},this.props.title),s.createElement("p",{__source:{fileName:Nq,lineNumber:90,columnNumber:11}},(0,ue.Z)("Vivaldi has a built-in Tracker and Ad blocker to protect your privacy."),s.createElement("br",{__source:{fileName:Nq,lineNumber:92,columnNumber:13}}),(0,ue.Z)("Select default level of protection.")),s.createElement("div",{className:"cards-container",__source:{fileName:Nq,lineNumber:96,columnNumber:11}},s.createElement(qQ,{onClick:this.setNoBlocking,title:(0,ue.Z)("No Blocking"),hasImageZoom:!0,tooltip:(0,ue.Z)("No content blocking will be applied to any site by default."),selected:0===e,svg:cn.IuZ,style:{"--shieldOpacity":0,"--shieldInnerOpacity":0},__source:{fileName:Nq,lineNumber:97,columnNumber:13}}),s.createElement(qQ,{onClick:this.setTrackerBlocking,title:(0,ue.Z)("Block Trackers"),hasImageZoom:!0,tooltip:(0,ue.Z)("Online trackers collect personal information and browsing habits across multiple sites."),selected:1===e,svg:cn.IuZ,style:{"--shieldOpacity":0,"--shieldInnerOpacity":.65},__source:{fileName:Nq,lineNumber:109,columnNumber:13}}),s.createElement(qQ,{onClick:this.setTrackerAndAdBlocking,title:(0,ue.Z)("Block Trackers and Ads"),hasImageZoom:!0,tooltip:(0,ue.Z)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),selected:2===e,svg:cn.IuZ,style:{"--shieldOpacity":.65,"--shieldInnerOpacity":0},__source:{fileName:Nq,lineNumber:121,columnNumber:13}})),s.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Nq,lineNumber:135,columnNumber:11}},this.props.continueText)))}}const vq=_q;var Eq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomeFeatureCard.jsx";const Cq={tracking:(0,ue.Z)("Does not track you"),adblock:(0,ue.Z)("Ad and Tracker Blocker"),translations:(0,ue.Z)("Translations"),panels:(0,ue.Z)("Panels"),statusbar:(0,ue.Z)("Status bar"),fastforward:(0,ue.Z)("Fast Forward / Rewind"),mail:(0,ue.Z)("Mail"),calendar:(0,ue.Z)("Calendar"),feeds:(0,ue.Z)("Feeds")},wq=({featureList:e,image:t,onClick:n,selected:i,title:r,style:a})=>s.createElement("button",{onClick:n,className:bn()("welcome-feature-card",{"feature-card-is-selected":i}),style:a,__source:{fileName:Eq,lineNumber:31,columnNumber:3}},s.createElement("div",{className:"card-outline",__source:{fileName:Eq,lineNumber:38,columnNumber:5}}),s.createElement("img",{className:"card-image",src:t,height:"280",width:"210",__source:{fileName:Eq,lineNumber:39,columnNumber:5}}),s.createElement("h2",{__source:{fileName:Eq,lineNumber:40,columnNumber:5}},r),s.createElement("ul",{__source:{fileName:Eq,lineNumber:43,columnNumber:5}},Object.keys(Cq).map((t=>s.createElement("li",{key:t,className:bn()("welcome-feature-card-feature",{"welcome-feature-card-feature-enabled":e.includes(t)}),__source:{fileName:Eq,lineNumber:45,columnNumber:9}},Cq[t])))));var yq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageWelcome.jsx";function Sq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tq(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,kq(e,t,"set"),n),n}function kq(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const Iq=["Rewind","FastForward"],Aq={essentials:(0,ue.Z)("Want to get away from your current browser, but not ready to learn a lot of new stuff? Essentials is for you. We hide a lot of the Vivaldi functionality. It’s there if you need it, but not visible. You still get Ad and Tracker Blocking as well as translations... and a browser that does not track you."),classic:(0,ue.Z)("Looking for some new things to play with? Get Classic. The Status Bar and Panel give you easy access to a bunch of new functionality like Capture, Notes, Tab Tiling and Web Panels."),fullyLoaded:(0,ue.Z)("Fully Loaded includes everything from Essentials & Classic, as well as a built-in Mail client, Calendar and Feeds.")},Zq={essentials:["tracking","adblock","translations"],classic:["tracking","adblock","translations","panels","statusbar","fastforward"],fullyLoaded:["tracking","adblock","translations","panels","statusbar","fastforward","mail","calendar","feeds"]},Pq={essentials:"/resources/illustration-essentials-light@2x.png",classic:"/resources/illustration-creative-light@2x.png",fullyLoaded:"/resources/illustration-fully-loaded-light@2x.png"},Dq={essentials:"/resources/illustration-essentials-dark@2x.png",classic:"/resources/illustration-creative-dark@2x.png",fullyLoaded:"/resources/illustration-fully-loaded-dark@2x.png"},Mq=[P.kAddressBarSearchDisplay,P.kDownloadsUsePopout,P.kMailIsTurnedOff,P.kPanelsState,P.kStatusBarDisplay,P.kToolbarsNavigation];function Oq(e,t,n){const s=go.ZP.fgBgHighlight(e,t,n),i={};return Object.keys(s).forEach((e=>{i[`--${e}`]=s[e]})),i}var xq=new WeakMap;class Lq extends s.Component{constructor(e,t){super(e),xq.set(this,{writable:!0,value:void 0}),Sq(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)||no.Z.getDefaultTheme();e!==this.state.windowTheme&&this.setState({windowTheme:e})})),Sq(this,"revertUI",(()=>{st.Z.set(P.kToolbarsNavigation,this.prevToolbarsNavigation),st.Z.set(P.kMailIsTurnedOff,this.prevMailIsTurnedOff),st.Z.set(P.kAddressBarSearchDisplay,this.prevAddressBarSearchDisplay),st.Z.set(P.kStatusBarDisplay,this.prevStatusBarDisplay),"hidden"===this.prevPanelVisibility&&re.ZP.getPanelButtonsVisible()?ie.Z.togglePanel():"switcher"===this.prevPanelVisibility?(ie.Z.showContent(re.ZP.getDefaultPanel()),ie.Z.setContentVisible(!1)):setTimeout((()=>{"hidden"!==this.prevPanelVisibility&&"switcher"!==this.prevPanelVisibility&&ie.Z.showContent(this.prevPanelVisibility)}),32)})),Sq(this,"getIsUIUnchanged",(()=>{const e=this.props.prefValues;let t=re.ZP.getSelectedPanel();return t||(t=re.ZP.getPanelButtonsVisible()?"switcher":"hidden"),e[P.kMailIsTurnedOff]===this.prevMailIsTurnedOff&&(0,nd.default)(e[P.kToolbarsNavigation],this.prevToolbarsNavigation)&&e[P.kAddressBarSearchDisplay]===this.prevAddressBarSearchDisplay&&e[P.kStatusBarDisplay]===this.prevStatusBarDisplay&&t===this.prevPanelVisibility})),Sq(this,"getUIMode",(()=>{const e=this.props.prefValues[P.kAddressBarSearchDisplay],t=this.props.prefValues[P.kStatusBarDisplay],n=this.props.prefValues[P.kToolbarsNavigation],s=this.props.prefValues[P.kMailIsTurnedOff],i=this.props.prefValues[P.kPanelsState].barVisible;return"disabled"!==e||"off"!==t||n.includes("FastForward")||n.includes("Rewind")||i||!s?"field"===e&&"on"===t&&n.includes("FastForward")&&n.includes("Rewind")&&i&&s?"classic":"field"===e&&"on"===t&&n.includes("FastForward")&&n.includes("Rewind")&&i&&!s?"fullyLoaded":void 0:"essentials"})),Sq(this,"setEssentials",(()=>{const e=A.ZP.getDefault(P.kToolbarsNavigation).filter((e=>!Iq.includes(e)));st.Z.set(P.kToolbarsNavigation,e),st.Z.set(P.kAddressBarSearchDisplay,"disabled"),st.Z.set(P.kDownloadsUsePopout,!0),st.Z.set(P.kStatusBarDisplay,"off"),st.Z.set(P.kPanelsTranslateRedirect,!1),st.Z.set(P.kMailIsTurnedOff,!0),re.ZP.getPanelButtonsVisible()&&ie.Z.togglePanel()})),Sq(this,"setClassic",(()=>{const e=A.ZP.getDefault(P.kToolbarsNavigation);st.Z.set(P.kToolbarsNavigation,e),st.Z.set(P.kMailIsTurnedOff,!0),st.Z.set(P.kAddressBarSearchDisplay,"field"),st.Z.set(P.kDownloadsUsePopout,!1),st.Z.set(P.kStatusBarDisplay,"on"),st.Z.set(P.kPanelsTranslateRedirect,!0),ie.Z.showContent(re.ZP.getDefaultPanel()),ie.Z.setContentVisible(!1)})),Sq(this,"setFullyLoaded",(()=>{const e=A.ZP.getDefault(P.kToolbarsNavigation);st.Z.set(P.kToolbarsNavigation,e),st.Z.set(P.kMailIsTurnedOff,!1),st.Z.set(P.kAddressBarSearchDisplay,"field"),st.Z.set(P.kDownloadsUsePopout,!1),st.Z.set(P.kStatusBarDisplay,"on"),st.Z.set(P.kPanelsTranslateRedirect,!0),setTimeout((()=>ie.Z.showContent("mail")),32)}));let n=re.ZP.getSelectedPanel();n||(n=re.ZP.getPanelButtonsVisible()?"switcher":"hidden"),this.prevAddressBarSearchDisplay=e.prefValues[P.kAddressBarSearchDisplay],this.prevMailIsTurnedOff=e.prefValues[P.kMailIsTurnedOff],this.prevToolbarsNavigation=e.prefValues[P.kToolbarsNavigation],this.prevPanelVisibility=n,this.prevStatusBarDisplay=e.prefValues[P.kStatusBarDisplay],this.state={windowTheme:Z.Z.getState().windowThemes.get(t.vivaldiWindowId)||no.Z.getDefaultTheme()}}componentDidMount(){Tq(this,xq,Z.Z.addListener(this.onThemeStoreChanged))}componentWillUnmount(){var e,t;(e=this,t=xq,function(e,t){return t.get?t.get.call(e):t.value}(e,kq(e,t,"get"))).remove()}render(){const e=this.getUIMode(),t=to()(this.state.windowTheme.colorFg),n=to()(this.state.windowTheme.colorBg),i=t.luminance()>go.$J?Dq:Pq;return s.createElement("div",{className:"welcome-content-outer",__source:{fileName:yq,lineNumber:281,columnNumber:7}},s.createElement("div",{className:bn()({"welcome-content-inner":!0,"welcome-center-horizontal":!0,"welcome-center-vertical":!0}),__source:{fileName:yq,lineNumber:282,columnNumber:9}},s.createElement("h1",{__source:{fileName:yq,lineNumber:288,columnNumber:11}},this.props.title),s.createElement("p",{style:{maxWidth:"75ch",minHeight:"5em",opacity:.75},__source:{fileName:yq,lineNumber:291,columnNumber:11}},e?Aq[e]:(0,ue.Z)("From a focused, minimalist experience to a full-on browsing powerhouse – take your pick below to get started.")),s.createElement("div",{className:"feature-cards-container",__source:{fileName:yq,lineNumber:302,columnNumber:11}},s.createElement(wq,{onClick:this.setEssentials,title:(0,ue.Z)("Essentials"),featureList:Zq.essentials,selected:"essentials"===e,image:i.essentials,style:Oq(t,n,to()("#4c70f0")),__source:{fileName:yq,lineNumber:303,columnNumber:13}}),s.createElement(wq,{onClick:this.setClassic,title:(0,ue.Z)("Classic"),featureList:Zq.classic,selected:"classic"===e,image:i.classic,style:Oq(t,n,to()("#43c774")),__source:{fileName:yq,lineNumber:311,columnNumber:13}}),s.createElement(wq,{onClick:this.setFullyLoaded,title:(0,ue.Z)("Fully Loaded"),featureList:Zq.fullyLoaded,selected:"fullyLoaded"===e,image:i.fullyLoaded,style:Oq(t,n,to()("#EF3939")),__source:{fileName:yq,lineNumber:319,columnNumber:13}})),s.createElement("button",{tabIndex:0,disabled:this.getIsUIUnchanged(),className:"welcome-button",onClick:this.revertUI,__source:{fileName:yq,lineNumber:331,columnNumber:11}},(0,ue.Z)("Revert")),s.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:yq,lineNumber:339,columnNumber:11}},this.props.continueText)))}}Sq(Lq,"contextType",Vs.Z);const Rq=(0,bi.Z)(Lq,Mq),Bq={welcome_four:(0,ue.Z)("How much Vivaldi do you want?"),import_data:(0,ue.Z)("title","Import from Applications or Files"),tracker_and_ad:(0,ue.Z)("browser","Tracker and Ad Blocking"),personalize:(0,ue.Z)("Pick a Theme"),tabs:(0,ue.Z)("Position Your Tabs"),touch:(0,ue.Z)("Three Things to Try Right Away")},Fq={getUnseenPageKeys:()=>Object.keys(Bq).filter((e=>!A.ZP.get(P.kWelcomeSeenPages).includes(e))),hasUnseenPages:()=>Fq.getUnseenPageKeys().length>0,getUnreadPageKeys:()=>Object.keys(Bq).filter((e=>!A.ZP.get(P.kWelcomeReadPages).includes(e))),hasUnreadPages:()=>Fq.getUnreadPageKeys().length>0,markAllAsSeen:()=>{const e=A.ZP.get(P.kWelcomeSeenPages),t=Fq.getUnseenPageKeys();st.Z.set(P.kWelcomeSeenPages,e.concat(t))}},Uq=Fq;var Vq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\welcome.jsx";function Hq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wq=[P.kWelcomeReadPages];class zq extends s.Component{constructor(e){super(e),Hq(this,"setPage",(e=>()=>{this.scrollToTop(),this.setState({currentPageKey:e})})),Hq(this,"getNextUnread",(e=>{const t=Object.keys(Bq),n=this.props.prefValues[P.kWelcomeReadPages],s=e?t.indexOf(e):-1;for(let e=-1;e<t.length;e++){const i=e+1;if(t[i]&&!n.includes(t[i])&&i>s)return t[i]}return Uq.getUnreadPageKeys()[0]})),Hq(this,"getNextPageKey",(()=>{const e=Object.keys(Bq);return e.find(((t,n)=>this.state.currentPageKey===e[n-1]))})),Hq(this,"setCurrentPageRead",(()=>{const e=this.props.prefValues[P.kWelcomeReadPages],t=this.state.currentPageKey;e.includes(t)||st.Z.set(P.kWelcomeReadPages,e.concat([t]))})),Hq(this,"setAllPagesRead",(()=>{const e=Uq.getUnreadPageKeys(),t=this.props.prefValues[P.kWelcomeReadPages];st.Z.set(P.kWelcomeReadPages,t.concat(e)),$.Z.openURL(V.ZP.getDefaultStartpage(),{inCurrent:!0})})),Hq(this,"continue",(()=>{this.setCurrentPageRead(),Uq.getUnreadPageKeys().length>0?(this.scrollToTop(),this.setState((e=>({currentPageKey:this.getNextUnread(e.currentPageKey)})))):$.Z.openURL(V.ZP.getDefaultStartpage(),{inCurrent:!0})})),Hq(this,"nextPage",(()=>{this.scrollToTop(),this.setState({currentPageKey:this.getNextPageKey()})})),Hq(this,"getContinueText",(()=>{const e=Uq.getUnreadPageKeys(),t=e.length,n=!e.includes(this.state.currentPageKey);return t===Object.keys(Bq).length-1&&this.state.currentPageKey===Object.keys(Bq)[0]?(0,ue.Z)("Let’s Go"):t>1||1===t&&n?(0,ue.Z)("Continue"):(0,ue.Z)("Finish")})),Hq(this,"scrollToTop",(()=>{const e=this.refs.contentArea&&pn.findDOMNode(this.refs.contentArea);e&&e.scrollTo({behavior:"smooth",top:0})}));const t=this.getNextUnread(),n=Object.keys(Bq);this.state={currentPageKey:t||n[n.length-1]},Uq.markAllAsSeen()}render(){const e=this.getContinueText(),t="personalize"===this.state.currentPageKey,{prefValues:n}=this.props,i={enter:1e3,exit:1e3};return s.createElement("div",{className:bn()("welcome-wrapper",{"welcome-soft-background":!t}),__source:{fileName:Vq,lineNumber:156,columnNumber:7}},s.createElement(DQ.Z,{className:"welcome-content",ref:"contentArea",__source:{fileName:Vq,lineNumber:160,columnNumber:9}},"welcome_four"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:165,columnNumber:13}},s.createElement(Rq,{continue:this.continue,continueText:e,setAllPagesRead:this.setAllPagesRead,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:166,columnNumber:15}})),"tracker_and_ad"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:175,columnNumber:13}},s.createElement(vq,{continue:this.continue,continueText:e,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:176,columnNumber:15}})),"import_data"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:184,columnNumber:13}},s.createElement(iq,{continue:this.continue,continueText:e,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:185,columnNumber:15}})),"personalize"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:193,columnNumber:13}},s.createElement(lq,{continue:this.continue,continueText:e,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:194,columnNumber:15}})),"tabs"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:202,columnNumber:13}},s.createElement(hq,{continue:this.continue,continueText:e,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:203,columnNumber:15}})),"touch"===this.state.currentPageKey&&s.createElement(io.Z,{classNames:"welcome-page",timeout:i,__source:{fileName:Vq,lineNumber:211,columnNumber:13}},s.createElement(bq,{continue:this.continue,continueText:e,title:Bq[this.state.currentPageKey],__source:{fileName:Vq,lineNumber:212,columnNumber:15}}))),s.createElement("div",{className:"welcome-navigation",__source:{fileName:Vq,lineNumber:221,columnNumber:9}},Object.keys(Bq).map((e=>s.createElement("button",{key:e,onClick:this.setPage(e),title:Bq[e],tabIndex:-1,className:bn()("nav-page",{"nav-page-current":e===this.state.currentPageKey,"nav-page-completed":e!==this.state.currentPageKey&&n[P.kWelcomeReadPages].includes(e)}),__source:{fileName:Vq,lineNumber:223,columnNumber:13}})))))}}const Gq=(0,bi.Z)(zq,Wq);var Kq="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\InternalPage.jsx";function jq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Yq extends s.PureComponent{constructor(...e){super(...e),jq(this,"refComponent",s.createRef()),jq(this,"focus",(()=>{const e=pn.findDOMNode(this.refComponent.current);if(!(e instanceof this.context.HTMLDivElement))return;if(e.contains(this.context.document.activeElement))return;const t=e.querySelector('[tabindex="0"]:not(.no-page-focus)');t?.focus()})),jq(this,"getComponent",(()=>{const{url:e}=this.props;if(Pt.jk.matchInternal("welcome",e))return s.createElement(Gq,{key:"welcome",__source:{fileName:Kq,lineNumber:71,columnNumber:14}});if(Pt.jk.matchInternal("themecolors",e))return s.createElement($Q,{key:"welcome",__source:{fileName:Kq,lineNumber:73,columnNumber:14}});if(Pt.jk.matchInternal("settings",e))return s.createElement(EW,{url:e,key:"settings",__source:{fileName:Kq,lineNumber:75,columnNumber:14}});if(Pt.jk.matchInternal("experiments",e))return s.createElement(aS,{key:"experiments",__source:{fileName:Kq,lineNumber:77,columnNumber:14}});if(Pt.jk.matchInternal("guest-intro",e))return s.createElement(mS,{key:"guest-intro",__source:{fileName:Kq,lineNumber:79,columnNumber:14}});if(Pt.jk.matchInternal("private-intro",e))return s.createElement(UI,{key:"private-intro",__source:{fileName:Kq,lineNumber:81,columnNumber:14}});if(Pt.jk.matchInternal("actionlog",e))return s.createElement(Iw,{key:"actionlog",__source:{fileName:Kq,lineNumber:83,columnNumber:14}});if(Pt.jk.matchInternal("saga",e))return s.createElement(VI,{__source:{fileName:Kq,lineNumber:85,columnNumber:14}});if(Pt.jk.matchInternal("mailpage",e)){if(A.ZP.get(P.kMailIsTurnedOff))return s.createElement($S,{__source:{fileName:Kq,lineNumber:89,columnNumber:16}});if(Pt.jk.matchUrl(Pt.jk.internalUrl("mailpage","composer"),e)){const t=(0,As.DP)(e);let n;if(t.query)try{const e=JSON.parse(t.query);"object"==typeof e&&(n=e.id)}catch(e){console.warn(e)}return s.createElement(jS,{key:"mail",id:n,mailto:t.mailto,url:e,isActive:this.props.isActive,__source:{fileName:Kq,lineNumber:106,columnNumber:11}})}if(Pt.jk.matchUrl(Pt.jk.internalUrl("mailpage","message"),e)){let t=-1;const n=(0,As.DP)(e);if(n.path){const e=n.path.split("/");2===e.length&&(t=parseInt(e[1]))}return t>-1?s.createElement(Hk,{id:t,isActive:this.props.isActive,key:"mailmessage",__source:{fileName:Kq,lineNumber:125,columnNumber:18}}):s.createElement("div",{key:"mailmessage",__source:{fileName:Kq,lineNumber:130,columnNumber:18}})}return window.isMailWindow&&!W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)?s.createElement(ZI,{id:this.props.pageId,isActive:this.props.isActive,key:"mailview",__source:{fileName:Kq,lineNumber:134,columnNumber:16}}):s.createElement("div",{className:"mail-onboarding-wrapper",key:"mailview",__source:{fileName:Kq,lineNumber:141,columnNumber:11}},s.createElement("div",{className:"mail-onboarding",__source:{fileName:Kq,lineNumber:142,columnNumber:13}},s.createElement("h1",{__source:{fileName:Kq,lineNumber:143,columnNumber:15}},(0,ue.Z)("Mail is in Another Window")),s.createElement("p",{__source:{fileName:Kq,lineNumber:144,columnNumber:15}},(0,ue.Z)("The Vivaldi email client runs in a single window at a time."))))}if(Pt.jk.matchInternal("chat",e)){const t=new URL(e).searchParams.get("path");t&&t.includes("@");return s.createElement("div",{key:"chat",__source:{fileName:Kq,lineNumber:155,columnNumber:16}})}return null}))}render(){const{isVisible:e,url:t}=this.props;let n=HI.SpeedDial;const i=Pt.jk.isStartPage(t);return i&&(Pt.jk.matchInternal("bookmarks",t)?n=HI.Bookmarks:Pt.jk.matchInternal("history",t)?n=HI.History:Pt.jk.matchInternal("calendar",t)?n=HI.Calendar:Pt.jk.matchInternal("notes",t)&&(n=HI.NotesManager)),s.createElement("div",{className:"internal-page",ref:this.refComponent,__source:{fileName:Kq,lineNumber:186,columnNumber:12}},s.createElement(s.Fragment,null,s.createElement(RQ,{open:i&&e||n!==HI.SpeedDial,pageId:this.props.pageId,url:t,view:n,updatePageThumbnailWithActiveWebview:this.props.updatePageThumbnailWithActiveWebview,key:"startpage",isActive:this.props.isActive,__source:{fileName:Kq,lineNumber:197,columnNumber:9}}),this.getComponent()))}}jq(Yq,"contextType",Vs.Z);const $q=Yq;class Xq extends(S()){getInitialState(){return new sa.Map}reduce(e,t){switch(t.actionType){case"PAGE_SET_MEDIASTATE":const{tabId:n,mediastate:s}=t;return function(e,t,n){const s=e.get(n);if(s){const i=s.intersect(t).union(t);return e.set(n,i)}return t.length>0?e.set(n,(0,sa.Set)(t)):e}(e,s,n);case"PAGE_CLOSE":return function(e,t){let n=e;return t.forEach((e=>{n.has(e.id)&&(n=n.remove(e.id))})),n}(e,t.pages);default:return e}}hasMediaState(e,t){const n=this.getState().get(e);return!!n&&n.has(t)}}const Qq=new Xq(m.Z);const qq=new class{foundRssFeeds(e,t){m.Z.dispatch({actionType:Fi.Z.RSS_FEEDS_FOUND,tabId:e,feeds:t})}resetRssFeeds(e){m.Z.dispatch({actionType:Fi.Z.RSS_CLEAR_FEEDS,tabId:e})}};h.Z.webRequest.onResponseStarted.addListener((e=>{if(-1!==e.tabId){const t=(e.responseHeaders||[]).reverse().find((e=>"content-type"===e.name.toLowerCase()));t&&h.Z.tabs.get(e.tabId,(n=>{$.Z.setOriginalContentType(e.tabId,n.windowId,t.value||"")}))}}),{types:["main_frame"],urls:["http://*/*","https://*/*"]},["responseHeaders"]),h.Z.runtime.onMessage.addListener((function(e,t,n){if(e)if(e.feeds)qq.foundRssFeeds(e.tabId,e.feeds);else if(t.tab&&"number"==typeof t.tab.id&&"remove_this_preview"===e.command)h.Z.tabs.sendMessage(t.tab.id,{command:"remove_preview"});else if(t.tab&&"get_tab_url"===e.command)n(t.tab.url);else if(t.tab&&"get_content_type"===e.command){const e=void 0===t.tab.id?-1:t.tab.id,s=V.ZP.getPageById(e);n(s?s.originalContentType:"")}}));const Jq=qq,eJ=new class{setUtilityWebView(e){m.Z.dispatch({actionType:Fi.Z.WEBVIEW_SET_UTILITY_VIEW,webview:e})}};function tJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nJ extends s.PureComponent{constructor(...e){super(...e),tJ(this,"refWebView",s.createRef()),tJ(this,"handleClose",(e=>{this.props.onClose?.(e)})),tJ(this,"handleContentload",(e=>{this.props.onContentLoad?.(e)})),tJ(this,"handleContentscreated",(e=>{this.props.onContentsCreated?.(e)})),tJ(this,"handleCreatesearch",(e=>{this.props.onCreateSearch?.(e)})),tJ(this,"handleContentallowed",(e=>{this.props.onContentAllowed?.(e)})),tJ(this,"handleContentblocked",(e=>{this.props.onContentBlocked?.(e)})),tJ(this,"handleDialog",(e=>{this.props.onDialog?.(e)})),tJ(this,"handleFindupdate",(e=>{this.props.onFindUpdate?.(e)})),tJ(this,"handleFullscreen",(e=>{this.props.onFullscreen?.(e)})),tJ(this,"handleLoadabort",(e=>{this.props.onLoadAbort?.(e)})),tJ(this,"handleLoadcommit",(e=>{this.props.onLoadCommit?.(e)})),tJ(this,"handleLoadprogress",(e=>{this.props.onLoadProgress?.(e)})),tJ(this,"handleLoadredirect",(e=>{this.props.onLoadRedirect?.(e)})),tJ(this,"handleLoadstart",(e=>{this.props.onLoadStart?.(e)})),tJ(this,"handleLoadstop",(e=>{this.props.onLoadStop?.(e)})),tJ(this,"handleNewwindow",(e=>{this.props.onNewWindow?.(e)})),tJ(this,"handlePasteandgo",(e=>{this.props.onPasteAndGo?.(e)})),tJ(this,"handlePermissionrequest",(e=>{this.props.onPermissionRequest?.(e)})),tJ(this,"handleSslstatechanged",(e=>{this.props.onSslStateChanged?.(e)})),tJ(this,"handleTargetUrlChanged",(e=>{this.props.onTargetUrlChanged?.(e)})),tJ(this,"handleWindowblocked",(e=>{this.props.onWindowBlocked?.(e)})),tJ(this,"canGoBack",(()=>!!this.refWebView.current&&this.refWebView.current.canGoBack())),tJ(this,"canGoForward",(()=>!!this.refWebView.current&&this.refWebView.current.canGoForward())),tJ(this,"executeScript",(e=>new Promise(((t,n)=>{this.refWebView.current?.executeScript(e,(e=>{h.Z.runtime.lastError?n(h.Z.runtime.lastError.message):t(e)}))})))),tJ(this,"reload",(()=>{this.refWebView.current?.reload()})),tJ(this,"stop",(()=>{this.refWebView.current?.stop()})),tJ(this,"sendRequest",((e,t,n,s,i)=>{this.refWebView.current?.sendRequest(e,t,n,s,i)}))}componentDidMount(){const e=this.refWebView.current;e&&(e.addEventListener("close",this.handleClose),e.addEventListener("contentload",this.handleContentload),e.addEventListener("contentscreated",this.handleContentscreated),e.addEventListener("createsearch",this.handleCreatesearch),e.addEventListener("contentallowed",this.handleContentallowed),e.addEventListener("contentblocked",this.handleContentblocked),e.addEventListener("dialog",this.handleDialog),e.addEventListener("findupdate",this.handleFindupdate),e.addEventListener("fullscreen",this.handleFullscreen),e.addEventListener("loadabort",this.handleLoadabort),e.addEventListener("loadcommit",this.handleLoadcommit),e.addEventListener("loadprogress",this.handleLoadprogress),e.addEventListener("loadredirect",this.handleLoadredirect),e.addEventListener("loadstart",this.handleLoadstart),e.addEventListener("loadstop",this.handleLoadstop),e.addEventListener("newwindow",this.handleNewwindow),e.addEventListener("pasteandgo",this.handlePasteandgo),e.addEventListener("permissionrequest",this.handlePermissionrequest),e.addEventListener("sslstatechanged",this.handleSslstatechanged),e.addEventListener("targeturlchanged",this.handleTargetUrlChanged),e.addEventListener("windowblocked",this.handleWindowblocked))}componentWillUnmount(){const e=this.refWebView.current;e&&(e.removeEventListener("close",this.handleClose),e.removeEventListener("contentload",this.handleContentload),e.removeEventListener("contentscreated",this.handleContentscreated),e.removeEventListener("createsearch",this.handleCreatesearch),e.removeEventListener("contentallowed",this.handleContentallowed),e.removeEventListener("contentblocked",this.handleContentblocked),e.removeEventListener("dialog",this.handleDialog),e.removeEventListener("findupdate",this.handleFindupdate),e.removeEventListener("fullscreen",this.handleFullscreen),e.removeEventListener("loadabort",this.handleLoadabort),e.removeEventListener("loadcommit",this.handleLoadcommit),e.removeEventListener("loadprogress",this.handleLoadprogress),e.removeEventListener("loadredirect",this.handleLoadredirect),e.removeEventListener("loadstart",this.handleLoadstart),e.removeEventListener("loadstop",this.handleLoadstop),e.removeEventListener("newwindow",this.handleNewwindow),e.removeEventListener("pasteandgo",this.handlePasteandgo),e.removeEventListener("permissionrequest",this.handlePermissionrequest),e.removeEventListener("sslstatechanged",this.handleSslstatechanged),e.removeEventListener("targeturlchanged",this.handleTargetUrlChanged),e.removeEventListener("windowblocked",this.handleWindowblocked))}render(){return s.createElement("webview",{ref:this.refWebView,id:this.props.id,partition:"persist:storage",tab_id:this.props.id,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebView.jsx",lineNumber:381,columnNumber:12}})}}function sJ({pageId:e,url:t,activeElement:n}){if(V.ZP.getPageById(e)?.isMailPage)return"";if(xi.getCapturingState())return"capture";if("quick-command-search"===n?.className)return"quickCommands";let s=!1;try{s=!0===lb.Z.getFindResultsForPage(e).isFindInPageToolbarOpen}catch(e){console.warn(e)}return!0===s?"findInPage":""}var iJ=n(92578),rJ=n(34155),aJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageContent.jsx";function oJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const lJ=[P.kMailIsTurnedOff,P.kRssDetectFeeds,P.kWebpagesReaderControls,P.kWebpagesReaderStyle],cJ=(0,za.Z)((e=>e()));class uJ extends s.PureComponent{constructor(e){super(e),oJ(this,"captureScheduled",!1),oJ(this,"viewUnchangedFlags",{}),oJ(this,"_localStatus",!1),oJ(this,"_devtoolsCloseTimerId",0),oJ(this,"_eventGuard",null),oJ(this,"refInternalPage",s.createRef()),oJ(this,"refWebview",s.createRef()),oJ(this,"_onMediaStateStoreChanged",(()=>{this.setState({mediaState:Qq.getState().get(this.props.id)||(0,sa.Set)()})})),oJ(this,"getWebviewElement",(()=>this.refWebview.current?.refWebView.current)),oJ(this,"clearWebview",(()=>{const e=this.getWebviewElement();e&&uC.clearIfActive(e)})),oJ(this,"toggleImageInspector",(()=>{$.Z.setImageInspector(this.props.id,this.context.vivaldiWindowId,!this.props.showImageInspector)})),oJ(this,"updateViewUnchangedFlag",((e,t)=>{e.isActive===t.isActive&&e.extData.get("tiling")===t.extData.get("tiling")||(this.viewUnchangedFlags={})})),oJ(this,"isDevtoolsDockedAndActive",(()=>"bottom"===this.state.dockingState||"left"===this.state.dockingState||"right"===this.state.dockingState)),oJ(this,"updatePageThumbnailWithActiveWebview",(e=>{var t=!1!==V.ZP.unsafeGetActivePage().get("incognito");const n=this.getWebviewElement();if(n){const s=lr()();this.viewUnchangedFlags[s]=!0===this.props.isActive,setTimeout((()=>{if((0,Pt.cw)(this.props.url))this.viewUnchangedFlags[s]&&n&&qW.getPageThumbnail(n,{compact:!0},(e=>{this.props.isActive&&this.viewUnchangedFlags[s]&&e&&$.Z.setThumbnail(this.props.id,e)}));else{const e={encodeFormat:"jpg",encodeQuality:80,fullPage:!1,width:330,height:270};b.Z.thumbnails.captureTab(this.props.id,e,((e,t)=>{!h.Z.runtime.lastError&&e&&$.Z.setThumbnail(this.props.id,t)}))}}),e);const i=dC.Z.getQueue(this.props.id);if(!t&&i&&i.get("url")===this.props.url){const e=i.get("id");h.Z.bookmarks.get(e,(t=>{if(h.Z.runtime.lastError)console.warn("chrome.bookmarks.get failed:",e,h.Z.runtime.lastError);else{const e=t&&1===t.length?t[0]:null;e&&!e.thumbnail&&n&&qW.getPageThumbnail(n,{compact:!1},(t=>{t&&(this.props.isActive&&e&&this.viewUnchangedFlags&&this.viewUnchangedFlags[s]?h.Z.bookmarks.update(e.id,{thumbnail:t}):console.warn("Cannot update thumbnail as page was not active"))}))}})),mC.Z.remove(this.props.id,e)}}})),oJ(this,"attachEventHandlers",(()=>{lb.Z.addChangeListener(this._onWebpageviewStoreChanged),b.Z.devtoolsPrivate.onDockingSizesChanged.addListener(this.onDockingSizesChanged),b.Z.devtoolsPrivate.onDockingStateChanged.addListener(this.onDockingStateChanged),b.Z.devtoolsPrivate.onClosed.addListener(this.onDevtoolsClosed),b.Z.devtoolsPrivate.onDevtoolsUndocked.addListener(this.onDevtoolsUndocked),b.Z.tabsPrivate.onTabIsAttached.addListener(this.onWebViewElementIsAttached),b.Z.tabsPrivate.onTabIsDetached.addListener(this.onWebViewElementIsDetached)})),oJ(this,"removeEventHandlers",(()=>{lb.Z.removeChangeListener(this._onWebpageviewStoreChanged),b.Z.devtoolsPrivate.onDockingSizesChanged.removeListener(this.onDockingSizesChanged),b.Z.devtoolsPrivate.onDockingStateChanged.removeListener(this.onDockingStateChanged),b.Z.devtoolsPrivate.onClosed.removeListener(this.onDevtoolsClosed),b.Z.devtoolsPrivate.onDevtoolsUndocked.removeListener(this.onDevtoolsUndocked),b.Z.tabsPrivate.onTabIsAttached.removeListener(this.onWebViewElementIsAttached),b.Z.tabsPrivate.onTabIsDetached.removeListener(this.onWebViewElementIsDetached)})),oJ(this,"updateNavigationState",((e,t,n,s)=>{const i={canGoBack:Boolean(this.refWebview.current?.canGoBack()),canGoForward:Boolean(this.refWebview.current?.canGoForward()),webviewUrl:e,isLoading:t,reason:s,trigger:n};"start"!==n&&$.Z.setOrigin(this.props.id,this.context.vivaldiWindowId,""),Up.Z.setNavigationState(this.props.id,this.context.vivaldiWindowId,i)})),oJ(this,"handleClose",(async()=>{if(!await $.Z.closePopupOrSettingsWindow()){await new Promise((e=>setTimeout(e,100)));const e=V.ZP.getPageById(this.props.id);e&&await $.Z.closePage(e)}})),oJ(this,"handleLoadCommit",(e=>{if(!e.isTopLevel||void 0===e.url)return;const{url:t}=e;Jq.resetRssFeeds(this.props.id),(0,Pt.cw)(t)?c.Z.setFastForwardUrl(this.props.id,""):this.injectScripts(this.props.id);const n=this.getWebviewElement();n&&c.Z.setRewindInfo(n,this.props.id),this.updateNavigationState(t,!0,"commit")})),oJ(this,"handleLoadStart",(e=>{if(!e.isTopLevel)return;this.props.extData.get("urlForThumbnail")!==e.url&&$.Z.setThumbnail(this.props.id,null),Up.Z.resetPermissions(this.props.id),this.updateNavigationState(e.url,!0,"start"),Up.Z.resetPageHasBlockedContent(this.props.id),Up.Z.resetBlockedPopups(this.props.id),dl.Z.resetTranslationParameters(this.props.id),this.captureScheduled=!1})),oJ(this,"handleLoadStop",(e=>{this.updateNavigationState(e.target.src,!1,"stop"),this.props.extData.get("thumbnail")||this.updatePageThumbnailWithActiveWebview(0),!1===this.captureScheduled&&(this.captureScheduled=!0,this.updatePageThumbnailWithActiveWebview(5e3))})),oJ(this,"handleLoadRedirected",(e=>{if(e.isTopLevel){const t=e.newUrl,n=e.oldUrl;$.Z.setThumbnail(this.props.id,null),this.captureScheduled=!1,mC.Z.update(this.props.id,n,t)}})),oJ(this,"handleContentAllowed",(e=>{if("midi-sysex"===e.allowedType||"location"===e.allowedType||"notifications"===e.allowedType){const t=this.props.url?new URL(this.props.url).origin:"";Up.Z.setPermission(this.props.id,t,e.allowedType,null,"allowed")}})),oJ(this,"handleContentBlocked",(e=>{if("popups"!==e.blockedType&&"sound"!==e.blockedType)if("midi-sysex"===e.blockedType||"location"===e.blockedType){const t=this.props.url?new URL(this.props.url).origin:"";Up.Z.setPermission(this.props.id,t,e.blockedType,null,"blocked")}else Up.Z.setPageHasBlockedContent(this.props.id,e.blockedType)})),oJ(this,"handleLoadAbort",(e=>{e.preventDefault(),e.isTopLevel&&this.updateNavigationState(e.url,!1,"abort",e.reason)})),oJ(this,"handleOnLoadProgress",(e=>{if((0,Pt.pM)(e.url))return;const t={url:e.url,progress:e.progress,loadedBytes:e.loadedBytes,loadedElements:e.loadedElements,totalElements:e.totalElements};(class{static setProgressState(e,t){m.Z.dispatch({actionType:"PAGE_SET_PROGRESS",pageId:e,progressState:t})}}).setProgressState(this.props.id,t)})),oJ(this,"handleOnFindUpdate",(e=>{$.Z.setFindResults(e)})),oJ(this,"handleOnFullscreen",(e=>{!1===Qq.hasMediaState(this.props.id,"capturing")&&dg.Z.onHTML5FullScreen(e.enterFullscreen,e.windowId),this.setState({tabIsFullscreen:e.enterFullscreen})})),oJ(this,"handleBlockedPopup",(e=>{Up.Z.addBlockedPopupEvent(this.props.id,e)})),oJ(this,"injectScripts",(0,vb.default)((e=>{const t=V.ZP.getPageById(e),n=!this.props.prefValues[P.kMailIsTurnedOff]&&this.props.prefValues[P.kRssDetectFeeds];this.refWebview.current?.executeScript({allFrames:!0,code:`window.__vivaldiPageId = ${e};\n             window.__vivaldiDetectFeeds = ${n.toString()};\n             window.__vivaldiUseBossSelect = ${A.ZP.get(P.kWebpagesAllowSelectionInLinks)};\n             window.__vivaldiUseTranslateSelection =\n                      ${Boolean(!this.props.extData.get("readerMode")&&t&&!(0,Pt.pM)(t.url)).toString()};\n             window.__vivaldiContentScriptsInitialized;`,runAt:"document_start"}).then((t=>{if(t&&t.some((e=>!e)))return this.refWebview.current?.executeScript({file:"inject-root-bundle.js"}).catch((e=>{console.warn("Injecting inject-root-bundle failed:",e)})),this.refWebview.current?.executeScript({allFrames:!0,file:"inject-all-bundle.js"}).then((()=>{c.Z.initTab(e)}))})).catch((e=>{console.warn("Checking for inject-all-bundle failed:",e)})),this.props.extData.get("readerMode")&&this.injectReaderView()}),400)),oJ(this,"injectReaderView",(()=>{const e={code:"/* global chrome */\n\n/* This is the user file part of reader mode, it's injected after the\n   browserjs part of reader mode and does the real injecetion\n   (browserjs only does detection at an earlier stage so that we don't\n   need to wait for the page to load to update the indicator status of\n   the readability of the page */\nconst FEATURE_HIDE_PAGE = true;\n/* Hide page on load for better transition while navigating */\n\nconst AVERAGE_READ_WORDS = 225;\nconst _ = window.Translate; // Add LI to scoring elements; Lower default character threshold (500)\n\nconst TAGS = \"section,h2,h3,h4,h5,h6,p,li,td,pre\";\nconst DEFAULT_TAGS_TO_SCORE = TAGS.toUpperCase().split(\",\");\nconst DEFAULT_CHAR_THRESHOLD = 300;\n\nfunction canSetStyle() {\n  return document && document.documentElement && document.documentElement.style;\n} // TODO: not working after delaying injection in the browserjs part of reader view\n\n\nif (FEATURE_HIDE_PAGE && canSetStyle()) {\n  document.documentElement.style.display = 'none';\n}\n\nconst DEBUG_READABILITY = false;\nconst readabilityCss = `\nhtml {\n  margin: 0;\n  padding: 0;\n}\nbody {\n  color: #111111;\n  background-color: #f6f6f6;\n  font-family: sans-serif;\n  font-size: 1.3em;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.5;\n  margin: 0 auto;\n  padding: 40px 10px 80px;\n  text-orientation: upright;\n  transition:\n    color 200ms cubic-bezier(0.4, 0, 1, 1),\n    background-color 200ms cubic-bezier(0.4, 0, 1, 1);\n}\nbody.vertical {\n  margin: 40px auto 0;\n  padding: 40px 60px 0;\n  max-height: calc(100vh - 120px);\n}\n.entry-content * {\n  max-width: 100%;\n  white-space: normal;\n  line-height: inherit;\n  vertical-align: baseline;\n  background: transparent;\n}\n.entry-content p {\n  margin: 1.5em 0;\n}\nbody.vertical .entry-content p {\n  margin: 0 1.5em;\n}\nh1 {\n  font-size: 1.8em;\n  line-height: 1.35;\n}\nh1, h2, h3, h4, h5, h6, b {\n  font-weight: 700;\n}\nhr {\n  border-style: solid;\n  border-width: 0 0 0.5px 0.5px;\n}\n.byline {\n  font-style: italic;\n}\n.entry-content img {\n  max-width: 100%;\n  height: auto;\n}\nbody.vertical .entry-content img {\n  max-height: 100%;\n  width: auto;\n}\n.entry-content code {\n  font-weight: 500;\n}\n.entry-content pre {\n  font-weight: 300;\n  background-color: rgba(128, 128, 128, 0.05);\n  border: 1px solid rgba(128, 128, 128, 0.1);\n  white-space: pre-wrap;\n  padding: 0.5em;\n  margin: 1.5em 0;\n}\n.entry-content code, .entry-content pre {\n  text-align: left;\n  max-width: 100%;\n  writing-mode: horizontal-tb;\n  overflow: auto;\n  white-space: pre-wrap;\n}\nbody.vertical .entry-content pre {\n  margin: 0 1.5em;\n  max-width: 80%;\n  max-height: 100%;\n}\niframe, textarea, input {\n  display: none;\n}\n`;\n\nfunction __vivaldiGetHTML(article) {\n  const content = window.DOMPurify.sanitize(article.content);\n  const words = article.textContent.split(' ').filter(elem => {\n    return elem.length && !elem.match(/\\r?\\n|\\r/g);\n  });\n  const readingTime = Math.round(words.length / AVERAGE_READ_WORDS);\n\n  const readText = _(\"Read time: $1 minute\", \"Read time: $1 minutes\", [readingTime]);\n\n  const byline = article.byline ? `${article.byline} -` : '';\n  return `<!DOCTYPE html>\n<html dir=\"${article.dir}\"><head>\n<title>${article.title}</title>\n<style>${readabilityCss}</style>\n</head><body>\n<h1>${article.title}</h1>` + `<p class=\"byline\">${byline} ${readText}</p>` + `<hr />\n<article class=\"entry-content\">${content}</article>\n</body></html>`;\n}\n\nfunction ready() {\n  if (typeof document !== 'undefined' && ['complete', 'loaded', 'interactive'].indexOf(document.readyState) > -1) {\n    return true;\n  }\n\n  return false;\n}\n\nlet _numTriesLeft = 5;\n\nfunction onLoad() {\n  if (!window['Readability'] && _numTriesLeft-- > -1) {\n    setTimeout(onLoad, 500);\n  }\n\n  try {\n    if (!window['Readability']) {\n      return;\n    } // TODO: should probably reuse this object when enabling, instead\n    // of running it again via the user script\n\n\n    const {\n      Readability\n    } = window;\n    const readability = new Readability(document.cloneNode(true), {\n      classesToPreserve: DEFAULT_TAGS_TO_SCORE,\n      charThreshold: DEFAULT_CHAR_THRESHOLD,\n      debug: DEBUG_READABILITY\n    });\n    const isProbablyReaderable = window.isProbablyReaderable(document);\n    let article;\n\n    if (isProbablyReaderable) {\n      article = readability.parse();\n    } else {\n      console.log('[readability] Probably not readable');\n    }\n\n    if (DEBUG_READABILITY) {\n      console.log('isReadable?', isProbablyReaderable, 'article:', article);\n    }\n\n    if (article) {\n      // VB-22288 Cancel unload events\n      document.beforeunload = () => {};\n\n      document.unload = () => {};\n\n      const reader = document.implementation.createHTMLDocument(document.title);\n      reader.documentElement.innerHTML = __vivaldiGetHTML(article);\n      document.replaceChild(reader.documentElement, document.documentElement);\n\n      if (chrome && chrome.runtime && chrome.runtime.sendMessage) {\n        chrome.runtime.sendMessage({\n          type: 'SET_RM_STYLE'\n        });\n      }\n    } else {\n      console.log('[readability] Nothing to show');\n    }\n  } finally {\n    // The page is rendered with display: none, so need to ensure this\n    // is always called\n    if (FEATURE_HIDE_PAGE && canSetStyle()) {\n      document.documentElement.style.display = 'block';\n    }\n  }\n}\n\nif (ready()) {\n  onLoad();\n} else {\n  window.addEventListener('DOMContentLoaded', onLoad, false);\n}",runAt:"document_start"};this.refWebview.current?.executeScript(e).catch(qo.default)})),oJ(this,"onNewPopup",(e=>{e.targetUrl||(e.targetUrl="about:blank");const t=W.ZP.isIncognito(this.context.vivaldiWindowId);se.Z.openNewPopAsTabOrWindow(e,this.context.vivaldiWindowId,t)})),oJ(this,"handleOnNewWindow",(e=>{const t=W.ZP.isPopup(this.context.vivaldiWindowId);let n=t?0:this.context.vivaldiWindowId;const s=W.ZP.isIncognito(this.context.vivaldiWindowId);if(t&&s)for(const[e]of W.ZP.getState())if(W.ZP.isIncognitoOrGuest(e)&&W.ZP.isTabbedBrowser(e)){n=e;break}switch(e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.preventDefault(),e.window.accept(n+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(n+";0");break;case"off_the_record":case"new_window":e.preventDefault();const t="off_the_record"===e.windowOpenDisposition?{incognito:!0,transition:ml.Z.LINK}:{};$.Z.openBrowserWindow(this.context.vivaldiWindowId,e.targetUrl,t);break;case"new_popup":e.preventDefault(),this.onNewPopup(e)}})),oJ(this,"showDialog",(e=>{e.webview=this.getWebviewElement(),this.setState({customData:e})})),oJ(this,"handleOnCloseDialog",(()=>{this.setState({customData:null}),this.props.onDialogClosed()})),oJ(this,"handleOnJavascriptDialog",(e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)})),oJ(this,"handleOnPermissionRequest",(e=>{e.preventDefault();const t=e.url?new URL(e.url).origin:"";switch(e.permission){case"geolocation":case"microphone":case"microphone_and_camera":case"camera":case"notifications":Up.Z.setPermission(this.props.id,t,e.permission,e.request,"undecided");break;case"pointerLock":e.request.allow(),e.dialogtype=e.permission,this.showDialog(e);break;case"download":A.ZP.get(P.kDownloadsStartAutomatically)?(e.request.allow(),A.ZP.get(P.kDownloadsOpenPanelOnNew)&&(A.ZP.get(P.kDownloadsUsePopout)?o.Z.executeActions("COMMAND_SHOW_DOWNLOADS_POPOUT"):re.ZP.canAutoOpen("downloads")&&ie.Z.toggleContent("downloads"))):(e.dialogtype=e.permission,this.showDialog(e));break;case"media":e.request.allow();break;default:e.dialogtype=e.permission,this.showDialog(e)}})),oJ(this,"handleOnSSLStateChanged",(e=>{if(e.SSLState){const t={state:e.SSLState,issuer:e.issuerstring};Up.Z.setSSLState(this.props.id,t)}})),oJ(this,"handleOnTargetURLChanged",(e=>{const t=(0,wE.ZP)(e.newUrl);X.Z.setStatus(t),this._localStatus=!0})),oJ(this,"handleOnCreateSearch",(e=>{e.dialogtype="createSearch",this.showDialog(e)})),oJ(this,"handleOnPasteAndGo",(e=>{e.preventDefault();const t={ctrlKey:e.modifiers.includes("ctrl"),shiftKey:e.modifiers.includes("shift"),altKey:e.modifiers.includes("alt"),metaKey:!1},n=e.clipBoardText,s=(0,ai.Z)(t);"search"===e.pasteTarget&&bm.Z.doAction("searchPasteAndGo",{clipboardText:n,openOptions:s}),"url"===e.pasteTarget&&bm.Z.doAction("urlPasteAndGo",{clipboardText:n,openOptions:s})})),oJ(this,"handleOnContentsCreated",(()=>{(0,Pt.cw)(this.props.url)||this.injectScripts(this.props.id)})),oJ(this,"_onWebpageviewStoreChanged",(e=>{if(!this.props.isActive)return;const t=this.getWebviewElement();switch(e.type){case Fi.Z.CLOSE_FIND_IN_PAGE_ACTION:return t?.stopFinding("keep"),void this.focusWebView(this.props.url);case Fi.Z.PAGE_GO:return void t?.go(e.index);case Fi.Z.PAGE_BACK:return void t?.back();case Fi.Z.PAGE_FORWARD:return void t?.forward();case Fi.Z.PAGE_GET_HISTORY:return void t?.getPageHistory(e.callback);case Fi.Z.PAGE_STOP:{const e=Gd.Z.getNavigationInfo(this.props.id);return void((!e||e&&e.isLoading)&&this.refWebview.current?.stop())}case Fi.Z.PAGE_RELOAD:return void(this.props.id===e.pageId&&h.Z.tabs.reload(e.pageId,{bypassCache:e.bypassCache}));case Fi.Z.WEBPAGEVIEW_ACTIONS:switch(e.action){case"focusWebView":return void this.focusWebView(this.props.url);case"pageScrollUp":return void this.pageScrollUp();case"pageScrollDown":return void this.pageScrollDown();case"pageScrollTop":return void this.pageScrollTop();case"pageScrollBottom":return void this.pageScrollBottom();case"print":const e=Jt.Z.getActiveWebView();return void(e===t?b.Z.utilities.print(this.context.vivaldiWindowId):e&&e.print())}}})),oJ(this,"focusWebView",(e=>{(0,Pt.cw)(e)?this.refInternalPage.current?.focus():this.getWebviewElement()?.focus()})),oJ(this,"pageScrollUp",(()=>{b.Z.tabsPrivate.scrollPage(V.ZP.unsafeGetActivePage().id,"pageup",0,(()=>{h.Z.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(h.Z.runtime.lastError.message||""))}))})),oJ(this,"pageScrollDown",(()=>{b.Z.tabsPrivate.scrollPage(V.ZP.unsafeGetActivePage().id,"pagedown",0,(()=>{h.Z.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(h.Z.runtime.lastError.message||""))}))})),oJ(this,"pageScrollTop",(()=>{b.Z.tabsPrivate.scrollPage(V.ZP.unsafeGetActivePage().id,"top",0,(()=>{h.Z.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(h.Z.runtime.lastError.message||""))}))})),oJ(this,"pageScrollBottom",(()=>{b.Z.tabsPrivate.scrollPage(V.ZP.unsafeGetActivePage().id,"bottom",0,(()=>{h.Z.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(h.Z.runtime.lastError.message||""))}))})),oJ(this,"onKeyDown",(e=>{"Escape"===e.key&&bm.Z.closeFindInPageToolbar(this.props.id)&&e.preventDefault()})),oJ(this,"onMouseDown",(()=>{$.Z.activateTab(this.props.id,this.context.vivaldiWindowId)})),oJ(this,"onMouseLeave",(()=>{this._localStatus&&(this._localStatus=!1,X.Z.clearStatus())})),oJ(this,"updateDockingSizes_",(e=>{b.Z.devtoolsPrivate.getDockingStateSizes(e,(e=>{const t=e.hideInspectedContents,n=e.inspectedHeight,s=e.inspectedLeft,i=e.inspectedTop,r=e.inspectedWidth;b.Z.zoom.getVivaldiUIZoom((e=>this.setState({hideInspectedContents:t,viewWidth:r/e,viewHeight:n/e,viewTop:i/e,viewLeft:s/e,disableWebviewEvents:!0},(()=>{this._eventGuard&&clearTimeout(this._eventGuard),this._eventGuard=setTimeout((()=>{this.setState({disableWebviewEvents:!1})}),300)}))))}))})),oJ(this,"onDockingSizesChanged",(e=>{e===this.props.id&&this.updateDockingSizes_(e)})),oJ(this,"onDockingStateChanged",((e,t)=>{e===this.props.id&&this.state.dockingState!==t&&(this.setState({dockingState:t}),$.Z.setPageInspected(e,this.context.vivaldiWindowId,"off"!==t))})),oJ(this,"onDevtoolsClosed",(e=>{e===this.props.id&&(this.setState({dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0}),$.Z.setPageInspected(e,this.context.vivaldiWindowId,!1))})),oJ(this,"onNewDevtoolsWindowCreated",((e,t)=>{t.contentWindow.vivaldiInspectTabId=e,t.contentWindow.vivaldiWindowId=this.context.vivaldiWindowId,this._devtoolsCloseTimerId&&(clearTimeout(this._devtoolsCloseTimerId),this._devtoolsCloseTimerId=0),t.onClosed.addListener(this.onDevtoolsWindowClosed.bind(this,e))})),oJ(this,"onDevtoolsWindowClosed",(e=>{"undocked"===this.state.dockingState&&(this._devtoolsCloseTimerId=setTimeout((()=>{b.Z.devtoolsPrivate.closeDevtools(e,(e=>{}))}),1e3),$.Z.setPageInspected(e,this.context.vivaldiWindowId,!1))})),oJ(this,"onDevtoolsUndocked",((e,t,n)=>{if(e===this.props.id){const s={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},i={id:"DevToolsApp_"+e.toString(),resizable:!0,state:n.maximized?"maximized":"normal",hidden:!0!==t,alwaysOnTop:n.alwaysOnTop,outerBounds:s};h.Z.app.window.create("devtools.html",i,this.onNewDevtoolsWindowCreated.bind(this,e)),this.setState({dockingState:"undocked"})}})),oJ(this,"onWebViewElementIsAttached",((e,t)=>{const{id:n,isActive:s,url:i}=this.props,r=this.getWebviewElement();e===n&&r&&s&&!(0,Pt.cw)(i)&&uC.setActiveWebView(r)})),oJ(this,"onWebViewElementIsDetached",((e,t)=>{e===this.props.id&&this.clearWebview()})),oJ(this,"updateFocus",((e,t)=>{if(!this.props.discarded)if(this.props.isActive){const e=pn.findDOMNode(this);e instanceof Node&&e.contains(this.activeElement)?cJ((()=>{this.activeElement&&(this.activeElement.focus(),delete this.activeElement)})):RE.Z.getUrlfieldStateFromId(this.props.id).isActive||sJ({pageId:this.props.id,url:t,activeElement:this.activeElement})||cJ((()=>this.focusWebView(t)))}else this.activeElement=this.context.document.activeElement})),oJ(this,"_onFindInPage",((e,t)=>{bm.Z.findInPage(this.props.id,e,t)})),oJ(this,"_onFindNextInPage",((e,t,n)=>{bm.Z.findNextInPage(this.props.id,e,t,n)})),this.state={draggedLength:null,customData:null,dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0,hideInspectedContents:!1,disableWebviewEvents:!1,tabIsFullscreen:!1,mediaState:Qq.getState().get(this.props.id)||(0,sa.Set)()}}componentDidMount(){this.props.discarded&&this.props.isVisible&&rJ.nextTick((()=>{h.Z.tabs.reload(this.props.id)})),this.attachEventHandlers(),this.updateFocus(this.props.id,this.props.url),this.props.isActive&&rJ.nextTick((()=>{const e=this.getWebviewElement();e&&eJ.setUtilityWebView(e)})),this._mediaStateStoreToken=Qq.addListener(this._onMediaStateStoreChanged)}componentDidUpdate(e,t){const{target:n}=this.props;if(n&&n!==e.target){const{transition:e,post:t,headers:s}=n;this.props.url&&rJ.nextTick((()=>{this.refWebview.current?.sendRequest(this.props.url,e||ml.Z.LINK,null!=t,t||"",s||"")}))}if(rJ.nextTick((()=>{Gd.Z.getNavigationInfo(this.props.id)||this.updateNavigationState(this.props.url,!1,"content")})),e.url&&this.props.url!==e.url&&(0,As.K2)(this.props.url)&&(0,As.K2)(e.url)){const t=new URL(e.url),n=new URL(this.props.url);t.origin!==n.origin&&rJ.nextTick((()=>{Up.Z.resetPermissions(e.id),Up.Z.resetPageHasBlockedContent(e.id),Up.Z.resetBlockedPopups(e.id)}))}this.props.discarded&&this.props.isVisible&&rJ.nextTick((()=>{h.Z.tabs.reload(this.props.id)})),(n&&n!==e.target||e.url!==this.props.url||e.isActive!==this.props.isActive||e.discarded!==this.props.discarded)&&this.updateFocus(this.props.id,this.props.url);const s=this.getWebviewElement();if(s){const t=e.discarded&&!this.props.discarded,n=(!e.isActive||t)&&this.props.isActive;if(n){rJ.nextTick((()=>eJ.setUtilityWebView(s)));!this.props.extData.get("thumbnail")&&rJ.nextTick((()=>{this.updatePageThumbnailWithActiveWebview(0)}))}const i=e.isActive&&!this.props.isActive,r=(0,Pt.cw)(e.url),a=(0,Pt.cw)(this.props.url),o=!r&&a;a||!n&&!r?(i||o)&&rJ.nextTick((()=>{if(this.clearWebview(),this.state.tabIsFullscreen){this.getWebviewElement()?.setIsFullscreen(!1)}})):rJ.nextTick((()=>{const e=this.getWebviewElement();e&&uC.setActiveWebView(e)}))}if(this.props.extData.get("readerMode")&&!e.extData.get("readerMode")?this.injectReaderView():!this.props.extData.get("readerMode")&&e.extData.get("readerMode")&&this.refWebview.current?.reload(),this.props.prefValues[P.kWebpagesReaderStyle]!==e.prefValues[P.kWebpagesReaderStyle]&&this.props.extData.get("readerMode")){const e={...this.props.prefValues[P.kWebpagesReaderStyle],...Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)};cb(this.props.id,{readerStyle:e})}this.updateViewUnchangedFlag(e,this.props),Wl.Z.setDevToolsConflicts(this.isDevtoolsDockedAndActive());const i=!e.prefValues[P.kMailIsTurnedOff]&&e.prefValues[P.kRssDetectFeeds],r=this.props.prefValues[P.kMailIsTurnedOff]||!this.props.prefValues[P.kRssDetectFeeds];i&&r&&Jq.resetRssFeeds(this.props.id),this.props.qrCodeUrl&&e.qrCodeUrl!==this.props.qrCodeUrl&&this.setState({customData:{url:this.props.qrCodeUrl,dialogtype:"qrcode"}})}componentWillUnmount(){this.state.tabIsFullscreen&&rJ.nextTick((()=>{dg.Z.restoreStateAfterHTMLFullscreen(this.context.vivaldiWindowId)})),this.removeEventHandlers(),b.Z.devtoolsPrivate.closeDevtools(this.props.id,(e=>{})),rJ.nextTick(this.clearWebview),this._mediaStateStoreToken.remove()}render(){const e=this.props.supportsReaderMode,t=this.props.extData.get("readerMode")&&e&&!(0,Pt.cw)(this.props.url),n=V.ZP.isDisplayingImage(this.props.id),i="off"!==this.state.dockingState&&!(0,Pt.cw)(this.props.url),r="auto"===this.state.viewWidth||0===this.state.viewWidth?"100%":this.state.viewWidth+this.state.viewLeft,a=0!==this.state.viewWidth,o=0!==this.state.viewHeight,l=this.state.mediaState.has("recording")||this.state.mediaState.has("capturing"),c={visibility:l||this.props.isVisible?"inherit":"hidden",zIndex:this.props.isVisible?"initial":"-1",opacity:this.props.isVisible?1:0};if(this.state.tabIsFullscreen&&l){const e=1920,t=1080,n=this.props.contentWidth/e;c.transform=`scale(${n})`,c.left=(this.props.contentWidth-e)/2,c.top=(this.props.contentHeight-t)/2,c.width=e,c.height=t,c.position="absolute"}const u=Number(this.props.id),m=bn()("webpageview",{active:this.props.isActive,internal:(0,Pt.cw)(this.props.url),tiled:(0,iJ.Qz)(this.props.id),visible:this.props.isVisible,pagefocusstop:this.props.isVisible});return s.createElement(IC,{__source:{fileName:aJ,lineNumber:1404,columnNumber:7}},s.createElement("div",{className:m,ref:"webpageview",style:c,"data-id":this.props.id,tabIndex:"-1",onKeyDown:this.onKeyDown,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,__source:{fileName:aJ,lineNumber:1405,columnNumber:9}},t&&this.props.prefValues[P.kWebpagesReaderControls]&&!(i&&"undocked"!==this.state.dockingState)&&s.createElement(wR,{prefs:!1,filter:"",__source:{fileName:aJ,lineNumber:1418,columnNumber:13}}),!n&&!(0,Pt.Gp)(this.props.url)&&s.createElement(VC,{isActive:this.props.isActive,pageId:this.props.id,onFindInPage:this._onFindInPage,onFindNextInPage:this._onFindNextInPage,__source:{fileName:aJ,lineNumber:1422,columnNumber:13}}),s.createElement(vC,{tabId:u,__source:{fileName:aJ,lineNumber:1428,columnNumber:11}}),s.createElement(DC,{url:this.props.url,__source:{fileName:aJ,lineNumber:1430,columnNumber:11}}),s.createElement("div",{ref:"webpagecontainer",className:"row-wrapper",__source:{fileName:aJ,lineNumber:1432,columnNumber:11}},s.createElement("div",{className:"devtools-container",__source:{fileName:aJ,lineNumber:1434,columnNumber:13}},i&&s.createElement(SC,{active:this.props.isActive,tabId:u,dockingState:this.state.dockingState,__source:{fileName:aJ,lineNumber:1436,columnNumber:17}}),s.createElement("div",{className:"webpage",style:i?{top:this.state.viewTop,left:this.state.viewLeft,width:a?this.state.viewWidth:"none",height:o?this.state.viewHeight:"none",pointerEvents:this.state.disableWebviewEvents?"none":null}:null,__source:{fileName:aJ,lineNumber:1442,columnNumber:15}},!this.props.discarded&&s.createElement(nJ,{ref:this.refWebview,id:u,onClose:this.handleClose,onContentsCreated:this.handleOnContentsCreated,onCreateSearch:this.handleOnCreateSearch,onContentAllowed:this.handleContentAllowed,onContentBlocked:this.handleContentBlocked,onDialog:this.handleOnJavascriptDialog,onFindUpdate:this.handleOnFindUpdate,onFullscreen:this.handleOnFullscreen,onLoadAbort:this.handleLoadAbort,onLoadCommit:this.handleLoadCommit,onLoadProgress:this.handleOnLoadProgress,onLoadRedirect:this.handleLoadRedirected,onLoadStart:this.handleLoadStart,onLoadStop:this.handleLoadStop,onNewWindow:this.handleOnNewWindow,onPasteAndGo:this.handleOnPasteAndGo,onPermissionRequest:this.handleOnPermissionRequest,onSslStateChanged:this.handleOnSSLStateChanged,onTargetUrlChanged:this.handleOnTargetURLChanged,onWindowBlocked:this.handleBlockedPopup,__source:{fileName:aJ,lineNumber:1453,columnNumber:19}})),s.createElement($q,{ref:this.refInternalPage,pageId:this.props.id,url:this.props.url,isVisible:this.props.isVisible,isActive:this.props.isActive,updatePageThumbnailWithActiveWebview:this.updatePageThumbnailWithActiveWebview,__source:{fileName:aJ,lineNumber:1479,columnNumber:15}}),n&&!this.props.showImageInspector&&s.createElement("button",{className:"inspector",title:(0,ue.Z)("Image Properties"),style:{left:r},onClick:this.toggleImageInspector,dangerouslySetInnerHTML:{__html:cn.GH$},__source:{fileName:aJ,lineNumber:1489,columnNumber:17}})),n&&s.createElement(vw,{url:this.props.url,open:this.props.showImageInspector,toggleImageInspector:this.toggleImageInspector,__source:{fileName:aJ,lineNumber:1499,columnNumber:15}}),this.props.isActive&&this.state.customData&&s.createElement(il,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:aJ,lineNumber:1508,columnNumber:15}}))))}}oJ(uJ,"contextType",Vs.Z);const mJ=(0,bi.Z)(uJ,lJ);var dJ=n(34155);function hJ(e,t){return function(n){n.currentTarget instanceof HTMLElement&&n.relatedTarget instanceof HTMLElement&&n.currentTarget.contains(n.relatedTarget)||(n.stopPropagation(),pJ(e,t?.vivaldiWindowId||W.ZP.getId()))}}function pJ(e,t){let n;n="content"===e?function(e){const t=V.ZP.getActivePage(e);return t?.isMailPage?"mail":t?.url&&Pt.jk.getDisplayUrl(t.url).startsWith("vivaldi://calendar")?"calendar":"browser"}(t):"panel"===e?function(){switch(re.ZP.getSelectedPanel()){case"mail":case"feeds":case"contacts":return"mail";case"calendar":return"calendar";default:return"browser"}}():"browser";const s={actionType:"SWITCH_CONTEXT",context:{area:e,feature:n},windowId:t};m.Z.isDispatching()?dJ.nextTick((()=>m.Z.dispatch(s))):m.Z.dispatch(s)}var gJ=n(34155),bJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlBar.jsx";function NJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fJ(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,vJ(e,t,"get"))}function _J(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,vJ(e,t,"set"),n),n}function vJ(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const EJ=[P.kAddressBarAutocompleteEnabled,P.kAddressBarExtensionsVisible,P.kAddressBarExtensionsRenderInDropdown,P.kAddressBarExtensionsShowAllToggle,P.kAddressBarExtensionsShowHiddenToggle,P.kAddressBarInlineSearchEnabled,P.kAddressBarPosition,P.kAddressBarSearchDisplay,P.kAddressBarSearchSuggestEnabled,P.kAddressBarShowProfile,P.kAddressBarShowQrGenerator,P.kAddressBarTypedHistoryEnabled,P.kDownloadsUsePopout,P.kPopupsShowInTab,P.kKeyboardTabToAll,P.kAddressBarSearchShowFavicon,P.kTabsFocusWebview];function CJ(e){return{isTypedHistoryOpen:RE.Z.showTypedHistory(),typedHistory:RE.Z.getTypedHistory(),isDownloadPopoutVisible:RE.Z.isDownloadPopoutVisible(),...RE.Z.getUrlfieldStateFromId(e)}}function wJ(e){return{blockedPageContent:Gd.Z.getblockedPageContents(e),blockedPopups:Gd.Z.getBlockedPopupsById(e),permissionInfo:Gd.Z.getPermissionsById(e),sslInfo:Gd.Z.getSSLInfo(e)}}function yJ(e){if(!e)return;const t=Dn.Z.getByQuery(e);if(!t||!t.keyword)return;return e.substring(t.keyword.length)?t:void 0}function SJ(e){e.preventDefault(),QN.Z.toggleTypedHistory()}function TJ(e){e.preventDefault(),st.Z.toggle(P.kAddressBarExtensionsVisible,!0,!1)}function kJ({className:e}){return s.createElement("div",{className:e,title:(0,ue.Z)("Private Browsing Window"),dangerouslySetInnerHTML:{__html:n(2018)+(0,ue.Z)("Private")},__source:{fileName:bJ,lineNumber:267,columnNumber:5}})}function IJ(e){return function(e){const t=(0,wE.ME)(e,["scheme","host","tld","port","path","query","ref"]);return(0,wE.Aq)(t).substring(0,Q.RL)}(e)}var AJ=new WeakMap;class ZJ extends s.PureComponent{constructor(e,t){super(e),AJ.set(this,{writable:!0,value:void 0}),NJ(this,"passwordElm",s.createRef()),NJ(this,"siteInfoElm",s.createRef()),NJ(this,"refUrlField",s.createRef()),NJ(this,"trackContextOnFocus",hJ("tabBar",this.context)),NJ(this,"getReaderContextMenu",(()=>[{handler:()=>se.Z.showSettings("webpages"),visible:!1===W.ZP.isGuestSession(this.context.vivaldiWindowId),...(0,Mn.Z)("Configure Reader View")}])),NJ(this,"_setBookmarkedState",(0,za.Z)((e=>{if(!fJ(this,AJ))return;const t=tn.ZP.findByUrl(e);this.setState({bookmarkData:t?{...t}:void 0})}),100)),NJ(this,"_onUrlbarStoreChanged",(()=>{const e=CJ(this.props.id);this.setState({editUrl:e.editUrl,isTypedHistoryOpen:e.isTypedHistoryOpen,typedHistory:e.typedHistory})})),NJ(this,"_onNavigationStoreChanged",(e=>{const t=()=>{const e=wJ(this.props.id);this.setState({blockedPageContent:e.blockedPageContent,blockedPopups:e.blockedPopups,permissionInfo:e.permissionInfo,sslInfo:e.sslInfo})};"setPermissionInfo"===e?setTimeout(t,200):t()})),NJ(this,"_onSearchEngineStoreChanged",(()=>{this.setState({defaultSearchEngine:Dn.Z.getDefault(W.ZP.isIncognito(this.context.vivaldiWindowId))})})),NJ(this,"_onRssDetectStoreChanged",(()=>{this.setState({feeds:i_.getState()})})),NJ(this,"_onPageStoreChanged",(()=>{const e=V.ZP.getPageById(this.props.id);this.setState({isReaderModeActive:Boolean(e&&e.extData.get("readerMode")),supportsReaderMode:!!e&&e.supportsReaderMode})})),NJ(this,"selectAddressField",(async()=>{fJ(this,AJ)&&this.refUrlField.current?.select()})),NJ(this,"focusAddressField",(()=>{fJ(this,AJ)&&this.refUrlField.current?.focus()})),NJ(this,"blurAddressField",(()=>{fJ(this,AJ)&&(this.refUrlField.current?.blur(),this.hideDropdown())})),NJ(this,"onSearch",((e,t,n={})=>{t&&t.url&&(QN.Z.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...n}),this.hideDropdown())})),NJ(this,"onSearchAddTypedSearchHistory",(0,lv.Z)(this.onSearch,{addTypedSearchHistory:!0})),NJ(this,"_onBookmarkStoreChanged",(()=>{this._setBookmarkedState(this.props.url)})),NJ(this,"_onTabStoreChanged",(e=>{"newTab"!==e.action&&"closeTab"!==e.action||this.hideDropdown()})),NJ(this,"_onWebpageviewStoreChanged",(e=>{if("WEBPAGEVIEW_ACTIONS"===e.type){if("focusAddressField"===e.action)this.onCloseCreateBookmarkCallout(),this.focusAddressField(),this.refUrlField.current?.select();else if("urlPasteAndGo"===e.action&&e.payload){const t=e.payload;this.urlPasteAndGo(t)}"focusSearchField"===e.action&&(this.state.isAddressBarVisible||this.focusSearchField())}"URLFIELD_BLUR"===e.type&&gJ.nextTick((()=>this.hideDropdown()))})),NJ(this,"focusSearchField",(()=>{void 0!==this.refs.searchField&&this.refs.searchField&&this.refs.searchField.setFocusInSearchField()})),NJ(this,"urlPasteAndGo",(async e=>{const{clipboardText:t}=e;if(!t)return;const n=RE.Z.getUrlfieldStateFromId(this.props.id).isActive,s=pn.findDOMNode(this.refUrlField.current).querySelector("input"),i=n?s.value.substring(0,s.selectionStart)+t+s.value.substring(s.selectionEnd):t;this.blurAddressField(),await QN.Z.go([i],{transition:ml.Z.TYPED,addTypedSearchHistory:!1,enableSearch:!0,...e.openOptions})})),NJ(this,"onUrlFieldFocus",(()=>{(0,RE.a)(this.props.id,!0)})),NJ(this,"onUrlFieldBlur",(()=>{(0,RE.a)(this.props.id,!1)})),NJ(this,"onPasswordFocus",(e=>{b.Z.utilities.isDialogOpen("password",(e=>{b.Z.utilities.focusDialog("password",(e=>{}))}))})),NJ(this,"compareProtocol",(e=>{if((0,As.C3)(e)&&(0,As.Zj)(e)&&this.props.url&&cC(e)===cC(this.props.url)){const t=Is.parse(this.props.url).protocol,n=Is.format({host:e,protocol:t});if((0,As.K2)(n))return n}return e})),NJ(this,"handleUrlFieldSubmit",(async({url:e,options:t})=>{const n=yJ(this.state.editUrl),s=this.props.id;Gd.Z.on("change",(async function e(t){if(!t||t.pageId!==s)return;["start","stop"].includes(t.navigationState.trigger)&&(await new Promise(gJ.nextTick),Gd.Z.off("change",e),QN.Z.setUrlfieldState(s,{editUrl:void 0}))}));const i=Boolean(n||this.props.prefValues[P.kAddressBarInlineSearchEnabled]);n||(e=this.compareProtocol(e)),await QN.Z.go([e],{...t,enableSearch:i,addTypedSearchHistory:!1})})),NJ(this,"easterEggNavigation",(async()=>{const e=this.refUrlField.current?.autocompletedValue;e&&(this.hideDropdown(),await QN.Z.go([Pt.jk.getUrl(e)],{enableSearch:!0,transition:ml.Z.TYPED,addTypedSearchHistory:!1}))})),NJ(this,"onSiteInfoButtonFieldGo",(()=>{this.easterEggNavigation()})),NJ(this,"showPasswordDialog",(()=>{b.Z.utilities.showPasswordDialog(this.context.vivaldiWindowId)})),NJ(this,"initOriginUrl",(()=>{this.props.id&&$.Z.setOrigin(this.props.id,this.context.vivaldiWindowId,IJ(this.state.urlFragments))})),NJ(this,"onUrlFieldDrop",(e=>{const t=e.dataTransfer;if(!t)return;const n=t.getData("text/uri-list");if(n.length>0){const e=n.split("\n");e.length>0&&(this.initOriginUrl(),QN.Z.go(e))}else{const e=t.getData("text/plain");e.length>0&&((0,As.K2)(e)?(this.initOriginUrl(),QN.Z.go([e])):(QN.Z.setUrlfieldState(this.props.id,{editUrl:e}),this.focusAddressField()))}})),NJ(this,"togglePasswordIcon",((e,t)=>{e===this.context.vivaldiWindowId&&this.setState((e=>({showPasswordIcon:t})))})),NJ(this,"setUrlDragEvent",(e=>{const t=this.context.document.createElement("img"),n=W.ZP.isIncognito(this.context.vivaldiWindowId);t.src=this.props.favIconUrl||"/resources/default_favicon_64.png",e.dataTransfer.setDragImage(t,Math.min(t.width-t.width/3,64),Math.min(t.height-t.height/3,64)),t.remove();const s=V.ZP.unsafeGetActivePage();Ws(e,this.props.url,s.title,n),e.dataTransfer.effectAllowed="all"})),NJ(this,"onReaderModeClicked",(()=>{this.state.isReaderModeActive?$.Z.setReaderState(this.props.id,!1):$.Z.setReaderState(this.props.id,!0)})),NJ(this,"onCreateBookmarkCallout",(()=>{this.props.active&&this.props.url&&this.setState({createBookmarkCallout:!0})})),NJ(this,"onCloseCreateBookmarkCallout",(()=>{this.setState({createBookmarkCallout:!1})})),NJ(this,"onPopupAllowed",(e=>{Up.Z.removeBlockedPopup(this.props.id,e.targetUrl),this.refs.popupBlockerNotificator.onDialogClosed(),this.openNewPopAsTabOrWindow(e)})),NJ(this,"openNewPopAsTabOrWindow",(e=>{const t=W.ZP.isIncognito(this.context.vivaldiWindowId);se.Z.openNewPopAsTabOrWindow(e,this.context.vivaldiWindowId,t)})),NJ(this,"_isEditingUrl",(()=>{const{editUrl:e}=this.state;return void 0!==e&&(""===e||IJ(this.state.urlFragments)!==e)})),NJ(this,"hideDropdown",(()=>{this.refUrlField.current?.hideDropdown()})),NJ(this,"_storeDialogAnchorRect",((e,t)=>{const n="top"===this.props.prefValues[P.kAddressBarPosition]?"down":"up";b.Z.zoom.getVivaldiUIZoom((s=>{b.Z.utilities.setDialogPosition(t,this.context.vivaldiWindowId,{left:Math.round(e.left*s),top:Math.round(e.top*s),width:Math.round(e.width*s),height:Math.round(e.height*s)},n)}))})),NJ(this,"_updateDialogPositions",(()=>{const e=this.passwordElm.current;if(e){const t=e.getRect();t&&this._passwordPopupPos!==t&&(this._passwordPopupPos=t,this._storeDialogAnchorRect({left:t.left,top:t.top,width:t.width,height:t.height},"password"))}const t=this.siteInfoElm.current&&this.siteInfoElm.current.refs.siteInfoButton;if(t&&t instanceof Element){const e=t.getBoundingClientRect();this._permissionPopupPos!==e&&(this._permissionPopupPos=e,this._storeDialogAnchorRect({left:e.left,top:e.top,width:e.width,height:e.height},"permission"))}h.Z.windows.get(this.context.vivaldiWindowId,{},(e=>{if(!h.Z.runtime.lastError){let{left:t=0,top:n=0,width:s,height:i}=e;s=s||0,i=i||0,this._storeDialogAnchorRect({left:Math.round(t+s/2),top:Math.round(n+i/2),width:0,height:0},"chromecast")}}))})),NJ(this,"_onWindowStoreChanged",(()=>{const e=W.ZP.getVisibleUI(this.context.vivaldiWindowId).addressBar;this.state.isAddressBarVisible!==e&&this.setState({isAddressBarVisible:e})})),NJ(this,"_onWindowPositionChanged",(e=>{e===this.context.vivaldiWindowId&&this._sendBatchedUpdatedBounds()})),NJ(this,"_sendBatchedUpdatedBounds",(()=>{this._resizeDelayRunning||(this._resizeDelayRunning=!0,setTimeout((()=>{this._updateDialogPositions(),this._resizeDelayRunning=!1}),500))})),NJ(this,"onUrlbarResized",(e=>{this._sendBatchedUpdatedBounds()})),NJ(this,"onSetBookmarked",(async e=>await h.Z.bookmarks.create(e))),NJ(this,"onBaseDomainObscured",(e=>{this.setState({isBaseDomainObscured:e})}));const n=CJ(e.id),i=wJ(e.id),r=V.ZP.getPageById(e.id),a=tn.ZP.findByUrl(e.url);this.state={isBaseDomainObscured:!1,topSites:[],urlFragments:(0,wE.dO)(e.url),createBookmarkCallout:!1,hasFeed:!0,bookmarkData:a?{...a}:void 0,showPasswordIcon:!1,isAddressBarVisible:W.ZP.getVisibleUI(t.vivaldiWindowId).addressBar,defaultSearchEngine:Dn.Z.getDefault(W.ZP.isIncognito(t.vivaldiWindowId)),feeds:i_.getState(),isReaderModeActive:Boolean(r&&r.extData.get("readerMode")),supportsReaderMode:!!r&&r.supportsReaderMode,editUrl:n.editUrl,isTypedHistoryOpen:n.isTypedHistoryOpen,typedHistory:n.typedHistory,isDownloadPopoutVisible:n.isDownloadPopoutVisible,blockedPageContent:i.blockedPageContent,blockedPopups:i.blockedPopups,permissionInfo:i.permissionInfo,sslInfo:i.sslInfo}}static getDerivedStateFromProps(e){const{id:t}=e,n=CJ(t),s=wJ(t),i=V.ZP.getPageById(t),r=tn.ZP.findByUrl(e.url);return{isReaderModeActive:Boolean(i&&i.extData.get("readerMode")),supportsReaderMode:!!i&&i.supportsReaderMode,editUrl:n.editUrl,isTypedHistoryOpen:n.isTypedHistoryOpen,typedHistory:n.typedHistory,isDownloadPopoutVisible:n.isDownloadPopoutVisible,blockedPageContent:s.blockedPageContent,blockedPopups:s.blockedPopups,permissionInfo:s.permissionInfo,sslInfo:s.sslInfo,bookmarkData:r?{...r}:void 0}}componentDidUpdate(e,t){const n=e.url!==this.props.url,s=e.id!==this.props.id;if(s&&this.hideDropdown(),!this.props.prefValues[P.kTabsFocusWebview]&&s&&RE.Z.getUrlfieldStateFromId(this.props.id).isActive&&cJ((()=>this.refUrlField.current?.select())),n){this._setBookmarkedState(this.props.url);const e=(0,wE.dO)(this.props.url);this.setState((0,T.ZP)((({urlFragments:t})=>{t.scheme=e.scheme,t.username=e.username,t.password=e.password,t.host=e.host,t.ref=e.ref,t.query=e.query,t.port=e.port,t.tld=e.tld,t.path=e.path})))}}componentDidMount(){_J(this,AJ,!0),W.ZP.isGuestSession(this.context.vivaldiWindowId)||h.Z.topSites.get((e=>{this.setState({topSites:e})})),tn.ZP.addChangeListener(this._onBookmarkStoreChanged),lb.Z.addChangeListener(this._onWebpageviewStoreChanged),vv.addChangeListener(this._onTabStoreChanged),RE.Z.addChangeListener(this._onUrlbarStoreChanged),Gd.Z.addChangeListener(this._onNavigationStoreChanged),Dn.Z.addChangeListener(this._onSearchEngineStoreChanged),V.ZP.addChangeListener(this._onPageStoreChanged),b.Z.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),b.Z.utilities.onPasswordIconStatusChanged.addListener(this.togglePasswordIcon),this._windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged),this._rssDetectStoreToken=i_.addListener(this._onRssDetectStoreChanged),RE.Z.getUrlfieldStateFromId(this.props.id).isActive&&cJ((()=>this.refUrlField.current?.select()))}componentWillUnmount(){_J(this,AJ,!1),tn.ZP.removeChangeListener(this._onBookmarkStoreChanged),lb.Z.removeChangeListener(this._onWebpageviewStoreChanged),vv.removeChangeListener(this._onTabStoreChanged),RE.Z.removeChangeListener(this._onUrlbarStoreChanged),Gd.Z.removeChangeListener(this._onNavigationStoreChanged),Dn.Z.removeChangeListener(this._onSearchEngineStoreChanged),V.ZP.removeChangeListener(this._onPageStoreChanged),b.Z.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),b.Z.utilities.onPasswordIconStatusChanged.removeListener(this.togglePasswordIcon),this._windowStoreToken.remove(),this._rssDetectStoreToken.remove()}render(){const{prefValues:e,url:t}=this.props,n=yJ(this.state.editUrl),i=Pt.jk.isInternalUrl(t)||t.startsWith("chrome://"),r=(0,As.C3)(escape(t))&&!(i||(0,As.Sc)(t)||(0,As.tn)(t)),a=this.state.typedHistory.length>0?(0,ue.Z)("Show typed history"):(0,ue.Z)("Enter an address to activate typed history"),o=(0,ue.Z)("Save your password"),l=e[P.kAddressBarTypedHistoryEnabled]&&!0!==this.props.readonly,c="top"===e[P.kAddressBarPosition]?"bottomLeft":"topLeft",u="top"===e[P.kAddressBarPosition]?"below":"above",m=this.state.feeds.get(this.props.id)||(0,sa.List)(),d=m.size,h=IJ(this.state.urlFragments),p=function(e){return Boolean(e)&&!Pt.jk.isInternalUrl(e)&&!Pt.jk.isNewTabPage(e)}(t),{isBaseDomainObscured:g}=this.state,b=(0,en.TR)(t),N=tn.ZP.isReady()&&void 0!==this.props.id&&b;return s.createElement(gi.Z,{focusName:"focus_addressbar",className:"UrlBar toolbar toolbar-mainbar toolbar-large",onFocus:this.trackContextOnFocus,__source:{fileName:bJ,lineNumber:986,columnNumber:7}},this.props.showNavigationButtons&&s.createElement(yp,{name:P.kToolbarsNavigation,className:"toolbar-mainbar",menuOrigin:c,popupPosition:u,size:"large",__source:{fileName:bJ,lineNumber:991,columnNumber:11}}),s.createElement("div",{className:"UrlBar-AddressField",__source:{fileName:bJ,lineNumber:1e3,columnNumber:9}},s.createElement("div",{className:"toolbar-insideinput",__source:{fileName:bJ,lineNumber:1002,columnNumber:11}},s.createElement(kb,{blockerVisible:r,position:u,tabIndex:e[P.kKeyboardTabToAll],pageId:this.props.id,url:t,__source:{fileName:bJ,lineNumber:1003,columnNumber:13}})),n?s.createElement("div",{className:"SiteInfoButton",__source:{fileName:bJ,lineNumber:1013,columnNumber:15}},s.createElement("img",{className:"SiteInfoButton-SearchEngineFavicon",src:n.faviconUrl,__source:{fileName:bJ,lineNumber:1014,columnNumber:17}})):s.createElement(Nv,{ref:this.siteInfoElm,draggable:!i,isEditingUrl:this._isEditingUrl(),isInternal:i,onDragStart:this.setUrlDragEvent,fieldGo:this.onSiteInfoButtonFieldGo,sslIssuer:this.state.sslInfo?.issuer,sslState:this.state.sslInfo?.state,tabIndex:e[P.kKeyboardTabToAll],__source:{fileName:bJ,lineNumber:1019,columnNumber:15}}),s.createElement("div",{className:"UrlBar-UrlFieldWrapper",__source:{fileName:bJ,lineNumber:1032,columnNumber:11}},s.createElement(ei,{className:"observer",onResize:this.onUrlbarResized,__source:{fileName:bJ,lineNumber:1033,columnNumber:13}},s.createElement(lC,{stateResetKey:i||this.props.id,ref:this.refUrlField,onBaseDomainObscured:this.onBaseDomainObscured,urlFragments:this.state.urlFragments,onSubmit:this.handleUrlFieldSubmit,className:"UrlBar-UrlField url vivaldi-addressfield uifocusstop",editUrl:this.state.editUrl,displayUrl:h,pageId:this.props.id,pageUrl:t,onUrlDrag:this.setUrlDragEvent,autoFocus:!1,autocompletionEnabled:e[P.kAddressBarAutocompleteEnabled],isTypedHistoryOpen:this.state.isTypedHistoryOpen,onBlur:this.onUrlFieldBlur,onFocus:this.onUrlFieldFocus,onDrop:this.onUrlFieldDrop,placeholder:e[P.kAddressBarInlineSearchEnabled]?(0,ue.Z)("Search or enter an address"):(0,ue.Z)("Enter an address"),showDropdown:!0,typedHistory:this.state.typedHistory,topSites:this.state.topSites,autocompleteOnTitle:!0,defaultSearchEngine:this.state.defaultSearchEngine,typedSearchEngine:n,readonly:this.props.readonly,__source:{fileName:bJ,lineNumber:1037,columnNumber:15}}))),s.createElement("div",{className:"toolbar toolbar-small toolbar-insideinput",__source:{fileName:bJ,lineNumber:1078,columnNumber:11}},g&&s.createElement("div",{title:(0,ue.Z)("Caution!\nThe entire domain name cannot be shown. Make sure you trust this website before submitting data."),className:"UrlBar-UrlObfuscationWarning",dangerouslySetInnerHTML:{__html:cn.Si$.small},__source:{fileName:bJ,lineNumber:1080,columnNumber:15}}),s.createElement(Tf,{pageId:this.props.id,ref:"webpageview_loadprogress",open:!i,__source:{fileName:bJ,lineNumber:1087,columnNumber:13}}),s.createElement(Uf,{pageId:this.props.id,pagePermissions:this.state.permissionInfo,popupPosition:u,__source:{fileName:bJ,lineNumber:1092,columnNumber:13}}),this.state.blockedPopups.size>0&&s.createElement(Yf,{ref:"popupBlockerNotificator",url:t,blockedPopups:this.state.blockedPopups,onPopupAllowed:this.onPopupAllowed,popupPosition:u,__source:{fileName:bJ,lineNumber:1098,columnNumber:15}}),this.state.blockedPageContent.size>0&&s.createElement(Yp,{pageId:this.props.id,url:t,position:u,blockedPageContent:this.state.blockedPageContent,__source:{fileName:bJ,lineNumber:1107,columnNumber:15}}),d>0&&s.createElement(t_,{feeds:m,__source:{fileName:bJ,lineNumber:1114,columnNumber:15}}),this.state.showPasswordIcon&&s.createElement(ko,{ref:this.passwordElm,className:"password-icon",tooltip:o,onClick:this.showPasswordDialog,image:cn.hXX,tabIndex:0,onFocus:this.onPasswordFocus,__source:{fileName:bJ,lineNumber:1118,columnNumber:15}}),!i&&this.state.supportsReaderMode&&s.createElement(ko,{menu:this.getReaderContextMenu,menuOrigin:"topLeft",isPressed:this.state.isReaderModeActive,image:cn.sWI,onClick:this.onReaderModeClicked,tooltip:(0,ue.Z)("Reader View"),__source:{fileName:bJ,lineNumber:1130,columnNumber:15}}),p&&e[P.kAddressBarShowQrGenerator]&&s.createElement(qf,{popupPosition:u,size:this.props.size,data:t,__source:{fileName:bJ,lineNumber:1141,columnNumber:15}}),p&&s.createElement(Pv,{popupPosition:u,size:this.props.size,tabId:this.props.id,url:t,__source:{fileName:bJ,lineNumber:1147,columnNumber:15}})),N&&s.createElement(fb,{key:t,setBookmarked:this.onSetBookmarked,pageId:this.props.id,bookmarkData:this.state.bookmarkData,popupPosition:u,__source:{fileName:bJ,lineNumber:1158,columnNumber:13}}),s.createElement("div",{className:"toolbar toolbar-small toolbar-insideinput",__source:{fileName:bJ,lineNumber:1167,columnNumber:11}},l&&s.createElement("div",{className:"button-toolbar",__source:{fileName:bJ,lineNumber:1169,columnNumber:15}},s.createElement("button",{title:a,tabIndex:e[P.kKeyboardTabToAll],disabled:0===this.state.typedHistory.length,onMouseDown:SJ,dangerouslySetInnerHTML:{__html:cn.V34},__source:{fileName:bJ,lineNumber:1170,columnNumber:17}})))),"button"===e[P.kAddressBarSearchDisplay]&&this.state.isAddressBarVisible&&s.createElement(dv,{shouldRenderAs:e[P.kAddressBarSearchDisplay],popupPosition:u,popupWidth:210,prefValues:this.props.prefValues,size:this.props.size,iconSize:"small",__source:{fileName:bJ,lineNumber:1187,columnNumber:11}}),("field"===e[P.kAddressBarSearchDisplay]||!this.state.isAddressBarVisible)&&s.createElement(ov,{className:"UrlBar-SearchField",onSearch:this.onSearchAddTypedSearchHistory,shouldRenderAs:e[P.kAddressBarSearchDisplay],ref:"searchField",useFavicon:e[P.kAddressBarSearchShowFavicon],suggestEnabled:e[P.kAddressBarSearchSuggestEnabled],__source:{fileName:bJ,lineNumber:1198,columnNumber:11}}),e[P.kDownloadsUsePopout]&&s.createElement(tf,{prefValues:this.props.prefValues,popupPosition:u,size:"large",isPopupVisible:this.state.isDownloadPopoutVisible,__source:{fileName:bJ,lineNumber:1209,columnNumber:11}}),(e[P.kAddressBarShowProfile]&&this.state.isAddressBarVisible&&!W.ZP.isPopup(this.context.vivaldiWindowId)&&!W.ZP.isIncognito(this.context.vivaldiWindowId)||W.ZP.isGuestSession(this.context.vivaldiWindowId))&&s.createElement(Fp,{popupPosition:u,size:this.props.size,__source:{fileName:bJ,lineNumber:1222,columnNumber:11}}),this.state.isAddressBarVisible&&!W.ZP.isPopup(this.context.vivaldiWindowId)&&s.createElement(jv,{popupPosition:u,size:this.props.size,__source:{fileName:bJ,lineNumber:1229,columnNumber:11}}),s.createElement(gf,{extensionAnchor:this.props.extensionAnchor,isAddressBarVisible:this.state.isAddressBarVisible,showToolbar:e[P.kAddressBarExtensionsVisible],showAllExtensionsButton:e[P.kAddressBarExtensionsShowAllToggle],showHiddenExtensionsButton:e[P.kAddressBarExtensionsShowHiddenToggle],renderInDropdown:e[P.kAddressBarExtensionsRenderInDropdown],toggleExtensionToolbar:TJ,popupPosition:u,size:this.props.size,__source:{fileName:bJ,lineNumber:1234,columnNumber:11}}),this.state.isAddressBarVisible&&W.ZP.isIncognito(this.context.vivaldiWindowId)&&s.createElement(kJ,{className:"UrlBar-PrivateWindowIndicator",__source:{fileName:bJ,lineNumber:1247,columnNumber:11}}))}}NJ(ZJ,"contextType",Vs.Z);const PJ=(0,bi.Z)(ZJ,EJ);var DJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\MainBar.jsx";function MJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OJ(e){return{url:e.url,id:e.id,active:e.active,favIconUrl:e.favIconUrl,isMailPage:e.isMailPage&&!A.ZP.get(P.kMailIsTurnedOff)}}class xJ extends s.PureComponent{constructor(...e){super(...e),MJ(this,"state",{...OJ(V.ZP.getActivePage()||new Kd.ZP)}),MJ(this,"extensionAnchor",s.createRef()),MJ(this,"pageStoreChanged",(()=>{const e=V.ZP.getActivePage();e&&this.setState(OJ(e))}))}componentDidMount(){V.ZP.addChangeListener(this.pageStoreChanged)}componentWillUnmount(){V.ZP.removeChangeListener(this.pageStoreChanged)}render(){return this.state.isMailPage?s.createElement(Ip,{url:this.state.url,__source:{fileName:DJ,lineNumber:62,columnNumber:9}}):s.createElement(s.Fragment,null,s.createElement(PJ,{extensionAnchor:this.extensionAnchor,readonly:!1,showNavigationButtons:!0,url:this.state.url,id:this.state.id,size:this.props.size,active:this.state.active,favIconUrl:this.state.favIconUrl,__source:{fileName:DJ,lineNumber:64,columnNumber:9}}),s.createElement("div",{ref:this.extensionAnchor,__source:{fileName:DJ,lineNumber:74,columnNumber:9}}))}}MJ(xJ,"contextType",Vs.Z);const LJ=xJ;var RJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\CalendarAccountSheet.jsx";function BJ(e){const[t,n]=s.useState(!1);return s.createElement("div",{className:"CalendarAccountSheet",__source:{fileName:RJ,lineNumber:18,columnNumber:5}},s.createElement("button",{className:"CalendarAccountSheet-Exit",onClick:e.onClose,__source:{fileName:RJ,lineNumber:19,columnNumber:7}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:RJ,lineNumber:20,columnNumber:9}})),!t&&s.createElement("div",{className:"setting-section",__source:{fileName:RJ,lineNumber:24,columnNumber:9}},s.createElement(SD,{searchableStrings:WD,filter:"",showTips:()=>n(!0),done:e.onClose,onboarding:!0,__source:{fileName:RJ,lineNumber:25,columnNumber:11}})),t&&s.createElement(xD,{onClose:e.onClose,onboarding:!0,__source:{fileName:RJ,lineNumber:35,columnNumber:9}}))}var FJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarEditEventDialog.jsx";function UJ(e){e&&e.target.addEventListener("click",Rx.Z,{once:!0})}const VJ=function(e){const{document:t}=s.useContext(Vs.Z),{editor:n}=e,{eventDraft:i}=iD(n.pageId),r=s.useRef(!1);if(s.useEffect((()=>()=>{if(!r.current){"cancel"===A.ZP.get(P.kCalendarClickOutside)?a.Z.cancelEventEdit(n):a.Z.saveEventEdit(n)}}),[n]),!i)return null;function o(){requestAnimationFrame((()=>{const e=t.getElementsByClassName("calendar-grid")[0];e instanceof HTMLElement&&e.focus()}))}async function l(t){r.current=!0,UJ(t);await a.Z.saveEventEdit(n)&&e.onClose().then(o)}function c(t){r.current=!0,UJ(t),a.Z.cancelEventEdit(n),e.onClose().then(o)}return s.createElement(tD.Provider,{value:{displayDensity:"full",editor:n,isActivePage:!1,isPanel:!1},__source:{fileName:FJ,lineNumber:95,columnNumber:5}},s.createElement("div",{className:"dialog-add-event",onKeyDown:function(e){const t=ST.Z[e.keyCode];"Enter"!==t||e.shiftKey?"Escape"===t&&c():(e.preventDefault(),e.stopPropagation(),l())},__source:{fileName:FJ,lineNumber:101,columnNumber:7}},s.createElement("div",{className:"dialog-content",__source:{fileName:FJ,lineNumber:102,columnNumber:9}},s.createElement(gG,{event:i,__source:{fileName:FJ,lineNumber:103,columnNumber:11}})),s.createElement("footer",{className:"dialog-footer",__source:{fileName:FJ,lineNumber:105,columnNumber:9}},s.createElement("input",{type:"button",className:"primary",value:i.id?(0,ue.Z)("calendar","Done"):i.task?(0,ue.Z)("Add Task"):(0,ue.Z)("Add Event"),onClick:l,__source:{fileName:FJ,lineNumber:106,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:c,__source:{fileName:FJ,lineNumber:113,columnNumber:11}}),!!i.id&&s.createElement("input",{type:"button",value:(0,ue.Z)("verb","Delete"),onClick:function(t){r.current=!0,UJ(t),a.Z.trashEvent(n,i.id),e.onClose().then(o)},__source:{fileName:FJ,lineNumber:118,columnNumber:13}}))))};const HJ=function(e){const[t,n]=s.useState(Gc.Z.getImportStatus(e));return s.useEffect((()=>{const t=t=>{"importCount"===t&&n(Gc.Z.getImportStatus(e))};return Gc.Z.addChangeListener(t),()=>{Gc.Z.removeChangeListener(t)}}),[e]),t};var WJ=n(34155),zJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarImportEventsDialog.jsx";const GJ="importdialog";const KJ=function(e){const{filePath:t}=e,[n,i]=(0,s.useState)(Gc.Z.getDefaultCalendar()?.id??""),[r,o]=(0,s.useState)("init"),[l,c]=(0,s.useState)([]);(0,s.useEffect)((()=>{o("readingFile"),o("parsingIcsEvents"),async function(){const e=await b.Z.mailPrivate.readFileToText(t);c(await(0,bT.Z)(e).VEVENT)}().then((()=>{const e=l.length;0===e?o("noEventFound"):1===e?o("eventFound"):e>1&&o("eventsFound")}))}),[l.length,t]);const{eventsToImportCount:u,importedEventsCount:m,importEventState:d}=HJ(GJ);async function h(){l.length?(o("importStarted"),WJ.nextTick((async()=>{await(0,dT.CJ)(n,GJ,l),o("importFinished")}))):o("noEventFound")}function p(){Gc.Z.clearImportStatus(GJ),e.onClose()}const g=m.reduce(((e,t)=>e+t),0),N=Math.round(g/u*100);return s.createElement("div",{className:"dialog-import-events",onKeyDown:function(e){const t=ST.Z[e.keyCode];"Enter"!==t||e.shiftKey?"Escape"===t&&p():(e.preventDefault(),e.stopPropagation(),h())},__source:{fileName:zJ,lineNumber:142,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:zJ,lineNumber:143,columnNumber:7}},s.createElement("h1",{className:"dialog-title",__source:{fileName:zJ,lineNumber:144,columnNumber:9}},(0,ue.Z)("Calendar Import"))),s.createElement("div",{className:"dialog-content",__source:{fileName:zJ,lineNumber:146,columnNumber:7}},s.createElement("div",{__source:{fileName:zJ,lineNumber:147,columnNumber:9}},function(e){switch(e){case"init":return(0,ue.Z)("Import Events");case"readingFile":return(0,ue.Z)("Reading file...");case"parsingIcsEvents":return(0,ue.Z)("Parsing event(s)...");case"eventsFound":return(0,ue.Z)("Events found: $1",[l.length]);case"eventFound":return(0,ue.Z)("Event found");case"importStarted":return(0,ue.Z)("Importing...");case"importFinished":return(0,ue.Z)("Import Finished");case"noEventFound":return(0,ue.Z)("No event(s) found");default:return""}}(r)),"eventsFound"===r&&s.createElement("div",{className:"dialog-row",__source:{fileName:zJ,lineNumber:115,columnNumber:7}},s.createElement("p",{className:"description",__source:{fileName:zJ,lineNumber:116,columnNumber:9}},(0,ue.Z)("Import to:")),s.createElement("div",{__source:{fileName:zJ,lineNumber:117,columnNumber:9}},s.createElement("select",{onChange:i,name:"calendarId",value:n,__source:{fileName:zJ,lineNumber:118,columnNumber:11}},Gc.Z.getCalendars().map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:zJ,lineNumber:120,columnNumber:15}},e.description||e.name)))))),g>0&&s.createElement("span",{__source:{fileName:zJ,lineNumber:150,columnNumber:11}},(0,ue.Z)("Imported $1 of $2 ($3%)",[g,u,N]))),"eventFound"===r&&function(){const e=l[0],t=(0,dT.rP)(e);a.Z.addEventCommand(t)}(),s.createElement("footer",{className:"dialog-footer",__source:{fileName:zJ,lineNumber:162,columnNumber:7}},"eventsFound"===r&&s.createElement(s.Fragment,null,s.createElement("input",{type:"button",className:"primary",onClick:h,value:(0,ue.Z)("Import"),__source:{fileName:zJ,lineNumber:165,columnNumber:13}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Close"),onClick:p,__source:{fileName:zJ,lineNumber:171,columnNumber:13}})),"noEventFound"===r&&s.createElement("input",{type:"button",value:(0,ue.Z)("Close"),onClick:p,__source:{fileName:zJ,lineNumber:175,columnNumber:11}}),"IMPORT_FINISHED"===d&&s.createElement("input",{type:"button",value:(0,ue.Z)("OK"),onClick:p,__source:{fileName:zJ,lineNumber:178,columnNumber:11}})))};var jJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarModal.jsx";const YJ=function(e){const{document:t}=s.useContext(Vs.Z),{modal:n,resolve:i=(e=>{})}=e;return s.createElement(ln.Z,{viewMode:"calendar-dialog slide",onRequestClose:()=>i({action:n.cancelAction.action}),__source:{fileName:jJ,lineNumber:38,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:jJ,lineNumber:42,columnNumber:7}},s.createElement("h1",{className:"dialog-title",__source:{fileName:jJ,lineNumber:43,columnNumber:9}},n.title)),s.createElement("div",{className:"dialog-content",__source:{fileName:jJ,lineNumber:47,columnNumber:7}},n.body,n.inputs&&s.createElement("div",{className:"dialog-inputs",__source:{fileName:jJ,lineNumber:50,columnNumber:11}},n.inputs.map(((e,t)=>s.createElement(s.Fragment,{key:t,__source:{fileName:jJ,lineNumber:52,columnNumber:15}},s.createElement("label",{htmlFor:e.name,__source:{fileName:jJ,lineNumber:53,columnNumber:17}},e.label),s.createElement("textarea",{name:e.name,__source:{fileName:jJ,lineNumber:54,columnNumber:17}}))))),n.checks&&s.createElement("div",{className:"dialog-inputs",__source:{fileName:jJ,lineNumber:60,columnNumber:11}},n.checks.map(((e,t)=>s.createElement("label",{key:t,__source:{fileName:jJ,lineNumber:62,columnNumber:15}},s.createElement("input",{type:"checkbox",name:e.name,__source:{fileName:jJ,lineNumber:63,columnNumber:17}}),s.createElement("span",{__source:{fileName:jJ,lineNumber:64,columnNumber:17}},e.label)))))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:jJ,lineNumber:70,columnNumber:7}},n.actions.concat([n.cancelAction]).map((r=>s.createElement("input",{autoFocus:r.default,key:r.title,onClick:()=>{!function(e){const s=n.checks?.reduce(((e,{name:n})=>{const s=t.querySelector(`input[name="${n}"]`);return s instanceof HTMLInputElement&&(e[n]=Boolean(s.checked)),e}),{}),r=n.inputs?.reduce(((e,{name:n})=>{const s=t.querySelector(`textarea[name="${n}"]`);return s instanceof HTMLTextAreaElement&&(e[n]=s.value),e}),{});i({action:e,checks:s,inputs:r})}(r.action),e.onClose()},type:"button",value:r.title,__source:{fileName:jJ,lineNumber:72,columnNumber:11}})))))};var $J=n(38504),XJ=n(78508);var QJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\WipeScreen.jsx";const qJ=function(e){const t=s.useRef(),n=s.useRef({}),[i,r]=s.useState(!1),[a,o]=s.useState(!1),l=s.useContext(Vs.Z),c=l.innerWidth,u=l.innerHeight,m=l.vivaldiWindowId,{children:d,effect:h,showDialog:p}=e,g=s.useCallback((e=>{switch(e){case"showDialog":p();break;case"done":0===s.Children.count(d)&&p(),o(!0)}}),[d,p]);return s.useEffect((()=>{if(!i){const e={windowId:m,posX:0,posY:0,width:c,height:u,saveToDisk:!1};b.Z.thumbnails.captureUI(e,((e,s)=>{e?("melt"===h?n.current=function(e,t,n,s,i){const r=200,a=.04,o=1e3,l=Math.round(n/r),c=n/l,u=Math.round(s*a),m=4*u;let d="initial";const h=[];let p,g=0;const b=document.createElement("canvas");b.width=n,b.height=s;const N=b.getContext("2d"),f=new Image(n,s);return f.onload=()=>N.drawImage(f,0,0,n,s),f.src=t,{effect:function t(r){if(!e.current)return;if(0===h.length){for(let e=0;e<c;e++)h[e]=0===e?-Math.floor(Math.random()*m):h[e-1]+(Math.floor(Math.random()*u)-u/2),h[e]>0?h[e]=0:h[e]<-m&&(h[e]=-m);g=r}if(g===r)return void(p=requestAnimationFrame(t));const a=e.current.getContext("2d");let N=!0,f=0,_=s;const v=s*(r-g)/o;g=r,a.clearRect(0,0,n,s);for(let e=0;e<c;e++)h[e]+=v,h[e]<0?(N=!1,f=0):h[e]<s?(N=!1,f=h[e]):f=s,_=Math.min(f,_),a.drawImage(b,e*l,0,l,s,e*l,f,l,s);"showDialog"!==d&&_>s/2&&!N&&(d="showDialog",i(d)),N?i("done"):p=requestAnimationFrame(t)},cleanUp:function(){p&&cancelAnimationFrame(p)}}}(t,s,c,u,g):"burn"===h&&(n.current=function(e,t,n,s,i){const r=320,a=82,o=2,l=4.25,c=1600,u=1600;let m;const d=document.createElement("canvas");d.width=r,d.height=a;const h=d.getContext("2d"),p=h.getImageData(0,0,r,a),g=p.data,b=[];for(let e=0;e<256;e++)b[e]=to().hsl(Math.round(e/3),1,Math.min(1,e/192)).rgb();const N=[...Array(a).keys()].map((e=>Array(r)));for(let e=0;e<a;++e)for(let t=0;t<r;++t)N[e][t]=0;let f,_=o,v=l,E=0,C="initial";return{effect:function t(l){const w=e.current;if(!w)return;if(f=f||l,E===l)return void(m=requestAnimationFrame(t));const y=l-E;E=l;for(let e=0;e<r;e++)N[a-1][e]=Math.random()>.5?255:0;let S=0;for(let e=0;e<a-1;++e)for(let t=0;t<r;++t){let n=N[(e+1)%a][(t-1+r)%r]+N[(e+1)%a][t]+N[(e+1)%a][(t+1)%r]+N[(e+2)%a][t];n/=v,N[e][t]=Math.floor(n)}for(let e=0;e<a;++e)for(let t=0;t<r;++t){let n=e*r*4+4*t;S=N[e][t];const[s,i,a]=b[S],o=Math.min(255,2*(s+i+a));g[n]=s,g[++n]=i,g[++n]=a,g[++n]=o}h.putImageData(p,0,0);const T=w.getContext("2d");T.clearRect(0,0,n,s),T.drawImage(d,0,0,r,a-_,0,0,n,s);const k=l-f;if(k>c){"showDialog"!==C&&(C="showDialog",i(C));const e=k-c;v+=y/u*3,_=Math.round(o+10*e/u)}k>c+u?i("done"):m=requestAnimationFrame(t)},cleanUp:function(){m&&cancelAnimationFrame(m)}}}(t,0,c,u,g)),r(!0),requestAnimationFrame(n.current.effect)):(at.ZP.warn("Calendar","Failed to capture UI for wipe effect"),r(!0),o(!0),p())}))}return()=>{n.current.cleanUp}}),[u,c,g,h,p,i,m]),s.createElement(s.Fragment,null,i&&s.Children.count(e.children)&&s.createElement("div",{className:"wipe-container",onClick:e.showDialog,__source:{fileName:QJ,lineNumber:81,columnNumber:9}},e.children),i&&!a&&s.createElement("canvas",{width:c,height:u,ref:t,__source:{fileName:QJ,lineNumber:86,columnNumber:9}}))};var JJ="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarNotification.jsx";function e1(){return e1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},e1.apply(this,arguments)}function t1(e){const[t,n]=s.useState("5"),i=Gc.Z.getEvent(e.notification.event_id||"");if(!i)return null;return s.createElement(s.Fragment,null,s.createElement("div",{className:"CalendarNotification-Content",__source:{fileName:JJ,lineNumber:60,columnNumber:7}},s.createElement("span",{className:"CalendarNotification-Time",__source:{fileName:JJ,lineNumber:61,columnNumber:9}},g()((0,AT.oJ)(i)).format("LT")),s.createElement("span",{className:"CalendarNotification-Text",__source:{fileName:JJ,lineNumber:64,columnNumber:9}},i.title)),s.createElement("footer",{className:"dialog-footer CalendarNotifications-Footer",__source:{fileName:JJ,lineNumber:68,columnNumber:7}},s.createElement("input",{className:"CalendarNotification-Button primary",type:"button",value:(0,ue.Z)("Dismiss"),onClick:()=>e.onClose(e.notification.id),__source:{fileName:JJ,lineNumber:69,columnNumber:9}}),s.createElement("span",{__source:{fileName:JJ,lineNumber:77,columnNumber:9}},(0,ue.Z)("or")),s.createElement("input",{className:"CalendarNotification-Button",type:"button",value:(0,ue.Z)("Snooze"),onClick:()=>{const n=parseInt(t);$J.Z.snooze(e.notification,i,n||5),e.onClose(e.notification.id)},__source:{fileName:JJ,lineNumber:78,columnNumber:9}}),s.createElement("input",{className:"CalendarNotification-Input",type:"number",value:t,onChange:e=>{n(e.target.value)},onBlur:e=>{e.target.value||n("5")},__source:{fileName:JJ,lineNumber:85,columnNumber:9}}),(0,ue.Z)("minutes")))}function n1(e){const t=t=>{$J.Z.snooze(e.notification,e.event,t),e.onClose(e.notification.id)};return s.createElement("div",{className:"CalendarNotification-Content",__source:{fileName:JJ,lineNumber:109,columnNumber:5}},s.createElement("span",{className:"CalendarNotification-Time",__source:{fileName:JJ,lineNumber:110,columnNumber:7}},g()((0,AT.oJ)(e.event)).format("LT")),s.createElement("span",{className:"CalendarNotification-Text",__source:{fileName:JJ,lineNumber:113,columnNumber:7}},e.event.title),s.createElement("div",{className:"CalendarNotification-Actions",__source:{fileName:JJ,lineNumber:116,columnNumber:7}},s.createElement(ko,{title:(0,ue.Z)("Snooze"),tabIndex:0,isMenuIndicatorVisible:!0,menu:()=>[{handler:()=>t(1),...(0,Mn.Z)("1 minute")},{handler:()=>t(5),...(0,Mn.Z)("5 minutes")},{handler:()=>t(15),...(0,Mn.Z)("15 minutes")},{handler:()=>t(30),...(0,Mn.Z)("30 minutes")},{handler:()=>t(60),...(0,Mn.Z)("1 hour")}],menuOrigin:"bottomRight",__source:{fileName:JJ,lineNumber:117,columnNumber:9}}),s.createElement(ko,{onClick:()=>{e.onClose(e.notification.id)},title:(0,ue.Z)("Dismiss"),tabIndex:0,__source:{fileName:JJ,lineNumber:131,columnNumber:9}}),s.createElement("div",{className:"CalendarNotification-HoverBackground",__source:{fileName:JJ,lineNumber:137,columnNumber:9}})))}function s1(e){const t=s.useMemo((()=>e.notifications.map((e=>{const t=Gc.Z.getEvent(e.event_id||"");return t?{notification:e,event:t}:null})).filter(Boolean).sort(((e,t)=>(0,AT.oJ)(e.event)-(0,AT.oJ)(t.event)))),[e.notifications]),[n,i]=s.useState(1===t.length);return s.useEffect((()=>{n&&t.length>1&&i(!1)}),[n,t.length]),s.createElement(gi.Z,{focusName:"focus_notfications",forceTrap:!0,__source:{fileName:JJ,lineNumber:173,columnNumber:5}},s.createElement("div",{className:bn()("CalendarNotifications",{"CalendarNotifications--FadeUp":"up"===e.fade,"CalendarNotifications--FadeDown":"down"===e.fade}),__source:{fileName:JJ,lineNumber:174,columnNumber:7}},s.createElement("header",{className:"dialog-header CalendarNotifications-Header",__source:{fileName:JJ,lineNumber:183,columnNumber:9}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.l0O.medium},__source:{fileName:JJ,lineNumber:184,columnNumber:11}}),s.createElement("span",{className:"CalendarNotifications-Title",__source:{fileName:JJ,lineNumber:185,columnNumber:11}},t.length>1?(0,ue.Z)("Notifications"):(0,ue.Z)("Notification"))),!n&&s.createElement(s.Fragment,null,s.createElement("div",{className:"CalendarNotifications-List",__source:{fileName:JJ,lineNumber:190,columnNumber:11}},t.map((({notification:t,event:n})=>s.createElement(n1,{key:t.id,notification:t,event:n,onClose:e.onClose,__source:{fileName:JJ,lineNumber:192,columnNumber:15}})))),s.createElement("footer",{className:"dialog-footer CalendarNotifications-Footer",__source:{fileName:JJ,lineNumber:200,columnNumber:11}},s.createElement("input",{autoFocus:!0,className:"CalendarNotifications-Button primary",type:"button",value:(0,ue.Z)("Dismiss All"),onClick:function(){e.notifications.forEach((t=>e.onClose(t.id)))},__source:{fileName:JJ,lineNumber:201,columnNumber:13}}))),n&&s.createElement(t1,{notification:t[0].notification,event:t[0].event,onClose:e.onClose,__source:{fileName:JJ,lineNumber:212,columnNumber:11}})))}const i1=function(e){const t=A.ZP.get(P.kCalendarNotificationType),[n,i]=s.useState(!("melt"===t||"burn"===t)),[r,a]=s.useState(XJ.Z.getState().activeNotifications),[o]=s.useState(XJ.Z.addListener((()=>{const t=XJ.Z.getState().activeNotifications;0===t.length?0!==r.length&&e.onClose():a(t)})));s.useEffect((()=>()=>o.remove()),[o]);const l=s.useCallback((()=>{i(!0)}),[]);s.useEffect((()=>{let e;return"melt"!==t&&"burn"!==t||(e=setTimeout(l,8e3)),()=>{e&&clearTimeout(e)}}),[t,l]);const c={notifications:r,onClose:function(e){m.Z.dispatch({actionType:"MAIN_HIDE_CALENDAR_ALARM",notificationId:e})},fade:"melt"===t?"down":"up"};return s.createElement(s.Fragment,null,("melt"===t||"burn"===t)&&s.createElement(qJ,{effect:t,showDialog:l,__source:{fileName:JJ,lineNumber:279,columnNumber:9}},n&&s.createElement(s1,e1({},c,{__source:{fileName:JJ,lineNumber:280,columnNumber:26}}))),"dialog"===t&&s.createElement(s1,e1({},c,{__source:{fileName:JJ,lineNumber:284,columnNumber:9}})))};var r1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CreateCalendarDialog.jsx";const a1=function(e){const t=Gc.Z.getAccounts(),[n,i]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1),[d,h]=(0,s.useState)(Gc.Z.getDefaultAccountId());function p(e){c(e)}return s.createElement("div",{className:"dialog-add-calendar",__source:{fileName:r1,lineNumber:80,columnNumber:5}},s.createElement("div",{className:"dialog-header",__source:{fileName:r1,lineNumber:81,columnNumber:7}},s.createElement("h1",{className:"dialog-title",__source:{fileName:r1,lineNumber:82,columnNumber:9}},(0,ue.Z)("Add a New Calendar"))),0===t.length?s.createElement(s.Fragment,null,s.createElement("div",{className:"dialog-content",__source:{fileName:r1,lineNumber:85,columnNumber:9}},(0,ue.Z)("You have no calendar Account set up. Create one in Settings.")),s.createElement("footer",{className:"dialog-footer",__source:{fileName:r1,lineNumber:88,columnNumber:9}},s.createElement("input",{type:"button",className:"primary",value:(0,ue.Z)("Open Calendar Settings"),onClick:function(t){se.Z.showSettings("calendar"),e.onClose()},__source:{fileName:r1,lineNumber:89,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:e.onClose,__source:{fileName:r1,lineNumber:95,columnNumber:11}}))):s.createElement("form",{onSubmit:async function(){if(""===d)return void p((0,ue.Z)("No Calendar Account exists."));m(!0);const t={name:n,accountId:d,description:n,color:r,supportedCalendarComponent:{vevent:!0,vtodo:!1,vjournal:!1}};a.Z.setDefaultAccountId(t.accountId);const{result:s}=await a.Z.createCalendar(t,!0);s.status?e.onClose():p(s.message)},__source:{fileName:r1,lineNumber:102,columnNumber:9}},s.createElement("div",{className:"dialog-content",__source:{fileName:r1,lineNumber:103,columnNumber:11}},t.length>1&&s.createElement("label",{className:"floating-label",__source:{fileName:r1,lineNumber:105,columnNumber:15}},s.createElement("span",{__source:{fileName:r1,lineNumber:106,columnNumber:17}},(0,ue.Z)("Account")),s.createElement("select",{onChange:function(e){h(e.target.value)},value:d,__source:{fileName:r1,lineNumber:107,columnNumber:17}},t.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:r1,lineNumber:109,columnNumber:21}},e.name))))),s.createElement(cP.Z,{type:"text",onChange:function(e){i(e.target.value)},label:(0,ue.Z)("Calendar Name"),value:n,autoFocus:!0,__source:{fileName:r1,lineNumber:117,columnNumber:13}}),s.createElement(oM,{label:(0,ue.Z)("Calendar color","Color"),colorKey:"color",colorValue:r||eD.Z.getCalendarCreateColor(),setColor:function(e,t,n=!1){o(e.hex())},predefinedColors:ru.hx,__source:{fileName:r1,lineNumber:125,columnNumber:13}}),l&&s.createElement(Qc,{type:"warning",__source:{fileName:r1,lineNumber:135,columnNumber:25}},l)),s.createElement("footer",{className:"dialog-footer",__source:{fileName:r1,lineNumber:138,columnNumber:11}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Add Calendar"),disabled:!n.length||u,__source:{fileName:r1,lineNumber:139,columnNumber:13}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Cancel"),onClick:e.onClose,__source:{fileName:r1,lineNumber:144,columnNumber:13}}))))};n(67972);var o1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ImportCalendar.jsx";function l1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c1="CREATE_CALENDAR";class u1 extends s.PureComponent{constructor(...e){super(...e),l1(this,"displayName","ImportEvent"),l1(this,"onNameChange",(e=>{const{importOption:t}=this.props,n=e.target.value===c1?{createNew:!0}:{calendarId:e.target.value,createNew:!1};this.props.calendarChange(t.importId,{...t,...n})})),l1(this,"setCreateNewName",(e=>{const{importOption:t}=this.props;this.props.calendarChange(t.importId,{...t,newCalendarName:e.target.value})})),l1(this,"renderProgress",(()=>{const{importedEventsCount:e,eventsToImportCount:t}=this.props.importStatus,n=e.reduce(((e,t)=>e+t),0),i=Math.round(n/t*100);return s.createElement(s.Fragment,null,t>0&&i<100&&s.createElement("span",{className:"spinner",dangerouslySetInnerHTML:{__html:cn.H0I},__source:{fileName:o1,lineNumber:54,columnNumber:9}}),t>0&&100===i&&s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.wHY},__source:{fileName:o1,lineNumber:57,columnNumber:9}}))}))}render(){const{importOption:e}=this.props,{importId:t,createNew:n,calendarId:i,newCalendarName:r}=e,a=this.props.importStatus?.eventsToImportCount||!1;return s.createElement(s.Fragment,null,s.createElement("div",{className:"import-calendar-target",__source:{fileName:o1,lineNumber:69,columnNumber:9}},this.props.importStatus&&s.createElement("div",{className:"import-calendar-icon",__source:{fileName:o1,lineNumber:72,columnNumber:13}},this.renderProgress()),s.createElement("label",{__source:{fileName:o1,lineNumber:77,columnNumber:11}},s.createElement("span",{__source:{fileName:o1,lineNumber:78,columnNumber:13}},"url"===t?(0,ue.Z)("Import to:"):(0,ue.Z)("$1 to:",[t])),s.createElement("select",{disabled:a,onChange:this.onNameChange,name:"calendarId",value:n?c1:i,__source:{fileName:o1,lineNumber:85,columnNumber:13}},this.props.calendars.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:o1,lineNumber:95,columnNumber:17}},e.description||e.name))),s.createElement("option",{value:c1,__source:{fileName:o1,lineNumber:99,columnNumber:15}},n?r:(0,ue.Z)("New Calendar...")))),this.props.importStatus&&s.createElement("p",{__source:{fileName:o1,lineNumber:109,columnNumber:13}},ru.wt[this.props.importStatus.importEventState])),n&&s.createElement("label",{className:"import-calendar-target-create",__source:{fileName:o1,lineNumber:116,columnNumber:11}},s.createElement("span",{__source:{fileName:o1,lineNumber:117,columnNumber:13}},(0,ue.Z)("New Calendar Name")),s.createElement("input",{value:r,onChange:this.setCreateNewName,disabled:a,__source:{fileName:o1,lineNumber:120,columnNumber:13}})))}}const m1=u1;var d1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ImportCalendarDialog.jsx";function h1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p1=["STARTING_PARSING_EVENTS","PARSING_FINISHED","IMPORTING","IMPORT_FINISHED","IMPORT_ERROR"];class g1 extends s.PureComponent{constructor(...e){super(...e),h1(this,"displayName","ImportCalendarDialog"),h1(this,"state",{importOptions:{},importStatus:{},url:"",fileEntries:[],calendarId:Gc.Z.getDefaultCalendar()?.id??"",calendarName:"",importType:"file"}),h1(this,"_onStoreChange",(e=>{if("importCount"===e){const e={};Object.keys(this.state.importOptions).forEach((t=>e[t]=Gc.Z.getImportStatus(t))),this.setState({importStatus:e})}})),h1(this,"connect",(()=>{const{url:e,importOptions:t}=this.state,n=t.url;e&&(0,As.C3)(e)&&function(e,t){fetch(e).then((e=>{if(200!==e.status)throw`Fetch remote calendar. Status code: ${e.status}`;return e.text().then((e=>{(0,dT.tP)(e,t)})).catch((e=>{at.ZP.warn("Calendar",["network"],"Error fetching calendar",e)}))}))}(e,n)})),h1(this,"onDismiss",(()=>{a.Z.clearImportCache(),this.props.onClose()})),h1(this,"onUrlChange",(e=>{this.setState({importStatus:{},url:e.target.value})})),h1(this,"onCalendarNameChange",(e=>{this.setState({calendarName:e.target.value})})),h1(this,"loadImport",(async()=>{const e={},t=await a.Z.pickFilesForImport();t.forEach((t=>{e[t.name]={createNew:0===Gc.Z.getCalendars().length,calendarId:Gc.Z.getDefaultCalendar()?.id,newCalendarName:t.name,importId:t.name}})),this.setState({fileEntries:t,importOptions:e,importStatus:{}}),this.props.preventClosingByDelay()})),h1(this,"onSubmit",(()=>{(0,As.C3)(this.state.url)?this.connect():a.Z.startCalendarImport(this.state.importOptions)})),h1(this,"onCalendarChange",((e,t)=>{this.setState((n=>({importOptions:{...n.importOptions,[e]:t}})))})),h1(this,"renderFileImport",(()=>s.createElement(s.Fragment,null,s.createElement("div",{className:"import-calendar-file",__source:{fileName:d1,lineNumber:141,columnNumber:7}},s.createElement("input",{autoFocus:!0,type:"button",title:(0,ue.Z)("Select ICS File to Import"),value:(0,ue.Z)("Choose Files..."),onClick:this.loadImport,__source:{fileName:d1,lineNumber:142,columnNumber:9}})),this.state.fileEntries.length>0&&s.createElement("div",{className:"import-calendar-targets",__source:{fileName:d1,lineNumber:151,columnNumber:9}},this.state.fileEntries.map((e=>s.createElement(m1,{key:e.name,calendarChange:this.onCalendarChange,importOption:this.state.importOptions[e.name],importStatus:this.state.importStatus[e.name],calendars:this.props.calendars,__source:{fileName:d1,lineNumber:153,columnNumber:13}}))))))),h1(this,"setImportType",(e=>{"file"===e?this.setState({importType:e,fileEntries:[]}):"url"===e&&this.setState({importType:e,importOptions:{url:{createNew:0===Gc.Z.getCalendars().length,calendarId:Gc.Z.getDefaultCalendar()?.id??"",newCalendarName:(0,ue.Z)("My Calendar"),importId:"url"}}})}))}componentDidMount(){Gc.Z.addChangeListener(this._onStoreChange)}componentWillUnmount(){Gc.Z.removeChangeListener(this._onStoreChange)}renderNetImport(){return s.createElement(s.Fragment,null,s.createElement("div",{className:"import-calendar-file",__source:{fileName:d1,lineNumber:168,columnNumber:7}},s.createElement(cP.Z,{type:"text",onChange:this.onUrlChange,label:(0,ue.Z)("Remote ICS Address"),value:this.state.url,__source:{fileName:d1,lineNumber:169,columnNumber:9}})),s.createElement("div",{className:"import-calendar-targets",__source:{fileName:d1,lineNumber:177,columnNumber:7}},s.createElement(m1,{calendarChange:this.onCalendarChange,importOption:this.state.importOptions.url,importStatus:this.state.importStatus.url,calendars:this.props.calendars,__source:{fileName:d1,lineNumber:178,columnNumber:9}})))}disableImport(){const{fileEntries:e,url:t,importType:n,importStatus:s}=this.state,i="url"===n&&!(0,As.C3)(t)||"file"===n&&0===e.length,r=Object.keys(s).some((e=>p1.includes(s[e].importEventState)));return i||r||0===this.props.calendars.length}render(){return s.createElement("form",{className:"import-calendar",onSubmit:this.onSubmit,__source:{fileName:d1,lineNumber:221,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:d1,lineNumber:222,columnNumber:9}},s.createElement("h1",{__source:{fileName:d1,lineNumber:223,columnNumber:11}},(0,ue.Z)("Import Calendar Events"))),s.createElement("div",{className:"dialog-content",__source:{fileName:d1,lineNumber:225,columnNumber:9}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:d1,lineNumber:227,columnNumber:11}},s.createElement("div",{className:"toolbar-group",__source:{fileName:d1,lineNumber:228,columnNumber:13}},s.createElement(ko,{title:(0,ue.Z)("Local File"),isPressed:"file"===this.state.importType,onClick:()=>this.setImportType("file"),__source:{fileName:d1,lineNumber:229,columnNumber:15}}),s.createElement(ko,{title:(0,ue.Z)("Remote iCal"),isPressed:"url"===this.state.importType,onClick:()=>this.setImportType("url"),__source:{fileName:d1,lineNumber:234,columnNumber:15}}))),"file"===this.state.importType&&this.renderFileImport(),"url"===this.state.importType&&this.renderNetImport()),s.createElement("footer",{className:"dialog-footer",__source:{fileName:d1,lineNumber:244,columnNumber:9}},s.createElement("input",{type:"submit",disabled:this.disableImport(),value:(0,ue.Z)("Start Import"),__source:{fileName:d1,lineNumber:245,columnNumber:11}}),s.createElement("input",{type:"button",onClick:this.onDismiss,value:(0,ue.Z)("Close"),__source:{fileName:d1,lineNumber:250,columnNumber:11}})))}}const b1=cD(g1);var N1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\MailAccountSheet.jsx";function f1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _1 extends s.PureComponent{constructor(e){super(e),f1(this,"_isMounted",!1),f1(this,"loadAccountsAndCapabilities",(async e=>{const t=await Ym.Z.loadAllAccounts();let n=this.state.currentAccount;if(t.length<this.state.accounts.length)n=void 0,this.setState({accounts:t,currentAccount:n});else{let s;e&&t.length>this.state.accounts.length&&(n=t.find((e=>!this.state.accounts.some((t=>t.MAIL_EMAIL===e.MAIL_EMAIL)))),s="signature");const i=await ia.Z.getCapabilities();this._isMounted&&(s?this.setState({accounts:t,capabilities:i,setupStep:s,currentAccount:n}):this.setState({accounts:t,capabilities:i,currentAccount:n}))}})),f1(this,"showTips",(()=>{this.setState({setupStep:"tips"})})),f1(this,"onCreateItem",(()=>{this.setState({setupStep:"setup"})})),this.state={accounts:[],currentAccount:void 0,capabilities:{},setupStep:"setup"}}componentDidMount(){this._isMounted=!0,this.loadAccountsAndCapabilities()}componentDidUpdate(e){if(e.prefValues[P.kMailAccounts]!==this.props.prefValues[P.kMailAccounts]){const e=!0;this.loadAccountsAndCapabilities(e)}}render(){if("tips"===this.state.setupStep)return s.createElement("div",{className:"MailAccountSheet vivaldi-settings",__source:{fileName:N1,lineNumber:102,columnNumber:9}},s.createElement("button",{className:"MailAccountSheet-exit",onClick:this.props.onClose,__source:{fileName:N1,lineNumber:103,columnNumber:11}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:N1,lineNumber:106,columnNumber:13}})),s.createElement(ZO,{onClose:this.props.onClose,onCreateItem:this.onCreateItem,__source:{fileName:N1,lineNumber:108,columnNumber:11}}));const e=this.state.capabilities[this.state.currentAccount?.MAIL_EMAIL||""]||[];return s.createElement("div",{className:"MailAccountSheet vivaldi-settings",__source:{fileName:N1,lineNumber:117,columnNumber:7}},s.createElement("button",{className:"MailAccountSheet-exit",onClick:this.props.onClose,__source:{fileName:N1,lineNumber:118,columnNumber:9}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:N1,lineNumber:121,columnNumber:11}})),s.createElement("div",{className:"setting-section",__source:{fileName:N1,lineNumber:123,columnNumber:9}},"setup"===this.state.setupStep&&s.createElement(dO,{key:"create",onClose:this.props.onClose,focusInput:!0,emptyAccounts:0===this.state.accounts.length,searchableStrings:cO,__source:{fileName:N1,lineNumber:125,columnNumber:13}}),"signature"===this.state.setupStep&&this.state.currentAccount&&s.createElement(wO,{accountSettings:this.state.currentAccount,capability:e,searchableStrings:vO,showTips:"signature"===this.state.setupStep?()=>this.showTips():void 0,__source:{fileName:N1,lineNumber:133,columnNumber:13}})))}}const v1=(0,bi.Z)(_1,[P.kMailAccounts]);var E1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailAuthenticationDialog.jsx";function C1(e){const[t,n]=s.useState(e.options.account.MAIL_USER||""),[i,r]=s.useState(e.options.account.MAIL_PASSWORD||""),[a,o]=s.useState(!1);return s.createElement("form",{onSubmit:function(n){n.preventDefault();const s={...e.options.account,MAIL_USER:t,MAIL_PASSWORD:i};(0,ga.Z)(s,e.options.account),te.Z.connectIMAPClient(s),e.onClose()},__source:{fileName:E1,lineNumber:61,columnNumber:5}},s.createElement("header",{className:"dialog-double-header",__source:{fileName:E1,lineNumber:62,columnNumber:7}},s.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:cn.Si$.large},__source:{fileName:E1,lineNumber:63,columnNumber:9}}),s.createElement("h1",{className:"dialog-title",__source:{fileName:E1,lineNumber:66,columnNumber:9}},(0,ue.Z)("Authentication Error")),s.createElement("p",{className:"info",__source:{fileName:E1,lineNumber:69,columnNumber:9}},(0,ue.Z)("Enter credentials for $1",[e.options.account.MAIL_EMAIL]))),s.createElement("div",{className:"dialog-content",__source:{fileName:E1,lineNumber:73,columnNumber:7}},s.createElement("h4",{__source:{fileName:E1,lineNumber:74,columnNumber:9}},(0,ue.Z)("IMAP Username")),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:E1,lineNumber:77,columnNumber:9}},s.createElement("input",{type:"text",placeholder:"user@vivaldi.net",value:t,onChange:function(e){n(e.target.value)},__source:{fileName:E1,lineNumber:78,columnNumber:11}})),s.createElement("h4",{__source:{fileName:E1,lineNumber:85,columnNumber:9}},(0,ue.Z)("IMAP Password")),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:E1,lineNumber:88,columnNumber:9}},s.createElement("input",{autoFocus:!0,type:a?"text":"password",placeholder:(0,ue.Z)("My long safe password"),value:i,onChange:function(e){r(e.target.value)},__source:{fileName:E1,lineNumber:89,columnNumber:11}}),s.createElement(ko,{tooltip:(0,ue.Z)("tooltip","Show password"),image:cn.sgm,isPressed:a,onClick:function(){o(!a)},__source:{fileName:E1,lineNumber:99,columnNumber:11}}))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:E1,lineNumber:108,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("mail","Save"),autoFocus:!0,__source:{fileName:E1,lineNumber:109,columnNumber:9}}),s.createElement("input",{type:"button",onClick:e.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:E1,lineNumber:110,columnNumber:9}})))}var w1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDeleteDialog.jsx";function y1(e,t){return t?s.createElement("h1",{__source:{fileName:w1,lineNumber:24,columnNumber:12}},(0,ue.Z)("Permanently Delete Message","Permanently Delete Messages",[e])):s.createElement("h1",{__source:{fileName:w1,lineNumber:26,columnNumber:10}},(0,ue.Z)("Delete Message","Delete Messages",[e]))}const S1=function(e){const{options:t,onClose:n}=e,{entries:i,deletePermanently:r}=t,[a,o]=s.useState((()=>{const e=new Map;return i.forEach((t=>{t.sources.forEach(((t,n)=>{if(!t.deleted){const t=Cm.C.get(n);e.set(t.accountId,!0)}}))})),e}));return s.createElement("form",{onSubmit:function(e){e.preventDefault(),Zd.ZP.delete(i,r,{accountIds:a}),n()},__source:{fileName:w1,lineNumber:224,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:w1,lineNumber:225,columnNumber:7}},y1(i.length,r),s.createElement("p",{__source:{fileName:w1,lineNumber:227,columnNumber:9}},(0,ue.Z)("From which folders would you like to delete the message?","From which folders would you like to delete the messages?",[i.length]))),s.createElement("div",{className:"dialog-content label-list",__source:{fileName:w1,lineNumber:233,columnNumber:7}},[...a.entries()].map(((e,t)=>{const[n,i]=e;return s.createElement("label",{key:n,__source:{fileName:w1,lineNumber:237,columnNumber:13}},s.createElement("input",{type:"checkbox",autoFocus:0===t,checked:i,onChange:()=>{a.set(n,!i),o(new Map([...a.entries()]))},__source:{fileName:w1,lineNumber:238,columnNumber:15}}),s.createElement("span",{__source:{fileName:w1,lineNumber:247,columnNumber:15}},n))}))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:w1,lineNumber:252,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("mail","Delete"),__source:{fileName:w1,lineNumber:253,columnNumber:9}}),s.createElement("input",{type:"button",onClick:n,value:(0,ue.Z)("Cancel"),__source:{fileName:w1,lineNumber:254,columnNumber:9}})))},T1=function(e){const{options:t,onClose:n}=e,{entries:i,deletePermanently:r}=t,a=new Set;i.forEach((e=>{e.sources.forEach(((e,t)=>{e.deleted||a.add(t)}))}));const o=Cm.C.getByIds([...a]);return s.createElement("form",{onSubmit:function(e){e.preventDefault(),Zd.ZP.delete(i,r,{setting:"accounts"}),n()},__source:{fileName:w1,lineNumber:108,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:w1,lineNumber:109,columnNumber:7}},y1(i.length,r),s.createElement("p",{__source:{fileName:w1,lineNumber:111,columnNumber:9}},(0,ue.Z)("Are you sure you want to delete the message from the following folders?","Are you sure you want to delete the messages from the following folders?",[i.length]))),s.createElement("div",{className:"dialog-content label-list",__source:{fileName:w1,lineNumber:117,columnNumber:7}},s.createElement("ul",{__source:{fileName:w1,lineNumber:118,columnNumber:9}},o.map((e=>{const{id:t,accountId:n,path:i}=e;return s.createElement("li",{key:t,__source:{fileName:w1,lineNumber:121,columnNumber:20}},s.createElement("span",{__source:{fileName:w1,lineNumber:122,columnNumber:15}},n),s.createElement("span",{className:"folder-path",__source:{fileName:w1,lineNumber:123,columnNumber:15}},i))})))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:w1,lineNumber:127,columnNumber:7}},s.createElement("input",{type:"submit",className:"danger",value:(0,ue.Z)("mail","Delete"),autoFocus:!0,__source:{fileName:w1,lineNumber:128,columnNumber:9}}),s.createElement("input",{type:"button",onClick:n,value:(0,ue.Z)("Cancel"),__source:{fileName:w1,lineNumber:129,columnNumber:9}})))},k1=function(e){const{options:t,onClose:n}=e,{entries:i,deletePermanently:r}=t,[a,o]=s.useState((()=>{const e=new Map;return i.forEach((t=>{t.sources.forEach(((t,n)=>{t.deleted||e.set(n,!0)}))})),e})),l=Cm.C.getByIds([...a.keys()]);return s.createElement("form",{onSubmit:function(e){e.preventDefault(),Zd.ZP.delete(i,r,{sourceFilterIds:a}),n()},__source:{fileName:w1,lineNumber:162,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:w1,lineNumber:163,columnNumber:7}},y1(i.length,r),s.createElement("p",{__source:{fileName:w1,lineNumber:165,columnNumber:9}},(0,ue.Z)("From which folders would you like to delete the message?","From which folders would you like to delete the messages?",[i.length]))),s.createElement("div",{className:"dialog-content label-list",__source:{fileName:w1,lineNumber:171,columnNumber:7}},l.map(((e,t)=>{const{id:n,accountId:i,path:r}=e,l=a.get(n);return s.createElement("label",{key:n,__source:{fileName:w1,lineNumber:176,columnNumber:13}},s.createElement("input",{type:"checkbox",autoFocus:0===t,checked:l,onChange:()=>{a.set(n,!l),o(new Map([...a.entries()]))},__source:{fileName:w1,lineNumber:177,columnNumber:15}}),s.createElement("span",{__source:{fileName:w1,lineNumber:184,columnNumber:15}},i," ",r))}))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:w1,lineNumber:189,columnNumber:7}},s.createElement("input",{type:"submit",value:(0,ue.Z)("mail","Delete"),__source:{fileName:w1,lineNumber:190,columnNumber:9}}),s.createElement("input",{type:"button",onClick:n,value:(0,ue.Z)("Cancel"),__source:{fileName:w1,lineNumber:191,columnNumber:9}})))},I1=function(e){const{options:t,onClose:n}=e,{entries:i,deletePermanently:r}=t;let a="folders",o=!1;return s.createElement("form",{onSubmit:function(e){if(e.preventDefault(),Zd.ZP.delete(i,r,{setting:a}),o){const e=r?P.kMailDeleteInOtherLocations:P.kMailMarkDeleteInOtherLocations;st.Z.set(e,a)}n()},__source:{fileName:w1,lineNumber:47,columnNumber:5}},s.createElement("header",{className:"dialog-header",__source:{fileName:w1,lineNumber:48,columnNumber:7}},y1(i.length,r)),s.createElement(_i,{className:"dialog-content label-list",name:"mail_delete_dialog_setting",value:a,onChange:e=>a=e.target.value,__source:{fileName:w1,lineNumber:51,columnNumber:7}},r&&s.createElement("label",{__source:{fileName:w1,lineNumber:57,columnNumber:9}},s.createElement("input",{type:"radio",value:"selected",autoFocus:!0,__source:{fileName:w1,lineNumber:58,columnNumber:11}}),s.createElement("span",{__source:{fileName:w1,lineNumber:59,columnNumber:11}},(0,ue.Z)("From the Current Folder Only"))),s.createElement("label",{__source:{fileName:w1,lineNumber:61,columnNumber:9}},s.createElement("input",{type:"radio",value:"folders",__source:{fileName:w1,lineNumber:62,columnNumber:11}}),s.createElement("span",{__source:{fileName:w1,lineNumber:63,columnNumber:11}},(0,ue.Z)("From All Folders on Current Account"))),s.createElement("label",{__source:{fileName:w1,lineNumber:65,columnNumber:9}},s.createElement("input",{type:"radio",value:"accounts",__source:{fileName:w1,lineNumber:66,columnNumber:11}}),s.createElement("span",{__source:{fileName:w1,lineNumber:67,columnNumber:11}},(0,ue.Z)("From All Accounts and Folders")))),s.createElement("footer",{className:"dialog-footer label-list",__source:{fileName:w1,lineNumber:70,columnNumber:7}},s.createElement("label",{__source:{fileName:w1,lineNumber:71,columnNumber:9}},s.createElement("input",{type:"checkbox",value:o,onChange:e=>o=e.target.value,__source:{fileName:w1,lineNumber:72,columnNumber:11}}),s.createElement("span",{__source:{fileName:w1,lineNumber:77,columnNumber:11}},(0,ue.Z)("Don’t Ask Again"))),s.createElement("input",{type:"submit",value:(0,ue.Z)("mail","Delete"),__source:{fileName:w1,lineNumber:79,columnNumber:9}}),s.createElement("input",{type:"button",onClick:n,value:(0,ue.Z)("Cancel"),__source:{fileName:w1,lineNumber:80,columnNumber:9}})))};var A1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailUnsubscribeDialog.jsx";function Z1(e){const[t,n]=(0,s.useState)(!1),{folder:i}=e.options,{accountId:r,path:a}=i;return s.createElement("form",{onSubmit:function(n){n.preventDefault(),K.Z.unsubscribeMailbox(i,t),e.onClose()},__source:{fileName:A1,lineNumber:34,columnNumber:5}},s.createElement("header",{className:"dialog-double-header",__source:{fileName:A1,lineNumber:35,columnNumber:7}},s.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:cn.Si$.large},__source:{fileName:A1,lineNumber:36,columnNumber:9}}),s.createElement("h1",{className:"dialog-title",__source:{fileName:A1,lineNumber:39,columnNumber:9}},(0,ue.Z)("Unsubscribe from IMAP folder $1",[a]))),s.createElement("div",{className:"dialog-content",__source:{fileName:A1,lineNumber:44,columnNumber:7}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:A1,lineNumber:45,columnNumber:9}},s.createElement("input",{autoFocus:!0,type:"checkbox",checked:t,onChange:function(){n(!t)},__source:{fileName:A1,lineNumber:46,columnNumber:11}}),s.createElement("span",{__source:{fileName:A1,lineNumber:52,columnNumber:11}},(0,ue.Z)("Remove messages from this device"))),s.createElement("p",{className:"info",__source:{fileName:A1,lineNumber:54,columnNumber:9}},(0,ue.Z)("If checked, all message files for $1 on $2 will be deleted. Otherwise they will remain on disk.",[a,r]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:A1,lineNumber:61,columnNumber:7}},s.createElement("input",{type:"submit",className:"danger",value:(0,ue.Z)("mail","Unsubscribe"),autoFocus:!0,__source:{fileName:A1,lineNumber:62,columnNumber:9}}),s.createElement("input",{type:"button",onClick:e.onClose,value:(0,ue.Z)("Cancel"),__source:{fileName:A1,lineNumber:63,columnNumber:9}})))}var P1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\PageAccessKeys.jsx";function D1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M1="shift+alt+";class O1 extends s.PureComponent{constructor(...e){super(...e),D1(this,"state",{accessKeys:[],shown:!1,page:null}),D1(this,"bindKeystrokes",(()=>{const{accessKeys:e}=this.state;e.forEach((e=>{Wl.Z.bind(e.access_key,this.pressKey),Wl.Z.bind(M1+e.access_key,this.pressKey)}))})),D1(this,"unbindKeystrokes",(()=>{const{accessKeys:e}=this.state;e.forEach((e=>{Wl.Z.unbind(e.access_key,this.pressKey),Wl.Z.unbind(M1+e.access_key,this.pressKey)}))})),D1(this,"onClose",(()=>{this.state.shown&&(this.setState({shown:!1}),this.props.onClose())})),D1(this,"getLink",(e=>{const t=this.state.page?Is.parse(this.state.page.url):null;if(t){if(e.startsWith("#")&&t.href)return t.href.split("#")[0]+e;if(e.startsWith("/")&&t.protocol&&t.host)return t.protocol+"//"+t.host+e}return e})),D1(this,"pressKey",(e=>{e&&e.key&&this.triggerKey(e.key)})),D1(this,"triggerKey",(e=>{b.Z.accessKeys.action(V.ZP.unsafeGetActivePage().id,e),this.onClose()}))}componentDidMount(){b.Z.accessKeys.getAccessKeysForPage(V.ZP.unsafeGetActivePage().id,(e=>{this.setState({accessKeys:e,shown:!0,page:V.ZP.unsafeGetActivePage()},(()=>this.bindKeystrokes()))}))}componentWillUnmount(){this.unbindKeystrokes()}render(){if(!this.state.shown)return null;const{accessKeys:e,page:t}=this.state;return s.createElement("div",{className:"dialog-access-keys",__source:{fileName:P1,lineNumber:104,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:P1,lineNumber:105,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:P1,lineNumber:106,columnNumber:11}},(0,ue.Z)("Access Key Shortcuts"),t&&s.createElement("span",{className:"info",__source:{fileName:P1,lineNumber:109,columnNumber:15}},(0,ue.Z)("for $1",[t.title||t.href])))),s.createElement("div",{className:"dialog-content",__source:{fileName:P1,lineNumber:117,columnNumber:9}},0===e.length&&(0,ue.Z)("This page doesn’t seem to contain access key shortcuts."),e.length>0&&e.map(((e,t)=>s.createElement("label",{key:t,className:"keycombo",title:e.href,__source:{fileName:P1,lineNumber:127,columnNumber:17}},s.createElement("input",{type:"button",className:"item",onClick:this.triggerKey.bind(null,e.access_key),value:e.access_key,__source:{fileName:P1,lineNumber:130,columnNumber:19}}),s.createElement("span",{__source:{fileName:P1,lineNumber:135,columnNumber:19}},e.title.replace(/\[.*?\]/g,"")||e.textContent.trim()||e.href))))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:P1,lineNumber:146,columnNumber:9}},s.createElement("p",{className:"info",__source:{fileName:P1,lineNumber:147,columnNumber:11}},A.ZP.get(P.kWebpagesAccessKeys)?(0,ue.Z)("Access key shortcuts are allowed in keyboard settings."):(0,ue.Z)("Access key shortcuts are disabled in keyboard settings.")," ",(0,ue.Z)("Run shortcuts on page with $1 modifier keys.",["Shift+Alt"])),s.createElement("input",{type:"button",onClick:this.onClose,value:(0,ue.Z)("Close"),className:"primary",autoFocus:!0,__source:{fileName:P1,lineNumber:158,columnNumber:11}})))}}const x1=O1;var L1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CalculatorItem.jsx";function R1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B1 extends s.PureComponent{constructor(...e){super(...e),R1(this,"onClick",(e=>{this.props.onItemClick(this.props.item,e)})),R1(this,"over",(e=>{this.props.onMouseOver(e,this.props.item)}))}render(){const{name:e}=this.props.item;return s.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:L1,lineNumber:40,columnNumber:7}},s.createElement("span",{className:"quick-command-favicon",dangerouslySetInnerHTML:{__html:cn.VLT},__source:{fileName:L1,lineNumber:46,columnNumber:9}}),s.createElement("span",{className:"quick-command-title",__source:{fileName:L1,lineNumber:48,columnNumber:9}},e),s.createElement("span",{className:"view quick-command-shortcut",__source:{fileName:L1,lineNumber:51,columnNumber:9}},(0,ue.Z)("Press Enter to Copy")))}}const F1=B1;var U1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CommandItem.jsx";function V1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H1 extends s.PureComponent{constructor(...e){super(...e),V1(this,"onClick",(e=>{this.props.onItemClick(this.props.item,e)})),V1(this,"over",(e=>{this.props.onMouseOver(e,this.props.item)}))}render(){const{item:e,style:t,searchTerm:n}=this.props,i=e.faviconUrl||e.pageUrlForFavicon||e.url||void 0,r=e.faviconUrl?"faviconFromCache":"page";return s.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:t,__source:{fileName:U1,lineNumber:58,columnNumber:7}},i&&s.createElement(Ls,{className:"quick-command-favicon",url:i,loadType:r,__source:{fileName:U1,lineNumber:65,columnNumber:11}}),n.length?a_(n,e.name,"quick-command-title"):s.createElement("span",{className:"quick-command-title",__source:{fileName:U1,lineNumber:73,columnNumber:13}},e.name),e.url&&(n.length?a_(n,e.url,"quick-command-url"):s.createElement("span",{className:"view quick-command-url",__source:{fileName:U1,lineNumber:81,columnNumber:15}},e.url)),e.nickname&&(n.length?a_(n,e.nickname,"view quick-command-nickname"):s.createElement("span",{className:"view quick-command-nickname",__source:{fileName:U1,lineNumber:90,columnNumber:15}},e.nickname)),e.meta&&s.createElement("span",{className:"view quick-command-meta",__source:{fileName:U1,lineNumber:96,columnNumber:11}},(0,oc.$)(e.meta)))}}const W1=H1;var z1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\HistoryItem.jsx";function G1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class K1 extends s.PureComponent{constructor(...e){super(...e),G1(this,"onClick",(e=>{this.props.onItemClick(this.props.item,e)})),G1(this,"over",(e=>{this.props.onMouseOver(e,this.props.item)}))}render(){const{name:e,url:t,faviconUrl:n,visitCount:i,visitTime:r}=this.props.item,{searchTerm:a}=this.props,o=g()(r).format("l, LT"),l=e||t;return s.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:z1,lineNumber:39,columnNumber:7}},s.createElement(Ls,{url:n||t,loadType:n?"faviconFromCache":"page",className:"quick-command-favicon",__source:{fileName:z1,lineNumber:45,columnNumber:9}}),a_(a,l,"quick-command-title"),s.createElement("span",{className:"quick-command-timestamp",__source:{fileName:z1,lineNumber:52,columnNumber:9}},o),s.createElement("span",{className:"item-count",__source:{fileName:z1,lineNumber:55,columnNumber:9}},i))}}const j1=K1;var Y1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QCNoteItem.jsx";function $1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X1="/resources/folder@2x.png";class Q1 extends s.PureComponent{constructor(...e){super(...e),$1(this,"onClick",(e=>{this.props.onItemClick(this.props.item,e)})),$1(this,"over",(e=>{this.props.onMouseOver(e,this.props.item)}))}render(){const{item:e,searchTerm:t}=this.props,n=function(e,t){return t?X1:e?cn.NwZ:cn.zKr}(!!e.url,!!e.isFolder);return s.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:Y1,lineNumber:56,columnNumber:7}},s.createElement(Ls,{url:n,loadType:"faviconFromCache",className:"quick-command-favicon",__source:{fileName:Y1,lineNumber:62,columnNumber:9}}),e.name&&a_(t,e.name,"quick-command-title"),!e.nickname&&e.url&&a_(t,e.url,"quick-command-url"),e.nickname&&a_(t,e.nickname,"quick-command-url"),e.hasAttachment&&s.createElement("span",{className:"quick-command-attachment",dangerouslySetInnerHTML:{__html:cn.onv},__source:{fileName:Y1,lineNumber:76,columnNumber:11}}))}}const q1=Q1;var J1="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\TitleItem.jsx";class e0 extends s.PureComponent{render(){const{item:e,style:t,selected:n}=this.props,{name:i,subtitle:r,count:a}=e;return s.createElement("div",{"data-selected":n?"":null,style:t,className:"quick-command-sectionheader",__source:{fileName:J1,lineNumber:22,columnNumber:7}},i,r&&s.createElement("span",{className:"QuickCommand-Title--Subtitle",__source:{fileName:J1,lineNumber:28,columnNumber:11}},r),a>0&&s.createElement("span",{className:"item-count",__source:{fileName:J1,lineNumber:33,columnNumber:11}},a))}}const t0=e0;var n0=n(34155),s0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandList.jsx";function i0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r0 extends s.PureComponent{constructor(...e){super(...e),i0(this,"state",{selectedIndex:1}),i0(this,"_keyedNavigation",!1),i0(this,"_startIndex",0),i0(this,"_stopIndex",0),i0(this,"setKeyedNavigation",(e=>{this._keyedNavigation=e})),i0(this,"getSelectedIndex",(()=>this.state.selectedIndex)),i0(this,"selectByIndex",(e=>{this.props.setNavigatingList(!0),this.props.hintChange(e),this.setState({selectedIndex:e}),this.rerenderVisibleTreeItems()})),i0(this,"onKeyDown",(e=>{const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},n=this.props.renderedArray;let s=this.getSelectedIndex(),i=s;if(!t.ctrl&&t.alt&&!t.shift&&!t.command)switch(e.key){case"ArrowUp":s>0&&"title"===n[s-1].type&&s--,i=0;for(let e=s-1;e>=0;e--)if("title"===n[e].type){i=e+1;break}e.preventDefault();break;case"ArrowDown":for(let e=s;e<n.length;e++)if("title"===n[e].type){i=e+1;break}e.preventDefault()}else if(!(t.ctrl||t.alt||t.shift||t.command)){const t=this._stopIndex-this._startIndex;switch(e.key){case"ArrowUp":i=Math.max(0,s-1),e.preventDefault();break;case"ArrowDown":i=Math.min(s+1,n.length-1),e.preventDefault();break;case"PageUp":i=Math.max(0,this._startIndex-t);break;case"PageDown":i=Math.min(this._stopIndex+t,n.length-1)}}i!==s&&("title"===n[i].type&&(i=i>s?++i:Math.max(0,--i)),this.selectByIndex(i))})),i0(this,"_onMouseOver",((e,t)=>{this._keyedNavigation||void 0===t.index||(this.selectByIndex(t.index),n0.nextTick((()=>this.props.syncOffset())))})),i0(this,"_onMouseMove",(()=>{this.setKeyedNavigation(!1)})),i0(this,"rerenderVisibleTreeItems",(()=>{this.refList&&this.refList.forceUpdateGrid()})),i0(this,"_onIndexChanged",(e=>{this._startIndex=e.startIndex,this._stopIndex=e.stopIndex})),i0(this,"renderTreeItem",(({index:e,style:t})=>{const n=this.props.renderedArray[e];n.index=e;const i=this.state.selectedIndex===e;switch(n.type){case JL.w.TITLE:return s.createElement(t0,{key:n.type+"__"+n.index,selected:i,item:n,style:t,__source:{fileName:s0,lineNumber:164,columnNumber:11}});case JL.w.HISTORY:return s.createElement(j1,{key:n.type+"__"+n.index,selected:i,item:n,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:s0,lineNumber:175,columnNumber:11}});case JL.w.CALCULATOR:return s.createElement(F1,{key:n.type+"__"+n.index,selected:i,item:n,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:s0,lineNumber:189,columnNumber:11}});case JL.w.NOTE_OPEN:case JL.w.NOTE_ADD:return s.createElement(q1,{key:n.type+"__"+n.index,selected:i,item:n,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:s0,lineNumber:203,columnNumber:11}});default:return s.createElement(W1,{selected:i,key:n.type+"__"+n.index,item:n,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:s0,lineNumber:217,columnNumber:11}})}}))}render(){const e=28*this.props.renderedArray.length,t=e>280?280:e;return s.createElement("div",{className:"quick-commands",tabIndex:"1",onKeyDown:this.onKeyDown,onMouseMove:this._onMouseMove,__source:{fileName:s0,lineNumber:236,columnNumber:7}},s.createElement(fg.aV,{ref:e=>this.refList=e,onRowsRendered:this._onIndexChanged,scrollToIndex:this.state.selectedIndex,height:t,rowHeight:28,width:520,rowRenderer:this.renderTreeItem,rowCount:this.props.renderedArray.length,__source:{fileName:s0,lineNumber:241,columnNumber:9}}))}}const a0=r0;var o0=n(37816),l0=n(46217),c0=n(34155),u0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandSearch.jsx";function m0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d0=(0,ue.Z)("Filter Quick Commands"),h0=[P.kAddressBarStripJavascriptOnPaste,P.kQuickCommandsKeepValue,P.kQuickCommandsOpenUrlInNewTab,P.kQuickCommandsSearchEnglish,P.kQuickCommandsSearchPriority,P.kQuickCommandsMatchNickname,P.kChainedCommandsCommandList,P.kQuickCommandsShowBookmarks,P.kQuickCommandsShowCalculator,P.kQuickCommandsShowExtensions,P.kQuickCommandsShowHistory,P.kQuickCommandsShowNotes,P.kQuickCommandsShowPageActions,P.kQuickCommandsLimitResults,P.kQuickCommandsUseNotesManager],p0="text/plain";let g0=!1;class b0 extends s.PureComponent{constructor(...e){super(...e),m0(this,"state",{quickCommandSearchValue:this.props.quickCommandValue||"",typeAheadHint:d0,renderedArray:[],historyArray:[]}),m0(this,"_isIMEOpen",!1),m0(this,"_justClosedIME",!1),m0(this,"expireTimeout",null),m0(this,"contentScripts",[]),m0(this,"openTabsInAllWindows",[]),m0(this,"hasSearchedForFullHistory",!1),m0(this,"parser",new l0._b),m0(this,"_imeProcessSpace",!1),m0(this,"defaultEngine",Dn.Z.getDefault(W.ZP.isIncognito(this.context.vivaldiWindowId))),m0(this,"chainShortcuts",[]),m0(this,"quickCommandInput",s.createRef()),m0(this,"allExtensions",[]),m0(this,"vivaldiExt",[]),m0(this,"commandChains",[]),m0(this,"historySearch",new vE({provider:new _E})),m0(this,"_initialSetup",(async()=>{const e=(0,of.IZ)(""),t=await h.Z.tabs.query({windowType:"normal"}),n=await(0,of.JQ)("",t);this.chainShortcuts=await F.Z.getChainCommandsShortcuts(),this.allExtensions=await(0,of.GO)(),this.vivaldiExt=await(0,of.pN)(),this.openTabsInAllWindows=t,this.commandChains=this.props.prefValues[P.kChainedCommandsCommandList];const s=(0,of.$J)({searchText:"",chains:this.commandChains,shortcuts:this.chainShortcuts});if(this.setState({renderedArray:[...n,...e,...s]},(()=>this.hintChange(1))),this.props.prefValues[P.kQuickCommandsKeepValue]){const e=this.state.quickCommandSearchValue;e.length&&(this.quickCommandInput?.current?.setSelectionRange(0,e.length),this.searchChange(e))}})),m0(this,"onKeyDown",(e=>{switch(this.qclist.setKeyedNavigation(!0),e.key){case"Process":this._isIMEOpen&&(this._imeProcessSpace=!0);break;case"Escape":this.onEscape(),e.preventDefault(),e.stopPropagation();break;case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":this.qclist.onKeyDown(e),e.preventDefault();break;case"Enter":{if(this._isIMEOpen||this.expireTimeout)break;const t=this.qclist.getSelectedIndex(),n=[...this.state.renderedArray,...this.state.historyArray][t];this.executeCommand(n,e),e.preventDefault(),e.stopPropagation();break}case"Tab":case"ArrowRight":if((0,hg.Z)(e)||this._isIMEOpen)break;this.autoCompleteHint(),"Tab"===e.key&&e.preventDefault()}this._justClosedIME=!1,c0.nextTick((()=>this.syncOffset()))})),m0(this,"onCompositionStart",(()=>{this._isIMEOpen=!0})),m0(this,"onCompositionEnd",(()=>{this._isIMEOpen=!1,this._justClosedIME=!0,this.searchChange(this.state.quickCommandSearchValue)})),m0(this,"onEscape",(()=>{this._isIMEOpen||(this.state.quickCommandSearchValue.length>0&&!this._justClosedIME&&!this._isIMEOpen?(this.props.storeQuickCommandValue(""),this.setState({quickCommandSearchValue:"",historyArray:[],typeAheadHint:d0},(()=>this.searchChange("")))):this._justClosedIME||this.props.onClose()),this._justClosedIME=!1})),m0(this,"syncOffset",(()=>{const{current:e}=this.quickCommandInput;e&&(this.refs.quickCommandHint.scrollLeft=e.scrollLeft)})),m0(this,"autoCompleteHint",(()=>{const{typeAheadHint:e}=this.state,t=[...this.state.renderedArray,...this.state.historyArray][this.qclist.getSelectedIndex()];if(!e.length||t.type===JL.w.CALCULATOR)return;const n=t.type===JL.w.COMMAND_KEYWORD&&t.searchString?t.searchString+" ":e;this.setState({quickCommandSearchValue:n},(()=>this.searchChange(n)))})),m0(this,"executeCommand",((e,t)=>{const{ctrlKey:n,altKey:s,metaKey:i,shiftKey:r}=t,a={ctrlKey:n,altKey:s,metaKey:i,shiftKey:r},l=(0,of.vD)(a);switch(e.type){case JL.w.OPEN_TAB:if(e.windowId&&e.pageId){const{windowId:t,pageId:n}=e;h.Z.windows.update(t,{focused:!0},(()=>{h.Z.tabs.update(n,{active:!0})}))}break;case JL.w.CLOSED_TAB:e.command&&o0.Z.undeleteTab(e.command);break;case JL.w.CALCULATOR:{const{name:t}=e;navigator.clipboard.writeText(t);break}case JL.w.COMMAND_CHAIN:e.action&&e.action();break;case JL.w.BOOKMARK_FOLDER:case JL.w.BOOKMARK_NICKNAME:e.folderId?(0,of.hV)(e.folderId):e.url&&$.Z.openURL(e.url,{...l});break;case JL.w.BOOKMARK:if(e.url){const{url:t}=e;$.Z.openURL(t,{...l})}break;case JL.w.EXTENSION:if(e.id&&void 0!==e.enabled){const{id:t,enabled:n,optionsUrl:s=""}=e,i={id:t,enabled:n,optionsPage:(0,uh.mT)(a),optionsUrl:s};(0,of.de)(i)}break;case JL.w.URL:{const{name:t}=e;$.Z.openURL(t,{transition:ml.Z.TYPED,...l});break}case JL.w.KEYWORDSEARCH:case JL.w.SEARCH:if(e.value&&"string"==typeof e.value){const{value:t}=e;$.Z.openURL(t,{transition:ml.Z.GENERATED,...l})}break;case JL.w.COMMAND:case JL.w.COMMAND_KEYWORD:if(e.commandName){const{commandName:t,value:n,name:s}=e;return void this.props.onClose().then((()=>{o.Z.executeActions(t,n),X.Z.setStatus((0,ue.Z)("Command: $1",[s]),3e3),this.props.storeQuickCommandValue("")}))}break;case JL.w.HISTORY:if(e.url){const{url:t}=e;$.Z.openURL(t,{...l})}break;case JL.w.CONTENT_SCRIPT:{const t=V.ZP.unsafeGetActivePage().get("id");if(e.script){const{script:n}=e;b.Z.pageActions.getScriptOverridesForTab(t,(e=>{const s=e.find((e=>e.script===n)),i=s&&"enabled"===s.override?"no_override":"enabled";b.Z.pageActions.setScriptOverrideForTab(n,t,i,(()=>{}))}))}break}case JL.w.NOTE_OPEN:if(e.id){const{id:t}=e;this.handleNotesOpening(t,{...l})}break;case JL.w.NOTE_ADD:if(e.value&&"string"==typeof e.value){const{value:t}=e;Li.Z.createNote({content:t})}}this.setState({quickCommandSearchValue:""}),this.props.storeQuickCommandValue(""),c0.nextTick(this.props.onClose)})),m0(this,"onSearchChange",(e=>{const t=e.target;this.searchChange(t.value)})),m0(this,"handleNotesOpening",((e,t)=>{this.props.prefValues[P.kQuickCommandsUseNotesManager]||!re.ZP.isAvailable("notes")?$.Z.openURL(Pt.jk.internalUrl("notes",e),{...t}):ie.Z.showContent("notes",{setFocus:!0,selectId:e,reason:""})})),m0(this,"handleHistoryFullSearchTimeout",(0,za.Z)((()=>{if(this.hasSearchedForFullHistory||!this.state.quickCommandSearchValue.length)return!1;if(this.isNavigatingList)return this.handleHistoryFullSearchTimeout(),!1;const{quickCommandSearchValue:e}=this.state,t=(0,of.s1)({searchText:e}),n=[...this.state.renderedArray,...this.state.historyArray][this.qclist?.getSelectedIndex()];this.setState((e=>{const n=e.historyArray,s=new Map(n.map((e=>{if(e.url)return[e.url,e]})).filter(Boolean)),i=t.filter((e=>e.url&&!s.has(e.url)));let r=Array.from(s.values()).concat(i);return r=(0,of._W)({title:"History",array:r}),this.hasSearchedForFullHistory=!0,{historyArray:r}}),(()=>this.performFullSearchSelection(n)))}),750)),m0(this,"performFullSearchSelection",(e=>{const t=e;if(t.type!==JL.w.HISTORY||void 0===t.url)return;const n=this.state.historyArray.findIndex((n=>{const s=n.url;return!(!s||!e)&&s.toLowerCase()===t.url.toLowerCase()}));if(-1===n)return;const s=n+this.state.renderedArray.length;this.selectByIndex(s),this.qclist.rerenderVisibleTreeItems()})),m0(this,"setNavigatingList",(e=>{this.isNavigatingList=e,this.debounceNavigationOfList()})),m0(this,"debounceNavigationOfList",(0,za.Z)((()=>{this.isNavigatingList=!1}),500)),m0(this,"searchChange",(e=>{const t=this.props.prefValues,n=e.trim();let s=[];const i=(0,of.xh)(n);i.forEach((e=>s.push(e))),t[P.kQuickCommandsShowCalculator]&&(0,of.CD)(n).forEach((e=>s.push(e))),n.length&&!i.length&&(0,of.JC)(n,this.defaultEngine).forEach((e=>s.push(e))),t[P.kQuickCommandsShowNotes]&&(0,of.Dj)(n).forEach((e=>s.push(e)));const r=(0,of.JQ)(n,this.openTabsInAllWindows),a=(0,of.IZ)(n);if(s=[...s,...r,...a],n.length){let i=[];t[P.kQuickCommandsShowExtensions]&&(i=(0,of.nX)(n,this.allExtensions,this.vivaldiExt)),s=[...s,...i];if((0,of.$J)({searchText:n,chains:this.commandChains,shortcuts:this.chainShortcuts}).forEach((e=>s.push(e))),t[P.kQuickCommandsShowBookmarks]){(0,of.hm)(n).forEach((e=>s.push(e)));const e=(0,of.Xz)(n),t=(0,of.oE)(n);s=[...s,...e,...t]}if(t[P.kQuickCommandsShowNotes]){const e=(0,of.Kk)(n);s=[...s,...e]}t[P.kQuickCommandsShowHistory]&&n.length>1&&this.throttleHistory(n);const r=(0,of.S4)(n);if(s=[...s,...r],(0,of.Gr)(n).forEach((e=>s.push(e))),t[P.kQuickCommandsShowPageActions]&&V.ZP.isActiveExternal()){const t=(0,of.sh)(e,this.contentScripts);s=[...s,...t]}}this.setState({quickCommandSearchValue:e,renderedArray:s},(()=>this.performSelection()))})),m0(this,"throttleHistory",(0,vb.default)((async e=>{const t=A.ZP.get(P.kQuickCommandsLimitResults),n=t?of._U:100;t||this.handleHistoryFullSearchTimeout();const s=await this.historySearch.search(e,{count:n}).catch((()=>[])),i=(0,of.s1)({searchText:e,history:s});this.setState({historyArray:i},(()=>this.debouncePerformSelection()))}),200)),m0(this,"debouncePerformSelection",(0,za.Z)((()=>{this.isNavigatingList||this.performSelection()}),25)),m0(this,"onPaste",(e=>{const{clipboardData:t}=e;if(t.types[0]!==p0)return;const n=t.getData(p0);n.trim()||e.preventDefault();const{prefValues:s}=this.props,{quickCommandSearchValue:i}=this.state,r=/^(\s*javascript:)+/i,a=e.currentTarget.selectionStart;if(s[P.kAddressBarStripJavascriptOnPaste]){if(r.test(n)){e.preventDefault();const t=yE(i||"",n.replace(/javascript:/gi,""),a,e.currentTarget.selectionEnd);return void this.searchChange(t)}if(r.test(i+n)){e.preventDefault();const t=yE("",(i+n).replace(/javascript:/gi,""),a,e.currentTarget.selectionEnd);this.searchChange(t)}}})),m0(this,"getSelectPriority",(()=>{const e=[...this.state.renderedArray,...this.state.historyArray];let t=0,n=this.props.prefValues[P.kQuickCommandsSearchPriority].length;return e.forEach(((e,s)=>{void 0!==e.selectPriority&&e.selectPriority<n&&(t=s,n=e.selectPriority)})),{priority:n,selectIndex:t}})),m0(this,"openBookmark",(e=>{const t=this.props.prefValues;if(t[P.kQuickCommandsMatchNickname]){if(e.folderId)(0,of.hV)(e.folderId);else if(e.url){const n={bookmarks:[{url:e.url}],inCurrent:!1===t[P.kQuickCommandsOpenUrlInNewTab]};en.ZP.open(n,!1)}this.expireTimeout=setTimeout((()=>{this.setState({quickCommandSearchValue:""},(()=>{this.props.onClose()}))}),200)}})),m0(this,"performSelection",(()=>{const{quickCommandSearchValue:e}=this.state,t=[...this.state.renderedArray,...this.state.historyArray];let{priority:n,selectIndex:s}=this.getSelectPriority();const i=t[s],r=this.props.prefValues[P.kQuickCommandsSearchPriority];if(i.type===JL.w.BOOKMARK_NICKNAME)this.openBookmark(i);else if(n===r.length){const n=t.findIndex((t=>t.type===JL.w.HISTORY&&t.name.toLowerCase().includes(e.toLowerCase())));s=-1!==n?n:0}this.selectByIndex(s),this.hintChange(s),this.qclist?.rerenderVisibleTreeItems()})),m0(this,"hintChange",(e=>{let t;const n=[...this.state.renderedArray,...this.state.historyArray][e],s=this.state.quickCommandSearchValue;switch(n.type){case JL.w.URL:case JL.w.NOTE_ADD:case JL.w.SEARCH:case JL.w.KEYWORDSEARCH:t="";break;case JL.w.COMMAND_KEYWORD:case JL.w.COMMAND:if(n.value)t="";else{const{name:e}=n,i=(0,of.ue)(e,s);t=s+e.substring(i+s.length)}break;case JL.w.CALCULATOR:if(n.searchString&&n.name){const{searchString:e,name:i}=n;t=e!==i?`${s} = ${i}`:""}break;default:{let e="";const{name:i="",url:r="",nickname:a=""}=n,o=(0,of.ue)(i,s),l=r?(0,of.ue)(r,s):-1,c=(0,of.ue)(a,s);-1!==o?e=i.substring(o+s.length):r&&-1!==l?e=r.substring(l+s.length):-1!==c&&(e=a.substring(c+s.length)),t=s+e}}s.length||n.type!==JL.w.TITLE||(t=d0),this.setState({typeAheadHint:t}),this.qclist.rerenderVisibleTreeItems()}))}componentDidMount(){g0||(g0=!0,w.loadAll()),this._initialSetup(),b.Z.pageActions.getScripts((e=>{this.contentScripts=e}))}componentWillUnmount(){const e=this.state.quickCommandSearchValue;this.props.prefValues[P.kQuickCommandsKeepValue]&&e.length?this.props.storeQuickCommandValue(e):this.props.storeQuickCommandValue("")}componentDidUpdate(){this._imeProcessSpace&&this._isIMEOpen&&(this._imeProcessSpace=!1),this.commandChains!==this.props.prefValues[P.kChainedCommandsCommandList]&&(this.commandChains=this.props.prefValues[P.kChainedCommandsCommandList])}selectByIndex(e){this.qclist&&this.qclist.selectByIndex(e)}render(){const e=[...this.state.renderedArray,...this.state.historyArray];return s.createElement("div",{className:"quick-command-container",__source:{fileName:u0,lineNumber:887,columnNumber:7}},s.createElement("div",{className:"qc-entry",__source:{fileName:u0,lineNumber:888,columnNumber:9}},s.createElement("input",{tabIndex:"-1",readOnly:!0,ref:"quickCommandHint",className:"quick-command-search-hint",value:this.state.typeAheadHint,__source:{fileName:u0,lineNumber:889,columnNumber:11}}),s.createElement("input",{type:"search",autoFocus:!0,ref:this.quickCommandInput,className:"quick-command-search",onKeyDown:this.onKeyDown,onScroll:()=>c0.nextTick(this.syncOffset),onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,value:this.state.quickCommandSearchValue,onChange:this.onSearchChange,onPaste:this.onPaste,__source:{fileName:u0,lineNumber:895,columnNumber:11}})),s.createElement(a0,{ref:e=>this.qclist=e,renderedArray:e,onExecuteCommand:this.executeCommand,syncOffset:this.syncOffset,setNavigatingList:this.setNavigatingList,searchTerm:this.state.quickCommandSearchValue.trim(),hintChange:this.hintChange,__source:{fileName:u0,lineNumber:908,columnNumber:9}}))}}m0(b0,"contextType",Vs.Z);const N0=(0,bi.Z)(b0,h0);var f0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\showKeyboardShortcuts.jsx";function _0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v0=[P.kKeyboardShortcutsEnable,P.kKeyboardShortcutsEnableSingleKey];class E0 extends s.Component{constructor(...e){super(...e),_0(this,"state",{filter:""}),_0(this,"onSettingsFilter",(e=>{const t=e.target.value.toLowerCase().replace(/⌘/g,"meta").replace(/⌥/g,"alt").replace(/⇧/g,"shift").replace(/⌃/g,"ctrl");this.setState({filter:t})})),_0(this,"onKeyDown",(e=>{"Escape"===e.nativeEvent.code&&0===this.refs.comboFilter.value.length&&(this.props.onClose(),e.stopPropagation(),e.preventDefault())}))}componentDidMount(){this.refs.comboFilter.focus()}render(){let e="keystrokes";return this.props.prefValues[P.kKeyboardShortcutsEnable]?this.props.prefValues[P.kKeyboardShortcutsEnableSingleKey]||(e+=" singlekeydisabled"):e+=" shortcutsdisabled",s.createElement("div",{className:"keyboardShortcutsWrapper",tabIndex:"0",onKeyDown:this.onKeyDown,__source:{fileName:f0,lineNumber:60,columnNumber:7}},s.createElement("header",{__source:{fileName:f0,lineNumber:64,columnNumber:9}},s.createElement("h1",{__source:{fileName:f0,lineNumber:65,columnNumber:11}},(0,ue.Z)("Keyboard Cheat Sheet")),s.createElement("input",{className:"search",ref:"comboFilter",type:"search",placeholder:(0,ue.Z)("Filter Commands"),onChange:this.onSettingsFilter,__source:{fileName:f0,lineNumber:66,columnNumber:11}}),s.createElement("button",{className:"close",onClick:this.props.onClose,dangerouslySetInnerHTML:{__html:cn.kze},__source:{fileName:f0,lineNumber:71,columnNumber:11}})),s.createElement("div",{className:e,__source:{fileName:f0,lineNumber:76,columnNumber:9}},s.createElement(Pc,{filter:this.state.filter,view:"read-only",__source:{fileName:f0,lineNumber:77,columnNumber:11}})))}}const C0=(0,bi.Z)(E0,v0);function w0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y0(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,S0(e,t,"set"),n),n}function S0(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const T0=32,k0={tab:"--colorAccentFg",tabActive:"--colorFg",tabBgOnWindow:"--colorFg",tabBgOnWindowActive:"--colorAccentFg",tabSmall:"--colorWarningFg",tree:"--colorFg",treeSelected:"--colorHighlightFg"},I0=(e,t)=>{const n=Z.Z.getState().windowStyles.get(e);if(["tab","tabActive"].includes(t)){Z.Z.getState().windowThemes.get(e)?.accentOnWindow||(t="tab"===t?"tabBgOnWindow":"tabBgOnWindowActive")}return n[k0[t]]};var A0=new WeakMap;class Z0 extends s.PureComponent{constructor(e,t){super(e),w0(this,"refCanvas",s.createRef()),A0.set(this,{writable:!0,value:void 0}),w0(this,"onThemeStoreChanged",(()=>{this._color=I0(this.context.vivaldiWindowId,this.props.location),this.renderIcon(this.props.mediaState)})),w0(this,"renderIcon",(e=>{if(!this.refCanvas.current)return;const t=this.refCanvas.current.getContext("2d");let n=0;function s(e,t){return e+n*(t-e)}const i=()=>{t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},r=()=>{t.beginPath(),t.moveTo(2,27),t.lineTo(5,30),t.lineTo(28,7),t.lineTo(25,4),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,8),t.lineTo(6,20),t.lineTo(4,20),t.moveTo(14,24),t.lineTo(18,20),t.lineTo(18,28),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},a=()=>{t.beginPath(),t.moveTo(6,25),t.lineTo(4,23),t.lineTo(4,8),t.lineTo(6,6),t.lineTo(26,6),t.lineTo(28,8),t.lineTo(28,23),t.lineTo(26,25),t.moveTo(26,23),t.lineTo(26,14),t.lineTo(14,14),t.lineTo(14,23),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},o=()=>{if(!t)return;t.clearRect(18,0,T0,T0),n=n>1?0:Math.ceil(100*(n+.05))/100,t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.moveTo(s(14,22),s(12,4)),t.quadraticCurveTo(s(18,32),16,s(14,22),s(20,28)),t.lineTo(s(16,24),s(22,30)),t.quadraticCurveTo(s(20,34),16,s(16,24),s(10,2)),t.closePath(),t.lineWidth=0;const e=n<.7?1:parseFloat((1-n)/.3);t.fillStyle=to()(this._color).alpha(e).css(),t.fill(),this.props.mediaState.has("playing")&&this.props.animated?this._isMounted&&(this._timeoutId=setTimeout(o,64)):l(this.props.mediaState)},l=e=>{t.globalCompositeOperation&&(this._timeoutId&&clearTimeout(this._timeoutId),t.clearRect(0,0,T0,T0),e.has("pip")?a():e.has("muting")?r():e.has("playing")&&this.props.animated?o():i())};l(e)})),this._color=I0(t.vivaldiWindowId,e.location)}componentDidMount(){this._isMounted=!0,y0(this,A0,Z.Z.addListener(this.onThemeStoreChanged)),this.renderIcon(this.props.mediaState)}componentDidUpdate(e){this._color=I0(this.context.vivaldiWindowId,this.props.location),this.renderIcon(this.props.mediaState)}componentWillUnmount(){var e,t;(e=this,t=A0,function(e,t){return t.get?t.get.call(e):t.value}(e,S0(e,t,"get"))).remove(),this._isMounted=!1,this._timeoutId&&clearTimeout(this._timeoutId)}render(){let e="";return this.props.mediaState.has("playing")?e=(0,ue.Z)("Mute tab audio"):this.props.mediaState.has("muting")?e=(0,ue.Z)("Unmute tab audio"):this.props.mediaState.has("pip")&&(e=(0,ue.Z)("Exit Picture in Picture")),s.createElement("canvas",{ref:this.refCanvas,className:"audioicon",width:T0,height:T0,title:e,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\AudioIcon.jsx",lineNumber:231,columnNumber:7}})}}w0(Z0,"contextType",Vs.Z);const P0=Z0;var D0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\VisualTabSwitcher\\VisualTabItem.jsx";function M0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O0=[P.kThemeUseAnimation];class x0 extends s.Component{constructor(...e){super(...e),M0(this,"state",{mediaState:Qq.getState().get(this.props.page.id)||(0,sa.Set)()}),M0(this,"_onMediaStateStoreChanged",(()=>{this.setState({mediaState:Qq.getState().get(this.props.page.id)||(0,sa.Set)()})})),M0(this,"onClickAudio",((e,t,n)=>{if(e.preventDefault(),e.stopPropagation(),n.has("pip"))$.Z.exitPictureInPicture(this.props.page.id);else{const e=n.has("muting")?"unmute":"mute";$.Z.setMuting("selection",e,sa.List.of(t))}})),M0(this,"cancelEvent",(e=>{e.stopPropagation(),e.preventDefault()})),M0(this,"_renderMediaIcon",((e,t)=>!(0===e.size||t.discarded)&&s.createElement("span",{className:"tab-audio",onMouseDown:n=>this.onClickAudio(n,t,e),__source:{fileName:D0,lineNumber:89,columnNumber:7}},e.has("capturing")?s.createElement("span",{className:"audioicon",width:"16",height:"16",dangerouslySetInnerHTML:{__html:cn.MjM},__source:{fileName:D0,lineNumber:94,columnNumber:13}}):s.createElement(P0,{animated:A.ZP.get(P.kThemeUseAnimation),mediaState:e,location:t.active?"tabActive":"tab",__source:{fileName:D0,lineNumber:98,columnNumber:11}}))))}componentDidMount(){this._mediaStateStoreToken=Qq.addListener(this._onMediaStateStoreChanged)}componentDidUpdate(e,t){e.page.id!==this.props.page.id&&this._onMediaStateStoreChanged()}componentWillUnmount(){this._mediaStateStoreToken.remove()}render(){const{page:e,selected:t,selectPage:n,listType:i}=this.props,{active:r}=e,{mediaState:a}=this.state,o=Pt.jk.getFavicon(e.url);return s.createElement(s.Fragment,null,"minimal"===i&&s.createElement("li",{onContextMenu:this.cancelEvent,onMouseDown:()=>n&&n(e),className:bn()({"visual-list":!0,selected:t,"active-page":r}),__source:{fileName:D0,lineNumber:121,columnNumber:11}},s.createElement(Ls,{className:"visual-tab-list-favicon",url:o||e.url,loadType:o?"faviconFromCache":"page",__source:{fileName:D0,lineNumber:129,columnNumber:13}}),this._renderMediaIcon(a,e),Pt.jk.getDisplayTitle(e)),"visual"===i&&s.createElement("div",{className:"visual-tab-switcher-title",__source:{fileName:D0,lineNumber:139,columnNumber:13}},this._renderMediaIcon(a,e),Pt.jk.getDisplayTitle(e)))}}const L0=(0,bi.Z)(x0,O0);var R0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\VisualTabSwitcher\\VisualTabSwitcher.jsx";function B0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F0=212;class U0 extends s.PureComponent{constructor(e,t){super(e),B0(this,"state",{selected:V.ZP.unsafeGetActivePage(),offset:1}),B0(this,"getMaxAllowedWidth",(()=>this.context.innerWidth-F0)),B0(this,"getNumberOfPreviews",(()=>{const{pages:e}=this;if(e.size*F0<this.getMaxAllowedWidth())return e.size;let t=1;for(;(t+1)*F0+24<this.getMaxAllowedWidth()&&t<e.size;)t++;return t})),B0(this,"getPagesInOrder",(e=>{const t=V.ZP.getPages(e);if(A.ZP.get(P.kTabsCycleByRecentOrder)){const n=V.ZP.getPageHistory(e);return(0,sa.List)(n.map((e=>t.find((t=>t.id===e)))).filter(Boolean).reverse())}return t})),B0(this,"getSelectedPageWithOffset",(e=>{const{pages:t}=this,{selected:n}=this.state;let s=t.indexOf(n)+e;return s=(s%t.size+t.size)%t.size,t.get(s)})),B0(this,"cancelEvent",(e=>{e.stopPropagation(),e.preventDefault()})),B0(this,"navigateWithOffset",(e=>{this.setState({selected:this.getSelectedPageWithOffset(e),offset:e},(()=>{const e=document.querySelector(".visual-list.selected");e&&e.scrollIntoViewIfNeeded()}))})),B0(this,"selectBack",(()=>{this.navigateWithOffset(-1)})),B0(this,"selectForward",(()=>{this.navigateWithOffset(1)})),B0(this,"selectByUid",(e=>{const t=this.workingPageSet.find((t=>t.uid===e));t&&this.selectPage(t.page)})),B0(this,"selectPage",(e=>{this.setState({selected:e})})),B0(this,"renderMinimalList",(()=>{const{pages:e}=this,{selected:t}=this.state;return s.createElement("div",{className:"tabswitcher list",__source:{fileName:R0,lineNumber:145,columnNumber:7}},s.createElement("img",{className:bn()({"visual-list-preview":!0,"active-page":t.active}),src:t.getIn(["extData","thumbnail"]),onContextMenu:this.cancelEvent,onMouseDown:()=>this.selectPage(t),title:Pt.jk.getDisplayUrl(t.url)||Pt.jk.getDisplayTitle(t),alt:"",__source:{fileName:R0,lineNumber:146,columnNumber:9}}),s.createElement("ul",{className:"listed-tabs",__source:{fileName:R0,lineNumber:157,columnNumber:9}},e.map((e=>{const n=e.id===t.id;return s.createElement(L0,{key:"visual-tab-list-"+e.id,selectPage:this.selectPage,listType:"minimal",page:e,selected:n,__source:{fileName:R0,lineNumber:161,columnNumber:15}})}))))})),B0(this,"renderVisualList",(()=>{const{pages:e,workingPageSet:t}=this,{selected:n,offset:i}=this.state,r=this.getNumberOfPreviews(),a=r*F0+24,o=e.indexOf(this.state.selected);let l=t;if(t.size>r){const e=Math.min(Math.max(o-Math.floor(r/2)+(-1!==i||r%2?0:1),0),t.size-r);l=t.reduce(((t,n,s)=>(s>=e&&s<e+r&&t.push(n),t)),[])}return s.createElement("div",{className:"tabswitcher",tabIndex:"1",style:{width:a},onContextMenu:this.cancelEvent,__source:{fileName:R0,lineNumber:202,columnNumber:7}},s.createElement("div",{className:"visual-tabs",__source:{fileName:R0,lineNumber:207,columnNumber:9}},l.map((e=>{const{page:t,uid:i}=e,{active:r,id:a,url:o}=t,l=Pt.jk.getFavicon(t.url);return s.createElement("div",{key:i,onMouseDown:this.selectByUid.bind(this,i),style:{backgroundImage:`url('${t.getIn(["extData","thumbnail"])}')`},title:Pt.jk.getDisplayTitle(t),className:bn()({"visual-tab":!0,selected:a===n.id,"active-page":r}),__source:{fileName:R0,lineNumber:213,columnNumber:13}},s.createElement("div",{className:"visual-tab-favicon-container",__source:{fileName:R0,lineNumber:225,columnNumber:15}},s.createElement(Ls,{className:"visual-tab-favicon",url:l||o,loadType:l?"faviconFromCache":"page",__source:{fileName:R0,lineNumber:226,columnNumber:17}})))}))),s.createElement(L0,{page:n,listType:"visual",__source:{fileName:R0,lineNumber:235,columnNumber:11}}))})),this.pages=this.getPagesInOrder(t.vivaldiWindowId),this.workingPageSet=this.pages.map((e=>({uid:Math.ceil(Math.random()*Math.pow(10,12)),page:e})))}render(){return A.ZP.get(P.kTabsVisualSwitchListLayout)?this.renderMinimalList():this.renderVisualList()}}B0(U0,"contextType",Vs.Z);const V0=U0;var H0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\mainDialog.jsx";function W0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let z0=!1;class G0 extends s.Component{constructor(...e){super(...e),W0(this,"preventClosingByDelay",(()=>{z0=!0;setTimeout((()=>{z0=!1}),500)})),W0(this,"handleClose",(e=>{const{dialog:t,onClose:n}=this.props;return z0||e!==t?Promise.resolve():n()}))}render(){const{dialog:e,options:t}=this.props;let n="float";switch(e){case Fi.Z.MAIN_SHOW_VISUAL_TAB_SWITCHER:n="modal-tabswitcher";break;case Fi.Z.MAIN_SHOW_QUICKCOMMANDS:n="qc-modal float top";break;case Fi.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS:n="show-keyboard-shortcuts-modal-top float top";break;case Fi.Z.MAIN_SHOW_PAGE_ACCESS_KEYS:n="page-access-keys";break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":n="onboarding";break;case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CREATE_CALENDAR_DIALOG":case"MAIN_SHOW_CALENDAR_IMPORT_EVENTS_DIALOG":n="calendar-new float";break;case"MAIN_SHOW_ACCOUNT_SHEET":n="slide";break;case"MAIN_SHOW_CALENDAR_ALARM":n=t.fullscreen?"calendar-fullscreen-alarm":"calendar-alarm"}return s.createElement(IC,{__source:{fileName:H0,lineNumber:97,columnNumber:7}},s.createElement(ln.Z,{onRequestClose:this.handleClose.bind(this,e),viewMode:n,__source:{fileName:H0,lineNumber:98,columnNumber:9}},e===Fi.Z.MAIN_SHOW_QUICKCOMMANDS&&s.createElement(N0,{key:Fi.Z.MAIN_SHOW_QUICKCOMMANDS,onClose:this.handleClose.bind(this,e),quickCommandValue:this.props.quickCommandValue,storeQuickCommandValue:this.props.storeQuickCommandSearch,__source:{fileName:H0,lineNumber:103,columnNumber:13}}),e===Fi.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS&&s.createElement(C0,{key:Fi.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS,onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:111,columnNumber:13}}),e===Fi.Z.MAIN_SHOW_PAGE_ACCESS_KEYS&&s.createElement(x1,{key:Fi.Z.MAIN_SHOW_PAGE_ACCESS_KEYS,onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:116,columnNumber:13}}),e===Fi.Z.MAIN_SHOW_VISUAL_TAB_SWITCHER&&s.createElement(V0,{ref:"visualTabSwitcher",key:Fi.Z.MAIN_SHOW_VISUAL_TAB_SWITCHER,__source:{fileName:H0,lineNumber:121,columnNumber:13}}),"MAIN_SHOW_CALENDAR_ALARM"===e&&s.createElement(i1,{key:"MAIN_SHOW_CALENDAR_ALARM",onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:126,columnNumber:13}}),"MAIN_SHOW_CALENDAR_EDIT_EVENT"===e&&s.createElement(VJ,{onClose:this.handleClose.bind(this,e),editor:t.editor,__source:{fileName:H0,lineNumber:132,columnNumber:13}}),"MAIN_SHOW_CALENDAR_IMPORT_EVENTS_DIALOG"===e&&s.createElement(KJ,{onClose:this.handleClose.bind(this,e),filePath:t.filePath,__source:{fileName:H0,lineNumber:138,columnNumber:13}}),"MAIN_SHOW_CREATE_CALENDAR_DIALOG"===e&&s.createElement(a1,{onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:144,columnNumber:13}}),"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG"===e&&s.createElement(C1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:148,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS"===e&&s.createElement(S1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:153,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL"===e&&s.createElement(T1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:158,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS"===e&&s.createElement(k1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:163,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING"===e&&s.createElement(I1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:168,columnNumber:13}}),"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG"===e&&s.createElement(Z1,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:H0,lineNumber:173,columnNumber:13}}),"MAIN_SHOW_MODAL_DIALOG"===e&&s.createElement(YJ,{onClose:this.handleClose.bind(this,e),modal:t.modal,resolve:t.resolve,__source:{fileName:H0,lineNumber:178,columnNumber:13}}),e===Fi.Z.MAIN_SHOW_IMPORT_CALENDAR&&s.createElement(b1,{pageId:-2,preventClosingByDelay:this.preventClosingByDelay,key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:184,columnNumber:13}}),e===Fi.Z.MAIN_SHOW_ADD_FEED&&s.createElement(Wr,{key:e,onClose:this.handleClose.bind(this,e),options:t,dismissable:!0,__source:{fileName:H0,lineNumber:191,columnNumber:13}}),"MAIN_SHOW_ACCOUNT_SHEET"===e&&s.createElement(VF,{key:e,onClose:this.handleClose.bind(this,e),view:t,autoFocus:!0,__source:{fileName:H0,lineNumber:198,columnNumber:13}}),"MAIN_SHOW_MAIL_ACCOUNT_DIALOG"===e&&s.createElement(v1,{key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:206,columnNumber:13}}),"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG"===e&&s.createElement(BJ,{key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:H0,lineNumber:211,columnNumber:13}})))}}W0(G0,"contextType",Vs.Z);const K0=G0;var j0="change";const Y0=new class extends(Bi()){emitChange(){this.emit(j0)}emitChangeParam(e){this.emit(j0,e)}addChangeListener(e){this.on(j0,e)}removeChangeListener(e){this.removeListener(j0,e)}};m.Z.register((e=>{switch(e.actionType){case Fi.Z.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG:Y0.emitChangeParam({action:"confirmOpenBookmarks",options:e.options});break;case Fi.Z.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG:Y0.emitChangeParam({action:"showClearBrowsingHistory",options:e.options});break;case"MAIN_SELECTING_TOOLBAR":case Fi.Z.MAIN_SHOW_BOOKMARK_DIALOG:case Fi.Z.MAIN_SHOW_SAVE_SESSION:case Fi.Z.MAIN_SHOW_ADD_FEED:case"MAIN_SHOW_CALENDAR_ALARM":case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CALENDAR_IMPORT_EVENTS_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case"MAIN_SHOW_MODAL_DIALOG":case"MAIN_SHOW_ACCOUNT_SHEET":Y0.emitChangeParam({type:e.actionType,options:e.options});break;case"MAIN_SHOW_DIALOG":Y0.emitChangeParam({type:e.actionType,options:e.options,onAfterClose:e.onAfterClose});break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":case Fi.Z.MAIN_SHOW_CREATE_CALENDAR_DIALOG:case Fi.Z.MAIN_SHOW_IMPORT_CALENDAR:case Fi.Z.MAIN_SHOW_IMPORT_DATA:case Fi.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case Fi.Z.MAIN_SHOW_PAGE_ACCESS_KEYS:case Fi.Z.MAIN_SHOW_OPEN_SESSION:case Fi.Z.MAIN_SHOW_QUICKCOMMANDS:Y0.emitChangeParam({type:e.actionType})}}));const $0=Y0;var X0="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\sessions\\SessionTree.jsx";function Q0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q0=[P.kCalendarRelativeDates],J0={lastWeek:B.ZP.getWeekdayFormat("LL")+" LT",sameElse:B.ZP.getWeekdayFormat("LL")+" LT"};class e2 extends s.PureComponent{constructor(...e){super(...e),Q0(this,"refTreeList",s.createRef()),Q0(this,"state",{sessionSorting:[]}),Q0(this,"isFolder",(e=>!1)),Q0(this,"hasChildren",(e=>!1)),Q0(this,"isValidForClipboard",(e=>!1)),Q0(this,"getContextMenuItems",(e=>[])),Q0(this,"getSelectedSessions",(()=>{const e=this.refTreeList.current?.selectionModel.selectedIds.map((e=>e.id))||[],t=[];return e.forEach((e=>{const n=this.refTreeList.current?.findTreeItem(e);n&&t.push(n)})),t})),Q0(this,"onKeyDown",(e=>{"Enter"===ST.Z[e.keyCode]&&this.props.onOpenSessions(),("Escape"===ST.Z[e.keyCode]||"."===ST.Z[e.keyCode]&&e.metaKey)&&this.props.onClose(),"Up"!==ST.Z[e.keyCode]&&"Down"!==ST.Z[e.keyCode]||this.props.onUpdateSelection(!0)})),Q0(this,"getRowComponentProps",(e=>({...e,columns:this.props.columns}))),Q0(this,"rowComponent",(e=>{const t=e.node,n=this.props.prefValues[P.kCalendarRelativeDates]?g()(t.createDateJS).calendar(null,J0):g()(t.createDateJS).format(J0.sameElse),i=(0,ue.Z)("$1 tab","$1 tabs",[t.tabs]),r=(0,ue.Z)("$1 window","$1 windows",[t.windows]),a=(0,ue.Z)("$1 in $2",[i,r]);return this.props.columns?this.props.columns.map((e=>{switch(e.id){case"name":return s.createElement("label",{key:"0",__source:{fileName:X0,lineNumber:108,columnNumber:13}},s.createElement("span",{__source:{fileName:X0,lineNumber:109,columnNumber:15}},t.name));case"createDateJS":return s.createElement("label",{key:"1",__source:{fileName:X0,lineNumber:114,columnNumber:13}},s.createElement("span",{__source:{fileName:X0,lineNumber:115,columnNumber:15}},n));case"tabs":return s.createElement("label",{key:"2",__source:{fileName:X0,lineNumber:120,columnNumber:13}},s.createElement("span",{__source:{fileName:X0,lineNumber:121,columnNumber:15}},a));default:console.warn("Unknown sorting field:",e.id)}})):null}))}componentDidMount(){this.refTreeList.current&&this.refTreeList.current.focusTree()}render(){return s.createElement(Sg,{ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,onItemMouseDown:this.props.onUpdateSelection,onItemDoubleClick:this.props.onOpenSessions,onKeyDown:this.onKeyDown,isFolder:this.isFolder,hasChildren:this.hasChildren,isValidForClipboard:this.isValidForClipboard,sorting:this.props.sessionSorting,columns:this.props.columns,multiSelect:!0,__source:{fileName:X0,lineNumber:133,columnNumber:7}})}}const t2=(0,bi.Z)(e2,q0);var n2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\openSessionDialog.jsx";function s2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i2=[{text:(0,ue.Z)("title","Name"),value:"name",fullScreenTitle:(0,ue.Z)("Sort by Name"),width:350,visible:!0,key:!0},{text:(0,ue.Z)("Creation Date"),value:"createDateJS",fullScreenTitle:(0,ue.Z)("Sort by Creation Date"),width:260,visible:!0},{text:(0,ue.Z)("Info"),value:"tabs",fullScreenTitle:(0,ue.Z)("Sort by Info"),width:150,visible:!0}];class r2 extends s.Component{constructor(...e){super(...e),s2(this,"sortComparator",((e,t)=>{const{sortOrder:n,sortField:s}=this.state.sessionSorting;return ti.Z.getDefaultComparator(n,s)(e,t)})),s2(this,"refreshSessionList",(()=>{b.Z.sessionsPrivate.getAll((e=>{if(Array.isArray(e)){let t=1;e.forEach((e=>{e.id=t++})),this.setState({sessions:e})}}))})),s2(this,"updateSelectedSessions",(e=>{if(this.refs.sessionTree){var t=!1;this.refs.sessionTree.getSelectedSessions().length>=1&&(t=!0),this.setState({disabled:void 0!==e?!e:!t})}})),s2(this,"onDelete",(()=>{const e=this.refs.sessionTree.getSelectedSessions();for(var t=0;t<e.length;t++)b.Z.sessionsPrivate.delete(e[t].name,(e=>{e&&console.warn("Error deleting session '"+this.state.sessions[t].name+"', error: "+e)}));this.refreshSessionList()})),s2(this,"onOpenSessions",(()=>{const e={openInNewWindow:this.state.openInNewWindow},t=this.refs.sessionTree.getSelectedSessions();for(var n=0;n<t.length;n++)b.Z.sessionsPrivate.open(this.context.vivaldiWindowId,t[n].name,e).then((e=>{e&&console.warn("Error opening session '"+t[n].value+"', error: "+e)}));this.props.onClose()})),s2(this,"onSortChange",((e,t)=>{this.setState({sessionSorting:{sortOrder:e,sortField:t}})})),s2(this,"onUpdateRow",(e=>{this.setState({columns:e})})),s2(this,"onSaveRow",(()=>{pg(this.state.columns,"sessions")})),s2(this,"_toggleOpenInNewWindow",(()=>{this.setState((e=>({openInNewWindow:!e.openInNewWindow})))})),s2(this,"state",{sessions:[],columns:gg().sessions||bg(i2),disabled:!0,openInNewWindow:!0,sessionSorting:{sortOrder:ti.Z.DESCENDING_SORT,sortField:"createDateJS",comparator:this.sortComparator}})}componentDidMount(){this.refreshSessionList(),this.updateSelectedSessions()}render(){return s.createElement(ln.Z,{onRequestClose:this.props.onClose,dialogWidth:800,__source:{fileName:n2,lineNumber:156,columnNumber:7}},s.createElement("div",{className:"open-session",__source:{fileName:n2,lineNumber:157,columnNumber:9}},s.createElement("form",{className:"dialog-session",onSubmit:this.onOpenSessions,__source:{fileName:n2,lineNumber:158,columnNumber:11}},s.createElement("header",{className:"dialog-header",__source:{fileName:n2,lineNumber:159,columnNumber:13}},s.createElement("h1",{className:"dialog-title",__source:{fileName:n2,lineNumber:160,columnNumber:15}},(0,ue.Z)("Open Session"))),s.createElement("div",{className:"dialog-content",__source:{fileName:n2,lineNumber:162,columnNumber:13}},this.state.sessions.length>0?s.createElement("div",{className:"session-list",__source:{fileName:n2,lineNumber:164,columnNumber:19}},s.createElement(RN,{fields:i2,fullsize:!0,onSortChange:this.onSortChange,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sessionSorting.sortField,sortOrder:this.state.sessionSorting.sortOrder,keyAccess:this.props.keyAccess,manualSorting:!1,__source:{fileName:n2,lineNumber:165,columnNumber:19}}),s.createElement(t2,{ref:"sessionTree",sessionSorting:this.state.sessionSorting,onOpenSessions:this.onOpenSessions,onUpdateSelection:this.updateSelectedSessions,onClose:this.props.onClose,columns:this.state.columns,nodes:this.state.sessions,__source:{fileName:n2,lineNumber:177,columnNumber:19}})):s.createElement("div",{__source:{fileName:n2,lineNumber:186,columnNumber:19}},(0,ue.Z)("No saved session."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:n2,lineNumber:189,columnNumber:13}},s.createElement("label",{className:"dialog-checkbox",__source:{fileName:n2,lineNumber:190,columnNumber:15}},s.createElement("input",{type:"checkbox",checked:this.state.openInNewWindow,onChange:this._toggleOpenInNewWindow,disabled:0===this.state.sessions.length,__source:{fileName:n2,lineNumber:191,columnNumber:17}}),s.createElement("span",{__source:{fileName:n2,lineNumber:195,columnNumber:19}},(0,ue.Z)("Open Session in a New Window"))),s.createElement("input",{type:"submit",disabled:this.state.disabled,value:(0,ue.Z)("session","Open"),__source:{fileName:n2,lineNumber:197,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this.onDelete,className:"danger",disabled:this.state.disabled,value:(0,ue.Z)("session","Delete"),__source:{fileName:n2,lineNumber:201,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this.props.onClose,value:(0,ue.Z)("session","Cancel"),__source:{fileName:n2,lineNumber:207,columnNumber:15}})))))}}s2(r2,"contextType",Vs.Z);const a2=r2,o2=JSON.parse('{"t":[{"title":"Vivaldi Browser Help Center","url":"https://help.vivaldi.com","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAKQ2lDQ1BJQ0MgcHJvZmlsZQAAeNqdU3dYk/cWPt/3ZQ9WQtjwsZdsgQAiI6wIyBBZohCSAGGEEBJAxYWIClYUFRGcSFXEgtUKSJ2I4qAouGdBiohai1VcOO4f3Ke1fXrv7e371/u855zn/M55zw+AERImkeaiagA5UoU8Otgfj09IxMm9gAIVSOAEIBDmy8JnBcUAAPADeXh+dLA//AGvbwACAHDVLiQSx+H/g7pQJlcAIJEA4CIS5wsBkFIAyC5UyBQAyBgAsFOzZAoAlAAAbHl8QiIAqg0A7PRJPgUA2KmT3BcA2KIcqQgAjQEAmShHJAJAuwBgVYFSLALAwgCgrEAiLgTArgGAWbYyRwKAvQUAdo5YkA9AYACAmUIszAAgOAIAQx4TzQMgTAOgMNK/4KlfcIW4SAEAwMuVzZdL0jMUuJXQGnfy8ODiIeLCbLFCYRcpEGYJ5CKcl5sjE0jnA0zODAAAGvnRwf44P5Dn5uTh5mbnbO/0xaL+a/BvIj4h8d/+vIwCBAAQTs/v2l/l5dYDcMcBsHW/a6lbANpWAGjf+V0z2wmgWgrQevmLeTj8QB6eoVDIPB0cCgsL7SViob0w44s+/zPhb+CLfvb8QB7+23rwAHGaQJmtwKOD/XFhbnauUo7nywRCMW735yP+x4V//Y4p0eI0sVwsFYrxWIm4UCJNx3m5UpFEIcmV4hLpfzLxH5b9CZN3DQCshk/ATrYHtctswH7uAQKLDljSdgBAfvMtjBoLkQAQZzQyefcAAJO/+Y9AKwEAzZek4wAAvOgYXKiUF0zGCAAARKCBKrBBBwzBFKzADpzBHbzAFwJhBkRADCTAPBBCBuSAHAqhGJZBGVTAOtgEtbADGqARmuEQtMExOA3n4BJcgetwFwZgGJ7CGLyGCQRByAgTYSE6iBFijtgizggXmY4EImFINJKApCDpiBRRIsXIcqQCqUJqkV1II/ItchQ5jVxA+pDbyCAyivyKvEcxlIGyUQPUAnVAuagfGorGoHPRdDQPXYCWomvRGrQePYC2oqfRS+h1dAB9io5jgNExDmaM2WFcjIdFYIlYGibHFmPlWDVWjzVjHVg3dhUbwJ5h7wgkAouAE+wIXoQQwmyCkJBHWExYQ6gl7CO0EroIVwmDhDHCJyKTqE+0JXoS+cR4YjqxkFhGrCbuIR4hniVeJw4TX5NIJA7JkuROCiElkDJJC0lrSNtILaRTpD7SEGmcTCbrkG3J3uQIsoCsIJeRt5APkE+S+8nD5LcUOsWI4kwJoiRSpJQSSjVlP+UEpZ8yQpmgqlHNqZ7UCKqIOp9aSW2gdlAvU4epEzR1miXNmxZDy6Qto9XQmmlnafdoL+l0ugndgx5Fl9CX0mvoB+nn6YP0dwwNhg2Dx0hiKBlrGXsZpxi3GS+ZTKYF05eZyFQw1zIbmWeYD5hvVVgq9ip8FZHKEpU6lVaVfpXnqlRVc1U/1XmqC1SrVQ+rXlZ9pkZVs1DjqQnUFqvVqR1Vu6k2rs5Sd1KPUM9RX6O+X/2C+mMNsoaFRqCGSKNUY7fGGY0hFsYyZfFYQtZyVgPrLGuYTWJbsvnsTHYF+xt2L3tMU0NzqmasZpFmneZxzQEOxrHg8DnZnErOIc4NznstAy0/LbHWaq1mrX6tN9p62r7aYu1y7Rbt69rvdXCdQJ0snfU6bTr3dQm6NrpRuoW623XP6j7TY+t56Qn1yvUO6d3RR/Vt9KP1F+rv1u/RHzcwNAg2kBlsMThj8MyQY+hrmGm40fCE4agRy2i6kcRoo9FJoye4Ju6HZ+M1eBc+ZqxvHGKsNN5l3Gs8YWJpMtukxKTF5L4pzZRrmma60bTTdMzMyCzcrNisyeyOOdWca55hvtm82/yNhaVFnMVKizaLx5balnzLBZZNlvesmFY+VnlW9VbXrEnWXOss623WV2xQG1ebDJs6m8u2qK2brcR2m23fFOIUjynSKfVTbtox7PzsCuya7AbtOfZh9iX2bfbPHcwcEh3WO3Q7fHJ0dcx2bHC866ThNMOpxKnD6VdnG2ehc53zNRemS5DLEpd2lxdTbaeKp26fesuV5RruutK10/Wjm7ub3K3ZbdTdzD3Ffav7TS6bG8ldwz3vQfTw91jicczjnaebp8LzkOcvXnZeWV77vR5Ps5wmntYwbcjbxFvgvct7YDo+PWX6zukDPsY+Ap96n4e+pr4i3z2+I37Wfpl+B/ye+zv6y/2P+L/hefIW8U4FYAHBAeUBvYEagbMDawMfBJkEpQc1BY0FuwYvDD4VQgwJDVkfcpNvwBfyG/ljM9xnLJrRFcoInRVaG/owzCZMHtYRjobPCN8Qfm+m+UzpzLYIiOBHbIi4H2kZmRf5fRQpKjKqLupRtFN0cXT3LNas5Fn7Z72O8Y+pjLk722q2cnZnrGpsUmxj7Ju4gLiquIF4h/hF8ZcSdBMkCe2J5MTYxD2J43MC52yaM5zkmlSWdGOu5dyiuRfm6c7Lnnc8WTVZkHw4hZgSl7I/5YMgQlAvGE/lp25NHRPyhJuFT0W+oo2iUbG3uEo8kuadVpX2ON07fUP6aIZPRnXGMwlPUit5kRmSuSPzTVZE1t6sz9lx2S05lJyUnKNSDWmWtCvXMLcot09mKyuTDeR55m3KG5OHyvfkI/lz89sVbIVM0aO0Uq5QDhZML6greFsYW3i4SL1IWtQz32b+6vkjC4IWfL2QsFC4sLPYuHhZ8eAiv0W7FiOLUxd3LjFdUrpkeGnw0n3LaMuylv1Q4lhSVfJqedzyjlKD0qWlQyuCVzSVqZTJy26u9Fq5YxVhlWRV72qX1VtWfyoXlV+scKyorviwRrjm4ldOX9V89Xlt2treSrfK7etI66Trbqz3Wb+vSr1qQdXQhvANrRvxjeUbX21K3nShemr1js20zcrNAzVhNe1bzLas2/KhNqP2ep1/XctW/a2rt77ZJtrWv913e/MOgx0VO97vlOy8tSt4V2u9RX31btLugt2PGmIbur/mft24R3dPxZ6Pe6V7B/ZF7+tqdG9s3K+/v7IJbVI2jR5IOnDlm4Bv2pvtmne1cFoqDsJB5cEn36Z8e+NQ6KHOw9zDzd+Zf7f1COtIeSvSOr91rC2jbaA9ob3v6IyjnR1eHUe+t/9+7zHjY3XHNY9XnqCdKD3x+eSCk+OnZKeenU4/PdSZ3Hn3TPyZa11RXb1nQ8+ePxd07ky3X/fJ897nj13wvHD0Ivdi2yW3S609rj1HfnD94UivW2/rZffL7Vc8rnT0Tes70e/Tf/pqwNVz1/jXLl2feb3vxuwbt24m3Ry4Jbr1+Hb27Rd3Cu5M3F16j3iv/L7a/eoH+g/qf7T+sWXAbeD4YMBgz8NZD+8OCYee/pT/04fh0kfMR9UjRiONj50fHxsNGr3yZM6T4aeypxPPyn5W/3nrc6vn3/3i+0vPWPzY8Av5i8+/rnmp83Lvq6mvOscjxx+8znk98ab8rc7bfe+477rfx70fmSj8QP5Q89H6Y8en0E/3Pud8/vwv94Tz+4A5JREAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNjMzMzk4REEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNjMzMzk4RUEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MzMzOThCQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM2MzMzOThDQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CzB6ggAABmJJREFUeNrEV1loVGcU/u4yk0xWs5hJE2PERNCKcX9QhBZR1Iii9UERRNFaRdu+iBL3uiDigj5UQaQPFeuCiMQNKxTy4Ip7K6iYxKhxS2LWyTYz995+/507mTszd9rSFjxwQubOnf98/znn+/7zS4Zh4FOaKv60TpwY+zyJXk6fRB9Cz6f3o6fQ3XSFLjmsp9ED9B56O72B/oJ+l/4r/ZX95X43boQAxNh39Ap6wf+40W8scEfp31sgIxmw2U/0pQmXkbhplszo7obR1cV99oSeu92QUlIgeTzMjWK+42AiayvpX9DH0btiAXydMLgsE3MA+ps3MDQNckEB1KFDIeXmmqCMtjbo9fWmG3xPKSxksVgtTXNabRi9kj7VDsBF/9Fxx9yR/vKluZhr6lS4Z86EOm4clIEDQ8As09+/R/DRI/ivXIH/8mUYBKuUlITW0PXYladY/XUtDKDcary4dGuPH5sBPevWwT1lSsLqyPn5cAufNg3BpUvRtXcv/BcuQB08OFE2RMavhbcw2TH4kydIWrAAmdzRXwWPo9aIEcg4dgwpmzZBq6sDOjujsmXZBBO49aEktuba06dIWrgQaYcPc0X1X7V+ypo18OzYgWBtrVMGiuwAvJFeDdVcHT0aaYcO/Wf+paxahaRFi6A9fx5iSMR0O4DMvsd+Pwx66oEDfY/a791D9fr18LEf/s6C7e2o37kTTSdP9j1L3b0bsmBGS0scgHBuPeHaa69eIWnuXKhlZeYj38OHeDR9OnqamtDw8zGMvXsHSQXOGiUoWMMGbDh71iS9RjDeFSsgp6bCtXw5erdsgZKZGaUTso2GIbrQ3QQQNt/vfyDI4LmTJiHY0oyX235IuHudwtTNLGUMHw7V5YLv+vVIZefMQdDrhdzbG91uNpUyFU4ZNAjq+PF9L+SUz0DG2LHwv36NtM+Ho/GXk2i/dcsRgJKejqzycgSpASp3nbdkSeRwGTAAwZFl0JqbHQGYB4vh80EmADkrq+8FF9WumPUPvHsHxaXCRU6/3ro1YRbSJ0xAT2srcubPR/rkyVGB9JJS+BhDlaQ4ACFjCmUhrzGWO28esikwPdXVSC4tQXtVFZpOnHAE0HX7tnlcFmzeHPedKzsbvmAQOntAcgQQ1n0HKyafTS4TpIcyXM8A3dQKu3WSLW/370fR9u1wia6PFSiuHWDwTvaZYmUhOhpPNSOaKhEqjRwJ7+LF6Hn2zJRccTjVUCU/HDyIljNn8H7PHlRTLVOp//kbNzo3KVnhYuBuAghYTAjT0PwksXF00tCgdIr/Y62wogIt586ZrEgqKoL28SPecbeSlTWdtS86fjxhFgMvXkBNTjZLIEBk2TKghwFolE1xqjmZizsvoLwGamogsRyi65O5Y8/gEpNGWbNnI4OnpZNpzGzvgwdQ2QcuqxT2EgTCMmyQp/6LFxN2uXf1aqSOGYMAqSZzIbGA4e81+8O7bVvC3/kuXUKQGVDS0szfyDFNGBptiEphantPn4b+9q3zSgRZQBrqjY2QmEaJB5WfOp9NzntGjUoIoO3oUZPSssX5WBa0R7ot1dSDjoqKhItlzJiBzFmz0H3/PgIsmYvy6t2wIeH7Lfv2IUCGiBLaZFiyA2iMFIu1LS1F4Px5tNoOpLiG5KJpVEyFTVV45AiU/v2ddeHqVbTs2gW3mI6iJyPVzoK62IFE/MDHDu+mcHy2dm18QxYXo4SSrHd0QGYzOgavrETDypVQc3LMA8mwZgKRA+rAB3sGrkcTVodOyc3gONVJELU84fxiLnQaxRyC66RxMxvyw7Jl5vdKXl5f8DDlGPiOuVdxM+LFRMwDrfGiKMMgmHqOZgqPYFPfWftk0WxS/L0kwGYUKfedOoVeUtnFDUgO86DQgVRFmZNz82ZlGIB4Tq3FpqjzXaSagbrozRQfcPIV6XQPG4Yk9onKrhYiJARIUMxPoJqgJ98RuzZrHnNH0EJrPkuT5aEZvBnZAQirsi4OsLeqTACt7AVxkiuclnTeA8xBU9BQHCykpsxLiUw2mJcTi9JO9zYKVkeaopSxBHUZDlezL637wWp7FszZTqiXuJTwvBAdLwl3HIuiAxu2NdySVOWR5WUiuJ7gaibsW7qYRr+yRuchmmHkuWVZETfTHnGS/bN51CDANmavlgEfcAa4SAC/9el+OMOf+nr+pwADAAZ5culxNH/mAAAAAElFTkSuQmCC"},{"title":"WikiPedia","url":"https://www.wikipedia.org","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfhBAwKMAfiL115AAACxklEQVRIx6WVX2jVZRjHP7/T8c9pg2nhv2yDXWg4gqGsQGci68J/FRhq4IUohISpiQpeRoi48DJML0yCukpEiV0oIuaIqTSmUtREFCdhjTTFnTPP9Jz308X57efZ2aJ19vyu3ud9ns/zfX/P+ycKANN4mxZ2MH77gm7O8wgIhEzoClbxdYVMgDA3XKwq3WC4GOamaGHZ/5A+0pbRkmJx1ekAi6PghACkyUU11aebS0OWIhleAOAZQ2QYJEMagCcEppBnKmngCTKJPLVEQI4UNaQjTnGYQWYSUeAeb/Iph7jCS6R4Ro4NtPEZfzCNPJNZSyu7GaSOAaayk/chZPP2+KGIuNc7Fu33c1Piy54ya8FeV4jLvWzWor+6VFxjjwVDlpBVzbtWrPWaw7ZVnGlvPNrpfG8lc3t81b9US4BgUM9YJx4qudVuZ4j7VP3TBR5TS5EDtnkwjisD5HxXbPBxDNBPxDpvqvtsNZcATjrPO/EoAQT1WxGPJoE91op77LPe7xNvcIXbLA5v5nLAY5vFRQ4kGraI9ba5wacJ4Lr1/jRcvxwQ1HYx8rskuMuM+KJXE49ud/Xw+kcDbtsovmUh0bBRnG5vAvjdVzz3PN2QTZVtSxpZBXTxQzyGVuAhXwIRAF8zv/LwPlcQ1J+dJG52KO7MEueIc/xF1Uc2eby8/kgFAK/zDtDBb0TAV8gxaujnGwBOIB9UnqdyBUHtdIq4S+23yQ51vTjLG+pCj4ysP/InlgBDrhIb/NuDvmdBvWBaPOBZm73/X4CgnhbxIxf5o6Vzsk58zTfcX5k+NuCBzSJ+bDFu52kz4mzvjg+gh8V6byXdH3SluLd8A/1bF0rdX0MDm2jE2JNhI9NZH89WdmHUba8FO+wrq6b3PWF+dH2DhPaxEJViHUu+wdCe5tIYd+04PLFdStFNZ9W3eifdE35co4k+7/8AeaKDkPxRJzsAAAAASUVORK5CYII="}]}');var l2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\addWebPanelButton.jsx";function c2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u2="AddWebPanel",m2=o2.t;class d2 extends s.PureComponent{constructor(...e){super(...e),c2(this,"dropMode",{support:!1,copy:!1}),c2(this,"state",{drawerOpen:!1,suggestions:[],url:"",autocompleteValue:"",editUrl:void 0}),c2(this,"_onUrlbarStoreChanged",(()=>{const{editUrl:e,autocompleteValue:t}=RE.Z.getUrlfieldStateFromId(u2);this.setState({autocompleteValue:t,editUrl:e})})),c2(this,"onDragEnter",(e=>{this.dropMode=this.supportDropForEvent(e)})),c2(this,"onDragOver",(e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move":e.dataTransfer.dropEffect="none"})),c2(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&en.ZP.getUrlsFromEventPromise(e,!0).then((e=>{e.forEach((e=>{this.props.addNew(e.url)}))}))})),c2(this,"supportDropForEvent",(e=>{const t={};return e.dataTransfer.types.some((e=>e===this.props.rejectMimeType))||(t.support=e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e)),t.copy=t.support&&!e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))),t})),c2(this,"handleClickOutside",(()=>{this.state.drawerOpen&&this.closeDrawer()})),c2(this,"handleKeyDown",((e,t,n)=>{if("start"===e){switch(n.key){case"ArrowUp":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowDown":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":this.props.leaveBar();break;default:return}n.preventDefault(),n.stopPropagation()}else if("suggestion"===e){switch(n.key){case"ArrowLeft":this.moveFocus(t,"left",!1);break;case"ArrowRight":this.moveFocus(t,"right",!1);break;case"ArrowUp":this.moveFocus(t,"up",!1);break;case"ArrowDown":this.moveFocus(t,"down",!1);break;default:return}n.preventDefault(),n.stopPropagation()}})),c2(this,"moveFocus",((e,t,n)=>{const s=pn.findDOMNode(this);if(s instanceof HTMLElement&&(!0===n||si(s))){const n=Array.from(s.querySelectorAll("button.webpanel-suggestion")),i=n.map((e=>e.getAttribute("data-id"))).filter(Boolean);if(0===i.length||i.length!==n.length)return!1;let r,a=0,o=-1;switch(n.forEach((e=>{const t=e.getBoundingClientRect();o<t.left&&(a++,o=t.left)})),t){case"current":if(""===e||"first"===e?e=i[0]:"last"===e&&(e=i[0===this.props.keyAccess?i.length-1:0]),r=i.indexOf(e),-1===r)return!1;break;case"right":case"left":if(1===i.length)return!1;if(r=i.indexOf(e),-1===r)return!1;if("right"===t){if((r+1)%a==0)return!1;if(r+=1,r>=i.length)return!1}else{if(r%a==0)return!1;if(r-=1,r>=i.length)return!1}break;case"up":case"down":if(1===i.length)return!1;if(r=i.indexOf(e),-1===r)return!1;if("up"===t){if(r-=a,r<0)return!1;e=i[r]}else if(r+=a,r>=i.length)return!1;break;default:return!1}e=i[r];const l=s.querySelector(`button.webpanel-suggestion[data-id="${e}"]`);if(l)return l.focus(),!0}return!1})),c2(this,"onToggleCallout",(()=>{if(this.state.drawerOpen)this.closeDrawer();else{this.updateSuggestedSites();const e=document.getElementById("panels");e&&e.classList.add("leak");const t=V.ZP.unsafeGetActivePage().get("url"),n={drawerOpen:!0,url:Pt.jk.getDisplayUrl(t)};QN.Z.setUrlfieldState(u2,{selectionStart:0,selectionEnd:t.length,editUrl:void 0,autocompleteValue:""}),this.setState(n),Wl.Z.bind("esc",this.closeDrawer)}})),c2(this,"onAddWebpanel",(()=>{let e=(this.state.autocompleteValue||this.state.editUrl||this.state.url||"").trim();0!==e.length&&(e=(0,As.q9)(e),this.props.addNew(e),this.closeDrawer())})),c2(this,"onClickSuggested",(e=>{0!==e.length&&(e=(0,As.q9)(e),this.props.addNew(e),this.closeDrawer())})),c2(this,"onUrlChange",(e=>{this.setState({url:e||""})})),c2(this,"closeDrawer",(()=>{const e=document.getElementById("panels");e&&e.classList.remove("leak"),Wl.Z.unbind("esc",this.closeDrawer),this.setState({drawerOpen:!1,url:"",editUrl:void 0,autocompleteValue:""})})),c2(this,"preventContextMenu",(e=>{e.stopPropagation()}))}componentDidMount(){RE.Z.addChangeListener(this._onUrlbarStoreChanged)}updateSuggestedSites(){W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)||h.Z.topSites.get((e=>{const t=this.props.webPanels.map((e=>e.contentUrl))||[];let n=e.filter((e=>-1===t.indexOf(e.url)));const s=m2.filter((e=>-1===t.indexOf(e.url)));if(n.length+s.length<6)n=[];else{const e=12;s.length>e&&(s.splice(e),n=[]);let t=e-s.length;for(;t>0;){if(n.length>=t){n.splice(t);break}t-=6}}this.setState({suggestions:n.concat(s)})}))}componentWillUnmount(){RE.Z.removeChangeListener(this._onUrlbarStoreChanged)}render(){const e=bn()({addwebpanelcallout:!0,hidden:!this.state.drawerOpen}),t=bn()({uifocusstop:this.props.uiFocus,addwebpanel:!0,panelbtn:!0});return s.createElement("div",{className:"addwebpanel-wrapper",__source:{fileName:l2,lineNumber:406,columnNumber:7}},s.createElement("button",{title:(0,ue.Z)("Add Web Panel"),"data-id":this.props.id,className:t,tabIndex:this.props.keyAccess,onKeyDown:this.handleKeyDown.bind(this,"start","-1"),onClick:this.onToggleCallout,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:l2,lineNumber:407,columnNumber:7}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.ebB.small},__source:{fileName:l2,lineNumber:418,columnNumber:9}})),this.state.drawerOpen&&s.createElement(gi.Z,{focusName:"focus-webpanel-suggestions",forceTrap:!0,style:{display:"contents"},__source:{fileName:l2,lineNumber:422,columnNumber:11}},s.createElement("div",{className:e,onContextMenu:this.preventContextMenu,__source:{fileName:l2,lineNumber:426,columnNumber:13}},s.createElement("form",{__source:{fileName:l2,lineNumber:428,columnNumber:15}},s.createElement("header",{__source:{fileName:l2,lineNumber:429,columnNumber:17}},s.createElement("h1",{__source:{fileName:l2,lineNumber:430,columnNumber:19}},(0,ue.Z)("Add Web Panel"))),s.createElement("div",{className:"webpanel-input",__source:{fileName:l2,lineNumber:432,columnNumber:17}},s.createElement(lC,{ref:"input",className:"address",title:(0,ue.Z)("Enter webpage address"),placeholder:"vivaldi.net",displayUrl:this.state.url,editUrl:this.state.editUrl,autocompletionEnabled:!0,onChange:this.onUrlChange,pageId:u2,autoFocus:!0,__source:{fileName:l2,lineNumber:433,columnNumber:19}}),s.createElement("button",{className:"add",tabIndex:"0",onClick:this.onAddWebpanel,dangerouslySetInnerHTML:{__html:cn.md4.medium},tooltip:(0,ue.Z)("Add Web Panel"),__source:{fileName:l2,lineNumber:443,columnNumber:19}})),this.state.suggestions&&this.state.suggestions.length>0&&s.createElement("div",{className:"webpanel-suggestions",__source:{fileName:l2,lineNumber:450,columnNumber:17}},s.createElement("div",{className:"suggestions-list",key:"list",__source:{fileName:l2,lineNumber:451,columnNumber:19}},this.state.suggestions.map(((e,t)=>{const n=e.faviconURL?e.faviconURL:"chrome://favicon/size/16@2x/"+e.url,i=t.toString();return s.createElement("button",{key:t,className:"webpanel-suggestion",tabIndex:0===t?"0":this.props.keyAccess,"data-id":i,title:e.title+"\n"+e.url,onKeyDown:this.handleKeyDown.bind(this,"suggestion",i),onClick:()=>this.onClickSuggested(e.url),__source:{fileName:l2,lineNumber:458,columnNumber:27}},s.createElement("img",{src:n,alt:"",__source:{fileName:l2,lineNumber:467,columnNumber:31}}))}))))))))}}c2(d2,"contextType",Vs.Z);const h2=(0,so.Z)(d2);var p2=n(34155),g2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks\\BookmarksPanel.jsx";function b2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N2=[P.kBookmarksPanelEditorHeight],f2=[{text:(0,ue.Z)("Title"),value:"title",fullScreenTitle:(0,ue.Z)("Sort by Title")},{text:(0,ue.Z)("Address"),value:"url",fullScreenTitle:(0,ue.Z)("Sort by Address")},{text:(0,ue.Z)("Nickname"),value:"nickname",fullScreenTitle:(0,ue.Z)("Sort by Nickname")},{text:(0,ue.Z)("Description"),value:"description",fullScreenTitle:(0,ue.Z)("Sort by Description")},{text:(0,ue.Z)("Created"),value:"dateAdded",fullScreenTitle:(0,ue.Z)("Sort by Date Created")}];class _2 extends s.PureComponent{constructor(...e){super(...e),b2(this,"refEditor",s.createRef()),b2(this,"state",{filter:"",editorHeight:this.props.prefValues[P.kBookmarksPanelEditorHeight],failedUpgrade:!1,sorting:{sortOrder:ti.Z.NO_SORTING,sortField:"manually",comparator:this.sortComparator}}),b2(this,"onPanelStoreChange",(e=>{this.props.open&&"setFocus"===e&&!si(pn.findDOMNode(this))&&this.focusTree()})),b2(this,"onBookmarkStoreChange",(()=>{this.setState({failedUpgrade:tn.ZP.isFailedUpgrade()})})),b2(this,"onSelect",(e=>{this.refEditor.current?.setItem(e)})),b2(this,"addBookmark",(()=>{this.onAdd(!1)})),b2(this,"addFolder",(()=>{this.onAdd(!0)})),b2(this,"onAdd",(e=>{this.setState({filter:""}),this.state.editorHeight>0&&this.refEditor.current?this.refEditor.current._save().then(p2.nextTick((()=>this._tree.onAdd(e)))):(this.setEditorVisible(),this._tree.onAdd(e))})),b2(this,"onCreate",(e=>{e&&(this.setEditorVisible(),this.refEditor.current&&this.refEditor.current.setIsCreating(!0))})),b2(this,"onEditorCanceled",((e,t)=>{t&&e?this._tree.deleteSelectedItems().then((()=>{h.Z.bookmarks.remove(e),this.focusTree()})):this.focusTree()})),b2(this,"setEditorVisible",(()=>{const e=this.state.editorHeight<230?this.props.prefValues[P.kBookmarksPanelEditorHeight]:this.state.editorHeight;this.updateEditorVisiblityWithHeight(e,!0)})),b2(this,"focusTree",(()=>{this._tree.refTreeList.current?.focusTree()})),b2(this,"deleteSelectedItems",(()=>{this._tree.deleteSelectedItems()})),b2(this,"onSortChange",((e,t)=>{const n={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:n});const s={sortOrder:e,sortField:t};st.Z.set(P.kBookmarksPanelSorting,s)})),b2(this,"sortComparator",((e,t)=>tn.ZP.treeSortComparator(e,t,this.state.sorting))),b2(this,"collapseAll",(()=>{this._tree.collapseAllFolders()})),b2(this,"expandAll",(()=>{this._tree.expandAllFolders()})),b2(this,"getSelectedItem",(()=>this._tree.getSelectedItem())),b2(this,"onContextMenu",(e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();e.nativeEvent.buttons>0&&this._tree.unSelectAll(),this._tree.onContextMenu(e,t)})),b2(this,"onSearchChange",(e=>{this.setState({filter:e.target.value})})),b2(this,"onSlidebarPosition",((e,t)=>{this.setState((e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,600),0)})))})),b2(this,"onSlideBarStop",(()=>{this.updateEditorVisiblityWithHeight(this.state.editorHeight,!0)})),b2(this,"onSlidebarToggle",(()=>{const e=this.state.editorHeight>Q.Cn?0:230;this.updateEditorVisiblityWithHeight(e,!0)})),b2(this,"updateEditorVisiblityWithHeight",((e,t)=>{e<Q.Cn?e=0:e>600&&(e=600),t&&st.Z.set(P.kBookmarksPanelEditorHeight,e),this.setState({editorHeight:e})}))}componentDidMount(){const e=A.ZP.get(P.kBookmarksPanelSorting);this.onSortChange(e.sortOrder,e.sortField),re.ZP.addChangeListener(this.onPanelStoreChange),tn.ZP.addChangeListener(this.onBookmarkStoreChange)}componentWillUnmount(){re.ZP.removeChangeListener(this.onPanelStoreChange),tn.ZP.addChangeListener(this.onBookmarkStoreChange)}componentDidUpdate(e,t){!e.open&&this.props.open&&p2.nextTick((()=>this.focusTree()))}render(){if(!this.props.open)return null;const e=this.props.title+(this.state.failedUpgrade?" (needs upgrade)":"");return s.createElement("div",{className:"panel panel-bookmarks",__source:{fileName:g2,lineNumber:276,columnNumber:7}},s.createElement("header",{__source:{fileName:g2,lineNumber:277,columnNumber:9}},s.createElement("h1",{__source:{fileName:g2,lineNumber:278,columnNumber:11}},e),s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:g2,lineNumber:280,columnNumber:11}},s.createElement("input",{type:"search",placeholder:(0,ue.Z)("verb","Search"),value:this.state.filter,onChange:this.onSearchChange,__source:{fileName:g2,lineNumber:281,columnNumber:13}}),s.createElement("div",{className:"toolbar",__source:{fileName:g2,lineNumber:286,columnNumber:13}},s.createElement("div",{className:"toolbar-group",__source:{fileName:g2,lineNumber:287,columnNumber:15}},s.createElement(ko,{onClick:this.addBookmark,tooltip:(0,ue.Z)("New Bookmark"),image:cn.md4.small,__source:{fileName:g2,lineNumber:288,columnNumber:17}}),s.createElement(ko,{onClick:this.deleteSelectedItems,tooltip:(0,ue.Z)("other","Delete"),image:cn.M2k.small,__source:{fileName:g2,lineNumber:293,columnNumber:17}})),s.createElement(ko,{onClick:this.addFolder,tooltip:(0,ue.Z)("command","New Folder"),image:cn._TQ.small,__source:{fileName:g2,lineNumber:299,columnNumber:15}})))),s.createElement(RN,{fields:f2,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:g2,lineNumber:309,columnNumber:9}}),s.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:g2,lineNumber:316,columnNumber:9}},s.createElement(Tz,{ref:e=>this._tree=e,filter:this.state.filter,fullView:!1,inManager:!1,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,__source:{fileName:g2,lineNumber:318,columnNumber:11}})),s.createElement("section",{className:"panel-bookmarks-edit limited",style:{flexBasis:this.state.editorHeight},__source:{fileName:g2,lineNumber:327,columnNumber:9}},s.createElement(PN,{onStop:this.onSlideBarStop,onSlidebarPosition:this.onSlidebarPosition,onDoubleClick:this.onSlidebarToggle,returnOffset:!0,position:"bottom",__source:{fileName:g2,lineNumber:329,columnNumber:11}}),this.state.editorHeight>0&&s.createElement(rz,{ref:this.refEditor,updateLayout:this.setEditorVisible,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:g2,lineNumber:336,columnNumber:13}})))}}const v2=(0,bi.Z)(_2,N2);var E2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarPanel.jsx";const C2=[P.kCalendarDisplayDensity],w2=Gc.Z.getPanelResourceKey(),y2=Symbol("CalendarPanel");let S2=!1;const T2=()=>a.Z.viewPreviousPeriod(w2),k2=()=>a.Z.viewNextPeriod(w2);function I2(e){a.Z.selectDate(w2,e)}const A2=(e,t)=>{a.Z.updateCalendarUI(w2,t.merge({displayMode:e,anchorDate:t.selectedDate}))};function Z2(e,t){const{calendarFilter:n,editor:i,events:r,eventDraft:o,selectedEvent:l}=iD(w2),c=(0,$Z.Z)(C2),u=s.useMemo((()=>({editor:{pageId:w2,uid:i.uid},displayDensity:c[P.kCalendarDisplayDensity],isActivePage:!1,isPanel:!0})),[i.uid,c]);if(!e.open)return S2=!1,null;!1===S2&&e.open&&(a.Z.pollAllCalDAVAccounts(!0),S2=!0);const{displayMode:m}=n,{anchorDate:d}=n,h=Kc.Z.getDisplayRange(d,m);return s.createElement("div",{ref:t,className:"panel",id:"calendar_panel",__source:{fileName:E2,lineNumber:86,columnNumber:5}},s.createElement("header",{__source:{fileName:E2,lineNumber:87,columnNumber:7}},s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:E2,lineNumber:88,columnNumber:9}},s.createElement(Bj,{initialPeriod:d,setPeriod:I2,startDate:h.start,endDate:h.end,displayMode:m,inPanel:!0,__source:{fileName:E2,lineNumber:89,columnNumber:11}})),s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:E2,lineNumber:98,columnNumber:9}},s.createElement(ko,{onClick:()=>a.Z.selectDate(w2,g()()),style:{marginRight:"auto"},title:(0,ue.Z)("Today"),__source:{fileName:E2,lineNumber:99,columnNumber:11}}),s.createElement("div",{className:"toolbar-group",__source:{fileName:E2,lineNumber:105,columnNumber:11}},s.createElement(ko,{className:"button-narrow",onClick:T2,tooltip:(0,ue.Z)("Previous"),image:cn.mgF.medium,__source:{fileName:E2,lineNumber:106,columnNumber:13}}),s.createElement(ko,{className:"button-narrow",onClick:k2,tooltip:(0,ue.Z)("Next"),image:cn.Zu.medium,__source:{fileName:E2,lineNumber:113,columnNumber:13}})),s.createElement("div",{className:"toolbar-group",__source:{fileName:E2,lineNumber:121,columnNumber:11}},s.createElement(ko,{onClick:()=>A2("day",n),title:(0,ue.Z)("Day"),isPressed:"day"===m,__source:{fileName:E2,lineNumber:122,columnNumber:13}}),s.createElement(ko,{onClick:()=>A2("week",n),title:(0,ue.Z)("Week"),isPressed:"week"===m,__source:{fileName:E2,lineNumber:128,columnNumber:13}}),s.createElement(ko,{onClick:()=>A2("agenda",n),title:(0,ue.Z)("Agenda"),isPressed:"agenda"===m,__source:{fileName:E2,lineNumber:134,columnNumber:13}})))),s.createElement(tD.Provider,{value:u,__source:{fileName:E2,lineNumber:143,columnNumber:7}},s.createElement(hj,{filter:n,events:r,editingEvent:o,editorUid:y2,selectedEvent:l,__source:{fileName:E2,lineNumber:144,columnNumber:9}})))}const P2=s.memo(s.forwardRef(Z2));var D2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatPanel.jsx";function M2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O2 extends s.Component{constructor(...e){super(...e),M2(this,"state",{to:""}),M2(this,"_chatStoreListener",(()=>{const e=Yw.getActiveConversation();this.setState({to:e})}))}componentDidMount(){this._chatStoreToken=Yw.addListener(this._chatStoreListener)}componentWillUnmount(){this._chatStoreToken.remove()}render(){return this.props.open?s.createElement("div",{className:"panel",id:"chat",__source:{fileName:D2,lineNumber:37,columnNumber:7}},s.createElement(Jy,{isPanel:!0,initialTo:this.state.to,__source:{fileName:D2,lineNumber:38,columnNumber:9}})):null}}const x2=O2;var L2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactTree.jsx";function R2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B2=[{text:(0,ue.Z)("other","Name"),value:"name",fullScreenTitle:(0,ue.Z)("Sort by Name")}];class F2 extends s.PureComponent{constructor(...e){super(...e),R2(this,"refTreeList",s.createRef()),R2(this,"state",{sorting:A.ZP.get(P.kContactPanelSorting)}),R2(this,"onSortChange",((e,t)=>{const n={sortOrder:e,sortField:t};this.setState({sorting:n}),st.Z.set(P.kContactPanelSorting,{sortOrder:e,sortField:t})})),R2(this,"sortComparator",((e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(this.isFolder(e)&&!this.isFolder(t))return-1;if(this.isFolder(t)&&!this.isFolder(e))return 1;const{sortOrder:n,sortField:s}=this.state.sorting;return ti.Z.getDefaultComparator(n,s)(e,t)})),R2(this,"getSelectedIds",(()=>(this.refTreeList.current?.getAllSelectedItems()||[]).map((e=>e.id)))),R2(this,"getSelectedItems",(()=>{const e=[];for(const t of this.getSelectedIds()){const n=ra.Z.getNodeById(t);n&&e.push(n)}return e})),R2(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),R2(this,"getNodeName",(e=>e.name?e.name:e.emailAddresses&&e.emailAddresses.length>0?e.emailAddresses[0].emailAddress:"")),R2(this,"isFolder",(e=>!1)),R2(this,"hasChildren",(e=>!!e.children&&e.children.length>0)),R2(this,"unSelectAll",(()=>{this.refTreeList.current?.unSelectAll()})),R2(this,"deleteSelected",(()=>{this.refTreeList.current?.onDelete()})),R2(this,"deleteByIds",(e=>{this.refTreeList.current?.onDelete(e)})),R2(this,"validateForEdit",(e=>!0)),R2(this,"isValidAddTarget",(()=>!0)),R2(this,"getTitle",(e=>{if("string"==typeof e){const t=ra.Z.getNodeById(e);return t?this.getNodeName(t):""}return""})),R2(this,"saveTitle",((e,t)=>{const n=ra.Z.getNodeById(e);void 0!==n&&(n.name=t,j.Z.saveContact(n))})),R2(this,"onAdd",(e=>{this.refTreeList.current?.onAdd(e)})),R2(this,"getMenuCapability",(async(e,t,n)=>{switch(e.action){case"CONTEXT_COMPOSE_MAIL":return{handler:this.compose,visible:Boolean(n),...t(e,{})};case"CONTEXT_VIEW_ALL_MESSAGES":return{handler:this.viewAll,visible:Boolean(n),...t(e,{})};case"CONTEXT_CONTAINER_DEFAULT_ACTION":{const n=this.props.prefValues[P.kMailContactDefaultAction];return{items:[{type:"radio",radiogroup:1,checked:"compose"===n,handler:()=>this.setDefaultAction("compose"),...(0,Mn.Z)("Compose")},{type:"radio",radiogroup:1,checked:"viewAllMessages"===n,handler:()=>this.setDefaultAction("viewAllMessages"),...(0,Mn.Z)("View All Messages")}],...t(e,{})}}default:return{...t(e,{})}}})),R2(this,"getMenuVisibility",((e,t)=>{if(!t)return"CONTEXT_NEW_ITEM"===e.action;switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_EDIT":case"CONTEXT_DELETE":return!0;default:return!1}})),R2(this,"onContextMenu",(e=>{this.refTreeList.current?.onContextMenu(e)})),R2(this,"setDefaultAction",(e=>{st.Z.set(P.kMailContactDefaultAction,e)})),R2(this,"onDoubleClick",(e=>{0!==e.button||this.props.prefValues[P.kMailSingleClickTabs]||this.openTabForSelectedNode()})),R2(this,"onNodeMouseDown",((e,t)=>{this.props.focusTree(),0===t.button&&this.props.prefValues[P.kMailSingleClickTabs]&&this.openTabForSelectedNode()})),R2(this,"openTabForSelectedNode",(()=>{const e=this.props.prefValues[P.kMailContactDefaultAction];"compose"===e?this.compose():"viewAllMessages"===e&&this.viewAll()})),R2(this,"compose",(()=>{const e=this.getSelectedItems();e&&e.length>0&&ne.Z.createDraft({to:e.join()})})),R2(this,"viewAll",(()=>{const e=this.getSelectedItems();e&&e.length>0&&(j.Z.selectContact(e[0]),K.Z.selectContact(e[0].emailAddresses[0].emailAddress),$.Z.openURL(Pt.jk.internals.mailpage,{singleton:!0}))})),R2(this,"rowComponent",(e=>{const t=e.node,n=t?this.getNodeName(t):"";return s.createElement("label",{key:`contact__list__${t.id}`,tabIndex:"-1",__source:{fileName:L2,lineNumber:299,columnNumber:7}},s.createElement("span",{className:"tree-row-image",__source:{fileName:L2,lineNumber:302,columnNumber:9}},s.createElement("img",{src:t.avatarUrl?t.avatarUrl:nk.g,alt:"",__source:{fileName:L2,lineNumber:303,columnNumber:11}})),s.createElement("span",{className:"title",title:n,__source:{fileName:L2,lineNumber:307,columnNumber:9}},n))})),R2(this,"selectById",(e=>{this.refTreeList.current?.selectById(e)}))}render(){const e={sortOrder:this.state.sorting.sortOrder,sortField:this.state.sorting.sortField,comparator:this.sortComparator},t={name:"contactlist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement(s.Fragment,null,s.createElement(RN,{fields:B2,manualSorting:!1,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,compact:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:L2,lineNumber:330,columnNumber:7}}),s.createElement("section",{className:"outerScrollbar",__source:{fileName:L2,lineNumber:339,columnNumber:7}},s.createElement(Sg,{ref:this.refTreeList,settings:"CONTACT_TREE",rowComponent:this.rowComponent,nodes:this.props.nodes,onSelect:this.props.onItemSelected,onItemMouseDown:this.onNodeMouseDown,menu:t,onCreate:this.props.onCreate,onEdit:this.props.onEdit,onItemsActivated:this.openTabForSelectedNode,onItemDoubleClick:this.onDoubleClick,delete:j.Z.deleteContactsByIds,enableDragAndDrop:!1,isFolder:this.isFolder,hasChildren:this.hasChildren,supportsInlineEdit:!1,isValidToEdit:kR.Z,getTitle:this.getTitle,saveTitle:this.saveTitle,isValidAddTarget:this.isValidAddTarget,sorting:e,__source:{fileName:L2,lineNumber:340,columnNumber:9}})))}}const U2=F2;var V2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactPhotoPicker.jsx";function H2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W2=256,z2=["../resources/contact-person.png","../resources/contact-company.png"];class G2 extends s.PureComponent{constructor(...e){super(...e),H2(this,"state",{drawerOpen:!1,isDropTarget:!1,initialPhoto:"",id:""}),H2(this,"onToggleOverlay",(()=>{this.setState((e=>({drawerOpen:!e.drawerOpen})))})),H2(this,"handleClickOutside",(()=>{this.setState({drawerOpen:!1})})),H2(this,"photoChange",(()=>{this.refs.photoPicker.click()})),H2(this,"setContactPhoto",(e=>{if(e.target.files&&e.target.files.length>0){var t=e.target.files[0],n=new FileReader;n.onloadend=()=>{this.setState({drawerOpen:!1,isDropTarget:!1}),"string"==typeof n.result&&this.props.attributeChange(n.result)},n.readAsDataURL(t)}})),H2(this,"photoDragOver",(e=>{e.preventDefault()})),H2(this,"photoDragEnter",(()=>{this.setState({isDropTarget:!0})})),H2(this,"photoDragLeave",(()=>{this.setState({isDropTarget:!1})})),H2(this,"photoDrop",(e=>{const t=e.dataTransfer.files[0];if(this.setState({isDropTarget:!1}),t&&t.type.match("image.*")){const e=new FileReader;e.onloadend=()=>{"string"==typeof e.result&&this.setPhoto(e.result)},e.readAsDataURL(t)}})),H2(this,"getGravatar",(()=>{const e=lt()(this.props.emailAddress);fetch(`https://secure.gravatar.com/avatar/${e}?s=512&d=404`).then((e=>{e.ok&&e.blob().then((e=>{const t=new FileReader;t.addEventListener("loadend",(()=>{"string"==typeof t.result&&this.setPhoto(t.result),this.setState({drawerOpen:!1,isDropTarget:!1})})),t.readAsDataURL(e)}))}))})),H2(this,"setPhoto",(e=>{if(!e)return this.props.attributeChange(""),void this.setState({drawerOpen:!1,isDropTarget:!1});const t=document.createElement("canvas"),n=t.getContext("2d"),s=document.createElement("img");let i=0,r=0;t.width=W2,t.height=W2,s.onload=()=>{s.height>s.width?(s.height*=W2/s.width,s.width=W2,r=.5*-(s.height-W2)):(s.width*=W2/s.height,s.height=W2,i=.5*-(s.width-W2)),n.drawImage(s,i,r,s.width,s.height),this.props.attributeChange(t.toDataURL("image/jpeg",.9)),this.setState({drawerOpen:!1})},s.src=e}))}UNSAFE_componentWillReceiveProps(e){const t=e.id;t&&t!==this.props.id&&this.setState({initialPhoto:e.photo,id:t})}componentDidUpdate(e,t){!0===t.drawerOpen&&!1===this.state.drawerOpen?this.props.disableOnClickOutside():!1===t.drawerOpen&&!0===this.state.drawerOpen&&this.props.enableOnClickOutside()}render(){const e=this.props.photo,t=bn()({"contact-photo-is-droptarget":this.state.isDropTarget,"contact-photo":!0});return s.createElement("span",{className:"contact-photo-picker",__source:{fileName:V2,lineNumber:213,columnNumber:7}},s.createElement("button",{className:t,ref:"photo",onDrop:this.photoDrop,onDragEnter:this.photoDragEnter,onDragLeave:this.photoDragLeave,onDragOver:this.photoDragOver,style:e?{backgroundImage:`url(${e})`}:{backgroundImage:`url(${nk.g})`},disabled:-1===this.props.id,onClick:this.onToggleOverlay,__source:{fileName:V2,lineNumber:214,columnNumber:9}}),s.createElement("input",{type:"file",tabIndex:"-1",accept:"image/*",ref:"photoPicker",disabled:-1===this.props.id,onChange:this.setContactPhoto,style:{position:"absolute",visibility:"hidden",height:0,width:0},__source:{fileName:V2,lineNumber:227,columnNumber:9}}),this.state.drawerOpen&&s.createElement("div",{className:"contact-photo-picker-overlay",__source:{fileName:V2,lineNumber:236,columnNumber:11}},s.createElement("div",{className:"photo-picker-suggestions",__source:{fileName:V2,lineNumber:237,columnNumber:13}},s.createElement("button",{className:"photo-picker-suggestion",onClick:this.props.disabled?void 0:this.setPhoto.bind(this,this.state.initialPhoto),style:{backgroundImage:this.state.initialPhoto?`url(${this.state.initialPhoto})`:`url(${nk.g})`},__source:{fileName:V2,lineNumber:238,columnNumber:15}}),z2.map(((e,t)=>s.createElement("button",{className:"photo-picker-suggestion",key:`photo-picker-suggestion-${t}`,onClick:this.setPhoto.bind(this,z2[t]),style:{backgroundImage:`url(${e})`},__source:{fileName:V2,lineNumber:251,columnNumber:24}})))),s.createElement("input",{type:"button",onClick:this.getGravatar,value:(0,ue.Z)("Get Gravatar"),__source:{fileName:V2,lineNumber:260,columnNumber:13}}),s.createElement("input",{type:"button",className:"primary",onClick:this.photoChange,value:(0,ue.Z)("Browse..."),__source:{fileName:V2,lineNumber:265,columnNumber:13}})))}}const K2=(0,so.Z)(G2);var j2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactPropertyListInput.jsx";function Y2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class $2 extends s.PureComponent{constructor(...e){super(...e),Y2(this,"isIMEOpen",!1),Y2(this,"state",{values:this.props.values}),Y2(this,"_handleChange",((e,t)=>{if(this.isIMEOpen)return!1;const n=t.target.value,s=t.target.name;this.setState((t=>{const i=[...t.values];return i[e]={...t.values[e],[s]:n},{values:i}}))})),Y2(this,"_handleAdd",(e=>{0===e.button&&this._handleChange(this.props.values.length,e)})),Y2(this,"_handleRemove",((e,t)=>{0===t.button&&(e?this.props.onRemove(e):this.resetValues())})),Y2(this,"_handleSubmit",(()=>{this.props.onChange(this.state.values)})),Y2(this,"_handleFormSubmit",(e=>{e.preventDefault(),this._handleSubmit()})),Y2(this,"_handleInputKeyDown",(e=>{switch(e.key){case"Escape":return void this.resetValues();case"Enter":return void this._handleSubmit()}})),Y2(this,"onCompositionUpdate",(()=>{this.isIMEOpen=!0})),Y2(this,"onCompositionEnd",((e,t)=>{this.isIMEOpen=!1,this._handleChange(e,t)})),Y2(this,"renderTypes",((e,t)=>s.createElement("select",{className:"contact-type-picker",name:"type",onChange:this._handleChange.bind(this,t),onBlur:this._handleFormSubmit,value:e,__source:{fileName:j2,lineNumber:121,columnNumber:7}},s.createElement("option",{value:"",__source:{fileName:j2,lineNumber:127,columnNumber:9}},(0,ue.Z)("contact type","default")),s.createElement("option",{value:"home",__source:{fileName:j2,lineNumber:128,columnNumber:9}},(0,ue.Z)("home")),s.createElement("option",{value:"work",__source:{fileName:j2,lineNumber:129,columnNumber:9}},(0,ue.Z)("work")))))}resetValues(){this.setState({values:this.props.values})}renderSimpleForm(e,t){return s.createElement("form",{__source:{fileName:j2,lineNumber:98,columnNumber:12}},this.renderTypes(e,0),this.props.label&&s.createElement("input",{className:"contact-field",type:e,defaultValue:this.props.values[0],placeholder:t,title:t,name:"value",onChange:e=>this._handleChange(0,e),onKeyDown:this._handleInputKeyDown,onBlur:this._handleFormSubmit,onCompositionStart:this.onCompositionUpdate,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:e=>this.onCompositionEnd(0,e),__source:{fileName:j2,lineNumber:101,columnNumber:9}}))}render(){const{values:e}=this.state,{inputType:t="text",label:n}=this.props;return 0===e.length?this.renderSimpleForm(t,n):s.createElement(s.Fragment,null,s.createElement("form",{onSubmit:this._handleFormSubmit,__source:{fileName:j2,lineNumber:143,columnNumber:7}},e.map(((i,r)=>s.createElement(s.Fragment,{key:i.id+"_"+r,__source:{fileName:j2,lineNumber:145,columnNumber:18}},this.renderTypes(i.type||"",r),s.createElement("span",{className:"contact-field",__source:{fileName:j2,lineNumber:149,columnNumber:13}},this.props.label&&s.createElement("input",{type:t,name:"value",defaultValue:i.value||"",placeholder:n,title:n,onChange:this._handleChange.bind(this,r),onBlur:this._handleFormSubmit,onKeyDown:this._handleInputKeyDown,onCompositionStart:this.onCompositionUpdate,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:this.onCompositionEnd,autoFocus:r===e.length-1,__source:{fileName:j2,lineNumber:151,columnNumber:17}}),s.createElement("button",{type:"button",className:"remove",title:(0,ue.Z)("verb","Remove"),onMouseUp:this._handleRemove.bind(this,i.id),onClick:this._handleRemove.bind(this,i.id),__source:{fileName:j2,lineNumber:166,columnNumber:15}},"–")),r===e.length-1&&s.createElement("input",{type:"button",value:this.props.actionLabel,className:"add",onMouseUp:this._handleAdd,onClick:this._handleAdd,__source:{fileName:j2,lineNumber:177,columnNumber:15}}))))))}}var X2="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactView.jsx";function Q2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q2 extends s.Component{constructor(...e){super(...e),Q2(this,"state",{contact:this.props.contact,editMode:!1}),Q2(this,"focus",(()=>{this.refs.name&&this.refs.name.focus()})),Q2(this,"changeProperty",((e,t)=>{const{contact:n}=this.state;let s=t.target.value;"birthday"===e&&(s=g()(s).valueOf()),n[e]!==s&&(n[e]=s,this.setState({contact:n}))})),Q2(this,"updateCheckboxProperty",((e,t)=>{const{contact:n}=this.state;-1!==n.id&&j.Z.update(n.id,{[e]:t.target.checked})})),Q2(this,"updateAvatar",(e=>{const{contact:t}=this.state;j.Z.update(t.id,{avatarUrl:e}),this.setState((t=>({contact:{...t.contact,avatarUrl:e}})))})),Q2(this,"update",(e=>{const{contact:t}=this.state;switch(e){case"name":return j.Z.update(t.id,{name:t.name});case"birthday":return j.Z.update(t.id,{birthday:t.birthday});case"note":return j.Z.update(t.id,{note:t.note})}})),Q2(this,"_handleEmailsChanged",(e=>{const{contact:t}=this.state;e.forEach((e=>{const n=e.id,s=t.emailAddresses.find((e=>e.id===n));s?(0,nd.default)(s,e)||j.Z.updateEmailAddress(n,{contactId:t.id,emailAddress:e.value,type:e.type}):j.Z.addEmailAddress({contactId:t.id,emailAddress:e.value,type:e.type})}))})),Q2(this,"_handleEmailsRemoved",(e=>{j.Z.removeEmailAddress({contactId:this.props.contact.id,emailAddressId:e})})),Q2(this,"_handlePropertyValueChanged",(({propertyName:e,propertyCollectionName:t,values:n})=>{if(0===n.length)return;const{contact:s}=this.state,i=s.id;n.forEach((n=>{const r=n.id,a=s[t].find((e=>e.id===r));a?n.value!==a[e]&&j.Z.updatePropertyItem({contactId:i,propertyName:e,propertyId:r,type:n.type,propertyValue:n.value}):j.Z.addPropertyItem({contactId:i,propertyName:e,type:n.type||"",propertyValue:n.value})}))})),Q2(this,"_handlePhoneNumbersChanged",(e=>{this._handlePropertyValueChanged({values:e,propertyName:"phoneNumber",propertyCollectionName:"phoneNumbers"})})),Q2(this,"_handlePhoneNumbersRemoved",(e=>{j.Z.removePropertyItem({propertyName:"phoneNumber",contactId:this.state.contact.id,propertyId:e})})),Q2(this,"_handlePostalAddressesChanged",(e=>{this._handlePropertyValueChanged({values:e,propertyName:"postalAddress",propertyCollectionName:"postalAddresses"})})),Q2(this,"_handlePostalAddressesRemoved",(e=>{j.Z.removePropertyItem({propertyName:"postalAddress",contactId:this.state.contact.id,propertyId:e})})),Q2(this,"onKeyDown",((e,t)=>{"Enter"!==t.key||this.update(e)})),Q2(this,"call",((e="",t)=>{const n=e.replace(/[^\d]/g,"");n&&(t.stopPropagation(),$.Z.openURL(`tel:+${n}`))})),Q2(this,"compose",((e="",t)=>{e&&(t.stopPropagation(),ne.Z.createDraft({to:e}))})),Q2(this,"showMap",((e="",t)=>{e&&(t.stopPropagation(),$.Z.openURL(`map:+${e}`))})),Q2(this,"enableEditMode",(()=>{this.setState({editMode:!0},(()=>this.focus()))})),Q2(this,"toggleEditMode",(()=>{this.setState((e=>({editMode:!e.editMode})))})),Q2(this,"addSpaces",(e=>e.split("").reverse().join("").replace(/(.{3})/g,"$1 ").split("").reverse().join("").replace("+ ","+"))),Q2(this,"renderDisplayMode",(()=>{const{contact:e}=this.state;return s.createElement("div",{className:"contact-view cardview",onClick:this.props.onEdit,__source:{fileName:X2,lineNumber:272,columnNumber:7}},s.createElement("div",{className:"contact-header",__source:{fileName:X2,lineNumber:275,columnNumber:9}},s.createElement(K2,{ref:this.props.passRef,id:e.id,disabled:!0,attributeChange:this.updateAvatar,photo:e.avatarUrl||"",emailAddress:e.emailAddresses.length>0?e.emailAddresses[0].emailAddress:"",__source:{fileName:X2,lineNumber:276,columnNumber:11}}),s.createElement("div",{className:bn()({"contact-name":!0,selectable:e.name,disabled:!e.name}),__source:{fileName:X2,lineNumber:285,columnNumber:11}},e.name||(0,ue.Z)("noun","Name"))),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:294,columnNumber:9}}),e.emailAddresses.map((e=>{if(e.emailAddress)return s.createElement(s.Fragment,{key:e.id,__source:{fileName:X2,lineNumber:297,columnNumber:20}},s.createElement("div",{className:"contact-field-type",__source:{fileName:X2,lineNumber:298,columnNumber:15}},s.createElement("span",{className:"info",__source:{fileName:X2,lineNumber:299,columnNumber:17}},e.type),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.HXY},className:"contact-action-button",onClick:this.compose.bind(null,e.emailAddress),title:(0,ue.Z)("Compose new mail"),__source:{fileName:X2,lineNumber:302,columnNumber:17}})),s.createElement("p",{className:"contact-email selectable",__source:{fileName:X2,lineNumber:309,columnNumber:15}},e.emailAddress))})),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:316,columnNumber:9}}),e.phoneNumbers.map((e=>{if(e.phoneNumber)return s.createElement(s.Fragment,{key:e.id,__source:{fileName:X2,lineNumber:319,columnNumber:20}},s.createElement("div",{className:"contact-field-type",__source:{fileName:X2,lineNumber:320,columnNumber:15}},s.createElement("span",{className:"info",__source:{fileName:X2,lineNumber:321,columnNumber:17}},e.type),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.Mqy},className:"contact-action-button",onClick:this.call.bind(null,e.phoneNumber),title:(0,ue.Z)("Call"),__source:{fileName:X2,lineNumber:324,columnNumber:17}})),s.createElement("p",{className:"contact-phone selectable",__source:{fileName:X2,lineNumber:331,columnNumber:15}},this.addSpaces(e.phoneNumber)))})),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:338,columnNumber:9}}),e.postalAddresses.map((e=>{if(e.postalAddress)return s.createElement(s.Fragment,{key:e.id,__source:{fileName:X2,lineNumber:341,columnNumber:20}},s.createElement("div",{className:"contact-field-type",__source:{fileName:X2,lineNumber:342,columnNumber:15}},s.createElement("span",{className:"info",__source:{fileName:X2,lineNumber:343,columnNumber:17}},e.type),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.rnU},className:"contact-action-button",onClick:this.showMap.bind(null,e.postalAddress),title:(0,ue.Z)("Open map"),__source:{fileName:X2,lineNumber:346,columnNumber:17}})),s.createElement("p",{className:"contact-phone selectable",__source:{fileName:X2,lineNumber:353,columnNumber:15}},e.postalAddress))})),0!==e.birthday&&s.createElement(s.Fragment,null,s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:361,columnNumber:11}}),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.bcq.small},className:"contact-field-type contact-action-button",__source:{fileName:X2,lineNumber:362,columnNumber:11}}),s.createElement("p",{className:"contact-birthday selectable",__source:{fileName:X2,lineNumber:366,columnNumber:11}},g()(e.birthday).format("LL"))),e.note&&s.createElement(s.Fragment,null,s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:372,columnNumber:11}}),s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.NNg.small},className:"contact-field-type contact-action-button",onClick:this.toggleEditMode,title:(0,ue.Z)("Edit note"),__source:{fileName:X2,lineNumber:373,columnNumber:11}}),s.createElement("p",{className:"contact-note selectable",__source:{fileName:X2,lineNumber:379,columnNumber:11}},e.note)))}))}static getDerivedStateFromProps(e,t){return{contact:e.contact}}render(){const{contact:e}=this.state,t=e.emailAddresses[0]&&e.emailAddresses[0].emailAddress;return this.state.editMode?s.createElement("div",{className:"contact-view cardview",__source:{fileName:X2,lineNumber:399,columnNumber:7}},s.createElement("div",{className:"contact-header",__source:{fileName:X2,lineNumber:400,columnNumber:9}},s.createElement(K2,{id:e.id,attributeChange:this.updateAvatar,photo:e.avatarUrl||"",emailAddress:t,__source:{fileName:X2,lineNumber:401,columnNumber:11}}),s.createElement("span",{className:"contact-name",__source:{fileName:X2,lineNumber:407,columnNumber:11}},s.createElement("input",{ref:"name",type:"text",value:e.name||"",placeholder:(0,ue.Z)("other","Name"),onChange:this.changeProperty.bind(this,"name"),onKeyDown:this.onKeyDown.bind(this,"name"),onBlur:this.update.bind(this,"name"),__source:{fileName:X2,lineNumber:408,columnNumber:13}}))),s.createElement($2,{values:e.emailAddresses.map((({emailAddress:e,id:t,type:n})=>({value:e,id:t,type:n}))),label:(0,ue.Z)("Email"),actionLabel:(0,ue.Z)("Add another Email"),inputType:"email",onChange:this._handleEmailsChanged,onRemove:this._handleEmailsRemoved,key:`emailAddresses-${Math.max(e.emailAddresses.length,1)}`,__source:{fileName:X2,lineNumber:426,columnNumber:9}}),s.createElement("label",{className:"contact-trusted",__source:{fileName:X2,lineNumber:439,columnNumber:9}},s.createElement("input",{type:"checkbox",checked:e.trusted||!1,onChange:this.updateCheckboxProperty.bind(this,"trusted"),__source:{fileName:X2,lineNumber:440,columnNumber:11}}),s.createElement("span",{__source:{fileName:X2,lineNumber:445,columnNumber:11}},(0,ue.Z)("Always allow external content in emails"))),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:448,columnNumber:9}}),s.createElement($2,{values:e.phoneNumbers.map((({phoneNumber:e,id:t,type:n})=>({value:e,id:t,type:n}))),label:(0,ue.Z)("Phone Number"),actionLabel:(0,ue.Z)("Add another Phone Number"),inputType:"tel",onChange:this._handlePhoneNumbersChanged,onRemove:this._handlePhoneNumbersRemoved,key:`phoneNumbers-${e.phoneNumbers.length}`,__source:{fileName:X2,lineNumber:449,columnNumber:9}}),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:462,columnNumber:9}}),s.createElement($2,{values:e.postalAddresses.map((({postalAddress:e,id:t,type:n})=>({value:e,id:t,type:n}))),label:(0,ue.Z)("Postal Address"),actionLabel:(0,ue.Z)("Add another Postal Address"),inputType:"text",onChange:this._handlePostalAddressesChanged,onRemove:this._handlePostalAddressesRemoved,key:`postalAddresses-${e.postalAddresses.length}`,__source:{fileName:X2,lineNumber:463,columnNumber:9}}),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:476,columnNumber:9}}),s.createElement("span",{className:"contact-field",__source:{fileName:X2,lineNumber:477,columnNumber:9}},s.createElement(yT,{className:"contact-bday",value:e.birthday?g()(e.birthday).format("YYYY-MM-DD"):"",title:(0,ue.Z)("title","Birthday"),onChange:this.changeProperty.bind(this,"birthday"),onKeyDown:this.onKeyDown.bind(this,"birthday"),onBlur:this.update.bind(this,"birthday"),placeholder:(0,ue.Z)("title","Birthday"),__source:{fileName:X2,lineNumber:478,columnNumber:11}}),s.createElement("button",{type:"button",className:"remove",title:(0,ue.Z)("Remove Birthday"),onMouseUp:this.changeProperty.bind({target:{value:0}},"birthday"),__source:{fileName:X2,lineNumber:490,columnNumber:11}},"–")),s.createElement("span",{className:"spacer",__source:{fileName:X2,lineNumber:499,columnNumber:9}}),s.createElement("textarea",{className:"contact-edit-note",type:"text",value:e.note||"",title:e.note||"",onChange:this.changeProperty.bind(this,"note"),onKeyDown:this.onKeyDown.bind(this,"note"),onBlur:this.update.bind(this,"note"),placeholder:(0,ue.Z)("Note"),__source:{fileName:X2,lineNumber:500,columnNumber:9}})):this.renderDisplayMode()}}const J2=q2;var e3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactViewDisabled.jsx";function t3(){return s.createElement("div",{className:"contact-view cardview",__source:{fileName:e3,lineNumber:8,columnNumber:5}},s.createElement("div",{className:"contact-header",__source:{fileName:e3,lineNumber:9,columnNumber:7}},s.createElement("span",{className:"contact-photo-picker",__source:{fileName:e3,lineNumber:10,columnNumber:9}},s.createElement("div",{className:"contact-photo",style:{backgroundImage:"url('/resources/contact-person.png')"},__source:{fileName:e3,lineNumber:11,columnNumber:11}})),s.createElement("input",{className:"contact-name",type:"text",placeholder:(0,ue.Z)("other","Name"),disabled:!0,__source:{fileName:e3,lineNumber:17,columnNumber:11}})),s.createElement("input",{className:"contact-email",type:"email",placeholder:(0,ue.Z)("Email"),disabled:!0,__source:{fileName:e3,lineNumber:25,columnNumber:7}}),s.createElement("label",{className:"contact-trusted",__source:{fileName:e3,lineNumber:32,columnNumber:7}},s.createElement("input",{type:"checkbox",disabled:!0,__source:{fileName:e3,lineNumber:33,columnNumber:9}}),s.createElement("span",{__source:{fileName:e3,lineNumber:34,columnNumber:9}},(0,ue.Z)("Always allow external content in emails"))),s.createElement("span",{className:"spacer",__source:{fileName:e3,lineNumber:36,columnNumber:7}}),s.createElement("input",{className:"contact-email",type:"tel",placeholder:(0,ue.Z)("Phone number"),disabled:!0,__source:{fileName:e3,lineNumber:37,columnNumber:7}}),s.createElement("span",{className:"spacer",__source:{fileName:e3,lineNumber:43,columnNumber:7}}),s.createElement("input",{className:"contact-email",type:"text",placeholder:(0,ue.Z)("Postal address"),disabled:!0,__source:{fileName:e3,lineNumber:44,columnNumber:7}}),s.createElement("span",{className:"spacer",__source:{fileName:e3,lineNumber:50,columnNumber:7}}),s.createElement("input",{className:"contact-email",type:"text",placeholder:(0,ue.Z)("title","Birthday"),disabled:!0,__source:{fileName:e3,lineNumber:51,columnNumber:7}}),s.createElement("span",{className:"spacer",__source:{fileName:e3,lineNumber:57,columnNumber:7}}),s.createElement("input",{className:"contact-postal",type:"text",placeholder:(0,ue.Z)("Notes"),disabled:!0,__source:{fileName:e3,lineNumber:58,columnNumber:7}}))}var n3=n(34155),s3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactsPanel.jsx";function i3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r3=[P.kContactPanelEditorHeight,P.kMailContactDefaultAction,P.kMailSingleClickTabs];class a3 extends s.PureComponent{constructor(...e){super(...e),i3(this,"_tree",s.createRef()),i3(this,"_editor",s.createRef()),i3(this,"state",{items:ra.Z.getAsTree(""),filter:"",editorHeight:this.props.prefValues[P.kContactPanelEditorHeight],contact:{id:-1}}),i3(this,"_applyTransitionState",(()=>{const e=re.ZP.getTransitionState("contacts");ie.Z.clearTransitionState("contacts"),this._tree.current&&e?(e.selectId&&this._tree.current.selectById(e.selectId),"edit"===e.reason?this.onEdit():e.setFocus&&this.focusTree()):this.focusTree()})),i3(this,"onPanelStoreChange",(e=>{if(this.props.open)switch(e){case"setFocus":si(pn.findDOMNode(this))||this.focusTree();break;case"display":n3.nextTick((()=>this._applyTransitionState()))}})),i3(this,"onContactStoreChange",(e=>{switch(e.reason){case"selectedContact":return this.onContactSelectedChange(e.contact,e.focusContactView);case"newContact":return this.onContactSelectedChange(e.contact,e.focusContactView,{items:ra.Z.getAsTree(this.state.filter)});case"startup":{const e=d.Z.getSync("SELECTION_CONTACT_TREE")?.selectedIds_[0]?.id,t=e&&ra.Z.getNodeById(e)||{id:-1};this.setState((e=>({contact:t,items:ra.Z.getAsTree(e.filter)})));break}case"addGeneratedContacts":case"deleteContact":case"updatedContact":return this.setState((e=>({contact:ra.Z.getSelected()||{id:-1},items:ra.Z.getAsTree(e.filter)})))}})),i3(this,"onContactSelectedChange",((e,t,n)=>{this.setState({...n,contact:e},(()=>{t&&-1!==e.id&&(this._editor.current&&this._editor.current.enableEditMode(),this._tree.current&&this._tree.current.selectById(e.id))}))})),i3(this,"newItem",(e=>{this._tree.current&&this._tree.current.onAdd(e)})),i3(this,"onCreate",((e,t,n,s)=>(this.onEdit(),j.Z.newEmptyContact()))),i3(this,"onEdit",(()=>{this.state.editorHeight<Q.Cn&&this.onSlidebarToggle();(this.state.contact||ra.Z.getSelected())&&this._editor.current&&this._editor.current.enableEditMode()})),i3(this,"deleteSelected",(()=>{this._tree.current&&this._tree.current.deleteSelected()})),i3(this,"handleFilterChange",(e=>{const t=e.target.value;this.setState({filter:t,items:ra.Z.getAsTree(t)})})),i3(this,"onCompose",(()=>{this._tree.current&&this._tree.current.compose()})),i3(this,"focusTree",(()=>{this._tree.current&&this._tree.current.refTreeList.current?.focusTree()})),i3(this,"onItemSelected",(e=>{if(e){if(e.id===this.state.contact.id)return;j.Z.selectContact(e,!1)}else this.setState({contact:{id:-1}})})),i3(this,"onContextMenu",(e=>{this._tree.current&&(e.nativeEvent.buttons>0&&this._tree.current.unSelectAll(),this._tree.current.onContextMenu(e))})),i3(this,"onSlidebarPosition",((e,t)=>{this.setState((e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,800),0)})))})),i3(this,"onSlideBarStop",(()=>{this.setState((e=>{let t=e.editorHeight;return t<=Q.Cn&&(t=0),st.Z.set(P.kContactPanelEditorHeight,t),{editorHeight:t}}))})),i3(this,"onSlidebarToggle",(()=>{this.setState((e=>{let t=e.editorHeight;return t>Q.Cn?(t=0,st.Z.set(P.kContactPanelEditorHeight,t)):(t=320,st.Z.reset(P.kContactPanelEditorHeight)),{editorHeight:t}}))}))}componentDidMount(){re.ZP.addChangeListener(this.onPanelStoreChange),ra.Z.addChangeListener(this.onContactStoreChange)}componentWillUnmount(){re.ZP.removeChangeListener(this.onPanelStoreChange),ra.Z.removeChangeListener(this.onContactStoreChange)}componentDidUpdate(e,t){!e.open&&this.props.open&&n3.nextTick((()=>this._applyTransitionState()))}render(){if(!this.props.open)return null;const e=this.state.contact&&-1!==this.state.contact.id?this.state.contact:void 0;return s.createElement("div",{className:"panel",id:"contacts",__source:{fileName:s3,lineNumber:291,columnNumber:7}},s.createElement("header",{__source:{fileName:s3,lineNumber:293,columnNumber:9}},s.createElement("h1",{__source:{fileName:s3,lineNumber:294,columnNumber:11}},this.props.title),s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:s3,lineNumber:296,columnNumber:11}},s.createElement("input",{type:"search",placeholder:(0,ue.Z)("verb","Search"),value:this.state.filter,onChange:this.handleFilterChange,__source:{fileName:s3,lineNumber:297,columnNumber:13}}),s.createElement("div",{className:"toolbar",__source:{fileName:s3,lineNumber:301,columnNumber:13}},s.createElement("div",{className:"toolbar-group",__source:{fileName:s3,lineNumber:302,columnNumber:15}},s.createElement(ko,{onClick:this.newItem.bind(this,!1),tooltip:(0,ue.Z)("New Contact"),image:cn.md4.small,__source:{fileName:s3,lineNumber:303,columnNumber:17}}),s.createElement(ko,{onClick:this.deleteSelected,disabled:-1===this.state.contact,image:cn.M2k.small,tooltip:(0,ue.Z)("other","Delete"),__source:{fileName:s3,lineNumber:308,columnNumber:17}})),s.createElement(ko,{onClick:this.onCompose,tooltip:(0,ue.Z)("Compose mail to contact"),disabled:-1===this.state.contact,image:cn.XTV.small,__source:{fileName:s3,lineNumber:315,columnNumber:15}})))),s.createElement(U2,{ref:this._tree,nodes:this.state.items,keyAccess:this.props.keyAccess,onCreate:this.onCreate,onEdit:this.onEdit,focusTree:this.focusTree,prefValues:this.props.prefValues,onItemSelected:this.onItemSelected,__source:{fileName:s3,lineNumber:325,columnNumber:9}}),s.createElement("section",{className:"panel-contacts-edit outerScrollbar",style:{flexBasis:this.state.editorHeight},__source:{fileName:s3,lineNumber:336,columnNumber:9}},s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,onDoubleClick:this.onSlidebarToggle,returnOffset:!0,position:"bottom",__source:{fileName:s3,lineNumber:339,columnNumber:11}}),this.state.editorHeight>0&&e?s.createElement(J2,{ref:this._editor,key:e.id,contact:e,onEdit:this.onEdit,__source:{fileName:s3,lineNumber:347,columnNumber:15}}):s.createElement(t3,{__source:{fileName:s3,lineNumber:353,columnNumber:15}})))}}const o3=(0,bi.Z)(a3,r3);var l3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryPanel.jsx";function c3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u3=[{text:(0,ue.Z)("Date"),value:"visitTime",fullScreenTitle:(0,ue.Z)("Sort by Date")},{text:(0,ue.Z)("Title"),value:"title",fullScreenTitle:(0,ue.Z)("Sort by Title")},{text:(0,ue.Z)("Address"),value:"address",fullScreenTitle:(0,ue.Z)("Sort by Address")},{text:(0,ue.Z)("Views"),value:"visitCount",fullScreenTitle:(0,ue.Z)("Sort by Page Views")}];class m3 extends s.PureComponent{constructor(...e){super(...e),c3(this,"hasLoadedData",!1),c3(this,"onSearch",(e=>{const t=u.Z.getPanelResourceKey();w.saveStateFromSearchQuery(t,e),w.searchHistory(t,e)})),c3(this,"onSearchDomain",(e=>{e=cC(e);const{historyFilter:t}=this.props,n=aY(e),s=t.merge({text:e,parsedFilter:n,searchURL:!0});this.onSearch(s)})),c3(this,"onContextMenu",(e=>{e.nativeEvent.buttons>0&&this.refs.tree.unSelectAll(),this.refs.tree.onContextMenu(e)})),c3(this,"onSortChange",((e,t)=>{const{historyFilter:n}=this.props,s=n.merge({sortOrder:e,sortField:t});this.onSearch(s)})),c3(this,"focusTree",(()=>{const e=pn.findDOMNode(this.refs.tree),{HTMLElement:t}=this.context;e instanceof t&&e.focus()}))}componentDidUpdate(e){!e.open&&this.props.open&&this.refs.searchField&&this.refs.searchField.focusField(),this.props.open&&!this.hasLoadedData&&(this.hasLoadedData=!0,w.loadAll())}render(){if(!this.props.open)return null;const e=this.props.historyItems,t=this.props.historyFilter;return s.createElement("div",{className:"panel",id:"history-panel",__source:{fileName:l3,lineNumber:102,columnNumber:7}},s.createElement("header",{__source:{fileName:l3,lineNumber:103,columnNumber:9}},s.createElement("h1",{__source:{fileName:l3,lineNumber:104,columnNumber:11}},this.props.title),s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:l3,lineNumber:105,columnNumber:11}},s.createElement(uY,{ref:"searchField",showPicker:!0,search:this.onSearch,historyFilter:t,minDate:this.props.oldestHistoryDate,__source:{fileName:l3,lineNumber:106,columnNumber:13}}))),e.length>0&&s.createElement(RN,{fields:u3,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:t.sortField,sortOrder:t.sortOrder,fullsize:!1,manualSorting:!1,__source:{fileName:l3,lineNumber:115,columnNumber:11}}),e.length>0?s.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:l3,lineNumber:125,columnNumber:11}},s.createElement(SY,{ref:"tree",fullView:!1,inManager:!1,nodes:e,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:l3,lineNumber:127,columnNumber:13}})):s.createElement("section",{__source:{fileName:l3,lineNumber:135,columnNumber:11}},s.createElement("p",{__source:{fileName:l3,lineNumber:136,columnNumber:13}},(0,ue.Z)("No browsing history data for selected period."))))}}c3(m3,"contextType",Vs.Z);const d3=hY(m3);var h3=n(96244),p3=n(91355),g3=[{name:(0,ue.Z)("All Messages"),accountId:he.of,id:he.w1,children:[]},{name:(0,ue.Z)("Custom Folders"),accountId:he.Ry,path:he.ym,id:he.Ry,children:[]},{name:(0,ue.Z)("Mailing Lists"),accountId:he.wC,path:he.ym,id:he.jT,children:[]},{name:(0,ue.Z)("Filters"),accountId:he.Kz,id:he.rQ,children:[]},{name:(0,ue.Z)("Flags"),accountId:he.MN,id:he.q0,children:[]},{name:(0,ue.Z)("Labels"),accountId:he.ut,id:he.pz,children:[]}];const b3=[...g3,{name:(0,ue.Z)("Feeds"),accountId:he.u4,id:he.sM,children:[]}];function N3(e){const{unseen:t,unread:n,total:s}=e;return t>0?t===n&&n===s?(0,ue.Z)("$1 new message","$1 new messages",[t]):t===n?(0,ue.Z)("$1 new message of $2 messages","$1 new messages of $2 messages",[t,s]):(0,ue.Z)("$1 new in $2 unread of $3 messages","$1 new in $2 unread of $3 messages",[t,n,s]):n>0?n===s?(0,ue.Z)("$1 unread message","$1 unread messages",[n]):(0,ue.Z)("$1 unread of $2 messages","$1 unread of $2 messages",[n,s]):(0,ue.Z)("$1 message","$1 messages",[s])}var f3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanelCategory.jsx";function _3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v3=[P.kMailCountersPanelUnseenEnabled];class E3 extends s.Component{constructor(...e){super(...e),_3(this,"_isMounted",!1),_3(this,"state",{unseen:0,unread:0,total:0}),_3(this,"_updateCounters",((e=this.props)=>{const{accountId:t,path:n}=e;if(this._isMounted){const e=Cm.C.getCounters(t,n);this.setStateIfNeeded({unread:e&&e.unread||0,unseen:e&&e.unseen||0,total:e&&e.total||0})}})),_3(this,"setStateIfNeeded",(e=>{Object.getOwnPropertyNames(e).some((t=>e[t]!==this.state[t]))&&this.setState(e)})),_3(this,"onCountersChanged",(e=>{"counters"===e.target&&this._updateCounters()}))}componentDidMount(){this._isMounted=!0,this._updateCounters(),Cm.C.addChangeListener(this.onCountersChanged)}componentWillUnmount(){Cm.C.removeChangeListener(this.onCountersChanged)}render(){const e=this.state.unseen>0&&this.props.prefValues[P.kMailCountersPanelUnseenEnabled],{unseen:t,unread:i,total:r}=this.state,a=this.props.label+" "+N3({unseen:t,unread:i,total:r});return s.createElement("div",{className:"mail-panel-category-container",__source:{fileName:f3,lineNumber:90,columnNumber:7}},s.createElement("label",{className:"mail-panel-category"+(this.props.hasChildren?"":" empty"),title:a,__source:{fileName:f3,lineNumber:91,columnNumber:9}},s.createElement("span",{onClick:this.props.onClick,className:"title",__source:{fileName:f3,lineNumber:98,columnNumber:11}},this.props.label),!this.props.isExpanded&&s.createElement("div",{className:"counter-container",__source:{fileName:f3,lineNumber:104,columnNumber:13}},e&&s.createElement("span",{className:"item-count counter-unseen",__source:{fileName:f3,lineNumber:107,columnNumber:17}},this.state.unseen),this.state.unread>0&&s.createElement("span",{className:"item-count counter-unread",__source:{fileName:f3,lineNumber:113,columnNumber:17}},this.state.unread)),this.props.hasChildren&&s.createElement("span",{className:"expand-icon display-hint",onMouseDown:Rx.Z,onMouseUp:()=>this.props.handleExpand(this.props.id),dangerouslySetInnerHTML:{__html:n(4103)},__source:{fileName:f3,lineNumber:122,columnNumber:13}})))}}const C3=(0,bi.Z)(E3,v3),w3="change",y3={_indicators:{}},S3=new class extends(Bi()){emitChange(){this.emit(w3)}addChangeListener(e){this.on(w3,e)}removeChangeListener(e){this.removeListener(w3,e)}getIndicators(e,t){return e&&t?y3[e]&&y3[e][t]?n(y3[e][t]):{}:e?y3[e]?n(y3[e]):{}:n(y3);function n(e){const t={...e._indicators},s=Object.keys(e).filter((e=>"_indicators"!==e)).map((t=>e[t]));for(const e of s){const s=n(e);for(const e in s){const n=t[e],i=s[e];n?(n.current+=i.current,n.total+=i.total):t[e]=i}}return t}}reset(){const e=Object.keys(y3).filter((e=>"_indicators"!==e));for(const t of e)delete y3[t]}},T3=S3;m.Z.register((e=>{switch(e.actionType){case"MAIL_INDICATOR_ADD_ACCOUNT":{const{accountId:t,indicator:n,current:s,total:i}=e;Z3(t,"",n,s,i);break}case"MAIL_INDICATOR_ADD_PATH":{const{accountId:t,path:n,indicator:s,current:i,total:r}=e;Z3(t,n,s,i,r);break}case"MAIL_INDICATOR_REMOVE_ACCOUNT":{const{accountId:t,indicator:n}=e;P3(t,"",n);break}case"MAIL_INDICATOR_REMOVE_PATH":{const{accountId:t,path:n,indicator:s}=e;P3(t,n,s);break}case"MAIL_INDICATOR_REMOVE_ALL":!function(e){if(!e||!y3[e])return;const t=Object.keys(y3[e]).filter((e=>"_indicators"!==e));for(const n of t)Object.keys(y3[e][n]._indicators).length>0&&(y3[e][n]={_indicators:{}},A3(e,n));S3.emitChange()}(e.accountId)}}));const k3={All:he.ik,Flagged:he.ik,Inbox:he.ik,Other:he.ik,Junk:he.ik,Sent:he.N1,Trash:he.cm,Drafts:he.Wb},I3={};for(const e in k3){const t=k3[e];I3[t]?I3[t].push(e):I3[t]=[e]}function A3(e,t){if(!e||!t)return;const n=aa.Z.getAll();if(!n||!n[e])return;const s=ca.Z.getFolderType(e,t),i=k3[s],r=function(e,t=[]){let n=[];for(const s of Object.keys(e)){const i=e[s].folders;for(const e of Object.keys(i))if(t.includes(e)){const t=i[e];n=n.concat(t.map((e=>({accountId:s,path:e.path}))))}}return n}(n,I3[i]),a=function(e=[]){const t={};for(const n of e)if(y3[n.accountId]&&y3[n.accountId][n.path]){const e=y3[n.accountId][n.path]._indicators;for(const n of Object.keys(e)){const s={...e[n]};if(t[n]){const e=t[n];e.current+=s.current,e.total+=s.total}else t[n]=s}}return t}(r);y3[he.of]||(y3[he.of]={_indicators:{}}),y3[he.of][i]={_indicators:a}}function Z3(e,t,n,s,i){const r={current:s,total:i};e?(y3[e]||(y3[e]={_indicators:{}}),t?(y3[e][t]||(y3[e][t]={_indicators:{}}),y3[e][t]._indicators[n]=r,A3(e,t)):y3[e]._indicators[n]=r):y3._indicators[n]=r,S3.emitChange()}function P3(e,t,n){e?y3[e]&&(t?y3[e][t]&&(delete y3[e][t]._indicators[n],A3(e,t)):delete y3[e]._indicators[n]):delete y3._indicators[n],S3.emitChange()}var D3=n(56152),M3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanelNode.jsx";function O3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x3=[P.kMailCountersPanelDraftsEnabled,P.kMailCountersPanelTrashEnabled,P.kMailCountersPanelUnseenEnabled,P.kMailPanelActivityIndicatorsEnabled];class L3 extends s.Component{constructor(...e){super(...e),O3(this,"_isMounted",!1),O3(this,"state",{unread:0,unseen:0,total:0}),O3(this,"onCountersChanged",(e=>{"counters"===e.target&&this._updateCounters()})),O3(this,"onConnectionChanged",(()=>{this.props.isImap&&this.setStateIfNeeded({disconnected:Wm.isDisconnected(this.props.name),isConnecting:Wm.isConnecting(this.props.name)})})),O3(this,"onIndicatorsChanged",(()=>{let e;const t=T3.getIndicators(this.props.accountId,this.props.path);for(const n in t)t[n]&&(e?(e.text=this.getIndicatorText(he.CB),e.current+=t[n].current,e.total+=t[n].total):e={text:this.getIndicatorText(n),current:t[n].current,total:t[n].total});const n={};if(e){const{text:t,current:s,total:i}=e;n.indicator=i>0?`${t} ${Math.round(s/i*100)} %`:t}else n.indicator=!1;this.setStateIfNeeded(n)})),O3(this,"_updateCounters",((e=this.props)=>{const{accountId:t,path:n}=e;if(this._isMounted){const e=Cm.C.getCounters(t,n);this.setStateIfNeeded({unread:e&&e.unread||0,unseen:e&&e.unseen||0,total:e&&e.total||0})}})),O3(this,"setStateIfNeeded",(e=>{Object.getOwnPropertyNames(e).some((t=>e[t]!==this.state[t]))&&this.setState(e)})),O3(this,"getIndicatorText",(e=>{switch(e){case he.CB:return(0,ue.Z)("Busy");case he.cO:return(0,ue.Z)("Threading");case he.hg:return(0,ue.Z)("Flushing");case he.PA:return(0,ue.Z)("Connecting");case he.XL:return(0,ue.Z)("Fetching");case he.hB:return(0,ue.Z)("Prefetching");default:return""}})),O3(this,"isDrafts",(()=>this.props.path===he.Wb||this.props.type===he.kY)),O3(this,"isOutbox",(()=>this.props.path===he.J8||this.props.type===he.fZ)),O3(this,"isTrash",(()=>this.props.path===he.cm||this.props.type===he.uT)),O3(this,"isUnread",(()=>this.props.path===he.tB)),O3(this,"isSent",(()=>this.props.path===he.N1||this.props.type===he.Nz)),O3(this,"isJunk",(()=>this.props.path===he.rp||this.props.type===he.Hd)),O3(this,"isArchive",(()=>this.props.path===he.$T||this.props.type===he.hn)),O3(this,"isFeeds",(()=>this.props.accountId===he.u4)),O3(this,"isLabels",(()=>this.props.accountId===he.ut)),O3(this,"isFilters",(()=>this.props.accountId===he.Kz)),O3(this,"isFlags",(()=>this.props.accountId===he.MN)),O3(this,"isReceived",(()=>this.props.path===he.ik||this.props.type===he.e9)),O3(this,"isMailingList",(()=>this.props.accountId===he.wC&&D3.Z.isMailingListPath(this.props.path))),O3(this,"getImageSet",(()=>this.props.isAccount?cn.GtN:this.isSent()?cn.zLp:this.isJunk()?cn.Qwh:this.isArchive()?cn._w1:this.isFeeds()?cn.ZU_:this.isUnread()?cn.aAJ:this.isReceived()?cn.LDV:this.isDrafts()?cn.XTV:this.isFilters()?cn.EnF:this.isLabels()?cn.rpm:this.isFlags()?cn.nyn:this.isMailingList()?cn.GAD:void 0)),O3(this,"_onError",(e=>{const t=Wm.getErrorMessage(this.props.name);t&&t.toLowerCase().indexOf("authentication")>=0?se.Z.showMailAuthenticationDialog({account:e}):se.Z.showSettings("mail")})),O3(this,"_handleStatusIconClick",(async()=>{if(this.state.disconnected&&!Wm.isConnecting(this.props.name)){const e=Wm.getErrorMessage(this.props.name)||"",t=await Ym.Z.loadAccount(this.props.name);(0,Zt.c)({title:(0,ue.Z)("Error connecting to $1",[this.props.name]),body:e,onClick:this._onError.bind(this,t)})}}))}componentDidMount(){this._isMounted=!0,this._updateCounters(),Cm.C.addChangeListener(this.onCountersChanged),Wm.addChangeListener(this.onConnectionChanged),T3.addChangeListener(this.onIndicatorsChanged)}componentWillUnmount(){this._isMounted=!1,Cm.C.removeChangeListener(this.onCountersChanged),Wm.removeChangeListener(this.onConnectionChanged),T3.removeChangeListener(this.onIndicatorsChanged)}render(){const e=this.props.prefValues[P.kMailPanelActivityIndicatorsEnabled]&&this.state.indicator&&!this.props.isExpanded,t=this.state.unread>0&&!(this.isDrafts()||this.isOutbox()||this.isTrash()),n=t&&this.state.unseen>0&&this.props.prefValues[P.kMailCountersPanelUnseenEnabled],i=this.state.total>0&&this.isOutbox(),r=this.state.total>0&&this.props.prefValues[P.kMailCountersPanelTrashEnabled]&&this.isTrash(),a=this.state.total>0&&this.props.prefValues[P.kMailCountersPanelDraftsEnabled]&&this.isDrafts();let o;if(this.props.accountId===he.Kz)o="";else{const{unseen:e,unread:t,total:n}=this.state;o=this.props.label+" "+N3({unseen:e,unread:t,total:n})}let l=0,c=0;return l=16*this.props.level,c=this.props.hasChildren?0:this.props.level>1?l+16:l,s.createElement("label",{className:bn()("mail_panel_node",{disabled:this.props.subscribable}),title:o,onClick:this.props.onClick,__source:{fileName:M3,lineNumber:338,columnNumber:7}},this.props.hasChildren&&0!==this.props.level&&s.createElement("span",{className:"expand-icon",style:{marginLeft:l},onMouseDown:Rx.Z,onMouseUp:()=>this.props.handleExpandClick(this.props.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:M3,lineNumber:346,columnNumber:11}}),s.createElement(Fs,{imageSet:this.getImageSet(),open:this.props.isExpanded,trash:this.isTrash(),disconnected:this.state.disconnected,isConnecting:this.state.isConnecting,leftMargin:c,onClickStatusIcon:this._handleStatusIconClick,__source:{fileName:M3,lineNumber:353,columnNumber:9}}),void 0!==this.props.inlineEditText&&s.createElement("input",{ref:"input",type:"text",value:this.props.inlineEditText,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,autoFocus:!0,__source:{fileName:M3,lineNumber:363,columnNumber:11}}),void 0===this.props.inlineEditText&&s.createElement(s.Fragment,{__source:{fileName:M3,lineNumber:374,columnNumber:11}},s.createElement("span",{className:"title",__source:{fileName:M3,lineNumber:375,columnNumber:13}},this.props.label),e&&s.createElement("span",{className:"item-count counter-indicator",__source:{fileName:M3,lineNumber:378,columnNumber:15}},this.state.indicator),n&&s.createElement("span",{className:"item-count counter-unseen",__source:{fileName:M3,lineNumber:384,columnNumber:15}},this.state.unseen),t&&s.createElement("span",{className:"item-count counter-unread",__source:{fileName:M3,lineNumber:390,columnNumber:15}},this.state.unread),(i||r||a)&&s.createElement("span",{className:"item-count counter-total",__source:{fileName:M3,lineNumber:396,columnNumber:15}},this.state.total)))}}const R3=(0,bi.Z)(L3,x3);var B3=n(4225),F3=n(97227);function U3(e){switch(e){case"All":return(0,ue.Z)("mailbox","All");case"Archive":return(0,ue.Z)("Archive");case"Drafts":return(0,ue.Z)("Drafts");case"flagged":return(0,ue.Z)("Flagged");case"Inbox":return(0,ue.Z)("Inbox");case"Junk":return(0,ue.Z)("Junk");case"Sent":return(0,ue.Z)("Sent");case"Trash":return(0,ue.Z)("Trash");default:return e}}function V3(e){switch(e){case"Unread":return(0,ue.Z)("Unread");case"Received":return(0,ue.Z)("Received");case"Sent":return(0,ue.Z)("Sent");case"Drafts":return(0,ue.Z)("Drafts");case"Outbox":return(0,ue.Z)("Outbox");case"Spam":return(0,ue.Z)("Spam");case"Trash":return(0,ue.Z)("Trash");case"Archive":return(0,ue.Z)("Archive");default:return console.warn("Unknown All Messages folder"),e}}var H3=n(34155),W3="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanel.jsx";function z3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const[G3,K3,j3,Y3,$3,X3,Q3]=b3,{getAllFolders:q3,getSubscribedFolders:J3,isAccountSubFolder:e5,isAccountRootFolder:t5,isSubscribable:n5}=iI.Z,s5=[he.W4,he.cs],i5=[he.T4.RED,he.T4.ORANGE,he.T4.YELLOW,he.T4.GREEN,he.T4.BLUE,he.T4.PURPLE,he.T4.GRAY];class r5 extends s.PureComponent{constructor(...e){super(...e),z3(this,"refTreeList",s.createRef()),z3(this,"initialState",(()=>{const e=!aa.Z.hasLoadedFolders()&&(A.ZP.get(P.kMailAccounts).length>0||A.ZP.get(P.kRssSettings).length>0);return{waiting:e,mailFolders:aa.Z.getAll(),mailingLists:Cm.C.getByAccountId(he.wC),filters:Cm.C.getByAccountId(he.Kz),flags:Cm.C.getByAccountId(he.MN),labels:Cm.C.getByAccountId(he.ut),feeds:Cm.C.getByAccountId(he.u4),allMsgs:Cm.C.getByAccountId(he.of),customFolderMsgs:Cm.C.getByAccountId(he.Ry),online:navigator.onLine,showHiddenMailingLists:!1,indexProgress:e?0:-1}})),z3(this,"state",this.initialState()),z3(this,"onItemsActivated",((e,t)=>{this.openTabForMailbox(t[0])})),z3(this,"onImapStoreChange",(()=>{navigator.onLine?this._onOnline():this._onOffline()})),z3(this,"onFolderSelection",(()=>{H3.nextTick((()=>{const e=ll.Z.getSelectedFolder();e&&this.refTreeList.current?.selectByNode(e)}))})),z3(this,"_onTurningMailOnOrOff",(()=>{this.setState(this.initialState())})),z3(this,"_onOnline",(()=>{this.setState({online:!0})})),z3(this,"_onOffline",(()=>{this.setState({online:!1})})),z3(this,"_onFiltersChanged",(e=>{if("mailingLists"===e.target)this.setState({mailingLists:Cm.C.getByAccountId(he.wC)});else if("filters"===e.target){let t;const{filterIds:n}=e;if(n){const e=Cm.C.getByIds(n),s=[he.Kz,he.MN,he.ut,he.u4,he.of,he.Ry,he.wC];t=n.length>e.length||e.some((e=>s.includes(e.accountId)))}else t=!0;t&&this.setState({filters:Cm.C.getByAccountId(he.Kz),flags:Cm.C.getByAccountId(he.MN),labels:Cm.C.getByAccountId(he.ut),feeds:Cm.C.getByAccountId(he.u4),allMsgs:Cm.C.getByAccountId(he.of),customFolderMsgs:Cm.C.getByAccountId(he.Ry),mailingLists:Cm.C.getByAccountId(he.wC)})}else if("updateIndexProgress"===e.target){const t=Math.floor(e.indexCount/e.total*100)||0;this.setState({indexProgress:t})}else"finishIndexProgress"===e.target&&this.setState({indexProgress:-1})})),z3(this,"onPanelStoreChange",(e=>{this.props.open&&"setFocus"===e&&!si(pn.findDOMNode(this.refTreeList.current))&&this.refTreeList.current?.focusTree()})),z3(this,"gotFolders",(()=>{this.setState({waiting:!1,mailFolders:aa.Z.getAll()})})),z3(this,"getAllAccountMailboxes",(e=>{const t=[];let n;switch(e.path){case he.N1:n=he.Nz;break;case he.rp:n=he.Hd;break;case he.cm:n=he.uT;break;case he.$T:n=he.hn}if(n){const e=aa.Z.getAll();for(const s in e){e[s].folders[n]?.forEach((({type:e,path:i,subscribed:r})=>{e===n&&t.push({accountId:s,path:i,subscribed:r})}))}}return t})),z3(this,"openTabForMailbox",(e=>{this.hasContentForMessageView(e)&&H3.nextTick((()=>{(e.accountId===he.of?this.getAllAccountMailboxes(e):[e]).forEach((({accountId:e,path:t,subscribed:n})=>{(0,F3.mq)(e)&&n?te.Z.checkNewDeletedModified(e,t):(0,F3.Vd)(e)&&le.checkForMail(e)})),$.Z.openURL(Pt.jk.internals.mailpage,{singleton:!0}),K.Z.selectFolder(e)}))})),z3(this,"handleMailboxClick",(0,za.Z)((e=>{if(e.accountId===he.Ry&&e.path!==he.ym){const t=e.path.indexOf("/"),n=e.path.substring(0,t),s=e.path.substring(t+1);this.openTabForMailbox({...e,accountId:n,path:s})}else this.openTabForMailbox(e)}),200,{leading:!0,trailing:!1})),z3(this,"handleExpandClick",(e=>{this.refTreeList.current?.toggleSelectedExpansion(e)})),z3(this,"rowComponent",(e=>{const t=e.node;return 0===t.level?s.createElement(C3,{key:t.id,id:t.id,name:t.name,label:t.name,handleExpand:this.handleExpandClick,hasChildren:this.hasChildren(t),onClick:this.handleMailboxClick.bind(this,t),isExpanded:t.isExpanded,accountId:t.accountId,path:t.path,__source:{fileName:W3,lineNumber:396,columnNumber:14}}):s.createElement(R3,{key:t.id,name:t.name,accountId:t.accountId,label:U3(t.name),id:t.id,type:t.type,path:t.path,isAccount:t5(t),isImap:(0,F3.ZA)(t.accountId),level:t.level,onClick:this.handleMailboxClick.bind(this,t),isExpanded:t.isExpanded,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,inlineEditText:e.inlineEditText,handleExpandClick:this.handleExpandClick,hasChildren:this.hasChildren(t),subscribable:n5(t)&&!t.subscribed,__source:{fileName:W3,lineNumber:409,columnNumber:12}})})),z3(this,"isFolder",(e=>!0)),z3(this,"hasChildren",(e=>Boolean(e.children&&e.children.length>0))),z3(this,"hasContentForMessageView",(e=>!0)),z3(this,"openMailSettings",(()=>{se.Z.showMailAccountDialog()})),z3(this,"sendAllOutgoing",(()=>{de.Z.sendAll()})),z3(this,"sendForAccount",(e=>{de.Z.sendForAccount(e)})),z3(this,"rescanUnreadFlags",((e,t)=>{te.Z.rescanUnreadFlags(e,t)})),z3(this,"getMenuCapability",(async(e,t,n)=>{switch(e.action){case"CONTEXT_VIEW_ALL_MESSAGES":return{handler:()=>this.openTabForMailbox(n),visible:Boolean(n),...t(e,{})};case"CONTEXT_RERUN_FILTER":return{handler:()=>K.Z.rerunFilter(n.accountId,n.path),visible:Boolean(n),...t(e,{})};case"CONTEXT_MARK_ALL_AS_READ":{const s=n?ca.Z.getFolderType(n.accountId,n.path):"";return{handler:()=>K.Z.setAllMailsInFolderAsRead(n.accountId,n.path),visible:Boolean(n)&&s!==he.Nz&&s!==he.kY&&s!==he.fZ,...t(e,{})}}case"CONTEXT_MOVE_ALL_TO_TRASH":{const s=n?ca.Z.getFolderType(n.accountId,n.path):"";return{handler:()=>K.Z.moveAllToTrash(n.accountId,n.path,!0),visible:Boolean(n)&&(s===he.Hd||s===he.kY||s===he.fZ),...t(e,{})}}case"CONTEXT_EMPTY_TRASH":{const s=n?ca.Z.getFolderType(n.accountId,n.path):"";return{handler:()=>K.Z.deleteEntriesFromFolder(n.accountId,n.path),visible:Boolean(n)&&s===he.uT,...t(e,{})}}case"CONTEXT_CHECK_FOR_MAIL":return{handler:()=>this.checkAccountForMail(n.accountId),visible:Boolean(n)&&t5(n)&&!(0,F3.S9)(n.accountId),...t(e,{})};case"CONTEXT_SEND":return{handler:()=>this.sendForAccount(n.accountId),visible:Boolean(n)&&t5(n),...t(e,{})};case"CONTEXT_RESCAN_UNREAD":return{handler:()=>this.rescanUnreadFlags(n.accountId,n.path),visible:Boolean(n)&&e5(n)&&(0,F3.ZA)(n.accountId)&&!(0,F3.S9)(n.accountId),...t(e,{})};case"CONTEXT_SUBSCRIBE":return{handler:()=>K.Z.subscribeMailbox(n),visible:Boolean(n)&&n5(n)&&!n.subscribed,...t(e,{})};case"CONTEXT_UNSUBSCRIBE":return{handler:()=>se.Z.showMailUnsubscribeDialog({folder:n}),visible:Boolean(n)&&n5(n)&&n.subscribed,...t(e,{})};case"CONTEXT_RERUN_THREADING":return{handler:()=>ee.Z.rerunThreading(n.accountId,n.path),visible:Boolean(n)&&e5(n),...t(e,{})};case"CONTEXT_MOVE_INTO_IMPORTANT":{const s=Boolean(n)&&n.accountId===he.wC&&n.path!==he.ym?Cm.C.getByFolder(n.accountId,n.path):null,i=s&&s.path!==he.cs&&s.path!==he.W4&&s.path.startsWith(he.cs);return{handler:()=>K.Z.toggleMoveToOther(n),visible:Boolean(i),...t(e,{})}}case"CONTEXT_MOVE_INTO_OTHER":{const s=Boolean(n)&&n.accountId===he.wC&&n.path!==he.ym?Cm.C.getByFolder(n.accountId,n.path):null,i=s&&s.path!==he.cs&&s.path!==he.W4&&s.path.startsWith(he.W4);return{handler:()=>K.Z.toggleMoveToOther(n),visible:Boolean(i),...t(e,{})}}case"CONTEXT_DELETE_ALL":return{handler:rt.removeAllFeeds,visible:Boolean(n)&&n.id===he.sM&&n.children&&this.hasChildren(n),...t(e,{})};case"CONTEXT_REGENERATE":return{handler:K.Z.regenerateAllMailingLists,visible:Boolean(n)&&n.accountId===he.wC&&n.path===he.ym,...t(e,{})};case"CONTEXT_ADVANCED":return{visible:Boolean(n),...t(e,{})};default:return{...t(e,{})}}})),z3(this,"getMenuVisibility",((e,t)=>{if(!t)return!1;switch(e.action){case"CONTEXT_RENAME":return this.isValidToEdit(t.id);case"CONTEXT_DELETE":return 1===this.validateForDeletion([t.id]).length;default:return!1}})),z3(this,"validateForDeletion",(e=>{if(e.length>1)return[];const t=[];return e.forEach((e=>{const n=this.refTreeList.current?.findTreeItem(e);if(n){let s=!1;switch(n.accountId){case he.Kz:case he.ut:s=!!n.path&&Boolean(Cm.C.getByFolder(n.accountId,n.path));break;case he.wC:s=n.path!==he.ym&&(!n.children||0===n.children.length);break;case he.u4:s=n.id!==he.sM}s&&t.push(e)}})),t})),z3(this,"deleteNodes",(e=>Promise.all(this.validateForDeletion(e).map((e=>{const t=this.refTreeList.current?.findTreeItem(e);if(t)switch(t.accountId){case he.Kz:case he.ut:case he.wC:{const e=Cm.C.getByFolder(t.accountId,t.path);if(e)return t.accountId===he.wC?K.Z.removeMailingListFilter(e):K.Z.removeFilter(e.id);console.warn("No filter",t.accountId,t.path);break}case he.u4:return rt.removeFeed(t.path);default:console.warn("Unknown account",t.accountId)}else console.warn("No match",e);return Promise.resolve()}))).then((()=>Promise.resolve())))),z3(this,"onContextMenu",(e=>{e.nativeEvent.buttons>0&&this.refTreeList.current?.unSelectAll(),this.refTreeList.current?.onContextMenu(e)})),z3(this,"_getNodes",((e,t)=>{const n=[],s={};for(let i=0;i<e.length;i++){const r=e[i],a=r.accountId===he.MN?h3.Z.translateFlag(r.path):r.name;m5(r.accountId,r.path,"",n,s,t,a)}return n})),z3(this,"_getAllMsgsNodes",(()=>0===this.state.allMsgs.length?[]:this.state.allMsgs.map((e=>({name:V3(e.path),path:e.path,accountId:he.of,id:he.w1+"_"+e.path,children:[]}))))),z3(this,"_getCustomFoldersNodes",(e=>{const t=[],n=aa.Z.getAll(),s=new Set,i=new Set;for(const r in n){const a=iI.Z.getFoldersFlat({folders:n[r].folders},e);for(const e of a)if(e.type===he.Oi){s.has(e.name)?i.add(e.name):s.add(e.name);const n=r+"/"+e.path;t.push({...e,id:he.Ry+"_"+n,accountId:he.Ry,path:n})}}return t.forEach((e=>{if(i.has(e.name)){const t=e.path.substring(0,e.path.indexOf("/"));e.name=e.name+" ("+t+")"}})),t})),z3(this,"getRowHeight",(({index:e},t)=>t.find((t=>t.id===this.refTreeList.current?.getAllIds()[e]))?30:24)),z3(this,"renderMailTree",(()=>{const e=A.ZP.get(P.kMailFeedsInMailPanel),t=!A.ZP.get(P.kMailShowUnsubscribed),n=(t?J3(this.state.mailFolders):q3(this.state.mailFolders)).filter((e=>e.accountId!==he.u4));n.sort(a5),G3.children=this._getAllMsgsNodes().sort(c5),K3.children=this._getCustomFoldersNodes(t);const i=this._getNodes(this.state.mailingLists,he.jT),r=i.find((e=>e.path===he.cs));r&&(r.name=(0,ue.Z)("Mailing Lists","Other"));const a=i.find((e=>e.path===he.W4));a&&(a.name=(0,ue.Z)("Mailing Lists","Important")),j3.children=i.sort(o5);const o={name:(0,ue.Z)("All Accounts"),path:he.ym,accountId:he.Sp,id:he.w1+"_"+he.Sp,children:[]};X3.children=this._getNodes(this.state.labels,he.pz),$3.children=this._getNodes(this.state.flags,he.q0).sort(l5),Q3.children=this._getNodes(this.state.feeds,he.sM),Y3.children=this._getNodes(this.state.filters,he.rQ),o.children=n;const l=e?b3:g3,c="feeds"===this.props.panelId,u=c?[Q3]:l.concat(o),m=c?"FEEDS_PANEL":"MAIL_PANEL",d={name:"mailpanellist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return s.createElement(Sg,{ref:this.refTreeList,rowComponent:this.rowComponent,nodes:u,menu:d,onItemsActivated:this.onItemsActivated,isFolder:this.isFolder,canDoubleClick:this.hasContentForMessageView,hasChildren:this.hasChildren,settings:m,enableDragAndDrop:!1,multiSelect:!1,supportsInlineEdit:!0,isValidToEdit:this.isValidToEdit,validateForDeletion:this.validateForDeletion,delete:this.deleteNodes,saveTitle:this.saveTitle,getTitle:this.getTitle,rowHeight:e=>this.getRowHeight(e,u),expandedByDefault:!0,__source:{fileName:W3,lineNumber:840,columnNumber:7}})})),z3(this,"findAccountIndex",((e,t)=>e.findIndex((e=>e.path===t.substring(`${he.sM}_`.length))))),z3(this,"getTitle",(e=>{let t="",n="";if(e.startsWith(he.jT))t=he.wC,n=he.jT;else if(e.startsWith(he.rQ))t=he.Kz,n=he.rQ;else{const t=A.ZP.get(P.kRssSettings);if(e){return t[this.findAccountIndex(t,e)].title||""}}const s=e.replace(n+"_",""),i=Cm.C.getByFolder(t,s);return i?i.name:""})),z3(this,"isValidToEdit",(e=>!(!e.startsWith(he.sM)||e===he.sM)||(e.startsWith(he.jT)&&e.split("/").length>1||e.startsWith(he.rQ)))),z3(this,"saveTitle",((e,t)=>{if(e){const n=A.ZP.get(P.kRssSettings),s=n.find((t=>t.path===e.substring(`${he.sM}_`.length)));if(s&&s.title!==t){const i={...s,title:t},r=this.findAccountIndex(n,e);return void rt.edit(i,r)}}let n,s="";if(e.startsWith(he.jT))s=he.wC,n=he.jT;else{if(!e.startsWith(he.rQ))return;s=he.Kz,n=he.rQ}const i=e.replace(n+"_",""),r=Cm.C.getByFolder(s,i);r&&t&&(r.name=t,nt.Z.put(r).then((e=>{me.Z.updateFilters(e)})))})),z3(this,"_getPendingMenu",(()=>{const e=[];return p3.Z.m3GetAll().then((t=>{const n={};t.forEach((e=>{if(e.from){const t=e.from[0].address;n[t]||(n[t]=[]),n[t].push(e)}}));for(const t in n){const s=n[t].length;s>0&&e.push({handler:this.sendForAccount.bind(null,t),...(0,Mn.Z)("Send from $1 ($2)",[t,s])})}return e}))})),z3(this,"_getFetchMenuItems",(()=>{const e=[],t=Object.keys(this.state.mailFolders);for(const n of t)e.push({handler:this.checkAccountForMail.bind(null,n),...(0,Mn.Z)("Check $1",[n])});return e})),z3(this,"checkAccountForMail",(e=>{(0,F3.mq)(e)?te.Z.checkForMail(e):(0,F3.Vd)(e)&&le.checkForMail(e)})),z3(this,"checkForMail",(()=>{te.Z.checkForMail(),le.checkForMail()})),z3(this,"checkForFeeds",(()=>{rt.updateAllFeeds()})),z3(this,"showAddFeedDialog",(()=>{se.Z.showAddFeed([{url:"",path:"",title:"",refreshInterval:0}])}))}componentDidMount(){aa.Z.addChangeListener(this.gotFolders),Cm.C.addChangeListener(this._onFiltersChanged),Wm.addChangeListener(this.onImapStoreChange),re.ZP.addChangeListener(this.onPanelStoreChange),ll.Z.addChangeListener(this.onFolderSelection),A.ZP.addListener([P.kMailIsTurnedOff],this._onTurningMailOnOrOff),this.context.addEventListener("online",this._onOnline),this.context.addEventListener("offline",this._onOffline),"mail"===this.props.panelId&&A.ZP.addListener([P.kMailShowUnsubscribed],te.Z.reconnectIMAPClients)}componentDidUpdate(e,t){!e.open&&this.props.open&&H3.nextTick((()=>{this.refTreeList.current?.focusTree()}))}componentWillUnmount(){this.context.removeEventListener("online",this._onOnline),this.context.removeEventListener("offline",this._onOffline),aa.Z.removeChangeListener(this.gotFolders),Cm.C.removeChangeListener(this._onFiltersChanged),Wm.removeChangeListener(this.onImapStoreChange),re.ZP.removeChangeListener(this.onPanelStoreChange),ll.Z.removeChangeListener(this.onFolderSelection),A.ZP.removeListener([P.kMailIsTurnedOff],this._onTurningMailOnOrOff),"mail"===this.props.panelId&&A.ZP.removeListener([P.kMailShowUnsubscribed],te.Z.reconnectIMAPClients)}render(){if(!this.props.open)return null;const e="feeds"===this.props.panelId,t=this.state.feeds.length,n=A.ZP.get(P.kMailFeedsInMailPanel);if(e)return s.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:W3,lineNumber:1010,columnNumber:9}},s.createElement("header",{__source:{fileName:W3,lineNumber:1011,columnNumber:11}},s.createElement("h1",{__source:{fileName:W3,lineNumber:1012,columnNumber:13}},this.state.online?this.props.title:(0,ue.Z)("$1 – Offline",[this.props.title])),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:W3,lineNumber:1017,columnNumber:15}},s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:W3,lineNumber:1018,columnNumber:17}},s.createElement(ko,{tooltip:(0,ue.Z)("Check all feeds"),onClick:this.checkForFeeds,image:cn.GO5.small,__source:{fileName:W3,lineNumber:1019,columnNumber:19}}),s.createElement("hr",{__source:{fileName:W3,lineNumber:1024,columnNumber:19}}),s.createElement(ko,{tooltip:(0,ue.Z)("Add a feed"),onClick:this.showAddFeedDialog,image:cn.md4.small,__source:{fileName:W3,lineNumber:1025,columnNumber:19}})))),s.createElement("section",{onContextMenu:this.onContextMenu,__source:{fileName:W3,lineNumber:1035,columnNumber:11}},this.renderMailTree()));{const e=Object.keys(this.state.mailFolders).length;return 0!==e||n&&0!==t||-1!==this.state.indexProgress||this.state.waiting?s.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:W3,lineNumber:1093,columnNumber:9}},s.createElement("header",{__source:{fileName:W3,lineNumber:1094,columnNumber:11}},s.createElement("h1",{__source:{fileName:W3,lineNumber:1095,columnNumber:13}},this.state.online?this.props.title:(0,ue.Z)("$1 – Offline",[this.props.title])),s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:W3,lineNumber:1099,columnNumber:15}},s.createElement(s.Fragment,null,s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:W3,lineNumber:1101,columnNumber:17}},s.createElement(ko,{tooltip:(0,ue.Z)("Check all accounts"),onClick:this.checkForMail,isMenuIndicatorVisible:e>1,image:cn.GO5.small,menu:this._getFetchMenuItems,menuOrigin:"bottomLeft",__source:{fileName:W3,lineNumber:1102,columnNumber:19}}),s.createElement("hr",{__source:{fileName:W3,lineNumber:1110,columnNumber:19}}),s.createElement(ko,{tooltip:(0,ue.Z)("Send from all accounts"),onClick:this.sendAllOutgoing,disabled:this.state.waiting,isMenuIndicatorVisible:e>1,image:cn.zLp.small,menu:this._getPendingMenu,menuOrigin:"bottomLeft",__source:{fileName:W3,lineNumber:1111,columnNumber:19}})),s.createElement(ko,{title:(0,ue.Z)("Compose"),tooltip:(0,ue.Z)("Compose new mail"),onClick:ne.Z.createDraft.bind(null,void 0),image:cn.XTV.small,className:"button-mail-compose",__source:{fileName:W3,lineNumber:1122,columnNumber:17}})))),s.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:W3,lineNumber:1134,columnNumber:11}},this.state.indexProgress>-1?s.createElement("span",{className:"mail-loading",__source:{fileName:W3,lineNumber:1138,columnNumber:17}},s.createElement("progress",{max:"100",value:this.state.indexProgress,__source:{fileName:W3,lineNumber:1139,columnNumber:19}})):this.renderMailTree())):s.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:W3,lineNumber:1051,columnNumber:11}},s.createElement("div",{className:"mail-onboarding-wrapper",__source:{fileName:W3,lineNumber:1052,columnNumber:13}},s.createElement("div",{className:"mail-onboarding",__source:{fileName:W3,lineNumber:1053,columnNumber:15}},s.createElement("svg",{width:"46",height:"46",viewBox:"0 0 64 64",fill:"none",__source:{fileName:W3,lineNumber:1054,columnNumber:17}},s.createElement("path",{d:"M32 64C46.0229 64 53.819 64 58.9095 58.9084C64 53.8169 64 46.0215 64 32C64 17.9785 64 10.1831 58.9095 5.09155C53.819 0 46.0229 0 32 0C17.9771 0 10.1811 0 5.09053 5.09155C0 10.1831 0 17.9785 0 32C0 46.0215 0 53.8169 5.09053 58.9084C10.1811 64 17.9771 64 32 64Z",fill:"#EF3939",__source:{fileName:W3,lineNumber:1055,columnNumber:19}}),s.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"64",height:"64",__source:{fileName:W3,lineNumber:1059,columnNumber:19}},s.createElement("path",{d:"M32 64C46.0229 64 53.819 64 58.9095 58.9084C64 53.8169 64 46.0215 64 32C64 17.9785 64 10.1831 58.9095 5.09155C53.819 0 46.0229 0 32 0C17.9771 0 10.1811 0 5.09053 5.09155C0 10.1831 0 17.9785 0 32C0 46.0215 0 53.8169 5.09053 58.9084C10.1811 64 17.9771 64 32 64Z",fill:"#EF3939",__source:{fileName:W3,lineNumber:1060,columnNumber:21}})),s.createElement("g",{mask:"url(#mask0)",__source:{fileName:W3,lineNumber:1065,columnNumber:19}},s.createElement("path",{opacity:"0.07",d:"M64.2106 35.5986L54.6357 18.9106L8.91235 20.8603V43.3958L20.2457 64.0705C23.6597 64.2711 27.4055 64.3175 32.1053 64.3175C45.9221 64.3175 54.8791 64.6144 59.8948 59.5898C64.6168 54.8605 64.194 47.9484 64.2106 35.5986Z",fill:"#000",__source:{fileName:W3,lineNumber:1066,columnNumber:21}})),s.createElement("path",{d:"M31.712 33.7227L55.0447 20.2478C54.8304 18.6236 53.4456 17.3584 51.7751 17.3584H12.2095C10.3961 17.3584 8.91235 18.8501 8.91235 20.6732V20.6898L31.712 33.7227Z",fill:"#fff",__source:{fileName:W3,lineNumber:1072,columnNumber:19}}),s.createElement("path",{d:"M31.723 36.905L8.91235 23.8666V43.3247C8.91235 45.1479 10.3961 46.6396 12.2095 46.6396H51.7751C53.5885 46.6396 55.0722 45.1479 55.0722 43.3247V23.4191L31.723 36.905Z",fill:"#fff",__source:{fileName:W3,lineNumber:1075,columnNumber:19}})),s.createElement("h1",{__source:{fileName:W3,lineNumber:1080,columnNumber:17}},(0,ue.Z)("Add your first mail account")),s.createElement("p",{__source:{fileName:W3,lineNumber:1081,columnNumber:17}},(0,ue.Z)("You can add any IMAP or POP account to Vivaldi Mail")),s.createElement("input",{type:"button",onClick:this.openMailSettings,value:(0,ue.Z)("Add Mail Account"),__source:{fileName:W3,lineNumber:1082,columnNumber:17}}))))}}}z3(r5,"contextType",Vs.Z);const a5=function(e,t){const n=e.name.toLowerCase(),s=t.name.toLowerCase();return n<s?-1:n>s?1:e.name<t.name?-1:e.name>t.name?1:0},o5=function(e,t){return s5.indexOf(e.path)-s5.indexOf(t.path)},l5=function(e,t){return i5.indexOf(e.path)-i5.indexOf(t.path)},c5=function(e,t){return B3.k.indexOf(e.path)-B3.k.indexOf(t.path)},u5=function(e,t,n,s,i,r,a){s.sort(a5).forEach((s=>{s.path===n?m5(e,t,n+"/",s.children,i,r,a):s.children.length>0&&u5(e,t,n,s.children,i,r,a)}))},m5=function(e,t,n,s,i,r,a){const o=t.indexOf("/");if(e===he.u4||-1===o)i[n+=t]||(s.push({name:a||t,path:n,accountId:e,id:r+"_"+n,children:[]}),i[n]=!0);else{const l=t.substr(o+1),c=t.substr(0,o);if(i[n+=c])u5(e,l,n,s,i,r,a);else{const t={accountId:e,path:n,children:[],id:r+"_"+n,name:c};m5(e,l,n+"/",t.children,i,r,a),s.push(t),i[n]=!0}}},d5=r5;var h5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\MarkdownRender.jsx";function p5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g5(e){if(0!==e.button)return;const t=e.target;if(t instanceof HTMLAnchorElement&&t.href){const n=t.getAttribute("href");if(!n||n&&n.startsWith("#"))return;const{metaKey:s,shiftKey:i,ctrlKey:r,altKey:a,button:o}=e,{allowOverride:l,...c}=(0,ai.Z)({metaKey:s,shiftKey:i,ctrlKey:r,altKey:a,button:o});$.Z.openURL(t.href,{...c,inCurrent:!1,inBackground:l?A.ZP.get(P.kTabsOpenNewInBackground):c.inBackground})}}class b5 extends s.PureComponent{constructor(...e){super(...e),p5(this,"markdownFormatter",new q$),p5(this,"refRender",s.createRef()),p5(this,"state",{markup:this.props.body}),p5(this,"onScroll",(({currentTarget:e})=>{this.props.onScrollValueChange&&this.props.onScrollValueChange(e.scrollTop)})),p5(this,"selectAll",(e=>{const{document:t,getSelection:n}=this.context;e.focus();const s=n();s&&s.removeAllRanges();const i=t.createRange();i.selectNodeContents(e),s&&s.addRange(i)})),p5(this,"onKeyDown",(e=>{const{getSelection:t}=this.context;switch(e.key){case"a":return void(e.ctrlKey&&(e.preventDefault(),this.selectAll(e.currentTarget)));case"Escape":{const e=t();return void(e&&e.removeAllRanges())}}}))}componentDidMount(){const e=this.props.attachments.map((({content:e})=>fetch(e).then((e=>e.blob())).then((t=>{const n=URL.createObjectURL(t);return{content:e,objectURL:n}}))));Promise.all(e).then((e=>{this.objectURLs=e.map((e=>e.objectURL));const t=e.map((({content:e,objectURL:t})=>`[${lt()(e)}]: ${t}`)).join("\n"),n=`${this.props.body}\n\n${t}\n`;this.setState({markup:n})})),this.refRender.current&&(this.refRender.current.scrollTop=this.props.initialScrollPosition||0)}componentWillUnmount(){this.objectURLs&&this.objectURLs.forEach(URL.revokeObjectURL)}render(){const{className:e}=this.props,t=this.markdownFormatter.getRawMarkup(this.state.markup);return s.createElement("div",{ref:this.refRender,onMouseUp:g5,onKeyDown:this.onKeyDown,className:bn()("MarkdownRender",e),tabIndex:"0",onScroll:this.onScroll,__source:{fileName:h5,lineNumber:143,columnNumber:13}},s.createElement("div",{dangerouslySetInnerHTML:{__html:t},__source:{fileName:h5,lineNumber:151,columnNumber:7}}))}}p5(b5,"contextType",Vs.Z);const N5=b5;function f5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _5 extends s.PureComponent{constructor(...e){super(...e),f5(this,"_isIMEOpen",!1),f5(this,"state",{content:this.props.content}),f5(this,"refContent",s.createRef()),f5(this,"focus",(()=>{this.refContent.current?.focus()})),f5(this,"reset",(0,za.Z)((()=>{this.setState({content:this.props.content})}),xY.mS,{leading:!1,trailing:!0})),f5(this,"_save",(0,za.Z)((()=>{this.waitForCompositionEnd.then((()=>{this.props.onSave(this.state.content)}))}),xY.mS,{leading:!1,trailing:!0})),f5(this,"handleContentChange",(({currentTarget:e})=>{this.props.onChange(e.value),this.setState({content:e.value},this._save)})),f5(this,"waitForCompositionEnd",Promise.resolve()),f5(this,"resolveComposition",(()=>{})),f5(this,"_handleCompositionStart",(()=>{this._isIMEOpen=!0,this.waitForCompositionEnd=(()=>new Promise((e=>{this.resolveComposition=e})))()})),f5(this,"_handleCompositionEnd",(()=>{this._isIMEOpen=!1,this.resolveComposition()})),f5(this,"handleKeyDown",(e=>{(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),this.props.onSave(this.state.content)),"Escape"===e.key&&this._isIMEOpen&&(e.preventDefault(),e.stopPropagation())})),f5(this,"handleFocus",(e=>{e.persist(),e.currentTarget.selectionStart=this.props.content.length,e.currentTarget.selectionEnd=this.props.content.length}))}render(){const{disabled:e,className:t}=this.props,{content:n}=this.state;return s.createElement("textarea",{ref:this.refContent,className:t,placeholder:(0,ue.Z)("Note"),title:(0,ue.Z)("Write a note"),value:n,disabled:e,onFocus:this.handleFocus,onChange:this.handleContentChange,onCompositionStart:this._handleCompositionStart,onCompositionEnd:this._handleCompositionEnd,onKeyDown:this.handleKeyDown,onBlur:this.props.onBlur,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesTextEditor.jsx",lineNumber:102,columnNumber:7}})}}var v5=n(14720),E5=n(99250),C5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesEditor.jsx";function w5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y5="NotesEditor";function S5({disabled:e,onToggleMarkDown:t,onTakeScreenshot:n,onTakeCaptureArea:i,onOpenDialog:r,keyAccess:a,viewMarkdown:o,noteId:l}){const c=e?-1:a;return s.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:C5,lineNumber:77,columnNumber:5}},s.createElement("div",{className:"toolbar-group",__source:{fileName:C5,lineNumber:78,columnNumber:7}},s.createElement("div",{className:"button-toolbar",__source:{fileName:C5,lineNumber:79,columnNumber:9}},s.createElement("button",{disabled:e,onClick:n,title:(0,ue.Z)("Add screenshot"),tabIndex:c,dangerouslySetInnerHTML:{__html:cn.F_h},__source:{fileName:C5,lineNumber:80,columnNumber:11}})),s.createElement("div",{className:"button-toolbar",__source:{fileName:C5,lineNumber:87,columnNumber:11}},s.createElement("button",{disabled:e,onClick:i,title:(0,ue.Z)("Add capture of selected area..."),tabIndex:c,dangerouslySetInnerHTML:{__html:cn.Syi},__source:{fileName:C5,lineNumber:88,columnNumber:13}})),s.createElement(oX,{onOpenDialog:r,disabled:e,keyAccess:c,noteId:l,__source:{fileName:C5,lineNumber:95,columnNumber:11}}),s.createElement("div",{className:"button-toolbar",__source:{fileName:C5,lineNumber:101,columnNumber:11}},s.createElement("button",{className:"button-toolbar"+(o?" button-pressed":""),disabled:e,onClick:t,title:o?(0,ue.Z)("Switch to Editor"):(0,ue.Z)("Switch Markdown View"),tabIndex:c,dangerouslySetInnerHTML:{__html:cn.Pje},__source:{fileName:C5,lineNumber:102,columnNumber:13}}))),s.createElement("div",{className:"button-toolbar",style:{marginLeft:"auto",marginRight:0},__source:{fileName:C5,lineNumber:116,columnNumber:9}},s.createElement("button",{disabled:e,onClick:()=>function(e){$.Z.openURL(Pt.jk.internalUrl("notes",e),{singleton:!0})}(l),title:(0,ue.Z)("Open in Tab"),tabIndex:c,dangerouslySetInnerHTML:{__html:cn.vvh.medium},__source:{fileName:C5,lineNumber:123,columnNumber:11}})))}function T5(){return new Promise((e=>{A.ZP.get(P.kPanelsAsOverlayEnabled)&&ie.Z.toggleContent("notes"),setTimeout((()=>e()),200)}))}async function k5(e,t){return function(e,t){return new Promise(((n,s)=>{b.Z.notes.update(e,t,(e=>{h.Z.runtime.lastError&&s(h.Z.runtime.lastError),n(e)}))}))}(e,t)}function I5(e,{title:t,content:n,url:s}){return k5(e,(0,v5.Z)({url:"string"==typeof s?(0,As.q9)(s.trim()):void 0,title:t,content:n},E5.Z))}class A5 extends s.Component{constructor(...e){super(...e),w5(this,"refFolderName",s.createRef()),w5(this,"refContainer",s.createRef()),w5(this,"refTextEditor",s.createRef()),w5(this,"state",{url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0}),w5(this,"isEmpty",(()=>{const{note:e}=this.props;return![this.state.title,this.state.url,e&&e.content,e&&e.attachments&&e.attachments.length].some(Boolean)})),w5(this,"updateState",(0,za.Z)((()=>{if(si(pn.findDOMNode(this.refTextEditor.current)))return;const e={url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0};this.setState(e,(()=>this.refTextEditor.current&&this.refTextEditor.current.reset()))}),xY.mS,{trailing:!0,leading:!1})),w5(this,"focusPrimaryInput",(()=>{if(!this.props.note)return;xY.ZP.isFolder(this.props.note)?this.refFolderName.current&&this.refFolderName.current.focus():this.refTextEditor.current&&this.refTextEditor.current.focus()})),w5(this,"_captureScreenshot",(()=>{if(!this.props.note)return;const e=this.props.note.id;T5().then((()=>Li.Z.addScreenshot(e)))})),w5(this,"_takeAreaCapture",(async()=>{const e=this.props.note;e&&(T5(),pi.Z.enableCapture(),await Li.Z.addAreaCapture(e.id))})),w5(this,"_openUrl",(e=>{if(2===e.button)return;if(!this.props.note||!this.props.note.url)return;const t=(0,As.Fn)(this.props.note.url);if(!t)return;const{metaKey:n,shiftKey:s,ctrlKey:i,altKey:r,button:a}=e,{allowOverride:o,...l}=(0,ai.Z)({metaKey:n,shiftKey:s,ctrlKey:i,altKey:r,button:a});$.Z.openURL(t,l)})),w5(this,"_toggleMarkdown",(()=>{this._save(),this.props.toggleMarkdown()})),w5(this,"_save",(async()=>{const{note:e}=this.props;if(!e||e.trash)return Promise.resolve();QN.Z.setUrlfieldState(y5,{editUrl:void 0});const{title:t,url:n,content:s}=this.state;return await I5(e.id,{title:t,url:n,content:s})})),w5(this,"_onUrlbarStoreChanged",(()=>{const e=RE.Z.getUrlfieldStateFromId(y5);this.setState({url:e.editUrl})})),w5(this,"handleTitleChange",(({currentTarget:e})=>{const{note:t}=this.props;if(!t)return;const n=e.value;this.setState({title:n},(()=>{I5(t.id,{title:n})}))})),w5(this,"onBlur",(()=>{this._save()})),w5(this,"deleteAttachment",(e=>{this.props.note&&Li.Z.removeAttachment(this.props.note.id,e)})),w5(this,"handleSaveContent",(e=>{const{note:t}=this.props;t&&I5(t.id,{content:e})}))}componentDidMount(){RE.Z.addChangeListener(this._onUrlbarStoreChanged)}componentDidUpdate(e,t){this.props.note&&this.props.note.content!==t.content&&this.updateState()}componentWillUnmount(){if(RE.Z.removeChangeListener(this._onUrlbarStoreChanged),!this.props.note)return;const{content:e}=this.state;I5(this.props.note.id,{content:e})}render(){const{note:e}=this.props,t=e&&!xY.ZP.isFolder(e),n=e&&xY.ZP.isFolder(e),i=!e,r=e?g()(e.dateAdded).format("LLL"):"",a=Boolean(!e||xY.ZP.isSeparator(e)||n);return s.createElement("div",{className:bn()("NotesEditor","cardview",{"NotesEditor--HasAttachments":e&&e.attachments&&e.attachments.length>0}),ref:this.refContainer,onKeyDown:this.props.onKeyDown,__source:{fileName:C5,lineNumber:362,columnNumber:13}},s.createElement(S5,{disabled:a,onToggleMarkDown:this._toggleMarkdown,onTakeScreenshot:this._captureScreenshot,onTakeCaptureArea:this._takeAreaCapture,keyAccess:this.props.keyAccess,viewMarkdown:this.props.viewMarkdown,noteId:e?e.id:"-1",onOpenDialog:this.props.onOpenDialog,__source:{fileName:C5,lineNumber:375,columnNumber:7}}),t&&!this.props.viewMarkdown&&e&&s.createElement("span",{className:"NotesEditor-Editor-Background",__source:{fileName:C5,lineNumber:387,columnNumber:9}},s.createElement(_5,{ref:this.refTextEditor,key:e.id,onBlur:this.onBlur,className:"NotesEditor-Editor",disabled:a,content:e.content||"",onChange:e=>this.setState({content:e}),onSave:this.handleSaveContent,__source:{fileName:C5,lineNumber:388,columnNumber:11}})),t&&this.props.viewMarkdown&&e&&s.createElement(N5,{key:e.content?e.content.length:"-1",body:e.content||"",attachments:[],__source:{fileName:C5,lineNumber:402,columnNumber:9}}),n&&e&&s.createElement("div",{className:"folder",__source:{fileName:C5,lineNumber:410,columnNumber:9}},s.createElement("input",{ref:this.refFolderName,type:"text",placeholder:(0,ue.Z)("Folder"),title:(0,ue.Z)("Edit folder name"),value:this.state.title,disabled:e.trash,onFocus:e=>e.target.select(),onChange:this.handleTitleChange,__source:{fileName:C5,lineNumber:411,columnNumber:11}})),i&&s.createElement("div",{className:"NotesEditor-EmptyPlaceholder ",onClick:this.props.onAdd,__source:{fileName:C5,lineNumber:425,columnNumber:9}},(0,ue.Z)("Start here to add a new note")),e&&s.createElement(pX,{className:"NotesEditor-Attachments",attachments:e.attachments||[],onRemoveAttachment:this.deleteAttachment,__source:{fileName:C5,lineNumber:430,columnNumber:16}}),s.createElement("div",{className:bn()("NotesEditor-Metadata",{disabled:a}),__source:{fileName:C5,lineNumber:436,columnNumber:7}},s.createElement("button",{className:"NotesEditor-MetaIcon NotesEditor-MetaIcon--Url",title:(0,ue.Z)("Go to address"),disabled:a,tabIndex:a?-1:this.props.keyAccess,onClick:this._openUrl,onAuxClick:this._openUrl,dangerouslySetInnerHTML:{__html:cn.iD7},__source:{fileName:C5,lineNumber:437,columnNumber:9}}),s.createElement(lC,{onBlur:this.onBlur,autoFocus:!1,title:(0,ue.Z)("Enter webpage address"),className:"cardview address",disabled:a,displayUrl:e&&e.url?e.url:"",editUrl:this.state.url,autocompletionEnabled:!0,pageId:y5,placeholder:e?(0,ue.Z)("Address"):null,__source:{fileName:C5,lineNumber:445,columnNumber:9}}),s.createElement("div",{className:"NotesEditor-Created dateCreated",title:(0,ue.Z)("Date created"),__source:{fileName:C5,lineNumber:458,columnNumber:9}},s.createElement("div",{className:"NotesEditor-MetaIcon fieldset",dangerouslySetInnerHTML:{__html:cn.V_c},__source:{fileName:C5,lineNumber:459,columnNumber:11}}),s.createElement("span",{__source:{fileName:C5,lineNumber:462,columnNumber:11}},r))))}}const Z5=A5;var P5=n(34155),D5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanel.jsx";function M5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O5=[P.kKeyboardTabToAll,P.kNotesPanelEditorHeight,P.kNotesPanelShowMarkdown],x5=[{text:(0,ue.Z)("Title"),value:"title",fullScreenTitle:(0,ue.Z)("Sort by Title")},{text:(0,ue.Z)("Address"),value:"url",fullScreenTitle:(0,ue.Z)("Sort by Address")},{text:(0,ue.Z)("Content"),value:"content",fullScreenTitle:(0,ue.Z)("Sort by Content")},{text:(0,ue.Z)("Created"),value:"dateAdded",fullScreenTitle:(0,ue.Z)("Sort by Date Created")}];class L5 extends s.PureComponent{constructor(e){super(e),M5(this,"_editor",s.createRef()),M5(this,"_tree",s.createRef()),M5(this,"cancelableId",""),M5(this,"selectableId",""),M5(this,"canDrop",!1),M5(this,"editorMaxHeight",900),M5(this,"refPanel",s.createRef()),M5(this,"refToolbar",s.createRef()),M5(this,"_onWindowResize",(()=>{const e=this.refPanel.current?.getBoundingClientRect().height;this.editorMaxHeight=e?e-250:900})),M5(this,"_onPageStoreChange",(()=>{const e=V.ZP.unsafeGetActivePage(),t=e?e.url:"";this.setState({activePageUrl:t})})),M5(this,"_onStoreChange",((e,t)=>{if("added"===e){if(!this.panelShouldHaveFocus())return;let e="";const n=xY.ZP.getNodeById(t);n&&!xY.ZP.isSeparator(n)&&(this.cancelableId=e=t),P5.nextTick((()=>{this.props.open&&W.ZP.isActive(this.context.vivaldiWindowId)&&this._tree.current&&(this.cancelableId=e,this._tree.current.selectById(t))}))}const n=this.state.selectedNote?.id===t;if("changed"===e&&n){const e=xY.ZP.getNodeById(t);return void this.setState({selectedNote:e})}const s=xY.ZP.hasNotes();!s&&this.state.hasNotes&&(this.setState({selectedNote:void 0}),this.focusSearch()),this.setState({hasNotes:s})})),M5(this,"panelShouldHaveFocus",(()=>{const{document:e}=this.context,t=V.ZP.getActivePage()?.url||"";return Boolean(e.getElementById("panels-container")?.contains(e.activeElement))||!Pt.jk.matchInternal("notes",t)})),M5(this,"onDragEnterPanelButton",(e=>{const t={};return t.support=e.dataTransfer.types.some((e=>"text/plain"===e)),t.copy=t.support,t.onButton=t.support,t})),M5(this,"onDropPanelButton",(e=>{const t=e.dataTransfer.getData("text/plain");(async function(e){const{id:t,url:n}=V.ZP.unsafeGetActivePage();if(await b.Z.utilities.getSelectedText(t)===e)return n})(t).then((e=>{e?Li.Z.createNote({content:t,url:e}):Li.Z.createNote({content:t})}))})),M5(this,"_applyTransitionState",(()=>{const e=re.ZP.getTransitionState("notes");ie.Z.clearTransitionState("notes"),this._tree.current&&e?(e.selectId&&this._tree.current.selectById(e.selectId),e.setFocus&&this.focusTree()):this._tree.current&&!0===this.state.hasNotes?this.focusTree():this.focusSearch()})),M5(this,"_onPanelStoreChange",(e=>{if(this.props.open)switch(e){case"setFocus":si(pn.findDOMNode(this))||this.focusTree();break;case"display":P5.nextTick((()=>this._applyTransitionState()))}})),M5(this,"onItemCreated",(()=>{const e=this.getSelectedItem();this.selectableId=e?e.id:""})),M5(this,"onItemSelected",(e=>{e?(this.cancelableId!==e.id&&(this.cancelableId=""),this.setState({selectedNote:e},(()=>{const e=document.activeElement;this.cancelableId&&this._editor.current&&"NotesManager-Editor"!==e?.className&&this._editor.current.focusPrimaryInput()}))):this.setState({selectedNote:void 0})})),M5(this,"unSelectAll",(()=>{this._tree.current?.unSelectAll(),this.setState({selectedNote:void 0})})),M5(this,"onSortChange",((e,t)=>{this.setState((n=>({sorting:{...n.sorting,sortOrder:e,sortField:t}}))),st.Z.set(P.kNotesPanelSorting,{sortOrder:e,sortField:t})})),M5(this,"sortComparator",((e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(xY.ZP.isFolder(e)&&!xY.ZP.isFolder(t))return-1;if(xY.ZP.isFolder(t)&&!xY.ZP.isFolder(e))return 1;const{sortOrder:n,sortField:s}=this.state.sorting;if("title"===s)return this.sortByTitle(e,t,n);return ti.Z.getDefaultComparator(n,s)(e,t)})),M5(this,"sortByTitle",((e,t,n)=>{if(n<=ti.Z.NO_SORTING)return 0;const s=e.title||EX(e),i=t.title||EX(t);return s||i?s?i?n===ti.Z.ASCENDING_SORT?s.toLowerCase().localeCompare(i.toLowerCase()):i.toLowerCase().localeCompare(s.toLowerCase()):n===ti.Z.ASCENDING_SORT?-1:1:n===ti.Z.ASCENDING_SORT?1:-1:0})),M5(this,"getSelectedItem",(()=>this._tree.current?.getSelectedItem())),M5(this,"onAddNote",(()=>{this.props.prefValues[P.kNotesPanelShowMarkdown]&&this.toggleMarkdown(),0===this.state.editorHeight&&this.resizeToDefault(),this.setState({filter:""}),this._tree.current?this._tree.current.onAddNote():Li.Z.createNote({})})),M5(this,"onAddFolder",(()=>{this.setState({filter:""}),this._tree.current?.onAddFolder()})),M5(this,"deleteSelectedItems",(()=>{this._tree.current?.deleteSelectedItems()})),M5(this,"handleFilterChange",(e=>{this.setState({filter:e})})),M5(this,"onSlidebarPosition",((e,t)=>{this.setState((e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,this.editorMaxHeight),0)})))})),M5(this,"onSlidebarStop",(()=>{this.setState((e=>{let t=e.editorHeight;return t<=Q.Cn&&(t=0),st.Z.set(P.kNotesPanelEditorHeight,parseInt(t)),{editorHeight:t}}))})),M5(this,"toggleMarkdown",(()=>{st.Z.toggle(P.kNotesPanelShowMarkdown,!0,!1)})),M5(this,"resizeToDefault",(()=>{this.setState((e=>{let t=e.editorHeight;return t>Q.Cn?(t=0,st.Z.set(P.kNotesPanelEditorHeight,parseInt(t))):(t=300,st.Z.reset(P.kNotesPanelEditorHeight)),{editorHeight:t}}))})),M5(this,"focusSearch",(()=>{this.refToolbar.current?.focusSearch()})),M5(this,"focusTree",(()=>{this._tree.current?.refTreeList.current?.focusTree()})),M5(this,"onContextMenu",(e=>{e.nativeEvent.buttons>0&&this.unSelectAll(),this._tree.current?.onContextMenu(e)})),M5(this,"onDragEnter",(e=>{this.canDrop=-1!==e.dataTransfer.types.findIndex((e=>"text/plain"===e)),e.preventDefault(),e.stopPropagation()})),M5(this,"onDragOver",(e=>{!0===this.canDrop&&(e.nativeEvent.dataTransfer.dropEffect="copy"),e.preventDefault(),e.stopPropagation()})),M5(this,"onDrop",(e=>{if(!0===this.canDrop){const t=e.dataTransfer.getData("text/plain");t.length>0&&this._tree.current?.onAddNote({content:t})}e.preventDefault(),e.stopPropagation()})),M5(this,"_onKeyDown",(e=>{if("Escape"===e.key)return this.focusTree(),e.stopPropagation(),void e.preventDefault()}));const t=A.ZP.get(P.kNotesPanelSorting),n=V.ZP.unsafeGetActivePage(),i=n?n.url:"";this.state={hasNotes:xY.ZP.hasNotes(),selectedNote:void 0,filter:"",editorHeight:this.props.prefValues[P.kNotesPanelEditorHeight],activePageUrl:i,sorting:{sortOrder:t.sortOrder,sortField:t.sortField,comparator:this.sortComparator}}}componentDidMount(){xY.ZP.addChangeListener(this._onStoreChange),re.ZP.addChangeListener(this._onPanelStoreChange),V.ZP.addChangeListener(this._onPageStoreChange),this.context.addEventListener("resize",this._onWindowResize,!1),this._onWindowResize()}componentWillUnmount(){xY.ZP.removeChangeListener(this._onStoreChange),re.ZP.removeChangeListener(this._onPanelStoreChange),V.ZP.removeChangeListener(this._onPageStoreChange),this.context.removeEventListener("resize",this._onWindowResize)}componentDidUpdate(e,t){!e.open&&this.props.open&&P5.nextTick((()=>this._applyTransitionState()))}render(){if(!this.props.open)return null;const e=this.state.editorHeight>0,t=Boolean(!this.state.selectedNote||this.state.selectedNote&&this.state.selectedNote.trash);return s.createElement("div",{ref:this.refPanel,className:"panel",id:"notes-panel",__source:{fileName:D5,lineNumber:518,columnNumber:5}},s.createElement("header",{__source:{fileName:D5,lineNumber:523,columnNumber:7}},s.createElement("h1",{__source:{fileName:D5,lineNumber:524,columnNumber:9}},this.props.title),s.createElement(BX,{ref:this.refToolbar,filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onDeleteSelectedItems:this.deleteSelectedItems,onAddFolder:this.onAddFolder,isDeleteDisabled:t,__source:{fileName:D5,lineNumber:525,columnNumber:9}})),!0===this.state.hasNotes&&s.createElement(RN,{fields:x5,onSortChange:this.onSortChange,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:D5,lineNumber:537,columnNumber:9}}),s.createElement("section",{className:"outerScrollbar",onClick:this.unSelectAll,onContextMenu:!0===this.state.hasNotes?this.onContextMenu:null,__source:{fileName:D5,lineNumber:545,columnNumber:7}},!1===this.state.hasNotes&&s.createElement("div",{className:"no-notes",onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:D5,lineNumber:552,columnNumber:11}},s.createElement(LX,{onAddNote:this.onAddNote,__source:{fileName:D5,lineNumber:556,columnNumber:13}})),s.createElement(OX,{ref:this._tree,settings:"NOTES_TREE",filter:this.state.filter,sorting:this.state.sorting,onCreated:this.onItemCreated,onItemSelected:this.onItemSelected,__source:{fileName:D5,lineNumber:559,columnNumber:9}})),s.createElement("div",{className:"notes-editor",onDragEnter:!0===this.state.hasNotes?null:this.onDragEnter,onDragOver:!0===this.state.hasNotes?null:this.onDragOver,onDrop:!0===this.state.hasNotes?null:this.onDrop,style:{height:this.state.editorHeight},__source:{fileName:D5,lineNumber:569,columnNumber:9}},s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.resizeToDefault,returnOffset:!0,position:"bottom",__source:{fileName:D5,lineNumber:575,columnNumber:9}}),e&&s.createElement(Z5,{ref:this._editor,key:this.state.selectedNote?this.state.selectedNote.id:-1,note:this.state.selectedNote,onAdd:this.onAddNote,onOpenDialog:this.props.onOpenDialog,toggleMarkdown:this.toggleMarkdown,viewMarkdown:this.props.prefValues[P.kNotesPanelShowMarkdown],keyAccess:this.props.prefValues[P.kKeyboardTabToAll],onKeyDown:this._onKeyDown,__source:{fileName:D5,lineNumber:584,columnNumber:11}})))}}M5(L5,"contextType",Vs.Z);const R5=(0,bi.Z)(L5,O5);class B5 extends s.Component{render(){const e=this.props.progress,t=bn()({"page-progress-indicator":!0,"progress-done":1===e});return s.createElement("progress",{className:t,value:100*e,max:100,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabProgressIndicator.jsx",lineNumber:18,columnNumber:7}})}}const F5=B5;var U5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\translate\\TranslateHistory.jsx";function V5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H5 extends s.PureComponent{constructor(...e){super(...e),V5(this,"refTreeList",s.createRef()),V5(this,"_itemHeight",80),V5(this,"_returnFalse",(()=>!1)),V5(this,"_returnTrue",(()=>!0)),V5(this,"_languageFromCode",(e=>{const t=this.props.languages.findIndex((t=>t.id===e));return-1===t?e:this.props.languages[t].historyName})),V5(this,"_onNodesActivated",((e,t)=>{this.props.onActivated(t[0].id)})),V5(this,"_onNodeDoubleClick",((e,t)=>{this.props.onActivated(t.id)})),V5(this,"_onCopyAll",(()=>{const e=e=>{const t=(this.refTreeList.current?.getAllSelectedItems()||[]).map((e=>e.id));this.props.onItemsCopy(e,t,!0)};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e)})),V5(this,"_onCopy",((e,t)=>{this.props.onItemsCopy(e,t,!1)})),V5(this,"_getMenuCapability",(async(e,t,n)=>"CONTEXT_COPY_ALL"===e.action?{handler:this._onCopyAll,visible:Boolean(n),...t(e,{})}:{...t(e,{})})),V5(this,"_getMenuVisibility",((e,t)=>{if(!t)return!1;switch(e.action){case"CONTEXT_COPY":case"CONTEXT_DELETE":return!0;default:return!1}})),V5(this,"rowComponent",(e=>{const t=e.node,n=`${this._languageFromCode(t.srcItem.code)} → ${this._languageFromCode(t.translatedItem.code)}`;return s.createElement("div",{className:"TranslatePanel-Row",__source:{fileName:U5,lineNumber:102,columnNumber:7}},s.createElement("label",{key:t.id,__source:{fileName:U5,lineNumber:103,columnNumber:9}},s.createElement("span",{className:"TranslatePanel-Row-FromToTitle",__source:{fileName:U5,lineNumber:104,columnNumber:11}},n)),s.createElement("label",{style:{fontWeight:"bold"},__source:{fileName:U5,lineNumber:106,columnNumber:9}},s.createElement("span",{__source:{fileName:U5,lineNumber:110,columnNumber:11}},t.srcItem.text)),s.createElement("label",{__source:{fileName:U5,lineNumber:112,columnNumber:9}},s.createElement("span",{__source:{fileName:U5,lineNumber:113,columnNumber:11}},t.translatedItem.text)))}))}render(){const e={name:"translatehistory",getCapability:this._getMenuCapability,getVisibility:this._getMenuVisibility};return s.createElement("section",{className:"outerScrollbar",__source:{fileName:U5,lineNumber:126,columnNumber:7}},s.createElement(Sg,{ref:this.refTreeList,settings:"TRANSLATE_HISTORY_TREE",rowComponent:this.rowComponent,nodes:this.props.nodes,menu:e,isFolder:this._returnFalse,hasChildren:this._returnFalse,delete:this.props.onItemsDelete,onSelect:()=>{},onCopy:this.props.onItemsCopy,enableDragAndDrop:!1,isValidForClipboard:this._returnTrue,onItemDoubleClick:this._onNodeDoubleClick,onItemsActivated:this._onNodesActivated,rowHeight:this._itemHeight,__source:{fileName:U5,lineNumber:127,columnNumber:9}}))}}const W5=H5;var z5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\translate\\TranslateText.jsx";class G5 extends s.PureComponent{constructor(...e){var t,n,s;super(...e),s=()=>{const e=e=>{e.clipboardData&&(e.clipboardData.setData("text/plain",this.props.text),e.stopPropagation(),e.preventDefault())};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e)},(n="_onCopyText")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return this.props.showPlaceholder?s.createElement("textarea",{className:"TranslatePanel-TranslatedText",type:"text",placeholder:(0,ue.Z)("Please wait"),readOnly:!0,__source:{fileName:z5,lineNumber:32,columnNumber:9}}):s.createElement("div",{className:"TranslatePanel-TranslatedArea",__source:{fileName:z5,lineNumber:41,columnNumber:9}},s.createElement("textarea",{className:"TranslatePanel-TranslatedText",type:"text",value:this.props.text,readOnly:!0,__source:{fileName:z5,lineNumber:43,columnNumber:11}}),this.props.text.length>0&&s.createElement("button",{className:"TranslatePanel-CopyButton",title:(0,ue.Z)("Copy translation"),dangerouslySetInnerHTML:{__html:cn.t8R},onClick:this._onCopyText,__source:{fileName:z5,lineNumber:50,columnNumber:13}}))}}const K5=G5,j5=0,Y5=6;function $5(e,t,n){const s={source:e||"",target:t||"en",q:n.map((e=>e.originalText))};return JSON.stringify(s)}var X5=n(34155),Q5="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\translate\\TranslatePanel.jsx";function q5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J5(){return ol.Z.getTranslationLocales().map((e=>({id:ol.Z.getTranslationCode(e.key),name:ol.Z.getFormattedName(e),historyName:e.value})))}class e4 extends s.PureComponent{constructor(e){super(e),q5(this,"_errorId",null),q5(this,"_hasLoadedHistory",!1),q5(this,"_idleId",null),q5(this,"_pending",void 0),q5(this,"_loadHistory",(()=>{this.props.open&&!this._hasLoadedHistory&&b.Z.translateHistory.get().then((e=>{this._isMounted&&(this._hasLoadedHistory=!0,b.Z.translateHistory.onAdded.addListener(this._onAdded),b.Z.translateHistory.onMoved.addListener(this._onMoved),b.Z.translateHistory.onRemoved.addListener(this._onRemoved),this.setState({history:e}))}))})),q5(this,"_getItemById",(e=>this.state.history.find((t=>t.id===e)))),q5(this,"_detectLanguage",(async(e,t,n)=>{if("auto"===t){let t=await ol.Z.detectTextLanguage(e,n);if(!t){t=Ev.Z.getPageState(e).pageLanguage||""}return t}return t})),q5(this,"_getLanguageByPageId",(e=>Ev.Z.getPageState(e).pageLanguage||"")),q5(this,"_onPageStoreChanged",(()=>{const e=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId).id;this.state.pageId!==e&&this.setState({pageId:e})})),q5(this,"_onPrefChanged",((e,t)=>{this.setState({autoTranslate:Boolean(t)})})),q5(this,"_onTranslationStateStoreChanged",(()=>{this.props.open&&this.setState({languages:J5()})})),q5(this,"_onBroadcastMessage",(e=>{if(e.translate){const{winId:t,lang:n,text:s}=e.translate;t===this.context.vivaldiWindowId&&ol.Z.canTranslateSelection("",s)&&this.setState({srcText:s},(()=>{this._onTranslate(n)}))}})),q5(this,"_onAdded",((e,t)=>{this.setState((n=>{const s=[...n.history];return e.forEach(((e,n)=>{s.splice(t+n,0,e)})),{history:s}}))})),q5(this,"_onMoved",((e,t)=>{const n=this.state.history.findIndex((t=>t.id===e));-1!==n&&n!==t&&this.setState((e=>{const s=[...e.history],i=s.splice(n,1);return s.splice(t>n?t-1:t,0,i[0]),{history:s}}))})),q5(this,"_onRemoved",(e=>{0===e.length?this.setState({history:[]}):this.setState((t=>{const n=[...t.history];return e.forEach((e=>{const t=n.findIndex((t=>t.id===e));-1!==t&&n.splice(t,1)})),{history:n}}))})),q5(this,"_onSourceLanguageSelected",(e=>{const{value:t}=e.currentTarget;this.setState({srcLanguage:t})})),q5(this,"_onTargetLanguageSelected",(e=>{const{value:t}=e.currentTarget;this.setState({targetLanguage:t})})),q5(this,"_onSrcEditChanged",(e=>{this.setState({srcText:e.target.value,translatedText:"",showPlaceholder:!1})})),q5(this,"_onKeyDown",(e=>{"Enter"===e.key&&(0,uh.VV)(e)&&(e.stopPropagation(),e.preventDefault(),this._onTranslate())})),q5(this,"_onKeyDownMonitor",(e=>{this._setError("none")})),q5(this,"_onPaste",(e=>{A.ZP.get(P.kPanelsTranslatePaste)&&X5.nextTick((()=>{this._onTranslate()}))})),q5(this,"_onWebviewClicked",((e,t,n,s,i)=>{if(this.props.open&&this.state.autoTranslate&&e===this.context.vivaldiWindowId&&!1===t&&0===n){"WEBVIEW"===document.elementFromPoint(Math.round(s),Math.round(i))?.tagName&&this._getSelectionAndTranslate()}})),q5(this,"_getSelectionAndTranslate",(()=>{b.Z.utilities.getSelectedText(this.state.pageId,(e=>{e&&(e===this.state.srcText&&(e=""),this.setState({srcText:e},(()=>{this._onTranslate()})))}))})),q5(this,"_toggleAutoTranslate",(()=>{this.setState((e=>({autoTranslate:!e.autoTranslate})),(()=>{st.Z.set(P.kPanelsTranslateAutomatic,this.state.autoTranslate),this.state.autoTranslate&&(this.state.srcText||this._getSelectionAndTranslate())}))})),q5(this,"_onTranslate",(e=>{const t=this.state.srcText.trim();if(!ol.Z.canTranslateSelection("",t))return void this.setState({translatedText:"",showPlaceholder:!1});if(this.state.busy)return void(this._pending={lang:e,text:t});this._setError("none"),this.setState({translatedText:"",showPlaceholder:!0,busy:!0});const n="auto"===this.state.srcLanguage&&void 0!==e?e:this.state.srcLanguage;this._detectLanguage(this.state.pageId,n,t).then((e=>{const n=ol.Z.getTranslationCode(e),s=ol.Z.getTranslationCode(this.state.targetLanguage);!function(e,t,n,s,i){let r="https://mimir.vivaldi.com/translate";s&&(r=s);const a=n.translateElements;if(0===a.length)return;const o=performance.now();fetch(r,{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:$5(e,t,a)}).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))})).then((function(e){return e.json()})).then((e=>{const t={error:!1,errorCode:j5,sourceLang:e.detectedSourceLanguage,startTime:o,endTime:performance.now()};i(t,e)})).catch((e=>{console.error("Translate request failed: ",e);const t={error:!0,errorCode:Y5,sourceLang:"",startTime:o,endTime:performance.now()};i(t)}))}(n,s,{translateElements:[{originalText:t,originalTextRaw:t,node:null,translatedText:"",strippedBits:0}],firstTranslate:!1},"",((e,t)=>{if(this._isMounted){if(e.error||!t)this.setState({showPlaceholder:!1}),this._setError(n?"system":"noDetect");else{const e={id:"",srcItem:{code:t.detectedSourceLanguage,text:t.sourceText[0]},translatedItem:{code:s,text:t.translatedText[0]}};this._addToHistory(e)}this._idleId&&clearTimeout(this._idleId),this._idleId=setTimeout(this._idleEnds,1e3)}}))}))})),q5(this,"_idleEnds",(()=>{if(this._idleId&&clearTimeout(this._idleId),this._pending){const e=this._pending.lang,t=this._pending.text;this._pending=void 0,this.setState({busy:!1,srcText:t},(()=>{this._onTranslate(e)}))}else this.setState({busy:!1})})),q5(this,"_errorEnds",(()=>{this._errorId&&clearTimeout(this._errorId),this._setError("none")})),q5(this,"_addToHistory",(e=>{W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)?(this.setState({translatedText:e.translatedItem.text,showPlaceholder:!1}),this._setError("none")):b.Z.translateHistory.add(e,0).then((t=>{const n=h.Z.runtime.lastError;n&&console.error(n.message),this.setState({translatedText:e.translatedItem.text,showPlaceholder:!1}),this._setError("none")}))})),q5(this,"_onItemActivated",(e=>{const t=this._getItemById(e);t&&this.setState({viewMode:"main"},(()=>{this.setState({srcLanguage:t.srcItem.code,targetLanguage:t.translatedItem.code,srcText:t.srcItem.text,translatedText:t.translatedItem.text,showPlaceholder:!1})}))})),q5(this,"_onItemsDelete",(e=>b.Z.translateHistory.remove(e).then((()=>Promise.resolve())))),q5(this,"_onClearHistory",(()=>{b.Z.translateHistory.reset(0)})),q5(this,"_onClearText",(()=>{this._pending=void 0,this.setState({srcText:"",translatedText:""})})),q5(this,"_onSwapLanguage",(()=>{"auto"!==this.state.srcLanguage&&this.setState((e=>{const t=e.translatedText.length>0;return{srcLanguage:e.targetLanguage,targetLanguage:e.srcLanguage,srcText:t?e.translatedText:e.srcText,translatedText:t?e.srcText:e.translatedText}}))})),q5(this,"_onItemsCopy",((e,t,n)=>{const s=t.map((e=>this._getItemById(e))).filter(Boolean),i=[];s.forEach((e=>{n&&i.push(e.srcItem.text),i.push(e.translatedItem.text)})),e.clipboardData&&(e.clipboardData.setData("text/plain",i.join("\r\n")),e.stopPropagation(),e.preventDefault())})),q5(this,"_setError",(e=>{"none"===e?"none"!==this.state.error&&(document.removeEventListener("keydown",this._onKeyDownMonitor),this._errorId&&clearTimeout(this._errorId)):"none"===this.state.error&&(document.addEventListener("keydown",this._onKeyDownMonitor),this._errorId&&clearTimeout(this._errorId),this._errorId=setTimeout(this._errorEnds,3e3)),this._isMounted&&this.setState({error:e})})),q5(this,"_errorMessage",(e=>{switch(e){case"noDetect":return(0,ue.Z)("Translation failed. Try selecting another language.");case"system":return(0,ue.Z)("Translation failed.");default:return""}})),q5(this,"_renderToolbar",(()=>{if("main"===this.state.viewMode){const e=[{id:"auto",name:(0,ue.Z)("Automatic Detection")}].concat(this.state.languages).map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:Q5,lineNumber:596,columnNumber:11}},e.name))),t=this.state.languages.map((e=>s.createElement("option",{key:e.id,value:e.id,__source:{fileName:Q5,lineNumber:603,columnNumber:11}},e.name)));return s.createElement("div",{className:"TranslatePanel-FromTo toolbar toolbar-default",__source:{fileName:Q5,lineNumber:610,columnNumber:9}},s.createElement("select",{autoFocus:!0,value:this.state.srcLanguage,onChange:this._onSourceLanguageSelected,__source:{fileName:Q5,lineNumber:611,columnNumber:11}},e),s.createElement("input",{type:"button",style:{paddingLeft:6,paddingRight:6},value:"⇆",disabled:"auto"===this.state.srcLanguage,onClick:this._onSwapLanguage,__source:{fileName:Q5,lineNumber:617,columnNumber:11}}),s.createElement("select",{value:this.state.targetLanguage,onChange:this._onTargetLanguageSelected,__source:{fileName:Q5,lineNumber:626,columnNumber:11}},t))}return s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:Q5,lineNumber:635,columnNumber:9}},s.createElement("input",{type:"button",onClick:()=>this.setState({viewMode:"main"}),value:(0,ue.Z)("navigation","Back"),__source:{fileName:Q5,lineNumber:636,columnNumber:11}}),s.createElement("input",{type:"button",className:"danger",onClick:this._onClearHistory,value:(0,ue.Z)("Clear Translate History"),__source:{fileName:Q5,lineNumber:640,columnNumber:11}}))})),q5(this,"_renderMain",(()=>{const e=!this.state.busy&&ol.Z.canTranslateSelection("",this.state.srcText);return s.createElement("div",{className:"TranslatePanel",__source:{fileName:Q5,lineNumber:654,columnNumber:7}},s.createElement("div",{className:"TranslatePanel-Content",__source:{fileName:Q5,lineNumber:655,columnNumber:9}},s.createElement("textarea",{className:"TranslatePanel-SrcText",type:"text",value:this.state.srcText,placeholder:(0,ue.Z)("Enter text to translate"),onChange:this._onSrcEditChanged,onKeyDown:this._onKeyDown,onPaste:this._onPaste,autoFocus:!this.state.srcText,__source:{fileName:Q5,lineNumber:656,columnNumber:11}}),"none"!==this.state.error&&s.createElement("div",{onPointerDown:()=>this._setError("none"),__source:{fileName:Q5,lineNumber:667,columnNumber:13}},s.createElement(Qc,{type:"error",key:"error",__source:{fileName:Q5,lineNumber:669,columnNumber:15}},this._errorMessage(this.state.error))),s.createElement(K5,{text:this.state.translatedText,showPlaceholder:this.state.showPlaceholder,__source:{fileName:Q5,lineNumber:676,columnNumber:11}})),s.createElement("div",{className:"TranslatePanel-BottomToolbar",__source:{fileName:Q5,lineNumber:680,columnNumber:9}},s.createElement("input",{type:"button",className:"button-title primary",disabled:!e,onClick:()=>this._onTranslate(),autoFocus:e,value:(0,ue.Z)("Translate"),__source:{fileName:Q5,lineNumber:681,columnNumber:11}}),s.createElement("input",{type:"button",className:"clear",onClick:()=>this._onClearText(),value:(0,ue.Z)("Clear"),__source:{fileName:Q5,lineNumber:687,columnNumber:11}})),s.createElement("div",{className:"TranslatePanel-CheckboxArea",__source:{fileName:Q5,lineNumber:692,columnNumber:9}},s.createElement("label",{__source:{fileName:Q5,lineNumber:693,columnNumber:11}},s.createElement("input",{type:"checkbox",checked:this.state.autoTranslate,onChange:this._toggleAutoTranslate,__source:{fileName:Q5,lineNumber:694,columnNumber:13}}),s.createElement("span",{__source:{fileName:Q5,lineNumber:698,columnNumber:14}},(0,ue.Z)("Auto-translate selected text")))),s.createElement("div",{className:"TranslatePanel-ShowTranslateHistory",__source:{fileName:Q5,lineNumber:702,columnNumber:9}},s.createElement("input",{type:"button",onClick:()=>this.setState({viewMode:"history"}),value:(0,ue.Z)("Show Translate History"),__source:{fileName:Q5,lineNumber:703,columnNumber:11}}),s.createElement("span",{className:"credits",__source:{fileName:Q5,lineNumber:706,columnNumber:11}},(0,ue.Z)("Powered by Lingvanex, hosted by Vivaldi."))))})),q5(this,"_renderHistory",(()=>s.createElement("div",{className:"TranslatePanel TranslatePanel-History",__source:{fileName:Q5,lineNumber:714,columnNumber:7}},s.createElement(W5,{nodes:this.state.history,languages:this.state.languages,onActivated:this._onItemActivated,onItemsCopy:this._onItemsCopy,onItemsDelete:this._onItemsDelete,__source:{fileName:Q5,lineNumber:715,columnNumber:9}})))),this.state={autoTranslate:A.ZP.get(P.kPanelsTranslateAutomatic),busy:!1,error:"none",history:[],languages:J5(),pageId:0,showPlaceholder:!1,srcLanguage:"auto",srcText:"",translatedText:"",targetLanguage:ol.Z.getTranslationCode((0,kv.Z)().substring(0,2)),viewMode:"main"}}componentDidMount(){this._isMounted=!0,V.ZP.addChangeListener(this._onPageStoreChanged),A.ZP.addListener(P.kPanelsTranslateAutomatic,this._onPrefChanged),b.Z.tabsPrivate.onWebviewClickCheck.addListener(this._onWebviewClicked),this._translationStateStoreToken=Ev.Z.addListener(this._onTranslationStateStoreChanged),b.Z.utilities.onBroadcastMessage.addListener(this._onBroadcastMessage),this._loadHistory(),this.props.open&&0===this.state.pageId&&this._onPageStoreChanged()}componentWillUnmount(){this._isMounted=!1,this._idleId&&clearTimeout(this._idleId),V.ZP.removeChangeListener(this._onPageStoreChanged),A.ZP.removeListener(P.kPanelsTranslateAutomatic,this._onPrefChanged),this._translationStateStoreToken.remove(),b.Z.utilities.onBroadcastMessage.removeListener(this._onBroadcastMessage),b.Z.tabsPrivate.onWebviewClickCheck.removeListener(this._onWebviewClicked),this._hasLoadedHistory&&(b.Z.translateHistory.onAdded.removeListener(this._onAdded),b.Z.translateHistory.onMoved.removeListener(this._onMoved),b.Z.translateHistory.onRemoved.removeListener(this._onRemoved)),this._setError("none")}componentDidUpdate(e,t){!e.open&&this.props.open?(this.setState({languages:J5()}),this._loadHistory(),0===this.state.pageId&&this._onPageStoreChanged()):e.open&&!this.props.open&&this._setError("none")}render(){return this.props.open?s.createElement("div",{className:"panel",id:"translate-panel",__source:{fileName:Q5,lineNumber:731,columnNumber:7}},s.createElement("header",{__source:{fileName:Q5,lineNumber:732,columnNumber:9}},s.createElement("h1",{__source:{fileName:Q5,lineNumber:733,columnNumber:11}},this.props.title),this._renderToolbar()),s.createElement("section",{className:"outerScrollbar",__source:{fileName:Q5,lineNumber:736,columnNumber:9}},"main"===this.state.viewMode&&this._renderMain(),"history"===this.state.viewMode&&this._renderHistory())):null}}q5(e4,"contextType",Vs.Z);const t4=(0,bi.Z)(e4,[]),n4="vivaldiStartDragging",s4="vivaldiEndDragging",i4="webPanelTitleChanged";var r4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\webPanel.jsx";function a4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o4={contentload:"handleContentLoad",dialog:"handleDialog",loadabort:"handleAbort",loadstop:"handleLoadStop",newwindow:"handleNewWindow",permissionrequest:"handleOnPermissionRequest",targeturlchanged:"handleTargetURLChanged"};class l4 extends s.PureComponent{constructor(...e){super(...e),a4(this,"state",{title:(0,ue.Z)("Loading..."),tooltip:void 0,canGoBack:!1,canGoForward:!1,canReload:!1}),a4(this,"_lookupFavicon",!0),a4(this,"attachWebViewEventHandlers",(e=>{Object.keys(o4).forEach((t=>{e.addEventListener(t,this[o4[t]])}))})),a4(this,"removeWebViewEventHandlers",(e=>{Object.keys(o4).forEach((t=>{e.removeEventListener(t,this[o4[t]])}))})),a4(this,"_alarmsChanged",(e=>{const t=e?.find((e=>e&&"RELOAD"===e.type&&this.props.webPanel.id.endsWith(e.id)));t&&this.reload()})),a4(this,"onPanelStoreChange",(e=>{this.props.isVisible&&"setFocus"===e&&document.activeElement&&!si(pn.findDOMNode(this))&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())})),a4(this,"getMobileUAString",(()=>{var e=navigator.userAgent,t=e.indexOf("("),n=e.indexOf(")",t);return t>=0&&n>t&&(e=e.substr(0,t+1)+"Linux; Android 8.0.0; SM-G965F Build/R16NW"+e.substr(n)),e=e.replace("Safari","Mobile Safari")})),a4(this,"handleNewWindow",(async e=>{switch(e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";0");break;case"new_window":case"off_the_record":e.preventDefault(),$.Z.openBrowserWindow(this.context.vivaldiWindowId,e.targetUrl,{incognito:"off_the_record"===e.windowOpenDisposition});break;case"new_popup":e.preventDefault()}})),a4(this,"handleDialog",(e=>{"confirm"===e.messageType||"prompt"===e.messageType?e.dialog.cancel():"alert"===e.messageType&&e.dialog.ok("")})),a4(this,"handleTargetURLChanged",(({newUrl:e})=>{const t=(0,wE.ZP)(e);X.Z.setStatus(t)})),a4(this,"getFaviconHost",(()=>{var e=Is.parse(this.refs.webpanelwebview.src);return e.protocol&&e.host?e.protocol+"//"+e.host+"/":""})),a4(this,"handleLoadStop",(e=>{var t=this.refs.webpanelwebview;this.setState({canGoBack:t.canGoBack(),canGoForward:t.canGoForward(),canReload:!0}),this.props.setWebPanelValue(this.props.webPanel.id,"activeUrl",this.refs.webpanelwebview.src),this._lookupFavicon&&(setTimeout(this.onSetFaviconUrl.bind(this),1e3),this._lookupFavicon=!1),t.setZoomMode("per-view"),t.setZoom(1)})),a4(this,"handleContentLoad",(e=>{this.refs.webpanelwebview.executeScript({code:"document.title"},(e=>{this.setState({title:e[0],tooltip:void 0}),this.props.setWebPanelValue(this.props.webPanel.id,"title",e[0])})),this.refs.webpanelwebview.executeScript({code:"(function() {\n  var title = document.getElementsByTagName('title')[0];\n  if (title) {\n    title.addEventListener('DOMSubtreeModified', function (e) {\n      chrome.runtime.sendMessage({\n        action: 'webPanelTitleChanged',\n        panelUrl: document.URL,\n        title: document.title\n      });\n    }, false);\n  }\n})()"},(e=>{h.Z.runtime.lastError&&console.warn("listenForTitleChange:",h.Z.runtime.lastError)})),this.refs.webpanelwebview.executeScript({file:"inject-all-bundle.js"})})),a4(this,"handleAbort",(e=>{const t=(0,ue.Z)("Aborted"),n=(0,ue.Z)("Loading aborted with reason $1",[e.reason]);this.setState({title:t,tooltip:n})})),a4(this,"onSetFaviconUrl",(()=>{this.props.setWebPanelValue(this.props.webPanel.id,"faviconUrl",this.refs.webpanelwebview.src)})),a4(this,"reload",(()=>{this.setState({title:(0,ue.Z)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.reload()})),a4(this,"home",(()=>{this.setState({title:(0,ue.Z)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.src=this.props.webPanel.url})),a4(this,"back",(()=>{this.refs.webpanelwebview.back()})),a4(this,"forward",(()=>{this.refs.webpanelwebview.forward()})),a4(this,"setTitle",(e=>{this.setState({title:e})})),a4(this,"onContextMenu",(e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.props.menuPromise(this.props.webPanel.id).then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))})),a4(this,"handleOnPermissionRequest",(e=>{if(e.preventDefault(),"download"===e.permission)A.ZP.get(P.kDownloadsStartAutomatically)?(e.request.allow(),A.ZP.get(P.kDownloadsOpenPanelOnNew)&&(A.ZP.get(P.kDownloadsUsePopout)?o.Z.executeActions("COMMAND_SHOW_DOWNLOADS_POPOUT"):re.ZP.canAutoOpen("downloads")&&ie.Z.toggleContent("downloads"))):(e.dialogtype=e.permission,this.showDialog(e))})),a4(this,"showDialog",(e=>{var t=this.refs.webpanelwebview;e.webview=t,se.Z.showDialog(e,null)}))}componentDidMount(){var e=this.refs.webpanelwebview;this.props.webPanel.mobileMode&&e.setUserAgentOverride(this.getMobileUAString()),this.attachWebViewEventHandlers(e),e.src=this.props.webPanel.url,re.ZP.addChangeListener(this.onPanelStoreChange),H.Z.addChangeListener(this._alarmsChanged)}componentWillUnmount(){var e=this.refs.webpanelwebview;this.removeWebViewEventHandlers(e),re.ZP.removeChangeListener(this.onPanelStoreChange),H.Z.removeChangeListener(this._alarmsChanged)}componentDidUpdate(){this.props.focusContent&&document.activeElement&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())}UNSAFE_componentWillReceiveProps(e){var t=this.refs.webpanelwebview;e.webPanel.mobileMode!==t.isUserAgentOverridden()&&(e.webPanel.mobileMode?t.setUserAgentOverride(this.getMobileUAString()):t.setUserAgentOverride(navigator.userAgent),this.reload())}render(){const e=bn()({panel:!0,webpanel:!0,visible:this.props.isVisible});return s.createElement("div",{className:e,__source:{fileName:r4,lineNumber:397,columnNumber:5}},this.props.isVisible&&this.props.panelUI.showToolbar&&s.createElement("header",{className:"webpanel-header",onContextMenu:this.onContextMenu,__source:{fileName:r4,lineNumber:399,columnNumber:9}},s.createElement("h1",{className:"webpanel-title",title:this.state.tooltip||this.state.title,__source:{fileName:r4,lineNumber:401,columnNumber:11}},this.state.title),s.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:r4,lineNumber:405,columnNumber:11}},this.props.panelUI.allControls?s.createElement("div",{className:"button-toolbar",__source:{fileName:r4,lineNumber:407,columnNumber:15}},s.createElement("button",{className:"button-toolbar back",title:(0,ue.Z)("navigation","Back"),onClick:this.back,disabled:!this.state.canGoBack,dangerouslySetInnerHTML:{__html:cn.mgF.medium},__source:{fileName:r4,lineNumber:408,columnNumber:17}})):null,this.props.panelUI.allControls?s.createElement("div",{className:"button-toolbar",__source:{fileName:r4,lineNumber:416,columnNumber:15}},s.createElement("button",{className:"button-toolbar forward",title:(0,ue.Z)("navigation","Forward"),onClick:this.forward,disabled:!this.state.canGoForward,dangerouslySetInnerHTML:{__html:cn.Zu.medium},__source:{fileName:r4,lineNumber:417,columnNumber:17}})):null,this.props.panelUI.allControls?s.createElement("div",{className:"button-toolbar",__source:{fileName:r4,lineNumber:425,columnNumber:15}},s.createElement("button",{className:"button-toolbar reload",title:(0,ue.Z)("Reload"),onClick:this.reload,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:cn.GO5.medium},__source:{fileName:r4,lineNumber:426,columnNumber:17}})):null,s.createElement("div",{className:"button-toolbar",__source:{fileName:r4,lineNumber:433,columnNumber:13}},s.createElement("button",{className:"button-toolbar home",title:(0,ue.Z)("Home"),onClick:this.home,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:cn.PaK.medium},__source:{fileName:r4,lineNumber:434,columnNumber:15}})))),s.createElement("section",{className:"webpanel-content",__source:{fileName:r4,lineNumber:444,columnNumber:7}},s.createElement("webview",{ref:"webpanelwebview",name:"vivaldi-webpanel",__source:{fileName:r4,lineNumber:445,columnNumber:9}})))}}a4(l4,"contextType",Vs.Z);const c4=l4;var u4=n(88652),m4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\WindowIcon.jsx";class d4 extends s.Component{render(){const e=bn()({"folder-icon":!this.props.trash,"folder-trash":this.props.trash});return s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:this.props.leftMargin?{marginLeft:this.props.leftMargin}:null,__source:{fileName:m4,lineNumber:21,columnNumber:7}},this.props.trash&&s.createElement("g",{__source:{fileName:m4,lineNumber:27,columnNumber:11}},s.createElement("path",{d:"M1 1.5h3.5v-1h7v1h-8H15",__source:{fileName:m4,lineNumber:28,columnNumber:13}}),s.createElement("path",{d:"M3.5 3.5v11h9v-11zm3 8v-4zm3 0v-4z",__source:{fileName:m4,lineNumber:29,columnNumber:13}})),this.props.stack&&s.createElement("g",{__source:{fileName:m4,lineNumber:34,columnNumber:11}},s.createElement("path",{d:"M1.5,1.5 L1.5,9.5",__source:{fileName:m4,lineNumber:35,columnNumber:13}}),s.createElement("path",{d:"M9.5,1.5 L9.5,9.5",__source:{fileName:m4,lineNumber:36,columnNumber:13}}),s.createElement("path",{d:"M1.5,9.5 L9.5,9.5",__source:{fileName:m4,lineNumber:37,columnNumber:13}}),s.createElement("path",{d:"M1.5,1.5 L9.5,1.5",__source:{fileName:m4,lineNumber:38,columnNumber:13}}),s.createElement("path",{d:"M3.5,9.5 L3.5,11.5",__source:{fileName:m4,lineNumber:39,columnNumber:13}}),s.createElement("path",{d:"M11.5,3.5 L11.5,11.5",__source:{fileName:m4,lineNumber:40,columnNumber:13}}),s.createElement("path",{d:"M3.5,11.5 L11.5,11.5",__source:{fileName:m4,lineNumber:41,columnNumber:13}}),s.createElement("path",{d:"M9.5,3.5 L11.5,3.5",__source:{fileName:m4,lineNumber:42,columnNumber:13}}),s.createElement("path",{d:"M5.5,11.5 L5.5,13.5",__source:{fileName:m4,lineNumber:43,columnNumber:13}}),s.createElement("path",{d:"M13.5,5.5 L13.5,13.5",__source:{fileName:m4,lineNumber:44,columnNumber:13}}),s.createElement("path",{d:"M5.5,13.5 L13.5,13.5",__source:{fileName:m4,lineNumber:45,columnNumber:13}}),s.createElement("path",{d:"M11.5,5.5 L13.5,5.5",__source:{fileName:m4,lineNumber:46,columnNumber:13}})),this.props.pinnedFolder&&s.createElement("g",{transform:"translate(3, 2)",__source:{fileName:m4,lineNumber:51,columnNumber:11}},s.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:m4,lineNumber:52,columnNumber:13}}),s.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:m4,lineNumber:53,columnNumber:13}})),!this.props.pinnedFolder&&!this.props.stack&&!this.props.trash&&s.createElement("g",{transform:"translate(-1, 1)",__source:{fileName:m4,lineNumber:59,columnNumber:11}},s.createElement("polygon",{points:"16.5 3.5 16.5 0.5 1.5 0.5 1.5 3.5",__source:{fileName:m4,lineNumber:60,columnNumber:13}}),s.createElement("path",{d:"M1.5,3.5 L1.5,12.5",__source:{fileName:m4,lineNumber:61,columnNumber:13}}),s.createElement("path",{d:"M16.5,3.5 L16.5,12.5",__source:{fileName:m4,lineNumber:62,columnNumber:13}}),s.createElement("path",{d:"M1.5,12.5 L16.5,12.5",__source:{fileName:m4,lineNumber:63,columnNumber:13}}),s.createElement("path",{d:"M4.5,0.5 L4.5,3.5",__source:{fileName:m4,lineNumber:64,columnNumber:13}}),s.createElement("path",{d:"M7.5,0.5 L7.5,3.5",__source:{fileName:m4,lineNumber:65,columnNumber:13}}),this.props.activeWindow&&s.createElement("polygon",{points:"4.5 6.5 4.5 8.5 7.5 6.5",strokeWidth:"2",__source:{fileName:m4,lineNumber:68,columnNumber:15}})))}}const h4=d4;var p4=n(20349);const g4=function(e,t){h.Z.tabs.query({},(n=>{const s=(0,sa.Set)(n.map((e=>JSON.parse(e.extData||"{}").group)).filter(Boolean)),i=A.ZP.get(P.kTabsStackingNameMap)||{},r=(0,p4.default)(i,((e,t)=>s.includes(t)));t?r[e]=t:delete r[e],st.Z.set(P.kTabsStackingNameMap,r)}))};var b4=n(3969),N4=n(34155),f4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowTree.jsx";function _4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v4=[P.kPanelsShowFolderBadge,P.kPanelsWindowDragToStack,P.kPanelsWindowSingleClickOpens,P.kPanelsWindowShowPinnedGroup,P.kTabsAutoMuting,P.kTabsDimHibernated,P.kTabsShowCloseButton,P.kTabsStackingMode,P.kTabsStackingNameMap,P.kTabsUnread,P.kThemeUseAnimation],E4="root",C4="trash",w4="vivaldi/x-window-item";class y4 extends s.PureComponent{constructor(...e){super(...e),_4(this,"refTreeList",s.createRef()),_4(this,"state",{nodes:[]}),_4(this,"expandModel",{}),_4(this,"blockPageStoreChange",!1),_4(this,"lastActivePinnedId",""),_4(this,"centerDownId",""),_4(this,"focusTree",(()=>{this.refTreeList.current?.focusTree()})),_4(this,"_onPageStoreChanged",(()=>{!1===this.blockPageStoreChange&&this._onFilterChange(this.props.filter,qo.default);const e=V.ZP.unsafeGetActivePage();e.pinned&&(this.lastActivePinnedId=e.id.toString())})),_4(this,"_onTrashStoreChanged",(()=>{this._onFilterChange(this.props.filter,qo.default)})),_4(this,"_getFavicon",(e=>Pt.jk.getFaviconWithFallback(e.url||"",e.favIconUrl||""))),_4(this,"_getNodes",((e=!1)=>{e||(e="off"===this.props.prefValues[P.kTabsStackingMode]);const t=function(e){return e&&e.startsWith("www.")?e.substring(4):e},n=[this.context.vivaldiWindowId].map(((n,s)=>{let i=0,r=V.ZP.getTabs(n,e).toArray();const a=`window-${n}`,o=`pinned-${n}`;let l=[];if(this.props.prefValues[P.kPanelsWindowShowPinnedGroup]){const e=r.filter((e=>"tab"===e.type&&e.page.pinned));r=r.filter((e=>!(e.page&&e.page.pinned))),l=[{id:o,type:"pinned",parentId:a,title:(0,ue.Z)("title","Pinned Tabs"),index:0,pageIndex:i,wid:n,children:e.map(((e,s)=>{const r=Is.parse(e.page.url).hostname||"",a=e.id.toString();return{id:a,type:"tab",parentId:o,title:Pt.jk.getDisplayTitle(e.page),index:s,pageIndex:i++,wid:n,pageItem:{page:e.page,url:e.page.url,hostname:r,domain:t(r),faviconUrl:this._getFavicon(e.page),useDefaultIcon:V.ZP.useDefaultIcon(e.page),active:V.ZP.isActivePage(parseInt(a))}}}))}]}const c=r.map(((e,s)=>{if("tab"===e.type){const r=Is.parse(e.page.url).hostname||"",o=e.id.toString();return{id:o,type:"tab",parentId:a,title:Pt.jk.getDisplayTitle(e.page),index:s+(l.length>0?1:0),pageIndex:i++,wid:n,pageItem:{page:e.page,url:e.page.url,hostname:r,domain:t(r),faviconUrl:this._getFavicon(e.page),useDefaultIcon:V.ZP.useDefaultIcon(e.page),active:V.ZP.isActivePage(parseInt(o))}}}if("group"===e.type)return{id:e.id,type:"stack",parentId:a,title:this.props.prefValues[P.kTabsStackingNameMap][e.id]||e.page.title,index:s+(l.length>0?1:0),pageIndex:i,wid:n,children:e.pages.toArray().map(((s,r)=>{const a=s.id,o=Is.parse(s.url).hostname||"";return{id:a.toString(),type:"tab",parentId:e.id,title:Pt.jk.getDisplayTitle(s),index:r,pageIndex:i++,wid:n,pageItem:{page:s,url:s.url,hostname:o,domain:t(o),faviconUrl:this._getFavicon(s),useDefaultIcon:V.ZP.useDefaultIcon(s),active:V.ZP.isActivePage(parseInt(a))}}}))}})).filter(Boolean);return{id:a,type:"window",parentId:E4,title:(0,ue.Z)("title","Window")+" - "+Pt.jk.getDisplayTitle(V.ZP.unsafeGetActivePage(n)),index:s,pageIndex:0,wid:n,children:[...l,...c]}})),s=(e,n,s)=>{const i=Is.parse(n.url||"").hostname||"";return{id:n.sessionId,parentId:e,type:"trash",index:s,title:Pt.jk.getDisplayTitle(n),wid:this.context.vivaldiWindowId,pageIndex:0,trashItem:{tab:{handle:n,url:n.url,hostname:i,domain:t(i),faviconUrl:this._getFavicon(n),useDefaultIcon:!1}}}},i={id:C4,type:"trash",parentId:E4,title:(0,ue.Z)("title","Closed Tabs"),index:n.length,pageIndex:0,wid:this.context.vivaldiWindowId,children:u4.Z.getTrash().map(((e,t)=>{if(e.tab)return s(C4,e.tab,t);if(e.window&&e.window.tabs&&e.window.sessionId){const n=e.window,i=e.window.tabs,r=e.window.sessionId;return{id:r,parentId:C4,type:"trash",index:t,title:(0,ue.Z)("Window with $1 Tab","Window with $1 Tabs",[i.length]),wid:this.context.vivaldiWindowId,pageIndex:0,trashItem:{window:{handle:n}},children:i.map(((e,t)=>s(r,e,t)))}}})).filter(Boolean)};return this._getRootNode([...n,i]).children||[]})),_4(this,"_getRootNode",(e=>({id:E4,parentId:"",type:"root",title:"",index:0,pageIndex:0,wid:this.context.vivaldiWindowId,children:e}))),_4(this,"_getChildren",(e=>e?.children??[])),_4(this,"_getPageIndex",(e=>e.pageIndex)),_4(this,"_getFilteredTree",((e,t)=>{const n=function(e,t,n){let s=!1;return e.pageItem&&!1!==n.url&&(s=e.pageItem.url.includes(t)),s||!1===n.title||(s=e.title.toLowerCase().includes(t)),s},s=function(e,t,i,r,a){let o=!1;for(let l=0;l<e.length;l++){const c=e[l];let u=!1;if(c.children){const e={...c,children:[]};s(c.children,e.children,i,r,a)&&(t.push(e),o=!0,u=!0)}if(!u&&n(c,r,a)){const e={...c};t.push(e),c.children&&i.push(c),o=!0}}return o},i=[],r=[];return s(this._getNodes(),i,r,e.toLowerCase(),t),{nodes:i,collapsed:r}})),_4(this,"_onFilterChange",((e,t)=>{if(e&&e.length>0){const n={url:!0,title:!0},s=this._getFilteredTree(e,n);this.setState({nodes:s.nodes},t(s.collapsed))}else this.setState({nodes:this._getNodes()},t([]))})),_4(this,"getSelectedItem",(()=>this.refTreeList.current?.getSelectedItem())),_4(this,"getSelectedItems",(()=>this.refTreeList.current?.getAllSelectedItems()||[])),_4(this,"unSelectAll",(()=>{this.refTreeList.current?.unSelectAll()})),_4(this,"_isTrashFolder",(e=>"trash"===e.type&&!e.trashItem)),_4(this,"_isPinnedFolder",(e=>"pinned"===e.type)),_4(this,"_getSelectedBackgroundPages",(()=>{const e=this.getSelectedItems(),t=e.map((e=>"window"===e.type?e:void 0)).filter(Boolean);return t.length>0?t.flatMap((e=>e.children||e)).flatMap((e=>e.children||e)).map((e=>e.pageItem)).filter(Boolean).filter((e=>e.page!==V.ZP.unsafeGetActivePage(e.wid))).map((e=>e.page)):e.flatMap((e=>e.children||e)).map((e=>e.pageItem)).filter(Boolean).filter((e=>e.page!==V.ZP.unsafeGetActivePage(e.wid))).map((e=>e.page))})),_4(this,"_getDiscardablePages",(()=>this._getSelectedBackgroundPages().filter((e=>!e.discarded&&!e.isInspected)))),_4(this,"_getStackableSelectedNodes",(()=>{let e=this.getSelectedItems();if(1===e.length&&"stack"===e[0].type)return[];return e=e.filter((e=>"tab"===e.type||"stack"===e.type)).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.pageItem&&!e.pageItem.page.pinned)),(e=>{const t=[];return e.forEach((e=>{e.pageItem&&-1===t.findIndex((t=>e.wid))&&t.push(e.wid)})),t})(e).length>1?[]:e})),_4(this,"_getStackableNodesForHost",((e,t)=>this.state.nodes.filter((t=>"window"===t.type&&t.wid===e)).flatMap((e=>e.children||e)).filter((e=>e.pageItem&&!e.pageItem.page.pinned&&e.pageItem.hostname===t.hostname)))),_4(this,"_getTileableSelectedNodes",(()=>{const e=this.getSelectedItems();if(1===e.length&&"stack"===e[0].type){const t=new Map,n=this._getChildren(e[0]);for(let e=0;e<n.length;e++){const s=n[e].pageItem,i=s?(0,Kd.jA)(s.page):void 0;if(void 0===i){t.clear();break}t.set(i,"")}if(1===t.size)return[]}return this._filterNodesToTabs().filter((e=>void 0!==e.pageItem))})),_4(this,"_filterNodesToTabs",(()=>this.getSelectedItems().filter((e=>"tab"===e.type||"stack"===e.type||"pinned"===e.type)).flatMap((e=>e.children||e)))),_4(this,"_getSelectedTilingItems",(()=>this._filterNodesToTabs().map((e=>{const t=e.pageItem?(0,Kd.jA)(e.pageItem.page):void 0;return t?{node:e,tid:t}:void 0})).filter(Boolean).filter(((e,t,n)=>n.indexOf(e)===t)))),_4(this,"_getNodesWithMediaState",((e,t)=>{let n=[];return"selection"===t?n=this.getSelectedItems():"all"===t?n=this.state.nodes:"active"===t&&(n=this.state.nodes.filter((e=>Boolean(e.pageItem&&e.pageItem.page.active)))),n.filter((e=>"window"===e.type||"tab"===e.type||"stack"===e.type||"pinned"===e.type)).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]).filter((t=>{const n=t.pageItem?.page;return n&&Qq.hasMediaState(n.id,e)&&!n.discarded}))})),_4(this,"_getMuteableNodesFrom",(e=>this._getNodesWithMediaState("playing",e))),_4(this,"_muteOthers",(e=>{if(e.pageItem)$.Z.muteAllExcept([e.pageItem.page]);else{const t=this._getChildren(e).map((e=>e.pageItem?.page)).filter(Boolean);$.Z.muteAllExcept(t)}})),_4(this,"_getPlayableNodesFrom",((e,t)=>{const n=this._getNodesWithMediaState("muting",e),s=t.pageItem?.page;switch(this.props.prefValues[P.kTabsAutoMuting]){case"onlyActive":return n.filter((e=>{const t=e.pageItem?.page;return Boolean(t&&t===s&&t.active)}));case"prioritizeActive":{const e=V.ZP.unsafeGetActivePage();if(Qq.hasMediaState(e.id,"playing"))return[];if(n.length>1)return n.filter((e=>{const t=e.pageItem?.page;return Boolean(t&&t===s)}))}}return n})),_4(this,"_isUnread",(e=>!(!this.props.prefValues[P.kTabsUnread]||!e.pageItem?.page)&&V.ZP.isUnread(e.pageItem.page))),_4(this,"_isInStackFolder",(e=>"stack"===e.type||Boolean(e.pageItem&&(0,Kd.av)(e.pageItem.page)))),_4(this,"_isInTrashFolder",(e=>"trash"===e.type||Boolean(e.trashItem))),_4(this,"_isInPinnedFolder",(e=>"pinned"===e.type||Boolean(e.pageItem?.page.pinned))),_4(this,"_isWithinFolder",((e,t)=>{if(this._isFolder(e)){const n=Boolean(this.refTreeList.current?.isExpanded(e.id));return"on"===t||n&&"below"===t}return void 0!==e.parentId})),_4(this,"_getStackFolderByNode",(e=>{let t=e;return t.pageItem&&(t=this._getNodeById(t.parentId)),"stack"===t?.type?t:void 0})),_4(this,"_getPageByNode",(e=>{if("stack"===e.type){const t=this._getChildren(e);return t.length>0?t[0].pageItem?.page:void 0}return e.pageItem?.page})),_4(this,"_getPageIdByNode",(e=>this._getPageByNode(e)?.id)),_4(this,"_getNodeById",(e=>{const t=n=>{for(let s=0;s<n.length;s++){let i=n[s];if(i.id===e)return i;if(i.children&&(i=t(i.children),i))return i}};return e===E4?this._getRootNode(this.state.nodes):t(this.state.nodes)})),_4(this,"_getNodeByParentAndIndex",((e,t)=>{const n=this._getNodeById(e);return n&&n.children&&n.children.length>0?(t<0?t=0:t>=n.children.length&&(t=n.children.length-1),n.children[t]):n})),_4(this,"_indexExceedsChildCount",((e,t)=>{const n=this._getNodeById(e);return Boolean(n&&t>=this._getChildren(n).length)})),_4(this,"_hasChildren",(e=>Boolean(e.children&&e.children.length>0))),_4(this,"_isFolder",(e=>Boolean(e.children))),_4(this,"expandAll",(()=>{this.refTreeList.current?.expandAll()})),_4(this,"_onNodeClick",((e,t)=>{Nn.isNoModifierPressed(e)&&e.button===Nn.kLeft&&this.props.prefValues[P.kPanelsWindowSingleClickOpens]&&this._onNodesActivated(e,[t])})),_4(this,"_onNodeMouseDown",((e,t)=>{Nn.isNoModifierPressed(t)&&t.button===Nn.kCenter&&(this.centerDownId=e.id)})),_4(this,"_onNodeMouseUp",((e,t)=>{Nn.isNoModifierPressed(t)&&t.button===Nn.kCenter&&this.centerDownId===e.id&&e.pageItem&&!e.pageItem.page.pinned&&this._closeWithId(e.id),this.centerDownId=""})),_4(this,"_onNodeDoubleClick",((e,t)=>{e.button!==Nn.kLeft||this.props.prefValues[P.kPanelsWindowSingleClickOpens]||this._onNodesActivated(e,[t])})),_4(this,"_onNodesActivated",((e,t)=>{const n=t[0];if(n.trashItem)n.trashItem.tab?o0.Z.undeleteTab(n.trashItem.tab.handle):n.trashItem.window&&o0.Z.undeleteWindow(n.trashItem.window.handle);else if(n.pageItem)$.Z.activateTab(n.pageItem.page.id,n.wid);else if(this._isPinnedFolder(n)){let e=this._getNodeById(this.lastActivePinnedId);!e&&n.children&&n.children.length>0&&(e=n.children[0]),e?.pageItem&&$.Z.activateTab(e.pageItem.page.id,e.wid)}})),_4(this,"_closeByIds",(e=>{let t=e.map((e=>this._getNodeById(e))).filter(Boolean);const n=t.filter((e=>"stack"===e.type)),s=n.map((e=>e.children)).filter(Boolean).reduce(((e,t)=>e.concat(t)),[]);return t=t.filter((e=>"stack"!==e.type)).filter((e=>-1===s.findIndex((t=>t.id===e.id)))),n.forEach((e=>{const t=this._getPageIdByNode(e);"number"==typeof t&&$.Z.closeTabStack(t)})),$.Z.closePage((0,sa.List)(t.map((e=>e.pageItem?.page)).filter(Boolean))),Promise.resolve([])})),_4(this,"_getPagesByIds",(e=>{const t=[];return e.map((e=>this._getNodeById(e))).filter(Boolean).forEach((e=>{e.pageItem?t.push(e.pageItem.page):e.children&&("window"===e.type?Array.prototype.push.apply(t,this._getChildren(e).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.pageItem?.page)).filter(Boolean)):Array.prototype.push.apply(t,this._getChildren(e).map((e=>e.pageItem?e.pageItem.page:void 0)).filter(Boolean)))})),t})),_4(this,"_saveBookmarkByIds",(e=>{0===e.length?i.Z.bookmarkAllOpenPages(this.context.vivaldiWindowId,tn.ZP.getRootNode().id):i.Z.bookmarkPages((0,sa.List)(this._getPagesByIds(e)),this.context.vivaldiWindowId,!1,tn.ZP.getRootNode().id)})),_4(this,"_saveSessionByIds",(e=>{if(0===e.length)se.Z.showSaveSession({mode:"all"});else{const t=this._getPagesByIds(e).map((e=>e.id));t.length>0&&se.Z.showSaveSession({mode:"selected",pageIds:t})}})),_4(this,"_handleExpandClick",((e,t)=>{(0,Rx.Z)(e),this.refTreeList.current?.toggleSelectedExpansion(t)})),_4(this,"_validateForDrag",(e=>e.map((e=>this._getNodeById(e))).filter(Boolean).filter((e=>"window"!==e.type&&!this._isPinnedFolder(e)&&!this._isTrashFolder(e))).map((e=>e.id)))),_4(this,"_getDragData",((e,t)=>{const n=t.map((e=>this._getNodeById(e))).filter(Boolean);if("text/plain"===e){return n.map((e=>e.pageItem?e.pageItem.url:e.trashItem?.tab?e.trashItem.tab.url:e.title)).join("\r\n")}if("text/uri-list"===e){return n.map((e=>e.pageItem?e.pageItem.url:e.trashItem?.tab?.url||"")).filter(Boolean).join("\r\n")}return""})),_4(this,"_setCustomDragData",((e,t)=>{const n=t.map((e=>this._getNodeById(e))).filter(Boolean),s=n.map((e=>Boolean(e.trashItem))),i=n.map((e=>Boolean(e.pageItem?.page.pinned)));s.filter((e=>!0===e)).length>0&&e.setData("vivaldi/x-tab-closed",JSON.stringify(s)),i.filter((e=>!0===e)).length>0&&e.setData("vivaldi/x-tab-pinned",JSON.stringify(i))})),_4(this,"_getDropSupport",((e,t)=>{const n={available:!1,onto:!1,edge:!0};if(-1!==t.dataTransfer.types.findIndex((e=>"vivaldi/x-tab-closed"===e)))return n.available=!this._isInTrashFolder(e),n.onto=n.available&&this._canDropOnto(e,t),n;if(-1!==t.dataTransfer.types.findIndex((e=>"vivaldi/x-tab-pinned"===e))){if(!this.props.prefValues[P.kPanelsWindowShowPinnedGroup])return n.available=Boolean(e.pageItem?.page.pinned),n.onto=n.available&&this._canDropOnto(e,t),n;if(this._isInTrashFolder(e))return n}return(t.dataTransfer.types.includes("text/plain")||t.dataTransfer.types.includes("text/uri-list"))&&(t.dataTransfer.types.includes(w4)?n.available=!0:n.available=!this._isInTrashFolder(e),n.onto=n.available&&this._canDropOnto(e,t)),n})),_4(this,"_canDropOnto",((e,t)=>!!this._isFolder(e)||!(t.dataTransfer.types.includes(w4)&&(!this.props.prefValues[P.kPanelsWindowDragToStack]||this._isInPinnedFolder(e)||this._isInStackFolder(e)))&&!this._isInTrashFolder(e))),_4(this,"_getDropIndexByNode",((e,t)=>{let n=0;if(e.pageItem){const s=e.pageItem.page.id;n=V.ZP.getTabs(e.wid,!0).toArray().findIndex((e=>e.page.id===s)),"below"===t&&(n+=1)}else if(e.children){const s=this._getChildren(e);if(s.length>0){if("above"===t||"below"===t){const e=s[0];if(e.pageItem){const t=e.pageItem.page.id;n=V.ZP.getTabs(e.wid,!0).toArray().findIndex((e=>e.page.id===t))}}"below"===t&&(n+=1)}}return n})),_4(this,"_onDrop",((e,t,n)=>{const s=e.dataTransfer.getData("text/uri-list").split("\n").map((e=>e));if(s.length>0)if("on"===n&&t.pageItem)$.Z.openURL(s[0],{inCurrent:!0,inSpecificPageId:t.pageItem.page.id});else{const e=this._getTargetSpec(t,n),i=this._getDropIndexByNode(t,n),r=t.wid,a=this._getStackFolderByNode(t);$.Z.newTab(r,s[0],i).then((s=>{const i=V.ZP.getPages(r).find((e=>e.id===s));if(this._isWithinFolder(t,n))if(this._isInPinnedFolder(t))i&&$.Z.setPinned(sa.List.of(i),!0),i&&$.Z.moveToIndex(i,e.pageIndex);else if(this._isInStackFolder(t)){const n=this._getPageByNode(t);if(n&&a){const t=this._getChildren(a).map((e=>e.pageItem?.page)).filter(Boolean);t.splice(e.index,0,i),$.Z.createTabStack((0,sa.List)(t.filter(Boolean)),this._getPageIndex(a),n.getIn(["extData","group"]))}}this.refTreeList.current?.selectById(s.toString())})).catch((e=>{console.warn(e)}))}return Promise.resolve([])})),_4(this,"_onMove",((e,t,n,s)=>{const i=this._getNodeById(t);if(!i)return Promise.resolve([]);"stack"===i.type&&"on"===s&&(s="below",n=this._getChildren(i).length);let r=this._getNodeByParentAndIndex(t,n);if(!r)return Promise.resolve([]);if(this._isTrashFolder(r)&&"above"===s){const e=this.state.nodes.filter((e=>"window"===e.type)),t=0===e.length?void 0:e[e.length-1];if(!t||!t.children)return Promise.resolve([]);(n=t.children.length)>0&&(r=t.children[n-1])}const a=e.map((e=>this._getNodeById(e))).filter(Boolean).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]).map((e=>this._getPageByNode(e))).filter(Boolean),o=e.filter((e=>V.ZP.isGroup(e,this.context.vivaldiWindowId))),l=this._indexExceedsChildCount(t,n);let c=this._getPageByNode(r);if(!c)if(this._isInPinnedFolder(i)){const e=V.ZP.getTabs(i.wid,!1).toArray().filter((e=>e.page.pinned));c=e.length>0?e[0].page:null}else{const e=V.ZP.getTabs(i.wid,!1).toArray().filter((e=>!e.page.pinned));c=e.length>0?e[0].page:null}const u=this._getNodeById(e[0]);if(!u)return Promise.resolve([]);if(this._isInTrashFolder(r))return this._closeByIds(e),Promise.resolve([]);if(u.trashItem){return e.map((e=>this._getNodeById(e))).filter(Boolean).forEach((e=>{e.trashItem?.tab?o0.Z.undeleteTab(e.trashItem.tab.handle):e.trashItem?.window&&o0.Z.undeleteWindow(e.trashItem.window.handle)})),Promise.resolve([])}const m=c?c.getIn(["extData","group"]):"";if("stack"===i.type&&V.ZP.isGroup(m,r.wid))$.Z.treeMove({pages:a,groups:o,targetPage:c,after:l,area:"stack",group:m,windowId:u.wid});else if(this.props.prefValues[P.kPanelsWindowShowPinnedGroup]&&this._isInPinnedFolder(i))$.Z.treeMove({pages:a,groups:o,targetPage:c,after:l,area:"pinned",windowId:u.wid});else if("on"===s&&this.props.prefValues[P.kPanelsWindowDragToStack]){if(c){const e=c.id,t=a.filter((t=>t.id!==e));let n=c.index,s=0;for(let e=0;e<t.length;e++){n>t[e].index&&s++}n-=s,t.splice(0,0,c);const i=V.ZP.getNewGroupId();$.Z.createTabStack((0,sa.List)(t),n,i),this.refTreeList.current?.selectById(i)}}else $.Z.treeMove({pages:a,groups:o,targetPage:c,after:l,area:"regular",windowId:u.wid});return Promise.resolve([])})),_4(this,"_onCopy",((e,t)=>{const n=e.clipboardData;if(n){const e=t.map((e=>this._getNodeById(e))).filter(Boolean).map((e=>e.pageItem?.url||e.trashItem?.tab?.url)).filter(Boolean).map((e=>Pt.jk.getHoverUrl(e))).join("\n");n.setData("text/plain",e),n.setData("text/uri-list",e)}e.preventDefault()})),_4(this,"_isValidForClipboard",(e=>Boolean(e.pageItem||e.trashItem?.tab))),_4(this,"_isValidToDelete",(e=>e.map((e=>this._getNodeById(e))).filter(Boolean).filter((e=>"window"!==e.type)).filter((e=>!this._isInPinnedFolder(e))).filter((e=>!this._isInTrashFolder(e))).map((e=>e.id)))),_4(this,"_getTargetSpec",((e,t)=>{const n={id:e.id,index:0,parentId:void 0,pageIndex:0},s=Boolean(this.refTreeList.current?.isExpanded(e.id));if(this._isFolder(e)&&("on"===t||s&&"below"===t))n.parentId=e.id,n.pageIndex=this._getPageIndex(e);else if(e.parentId){if(n.parentId=e.parentId,n.index=e.index+("below"===t?1:0),n.pageIndex=this._getPageIndex(e),"below"===t){const t=this._getChildren(e);!s&&t.length>0?n.pageIndex=this._getPageIndex(t[t.length-1]):n.pageIndex+=1}}else n.parentId=e.id,n.index=0;return n})),_4(this,"_reload",(()=>{const e=this.getSelectedItems().filter((e=>"window"===e.type)).map((e=>this._getChildren(e))).filter(Boolean).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.children||e)).reduce(((e,t)=>e.concat(t)),[]),t=this.getSelectedItems().filter((e=>"stack"===e.type||"pinned"===e.type)).map((e=>this._getChildren(e))).filter(Boolean).reduce(((e,t)=>e.concat(t)),[]).filter((t=>-1===e.findIndex((e=>e===t.id)))),n=this.getSelectedItems().filter((e=>"tab"===e.type&&Boolean(e.pageItem))).filter((t=>-1===e.findIndex((e=>e===t.id)))).filter((e=>-1===t.findIndex((t=>t===e.id))));[e,t,n].forEach((e=>{const t=e.map((e=>e.pageItem?.page.id)).filter(Boolean);$.Z.reloadPage((0,sa.List)(t))}))})),_4(this,"_tile",(()=>{const e=this._getTileableSelectedNodes();e.length>1&&$.Z.tilePages((0,sa.List)(e.map((e=>e.pageItem?.page)).filter(Boolean)),"row")})),_4(this,"_removeTile",(()=>{this._getSelectedTilingItems().forEach((e=>{$.Z.untileTileGroup(e.tid,e.node.wid)}))})),_4(this,"_setMediaState",((e,t)=>{if("playing"===e){const e=this._getPlayableNodesFrom("selection",t).map((e=>e.pageItem?.page)).filter(Boolean);$.Z.setMuting("selection","unmute",(0,sa.List)(e))}else if("muting"===e){const e=this._getMuteableNodesFrom("selection").map((e=>e.pageItem?.page)).filter(Boolean);$.Z.setMuting("selection","mute",(0,sa.List)(e))}})),_4(this,"newTab",(e=>{$.Z.newTab(e,"").then((e=>{this.refTreeList.current?.expandToId(e.toString()),this.refTreeList.current?.selectById(e.toString())})).catch((e=>{console.warn(e)}))})),_4(this,"_newTabAfter",(e=>{const t=this._getNodeById(e);if(!t)return;const n=this._getTargetSpec(t,"below"),s=this._getDropIndexByNode(t,"below");this.blockPageStoreChange=!0,$.Z.newTab(t.wid,"",s).then((e=>{if(this._isWithinFolder(t,"below")){const s=V.ZP.getPages(t.wid).find((t=>t.id===e));if(this._isInPinnedFolder(t)){const e=this._getPageIndex(t);s&&void 0!==e&&($.Z.setPinned(sa.List.of(s),!0),$.Z.moveToIndex(s,e))}else if(this._isInStackFolder(t)){const e=this._getPageByNode(t),i=this._getStackFolderByNode(t);if(e&&i){const t=this._getChildren(i).map((e=>e.pageItem?.page)).filter(Boolean);t.splice(n.index,0,s),$.Z.createTabStack((0,sa.List)(t.filter(Boolean)),this._getPageIndex(i),e.getIn(["extData","group"]))}}}this.blockPageStoreChange=!1,this._onPageStoreChanged(),this.refTreeList.current?.expandToId(e.toString()),this.refTreeList.current?.selectById(e.toString())})).catch((e=>{console.warn(e)}))})),_4(this,"_cloneTab",(()=>{const e=this.getSelectedItems().map((e=>e.pageItem?.page)).filter(Boolean);$.Z.clonePages((0,sa.List)(e))})),_4(this,"_pinTab",(()=>{const e=this.getSelectedItems().filter((e=>!this._isInStackFolder(e))).map((e=>e.pageItem?.page)).filter(Boolean).filter((e=>!e.pinned));$.Z.setPinned((0,sa.List)(e),!0)})),_4(this,"_unpinTab",(()=>{const e=this.getSelectedItems().map((e=>e.pageItem?.page)).filter(Boolean).filter((e=>e.pinned));$.Z.setPinned((0,sa.List)(e),!1)})),_4(this,"_closeWithId",((e,t)=>{t&&(0,Rx.Z)(t);const n=this._getNodeById(e);if(n)if("tab"===n.type)this.refTreeList.current?.onDeleteItems([n.id]);else if("stack"===n.type){const e=this._getPageIdByNode(n);"number"==typeof e&&$.Z.closeTabStack(e)}})),_4(this,"_close",(()=>{const e=this.getSelectedItems().filter((e=>"stack"===e.type)),t=e.map((e=>this._getChildren(e))).filter(Boolean).reduce(((e,t)=>e.concat(t)),[]),n=this.getSelectedItems().filter((e=>Boolean(e.pageItem))).filter((e=>-1===t.findIndex((t=>t===e.id))));this.blockPageStoreChange=!0;let s=e.map((e=>this._getPageByNode(e))).filter(Boolean);s.forEach((e=>{$.Z.closeTabStack(e.id)})),s=n.map((e=>e.pageItem?.page)).filter(Boolean).filter((e=>!e.pinned)),$.Z.closePage((0,sa.List)(s)),this.blockPageStoreChange=!1,this._onPageStoreChanged()})),_4(this,"_reopen",(()=>{const e=this.getSelectedItems().filter((e=>Boolean(e.trashItem))),t=e.filter((e=>Boolean(e.trashItem?.window))),n=t.map((e=>window.trashitem?.window.children)).filter(Boolean).reduce(((e,t)=>e.concat(t)),[]),s=e.filter((e=>-1===n.findIndex((t=>t===e.id))));t.forEach((e=>{e.trashItem?.window&&o0.Z.undeleteWindow(e.trashItem.window.handle)})),s.forEach((e=>{e.trashItem?.tab&&o0.Z.undeleteTab(e.trashItem.tab.handle)}))})),_4(this,"_createTabStack",(()=>{this._createTabStackWithNodes(this._getStackableSelectedNodes())})),_4(this,"_createTabStackForHost",((e,t)=>{const n=this._createTabStackWithNodes(t);n&&g4(n,e)})),_4(this,"_createTabStackWithNodes",(e=>{if(e.length<2)return;let t=-1;for(let n=0;n<e.length;n++){let s=e[n];if(this._isInStackFolder(s)&&(s=this._getNodeById(s.parentId)),!s)return;{const e=this._getPageIndex(s);(-1===t||t>e)&&(t=e)}}const n=e.map((e=>e.pageItem?.page)).filter(Boolean);if(n.length<2)return;const s=V.ZP.getNewGroupId();return $.Z.createTabStack((0,sa.List)(n),-1===t?0:t,s),this.refTreeList.current?.selectById(s),s})),_4(this,"_disolveTabStack",(()=>{const e=this.getSelectedItems(),t=e.filter((e=>"stack"===e.type)),n=t.map((e=>this._getPageByNode(e))).filter(Boolean);n.forEach((e=>{$.Z.expandTabStack(e.getIn(["extData","group"]))})),n.length>0&&e.length===t.length&&this.refTreeList.current?.selectById(n[0].id.toString())})),_4(this,"_hibernate",(()=>{this._getDiscardablePages().forEach((e=>{$.Z.discardPage(e)}))})),_4(this,"_reopenLastClosedTab",(()=>{o0.Z.undeletePreviousTab()})),_4(this,"_validateForEdit",(e=>{const t=this._getNodeById(e);return!!t&&V.ZP.isGroup(e,t.wid)})),_4(this,"_getTitle",(e=>this._getNodeById(e)?.title||"")),_4(this,"_getMenuCapability",(async(e,t,n)=>{const s=n?n.wid:this.context.vivaldiWindowId,i=n?.pageItem?.page,r="tab"===n?.type,a=r||"stack"===n?.type,o=a||"window"===n?.type,l=n&&this._isInTrashFolder(n),c={hostname:i?(0,b4.q)(i):"",selectedCount:this._getStackableSelectedNodes().length};switch(e.action){case"CONTEXT_NEW":return{handler:()=>{n?this._newTabAfter(n.id):this.newTab(s)},visible:!n||!l,...t(e,c)};case"CONTEXT_NEW_STACK":return{handler:()=>{this._createTabStack()},visible:a&&c.selectedCount>1,...t(e,c)};case"CONTEXT_NEW_STACK_FOR_HOST":const u=n?this._getNodeById(n.id)?.pageItem:void 0,m=u?.hostname||"",d=n&&u?this._getStackableNodesForHost(n.wid,u):[];return{handler:()=>this._createTabStackForHost(m,d),visible:r&&m.length>0&&1===this.getSelectedItems().length&&d.length>1,...t(e,c)};case"CONTEXT_TABSTACK_UNGROUP":return{handler:()=>{this._disolveTabStack()},visible:"stack"===n?.type,...t(e,c)};case"CONTEXT_CLONE":return{handler:()=>{this._cloneTab()},visible:r&&!l,...t(e,c)};case"CONTEXT_RELOAD":return{handler:()=>{this._reload()},visible:o&&!l,...t(e,c)};case"CONTEXT_HIBERNATE_TAB":return{handler:()=>{this._hibernate()},visible:o&&!l&&this._getDiscardablePages().length>0,...t(e,c)};case"CONTEXT_PIN":return{handler:()=>{this._pinTab()},visible:Boolean(i&&!i.pinned&&!l&&!i.getIn(["extData","group"])),...t(e,c)};case"CONTEXT_UNPIN":return{handler:()=>{this._unpinTab()},visible:Boolean(i?.pinned)&&!l,...t(e,c)};case"CONTEXT_TILE_TABS":return{handler:()=>{this._tile()},visible:a&&this._getTileableSelectedNodes().length>1,...t(e,c)};case"CONTEXT_UNTILE_TABS":return{handler:()=>{this._removeTile()},visible:a&&this._getSelectedTilingItems().length>0,...t(e,c)};case"CONTEXT_MUTE":return{handler:()=>{n&&this._setMediaState("muting",n)},visible:o&&!l&&this._getMuteableNodesFrom("selection").length>0,...t(e,c)};case"CONTEXT_MUTE_OTHER":{const s="window"===n?.type&&Boolean(n.wid!==this.context.vivaldiWindowId);return{handler:()=>{n&&this._muteOthers(n)},visible:(a||s)&&n&&this._getMuteableNodesFrom("all").filter((e=>e.id!==n.id)).length>0,...t(e,c)}}case"CONTEXT_UNMUTE":return{handler:()=>{n&&this._setMediaState("playing",n)},visible:o&&n&&this._getPlayableNodesFrom("selection",n).length>0,...t(e,c)};case"CONTEXT_EMPTY_TRASH":return{handler:()=>{o0.Z.emptyTrash()},visible:Boolean(n&&this._isTrashFolder(n)&&u4.Z.getTrash().length>0),...t(e,c)};case"CONTEXT_REOPEN":return{handler:()=>{n?this._reopen():this._reopenLastClosedTab()},visible:Boolean((!n||n.trashItem)&&u4.Z.getTrash().length>0),...t(e,c)};default:return{...t(e,{})}}})),_4(this,"_getMenuVisibility",((e,t)=>{if(t)if(this._isTrashFolder(t))switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}else{const n=this._isValidToDelete([t.id]).length>0,s=!this._isInTrashFolder(t)&&!W.ZP.isGuestSession(this.context.vivaldiWindowId);switch(e.action){case"CONTEXT_RENAME":return this._validateForEdit(t.id)&&1===this.getSelectedItems().length;case"CONTEXT_COPY":return Boolean(t.pageItem?.url||t.trashItem?.tab?.url);case"CONTEXT_SAVE":case"CONTEXT_SAVE_ALL":case"CONTEXT_EXPORT_ALL":return s;case"CONTEXT_EXPORT":return s&&this.getSelectedItems().length>0;case"CONTEXT_DELETE":return n;case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}}else switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}})),_4(this,"onContextMenu",(e=>{this.refTreeList.current?.onContextMenu(e)})),_4(this,"_handleMouseEnter",(e=>{e&&X.Z.setStatus(Pt.jk.getHoverUrl(e))})),_4(this,"_handleMouseLeave",(()=>{X.Z.clearStatus()})),_4(this,"getRowComponentProps",(e=>({...e,showBadge:this.props.prefValues[P.kPanelsShowFolderBadge]}))),_4(this,"rowComponent",(e=>{const t=e.node,n=16*(t.level+1)+"px",i=16*t.level+"px",r=this._isInPinnedFolder(t)&&!this.props.prefValues[P.kPanelsWindowShowPinnedGroup],a=this._isUnread(t),o=Boolean(t.pageItem?.discarded)&&this.props.prefValues[P.kTabsDimHibernated],l=this.props.prefValues[P.kTabsShowCloseButton]&&!this._isInPinnedFolder(t)&&!this._isInTrashFolder(t)&&"window"!==t.type,c=t.pageItem?.page&&Qq.getState().get(t.pageItem.page.id)||(0,sa.Set)(),u=0===c.size||o;let m=0;this._hasChildren(t)&&(m="window"===t.type?V.ZP.getPages(t.wid).size:this._getChildren(t).length);const d=t.pageItem?.faviconUrl||t.trashItem?.tab?.faviconUrl||"";return[s.createElement("label",{key:"window__panel__"+t.id,onMouseEnter:()=>this._handleMouseEnter(t.pageItem?.url||t.trashItem?.tab?.url),onMouseLeave:this._handleMouseLeave,title:t.url,__source:{fileName:f4,lineNumber:1938,columnNumber:7}},this._hasChildren(t)&&s.createElement("span",{className:"expand-icon",style:{marginLeft:i},onClick:Rx.Z,onMouseDown:Rx.Z,onMouseUp:e=>this._handleExpandClick(e,t.id),dangerouslySetInnerHTML:{__html:cn.nfH},__source:{fileName:f4,lineNumber:1945,columnNumber:11}}),!u&&!this._isFolder(t)&&s.createElement("span",{className:"tab-audio",style:this._isFolder(t)?null:{marginLeft:i},onClick:()=>this._setMediaState(c.has("muting")?"playing":"muting",t),__source:{fileName:f4,lineNumber:1954,columnNumber:11}},c.has("capturing")?s.createElement("span",{className:"audioicon",dangerouslySetInnerHTML:{__html:cn.MjM},__source:{fileName:f4,lineNumber:1963,columnNumber:17}}):s.createElement(P0,{animated:this.props.prefValues[P.kThemeUseAnimation],mediaState:c,location:e.isSelected?"treeSelected":"tree",__source:{fileName:f4,lineNumber:1966,columnNumber:17}})),this._isFolder(t)&&s.createElement(h4,{trash:this._isTrashFolder(t),stack:"stack"===t.type,pinnedFolder:this._isPinnedFolder(t),leftMargin:this._hasChildren(t)?0:n,__source:{fileName:f4,lineNumber:1979,columnNumber:11}}),!this._isFolder(t)&&!r&&s.createElement(s.Fragment,null,d.startsWith("<svg")?s.createElement("span",{className:"svg-icon",style:u?{marginLeft:n}:null,dangerouslySetInnerHTML:{__html:d},__source:{fileName:f4,lineNumber:1989,columnNumber:17}}):s.createElement("img",{src:d,className:bn()({discarded:o}),style:u?{marginLeft:n}:null,width:"16",height:"16",alt:"",__source:{fileName:f4,lineNumber:1996,columnNumber:17}})),r&&s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"pinned-icon",style:u?{marginLeft:n}:null,__source:{fileName:f4,lineNumber:2011,columnNumber:11}},s.createElement("g",{transform:"translate(2, 2)",__source:{fileName:f4,lineNumber:2016,columnNumber:13}},s.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:f4,lineNumber:2017,columnNumber:15}}),s.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:f4,lineNumber:2018,columnNumber:15}}))),void 0!==e.inlineEditText&&s.createElement("input",{type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:f4,lineNumber:2024,columnNumber:11}}),void 0===e.inlineEditText&&s.createElement("span",{className:bn()({title:!0,active:t.pageItem?.active,unread:a}),__source:{fileName:f4,lineNumber:2034,columnNumber:11}},t.title),e.showBadge&&this._hasChildren(t)&&s.createElement("span",{className:"item-count",__source:{fileName:f4,lineNumber:2046,columnNumber:11}},m),l&&s.createElement("span",{className:"close",title:(0,ue.Z)("Close"),tabIndex:"-1",onClick:()=>this._closeWithId(t.id),dangerouslySetInnerHTML:{__html:cn.vyJ},__source:{fileName:f4,lineNumber:2052,columnNumber:11}}))]})),_4(this,"menu",{name:"windowlist",getCapability:this._getMenuCapability,getVisibility:this._getMenuVisibility})}componentDidMount(){V.ZP.addChangeListener(this._onPageStoreChanged),u4.Z.addChangeListener(this._onTrashStoreChanged),this._onFilterChange(this.props.filter,qo.default)}componentWillUnmount(){V.ZP.removeChangeListener(this._onPageStoreChanged),u4.Z.removeChangeListener(this._onTrashStoreChanged)}componentDidUpdate(e){if(this.props.filter!==e.filter){const t=this.props.filter.length,n=e.filter.length;0===n&&t>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this._onFilterChange(this.props.filter,(e=>{t>0?N4.nextTick((()=>{this.refTreeList.current?.expandAllExcept(e)})):n>0&&0===t&&N4.nextTick((()=>{this.refTreeList.current?.expandWithModel(this.expandModel)}))}))}else(this.props.prefValues[P.kThemeUseAnimation]!==e.prefValues[P.kThemeUseAnimation]||this.props.prefValues[P.kTabsStackingMode]!==e.prefValues[P.kTabsStackingMode]||this.props.prefValues[P.kTabsUnread]!==e.prefValues[P.kTabsUnread]||this.props.prefValues[P.kTabsStackingNameMap]!==e.prefValues[P.kTabsStackingNameMap]||this.props.prefValues[P.kPanelsWindowShowPinnedGroup]!==e.prefValues[P.kPanelsWindowShowPinnedGroup]||this.props.sorting!==e.sorting&&"manually"===this.props.sorting.sortField)&&N4.nextTick((()=>{const e="off"===this.props.prefValues[P.kTabsStackingMode];this.setState({nodes:this._getNodes(e)})}))}render(){const e=this.state.nodes[0];return e&&this._getChildren(e).find((e=>"tab"===e.type||"stack"===e.type||"pinned"===e.type&&this._getChildren(e).length>0))?s.createElement(Sg,{ref:this.refTreeList,settings:"WINDOWS_PANEL",rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,defaultFolderExpansion:"fallback",hasChildren:this._hasChildren,isFolder:this._isFolder,supportsInlineEdit:!0,isValidToEdit:this._validateForEdit,getTitle:this._getTitle,saveTitle:g4,onItemClick:this._onNodeClick,onItemDoubleClick:this._onNodeDoubleClick,onItemMouseDown:this._onNodeMouseDown,onItemMouseUp:this._onNodeMouseUp,onItemsActivated:this._onNodesActivated,delete:this._closeByIds,onExport:this._saveSessionByIds,onSave:this._saveBookmarkByIds,onDrop:this._onDrop,onMove:this._onMove,onCopy:this._onCopy,isValidForClipboard:this._isValidForClipboard,validateForDeletion:this._isValidToDelete,menu:this.menu,mimeType:w4,validateForDrag:this._validateForDrag,getDropSupport:this._getDropSupport,getTargetSpec:this._getTargetSpec,getDragData:this._getDragData,setCustomDragData:this._setCustomDragData,supportsDeepCopy:!1,sorting:this.props.sorting,__source:{fileName:f4,lineNumber:2084,columnNumber:7}}):this.props.filter?s.createElement("p",{__source:{fileName:f4,lineNumber:2080,columnNumber:34}},(0,ue.Z)("Nothing found")):null}}_4(y4,"contextType",Vs.Z);const S4=(0,bi.Z)(y4,v4);var T4=n(34155),k4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowPanel.jsx";function I4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A4=[{text:"",value:"title",fullScreenTitle:(0,ue.Z)("Sort by Title")},{text:"",value:"pageItem.hostname",fullScreenTitle:(0,ue.Z)("Sort by Host")},{text:"",value:"pageItem.domain",fullScreenTitle:(0,ue.Z)("Sort by Domain")},{text:"",value:"sound",fullScreenTitle:(0,ue.Z)("Sort by Audio Status")}],Z4=[P.kKeyboardTabToAll,P.kPanelsWindowSorting];class P4 extends s.PureComponent{constructor(e){super(e),I4(this,"refTree",s.createRef()),I4(this,"onPanelStoreChange",(e=>{this.props.open&&"setFocus"===e&&!si(pn.findDOMNode(this))&&this.focusTree()})),I4(this,"onSortChange",((e,t)=>{this.setState((n=>({sorting:{sortOrder:e,sortField:t,comparator:n.sorting.comparator}}))),st.Z.set(P.kPanelsWindowSorting,{sortOrder:e,sortField:t})})),I4(this,"sortComparator",((e,t)=>{if("trash"===e.type)return 1;if("trash"===t.type)return-1;if("pinned"===e.type)return-1;if("pinned"===t.type)return 1;if("stack"===e.type&&"stack"!==t.type)return-1;if("stack"===t.type&&"stack"!==e.type)return 1;const{sortOrder:n,sortField:s}=this.state.sorting;if("sound"===s)return this.sortForSound(e,t,n);return ti.Z.getDefaultComparator(n,s)(e,t)})),I4(this,"sortForSound",((e,t,n)=>{if(n<=ti.Z.NO_SORTING)return 0;let s="";if(e.pageItem){const{page:t}=e.pageItem;t.discarded||(Qq.hasMediaState(t.id,"playing")||Qq.hasMediaState(t.id,"muting"))&&(s="playing")}let i="";if(t.pageItem){const{page:e}=t.pageItem;e.discarded||(Qq.hasMediaState(e.id,"playing")||Qq.hasMediaState(e.id,"muting"))&&(i="playing")}if("playing"===s)return-1;if("playing"===i)return 1;return ti.Z.getDefaultComparator(n,"title")(e,t)})),I4(this,"focusTree",(()=>{this.refTree.current?.focusTree()})),I4(this,"handleFilterChange",(e=>{const t=e.target.value;this.setState({filter:t})})),I4(this,"onContextMenu",(e=>{this.refTree.current?.onContextMenu(e)})),I4(this,"onAddTab",(e=>{this.refTree.current?.newTab(this.context.vivaldiWindowId)})),I4(this,"onAddWindow",(e=>{W.ZP.isGuestSession(this.context.vivaldiWindowId)?$.Z.openIncognitoWindow():$.Z.openBrowserWindow(this.context.vivaldiWindowId)}));const t=this.props.prefValues[P.kPanelsWindowSorting];this.state={filter:"",sorting:{sortOrder:t.sortOrder,sortField:t.sortField,comparator:this.sortComparator}}}componentDidMount(){re.ZP.addChangeListener(this.onPanelStoreChange)}componentWillUnmount(){re.ZP.removeChangeListener(this.onPanelStoreChange)}componentDidUpdate(e,t){!e.open&&this.props.open&&T4.nextTick((()=>this.focusTree()))}render(){if(!this.props.open)return null;const e=W.ZP.isGuestSession(this.context.vivaldiWindowId);return s.createElement("div",{className:"panel",id:"window-panel",__source:{fileName:k4,lineNumber:228,columnNumber:5}},s.createElement("header",{__source:{fileName:k4,lineNumber:230,columnNumber:7}},s.createElement("h1",{__source:{fileName:k4,lineNumber:231,columnNumber:9}},this.props.title),s.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:k4,lineNumber:233,columnNumber:9}},s.createElement("input",{ref:"refSearch",type:"search",className:"tabsearch",placeholder:(0,ue.Z)("verb","Search"),value:this.state.filter,onChange:this.handleFilterChange,__source:{fileName:k4,lineNumber:234,columnNumber:11}}),s.createElement("div",{className:"toolbar-group",__source:{fileName:k4,lineNumber:241,columnNumber:11}},s.createElement(ko,{tooltip:(0,ue.Z)("command","New Tab"),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.onAddTab,image:cn.md4.small,__source:{fileName:k4,lineNumber:242,columnNumber:13}}),s.createElement(ko,{tooltip:e?(0,ue.Z)("action","New Private Window"):(0,ue.Z)("action","New Window"),tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.onAddWindow,image:cn.NxY.small,__source:{fileName:k4,lineNumber:248,columnNumber:13}})))),s.createElement(RN,{fields:A4,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:k4,lineNumber:258,columnNumber:7}}),s.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:k4,lineNumber:265,columnNumber:7}},s.createElement(S4,{ref:this.refTree,sorting:this.state.sorting,filter:this.state.filter,__source:{fileName:k4,lineNumber:267,columnNumber:9}})))}}I4(P4,"contextType",Vs.Z);const D4=(0,bi.Z)(P4,Z4),M4=["mail.google.com"];function O4(e,t,n=999){if(!e||!t)return"";const s=M4.some((e=>t.includes(e)))?e.match(/[\(\[\{](\d+)[\}\]\)]/):e.match(/^\((\d+)\D*?\)/);if(!s?.[1])return"";const i=parseInt(s[1]);return i<=0?"":i>n?"+":s[1]}var x4=n(74699),L4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\panel.jsx";function R4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B4(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,F4(e,t,"set"),n),n}function F4(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const U4="vivaldi/x-panel-item-reg",V4="vivaldi/x-panel-item-web";function H4(){return{selectedPanel:re.ZP.getSelectedPanel(),panelWidth:re.ZP.getPanelWidth(),panelButtonsVisible:re.ZP.getPanelButtonsVisible(),panelContentVisible:re.ZP.getPanelContentVisible(),focusContent:re.ZP.getFocusContent(),isMailWindow:re.ZP.getIsMailWindow(),regPanels:re.ZP.getRegPanels(),webPanels:re.ZP.getWebPanels(),regPanelOrder:re.ZP.getRegPanelOrder(),webPanelOrder:re.ZP.getWebPanelOrder()}}function W4(e,t){const n=e.faviconUrl?e.faviconUrl:e.url;return{id:e.id,title:e.title,faviconUrl:n,faviconUrlValid:!1!==e.faviconUrlValid,hasBeenActive:t}}function z4(){const e=H4(),t=G4(e),n=[];return e.webPanels.forEach((s=>{const i=s.id===e.selectedPanel&&!t;n.push(W4(s,i))})),e.webPanelData=n,e}function G4(e){const t=(e.panelToggleVisible?re.fG:0)+(e.panelButtonsVisible?re.Pv:0);return e.panelWidth<=t}const K4=[P.kKeyboardTabToAll,P.kPanelsAsOverlayAutoClose,P.kPanelsAsOverlayEnabled,P.kPanelsLazyLoad,P.kPanelsWindowShowUnread,P.kTabsCounterDetection,P.kTabsBarPosition,P.kThemeUseAnimation,P.kPanelsWebRemovedItems,P.kPanelsWebToolbar];var j4=new WeakMap;class Y4 extends s.PureComponent{constructor(...e){super(...e),R4(this,"state",{remainingTimers:new Map,isResizing:!1,chatItems:0,downloadItems:0,downloadProgress:0,dropId:"",dropPosition:"",panelToggleVisible:W.ZP.getVisibleUI(this.context.vivaldiWindowId).panelToggle,theme:Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)||no.Z.getDefaultTheme(),unreadPages:0,webPanelData:[],minimized:re.ZP.getPanelButtonsVisible()&&!re.ZP.getPanelContentVisible()?"buttons":"auto",...z4()}),R4(this,"alarmIntervalId",null),R4(this,"alarms",[]),R4(this,"blockNextBlur",!1),j4.set(this,{writable:!0,value:void 0}),R4(this,"delayTimeout",null),R4(this,"dndTimerId",null),R4(this,"dropMode",{support:!1,copy:!1}),R4(this,"panelResource",{bookmarks:{title:(0,ue.Z)("Bookmarks"),panel:v2,available:!W.ZP.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://bookmarks",icon:cn.CLf,iconFilled:cn.hYC,...(0,Mn.Z)("Bookmarks")},mail:{title:(0,ue.Z)("Mail (beta)"),panel:d5,available:()=>!W.ZP.isGuestSession(this.context.vivaldiWindowId)&&!A.ZP.get(P.kMailIsTurnedOff),url:"",icon:cn.lvj,iconFilled:cn.JJT,...(0,Mn.Z)("Mail (beta)")},feeds:{title:(0,ue.Z)("Feeds (beta)"),panel:d5,available:()=>!W.ZP.isGuestSession(this.context.vivaldiWindowId)&&!A.ZP.get(P.kMailIsTurnedOff),url:"",icon:cn.ZU_,iconFilled:cn.fkD,...(0,Mn.Z)("Feeds (beta)")},contacts:{title:(0,ue.Z)("Contacts (beta)"),panel:o3,available:()=>!W.ZP.isGuestSession(this.context.vivaldiWindowId)&&!A.ZP.get(P.kMailIsTurnedOff),url:"",icon:cn.LaO,iconFilled:cn.wp6,...(0,Mn.Z)("Contacts (beta)")},downloads:{title:(0,ue.Z)("Downloads"),panel:XN,available:!0,url:"",icon:cn.izi,iconFilled:cn.zAT,...(0,Mn.Z)("Downloads")},notes:{title:(0,ue.Z)("Notes"),panel:R5,available:!W.ZP.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://notes",icon:cn.cyI,iconFilled:cn.P3X,...(0,Mn.Z)("Notes")},history:{title:(0,ue.Z)("History"),panel:d3,available:!W.ZP.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://history",icon:cn.hcy,iconFilled:cn.ZU6,...(0,Mn.Z)("History")},tabs:{title:(0,ue.Z)("title","Window"),panel:D4,available:!0,url:"",icon:cn.NxY,iconFilled:cn.cMC,...(0,Mn.Z)("title","Window")},calendar:{title:(0,ue.Z)("Calendar (beta)"),panel:P2,available:()=>!W.ZP.isGuestSession(this.context.vivaldiWindowId)&&!A.ZP.get(P.kMailIsTurnedOff),url:"vivaldi://calendar",icon:cn.bcq,iconFilled:cn.Xgf,...(0,Mn.Z)("Calendar (beta)")},chat:{title:(0,ue.Z)("Chat"),panel:x2,available:!W.ZP.isGuestSession(this.context.vivaldiWindowId),url:"",icon:cn.yt5,iconFilled:cn.ySD,...(0,Mn.Z)("Chat")},translate:{title:(0,ue.Z)("Translate"),panel:t4,available:!W.ZP.isGuestSession(this.context.vivaldiWindowId),url:"",icon:cn.U_X,iconFilled:cn.U_X,...(0,Mn.Z)("Translate")}}),R4(this,"trackContextOnFocus",hJ("panel",this.context)),R4(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)||no.Z.getDefaultTheme();e!==this.state.theme&&this.setState({theme:e})})),R4(this,"_onStoreChange",(()=>{let e=H4();const t=e.webPanels.length===this.state.webPanelData.length&&this.state.selectedPanel===e.selectedPanel&&G4(this.state)===G4(e)?void 0:e.selectedPanel;this.setupWebPanelData(e.webPanels,t),e.panelWidth<=re.fG&&!e.panelContentVisible?e={...e,minimized:"auto"}:e.panelWidth<=re.Pv+re.fG&&!e.panelContentVisible&&(e={...e,minimized:"buttons"}),this.setState(e)})),R4(this,"_onPageStoreChange",(()=>{this.setState({unreadPages:V.ZP.getUnreadCount(this.context.vivaldiWindowId)})})),R4(this,"_onMessageReceived",((e,t,n)=>{if(e&&t.id===h.Z.runtime.id&&e.action===i4){const t=this.getWebPanelDataByUrl(e.panelUrl);t&&(this.setWebPanelValue(t.id,"title",e.title),this.refs[t.id].setTitle(e.title))}})),R4(this,"_onDownloadStoreChange",(()=>{this.setState({downloadItems:sN.Z.getTotalNumberOfDownloads(),downloadProgress:sN.Z.getTotalProgress()})})),R4(this,"_onChatReceived",(()=>{const e=Yw.getUnreadCount();this.setState({chatItems:e})})),R4(this,"_onWindowStoreChanged",(()=>{const e=W.ZP.getVisibleUI(this.context.vivaldiWindowId).panelToggle;this.state.panelToggleVisible!==e&&this.setState({panelToggleVisible:e,panelWidth:re.ZP.getPanelWidth()})})),R4(this,"_alarmsChanged",(e=>{const t=new Map(e?.filter((e=>"panel"===e?.from)).map((e=>{if(e?.id&&e?.remainingTime)return[e.id,e.remainingTime]})).filter(Boolean));t&&this.setState({remainingTimers:t})})),R4(this,"onCommandSpy",(()=>{si(pn.findDOMNode(this))||this.moveFocus("-1","current",!0)})),R4(this,"setSelected",(e=>{ie.Z.toggleContent(e)})),R4(this,"isWebPanelSelected",(()=>this.isWebPanel(this.state.selectedPanel))),R4(this,"isWebPanel",(e=>e&&re.ZP.getIsWebPanel(e))),R4(this,"handleDoubleClick",(()=>{this.props.prefValues[P.kPanelsAsOverlayEnabled]&&this.props.prefValues[P.kPanelsAsOverlayAutoClose]||this.handlePanelSwitch()})),R4(this,"getPanelUrl",(e=>{let t="";return this.isWebPanel(e)?t=Wi.Z.getUrlById(e):"format"!==e&&this.panelResource[e]&&(t=this.panelResource[e].url),t})),R4(this,"openInTab",((e,t,n)=>{const s=this.getPanelUrl(e);s&&$.Z.openURL(s,{inCurrent:t,inBackground:n})})),R4(this,"openInWindow",((e,t)=>{const n=this.getPanelUrl(e);n&&$.Z.openURL(n,{inNewWindow:!0,incognito:t})})),R4(this,"copyUrl",(e=>{const t=this.getPanelUrl(e);t&&al.Z.copyUrlToClipboard(t)})),R4(this,"setMobileMode",((e,t)=>{this.isWebPanel(e)&&Wi.Z.setMobileMode(e,t)})),R4(this,"getIsMobileMode",(e=>{if(this.isWebPanel(e)){const t=this.state.webPanels;for(let n=0;n<t.length;n++)if(t[n].id===e)return Boolean(t[n].mobileMode)}return!1})),R4(this,"handleClickOutside",(()=>{if(!this.state.panelContentVisible)return;this.autoClosePanel(0);const e=this.refs.focusContainer,{document:t}=this.context;e instanceof Element&&e.contains(t.activeElement)&&ie.Z.removeFocus()})),R4(this,"onSlidebarPosition",(0,vb.default)(((e,t)=>{const n=pn.findDOMNode(this.refs.panelsContainer);if(!(n instanceof Element))return;const s=n.getBoundingClientRect();let i;switch(this.props.position){case"left":i=Math.round(e-s.left);break;case"right":i=Math.round(s.right-e);break;default:throw new Error("Unknown tabbar position")}this.setState({panelWidth:this.limitPanelWidth(i)})}),64)),R4(this,"limitPanelWidth",(e=>{const t=re.Ej,n=.618*this.context.innerWidth;return Math.min(Math.max(e,t),n)||t})),R4(this,"handlePanelSwitch",(()=>{ie.Z.togglePanel()})),R4(this,"autoClosePanel",((e=600)=>{const t=re.ZP.getSeparateFloating(this.state.selectedPanel);(t||void 0===t&&this.props.prefValues[P.kPanelsAsOverlayEnabled])&&this.props.prefValues[P.kPanelsAsOverlayAutoClose]&&(this.cancelTimeout(),this.delayTimeout=setTimeout((()=>{this.state.panelContentVisible&&("buttons"===this.state.minimized?ie.Z.toggleContent(this.state.selectedPanel):ie.Z.togglePanel())}),e))})),R4(this,"cancelTimeout",(()=>{this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayTimeout=null})),R4(this,"onDialogOpen",(()=>{this.props.prefValues[P.kPanelsAsOverlayEnabled]&&this.props.prefValues[P.kPanelsAsOverlayAutoClose]&&this.state.panelContentVisible&&(this.blockNextBlur=!0)})),R4(this,"handleBlur",(e=>{this.blockNextBlur||e.target instanceof Element&&e.target.classList.contains("home")?(this.blockNextBlur=!1,this.cancelTimeout()):this.autoClosePanel()})),R4(this,"showPanelSettings",(()=>{se.Z.showSettings()})),R4(this,"getWebPanelDataById",(e=>this.state.webPanelData.find((t=>t.id===e)))),R4(this,"getWebPanelDataByUrl",(e=>this.state.webPanelData.find((t=>t.activeUrl===e)))),R4(this,"setupWebPanelData",((e,t)=>{if(this.state.webPanelData.length!==e.length||void 0!==t){const n=[];e.forEach((e=>{const s=this.getWebPanelDataById(e.id);if(s)!0!==s.hasBeenActive&&e.id===t&&(s.hasBeenActive=!0),n.push(s);else{const s=e.id===t;n.push(W4(e,s))}})),this.setState({webPanelData:n})}})),R4(this,"isPanelOpen",(e=>this.state.panelContentVisible&&this.state.selectedPanel===e)),R4(this,"isPanelAvailable",(e=>{let t=this.state.regPanels;for(let n=0;n<t.length;n++)if(t[n].id===e)return!1!==t[n].available;t=this.state.webPanels;for(let n=0;n<t.length;n++)if(t[n].id===e)return!1!==t[n].available;return!1})),R4(this,"setWebPanelValue",((e,t,n)=>{this.setupWebPanelData(this.state.webPanels,void 0);let s=-1;for(let i=0;i<this.state.webPanelData.length;i++){const r=this.state.webPanelData[i];if(r.id===e){"title"===t&&r.title!==n?s=i:"faviconUrl"!==t||r.faviconUrl===n&&!0===r.faviconUrlValid?"activeUrl"===t&&r.activeUrl!==n&&(s=i):s=i;break}}if(-1!==s){const i=[];for(let e=0;e<this.state.webPanelData.length;e++){const r=this.state.webPanelData[e];e===s&&("title"===t?r.title=n:"faviconUrl"===t?(r.faviconUrl=n,r.faviconUrlValid=!0):"activeUrl"===t&&(r.activeUrl=n)),i.push(r)}this.setState({webPanelData:i}),"title"===t?Wi.Z.setTitle(e,n):"faviconUrl"===t?Wi.Z.setFaviconUrl(e,n):"activeUrl"===t&&Wi.Z.setActiveUrl(e,n)}})),R4(this,"_getPanelInstanceById",(e=>{const t="panel-"+e;return this.refs[t]})),R4(this,"clearDndTimer",(()=>{this.dndTimerId&&clearTimeout(this.dndTimerId),this.dndTimerId=null})),R4(this,"onDragEnterBar",(e=>{if(e.preventDefault(),e.stopPropagation(),W.ZP.isGuestSession(this.context.vivaldiWindowId))this.dropMode={support:!1,copy:!1};else{const t={};t.support=e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===U4||e===V4)),t.copy=t.support&&!e.dataTransfer.types.some((e=>e===V4))&&!e.dataTransfer.types.some((e=>e===U4))&&!e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e)),this.dropMode=t}})),R4(this,"onDragOverBar",(e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?(this.clearDndTimer(),this.dropMode.copy||e.dataTransfer.types.some((e=>e===V4))?this.state.webPanelOrder.length>0&&this.setState((e=>({dropId:e.webPanelOrder[e.webPanelOrder.length-1],dropPosition:"below"}))):e.dataTransfer.types.some((e=>e===U4))&&this.state.regPanelOrder.length>0&&0===this.state.webPanelOrder.length&&this.setState((e=>({dropId:e.regPanelOrder[e.regPanelOrder.length-1],dropPosition:"below"}))),e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move"):e.dataTransfer.dropEffect="none"})),R4(this,"onDropBar",(e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=e.dataTransfer.getData(V4);t?ie.Z.move(t,this.state.dropId,this.state.dropPosition):en.ZP.getUrlsFromEventPromise(e,!0).then((e=>{e.forEach((e=>{Wi.Z.addByUrl(e.url)}))}))}this.setState({dropId:"",dropPosition:""})})),R4(this,"onDragStartButton",((e,t)=>{if(t.dataTransfer.effectAllowed="all",this.isWebPanel(e)){t.dataTransfer.setData(V4,[e]);const n=Wi.Z.getUrlById(e);n&&(t.dataTransfer.setData("text/uri-list",[n]),t.dataTransfer.setData("text/plain",[n]))}else t.dataTransfer.setData(U4,[e])})),R4(this,"onDragEnterButton",((e,t)=>{t.preventDefault(),t.stopPropagation();let n={};if(this.isWebPanel(e))n.support=t.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e||e===V4)),n.copy=n.support&&!t.dataTransfer.types.some((e=>e===V4||"vivaldi/x-tab-entries"===e));else{const s=this._getPanelInstanceById(e);s&&"function"==typeof s.onDragEnterPanelButton&&(n=s.onDragEnterPanelButton(t)),n.support||(n.support=t.dataTransfer.types.some((e=>e===U4)))}this.dropMode=n})),R4(this,"onDragLeave",(e=>{e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout((()=>{this.dndTimerId=null,this.setState({dropId:"",dropPosition:""})}),Q._p)})),R4(this,"onDragOverButton",((e,t)=>{if(t.preventDefault(),t.stopPropagation(),!1===this.dropMode.support)t.dataTransfer.dropEffect="none",this.setState({dropId:"",dropPosition:""});else{if(this.dropMode.onButton)return void(t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move");this.clearDndTimer(),t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move";const n=t.currentTarget;if(!(n instanceof Element))return;const s=n.getBoundingClientRect(),i=re.Pv,r=(t.clientY-s.top)/i;let a="";!1?a=r<=.25?"above":r>.75?"below":"on":r<=.5?a="above":r>.5&&(a="below"),this.state.dropId===e&&this.state.dropPosition===a||this.setState({dropId:e,dropPosition:a})}})),R4(this,"onDropButton",((e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropMode.support)if(this.dropMode.onButton){const n=this._getPanelInstanceById(e);n&&"function"==typeof n.onDropPanelButton&&n.onDropPanelButton(t)}else{const n=this.isWebPanel(e)?t.dataTransfer.getData(V4):t.dataTransfer.getData(U4);if(n)ie.Z.move(n,this.state.dropId,this.state.dropPosition);else{const n=this.state.dropPosition;en.ZP.getUrlsFromEventPromise(t,!0).then((t=>{if("on"===n)t.length>0&&Wi.Z.setUrl(e,t[0].url);else{let s=this.state.webPanelOrder.findIndex((t=>t===e));-1!==s&&"below"===n&&s++,Wi.Z.addByUrls(t.map((e=>e.url)),s)}}))}}this.setState({dropId:"",dropPosition:""})})),R4(this,"onDragButtonEnd",(e=>{this.setState({dropId:"",dropPosition:""})})),R4(this,"getRemovedWebPanelsMenuItems",(()=>{const e=this.props.prefValues[P.kPanelsWebRemovedItems].map(((e,t)=>({mnemonic:!1,handler:()=>Wi.Z.recoverWebPanel(t),...z.Z.makeLabelPair(e.title||e.url||(0,ue.Z)("Unknown Web Panel"))})));return e.length&&(e.push(z.Z.separatorItem),e.push({handler:Wi.Z.emptyTrash,...(0,Mn.Z)("panel","Clear All")})),e})),R4(this,"getPanelSelectorMenu",(e=>{const t=[];if("reg"===e&&this.state.regPanelOrder.forEach((e=>{if(re.ZP.canRenderInWindow(e)&&re.ZP.shouldShowPanel(e)){const n=this.panelResource[e];if(n){("function"==typeof n.available?n.available():n.available)&&t.push({handler:()=>this.handlePanelSelector(e),type:"checkbox",checked:this.isPanelAvailable(e),label:n.label,labelEnglish:n.labelEnglish})}}})),"web"===e){const e=this.state.webPanels;e&&e.length>0&&this.state.webPanelOrder.forEach(((n,s)=>{const i=e.filter((e=>e.id===n))[0];t.push({...z.Z.makeNumberMnemonic(i.title||i.url||(0,ue.Z)("Unknown Web Panel"),s),handler:this.handlePanelSelector.bind(this,i.id),type:"checkbox",checked:this.isPanelAvailable(i.id)})}))}return t})),R4(this,"getWebPanelContentMenu",(()=>{const e=this.props.prefValues[P.kPanelsWebToolbar];return[{handler:Wi.Z.setUIContent.bind(Wi.Z,{showToolbar:!0}),visible:!(!0===e.showToolbar),...(0,Mn.Z)("Show")},{handler:Wi.Z.setUIContent.bind(Wi.Z,{showToolbar:!1}),visible:Boolean(!0===e.showToolbar),...(0,Mn.Z)("other","Hide")},{handler:Wi.Z.setUIContent.bind(Wi.Z,{allControls:!e.allControls,showToolbar:e.showToolbar||!e.allControls}),type:"checkbox",checked:e.allControls,visible:Boolean(!0===e.showToolbar),...(0,Mn.Z)("Display All Controls")}]})),R4(this,"handlePanelSelector",(e=>{this.isPanelAvailable(e)?(this.isPanelOpen(e)&&(re.ZP.getAvailablePanelCount()>1?re.ZP.getLastAvailablePanel()===e?ie.Z.showNextPanel("previous"):ie.Z.showNextPanel("next"):ie.Z.setContentVisible(!1)),ie.Z.setAvailable(e,!1)):(ie.Z.setAvailable(e,!0),ie.Z.toggleContent(e))})),R4(this,"handlePanelButtonDown",(e=>{(0,uh.Mr)(e)||e.preventDefault()})),R4(this,"handlePanelButtonUp",((e,t)=>{t.button!==Nn.kCenter||0!==t.buttons||(0,uh.Mr)(t)||this.handlePanelButtonClick(e,t)})),R4(this,"handlePanelButtonClick",((e,t)=>{if(t.button===Nn.kCenter||t.button===Nn.kLeft&&(0,uh.S2)(t))if(this.isWebPanel(e))Wi.Z.openInTab(e,!1,!0);else switch(e){case"bookmarks":se.Z.showBookmarks();break;case"history":se.Z.showHistory();break;case"notes":se.Z.showNotes();break;case"calendar":se.Z.showCalendar();break;case"mail":this.setSelected(e),se.Z.showMail()}else(0,uh.Mr)(t)||this.setSelected(e);se.Z.setPaneFocus(!1)})),R4(this,"handleSliderDown",(()=>{this.setState({isResizing:!0})})),R4(this,"handleSliderUp",(()=>{this.setState({isResizing:!1}),ie.Z.setWidth(this.state.selectedPanel,this.state.panelWidth)})),R4(this,"handlePanelButtonKeyDown",((e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"left",!1);break;case"ArrowDown":this.moveFocus(e,"right",!1);break;case"Escape":this.leaveBar();break;default:return}t.preventDefault(),t.stopPropagation()})),R4(this,"moveFocus",((e,t,n)=>{if(!0===n||si(pn.findDOMNode(this))){const{document:n}=this.context,s=Array.from(n.querySelectorAll("button.panelbtn")).map((e=>e.getAttribute("data-id"))).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:s.indexOf(e);if(-1===t)return;e=s[t]}else if("left"===t||"right"===t){if(1===s.length)return;let n=s.indexOf(e);n="right"===t?n+1>=s.length?0:n+1:n<=0?s.length-1:n-1,e=s[n]}const i=n.querySelector(`button.panelbtn[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&i.focus()}})),R4(this,"leaveBar",(()=>{se.Z.setPaneFocus(!1),o.Z.executeActions("COMMAND_FOCUS_WEBVIEW")})),R4(this,"getPanelButtonTitleById",((e,t)=>"downloads"===e&&this.state.downloadItems>0?(0,ue.Z)("Downloads")+" "+(0,ue.Z)("($1 active transfer)","($1 active transfers)",[this.state.downloadItems]):t)),R4(this,"getPanelButtonClassById",((e,t,n)=>{const{downloadItems:s,dropId:i,dropPosition:r,panelContentVisible:a,selectedPanel:o}=this.state,l=e===i;return bn()({panelbtn:!0,uifocusstop:n,webviewbtn:t,[e.toString()]:!t,loading:!t&&"downloads"===e&&s>0,active:o===e&&a,dragoverAbove:l&&"above"===r,dragoverBelow:l&&"below"===r,dragoverInside:l&&"on"===r})})),R4(this,"getPanelButtonTabIndexById",(e=>this.state.selectedPanel===e?this.props.prefValues[P.kKeyboardTabToAll]:-1)),R4(this,"getButtonContextMenuItemsPromise",(e=>{const t="panelbaritem",n=Ss.getOptionFunction(t),s=this.isWebPanel(e);return Ss.getNamedMenu(t,(async t=>{switch(t.action){case"CONTAINER_PERIODIC_RELOAD":case"CONTEXT_CONTAINER_PERIODIC_TIMER":return{...n(t,{}),items:cl.Z.getMenu(e,"panel"),visible:s};case"CONTEXT_MENU_OPEN":return{visible:this.getPanelUrl(e).length>0,...n(t,{})};case"CONTEXT_OPEN_IN_TAB":case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this.openInTab(e,"CONTEXT_OPEN_IN_TAB"===t.action,!1),visible:this.getPanelUrl(e).length>0,...n(t,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this.openInTab(e,!1,!0),visible:this.getPanelUrl(e).length>0&&!A.ZP.get(P.kTabsOpenNewInBackground),...n(t,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":{const s=W.ZP.isGuestSession(this.context.vivaldiWindowId),i="CONTEXT_OPEN_IN_NEW_WINDOW"===t.action;return{handler:this.openInWindow.bind(this,e,!i),visible:this.getPanelUrl(e).length>0&&!(i&&s),...n(t,{})}}case"CONTEXT_COPY_ADDRESS":return{handler:this.copyUrl.bind(this,e),visible:this.getPanelUrl(e).length>0,...n(t,{})};case"CONTEXT_DESKTOP_VERSION":return{handler:this.setMobileMode.bind(this,e,!1),visible:s&&this.getIsMobileMode(e),...n(t,{})};case"CONTEXT_MOBILE_VERSION":return{handler:this.setMobileMode.bind(this,e,!0),visible:s&&!this.getIsMobileMode(e),...n(t,{})};case"CONTEXT_SEPARATE_WIDTH":return{handler:ie.Z.setPanelResizable.bind(ie.Z,e,!re.ZP.getResizableByPanel(e)),checked:!0===re.ZP.getResizableByPanel(e),...n(t,{})};case"CONTEXT_SEPARATE_FLOATING":return{handler:()=>ie.Z.setSeparateFloating(e),checked:Boolean(re.ZP.getSeparateFloating(e)),...n(t,{})};case"CONTEXT_CONTAINER_TOOLBAR":return{items:this.getWebPanelContentMenu(),visible:s,...n(t,{})};case"CONTEXT_REMOVE_WEB_PANEL":return{handler:Wi.Z.removeById.bind(this,e),visible:s,...n(t,{})};case"CONTEXT_CONTAINER_REG_PANELS":return{items:this.getPanelSelectorMenu("reg"),...n(t,{})};case"CONTEXT_CONTAINER_WEB_PANELS":return{items:this.getPanelSelectorMenu("web"),...n(t,{})};case"CONTEXT_CONTAINER_REMOVED_PANELS":{const e=this.getRemovedWebPanelsMenuItems();return{items:e,visible:e.length>0,...n(t,{})}}default:return{...n(t,{})}}}))})),R4(this,"onButtonContextMenu",((e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getButtonContextMenuItemsPromise(e).then((e=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)}))})),R4(this,"onBarContextMenu",((e,t)=>{const n=Ss.getOptionFunction(e);t.persist(),t.preventDefault(),t.stopPropagation(),Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_CONTAINER_REG_PANELS":return{items:this.getPanelSelectorMenu("reg"),...n(e,{})};case"CONTEXT_CONTAINER_WEB_PANELS":return{items:this.getPanelSelectorMenu("web"),...n(e,{})};case"CONTEXT_CONTAINER_REMOVED_PANELS":{const t=this.getRemovedWebPanelsMenuItems();return{items:t,visible:t.length>0,...n(e,{})}}default:return{...n(e,{})}}})).then((e=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)}))})),R4(this,"renderPanelButtonById",(e=>{if(this.isPanelAvailable(e)&&re.ZP.canRenderInWindow(e)&&re.ZP.shouldShowPanel(e)&&"format"!==e&&this.panelResource[e]){const t=this.panelResource[e],n=this.state.selectedPanel===e&&this.state.panelButtonsVisible,i=this.state.selectedPanel===e&&this.state.panelContentVisible?t.iconFilled.small:t.icon.small;return s.createElement("button",{key:"button_"+e,"data-id":e,title:this.getPanelButtonTitleById(e,t.title),className:this.getPanelButtonClassById(e,!1,n),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:this.onButtonContextMenu.bind(this,e),onMouseDown:this.handlePanelButtonDown,onMouseUp:this.handlePanelButtonUp.bind(this,e),onKeyDown:this.handlePanelButtonKeyDown.bind(this,e),onClick:this.handlePanelButtonClick.bind(this,e),onDrop:this.onDropButton.bind(this,e),onDragEnter:this.onDragEnterButton.bind(this,e),onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,e),onDragStart:this.onDragStartButton.bind(this,e),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:L4,lineNumber:1489,columnNumber:9}},s.createElement("span",{dangerouslySetInnerHTML:{__html:i},__source:{fileName:L4,lineNumber:1508,columnNumber:11}}),this.renderPanelButtonOverlayById(e))}return null})),R4(this,"renderPanelButtonOverlayById",(e=>{if("mail"===e)return s.createElement(rd,{theme:this.state.theme,__source:{fileName:L4,lineNumber:1518,columnNumber:14}});if("downloads"===e)return s.createElement("div",{className:"progress",__source:{fileName:L4,lineNumber:1521,columnNumber:9}},s.createElement("div",{className:"loaded",style:{width:100*this.state.downloadProgress+"%"},__source:{fileName:L4,lineNumber:1522,columnNumber:11}}));if("tabs"===e){if(this.props.prefValues[P.kPanelsWindowShowUnread]&&this.state.unreadPages>0)return s.createElement("span",{className:"button-badge",__source:{fileName:L4,lineNumber:1531,columnNumber:11}},this.state.unreadPages)}else if("chat"===e&&this.state.chatItems>0)return s.createElement("span",{className:"button-badge",__source:{fileName:L4,lineNumber:1539,columnNumber:11}},this.state.chatItems);return null})),R4(this,"renderAllPanelButtons",(()=>[...this.state.regPanelOrder.map(this.renderPanelButtonById),...this.state.webPanelOrder.map(this.renderWebPanelButtonById)])),R4(this,"renderAllPanels",(()=>{const e=[];this.state.regPanelOrder.forEach((t=>{if(this.isPanelAvailable(t)&&re.ZP.canRenderInWindow(t)){const n=this.panelResource[t];n?.panel&&e.push(s.createElement(IC,{key:"panel-"+t,__source:{fileName:L4,lineNumber:1563,columnNumber:13}},s.createElement(n.panel,{ref:"panel-"+t,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],title:n.title,panelId:t,open:this.isPanelOpen(t),onOpenDialog:this.onDialogOpen,__source:{fileName:L4,lineNumber:1564,columnNumber:15}})))}}));const t=this.state.webPanels;if(this.state.webPanelData.length===t.length){const n=[];this.state.webPanelOrder.forEach((e=>{const s=this.getWebPanelDataById(e),{prefValues:i}=this.props;if(!i[P.kPanelsLazyLoad]||s?.hasBeenActive){const s=t.find((t=>t.id===e&&t.available));s&&n.push(this.renderWebPanelById(s.id))}})),e.push(s.createElement("div",{key:"webpanelwrapper",className:this.isWebPanelSelected()?"webpanel-stack":"webpanel-stack hidden",__source:{fileName:L4,lineNumber:1598,columnNumber:9}},n))}return e})),R4(this,"renderWebPanelById",(e=>{const t=this.state.webPanels.filter((t=>t.id===e))[0],n=this.state.panelContentVisible&&this.state.selectedPanel===e;return s.createElement(c4,{key:e,ref:e,isVisible:n,focusContent:this.state.focusContent&&n,panelUI:this.props.prefValues[P.kPanelsWebToolbar],setWebPanelValue:this.setWebPanelValue,menuPromise:this.getButtonContextMenuItemsPromise,webPanel:t,__source:{fileName:L4,lineNumber:1616,columnNumber:7}})})),R4(this,"renderWebPanelButtonById",(e=>{if(!this.isPanelAvailable(e))return null;const t=this.state.webPanels.find((t=>t.id===e)),n=this.getWebPanelDataById(e),i=n?.title?`${n.title}\n${t.url}`:t.url,r=n?.faviconUrlValid?n.faviconUrl:"",a=r.startsWith("data:")?"faviconFromCache":"page",o=O4(i,t.activeUrl,9),l=this.state.selectedPanel===e&&this.state.panelButtonsVisible,c=this.state.remainingTimers.get(e);return s.createElement("button",{key:e,"data-id":e,title:i,className:this.getPanelButtonClassById(e,!0,l),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:t=>this.onButtonContextMenu(e,t),onMouseUp:t=>this.handlePanelButtonUp(e,t),onMouseDown:this.handlePanelButtonDown,onClick:t=>this.handlePanelButtonClick(e,t),onKeyDown:t=>this.handlePanelButtonKeyDown(e,t),onDrop:t=>this.onDropButton(e,t),onDragEnter:t=>this.onDragEnterButton(e,t),onDragLeave:this.onDragLeave,onDragOver:t=>this.onDragOverButton(e,t),onDragStart:t=>this.onDragStartButton(e,t),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:L4,lineNumber:1661,columnNumber:7}},s.createElement("span",{__source:{fileName:L4,lineNumber:1679,columnNumber:9}},s.createElement(Ls,{url:r,loadType:a,__source:{fileName:L4,lineNumber:1680,columnNumber:11}})),this.props.prefValues[P.kTabsCounterDetection]&&o&&s.createElement("span",{className:"button-badge",__source:{fileName:L4,lineNumber:1683,columnNumber:11}},o),c&&s.createElement(F5,{progress:c,__source:{fileName:L4,lineNumber:1687,columnNumber:27}}))}))}componentDidMount(){sN.Z.addChangeListener(this._onDownloadStoreChange),re.ZP.addChangeListener(this._onStoreChange),V.ZP.addChangeListener(this._onPageStoreChange),this.chatStoreToken=Yw.addListener(this._onChatReceived),B4(this,j4,Z.Z.addListener(this.onThemeStoreChanged)),this.windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged),h.Z.runtime.onMessage.addListener(this._onMessageReceived),Ys.Z.addListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy),H.Z.addChangeListener(this._alarmsChanged)}componentWillUnmount(){var e,t;sN.Z.removeChangeListener(this._onDownloadStoreChange),re.ZP.removeChangeListener(this._onStoreChange),V.ZP.removeChangeListener(this._onPageStoreChange),this.chatStoreToken.remove(),(e=this,t=j4,function(e,t){return t.get?t.get.call(e):t.value}(e,F4(e,t,"get"))).remove(),this.windowStoreToken.remove(),H.Z.removeChangeListener(this._alarmsChanged),h.Z.runtime.onMessage.removeListener(this._onMessageReceived),Ys.Z.removeListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy),this.clearDndTimer()}render(){const{panelButtonsVisible:e,panelContentVisible:t,panelWidth:n,isResizing:i}=this.state,r=this.props.prefValues,{position:a}=this.props,o=W.ZP.isGuestSession(this.context.vivaldiWindowId),l=(this.state.panelToggleVisible?re.fG:0)+(e?re.Pv:0),c=G4(this.state),u=r[P.kPanelsAsOverlayEnabled],m=re.ZP.getSeparateFloating(this.state.selectedPanel);let d=!1;d=void 0===m?u:m;const h=bn()({[a]:!0,button:this.state.panelToggleVisible,switcher:n<=re.fG,icons:e&&c,overlay:d,minimized:d&&"buttons"===this.state.minimized,resizing:i}),p="right"===a&&e||"left"===a&&!e?"0 0 0 8 4 4":"4 0 4 8 0 4",g=t?128:64,b=n-l,N=d&&r[P.kPanelsAsOverlayAutoClose]&&t,f=i?100:"left"===a?2:3,_="left"===a?n-f:-(n-l+f),v=bn()({preferences:!0,panelbtn:!0}),E=this.renderAllPanelButtons().filter((e=>null!==e));return s.createElement(x4.oh,{animation:{width:d?n-b:n},duration:r[P.kThemeUseAnimation]&&!i?g:0,begin:e=>e[0].style.removeProperty("display"),__source:{fileName:L4,lineNumber:1756,columnNumber:7}},s.createElement(gi.Z,{focusName:"focus_panel",id:"panels-container",ref:"panelsContainer",className:h,__source:{fileName:L4,lineNumber:1762,columnNumber:9}},s.createElement("div",{id:"panels",ref:"focusContainer",onBlur:N?this.handleBlur:null,onFocus:e=>{this.trackContextOnFocus(e),N&&this.cancelTimeout()},__source:{fileName:L4,lineNumber:1768,columnNumber:11}},this.state.panelToggleVisible&&s.createElement("div",{id:"panel_switch",title:e?(0,ue.Z)("Hide Panel"):(0,ue.Z)("verb","Show Panel"),onClick:this.handlePanelSwitch,__source:{fileName:L4,lineNumber:1777,columnNumber:15}},s.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"4px",height:"8px",viewBox:"0 0 4 8",__source:{fileName:L4,lineNumber:1783,columnNumber:17}},s.createElement("polygon",{points:p,__source:{fileName:L4,lineNumber:1789,columnNumber:19}}))),s.createElement("div",{id:"switch",className:"slim-scrollbar",onContextMenu:this.onBarContextMenu.bind(this,"panelbar"),onDragEnter:this.onDragEnterBar,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverBar,onDrop:this.onDropBar,__source:{fileName:L4,lineNumber:1793,columnNumber:13}},E,!o&&s.createElement(h2,{id:"addwebpanel",webPanels:this.state.webPanels,uiFocus:0===E.length,addNew:Wi.Z.addByUrl,moveFocus:this.moveFocus,leaveBar:this.leaveBar,rejectMimeType:V4,keyAccess:this.getPanelButtonTabIndexById(),__source:{fileName:L4,lineNumber:1805,columnNumber:17}}),!o&&s.createElement("button",{className:v,title:(0,ue.Z)("Settings"),"data-id":"preferences",tabIndex:r[P.kKeyboardTabToAll],onMouseDown:this.handlePanelButtonDown,onKeyDown:this.handlePanelButtonKeyDown.bind(this,"preferences"),onClick:this.showPanelSettings,__source:{fileName:L4,lineNumber:1816,columnNumber:17}},s.createElement("span",{dangerouslySetInnerHTML:{__html:cn.bqs.small},__source:{fileName:L4,lineNumber:1826,columnNumber:19}}))),this.state.selectedPanel&&s.createElement("div",{className:"panel-group",style:d?{width:c?0:n-l,[a]:l}:null,__source:{fileName:L4,lineNumber:1832,columnNumber:15}},s.createElement("div",{className:"panel-collapse-guard",style:{minWidth:i?"unset":b,maxWidth:i?"unset":b},__source:{fileName:L4,lineNumber:1838,columnNumber:17}},this.renderAllPanels()))),!c&&s.createElement(PN,{style:d?{left:_}:void 0,onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.handleDoubleClick,offset:1,position:a,__source:{fileName:L4,lineNumber:1849,columnNumber:13}})))}}R4(Y4,"contextType",Vs.Z);const $4=(0,bi.Z)((0,so.Z)(Y4),K4);class X4 extends(S()){constructor(){super(m.Z)}getInitialState(){return[]}reduce(e,t){switch(t.actionType){case"POPUPWINDOW_OPENED":return[...e,t.popupWindow];case"POPUPWINDOW_CLOSED":return(0,T.Uy)(e,(e=>{const{componentId:n}=t,s=e.findIndex((e=>e.identifier===n));-1!==s&&e.splice(s,1)}));default:return e}}}const Q4=new X4;var q4="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\RazerChromaInfoDialog.jsx";function J4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const e6=[P.kRazerChromaHasShownPromotion];class t6 extends s.Component{constructor(e){super(e),J4(this,"onClose",(()=>{st.Z.set(P.kRazerChromaHasShownPromotion,!0),this.props.onClose()})),J4(this,"openSettings",(()=>{se.Z.showSettings("themes"),this.onClose()}))}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,dialogWidth:400,viewMode:"slide",__source:{fileName:q4,lineNumber:42,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:q4,lineNumber:47,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:q4,lineNumber:48,columnNumber:11}},(0,ue.Z)("Razer Chroma device detected."))),s.createElement("div",{className:"dialog-content",__source:{fileName:q4,lineNumber:51,columnNumber:9}},s.createElement("p",{__source:{fileName:q4,lineNumber:52,columnNumber:11}},(0,ue.Z)("Vivaldi supports connected Razer Chroma devices. You can enable them with Vivaldi from the Themes section in settings."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:q4,lineNumber:57,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Go to Theme Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:q4,lineNumber:58,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Close"),onClick:this.onClose,__source:{fileName:q4,lineNumber:63,columnNumber:11}})))}}const n6=(0,bi.Z)(t6,e6);var s6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\saveSessionDialog.jsx";function i6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r6 extends s.Component{constructor(...e){super(...e),i6(this,"state",{shown:!0,name:"",invalidInput:!1,errorSaving:!1,saveOnlyCurrentWindow:!1}),i6(this,"_getSaveSelected",(()=>!!("selected"===this.props.options.mode&&this.props.options.ids&&this.props.options.ids.length>0))),i6(this,"_close",(()=>{this.state.shown&&this.setState((e=>({shown:!1})),(()=>this.props.onClose()))})),i6(this,"onSaveSession",(()=>{const e={saveOnlyWindowId:0};this._getSaveSelected()?(e.saveOnlyWindowId=this.context.vivaldiWindowId,e.ids=this.props.options.ids):!0===this.state.saveOnlyCurrentWindow&&(e.saveOnlyWindowId=this.context.vivaldiWindowId),b.Z.sessionsPrivate.saveOpenTabs(this.state.name,e,(e=>{0===e?this.props.onClose():this.setState({errorSaving:!0})}))})),i6(this,"isValidName",(e=>/^[^\\/:\*\?"<>\|]+$/.test(e)&&!/^\./.test(e)&&!/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i.test(e))),i6(this,"nameChange",(e=>{""===e.target.value||this.isValidName(e.target.value)?this.setState({name:e.target.value,invalidInput:!1}):this.setState({invalidInput:!0})})),i6(this,"_toggleSaveOnlyCurrentWindow",(()=>{this.setState((e=>({saveOnlyCurrentWindow:!e.saveOnlyCurrentWindow})))}))}render(){var e="";!0===this.state.invalidInput?e=(0,ue.Z)("Invalid character in the session name."):this.state.errorSaving&&(e=(0,ue.Z)("Error saving the session."));const t=this._getSaveSelected()?(0,ue.Z)("session","Save Selected Tabs as Session"):(0,ue.Z)("session","Save Open Tabs as Session");return s.createElement(ln.Z,{onRequestClose:this._close,__source:{fileName:s6,lineNumber:113,columnNumber:7}},s.createElement("div",{className:"save-session",__source:{fileName:s6,lineNumber:114,columnNumber:9}},s.createElement("header",{className:"dialog-header",__source:{fileName:s6,lineNumber:115,columnNumber:11}},s.createElement("h1",{className:"dialog-title",__source:{fileName:s6,lineNumber:116,columnNumber:13}},t)),s.createElement("form",{__source:{fileName:s6,lineNumber:118,columnNumber:11}},s.createElement("div",{className:"dialog-content session-dialog",__source:{fileName:s6,lineNumber:119,columnNumber:13}},s.createElement("input",{type:"text",ref:"inputName",placeholder:(0,ue.Z)("Session Name"),onChange:this.nameChange,spellCheck:"false",autoFocus:!0,__source:{fileName:s6,lineNumber:120,columnNumber:15}}),!this._getSaveSelected()&&s.createElement("label",{className:"dialog-checkbox",__source:{fileName:s6,lineNumber:129,columnNumber:17}},s.createElement("input",{type:"checkbox",checked:this.state.saveOnlyCurrentWindow,onChange:this._toggleSaveOnlyCurrentWindow,__source:{fileName:s6,lineNumber:130,columnNumber:19}}),s.createElement("span",{__source:{fileName:s6,lineNumber:133,columnNumber:19}},(0,ue.Z)("Save Only Tabs In Current Window"))),""!==e&&s.createElement("div",{className:"error-validation",__source:{fileName:s6,lineNumber:137,columnNumber:17}},e)),s.createElement("footer",{className:"dialog-footer",__source:{fileName:s6,lineNumber:142,columnNumber:13}},s.createElement("input",{type:"submit",className:"primary",onClick:this.onSaveSession,value:(0,ue.Z)("Save"),disabled:!0===this.state.invalidInput||""===this.state.name,__source:{fileName:s6,lineNumber:143,columnNumber:15}}),s.createElement("input",{type:"button",onClick:this._close,value:(0,ue.Z)("Cancel"),__source:{fileName:s6,lineNumber:151,columnNumber:15}})))))}}i6(r6,"contextType",Vs.Z);const a6=r6;var o6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultBrowserDlg.jsx";class l6 extends s.Component{constructor(...e){var t,n,s;super(...e),s=()=>{this.props.onClose()},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}render(){return s.createElement(ln.Z,{onRequestClose:qo.default,viewMode:"default-browser",__source:{fileName:o6,lineNumber:18,columnNumber:7}},s.createElement($B,{onClose:this.handleClick,__source:{fileName:o6,lineNumber:19,columnNumber:9}}))}}const c6=l6;var u6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\SyncWarningDialog.jsx";function m6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d6 extends s.Component{constructor(...e){super(...e),m6(this,"state",{visible:!1}),m6(this,"onSharedDataChanged",((e,t)=>{"syncErrorReport"===e&&"reported"===t&&this.setState({visible:!1})})),m6(this,"onStoreChange",(()=>{const e=Rh(Fh.getState()),t=Lh.getState().engineData;(t.isFirstSetupComplete||"disable_sync_on_client"===t.protocolErrorClientAction)&&("credentialsMissing"===e||"loginFailed"===e||t.needsDecryptionPassword||"failed"===t.engineState||"disable_sync_on_client"===t.protocolErrorClientAction?b.Z.utilities.getSharedData({key:"syncErrorReport",value:"canReport"},(e=>{"canReport"===e&&this.setState({visible:!0})})):"loggedIn"!==e||"started"!==t.engineState||t.needsDecryptionPassword||b.Z.utilities.setSharedData({key:"syncErrorReport",value:"canReport"}))})),m6(this,"onClose",(()=>{b.Z.utilities.setSharedData({key:"syncErrorReport",value:"reported"})})),m6(this,"openSettings",(()=>{se.Z.showSettings("sync"),this.onClose()}))}componentDidMount(){this.syncStoreToken=Lh.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=Fh.addListener(this.onStoreChange),b.Z.utilities.onSharedDataUpdated.addListener(this.onSharedDataChanged),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return this.state.visible?s.createElement(ln.Z,{onRequestClose:this.onClose,dialogWidth:400,viewMode:"slide",__source:{fileName:u6,lineNumber:88,columnNumber:7}},s.createElement("header",{className:"dialog-header",__source:{fileName:u6,lineNumber:93,columnNumber:9}},s.createElement("h1",{className:"dialog-title",__source:{fileName:u6,lineNumber:94,columnNumber:11}},(0,ue.Z)("Sync Disabled"))),s.createElement("div",{className:"dialog-content",__source:{fileName:u6,lineNumber:97,columnNumber:9}},s.createElement("p",{__source:{fileName:u6,lineNumber:98,columnNumber:11}},(0,ue.Z)("An issue caused Vivaldi Sync to stop working. You can find more details in the Sync Settings."))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:u6,lineNumber:103,columnNumber:9}},s.createElement("input",{type:"submit",value:(0,ue.Z)("Go to Sync Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:u6,lineNumber:104,columnNumber:11}}),s.createElement("input",{type:"button",value:(0,ue.Z)("Close"),onClick:this.onClose,__source:{fileName:u6,lineNumber:109,columnNumber:11}}))):null}}const h6=d6;var p6=n(20748);const g6=new class{openSyncedTab(e){h.Z.sessions.restore(e.sessionId,(t=>{h.Z.runtime.lastError&&console.warn("Error restoring tab: ",e,h.Z.runtime.lastError)}))}openSyncedWindow(e){h.Z.sessions.restore(e.sessionId,(t=>{h.Z.runtime.lastError&&console.warn("Error restoring page: ",e,h.Z.runtime.lastError.message)}))}load(){W.ZP.isIncognitoOrGuest()||h.Z.sessions.getDevices((e=>{m.Z.dispatch({actionType:Fi.Z.CHROME_SET_DEVICES,devices:e})}))}};b.Z.sync.onCycleCompleted.addListener(g6.load);const b6=g6,N6="change";let f6=[];const _6=new class extends(Bi()){getSyncedTabs(){return f6}emitChange(){this.emit(N6)}addChangeListener(e){this.on(N6,e)}removeChangeListener(e){this.removeListener(N6,e)}};m.Z.register((e=>{if(e.actionType===Fi.Z.CHROME_SET_DEVICES)t=e.devices,f6=t,_6.emitChange();var t}));const v6=_6;function E6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C6 extends s.PureComponent{constructor(...e){super(...e),E6(this,"state",{visible:!1,syncedTabs:v6.getSyncedTabs()}),E6(this,"onSyncedTabsStoreChange",(()=>{this.setState({syncedTabs:v6.getSyncedTabs()})})),E6(this,"onSyncStoreChange",(()=>{this.setState({visible:"started"===Lh.getState().engineData.engineState})})),E6(this,"openSyncedTab",(e=>{b6.openSyncedTab(e)})),E6(this,"openSyncedWindow",(e=>{b6.openSyncedWindow(e)})),E6(this,"trimTitle",(e=>(e.length>70&&(e=e.substring(0,70)+"..."),e))),E6(this,"getContextMenuItems",(()=>{const e=this.state.syncedTabs.reduce(((e,t)=>e.concat(t.sessions.map((e=>{const n=e.window;if(!n)return;const s=n.tabs||[];return{items:s.map((e=>({mnemonic:!1,url:e.url,handler:this.openSyncedTab.bind(this,e),...z.Z.makeLabelPair(this.trimTitle(e.title||""))}))).concat([z.Z.separatorItem,{handler:this.openSyncedWindow.bind(this,n),...(0,Mn.Z)("Open All")}]),...(0,Mn.Z)("Window with $1 Tab on $2","Window with $1 Tabs on $2",[s.length,t.deviceName])}})))),[]).filter(Boolean);return Promise.resolve(e)}))}componentDidMount(){v6.addChangeListener(this.onSyncedTabsStoreChange),this.onSyncedTabsStoreChange(),this.syncStoreToken=Lh.addListener(this.onSyncStoreChange),this.onSyncStoreChange()}componentWillUnmount(){v6.removeChangeListener(this.onSyncedTabsStoreChange),this.syncStoreToken.remove()}render(){return this.state.syncedTabs&&this.state.visible?s.createElement(ko,{className:"synced-tabs-button",menu:this.getContextMenuItems,menuOrigin:"bottomLeft",disabled:0===this.state.syncedTabs.length,tooltip:(0,ue.Z)("Synced Tabs"),image:cn.ssx.large,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\SyncedTabs.jsx",lineNumber:107,columnNumber:12}}):null}}const w6=C6;var y6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Arrow.jsx";const S6=function({isActive:e,orientation:t="right",onClick:n,style:i,title:r}){const a=["left","up"].includes(t)?"expanded":"closed";return s.createElement("div",{className:bn()("tab-position","accordion-toggle-arrow",a,{active:e}),style:i,onClick:n,title:r,__source:{fileName:y6,lineNumber:21,columnNumber:5}},s.createElement(jg,{type:"folder-arrow",className:t,__source:{fileName:y6,lineNumber:32,columnNumber:7}}))};function T6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class k6 extends s.PureComponent{constructor(...e){super(...e),T6(this,"_isHorizontal",(()=>"top"===this.props.tabPosition||"bottom"===this.props.tabPosition)),T6(this,"_handleKeyDown",(e=>{switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":if(this._isHorizontal()?"ArrowLeft"===e.key||"ArrowRight"===e.key:"ArrowUp"===e.key||"ArrowDown"===e.key){const t="ArrowLeft"===e.key||"ArrowUp"===e.key?"left":"right";this.props.onMoveFocus(this.props.id,t,!1)}break;case"Escape":this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()})),T6(this,"handleClick",(e=>{this.props.onCreateTab()}))}render(){return s.createElement(ko,{style:this.props.style,className:"newtab",onKeyDown:this._handleKeyDown,onClick:this.handleClick,tooltip:(0,ue.Z)("Open a New Tab"),image:cn.Wjz.large,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\NewTab.jsx",lineNumber:68,columnNumber:7}})}}const I6=k6;var A6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\LoadingFavicon.jsx";class Z6 extends s.PureComponent{render(){const{faviconUrl:e,progress:t,progressType:n}=this.props,i=Math.round(100*t),r=t<1,a=e.startsWith("<svg");return r&&"spinner"===n?s.createElement("span",{className:"favicon spinner",dangerouslySetInnerHTML:{__html:cn.H0I},__source:{fileName:A6,lineNumber:21,columnNumber:14}}):r&&"progress_icon"===n?s.createElement("span",{className:"favicon progress",style:{"--progressInPercent":i+"%"},__source:{fileName:A6,lineNumber:27,columnNumber:14}}):s.createElement("span",{className:"favicon jstest-favicon-image "+(a?"svg":""),__source:{fileName:A6,lineNumber:33,columnNumber:7}},s.createElement(Ls,{refFavicon:this.props.refFavicon,url:e,loadType:"faviconSkipCache",__source:{fileName:A6,lineNumber:34,columnNumber:9}}))}}const P6=Z6;function D6({onClick:e,onMouseDown:t}){const n=(0,ue.Z)("Close Tab")+"\n"+(0,ue.Z)("$1 click to close other tabs except this one",[(0,ue.Z)("key","Alt")]);return s.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:cn.kze},onClick:e,onAuxClick:e,onMouseDown:t,title:n,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabCloseButton.jsx",lineNumber:26,columnNumber:5}})}var M6=n(55570);class O6 extends(S()){constructor(){super(m.Z)}getInitialState(){return null}allHidden(){return null===this.getState()}getShowTooltip(e){return this.getState()===e}reduce(e,t){switch(t.actionType){case"URLFIELD_SET_STATE":return null;case Fi.Z.WEBPAGEVIEW_ACTIONS:if(["focusSearchField","focusAddressField"].indexOf(t.action)>-1)return null;break;case"TOOLTIP_SET":if(!di.Z.getState().isActive)return t.id}return e}}const x6=new O6;var L6=n(34155),R6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tooltip\\Tooltip.jsx";function B6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F6(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,V6(e,t,"set"),n),n}function U6(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,V6(e,t,"get"))}function V6(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const H6="vivaldi-tooltip";function W6(){let e=document.getElementById(H6);if(!e){const t=document.getElementById("browser");e=document.createElement("div"),e.id=H6,t&&t.appendChild(e)}return e}x6.addListener((()=>{x6.allHidden()&&pn.unmountComponentAtNode(W6())}));var z6=new WeakMap,G6=new WeakMap;class K6 extends s.Component{constructor(...e){super(...e),B6(this,"state",{show:x6.getShowTooltip(this.props.id)}),z6.set(this,{writable:!0,value:!1}),G6.set(this,{writable:!0,value:void 0}),B6(this,"_onStoreChange",(()=>{this.setState({show:x6.getShowTooltip(this.props.id)})})),B6(this,"onDragEnter",(()=>{M6.Z.hideTooltip(0),F6(this,z6,!0)})),B6(this,"onDragLeave",(()=>{F6(this,z6,!1)})),B6(this,"onMouseEnter",(()=>{if(!this.props.disabled&&!U6(this,z6)){const e=x6.allHidden()?this.props.appearDelay:0;M6.Z.showTooltip(this.props.id,e)}})),B6(this,"onMouseLeave",(()=>{this.props.disabled||M6.Z.hideTooltip(this.props.disappearDelay)})),B6(this,"onClick",(()=>{M6.Z.hideTooltip(0)})),B6(this,"tooltipIsOpen",(()=>{const e=W6().firstChild;return Boolean(e instanceof Element&&e.classList.contains("tooltip"))})),B6(this,"getPosition",((e,t)=>{const n=pn.findDOMNode(this);let s,i;if(!(n&&n.firstChild instanceof Element))return{left:s,top:i};const r=n.firstChild.getBoundingClientRect(),a=this.props.noPadding?0:4;if("above"===this.props.placement){s=r.left+r.width/2-e/2,i=r.top-t-a}else if("after"===this.props.placement)s=r.left+r.width+a,i=r.top;else if("before"===this.props.placement)s=r.left-e-a,i=r.top;else{s=r.left+r.width/2-e/2,i=r.top+r.height+a}return s<0&&(s=0),i<0&&(i=0),s+e>this.context.innerWidth&&(s-=s+e-this.context.innerWidth),i+t>this.context.innerHeight&&(i-=i+t-this.context.innerHeight),{left:s,top:i}})),B6(this,"renderToolTip",(()=>{if(!this.state.show)return;const{width:e,height:t,content:n}=this.props.content(this.props.id),{left:i,top:r=0}=this.getPosition(e,t),a=r+t>=this.context.innerHeight,o=a?"flex-end":"flex-start",l=this.props.noPadding?0:4,c=0===r?l:0,u=a?l:0,m=this.props.pointerEvents,d=["after","before"].includes(this.props.placement)?`top ${this.props.transitionSpeed}ms`:`left ${this.props.transitionSpeed}ms`,h="before"===this.props.placement||"after"===this.props.placement;pn.render(s.createElement("div",{className:"tooltip",style:{top:r,left:i,pointerEvents:m,height:h?"auto":t,width:e,paddingTop:c,paddingBottom:u,alignItems:o,transition:d},onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:R6,lineNumber:202,columnNumber:7}},n),W6())}))}componentWillUnmount(){U6(this,G6).remove(),L6.nextTick(M6.Z.hideTooltip)}componentDidMount(){F6(this,G6,x6.addListener(this._onStoreChange)),this.props.disabled||this.renderToolTip()}componentDidUpdate(e,t){this.props.disabled||t.show===this.state.show&&e.stackSize===this.props.stackSize||this.renderToolTip()}render(){const e=s.Children.only(this.props.children);return s.createElement("span",{onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:R6,lineNumber:226,columnNumber:7}},e)}}B6(K6,"contextType",Vs.Z);const j6=K6,Y6=function(e,t,n,s){const i=()=>{e.removeEventListener("mousemove",l),e.removeEventListener("mouseup",c)},r=(e,n,i,a)=>{b.Z.tabsPrivate.onDragEnd.removeListener(r),h.Z.runtime.sendMessage({dispatchAction:s4}),!e&&n&&$.Z.detachPage((0,sa.List)(t),i,a),s&&s.onDragEnd()},a=n.pageX,o=n.pageY,l=n=>{if(Math.abs(n.pageX-a)>5||Math.abs(n.pageY-o)>5){i();const a=(s?s.element:n.target).getBoundingClientRect(),o=s?s.offsetLeft:0,l=s?s.offsetTop:0,c=s?s.offsetHeight:0,u=s?s.offsetWidth:0;h.Z.runtime.sendMessage({dispatchAction:n4}),b.Z.tabsPrivate.onDragEnd.addListener(r);const[m]=t;b.Z.tabsPrivate.startDrag({windowId:e.vivaldiWindowId,mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:t.map((e=>e.id)),active:(t.find((e=>e.active))||m).id}),url:m.url,title:m.title,posX:a.left+o,posY:a.top+l,width:a.width+u,height:a.height+c,cursorX:10,cursorY:10}),s&&s.onDragStart(t)}},c=()=>{i()};e.addEventListener("mousemove",l),e.addEventListener("mouseup",c)},$6=function(){let e,t,n,s,i;return function(r,a,o,l){const c=(new Date).getTime();r!==e||a!==t?(e=r,t=a,n=c):r===e&&a===t&&r!==s&&a!==i&&n&&c-n>o&&(l(),s=r,i=a,e=t=n=void 0)}},X6=(e,t,n=!0)=>Boolean(t&&e.ctrlKey),Q6=(e,t,n=!0)=>Boolean(t&&e.shiftKey);var q6=n(34155),J6="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Tab.jsx";function e7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t7(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s7(e,t,"get"))}function n7(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,s7(e,t,"set"),n),n}function s7(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const i7=$6();function r7(e,t,n){if(n)return 1;switch((Gd.Z.getNavigationInfo(e)||{}).trigger){case"start":return 0;case"stop":return 1;case"commit":case"content":{const t=vf.getProgressInfo(e);return t?Math.min(Math.max(t.progress,0),1):1}}return 1}var a7=new WeakMap,o7=new WeakMap;class l7 extends s.PureComponent{constructor(e){super(e),a7.set(this,{writable:!0,value:!1}),e7(this,"refTab",s.createRef()),e7(this,"refFavicon",s.createRef()),o7.set(this,{writable:!0,value:!1}),e7(this,"_alarmsChanged",(e=>{if(!e)return;const t=e.find((e=>e?.id===this.props.extId));if(t)switch(t.type){case"RELOAD":if(this.props.extId===t.id){const e=V.ZP.getPageByReloadId(t.id);e&&$.Z.reloadPage(e.id)}break;case"TIME_CHANGED":this.setState({timeLeft:t.remainingTime})}else this.state.timeLeft&&this.setState({timeLeft:null})})),e7(this,"_onProgressStateStoreChanged",(()=>{this.setState({loadingProgress:r7(this.props.pageId,this.props.url,this.props.isInternalPage)})})),e7(this,"_onMediaStateStoreChanged",(()=>{this.setState({mediaState:Qq.getState().get(this.props.pageId)||(0,sa.Set)()})})),e7(this,"clearFadedDiscardedTabs",(()=>{t7(this,a7)&&this.setState({fadeDiscardedTabs:!1})})),e7(this,"discardPages",(e=>{e.forEach($.Z.discardPage)})),e7(this,"cloneTab",(e=>{$.Z.clonePages(sa.List.of(e))})),e7(this,"cloneTabs",(e=>{$.Z.clonePages(e)})),e7(this,"reloadTab",(e=>{$.Z.clearSelection(this.context.vivaldiWindowId),$.Z.reloadPage(e)})),e7(this,"renameTabStack",(()=>{const e=this.props.groupId;e&&this.setState({awaitingEdit:e})})),e7(this,"toggleMediaRemoting",(()=>{const e=this.props.prefValues[P.kMediaRouterMediaRemotingEnabled];st.Z.set(P.kMediaRouterMediaRemotingEnabled,!e)})),e7(this,"setPinned",((e,t)=>{$.Z.clearSelection(this.context.vivaldiWindowId),$.Z.setPinned(e,t)})),e7(this,"bookmarkAllOpenPages",(()=>{$.Z.clearSelection(this.context.vivaldiWindowId),i.Z.bookmarkAllOpenPages(this.context.vivaldiWindowId,tn.ZP.getRootNode().id)})),e7(this,"bookmarkTab",((e,t)=>{$.Z.clearSelection(this.context.vivaldiWindowId),i.Z.bookmarkPages(e,this.context.vivaldiWindowId,t,tn.ZP.getRootNode().id)})),e7(this,"handleClose",(e=>{const t=V.ZP.getPageById(this.props.pageId);t&&e.button===Nn.kLeft&&(e.altKey?this.closeAllButTab(t):e.shiftKey||e.ctrlKey||e.metaKey||this.props.closePage(t),e.preventDefault())})),e7(this,"closeToLeft",((e,t)=>{$.Z.closeToLeft(e,t)})),e7(this,"closeToRight",((e,t)=>{$.Z.closeToRight(e,t)})),e7(this,"closeTabStack",(()=>{$.Z.closeTabStack(this.props.pageId)})),e7(this,"handleMedia",(()=>{if(this.state.mediaState.has("pip"))$.Z.exitPictureInPicture(this.props.pageId);else{const e=V.ZP.getPageById(this.props.pageId);e&&this.togglePagesMuted(sa.List.of(e))}})),e7(this,"togglePagesMuted",(e=>{$.Z.toggleMuting(e)})),e7(this,"closeAllButTab",((e,t)=>{const n=!t;$.Z.closeOther(e,n)})),e7(this,"blockEvent",(e=>{e.stopPropagation(),e.preventDefault()})),e7(this,"containEvent",(e=>{e.stopPropagation()})),e7(this,"customize",(()=>{se.Z.showSettings("tabs")})),e7(this,"disolveTabStack",(()=>{$.Z.clearSelection(this.context.vivaldiWindowId),$.Z.expandTabStack(this.props.groupId)})),e7(this,"isTabstackingEnabled",(()=>"off"!==this.props.prefValues[P.kTabsStackingMode])),e7(this,"isTabStack",(e=>{const t=(0,Kd.av)(e);return!!t&&V.ZP.isGroup(t,this.context.vivaldiWindowId)})),e7(this,"isPinned",(e=>e.get("pinned"))),e7(this,"tileTabStack",(()=>{const e=this.props.groupId;$.Z.tileTabStack(e,this.context.vivaldiWindowId),$.Z.clearSelection(this.context.vivaldiWindowId)})),e7(this,"isPageTiledWithType",(e=>{const t=V.ZP.getPageById(this.props.pageId);return Boolean(t&&(0,iJ.gO)(t)&&this.props.tilingType===e)})),e7(this,"tileSelection",(e=>{const t=e.count()<4?"row":"grid";$.Z.tilePages(e.toList(),t),$.Z.clearSelection(this.context.vivaldiWindowId)})),e7(this,"untilePages",(()=>{const e=this.props.tilingId;$.Z.untileTileGroup(e,this.context.vivaldiWindowId),$.Z.clearSelection(this.context.vivaldiWindowId)})),e7(this,"mouseEnterHandler",(()=>{this.props.clearForceHover()})),e7(this,"indicatorOnDragStart",(e=>{this.props.setPageIdsHiddenForDrag((0,sa.Set)(e.map((e=>e.id))))})),e7(this,"indicatorOnDragEnd",(()=>{this.props.setPageIdsHiddenForDrag((0,sa.Set)())})),e7(this,"onTabIndicatorPress",((e,t,n)=>{n.preventDefault(),n.stopPropagation(),this.props.prefValues[P.kTabsStackingAllowDnd]&&this.onTabIndicatorDragOut(e,t,n)})),e7(this,"onTabIndicatorClick",((e,t)=>{t.preventDefault(),t.stopPropagation();const{prefValues:n}=this.props;if(t.button===Nn.kLeft){const s=W.ZP.isActive(this.context.vivaldiWindowId);X6(t,n[P.kTabsSelectionEnabled],s)?$.Z.setSelection(e,!1,!1):Q6(t,n[P.kTabsSelectionEnabled],s)?$.Z.setSelection(e,!0,!1):(0,hg.Z)(t)||this.props.onActivate(e)}else t.button,Nn.kCenter})),e7(this,"onTabIndicatorDragOut",((e,t,n)=>{const s=this.props.getDraggedPages(e);Y6(this.context,s,n,{offsetLeft:2,offsetTop:3,offsetHeight:-6,offsetWidth:-2,onDragStart:this.indicatorOnDragStart,onDragEnd:this.indicatorOnDragEnd,element:this.indicators[t]})})),e7(this,"renderTabGroupIndicator",(()=>{const e=V.ZP.getGroup(this.props.groupId,this.context.vivaldiWindowId),t=this.props.isTabStackingEnabled()?this.props.pageId:void 0;return s.createElement("div",{className:"tab-group-indicator",__source:{fileName:J6,lineNumber:642,columnNumber:7}},e.map((e=>{const n=bn()({"tab-indicator":!0,active:t===e.id,marked:this.props.isSelecting&&this.props.checkSelected(e.id),unread:this.props.prefValues[P.kTabsUnread]&&this.props.isUnread&&e.id!==t}),i={visibility:this.props.isHiddenForDrag?"hidden":"visible"},r=`stack-${e.id}`;return s.createElement("div",{key:r,ref:e=>{e&&(this.indicators[r]=e)},className:n,style:i,title:Pt.jk.getDisplayTitle(e),onContextMenu:this.onContextMenu.bind(this,!0),onClick:this.onTabIndicatorClick.bind(this,e),onMouseDown:this.onTabIndicatorPress.bind(this,e,r),__source:{fileName:J6,lineNumber:659,columnNumber:13}},this.props.isSelecting&&this.props.checkSelected(e.id)&&s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3px",className:"svg-tab-selection",__source:{fileName:J6,lineNumber:674,columnNumber:17}},s.createElement("line",{className:"inner",x1:"0",y1:"0",x2:"100%",y2:"0",__source:{fileName:J6,lineNumber:679,columnNumber:19}}),s.createElement("line",{className:"outer",x1:"0",y1:"0",x2:"100%",y2:"0",__source:{fileName:J6,lineNumber:680,columnNumber:19}})))})))})),e7(this,"keyDown",(e=>{const{prefValues:t}=this.props,n=t[P.kTabsSelectionEnabled];if(!this.state.awaitingEdit){switch(e.key){case"Enter":case" ":const s=V.ZP.getPageById(this.props.pageId);s&&this.props.onActivate(s);break;case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":const i=this.isHorizontal();if((0,uh.Mr)(e)&&n){const t=V.ZP.getPageById(this.props.pageId);t&&(("ArrowLeft"===e.key&&i||"ArrowUp"===e.key&&!i)&&$.Z.expandSelectionPrevious(t),("ArrowRight"===e.key&&i||"ArrowDown"===e.key&&!i)&&$.Z.expandSelectionNext(t))}if((0,uh.S2)(e)){const s="dotted"===t[P.kTabsStackingMode];if(i){if("ArrowLeft"===e.key||"ArrowRight"===e.key){const t=V.ZP.getPageById(this.props.pageId);t&&($.Z.stepPage(t,"ArrowRight"===e.key,s,this.context.vivaldiWindowId),n&&q6.nextTick((()=>{$.Z.setSelection(t,!1,!1,!0)})))}}else if("ArrowUp"===e.key||"ArrowDown"===e.key){const t=V.ZP.getPageById(this.props.pageId);t&&($.Z.stepPage(t,"ArrowDown"===e.key,s,this.context.vivaldiWindowId),n&&q6.nextTick((()=>{$.Z.setSelection(t,!1,!1,!0)})))}}if((0,uh.VV)(e)){if(i?"ArrowLeft"===e.key||"ArrowRight"===e.key:"ArrowUp"===e.key||"ArrowDown"===e.key){const t="ArrowLeft"===e.key||"ArrowUp"===e.key?"left":"right";$.Z.clearSelection(this.context.vivaldiWindowId),q6.nextTick((()=>this.props.onMoveFocus(this.props.id,t,!1)))}else if(!this.props.isSubstrip&&this.props.isStack){const e=pn.findDOMNode(this.refTab.current);e instanceof Element&&this.props.onStackMenu(this.props.pageId,e)}}break;case"Escape":$.Z.clearSelection(this.context.vivaldiWindowId),this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()}})),e7(this,"createGroup",((e,t)=>{const n=e.sort(((e,t)=>e.index-t.index)),s=t.index-n.findIndex((e=>e===t));$.Z.createTabStack(n,s,(0,Kd.av)(t))})),e7(this,"createGroupByHost",((e,t)=>{const n=V.ZP.getNewGroupId();g4(n,t),$.Z.createTabStack(e,void 0,n)})),e7(this,"getGroupsForHosts",(()=>{const e=V.ZP.getPages(this.context.vivaldiWindowId).filter((e=>!this.isTabStack(e))).filter((e=>!e.pinned));let t=(0,sa.List)();return e.forEach((n=>{let s=!1;if(t.forEach((e=>{if(s=e.contains(n),s)return!1})),!s){const s=(0,b4.q)(n),i=e.filter((e=>(0,b4.q)(e)===s));i.size>1&&(t=t.push(i))}})),t})),e7(this,"createGroupByHosts",(()=>{this.getGroupsForHosts().forEach((e=>{this.createGroupByHost(e,(0,b4.q)(e.first()))}))})),e7(this,"isHorizontal",(()=>{const{tabPosition:e}=this.props;return"top"===e||"bottom"===e})),e7(this,"onContextMenu",((e,t)=>(t.persist(),t.preventDefault(),t.stopPropagation(),this.getContextMenuItemsPromise("tab",e,t).then((e=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)})),!1))),e7(this,"getContextMenuItemsPromise",((e,t,n)=>{const s=V.ZP.getPageById(this.props.pageId);if(!s)return Promise.reject("Tab.jsx: Expected page not found");const i=this.context.vivaldiWindowId,{isStack:r,groupId:a}=this.props,o=this.props.isSelecting&&this.props.isSelected&&this.props.getSelectionCount()>1,l=V.ZP.getSelectedPages(i),c=l.filter((e=>V.ZP.canClosePage(e))),u=V.ZP.getPages(i).filter((e=>!l.find((t=>t.id===e.id)))),m=W.ZP.isGuestSession(i),[d,p]=(0,b4.d)(s,V.ZP.getTabs(i,!this.isTabstackingEnabled())),g=!s.active&&!s.discarded&&!s.isInspected&&s.url!==V.ZP.getDefaultStartpage(),N=r&&V.ZP.getGroup(a,this.context.vivaldiWindowId).some((e=>!e.active&&!e.discarded&&!e.isInspected&&e.url!==V.ZP.getDefaultStartpage())),f=V.ZP.getDiscardablePages(i),_=V.ZP.getPages(i).count(),v=V.ZP.isGroup(a,this.context.vivaldiWindowId),E=t||!v?_>=2:_-V.ZP.getGroup(a,this.context.vivaldiWindowId).count()>=1;let C;C=o?l:!t&&r?V.ZP.getGroup(a,this.context.vivaldiWindowId):sa.List.of(s);const w={isMultiSelect:o,count:l.count(),closableCount:c.count(),unSelectedCount:u.count(),unpinned:l.filter((e=>!this.isPinned(e))).count(),pinned:l.filter(this.isPinned).count(),playing:l.filter((e=>Qq.hasMediaState(e.id,"playing")||Qq.hasMediaState(e.id,"muting"))).count(),canHibernateCount:l.filter((e=>!e.active&&!e.isInspected)).count(),hostname:d,hostnameCount:p.count(),horizontal:this.isHorizontal(),someIncognito:l.some((e=>s.incognito)),canCloneCount:l.filter((e=>!(0,Pt.m7)(e))).count()},y=Ss.getOptionFunction(e),S=this.props.extId,T=()=>new Promise((e=>{h.Z.windows.getAll({populate:!0,windowTypes:["normal"]},(t=>{t=t.filter((e=>e.id!==this.context.vivaldiWindowId)).filter((e=>!e.extData||"settings"!==JSON.parse(e.extData).windowType)),Promise.all(t.map((e=>new Promise((t=>{e.id?b.Z.runtimePrivate.isGuestSession(e.id,(n=>{t({w:e,isGuest:n})})):t({w:e,isGuest:!1})}))))).then((t=>{const{vivaldiWindowId:c}=this.context,u=t.filter((e=>W.ZP.isGuestSession(c)?e.isGuest:W.ZP.isIncognito(c)?e.w.incognito&&!e.isGuest:!e.isGuest&&!e.w.incognito)).map((e=>e.w));let m=[];u.length>0&&(m=m.concat(z.Z.separatorItem,u.map(((e,t)=>{const n=e.tabs||[],u=n.find((e=>e.active)),m=u&&u.url?Pt.jk.getDisplayTitleByUrl(u.url,u.title||u.url):t+1;return{handler:()=>{const t=o?l:r?V.ZP.getGroup(a,i):sa.List.of(s);t.count()===V.ZP.getPages(c).count()&&document.querySelectorAll("webview").forEach((e=>e.parentElement?.removeChild(e))),e.id&&$.Z.moveToWindow(t,e.id)},...(0,Mn.Z)("Window with $1 Active Tab ($2)","Window with $1 Active Tabs ($2)",[n.length,m])}})))),W.ZP.isGuestSession(c)||W.ZP.isIncognito(c)||(m.push(z.Z.separatorItem),m.push({handler:()=>{C.count()===V.ZP.getPages(c).count()&&document.querySelectorAll("webview").forEach((e=>e.parentElement?.removeChild(e))),$.Z.detachPage(C,n.screenX,n.screenY)},...(0,Mn.Z)("To New Window")})),e(m)}))}))}));return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_NEW":return{handler:()=>this.props.onCreateTab(!o&&v&&a?a:void 0),...y(e,w)};case"CONTEXT_RELOAD":return{handler:o?this.reloadTab.bind(this,l.map((e=>e.id))):this.reloadTab.bind(this,s.id),...y(e,w)};case"CONTEXT_CLONE":return{visible:o?!l.every(Pt.m7):!(0,Pt.m7)(s),handler:o?()=>$.Z.clonePages(l):()=>$.Z.clonePages(sa.List.of(s)),...y(e,w)};case"CONTEXT_PIN":return{handler:o?()=>{this.setPinned(l,!0)}:()=>{this.setPinned(sa.List.of(s),!0)},visible:!(this.props.isSubstrip||this.props.isInsideAccordion)&&(o?!l.some(this.isTabStack)&&l.some((e=>!this.isPinned(e))):!r&&!s.pinned),...y(e,w)};case"CONTEXT_UNPIN":return{handler:o?()=>{this.setPinned(l,!1)}:()=>{this.setPinned(sa.List.of(s),!1)},visible:o?!l.some(this.isTabStack)&&l.some(this.isPinned):!r&&s.pinned,...y(e,w)};case"CONTEXT_MUTE":return{handler:o?()=>this.togglePagesMuted(l):()=>this.togglePagesMuted(sa.List.of(s)),visible:!o||l.some((e=>Qq.hasMediaState(e.id,"playing")||Qq.hasMediaState(e.id,"muting"))),checked:o?l.every((e=>Qq.hasMediaState(e.id,"muting"))):s.getIn(["extData","vivaldi_tab_muted"]),...y(e,w)};case"CONTEXT_CONTAINER_PERIODIC_TIMER":return{items:cl.Z.getMenu(S,"tab"),visible:!this.props.isInternalPage,...y(e,w)};case"CONTEXT_MUTE_OTHER":return{handler:$.Z.muteAllExcept.bind(this,[s]),visible:!o&&V.ZP.getPages(this.context.vivaldiWindowId).some((e=>e.id!==s.id&&Qq.hasMediaState(e.id,"playing"))),...y(e,w)};case"CONTEXT_OPTIMIZE_FS_VIDEOS":return{handler:this.toggleMediaRemoting,type:"checkbox",checked:this.props.prefValues[P.kMediaRouterMediaRemotingEnabled],visible:this.state.mediaState.has("capturing"),...y(e,w)};case"CONTEXT_BOOKMARK":return{handler:o?this.bookmarkTab.bind(this,l,!1):this.bookmarkTab.bind(this,s,!1),visible:!m,...y(e,w)};case"CONTEXT_BOOKMARK_STACK":return{handler:this.bookmarkTab.bind(this,V.ZP.getGroup(a,this.context.vivaldiWindowId),!0),visible:r&&!m,...y(e,w)};case"CONTEXT_BOOKMARK_ALL":return{handler:this.bookmarkAllOpenPages,visible:!m,...y(e,w)};case"CONTEXT_SAVE_SESSION":return{handler:l.count()>0?se.Z.showSaveSession.bind(this,{mode:"selected",ids:l.map((e=>e.id)).toArray()}):se.Z.showSaveSession.bind(this,{mode:"all"}),visible:!m,...y(e,w)};case"CONTEXT_TABSTACK_BY_SELECTION":{const t=l.filter((e=>!this.isPinned(e)));return{handler:()=>this.createGroup(t,s),visible:o&&this.isTabstackingEnabled()&&this.props.isSelecting&&t.count()>1,...y(e,w)}}case"CONTEXT_TABSTACK_BY_HOST":return{handler:this.createGroupByHost.bind(this,p,d),visible:this.isTabstackingEnabled()&&!r&&p.count()>1,...y(e,w)};case"CONTEXT_TABSTACK_BY_HOSTS":return{handler:()=>this.createGroupByHosts(),visible:this.isTabstackingEnabled()&&!this.getGroupsForHosts().isEmpty(),...y(e,w)};case"CONTEXT_TABSTACK_RENAME":return{handler:this.renameTabStack,visible:r&&!this.props.isSubstrip&&!this.props.isInsideAccordion,...y(e,w)};case"CONTEXT_TABSTACK_REMOVE_FROM":return{handler:()=>this.props.removeFromTabStack(this.props.pageId),visible:t,...y(e,w)};case"CONTEXT_TABSTACK_UNGROUP":return{handler:this.disolveTabStack,visible:r,...y(e,w)};case"CONTEXT_TILE_TABSTACK":return{handler:this.tileTabStack,visible:r&&!this.isPageTiledWithType("group")&&!this.isPageTiledWithType("selection"),...y(e,w)};case"CONTEXT_UNTILE_TABSTACK":return{handler:this.untilePages,visible:r&&(this.isPageTiledWithType("group")||this.isPageTiledWithType("selection")),...y(e,w)};case"CONTEXT_TILE_TABS":return{handler:this.tileSelection.bind(this,l),visible:o&&!this.isPageTiledWithType("selection")&&this.props.isSelecting&&l.count()>1,...y(e,w)};case"CONTEXT_UNTILE_SELECTION":return{handler:this.untilePages,visible:this.isPageTiledWithType("selection")&&!r,...y(e,w)};case"CONTEXT_HIBERNATE_TAB":return{handler:this.discardPages.bind(this,sa.List.of(s)),visible:!o&&g&&(this.props.isSubstrip||!r),...y(e,w)};case"CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS":return{handler:this.discardPages.bind(this,l.filter((e=>!e.active))),visible:Boolean(l.filter((e=>f.find((t=>t.id===e.id)))).count()),...y(e,w)};case"CONTEXT_HIBERNATE_TABSTACK":return{handler:this.discardPages.bind(this,V.ZP.getGroup(a,this.context.vivaldiWindowId).filter((e=>!e.active))),visible:N,...y(e,w)};case"CONTEXT_HIBERNATE_BACKGROUND":const n=f.filter((e=>!(0,iJ.ZN)(e)));return{handler:this.discardPages.bind(this,n),visible:n.count()>0,...y(e,w)};case"CONTEXT_CLOSE":return{handler:o?()=>this.props.closePage(c):()=>this.props.closePage(s),visible:V.ZP.canClosePage(s),...y(e,w)};case"CONTEXT_CLOSE_TABSTACK":return{handler:this.closeTabStack,visible:r,...y(e,w)};case"CONTEXT_CLOSE_OTHER":return{handler:o&&u.count()>0?this.closeAllButTab.bind(this,l,t):this.closeAllButTab.bind(this,s,t),visible:o&&u.count()>0||!o&&E,...y(e,w)};case"CONTEXT_CLOSE_LEFT":return{handler:()=>this.closeToLeft(s,t),visible:!o&&E&&V.ZP.getPages(this.context.vivaldiWindowId).takeUntil((e=>e.id===s.id)).count()>0,...y(e,w)};case"CONTEXT_CLOSE_RIGHT":return{handler:()=>this.closeToRight(s,t),visible:!o&&E&&V.ZP.getPages(this.context.vivaldiWindowId).skipUntil((e=>e.id===s.id)).skip(1).count()>0,...y(e,w)};case"CONTEXT_REOPEN":return{visible:Boolean(u4.Z.getTrash().length),...y(e,w)};case"CONTEXT_CONTAINER_PWA":return{visible:s.active&&!this.props.isInternalPage,container:{content:"pwa"},...y(e,w)};case"CONTEXT_CUSTOMIZE":return{handler:this.customize,visible:!m,...y(e,w)};case"CONTEXT_MOVE":return{visible:o&&!l.some((e=>s.incognito))||!o&&(t||!r),...y(e,w)};case"CONTEXT_TABSTACK_MOVE":return{visible:!o&&!t&&r,...y(e,w)};case"CONTEXT_MOVE_LEFT":return{handler:()=>$.Z.stepPage(s,!1,!1,i),visible:!o,...y(e,w)};case"CONTEXT_MOVE_RIGHT":return{handler:()=>$.Z.stepPage(s,!0,!1,i),visible:!o,...y(e,w)};case"CONTEXT_MOVE_STACK_LEFT":return{handler:()=>$.Z.stepPage(s,!1,!0,i),visible:!o,...y(e,w)};case"CONTEXT_MOVE_STACK_RIGHT":return{handler:()=>$.Z.stepPage(s,!0,!0,i),visible:!o,...y(e,w)};case"CONTEXT_CONTAINER_MOVE_TO_WINDOW":return{items:await T(),...y(e,w)};default:return{...y(e,w)}}}))})),e7(this,"isKnownDropMimeType",(e=>e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e||"text/uri-list"===e||"text/plain"===e)))),e7(this,"onDragEnterHandler",(e=>{const{groupId:t,prefValues:n,isInsideAccordion:s,handleExpandAccordion:i}=this.props;t&&"accordion"===n[P.kTabsStackingMode]&&!s&&i&&(clearTimeout(this.accordionExpandTimeout),this.accordionExpandTimeout=setTimeout((()=>i(t)),1e3)),this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation())})),e7(this,"onDragLeaveHandler",(e=>{e.persist();this.props.groupId&&"accordion"===this.props.prefValues[P.kTabsStackingMode]&&!this.props.isInsideAccordion&&clearTimeout(this.accordionExpandTimeout),this.props.onDragLeave(e)})),e7(this,"onDragOverHandler",(e=>{if(this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation()),e.dataTransfer.types.includes("vivaldi/x-button-toolbar"))return;const t=this.props.handleTabPosition;if(t&&this.props.isExpectingDrop&&e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))){const{pageX:n,pageY:s}=e,i=this.getDropSide(n,s);t(this.props.pageId,i)}else{e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e))&&(e.dataTransfer.dropEffect="copy");const t=V.ZP.getPageById(this.props.pageId);t&&i7(e.screenX,e.screenY,250,(()=>this.props.onActivate(t)))}})),e7(this,"getDropSide",((e,t)=>{if(!(this.refTab.current instanceof Element))return"before";const{pinned:n,prefValues:s,direction:i,isSubstrip:r,isInsideAccordion:a}=this.props,o=!n&&s[P.kTabsStackingAllowDnd]&&"off"!==s[P.kTabsStackingMode]&&!r&&!a,l=this.refTab.current.getBoundingClientRect(),[c,u]=[e-l.left,t-l.top];return"row"===i?o?c<.15*l.width?"before":c>.85*l.width?"after":"over":c<l.width/2?"before":"after":"column"===i?o?u<.15*l.height?"before":u>.85*l.height?"after":"over":u<l.height/2?"before":"after":"before"})),e7(this,"onDropHandler",(e=>{this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation());const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),n=e.dataTransfer.getData("text/uri-list"),s=e.dataTransfer.getData("text/plain");t?this.props.droppedTabHandler(t):n?n.split("\n").forEach(((e,t)=>$.Z.openURL(e,{incognito:this.props.incognito,inCurrent:0===t,inSpecificPageId:0===t?this.props.pageId:void 0,inBackground:0!==t}))):s&&(0,As.K2)(s)&&$.Z.openURL(s,{inCurrent:!0,inSpecificPageId:this.props.pageId,incognito:this.props.incognito})})),e7(this,"onFocusHandler",(e=>{if(this.state.awaitingEdit)return;const t=V.ZP.getPageById(this.props.pageId);t&&$.Z.setSelection(t,!1,!1,!0)})),e7(this,"renderCustomTabStackTitle",(e=>{const t=this.props.groupId,n=V.ZP.getTitleByGroupId(t,e),i=()=>{this.isIMEOpen=!0},r=()=>{this.isIMEOpen=!1},a=e=>{"Enter"!==e.key||this.isIMEOpen?"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),this.setState({awaitingEdit:null})):(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLInputElement&&c(e.target.value))},o=e=>{e&&document.activeElement!==e&&e.select()},l=e=>{c(e.target.value)},c=e=>{g4(t,e),this.setState({awaitingEdit:null})},{awaitingEdit:u}=this.state;return t&&t===u?s.createElement("input",{className:"tab-title-edit",defaultValue:n,ref:o,onBlur:l,onKeyDown:a,onMouseDown:this.containEvent,onCompositionStart:i,onCompositionUpdate:i,onCompositionEnd:r,__source:{fileName:J6,lineNumber:1608,columnNumber:9}}):n})),e7(this,"handleClick",(e=>{const{prefValues:t,isSubstrip:n}=this.props,s=W.ZP.isActive(this.context.vivaldiWindowId),i=V.ZP.getPageById(this.props.pageId);if(i)if(X6(e,t[P.kTabsSelectionEnabled],s)){const e=this.props.isStack&&!n;$.Z.setSelection(i,!1,e)}else if(Q6(e,t[P.kTabsSelectionEnabled],s))if("accordion"===this.props.prefValues[P.kTabsStackingMode]){$.Z.setSelection(i,!0,!1);const e=V.ZP.getSelectedPages(this.context.vivaldiWindowId),t=(0,Kd.av)(e.get(0));e.some((e=>t!==(0,Kd.av)(e)))&&$.Z.setSelection(i,!0,!0)}else $.Z.setSelection(i,!0,!n)})),e7(this,"handleMouseUpGuard",(e=>{e.button===Nn.kCenter&&(e.preventDefault(),e.stopPropagation())})),e7(this,"handleAuxClick",(e=>{const t=V.ZP.getPageById(this.props.pageId);t&&e.button===Nn.kCenter&&(this.props.closeAndFreeze(t),e.preventDefault(),e.stopPropagation())})),e7(this,"handleMouseDown",(e=>{const t=V.ZP.getPageById(this.props.pageId),n=e.detail%2==0;if(t&&e.button===Nn.kLeft&&!n){e.preventDefault();W.ZP.isActive(this.context.vivaldiWindowId);(0,hg.Z)(e)||(this.props.onActivate(t),this.props.initDragging(e,t,this.props.posX,this.props.posY))}})),e7(this,"handleDoubleClick",(e=>{e.preventDefault(),e.stopPropagation();const{prefValues:t}=this.props,n=W.ZP.isActive(this.context.vivaldiWindowId),s=V.ZP.getPageById(this.props.pageId);s&&(X6(e,t[P.kTabsSelectionEnabled],n)?$.Z.toggleRelatedSelection(s):t[P.kTabsDoubleClickClose]?$.Z.closePage(s):"accordion"===t[P.kTabsStackingMode]&&this.props.toggleAutoExpandAccordion?.((0,Kd.av)(s)))})),e7(this,"handleTouchStart",(e=>{const t=V.ZP.getPageById(this.props.pageId);t&&this.props.initDragging(e.touches[0],t,this.props.posX,this.props.posY)})),e7(this,"renderStackFrame",((e,t)=>{const{prefValues:n,isHiddenForDrag:i,accordionSize:r}=this.props,a=this.isHorizontal(),o="accordion"===n[P.kTabsStackingMode],l=t||this.props.isInsideAccordion&&this.props.isFirstInGroup;let c,u,m=null;if(l){if(r>0)a?c=`${r}px`:u=`${r}px`;else{const e=o&&!i?16:0;a?c=`calc(var(--Width) + ${e}px)`:u=`calc(var(--Height) + ${e}px)`}m={width:c,height:u}}return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t&&!a?"100%":null,height:t&&a?"100%":null,style:m,className:bn()({"svg-tab-selection":e,"svg-tab-stack":l}),__source:{fileName:J6,lineNumber:1749,columnNumber:12}},l&&s.createElement("rect",{className:"stack-frame",width:"100%",height:"100%",__source:{fileName:J6,lineNumber:1758,columnNumber:25}}),e&&s.createElement("rect",{className:"inner",width:"100%",height:"100%",__source:{fileName:J6,lineNumber:1759,columnNumber:19}}),e&&s.createElement("rect",{className:"outer",width:"100%",height:"100%",__source:{fileName:J6,lineNumber:1760,columnNumber:19}}))})),this.indicators={},this.isIMEOpen=!1;const t=Pt.jk.getDisplayTitleByUrl(e.url,e.title),n=O4(t,e.url,9),r=e.isStack&&!e.isSubstrip?(0,ue.Z)("Tab stack with $1 tab","Tab stack with $1 tabs",[e.stackSize]):t;this.state={dragOver:"none",awaitingEdit:null,fadeDiscardedTabs:e.prefValues[P.kTabsDimHibernated],loadingProgress:r7(e.pageId,e.url,e.isInternalPage),mediaState:Qq.getState().get(e.pageId)||(0,sa.Set)(),timeLeft:void 0,displayTitle:t,titleNumber:n,tabTitle:r}}componentDidMount(){this._mediaStateStoreToken=Qq.addListener(this._onMediaStateStoreChanged),vf.addChangeListener(this._onProgressStateStoreChanged),n7(this,a7,!0)}componentWillUnmount(){vf.removeChangeListener(this._onProgressStateStoreChanged),this._mediaStateStoreToken.remove(),n7(this,a7,!1),t7(this,o7)&&H.Z.removeChangeListener(this._alarmsChanged)}componentDidUpdate(e){!0===e.active&&!1===this.props.active&&null!==this.state.awaitingEdit&&this.setState({awaitingEdit:null}),!1===e.discarded&&!0===this.props.discarded&&(this.discardedFadeInTimeId&&(clearTimeout(this.discardedFadeInTimeId),delete this.discardedFadeInTimeId),this.props.prefValues[P.kTabsDimHibernated]||(this.discardedFadeInTimeId=setTimeout(this.clearFadedDiscardedTabs,2e3)),this.setState({fadeDiscardedTabs:!0}));const t=e.stackSize!==this.props.stackSize;if(e.url!==this.props.url||e.title!==this.props.title){const e=Pt.jk.getDisplayTitleByUrl(this.props.url,this.props.title),n=O4(e,this.props.url,9);let s;s=t&&this.props.isStack&&!this.props.isSubstrip?(0,ue.Z)("Tab stack with $1 tab","Tab stack with $1 tabs",[this.props.stackSize]):e,this.setState({displayTitle:e,titleNumber:n,tabTitle:s})}!t7(this,o7)&&this.props.doMonitorAlarms&&(H.Z.addChangeListener(this._alarmsChanged),n7(this,o7,!0))}render(){const{discarded:e,prefValues:t,faviconUrl:n,isInternalPage:i,isStack:r,pinned:a,isUnread:o,shouldShowCloseButton:l}=this.props,{loadingProgress:c,mediaState:u,timeLeft:m,displayTitle:d,titleNumber:h,tabTitle:p}=this.state,g=this.props.active,b=Boolean(this.props.smallTab),N=0===u.size||e,f=Boolean(this.props.isSelecting&&(!this.props.isHidden&&this.props.isSelected||this.props.highlighted)),_=t[P.kTabsStackingMode],v=r&&!this.props.isSubstrip&&"off"!==_&&("dotted"===_||t[P.kTabsStackingPreferDotted]),E=bn()({tab:!0,"tab-acceptsdrop":this.props.acceptsDrop,marked:f,pinned:a,active:g,uifocusstop:g,highlighted:this.props.highlighted&&!t[P.kTabsSelectionEnabled],"tab-small":b&&!a,"tab-mini":this.props.miniTab&&!a,"tab-accordion":this.props.isStack&&"accordion"===_,"tab-in-accordion":this.props.isInsideAccordion,"tab-first-in-group":this.props.isFirstInGroup,"tab-last-in-group":this.props.isLastInGroup,"force-hover":this.props.forceHover,"tab-group":v,"audio-on":u.has("playing")||u.has("pip"),"audio-muted":u.has("muting"),"tab-captured":u.has("capturing"),"button-off":!l,unread:t[P.kTabsUnread]&&o&&!g&&!r&&!i,isdiscarded:this.state.fadeDiscardedTabs&&e,insubstrip:this.props.isSubstrip}),C="progress_bar"===t[P.kTabsPageLoadInfo]&&!i&&(g&&!this.props.addressBarVisible||g&&!t[P.kAddressBarShowProgress]||!g),w=m||C,y=m||c;let S=g?"tabActive":"tab";(a||b)&&(S="tabSmall");const T=r&&!this.props.isSubstrip&&!t[P.kTabsStackingPreferDotted]&&!this.props.isInsideAccordion&&("substrip"===_||"accordion"===_),k=g?t[P.kKeyboardTabToAll]:"-1",I={top:"below",bottom:"above",left:"after",right:"before"}[this.props.tabPosition];const A=this.props.prefValues[P.kThemeUseAnimation]?150:0,Z=this.props.isTabStackingEnabled(),D=r&&Z&&"substrip"===_&&!this.props.prefValues[P.kTabsStackingPreferDotted]&&!this.props.isSubstrip,M=this.props.isSubstrip||this.props.isInsideAccordion,O=this.props.active&&this.props.isSubstripVisible&&!this.props.isSubstrip?this.props.pageId+1e3:this.props.pageId;return s.createElement(j6,{id:O,noPadding:this.props.isSubstripVisible&&!this.props.isSubstrip,disabled:this.props.isTooltipDisabled,pointerEvents:Z&&r?"auto":"none",placement:I,appearDelay:200,transitionSpeed:A,disappearDelay:Z?200:1,content:()=>this.props.getTooltipContent(O,M),stackSize:this.props.stackSize,__source:{fileName:J6,lineNumber:1883,columnNumber:5}},s.createElement("div",{className:bn()("tab-position",{"is-substack":D}),style:this.props.elementStyle,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUpGuard,onAuxClick:this.handleAuxClick,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onTouchStart:this.handleTouchStart,__source:{fileName:J6,lineNumber:1896,columnNumber:7}},s.createElement("div",{id:this.props.id,className:E,ref:this.refTab,"data-id":this.props.id,title:t[P.kTabsTooltip]?null:p,onContextMenu:e=>this.onContextMenu(this.props.isSubstrip||this.props.isInsideAccordion,e),onMouseEnter:this.mouseEnterHandler,onMouseDown:e=>e.preventDefault(),onDragEnter:this.onDragEnterHandler,onDragOver:this.onDragOverHandler,onDragLeave:this.onDragLeaveHandler,onDrop:this.onDropHandler,onKeyDown:this.keyDown,onFocus:t[P.kTabsSelectionEnabled]?this.onFocusHandler:null,tabIndex:k,__source:{fileName:J6,lineNumber:1908,columnNumber:9}},s.createElement("div",{className:"tab-header",style:this.props.isExpectingDrop?{pointerEvents:"none"}:null,__source:{fileName:J6,lineNumber:1927,columnNumber:11}},w&&s.createElement(F5,{progress:y,__source:{fileName:J6,lineNumber:1933,columnNumber:15}}),s.createElement(P6,{refFavicon:this.refFavicon,faviconUrl:n,progress:this.state.loadingProgress,progressType:"progress_icon"===t[P.kTabsPageLoadInfo]||"spinner"===t[P.kTabsPageLoadInfo]?t[P.kTabsPageLoadInfo]:void 0,__source:{fileName:J6,lineNumber:1936,columnNumber:13}}),s.createElement("span",{className:"title",onDoubleClick:t[P.kTabsMinimize]||t[P.kTabsDoubleClickClose]?null:this.renameTabStack,__source:{fileName:J6,lineNumber:1947,columnNumber:13}},!r||this.props.isSubstrip||this.props.isInsideAccordion?d:this.renderCustomTabStackTitle(d)),T&&s.createElement("div",{className:"stack-counter",__source:{fileName:J6,lineNumber:1960,columnNumber:15}},this.props.stackSize),l&&s.createElement(D6,{onClick:this.handleClose,onMouseDown:this.blockEvent,__source:{fileName:J6,lineNumber:1966,columnNumber:15}}),!N&&s.createElement("span",{className:"tab-audio",onClick:this.handleMedia,onAuxClick:this.handleClose,onMouseDown:this.blockEvent,__source:{fileName:J6,lineNumber:1973,columnNumber:13}},u.has("capturing")?s.createElement("span",{className:"audioicon",width:"16",height:"16",dangerouslySetInnerHTML:{__html:cn.MjM},__source:{fileName:J6,lineNumber:1980,columnNumber:19}}):s.createElement(P0,{location:S,animated:t[P.kThemeUseAnimation],mediaState:u,__source:{fileName:J6,lineNumber:1983,columnNumber:19}})),t[P.kTabsCounterDetection]&&h&&s.createElement("span",{className:"button-badge",__source:{fileName:J6,lineNumber:1994,columnNumber:15}},h)),t[P.kTabsThumbnails]&&s.createElement(UW,{src:this.props.thumbnail,__source:{fileName:J6,lineNumber:1999,columnNumber:13}}),(f||(r||this.props.isInsideAccordion&&this.props.isFirstInGroup)&&!this.props.isSubstrip&&!v)&&this.renderStackFrame(f,r)),v&&this.renderTabGroupIndicator()))}}e7(l7,"contextType",Vs.Z);const c7=l7;var u7=n(10695),m7=n.n(u7),d7=n(87716),h7=n(34155),p7="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabStrip.jsx";function g7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b7(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,f7(e,t,"get"))}function N7(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f7(e,t,"set"),n),n}function f7(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const _7=$6();class v7 extends((0,sa.Record)({type:"tab",id:0,page:new Kd.ZP,isFirst:!1,isLast:!1})){}const E7=30,C7={stiffness:400,damping:32,precision:.1},w7="newtab";var y7=new WeakMap;class S7 extends s.PureComponent{constructor(...e){super(...e),y7.set(this,{writable:!0,value:void 0}),g7(this,"refTabStrip",s.createRef()),g7(this,"refTabs",new Map),g7(this,"state",{isDragging:!1,start:[0,0],draggedActive:null,draggedSet:(0,sa.Set)(),pageIdsHiddenForDrag:(0,sa.Set)(),isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,freeze:null,addressBarVisible:W.ZP.getVisibleUI(this.context.vivaldiWindowId).addressBar,animate:!1,highlightedId:"",isDraggingPinnedTab:!1,activeAlarms:new sa.Set}),g7(this,"_alarmsChanged",(e=>{e&&this.setState((t=>{const n=e.map((e=>e?.id||""));return{activeAlarms:t.activeAlarms.union(n)}}))})),g7(this,"isTabStackingEnabled",(()=>!this.props.isSubstrip&&"off"!==this.props.prefValues[P.kTabsStackingMode])),g7(this,"setOverflowClass",(()=>{if(this.refTabStrip.current&&("left"===this.props.tabPosition||"right"===this.props.tabPosition)){const e=pn.findDOMNode(this.refTabStrip.current);if(e instanceof Element&&e.clientHeight<e.scrollHeight){if(this.props.setOverflowClass(!0,this.props.isSubstrip),this.props.switchByScroll){const t=e.getElementsByClassName("tab active")[0];t&&"function"==typeof t.scrollIntoViewIfNeeded&&t.scrollIntoViewIfNeeded()}}else this.props.setOverflowClass(!1,this.props.isSubstrip)}})),g7(this,"maybeSpring",((e,t)=>this.state.animate&&this.props.prefValues[P.kThemeUseAnimation]&&!this.props.isResizing&&this.fitsInView()?(0,vQ.ST)(e,t):e)),g7(this,"fitsInView",mo()(1)((()=>"row"===this.props.direction?this.props.tabs.size*E7<this.props.maxWidth:this.props.tabs.size*E7<this.props.maxHeight))),g7(this,"onCommandSpy",(e=>{if("COMMAND_FOCUS_TABBAR"===e)si(pn.findDOMNode(this))||this.moveFocus("","current",!0)})),g7(this,"accordionIsOpen",(e=>Boolean(e&&this.props.openAccordions?.some((t=>t.groupId===e))))),g7(this,"onWindowStoreChanged",(()=>{this.setState({addressBarVisible:W.ZP.getVisibleUI(this.context.vivaldiWindowId).addressBar})})),g7(this,"moveFocus",((e,t,n)=>{if(!0===n||si(pn.findDOMNode(this))){let n=[];const s=pn.findDOMNode(this.refTabStrip.current);if(s instanceof HTMLElement&&(n=Array.from(s.querySelectorAll("div.tab")).map((e=>e.getAttribute("data-id"))).filter(Boolean)),0===n.length)return;if("current"===t){if(""===e&&s instanceof HTMLElement){const t=s.getElementsByClassName("tab active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=n.indexOf(e);if(-1===t)return;e=n[t]}else if("right"===t||"left"===t){if(1===n.length)return;let s=n.indexOf(e);if(-1===s)return;s="right"===t?s+1>=n.length?0:s+1:s<=0?n.length-1:s-1,e=n[s]}if(s instanceof HTMLElement){const t=e===w7?s.querySelector("div.toolbar-tabbar button"):s.querySelector(`div.tab[data-id="${e}"]`);t&&(t.focus(),this.setState({highlightedId:e}))}}})),g7(this,"openStackMenu",((e,t)=>{if(this.isTabStackingEnabled()){const n=V.ZP.getPageById(e);if(n){const e=(0,Kd.av)(n);if(V.ZP.isGroup(e,this.context.vivaldiWindowId)){const n=V.ZP.getGroup(e,this.context.vivaldiWindowId).toArray().map(((e,t)=>({url:e.url,handler:()=>$.Z.activateTab(e.id,this.context.vivaldiWindowId),...z.Z.makeNumberMnemonic(e.title,t)}))),s="top"===this.props.tabPosition||"bottom"===this.props.tabPosition?"bottomLeft":"left"===this.props.tabPosition?"topRight":"topLeft";(0,Hs.Z)(this.context.vivaldiWindowId,n,void 0,s,t)()}}}})),g7(this,"handleLeaveBar",(()=>{this.setState({highlightedId:""}),se.Z.setPaneFocus(!1),o.Z.executeActions("COMMAND_FOCUS_WEBVIEW")})),g7(this,"closeAndFreeze",(e=>{const t=e instanceof sa.List?e:sa.List.of(e),n="on"===this.props.prefValues[P.kTabsClosePinned]?t:t.filter((e=>!e.pinned));if(0!==n.size){if(1===n.size){const e=n.first();!e.pinned&&this.props.prefValues[P.kTabsAlignNext]&&this.freezeTabSize(e)}this.setState({animate:!1}),this.props.closePage(n),h7.nextTick((()=>this.allowDelayedAnimation()))}})),g7(this,"freezeTabSize",(e=>{const t=()=>{this.setState({freeze:null}),this.context.removeEventListener("mousemove",n)},n=e=>{const n=pn.findDOMNode(this.refTabStrip.current);if(n instanceof Element){const s=n.getBoundingClientRect();(s.left>e.clientX||s.left+s.width<e.clientX||s.top>e.clientY||s.top+s.height<e.clientY)&&t()}},s=e=>{const t=this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:this.isTabStackingEnabled(),isThumb:this.props.prefValues[P.kTabsThumbnails]}).children?.filter((e=>"tab"===e.type));if(t){const s=t.findIndex((t=>t.tab?.page.id===e)),i=t[s];if(i){let e;e=i.tab?.get("page").active?t[s+1]:i;const r=e.tab?.page.id;r&&this.setState({freeze:{width:e.layout?.width||this.props.maxWidth,height:i.layout?.height||this.props.maxHeight,nextId:r}}),this.context.addEventListener("mousemove",n)}}},i=this.props.tabs.getIn([-1,"page","id"]);e.id!==i?s(e.id):t()})),g7(this,"handleTouchMove",(e=>{e.preventDefault(),this.maybeStartDragging(e.touches[0])})),g7(this,"handleMouseMove",(e=>{e.preventDefault(),e.button===Nn.kLeft?this.maybeStartDragging(e):this.cleanupDragging()})),g7(this,"handleMouseUp",(e=>{this.state.draggedActive?.active&&this.props.prefValues[P.kTabsMinimize]&&$.Z.minimizePage(this.context.vivaldiWindowId),this.cleanupDragging()})),g7(this,"handleAccordionToggle",((e,t)=>{e&&(t?this.setState({animate:!1},(()=>{this.props.handleCompressAccordion?.(e),this.allowDelayedAnimation()})):this.props.handleExpandAccordion?.(e))})),g7(this,"onDragEnterHandler",(e=>{if(e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))&&this.props.isExpectingDrop)return e.preventDefault(),void e.stopPropagation();e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e))&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")})),g7(this,"onDragLeaveHandler",(e=>{clearTimeout(this.removeYieldTimeoutId),this.removeYieldTimeoutId=setTimeout((()=>{b7(this,y7)&&(this.setState({yieldAfter:null,yieldBefore:null,yieldOver:null}),clearTimeout(this.removeYieldAnimationTimeoutId),this.removeYieldAnimationTimeoutId=setTimeout((()=>{this.state.yieldBefore||this.state.yieldAfter||!b7(this,y7)||this.setState({isYielding:!1})}),2e3))}),200)})),g7(this,"onDragOverHandler",(e=>{if(clearTimeout(this.removeYieldTimeoutId),e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))&&this.props.isExpectingDrop){e.preventDefault(),e.stopPropagation();const t=300;this.removeYieldTimeoutId=setTimeout((()=>{b7(this,y7)&&this.setState({yieldAfter:null,yieldBefore:null})}),t)}else e.dataTransfer.types.some((e=>"text/uri-list"===e||"text/plain"===e))&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")})),g7(this,"onDropHandler",(e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),n=e.dataTransfer.getData("text/uri-list"),s=e.dataTransfer.getData("text/plain");this.props.isExpectingDrop&&t?this.droppedTabHandler(t):n?n.split("\n").forEach(((e,t)=>$.Z.openURL(e,{inCurrent:!1,inBackground:t>0}))):s&&QN.Z.go([s],{inCurrent:!1,enableSearch:this.props.prefValues[P.kAddressBarInlineSearchEnabled]})})),g7(this,"droppedTabHandler",(e=>{const{yieldOver:t,draggedActive:n}=this.state,s=JSON.parse(e),i=s.ids.map((e=>parseInt(e))).sort(((e,t)=>e-t));h.Z.tabs.query({},(e=>{const r=(0,sa.List)(e).filter((e=>i.some((t=>e.id===t)))).map(d7.OK),a=()=>{const e=t&&V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t&&!e.pinned));if(e){let t=(0,Kd.av)(e);const s=this.isTabStackingEnabled()&&V.ZP.isGroup(t,this.context.vivaldiWindowId),i=e.windowId===r.first().windowId;let a,o,l=new sa.List;if(s)a=V.ZP.getGroup(t,this.context.vivaldiWindowId).first().index,l=V.ZP.getGroup(t,this.context.vivaldiWindowId).concat(r);else{a=e.index,l=i&&r.first().index<a?l.concat(r).push(e):l.push(e).concat(r),t=V.ZP.getNewGroupId();const s=n&&(0,Kd.av)(n);s&&V.ZP.isGroup(s,this.context.vivaldiWindowId)&&(o=V.ZP.getTitleByGroupId(s,""))}if(i){let e=0;r.forEach((t=>{t.index<a&&e++})),a-=e}$.Z.createTabStack(l,a,t).then((()=>{t&&o&&g4(t,o)})),this.maybeResetDragging()}else{const e=()=>h7.nextTick(this.maybeResetDragging),t=s.active,n=this.getYieldIndex(i[0]);if(this.props.isSubstrip)if(1===this.props.tabs.size)$.Z.createTabStack(this.props.tabs.concat(r),n,V.ZP.getNewGroupId());else{const s=this.props.tabs.first()?.page.getIn(["extData","group"]);$.Z.moveDroppedTabs(r,t,n,s,this.context.vivaldiWindowId).then(e)}else if("accordion"===this.props.prefValues[P.kTabsStackingMode]){const i=this.props.pages.map((e=>(0,Kd.av)(e))),a=i.countBy((e=>e)),o=r.reduce(((e,t)=>e.add((0,Kd.av)(t))),new sa.Set),l=s.sourceWindow===this.context.vivaldiWindowId,c=i.get(n),u=n+(n<s.activeIndex?-1:1);let m;m=l?c&&this.accordionIsOpen(c)&&i.get(u)===c?c:1===o.size&&a.get(o.first())===r.size?void 0:"":void 0,$.Z.moveDroppedTabs(r,t,n,m,this.context.vivaldiWindowId).then(e)}else{const i="main"!==s.dragSource?"":void 0;$.Z.moveDroppedTabs(r,t,n,i,this.context.vivaldiWindowId).then(e)}}h.Z.windows.update(this.context.vivaldiWindowId,{focused:!0})};this.setState({animate:!1},(()=>{a(),this.allowDelayedAnimation()}))}))})),g7(this,"showSubStack",(0,za.Z)((e=>this.props.showSubStack?.(e)),100)),g7(this,"doPositionUpdate",(()=>{this.pendingPositionInfo&&this.setState(this.pendingPositionInfo),this.pendingPositionInfo=void 0,this.requestedFrame=void 0})),g7(this,"handleTabPosition",((e,t)=>{clearTimeout(this.removeYieldTimeoutId),"before"===t?this.scheduleTabPositionUpdate({isYielding:!0,yieldBefore:e,yieldAfter:null,yieldOver:null}):"after"===t?this.scheduleTabPositionUpdate({isYielding:!0,yieldBefore:null,yieldAfter:e,yieldOver:null}):"over"===t?(this.scheduleTabPositionUpdate({yieldOver:e}),this.props.isSubstrip||this.showSubStack(e)):"none"===t&&(this.scheduleTabPositionUpdate({yieldBefore:null,yieldAfter:null,yieldOver:null}),clearTimeout(this.expireYieldTimeoutId),this.expireYieldTimeoutId=setTimeout((()=>{if(b7(this,y7)){const{yieldBefore:e,yieldAfter:t,yieldOver:n}=this.state;e||t||n||this.scheduleTabPositionUpdate({isYielding:!1})}}),1e3))})),g7(this,"setPageIdsHiddenForDrag",(e=>{this.setState({pageIdsHiddenForDrag:e})})),g7(this,"windowDragEnterHandler",(e=>{e.dataTransfer&&e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))&&(e.preventDefault(),e.stopPropagation(),this.windowDragOverHandler(e))})),g7(this,"windowDragLeaveHandler",(e=>{if(e.dataTransfer&&e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))){e.preventDefault(),e.stopPropagation();0===e.pageX&&0===e.pageY&&this.handleTabPosition(-1,"none")}})),g7(this,"windowDragOverHandler",(e=>{if(e.dataTransfer&&e.dataTransfer.types.some((e=>"vivaldi/x-tab-entries"===e))){e.preventDefault(),e.stopPropagation(),this.delayedActivateWindow(e);const{yieldBefore:t,yieldAfter:n,yieldOver:s}=this.state;if(!s&&!t&&!n){const e=this.state.pageIdsHiddenForDrag.first();if(!e||!this.props.pages.some((t=>t.id===e))){const e=this.props.pages.getIn([-1,"id"]);e&&this.handleTabPosition(e,"after")}}}})),g7(this,"windowDropHandler",(e=>{const{dataTransfer:t}=e;if(t&&t.types.some((e=>"vivaldi/x-tab-entries"===e))){e.preventDefault(),e.stopPropagation();const n=t.getData("vivaldi/x-tab-entries"),s=JSON.parse(n),i=s.ids.map((e=>parseInt(e))).sort(((e,t)=>e-t));h.Z.tabs.query({},(t=>{if(t.find((e=>i.includes(e.id)&&e.windowId!==this.context.vivaldiWindowId))){const e=(0,sa.List)(t).filter((e=>i.some((t=>e.id===t)))).map(d7.OK);(()=>{$.Z.moveDroppedTabs(e,s.active,-1,void 0,this.context.vivaldiWindowId)})()}else{const t=i.map((e=>parseInt(e))).map((e=>V.ZP.getPages(this.context.vivaldiWindowId).find((t=>t.id===e)))).filter(Boolean);if(t.length===V.ZP.getPages(this.context.vivaldiWindowId).count())return void this.maybeResetDragging();t.length?$.Z.detachPage((0,sa.List)(t),e.screenX,e.screenY):(this.maybeResetDragging(),console.warn("Dropped Page(s) does not exist:",i))}}))}})),g7(this,"maybeResetDragging",(()=>{if(!b7(this,y7))return;const{pageIdsHiddenForDrag:e,isYielding:t,yieldOver:n}=this.state;(!e.isEmpty()||t||n)&&this.setState({isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,pageIdsHiddenForDrag:(0,sa.Set)()})})),g7(this,"handleEscKey",(()=>{this.abortAndRevertDragging()})),g7(this,"abortAndRevertDragging",(()=>{this.state.draggedSet.forEach((e=>$.Z.moveToIndex(e,e.index))),this.cleanupDragging(),this.maybeResetDragging()})),g7(this,"getYieldIndex",(e=>{const{yieldBefore:t,yieldAfter:n,yieldOver:s}=this.state;if(s){const e=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===s));return e?e.index:-1}const i=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t||e.id===n));if(!i)return-1;const r=(0,Kd.av)(i);let a;if(this.isTabStackingEnabled()&&V.ZP.isGroup(r,this.context.vivaldiWindowId))if("accordion"===this.props.prefValues[P.kTabsStackingMode]&&this.accordionIsOpen(r))a=i.id;else{const e=V.ZP.getGroup(r,this.context.vivaldiWindowId);a=t?e.first().id:e.last().id}else a=i.id;return V.ZP.getPages(this.context.vivaldiWindowId).filter((t=>t.id!==e)).findIndex((e=>e.id===a))+(n?1:0)})),g7(this,"initDragging",(({pageX:e,pageY:t},n,s,i)=>{let r;this.context.addEventListener("touchmove",this.handleTouchMove,!0),this.context.addEventListener("mousemove",this.handleMouseMove,!0),this.context.addEventListener("touchend",this.handleMouseUp,!0),this.context.addEventListener("mouseup",this.handleMouseUp,!0),Nn.setWebviewPointerEvents(!1,this.context.document),Wl.Z.bind("esc",this.handleEscKey);const{isSelecting:a,pageSelection:o,isSubstrip:l}=this.props,c=(0,Kd.av)(n),u=this.isTabStackingEnabled()&&V.ZP.isGroup(c,this.context.vivaldiWindowId),m=a&&o.has(n.id),d=this.props.prefValues[P.kTabsStackingMode];r=m?o.reduce(((e,t)=>{const n=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t));return n?e.add(n):e}),(0,sa.Set)()):u&&("substrip"===d&&!l||"accordion"===d&&!this.accordionIsOpen(c))?(0,sa.Set)(V.ZP.getGroup(c,this.context.vivaldiWindowId)):sa.Set.of(n),this.setState({draggedActive:n,draggedSet:r,start:[e,t],isDragging:!1,yieldBefore:null,yieldAfter:null})})),g7(this,"maybeStartDragging",(e=>{if(this.state.isDragging)return;const{pageX:t,pageY:n}=e,[s,i]=this.state.start;if(!(Math.abs(s-t)>5||Math.abs(i-n)>5))return;const r=this.props.tabs.find((e=>this.state.draggedActive?.id===e.page.id));r&&this.startDragging(r,0,0)})),g7(this,"_getPagesFromDraggedSet",(()=>{const e=[];return this.state.draggedSet.forEach((t=>{const n=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t.id));n&&e.push(n)})),e})),g7(this,"getDragImageData",((e,t)=>{const n=document.createElement("canvas"),s=n.getContext("2d"),i=16,r=200,a=27;let o;return n.width=r,n.height=a,s.fillStyle=this.props.theme.colorBg,function(e,t,n,s){e.beginPath(),e.moveTo(s,0),e.lineTo(t-s,0),e.quadraticCurveTo(t,0,t,s),e.lineTo(t,n-s),e.quadraticCurveTo(t,n,t-s,n),e.lineTo(s,n),e.quadraticCurveTo(0,n,0,n-s),e.lineTo(0,s),e.quadraticCurveTo(0,0,s,0),e.closePath(),e.clip()}(s,r,a,this.props.theme.radius),s.fill(),s.fillStyle=this.props.theme.colorBg,s.font="12px system-ui",s.fillText(t,25,18),e instanceof HTMLImageElement?o=new Promise(((t,n)=>{const o=new Image;o.crossOrigin="Anonymous",o.src=e.srcset,o.onload=()=>{s.drawImage(o,6,5,i,i),t(s.getImageData(0,0,r,a))},o.onerror=e=>{console.warn(e),n(e)}})):e instanceof HTMLSpanElement&&(o=new Promise((t=>{const n=URL.createObjectURL(new Blob([e.innerHTML],{type:"image/svg+xml"})),o=new Image;o.onload=()=>{s.drawImage(o,6,5,i,i),t(s.getImageData(0,0,r,a))},o.src=n}))),{width:r,height:a,imageDataPromise:o}})),g7(this,"messageDragging",(e=>{W.ZP.isIncognito(this.context.vivaldiWindowId)||W.ZP.isGuestSession(this.context.vivaldiWindowId)?this.props.setIsExpectingDrop(e):h.Z.runtime.sendMessage({dispatchAction:e?n4:s4})})),g7(this,"startDragging",(async(e,t,n)=>{this.cleanupDragging();const s=this.state.draggedSet.toList(),i=s.find((e=>e.active))||s.first();if(!(pn.findDOMNode(this.refTabStrip.current)instanceof Element))return;const r=this.refTabs.get(e.page.id.toString())?.current;if(!r)return;const a=r.refTab.current,o=a instanceof Element?a.getBoundingClientRect():{left:0,top:0},l=(0,Kd.av)(i),c=this.isTabStackingEnabled()&&V.ZP.isGroup(l,this.context.vivaldiWindowId)?4:0,u=r.refFavicon.current,m=o.left,d=o.top-c,{width:h,height:p,imageDataPromise:g}=this.getDragImageData(u,i.title),N=await g;this.setState({isDragging:!0},(()=>{this.messageDragging(!0),this.setupDragEndHandler(s),b.Z.tabsPrivate.startDrag({windowId:this.context.vivaldiWindowId,mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:s.map((e=>e.id)).toJS(),active:i.id,activeIndex:i.index,dragSource:this.props.isSubstrip?"stack":"main",sourceWindow:this.context.vivaldiWindowId}),imageData:N?.data.buffer,url:i.url,title:i.title,posX:m,posY:d,width:h,height:p,cursorX:t,cursorY:n});const r={yieldBefore:void 0,yieldAfter:void 0},a=this.props.tabs.findIndex((e=>this.state.draggedActive?.id===e.page.id));a>0?r.yieldAfter=this.props.tabs.get(a-1)?.page.id:a<this.props.tabs.size-1&&(r.yieldBefore=this.props.tabs.get(a+1)?.page.id),this.setState({...r,pageIdsHiddenForDrag:s.toSet().map((e=>e.id)),isDraggingPinnedTab:e.page.pinned})}))})),g7(this,"cleanupDragging",(()=>{this.context.removeEventListener("touchmove",this.handleTouchMove,!0),this.context.removeEventListener("mousemove",this.handleMouseMove,!0),this.context.removeEventListener("touchend",this.handleMouseUp,!0),this.context.removeEventListener("mouseup",this.handleMouseUp,!0),Nn.setWebviewPointerEvents(!0,this.context.document),Wl.Z.unbind("esc",this.handleEscKey),b7(this,y7)&&this.setState({start:[0,0]})})),g7(this,"clearForceHover",(()=>{this.setState((e=>e.freeze?{freeze:{...e.freeze,nextId:-1}}:null))})),g7(this,"createFlexBoxLayout",mo()(1)(((e,t,n,s,i)=>{const r=parseInt(this.props.prefValues[P.kTabsActiveMinSize]),a="row"===t;let o=!this.props.isSubstrip&&e.first()?.page.pinned&&!a&&this.props.prefValues[P.kTabsShowSeparator];const l=this.props.prefValues[P.kTabsStackingMode],c="accordion"===l&&this.props.openAccordions&&this.props.openAccordions.length>0?e.flatMap((e=>{if("group"===e.type&&this.accordionIsOpen((0,Kd.av)(e.page))){const t=e.get("pages"),n=t.size-1;return t.map(((e,t)=>new v7({type:"accordionTab",page:e,id:e.id,isFirst:0===t,isLast:t===n})))}return[e]})):e,u={style:{flexDirection:t,width:n,height:s},children:c.reduce(((e,t)=>{const c=t.page.pinned,u=t.page.active,m=i.tabStackingEnabled&&!this.props.isSubstrip&&"group"===t.type,d=this.getTabStyle(t,a,u,c,m,i.isThumb);i.freeze&&!c&&(d.width=d.maxWidth=d.minWidth=i.freeze.width,d.height=d.maxHeight=d.minHeight=i.freeze.height),u&&!c&&i.freeze&&i.freeze.width<r&&(d.width=d.maxWidth=d.minWidth=r);const h=!m&&i.pageIdsHiddenForDrag.has(t.page.id),p=m&&t.pages.every((e=>i.pageIdsHiddenForDrag.has(e.id)));(h||p)&&(a?d.width=d.maxWidth=d.minWidth=0:d.height=d.maxHeight=d.minHeight=0),o&&!c&&(e.push({type:"separator",style:{...d,maxHeight:20,minHeight:20,height:20}}),o=!1);i.yieldBefore===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,a,u,c,m,i.isThumb)}}),e.push({type:"tab",tab:t,style:d,isFirst:Boolean(t.isFirst),isLast:Boolean(t.isLast)}),"accordion"!==l||!m&&!t.isLast||h||p||e.push({type:"accordionToggle",tab:t,style:{width:a?16:n,height:a?s:16,alignSelf:a?"flex-end":"center"}});return i.yieldAfter===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,a,u,c,m,i.isThumb)}}),e}),[]).concat({type:"button",style:{width:30,height:30,alignSelf:a?"flex-end":"center"}})};return m7()(u),u}))),g7(this,"getTabConfig",((e,t,n,s)=>({key:e.id.toString(),data:{type:"tab",tab:e,zIndex:e.isFirst||e.get("page").active?2:1},style:{x:this.maybeSpring(t.left,C7),y:this.maybeSpring(t.top,C7),width:t.width,height:t.height}}))),g7(this,"removeFromTabStack",(e=>{if(this.props.isSelecting){const e=this.props.pageSelection.flatMap((e=>{const t=V.ZP.getPageById(e);return t?[t]:[]})).toList();e.isEmpty()||$.Z.removeFromTabStack(e)}else{const t=V.ZP.getPageById(e);t&&$.Z.removeFromTabStack(t)}})),g7(this,"getDraggedPages",(e=>{const{isSelecting:t,pageSelection:n}=this.props;return t&&n.has(e.id)?this.props.pageSelection.reduce(((e,t)=>{const n=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t));return n?e.push(n):e}),(0,sa.List)()).sortBy((e=>e.index)).toArray():[e]})),g7(this,"checkSelected",(e=>this.props.pageSelection.contains(e))),g7(this,"getSelectionCount",(()=>this.props.pageSelection.size)),g7(this,"getStyles",(()=>{const e=this.props.prefValues[P.kTabsThumbnails],t=this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:this.isTabStackingEnabled(),isThumb:e});if(!t.children)return[];return t.children.map(((e,t)=>{const{direction:n,tabs:s,isExpectingDrop:i}=this.props,{layout:r,tab:a}=e,o="row"===n;if(!r)return;let l,c;if(i||s.isEmpty()?(l=r.left,c=r.top):(l=this.maybeSpring(r.left,C7),c=this.maybeSpring(r.top,C7)),isNaN(r.left)||isNaN(r.width)){0;const e=this.state.freeze?this.state.freeze.width:180;r.left=o?t*e:0,r.width=e,r.top=o?0:t*E7,r.height=E7}switch(e.type){case"tab":return a?this.getTabConfig(a,r,t,n):null;case"blank":return{key:`space-${t}`,data:{type:"space",zIndex:0},style:{x:r.left,y:r.top,width:this.state.isDraggingPinnedTab&&o?31:r.width,height:r.height}};case"button":return{key:"button",data:{type:"button",zIndex:0},style:{x:l,y:c,width:r.width,height:r.height}};case"separator":return{key:"separator",data:{type:"separator",zIndex:0},style:{x:r.left,y:r.top,width:r.width,height:r.height}};case"accordionToggle":return{key:`accordionToggle-${t}`,data:{type:"accordionToggle",tab:a},style:{x:r.left,y:o?0:r.top,width:r.width,height:r.height}};default:console.warn("Unknown Element",e.type)}})).filter(Boolean)})),g7(this,"getFavicon",mo()(50)(((e,t)=>Pt.jk.getFaviconWithFallback(e,t)))),g7(this,"getElementStyle",mo()(300)(((e,t,n,s,i,r)=>({"--PositionX":`${e}px`,"--PositionY":`${t}px`,"--Opacity":n,"--Height":`${s}px`,"--Width":`${i}px`,"--ZIndex":r||0})))),g7(this,"setTabRef",((e,t)=>{const n=s.createRef();n.current=t,this.refTabs.set(e.toString(),n)})),g7(this,"getNewTabButtonStyle",mo()(1)(((e,t,n,s,i,r)=>({"--PositionX":`${e}px`,"--PositionY":`${t}px`,"--Opacity":n,"--Height":`${s}px`,"--Width":`${i}px`,"--ZIndex":r||0,left:`${e}px`,top:`${t}px`}))))}componentDidMount(){this.setOverflowClass(),this.allowDelayedAnimation(),this.windowStoreToken=W.ZP.addListener(this.onWindowStoreChanged),Ys.Z.addListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.addEventListener("dragenter",this.windowDragEnterHandler),this.context.addEventListener("dragleave",this.windowDragLeaveHandler),this.context.addEventListener("dragover",this.windowDragOverHandler),this.context.addEventListener("drop",this.windowDropHandler),H.Z.addChangeListener(this._alarmsChanged),N7(this,y7,!0)}componentWillUnmount(){N7(this,y7,!1),this.animateTimeoutId&&clearTimeout(this.animateTimeoutId),this.windowStoreToken.remove(),Ys.Z.removeListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.removeEventListener("dragenter",this.windowDragEnterHandler),this.context.removeEventListener("dragleave",this.windowDragLeaveHandler),this.context.removeEventListener("dragover",this.windowDragOverHandler),this.context.removeEventListener("drop",this.windowDropHandler),H.Z.removeChangeListener(this._alarmsChanged)}componentDidUpdate(e){this.props.tabs===e.tabs&&this.props.maxWidth===e.maxWidth&&this.props.maxHeight===e.maxHeight||this.setOverflowClass(),this.props.pages!==e.pages&&(this.maybeResetDragging(),this.props.pages.size>e.pages.size&&this.state.freeze&&this.setState({freeze:null}))}allowDelayedAnimation(){this.animateTimeoutId=setTimeout((()=>this.setState({animate:!0})),1e3)}scheduleTabPositionUpdate(e){this.pendingPositionInfo=e,this.requestedFrame||(this.requestedFrame=requestAnimationFrame(this.doPositionUpdate))}delayedActivateWindow({screenX:e,screenY:t}){_7(e,t,250,(()=>h.Z.windows.update(this.context.vivaldiWindowId,{focused:!0})))}setupDragEndHandler(e){const t=(n,s,i,r)=>{if(b.Z.tabsPrivate.onDragEnd.removeListener(t),this.messageDragging(!1),n)this.abortAndRevertDragging();else if(s){if(e.size===V.ZP.getPages(this.context.vivaldiWindowId).count())return void this.maybeResetDragging();e.size&&$.Z.detachPage(e,i,r)}setTimeout((()=>this.maybeResetDragging()),100)};b.Z.tabsPrivate.onDragEnd.addListener(t)}getTabStyle(e,t,n,s,i,r){const a={flex:1,zIndex:0},{prefValues:o,isSubstrip:l}=this.props;return t?(a.maxWidth=180,a.maxHeight=150,a.minHeight=n||l?150:E7,n&&(a.minWidth=parseInt(o[P.kTabsActiveMinSize])||31),s&&(a.minWidth=31,a.maxWidth=31,a.flex=0)):(a.maxWidth=360,a.maxHeight=E7,a.minHeight=E7,r&&(a.maxHeight=150),n&&(a.minHeight=E7),s&&(a.minHeight=E7,a.maxHeight=E7,a.flex=0),i&&"off"!==o[P.kTabsStackingMode]&&("dotted"===o[P.kTabsStackingMode]||o[P.kTabsStackingPreferDotted])&&(a.minHeight=37)),a}render(){const e=this.props.prefValues[P.kTabsStackingMode],t=this.getStyles();return s.createElement(vQ.bg,{ref:this.refTabStrip,styles:t,children:t=>s.createElement("div",{className:"tab-strip",onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,onDoubleClick:this.state.freeze?e=>e.stopPropagation():null,onContextMenu:e=>this.props.onContextMenu(e,this.props.isSubstrip),__source:{fileName:p7,lineNumber:1960,columnNumber:11}},t.map(((n,i)=>{const{data:r}=n;if(r){if("tab"===r.type){const a=r.tab,o=a.get("page"),l=o.getIn(["extData","ext_id"]),c=o.pendingUrl||o.url,u="group"===a.get("type"),m=Boolean(!this.props.prefValues[P.kTabsTooltip]||!this.state.pageIdsHiddenForDrag.isEmpty()),d=this.props.prefValues[P.kTabsShowCloseButton]&&V.ZP.canClosePage(o),h=(0,Kd.av)(o)||"",p=this.state.pageIdsHiddenForDrag.has(o.id),g=this.props.tabs.filter((e=>e.id===h)).first()?.pages.size||0,b="accordion"===e&&g>1&&this.accordionIsOpen(h),N=u?a.get("pages"):(0,sa.List)(),f=!u&&p,_=u&&N.every((e=>this.state.pageIdsHiddenForDrag.has(e.id))),v=f||_,E=Boolean(this.state.freeze?.nextId===o.id||this.props.prefValues[P.kTabsCloseButtonPermanent]&&n.style.width>66),C=o.pinned&&!this.state.isDraggingPinnedTab||this.state.isDraggingPinnedTab&&!o.pinned?void 0:this.handleTabPosition;let w=0;if(b&&a.isFirst){let e=0;for(let n=i;n<t.length;n++){const s=t[n];if(e===g)break;0===n&&"space"===s.data?.type||("tab"===s.data?.type&&(e+=1),w+="row"===this.props.direction?s.style.width:s.style.height)}w>0&&(w+=16)}const y=this.getElementStyle(n.style.x,n.style.y,n.style.opacity,n.style.height,this.props.isSubstrip&&"column"===this.props.direction?Math.max(E7,this.props.maxWidth):n.style.width,r.zIndex);return s.createElement(c7,{key:n.key,ref:e=>e&&this.setTabRef(o.id,e),id:`tab-${n.key}`,pageId:o.id,url:c,active:o.active,acceptsDrop:o.id===this.state.yieldOver,discarded:o.discarded,incognito:o.incognito,pinned:o.pinned,isUnread:V.ZP.isUnread(o),groupId:h,tilingType:o.getIn(["extData","tiling","type"]),tilingId:(0,Kd.jA)(o)||"",extId:l,faviconUrl:this.getFavicon(c,o.favIconUrl),title:o.title,thumbnail:o.getIn(["extData","thumbnail"]),stackSize:N.size,isInsideAccordion:b,isFirstInGroup:a.isFirst,isLastInGroup:a.isLast,isExpectingDrop:this.props.isExpectingDrop,isSelecting:this.props.isSelecting,getSelectionCount:this.getSelectionCount,isStack:u,isSubstrip:this.props.isSubstrip,isInternalPage:(0,As.to)(o.url),removeFromTabStack:this.removeFromTabStack,getDraggedPages:this.getDraggedPages,isSelected:this.checkSelected(o.id),checkSelected:this.checkSelected,isHiddenForDrag:p,isHidden:v,pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,smallTab:n.style.width<=66,miniTab:n.style.width<=E7,direction:this.props.direction,prefValues:this.props.prefValues,tabPosition:this.props.tabPosition,addressBarVisible:this.state.addressBarVisible,highlighted:this.state.highlightedId===`tab-${n.key}`,forceHover:E,clearForceHover:this.clearForceHover,onMoveFocus:this.moveFocus,onStackMenu:this.openStackMenu,onLeaveBar:this.handleLeaveBar,setPageIdsHiddenForDrag:this.setPageIdsHiddenForDrag,closePage:this.closeAndFreeze,onActivate:this.props.onActivateTab,onDragLeave:this.onDragLeaveHandler,droppedTabHandler:this.droppedTabHandler,accordionSize:w,handleTabPosition:C,shouldShowCloseButton:d,onCreateTab:this.props.onCreateTab,handleExpandAccordion:this.props.handleExpandAccordion,handleCompressAccordion:this.props.handleCompressAccordion,doMonitorAlarms:this.state.activeAlarms.has(l),isTabStackingEnabled:this.isTabStackingEnabled,isTooltipDisabled:m,isSubstripVisible:this.props.isSubstripVisible,getTooltipContent:this.props.getTooltipContent,elementStyle:y,posX:n.style.x,posY:n.style.y,closeAndFreeze:this.closeAndFreeze,initDragging:this.initDragging,toggleAutoExpandAccordion:this.props.toggleAutoExpandAccordion,__source:{fileName:p7,lineNumber:2059,columnNumber:19}})}if("space"===r.type){const e=this.getElementStyle(n.style.x,n.style.y,n.style.opacity,n.style.height,n.style.width,r.zIndex);return s.createElement("div",{key:n.key,className:bn()({"tab-position":this.props.isSubstrip||!this.state.yieldOver,"tab-yield-space":this.props.isSubstrip||!this.state.yieldOver}),style:e,onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,__source:{fileName:p7,lineNumber:2141,columnNumber:19}})}if("separator"===r.type){const e=this.getElementStyle(n.style.x,n.style.y,n.style.opacity,n.style.height,n.style.width,r.zIndex);return s.createElement("div",{key:n.key,className:"separator",style:e,__source:{fileName:p7,lineNumber:2164,columnNumber:19}},s.createElement("hr",{__source:{fileName:p7,lineNumber:2169,columnNumber:21}}))}if("accordionToggle"===r.type){const e=r.tab,t=e.get("page"),i=(0,Kd.av)(t),a=this.accordionIsOpen(i),o=a?"row"===this.props.direction?"left":"up":"row"===this.props.direction?"right":"down",l=this.getElementStyle(n.style.x,n.style.y,n.style.opacity,n.style.height,n.style.width,r.zIndex);return s.createElement(S6,{key:n.key,orientation:o,isActive:e.page.active,style:l,onClick:()=>this.handleAccordionToggle(i,a),title:a?(0,ue.Z)("Reduce Tab Stack"):(0,ue.Z)("Expand Tab Stack"),__source:{fileName:p7,lineNumber:2189,columnNumber:19}})}return"button"!==r.type||this.props.isSubstrip&&!this.props.isSubstripVisible?void 0:s.createElement("div",{key:n.key,className:"toolbar toolbar-tabbar toolbar-large tab-position",__source:{fileName:p7,lineNumber:2203,columnNumber:19}},s.createElement(I6,{id:w7,style:this.getNewTabButtonStyle(n.style.x,n.style.y,n.style.opacity,n.style.height,n.style.width,r.zIndex),highlighted:this.state.highlightedId===w7,tabPosition:this.props.tabPosition,onCreateTab:this.props.onCreateTab,onMoveFocus:this.moveFocus,onLeaveBar:this.handleLeaveBar,__source:{fileName:p7,lineNumber:2207,columnNumber:21}}))}}))),__source:{fileName:p7,lineNumber:1956,columnNumber:7}})}}g7(S7,"contextType",Vs.Z);const T7=S7;function k7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I7="vivaldi/x-tab-entries";class A7 extends s.PureComponent{constructor(...e){super(...e),k7(this,"trashButton",s.createRef()),k7(this,"state",{trash:u4.Z.getTrash()}),k7(this,"onTrashStoreChange",(()=>{this.setState({trash:u4.Z.getTrash()})})),k7(this,"emptyTrash",(()=>{o0.Z.emptyTrash()})),k7(this,"undeleteTab",(e=>{o0.Z.undeleteTab(e)})),k7(this,"undeleteWindow",(e=>{o0.Z.undeleteWindow(e)})),k7(this,"undo",(()=>{if(this.state.trash.length>0){const e=this.state.trash[0];e.tab?this.undeleteTab(e.tab):e.window&&this.undeleteWindow(e.window)}})),k7(this,"_onCommandSpy",(()=>{this.trashButton.current&&this.trashButton.current.showMenu()})),k7(this,"_getContextMenuPromise",(()=>{const e=Ss.getOptionFunction("closedtab");return Ss.getNamedMenu("closedtab",(async t=>"CONTEXT_CONTAINER_CLOSED_TAB"===t.action?{items:F.Z.getClosedTabContainer(),...e(t,{})}:{...e(t,{})}))})),k7(this,"onDrop",(e=>{const t=e.dataTransfer.getData(I7);if(t){e.preventDefault(),e.stopPropagation();const n=JSON.parse(t).ids.map((e=>parseInt(e))).map((e=>V.ZP.getPages(this.context.vivaldiWindowId).find((t=>t.id===e)))).filter(Boolean);$.Z.closePage((0,sa.List)(n))}}))}componentDidMount(){u4.Z.addChangeListener(this.onTrashStoreChange),Ys.Z.addListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}componentWillUnmount(){u4.Z.removeChangeListener(this.onTrashStoreChange),Ys.Z.removeListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}render(){return s.createElement(ko,{ref:this.trashButton,className:"toggle-trash",onDrop:this.onDrop,onDragEnter:qo.default,image:cn.nre.large,onMiddleClick:this.undo,menu:this._getContextMenuPromise,menuOrigin:"bottomLeft",mimeType:I7,edgeAmount:0,tooltip:(0,ue.Z)("Show Closed Tabs")+"\n"+(0,ue.Z)("$1 click to reopen last closed tab",[(0,ue.Z)("key","Control")]),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Trash.jsx",lineNumber:123,columnNumber:12}})}}k7(A7,"contextType",Vs.Z);const Z7=A7;var P7=n(84177),D7=n(5531),M7=n(34155),O7="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabBar.jsx";function x7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L7(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,B7(e,t,"get"))}function R7(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,B7(e,t,"set"),n),n}function B7(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const F7=30,U7=150,V7=30,H7=360,W7=320,z7=[P.kAddressBarInlineSearchEnabled,P.kAddressBarShowProgress,P.kKeyboardTabToAll,P.kMediaRouterMediaRemotingEnabled,P.kMouseWheelTabSwitch,P.kPanelsPosition,P.kTabsActiveMinSize,P.kTabsAlignNext,P.kTabsBarWidth,P.kTabsCloseButtonPermanent,P.kTabsClosePinned,P.kTabsCounterDetection,P.kTabsCycleByRecentOrder,P.kTabsDimHibernated,P.kTabsDoubleClickClose,P.kTabsBarHeight,P.kTabsMinimize,P.kTabsPageLoadInfo,P.kTabsNeverCloseLast,P.kTabsSelectionEnabled,P.kTabsBarSliderXpos,P.kTabsBarSliderYpos,P.kTabsShowCloseButton,P.kTabsShowSeparator,P.kTabsStackingAllowDnd,P.kTabsStackingAllowRename,P.kTabsStackingMode,P.kTabsStackingNameMap,P.kTabsStackingOpenAccordions,P.kTabsStackingSubstripLocked,P.kTabsThumbnails,P.kTabsTooltip,P.kTabsUnread,P.kTabsVisualSwitchEnable,P.kThemeUseAnimation,P.kTabsStackingPreferDotted,P.kTabsStackingAutoExpand],G7=function(e,t,n){const s=(0,Kd.av)(e)||"",i=s&&("substrip"===n||"accordion"===n)?V.ZP.getTabs(t,!0,V.ZP.getGroup(s,t)):(0,sa.List)(),r="off"===n;return{tabs:V.ZP.getTabs(t,r),pages:V.ZP.getPages(t),activePageId:e.id,url:e.url,incognito:e.incognito,tilingId:e.getIn(["extData","tiling","id"]),groupId:s,pinned:e.pinned,isSelecting:V.ZP.isSelecting(t),pageSelection:V.ZP.getSelection(t),stackTabs:i}};var K7=new WeakMap,j7=new WeakMap,Y7=new WeakMap;class $7 extends s.PureComponent{constructor(e,t){super(e),K7.set(this,{writable:!0,value:void 0}),j7.set(this,{writable:!0,value:!1}),x7(this,"visibleOnMount",this.props.visible),x7(this,"refResizeObserver",s.createRef()),x7(this,"refTabBarContainer",s.createRef()),Y7.set(this,{writable:!0,value:!1}),x7(this,"handleKeyboardChange",((e,t,n)=>{R7(this,j7,0!==n)})),x7(this,"updateDocumentTitleById",(e=>{const t=V.ZP.getPageById(e);t&&this.updateDocumentTitle(t)})),x7(this,"updateDocumentTitle",(e=>{const t=Pt.jk.getDisplayTitle(e);t!==this.context.document.title&&(this.context.document.title=t)})),x7(this,"onWindowResize",(()=>{clearTimeout(this._resizingTimeout),this.setState({isResizing:!0}),this._resizingTimeout=setTimeout((()=>{this.setState({isResizing:!1})}),1e3)})),x7(this,"setIsExpectingDrop",(e=>{this.setState({isExpectingDrop:e})})),x7(this,"closePage",(async e=>{R7(this,Y7,!0),await $.Z.closePage(e),R7(this,Y7,!1),this._onPageStoreChange()})),x7(this,"onMessageReceived",((e,t)=>{if(h.Z.runtime.id===t.id&&"object"==typeof e&&null!=e)switch(e.dispatchAction){case n4:return void this.setIsExpectingDrop(!0);case s4:return this.setIsExpectingDrop(!1),void this._onPageStoreChange()}})),x7(this,"setTabBarWidth",((e,t=!0)=>{this.setState({tabBarWidth:e},(()=>t&&st.Z.set(P.kTabsBarWidth,e)))})),x7(this,"setTabBarHeight",((e,t=!0)=>{this.setState({tabBarHeight:e},(()=>t&&st.Z.set(P.kTabsBarHeight,e)))})),x7(this,"setInnerTabBarWidth",((e,t=!0)=>{this.setState({tabBarSliderXpos:e},(()=>t&&st.Z.set(P.kTabsBarSliderXpos,e)))})),x7(this,"setInnerTabBarHeight",((e,t=!0)=>{this.setState({tabBarSliderYpos:e},(()=>t&&st.Z.set(P.kTabsBarSliderYpos,e)))})),x7(this,"_onPageStoreChange",(()=>{if(L7(this,Y7)||this.state.isExpectingDrop)return;const e=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId);this.updateDocumentTitle(e),this.setState(G7(e,this.context.vivaldiWindowId,this.props.prefValues[P.kTabsStackingMode]),(()=>this.updateAccordionStatus(e)))})),x7(this,"_onMediaStateStoreChanged",(()=>{const e=V.ZP.unsafeGetActivePage(),t=Qq.getState().get(e.id)||(0,sa.Set)();this.setState({mediaState:t})})),x7(this,"updateAccordionStatus",(e=>{this.props.prefValues[P.kTabsStackingAutoExpand]&&"accordion"===this.props.prefValues[P.kTabsStackingMode]&&this.setState((0,T.Uy)((t=>{const n=t.openAccordions.findIndex((e=>e.auto));-1!==n&&t.openAccordions.splice(n,1);const s=(0,Kd.av)(e);s&&t.openAccordions.push({groupId:s,auto:!0})})))})),x7(this,"isSelecting",(()=>this.props.prefValues[P.kTabsSelectionEnabled]&&this.state.isSelecting&&!this.state.pageSelection.isEmpty())),x7(this,"getSelectedPages",(()=>this.isSelecting()?this.state.pageSelection.reduce(((e,t)=>{const n=V.ZP.getPages(this.context.vivaldiWindowId).find((e=>e.id===t));return n?e.push(n):e}),(0,sa.List)()).sortBy((e=>e.index)):(0,sa.List)())),x7(this,"_onCommandSpy",(e=>{switch(e){case"COMMAND_BOOKMARK_SELECTED_TABS":i.Z.bookmarkPages(this.getSelectedPages(),this.context.vivaldiWindowId,!1,tn.ZP.getRootNode().id);break;case"COMMAND_SAVE_SELECTED_SESSION":const e=this.getSelectedPages().map((e=>e.id)).toArray();e.length>0&&se.Z.showSaveSession({mode:"selected",ids:e});break;case"COMMAND_NEW_TAB":this.createTab("keyboard")}})),x7(this,"onTabStoreChange",(e=>{const{action:t,url:n,maybeEvent:s,addOpenerTabId:i}=e,r="off"===this.props.prefValues[P.kTabsStackingMode];switch(t){case"newBackgroundTab":M7.nextTick((()=>$.Z.openURL(n,{inBackground:!0,addOpenerTabId:i})));break;case"closeAllButActiveTab":M7.nextTick((()=>this.closeAllButActiveTab()));break;case"switchTabBackBySetting":this.switchBackBySetting(s);break;case"switchTabForwardBySetting":this.switchForwardBySetting(s);break;case"switchTabBackByHistory":this.switchBackByHistory(s);break;case"switchTabForwardByHistory":this.switchForwardByHistory(s);break;case"switchTabBackByOrder":this.switchBackByOrder(s);break;case"switchTabForwardByOrder":this.switchForwardByOrder(s);break;case"viewPageSource":this.state.url.startsWith("view-source:")||M7.nextTick((()=>$.Z.openURL(`view-source:${this.state.url}`,{incognito:this.state.incognito})));break;case"stackUntile":M7.nextTick((()=>{this.isSelecting()?this.getSelectedPages().map((e=>e.getIn(["extData","tiling","id"]))).filter(Boolean).toSet().forEach($.Z.untileTileGroup):M7.nextTick((()=>$.Z.untileTileGroup(this.state.tilingId,this.context.vivaldiWindowId)))}));break;case"stackCreate":if(r)break;M7.nextTick((()=>{if(this.isSelecting())$.Z.createTabStack(this.getSelectedPages());else{const e=V.ZP.getPages(this.context.vivaldiWindowId).filter((e=>!(0,Kd.av)(e)&&!1===e.pinned));if(e.count()>1){const[t,n]=(0,b4.d)(V.ZP.unsafeGetActivePage(),V.ZP.getTabs(this.context.vivaldiWindowId,r));if(n.count()>1){const e=V.ZP.getNewGroupId();g4(e,t),$.Z.createTabStack(n,void 0,e)}else $.Z.createTabStack(e)}}}));break;case"stackDissolve":if(r)break;M7.nextTick((()=>$.Z.expandTabStack(this.state.groupId))),this.handleCompressAccordion(this.state.groupId);break;case"stackRemove":if(r)break;M7.nextTick((()=>this.removeFromTabStack(this.state.pageSelection)));break;case"stackTileGrid":case"stackTileHorizontal":case"stackTileVertical":const e="stackTileGrid"===t?"grid":"stackTileHorizontal"===t?"column":"row";M7.nextTick((()=>{this.isSelecting()?$.Z.tilePages(this.getSelectedPages(),e):this.state.groupId?$.Z.tileTabStack(this.state.groupId,this.context.vivaldiWindowId,e):$.Z.tileLastActive(e,this.context.vivaldiWindowId)}));break;case"tabThumbnail":this.switchTabViewAndEnablePreview();break;case"unloadDialogClosed":R7(this,Y7,!1),this._onPageStoreChange()}})),x7(this,"onActivateTab",(e=>{if(M6.Z.hideTooltip(),e.active)$.Z.clearSelection(this.context.vivaldiWindowId);else{const t="dotted"===this.props.prefValues[P.kTabsStackingMode];$.Z.activateTab(e.id,this.context.vivaldiWindowId,t)}})),x7(this,"createTab",(async(e,t)=>{if(t)return void $.Z.openURL(void 0,{groupId:t});const n=this.props.prefValues[P.kTabsStackingMode],s=V.ZP.getPageById(this.state.activePageId),i=s&&(0,Kd.av)(s);if("dotted"!==n&&"accordion"!==n)if("substrip"!==n)$.Z.openURL();else{const t=this.props.prefValues[P.kTabsStackingSubstripLocked]||this.state.stackTabs.size>1;if("mainStrip"===e||!t)return void $.Z.openURL();if(i)$.Z.openURL(void 0,{groupId:i});else{const e=V.ZP.unsafeGetActivePage(),t=await $.Z.createTabStack((0,sa.List)([e]),e.index);$.Z.openURL(void 0,{groupId:t})}}else i&&"keyboard"===e&&V.ZP.isGroup(i,this.context.vivaldiWindowId)?$.Z.openURL(void 0,{groupId:i}):$.Z.openURL()})),x7(this,"onCreateTab",(e=>this.createTab("mainStrip",e))),x7(this,"onCreateGroupTab",(e=>this.createTab("subStrip",e))),x7(this,"closeAllButActiveTab",(()=>{$.Z.closeOther(V.ZP.unsafeGetActivePage(),!1)})),x7(this,"removeFromTabStack",(e=>{if(this.isSelecting()){const t=e.flatMap((e=>{const t=V.ZP.getPageById(e);return t?[t]:[]})).toList();t.isEmpty()||$.Z.removeFromTabStack(t)}else{const e=V.ZP.unsafeGetActivePage();$.Z.removeFromTabStack(e)}})),x7(this,"muteTab",((e,t)=>{t&&t.stopPropagation(),$.Z.toggleMuting(sa.List.of(e))})),x7(this,"closeSingleTab",((e,t)=>{t?.stopPropagation&&t.stopPropagation(),$.Z.closePage(e)})),x7(this,"switchBackBySetting",(e=>{this.props.prefValues[P.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(e,!1,L7(this,j7)):this.props.prefValues[P.kTabsCycleByRecentOrder]?M7.nextTick((()=>$.Z.cycleByHistory(this.context.vivaldiWindowId,e,{goBack:!0}))):M7.nextTick((()=>$.Z.cycleByOrder(this.context.vivaldiWindowId,e,{goBack:!0})))})),x7(this,"switchForwardBySetting",(e=>{this.props.prefValues[P.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(e,!0,L7(this,j7)):this.props.prefValues[P.kTabsCycleByRecentOrder]?M7.nextTick((()=>$.Z.cycleByHistory(this.context.vivaldiWindowId,e,{goBack:!1}))):M7.nextTick((()=>$.Z.cycleByOrder(this.context.vivaldiWindowId,e,{goBack:!1})))})),x7(this,"switchBackByHistory",(e=>{M7.nextTick((()=>$.Z.cycleByHistory(this.context.vivaldiWindowId,e,{goBack:!0})))})),x7(this,"switchForwardByHistory",(e=>{M7.nextTick((()=>$.Z.cycleByHistory(this.context.vivaldiWindowId,e,{goBack:!1})))})),x7(this,"switchBackByOrder",(e=>{M7.nextTick((()=>$.Z.cycleByOrder(this.context.vivaldiWindowId,e,{goBack:!0})))})),x7(this,"switchForwardByOrder",(e=>{M7.nextTick((()=>$.Z.cycleByOrder(this.context.vivaldiWindowId,e,{goBack:!1})))})),x7(this,"switchTabViewAndEnablePreview",(()=>{const e=this.props.prefValues[P.kTabsThumbnails],t=this.props.tabPosition,{tabBarWidth:n}=this.state,s="left"===t||"right"===t;e?s?st.Z.set(P.kTabsThumbnails,!1):this.switchTabView():(st.Z.set(P.kTabsThumbnails,!0),s&&n===V7&&this.switchTabView())})),x7(this,"switchTabView",(()=>{const e=this.props.tabPosition,{tabBarWidth:t,tabBarHeight:n}=this.state;if("top"===e||"bottom"===e){const e=n<75?U7:F7;this.setTabBarHeight(e)}else{const e=180!==t?180:V7;this.setTabBarWidth(e)}})),x7(this,"onSlidebarPosition",(0,vb.default)(((e,t)=>{const n=this.refTabBarContainer.current;if(!(n instanceof Element))return;const s=n.getBoundingClientRect();switch(this.props.tabPosition){case"top":this.setTabBarHeight(Math.round(t-s.top),!1);break;case"bottom":this.setTabBarHeight(Math.round(s.bottom-t),!1);break;case"left":this.setTabBarWidth(Math.min(Math.round(e-s.left),H7),!1);break;case"right":this.setTabBarWidth(Math.min(Math.round(s.right-e),H7),!1);break;default:throw new Error("Unknown tabbar position")}}),64)),x7(this,"handleSliderDown",(()=>{this.setState({isResizing:!0})})),x7(this,"handleSliderUp",(()=>{this.setState({isResizing:!1}),"top"===this.props.tabPosition||"bottom"===this.props.tabPosition?(st.Z.set(P.kTabsBarHeight,this.state.tabBarHeight),this.snapToEdge()):st.Z.set(P.kTabsBarWidth,this.state.tabBarWidth)})),x7(this,"onInnerSlidebarPosition",(0,vb.default)(((e,t)=>{const n=pn.findDOMNode(this.refResizeObserver.current);if(!(n instanceof Element))return;const s=n.getBoundingClientRect();switch(this.props.tabPosition){case"top":this.setInnerTabBarHeight(Math.round(t-s.top),!1);break;case"bottom":this.setInnerTabBarHeight(Math.round(s.bottom-t),!1);break;case"left":this.setInnerTabBarWidth((0,Q_.default)(Math.round(e-s.left),V7,330),!1);break;case"right":this.setInnerTabBarWidth((0,Q_.default)(Math.round(s.right-e),V7,330),!1);break;default:throw new Error("Unknown tabbar position")}}),64)),x7(this,"handleInnerSliderDown",(()=>{this.setState({isResizing:!0})})),x7(this,"handleInnerSliderUp",(()=>{this.setState({isResizing:!1}),"top"===this.props.tabPosition||"bottom"===this.props.tabPosition?(st.Z.set(P.kTabsBarSliderYpos,this.state.tabBarSliderYpos),this.snapToEdge()):this.setInnerTabBarWidth(this.state.tabBarSliderXpos)})),x7(this,"switchInnerTabView",(()=>{const e=this.props.tabPosition,{tabBarWidth:t,tabBarHeight:n,tabBarSliderXpos:s}=this.state;if("top"===e||"bottom"===e){const e=n<75?U7:F7;this.setInnerTabBarHeight(e)}else{const e=s!==t/2?t/2:V7;this.setInnerTabBarWidth(e)}})),x7(this,"snapToEdge",(()=>{const e=this.refTabBarContainer.current;if(!(e instanceof HTMLElement))return;let t=parseInt(e.style.height);t>F7&&t<50?t=F7:t<U7&&t>130&&(t=U7),this.setTabBarHeight(t)})),x7(this,"getGroupHighlightId",((e,t)=>V.ZP.getGroupHighlightId(e,t))),x7(this,"getTabStackThumbnailsContextMenu",((e,t)=>{const n=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(e=>{switch(e.action){case"CONTEXT_CLOSE":return Promise.resolve({handler:this.closeSingleTab.bind(this,t),...n(e,{})});case"CONTEXT_TABSTACK_REMOVE_FROM":return Promise.resolve({handler:()=>this.removeFromTabStack(this.state.pageSelection),...n(e,{})});default:return Promise.resolve({...n(e,{})})}}))})),x7(this,"getTabBarContextMenu",((e,t)=>{const{prefValues:n}=this.props,s=W.ZP.isGuestSession(this.context.vivaldiWindowId),r=Ss.getOptionFunction(e);return Ss.getNamedMenu(e,(async e=>{switch(e.action){case"CONTEXT_NEW":return{handler:()=>this.createTab(t?"subStrip":"mainStrip"),...r(e,{})};case"CONTEXT_TOGGLE_SUBSTRIP_LOCK":{const t=n[P.kTabsStackingSubstripLocked];return{handler:()=>st.Z.set(P.kTabsStackingSubstripLocked,!t),visible:"substrip"===n[P.kTabsStackingMode],checked:t,...r(e,{})}}case"CONTEXT_BOOKMARK_ALL":return{handler:()=>i.Z.bookmarkAllOpenPages(this.context.vivaldiWindowId,tn.ZP.getRootNode().id),visible:!s,...r(e,{})};case"CONTEXT_SAVE_SESSION":return{visible:!s,...r(e,{})};case"CONTEXT_REOPEN":return{visible:Boolean(u4.Z.getTrash().length),...r(e,{})};default:return{...r(e,{})}}}))})),x7(this,"onAuxClick",((e,t)=>{e.button===Nn.kCenter&&this.createTab(t?"subStrip":"mainStrip"),e.preventDefault()})),x7(this,"onDoubleClick",((e,t)=>{e.button===Nn.kLeft&&"top"!==this.props.tabPosition&&this.createTab(t?"subStrip":"mainStrip")})),x7(this,"getTooltipPlacement",(()=>({top:"below",bottom:"above",left:"after",right:"before"}[this.props.tabPosition]))),x7(this,"getTooltipMediaState",(e=>this.state.activePageId===e?this.state.mediaState:Qq.getState().get(e)||(0,sa.Set)())),x7(this,"getTooltipContent",((e,t)=>{const n=V.ZP.getPageById(e);if(!n)return{width:0,height:0,content:null};const{prefValues:i}=this.props;let r,a;const o=(0,iJ.xz)(n)&&!t;if("off"!==i[P.kTabsStackingMode]&&o){const e=(0,Kd.av)(n);r=V.ZP.getGroup(e,this.context.vivaldiWindowId),a=e?this.getGroupHighlightId(e,this.context.vivaldiWindowId):null}else r=sa.List.of(n),a=null;const l=!o&&(0,iJ.ZN)(n),c=o?s.createElement("div",{className:"tab-group",__source:{fileName:O7,lineNumber:1154,columnNumber:7}},r.map((e=>s.createElement("div",{key:e.id,className:bn()({"tooltip-item":!0,active:e.active,"last-active":a&&a===e.id}),onMouseDown:t=>Y6(this.context,[e],t),onContextMenu:t=>this.onTabStackTooltipContextMenu(e,t),onClick:()=>this.onActivateTab(e),onAuxClick:t=>{t.button===Nn.kCenter&&(t.preventDefault(),t.stopPropagation(),this.closeSingleTab(e))},__source:{fileName:O7,lineNumber:1156,columnNumber:11}},s.createElement(UW,{src:e.getIn(["extData","thumbnail"]),__source:{fileName:O7,lineNumber:1176,columnNumber:13}}),s.createElement("div",{className:"thumbnail-caption",__source:{fileName:O7,lineNumber:1178,columnNumber:13}},this.renderThumbnailText(e),s.createElement("span",{className:"thumbnail-buttons",__source:{fileName:O7,lineNumber:1180,columnNumber:15}},s.createElement(Ls,{className:"favicon",url:e.url,loadType:"page",__source:{fileName:O7,lineNumber:1181,columnNumber:17}}),s.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:cn.kze},tabIndex:i[P.kKeyboardTabToAll],onClick:t=>this.closeSingleTab(e,t),__source:{fileName:O7,lineNumber:1182,columnNumber:17}}),this.renderAudioIcon(e))))))):s.createElement("div",{className:"tab-solo",__source:{fileName:O7,lineNumber:1135,columnNumber:7}},s.createElement("div",{key:"tabbar_tooltip",className:bn()({"tooltip-item":!0,active:n.active}),__source:{fileName:O7,lineNumber:1136,columnNumber:9}},!l&&s.createElement(UW,{src:n.getIn(["extData","thumbnail"]),__source:{fileName:O7,lineNumber:1143,columnNumber:13}}),s.createElement("div",{className:"thumbnail-caption",__source:{fileName:O7,lineNumber:1145,columnNumber:11}},this.renderThumbnailText(n),s.createElement("span",{className:"thumbnail-buttons",__source:{fileName:O7,lineNumber:1147,columnNumber:13}},this.renderAudioIcon(n))))),u=l?F7:210,m=this.context.innerWidth-("left"===this.props.tabPosition||"right"===this.props.tabPosition?this.getWidth():0),d=this.context.innerHeight-("top"===this.props.tabPosition||"bottom"===this.props.tabPosition?this.getHeight():0);if(!o)return{width:222,height:u,content:c};let h=W7,p=92*r.count();if(p>d){const e=Math.floor(d/92),t=Math.ceil(r.count()/e);h=W7*t,p=92*Math.ceil(r.count()/t)}return{width:Math.min(h,Math.floor(m/W7)*W7),height:Math.min(p,92*Math.floor(d/92)),content:c}})),x7(this,"renderThumbnailText",(e=>{const t=Pt.jk.getDisplayTitle(e);return s.createElement("span",{className:"thumbnail-text",__source:{fileName:O7,lineNumber:1242,columnNumber:13}},s.createElement("strong",{className:"title",__source:{fileName:O7,lineNumber:1243,columnNumber:7}},t.length>245?t.substring(0,240)+"...":t),!Pt.jk.isInternalUrl(e.url)&&(0,As.C3)(e.url)&&s.createElement("span",{className:"url",__source:{fileName:O7,lineNumber:1249,columnNumber:9}},new URL(e.url).hostname))})),x7(this,"renderAudioIcon",(e=>{const t=this.getTooltipMediaState(e.id);if(t.has("playing")||t.has("muting"))return s.createElement("button",{className:"tooltip-audio-button",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.muteTab.bind(this,e),__source:{fileName:O7,lineNumber:1258,columnNumber:9}},s.createElement(P0,{location:e.active?"tabActive":"tab",animated:this.props.prefValues[P.kThemeUseAnimation],mediaState:t,__source:{fileName:O7,lineNumber:1262,columnNumber:11}}))})),x7(this,"getTabDirection",(()=>{const e=this.props.tabPosition;return"left"===e||"right"===e?"column":"row"})),x7(this,"setOverflowClass",((e,t)=>{t?this.setState({tabStripOverflow:e}):this.setState({tabBarOverflow:e})})),x7(this,"onResize",(([e])=>{if(!L7(this,K7))return;const t=e.target;this.setState((e=>({tabStripWidth:t.clientWidth,tabStripHeight:t.clientHeight,tabBarContainerWidth:t.parentElement?.clientWidth})))})),x7(this,"getWidth",(()=>{if(!this.props.visible)return 0;const e=this.props.theme.simpleScrollbar?P7.eF:P7.nn,{tabBarWidth:t}=this.state,n=V7*(this.isSubstripVisible()?2:1)+(this.state.tabBarOverflow?e:0)+(this.state.tabStripOverflow?e:0);return(0,Q_.default)(t,n,360)||n})),x7(this,"getHeight",(()=>{if(!this.props.visible)return 0;const{tabBarHeight:e}=this.state,t=this.isSubstripVisible()?61:F7;if(!this.props.prefValues[P.kTabsThumbnails])return t;return(0,Q_.default)(e,t,150)||F7})),x7(this,"clearDisplay",(e=>{const t=e[0];t instanceof HTMLElement&&"none"===t.style.display&&t.style.removeProperty("display")})),x7(this,"showSubStack",(e=>{const t=V.ZP.getPageById(e);if(!t)return;const n=(0,Kd.av)(t);if(n){const e=V.ZP.getTabs(this.context.vivaldiWindowId,!0,V.ZP.getGroup(n,this.context.vivaldiWindowId));this.setState({stackTabs:e})}else{if(1===this.state.stackTabs.size&&this.state.stackTabs.first().id===t.id)return;const e=sa.List.of(new V.lg({page:t,id:t.id}));this.setState({stackTabs:e})}})),x7(this,"onContextMenu",((e,t)=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getTabBarContextMenu("tabbar",t).then((t=>{(0,Hs.Z)(this.context.vivaldiWindowId,t)(e)}))})),x7(this,"onTabStackTooltipContextMenu",((e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getTabStackThumbnailsContextMenu("tabstackthumbnails",e).then((e=>{(0,Hs.Z)(this.context.vivaldiWindowId,e)(t)}))})),x7(this,"handleExpandAccordion",(e=>{this.setState((t=>({openAccordions:t.openAccordions.concat({groupId:e,auto:!1})})))})),x7(this,"handleCompressAccordion",(e=>{this.setState((t=>({openAccordions:t.openAccordions.filter((t=>t.groupId!==e&&!1===t.auto))})))})),x7(this,"toggleAutoExpandAccordion",(e=>{e&&this.setState((t=>{const n=t.openAccordions.find((t=>t.groupId===e)),s=!!n&&!n.auto;return{openAccordions:t.openAccordions.filter((t=>t.groupId!==e)).concat({groupId:e,auto:s})}}))})),x7(this,"toggleSubstripLock",(()=>{st.Z.toggle(P.kTabsStackingSubstripLocked,!0,!1)}));const n=V.ZP.unsafeGetActivePage(t.vivaldiWindowId),r=this.props.prefValues[P.kTabsStackingOpenAccordions].map((e=>({groupId:e,auto:!1})));this.state={tabStripWidth:0,tabStripHeight:0,isResizing:!1,tabBarOverflow:!1,tabStripOverflow:!1,tabBarHeight:this.props.prefValues[P.kTabsBarHeight],tabBarWidth:this.props.prefValues[P.kTabsBarWidth],...G7(n,t.vivaldiWindowId,e.prefValues[P.kTabsStackingMode]),mediaState:Qq.getState().get(n.id)||(0,sa.Set)(),tabBarSliderYpos:this.props.prefValues[P.kTabsBarSliderYpos],tabBarSliderXpos:this.props.prefValues[P.kTabsBarSliderXpos],tabBarContainerWidth:0,isExpectingDrop:!1,openAccordions:r}}componentDidUpdate(e,t){"top"!==this.props.tabPosition&&"bottom"!==this.props.tabPosition||!0!==this.props.prefValues[P.kTabsThumbnails]||!1!==e.prefValues[P.kTabsThumbnails]||this.setTabBarHeight(U7),e.prefValues[P.kTabsStackingMode]!==this.props.prefValues[P.kTabsStackingMode]&&this._onPageStoreChange(),t.openAccordions!==this.state.openAccordions&&st.Z.set(P.kTabsStackingOpenAccordions,this.state.openAccordions.map((e=>e.groupId)))}componentDidMount(){h.Z.runtime.onMessage.addListener(this.onMessageReceived),V.ZP.addChangeListener(this._onPageStoreChange),vv.addChangeListener(this.onTabStoreChange),Ys.Z.addListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),Ys.Z.addListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),Ys.Z.addListener("COMMAND_NEW_TAB",this._onCommandSpy),b.Z.tabsPrivate.onKeyboardChanged.addListener(this.handleKeyboardChange),this.updateDocumentTitleById(this.state.activePageId),R7(this,K7,!0),this.context.addEventListener("resize",this.onWindowResize,!1),this._mediaStateStoreToken=Qq.addListener(this._onMediaStateStoreChanged),this.cleanUpOpenAccordions()}componentWillUnmount(){this._mediaStateStoreToken.remove(),h.Z.runtime.onMessage.removeListener(this.onMessageReceived),V.ZP.removeChangeListener(this._onPageStoreChange),vv.removeChangeListener(this.onTabStoreChange),Ys.Z.removeListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),Ys.Z.removeListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),Ys.Z.removeListener("COMMAND_NEW_TAB",this._onCommandSpy),b.Z.tabsPrivate.onKeyboardChanged.removeListener(this.handleKeyboardChange),R7(this,K7,!1),this.context.removeEventListener("resize",this.onWindowResize,!1),clearTimeout(this._resizingTimeout)}cleanUpOpenAccordions(){const e=this.state.pages.reduce(((e,t)=>(e.push((0,Kd.av)(t)),e)),[]);this.setState((t=>({openAccordions:(0,D7.Z)(t.openAccordions,"groupId").filter((t=>e.includes(t.groupId)))})))}isSubstripVisible(){const{prefValues:e,visible:t}=this.props;return t&&"substrip"===e[P.kTabsStackingMode]&&(e[P.kTabsStackingSubstripLocked]||this.state.stackTabs.size>1)}render(){const e=this.props.prefValues,t=this.props.tabPosition,n=this.getTabDirection(),i="row"===n?this.state.tabStripWidth-32:this.state.tabStripWidth,r="column"===n?this.state.tabStripHeight-32:this.state.tabStripHeight,a="column"===n?Math.max(this.state.tabBarWidth-i,32):this.state.tabBarContainerWidth-32,o=e[P.kTabsThumbnails]&&("top"===t||"bottom"===t)||"left"===t||"right"===t,l=this.props.prefValues[P.kTabsStackingSubstripLocked],c=this.isSubstripVisible(),u=l&&this.state.stackTabs.isEmpty()?sa.List.of(new V.lg({page:V.ZP.unsafeGetActivePage(),id:this.state.activePageId})):this.state.stackTabs;return s.createElement("div",{id:"tabs-tabbar-container",ref:this.refTabBarContainer,style:"top"===t||"bottom"===t?{height:this.getHeight()}:{width:this.getWidth()},className:bn()({[this.props.visible?this.props.tabPosition:"none"]:!0,accordion:"accordion"===e[P.kTabsStackingMode],dotted:"dotted"===e[P.kTabsStackingMode]||e[P.kTabsStackingPreferDotted]}),__source:{fileName:O7,lineNumber:1470,columnNumber:7}},s.createElement("div",{id:"tabs-container",onAuxClick:e=>this.onAuxClick(e,!1),onDoubleClick:e=>this.onDoubleClick(e,!1),className:bn()({overflow:this.state.tabBarOverflow,[this.props.visible?this.props.tabPosition:"none"]:!0}),style:{flexGrow:c&&"row"===n?0:1},__source:{fileName:O7,lineNumber:1484,columnNumber:9}},s.createElement(ei,{ref:this.refResizeObserver,className:"resize",onResize:this.onResize,__source:{fileName:O7,lineNumber:1495,columnNumber:11}},s.createElement(T7,{isSubstrip:!1,isSubstripVisible:c,maxWidth:i,maxHeight:r,tabBarWidth:this.state.tabBarWidth,direction:n,onActivateTab:this.onActivateTab,getTooltipContent:this.getTooltipContent,getGroupHighlightId:this.getGroupHighlightId,setOverflowClass:this.setOverflowClass,prefValues:e,tabPosition:this.props.tabPosition,isSelecting:this.isSelecting(),isResizing:this.state.isResizing,pageSelection:this.state.pageSelection,pages:this.state.pages,tabs:this.state.tabs,switchByScroll:e[P.kMouseWheelTabSwitch],onCreateTab:this.onCreateTab,showSubStack:this.showSubStack,isExpectingDrop:this.state.isExpectingDrop,onContextMenu:this.onContextMenu,setIsExpectingDrop:this.setIsExpectingDrop,activeGroupId:this.state.groupId,openAccordions:this.state.openAccordions,handleExpandAccordion:this.handleExpandAccordion,handleCompressAccordion:this.handleCompressAccordion,toggleAutoExpandAccordion:this.toggleAutoExpandAccordion,closePage:this.closePage,theme:this.props.theme,__source:{fileName:O7,lineNumber:1500,columnNumber:13}})),s.createElement("div",{className:"toolbar toolbar-tabbar sync-and-trash-container",style:{maxWidth:Math.max(V7,i-V7)},__source:{fileName:O7,lineNumber:1534,columnNumber:11}},!W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)&&s.createElement(w6,{__source:{fileName:O7,lineNumber:1539,columnNumber:15}}),s.createElement(Z7,{__source:{fileName:O7,lineNumber:1540,columnNumber:13}})),o&&"column"===n&&s.createElement(PN,{onSlidebarPosition:c?this.onInnerSlidebarPosition:this.onSlidebarPosition,onStart:c?this.handleInnerSliderDown:this.handleSliderDown,onStop:c?this.handleInnerSliderUp:this.handleSliderUp,onDoubleClick:c?this.switchInnerTabView:this.switchTabView,offset:1,position:this.props.tabPosition,__source:{fileName:O7,lineNumber:1543,columnNumber:13}})),c&&s.createElement("div",{id:"tabs-subcontainer",onAuxClick:e=>this.onAuxClick(e,!0),onDoubleClick:e=>this.onDoubleClick(e,!0),className:bn()({overflow:this.state.tabStripOverflow,[this.props.visible?this.props.tabPosition:"none"]:!0,visible:c}),style:{flexBasis:c&&"column"===n?Math.max(this.getWidth()-this.state.tabBarSliderXpos-(this.state.tabBarOverflow?P7.nn:0),V7):0},__source:{fileName:O7,lineNumber:1562,columnNumber:11}},s.createElement(T7,{isSubstrip:!0,isSubstripVisible:c,maxWidth:a,maxHeight:r,tabBarWidth:this.state.tabBarWidth,direction:n,onActivateTab:this.onActivateTab,getTooltipContent:this.getTooltipContent,getGroupHighlightId:this.getGroupHighlightId,setOverflowClass:this.setOverflowClass,prefValues:e,tabPosition:this.props.tabPosition,isSelecting:this.isSelecting(),isResizing:this.state.isResizing,pageSelection:this.state.pageSelection,pages:this.state.pages,tabs:u,switchByScroll:e[P.kMouseWheelTabSwitch],onCreateTab:this.onCreateGroupTab,isExpectingDrop:this.state.isExpectingDrop,onContextMenu:this.onContextMenu,setIsExpectingDrop:this.setIsExpectingDrop,activeGroupId:this.state.groupId,closePage:this.closePage,theme:this.props.theme,__source:{fileName:O7,lineNumber:1581,columnNumber:13}}),s.createElement("div",{className:bn()("toolbar toolbar-tabbar toolbar-large subcontainer-lock",{[this.props.tabPosition]:!0}),__source:{fileName:O7,lineNumber:1610,columnNumber:13}},s.createElement(ko,{onClick:this.toggleSubstripLock,menuOrigin:"bottomLeft",className:l?"tabs-locked":"tabs-unlocked",tooltip:(0,ue.Z)("Lock second row of Tabs"),image:l?cn.zlZ.small:cn.KuK.small,__source:{fileName:O7,lineNumber:1616,columnNumber:15}}))),o&&s.createElement(PN,{onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.switchTabView,offset:1,position:this.props.tabPosition,__source:{fileName:O7,lineNumber:1631,columnNumber:11}}))}}x7($7,"contextType",Vs.Z);const X7=(0,bi.Z)($7,z7);function Q7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q7 extends s.PureComponent{constructor(...e){super(...e),Q7(this,"lastKeyWasAltDown",!1),Q7(this,"_onCommandSpy",(()=>{W.ZP.isActive(this.context.vivaldiWindowId)&&this.props.changeFocus()})),Q7(this,"_onWindowStoreChanged",(()=>{!W.ZP.isActive(this.context.vivaldiWindowId)&&this.props.showAccessKeys&&this.props.showAccessKeys(!1)})),Q7(this,"_onMouseChanged",(e=>{!1===e&&(this.lastKeyWasAltDown=!1)})),Q7(this,"_onWindowPositionChanged",(()=>{this.lastKeyWasAltDown=!1})),Q7(this,"_keyEventListener",((e,t,n,s,i)=>{if(this.context.vivaldiWindowId===e&&W.ZP.isActive(e)){const e=s===$s.Z.KEY_ALT&&(t?4===n:0===n);e&&this.props.showAccessKeys&&this.props.showAccessKeys(t),!t&&s===$s.Z.KEY_ALT&&this.lastKeyWasAltDown&&!i&&A.ZP.get(P.kKeyboardShortcutsAltOpensMenu)&&this.props.changeFocus(),this.lastKeyWasAltDown=e&&t}}))}componentDidMount(){b.Z.tabsPrivate.onMouseChanged.addListener(this._onMouseChanged),b.Z.tabsPrivate.onKeyboardChanged.addListener(this._keyEventListener),b.Z.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),Ys.Z.addListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged)}componentWillUnmount(){b.Z.tabsPrivate.onMouseChanged.removeListener(this._onMouseChanged),b.Z.tabsPrivate.onKeyboardChanged.removeListener(this._keyEventListener),b.Z.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),Ys.Z.removeListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken.remove()}render(){return null}}Q7(q7,"contextType",Vs.Z);const J7=q7;var e9=n(34155);let t9=0,n9={},s9=!1;const i9=function(e,t,n){return e.filter((e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible)).map((e=>{const s=z.Z.getDisplayName(e),i=t9++;(s||e.url)&&(n9[i]=e.handler);const r={};if(e.container?.details)r.container=e.container.details;else if(z.Z.isSeparator(e))r.separator={};else{const a=void 0!==e.id&&""!==t&&e.id===t;let o;switch((e.iconPNG||e.iconPNGWhite)&&(o=[e.iconPNG||"",e.iconPNGWhite||""]),e.type){case"checkbox":case"radio":r.item={id:i,name:s,type:e.type,radiogroup:e.radiogroup?e.radiogroup:-1,checked:e.checked,shortcut:z.Z.getShortcut(e,n),url:e.url,icons:o};break;default:r.item={id:i,name:s,type:e.items?"folder":"command",selected:a,persistent:e.persistent,shortcut:z.Z.getShortcut(e,n),url:e.url,icons:o},e.items&&(r.children=i9(e.items,t,n))}}return r}))},r9={show:function(e,t,n,s,i){t9=0,n9={};const r=z.Z.getShortcutSettings(),a=function(e){i&&i(e)},o=function(){i&&i(-1)},l=function(e){const t=en.ZP.makeEventFlagsFromApiResponse(e.state);n9[e.id].call(this,t,{})},c=function(e){console.warn(e)};!function(){if(!s9){s9=!0;const s=n.map((e=>(z.Z.installMnemonics(e.menu.items,e.menu.preferred),{id:e.id,rect:e.rect,children:i9(e.menu.items,e.menu.expandId,r)})));(function(e,t){return b.Z.zoom.getVivaldiUIZoom().then((e=>{t.forEach((t=>{t.rect.x=parseInt((t.rect.x+1)*e),t.rect.y=parseInt((t.rect.y+0)*e),t.rect.width=parseInt(t.rect.width*e),t.rect.height=parseInt(t.rect.height*e)}))}))})(0,s).then((()=>{b.Z.menubarMenu.onAction.addListener(l),b.Z.menubarMenu.onOpenBookmark.addListener(En.Z.onOpen),b.Z.menubarMenu.onBookmarkAction.addListener(En.Z.onAction),b.Z.menubarMenu.onHover.addListener(En.Z.onHover),b.Z.menubarMenu.onOpen.addListener(a),b.Z.menubarMenu.onClose.addListener(o),b.Z.menubarMenu.onError.addListener(c),b.Z.menubarMenu.show({windowId:e.vivaldiWindowId,id:t,siblings:s,icons:[G.Z,yn.Z,Sn.Z,Tn.Z,kn.Z,Cn.Z,wn.Z]},(()=>{En.Z.onHover(""),b.Z.menubarMenu.onAction.removeListener(l),b.Z.menubarMenu.onOpenBookmark.removeListener(En.Z.onOpen),b.Z.menubarMenu.onBookmarkAction.removeListener(En.Z.onAction),b.Z.menubarMenu.onHover.removeListener(En.Z.onHover),b.Z.menubarMenu.onOpen.removeListener(a),b.Z.menubarMenu.onClose.removeListener(o),b.Z.menubarMenu.onError.removeListener(c),e9.nextTick((()=>{s9=!1}))}))}))}}()}},a9=r9;var o9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\VivaldiMenuButton.jsx";function l9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c9=[P.kKeyboardShortcutsAltOpensMenu,P.kMenuIconType],u9="vivaldi";class m9 extends s.PureComponent{constructor(...e){super(...e),l9(this,"shortcuts",[]),l9(this,"hasMenu",!1),l9(this,"_onPrefsChange",(()=>{this._setupShortcuts(!1)})),l9(this,"_onCommandStoreChange",(e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0,this._setupShortcuts(!1);break;case"shortcut":this._setupShortcuts(!1)}})),l9(this,"_changeFocus",(()=>{this._showMenu(-1)})),l9(this,"_getMenuItems",(e=>F.Z.getNamedMenu(u9,e))),l9(this,"_setupShortcuts",(e=>{this.shortcuts.forEach((e=>{e.shortcut&&Wl.Z.unbind(e.shortcut,this._showSubMenu)})),this.shortcuts=[],this.props.prefValues[P.kKeyboardShortcutsAltOpensMenu]?(this.shortcuts=z.Z.getShortcutsForSubMenus(this._getMenuItems(!1)),this.shortcuts.forEach((e=>{e.shortcut&&Wl.Z.bind(e.shortcut,this._showSubMenu)}))):e&&this._getMenuItems(!1)})),l9(this,"_showMenu",((e,t)=>{const n=this.refs.button.getBoundingClientRect(),s=this._getMenuItems(!0),i=e<0?"":s[e].id||"",r={id:0,rect:{x:parseInt(n.left),y:parseInt(n.top),width:parseInt(n.width),height:parseInt(n.height)},menu:{items:s,expandId:i,preferred:this.shortcuts}};a9.show(this.context,r.id,[r],"bottom")})),l9(this,"_showSubMenu",(e=>{this.shortcuts.forEach((t=>{t.shortcut&&t.key===e.key&&this._showMenu(t.index,e)}))})),l9(this,"_handleDoubleClick",(e=>{e.preventDefault(),e.stopPropagation()})),l9(this,"_handleKeyDown",(e=>{switch(e.key){case"ArrowDown":case"Enter":this._showMenu(-1);break;case"Escape":o.Z.executeActions("COMMAND_FOCUS_WEBVIEW");break;default:return}e.preventDefault(),e.stopPropagation()}))}componentDidMount(){A.ZP.addListener(P.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),F.Z.addChangeListener(this._onCommandStoreChange),this.hasMenu=F.Z.isNamedMenuAvailable(u9),this.hasMenu?this._setupShortcuts(!0):this._requestMenu()}componentWillUnmount(){A.ZP.removeListener(P.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),F.Z.removeChangeListener(this._onCommandStoreChange),this.shortcuts.forEach((e=>{e.shortcut&&Wl.Z.unbind(e.shortcut,this._showSubMenu)}))}_requestMenu(){this.hasMenu||o.Z.requestNamedMenu(u9)}render(){return s.createElement(s.Fragment,{__source:{fileName:o9,lineNumber:181,columnNumber:7}},s.createElement(J7,{changeFocus:this._changeFocus,__source:{fileName:o9,lineNumber:182,columnNumber:9}}),s.createElement("button",{ref:"button",className:"vivaldi",style:{boxShadow:"none",display:this.props.isHidden?"none":void 0},onMouseDown:this._showMenu.bind(this,-1),onKeyDown:this._handleKeyDown,onDoubleClick:this._handleDoubleClick,tabIndex:this.props.keyAccess,title:(0,ue.Z)("Menu"),__source:{fileName:o9,lineNumber:185,columnNumber:9}},"icon"===this.props.prefValues[P.kMenuIconType]&&s.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:n(3783)},__source:{fileName:o9,lineNumber:198,columnNumber:13}}),"burger"===this.props.prefValues[P.kMenuIconType]&&s.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:n(37609)},__source:{fileName:o9,lineNumber:205,columnNumber:13}})))}}l9(m9,"contextType",Vs.Z);const d9=(0,bi.Z)(m9,c9);var h9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\titlebar.jsx";function p9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g9=[P.kMenuDisplay];class b9 extends s.PureComponent{constructor(e,t){super(e),p9(this,"_onPageStoreChange",(()=>{const e=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId),t={activeTitle:e.title,activeUrl:e.url};e.windowId!==this.context.vivaldiWindowId||this.state.activeTitle===t.activeTitle&&this.state.activeUrl===t.activeUrl||this.setState(t)})),p9(this,"close",(e=>{e.stopPropagation(),dg.Z.close(this.context.vivaldiWindowId)})),p9(this,"minimize",(e=>{dg.Z.minimize(this.context.vivaldiWindowId)})),p9(this,"maximize",(e=>{e.persist(),W.ZP.isMaximized(this.context.vivaldiWindowId)||W.ZP.isFullscreen(this.context.vivaldiWindowId)?dg.Z.restore(this.context.vivaldiWindowId):dg.Z.maximize(this.context.vivaldiWindowId)})),p9(this,"skipFocusOnSystemButtonMouseDown",(e=>{e.preventDefault()})),p9(this,"keyDownListener",(e=>{e.altKey&&this.setState({altHover:!0})})),p9(this,"keyUpListener",(e=>{"Alt"===e.key&&this.setState({altHover:!1})})),p9(this,"handleMouseEnter",(e=>{e.altKey&&this.setState({altHover:!0}),document.addEventListener("keydown",this.keyDownListener),document.addEventListener("keyup",this.keyUpListener)})),p9(this,"handleMouseLeave",(e=>{this.setState({altHover:!1}),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("keyup",this.keyUpListener)})),this.state={altHover:!1,activeTitle:"",activeUrl:""}}componentDidMount(){W.ZP.isSettings(this.context.vivaldiWindowId)||V.ZP.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){W.ZP.isSettings(this.context.vivaldiWindowId)||V.ZP.removeChangeListener(this._onPageStoreChange)}render(){const e=Pt.jk.getDisplayTitleByUrl(this.state.activeUrl,this.state.activeTitle)||"Vivaldi",t="top"!==this.props.tabPosition?"tabless":null,i=W.ZP.isFullscreen(this.context.vivaldiWindowId);let r,a,o;switch(navigator.appVersion.indexOf("Windows NT 10")>0?"win10":"win32"){case"linux":case"win32":r=n(9927),o=n(98221),a=n(7969);break;case"win10":r=n(51759),o=n(96375),a=n(9592);break;case"darwin":r=n(62469),o=n(91313),a=n(3141)}const l=6===this.props.prefValues[P.kSystemMacAquaColorVariant],c=!this.props.isPopupWindow&&"vivaldi"===this.props.prefValues[P.kMenuDisplay];return this.props.isHidden?c?s.createElement(d9,{keyAccess:this.props.keyAccess,isHidden:!0,__source:{fileName:h9,lineNumber:196,columnNumber:11}}):null:s.createElement("div",{id:"titlebar",className:t,__source:{fileName:h9,lineNumber:203,columnNumber:7}},c&&s.createElement(d9,{keyAccess:this.props.keyAccess,isHidden:!1,__source:{fileName:h9,lineNumber:205,columnNumber:11}}),s.createElement("div",{className:bn()({"window-buttongroup":!0,"alt-hover":this.state.altHover&&!i,graphite:l}),onMouseEnter:null,onMouseLeave:null,__source:{fileName:h9,lineNumber:209,columnNumber:9}},s.createElement("button",{tabIndex:"-1",className:"window-minimize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.minimize,dangerouslySetInnerHTML:{__html:o},__source:{fileName:h9,lineNumber:220,columnNumber:11}}),s.createElement("button",{tabIndex:"-1",className:"window-maximize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.maximize,dangerouslySetInnerHTML:{__html:a},__source:{fileName:h9,lineNumber:227,columnNumber:11}}),s.createElement("button",{tabIndex:"-1",className:"window-close",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.close,dangerouslySetInnerHTML:{__html:r},__source:{fileName:h9,lineNumber:234,columnNumber:11}})),"top"!==this.props.tabPosition&&("vivaldi"===this.props.prefValues[P.kMenuDisplay]||this.props.isPopupWindow||!1)&&s.createElement("div",{id:"pagetitle",__source:{fileName:h9,lineNumber:247,columnNumber:16}},e))}}p9(b9,"contextType",Vs.Z);const N9=(0,bi.Z)(b9,g9);var f9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubaritem.jsx";function _9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v9 extends s.PureComponent{constructor(...e){super(...e),_9(this,"_handleShortcutChange",((e,t)=>{e&&(t?Wl.Z.bind(e,this._handleMenuShortcut):Wl.Z.unbind(e,this._handleMenuShortcut))})),_9(this,"_getDisplayName",(()=>{const e=z.Z.getMenuBarString(this.props.item,this.props.shortcut);if(this.props.underlineAccessKeys&&-1!==e.offset){const t=e.offset;return s.createElement("span",{__source:{fileName:f9,lineNumber:70,columnNumber:9}},t>0?e.name.substring(0,t):"",s.createElement("span",{className:"underlined",__source:{fileName:f9,lineNumber:72,columnNumber:11}},e.name.substring(t,t+1)),e.name.substring(t+1))}return s.createElement("span",{__source:{fileName:f9,lineNumber:66,columnNumber:15}},e.name)})),_9(this,"_handleMenuShortcut",(()=>{this.props.onItemActivated(this.props.id)})),_9(this,"_handleKeyDown",(e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(-1!==this.props.openMenuId)return;this.props.onLeaveBar();break;default:if((0,uh.VV)(e)&&this.props.onAccessKey(e.key))break;return}e.preventDefault(),e.stopPropagation()})),_9(this,"_handleMouseDown",(e=>{e.button===Nn.kLeft&&Nn.isNoModifierPressed(e)&&this.props.onItemActivated(this.props.id),e.preventDefault(),e.stopPropagation()})),_9(this,"_handleMouseEnter",(e=>{this.props.onItemEnter(this.props.id)})),_9(this,"_handleMouseLeave",(e=>{this.props.onItemLeave(this.props.id)})),_9(this,"_handleBlur",(()=>{this.props.onItemBlur(this.props.id)})),_9(this,"_handleFocus",(()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)}))}componentDidMount(){this._handleShortcutChange(this.props.shortcut.shortcut,!0)}componentWillUnmount(){this._handleShortcutChange(this.props.shortcut.shortcut,!1)}UNSAFE_componentWillReceiveProps(e){e.shortcut!==this.props.shortcut&&(this._handleShortcutChange(this.props.shortcut.shortcut,!1),this._handleShortcutChange(e.shortcut.shortcut,!0))}render(){return s.createElement("button",{"data-id":this.props.id,"data-offset":0,tabIndex:this.props.keyAccess,className:bn()({menubarItem:!0,uifocusstop:0===this.props.id,highlighted:this.props.highlighted,menubar:!0}),onBlur:this._handleBlur,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseDown:this._handleMouseDown,__source:{fileName:f9,lineNumber:145,columnNumber:7}},this._getDisplayName())}}const E9=v9;var C9=n(34155),w9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubar.jsx";function y9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,T9(e,t,"set"),n),n}function T9(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const k9="menubar";var I9=new WeakMap;class A9 extends s.PureComponent{constructor(e){super(e),y9(this,"acceptEnterId",-1),y9(this,"timer",null),y9(this,"hasMenu",!1),I9.set(this,{writable:!0,value:!1}),y9(this,"_getMenuItems",(e=>F.Z.getNamedMenu(k9,e).filter((e=>"function"!=typeof e.testVisibility||e.testVisibility())))),y9(this,"_onPrefsChange",(()=>{this._setupShortcuts(this.state.items)})),y9(this,"_onCommandStoreChange",(e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0;const e=this._getMenuItems(!1);this.setState({items:e,shortcuts:z.Z.getShortcutsForSubMenus(e)});break;case"shortcut":this._setupShortcuts(this.state.items)}})),y9(this,"_handleItemActivated",(e=>{a9.show(this.context,e,this._getSiblings(),"bottom",this._onMenuVisibilityChanged)})),y9(this,"_handleItemEnter",(e=>{-1!==this.acceptEnterId&&this.acceptEnterId!==e||(si(pn.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))})),y9(this,"_handleItemLeave",(e=>{-1===this.state.openMenuId&&this.setState({highlightedId:-1})})),y9(this,"_handleItemBlur",(e=>{C9.nextTick((()=>{si(pn.findDOMNode(this))||this.setState({highlightedId:-1})}))})),y9(this,"_handleLeaveBar",(()=>{this.setState({highlightedId:-1}),o.Z.executeActions("COMMAND_FOCUS_WEBVIEW")})),y9(this,"_handleDoubleClick",(e=>{e.preventDefault(),e.stopPropagation()})),y9(this,"_changeFocus",(()=>{si(pn.findDOMNode(this))?this._handleLeaveBar():this._moveFocus(this.state.highlightedId,"current",!0)})),y9(this,"_moveFocus",((e,t,n)=>{if(!0===n||si(pn.findDOMNode(this))){const n=this.state.items.map(((e,t)=>this.state.shortcuts[t]?t:-1)).filter((e=>-1!==e));if(0===n.length)return;if("current"===t){const t=e<0?0:n.indexOf(e);if(-1===t)return;e=n[t]}else if("right"===t||"left"===t){if(1===n.length)return;let s=n.indexOf(e);s="right"===t?s+1>=n.length?0:s+1:s<=0?n.length-1:s-1,e=n[s]}const s=document.querySelector(`button.menubarItem.menubar[data-id="${e}"]`);s&&s instanceof HTMLButtonElement&&this.setState({highlightedId:e},(()=>s.focus()))}})),y9(this,"_handleItemHighlightMissing",(e=>{this.setState({highlightedId:e})})),y9(this,"_onMenuVisibilityChanged",(e=>{var t;(function(e,t){return t.get?t.get.call(e):t.value})(t=this,T9(t,I9,"get"))&&(-1===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout((()=>{this.acceptEnterId=-1,this.timer=null}),100),si(pn.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:-1})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e}),this._showAccessKeys(!1))})),y9(this,"_showAccessKeys",(e=>{this.setState({underlineAccessKeys:e})})),y9(this,"_setupShortcuts",(e=>{this.setState({shortcuts:z.Z.getShortcutsForSubMenus(e)})})),y9(this,"_activateByAccessKey",(e=>{for(let t=0;t<this.state.items.length;t++)if(this.state.shortcuts[t]&&this.state.shortcuts[t].key===e)return this._handleItemActivated(t),!0;return!1})),y9(this,"_getSiblings",(()=>{const e=this._getMenuItems(!0);return Array.from(document.querySelectorAll("button.menubarItem.menubar")).map(((t,n)=>{const s=t.getBoundingClientRect();return{id:parseInt(t.dataset.id),rect:{x:parseInt(s.left),y:parseInt(s.top),width:parseInt(s.width),height:parseInt(s.height)},menu:{items:e[n].items||[],expandId:"",preferred:[]}}}))})),y9(this,"renderAll",(()=>this.state.items.map(((e,t)=>{if(!this.state.shortcuts[t])return null;const n=0===t?this.props.keyAccess:-1,i=t.toString();return s.createElement(E9,{key:i,id:t,keyAccess:n,item:e,shortcut:this.state.shortcuts[t],underlineAccessKeys:this.state.underlineAccessKeys,openMenuId:this.state.openMenuId,highlighted:this.state.highlightedId===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onAccessKey:this._activateByAccessKey,onLeaveBar:this._handleLeaveBar,__source:{fileName:w9,lineNumber:308,columnNumber:11}})})))),this.hasMenu=F.Z.isNamedMenuAvailable(k9);const t=this._getMenuItems(!1);this.state={items:t,shortcuts:z.Z.getShortcutsForSubMenus(t),openMenuId:-1,highlightedId:-1,underlineAccessKeys:!1}}componentDidMount(){A.ZP.addListener(P.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),F.Z.addChangeListener(this._onCommandStoreChange),this._requestMenu(),S9(this,I9,!0)}componentWillUnmount(){this.timer&&clearTimeout(this.timer),A.ZP.removeListener(P.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),F.Z.removeChangeListener(this._onCommandStoreChange),S9(this,I9,!1)}_requestMenu(){this.hasMenu||o.Z.requestNamedMenu(k9)}render(){return s.createElement(s.Fragment,{__source:{fileName:w9,lineNumber:331,columnNumber:7}},s.createElement(J7,{changeFocus:this._changeFocus,showAccessKeys:this._showAccessKeys,__source:{fileName:w9,lineNumber:332,columnNumber:9}}),s.createElement("div",{className:bn()({menubar:!0,horizontal:this.props.horizontal}),onDoubleClick:this._handleDoubleClick,tabIndex:"-1",__source:{fileName:w9,lineNumber:336,columnNumber:9}},this.renderAll()))}}y9(A9,"contextType",Vs.Z);const Z9=A9;var P9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\TopMenu.jsx";function D9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M9=[P.kKeyboardTabToAll,P.kMenuIconType];class O9 extends s.PureComponent{constructor(...e){super(...e),D9(this,"state",{activePage:V.ZP.unsafeGetActivePage()}),D9(this,"_onPageStoreChange",(()=>{this.setState({activePage:V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId)})})),D9(this,"close",(e=>{e.stopPropagation(),dg.Z.close(this.context.vivaldiWindowId)}))}componentDidMount(){V.ZP.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){V.ZP.removeChangeListener(this._onPageStoreChange)}render(){return s.createElement("div",{className:"topmenu",__source:{fileName:P9,lineNumber:64,columnNumber:7}},"icon"===this.props.prefValues[P.kMenuIconType]&&s.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:(0,ue.Z)("Double Click to Close"),tabIndex:"-1",__source:{fileName:P9,lineNumber:66,columnNumber:11}},s.createElement("span",{className:"application-icon",dangerouslySetInnerHTML:{__html:cn.Qa2},__source:{fileName:P9,lineNumber:71,columnNumber:14}}),s.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:n(3783)},__source:{fileName:P9,lineNumber:74,columnNumber:14}})),"burger"===this.props.prefValues[P.kMenuIconType]&&s.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:(0,ue.Z)("Double Click to Close"),tabIndex:"-1",__source:{fileName:P9,lineNumber:80,columnNumber:11}},s.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:n(37609)},__source:{fileName:P9,lineNumber:85,columnNumber:14}})),s.createElement(Z9,{horizontal:!0,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],__source:{fileName:P9,lineNumber:90,columnNumber:9}}),s.createElement("div",{className:"horizontal-menu-pagetitle",__source:{fileName:P9,lineNumber:93,columnNumber:9}},Pt.jk.getDisplayTitle(this.state.activePage)))}}D9(O9,"contextType",Vs.Z);const x9=(0,bi.Z)(O9,M9);var L9=n(93065);const R9=(0,za.Z)(L9.Z,500);class B9 extends(S()){constructor(){super(m.Z)}areEqual(e,t){return e===t||(R9(window.vivaldiWindowId,{tiles:t}),!1)}getInitialState(){return{}}reduce(e,t){switch(t.actionType){case Fi.Z.TILES_INITIALIZED:return t.tilesState;case Fi.Z.TILE_SET_LAYOUT:{const{id:n,mosaicLayout:s}=t;return{...e,[n]:s}}case"PAGE_TILE_PAGES":{const{pages:n,id:s}=t;return e=U9(e,n),s||(e=H9(e,n)),e}case"CHROME_TABS_CREATE":const n=V.ZP.getPageById(t.page.id);return n?V9(e,sa.List.of(n)):e;case"PAGE_TABSTACK_REMOVE_FROM":case"PAGE_CLOSE":{const{pages:n}=t;return U9(e,n)}case"PAGE_TABSTACK_CREATE":{m.Z.waitFor([V.ZP.dispatchToken]);const{pages:n}=t;return V9(e,n)}default:return e}}}function F9(e,t){if("object"!=typeof e)return e;if(e.first===t)return"object"==typeof e.second?{...e.second}:e.second;if(e.second===t)return"object"==typeof e.first?{...e.first}:e.first;const n=F9(e.first,t),s=F9(e.second,t);return e.first!==n||e.second!==s?{...e,first:n,second:s}:e}function U9(e,t){return t.reduce(((t,n,s)=>{const i=n.getIn(["extData","tiling","id"]);if(!i||!e[i])return t;const r=t[i],a=F9(r,V.ZP.getTiles(i,n.windowId).findIndex((e=>e.id===n.id)));if(r===a)return t;if("object"==typeof a)return function(e){(function e(t,n){"object"==typeof t.first?e(t.first,n):t.first=n.count++,"object"==typeof t.second?e(t.second,n):t.second=n.count++})(e,{count:0})}(a),{...t,[i]:a};const o={...t};return delete o[i],o}),e)}function V9(e,t){return H9(e,t)}function H9(e,t){return t.map((e=>e.getIn(["extData","tiling","id"]))).forEach((t=>{e[t]&&delete(e={...e})[t]})),e}function W9(e,t){if(e<2)return;const n=t||(e<4?"row":"grid");switch(n){case"grid":const t=3===e?2:Math.floor(Math.sqrt(e));return z9((0,gP.Z)(e),t);case"vertically":return G9((0,gP.Z)(e),"row");case"horizontally":return G9((0,gP.Z)(e),"column");default:return G9((0,gP.Z)(e),n)}}function z9(e,t){if(e.length<=t)return G9(e,"column");const n=e.slice(0,t),s=e.slice(t),i=n.length/e.length*100;return{direction:"row",first:G9(n,"column"),second:z9(s,t),...50===i?null:{splitPercentage:i}}}function G9(e,t){if(1===e.length)return e[0];const n=Math.floor(e.length/2),s=e.slice(0,n),i=e.slice(n),r=s.length/e.length*100;return{direction:t,first:G9(s,t),second:G9(i,t),...50===r?null:{splitPercentage:r}}}const K9=new B9;var j9=n(6162),Y9="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageCollection.jsx";function $9(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X9=Wj(j9.MosaicWithoutDragDropContext),Q9=function(e){return{activePageId:V.ZP.unsafeGetActivePage(e).id,pages:V.ZP.getPages(e)}};class q9 extends s.PureComponent{constructor(e,t){super(e),$9(this,"_onPageStoreChange",(()=>{const e=Q9(this.context.vivaldiWindowId);this.setState(e)})),$9(this,"_onTilingStoreChange",(()=>{this.setState({tiles:K9.getState()})})),$9(this,"onResize",(e=>{const t=e[0].target;let n,s;if(t&&t.clientWidth&&t.clientHeight)n=t.clientWidth,s=t.clientHeight;else{const e=(0,Z_.default)(A.ZP.get(P.kPanelsState),["width"],0);n=this.context.innerWidth-e,s=this.context.innerHeight}this.setState({contentWidth:n,contentHeight:s})})),$9(this,"onShowQRCode",((e,t)=>{this.setState({qrCodeTabId:e,qrCodeUrl:t})})),$9(this,"handleFocus",(e=>{e&&e.nativeEvent&&e.nativeEvent.relatedTarget&&"WEBVIEW"===e.nativeEvent.relatedTarget.tagName&&!0===this.props.cycleFocus&&bm.Z.doAction("focusWebView")})),$9(this,"onMosaicLayoutChange",(e=>{const t=V.ZP.getPageById(this.state.activePageId);if(t){const n=t.getIn(["extData","tiling","id"]);(class{static setTileLayout(e,t){m.Z.dispatch({actionType:Fi.Z.TILE_SET_LAYOUT,mosaicLayout:e,id:t})}}).setTileLayout(e,n)}})),$9(this,"renderTileSet",(e=>{const t=e.map((e=>e.getIn(["extData","tiling","id"]))).toSet(),n=V.ZP.getPageById(this.state.activePageId);return t.map((e=>{const t=V.ZP.getTiles(e,this.context.vivaldiWindowId,this.state.pages).sortBy((e=>e.index)).map((e=>this.renderPage(e)));let i;if(this.state.tiles[e])i=this.state.tiles[e];else if(n){const e=n.getIn(["extData","tiling","layout"]);i=W9(t.size,e)}const r=!!n&&e===n.getIn(["extData","tiling","id"]);return s.createElement(X9,{key:e,className:r?"visible":"hidden",renderTile:e=>t.get(e),value:i,onChange:this.onMosaicLayoutChange,__source:{fileName:Y9,lineNumber:157,columnNumber:9}})}))})),$9(this,"onDialogClosed",(()=>this.onShowQRCode(0,""))),$9(this,"renderPage",(e=>{const t=(0,iJ.ZN)(e),n=e.id===this.state.qrCodeTabId?this.state.qrCodeUrl:void 0;return s.createElement(mJ,{key:`page-component-${e.id}`,id:e.id,url:e.url,target:e.target,extData:e.extData,showImageInspector:e.showImageInspector,discarded:e.discarded,contentWidth:this.state.contentWidth,contentHeight:this.state.contentHeight,isVisible:t,isActive:e.active,supportsReaderMode:e.supportsReaderMode,qrCodeUrl:n,onDialogClosed:this.onDialogClosed,__source:{fileName:Y9,lineNumber:176,columnNumber:7}})}));const n=(0,Z_.default)(A.ZP.get(P.kPanelsState),["width"],0);this.state={...Q9(t.vivaldiWindowId),contentWidth:t.innerWidth-n,contentHeight:t.innerHeight,tiles:K9.getState(),qrCodeTabId:null,qrCodeUrl:void 0}}componentDidMount(){V.ZP.addChangeListener(this._onPageStoreChange),this._tilingStoreToken=K9.addListener(this._onTilingStoreChange),b.Z.utilities.onShowQRCode.addListener(this.onShowQRCode)}componentWillUnmount(){V.ZP.removeChangeListener(this._onPageStoreChange),b.Z.utilities.onShowQRCode.removeListener(this.onShowQRCode),this._tilingStoreToken.remove()}render(){const e=s.Fragment,t=this.props.cycleFocus?"0":"-1",n=this.state.pages.filter((e=>!e.getIn(["extData","tiling","id"])||V.ZP.getTiles(e.getIn(["extData","tiling","id"]),this.context.vivaldiWindowId,this.state.pages).size<=1)).sortBy((e=>e.id)).map((e=>this.renderPage(e))),i=this.state.pages.filter((e=>e.getIn(["extData","tiling","id"])&&V.ZP.getTiles(e.getIn(["extData","tiling","id"]),this.context.vivaldiWindowId,this.state.pages).size>1));return s.createElement(e,{key:"webpage__collection",__source:{fileName:Y9,lineNumber:223,columnNumber:7}},s.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:Y9,lineNumber:224,columnNumber:9}}),s.createElement(ei,{id:"webpage-stack",onResize:this.onResize,__source:{fileName:Y9,lineNumber:225,columnNumber:9}},i.size>0&&this.renderTileSet(i),n.size>0&&n),s.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:Y9,lineNumber:231,columnNumber:9}}))}}$9(q9,"contextType",Vs.Z);const J9=Wj(q9);function e8(e,t){const{body:n}=e;if(!n)return;const s=getComputedStyle(t.srcElement).getPropertyValue("user-select");if(!t.srcElement.matches("a[href], area[href], input:not([disabled]), select:not([disabled]), option:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")&&"text"!==s&&"all"!==s){let s=t.target;for(;s!==n&&null!==s;){if(s.draggable){const t=e.activeElement,i=function(s){this.removeEventListener("mouseup",i),this.removeEventListener("dragend",i),e.activeElement===n&&t.focus()};return s.addEventListener("mouseup",i),void s.addEventListener("dragend",i)}s=s.parentElement}t.preventDefault()}}function t8(e){const{body:t}=e;if(!t)return qo.default;const n=e8.bind(null,e);return t.addEventListener("mousedown",n),function(){t.removeEventListener("mousedown",n)}}var n8=n(40153);let s8="";b.Z.utilities.onScroll.addListener((e=>{1===e?s8="mouse":2===e?s8="trackpad":3===e&&(s8="inertial")}));let i8="";function r8(){b.Z.tabsPrivate.onMouseGestureDetection.addListener(o8),b.Z.tabsPrivate.onMouseGesture.addListener(l8),b.Z.tabsPrivate.onWebviewClickCheck.addListener(c8),b.Z.tabsPrivate.onPageZoom.addListener(d8),document.addEventListener("wheel",h8,{passive:!1})}function a8(){b.Z.tabsPrivate.onMouseGestureDetection.removeListener(o8),b.Z.tabsPrivate.onMouseGesture.removeListener(l8),b.Z.tabsPrivate.onWebviewClickCheck.removeListener(c8),b.Z.tabsPrivate.onPageZoom.removeListener(d8),document.removeEventListener("wheel",h8,{passive:!1})}function o8(e){W.ZP.shouldHandleWindow(e)&&function(){i8="";const e=Zh.getState().status;if(e){const{urlValid:t,isBrowserUrl:n}=b.Z.utilities.isUrlValid(e);t&&n&&(i8=e)}}()}async function l8(e,t,n,s){if(!W.ZP.shouldHandleWindow(e))return;const i=await F.Z.getCommandsGestures();let r;if(i8&&(r=i["e"+s]),!r){if(r=i[s],!r)return;const a=p8(e,t,n);if(a){const[t]=a;t.active||$.Z.activateTab(t.id,e)}}const a=r[0];a.function(null,i8),i8="",X.Z.setStatus((0,ue.Z)("Gesture: $1",[a.label]),3e3)}function c8(e,t,n,s,i){if(!W.ZP.shouldHandleWindow(e))return;const r=document.elementFromPoint(Math.round(s),Math.round(i));if(r&&"WEBVIEW"===r.tagName){t&&r.focus();const e=new MouseEvent(t?"mousedown":"mouseup",{button:n,clientX:s,clientY:i,bubbles:!0});r.dispatchEvent(e)}}let u8=null;function m8(){u8=setTimeout((()=>{u8=null}),100)}function d8(e,t,n,s){if(!W.ZP.shouldHandleWindow(e)||null!==u8||"inertial"===s8)return;let i;const r=iJ.kG(e);if(r.count()>=2){const t=p8(e,n,s,r);if(!t)return;const[a,o]=t;if(a.active||$.Z.activateTab(a.id,e),Pt.jk.isInternalPage(a))return;if("WEBVIEW"!==o.tagName)return void console.error("An external page has "+o.tagName+" tag when WEBVIEW was expected");i=o}else{const e=Jt.Z.getActiveWebView();if(!e)return;i=e}m8();const a=.1*t;i.getZoom((e=>{let t=Math.round(10*e)/10+a;t=Math.min(Math.max(t,.2),5),i.setZoom(t),"overlay"!==A.ZP.get(P.kStatusBarDisplay)&&A.ZP.get(P.kToolbarsStatus).includes("Zoom")||X.Z.setStatus((0,ue.Z)("Page Zoom $1%",[Math.round(100*t)]),2e3)}))}function h8(e){const t=e.target;if(t.classList.contains("UrlBar-UrlField")&&t.scrollWidth>=t.clientWidth&&t!==document.activeElement)return void e.preventDefault();if(!A.ZP.get(P.kMouseWheelTabSwitch))return;let n=!1;if(t.closest("div#tabs-tabbar-container")&&(n=!0),2===e.buttons||function(e){return!0===e.altKey&&!1===e.ctrlKey&&!1===e.shiftKey&&!1===e.metaKey}(e)||n){if(e.preventDefault(),"inertial"===s8)return;const t=e.wheelDelta;let n;if(t>0)n=1;else{if(!(t<0))return;n=-1}const s=false,i=s?"COMMAND_TAB_SWITCH_BACK_SETTING":"COMMAND_TAB_SWITCH_FORWARD_SETTING",r=s?"COMMAND_TAB_SWITCH_BACK_ORDER":"COMMAND_TAB_SWITCH_FORWARD_ORDER",a=s?"COMMAND_TAB_SWITCH_FORWARD_SETTING":"COMMAND_TAB_SWITCH_BACK_SETTING",o=s?"COMMAND_TAB_SWITCH_FORWARD_ORDER":"COMMAND_TAB_SWITCH_BACK_ORDER";let l;if("trackpad"===s8){if(null!==u8)return;m8(),l=n<0?2===e.buttons||e.altKey?i:r:2===e.buttons||e.altKey?a:o}else l=n<0?2===e.buttons||e.altKey?i:r:2===e.buttons||e.altKey?a:o;for(const t of yc.CN)if(t.name===l){t.action(null,e);break}}}function p8(e,t,n,s){s=s||iJ.kG(e);for(const e of s){const s=document.getElementById(String(e.id));if(!s)continue;const i=s.getBoundingClientRect();if(i.left<=t&&t<i.right&&i.top<=n&&n<i.bottom)return[e,s]}return null}var g8=n(8400);let b8=!1;var N8=n(34155),f8="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\main.jsx";function _8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v8(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C8(e,t,"set"),n),n}function E8(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,C8(e,t,"get"))}function C8(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const w8=[P.kAddressBarPosition,P.kAppearanceHudEnabled,P.kBookmarksBarDisplay,P.kBookmarksBarPosition,P.kKeyboardTabToAll,P.kKeyboardTabToAllUsesSystemDefault,P.kMenuDisplay,P.kPanelsPosition,P.kPanelsAsOverlayEnabled,P.kRazerChromaHasShownPromotion,P.kStartupShowGitDirectoryWarning,P.kStartupShowMediaAvailableInformation,P.kStartupShowFfmpegInformation,P.kStatusBarDisplay,P.kTabsAtEdge,P.kTabsBarPosition,P.kTabsBarWidth,P.kTabsCloseButtonLeft,P.kTabsStackingMode,P.kThemesPreview,P.kThemeUseAnimation,P.kThemesUser,P.kWindowsLinuxAltControls],y8=n8.Z.call();const S8=(0,za.Z)((e=>e?p6.Z.switchTabForwardByHistory():p6.Z.switchTabForwardByOrder()),0),T8=(0,za.Z)((e=>e?p6.Z.switchTabBackByHistory():p6.Z.switchTabBackByOrder()),0);var k8=new WeakMap,I8=new WeakMap;class A8 extends s.PureComponent{constructor(e,t){super(e),k8.set(this,{writable:!0,value:void 0}),I8.set(this,{writable:!0,value:()=>{const e=xi.getCapturingState();e?this.clearAppRegion():this.restoreAppRegion(),this.setState({capturing:e})}}),_8(this,"onBreakModeStoreChanged",(()=>{const e=di.Z.getState().isActive;this.setState({isBreakModeActive:e})})),_8(this,"onThemeStoreChanged",(()=>{const e=Z.Z.getState().windowStyles.get(this.context.vivaldiWindowId)||no.Z.getFallbackStyle(),t=Z.Z.getState().windowThemes.get(this.context.vivaldiWindowId)||no.Z.getDefaultTheme(),n=Z.Z.getState().windowClassNames.get(this.context.vivaldiWindowId)||{};e===this.state.windowStyle&&t===this.state.windowTheme&&n===this.state.windowClassNames||this.setState({windowClassNames:n,windowStyle:e,windowTheme:t})})),_8(this,"onDragStart",(e=>{e.dataTransfer.getData("vivaldi/x-button-toolbar")&&this.setState({isDraggingButton:!0})})),_8(this,"onDragEnd",(e=>{this.state.isDraggingButton&&this.setState({isDraggingButton:!1})})),_8(this,"createStartupDialogQueue",(async()=>{let e=!1;const t=this.context.vivaldiWindowId,n=new Map,s=async t=>{await b.Z.utilities.getSharedData({key:t,value:!1})||(n.set(t,{active:!e,anchor:this.refs.webpageview}),e=!0,await b.Z.utilities.setSharedData({key:t,value:!0}))};await b.Z.utilities.getSharedData({key:Q.oj,value:!1},(s=>{if(!s){A.ZP.get(P.kStartupCheckIsDefault)&&!W.ZP.isGuestSession(t)&&W.ZP.isActive(t)&&b.Z.utilities.isVivaldiDefaultBrowser((t=>{!1===t&&h.Z.history.search({startTime:Date.now()-2592e5,endTime:Date.now(),text:""},(t=>{t.length>=10&&(n.set(Q.oj,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:n}),b.Z.utilities.setSharedData({key:Q.oj,value:!0}))}))}))}})),W.ZP.isIncognitoOrGuest(t)||await b.Z.utilities.isRazerChromaAvailable()&&!this.props.prefValues[P.kRazerChromaHasShownPromotion]&&await s(Q.Bo),"linux"===n8.Z.call()&&this.props.prefValues[P.kStartupShowFfmpegInformation]&&!0===await b.Z.utilities.getFFMPEGState()&&await s(Q.d7),"win"===n8.Z.call()&&this.props.prefValues[P.kStartupShowMediaAvailableInformation]&&!1===await b.Z.utilities.getMediaAvailableState&&await s(Q.yl),this.props.prefValues[P.kStartupShowGitDirectoryWarning]&&await s(Q.Yd),this.setState({startupDialogQueue:n})})),_8(this,"storeQuickCommandSearch",(e=>{this.setState({quickCommandValue:e})})),_8(this,"closeStartupDialog",(e=>{const t=this.state.startupDialogQueue;t.get(e)&&t.delete(e);for(const[e]of t){const n=t.get(e);if(n){n.active=!0;break}}this.setState(((e,n)=>({startupDialogQueue:t}))),this.forceUpdate()})),_8(this,"shouldShowStartupDialog",(e=>{const t=this.state.startupDialogQueue.get(e);return t&&t.active})),_8(this,"_onActiveTabStatusText",((e,t)=>{e===this.context.vivaldiWindowId&&X.Z.setStatus(t)})),_8(this,"_updateKeyUIMode",(()=>{const e=this.props.prefValues;if(e[P.kKeyboardTabToAllUsesSystemDefault]){const t=this.props.prefValues[P.kSystemMacKeyboardUiMode];2===t&&0!==e[P.kKeyboardTabToAll]?st.Z.set(P.kKeyboardTabToAll,0):0===t&&-1!==e[P.kKeyboardTabToAll]&&st.Z.set(P.kKeyboardTabToAll,-1)}})),_8(this,"_onPopupWindowStoreChanged",(()=>{const e=Q4.getState();b.Z.utilities.broadcastMessage({popupStoreChanged:{windowId:this.context.vivaldiWindowId,popupWindows:e}})})),_8(this,"_onMainStoreChanged",(e=>{switch(e.action){case"confirmOpenBookmarks":this.showConfirmOpenBookmarksDialog(e.options);break;case"showClearBrowsingHistory":this.showClearBrowsingHistoryDialog(e.options)}switch(e.type){case Fi.Z.MAIN_SHOW_BOOKMARK_DIALOG:this.showBookmarkDialog(e.options);break;case Fi.Z.MAIN_SHOW_SAVE_SESSION:this.showSaveSession(e.options);break;case Fi.Z.MAIN_SHOW_OPEN_SESSION:this.showOpenSession();break;case Fi.Z.MAIN_SHOW_IMPORT_DATA:this.showDialog({dialogtype:"import"},null);break;case Fi.Z.MAIN_SHOW_PAGE_ACCESS_KEYS:(0,As.xl)(V.ZP.unsafeGetActivePage().url)||this.toggleMainDialog(e.type);break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":case Fi.Z.MAIN_SHOW_IMPORT_CALENDAR:case Fi.Z.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CALENDAR_IMPORT_EVENTS_DIALOG":case"MAIN_SHOW_CREATE_CALENDAR_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case Fi.Z.MAIN_SHOW_QUICKCOMMANDS:case"MAIN_SHOW_ACCOUNT_SHEET":this.toggleMainDialog(e.type,e.options);break;case Fi.Z.MAIN_SHOW_ADD_FEED:W.ZP.isActive(this.context.vivaldiWindowId)&&this.toggleMainDialog(e.type,e.options);break;case"MAIN_SHOW_MODAL_DIALOG":case"MAIN_SHOW_CALENDAR_ALARM":this.state.mainDialogType!==e.type&&this.toggleMainDialog(e.type,e.options);break;case"MAIN_SELECTING_TOOLBAR":this.setPaneSelection(e.options.enable);break;case"MAIN_SHOW_DIALOG":this.showDialog(e.options,e.onAfterClose)}})),_8(this,"_onPanelStoreChanged",(()=>{this.setState({panelWidth:re.ZP.getPanelWidth()+6})})),_8(this,"onCloseMainDialog",(()=>new Promise((e=>{this.setState({mainDialogType:null,mainDialogOptions:null},e)})))),_8(this,"setPaneSelection",(e=>{this.setState({paneSelection:e})})),_8(this,"toggleMainDialog",((e,t)=>{this.state.mainDialogType===e?this.onCloseMainDialog():this.setState({mainDialogType:e,mainDialogOptions:t})})),_8(this,"handleTabSwitcherActivation",(e=>{if(!e&&this.mainDialog){const e=this.mainDialog.state.selected;$.Z.activateTab(e.id,this.context.vivaldiWindowId)}this.onCloseMainDialog()})),_8(this,"switchTabVisualTabSwitcher",((e,t,n)=>{if(!n&&"wheel"!==e?.type)return void(e=>{const t=A.ZP.get(P.kTabsCycleByRecentOrder);e?S8(t):T8(t)})(t);const{mainDialogType:s}=this.state,{MAIN_SHOW_VISUAL_TAB_SWITCHER:i}=Fi.Z;V.ZP.getPages(this.context.vivaldiWindowId).size>1&&(s!==i&&(this.toggleMainDialog(i),function(e,t,n){function s(e){b8=!1,n.removeEventListener("mouseup",a),n.removeEventListener("mousedown",a),b.Z.tabsPrivate.onKeyboardChanged.removeListener(i),b.Z.tabsPrivate.onTabSwitchEnd.removeListener(r),t(e)}function i(e,t,n,i){!0===t?27===i&&s(!0):!1===t&&(17!==i&&18!==i&&13!==i||s(!1))}function r(){s(!1)}function a(e){if(e.target){const t=e.target.classList;if("mousedown"===e.type&&0===e.button&&t&&["visual-tab","visual-list","visual-list-preview"].includes(t)||"audioicon"===e.target.className)return}(2===e.button||e.button<=1&&e.buttons<=2)&&(e.preventDefault(),e.stopPropagation(),s(!1))}!0!==b8&&(b8=!0,n.addEventListener("mouseup",a),n.addEventListener("mousedown",a),b.Z.tabsPrivate.onKeyboardChanged.addListener(i),b.Z.tabsPrivate.onTabSwitchEnd.addListener(r))}(0,this.handleTabSwitcherActivation,this.context.document)),t?this.mainDialog?.selectForward():this.mainDialog?.selectBack())})),_8(this,"maybeFocusLastActiveElement",(()=>{if(!this._lastActiveElement)return;if(!["BODY","WEBVIEW"].includes(this._lastActiveElement.tagName))return this._lastActiveElement?.focus(),void(this._lastActiveElement=null);const e=V.ZP.getActivePage();if(!e)return;if("content"===sJ({pageId:e.id,url:e.url,activeElement:this.context.document.activeElement})){Jt.Z.getActiveWebView()?.focus()}})),_8(this,"_onWindowStoreChanged",(()=>{const e=this.context.vivaldiWindowId,t=W.ZP.getWindowState(e);t&&this.state.windowState!==t&&(this.state.windowState.active!==t.active&&(t.active?this._onWindowFocus():this._onWindowBlur()),this.setState({windowState:t}))})),_8(this,"_onWindowFocus",(()=>{0})),_8(this,"_onWindowBlur",(()=>{const{document:e}=this.context;this._lastActiveElement=e.activeElement})),_8(this,"onMessageReceived",((e,t)=>{if(e&&e.dispatchAction&&t.id===h.Z.runtime.id)switch(e.dispatchAction){case n4:this.clearAppRegion();break;case s4:this.restoreAppRegion()}})),_8(this,"_acceptPopup",((e,t)=>{const n=Q4.getState().find((t=>t.identifier===e));n&&n.acceptOrBlockCallback(t)})),_8(this,"_onMacMenuAction",((e,t,n)=>{if(e===this.context.vivaldiWindowId&&!W.ZP.isMinimized(this.context.vivaldiWindowId)){const e=F.Z.getHandlerByAction(t,n);e?e():o.Z.executeActions(t)}})),_8(this,"_onDocumentMenu",((e,t,n)=>{e===this.context.vivaldiWindowId&&Il.show(e,t,n)})),_8(this,"_onBroadcastMessage",(e=>{if(e.open){const{winId:t,urls:n,prompt:s}=e.open;if(W.ZP.getWindowState(t)){const e={bookmarks:n.map((e=>({url:e}))),inCurrent:!1,inBackground:A.ZP.get(P.kTabsOpenNewInBackground)};en.ZP.open(e,s)}}else if(e.minimizeAll)for(const[e]of W.ZP.getState())dg.Z.minimize(e);else if(e.handlePopupWindow){const{popupId:t,windowId:n}=e.handlePopupWindow;this._acceptPopup(t,n)}else if(e.windowActiveStateChanged){const{windowId:t,activated:n}=e.windowActiveStateChanged;m.Z.dispatch({actionType:"WINDOW_ACTIVATED",activated:n,windowId:t})}else if(e.windowAdded){const{windowId:t,windowState:n}=e.windowAdded;m.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:n,windowId:t})}else if(e.windowRemoved){const{windowId:t}=e.windowRemoved;m.Z.dispatch({actionType:"WINDOW_CLOSED",windowId:t})}})),_8(this,"clearAppRegion",(()=>{this.setState({preventAppRegionDrag:!0})})),_8(this,"restoreAppRegion",(()=>{this.setState({preventAppRegionDrag:!1})})),_8(this,"handleDoubleClick",(()=>{"top"===this.props.prefValues[P.kTabsBarPosition]&&this.state.windowState.nativeDecorations?$.Z.openURL():W.ZP.isMaximized(this.context.vivaldiWindowId)||(W.ZP.isFullscreen(this.context.vivaldiWindowId),0)?dg.Z.restore(this.context.vivaldiWindowId):dg.Z.maximize(this.context.vivaldiWindowId)})),_8(this,"closeConfirmOpenBookmarksDialog",(()=>{this.setState({confirmOpenBookmarksOptions:null})})),_8(this,"showConfirmOpenBookmarksDialog",(e=>{this.setState({confirmOpenBookmarksOptions:e})})),_8(this,"showClearBrowsingHistoryDialog",(e=>{W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)||this.setState({clearBrowsingHistoryDialog:e})})),_8(this,"closeClearBrowsingHistoryDialog",(()=>{this.setState({clearBrowsingHistoryDialog:null})})),_8(this,"closeImportContacts",(()=>{this.setState({importData:this.refs.webpageview})})),_8(this,"showBookmarkDialog",(e=>{this.setState({bookmarkDialogParent:this.refs.webpageview,bookmarkDialogOptions:e})})),_8(this,"closeBookmarkDialog",(()=>{this.setState({bookmarkDialogParent:!1})})),_8(this,"closeSaveSession",(()=>{this.setState({saveSession:!1})})),_8(this,"showSaveSession",(e=>{this.setState({saveSession:this.refs.webpageview,saveSessionOptions:e})})),_8(this,"closeOpenSession",(()=>{this.setState({openSession:!1})})),_8(this,"showOpenSession",(()=>{this.setState({openSession:this.refs.webpageview})})),_8(this,"showDialog",((e,t)=>{this.setState({dialogCustomData:e,onAfterCloseDialog:t})})),_8(this,"handleOnCloseDialog",(()=>{this.setState({dialogCustomData:null}),N8.nextTick((()=>{this.state.onAfterCloseDialog?.()}))})),_8(this,"hasHorizontalMenu",(()=>Boolean("top"===this.props.prefValues[P.kMenuDisplay]&&!0))),_8(this,"getBrowserClasses",((e,t)=>{const n=this.props.prefValues[P.kTabsBarPosition],s=(0,W.WV)(t),i="settings"===t.type,r="normal"===t.type,a="popup"===t.type,o="substrip"===this.props.prefValues[P.kTabsStackingMode],l="accordion"===this.props.prefValues[P.kTabsStackingMode];return bn()(y8,s,{...this.state.windowClassNames,win10:navigator.appVersion.indexOf("Windows NT 10")>0,"minimal-ui":W.ZP.isMinimalUI(e),hasfocus:t.active,isblurred:!t.active,native:t.nativeDecorations,"mac-fullscreen-hover":t.fullscreenMenubarShown&&t.active,popup:a,"is-settingspage":i,"horizontal-menu":this.hasHorizontalMenu(),"tabs-at-edge":this.props.prefValues[P.kTabsAtEdge]&&("bottom"===n||"top"===n)&&("maximized"===t.state||"fullscreen"===t.state),alt:this.props.prefValues[P.kWindowsLinuxAltControls]&&!1,"alt-tabs":this.props.prefValues[P.kTabsCloseButtonLeft],"substrip-tabs-on":o,"accordion-tabs-on":l,"full-key-access":0===this.props.prefValues[P.kKeyboardTabToAll],"break-mode":this.state.isBreakModeActive,["stacks-"+this.props.prefValues[P.kTabsStackingMode]]:!0,["address-"+this.props.prefValues[P.kAddressBarPosition]+(t.visibleUI.addressBar?"":"-off")]:!0,["bookmark-bar-"+(t.visibleUI.bookmarksBar?this.props.prefValues[P.kBookmarksBarPosition]:"off")]:!0,["tabs-"+(t.visibleUI.tabs&&r?n:"off")]:!0,"is-dragging-button":this.state.isDraggingButton,"no-app-dragging":this.state.preventAppRegionDrag,"active-pane-selection":this.state.paneSelection,"animation-off":!this.props.prefValues[P.kThemeUseAnimation]})}));const n=W.ZP.getWindowState(t.vivaldiWindowId),s=Z.Z.getState().windowClassNames.get(t.vivaldiWindowId)||{},i=Z.Z.getState().windowThemes.get(t.vivaldiWindowId)||no.Z.getDefaultTheme(),r=Z.Z.getState().windowStyles.get(t.vivaldiWindowId)||no.Z.getFallbackStyle();if(!n)throw new Error("MainWindow constructor: Expected windowState");this.state={bookmarkDialogParent:!1,bookmarkDialogOptions:null,capturing:xi.getCapturingState(),clearBrowsingHistoryDialog:null,confirmOpenBookmarksOptions:null,onAfterCloseDialog:null,dialogCustomData:null,importData:!1,isBreakModeActive:di.Z.getState().isActive,isDraggingButton:!1,panelWidth:re.ZP.getPanelWidth()+6,mainDialogOptions:null,mainDialogType:null,openSession:!1,paneSelection:!1,preventAppRegionDrag:!1,quickCommandValue:"",saveSession:!1,saveSessionOptions:null,windowClassNames:s,windowStyle:r,windowState:n,windowTheme:i,startupDialogQueue:new Map},this._updateKeyUIMode(),this.trackContextOnFocus=hJ("content",this.context)}async componentDidMount(){r8(),$0.addChangeListener(this._onMainStoreChanged),re.ZP.addChangeListener(this._onPanelStoreChanged),this._captureStoreToken=xi.addListener(E8(this,I8)),this.breakModeStoreToken=di.Z.addListener(this.onBreakModeStoreChanged),v8(this,k8,Z.Z.addListener(this.onThemeStoreChanged)),this.windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged),b.Z.contextMenu.onDocumentMenu.addListener(this._onDocumentMenu),b.Z.utilities.onBroadcastMessage.addListener(this._onBroadcastMessage),h.Z.runtime.onMessage.addListener(this.onMessageReceived),this.detachFocusableEvents=t8(this.context.document),h.Z.contextMenus.removeAll(),await this.createStartupDialogQueue(),b.Z.windowPrivate.onActiveTabStatusText.addListener(this._onActiveTabStatusText),this._popupWindowStoreToken=Q4.addListener(this._onPopupWindowStoreChanged)}componentDidUpdate(e,t){if(e.prefValues[P.kThemesPreview].length<this.props.prefValues[P.kThemesPreview].length){const e=no.Z.getPreview();W.ZP.getId()===this.context.vivaldiWindowId&&this.showDialog({dialogtype:"themePreview",themeName:e?.name,isUpdate:this.props.prefValues[P.kThemesUser].findIndex((t=>t.id===e?.id))>-1},null)}else e.prefValues[P.kThemesPreview].length>this.props.prefValues[P.kThemesPreview].length&&this.handleOnCloseDialog();!t.windowState.active&&this.state.windowState.active&&this.maybeFocusLastActiveElement()}componentWillUnmount(){a8(),this.detachFocusableEvents(),$0.removeChangeListener(this._onMainStoreChanged),re.ZP.removeChangeListener(this._onPanelStoreChanged),this.breakModeStoreToken.remove(),this.windowStoreToken.remove(),E8(this,k8).remove(),b.Z.contextMenu.onDocumentMenu.removeListener(this._onDocumentMenu),b.Z.utilities.onBroadcastMessage.removeListener(this._onBroadcastMessage),h.Z.runtime.onMessage.removeListener(this.onMessageReceived),this._popupWindowStoreToken.remove()}render(){const e=this.props.prefValues,{capturing:t}=this.state,i=e[P.kTabsBarPosition],{html5FullScreen:a,state:o,visibleUI:l}=this.state.windowState,c="left"===i||"right"===i?{[`padding${(0,g8.Z)(i)}`]:e[P.kTabsBarWidth]}:void 0,u="fullscreen"===o&&!(l.tabs&&"top"===i);return s.createElement("div",{id:"browser",lang:h.Z.i18n.getUILanguage(),className:this.getBrowserClasses(this.context.vivaldiWindowId,this.state.windowState),style:this.state.windowStyle,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDragEnd,__source:{fileName:f8,lineNumber:1069,columnNumber:7}},s.createElement("div",{id:"header",onDoubleClick:this.handleDoubleClick,__source:{fileName:f8,lineNumber:1082,columnNumber:9}},s.createElement(N9,{isHidden:u,isPopupWindow:!1,tabPosition:l.tabs?i:"none",keyAccess:e[P.kKeyboardTabToAll],__source:{fileName:f8,lineNumber:1083,columnNumber:11}}),this.hasHorizontalMenu()&&s.createElement(x9,{__source:{fileName:f8,lineNumber:1090,columnNumber:40}}),("top"===i||!l.tabs)&&s.createElement(X7,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:i,theme:this.state.windowTheme,visible:l.tabs,__source:{fileName:f8,lineNumber:1093,columnNumber:13}})),s.createElement("div",{id:"main",className:e[P.kPanelsPosition],__source:{fileName:f8,lineNumber:1103,columnNumber:9}},s.createElement(LJ,{size:"large",__source:{fileName:f8,lineNumber:1104,columnNumber:11}}),l.bookmarksBar&&s.createElement(mi,{display:e[P.kBookmarksBarDisplay],statusOff:"off"===l.statusBar,keyAccess:e[P.kKeyboardTabToAll],__source:{fileName:f8,lineNumber:1109,columnNumber:13}}),this.shouldShowStartupDialog(Q.oj)&&s.createElement(c6,{onClose:this.closeStartupDialog.bind(this,Q.oj),__source:{fileName:f8,lineNumber:1116,columnNumber:13}}),s.createElement("div",{className:"inner",__source:{fileName:f8,lineNumber:1120,columnNumber:11}},this.state.dialogCustomData&&s.createElement(il,{customData:this.state.dialogCustomData,closeDialog:this.handleOnCloseDialog,__source:{fileName:f8,lineNumber:1123,columnNumber:15}}),this.state.confirmOpenBookmarksOptions&&s.createElement(ar,{urls:this.state.confirmOpenBookmarksOptions.urls,openOptions:this.state.confirmOpenBookmarksOptions.openOptions,onRequestClose:this.closeConfirmOpenBookmarksDialog,__source:{fileName:f8,lineNumber:1129,columnNumber:15}}),this.state.clearBrowsingHistoryDialog&&s.createElement(sr,{onClose:this.closeClearBrowsingHistoryDialog,__source:{fileName:f8,lineNumber:1136,columnNumber:15}}),this.state.bookmarkDialogParent&&this.state.bookmarkDialogOptions&&s.createElement(hn,{onClose:this.closeBookmarkDialog,mode:this.state.bookmarkDialogOptions.mode,id:this.state.bookmarkDialogOptions.id,index:this.state.bookmarkDialogOptions.index,__source:{fileName:f8,lineNumber:1142,columnNumber:15}}),this.state.saveSession&&this.state.saveSessionOptions&&s.createElement(a6,{onClose:this.closeSaveSession,options:this.state.saveSessionOptions,__source:{fileName:f8,lineNumber:1150,columnNumber:15}}),!W.ZP.isIncognitoOrGuest(this.context.vivaldiWindowId)&&s.createElement(h6,{__source:{fileName:f8,lineNumber:1156,columnNumber:15}}),this.shouldShowStartupDialog(Q.Bo)&&s.createElement(n6,{onClose:this.closeStartupDialog.bind(this,Q.Bo),__source:{fileName:f8,lineNumber:1159,columnNumber:15}}),this.shouldShowStartupDialog(Q.d7)&&s.createElement(Ml,{onClose:this.closeStartupDialog.bind(this,Q.d7),__source:{fileName:f8,lineNumber:1164,columnNumber:15}}),this.shouldShowStartupDialog(Q.yl)&&s.createElement(Hl,{onClose:this.closeStartupDialog.bind(this,Q.yl),__source:{fileName:f8,lineNumber:1169,columnNumber:15}}),this.shouldShowStartupDialog(Q.Yd)&&s.createElement(Rl,{onClose:this.closeStartupDialog.bind(this,Q.Yd),__source:{fileName:f8,lineNumber:1174,columnNumber:15}}),this.state.openSession&&s.createElement(a2,{dialogParentElement:this.state.openSession,keyAccess:e[P.kKeyboardTabToAll],onClose:this.closeOpenSession,__source:{fileName:f8,lineNumber:1180,columnNumber:15}}),s.createElement($4,{key:"panel",position:e[P.kPanelsPosition],outsideClickIgnoreClass:"panel-clickoutside-ignore",__source:{fileName:f8,lineNumber:1186,columnNumber:13}}),"left"===i&&l.tabs&&s.createElement(X7,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:i,theme:this.state.windowTheme,visible:l.tabs,__source:{fileName:f8,lineNumber:1192,columnNumber:15}}),s.createElement("div",{ref:"webpageview",id:"webview-container",onFocus:this.trackContextOnFocus,__source:{fileName:f8,lineNumber:1201,columnNumber:13}},s.createElement(J9,{cycleFocus:A.ZP.get(P.kWebpagesFocusTrap),__source:{fileName:f8,lineNumber:1206,columnNumber:15}})),"overlay"===l.statusBar&&!a&&s.createElement(Oh,{style:{[e[P.kPanelsPosition]]:this.state.panelWidth,...c},__source:{fileName:f8,lineNumber:1212,columnNumber:15}}),"right"===i&&l.tabs&&s.createElement(X7,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:i,theme:this.state.windowTheme,visible:l.tabs,__source:{fileName:f8,lineNumber:1220,columnNumber:15}}))),s.createElement("footer",{__source:{fileName:f8,lineNumber:1231,columnNumber:9}},"bottom"===i&&l.tabs&&s.createElement(X7,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:i,theme:this.state.windowTheme,visible:!0,__source:{fileName:f8,lineNumber:1233,columnNumber:13}}),"on"===l.statusBar&&s.createElement(yp,{name:P.kToolbarsStatus,menuOrigin:"bottomLeft",className:"toolbar-statusbar",popupPosition:"above",size:"medium",__source:{fileName:f8,lineNumber:1243,columnNumber:13}})),this.state.mainDialogType&&s.createElement(K0,{ref:e=>this.mainDialog=e?e.refs.visualTabSwitcher:null,onClose:this.onCloseMainDialog,dialog:this.state.mainDialogType,options:this.state.mainDialogOptions,quickCommandValue:this.state.quickCommandValue,storeQuickCommandSearch:this.storeQuickCommandSearch,__source:{fileName:f8,lineNumber:1254,columnNumber:11}}),this.props.prefValues[P.kAppearanceHudEnabled]&&s.createElement(io.Z,{classNames:"HUD",in:this.state.isBreakModeActive,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:500,exit:100},__source:{fileName:f8,lineNumber:1267,columnNumber:11}},s.createElement("button",{className:"HUD",onClick:r.Z.toggleBreakMode,dangerouslySetInnerHTML:{__html:cn._qK.large},__source:{fileName:f8,lineNumber:1277,columnNumber:13}})),s.createElement("svg",{version:"1.1",width:"0",height:"0",dangerouslySetInnerHTML:{__html:n(46639)},__source:{fileName:f8,lineNumber:1287,columnNumber:9}}),t&&s.createElement(Mi,{__source:{fileName:f8,lineNumber:1296,columnNumber:23}}))}}_8(A8,"contextType",Vs.Z);const Z8=(0,bi.Z)(A8,w8);var P8=n(60253),D8=n(12595);var M8,O8,x8,L8="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\popupcontents\\PopupContents.jsx";class R8 extends s.Component{render(){const e=V.ZP.getActivePage(this.context.vivaldiWindowId);return e?s.createElement("div",{ref:"webpageview",className:"inner",__source:{fileName:L8,lineNumber:20,columnNumber:7}},s.createElement(mJ,{key:`page-component-${e.id}`,id:e.id,url:e.url,target:e.target,extData:e.extData,showImageInspector:e.showImageInspector,discarded:e.discarded,isVisible:!0,contentWidth:0,contentHeight:0,isActive:e.active,supportsReaderMode:e.supportsReaderMode,qrCodeUrl:void 0,onDialogClosed:qo.default,__source:{fileName:L8,lineNumber:21,columnNumber:9}})):null}}M8=R8,O8="contextType",x8=Vs.Z,O8 in M8?Object.defineProperty(M8,O8,{value:x8,enumerable:!0,configurable:!0,writable:!0}):M8[O8]=x8;const B8=R8;var F8="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\PopupWindow.jsx";function U8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class V8 extends s.PureComponent{constructor(e){super(),U8(this,"onPagestoreChanged",(e=>{const t=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId);this.setState(this.getPageState(t));const n=(0,Pt.d6)(t.url,t.title);this.updateWindowTitle(n)})),U8(this,"onNavigationStoreChanged",(e=>{this.setState((e=>{const t=Gd.Z.getNavigationInfo(e.id);if(t)return{url:t.webviewUrl}}))})),U8(this,"getPageState",(e=>({url:e.url,id:e.id,active:e.active,favIconUrl:e.favIconUrl}))),U8(this,"updateWindowTitle",(e=>{this.context.document.title!==e&&(this.context.document.title=e)}));const t=V.ZP.unsafeGetActivePage(e.vivaldiWindowId);this.state=this.getPageState(t)}componentDidMount(){Gd.Z.addChangeListener(this.onNavigationStoreChanged),V.ZP.addChangeListener(this.onPagestoreChanged);const e=V.ZP.unsafeGetActivePage(this.context.vivaldiWindowId),t=(0,Pt.d6)(e.url,e.title);this.updateWindowTitle(t)}componentWillUnmount(){Gd.Z.removeChangeListener(this.onNavigationStoreChanged),V.ZP.removeChangeListener(this.onPagestoreChanged)}render(){return s.createElement("div",{id:"main",__source:{fileName:F8,lineNumber:79,columnNumber:9}},s.createElement(PJ,{showNavigationButtons:!1,readonly:!0,url:this.state.url,id:this.state.id,active:this.state.active,favIconUrl:this.state.favIconUrl,__source:{fileName:F8,lineNumber:80,columnNumber:11}}),s.createElement("div",{className:"inner",__source:{fileName:F8,lineNumber:88,columnNumber:11}},s.createElement(B8,{__source:{fileName:F8,lineNumber:89,columnNumber:13}})))}}U8(V8,"contextType",Vs.Z);const H8=V8;function W8(e){0}var z8="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\WindowPortal.jsx";function G8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K8(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,j8(e,t,"set"),n),n}function j8(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Y8=new WeakMap;class $8 extends s.PureComponent{constructor(...e){super(...e),Y8.set(this,{writable:!0,value:void 0}),G8(this,"state",{appElm:void 0,contentWindow:void 0,windowState:void 0,popupTabId:-1,windowStyle:no.Z.getFallbackStyle(),windowClassNames:{}}),G8(this,"windowClosed",(e=>{const{contentWindow:t}=this.state;t&&e===t.vivaldiWindowId&&(this.props.closeWindowCallback&&this.props.closeWindowCallback(t),"popup"===this.props.windowType&&m.Z.dispatch({actionType:"POPUPWINDOW_CLOSED",componentId:this.props.componentIdentifier}),m.Z.dispatch({actionType:"WINDOW_CLOSED",windowId:e}),b.Z.utilities.broadcastMessage({windowRemoved:{windowId:e}}))})),G8(this,"onNewAppWindowCreated",(async({windowId:e,contentWindow:t})=>{if(-1===e||!t)return void console.error(`WindowPortal onNewAppWindowCreated failed for windowId: ${e}`);const n=await h.Z.windows.get(e),s=await b.Z.runtimePrivate.isGuestSession(e);t.vivaldiWindowId=e,"popup"===this.props.windowType&&b.Z.utilities.broadcastMessage({handlePopupWindow:{windowId:e,popupId:this.props.componentIdentifier}});const i={active:!0,state:"normal",restoreStateFullscreen:"normal",restoreStateHtml5Fullscreen:"normal",fullscreenMenubarShown:!1,html5FullScreen:!1,minimalUI:!1,nativeDecorations:A.ZP.get(P.kWindowsUseNativeDecoration),type:this.props.windowType,visibleUI:W.ZP.getUIFromPrefs(),incognito:n.incognito&&!s,guest:s};t.onload=()=>{this.onContentWindowLoaded(e,t,i)},m.Z.dispatch({actionType:"THEME_WINDOW_CREATED",windowId:e}),m.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:i,windowId:e}),b.Z.utilities.broadcastMessage({windowAdded:{windowId:e,windowState:i}})})),G8(this,"onContentWindowLoaded",((e,t,n)=>{const s=t.document,i=Z.Z.getState().windowStyles.get(e)||no.Z.getFallbackStyle(),r=Z.Z.getState().windowClassNames.get(e)||{};if(!s.body)return void console.error(`Application document creation failed: ${e}`);const a=s.body.appendChild(s.createElement("div"));a.id="app",this.detachFocusableEvents=t8(s),this.setState({appElm:a,contentWindow:t,windowStyle:i,windowState:n,windowClassNames:r}),W8()})),G8(this,"onWindowWebContentsDidStartLoading",(e=>{this.state.contentWindow&&this.context.vivaldiWindowId===e&&dg.Z.close(this.state.contentWindow.vivaldiWindowId)})),G8(this,"_onDocumentMenu",((e,t,n)=>{e===this.state.contentWindow?.vivaldiWindowId&&Il.show(e,t,n)})),G8(this,"_onThemeStoreChanged",(()=>{if(!this.state.contentWindow)return;const e=this.state.contentWindow.vivaldiWindowId,t=Z.Z.getState().windowStyles.get(e)||no.Z.getFallbackStyle(),n=Z.Z.getState().windowClassNames.get(e)||{};t===this.state.windowStyle&&n===this.state.windowClassNames||this.setState({windowStyle:t,windowClassNames:n})})),G8(this,"_onWindowStoreChanged",(()=>{if(!this.state.contentWindow)return;const e=this.state.contentWindow.vivaldiWindowId,t=W.ZP.getWindowState(e);this.state.windowState!==t&&this.setState({windowState:t})}))}async componentDidMount(){const e={bounds:this.props.windowBounds,focused:!0,incognito:this.props.incognito};try{b.Z.contextMenu.onDocumentMenu.addListener(this._onDocumentMenu),b.Z.windowPrivate.onWindowClosed.addListener(this.windowClosed),b.Z.windowPrivate.onWebContentsDidStartNavigation.addListener(this.onWindowWebContentsDidStartLoading),this.windowStoreToken=W.ZP.addListener(this._onWindowStoreChanged),K8(this,Y8,Z.Z.addListener(this._onThemeStoreChanged)),$.Z.openWindowNew("window.html",e,this.props.windowType).then(this.onNewAppWindowCreated)}catch(e){console.error(e)}r8()}componentWillUnmount(){var e,t;this.detachFocusableEvents(),this.windowStoreToken.remove(),b.Z.contextMenu.onDocumentMenu.removeListener(this._onDocumentMenu),(e=this,t=Y8,function(e,t){return t.get?t.get.call(e):t.value}(e,j8(e,t,"get"))).remove(),b.Z.windowPrivate.onWindowClosed.removeListener(this.windowClosed),b.Z.windowPrivate.onWebContentsDidStartNavigation.removeListener(this.onWindowWebContentsDidStartLoading),this.state.contentWindow&&this.state.contentWindow.close(),a8()}render(){const{appElm:e,contentWindow:t,windowState:n,windowClassNames:i}=this.state;if(!(e&&t&&n&&i))return null;const r=s.createElement(Vs.Z.Provider,{value:t,__source:{fileName:z8,lineNumber:298,columnNumber:7}},s.createElement("div",{id:"browser",style:this.state.windowStyle,className:this.props.getBrowserClasses(t.vivaldiWindowId,n,i),__source:{fileName:z8,lineNumber:299,columnNumber:9}},s.createElement("div",{id:"header",__source:{fileName:z8,lineNumber:306,columnNumber:11}},s.createElement(N9,{isHidden:!1,tabPosition:"none",isPopupWindow:!0,keyAccess:this.props.keyAccess,__source:{fileName:z8,lineNumber:307,columnNumber:13}})),s.createElement("div",{id:"main",__source:{fileName:z8,lineNumber:315,columnNumber:11}},s.createElement(IC,{__source:{fileName:z8,lineNumber:316,columnNumber:13}},this.props.children))));return pn.createPortal(r,e)}}G8($8,"contextType",Vs.Z);const X8=$8;var Q8=n(14919),q8="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\WindowManager.jsx";function J8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const eee=[P.kAddressBarPosition,P.kAppearanceHudEnabled,P.kBookmarksBarDisplay,P.kBookmarksBarPosition,P.kKeyboardTabToAll,P.kKeyboardTabToAllUsesSystemDefault,P.kMenuDisplay,P.kPanelsPosition,P.kPanelsAsOverlayEnabled,P.kRazerChromaHasShownPromotion,P.kStartupShowMediaAvailableInformation,P.kStartupShowFfmpegInformation,P.kStatusBarDisplay,P.kTabsAtEdge,P.kTabsBarPosition,P.kTabsBarWidth,P.kTabsCloseButtonLeft,P.kTabsStackingMode,P.kThemeUseAnimation,P.kWindowsLinuxAltControls],tee=n8.Z.call();class nee extends s.PureComponent{constructor(e,t){super(e),J8(this,"addSessionWindows",(()=>{h.Z.windows.getAll({populate:!0},(e=>{e.forEach(((e,t)=>{if(e.id){const t=e.id,n=(0,Q8.Z)(e.extData),s={active:e.focused,state:"locked-fullscreen"===e.state?"normal":e.state,restoreStateFullscreen:"maximized"===e.state?"maximized":"normal",restoreStateHtml5Fullscreen:"normal",fullscreenMenubarShown:!1,guest:!1,html5FullScreen:!1,incognito:e.incognito,minimalUI:n.minimalUI,nativeDecorations:A.ZP.get(P.kWindowsUseNativeDecoration),type:"normal",visibleUI:W.ZP.getUIFromPrefs()};n.visibleUI&&W.ZP.isMinimalUI(t)&&(s.visibleUI=n.visibleUI),m.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:s,windowId:t})}}))}))})),J8(this,"_onPopupWindowStoreChanged",((e,t)=>{this.setState((n=>{let s=n.popupWindows;return s=s.filter((t=>t.ownerWindowId!==e)),{popupWindows:s.concat(t)}}))})),J8(this,"_onBroadcastMessage",(e=>{if(e.open){const{winId:t,urls:n,prompt:s}=e.open;if(W.ZP.getWindowState(t)){const e={bookmarks:n.map((e=>({url:e}))),inCurrent:!1,inBackground:A.ZP.get(P.kTabsOpenNewInBackground)};en.ZP.open(e,s)}}else if(e.minimizeAll)for(const[e]of W.ZP.getState())dg.Z.minimize(e);else if(e.popupStoreChanged){const{windowId:t,popupWindows:n}=e.popupStoreChanged;this._onPopupWindowStoreChanged(t,n)}else if(e.showSettingsWindow)this.setState({showSettings:!0,settingsCategory:e.showSettingsWindow.settingsCategory},(()=>{for(const[e]of W.ZP.getState())if(W.ZP.isSettings(e)){h.Z.windows.update(e,{focused:!0});break}}));else if(e.windowActiveStateChanged){const{windowId:t,activated:n}=e.windowActiveStateChanged;m.Z.dispatch({actionType:"WINDOW_ACTIVATED",activated:n,windowId:t})}else if(e.windowAdded){const{windowId:t,windowState:n}=e.windowAdded;m.Z.dispatch({actionType:"WINDOW_SET_STATE",windowState:n,windowId:t})}else if(e.windowRemoved){const{windowId:t}=e.windowRemoved;m.Z.dispatch({actionType:"WINDOW_CLOSED",windowId:t})}})),J8(this,"closeSettingsWindow",(e=>{this.setState({showSettings:!1}),0===e.outerWidth&&0===e.outerHeight&&0===e.screenLeft&&0===e.screenTop||(st.Z.set(P.kSettingsSizeWidth,e.outerWidth),st.Z.set(P.kSettingsSizeHeight,e.outerHeight),st.Z.set(P.kSettingsSizeLeft,e.screenLeft),st.Z.set(P.kSettingsSizeTop,e.screenTop))})),J8(this,"getBrowserClasses",((e,t,n)=>{const s=this.props.prefValues[P.kTabsBarPosition],i=(0,W.WV)(t),r="settings"===t.type,a="normal"===t.type,o="popup"===t.type,l="substrip"===this.props.prefValues[P.kTabsStackingMode],c="accordion"===this.props.prefValues[P.kTabsStackingMode];return bn()(tee,i,{...n,win10:navigator.appVersion.indexOf("Windows NT 10")>0,"minimal-ui":W.ZP.isMinimalUI(e),hasfocus:t.active,isblurred:!t.active,native:t.nativeDecorations,"mac-fullscreen-hover":t.fullscreenMenubarShown&&t.active,popup:o,"is-settingspage":r,"horizontal-menu":!1,"tabs-at-edge":this.props.prefValues[P.kTabsAtEdge]&&("bottom"===s||"top"===s)&&("maximized"===t.state||"fullscreen"===t.state),"animation-off":!this.props.prefValues[P.kThemeUseAnimation],alt:this.props.prefValues[P.kWindowsLinuxAltControls]&&!1,"alt-tabs":this.props.prefValues[P.kTabsCloseButtonLeft],"substrip-tabs-on":l,"accordion-tabs-on":c,"full-key-access":0===this.props.prefValues[P.kKeyboardTabToAll],"break-mode":!1,["stacks-"+this.props.prefValues[P.kTabsStackingMode]]:!0,["address-"+this.props.prefValues[P.kAddressBarPosition]+(t.visibleUI.addressBar?"":"-off")]:!0,["bookmark-bar-"+(t.visibleUI.bookmarksBar?this.props.prefValues[P.kBookmarksBarPosition]:"off")]:!0,["tabs-"+(t.visibleUI.tabs&&a?s:"off")]:!0,"is-dragging-button":!1,"no-app-dragging":!1,"active-pane-selection":!1})})),J8(this,"getSettingsWindowBounds",(()=>{const{screen:e}=this.context,t=A.ZP.get(P.kSettingsSizeWidth),n=A.ZP.get(P.kSettingsSizeHeight),s=A.ZP.get(P.kSettingsSizeLeft),i=A.ZP.get(P.kSettingsSizeTop),r=n<=e.height?n:e.height;let a=s>=0?s:e.availLeft+t/2,o=i>=0?i:e.availTop+(e.height-n)/2;o<0&&(o=0);a+t>e.availLeft+e.width&&(a=e.availLeft+(e.width-t),a<0&&(a=0));return{left:Math.round(a),top:Math.round(o),width:Math.round(t),height:Math.round(r)}})),J8(this,"renderPopups",(()=>this.state.popupWindows.map((e=>s.createElement(X8,{getBrowserClasses:this.getBrowserClasses,windowBounds:e.windowBounds,keyAccess:this.props.prefValues[P.kKeyboardTabToAll],windowType:"popup",key:e.identifier,componentIdentifier:e.identifier,incognito:e.incognito,__source:{fileName:q8,lineNumber:346,columnNumber:11}},s.createElement(H8,{__source:{fileName:q8,lineNumber:355,columnNumber:13}})))))),this.state={popupWindows:[],settingsCategory:"general",showSettings:!1}}componentDidMount(){b.Z.utilities.onBroadcastMessage.addListener(this._onBroadcastMessage),this.addSessionWindows()}componentWillUnmount(){this.windowStoreToken.remove(),b.Z.utilities.onBroadcastMessage.removeListener(this._onBroadcastMessage)}render(){const{settingsCategory:e}=this.state;return s.createElement(s.Fragment,null,s.createElement("div",{lang:h.Z.i18n.getUILanguage(),__source:{fileName:q8,lineNumber:366,columnNumber:7}},this.state.showSettings&&s.createElement(X8,{closeWindowCallback:this.closeSettingsWindow,getBrowserClasses:this.getBrowserClasses,windowBounds:this.getSettingsWindowBounds(),keyAccess:this.props.prefValues[P.kKeyboardTabToAll],windowType:"settings",componentIdentifier:"settingswindow",incognito:!1,__source:{fileName:q8,lineNumber:370,columnNumber:9}},s.createElement("div",{className:"webpageview",__source:{fileName:q8,lineNumber:378,columnNumber:11}},s.createElement(EW,{url:bW+e,__source:{fileName:q8,lineNumber:379,columnNumber:13}}))),this.renderPopups()))}}J8(nee,"contextType",Vs.Z);const see=(0,bi.Z)(nee,eee),iee=function(){if("function"==typeof b.Z.bookmarksPrivate.updateSpeedDialsForWindowsJumplist){var e=tn.ZP.getSpeeddialFolders();if(e&&0!==e.length&&e[0].children){var t=e[0].children.filter((e=>e.url)).map((e=>({title:e.title,url:e.url})));b.Z.bookmarksPrivate.updateSpeedDialsForWindowsJumplist(t)}}};const ree={start:function(){"function"==typeof b.Z.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&(iee(),tn.ZP.addChangeListener(iee))},stop:function(){"function"==typeof b.Z.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&tn.ZP.removeChangeListener(iee)}};n(34155);var aee="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\app.js";const oee=document.getElementById("portals"),lee=document.getElementById("app"),cee=!1;console.time("JS init startup"),(0,T.MD)();const uee=()=>new Promise(((e,t)=>{try{b.Z.utilities.getSystemDateFormat((n=>{n.longDateFormat&&g().defineLocale(B.ZP.fixMomentLocale(h.Z.i18n.getUILanguage())+"-viv",B.ZP.getLocale(n)),lee?pn.render(s.createElement(Z8,{__source:{fileName:aee,lineNumber:87,columnNumber:13}}),lee,e):oee?pn.render(s.createElement(see,{__source:{fileName:aee,lineNumber:93,columnNumber:13}}),oee,e):t()}))}catch(e){t(e)}})),mee=()=>{cee};c.Z.initFastForward();try{if(lee)W8(),async function(e){await(0,at.jl)(A.ZP.loadPromise,"PrefsCache"),(0,at.aE)(),await(0,at.jl)(dg.Z.loadPromise,"WindowActions"),await(0,at.jl)(d.Z.loadPromise,"vivaldiSettings"),await(0,at.jl)(nS.Z.loadPromise,"VivaldiFeatureFlags"),await Promise.all([(0,at.jl)(Qo.Z.loadPromise,"ThemeActions"),(0,at.jl)(r.Z.loadPromise,"BreakModeActions"),(0,at.jl)(ie.Z.loadPromise,"PanelActions"),(0,at.jl)(ur.loadPromise,"SearchEngineActions"),(0,at.jl)($.Z.attachPageEventsPromise,"PageActions eventlisteners"),(0,at.jl)($.Z.loadPromise,"PageActions")]),await uee(),mee(),await Promise.all([(0,at.jl)(rF.loadPromise,"VivaldiAccountActions"),(0,at.jl)(zF.loadPromise,"SyncActions"),(0,at.jl)(o.Z.loadPromise,"CommandActions"),(0,at.jl)(i.Z.loadPromise,"BookmarkActions"),(0,at.jl)(Li.Z.loadPromise,"NoteActions"),(0,at.jl)(o0.Z.loadPromise,"TrashActions"),(0,at.jl)(R.loadPromise,"HueActions")]),await(0,at.jl)(w.loadPromise,"HistoryActions"),await Promise.all([k_.Z.load(),QN.Z.migrateTypedHistory(),P8.Z.load(),dl.Z.init()]),await(0,at.jl)(l.Z.loadPromise,"DownloadActions"),ree.start(),class{static init(){b.Z.autoUpdate.onDidAbortWithError.addListener(((e,t)=>{e&&console.warn(e,t),m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidAbortWithError",message:t})})),b.Z.autoUpdate.onDidFindValidUpdate.addListener(((e,t)=>{m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidFindValidUpdate",version:t,releaseNotesUrl:e})})),b.Z.autoUpdate.onWillDownloadUpdate.addListener((e=>{m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onWillDownloadUpdate",version:e})})),b.Z.autoUpdate.onDidDownloadUpdate.addListener((e=>{m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidDownloadUpdate",version:e})})),b.Z.autoUpdate.onWillInstallUpdateOnQuit.addListener((e=>{m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onWillInstallUpdateOnQuit",version:e})})),b.Z.autoUpdate.onUpdaterDidRelaunchApplication.addListener((()=>{m.Z.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onUpdaterDidRelaunchApplication"})}))}}.init(),qt.start(),a.Z.init(),D8.Z.init(),console.timeEnd("JS init startup")}(window);else{if(!oee)throw"No root element.";!async function(){await(0,at.jl)(A.ZP.loadPromise,"PrefsCache"),(0,at.aE)(),await(0,at.jl)(d.Z.loadPromise,"vivaldiSettings"),await(0,at.jl)(nS.Z.loadPromise,"VivaldiFeatureFlags"),await Promise.all([(0,at.jl)(i.Z.loadPromise,"BookmarkActions"),(0,at.jl)(o.Z.loadPromise,"CommandActions"),(0,at.jl)(rF.loadPromise,"VivaldiAccountActions"),(0,at.jl)(zF.loadPromise,"SyncActions"),(0,at.jl)(ur.loadPromise,"SearchEngineActions")]);const e=new SharedWorker("bundle-mailreader-worker.js");e.onerror=console.error,h.Z.runtime.getBackgroundPage((t=>{t?.postMessage({setupMailreaderOnBackground:!0},Q.oP,[e.port])})),K.Z.start(),a.Z.init(),await Promise.all([(0,at.jl)(Qo.Z.loadPromise,"ThemeActions"),(0,at.jl)($.Z.attachPageEventsPromise,"PageActions eventlisteners")]),await uee(),console.timeEnd("JS init startup")}()}}catch(e){console.log("Startup Process Failure: "+e),mee()}},67776:(e,t,n)=>{"use strict";n.d(t,{yR:()=>N,TR:()=>f,ZP:()=>v});var s=n(61858),i=n(49856),r=n(88279),a=n(21622),o=n(88047),l=n(54471),c=n(2121),u=n(68337),m=n(97748),d=n(74686),h=n(2993),p=n(7509),g=n(44025),b=n(30074);const N="vivaldi/x-bookmarks";function f(e){return!(0,g.$0)(e)}const _={open:function(e,t){if(t&&a.ZP.get(b.kBookmarksConfirmOpening)&&e.bookmarks.length>=a.ZP.get(b.kBookmarksConfirmOpeningThreshold))i.Z.showConfirmOpenBookmarkDialog({urls:e.bookmarks.map((({url:e})=>e)),openOptions:{inCurrent:e.inCurrent,inNewWindow:e.inNewWindow,inBackground:e.inBackground,incognito:e.incognito}});else{let t=!1===e.inCurrent;const n=!0===e.inNewWindow;let i=!0===e.inBackground;const c=!0===e.incognito;if(!1===t&&!1===n&&!1===i&&!0===e.allowOverride&&(!0===a.ZP.get(b.kBookmarksOpenInNewTab)&&(t=!0,!0===a.ZP.get(b.kTabsOpenNewInBackground)&&(i=!0)),1===e.bookmarks.length&&e.bookmarks[0].url.startsWith("javascript:")&&(t=!1)),!0===n){0;const t=e.bookmarks.map((e=>e.url)).filter((e=>s.ZP.filterUrl(e).length>0));r.Z.openBrowserWindow(l.ZP.getId(),t,{incognito:c,transition:o.Z.AUTO_BOOKMARK})}else{const n=e.bookmarks.filter((e=>s.ZP.filterUrl(e.url).length>0)),r=n.length>0?n[n.length-1]:void 0;n.forEach((e=>{!0===t?!0===i?this.openInNewTab(e,!0):this.openInNewTab(e,e!==r):(this.openInCurrentTab(e),t=!0)}))}}},openInNewTab:function(e,t){r.Z.openURL(e.url,{bookmarkId:e.id,inCurrent:!1,inBackground:t,transition:o.Z.AUTO_BOOKMARK})},openInCurrentTab:function(e){r.Z.openURL(e.url,{bookmarkId:e.id,inCurrent:!0,transition:o.Z.AUTO_BOOKMARK})},openInNewWindow:function(e,t,n){r.Z.openURL(e.url,{bookmarkId:e.id,inNewWindow:!0,inBackground:t,incognito:n,transition:o.Z.AUTO_BOOKMARK})},getBookmarksByNode:function(e){let t=[];return e.children?t=t.concat(e.children.filter((e=>s.ZP.isBookmark(e)))):s.ZP.isBookmark(e)&&t.push(e),t},getUrlsByNodes:function(e){return e.map((e=>_.getBookmarksByNode(e))).flat().map((e=>e.url)).filter((e=>s.ZP.filterUrl(e).length>0))},getOpenOptionsFromDisposition:function(e,t,n){switch(e){case"setting":return(0,m.Z)(n);case"current":return{inCurrent:!0};case"new-tab":return{inCurrent:!1,inBackground:t||a.ZP.get(b.kTabsOpenNewInBackground)};case"new-window":return{inNewWindow:!0,inBackground:t};case"new-private-window":return{inNewWindow:!0,inBackground:t,incognito:!0}}return{}},isCopyModifierPressed:function(e){return e.ctrlKey},makeEventFlagsFromApiResponse:function(e){const t={};return e.left?t.button=0:e.right?t.button=2:e.center&&(t.button=1),e.ctrl&&(t.ctrlKey=!0),e.alt&&(t.altKey=!0),e.shift&&(t.shiftKey=!0),e.command&&(t.metaKey=!0),t},verifyForUpdate(e,t){const n={...e};if(n.url&&(n.url=n.url.trim()),n.title&&(n.title=n.title.trim()),n.nickname&&(n.nickname=n.nickname.trim()),n.description&&(n.description=n.description.trim()),t)n.url="";else{let e=n.url||h.p;const{schemeParsed:t}=d.Z.utilities.isUrlValid(e);""===t&&(e=(0,p.q9)(e)),n.url=e}return n},verifyForCreate(e,t){const n={...e};if(n.url&&(n.url=n.url.trim()),n.title&&(n.title=n.title.trim()),n.nickname&&(n.nickname=n.nickname.trim()),n.description&&(n.description=n.description.trim()),t)n.url="";else{let e=n.url||h.p;const{schemeParsed:t}=d.Z.utilities.isUrlValid(e);""===t&&(e=(0,p.q9)(e)),n.url=e}return n},convertToPrivateType(e){const t={id:e.id,title:e.title,nickname:e.nickname,description:e.description,thumbnail:e.thumbnail,partner:e.partner,speeddial:e.speeddial,bookmarkbar:e.bookmarkbar,trash:e.trash};return e.parentId&&(t.parentId=e.parentId),e.index&&(t.index=e.index),e.url&&(t.url=e.url),e.dateAdded&&(t.dateAdded=e.dateAdded),e.dateGroupModified&&(t.dateGroupModified=e.dateGroupModified),e.children&&(t.children=[]),t},getEmptyNode:()=>({id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1}),extractTitleFromEvent:function(e){const{dataTransfer:t}=e.nativeEvent;if(t){var n=t.getData("vivaldi/x-title");if(""===n){const e=t.getData("text/html");if(""!==e){var s=document.createElement("div");s.innerHTML=e;const t=s.getElementsByTagName("a");if(t&&t[0]){const e=t[0].textContent;""!==e&&(n=e)}}}return n}},getUrlsFromEventPromise:(e,t)=>new Promise(((n,s)=>{const i=e.dataTransfer.getData("vivaldi/x-tab-entries"),r=e.dataTransfer.getData("text/uri-list");if(i){const e=JSON.parse(i).ids.map((e=>parseInt(e))).sort(((e,t)=>e-t));c.Z.tabs.query({},(t=>n(t.filter((t=>e.some((e=>t.id===e)))).filter((({url:e})=>!(0,g.pM)(e))).map((({title:e,url:t},n)=>({title:e||(0,u.ZP)(t),url:t}))))))}else{if(r.length>0){const t=_.extractTitleFromEvent(e);return n(r.split("\n").map(((e,n)=>({url:e,title:0===n&&""!==t?t:(0,u.ZP)(e)}))))}if(!0!==t)return s();{let t=e.dataTransfer.getData("text/plain");if(t.length>0){if((0,p.K2)(t))return n([{url:t,title:(0,u.ZP)(t)}]);if(t=t.trim(),t.length>0&&!/\s/.test(t)){const e=t.indexOf(".");if(e>0&&e<t.length-1&&(t=(0,p.q9)(t),(0,p.K2)(t)))return n([{url:t,title:(0,u.ZP)(t)}])}return s()}}}})),isBookmarkable:f},v=_},2993:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});const s="http://bookmark.placeholder.url/"},98517:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(82495),i=n(6478),r=n(21622),a=n(74368),o=n(74686),l=n(90106),c=n(30074);const u={},m={getAuthentication:async e=>{const{url:t,username:n,account_type:s}=e;return n&&t?new Promise(((i,r)=>{"google"===s?m._getOAuthAccessToken(n,"google").then((t=>{i({...e,oauth2Token:t,username:n,password:""})})).catch((e=>{r(e)})):m._getVivaldiPassword(n,t||"").then((t=>{i({...e,username:"vivaldi"===s?t.username.toLowerCase():t.username,password:t.password,oauth2Token:""})}))})):Promise.reject("Username or URL missing")},_getVivaldiPassword:async(e,t)=>{const{password:n}=await s.Z.getPassword(t,e);return{username:e,password:n,oauth2Token:""}},_getOAuthAccessToken:async(e,t)=>{const n=r.ZP.get(c.kCalendarRefreshTokens)||{},s=u[e];if(s&&s.expiryTime>Date.now())return s.access_token;if(n[e]){const s=await o.Z.utilities.osDecrypt(n[e]),{access_token:i,expires_in:r,invalid_grant:a}=await(0,l.jb)(s,t);if(a)return m.resetRefreshTokenAndFetchNew(e);{const t=Date.now()+1e3*parseInt(r);return u[e]={access_token:i,expiryTime:t},i}}return m.fetchAccessTokenAndRefreshToken(e)},resetRefreshTokenAndFetchNew:async e=>{const t=r.ZP.get(c.kCalendarRefreshTokens)||{};return delete t[e],i.Z.set(c.kCalendarRefreshTokens,t),m.fetchAccessTokenAndRefreshToken(e)},fetchAccessTokenAndRefreshToken:async e=>{const t=r.ZP.get(c.kCalendarRefreshTokens)||{},n=await(0,l.Xf)(e),{access_token:s,refresh_token:m,expires_in:d}=n,h=Date.now()+1e3*parseInt(d);if(u[e]={access_token:s,expiryTime:h},m)try{t[e]=await o.Z.utilities.osCrypt(m),i.Z.set(c.kCalendarRefreshTokens,t)}catch(e){a.ZP.error("Calendar",["oauth"],"Error crypting refresh_token",e)}return s}},d=m},45932:(e,t,n)=>{"use strict";n.d(t,{wt:()=>r,O5:()=>a,A:()=>o,FI:()=>l,GL:()=>c,L9:()=>u,ad:()=>m,$T:()=>d,LB:()=>h,JS:()=>p,d3:()=>g,lb:()=>b,lq:()=>N,QI:()=>f,hd:()=>_,jC:()=>v,hx:()=>E,fL:()=>C,fP:()=>w,II:()=>y,A2:()=>S,Mf:()=>T,Qg:()=>k,xu:()=>I});var s=n(63057),i=n(85612);const r={INIT:(0,s.Z)("Idle"),STARTING_PARSING_EVENTS:(0,s.Z)("Import Started"),PARSING_FINISHED:(0,s.Z)("Events Parsed"),IMPORTING:(0,s.Z)("Importing..."),IMPORT_FINISHED:(0,s.Z)("Import Finished"),IMPORT_ERROR:(0,s.Z)("Import Error")},a="YYYYMMDD",o="YYYYMMDDTHHmmss",l="YYYYMMDDTHHmmss[Z]",c="YYYYMMDDZ",u="YYYYMMDDTHHmmssZ",m="X-VIVALDI-CURRENT",d="X-VIVALDI-FLOATING",h={UNKNOWN:0,VERIFYING:1,OK:2,ERROR:3},p=4,g={local:(0,s.Z)("data storage","Local"),google:(0,s.Z)("Google Calendar"),vivaldi:(0,s.Z)("Vivaldi.net"),caldav:(0,s.Z)("CalDAV"),ical:(0,s.Z)("Web Calendar")},b=6e4,N=9e5,f=36e5,_=24*f,v=600,E=[{value:"#e73359",name:(0,s.Z)("calendar","Red")},{value:"#ee8835",name:(0,s.Z)("calendar","Orange")},{value:"#696969",name:(0,s.Z)("calendar","Gray")},{value:"#14a434",name:(0,s.Z)("calendar","Green")},{value:"#4facf2",name:(0,s.Z)("calendar","Blue")},{value:"#b260d3",name:(0,s.Z)("calendar","Purple")},{value:"#8b7251",name:(0,s.Z)("calendar","Brown")}],C=(i.z8c.small,i.nyn.small,i.NxY.small,i.YvR.small,()=>"https://tasks.googleapis.com"),w=()=>"https://www.googleapis.com/calendar",y=e=>`https://${e}/.well-known/caldav`,S=e=>`https://apidata.googleusercontent.com/caldav/v2/${e.trim()}`,T=e=>`https://calendar.vivaldi.net/calendars/${e.trim().toLowerCase()}`,k="X-VIVALDI-EVENT-REMINDER",I="-10"},43792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(8575),i=n(74368);const r={constructUrl:e=>e.filter(Boolean).map((e=>("/"===e.charAt(0)&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),e))).join("/"),concatUrl(e,t){const n=s.parse(e);if(!n)return"";const{protocol:i,host:r}=n;return(i||"")+"//"+(r||"")+t},stripDoubleQuotes:e=>e?e.split('"').join(""):e,parseHttpStatusCode(e){try{return parseInt(e.split(" ")[1],10)}catch(e){i.ZP.error("Calendar",["network"],"Error parsing http status",e)}return-1},httpStatusSuccess(e){const t=r.parseHttpStatusCode(e);return t>=200&&t<300},basicHttpAuthenticationHeader:(e,t)=>`Basic ${btoa(unescape(encodeURIComponent(`${e}:${t}`)))}`,getCalDAVUrl(e,t){const n=s.parse(e);let i="";const{protocol:a,host:o}=n;return a&&o&&t&&(i=`${a}//${r.constructUrl([o,t])}`),i}},a=r},32901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(66854),i=n(59896),r=n(55002),a=n(82495),o=n(63057),l=n(45932);const{deletePassword:c}=a.Z,u={getCalendarCreateParams:()=>({name:"",description:(0,o.Z)("New Calendar"),accountId:r.Z.getDefaultAccountId(),color:u.getCalendarCreateColor(),timezone:"",active:!1}),getAccountCreateParams:()=>({name:(0,o.Z)("Local Account"),url:"",account_type:"local",username:""}),createLocalAccountAndCalendar:async(e,t)=>{t={...u.getCalendarCreateParams(),...t};const n=u.getLocalAccount();if(n){return await s.Z.createCalendar({...t,accountId:n.id})}{e={...u.getAccountCreateParams(),...e};const n=await s.Z.createAccount(e);return await s.Z.createCalendar({...t,accountId:n.id})}},getLocalAccount:()=>r.Z.getAccounts().find((e=>"local"===e.account_type)),getCalendarCreateColor:()=>{const e=l.hx.map((e=>e.value.toLocaleLowerCase().replace("#",""))),t=[];r.Z.getCalendars().forEach((n=>{const s=n.color?.toLowerCase().replace("#","")||"";e.includes(s)&&t.push(s)}));let n=e.filter((e=>!t.includes(e)));return n.length||(n=e),`#${n[Math.floor(Math.random()*n.length)]}`},startDeletingCalendars:async e=>{const t=r.Z.getAccounts().find((t=>t.id=e));if(!t)return;const{username:n,url:a}=t,o=r.Z.getCalendars().filter((t=>t.accountId===e));s.Z.stopListeners();try{for(const e of o)await s.Z.deleteCalendar(e);await s.Z.deleteAccount(e),c(n,a)}finally{s.Z.startListeners(),i.Z.doneDeleteAccount(e)}}},m=u},82495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var s=n(55002),i=n(65792),r=n.n(i),a=n(49856),o=n(80008),l=n.n(o),c=n(21622),u=n(25342),m=n(14705),d=n(63057),h=n(2121),p=n(5264),g=n.n(p),b=n(74686),N=n(23542),f=n(45932),_=n(54483),v=n(89501),E=n(65741),C=n(30074);const w=(0,N.extendMoment)(l()),y=g()(100)((function(e){let t=r()(e);t.get("lab.l")<12.5?t=t.set("lab.l",12.5):t.get("lab.l")>77.5&&(t=t.set("lab.l",77.5));const n=t.set("lab.l",t.get("lab.l")<70?"+70":"-70");return{"--colorCalendarBg":t.css(),"--colorCalendarBgAlpha":t.alpha(.3).css(),"--colorCalendarFg":n.css()}}));function S(e){return`${e<=0?"+":"-"}${Math.abs(Math.floor(e/60)).toString().padStart(2,"0")}${(e%60).toString().padStart(2,"0")}`}function T(e,t,n){const s=w.tz.zone(e);if(!s)return"";const i=`BEGIN:VTIMEZONE\r\nTZID:${e}`;let r="";const{untils:a=[],offsets:o=[],abbrs:l=[]}=s;if(1===a.length)r+=`BEGIN:STANDARD\nDTSTART:19700101T000000\nTZOFFSETFROM:${S(o[0])}\nTZOFFSETTO:${S(o[0])}\nTZNAME:${l[0]}\nEND:STANDARD\r\n`;else{let s=a.findIndex((e=>e>t));s=Math.max(s,1);do{const t=s%2==0?"STANDARD":"DAYLIGHT";r+=`BEGIN:${t}\nDTSTART:${w.tz(a[s-1],e).format("YYYYMMDDTHHmmss")}\nTZOFFSETFROM:${S(o[s-1])}\nTZOFFSETTO:${S(o[s])}\nTZNAME:${l[s]}\nEND:${t}\r\n`,s++}while(s<a.length-1&&a[s]<n)}return`${i}\r\n${r}END:VTIMEZONE\r\n`}const k={getCalendarColors:e=>{const t=e?.color||m.Z.getThemeWithFallback(u.Z.getCurrentId()).colorHighlightBg;return y(t)},getEventColors:e=>{const t=s.Z.getCalendars().find((t=>t.id===e));return k.getCalendarColors(t)},getEventSquircle:()=>'<svg\n      viewBox="0 0 8 8"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <rect width="8" height="8" rx="3" />\n    </svg>',createCalendarIcon:(e,t,n=!1)=>`<svg viewBox="0 0 32 32">\n      <circle cx="16" cy="16" r="${t}" fill="${e.color||m.Z.getThemeWithFallback(u.Z.getCurrentId()).colorHighlightBg}" />\n      ${n?'<path d="M 8 17 l 7 7 l 11 -11 l -3 -3 l -8 8 l -4 -4  z" fill="#FFF" />':""}\n    </svg>`,createCalendarIconPNG:e=>{const t=e.color||m.Z.getThemeWithFallback(u.Z.getCurrentId()).colorHighlightBg,n=document.createElement("canvas");n.width=32,n.height=32;const s=n.getContext("2d");return s.beginPath(),s.arc(16,16,Math.floor(32/3),0,2*Math.PI,!1),s.fillStyle=t,s.fill(),n.toDataURL("image/png").replace("data:image/png;base64,","")},createEventNotificationString:(e,t,n,s)=>{const i=n?`:${n}`:"",r=t.split(":")[0];return`${`${f.Qg}${s?"_SNOOZE":""}`}=${e}:${r}${i}`},parseEventNotificationString:e=>{let t={notificationId:""};if(!e.startsWith(f.Qg))return t;const n=e.split("=")[1];if(n){const[s,i,r]=n.split(":");t={notificationId:s,eventId:i,recurringStart:r?parseInt(r):void 0,snooze:-1!==e.indexOf("_SNOOZE")}}return t},shouldSaveEvent:(e,t)=>{const n=!e.id,s=["id","uid","calendarId","start","end","allDay"],i=Object.entries(e).every((([t,n])=>{return!n||s.includes(t)||"notifications"===t&&(1===(i=e[t]||[]).length&&c.ZP.get(C.kCalendarDefaultNotification)*f.lb===i[0].when);var i}));if(n)return i?"DELETE":"SAVE";{const{notifications:n,...s}=e,{notifications:r,...a}=t||{},o=(0,E.default)(s,a),l=(0,E.default)(n,r);return o&&l?"IGNORE":o?"SAVE_INVITED":i?"DELETE":"SAVE"}},isOwnEvent(e){if("ical"===s.Z.getAccountForCalendar(e.calendarId)?.account_type)return!1;if(!e.organizer)return!0;return c.ZP.get(C.kMailAccounts).some((t=>t.MAIL_EMAIL===e.organizer))},shouldIncrementSequence:(e,t=[])=>{const n=e=>[e.address,e.partstat],s=t.find((t=>t.id===e.id));if(!s)return!1;const i=(s.invites||[]).map(n),r=(e.invites||[]).map(n);return s.start!==e.start||s.end!==e.end||s.allDay!==e.allDay||!(0,E.default)(s.rrule,e.rrule)||!(0,E.default)(i,r)||!(0,E.default)(s.recurrenceExceptions||[],e.recurrenceExceptions||[])},getDisplayRange:(e,t)=>{let n,s;switch(t){case"agenda":n=w(e).startOf("day"),s=w(e).add(1,"month").endOf("day");break;case"month":n=w(e).startOf("month").weekday(0),s=w(e).endOf("month").weekday(6);break;case"multiweek":n=w(e).subtract(1,"week").startOf("week"),s=w(e).add(1,"week").endOf("week");break;default:n=e.clone().startOf(t),s=e.clone().endOf(t)}return w.range(n,s)},getEventRange:e=>{const t=e.start||e.due,n=e.task?e.due:e.end||e.start;if(t&&n)return w.range(t,n)},isAllDayEvent:e=>{if(e.allDay)return!0;const t=w(e.start),n=w(e.end);return!t.isSame(e.end,"day")&&!(n.diff(t,"day",!0)<1&&n.isSame(n.clone().startOf("day")))},isRecurringEvent:e=>Boolean(e.recurrence&&e.recurrence instanceof _.Ci),isGeneratedRecurringEvent:e=>-1!==("string"==typeof e?e:e.id).indexOf(":"),getGeneratedSourceEvent:e=>{const[t]=e.id.split("-")[0].split(":"),n=s.Z.getEvents().find((e=>e.id===t));if(!n)throw new Error(`Source event not found for recurring event id: ${e.id}`);return n},getBaseEventIfException:e=>{const[t]=e.id.split("-")[0].split(":"),n=s.Z.getEvent(t);if(n?.recurrenceExceptions?.length&&!e.recurrenceExceptions?.length)return n},generateKey:e=>{const{calendarId:t,id:n,uid:s,sequence:i}=e;let r=`${t}-${n}`;return s&&(r=`${r} '-' ${s}`),i&&(r=`${r} '-' ${i}`),r},eventSearchPredicate:(e,t)=>["title","description","location","url","invites","organizer"].some((n=>(Array.isArray(e[n])?function(t){return"invites"===t&&e.invites?e.invites.map((e=>e.address)).join(""):""}(n):e[n]||"").toLowerCase().indexOf(t.toLowerCase())>=0&&!e.trash)),searchEvents:(e,t)=>e.filter((e=>k.eventSearchPredicate(e,t))).sort(((e,t)=>t.start-e.start)),filterEventsByPeriod:(e,t,n,s=1)=>{const i=t.clone();let r,a;"allday"===n?(r=i.startOf("day").valueOf(),a=i.add(s-1,"day").endOf("day").valueOf()):(r=i.startOf(n).valueOf(),a=i.add(s-1,n).endOf(n).valueOf());const o=t.dayOfYear(),l=e.filter((e=>e.id.indexOf("-")>0)).map((e=>e.id.split("-"))).filter((([e,t])=>parseInt(t)<=o)).reduce(((e,[t,n])=>(e[t]=Math.max(e[t]||0,parseInt(n)),e)),{}),c=e.filter((e=>e.task?e.start&&e.due?e.start<=a&&e.due>r||e.start===e.due&&e.start>=r&&e.start<a:!!e.due&&(e.due>=r&&e.due<=a):e.start<a&&(e.end||e.start)>r||e.start<a&&e.start>=r)).filter((e=>{const[t,n]=e.id.split("-");return!n||l[t]===parseInt(n)}));return"hour"===n?c.filter((e=>!k.isAllDayEvent(e))):"allday"===n?c.filter((e=>k.isAllDayEvent(e))):c},foldIcal:function(e){return e.split(/\r?\n/).map((e=>{if(e.length<=75)return e;let t="",n=0;for(;n<e.length;)n+75>=e.length?t+=e.substr(n):t+=e.substr(n,73)+"\r\n ",n+=73;return t})).join("\r\n")},eventsToICalendar:function(e,t={}){const{method:n,includeRecurrenceId:s=!0}=t,i=w.tz().format(f.FI),r=["BEGIN:VCALENDAR","PRODID:-Vivaldi Calendar V1.0//EN","VERSION:2.0","CALSCALE:GREGORIAN","DTSTAMP:"+i];n&&r.push(`METHOD:${n}`),r.push("");let a=r.join("\r\n");const o=w.tz.guess()||"utc",l=e.reduce(((e,t)=>{if(!t.allDay&&(t.recurrence||t.timezone)){const n=t.timezone||o,s=t.start||1/0;let i=t.end||-1/0;t.recurrence&&(i=t.recurrence.options.until?t.recurrence.options.until.valueOf():t.recurrence.options.count?t.recurrence.all().pop().valueOf():1/0),e[n]?e[n]={firstOccurrence:Math.min(s,e[n].firstOccurrence),lastOccurrence:Math.max(i,e[n].lastOccurrence)}:e[n]={firstOccurrence:s,lastOccurrence:i}}return e}),{});for(const e in l)e!==f.$T&&"utc"!==e.toLowerCase()&&(a+=T(e,l[e].firstOccurrence,l[e].lastOccurrence));return e.map((e=>{let t=[];e.organizer&&(t=[`ORGANIZER:mailto:${e.organizer}`]),e.invites&&e.invites.length&&(t=t.concat(e.invites.map((e=>`ATTENDEE;RSVP=TRUE${e.partstat?`;PARTSTAT=${e.partstat}`:""}:mailto:${e.address}`))));const{uid:n,recurrenceId:r}=e,a=Boolean(r&&s);let o="",l="",c="",u="",m="",d="";e.allDay?(u=";VALUE=DATE",e.task?m=e.due?`${w(e.due).format(f.O5)}`:"":(o=`${w(e.start).format(f.O5)}`,l=e.end&&w(e.end).format(f.O5)),c=a&&w(r).format(f.O5)):e.timezone===f.$T?(e.task?(m=e.due?w(e.due).format(f.A):"",d=w().format(f.A)):(o=w(e.start).format(f.A),l=e.end&&w(e.end).format(f.A)),c=a&&w(r).format(f.A)):e.timezone&&"utc"!==e.timezone.toLowerCase()?(u=`;TZID=${e.timezone}`,e.task?(m=e.due?w.tz(e.due,e.timezone).format(f.A):"",d=w.tz(w(),e.timezone).format(f.A)):(o=w.tz(e.start,e.timezone).format(f.A),l=e.end&&w.tz(e.end,e.timezone).format(f.A)),c=a&&w.tz(r,e.timezone).format(f.A)):(e.task?(m=e.due?w.tz(e.due,"utc").format(f.FI):"",d=w.tz(w(),"utc").format(f.FI)):(o=w.tz(e.start,"utc").format(f.FI),l=e.end&&w.tz(e.end,"utc").format(f.FI)),c=a&&w.tz(r,e.timezone).format(f.A));const h=e.notifications&&e.notifications.map((e=>`BEGIN:VALARM\nACTION:DISPLAY\nDESCRIPTION:${e.name}\nTRIGGER:-${w.duration(e.when).toString()}\nEND:VALARM`)).join("\n"),p=[],{recurrence:g,recurrenceExceptions:b}=e;if(g){const{dtstart:e,...t}=g.origOptions;p.push(_.Ci.optionsToString(t))}return b&&b.forEach((t=>{const{date:n,cancelled:s}=t;if(s){let t="",s="";e.allDay?(t=";VALUE=DATE",s=`${w.tz(n,"utc").format(f.O5)}`):e.timezone===f.$T?s=w(n).format(f.A):e.timezone?(t=`;TZID=${e.timezone}`,s=w.tz(n,e.timezone).format(f.A)):s=w.tz(n,"utc").format(f.FI),p.push(`EXDATE${t}:${s}`)}})),[e.task?"BEGIN:VTODO":"BEGIN:VEVENT","DTSTAMP;VALUE=DATE-TIME:"+i,e.description?`DESCRIPTION:${(0,v.ES)(e.description)}`:"",e.location?`LOCATION:${(0,v.ES)(e.location)}`:"",l?`DTEND${u}:${l}`:"",o?`DTSTART${u}:${o}`:"",h||"",c?`RECURRENCE-ID${u}:${c}`:"",Number.isInteger(e.sequence)?`SEQUENCE:${e.sequence||0}`:"",m?`DUE${u}:${m}`:"",`SUMMARY:${(0,v.ES)(e.title)}`,n?`UID:${n}`:"",...t,...p,k.attachmentsToString(e.attachment),e.complete?"STATUS:COMPLETED":"",e.complete?`COMPLETED${u}:${d}`:"",e.task?"END:VTODO\r\n":"END:VEVENT\r\n"].filter(Boolean).join("\r\n")})).forEach((e=>{a+=e})),k.foldIcal(a+"END:VCALENDAR")},attachmentsToString:e=>(e||[]).map((e=>{const{filename:t,fmttype:n}=e;return`ATTACH${t?`;FILENAME=${(0,v.ES)(t)}`:""}${n?`;FMTTYPE=${n}`:""}:${e.url}`})).join("\r\n"),stringToAttachments:(e="")=>e.split("\r\n").filter(Boolean).filter((e=>e.indexOf("ENCODING")+e.indexOf("BINARY")===-2)).map((e=>{const[t,n]=(0,v.Vl)(e,":",2),s=t.match(/FILENAME=([^;:]+)/),i=t.match(/FMTTYPE=([^;:]+)/);return{url:n,filename:s?s[1]:void 0,fmttype:i?i[1]:void 0}})),generateGUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),isRemoteCalendar:e=>{const t=s.Z.getCalendars().find((t=>t.id===e));if(!t)return!1;const{accountId:n}=t,i=s.Z.getAccounts().find((e=>e.id===n));return!!(t&&i&&i.url&&t.active)},isGoogleCalendar:e=>{const t=s.Z.getCalendars().find((t=>t.id===e));if(!t)return!1;const{accountId:n}=t,i=s.Z.getAccounts().find((e=>e.id===n));return!(!t||!i||"google"!==i.account_type)},isLocalCalendar:e=>{const t=s.Z.getAccounts(),n=s.Z.getCalendars().find((t=>t.id===e));if(!n)return!1;const{accountId:i}=n,r=t.find((e=>e.id===i));return!!r&&"local"===r.account_type},isCalDAV:e=>"vivaldi"===e||"caldav"===e||"google"===e,ensureAccountType:e=>Object.keys(f.d3).find((t=>t===e))||"local",savePassword:async(e,t,n)=>{const{urlValid:s}=b.Z.utilities.isUrlValid(e||"");return s?(b.Z.savedpasswords.add(!0,{username:t||"",password:n||"",signon_realm:"calendar",origin:e||""}),{result:!0,message:""}):{result:!1,message:(0,d.Z)("Invalid URL")}},getPassword:(e,t)=>new Promise((n=>b.Z.savedpasswords.get({signon_realm:"calendar",origin:e||"",username:t||""},((e,t)=>n({found:e,password:t}))))),deletePassword:(e,t)=>b.Z.savedpasswords.delete(!0,{signon_realm:"calendar",origin:e||"",username:t||""}),doesCalendarsExistsAndShowWarning:()=>0!==s.Z.getCalendars().length||(a.Z.showModal({modal:{title:(0,d.Z)("No Calendar Defined"),body:(0,d.Z)("At least one calendar is required to add an event."),actions:[{title:(0,d.Z)("Open Calendar Settings"),action:"settings",default:!0}],cancelAction:{title:(0,d.Z)("Cancel"),action:"cancel"}}}).then((({action:e})=>{"settings"===e&&a.Z.showSettings("calendar")})),!1),getAllChromeAlarms:()=>new Promise((e=>{h.Z.alarms.getAll((t=>{e(t)}))})),getAllNotifications:()=>new Promise((e=>{b.Z.calendar.getAllNotifications((t=>{e(t)}))})),getLocalGoogleTasksCalendars:e=>"google"!==e.account_type?[]:s.Z.getCalendars().filter((t=>t.accountId===e.id&&t.supportedCalendarComponent?.vtodo)),getPollResultText(e){const{calendars:t,error:n,message:s,didPoll:i}=e;if(n)return s||(0,d.Z)("Unknown error.");if(!i)return(0,d.Z)("Poll already in progress.");const r=t.reduce(((e,t)=>e+t.numberOfChangedCalendars),0);return 0===r?(0,d.Z)("Refresh complete. No change."):(0,d.Z)("Refresh complete. $1 calendar was updated.","Refresh complete. $1 calendars were updated.",[r])},minimalCreateEvent:e=>({calendarId:"",is_template:!1,title:"",...e})},I=k},97562:(e,t,n)=>{"use strict";n.d(t,{Xq:()=>l,FY:()=>c,Ro:()=>u,PX:()=>m,VV:()=>d,FL:()=>h,sG:()=>p,Yu:()=>g,bn:()=>b,aE:()=>N,oJ:()=>f,zX:()=>_});var s=n(21622),i=n(80008),r=n.n(i),a=n(45932),o=n(30074);function l(e,t){const n=t?t.clone():e.clone(),s=n.startOf("month");return Math.floor((e.diff(n,"day")+1+s.weekday()-1)/7)}function c(e,t,n,s=!0){const i=n.clone();let r=7*e+1-i.startOf("month").weekday()+t;if(s){const e=i.endOf("month").date();r=Math.max(1,Math.min(r,e))}return i.date(r)}function u(e,t,n=!1){const s=t.clone(),i=s.endOf("month").weekday(),r=n?i-e:(i-e+7)%7;return s.subtract(r,"day")}function m(e,t,n=!1){const s=t.clone(),i=s.startOf("month").weekday(),r=n?e-i:(e-i+7)%7;return s.add(r,"day")}function d(e,t){t&&t!==a.$T||(t=r().tz.guess());const n=r().tz(e,t);return new Date(Date.UTC(n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second()))}function h(e,t){return t&&t!==a.$T||(t=r().tz.guess()),r().tz([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],t).toDate()}function p(e,t=!0){const{start:n=0,end:i=0}=e;if(i&&i<n&&(e.end=n+(e.allDay?a.hd:s.ZP.get(o.kCalendarDefaultDuration))),e.task?(e.due||(e.start=0),e.end=0):(e.due=0,e.end||(e.end=e.allDay?n+a.hd:n)),e.allDay){if(e.timezone=a.$T,e.start){const n=new Date(e.start||0),s=new Date(n.getFullYear(),n.getMonth(),n.getDate());e.start=(t?d(s):s).valueOf()}if(e.task&&e.due){const n=new Date(e.due||0),s=new Date(n.getFullYear(),n.getMonth(),n.getDate());e.due=(t?d(s):s).valueOf()}else if(!e.task&&e.end){const n=new Date(e.end||0),s=new Date(n.getFullYear(),n.getMonth(),n.getDate());e.end=(t?d(s):s).valueOf(),e.start===e.end&&(e.end=e.end+a.hd)}}return e.task&&e.start===e.due&&(e.start=0),e}function g(e){return e.timezone&&e.timezone!==a.$T?e.timezone:r().tz.guess()||""}function b(e,t){const n=r().tz.guess(),s=e.timezone||n;if(t===a.$T)e.timezone=t,t="UTC";else if(t===a.ad)e.timezone=n,t=n||"UTC";else{if(!r().tz.zone(t))return e;e.timezone=t}if(e.start){const n=r().tz(e.start,s);e.start=r().tz(n.format(a.A),t).valueOf()}if(e.end){const n=r().tz(e.end,s);e.end=r().tz(n.format(a.A),t).valueOf()}if(e.due){const n=r().tz(e.due,s);e.due=r().tz(n.format(a.A),t).valueOf()}return e}function N(e,t=!1){const n=t?r().tz.guess():g(e),s=r().tz(e.start,n),i=r().tz(e.end,n),a=r().tz(e.due||0,n);return e.allDay&&!e.task&&i.subtract(1,"day"),e.allDay&&e.task&&e.start&&e.due&&a.subtract(1,"day"),{start:s,end:i,due:a}}function f(e){if(e.task){if(e.start)return e.start;if(e.due)return e.due;throw new Error("Can not set recurrence end date for task without due time")}return e.start}function _(e){return Math.ceil(e/a.QI)*a.QI}},67972:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(43393);class i extends((0,s.Record)({eventsToImportCount:0,importedEventsCount:new s.List,importEventState:"INIT"})){}const r=i},21530:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(82495),i=n(49856),r=n(6478),a=n(21622),o=n(63057),l=n(32140),c=n(95582),u=n(85834),m=n(30074);const d=(e,t)=>({title:e.task?(0,o.Z)("Task has External Attendees"):(0,o.Z)("Event has External Attendees"),body:(0,o.Z)("To notify attendees about this, email messages should be sent. If you prefer to not send messages you can choose so."),actions:[{title:(0,o.Z)("Send Messages"),action:"send",default:!0}],cancelAction:{title:(0,o.Z)("Don’t Send Messages"),action:"cancel",default:!1},inputs:[{name:"note",label:(0,o.Z)("Add a Custom Note to the Messages")}],checks:[{name:"remember",label:(0,o.Z)("Remember My Choice")}]});async function h(e,t,n){const s={type:"html",content:n.body},i={type:"attachment",filename:"invite.ics",content:(0,u.h$)(n.iCal),mimeType:"application/ics"},r=Date.now();c.Z.sendExternalMessage({bcc:[],bodyParts:[s,i],cc:[],flags:[],forwarded:void 0,from:e,inReplyTo:"",internal:!1,messageId:(0,l.Z)(e[0].address),replied:void 0,sentDate:r,subject:n.subject,threadKey:void 0,to:t})}const p={sendAttendeeMails:async function(e,t,n=!1){if(s.Z.isGoogleCalendar(e.calendarId))return;const l=a.ZP.get(m.kCalendarSendInviteEmailAction),c="ask"===l?await i.Z.showModal({modal:d(e)}):{action:l};if("cancel"===c.action)return;"ask"===l&&c.checks?.remember&&r.Z.set(m.kCalendarSendInviteEmailAction,c.action);let u="",p="",g="REQUEST";if(!e.organizer)throw new Error(`Event organizer not found for event uid ${String(e.uid)}`);const b=[{address:e.organizer}],N=`<strong>${e.organizer}</strong>`,f=`<strong>${e.title}</strong>`,_=t.map((([t,i])=>{switch(t){case"create":u=(0,o.Z)("Event invitation: $1",[e.title]),p=(0,o.Z)("$1 has invited you to event “$2”",[N,f]),g="REQUEST";break;case"update":u=(0,o.Z)("Event updated: $1",[e.title]),p=(0,o.Z)("$1 has updated event “$2”",[N,f]),g="REQUEST";break;case"cancel":u=(0,o.Z)("Event cancelled: $1",[e.title]),p=(0,o.Z)("$1 has cancelled event “$2”",[N,f]),g="CANCEL"}const{note:r}=c.inputs||{};r&&(p+="<br/><br/><strong>"+(0,o.Z)("Event organiser added the following note:")+"</strong><br/>"+r);const a={method:g,includeRecurrenceId:n},l=s.Z.eventsToICalendar([e],a),m=i.filter((t=>t.address!==e.organizer)).map((e=>({address:e.address,...e.name?{name:e.name}:null})));if(0===m.length)return;return h(b,m,{subject:u,body:p,iCal:l})}));return Promise.all(_)},sendReplyMails:async function(e,t,n){let i="",r="";const a=e.organizer;if(!a)throw new Error(`Event organizer not found for event uid ${String(e.uid)}`);const l=[{address:"DECLINECOUNTER"===n?a:t}],c=`<strong>${t}</strong>`,u=`<strong>${e.title}</strong>`;switch(n){case"ACCEPTED":i=(0,o.Z)("Accepted: $1",[e.title]),r=(0,o.Z)("$1 has accepted your invitation to “$2”",[c,u]);break;case"TENTATIVE":i=(0,o.Z)("Tentatively accepted: $1",[e.title]),r=(0,o.Z)("$1 has tentatively accepted your invitation to “$2”",[c,u]);break;case"DECLINED":i=(0,o.Z)("Declined: $1",[e.title]),r=(0,o.Z)("$1 has declined your invitation to “$2”",[c,u]);break;case"DECLINECOUNTER":i=(0,o.Z)("Event change proposal declined: $1",[e.title]),r=(0,o.Z)("$1 has declined your proposed changes to “$2”",[c,u])}const m={method:"DECLINECOUNTER"===n?"DECLINECOUNTER":"REPLY"};return h(l,[{address:"DECLINECOUNTER"===n?t:a}],{subject:i,body:r,iCal:s.Z.eventsToICalendar([e],m)})}}},9926:(e,t,n)=>{"use strict";n.d(t,{C:()=>p,t:()=>g});var s=n(55002),i=n(82495),r=n(80008),a=n.n(r),o=n(5264),l=n.n(o),c=n(23542),u=n(53548),m=n(90870);const d=(0,c.extendMoment)(a());function h(e,t){let n=[];const[r,a]=(0,m.Z)(e,i.Z.isRecurringEvent);let o=[];r.forEach((e=>{if(i=e,Boolean(i.task&&!i.due))return;var i;const{start:r,end:a}=t,l=(0,u.YE)(e.recurrence?.toString()||"",r.valueOf(),a.valueOf(),e.timezone),[c,m]=((e,t)=>{const n=[],i=[];return t.forEach((t=>{const r={...e},a=(e.recurrenceExceptions||[]).filter((e=>t.valueOf()===e.date)),o=a.length>0;if(a.forEach((e=>{const{cancelled:r,parent_event_id:a,exception_event_id:o}=e;if(!r&&a&&o){i.push(o);const e=s.Z.getEvent(a),r=s.Z.getEvent(o);if(e&&r){const s={...r};s.id=`${e.id}:${s.start}`,s.recurrence=e.recurrence,s.recurrenceId=t.valueOf(),n.push(s)}}})),!o){const{start:s,end:i,due:a}=function(e,t){const n={start:0,end:0,due:void 0};if(t.task)if(t.start&&t.due){const s=t.due-t.start;n.start=e.valueOf(),n.due=e.valueOf()+s}else n.due=e.valueOf();else{const s=(t.end||t.start)-t.start;n.start=e.valueOf(),n.end=e.valueOf()+s}return n}(t,e);r.start=s,r.end=i,r.due=a,r.id=`${e.id}:${t.valueOf()}`,r.uid=e.uid,n.push(r)}})),[n,i]})(e,l);o=o.concat(c),n=n.concat(m)}));return a.filter((e=>{if(n.includes(e.id))return!1;if(e.task){if(!e.due)return!1;if(e.start){const{start:n}=e,s=e.due||e.end;return(s&&s!==n?s:n+1)>t.start.valueOf()&&n<=t.end.valueOf()}return t.contains(e.due)}{const{start:n,end:s}=e;return(s&&s!==n?s:n+1)>t.start.valueOf()&&n<=t.end.valueOf()}})).concat(o)}const p={call:e=>{const t=h(e,d.range(d(),d().add(1,"week")));return t.sort(((e,t)=>e.start!==t.start?e.start-t.start:e.allDay!==t.allDay?e.allDay?-1:1:e.end!==t.end?e.end-t.end:parseInt(e.id||0)-parseInt(t.id||0))),t}},g={call:l()(2)(((e,t,n)=>h(e,i.Z.getDisplayRange(t,n))))}},59896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Te});var s=n(66854),i=n(98517),r=n(43792),a=n(55002),o=n(82495),l=n(91761),c=n(38504),u=n(92144),m=n(63057),d=n(2344),h=n(8575);const{constructUrl:p}=r.Z;const{constructUrl:g}=r.Z;function b(e,t,n,s,i){const{url:r,uid:a,etag:l,href:c}=t,{username:u,password:m,oauth2Token:d}=e,p=h.parse(r);let b="";const{protocol:N,host:f}=p;let _="";if(N&&f&&c)b=`${N}//${f}${c}`;else{if(!N||!f||!a)return{};const e=N+"//"+f;_="/"+g([n,a])+".ics",b=g([e,_])}const v={};return i||l?v["If-Match"]='"'+l+'"':v["If-None-Match"]="*",{username:u,password:m,oauth2Token:d,headers:v,url:b,href:_,method:"PUT",contentType:"text/calendar; charset=utf-8",body:o.Z.eventsToICalendar(s)}}const{constructUrl:N}=r.Z;function f(e,t,n,s,i){const{uid:r,href:a}=s,{username:o,password:l,oauth2Token:c}=e,u=h.parse(t);let m="";const{protocol:d,host:p}=u;if(d&&p&&a)m=`${d}//${p}${a}`;else{if(!d||!p||!r)return{};m=N([d+"//"+p,n,r+".ics"])}return{username:o,password:l,oauth2Token:c,url:m,method:"GET",contentType:"text/calendar; charset=utf-8"}}var _=n(74368);function v(e,t){return{...e,method:"REPORT",body:`<?xml version="1.0" encoding="UTF-8"?>\n    <c:calendar-multiget xmlns:d="DAV:" xmlns:c="urn:ietf:params:xml:ns:caldav">\n    <d:prop>\n        <d:getetag />\n        <c:calendar-data />\n    </d:prop>\n      ${t.map((e=>`<d:href>${e}</d:href>`)).join("")}\n    </c:calendar-multiget>`}}var E=n(79777),C=n(40838);const{stripDoubleQuotes:w}=r.Z;var y=n(49237),S=n(85327);const{stripDoubleQuotes:T}=r.Z;function k(e){let t=[];const n=(0,C.Z)(e);return!n.parsererror&&"d_multistatus"===n.root&&n.d_multistatus.d_response&&(t=n.d_multistatus.d_response.map((e=>{if(-1===e?.d_status?.content?.indexOf("200"))return null;const t=e.d_href?decodeURIComponent(e.d_href.content):"",n=e.d_propstat&&e.d_propstat.d_prop&&e.d_propstat.d_prop.d_getetag?T(e.d_propstat.d_prop.d_getetag.content):"",s=e.d_propstat&&e.d_propstat.d_prop&&e.d_propstat.d_prop.c_calendarData?String(e.d_propstat.d_prop.c_calendarData.content):"",i=(0,y.Z)(s);return i.VEVENT.length?(0,S.rP)(i.VEVENT[0],{href:t,etag:n}):i.VTODO.length?{...(0,S.rP)(i.VTODO[0],{href:t,etag:n}),task:!0}:{href:t,etag:n}})).filter(Boolean)),t}var I=n(70015),A=n(74686),Z=n(32901);const{basicHttpAuthenticationHeader:P}=r.Z;function D(e,t){return t||(t=Z.Z.getCalendarCreateColor()),`<?xml version="1.0" encoding="utf-8"?>\n    <C:mkcalendar xmlns:C="urn:ietf:params:xml:ns:caldav"><set xmlns="DAV:">\n      <prop><displayname>${e}</displayname>\n        <C:supported-calendar-component-set>\n          <C:comp name="VEVENT" />\n        </C:supported-calendar-component-set>\n        <calendar-color xmlns="http://apple.com/ns/ical/">${t}</calendar-color>\n      </prop></set>\n    </C:mkcalendar>`}var M=n(45932),O=n(90106);const{constructUrl:x,stripDoubleQuotes:L}=r.Z;function R(e){let t="";return e.split("/").forEach((e=>{e.includes("@")&&(t=e)})),t}async function B(e,t){const n=await i.Z.getAuthentication(e),{oauth2Token:s}=n,r=[(0,M.fP)(),"/v3/calendars",`?key=${await(0,O.wU)()}`],a=x(r),o=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({summary:t})}),l={status:!1,message:"",description:"",name:""};if(o.ok){const e=function(e){const{id:t,summary:n,etag:s,timeZone:i}=e;return{name:t,description:n,ctag:L(s),timezone:i}}(await o.json());l.status=!0,l.description=e.description,l.name=`/caldav/v2/${e.name}/events/`,l.ctag=e.ctag}return l}var F=n(30381),U=n.n(F),V=n(81723),H=n(90870),W=n(97562);const{getLocalGoogleTasksCalendars:z}=o.Z,{constructUrl:G,stripDoubleQuotes:K}=r.Z,j="YYYY-MM-DDTHH:mm:ssZ";function Y(e,t){const{title:n,notes:i,etag:r,due:a,id:o,completed:l}=e,c=a?U()(a).valueOf():void 0,u=l?U()(l).valueOf():void 0,m={id:t.id,calendarId:t.calendarId,title:n,task:!0,description:i,due:c,etag:K(r),status,uid:o,complete:Boolean(l),completed:u,timezone:M.$T,allDay:!0},[d]=s.Z.transformVivaldiEvents([m]);return d}function $(e,t){const{title:n,notes:s,due:i,etag:r,id:a,completed:o}=e,l=o?U()(o).valueOf():void 0;return{calendarId:t,title:n,is_template:!1,task:!0,description:s,due:i?U()(i).valueOf():void 0,etag:K(r),status,uid:a,complete:Boolean(o),completed:l,timezone:M.$T,allDay:!0}}async function X(e){const t=await i.Z.getAuthentication(e),{parsed:n,status:r}=await async function(e){const{oauth2Token:t}=e,n=new XMLHttpRequest;return n.open("GET",`${(0,M.fL)()}/tasks/v1/users/@me/lists?maxResults=200&key=${await(0,O.wU)()}`),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","Bearer "+t),new Promise(((e,t)=>{n.send(),n.onload=()=>{const{status:t,response:s,readyState:i}=n,r=JSON.parse(s);i===M.JS&&e({status:t,parsed:r})}}))}(t),o={numberOfCalendarsPolled:0,numberOfChangedCalendars:0};if(n.error){const t=new Date;return a.Z.getCalendars().filter((t=>t.accountId===e.id)).forEach((async e=>await s.Z.updateCalendar(e.id,{lastChecked:t.valueOf()},!1))),_.ZP.log("Calendar",["google","tasks"],"Error fetching TaskList: ",r,n),o}const l=function(e){const{items:t=[],etag:n}=e;return{...e,etag:K(n),items:t.map((e=>({...e,etag:K(e.etag)})))}}(n),c=z(e);o.numberOfCalendarsPolled=l.items.length;const u=(0,V.Z)(l.items,c,((e,t)=>{const{id:n}=e;return n===t.name})),m=await async function(e,t){return await Promise.all(e.map((async e=>{const n={accountId:t,name:e.id,description:e.title,active:!0,supportedCalendarComponent:{vevent:!1,vtodo:!0,vjournal:!1}},i=await s.Z.createCalendar(n);return i.calendar?i.calendar:Promise.reject()})))}(u,e.id),[d,h]=(0,H.Z)(c,(e=>l.items.some((t=>t.id===e.name))));await Promise.all(h.map((async e=>{await s.Z.deleteCalendar(e)})));const p=m.concat(d),g=(0,V.Z)(p,l.items,((e,t)=>{const{name:n}=e;return n===t.id&&e.ctag===t.etag}));await Promise.all(g.map((async e=>{const n=function(e){const{items:t=[],etag:n}=e;return{...e,etag:K(n),items:t.map((e=>({...e,etag:K(e.etag)})))}}(await async function(e,t){const{oauth2Token:n}=e,s=new XMLHttpRequest,i=["showCompleted=true","showHidden=true"];return s.open("GET",`${(0,M.fL)()}/tasks/v1/lists/${t}/tasks?${i.join("&")}&key=${await(0,O.wU)()}`),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization","Bearer "+n),new Promise(((e,t)=>{s.send(),s.onload=()=>{const{status:n,response:i,statusText:r,readyState:a}=s,o=JSON.parse(i);n>=200&&n<300&&a===M.JS?e(o):t({status:n,statusText:r})}}))}(t,e.name)),i=a.Z.getEventsPerCalendar(e.id).filter((e=>!e.trash)),r=n.items.filter((e=>!i.some((t=>t.uid===e.id)))),c=i.filter((e=>-1===n.items.findIndex((t=>t.id===e.uid)))),u=i.map((e=>{const t=n.items.find((t=>t.id===e.uid&&K(t.etag)!==e.etag));return t?{...Y(t,e)}:null})).filter(Boolean),m=r.map((t=>$(t,e.id)));await Promise.all(m.map((async e=>await s.Z.createEvent(e,!1)))),await Promise.all(c.map((async e=>await s.Z.deleteEvent(e.id)))),await Promise.all(u.map((async e=>await s.Z.updateEvent(e,void 0,!1))));const d=l.items.find((t=>e.name===t.id));let h={ctag:n.etag};d?.title!==e.description&&(h={...h,description:d?.title}),(m.length||c.length||u.length)&&o.numberOfChangedCalendars++,await s.Z.updateCalendar(e.id,h,!1)})));const b=new Date;return p.forEach((async e=>await s.Z.updateCalendar(e.id,{lastChecked:b.valueOf()},!1))),o}const{httpStatusSuccess:Q,parseHttpStatusCode:q,stripDoubleQuotes:J}=r.Z;const{basicHttpAuthenticationHeader:ee}=r.Z;async function te(e,t,n,s){const i={staleSyncToken:!0,createdUpdated:[],deletedHrefs:[],error:!0,serverThrottlesEvents:!1,syncToken:""},r=await async function(e,t){const{method:n,body:s,username:i,password:r,oauth2Token:a}=e,o=await fetch(t,{method:n,credentials:"omit",headers:{Depth:"0","Content-Type":"text/xml;charset=UTF-8",Authorization:a?"Bearer "+a:ee(i,r)},body:s});return{response:await o.text(),status:o.status,ok:o.ok}}((a=e,o=t,o=o||"",{...a,method:"REPORT",body:`<?xml version="1.0" encoding="UTF-8"?>\n    <D:sync-collection xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/"\n      xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:sync-token>${encodeURI(o)}</D:sync-token>\n    <D:sync-level>1</D:sync-level>\n    <D:prop>\n      <D:getetag />\n    </D:prop>\n    </D:sync-collection>`}),n);var a,o;const{status:l,ok:c}=r;return c||403!==l?function(e,t){const n=(0,C.Z)(e),s={createdUpdated:[],deletedHrefs:[],syncToken:"",serverThrottlesEvents:!1,error:!0,staleSyncToken:!1};if(n.parsererror)return s;const{d_syncToken:i,d_response:r}=n.d_multistatus;if(i&&(s.syncToken=i.content,s.error=!1),!r)return s;const a=[];r.forEach((e=>{let n=e.d_status?.content;if(!n)try{n=e.d_propstat.d_status.content}catch(e){_.ZP.error("Calendar",["parser"],"parseSyncCollection: ",e)}const i=Q(n);t===e.d_href.content?e?.d_status?.content&&507===q(e.d_status.content)&&(s.serverThrottlesEvents=!0):a.push({etag:e.d_propstat?.d_prop?.d_getetag?J(e.d_propstat.d_prop.d_getetag.content):"",href:e.d_href.content,isDeletedOnServer:i})}));const[o,l]=(0,H.Z)(a,(e=>e.isDeletedOnServer));return{...s,createdUpdated:o.map((({href:e,etag:t})=>({href:e,etag:t}))),deletedHrefs:l.map((({href:e})=>decodeURIComponent(e))),error:!1}}(r.response,s):i}const{basicHttpAuthenticationHeader:ne,concatUrl:se,stripDoubleQuotes:ie}=r.Z;var re=n(15712);const{basicHttpAuthenticationHeader:ae}=r.Z,{getLocalGoogleTasksCalendars:oe}=o.Z,{stripDoubleQuotes:le,getCalDAVUrl:ce}=r.Z,{setStatus:ue}=u.Z,{isCalDAV:me}=o.Z;let de;const he=new Map;let pe=!1,ge=!1;const be={},Ne=new Set;function fe(e){const t=h.parse(e),{host:n,protocol:s}=t;if(s&&n)return s+"//"+n}function _e(e){if("calendarDataReady"===e){const e=a.Z.getAccounts().map((e=>e.url)).filter(Boolean);if(0===e.length)return void Ne.clear();e.forEach((e=>{Ne.has(e)||(ye(),Ne.add(e))}))}}async function ve(e,t,n){const{id:i}=e,r=k(t),o=a.Z.getEventsPerCalendar(n).filter((e=>!e.trash));let l=o.filter((e=>!r.some((t=>t.href===e.href))));const u=r.filter((e=>!o.some((t=>t.etag===e.etag)))).map((e=>e.href||""));if(0===u.length)return void l.forEach((e=>s.Z.deleteEvent(e.id)));s.Z.setImportEventState({importId:i,importEventState:"IMPORTING"}),s.Z.setEventsToImportCount({importId:i,eventsToImportCount:u.length});const m=fe(e.url);if(!m)return Promise.reject();const d=a.Z.getCalendars().find((e=>e.id===n));if(!d)return;const h=m+d.name,p=await(0,I.Z)(v(e,u),h);let g=[];g=p.response?k(p.response):await async function(e,t){const{username:n,password:s,url:i}=e;return(await Promise.all(t.map((async e=>{const t=se(i,e),r=await fetch(t,{method:"GET",headers:{"Content-Type":"text/calendar",Authorization:ne(n,s)}});if(r.ok){const t=ie(r.headers.get("ETag")||"");return{icsString:await r.text(),etag:t,href:e}}})))).filter(Boolean).map((e=>{const{etag:t,icsString:n,href:s}=e,i=(0,y.Z)(n);return(0,S.rP)(i.VEVENT[0],{etag:t,href:s})}))}(e,u),g=g.map((e=>({...e,calendarId:n}))),l=l.filter((e=>g.some((t=>e.uid!==t.uid))));const b=[];let N=0,f=0;return g.filter((e=>!o.some((t=>t.uid===e.uid)))).forEach((e=>{50===N&&(b[++f]=[],N=0),b[f]||(b[f]=[]),b[f].push(e),N++})),await(0,re.F)(o,g),await Promise.all(l.map((e=>s.Z.deleteEvent(e.id)))),new Promise(((e,t)=>{b.reduce(((e,t)=>e.then((()=>s.Z.createEvents(t).then((e=>{s.Z.setImportedEventsCount({importId:i,importedEventsCount:e.created_count}),s.Z.loadPromise()}))))),Promise.resolve()).then((()=>{c.Z.updateAllAlarms(),s.Z.setImportEventState({importId:i,importEventState:"IMPORT_FINISHED"}),e()})).catch((e=>{_.ZP.error("Calendar",["caldav"],"Error creating events",e),s.Z.setImportEventState({importId:i,importEventState:"IMPORT_ERROR"}),t(e)}))}))}async function Ee(e,t,n=!1){const s={calendarId:e.id,ctag:e.ctag,lastCalendarPoll:Date.now(),changed:!1},r=fe(t.url);if(!r)return Promise.reject();const a=r+e.name,o=await i.Z.getAuthentication(t),l=e.id,c=e.ctag,u=await(0,I.Z)(function(e){const{account_type:t}=e,n={Depth:"google"===t?0:1};return{...e,headers:n,method:"PROPFIND",body:'<?xml version="1.0" encoding="UTF-8"?>\n    <D:propfind xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/"\n      xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:prop>\n    <D:displayname />\n    <CS:getctag />\n    <D:sync-token />\n    </D:prop>\n    </D:propfind>'}}(o),a),{ctag:m,syncToken:d}=function(e){const t=(0,C.Z)(e),n={displayName:"",ctag:"",syncToken:""};if(!t.parserror){const e=t.d_multistatus.d_response[0].d_propstat.d_prop,s=e.cs_getctag;s&&(n.ctag=w(s.content));const i=e.d_displayname;i&&(n.displayName=i.content);const r=e.d_syncToken;r&&(n.syncToken=decodeURIComponent(r.content))}return n}(u.response);return s.ctag=n&&d?d:m,""===m||c!==m?(s.changed=!0,await async function(e,t,n){const{response:s}=await(0,I.Z)((i=t,{...i,method:"REPORT",headers:{Depth:1},body:'<?xml version="1.0" encoding="UTF-8"?>\n    <C:calendar-query xmlns:D="DAV:" xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:prop>\n      <D:getetag />\n    </D:prop>\n    <C:filter>\n      <C:comp-filter name="VCALENDAR" />\n    </C:filter>\n   </C:calendar-query>'}),n);var i;return await ve(t,s,e)}(l,o,a),s):s}async function Ce(e,t){const n=e.ctag,r={calendarId:e.id,ctag:e.ctag,lastCalendarPoll:Date.now(),changed:!1},o=fe(t.url);if(!o)throw new Error("Missing URL prefix");const l=e.id,u=o+e.name,m=await i.Z.getAuthentication(t),{staleSyncToken:d,createdUpdated:h,deletedHrefs:p,syncToken:g,serverThrottlesEvents:b,error:N}=await te(m,n,u,e.name);if(d)return await Ee(e,t,!0);if(N&&_.ZP.log("Calendar",["caldav"],"CalDAV. Error parsing sync-collection",e.name),n===g)return r;r.changed=!0;const f=a.Z.getEventsPerCalendar(l).filter((e=>!e.trash)),E=h.filter((({etag:e})=>-1===f.findIndex((t=>t.etag===e)))).map((e=>e.href||"")),C=k((await(0,I.Z)(v(m,E),u)).response).map((t=>({...t,calendarId:e.id}))),w=C.filter((e=>!f.some((t=>t.uid===e.uid)))),y=[];let S=0,T=0;w.forEach((e=>{50===S&&(y[++T]=[],S=0),y[T]||(y[T]=[]),y[T].push(e),S++})),await(0,re.F)(f,C);const A=f.filter((e=>p.some((t=>t===e.href))));return await Promise.all(A.map((e=>s.Z.deleteEvent(e.id)))),s.Z.setImportEventState({importId:l,importEventState:"IMPORTING"}),s.Z.setEventsToImportCount({importId:l,eventsToImportCount:w.length}),await Promise.all(y.map((async e=>{const t=await s.Z.createEvents(e);return s.Z.setImportedEventsCount({importId:l,importedEventsCount:t.created_count}),s.Z.loadPromise(),t}))),y.flat().some((e=>e.notifications))&&c.Z.updateAllAlarms(),s.Z.setImportEventState({importId:l,importEventState:"IMPORT_FINISHED"}),r.ctag=g,b?(e.ctag=g,Ce(e,t)):r}async function we(e,t){const n=a.Z.getCalendars().filter((t=>{if("google"===e.account_type){if(!t.supportedCalendarComponent)return;const{vevent:n}=t.supportedCalendarComponent;return t.accountId===e.id&&n}return t.accountId===e.id})),i=t.filter((e=>!n.some((t=>e.name===t.name)))),r=await Promise.all(i.map((async t=>{const{ctag:i,supportsSyncCollection:r,syncToken:a,...o}=t,l={accountId:e.id,active:n.length>0,...o},{calendar:c}=await s.Z.createCalendar(l);return c||Promise.reject()})));s.Z.loadPromise(),A.Z.utilities.broadcastMessage({calendar:{message:"loadData"}});const[o,l]=(0,H.Z)(n,(e=>t.some((t=>t.name===e.name))));await Promise.all(l.map((async e=>await s.Z.deleteCalendar(e))));const c=r.concat(o);t.forEach((async e=>{const t=c.find((t=>t.name===e.name));if(!t)return;const n={};"#"!==e.color&&e.color!==t.color&&(n.color=e.color),e.description!==t.description&&(n.description=e.description),Object.keys(n).length&&await s.Z.updateCalendar(t.id,n,!1)}));const u=c.filter((t=>t.active&&t.accountId===e.id)),m=await Promise.all(u.map((async n=>{const s=t.find((e=>e.name===n.name));return s?s.supportsSyncCollection?s.syncToken!==n.ctag?await Ce(n,e):void 0:await Ee(n,e):Promise.resolve()})));await Promise.all(m.filter(Boolean).map((async e=>{const{calendarId:t,ctag:n}=e;await s.Z.updateCalendar(t,{ctag:n},!1)})));const d=m.filter(Boolean).reduce(((e,t)=>(t.changed&&e++,e)),0);return{numberOfCalendarsPolled:u.length,numberOfChangedCalendars:d}}async function ye(e){const t={didPoll:!1,calendars:[],error:!1,message:""};if(!he.size&&(pe||!window.isMailWindow))return t;pe=!0;let n=a.Z.getAccounts().filter((e=>e.url.length));return n=n.filter((e=>!he.has(e.id))),e&&e.length&&(n=e.map((e=>n.find((t=>t.id===e)))).filter(Boolean)),he.size&&!ge&&(ge=!0,await Promise.all(Array.from(he.values()).map((async e=>await e.onRemoval(e.accountId)))),ge=!1),await n.reduce((async(n,r)=>n.then((async()=>{const{url:n,account_type:o,name:c}=r;if(!(!!e&&e.includes(r.id))){const e=a.Z.getCalendars().filter((e=>e.accountId===r.id)).map((e=>e.lastChecked)).filter(Boolean).reduce(((e,t)=>t>e?t:e),0),t=Date.now();if(!((e?e+1e3*M.jC:t)<=t))return[]}try{if(t.didPoll=!0,s.Z.stopAPIChangeListeners(),me(o)){const e=await i.Z.getAuthentication(r),s=await(0,I.Z)((0,d.ZP)(e),n),a=(0,E.Z)(s.response);if(0===a.length&&_.ZP.error("Calendar",["caldav"],(0,m.Z)("No calendars found for account '$1'. Check your calendar account settings."),c),"google"===o){const e=await X(r);t.calendars.push(e)}const l=await we(r,a);t.calendars.push(l)}else if("ical"===o){const e=await l.Z.fetchAndCreate(r);t.calendars.push(e)}}catch(e){t.message=function(e,t){const{status:n,statusText:s}=t,{name:i}=e;be[i]||(be[i]={authenticationErrorCount:0});let r="",a=be[i].authenticationErrorCount;0===n?r=(0,m.Z)("Could not connect to: $1",[i]):401===n?(a=++be[i].authenticationErrorCount,r=(0,m.Z)("Calendar Authentication Error: $1. Attempt: $2. $3.",[i,a,s])):n&&s?r=(0,m.Z)("Calendar Error: $1. $2 - $3",[i,n,s]):_.ZP.warn("Calendar",["caldav"],(0,m.Z)("Calendar Warning. Unspecified"),t);r&&ue(r,6e3);return be[i]={authenticationErrorCount:a},r}(r,e),t.error=!0}finally{const e=a.Z.getCalendars().filter((e=>e.accountId===r.id)).map((e=>e.id));await Promise.all(e.filter(Boolean).map((async e=>await s.Z.updateCalendar(e,{lastChecked:Date.now()},!1)))),s.Z.startAPIChangeListeners()}}))),Promise.resolve()).finally((()=>{pe=!1;a.Z.getAccounts().some((e=>e.url))&&(de=setTimeout((()=>ye()),2e4))})),t}const Se={resetStatus(e){be[e]&&(be[e].authenticationErrorCount=0)},resetEventRemoteData:e=>(e.href=void 0,e.url=void 0,e.etag=void 0,e),pollCalDAV:e=>(de&&clearTimeout(de),pe?{didPoll:!1,calendars:[],message:"",error:!1}:ye(e)),calendarServicerStart(){a.Z.addChangeListener(_e)},prepareForDeleteAccount(e){he.set(e.accountId,e),ye([e.accountId])},doneDeleteAccount(e){he.delete(e)},calendarStop(){clearTimeout(de)},async deleteEvent(e){const t=a.Z.getEvents().find((t=>t.id===e));if(!t)return;const n=a.Z.getCalendars().find((e=>e.id===t.calendarId));if(!n)return;const s=a.Z.getAccounts(),{accountId:r}=n,o=s.find((e=>e.id===r));if(o&&n&&o.url&&n.active){const e=await i.Z.getAuthentication(o);if("google"===o.account_type&&t.task){if(!t.uid)return;!async function(e,t){const{oauth2Token:n}=e,s=new XMLHttpRequest;s.open("DELETE",`${(0,M.fL)()}/tasks/v1/lists/@default/tasks/${t}?key=${await(0,O.wU)()}`),s.setRequestHeader("Authorization","Bearer "+n),new Promise(((e,t)=>{s.send(),s.onload=()=>{const{status:n,statusText:i,readyState:r}=s;n>=200&&n<300&&r===M.JS?e(!0):t({status:n,statusText:i})}}))}(e,t.uid)}else if(t.href){const{href:s}=t;(0,I.Z)(function(e,t,n){if(n.indexOf("/")>=0){const e=n.split("/");n=e[e.length-1]}const{url:s,username:i,password:r,oauth2Token:a}=e,o=h.parse(s),{protocol:l,host:c}=o;return l&&c?{username:i,password:r,oauth2Token:a,url:p([l+"//"+c,t,n]),method:"DELETE"}:{}}(e,n.name,s))}}},async updateEvent(e,t){const n={...e},r=a.Z.getCalendars().find((e=>e.id===n.calendarId)),o=a.Z.getAccounts();if(!r)return;const{accountId:l}=r,c=o.find((e=>e.id===l));if(!c)return;const u=await i.Z.getAuthentication(c);if("google"===c.account_type&&n.task)!async function(e,t){const{oauth2Token:n}=e,s=new XMLHttpRequest,{etag:i="",title:r,uid:a="",due:o}=t;s.open("PUT",`${(0,M.fL)()}/tasks/v1/lists/@default/tasks/${i}?key=${await(0,O.wU)()}`),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization","Bearer "+n);const l=o?U()((0,W.VV)(new Date(o))).format(j):void 0,c={kind:"tasks#taskList",id:`${a}`,etag:`${i}`,title:`${r}`,due:l?`${l}`:void 0};new Promise(((e,t)=>{s.send(JSON.stringify(c)),s.onload=()=>{const{status:n,response:i,statusText:r,readyState:a}=s;try{const s=JSON.parse(i);n>=200&&n<300&&a===M.JS?e(s):t({status:n,statusText:r})}catch(e){_.ZP.log("Calendar",["google, tasks"],"Error parsing create Task response ",e)}}}))}(u,n);else if(n.href){if(c.url&&r.active){const{etag:e,href:i,uid:o}=n,l={url:c.url,etag:e,href:i,uid:o},m=[n];(n.recurrenceExceptions||[]).forEach((e=>{const s=e.exception_event_id;if(s){const i=s===t?.id?t:a.Z.getEvent(s);i&&(i.recurrenceId=e.date,i.sequence=n.sequence,m.push(i))}}));const d=await(0,I.Z)(b(u,l,r.name,m,!0));if(d.etag)n.etag=le(d.etag);else{const e=await(0,I.Z)(f(u,c.url,r.name,n));n.etag=le(e.etag||"")}s.Z.updateEvent(n,void 0,!1)}}else n.sequence=0,Se.createEvent(n)},updateCalendar:(e,t)=>new Promise(((n,s)=>{const o=a.Z.getAccounts(),l=a.Z.getCalendars().find((t=>t.id===e));if(!l)return void n();const{accountId:c}=l,u=o.find((e=>e.id===c));if(!u||!u.url)return void n();const m={};t.description!==l.description&&(m.description=t.description),t.color!==l.color&&(m.color=t.color),0!==Object.keys(m).length?i.Z.getAuthentication(u).then((e=>{(0,I.Z)(function(e,t,n,s){const i=h.parse(t),{protocol:a,host:o}=i;let l="";if(a&&o){const e=a+"//"+o;l=r.Z.constructUrl([e,n])}const c=[];return s.description&&c.push(`<D:displayname>${s.description}</D:displayname>`),s.color&&c.push(`<calendar-color xmlns="http://apple.com/ns/ical/">${s.color}</calendar-color>`),{...e,url:l,method:"PROPPATCH",body:`<?xml version="1.0" encoding="UTF-8"?>\n<D:propertyupdate xmlns:D="DAV:"\nxmlns:CS="http://calendarserver.org/ns/"\nxmlns:C="urn:ietf:params:xml:ns:caldav">\n<D:set>\n<D:prop>\n${c.join("\n")}\n</D:prop>\n</D:set>\n</D:propertyupdate>`}}(e,u.url,l.name,m)).then((e=>{e.ok&&n()})).catch((e=>{s(e)}))})):n()})),async createEvent(e){const t={...e,uid:e.uid||o.Z.generateGUID()},n=a.Z.getAccounts();let r=a.Z.getCalendars().find((e=>e.id===t.calendarId));if(!r)return;const{etag:l,href:c,uid:u}=t,{accountId:m}=r,d=n.find((e=>e.id===m));if(!d)return;const h={url:d.url,etag:l,href:c,uid:u},p=await i.Z.getAuthentication(d),g=r.id;if("google"===d.account_type&&t.task){const e=oe(d);if(!e.find((e=>e.id===g))){if(!(e.length>0))return void _.ZP.log("Calendar",["google","tasks"],"Warning. No Google Task list found. Task not created.");r=e[0]}const n=await async function(e,t,n){const{oauth2Token:s}=e,i=new XMLHttpRequest,{etag:r="",title:a,uid:o="",due:l}=n,c=[(0,M.fL)(),"/tasks/v1/lists/",t,`tasks?key=${await(0,O.wU)()}`],u=G(c);i.open("POST",u),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","Bearer "+s);const m=l?U()((0,W.VV)(new Date(l))).format(j):void 0,d={kind:"tasks#taskList",id:`${o}`,etag:`${r}`,title:`${a}`,due:m?`${m}`:void 0};return new Promise(((e,t)=>{i.send(JSON.stringify(d)),i.onload=()=>{const{status:n,response:s,statusText:r,readyState:a}=i,o=JSON.parse(s);n>=200&&n<300&&a===M.JS?e(o):t({status:n,statusText:r})}}))}(p,r.name,t);t.etag=le(n.etag),t.uid=n.id,s.Z.updateEvent(t,void 0,!1)}else{const e=await(0,I.Z)(b(p,h,r.name,[t],!1));let n="";if(t.href=decodeURIComponent(e.href||""),e.etag)n=le(e.etag);else{const e=await(0,I.Z)(f(p,d.url,r.name,t));n=le(e.etag||"")}t.etag=n,s.Z.updateEvent(t,void 0,!1)}},async createCalendar(e,t){if("google"===e.account_type){const{name:n,description:s}=t,i=n||s||"";return await B(e,i)}return await async function(e,t){const n={message:"",status:!1,name:"",description:""},{url:s,username:r}=e,{name:a,color:o,description:l}=t,c=a||l||"",u=`${s.endsWith("/")?s:s+"/"}${c}`,{password:d}=await i.Z.getAuthentication(e),h=await fetch(u,{method:"MKCALENDAR",credentials:"omit",headers:{Accept:"text/xml",Authorization:P(r,d)},body:D(c,o)});if(h.ok){const e=await fetch(u,{method:"PROPFIND",credentials:"omit",headers:{Accept:"text/xml",Brief:"t",Depth:"1",Authorization:P(r,d)},body:'<?xml version="1.0" encoding="utf-8"?><D:propfind xmlns:D="DAV:">\n                  <D:prop><D:getetag /><D:getcontenttype /></D:prop></D:propfind>'});if(e.ok){const t=await e.text(),s=(0,C.Z)(t);if(s.d_error||s.parsererror||!s.d_multistatus)return n;s.d_multistatus.d_response.forEach((e=>{const{d_href:t}=e;n.name=t.content,n.status=!0,n.message=(0,m.Z)("Success")}))}}else 405===h.status?n.message=(0,m.Z)("Error creating Calendar. It might already exist."):n.message=(0,m.Z)("Error creating Calendar on Server");return n}(e,t)},async deleteCalendar(e,t){const{account_type:n,url:s,username:r}=e;if("google"===n){const n=a.Z.getCalendars().find((e=>e.name===t));if(!n?.supportedCalendarComponent)return{message:(0,m.Z)("Calendar not found"),status:!1};const{supportedCalendarComponent:s}=n,{vtodo:r}=s;if(r){return async function(e,t){const{oauth2Token:n}=e,s=new XMLHttpRequest;return s.open("DELETE",`${(0,M.fL)()}/tasks/v1/users/@me/lists/${t}?key=${await(0,O.wU)()}`),s.setRequestHeader("Authorization","Bearer "+n),new Promise(((e,t)=>{s.send(),s.onload=()=>{const{status:n,statusText:i,readyState:r}=s;n>=200&&n<300&&r===M.JS?e({status:!0,message:""}):t({status:n,message:i})}}))}(await i.Z.getAuthentication(e),t)}return await async function(e,t){const n=await i.Z.getAuthentication(e),{oauth2Token:s}=n,r=[(0,M.fP)(),"/v3/calendars",(a=R(t),a.endsWith("/")?a.slice(0,-1):a),`?key=${await(0,O.wU)()}`];var a;const o=x(r);return{status:(await fetch(o,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}})).ok,message:""}}(e,t)}const o=ce(s,t),{password:l}=await i.Z.getAuthentication(e);return{status:(await fetch(o,{method:"DELETE",headers:{Depth:"infinity",Authorization:ae(r,l)}})).ok,message:""}}},Te=Se},40838:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(74368);const i=":";function r(e){return(e=e.replace(/[^0-9a-z]+([a-z]|$)/gi,((e,t)=>t.toUpperCase())))||(e=i),e}function a(e,t,n,s){let o="",l="";for(let c=0;c<e.childNodes.length;c++){const u=e.childNodes[c];if(u instanceof Element){let l=r(u.localName);const c=e.nodeType===Node.DOCUMENT_NODE||n.simplify.some((e=>u.parentNode instanceof Element&&(e.parentns===(u.parentNode.namespaceURI||"")&&e.parent===u.parentNode.localName&&e.elementns===(u.namespaceURI||"")&&e.element===u.localName))),m=u.namespaceURI||i,d=u.namespaceURI||"";l=n.prefixes&&n.prefixes.hasOwnProperty(m)?n.prefixes[m]+"_"+l:d+":"+l,o=l;const h={attributes:{}};for(let e=0;e<u.attributes.length;e++){const t=u.attributes[e];let s=r(t.localName);const a=t.namespaceURI||i,o=t.namespaceURI||"";s=n.prefixes&&n.prefixes.hasOwnProperty(a)?n.prefixes[a]+"_"+s:o+":"+s,h.attributes[s]=t.nodeValue}a(u,h,n,s),c?t[l]?(s.simplifyerror=!0,t.simplifyerror||(t.simplifyerror={}),t.simplifyerror[l]instanceof Array||(t.simplifyerror[l]=[]),t.simplifyerror[l].push(h)):t[l]=h:(t[l]instanceof Array||(t[l]=[]),t[l].push(h))}else u.nodeType!==Node.TEXT_NODE&&u.nodeType!==Node.CDATA_SECTION_NODE||(l+=u.nodeValue)}return e.nodeType===Node.ELEMENT_NODE&&(t.content=l.replace(/^\s+$/,"")),o}function o(e,t){const n=(new DOMParser).parseFromString(e,"text/xml");if(!n||n.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","parsererror").length)return{parsererror:!0,root:"",simplifyerror:!1};const s={prefixes:(t||{}).prefixes||{[i]:""},simplify:(t||{}).simplify||[]},r={parsererror:!1,root:"",simplifyerror:!1};return r.root=a(n,r,s,r),r.root||(r.parsererror=!0),r}const l="DAV:",c="urn:ietf:params:xml:ns:caldav",u="http://calendarserver.org/ns/",m={prefixes:{":":"",[l]:"d",[c]:"c",[u]:"cs"},simplify:[{parentns:c,parent:"calendar-home-set",elementns:l,element:"href"},{parentns:c,parent:"calendar-multiget",elementns:l,element:"prop"},{parentns:c,parent:"calendar-query",elementns:c,element:"filter"},{parentns:c,parent:"calendar-query",elementns:l,element:"prop"},{parentns:c,parent:"comp-filter",elementns:c,element:"comp-filter"},{parentns:l,parent:"current-user-principal",elementns:l,element:"href"},{parentns:c,parent:"filter",elementns:c,element:"comp-filter"},{parentns:l,parent:"multistatus",elementns:l,element:"sync-token"},{parentns:l,parent:"prop",elementns:c,element:"calendar-data"},{parentns:l,parent:"prop",elementns:c,element:"calendar-home-set"},{parentns:l,parent:"prop",elementns:l,element:"current-user-principal"},{parentns:l,parent:"prop",elementns:l,element:"displayname"},{parentns:l,parent:"prop",elementns:u,element:"getctag"},{parentns:l,parent:"prop",elementns:l,element:"getetag"},{parentns:l,parent:"prop",elementns:l,element:"resourcetype"},{parentns:l,parent:"prop",elementns:c,element:"supported-calendar-component-set"},{parentns:l,parent:"prop",elementns:l,element:"sync-token"},{parentns:l,parent:"propfind",elementns:l,element:"prop"},{parentns:l,parent:"propstat",elementns:l,element:"prop"},{parentns:l,parent:"propstat",elementns:l,element:"status"},{parentns:l,parent:"resourcetype",elementns:l,element:"calendar"},{parentns:l,parent:"resourcetype",elementns:l,element:"collection"},{parentns:l,parent:"response",elementns:l,element:"href"},{parentns:l,parent:"response",elementns:l,element:"status"},{parentns:c,parent:"sync-collection",elementns:l,element:"prop"},{parentns:l,parent:"sync-collection",elementns:u,element:"sync-level"},{parentns:l,parent:"sync-collection",elementns:u,element:"sync-token"}]};function d(e){const t=o(e,m);return Array.isArray(t?.d_multistatus?.d_response)&&(t.d_multistatus.d_response=t.d_multistatus.d_response.map((e=>{if(!Array.isArray(e.d_propstat))return e;const t=e.d_propstat.filter((e=>{var t;return-1!==(t=e.d_status,Array.isArray(t)?t[0]:t).content.indexOf("200")})),n=t.reduce(((e,t)=>e.d_prop?(e.d_prop=Object.assign(e.d_prop,t.d_prop),e):Object.assign(e,t)),{});return e.d_propstat=n,e}))),t.d_error&&(s.ZP.log("Calendar",["caldav"],"caldavtojson error",t),t.parsererror=!0),t}},2344:(e,t,n)=>{"use strict";function s(e){return{...e,headers:{Depth:1},method:"PROPFIND",body:'<?xml version="1.0" encoding="UTF-8"?>\n    <D:propfind xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/">\n      <D:prop>\n        <D:getetag />\n        <D:displayname />\n        <CS:getctag />\n        <D:resourcetype />\n        <supported-calendar-component-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <supported-address-data xmlns="urn:ietf:params:xml:ns:carddav" />\n        <xmpp-uri xmlns="http://calendarserver.org/ns/" />\n        <calendar-color xmlns="http://apple.com/ns/ical/" />\n        <D:supported-report-set />\n        <D:sync-token />\n      </D:prop>\n    </D:propfind>'}}function i(){return'<?xml version="1.0" encoding="utf-8"?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:current-user-principal />\n        <D:resourcetype xmlns:D="DAV:" />\n      </D:prop>\n    </D:propfind>'}function r(){return'<?xml version="1.0" encoding="utf-8"?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:displayname />\n        <schedule-inbox-URL xmlns="urn:ietf:params:xml:ns:caldav" />\n        <schedule-outbox-URL xmlns="urn:ietf:params:xml:ns:caldav" />\n        <calendar-user-address-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <default-calendar-URL xmlns="http://icewarp.com/ns/" />\n        <default-tasks-URL xmlns="http://icewarp.com/ns/" />\n        <default-contacts-URL xmlns="http://icewarp.com/ns/" />\n        <default-notes-URL xmlns="http://icewarp.com/ns/" />\n        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <addressbook-home-set xmlns="urn:ietf:params:xml:ns:carddav" />\n        <D:resourcetype xmlns:D="DAV:" />\n        <supported-calendar-component-set xmlns="urn:ietf:params:xml:ns:caldav" />\n      </D:prop>\n    </D:propfind>'}n.d(t,{ZP:()=>s,P_:()=>i,sp:()=>r})},79777:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(32901),i=n(40838);function r(e){const t=(0,i.Z)(e),n=[];return t.d_error||t.parsererror||!t.d_multistatus?[]:(t.d_multistatus.d_response.forEach((e=>{const{d_href:t,d_propstat:i}=e,{content:r}=t,{d_prop:a}=i,{d_displayname:o,cs_getctag:l,d_syncToken:c,d_supportedReportSet:u,c_calendarColor:m}=a,d=o?o.content:"";let h="";h=m||a["http://apple.com/ns/ical/:calendarColor"];const p=h?h[0].content:"#",g={vevent:!1,vjournal:!1,vtodo:!1};if(a.c_supportedCalendarComponentSet){const{c_comp:e}=a.c_supportedCalendarComponentSet;g.vevent=e.some((e=>"VEVENT"===e.attributes._name)),g.vtodo=e.some((e=>"VTODO"===e.attributes._name))}let b=!1;u&&u[0].d_supportedReport&&u[0].d_supportedReport.forEach((e=>{e.d_report.forEach((e=>{e.d_syncCollection&&(b=!0)}))}));const N=l?l.content:"",f=c?c.content:"",{vevent:_,vtodo:v}=g;if(_||v){const e={syncToken:decodeURIComponent(f),supportsSyncCollection:b,ctag:decodeURIComponent(N),description:d,name:decodeURIComponent(r),color:"#"===p?s.Z.getCalendarCreateColor():p,supportedCalendarComponent:g};n.push(e)}})),n)}},70015:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(98517),i=n(43792);const{basicHttpAuthenticationHeader:r}=i.Z;async function a(e,t){const{username:n,password:i,body:a,method:o,contentType:l,oauth2Token:c,headers:u,href:m}=e;t||(t=e.url);const d={};d.Authorization=c?`Bearer  ${c}`:r(n,i);const h=await fetch(t,{method:o,credentials:"omit",headers:{...u,...d,"Content-Type":l||"application/xml; charset=utf-8"},body:a}),{status:p,ok:g}=h,b=h.headers.get("etag")||"",N=await h.text();return g?{href:m,response:N,etag:b,status:p,ok:g}:(401===p&&c&&s.Z.resetRefreshTokenAndFetchNew(n),{etag:"",response:"",status:p,ok:g})}},15712:(e,t,n)=>{"use strict";n.d(t,{F:()=>o,l:()=>l});var s=n(66854),i=n(74368),r=n(74686),a=n(85327);async function o(e,t){const n=new Set(e.flatMap((e=>(e.recurrenceExceptions??[]).map((e=>e.exception_event_id))))),o=e.map((e=>{const s=t.find((t=>t.uid===e.uid&&t.etag!==e.etag));return s&&!n.has(e.id)?(0,a.KU)(s,e):null})).filter(Boolean);!function(e,t){const n=t.flatMap((e=>e.recurrenceExceptions||[]));e.forEach((e=>{e.eventExceptions&&e.eventExceptions.forEach((async t=>{if(!n.some((n=>{if(n&&n.parent_event_id===e.id&&n.date===t.exception.exceptionDate)return!0}))){const{exceptionDate:n,cancelled:i}=t.exception;if(!n)return;if(!t.exception_event||i)return void s.Z.createException(e.id,"0",!0,n);const{start:a,end:o,title:l,description:c}=t.exception_event,{uid:u,id:m,rrule:d,eventExceptions:h,recurrence:p,alarmId:g,filteredOut:b,recurrenceExceptions:N,trash:f,trash_time:_,attachment:v,invites:E,notifications:C,recurrenceId:w,...y}=e;if(!a||!o)return;y.start=a,y.end=o,y.title=l,y.description=c;const S=await s.Z.createEvent({...y,is_template:!1},!1);s.Z.createException(m,S.id,!1,n),r.Z.calendar.updateEvent(e.id,{sequence:e.sequence,etag:e.etag})}}))}))}(o.filter((e=>e.eventExceptions?.length)),e);try{await Promise.all(o.map((async e=>await s.Z.updateEvent(e))))}catch(e){i.ZP.error("Calendar",["caldav"],"Error updating event",e)}}function l(e,t){return t.sequence!==e.sequence||t.title!==e.title||(t.description??"")!==e.description||(t.start??0)!==e.start||(t.end??t.start??0)!==e.end||(t.due??0)!==e.due||t.complete!==e.complete||t.allDay!==e.allDay||(t.recurrence?.toString()??"")!==(e.recurrence?.toString()??"")||(t.organizer??"")!==e.organizer||(t.location??"")!==e.location||(t.url??"")!==e.url}},91761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var s=n(66854),i=n(98517),r=n(43792),a=n(32901),o=n(55002),l=n(63057),c=n(49237),u=n(74686),m=n(85327);function d(e,t){return e.filter((e=>e.UID&&!t.has(e.UID)))}function h(e,t){const n=new Set;return t.forEach((e=>{e.recurrenceExceptions&&e.recurrenceExceptions.forEach((e=>{n.add(e.exception_event_id)}))})),t.filter((t=>!e.some((e=>{const s=t.uid===e.UID,i=n.has(t.id);return s||!t.uid&&i}))))}function p(e,t){return e.filter((e=>e.UID&&t.has(e.UID)))}var g=n(15712);const{basicHttpAuthenticationHeader:b}=r.Z;async function N(e,t,n){const s={};t&&n&&(s.Authorization=b(t,n));const i={...s,Accept:"text/calendar"};return await fetch(e,{headers:i})}const f={probeWebCalendar:async(e,t)=>{const{url:n,username:s}=e;let i=0;const r={url:n,calendarCount:0,eventCount:0,foundService:!1,statusMessage:""},{urlValid:a}=u.Z.utilities.isUrlValid(n);if(!a)return{...r,statusMessage:(0,l.Z)("Invalid URL $1",[n])};try{const e=await N(n,s,t),{status:a,statusText:o}=e;if(a>=200&&a<300){const t=await e.text();try{i=(0,c.Z)(t).VEVENT.length}catch(e){return{...r,statusMessage:(0,l.Z)("No Web Calendar found: $1",[n])}}return{...r,foundService:!0,eventCount:i,statusMessage:(0,l.Z)("Success")}}return{...r,statusMessage:(0,l.Z)("Not connected. $1",[o])}}catch(e){return{...r,statusMessage:(0,l.Z)("Error $1",e.message)}}},fetchAndCreate:async e=>{const{url:t}=e;if(!t)throw"Url missing";const n={numberOfCalendarsPolled:1,numberOfChangedCalendars:0};let r="",a="";try{const t=await i.Z.getAuthentication(e);r=t.username,a=t.password}catch(e){}const l=await N(t,r,a);if(200!==l.status)throw`Fetch remote calendar. Status code: ${l.status}`;const u=await l.text(),g=(0,c.Z)(u),b=g["X-WR-CALNAME"]||e.name,_=await f.getCalendar(e,b),{id:v}=_,E=g.VEVENT,C=o.Z.getEventsPerCalendar(v),{create:w,deleteEvents:y,update:S}=function(e,t){const n=new Set(t.map((e=>e.uid)).filter(Boolean));return{create:d(e,n),deleteEvents:h(e,t),update:p(e,n)}}(E,C);(w.length||y.length)&&(n.numberOfChangedCalendars=1),y.reduce((async(e,t)=>e.then((()=>s.Z.deleteEvent(t.id)))),Promise.resolve()),await(0,m.nj)(w,_.id,"");return await f.updateEvents(S,_.id)&&(n.numberOfChangedCalendars=1),n},getCalendar:(e,t)=>new Promise(((n,i)=>{const r=o.Z.getCalendars().filter((t=>t.accountId===e.id)),l=r.find((t=>t.accountId===e.id));if(l)n(l);else{const i={name:t,description:t,accountId:e.id,active:!0,color:a.Z.getCalendarCreateColor()};s.Z.createCalendar(i).then((e=>{e.calendar&&n(e.calendar)}))}})),updateEvents:(e,t)=>new Promise((n=>{const s=e.map((e=>(0,m.rP)(e,{},t))),i=o.Z.getEventsPerCalendar(t),r=s.filter((e=>i.some((t=>e.uid===t.uid&&(0,g.l)(t,e)))));(0,g.F)(i,r).then((()=>{n(r.length)}))}))},_=f},89501:(e,t,n)=>{"use strict";n.d(t,{RO:()=>s,ES:()=>i,Vl:()=>r});const s=e=>e.replace(/\\\\|\\;|\\,|\\[Nn]/g,(e=>{switch(e){case"\\\\":return"\\";case"\\;":return";";case"\\,":return",";case"\\n":case"\\N":return"\n";default:return e}})),i=e=>e.replace(/\\|;|,|\r\n|\n/g,(e=>{switch(e){case"\\":return"\\\\";case";":return"\\;";case",":return"\\,";case"\r\n":case"RN":case"\n":case"N":return"\\n";default:return e}}));function r(e,t,n){let s=!1;if(n&&n<2)return[e];n=n||1/0;const i=[0];for(let r=0;r<e.length;r++){const a=e[r];if('"'===a)0!==r&&"\\"===e[r-1]||(s=!s);else if(a===t&&!s&&(i.push(r+1),i.length>=n))break}return 1===i.length?[e]:i.map(((t,n)=>{const s=i[n+1];return e.slice(t,s?s-1:s)}))}},49237:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(74368),i=n(45932),r=n(89501);function a(e){try{if(e.startsWith('"')&&e.endsWith('"'))return e.slice(1,-1)}catch(t){s.ZP.error("Calendar",["parser"],"Parsing error in stripQuotes",e,t)}return e}const o=e=>{const t={};for(;e.length>1;){const n=e.shift(),[s,c]=(0,r.Vl)(n,":",2);if(void 0===c)throw new Error(`Error parsing iCal line: "${n}". Value not found.`);const[u,m]=s.split(/;(.*)/,2),d=m?(0,r.Vl)(m,";").reduce(((e,t)=>{const[n,s]=t.split("=");return e[n]=a(s),e}),{}):{};switch(u){case"BEGIN":const s=c;let r=o(e);switch(t[s]&&(r=[].concat(t[s],r)),s){case"VEVENT":case"VTODO":case"VALARM":case"VTIMEZONE":case"STANDARD":case"DAYLIGHT":t[s]=Array.isArray(r)?r:[r];break;default:t[s]=r}break;case"END":return t;case"RECURRENCE-ID":case"DTSTART":case"DTEND":case"DTSTAMP":case"DUE":c.endsWith("Z")?d.TZID="UTC":d.TZID||(d.TZID=i.$T),t[u]={value:c,params:d};break;case"ATTENDEE":t[u]=(t[u]||[]).concat([{value:l(c),params:d}]);break;case"EXDATE":c.indexOf(",")>=0?t[u]=c.split(",").map((e=>({value:e,params:d}))):t[u]=(t[u]||[]).concat([{value:c,params:d}]);break;case"ORGANIZER":t[u]={value:l(c),params:d};break;case"URL":t[u]={value:c,params:d};break;case"ATTACH":t[u]=t[u]?[t[u],n].join("\r\n"):n;break;case"UID":case"CLASS":case"CREATED":case"DESCRIPTION":case"GEO":case"LAST-MODIFIED":case"LOCATION":case"PRIORITY":case"SEQUENCE":case"STATUS":case"SUMMARY":case"TRANSP":t[u]=c;break;default:t[u]?t[u]=[].concat(t[u]||[],c):t[u]=c}}return t},l=e=>e.toLowerCase().startsWith("mailto:")?e.substr(7):e,c=e=>{const t=(e=>{const t=e.split(/\r\n|\n|\r/).filter((e=>""!==e.trim())),n=[];let s="";for(;t.length>0;){const e=t.shift();" "===e[0]||"\t"===e[0]?s+=e.substr(1):(s&&n.push(s),s=e.trim())}return s&&n.push(s),n})(e),n=o(t);if(!n.VCALENDAR)return{VEVENT:[],VTODO:[]};if(n.VCALENDAR.VEVENT){const e=n.VCALENDAR.VEVENT.reduce(((e,t)=>{const n=e.findIndex((e=>e.UID===t.UID));return-1===n?e.push({UID:t.UID,VEVENT:[t]}):e[n].VEVENT.push(t),e}),[]).reduce(((e,t)=>{const n=t.VEVENT.reduce(((e,t)=>(t["RECURRENCE-ID"]?e.EXCEPTIONS?e.EXCEPTIONS.push(t):e.EXCEPTIONS=[t]:e={...e,...t},e)),{});return e.push(n),e}),[]);n.VCALENDAR.VEVENT=e}else n.VCALENDAR.VEVENT=[];return{...n.VCALENDAR}}},85327:(e,t,n)=>{"use strict";n.d(t,{K2:()=>U,rP:()=>O,nj:()=>L,CJ:()=>R,WJ:()=>V,KU:()=>x,tP:()=>B,J9:()=>F,Uq:()=>M});var s=n(66854),i=n(98517),r=n(32901),a=n(55002),o=n(82495),l=n(38504),c=n(74368),u=n(18345),m=n(80008),d=n.n(m),h=n(70015),p=n(49237),g=n(43792),b=n(8575);const{constructUrl:N}=g.Z;var f=n(45932),_=n(89501),v=n(39190);const E=(0,n(23542).extendMoment)(d());function C(e){const t=["BEGIN:VCALENDAR","PRODID:-Vivaldi Calendar V1.0//EN","VERSION:2.0","CALSCALE:GREGORIAN","DTSTAMP:"+E.tz().format(f.FI)],n=e.VEVENT.map((e=>function(e){const t=e=>e?e.map((e=>{const t=["BEGIN:VALARM"];for(const n in e)t.push(`${n}:${e[n]}`);return t.push("END:VALARM"),t})).flat():[""];let n=["BEGIN:VEVENT"];for(const s in e)switch(s){case"VALARM":const i=t(e[s]);n=[...n,...i];break;case"ATTENDEE":n.push(S(s,e[s]));break;case"ORGANIZER":n.push(y(s,e[s]));break;case"DTSTART":case"DTSTAMP":case"DTEND":n.push(w(s,e[s]));break;default:n.push(`${s}:${e[s]}`)}return n.push("END:VEVENT\r\n"),n.join("\r\n")}(e)));t.push("");let s=t.join("\r\n");return n.forEach((e=>{s+=e})),o.Z.foldIcal(s+"END:VCALENDAR\r\n")}function w(e,t){if(!t)return"";const{params:n}=t;return"DATE"===n.VALUE?`${e};VALUE=DATE:${t.value}`:`${e}:${t.value}`}function y(e,t){if(!t)return"";const n=[],{value:s,params:i}=t;for(const e in i)n.push(`${e}=${i[e]}`);return`${e};${n.join("=")}:mailto:${s}`}function S(e,t){const n=[],s=[];return t?(t.forEach((t=>{const{value:i,params:r}=t;for(const e in r)n.push(`${e}=${r[e]}`);const a=`${n.join(";")}`,o=`mailto:${i}`;s.push(`${e};${a}:${o}`)})),s.join("\r\n")):""}var T=n(53548),k=n(97562);const{createLocalAccountAndCalendar:I}=r.Z;let A;function Z(e,t){return t&&t!==f.$T?d().tz(e,t):d()(e)}function P(e){if(d().tz.names().includes(e)||e===f.$T)return e;const t=d().tz.guess(),n=(0,v.findIana)(e);return t&&n&&n.includes(t)?t:n&&n.length?n[0]:""}function D(e){return"DATE"===e.params.VALUE?f.GL:f.L9}function M(e,t){const n=t??e?.params.TZID,s=D(e),{value:i}=e;if(n===f.$T){const e=d().tz(i,s,"UTC").toDate();return(0,k.FL)(e).valueOf()}return n?d().tz(i,s,n).valueOf():d()(i,s).valueOf()}const O=(e,t={},n)=>{let s=[],i=[];const r={title:""},o=["SUMMARY","LOCATION","DESCRIPTION"];Object.keys(e).forEach((t=>{o.indexOf(t)>=0&&"string"==typeof e[t]&&("SUMMARY"===t?r.title=(0,_.RO)(e[t]):r[t.toLowerCase()]=(0,_.RO)(e[t]))})),e.EXCEPTIONS&&(s=e.EXCEPTIONS.map((e=>{const s=O(e,t,n),i=e["RECURRENCE-ID"];if(i&&i.value){const e=M(i),{recurrence:t,...n}=s;return{exception:{cancelled:!1,exceptionDate:e},exception_event:n}}})).filter(Boolean)),e.ATTENDEE&&(i=e.ATTENDEE.map((e=>({name:e.params.CN||"",address:e.value,partstat:e.params.PARTSTAT||"NEEDS-ACTION"}))));let l,c=!1,m=0;const h=e.DTSTART&&P(e.DTSTART.params.TZID);e.DTSTART&&e.DTSTART.value&&("DATE"===e.DTSTART.params.VALUE&&(c=!0),m=M(e.DTSTART,h));const p=e.DTEND&&P(e.DTEND.params.TZID);if(e.DTEND&&e.DTEND.value&&(l=M(e.DTEND,p)),e.DURATION){l=m+d().duration(e.DURATION).asMilliseconds()}let g=[];e.VALARM&&(g=e.VALARM.map((t=>{const{TRIGGER:n=""}=t;return{when:-d().duration(n).asMilliseconds(),name:e.SUMMARY||""}})));let b=e.LOCATION;"string"!=typeof b&&(b="");let N={};if(e.DUE){N={due:M(e.DUE)}}e.EXDATE&&e.EXDATE.forEach((e=>{const t=D(e),n=P(e.params.TZID),i=n?d().tz(e.value,t,n):d()(e.value,t);s.push({exception:{cancelled:!0,exceptionDate:i.valueOf()}})}));const v=e.URL&&e.URL.value;if(m&&l){const e=Z(m,h),t=Z(l,p),n=e.startOf("day").valueOf()===m,s=t.startOf("day").valueOf()===l,i=1===t.diff(e,"d");n&&s&&i&&(c=!0)}let E=!1;e.STATUS&&(E="COMPLETED"===e.STATUS);const C=e.RRULE?.match(/UNTIL=(\d{8}T\d{6}Z)/);if(C&&"DATE"===e.DTSTART?.params.VALUE){const t=`UNTIL=${d()(C[1]).add(12,"hour").format(f.O5)}`;e.RRULE=e.RRULE?.replace(/UNTIL=\d{8}T\d{6}Z/,t)}return{...r,recurrence:e.RRULE?(0,T.Qj)(e.RRULE,m,h):void 0,url:v,start:m,end:l,...(0,u.Z)(N),timezone:h,allDay:c,end_recurring:undefined,is_recurring:!!e.RRULE,calendarId:n||(a.Z.getDefaultCalendar()?.id??""),href:t.href,etag:t.etag,uid:e.UID?e.UID:"",organizer:e.ORGANIZER&&e.ORGANIZER.value,notifications:g,sequence:parseInt(e.SEQUENCE)||0,...(0,u.Z)(s.length>0?{eventExceptions:s}:null),...(0,u.Z)(i.length>0?{invites:i}:null),attachment:e.ATTACH,is_template:!1,complete:E}};function x(e,t){const{is_template:n,...s}=e,i=function(e,t){if(e.invites)return e.invites.map((e=>{const n=t.invites&&t.invites.find((t=>t.address===e.address));return{...e,id:n?.id||"",event_id:n?.event_id||""}}))}(e,t),r=function(e,t){if(!e.notifications)return t.notifications;const n=t.notifications;if(!n)return e.notifications.map((e=>({...e,id:"",event_id:t.id})));const s=e.notifications.filter((e=>!n.some((t=>t.when===e.when)))).map((e=>({...e,id:"",event_id:t.id})));return[...n,...s]}(e,t);return{...s,attachment:o.Z.stringToAttachments(e.attachment),...(0,u.Z)(i?{invites:i}:null),...(0,u.Z)(r?{notifications:r}:null),id:t.id,start:e.start||0,end:e.end||0}}const L=(e,t,n)=>{if(0===e.length)return Promise.resolve();const i=[[]];let r=0,a=0;return e.forEach((e=>{100===r&&(i[++a]=[],r=0),i[a].push(O(e,{},t)),r++})),s.Z.stopAPIChangeListeners(),new Promise(((e,t)=>{i.reduce(((e,t)=>e.then((()=>s.Z.createEvents(t).then((e=>{s.Z.setImportedEventsCount({importId:n,importedEventsCount:e.created_count}),s.Z.loadPromise()}))))),Promise.resolve()).then((t=>{e()})).catch((e=>{c.ZP.error("Calendar",["import"],e),t(e)})).finally((e=>{s.Z.startAPIChangeListeners(),l.Z.updateAllAlarms()}))}))};function R(e,t,n){return s.Z.setEventsToImportCount({importId:t,eventsToImportCount:n.length}),s.Z.setImportEventState({importId:t,importEventState:"IMPORTING"}),L(n,e,t).then((()=>{s.Z.setImportEventState({importId:t,importEventState:"IMPORT_FINISHED"})})).catch((e=>{c.ZP.error("Calendar",["import"],e),s.Z.setImportEventState({importId:t,importEventState:"IMPORT_ERROR"})}))}async function B(e,t){const{calendarId:n,createNew:r,newCalendarName:c,importId:u}=t;s.Z.setImportEventState({importId:u,importEventState:"PARSING_FINISHED"});const m=(0,p.Z)(e).VEVENT;if(r){const{calendar:e}=await I(null,{name:"",description:c,accountId:""});if(!e)return;await R(e.id,u,m)}else{const t=a.Z.getAccountForCalendar(n),r=a.Z.getCalendars().find((e=>e.id===n));if(!t||!r)return;const{account_type:l}=t;if("caldav"===l||"vivaldi"===l||"google"===l){const n=(0,p.Z)(e),a=n.VEVENT,{VEVENT:l,...c}=n,u=[];a.forEach((e=>{const t=C({...c,VEVENT:[e]});u.push(t)})),u.forEach((async e=>{const n=await i.Z.getAuthentication(t);await(0,h.Z)(function(e,t,n){const s=e.url,i=o.Z.generateGUID(),{username:r,password:a,oauth2Token:l}=e,c=b.parse(s);let u="";const{protocol:m,host:d}=c;let h="";if(!m||!d||!i)return{};const p=m+"//"+d;return h="/"+N([t,i])+".ics",u=N([p,h]),{username:r,password:a,oauth2Token:l,headers:{"If-None-Match":"*"},url:u,href:h,method:"PUT",contentType:"text/calendar; charset=utf-8",body:n}}(n,r.name,e))})),s.Z.pollCalDAVAccounts([t.id])}else await R(n,u,m)}l.Z.updateAllAlarms()}const F=e=>new Promise(((t,n)=>{Promise.all(A.map((async t=>{const{name:n}=t;s.Z.setImportEventState({importId:n,importEventState:"STARTING_PARSING_EVENTS"});const i=await t.getFile();B(await i.text(),e[n])}))).then((()=>{t()})).catch((e=>{c.ZP.warn("Calendar",["import"],e),n(e)}))})),U=()=>{A=[]},V=async()=>{try{A=await window.showOpenFilePicker({multiple:!0,types:[{description:"iCalendar",accept:{"text/*":[".ics",".txt"]}}]})}catch(e){console.error(e)}return A}},53548:(e,t,n)=>{"use strict";n.d(t,{z3:()=>u,_7:()=>m,Qj:()=>d,Zm:()=>h,yu:()=>p,EE:()=>g,YE:()=>b,qh:()=>N,_v:()=>f,v1:()=>_,IK:()=>E,QX:()=>w});var s=n(74368),i=n(5264),r=n.n(i),a=n(30381),o=n.n(a),l=n(54483),c=n(97562);const u=[l.Ci.MO,l.Ci.TU,l.Ci.WE,l.Ci.TH,l.Ci.FR,l.Ci.SA,l.Ci.SU];function m(e){const t=u[(e+6)%7];if(!t)throw new Error("Invalid weekday number");return t}function d(e,t,n){try{const s=t?(0,c.VV)(new Date(t),n):void 0;return(0,l.SA)(e,{dtstart:s})}catch(t){s.ZP.warn("Calendar",["parser"],"Error parsing rrule string",e,t)}}function h(e){let{dtstart:t,until:n}=e;return t=t&&(0,c.VV)(t),n=n&&(0,c.VV)(n),new l.Ci({...e,dtstart:t,until:n})}function p(e,t){let{dtstart:n,until:s}=t;return n=n?(0,c.VV)(n):e.origOptions.dtstart,t.hasOwnProperty("until")?s&&(s=(0,c.VV)(s)):s=e.origOptions.until&&(0,c.FL)(e.origOptions.until),new l.Ci({...e.origOptions,...t,dtstart:n,until:s})}function g(e,t){function n(e){return e.weeks()-e.clone().startOf("month").weeks()}function s(e,t,n){const s="number"==typeof n?n:n.weekday,i=u[((s+e)%7+7)%7];if(!i)throw new Error("Weekday not found. Should not happen.");return i&&n.hasOwnProperty("n")&&"number"==typeof n.n?i.nth(n.n+t):i}if(!e?.dtstart)return{freq:1};const i=(0,c.FL)(e.dtstart),r=o()(i),a=o()(i).add(t,"millisecond"),l=a.diff(r,"day");if(!l)return e;const m=n(a)-n(r),{byweekday:d,bymonthday:h}=e;return d?Array.isArray(d)?e.byweekday=d.map((e=>s(l,m,e))):e.byweekday=s(l,m,d):h&&(Array.isArray(h)?e.bymonthday=h.map((e=>r.clone().date(e).add(l,"day").date())):"number"==typeof h&&(e.bymonthday=r.clone().date(h).add(l,"day").date())),e}const b=r()(250)((function(e,t,n,s){const i=d(e);return i?i.between((0,c.VV)(new Date(t),s),(0,c.VV)(new Date(n),s),!0).map((e=>(0,c.FL)(e,s))):[]}));function N(e,t,n,s,i){return e.between((0,c.VV)(t,i),(0,c.VV)(n,i),!0,((e,t)=>t<s)).map((e=>(0,c.FL)(e,i)))}function f(e,t,n,s){const i=e.before((0,c.VV)(t,n),s);return i instanceof Date?(0,c.FL)(i):null}function _(e){const{bymonthday:t}=e.origOptions;return t?Array.isArray(t)?t:[t]:[]}function v(e){return"number"==typeof e?e:e.weekday}function E(e){const{byweekday:t}=e.origOptions;return t?Array.isArray(t)?t.map(v):[v(t)]:[]}function C(e){return"number"==typeof e?new l.OG(e):e}function w(e){const{byweekday:t}=e.origOptions;return t?Array.isArray(t)?t.map(C):[C(t)]:[]}},74144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(67294),i=n(94184),r=n.n(i),a=n(85612),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FloatingLabel.jsx";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}class c extends s.PureComponent{constructor(...e){var t,n,i;super(...e),t=this,n="inputRef",i=s.createRef(),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){if(this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}componentDidUpdate(e){if(!e.focusInput&&this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}render(){const{placeholder:e="",label:t,labelImportant:n,style:i,isVerified:c,hasError:u,focusInput:m,...d}=this.props,h=r()({"floating-label":!0,verified:c&&!this.props.disabled});let p;return t&&(p=n?s.createElement("strong",{__source:{fileName:o,lineNumber:68,columnNumber:11}},t):s.createElement("span",{__source:{fileName:o,lineNumber:68,columnNumber:40}},t)),s.createElement("label",{className:h,style:i,__source:{fileName:o,lineNumber:72,columnNumber:7}},p,"textarea"!==d.type?s.createElement(s.Fragment,null,s.createElement("input",l({},d,{ref:this.inputRef,className:"floating-input",type:this.props.type,placeholder:e,__source:{fileName:o,lineNumber:76,columnNumber:13}})),u&&!this.props.disabled&&s.createElement("span",{className:"error",dangerouslySetInnerHTML:{__html:a.viW},__source:{fileName:o,lineNumber:84,columnNumber:15}})):s.createElement("textarea",l({},d,{ref:this.inputRef,className:"floating-input",placeholder:e,__source:{fileName:o,lineNumber:91,columnNumber:11}})))}}const u=c},96675:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(67294),i=n(21622),r=n(62434),a=n(30074),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FocusTrap.jsx";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends s.PureComponent{constructor(e,t){super(e),c(this,"focusRef",s.createRef()),c(this,"_getFocusable",(()=>{const{HTMLElement:e}=this.context,t=this.focusRef.current;let n;t instanceof e&&(n=t.querySelectorAll(`a[href]:not([tabindex='-1']),\n        button:not([disabled],[disabled=true],[tabindex='-1']),\n        input:not([disabled],[disabled=true],[tabindex='-1'],[hidden]),\n        select:not([disabled],[disabled=true],[tabindex='-1']),\n        textarea:not([disabled],[disabled=true],[tabindex='-1']),\n        p[contenteditable]:not([tabindex='-1']),\n        [tabindex]:not([tabindex='-1'],.${this.props.focusName})`)),this._focusable=n})),c(this,"focus",(()=>{this.focusRef?.current?.contains(this.context.document.activeElement)||this._focusable?.length&&this._focusable[0].focus()})),c(this,"handleTopFocus",(e=>{if(this._getFocusable(),this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,n=this._focusable[0],s=this._focusable[this._focusable.length-1];if(!n||!s)return;e.relatedTarget instanceof t&&this.focusRef?.current?.contains(e.relatedTarget)?s.focus():n.focus()}})),c(this,"handleBottomFocus",(e=>{if(this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,n=this._focusable[0],s=this._focusable[this._focusable.length-1];if(!n||!s)return;e.relatedTarget instanceof t&&this.focusRef?.current?.contains(e.relatedTarget)?n.focus():s.focus()}})),this._lastFocused=t.document.activeElement}componentDidMount(){this._getFocusable(),0===i.ZP.get(a.kKeyboardTabToAll)&&this.focus()}componentWillUnmount(){const{document:e}=this.context;this.focusRef?.current?.contains(e.activeElement)&&this._lastFocused?.focus(),delete this._focusable}render(){const{children:e,focusName:t,forceTrap:n,...r}=this.props;return n||!0===i.ZP.get(a.kWebpagesFocusTrap)?s.createElement("div",l({},r,{ref:this.focusRef,__source:{fileName:o,lineNumber:123,columnNumber:9}}),s.createElement("span",{tabIndex:"0",className:t,onFocus:this.handleTopFocus,__source:{fileName:o,lineNumber:124,columnNumber:11}}),e,s.createElement("span",{tabIndex:"0",className:t,onFocus:this.handleBottomFocus,__source:{fileName:o,lineNumber:128,columnNumber:11}})):s.createElement("div",l({},r,{ref:this.focusRef,__source:{fileName:o,lineNumber:135,columnNumber:9}}),e)}}c(u,"contextType",r.Z);const m=u},95077:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(67294),i=n(53728),r=n(73935);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}function o(e){return(0,s.forwardRef)((function(t,n){if("function"==typeof n)throw Error("Callback refs not supported");const[o,l]=(0,s.useState)(!1),c=(0,s.useCallback)((()=>l(!1)),[]),u=(0,s.useCallback)((()=>l(!0)),[]),m=(0,s.useRef)(null),d=n||m,h=(0,s.useCallback)((()=>d.current?(0,r.findDOMNode)(d.current):null),[d]),p=(0,s.useCallback)((()=>d.current?d.current.handleClickOutside:null),[d]),{disableOnClickOutside:g,eventTypes:b,outsideClickIgnoreClass:N,...f}=t;return(0,i.Z)(h,p,N,g||o,b),s.createElement(e,a({},f,{ref:d,enableOnClickOutside:c,disableOnClickOutside:u,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertClickOutside.jsx",lineNumber:54,columnNumber:12}}))}))}},46528:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(67294),i=n(59980);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(this,arguments)}const a=function(e,t){return s.forwardRef(((n,a)=>{const o=(0,i.Z)(t);return s.createElement(e,r({},n,{ref:a,prefValues:o,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertPrefsCache.jsx",lineNumber:21,columnNumber:12}}))}))}},35272:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=Object.freeze({KEY_CANCEL:3,KEY_HELP:6,KEY_BACK_SPACE:8,KEY_TAB:9,KEY_CLEAR:12,KEY_RETURN:13,KEY_ENTER:14,KEY_SHIFT:16,KEY_CONTROL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_ESCAPE:27,KEY_SPACE:32,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_PRINTSCREEN:44,KEY_INSERT:45,KEY_DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_SEMICOLON:59,KEY_EQUALS:61,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,KEY_META:91,KEY_CONTEXT_MENU:93,KEY_NUMPAD0:96,KEY_NUMPAD1:97,KEY_NUMPAD2:98,KEY_NUMPAD3:99,KEY_NUMPAD4:100,KEY_NUMPAD5:101,KEY_NUMPAD6:102,KEY_NUMPAD7:103,KEY_NUMPAD8:104,KEY_NUMPAD9:105,KEY_MULTIPLY:106,KEY_ADD:107,KEY_SEPARATOR:108,KEY_SUBTRACT:109,KEY_DECIMAL:110,KEY_DIVIDE:111,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_F13:124,KEY_F14:125,KEY_F15:126,KEY_F16:127,KEY_F17:128,KEY_F18:129,KEY_F19:130,KEY_F20:131,KEY_F21:132,KEY_F22:133,KEY_F23:134,KEY_F24:135,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145,KEY_COMMA:188,KEY_PERIOD:190,KEY_SLASH:191,KEY_BACK_QUOTE:192,KEY_OPEN_BRACKET:219,KEY_BACK_SLASH:220,KEY_CLOSE_BRACKET:221,KEY_QUOTE:222})},16489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s=n(67294),i=n(52152),r=n(3120),a=n(63057),o=n(94184),l=n.n(o),c=n(9776),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\MasterDetail.jsx";function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends s.Component{constructor(e){super(e),m(this,"onSelectItem",(e=>{this.setState({selectedIndex:e})})),m(this,"onCreateItem",(e=>{this.setState({isCreating:!0}),"function"==typeof this.props.onCreateItem&&this.props.onCreateItem(e)})),m(this,"onCancelCreate",(e=>{this.setState({isCreating:!1}),"function"==typeof this.props.onCancelCreateItem&&this.props.onCancelCreateItem()})),m(this,"considerRemovingItem",(()=>{this.setState({showDeleteConfirmation:!0})})),m(this,"cancelRemoval",(()=>{this.setState({showDeleteConfirmation:!1})})),m(this,"renderContentElement",((e,t,n,s)=>{if(!e||t)return s(n);const i=e&&n&&function(e,t){let n=!1;const s={...t};for(const i of Object.keys(t)){const r=t[i];r.toLowerCase().includes(e)&&(s[i]=(0,c.CH)(r,e),n=!0)}return n?s:null}(e,n);return e&&!i?null:s(i||n)})),this.state={selectedIndex:this.props.initialSelectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,showDeleteConfirmation:!1}}componentDidUpdate(e){this.props.items.length!==e.items.length&&this.cancelRemoval()}render(){const{items:e,masterLayout:t}=this.props,n=this.state.selectedIndex,o=null!=n&&e[n];let m;const d=(this.props.title||this.props.subtitle||"").toLowerCase().includes(this.props.filter)?"":this.props.filter,h=!d||e.some((e=>"string"==typeof e.name&&e.name.toLowerCase().includes(d)));return(this.state.isCreating||this.props.isCreating)&&this.props.renderCreate?m=this.renderContentElement(d,h,this.props.createStrings?this.props.createStrings:this.props.contentStrings,this.props.renderCreate.bind(this)):o?m=this.renderContentElement(d,h,this.props.contentStrings,this.props.renderContent.bind(this,n)):this.props.renderEmpty&&(m=this.renderContentElement(d,h,this.props.emptyStrings?this.props.emptyStrings:this.props.contentStrings,this.props.renderEmpty.bind(this))),m||h?s.createElement("div",{__source:{fileName:u,lineNumber:173,columnNumber:7}},this.props.title&&s.createElement("h2",{__source:{fileName:u,lineNumber:175,columnNumber:11}},(0,c.CH)(this.props.title,this.props.filter)),this.props.subtitle&&s.createElement("h3",{__source:{fileName:u,lineNumber:178,columnNumber:11}},(0,c.CH)(this.props.subtitle,this.props.filter)),s.createElement("div",{className:this.props.className?this.props.className+" master-detail":"master-detail",style:this.props.style,__source:{fileName:u,lineNumber:180,columnNumber:9}},this.state.showDeleteConfirmation&&o&&this.props.deleteDialog&&s.createElement(i.Z,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:u,lineNumber:188,columnNumber:13}},this.props.deleteDialog({account:o,onClose:this.cancelRemoval})),this.state.showDeleteConfirmation&&o&&this.props.deleteTitle&&s.createElement(i.Z,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:u,lineNumber:193,columnNumber:13}},s.createElement("header",{className:"dialog-header",__source:{fileName:u,lineNumber:194,columnNumber:15}},s.createElement("h1",{className:"dialog-title",__source:{fileName:u,lineNumber:195,columnNumber:17}},this.props.deleteTitle)),s.createElement("div",{className:"dialog-content",__source:{fileName:u,lineNumber:197,columnNumber:15}},s.createElement("p",{className:"error",__source:{fileName:u,lineNumber:198,columnNumber:17}},(0,a.Z)("Are you sure you would like to delete “$1”?",[this.props.isChain?o.label:o.name]))),s.createElement("footer",{className:"dialog-footer",__source:{fileName:u,lineNumber:208,columnNumber:15}},s.createElement("input",{type:"button",className:"danger",value:(0,a.Z)("verb","Delete"),onClick:"function"==typeof this.props.onRemove?this.props.onRemove.bind(this,n):null,__source:{fileName:u,lineNumber:209,columnNumber:17}}),s.createElement("input",{type:"button",value:(0,a.Z)("Cancel"),autoFocus:!0,onClick:this.cancelRemoval,__source:{fileName:u,lineNumber:217,columnNumber:17}}))),s.createElement("div",{className:l()({master:!0,"master-layout-double":0===t,"master-layout-single":1===t}),__source:{fileName:u,lineNumber:226,columnNumber:11}},s.createElement(r.Z,{items:e,emptyListGraphic:this.props.emptyListGraphic,emptyListString:this.props.emptyListString,renderListItem:this.props.renderListItem,onSelectItem:this.onSelectItem,onCreateItem:this.onCreateItem,isCreating:this.props.isCreating,moveItem:this.props.moveItem,onRemove:this.props.onRemove,filter:this.props.filter,selectedIndex:this.state.selectedIndex,onContextMenu:this.props.onContextMenu,onActivate:this.props.onActivate,onCancelCreate:this.onCancelCreate,addTipString:this.props.addTipString,considerRemovingItem:this.considerRemovingItem,deleteTipString:this.props.deleteTipString,supportDragAndDrop:this.props.supportDragAndDrop,mimeType:this.props.mimeType?this.props.mimeType.toString():void 0,isChain:this.props.isChain,renderCreateListItem:this.props.renderCreateListItem,__source:{fileName:u,lineNumber:232,columnNumber:13}})),m)):null}}const h=d},3120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(67294),i=n(51508),r=n(62434),a=n(63057),o=n(94184),l=n.n(o),c=n(42954),u=n(9776),m=n(82189),d=n(85612),h=n(34155),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortableList.jsx";function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends s.Component{constructor(e){super(e),g(this,"dropSupport",!1),g(this,"moveUpCombo",(0,m.$)("alt+up")),g(this,"moveDownCombo",(0,m.$)("alt+down")),g(this,"refItems",s.createRef()),g(this,"setSelected",((e,t)=>{void 0!==t&&(this.setState({isCreating:this.props.onCancelCreate&&t}),t&&this.props.onCreateItem?this.props.onCreateItem():!t&&this.props.onCancelCreate&&this.props.onCancelCreate()),this.setState({selectedIndex:e}),"function"==typeof this.props.onSelectItem&&this.props.onSelectItem(e)})),g(this,"loadItemAt",(e=>{this.setSelected(e),h.nextTick((()=>{const e=this.refItems.current;if(e){const t=e.querySelector(".item-selected");t&&t.focus()}}))})),g(this,"setIsCreating",(()=>{this.setSelected(this.props.items.length,!0),h.nextTick((()=>{const e=this.refItems.current;e&&(e.scrollTop=e.scrollHeight)}))})),g(this,"removeItem",(e=>{e>=this.props.items.length?("function"==typeof this.props.onCancelCreate&&this.props.onCancelCreate(),this.setSelected(this.props.items.length-1,!1)):"function"==typeof this.props.considerRemovingItem?this.props.considerRemovingItem():"function"==typeof this.props.onRemove&&this.props.onRemove(this.state.selectedIndex)})),g(this,"moveDown",(()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex+1<this.props.items.length&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex+1),this.loadItemAt(this.state.selectedIndex+1))})),g(this,"moveUp",(()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex>0&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex-1),this.loadItemAt(this.state.selectedIndex-1))})),g(this,"focusItem",((e,t)=>{if(this.state.isCreating||this.props.isCreating)return;this.state.selectedIndex!==e&&this.loadItemAt(e);const n=this.refItems.current;n&&n.focus(),t&&t.stopPropagation()})),g(this,"onDoubleClick",((e,t)=>{this.props.onActivate&&this.props.onActivate(e,t),t.stopPropagation()})),g(this,"clearDndTimer",(()=>{this.dndTimerId&&(clearTimeout(this.dndTimerId),delete this.dndTimerId)})),g(this,"onDragStartButton",((e,t)=>{this.props.supportDragAndDrop&&this.props.mimeType&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(this.props.mimeType,e))})),g(this,"onDragEnter",(e=>{this.props.supportDragAndDrop&&this.props.mimeType&&(e.preventDefault(),e.stopPropagation(),this.dropSupport=e.dataTransfer.types.some((e=>e===this.props.mimeType)),e.dataTransfer.dropEffect=this.dropSupport?"move":"none")})),g(this,"onDragLeave",(e=>{this.props.supportDragAndDrop&&(e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout((()=>{delete this.dndTimerId,this.setState({dropIndex:-1,dropPosition:""})}),c._p))})),g(this,"getDropPosition",(e=>{let t=0;const n=e.currentTarget.getBoundingClientRect(),s=n.height;return t=(e.clientY-n.top)/s,t<=.5?"above":"below"})),g(this,"onDragOverButton",((e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport){t.dataTransfer.dropEffect="move",this.clearDndTimer();const n=this.getDropPosition(t);this.state.dropIndex===e&&this.state.dropPosition===n||this.setState({dropIndex:e,dropPosition:n})}})),g(this,"onDragOver",(e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport){e.dataTransfer.dropEffect="move",this.clearDndTimer();const t=this.props.items.length>0?this.props.items.length-1:0,n="below";this.state.dropIndex===t&&this.state.dropPosition===n||this.setState({dropIndex:t,dropPosition:n})}})),g(this,"onDropButton",((e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport&&this.props.mimeType){const n=t.dataTransfer.getData(this.props.mimeType);if(void 0!==n){let s=e+("below"===this.getDropPosition(t)?1:0);n<s&&(s-=1),this.props.moveItem&&(this.props.moveItem(n,s),this.loadItemAt(s))}}this.setState({dropIndex:-1,dropPosition:""})})),g(this,"onDrop",(e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport&&this.props.mimeType){const t=e.dataTransfer.getData(this.props.mimeType);if(void 0!==t){let e=this.props.items.length;t<e&&(e-=1),this.props.moveItem&&(this.props.moveItem(t,e),this.loadItemAt(e))}}this.setState({dropIndex:-1,dropPosition:""})})),g(this,"onDragEnd",(()=>{this.setState({dropIndex:-1,dropPosition:""})})),g(this,"onKeyDown",(e=>{const t=i.Z.keyComboFromEvent(e.nativeEvent);if("tab"!==t&&this.props.items&&this.props.items.length>0){let n=!0;const s=this.props.items.length;switch(t){case"up":this.loadItemAt(this.state.selectedIndex<=0?s-1:this.state.selectedIndex-1);break;case"down":this.loadItemAt(this.state.selectedIndex+1>=s?0:this.state.selectedIndex+1);break;case"del":case"backspace":this.removeItem(this.state.selectedIndex);break;case"home":this.loadItemAt(0);break;case"end":this.loadItemAt(s-1);break;case"alt+up":this.moveUp();break;case"alt+down":this.moveDown();break;case"enter":case"space":this.props.onActivate&&(this.props.onActivate(this.state.selectedIndex,e),n=!1);break;default:n=!1}n&&e.preventDefault()}})),g(this,"getButtonClassByIndex",(e=>l()({item:!0,"item-default":this.props.items[e].isDefault,"item-selected":e===this.state.selectedIndex&&!(this.state.isCreating||this.props.isCreating),dragoverAbove:e===this.state.dropIndex&&"above"===this.state.dropPosition,dragoverBelow:e===this.state.dropIndex&&"below"===this.state.dropPosition}))),this.state={selectedIndex:this.props.selectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,dropIndex:-1,dropPosition:""}}componentWillUnmount(){this.clearDndTimer()}componentDidUpdate(e){if(e.items.length!==this.props.items.length){let t=-1;if(this.props.items.length>0)if(0===e.items.length)t=0;else if(this.props.items.length>e.items.length){const n=this.props.items.filter((({key:t})=>!e.items.some((({key:e})=>e===t))));t=this.props.items.indexOf(n[0])}else-1!==this.state.selectedIndex&&(t=Math.min(this.state.selectedIndex,this.props.items.length-1),t===this.props.items.length-1&&this.focusItem(t));this.setSelected(t,!1)}e.isCreating!==this.props.isCreating&&this.props.isCreating&&this.setIsCreating()}render(){const{isChain:e,items:t,filter:n,emptyListGraphic:i,emptyListString:r}=this.props,{selectedIndex:o}=this.state,l=this.state.isCreating||this.props.isCreating,c=!!(null!=o&&t[o])&&t[o].isDefault,m=0===t.length&&!l;return s.createElement(s.Fragment,null,s.createElement("div",{ref:this.refItems,className:"master-items",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop,onKeyDown:this.onKeyDown,tabIndex:m?-1:0,__source:{fileName:p,lineNumber:481,columnNumber:9}},m&&i&&r&&s.createElement("div",{className:"master-items-empty",dangerouslySetInnerHTML:{__html:`${i}<div>${r}</div>`},__source:{fileName:p,lineNumber:492,columnNumber:13}}),t.map(((t,i)=>s.createElement("button",{type:"button",title:e?t.label:t.name,className:this.getButtonClassByIndex(i),key:i,tabIndex:-1,draggable:this.props.supportDragAndDrop,onContextMenu:this.props.onContextMenu?this.props.onContextMenu.bind(this,i):null,onDragStart:this.onDragStartButton.bind(this,i),onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,i),onDrop:this.onDropButton.bind(this,i),onDragEnd:this.onDragEnd,onMouseDown:this.focusItem.bind(this,i),onDoubleClick:this.onDoubleClick.bind(this,i),__source:{fileName:p,lineNumber:501,columnNumber:15}},this.props.renderListItem((0,u.CH)(t.name,n),t)))),"function"==typeof this.props.renderCreateListItem&&l&&this.props.renderCreateListItem()&&s.createElement("button",{className:"item item-selected",__source:{fileName:p,lineNumber:532,columnNumber:13}},this.props.renderCreateListItem())),(this.props.optionsList||this.props.onRemove||this.props.moveItem)&&s.createElement("div",{className:"master-toolbar",__source:{fileName:p,lineNumber:542,columnNumber:11}},this.props.optionsList&&s.createElement("select",{className:"button-toolbar sortable-list-options",onChange:this.props.onCreateItem,title:this.props.addTipString,defaultValue:null,__source:{fileName:p,lineNumber:544,columnNumber:15}},this.props.optionsList&&this.props.optionsList.map((e=>s.createElement("option",{key:e.key,value:e.key,__source:{fileName:p,lineNumber:552,columnNumber:21}},e.value,""!==e.key&&` [${e.key}]`)))),this.props.onRemove&&s.createElement(s.Fragment,null,s.createElement("button",{className:"button-toolbar",style:this.props.optionsList?{pointerEvents:"none"}:null,tabIndex:this.props.optionsList?-1:null,title:this.props.addTipString,onClick:this.setIsCreating,disabled:this.props.onCancelCreate&&l,dangerouslySetInnerHTML:{__html:d.md4.medium},__source:{fileName:p,lineNumber:562,columnNumber:15}}),s.createElement("button",{className:"button-toolbar",title:this.props.deleteTipString,onClick:this.removeItem.bind(this,o),disabled:!l&&t.length<1||c,dangerouslySetInnerHTML:{__html:d.M2k.medium},__source:{fileName:p,lineNumber:572,columnNumber:15}})),this.props.moveItem&&s.createElement(s.Fragment,null,s.createElement("button",{className:"button-toolbar button-move-up",title:(0,a.Z)("Move Up ($1)",[this.moveUpCombo]),onClick:this.moveUp,dangerouslySetInnerHTML:{__html:d.OCp.medium},__source:{fileName:p,lineNumber:585,columnNumber:15}}),s.createElement("button",{className:"button-toolbar button-move-down",title:(0,a.Z)("Move Down ($1)",[this.moveDownCombo]),onClick:this.moveDown,dangerouslySetInnerHTML:{__html:d.yaZ.medium},__source:{fileName:p,lineNumber:591,columnNumber:15}}))))}}g(b,"contextType",r.Z);const N=b},95798:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(91744),i=n(91662),r=n(60253),a=n(37026),o=n(54471),l=n(8547),c=n(7509);const u=[1,2,5,10,30],m=(e,t)=>{const n=i.ZP.getPageByReloadId(e);if("tab"===t&&n&&(0,c.xl)(n.get("url")))return[];const m=a.Z.existingAlarms(),d=a.Z.getAlarmFromReloadId(e),h=u.map((n=>({type:"checkbox",checked:d?.periodInMinutes===n,handler:()=>{if("tab"===t){i.ZP.getSelectedPages(o.ZP.getId()).forEach((e=>{const s=e.getIn(["extData","ext_id"]),i={alarm:a.Z.getAlarmFromReloadId(s),id:s,interval:n,from:t};r.Z.createOrDestroyAlarm(i)}))}else{const s={alarm:d,id:e,interval:n,from:t};r.Z.createOrDestroyAlarm(s)}},commandName:"PERIODIC_RELOAD",parameter:n.toString(),...(0,l.Z)("$1 Minute","$1 Minutes",[n])})));return[...h,...[s.Z.separatorItem,{visible:Boolean(d?.id.includes(e)),handler:()=>{r.Z.destroyPeriodicAlarm(e)},commandName:"PERIODIC_RELOAD_DISABLE",parameter:"",...(0,l.Z)("timer","Disable")},{visible:m,handler:r.Z.destroyAllPeriodicAlarms,commandName:"PERIODIC_RELOAD_DISABLE",parameter:"all",...(0,l.Z)("timers","Disable All")}]]},d={getForActivePage:()=>{const e=i.ZP.unsafeGetActivePage(),t=e.getIn(["extData","ext_id"]);return e?m(t,"tab"):[]},getMenu:m,getHandlerByAction:(e,t)=>{let n;switch(e){case"PERIODIC_RELOAD":const e=i.ZP.unsafeGetActivePage().getIn(["extData","ext_id"]),s=a.Z.getAlarmFromReloadId(e),o=parseInt(t);n=()=>r.Z.createOrDestroyAlarm({alarm:s,id:e,interval:o,from:"tab"});break;case"PERIODIC_RELOAD_DISABLE":if("all"===t)n=r.Z.destroyAllPeriodicAlarms;else{const e=i.ZP.unsafeGetActivePage().getIn(["extData","ext_id"]);n=()=>r.Z.destroyPeriodicAlarm(e)}}return n}}},13654:(e,t,n)=>{"use strict";function s(e){return[...e.getElementsByTagName("div")].forEach(((e,t)=>{const n=e.parentNode;if(!n)return;const s=e.previousSibling&&e.previousSibling.nodeType===Node.TEXT_NODE,i=e.firstChild&&"BR"===e.firstChild.nodeName;if(s&&!i){const t=document.createElement("br");n.insertBefore(t,e)}const r=!e.nextSibling||"BR"===e.nextSibling.nodeName,a=e.lastChild&&"BR"===e.lastChild.nodeName;if(!r&&!a){const t=document.createElement("br");e.appendChild(t)}for(;e.firstChild;)n.insertBefore(e.firstChild,e);n.removeChild(e)})),e.innerText||""}n.d(t,{Z:()=>s})},32207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r,g:()=>i});var s=n(33696);const i="/resources/contact-person.png";function r(e){const t={toString:function(){return(0,s.gU)(this)},isEmpty:function(){return!(this.name||0!==this.emailAddresses.length||this.birthday||this.note||0!==this.postalAddresses.length||0!==this.phonenumbers.length||this.avatarUrl)},clearGenerated:function(){this.isGeneratedFromSentMail&&(this.isGeneratedFromSentMail=!1)}};return Object.assign(Object.create(t),e)}},52152:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(96675),i=n(51508),r=n(67294),a=n(62434),o=n(95077),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\Modal.jsx";function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends r.Component{constructor(...e){super(...e),c(this,"focusTrapRef",r.createRef()),c(this,"modalRef",r.createRef()),c(this,"closeModalHandler",(e=>{this.props.onRequestClose(e)})),c(this,"handleClickOutside",(e=>{this.props.ignoreClick&&!e.target.closest(".window-close")||this.closeModalHandler(e)})),c(this,"keyDownModal",(e=>{"Escape"!==e.key||this.props.ignoreEscape||(e.preventDefault(),this.closeModalHandler(e.nativeEvent))}))}componentDidMount(){this.props.ignoreEscape||i.Z.bind("meta+.",this.closeModalHandler)}componentWillUnmount(){this.props.ignoreEscape||i.Z.unbind("meta+.",this.closeModalHandler)}render(){return r.createElement(s.Z,{focusName:"focus_modal",forceTrap:!0,id:"modal-bg",ref:this.focusTrapRef,className:this.props.viewMode?this.props.viewMode:"slide",style:this.props.dialogWidth&&{width:this.props.dialogWidth,minWidth:"unset"},__source:{fileName:l,lineNumber:62,columnNumber:7}},r.createElement("div",{onKeyDown:this.keyDownModal,ref:this.modalRef,__source:{fileName:l,lineNumber:72,columnNumber:9}},this.props.children))}}c(u,"contextType",a.Z);const m=(0,o.Z)(u)},15085:(e,t,n)=>{"use strict";n.d(t,{d:()=>l,K:()=>o});var s=n(51602),i=n(30381),r=n.n(i),a=n(43393);class o extends((0,a.Record)({title:"",url:"",query:""})){}class l extends((0,a.Record)({text:"",startTime:r()().startOf("day"),endTime:r()().endOf("day"),rangePicker:"today",displayMode:"day",parsedFilter:new o,dayPickerVisible:!1,moreInfoVisible:!0,monthEntriesVisible:!0,searchURL:!0,searchTitle:!0,range:null,sortOrder:s.Z.DESCENDING_SORT,sortField:"visitTime"})){}},53728:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(62434),i=n(67294);const r=["mousedown","touchstart"];function a(e,t,n="ignore-react-onclickoutside",a=!1,o=r){const{document:l,Element:c}=(0,i.useContext)(s.Z);(0,i.useEffect)((()=>{if(!a)return o.forEach((e=>l.addEventListener(e,s))),()=>{o.forEach((e=>l.removeEventListener(e,s)))};function s(s){const i=e(),r=t();if(!i||!r)return;let a=s.target;for(;a instanceof c;){const e=a;if(Array.isArray(n)){if(n.some((t=>e.classList.contains(t))))return}else if(e.classList.contains(n))return;a=a.parentNode}s.target instanceof c&&!i.contains(s.target)&&r(s)}}),[c,a,l,t,e,n,o])}},12595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(65792),i=n.n(s),r=n(21622),a=n(74686),o=n(30074);let l=!1;const c=i()("black");let u,m=c,d=c;const h={_onPrefsCacheChanged:function(e,t,n){n===o.kRazerChromaEnabled&&!0===t&&h.init()},isInitialized:function(){return l},setInitCallback:function(e){u=e},onChromaReady:function(){l||(l=!0,d!==c&&(h.setColor(d),d=c),u&&u(),a.Z.utilities.onRazerChromaReady.removeListener(this.onChromaReady))},init:function(){l=!1,r.ZP.addListener([o.kRazerChromaEnabled],this._onPrefsCacheChanged),a.Z.utilities.onRazerChromaReady.addListener(this.onChromaReady),a.Z.utilities.isRazerChromaReady((e=>{e&&this.onChromaReady()}))},setColor:function(e){if(l){if(m.css()!==e.css()){const[,,t]=e.hsl();t<.1&&(e=e.brighten(1));const n=[],s=i().bezier([m.toString(),e.toString()]);for(let e=1;e<11;e++){const[t,i,r]=s(e/10).rgb();n.push({red:t,green:i,blue:r})}a.Z.utilities.setRazerChromaColor(n,(e=>{e||console.warn("Error setting Razer Chroma color")})),m=e}}else d=e}},p=h},25834:(e,t,n)=>{"use strict";n.d(t,{BZ:()=>r,Ve:()=>a,JX:()=>o,up:()=>u});var s=n(80943),i=n(2121);function r(e){return e.replace(/["~*\/:<>?\\|\p{Cc}\p{Cf}]+/gu," ").replace(/^[ .]+|[ .]+$/g,"")}function a(e,t){c(l(e),r(e.filename),t)}function o(e){const t=l(e),n=r(e.filename);return{suggestedFilename:n,url:t,request:{deny:()=>URL.revokeObjectURL(t),allow:e=>c(t,n,e)}}}function l(e){const t=u(e);return URL.createObjectURL(t)}function c(e,t,n){i.Z.downloads.download({url:e,filename:t,saveAs:"saveas"===n},(t=>{URL.revokeObjectURL(e),"open"===n&&s.Z.addOpenAfterDownload(t)}))}function u(e){const t=e.content,n=e.mimeType;return new Blob([t],{type:n})}},8754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(62366),i=n(85834),r=n(38470),a=n(33696);function o(e){let t="text/calendar; charset=utf-8",n="";"string"==typeof e.content&&(n=(0,i.tV)(e.content),"string"!=typeof n&&(n=""));const r=n.match(/METHOD:\s*(\w+)/);r&&(t+=`; method=${r[1]}`);const a=new s.Z(t);return a.setContent(n),a}const l={build:async function(e,t,n){let i;const l=await(0,r.iT)(t),c=n.filter((e=>"application/ics"===e.mimeType));if("string"==typeof l){const e=new s.Z("text/plain; charset=utf-8");e.setContent(l),c.length?(i=new s.Z("multipart/alternative"),i.appendChild(e),i.appendChild(o(c[0]))):i=e}else{const e=(0,r.yy)(t);i=new s.Z("multipart/alternative");const a=new s.Z("text/plain; charset=utf-8");a.setContent(e),i.appendChild(a);const l=n.filter((e=>e.id)),u=new s.Z("text/html; charset=utf-8");if(u.setContent(t),l.length>0){const e=new s.Z("multipart/related");e.appendChild(u),l.forEach((t=>e.createChild(t.mimeType,{filename:t.filename,isEncoded:"string"==typeof t.content}).setContent(t.content).setHeader("Content-Disposition","inline").setHeader("Content-Id",t.id))),i.appendChild(e)}else i.appendChild(u);c.length&&i.appendChild(o(c[0]))}const u=n.filter((e=>!e.id));let m;return u.length>0?(m=new s.Z("multipart/mixed"),m.appendChild(i),u.forEach((e=>{const t=m.createChild(e.mimeType,{filename:e.filename,isEncoded:"string"==typeof e.content});t.setHeader("Content-Disposition","attachment"),t.setContent(e.content)}))):m=i,m.addHeader("message-id","<"+e.messageId+">"),m.addHeader("from",(0,a.Rz)(e.from)),m.addHeader("to",(0,a.Rz)(e.to)),m.addHeader("cc",(0,a.Rz)(e.cc)),m.addHeader("subject",e.subject),m.addHeader("date",new Date(e.sentDate).toUTCString().replace(/GMT/,"+0000")),e.inReplyTo&&e.inReplyTo.length>0&&m.addHeader("in-reply-to","<"+e.inReplyTo+">"),e.references&&e.references.length>0&&m.addHeader("references","<"+e.references.join("> <")+">"),m.build()}}},68131:(e,t,n)=>{"use strict";let s;n.d(t,{Z:()=>i});const i={get:function(){return s},set:function(e){s=e}}},32145:(e,t,n)=>{"use strict";n.d(t,{o:()=>i,Z:()=>r});var s=n(51110);function i(e){delete e.isParent,delete e.parentId,delete e.isChild,delete e.children,delete e.unreadInThread}const r={getThreadsAsTree:function(e,t=!0){if(0===e.length)return[];let n;t||e.reverse();let r=[];const a=[e[0]];i(e[0]),e[0].level=0;for(let t=1;t<e.length;t++){const o=e[t-1],l=e[t];i(l),l.level=l.threadKey.length-2,l.threadKey[0]===o.threadKey[0]&&l.threadKey[1]===o.threadKey[1]?((!n||l.threadKey.length>o.threadKey.length)&&(n?r.push(n):r.push(o),n=o,o.isParent=!0),r.length>0&&l.threadKey.length<o.threadKey.length&&(n=r.pop()),l.parentId=n.id,l.isChild=!0,n.children=n.children||[],n.children.push(l),s.Z.call(l.sources)||n.unreadInThread||(n.unreadInThread=!0,r.forEach((e=>e.unreadInThread=!0)))):(a.push(l),n=void 0,r=[])}return t?a:a.reverse()}}},96244:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s=n(78635),i=n(63057),r=n(74368),a=n(2324);const o={call:async function(e){0!==e.searchListIds.length?await a.Z.flaggingQueue.add(e):console.warn("Not queueing flag update request with no searchListIds")}};var l=n(63306),c=n(50063),u=n(35100);function m(e,t,n,s){return d(e,{[t]:n},void 0,s)}function d(e,t,n=new Map,i){const a=e.map((e=>e.id)),c=new Map,m=[];if(e.forEach((e=>{const s={},i=(0,u.hY)(e.flags,t);e.flags=s.flags=i;const r=n.get(e.id);if(r&&r.size>0){const t=new Map,n=new Map;r.forEach(((i,r)=>{t.set(r,i),!0===i.read&&(e.unseen=s.unseen=!1);const a=e.sources.get(r);if(a){const e={};for(const t of Object.keys(i))i[t]!==a[t]&&(e[t]=a[t]);Object.keys(e).length>0&&n.set(r,e)}})),s.sources=t,c.set(e.id,n)}const{id:a}=e;m.push({id:a,updates:s})})),r.ZP.log("Mail","add to flagging queue",a,n,t),o.call({searchListIds:a,sourcesPerSle:n,flagUpdates:t}),s.Z.updateFlags(),i){const n={};for(const e of Object.keys(t))n[e]=!t[e];l.Z.push({operation:"setFlags",updates:n,sourcesPerSle:c,updateItems:e})}return m}const h={setRead:function(e,t){const n=[],s=new Map;return e.forEach((e=>{const{id:i,sources:r}=e,a=new Map;r.forEach(((e,n)=>{e.read!==t&&a.set(n,{read:t})})),a.size>0&&(n.push(e),s.set(i,a))})),d(e,{},s,!0)},setFlagged:function(e,t){return m(e,c.T4.FLAGGED,t,!0)},setForwarded:function(e,t){return m(e,c.T4.FORWARDED,t,!1)},setReplied:function(e,t){return m(e,c.T4.ANSWERED,t,!1)},setCustomFlags:function(e,t,n=new Map,s=!0){return d(e,t,n,s)},translateFlag:function(e){switch(e){case c.T4.RED:return(0,i.Z)("flag","Red");case c.T4.ORANGE:return(0,i.Z)("flag","Orange");case c.T4.YELLOW:return(0,i.Z)("flag","Yellow");case c.T4.GREEN:return(0,i.Z)("flag","Green");case c.T4.BLUE:return(0,i.Z)("flag","Blue");case c.T4.PURPLE:return(0,i.Z)("flag","Purple");case c.T4.GRAY:return(0,i.Z)("flag","Gray");default:return e}}}},97227:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>o,mq:()=>l,S9:()=>c,Vd:()=>u});var s=n(21622),i=n(50063),r=n(30074);function a(e){const t=s.ZP.get(r.kMailAccounts).find((t=>t.MAIL_EMAIL===e));return t&&t.accountType}function o(e){return a(e)===i.s9.IMAP}function l(e){const t=s.ZP.get(r.kMailAccounts).find((t=>t.MAIL_EMAIL===e));return t&&t.accountType===i.s9.IMAP&&!t.offline}function c(e){const t=s.ZP.get(r.kMailAccounts).find((t=>t.MAIL_EMAIL===e));return t&&t.offline}function u(e){return a(e)===i.s9.POP}},76955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(24383),i=n(29319),r=n(19550),a=n(50063);function o(e,t){if(t.deleted)return!0;const n=s.Z.get(e);if(!n)throw new Error("Source filter not found "+e);const{accountId:r,path:o}=n;return i.Z.getFolderType(r,o)===a.uT}const l={isMessageDeleted:function(e,t,n){const l=new Map([...e.entries()].filter((([e,t])=>{const r=s.Z.get(e);if(!r)return console.error("Source filter not found "+e),!1;const{accountId:o,path:l}=r,c=i.Z.getFolderType(o,l);return!(n&&c!==a.Nz||!n&&c===a.Nz)})));if((0,r.Z)(l))return!1;const c=t&&l.get(t.id);if(t&&c){if(c.deleted)return!0;const{accountId:e,path:n}=t;return i.Z.getFolderType(e,n)===a.uT}return l.size>0&&[...l].every((([e,t])=>o(e,t)))},isSourceDeleted:o}},19550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(24383),i=n(29319),r=n(50063);const a=function(e){return[...e.entries()].some((([e,t])=>{if(t.deleted)return!1;const n=s.Z.get(e);if(!n)return console.error("Source filter not found "+e),!1;const{accountId:a,path:o}=n;return i.Z.getFolderType(a,o)===r.Hd}))}},31054:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>i});const i=new class{constructor(){s(this,"mailAddresses",[]),s(this,"addressMap",new Map),s(this,"nameMap",new Map),s(this,"clear",(()=>{this.mailAddresses=[],this.addressMap=new Map,this.nameMap=new Map})),s(this,"add",(e=>{const{address:t,name:n=""}=e,s=this.addressMap.get(t)||[],i=this.nameMap.get(n)||[];let r=s.find((e=>i.includes(e)));return void 0!==r||(r=this.mailAddresses.length,this.mailAddresses.push(e),0===s.length?this.addressMap.set(t,[r]):s.push(r),0===i.length?this.nameMap.set(n,[r]):i.push(r)),r})),s(this,"get",(e=>e.map((e=>{if(void 0===this.mailAddresses[e])throw new Error(`MailAddressCache.get: Requested index ${e} not found in cache.`);return this.mailAddresses[e]}))))}}},26808:(e,t,n)=>{"use strict";n.d(t,{vE:()=>i,Ds:()=>r});n(91662);var s=n(44025);function i(e){return!!s.jk.matchUrl(s.jk.internalUrl("mailpage","composer"),e)}function r(e){return!!s.jk.matchUrl(s.jk.internalUrl("mailpage","message"),e)}},32140:(e,t,n)=>{"use strict";function s(e){const t=e?e.substring(e.indexOf("@")+1):"vivaldi.com",n=new Uint32Array(2);return window.crypto.getRandomValues(n),Date.now()+"."+n.join(".")+"@"+t}n.d(t,{Z:()=>s})},81270:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(88279),i=n(44025);function r(e){var t="message/"+e.id,n=e.subject,r=i.jk.internalUrl("mailpage",t,n);s.Z.openURL(r)}},95582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var s=n(78635),i=n(64059),r=n(52581),a=n(24141),o=n(8754),l=n(51495),c=n(92144),u=n(63057),m=n(66609),d=n(74368),h=n(50063);const p=function(e,t,n,s){if(this.alreadySending)return void d.ZP.log("Mail",["smtp","onidle"],`[${e.MAIL_EMAIL}]Already Sending!`);d.ZP.log("Mail",["smtp","onidle"],`[${e.MAIL_EMAIL}]`),this.alreadySending=!0;const i=[...t,...n,...s].map((e=>e.address));this.useEnvelope({from:e.MAIL_EMAIL,to:i})},g=function(e,t,n){d.ZP.log("Mail",["smtp","onready"],"failedRecipients:",n.length),n.length>0?t({message:(0,u.Z)("Rejected recipients: $1",[n.join()])}):(this.send(e),this.end())},b=function(e,t,n,s){d.ZP.log("Mail",["smtp","ondone"],`subject:"${e}" success:${s}`),s?c.Z.setStatus((0,u.Z)("Sent message: $1",[e]),h.QM):c.Z.setStatus((0,u.Z)("Failed to send message: $1",[e])),this.quit(),s?t():n((0,u.Z)("Failed to send message: $1",[e]))},N=function(e,t,n){n?(d.ZP.log("Mail",["smtp","onclose"],"Closed because of an error!"),t({message:(0,u.Z)("SMTP client closed on error")})):(d.ZP.log("Mail",["smtp","onclose"],""),e())},f=function(e,t,n){d.ZP.log("Mail",["smtp","onclose"],`[${e.MAIL_EMAIL}]${n.message}`);const s=e.MAIL_SMTP_SERVER||"",i=e.MAIL_SMTP_USER||"";c.Z.setStatus((0,u.Z)("$1 - Server: $2 - User: $3",[n.message,s,i])),this.quit(),t(n)},_={send:function(e,t,n,s,i,r){return d.ZP.log("Mail",["smtp","send"],`[${e.MAIL_EMAIL}]subject:"${t}"`),-1===e.MAIL_SMTP_PORT?(console.warn("not gonna send as the smtp port is missing"),c.Z.setStatus((0,u.Z)("SMTP client not configured for sending mail")),Promise.reject()):(c.Z.setStatus((0,u.Z)("Sending")),new Promise(((a,o)=>{m.Z.getSMTPClient(e).then((l=>{l.onidle=p.bind(l,e,n,s,i),l.onready=g.bind(l,r,o),l.ondone=b.bind(l,t,a,o),l.onerror=f.bind(l,e,o),l.onclose=N.bind(l,a,o),l.connect()})).catch((e=>o(e)))})))}};var v=n(6478),E=n(21622),C=n(96244),w=n(12006),y=n(91113),S=n(55079),T=n(63145),k=n(99890),I=n(31491),A=n(74311),Z=n(86802),P=n(50377),D=n(91355),M=n(93506),O=n(38470),x=n(30074),L=n(65531);let R=!1;async function B(e,t){t||(e.queued=!0);const n=await(0,y.Z)(h.of,h.J8,h.fZ,[e],{filteringPriority:h.Un.HIGH}),[i]=n;return a.Z.updateIndex({addedSles:n}),P.Z.filter(),s.Z.updateThreads(),i}function F(e,t){if(0===e.length)return void c.Z.setStatus((0,u.Z)("No messages to send"),2e3);if(R)return;R=!0;let n=0;const m=l.C.getByFolder(h.of,h.J8);if(m)return c.Z.setStatus((0,u.Z)("Preparing to send $1 messages",[e.length]),2e3),e.reduce(((e,l)=>e.then((()=>{const e=l.sources.get(m.id);if(e&&!e.deleted&&(t||!l.queued))return I.Z.call(l.id).then((e=>{if(e)return async function(e){if(!e.from||0===e.from.length)throw new Error((0,u.Z)("Can not send. No sender specified!"));const t=await w.Z.loadAllAccounts(),n=e.from.map((e=>e.address)),l=t.find((e=>e.MAIL_EMAIL===n[0]));if(!l)throw new Error((0,u.Z)("Can not send. No account set up for sender $1",[n[0]]));const c=l.MAIL_EMAIL,m=r.Z.getFoldersOfType(c,h.Nz);let d,p,g=!1;m&&m.length?(d=c,p=m[0].path,g=!0):(d=h.of,p=h.N1);const b=e.bodyParts&&e.bodyParts[0].content;if("string"!=typeof b)throw new Error("Could not switch to raw because first bodyPart is not string, it is: "+typeof b);const N=1e3*Math.floor(Date.now()/1e3),f=(0,O.yN)(e.bodyParts),E=await o.Z.build({...e,sentDate:N},b,f),{subject:y,to:I,cc:D,bcc:L}=e;await _.send(l,y,I,D,L||[],E);const R={searchList:{sentDate:N},messages:{sentDate:N},threading:{sentDate:N}},B={searchList:["queued"]};g&&(await(0,M.Z)(d,N,e.id,E),B.messages=["bodyParts"]);const F={addedProperties:R,removedProperties:B,filteringPriority:h.Un.HIGH},{sleUpdate:U}=await(0,Z.Z)(e.id,h.of,h.J8,d,p,F);d!==h.of&&T.Z.call({type:"FILTERS_SLES",priority:h.Un.HIGH,searchListIds:[e.id],folderIds:[[h.of,h.N1]]}),await(0,k.Z)([e.id]),a.Z.updateIndex({sleUpdates:[U]}),P.Z.filter(),v.Z.set(x.kMailLastSentFrom,l.MAIL_EMAIL),g&&l.accountType===h.s9.IMAP&&(l.uploadSent??1)?await(0,S.Z)({accountId:c,path:p,operation:"BUFFER_OPERATION_UPLOAD_MESSAGE",message:E,searchListId:e.id}).then((()=>s.Z.flushBuffer())):l.accountType===h.s9.IMAP&&(l.uploadSent??1)&&console.warn("No sent folder found for account",c);const V=e.forwarded||e.replied;if(void 0!==V){const t=await(0,A.Z)(V);if(!t)return void console.warn(`Referenced message with id ${V} not found`);const n=e.forwarded?C.Z.setForwarded([t],!0):C.Z.setReplied([t],!0);a.Z.updateIndex({sleUpdates:n})}i.Z.addIfNotAddressExists(e.to)}(e).then((()=>++n)).catch((e=>{console.error(e),(0,L.c)({title:e.message||e})}))}))}))),Promise.resolve()).then((()=>{R=!1,n>0&&E.ZP.get(x.kMailNotifications)&&E.ZP.get(x.kMailNotificationsOnSuccessfullySent)&&(0,L.c)({title:(0,u.Z)("$1 message successfully sent","$1 messages successfully sent",[n]),icon:"resources/mail_notification_icon.png"})})).catch((e=>{R=!1,console.error(e)}));console.error("Outbox filter missing!")}const U={sendAll:function(e=!0){D.Z.m3GetAll().then((t=>F(t,e)))},sendExternalMessage:async function(e,t=!0){const n=await B(e,t);t&&U.sendSelected([n])},sendForAccount:function(e){D.Z.m3GetAll().then((t=>F(t.filter((t=>t.from&&t.from[0]&&t.from[0].address===e)),!0)))},sendSelected:function(e){F(e,!0)},storeMessage:B},V=U},55039:(e,t,n)=>{"use strict";n.d(t,{U:()=>v,y:()=>_});var s=n(2324),i=n(92144),r=n(63057),a=n(74686);async function o(e){const{currentPosition:t,searchListIds:n}=e;if(!n)return void console.error(`Task ${e.taskName} should have searchListIds array`);if(0===n.length||t>=n.length)return;const o=n.length;let l=t;const c=1e4;await async function t(){const u=n.slice(l,l+c);await function(e){return new Promise((t=>{try{a.Z.mailPrivate.deleteMessages(e,(e=>{e||console.warn("Failed to remove messages from FTS db"),t()}))}catch(t){console.error(`Failed to remove messages: ${e.join()}`,t)}}))}(u),await s.Z.systemTasks.update(e.id,{currentPosition:l+u.length}),u.length>=c?(l+=c,i.Z.setStatus((0,r.Z)("Remove deleted entries from search database: $1/$2",[l,o])),await t()):i.Z.setStatus((0,r.Z)("Remove deleted entries from search database: $1/$2",[o,o]),3e3)}(),s.Z.systemTasks.delete(e.id)}var l=n(51495),c=n(21622),u=n(74782),m=n(31491),d=n(74311),h=n(19162),p=n(43154),g=n(36738),b=n(45527),N=n(30983),f=n(30074);async function _(){const e=await s.Z.systemTasks.toArray();for(const t of e)await v(t)}async function v(e){"restore_full_text_search_db"===e.taskName?await async function(e){const t=await s.Z.searchList.toCollection().primaryKeys();let n=t.indexOf(e.currentPosition);n<0&&(n=0);const a=t.length;if(a<1)return;i.Z.setStatus((0,r.Z)("Building text-search database: $1/$2",[n,a]));let o=[];for(let _=n;_<t.length;_++){if(c.ZP.get(f.kMailIsTurnedOff)){i.Z.setStatus((0,r.Z)("Mail client turned off - Stopped building text-search database"),3e3);break}n++;const v=t[_],E=await(0,d.Z)(v);if(!E){console.error(`Message ${v} not found in searchList table`);continue}const C=await m.Z.call(v);if(!C){console.error(`Message ${v} not found in messages table`);continue}const{subject:w,to:y,cc:S,from:T,replyTo:k}=C;let I="";for(const e of E.sourceFilterIds){const t=l.C.get(e);if(!t){console.error(`Filter not found for sourceFilterId ${e} and searcList entry ${v}`);continue}const{accountId:n}=t,s=await p.Z.call(n,v,E.sentDate);if(s){const e=(0,b.PW)((0,b.Zp)(s));if(!e){console.warn("Message exists on disk but is empty",n,v);continue}const t=await h.Z.parse(s,e.mimeTree),i=(0,N.H)(t.bodyParts);I&&I.trim()!==i.trim()?(console.warn(`Entry ${v} has more than one copy on disk and they don't agree`,I,i),i.length>I.length&&(I=i)):I=i}}o.push({searchListId:v,subject:w,body:I,to:(0,u.Z)(y),cc:(0,u.Z)(S),from:(0,u.Z)(T),replyTo:(0,u.Z)(k)}),(o.length>=20||n>=a)&&(await(0,g.Z)(o),await s.Z.systemTasks.update(e.id,{currentPosition:v}),i.Z.setStatus((0,r.Z)("Building text-search database: $1/$2",[n,a])),o=[],n>=a&&s.Z.systemTasks.delete(e.id))}}(e):"delete_full_text_search_entries"===e.taskName?await o(e):console.error("task not supported",e)}},63306:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>i});const i=new class{constructor(){s(this,"buffer",[]),s(this,"maxSize",200)}clear(){this.buffer=[],this.maxSize=200}push(e){this.buffer.length===this.maxSize&&this.buffer.shift(),this.buffer.push(e)}pop(){return this.buffer.pop()}removeEntries(e){this.buffer.forEach((t=>{t.updateItems=t.updateItems.filter((t=>!e.has(t.id)))}))}}},93506:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(42948),i=n(2121),r=n(74686);function a(e,t,n,a){return o=a,l=(0,s.Z)(e,t,n),new Promise(((e,t)=>{const{pathArray:n,fileName:s}=l;r.Z.mailPrivate.writeTextToMessageFile(n,s,o,(()=>{i.Z.runtime.lastError&&t({lastError:i.Z.runtime.lastError,pathArray:n,fileName:s}),e()}))})).catch((e=>{console.warn("writeToDisk %o",e)}));var o,l}},62434:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=(0,n(67294).createContext)(window)},40594:(e,t,n)=>{"use strict";n.d(t,{w:()=>r,Y:()=>a});var s=n(63057),i=n(30074);const r={BOOKMARK_NICKNAME:"bookmarkNick",BOOKMARK_FOLDER:"bookmarkFolder",BOOKMARK:"bookmark",CLOSED_TAB:"closedTab",NOTE_ADD:"noteAdd",COMMAND_KEYWORD:"commandKeyword",NOTE_OPEN:"note",COMMAND:"command",CALCULATOR:"calculator",HISTORY:"history",KEYWORDSEARCH:"keywordSearch",OPEN_TAB:"openTab",SEARCH:"search",TITLE:"title",URL:"url",CONTENT_SCRIPT:"contentScript",EXTENSION:"extension",COMMAND_CHAIN:"commandChain"},a=[{key:"CALCULATOR",name:(0,s.Z)("Calculator"),pref:i.kQuickCommandsShowCalculator},{key:"NORMAL_COMMAND",name:(0,s.Z)("Commands")},{key:"COMMAND_CHAIN",name:(0,s.Z)("Command Chains")},{key:"KEYWORD_SEARCH",name:(0,s.Z)("Web Search & URL Entry")},{key:"OPEN_TABS",name:(0,s.Z)("Open Tabs")},{key:"BOOKMARK_ITEM_OR_FOLDER",name:(0,s.Z)("Bookmarks"),pref:i.kQuickCommandsShowBookmarks},{key:"NOTES_SEARCH",name:(0,s.Z)("Notes"),pref:i.kQuickCommandsShowNotes},{key:"HISTORY",name:(0,s.Z)("Browsing History"),pref:i.kQuickCommandsShowHistory},{key:"EXTENSIONS",name:(0,s.Z)("Extensions"),pref:i.kQuickCommandsShowExtensions},{key:"PAGE_ACTIONS",name:(0,s.Z)("Page Actions"),pref:i.kQuickCommandsShowPageActions},{key:"CLOSED_TABS",name:(0,s.Z)("Closed Tabs")}]},69291:(e,t,n)=>{"use strict";n.d(t,{g2:()=>ge,_U:()=>B,_W:()=>j,hT:()=>W,GO:()=>Q,Xz:()=>te,hm:()=>Y,oE:()=>se,CD:()=>$,$J:()=>z,S4:()=>de,IZ:()=>oe,sh:()=>me,Dj:()=>ae,JC:()=>re,nX:()=>J,pN:()=>q,s1:()=>ee,xh:()=>ie,Kk:()=>le,JQ:()=>X,ue:()=>K,Gr:()=>ce,vD:()=>V,de:()=>ne,Xf:()=>pe,hV:()=>ue,AE:()=>H});var s=n(67776),i=n(61858),r=n(71905),a=n(26729),o=n.n(a),l=n(93737),c=n(39412),u=n(88279),m=n(91662),d=n(21622),h=n(82535),p=n(88652),g=n(54471),b=n(63057),N=n(2121),f=n(97748),_=n(8547),v=n(40037);const E=(0,_.Z)("keyword","default"),C=(e,t,n)=>t.every((t=>{const s=e.label.toLowerCase(),i=e.labelEnglish.toLowerCase();return n?s.includes(t)||i.includes(t):s.includes(t)}));function w(e,t,n){const s=e.trim().toLowerCase().split(" ").filter(Boolean),i=t.filter((e=>function(e,t,n){return((e,t,n)=>{const{keyword:s}=e;if(!s)return;const{validity:i}=s;let r=!1,a=!1,o=t.find((e=>{let t=!1;return r=n&&e===E.labelEnglish||e===E.label,i&&(t=i.test(e)),isNaN(e)||(a=!0),r||a||t}));const l=t.filter((e=>!e.includes(String(o))));if(l.length&&C(e,l,n)){const{min:t,max:n,type:i,defaultValue:l}=s;return r?Object.assign(e,{foundKeyword:!0},{paramValue:l}):("number"==typeof o||a?o=(0,v.default)(o,t,n):"mixed"===i&&(o=o?{keyword:s,param:o}:void 0),Object.assign(e,{paramValue:o},{foundKeyword:Boolean(o)}))}})(e,t,n)||C(e,t,n)}(e,s,n)));return i}var y=n(74686),S=n(46418),T=n(46217),k=n(40594),I=n(7509),A=n(39023),Z=n(93851),P=n(92578),D=n(31390),M=n(85612),O=n(30074),x=n(82189),L=n(44025);const R={"⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9"},B=20,F="change",U=new T._b,V=e=>{const t=(0,D.mT)(e),n=(0,D.Mr)(e),s=(0,f.Z)(e),i=m.ZP.unsafeGetActivePage().isMailPage,r=d.ZP.get(O.kQuickCommandsOpenUrlInNewTab);return t||i?(s.inCurrent=!1,s.inBackground=!0):n&&r?s.inCurrent=!0:r&&(s.inCurrent=!1,s.inBackground=!1),s},H=e=>{if("number"==typeof e||!isNaN(e))return Number(e);const{param:t}=e,{min:n,max:s}=e.keyword,i=String.fromCharCode(39),r=String.fromCharCode(34),a=t.indexOf(i),o=t.indexOf(r),l=a>0&&t.substring(0,a)||0,c=o>0&&t.substring(a+1,o)||0,u=60*parseInt(l)+parseInt(c);return(0,v.default)(u,n,s)};async function W(e){const t=(await r.Z.getVivDefinedCommands()).map((e=>{const t=(0,Z.xU)(e.name);return{...e,...t&&{keyword:t}}})).concat(S.Y);for(const n of e){const{key:e,param:s}=n,i=t.find((t=>t.guid.includes(e)));if(!i){console.error(`chainedCommandExecution: Command ${e} not found`);break}const{action:r,keyword:a}=i,o=a?.defaultValue;let l=void 0!==s?s:o;if(void 0!==l&&a)switch(typeof l!==a.type&&"mixed"!==a.type&&(l=a.defaultValue),typeof l){case"string":l=l.length?l:a.defaultValue;break;case"number":l=(0,v.default)(l,a.min,a.max)}l?await r(l):await r()}}const z=e=>{const{searchText:t,chains:n,shortcuts:s}=e,i=t.toLowerCase().split(" "),r=d.ZP.get(O.kQuickCommandsLimitResults),a=d.ZP.get(O.kQuickCommandsSearchPriority);let o=n.filter((e=>i.every((t=>e.label.toLowerCase().includes(t)&&e.chain.length)))).map((e=>{const{chain:t,key:n,label:i,name:r}=e,o=s.find((e=>e.name===r));return{name:i,id:n,meta:o&&o.shortcuts?.length?o.shortcuts[0]:"",type:k.w.COMMAND_CHAIN,selectPriority:a.indexOf("COMMAND_CHAIN"),action:()=>W(t)}}));return r&&(o=o.slice(0,B)),j({title:"Command Chains",array:o})},G=e=>e.reduce(((e,t)=>e.concat(t.children?G(t.children):t)),[]);function K(e,t){const n=e.toLowerCase(),s=t.toLowerCase();return n.indexOf(s)}function j(e){const{title:t,array:n,translateParam:s,subtitle:i}=e;return n.length?(n.unshift({name:(0,b.Z)(t),type:k.w.TITLE,subtitle:i&&s?(0,b.Z)(i,s):null,count:n.length}),n):[]}function Y(e){const t=i.ZP.getNicknamed(e,!1).map((e=>{const{url:t=""}=e;return{folderId:e.children?e.id:void 0,type:k.w.BOOKMARK_NICKNAME,name:e.title,url:e.children?void 0:t,selectPriority:-1,nickname:e.nickname,faviconUrl:e.children?M._TQ.small:L.jk.getFavicon(t)}}));return j({title:(0,b.Z)("Nickname Match"),array:t})}function $(e){const t=e.replace(/,/g,".").replace(/x/gi,"*").replace(/([^\s])([⁰¹²³⁴⁵⁶⁷⁸⁹]+)/gu,"$1 ^ $2 ").replace(/[⁰¹²³⁴⁵⁶⁷⁸⁹]/gu,(e=>R[e]));if(!t)return[];let n;try{n=U.evaluate(t)}catch(e){}if(void 0===n||"function"==typeof n)return[];let s=n;const i=`${String.fromCharCode(8722)}0`,r=`${String.fromCharCode(45)}0`,a=d.ZP.get(O.kQuickCommandsSearchPriority);s!==i&&s!==r||(s="0");return[{name:s.toString(),searchString:e,selectPriority:a.indexOf("CALCULATOR"),type:k.w.CALCULATOR}]}function X(e,t){const n=e.toLowerCase().split(" "),s=d.ZP.get(O.kQuickCommandsSearchPriority),i=t.filter((e=>he(e.title||"",e.url||"",n))).map((e=>{const{id:t,url:n=""}=e;if(void 0===t)throw new Error("QuickCommandSearch.getOpenTabs: Expected number id");return{name:L.jk.getDisplayTitle(e),url:(0,I.xl)(n)?"":n,type:k.w.OPEN_TAB,selectPriority:s.indexOf("OPEN_TABS"),pageId:t,windowId:e.windowId,pageUrlForFavicon:n,faviconUrl:L.jk.getFavicon(n)}}));return j({title:(0,b.Z)("Tabs"),array:i})}async function Q(){return new Promise((e=>{N.Z.management.getAll((t=>e(t)))}))}async function q(){return new Promise((e=>{y.Z.extensionActionUtils.getToolbarExtensions((t=>{const n=t.map((e=>({badgeIcon:e.badgeIcon,id:e.id})));e(n)}))}))}function J(e,t,n){const s=d.ZP.get(O.kQuickCommandsSearchPriority),i=d.ZP.get(O.kQuickCommandsLimitResults),r=e.toLowerCase().split(" ");let a=t.filter((e=>{const t=e.name.toLowerCase(),n=e.shortName.toLowerCase();return!e.isApp&&r.every((e=>t.includes(e)||n.includes(e)))})).map((e=>{const t=n.find((t=>t.id===e.id)),i=t?t.badgeIcon:M.N_W;return{name:e.name,faviconUrl:i,id:e.id,type:k.w.EXTENSION,enabled:e.enabled,optionsUrl:e.optionsUrl,selectPriority:s.indexOf("EXTENSIONS")}}));i&&(a=a.slice(0,B));const o=(0,x.$)("ctrl");return j({title:(0,b.Z)("Extensions"),array:a,translateParam:[o],subtitle:"Open Options Page with $1"})}function ee(e){const t=d.ZP.get(O.kQuickCommandsSearchPriority),{searchText:n,history:s}=e;return j({title:"History",array:(s?.length?s:l.Z.getFilteredHistory(n)).map((e=>{const{url:n,title:s,lastVisitTime:i,visitCount:r}=e;return{type:k.w.HISTORY,faviconUrl:L.jk.getFavicon(n),selectPriority:t.indexOf("HISTORY"),url:n,name:s,visitTime:i,visitCount:r}}))})}function te(e){const t=d.ZP.get(O.kQuickCommandsSearchPriority),n=d.ZP.get(O.kQuickCommandsLimitResults),s=e.toLowerCase();let r=i.ZP.getFilteredFlat(s,{bookmarks:!1,folders:!0,inTrash:!1}).filter((e=>e.nickname.toLowerCase()!==s)).map((e=>({folderId:e.id,type:k.w.BOOKMARK_FOLDER,name:e.title,selectPriority:t.indexOf("BOOKMARK_ITEM_OR_FOLDER"),nickname:e.nickname,faviconUrl:M._TQ.small})));return n&&(r=r.slice(0,B)),j({title:(0,b.Z)("Open All Bookmarks in Folder"),array:r})}async function ne(e){const{id:t,enabled:n,optionsPage:s,optionsUrl:i}=e;n||await N.Z.management.setEnabled(t,!0),s&&i.length?u.Z.openURL(i,{inCurrent:!s}):ge.emitChange(t)}function se(e){const t=d.ZP.get(O.kQuickCommandsSearchPriority),n=d.ZP.get(O.kQuickCommandsLimitResults),s=e.toLowerCase();let r=i.ZP.getFilteredFlat(s,{bookmarks:!0,folders:!1,inTrash:!1}).filter((e=>e.nickname.toLowerCase()!==s)).filter((e=>{const t={...e};return delete t.isExpanded,i.ZP.isBookmark(t)})).map((e=>{const{url:n="",nickname:s,title:i}=e;return{type:k.w.BOOKMARK,name:i,url:n,selectPriority:t.indexOf("BOOKMARK_ITEM_OR_FOLDER"),nickname:s,faviconUrl:L.jk.getFavicon(n)}}));return n&&(r=r.slice(0,B)),j({title:"Bookmarks",array:r})}function ie(e){const t=e.split(" ")[0],n=h.Z.getByKeyword(t);if(!n)return[];const s=e.substring(t.length).trim(),i=encodeURIComponent(s);return[{name:(0,b.Z)("Keyword Search “$1” on $2",[s,n.name]),nickname:n.keyword,type:k.w.KEYWORDSEARCH,faviconUrl:n.faviconUrl,selectPriority:-1,value:n.url.replace(/%s/gi,i)}]}function re(e,t){const n=d.ZP.get(O.kQuickCommandsSearchPriority),s=encodeURIComponent(e);return[{name:(0,b.Z)("Search “$1” on $2",[e,t?.name]),type:k.w.SEARCH,faviconUrl:t?.faviconUrl,selectPriority:n.indexOf("KEYWORD_SEARCH"),value:t?.url.replace(/%s/gi,s)}]}function ae(e){return e.length<4?[]:[{name:(0,b.Z)("Create Note “$1”",[e]),type:k.w.NOTE_ADD,value:e}]}function oe(e){return j({title:"Commands",array:w(e,r.Z.getQuickCommands().map((e=>{const t=Z._H[e.name];return{...e,foundKeyword:!1,...t&&{keyword:t}}})),d.ZP.get(O.kQuickCommandsSearchEnglish)).map((e=>{const t=r.Z.getCommandConfiguration(e.name),{label:n,foundKeyword:s,keyword:i,paramValue:a}=e;let o=n;const l=a&&s?a:void 0;i&&(o=s?(0,b.Z)("Run $1",[n]):n+" #");const c=d.ZP.get(O.kQuickCommandsSearchPriority);return{name:o,type:i?k.w.COMMAND_KEYWORD:k.w.COMMAND,meta:t?.shortcut?t.shortcut[0]:"",commandName:e.name,searchString:n,selectPriority:s?-1:c.indexOf("NORMAL_COMMAND"),value:l}}))})}function le(e){const t=d.ZP.get(O.kQuickCommandsSearchPriority),n=d.ZP.get(O.kQuickCommandsLimitResults);let s=c.ZP.getFilteredFlat(e,{inTrash:!1}).map((e=>{const{id:n,title:s,children:i,content:r,url:a}=e,o=e.attachments&&e.attachments.length>0;return{type:k.w.NOTE_OPEN,id:n,url:a||"",name:s||r||"",isFolder:void 0!==i?.length,selectPriority:t.indexOf("NOTES_SEARCH"),nickname:s&&r?r:"",hasAttachment:o}}));return n&&(s=s.slice(0,B)),j({title:"Notes",array:s})}function ce(e){if(!(0,I.C3)(e)&&!(0,I.xl)(e))return[];const t=(0,I.q9)(e),n=d.ZP.get(O.kQuickCommandsSearchPriority),s={name:t,type:k.w.URL,selectPriority:(0,I.Zj)(e)?n.indexOf("KEYWORD_SEARCH")-1:-1,pageUrlForFavicon:t,faviconUrl:L.jk.getFavicon(t)};return j({title:t.toLowerCase().startsWith("javascript:")?"Execute":"Go to Address",array:[s]})}async function ue(e){const t=await N.Z.bookmarks.getSubTree(e);if(t[0].children){const e={bookmarks:G(t[0].children),inCurrent:d.ZP.get(O.kQuickCommandsOpenUrlInNewTab)};s.ZP.open(e,!0)}}function me(e,t){const n=e.toLowerCase().split(" "),s=d.ZP.get(O.kQuickCommandsSearchPriority);return j({title:"Page Actions",array:t.filter((e=>n.every((t=>(0,A.g)(e).toLowerCase().includes(t))))).map((e=>({type:k.w.CONTENT_SCRIPT,selectPriority:s.indexOf("PAGE_ACTIONS"),script:e,name:(0,A.g)(e)})))})}function de(e){const t=d.ZP.get(O.kQuickCommandsSearchPriority),n=d.ZP.get(O.kQuickCommandsLimitResults),s=e.toLowerCase().split(" ");let i=p.Z.getTrash().flatMap((e=>e.window?.tabs?e.window.tabs.flatMap((t=>({lastModified:e.lastModified,...t}))):{lastModified:e.lastModified,...e.tab})).filter((e=>he(e.title||"",e.url||"",s))).map((e=>{const n=e.url||"";return{name:e.title||"",url:(0,I.xl)(n)?"":n,type:k.w.CLOSED_TAB,selectPriority:t.indexOf("CLOSED_TABS"),pageUrlForFavicon:n,faviconUrl:L.jk.getFavicon(n),command:e}}));return n&&(i=i.slice(0,B)),j({title:(0,b.Z)("Closed Tabs"),array:i})}function he(e,t,n){const s=(0,I.xl)(t)?e:`${e} ${t}`;return n.every((e=>s.toLowerCase().includes(e)))}function pe(){m.ZP.getDiscardablePages(g.ZP.getId()).filter((e=>!(0,P.ZN)(e))).forEach(u.Z.discardPage)}const ge=new class extends(o()){emitChange(e){this.emit(F,e)}addChangeListener(e){this.on(F,e)}removeChangeListener(e){this.removeListener(F,e)}}},61666:(e,t,n)=>{"use strict";n.d(t,{C:()=>l,j:()=>c});var s=n(67294),i=n(43889),r=n(94184),a=n.n(r),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\CommonComponents.jsx";function l({children:e,text:t,className:n,label:i,leadingText:r,highlight:l}){const c=l?t.split(l.regExp).reduce(((e,t,n)=>n?e.concat([s.createElement("mark",{key:n,__source:{fileName:o,lineNumber:31,columnNumber:20}},l.matches[n-1])]).concat([t]):e.concat([t])),[]):t;return s.createElement("div",{className:a()("setting-single",n,{"setting-single--LeadingText":r}),__source:{fileName:o,lineNumber:37,columnNumber:10}},s.createElement("label",{title:i,__source:{fileName:o,lineNumber:38,columnNumber:5}},e,s.createElement("span",{__source:{fileName:o,lineNumber:40,columnNumber:7}},c)))}function c({children:e,heading:t,className:n,filter:r}){return s.createElement(i.Z,{filter:r,__source:{fileName:o,lineNumber:52,columnNumber:10}},s.createElement("div",{className:a()("setting-group",n),__source:{fileName:o,lineNumber:53,columnNumber:5}},t&&s.createElement("h3",{__source:{fileName:o,lineNumber:54,columnNumber:19}},t),e))}},43889:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(67294),i=n(9776);class r extends s.PureComponent{render(){const{children:e,filter:t}=this.props;return t?Array.isArray(e)?e.map(((e,n)=>s.createElement(s.Fragment,{key:n,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategoryChild.jsx",lineNumber:18,columnNumber:9}},(0,i.ZP)(e,t)))):(0,i.ZP)(e,t):e}}const a=r},9776:(e,t,n)=>{"use strict";n.d(t,{CH:()=>u,ZP:()=>m});var s=n(67294),i=n(72182),r=n(61666),a="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keywordFound.js";const o=function(e,t){if(!e)return[!1,e];if("string"==typeof e){const n=l(e,t);return[n,n?u(e,t):e]}if(e.type===r.C){const n=l(e.props.text,t);return[n,n?u(e,t):e]}if(!("input"!==e.type&&"textarea"!==e.type||"string"!=typeof e.props.value&&"string"!=typeof e.props.defaultValue||"radio"===e.props.type||"checkbox"===e.props.type||"password"===e.props.type)){const n=l("string"==typeof e.props.value?e.props.value:e.props.defaultValue,t);return[n,n?c(e,t):e]}if("select"===e.type){let n=!1;return s.Children.forEach(e.props.children,(e=>{e?.props.children&&"string"==typeof e?.props.children&&e?.props.children.toLowerCase().includes(t)&&(n=!0)})),[n,n?c(e,t):e]}if(e.props?.children){let n=!1;const i=s.cloneElement(e,e.props,s.Children.map(e.props.children,(e=>{const[s,i]=o(e,t);return n=n||s,[n,i]})));return[n,i]}return[!1,e]};function l(e,t){return e.toLowerCase().includes(t.toLowerCase())}const c=(e,t)=>s.createElement("div",{className:"settings-text-bubble-highlight-wrapper",__source:{fileName:a,lineNumber:71,columnNumber:5}},e,s.createElement("mark",{className:"settings-text-bubble-highlight",__source:{fileName:a,lineNumber:73,columnNumber:7}},t));const u=(e,t)=>{if(!t||!e)return e;if(e.type===r.C)return function(e,t){const n=new RegExp((0,i.Z)(t),"gi"),r=e.props.text.match(n)||[];return s.cloneElement(e,{highlight:{matches:r,regExp:n}})}(e,t);if("string"!=typeof e)return e;const n=new RegExp((0,i.Z)(t),"gi"),o=e.match(n)||[],l=e.split(n).reduce(((e,t,n)=>{let i=e;return n&&(i=i.concat([s.createElement("mark",{key:n,__source:{fileName:a,lineNumber:107,columnNumber:37}},o[n-1])])),i=i.concat([t]),i}),[]);return s.createElement("span",{__source:{fileName:a,lineNumber:112,columnNumber:20}},l)};function m(e,t){if(!t)return e;const[n,s]=o(e,t);return n?s:null}},46418:(e,t,n)=>{"use strict";n.d(t,{Y:()=>K,Z:()=>X});var s=n(88999),i=n(71905),r=n(74144),a=n(21622),o=n(67294),l=n(82535),c=n(63057),u=n(30074),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\CommandChainParameter.jsx";const d=e=>{const t=t=>e.changeParameter(t.target.value,e.index);return o.createElement("div",{className:"ChainedCommand-Item--Parameter",title:(e=>{const{keyword:t}=e;if(!t)return null;const{max:n,min:s,defaultValue:i,type:r,unit:a}=t;return("number"===r||"mixed"===r?(0,c.Z)("Min: $1",[s])+"\n"+(0,c.Z)("Max: $1",[n])+"\n":"")+(0,c.Z)("Default: $1",[i])+"\n"+(0,c.Z)("Parameter Unit: $1",[a])})(e.originalCommand),__source:{fileName:m,lineNumber:94,columnNumber:3}},(()=>{const{command:n}=e;switch(n.name){case"COMMAND_SEARCH_SELECTION_WITH_CUSTOM_ENGINE":{const e=l.Z.getList();return o.createElement("label",{className:"floating-label",__source:{fileName:m,lineNumber:54,columnNumber:11}},o.createElement("span",{__source:{fileName:m,lineNumber:55,columnNumber:13}},v.parameter),o.createElement("select",{onChange:t,value:n.param,__source:{fileName:m,lineNumber:56,columnNumber:13}},e.map((e=>{const{name:t,id:n}=e;return o.createElement("option",{key:t,value:n,__source:{fileName:m,lineNumber:59,columnNumber:24}},t)}))))}case"COMMAND_TOGGLE_INTERFACE_COLOR_BY_NAME":{const e=a.ZP.get(u.kThemesSystem).concat(a.ZP.get(u.kThemesUser));return o.createElement("label",{className:"floating-label",__source:{fileName:m,lineNumber:69,columnNumber:11}},o.createElement("span",{__source:{fileName:m,lineNumber:70,columnNumber:13}},v.parameter),o.createElement("select",{onChange:t,value:n.param,__source:{fileName:m,lineNumber:71,columnNumber:13}},e.map((e=>{const{name:t}=e;return o.createElement("option",{key:t,__source:{fileName:m,lineNumber:74,columnNumber:25}},t)}))))}default:return o.createElement(r.Z,{label:v.parameter,type:(s=e.command.defaultValue,"string"==typeof s?"text":"number"),placeholder:String(e.command.defaultValue),value:e.command.param,onChange:e=>t(e),draggable:"true",onDragStart:e=>e.preventDefault(),__source:{fileName:m,lineNumber:81,columnNumber:16}})}var s})())};var h=n(77635),p=n(34258),g=n(69291);const b=()=>{const[e,t]=(0,o.useState)(!1);return(0,o.useEffect)((()=>(t(!0),()=>{t(!1)})),[e]),e};var N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\EditChainedCommand.jsx";const f=["COMMAND_OPEN_LINK_DEFAULT","COMMAND_OPEN_LINK_CURRENT","COMMAND_OPEN_LINK_BACKGROUND"],_="ChainedCommand-Item--Over",v={name:(0,c.Z)("title","Chain Name"),emptyTitle:(0,c.Z)("Add your First Command Chain"),emptyDescription:(0,c.Z)("Press the “Add” button to the left to add a new Chain."),parameter:(0,c.Z)("chainedcommand","Command Parameter")},E=({chain:e,commands:t,removeFrom:n,chainOptions:s,changeParameter:i,addToChain:a,nameChange:l,name:u,shouldFocusSelector:m,moveItem:f,searchableStrings:v})=>{const E=b(),C=e=>{(0,p.Z)(e);const{classList:t}=e.currentTarget;t?.contains("ChainedCommand-Item")&&t.add(_)},w=e=>{(0,p.Z)(e);const{classList:t}=e.currentTarget;t?.contains(_)&&t.remove(_)};return o.createElement("div",{className:"detail",__source:{fileName:N,lineNumber:109,columnNumber:5}},o.createElement("div",{className:"detail-content",__source:{fileName:N,lineNumber:110,columnNumber:7}},o.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:111,columnNumber:9}},o.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:112,columnNumber:11}},o.createElement(r.Z,{label:v.name,type:"text",value:u||"",onChange:e=>l(e.target.value),__source:{fileName:N,lineNumber:113,columnNumber:13}}))),o.createElement("div",{className:"ChainedCommand setting-group-unlimited",onDragOver:e=>{(0,p.Z)(e),e.dataTransfer.dropEffect="move"},__source:{fileName:N,lineNumber:122,columnNumber:9}},e.map(((r,l)=>{const u=s.findIndex((e=>e.key===r.key)),g=s[u],b=t[u],_={val:g?.key,position:l+1,shouldDelete:!1},v={position:l,shouldDelete:!0},y=E&&m&&l>0;return o.createElement("div",{className:"ChainedCommand-Item",key:r.uniqueId,draggable:e.length>1,onClick:e=>e.preventDefault(),onDrop:e=>((e,t)=>{(0,p.Z)(e);const n=e.dataTransfer.getData("vivaldi/x-oldIndex"),s=parseInt(n);isNaN(s)||f(s,t),w(e)})(e,l),onDragStart:e=>((e,t)=>{e.dataTransfer.setData("vivaldi/x-oldIndex",t)})(e,l),onDragEnter:C,onDragLeave:w,__source:{fileName:N,lineNumber:140,columnNumber:17}},o.createElement("div",{className:"ChainedCommand-Item--Title floating-label",__source:{fileName:N,lineNumber:150,columnNumber:19}},o.createElement("span",{className:"ChainedCommand-Item--Name",__source:{fileName:N,lineNumber:151,columnNumber:21}},`Command ${l+1}`),o.createElement(h.Z,{className:"ChainedCommand--Selector",placeholder:(0,c.Z)("Filter Commands"),isClearable:!0,defaultValueIdx:u,autoFocus:y,openMenuOnFocus:!1,isMulti:!1,commands:s,setSelectedItem:e=>a({val:e.key,...v}),__source:{fileName:N,lineNumber:155,columnNumber:23}})),b&&void 0!==r.param&&o.createElement(d,{originalCommand:b,command:r,index:l,changeParameter:i,__source:{fileName:N,lineNumber:171,columnNumber:21}}),o.createElement("div",{className:"ChainedCommand-Item--Controls",__source:{fileName:N,lineNumber:178,columnNumber:19}},o.createElement("input",{type:"button",className:"circular remove",title:(0,c.Z)("Remove Command"),disabled:1===e.length,onClick:()=>n(l),__source:{fileName:N,lineNumber:179,columnNumber:21}}),o.createElement("input",{type:"button",className:"circular add",title:(0,c.Z)("Add Command"),onClick:()=>a(_),__source:{fileName:N,lineNumber:186,columnNumber:21}})))}))),o.createElement("input",{type:"button",value:(0,c.Z)("Test Chain"),onClick:()=>(0,g.hT)(e),__source:{fileName:N,lineNumber:197,columnNumber:11}})))};var C=n(46528),w=n(16489),y=n(88279),S=n(6478),T=n(47877),k=n(43889),I=n(25342),A=n(79290),Z=n(62434),P=n(54471),D=n(38064),M=n(62830),O=n.n(M),x=n(8547),L=n(60933),R=n(85612),B=n(93851),F=n(44025),U="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\ChainedCommands.jsx";const V=[u.kChainedCommandsCommandList,u.kChainedCommandsDeletedCommandList],H=F.jk.settingCategories,W=(0,c.Z)("duplicate","Clone"),z="https://vivaldi.com",G=(0,c.Z)("Valid URL"),K=[{name:"COMMAND_CHAINED_SLEEP",action:e=>new Promise((t=>setTimeout(t,e))),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,isEnabled:()=>!0,keyword:{type:"number",defaultValue:1e3,unit:(0,c.Z)("Milliseconds"),min:1,max:3e4},guid:"2eb81004-6703-46db-9933-6afcfde924e4",...(0,x.Z)("command","Delay")},{name:f[0],action:async e=>await y.Z.openURL(e,{inCurrent:!1,inBackground:!1}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,isEnabled:()=>!0,keyword:{type:"string",defaultValue:z,unit:G},guid:"f57b8092-9426-4bc8-8e39-fcf3e315b065",...(0,x.Z)("command","Open Link in New Tab")},{name:f[1],action:async e=>await y.Z.openURL(e,{inCurrent:!0}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,isEnabled:()=>!0,keyword:{type:"string",defaultValue:z,unit:G},guid:"0b01337b-4c13-4197-90c8-179c5c91cfff",...(0,x.Z)("command","Open Link in Current Tab")},{name:f[2],action:async e=>await y.Z.openURL(e,{inBackground:!0}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,isEnabled:()=>!0,keyword:{type:"string",defaultValue:z,unit:G},guid:"00e0e4ad-de61-4e36-8d7e-6aead10cf1c5",...(0,x.Z)("command","Open Link in Background Tab")},{name:"COMMAND_TOGGLE_INTERFACE_COLOR_BY_NAME",action:e=>I.Z.setThemeByNameWithFallback(e),showInQC:!1,category:"CATEGORY_COMMAND_APPEARANCE",guid:"e12a5194-0153-439b-98f6-9dcd99ca0d7e",isEnabled:()=>!0,keyword:{type:"string",unit:(0,c.Z)("Theme Name"),defaultValue:"Vivaldi"},...(0,x.Z)("Switch to Theme...")},{name:"COMMAND_SEARCH_SELECTION_WITH_CUSTOM_ENGINE",action:e=>{const t=P.ZP.getId(),n=l.Z.getById(e);T.Z.withPageSelection(t,n)},showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"3a8efd62-4c8a-4545-8a6c-9cb65518f507",isEnabled:()=>!0,keyword:{type:"string",unit:(0,c.Z)("Search Engine"),defaultValue:""},...(0,x.Z)("Search Selection with Engine...")}],j=["b6ddaabf-d87f-4c2c-affa-ce81bb30bfca","176ff9a8-a516-4015-9b0a-14434746ce9b","1453aae1-130d-465f-98eb-cbda5061445d","172583c9-c8d5-45f7-9e4d-65cff9333679","d03d4bc8-26c4-49f6-b3ce-23980637ae76","855ad23f-900b-42bf-af4d-4ce6b419ce09","9f6124ef-e8ed-4143-b9ca-5a4beb646e3d"],Y=e=>{const{keyword:t}=e;let n,s;if("COMMAND_SEARCH_SELECTION_WITH_CUSTOM_ENGINE"===e.name){const e=l.Z.getDefault(!1);n=e.id,s=e.id}return{...t&&{param:n||t.defaultValue,defaultValue:s||t.defaultValue}}},$=e=>({name:e.name,label:e.label,key:e.guid,uniqueId:O()(),...Y(e)}),X=(0,C.Z)((({filter:e,category:t})=>{const n=b(),r=(0,o.useContext)(Z.Z),[l,m]=(0,o.useState)([]),[d,h]=(0,o.useState)(a.ZP.get(u.kChainedCommandsCommandList)),p=(e=>{const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e})),t.current})(d),g=(0,o.useRef)(0),N=t!==H.all,f=l.map((e=>$(e)));(0,o.useEffect)((()=>{_().then((e=>{const t=e.filter((e=>!(0,L.jD)(e.name)&&!(0,L.Ed)(e.name)&&!j.includes(e.guid))).map((e=>{const t=B._H[e.name];return{...e,...t&&{keyword:t}}})).concat(K);m(t)}))}),[]);const _=async()=>await i.Z.getVivDefinedCommands();(0,o.useEffect)((()=>{if(d.length>p?.length){const e=((e,t)=>{const n=new Set(t?.map((e=>e.key))||[]);return e.map((e=>e.key)).find((e=>!n.has(e)))})(d,p);e&&A.Z.addListener(`COMMAND_${e}`,s.Z.commandChanged)}S.Z.set(u.kChainedCommandsCommandList,d)}),[p,d]);const C=e=>{const{val:t,position:s,shouldDelete:i}=e,r=l.find((e=>e.guid===t));if(!r||!n)return;const a=$(r),o=[...d],c=o[g.current];c.chain.splice(s,i,a),o[g.current]=c,h(o),P()},y=(e,t)=>{const n=[...d],s=n[g.current],{chain:i}=s,r=i.splice(e,1)[0];i.splice(t,0,r),s.chain=i,n[g.current]=s,h(n),P()},T=(e,t)=>{const n=!isNaN(e)&&e.length?Number(e):e,s=[...d],{chain:i}=s[g.current],r=i[t];r.param=n,i[t]=r,s[g.current].chain=i,h(s),P()},I=e=>{const t=[...d],{chain:n}=t[g.current];n.splice(e,1),h(t),P()},P=()=>{const{chain:e,name:t}=d[g.current],n={chain:e,name:t};s.Z.updateChainShortcut(n)},M=e=>{const t=[...d],n=t[g.current];n.label=e,t[g.current]=n,h(t)},F=()=>{const e=[...d],t=e[g.current],n=O()(),s={...t,chain:t.chain.slice(),key:n,name:`COMMAND_${n}`,label:`${t.label} ${W}`};e.splice(g.current+1,0,s),h(e)};return o.createElement(k.Z,{filter:e,__source:{fileName:U,lineNumber:456,columnNumber:5}},o.createElement("p",{className:"info",__source:{fileName:U,lineNumber:457,columnNumber:7}},(0,c.Z)("A Command Chain is a group of commands executed in a sequence. You can trigger a Chain from Quick Commands, or assign it a custom Keyboard Shortcut or Mouse Gesture.")),o.createElement(w.Z,{className:"Setting--ChainedCommand",masterLayout:1,contentStrings:v,items:d,filter:e,deleteTitle:(0,c.Z)("title","Delete Command Chain"),deleteTipString:(0,c.Z)("tooltip","Delete Command Chain"),addTipString:(0,c.Z)("Add Command Chain"),onRemove:e=>{const t=[...d],n=t.splice(e,1)[0],{key:i}=n,r=a.ZP.get(u.kChainedCommandsDeletedCommandList);h(t),g.current=0,s.Z.removeCommandConfig(n.name),S.Z.set(u.kChainedCommandsDeletedCommandList,[i,...r])},onContextMenu:(e,t)=>{const n=[{handler:F,...(0,x.Z)("Clone Command Chain")}];(0,D.Z)(r.vivaldiWindowId,n)(t)},renderEmpty:e=>o.createElement("div",{className:"detail",__source:{fileName:U,lineNumber:403,columnNumber:5}},o.createElement("div",{className:"detail-content",__source:{fileName:U,lineNumber:404,columnNumber:7}},o.createElement("h3",{__source:{fileName:U,lineNumber:405,columnNumber:9}},e.emptyTitle),o.createElement("p",{__source:{fileName:U,lineNumber:406,columnNumber:9}},e.emptyDescription))),moveItem:(e,t)=>{const n=[...d],s=n.splice(e,1)[0];n.splice(t,0,s),h(n)},emptyListString:(0,c.Z)("Add a Chain to Start"),emptyListGraphic:R.Yaj,deleteLabel:d[g.current]?.label,onCreateItem:()=>{const e=(0,c.Z)("create","New Chain"),t=O()(),n={label:e,name:`COMMAND_${t}`,chain:[$(K[0])],key:t,shortcut:[],category:"CATEGORY_COMMAND_CHAIN"};h((e=>[...e,n]))},renderCreate:e=>{const t=d.length-1,{chain:n,label:s}=d[t];return g.current=t,o.createElement(E,{chainOptions:f,changeParameter:T,removeFrom:I,commands:l,shouldFocusSelector:N,cloneChain:F,addToChain:C,searchableStrings:e,moveItem:y,nameChange:M,name:s,chain:n,__source:{fileName:U,lineNumber:416,columnNumber:7}})},mimeType:"vivaldi/x-settings-chained-command-type",supportDragAndDrop:!0,renderListItem:(e,t)=>o.createElement("div",{className:"item-title",__source:{fileName:U,lineNumber:349,columnNumber:12}},t.label),renderContent:(e,t)=>{const{chain:n,label:s}=d[e];return g.current=e,o.createElement(E,{chainOptions:f,changeParameter:T,removeFrom:I,commands:l,shouldFocusSelector:N,cloneChain:F,addToChain:C,searchableStrings:t,moveItem:y,nameChange:M,name:s,chain:n,__source:{fileName:U,lineNumber:439,columnNumber:7}})},isChain:!0,__source:{fileName:U,lineNumber:460,columnNumber:7}}))}),V)},81502:(e,t,n)=>{"use strict";n.d(t,{$J:()=>l,Cj:()=>c,E5:()=>u,E$:()=>C,ZP:()=>w});var s=n(65792),i=n.n(s),r=n(14705),a=n(5264),o=n.n(a);const l=.4,c=i()("#fff"),u=i()("#000"),m=i()("#06a700"),d=i()("#efaf00"),h=i()("#c64539");function p(e,t,n){return i().deltaE(e,t)>=n}function g(e,t,n,s=!1){return p(e,t,n)?e:e.luminance()>t.luminance()?function(e,t,n,s=!1){do{if((e=e.brighten(.1)).num()===c.num()){if(!s)return c;do{if((e=e.darken(.1)).num()===u.num())return u}while(!p(e,t,n))}}while(!p(e,t,n));return e}(e,t,n,s):function(e,t,n,s=!1){let r=i()(e.hex());do{if(r=r.darken(.1),r.num()===u.num()){if(!s)return u;let r=i()(e.hex());do{if(r=r.brighten(.1),r.num()===c.num())return c}while(!p(r,t,n));return r}}while(!p(r,t,n));return r}(e,t,n,s)}function b(e,t,n){const s=e.luminance()>l?e.brighten(.75):e.darken(.75),r=i().mix(e,t,.1),a=i().mix(e,t,.2),o=i().mix(e,t,.4);return{colorFg:e,colorFgAlpha:e.alpha(.1),colorFgIntense:g(s,t,n),colorFgFaded:g(r,t,n),colorFgFadedMore:g(a,t,n),colorFgFadedMost:g(o,t,n)}}function N(e,t,n,s,r){const a=e.luminance()>l,o=e.darken(.15),u=e.darken(.3),m=e.brighten(.1),d=e.brighten(.5),h=e.brighten(.2),p=a?e.brighten(.3):e.darken(.3),b=a?e.brighten(.5):e.darken(.5),N=a?e.darken(.1):e.brighten(.1),f=a?e.darken(.4):e.brighten(.4),_=a?e.darken(.3):e.brighten(.3),v=a?i().mix(c,e,.4).alpha(.95):b.darken(.1).alpha(.92);return{colorBg:e,colorBgAlpha:e.alpha(.9),colorBgAlphaHeavy:e.alpha(.65),colorBgAlphaHeavier:e.alpha(.25),colorBgAlphaBlur:e.alpha(s),colorBgDark:g(o,t,n),colorBgDarker:g(u,t,n),colorBgLight:g(m,t,n),colorBgLighter:g(d,t,n),colorBgLightIntense:g(h,t,n),colorBgIntense:g(p,t,n),colorBgIntenser:g(b,t,n),colorBgIntserAlpha:v,colorBgInverse:g(N,t,n),colorBgInverser:g(f,t,n),colorBgFaded:g(_,t,n),backgroundBlur:r?`blur(${r}px)`:""}}function f(e,t,n){const s=e.darken(.5),r=e.luminance()>l?u:c;let a=i().mix(t.set("hsl.l",e.get("hsl.l")),t,.8);return a=g(a,t,n/4),{colorHighlightBg:e,colorHighlightBgUnfocused:a,colorHighlightBgAlpha:e.alpha(.1),colorHighlightBgDark:g(s,t,n),colorHighlightFg:r,colorHighlightFgAlpha:r.alpha(.5),colorHighlightFgAlphaHeavy:r.alpha(.25)}}function _(e,t,n){const s=e.luminance()>l,r=s?u:c,a=i().mix(r,e,.4),o=e.darken(.4),m=e.darken(1),d=s?e.brighten(.3).desaturate(1):e.darken(.3).desaturate(1),h=e.brighten(.5),p=e.brighten(1.2),b=g(e,e,n,!0),N=b.darken(.25);return{colorAccentBg:e,colorAccentBgAlpha:p.alpha(.4),colorAccentBgAlphaHeavy:p.alpha(.25),colorAccentBgDark:o,colorAccentBgDarker:m,colorAccentBgFaded:d,colorAccentBgFadedMore:h,colorAccentBgFadedMost:p,colorAccentBorder:b,colorAccentBorderDark:N,colorAccentFg:r,colorAccentFgFaded:a,colorAccentFgAlpha:r.alpha(.25)}}function v(e,t){const n=.003*t,s=e.luminance()<n?e.brighten(1):e.darken(.5),r=g(s,e,t),a=r.luminance()>e.luminance(),o=e.luminance()<=l?i().mix(r,e,.35):i().mix(r,e,.7),c=a?r.brighten(.4):r.darken(.4),u=g(s,e,t/2);return{colorBorder:r,colorBorderDisabled:g(o,e,t/2),colorBorderSubtle:i().mix(u,e,.25),colorBorderIntense:g(c,e,1.25*t)}}function E(e,t){const n=g(m,e,t),s=n.alpha(.1),i=n.luminance()>l?u:c,r=g(d,e,t),a=r.alpha(.1),o=r.luminance()>l?u:c,p=g(h,e,t),b=p.alpha(.1),N=p.luminance()>l?u:c;return{colorSuccessBg:n,colorSuccessBgAlpha:s,colorSuccessFg:i,colorWarningBg:r,colorWarningBgAlpha:a,colorWarningFg:o,colorErrorBg:p,colorErrorBgAlpha:b,colorErrorFg:N}}const C=(e,t)=>{const n=f(i()(t),i()(e.colorBg),e.contrast);return r.Z.convertColorsToVariables(n)},w={forTheme:o()(5)((e=>{const t=6*e.contrast,n=2*e.contrast,s=1.5*e.contrast,r=1.5*e.contrast,a=3*e.contrast,o=6*e.contrast,m=g(i()(e.colorFg),i()(e.colorBg),t),d=g(i()(e.colorBg),i()(e.colorFg),n),h=g(i()(e.colorHighlightBg),i()(e.colorBg),s),p=g(i()(e.colorAccentBg),i()(e.colorBg),r,!0),C=e.colorWindowBg?i()(e.colorWindowBg):d,w=C.luminance()>l?u:c;return{...b(m,d,t),...N(d,m,n,e.alpha,e.blur),...f(h,d,s),..._(p,0,r),...v(d,a),...E(d,o),colorWindowBg:C,colorWindowFg:w}})),accentOnly:function(e,t,n,s){const i=2*s,r=1.5*s;return t=g(t,n,6*s),n=g(n,t,i),_(e=g(e,n,r),0,r)},fgBgHighlight:function(e,t,n){return e=g(e,t,6),t=g(t,e,2),n=g(n,t,1.5),{...b(e,t,6),...N(t,e,2,.75,10),...f(n,t,1.5)}}}},84177:(e,t,n)=>{"use strict";n.d(t,{nn:()=>s,eF:()=>i,ZP:()=>r});const s=16,i=12,r=(e,t)=>({radiusRound:e>-1?"100px":0,radiusRounded:e>-1?"2px":0,radiusRoundedLess:e>0?"2px":0,radius:`${e}px`,radiusHalf:e/2+"px",scrollbarWidth:`${t?i:s}px`})},77635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(67294),i=n(3822),r=n(63057),a=n(94184),o=n.n(a),l=n(53728),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\vivaldiselector\\VivaldiSelector.jsx";const u={clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:()=>({}),loadingIndicator:()=>({}),menu:()=>({}),menuList:()=>({}),menuPortal:()=>({}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:()=>({}),singleValue:()=>({}),valueContainer:()=>({})};const m=function(e){const{autoFocus:t,placeholder:n,commands:a,isClearable:m,openMenuOnFocus:d,isMulti:h,customStyles:p,defaultValueIdx:g}=e,b={...u,...p},N=a[g||0],[f,_]=(0,s.useState)(N),v=()=>{E.current?.select?.blur()};(0,s.useEffect)((()=>{null===E.current?.state.value&&g&&-1!==g&&_(a[g])}),[a,g]);const E=(0,s.useRef)(null),C=(0,s.useRef)(null),w=(0,s.useCallback)((()=>C.current),[]),y=(0,s.useCallback)((()=>v),[]);(0,l.Z)(w,y);const S=o()("VivaldiSelector",e.className);return s.createElement("div",{ref:C,__source:{fileName:c,lineNumber:96,columnNumber:5}},s.createElement(i.ZP,{ref:E,className:S,classNamePrefix:"Inner",autoFocus:t||!1,value:f,defaultValue:N,isClearable:m||!1,openMenuOnFocus:d||!1,isMulti:h||!1,onChange:t=>{return n=t,e.setSelectedItem(n),void _(n);var n},styles:b,onInputChange:(e,t)=>{"menu-close"===t.action&&v()},placeholder:n,options:a,loadingMessage:()=>(0,r.Z)("Loading..."),noOptionsMessage:()=>(0,r.Z)("No options"),__source:{fileName:c,lineNumber:97,columnNumber:7}}))}},18965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(88059),i=n(88279),r=n(60253),a=n(6478),o=n(21622),l=n(62830),c=n.n(l),u=n(92696),m=n(30074);const d="webpanel",h={upgrade:function(e){const t=o.ZP.get(m.kPanelsWebVersion);""===t&&h._upgrade(""),e&&e!==t&&h._upgrade(e)},_upgrade:function(e){const t=function(e){return void 0!==e.activeUrl&&void 0!==e.available&&void 0!==e.faviconUrl&&void 0!==e.faviconUrlValid&&void 0!==e.id&&void 0!==e.mobileMode&&"bundle"===e.origin&&void 0!==e.resizable&&void 0!==e.title&&void 0!==e.url&&void 0!==e.width};if(""===e){const e=o.ZP.get(m.kPanelsWebList).map((e=>({activeUrl:e.activeUrl||e.contentUrl||"",available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:"user",resizable:Boolean(e.resizable),title:e.title,url:e.contentUrl,width:e.width})));(0,u.Z)(o.ZP.getDefault(m.kPanelsWebItems)).forEach((n=>{t(n)?e.push(n):console.warn("Bundled web panel has wrong format",n)})),a.Z.set(m.kPanelsWebItems,e);const n=o.ZP.get(m.kPanelsWebRemovedList).map((e=>({activeUrl:e.activeUrl||e.contentUrl||"",available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:"user",resizable:Boolean(e.resizable),title:e.title,url:e.contentUrl,width:e.width})));a.Z.set(m.kPanelsWebRemovedItems,n)}else{const n=(0,u.Z)(o.ZP.get(m.kPanelsWebModified)),s=(0,u.Z)(o.ZP.get(m.kPanelsWebItems));let i=!1;o.ZP.getDefault(m.kPanelsWebItems).forEach((e=>{if(t(e)){const t=s.findIndex((t=>t.id===e.id));-1!==t||n.includes(e.id)?-1===t||n.includes(e.id)||s[t].mobileMode===e.mobileMode&&s[t].url===e.url||(s[t].mobileMode=e.mobileMode,s[t].url=e.url,i=!0):(s.push({activeUrl:e.activeUrl||e.url,available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:e.origin,resizable:e.resizable,title:e.title,url:e.url,width:e.width}),i=!0)}else console.warn("Bundled web panel has wrong format",e)}));const r=o.ZP.getDefault(m.kPanelsWebItems);for(let e=s.length-1;e>=0;e--){const t=s[e];if("bundle"===t.origin&&!n.includes(t.id)){-1===r.findIndex((e=>e.id===t.id))&&(s.splice(e,1),i=!0)}}for(let e=n.length-1;e>=0;e--){const t=n[e];let a=s.findIndex((e=>e.id===t));-1===a&&(a=r.findIndex((e=>e.id===t)),-1===a&&(n.splice(e,1),i=!0))}a.Z.set(m.kPanelsWebVersion,e),i&&(a.Z.set(m.kPanelsWebModified,n),a.Z.set(m.kPanelsWebItems,s))}},addByUrl:function(e){h.addByUrls([e],-1)},addByUrls:function(e,t){const n=e.map((e=>({activeUrl:e,available:!0,faviconUrl:"",faviconUrlValid:!1,id:c()(),mobileMode:!0,origin:"user",resizable:!1,title:"",url:e,width:-1})));h.addPanels(n,t)},addPanels:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);e.forEach((e=>{-1===t||t>=n.length?n.push(e):n.splice(t,0,e),-1!==t&&t++})),a.Z.set(m.kPanelsWebItems,n)},removeById:function(e){const t=o.ZP.get(m.kPanelsWebItems);if(t.length>0){r.Z.destroyPeriodicAlarm(e);const n=t.filter((t=>t.id===e))[0],s=t.filter((t=>t.id!==e));if(a.Z.set(m.kPanelsWebItems,s),n){const t=o.ZP.get(m.kPanelsWebRemovedItems).slice();if(t.push(n),a.Z.set(m.kPanelsWebRemovedItems,t),"bundle"===n.origin){const t=o.ZP.get(m.kPanelsWebModified).slice();t.includes(e)||(t.push(e),a.Z.set(m.kPanelsWebModified,t))}}}},setMobileMode:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.mobileMode=t),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},setAvailable:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.available=t),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},setTitle:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.title=t),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},setActiveUrl:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.activeUrl=t),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},setUrl:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.url=t,r.activeUrl=t),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},setFaviconUrl:function(e,t){const n=o.ZP.get(m.kPanelsWebItems);if(n.length>0){const s=[];for(let i=0;i<n.length;i++){const r=n[i];r.id===e&&(r.faviconUrl=t,r.faviconUrlValid=!0),s.push(r)}a.Z.set(m.kPanelsWebItems,s)}},recoverWebPanel:function(e){const t=o.ZP.get(m.kPanelsWebRemovedItems);if(t.length>0&&e<t.length){const n=t[e];if("bundle"===n.origin){const e=o.ZP.get(m.kPanelsWebModified).slice(),t=e.findIndex((e=>e===n.id));-1!==t&&(e.splice(t,1),a.Z.set(m.kPanelsWebModified,e))}h.addPanels([n],-1);const s=t.slice();s.splice(e,1),a.Z.set(m.kPanelsWebRemovedItems,s)}},emptyTrash:function(){a.Z.set(m.kPanelsWebRemovedList,[]),a.Z.set(m.kPanelsWebRemovedItems,[])},copyWebPanelAdress:function(e){const t=this.getUrlById(e);t.length>0&&s.Z.copyUrlToClipboard(t)},getUrlById:function(e){const t=o.ZP.get(m.kPanelsWebItems).filter((t=>e===t.id)).map((e=>e.activeUrl));return t.length>0?t[0]:""},openInTab:function(e,t,n){const s=this.getUrlById(e);s.length>0&&i.Z.openURL(s,{inCurrent:t,inBackground:n})},openInWindow:function(e,t){const n=this.getUrlById(e);n.length>0&&i.Z.openURL(n,{inNewWindow:!0,incognito:t})},getIndexByShortcut:function(e){const t=d.length,n=e.substr(0,t),s=e.substr(t).trim();return n===d&&s>="1"&&s<="9"?parseInt(s):-1},setUIContent:function(e){const t=o.ZP.get(m.kPanelsWebToolbar);t.showToolbar=e.showToolbar,t.allControls=e.allControls,a.Z.set(m.kPanelsWebToolbar,t)},getFaviconPrefix:function(){return"chrome://favicon/"}},p=h},88047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s={LINK:"link",TYPED:"typed",AUTO_BOOKMARK:"auto_bookmark",AUTO_SUBFRAME:"auto_subframe",MANUAL_SUBFRAME:"manual_subframe",GENERATED:"generated",AUTO_TOPLEVEL:"auto_toplevel",FORM_SUBMIT:"form_submit",RELOAD:"reload",KEYWORD:"keyword",KEYWORD_GENERATED:"keyword_generated"}},30801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(13192);const i=n.n(s)()({BACKGROUND_TASKS_SET:null,BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM:null,BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM:null,BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM:null,BROWSING_DATA_REMOVED:null,CALENDAR_CHANGED:null,CALENDAR_CREATED:null,CALENDAR_DATA_CHANGED:null,CALENDAR_DELETED:null,CALENDAR_EVENT_CHANGED:null,CALENDAR_EVENT_CREATED:null,CALENDAR_EVENT_DELETED:null,CALENDAR_EVENT_TYPE_CHANGED:null,CALENDAR_EVENT_TYPE_CREATED:null,CALENDAR_EVENT_TYPE_DELETED:null,CALENDAR_NOTIFICATION_CHANGED:null,CAPTURE_AREA_TO_DISK:null,CAPTURE_AREA_TO_CLIPBOARD:null,CAPTURE_PAGE_TO_DISK:null,CAPTURE_PAGE_TO_CLIPBOARD:null,CHANGED:null,CHROME_SET_DEVICES:null,CHROME_TABS_API:null,CHROME_TABS_REPLACED:null,CLOSE_FIND_IN_PAGE_ACTION:null,CONTACT_ADD_CONTACTS:null,CONTACT_DELETE_CONTACTS:null,CONTACT_INITIALIZE:null,CONTACT_SAVE_CONTACT:null,CONTACT_SELECT_CONTACT:null,FIND_IN_PAGE_ACTION:null,FIND_IN_PAGE_FOCUS:null,FIND_IN_PAGE_RESULT_ACTION:null,MAIL_APPLY_FILTER:null,MAIL_CLEAR_QUERY:null,MAIL_GOTO_NEXT_UNREAD:null,MAIL_GOTO_PREVIOUS_UNREAD:null,MAIN_SHOW_ADD_FEED:null,MAIN_SHOW_BOOKMARK_DIALOG:null,MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG:null,MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG:null,MAIN_SHOW_CREATE_CALENDAR_DIALOG:null,MAIN_SHOW_IMPORT_CALENDAR:null,MAIN_SHOW_IMPORT_DATA:null,MAIN_SHOW_KEYBOARDS_SHORTCUTS:null,MAIN_SHOW_PAGE_ACCESS_KEYS:null,MAIN_SHOW_OPEN_SESSION:null,MAIN_SHOW_QUICKCOMMANDS:null,MAIN_SHOW_SAVE_SESSION:null,MAIN_SHOW_VISUAL_TAB_SWITCHER:null,NAVGIATION_TYPED_HISTORY_DELETE:null,NAVIGATION_ADD_POPUP:null,NAVIGATION_HISTORY_ALL_DELETED:null,NAVIGATION_REMOVE_POPUP:null,NAVIGATION_RESET_BLOCKED_CONTENT:null,NAVIGATION_RESET_BLOCKED_POPUPS:null,NAVIGATION_RESET_PERMISSIONS:null,NAVIGATION_SET_BLOCKED_CONTENT:null,NAVIGATION_SET_PERMISSION:null,NAVIGATION_TYPED_HISTORY_DELETE:null,PAGE_ACTION_FAST_FORWARD_URL_CHANGED:null,PAGE_BACK:null,PAGE_FORWARD:null,PAGE_GET_HISTORY:null,PAGE_GO:null,PAGE_RELOAD:null,PAGE_RESUME_UPDATES:null,PAGE_SET_LOADING:null,PAGE_SET_MEDIA_PERMISSION:null,PAGE_STOP:null,PAGE_UPDATE:null,PAGE_UPDATED:null,PANEL_CLEAR_TRANSITION_STATE:null,PANEL_MOVE:null,PANEL_SET_AVAILABLE:null,PANEL_SET_CONTENT_VISIBLE:null,PANEL_SET_FOCUS:null,PANEL_TOGGLE_FLOATING:null,PANEL_SET_MAIL_WINDOW:null,PANEL_SET_PANELS:null,PANEL_SET_RESIZABLE:null,PANEL_SET_WIDTH:null,PANEL_TOGGLE_CONTENT:null,RSS_CLEAR_FEEDS:null,RSS_FEEDS_FOUND:null,SEARCH_ENGINES_INIT:null,SEARCH_ENGINES_ADD:null,SEARCH_ENGINES_REMOVE:null,SEARCH_ENGINES_MODIFY:null,SEARCH_ENGINES_SET_COLLECTION:null,SEARCH_ENGINES_SET_DEFAULT:null,SEARCH_ENGINES_REORDER:null,SEARCH_ENGINES_RESTORE:null,SEARCH_FIELD_ADD_TYPED_HISTORY:null,SEARCH_FIELD_DELETE_TYPED_HISTORY:null,SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:null,SEARCH_FIELD_INIT_TYPED_HISTORY:null,SEARCH_FIELD_SET_STATE:null,SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:null,SEARCH_SUGGEST_RESULT:null,SETTINGS_HIDE_COMPONENT:null,SETTINGS_SHOW_COMPONENT:null,SHOW_FIND_IN_PAGE_ACTION:null,SPATNAV_NAVIGATE:null,SYNC_ENGINE_STATE_CHANGED:null,TAB_CLOSEBUTTON_DISABLED:null,TAB_CLOSE_ALL_BUT_ACTIVE_TAB:null,TAB_NEW_BACKGROUND_TAB:null,TAB_NEW_TAB:null,TAB_STACK_CREATE:null,TAB_STACK_DISSOLVE:null,TAB_STACK_REMOVE:null,TAB_STACK_TILE_GRID:null,TAB_STACK_TILE_HORIZONTAL:null,TAB_STACK_TILE_VERTICAL:null,TAB_STACK_UNTILE:null,TAB_SWITCH_BACK_HISTORY:null,TAB_SWITCH_BACK_ORDER:null,TAB_SWITCH_BACK_SETTING:null,TAB_SWITCH_FORWARD_HISTORY:null,TAB_SWITCH_FORWARD_ORDER:null,TAB_SWITCH_FORWARD_SETTING:null,TAB_TOGGLE_THUMBNAIL:null,TAB_UNDO_RECENTLY_CLOSED:null,TAB_VIEW_PAGE_SOURCE:null,TILES_INITIALIZED:null,TILE_SET_LAYOUT:null,VIVALDI_ACCOUNT_STATE_UPDATED:null,VIVALDI_ACCOUNT_TOKEN_FETCH_FAILED:null,VIVALDI_ACCOUNT_INFO_FETCH_FAILED:null,WEBPAGEVIEW_ACTIONS:null,WEBVIEW_SET_UTILITY_VIEW:null,WINDOW_MINIMAL_UI:null,WINDOW_TOGGLE_ADDRESS_BAR:null,WINDOW_TOGGLE_BOOKMARKS_BAR:null,WINDOW_TOGGLE_PANEL_TOGGLE:null,WINDOW_TOGGLE_STATUS_BAR:null,WINDOW_TOGGLE_TABS:null,WINDOW_UPDATE_FROM_PREFS:null,UNLOAD_DIALOG_CLOSED:null})},43184:(e,t,n)=>{"use strict";n.d(t,{an:()=>s,bI:()=>i,OK:()=>r,pL:()=>a,Wp:()=>o,rM:()=>l,XF:()=>c,qt:()=>u,Zh:()=>m,XZ:()=>d,VH:()=>h,oJ:()=>p,s5:()=>g,m6:()=>b});const s=1,i=.5,r=4,a=.25,o=.05,l=1,c=.2,u=5,m=.1,d=1,h=.5,p=2,g=.05,b=1},93851:(e,t,n)=>{"use strict";n.d(t,{FD:()=>Ve,CN:()=>Ke,xU:()=>He,os:()=>ze,_H:()=>Ge});var s=n(76483),i=n(56530),r=n(66854),a=n(88059),o=n(65914),l=n(33433),c=n(72450),u=n(24141),m=n(18484),d=n(49856),h=n(66524),p=n(88279),g=n(91662),b=n(77458),N=n(97491),f=n(60253),_=n(6478),v=n(21622),E=n(72191),C=n(47877),w=n(35272),y=n(51508);function S(e,t){return e*(1+t)}function T(e,t,n){var s=Number.MAX_VALUE;for(let i=0;i<e.length;i++){const r=e[i],a=k(r,t),o=S(r.w,a);a<=n&&o<s&&(s=o)}var i=[];for(let r=0;r<e.length;r++){const a=e[r],o=k(a,t),l=S(a.w,o);o<=n&&l===s&&i.push(a)}return i}function k(e,t){let n;return n=180===t&&e.d&&e.d<0?t+e.d:Math.abs((e.d||0)-t),n}function I(e,t){var n=e.filter((e=>e.d===t));if(n.length)return n[0];var s=function(e,t){var n=Number.MAX_VALUE;for(let s=0;s<e.length;s++){const i=k(e[s],t);i<n&&(n=i)}var s=[];for(let i=0;i<e.length;i++){const r=e[i];k(r,t)===n&&s.push(r)}return{pts:s,dev:n}}(e,t);return(n=s.pts).reduce(((e,n)=>{const s=e.d||NaN,i=n.d||NaN;return 180===t&&s>i?e:180===t&&i>s?n:s<i?e:n}))}function A(e,t){e.forEach((e=>{var n;e.d=function(e,t){var n=e.x-e.sx,s=e.y-e.sy;if(0===n&&0===s)return t;var i=Math.atan2(s,n);return i*=180/Math.PI,Math.round(i)}(e,t),e.w=(n=e,Math.round(Math.pow(n.x-n.sx,2)+Math.pow(n.y-n.sy,2)))}));var n,s=T(e,t,90),i=T(e,t,45),r=i.length?i:s;return 0===r.length?console.log("No point in this direction. Should wrap!"):n=1===r.length?r[0]:I(r,t),n}function Z(e,t){Array.isArray(e.below)?e.below.push(t):e.below=[t]}function P(e,t){Array.isArray(e.above)?e.above.push(t):e.above=[t]}function D(e,t){Array.isArray(e.toRight)?e.toRight.push(t):e.toRight=[t]}function M(e,t){Array.isArray(e.toLeft)?e.toLeft.push(t):e.toLeft=[t]}function O(e,t){return e>=t.left&&e<=t.right}function x(e,t){return e>=t.top&&e<=t.bottom}function L(e){return e.left+(e.right-e.left)/2}function R(e,t){const n=L(e),s=L(t);return O(n,t)?(e.quality=1,n):O(s,e)?(e.quality=1,s):O(e.left,t)?(e.quality=2,e.left):O(e.right,t)?(e.quality=2,e.right):O(t.left,e)?(e.quality=2,t.left):O(t.right,e)?(e.quality=2,t.right):e.left>t.right?(e.quality=2,e.left):e.right<t.left?(e.quality=2,e.right):(e.quality=1,n)}function B(e){return e.top+(e.bottom-e.top)/2}function F(e,t){const n=B(e),s=B(t);return x(n,t)?(e.quality=1,n):x(s,e)?(e.quality=1,s):x(e.top,t)?(e.quality=2,e.top):x(e.bottom,t)?(e.quality=2,e.bottom):x(t.top,e)?(e.quality=2,t.top):x(t.bottom,e)?(e.quality=2,t.bottom):e.top>t.bottom?(e.quality=2,e.top):e.bottom<t.top?(e.quality=2,e.bottom):(e.quality=1,n)}function U(e){const t=e.filter((e=>1===e.quality)),n=e.filter((e=>2===e.quality));return t.length>0?t:n}function V(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}function H(e,t){return e.bottom>=t.top&&e.bottom<=t.bottom&&e.right>=t.left&&e.right<=t.right||e.top<=t.bottom&&e.top>=t.top&&e.left>=t.left&&e.left<=t.right}const W={buildPoints:function(e){var t=0;return e.map((n=>{var s=n;return s.id=++t,function(e,t){for(var n=0;n<t.length;n++){const s=t[n];s.id!==e.id&&(H(e,s)?(s.left<e.left&&M(e,s),s.right>e.right&&D(e,s),s.top<e.top&&P(e,s),s.bottom>e.bottom&&Z(e,s)):(s.top>e.top?Z(e,s):s.bottom<=e.top&&P(e,s),s.left>e.left?D(e,s):s.right<=e.left&&M(e,s)))}return e}(s,e)}))},buildPointsDeprecated:function(e){var t=0;return e.map((n=>{var s=n[0];return s.id=++t,s.data=n[1],function(e,t){for(var n=0;n<t.length;n++){const s=t[n][0];s.id!==e.id&&(H(e,s)?(s.left<e.left&&M(e,s),s.right>e.right&&D(e,s),s.top<e.top&&P(e,s),s.bottom>e.bottom&&Z(e,s)):(s.top>e.top?Z(e,s):s.bottom<=e.top&&P(e,s),s.left>e.left?D(e,s):s.right<=e.left&&M(e,s)))}return e}(s,e)}))},nextUp:function(e){if(!e.above)return;var t=A(U(e.above.map(((t,n)=>{var s=R(e,t);return{sx:s,sy:H(t,e)?Math.min(e.bottom,t.bottom):e.top,x:t.right<s?t.right:t.left>s?t.left:s,y:t.bottom,i:n,w:1,quality:e.quality}}))),-90);return t&&e?e.above&&e.above[t.i]:void 0},nextDown:function(e){if(!e.below)return;var t=A(U(e.below.map(((t,n)=>{var s=R(e,t);return{sx:s,sy:V(t,e)?e.top:H(t,e)?Math.max(e.top,t.top):e.bottom,x:t.right<s?t.right:t.left>s?t.left:s,y:t.top,i:n,w:1,quality:e.quality}}))),90);return t&&e?e.below&&e.below[t.i]:void 0},nextRight:function(e){if(!e.toRight)return;var t=A(U(e.toRight.map(((t,n)=>{var s=V(t,e)?e.left:H(t,e)?Math.max(e.left,t.left):e.right,i=F(e,t);return{sx:s,sy:i,x:t.left,y:t.bottom<i?t.bottom:t.top>i?t.top:i,i:n,w:1,quality:e.quality}}))),0);return t&&e?e.toRight&&e.toRight[t.i]:void 0},nextLeft:function(e){if(!e.toLeft)return;var t=A(U(e.toLeft.map(((t,n)=>{var s=F(e,t);return{sx:H(t,e)?Math.min(e.right,t.right):e.left,sy:s,x:t.right,y:t.bottom<s?t.bottom:t.top>s?t.top:s,i:n,w:1,quality:e.quality}}))),180);return t&&e?e.toLeft&&e.toLeft[t.i]:void 0}};var z=n(74686),G=n(30074);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let j,Y,$,X,Q,q=[],J=-1,ee="",te=!0,ne="";function se(){z.Z.tabsPrivate.onWebviewClickCheck.addListener(he),z.Z.tabsPrivate.onKeyboardChanged.addListener(oe),y.Z.bind("ctrl+enter",ce),y.Z.bind("shift+enter",ue),y.Z.bind("ctrl+shift+enter",me)}function ie(e){const t=document.activeElement;t&&(Y||(Y=document.createElement("div"),Y.id="spatnav-indicator",Y.style.position="absolute",Y.style.boxShadow="0 0 10px 4px rgba(255,122,0,0.70), 0 0 0 2px #FF7A00",Y.style.borderRadius="2px",Y.style.backgroundColor="transparent",Y.style.zIndex="0","visible"!==Y.style.visibility&&(Y.style.visibility="visible",se()),j.appendChild(Y)),z.Z.zoom.getVivaldiUIZoom((n=>{const s=t.getBoundingClientRect(),i=s.top,r=s.left;Y.style.left=r+e.left/n+"px",Y.style.top=i+e.top/n+"px",Y.style.width=e.width/n+"px",Y.style.height=e.height/n+"px","visible"!==Y.style.visibility&&(Y.style.visibility="visible",se())})))}function re(){Y&&(Y.style.visibility="hidden"),z.Z.tabsPrivate.onWebviewClickCheck.removeListener(he),z.Z.tabsPrivate.onKeyboardChanged.removeListener(oe),y.Z.unbind("ctrl+enter",ce),y.Z.unbind("shift+enter",ue),y.Z.unbind("ctrl+shift+enter",me)}function ae(e){if(0!==q.length)return"up"===e?function(){let e=q[0];return q.forEach((function(t){t.top>e.top&&(e=t)})),e}():"left"===e?function(){let e=q[0];return q.forEach((function(t){t.left>e.left&&(e=t)})),e}():"down"===e||"right"===e?function(){let e=q[0];return q.forEach((function(t){e.left+e.top>t.left+t.top&&(e=t)})),e}():void 0}function oe(e,t,n,s){s===w.Z.KEY_ESCAPE&&0===n?re():s!==w.Z.KEY_RETURN&&s!==w.Z.KEY_ENTER||0!==n?"WEBVIEW"!==document.activeElement.tagName&&re():le(0)}function le(e){re();const t=document.activeElement,n=parseInt(t.getAttribute("tab_id"));$&&z.Z.tabsPrivate.activateElementFromPoint(n,Math.round($.left+$.width/2),Math.round($.top+$.height/2),e),te=!0}function ce(){le(2)}function ue(){le(1)}function me(){le(3)}function de(e,t){const n=document.activeElement.getBoundingClientRect(),s="up"===t||"down"===t?Math.round(n.height/2):Math.round(n.width/2);ne=$?$.path:"",z.Z.tabsPrivate.scrollPage(e,t,s,(()=>{z.Z.tabsPrivate.getSpatialNavigationRects(e,(function(e){q=W.buildPoints(e),0===q.length?(re(),te=!0):($=q.find((e=>e.path===ne)),$||($=ae(t)),$&&(ne="",ie($),te=!1))}))})),z.Z.tabsPrivate.getScrollPosition(e,(function(e,t){X=e,Q=t}))}function he(e,t,n,s,i){re()}async function pe(e){const t=document.activeElement,n=parseInt(t.getAttribute("tab_id"));if(!v.ZP.get(G.kWebpagesSpatialNavigationEnabled)&&n)return;const{scrollx:s,scrolly:i}=await function(e){return new Promise((t=>{z.Z.tabsPrivate.getScrollPosition(e,((e,n)=>{t({scrollx:e,scrolly:n})}))}))}(n);X===s&&Q===i||(te=!0),X=s,Q=i,n!==J&&(J=n,te=!0);const r=await z.Z.tabsPrivate.getSpatialNavigationRects(n);if(te&&(q=W.buildPoints(r),$=ae(e),te=!1),j=document.getElementById("app"),0!==r.length)if(Y)if("visible"!==Y.style.visibility)$&&ie($);else{let t;t=$?function(e,t){switch(t){case"left":return W.nextLeft(e);case"up":return W.nextUp(e);case"right":return W.nextRight(e);case"down":return W.nextDown(e)}}($,e):ae(e),t?(ie(t),$=t):de(n,e)}else $=ae(e),ie($);else de(n,e)}g.ZP.addChangeListener((function(){const e=g.ZP.unsafeGetActivePage().url;ee?ee!==e&&(Y&&"visible"===Y.style.visibility&&re(),ee=e,te=!0):ee=e}));var ge=async function(e){await pe(e)};const be=new class{constructor(){K(this,"left",ge.bind(this,"left")),K(this,"up",ge.bind(this,"up")),K(this,"right",ge.bind(this,"right")),K(this,"down",ge.bind(this,"down"))}};var Ne=n(20748),fe=n(25342),_e=n(78174),ve=n(40061),Ee=n(37816),Ce=n(32135),we=n(82487),ye=n(52604),Se=n(54471),Te=n(44342),ke=n(63057),Ie=n(2121),Ae=n(8547),Ze=n(43184),Pe=n(43393),De=n(92342),Me=n(39412);const Oe=()=>{const e=Me.ZP.getFilteredFlat("",{inTrash:!1});xe((t=>{t?e.forEach((e=>{const{content:n="",url:s="",dateAdded:i=0}=e,r=new Date(i).toString(),a=new Blob([`${n}\n${r}\n${s||""}`]),o=`${n.substring(0,4)}_ ${e.id}.txt`;Ie.Z.fileSystem.getWritableEntry(t,(e=>{e.getFile(o,{create:!0},(e=>{e.createWriter((e=>{let t=!1;e.onwriteend=function(e){if(!t)return t=!0,void this.truncate(a.size)},e.onerror=function(e){console.warn("Error Exporting Notes: "+e.toString())},e.write(a)}))}))}))})):console.warn("Error exporting notes, directory missing")}))},xe=e=>{Ie.Z.fileSystem.chooseEntry({type:"openDirectory"},(t=>{const n=Ie.Z.runtime.lastError;n?console.error(n.message):e(t)}))},Le=()=>{xe((e=>{if(!e)return void console.warn("Error importing notes, directory missing");const t=e.createReader(),n=()=>{t.readEntries((function(e){e.length>0&&(e.forEach((e=>{e.file((function(e){const t=new FileReader;t.onloadend=function(){const e=this.result;e&&z.Z.notes.create({content:e})},t.readAsText(e)}),(e=>{console.warn("Error reading file "+e)}))})),n())}))};n()}))};var Re=n(69291),Be=n(60933),Fe=n(44025);const Ue=!1,Ve={COMMAND_OPEN_LINK:"https://www.vivaldi.com"},He=e=>Ge[e],We=["COMMAND_CLIPBOARD_UNDO","COMMAND_CLIPBOARD_REDO","COMMAND_CLIPBOARD_CUT","COMMAND_CLIPBOARD_COPY","COMMAND_CLIPBOARD_PASTE","COMMAND_CLIPBOARD_SELECT_ALL","COMMAND_HIDE_OTHERS","COMMAND_HIDE_VIVALDI","COMMAND_SHOW_ALL"],ze=e=>We.includes(e),Ge={COMMAND_TAB_PERIODIC_RELOAD:{type:"mixed",defaultValue:60,unit:(0,ke.Z)("time","Seconds"),min:60,max:31556926,validity:/(^(\d+'(\d+")?|\d+")$)/g},COMMAND_MAIN_ZOOM:{type:"number",unit:(0,ke.Z)("Percentage"),defaultValue:100*Ze.m6,min:100*Ze.XF,max:100*Ze.qt},COMMAND_MAIN_UI_ZOOM:{type:"number",unit:(0,ke.Z)("Percentage"),defaultValue:100*Ze.m6,min:100*Ze.bI,max:100*Ze.OK}},Ke=[{name:"COMMAND_NEW_WINDOW",action:()=>{Se.ZP.isGuestSession()?d.Z.openGuestWindow():p.Z.openBrowserWindow(Se.ZP.getId())},isEnabled:()=>!0,withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"b6ddaabf-d87f-4c2c-affa-ce81bb30bfca",...(0,Ae.Z)("command","New Window")},{name:"COMMAND_NEW_PRIVATE_WINDOW",action:p.Z.openIncognitoWindow,isEnabled:()=>!Se.ZP.isGuestSession(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"176ff9a8-a516-4015-9b0a-14434746ce9b",...(0,Ae.Z)("New Private Window")},{name:"COMMAND_NEW_GUEST_WINDOW",action:d.Z.openGuestWindow,isEnabled:()=>!Se.ZP.isIncognito(Se.ZP.getId()),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!0,guid:"1453aae1-130d-465f-98eb-cbda5061445d",...(0,Ae.Z)("New Guest Window")},{name:"COMMAND_MANAGE_PEOPLE",action:()=>d.Z.managePeople(),category:"CATEGORY_COMMAND_APPLICATION",isEnabled:()=>!0,showInQC:!0,guid:"49023738-dc53-4fce-8fd8-68bcdc89be34",...(0,Ae.Z)("Manage Profiles")},{name:"COMMAND_CLOSE_WINDOW",action:()=>ye.Z.close(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"172583c9-c8d5-45f7-9e4d-65cff9333679",...(0,Ae.Z)("command","Close Window")},{name:"COMMAND_SHOW_QUICK_COMMANDS",action:d.Z.showQuickCommand,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"f8d653f3-1371-4cf2-ab83-b8c62ad98add",...(0,Ae.Z)("Quick Commands")},{name:"COMMAND_FULLSCREEN",action:()=>ye.Z.toggleFullscreen(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"7420368f-565e-409f-8eec-5b5c578429af",...(0,Ae.Z)("Fullscreen Mode")},{name:"COMMAND_TASK_MANAGER",action:()=>z.Z.utilities.openTaskManager(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"3aed82ac-e497-4f75-9f13-c5a7df0ac448",...(0,Ae.Z)("Task Manager")},{name:"COMMAND_SHOW_SETTINGS",action:()=>d.Z.showSettings(),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"1e05a540-7261-427f-a902-8a75f5e81cdd",...(0,Ae.Z)("Settings")},{name:"COMMAND_SHOW_ACCOUNT_SHEET",action:d.Z.showAccountSheet,isEnabled:()=>(Se.ZP.isGuestSession(),!1),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ae3f522d-999f-4733-905b-1b0d45ee7e85",...(0,Ae.Z)("Account Sheet")},{name:"COMMAND_SHOW_EXTENSIONS",action:()=>d.Z.showExtensions(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ef8d7f53-627c-4286-a03e-7affc92b5ff3",...(0,Ae.Z)("Extensions")},{name:"COMMAND_SHOW_HISTORY",action:()=>d.Z.showHistory(),withNoWindow:!0,isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"dd8723f0-b05a-4d22-b55b-b1c1a6e282e2",...(0,Ae.Z)("History")},{name:"COMMAND_SHOW_NOTES",action:()=>d.Z.showNotes(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"97006589-839d-4c3e-aa37-311a864618b5",...(0,Ae.Z)("Notes")},{name:"COMMAND_SHOW_BOOKMARKS",action:()=>d.Z.showBookmarks(),withNoWindow:!0,isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9cde01a4-9df7-4a2e-84a1-27997c6df705",...(0,Ae.Z)("Bookmarks")},{name:"COMMAND_SHOW_WELCOME",action:()=>d.Z.showWelcome(),isEnabled:()=>!Se.ZP.isGuestSession(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"3e27424f-656a-48bf-85e4-01364ec27b57",...(0,Ae.Z)("Vivaldi Welcome Tour")},{name:"COMMAND_SHOW_CLEAR_PRIVATE_DATA",action:d.Z.showClearPrivateData,isEnabled:()=>!Se.ZP.isIncognitoOrGuest(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"10a45d9e-c539-4c67-92fd-c2332fb41127",...(0,Ae.Z)("Delete Browsing Data")},{name:"COMMAND_SHOW_BOOKMARK_BAR",action:()=>ye.Z.toggleBookmarksBar(Se.ZP.getId()),behavior:"checkbox",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"42b84fc2-a9c1-425d-a08f-f349dbb6e8a6",...(0,Ae.Z)("Bookmarks Bar")},{name:"COMMAND_TOGGLE_APPLE_EVENTS",action:_.Z.toggle.bind(_.Z,G.kAllowJavascriptAppleEvents,!0,!1),inMenu:Ue,showInQC:Ue,isEnabled:()=>Ue,category:"CATEGORY_COMMAND_APPLICATION",guid:"c8908d2a-9b77-4eb3-bdcf-327f5d78fe60",...(0,Ae.Z)("Apple Events")},{name:"COMMAND_TOGGLE_MENU_POSITION",action:_.Z.toggle.bind(_.Z,G.kMenuDisplay,"vivaldi","top"),inMenu:!0,showInQC:!0,isEnabled:()=>!0,behavior:"checkbox",category:"CATEGORY_COMMAND_APPEARANCE",guid:"6c186895-cfb1-4ce5-8d9b-21484a438ef6",...(0,Ae.Z)("command","Menu Position")},{name:"COMMAND_TOGGLE_FOOTER",action:()=>ye.Z.toggleStatusBar(Se.ZP.getId()),behavior:"checkbox",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"ea570117-f29e-4fd2-b4de-649a4660a4f2",...(0,Ae.Z)("other","Status Bar")},{name:"COMMAND_TOGGLE_STARTPAGE_NAVIGATION",action:()=>_.Z.toggle(G.kStartpageNavigation,"off","on"),behavior:"checkbox",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a1563471-d01b-4e7f-8a40-552120443cd5",...(0,Ae.Z)("other","Start Page Navigation")},{name:"COMMAND_TOGGLE_INTERFACE_COLOR",action:fe.Z.setNextTheme,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"0a9303d7-c8b0-4b0d-b6e0-02a5ba457360",...(0,Ae.Z)("Next Theme")},{name:"COMMAND_EXIT",action:()=>{z.Z.runtimePrivate.exit()},inMenu:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"842121fd-5e5a-48f3-95ad-947d37aebedb",...(0,Ae.Z)("verb","Exit")},{name:"COMMAND_QUIT_MAC_MAYBE_WARN",action:()=>{},inMenu:Ue,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",withNoWindow:!0,guid:"ff0ac033-0fcf-4c77-b664-7f7c3e4a2044",...(0,Ae.Z)("Quit $1",["Vivaldi"])},{name:"COMMAND_SHOW_HELP",action:()=>p.Z.openURL("https://help.vivaldi.com/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"643fde7b-ac28-4241-b0d0-bc221ee88785",...(0,Ae.Z)("browser","Vivaldi Help")},{name:"COMMAND_SHOW_KEYBOARDSHORTCUTS",action:d.Z.showKeyboardShortcuts,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"12ab9d03-8327-4e5d-a905-609af0ab5528",...(0,Ae.Z)("Keyboard Cheat Sheet")},{name:"COMMAND_REPORT_BUG",action:()=>p.Z.openURL("https://forum.vivaldi.net/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"f9f6da04-7ebc-4fb4-8633-f122ca145217",...(0,Ae.Z)("Report a Bug on the Forum")},{name:"COMMAND_SHOW_PAGE_ACCESS_KEYS",action:d.Z.showPageAccessKeys,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"7838709a-7042-4913-b541-25ff2268f774",...(0,Ae.Z)("Show Webpage Access Key Shortcuts")},{name:"COMMAND_BREAKMODE_TOGGLE",action:()=>i.Z.toggleBreakMode(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"a3596917-8095-42e9-8efb-31ad8ad0cbaa",...(0,Ae.Z)("command","Break Mode")},{name:"COMMAND_START_CHROMECAST",action:d.Z.startCasting,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"8b650af8-6342-48f5-a45b-2d56933fb389",...(0,Ae.Z)("Cast")},{name:"COMMAND_MAIN_TOGGLE_TAB_BAR",action:()=>ye.Z.toggleTabs(Se.ZP.getId()),behavior:"checkbox",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"c4bfbdc9-1e24-4b60-bbfe-a706be090f7b",...(0,Ae.Z)("command","Tab Bar")},{name:"COMMAND_MAIN_TOGGLE_PANEL_TOGGLE",action:()=>ye.Z.togglePanelToggle(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"1ad09f05-6a12-41e9-9bf3-ddf58f24bea4",...(0,Ae.Z)("Panel Toggle")},{name:"COMMAND_MAIN_TOGGLE_ADDRESS_BAR",action:()=>ye.Z.toggleAddressBar(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"14fc610b-d5dc-49fc-973d-4d666394948b",...(0,Ae.Z)("other","Address Bar")},{name:"COMMAND_MAIN_TOGGLE_UI",action:()=>ye.Z.toggleMinimalUI(Se.ZP.getId()),behavior:"checkbox",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"3b773be0-6af6-47f4-807c-19ad590693a2",...(0,Ae.Z)("Toggle UI")},{name:"COMMAND_CAPTURE_AREA_TO_DISK",action:()=>Ne.Z.captureArea("file"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"6ae02ffe-8039-4689-9e73-a7cd5ae792b3",...(0,Ae.Z)("Capture Area to File")},{name:"COMMAND_CAPTURE_AREA_TO_CLIPBOARD",action:()=>Ne.Z.captureArea("clipboard"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"2c2057eb-ec79-4d9e-a8de-5bbb0c2a6249",...(0,Ae.Z)("Capture Area to Clipboard")},{name:"COMMAND_FOCUS_NEXT",action:d.Z.stepFocus.bind(null,!0),repeat:!0,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"8202e8f1-c0d1-4a85-bbab-f66a52656a30",...(0,Ae.Z)("Focus Next Pane")},{name:"COMMAND_FOCUS_PREVIOUS",action:d.Z.stepFocus.bind(null,!1),repeat:!0,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"0dc4e130-6728-46e0-a632-3a2e7d817f2a",...(0,Ae.Z)("Focus Previous Pane")},{name:"COMMAND_NEW_TAB",action:()=>{const e="COMMAND_NEW_TAB";if(!o.Z.hasListener(e))return p.Z.openURL();o.Z.onCommand(e)},withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"b3515e1b-9cf2-4ba0-ba34-fac6ce308b08",...(0,Ae.Z)("command","New Tab")},{name:"COMMAND_NEW_TAB_OUTSIDE_GROUP",action:()=>p.Z.openURL(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"4b4d97fa-f94d-4bc1-80b6-2849a56dbe42",...(0,Ae.Z)("command","New Top Level Tab")},{name:"COMMAND_NEW_BACKGROUND_TAB",action:()=>Ne.Z.newBackgroundTab(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"5c2631d5-69cd-4bd5-b6e2-93b8a6ca0281",...(0,Ae.Z)("New Background Tab")},{name:"COMMAND_CLONE_TAB",action:()=>{const e=Se.ZP.getActiveBrowserOrPopupWindowId();return g.ZP.isSelecting(e)?p.Z.clonePages(g.ZP.getSelectedPages(e)):p.Z.clonePages(Pe.List.of(g.ZP.unsafeGetActivePage(e)))},showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"74393bfb-4c31-4b25-afc4-471cb9d621ca",...(0,Ae.Z)("Clone Selected Tabs")},{name:"COMMAND_MOVE_TAB_TO_NEW_WINDOW",action:()=>p.Z.detachPage(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"d03d4bc8-26c4-49f6-b3ce-23980637ae76",...(0,Ae.Z)("Move Tab to New Window")},{name:"COMMAND_PIN_TAB",action:e=>p.Z.toggleSelectedPagesPinned(Se.ZP.getActiveBrowserOrPopupWindowId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8b413c0e-9024-4fbe-8813-68c76096c87b",...(0,Ae.Z)("Pin / Unpin Tab")},{name:"COMMAND_CLOSE_TAB",action:()=>p.Z.close(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"f0a3a628-6977-4812-ab11-96a1d1fbc08d",...(0,Ae.Z)("Close Tab")},{name:"COMMAND_CLOSE_TAB_TO_LEFT",action:()=>p.Z.closeToLeft(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cd97956b-c939-4271-9037-1676c70e4fa4",...(0,Ae.Z)("Close Tabs to the Left")},{name:"COMMAND_CLOSE_TAB_TO_RIGHT",action:()=>p.Z.closeToRight(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cfb3068d-5e79-4dac-a741-50879d4e81db",...(0,Ae.Z)("Close Tabs to the Right")},{name:"COMMAND_CLOSE_ALL_BUT_ACTIVE_TAB",action:Ne.Z.closeAllButActiveTab,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"275ca3f7-ecfb-4445-bf87-686cd473536e",...(0,Ae.Z)("Close Other Tabs")},{name:"COMMAND_TAB_THUMBNAIL",action:Ne.Z.toggleTabThumbnail,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"c46c994e-81a8-4b4b-ae15-4e64a643af7b",...(0,Ae.Z)("Tab Thumbnail")},{name:"COMMAND_SHOW_ABOUT",action:()=>p.Z.openURL(Fe.jk.internals.about),category:"CATEGORY_COMMAND_APPLICATION",withNoWindow:!0,isEnabled:()=>!0,showInQC:!0,guid:"b5396606-e86b-4cca-bd74-029f3c538423",...(0,Ae.Z)("About")},{name:"COMMAND_CHECK_FOR_UPDATES",action:()=>z.Z.autoUpdate.checkForUpdates(!0),showInQC:!Se.ZP.isGuestSession(),isEnabled:()=>!Se.ZP.isGuestSession(),withNoWindow:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"b4ef4439-df4a-4634-95f7-509c95e42b69",...(0,Ae.Z)("Check for Updates")},{name:"COMMAND_SHOW_COMMUNITY",action:()=>p.Z.openURL("https://vivaldi.net/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"cb626c77-47cd-46e3-9cf7-d976f50aadbd",...(0,Ae.Z)("Community Blogs")},{name:"COMMAND_TAB_SWITCH_BACK_SETTING",action:Ne.Z.switchTabBackBySetting,inMenu:!1,isEnabled:()=>!0,repeat:!0,showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"ee5eec5e-9ebf-4faf-b2ec-4fdba8b328d0",...(0,Ae.Z)("Tab Cycler Back")},{name:"COMMAND_TAB_SWITCH_FORWARD_SETTING",action:Ne.Z.switchTabForwardBySetting,inMenu:!1,repeat:!0,isEnabled:()=>!0,showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7c2836f2-93e5-445f-9674-46a29759ff34",...(0,Ae.Z)("Tab Cycler Forward")},{name:"COMMAND_TAB_SWITCH_BACK_ORDER",action:Ne.Z.switchTabBackByOrder,repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"9693c49b-29e0-442e-925d-d34d95f977a4",...(0,Ae.Z)("Previous Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_ORDER",action:Ne.Z.switchTabForwardByOrder,repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"037d899d-b191-49c7-a932-87d8881d7037",...(0,Ae.Z)("Next Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_HISTORY",action:Ne.Z.switchTabForwardByHistory,repeat:!0,isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a645ffdf-6235-425a-896e-3dfd8d4eebb1",...(0,Ae.Z)("Previous Tab (Recent)")},{name:"COMMAND_TAB_SWITCH_BACK_HISTORY",action:Ne.Z.switchTabBackByHistory,repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"0c39ac37-1deb-4dc8-bea4-54672978af06",...(0,Ae.Z)("Next Tab (Recent)")},{name:"COMMAND_TAB_MOVE_BACKWARD",action:()=>p.Z.stepActivePage(!1,"dotted"===v.ZP.get(G.kTabsStackingMode),Se.ZP.getActiveBrowserOrPopupWindowId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"bb5e2bde-67dd-40ff-9d87-43032f048b7a",...(0,Ae.Z)("Move Active Tab Backward")},{name:"COMMAND_TAB_MOVE_FORWARD",action:()=>p.Z.stepActivePage(!0,"dotted"===v.ZP.get(G.kTabsStackingMode),Se.ZP.getActiveBrowserOrPopupWindowId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8338b153-b32d-4a29-962e-cb3bbc5861d0",...(0,Ae.Z)("Move Active Tab Forward")},{name:"COMMAND_TAB_DISABLE_ALL_RELOADS",action:()=>f.Z.destroyAllPeriodicAlarms(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7d40d732-b025-4722-bc23-b66ada752339",...(0,Ae.Z)("Disable Periodic Timers")},{name:"COMMAND_TAB_PERIODIC_RELOAD",action:async e=>{const t=(0,Re.AE)(e),n=g.ZP.unsafeGetActivePage().getIn(["extData","ext_id"]),s=t/60;await f.Z.createPeriodicReloadAlarm({id:n,interval:s,from:"tab"})},showInQC:!0,inMenu:!1,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"bf7a3a4a-565a-46c7-835c-fa2a6d4b7fdf",...(0,Ae.Z)("tab","Periodic Reload")},{name:"COMMAND_PAGE_SELECTION_CURRENT",action:()=>p.Z.setSelection(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2cd718aa-76d4-4bd4-9c55-6117822d402e",...(0,Ae.Z)("other","Select Current Tab")},{name:"COMMAND_PAGE_SELECTION_EXPAND_PREVIOUS",action:()=>p.Z.expandSelectionPrevious(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"e245bce5-20a7-481f-910e-23bf1de86748",...(0,Ae.Z)("other","Select Previous Tab")},{name:"COMMAND_PAGE_SELECTION_EXPAND_NEXT",action:()=>p.Z.expandSelectionNext(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"23e27390-f1bf-4ec3-92b5-7634daeabc5b",...(0,Ae.Z)("other","Select Next Tab")},{name:"COMMAND_PAGE_SELECTION_TOGGLE_RELATED",action:()=>p.Z.toggleRelatedSelection(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7ef25cfa-632f-4872-832c-ca6c9dfb5769",...(0,Ae.Z)("other","Select Related Tabs")},{name:"COMMAND_PAGE_SELECTION_CLEAR",action:()=>p.Z.clearSelection(Se.ZP.getActiveBrowserOrPopupWindowId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cf44c36e-ab42-4700-a80e-93f5f504c72b",...(0,Ae.Z)("other","Deselect Tabs")},{name:"COMMAND_TAB_SWITCH_1",action:()=>p.Z.activateTabByIndex(0),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a4d46cc3-e258-4c20-ab39-3174ec9acbb9",...(0,Ae.Z)("Switch to Tab 1")},{name:"COMMAND_TAB_SWITCH_2",action:()=>p.Z.activateTabByIndex(1),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"3a792281-c3a3-4501-b64c-b5173206195d",...(0,Ae.Z)("Switch to Tab 2")},{name:"COMMAND_TAB_SWITCH_3",action:()=>p.Z.activateTabByIndex(2),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"5e570a93-4779-4266-aebe-f2abe0e081ae",...(0,Ae.Z)("Switch to Tab 3")},{name:"COMMAND_TAB_SWITCH_4",action:()=>p.Z.activateTabByIndex(3),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"34281a36-77c7-4f3c-99e1-73529174cfb6",...(0,Ae.Z)("Switch to Tab 4")},{name:"COMMAND_TAB_SWITCH_5",action:()=>p.Z.activateTabByIndex(4),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"71cd67b0-77bb-4cf3-a7ee-8e26462eb42e",...(0,Ae.Z)("Switch to Tab 5")},{name:"COMMAND_TAB_SWITCH_6",action:()=>p.Z.activateTabByIndex(5),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"d8b8a23c-f47b-4341-8adc-844cc52562b1",...(0,Ae.Z)("Switch to Tab 6")},{name:"COMMAND_TAB_SWITCH_7",action:()=>p.Z.activateTabByIndex(6),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"c537cc07-a3ff-4151-997c-40e25056e65d",...(0,Ae.Z)("Switch to Tab 7")},{name:"COMMAND_TAB_SWITCH_8",action:()=>p.Z.activateTabByIndex(7),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"710bb550-7dea-4436-9d0c-fea152299507",...(0,Ae.Z)("Switch to Tab 8")},{name:"COMMAND_TAB_SWITCH_9",action:()=>p.Z.activateTabByIndex(8),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"91f469f5-f527-433c-a1fa-2e3f399c7820",...(0,Ae.Z)("Switch to Tab 9")},{name:"COMMAND_TAB_SWITCH_LAST",action:p.Z.openLastPage,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"750d7779-97ec-493d-afa8-a62c179d6d82",...(0,Ae.Z)("Switch to the Last Tab")},{name:"COMMAND_HIBERNATE_OTHER_TABS",action:()=>(0,Re.Xf)(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"62655c2c-509d-40f9-aec9-d4428af56884",...(0,Ae.Z)("Hibernate Background Tabs")},{name:"COMMAND_SHOW_CLOSED_TABS",action:o.Z.onCommand.bind(o.Z,"COMMAND_SHOW_CLOSED_TABS"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"ba89f260-0036-4f93-95aa-11b65790621d",...(0,Ae.Z)("Show Closed Tabs")},{name:"COMMAND_TAB_REOPEN_RECENTLY_CLOSED",action:()=>Ee.Z.undeletePreviousTab(),tweakedShortcut:"ctrl+z",withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7e925f03-11a3-47b4-b092-e1c355661796",...(0,Ae.Z)("Reopen Closed Tab")},{name:"COMMAND_TAB_STACK_TILE_VERTICAL",action:Ne.Z.stackTileVertical,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"854f8a44-50bd-41bc-8277-acd51e719d1b",...(0,Ae.Z)("Tile Vertically")},{name:"COMMAND_TAB_STACK_TILE_HORIZONTAL",action:Ne.Z.stackTileHorizontal,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2991fb16-2df8-42b5-898a-25a0d028ac41",...(0,Ae.Z)("Tile Horizontally")},{name:"COMMAND_TAB_STACK_TILE_GRID",action:Ne.Z.stackTileGrid,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"83c2d2d0-a53b-4521-82b5-4c2e61ed024b",...(0,Ae.Z)("Tile to Grid")},{name:"COMMAND_TAB_STACK_UNTILE",action:Ne.Z.stackUntile,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a0294e45-6204-406e-b456-2664e4d23b24",...(0,Ae.Z)("Untile Tabs")},{name:"COMMAND_TAB_STACK_CREATE",action:Ne.Z.stackCreate,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cdd99010-5477-4508-aa28-d671de35dcb2",...(0,Ae.Z)("Stack Tabs")},{name:"COMMAND_TAB_STACK_DISSOLVE",action:Ne.Z.stackDissolve,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"61ab7d82-7602-4f72-9f00-07a426ff47c1",...(0,Ae.Z)("Unstack Tabs")},{name:"COMMAND_TAB_STACK_REMOVE",action:Ne.Z.stackRemove,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"56cf9bd1-63b1-4ebf-92b0-c909e5d479c6",...(0,Ae.Z)("Remove from Tab Stack")},{name:"COMMAND_TOGGLE_MOUSE_GESTURES",action:()=>_.Z.toggle(G.kMouseGesturesEnabled,!0,!1),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"01f9d07d-5ec6-41a4-927c-129cef008d65",...(0,Ae.Z)("Toggle Mouse Gestures")},{name:"COMMAND_TOGGLE_IMAGES",action:()=>p.Z.toggleImageLoading(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"6777b0a7-25d2-4e5e-a4e1-b5fcc0fcdef8",...(0,Ae.Z)("other","Load Images")},{name:"COMMAND_SET_LOAD_IMAGES_ALWAYS",action:()=>p.Z.setImageLoading("always"),behavior:"radio",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8d1f63a0-6e3c-42dd-a1b8-9a740f65bafe",...(0,Ae.Z)("other","Images On")},{name:"COMMAND_SET_LOAD_IMAGES_NEVER",action:()=>p.Z.setImageLoading("never"),behavior:"radio",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"e346b0a7-74c6-4e69-952e-420d33e54a8e",...(0,Ae.Z)("other","Images Off")},{name:"COMMAND_SET_LOAD_IMAGES_CACHE",action:()=>p.Z.setImageLoading("cache"),behavior:"radio",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"f016e79c-a799-465f-9d01-2869a751774c",...(0,Ae.Z)("other","Load Images From Cache")},{name:"COMMAND_SET_ANIMATIONS_LOOP",action:()=>Ie.Z.accessibilityFeatures.animationPolicy.set({value:"allowed"}),behavior:"radio",category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,showInQC:!0,guid:"080beb50-b815-4416-8a69-246907b2805a",...(0,Ae.Z)("other","Loop Animations")},{name:"COMMAND_SET_ANIMATIONS_NEVER",action:()=>Ie.Z.accessibilityFeatures.animationPolicy.set({value:"none"}),behavior:"radio",showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"1d4df136-9d8e-4541-b0b9-1a66a5b23444",...(0,Ae.Z)("other","No Animations")},{name:"COMMAND_SET_ANIMATIONS_ONCE",action:()=>Ie.Z.accessibilityFeatures.animationPolicy.set({value:"once"}),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"8159b932-9a12-4cef-bf84-f046ab3a2030",...(0,Ae.Z)("other","Play Animations Once")},{name:"COMMAND_PAGE_TOGGLE_MUTE",action:()=>p.Z.toggleMuting(Pe.List.of(g.ZP.unsafeGetActivePage())),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a6f425df-46e7-48f9-8be2-3b03329fa8d0",...(0,Ae.Z)("Mute / Unmute Tab")},{name:"COMMAND_PAGE_MUTE_OTHER",action:()=>p.Z.setMuting("other","mute"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",isEnabled:()=>!0,guid:"4cb148ba-cb83-4e4a-be3e-43b60a3f3982",...(0,Ae.Z)("Mute Other Tabs")},{name:"COMMAND_PAGE_MUTE_ALL",action:()=>p.Z.setMuting("all","mute"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"431a57f8-a637-41e5-a4de-1b1c3be081db",...(0,Ae.Z)("Mute All Tabs")},{name:"COMMAND_PAGE_UNMUTE_OTHER",action:()=>p.Z.setMuting("other","unmute"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"4dc07cbf-4c8b-42ed-8117-c123834a76c5",...(0,Ae.Z)("Unmute Other Tabs")},{name:"COMMAND_PAGE_UNMUTE_ALL",action:()=>p.Z.setMuting("all","unmute"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"9badb24d-1a7b-46fd-8e95-d50f93812911",...(0,Ae.Z)("Unmute All Tabs")},{name:"COMMAND_CAPTURE_PAGE_TO_DISK",action:()=>Ne.Z.capturePage("file"),isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2fe0abe5-421c-4d9d-83ef-16e9f9deb9bb",...(0,Ae.Z)("Capture Page to File")},{name:"COMMAND_CAPTURE_PAGE_TO_CLIPBOARD",action:()=>Ne.Z.capturePage("clipboard"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2a8349df-be2b-44e8-8db9-4f349a470790",...(0,Ae.Z)("Capture Page to Clipboard")},{name:"COMMAND_TAB_TRANSLATE_PAGE",action:e=>{const t=g.ZP.unsafeGetActivePage();if(t){const e=ve.Z.getPageState(t.id);if(e){if(!Boolean(e.isTranslated)&&e.pageLanguage&&""!==e.pageLanguage)return _e.Z.translatePage(t.id)}}},isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8d7a4844-f2d5-4cfe-abcd-e2fd99005a41",...(0,Ae.Z)("tab","Translate Page")},{name:"COMMAND_IMPORT_DATA",action:d.Z.showImportData,isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"6c851825-1e73-4ec5-ad5e-2ec9c826524c",...(0,Ae.Z)("command","Import from Applications or Files")},{name:"COMMAND_EXPORT_DATA",action:()=>Ie.Z.bookmarks.export(),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"fba8ba2b-f317-463a-b685-6d3fb7040845",...(0,Ae.Z)("Export Bookmarks")},{name:"COMMAND_EXPORT_NOTES",action:()=>Oe(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"fe0e224c-a903-4952-ae3d-d69d8777c24a",...(0,Ae.Z)("Export Notes")},{name:"COMMAND_IMPORT_NOTES",action:()=>Le(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"db20661f-37e9-4376-94c8-9aebc7a27628",...(0,Ae.Z)("Import Notes")},{name:"COMMAND_NEW_TAB_LINK",action:(e,t,n)=>p.Z.openURL(n,{addOpenerTabId:!0}),inMenu:!1,isEnabled:()=>!0,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"62966533-b4f6-4f86-a02c-9753948c6277",...(0,Ae.Z)("Open Link in New Tab (Over a Link)")},{name:"COMMAND_NEW_BACKGROUND_TAB_LINK",action:(e,t,n)=>Ne.Z.newBackgroundTab(n,!0),inMenu:!1,isEnabled:()=>!0,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"db3df40a-0d5f-4f87-a57a-cf9640e401c3",...(0,Ae.Z)("Open Link in Background Tab (Over a Link)")},{name:"COMMAND_READERVIEW_TOGGLE",action:()=>E.Z.toggleReaderMode(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",isEnabled:()=>!0,guid:"8dd47fc9-4c1f-4487-a475-f55bfa61aaf2",...(0,Ae.Z)("Toggle Reader View")},{name:"COMMAND_BOOKMARK_SELECTED_TABS",action:o.Z.onCommand.bind(o.Z,"COMMAND_BOOKMARK_SELECTED_TABS"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"12bef254-49e1-4205-b14e-acd4d3b4238b",...(0,Ae.Z)("Bookmark Selected Tabs")},{name:"COMMAND_SAVE_SESSION",action:d.Z.showSaveSession.bind(d.Z,{mode:"all"}),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"ec8eb1b8-53ef-48f8-bbdc-d0c44af2d5cd",...(0,Ae.Z)("command","Save All Tabs as Session")},{name:"COMMAND_SAVE_SELECTED_SESSION",action:o.Z.onCommand.bind(o.Z,"COMMAND_SAVE_SELECTED_SESSION"),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"0fe4c500-31cf-4d73-8dc1-281eb4259fe7",...(0,Ae.Z)("command","Save Selected Tabs as Session")},{name:"COMMAND_OPEN_SESSION",action:d.Z.showOpenSession,isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"4a65bd2a-ec3c-42ca-ac7a-67040fe8cebc",...(0,Ae.Z)("Open Saved Session")},{name:"COMMAND_ADD_BOOKMARK",action:()=>we.Z.doAction("addBookmark"),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"844219eb-ed35-4b17-a9f4-7789466c233c",...(0,Ae.Z)("Create Bookmark")},{name:"COMMAND_BLOCK_TRACKING",action:()=>{const{url:e}=g.ZP.unsafeGetActivePage();(0,De.Fe)(e,"tracking")},isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9afb77f2-d3d3-4596-8a04-58ab48a345fa",...(0,Ae.Z)("Block / Unblock Tracking")},{name:"COMMAND_BLOCK_TRACKING_AND_ADS",action:()=>{const{url:e}=g.ZP.unsafeGetActivePage();(0,De.Fe)(e,"ad_blocking")},isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"da2af162-2140-4aae-8366-3add4793ac17",...(0,Ae.Z)("Block / Unblock Ads and Tracking")},{name:"COMMAND_FOCUS_ADDRESSFIELD",action:()=>we.Z.doAction("focusAddressField"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"96a396d8-d485-4f61-926b-bdab1eddaf94",...(0,Ae.Z)("Focus Address Field")},{name:"COMMAND_SHOW_DOWNLOADS_POPOUT",action:()=>Ce.Z.toggleDownloadPopout(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"a1244975-7c9b-465d-90cf-da919d4598bf",isEnabled:()=>v.ZP.get(G.kDownloadsUsePopout),...(0,Ae.Z)("title","Downloads Popup")},{name:"COMMAND_PAGE_REFRESH",action:()=>{const e=g.ZP.unsafeGetActivePage();we.Z.reload(e.id,!1)},showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"bc31a027-870d-40ba-b3f1-20adcff8fff2",...(0,Ae.Z)("Reload Page")},{name:"COMMAND_PAGE_RELOAD_NOCACHE",action:()=>{const e=g.ZP.unsafeGetActivePage();we.Z.reload(e.id,!0)},showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"d92c060c-a9f7-490c-a4a0-8c5cccfa09dd",...(0,Ae.Z)("Force Page Reload")},{name:"COMMAND_PAGE_SCROLL_UP",action:()=>we.Z.doAction("pageScrollUp"),repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"078f10b2-1901-4f9e-97b3-1018f7633099",...(0,Ae.Z)("Page Up")},{name:"COMMAND_PAGE_SCROLL_DOWN",action:()=>we.Z.doAction("pageScrollDown"),repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"eae41430-4ed9-48e5-9e91-90aeefdb4b4e",...(0,Ae.Z)("Page Down")},{name:"COMMAND_PAGE_SCROLL_TOP",action:()=>we.Z.doAction("pageScrollTop"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"f74cd1f0-c90c-4a2e-8b7b-f06d88cad75a",...(0,Ae.Z)("Scroll Page to Top")},{name:"COMMAND_PAGE_SCROLL_BOTTOM",action:()=>we.Z.doAction("pageScrollBottom"),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",isEnabled:()=>!0,guid:"29bbb63b-b356-4dfe-aa45-9cf39d94d279",...(0,Ae.Z)("Scroll Page to Bottom")},{name:"COMMAND_FOCUS_WEBVIEW",action:()=>we.Z.doAction("focusWebView"),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",isEnabled:()=>!0,guid:"f71373d5-f966-4603-b7c5-a4a1722b3989",...(0,Ae.Z)("Focus Page")},{name:"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS",action:_.Z.toggle.bind(_.Z,G.kKeyboardShortcutsEnable,!0,!1),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"88d6a31d-9d50-4c8f-a9a2-207ac2b600c3",...(0,Ae.Z)("Disable Keyboard Shortcuts")},{name:"COMMAND_FOCUS_SEARCHFIELD",action:()=>we.Z.doAction("focusSearchField"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"eead069f-a0b5-4f2c-add7-051003353311",...(0,Ae.Z)("Focus Search Field")},{name:"COMMAND_FIND_IN_PAGE",action:()=>we.Z.doAction("findInPage"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"3686e24b-c64b-4402-9b79-d58dc92c29a8",...(0,Ae.Z)("Find in Page")},{name:"COMMAND_FIND_NEXT_IN_PAGE",action:()=>we.Z.doAction("findNextInPage"),repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"055c6e9c-2b9c-4170-aeb0-43f3caf35c3e",...(0,Ae.Z)("Find Next in Page")},{name:"COMMAND_FIND_PREVIOUS_IN_PAGE",action:()=>we.Z.doAction("findPreviousInPage"),repeat:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"ef2ad516-3e00-4e9f-9dc3-b1bccd1cc317",...(0,Ae.Z)("Find Previous in Page")},{name:"COMMAND_PAGE_BACK",action:we.Z.back,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"f8f93b48-b1ed-43c3-bd65-e7240fd76d3f",...(0,Ae.Z)("History Back")},{name:"COMMAND_PAGE_FORWARD",action:we.Z.forward,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"b00e2d3c-a9ba-49b8-bce7-1faf1894a5f3",...(0,Ae.Z)("History Forward")},{name:"COMMAND_PAGE_REWIND",action:l.Z.navigateRewind,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"67c60e96-fab2-433b-a012-107daa3856ef",...(0,Ae.Z)("History Rewind")},{name:"COMMAND_PAGE_FAST_FORWARD",action:l.Z.navigateFastforward,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"964655e4-0274-4e26-82a7-b15161958009",...(0,Ae.Z)("Fast Forward")},{name:"COMMAND_GO_TO_PARENT_DIRECTORY",action:()=>p.Z.gotoParentDirectory(g.ZP.unsafeGetActivePage()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"c74300b6-635c-4471-b930-8707f29aa94c",...(0,Ae.Z)("Go to Parent Directory")},{name:"COMMAND_PRINT_PAGE",action:()=>we.Z.doAction("print"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9fbbe402-d11b-479d-ab97-e7e6deb10d36",...(0,Ae.Z)("Print")},{name:"COMMAND_STOP_PAGE",action:we.Z.stop,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"77dfb30f-d825-4089-a042-c3f664c656b5",...(0,Ae.Z)("Stop Loading")},{name:"COMMAND_OPEN_PAGE",action:()=>{const e=Se.ZP.getActiveBrowserOrPopupWindowId();z.Z.utilities.openPage(e)},withNoWindow:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"e513ed70-7241-4722-83cb-4e8d10da8f02",...(0,Ae.Z)("a file","Open File")},{name:"COMMAND_SAVE_PAGE",action:()=>(0,Be.Jq)(g.ZP.unsafeGetActivePage().id),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"a60f2f63-dd5a-46a6-b425-40e423e88fc0",...(0,Ae.Z)("Save Page As")},{name:"COMMAND_SEARCH_WITH_SELECTION",action:()=>C.Z.withPageSelection(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"1599c08b-51f2-413b-a572-dcacb43560b2",...(0,Ae.Z)("Search with Selection")},{name:"COMMAND_MAIN_ZOOM",action:Te.Z.setPageZoomPercentage,category:"CATEGORY_COMMAND_APPEARANCE",isEnabled:()=>!0,showInQC:!0,guid:"9a6682a0-9a28-4e44-b9f9-fc554f02c363",...(0,Ae.Z)("Page Zoom")},{name:"COMMAND_MAIN_ZOOM_IN",action:()=>Te.Z.pageZoomIn(),isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"9f04836a-e0cb-4220-93dd-57d0a606ee11",...(0,Ae.Z)("Page Zoom In")},{name:"COMMAND_MAIN_ZOOM_OUT",action:()=>Te.Z.pageZoomOut(),isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"f68b5e96-3c0c-49cb-a8f9-d23b43182bc0",...(0,Ae.Z)("Page Zoom Out")},{name:"COMMAND_MAIN_ZOOM_HALF",action:()=>Te.Z.pageZoomHalf(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d5959c06-f090-4f5e-8470-7871986393ab",...(0,Ae.Z)("Page Zoom Out Half")},{name:"COMMAND_MAIN_ZOOM_DOUBLE",action:()=>Te.Z.pageZoomDouble(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"dd72265d-01e1-483e-a50f-5b018ca20151",...(0,Ae.Z)("Page Zoom In Double")},{name:"COMMAND_MAIN_ZOOM_RESET",action:()=>Te.Z.pageZoomReset(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"483984bb-e647-4ed5-aae8-f82ef947b450",...(0,Ae.Z)("Page Zoom Reset")},{name:"COMMAND_MAIN_UI_ZOOM",action:e=>Te.Z.setUIZoomPercentage(e),category:"CATEGORY_COMMAND_APPEARANCE",showInQC:!0,isEnabled:()=>!0,guid:"6884b1a9-0cfc-4456-8d1b-9cb73c99703f",...(0,Ae.Z)("UI Zoom")},{name:"COMMAND_MAIN_UI_ZOOM_IN",action:()=>Te.Z.uiZoomIn(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b56f4b61-eff8-4d57-af15-a19fba06c587",...(0,Ae.Z)("UI Zoom In")},{name:"COMMAND_MAIN_UI_ZOOM_OUT",action:()=>Te.Z.uiZoomOut(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d62013de-e829-4454-ab03-71a864341009",...(0,Ae.Z)("UI Zoom Out")},{name:"COMMAND_MAIN_UI_ZOOM_RESET",action:()=>Te.Z.setUIZoomPercentage(100),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a62aaffc-305b-4892-90c3-5839c0650260",...(0,Ae.Z)("UI Zoom Reset")},{name:"COMMAND_TAB_VIEW_PAGE_SOURCE",action:()=>{g.ZP.unsafeGetActivePage().isMailPage?o.Z.onCommand("COMMAND_TAB_VIEW_PAGE_SOURCE"):Ne.Z.viewPageSource()},showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"7c42ad51-fab5-46c5-acff-663947a13c96",...(0,Ae.Z)("View Page Source")},{name:"COMMAND_DEVELOPER_TOOLS",action:()=>z.Z.devtoolsPrivate.toggleDevtools("default"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"cdc3b594-d57f-417d-89ee-69be8facd3aa",...(0,Ae.Z)("Developer Tools")},{name:"COMMAND_DEVTOOLS_INSPECTOR",action:()=>z.Z.devtoolsPrivate.toggleDevtools("inspect"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"e6a1c7d5-21ad-4195-bc9e-95ebcb6ee2eb",...(0,Ae.Z)("Toggle Developer Tools")},{name:"COMMAND_DEVTOOLS_CONSOLE",action:()=>z.Z.devtoolsPrivate.toggleDevtools("console"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"1e335c06-1036-4b76-be45-20fea16ab840",...(0,Ae.Z)("Developer Tools Console")},{name:"COMMAND_SHOW_HOMEPAGE",action:()=>p.Z.showHomepage({inCurrent:!0}),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"51eac690-a178-4a3e-99dd-32c73f923559",...(0,Ae.Z)("title","Homepage")},{name:"COMMAND_TOGGLE_PANEL",action:b.Z.togglePanel,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"5cbd037c-973a-4c3d-aa43-5454bc0ec0e4",...(0,Ae.Z)("command","Panel")},{name:"COMMAND_FOCUS_PANEL",action:b.Z.setFocus,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"efaed294-3e8e-42fa-9a47-d121e6a11e5f",...(0,Ae.Z)("Focus Panel")},{name:"COMMAND_FOCUS_MAINMENU",action:o.Z.onCommand.bind(o.Z,"COMMAND_FOCUS_MAINMENU"),inMenu:!0,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"bb1fc5ee-68bd-4e4f-ae16-43269ada0f69",...(0,Ae.Z)("Focus Main Menu")},{name:"COMMAND_FOCUS_BOOKMARKBAR",action:o.Z.onCommand.bind(o.Z,"COMMAND_FOCUS_BOOKMARKBAR"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d2c3cb39-c495-4aca-bac5-23f2db06ccca",...(0,Ae.Z)("Focus Bookmarks Bar")},{name:"COMMAND_FOCUS_TABBAR",action:o.Z.onCommand.bind(o.Z,"COMMAND_FOCUS_TABBAR"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"ab5fd96a-effc-448f-afdf-2bef8cba6527",...(0,Ae.Z)("Focus Tab Bar")},{name:"COMMAND_FOCUS_PANELBAR",action:o.Z.onCommand.bind(o.Z,"COMMAND_FOCUS_PANELBAR"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"454b1c03-0570-4977-99e8-337a1aafdb70",...(0,Ae.Z)("Focus Panel Bar")},{name:"COMMAND_TOGGLE_FLOATING_PANEL",action:b.Z.toggleFloating,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b70131d8-1022-411e-89aa-096a8528ab45",...(0,Ae.Z)("Toggle Floating Panel")},{name:"COMMAND_SHOW_NEXT_PANEL",action:()=>b.Z.showNextPanel("next"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"302fdcd3-d914-418f-895d-c4ede9b6c02e",...(0,Ae.Z)("Open Next Panel")},{name:"COMMAND_SHOW_PREVIOUS_PANEL",action:()=>b.Z.showNextPanel("previous"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4569302b-1f24-440c-965c-da7f9bfca097",...(0,Ae.Z)("Open Previous Panel")},{name:"COMMAND_SHOW_BOOKMARK_PANEL",action:()=>b.Z.toggleContent("bookmarks"),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"48ee057a-93c3-4be5-903b-6d2e701ecb96",...(0,Ae.Z)("title","Bookmarks Panel")},{name:"COMMAND_TOGGLE_CURRENT_PANEL",action:b.Z.closePanel,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4128d533-256b-41f1-ba47-3c435ca3f2b4",...(0,Ae.Z)("Toggle Current Panel")},{name:"COMMAND_SHOW_MAIL_PANEL",action:()=>b.Z.toggleContent("mail"),showInQC:N.ZP.getIsMailWindow,isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),category:"CATEGORY_COMMAND_APPEARANCE",guid:"66a51de3-2c98-468a-ac92-0728cd798ca5",...(0,Ae.Z)("title","Mail Panel")},{name:"COMMAND_SHOW_CONTACTS_PANEL",action:()=>b.Z.toggleContent("contacts"),showInQC:N.ZP.getIsMailWindow,isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),category:"CATEGORY_COMMAND_APPEARANCE",guid:"9492e500-30da-44fc-a28b-88c22a06c304",...(0,Ae.Z)("title","Contacts Panel")},{name:"COMMAND_SHOW_DOWNLOADS_PANEL",action:()=>b.Z.toggleContent("downloads"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4fcaed1c-c5db-42a8-b47d-7e6674ecd252",...(0,Ae.Z)("title","Downloads Panel")},{name:"COMMAND_SHOW_NOTES_PANEL",action:()=>b.Z.toggleContent("notes"),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"96dc03a2-7c99-49ff-9055-f03ac6eb90fe",...(0,Ae.Z)("title","Notes Panel")},{name:"COMMAND_SHOW_HISTORY_PANEL",action:()=>b.Z.toggleContent("history"),isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d26038ee-d140-42c5-98b0-27f14b9a8645",...(0,Ae.Z)("title","History Panel")},{name:"COMMAND_SHOW_WINDOW_PANEL",action:()=>b.Z.toggleContent("tabs"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"7dc09b96-d5f1-4999-b2da-d8dd1f1e1651",...(0,Ae.Z)("title","Window Panel")},{name:"COMMAND_SHOW_TRANSLATE_PANEL",action:()=>b.Z.toggleContent("translate"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"ccba139c-9b00-42aa-88cf-6a04a8a15fa5",...(0,Ae.Z)("title","Translate Panel")},{name:"COMMAND_SHOW_WEB_PANEL_1",action:()=>b.Z.toggleContent("webpanel 1"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"9a724d62-6b4f-4bec-affe-31a05966ccf9",...(0,Ae.Z)("Web Panel 1")},{name:"COMMAND_SHOW_WEB_PANEL_2",action:()=>b.Z.toggleContent("webpanel 2"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a0ed3813-af8f-42af-8466-bbaf197bb5a6",...(0,Ae.Z)("Web Panel 2")},{name:"COMMAND_SHOW_WEB_PANEL_3",action:()=>b.Z.toggleContent("webpanel 3"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a28d673c-5242-4330-aff1-b5df09dfad7c",...(0,Ae.Z)("Web Panel 3")},{name:"COMMAND_SHOW_WEB_PANEL_4",action:()=>b.Z.toggleContent("webpanel 4"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a13f216c-d341-4057-a573-0b954dcde28f",...(0,Ae.Z)("Web Panel 4")},{name:"COMMAND_SHOW_WEB_PANEL_5",action:()=>b.Z.toggleContent("webpanel 5"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"e859c95a-52fc-4c30-87cc-768fd35cd5b9",...(0,Ae.Z)("Web Panel 5")},{name:"COMMAND_SHOW_WEB_PANEL_6",action:()=>b.Z.toggleContent("webpanel 6"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"61c088f8-a1b3-4a73-a359-08796372e33a",...(0,Ae.Z)("Web Panel 6")},{name:"COMMAND_SHOW_WEB_PANEL_7",action:()=>b.Z.toggleContent("webpanel 7"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"6fff7b4d-a154-4945-aacf-e57bc67afde8",...(0,Ae.Z)("Web Panel 7")},{name:"COMMAND_SHOW_WEB_PANEL_8",action:()=>b.Z.toggleContent("webpanel 8"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"26e5191f-7c81-4d3b-a499-e8945a9a6ec3",...(0,Ae.Z)("Web Panel 8")},{name:"COMMAND_SHOW_WEB_PANEL_9",action:()=>b.Z.toggleContent("webpanel 9"),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b0732781-fdf6-4ba8-8fcf-6d94f24edc37",...(0,Ae.Z)("Web Panel 9")},{name:"COMMAND_COPY_SELECTION_TO_NOTE",action:async()=>{const{id:e,url:t}=g.ZP.unsafeGetActivePage(),n=await z.Z.utilities.getSelectedText(e);await h.Z.createNote({content:n,url:t})},isEnabled:()=>!Se.ZP.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"fa2d0620-4233-4d59-ab5d-e868fb52ad03",...(0,Ae.Z)("Copy Selected Text to Note")},{name:"COMMAND_TRANSLATE_SELECTION",action:async()=>{const{id:e,url:t}=g.ZP.unsafeGetActivePage(),n=await z.Z.utilities.getSelectedText(e);n&&c.Z.canTranslateSelection(t,n)&&_e.Z.translateSelection(e,n)},isEnabled:()=>!0,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"25326646-7412-4be5-b478-6e74f1190a56",...(0,Ae.Z)("Translate Selected Text")},{name:"COMMAND_PAGE_QR_CODE",action:()=>{const{id:e}=g.ZP.unsafeGetActivePage();z.Z.utilities.createQRCode(e)},showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"fef3ca9a-341e-4814-9709-d9a070263882",...(0,Ae.Z)("Create QR Code for Active Page")},{name:"COMMAND_SPATNAV_LEFT",action:()=>be.left(),repeat:!0,inMenu:!1,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"466272ae-7b00-4113-bdb3-159ae29e848c",...(0,Ae.Z)("Spatial Navigation Left")},{name:"COMMAND_SPATNAV_UP",action:()=>be.up(),repeat:!0,inMenu:!1,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"527416b5-8d0f-4d05-b251-9a1c70cbbb11",...(0,Ae.Z)("Spatial Navigation Up")},{name:"COMMAND_SPATNAV_RIGHT",action:()=>be.right(),repeat:!0,inMenu:!1,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"0a095dee-caba-457d-b119-6a9cc12c9496",...(0,Ae.Z)("Spatial Navigation Right")},{name:"COMMAND_SPATNAV_DOWN",action:()=>be.down(),repeat:!0,inMenu:!1,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"b554b968-c3b1-4522-a927-07d3d5bf74a3",...(0,Ae.Z)("Spatial Navigation Down")},{name:"COMMAND_CLIPBOARD_UNDO",action:()=>a.Z.undo(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"fb89c51c-3fe7-4bab-b9f6-27174e89b76d",...(0,Ae.Z)("win_linux","Undo")},{name:"COMMAND_CLIPBOARD_REDO",action:()=>a.Z.redo(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"cfd7113d-8501-4fee-b8e3-c776297620d5",...(0,Ae.Z)("win_linux","Redo")},{name:"COMMAND_CLIPBOARD_CUT",action:()=>a.Z.cut(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ef5d4a31-9ca0-424e-a3af-ec9770084dca",...(0,Ae.Z)("win_linux","Cut")},{name:"COMMAND_CLIPBOARD_COPY",action:()=>a.Z.copy(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"6dae1e1a-695b-41c5-9ca9-deb1fabe9cc9",...(0,Ae.Z)("win_linux","Copy")},{name:"COMMAND_CLIPBOARD_PASTE",action:()=>a.Z.paste(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"aa12b05a-94cf-4660-8272-37da19294192",...(0,Ae.Z)("win_linux","Paste")},{name:"COMMAND_CLIPBOARD_SELECT_ALL",action:()=>a.Z.selectAll(Se.ZP.getId()),showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ce41214f-6878-42ef-b120-3deb06cfcf2e",...(0,Ae.Z)("win_linux","Select All")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT",action:()=>a.Z.pasteAsPlainText(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"bac47f7e-084f-4255-b27e-24f767aa300b",...(0,Ae.Z)("Paste as Plain Text")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO",action:()=>a.Z.pasteAsPlainTextOrPasteAndGo(Se.ZP.getId()),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!0,isEnabled:()=>!0,guid:"1ca0b67d-f911-4141-949b-09c728430f2f",...(0,Ae.Z)("Paste and Go")},{name:"COMMAND_CLIPBOARD_PASTE_AS_NOTE",action:a.Z.createNoteFromSelection,showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"eb19c8a1-019b-4eea-a159-4e7efaa7737a",...(0,Ae.Z)("Paste to New Note")},{name:"COMMAND_WINDOW_MINIMIZE",action:()=>ye.Z.minimize(Se.ZP.getId()),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"855ad23f-900b-42bf-af4d-4ce6b419ce09",...(0,Ae.Z)("Minimize")},{name:"COMMAND_WINDOW_MINIMIZE_ALL",action:()=>ye.Z.minimizeAll(),showInQC:!0,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9f6124ef-e8ed-4143-b9ca-5a4beb646e3d",...(0,Ae.Z)("Minimize All")},{name:"COMMAND_HIDE_OTHERS",action:()=>{},showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"f1a77d87-7c3c-45be-9402-91d111381491",...(0,Ae.Z)("Hide Others")},{name:"COMMAND_HIDE_VIVALDI",action:()=>{},showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"75e245b8-1cce-44e3-87f5-2cade5e26f6a",...(0,Ae.Z)("Hide $1",["Vivaldi"])},{name:"COMMAND_SHOW_ALL",action:()=>{},showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"776628a4-a989-4373-922b-b16477bbb811",...(0,Ae.Z)("mac","Show All")},{name:"COMMAND_OPEN_LINK",action:()=>{},withNoWindow:!0,inMenu:!1,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"e1ecbf58-47e1-4eb1-92f5-3ff610aadd53",...(0,Ae.Z)("Open Link")},{name:"COMMAND_IMPORT_CALENDAR",action:d.Z.showImportCalendar,isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"625f8ff2-0498-4505-a661-286572c62c7b",...(0,Ae.Z)("Import Calendar")},{name:"COMMAND_SHOW_CALENDAR",action:()=>d.Z.showCalendar(),withNoWindow:!0,isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"67287254-750b-4dbd-b290-cdc1b4906c2c",...(0,Ae.Z)("Calendar")},{name:"COMMAND_SHOW_CALENDAR_PANEL",action:()=>b.Z.toggleContent("calendar"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a01cf36b-2f32-4919-924b-80e4e14a41b2",...(0,Ae.Z)("title","Calendar Panel")},{name:"COMMAND_ADD_CALENDAR_EVENT",action:d.Z.showAddEvent.bind("",""),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"594afe15-9134-49e6-9aa8-1f50b0925ef8",...(0,Ae.Z)("Add Calendar Event (Dialog)")},{name:"COMMAND_ADD_NEW_CALENDAR_ACCOUNT",action:d.Z.showCalendarAccountDialog,isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"a379c8cf-024b-49b5-94ac-9a8ac279e048",...(0,Ae.Z)("Add New Calendar Account")},{name:"COMMAND_CALENDAR_VIEWMODE_DAY",action:()=>r.Z.setViewMode(r.Z.getPageId(),"day"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"34b14e6c-de7d-4b66-819f-7ab80b1bb255",...(0,Ae.Z)("Day View")},{name:"COMMAND_CALENDAR_VIEWMODE_WEEK",action:()=>r.Z.setViewMode(r.Z.getPageId(),"week"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"4c6371b0-0217-4c6d-b4f7-7a5f100375c3",...(0,Ae.Z)("Week View")},{name:"COMMAND_CALENDAR_VIEWMODE_MULTIWEEK",action:()=>r.Z.setViewMode(r.Z.getPageId(),"multiweek"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"0f2eaffe-fbad-452e-858e-1edcfd8a746e",...(0,Ae.Z)("Multi Week View")},{name:"COMMAND_CALENDAR_VIEWMODE_MONTH",action:()=>r.Z.setViewMode(r.Z.getPageId(),"month"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"2a5db361-313a-43b6-a0e9-f51d304aec7c",...(0,Ae.Z)("Month View")},{name:"COMMAND_CALENDAR_VIEWMODE_YEAR",action:()=>r.Z.setViewMode(r.Z.getPageId(),"year"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"1f261447-d1b1-473f-bb07-6139fd878ea2",...(0,Ae.Z)("Year View")},{name:"COMMAND_CALENDAR_VIEWMODE_AGENDA",action:()=>r.Z.setViewMode(r.Z.getPageId(),"agenda"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"925c843d-4813-4ea5-8837-211412707dbf",...(0,Ae.Z)("Agenda View")},{name:"COMMAND_CALENDAR_VIEW_NEXT_PERIOD",action:()=>r.Z.viewNextPeriod(r.Z.getPageId()),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"0f8df2a2-343b-43db-a16c-16418dc9f241",...(0,Ae.Z)("View Next Period")},{name:"COMMAND_CALENDAR_VIEW_PREVIOUS_PERIOD",action:()=>r.Z.viewPreviousPeriod(r.Z.getPageId()),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"4601bd8c-4229-442c-8dec-df8171c4da1d",...(0,Ae.Z)("View Previous Period")},{name:"COMMAND_CALENDAR_VIEW_TODAY",action:()=>r.Z.selectToday(r.Z.getPageId()),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"44e98ded-fa2d-4ee4-a7f6-e705ac809503",...(0,Ae.Z)("View Today")},{name:"COMMAND_CALENDAR_VIEW_ZOOM_IN",action:()=>r.Z.zoomViewMode(r.Z.getPageId(),-1),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"940d0a90-6337-4d42-b317-13630fa38697",...(0,Ae.Z)("Zoom View In")},{name:"COMMAND_CALENDAR_VIEW_ZOOM_OUT",action:()=>r.Z.zoomViewMode(r.Z.getPageId(),1),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),feature:"calendar",showInQC:!0,category:"CATEGORY_COMMAND_CALENDAR",guid:"8c03403a-77fd-4920-aad9-c47ecee1a115",...(0,Ae.Z)("Zoom View Out")},{name:"COMMAND_CALENDAR_CREATE_EVENT",action:()=>r.Z.editEventCommand(r.Z.getPageId()),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,feature:"calendar",category:"CATEGORY_COMMAND_CALENDAR",guid:"1559362f-6274-4590-a260-a660b71dfcd5",...(0,Ae.Z)("Create Event")},{name:"COMMAND_CALENDAR_GOTO_DATE",action:o.Z.onCommand.bind(o.Z,"COMMAND_CALENDAR_GOTO_DATE"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,feature:"calendar",category:"CATEGORY_COMMAND_CALENDAR",guid:"6c6537e4-75a3-43f0-93e1-9f3765d0c686",...(0,Ae.Z)("Go to Date")},{name:"COMMAND_CALENDAR_SEARCH",action:o.Z.onCommand.bind(o.Z,"COMMAND_CALENDAR_SEARCH"),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,feature:"calendar",category:"CATEGORY_COMMAND_CALENDAR",guid:"55a8cf5d-e711-4ce4-a02f-55cf31ffcda8",...(0,Ae.Z)("Search in Calendar")},{name:"COMMAND_CALENDAR_REFRESH",action:()=>r.Z.pollAllCalDAVAccountsWithStatus(),isEnabled:()=>!Se.ZP.isGuestSession()&&!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,feature:"calendar",category:"CATEGORY_COMMAND_CALENDAR",guid:"1d59f64f-9e47-491c-93eb-fe66fc099279",...(0,Ae.Z)("Refresh Calendar")},{name:"COMMAND_MAIL_COMPOSE_NEW_MESSAGE",action:()=>m.Z.createDraft(),showInQC:!0,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",guid:"1c54b411-5b73-4eba-b5bf-6787d1f377fe",category:"CATEGORY_COMMAND_MAIL",...(0,Ae.Z)("command","Compose New Message")},{name:"COMMAND_SHOW_MAIL",action:()=>d.Z.showMail(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),guid:"670dbed7-f692-4fa4-a926-fe46183b82bb",category:"CATEGORY_COMMAND_APPLICATION",...(0,Ae.Z)("Mail")},{name:"COMMAND_MAIL_REPLY",action:()=>s.ZP.reply(),isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"fa9e273b-11fd-4be9-b77e-461a1e9fcc4e",...(0,Ae.Z)("Reply to Message")},{name:"COMMAND_MAIL_REPLY_ALL",action:()=>s.ZP.replyAll(),showInQC:!0,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",category:"CATEGORY_COMMAND_MAIL",guid:"cc59e4b7-c907-48b7-9057-f4dc2ae9c552",...(0,Ae.Z)("Reply All")},{name:"COMMAND_MAIL_FORWARD",action:()=>s.ZP.forward(),isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"f45c60df-9ca1-444e-8108-656b0a15c68e",...(0,Ae.Z)("mail","Forward Message")},{name:"COMMAND_MAIL_DELETE_PERMANENTLY",action:()=>s.ZP.prepareDelete(!0,void 0),isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"7b0de3f1-2173-4bde-96bf-f9fa1063abe7",...(0,Ae.Z)("Delete Permanently")},{name:"COMMAND_MAIL_DELETE_ALL_PERMANENTLY",action:()=>u.Z.deleteEntriesFromFolderCmd(),isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"f00fc3db-c1c9-460e-acad-16495b522b8e",...(0,Ae.Z)("Delete All Permanently")},{name:"COMMAND_MAIL_MARK_READ",action:s.ZP.markRead,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"02a17cf8-4e45-4d32-b06c-38edf99544da",...(0,Ae.Z)("mail","Mark Message as Read")},{name:"COMMAND_MAIL_GOTO_NEXT_UNREAD",action:s.ZP.goToNextUnread,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"75f673af-21e8-43f2-8aa8-b96b8dbd0245",...(0,Ae.Z)("mail","Next Unread")},{name:"COMMAND_MAIL_GOTO_PREVIOUS_UNREAD",action:s.ZP.goToPreviousUnread,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"24aab8e7-7bd0-470d-88f8-5ecdb1f19224",...(0,Ae.Z)("mail","Previous Unread")},{name:"COMMAND_MAIL_MARK_ALL_READ",action:u.Z.setAllMailsInFolderAsReadCmd,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"c929109f-99fa-45a5-80ca-9a3fdd17bd63",...(0,Ae.Z)("mail","Mark All as Read")},{name:"COMMAND_MAIL_MARK_THREAD_READ",action:s.ZP.markThreadRead,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"3110cb8a-11eb-4643-b834-f88ee1bf0155",...(0,Ae.Z)("mail","Mark Message Thread as Read")},{name:"COMMAND_MAIL_MARK_THREAD_UNREAD",action:s.ZP.markThreadUnread,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"655c64c3-8e8f-44ff-a7bf-a05f2c9a6115",...(0,Ae.Z)("mail","Mark Message Thread as Unread")},{name:"COMMAND_MAIL_MARK_UNREAD",action:s.ZP.markUnread,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"6b193cc2-62ca-41a8-9a17-d311541aef54",...(0,Ae.Z)("mail","Mark Message as Unread")},{name:"COMMAND_MAIL_ENABLE_SENDER_VIEW",action:s.ZP.enableSenderView,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"61ab202a-46ad-45ce-92b9-85c3295ef801",...(0,Ae.Z)("mail","Show Messages from Sender")},{name:"COMMAND_MAIL_ENABLE_THREADED_VIEW",action:s.ZP.enableThreadedView,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"5c21bfa1-f0b2-4804-a395-71243d99dad8",...(0,Ae.Z)("mail","Show Message Thread")},{name:"COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD",action:s.ZP.markAsReadAndGoToNextUnread,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),feature:"mail",showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"92f285b0-90dc-4051-940e-eefee7b4692f",...(0,Ae.Z)("mail","Mark Message as Read and Go to Next Unread")},{name:"COMMAND_MAIL_ADD_NEW_MAIL_ACCOUNT",action:d.Z.showMailAccountDialog,isEnabled:()=>!v.ZP.get(G.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"2b65911f-8bfc-4e9b-bf43-b78bfc7c4587",...(0,Ae.Z)("mail","Add New Mail Account")}]},85909:(e,t,n)=>{"use strict";n.d(t,{lE:()=>r,sK:()=>a,u4:()=>o,YI:()=>l});var s=n(70253),i=n(63057);const r=s.M.pb.map((([e,t,n])=>({key:e,value:(0,i.Z)(t),local:n}))),a=[{key:"am",value:(0,i.Z)("Amharic"),local:"amarəñña"},{key:"ar",value:(0,i.Z)("Arabic"),local:"اَلْعَرَبِيَّةُ"},{key:"bn",value:(0,i.Z)("Bengali"),local:"baɛṅlā"},{key:"bs",value:(0,i.Z)("Bosnian"),local:"bosanski"},{key:"ca",value:(0,i.Z)("Catalan"),local:"català"},{key:"ceb",value:(0,i.Z)("Cebuano"),local:"Sinugboanon"},{key:"co",value:(0,i.Z)("Corsican"),local:"corsu"},{key:"cy",value:(0,i.Z)("Welsh"),local:"Cymraeg"},{key:"eo",value:(0,i.Z)("Esperanto"),local:"Esperanto"},{key:"eu",value:(0,i.Z)("Basque"),local:"euskara"},{key:"ga",value:(0,i.Z)("Irish Gaelic"),local:"Gaeilge"},{key:"gl",value:(0,i.Z)("Galician"),local:"Galego"},{key:"gu",value:(0,i.Z)("Gujarati"),local:"gujarātī"},{key:"ha",value:(0,i.Z)("Hausa"),local:"ḥawsa"},{key:"haw",value:(0,i.Z)("Hawaiian"),local:"ʻōlelo Hawaiʻi"},{key:"he",value:(0,i.Z)("Hebrew"),local:"עברית / עִבְרִית"},{key:"hi",value:(0,i.Z)("Hindi"),local:"हिन्दी"},{key:"hmn",value:(0,i.Z)("Hmong, Mong"),local:"Hmong"},{key:"ht",value:(0,i.Z)("Haitian Creole"),local:"Kreyòl ayisyen"},{key:"ig",value:(0,i.Z)("Igbo"),local:"igbo"},{key:"jv",value:(0,i.Z)("Javanese"),local:"basa Jawa"},{key:"ka",value:(0,i.Z)("Georgian"),local:"ქართული"},{key:"kk",value:(0,i.Z)("Kazakh"),local:"Қазақ тілі"},{key:"km",value:(0,i.Z)("Khmer"),local:"ភាសាខ្មែរ"},{key:"kn",value:(0,i.Z)("Kannada"),local:"ಕನ್ನಡ (kannaḍa)"},{key:"ky",value:(0,i.Z)("Kyrgyz"),local:"قىرعىز تىلى"},{key:"la",value:(0,i.Z)("Latin"),local:"Lingua Latina"},{key:"lb",value:(0,i.Z)("Luxembourgish"),local:"Lëtzebuergesch"},{key:"lo",value:(0,i.Z)("Lao"),local:"ພາສາລາວ"},{key:"lv",value:(0,i.Z)("Latvian"),local:"latviešu valoda"},{key:"mg",value:(0,i.Z)("Malagasy"),local:"Fiteny Malagasy"},{key:"mi",value:(0,i.Z)("Maori"),local:"te Reo Māori"},{key:"mk",value:(0,i.Z)("Macedonian"),local:"македонски"},{key:"ml",value:(0,i.Z)("Malayalam"),local:"മലയാളം"},{key:"mn",value:(0,i.Z)("Mongolian"),local:"монгол"},{key:"mr",value:(0,i.Z)("Marathi"),local:"मराठी"},{key:"ms",value:(0,i.Z)("Malay"),local:"Bahasa melayu"},{key:"mt",value:(0,i.Z)("Maltese"),local:"Malti"},{key:"my",value:(0,i.Z)("Burmese"),local:"ဗမာစကား"},{key:"ne",value:(0,i.Z)("Nepali"),local:"नेपाली"},{key:"ny",value:(0,i.Z)("Chichewa"),local:"Chicheŵa"},{key:"or",value:(0,i.Z)("Oriya"),local:"ଓଡ଼ିଆ"},{key:"pa",value:(0,i.Z)("Punjabi"),local:"ਪੰਜਾਬੀ / ﺏﺎﺠﻨﭘ"},{key:"ps",value:(0,i.Z)("Pashto"),local:"پښتو"},{key:"rw",value:(0,i.Z)("Kinyarwanda"),local:"Ikinyarwanda"},{key:"sd",value:(0,i.Z)("Sindhi"),local:"سنڌي"},{key:"si",value:(0,i.Z)("Sinhala"),local:"සිංහල"},{key:"sm",value:(0,i.Z)("Samoan"),local:"Gagana Samoa"},{key:"sn",value:(0,i.Z)("Shona"),local:"chiShona"},{key:"so",value:(0,i.Z)("Somali"),local:"af Soomaali"},{key:"st",value:(0,i.Z)("Southern Sotho"),local:"seSotho"},{key:"su",value:(0,i.Z)("Sundanese"),local:"Basa Sunda"},{key:"sw",value:(0,i.Z)("Swahili"),local:"Kiswahili"},{key:"ta",value:(0,i.Z)("Tamil"),local:"தமிழ்"},{key:"te",value:(0,i.Z)("Telugu"),local:"తెలుగు"},{key:"tg",value:(0,i.Z)("Tajik"),local:"тоҷики / toçikī / تاجيكي"},{key:"th",value:(0,i.Z)("Thai"),local:"ภาษาไทย"},{key:"tk",value:(0,i.Z)("Turkmen"),local:"түркmенче"},{key:"tl",value:(0,i.Z)("Tagalog"),local:"Tagalog"},{key:"tt",value:(0,i.Z)("Tatar"),local:"татарча / tatar tele / تاتارچا"},{key:"ug",value:(0,i.Z)("Uyghur"),local:"Уйғур /ئۇيغۇر"},{key:"ur",value:(0,i.Z)("Urdu"),local:"اُردُو"},{key:"uz",value:(0,i.Z)("Uzbek"),local:"o’zbek tili ўзбек тили"},{key:"xh",value:(0,i.Z)("Xhosa"),local:"isiXhosa"},{key:"yi",value:(0,i.Z)("Yiddish"),local:"ײִדיש"},{key:"yo",value:(0,i.Z)("Yoruba"),local:"Yorùbá"},{key:"zu",value:(0,i.Z)("Zulu"),local:"isiZulu"}],o=["de-CH","en-GB","ja-KS","nn","pt-BR"],l={"en-US":"en",nb:"no","pt-PT":"pt",sr:"sr-Cyrl","zh-CN":"zh-Hans","zh-TW":"zh-Hant",iw:"he"}},91355:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(2324),i=n(50063);const r=new class{m3GetAll(){return s.Z.transaction("rw",[s.Z.searchList,s.Z.filters],(()=>s.Z.filters.where("[accountId+path]").equals([i.of,i.J8]).first().then((e=>{if(!e)throw new Error("Outbox filter not found");return s.Z.searchList.where("sourceFilterIds").equals(e.id).toArray()}))))}}},55079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(2324);const i=function(e){return s.Z.buffer.add(e)}},74311:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(2324);const i=async function(e){return s.Z.searchList.get(e)}},82045:e=>{e.exports={OptionalBlueprint:{getClasses:()=>"",getIconClass:()=>"",Icon:()=>null}}},44025:(e,t,n)=>{"use strict";n.d(t,{mh:()=>m,w$:()=>p,xy:()=>f,YC:()=>C,CS:()=>w,$0:()=>S,Z7:()=>k,pM:()=>Z,QB:()=>P,cw:()=>D,m7:()=>M,Gp:()=>x,Gr:()=>L,d6:()=>B,D1:()=>F,Rf:()=>U,jk:()=>V});n(45447);var s=n(21622),i=n(63057),r=n(42954),a=n(7509),o=n(30074),l=n(85612);function c(e,t){let n=e;if(t.displayUrl){const s=(0,a.DP)(e);n=t.displayUrl+(t.copyParams&&s.path?"/"+s.path+"/":"/")}else n="";return n}function u(e,t){const n=(t.url||"").includes("?")?"&":"?",[s,i]=e.slice(t.displayUrl.length).split("?"),r=new URLSearchParams(i);s&&"/"!==s&&r.append("path",(0,a.Iw)(s));const o=t.copyParams&&e.length>t.displayUrl.length?r.toString():"";return(t.url||"")+(o?n+o:"")}const m={general:{title:(0,i.Z)("General"),icon:l.ZuY},appearance:{title:(0,i.Z)("Appearance"),icon:l.Eo7},themes:{title:(0,i.Z)("Themes"),icon:l.jL_},startpage:{title:(0,i.Z)("title","Start Page"),icon:l.VPD},tabs:{title:(0,i.Z)("Tabs"),icon:l.zoD.medium},panel:{title:(0,i.Z)("title","Panel"),icon:l.sxI.medium},addressbar:{title:(0,i.Z)("title","Address Bar"),icon:l.xMN},bookmarks:{title:(0,i.Z)("Bookmarks"),icon:l.CLf.medium},qc:{title:(0,i.Z)("Quick Commands"),icon:l.Znx},keyboard:{title:(0,i.Z)("Keyboard"),icon:l.eIC},mouse:{title:(0,i.Z)("Mouse"),icon:l.uvK},search:{title:(0,i.Z)("noun","Search"),icon:l.YvR.medium},privacy:{title:(0,i.Z)("Privacy"),icon:l.sgm},downloads:{title:(0,i.Z)("Downloads"),icon:l.izi.medium},sync:{title:(0,i.Z)("Sync"),icon:l.ssx.medium},webpages:{title:(0,i.Z)("Webpages"),icon:l.c8X},network:{title:(0,i.Z)("Network"),icon:l.G0E},mail:{section:"mail",title:(0,i.Z)("Mail"),icon:l.lvj.medium},rss:{title:(0,i.Z)("Feeds"),icon:l.ZU_.medium},calendar:{title:(0,i.Z)("Calendar"),icon:l.bcq.medium},chat:{title:(0,i.Z)("Chat"),icon:l.yt5.medium},all:{title:(0,i.Z)("Display All"),icon:l.bqs.medium}},d={"vivaldi://settings/":"settings","vivaldi://startpage/":"startpage","vivaldi://bookmarks/":"bookmarks","vivaldi://history/":"history","vivaldi://calendar/":"calendar","vivaldi://chat/":"chat","vivaldi://mailpage/":"mailpage","vivaldi://saga/":"saga","chrome://saga/":"saga","vivaldi://guest-intro/":"guest-intro","vivaldi://private-intro/":"private-intro","vivaldi://welcome/":"welcome","vivaldi://themecolors/":"themecolors","vivaldi://experiments/":"experiments","vivaldi://actionlog/":"actionlog","vivaldi://notes/":"notes"},h={"vivaldi://settings/":l.bqs.medium,"vivaldi:settings":l.bqs.medium,"vivaldi://startpage/":l.VPD,"vivaldi:startpage":l.VPD,"vivaldi://bookmarks/":l.CLf.medium,"vivaldi:bookmarks":l.CLf.medium,"vivaldi://history/":l.hcy.medium,"vivaldi:history":l.hcy.medium,"vivaldi://calendar/":l.bcq.medium,"vivaldi:calendar":l.bcq.medium,"vivaldi://chat/":l.yt5.medium,"vivaldi:chat":l.yt5.medium,"vivaldi://mailpage/":l.lvj.medium,"vivaldi:mailpage":l.lvj.medium,"vivaldi://themecolors/":l.jL_,"vivaldi:themecolors":l.jL_,"vivaldi://notes/":l.cyI.medium,"vivaldi:notes":l.cyI.medium,"vivaldi://game/":"chrome://game/","vivaldi:game":"chrome://game/","vivaldi://saga/":"chrome://saga/","vivaldi:saga":"chrome://saga/"};function p(e){return e.startsWith("vivaldi:")?h[e]||l.ZuY:e}const g=["settings","startpage","bookmarks","history","calendar","chat","notes","mailpage","private-intro","experiments"],b=["chrome://settings/"],N={settings:`${r.oP}/components/settings/settings.html`,startpage:`${r.u7}/startpage`,bookmarks:`${r.u7}/startpage?section=bookmarks`,history:`${r.u7}/startpage?section=history`,notes:`${r.u7}/startpage?section=notes`,calendar:`${r.u7}/startpage?section=calendar`,mailpage:`${r.oP}/components/mail/mail.html`,chat:`${r.oP}/components/mail/chat.html`,saga:`${r.oP}/saga/saga.html`,"guest-intro":`${r.oP}/components/guest-intro/guest-intro.html`,"private-intro":`${r.oP}/components/private-intro/private-intro.html`,welcome:`${r.oP}/components/welcome/welcome.html`,themecolors:`${r.oP}/components/themecolors/themecolors.html`,experiments:`${r.oP}/components/experiments/experiments.html`,actionlog:`${r.oP}/components/actionlog/actionlog.html`},f={...N,about:"chrome://version","vivaldi-urls":"chrome://chrome-urls",blankpage:"about:blank",extensions:"chrome://extensions",game:"chrome://game",saga:"chrome://saga"},_=[f.settings,f.bookmarks,f.history,f.notes,f.calendar,f.mailpage,f.chat,f.themecolors,f.experiments,f.actionlog,f.game],v=[{displayUrl:"vivaldi://history",url:f.history,copyParams:!0},{displayUrl:"vivaldi://calendar",url:f.calendar,copyParams:!0},{displayUrl:"vivaldi://notes",url:f.notes,copyParams:!0},{displayUrl:"vivaldi://bookmarks",url:f.bookmarks,copyParams:!0},{displayUrl:"vivaldi://settings",url:f.settings,copyParams:!0},{displayUrl:"",url:f.startpage,copyParams:!1},{displayUrl:"vivaldi://startpage",url:f.startpage,copyParams:!1},{displayUrl:"",url:"chrome://newtab",copyParams:!1},{displayUrl:"",url:f.blankpage,copyParams:!1},{displayUrl:"vivaldi://mail",url:f.mailpage,copyParams:!0},{displayUrl:"vivaldi://saga",url:f.saga,copyParams:!0},{displayUrl:"vivaldi://chat",url:f.chat,copyParams:!0},{displayUrl:"vivaldi://about",url:f.about,copyParams:!0},{displayUrl:"vivaldi://help",url:"https://vivaldi.com/help",copyParams:!0},{displayUrl:"vivaldi://vivaldi-urls",url:f["vivaldi-urls"],copyParams:!0},{displayUrl:"vivaldi://extensions",url:"chrome://extensions",copyParams:!0},{displayUrl:"vivaldi://guest-intro",url:f["guest-intro"],copyParams:!0},{displayUrl:"",url:f["private-intro"],copyParams:!0},{displayUrl:"vivaldi://welcome",url:f.welcome,copyParams:!0},{displayUrl:"vivaldi://themecolors",url:f.themecolors,copyParams:!0},{displayUrl:"vivaldi://experiments",url:f.experiments,copyParams:!0},{displayUrl:"vivaldi://actionlog",url:f.actionlog,copyParams:!0},{displayUrl:"vivaldi://game",url:f.game,copyParams:!1},{displayUrl:"about:blank",url:"about:blank",copyParams:!1,mapUrlToDisplayUrl:e=>e},{displayUrl:"about:about",url:f.about,copyParams:!1},{displayUrl:"chrome://history",url:f.history,copyParams:!0},{displayUrl:"chrome://bookmarks",url:f.bookmarks,copyParams:!0},{displayUrl:"chrome://newtab",mapDisplayUrlToUrl:e=>S(e)?f.startpage:e,copyParams:!1},{displayUrl:"vivaldi://",url:"chrome://",copyParams:!0,mapDisplayUrlToUrl:(e,t)=>"vivaldi://"===e?f.about:function(e,t){const n=t.copyParams&&e.length>t.displayUrl.length?(0,a.Iw)(e.slice(t.displayUrl.length)):"";return(t.url||"")+n}(e,t),mapUrlToDisplayUrl:(e,t)=>function(e,t){const n=t.copyParams&&e.length>(t.url||"").length?(0,a.Iw)(e.slice((t.url||"").length)):"";return t.displayUrl+n}(e,t)},{displayUrl:"vivaldi:",copyParams:!1,mapDisplayUrlToUrl:e=>{const t=e.indexOf("/"),n=-1===t?e.length:t,s=f[e.substring(8,n)];return s?u(e,{displayUrl:e.substring(0,n),url:s,copyParams:!0}):e}}];function E(e){let t=e;if(-1===t.indexOf("://")){const e=t.indexOf(":");e>-1&&(t=t.slice(0,e)+"://"+t.slice(e+1))}return"/"!==t[t.length-1]&&(t+="/"),t}function C(e){const t=E(e);if(!(t in d))return!1;const n=d[t];return g.includes(n)}function w(e){const t=E(e);for(let e=0;e<b.length;e++){const n=b[e];if((0,a.uu)(n,t)||t.startsWith(n))return!0}return!1}function y(e){return k(e)?l.bqs.medium:e===f.history?l.hcy.medium:e===f.bookmarks?l.CLf.medium:e===f.calendar?l.bcq.medium:e.startsWith(f.notes)?l.cyI.medium:S(e)?l.VPD:O(e)?l.lvj.medium:function(e){return"string"==typeof e&&0===e.indexOf(f.chat)}(e)?"/resources/vivaldi_chat_default.png":e.startsWith(f.game)?"chrome://favicon/chrome://game/":e.startsWith(f.extensions)?"chrome://favicon/chrome://extensions/":e===f["private-intro"]?l.d7l:void 0}function S(e){const t=s.ZP.get(o.kExtensionURLOverrides)?.newtab?.find((e=>e.active)),n=s.ZP.get(o.kTabsNewPageLink)===r.Fp.EXTENSION;return t&&n?e===t.entry:e.startsWith("chrome://newtab")||e.startsWith(f.startpage)||e.startsWith("vivaldi://startpage")}function T(e,t){return t.length>0&&0===t.indexOf(e)}function k(e){return T(f.settings,e)}const I=Object.keys(f).map((e=>f[e])),A=[...Object.keys(N).map((e=>N[e])),...Object.keys(d)];function Z(e){return I.some((t=>e.startsWith(t)))}function P(e){return e.startsWith(f.game)||e.startsWith(f.extensions)}function D(e){return A.some((t=>e.startsWith(t)))}function M(e){return _.some((t=>e.get("url").startsWith(t)))}function O(e){return"string"==typeof e&&0===e.indexOf(f.mailpage)}function x(e){return 0===e.indexOf(f.notes)}function L(e){const t=e=e.trim();e=e?e.toLowerCase():e;const n=v.find((t=>t.displayUrl&&T(t.displayUrl,e)));if(!n)return t;return n.mapDisplayUrlToUrl?n.mapDisplayUrlToUrl(e,n):u(e,n)}function R(e){if((t=e).startsWith(r.P1)||t.startsWith(r.aI)||t.startsWith(r.Cd)||"about:blank"===t||s.ZP.get(o.kExtensionURLOverrides)?.newtab?.some((e=>e.active&&e.entry===t)))return"";var t;for(let t=0;t<v.length;t++){const n=v[t];if(n.url&&T(n.url,e)){e=n.mapUrlToDisplayUrl?n.mapUrlToDisplayUrl(e,n):c(e,n);break}}return e}function B(e,t){if(e){if(e.startsWith(f.bookmarks))t=(0,i.Z)("Bookmarks");else if(e.startsWith(f.history))t=(0,i.Z)("History");else if(e.startsWith(f.calendar))t=(0,i.Z)("Calendar");else if(e.startsWith(f.chat)){const n=(0,a.DP)(e).path;t=n?(0,i.Z)(`Chat: ${n}`):(0,i.Z)("Chat")}else if(e.startsWith(f.notes))"Start Page"===t&&(t=(0,i.Z)("Notes"));else if(S(e))t=(0,i.Z)("browser","Start Page");else if(e===f.experiments)t=(0,i.Z)("Experimental Features");else if(e===f.actionlog)t=(0,i.Z)("Action Log");else if(e===f["guest-intro"])t=(0,i.Z)("Guest Profile Introduction");else if(e===f["private-intro"])t=(0,i.Z)("Private Window Introduction");else if(e===f.welcome)t=(0,i.Z)("Welcome");else if(e===f.blankpage)t=(0,i.Z)("title","Blank Page");else if(e.startsWith(f.settings)){const n=(0,a.DP)(e).path,s=n?n.split("/")[0]:"general";t=(0,i.Z)("$1 Settings",m[s]?[m[s].title]:[s])}t===e&&(t=(0,a.Dy)(R(e)))}return t}function F(e){const{title:t="",url:n=""}=e;return B(n,t)}function U(e){return e.startsWith(r.P1)||e.startsWith(r.aI)||e.startsWith(r.Cd)||"about:blank"===e||function(e){return s.ZP.get(o.kTabsNewPageLink)===r.Fp.CUSTOM&&s.ZP.get(o.kTabsNewPageCustomUrl)===e}(e)||function(e){return s.ZP.get(o.kTabsNewPageLink)===r.Fp.HOMEPAGE&&s.ZP.get(o.kHomepageCache)===e}(e)||Boolean(s.ZP.get(o.kExtensionURLOverrides)?.newtab?.some((t=>t.active&&t.entry===e)))}const V={internals:f,settingCategories:m,isNewTabPage:U,isBannedFromGuestMode:C,isBannedFromPrivateProfileWindows:w,getExtensionUrlFromInternalProtocolUrl:function(e){return e in d?N[d[e]]:e},getFavicon:function(e){if(D(e)||P(e)){const t=y(e);if(t)return t}},getFaviconWithFallback:function(e,t){if(D(e)||P(e)){const n=y(e);if(n)return n;if(""===t)return"/resources/favicon@2x.png"}else if(""===t)return"/resources/default_favicon_64.png";return t},getDisplayUrl:R,getHoverUrl:function(e){let t=R(e);return""===t&&S(e)&&(t="vivaldi://startpage/"),t},getDisplayTitleByUrl:B,getDisplayTitle:F,hasCustomFavicon:P,removeTrailingSlashWhenNoPath:a.Dy,getUrl:L,isMailPage:O,isNotesManager:x,isStartPage:S,isInternalUrl:Z,isVivaldiComponent:D,isExtensionProtocol:function(e){return e.startsWith(r.Fv)},isOurExtension:function(e){return e.substring(0,r.oP.length)===r.oP},isInternalPage:function(e){return Z(e.url||"")},isSettingsUrl:k,matchInternal:function(e,t){return T(f[e],t)},matchUrl:T,equalUrl:function(e,t,n){return n?e&&t&&(0,a.OI)(e)===(0,a.OI)(t):e&&t&&(0,a.Iw)(e)===(0,a.Iw)(t)},internalUrl:function(e,t,n,s){const i=f[e],r=i.includes("?")?"&":"?";return i+r+"path="+encodeURIComponent((0,a.Iw)(t))+(n?"&title="+encodeURIComponent(n):"")+(s?"&query="+encodeURIComponent(s):"")}}},59980:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(67294),i=n(21622);const r=function(e){const[t,n]=s.useState(i.ZP.getList(e));return s.useEffect((()=>{function t(e,t,s){n((e=>({...e,[s]:t})))}return e.forEach((e=>i.ZP.addListener(e,t))),()=>{e.forEach((e=>i.ZP.removeListener(e,t)))}}),[e]),t}},85612:(e,t,n)=>{"use strict";n.d(t,{IuZ:()=>i.a,lrx:()=>a.a,gep:()=>l.a,I_V:()=>u.a,Clf:()=>d.a,$O3:()=>p.a,oa7:()=>b.a,S1h:()=>f.a,onv:()=>v.a,wHY:()=>C.a,dHk:()=>y.a,owS:()=>T.a,DvK:()=>I.a,iD7:()=>Z.a,W9U:()=>D.a,V_c:()=>O.a,boz:()=>L.a,Tu3:()=>B.a,oJy:()=>U.a,b0l:()=>H.a,u0H:()=>z.a,zwh:()=>K.a,IJb:()=>Y.a,Fib:()=>X.a,Gpq:()=>q.a,t8R:()=>ee.a,uw2:()=>ne.a,AXs:()=>ie.a,vyJ:()=>ae.a,ze0:()=>le.a,Whf:()=>ue.a,heI:()=>de.a,nfH:()=>pe.a,KyY:()=>be.a,sss:()=>fe.a,zDC:()=>ve.a,Qa2:()=>Ce.a,L$F:()=>ye.a,F_h:()=>Te.a,SXC:()=>Ie.a,NwZ:()=>Ze.a,zKr:()=>De.a,VLT:()=>Oe.a,N_W:()=>Le.a,Syi:()=>Be.a,hXX:()=>Ue.a,sWI:()=>He.a,weK:()=>ze.a,lIQ:()=>Ke.a,CKA:()=>Ye.a,irc:()=>Xe.a,a8r:()=>qe.a,uN0:()=>et.a,feS:()=>nt.a,eVT:()=>it.a,GH$:()=>at.a,h6:()=>lt.a,viW:()=>ut.a,JLz:()=>dt.a,Pje:()=>pt.a,MjM:()=>bt.a,kze:()=>ft.a,IeE:()=>vt.a,H0I:()=>Ct.a,V34:()=>yt.a,Fii:()=>Tt.a,ERJ:()=>It.a,ziY:()=>Zt.a,Yaj:()=>Dt.a,mXV:()=>Ot.a,Kuf:()=>Lt.a,Wt0:()=>Bt.a,tG3:()=>Ut.a,ooy:()=>Ht.a,ibx:()=>zt.a,tD0:()=>Kt.a,K30:()=>Yt.a,sBl:()=>Xt.a,Y41:()=>qt.a,Hj9:()=>en.a,hCY:()=>nn.a,q7H:()=>rn.a,v2I:()=>on.a,b2r:()=>cn.a,kkq:()=>mn.a,o_D:()=>hn.a,rr$:()=>gn.a,znb:()=>Nn.a,vxN:()=>_n.a,FsT:()=>En.a,W_c:()=>wn.a,JUc:()=>Sn.a,XKb:()=>kn.a,W9w:()=>An.a,mHT:()=>Pn.a,_QD:()=>Mn.a,slH:()=>xn.a,LwO:()=>Rn.a,d7l:()=>Fn.a,HXY:()=>Vn.a,Mqy:()=>Wn.a,rnU:()=>Gn.a,uWq:()=>jn.a,WHX:()=>$n.a,o7J:()=>Qn.a,c02:()=>Jn.a,xMN:()=>ts.a,Eo7:()=>ss.a,eIC:()=>rs.a,uvK:()=>os.a,G0E:()=>cs.a,sgm:()=>ms.a,Znx:()=>hs.a,VPD:()=>gs.a,jL_:()=>Ns.a,ZuY:()=>_s.a,c8X:()=>Es.a,_ZF:()=>ws.a,SpM:()=>Ss.a,eRB:()=>ks.a,lku:()=>As.a,fbI:()=>Ps.a,uUH:()=>Ms.a,OXd:()=>xs.a,Si$:()=>Ls,mgF:()=>Rs,Zu:()=>Bs,Wmx:()=>Fs,jtA:()=>Us,PaK:()=>Vs,GO5:()=>Hs,YVA:()=>Ws,CLf:()=>zs,hYC:()=>Gs,feZ:()=>Ks,bcq:()=>js,Xgf:()=>Ys,eTS:()=>$s,wo7:()=>Xs,sel:()=>Qs,ghF:()=>qs,l0O:()=>Js,kY4:()=>ei,NBh:()=>ti,EEk:()=>ni,Bd5:()=>si,yt5:()=>ii,ySD:()=>ri,U_X:()=>ai,hcy:()=>oi,ZU6:()=>li,lvj:()=>ci,JJT:()=>ui,XTV:()=>mi,LaO:()=>di,wp6:()=>hi,x6W:()=>pi,GAD:()=>gi,EnF:()=>bi,zLp:()=>Ni,QPh:()=>fi,Qwh:()=>_i,upG:()=>vi,hGk:()=>Ei,Sap:()=>Ci,GqE:()=>wi,AE4:()=>yi,eCP:()=>Si,LDV:()=>Ti,aAJ:()=>ki,dMx:()=>Ii,UEH:()=>Ai,Kt8:()=>Zi,_w1:()=>Pi,cyI:()=>Di,P3X:()=>Mi,ZU_:()=>Oi,fkD:()=>xi,ssx:()=>Li,UTS:()=>Ri,bBo:()=>Bi,rvX:()=>Fi,izi:()=>Ui,zAT:()=>Vi,Ibx:()=>Hi,sxZ:()=>Wi,Q9E:()=>zi,Wjz:()=>Gi,rNG:()=>Ki,v5q:()=>ji,yhu:()=>Yi,d$r:()=>$i,B$9:()=>Xi,md4:()=>Qi,ebB:()=>qi,M2k:()=>Ji,NNg:()=>er,DwE:()=>tr,_TQ:()=>nr,fph:()=>sr,fHR:()=>ir,$II:()=>rr,g0V:()=>ar,zoD:()=>or,YvR:()=>lr,OCp:()=>cr,yaZ:()=>ur,eFz:()=>mr,S$A:()=>dr,vvh:()=>hr,ADs:()=>pr,BB1:()=>gr,s2Z:()=>br,Q_G:()=>Nr,hR9:()=>fr,GtN:()=>_r,Gvk:()=>vr,_qK:()=>Er,bqs:()=>Cr,nyn:()=>wr,rpm:()=>yr,NxY:()=>Sr,cMC:()=>Tr,myO:()=>kr,z8c:()=>Ir,Dx_:()=>Ar,sxI:()=>Zr,jVs:()=>Pr,XQw:()=>Dr,USP:()=>Mr,g4W:()=>Or,nre:()=>xr,zlZ:()=>Lr,KuK:()=>Rr,TVZ:()=>Br,W4h:()=>Fr,awi:()=>Ur,nl:()=>Vr,Nek:()=>Hr,nlo:()=>Wr,nY6:()=>zr,Y_k:()=>Gr,nuh:()=>Kr});var s=n(72067),i=n.n(s),r=n(19458),a=n.n(r),o=n(72864),l=n.n(o),c=n(89237),u=n.n(c),m=n(36561),d=n.n(m),h=n(32721),p=n.n(h),g=n(379),b=n.n(g),N=n(24461),f=n.n(N),_=n(51843),v=n.n(_),E=n(55070),C=n.n(E),w=n(81766),y=n.n(w),S=n(99634),T=n.n(S),k=n(95460),I=n.n(k),A=n(72103),Z=n.n(A),P=n(96569),D=n.n(P),M=n(79537),O=n.n(M),x=n(72796),L=n.n(x),R=n(19096),B=n.n(R),F=n(4044),U=n.n(F),V=(n(62525),n(69710)),H=n.n(V),W=n(4799),z=n.n(W),G=n(78297),K=n.n(G),j=n(6055),Y=n.n(j),$=n(12340),X=n.n($),Q=n(85749),q=n.n(Q),J=n(31789),ee=n.n(J),te=n(44231),ne=n.n(te),se=n(93513),ie=n.n(se),re=(n(60249),n(57396)),ae=n.n(re),oe=n(86839),le=n.n(oe),ce=n(10307),ue=n.n(ce),me=n(61065),de=n.n(me),he=n(4103),pe=n.n(he),ge=n(9428),be=n.n(ge),Ne=n(36186),fe=n.n(Ne),_e=n(79026),ve=n.n(_e),Ee=n(3783),Ce=n.n(Ee),we=n(41868),ye=n.n(we),Se=n(42450),Te=n.n(Se),ke=n(23914),Ie=n.n(ke),Ae=n(90014),Ze=n.n(Ae),Pe=n(53001),De=n.n(Pe),Me=n(49336),Oe=n.n(Me),xe=n(1652),Le=n.n(xe),Re=n(33851),Be=n.n(Re),Fe=n(54558),Ue=n.n(Fe),Ve=n(50983),He=n.n(Ve),We=n(44425),ze=n.n(We),Ge=n(38037),Ke=n.n(Ge),je=n(94220),Ye=n.n(je),$e=n(35732),Xe=n.n($e),Qe=n(63267),qe=n.n(Qe),Je=n(42822),et=n.n(Je),tt=n(23641),nt=n.n(tt),st=(n(92800),n(23942)),it=n.n(st),rt=n(33435),at=n.n(rt),ot=n(76667),lt=n.n(ot),ct=n(25531),ut=n.n(ct),mt=n(75124),dt=n.n(mt),ht=n(32783),pt=n.n(ht),gt=(n(39135),n(89016)),bt=n.n(gt),Nt=n(43380),ft=n.n(Nt),_t=n(29295),vt=n.n(_t),Et=(n(83159),n(82474)),Ct=n.n(Et),wt=n(67905),yt=n.n(wt),St=n(24073),Tt=n.n(St),kt=n(34166),It=n.n(kt),At=n(687),Zt=n.n(At),Pt=n(83035),Dt=n.n(Pt),Mt=n(68914),Ot=n.n(Mt),xt=n(83),Lt=n.n(xt),Rt=n(95174),Bt=n.n(Rt),Ft=n(52725),Ut=n.n(Ft),Vt=n(24885),Ht=n.n(Vt),Wt=n(71387),zt=n.n(Wt),Gt=n(24566),Kt=n.n(Gt),jt=n(4856),Yt=n.n(jt),$t=n(49244),Xt=n.n($t),Qt=n(17737),qt=n.n(Qt),Jt=n(29622),en=n.n(Jt),tn=n(90205),nn=n.n(tn),sn=n(25650),rn=n.n(sn),an=n(41028),on=n.n(an),ln=n(22713),cn=n.n(ln),un=n(57842),mn=n.n(un),dn=n(71360),hn=n.n(dn),pn=n(92636),gn=n.n(pn),bn=n(70773),Nn=n.n(bn),fn=n(37362),_n=n.n(fn),vn=n(76992),En=n.n(vn),Cn=n(41885),wn=n.n(Cn),yn=n(7246),Sn=n.n(yn),Tn=n(10681),kn=n.n(Tn),In=n(54472),An=n.n(In),Zn=n(269),Pn=n.n(Zn),Dn=n(86721),Mn=n.n(Dn),On=n(65438),xn=n.n(On),Ln=n(94537),Rn=n.n(Ln),Bn=n(2018),Fn=n.n(Bn),Un=n(19194),Vn=n.n(Un),Hn=n(19914),Wn=n.n(Hn),zn=n(74836),Gn=n.n(zn),Kn=n(61373),jn=n.n(Kn),Yn=n(1149),$n=n.n(Yn),Xn=n(19016),Qn=n.n(Xn),qn=n(26055),Jn=n.n(qn),es=n(98913),ts=n.n(es),ns=n(2291),ss=n.n(ns),is=n(37032),rs=n.n(is),as=n(2473),os=n.n(as),ls=n(63818),cs=n.n(ls),us=n(37028),ms=n.n(us),ds=n(24319),hs=n.n(ds),ps=n(95331),gs=n.n(ps),bs=n(35024),Ns=n.n(bs),fs=n(43893),_s=n.n(fs),vs=n(20277),Es=n.n(vs),Cs=n(87710),ws=n.n(Cs),ys=n(67651),Ss=n.n(ys),Ts=n(73216),ks=n.n(Ts),Is=n(16761),As=n.n(Is),Zs=n(21922),Ps=n.n(Zs),Ds=n(76611),Ms=n.n(Ds),Os=n(81606),xs=n.n(Os);const Ls={small:n(70913),medium:n(20643),large:n(32727)},Rs={small:n(46685),medium:n(29629),large:n(52145)},Bs={small:n(6198),medium:n(89654),large:n(15709)},Fs={small:n(27308),medium:n(4819),large:n(88952)},Us={small:n(23588),medium:n(79257),large:n(2753)},Vs={small:n(79639),medium:n(10737),large:n(980)},Hs={small:n(81315),medium:n(95574),large:n(15159)},Ws={small:n(52893),medium:n(52893),large:n(67066)},zs={small:n(31734),medium:n(48446),large:n(62786)},Gs={small:n(16508),medium:n(16508),large:n(16508)},Ks={small:n(20477),medium:n(20477),large:n(97624)},js={small:n(92529),medium:n(33395),large:n(40191)},Ys={small:n(2365),medium:n(2365),large:n(2365)},$s={small:n(28586),medium:n(28586),large:n(28586)},Xs={small:n(52504),medium:n(52504),large:n(52504)},Qs={small:n(34167),medium:n(34167),large:n(34167)},qs={small:n(46708),medium:n(46708),large:n(46708)},Js={small:n(34923),medium:n(34923),large:n(34923)},ei={small:n(68777),medium:n(14021),large:n(79448)},ti={small:n(38368),medium:n(38368),large:n(38368)},ni={small:n(82152),medium:n(82152),large:n(82152)},si={small:n(82453),medium:n(82453),large:n(82453)},ii={small:n(51555),medium:n(5096),large:n(70807)},ri={small:n(30135),medium:n(30135),large:n(30135)},ai={small:n(29295),medium:n(29295),large:n(29295)},oi={small:n(3335),medium:n(66089),large:n(5231)},li={small:n(91273),medium:n(91273),large:n(91273)},ci={small:n(90658),medium:n(54255),large:n(83318)},ui={small:n(52462),medium:n(52462),large:n(52462)},mi={small:n(67955),medium:n(31408),large:n(47043)},di={small:n(83075),medium:n(54098),large:n(54098)},hi={small:n(38546),medium:n(38546),large:n(38546)},pi={small:n(30808),medium:n(96387),large:n(27818)},gi={small:n(71311),medium:n(25259),large:n(25259)},bi={small:n(89316),medium:n(94543),large:n(76047)},Ni={small:n(39139),medium:n(64827),large:n(21881)},fi={small:n(64207),medium:n(11331),large:n(17109)},_i={small:n(15901),medium:n(66706),large:n(92513)},vi={small:n(56475),medium:n(59168),large:n(80217)},Ei={small:n(10945),medium:n(51299),large:n(28360)},Ci={small:n(70531),medium:n(67461),large:n(43652)},wi={small:n(39530),medium:n(82032),large:n(31391)},yi={small:n(31560),medium:n(98626),large:n(28491)},Si={small:n(97888),medium:n(49602),large:n(59046)},Ti={small:n(15331),medium:n(73391),large:n(75971)},ki={small:n(44895),medium:n(58480),large:n(35719)},Ii=(n(8431),n(8431),n(8431),n(52529),n(52529),n(52529),{small:n(53165),medium:n(53165),large:n(53165)}),Ai={small:n(27476),medium:n(34830),large:n(17802)},Zi={small:n(14737),medium:n(71318),large:n(38306)},Pi={small:n(7773),medium:n(5211),large:n(21838)},Di={small:n(60381),medium:n(41380),large:n(41380)},Mi={small:n(91329),medium:n(91329),large:n(91329)},Oi={small:n(28481),medium:n(81346),large:n(81346)},xi={small:n(21287),medium:n(21287),large:n(21287)},Li={small:n(45016),medium:n(45016),large:n(38668)},Ri={small:n(29832),medium:n(29832),large:n(3117)},Bi={small:n(71775),medium:n(71775),large:n(21776)},Fi={small:n(30249),medium:n(30249),large:n(12371)},Ui={small:n(55430),medium:n(35587),large:n(87046)},Vi={small:n(15902),medium:n(15902),large:n(15902)},Hi={small:n(44474),medium:n(52381),large:n(47062)},Wi={small:n(59098),medium:n(19423),large:n(71303)},zi={small:n(70636),medium:n(70636),large:n(28786)},Gi={small:n(89702),medium:n(89702),large:n(47746)},Ki={small:n(82418),medium:n(48082),large:n(47802)},ji={small:n(94411),medium:n(94411),large:n(94411)},Yi={small:n(95846),medium:n(95846),large:n(95846)},$i={small:n(71475),medium:n(71475),large:n(71475)},Xi={small:n(95369),medium:n(95369),large:n(95369)},Qi=(n(78754),n(78754),n(78754),{small:n(28796),medium:n(43099),large:n(3009)}),qi={small:n(42041),medium:n(42041),large:n(42041)},Ji={small:n(78670),medium:n(58579),large:n(91086)},er={small:n(83947),medium:n(84435),large:n(29504)},tr={small:n(59607),medium:n(78553),large:n(78553)},nr={small:n(64750),medium:n(94012),large:n(94012)},sr={small:n(4103),medium:n(4103),large:n(4103)},ir={small:n(27139),medium:n(27139),large:n(27139)},rr={small:n(31102),medium:n(31102),large:n(31102)},ar={small:n(16441),medium:n(16441),large:n(16441)},or={small:n(67567),medium:n(67567),large:n(67567)},lr=(n(43085),n(43085),n(43085),{small:n(5983),medium:n(4868),large:n(10375)}),cr={small:n(89170),medium:n(89170),large:n(89170)},ur={small:n(60018),medium:n(60018),large:n(77737)},mr={small:n(10307),medium:n(10307),large:n(99785)},dr={small:n(86839),medium:n(86839),large:n(91004)},hr={small:n(80162),medium:n(80162),large:n(80162)},pr={small:n(23634),medium:n(23634),large:n(23634)},gr={small:n(88111),medium:n(88111),large:n(88111)},br={small:n(44278),medium:n(44278),large:n(9390)},Nr={small:n(98434),medium:n(98434),large:n(22493)},fr={small:n(16619),medium:n(16619),large:n(16619)},_r={small:n(29047),medium:n(50227),large:n(42225)},vr=(n(59260),n(32132),n(24344),{small:n(58615),medium:n(97093),large:n(42855)}),Er={small:n(57358),medium:n(82214),large:n(5869)},Cr={small:n(89052),medium:n(62675),large:n(3699)},wr={small:n(27436),medium:n(30651),large:n(36218)},yr={small:n(46038),medium:n(51008),large:n(43448)},Sr={small:n(32545),medium:n(2144),large:n(13929)},Tr={small:n(31866),medium:n(31866),large:n(31866)},kr={small:n(78823),medium:n(78823),large:n(30689)},Ir={small:n(56035),medium:n(56035),large:n(12853)},Ar={small:n(1313),medium:n(1313),large:n(11826)},Zr={small:n(64916),medium:n(64916),large:n(75987)},Pr={small:n(53514),medium:n(53514),large:n(90905)},Dr={small:n(78990),medium:n(87268),large:n(87268)},Mr={small:n(45243),medium:n(45243),large:n(45243)},Or={small:n(61453),medium:n(61453),large:n(61453)},xr={small:n(3895),medium:n(14302),large:n(67757)},Lr={small:n(24638),medium:n(24638),large:n(24638)},Rr={small:n(3638),medium:n(3638),large:n(3638)},Br={small:n(49823),medium:n(43927),large:n(43927)},Fr={small:n(4072),medium:n(9326),large:n(9326)},Ur={small:n(36055),medium:n(9027),large:n(9027)},Vr={small:n(35237),medium:n(72272),large:n(72272)},Hr={small:n(59301),medium:n(90077),large:n(90077)},Wr={small:n(62067),medium:n(22485),large:n(22485)},zr={small:n(23217),medium:n(49989),large:n(49989)},Gr={small:n(80490),medium:n(33520),large:n(33520)},Kr={small:n(1293),medium:n(27470),large:n(48013)}},50590:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var s=n(26729),i=n.n(s),r=n(51495),a=n(27673),o=n(76955),l=n(19550),c=n(38470),u=n(45527);const m="change";let d;const h=new class extends(i()){getActiveMessage(){return d&&d.state.message}getActiveListEntry(){return d&&d.props.listEntry}getAttachments(){return d&&d.state.message?d.state.message.bodyParts?(0,c.yN)(d.state.message.bodyParts).filter((e=>!e.inUse)):d.state.raw?(0,u.Dc)(d.state.raw.mimeTree):[]:[]}getRaw(){return d&&d.state.raw}getIsRawMode(){return Boolean(d?.state.showRaw)}emitChange(e){this.emit(m,e)}isTrash(){return!(!d||!d.props.listEntry)&&o.Z.isMessageDeleted(d.props.listEntry.sources)}isJunk(){return!(!d||!d.props.listEntry)&&(0,l.Z)(d.props.listEntry.sources)}addChangeListener(e){this.on(m,e)}removeChangeListener(e){this.removeListener(m,e)}};a.Z.register((e=>{switch(e.actionType){case"MAIL_SET_ACTIVE_COMPONENT":d!==e.mailDetail&&(d=e.mailDetail,h.emitChange());break;case"MAIL_SET_ACTIVE_MESSAGE":d&&(d.setState({message:e.message}),h.emitChange());break;case"MAIL_CLEAR_IF_ACTIVE":d===e.mailDetail&&(d=void 0,h.emitChange());break;case"MAIL_INDEX_UPDATE":{a.Z.waitFor([r.C.dispatchToken]);const{updates:t}=e;if(!d||!d.props.listEntry||!t.sleUpdates)return;const{id:n}=d.props.listEntry;t.sleUpdates.some((e=>e.id===n))&&h.emitChange();break}case"MAIL_REFRESH_ACTIVE_MESSAGE":h.emitChange()}}));const p=h},53816:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(26729),i=n.n(s),r=n(27673);const a="change";let o;const l=new class extends(i()){getActiveWebView(){return o}emitChange(){this.emit(a)}addChangeListener(e){this.on(a,e)}removeChangeListener(e){this.removeListener(a,e)}};l.dispatchToken=r.Z.register((e=>{switch(e.actionType){case"WEBVIEW_CLEAR_IF_ACTIVE":o===e.component&&(o=void 0,l.emitChange());break;case"WEBVIEW_SET_ACTIVE":o=e.component,l.emitChange()}}));const c=l},61858:(e,t,n)=>{"use strict";n.d(t,{Ei:()=>p,SZ:()=>g,ZP:()=>B});var s=n(26729),i=n.n(s),r=n(51602),a=n(27673),o=n(30801),l=n(63057),c=n(2993),u=n(44025);const m="0",d="1",h="2",p=(0,l.Z)("Bookmarks"),g=d;let b={id:d,url:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1,children:[]};const N=(new Map).set(b.id,b),f=new Map;let _=!1,v=b,E=[],C={},w=[],y=[],S=!1,T=!1,k=!1;const I=new(i());function A(e,t){const{url:n,title:s,description:i,nickname:r}=e;return t.toLowerCase().split(" ").every((e=>n!==c.p&&n?.toLowerCase().includes(e)||s.toLowerCase().includes(e)||i.toLowerCase().includes(e)||r.toLowerCase().includes(e)))}const Z=new class{hasBeenInitialized(){return _}getRootNode(){return b}getRootId(){return b.id}getTopNodes(){return b.children||[]}getLastTopNode(){const e=this.getTopNodes();if(e.length>1)return e[e.length-2]}getBookmarkBarFolderId(){return v.id}getBookmarksBarNodes(){return E}getSpeeddialFolders(){return w}isFailedUpgrade(){return k}getItemById(e){return N.get(e)}getUrlByNode(e){return e.url&&Z.filterUrl(e.url)||""}filterUrl(e){return e===c.p?"":e}getDragData(e,t){const n=t.map((e=>Z.getItemById(e))).filter(Boolean);if("text/plain"===e){const e=[];return n.forEach((t=>{const n=this.isFolder(t)?t.title:u.jk.getHoverUrl(Z.getUrlByNode(t));e.push(n)})),e.join("\r\n")}if("text/html"===e){const e=n&&1===n.length?n[0]:void 0;if(e){const t=u.jk.getHoverUrl(Z.getUrlByNode(e));if(t&&e.title)return"<a href="+t+">"+e.title+"</a>"}return""}if("vivaldi/x-title"===e)return n[0]&&n[0].title||"";if("text/uri-list"===e){const e=[];return n.forEach((t=>{this.isFolder(t)||e.push(u.jk.getHoverUrl(Z.getUrlByNode(t)))})),e.join("\r\n")}return""}getCutIds(){return y}getFilteredTree(e,t){e=e.toLowerCase();const n=[];function s(i){const r=[];for(const a of i)if(t.inTrash||!a.trash){if(a.children?.length){const e=s(a.children);if(e.length&&t.folders){r.push({...a,children:e});continue}}if(A(a,e)){const e={...a};a.children&&t.folders&&n.push(a.id),e.children&&t.folders&&r.push({...e,children:s(e.children)}),!e.children&&t.bookmarks&&r.push(e)}}return r}return{nodes:t.root?s([this.getRootNode()]):s(this.getTopNodes()),collapsed:n}}getFilteredFlat(e,t){e=e.toLowerCase();const n=[],s=Z.iterateTrees(Z.getTopNodes(),t.inTrash);for(const i of s)(i.children&&t.folders||!i.children&&t.bookmarks)&&A(i,e)&&(i.children?n.push({...i,children:[],isExpanded:!1}):n.push({...i}));return n}treeSortComparator(e,t,n){if(e.trash)return 1;if(t.trash)return-1;if(Z.isFolder(e)&&!Z.isFolder(t))return-1;if(Z.isFolder(t)&&!Z.isFolder(e))return 1;const{sortOrder:s}=n;let{sortField:i}=n;e[i]||t[i]||(i="title",e[i]||t[i]||(i="dateAdded"));return r.Z.getDefaultComparator(s,i)(e,t)}getFoldersWithin(e,t){return e.filter((e=>!e.trash&&e.children&&!e.url)).reduce(((e,{id:n,title:s,children:i})=>(e.push({id:n,title:s,level:t}),i?e.concat(this.getFoldersWithin(i,t+1)):e)),[])}hasNickname(e){if(""===e.trim())return!1;e=e.toLowerCase();for(const t of Z.iterateTree())if(e===t.nickname.toLowerCase())return!0;return!1}getNicknamed(e,t){if("string"!=typeof e||e.length<1)return[];e=e.toLowerCase();const n=[];for(const s of Z.iterateTree())e===s.nickname.toLowerCase()&&(s.children?t?s.children.forEach((e=>Z.isBookmark(e)&&n.push(e))):n.push(s):Z.isBookmark(s)&&n.push(s));return n}getDefaultFolderName(){return(0,l.Z)("title","New Folder")}isTrashed(e){return this.isDescendantOf(e,C.id)}isDescendantOf(e,t){for(;;){if(e.id===t)return!0;if(!e.parentId)break;const n=e.parentId?N.get(e.parentId):void 0;if(!n)break;e=n}return!1}isFolder(e){return e.children&&e.children.length>0||void 0===e.url}isPartner(e){return Boolean(e.partner)}isSeparator(e){return"---"===e.title&&"separator"===e.description}isBookmark(e){return!Z.isFolder(e)&&!Z.isSeparator(e)&&Boolean(e.url?.length)&&e.url!==c.p}validateAsBookmarkBarFolder(e){const t=Z.getItemById(e);if(t&&t.children&&!Z.isTrashed(t))return t}validateForClipboard(e){return e.filter((e=>e!==C.id))}validateForDrag(e){return e.filter((e=>e!==C.id))}validateForDeletion(e){return e.filter((e=>e!==C.id))}validateForEdit(e){if(-1!==[m,d,h,C.id].indexOf(e))return!1;const t=Z.getItemById(e);return!(!t||Z.isSeparator(t))}getTitle(e){const t=Z.getItemById(e);return t?t.title:""}*iterateTree(){yield*Z.iterateTrees(b.children||[])}*iterateTrees(e,t){for(const n of e)n.trash&&!t||(yield n,n.children&&(yield*Z.iterateTrees(n.children,t)))}findByUrl(e){for(const t of Z.iterateTree())if(t.url===e)return t}isReady(){return _}emitChange(){S?T=!0:I.emit(o.Z.CHANGED)}addChangeListener(e){I.on(o.Z.CHANGED,e)}removeChangeListener(e){I.off(o.Z.CHANGED,e)}__reset({bookmarks:e}){b=e}};function P(e){if(e.partner){const t=f.get(e.partner);if(t)switch(t){case"Bookmarks":e.title=p;break;case"Speed Dial":e.title=(0,l.Z)("Speed Dial");break;case"Vivaldi":e.title=(0,l.Z)("Vivaldi")}}if(N.set(e.id,e),e.children)for(const t of e.children)P(t)}function D(e){if(N.delete(e.id),e.children)for(const t of e.children)D(t)}function M(){const e={speeddial:[],bookmarkbar:void 0},t=function(n){n.url||n.trash||(n.speeddial&&e.speeddial.push(n),n.bookmarkbar&&(e.bookmarkbar=n),n.children&&n.children.forEach(t))};b.children&&b.children.forEach(t),w=e.speeddial,v=e.bookmarkbar||b,E=(v.children||[]).filter((e=>!e.trash))}function O(e){const t=e.parentId?N.get(e.parentId):void 0;if(t){const n=t;void 0===e.url&&(e.children||(e.children=[])),P(e),n.children?.splice(e.index||0,0,e),L(n);R(n,!1,Boolean(e.speeddial))}Z.emitChange()}function x(e,t){const n=N.get(e);if(!n)return;D(n);const s=n.parentId?N.get(n.parentId):void 0;if(s){const t=s;void 0!==n.index?t.children?.splice(n.index,1):console.error("Bookmark node not removed. index is missing"),L(t);R(t,Z.getBookmarkBarFolderId()===e,Boolean(n.speeddial))}t&&Z.emitChange()}function L(e){e.children&&e.children.forEach(((e,t)=>{e.index=t}))}function R(e,t,n){for(;e;){e.children=e.children?.slice(),Z.getBookmarkBarFolderId()===e.id&&(t=!0),e.speeddial&&(n=!0);const s=e.parentId?N.get(e.parentId):void 0;if(!s)break;e=s}(t||n)&&M()}a.Z.register((e=>{switch(e.actionType){case"BOOKMARKS_INIT":!function(e,t,n){_=!0;const s=e[0];if(b=s.children[0],b.id!==d&&console.error("Unexpcted root bookmark id"),b.parentId=void 0,C=s.children.find((e=>Boolean(e.trash))),C.parentId=b.id,C.index=b.children.length,b.children.push(C),f.clear(),Array.isArray(n.folders))for(const e of n.folders)f.set(e.guid,e.title);N.clear(),P(b),M(),k=t}(e.bookmarks,e.failedUpgrade,e.partnerDB),Z.emitChange();break;case"BOOKMARKS_SET_BATCH_MODE":e.edit?S=!0:(S=!1,T&&(Z.emitChange(),T=!1));break;case"BOOKMARKS_ADD_ITEM":O(e.changes);break;case"BOOKMARKS_CHANGE_ITEM":!function(e,t){let n=N.get(e);if(!n)return;let s=!1;for(const e of Object.keys(t))if(t[e]!==n[e]){s=!0;break}if(!s)return;const i=n.bookmarkbar||t.bookmarkbar!==n.bookmarkbar,r=n.speeddial||t.speeddial!==n.speeddial;n={...n,...t},N.set(n.id,n);let a=null;n.parentId?(a=N.get(n.parentId),a&&a.children&&(void 0!==n.index?a.children[n.index]=n:(a.children[0]=n,console.error("Bookmark node not properly changed. index is missing")))):b.children=n.children||[],a&&R(a,i,r),Z.emitChange()}(e.id,e.changes);break;case"BOOKMARKS_MOVE_ITEM":!function(e,t){const n=Z.getItemById(e);n&&(x(e,!1),n.parentId=t.parentId,n.index=t.index,O(n))}(e.id,e.changes);break;case"BOOKMARKS_REMOVE_ITEM":x(e.id,!0);break;case"BOOKMARKS_SET_CUT_IDS":y=e.ids,Z.emitChange();break;default:return}}));const B=Z,{isTrashed:F}=Z},56026:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(26729),i=n.n(s),r=n(43393),a=n.n(r),o=n(27673),l=n(30801);const c={},u=new class extends(i()){getQueue(e){return c[e]||a().Map()}emitChange(){this.emit(l.Z.CHANGED)}addChangeListener(e){this.on(l.Z.CHANGED,e)}removeChangeListener(e){this.removeListener(l.Z.CHANGED,e)}};function m(e){c[e]&&(c[e]=void 0)}o.Z.register((e=>{switch(e.actionType){case l.Z.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM:t=e.pageId,n=e.id,s=e.url,c[t]=a().Map({id:n,url:s}),u.emitChange();break;case l.Z.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM:!function(e,t,n){c[e]&&(c[e]=a().Map({id:t,url:n}))}(e.pageId,e.id,e.url),u.emitChange();break;case l.Z.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM:m(e.pageId,e.id),u.emitChange();break;case"CHROME_TABS_REMOVED":m(e.tabId),u.emitChange()}var t,n,s;return!0}));const d=u},46540:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(31963),i=n.n(s),r=n(27673);class a extends(i()){getInitialState(){return{isActive:!1}}reduce(e,t){return"BREAKMODE"===t.actionType?{isActive:!e.isActive}:e}}const o=new a(r.Z)},55002:(e,t,n)=>{"use strict";n.d(t,{w:()=>M,Z:()=>x});var s=n(30381),i=n.n(s),r=n(43393);class a extends((0,r.Record)({displayMode:"month",filterText:"",anchorDate:(new(i())).startOf("hour"),selectedDate:(new(i())).startOf("hour"),allDaySelected:!1,showSearchResults:!1,showCompletedTasks:!1})){}const o=a;var l=n(82495),c=n(26729),u=n.n(c),m=n(67972),d=n(6478),h=n(21622),p=n(27673),g=n(5264),b=n.n(g),N=n(9926),f=n(30074),_=n(90870);const v="change";let E,C=[],w=[],y=[],S={editor:{pageId:NaN,uid:Symbol("CalendarStore")},eventDraft:null,selectedEvent:"",initialEventDraft:null},T=[],k=new Map;const I=new Map,A=b()(1)((e=>e.filter((e=>!e.hidden)))),Z=b()(1)(((e,t)=>{const n=new Set(e.map((e=>e.id)));return t.filter((e=>n.has(e.calendarId)))})),P=b()(2)((e=>(0,_.Z)(e,(e=>!e.trash)))),D=b()(2)(((e,t)=>{const n=e.filter((e=>e.task));return t?n:n.filter((e=>!e.complete))})),M=new Map,O=new class extends(u()){getPanelResourceKey(){return-999}getMailResourceKey(){return-998}getDialogResourceKey(){return-997}getImportStatus(e){if(!e)return new m.Z;const t=I.get(e);return t||new m.Z}clearImportStatus(e){return I.delete(e)}getAllImportStates(){return I}getDefaultCalendar(){const e=h.ZP.get(f.kCalendarDefaultCalendarId),t=w.find((t=>t.id===e));return!t&&w.length>0?(d.Z.set(f.kCalendarDefaultCalendarId,w[0].id),w[0]):t}getDefaultAccountId(){const e=h.ZP.get(f.kCalendarDefaultAccountId);return C.find((t=>t.id===e))?e:C.length>0?(d.Z.set(f.kCalendarDefaultAccountId,C[0].id),C[0].id):""}getEditState(){return S}getPendingEvent(){return E}getEventsPerCalendar(e){return T.filter((t=>t.calendarId===e))}getEvent(e){const[t,n]=e.split("-")[0].split(":"),s=T.find((e=>e.id===t));return n&&s?N.t.call([s],i()(parseInt(n)),"day")[0]:s}getSelectedEvent(e){if(e&&e===S.editor.pageId)return S.selectedEvent?this.getEvent(S.selectedEvent):S.eventDraft}getEvents(){return T}getVisibleEvents(){const e=A(w);return Z(e,T)}getAccounts(){return C}getAccountForCalendar(e){const t=O.getAccounts(),n=O.getCalendars().find((t=>t.id===e));if(!n)return;const{accountId:s}=n;return t.find((e=>e.id===s))}getCalendars(){return w}getCalendarState(e,t){const n=this.getFilter(e,t),s=this.getEditState(),r=A(w),a=Z(r,T);n.anchorDate.localeData()!==i().localeData()&&(n.anchorDate.locale(i().locale()),n.selectedDate.locale(i().locale()));let[o,c]=P(a),u=D(o,n.showCompletedTasks),m=N.t.call(o,n.anchorDate,n.displayMode);if(""!==n.filterText){const e=n.filterText.toLowerCase();u=u.map((t=>({...t,filteredOut:!l.Z.eventSearchPredicate(t,e)}))),m=["agenda","year"].includes(n.displayMode)?m.filter((t=>l.Z.eventSearchPredicate(t,e))):m.map((t=>({...t,filteredOut:!l.Z.eventSearchPredicate(t,e)})))}o=((e,t,n)=>{const{initialEventDraft:s}=e,{anchorDate:r,displayMode:a}=t;return s&&!s.id&&i().range(s.start,s.end).overlaps(l.Z.getDisplayRange(r,a))?n.concat([s]):n})(s,n,m);const d=s.eventDraft;if(d&&d.id){const e=T.find((e=>e.id===d.id));e&&d.etag!==e.etag&&(d.etag=e.etag,d.href=e.href)}return{eventDraft:d?{...d}:void 0,initialEventDraft:s.initialEventDraft,selectedEvent:s.selectedEvent,editor:s.editor,events:o,trashedEvents:c,tasks:u,calendarFilter:n,accounts:C,calendars:w,alarms:y,defaultCalendarId:this.getDefaultCalendar()?.id??""}}getEventAlarms(e){return y.reduce(((t,n)=>{if(n.name.split(":")[0]===e){const[e,s]=n.name.split(":");t.push({eventId:e,minutes:parseInt(s),name:n.name})}return t}),[])}getFilter(e,t){if(!e)return new o;let n=k.get(e);if(!n){const s=e===O.getPanelResourceKey()?f.kCalendarPanelDisplayMode:f.kCalendarDisplayMode;n=new o;const i={displayMode:h.ZP.get(s),...t};n=n.merge(i),k=k.set(e,n)}return n}emitChange(){this.emit(v)}emitChangeParam(e,t){this.emit(v,e,t)}addChangeListener(e){this.on(v,e)}removeChangeListener(e){this.removeListener(v,e)}};p.Z.register((e=>{switch(e.actionType){case"CALENDAR_INIT":!function(e){const{accounts:t,calendars:n,events:s}=e;C=t,w=n,T=s,O.emitChangeParam("calendarDataReady")}(e);break;case"CALENDAR_EVENT_EDIT":!function(e,t){const n=S.eventDraft;if(n&&t&&n.id!==t.id)return;const s=!t,i=!n||s,r={editor:e,eventDraft:t,selectedEvent:s&&n?n.id:"",initialEventDraft:i?t?{...t}:void 0:S.initialEventDraft};S=r,E=null;const a=O.getFilter(e.pageId);if(t){let n;const s=l.Z.getEventRange(t);if(s&&!s.contains(a.selectedDate)&&(n=s.start),n){const t=a.merge({selectedDate:n});k=k.set(e.pageId,t)}}O.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.eventDraft);break;case"CALENDAR_EVENT_SELECT":!function(e,t){const{event:n,date:s,publish:i=!0,allDay:r}=t,a=S.editor.uid===e.uid,o=void 0!==n?.id&&n?.id===S.eventDraft?.id;if(a&&o)return;const c={selectedEvent:n?n.id:"",editor:e,eventDraft:a?void 0:S.eventDraft,initialEventDraft:a?void 0:S.initialEventDraft};S=c;const u=O.getFilter(e.pageId);if(n){let t;if(s)t=s;else{const e=l.Z.getEventRange(n);e&&!e.contains(u.selectedDate,{exclusive:!0})&&(t=e.start)}if(t){const n=l.Z.getDisplayRange(u.anchorDate,u.displayMode);let s=u.anchorDate;n.contains(t)||(s=t.clone());const i=u.merge({selectedDate:t,anchorDate:s,...void 0!==r?{allDaySelected:r}:{}});k=k.set(e.pageId,i)}}i&&O.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.options);break;case"CALENDAR_ACCOUNTS_INIT":s=e.accounts,C=s,O.emitChangeParam("calendarDataReady");break;case"CALENDAR_CALENDARS_INIT":n=e.calendars,w=n,O.emitChangeParam("calendarDataReady");break;case"CALENDAR_UPDATE_UI":!function(e,t){const n=O.getFilter(e),s=n.merge(t);if(k=k.set(e,s),n.selectedDate!==s.selectedDate&&S&&S.editor.pageId===e){const e={...S,selectedEvent:""};S=e}O.emitChangeParam("calendarDataReady",e)}(e.pageId,e.calendarUI);break;case"CALENDAR_SET_IMPORTED_COUNT":!function(e){const{importId:t,importedEventsCount:n}=e,s=O.getImportStatus(t),i=s.importedEventsCount,r=i.set(i.size,n),a=s.merge({importedEventsCount:r});I.set(t,a),O.emitChangeParam("importCount")}(e.importedEventsCount);break;case"CALENDAR_TO_IMPORT_COUNT":!function(e){const{eventsToImportCount:t,importId:n}=e,s=O.getImportStatus(n).merge({eventsToImportCount:t,importedEventsCount:[]});I.set(n,s),O.emitChangeParam("importCount")}(e.eventsToImportCount);break;case"CALENDAR_SET_IMPORT_STATE":!function(e){const{importId:t,importEventState:n}=e,s=O.getImportStatus(t).merge({importEventState:n});I.set(t,s),O.emitChangeParam("importCount")}(e.importEventState);break;case"CALENDAR_SET_DEFAULT":O.emitChangeParam("defaultCalendarChange");break;case"CALENDAR_ALARMS_INIT":t=e.alarms,y=t,O.emitChangeParam("calendarDataReady");break;case"VIVALDI_CALENDAR_CLEAR_IMPORT_STATUS":I.clear();break;default:return}var t,n,s}));const x=O},71905:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ge});var s=n(67776),i=n(5955),r=n(61858),a=n(75438),o=n(26729),l=n.n(o),c=n(51508),u=n(91744),m=n(88279),d=n(91662),h=n(77458),p=n(97491),g=n(95798),b=n(21622),N=n(37816),f=n(88652),_=n(51602),v=n(27673),E=n(79290),C=n(54471),w=n(63057);var y=n(2121);var S=n(92696);var T=n(8547);var k=n(74686);var I=n(69291),A=n(93851),Z=n(39023),P=n(30074),D=n(44025);let M=!1;const O={name:"",items:[],tokens:[],installed:!1,radioCounter:1,radioGroup:{},hasBookmarkContainer:!1,bookmarkExtrasEdge:"below"},x="change",L=!1,R="CONTAINER_WEBPANEL",B="CONTAINER_TAB",F="CONTAINER_PINNED_TAB",U="CONTAINER_CLOSED_TAB",V="CONTAINER_BOOKMARK",H="CONTAINER_PERIODIC_RELOAD",W="CONTAINER_MAC_SERVICES",z=[{name:R,hideInSettings:!1},{name:B,hideInSettings:!1},{name:F,hideInSettings:!1},{name:U,hideInSettings:!1},{name:H,hideInSettings:!1},{name:V,hideInSettings:L},{name:W,hideInSettings:!0}];let G=[];const K={},j=new Map(A.CN.map((e=>[e.name,e.feature]))),Y=["COMMAND_CLOSE_TAB","COMMAND_CLOSE_WINDOW","COMMAND_EXIT","COMMAND_QUIT_MAC_MAYBE_WARN","COMMAND_NEW_WINDOW","COMMAND_NEW_PRIVATE_WINDOW","COMMAND_SHOW_HELP"],$=A.CN,X={MENU_FILE:{...(0,T.Z)("win_linux","File")},MENU_EDIT:{...(0,T.Z)("win_linux","Edit")},MENU_VIEW:{...(0,T.Z)("win_linux","View")},MENU_BOOKMARKS:{testVisibility:()=>!C.ZP.isGuestSession(),...(0,T.Z)("win_linux","Bookmarks")},MENU_TOOLS:{...(0,T.Z)("win_linux","Tools")},MENU_WINDOW:{...(0,T.Z)("win_linux","Window")},MENU_HELP:{...(0,T.Z)("win_linux","Help")},MENU_IMAGES_AND_ANIMATION:{...(0,T.Z)("win_linux","Images and Animations")},MENU_CAPTURE:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADCSURBVHgB1ZHBEcIgEEXB5JBjSsASvDFwoRMtQSvQDqwhlXiCqyXEDsydYfDvIRlEUK/5h7Cz87O8zzK2evFSU2s94hBpL8b4cM5t2S8ZY4RSaiwMfUopRd5v6YMfDpzzK8reez+hPuZGEJyaprlhkCAaeC7W2mFBLk3/RklEKV7MTURFJoqDc88+I8UlQklAPIcQdl3XMcS6ozWUfBtWVz8XyDzVTFWC+dFwe1961DfVVlRTuuo2vY1W9M+A2qpXqhfDA07BmbR5ZAAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAGRJREFUeNq9j8EVwCAIQx2FzeqmvcTnGBmBEegBq/hKjy3ckk+Mpfw5IMy3MbFPWTK0S7BahcKgOIJCWONQwI0PmVAHLGbNu+UsAOwy71JAu2xl7fkEY9kb0LeSI8s/lWzI+nQuBXxjN95EoeQAAAAASUVORK5CYII=",...(0,T.Z)("win_linux","Capture")},COMMAND_NEW_PRIVATE_WINDOW:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_NEW_GUEST_WINDOW:{testVisibility:()=>!C.ZP.isIncognito(C.ZP.getId())},COMMAND_OPEN_PAGE:{ellipsis:!0},COMMAND_FOCUS_ADDRESSFIELD:{ellipsis:!0,...(0,T.Z)("Open Location")},COMMAND_SAVE_PAGE:{ellipsis:!0},COMMAND_PRINT_PAGE:{ellipsis:!0},COMMAND_START_CHROMECAST:{ellipsis:!0},COMMAND_IMPORT_CALENDAR:{testVisibility:()=>!C.ZP.isGuestSession()&&!b.ZP.get(P.kMailIsTurnedOff)},COMMAND_IMPORT_DATA:{testVisibility:()=>!C.ZP.isGuestSession(),ellipsis:!0},COMMAND_EXPORT_DATA:{testVisibility:()=>!C.ZP.isGuestSession(),ellipsis:!0},COMMAND_OPEN_SESSION:{testVisibility:()=>!C.ZP.isGuestSession(),ellipsis:!0},COMMAND_SAVE_SESSION:{testVisibility:()=>!C.ZP.isGuestSession(),ellipsis:!0},COMMAND_FIND_IN_PAGE:{ellipsis:!0},COMMAND_TOGGLE_MENU_POSITION:{prefs:{pref:P.kMenuDisplay,isChecked:()=>{const e=b.ZP.get(P.kMenuDisplay);return!0===e||"top"===e||"on"===e}},...(0,T.Z)("Horizontal Main Menu")},COMMAND_MAIN_TOGGLE_TAB_BAR:{prefs:{windowState:"tabs",isChecked:()=>C.ZP.getVisibleUI().tabs},...(0,T.Z)("command","Show Tab Bar")},COMMAND_SHOW_BOOKMARK_BAR:{prefs:{windowState:"bookmarksBar",isChecked:()=>C.ZP.getVisibleUI().bookmarksBar},...(0,T.Z)("command","Show Bookmarks Bar"),testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_TOGGLE_FOOTER:{prefs:{windowState:"statusBar",isChecked:()=>"on"===C.ZP.getVisibleUI().statusBar},...(0,T.Z)("command","Show Status Bar")},COMMAND_TOGGLE_STARTPAGE_NAVIGATION:{prefs:{pref:P.kStartpageNavigation,isChecked:()=>{const e=b.ZP.get(P.kStartpageNavigation);return"on"===e||"speed_dial_only"===e}},...(0,T.Z)("command","Show Start Page Navigation")},COMMAND_TOGGLE_PANEL:{prefs:{panelState:"SHOW_PANEL",isChecked:()=>p.ZP.getPanelButtonsVisible()},...(0,T.Z)("command","Show Panel")},COMMAND_SHOW_BOOKMARK_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACJSURBVHgB7ZKxCoAgEIavaG3wBcJGt2ZdnHurXiR6itY2X6Pew8HOUAgREaWtH0Tvzv87Dg6gUk2YEEKceNHYZ2PMpZQaISUEmCDV+xOpQQuV+gFfA6SUlDE2FAGsWWt9EEL2FKRLmXHzNhs7yJwN8GZc28XGnPMHArkjvM1W7r1CjrDbVFIr1g1wAzRdx1+LFgAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAE9JREFUeNpjYCAWHLl/5D8CHr2PqeA/hP7PC4Iw3jBVsF/hmjYeBfsVjtw/+hCkBKsCsHT90XqQEqwKQNIgFkgJVgUQaYgSLAqOGuDm4QUAABBqP/s39jMAAAAASUVORK5CYII=",testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_MAIL_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7ZHRDYAgDETBMAhuoL8wBZOyBb+6gWyCVyOmQSAMwCWkTem7tKkQUzIn1toLQY9AKaUYQlgpV6yu8bEjejyHhpNDxphNSunR4xCPXF940ws5MiGgBpfGqhyPGgBkE/fs2YB/E9Qm6cFNA27Sg6srVEy64gYRp0xiQHRGMfXpBmxdTd/71HkZAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAATklEQVR42s3PsQ3AMAgEwB+J/ev/ORiFFAhjKxTuEqiAkwDgJ0FnvFPeIGRyWdUyuoyxAaBJjrO7gSI1HkASrlUDAGR9yQiO3+L+zY/jAaekW1uCzRxFAAAAAElFTkSuQmCC",testVisibility:()=>!C.ZP.isGuestSession()&&p.ZP.canRenderInWindow.bind(void 0,"mail")&&!b.ZP.get(P.kMailIsTurnedOff)},COMMAND_SHOW_CONTACTS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF0SURBVHgBtVM7boNAEOVnic72BSwiX8DpIn8UcgIfIeEEzg1QTuA6nW8Q5wZE4lcmXTrb0KTcBgnxzRuLtQhQIEUeabXLm3lvZ98IQfhniH2KFovFnSiK93TO89z3PO+D56Q+AmVZakVRqLQgpCNGPKfUCymRZdkzCJsK2g0Ggxfse+AbEiAwjmMSYK0O0jTdgjwE6QbrFtAYmGlZVozWv7q6E+u3o/jgOM64iZFgFEUa9jUu+IEHry0PqC0kWV0dN9M3S5JkKMvyOYddrXvQy0QKPOFMgg/k0yMXuQj4vn+Ew8JyudQ5Np/PZ+hKcF33pCiKxnESQcdrOv+ZAgQMEN5WqxXtjM6SJBlV6wzEeu2oJYDQiQjjPlVVpamQyAz43rZti2xp1Atyrd0nmj9ueaDnINh0On3H27eTyYSFYdg5RpmTsZmczJNcBPhO07RTEATfTQGpek+LzAOjJHMN5M2uDi4ewKQDfpquGvoXaB2Fa8QvffXhZBpebQgAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAvklEQVR42pWQMQ7CMAxFMzLmBvgIjGx0ZOzIVjbGjh3bG/QIcBNL2EkkFo7gI+QIILeiTSMqgS1FSfzy429j/g/eU0ONP6wC7uRaTbTJJVrqOHLkHi1uqFEgQCp7HUrAN+6N8ccMQMtx3qF97FzrL8n7AE4mLXHbAK6lOukhB1QhQ1ioGBzsFPXl6CNUE0AFx3s5rnoaAV/PQOckAAILdd9Gc9by4AJYuFotfxD9Jh2SLGam/TwzgF/LnE3/EG8smIVnSsnf6AAAAABJRU5ErkJggg==",testVisibility:()=>!C.ZP.isGuestSession()&&p.ZP.canRenderInWindow.bind(void 0,"contacts")&&!b.ZP.get(P.kMailIsTurnedOff)},COMMAND_SHOW_DOWNLOADS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADPSURBVHgBxZLBDYIwFIZblTtMAIYpBA51BKfwzAS6gUePzuAGvUC4OoFNF5B7k9a/Rkw1QCQQ/ZKmf1/7+t5rHyEjoV0baZpeMUVWG2NEWZZLMgRcYNr0JzMykv9fsGgEY8xXSt26Drrv4HlewDmv3zKwBkrpGlJorfOiKF4/9NQ5Ro091jhb5m4UKaWI4/iMbzuGYRhgza09y7I9bFs4r6qqurg+rX2AciKUc4LTIxIy85H2xo38FUmS7FD7gfyEvm7rOztdHwA+IAtOpuIO/nhVS2EDB78AAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAb0lEQVR42mNgIAUcuX/k/5H/R+/jVvAfQdJbwX4BkONAEKIAAvcLICk57HDk/rECuEkFR94fs0c3ReHI/cMNYMUNR+8fV8Digv0KR/YfXX90/ZH9KIajgqP1R/oZyADYfY4kSljBfpjfUeB+oqwHAI1/WdoNOXPUAAAAAElFTkSuQmCC"},COMMAND_SHOW_NOTES_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACgSURBVHgB7VLBDYQgENw1FnAlWAeEGrSEK+GugrsOtAU70CKgDkuwAnBMNFHCRhM/PpwPsDPsLuwQXQRvD0qpNzPX2L5S4hDCAP5vrW3XWLbLxvyTLi98gaXZxvJIU6BK5ZzrUwmMMaX3viMJWutAB4g1GV1EfqbKCnwen0qQEj4dyIjHOMLOpSSGkarZzmIHIL+wa4MnJN0GF47gP3QrTBi9PG385uw1AAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAASklEQVR42mNgIA4cTTjy/sh/BDx6/0g8ioIj95GlwfA9qoL/R/2R+Yf8j/xHU4BuKTkKkF0wRE14jxZQAUfvo8cFamC/R4sLCgAAKuF43sJZFFMAAAAASUVORK5CYII=",testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_HISTORY_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD8SURBVHgB3VJLDoIwEG1BYMsR8Aa647fgKHAC4gn0BsQTKCfwCOCChB3eQI9QtxDAmYQmTW2NOxMnadKZad983iPk10blQJIk3jAMJ7hu4LhCis3zXE/TtGvb9sGDhuJzhw8ty1o3TUP5QZ9SejVNs/N93yMqC8PwEgRBLsXukr+PoqhSdgAVEsdxSinmib5t28dlvHcAnLmua0Y+2JJ3dQBK0878JUBpGEalA5EBGDAhUkeAgRS3DyAF+kue6QBufd/nchUEgeVleAeaU6SZ51biQ+A6Qx0AlU9g4ywvNI7jA3zOQUxbHlMqEbookFIiKRE7HMcxE5X4B/YCuLpojZ4/JTwAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAf0lEQVR42rWQ3RWAIAiFHcER2jA3sFHawBF46GJjNAIj2Kn879RT4QMIH4hXqc+MBhAE4TzCbh36srAlHW8aBtIg7PwYoy16C6oASOpGyFOkBsJb1KXT20/AzNuFtEDe4UTcfQdiW31aKwVzYI0O3hQdlqnT4UDYFSVBXflP2wFyclxBF22/4AAAAABJRU5ErkJggg==",testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_WINDOW_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABYSURBVHgB7ZLdCcAgDIQvpYO0c2T+ZI26SWofCgriDwqC+L3kOMiFkACzoV8w8+PLVdNkZk5V78j0AVbSKe9AJ5SblENEKDJaAoausAOAM9Cu9hLfJ2IdXuDHHKAeH9NrAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAALElEQVR42mNgoAo4cv/If0x49D5CwX90EpVFjALskAGLWmSXDTUFhEKStgAAWEdiK3NU7WoAAAAASUVORK5CYII=",testVisibility:()=>p.ZP.canRenderInWindow.bind(void 0,"tabs")},COMMAND_SHOW_CALENDAR_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACISURBVHgB1ZLBDYAgDEVr4wCOwBgEhnEGN3AEV3AST8whI7ABloQmmCgQ5aAvIfxC+wsEgNYopXat9Z7TKR0L2hxpWmgMhR6WxmyMWUOAvOq9nyuKAyI2OkMn8FBJmovwErxy5w53OmvwmGZv8O8rOCmlKBXHHMtxz4J+4oSIG7mLgocLufAZDrWyPsrbeWhUAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACOSURBVHgB1ZLBDYAgDEULMeHqCFyZyhncwBFYwUkcgRscZQQnAEsiCQcEohz0JSQt+f2FpgC90Vrv4ZTiFBIDY8zknJOEkLHSw6JmEUKsIaHx1nu/NBQHOGolZJ7uoZFUS+ElNOceO9zFRYPHdJvBj7+Ay3EopXit+NLYmA+JwcwY29CdlwxCI1z5GT7DCTJle8x3rbO8AAAAAElFTkSuQmCC",testVisibility:()=>!C.ZP.isGuestSession()&&p.ZP.canRenderInWindow.bind(void 0,"calendar")&&!b.ZP.get(P.kMailIsTurnedOff)},CONTAINER_WEBPANEL:{...(0,T.Z)("Web Panels"),settingsLabel:(0,w.Z)("[All Web Panels]")},COMMAND_SET_LOAD_IMAGES_ALWAYS:{prefs:{imageLoadingPref:"always",isChecked:()=>"always"===b.ZP.get(P.kPageImageLoading)}},COMMAND_SET_LOAD_IMAGES_NEVER:{prefs:{imageLoadingPref:"never",isChecked:()=>"never"===b.ZP.get(P.kPageImageLoading)}},COMMAND_SET_LOAD_IMAGES_CACHE:{prefs:{imageLoadingPref:"cache",isChecked:()=>"cache"===b.ZP.get(P.kPageImageLoading)},...(0,T.Z)("Load Images from Cache")},COMMAND_SET_ANIMATIONS_LOOP:{prefs:{animationPref:"allowed"}},COMMAND_SET_ANIMATIONS_NEVER:{prefs:{animationPref:"none"}},COMMAND_SET_ANIMATIONS_ONCE:{prefs:{animationPref:"once"}},COMMAND_MAIN_ZOOM_IN:{persistent:!0},COMMAND_MAIN_ZOOM_OUT:{persistent:!0},CONTAINER_BOOKMARK:{labelIndex:0,settingsLabel:(0,w.Z)("[All Bookmarks]"),settingsRename:!1,testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_SETTINGS:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFUlEQVR4AWJwL/ChCOOUsLKy2m9tbf0fhIHs9SQbACidvK0yCGIgHGISTEj0d4D3tgPoADrgOoAOoIMt6UrQ2XhLAH3vSTzhzwRr5WZGuxpYHh4e7hwfHy80gfyXgIDn09PTpM47FxcXr7pm7q+vr9dBgU3v73SfTk5OipgAp4U5PeoqGvxCIDa3690TSW0Vt3v1xBgqHL4gigluqAyNIOKDVeT+PlLlTmlcf9IAfigfHKXv+1URWSZRFNeDPUFEUQYEua7rraZpNqkY26vj9icRBYEiBbvLkYKLSHs/EqC6izJkgML9Y5vEBMqsXsHfgr0NodX4uD1qUIAEftbWNwIZBJhtBxs0Bj9lCyqn/IU06zMNHe/UfCL6J8KbGwAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAVFBMVEX////ExMTFxcXExMS/v7/FxcXExMTDw8PExMTFxcXHx8e/v7/ExMTExMTFxcXFxcXDw8PGxsbKysrFxcXCwsLDw8PFxcXExMTGxsbGxsbExMTExMQtledLAAAAG3RSTlMA79+fEJ/PgN9/ICCPvzBgkG8wr1BAT18/cHDxOv8OAAAAdUlEQVR4AQXBhQHDIAAAsOBQnRv//7kEAABgn/MOAOptiQBaOS5BnuWRvrDOa98y6wgjZqQEQCp49sYZ4psWP/DY6QTqBzwrgcj+grUPzh7ejLhgKwDsBWtsoS3kS7yGBX7bK82cw3akAaDejgoA0px3AADAH03KBE7hRjloAAAAAElFTkSuQmCC",ellipsis:!0,testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_QUICK_COMMANDS:{ellipsis:!0},COMMAND_SHOW_BOOKMARKS:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_HISTORY:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_NOTES:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_SHOW_CALENDAR:{testVisibility:()=>!C.ZP.isGuestSession()&&!b.ZP.get(P.kMailIsTurnedOff)},COMMAND_SHOW_MAIL:{testVisibility:()=>!C.ZP.isGuestSession()&&!b.ZP.get(P.kMailIsTurnedOff)},COMMAND_SHOW_EXTENSIONS:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_CAPTURE_PAGE_TO_DISK:{...(0,T.Z)("Page to File")},COMMAND_CAPTURE_PAGE_TO_CLIPBOARD:{...(0,T.Z)("Page to Clipboard")},COMMAND_TAB_TRANSLATE_PAGE:{...(0,T.Z)("command","Translate Page")},COMMAND_CAPTURE_AREA_TO_DISK:{...(0,T.Z)("Area to File")},COMMAND_CAPTURE_AREA_TO_CLIPBOARD:{...(0,T.Z)("Area to Clipboard")},COMMAND_SHOW_CLEAR_PRIVATE_DATA:{ellipsis:!0,testVisibility:()=>!C.ZP.isIncognitoOrGuest()},COMMAND_DEVELOPER_TOOLS:{testVisibility:()=>!d.ZP.isActiveInternal()},COMMAND_FULLSCREEN:{...(0,T.Z)("Fullscreen")},COMMAND_MAIN_TOGGLE_UI:{prefs:{windowState:"minimalUI",isChecked:()=>!C.ZP.isMinimalUI()},...(0,T.Z)("Show UI")},CONTAINER_PINNED_TAB:{...(0,T.Z)("title","Pinned Tabs"),settingsLabel:(0,w.Z)("[All Pinned Tabs]")},CONTAINER_CLOSED_TAB:{...(0,T.Z)("title","Closed Tabs"),settingsLabel:(0,w.Z)("[All Closed Tabs]")},CONTAINER_TAB:{...(0,T.Z)("title","Tabs"),settingsLabel:(0,w.Z)("[All Tabs]")},CONTAINER_PERIODIC_RELOAD:{...(0,T.Z)("title","Periodic Reload"),settingsLabel:(0,w.Z)("[Periodic Reload]")},COMMAND_SHOW_WELCOME:{testVisibility:()=>!C.ZP.isGuestSession()},COMMAND_CHECK_FOR_UPDATES:{ellipsis:!0,testVisibility:()=>!0},COMMAND_SHOW_ABOUT:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgBzVLLTcQwEHU+yjkN5EMHHPM75MgROqADditIOHKDClg6gAowUn43tgQraYAjRErCG5FFjjd7hifZ4xm9eTNjm7G/hkFbkiS54zivruv6Xde9nCLHcUycned5Wtu2nGI6bdM0ZTPnOgzDzVoyiqQwqcL/EQD4b0DXszRNbVXANM09zMfs7hcCmqbdSly77/sbVYBzTsmCzsMwXC0EiqLgaOv5EITgJggCnx3DBm/XNI1YCBAsy9pKLdqGYTzKo9BFw/jjOMrdMk12oijKUD0/+KgmaF7EfNhz+HlVVQsBXXbQxYPUBY3iY13OyQLVn5gCQ3aEEJ945y8cL1Qi3Utd129HcbYCfJh3qiqPgtbP1rj6WhDVtoqfsxMw1oL4pgKj0AsEWPdlWd6xf4tvaZVsnjSI7BsAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAjUlEQVR42q1QSRGAMAysBCQgBSdYwAE4qAQkICEPtvBEAhIqYZm2FAIDvEhe2dlrYswPM3Yg+isGAccuHww7NUpSJUyxQXgpMkEKeBDLje9aFbGAc3mcbkgeJ4TV6VZSRktCUkyorfTRo91jVjcEex2nazHTbvqY2pwE1I8PC9ZJ//bR6lMfPSwIa36eDUlAgXmKiZFsAAAAAElFTkSuQmCC"}};(0,T.Z)("mac","Vivaldi"),(0,T.Z)("mac","File"),(0,T.Z)("mac","Edit"),(0,T.Z)("mac","View"),(0,T.Z)("mac","Bookmarks"),(0,T.Z)("mac","Tools"),(0,T.Z)("mac","Window"),(0,T.Z)("mac","Help"),(0,T.Z)("Preferences"),(0,T.Z)("mac","Services"),(0,T.Z)("mac","Show All"),(0,T.Z)("text_mac","Delete"),(0,T.Z)("mac","Show Tab Bar"),(0,T.Z)("Hide Tab Bar"),(0,T.Z)("Show Bookmarks Bar"),(0,T.Z)("Hide Bookmarks Bar"),(0,T.Z)("mac","Show Status Bar"),(0,T.Z)("mac","Hide Status Bar"),P.kStartpageNavigation,(0,T.Z)("mac","Show Start Page Navigation"),(0,T.Z)("mac","Hide Start Page Navigation"),(0,T.Z)("mac","Show Panel"),(0,T.Z)("mac","Hide Panel"),(0,T.Z)("Show Bookmarks Panel"),(0,T.Z)("Hide Bookmarks Panel"),(0,T.Z)("Show Mail Panel"),(0,T.Z)("Hide Mail Panel"),(0,T.Z)("Show Contacts Panel"),(0,T.Z)("Hide Contacts Panel"),(0,T.Z)("Show Downloads Panel"),(0,T.Z)("Hide Downloads Panel"),(0,T.Z)("Show Notes Panel"),(0,T.Z)("Hide Notes Panel"),(0,T.Z)("Show History Panel"),(0,T.Z)("Hide History Panel"),(0,T.Z)("Show Window Panel"),(0,T.Z)("Hide Window Panel"),p.ZP.canRenderInWindow.bind(void 0,"tabs"),(0,T.Z)("Show Calendar Panel"),(0,T.Z)("Hide Calendar Panel"),(0,T.Z)("Load Images From Cache"),(0,T.Z)("mac","Enter Full Screen"),(0,T.Z)("mac","Exit Full Screen"),(0,T.Z)("verb","Capture"),P.kAllowJavascriptAppleEvents,(0,T.Z)("Allow JavaScript from Apple Events"),(0,T.Z)("Disable JavaScript from Apple Events"),(0,T.Z)("mac","Zoom"),(0,T.Z)("mac","Bring All to Front");function Q(e){const t=X[e.action],n=function(e){const t=e.parameter;if(void 0===t)return;if("COMMAND_OPEN_LINK"===e.action)return{handler:e=>{const n=s.ZP.getOpenOptionsFromDisposition("setting",!1,e);m.Z.openURL(t,{...n})},url:t};return}(e);return n?{...t,...n}:t}function q(e,t){e.forEach((e=>{const n=e.name,s=e.function,i=e.isEnabled,r=e.feature,a=e.onAutoRepeat||!1,o="browser"!==e.feature;c.Z.bind(t,s,a,o,i,r),G.push({name:n,key:t,func:s,feature:r})}))}function J(e,t,n){for(let s=n.length-1;s>=0;s--)if(n[s].items)J(e,t,n[s].items);else if(n[s].commandName===e){t.shortcut?n[s].shortcuts=t.shortcut:delete n[s].shortcuts;break}}function ee(e){e.forEach((e=>{te(e.command,e.value)})),async function(){G.forEach((e=>{c.Z.unbind(e.key,e.func)})),G=[];const e=await pe.getCommandShortcuts();Object.keys(e).forEach((t=>{q(e[t],t)}))}(),M=!0}function te(e,t){K[e]=t,O.installed&&J(e,t,O.items)}function ne(e){return e.action.bind(null,void 0)}function se(e){const{chain:t}=e;return"CATEGORY_COMMAND_CHAIN"===e.category&&t?.length&&(e.action=()=>(0,I.hT)(t)),e.action}async function ie(e,t){const n={},s=await(0,Z.c)(),i=$.concat(b.ZP.get(P.kChainedCommandsCommandList)).concat(s);for(const s in K){const r=K[s];if(!r)continue;const a=r[e];a&&i.filter((e=>e.name===s&&(!0===t||!(0,A.os)(e.name)))).forEach((e=>{a.forEach((t=>{n[t]=(n[t]||[]).concat({function:e.chain?se(e):ne(e),label:e.label,name:e.name,onAutoRepeat:e.repeat,isEnabled:e.isEnabled,feature:e.feature||"browser"})}))}))}return n}function re(e,t){let n=u.Z.commandItem;const s=Q(e);if(s&&void 0!==s.inMenu){if("function"==typeof s.inMenu&&(s.inMenu=s.inMenu()),!1===s.inMenu)return;delete s.inMenu}if("folder"===e.type)n={id:e.id,commandName:e.action,items:[],type:e.type,...s,withNoWindow:!0},e.children&&e.children.forEach((e=>{const s=re(e,t);s&&n.items&&n.items.push(s)}));else if("command"===e.type)n={id:e.id,commandName:e.action,type:e.type,...s};else if("checkbox"===e.type)n={id:e.id,commandName:e.action,type:e.type,...s};else if("radio"===e.type){if(!e.radiogroup)return;{let t=O.radioGroup[e.radiogroup];void 0===t&&(O.radioGroup[e.radiogroup]=O.radioCounter++,t=O.radioGroup[e.radiogroup]),n={id:e.id,commandName:e.action,type:e.type,group:e.radiogroup,radiogroup:t,...s}}}else"container"===e.type?-1!==z.findIndex((t=>t.name===e.action))&&(s.container={content:e.action,mode:e.containermode,edge:e.containeredge,cpp:e.action===V||e.action===W},n={id:e.id,type:e.type,...s,withNoWindow:!0},t&&e.action===V&&(O.hasBookmarkContainer=!0,e.containeredge&&(O.bookmarkExtrasEdge=e.containeredge))):"separator"===e.type&&(n={...u.Z.separatorItem,id:e.id});void 0!==e.title&&(n.label=n.labelEnglish=e.title,n.settingsLabel&&delete n.settingsLabel,n.ellipsis=!1),void 0!==e.custom&&(n.custom=e.custom),n.showshortcut=e.showshortcut,n.feature=j.get(e.action)||"browser";const i=K[e.action];return n.shortcuts=i?.shortcut,n}function ae(e,t){O.installed&&(oe(O.items),O.tokens.forEach((e=>{e.remove()}))),O.name=e,O.radioCounter=1,O.radioGroup={},O.items=[],O.tokens=[],O.hasBookmarkContainer=!1,O.bookmarkExtrasEdge="below",t?t.forEach((e=>{const t=re(e,!0);t&&O.items.push(t)})):console.error("No entries in menu:",e),le(O.items,O.tokens,!0),O.installed=!0}function oe(e){e.forEach((e=>{e.items?oe(e.items):e.prefs?.callback&&(e.prefs?.pref?b.ZP.removeListener(e.prefs?.pref,e.prefs?.callback):e.prefs?.imageLoadingPref?d.ZP.removeChangeListener(e.prefs?.callback):e.prefs?.animationPref?y.Z.accessibilityFeatures.animationPolicy.onChange.removeListener(e.prefs?.callback):e.prefs?.panelState&&p.ZP.removeChangeListener(e.prefs?.callback))}))}function le(e,t,n){const s=(e,t)=>{e.statestrings&&(e.label=e.statestrings[t?1:0].label,e.labelEnglish=e.statestrings[t?1:0].labelEnglish),e.checked=t},i=(e,t)=>{t.callback=()=>{if("function"==typeof t.isChecked){const n=t.isChecked();e.checked!==n&&(s(e,n),pe.emitChange("menuState"))}}};e.forEach((e=>{if(e.items)le(e.items,t,n);else if(e.prefs){const r=e.prefs;if(r.pref)"function"==typeof r.isChecked&&(s(e,r.isChecked()),n&&(i(e,r),r.pref&&r.callback&&b.ZP.addListener(r.pref,r.callback)));else if(r.imageLoadingPref)"function"==typeof r.isChecked&&(s(e,r.isChecked()),n&&(i(e,r),r.callback&&d.ZP.addChangeListener(r.callback)));else if(r.animationPref)n&&(r.callback=function(){y.Z.accessibilityFeatures.animationPolicy.get({},(({value:e})=>{const t=e===r.animationPref;this.checked!==t&&(s(this,t),pe.emitChange("menuState"))}))}.bind(e),r.callback(),r.callback&&y.Z.accessibilityFeatures.animationPolicy.onChange.addListener(r.callback));else if(r.panelState)switch(r.panelState){case"SHOW_PANEL":case"SHOW_CONTENT":"function"==typeof r.isChecked&&(s(e,r.isChecked()),n&&(i(e,r),r.callback&&p.ZP.addChangeListener(r.callback)))}else r.windowState&&"function"==typeof r.isChecked&&(s(e,r.isChecked()),n&&(i(e,r),r.callback&&t.push(C.ZP.addListener(r.callback))))}}))}function ce(e,t){const n=b.ZP.get(P.kChainedCommandsCommandList),s=e=>{for(let i=0;i<e.length;i++){const o=e[i];let l=!1;if(o.commandName){for(let e=n.length-1;e>=0;e--){const t=n[e];if(t.name===o.commandName){o.handler||(o.handler=()=>(0,I.hT)(t.chain)),void 0===o.label&&(o.label=t.label||""),void 0===o.labelEnglish&&(o.labelEnglish=t.labelEnglish||t.label||""),l=!0;break}}if(!l)for(let e=0;e<$.length;e++){const t=$[e];if(t.name===o.commandName){o.handler||(o.handler=ne(t)),o.withNoWindow=t.withNoWindow,void 0===o.label&&(o.label=t.label||""),void 0===o.labelEnglish&&(o.labelEnglish=t.labelEnglish||""),l=!0;break}}}if(l||"command"!==o.type||(console.warn("No match for menu item",o.commandName),void 0===o.label&&(o.label=o.commandName||""),void 0===o.labelEnglish&&(o.labelEnglish=o.commandName||""),o.visible=!1,o.handler=()=>{}),o.commandName){const e=K[o.commandName]?.shortcut;if(e){const t=a.Z.getContext(C.ZP.getActiveBrowserOrPopupWindowId())?.feature||"browser",n=o.feature||"browser";o.shortcuts=e.filter((e=>n===t||("browser"===n?!G.some((n=>n.key===e&&n.feature===t)):void 0)))}}if(o.items)s(o.items);else if(o.container&&t)if(!0===o.container.cpp)if(o.container.content===V){const e=o.container.edge||O.bookmarkExtrasEdge,t=b.ZP.get(P.kBookmarksManagerSorting),n=_.Z.toMenuSorting(t.sortOrder,t.sortField),s={id:r.ZP.getRootId(),type:k.Z.menubarMenu.ContainerType.BOOKMARKS,offset:0,edge:e,groupFolders:t.sortOrder!==_.Z.NO_SORTING,sortField:n.field,sortOrder:n.order};o.container&&(o.container.details=s)}else o.container.content;else{let t,n,s=[];o.container.content===R?s=ue():o.container.content===F?(s=de(),t="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD5SURBVHgBtVHBDYJAEOTQvz59WoJvIPFKwA6kEqES7UCtAPwQflqCDwrgSUIAZ8iRXIAE0DjJZfcuO3O7s4bxIxZziqWU6w2QpmnWvpkzyNuiKJ6maYaWZe1mC4B8ruv6gvSAc2U3kwUcx/EZ4zgO0IHLPM/zRkAMFMuqqvbtXQixxs8uiB7iiW9lWXpJkryZL7sCJIMkURzxjkjDAsRmBHah1/cEgDsKj4wofvEBpvHnW5dM9DxQpMYo3W3ViTEqQA9U2hMZFeCuOSs8CHURejJJgLtGoEiGs2rHoaHYwmNIQGit+2pNkb6mSWDrtm3Xyu3vMGbW3/ABNRKFPPHD6XUAAAAASUVORK5CYII=",n="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///+/v7/Hx8e/v7/ExMTFxcXFxcXExMTFxcXDw8PDw8PExMTFxcXExMTExMTGxsbQpf+eAAAAEHRSTlMAECAg398wv3+AQI9g7/8/FKJcHQAAAFFJREFUeAFjQAWMClCGSRiUUZEqAKY5C6aC5FZ0bF1eBOK3d/R4gCVSEzg2gBlsYRwNYMay1Awwg9k3LRzMYH/6IWMBiDEPqBUs8wJmYQKaAwANFhLITP6v6wAAAABJRU5ErkJggg=="):o.container.content===U?s=me():o.container.content===B?s=he():o.container.content===H&&(s=g.Z.getForActivePage()),"folder"===o.container.mode?(delete o.container,o.type="folder",o.items=s,o.iconPNG=t,o.iconPNGWhite=n):(e.splice(i,1,...s),i+=s.length-1)}}},i=(0,S.Z)(e);return s(i),i}function ue(){return p.ZP.getWebPanelOrder().map(((e,t)=>{const n=p.ZP.getWebPanels().filter((t=>t.id===e))[0],s=K["COMMAND_SHOW_WEB_PANEL_"+(t+1)],i=s?.shortcut?s.shortcut:[];return{...u.Z.makeNumberMnemonic(n.title||n.url||(0,w.Z)("Unknown Web Panel"),t),commandName:"JS_LOCAL_TOGGLE_WEBPANEL",parameter:e,handler:h.Z.toggleContent.bind(this,e),url:n.activeUrl,shortcuts:i}}))}function me(){const e=e=>{return(t=D.jk.getDisplayTitle(e)).length>70&&(t=t.substring(0,70)+"..."),t;var t},t=f.Z.getTrash().map(((t,n)=>{if(t.tab){const s=t.tab;return{...u.Z.makeNumberMnemonic(e(s),n),url:s.url,handler:()=>N.Z.undeleteTab(s)}}const s=t.window;if(s?.tabs){const{tabs:t}=s;return{...(0,T.Z)("Window with $1 Tab","Window with $1 Tabs",[t.length]),items:t.map(((t,n)=>({...u.Z.makeNumberMnemonic(e(t),n),url:t.url,handler:()=>N.Z.undeleteTab(t)}))).concat([u.Z.separatorItem,{handler:()=>N.Z.undeleteWindow(s),...(0,T.Z)("Restore All")}])}}})).filter(Boolean),n=t.length;return t.push(u.Z.separatorItem),t.push({handler:N.Z.emptyTrash,visible:n>0,...(0,T.Z)("verb","Clear All")}),t}function de(){const e=C.ZP.getActiveBrowserOrPopupWindowId();return d.ZP.getTabs(e,!1).toArray().filter((e=>"tab"===e.type&&e.page.pinned)).map(((e,t)=>{const n=e.page;return{...u.Z.makeNumberMnemonic(D.jk.getDisplayTitle(n),t),handler:()=>m.Z.activateTab(n.id,n.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:n.get("url"),parameter:n.get("id").toString(),emphasized:n.get("active")}}))}function he(){const e=C.ZP.getActiveBrowserOrPopupWindowId();return d.ZP.getTabs(e,"off"===b.ZP.get(P.kTabsStackingMode)).toArray().filter((e=>"tab"===e.type&&!e.page.pinned||"group"===e.type)).map(((e,t)=>{if("tab"===e.type){const n=e.page;return{...u.Z.makeNumberMnemonic(D.jk.getDisplayTitle(n),t),handler:()=>m.Z.activateTab(n.id,n.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:n.get("url"),parameter:n.get("id").toString(),emphasized:n.get("active")}}if("group"===e.type)return{...u.Z.makeNumberMnemonic(d.ZP.getTitleByGroupId(e.id,e.page.get("title")),t),iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBvZJLCsAgDERj8SD2Gnp+vYbeJDXQRQlNiB98C7NweAwkAIs4elJKtY8ghRCxlVJu0dIFCAra/wVGSBJjrNOCnLPrhGmB1GRYwJsMCzjLAv/Opq2K7gAsWO/hm/Msc7bJX4O9TY7wAFQ4MpFfIoDNAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAPElEQVR42mNgIAyO3D/yHxkevY+u4D9+PhYFaKZgMwFFDLsCJFNwmQAXp4ICLOFApEMJhCYRAUZqnJAJALGlehnFYWcIAAAAAElFTkSuQmCC",items:e.pages.toArray().map(((e,t)=>({...u.Z.makeNumberMnemonic(D.jk.getDisplayTitle(e),t),handler:()=>m.Z.activateTab(e.id,e.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:e.get("url"),parameter:e.get("id").toString(),emphasized:e.get("active")})))}})).filter(Boolean)}const pe=new class extends(l()){getIsInitialized(){return M}getClosedTabContainer(){return me()}getCommandShortcuts(){return ie("shortcut",!1)}getCommandsGestures(){return ie("gestures",!0)}getCommands(){return $}getQuickCommands(){return this.getCommands().filter((e=>{const t=K[e.name];t?.shortcut&&(e.shortcut=t.shortcut);const n=e.isEnabled(),s=a.Z.getContext(C.ZP.getId()),i=e.feature||"browser",r="browser"===i||i===s.feature;let o;return o="function"==typeof e.showInQC?e.showInQC():e.showInQC,n&&r&&o}))}getCommandConfiguration(e){return K[e]}async getAllCommands(){const e=await(0,Z.c)();return $.concat(e).reduce(((e,t)=>{if(!t.isEnabled?.())return e;const{shortcut:n,gestures:s,feature:i}=K[t.name]||{};return e.push({...t,shortcut:n,gestures:s,feature:i}),e}),[]).concat(b.ZP.get(P.kChainedCommandsCommandList))}async getVivDefinedCommands(){return(await this.getUserEditableCommands()).filter((e=>"CATEGORY_COMMAND_CHAIN"!==e.category))}async getChainCommandsShortcuts(){return(await this.getUserEditableCommands()).filter((e=>"CATEGORY_COMMAND_CHAIN"===e.category)).map((e=>{const t=this.getCommandConfiguration(e.name);return{name:e.name,...t&&{shortcuts:t.shortcut}}}))}isCommandWhitelisted(e){for(const t in K)if(void 0!==K[t]){const n=K[t];if(n.shortcut&&n.shortcut.includes(e))return Y.includes(t)}return!1}isActionWhitelistedForSettings(e){return Y.includes(e)}isNamedMenuAvailable(e){return O.name===e}getNamedMenu(e,t){return this.isNamedMenuAvailable(e)?ce(O.items,t):[]}getBookmarkExtrasEdge(){return O.bookmarkExtrasEdge}makeMenuWithContent(e,t){const n=[];return e.forEach((e=>{const t=re(e,!1);t&&n.push(t)})),ce(n,t)}getMenuItem(e,t){let n=e;"container"!==n.type||t||(n={...e,containermode:"folder"});const s=this.makeMenuWithContent([n],!t);return 1!==s.length||"separator"!==s[0].type&&void 0===s[0].label?{label:e.action,labelEnglish:e.action}:(le(s,[],!1),s[0])}getHandlerByAction(e,t){let n;switch(e){case"JS_LOCAL_ACTIVATE_TAB":{const e=parseInt(t),s=d.ZP.getPageById(e);s&&(n=()=>m.Z.activateTab(s.id,s.windowId));break}case"JS_LOCAL_ADD_ACTIVE_TAB_TO_BOOKMARKS":{const e=t,s=d.ZP.unsafeGetActivePage();s&&e&&(n=()=>i.Z.bookmarkPageInFolder(s,e));break}case"JS_LOCAL_TOGGLE_WEBPANEL":const r=t;r&&(n=()=>h.Z.toggleContent(r));break;case"COMMAND_OPEN_LINK":t&&(n=()=>{const e=s.ZP.getOpenOptionsFromDisposition("setting",!1,{});m.Z.openURL(t,{...e})});break;default:void 0!==t&&(n=g.Z.getHandlerByAction(e,t))}return n}async getUserEditableCommands(){return(await this.getAllCommands()).filter((e=>!e.name.includes("COMMAND_OPEN_LINK")))}makeCommandList(e){const t=$.filter((t=>e?e===t.name:!1!==t.inMenu));return void 0===e&&t.push.apply(t,z.filter((e=>!(e=>!!(e.hideInSettings||e.name===V&&O.hasBookmarkContainer))(e))).map((e=>({name:e.name,behavior:"container"})))),pe.makeMenuWithContent(t.map((e=>{switch(e.behavior){case"checkbox":return{id:e.name,action:e.name,type:"checkbox"};case"radio":return{id:e.name,action:e.name,type:"radio"};case"container":return{id:e.name,action:e.name,containermode:"folder",type:"container"};default:return{id:e.name,action:e.name,type:"command"}}})),!1)}getCommandParameter(e){if(1===$.filter((t=>t.name===e)).length)return A.FD[e]}getCommandLabel(e){const t=$.filter((t=>t.name===e));if(1===t.length)return t[0].label}getOpenLinkName(){return"COMMAND_OPEN_LINK"}emitChange(e){this.emit(x,e)}addChangeListener(e){this.on(x,e)}removeChangeListener(e){this.removeListener(x,e)}};v.Z.register((e=>{switch(e.actionType){case"COMMAND_INITIALIZE":ee(e.commands),pe.emitChange("init");break;case"COMMAND_SET_NAMED_MENU":ae(e.name,e.content),pe.emitChange("menu");break;case"COMMAND_UPDATE_COMMAND":te(e.commandKey,e.commandValue);const{commandKey:t,commandValue:n}=e;!async function(e){const{commandValue:t,commandKey:n}=e,s=await pe.getCommandShortcuts();G.map(((e,t)=>({...e,index:t}))).filter((e=>e.name===n)).forEach((e=>{c.Z.unbind(e.key,e.func),G.splice(e.index,1)}));const{shortcut:i}=t;i?.forEach((e=>{q(s[e],e)}))}({commandKey:t,commandValue:n}),pe.emitChange("shortcut");break;case"COMMAND_UPDATE_SHORTCUT_CHAIN":!function(e){const{name:t}=e,n=K[t];if(n){const{shortcut:t}=n;if(t?.length){c.Z.unbind(t);const{chain:n}=e;c.Z.bind(t,(()=>(0,I.hT)(n)))}}}(e.info);break;case"COMMAND_REMOVE_CONFIG":!function(e){if(K[e]){const{shortcut:t}=K[e];delete K[e],E.Z.remove(e),t?.length&&c.Z.unbind(t)}k.Z.menuContent.removeAction([e])}(e.commandKey),pe.emitChange("shortcut");break;default:return}}));const ge=pe},54141:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s=n(32207),i=n(26729),r=n.n(i),a=n(27673),o=n(30801);const l="change",c=new Map;let u;const m=new class extends(r()){getAsArray(){return[...c.values()]}getAsTree(e){const t=e?e.toLowerCase():e;return t?m.getAsArray().filter((e=>d(e,t))):m.getAsArray()}getSelected(){return u}getNodeById(e){return c.get(e)}getContactsWithAddress(e){const t=m.getAsArray().filter((t=>{if(t.emailAddresses&&t.emailAddresses.length>0)return t.emailAddresses.some((t=>t.emailAddress.toLowerCase()===e.toLowerCase()))}));if(t.length>0)return t[0]}isTrustedEmailAddress(e){for(const t of m.getAsArray())for(const n of t.emailAddresses)if(n.emailAddress.toLowerCase()===e.toLowerCase()&&t.trusted)return!0;return!1}getMailAddresses(){const e=new Map;for(const t of c.values())t.emailAddresses.forEach((n=>{const s=n.emailAddress.toLowerCase(),i=e.get(s);i?i.add(t.name):e.set(s,new Set([t.name]))}));return e}emitChange(e){this.emit(l,e)}addChangeListener(e){this.on(l,e)}removeChangeListener(e){this.removeListener(l,e)}},d=function(e,t){if(!t||0===t.length)return!0;if(e.name&&e.name.toLowerCase().indexOf(t)>-1)return!0;if(e.emailAddresses){let n=!1;if(e.emailAddresses.forEach((e=>{e.emailAddress.toLowerCase().indexOf(t)>-1&&(n=!0)})),n)return!0}return!1};a.Z.register((e=>{switch(e.actionType){case o.Z.CONTACT_INITIALIZE:n=e.contacts,i=e.newContact,n.forEach((e=>{c.set(e.id,(0,s.Z)(e))})),i?(u=i,m.emitChange({reason:"newContact",contact:i,focusContactView:!0})):m.emitChange({reason:"startup"});break;case o.Z.CONTACT_SAVE_CONTACT:t=e.contact,c.set(t.id,t),u&&u.id!==t.id||(u=t),m.emitChange({reason:"updatedContact"});break;case o.Z.CONTACT_ADD_CONTACTS:e.contacts.forEach((e=>{c.set(e.id,(0,s.Z)(e))})),m.emitChange({reason:"addGeneratedContacts"});break;case o.Z.CONTACT_DELETE_CONTACTS:e.ids.forEach((e=>{c.delete(e)})),m.emitChange({reason:"deleteContact"});break;case o.Z.CONTACT_SELECT_CONTACT:!function(e,t){u=e,m.emitChange({reason:"selectedContact",contact:e,focusContactView:t})}(e.contact,e.focusContactView)}var t,n,i}));const h=m},75438:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(31963),i=n.n(s),r=n(27673),a=n(18172);const o={area:"content",feature:"browser"};class l extends(i()){constructor(){super(r.Z)}getInitialState(){return new Map}getContext(e){const t=this.getState().get(e);return t?.length?t[t.length-1]:o}reduce(e,t){return"SWITCH_CONTEXT"===t.actionType?(0,a.ZP)(e,(e=>{const n=e.get(t.windowId)||[];let s;n.length>=100?(s=n.slice(1),s.push(t.context)):s=n.concat(t.context),e.set(t.windowId,s)})):e}}const c=new l},18973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(26729),i=n.n(s),r=n(27673);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o="change";class l extends(i()){constructor(){super(),a(this,"_downloadItems",[]),a(this,"_totalNumberOfDownloads",0),a(this,"_totalProgress",0),a(this,"_filter",""),a(this,"addChangeListener",(e=>{this.on(o,e)})),a(this,"removeChangeListener",(e=>{this.removeListener(o,e)})),r.Z.register((e=>{switch(e.actionType){case"DOWNLOAD_PANEL_UPDATED":return this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"});case"DOWNLOAD_COMPLETED":return void this._emitChange({reason:"download_completed",downloadItem:e.downloadItem});case"DOWNLOAD_STARTED":return void this._emitChange({reason:"download_started",downloadItem:e.downloadItem});case"DOWNLOAD_SET_TOTAL_PROGRESS":return this._totalProgress=e.totalProgress,this._totalNumberOfDownloads=e.totalNumberOfDownloads,void this._emitChange({reason:"download_total_progress_changed"});case"DOWNLOAD_SET_FILTER":return this._filter=e.filter,this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"});case"DOWNLOAD_SET_ORDER_BY":return this._orderBy=e.orderBy,this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"})}}))}_emitChange(e){this.emit(o,e)}getTotalNumberOfDownloads(){return this._totalNumberOfDownloads}hasDownloads(e){return this.getItems(e).length>0}getTotalProgress(){return this._totalProgress}getFilter(){return this._filter}getOrderBy(){return this._orderBy}getItems(e){return this._downloadItems.filter((t=>!(!e.isIncognitoWindow&&t.incognito))).filter((e=>!("interrupted"===e.state&&""===e.filename)))}}const c=new l},56752:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s=n(31963),i=n.n(s),r=n(27673),a=n(8575),o=n(18172);const l={rewindHistory:[],rewindIndexes:[],forwardUrl:""};function c(e,t){return a.parse(e).hostname===a.parse(t).hostname}function u(e,t,n,s){e.rewindHistory||(e.rewindHistory=[],e.rewindIndexes=[]);const i=e.prev&&e.prev.url&&c(e.prev.url,t.url);return n!==s.length-1&&(e.prev&&!i&&n<s.length-1?(s.length-1-n>1&&(e.rewindHistory.length>0&&c(e.rewindHistory[e.rewindHistory.length-1].url,e.prev.url)&&e.rewindHistory[e.rewindHistory.length-1].url!==e.prev.url||c(s[s.length-1].url,e.prev.url)&&s[s.length-1].url!==e.prev.url)&&(e.rewindHistory.push(e.prev),e.rewindIndexes.push(s.length-n-2)),e.rewindHistory.push(t),e.rewindIndexes.push(s.length-n-1)):0===n&&s.length>0&&(e.rewindHistory.push(t),e.rewindIndexes.push(s.length-n-1))),e.prev=t,e}function m(e,t){let n=e.get(t);return n||(n={...l},e.set(t,n)),n}class d extends(i()){getInitialState(){return new Map}getStateById(e){return this.getState().get(e)||l}getFastForwardUrl(e){return this.getStateById(e).forwardUrl}getRewindRelativeIndex(e){const t=this.getState().get(e);if(t){const{rewindIndexes:e}=t;if(e.length>0)return e[0]}return 0}getRewindHistory(e){return this.getStateById(e.id).rewindHistory}getRewindIndexes(e){return this.getStateById(e.id).rewindIndexes}reduce(e,t){switch(t.actionType){case"FAST_FORWARD_SET_FORWARD_URL":return(0,o.Uy)(e,(e=>{const{forwardUrl:n,pageId:s}=t;m(e,s).forwardUrl=n}));case"CHROME_TABS_UPDATED":return(0,o.Uy)(e,(n=>{const{tabId:s,changeInfo:i}=t;if("loading"!==i.status)return e;m(n,s).forwardUrl=""}));case"FAST_FORWARD_SET_REWIND_INFO":return(0,o.Uy)(e,(e=>{const{currentIndex:n,history:s,pageId:i}=t,{rewindHistory:r,rewindIndexes:a}=(o=n,s.slice(0,o+1).reduceRight(u,{}));var o;const l=m(e,i);l.rewindHistory=r,l.rewindIndexes=a}));case"FAST_FORWARD_COPY_STATE":return(0,o.Uy)(e,(e=>{const{fastForwardState:n,pageId:s}=t;e.set(s,n)}));default:return e}}}const h=new d(r.Z)},93737:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var s=n(26729),i=n.n(s),r=n(30381),a=n.n(r),o=n(91662),l=n(51602),c=n(27673),u=n(79290),m=n(15085),d=n(43393),h=n(56371),p=n(81277),g=n(15467),b=n(5531),N=n(23542),f=n(40833);function _(e){const{items:t,filterText:n,titleFilter:s,urlFilter:i,shouldSearchUrl:r}=e,a=(i||s||n).toLowerCase().split(" ");return t.map((e=>{const t=e.children.filter((e=>{const t=e.title.toLowerCase(),n=e.url.toLowerCase();return i?a.every((e=>n.includes(e))):s||!r?a.every((e=>t.includes(e))):a.every((e=>n.includes(e)||t.includes(e)))}));return{...e,children:t}}))}var v=n(34155);const E=(0,N.extendMoment)(a()),C="PANEL",w="change";let y=null,S=new d.Map,T=new d.Map({today:[],other:[]});const k={};let I=l.Z.DESCENDING_SORT,A="";const Z=new class extends(i()){getPanelResourceKey(){return C}isPanel(e){return e===C}getHistorySearchResults(e){let t=[];const n=this.getFilter(e);if(n.sortOrder!==I||n.sortField!==A){const{sortOrder:e,sortField:t}=n;T=T.set("today",this.sortHistory(e,t,T.get("today"))),T=T.set("other",this.sortHistory(e,t,T.get("other"))),I=n.sortOrder,A=n.sortField}if(t=n.sortOrder===l.Z.DESCENDING_SORT?T.get("today").concat(T.get("other")):T.get("other").concat(T.get("today")),t=t.filter((e=>e.visitTime>=n.startTime.valueOf()&&e.visitTime<=n.endTime.valueOf())),n.parsedFilter.query||n.parsedFilter.title||n.parsedFilter.url){t=_({items:t,filterText:n.parsedFilter.query.toLowerCase(),titleFilter:n.parsedFilter.title.toLowerCase(),urlFilter:n.parsedFilter.url.toLowerCase(),shouldSearchUrl:n.searchURL})}return{items:t,filter:n,oldestHistoryDate:y||E()}}getFilteredHistory(e){const t=_({items:T.get("today").concat(T.get("other")),filterText:e,shouldSearchUrl:!0}),n=new Map;for(let e=t.length;e--;){const s=t[e].children;for(let e=s.length;e--;){const t=s[e],i=n.get(t.url);n.set(t.url,{...t,visitCount:i?i.visitCount+t.visitCount:t.visitCount,visitTime:i?Math.max(i.visitTime,t.visitTime):t.visitTime})}}return[...n.values()]}sortHistory(e,t,n){const s=l.Z.getDefaultComparator(e,t);return l.Z.treeSort(n,s),n}getStatistics(e){const t={...T.get("todaysStats",{}),...T.get("olderStats",{})},n=S.get(e,new m.d);return this.getFilteredStatistics(t,n.parsedFilter.query.toLowerCase())}getFilteredStatistics(e,t){const n={};return Object.keys(e).forEach((s=>{const i=e[s].mostVisited.filter((e=>-1!==e.url.indexOf(t)));i.length&&(n[s]={mostVisited:i,timeArr:e[s].timeArr,pages:i.length,visits:i.reduce(((e,t)=>e+t.visitCount),0)})})),n}getFilter(e){let t=S.get(e);if("number"!=typeof e){if(t||(t=new m.d({range:E.range(E().startOf("day"),E().endOf("day"))})),e!==C)return console.error("Unkonwn subscriber id",e),t;{const e=this.getTimeByRange({rangePicker:t.rangePicker});t=t.merge({endTime:e.endTime?e.endTime:t.endTime,startTime:e.startTime?e.startTime:t.startTime})}}else if(!t){t=new m.d({range:E.range(E().startOf("day"),E().endOf("day"))});let n={...o.ZP.getHistoryManagerState(e)};0===Object.getOwnPropertyNames(n).length?(n={...u.Z.getSync("HISTORY_MANAGER_STATE")},n.endTime=E(),"range"===n.displayMode?(n.startTime?n.startTime=E(n.startTime):y?n.startTime=y:E().startOf("month"),n.range=E.range(n.startTime,n.endTime)):(n.startTime=E().startOf(n.displayMode),n.range=E.range(E(n.startTime).startOf(n.displayMode),E(n.endTime).endOf(n.displayMode)))):(n.startTime=n.startTime?E(n.startTime):E(),n.endTime=n.endTime?E(n.endTime):E(),n.range=E.range(E(n.startTime).startOf("day"),E(n.endTime).endOf("day"))),t=t.merge(n)}return S=S.set(e,t),t}getTimeByRange(e,t){return isNaN(parseInt(e.rangePicker))?"today"===e.rangePicker?(e.startTime=E().startOf("day"),e.endTime=E().endOf("day")):"yesterday"===e.rangePicker?(e.startTime=E().subtract(1,"day").startOf("day"),e.endTime=E().subtract(1,"day").endOf("day")):"last_month"===e.rangePicker?(e.startTime=E().subtract(1,"month").startOf("month"),e.endTime=E().subtract(1,"month").endOf("month")):"all"===e.rangePicker?(t&&(e.startTime=t.startOf("day")),e.endTime=E().endOf("day")):"date_range"===e.rangePicker||console.warn("Unknown date range",e.rangePicker):(e.startTime=E().subtract(parseInt(e.rangePicker),"day").startOf("day"),e.endTime=E().endOf("day")),e}emitChange(e){this.emit(w,e)}emitChangeParam(e,t){this.emit(w,e,t)}addChangeListener(e){this.on(w,e)}removeChangeListener(e){this.removeListener(w,e)}};function P(e){if("start"===e)k.id||(k.id=setInterval(P,6e5,"tick"),k.date=E());else if("stop"===e)k.id&&(clearInterval(k.id),k.id=void 0);else if("tick"===e){const e=E();k.date.date()!==e.date()&&(k.date=e,Z.emitChange("searchResultsReady"))}}function D(e){e.forEach((e=>{e.isFolder?function(e){const t=E(e.at).startOf("day"),n=E(e.at).endOf("day"),s=(0,f.SI)(t);let i="other",r="olderStats";E().isBetween(t,n)&&(i="today",r="todaysStats");T.get(i).forEach(((e,t)=>{if(e.id===s){const e=T.get(i),n=T.get(r);T=T.set(r,(0,h.Z)(n,s)),e.splice(t,1),T=T.set(i,e)}}))}(e):void 0===e.url?console.error("Can not remove history element. Url missing"):function(e){const t=E(e.at).startOf("day"),n=E(e.at).endOf("day"),s=(0,f.SI)(t);let i="other",r="olderStats";E().isBetween(t,n)&&(i="today",r="todaysStats");const a=[];T.get(i).forEach((t=>{if(t.id===s){const n=T.get(r);n[s].mostVisited.forEach(((t,i)=>{t.url===e.url&&n[s].mostVisited.splice(i,1)}));const i=t.children.filter((t=>t.url!==e.url));i.length>0&&(i.length!==t.children.length?a.push({...t,children:i}):a.push(t))}else a.push(t)})),T=T.set(i,a)}(e)})),Z.emitChange("searchResultsReady")}function M(e,t){const n={};return(0,p.Z)(e,((e,s)=>{const i={},r=(0,g.Z)(e,"hour");(0,p.Z)(r,((e,t)=>{const n=(0,b.Z)(e,"url");i[t]={pages:n.length,visits:e.reduce(((e,t)=>e+t.visitCount),0)}}));const a=[];for(let e=0;e<=24;e++)a.push({hour:e,pages:i[e]?i[e].pages:0,visits:i[e]?i[e].visits:0,unixDate:E(s+"T"+(e<10?"0":"")+e).valueOf()});n[e[0].dateKey]={mostVisited:t[e[0].dateKey],timeArr:a}})),n}function O(e){return(0,g.Z)(e,"dateKey")}function x(e){const t=[];return(0,p.Z)(e,((e,n)=>{const s=(0,g.Z)(e,"url"),i=[];(0,p.Z)(s,((e,t)=>{const n=e[0],s=e.reduce(((e,t)=>e.visitTime>t.visitTime?e:t)).visitTime,r=e.reduce(((e,t)=>e+t.visitCount),0);i.push({address:n.address,isBookmarked:n.isBookmarked,protocol:n.protocol,title:n.title,hour:n.hour,transition_type:n.transition_type,url:t,id:n.id+"_"+s,visitCount:r,visitTime:s,dateKey:n.dateKey})})),t.push({children:i,id:e[0].dateKey,pages:Object.keys(s).length,visitCount:i.reduce(((e,t)=>e+t.visitCount),0),visitTime:E(e[0].dateKey).valueOf()})})),t}function L(e){const t={};return e.forEach((e=>{const n=e.children.slice().sort(((e,t)=>e.visitCount-t.visitCount));t[e.id]=n.map((e=>({url:e.url,visitCount:e.visitCount})))})),t}c.Z.register((e=>{switch(e.actionType){case"CHROME_TABS_REMOVED":t=e.tabId,S=S.delete(t);break;case"HISTORY_INIT":P("start");break;case"HISTORY_INIT_FILTER":!function(e,t){if(!e.startTime||!e.endTime)return void console.error("Initializing history filter failed. Missing timestamps");const n=Z.getTimeByRange({rangePicker:e.rangePicker,startTime:E(e.startTime),endTime:E(e.endTime)}),s=S.get(t,new m.d);S=S.set(t,s.merge(n)),Z.emitChangeParam("filterChange",t)}(e.setting,e.id);break;case"HISTORY_LOAD_TODAY":!function(e){const t=T.get("today");if(t.length>0&&E(t[0].visitTime).endOf("day")<E().startOf("day")){T=T.set("other",t.concat(T.get("other")));const e=T.get("todaysStats"),n=T.get("olderStats"),s=Object.assign(e,n);T=T.set("olderStats",s)}const n=O(e),s=x(n);if(I===l.Z.ASCENDING_SORT){const e=l.Z.getDefaultComparator(I,"visitTime");l.Z.treeSort(s,e)}T=T.set("today",s);const i=M(n,L(s));T=T.set("todaysStats",i),Z.emitChange("searchResultsReady")}(e.items);break;case"HISTORY_LOAD_YESTERDAY_AND_OLDER":!function(e){const t=O(e),n=x(t),s=L(n);T=T.set("other",T.get("other").concat(n)),y=E(T.get("other").reduce(((e,t)=>e<t.id?e:t.id),E().valueOf()));const i=M(t,s);T=T.set("olderStats",{...T.get("olderStats"),...i}),Z.emitChange("searchResultsReady")}(e.items);break;case"HISTORY_REMOVE_AFTER":!function(e){if(0===e)T=new d.Map,T=T.set("today",[]),T=T.set("other",[]),T=T.set("todaysStats",{}),T=T.set("olderStats",{}),Z.emitChange("searchResultsReady");else{const t=E();let n="today",s="todaysStats";e<t.startOf("d").valueOf()&&(n="other",s="olderStats",T=T.set("today",[])),T=T.set("todaysStats",{});let i=!1;const r=[],a=T.get(n);a.forEach((t=>{const n=t.children.slice().filter((t=>t.visitTime<=e));i=i||n.length!==t.children.length,n.length>0&&(n.length!==t.children.length?r.push({...t,children:n}):r.push(t))})),T=T.set(n,i?r:a);const o=T.get(s,{}),l=new E(e);Object.keys(o).forEach((e=>{E(e).startOf("day")>=l.startOf("day")&&delete o[e]})),T=T.set(s,o),Z.emitChange("searchResultsReady")}}(e.since);break;case"HISTORY_REMOVE_VISITS":D(e.visits);break;case"HISTORY_SEARCH":!function(e,t){const n=S.get(t);S=S.set(t,e),n.text!==e.text&&Z.emitChangeParam("filterChange",t),v.nextTick((()=>{Z.emitChangeParam("searchResultsReady",t)}))}(e.filter,e.id)}var t}));const R=Z},52581:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(26729),i=n.n(s),r=n(27673);const a="change";let o={},l=!1;const c=new class extends(i()){getAll(){return o}hasLoadedFolders(){return l}getFoldersOfType(e,t){return o[e].folders[t]}emitChange(){this.emit(a)}addChangeListener(e){this.on(a,e)}removeChangeListener(e){this.removeListener(a,e)}clear(){o={},l=!1}};c.dispatchToken=r.Z.register((e=>{switch(e.actionType){case"MAIL_ADD_ACCOUNTS":o={...o,...e.accounts},c.emitChange();break;case"MAIL_REPLACE_ACCOUNTS":o=e.accounts,l=!0,c.emitChange();break;case"MAIL_REMOVE_ACCOUNT":delete o[e.accountId],o={...o},c.emitChange();break;case"MAIL_STOP":c.clear()}}));const u=c},51495:(e,t,n)=>{"use strict";n.d(t,{C:()=>j});var s=n(29319),i=n(76955),r=n(26729),a=n.n(r),o=n(24141),l=n(68415),c=n(40778),u=n(21622),m=n(27673),d=n(30801),h=n(47513),p=n.n(h),g=n(24383),b=n(48345),N=n(51110),f=n(74368),_=n(31054),v=n(63306),E=n(50063),C=n(32145),w=n(17252),y=n(30074),S=n(34155);const T="change";let k,I,A,Z=[],P="",D=!1,M=[],O=[],x={},L=!1,R=!1,B=[],F=[];function U(e,t){e.forEach((e=>{const{accountId:n,path:s,counter:i}=e;if(x[n]||(x[n]={}),t&&x[n][s]){const e=x[n][s];e.total+=i.total,e.unseen+=i.unseen,e.unread+=i.unread}else x[n][s]=i}))}function V(e){const{addedSles:t,removedSles:n}=e,{sleUpdates:s}=e,r=K.getListEntryComparator(),a=new Set;let o=!1;const l=new Set,c=[],u=[];function m(e){const t=K.createListEntry(e,[]),n=p()(M,t,w.PN);n<0&&M.splice(-n-1,0,t);const s=p()(O,t,r);s<0&&O.splice(-s-1,0,t),function(e){B.length>0&&(B=B.filter((t=>t.id!==e.id||(d(t),f.ZP.log("Mail",`Doing postponed index update for ${e.id}`),!1)))),F.length>0&&(F=F.filter((({id:t,newThreadKey:n})=>t!==e.id||(z(new Map([[t,n]])),f.ZP.log("Mail",`Doing postponed thread key update for ${e.id}`),!1))))}(e)}function d(e){const t=K.getListEntry(e.id);if(!t)return B.push(e),void f.ZP.log("Mail","Entry not found in index. Index update postponed until entry arrives.");const n=[...t.viewIds],{updates:s}=e;void 0!==s.sentDate&&(t.sentDate=s.sentDate),Object.keys(s).includes("queued")&&(void 0===s.queued?delete t.queued:t.queued=s.queued),void 0!==s.attachment&&(t.attachment=s.attachment),void 0!==s.flags&&(t.flags=s.flags),void 0!==s.from&&(t.fromIds=s.from.map(_.Z.add)),void 0!==s.sourceFilterIds&&(t.sourceFilterIds=s.sourceFilterIds),void 0!==s.subject&&(t.subject=s.subject),void 0!==s.to&&(t.toIds=s.to.map(_.Z.add));const a=s.removedViewIds||[],m=s.addedViewIds||[];if(void 0!==s.unseen)if(t.unseen=s.unseen,s.unseen)s.unseen&&f.ZP.warn("Mail",["filter","store"],"updateIndex is trying to mark a message unseen",s);else{const e=n.filter((e=>e%E.XN===E.ZC));a.push(...e)}if(void 0!==s.sources){let e=!1,r=!1;if(s.sources.forEach(((n,s)=>{if(n){const i=t.sources.get(s);if(i){if(void 0!==n.read&&i.read!==n.read){const t=s*E.XN+E.aD;n.read?a.push(t):m.push(t),e=!0}if(void 0!==n.deleted&&i.deleted!==n.deleted){const e=s*E.XN+E.IK;n.deleted?a.push(e):m.push(e),r=!0}t.sources.set(s,{...i,...n})}else{const{read:e,deleted:i,internal:r}=n;if(void 0===e||void 0===i||void 0===r)throw new Error("Cannot add invalid source "+JSON.stringify(n));t.sources.set(s,{read:e,deleted:i,internal:r})}}else t.sources.delete(s)})),e||r){const s=new Set;n.forEach((e=>{const t=Math.floor(e/E.XN);s.add(t)}));const o=[...s].filter((e=>!t.sources.has(e)));if(o.length>0){if(e){const e=o.map((e=>e*E.XN+E.aD));N.Z.call(t.sources)?a.push(...e):m.push(...e)}if(r){const e=o.map((e=>e*E.XN+E.IK));i.Z.isMessageDeleted(t.sources)?a.push(...e):m.push(...e)}}}}n.forEach((e=>l.add(e)));let d=[...n];a.length>0&&(t.viewIds=t.viewIds.filter((e=>!a.includes(e))),d=d.filter((e=>!a.includes(e))),a.forEach((e=>l.add(e)))),m.length>0&&(t.viewIds=t.viewIds.concat(m),d.push(...m),m.forEach((e=>l.add(e)))),u.push(n),c.push(d);const h=K.isVisible({...t,viewIds:n}),g=K.isVisible(t);if(h||g){if(!h&&g){const e=p()(Z,t,r);Z.splice(-e-1,0,t)}else if(h){let n=p()(Z,t,r),s=!1;if(n<0&&(n=Z.findIndex((e=>e===t)),s=!0),n>=0)if(g){if(s){Z.splice(n,1);const e=p()(Z,t,r);Z.splice(-e-1,0,t)}}else Z.splice(n,1);else console.warn("Message not found in _listEntries",{sleUpdate:e})}o=!0;let n=p()(O,t,r);if(n<0)if(n=O.findIndex((e=>e===t)),n>=0){O.splice(n,1);const e=p()(O,t,r);O.splice(-e-1,0,t)}else console.warn("Message not found in _sortedIndex",{sleUpdate:e})}}if(n&&n.forEach((e=>{!function(e){const t=p()(M,{id:e},w.PN);if(t>=0){const[n]=M.splice(t,1),s=p()(O,n,r);s>=0&&O.splice(s,1),n.viewIds.forEach((e=>l.add(e))),u.push(n.viewIds);const i=p()(Z,n,r);i>=0&&(Z.splice(i,1),o=!0),a.add(e)}}(e)})),a.size>0&&v.Z.removeEntries(a),t&&t.forEach((e=>{m(e)})),s&&s.forEach((e=>{d(e)})),o&&(Z=Z.slice(),K.emitChange({target:"listEntries",updateSelection:!0})),l.size>0){const e=K.getCounterFolders([...l]);e.length>0&&(u.forEach((t=>{H(t,-1,e)})),c.forEach((t=>{H(t,1,e)})),U(e,!0),K.emitChange({target:"counters"}))}}function H(e,t,n){const s=new Set(e);n.forEach((e=>{if(!s.has(e.totalViewId))return;const{viewIntersections:n,counter:i}=e;n.total.every((e=>s.has(e)))&&(i.total+=t),n.unseen.every((e=>s.has(e)))&&(i.unseen+=t),n.unread.every((e=>s.has(e)))&&(i.unread+=t)}))}function W(){const e=Date.now();Z=O.filter((e=>K.isVisible(e))),f.ZP.log("Mail",["filter","store"],`initListEntries took ${Date.now()-e}ms.`),L=!1}function z(e){const t=u.ZP.get(y.kMailSearchSortField),n=K.getListEntryComparator();let s,i=!1;e.forEach(((e,r)=>{const a=p()(M,{id:r},w.PN);if(a<0)return F.push({id:r,newThreadKey:e}),void f.ZP.log("Mail","Entry not found in index. Thread key update postponed until entry arrives.");const o=M[a],c=o.threadKey;if("threads"===t){const t=p()(O,o,n),s=p()(Z,o,n);o.threadKey=e,t>=0&&O.splice(t,1);const r=p()(O,o,n);O.splice(-r-1,0,o);if(K.isVisible(o)){s>=0&&Z.splice(s,1);const e=p()(Z,o,n);Z.splice(-e-1,0,o),i=!0}}else o.threadKey=e;const u=l.Z.getSelectedThreadPrefix();if(u){const e=c.splice(0,2);u.every(((t,n)=>e[n]===t))&&(s=M[a])}})),s&&S.nextTick((()=>s&&o.Z.selectThread(s))),i&&K.emitChange({target:"listEntries"})}function G(){P="",k=void 0,D=!1,W(),K.emitChange({target:"listEntries"})}const K=new class extends(a()){getByAccountId(e){return g.Z.getByAccountId(e)}getByFolder(e,t=E.ym){if(e)return g.Z.getByFolderId([e,t])}get(e){return g.Z.get(e)}getByIds(e){return g.Z.getByIds(e)}getByFolderId(e){return g.Z.getByFolderId(e)}getSourceFilters(e){const t=p()(M,{id:e},w.PN);if(t>=0){const{sourceFilterIds:e}=M[t];return g.Z.getByIds(e)}return[]}isLoading(){return L}isInitialized(){return R}filterExists(e,t){return!!g.Z.getByFolderId([e,t])}emitChange(e){this.emit(T,e)}addChangeListener(e){this.on(T,e)}removeChangeListener(e){this.removeListener(T,e)}getKnownFlags(){const e=this.getByAccountId(E.ut).map((e=>e.path)),t=Object.keys(E.T4).map((e=>E.T4[e]));return e.concat(t)}isSenderMailingList(e){const t=E.cs+"/",n=E.W4+"/";return void 0!==g.Z.getAll().find((s=>s.accountId===E.wC&&(s.path===t+e||s.path===n+e)))}isCounterFolder(e){const t=K.get(e);return t&&t.accountId!==E.tQ}getCounters(e,t=E.ym){return x[e]&&x[e][t]}getCounterFolders(e){const t=e.filter((e=>{const t=e%E.XN,n=Math.floor(e/E.XN);if(!K.isCounterFolder(n))return!1;const s=K.get(n),{showRead:i,showMailingLists:r,showFeeds:a,showJunk:o,showCustomFolder:l}=b.Z.getFilterOptions(s);switch(t){case E.xE:return i&&r&&a;case E.ZC:return!0;case E.aD:return!i;case E.EO:return!r;case E.Fz:return!a;case E.Jq:return!o;case E.js:return!l;default:return!1}}));if(0===t.length)return[];const n=[];return t.forEach((e=>{const t=Math.floor(e/E.XN),s=K.get(t);if(!s)return;const i=n.some((e=>e.accountId===s.accountId&&e.path===s.path));if(i)return;const r={accountId:s.accountId,path:s.path,totalViewId:0,viewIntersections:{total:[],unseen:[],unread:[]},counter:{total:0,unseen:0,unread:0}},{showDeleted:a,showMailingLists:o,showFeeds:l,showJunk:c,showCustomFolder:u}=b.Z.getFilterOptions(s),m=t*E.XN+E.xE,d=t*E.XN+E.ZC,h=t*E.XN+E.aD,p=o?0:t*E.XN+E.EO,g=a?0:t*E.XN+E.IK,N=l?0:t*E.XN+E.Fz,f=c?0:t*E.XN+E.Jq,_=u?0:t*E.XN+E.js;r.totalViewId=m;const{viewIntersections:v}=r;if(p||g||N||f||_){const e=[];p&&e.push(p),g&&e.push(g),N&&e.push(N),f&&e.push(f),_&&e.push(_),v.total=e,v.unseen=[d].concat(e),v.unread=[h].concat(e)}else v.total=[m],v.unseen=[d],v.unread=[h];n.push(r)})),n}getIndex(){return M}getListEntry(e){const t=p()(M,{id:e},w.PN);if(t>=0)return M[t]}matchesViewIntersection(e,t){return Array.isArray(t)&&t.every((t=>e.includes(t)))}getListEntryComparator(){const e=u.ZP.get(y.kMailSearchSortField);let t;switch(e){case"sentDate":t=w.rQ;break;case"subject":t=w.Ji;break;case"sender":const e=c.Z.getSelectedFolder(),n=!!e&&[E.Nz,E.kY,E.fZ].includes(s.Z.getFolderType(e.accountId,e.path));t=(0,w.S5)(n,_.Z.get);break;case"threads":t=w.HT}if(!t)throw new Error("Comparator not found for sort field "+e);return"ascending"===u.ZP.get(y.kMailSearchSortOrder)?t:(0,w.g4)(t)}isVisible(e){if(D||void 0!==A);else if(!K.matchesViewIntersection(e.viewIds,I))return!1;return(!A||!A.some(((t,n)=>t!==e.threadKey[n])))&&!(k&&p()(k,e,w.dc)<0)}hasNoListEntries(){return 0===Z.length}createListEntry(e,t){const{id:n,messageId:s,attachment:i,flags:r,replied:a,sentDate:o,subject:l,threadKey:c,unseen:u,queued:m,sourceFilterIds:d,sources:h}=e;return{id:n,messageId:s,attachment:i,flags:r,replied:a,sentDate:o,subject:l,threadKey:c,unseen:u,queued:m,viewIds:t,sourceFilterIds:d,sources:h,toIds:e.to.map((e=>_.Z.add(e))),fromIds:e.from.map((e=>_.Z.add(e)))}}getListEntries(){return Z}getQueryNumFound(){return k?.length}getListEntriesByFolder(e,t){const n=this.getByFolder(e,t);if(!n)throw new Error("Filter not found "+[e,t].join());const s=b.Z.getViewIntersection(n);return M.filter((e=>this.matchesViewIntersection(e.viewIds,s)))}getListEntryIdsByViewIds(e){return M.filter((t=>t.viewIds.some((t=>e.has(t))))).map((e=>e.id))}getQuery(){return P}};K.dispatchToken=m.Z.register((e=>{switch(e.actionType){case"MAIL_INIT_INDEX_FINISHED":!function(){M.sort(w.PN);const e=K.getListEntryComparator();O.sort(e),W(),R=!0,K.emitChange({target:"finishIndexProgress"}),K.emitChange({target:"listEntries",updateSelection:!0})}();break;case"MAIL_INIT_INDEX_BATCH":!function(e,t,n){const s=new Set;for(const e of t)for(const t of e.viewIds)s.add(t);const i=K.getCounterFolders([...s]);for(let n=0;n<e.length;n++){const s=e[n],{searchListId:r,viewIds:a}=t[n];if(s.id>r)throw new Error(`Database inconsistency: extra viewIds entry ${r}.`);if(s.id<r)throw new Error(`Database inconsistency: viewIds entry for SLE ${s.id} not found.`);const o=K.createListEntry(s,a);if(M.push(o),O.push(o),i.length>0){const e=new Set(a);i.forEach((t=>{if(!e.has(t.totalViewId))return;const{viewIntersections:n,counter:s}=t;n.total.every((t=>e.has(t)))&&s.total++,n.unseen.every((t=>e.has(t)))&&s.unseen++,n.unread.every((t=>e.has(t)))&&s.unread++}))}}U(i,!0),K.emitChange({target:"updateIndexProgress",indexCount:M.length,total:n})}(e.sleBatch,e.viewIdsBatch,e.total);break;case"MAIL_UPDATE_QUERY_RESULTS":{const{queryResults:t,queryAllMessages:n,folder:s}=e;!function(e,t,n){if(k=e,D=t,n){D=!1,A=void 0;const e=K.getByFolder(n.accountId,n.path);e&&(I=b.Z.getViewIntersection(e))}W(),K.emitChange({target:"listEntries"})}(t,n,s);break}case"MAIL_QUERY_CHANGE":t=e.query,P=t;break;case d.Z.MAIL_CLEAR_QUERY:G();break;case"MAIL_INDEX_UPDATE":V(e.updates);break;case"MAIL_SORT_LIST_ENTRIES":!function(e){e&&M.forEach(C.o);const t=K.getListEntryComparator();O.sort(t),W(),K.emitChange({target:"listEntries",updateSelection:!0})}(e.wasThreads);break;case"MAIL_FILTERS_INIT":K.emitChange({target:"filters"});break;case"MAILING_LIST_GROUPS_INIT":K.emitChange({target:"mailingLists"});break;case"MAIL_FILTERS_CHANGED":{const{filterIds:t}=e;!function(e){const t=c.Z.getSelectedFolder();if(t){const{accountId:n,path:s}=t;if(n!==E.tQ){const t=K.getByFolder(n,s);t&&e.includes(t.id)&&(I=b.Z.getViewIntersection(t),W(),K.emitChange({target:"listEntries",updateSelection:!0}))}}K.emitChange({target:"filters",filterIds:e,updateSelection:!0,updateScrollPosition:!0})}(t);break}case"MAILING_LIST_GROUP_CHANGED":K.emitChange({target:"mailingLists"});break;case"MAIL_UPDATE_COUNTERS":{const{countedFolders:t,deltaValues:n}=e;U(t,n),K.emitChange({target:"counters"});break}case"MAIL_INIT_MESSAGES":e.folderIntersection?function(e,t){const n=t&&g.Z.getByFolderId([t.accountId,t.path]);P=n?.filterValue.query||"",k=void 0,D=!1,A=void 0,I=e,W(),K.emitChange({target:"listEntries",updateSelection:!0})}(e.folderIntersection,e.folder):function(){Z=[],P="",k=void 0,D=!1,I=void 0,A=void 0;const e=u.ZP.get(y.kMailAccounts);L=!!e&&e.length>0,K.emitChange({target:"listEntries",isLoading:L})}();break;case"MAIL_UPDATE_THREAD_KEYS":{const{updates:t}=e;z(t);break}case"MAIL_SELECT_THREAD":const{threadPrefix:n}=e;G(),function(e){A=e,W(),K.emitChange({target:"listEntries",updateSelection:!0,updateScrollPosition:!0})}(n);break;case"MAIL_GOTO_UNREAD":K.emitChange({target:"gotoUnread"});break;case d.Z.MAIL_GOTO_NEXT_UNREAD:K.emitChange({target:"gotoNextUnread"});break;case d.Z.MAIL_GOTO_PREVIOUS_UNREAD:K.emitChange({target:"gotoPreviousUnread"});break;case"MAIL_STOP":Z=[],P="",k=void 0,D=!1,M=[],O=[],x={},L=!1,I=void 0,A=void 0,R=!1,K.emitChange({target:"counters"}),K.emitChange({target:"listEntries"})}var t}));const j=K},68415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(27673),i=n(26729),r=n.n(i),a=n(40778);const o="change";let l={};const c=new class extends(r()){clear(){l={},c.emitChange()}getOptions(){return l}emitChange(){this.emit(o)}addChangeListener(e){this.on(o,e)}removeChangeListener(e){this.removeListener(o,e)}isSenderViewOn(){return!!c.getOptions().forSender}getSelectedThreadPrefix(){return c.getOptions().threadPrefix}};c.dispatchToken=s.Z.register((e=>{switch(e.actionType){case"MAIL_SELECT_FOLDER":s.Z.waitFor([a.Z.dispatchToken]),l=e.options,c.emitChange();break;case"MAIL_FOLDER_SELECT_HISTORY_INDEX":s.Z.waitFor([a.Z.dispatchToken]),l=a.Z.getOptionsFromHistory(),c.emitChange();break;case"MAIL_SEARCH_SET_OPTIONS":l=e.options,c.emitChange();break;case"MAIL_STOP":c.clear()}}));const u=c},40778:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var s=n(76483),i=n(26729),r=n.n(i),a=n(27673),o=n(79290),l=n(29319),c=n(8547),u=n(50063);const m="change",d={[u.of]:[],[u.X4]:[u.tq],[u.Qu]:[],[u.Nz]:[u.H6,u.jT,u.kp,u.tq],[u.kY]:[u.q0,u.pz,u.s0,u.H6,u.jT,u.kp,u.tq],[u.fZ]:[u.q0,u.pz,u.s0,u.H6,u.jT,u.kp,u.tq],[u.Hd]:[],[u.uT]:[u.H6]};let h;Object.freeze(d);let p=[],g=-1,b=[],N=!1,f=!1;const _=new class extends(r()){constructor(...e){var t,n,i;super(...e),i=e=>[{handler:s.ZP.goToNextUnread,..."list"===e?(0,c.Z)("Next Unread"):(0,c.Z)("Go to Next Unread")},{handler:s.ZP.goToPreviousUnread,..."list"===e?(0,c.Z)("Previous Unread"):(0,c.Z)("Go to Previous Unread")},{handler:s.ZP.markAsReadAndGoToNextUnread,...(0,c.Z)("Mark Read and Go to Next Unread")}],(n="getGoToMenuItems")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}isOptionAllowedAsDefault(e){const t=this.getSelectedFolder();let n=d[u.of];if(t){const e=l.Z.getFolderType(t.accountId,t.path);d.hasOwnProperty(e)&&(n=d[e]);const i=(0,s.kv)();e||(i.type===u.uT&&(n=d[u.uT]),i.type===u.N1&&(n=d[u.Nz])),N!==i.shouldDisable.trashButton&&(N=i.shouldDisable.trashButton),f!==i.shouldDisable.spamButton&&(f=i.shouldDisable.spamButton)}return n&&!n.includes(e)}clear(){h=void 0,p=[],g=-1,b=[],_.emitChange()}getSelectedFolder(){return h}shouldDisableTrashButton(){return N}shouldDisableSpamButton(){return f}getSelectionHistory(){return p}getHistoryIndex(){return g}getOptionsFromHistory(e){return void 0!==e?b[e]:b[g]||{}}isFolderAnEditMailFolder(){const e=_.getSelectedFolder(),t=e&&l.Z.getFolderType(e.accountId,e.path);return[u.kY,u.fZ,u.Nz].includes(t)}isTrashFolderSelected(){if(!h)return!1;const{accountId:e,path:t,type:n=""}=h;return n===u.uT||e===u.of&&t===u.cm}isSentFolderSelected(){if(!h)return!1;const{accountId:e,path:t,type:n=""}=h;return n===u.Nz||e===u.of&&t===u.N1}emitChange(){this.emit(m)}addChangeListener(e){this.on(m,e)}removeChangeListener(e){this.removeListener(m,e)}canGoBack(){return _.getSelectionHistory().length>1&&_.getHistoryIndex()>0}canGoForward(){const e=_.getSelectionHistory();return e.length>1&&_.getHistoryIndex()<e.length-1}},v=function(){o.Z.set({FOLDER_SELECTION:h},(e=>{e&&console.error("Failed to store selected folder",h,e)}))};_.dispatchToken=a.Z.register((e=>{switch(e.actionType){case"MAIL_SELECT_FOLDER":t=e.folder,n=e.options,g>-1&&(p=p.slice(0,g+1),b=b.slice(0,g+1)),(!((s=p[p.length-1])===(i=t)||s&&i&&s.accountId===i.accountId&&s.path===i.path)||Object.keys(n).length>0)&&(g=p.length,p.push(t),b.push(n)),h=t,v(),_.emitChange();break;case"MAIL_FOLDER_SELECT_HISTORY_INDEX":const{historyIndex:r}=e;void 0!==r&&(!function(e){e>=0&&e<p.length&&(g=e,h=p[g],v())}(r),_.emitChange());break;case"MAIL_STOP":_.clear()}var t,n,s,i}));const E=_},1877:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(26729),i=n.n(s),r=n(27673),a=n(30801),o=n(43393),l=n(18172),c=n(58848);const u="change";let m=(0,o.Map)();const d={};let h=new Map;const p={},g={},b=new class extends(i()){constructor(...e){var t,n,s;super(...e),t=this,n="emitChange",s=(0,c.default)((e=>{this.emit(u,e)}),250),n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}getNavigationInfo(e){return d[e]}getSSLInfo(e){return h.get(e)}getBlockedPopupsById(e){return p[e]||(0,o.Set)()}getPermissionsById(e){return m.get(e,(0,o.Map)())}getblockedPageContents(e){return g[e]||(0,o.List)()}addChangeListener(e){this.on(u,e)}removeChangeListener(e){this.removeListener(u,e)}};r.Z.register((e=>{switch(e.actionType){case"NAVIGATION_SET_STATE":t=e.pageId,n=e.navigationState,d[t]=n,b.emit(u,{pageId:t,navigationState:n});break;case"PAGE_SET_SSL_STATE":!function(e,t){const n=h;h=(0,l.Uy)(h,(n=>{const s=n.get(e);s?(s.state=t.state,s.issuer=t.issuer):"none"!==t.state&&n.set(e,{state:t.state,issuer:t.issuer})})),n!==h&&b.emitChange()}(e.pageId,e.info);break;case a.Z.NAVIGATION_ADD_POPUP:!function(e,t){let n=p[e]||(0,o.Set)();n=n.add(t),p[e]=n,b.emitChange()}(e.pageId,e.popupEvent);break;case a.Z.NAVIGATION_REMOVE_POPUP:!function(e,t){const n=p[e];n&&(p[e]=n.filter((e=>e.targetUrl!==t)),b.emitChange())}(e.pageId,e.targetUrl);break;case a.Z.NAVIGATION_RESET_BLOCKED_POPUPS:!function(e){p[e]&&(p[e]=(0,o.Set)(),b.emitChange())}(e.pageId);break;case a.Z.NAVIGATION_SET_PERMISSION:!function(e,t,n,s,i){switch(n){case"audiocapture":n="microphone";break;case"videocapture":n="camera"}let r=m.get(e,(0,o.Map)()),a=r.get(t,(0,o.Map)());const l={requestEvent:s,state:i};a=a.set(n,l),r=r.set(t,a),m=m.set(e,r),b.emitChange("setPermissionInfo")}(e.pageId,e.origin,e.permission,e.requestEvent,e.state);break;case a.Z.NAVIGATION_RESET_PERMISSIONS:!function(e){m=m.delete(e),b.emitChange()}(e.pageId);break;case a.Z.NAVIGATION_SET_BLOCKED_CONTENT:!function(e,t){let n=g[e]||(0,o.List)();n=n.push(t),g[e]=n,b.emitChange()}(e.pageId,e.content_type);break;case a.Z.NAVIGATION_RESET_BLOCKED_CONTENT:!function(e){g[e]=(0,o.List)(),b.emitChange()}(e.pageId)}var t,n}));const N=b},39412:(e,t,n)=>{"use strict";n.d(t,{d0:()=>l,mS:()=>c,ZP:()=>y});var s=n(26729),i=n.n(s),r=n(27673),a=n(89555);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l="vivaldi/x-notes",c=500,u="change",m={children:[],content:"",dateAdded:0,id:"1",index:0,parentId:"0",separator:!1,title:"Notes",trash:!1};let d=m,h={id:-1},p=[];const g=new class extends(i()){constructor(...e){super(...e),o(this,"_resolveReady",a.default),o(this,"ready",(()=>new Promise((e=>{this._resolveReady=e})))()),o(this,"init",(e=>{d=e[0]?e[0]:m,h=b(d)||{id:-1},g.emitChange("init",""),this._resolveReady()}))}getRootNode(){return d}getLastTopNode(){const e=this.getRootNode(),t=e&&e.children?e.children:[];if(t.length>1)return t[t.length-2]}hasNotes(){const e=this.getRootNode();if(e&&e.children){if(e.children.length>1)return!0;const t=e.children[0];if(t&&t.trash)return Boolean(t.children&&t.children.length>0)}return!1}isFolder(e){return Boolean(e.children)}isSeparator(e){return Boolean(e.separator)}isNodeEmpty(e){const t=g.getNodeById(e);return t&&!t.title&&!t.content&&(!t.children||0===t.children.length)}hasChildren(e){return e.children&&e.children.length>0}getNodeById(e){const t=function(n){if(n)for(let s=0;s<n.length;s++){const i=n[s];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(d.children)}getDragData(e,t){const n=t.map((e=>g.getNodeById(e))).filter(Boolean);switch(e){case"text/plain":case"vivaldi/x-title":{const e=[];return n.forEach((t=>{e.push(g.isFolder(t)?t.title:t.content)})),e.join("\r\n")}case"text/html":{const e=n&&1===n.length?n[0]:void 0;return e&&e.url&&e.title?"<a href="+e.url+">"+e.title+"</a>":""}case"text/uri-list":return n.filter((e=>!!e.url)).join("\r\n");default:return""}}getFilteredTree(e,t){const n=function(e,t,s,i,r){if(!e)return;let a=!1;return e.forEach((e=>{let o=!1;if(e.children){const l={...e,children:[]};n(e.children,l.children,s,i,r)&&(t.push(l),a=!0,o=!0)}if(!o&&g._matchNode(e,i,r)){const n={...e};t.push(n),e.children&&s.push(e.id),a=!0}})),a},s=this.getRootNode().children,i=[],r=[];return n(s,i,r,e,t),{nodes:i,collapsed:r}}getFilteredFlat(e,t){const n=(e,t,s,i)=>{e&&e.forEach((e=>{!i.inTrash&&e.trash||(g._matchNode(e,s,i)&&(e.children?t.push({...e,children:[],isExpanded:!1}):t.push({...e})),e.children&&n(e.children,t,s,i))}))},s=this.getRootNode().children,i=[];return n(s,i,e.toLowerCase(),t),i}_matchNode(e,t,n){let s=!1;const i=t.toLowerCase().split(" "),r=e.title?e.title.toLowerCase():"",a=e.content?e.content.toLowerCase():"",o=e.url?e.url.toLowerCase():"";return r.length&&(s=i.every((e=>r.includes(e)))),!s&&a&&!1!==n.content&&(s=i.every((e=>a.includes(e)))),!s&&o&&!1!==n.url&&(s=i.every((e=>o.includes(e)))),s}validateForDrag(e){return e.filter((e=>e!==h.id))}validateForDeletion(e){return e.filter((e=>e!==h.id))}validateForEdit(e){return e!==h.id}getTitle(e){const t=g.getNodeById(e);return t&&(t.title||t.content)||""}getCutIds(){return p}emitChange(e,t){this.emit(u,e,t)}addChangeListener(e){this.on(u,e)}removeChangeListener(e){this.removeListener(u,e)}};function b(e){if(e.children)for(let t=0;t<e.children.length;t++){const n=e.children[t];if(n.trash)return n;if(n.children){const e=b(n);if(void 0!==e)return e}}}function N(e,t){const n=d.children;if(d!==m&&n){!0===E(d,0,e)&&(d.children=[...n],g.emitChange(t,e.id))}}function f(e,t){const n=d.children;if(d!==m&&n){!0===C(d,e,t)&&(d.children=[...n],g.emitChange("changed",e))}}function _(e,t){const n=d.children;if(d!==m&&n){!0===w(d,e)&&(d.children=[...n],!0!==t&&g.emitChange("removed",e))}}function v(e){if(e.children)for(let t=0;t<e.children.length;t++){const n=e.children[t];n.index=t,n.treeIndex=t}}function E(e,t,n){if(e.id===n.parentId){const s=n||{level:t,treeIndex:n.index};return e.children&&e.children.splice(n.index||0,0,s),v(e),!0}if(e.children)for(let s=0;s<e.children.length;s++){const i=e.children[s],r=i.children;if(r){if(!0===E(i,t+1,n))return i.children=[...r],!0}}return!1}function C(e,t,n){if(!e.children)return!1;for(let s=0;s<e.children.length;s++){const i=e.children[s];if(i.id===t&&(i.content!==n.content||i.url!==n.url)){const t={...e.children[s],...n};return e.children.splice(s,1,t),!0}if(i.children){const e=i.children;if(!0===C(i,t,n))return i.children=[...e],!0}}return!1}function w(e,t){if(!e.children)return!1;for(let n=0;n<e.children.length;n++){const s=e.children[n];if(s.id===t)return e.children.splice(n,1),v(e),!0;if(s.children){const e=s.children;if(!0===w(s,t))return s.children=[...e],0===s.children.length&&(s.isExpanded=!1),!0}}return!1}r.Z.register((e=>{switch(e.actionType){case"NOTES_INIT":g.init(e.notes);break;case"NOTES_ADD_ITEM":N(e.item,"added");break;case"NOTES_CHANGE_ITEM":f(e.id,e.changes);break;case"NOTES_MOVE_ITEM":!function(e,t,n){if(d!==m&&d.children){const s=g.getNodeById(e);if(void 0!==s){_(e,!0);const i=s.index||0;s.parentId===t&&n>i&&n--,s.parentId=t,s.index=n,N(s,"moved")}}}(e.id,e.targetFolder,e.targetIndex);break;case"NOTES_REMOVE_ITEM":_(e.id,!1);break;case"NOTES_SET_CUT_IDS":p=e.ids,g.emitChange("cutids","")}}));const y=g},78508:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(31963),i=n.n(s),r=n(27673);function a(e){return t=>t.id!==e}function o(e,t){return e.when-t.when}class l extends(i()){constructor(){super(r.Z)}getInitialState(){return{notifications:[],activeNotifications:[]}}reduce(e,t){switch(t.actionType){case"NOTIFICATIONS_INIT":return{...e,notifications:t.notifications};case"MAIN_SHOW_CALENDAR_ALARM":return{...e,activeNotifications:e.activeNotifications.filter(a(t.options.notification.id)).concat(t.options.notification).sort(o)};case"MAIN_HIDE_CALENDAR_ALARM":return{...e,activeNotifications:e.activeNotifications.filter(a(t.notificationId))}}return e}}const c=new l},91662:(e,t,n)=>{"use strict";n.d(t,{O7:()=>x,lg:()=>z,ZP:()=>Se,xx:()=>ke});var s=n(87716),i=n(26729),r=n.n(i),a=n(45447),o=n(21622),l=n(7997),c=n(14705),u=n(35767),m=n(27673),d=n(54471),h=n(2121),p=n(62830),g=n.n(p),b=n(45850),N=n(5264),f=n.n(N),_=n(42954),v=n(43393),E=n(24604),C=n(90808),w=n(3969),y=n(44025),S=n(7509),T=n(30074),k=n(31390),I=n(88279),A=n(33433),Z=n(56752),P=n(91411),D=n(1877),M=n(32135);function O(e){const t=e.id;if(!t)return console.warn("Need a tab ID to sync"),Promise.resolve();const n={tabId:t};return new Promise((e=>{h.Z.runtime.sendMessage({getNavigationState:n},(n=>{if(!n)return e();const s=n,{blockedPopups:i,fastForwardState:r,navigationState:a,sslInfo:o,urlbarState:l}=s;A.Z.copyFastForwardState(t,r),P.Z.setNavigationState(t,window.vivaldiWindowId,a),o&&P.Z.setSSLState(t,o),M.Z.copyUrlfieldState(t,l),i.forEach((e=>P.Z.addBlockedPopupEvent(t,e))),e()}))}))}const x="change",L=`${y.jk.internals.startpage}?section=Speed-dials`;let R=(0,v.Map)(),B=(0,v.Map)(),F=(0,v.Set)(),U=(0,v.Map)(),V=(0,v.Map)(),H=(0,v.Map)(),W=(0,v.Map)();class z extends((0,v.Record)({type:"tab",id:0,page:new a.ZP})){}class G extends((0,v.Record)({type:"group",id:"",page:new a.ZP,pages:(0,v.List)()})){}function K(e){if(e.pinned&&"on"!==o.ZP.get(T.kTabsClosePinned))return!1;return!(o.ZP.get(T.kTabsNeverCloseLast)&&(0,y.Rf)(e.url)&&j.isLastPage(e.windowId))}const j=new class extends(r()){constructor(...e){var t,n,s;super(...e),s=K,(n="canClosePage")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}findPageToActivateAfterClosingPage(e,t){return he(e,t)}findRepositionedIndex(e,t,n){return function(e,t,n){const s=o.ZP.get(T.kTabsNewPlacement);if(e.pinned)return e.index;if(function(e){return V.get(e.getIn(["extData","ext_id"]))}(e))return ne(e.getIn(["extData","ext_id"]),!1),e.index;const i="number"==typeof e.openerTabId?j.getPageById(e.openerTabId):null,r=i?(0,a.av)(i):(0,a.av)(e),l=(()=>{if(!n)return e.index;const t=(0,a.av)(n);if(r&&r!==t&&j.isGroup(t,n.windowId)){return j.getGroup(t,n.windowId).last().index+1}return n.pinned?0:n.index+1})();switch(s){case"directrightofcurrent":default:return l;case"openintabstackwithrelated":case"rightofcurrent":{if("number"!=typeof e.openerTabId){if(r){return j.getGroup(r,e.windowId).last().index+1}return e.index}if(j.getPageById(e.openerTabId)?.pinned)return 0;const n=t=>t.id!==e.openerTabId&&t.openerTabId!==e.openerTabId,s=t.skipWhile(n).takeUntil(n).last();return s?s.index+1:e.index}case"alwayslast":{if(r&&o.ZP.get(T.kTabsStackingOpenInCurrent)){return j.getGroup(r,e.windowId).last().index+1}const n=t.last();return n?n.index+1:l}}}(e,this.getPages(t),n)}getPages(e){return R.get(e)||(0,v.List)()}getMutablePagesInAllWindows(){let e=(0,v.List)();return R.forEach(((t,n)=>{e=e.concat(t)})),e}getTabs(e,t,n=j.getPages(e)){return Y(e,t,n)}getPageById(e){return this.getMutablePagesInAllWindows().find((t=>t.id===e))}getPageByReloadId(e){let t;return R.forEach(((n,s)=>{t||(t=n.find((t=>t.getIn(["extData","ext_id"])===e)))})),t}getPageHistory(e){return B.get(e)}unsafeGetActivePage(e=d.ZP.getActiveBrowserOrPopupWindowId(),t=j.getPages(e)){return $(t)}getActivePage(e=window.vivaldiWindowId){return this.getPages(e).find((e=>e.active))}getLastVisited(e){const t=B.get(e);return t[t.length-2]}isActivePage(e){return j.unsafeGetActivePage().get("id")===e}isUnread(e){return e.unread&&!e.discarded}getGroup(e,t,n=R.get(t)){return e?X(n,e):(0,v.List)()}isDisplayingImage(e){const t=j.getPageById(e);return!!t&&["image/jpeg","image/pjpeg","image/jpg","image/webp","image/png","image/gif","image/bmp","image/vnd.microsoft.icon","image/x-icon","image/x-xbitmap","image/x-png","image/svg+xml"].includes(t.get("mimeType"))}isGroup(e,t){return!!e&&Q(R.get(t),e)}getGroupHighlightId(e,t){return q(this.getPages(t),t,e)}getTiles(e,t,n=this.getPages(t)){return J(n,e)}isSelecting(e){return F.has(e)}getSelection(e){return U.get(e)}getSelectedPages(e){const t=U.get(e).reduce(((t,n)=>{const s=this.getPages(e).find((e=>e.id===n));return s?[...t,s]:t}),[]);return(0,v.List)(t).sortBy((e=>e.index))}getReloadingPages(){return this.getMutablePagesInAllWindows().filter((e=>e.getIn(["extData","interval"])>0))}getDiscardablePages(e){return this.getPages(e).filter((e=>!e.discarded&&!e.active&&!e.isInspected&&e.url!==j.getDefaultStartpage()))}getNewGroupId(){return g()()}getTitleByGroupId(e,t){return(o.ZP.get(T.kTabsStackingNameMap)||{})[e]||t}getUnreadCount(e){let t=0;return this.getPages(e).forEach((e=>{j.isUnread(e)&&t++})),t}getHistoryManagerState(e){const t={},n=this.getPageById(e);if(n){const e=n.getIn(["extData","historyManagerState"]);e&&e.forEach(((e,n)=>{t[n]=e}))}return t}isLastPage(e){return ee(this.getPages(e))}getStepInfo(e,t,n,s){const i=j.getTabs(s,!0),r=(0,a.av)(e);if(r&&!n){const n=i.flatMap(((e,t)=>(0,a.av)(e.page)===r?[t]:[])),s=n.get(0),o=n.get(-1);let l;return l=t?e.index+1>o?o:e.index+1:e.index-1<s?s:e.index-1,{pages:v.List.of(e),index:l}}{const o=r&&n?j.getGroup(r,s):v.List.of(e);if(t){const t=r&&n?o.last().index:e.index;if(t===i.last().page.index)return;const l=i.get(t+1),c=(0,a.av)(l?.page);let u;if(c){u=j.getGroup(c,s).last().index}else u=t+1;return{pages:o,index:u}}{const t=r&&n?o.first().index:e.index;if(t===(i.find((e=>!e?.page.pinned))?.page.index||0))return;const l=i.get(t-1),c=(0,a.av)(l?.page);let u;if(c){u=j.getGroup(c,s).first().index}else u=t-1;return{pages:o,index:u}}}}isActiveInternal(){const e=j.unsafeGetActivePage().get("url");return y.jk.isInternalUrl(e)}isActiveExternal(){const e=j.unsafeGetActivePage().get("url");return!y.jk.isInternalUrl(e)}getStartpage(){const e=l.Z.getState().windowStyles.get(window.vivaldiWindowId)||c.Z.getFallbackStyle(),t=c.Z.getWindowBackgroundColor(e);return t?L+"&background-color="+t.toString():L}getDefaultStartpage(){if(d.ZP.isGuestSession())return y.jk.internals["guest-intro"];let e=o.ZP.get(T.kTabsNewPageLink);if(e===_.Fp.EXTENSION){const t=o.ZP.get(T.kExtensionURLOverrides).newtab?.some((e=>e.active));t||(e=_.Fp.STARTPAGE)}switch(e){case _.Fp.EXTENSION:return _.P1;case _.Fp.BLANKPAGE:return y.jk.internals.blankpage;case _.Fp.HOMEPAGE:const e=o.ZP.get(T.kHomepage);return e===_.QG?this.getStartpage():e;case _.Fp.CUSTOM:const t=o.ZP.get(T.kTabsNewPageCustomUrl);return(0,S.C3)(t)||(0,S.xl)(t)?y.jk.getUrl(t):y.jk.internals.blankpage;case _.Fp.STARTPAGE:default:return this.getStartpage()}}canUseForMenu(e,t){const n=j.getPages(e);return n.size===t.size&&!t.some(((e,t)=>{const s=n.get(t);return e!==s&&(e.title!==s.title||e.url!==s.url)}))}isUrlInAnyWindowPromise(e){return new Promise((t=>{h.Z.windows.getAll({populate:!0},(n=>{const s=n&&n.some((t=>t.tabs&&t.tabs.some((t=>t.url&&t.url===e||t.pendingUrl&&t.pendingUrl===e))));t(s)}))}))}useDefaultIcon(e){if(!e.url)return!0;const t=e.url;return!e.favIconUrl&&!(0,y.pM)(t)&&!(0,y.QB)(t)}emitChange(e){j.emit(x,e)}addChangeListener(e){this.on(x,e)}removeChangeListener(e){this.removeListener(x,e)}},Y=f()(1)(((e,t,n)=>t?n.map((e=>new z({page:e,id:e.id}))):n.groupBy((e=>(0,a.av)(e)||e.id)).map(((t,s,i)=>t.count()>=2?new G({id:s,pages:t,page:n.find((t=>t.id===q(n,e,`${s}`)))}):new z({page:t.first(),id:t.first().id}))).toList())),$=f()(1)((e=>e.find((e=>e.active))||new a.ZP));const X=f()(10)((function(e,t){return t?e.filter((e=>(0,a.av)(e)===t)):(0,v.List)()})),Q=f()(10)(((e,t)=>!("off"===o.ZP.get(T.kTabsStackingMode)||!t)&&e.filter((e=>(0,a.av)(e)===t)).count()>1)),q=f()(10)(((e,t,n)=>{const s=X(e,n),i=B.get(t);if(i)for(let e=i.length-1;e>=0;e--)if(s.some((t=>t.id===i[e])))return i[e];return s.first()?.id}));const J=f()(10)((function(e,t){return t?e.filter((e=>(0,a.jA)(e)===t)):(0,v.List)()}));const ee=f()(1)((e=>e.filter((e=>!e.isRemoved)).count()<2));const te=(0,C.Z)((e=>h.Z.tabs.query({windowId:e},(e=>e.forEach((e=>{const t=j.getPageById(e.id?e.id:-1);if(t){let n;try{n=JSON.parse(e.extData||"{}")}catch(e){n={}}const s=(0,v.Map)(n);(0,v.is)(s,t.extData)||h.Z.tabs.update(t.id,{extData:JSON.stringify(n)},(()=>{h.Z.runtime.lastError}))}}))))),160);function ne(e,t){V=V.set(e,t)}function se(e,t,n,s){const i=j.getPages(t);if(!i)return!1;const r=i.findIndex((t=>t.id===e));if(-1===r)return!1;const a=R;return R=R.setIn([t,r,n],s),a!==R}function ie(e,t){const n=se(t,e,"unread",!1),s=$(j.getPages(e)),i=s.id!==t&&se(s.id,e,"active",!1),r=se(t,e,"active",!0);return n||i||r}function re(e,t,n=[]){if(!e||0===e.length)return;const i=(0,v.List)(e.map((e=>{e.favIconUrl||(e.favIconUrl=function(e){return!e.favIconUrl||e.favIconUrl.startsWith("file://")?"chrome://favicon/size/16@2x/"+(e.url||""):(e.favIconUrl&&y.jk.isExtensionProtocol(e.favIconUrl)&&y.jk.isOurExtension(e.favIconUrl),e.favIconUrl)}(e));let t=s.ZP.tabToPage(e);return t.hasIn(["extData","useDefaultIcon"])||(t=t.setIn(["extData","useDefaultIcon"],!1)),t.hasIn(["extData","ext_id"])||(t=t.setIn(["extData","ext_id"],g()())),t})));R=R.set(t,i),e.forEach(O),te(t),B=B.set(t,function(e,t){const n=[];t.forEach((t=>{const s=e.find((e=>e.getIn(["extData","ext_id"])===t));s&&n.push(s.id)})),e.forEach((e=>{n.includes(e.id)||n.unshift(e.id)}));const s=e.find((e=>e.active));return s&&(0,E.AL)(n,s.id),n}(R.get(t),n)),_e(t),j.emitChange()}function ae(e,t){const n=R.get(t).filter((t=>t.id!==e)).map(((e,t)=>e.set("index",t)));R=R.set(t,n);const s=B.get(t),i=s.indexOf(e);-1!==i&&(s.splice(i,1),(0,I.y)(s,t)),_e(t)}function oe(e,t,n){const s=R.get(t).find((t=>t.id===e));s&&(_e(t),function(e,t){const n=R.get(e.windowId).findIndex((t=>t.id===e.id));if(t===n&&e.index===t)return!1;const s=R.get(e.windowId).delete(n).splice(t,0,e).map(((e,t)=>e.set("index",t)));return R=R.set(e.windowId,s),!0}(s,n)&&j.emitChange())}function le(e,t){const n=R.get(t.oldWindowId).find((t=>t.id===e));if(n){if(function(e,t){const n={tabId:e,blockedPopups:D.Z.getBlockedPopupsById(e),fastForwardState:Z.Z.getStateById(e),navigationState:D.Z.getNavigationInfo(e),sslInfo:D.Z.getSSLInfo(e),urlbarState:u.Z.getUrlfieldStateFromId(e)};new Promise((e=>{h.Z.runtime.sendMessage({setNavigationState:n},(()=>{e()}))}))}(e,n.url),ae(e,t.oldWindowId),_e(n.windowId),n.active){const e=he(n,t.oldWindowId);e&&ue(e.id)}j.emitChange()}}async function ce(e,t=!1,n=0,i){H=H.delete(e),W=W.delete(e);let r=0;W.forEach((e=>{e.index<=n&&r++})),n-=r;const a=await h.Z.tabs.get(e);let o=s.ZP.tabToPage(a);i&&(o=o.setIn(["extData","group"],i),te(o.windowId));const l=R.get(o.windowId).splice(n,0,o).map(((e,t)=>e.set("index",t)));R=R.set(o.windowId,l),O(a),_e(o.windowId),j.emitChange()}function ue(e,t=window.vivaldiWindowId,n=!0){ie(t,e)&&(_e(t,n),h.Z.tabs.update(e,{active:!0},(()=>{h.Z.runtime.lastError})),(0,E.AL)(B.get(t),e),(0,I.y)(B.get(t),t),j.emitChange())}let me=(0,v.Map)(),de=null;function he(e,t){const n=o.ZP.get(T.kTabsActivationPreferRelated),s=o.ZP.get(T.kTabsActivationOnClose);let i;if(n){const n="left"!==s;if(i=function(e,t,n){let s;if(e.openerTabId){const i=()=>t.takeUntil((t=>t.id===e.id)).filter((t=>t.openerTabId===e.openerTabId)).reverse(),r=()=>t.slice(e.index+1).filter((t=>t.openerTabId===e.openerTabId));s=n?r().first()||i().first():i().first()||r().first(),s||(s=t.find((t=>t.id===e.openerTabId)))}return s||(s=t.skipUntil((t=>t.id===e.id)).skip(1).find((t=>t.openerTabId===e.id))),s}(e,R.get(t),n),i)return i}switch(s){case"left":const n=e.index-1;i=n<0?R.get(t).find((t=>t.id!==e.id)):R.get(t).get(n);break;case"right":i=R.get(t).get(e.index+1),i||(i=R.get(t).reverse().find((t=>t.id!==e.id)));break;case"activation_order":i=void 0;break;default:0,i=void 0}if(!i){const n=R.get(t),s=B.get(t).filter((t=>n.some((e=>e.id===t))&&t!==e.id)).pop();i=R.get(t).find((e=>e.id===s))}return i===e&&(i=null),i}function pe(e,t,n=!1){if(n&&j.isGroup((0,a.av)(t),t.windowId)){const n=j.getGroup((0,a.av)(t),t.windowId).map((e=>e.id));return e.union(n)}return e.add(t.id)}function ge(e,t,n=!1){return e.contains(t.id)?function(e,t,n=!1){if(n&&j.isGroup((0,a.av)(t),t.windowId)){const n=j.getGroup((0,a.av)(t),t.windowId).map((e=>e.id));return e.subtract(n)}return e.remove(t.id)}(e,t,n):pe(e,t,n)}function be(e,t){const n=e.toList().filter((e=>e!==t.id)).map((e=>{const t=j.getPageById(e);return t?t.index:-1}));if(!n.isEmpty()){const e=n.insert(0,t.index).toArray();h.Z.tabs.highlight({tabs:e,windowId:window.vivaldiWindowId})}}let Ne=null,fe=null;function _e(e,t=!0){const n=F,s=U;F=F.remove(e),Ne=fe=j.unsafeGetActivePage(e);if(o.ZP.get(T.kTabsSelectionIncludeActive)&&Ne){const n=pe((0,v.Set)(),fe,t);(0,v.is)(U.get(e),n)||(U=U.set(e,n))}else U=U.set(e,(0,v.Set)());return F!==n||U!==s}function ve(e){_e(e)&&j.emitChange()}function Ee(e,t,n=!0){const s=e.windowId,i=R.get(s);if(F.has(e.windowId)){const r=U.get(e.windowId).map((e=>{const t=i.find((t=>t.id===e));return t&&"number"==typeof t.index?t.index:-1})).filter((e=>e>-1)).sort(),a="next"===t,o=a?r.last():r.first(),l=a?o+1:o-1;if(fe&&Ne){const e=l<0||l>=i.size?i.get(o).id:i.get(l).id,t=U.get(s).size>1&&!(Ne.id<=fe.id&&fe.id<=e&&a||Ne.id>=fe.id&&fe.id>=e&&!a);if(!t&&(l<0||l>i.size))return;if(t){const e=i.get(a?r.first():r.last());e&&Ce(e,!1,n)}else{const e=i.get(l);e&&Ce(e,!1,n)}}}else{const r=j.isGroup((0,a.av)(e),s);if(r&&o.ZP.get(T.kTabsSelectionIncludeActive))Ce(e,!1,n);else if(r){const r=j.getGroup((0,a.av)(e),s).map((e=>e.id)),o="next"===t?r.last()+1:r.first()-1,l=i.find((e=>e.id===o));l&&Ce(l,!1,n)}else{const s="next"===t?e.index+1:e.index-1;if(s>=0&&s<i.size){const e=i.get(s);e&&Ce(e,!1,n)}}}}function Ce(e,t,n,s=!1){const i=e.windowId;F.has(i)||(s?(Ne=fe=j.unsafeGetActivePage(i),U=U.set(i,(0,v.Set)())):_e(e.windowId,n)),t?function(e,t){if(!Ne||!fe)return;const n=fe.index,s=Ne.index,i=e.windowId,r=R.get(i).filter((e=>e.index>=Math.min(s,n)&&e.index<=Math.max(s,n))).flatMap((e=>{const t=(0,a.av)(e);return j.isGroup(t,i)?j.getGroup(t,i):[e]})).map((e=>e.id)),l=e.index,c=!o.ZP.get(T.kTabsSelectionIncludeActive),u=R.get(i).filter((e=>e.index>=Math.min(s,l)&&e.index<=Math.max(s,l)&&!(c&&e.active))).flatMap((e=>{const n=(0,a.av)(e);return t&&j.isGroup(n,i)?j.getGroup(n,i):[e]})).map((e=>e.id)),m=U.get(i).subtract(r).union(u);U=U.set(i,m),fe=e,be(U.get(i),j.unsafeGetActivePage(i)),F=F.add(i),j.emitChange()}(e,n):function(e,t){fe=e,F.has(e.windowId)||(Ne=e);const n=U.get(e.windowId);if(!F.has(e.windowId)&&e.active){const s=pe(n,e,t);U=U.set(e.windowId,s)}else{const s=ge(n,e,t);U=U.set(e.windowId,s)}be(U.get(e.windowId),j.unsafeGetActivePage(e.windowId)),F=F.add(e.windowId),j.emitChange()}(e,n)}const we=function(){let e,t;return function(n,s,i=!1){if((0,b.Z)(s))e?(0,E.gc)(B.get(n),e):(e=B.get(n),t=e[e.length-1]),(0,E.JA)(e,!1===i),ue(e[e.length-1]),(0,k.Kz)(s,(()=>{const s=t,i=e&&e[e.length-1];if(s&&i){const e=B.get(n).filter((e=>e!==s&&e!==i));e.push(s),s!==i&&e.push(i),B=B.set(n,e)}(0,I.y)(B.get(n),n),e=t=null}));else{const e=B.get(n);(0,E.JA)(e,!1===i),(0,I.y)(e,n),ue(e[e.length-1])}}}(),ye=function(){let e,t;return function(n,s,i=!1){const r=j.getPages(n),a=r.findIndex((e=>e.active));e?(0,E.gc)(B.get(n),e):(e=B.get(n),t=r.getIn([a,"id"]));const o=((a+(i?-1:1))%r.size+r.size)%r.size,l=r.getIn([o,"id"]);l&&ue(l,n),(0,k.Kz)(s,(()=>{const s=t,i=r.getIn([o,"id"]);if(e&&s&&i){const t=e.filter((e=>e!==s&&e!==i));t.push(s),t.push(i),(0,E.gc)(B.get(n),t),B=B.set(n,t)}(0,I.y)(B.get(n),n),e=t=null}))}}();j.dispatchToken=m.Z.register((e=>{switch(e.actionType){case"PAGE_CLEAR":R=R.set(window.vivaldiWindowId,(0,v.List)()),B=B.set(window.vivaldiWindowId,[]),F=F.remove(window.vivaldiWindowId),U=U.set(window.vivaldiWindowId,(0,v.Set)()),V=(0,v.Map)();break;case"CHROME_TABS_INIT":m.Z.waitFor([u.Z.dispatchToken]),re(e.tabs,e.windowId,e.historystack);break;case"CHROME_TABS_CREATE":m.Z.waitFor([u.Z.dispatchToken]),function(e){const{page:t,tabActivationHistory:n,deactivatePageId:s}=e,i=t.windowId;if(!d.ZP.isPopup(i)&&i!==window.vivaldiWindowId)return;let r=R.get(i)?R.get(i):(0,v.List)();r=r.splice(t.index,0,t).map(((e,t)=>(e.id===s&&(e=e.set("active",!1)),e.set("index",t)))),R=R.set(i,r),B=B.set(t.windowId,n),_e(t.windowId),j.emitChange({type:"created",id:t.id})}(e);break;case"NAVIGATION_SET_STATE":{const{pageId:t,windowId:n,navigationState:s}=e;if("stop"!==s.trigger&&"abort"!==s.trigger)break;const i=R.get(n).findIndex((e=>e.id===t));if(-1===i)break;const{target:r}=R.get(n).get(i);if(!r)break;const a=R.get(n).setIn([i,"url"],r.committedUrl).setIn([i,"target"],void 0);R=R.set(n,a),j.emitChange();break}case"CHROME_TABS_REMOVED":{const{tabId:t,removeInfo:n}=e;!function(e,t){(d.ZP.isPopup(t)||t===window.vivaldiWindowId)&&(ae(e,t),j.emitChange({type:"removed",tabId:e}))}(t,n.windowId);break}case"CHROME_TABS_UPDATED":m.Z.waitFor([u.Z.dispatchToken]),function(e,t,n){const i=R;R=R.set(t,s.ZP.updatePage(R.get(t),e,n)),i!==R&&j.emitChange()}(e.tabId,e.windowId,e.changeInfo);break;case"CHROME_TABS_MOVED":{const{tabId:t,windowId:n,index:s}=e;oe(t,n,s);break}case"CHROME_TABS_ACTIVATED":{const{activeInfo:t}=e;!function(e){const t=ie(e.windowId,e.tabId),n=B.get(e.windowId),s=n[n.length-1];(t||s!==e.tabId)&&((0,E.AL)(n,e.tabId),B=B.set(e.windowId,n),(0,I.y)(B.get(e.windowId),e.windowId),_e(e.windowId),j.emitChange())}(t);break}case"CHROME_TABS_DETACHED":{const{tabId:t,detachInfo:n}=e;le(t,n);break}case"CHROME_TABS_ATTACHED":{const{tabId:t,attachInfo:n}=e;!async function(e,t){const n=H.get(e);if(t.discarded)await ce(e,!0,t.newPosition);else if(void 0!==n)n!==window.vivaldiWindowId&&await ce(e,!1,t.newPosition);else{const n=W.get(e)?.groupId||"";W=W.set(e,{windowId:t.newWindowId,index:t.newPosition,groupId:n})}}(t,n);break}case"PAGE_OPEN_URL":!function(e,t,n,s,i="",r=""){const o=R.get(t).findIndex((t=>t.id===e));if(-1===o)return!1;const l=new a.Vz({committedUrl:R.get(t).get(o).url,post:s,headers:i,transition:r}),c=R.get(t).setIn([o,"target"],l).setIn([o,"url"],n).setIn([o,"mimeType"],"text/html");R=R.set(t,c),j.emitChange()}(e.pageId,e.windowId,e.url,e.post,e.headers,e.transition);break;case"PAGE_OPEN":ue(e.pageId,e.windowId,e.selectGroup);break;case"PAGE_MINIMIZE":!function(e){me.get(e)&&(0,v.is)(de,B.get(e))||(me=me.set(e,B.get(e)));const t=me.get(e);(0,E.JA)(t,!0),ue(t[t.length-1]),me=me.set(e,t),de=B.get(e)}(e.windowId);break;case"PAGE_SET_IS_INSPECTED":n=e.pageId,i=e.windowId,r=e.inspected,se(n,i,"isInspected",r);break;case"PAGE_SET_IS_RESTORED":ne(e.extId,e.restored);break;case"PAGE_TABSTACK_CREATE":ve(e.pages.first().windowId);break;case"PAGE_SET_ORIGIN":!function(e,t,n){se(e,t,"originUrl",n)&&j.emitChange()}(e.pageId,e.windowId,e.url);break;case"PAGE_SET_TITLE":!function(e,t,n){se(e,t,"title",n)&&j.emitChange()}(e.pageId,e.windowId,e.title);break;case"PAGE_SET_IMAGE_INSPECTOR":!function(e,t,n){se(e,t,"showImageInspector",n)&&j.emitChange()}(e.pageId,e.windowId,e.showImageInspector);break;case"READERMODE":!function(e,t,n){se(e,t,"supportsReaderMode",n)&&j.emitChange()}(e.pageId,e.windowId,e.supportsReaderMode);break;case"VIVALDI_TABS_ATTACHED":t=e.tabId,e.fromWindowId,H=H.delete(t);break;case"VIVALDI_TABS_DETACHED":!async function(e,t){if(t===window.vivaldiWindowId&&void 0===W.get(e))return;const n=W.get(e);void 0!==n&&n.windowId===window.vivaldiWindowId?await ce(e,!1,n.index,n.groupId):H=H.set(e,t)}(e.tabId,e.toWindowId);break;case"VIVALDI_TABS_UPDATED":!function(e,t,n){const s=R;if(n.hasOwnProperty("mimeType")&&se(e,t,"mimeType",n.mimeType),n.hasOwnProperty("showImages")){let s;s=!0===n.loadFromCacheOnly?"cache":!0===n.showImages?"always":"never",se(e,t,"imageLoading",s)}s!==R&&j.emitChange()}(e.pageId,e.windowId,e.tabInfo);break;case"PAGE_SELECTION_SET":Ce(e.page,e.multiSelect,e.addGroup,e.excludeActive);break;case"PAGE_SELECTION_TOGGLE_RELATED":!function(e){if(F.has(e.windowId)||_e(e.windowId),fe=e,j.isGroup((0,a.av)(e),e.windowId)){const t=U.get(e.windowId);U=U.set(e.windowId,pe(t,e,!0))}else{const t=j.getTabs(e.windowId),[,n]=(0,w.d)(e,t);U=U.set(e.windowId,n.reduce(((e,t)=>e.add(t.id)),U.get(e.windowId))),F=F.add(e.windowId)}j.emitChange()}(e.page);break;case"PAGE_SELECTION_EXPAND_PREVIOUS":Ee(e.page,"previous");break;case"PAGE_SELECTION_EXPAND_NEXT":Ee(e.page,"next");break;case"PAGE_SELECTION_CLEAR":ve(e.windowId);break;case"PAGE_CYCLE_BY_HISTORY":we(e.windowId,e.maybeEvent,e.goBack);break;case"PAGE_CYCLE_BY_ORDER":ye(e.windowId,e.maybeEvent,e.goBack);break;case"PAGE_SET_ORIGINAL_CONTENT_TYPE":se(e.pageId,e.windowId,"originalContentType",e.contentType),j.emitChange()}var t,n,i,r}));const Se=j,{unsafeGetActivePage:Te,getLastVisited:ke}=j},97491:(e,t,n)=>{"use strict";n.d(t,{Ej:()=>g,Pv:()=>b,fG:()=>N,ZP:()=>G,JD:()=>K});var s=n(26729),i=n.n(s),r=n(6478),a=n(21622),o=n(27673),l=n(30801),c=n(18965),u=n(54471),m=n(93065),d=n(90808),h=n(3373),p=n(30074);const g=260,b=35,N=10,f=290,_="change",v=["downloads","tabs"],E=["chat"];let C,w,y=!1,S=!1,T=!1,k=0;const I={};let A=[],Z=[],P=[],D=[];const M=new Map;let O=null;const x=(0,d.Z)(m.Z,500);function L(){const e={};e.barVisible=S,e.selectedPanel=C,e.width=k,e.panelVisible=y,r.Z.set(p.kPanelsState,e),x(window.vivaldiWindowId,{SHOW_PANEL:e.barVisible,SELECTED_PANEL:e.selectedPanel,PANEL_WIDTH:e.width,SHOW_PANEL_CONTENT:e.panelVisible})}function R(e){return!!z.getPanelAvailable(e)&&!!("mail"!==e&&"contacts"!==e||z.getIsMailWindow())}function B(e){const t=c.Z.getIndexByShortcut(e);-1!==t&&void 0!==A&&t>=1&&A.length>=t&&(e=A[t-1].id),R(e)&&(S=!0,k=0===k?f:k,e===C?(y?(O&&O.focus(),w=!1):(O=document.activeElement,w=!0),y=!y):(e||(O=document.activeElement),C=e,y=!0,w=!0),L())}function F(e){!1===y?S?(C=void 0,S=!1):(S=!0,C&&B(C)):(O&&O.focus(),k=0===k?f:k,S=!S,y=!y),e&&L(),z.emitChange("")}function U(e,t,n){if(!u.ZP.getWindowState(e))return;const s=u.ZP.getWindowState(e),i=s&&(0,u.TF)(s),r=(0,u.TF)({...s,...t});i&&!r?z.getPanelButtonsVisible()!==T&&F(n):!i&&r&&(T=z.getPanelButtonsVisible(),T&&F(n))}function V(e){e?(S=!0,y=!0,C||(C=z.getDefaultPanel())):y=!1,L()}function H(){!1===y?(w=!0,V(!0),z.emitChange("")):z.emitChange("setFocus")}function W(e,t,n){if(e!==p.kPanelsWebItems||u.ZP.isGuestSession())e===p.kPanelsList&&(Z=(0,h.default)(t),P=(s=Z,u.ZP.isGuestSession()?s.filter((e=>"format"!==e.id)).filter((e=>v.includes(e.id))):s.filter((e=>"format"!==e.id)).filter((e=>!E.includes(e.id)))).map((e=>e.id)),!C||z.getIsWebPanel(C)||z.getPanelAvailable(C)&&z.canRenderInWindow(C)||(C=void 0,V(!1)));else{const e=A,s=z.getSelectedWebPanelIndex();if(A=t.map((e=>({activeUrl:e.activeUrl,available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:e.origin,resizable:e.resizable,title:e.title,url:e.url,width:e.width,floating:e.floating}))),D=A.map((e=>e.id)),M.clear(),D.forEach((e=>{M.set(e,!0)})),!n)if(A.length>e.length){if(u.ZP.isActive()){let t=A.length-1;for(let n=0;n<e.length;n++)if(e[n].id!==A[n].id){t=n;break}B(A[t].id)}}else if(A.length<e.length&&-1!==s){let e;if(z.getAvailablePanelCount()>0)-1===z.getSelectedWebPanelIndex()&&(e=s>=A.length?0===A.length?z.getLastAvailablePanel():A[A.length-1].id:A[s].id);else{const t=z.getSelectedWebPanelIndex();-1!==t&&(e=A[t].id)}void 0===e?(C=void 0,V(!1)):e!==C&&(y?B(e):C=e)}}var s}const z=new class extends(i()){getRegPanelOrder(){return P}getWebPanelOrder(){return D}canRenderInWindow(e){return!!z.getIsWebPanel(e)||(["mail","contacts","feeds"].includes(e)?z.getIsMailWindow()&&!a.ZP.get(p.kMailIsTurnedOff):"calendar"!==e||!a.ZP.get(p.kMailIsTurnedOff))}shouldShowPanel(e){return(!a.ZP.get(p.kMailIsTurnedOff)||!["mail","calendar","contacts","feeds"].includes(e))&&!E.includes(e)}isAvailable(e){const t=Z.find((t=>t.id===e));return void 0!==t&&t.available}canAutoOpen(e){const t=z.getSelectedPanel(),n=z.getPanelWidth();return!(e===t&&n>50)}getSeparateFloating(e){const t=[...A,...Z].find((t=>t.id===e));return void 0!==t?.floating?t.floating:void 0}getResizableByPanel(e){for(let t=0;t<Z.length;t++)if(Z[t].id===e)return Z[t].resizable;for(let t=0;t<A.length;t++)if(A[t].id===e)return A[t].resizable;return!1}getWidthByPanel(e){for(let t=0;t<Z.length;t++)if(Z[t].id===e)return Z[t].width;for(let t=0;t<A.length;t++)if(A[t].id===e)return A[t].width;return-1}getPanelAvailable(e){for(let t=0;t<Z.length;t++)if(Z[t].id===e)return!1!==Z[t].available;for(let t=0;t<A.length;t++)if(A[t].id===e)return!1!==A[t].available;return!1}getAvailablePanelCount(){let e=0;for(let t=0;t<Z.length;t++)!1!==Z[t].available&&e++;for(let t=0;t<A.length;t++)!1!==A[t].available&&e++;return e}getFirstAvailablePanel(){for(let e=0;e<Z.length;e++)if(!1!==Z[e].available){if(!0===Z[e].forMailOnly&&!this.getIsMailWindow())continue;return Z[e].id}for(let e=0;e<A.length;e++)if(!1!==A[e].available)return A[e].id}getLastAvailablePanel(){for(let e=A.length-1;e>=0;e--)if(!1!==A[e].available)return A[e].id;for(let e=Z.length-1;e>=0;e--)if(!1!==Z[e].available){if(!0===Z[e].forMailOnly&&!this.getIsMailWindow())continue;return Z[e].id}}getRegPanels(){return Z}getWebPanels(){return A}getIsWebPanel(e){return M.has(e)}getPanelButtonsVisible(){return S}getPanelContentVisible(){return y}getSelectedPanel(){return C}getIsPanelVisible(e){return y&&C===e}getIsWebPanelSelected(){return!!C&&z.getIsWebPanel(C)}getSelectedWebPanelIndex(){return this.getIsWebPanelSelected()?A.findIndex((e=>e.id===C)):-1}getFocusContent(){return w}getTransitionState(e){return I[e]}getPanelWidth(){const e=u.ZP.getVisibleUI(window.vivaldiWindowId).panelToggle;if(!0===e&&!1===S&&!1===y)return N;if(!0===e&&!0===S&&!1===y)return b+N;if(!0===S&&!1===y)return b;if(!0===S&&!0===y){let e=k;if(!0===z.getResizableByPanel(C)){const t=z.getWidthByPanel(C);t>0&&(e=t)}return e<=0?g:e}return 0}getDefaultPanel(){return"bookmarks"}getIsMailWindow(){return Boolean(window.isMailWindow)&&!u.ZP.isIncognitoOrGuest()}emitChange(e){this.emit(_,e)}addChangeListener(e){this.on(_,e)}removeChangeListener(e){this.removeListener(_,e)}};z.dispatchToken=o.Z.register((e=>{switch(e.actionType){case"PANEL_INIT":!function(e){e.isMail&&(window.isMailWindow=!0);const t=e.regPanelList.length>0?e.regPanelList:a.ZP.getDefault(p.kPanelsList);W(p.kPanelsList,t,!0),W(p.kPanelsWebItems,e.webPanelItems,!0),S=e.showButtons,y=e.showContent,k=e.width>=f?e.width:0,C=e.selectedPanel,R(C)||(C=z.getFirstAvailablePanel(),C||(y=!1))}(e.state),w=e.state.showContent,z.emitChange("");break;case l.Z.PANEL_SET_AVAILABLE:!function(e,t){if(z.getIsWebPanel(e)){const n=A.find((t=>t.id===e));n&&n.available!==t&&(n.available=t,r.Z.set(p.kPanelsWebItems,A),z.emitChange(""))}else{const n=Z.find((t=>t.id===e));n&&n.available!==t&&(n.available=t,r.Z.set(p.kPanelsList,Z),z.emitChange(""))}}(e.panel,e.available);break;case l.Z.PANEL_SET_CONTENT_VISIBLE:V(e.visible),z.emitChange("");break;case l.Z.PANEL_SET_FOCUS:H();break;case"PANEL_TOGGLE_CURRENT":!function(){const e=C||z.getFirstAvailablePanel();e&&(B(e),z.emitChange(""))}();break;case l.Z.PANEL_TOGGLE_FLOATING:r.Z.toggle(p.kPanelsAsOverlayEnabled,!0,!1);break;case l.Z.PANEL_SET_MAIL_WINDOW:window.isMailWindow=!0,z.emitChange("");break;case l.Z.PANEL_SET_RESIZABLE:!function(e,t){if(z.getIsWebPanel(e)){const n=A.find((t=>t.id===e));n&&n.resizable!==t&&(n.resizable=t,n.resizable||(n.width=-1),r.Z.set(p.kPanelsWebItems,A),z.emitChange(""))}else{const n=Z.find((t=>t.id===e));n&&n.resizable!==t&&(n.resizable=t,n.resizable||(n.width=-1),r.Z.set(p.kPanelsList,Z),z.emitChange(""))}}(e.panel,e.resizable);break;case l.Z.PANEL_SET_PANELS:W(e.key,e.value,null===e.oldValue),z.emitChange("");break;case l.Z.PANEL_SET_WIDTH:!function(e,t){if(z.getIsWebPanel(e)){const n=A.find((t=>t.id===e));n&&n.width!==t&&(n.width=t,r.Z.set(p.kPanelsWebItems,A))}else{const n=Z.find((t=>t.id===e));n&&n.width!==t&&(n.width=t,r.Z.set(p.kPanelsList,Z))}!0!==z.getResizableByPanel(e)&&(k=t),L()}(e.panel,e.width),z.emitChange("");break;case"PANEL_REMOVE_FOCUS":w=!1,z.emitChange("");break;case"PANEL_SHOW_NEXT":!function(e){if(!1!==y)if(C){const t=Z.map((e=>e.id)).filter((e=>z.getPanelAvailable(e)&&z.canRenderInWindow(e)&&z.shouldShowPanel(e)));if(A.filter((e=>e.available)).forEach((e=>t.push(e.id))),t.length<2)return;let n=t.indexOf(C);if(-1===n)return;n+="next"===e?1:-1,n=(n+t.length)%t.length,B(t[n]),z.emitChange("")}else void 0!==z.getFirstAvailablePanel()&&(B(z.getDefaultPanel()),z.emitChange(""));else H()}(e.direction);break;case"PANEL_SHOW_CONTENT":!function(e){const{setFocus:t,selectId:n}=e;let{panel:s}=e;const i=c.Z.getIndexByShortcut(s);if(-1!==i&&void 0!==A&&i>=1&&A.length>=i&&(s=A[i-1].id),y&&C===s&&z.getTransitionState(s)?.selectId===n)return;R(s)&&(S=!0,y=!0,k=0===k?f:k,C=s,w=t,I[s]={setFocus:t,selectId:n,reason:e.reason},L(),z.emitChange("display"))}(e);break;case l.Z.PANEL_TOGGLE_CONTENT:B(e.panel),z.emitChange("");break;case l.Z.PANEL_MOVE:!function(e,t,n){if(z.getIsWebPanel(e)){if(z.getIsWebPanel(t)){const s=D.findIndex((t=>t===e));let i=D.findIndex((e=>e===t));"below"===n&&i++,i>s&&i--,D=(0,h.default)(D),D.splice(i,0,D.splice(s,1)[0]);const a=[];D.forEach((e=>{const t=A.filter((t=>t.id===e))[0];a.push(t)})),A=a,r.Z.set(p.kPanelsWebItems,A)}}else if(!z.getIsWebPanel(t)){const s=P.findIndex((t=>t===e));let i=P.findIndex((e=>e===t));"below"===n&&i++,i>s&&i--,P=(0,h.default)(P),P.splice(i,0,P.splice(s,1)[0]);const a=[];a.push(Z[0]),P.forEach((e=>{const t=Z.filter((t=>t.id===e))[0];a.push(t)})),Z=a,r.Z.set(p.kPanelsList,Z)}}(e.from,e.to,e.position),z.emitChange("");break;case l.Z.PANEL_CLEAR_TRANSITION_STATE:t=e.panel,I[t]&&(delete I[t],z.emitChange(""));break;case"PANEL_TOGGLE_PANEL":F(!0);break;case"WINDOW_STATE_CHANGED":{const{state:t,windowId:n}=e,s=u.ZP.getWindowState(n)?.state;if("fullscreen"===s||"fullscreen"===t){U(n,{state:t},a.ZP.get(p.kStartupRememberFullScreen))}break}case l.Z.WINDOW_MINIMAL_UI:{const{minimalUI:t,windowId:n}=e;U(n,{minimalUI:t},!0);break}}var t}));const G=z,{getPanelWidth:K,getSelectedPanel:j}=z},37026:(e,t,n)=>{"use strict";n.d(t,{m:()=>p,Z:()=>g});var s=n(26729),i=n.n(s),r=n(60253),a=n(27673),o=n(18172);const l="change";let c,u=new Map;const m=new class extends(i()){getAlarmFromReloadId(e){return u.get(e)}existingAlarms(){return Boolean(u.size)}getPanelAlarms(e){return e.map((e=>this.getAlarmFromReloadId(e))).filter(Boolean)}emitChange(e){this.emit(l,e)}addChangeListener(e){this.on(l,e)}removeChangeListener(e){this.removeListener(l,e)}},d=e=>{u=(0,o.Uy)(u,(t=>{t.delete(e)}))},h=()=>c=setInterval((()=>{if(0===u.size)return clearInterval(c),c=void 0,void m.emitChange([]);const e=Date.now(),t=[];u.forEach(((n,s)=>{const{scheduledTime:i,periodInMinutes:a,id:o,from:l}=n,c=(i-e)/6e4/a;if(c<=0){const e={id:o,scheduledTime:p({periodInMinutes:a,scheduledTime:i}),periodInMinutes:a,from:l};t.push({type:"RELOAD",id:s}),r.Z.updateRunningAlarm(s,e)}else t.push({type:"TIME_CHANGED",remainingTime:c,id:s,from:l})})),m.emitChange(t)}),1e3);a.Z.register((e=>{switch(e.actionType){case"PERIODIC_RELOAD_ALL":n=e.alarms,u=(0,o.Uy)(u,(e=>{n.forEach(((t,n)=>{e.set(n,t)}))})),!c&&u.size&&h();break;case"PERIODIC_RELOAD_CREATE":t=e.alarm,u=(0,o.Uy)(u,(e=>{e.set(t.alarmId,t.alarm)})),c||h();break;case"PAGE_CLOSE":e.pages.forEach((e=>d(e.getIn(["extData","ext_id"]))));break;case"PERIODIC_RELOAD_DESTROY":d(e.alarmId);break;case"PERIODIC_RELOAD_UPDATE":u=(0,o.Uy)(u,(t=>{t.set(e.alarm.alarmId,e.alarm.alarm)}));break;case"PERIODIC_RELOAD_DESTROY_ALL":u=(0,o.Uy)(u,(e=>{e.clear()}))}var t,n}));const p=e=>{const{scheduledTime:t,periodInMinutes:n}=e;return t+60*n*1e3},g=m},82535:(e,t,n)=>{"use strict";n.d(t,{g:()=>d,Z:()=>M});var s=n(26729),i=n.n(s),r=n(27673),a=n(30801),o=n(79290),l=n(62830),c=n.n(l),u=n(92696),m=n(74686);const d="vivaldi/x-search-engine";let h,p,g,b,N,f,_,v,E,C=[],w=[],y=!1,S=p,T=!0;function k(e){v=parseInt(e.nextHistoryId);const t=v;isNaN(v)&&(v=1),h=e.version;const n=(0,u.Z)(e.engines).map((e=>A(e))),s=n.filter((e=>e.removed)),i=[];s.forEach((e=>{-1===i.findIndex((t=>t.id===e.id))&&i.push(e)}));const r=n.filter((e=>!e.removed));C=r.concat(i),w=r,p=w.find((t=>t.id===e.default)),g=w.find((t=>t.id===e.defaultPrivate)),b=w.find((t=>t.id===e.current)),N=w.find((t=>t.id===e.currentSD)),f=w.find((t=>t.id===e.currentPrivate)),_=w.find((t=>t.id===e.context)),y=e.defaultChanged,E=e.customOrder,v!==t&&P()}function I(e){return{id:e.id,historyId:e.historyId,name:e.name?e.name.trim():"",url:e.url?e.url.trim():"",suggestUrl:e.suggestUrl?e.suggestUrl.trim():"",faviconUrl:e.faviconUrl?e.faviconUrl.trim():"",keyword:e.keyword?e.keyword.trim().toLowerCase():"",post:Boolean(e.post),removed:Boolean(e.removed),custom:Boolean(e.custom)}}function A(e){const t=I(e);return t.historyId||(t.historyId=v++),t}function Z(e,t,n){switch(t){case"defaultPrivate":g=w.find((t=>t.id===e));break;case"current":b=w.find((t=>t.id===e));break;case"currentSD":N=w.find((t=>t.id===e));break;case"currentPrivate":f=w.find((t=>t.id===e));break;case"context":_=w.find((t=>t.id===e));break;default:const t=w.find((t=>t.id===e));void 0!==t&&(p=t,y=!0)}n&&P()}function P(){if(void 0!==h){const e={version:h,nextHistoryId:v,engines:C,default:p?p.id:void 0,defaultPrivate:g?g.id:void 0,current:b?b.id:void 0,currentSD:N?N.id:void 0,currentPrivate:f?f.id:void 0,context:_?_.id:void 0,defaultChanged:y,customOrder:E};o.Z.set({SEARCH_ENGINE_COLLECTION:e})}}const D=new class extends(i()){setPopupEngine(e){S=e,T=!1}getFirstLaunch(){return T}getCurrentPopupEngine(){return S}get(){return{list:w,defaultEngine:p}}getList(){return w}getDefault(e){return e&&g?g:p}getCurrent(e){return e&&f?f:b}getCurrentSD(e){return e&&g?g:N}getContext(){return _}isDefault(e,t){const n=D.getDefault(t);return n&&n.id===e}isTracker(e){const t=w.find((t=>t.id===e));return Boolean(t&&t.url.includes("google"))}getHasCustomOrder(){return!0===E}getByQuery(e){return D.getList().find((t=>e.toLowerCase().startsWith(t.keyword+" ")))}getByKeyword(e){const t=e.toLowerCase();return w.find((e=>e.keyword.length>0&&e.keyword===t))}getByHistoryId(e){return w.find((t=>t.historyId===e))}hasKeyword(e){return void 0!==D.getByKeyword(e)}getById(e){return w.find((t=>t.id===e))}getIndexById(e){return w.findIndex((t=>t.id===e))}getNewEngine(){return{id:c()(),name:"",keyword:"",url:"",custom:!0,post:!1,faviconUrl:"",suggestUrl:""}}emitChangeParam(e){this.emit(a.Z.CHANGED,e)}addChangeListener(e){this.on(a.Z.CHANGED,e)}removeChangeListener(e){this.removeListener(a.Z.CHANGED,e)}};r.Z.register((e=>{switch(e.actionType){case a.Z.SEARCH_ENGINES_INIT:k(e.collection);break;case a.Z.SEARCH_ENGINES_SET_COLLECTION:t=e.collection,n=e.writeToSettings,k(t),n&&P();break;case a.Z.SEARCH_ENGINES_ADD:!function(e,t){if(e.id){const n=A(e);-1===D.getIndexById(n.id)&&(C.push(n),w.push(n),t&&Z(n.id,"default",!1),P())}}(e.engine,e.makeDefault);break;case a.Z.SEARCH_ENGINES_REMOVE:!function(e){const t=C.findIndex((t=>t.id===e));if(-1!==t){const n=C.splice(t,1);if(n[0].removed=!0,C.push(n[0]),w=C.filter((e=>!e.removed)),p.id===e){const e=o.Z.getDefaultSearchEngines();p=D.getById(e.default),void 0===p&&(p=w[0]),y=!0}g&&g.id===e&&(g=p),b&&b.id===e&&(b=void 0),N&&N.id===e&&(N=void 0),f&&f.id===e&&(f=void 0),_&&_.id===e&&(_=void 0),P(),m.Z.historyPrivate.deleteAllSearchTermsForKeyword(n[0].historyId)}}(e.id);break;case a.Z.SEARCH_ENGINES_MODIFY:!function(e,t){const n=A(e);if(C.find((e=>e.id===n.id))){const e=o.Z.getDefaultSearchEngines().engines.find((e=>e.id===n.id)),s=e?I(e):void 0;void 0!==s&&(s.name===n.name&&s.url===n.url&&s.suggestUrl===n.suggestUrl&&s.keyword===n.keyword&&Boolean(s.post)===Boolean(n.post)?n.custom=!1:n.custom=!0);let i=C.findIndex((e=>e.id===n.id));C.splice(i,1,n),i=D.getIndexById(n.id),w.splice(i,1,n),t?Z(n.id,"default",!0):P()}}(e.engine,e.makeDefault);break;case a.Z.SEARCH_ENGINES_REORDER:!function(e,t){const n=C.filter((e=>!e.removed)),s=n.findIndex((t=>t.id===e));if(-1!==s&&t<n.length){const e=n.splice(s,1);n.splice(t,0,e[0]),C=n.concat(C.filter((e=>e.removed))),w=n,E=!0,P()}}(e.id,e.index);break;case a.Z.SEARCH_ENGINES_SET_DEFAULT:Z(e.id,e.type,e.writeToSettings);break;case a.Z.SEARCH_ENGINES_RESTORE:!function(e){const t={...o.Z.getDefaultSearchEngines()};if(t.engines=(0,u.Z)(t.engines),t.engines.forEach((e=>{e.post=Boolean(e.post),e.custom=!1,e.faviconUrl=e.faviconUrl?e.faviconUrl:"",e.suggestUrl=e.suggestUrl?e.suggestUrl:""})),t.customOrder=!1,e){const e=C.filter((e=>!e.removed&&e.custom));Array.prototype.push.apply(t.engines,e)}k(t),P()}(e.keepCustomSearches);break;default:return}var t,n;D.emitChangeParam(e)}));const M=D},25401:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=new Map},7997:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var s=n(65792),i=n.n(s),r=n(81502),a=(n(45447),n(91662)),o=n(21622),l=n(12595),c=n(31963),u=n.n(c),m=n(25342),d=n(14705),h=n(27673),p=n(54471),g=n(18172),b=n(99479),N=n(8575),f=n(44025),_=n(30074);const v=new Map,E=[],C=new Set;function w(e,t){return e.preferSystemAccent&&i().valid(o.ZP.get(_.kSystemAccentColor))&&(e.colorHighlightBg=o.ZP.get(_.kSystemAccentColor)),t?((0,g.ZP)(t,(n=>{Object.assign(t,d.Z.createStyle(e))})),t):d.Z.createStyle(e)}function y(e,t,n){const s=i().contrast(e,t)>n?50:0,r=e.get("lch.l")>5&&e.get("lch.l")<95?50:0;let a=e.get("lch.c")>10?50:0;return(e.get("lch.l")<20||e.get("lch.l")>75)&&(a=e.get("lch.c")>50?a:0),s+r+a}function S(e,t,n,s){const a=i()(n.colorFg),o=i()(n.colorBg),l=T(t,n,s),c={...r.ZP.accentOnly(l,a,o,n.contrast)};Object.keys(c).forEach((t=>{e[`--${t}`]=c[t].toString()}))}function T(e,t,n){let s;if(t.accentFromPage&&e){s=function(e,t){const n=t?.favIconUrl||"",s=t?.url||"";if(!t||C.has(s)||f.jk.isInternalPage(t)||n.startsWith("chrome://favicon/"))return i()(e.colorAccentBg);const r=e.accentSaturationLimit,a=new Map,o=E.find((e=>e.favIconUrl===n))||E.find((e=>s.includes(e.hostname))),l=v.get(t.id);l&&a.set(l,3),o?.colors.forEach(((e,t)=>{switch(t){case 0:a.set(e,2.25);break;case 1:a.set(e,1.5);break;case 2:a.set(e,1.25);break;default:a.set(e,1)}}));const c=[...a.keys()];a.size>2&&c[0].get("lch.c")<1&&c.forEach((e=>{e.get("lch.c")>1&&a.set(e,2)}));const u=i()(e.colorBg),m=[...a].sort(((t,n)=>y(n[0],u,e.contrast)*n[1]-y(t[0],u,e.contrast)*t[1]));return m.length>0&&r<1&&m[0][0].get("hsl.s")>r&&(m[0][0]=m[0][0].set("hsl.s",r)),m[0]&&m[0][0]||i()(e.colorAccentBg)}(t,n||a.ZP.getActivePage(e))}else s=i()(t.colorAccentBg);if(t.accentSaturationLimit<1){const e=s.get("hsl.s");s=s.set("hsl.s",e*t.accentSaturationLimit)}return s}class k extends(u()){getInitialState(){return{browserColor:i()("black"),windowClassNames:new Map,windowStyles:new Map,windowThemes:new Map}}reduce(e,t){if("THEME_INIT"===t.actionType)return(0,g.ZP)(e,(e=>{const{windowId:n}=t,s=m.Z.getCurrentId(n),i=d.Z.getThemeWithFallback(s),r=w(i);Object.assign(r,t.style),S(r,n,i),e.windowStyles.set(n,r),e.windowClassNames.set(n,d.Z.createClassnames(i,r)),e.windowThemes.set(n,i),p.ZP.isActive(n)&&(e.browserColor=T(n,i))}));if("THEME_WINDOW_CREATED"===t.actionType){const n=m.Z.getCurrentId(t.windowId),s=d.Z.getThemeWithFallback(n);return(0,g.ZP)(e,(e=>{const n=w(s);e.windowClassNames.set(t.windowId,d.Z.createClassnames(s,n)),e.windowStyles.set(t.windowId,n),e.windowThemes.set(t.windowId,s)}))}if("WINDOW_CLOSED"===t.actionType)return(0,g.ZP)(e,(e=>{e.windowClassNames.delete(t.windowId),e.windowStyles.delete(t.windowId),e.windowThemes.delete(t.windowId)}));if("THEME_SET"===t.actionType)return(0,g.ZP)(e,(e=>{e.windowStyles.forEach(((n,s)=>{if(!p.ZP.isIncognito(s)){const i=m.Z.getCurrentId(s),r=d.Z.getThemeWithFallback(i);Object.assign(n,t.style,w(r)),S(n,s,r),e.windowClassNames.set(s,d.Z.createClassnames(r,n)),e.windowThemes.set(s,r),p.ZP.isActive(s)&&(e.browserColor=T(s,r))}}))}));if("THEME_SET_PRIVATE"===t.actionType)return(0,g.ZP)(e,(e=>{e.windowStyles.forEach(((n,s)=>{if(p.ZP.isIncognito(s)){const i=m.Z.getCurrentId(s),r=d.Z.getThemeWithFallback(i);Object.assign(n,t.style,w(r)),S(n,s,r),e.windowClassNames.set(s,d.Z.createClassnames(r,n)),e.windowThemes.set(s,r),p.ZP.isActive(s)&&(e.browserColor=T(s,r))}}))}));if("PAGE_OPEN"===t.actionType||"PAGE_OPEN_URL"===t.actionType||"CHROME_TABS_ACTIVATED"===t.actionType){const n="CHROME_TABS_ACTIVATED"===t.actionType?t.activeInfo.windowId:t.windowId,s="CHROME_TABS_ACTIVATED"===t.actionType?t.activeInfo.tabId:t.pageId,i=a.ZP.getPageById(s);return(0,g.ZP)(e,(t=>{const s=e.windowThemes.get(n),r=t.windowStyles.get(n);r&&s&&i&&(S(r,n,s,i),t.browserColor=T(n,s,i),l.Z.setColor(t.browserColor))}))}if("THEME_SET_META"===t.actionType)return v.get(t.tabId)?.hex()!==t.color.hex()&&v.set(t.tabId,t.color),(0,g.ZP)(e,(t=>{t.windowStyles.forEach(((t,n)=>{const s=e.windowThemes.get(n);s&&S(t,n,s)}))}));if("THEME_SET_FAILED_FAVICON_URL"===t.actionType)return C.has(t.url)||C.add(t.url),(0,g.ZP)(e,(t=>{t.windowStyles.forEach(((t,n)=>{const s=e.windowThemes.get(n);s&&S(t,n,s)}))}));if("THEME_SET_PAGE_PALETTE"===t.actionType){const{windowId:n,favIconUrl:s,hostname:i,colors:r}=t;return E.push({favIconUrl:s,hostname:i,colors:r}),(0,g.ZP)(e,(t=>{const s=t.windowStyles.get(n),i=e.windowThemes.get(n);s&&i&&(S(s,n,i),t.browserColor=T(n,i))}))}if("CHROME_TABS_CREATE"===t.actionType||"CHROME_TABS_UPDATED"===t.actionType){const n="CHROME_TABS_CREATE"===t.actionType?t.page:a.ZP.getPageById(t.tabId),s=n?.windowId,i=n?.favIconUrl,r=n?.url,o=i&&!i.startsWith("chrome://favicon/")&&E.find((e=>e.favIconUrl===i));if(!(!n||!r||C.has(r)||f.jk.isInternalPage(n)||o)&&n&&r){const t=(0,N.parse)((0,b.Z)(r)).hostname;if(t&&s&&i){if(E.find((e=>e.hostname===t)))return m.Z.loadFavicon(n,t),(0,g.ZP)(e,(t=>{const n=t.windowStyles.get(s),i=e.windowThemes.get(s);n&&i&&(S(n,s,i),t.browserColor=T(s,i))}));m.Z.loadFavicon(n,t)}}}return e}}const I=new k(h.Z)},40061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(45447);var s=n(31963),i=n.n(s),r=n(27673),a=n(18172),o=n(43393);class l extends(i()){getInitialState(){return{pageState:new o.Map,serverLanguages:["en","ko","no","tr","zh-Hant","nl","sv","ur","fa","hu","is","ar","fi","id","ja","pt","uk","pl","ru","zh-Hans","cs","es","hi","de","fr","it"].sort()}}reduce(e,t){switch(t.actionType){case"VIVALDI_TABS_LANGUAGE_DETERMINED":return(0,a.ZP)(e,(e=>{const{tabId:n,pageLanguage:s}=t;e=function(e,t,n){const s=e.pageState.get(t);if(s)return s.pageLanguage=n,e.pageState=e.pageState.set(t,s),e;{const s={pageLanguage:n,translateStep:"idle"};return e.pageState=e.pageState.set(t,s),e}}(e,n,s)}));case"VIVALDI_TABS_PAGE_TRANSLATED":return(0,a.ZP)(e,(e=>{const{tabId:n}=t,{isTranslated:s,originalLang:i,translatedLang:r,error:a}=t.message;e=function(e,t,n,s,i,r){n&&"no_error"!==r&&(n=!1);let a=e.pageState.get(t);if(a)a={...a,originalLang:s,translatedLang:i,isTranslated:n,error:r},e.pageState=e.pageState.set(t,a);else{const a={originalLang:s,translatedLang:i,isTranslated:n,error:r,translateStep:"idle"};e.pageState=e.pageState.set(t,a)}return e}(e,n,s,i,r,a)}));case"PAGE_CLOSE":return(0,a.ZP)(e,(e=>{e=function(e,t){const n=e;return t.forEach((e=>{n.pageState.has(e.id)&&(n.pageState=n.pageState.remove(e.id))})),n}(e,t.pages)}));case"VIVALDI_SET_SERVER_LANGUAGES":return(0,a.ZP)(e,(e=>{e=function(e,t){return e.serverLanguages=t,e}(e,t.languages)}));case"PAGE_RESET_TRANSLATION_PARAMETERS":return(0,a.ZP)(e,(e=>{e=function(e,t){const n=e;n.pageState.has(t)&&(n.pageState=n.pageState.remove(t));return n}(e,t.tabId)}));case"VIVALDI_TABS_PAGE_TRANSLATED_REVERT":return(0,a.ZP)(e,(e=>{e=function(e,t){let n=e.pageState.get(t);if(n)n={...n,isTranslated:!1},e.pageState=e.pageState.set(t,n);else{const n={isTranslated:!1,translateStep:"idle"};e.pageState=e.pageState.set(t,n)}return e}(e,t.tabId)}));case"VIVALDI_TABS_TRANSLATION_PROGRESS":return(0,a.ZP)(e,(e=>{e=function(e,t,n,s,i){let r=e.pageState.get(t);if(r)r={...r,translateStep:n,error:s,autoTranslate:i},e.pageState=e.pageState.set(t,r);else{const r={isTranslated:!1,translateStep:n,error:s,autoTranslate:i};e.pageState=e.pageState.set(t,r)}return e}(e,t.tabId,t.translateStep,t.error,t.autoTranslate)}))}return e}isTranslated(e){const t=this.getState().pageState.get(e);return!!t&&Boolean(t.isTranslated)}getPageState(e){return this.getState().pageState.get(e)||{pageLanguage:"",translateStep:"idle"}}}const c=new l(r.Z)},88652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(26729),i=n.n(s),r=n(27673),a=n(5264),o=n.n(a);const l="change";let c=[];const u=new class extends(i()){getTrash(){return m(c)}emitChange(){this.emit(l)}addChangeListener(e){this.on(l,e)}removeChangeListener(e){this.removeListener(l,e)}},m=o()(1)((e=>e.filter((e=>!!e.tab||(e.window?"settings"!==(e.window.extData?JSON.parse(e.window.extData):{}).windowType:void 0)))));r.Z.register((e=>{if("CHROME_SET_SESSION"===e.actionType)t=e.session,c=t,u.emitChange();var t}));const d=u},35767:(e,t,n)=>{"use strict";n.d(t,{a:()=>T,Z:()=>k});var s=n(26729),i=n.n(s),r=n(91662),a=n(6478),o=n(21622),l=n(25342),c=n(14705),u=n(27673),m=n(2121),d=n(85958),h=n(74686),p=n(44025),g=n(30074);const b={};let N=!1,f=[],_=!1,v=!1;const E={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,selectionEnd:-1,selectionStart:-1},C=new class extends(i()){getUrlfieldStateFromId(e){return{...E,...b[e.toString()]}}showTypedHistory(){return N}getTypedHistory(){return f}isDownloadPopoutVisible(){return v}emitChange(e){this.emit("CHANGED",e)}addChangeListener(e){this.on("CHANGED",e)}removeChangeListener(e){this.removeListener("CHANGED",e)}__reset(){for(const e in b)delete b[e]}};function w(e,t){const n=(e||"").toString(),s=b[n];return(!s||!Object.keys(t).every((e=>t[e]===s[e])))&&(b[n]={...s,...t},!0)}function y(e){const t=e+"";b[t],b[t]={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,selectionEnd:0,selectionStart:0}}function S(){const e=r.ZP.unsafeGetActivePage(),t=o.ZP.get(g.kWebpagesReaderStyle);let n;switch(t.current){case"light":n="Vivaldi1";break;case"dark":n="Vivaldi2";break;default:n=l.Z.getCurrentId(e.windowId)}if(e.extData.get("readerMode")){const s=c.Z.getThemeWithFallback(n);m.Z.tabs.sendMessage(e.id,{readerStyle:{...t,...s}})}}function T(e,t){w(e,{isActive:t})}C.dispatchToken=u.Z.register((e=>{switch(e.actionType){case"URLFIELD_SET_STATE":w(e.pageId,e.state)&&C.emitChange();break;case"NAVIGATION_SET_STATE":if(!e.navigationState?.isLoading&&(_=!1,"abort"===e.navigationState.trigger)){const t=e.pageId+"";b[t]&&!b[t].editUrl&&y(t),C.emitChange()}break;case"CHROME_TABS_CREATE":{const{page:t}=e;_=!0,w(t.id,{isActive:(0,p.Rf)(t.url)});break}case"PAGE_RELOAD":y(r.ZP.unsafeGetActivePage().get("id")),C.emitChange();break;case"PAGE_OPEN":C.emitChange();break;case"PAGE_CLOSE":!function(e){for(const{id:t}of e.values())delete b[t+""]}(e.pages),C.emitChange();break;case"URLFIELD_TYPED_HISTORY_SHOW":N||(N=!0,C.emitChange());break;case"URLFIELD_HISTORY_DELETE":t=e.url,m.Z.history.deleteUrl({url:t},(()=>C.emitChange()));break;case"READERMODE_RESET":a.Z.reset(g.kWebpagesReaderStyle),S(),C.emitChange();break;case"READERMODE_SET_STYLE":S();break;case"URLFIELD_CLEAR_STATE":_||(y(e.pageId),C.emitChange());break;case"URLFIELD_TYPED_HISTORY_UPDATE":h.Z.historyPrivate.getTypedHistory("",-1,50,(e=>{f=(0,d.Z)(e),C.emitChange("URLFIELD_TYPED_HISTORY_UPDATE")}));break;case"URLFIELD_TYPED_HISTORY_HIDE":N&&(N=!1,C.emitChange());break;case"URLFIELD_COPY_STATE":w(e.pageId,e.state)&&C.emitChange();break;case"CHROME_TABS_INIT":e.tabs.forEach((({id:e,url:t=""})=>{void 0!==e&&(b[e.toString()]={autocompleteValue:void 0,editUrl:void 0,isActive:!o.ZP.get(g.kTabsFocusWebview)&&((0,p.Rf)(t)||""===t),isOmniDropdownOpen:!1,selectionEnd:-1,selectionStart:-1})})),C.emitChange();break;case"URLBAR_DOWNLOAD_POPOUT_TOGGLE":v=!v,C.emitChange()}var t}));const k=C},15770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(26729),i=n.n(s),r=(n(45447),n(27673)),a=n(30801);const o="change",l={},c={};let u="";const m=new class extends(i()){emitChangeParam(e){this.emit(o,e)}addChangeListener(e){this.on(o,e)}removeChangeListener(e){this.removeListener(o,e)}isFindInPageOpen(e){return!0===l[e]}getFindResultsForPage(e){let t=c[e];return void 0===t&&(t={activeMatchOrdinal:0,numberOfMatches:0,searchText:u,canceled:!1,matchCase:!1,isFindInPageToolbarOpen:!1,selectionRect:{left:0,top:0,width:0,height:0}}),t.isFindInPageToolbarOpen=!0===l[e]||!1,t}};r.Z.register((e=>{switch(e.actionType){case a.Z.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?l[e.pageId]=!0:"findNextInPage"===e.action||"findPreviousInPage"===e.action?!0!==l[e.pageId]&&(l[e.pageId]=!0,m.emitChangeParam({type:a.Z.WEBPAGEVIEW_ACTIONS,action:"findInPage",pageId:e.pageId})):"focusWebView"!==e.action&&"focusSearchField"!==e.action||m.emitChangeParam({type:"URLFIELD_BLUR"}),m.emitChangeParam({type:"WEBPAGEVIEW_ACTIONS",action:e.action,pageId:e.pageId,payload:e.payload});break;case"NAVIGATION_SET_STATE":if(e.navigationState&&"start"!==e.navigationState.trigger||!1===l[e.pageId])return;!0===l[e.pageId]&&(l[e.pageId]=!1,m.emitChangeParam({type:a.Z.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case a.Z.FIND_IN_PAGE_RESULT_ACTION:l[e.pageId]&&(c[e.pageId]=e,u=e.searchText,m.emitChangeParam({type:a.Z.FIND_IN_PAGE_RESULT_ACTION,pageId:e.pageId,...e.results}));break;case a.Z.SHOW_FIND_IN_PAGE_ACTION:l[e.pageId]?m.emitChangeParam({type:a.Z.FIND_IN_PAGE_FOCUS,pageId:e.pageId}):(l[e.pageId]=!0,m.emitChangeParam({type:a.Z.SHOW_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case a.Z.CLOSE_FIND_IN_PAGE_ACTION:l[e.pageId]&&(l[e.pageId]=!1,m.emitChangeParam({type:a.Z.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case a.Z.PAGE_GO:m.emitChangeParam({type:a.Z.PAGE_GO,index:e.index});break;case a.Z.PAGE_UPDATED:m.emitChangeParam({type:e.actionType,pageId:e.pageId});break;case a.Z.PAGE_RELOAD:m.emitChangeParam({type:a.Z.PAGE_RELOAD,pageId:e.pageId,bypassCache:e.bypassCache});break;case a.Z.PAGE_STOP:case a.Z.PAGE_BACK:case a.Z.PAGE_FORWARD:m.emitChangeParam({type:e.actionType});break;case a.Z.PAGE_GET_HISTORY:m.emitChangeParam({type:e.actionType,callback:e.callback});break;case a.Z.MAIN_SHOW_QUICKCOMMANDS:case a.Z.PANEL_SET_FOCUS:m.emitChangeParam({type:"URLFIELD_BLUR"})}}));const d=m},54471:(e,t,n)=>{"use strict";n.d(t,{TF:()=>p,WV:()=>_,ZP:()=>v});var s=n(91662),i=n(97491),r=n(21622),a=n(31963),o=n.n(a),l=n(27673),c=n(30801),u=n(93065),m=(n(43393),n(30074)),d=n(18172);const h=[];function p({state:e,minimalUI:t}){return!!t||"fullscreen"===e}function g(e,t,n){return(0,d.Uy)(e,(e=>{const s=e.get(t);s&&n(s)}))}class b extends(o()){getInitialState(){return new Map}_updateUIState(e,t){const n=this.isMinimalUI(e),s=p(t);n&&!s?t.visibleUI=this.getUIFromPrefs():!n&&s&&(t.visibleUI={bookmarksBar:!1,addressBar:!1,panelToggle:!1,tabs:!1,statusBar:"off"===r.ZP.get(m.kStatusBarDisplay)?"off":"overlay"})}reduce(e,t){switch(t.actionType){case"WINDOW_SET_STATE":return(0,d.Uy)(e,(e=>{const{windowId:n,windowState:s}=t;e.set(n,s)}));case"WINDOW_CLOSED":return(0,d.Uy)(e,(e=>{const{windowId:n}=t;e.delete(n)}));case c.Z.WINDOW_UPDATE_FROM_PREFS:{const{windowId:n}=t;return this.isMinimalUI(n)?e:g(e,n,(e=>{e.visibleUI=this.getUIFromPrefs()}))}case"WINDOW_ACTIVATED":return g(e,t.windowId,(e=>{e.active=t.activated}));case"WINDOW_STATE_CHANGED":return l.Z.waitFor([i.ZP.dispatchToken]),g(e,t.windowId,(e=>{const{windowId:n,state:s}=t;"fullscreen"===e.state&&"fullscreen"!==s&&(e.html5FullScreen=!1),e.state&&"fullscreen"!==e.state&&"fullscreen"===s&&(e.restoreStateFullscreen=e.state),e.state=s,this._updateUIState(n,e)}));case"WINDOW_FULL_SCREEN_MENU_BAR":return g(e,t.windowId,(e=>{e.fullscreenMenubarShown=t.shown}));case"WINDOW_HTML5_FULL_SCREEN":return g(e,t.windowId,(e=>{const{windowId:n,html5FullScreen:s}=t;s?(e.restoreStateHtml5Fullscreen=e.state?e.state:"normal",e.state="fullscreen"):e.state=e.restoreStateHtml5Fullscreen,e.html5FullScreen=s,this._updateUIState(n,e)}));case c.Z.WINDOW_MINIMAL_UI:return l.Z.waitFor([i.ZP.dispatchToken]),g(e,t.windowId,(e=>{e.minimalUI=t.minimalUI,this._updateUIState(t.windowId,e)}));case c.Z.WINDOW_TOGGLE_BOOKMARKS_BAR:return this.isMinimalUI(t.windowId)?g(e,t.windowId,(e=>{e.visibleUI.bookmarksBar=!e.visibleUI.bookmarksBar})):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case c.Z.WINDOW_TOGGLE_ADDRESS_BAR:return this.isMinimalUI(t.windowId)?g(e,t.windowId,(e=>{e.visibleUI.addressBar=!e.visibleUI.addressBar})):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case c.Z.WINDOW_TOGGLE_TABS:return this.isMinimalUI(t.windowId)?g(e,t.windowId,(e=>{e.visibleUI.tabs=!e.visibleUI.tabs})):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case c.Z.WINDOW_TOGGLE_PANEL_TOGGLE:return this.isMinimalUI(t.windowId)?g(e,t.windowId,(e=>{e.visibleUI.panelToggle=!e.visibleUI.panelToggle})):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case c.Z.WINDOW_TOGGLE_STATUS_BAR:return this.isMinimalUI(t.windowId)?g(e,t.windowId,(e=>{e.visibleUI.statusBar="on"===e.visibleUI.statusBar?"off":"on"})):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e)}return e}getWindowState(e){return this.getState().get(e)}getId(){let e=-1;for(const[t,n]of this.getState()){if(n.active)return t;e=t}return e}getActiveBrowserOrPopupWindowId(){const e=window.vivaldiWindowId;for(const[e,t]of this.getState())if(t.active&&"settings"!==t.type)return e;return e}getLastActiveBrowserWindowId(){return 0===h.length?-1:h[0]}shouldHandleWindow(e){const t=0!==s.ZP.getPages(e).size,n=this.isSettings(e);return t||n}isFullscreen(e){return"fullscreen"===this.getState().get(e)?.state}isHTML5Fullscreen(e){return this.getState().get(e)?.html5FullScreen||!1}isIncognito(e){return this.getState().get(e)?.incognito||!1}isMaximized(e){return"maximized"===this.getState().get(e)?.state}isMinimized(e){return"minimized"===this.getState().get(e)?.state}isActive(e=this.getId()){return this.getState().get(e)?.active||!1}isPopup(e=this.getId()){return"popup"===this.getState().get(e)?.type}isSettings(e=this.getId()){return"settings"===this.getState().get(e)?.type}isTabbedBrowser(e=this.getId()){return!this.isPopup(e)&&!this.isSettings(e)}isMinimalUI(e=this.getId()){const t=this.getState().get(e);return!!t&&p(t)}isGuestSession(e=this.getId()){const t=this.getState().get(e);return!t||t.guest}getVisibleUI(e=this.getId()){const t=this.getState().get(e);return t?t.visibleUI:this.getUIFromPrefs()}isIncognitoOrGuest(e=this.getId()){return this.isIncognito(e)||this.isGuestSession(e)}getRestoreStateFullscreen(e){const t=this.getState().get(e);if(!t)throw new Error("WindowStore.getRestoreStateFullscreen: Expected a valid windowId");return t.restoreStateFullscreen}getRestoreStateHtml5Fullscreen(e){const t=this.getState().get(e);if(!t)throw new Error("WindowStore.getRestoreStateHtml5Fullscreen: Expected a valid windowId");return t.restoreStateHtml5Fullscreen}getUIFromPrefs(){return{bookmarksBar:r.ZP.get(m.kBookmarksBarVisible),addressBar:r.ZP.get(m.kAddressBarVisible),panelToggle:r.ZP.get(m.kPanelsShowToggle),tabs:r.ZP.get(m.kTabsVisible),statusBar:r.ZP.get(m.kStatusBarDisplay)}}}const N=new b(l.Z),f={_oldState:N.getState(),updateLastActiveBrowserWindowStack(e){this.removeFromLastActiveBrowserWindowStack(e),N.isTabbedBrowser(e)&&h.unshift(e)},removeFromLastActiveBrowserWindowStack(e){const t=h.indexOf(e);-1!==t&&h.splice(t,1)},recordState(){const e=this._oldState,t=N.getState();this._oldState=t;for(const[n]of e)t.has(n)||this.removeFromLastActiveBrowserWindowStack(n);for(const[n,s]of t){const t=e.get(n);(s.active&&!t?.active||0===h.length)&&this.updateLastActiveBrowserWindowStack(n),s.html5FullScreen||t&&s!==t&&(p(t)===p(s)&&("fullscreen"===t.state&&"fullscreen"===s.state||"fullscreen"!==t.state&&"fullscreen"!==s.state)&&t.visibleUI===s.visibleUI||(0,u.Z)(n,{minimalUI:s.minimalUI,fullScreen:"fullscreen"===s.state,visibleUI:s.visibleUI}))}}};function _(e){return e.html5FullScreen?"fullscreen inner":"fullscreen"===e.state?"fullscreen":"maximized"===e.state?"maximized":"normal"}N.addListener(f.recordState.bind(f));const v=N},46268:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n(31963),i=n.n(s),r=n(27673),a=n(43184);class o extends(i()){constructor(){super(r.Z)}getInitialState(){return{zoom:a.rM,defaultPageZoom:a.rM,uiZoom:a.an,notesZoom:a.rM}}reduce(e,t){switch(t.actionType){case"ZOOM_PAGE":return{...e,zoom:t.zoomData};case"ZOOM_NOTES":return{...e,notesZoom:t.zoomData};case"ZOOM_SET_UI":return{...e,uiZoom:t.zoomData};case"ZOOM_PAGE_DEFAULT":return{...e,defaultPageZoom:t.zoomData}}return e}}const l=new o},60500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n(67776),i=n(5955),r=n(61858),a=n(49856),o=n(91662),l=n(92144),c=n(44025);const u={onAction:function(e){const t=function(e,t){i.Z.copy(t,[e])},n=function(e,t){i.Z.cut(t,[e])},s=function(e,t){i.Z.paste(t,e,!0)},l=r.ZP.getItemById(e.id);if(l){const c=void 0!==l.index?l.index+1:-1;switch(e.command){case"addactivetab":r.ZP.isFolder(l)?i.Z.bookmarkPageInFolder(o.ZP.unsafeGetActivePage(),l.id):i.Z.bookmarkPageInFolder(o.ZP.unsafeGetActivePage(),l.parentId||"",c);break;case"edit":a.Z.showBookmarkDialog({mode:e.command,id:e.id,index:-1});break;case"addfolder":case"addbookmark":a.Z.showBookmarkDialog({mode:e.command,id:e.id,index:c});break;case"addseparator":r.ZP.isFolder(l)?i.Z.createSeparator(e.id,l.children?l.children.length:0):l.parentId&&i.Z.createSeparator(l.parentId,c);break;case"cut":const u=n.bind(null,e.id);document.addEventListener("cut",u),document.execCommand("cut"),document.removeEventListener("cut",u);break;case"copy":const m=t.bind(null,e.id);document.addEventListener("copy",m),document.execCommand("copy"),document.removeEventListener("copy",m);break;case"paste":const d=s.bind(null,e.id);document.addEventListener("paste",d),document.execCommand("paste"),document.removeEventListener("paste",d)}}},onHover:function(e){l.Z.setStatus(c.jk.getHoverUrl(r.ZP.filterUrl(e)))},onOpen:function(e){const t=r.ZP.getItemById(e.id);if(t){const n=s.ZP.getOpenOptionsFromDisposition(e.disposition,e.background,s.ZP.makeEventFlagsFromApiResponse(e.state));n.bookmarks=s.ZP.getBookmarksByNode(t),s.ZP.open(n,!0)}}}},65914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(34155);const i=Array();const r={onCommand:function(e){s.nextTick((()=>{i.forEach((t=>{t.command===e&&t.callback(e)}))}))},hasListener:function(e){return i.filter((t=>t.command===e)).length>0},addListener:function(e,t){-1===i.findIndex((n=>n.command===e&&n.callback===t))&&i.push({command:e,callback:t})},removeListener:function(e,t){const n=i.findIndex((n=>n.command===e&&n.callback===t));-1!==n&&i.splice(n,1)}}},51508:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var s=n(75438),i=(n(45447),n(21622)),r=n(54471),a=n(15559),o=n(74686),l=n(30074);var c=["f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","f13","f14","f15","f16","f17","f18","f19"],u={delete:"del",option:"alt",command:"meta",return:"enter",escape:"esc",comma:",",period:".",del:"del",mod:"ctrl"},m=["left","right","shift+left","shift+right","shift+up","shift+down","enter","shift+enter"];m=m.concat(["ctrl+a","ctrl+z","ctrl+y","ctrl+u","ctrl+left","ctrl+right","ctrl+backspace","ctrl+delete","ctrl+home","ctrl+end","ctrl+shift+left","ctrl+shift+right","shift+home","shift+end"]);const d={};function h(e){var t=e.split("+");t=t.map((e=>u[e]||e));var n="";function s(e){t.indexOf(e)>-1&&(n+=e+"+",t.splice(t.indexOf(e),1))}return s("ctrl"),s("alt"),s("shift"),s("meta"),t.sort(),t.forEach(((e,s)=>{n+=e,s+1<t.length&&(n+="+")})),n.toLowerCase()}function p(e){return{ctrlKey:-1!==e.indexOf("ctrl"),altKey:-1!==e.indexOf("alt"),metaKey:-1!==e.indexOf("meta"),shiftKey:-1!==e.indexOf("shift"),key:e.split("+").pop()}}function g(e,t){t(e)}function b(e){return 1===e.length||e.startsWith("numpad")}function N(e){var t=p(e),n=e.split("+").pop();if(-1!==m.indexOf(e))return!1;if("esc"===n||"down"===n||"up"===n||"home"===n||"end"===n||"pagedown"===n||"pageup"===n)return!0;if(c.indexOf(n)>-1)return!0;if(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey){if("backspace"===n||"del"===n)return!0;if(t.ctrlKey||t.metaKey||t.altKey)return!0}return!1}const f=["INPUT","FRAME","IFRAME","SELECT","TEXTAREA"],_=["submit","button","reset","radio","checkbox"];let v=!1;const E=["f2","ctrl+f","ctrl+o","ctrl+p","ctrl+shift+d","ctrl+shift+m"],C=["chrome://game/","docs.google.com"];const w={bind:function(e,t,n,s,i,r){return[].concat(e).filter(Boolean).map((e=>e.trim())).forEach((e=>function(e,t,n,s,i,r){const a=h(e),o=d[a]||[];o.push({callback:s,onAutoRepeat:Boolean(t),isFeatureShortcut:Boolean(n),isEnabled:i||(()=>!0),feature:r||"browser"}),d[a]=o}(e,n,s,t,i,r))),this},unbind:function(e,t){return[].concat(e).forEach((e=>function(e,t){if(e){const n=h(e);d[n]&&(t?d[n]=d[n].filter((e=>e.callback!==t)):delete d[n])}}(e,t))),this},keyComboFromEvent:function(e){if(!(["Alt","Shift","Control","Meta","CapsLock","NumLock","AltGraph"].indexOf(e.key)>-1)&&"keydown"===e.type){const t=function(e){if(e.code.startsWith("Numpad")){var t=a.Z[e.keyCode].substr(6);if(t>="0"&&t<="9")return e.code}return a.Z[e.keyCode]}(e);if("None"===t)return"";{let n=function(e){var t="";return e.metaKey&&(t+="meta+"),e.altKey&&(t+="alt+"),e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),t}(e);return n+=t,h(n.toLowerCase())}}return""},shortcutAllowedInText:N,isSingleKeyShortcut:b,setDevToolsConflicts:function(e){v=e},handleShortcut:function(e,t,a,c){let u=t.toLowerCase().replace(" ","");u.endsWith("arrow")&&(u=u.substring(0,u.length-5)),u=h(u);const m=function(e,t){const n=d[e];if(n?.length)return n.reduce(((e,n)=>e||"browser"!==n.feature?n.feature===t?n:e:n),null)}(u,e?.windowId?s.Z.getContext(e.windowId).feature:"browser");if(m){if(!m.isEnabled())return;if(!0===a&&!1===m.onAutoRepeat)return;const t=p(u);!async function(e,t,a,c,u,m){const d=document.activeElement;if(b(t)){if(v)return;if(u){if(!i.ZP.get(l.kKeyboardShortcutsEnableSingleKeyForMail))return;if("browser"===s.Z.getContext(r.ZP.getActiveBrowserOrPopupWindowId()).feature)return}else if(!i.ZP.get(l.kKeyboardShortcutsEnableSingleKey))return;for(const e of C)if(m.includes(e))return}if(c&&!1===n(71905).Z.isCommandWhitelisted(t))return;if(!i.ZP.get(l.kKeyboardShortcutsEnable)){const e=(await n(71905).Z.getAllCommands()).find((e=>"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS"===e.name));if(!e)return;const s=n(71905).Z.getCommandConfiguration(e.name);if(!Array.isArray(s.shortcut)||!s.shortcut.some((e=>e===t)))return}if(v&&E.includes(t))return;const h=d?d.tagName:"",p=d instanceof HTMLInputElement?d.type:"",w=!!d&&d.isContentEditable;f.includes(h)&&!_.includes(p)||w?N(t)&&g(a,e):"WEBVIEW"===h?o.Z.windowPrivate.getFocusedElementInfo(r.ZP.getId()).then((({tagName:n,editable:s,role:i})=>{if(!s||N(t)){const s="SELECT"===n,r="SPAN"===n&&"spinbutton"===i;(!s&&!r||s&&N(t))&&g(a,e)}})):g(a,e)}(m.callback,u,t,c,m.isFeatureShortcut,e?.url||"")}}}},72450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(85909),i=n(40061),r=n(63057),a=n(74686),o=n(7509);let l=[],c=[];const u={canTranslateSelection:(e,t)=>Boolean(t.length>4&&t.length<2e3&&!(0,o.xl)(e)),getTranslationCode:e=>s.YI[e]||e,getTranslationLocales(){if(!l.length){const e=i.Z.getState().serverLanguages;c=s.lE.filter((e=>!s.u4.includes(e.key))).concat(s.sK).sort(((e,t)=>(e.value||e.local||e.key).localeCompare(t.value||t.local||t.key))),l=c.filter((t=>{const n=u.getTranslationCode(t.key);return e.includes(n)}))}return l},getFormattedName:e=>e.local!==e.value?e.value+" ("+e.local+")":e.value,invalidateTranslationLocales(){l=[]},getHumanReadableLanguageFromCode(e){c.length||u.getTranslationLocales();const t=c.find((t=>{const n=u.getTranslationCode(t.key);return t.key===e||n===e}));return t?t.value:(0,r.Z)("Unknown ($1)",[e])},async detectTextLanguage(e,t){let n=await a.Z.tabsPrivate.determineTextLanguage(e,t);return"und"===n&&(n=""),n}},m=u},40833:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>E,mr:()=>N,SI:()=>b});n(42786),n(31083),n(9808),n(68338),n(5822),n(24780),n(59740),n(60894),n(50837),n(22243),n(55655),n(5603),n(76959),n(11897),n(94470),n(5044),n(2101),n(30316),n(22138),n(11423),n(29218),n(90135),n(90626),n(39183),n(41270),n(33730),n(57010),n(64924),n(93901),n(83877),n(64495),n(89520),n(57971),n(96459),n(21793),n(64249),n(14985),n(51104),n(79915),n(98760),n(72397),n(67691),n(65666),n(83839),n(74152);var s=n(21622),i=n(63057),r=n(2121),a=n(30381),o=n.n(a);const l=new RegExp(/'.*?'/g),c=new RegExp(/\]?[^\]]*\[|\](.+)?$/g),u=e=>`[${e.replace(/'/g,"")}]`,m=e=>e.replace(/y/g,"Y").replace(/d/g,"D"),d=e=>e.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace("DDDD","dddd");var h=n(30074);const p={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},g=r.Z.i18n.getUILanguage().toLowerCase();function b(e){return String(e.year()).padStart(4,"0")+"-"+String(e.month()+1).padStart(2,"0")+"-"+String(e.date()).padStart(2,"0")}function N(e){return String(e.hour()).padStart(2,"0")+":"+String(e.minute()).padStart(2,"0")}function f(e){if("hy"===(e=e.toLowerCase()))return"hy-am";if("sr"===e)return"sr-cyrl";const t=o()().locale(e);return t.locale()===e||"-"===e[2]&&(e=e.substring(0,2),t.locale(e),t.locale()===e)?e:"en"}function _(e){const t=o()().locale(f(g));if(t.localeData)return"short"===e?t.localeData().weekdaysShort():t.localeData().weekdays();const n=new Date,s=new Date(n.setDate(n.getDate()-n.getDay())),i=[];let r=0;for(;r<7;)i.push(s.toLocaleString(g,{weekday:e})),s.setDate(s.getDate()+1),r++;return i}function v(e="long"){const t=o()().locale(f(g));if(t.localeData)return"short"===e?t.localeData().monthsShort():t.localeData().months();const n=[];let s=0;for(;s<12;){const t=new Date(2e3,s,1);n.push(t.toLocaleString(g,{month:e})),s++}return n}const E={getWeekdays:_,getMonths:v,getLocale:function(e){const t=f(g),n=o()().locale(t),i=s.ZP.get(h.kCalendarStartOfWeek),r=parseInt(s.ZP.get(h.kCalendarWeekNumberRule));if(e&&"language"!==s.ZP.get(h.kCalendarDateFormat)){const n=(e=(e=>{if(e.timeFormat=e.timeFormat.replace(/tt/,"A").replace(/t/,"A"),e.shortDateFormat.includes("'")?e.shortDateFormat=e.shortDateFormat.replace(l,u).replace(c,(e=>m(e))):e.shortDateFormat=m(e.shortDateFormat),e.longDateFormat.includes("'")){const t=e.longDateFormat.replace(l,u).replace(c,(e=>d(e)));e.longDateFormat=t+" "+e.timeFormat}else e.longDateFormat=d(e.longDateFormat)+" "+e.timeFormat;return e})(e)).timeFormat,s=n.replace(":ss",""),a=e.longDateFormat,o=a.replace(/.?dddd.?/,"").trim(),h=o.replace(/\s?(h+.m+.s+)\s?a?/gi,"").trim(),g=e.shortDateFormat.includes("DD")&&e.shortDateFormat.includes("MM")?e.shortDateFormat:e.shortDateFormat.replace(/M+/,"MM").replace(/D+/,"DD"),b="system"===i?e.firstDayOfWeek:p[i],N=7+b-r;return{name:t+"-viv",parentLocale:t,months:v("long"),monthsShort:v("short"),weekdays:_("long"),weekdaysShort:_("short"),week:{dow:b,doy:N},longDateFormat:{LT:s,LTS:n,L:g,LL:h,LLL:o,LLLL:a}}}{if(!n.localeData)return o().localeData();const e={name:t+"-viv",parentLocale:t,months:v("long"),monthsShort:v("short"),weekdays:_("long"),weekdaysShort:_("short"),week:n.localeData()._week,longDateFormat:n.localeData()._longDateFormat};return"system"!==i&&(e.week.dow=p[i]),e.week.doy=7+e.week.dow-r,e}},getWeekdayFormat:function(e="LL"){return(0,i.Z)("$1, $2",["dddd",e])},getShortDateFormat:function(){return o().localeData().longDateFormat("ll").replace("MMMM","MMM").replace(/([^MD]*)?Y+([^MD]*)?$/g,"").replace(/^Y+([^MD]*)?/,"").trim().replace(/(^,)|(,$)/g,"")},fixMomentLocale:f,formatYMD:b,formatTime:N}},91744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var s=n(71905),i=n(51508),r=n(21622),a=n(63057),o=n(2121),l=n(82189),c=n(30074);let u;function m(){return(0,a.Z)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefhiklmnorstuvwxz")}function d(){return void 0===u&&(u=["ja","zh-CN","zh-TW","ja","ko"].indexOf(o.Z.i18n.getUILanguage())>-1),u}function h(e){const t=e.indexOf("&");if(-1===t||" "===e[t+1])return-1===t?-1:-2;if("&"!==e[t+1])return t;let n=1;for(let s=t+1;s<e.length&&"&"===e[s];s++)n++;return n%2==0?-1:t}function p(e,t,n,s,i){let r=0;for(;-1!==r;){const i=t.charAt(r),a=i.toUpperCase();if(-1!==s.indexOf(i)&&-1===e.indexOf(a)&&(0!==r&&!0!==n||i===a))return r;r=t.indexOf(" ",r+1),-1!==r&&r++}for(let n=0;n<t.length;n++){const i=t.charAt(n);if(-1!==s.indexOf(i)&&-1===e.indexOf(i.toUpperCase()))return n}return i?-1:p("",t,n,s,!0)}function g(e){return Boolean(e.commandName)&&"browser"!==(e.feature||"browser")}function b(e){return"separator"===e.type}function N(e){return"folder"===e.type}function f(e){return{label:e,labelEnglish:e}}function _(){return(0,a.Z)("...")}const v={commandItem:{type:"command",label:"",labelEnglish:""},separatorItem:{type:"separator",label:"",labelEnglish:""},getShortcutSettings:function(){return{enabled:r.ZP.get(c.kKeyboardShortcutsEnable),singleKey:r.ZP.get(c.kKeyboardShortcutsEnableSingleKey),mailSingleKey:r.ZP.get(c.kKeyboardShortcutsEnableSingleKeyForMail)}},getShortcut:function(e,t){let n="";if(t.enabled&&e.shortcuts&&!1!==e.showshortcut)for(let s=0;s<e.shortcuts.length;s++){const r=e.shortcuts[s];if(i.Z.isSingleKeyShortcut(r))if(g(e)){if(!1===t.mailSingleKey)continue}else if(!1===t.singleKey)continue;if(0!==r.length){n=(0,l.G)(r);break}}return n},isFeatureCommand:g,isSeparator:b,makeLabelPair:f,getDisplayName:function(e){if(b(e))return"";let t=e.labelWithMnemonic||e.label||"";return e.emphasized&&(t=`• ${t}`),e.ellipsis?t+_():t},makeNumberMnemonic:function(e,t){const n=t<9&&!0;if(n){return{...f("&"+(t+1)+" "+e.replace(/\&/g,"&&")),mnemonic:n}}return{...f(e),mnemonic:n}},ellipsisString:_,getShortcutsForSubMenus:function(e){const t=Object.keys(s.Z.getCommandShortcuts()).filter((e=>e.includes("alt+")&&5===e.length)),n=m(),i=r.ZP.get(c.kKeyboardShortcutsAltOpensMenu),a=[],o=[];e.forEach((e=>{if(e.mnemonic&&e.label&&!b(e)){const t=e.label.indexOf("&");if(-1!==t&&t+1<e.label.length){const n=e.label.toUpperCase().charCodeAt(t+1);-1===a.indexOf(n)&&a.push(n)}}}));for(let s=0;s<e.length;s++){const r=e[s];if(!r.label||!N(r)||!1===i||!1===r.mnemonic){o.push({index:s});continue}const l=d()?r.labelEnglish:r.label;if(void 0===l){o.push({index:s});continue}if(a.length>0){const e=l.indexOf("&");if(-1!==e&&e+1<l.length){const n=l.toUpperCase().charCodeAt(e+1),i=String.fromCharCode(n).toLowerCase(),r="alt+"+i;t.includes(r)?o.push({index:s,key:i,offset:e}):(o.push({index:s,shortcut:r,key:i,offset:e}),t.push(r));continue}}let c=!1;for(let e=0;e+1<l.length&&!c;e++){const i=l.toUpperCase().charCodeAt(e);if(-1!==a.indexOf(i))continue;const r=String.fromCharCode(i).toLowerCase();if(-1===n.indexOf(r))continue;const u="alt+"+r;t.includes(u)||(o.push({index:s,shortcut:u,key:r,offset:e}),t.push(u),c=!0)}c||o.push({index:s})}return o},installMnemonics:function e(t,n){const s=m(),i=0===o.Z.i18n.getUILanguage().indexOf("en"),r=d();let a="";for(let e=0;e<t.length;e++){const s=t[e];if(s.label)if(b(s)||!1===s.mnemonic){if(!1===s.mnemonic){const e=h(s.label);(e>=0||-2===e)&&(s.labelWithMnemonic=s.label.replace(/\&/g,"&&"))}}else if(n.length>e){const t=r?s.labelEnglish:s.label;let i=n[e].offset;void 0!==i&&i+1<=s.label.length?("&"===s.label[i]?s.labelWithMnemonic=s.label:s.labelWithMnemonic=r?s.label+" (&"+t.charAt(i).toUpperCase()+")":s.label.slice(0,i)+"&"+s.label.slice(i),a+=s.label.charAt(i+1).toUpperCase()):(i=s.label.indexOf("&"),s.labelWithMnemonic=-1!==i?s.label:void 0)}else{const e=h(s.label);e>=0&&e+1<s.label.length?(s.labelWithMnemonic=s.label,a+=s.label.charAt(e+1).toUpperCase()):s.labelWithMnemonic=-2===e?s.label.replace(/\&/g,"&&"):void 0}}for(let n=0;n<t.length;n++){const o=t[n];if(!o.label)continue;const l=r?o.labelEnglish:o.label;if(void 0!==l&&!b(o)&&!1!==o.mnemonic&&void 0===o.labelWithMnemonic){const e=p(a,l,i,s,!1);e>=0&&(a+=l.charAt(e).toUpperCase(),o.labelWithMnemonic=r?o.label+" (&"+l.charAt(e).toUpperCase()+")":o.label.slice(0,e)+"&"+o.label.slice(e))}o.items&&e(o.items,[])}},getMenuBarString:function(e,t){if(!e.label)return{name:"",offset:-1};let n=d()?e.labelEnglish:e.label,s=void 0===t.offset?-1:t.offset;return d()&&(-1!==s?(n=e.label+" ("+n.charAt(s).toUpperCase()+")",s=n.length-2):n=e.label),{name:n,offset:s}}},E=v},47877:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(91662),i=n(21622),r=n(82535),a=n(32135),o=n(54471),l=n(74686),c=n(30074);const u={withPageSelection:async function(e,t){const n=s.ZP.unsafeGetActivePage(e).get("id"),i=await l.Z.utilities.getSelectedText(n),a=t?t.id:r.Z.getDefault(o.ZP.isIncognito(e)).id;await u.withTextAndEngine(i,a)},withTextAndEngine:async function(e,t){const n=r.Z.getById(t);if(e&&n){const t=i.ZP.get(c.kPageSearchInBackground);await a.Z.goSearchURL(e,{inCurrent:o.ZP.isPopup(),inBackground:t,useSearchEngine:n,addOpenerTabId:!0})}}},m=u},14705:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(65792),i=n.n(s),r=n(81502),a=n(84177),o=n(21622),l=n(5264),c=n.n(l),u=n(42151),m=n(65741),d=n(30074);const h=["center","top","right","bottom","left"];function p(e,t,n,s,i){let r;for(let a=0;a<e[t].length;a++){const o=e[t][a];if(n===o[0]&&s===o[1]&&i===o[2]){r=a;break}}void 0===r?e[t].push([n,s,i,1]):e[t][r][3]++}function g(e){return 60*e.hours+e.minutes}const b={getDefaultTheme:()=>(0,u.Z)(o.ZP.getDefault(d.kThemesSystem)[0]),getFallbackStyle:()=>b.createStyle(b.getDefaultTheme()),getTheme:e=>{const t=o.ZP.get(d.kThemesPreview),n=b.getSystemThemes(),s=o.ZP.get(d.kThemesUser),i=t.concat(n.concat(s));return(0,u.Z)(i.find((t=>t?.id===e)))},getThemeWithFallback:e=>e&&b.getTheme(e)||b.getDefaultTheme(),getPreview:()=>o.ZP.get(d.kThemesPreview)&&o.ZP.get(d.kThemesPreview)[0],getSystemThemes:()=>{const e=(0,u.Z)(o.ZP.get(d.kThemesSystem)),t=o.ZP.get(d.kThemesSystem);return e.forEach(((n,s)=>{const i=t.find((e=>e.id===n.id));i&&(e[s]=(0,u.Z)(i))})),e},getWindowControlColors:(e,t,n)=>{let s="";s=t.transparencyTabBar?"--colorImageTopFg":t.accentOnWindow&&n||!t.accentOnWindow&&!n?"--colorAccentFg":"--colorFg";const r=String(e[s]);if(i().valid(r)){return i()(r)}console.warn(`Unable to find style for ${r}`)},getWindowBackgroundColor:e=>{const t=String(e["--colorBg"]);if(i().valid(t)){return i()(t)}console.warn(`getWindowBackgroundColor: Unable to find style for ${t}`)},getImageVars:c()(12)((async(e,t)=>{const n={backgroundImage:"unset"};if(e)try{const s=await async function(e){const t=document.createElement("img"),n=new Promise(((e,n)=>{t.addEventListener("load",e,{once:!0}),t.addEventListener("error",n,{once:!0})}));return t.src=e,await n,t}(e),a=s.naturalHeight/window.devicePixelRatio,o=s.naturalWidth/window.devicePixelRatio,l=function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),s=16,r=[15,31,47,63,79,95,111,127,143,159,175,191,207,223,239,255],a={center:[],top:[],right:[],bottom:[],left:[]};t.width=s,t.height=s,n.imageSmoothingEnabled=!1,n.drawImage(e,0,0,s,s);const o=n.getImageData(0,0,s,s).data;for(let e=0;e<o.length/4;e++){const t=4*e,n=o[t],i=o[t+1],l=o[t+2],c=r.includes(e),u=e>240,m=!c&&e%s==0;p(a,!u&&e<s?"top":u?"bottom":c?"right":m?"left":"center",n,i,l)}return h.reduce(((e,t)=>{a[t].sort(((e,t)=>t[3]-e[3]));const n=a[t][0];return e[t]=i()(n[0],n[1],n[2]),e}),{})}(s);switch(Object.assign(n,function(e){return Object.entries(e).reduce(((e,[t,n])=>{const s=t[0].toUpperCase()+t.slice(1),a=n.luminance()>r.$J,o=i().mix(n,a?r.Cj:r.E5),l=a?r.E5:r.Cj;return e[`--colorImage${s}Fg`]=l.css(),e[`--colorImage${s}FgAlpha`]=l.alpha(.6).css(),e[`--colorImage${s}FgAlphaHeaviest`]=l.alpha(.05).css(),e[`--colorImage${s}Bg`]=o.css(),e[`--colorImage${s}BgAlpha`]=o.alpha(.6).css(),e[`--colorImage${s}BgAlphaHeavy`]=o.alpha(.3).css(),e}),{})}(l)),n.backgroundImage=`url("${e}")`,t){case"stretch":n.backgroundSize="cover";break;case"center":n.backgroundSize=`${o}px ${a}px`,n.backgroundRepeat="no-repeat";break;case"repeat":n.backgroundSize=`${o}px ${a}px`}}catch(t){console.error("Error loading background image",e)}return n})),createStyleRoot:e=>":root {"+Object.entries(e).filter((([e,t])=>e.startsWith("--"))).map((([e,t])=>`${e}:${String(t)}`)).join(";")+";}",getPalette:(e,t)=>{const n=document.createElement("canvas"),s=t||16,i=n.getContext("2d"),r=[],a=[];n.width=s,n.height=s,i.imageSmoothingEnabled=!1,i.drawImage(e,0,0,s,s);const o=i.getImageData(0,0,s,s).data;for(let e=0;e<o.length/4;e++){const t=4*e,n=o[t],s=o[t+1],i=o[t+2];let a;if(!(0===o[t+3]||n>240&&i>240&&s>240)){for(let e=0;e<r.length;e++)if(n===r[e][0]&&s===r[e][1]&&i===r[e][2]){a=e;break}void 0===a?r.push([n,s,i,1]):r[a][3]++}}r.sort(((e,t)=>t[3]-e[3]));for(let e=0;e<Math.min(10,r.length);e++)a.push([r[e][0],r[e][1],r[e][2]]);return a},getTimerByDate:(e,t)=>{const n=60*e.getHours()+e.getMinutes(),s=(0,u.Z)(o.ZP.get(d.kThemeScheduleTimeline)),i="next"===t?s.reduce(((e,t)=>[...e,t,{...t,hours:t.hours+24}]),[]).sort(((e,t)=>g(e)-g(t))).find((({hours:e,minutes:t})=>60*e+t>n)):s.reduce(((e,t)=>[...e,t,{...t,hours:t.hours-24}]),[]).sort(((e,t)=>g(t)-g(e))).find((({hours:e,minutes:t})=>60*e+t<=n));if(!i)throw new Error("ThemeUtilities: Error getting theme schedule.");return i},convertColorsToVariables:e=>{const t={};return Object.keys(e).forEach((n=>{t[`--${n}`]=e[n]})),t},createStyle:e=>{const t={...r.ZP.forTheme(e),...(0,a.ZP)(e.radius,e.simpleScrollbar)},n={};return e.transparencyTabBar?n["--colorTabBar"]="transparent":e.accentOnWindow?n["--colorTabBar"]="var(--colorAccentBg)":e.accentOnWindow||(n["--colorTabBar"]="var(--colorBg)"),Object.keys(t).forEach((e=>{n[`--${e}`]=t[e].toString()})),n},createSimpleStyle:e=>({"--foreground":e.colorFg,"--background":e.colorBg,"--highlight":e.colorHighlightBg,"--accent":e.colorAccentBg,"--radius":e.radius,"--backgroundColor":e.colorWindowBg,"--backgroundImage":e.backgroundImage?`url(${e.backgroundImage})`:"unset","--backgroundImageRepeat":"repeat"===e.backgroundPosition?"repeat":"unset","--backgroundImageStretch":"stretch"===e.backgroundPosition?"cover":"unset","--backgroundOpacity":e.alpha,"--backgroundBlur":e.blur?`blur(${e.blur}px)`:"unset","--transparencyTabBar":e.transparencyTabBar?"transparent":e.colorAccentBg}),isThemeDark:e=>{const t=e["--colorBg"];return void 0!==t?i()(t).luminance()<=r.$J:(console.warn("Unable to determine if theme is dark",{style:e}),!1)},isThemeHighlightDark:e=>{const t=e["--colorHighlightBg"];return void 0!==t?i()(t).luminance()<=r.$J:(console.warn("Unable to determine if theme highlight is dark",{style:e}),!0)},isThemeAccentDark:e=>{const t=e["--colorAccentBg"];return void 0!==t?i()(t).luminance()<=r.$J:(console.warn("Unable to determine if theme accent is dark",{style:e}),!0)},isSystemThemeModified:e=>{const t=o.ZP.getDefault(d.kThemesSystem).find((t=>t.id===e.id));return t||console.warn(e.id,"is not a valid system theme"),(0,m.default)(e,t)},createClassnames:(e,t)=>{const n=b.isThemeDark(t),s=b.isThemeHighlightDark(t),i=b.isThemeAccentDark(t);return{"theme-light":!n,"theme-dark":n,"hi-light":!s,"hi-dark":s,"acc-light":!i,"acc-dark":i,"color-behind-tabs-on":e.accentOnWindow,"color-behind-tabs-off":!e.accentOnWindow,"ui-transparent-tabs":e.transparencyTabs,"transparent-tabbar":e.transparencyTabBar,"bgimage-dark":"white"===t["--colorImageFg"],"bgimage-light":"black"===t["--colorImageFg"],"dim-blurred":e.dimBlurred,"simple-scrollbar":e.simpleScrollbar}}},N=b},51602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var s=n(74686),i=n(77398);const r=(e=2,t)=>(n,s)=>{if(e<=1)return 0;if(t&&(n=(0,i.default)(n,t),s=(0,i.default)(s,t)),!n&&!s)return 0;if(!n)return 2===e?1:-1;if(!s)return 2===e?-1:1;if("number"==typeof n&&"number"==typeof s)return 2===e?n-s:s-n;const r=n.toString().localeCompare(s.toString());return r>0?2===e?1:-1:r<0?2===e?-1:1:0},a={treeSort:function(e,t=r(),n="children"){const s=e=>{for(const t of e){const e=t[n];Array.isArray(e)&&s(e)}e.sort(t)};s(e)},getDefaultComparator:r,toMenuSorting:function(e,t){let n,i;if(e===a.ASCENDING_SORT?n=s.Z.menubarMenu.SortOrder.ASCENDING:e===a.DESCENDING_SORT&&(n=s.Z.menubarMenu.SortOrder.DESCENDING),void 0!==n)switch(t){case"title":i=s.Z.menubarMenu.SortField.TITLE;break;case"url":i=s.Z.menubarMenu.SortField.URL;break;case"nickname":i=s.Z.menubarMenu.SortField.NICKNAME;break;case"description":i=s.Z.menubarMenu.SortField.DESCRIPTION;break;case"dateadded":i=s.Z.menubarMenu.SortField.DATEADDED}return{order:n,field:i}},NO_SORTING:1,ASCENDING_SORT:2,DESCENDING_SORT:3},o=a},92342:(e,t,n)=>{"use strict";n.d(t,{Fe:()=>c,pg:()=>u,fs:()=>l});var s=n(88279),i=n(91662),r=n(74686),a=n(7509);const o=["ad_blocking","tracking"],l=(e,t,n,r)=>{const a={tracking:{process:!1,exempt:!1},ad_blocking:{process:!1,exempt:!1}};if(parseInt(t)!==r)switch(t){case"0":a.tracking.exempt=!0,a.ad_blocking.exempt=!0;break;case"1":a.tracking.process=!0,a.ad_blocking.exempt=!0;break;case"2":a.tracking.process=!0,a.ad_blocking.process=!0}Object.keys(a).forEach((t=>{a[t].process?m(e,t,"process_list"):d(e,t,"process_list"),a[t].exempt?m(e,t,"exempt_list"):d(e,t,"exempt_list")})),n&&s.Z.reloadPage(i.ZP.unsafeGetActivePage().get("id"))},c=(e,t)=>{if((0,a.xl)(e))return;const{hostname:n}=new URL(e);r.Z.contentBlocking.getAllExceptionLists((e=>{let s=0;o.forEach((t=>{e[t].process_list.find((e=>{n.includes(e)&&s++}))}));let i="0";switch(t){case"ad_blocking":i=0===s||1===s?"2":"0";break;case"tracking":i=2===s||0===s?"1":"0";break;default:return}l(n,i,!0)}))},u=(e,t)=>{r.Z.contentBlocking.getActiveExceptionsList(e,(n=>{t({["tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled"]:"exempt_list"===n})}))},m=(e,t,n)=>{r.Z.contentBlocking.addExceptionForDomain(t,n,e)},d=(e,t,n)=>{r.Z.contentBlocking.removeExceptionForDomain(t,n,e)}},43179:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var s=n(16910),i=n(66524),r=n(6478),a=n(21622),o=n(63057),l=n(74686),c=n(90808),u=n(30074),m=n(89555),d=n(65531);let h;const p=()=>new Promise(((e,t)=>{h?t("Capture in Progress"):h=(n,s)=>{n&&t("Capture Cancelled"),e(s)}})),g=(0,c.Z)(((e,t,n)=>{b.beginCaptureArea().then((e=>{b.handleCaptureLocation(t,e)})).catch(m.default),s.Z.disableCapture(),b.doCapture(e,n)}),25),b={captureFullpage:(e,t,n)=>{const s={encodeFormat:t,encodeQuality:85,fullPage:!0,height:3e4,saveToDisk:"file"===n,showFileInPath:"file"===n,copyToClipboard:"clipboard"===n,saveFilePattern:a.ZP.get(u.kWebpagesCaptureSaveFilePattern)};return new Promise((t=>{l.Z.thumbnails.captureTab(e,s,((e,n)=>{t({success:e,image:n})}))}))},captureAreaCommand:e=>(r.Z.set(u.kWebpagesCaptureSaveLocation,e),p()),beginCaptureArea:p,performCapture:g,doCapture:(e,t)=>{const{x:n,y:s,width:i,height:r}=t,o=a.ZP.get(u.kWebpagesCaptureSaveLocation),c=a.ZP.get(u.kWebpagesCaptureCompressionFormat),m=a.ZP.get(u.kWebpagesCaptureSaveFilePattern),d="note"===o,p="clipboard"===o;l.Z.thumbnails.captureUI({windowId:e,posX:n,posY:s,width:i,height:r,encodeFormat:c,encodeQuality:85,saveToDisk:!0!==d,showFileInPath:!0!==d,copyToClipboard:p,saveFilePattern:m},((e,t)=>{h(!e,t),h=void 0}))},handleCaptureLocation:async(e,t)=>{const n=a.ZP.get(u.kWebpagesCaptureSaveLocation);if("clipboard"===n){const t="area"===e?"Area":"Page";(0,d.c)({title:(0,o.Z)("$1 Captured",[t]),body:(0,o.Z)("Image Stored in the Clipboard")})}else"note"===n&&t&&await i.Z.createNoteFromCapture(t)},cancelCallback:()=>{s.Z.disableCapture(),h&&(h(!0),h=void 0)}},N=b},60933:(e,t,n)=>{"use strict";n.d(t,{Jq:()=>o,jD:()=>c,Ed:()=>u});var s=n(50590),i=n(53816),r=n(74686),a=n(25834);function o(e){const t=s.Z.getRaw();if(t){const e=s.Z.getActiveListEntry(),n=e?(0,a.BZ)(e.subject):"message";t.saveAs(n+".eml")}else i.Z.getActiveWebView()&&r.Z.utilities.savePage(e)}const l=["COMMAND_NEW_BACKGROUND_TAB_LINK","COMMAND_NEW_TAB_LINK"];function c(e){return l.includes(e)}function u(e){return false}},38064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var s=n(67776),i=n(60500),r=n(91744),a=n(55570),o=n(62077),l=n(72536),c=n(2121),u=n(26591),m=n(86635),d=n(68551),h=n(13253),p=n(89661),g=n(74686);let b={x:0,y:0,width:0,height:0},N="topLeft",f="none",_=null;const v=function(e,t,n,v="pointer",E,C=-1){const w=r.Z.getShortcutSettings();let y=0;const S=new Map,T=function(e){const t=S.get(e.id);if(e.id>=0&&t){const n=s.ZP.makeEventFlagsFromApiResponse(e.state);t.call(this,n)}},k=function(e){f="none",i.Z.onHover(""),g.Z.menubarMenu.onOpen.removeListener(I),g.Z.menubarMenu.onClose.removeListener(A),g.Z.menubarMenu.onHover.removeListener(i.Z.onHover),g.Z.menubarMenu.onAction.removeListener(T);const t=_;t&&(_=null,e||t())},I=function(){f="shown","function"==typeof n&&n(!0)},A=function(){"function"==typeof n&&n(!1),k(!1)},Z=function(e){return e.filter((e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible)).map((e=>{const t={};if(r.Z.isSeparator(e))t.separator={};else if("container"===e.type){if(e.container)switch(e.container.content){case"extensions":case"imageinprofile":case"linkinprofile":case"notes":case"pwa":case"linkinpwa":case"sendpagetodevices":case"sendlinktodevices":case"speech":case"spellcheck":case"spellcheckoptions":const n=y++;t.container={id:n,content:e.container.content,mode:e.container.mode||"folder",name:r.Z.getDisplayName(e)};break;default:console.warn("Unknown container content",e.container.content)}}else{const n=y++,s=r.Z.getDisplayName(e);let i,a;switch(e.handler&&(s||e.url)&&S.set(n,e.handler),e.commandName&&0===e.commandName.indexOf("DOCUMENT_")&&(i=e.commandName),(e.iconPNG||e.iconPNGWhite)&&(a=[e.iconPNG||"",e.iconPNGWhite||""]),e.type){case"checkbox":case"radio":t.item={id:n,action:i,name:s,type:e.type,radiogroup:e.radiogroup?e.radiogroup:-1,checked:!(!e.checked||e.statestrings)&&e.checked,shortcut:r.Z.getShortcut(e,w),showshortcut:e.showshortcut,url:e.url,enabled:e.enabled,icons:a};break;default:t.item={id:n,action:i,name:s,type:e.items?"folder":"command",shortcut:r.Z.getShortcut(e,w),showshortcut:e.showshortcut,url:e.url,enabled:e.enabled,icons:a},e.items&&(t.children=Z(e.items))}}return t}))},P=function(n){if("none"!==f)return void("shown"===f?_=P.bind(null,n):console.error("Attempt to show another context menu while one is initializing"));const s="function"==typeof t?t():t;0!==s.length&&(f="initializing",r.Z.installMnemonics(s,[]),g.Z.menubarMenu.onOpen.addListener(I),g.Z.menubarMenu.onClose.addListener(A),g.Z.menubarMenu.onHover.addListener(i.Z.onHover),g.Z.menubarMenu.onAction.addListener(T),g.Z.contextMenu.show({windowId:e,documentId:C,rect:b,origin:N,icons:[u.Z,m.Z,d.Z,h.Z,p.Z,o.Z,l.Z],children:Z(s)},(()=>{const e=c.Z.runtime.lastError;e&&(console.error(e.message),k(!0))})))};return function(e){e&&e?.nativeEvent?.path?.find((e=>"vivaldi-tooltip"===e.id))||a.Z.hideTooltip(),e&&(e.persist(),e.preventDefault(),e.stopPropagation());if(b={x:0,y:0,width:0,height:0},N=v,"pointer"===v)b.x=e?e.clientX:0,b.y=e?e.clientY:0;else{let t=E?E.getBoundingClientRect():null;!t&&e&&(t=e.nativeEvent.srcElement.getBoundingClientRect()),t&&(b.x=t.left+1,b.y=t.top,b.width=t.width,b.height=t.height)}P(e)}}},72182:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},14854:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,P:()=>o});var s=n(40153),i=n(26470),r=n.n(i);function a(e){return"win"===s.Z.call()?function(e){return 1===e.indexOf(":")&&e.match(/^[a-z]/gi)||0===e.indexOf("/")||0===e.indexOf("\\")}(e):function(e){return 0===e.indexOf("/")}(e)}function o(e){return"win"===s.Z.call()?function(e){let t=r().resolve(e).replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI(t)}(e):function(e){return encodeURI(r().resolve(e))}(e)}},8547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(63057);const i="Ð";function r(e,t,n){const r=Array.from(arguments);r[0]=i+r[0];let a=(0,s.Z)(...r);return a.startsWith(i)&&(a=a.substr(1)),{label:(0,s.Z)(...arguments),labelEnglish:a}}},88077:(e,t,n)=>{"use strict";n.d(t,{ZR:()=>l,Gx:()=>c,Nw:()=>f,o6:()=>w});var s=n(27856),i=n.n(s),r="https://240.0.0.0/?url=",a=/(url\("?)(?!data:)/gim;const o="lang",l="type",c="name";function u(e,t){for(var n=t.length-1;n>=0;n--){if(t[t[n]]){var s=t[t[n]].replace(a,"$1"+r);t[t[n]]=s}t[t[n]]&&e.push(t[n]+":"+t[t[n]]+";")}}function m(e,t){for(var n=t.length-1;n>=0;n--){var s=t[n];if(1===s.type&&s.selectorText)e.push(s.selectorText+"{"),s.style&&u(e,s.style),e.push("}");else if(s.type===s.MEDIA_RULE)e.push("@media "+s.media.mediaText+"{"),m(e,s.cssRules),e.push("}");else if(s.type===s.FONT_FACE_RULE)e.push("@font-face {"),s.style&&u(e,s.style),e.push("}");else if(s.type===s.KEYFRAMES_RULE){e.push("@keyframes "+s.name+"{");for(var i=s.cssRules.length-1;i>=0;i--){var r=s.cssRules[i];8===r.type&&r.keyText&&(e.push(r.keyText+"{"),r.style&&u(e,r.style),e.push("}"))}e.push("}")}}}const d=function(e,t){if("style"===t.tagName){var n=[];e.sheet&&m(n,e.sheet.cssRules),e.textContent=n.join("\n")}};var h=["action","background","poster","src"];let p=!1;const g=function(e){if(h.forEach((t=>{e.hasAttribute(t)&&!/^(data|blob):/i.test(e.getAttribute(t))&&(p=!0,e.removeAttribute(t))})),e.hasAttribute("style")){for(var t=e.style,n=[],s=t.length-1;s>=0;s--){if(e.style[t[s]]&&a.test(e.style[t[s]])){var i=e.style[t[s]].replace(a,"$1"+r);e.style[t[s]]=i}n.push(t[s]+":"+e.style[t[s]]+";")}n.length?e.setAttribute("style",n.join("")):e.removeAttribute("style")}},b=function(e){"target"in e&&e.setAttribute("target","_blank"),e.hasAttribute("target")||!e.hasAttribute("xlink:href")&&!e.hasAttribute("href")||e.setAttribute("xlink:show","new")},N=function(e,t){const n=e[t.src];if(n){const e=new Blob([n.content],{type:n.mimeType});t.setAttribute(o,t.src),t.setAttribute("src",URL.createObjectURL(e)),n.inUse=!0}};function f(e,t){const n=t&&t.attachments||{};let s=!0;t&&t.hasOwnProperty("blockHTTPLeaks")&&(s=t.blockHTTPLeaks),i().addHook("afterSanitizeAttributes",b),i().addHook("afterSanitizeAttributes",N.bind(void 0,n)),s&&(i().addHook("afterSanitizeAttributes",g),i().addHook("uponSanitizeElement",d)),p=!1;const r=i().sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allowfullscreen"],ALLOW_UNKNOWN_PROTOCOLS:!0,FORBID_TAGS:s?["svg"]:[],WHOLE_DOCUMENT:!0});return i().removeHooks("afterSanitizeAttributes"),i().removeHooks("uponSanitizeElement"),{sanitized:r,leakPrevented:p}}function _(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString()}let v=[],E=[];function C(e){if("string"==typeof e.src)if(e.src.startsWith("blob:")){const t=e.getAttribute(o);if(t)v.push(t),e.removeAttribute(o),e.setAttribute("src",t);else{const t=_();E.push({dataOrBlobUrl:e.src,cid:t,mimeType:e.getAttribute(l),filename:e.getAttribute(c)}),e.setAttribute("src","cid:"+t),e.removeAttribute(l),e.removeAttribute(c)}}else if(e.src.startsWith("data:image/")){const t=_(),n=e.src.match(/^data:([^,;]+)/)[1];E.push({dataOrBlobUrl:e.src,cid:t,mimeType:n,filename:""}),e.setAttribute("src","cid:"+t)}}function w(e){i().addHook("afterSanitizeAttributes",C);const t={blobFreeHTML:i().sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!0}),cidsInUse:v,newImages:E};return i().removeHooks("afterSanitizeAttributes"),v=[],E=[],t}},63057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(3943),i=n(2121);const r=new RegExp("([^a-z0-9])","g");function a(e,t){return"_"+t.charCodeAt(0)+"_"}function o(e){return 1!==e}const l=i.Z.i18n.getUILanguage().replace("-","_").replace("@","$"),c=l in s?s[l]:o,u=function(e,t){if(Array.isArray(t)){const n=t;return e.replace(/\$\d/g,(e=>{const t=parseInt(e.substr(1))-1;if(n.length>t)return n[t];throw new Error("Faulty string variables. Requested string "+(t+1)+" of "+n.length)}))}return e};const m=(e,t,n)=>"string"==typeof t?Array.isArray(n)&&"number"==typeof n[0]?function(e,t,n){const s=n[0];let o=c(s);!1===o?o=0:!0===o&&(o=1);const l=i.Z.i18n.getMessage(e.replace(r,a)+o,n);return""===l?u(1===s?e:t,n):l}(e,t,n):function(e,t){const n=i.Z.i18n.getMessage(e.replace(r,a)+"_4_"+t.replace(r,a)+"0");return""===n?t:n}(e,t):function(e,t){const n=i.Z.i18n.getMessage(e.replace(r,a)+"0",t);return""===n?u(e,t):n}(e,t)},31390:(e,t,n)=>{"use strict";n.d(t,{VV:()=>r,S2:()=>a,Mr:()=>o,Np:()=>l,mT:()=>c,Kz:()=>u});var s=n(45850),i=n(74686);function r(e){return!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)}function a(e){return e.altKey&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey}function o(e){return!e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey}function l(e){return!e.altKey&&!e.shiftKey&&e.ctrlKey&&!e.metaKey}function c(e){const{altKey:t,shiftKey:n,ctrlKey:s,metaKey:i}=e;return!t&&!n&&s&&!i}const u=(m=!1,function(e,t,n){n=n||null,(0,s.Z)(e)?!0!==m&&(m=!0,i.Z.tabsPrivate.onKeyboardChanged.addListener((function s(r,a,o,l){var c,u,d;!a&&(c=e.key,u=l,d={ctrlKey:[17],altKey:[18],metaKey:[91,93]},Object.keys(d).filter((e=>c)).filter((e=>-1!==d[e].indexOf(u))).some(Boolean))&&(m=!1,t.call(n),i.Z.tabsPrivate.onKeyboardChanged.removeListener(s))}))):t.call(n)});var m},15559:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Capslock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"None",60:"<",61:"=",63:"ß",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",92:"None",93:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"*",107:"+",108:",",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"Scrolllock",160:"^",161:"!",163:"#",164:"$",165:"None",166:"BrowserBack",167:"BrowserForward",169:")",170:"*",171:"+",173:"None",174:"None",175:"None",176:"Next",177:"Previous",178:"Stop",179:"None",180:"None",181:"None",182:"None",183:"None",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"None",193:"None",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"Meta",225:"AltGraph",226:"None",230:"None",233:"None",234:"None",255:"None"}},82189:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,G:()=>i});const s=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=(e=e.replace(/left/g,"←").replace(/right/g,"→").replace(/up/g,"↑").replace(/down/g,"↓")).replace(/(^|\+)(\w)/g,(e=>e.toUpperCase()))),e),i=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=e.replace(/(^|\+)(\w)/g,(e=>e.toUpperCase()))),e)},64271:e=>{let t=!0;const n=(e,t)=>{const n=e[t].level-1;for(let s=t-1;s>=0;s--)if(e[s].level===n)return s;return-1};e.exports=(e,s)=>{s&&(t=!0===s.enabled),e.block.ruler.after("list","todo",((e,t,n)=>{const s=((e,t)=>{const n=e.bMarks[t]+e.blkIndent,s=e.eMarks[t];return e.src.substr(n,s-n)})(e,t);return"list"===e.parentType&&("[ ]"===s.substring(0,3)||"[x]"===s.substring(0,3).toLowerCase())&&(e.tokens.push({type:"todo",content:s,block:!0,lines:[t],level:e.level}),e.line=t+1,!0)}),{}),e.renderer.rules.todo=(e,s,i)=>((e,s,i)=>{const r=e[s],a=e[s-1],o=e[n(e,s-1)];let l=r.content;if(a&&"list_item_open"===a.type&&o&&"bullet_list_open"===o.type){const e=1===l.toLowerCase().indexOf("x");return l=l.slice(3).trim(),'<input type="checkbox"'+(e?" checked":"")+(t?"":" disabled")+" />"+l}return l})(e,s);const i=e.renderer.rules.list_item_open;e.renderer.rules.list_item_open=(e,t,s,r)=>{const a=e[t+1],o=e[n(e,t)];return o&&"bullet_list_open"===o.type&&a&&"todo"===a.type?'<li class="todo">':i(e,t,s,r)}}},34258:(e,t,n)=>{"use strict";function s(e){e.preventDefault(),e.stopPropagation()}n.d(t,{Z:()=>s})},65531:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});function s(e){const t=new Notification(e.title,{body:e.body,icon:e.icon?e.icon:"/resources/icon_notifications.png",silent:Boolean(e.silent),requireInteraction:Boolean(e.requireInteraction)});t.onclick=()=>{e.onClick&&e.onClick(),t.close()},e.requireInteraction||setTimeout((()=>t.close()),e.timeout||5e3)}},85958:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(82535);function i(e){return e.map((({keywordId:e,terms:t,url:n,title:i})=>{let r;if(-1!==e){const n=s.Z.getByHistoryId(e);r=n?`${n.keyword} ${t}`:`? ${t}`}return{...r?{text:r}:null,url:n,title:i,type:"OMNI_RESULT_TYPED_HISTORY",id:n}}))}},7509:(e,t,n)=>{"use strict";n.d(t,{kO:()=>u,OI:()=>p,DP:()=>g,uu:()=>b,q9:()=>N,K2:()=>f,Ph:()=>v,Rz:()=>E,Zj:()=>C,Sc:()=>w,tn:()=>y,xl:()=>S,to:()=>T,Li:()=>k,Fn:()=>I,C3:()=>A,Iw:()=>Z,Qj:()=>P,HZ:()=>D,Ei:()=>M,Dy:()=>O});var s=n(5264),i=n.n(s),r=n(17673),a=n(8575),o=n(42954),l=n(14854);const c=["vivaldi:","chrome:","chrome-extension:"],u=["about:","data:","javascript:","view-source:"],m=[...c,...u,"file://","ftp://","http://","https://"],d=[...c,"ftp://","http://","https://"],h="http";function p(e){return Z(e).split("?")[0].split("#")[0]}function g(e){const t=e?e.split("?"):[];try{return t.length>1?r.parse(t[1]):{}}catch(e){return console.warn(e),{}}}function b(e,t,n){const s=Z(e.toLocaleLowerCase()),i=Z(t.toLocaleLowerCase());return n?s&&i&&p(s)===p(i):s&&i&&s===i}function N(e){if(!e.trim())return"";if((0,l.A)(e))return a.format({host:(0,l.P)(e),protocol:"file"});const t=a.parse(e);if(!t.protocol){const t=a.format({host:e,protocol:h});return a.parse(t).format()}if(!t.slashes&&!m.includes(t.protocol)){const t=a.format({host:e,protocol:h});return a.parse(t).format()}return t.format()}function f(e){const t=a.parse(e),n=parseInt(t.port);return!!(t.protocol&&t.host&&t.slashes&&(null===t.port||n>=0&&n<=65535))}const _=new RegExp(`^(//|${m.join("|")})`,"g");function v(e){return e.replace(_,"")}const E=N;function C(e){return e=e.toLowerCase(),!m.some((t=>e.startsWith(t)))}function w(e){return e=e.toLowerCase(),u.some((t=>e.startsWith(t)))}function y(e){return e=e.toLowerCase(),["file:","localhost:"].some((t=>e.startsWith(t)))}function S(e){const t=a.parse(e).protocol;return!!t&&c.some((e=>-1!==e.indexOf(t)))}const T=i()(100)(S);function k(e){return e.startsWith("/resources/")}function I(e){if(e.includes(o.oP)){const t=o.oP+"/browser.html#";e=e.includes(t)?e.substr(t.length-1,e.length):"http://"+e.substr(o.oP.length+1,e.length)}else e.match(/^[a-zA-Z]+:\/\//)||(e="http://"+e);return e}function A(e){if(0===e.length)return!1;const t=e.endsWith("."),n=/^localhost/.test(e),s=!e.includes(" ")&&e.indexOf(".")>0,i=!C(e)&&""!==v(e),r=N(e),a=d.find((e=>r.startsWith(e)))||"a^";if(RegExp(`(${a}).+:`).test(r)){const e=r.lastIndexOf(":")+1,t=parseInt(r.substring(e,r.length));return t>=0&&t<=65535}return!t&&(n||s||i)}function Z(e){return e.replace(/^\/+|\/+$/gm,"")}function P(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}function D(e){return x.test(e)}function M(e,t){return e.includes(".")?e:`${e}.${t}`}function O(e){return e.replace(/\s/g,"").replace(/^([a-z]+?:\/?\/?[^\/]*)\/*?(\/[\?#].*)?$/,"$1$2")}const x=/^(([^/<>()\[\]\.,;:\s@\"]+(\.[^/<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^/<>()[\]\.,;:\s@\"]{2,})$/i},87716:(e,t,n)=>{"use strict";n.d(t,{OK:()=>a,ZP:()=>l});var s=n(45447),i=n(43393),r=n(44025);function a(e){const t=e.id;if(void 0===t)throw new Error("Chrome.tabToPage: tab ID missing");const n=new s.ZP({id:t});return o(i.List.of(n),t,e).first()}function o(e,t,n){const s=e.findIndex((e=>e.id===t));if(-1===s)return e;for(const[t,o]of Object.entries(n))switch(t){case"extData":{if("string"!=typeof o)continue;const t=e.getIn([s,"extData"])||(0,i.Map)();let n;try{n=JSON.parse(o)}catch(e){n={}}e=e.setIn([s,"extData"],t.merge(n));break}case"active":e=e.setIn([s,"active"],o),o&&(e=e.setIn([s,"unread"],!1));break;case"pendingUrl":case"url":if("string"!=typeof o)continue;if("url"===t&&n.pendingUrl)continue;e=(e=(e=e.setIn([s,"isMailPage"],r.jk.isMailPage(o))).setIn([s,"url"],(a=o).startsWith("vivaldi://")?r.jk.getUrl(a):a)).setIn([s,"target"],void 0);break;case"favIconUrl":if("string"!=typeof o)continue;e=e.setIn([s,"favIconUrl"],o);break;case"index":case"windowId":case"openerTabId":case"pinned":case"audible":case"title":case"incognito":case"sessionId":case"discarded":e=e.setIn([s,t],o)}var a;return e}const l={tabToPage:a,updatePage:o}},45447:(e,t,n)=>{"use strict";n.d(t,{Vz:()=>i,av:()=>r,jA:()=>a,ZP:()=>l});var s=n(43393);class i extends((0,s.Record)({committedUrl:"",transition:"",post:void 0,headers:""})){}function r(e){return e.getIn(["extData","group"])||void 0}function a(e){return e.getIn(["extData","tiling","id"])||void 0}class o extends((0,s.Record)({id:0,index:-1,windowId:void 0,openerTabId:null,active:!1,pinned:!1,audible:"",discarded:!1,url:"",title:"",favIconUrl:"",incognito:"",sessionId:"",extData:(0,s.Map)(),target:void 0,favIcon:"",imageLoading:"always",showImageInspector:!1,mimeType:"text/html",originUrl:"",unread:!0,isInspected:!1,isMailPage:!1,supportsReaderMode:!1,originalContentType:""})){}const l=o},93065:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(2121);async function i(e,t){const n=await new Promise((t=>s.Z.windows.get(e,t))),i=n.extData&&JSON.parse(n.extData)||{},r=JSON.stringify({...i,...t});await new Promise((t=>{s.Z.windows.update(e,{extData:r},t)}))}},83910:(e,t,n)=>{"use strict";function s(e){return e.replace(/%25/g,"%2525").replace(/%(?![0-9a-fA-F]{2})/g,"%25").replace(/%09/g,"%2509").replace(/%26/g,"%2526").replace(/%2(f|F)/g,"%252$1").replace(/%0D%0A/g,"%250D%250A")}n.d(t,{Z:()=>s})},40153:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s={call:function(){return"win"}}},68337:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>g,ME:()=>f,gG:()=>N,Aq:()=>b,dO:()=>v,kG:()=>p,gC:()=>E});var s=n(21622),i=n(83910);const r=function(e){try{return decodeURI((0,i.Z)(e))}catch(t){return e}};var a=n(43724),o=n(74686),l=n(7509),c=n(8575),u=n(88778),m=n(42941),d=n(30074),h=n(44025);function p(){return{scheme:null,username:null,password:null,host:null,path:null,ref:null,query:null,port:null,tld:null}}function g(e){if(!e)return"";const t=(0,c.parse)(e);"view-source:"!==t.protocol&&("mailto:"!==t.protocol&&(t.auth=""),e=(0,c.format)(t));const n=s.ZP.get(d.kAddressBarShowFullUrl)?h.jk.getDisplayUrl(e):(0,l.Dy)(h.jk.getDisplayUrl(e));return r(n)}function b(e){const t=e.scheme&&!l.kO.includes(`${e.scheme}:`)&&"vivaldi"!==e.scheme,n=e.path&&"/"!==e.path||e.query||e.ref?e.path:"",s=null!==e.query?`?${e.query}`:"",i=null!==e.ref?`#${e.ref}`:"";return(e.scheme?`${e.scheme}:${t?"//":""}`:"")+(e.username?e.username:"")+(e.password?`:${e.password}`:"")+(e.username||e.password?"@":"")+(e.host?e.host:"")+(e.port?`:${e.port}`:"")+(n||"")+(s||"")+(i||"")}function N(e){const t=s.ZP.get(d.kAddressBarShowFullUrl),n=f(e,["tld","host","port","path",...t?["scheme"]:[],...t?["ref"]:[],...t?["query"]:[]]),i=n.path&&"/"!==n.path||n.query?n.path:"";return{...n,path:i}}function f(e,t){const n=t.includes("username"),s=t.includes("password"),i=t.includes("tld"),r=t.includes("host"),a=t.includes("port"),o=t.includes("path"),l=t.includes("scheme"),c=t.includes("ref"),u=t.includes("query");return{scheme:l?e.scheme:"",username:n?e.username:"",password:s?e.password:"",host:r?e.host:"",path:o?e.path:"",ref:c?e.ref:"",query:u?e.query:"",port:a?e.port:"",tld:i?e.tld:""}}function _(e){return void 0===e?null:e}function v(e){const t=h.jk.getDisplayUrl(e);if(!t)return{scheme:null,username:null,password:null,host:null,path:null,ref:null,query:null,port:null,tld:null};const n=o.Z.utilities.getUrlFragments(t);return{scheme:_(n.scheme),username:_(n.username),password:_(n.password),host:_(n.host),path:void 0===n.path?null:(0,a.Z)(n.path),ref:void 0===n.ref?null:(0,a.Z)(n.ref),query:_(n.query),port:_(n.port),tld:_(n.tld)}}function E(e,t){if(!t||!e)return null;const n=e.substring(0,e.length-t.length).split(".").filter(Boolean),s=(0,u.Z)(n).join(".");return{basedomain:(0,m.default)(n),subdomain:s,tld:t}}},3969:(e,t,n)=>{"use strict";n.d(t,{q:()=>a,d:()=>o});var s=n(99479),i=n(8575),r=n(44025);function a(e){if(r.jk.isInternalUrl(e.get("url"))){if(Object.keys(r.jk.internals).find((t=>e.get("url").startsWith(r.jk.internals[t]))))return r.jk.getDisplayTitle(e)}return i.parse((0,s.Z)(e.get("url"))).hostname||""}function o(e,t){const n=a(e);return[n,t.filter((e=>"tab"===e.type)).filter((e=>!e.getIn(["page","pinned"]))).filter((e=>a(e.get("page"))===n))]}},97748:(e,t,n)=>{"use strict";n.d(t,{k:()=>i,Z:()=>r});var s=n(54471);const i={openInBackgroundTab:{inCurrent:!1,inBackground:!0,inNewWindow:!1,allowOverride:!1,incognito:!1}};function r(e){const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},n=t.ctrl,i=!t.shift&&!n&&!t.alt,r={inCurrent:!0,inBackground:!1,inNewWindow:!1,allowOverride:!1,incognito:!1};return t.shift&&n&&t.alt?(r.inNewWindow=!0,r.incognito=!0):t.shift&&n&&!t.alt?(r.inNewWindow=!0,r.incognito=s.ZP.isIncognito(s.ZP.getId())):!t.shift||n||t.alt?t.shift||!n||t.alt?i&&1===e.button?(r.inCurrent=!1,r.inBackground=!0):i&&2===e.button?r.inCurrent=!1:i&&(r.allowOverride=!0):(r.inCurrent=!1,r.inBackground=!0):r.inCurrent=!1,r}},45850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=e=>Boolean(e&&["ctrlKey","altKey","metaKey","shiftKey"].some((t=>!0===e[t])))},92578:(e,t,n)=>{"use strict";n.d(t,{Qz:()=>r,gO:()=>a,ZN:()=>o,kG:()=>l,xz:()=>u});n(45447);var s=n(91662),i=n(43393);function r(e){const t=s.ZP.getPageById(e);return!!t&&a(t)}function a(e){const t=e.getIn(["extData","tiling","id"]);if(!t)return!1;if(s.ZP.getPages(e.windowId).filter((e=>e.getIn(["extData","tiling","id"])===t)).count()<2)return!1;const n=s.ZP.unsafeGetActivePage(e.windowId).getIn(["extData","tiling","id"]);return t&&n&&t===n}function o(e){if(e.active)return!0;const t=c(e);return!!t&&t.some((e=>e.active))}function l(e){if(!s.ZP.getPages(e))return(0,i.List)();const t=s.ZP.unsafeGetActivePage(e);return t?c(t)||i.List.of(t):(0,i.List)()}function c(e){return a(e)?s.ZP.getTiles(e.getIn(["extData","tiling","id"]),e.windowId):null}function u(e){return!!e&&s.ZP.isGroup(e.getIn(["extData","group"]),e.windowId)}},39023:(e,t,n)=>{"use strict";n.d(t,{g:()=>o,c:()=>l});var s=n(91662),i=n(8547),r=n(74686);const a=[(0,i.Z)("Transitions Forced"),(0,i.Z)("Filter Obscure"),(0,i.Z)("Filter Grayscale"),(0,i.Z)("Filter Black and White"),(0,i.Z)("Fonts Monospace"),(0,i.Z)("Transform 3D"),(0,i.Z)("Highlight Hover"),(0,i.Z)("CSS Debugger"),(0,i.Z)("Filter Sepia"),(0,i.Z)("Filter Intensify"),(0,i.Z)("Skewed Images"),(0,i.Z)("Highlight Focus"),(0,i.Z)("Transitions Removed"),(0,i.Z)("Filter Invert"),(0,i.Z)("Inline Access Keys"),(0,i.Z)("Page Minimap")];function o(e){const t=e.lastIndexOf("\\"),n=-1===t?e:e.substr(t+1),s=n.lastIndexOf("."),i=n.substr(0,s).replace(/_/g," "),r=a.findIndex((e=>e.labelEnglish===i));return-1===r?i:a[r].label}const l=async()=>{const e=await r.Z.pageActions.getScripts();return await e.map((e=>function(e){const t=o(e),n=`COMMAND_${t}`.toUpperCase().replace(/\s+/,"_");return{name:n,action:()=>async function(e){const t=s.ZP.unsafeGetActivePage().get("id"),n=await r.Z.pageActions.getScriptOverridesForTab(t),i="enabled"===n.find((t=>t.script===e))?.override?"no_override":"enabled";await r.Z.pageActions.setScriptOverrideForTab(e,t,i)}(e),guid:n,showInQC:!1,isEnabled:()=>!0,category:"CATEGORY_COMMAND_TAB_ACTION",...(0,i.Z)(t)}}(e)))}},43724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(83910);const i=function(e){if(!e)return"";try{return decodeURIComponent((0,s.Z)(e))}catch(t){return e}}},99479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(40015),i=n.n(s);const r=function(e,t){try{return i()(e,t)}catch(t){return e}}},24604:(e,t,n)=>{"use strict";function s(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1),e.push(t)}function i(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1),e.unshift(t)}function r(e,t=!1){if(!0===t){const t=e.pop();e.unshift(t)}else{const t=e.shift();e.push(t)}}function a(e,t){for(let n=0;n<t.length;)e.includes(t[n])?n++:t.splice(n,1);e.forEach((e=>{t.includes(e)||t.push(e)}))}n.d(t,{AL:()=>s,EQ:()=>i,JA:()=>r,gc:()=>a})},34770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(63057);function i(e){return Array.isArray(e)?(Array.isArray(e[1])&&(e[1]=e[1].map((e=>i(e)))),(0,s.Z)(...e)):e}},42225:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21">\n  <path fill-rule="evenodd" d="M14.6 3c-1.4-.6-3.3-1-5.6-1s-4.2.4-5.6 1l-1.2.8L2 4l7-2-7 2 .2.2 1.2.8c1.4.6 3.3 1 5.6 1s4.2-.4 5.6-1l1.2-.8.2-.2-.2-.2-1.2-.8zM9 0C4 0 0 1.8 0 4v13c0 2.2 4 4 9 4s9-1.8 9-4V4c0-2.2-4-4-9-4zM2 13.3v-2.8c1.6 1 4.2 1.5 7 1.5s5.3-.6 7-1.5v2.8l-1 .6c-1.5.7-3.6 1.1-6 1.1s-4.5-.4-6-1l-1-.7zM15 10l1-.6V6.5C14.3 7.5 11.8 8 9 8s-5.4-.6-7-1.5v2.8l1 .6c1.5.7 3.6 1.1 6 1.1s4.5-.4 6-1zM2 14.5c1.6 1 4.2 1.5 7 1.5s5.3-.6 7-1.5V17l-.2.2-1.2.8c-1.4.6-3.3 1-5.6 1s-4.2-.4-5.6-1l-1.2-.8A.8.8 0 012 17v-2.5zM16 4zm0 13zM2 17zM2 4zm2 4.5a.5.5 0 11-1 0 .5.5 0 011 0zm0 4a.5.5 0 11-1 0 .5.5 0 011 0zm0 4a.5.5 0 11-1 0 .5.5 0 011 0z"/>\n</svg>\n'},50227:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 2c1.72 0 3.2.3 4.15.73.23.1.41.2.55.28-.14.08-.31.18-.54.27C11.2 3.7 9.73 4 8 4s-3.2-.3-4.16-.72c-.23-.1-.4-.19-.54-.27.14-.09.32-.18.55-.28C4.8 2.3 6.28 2 8 2zm7 1.02V3c0-1.66-3.13-3-7-3S1 1.34 1 3v9.95C1 14.64 4.13 16 8 16s7-1.36 7-3.05V3.02zm-2 6.91v-1.9c-1.27.57-3.04.92-5 .92s-3.73-.35-5-.92v1.9l.37.18c1.14.5 2.78.83 4.63.83a12.02 12.02 0 005-1zm-10 .85c1.27.57 3.04.92 5 .92s3.73-.35 5-.92v1.98a2.9 2.9 0 01-.85.51C11.2 13.7 9.72 14 8 14c-1.72 0-3.2-.3-4.15-.73a2.9 2.9 0 01-.85-.5v-1.99zm9.63-3.42a6 6 0 00.37-.18V5.1c-1.27.56-3.04.9-5 .9a12.9 12.9 0 01-5-.9v2.08l.37.18c1.14.5 2.78.83 4.63.83s3.49-.33 4.63-.83z"/>\n</svg>\n'},29047:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 1c1.55 0 2.9.28 3.84.7.46.2.78.42.96.62.1.1.15.19.18.25a.79.79 0 01-.15.2c-.19.17-.5.38-.97.57-.94.4-2.3.66-3.86.66s-2.92-.26-3.86-.66a3.1 3.1 0 01-.97-.58.78.78 0 01-.15-.2.8.8 0 01.18-.24c.18-.2.5-.42.96-.63C5.1 1.3 6.45 1 8 1zm6 1.58V2.5C14 1.12 11.31 0 8 0S2 1.12 2 2.5v8.83C2 12.81 4.69 14 8 14s6-1.2 6-2.67V2.67v-.09zm-1 3.38V3.88C11.93 4.56 10.09 5 8 5s-3.93-.44-5-1.12v2.08c.23.22.57.45 1.03.65.98.44 2.38.72 3.97.72 1.59 0 2.99-.28 3.97-.72.46-.2.8-.43 1.03-.65zM3 6.8C4.07 7.53 5.91 8 8 8s3.93-.47 5-1.2v2.01c-.23.22-.57.45-1.03.65-.98.44-2.38.72-3.97.72-1.59 0-2.99-.28-3.97-.72-.46-.2-.8-.43-1.03-.65v-2zm0 4.52V9.66c1.07.72 2.91 1.2 5 1.2s3.93-.48 5-1.2v1.67c0 .05-.02.16-.2.35-.18.2-.5.42-.96.63-.93.4-2.29.69-3.84.69-1.55 0-2.9-.28-3.84-.7-.46-.2-.78-.42-.96-.62-.18-.19-.2-.3-.2-.35z"/>\n</svg>\n'},3009:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 14H9C8.44772 14 8 13.5523 8 13V13C8 12.4477 8.44772 12 9 12H12V9C12 8.44772 12.4477 8 13 8V8C13.5523 8 14 8.44772 14 9V12H17C17.5523 12 18 12.4477 18 13V13C18 13.5523 17.5523 14 17 14H14V17C14 17.5523 13.5523 18 13 18V18C12.4477 18 12 17.5523 12 17V14Z"/>\n</svg>\n'},43099:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 7V5C7 4.44772 7.44772 4 8 4C8.55228 4 9 4.44772 9 5V7H11C11.5523 7 12 7.44772 12 8C12 8.55228 11.5523 9 11 9H9V11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11V9H5C4.44772 9 4 8.55228 4 8C4 7.44772 4.44772 7 5 7H7Z"/>\n</svg>\n'},42041:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 2h9a1 1 0 011 1v9a1 1 0 01-1 1H3a1 1 0 01-1-1V3a1 1 0 011-1zM1 3a2 2 0 012-2h9a2 2 0 012 2v9a2 2 0 01-2 2H3a2 2 0 01-2-2V3zm6 1h1v3h3v1H8v3H7V8H4V7h3V4z"/>\n</svg>\n'},28796:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 4C8.22386 4 8 4.22386 8 4.5V8H4.5C4.22386 8 4 8.22386 4 8.5C4 8.77614 4.22386 9 4.5 9H8V12.5C8 12.7761 8.22386 13 8.5 13C8.77614 13 9 12.7761 9 12.5V9H12.5C12.7761 9 13 8.77614 13 8.5C13 8.22386 12.7761 8 12.5 8H9V4.5C9 4.22386 8.77614 4 8.5 4Z"/>\n</svg>\n'},35732:e=>{e.exports='<svg class="add-speeddial-large-plus" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n  <path d="M34 30V0h-4v30H0v4h30v30h4V34h30v-4"/>\n</svg>\n'},98913:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 6.5C3 6.22386 3.22386 6 3.5 6H6.5C6.77614 6 7 6.22386 7 6.5V9.5C7 9.77614 6.77614 10 6.5 10H3.5C3.22386 10 3 9.77614 3 9.5V6.5Z"/>\n  <path fill-rule="evenodd" d="M3 3C1.34315 3 0 4.34315 0 6V10C0 11.6569 1.34315 13 3 13H13C14.6569 13 16 11.6569 16 10V6C16 4.34315 14.6569 3 13 3H3ZM2 6C2 5.44772 2.44772 5 3 5H13C13.5523 5 14 5.44772 14 6V10C14 10.5523 13.5523 11 13 11H3C2.44772 11 2 10.5523 2 10V6Z"/>\n</svg>\n'},2291:e=>{e.exports='<svg viewBox="0 0 16 16"  xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 3C7 2.44772 6.55228 2 6 2H2C0.895431 2 0 2.89543 0 4V13C0 14.1046 0.895431 15 2 15H14C15.1046 15 16 14.1046 16 13V6C16 5.44772 15.5523 5 15 5H8C7.44772 5 7 4.55228 7 4V3ZM2 8C2 7.44772 2.44772 7 3 7H13C13.5523 7 14 7.44772 14 8V12C14 12.5523 13.5523 13 13 13H3C2.44772 13 2 12.5523 2 12V8Z"/>\n  <rect opacity="0.35" x="8" y="2" width="8" height="2" rx="1"/>\n</svg>\n'},77737:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\r\n    <path fill-rule="evenodd" d="M12.5 16L8.86568 12.3657C8.36171 11.8617 8.71865 11 9.43137 11L15.5686 11C16.2814 11 16.6383 11.8617 16.1343 12.3657L12.5 16Z"/>\r\n</svg>\r\n'},60018:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 11L4.86568 7.36568C4.36171 6.86171 4.71865 6 5.43137 6L11.5686 6C12.2814 6 12.6383 6.86171 12.1343 7.36569L8.5 11Z"/>\n</svg>\n'},99785:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 13l3.634-3.634c.504-.504 1.366-.147 1.366.566v6.137c0 .713-.862 1.07-1.366.566l-3.634-3.634z"/></svg>'},10307:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M5 8L8.63432 4.36568C9.13829 3.86171 10 4.21865 10 4.93137L10 11.0686C10 11.7814 9.13829 12.1383 8.63431 11.6343L5 8Z"/>\n</svg>\n'},91004:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16 13l-3.634 3.634c-.504.504-1.366.147-1.366-.566v-6.137c0-.713.862-1.07 1.366-.566l3.634 3.634z"/></svg>'},86839:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M11 8L7.36568 11.6343C6.86171 12.1383 6 11.7814 6 11.0686L6 4.93137C6 4.21865 6.86171 3.86171 7.36569 4.36569L11 8Z"/>\n</svg>\n'},89170:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 6L12.1343 9.63432C12.6383 10.1383 12.2814 11 11.5686 11L5.43137 11C4.71865 11 4.36171 10.1383 4.86569 9.63431L8.5 6Z"/>\n</svg>\n'},51843:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1 8c0-2.182 1.75-4 3.85-4h7.35C13.74 4 15 5.31 15 6.91s-1.26 3.15-2.8 3.15H6.25C5.27 10.06 4.5 9.018 4.5 8s.77-2 1.75-2h5.753v1.063H6.25c-.42 0-.7.5-.7.937 0 .436.28.97.7.97h5.95c.98 0 1.75-1.043 1.75-2.06 0-1.02-.77-1.82-1.75-1.82H4.85c-1.54 0-2.8 1.31-2.8 2.91s1.26 2.91 2.8 2.91l6.155.148V12H4.85C2.75 12 1 10.182 1 8z"/>\n</svg>\n'},55070:e=>{e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#00AA55" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M9.43 10.879L13.524 6l2.298 1.928-6.024 7.19L5 11.082l1.928-2.298z"/>\n</svg>'},81766:e=>{e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#AA0055" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M5 7l2 -2l3 3l3 -3l2 2l-3 3l3 3l-2 2l-3 -3l-3 3l-2 -2l3 -3z"/>\n</svg>'},99634:e=>{e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#dddd55" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M9.43 10.879L13.524 6l2.298 1.928-6.024 7.19L5 11.082l1.928-2.298z"/>\n</svg>'},95460:e=>{e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5 5 C5 0 15 0 15 5 C15 8 11 9 11 11 L11 14 C11 15 9 15 9 14 L9 10 C9 8 13 7 13 5 C13 3 7 3 7 5 C7 6 5 6 5 5z"/>>\n    <circle cx="10" cy="17" r="1"/>\n</svg>'},72103:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.02555 3.6815L9.02548 3.68157L7.35355 5.3535C7.15829 5.54876 6.84171 5.54876 6.64645 5.3535C6.45118 5.15824 6.45118 4.84165 6.64645 4.64639L8.31845 2.97439L8.31852 2.97432C8.94279 2.3503 9.78933 1.99976 10.672 1.99976C11.5547 1.99976 12.4012 2.3503 13.0255 2.97432L12.672 3.32795L13.0256 2.97446C13.6496 3.59873 14.0002 4.44527 14.0002 5.32795C14.0002 6.21062 13.6496 7.05716 13.0256 7.68143L13.0256 7.6815L11.3536 9.3535C11.1583 9.54876 10.8417 9.54876 10.6464 9.3535C10.4512 9.15824 10.4512 8.84165 10.6464 8.64639L12.3184 6.97446L12.3184 6.97439C12.755 6.53765 13.0002 5.94544 13.0002 5.32795C13.0002 4.71049 12.755 4.1183 12.3185 3.68157C11.8818 3.245 11.2895 2.99976 10.672 2.99976C10.0545 2.99976 9.46229 3.24498 9.02555 3.6815ZM10.8536 5.14645C11.0488 5.34171 11.0488 5.65829 10.8536 5.85355L5.85355 10.8536C5.65829 11.0488 5.34171 11.0488 5.14645 10.8536C4.95118 10.6583 4.95118 10.3417 5.14645 10.1464L10.1464 5.14645C10.3417 4.95118 10.6583 4.95118 10.8536 5.14645ZM5.3535 7.35355C5.54876 7.15829 5.54876 6.84171 5.3535 6.64645C5.15824 6.45118 4.84165 6.45118 4.64639 6.64645L2.97439 8.31845L2.97432 8.31852C2.3503 8.94279 1.99976 9.78933 1.99976 10.672C1.99976 11.5547 2.3503 12.4012 2.97432 13.0255L3.32795 12.672L2.97446 13.0256C3.59873 13.6496 4.44527 14.0002 5.32795 14.0002C6.21062 14.0002 7.05716 13.6496 7.68143 13.0256L7.6815 13.0256L9.3535 11.3536C9.54876 11.1583 9.54876 10.8417 9.3535 10.6464C9.15824 10.4512 8.84165 10.4512 8.64639 10.6464L6.97446 12.3184L6.97439 12.3184C6.53765 12.755 5.94544 13.0002 5.32795 13.0002C4.71049 13.0002 4.1183 12.755 3.68157 12.3185C3.245 11.8818 2.99976 11.2895 2.99976 10.672C2.99976 10.0545 3.24498 9.46229 3.6815 9.02555L3.68157 9.02548L5.3535 7.35355Z"/>\n</svg>\n'},96569:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11v1.857S2 14 3.077 14h9.846S14 14 14 12.857V11h-1v1.857c0 .064-.007.1-.012.12A.289.289 0 0112.9 13H3.077c-.017 0-.03 0-.04-.002A.485.485 0 013 12.841V11H2z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 8H4.762L8 10.698 11.238 8H9V3H7v5zm7-1l-6 5-6-5h4V3a1 1 0 011-1h2a1 1 0 011 1v4h4z"/>\n</svg>\n'},79537:e=>{e.exports='<svg width="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 4C7.22386 4 7 4.22386 7 4.5V7.5C7 7.70662 7.12533 7.88397 7.30412 7.96017C7.3329 8.02199 7.37279 8.07992 7.42381 8.13093L8.7304 9.43752C8.96449 9.67161 9.34402 9.67161 9.5781 9.43752C9.81219 9.20344 9.81219 8.82391 9.5781 8.58982L8.27151 7.28323C8.19356 7.20527 8.09947 7.15328 8 7.12725V4.5C8 4.22386 7.77614 4 7.5 4Z"/>\n  <path fill-rule="evenodd" d="M13 7.5C13 10.5376 10.5376 13 7.5 13C4.46243 13 2 10.5376 2 7.5C2 4.4624 4.46243 2 7.5 2C10.5376 2 13 4.4624 13 7.5ZM12 7.5C12 9.98535 9.98528 12 7.5 12C5.01472 12 3 9.98535 3 7.5C3 5.01465 5.01472 3 7.5 3C9.98528 3 12 5.01465 12 7.5Z"/>\n</svg>\n'},72796:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 11c2.652 0 4.854-1.276 5.872-3C12.854 6.276 10.652 5 8 5 5.344 5 3.14 6.28 2.123 8.007 3.132 9.777 5.325 11 8 11zm0 1c-3.181 0-5.918-1.572-7-4 1.082-2.346 3.819-4 7-4s5.918 1.654 7 4c-1.082 2.346-3.819 4-7 4zm1-4a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>\n'},19096:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="trackers" opacity="var(--trackers)" fill-opacity="0.7" d="M8 4l-3 .5v4.5c.539 1.328 1.539 2.277 3 3 1.459-.724 2.459-1.672 2.998-3l.002-4.5z"/>\n  <path class="ads" opacity="var(--ads)" fill-opacity="0.6" d="M2.5 2.5l5.5-1 5.5 1v7l-2.5 3.5-3 1.5-3-1.5-2.5-3.5z"/>\n  <path class="blocking" opacity="var(--blocking)" d="M5.227 7.621l2.773-4.621.031 4h2.527c.138 0 .25.112.25.25l-.036.129-2.773 4.621v-4h-2.558c-.138 0-.25-.112-.25-.25l.036-.129z"/>\n  <g>\n    <path class="outline" d="M8 1l6 1.077-.004 7.538c-1.079 2.324-3.077 4.118-5.996 5.385-2.799-1.213-4.753-2.912-5.86-5.097l-.14-.288v-7.538zm0 1l-5 .923v6.462c.899 1.992 2.566 3.53 5 4.615 2.432-1.085 4.098-2.624 4.997-4.615l.003-6.462z"/>\n    <path d="m8 14c2.432-1.085 4.098-2.624 4.997-4.615l.003-6.462-5-.923z" fill-opacity="0.2"/>\n  </g>\n</svg>\n'},24325:e=>{e.exports='<svg class="bookmarklet" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M3 13V2C3 1.44772 3.44772 1 4 1H8.79289C8.9255 1 9.05268 1.05268 9.14645 1.14645L12.8536 4.85355C12.9473 4.94732 13 5.0745 13 5.20711V13C13 13.5523 12.5523 14 12 14H4C3.44772 14 3 13.5523 3 13ZM7.53033 4.96967C7.23744 4.67678 6.76256 4.67678 6.46967 4.96967C6.17678 5.26256 6.17678 5.73744 6.46967 6.03033L8.43934 8L6.46967 9.96967C6.17678 10.2626 6.17678 10.7374 6.46967 11.0303C6.76256 11.3232 7.23744 11.3232 7.53033 11.0303L10.0303 8.53033L10.5607 8L10.0303 7.46967L7.53033 4.96967Z"/>\n</svg>\n'},4044:e=>{e.exports='<svg width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <clipPath id="addBookmarkPath">\n      <path fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54419 14.4435 4 14.2216 4 13.7734V2C4 1.44775 4.44771 1 5 1H11C11.5523 1 12 1.44775 12 2V13.7734C12 14.2216 11.4558 14.4435 11.1425 14.123Z"/>\n    </clipPath>\n  </defs>\n  <g clip-path="url(#addBookmarkPath)">\n    <path class="bookmark-animated-fill" fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54419 14.4435 4 14.2216 4 13.7734V2C4 1.44775 4.44771 1 5 1H11C11.5523 1 12 1.44775 12 2V13.7734C12 14.2216 11.4558 14.4435 11.1425 14.123Z"/>\n    <path class="bookmark-outline" fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54418 14.4434 4 14.2216 4 13.7734V2C4 1.44772 4.44772 1 5 1H11C11.5523 1 12 1.44772 12 2V13.7734C12 14.2216 11.4558 14.4434 11.1425 14.123ZM8 9.47872L5 12.5469V2L11 2V12.5469L8 9.47872Z"/>\n    <path class="add-bookmark-shadow" d="M8 2H11V12.55L8 9.47656V2Z"/>\n  </g>\n</svg>\n'},97624:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 6C11.8954 6 11 6.89543 11 8V14H8L13 19L18 14H15V8C15 6.89543 14.1046 6 13 6Z"/>\n</svg>\n'},20477:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 9V4C7 3.44772 7.44772 3 8 3V3C8.55228 3 9 3.44772 9 4V9H12L8 13L4 9H7Z"/>\n</svg>\n'},62786:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M16.2929 20.2929L13 17L9.70711 20.2929C9.07714 20.9229 8 20.4767 8 19.5858V6C8 5.44772 8.44772 5 9 5H17C17.5523 5 18 5.44772 18 6V19.5858C18 20.4767 16.9229 20.9229 16.2929 20.2929ZM14.4142 15.5858C14.0391 15.2107 13.5304 15 13 15C12.4696 15 11.9609 15.2107 11.5858 15.5858L10 17.1716V7H16V17.1716L14.4142 15.5858Z"/>\n</svg>\n'},48446:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 2C4.44772 2 4 2.44772 4 3V13.5858C4 14.4767 5.07714 14.9229 5.70711 14.2929L8 12L10.2929 14.2929C10.9229 14.9229 12 14.4767 12 13.5858V3C12 2.44772 11.5523 2 11 2H5ZM6 4H10V11.5L8.70711 10.2071C8.31658 9.81658 7.68342 9.81658 7.29289 10.2071L6 11.5V4Z"/>\n</svg>\n'},31734:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.486 11.143a1 1 0 011.029 0L12 13.232V1.024A.261.261 0 0011.996 1H4.024A.287.287 0 004 1.003V13.234l3.486-2.091zM4 14.4L3 15V1c0-1 1-1 1-1h8c1 0 1 1 1 1v14l-1-.6L8 12l-4 2.4zm8.054-13.396h.002zM4.004.946V.945z"/>\n</svg>\n'},16508:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M9 0H4S3 0 3 1v14l5-3 5 3V1s0-1-1-1H9z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M7.486 11.143a1 1 0 011.029 0L12 13.232V1.024A.261.261 0 0011.996 1H4.024A.287.287 0 004 1.003V13.234l3.486-2.091zM4 14.4L3 15V1c0-1 1-1 1-1h8c1 0 1 1 1 1v14l-1-.6L8 12l-4 2.4zm8.054-13.396h.002zM4.004.946V.945z"/>\n</svg>\n'},42855:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M10 11a1 1 0 112 0v4a1 1 0 11-2 0zm4 0a1 1 0 112 0v4a1 1 0 11-2 0z"/>\n  <path fill-rule="evenodd" d="M7 6a3 3 0 00-3 3v8a3 3 0 003 3h12a3 3 0 003-3V9a3 3 0 00-3-3zM6 9a1 1 0 011-1h12a1 1 0 011 1v8a1 1 0 01-1 1H7a1 1 0 01-1-1z" />\n</svg>\n'},97093:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 2a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V5a3 3 0 00-3-3zM2 5a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H3a1 1 0 01-1-1z"/>\n  <path d="M5 6a1 1 0 012 0v4a1 1 0 11-2 0zm4 0a1 1 0 012 0v4a1 1 0 11-2 0z"/>\n</svg>\n'},58615:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 3h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zM1 4c0-1.1.9-2 2-2h10a2 2 0 012 2v8a2 2 0 01-2 2H3a2 2 0 01-2-2zm5.4 1c-.2 0-.4 0-.4.5v5c0 .5.2.5.4.5a3.6 3.6 0 01.2 0c.2 0 .4 0 .4-.5v-5C7 5 6.8 5 6.6 5a4.2 4.2 0 01-.2 0zm3 0c-.2 0-.4 0-.4.5v5c0 .5.2.5.4.5a3.6 3.6 0 01.2 0c.2 0 .4 0 .4-.5v-5c0-.5-.2-.5-.4-.5a4.2 4.2 0 01-.2 0z"/>\n</svg>\n'},5869:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M16 13l-3.7 3a.8.8 0 01-1.3-.7v-4.6a.8.8 0 011.3-.7z" fill-rule="evenodd"/>\n  <path d="M7 6a3 3 0 00-3 3v8a3 3 0 003 3h12a3 3 0 003-3V9a3 3 0 00-3-3zM6 9a1 1 0 011-1h12a1 1 0 011 1v8a1 1 0 01-1 1H7a1 1 0 01-1-1z"/>\n</svg>\n'},82214:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M11 8l-3.7 3a.8.8 0 01-1.3-.7V5.7A.8.8 0 017.3 5z" fill-rule="evenodd"/>\n  <path d="M3 2a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V5a3 3 0 00-3-3zM2 5a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H3a1 1 0 01-1-1z"/>\n</svg>\n'},57358:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 3h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zM1 4c0-1.1.9-2 2-2h10a2 2 0 012 2v8a2 2 0 01-2 2H3a2 2 0 01-2-2zm6.3 1L11 8l-3.7 3a.8.8 0 01-1.3-.7V5.7A.8.8 0 017.3 5zM7 6l2.4 2L7 10z"/>\n</svg>\n'},82152:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 3a1 1 0 011-1h14a1 1 0 011 1v1a1 1 0 01-1 1H1a1 1 0 01-1-1v-1zm0 5a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 011 1v1a1 1 0 01-1 1H1a1 1 0 01-1-1v-1z"/></svg>'},82453:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 2a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 8a1 1 0 011-1h14a1 1 0 011 1v5a1 1 0 01-1 1H1a1 1 0 01-1-1v-5zm1-5a1 1 0 000 2h14a1 1 0 100-2H1z"/></svg>'},38368:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 5a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 3a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm1 2a1 1 0 100 2h14a1 1 0 100-2H1z"/></svg>'},49336:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n    <path stroke-width="0" fill-rule="evenodd" d="M5 3h6c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 1H5v2h6V4z"/>\n    <path stroke-width="0" d="M5 10a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM7 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0zM11 10a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM4 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0zM8 11h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2z"/>\n    <path stroke-width="0" fill-rule="evenodd" d="M4 1a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H4zm8 1H4a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h8c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1z"/>\n</svg>\n'},87922:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <g clip-path="url(#clip-0-calendar-density)">\n    <rect class="bg-fill" width="220" height="164" rx="3"/>\n    <g clip-path="url(#clip-1-calendar-density)" class="highlight-fill">\n      <path opacity=".32" fill-rule="evenodd" clip-rule="evenodd" d="M52 0v164h1V0h-1zm113 0v164h1V0h-1z" fill-opacity=".25"/>\n      <path opacity=".3" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v62a3 3 0 003 3h93a3 3 0 003-3V22a3 3 0 00-3-3h-93zm223 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zM60 78a3 3 0 013-3h93a3 3 0 013 3v62a3 3 0 01-3 3H63a3 3 0 01-3-3V78zm113-28a3 3 0 013-3h93a3 3 0 013 3v34a3 3 0 01-3 3h-93a3 3 0 01-3-3V50zm3 53a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-229 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n      <rect x="60" y="19" width="99" height="40" rx="3"/>\n    </g>\n  </g>\n  <defs>\n    <clipPath id="clip-0-calendar-density">\n      <rect class="bg-fill" width="220" height="164" rx="3"/>\n    </clipPath>\n    <clipPath id="clip-1-calendar-density">\n      <path class="bg-fill" d="M0 0h220v164H0z" rx="3"/>\n    </clipPath>\n  </defs>\n</svg>\n'},18767:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <rect width="220" height="164" rx="3" class="bg-fill"/>\n  <g clip-path="url(#clip-0-calendar-density)" class="highlight-fill">\n    <path opacity=".32" fill-rule="evenodd" clip-rule="evenodd" d="M52 0v164h1V0h-1zm113 0v164h1V0h-1z" fill-opacity=".25"/>\n    <path opacity=".3" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm110 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3H63a3 3 0 01-3-3v-6zm0 84a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3H63a3 3 0 01-3-3v-6zm3 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zM173 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-3 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-229 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n    <rect x="60" y="75" width="99" height="12" rx="3"/>\n  </g>\n  <defs>\n    <clipPath id="clip-0-calendar-density">\n      <path class="bg-fill" d="M0 0h220v164H0z" rx="3"/>\n    </clipPath>\n  </defs>\n</svg>\n'},36502:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <g clip-path="url(#clip-calendar-inline-editor)">\n    <rect class="bg-fill" width="220" height="164" rx="3"/>\n    <rect class="highlight-stroke" x="62" y="40" width="97" height="83" rx="3" stroke-width="2"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M53.5 0v164"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M166.5 0v164"/>\n    <path class="highlight-fill" opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M-49 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm113 0a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H64zm0 112a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H64zM174 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 54.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 67.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 80.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 93.5h83"/>\n    <rect class="highlight-fill" x="69" y="102" width="41" height="14" rx="2"/>\n    <rect class="highlight-stroke" opacity=".5" x="117" y="103" width="34" height="12" rx="1" stroke-width="2"/>\n  </g>\n  <defs>\n    <clipPath id="clip-calendar-inline-editor">\n      <path class="bg-fill" d="M0 0h220v164H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},46647:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <rect class="bg-fill" width="220" height="164" rx="3"/>\n  <g clip-path="url(#clip-calendar-popup-editor)">\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M52.5 0v164"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M165.5 0v164"/>\n    <path class="highlight-fill" opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm113 0a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zm0 112a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zM173 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n  </g>\n  <path class="bg-fill" fill-rule="evenodd" clip-rule="evenodd" d="M32 25a3 3 0 00-3 3v102a3 3 0 003 3h74l4.5 4.5 4.5-4.5h74a3 3 0 003-3V28a3 3 0 00-3-3H32z"/>\n  <path class="highlight-fill" d="M106 133l.7-.7-.29-.3H106v1zm4.5 4.5l-.7.7.7.71.7-.7-.7-.71zm4.5-4.5v-1h-.41l-.3.3.71.7zM30 28c0-1.1.9-2 2-2v-2a4 4 0 00-4 4h2zm0 102V28h-2v102h2zm2 2a2 2 0 01-2-2h-2a4 4 0 004 4v-2zm74 0H32v2h74v-2zm5.2 4.8l-4.5-4.5-1.4 1.4 4.5 4.5 1.4-1.4zm3.1-4.5l-4.5 4.5 1.4 1.4 4.5-4.5-1.4-1.4zm74.7-.3h-74v2h74v-2zm2-2a2 2 0 01-2 2v2a4 4 0 004-4h-2zm0-102v102h2V28h-2zm-2-2a2 2 0 012 2h2a4 4 0 00-4-4v2zM32 26h157v-2H32v2z"/>\n  <rect class="highlight-fill" x="41" y="108" width="46" height="14" rx="2"/>\n  <rect class="highlight-stroke" opacity=".5" x="94" y="109" width="44" height="12" rx="1" stroke-width="2"/>\n  <path class="highlight-fill" fill-rule="evenodd" clip-rule="evenodd" d="M41 46h134v-1H41v1zm0 14h134v-1H41v1zm134 14H41v-1h134v1zM41 88h134v-1H41v1z" fill-opacity=".25"/>\n  <defs>\n    <clipPath id="clip-calendar-popup-editor">\n      <path class="bg-fill" d="M0 0h220v164H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},28888:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zM51.16 20.21c2.79 0 5.05 2.26 5.05 5.05v25.27c0 2.79-2.26 5.05-5.05 5.05H20.84a5.05 5.05 0 01-5.05-5.05V25.26c0-2.79 2.26-5.05 5.05-5.05h2.53v-2.53a2.53 2.53 0 015.05 0v2.53h5.05v-2.53a2.53 2.53 0 015.06 0v2.53h5.05v-2.53a2.53 2.53 0 015.05 0v2.53h2.53zm-2.53 30.32c1.4 0 2.53-1.13 2.53-2.53V30.32c0-1.4-1.13-2.53-2.53-2.53H23.37a2.53 2.53 0 00-2.53 2.53V48c0 1.4 1.13 2.53 2.53 2.53h25.26zM30.95 32.84h-5.06v5.05h5.06v-5.05zm7.58 5.05v-5.05h-5.06v5.05h5.06zm-7.58 2.53h-5.06v5.05h5.06v-5.05zm7.58 5.05v-5.05h-5.06v5.05h5.06zm7.58-12.63h-5.06v5.05h5.06v-5.05zm0 7.58h-5.06v5.05h5.06v-5.05z" opacity=".3"/>\n  <path fill-rule="evenodd" d="M24.9 31.84h7.05v7.05h-7.06v-7.05zm14.63 0v7.05h-7.06v-7.05h7.06zm-14.64 7.58h7.06v7.05h-7.06v-7.05zm14.64 0v7.05h-7.06v-7.05h7.06zm.52-7.58h7.06v7.05h-7.06v-7.05zm0 7.58h7.06v7.05h-7.06v-7.05zM54.76 70.3c4.76-.7 8.15-2.07 10.8-4.73 2.66-2.65 4.04-6.04 4.73-10.8.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zm-3.6-51.08a6.05 6.05 0 016.05 6.05v25.27a6.05 6.05 0 01-6.05 6.05H20.84a6.05 6.05 0 01-6.05-6.05V25.26a6.05 6.05 0 016.05-6.05h1.53v-1.53a3.53 3.53 0 017.05 0v1.53h3.05v-1.53a3.53 3.53 0 017.06 0v1.53h3.05v-1.53a3.53 3.53 0 017.05 0v1.53h1.53zm-2.53 30.32c.84 0 1.53-.69 1.53-1.53V30.32c0-.85-.69-1.53-1.53-1.53H23.37c-.84 0-1.53.68-1.53 1.53V48c0 .84.69 1.53 1.53 1.53h25.26zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72zm20.21-46.74a5.05 5.05 0 00-5.05-5.05h-2.53v-2.53a2.53 2.53 0 00-5.05 0v2.53h-5.05v-2.53a2.53 2.53 0 00-5.06 0v2.53h-5.05v-2.53a2.53 2.53 0 00-5.05 0v2.53h-2.53a5.05 5.05 0 00-5.05 5.05v25.27c0 2.79 2.26 5.05 5.05 5.05h30.32c2.79 0 5.05-2.26 5.05-5.05V25.26zM51.16 48c0 1.4-1.13 2.53-2.53 2.53H23.37A2.53 2.53 0 0120.84 48V30.32c0-1.4 1.13-2.53 2.53-2.53h25.26c1.4 0 2.53 1.13 2.53 2.53V48zM30.95 32.84v5.05h-5.06v-5.05h5.06zm7.58 5.05h-5.06v-5.05h5.06v5.05zm-7.58 2.53v5.05h-5.06v-5.05h5.06zm7.58 5.05h-5.06v-5.05h5.06v5.05zm7.58-12.63v5.05h-5.06v-5.05h5.06zm0 7.58v5.05h-5.06v-5.05h5.06z"/>\n</svg>\n'},40191:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M21 9C21 7.89543 20.1046 7 19 7H18V6C18 5.44772 17.5523 5 17 5C16.4477 5 16 5.44772 16 6V7H14V6C14 5.44772 13.5523 5 13 5C12.4477 5 12 5.44772 12 6V7H10V6C10 5.44772 9.55228 5 9 5C8.44772 5 8 5.44772 8 6V7H7C5.89543 7 5 7.89543 5 9V19C5 20.1046 5.89543 21 7 21H19C20.1046 21 21 20.1046 21 19V9ZM19 18C19 18.5523 18.5523 19 18 19H8C7.44772 19 7 18.5523 7 18V11C7 10.4477 7.44772 10 8 10H18C18.5523 10 19 10.4477 19 11V18Z" />\n  <path d="M9 12H11V14H9V12ZM12 12H14V14H12V12ZM9 15H11V17H9V15ZM12 15H14V17H12V15ZM15 12H17V14H15V12ZM15 15H17V17H15V15Z" />\n</svg>\n'},33395:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 8V6H6V8H4Z"/>\n  <path d="M7 6V8H9V6H7Z"/>\n  <path d="M12 8V6H10V8H12Z"/>\n  <path d="M6 11V9H4V11H6Z"/>\n  <path d="M7 9V11H9V9H7Z"/>\n  <path d="M12 11V9H10V11H12Z"/>\n  <path fill-rule="evenodd" d="M4 1C3.44772 1 3 1.44772 3 2C1.89543 2 1 2.89543 1 4V12C1 13.1046 1.89543 14 3 14H13C14.1046 14 15 13.1046 15 12V4C15 2.89543 14.1046 2 13 2C13 1.44772 12.5523 1 12 1C11.4477 1 11 1.44772 11 2L9 2C9 1.44772 8.55228 1 8 1C7.44772 1 7 1.44772 7 2L5 2C5 1.44772 4.55228 1 4 1ZM13 5V12H3L3 5H13Z"/>\n</svg>\n'},28586:e=>{e.exports='<svg viewBox="0 0 26 26"  xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M19 6a2 2 0 012 2v4.299a5.243 5.243 0 00-2-.293V10a1 1 0 00-1-1H8a1 1 0 00-1 1v7a1 1 0 001 1h1.256a4.493 4.493 0 00-.229 2H7a2 2 0 01-2-2V8a2 2 0 012-2h1V5a1 1 0 012 0v1h2V5a1 1 0 112 0v1h2V5a1 1 0 112 0v1h1zm-8 9.758a4.514 4.514 0 00-.329.242H9v-2h2v1.758zm6-3.253c-.294.14-.572.306-.833.495H15v-2h2v1.505zM11 13v-2H9v2h2zm3 0v-2h-2v2h2z" />\n    <path d="M22.372 17.338A2.406 2.406 0 0124 19.6c0 1.326-1.086 2.4-2.446 2.4h-8.108C12.094 22 11 20.922 11 19.6c0-1.051.682-1.944 1.643-2.269a2.021 2.021 0 012.013-1.731c.542 0 1.034.208 1.398.549A3.25 3.25 0 0119.125 14c1.796 0 3.25 1.432 3.25 3.2l-.003.138z"/>\n</svg>'},92529:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 5H4v2h2V5zm0 3H4v2h2V8zm1-3h2v2H7V5zm2 3H7v2h2V8zm1-3h2v2h-2V5zm2 3h-2v2h2V8z"/>\n  <path fill-rule="evenodd" d="M4 1a1 1 0 012 0h1a1 1 0 012 0h1a1 1 0 112 0h.5A2.5 2.5 0 0115 3.5v8a2.5 2.5 0 01-2.5 2.5h-9A2.5 2.5 0 011 11.5v-8A2.5 2.5 0 013.5 1H4zM2 4v7.5A1.5 1.5 0 003.5 13h9a1.5 1.5 0 001.5-1.5V4a1 1 0 00-1-1H3a1 1 0 00-1 1z"/>\n</svg>\n'},2365:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M14 3H2v10h12V3zM4 5h2v2H4V5zm0 3h2v2H4V8zm5-3H7v2h2V5zM7 8h2v2H7V8zm5-3h-2v2h2V5zm-2 3h2v2h-2V8z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M4 1a1 1 0 012 0h1a1 1 0 012 0h1a1 1 0 112 0h.5A2.5 2.5 0 0115 3.5v8a2.5 2.5 0 01-2.5 2.5h-9A2.5 2.5 0 011 11.5v-8A2.5 2.5 0 013.5 1H4zM2 4v7.5A1.5 1.5 0 003.5 13h9a1.5 1.5 0 001.5-1.5V4a1 1 0 00-1-1H3a1 1 0 00-1 1z"/>\n</svg>\n'},52504:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.907 2.79a.5.5 0 00-.814-.58L8.436 8.73 5.854 6.145a.5.5 0 10-.708.708l3 3a.5.5 0 00.76-.063l5-7zM3.147 4.147A.5.5 0 013.5 4h5a.5.5 0 000-1h-5A1.5 1.5 0 002 4.5v8A1.5 1.5 0 003.5 14h8a1.5 1.5 0 001.5-1.5v-2a.5.5 0 00-1 0v2a.5.5 0 01-.5.5h-8a.5.5 0 01-.5-.5v-8a.5.5 0 01.146-.354z"/>\n</svg>\n'},12853:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 16C14.1046 16 15 15.1046 15 14C15 12.8954 14.1046 12 13 12C11.8954 12 11 12.8954 11 14C11 15.1046 11.8954 16 13 16Z"/>\n  <path fill-rule="evenodd" d="M10.5 6C9.11929 6 8 7.11929 8 8.5C8 8.77614 7.77614 9 7.5 9H7C5.34315 9 4 10.3431 4 12V17C4 18.6569 5.34315 20 7 20H19C20.6569 20 22 18.6569 22 17V12C22 10.3431 20.6569 9 19 9H18.5C18.2239 9 18 8.77614 18 8.5C18 7.11929 16.8807 6 15.5 6H10.5ZM10 8.5C10 8.22386 10.2239 8 10.5 8H15.5C15.7761 8 16 8.22386 16 8.5C16 9.88071 17.1193 11 18.5 11H19C19.5523 11 20 11.4477 20 12V17C20 17.5523 19.5523 18 19 18H7C6.44772 18 6 17.5523 6 17V12C6 11.4477 6.44772 11 7 11H7.5C8.88071 11 10 9.88071 10 8.5Z"/>\n</svg>\n'},56035:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8 11C9.10457 11 10 10.1046 10 9C10 7.89543 9.10457 7 8 7C6.89543 7 6 7.89543 6 9C6 10.1046 6.89543 11 8 11Z"/>\n  <path fill-rule="evenodd" d="M6 2C4.89543 2 4 2.89543 4 4H3C1.34315 4 0 5.34315 0 7V11C0 12.6569 1.34315 14 3 14H13C14.6569 14 16 12.6569 16 11V7C16 5.34315 14.6569 4 13 4H12C12 2.89543 11.1046 2 10 2H6ZM6 4H10C10 5.10457 10.8954 6 12 6H13C13.5523 6 14 6.44772 14 7V11C14 11.5523 13.5523 12 13 12H3C2.44772 12 2 11.5523 2 11V7C2 6.44772 2.44772 6 3 6H4C5.10457 6 6 5.10457 6 4Z"/>\n</svg>\n'},70807:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M22 8.086c0-.696-.547-1.086-1.319-1.086h-17.681l3.897 4 11.103-2-9.154 5v8l12.667-13c.221-.223.487-.591.487-.914z"/></svg>'},5096:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 3.869c0-.557-.461-.869-1.111-.869h-14.889l3.282 3.2 9.35-1.6-7.709 4v6.4l10.667-10.4c.186-.178.41-.473.41-.731z"/></svg>'},51555:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/>\n</svg>\n'},30135:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M1.5 2.5H15l.5 1-9.5 10V7L1.5 2.5z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/>\n</svg>\n'},78297:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.5 3L3 4.5 6.5 8 3 11.5 4.414 13 9.5 8l-5-5zm5 0L8 4.5 11.5 8 8 11.5 9.414 13 14.5 8l-5-5z"/>\n</svg>\n'},4799:e=>{e.exports='<svg width="11" height="6" viewBox="0 0 11 6" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.5.133l.11-.11 4.456 4.456-1.498 1.497L5.5 2.91 2.432 5.976.934 4.48 5.39.022l.11.11z" />\n</svg>\n'},87268:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle\n    fill="var(--kIconCircleFill)"\n    stroke="var(--kIconCircleStroke)"\n    stroke-width="1.1"\n    stroke-opacity="0.8"\n    cx="8" cy="8" r="4.5" />\n</svg>\n'},78990:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle cx="8" cy="8" r="3" />\n</svg>\n'},78553:e=>{e.exports='<svg wisth="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <g clip-path="url(#clear-downloads-clip)" fill-rule="evenodd" clip-rule="evenodd">\n    <path d="M9.385.077a1 1 0 01.538 1.308L7.775 6.54l.238.089c.536.201.78.813.682 1.377-.345 2.006.867 3.83 2.152 5.277.589.662.156 1.716-.73 1.716H2a.968.968 0 01-.979-1c.193-4.414 1.683-6.152 3.523-8.036a.999.999 0 011.065-.236l.292.11L8.077.615A1 1 0 019.385.077zM6.3 13h1.79c-.858-1.282-1.576-2.902-1.438-4.745l-1.13-.423c-.673.716-1.182 1.343-1.578 2.114-.376.734-.689 1.68-.842 3.054h1.98l-.464-1.854a.6.6 0 111.164-.292l.5 2A.602.602 0 016.3 13z"/>\n    <path opacity=".35" d="M14.985 7H11V6h3.985v1zm0 2H11V8h3.985v1zM12 11h3v-1h-3v1z"/>\n  </g>\n  <defs>\n    <clipPath id="clear-downloads-clip">\n      <path fill="white" d="M0 0h16v16H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},59607:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.455 1.207a.5.5 0 00-.91-.414L6.2 5.95l-.592-.222a.999.999 0 00-1.065.236C2.704 7.848 1.214 9.586 1.021 14a.968.968 0 00.98 1h8.116c.886 0 1.319-1.053.73-1.716-1.285-1.448-2.497-3.27-2.152-5.277.097-.564-.146-1.176-.682-1.377l-.874-.328 2.316-5.095zM6.382 14H5.4a.601.601 0 00-.02-.155l-.8-3a.6.6 0 10-1.16.31L4.18 14H2.022c.095-2.072.489-3.45 1.032-4.51.553-1.078 1.292-1.892 2.204-2.825l2.403.9v.001a.133.133 0 01.024.038c.025.054.04.14.025.234-.43 2.503 1.09 4.647 2.39 6.11.009.01.012.017.014.02a.033.033 0 01.003.01.05.05 0 01-.003.022H7.6a.601.601 0 00-.018-.146l-.5-2a.6.6 0 10-1.164.292L6.382 14z"/>\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M14.985 7H11V6h3.985v1zm0 2H11V8h3.985v1zM12 11h3v-1h-3v1z"/>\n</svg>\n'},72864:e=>{e.exports='<svg class="ClockGraphic" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n  <circle class="ClockGraphic-Hour-Indicator" r="17" cx="50" cy="50"/>\n  <circle class="ClockGraphic-Minute-Indicator" r="29" cx="50" cy="50"/>\n  <path d="M50 1C50.5523 1 51 1.44772 51 2L51 12C51 12.5523 50.5523 13 50 13C49.4477 13 49 12.5523 49 12L49 2C49 1.44771 49.4477 1 50 1ZM31.5 17.9571C31.0217 18.2332 30.4101 18.0693 30.134 17.591L25.134 8.93078C24.8578 8.45249 25.0217 7.8409 25.5 7.56475C25.9783 7.28861 26.5899 7.45249 26.866 7.93078L31.866 16.591C32.1422 17.0693 31.9783 17.6809 31.5 17.9571ZM12 51C12.5523 51 13 50.5523 13 50C13 49.4477 12.5523 49 12 49L2 49C1.44772 49 1 49.4477 1 50C1 50.5523 1.44772 51 2 51L12 51ZM17.591 69.866C18.0693 69.5899 18.2332 68.9783 17.9571 68.5C17.6809 68.0217 17.0693 67.8578 16.591 68.134L7.93078 73.134C7.45249 73.4101 7.28861 74.0217 7.56475 74.5C7.8409 74.9783 8.45249 75.1422 8.93078 74.866L17.591 69.866ZM51 88C51 87.4477 50.5523 87 50 87C49.4477 87 49 87.4477 49 88L49 98C49 98.5523 49.4477 99 50 99C50.5523 99 51 98.5523 51 98L51 88ZM31.5 82.0429C31.9783 82.3191 32.1422 82.9307 31.866 83.409L26.866 92.0692C26.5899 92.5475 25.9783 92.7114 25.5 92.4352C25.0217 92.1591 24.8578 91.5475 25.134 91.0692L30.134 82.409C30.4101 81.9307 31.0217 81.7668 31.5 82.0429ZM16.591 31.866C17.0693 32.1422 17.6809 31.9783 17.9571 31.5C18.2332 31.0217 18.0693 30.4101 17.591 30.134L8.93078 25.134C8.45249 24.8578 7.8409 25.0217 7.56476 25.5C7.28862 25.9783 7.45249 26.5899 7.93078 26.866L16.591 31.866ZM92.0692 26.866C92.5475 26.5899 92.7114 25.9783 92.4353 25.5C92.1591 25.0217 91.5475 24.8578 91.0692 25.134L82.409 30.134C81.9307 30.4101 81.7668 31.0217 82.0429 31.5C82.3191 31.9783 82.9307 32.1422 83.409 31.866L92.0692 26.866ZM74.5 7.56476C74.9783 7.8409 75.1422 8.45249 74.866 8.93078L69.866 17.591C69.5899 18.0693 68.9783 18.2332 68.5 17.9571C68.0217 17.6809 67.8578 17.0693 68.134 16.591L73.134 7.93078C73.4101 7.45249 74.0217 7.28861 74.5 7.56476ZM98 51C98.5523 51 99 50.5523 99 50C99 49.4477 98.5523 49 98 49L88 49C87.4477 49 87 49.4477 87 50C87 50.5523 87.4477 51 88 51L98 51ZM74.5 92.4352C74.0217 92.7114 73.4101 92.5475 73.134 92.0692L68.134 83.409C67.8578 82.9307 68.0217 82.3191 68.5 82.0429C68.9783 81.7668 69.5899 81.9307 69.866 82.409L74.866 91.0692C75.1422 91.5475 74.9783 92.1591 74.5 92.4352ZM91.0692 74.866C91.5475 75.1422 92.1591 74.9783 92.4352 74.5C92.7114 74.0217 92.5475 73.4101 92.0692 73.134L83.409 68.134C82.9307 67.8578 82.3191 68.0217 82.0429 68.5C81.7668 68.9783 81.9307 69.5899 82.409 69.866L91.0692 74.866Z" />\n  <path class="ClockGraphic-Hour-Hand" d="M71.1642 50.4857C71.6384 50.4918 72 50.4964 72 50C72 49.4925 71.622 49.4955 71.1322 49.4993C71.089 49.4997 71.0448 49.5 71 49.5L52.0706 48.5986C51.621 47.9356 50.8614 47.5 50 47.5C48.6193 47.5 47.5 48.6193 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C50.8621 52.5 51.6222 52.0637 52.0717 51.3998L71 50.4844C71.0559 50.4844 71.1108 50.4851 71.1642 50.4857Z"/>\n  <path class="ClockGraphic-Minute-Hand" d="M50.4858 16.8358C50.4918 16.3616 50.4964 16 50 16C49.4925 16 49.4955 16.378 49.4993 16.8678C49.4997 16.911 49.5 16.9552 49.5 17L48.562 47.9547C47.9196 48.4072 47.5 49.1546 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C51.3807 52.5 52.5 51.3807 52.5 50C52.5 49.1542 52.0799 48.4064 51.437 47.954L50.4844 17C50.4844 16.9441 50.4851 16.8892 50.4858 16.8358Z" />\n  <path class="ClockGraphic-Second-Hand" d="M50.5 6H49.5V47.55C48.3589 47.7816 47.5 48.7905 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C51.3807 52.5 52.5 51.3807 52.5 50C52.5 48.7905 51.6411 47.7816 50.5 47.55V6Z" />\n  <circle class="ClockGraphic-CenterCutout" cx="50" cy="50" r="1.5" />\n</svg>'},79448:e=>{e.exports='<svg class="ClockIcon ClockIcon--large" viewBox="0 0 26 26"xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="12" y="7" width="2" height="7" rx="1"/>\n<rect class="ClockIcon-TimeHour" x="12" y="12" width="5" height="2" rx="1"/>\n<path fill-rule="evenodd" d="M13 20.3C17.0317 20.3 20.3 17.0317 20.3 13C20.3 8.96832 17.0317 5.7 13 5.7C8.96832 5.7 5.7 8.96832 5.7 13C5.7 17.0317 8.96832 20.3 13 20.3ZM13 22C17.9706 22 22 17.9706 22 13C22 8.02944 17.9706 4 13 4C8.02944 4 4 8.02944 4 13C4 17.9706 8.02944 22 13 22Z"/>\n<path class="ClockIcon-AlarmBell" d="M4.05328 3.05322C2.67257 4.43393 2.67257 6.67251 4.05328 8.05322L9.05328 3.05322C7.67257 1.67251 5.434 1.67251 4.05328 3.05322Z"/>\n<path class="ClockIcon-AlarmBell" d="M22 3.05322C23.3807 4.43393 23.3807 6.67251 22 8.05322L17 3.05322C18.3807 1.67251 20.6193 1.67251 22 3.05322Z"/>\n<circle class="ClockIcon-CountdownHour" cx="13" cy="13" r="4"/>\n<circle class="ClockIcon-CountdownMinute" cx="13" cy="13" r="4"/>\n</svg>'},14021:e=>{e.exports='<svg class="ClockIcon ClockIcon--medium" viewBox="0 0 16 16"xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="7" y="4" width="2" height="5" rx="1" />\n<rect class="ClockIcon-TimeHour" x="7" y="7" width="4" height="2" rx="1" />\n<path fill-rule="evenodd" d="M8 13.4C10.9823 13.4 13.4 10.9823 13.4 8C13.4 5.01766 10.9823 2.6 8 2.6C5.01766 2.6 2.6 5.01766 2.6 8C2.6 10.9823 5.01766 13.4 8 13.4ZM8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z" />\n<path class="ClockIcon-AlarmBell" d="M1.00001 0.99996C-0.114362 2.11433 -0.114362 3.92107 1.00001 5.03544L5.03549 0.99996C3.92112 -0.114407 2.11437 -0.114407 1.00001 0.99996Z"/>\n<path class="ClockIcon-AlarmBell" d="M15.0355 0.99996C16.1499 2.11433 16.1499 3.92107 15.0355 5.03544L11 0.99996C12.1144 -0.114407 13.9211 -0.114407 15.0355 0.99996Z"/>\n<circle class="ClockIcon-CountdownHour" cx="8" cy="8" r="3"/>\n<circle class="ClockIcon-CountdownMinute" cx="8" cy="8" r="3"/>\n</svg>'},68777:e=>{e.exports='<svg class="ClockIcon ClockIcon--small" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="7.5" y="3" width="1" height="5.5" rx="0.5"/>\n<rect class="ClockIcon-TimeHour" x="7.5" y="7.5" width="3.5" height="1" rx="0.5"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z"/>\n<path class="ClockIcon-AlarmBell" d="M1.00001 0.99996C-0.114362 2.11433 -0.114362 3.92107 1.00001 5.03544L5.03549 0.99996C3.92112 -0.114407 2.11437 -0.114407 1.00001 0.99996Z"/>\n<path class="ClockIcon-AlarmBell" d="M15.0355 0.99996C16.1499 2.11433 16.1499 3.92107 15.0355 5.03544L11 0.99996C12.1144 -0.114407 13.9211 -0.114407 15.0355 0.99996Z"/>\n<circle class="ClockIcon-CountdownHour" cx="8" cy="8" r="3"/>\n<circle class="ClockIcon-CountdownMinute" cx="8" cy="8" r="3"/>\n</svg>'},57396:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L8 6.58579L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L9.41421 8L11.7071 10.2929C12.0976 10.6834 12.0976 11.3166 11.7071 11.7071C11.3166 12.0976 10.6834 12.0976 10.2929 11.7071L8 9.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L6.58579 8L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289Z"/>\n</svg>\n'},24344:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M13 4.2c.4-1.2-1.5-2-2.5-2.2.2 0 .7.5.7 1.6C11.3 5 9 5.7 9 7.4c.1 1.4 2.1 2.3 3.1 2.6l-1.4-1.4c-1-1 1.6-2.9 2.2-4.4zM16 7.4c.2-.8-.7-1.3-1.2-1.4 0 0 .3.3.3 1 0 .8-1.2 1.3-1.1 2.4 0 .9 1 1.4 1.6 1.6l-.8-.8c-.5-.7.9-1.9 1.2-2.8z"/>\n  <path fill-rule="evenodd" d="M6.2 12c0 1.5.4 5.2 3.2 7H6.2c0 .7.6 2 2.4 2h8.8c.8-.1 2.3-.6 2.2-2h-3.4l1.2-1c2.8-.3 4-1.2 4-3a2 2 0 00-1.8-2v-.8-.2H6.3zm13.3 1.8a8.2 8.2 0 01-1.2 3.1c.5.2 2-.5 2.2-1.4.3-1-.4-1.5-1-1.7z"/>\n</svg>\n'},32132:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M7.4 1.7C7.8.7 6.4.2 5.6 0c.2 0 .5.4.5 1.2.1 1.1-1.7 1.7-1.6 3 0 1.1 1.6 1.8 2.3 2l-1-1c-.9-.9 1.1-2.3 1.6-3.5zM9.6 4.2c.2-.6-.5-1-.8-1 0 0 .2.1.2.7s-.9 1-.8 1.9c0 .6.8 1 1.2 1.2l-.6-.7c-.4-.5.6-1.4.8-2.1z"/>\n  <path fill-rule="evenodd" d="M2.7 7c0 1.1.3 3.6 2.3 5H2.7c0 .5.4 2 1.7 2h7.3c.6 0 1.6-1 1.6-2H11l.7-.5c1.6 0 2.8-.7 2.8-2 0-1-.8-1.4-1.2-1.4v-.8V7H2.7zm10.5 1.7A4.4 4.4 0 0112 11c.4 0 1.8-.4 2-1.1 0-.7-.4-1.1-.8-1.2z"/>\n</svg>\n'},59260:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M7.4 1.7C7.8.7 6.4.2 5.6 0c.2 0 .5.4.5 1.2.1 1.1-1.7 1.7-1.6 3 0 1.1 1.6 1.8 2.3 2l-1-1c-.9-.9 1.1-2.3 1.6-3.5zM9.6 4.2c.2-.6-.5-1-.8-1 0 0 .2.1.2.7s-.9 1-.8 1.9c0 .6.8 1 1.2 1.2l-.6-.7c-.4-.5.6-1.4.8-2.1z"/>\n  <path fill-rule="evenodd" d="M12.7 8.1a13 13 0 00.1-1L3.2 7a8.4 8.4 0 000 1c0 1.2.3 2.8 1 4a3.3 3.3 0 001 1H3c0 .5.3 1 1.5 1h6.6c.6 0 1.6-.6 1.6-1h-2.1l.8-.8h.4c.3.2.7 0 .9 0l.6-.3c.4-.3.9-.7 1-1.4a2 2 0 00-.3-1.6 2 2 0 00-1.1-.7h-.3zm-2.5 4l-1.3.9h-2l-1.1-.8c-.6-.4-1-1.3-1.3-2.5L4.2 8h7.6l-.4 2c-.3 1.1-.8 1.9-1.2 2.2zm3.3-1.8c-.2.7-1 1-1.4 1a3.6 3.6 0 00.6-1.5v-.6c.5 0 .9.4.8 1.1z"/>\n</svg>\n'},12340:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 5l3 2.5-3 2.5v-5zM0 4h11v1h-11zM0 6h11v1h-11zM0 8h11v1h-11zM0 10h7v1h-7z"/></svg>'},85749:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 10l-3-2.5 3-2.5v5zM3 4h7v1h-7zM3 6h7v1h-7zM3 8h7v1h-7zM3 10h4v1h-4z"/></svg>'},74836:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 3c-1.933 0-3.5 1.567-3.5 3.5 0 .763.244 1.468.659 2.044l.015.021 2.393 4.173c.192.335.675.335.868 0l2.393-4.173.015-.021c.414-.574.658-1.28.658-2.044 0-1.933-1.567-3.5-3.5-3.5zm-4.5 3.5c0-2.485 2.015-4.5 4.5-4.5s4.5 2.015 4.5 4.5c0 .971-.308 1.871-.832 2.607l-2.367 4.129c-.576 1.005-2.026 1.005-2.603 0l-2.367-4.129c-.523-.736-.832-1.636-.832-2.607zm2.4 0c0-1.16.94-2.1 2.1-2.1 1.16 0 2.1.94 2.1 2.1 0 1.16-.94 2.1-2.1 2.1-1.16 0-2.1-.94-2.1-2.1zm2.1-1.1c-.608 0-1.1.492-1.1 1.1 0 .608.492 1.1 1.1 1.1.608 0 1.1-.492 1.1-1.1 0-.608-.492-1.1-1.1-1.1z"/>\n</svg>\n'},19194:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.293 5h-6.586l3.293 3.293 3.293-3.293zm-8 0h-.293v6h10v-6h-.293l-4.354 4.354-.354.354-.354-.354-4.354-4.354zm-1.293 0c0-.552.448-1 1-1h10c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1h-10c-.552 0-1-.448-1-1v-6z"/>\n</svg>\n'},19914:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.962 2.392c.481.347.867.895 1.078 1.55.211.655.22 1.333.043 1.906-.176.571-.555 1.083-1.145 1.295l-.31.078c.117.414.284.828.504 1.231.203.372.437.707.691 1.002l.204-.225c.465-.43 1.085-.53 1.664-.4.576.129 1.137.484 1.572 1.009.435.525.688 1.151.73 1.751.043.598-.123 1.213-.582 1.638-.467.431-1.377.845-2.536.761-1.898-.137-3.372-1.757-4.509-3.838-.571-1.045-1.013-2.2-1.226-3.306-.211-1.097-.207-2.198.179-3.096.169-.393.549-.758.888-1.024.351-.275.756-.517 1.069-.63.595-.214 1.205-.052 1.686.296zm-.585.811c-.286-.206-.553-.241-.763-.166-.178.064-.49.24-.792.476-.313.245-.521.481-.585.631-.275.641-.308 1.515-.116 2.512.19.988.592 2.046 1.122 3.016 1.114 2.039 2.359 3.223 3.704 3.32.895.065 1.53-.263 1.785-.498.18-.167.291-.452.264-.833-.027-.378-.191-.808-.503-1.184-.312-.377-.687-.597-1.02-.671-.33-.074-.592-.003-.767.159-.116.107-.201.26-.242.457l-.175.846-.646-.573c-.532-.472-1.008-1.066-1.388-1.761-.386-.706-.635-1.448-.753-2.177l-.13-.808.778.252c.164.053.314.051.45.003.215-.077.417-.287.528-.649.111-.359.115-.826-.039-1.305s-.425-.84-.712-1.046z" />\n</svg>\n'},54098:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.5" d="M15.3601 14.0944C15.7634 13.2763 16 12.3882 16 11.5V10.7C16 8.97393 15.2386 7.41339 14.0397 6.36118C14.5271 5.47393 15.0397 5 16.5 5C18 5 19 6.3 19 7.5V8.5C19 9.49998 18.5 9.99995 18.0001 10.4999L20 12.5C20.5 13 21 13.5 21 14C21 14.5 20.5 15 20 15.0343H16.3L15.3601 14.0944Z"/>\n  <path d="M15 17L12.5 14.5C13.4 13.8 14 12.7 14 11.5V10.7C14 8.79999 12.6 7.09999 10.7 6.99999C8.7 6.89999 7 8.49999 7 10.5V11.5C7 12.7 7.6 13.8 8.5 14.5L6 17C5.5 17.5 5 18 5 19C5 19.6 5.4 20 6 20H15C15.6 20 16 19.6 16 19C16 18.5 15.5 17.5 15 17Z"/>\n</svg>\n'},83075:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6.32251 9.83154L7.19854 9.13994C7.79551 8.66865 8.18182 7.93438 8.18182 7.15653V6.41832C8.18182 5.10311 7.23661 4.06267 6.1298 4.00275C4.89183 3.94068 3.81818 4.95267 3.81818 6.23377V7.15653C3.81818 7.93438 4.20449 8.66865 4.80146 9.13994L5.67749 9.83154L4.89418 10.6266L2.62145 12.9335C2.38143 13.1772 2.24309 13.3243 2.14494 13.4903C2.07175 13.6141 2.0124 13.7656 2.00172 14H9.98007C9.97658 13.9875 9.97247 13.9736 9.96766 13.9582C9.93608 13.8575 9.88589 13.7325 9.81884 13.5964C9.67866 13.3118 9.50782 13.0648 9.37855 12.9335L7.10582 10.6266L6.32251 9.83154ZM6.18182 3.0041C7.90909 3.09638 9.18182 4.66507 9.18182 6.41832V7.15653C9.18182 7.98554 8.87609 8.76283 8.37907 9.37224C8.21222 9.57682 8.02382 9.76248 7.81818 9.92482L8.52329 10.6405L10.0909 12.2317C10.5455 12.6931 11 13.6159 11 14.0772C11 14.6309 10.6364 15 10.0909 15H1.90909C1.36364 15 1 14.6309 1 14.0772C1 13.1545 1.45455 12.6931 1.90909 12.2317L3.47671 10.6405L4.18182 9.92482C3.97618 9.76248 3.78778 9.57682 3.62093 9.37224C3.12391 8.76283 2.81818 7.98554 2.81818 7.15653V6.23377C2.81818 4.38824 4.36364 2.91183 6.18182 3.0041Z"/>\n  <path opacity="0.5" d="M10.1383 9.15699C10.4859 8.42321 10.6899 7.6266 10.6899 6.82998V6.11244C10.6899 4.5643 10.0335 3.16461 9 2.22087C9.42021 1.42507 9.86201 1 11.1209 1C12.4139 1 13.2759 2.166 13.2759 3.2423V4.13922C13.2759 5.03612 12.845 5.48456 12.414 5.93301L14.138 7.72688C14.569 8.17534 15 8.6238 15 9.07226C15 9.52072 14.569 9.96918 14.138 10H10.9485L10.1383 9.15699Z"/>\n</svg>\n'},38546:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M4 4h4l.5 3-1 3 2.5 3 .5 1.5h-9l1-2 2-2.5-1-3L4 4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M6.323 9.832l.876-.692c.597-.471.983-1.206.983-1.983v-.739c0-1.315-.945-2.355-2.052-2.415-1.238-.062-2.312.95-2.312 2.23v.924c0 .777.386 1.512.983 1.983l.876.692-.783.795-2.273 2.306c-.24.244-.378.391-.476.557a1.038 1.038 0 00-.143.51H9.98a2.621 2.621 0 00-.161-.404 2.758 2.758 0 00-.44-.662l-2.273-2.307-.783-.795zm-.141-6.828c1.727.092 3 1.661 3 3.414v.739c0 .829-.306 1.606-.803 2.215-.167.205-.355.39-.56.553l.704.715 1.568 1.592c.455.461.909 1.384.909 1.845 0 .554-.364.923-.91.923H1.91c-.546 0-.91-.37-.91-.923 0-.922.455-1.384.91-1.845l1.567-1.591.705-.716a3.616 3.616 0 01-.561-.553 3.516 3.516 0 01-.803-2.215v-.923c0-1.846 1.546-3.322 3.364-3.23z"/>\n  <path class="small-icon-outline" opacity=".5" d="M10.138 9.157c.348-.734.552-1.53.552-2.327v-.718A5.267 5.267 0 009 2.221C9.42 1.425 9.862 1 11.12 1c1.294 0 2.156 1.166 2.156 2.242v.897c0 .897-.431 1.346-.862 1.794l1.724 1.794c.431.448.862.897.862 1.345 0 .449-.431.897-.862.928h-3.19l-.81-.843z"/>\n</svg>\n'},31789:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 2C2.22386 2 2 2.22386 2 2.5V12.5C2 12.7761 2.22386 13 2.5 13H5.5C5.77614 13 6 12.7761 6 12.5C6 12.2239 5.77614 12 5.5 12H3V3H10V4.5C10 4.77614 10.2239 5 10.5 5C10.7761 5 11 4.77614 11 4.5V2.5C11 2.22386 10.7761 2 10.5 2H2.5ZM7.5 6C7.22386 6 7 6.22386 7 6.5V13.5C7 13.7761 7.22386 14 7.5 14H13.5C13.7761 14 14 13.7761 14 13.5V6.5C14 6.22386 13.7761 6 13.5 6H7.5ZM8 13V7H13V13H8Z"/>\n</svg>'},6055:e=>{e.exports='<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M24 14a1 1 0 00-1 1v8h-8a1 1 0 100 2h8v8a1 1 0 102 0v-8h8a1 1 0 100-2h-8v-8a1 1 0 00-1-1z"/>\n</svg>\n'},46639:e=>{e.exports='\x3c!--  Mask definitions for SVG icons --\x3e\n<defs>\n  \x3c!-- shared paths --\x3e\n  <path id="folder-shape"\n    d="M0 3 1 2 7 2 8 3 8 4 15 4 16 5 16 13 15 14 1 14 0 13 Z"\n    stroke="#fff"\n    stroke-width="2"\n    stroke-opacity="1" />\n\n  <path id="sync-cloud"\n    d="M13.996 7.172C15.164 7.585 16 8.697 16 10c0 1.657-1.337 3-3.01 3H3.01C1.346 13 0 11.653 0 10c0-1.314.84-2.43 2.022-2.836C2.187 5.942 3.232 5 4.5 5c.667 0 1.272.26 1.72.686C6.765 4.123 8.25 3 10 3c2.21 0 4 1.79 4 4 0 .058 0 .115-.004.172z"/>\n\n  <g id="sd-group">\n    <path fill="#000" d="M8 8h8v8h-8z"/>\n    <path fill="#fff" d="M13 9h3v3h-3z"/>\n    <path fill="#fff" d="M13 13h3v3h-3z"/>\n    <path fill="#fff" d="M9 9h3v3h-3z"/>\n    <path fill="#fff" d="M9 13h3v3h-3z"/>\n  </g>\n\n  <path id="sd-bookmark"\n    d="M44 29v34l11-5.667 11 5.667v-34h-22zm11 24.5l-8 4.41v-25.91h16v26l-8-4.5z"/>\n\n  <filter id="sd-bookmark-filter" x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox">\n    <feOffset dx="1" dy="1" in="SourceAlpha" result="shadowOffset"/>\n    <feGaussianBlur stdDeviation=".5" in="shadowOffset" result="shadowBlur"/>\n    <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0" in="shadowBlur"/>\n  </filter>\n\n  \x3c!-- gradients --\x3e\n  <linearGradient id="border-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0.3" offset="0"/>\n    <stop stop-color="#fff" stop-opacity="0.6" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="icon-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0" offset="0.3"/>\n    <stop stop-color="#fff" stop-opacity="0.2" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="sd-bookmark-gradient" x1="0" y1="1" x2="1" y2="1">\n    <stop stop-color="#000" stop-opacity="0" offset="0.5"/>\n    <stop stop-color="#000" stop-opacity="1" offset="0.5"/>\n  </linearGradient>\n\n  <linearGradient id="sd-folder-gradient" x1="20%" y1="111%" x2="90%" y2="80%">\n    <stop stop-color="var(--colorBgLight)" offset="0%"/>\n    <stop stop-color="var(--colorBgLight)" offset="82%"/>\n    <stop stop-color="var(--colorBg)" offset="83%"/>\n    <stop stop-color="var(--colorBg)" offset="100%"/>\n  </linearGradient>\n\n  <linearGradient id="bookmark-graphic-gradient" x1="0%" y1="0%" x2="100%" y2="100%">\n    <stop stop-color="rgba(0,0,0, 0.1)" offset="0%"/>\n    <stop stop-color="transparent" offset="70%"/>\n  </linearGradient>\n\n  <linearGradient x1="0.15" y1="0.3" x2="0.3" y2="0.5" id="guest-intro-bg-gradient">\n    <stop offset="0" stop-color="var(--colorFg)" stop-opacity="0.03" />\n    <stop offset="1" stop-color="var(--colorFg)" stop-opacity="0.003" />\n  </linearGradient>\n\n  <linearGradient x1="1" y1="0" x2="0" y2="1" id="guest-intro-accent-gradient">\n    <stop offset="0" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n    <stop offset="0.5" stop-color="var(--colorAccentBg)" stop-opacity="1" />\n    <stop offset="1" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n  </linearGradient>\n\n  <linearGradient id="private-ghost-gradient" x1="35" y1="0" x2="35" y2="80" gradientUnits="userSpaceOnUse">\n    <stop stop-color="var(--colorFg)" stop-opacity=".8"/>\n    <stop stop-color="var(--colorFg)" offset="1" stop-opacity=".2"/>\n  </linearGradient>\n\n\n  \x3c!-- masks --\x3e\n  <mask id="trash-folder-mask">\n    <path d="M11 1v-1h-6v1h-4v1h14v-1h-4z" fill="#fff" />\n    <path d="M3 3h10v12h-10v-12z" fill="#000"\n      stroke="#fff" stroke-width="2" stroke-opacity="1" />\n    <path d="M6 6h1v6h-1z" fill="#fff" />\n    <path d="M9 6h1v6h-1z" fill="#fff" />\n  </mask>\n\n  <mask id="icon-mask">\n    <path d="M4 14v-12h7v12l-3.5-2.8-3.5 2.8z"\n      stroke="url(#border-gradient)"\n      stroke-width="2"\n      stroke-opacity="1"/>\n  </mask>\n\n  <mask id="mail-mask-unseen">\n    <circle cx="8" cy="8" r="4" fill="#fff" />\n    <circle cx="8" cy="8" r="2" fill="#000" />\n  </mask>\n\n  <mask id="sync-cloud-mask" x="0" y="0" width="16" height="10" fill="#fff">\n    <use xlink:href="#sync-cloud" />\n    <use mask="url(#sync-cloud-mask)"\n      xlink:href="#sync-cloud" />\n  </mask>\n\n  \x3c!-- patterns --\x3e\n  <pattern id="diagonalLinePattern" x="4" y="4" width="8" height="8" patternUnits="userSpaceOnUse" patternTransform="rotate(45)">\n    <rect x="0" y="0" width="4" height="8" style="stroke: none; fill: var(--colorHighlightBg)" />\n  </pattern>\n\n</defs>\n'},93513:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path d="M3.88 2.5h-.69v2.75h1.37V3.91A8.21 8.21 0 0 1 9.2 5.83l-.95.95 1 1 .95-.95a8.21 8.21 0 0 1 1.92 4.63h-1.37v1.38h2.75v-.69A9.64 9.64 0 0 0 3.88 2.5z"/>\n  <path d="M8.28 8.69l-1-1-1.83 1.89a2 2 0 0 0-.88-.21 2.06 2.06 0 1 0 2.06 2.06 2 2 0 0 0-.21-.88z"/>\n</svg>\n'},87046:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11 6C11 5.44772 11.4477 5 12 5H14C14.5523 5 15 5.44772 15 6V10H19L13 16L7 10H11V6Z"/>\n  <path d="M6 20C6 19.4477 6.44772 19 7 19H19C19.5523 19 20 19.4477 20 20C20 20.5523 19.5523 21 19 21H7C6.44772 21 6 20.5523 6 20Z"/>\n</svg>\n'},44231:e=>{e.exports='<svg class="download-empty-state" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n  <path class="border-color" d="M8 34C8 33.4477 7.55228 33 7 33V33C6.44772 33 6 33.4477 6 34V39C6 40.6569 7.34315 42 9 42H37C38.6569 42 40 40.6569 40 39V34C40 33.4477 39.5523 33 39 33V33C38.4477 33 38 33.4477 38 34V39C38 39.5523 37.5523 40 37 40H9C8.44772 40 8 39.5523 8 39V34Z"/>\n  <path class="main-fill-color" fill-rule="evenodd" clip-rule="evenodd" d="M29 6H17V21H13L23 30L33 21H29V6Z"/>\n  <path class="secondary-color" d="M29 6H23V30L33 21H29V6Z"/>\n  <rect class="download-progressbar" x="9" y="35" width="22" height="4" rx="1"/>\n</svg>\n'},55430:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="progress-bar-container" fill-rule="evenodd" clip-rule="evenodd" d="M1 14.857V12h1v2.841a.505.505 0 00.037.157l.04.002h11.822a.323.323 0 00.089-.024.447.447 0 00.012-.119v-2.856L15 12v2.857C15 16 13.923 16 13.923 16H2.077C1 16 1 14.857 1 14.857zm12.984.131a.017.017 0 01-.002.003l.002-.003z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H6v6H2l6 5 6-5h-4V0zM7 7V1h2v6h2.238L8 9.698 4.762 7H7z"/>\n</svg>\n'},15902:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill progress-bar-container" fill-rule="evenodd" clip-rule="evenodd" d="M1 12v2.857S1 16 2.077 16h11.846S15 16 15 14.857V12h-1v2.857c0 .064-.007.1-.012.12A.289.289 0 0113.9 15H2.076c-.017 0-.03 0-.04-.002A.485.485 0 012 14.841V12H1zm1.01 2.993l.003.001a.023.023 0 01-.003 0zm11.972-.002l.002-.003-.002.003z"/>\n  <path class="small-icon-fill" d="M6 6V0h4v6h4l-6 5-6-5h4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M7 7H4.762L8 9.698 11.238 7H9V1H7v6zm2-7h1v6h4l-1.2 1L8 11 3.2 7 2 6h4V0h3z"/>\n</svg>\n'},29504:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M16 6.12132L16.7071 5.41422C17.4882 4.63317 18.7545 4.63317 19.5355 5.41422C20.3166 6.19527 20.3166 7.4616 19.5355 8.24264L18.8284 8.94975L16 6.12132Z"/>\n  <path d="M7.00424 15.1758L15.4895 6.69052L18.3179 9.51894L9.83267 18.0042H7.00424V15.1758Z"/>\n  <path d="M7 19C6.44772 19 6 19.4477 6 20C6 20.5523 6.44772 21 7 21H19C19.5523 21 20 20.5523 20 20C20 19.4477 19.5523 19 19 19H7Z"/>\n</svg>\n'},84435:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\r\n  <rect x="2" y="14" width="12" height="1" rx="0.5"/>\r\n  <path d="M3 10.5L9.5 4L12 6.5L5.5 13L3 13L3 10.5Z"/>\r\n  <path d="M10.7929 2.70711L10 3.5L12.5 6L13.2929 5.20711C13.6834 4.81658 13.6834 4.18342 13.2929 3.79289L12.2071 2.70711C11.8166 2.31658 11.1834 2.31658 10.7929 2.70711Z"/>\r\n</svg>\r\n'},83947:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M11.1464 3.06066C11.3417 2.8654 11.6583 2.8654 11.8535 3.06066L12.9393 4.14645C13.1346 4.34171 13.1346 4.65829 12.9393 4.85356L12 5.7929L10.2071 4L11.1464 3.06066ZM12.5607 2.35356C11.9749 1.76777 11.0251 1.76777 10.4393 2.35355L9.14644 3.64645L8.79289 4L9.14644 4.35356L11.6464 6.85356L12 7.20711L12.3535 6.85356L13.6464 5.56066C14.2322 4.97488 14.2322 4.02513 13.6464 3.43934L12.5607 2.35356ZM2.42215 10.3707L2.25491 10.538L2.27811 10.7733L2.50241 13.049L2.54265 13.4573L2.95095 13.4976L5.22666 13.7219L5.46202 13.7451L5.62925 13.5778L10.9629 8.24418L11.3165 7.89063L10.9629 7.53707L8.46292 5.03707L8.10937 4.68352L7.75582 5.03707L2.42215 10.3707ZM3.45734 12.5427L3.29649 10.9106L8.10937 6.09773L9.90226 7.89063L5.08938 12.7035L3.45734 12.5427Z"/>\n</svg>\n'},17802:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.25 21.4a6.25 6.25 0 01-4.42-10.67l4.42-4.42a4.5 4.5 0 016.36 6.37l-4.07 4.07a2.76 2.76 0 01-3.89 0 2.76 2.76 0 010-3.89l3-3a1 1 0 111.41 1.41l-2.99 3a.75.75 0 000 1.06c.29.29.77.29 1.06 0l4.06-4.06c.47-.47.73-1.1.73-1.77 0-.67-.26-1.3-.73-1.77a2.57 2.57 0 00-3.54 0l-4.41 4.42a4.25 4.25 0 106.01 6.01l4.06-4.07a1 1 0 111.41 1.41l-4.06 4.07a6.2 6.2 0 01-4.41 1.83z"/>\n</svg>'},34830:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.5 1.28a1.04 1.04 0 00-1.42 0l-.7.67 2.12 2.01.7-.67c.4-.37.4-.97 0-1.34l-.7-.67zM13.79 4.63l-2.12-2.01L5 8.99V11h2.12l6.67-6.37z"/>\n  <path fill-rule="evenodd" d="M4 2a3 3 0 00-3 3v7a3 3 0 003 3h4a3 3 0 003-3v-2h-1l-1 1v1a1 1 0 01-1 1H4a1 1 0 01-1-1V5a1 1 0 011-1h3l1-1V2H4z"/>\n</svg>'},27476:e=>{e.exports='<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6.777 16.002c-1.32-1.32-1.362-3.48-.09-4.753l5.198-5.2c.932-.932 2.488-.902 3.456.067.97.968 1.146 2.67.214 3.602l-5.1 5.1c-.594.593-1.69.428-2.307-.188s-.745-1.677-.152-2.27l4.98-4.98.644.642-4.98 4.98c-.256.255-.122.728.142.992.265.264.756.417 1.01.163l5.1-5.1c.594-.595.43-1.69-.186-2.308-.617-.616-1.567-.634-2.16-.04l-5.2 5.198c-.932.932-.902 2.487.067 3.456.968.97 2.524.998 3.456.066l3.815-3.636.57.57-3.726 3.726c-1.272 1.272-3.432 1.23-4.753-.09z"/>\n</svg>\n'},21838:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M19 11v7H7v-7h12zM5 10h16v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-8zm6 2h4a1 1 0 1 1 0 2h-4a1 1 0 1 1 0-2z"/>\n  <path fill-rule="evenodd" d="M20 8v3H6V8h14zM4 8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3H4V8z"/>\n</svg>\n'},5211:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 7v6H3V7h10zM1 6h14v7a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V6zm5.5 2h3a1 1 0 1 1 0 2h-3a1 1 0 0 1 0-2z"/>\n  <path fill-rule="evenodd" d="M14 4v3H2V4h12zM0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3H0V4z"/>\n</svg>\n'},7773:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 7v5a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7h10zM2 6h12v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6zm4.5 2h3a1 1 0 1 1 0 2h-3a1 1 0 0 1 0-2z"/>\n  <path fill-rule="evenodd" d="M13 4a1 1 0 0 1 1 1v1H2V5a1 1 0 0 1 1-1h10zM1 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H1V5z"/>\n</svg>\n'},47043:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9 16h2.53l7-7.03-2.54-2.4L9 13.46V16zm11.8-9.33a.64.64 0 000-.94L19.27 4.2a.64.64 0 00-.94 0l-1.2 1.2 2.54 2.53 1.13-1.26z"/>\n  <path fill-rule="evenodd" d="M8 6a3 3 0 00-3 3v8a3 3 0 003 3h6a3 3 0 003-3v-4l-2 2v2a1 1 0 01-1 1H8a1 1 0 01-1-1V9a1 1 0 011-1h4l1-1 1-1H8z"/>\n</svg>'},31408:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.05 1.28a.96.96 0 00-1.35 0l-.68.67 2.03 2.01.67-.67a.95.95 0 000-1.34l-.67-.67zM13.37 4.63l-2.02-2.01L5 8.99V11h2.02l6.35-6.37z"/>\n  <path fill-rule="evenodd" d="M4 2a3 3 0 00-3 3v7a3 3 0 003 3h5a3 3 0 003-3V8l-1 1-1 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5a1 1 0 011-1h4l1-1 .87-.87A3 3 0 009 2H4z"/>\n</svg>'},67955:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.414.5c-.398 0-.779.158-1.061.439l-1.061 1.061 2.707 2.707 1-1c.32-.32.5-.754.5-1.207 0-.453-.18-.887-.5-1.207l-.354-.354c-.281-.281-.663-.439-1.061-.439h-.172zm-.353 1.146c.094-.094.221-.146.353-.146h.172c.133 0 .26.053.353.146l.354.354c.133.133.207.312.207.5s-.075.367-.207.5l-.293.293-1.293-1.293.354-.354zM10.5 2.793l-5.5 5.5v2.707h2.707l5.5-5.5-2.707-2.707zm-4.5 7.207v-1.293l4.5-4.5 1.293 1.293-4.5 4.5h-1.293z"/><path d="M4 3h4l-1 1h-3c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h5c.552 0 1-.448 1-1v-1l1-1v2c0 1.105-.895 2-2 2h-5c-1.105 0-2-.895-2-2v-7c0-1 .895-2 2-2z"/></svg>'},31391:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M5 6c0-1.1.9-2 2-2h10a2 2 0 012 2v7.02a6.62 6.62 0 00-2 .15V6H7v12h5.17a6.52 6.52 0 00-.15 2H7a2 2 0 01-2-2V6zm4 3h6v1H9V9zm0 2h6v1H9v-1zm3 2H9v1h3v-1z"/>\n  <path fill-rule="evenodd" d="M23 19.5a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm-2.5-1h-4a1 1 0 100 2h4a1 1 0 100-2z"/>\n</svg>'},82032:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 7.091v-3.646c0-.544-.448-.985-1-.985h-6c-.5 0-1 .493-1 .985v8.093c0 .493.5.985 1 .985h2.5c.002.512.074 1.008.207 1.478h-3.207c-1.105 0-2-.882-2-1.97v-9.078c0-1.088.895-1.97 2-1.97h7c1.105 0 2 .882 2 1.97v4.048l-.054.018-.446-.018c-.341 0-.676.031-1 .091zM5 4h5v1h-5v-1zM10 6h-5v1h5v-1zM5 8h3v1h-3v-1z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 12.5c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5zm-6 0c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5z"/></svg>'},39530:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.256 13h-2.256c-1.105 0-2-1-2-2v-7c0-1.105.895-2 2-2h5c1.105 0 2 .895 2 2v3.027c-.164-.018-.331-.027-.5-.027-.169 0-.336.009-.5.027v-3.027c0-.552-.448-1-1-1h-5c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h2.028c.038.347.116.682.229 1zm-2.256-9h5v1h-5v-1zm0 2h5v1h-5v-1zm2 2h-2v1h2v-1zm8 3.5c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5zm-6 0c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5z"/></svg>'},36218:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M8 7h5.697l.02.002c.242.014.461.113.627.269l.094.096.699 1.138c.174.297.495.496.863.496h3v6c0 .513-.386.935-.883.993l-4.117.007-.117-.007c-.286-.033-.535-.187-.695-.41l-.658-1.05c-.165-.327-.503-.551-.894-.551l-1.636.017c-.513 0-.936.386-.993.883l-.007.117v4c0 .552-.448 1-1 1-.513 0-.936-.386-.993-.883l-.007-.117v-11c0-.513.386-.936.883-.993l.117-.007z"/></svg>'},30651:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h4.697l.02.002c.242.014.461.113.627.269l.094.096.699 1.138c.174.297.495.496.863.496h2v5c0 .513-.386.935-.883.993l-3.117.007-.117-.007c-.286-.033-.535-.187-.695-.41l-.658-1.05c-.165-.327-.503-.551-.894-.551l-.636.017c-.513 0-.936.386-.993.883l-.007.117v3c0 .552-.448 1-1 1-.513 0-.936-.386-.993-.883l-.007-.117v-9c0-.513.386-.936.883-.993l.117-.007z"/></svg>'},27436:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.581 3h-3.581l-.117.007c-.497.058-.883.48-.883.993v8.5c0 .276.224.5.5.5s.5-.223.5-.5l.006-3.617c.058-.497.392-.883.993-.883.602 0 .865.207 1.03.534l.658 1.05c.16.222.409.376.695.41h2.733c.497-.058.883-.48.883-.993v-4h-1.117c-.368 0-.69-.199-.863-.496l-.699-1.138-.094-.096c-.166-.156-.385-.255-.627-.269l-.02-.002z"/></svg>'},38306:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M11.293 6.293l1.414 1.414a1 1 0 00.707.293H18a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h2.586a1 1 0 01.707.293zM18 13l-3-3v2h-3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5H15v2l3-3z"/>\n</svg>\n'},71318:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M8 4.958L6.8 3H3.2C2.54 3 2 3.563 2 4.25v7.5c0 .688.54 1.25 1.2 1.25h9.6c.66 0 1.2-.563 1.2-1.25V5.9c0-.688-.54-.942-1.2-.942H8zM12 9L9 6v2H5.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5H9v2l3-3z"/>\n</svg>\n'},14737:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M2.357 3.36A1.238 1.238 0 002 4.213v7.575a1.183 1.183 0 00.339.87 1.159 1.159 0 00.861.342h9.6c.317-.005.619-.134.843-.36.224-.227.352-.532.357-.852V6c0-.5-.5-1-1-1H8L6.8 3H3.2a1.214 1.214 0 00-.843.36zM3 11.823L3 11.805V4.223a.238.238 0 01.068-.159A.214.214 0 013.212 4h3.034L7.5 6h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064H3.165a.15.15 0 01-.115-.046.173.173 0 01-.05-.131z"/>\n\t<path fill-rule="evenodd" d="M3 11.822V4.223a.238.238 0 01.068-.159A.214.214 0 013.212 4h3.034L7.5 6h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064H3.165a.15.15 0 01-.115-.046.173.173 0 01-.05-.131z" fill-opacity=".1"/>\n\t<path d="M9.354 6.646a.5.5 0 10-.708.708L9.793 8.5H6a.5.5 0 000 1h3.793l-1.147 1.146a.5.5 0 00.708.708L11.707 9 9.354 6.646z"/>\n</svg>\n'},80217:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M12.007 8.007l-.007-.112c0-.494.394-.895.881-.895.267 0 .507.121.668.312l.061.053 4.729 4.944c.37.387.37.996 0 1.382l-4.729 4.944-.061.053c-.162.191-.401.311-.668.311-.487 0-.881-.401-.881-.895l.007-.112-.007.007v-10l.007.007z"/><rect x="7" y="11" width="8" height="4" rx="1"/></svg>'},59168:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.006 3.839l-.006-.093c0-.412.338-.746.755-.746.229 0 .434.101.573.26l.052.044 3.93 3.995c.383.389.383 1.013 0 1.403l-3.93 3.995-.052.044c-.138.159-.344.26-.573.26-.417 0-.755-.334-.755-.746l.006-.093-.006.006v-8.333l.006.006z"/><rect x="3" y="6" width="8" height="4" rx="1"/></svg>'},56475:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.5h.5v-2.754c0-.13.108-.246.255-.246.08 0 .149.034.196.088l.038.043.043.031 3.922 3.987c.191.195.191.507 0 .701l-3.922 3.987-.043.031-.038.043c-.047.054-.116.088-.196.088-.147 0-.255-.116-.255-.246v-2.754h-4.5c-.276 0-.5-.224-.5-.5v-2c0-.276.224-.5.5-.5h4z" stroke="#3B3B3B"/></svg>'},27818:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C6.44772 6 6 6.44772 6 7V11C6 11.5523 6.44772 12 7 12H11C11.5523 12 12 11.5523 12 11V7C12 6.44772 11.5523 6 11 6H7ZM8 8V10H10V8H8Z"/>\n  <path fill-rule="evenodd" d="M7 14C6.44772 14 6 14.4477 6 15V19C6 19.5523 6.44772 20 7 20H11C11.5523 20 12 19.5523 12 19V15C12 14.4477 11.5523 14 11 14H7ZM8 16V18H10V16H8Z"/>\n  <path fill-rule="evenodd" d="M14 15C14 14.4477 14.4477 14 15 14H19C19.5523 14 20 14.4477 20 15V19C20 19.5523 19.5523 20 19 20H15C14.4477 20 14 19.5523 14 19V15ZM16 18V16H18V18H16Z"/>\n  <path d="M16.0009 11.9999H16.0559C16.1963 11.9923 16.3336 11.9551 16.4587 11.8909C16.5838 11.8266 16.6939 11.7366 16.7819 11.6269L20.7819 6.62692C20.9479 6.41978 21.0249 6.15518 20.9958 5.89132C20.9667 5.62745 20.834 5.38594 20.6269 5.21992C20.5243 5.13771 20.4066 5.07651 20.2804 5.03981C20.1542 5.00311 20.022 4.99163 19.8913 5.00602C19.6274 5.03509 19.3859 5.16778 19.2199 5.37492L15.9179 9.49992L14.7079 8.28992C14.6149 8.19707 14.5045 8.12346 14.383 8.07329C14.2615 8.02312 14.1313 7.99737 13.9998 7.99751C13.7344 7.99779 13.4799 8.10351 13.2924 8.29142C13.1049 8.47932 12.9997 8.73402 13 8.99948C13.0003 9.26494 13.106 9.51941 13.2939 9.70692L15.2939 11.7069C15.4814 11.8945 15.7357 11.9999 16.0009 11.9999Z"/>\n</svg>\n'},96387:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 1C1.44772 1 1 1.44772 1 2V6C1 6.55228 1.44772 7 2 7H6C6.55228 7 7 6.55228 7 6V2C7 1.44772 6.55228 1 6 1H2ZM3 3V5H5V3H3Z"/>\n  <path fill-rule="evenodd" d="M2 9C1.44772 9 1 9.44772 1 10V14C1 14.5523 1.44772 15 2 15H6C6.55228 15 7 14.5523 7 14V10C7 9.44772 6.55228 9 6 9H2ZM3 11V13H5V11H3Z"/>\n  <path fill-rule="evenodd" d="M9 10C9 9.44772 9.44772 9 10 9H14C14.5523 9 15 9.44772 15 10V14C15 14.5523 14.5523 15 14 15H10C9.44772 15 9 14.5523 9 14V10ZM11 13V11H13V13H11Z"/>\n  <path d="M11.0009 6.99992H11.0559C11.1963 6.9923 11.3336 6.95513 11.4587 6.89086C11.5838 6.82659 11.6939 6.73665 11.7819 6.62692L15.7819 1.62692C15.9479 1.41978 16.0249 1.15518 15.9958 0.891317C15.9667 0.627453 15.834 0.385944 15.6269 0.219918C15.5243 0.137711 15.4066 0.0765093 15.2804 0.0398084C15.1542 0.0031075 15.022 -0.00837419 14.8913 0.00601889C14.6274 0.035087 14.3859 0.167784 14.2199 0.374918L10.9179 4.49992L9.70791 3.28992C9.61487 3.19707 9.50445 3.12346 9.38296 3.07329C9.26147 3.02312 9.13129 2.99737 8.99985 2.99751C8.73439 2.99779 8.47992 3.10351 8.29241 3.29142C8.1049 3.47932 7.99972 3.73402 8 3.99948C8.00028 4.26494 8.106 4.51941 8.29391 4.70692L10.2939 6.70692C10.4814 6.89447 10.7357 6.99986 11.0009 6.99992Z"/>\n</svg>\n'},30808:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.4243 7.42417L14.4243 3.42417C14.6586 3.18985 14.6586 2.80995 14.4243 2.57564C14.1899 2.34132 13.8101 2.34132 13.5757 2.57564L10 6.15137L8.42426 4.57564C8.18995 4.34132 7.81005 4.34132 7.57574 4.57564C7.34142 4.80995 7.34142 5.18985 7.57574 5.42417L9.57574 7.42417L10 7.84843L10.4243 7.42417ZM3 5.9999V3.9999H5V5.9999H3ZM2 3.4999C2 3.22376 2.22386 2.9999 2.5 2.9999H5.5C5.77614 2.9999 6 3.22376 6 3.4999V6.4999C6 6.77604 5.77614 6.9999 5.5 6.9999H2.5C2.22386 6.9999 2 6.77604 2 6.4999V3.4999ZM3 11.9999V9.9999H5V11.9999H3ZM2 9.4999C2 9.22376 2.22386 8.9999 2.5 8.9999H5.5C5.77614 8.9999 6 9.22376 6 9.4999V12.4999C6 12.776 5.77614 12.9999 5.5 12.9999H2.5C2.22386 12.9999 2 12.776 2 12.4999V9.4999ZM9 9.9999V11.9999H11V9.9999H9ZM8.5 8.9999C8.22386 8.9999 8 9.22376 8 9.4999V12.4999C8 12.776 8.22386 12.9999 8.5 12.9999H11.5C11.7761 12.9999 12 12.776 12 12.4999V9.4999C12 9.22376 11.7761 8.9999 11.5 8.9999H8.5Z"/>\n</svg>\n'},75971:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.414 5c-.781-.781-2.047-.781-2.828 0l-6 6c-.375.375-.586.884-.586 1.414v6.586c0 1.105.895 2 2 2h12c1.105 0 2-.895 2-2v-6.586c0-.53-.211-1.039-.586-1.414l-6-6zm-6.354 6.354l4.939-4.939 4.939 4.939-4.939 4.939-4.939-4.939zm-.707.707l-.354.354v6.586h12v-6.586l-.354-.354-5.646 5.646-5.646-5.646z"/></svg>'},73391:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.293 7.293l6-6c.391-.391 1.024-.391 1.414 0l6 6c.188.188.293.442.293.707v6c0 .552-.448 1-1 1h-12c-.552 0-1-.448-1-1v-6c0-.265.105-.52.293-.707zm1.707 5.707v-4.586l.811-.811 4.189 4.189 4.189-4.189.811.811v4.586h-10zm8.482-6.104l-3.482-3.482-3.482 3.482 3.482 3.482 3.482-3.482z"/></svg>'},15331:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="m7.29386.706223c.39053-.390524 1.02175-.390524 1.41228 0l4.70996 4.709977c.3751.37507.5839.88188.5839 1.41231v5.17159c0 .2652-.1054.5196-.2929.7071s-.4419.2929-.7071.2929h-10c-.26522 0-.51957-.1054-.70711-.2929-.18753-.1875-.29289-.4419-.29289-.7071v-5.17159c0-.53043.20882-1.03724.58389-1.41231zm-2.7332 4.147417 3.43934-3.43934 3.4393 3.43934-3.08575 3.08579c-.19526.19526-.51184.19526-.7071 0zm-.70711.70711-.56255.56255c-.18653.18653-.291.43857-.291.70521v5.17159h10v-5.17159c0-.26664-.1045-.51868-.291-.7052l-.5626-.56256-3.08574 3.08578c-.58579.58579-1.53553.58579-2.12132 0z" fill-rule="evenodd"/>\n</svg>'},17109:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.929 12h.071v-4.793c0-.445-.539-.669-.854-.354l-1.197 1.197c-1.267-1.267-3.017-2.05-4.95-2.05-3.526 0-6.444 2.608-6.929 6h2.029c.463-2.282 2.481-4 4.9-4 1.381 0 2.631.56 3.535 1.464l-1.682 1.682c-.315.315-.092.854.354.854h4.7219999999999995zm-9.136 2h-4.793v4.793c0 .445.539.669.854.354l1.197-1.197c1.267 1.267 3.017 2.05 4.95 2.05 3.526 0 6.444-2.608 6.929-6h-2.029c-.463 2.282-2.481 4-4.9 4-1.381 0-2.631-.56-3.536-1.465l1.682-1.682c.315-.315.092-.854-.354-.854z"/></svg>'},11331:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.065 7.082l4.292.227-.227-4.292c-.021-.399-.514-.624-.781-.357l-1.118 1.118c-1.092-1.088-2.601-1.762-4.269-1.762-3.038 0-5.551 2.235-5.969 5.143h2.032c.395-1.792 2.001-3.143 3.938-3.143 1.118 0 2.126.45 2.854 1.176l-1.109 1.109c-.267.267-.042.76.357.781zM5.922 8.949l-4.292-.227.227 4.292c.021.399.514.624.781.357l1.088-1.088c1.089 1.071 2.586 1.732 4.238 1.732 3.038 0 5.551-2.235 5.969-5.143h-2.032c-.395 1.791-2.001 3.143-3.938 3.143-1.103 0-2.098-.438-2.824-1.146l1.14-1.14c.267-.267.042-.76-.357-.781z"/></svg>'},64207:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.915 6.939h3.389l-.001-3.389c0-.315-.381-.473-.604-.25l-1.164 1.164c-.905-.905-2.155-1.464-3.536-1.464-2.419 0-4.437 1.718-4.9 4h1.026c.444-1.725 2.01-3 3.874-3 1.105 0 2.105.448 2.828 1.172l-1.164 1.164c-.223.223-.065.603.25.604zm-3.829 2.122h-3.389v3.389c0 .315.381.473.603.25l1.164-1.164c.905.905 2.155 1.464 3.536 1.464 2.419 0 4.437-1.718 4.9-4h-1.026c-.444 1.725-2.01 3-3.874 3-1.105 0-2.105-.448-2.828-1.171l1.164-1.164c.223-.223.065-.603-.25-.603z"/></svg>'},43652:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 7.895c0 .192-.058.37-.158.516l-.045.07-3.631 3.775c-.395.411-.395 1.078 0 1.489l3.538 3.678-.001.007c.182.164.297.406.297.676 0 .494-.385.895-.861.895-.261 0-.495-.121-.653-.311l-.06-.053-3.862-4.176c-.754-.815-.754-2.103 0-2.918l3.862-4.176.06-.053c.158-.191.392-.312.653-.312.475 0 .861.401.861.895zm3.119 11.105c.486 0 .881-.401.881-.895v-3.105h.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379 0-3.314-2.686-5.5-6-5.5v-3.105c0-.494-.395-.895-.881-.895-.267 0-.507.121-.668.312l-.061.053-4.729 4.944c-.37.387-.37.996 0 1.382l4.729 4.944.061.053c.161.191.401.311.668.311z"/></svg>'},67461:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.203 3.914c0 .192-.058.37-.158.516l-.045.07-2.833 2.756c-.395.411-.395 1.078 0 1.489l2.833 2.756-.001.007c.182.164.297.406.297.676 0 .494-.385.895-.861.895-.261 0-.495-.121-.653-.312l-.06-.053-3.157-3.254c-.754-.815-.754-2.103 0-2.918l3.064-3.157.06-.053c.158-.191.392-.312.653-.312.475 0 .861.401.861.895zM15 11.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379zM9.994 3.839l.006-.093c0-.412-.338-.746-.755-.746-.229 0-.434.101-.573.26l-.052.044-3.93 3.995c-.383.389-.383 1.013 0 1.403l3.93 3.995.052.044c.138.159.344.26.573.26.417 0 .755-.334.755-.746l-.006-.094.006.006v-8.333l-.006.006z"/></svg>'},70531:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 6.001l.001.499h.499c3.097 0 5.5 2.018 5.5 5 0 .08-.017.213-.051.363-1.023-1.43-2.698-2.363-4.592-2.363h-1.357v2.754c0 .13-.108.246-.255.246-.08 0-.149-.034-.196-.088l-.038-.043-.043-.031-3.922-3.987c-.191-.195-.191-.507 0-.701l3.922-3.987.043-.031.038-.043c.047-.054.116-.088.196-.088.084 0 .135.028.168.063s.081.114.081.276v.001l.006 2.161z" stroke="#3B3B3B"/><path d="M1.287 7.299l3.93-3.995.052-.044c.138-.159.344-.26.573-.26.417 0 .749.304.749.839v.569l-1 1v-1.059l-3.592 3.651 3.597 3.657v-.657l-.001-.404 1.001 1.001v.657c0 .412-.338.746-.755.746-.229 0-.434-.101-.573-.26l-.052-.044-3.93-3.995c-.383-.389-.383-1.013 0-1.403z"/></svg>'},28360:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.993 8.007l.007-.112c0-.494-.395-.895-.881-.895-.267 0-.507.121-.668.312l-.061.053-4.729 4.944c-.37.387-.37.996 0 1.382l4.729 4.944.061.053c.161.191.401.311.668.311.486 0 .881-.401.881-.895l-.007-.112.007.007v-10l-.007.007z"/><path d="M20 16.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379z"/></svg>'},51299:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.994 3.839l.006-.093c0-.412-.338-.746-.755-.746-.229 0-.434.101-.573.26l-.052.044-3.93 3.995c-.383.389-.383 1.013 0 1.403l3.93 3.995.052.044c.138.159.344.26.573.26.417 0 .755-.334.755-.746l-.006-.094.006.006v-8.333l-.006.006zM14 11.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379z"/></svg>'},10945:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 6.001l.001.499h.499c3.097 0 5.5 2.018 5.5 5 0 .08-.017.213-.051.363-1.023-1.43-2.698-2.363-4.592-2.363h-1.357v2.754c0 .13-.108.246-.255.246-.08 0-.149-.034-.196-.088l-.038-.043-.043-.031-3.922-3.987c-.191-.195-.191-.507 0-.701l3.922-3.987.043-.031.038-.043c.047-.054.116-.088.196-.088.084 0 .135.028.168.063s.081.114.081.276v.001l.006 2.161z" stroke="#3B3B3B"/></svg>'},21881:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M22 8.086c0-.696-.547-1.086-1.319-1.086h-17.681l3.897 4 11.103-2-9.154 5v8l12.667-13c.221-.223.487-.591.487-.914z"/></svg>'},64827:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 3.869c0-.557-.461-.869-1.111-.869h-14.889l3.282 3.2 9.35-1.6-7.709 4v6.4l10.667-10.4c.186-.178.41-.473.41-.731z"/></svg>'},39139:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/></svg>'},92513:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path fill-rule="evenodd" d="M19 9V7H7v2h12zm2 0a1 1 0 01-1 1h-.1l-.9 9a2 2 0 01-2 2H9a2 2 0 01-2-2l-.9-9H6a1 1 0 01-1-1V7c0-1.1.9-2 2-2h12a2 2 0 012 2v2zM8.11 10L9 18a1 1 0 001 1h6a1 1 0 001-1l.89-8H8.1zm7.8 2.38l-.71-.7-2.12 2.11-2.12-2.12-.71.7 2.12 2.13-2.12 2.12.7.7 2.13-2.11 2.12 2.12.7-.7-2.12-2.13 2.13-2.12z"/>\n</svg>\n'},66706:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M13 3v2H3V3h10zM2.12 6H2a1 1 0 01-1-1V3c0-1.1.78-2 1.75-2h10.5c.97 0 1.75.9 1.75 2v2a1 1 0 01-1 1h-.12l-.74 7.3c0 .94-.76 1.7-1.71 1.7H4.57a1.7 1.7 0 01-1.71-1.7L2.12 6zm1.72 0l.73 6.46c0 .47.39.85.86.85h5.14c.47 0 .86-.38.86-.85L12.16 6H3.84zm6.65 1.86l-.6-.6-1.82 1.8-1.82-1.8-.6.6 1.81 1.8-1.82 1.79.6.6 1.83-1.8 1.82 1.8.6-.6-1.82-1.8 1.82-1.8z"/>\n</svg>\n'},15901:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 2h10v1H3V2zM2 2a1 1 0 011-1h10a1 1 0 011 1v2h-1.09l-.73 7.6c-.08.8-.66 1.4-1.36 1.4H5.18c-.7 0-1.28-.6-1.36-1.4L3.09 4H2V2zm2 2l.72 7.49c.03.26.22.46.46.46h5.64c.24 0 .43-.2.46-.46L12 4H4zm6.5 1.86l-.61-.6-1.82 1.8-1.82-1.8-.6.6 1.81 1.8-1.82 1.79.6.6 1.83-1.8 1.82 1.8.6-.6-1.82-1.8 1.82-1.8z"/>\n</svg>\n'},59046:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z"/></svg>'},49602:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z"/></svg>'},97888:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4c0-.552.448-1 1-1h1c.552 0 1 .448 1 1v1c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1v-1zm1 0h1v1h-1v-1zM3 8c0-.552.448-1 1-1h1c.552 0 1 .448 1 1v1c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1v-1zm1 0h1v1h-1v-1zM6 12c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1v1c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1zm-1 0h-1v1h1v-1z"/><path d="M13 4.5c0-.276-.224-.5-.5-.5h-5c-.276 0-.5.224-.5.5s.224.5.5.5h5c.276 0 .5-.224.5-.5zM7 8.5c0-.276.224-.5.5-.5h5c.276 0 .5.224.5.5s-.224.5-.5.5h-5c-.276 0-.5-.224-.5-.5zM13 12.5c0-.276-.224-.5-.5-.5h-5c-.276 0-.5.224-.5.5s.224.5.5.5h5c.276 0 .5-.224.5-.5z"/></svg>'},28491:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6c1.105 0 2 .895 2 2 0 .932-.637 1.714-1.499 1.937l-.001 2.563h1.563c.222-.863 1.005-1.5 1.937-1.5 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.714-.637-1.937-1.499l-1.564-.001v3.006l.008.111c.058.497.48.883.993.883l.563-.001c.222-.862 1.005-1.499 1.937-1.499 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.715-.637-1.937-1.5h-.563c-1.105 0-2-.895-2-2v-6.563c-.863-.222-1.5-1.005-1.5-1.937 0-1.105.895-2 2-2zm4 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm8.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h4zm-8.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm8.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h4zm-12.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm12.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-8c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h8z"/></svg>'},98626:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6c1.105 0 2 .895 2 2 0 .932-.637 1.714-1.499 1.937l-.001 2.563h1.563c.222-.863 1.005-1.5 1.937-1.5 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.714-.637-1.937-1.499l-1.564-.001v3.006l.008.111c.058.497.48.883.993.883l.563-.001c.222-.862 1.005-1.499 1.937-1.499 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.715-.637-1.937-1.5h-.563c-1.105 0-2-.895-2-2v-6.563c-.863-.222-1.5-1.005-1.5-1.937 0-1.105.895-2 2-2zm4 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm7.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-3c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h3zm-7.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm7.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-3c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h3zm-11.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm11.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7z"/></svg>'},31560:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1v1c0 .552.448 1 1 1v6c0 .552.448 1 1 1h2c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1h-2v-3h2c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1h-2v-2c.552 0 1-.448 1-1v-1zm-1 0h-1v1h1v-1zm4 4h-1v1h1v-1zm-1 4h1v1h-1v-1z"/><path d="M7 4.5c0-.276.224-.5.5-.5h6c.276 0 .5.224.5.5s-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5zM14 8.5c0-.276-.224-.5-.5-.5h-2c-.276 0-.5.224-.5.5s.224.5.5.5h2c.276 0 .5-.224.5-.5zM11 12.5c0-.276.224-.5.5-.5h2c.276 0 .5.224.5.5s-.224.5-.5.5h-2c-.276 0-.5-.224-.5-.5z"/></svg>'},35719:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.5 10c1.381 0 2.5-1.119 2.5-2.5s-1.119-2.5-2.5-2.5-2.5 1.119-2.5 2.5 1.119 2.5 2.5 2.5zm-14.5-2h10.027c.081.734.339 1.416.73 2h-.051l-4.354 4.354-.354.354-.354-.354-4.353-4.354h-1.293v7h12v-5.758c.584.391 1.266.649 2 .73v5.027c0 1.105-.895 2-2 2h-12c-1.105 0-2-.895-2-2v-7c0-1.105.895-2 2-2zm2.707 2l3.293 3.293 3.293-3.293h-6.586z"/></svg>'},58480:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 5c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM15 12v-5.126c-.32.082-.655.126-1 .126s-.68-.044-1-.126v4.126h-10v-6h.793l4.207 4.207 3.277-3.277c-.245-.228-.462-.487-.644-.77l-2.633 2.633-2.793-2.793h5.328c-.34-.588-.535-1.271-.535-2h-8c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h12c.552 0 1-.448 1-1z"/></svg>'},44895:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 5c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14 11v-5c-.351 0-.687-.06-1-.171v5.171h-10v-6h.293l4.707 4.707 4.262-4.262c-.498-.355-.883-.858-1.091-1.445h-8.171c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h10c.552 0 1-.448 1-1zm-6-2.707l3.293-3.293h-6.586l3.293 3.293z"/></svg>'},60249:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 9C14.1046 9 15 8.10457 15 7C15 5.89543 14.1046 5 13 5C11.8954 5 11 5.89543 11 7C11 8.10457 11.8954 9 13 9Z"/>\n  <path d="M13 15C14.1046 15 15 14.1046 15 13C15 11.8954 14.1046 11 13 11C11.8954 11 11 11.8954 11 13C11 14.1046 11.8954 15 13 15Z"/>\n  <path d="M15 19C15 20.1046 14.1046 21 13 21C11.8954 21 11 20.1046 11 19C11 17.8954 11.8954 17 13 17C14.1046 17 15 17.8954 15 19Z"/>\n</svg>\n'},4103:e=>{e.exports='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg">\n  <path stroke-width="0" d="M7 5L3.366 8.634A.8.8 0 012 8.07V1.93a.8.8 0 011.366-.565L7 5z"/>\n</svg>\n'},94012:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.8801 6.95769L5.6801 5H4V11H12V6.95769H6.8801ZM12.8425 6.96C12.8423 6.96029 12.8363 6.96 12.8254 6.95824C12.8373 6.95882 12.8428 6.9597 12.8425 6.96ZM6.8 3L8 4.95769H12.8C13.46 4.95769 14 5.2125 14 5.9V11.75C14 12.4375 13.46 13 12.8 13H3.2C2.54 13 2 12.4375 2 11.75V4.25C2 3.5625 2.54 3 3.2 3H6.8Z"/>\n</svg>\n'},27139:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.00071 4.21203C2.00586 3.89221 2.13395 3.58693 2.35788 3.36075C2.58182 3.13457 2.88406 3.0052 3.20071 3H6.80071L8.00072 5H13.0007C13.5007 5 14.0007 5.5 14.0007 6L14.0007 11.7872C13.9956 12.1071 13.8675 12.4123 13.6435 12.6385C13.4196 12.8647 13.1174 12.9941 12.8007 12.9993H3.20071C3.04162 13.0049 2.88308 12.9774 2.73497 12.9185C2.58685 12.8596 2.45232 12.7705 2.33976 12.6568C2.22719 12.5431 2.139 12.4073 2.08067 12.2577C2.02234 12.1081 1.99513 11.9479 2.00071 11.7872V8H2V7H2.00071V4.21203ZM3.00071 8V11.8046L3.00011 11.822C2.99924 11.847 3.0035 11.8717 3.01236 11.8944C3.02122 11.9171 3.03435 11.9371 3.05038 11.9533C3.06639 11.9694 3.08492 11.9815 3.10455 11.9893C3.12415 11.9971 3.14478 12.0006 3.16526 11.9999L3.18298 11.9993H12.7891C12.8414 11.9972 12.893 11.9753 12.9329 11.935C12.9733 11.8942 12.9985 11.8376 13.0007 11.7761L13.0007 8H3.00071ZM13.0007 7H3.00071V4.22318C3.00294 4.16171 3.02812 4.10511 3.06851 4.06432C3.10845 4.02398 3.16001 4.00208 3.21233 4H6.24661L7.50072 6H12.8007C12.9112 6 13.0007 6.08796 13.0007 6.19842V7Z"/>\n  <path fill-rule="evenodd" d="M2.99938 11.822L2.99998 11.8046L2.99938 8H12.8C12.9104 8 13 8.08938 13 8.19983C13 8.87896 13 11.0937 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8922 11.9753 12.8407 11.9972 12.7884 11.9993H3.18225L3.16453 11.9999C3.14404 12.0006 3.12342 11.9971 3.10382 11.9893C3.08419 11.9815 3.06565 11.9694 3.04965 11.9533C3.03362 11.9371 3.02049 11.9171 3.01163 11.8944C3.00276 11.8717 2.99851 11.847 2.99938 11.822Z" fill-opacity="0.1"/>\n</svg>\n'},64750:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35717 3.36075C2.13323 3.58693 2.00515 3.89221 2 4.21203V11.7872C1.99441 11.9479 2.02163 12.1081 2.07996 12.2577C2.13828 12.4073 2.22648 12.5431 2.33904 12.6568C2.4516 12.7705 2.58613 12.8596 2.73425 12.9185C2.88237 12.9774 3.04091 13.0049 3.2 12.9993H12.8C13.1167 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H8L6.8 3H3.2C2.88334 3.0052 2.5811 3.13457 2.35717 3.36075ZM2.99939 11.822L3 11.8046V4.22318C3.00223 4.16171 3.02741 4.10511 3.06779 4.06432C3.10773 4.02398 3.15929 4.00208 3.21161 4H6.24589L7.5 6H12.8C12.9105 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8923 11.9753 12.8407 11.9972 12.7884 11.9993H3.18227L3.16455 11.9999C3.14406 12.0006 3.12343 11.9971 3.10383 11.9893C3.08421 11.9815 3.06567 11.9694 3.04966 11.9533C3.03364 11.9371 3.02051 11.9171 3.01165 11.8944C3.00278 11.8717 2.99853 11.847 2.99939 11.822Z"/>\n  <path fill-rule="evenodd" d="M2.99939 11.822L3 11.8046V4.22318C3.00223 4.16171 3.02741 4.10511 3.06779 4.06432C3.10773 4.02398 3.15929 4.00208 3.21161 4H6.24589L7.5 6H12.8C12.9105 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8923 11.9753 12.8407 11.9972 12.7884 11.9993H3.18227L3.16455 11.9999C3.14406 12.0006 3.12343 11.9971 3.10383 11.9893C3.08421 11.9815 3.06567 11.9694 3.04967 11.9533C3.03364 11.9371 3.02051 11.9171 3.01165 11.8944C3.00278 11.8717 2.99853 11.847 2.99939 11.822Z" fill-opacity="0.1"/>\n</svg>\n'},16441:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10 10H12V12H10V10ZM15 10H13V12H15V10ZM15 13H13V15H15V13ZM12 13H10V15H12V13Z"/>\n  <path fill-rule="evenodd" d="M2.35788 3.36075C2.13395 3.58693 2.00586 3.89221 2.00071 4.21203V7H2V8H2.00071V11.7872C1.99513 11.9479 2.02234 12.1081 2.08067 12.2577C2.139 12.4073 2.22719 12.5431 2.33976 12.6568C2.45232 12.7705 2.58685 12.8596 2.73497 12.9185C2.88308 12.9774 3.04162 13.0049 3.20071 12.9993H9V11.9993H3.18298L3.16526 11.9999C3.14478 12.0006 3.12415 11.9971 3.10455 11.9893C3.08492 11.9815 3.06639 11.9694 3.05038 11.9533C3.03435 11.9371 3.02122 11.9171 3.01236 11.8944C3.0035 11.8717 2.99924 11.847 3.00011 11.822L3.00071 11.8046V8H13.0007V9H14.0007L14.0007 6C14.0007 5.5 13.5007 5 13.0007 5H8.00072L6.80071 3H3.20071C2.88406 3.0052 2.58182 3.13457 2.35788 3.36075ZM3.00071 7H13.0007V6.19842C13.0007 6.08796 12.9112 6 12.8007 6H7.50072L6.24661 4H3.21233C3.16001 4.00208 3.10845 4.02398 3.06851 4.06432C3.02812 4.10511 3.00294 4.16171 3.00071 4.22318V7Z"/>\n  <path fill-rule="evenodd" d="M2.99998 11.8046L2.99938 11.822C2.99851 11.847 3.00276 11.8717 3.01163 11.8944C3.02049 11.9171 3.03362 11.9371 3.04965 11.9533C3.06565 11.9694 3.08419 11.9815 3.10382 11.9893C3.12342 11.9971 3.14404 12.0006 3.16453 11.9999L3.18225 11.9993H9V9H13V8.19983C13 8.08938 12.9104 8 12.8 8H2.99938L2.99998 11.8046Z" fill-opacity="0.1"/>\n</svg>\n'},31102:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10 10H12V12H10V10ZM15 10H13V12H15V10ZM15 13H13V15H15V13ZM12 13H10V15H12V13Z"/>\n  <path fill-rule="evenodd" d="M2 4.21203C2.00515 3.89221 2.13323 3.58693 2.35717 3.36075C2.5811 3.13457 2.88334 3.0052 3.2 3H6.8L8 5H13C13.5 5 14 5.5 14 6L14 9H13L13 6.19842C13 6.08796 12.9105 6 12.8 6H7.5L6.24589 4H3.21161C3.15929 4.00208 3.10773 4.02398 3.06779 4.06432C3.02741 4.10511 3.00223 4.16171 3 4.22318V11.8046L2.99939 11.822C2.99853 11.847 3.00278 11.8717 3.01165 11.8944C3.02051 11.9171 3.03364 11.9371 3.04966 11.9533C3.06567 11.9694 3.08421 11.9815 3.10383 11.9893C3.12343 11.9971 3.14406 12.0006 3.16455 11.9999L3.18227 11.9993H9V12.9993H3.2C3.04091 13.0049 2.88237 12.9774 2.73425 12.9185C2.58613 12.8596 2.4516 12.7705 2.33904 12.6568C2.22648 12.5431 2.13828 12.4073 2.07996 12.2577C2.02163 12.1081 1.99441 11.9479 2 11.7872V4.21203Z" />\n  <path fill-rule="evenodd" d="M3 11.8046L2.99939 11.822C2.99853 11.847 3.00278 11.8717 3.01165 11.8944C3.02051 11.9171 3.03364 11.9371 3.04967 11.9533C3.06567 11.9694 3.08421 11.9815 3.10383 11.9893C3.12343 11.9971 3.14406 12.0006 3.16455 11.9999L3.18227 11.9993H9V9H13L13 6.19842C13 6.08796 12.9105 6 12.8 6H7.5L6.24589 4H3.21161C3.15929 4.00208 3.10773 4.02398 3.06779 4.06432C3.02741 4.10511 3.00223 4.16171 3 4.22318V11.8046Z" fill-opacity="0.1"/>\n</svg>\n'},47802:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <rect x="6" y="17" width="15" height="4" rx="1"/>\n  <rect x="15" y="10" width="2" height="8"/>\n  <circle cx="16" cy="9" r="4"/>\n  <rect x="7" y="16" width="5" height="4" rx="0.5"/>\n</svg>\n'},48082:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <rect x="2" y="10" width="12" height="4" rx="1" />\n  <rect x="9" y="6" width="2" height="5" />\n  <circle cx="10" cy="4" r="3" />\n  <rect x="3" y="9" width="3" height="2" rx="0.5" />\n</svg>\n'},82418:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13.1429 11H2.85714V12H13.1429V11ZM2.85714 10C2.38376 10 2 10.4477 2 11V12C2 12.5523 2.38376 13 2.85714 13H13.1429C13.6162 13 14 12.5523 14 12V11C14 10.4477 13.6162 10 13.1429 10H2.85714Z"/>\n  <path fill-rule="evenodd" d="M10.5 2.80208C9.56227 2.80208 8.80208 3.56227 8.80208 4.5C8.80208 5.43773 9.56227 6.19792 10.5 6.19792C11.4377 6.19792 12.1979 5.43773 12.1979 4.5C12.1979 3.56227 11.4377 2.80208 10.5 2.80208ZM7.95312 4.5C7.95312 3.0934 9.0934 1.95312 10.5 1.95312C11.9066 1.95312 13.0469 3.0934 13.0469 4.5C13.0469 5.9066 11.9066 7.04688 10.5 7.04688C9.0934 7.04688 7.95312 5.9066 7.95312 4.5Z"/>\n  <rect x="4" y="9" width="3" height="2" rx="0.5"/>\n  <rect x="10" y="7" width="1" height="4"/>\n</svg>\n'},72067:e=>{e.exports='<svg width="84" height="84" viewBox="0 0 84 84" xmlns="http://www.w3.org/2000/svg">\n\n  <path d="M42.2833 9.02699L42 8.97252L41.7168 9.02699L16.5168 13.8731L15.3 14.1071V15.3462V49.2692V49.5802L15.4237 49.8656C20.1281 60.7219 28.8324 69.0402 41.3684 74.8605L42.0004 75.154L42.6324 74.8602C55.1577 69.0377 63.8559 60.7194 68.5592 49.8656L68.6827 49.5806L68.6828 49.27L68.7001 15.3469L68.7007 14.1073L67.4833 13.8731L42.2833 9.02699Z" opacity="var(--shieldOpacity)" />\n  <path fill-opacity="0.1" d="M42 73.5C55.65 67.2 63 58.8 67.2 49.35V15.3398L42 10.5V73.5Z"/>\n  <path d="M42.0001 16.8L23.1001 19.95V48.3C26.4958 56.6664 32.7958 62.6451 42.0001 67.2C51.1918 62.6388 57.4918 56.6664 60.8875 48.3L60.9001 19.95L42.0001 16.8Z" fill-opacity="var(--shieldInnerOpacity)"/>\n  <path fill-rule="evenodd" fill-opacity="0.8" d="M42 7.44503L70.2013 12.8683L70.1825 49.892L69.9355 50.462C65.0597 61.7138 56.0577 70.2735 43.2647 76.2204L42.0008 76.8079L40.7367 76.221C27.933 70.2764 18.9244 61.7167 14.0474 50.462L13.8 49.8913V12.8681L42 7.44503ZM16.8 49.2692V15.3462L42 10.5L67.2001 15.3462L67.1828 49.2692C62.652 59.725 54.2577 67.8019 42 73.5C29.7318 67.804 21.3318 59.7271 16.8 49.2692Z" />\n\n</svg>\n'},19458:e=>{e.exports='<svg viewBox="0 0 110 90" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid slice">\n  <g>\n    <path fill="transparent" d="M0 0h110v90h-110z" class="folderoutline"/>\n    <polygon fill="url(#bookmark-graphic-gradient)" class="bookmark-shadow" points="66 30 65 62 55 57 44 64 60 90 98 90" />\n    <g>\n      <use class="bookmark-shape" xlink:href="#sd-bookmark"/>\n      <use fill="url(#sd-bookmark-gradient)" fill-opacity="0.1" xlink:href="#sd-bookmark"/>\n    </g>\n  </g>\n</svg>\n'},23914:e=>{e.exports='<svg class="first-new-note-icon" width="46" height="46">\n  <path class="new-note-border-color" d="M37 46H1a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H2v34h34V29a1 1 0 1 1 2 0v16a1 1 0 0 1-1 1z"/>\n  <path class="new-note-wood-tip" d="M21.707 33.707L20.958 25l-8.665-.707-.754 6.246 3.922 3.922z"/>\n  <path class="new-note-main-color" d="M31.293 5.293l-19 19 5.457 5.457 18.906-19.094z"/>\n  <path class="new-note-secondary-color" d="M17 29l19-19 4.708 4.707-19 19z"/>\n  <path class="new-note-darker-top-eraser" d="M40.7,14.7l5-5c0.4-0.4,0.4-1,0-1.4L42.4,5l-5.8,5.6L40.7,14.7z"/>\n  <path class="new-note-dark-top-eraser" d="M45.707 8.293l-8-8a1 1 0 0 0-1.414 0l-5 5 9.414 9.414 5-5a1 1 0 0 0 0-1.414z"/>\n  <path class="new-note-dark-top-border" d="M30.586 6L32 4.586 41.414 14 40 15.414z"/>\n  <path class="new-note-led-tip" d="M15.5,34.5l-3.9-3.9L11,35L15.5,34.5z"/>\n</svg>'},5231:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<rect x="12" y="8.5" width="2" height="5" rx="1" ry="1"\n\t  style="transform-origin: center; transform: var(--timeHourRotation, rotate(130deg))"\n\t/>\n\t<rect x="12" y="8" width="2" height="6" rx="1" ry="1"\n\t  style="transform-origin: center; transform: var(--timeMinuteRotation, rotate(0deg))"\n\t/>\n\t<path fill-rule="evenodd" d="M5 13C5 11.1401 5 10.2101 5.20445 9.44709C5.75925 7.37653 7.37653 5.75925 9.44709 5.20445C10.2101 5 11.1401 5 13 5C14.8599 5 15.7899 5 16.5529 5.20445C18.6235 5.75925 20.2408 7.37653 20.7956 9.44709C21 10.2101 21 11.1401 21 13C21 14.8599 21 15.7899 20.7956 16.5529C20.2408 18.6235 18.6235 20.2408 16.5529 20.7956C15.7899 21 14.8599 21 13 21C11.1401 21 10.2101 21 9.44709 20.7956C7.37653 20.2408 5.75925 18.6235 5.20445 16.5529C5 15.7899 5 14.8599 5 13ZM13 19C11.0113 19 10.4093 18.9828 9.96472 18.8637C8.58436 18.4938 7.50617 17.4156 7.1363 16.0353C7.01718 15.5907 7 14.9887 7 13C7 11.0113 7.01718 10.4093 7.1363 9.96472C7.50617 8.58436 8.58436 7.50617 9.96472 7.1363C10.4093 7.01718 11.0113 7 13 7C14.9887 7 15.5907 7.01718 16.0353 7.1363C17.4156 7.50617 18.4938 8.58436 18.8637 9.96472C18.9828 10.4093 19 11.0113 19 13C19 14.9887 18.9828 15.5907 18.8637 16.0353C18.4938 17.4156 17.4156 18.4938 16.0353 18.8637C15.5907 18.9828 14.9887 19 13 19Z"/>\n</svg>\n'},66089:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 5.5C7 5.22386 7.22386 5 7.5 5H8.5C8.77614 5 9 5.22386 9 5.5V8.70711L10.2289 9.70014C10.4366 9.86798 10.4758 10.1694 10.3179 10.3847L9.80837 11.0795C9.6402 11.3088 9.31488 11.3519 9.09282 11.1743L7 9.5V5.5Z"/>\n  <path fill-rule="evenodd" d="M1 8C1 6.13872 1 5.20808 1.24472 4.45492C1.73931 2.93273 2.93273 1.73931 4.45492 1.24472C5.20808 1 6.13872 1 8 1C9.86128 1 10.7919 1 11.5451 1.24472C13.0673 1.73931 14.2607 2.93273 14.7553 4.45492C15 5.20808 15 6.13872 15 8C15 9.86128 15 10.7919 14.7553 11.5451C14.2607 13.0673 13.0673 14.2607 11.5451 14.7553C10.7919 15 9.86128 15 8 15C6.13872 15 5.20808 15 4.45492 14.7553C2.93273 14.2607 1.73931 13.0673 1.24472 11.5451C1 10.7919 1 9.86128 1 8ZM8 13C5.98305 13 5.44891 12.9753 5.07295 12.8532C4.15964 12.5564 3.44358 11.8404 3.14683 10.9271C3.02467 10.5511 3 10.0169 3 8C3 5.98305 3.02467 5.44891 3.14683 5.07295C3.44358 4.15964 4.15964 3.44358 5.07295 3.14683C5.44891 3.02467 5.98305 3 8 3C10.0169 3 10.5511 3.02467 10.9271 3.14683C11.8404 3.44358 12.5564 4.15964 12.8532 5.07295C12.9753 5.44891 13 5.98305 13 8C13 10.0169 12.9753 10.5511 12.8532 10.9271C12.5564 11.8404 11.8404 12.5564 10.9271 12.8532C10.5511 12.9753 10.0169 13 8 13Z"/>\n</svg>\n'},3335:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 2h4a4 4 0 014 4v4a4 4 0 01-4 4H6a4 4 0 01-4-4V6a4 4 0 014-4zM1 6a5 5 0 015-5h4a5 5 0 015 5v4a5 5 0 01-5 5H6a5 5 0 01-5-5V6zm6-2h1v4h2v1H7V4z"/>\n</svg>\n'},91273:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M6 1a5 5 0 00-5 5v4a5 5 0 005 5h4a5 5 0 005-5V6a5 5 0 00-5-5H6zm1 3h1v4h2v1H7V4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M10 2H6a4 4 0 00-4 4v4a4 4 0 004 4h4a4 4 0 004-4V6a4 4 0 00-4-4zM6 1a5 5 0 00-5 5v4a5 5 0 005 5h4a5 5 0 005-5V6a5 5 0 00-5-5H6z"/>\n</svg>\n'},89237:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 285">\n  <path d="M123 280.7c-.9-.1-1.6-.3-1.4-1.2 3.2-13.9 4.9-28.3 9.7-41.8.7-2 1.8-3.9 2.8-6-.5-.4-.9-.8-1-.8-34.6 20.6-69.8 21-105.5 4.4C16 229.9 6.6 221 4 208c-3-14.9-4.9-30.2.4-45.1 6-16.7 18.7-26.9 34.7-33.4 18.6-7.6 37.9-10.2 57.9-8 .5.1 1.1 0 1.4-.3 12.6-9.5 26.9-16.1 40.6-23.7 8.6-4.8 15.9-11.5 24.5-16.3.3-.2.6-.5.7-.8 1.8-5.2 6.3-7.3 10.7-9.3 14.6-6.5 29.4-12.8 44-19.4 23-10.4 44.6-23 64.6-38.4 4.3-3.3 9-6.3 13.5-9.3.8.2 1.1.7 1.3 1.6-4.1 2.8-8.3 5.7-12.5 8.6-12.7 8.9-24.9 18.4-38.6 25.7-22.8 12.2-46.6 22.4-70.3 32.7-4.5 2-9.1 3.9-11.1 9.1-.7 1.9-3.1 2.4-4.7 3.6-17 12.8-36.5 21.6-54.5 32.8-7.7 4.8-15 10.3-21.1 17-2.8 3.1-2.3 5.4 1.7 6.7 4.2 1.3 8.3 1.4 12.3-.9 11.3-6.4 23.4-10.5 36-13.2 2.3-.5 4.6-1.5 6.8-2.5 5.9-2.5 11.9-3.5 18.3-3.3 5.3.2 10.6.5 15.9-.2.7-.1 1.4 0 1.5.9.1.9-.4 1.1-1.2 1.2-1.5.1-2.9.5-4.4.5-5.6.1-11.1 0-16.6 0-1.5 7-3.3 15.1 3.5 20.9 4.2 3.6 8.2 7.5 12.8 11.6-.2-8.1 5.3-12.3 10.7-16.6-2.4-3.1-6-4-9.3-2.8-3.1 1.1-6.2 2-9.3 3-.2.1-.5-.1-.7-.1-.6-1.2 0-1.7 1-2.1 3.5-1.2 7-2.3 10.5-3.6 5.4-2 6.7-5.5 4.2-11.2.7-1 1.9-1.2 3-.9 1.5.3 2.2 1.5 2.4 2.9.6 3.6 1.2 7.2 1.8 11.2 2.1-2 3.3-4 4-6.2 1.2-3.9 2.4-7.9 2.3-12 0-.7.3-1.4 1.3-1.4.8 0 1 .7.9 1.3-.7 7.8-1.8 15.3-8.1 21-2.5 2.3-4.8 4.7-7.4 6.7-4.2 3.2-5 8-5.7 12.7-.9 7.1 3.4 12.7 12 16 1.2.5 2.4.9 3 2.4 4.4-1.9 9.2-3 11.8-7.9 2.2-4.2 6.5-6.3 10.4-8.7 5.3-3.4 10.9-6.3 15.9-10.2 2.6-2 5.6-3.2 8.6-4.5 13-5.4 24.5-13 33.9-23.4 5.9-6.5 9.7-14.7 13.4-22.7 3.1-6.9 7-13 14.6-16.3.4.1.7.7.9 1.4-.3.3-.6.6-1 .8-5.8 3.1-9.3 8-12 13.8-2.8 6.2-6.2 12.1-9.7 18-6.3 10.7-16.4 17.1-26.3 23.7-.5.4-1.1.7-1.6.9-.3 4.1.1 7.8 2.2 11.5 2 3.4 1.5 7.2-1 10.3-2.3 2.8-5.5 2.5-8.8 2-5.5-.8-9.9-4.4-14.9-6.4-4.3-1.7-8-2-10.9 2.1 5 6.1 5.5 10 1.9 14.4-3.4 4.1-7.8 3.8-17.1-1.3-4.1 2.2-8.3 4.2-12.9 5.1-9.2 2-17.4-4.2-15.7-13.3 1.5-7.7-2.8-11.1-7.3-15-4.9-4.3-10.5-8.2-10.9-15.6-.1-3.1.5-6.2.8-9.4.1-.6.1-1.2.2-2.2-8.4 1.5-15.7 6.1-24.4 7.1 19.2 12 32 27.3 29.6 51.1 3.7.5 7.2 1 10.8 1.6-.1 1.9-.3 3.6-.4 5.4 5.7 1.9 11.6 2.8 17.5 3.5 10.9 1.5 22 2.3 33 2.4 15.2.1 29.9-2.8 44-8.4 4.2-1.6 8.4-3.5 12.5-5.3 1.1-.4 2.1-.8 3 .3-36 19.5-73.7 17.3-112 9-1.5 2-1.9 4.5-2.5 7.2 40 7.2 79.3 8.6 117.1-10.2.9 1.1 0 1.8-1.1 2.4-8.4 4.7-17.5 7.3-26.7 9.8-18.6 5-37.5 5.5-56.6 4.2-10.6-.7-21-2.1-31.4-4h-.7c-.6 1.3-1.1 2.5-1.7 3.7-3.7-.5-7.2-1-10.8-1.5-.4.7-.7 1.2-1.2 2 1.9.6 3.7 1.2 5.4 1.8 2.3.9 3.2 2.7 2 4.9-3.4 6.4-6.8 12.8-10.4 19-1.3 2.3-3.2 4.2-4.9 6.4-1.5-.6-3.1-1.1-4.7-1.8-6.3 14.7-7.3 31-13.1 45.8 3.7-16.1 5.7-32.6 12-48.2 1.6.6 3.1 1.2 4.7 1.8-.2-1.2 0-2.3-1-3.1-.8-.6-1.6-1.3-2.5-2 .7-1.6 1.2-3.2 2-4.6.4-.7.9-2 1.9-1.7 1.8.5 3.3 1.6 4.1 3.4.2.5.3 1.1.6 2.2 3.4-6.4 6.6-12.3 9.7-18.4.6-1.1-.4-1.8-1.5-2.2-4.5-1.4-9-3.3-13.7-3.9-4.2 3.1-4.8 9.1-1 11.3-.9 1.4-1.7 2.8-2.7 4.3 1.1.6 2.1 1.1 3.4 1.7-1.3 2.3-2.6 4.6-3.9 7-1.3-.7-2.3-1.4-3.4-2-1.2 1.1-1.2 1.1 1.9 5.2-8.1 15.4-8.3 32.9-13.1 49.3zM92.4 125.6c-10.7-1.2-21-.7-31.2 1.2-14.7 2.7-28.3 7.9-39.5 18.3-13.2 12.2-15 28.9-4.6 42.4 7.5 9.6 17.6 15.4 28.9 19.4 17.5 6.2 35.5 7.3 53.7 4.2 14.8-2.4 28.5-7.7 40-17.8 10.8-9.4 14.9-22.8 10.1-34.7-5-12.5-15.3-19.6-26.9-25.1-.5-.2-1.3.1-1.9.2-7.5 2.3-14.5 5.6-21.4 9.3-4.8 2.6-9.8 1.9-14.5 0-3.7-1.5-4.5-5.4-2-8.4 2.7-3.2 5.8-6 9.3-9zm57.7 76.8c-1.8-.9-4.3.5-5.1-1.6-.9-2.7-1.9-5.5.6-8.2 1.8-1.9 3.3-4.3 4.6-6.6 1.4-2.5 1.9-5.9 6.1-3.7.3-9.6.1-18.7-5.4-26.8 2.8 6.4 4 12.9 2.3 19.8-3.1 12.8-11.8 21.2-22.7 27.4-19.7 11.1-41 14.1-63.2 11.4-17.2-2.1-33.1-7.4-46.4-19.2-11.9-10.5-15.8-25-10-38.3 1.1-2.6 2.8-5.1 4.6-8.4-4.5 5.2-7.4 10.4-9.5 16.1-3.4 9.3-2.4 18.9-2 28.4.3 5.6.3 11.3 2.2 16.7 3.9 11 11.6 18.7 21.7 23.8 25 12.6 51.3 14.7 78.3 7.6 9.2-2.4 17.8-6.5 23.9-11 3.2-5.5 5.4-9.4 7.7-13.3-1-.4-1.8-1-1.8-2-.2-4 .2-7.8 2.6-11.2.7-.9 1.5-1.8 2.9-1.4 2.5.7 5 1.4 7.6 2.2.4-.8.7-1.2 1-1.7zm72.3-46.3c.7.2 1.5.6 2.3.8 5.4 1.3 9.6 5.4 15.2 6.5 5.4 1.1 8.7-.6 8.8-5.2.1-4.5-2.3-8-5.1-11.2-.8-.9-2-1.8-3.6-1.2-6.5 2.3-12.4 5.8-17.6 10.3zm-55.5 29.4c-4.6-.6-8.9-1.2-13.2-1.8-1.4 4-4.2 7-6.6 10.4 5.1.7 10 1.3 14.9 2 1.6-3.6 3.2-7 4.9-10.6zm33.9-12.6c5.6 4.4 11.5 4.8 14 1.1 2.8-4.2 1.6-8.8-3.2-11.7-4.4 2.6-8.8 5.4-10.8 10.6zm-39.4 25c-5.2-.7-10.3-1.4-15.6-2.2.4 1.5.7 2.8.9 4.1 5 .7 9.8 1.3 14.7 2v-3.9zm11.1-31.6c-.9 3.9.8 7.3 4.3 9.8 3 2.2 6.2 2.2 10.4.9-6.6-1.9-11.2-5.5-14.7-10.7zm6.5-31.5c1.9 1.2 3.6 2.3 6.2 3.8-1.4-3.8-1.8-7.1-2.3-10.5-1.4 4.4-1.4 4.4-3.9 6.7z"/>\n  <path d="M80.9 151.5c2.8 0 6.7.8 10.2 3 5.4 3.4 5.6 8.8.3 12.4-6.5 4.4-17.8 4.2-24.1-.4-4.5-3.3-4.5-8.1 0-11.4 3.1-2.4 7.3-3.6 13.6-3.6zM79.4 166c3.1 0 5.5-.6 7.4-1.8 3.4-2.1 3.6-5.4.5-7.6-4.1-3-11.6-2.9-15.7.1-2.8 2.1-2.8 5.2.1 7.2 2.4 1.5 5 2.1 7.7 2.1zm-25.7 2.1c-1.2-.1-2.7-.3-2.6-1.7 0-1.5 1.6-1.7 2.8-1.6 1.2 0 2.8.1 2.7 1.8-.2 1.5-1.7 1.4-2.9 1.5zm1.9-12.5c-1.5 0-2.9-.1-3-1.6 0-1.6 1.5-1.7 2.7-1.7 1.2 0 2.8.2 2.7 1.7.1 1.6-1.5 1.5-2.4 1.6zm11.4 22c-1.4 0-3 0-3-1.6 0-1.4 1.5-1.6 2.7-1.6 1.2 0 2.8 0 2.9 1.5.1 1.7-1.5 1.7-2.6 1.7z"/>\n</svg>\n'},83159:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<circle cx="7.5" cy="2.5" r="1.5"/>\n\t<circle cx="7.5" cy="7.5" r="1.5"/>\n\t<circle cx="7.5" cy="12.5" r="1.5"/>\n</svg>\n'},24461:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M11.14 2L9 6h8a7.68 7.68 0 0 0-5.86-4zm-.47 3l1-1.9A6.65 6.65 0 0 1 15 5z" stroke-opacity="0" />\n  <path d="M17.45 7H13l3.92 7a8.15 8.15 0 0 0 .52-7zm-.66 4.71L14.71 8h2a7.18 7.18 0 0 1 .06 3.71zM13.69 11L10 18h.08A7.37 7.37 0 0 0 16 15zm-1.91 5.77l2-3.71 1.06 1.83a6.38 6.38 0 0 1-3.07 1.88zM3 14a7.68 7.68 0 0 0 5.86 4L11 14zm5.32 2.9A6.66 6.66 0 0 1 5 15h4.33zM5.41 10.17L3.08 6a8.12 8.12 0 0 0-.52 7H7zM3.27 12a7.14 7.14 0 0 1-.06-3.71L5.29 12zM9.92 2A7.37 7.37 0 0 0 4 5l2.31 4L10 2zM6.27 6.93L5.21 5.1a6.38 6.38 0 0 1 3-1.88z" stroke-opacity="0" />\n</svg>\n'},69710:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 34">\n  <path d="M40.5 32.5H3.7c-1.1 0-2-.9-2-2v-23c0-1.1.9-2 2-2h36.8c1.1 0 2 .9 2 2v23c0 1.1-.9 2-2 2z" fill-opacity="0" />\n  <circle cx="20" cy="20" r="9.5" fill="none" stroke-width="1.1" />\n  <circle cx="20" cy="20" r="5.5" fill="none" stroke-width="1.1" />\n  <path d="M37.5 8.5h-4c-1.1 0-2 .9-2 2s.9 2 2 2h4c1.1 0 2-.9 2-2s-.9-2-2-2z" />\n  <circle cx="7" cy="10" r="1.5" />\n  <path d="M11 1h5c2 0 3 1 3 3v1H8V4c0-2 1-3 3-3z" />\n</svg>\n'},61065:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M13.89 6.23l-2.79.93a4.16 4.16 0 0 1 0 5.22l3 1.18a6.94 6.94 0 0 0-.12-7.34z" fill-opacity="0" />\n  <path d="M15 13.94a7.93 7.93 0 0 0-.09-8L17.66 5l-.32-1-3.07 1-1 .34-3 1-1.23.41-4.11 1.41-1.25.42L1 9.46l2.53 1 1.16.46 4.39 1.76 1.16.46 3.15 1.26 1 .38L17.31 16l.37-.93zM4.5 9.76a3.2 3.2 0 0 1 0-.4l5.58-1.86a3.23 3.23 0 0 1 0 4.5zm6.56 2.62a4.16 4.16 0 0 0 0-5.22l2.79-.93a6.94 6.94 0 0 1 .15 7.34z" stroke-opacity="0" />\n</svg>\n'},9428:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path stroke-opacity="0" d="M18 5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zM4.29 13.12H3V6.9h1.29zm5.41-.4a2.78 2.78 0 0 1-1.86.56 3 3 0 0 1-1.93-.55 1.84 1.84 0 0 1-.7-1.53h1.23a1.26 1.26 0 0 0 .24.64 1.38 1.38 0 0 0 1.11.38 2.39 2.39 0 0 0 .76-.1.72.72 0 0 0 .56-.72.53.53 0 0 0-.27-.48 3 3 0 0 0-.84-.29l-.67-.15a4.19 4.19 0 0 1-1.4-.48 1.52 1.52 0 0 1-.63-1.34 1.79 1.79 0 0 1 .61-1.39 2.62 2.62 0 0 1 1.81-.55 2.77 2.77 0 0 1 1.7.52 1.85 1.85 0 0 1 .74 1.51H8.91a.89.89 0 0 0-.5-.8 1.72 1.72 0 0 0-.77-.16 1.47 1.47 0 0 0-.82.2.64.64 0 0 0-.31.57.53.53 0 0 0 .3.5 3.76 3.76 0 0 0 .83.26l1.09.26A2.77 2.77 0 0 1 9.8 10a1.52 1.52 0 0 1 .56 1.27 1.78 1.78 0 0 1-.66 1.45zm6.36-.15a2.71 2.71 0 0 1-2 .73 2.71 2.71 0 0 1-2-.73A3.36 3.36 0 0 1 11 10a3.29 3.29 0 0 1 1-2.57 2.71 2.71 0 0 1 2-.73 2.71 2.71 0 0 1 2 .73A3.3 3.3 0 0 1 17 10a3.36 3.36 0 0 1-.94 2.57z"/>\n  <path stroke-opacity="0" d="M14 7.81a1.5 1.5 0 0 0-1.23.57 2.52 2.52 0 0 0-.44 1.62 2.52 2.52 0 0 0 .46 1.62 1.5 1.5 0 0 0 1.23.57 1.48 1.48 0 0 0 1.23-.57A2.55 2.55 0 0 0 15.7 10a2.55 2.55 0 0 0-.45-1.62A1.48 1.48 0 0 0 14 7.81z"/>\n</svg>\n'},94220:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <circle cx="10" cy="10" r="8" fill="none" stroke-width="1.1" />\n  <circle cx="10" cy="10" r="1.5" fill="none" />\n  <path d="M11.48 10.483l3.537 3.535-.955.955-3.535-3.536zM15.495 1.494l3.02 3.02-1.5 1.498-3.02-3.02z"/>\n</svg>\n'},30689:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<g style="display: var(--displayImagesCached)">\n\t\t<path opacity="0.3" d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.4167L12.4431 15.9167Z"/>\n\t\t<path d="M18 23C20.7614 23 23 20.7614 23 18C23 15.2386 20.7614 13 18 13C15.2386 13 13 15.2386 13 18C13 20.7614 15.2386 23 18 23Z" fill="var(--colorWarningBg)" />\n\t\t<path d="M17 16H18V18H20V19H17V16Z" fill="var(--colorWarningFg)" />\n\t</g>\n\t<g style="display: var(--displayImagesAll)">\n\t\t<path d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.4167L12.4431 15.9167Z"/>\n\t</g>\n\t<g style="display: var(--displayImagesNever)">\n\t\t<path opacity="0.3" d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.5L12.4431 15.9167Z"/>\n\t\t<path d="M18 23C20.7614 23 23 20.7614 23 18C23 15.2386 20.7614 13 18 13C15.2386 13 13 15.2386 13 18C13 20.7614 15.2386 23 18 23Z" fill="var(--colorErrorBg)" />\n\t\t<path d="M21 17H15V19H21V17Z" fill="var(--colorErrorFg)" />\n\t</g>\n\t<g style="display: var(--displayAnimationNever)">\n\t\t<path d="M9 13C11.7614 13 14 10.7614 14 8C14 5.23858 11.7614 3 9 3C6.23858 3 4 5.23858 4 8C4 10.7614 6.23858 13 9 13Z" fill="var(--colorErrorBg)" />\n\t\t<g>\n\t\t\t<path d="M6.5 5.5H8.375V10.5H6.5V5.5Z" fill="var(--colorErrorFg)" />\n\t\t\t<path d="M9.625 5.5H11.5V10.5H9.625V5.5Z" fill="var(--colorErrorFg)" />\n\t\t</g>\n\t</g>\n\t<g style="display: var(--displayAnimationOnce)">\n\t\t<path d="M9 13C11.7614 13 14 10.7614 14 8C14 5.23858 11.7614 3 9 3C6.23858 3 4 5.23858 4 8C4 10.7614 6.23858 13 9 13Z" fill="var(--colorWarningBg)"/>\n\t\t<path d="M7.75 4.25V11.75L11.5 8L7.75 4.25Z" fill="var(--colorWarningFg)" />\n\t</g>\n</svg>\n'},78823:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g style="display: var(--displayImagesAll)">\n    <path d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n  </g>\n  <g style="display: var(--displayImagesCached)">\n    <path opacity="0.3" d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n    <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" fill="var(--colorWarningBg)" />\n    <path d="M11 10H12V12H14V13H11V10Z" fill="var(--colorWarningFg)"/>\n  </g>\n  <g style="display: var(--displayImagesNever)">\n    <path opacity="0.3" d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n    <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" fill="var(--colorErrorBg)"/>\n    <path d="M14 11H10V13H14V11Z" fill="var(--colorErrorFg)"/>\n  </g>\n  <g style="display: var(--displayAnimationNever)">\n    <path d="M4 8C6.20914 8 8 6.20914 8 4C8 1.79086 6.20914 0 4 0C1.79086 0 0 1.79086 0 4C0 6.20914 1.79086 8 4 8Z" fill="var(--colorErrorBg)"/>\n    <path d="M2 2H3.5V6H2V2Z" fill="var(--colorErrorFg)"/>\n    <path d="M4.5 2H6V6H4.5V2Z" fill="var(--colorErrorFg)"/>\n  </g>\n  <g style="display: var(--displayAnimationOnce)">\n    <circle fill="var(--colorWarningBg)" cx="4" cy="4" r="4"/>\n    <polygon fill="var(--colorWarningFg)" points="3 1 3 7 6 4" />\n  </g>\n</svg>\n'},37032:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 4C0 3.44772 0.447715 3 1 3H15C15.5523 3 16 3.44772 16 4V11C16 11.5523 15.5523 12 15 12H1C0.447715 12 0 11.5523 0 11V4ZM1 8H3V10H1V8ZM3 5H1V7H3V5ZM4 5H6V7H4V5ZM9 5H7V7H9V5ZM10 5H12V7H10V5ZM15 5H13V7H15V5ZM13 8H15V10H13V8ZM12 8H4V10H12V8Z"/>\n</svg>\n'},43448:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M12.004 5.146A.5.5 0 0011.65 5H5v6.65a.5.5 0 00.146.354l7.583 7.582a2 2 0 002.828 0l4.029-4.029a2 2 0 000-2.828l-7.582-7.583zM9.49 11.171a1.691 1.691 0 11-.023-3.381 1.691 1.691 0 01.023 3.381z"/>\n</svg>\n'},51008:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M7.146 1.146A.5.5 0 006.793 1H1v5.793a.5.5 0 00.146.353l7.147 7.147a1 1 0 001.414 0l4.586-4.586a1 1 0 000-1.414L7.146 1.146zM4.93 6.4a1.48 1.48 0 11-.02-2.96 1.48 1.48 0 01.02 2.96z"/>\n</svg>\n'},46038:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4 3h3.586l5 5L8 12.586l-5-5V4a1 1 0 011-1zm3.586-1a1 1 0 01.707.293L14 8l-6 6-5.707-5.707A1 1 0 012 7.586V4a2 2 0 012-2h3.586zM7 6a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>\n'},36186:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 14l2.5-3 2.5 3h-5zM10.5 1l-2.5 3-2.5-3h5zM2 5h12v1h-12zM2 7h12v1h-12zM2 9h12v1h-12z"/></svg>'},79026:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 3l2.5-3 2.5 3h-5zM10 12l-2.5 3-2.5-3h5zM2 4h11v1h-11zM2 7h11v1h-11zM2 10h11v1h-11z"/></svg>'},34167:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.01009 13.0077L4.9503 7.76232C3.62689 5.09401 5.39275 2.5 8.01009 2.5C10.6274 2.5 12.3933 5.09401 11.0699 7.76232L8.01009 13.0077ZM8.01009 1.5C4.63204 1.5 2.39952 4.89687 4.06288 8.22361L4.07009 8.23802L4.0782 8.25194L7.14631 13.5116C7.53219 14.1731 8.48799 14.1731 8.87387 13.5116L11.942 8.25194L11.9501 8.23802L11.9573 8.22361C13.6207 4.89686 11.3881 1.5 8.01009 1.5ZM9.0101 6C9.0101 6.55228 8.56239 7 8.0101 7C7.45782 7 7.0101 6.55228 7.0101 6C7.0101 5.44772 7.45782 5 8.0101 5C8.56239 5 9.0101 5.44772 9.0101 6ZM10.0101 6C10.0101 7.10457 9.11467 8 8.0101 8C6.90553 8 6.0101 7.10457 6.0101 6C6.0101 4.89543 6.90553 4 8.0101 4C9.11467 4 10.0101 4.89543 10.0101 6Z"/>\n</svg>\n'},62469:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-close-glyph dpi-standard">\n    <path fill="#93120F" d="M8 7v-2h1v-2h-2v1h-2v-1h-2v2h1v2h-1v2h2v-1h2v1h2v-2h-1z" />\n    <path fill="#7E0200" d="M5 5h2v2h-2v-2zm-1-1h1v1h-1v-1zm-1-1h1v1h-1v-1zm5 0h1v1h-1v-1zm-1 1h1v1h-1v-1zm-3 3h1v1h-1v-1zm-1 1h1v1h-1v-1zm4-1h1v1h-1v-1zm1 1h1v1h-1v-1z" />\n  </g>\n  <g class="window-close-glyph dpi-high">\n    <polygon fill="#4c0102" points="9 3 8.29 3 6 5.29 3.71 3 3 3 3 3.71 5.29 6 3 8.29 3 9 3.71 9 6 6.71 8.29 9 9 9 9 8.29 6.71 6 9 3.71 9 3" />\n  </g>\n\n</svg>\n'},3141:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-zoom-glyph dpi-standard">\n    <polygon points="9 5 7 5 7 3 5 3 5 5 3 5 3 7 5 7 5 9 7 9 7 7 9 7 9 5" fill="#0a630c"/>\n    <rect x="5" y="2" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="5" y="9" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="9" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n    <rect x="2" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n  </g>\n  <g class="window-zoom-glyph dpi-high">\n    <polygon points="9.5 5.5 6.5 5.5 6.5 2.5 5.5 2.5 5.5 5.5 2.5 5.5 2.5 6.5 5.5 6.5 5.5 9.5 6.5 9.5 6.5 6.5 9.5 6.5 9.5 5.5" fill="#0a630c"/>\n    <rect x="5.5" y="2" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="5.5" y="9.5" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n  </g>\n\n  <g class="window-fullscreen-glyph dpi-standard">\n    <polygon points="9 7.6 4.4 3 8.38 3.1 8.9 3.63" fill="#0a630c"/>\n    <polygon points="3 4.5 7.5 9 3.63 8.9 3.1 8.38" fill="#0a630c"/>\n  </g>\n  <g class="window-fullscreen-glyph dpi-high">\n    <polygon points="3 4.5 7.5 9 3.63 9 3 8.38 3 4.5" fill="#0a630c"/>\n    <polygon points="9 7.5 4.5 3 8.38 3 9 3.63 9 7.5" fill="#0a630c"/>\n  </g>\n\n  <g class="window-restore-glyph dpi-standard">\n    <polygon points="6 10 2 6 6 6 6 10" fill="#0a630c"/>\n    <polygon points="6 2 10 6 6 6 6 2" fill="#0a630c"/>\n  </g>\n  <g class="window-restore-glyph dpi-high">\n    <polygon points="6 1.5 10.5 6 6.50 6 6 5.50 6 1.5" fill="#0a630c"/>\n    <polygon points="6 10.5 1.5 6 5.50 6 6 6.50 6 10.5" fill="#0a630c"/>\n  </g>\n</svg>\n'},91313:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-minimize-glyph dpi-standard">\n    <rect x="3" y="5" width="6" height="2" fill="#965612"/>\n    <rect x="9" y="5" width="1" height="2" fill="#ab6e1c" class="semi" />\n    <rect x="2" y="5" width="1" height="2" fill="#ab6e1c" class="semi"/>\n  </g>\n  <g class="window-minimize-glyph dpi-high">\n    <rect x="2.5" y="5.5" width="7" height="1" fill="#965612"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n  </g>\n\n</svg>\n'},49244:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 3a2 2 0 0 0-2 2v1h14V5a2 2 0 0 0-2-2H3z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M14 12.5V7H2v5.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5zM6.5 8h3a1 1 0 1 1 0 2h-3a1 1 0 0 1 0-2z"/>\n</svg>\n'},83:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" width="242" height="195">\n  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M28.88 71.14a34.2 34.2 0 005.32 67.98h.07a58.8 58.8 0 00101.55 37.37 34.18 34.18 0 0053.24-8 31.7 31.7 0 0031.75-54.11 40.46 40.46 0 00-29.75-59.96A60.07 60.07 0 0078.44 36.44a42.13 42.13 0 00-49.55 34.69z" class="highlight-fill" fill-opacity=".25"/>\n  <path d="M130.5 111v50.5m0 0H173a8 8 0 008-8V145m-50.5 16.5H99" class="highlight-stroke" stroke-width="3"/>\n  <mask id="path-3-inside-1" class="bg-fill">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M94.33 178.47h.03a16.64 16.64 0 005.76-32.25 16.64 16.64 0 00-27-11.5 16.65 16.65 0 00-32.42.06 15.83 15.83 0 00-17.06 10.4 16.64 16.64 0 000 33.3h70.69z"/>\n  </mask>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M94.33 178.47h.03a16.64 16.64 0 005.76-32.25 16.64 16.64 0 00-27-11.5 16.65 16.65 0 00-32.42.06 15.83 15.83 0 00-17.06 10.4 16.64 16.64 0 000 33.3h70.69z" class="bg-fill"/>\n  <path d="M94.33 178.47v-3 3zm5.79-32.25l-2.99.26.17 1.9 1.78.65 1.04-2.81zm-27-11.5l-2.92.68 1.09 4.64 3.71-2.98-1.88-2.34zm-32.42.06l-.72 2.91 2.96.75.69-2.98-2.93-.68zM23.95 145.2l-.06 3 2.47.05.52-2.41-2.93-.64zm-.28 33.28v-3 3zm70.66 3h.03v-6h-.02l-.01 6zm.03 0c10.85 0 19.64-8.8 19.64-19.64h-6c0 7.53-6.1 13.64-13.64 13.64v6zM114 161.83c0-8.46-5.35-15.66-12.84-18.43l-2.08 5.63a13.65 13.65 0 018.92 12.8h6zm-10.9-15.88a19.64 19.64 0 00-19.56-17.9v6c7.13 0 12.98 5.46 13.6 12.43l5.97-.53zm-19.56-17.9c-4.65 0-8.93 1.62-12.3 4.33l3.76 4.68c2.34-1.89 5.3-3.01 8.54-3.01v-6zm-7.5 5.98a19.65 19.65 0 00-19.12-15.13v6c6.45 0 11.86 4.48 13.28 10.5l5.84-1.37zM56.92 118.9c-9.33 0-17.13 6.5-19.14 15.21l5.85 1.35a13.65 13.65 0 0113.29-10.56v-6zm-15.49 12.97c-1.3-.32-2.66-.5-4.06-.5v6c.9 0 1.78.12 2.6.32l1.46-5.82zm-4.06-.5a16.73 16.73 0 00-16.35 13.2l5.86 1.26a10.73 10.73 0 0110.49-8.45v-6zM24 142.2h-.36v6h.25l.11-6zm-.36 0A19.64 19.64 0 004 161.83h6c0-7.53 6.1-13.64 13.64-13.64v-6zM4 161.83c0 10.85 8.8 19.64 19.64 19.64v-6c-7.53 0-13.64-6.1-13.64-13.64H4zm19.64 19.64h.03v-6h-.03v6zm70.7-6H23.66v6h70.66v-6z" class="highlight-fill" mask="url(#path-3-inside-1)"/>\n  <mask id="path-5-inside-2" class="bg-fill">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M227.92 148.22a13.89 13.89 0 004.8-26.92 13.9 13.9 0 00-22.53-9.6 13.9 13.9 0 00-27.06.06 11.46 11.46 0 00-13.98 8.69h-.26a13.89 13.89 0 000 27.77h59.03z"/>\n  </mask>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M227.92 148.22a13.89 13.89 0 004.8-26.92 13.9 13.9 0 00-22.53-9.6 13.9 13.9 0 00-27.06.06 11.46 11.46 0 00-13.98 8.69h-.26a13.89 13.89 0 000 27.77h59.03z" class="bg-fill"/>\n  <path d="M227.92 148.22v-3h-3v3h3zm4.8-26.92l-2.98.26.16 1.9 1.79.66 1.04-2.82zm-22.53-9.6l-2.92.69 1.09 4.64 3.71-2.99-1.88-2.34zm-27.06.06l-.72 2.9 2.96.75.69-2.98-2.93-.67zm-13.98 8.69l-.06 3 2.47.04.52-2.41-2.93-.63zm-.26 27.77h3v-3h-3v3zm0 0h-3v3h3v-3zm59.03 0v3h3v-3h-3zm0 3v-6 6zm0 0c9.33 0 16.89-7.56 16.89-16.88h-6c0 6-4.88 10.88-10.9 10.88v6zm16.89-16.88a16.9 16.9 0 00-11.04-15.85l-2.08 5.63a10.9 10.9 0 017.12 10.22h6zm-9.1-13.3c-.75-8.63-8-15.4-16.82-15.4v6c5.69 0 10.36 4.36 10.85 9.92l5.98-.52zm-16.82-15.4c-4 0-7.69 1.4-10.58 3.72l3.76 4.68c1.87-1.5 4.24-2.4 6.82-2.4v-6zm-5.78 5.38A16.9 16.9 0 00196.67 98v6a10.9 10.9 0 0110.6 8.39l5.84-1.37zM196.67 98a16.9 16.9 0 00-16.46 13.08l5.85 1.35a10.9 10.9 0 0110.6-8.43v-6zm-12.81 10.85c-1.13-.28-2.3-.43-3.51-.43v6c.71 0 1.4.08 2.06.25l1.45-5.82zm-3.51-.43a14.46 14.46 0 00-14.14 11.4l5.87 1.26a8.46 8.46 0 018.27-6.66v-6zm-11.15 9.03h-.31v6h.2l.11-6zm-.31 0A16.89 16.89 0 00152 134.33h6c0-6.02 4.88-10.9 10.89-10.9v-6zM152 134.33c0 9.32 7.56 16.88 16.89 16.88v-6A10.89 10.89 0 01158 134.34h-6zm19.89 13.88h-6 6zm56.03-3h-59.03v6h59.03v-6zm-3 3h6-6z" class="highlight-fill" mask="url(#path-5-inside-2)"/>\n  <path d="M126 105h9v11.5a4.5 4.5 0 01-9 0V105z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <path d="M107.27 31.25l-9.02 9.02-5-5a4 4 0 010-5.66l3.36-3.37a4 4 0 015.66 0l5 5.01z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <path d="M156.41 31.25l9.03 9.02 5-5a4 4 0 000-5.66l-3.36-3.37a4 4 0 00-5.66 0l-5 5.01z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <circle cx="131.66" cy="64.66" r="45.72" class="bg-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M99.03 32.63a45.72 45.72 0 00.6 64.66l32.03-32.03 32.03 32.03.3-.3a45.72 45.72 0 00.3-64.36l-32.63 32.63-32.63-32.63z" class="highlight-fill"/>\n  <circle cx="131.66" cy="64.66" r="45.72" class="highlight-stroke" stroke-width="4"/>\n  <path class="highlight-stroke" d="M99.26 97.21l64.95-64.95"/>\n  <path class="highlight-stroke" d="M164.06 97.2L99.11 32.27"/>\n  <circle cx="131.66" cy="64.66" r="17.52" class="highlight-stroke bg-fill" stroke-width="2"/>\n</svg>\n'},68914:e=>{e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 81">\n  <rect x="46" y="35" width="46" height="46" rx="5" class="success"/>\n  <path d="M65 68.83L54.17 58 57 55.17l8 8 16-16L83.83 50 65 68.83z" fill="white"/>\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M68 17a1 1 0 01-1-1V1a1 1 0 112 0v15a1 1 0 01-1 1zm33.28 5.8a1 1 0 010-1.41l10.6-10.6a1 1 0 111.42 1.4L102.7 22.8a1 1 0 01-1.42 0zM36.73 21.4a1 1 0 01-1.42 1.41l-10.6-10.6a1 1 0 011.41-1.42l10.6 10.6zM114 57a1 1 0 011-1h28a1 1 0 010 2h-28a1 1 0 01-1-1zM1 56a1 1 0 100 2h28a1 1 0 100-2H1z" class="success"/>\n</svg>\n'},89182:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-opacity=".3" fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zm-7.6-13.73H13.19a3.8 3.8 0 01-3.79-3.79V27.57l26.22 14.9 26.84-15.41v21.7a3.8 3.8 0 01-3.8 3.78zM13.19 19.07a3.8 3.8 0 00-3.66 2.82L35.61 36.7l26.57-15.26a3.8 3.8 0 00-3.51-2.38H13.19z"/>\n  <path fill-rule="evenodd" d="M8.4 25.85l27.22 15.47 27.84-16v23.43a4.8 4.8 0 01-4.8 4.8H13.2a4.8 4.8 0 01-4.79-4.8v-22.9zm27.22 16.62L9.4 27.57v21.18a3.8 3.8 0 003.8 3.8h45.47a3.8 3.8 0 003.79-3.8v-21.7L35.62 42.48zM8.37 22.37l.2-.74a4.8 4.8 0 014.62-3.56h45.48a4.8 4.8 0 014.44 3l.33.81L35.6 37.87 8.37 22.37zM54.76 70.3c4.76-.7 8.15-2.07 10.8-4.73 2.66-2.65 4.04-6.04 4.73-10.8.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zM35.61 36.71L9.53 21.9a3.8 3.8 0 013.66-2.82h45.48a3.8 3.8 0 013.51 2.38L35.61 36.7zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72z"/>\n</svg>\n'},29622:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35717 3.36075C2.13323 3.58693 2.00515 3.89221 2 4.21203V11.7872C1.99441 11.9479 2.02163 12.1081 2.07996 12.2577C2.13828 12.4073 2.22648 12.5431 2.33904 12.6568C2.4516 12.7705 2.58613 12.8596 2.73425 12.9185C2.88237 12.9774 3.04091 13.0049 3.2 12.9993H12.8C13.1167 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H8L6.8 3H3.2C2.88334 3.0052 2.5811 3.13457 2.35717 3.36075Z"/>\n</svg>\n'},52529:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.29386 0.706223C7.68439 0.315699 8.31561 0.315699 8.70614 0.706223L13.4161 5.4162C13.7912 5.79127 14 6.29808 14 6.82851V12.0001C14 12.2653 13.8946 12.5197 13.7071 12.7072C13.5196 12.8947 13.2652 13.0001 13 13.0001H3C2.73478 13.0001 2.48043 12.8947 2.29289 12.7072C2.10536 12.5197 2 12.2653 2 12.0001V6.82851C2 6.29808 2.20882 5.79127 2.58389 5.4162L7.29386 0.706223ZM4.56066 4.85364L8 1.4143L11.4393 4.85364L8.35355 7.93943C8.15829 8.13469 7.84171 8.13469 7.64645 7.93943L4.56066 4.85364ZM3.85355 5.56075L3.291 6.1233C3.10447 6.30983 3 6.56187 3 6.82851L3 12.0001H13V6.82851C13 6.56187 12.8955 6.30983 12.709 6.12331L12.1464 5.56075L9.06066 8.64653C8.47487 9.23232 7.52513 9.23232 6.93934 8.64653L3.85355 5.56075Z"/>\n</svg>\n'},90205:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4 1C2.89543 1 2 1.89543 2 3V12C2 13.1046 2.89543 14 4 14H13C14.1046 14 15 13.1046 15 12V3C15 1.89543 14.1046 1 13 1H4ZM11.2774 8.9856C11.6015 9.7681 11.7968 10.5966 11.857 11.439C11.8791 11.7483 12.1284 12 12.4385 12C12.7486 12 13.0018 11.7484 12.9825 11.4389C12.9733 11.2922 12.9606 11.1459 12.9443 11C12.8505 10.1614 12.6391 9.33849 12.3149 8.55585C11.8626 7.46392 11.1997 6.47177 10.364 5.63604C9.52823 4.80031 8.53608 4.13738 7.44415 3.68508C6.66151 3.3609 5.83859 3.14949 5 3.05573C4.85414 3.03942 4.70781 3.02667 4.56114 3.01751C4.25163 2.99817 4 3.25139 4 3.5615C4 3.87161 4.25171 4.12092 4.56103 4.14301C5.40342 4.20316 6.2319 4.39848 7.0144 4.7226C7.97008 5.11846 8.83843 5.69867 9.56988 6.43012C10.3013 7.16157 10.8815 8.02992 11.2774 8.9856ZM9.43123 12C9.11711 12 8.86589 11.7445 8.82923 11.4325C8.7771 10.9889 8.66397 10.5536 8.49233 10.1392C8.24797 9.54928 7.8898 9.01324 7.43828 8.56172C6.98676 8.1102 6.45073 7.75203 5.86078 7.50767C5.44641 7.33603 5.01114 7.2229 4.56748 7.17077C4.2555 7.13411 4 6.88289 4 6.56877C4 6.25465 4.25521 5.9972 4.56792 6.02694C4.71267 6.0407 4.85679 6.05971 5 6.08392C5.44363 6.15891 5.87847 6.28373 6.2961 6.45672C7.02405 6.75825 7.68549 7.20021 8.24264 7.75736C8.79979 8.31451 9.24175 8.97595 9.54328 9.7039C9.71627 10.1215 9.84109 10.5564 9.91608 11C9.94029 11.1432 9.9593 11.2873 9.97306 11.4321C10.0028 11.7448 9.74535 12 9.43123 12ZM5.25 12C5.94036 12 6.5 11.4404 6.5 10.75C6.5 10.0596 5.94036 9.5 5.25 9.5C4.55964 9.5 4 10.0596 4 10.75C4 11.4404 4.55964 12 5.25 12Z"/>\n</svg>\n'},53165:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35715 3.36075C2.13321 3.58693 2.00513 3.89221 1.99998 4.21203V11.7872C1.9944 11.9479 2.02161 12.1081 2.07994 12.2577C2.13827 12.4073 2.22646 12.5431 2.33902 12.6568C2.45159 12.7705 2.58612 12.8596 2.73423 12.9185C2.88235 12.9774 3.04089 13.0049 3.19998 12.9993H12.8C13.1166 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H7.99998L6.79998 3H3.19998C2.88333 3.0052 2.58109 3.13457 2.35715 3.36075ZM2.99938 11.822L2.99998 11.8046V4.22318C3.00221 4.16171 3.02739 4.10511 3.06778 4.06432C3.10771 4.02398 3.15927 4.00208 3.2116 4H6.24588L7.49998 6H12.8C12.9104 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8922 11.9753 12.8407 11.9972 12.7884 11.9993H3.18225L3.16453 11.9999C3.14404 12.0006 3.12342 11.9971 3.10382 11.9893C3.08419 11.9815 3.06565 11.9694 3.04965 11.9533C3.03362 11.9371 3.02049 11.9171 3.01163 11.8944C3.00276 11.8717 2.99851 11.847 2.99938 11.822Z"/>\n</svg>\n'},17737:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 1.5C10 1.77614 10.2239 2 10.5 2H12C12.5523 2 13 2.44772 13 3H3C3 2.44772 3.44772 2 4 2H5.5C5.77614 2 6 1.77614 6 1.5C6 1.22386 6.22386 1 6.5 1H9.5C9.77614 1 10 1.22386 10 1.5Z"/>\n  <path d="M4 4H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5C4.67157 13 4 12.3284 4 11.5V4Z"/>\n</svg>\n'},8431:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3H13C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 4V11.5C4 12.3284 4.67157 13 5.5 13H10.5C11.3284 13 12 12.3284 12 11.5V4H11V11.5C11 11.7761 10.7762 12 10.5 12H5.5C5.22385 12 5 11.7761 5 11.5V4H4Z"/>\n  <path opacity="0.3" d="M6 4V11H10V4H6Z"/>\n</svg>\n'},76047:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.5 6a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h17a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-17zm2 4a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h13a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-13zM8 14.5a.5.5 0 01.5-.5h9a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-1zm2.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-5z"/>\n</svg>'},94543:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1 3.5a.5.5 0 01.5-.5h13a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-13a.5.5 0 01-.5-.5v-1zm2 4a.5.5 0 01.5-.5h9a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-1zM5.5 11a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-5z"/>\n</svg>'},89316:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2 4.5a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5zm2 3a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zM6.5 10a.5.5 0 000 1h3a.5.5 0 000-1h-3z"/>\n</svg>'},83318:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="m6.64645 7.64645c.19526-.19527.51184-.19527.7071 0l5.29285 5.29285c.1953.1953.5119.1953.7072 0l5.2928-5.29285c.1953-.19527.5119-.19527.7072 0 .1952.19526.1952.51184 0 .7071l-5.2929 5.29285c-.5858.5858-1.5356.5858-2.1214 0l-5.29285-5.29285c-.19527-.19526-.19527-.51184 0-.7071z"/><path d="m19 9h-12v7h12zm-12-2c-1.10457 0-2 .89543-2 2v7c0 1.1046.89543 2 2 2h12c1.1046 0 2-.8954 2-2v-7c0-1.10457-.8954-2-2-2z"/></g></svg>'},71387:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 3.5C0 3.22386 0.223858 3 0.5 3H8.5C8.77614 3 9 3.22386 9 3.5C9 3.77614 8.77614 4 8.5 4H0.5C0.223858 4 0 3.77614 0 3.5ZM0 5.5C0 5.22386 0.223858 5 0.5 5H2.5C2.77614 5 3 5.22386 3 5.5C3 5.77614 2.77614 6 2.5 6H0.5C0.223858 6 0 5.77614 0 5.5ZM3 7.5C3 7.22386 2.77614 7 2.5 7H0.5C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5Z"/>\n  <path fill-rule="evenodd" d="M4.45459 5.16169L9.64645 10.3536L10 10.7071L10.3536 10.3536L15.5454 5.16169C15.8191 5.34012 16 5.64893 16 6V12C16 12.5523 15.5523 13 15 13H5C4.44772 13 4 12.5523 4 12V6C4 5.64893 4.18091 5.34012 4.45459 5.16169ZM5.70711 5H14.2929L10 9.29289L5.70711 5Z"/>\n</svg>\n'},25259:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="m3 7h9v1h-9zm0 2h4v1h-4zm0 2h4v1h-4z"/>\n  <path d="m8 11c0-1.10457.89543-2 2-2h12c1.1046 0 2 .89543 2 2v6c0 1.1046-.8954 2-2 2h-12c-1.10457 0-2-.8954-2-2zm11.2929 0h-6.5858l3.2929 3.2929zm-8 0h-1.2929v6h12v-6h-1.2929l-4.7071 4.7071z" fill-rule="evenodd"/>\n  </svg>'},71311:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m9 3.5c0-.27614-.22386-.5-.5-.5h-8c-.276142 0-.5.22386-.5.5s.223858.5.5.5h8c.27614 0 .5-.22386.5-.5z"/><path d="m5 5c-.55228 0-1 .44772-1 1v6c0 .5523.44771 1 1 1h10c.5523 0 1-.4477 1-1v-6c0-.55228-.4477-1-1-1zm5 4.29289-3.29289-3.29289h6.58579zm-5-3.29289h.29289l4.70711 4.7071 4.7071-4.7071h.2929v6h-10z"/><path d="m0 5.5c0-.27614.223858-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-2c-.276142 0-.5-.22386-.5-.5z"/><path d="m3 7.5c0-.27614-.22386-.5-.5-.5h-2c-.276142 0-.5.22386-.5.5s.223858.5.5.5h2c.27614 0 .5-.22386.5-.5z"/></svg>'},54255:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1.64645 2.64645C1.84171 2.45118 2.15829 2.45118 2.35355 2.64645L7.64645 7.93934C7.84171 8.1346 8.15829 8.1346 8.35355 7.93934L13.6464 2.64645C13.8417 2.45118 14.1583 2.45118 14.3536 2.64645C14.5488 2.84171 14.5488 3.15829 14.3536 3.35355L9.06066 8.64645C8.47487 9.23223 7.52513 9.23223 6.93934 8.64645L1.64645 3.35355C1.45118 3.15829 1.45118 2.84171 1.64645 2.64645Z"/>\n  <path fill-rule="evenodd" d="M14 4H2V11H14V4ZM2 2C0.895431 2 0 2.89543 0 4V11C0 12.1046 0.895431 13 2 13H14C15.1046 13 16 12.1046 16 11V4C16 2.89543 15.1046 2 14 2H2Z"/>\n</svg>\n'},24073:e=>{e.exports='<svg width="46" height="48" xmlns="http://www.w3.org/2000/svg">\n  <g clip-path="url(#clip0)">\n    <path d="M16.293 11.293A1 1 0 0017 13h12a1 1 0 000-2H17a1 1 0 00-.707.293zM16.293 19.293A1 1 0 0117 19h12a1 1 0 010 2H17a1 1 0 01-.707-1.707z"/>\n    <path fill-rule="evenodd" d="M8.293 1.293A1 1 0 008 2v13.69L.419 21.185a1 1 0 00-.419.841V43a4 4 0 004 4h38a4 4 0 004-4V22.026a1 1 0 00-.417-.839L38 15.689V2a1 1 0 00-1-1H9a1 1 0 00-.707.293zM36 16.174v9.506l-12.972 6.938-.027.016L10 25.68v-9.45V3h26v13.174zM8 18.16l-5.12 3.712L8 24.611v-6.45zm30 6.45v-6.45l5.12 3.712L38 24.61zM2 43V23.67L41.879 45H4a2 2 0 01-2-2zm42 0c0 .27-.055.536-.159.78L25.12 33.769 44 23.669V43z"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <path fill="#fff" d="M0 0h46v48H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},95174:e=>{e.exports='<svg class="onboarding-illustration" width="209" height="187" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect x=".5" y=".5" width="208" height="27" rx="2.5" class="form-field"/>\n  <path d="M128 9.5a.5.5 0 00-.5-.5h-8a.5.5 0 000 1h8a.5.5 0 00.5-.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M124 11a1 1 0 00-1 1v6a1 1 0 001 1h10a1 1 0 001-1v-6a1 1 0 00-1-1h-10zm5 4.293L125.707 12h6.586L129 15.293zM124 12h.293L129 16.707 133.707 12H134v6h-10v-6z" class="color-fg"/>\n  <path d="M119 11.5a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zM122 13.5a.5.5 0 00-.5-.5h-2a.5.5 0 000 1h2a.5.5 0 00.5-.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M166 8h10v1h-10V8zm-1 0a1 1 0 011-1h10a1 1 0 011 1v2h-1.085l-.735 7.605c-.077.795-.661 1.395-1.356 1.395h-5.648c-.696 0-1.28-.601-1.356-1.396L166.085 10H165V8zm2.001 2l.723 7.488c.025.265.22.465.452.465h5.648c.233 0 .427-.2.452-.464l.723-7.489h-7.998zm6.491 1.859l-.607-.598-1.818 1.794-1.818-1.794-.606.598 1.818 1.795-1.818 1.795.606.598 1.818-1.795 1.818 1.795.607-.598-1.819-1.795 1.819-1.795z" class="color-fg"/>\n  <path d="M195.5 8a.5.5 0 01-.5-.5.5.5 0 00-.5-.5h-3a.5.5 0 00-.5.5.5.5 0 01-.5.5H189a1 1 0 00-1 1h10a1 1 0 00-1-1h-1.5zM189 10v7.5a1.5 1.5 0 001.5 1.5h5a1.5 1.5 0 001.5-1.5V10h-1v7.5a.5.5 0 01-.5.5h-5a.5.5 0 01-.5-.5V10h-1z" class="color-fg"/>\n  <path opacity=".3" d="M191 10v7h4v-7h-4z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M99.357 9.36a1.239 1.239 0 00-.357.852v7.575a1.185 1.185 0 00.339.87 1.158 1.158 0 00.861.342h9.6c.316-.005.619-.134.843-.36.224-.227.352-.532.357-.852V12c0-.5-.5-1-1-1h-5l-1.2-2h-3.6c-.317.005-.62.135-.843.36zm.642 8.462v-7.599a.236.236 0 01.069-.159.211.211 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.24.24 0 01-.068.159.216.216 0 01-.144.064h-9.624a.16.16 0 01-.153-.105.2.2 0 01-.012-.072z" class="highlight-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M100 17.822v-7.599a.236.236 0 01.068-.159.211.211 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.24.24 0 01-.068.159.216.216 0 01-.144.064h-9.624a.16.16 0 01-.153-.105.2.2 0 01-.012-.072z" class="highlight-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M142 9.154c0-1.19.964-2.154 2.154-2.154h9.692c1.19 0 2.154.964 2.154 2.154v9.692c0 1.19-.964 2.154-2.154 2.154h-9.692A2.154 2.154 0 01142 18.846V9.154zm2.154-1.077h9.692c.595 0 1.077.482 1.077 1.077v9.692c0 .595-.482 1.077-1.077 1.077h-9.692a1.078 1.078 0 01-1.077-1.077V9.154c0-.595.482-1.077 1.077-1.077z" class="color-fg"/>\n  <path d="M153.5 18.5v-1a8.001 8.001 0 00-8-8h-1v1.4h1a6.602 6.602 0 016.6 6.6v1h1.4zM147.5 17a1.501 1.501 0 11-3.002 0 1.501 1.501 0 013.002 0z" class="color-fg"/>\n  <path d="M150.5 17.5v1h-1.4v-1a3.6 3.6 0 00-3.6-3.6h-1v-1.4h1a4.994 4.994 0 013.536 1.464A4.998 4.998 0 01150.5 17.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M77 13.829V18a1 1 0 001 1h10a1 1 0 001-1V13.83c0-.53-.209-1.038-.584-1.413l-1.063-1.062-3.292 3.293a1.5 1.5 0 01-2.122 0l-3.292-3.293-1.063 1.062A1.994 1.994 0 0077 13.828zm2.354-3.183l3.293 3.293a.5.5 0 00.706 0l3.293-3.293-2.94-2.94a.998.998 0 00-1.412 0l-2.94 2.94z" class="highlight-fill"/>\n  <rect opacity=".6" x="8" y="43" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="58" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="82" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="97" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="121" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="136" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="160" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="175" width="166" height="12" rx="2" class="color-fg-faded"/>\n</svg>\n'},52725:e=>{e.exports='<svg class="onboarding-illustration" width="216" height="200" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <g filter="url(#filter0_d)">\n    <path d="M7 9a5 5 0 015-5h192a5 5 0 015 5v156.03a5 5 0 01-4.55 4.98l-192 17.5A5 5 0 017 182.51V9z" class="bg-fill"/>\n  </g>\n  <rect fill-opacity=".2" x="46" y="24" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="48" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="72" width="60" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="96" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="120" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="144" width="60" height="12" rx="2" class="color-fg-faded"/>\n  <path d="M33 26a2 2 0 100-4 2 2 0 000 4z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M33 32v-5c-.35 0-.687-.06-1-.17V32H22v-6h.293L27 30.707l4.262-4.262A3.01 3.01 0 0130.17 25H22a1 1 0 00-1 1v6a1 1 0 001 1h10a1 1 0 001-1zm-6-2.707L30.293 26h-6.586L27 29.293zM21.357 121.361a1.237 1.237 0 00-.357.851v7.575a1.187 1.187 0 00.339.87 1.156 1.156 0 00.86.342h9.6c.317-.005.62-.134.844-.36.224-.227.352-.532.357-.852V124c0-.5-.5-1-1-1h-5l-1.2-2h-3.6a1.214 1.214 0 00-.843.361zm.642 8.461v-7.599a.24.24 0 01.069-.159.215.215 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064h-9.606l-.018.001a.142.142 0 01-.06-.011.169.169 0 01-.092-.095.179.179 0 01-.013-.072z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M22 129.822v-7.599a.24.24 0 01.067-.159.215.215 0 01.144-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064h-9.606l-.018.001a.142.142 0 01-.06-.011.169.169 0 01-.092-.095.179.179 0 01-.013-.072z" class="color-fg" fill-opacity=".1"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M32.414 94.5a1.5 1.5 0 00-1.06.44L30.292 96 33 98.707l1-1a1.707 1.707 0 000-2.414l-.354-.354a1.5 1.5 0 00-1.06-.439h-.172zm-.354 1.146a.5.5 0 01.354-.146h.172a.5.5 0 01.353.146l.354.354a.707.707 0 010 1l-.293.293L31.707 96l.353-.354zM29.5 96.793l-5.5 5.5V105h2.707l5.5-5.5-2.707-2.707zM25 104v-1.293l4.5-4.5 1.293 1.293-4.5 4.5H25z" class="color-fg"/>\n  <path d="M23 97h4l-1 1h-3c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h5a1 1 0 001-1v-1l1-1v2a2 2 0 01-2 2h-5a2 2 0 01-2-2v-7c0-1 .895-2 2-2z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M19 72h14.546c.36 0 .715.09.992.31.293.23.462.578.462.99 0 .25-.099.47-.19.626a2.14 2.14 0 01-.318.41L24 85v-8l-5-5zm2.5.95L24 75.5l7-1.5-6 3.5.003 5 8.864-8.849c.062-.063.129-.144.176-.225.045-.076.053-.118.054-.125 0-.117-.038-.183-.1-.232-.078-.06-.223-.12-.45-.12H21.5zM26.294 47.706a.998.998 0 011.412 0l4.71 4.71c.375.375.584.882.584 1.413V59a1 1 0 01-1 1H22a1 1 0 01-1-1v-5.172c0-.53.209-1.037.584-1.412l4.71-4.71zm-2.733 4.148L27 48.414l3.44 3.44-3.086 3.085a.5.5 0 01-.708 0l-3.085-3.085zm-.707.707l-.563.562a.994.994 0 00-.291.706V59h10v-5.172a.994.994 0 00-.291-.705l-.563-.562-3.085 3.086a1.5 1.5 0 01-2.122 0l-3.085-3.086z" class="color-fg"/>\n  <path d="M159 38h-19a3 3 0 01-3-3V25a3 3 0 013-3h19v16z" class="color-fg"/>\n  <path fill-opacity="0.2" d="M159 22h19a3 3 0 013 3v10a3 3 0 01-3 3h-19V22z" class="color-fg-faded"/>\n  <path d="M145.181 34h1.011v-8.103h-1.005l-2.156 1.55v1.067l2.061-1.494h.089V34zm3.381-5.823v.006h.977v-.006c0-.955.64-1.59 1.589-1.59.893 0 1.583.624 1.583 1.433 0 .651-.252 1.09-1.297 2.223l-2.802 3.06V34h5.245v-.91h-3.796V33l1.949-2.094c1.33-1.426 1.712-2.083 1.712-2.925 0-1.286-1.112-2.275-2.566-2.275-1.505 0-2.594 1.034-2.594 2.471z" class="bg-fill"/>\n  <path d="M166.485 34h1.011v-8.103h-1.006l-2.156 1.55v1.067l2.061-1.494h.09V34zm6.199.19c1.718 0 2.92-.97 2.92-2.357 0-1.056-.668-1.876-1.685-2.067v-.09c.837-.23 1.354-.92 1.354-1.808 0-1.263-1.073-2.162-2.589-2.162s-2.589.899-2.589 2.162c0 .882.528 1.584 1.354 1.808v.09c-1.017.191-1.685 1.01-1.685 2.067 0 1.386 1.202 2.358 2.92 2.358zm0-.864c-1.123 0-1.898-.64-1.898-1.567 0-.926.775-1.566 1.898-1.566 1.123 0 1.898.64 1.898 1.566 0 .927-.775 1.567-1.898 1.567zm0-3.987c-.955 0-1.595-.55-1.595-1.375 0-.837.635-1.393 1.595-1.393s1.595.556 1.595 1.393c0 .825-.64 1.375-1.595 1.375z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M22 144h10v1H22v-1zm-1 0a1 1 0 011-1h10a1 1 0 011 1v2h-1.085l-.735 7.605c-.077.795-.661 1.395-1.356 1.395h-5.648c-.695 0-1.28-.601-1.356-1.396L22.085 146H21v-2zm2 2l.724 7.488c.025.265.22.466.452.466h5.648c.233 0 .427-.201.452-.465L31 146h-7.998zm6.491 1.859l-.606-.598-1.818 1.794-1.818-1.794-.606.598 1.818 1.795-1.818 1.795.606.598 1.818-1.795 1.818 1.795.606-.598-1.818-1.795 1.819-1.795z" class="color-fg"/>\n  <defs>\n    <filter id="filter0_d" x="0" y="0" width="216" height="197.52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="3.5"/>\n      <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.13 0"/>\n      <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>\n      <feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n    </filter>\n  </defs>\n</svg>\n'},24566:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 7.82852V12.0001C2 12.2653 2.10536 12.5197 2.29289 12.7072C2.48043 12.8947 2.73478 13.0001 3 13.0001H13C13.2652 13.0001 13.5196 12.8947 13.7071 12.7072C13.8946 12.5197 14 12.2653 14 12.0001V7.82852C14 7.29808 13.7912 6.79127 13.4161 6.4162L12.3535 5.3536L9.06066 8.64645C8.47487 9.23223 7.52513 9.23223 6.93934 8.64645L3.64649 5.3536L2.58389 6.4162C2.20882 6.79127 2 7.29808 2 7.82852ZM4.3536 4.64649L7.64645 7.93934C7.84171 8.1346 8.15829 8.1346 8.35355 7.93934L11.6464 4.64649L8.70614 1.70622C8.31561 1.3157 7.68439 1.3157 7.29386 1.70622L4.3536 4.64649Z"/>\n</svg>\n'},90658:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 3h12a1 1 0 01.96.721L8 7.433 1.04 3.721A1 1 0 012 3zM1 4.833V12a1 1 0 001 1h12a1 1 0 001-1V4.833L8.235 8.441 8 8.567l-.235-.126L1 4.833zM0 4a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V4z"/>\n</svg>\n'},52462:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M2 2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4C16 2.89543 15.1046 2 14 2H2ZM1 3.70001V4.83335L8 8.56668L15 4.83335V3.70001L8 7.43335L1 3.70001Z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M14 3H2C1.44772 3 1 3.44772 1 4V12C1 12.5523 1.44772 13 2 13H14C14.5523 13 15 12.5523 15 12V4C15 3.44772 14.5523 3 14 3ZM2 2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4C16 2.89543 15.1046 2 14 2H2Z"/>\n</svg>\n'},4856:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M3 1C2.44772 1 2 1.44772 2 2V4H3.08537L3.81966 11.6037C3.89644 12.3987 4.48049 13.0002 5.17571 13.0002H10.8242C11.5188 13.0002 12.1033 12.4005 12.1802 11.6048L12.9146 4H14V2C14 1.44772 13.5523 1 13 1H3ZM10.4916 5.85906L9.88546 5.26074L8.06682 7.05543L6.24891 5.26074L5.64282 5.85906L7.46082 7.65367L5.64282 9.44899L6.24891 10.0473L8.06682 8.2519L9.88546 10.0473L10.4916 9.44899L8.67282 7.65367L10.4916 5.85906Z"/>\n</svg>\n'},2473:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 0c-3.025 0-5.5 2.314-5.5 5.143v5.714c0 2.829 2.475 5.143 5.5 5.143s5.5-2.314 5.5-5.143v-5.714c0-2.829-2.475-5.143-5.5-5.143zm-3.5 5.322c0-1.637 1.29-3.006 3-3.322v4h-3v-.678zm7 5.761c0 1.608-1.571 2.917-3.5 2.917-1.931 0-3.5-1.309-3.5-2.917v-4.083h7v4.083zm-3-5.083v-4c1.709.315 3 1.685 3 3.322v.678h-3z"/>\n</svg>\n'},41868:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4.5 11C5.38054 11 6.20201 10.7471 6.89574 10.31L10.2929 13.7071C10.6834 14.0976 11.3166 14.0976 11.7071 13.7071C12.0976 13.3166 12.0976 12.6834 11.7071 12.2929L8.30995 8.89574C8.74709 8.20201 9 7.38054 9 6.5C9 4.01472 6.98528 2 4.5 2C2.01472 2 0 4.01472 0 6.5C0 8.98528 2.01472 11 4.5 11ZM4.5 9C5.88071 9 7 7.88071 7 6.5C7 5.11929 5.88071 4 4.5 4C3.11929 4 2 5.11929 2 6.5C2 7.88071 3.11929 9 4.5 9Z"/>\n  <path d="M13 8L14.9757 6.02426C15.3537 5.64629 15.086 5 14.5515 5H11.4485C10.914 5 10.6463 5.64629 11.0243 6.02426L13 8Z"/>\n</svg>\n'},52145:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15.2929 20.7071C15.6834 21.0976 16.3166 21.0976 16.7071 20.7071C17.0976 20.3166 17.0976 19.6834 16.7071 19.2929L10.4142 13L16.7071 6.70711C17.0976 6.31658 17.0976 5.68342 16.7071 5.29289C16.3166 4.90237 15.6834 4.90237 15.2929 5.29289L7.58575 13L15.2929 20.7071Z"/>\n</svg>\n'},29629:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.2071 4.20711C10.5977 3.81658 10.5977 3.18342 10.2071 2.79289C9.81661 2.40237 9.18345 2.40237 8.79292 2.79289L3.58582 8L8.79292 13.2071C9.18345 13.5976 9.81661 13.5976 10.2071 13.2071C10.5977 12.8166 10.5977 12.1834 10.2071 11.7929L6.41424 8L10.2071 4.20711Z"/>\n</svg>\n'},46685:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.354 13.354a.5.5 0 01-.708 0l-5-5L4.293 8l.353-.354 5-5a.5.5 0 01.708.708L5.707 8l4.647 4.646a.5.5 0 010 .708z"/>\n</svg>\n'},88952:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M17 18C17 18.5523 16.5523 19 16 19C15.4477 19 15 18.5523 15 18L15 14L10.7071 18.2929C10.0771 18.9229 9 18.4767 9 17.5858L9 8.41421C9 7.52331 10.0771 7.07714 10.7071 7.70711L15 12L15 8C15 7.44772 15.4477 7 16 7C16.5523 7 17 7.44771 17 8L17 18Z"/>\n</svg>\n'},4819:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 13C9.44772 13 9 12.5523 9 12L9 9L5.70711 12.2929C5.07714 12.9229 4 12.4767 4 11.5858L4 4.41421C4 3.52331 5.07714 3.07714 5.70711 3.70711L9 7L9 4C9 3.44771 9.44772 3 10 3C10.5523 3 11 3.44771 11 4L11 12C11 12.5523 10.5523 13 10 13Z"/>\n</svg>\n'},27308:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 4.2a.5.5 0 00-1 0v3.3L5.854 3.854A.5.5 0 005 4.207v7.586a.5.5 0 00.854.354L9.5 8.5v3.3a.5.5 0 101 0V4.2zM8.586 8L6 10.586V5.414L8.586 8z"/>\n</svg>\n'},15709:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.29289 19.2929C8.90237 19.6834 8.90237 20.3166 9.29289 20.7071C9.68342 21.0976 10.3166 21.0976 10.7071 20.7071L18.4142 13L10.7071 5.29289C10.3166 4.90237 9.68342 4.90237 9.29289 5.29289C8.90237 5.68342 8.90237 6.31658 9.29289 6.70711L15.5858 13L9.29289 19.2929Z"/>\n</svg>\n'},89654:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.79286 11.7929C5.40234 12.1834 5.40234 12.8166 5.79286 13.2071C6.18339 13.5976 6.81655 13.5976 7.20708 13.2071L12.4142 8L7.20708 2.79289C6.81655 2.40237 6.18339 2.40237 5.79287 2.79289C5.40234 3.18342 5.40234 3.81658 5.79287 4.20711L9.58576 8L5.79286 11.7929Z"/>\n</svg>\n'},6198:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.646 2.646a.5.5 0 01.708 0l5 5 .353.354-.353.354-5 5a.5.5 0 01-.708-.708L10.293 8 5.646 3.354a.5.5 0 010-.708z"/>\n</svg>\n'},980:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14.0607 5.14645C13.4749 4.56066 12.5251 4.56066 11.9393 5.14645L5.43934 11.6464C5.15804 11.9278 5 12.3093 5 12.7071V19.5C5 20.3284 5.67157 21 6.5 21H10.5C11.3284 21 12 20.3284 12 19.5V16.073C12.0032 16.0667 12.0072 16.0593 12.012 16.0508C12.0486 15.9868 12.1157 15.898 12.216 15.8084C12.4164 15.6296 12.6873 15.5 13 15.5C13.3127 15.5 13.5836 15.6296 13.784 15.8084C13.8843 15.898 13.9514 15.9868 13.988 16.0508C13.9928 16.0593 13.9968 16.0667 14 16.073V19.5C14 20.3284 14.6716 21 15.5 21H19.5C20.3284 21 21 20.3284 21 19.5V12.7071C21 12.3093 20.842 11.9278 20.5607 11.6464L14.0607 5.14645ZM7 12.9142L13 6.91421L19 12.9142V19H16V16C16 15.6363 15.8655 15.3053 15.7245 15.0586C15.5736 14.7944 15.3657 14.5395 15.116 14.3166C14.6164 13.8704 13.8873 13.5 13 13.5C12.1127 13.5 11.3836 13.8704 10.884 14.3166C10.6343 14.5395 10.4264 14.7944 10.2755 15.0586C10.1345 15.3053 10 15.6363 10 16V19H7V12.9142Z"/>\n</svg>\n'},10737:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M8 10.5C8.85199 10.5 8.97809 11.1049 8.99676 11.6963C9 11.799 9 11.9013 9 12V14C9 14.5523 9.44772 15 10 15H14C14.5523 15 15 14.5523 15 14V8.41421C15 8.149 14.8946 7.89464 14.7071 7.70711L8.70711 1.70711C8.31658 1.31658 7.68342 1.31658 7.29289 1.70711L1.29289 7.70711C1.10536 7.89464 1 8.149 1 8.41421V14C1 14.5523 1.44772 15 2 15H6C6.55228 15 7 14.5523 7 14V12C7 11.9013 7 11.799 7.00324 11.6963C7.02191 11.1049 7.14801 10.5 8 10.5ZM13 13V8.82843L8 3.82843L3 8.82843V13H5V12L4.99965 11.9448C4.99723 11.6655 4.9906 10.9031 5.28671 10.2122C5.47659 9.76911 5.8086 9.29298 6.35625 8.94816C6.89191 8.61089 7.47399 8.5 8 8.5C8.52601 8.5 9.10809 8.61089 9.64375 8.94816C10.1914 9.29298 10.5234 9.76911 10.7133 10.2122C11.0094 10.9031 11.0028 11.6655 11.0003 11.9448L11 12V13H13ZM6.99038 11.645C6.98978 11.6405 6.98933 11.6384 6.98933 11.6384L6.98953 11.6401C6.98953 11.6401 6.98997 11.6428 6.99038 11.645Z"/>\n</svg>\n'},79639:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 13V7.414l-5-5-5 5V13h3v-2-.052c-.001-.294-.003-.855.206-1.342.126-.294.339-.595.683-.812C7.227 8.581 7.612 8.5 8 8.5s.773.081 1.11.294c.345.217.558.518.684.812.209.487.207 1.048.206 1.342V13h3zm1 0V7.414a1 1 0 00-.293-.707l-5-5a1 1 0 00-1.414 0l-5 5A1 1 0 002 7.414V13a1 1 0 001 1h3a1 1 0 001-1v-2c0-.667 0-1.5 1-1.5s1 .833 1 1.5v2a1 1 0 001 1h3a1 1 0 001-1z"/>\n</svg>\n'},15159:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M20 6.20711C20 5.76166 19.4614 5.53857 19.1464 5.85355L17.2797 7.72031C16.9669 7.46165 16.632 7.22741 16.2774 7.02069C14.7393 6.12402 12.9324 5.80372 11.1799 6.1171C9.4273 6.43048 7.84336 7.35709 6.71134 8.73121C5.57932 10.1053 4.97303 11.8373 5.00092 13.6175C5.02881 15.3976 5.68905 17.1098 6.86356 18.4478C8.03807 19.7858 9.65025 20.6623 11.4118 20.9206C13.1733 21.179 14.9693 20.8022 16.4785 19.8578C17.5598 19.1812 18.4434 18.2447 19.0553 17.1439C19.0803 17.099 19.1048 17.0538 19.1288 17.0084C19.1844 16.9033 19.2376 16.7968 19.2883 16.689C19.5213 16.193 19.2261 15.6315 18.7038 15.466C18.2666 15.3274 17.81 15.5117 17.5224 15.8594C17.4823 15.9079 17.4455 15.9596 17.4125 16.014C17.3994 16.0356 17.3869 16.0576 17.375 16.0801C16.9237 16.9329 16.2535 17.6577 15.4259 18.1757C14.3159 18.8702 12.9951 19.1473 11.6997 18.9573C10.4042 18.7673 9.21861 18.1227 8.35485 17.1387C7.49109 16.1547 7.00554 14.8955 6.98503 13.5864C6.96452 12.2772 7.41039 11.0035 8.24291 9.99293C9.07542 8.98238 10.2403 8.30093 11.5291 8.07047C12.818 7.84001 14.1468 8.07556 15.278 8.73499C15.4839 8.85508 15.6809 8.9878 15.868 9.13202L13.8536 11.1464C13.5386 11.4614 13.7617 12 14.2071 12H20V6.20711Z"/>\n</svg>\n'},95574:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14 2.20711C14 1.76166 13.4614 1.53857 13.1464 1.85356L11.7246 3.27543C11.3372 2.96859 10.911 2.7088 10.4541 2.50391C9.21538 1.94834 7.82481 1.82932 6.50965 2.16629C5.19448 2.50327 4.03248 3.27631 3.2135 4.35912C2.39451 5.44193 1.96697 6.77049 2.00073 8.12771C2.03448 9.48494 2.52754 10.7906 3.39933 11.8314C4.27113 12.8721 5.47012 13.5864 6.80041 13.8576C8.1307 14.1288 9.51363 13.9408 10.7233 13.3244C11.4465 12.9557 12.0823 12.447 12.5968 11.8333C12.6276 11.7965 12.6581 11.7593 12.688 11.7218C12.7896 11.5946 12.886 11.4632 12.9771 11.3278C13.2826 10.8737 13.0562 10.2799 12.558 10.0533C12.1616 9.87286 11.7138 9.98233 11.3753 10.2501C11.3189 10.2948 11.2654 10.3439 11.2158 10.3968C11.1891 10.4252 11.1635 10.4548 11.1391 10.4853C10.7843 10.9298 10.3368 11.2969 9.82334 11.5585C9.01328 11.9714 8.08715 12.0973 7.19628 11.9157C6.30542 11.734 5.50247 11.2557 4.91865 10.5587C4.33482 9.86172 4.00463 8.98735 3.98203 8.07844C3.95942 7.16953 4.24574 6.27982 4.7942 5.55468C5.34265 4.82955 6.12082 4.31185 7.00156 4.08619C7.88231 3.86052 8.81354 3.94023 9.64312 4.31228C9.87802 4.41763 10.1008 4.54465 10.309 4.69096L8.85356 6.14645C8.53857 6.46143 8.76166 7 9.20711 7H14V2.20711Z"/>\n</svg>\n'},81315:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 3.5a4.5 4.5 0 104.032 6.5h1.093A5.502 5.502 0 012 8a5.5 5.5 0 019.39-3.89l1.256-1.256a.5.5 0 01.854.353V7H9.707a.5.5 0 01-.353-.854l1.328-1.328A4.486 4.486 0 007.5 3.5z"/>\n</svg>\n'},2753:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 8C9 7.44772 9.44772 7 10 7C10.5523 7 11 7.44772 11 8V12L15.2929 7.70711C15.9229 7.07714 17 7.52331 17 8.41421V17.5858C17 18.4767 15.9229 18.9229 15.2929 18.2929L11 14V18C11 18.5523 10.5523 19 10 19C9.44772 19 9 18.5523 9 18V8Z"/>\n</svg>\n'},79257:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 3C6.55228 3 7 3.44772 7 4V7L10.2929 3.70711C10.9229 3.07714 12 3.52331 12 4.41421V11.5858C12 12.4767 10.9229 12.9229 10.2929 12.2929L7 9V12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12V4C5 3.44772 5.44772 3 6 3Z"/>\n</svg>\n'},23588:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 11.8a.5.5 0 001 0V8.5l3.646 3.646a.5.5 0 00.854-.353V4.207a.5.5 0 00-.854-.353L6.5 7.5V4.2a.5.5 0 00-1 0v7.6zM7.414 8L10 5.414v5.172L7.414 8z"/>\n</svg>\n'},67066:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8.70711 7.29289C8.31658 6.90237 7.68342 6.90237 7.29289 7.29289C6.90237 7.68342 6.90237 8.31658 7.29289 8.70711L11.5858 13L7.29289 17.2929C6.90237 17.6834 6.90237 18.3166 7.29289 18.7071C7.68342 19.0976 8.31658 19.0976 8.70711 18.7071L13 14.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L14.4142 13L18.7071 8.70711C19.0976 8.31658 19.0976 7.68342 18.7071 7.29289C18.3166 6.90237 17.6834 6.90237 17.2929 7.29289L13 11.5858L8.70711 7.29289Z"/>\n</svg>\n'},52893:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.7071 5.70711C12.0976 5.31658 12.0976 4.68342 11.7071 4.29289C11.3166 3.90237 10.6834 3.90237 10.2929 4.29289L8 6.58579L5.70711 4.29289C5.31658 3.90237 4.68342 3.90237 4.29289 4.29289C3.90237 4.68342 3.90237 5.31658 4.29289 5.70711L6.58579 8L4.29289 10.2929C3.90237 10.6834 3.90237 11.3166 4.29289 11.7071C4.68342 12.0976 5.31658 12.0976 5.70711 11.7071L8 9.41421L10.2929 11.7071C10.6834 12.0976 11.3166 12.0976 11.7071 11.7071C12.0976 11.3166 12.0976 10.6834 11.7071 10.2929L9.41421 8L11.7071 5.70711Z"/>\n</svg>\n'},63818:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 1C5.44772 1 5 1.44772 5 2V4C5 4.55228 5.44772 5 6 5C6.55228 5 7 5.44772 7 6C7 6.55228 6.55228 7 6 7H2C1.44772 7 1 7.44772 1 8V10.5C1 10.7761 0.776142 11 0.5 11C0.223858 11 0 11.2239 0 11.5V13C0 13.5523 0.447715 14 1 14H3C3.55228 14 4 13.5523 4 13V11.5C4 11.2239 3.77614 11 3.5 11C3.22386 11 3 10.7761 3 10.5V10C3 9.44771 3.44772 9 4 9H6C6.55228 9 7 9.44771 7 10V10.5C7 10.7761 6.77614 11 6.5 11C6.22386 11 6 11.2239 6 11.5V13C6 13.5523 6.44772 14 7 14H9C9.55229 14 10 13.5523 10 13V11.5C10 11.2239 9.77614 11 9.5 11C9.22386 11 9 10.7761 9 10.5V10C9 9.44771 9.44771 9 10 9H12C12.5523 9 13 9.44771 13 10V10.5C13 10.7761 12.7761 11 12.5 11C12.2239 11 12 11.2239 12 11.5V13C12 13.5523 12.4477 14 13 14H15C15.5523 14 16 13.5523 16 13V11.5C16 11.2239 15.7761 11 15.5 11C15.2239 11 15 10.7761 15 10.5V8C15 7.44772 14.5523 7 14 7H10C9.44772 7 9 6.55228 9 6C9 5.44772 9.44771 5 10 5C10.5523 5 11 4.55228 11 4V2C11 1.44772 10.5523 1 10 1H6Z"/>\n</svg>\n'},90014:e=>{e.exports='<svg version="1.1" viewBox="0 0 16 16" height="16" width="16" class="note-icon" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="9.5,8.5 9.5,14.9 11.5,13.3 13.5,14.9 13.5,8.5 "/>\n  <path stroke-opacity="0" d="M8,14c-1.6,0-3.4,0-5,0c0-3.7,0-8.3,0-12h10c0,1.3,0,3.7,0,5H8V14z"/>\n  <path fill-opacity="0" d="M8,13.5c-1.6,0-2.9,0-4.5,0c0-3.7,0-7.3,0-11h9c0,1.3,0,3.2,0,4.5"/>\n  <line fill-opacity="0" stroke-width="2" x1="4" y1="3" x2="12" y2="3"/>\n  <line fill-opacity="0" x1="5" y1="6.5" x2="11" y2="6.5"/>\n  <line fill-opacity="0" x1="5" y1="8.5" x2="8" y2="8.5"/>\n  <line fill-opacity="0" x1="5" y1="10.5" x2="8" y2="10.5"/>\n</svg>\n'},53001:e=>{e.exports='<svg version="1.1" viewBox="0 0 16 16" height="16" width="16" class="note-icon" xmlns="http://www.w3.org/2000/svg">\n\t<rect x="3.5" y="2.5" width="9" height="11" rx="0.1" ry="0.1" />\n\t<line fill-opacity="0" stroke-width="2" x1="4" y1="3" x2="12" y2="3"/>\n\t<line fill-opacity="0" x1="5" y1="6.5" x2="11" y2="6.5"/>\n\t<line fill-opacity="0" x1="5" y1="8.5" x2="11" y2="8.5"/>\n\t<line fill-opacity="0" x1="5" y1="10.5" x2="11" y2="10.5"/>\n</svg>\n'},42450:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 11V7a1 1 0 011-1h1a2 2 0 002-2h4c0 1.1.9 2 2 2h1a1 1 0 011 1v4a1 1 0 01-1 1H3a1 1 0 01-1-1zM1 7v4c0 1.1.9 2 2 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1a1 1 0 01-1-1 1 1 0 00-1-1H6a1 1 0 00-1 1 1 1 0 01-1 1H3a2 2 0 00-2 2zm8 2a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>'},33851:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <circle cx="7.5" cy="7.5" r="4.5" fill-opacity="0.1"/>\n  <path d="M7.5 3C10 3 12 5 12 7.5S10 12 7.5 12 3 10 3 7.5 5 3 7.5 3m0-1C4.5 2 2 4.5 2 7.5S4.5 13 7.5 13 13 10.5 13 7.5 10.5 2 7.5 2z" fill-opacity="0.3"/>\n  <path d="M8 7V0H7v7H0v1h7v7h1V8h7V7H8zm0 0v1H7V7h1z"/>\n</svg>\n'},41380:e=>{e.exports='<svg width="16" height="16"\n    xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M2 13a2 2 0 002 2h8a2 2 0 002-2V3a2 2 0 00-1.999-2H4a2 2 0 00-2 2v10zm2-9h8v9H4V4zm1 1.956h6v1H5v-1zm0 2h6v1H5v-1zm0 2h6v1H5v-1z"/>\n</svg>'},60381:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 3H3v11h10V3zM2 2a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V2zm3 3h6v1H5V5zm0 3h6v1H5V8zm0 3h6v1H5v-1z"/>\n</svg>\n'},91329:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M13 3H3v11h10V3zM5 5h6v1H5V5zm0 3h6v1H5V8zm0 3h6v1H5v-1z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M2 2a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V2zm11 1H3v11h10V3z"/>\n</svg>\n'},34923:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 2C6.93914 2 5.92172 2.42143 5.17158 3.17157C4.42143 3.92172 4.00001 4.93913 4.00001 6V8.48188C3.96952 8.87419 3.79988 9.24291 3.5214 9.5214C3.23918 9.80362 2.86427 9.97406 2.46606 10.0012C2.19715 10.0195 1.99114 10.2476 2.00029 10.517C2.00945 10.7864 2.23047 11 2.50001 11H13.5C13.7695 11 13.9906 10.7864 13.9997 10.517C14.0089 10.2476 13.8029 10.0195 13.534 10.0012C13.1357 9.97406 12.7608 9.80362 12.4786 9.5214C12.2001 9.24291 12.0305 8.87419 12 8.48189V6C12 4.93913 11.5786 3.92172 10.8284 3.17157C10.0783 2.42143 9.06087 2 8.00001 2ZM5.87868 3.87868C6.44129 3.31607 7.20436 3 8.00001 3C8.79565 3 9.55872 3.31607 10.1213 3.87868C10.6839 4.44129 11 5.20435 11 6V8.5C11 8.51133 11.0004 8.52265 11.0012 8.53395C11.0377 9.07104 11.2367 9.58173 11.568 10H4.43204C4.76336 9.58173 4.9623 9.07104 4.99885 8.53395C4.99962 8.52265 5.00001 8.51133 5.00001 8.5V6C5.00001 5.20435 5.31608 4.44129 5.87868 3.87868ZM7.06415 12.3355C6.9733 12.0747 6.68826 11.937 6.42749 12.0278C6.16672 12.1187 6.02897 12.4037 6.11982 12.6645C6.25579 13.0548 6.50984 13.3931 6.84674 13.6325C7.18365 13.8719 7.58669 14.0005 7.99999 14.0005C8.41328 14.0005 8.81632 13.8719 9.15323 13.6325C9.49013 13.3931 9.74418 13.0548 9.88015 12.6645C9.971 12.4037 9.83325 12.1187 9.57248 12.0278C9.31171 11.937 9.02667 12.0747 8.93582 12.3355C8.86814 12.5298 8.74169 12.6981 8.574 12.8173C8.40631 12.9365 8.2057 13.0005 7.99999 13.0005C7.79427 13.0005 7.59366 12.9365 7.42597 12.8173C7.25828 12.6981 7.13183 12.5298 7.06415 12.3355Z"/>\n</svg>\n'},24638:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M17.2 11.7C17.2 9 15.5 7 13 7c-2.2 0-4.2 2-4.2 4.7v.3h-.3a.5.5 0 00-.5.5V18a1 1 0 001 1h8a1 1 0 001-1v-5.5a.5.5 0 00-.5-.5h-.3v-.3zM15.7 13h-5.4v-1.3c0-1.7 1.4-3 2.8-3 1.7 0 2.8 1.3 2.8 3V13h-.2z"/>\n</svg>\n'},3638:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.2 12h-1.3v1H10.3v-1.3c0-1.7 1.4-3 2.8-3 .323 0 .624.047.9.134v-1.72A4.336 4.336 0 0013 7c-2.2 0-4.2 2-4.2 4.7v.3h-.3a.5.5 0 00-.5.5V18a1 1 0 001 1h8a1 1 0 001-1v-5.5a.5.5 0 00-.5-.5h-.3z"/>\n</svg>\n'},32721:e=>{e.exports='<svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".3" d="M24 0H4v28h20V0z"/>\n  <path d="M24 23H4c-1.1 0-2-.9-2-2V7c0-1.1.9-2 2-2h20c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2zM4 7v14h20V7H4z"/>\n</svg>\n'},379:e=>{e.exports='<svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect opacity=".3" x="2" y="5" width="24" height="18" rx="2"/>\n  <path d="M21.2 23h-4v-2h4v2zm-8 0h-4v-2h4v2zm-8 0H4c-1.1 0-2-.9-2-2v-1.3h2V21h1.1v2h.1zm20.6-1.1l-1.8-.8v-3.6h2v3.6c0 .2 0 .5-.2.8zM4 15.7H2v-4h2v4zm22-2.2h-2v-4h2v4zM4 7.7H2V7c0-1.1.9-2 2-2h4v2H4v.7zM24 7h-4V5h4v2zm-8 0h-4V5h4v2z"/>\n</svg>\n'},90905:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.79289 5.79285L4.08578 11.5L9.79289 17.2071L11.2071 15.7928L6.91421 11.5L11.2071 7.20706L9.79289 5.79285Z"/>\n  <path d="M14.7929 10.2071L19.0858 14.5L14.7929 18.7928L16.2071 20.2071L21.9142 14.5L16.2071 8.79285L14.7929 10.2071Z"/>\n</svg>\n'},53514:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.79289 3.79285L2.08578 7.49995L5.79289 11.2071L7.20711 9.79285L4.91421 7.49995L7.20711 5.20706L5.79289 3.79285Z"/>\n  <path d="M8.79289 7.20706L11.0858 9.49995L8.79289 11.7928L10.2071 13.2071L13.9142 9.49995L10.2071 5.79285L8.79289 7.20706Z"/>\n</svg>\n'},75987:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C5.89543 6 5 6.89543 5 8V18C5 19.1046 5.89543 20 7 20H19C20.1046 20 21 19.1046 21 18V8C21 6.89543 20.1046 6 19 6H7ZM8 8C7.44772 8 7 8.44772 7 9V17C7 17.5523 7.44772 18 8 18H12V8H8Z"/>\n</svg>\n'},54558:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14 9H13V10H12V9V11H11V9H8V11H2L2 5H8V7L14 7V9ZM4 7V9H6V7H4Z"/>\n</svg>\n'},28786:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 9v8h3v-8zM14 9v8h3v-8z"/>\n</svg>\n'},70636:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 5C5 4.44772 5.44772 4 6 4C6.55228 4 7 4.44772 7 5V11C7 11.5523 6.55228 12 6 12C5.44772 12 5 11.5523 5 11V5Z"/>\n  <path d="M9 5C9 4.44772 9.44772 4 10 4C10.5523 4 11 4.44772 11 5V11C11 11.5523 10.5523 12 10 12C9.44772 12 9 11.5523 9 11V5Z"/>\n</svg>\n'},43927:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M3 4c-.552 0-1 .448-1 1v5c0 .552.448 1 1 1h7c.552 0 1-.448 1-1v-1.625l2.171 1.899c.323.283.829.053.829-.376v-4.796c0-.43-.506-.659-.829-.376l-2.171 1.899v-1.625c0-.552-.448-1-1-1h-7z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},49823:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <mask id="pcams" fill="#fff">\n    <path d="M3 4c-.552 0-1 .448-1 1v5c0 .552.448 1 1 1h7c.552 0 1-.448 1-1v-1.625l2.171 1.899c.323.283.829.053.829-.376v-4.796c0-.43-.506-.659-.829-.376l-2.171 1.899v-1.625c0-.552-.448-1-1-1h-7z"/>\n  </mask>\n  <path class="permission-icon" mask="url(#pcams)" d="M11 8.375l.659-.753-1.659-1.451v2.204h1zm2.171 1.899l.659-.753-.659.753zm0-5.549l.659.753-.659-.753zm-2.171 1.899h-1v2.204l1.659-1.451-.659-.753zm-8-1.625v-2c-1.105 0-2 .895-2 2h2zm0 5v-5h-2v5h2zm0 0h-2c0 1.105.895 2 2 2v-2zm7 0h-7v2h7v-2zm0 0v2c1.105 0 2-.895 2-2h-2zm0-1.625v1.625h2v-1.625h-2zm.341.753l2.171 1.899 1.317-1.505-2.171-1.899-1.317 1.505zm2.171 1.899c.97.849 2.488.16 2.488-1.129h-2c0-.43.506-.659.829-.376l-1.317 1.505zm2.488-1.129v-4.796h-2v4.796h2zm0-4.796c0-1.289-1.518-1.978-2.488-1.129l1.317 1.505c-.323.283-.829.053-.829-.376h2zm-2.488-1.129l-2.171 1.899 1.317 1.505 2.171-1.899-1.317-1.505zm-2.512 1.027v1.625h2v-1.625h-2zm0 0h2c0-1.105-.895-2-2-2v2zm-7 0h7v-2h-7v2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},9326:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M6 1.207c0-.445-.539-.669-.854-.354l-2.793 2.793c-.195.195-.195.512 0 .707l2.793 2.793c.315.315.854.092.854-.354v-1.793h5.5c.276 0 .5-.224.5-.5v-1c0-.276-.224-.5-.5-.5h-5.5v-1.793zM10 12.793c0 .445.539.668.854.354l2.793-2.793c.195-.195.195-.512 0-.707l-2.793-2.793c-.315-.315-.854-.092-.854.354v1.793h-5.5c-.276 0-.5.224-.5.5v1c0 .276.224.5.5.5h5.5v1.793z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},4072:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M5.854 2.354c.195-.195.195-.512 0-.707-.195-.195-.512-.195-.707 0l-2.288 2.288-.106.131c-.151.086-.252.248-.252.434s.102.348.252.434l.106.131 2.288 2.288c.195.195.512.195.707 0 .195-.195.195-.512 0-.707l-1.646-1.646h6.793c.276 0 .5-.224.5-.5s-.224-.5-.5-.5h-6.793l1.646-1.646zM9.646 11.646c-.195.195-.195.512 0 .707.195.195.512.195.707 0l2.288-2.288.106-.131c.151-.086.252-.248.252-.434s-.102-.348-.252-.434l-.106-.131-2.288-2.288c-.195-.195-.512-.195-.707 0-.195.195-.195.512 0 .707l1.646 1.646h-6.793c-.276 0-.5.224-.5.5s.224.5.5.5h6.793l-1.646 1.646z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},9027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M3.941 7.92c-.592-.822-.941-1.83-.941-2.92 0-2.761 2.239-5 5-5s5 2.239 5 5c0 1.09-.349 2.099-.941 2.92l-3.191 5.567c-.384.67-1.351.67-1.735 0l-3.191-5.567zm4.059-.92c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},36055:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M8 2.5c-1.933 0-3.5 1.567-3.5 3.5 0 .763.244 1.468.659 2.044l.015.021 2.393 4.173c.192.335.675.335.868 0l2.393-4.173.015-.021c.414-.574.658-1.28.658-2.044 0-1.933-1.567-3.5-3.5-3.5zm-4.5 3.5c0-2.485 2.015-4.5 4.5-4.5s4.5 2.015 4.5 4.5c0 .971-.308 1.871-.832 2.607l-2.367 4.129c-.576 1.005-2.026 1.005-2.603 0l-2.367-4.129c-.523-.736-.832-1.636-.832-2.607zm2.4 0c0-1.16.94-2.1 2.1-2.1 1.16 0 2.1.94 2.1 2.1 0 1.16-.94 2.1-2.1 2.1-1.16 0-2.1-.94-2.1-2.1zm2.1-1.1c-.608 0-1.1.492-1.1 1.1 0 .608.492 1.1 1.1 1.1.608 0 1.1-.492 1.1-1.1 0-.608-.492-1.1-1.1-1.1z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},72272:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M4 6V7.333C4 9.358 5.791 11 8 11C10.209 11 12 9.358 12 7.333V6C12 5.448 12.448 5 13 5C13.552 5 14 5.448 14 6V7.667C14 10.31 11.838 12.503 9 12.927V14.001C9 14.553 8.552 15.001 8 15.001C7.448 15.001 7 14.553 7 14.001V12.927C4.162 12.504 2 10.31 2 7.667V6C2 5.448 2.448 5 3 5C3.552 5 4 5.448 4 6ZM5 3C5 1.343 6.343 0 8 0C9.657 0 11 1.343 11 3V7C11 8.657 9.657 10 8 10C6.343 10 5 8.657 5 7V3Z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},35237:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <g class="permission-icon">\n    <path d="M3.021 5.5c.276 0 .5.224.5.5 0 .967.148 2.365.786 3.506.616 1.1 1.704 1.994 3.714 1.994s3.098-.894 3.714-1.994c.639-1.14.786-2.539.786-3.506 0-.276.224-.5.5-.5s.5.224.5.5c0 1.033-.152 2.635-.914 3.994-.728 1.299-1.997 2.345-4.086 2.489v1.517c0 .276-.224.5-.5.5s-.5-.224-.5-.5v-1.517c-2.09-.144-3.359-1.19-4.086-2.489-.761-1.36-.914-2.961-.914-3.994 0-.276.224-.5.5-.5z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 1c-1.105 0-2 .895-2 2v4c0 1.105.895 2 2 2s2-.895 2-2v-4c0-1.105-.895-2-2-2zm0-1c-1.657 0-3 1.343-3 3v4c0 1.657 1.343 3 3 3s3-1.343 3-3v-4c0-1.657-1.343-3-3-3z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},90077:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M3 1c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h10c.552 0 1-.448 1-1v-11c0-.552-.448-1-1-1h-10zm1 4h1v4h1v3.4c0 .331-.269.6-.6.6h-.9c-.276 0-.5-.224-.5-.5v-7.5zm3 0h2v7.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5v-7.5zm3 7.5v-3.5h1v-4h1v7.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},59301:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M4 2c-.552 0-1 .448-1 1v9c0 .552.448 1 1 1h8c.552 0 1-.448 1-1v-9c0-.552-.448-1-1-1h-8zm1 3h-1v6.5c0 .276.224.5.5.5h.9c.331 0 .6-.269.6-.6v-3.4h-1v-3zm2 0h2v6.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5v-6.5zm3 3v3.5c0 .276.224.5.5.5h1c.276 0 .5-.224.5-.5v-6.5h-1v3h-1z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},22485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M9 3.308c1.722.408 3 1.95 3 3.692v2.586c0 .265.105.52.293.707l.414.414c.188.188.293.442.293.707v.088c0 .276-.224.5-.5.5h-9c-.276 0-.5-.224-.5-.5v-.088c0-.265.105-.52.293-.707l.414-.414c.188-.188.293-.442.293-.707v-2.586c.047-1.742 1.294-3.284 3-3.692v-.308c0-.598.518-1 1-1 .514 0 1 .402 1 1v.308zm-2.5 10.192c0-.175.03-.344.085-.5h2.829c.055.156.085.325.085.5 0 .828-.672 1.5-1.5 1.5s-1.5-.672-1.5-1.5z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},62067:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M8 4.099v-.002l-.767.184c-1.262.302-2.192 1.45-2.233 2.734v2.778c0 .398-.158.779-.439 1.061l-.148.148h7.175l-.148-.148c-.281-.281-.439-.663-.439-1.061v-2.793c0-1.251-.932-2.411-2.231-2.719l-.769-.182zm-4 2.901c.047-1.742 1.294-3.284 3-3.692v-.308c0-.598.518-1 1-1 .514 0 1 .402 1 1v.308c1.722.408 3 1.95 3 3.692v2.793c0 .133.053.26.146.354l.707.707c.094.094.146.221.146.354v.295c0 .276-.224.5-.5.5h-9c-.276 0-.5-.224-.5-.5v-.295c0-.133.053-.26.146-.354l.707-.707c.094-.094.146-.221.146-.354v-2.793zm2.585 6.002c-.055.156-.085.323-.085.498s.03.344.085.5c.206.583.762 1 1.415 1s1.209-.417 1.415-1c.055-.156.085-.325.085-.5s-.03-.342-.085-.498l-.001-.002h-2.829l-.001.002z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},49989:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <g class="permission-icon">\n    <path opacity="0.5" d="M3 9C3 9.55228 2.55228 10 2 10V10C1.44772 10 1 9.55228 1 9V2C1 1.44772 1.44772 1 2 1H9C9.55228 1 10 1.44772 10 2V2C10 2.55228 9.55228 3 9 3H3.5C3.22386 3 3 3.22386 3 3.5V9Z"/>\n    <path d="M5 4C4.44772 4 4 4.44772 4 5V12C4 12.5523 4.44772 13 5 13H12C12.5523 13 13 12.5523 13 12V5C13 4.44772 12.5523 4 12 4H5ZM6 6.5C6 6.22386 6.22386 6 6.5 6H10.5C10.7761 6 11 6.22386 11 6.5V10.5C11 10.7761 10.7761 11 10.5 11H6.5C6.22386 11 6 10.7761 6 10.5V6.5Z" />\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},23217:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path opacity=".5" d="M4 10.5c0 .276-.224.5-.5.5s-.5-.224-.5-.5v-7.5c0-.552.448-1 1-1h7.5c.276 0 .5.224.5.5s-.224.5-.5.5h-7c-.276 0-.5.224-.5.5v7z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6 5v6h6v-6h-6zm-.5-1c-.276 0-.5.224-.5.5v7c0 .276.224.5.5.5h7c.276 0 .5-.224.5-.5v-7c0-.276-.224-.5-.5-.5h-7z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},33520:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.58 2.153l.077.067c3.124 3.124 3.124 8.19 0 11.314-.293.293-.768.293-1.061 0-.293-.293-.293-.768 0-1.061 2.538-2.538 2.538-6.654 0-9.192-.293-.293-.293-.768 0-1.061.268-.268.69-.291.984-.067zm-10.176.067c.268.268.291.69.067.984l-.067.077c-2.483 2.483-2.537 6.476-.162 9.025l.162.168c.293.293.293.768 0 1.061-.293.293-.768.293-1.061 0-3.124-3.124-3.124-8.19 0-11.314.293-.293.768-.293 1.061 0zm8.055 2.054l.077.067c1.953 1.953 1.953 5.118 0 7.071-.293.293-.768.293-1.061 0-.293-.293-.293-.768 0-1.061 1.367-1.367 1.367-3.583 0-4.95-.293-.293-.293-.768 0-1.061.268-.268.69-.291.984-.067zm-5.934.067c.268.268.291.69.067.984l-.067.077c-1.321 1.321-1.365 3.436-.132 4.81l.132.139c.293.293.293.768 0 1.061-.293.293-.768.293-1.061 0-1.953-1.953-1.953-5.118 0-7.071.293-.293.768-.293 1.061 0zm2.475 1.536c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},80490:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.3 2c.126 0 .241.047.329.124l.027.029c3.047 3.047 3.122 7.94.226 11.078l-.193.202c-.092.114-.232.187-.39.187-.276 0-.5-.224-.5-.5 0-.141.058-.268.151-.358l-.002-.002c2.734-2.734 2.734-7.166 0-9.899-.092-.093-.15-.22-.15-.36 0-.276.224-.5.5-.5zm-10.6 0c.276 0 .5.224.5.5 0 .141-.058.268-.15.36-2.672 2.672-2.732 6.965-.182 9.711l.182.189c.092.093.15.22.15.36 0 .276-.224.5-.5.5-.126 0-.242-.047-.33-.124l-.254-.265c-2.833-3.07-2.822-7.819.032-10.877l.222-.23c.088-.077.203-.124.33-.124zm8.5 2.145c.097 0 .188.028.264.075l.071.054c1.893 1.893 1.951 4.928.172 6.89l-.186.193c-.087.073-.199.118-.322.118-.276 0-.5-.224-.5-.5 0-.097.027-.187.075-.263l.053-.073c1.562-1.562 1.562-4.095 0-5.657-.079-.089-.128-.207-.128-.337 0-.276.224-.5.5-.5zm-6.4 0c.276 0 .5.224.5.5 0 .129-.049.247-.128.337-1.51 1.51-1.56 3.927-.151 5.498l.151.159.054.073c.047.076.075.167.075.263 0 .276-.224.5-.5.5-.092 0-.178-.025-.252-.068l-.07-.049-.186-.193c-1.725-1.903-1.723-4.814.005-6.715l.167-.175.071-.054c.077-.048.167-.075.264-.075zm3.2 1.665c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},35587:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2 9.99988H0V14.9998C0 15.5521 0.447715 15.9998 1 15.9998H15C15.5523 15.9998 16 15.5521 16 14.9998V9.99988H14V13.9998H2V9.99988Z"/>\n  <path d="M10 1C10 0.447715 9.55228 0 9 0H7C6.44772 0 6 0.447715 6 1V5.99995H3L8 10.9999L13 5.99995H10V1Z"/>\n</svg>\n'},64916:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14.0046 2C15.1092 2 16 2.89543 16 4V12C16 13.1046 15.1077 14 14.0031 14C10.988 14 5.77574 14 1.99884 14C0.894274 14 0 13.1046 0 12V4C0 2.89543 0.890411 2 1.99498 2C5.09826 2 10.9258 2 14.0046 2ZM6 12.0418V4.01465H3C2.44772 4.01465 2 4.46068 2 5.01297C2 6.48887 2 9.25247 2 10.8705C2 10.9217 2 10.9797 2 11.0417C2 11.594 2.44772 12.0418 3 12.0418H6Z"/>\n</svg>\n'},20277:e=>{e.exports='<svg  viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 1C4.134 1 1 4.134 1 8C1 11.866 4.134 15 8 15C11.866 15 15 11.866 15 8C15 4.134 11.866 1 8 1ZM3 8C3 7.216 3.197 6.484 3.52 5.823C3.522 5.829 3.524 5.839 3.527 5.844L4.125 7.106C4.173 7.209 4.306 7.295 4.419 7.295H4.665C4.778 7.295 4.918 7.376 4.974 7.474L5.492 8.367C5.549 8.467 5.672 8.602 5.764 8.668L6.868 9.463C6.959 9.531 7.128 9.584 7.24 9.584H7.587C7.7 9.584 7.792 9.679 7.792 9.792V11.096C7.792 11.211 7.884 11.304 7.998 11.304H8.231C8.343 11.304 8.435 11.398 8.435 11.513V11.751C8.435 11.866 8.343 11.96 8.231 11.96H7.998C7.884 11.96 7.792 12.053 7.792 12.168V12.979C5.133 12.867 3 10.686 3 8ZM10.372 12.374C10.435 12.297 10.497 12.209 10.531 12.136L11.055 11.01C11.103 10.907 11.143 10.728 11.143 10.613V10.55C11.143 10.435 11.06 10.296 10.961 10.243L9.223 9.319C9.123 9.266 8.948 9.223 8.836 9.221H7.472C7.36 9.221 7.195 9.162 7.107 9.09L6.29 8.423C6.202 8.35 6.131 8.198 6.131 8.083L6.134 7.503C6.135 7.389 6.227 7.295 6.34 7.295H6.893C7.007 7.295 7.099 7.389 7.099 7.503V8.222C7.099 8.336 7.191 8.43 7.304 8.43H7.36C7.473 8.43 7.566 8.336 7.566 8.222L7.565 6.974C7.565 6.858 7.639 6.708 7.729 6.638L8.143 6.316C8.233 6.246 8.398 6.189 8.511 6.189H9.523C9.636 6.189 9.728 6.119 9.728 6.031C9.728 5.944 9.636 5.872 9.523 5.872H9.193C9.08 5.872 8.988 5.779 8.988 5.664L8.99 4.913C8.99 4.797 8.896 4.703 8.785 4.703H8.492C8.379 4.702 8.35 4.635 8.427 4.551L8.866 4.08C8.944 3.996 9.007 3.854 9.007 3.761C9.007 3.667 8.915 3.592 8.802 3.592H8.497C8.385 3.592 8.217 3.537 8.125 3.471L7.741 3.197C7.692 3.162 7.65 3.103 7.619 3.038C7.747 3.029 7.87 3 8 3C8.433 3 8.846 3.073 9.247 3.177C9.25 3.289 9.339 3.38 9.45 3.38H9.747C9.86 3.38 9.952 3.474 9.952 3.589V4.268C9.952 4.384 10.044 4.478 10.157 4.478H10.246C10.359 4.478 10.525 4.422 10.616 4.353C10.616 4.353 10.792 4.215 11.013 4.036C12.213 4.951 13 6.379 13 8C13 9.894 11.929 11.526 10.372 12.374Z"/>\n</svg>\n'},37028:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 13c3.636 0 6.764-2.067 8-5-1.236-2.933-4.364-5-8-5s-6.764 2.067-8 5c1.236 3.035 4.364 5 8 5zm0-1c2.209 0 4-1.791 4-4s-1.791-4-4-4-4 1.791-4 4 1.791 4 4 4zm0-2c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},51491:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 80">\n  <path d="M35.002 0c-.772 0-1.549.028-2.33.083-8.999.87-17.366 5.457-23.425 12.843C3.188 20.312-.113 29.951.003 39.91v33.27c-.001.482.084.96.252 1.406.167.446.414.851.724 1.192.31.34.679.61 1.084.792a3.045 3.045 0 002.535-.01 3.25 3.25 0 001.061-.797c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.094 1.413l2.563 2.825c.82.905 1.933 1.413 3.093 1.413s2.273-.508 3.094-1.413l2.562-2.825c.82-.905 1.933-1.413 3.094-1.413 1.16 0 2.273.508 3.093 1.413l2.563 2.825C32.728 79.492 33.84 80 35 80s2.273-.508 3.094-1.413l2.563-2.825c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.093 1.413l2.563 2.825c.82.905 1.933 1.413 3.094 1.413 1.16 0 2.273-.508 3.093-1.413l2.563-2.825c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.094 1.413c.302.34.662.611 1.06.796a3.042 3.042 0 002.535.01 3.305 3.305 0 001.085-.791c.31-.34.557-.746.724-1.192.168-.445.253-.924.252-1.406V38.587c0-10.234-3.688-20.048-10.251-27.285C53.185 4.066 44.284 0 35 0zm-8.75 36.176c0 1.43-.385 2.83-1.106 4.02-.721 1.189-1.746 2.116-2.945 2.664-1.2.547-2.519.69-3.792.412-1.272-.28-2.442-.969-3.36-1.98-.917-1.012-1.542-2.302-1.795-3.705a7.927 7.927 0 01.373-4.18c.497-1.322 1.338-2.452 2.417-3.247a6.137 6.137 0 013.646-1.22c1.74 0 3.41.763 4.64 2.12 1.23 1.356 1.922 3.197 1.922 5.116zm30.624 0c0 1.43-.385 2.83-1.106 4.02-.722 1.189-1.746 2.116-2.945 2.664-1.2.547-2.519.69-3.792.412-1.273-.28-2.442-.969-3.36-1.98-.918-1.012-1.543-2.302-1.796-3.705a7.928 7.928 0 01.374-4.18c.496-1.322 1.337-2.452 2.417-3.247a6.137 6.137 0 013.645-1.22c1.74 0 3.41.763 4.64 2.12 1.231 1.356 1.923 3.197 1.923 5.116z" fill="url(#private-ghost-gradient)"/>\n</svg>\n'},2018:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path d="M8 2c-.11 0-.221.004-.333.013-1.285.13-2.48.818-3.346 1.926-.866 1.108-1.337 2.554-1.32 4.047v4.99c0 .073.011.145.035.212a.56.56 0 00.104.178.474.474 0 00.155.12.419.419 0 00.362-.002.468.468 0 00.151-.12.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 005.5 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 008 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 0010.5 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212a.469.469 0 00.152.12.411.411 0 00.362.001.474.474 0 00.155-.118.56.56 0 00.103-.18.623.623 0 00.036-.21V7.788c0-1.535-.527-3.007-1.464-4.093C10.598 2.61 9.326 2 8 2zM6.75 7.426c0 .215-.055.425-.158.603a.982.982 0 01-.42.4.82.82 0 01-.542.062.906.906 0 01-.48-.297 1.147 1.147 0 01-.257-.556 1.245 1.245 0 01.054-.627c.07-.198.19-.368.345-.487a.85.85 0 01.52-.183c.25 0 .488.114.664.318.176.203.274.48.274.767zm4.375 0c0 .215-.055.425-.158.603a.982.982 0 01-.42.4.82.82 0 01-.542.062.906.906 0 01-.48-.297 1.147 1.147 0 01-.257-.556 1.245 1.245 0 01.054-.627c.07-.198.19-.368.345-.487a.85.85 0 01.52-.183c.25 0 .488.114.664.318.175.203.274.48.274.767z"/>\n</svg>\n'},34166:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 3H5V5H3V3ZM2 2H3H5H6V3V5V6H5H3H2V5V3V2ZM10 3H13V6H10V3ZM9 2H10H13H14V3V6V7H13H10H9V6V3V2ZM6 10H3V13H6V10ZM3 9H2V10V13V14H3H6H7V13V10V9H11V10H12V11H11V12H10H9V11H10V10H9H8V11V12H9V13V14H10V13H11H12V14H13V13H14V11H13V10H14V9H13V8H12V9H11V8H7V9H6H3ZM12 9H13V10H12V9ZM13 11H12V13H13V11ZM6 7H2V8H6V7ZM8 7V4H7V7H8ZM8 2V3L7 3V2H8ZM11 4H12V5H11V4ZM5 11H4V12H5V11Z"/>\n</svg>\n'},48783:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12">\n  <path d="M10 0H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 9H3V3h2zm4 0H7V3h2z"/>\n</svg>'},83035:e=>{e.exports='<svg width="72" height="72" xmlns="http://www.w3.org/2000/svg">\n    <path d="M71 52a1 1 0 00-1-1H36a1 1 0 00-1 1v7a1 1 0 001 1h34a1 1 0 001-1v-7z" fill-opacity=".3"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.397 10.5c-1.333 0-2.004 1.608-1.066 2.555l15.435 15.593a.5.5 0 010 .704L1.331 44.945c-.938.947-.267 2.555 1.066 2.555h6.095c.4 0 .784-.16 1.066-.445l16.828-17a1.5 1.5 0 000-2.11l-16.828-17a1.5 1.5 0 00-1.066-.445H2.397zm-.355 1.852a.5.5 0 01.355-.852h6.095a.5.5 0 01.355.148l16.828 17a.5.5 0 010 .704l-16.828 17a.5.5 0 01-.355.148H2.397a.5.5 0 01-.355-.852l15.435-15.593a1.5 1.5 0 000-2.11L2.042 12.352zM20.215 10.5c-1.332 0-2.003 1.608-1.066 2.555l15.436 15.593a.5.5 0 010 .704L19.149 44.945c-.937.947-.267 2.555 1.066 2.555h10.55c.4 0 .784-.16 1.066-.445l16.828-17a1.5 1.5 0 000-2.11l-16.828-17a1.5 1.5 0 00-1.066-.445h-10.55zm-.355 1.852a.5.5 0 01.355-.852h10.55a.5.5 0 01.355.148l16.828 17a.5.5 0 010 .704l-16.828 17a.5.5 0 01-.355.148h-10.55a.5.5 0 01-.355-.852l15.435-15.593a1.5 1.5 0 000-2.11L19.86 12.352zM36 50.5a1.5 1.5 0 00-1.5 1.5v7a1.5 1.5 0 001.5 1.5h34a1.5 1.5 0 001.5-1.5v-7a1.5 1.5 0 00-1.5-1.5H36zm-.5 1.5a.5.5 0 01.5-.5h34a.5.5 0 01.5.5v7a.5.5 0 01-.5.5H36a.5.5 0 01-.5-.5v-7z"/>\n</svg>\n'},24319:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1.20711 4.20711C0.761654 3.76165 1.07714 3 1.70711 3C1.89464 3 2.0745 3.0745 2.20711 3.20711L5.29289 6.29289C5.68342 6.68342 5.68342 7.31658 5.29289 7.70711L2.20711 10.7929C2.0745 10.9255 1.89464 11 1.70711 11C1.07714 11 0.761653 10.2383 1.20711 9.79289L3.29289 7.70711C3.68342 7.31658 3.68342 6.68342 3.29289 6.29289L1.20711 4.20711Z"/>\n  <path d="M5.70711 4.70711C5.07714 4.07714 5.52331 3 6.41421 3H6.58579C6.851 3 7.10536 3.10536 7.29289 3.29289L10.2929 6.29289C10.6834 6.68342 10.6834 7.31658 10.2929 7.70711L7.29289 10.7071C7.10536 10.8946 6.851 11 6.58579 11H6.41421C5.52331 11 5.07714 9.92286 5.70711 9.29289L7.29289 7.70711C7.68342 7.31658 7.68342 6.68342 7.29289 6.29289L5.70711 4.70711Z"/>\n  <path d="M16 13C16 12.4477 15.5523 12 15 12H9C8.44771 12 8 12.4477 8 13C8 13.5523 8.44771 14 9 14H15C15.5523 14 16 13.5523 16 13Z"/>\n</svg>\n'},50983:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 4h10v1H3zM3 6h10v1H3zM3 8h10v1H3zM3 10h6v1H3z"/>\n</svg>\n'},44425:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 8h14v1h-14zM1 6h14v1h-14zM1 4h14v1h-14zM1 10h8v1h-8z"/></svg>'},38037:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 1h1v8h-1zM7 1h1v14h-1zM9 1h1v14h-1zM11 1h1v14h-1z"/></svg>'},46708:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.35355 1.64645C7.15829 1.45118 6.84171 1.45118 6.64645 1.64645C6.45118 1.84171 6.45118 2.15829 6.64645 2.35355L8.29289 4H3.5C2.11929 4 1 5.11929 1 6.5V9.5C1 10.8807 2.11929 12 3.5 12V11C2.67157 11 2 10.3284 2 9.5V6.5C2 5.67157 2.67157 5 3.5 5H8.29289L6.64645 6.64645C6.45118 6.84171 6.45118 7.15829 6.64645 7.35355C6.84171 7.54882 7.15829 7.54882 7.35355 7.35355L9.85355 4.85355C9.90149 4.80561 9.93766 4.75036 9.96206 4.69139C9.98425 4.63777 9.9967 4.58107 9.99943 4.52399C9.99981 4.516 10 4.508 10 4.5M9.96206 4.30861C9.93766 4.24964 9.90149 4.19439 9.85355 4.14645L7.35355 1.64645M9.96206 4.30861C9.98615 4.36669 9.9996 4.4303 9.99999 4.497Z"/>\n  <path fill-rule="evenodd" d="M15 6.5C15 5.11929 13.8807 4 12.5 4V5C13.3284 5 14 5.67157 14 6.5V9.5C14 10.3284 13.3284 11 12.5 11H7.70711L9.35355 9.35355C9.54882 9.15829 9.54882 8.84171 9.35355 8.64645C9.15829 8.45118 8.84171 8.45118 8.64645 8.64645L6.14645 11.1464C5.95118 11.3417 5.95118 11.6583 6.14645 11.8536L8.64645 14.3536C8.84171 14.5488 9.15829 14.5488 9.35355 14.3536C9.54882 14.1583 9.54882 13.8417 9.35355 13.6464L7.70711 12H12.5C13.8807 12 15 10.8807 15 9.5V6.5Z"/>\n</svg>\n'},91086:e=>{e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 13a1 1 0 001 1h8a1 1 0 100-2H9a1 1 0 00-1 1z"/>\n</svg>\n'},58579:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 8C4 8.55228 4.44772 9 5 9H11C11.5523 9 12 8.55228 12 8C12 7.44772 11.5523 7 11 7H5C4.44772 7 4 7.44772 4 8Z"/>\n</svg>\n'},78670:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <rect x="4" y="8" width="8" height="1" rx="0.5"/>\n</svg>\n'},47062:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n      <path d="M13 6c-3.866 0-7 3.133-7 7h2c0-2.758 2.243-5 5-5s5 2.242 5 5c0 2.757-2.243 5-5 5-1.61 0-3.03-.78-3.946-1.966H6.7C7.83 18.378 10.222 20 13 20c3.866 0 7-3.135 7-7 0-3.867-3.134-7-7-7"/>\n      <path d="M13 13H6V6l7 7z"/>\n    <path d="M12 11h2v4h-2z"/>\n</svg>'},52381:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.60744 11.9857C6.6858 11.895 5.82411 11.4876 5.16904 10.833L5.16806 10.832L5.17 10.8301C5.00333 10.6634 4.40001 10.6 4.00001 11C3.60003 11.4 3.59334 12.0733 3.75998 12.24L3.75736 12.2427C3.99548 12.4807 4.25234 12.6975 4.5238 12.8904C5.37123 13.4928 6.36578 13.8681 7.4119 13.9711C8.79334 14.1072 10.1792 13.76 11.3334 12.9888C12.4876 12.2176 13.3387 11.0701 13.7416 9.74172C14.1446 8.41336 14.0745 6.98638 13.5433 5.70391C13.0121 4.42144 12.0526 3.36284 10.8284 2.70848C9.60416 2.05412 8.19092 1.84449 6.82946 2.1153C5.468 2.38611 4.24256 3.12061 3.36194 4.19365C3.3366 4.22452 3.3116 4.25561 3.28693 4.28693L1.85355 2.85355C1.53857 2.53857 1 2.76165 1 3.20711V8H5.79289C6.23835 8 6.46143 7.46143 6.14645 7.14645L4.71252 5.71252C4.77282 5.62587 4.83671 5.54137 4.90409 5.45926C5.49191 4.74301 6.30989 4.25273 7.21866 4.07196C8.12744 3.8912 9.07078 4.03113 9.88795 4.46791C10.7051 4.9047 11.3456 5.61132 11.7001 6.46736C12.0547 7.32341 12.1015 8.27592 11.8325 9.1626C11.5636 10.0493 10.9955 10.8153 10.2251 11.33C9.45464 11.8448 8.52956 12.0765 7.60744 11.9857Z"/>\n  <path d="M8 6.00001C7.44772 6.00001 7 6.44772 7 7.00001V9.00001C7 9.55229 7.44772 10 8 10C8.55228 10 9 9.55229 9 9.00001V7.00001C9 6.44772 8.55228 6.00001 8 6.00001Z"/>\n</svg>\n'},44474:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.01415 3.98943C4.43062 4.42386 3.9526 4.97755 3.60883 5.60883L2 4V8H6L4.47786 6.47786C4.74354 5.86311 5.16683 5.32572 5.70868 4.92232C6.3855 4.41843 7.20954 4.15169 8.05325 4.16341C8.89697 4.17512 9.71329 4.46462 10.3759 4.9871C11.0384 5.50958 11.5103 6.2359 11.7184 7.05362C11.9265 7.87134 11.8593 8.73487 11.5271 9.51053C11.1949 10.2862 10.6163 10.9307 9.88088 11.3443C9.14542 11.758 8.29413 11.9176 7.45877 11.7986C6.62397 11.6797 5.85162 11.289 5.26111 10.6871L5.25992 10.6859L4.42936 11.5001C4.66585 11.7413 4.92474 11.9566 5.20151 12.1435C5.82559 12.565 6.5406 12.8426 7.29472 12.95C8.38328 13.1051 9.49262 12.8971 10.451 12.358C11.4094 11.819 12.1634 10.9792 12.5962 9.96839C13.0291 8.95762 13.1167 7.83235 12.8455 6.76676C12.5743 5.70117 11.9594 4.7547 11.096 4.07385C10.2326 3.393 9.16885 3.01574 8.0694 3.00048C6.96994 2.98522 5.89612 3.3328 5.01415 3.98943Z"/>\n  <path d="M8 6C7.44772 6 7 6.44772 7 7V9C7 9.55229 7.44772 10 8 10C8.55228 10 9 9.55229 9 9V7C9 6.44772 8.55228 6 8 6Z"/>\n</svg>\n'},71303:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n    <path d="M16 13l-6 5V8l6 5z" />\n</svg>'},19423:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.2929 7.29289C10.6834 7.68342 10.6834 8.31658 10.2929 8.70711L7.70711 11.2929C7.07714 11.9229 6 11.4767 6 10.5858L6 5.41421C6 4.52331 7.07714 4.07714 7.70711 4.70711L10.2929 7.29289Z"/>\n</svg>\n'},59098:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="6,5 10,8.5 6,12"></polygon>\n</svg>'},55592:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zM52.71 54.32a2.8 2.8 0 002.86-2.97A38.63 38.63 0 0020.02 15.8a2.8 2.8 0 00-2.97 2.86v.3a3.2 3.2 0 002.97 3.1A32.38 32.38 0 0149.3 51.36a3.2 3.2 0 003.1 2.97h.31zm-23.77-5.95a5.94 5.94 0 11-11.89 0 5.94 5.94 0 0111.89 0zm14.7 2.98c.18 1.63-1.17 2.97-2.81 2.97h-.25c-1.64 0-2.95-1.34-3.19-2.97a20.55 20.55 0 00-17.38-17.37c-1.62-.24-2.96-1.55-2.96-3.19v-.25c0-1.64 1.34-2.99 2.97-2.8a26.74 26.74 0 0123.61 23.61z" opacity=".3"/>\n  <path fill-rule="evenodd" d="M54.76 70.3c4.76-.7 8.15-2.08 10.8-4.73 2.66-2.66 4.04-6.05 4.73-10.81.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zm1.8-19.03a3.8 3.8 0 01-3.85 4.05h-.3a4.2 4.2 0 01-4.1-3.88 31.38 31.38 0 00-28.38-28.38 4.2 4.2 0 01-3.88-4.1v-.3a3.8 3.8 0 014.05-3.86 39.63 39.63 0 0136.47 36.47zm-26.62-2.9a6.94 6.94 0 11-13.89 0 6.94 6.94 0 0113.89 0zm14.69 2.87c.25 2.3-1.64 4.08-3.8 4.08h-.25c-2.22 0-3.88-1.8-4.18-3.82a19.55 19.55 0 00-16.53-16.53c-2.03-.3-3.82-1.96-3.82-4.18v-.25c0-2.16 1.78-4.05 4.08-3.8a27.75 27.75 0 0124.5 24.5zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72zm19.57-20.65a2.8 2.8 0 01-2.86 2.97h-.3a3.2 3.2 0 01-3.1-2.97 32.38 32.38 0 00-29.29-29.28 3.2 3.2 0 01-2.97-3.11v-.3a2.8 2.8 0 012.97-2.86 38.63 38.63 0 0135.55 35.55zM23 54.32a5.94 5.94 0 100-11.9 5.94 5.94 0 000 11.9zm17.83 0c1.64 0 2.99-1.34 2.8-2.97a26.75 26.75 0 00-23.61-23.61c-1.63-.19-2.97 1.16-2.97 2.8v.25c0 1.64 1.34 2.95 2.96 3.19A20.55 20.55 0 0137.4 51.35c.24 1.63 1.55 2.97 3.19 2.97h.25z"/>\n</svg>\n'},24885:e=>{e.exports='<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80">\n  <path d="M40 80c17.53 0 27.27 0 33.64-6.36C80 67.27 80 57.53 80 40s0-27.27-6.36-33.64C67.27 0 57.53 0 40 0S12.73 0 6.36 6.36C0 12.73 0 22.47 0 40s0 27.27 6.36 33.64C12.73 80 22.47 80 40 80z" fill="#FF6600"/>\n  <path d="M24.2 62.8c3.69 0 6.68-3.02 6.68-6.74s-2.99-6.74-6.68-6.74a6.72 6.72 0 00-6.7 6.74c0 3.72 3 6.74 6.7 6.74z" fill="white"/>\n  <path d="M64.12 58.35a4.16 4.16 0 01-4.25 4.45c-2.46 0-4.43-2-4.71-4.45a38.13 38.13 0 00-33.17-33.48c-2.46-.3-4.48-2.28-4.48-4.76a4.18 4.18 0 014.48-4.28c22.27 2.14 40.04 20.07 42.13 42.52z" fill="white"/>\n  <path d="M48.41 58.35c.35 2.44-1.68 4.45-4.15 4.45-2.46 0-4.41-2.02-4.9-4.43a22.45 22.45 0 00-17.39-17.59c-2.43-.5-4.46-2.46-4.46-4.94 0-2.49 2.02-4.53 4.48-4.18a31.41 31.41 0 0126.42 26.7z" fill="white"/>\n</svg>\n'},81346:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 12C5 13.1045 4.10457 14 3 14C1.89543 14 1 13.1045 1 12C1 10.8954 1.89543 9.99997 3 9.99997C4.10457 9.99997 5 10.8954 5 12Z"/>\n  <path d="M13 14C13.5523 14 14.004 13.5516 13.9616 13.0009C13.8563 11.6359 13.536 10.2938 13.0104 9.02508C12.3571 7.44785 11.3996 6.01474 10.1924 4.80758C8.98523 3.60042 7.55212 2.64284 5.97488 1.98953C4.70613 1.464 3.36409 1.14362 1.99903 1.03841C1.44837 0.995969 1 1.44768 1 1.99997V2.10229C1 2.65457 1.44865 3.09753 1.99861 3.14813C3.08735 3.24832 4.15675 3.51197 5.17036 3.93182C6.49253 4.47948 7.69388 5.2822 8.70582 6.29414C9.71777 7.30609 10.5205 8.50744 11.0681 9.82961C11.488 10.8432 11.7516 11.9126 11.8518 13.0014C11.9024 13.5513 12.3454 14 12.8977 14H13Z"/>\n  <path d="M9 14C9.55229 14 10.0057 13.5509 9.9445 13.002C9.85086 12.1627 9.63936 11.3391 9.31492 10.5558C8.86262 9.46389 8.19969 8.47173 7.36396 7.63601C6.52823 6.80028 5.53608 6.13734 4.44415 5.68505C3.66087 5.36061 2.83725 5.14911 1.99795 5.05547C1.44907 4.99423 1 5.44768 1 5.99997V6.08323C1 6.63551 1.45001 7.07582 1.99653 7.15539C2.56208 7.23773 3.11654 7.39004 3.64692 7.60973C4.4861 7.95733 5.2486 8.46682 5.89087 9.10909C6.53315 9.75137 7.04264 10.5139 7.39023 11.353C7.60993 11.8834 7.76223 12.4379 7.84458 13.0034C7.92415 13.55 8.36446 14 8.91674 14H9Z"/>\n</svg>\n'},28481:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.154C1 1.964 1.964 1 3.154 1h9.692C14.036 1 15 1.964 15 3.154v9.692c0 1.19-.964 2.154-2.154 2.154H3.154A2.154 2.154 0 011 12.846V3.154zm2.154-1.077h9.692c.595 0 1.077.482 1.077 1.077v9.692c0 .595-.482 1.077-1.077 1.077H3.154a1.077 1.077 0 01-1.077-1.077V3.154c0-.595.482-1.077 1.077-1.077z"/>\n  <path class="small-icon-outline" d="M12.5 12.5v-1a8 8 0 00-8-8h-1v1.4h1a6.6 6.6 0 016.6 6.6v1h1.4z"/>\n  <path class="small-icon-outline" d="M6.5 11a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>\n  <path class="small-icon-outline" d="M9.5 11.5v1H8.1v-1a3.6 3.6 0 00-3.6-3.6h-1V6.5h1a5 5 0 015 5z"/>\n</svg>\n'},21287:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path ss="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M14 2H2v12h12V2zm-1.5 10.5v-1a8 8 0 00-8-8h-1v1.4h1a6.6 6.6 0 016.6 6.6v1h1.4zm-6-1.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3 1.5v-1a5 5 0 00-5-5h-1v1.4h1a3.6 3.6 0 013.6 3.6v1h1.4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M1 3.154C1 1.964 1.964 1 3.154 1h9.692C14.036 1 15 1.964 15 3.154v9.692c0 1.19-.964 2.154-2.154 2.154H3.154A2.154 2.154 0 011 12.846V3.154zM3 2h10c.595 0 1 .405 1 1v10c0 .595-.405 1-1 1H3c-.595 0-1-.405-1-1V3c0-.595.405-1 1-1z"/>\n</svg>\n'},25650:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M8.805 12h-5.805v-1h1v-7h-1v-1h5.866c.703 0 1.747.5 3.134 1.5l-.092 2.183c-.167.192-1.294.311-1.609.47.462.176 1.472 1.126 1.7 1.346v2c-.543.703-2.011 1.5-3.195 1.5zm-.644-1.042c.33 0 .566-.205.706-.615.088-.259.133-.573.133-.94 0-.619-.129-1.041-.387-1.265-.137-.12-.318-.18-.544-.18h-1.069v3zm-.077-3.941c.251 0 .447-.077.587-.231.22-.242.329-.677.329-1.305 0-.633-.117-1.059-.35-1.279-.132-.123-.327-.185-.587-.185h-1.063v3z" fill-rule="evenodd"/></svg>'},41028:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.295 9.866l-.991.991c-.286.286-.67.444-1.081.444-.411 0-.794-.158-1.081-.444-.596-.596-.596-1.565 0-2.161l.991-.991-1.178-1.178-.991.991c-1.243 1.242-1.243 3.276 0 4.518.621.621 1.44.932 2.259.932s1.638-.311 2.259-.932l.991-.991-1.178-1.178M7.705 6.134l.991-.991c.286-.286.67-.444 1.081-.444.411 0 .794.158 1.081.444.286.286.444.67.444 1.081 0 .411-.158.794-.444 1.081l-.991.991 1.178 1.178.991-.991c1.242-1.242 1.242-3.276 0-4.518-.621-.621-1.44-.932-2.259-.932s-1.638.311-2.259.932l-.991.991 1.178 1.179"/></svg>\n'},22713:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path class="hl" d="M5 7.5l-4 3.5v-7z"/>\n  <g>\n    <path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zM6.001 8h8v1h-8zm0 2h8v1h-8z"/>\n    <path d="M2 12h3v1h-3zm4 0h4v1h-4z"/>\n  </g>\n</svg>\n'},57842:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 1.5C4 1.22386 4.22386 1 4.5 1H11.5C11.7761 1 12 1.22386 12 1.5C12 1.77614 11.7761 2 11.5 2H4.5C4.22386 2 4 1.77614 4 1.5Z"/>\n  <path d="M7 10L5 8L3 12H13L10 6L7 10Z"/>\n  <path fill-rule="evenodd" d="M2 3H14C14.5523 3 15 3.44772 15 4V13C15 13.5523 14.5523 14 14 14H2C1.44772 14 1 13.5523 1 13V4C1 3.44772 1.44772 3 2 3ZM14 4H2V13H14L14 4Z"/>\n</svg>\n'},71360:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl">\n    <path d="M3 2v-1h1v3h1v1h-3v-1h1v-1h-1v-1zm1 7h1v1h-3v-1h1v-1h1v1zm-2-3h2v1h-2v-1zm2 1h1v1h-1v-1zm0 5v1h-1v-1h-1v-1h3v1h-1zm0 1h1v1h-1v-1zm-2 1h2v1h-2v-1z"/>\n    <path opacity=".5" style="mix-blend-mode:multiply" d="M3 1h2v4h-2zm0 5h2v4h-2zm0 5h2v4h-2z"/>\n  </g>\n</svg>\n'},92636:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl" transform="translate(2 1)">\n    <circle id="Oval" cx="1.5" cy="1.5" r="1.5"/>\n    <circle cx="1.5" cy="6.5" r="1.5"/>\n    <circle cx="1.5" cy="11.5" r="1.5"/>\n  </g>\n</svg>\n'},70773:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 11h2v1h-6v-1h2l3-7h-2v-1h6v1h-2z"/></svg>\n'},37362:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm1 2h10v1h-10zm-1 2h12v1h-12zM2 10h12v1h-12zm2-2h8v1h-8z"/><path d="M5 12h6v1h-6z"/></svg>\n'},76992:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h6v1h-6z"/></svg>\n'},41885:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h11v1h-11zm0 2h10v1h-10zm0 2h12v1h-12zm0 2h9v1h-9zm0 2h11v1h-11zm0 2h6v1h-6z"/></svg>\n'},7246:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3 2h11v1h-11zm1 2h10v1h-10zM2 6h12v1h-12zm3 2h9v1h-9z"/><path d="M3 10h11v1h-11zm5 2h6v1h-6z"/></svg>\n'},10681:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm-4.001 2h3v1h-3zm4 0h4v1h-4z"/><path class="hl" d="M1 7.5l4-3.5v7z"/></svg>\n'},54472:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M11.046 6.954c-.629-1.387-2.026-2.354-3.646-2.354-2.206 0-4 1.794-4 4s2.394 4 4.6 4v1.599c-3.093 0-6.2-2.507-6.2-5.599 0-3.094 2.507-5.6 5.6-5.6 2.06 0 3.86 1.112 4.832 2.768l1.768-1.768v5h-5z"/></svg>\n'},269:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M13.923 3.854c.59-.851.476-2.296-.423-2.854-.902-.557-2.25-.017-2.842.834-.557.804-.53 2.076-.949 2.987-.541 1.176-2.627 1.026-4.709 0-1.144 2.095-2.424 4.639-4 6.467l1.498.928c.674-.109 1.509-.662 1.849-1.269-.027.729-.316 1.375-.885 1.865l2.831 1.748c.361-.34.698-.61 1.07-.84-.211.402-.352.828-.417 1.244l1.676 1.036c.993-1.803 2.924-4.59 4.274-6.171-1.867-1.42-2.421-3.085-1.413-4.034.725-.685 1.903-1.165 2.441-1.942zm-.805-2.155c.427.242.546.743.264 1.112-.276.373-.851.476-1.276.234-.429-.243-.547-.74-.267-1.112.278-.372.851-.477 1.279-.234zm-3.091 10.029l-5.445-3.366 1.07-1.543 5.443 3.366z" fill-rule="evenodd"/></svg>'},86721:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 13H7V4H6.32005C6.11005 4 5.88005 4.02 5.62005 4.05C5.36005 4.09 5.10005 4.19 4.84005 4.35C4.58005 4.51 4.34005 4.78 4.10005 5.13C3.86005 5.49 3.65005 5.98 3.47005 6.61H3.30005V3H12.69V6.61H12.52C12.35 5.98 12.14 5.49 11.9 5.13C11.66 4.78 11.41 4.52 11.14 4.35C10.88 4.19 10.62 4.08 10.36 4.05C10.1 4.01 9.87005 4 9.66005 4H9V13H11V14H5V13Z"/>\n  <path d="M14 8H2V9H14V8Z"/>\n</svg>\n'},65438:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M3 13h9v1h-9zM7.5 10.75l1.5-.75v-6h-1v-1h4v1h-1v6l-2 2h-3l-2-2v-6h-1v-1h4v1h-1v6z"/></g></svg>'},94537:e=>{e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M3.768 5.768c.973-1.656 2.773-2.768 4.832-2.768 3.093 0 5.6 2.506 5.6 5.6 0 3.092-3.107 5.599-6.2 5.599v-1.599c2.206 0 4.6-1.794 4.6-4s-1.794-4-4-4c-1.619 0-3.017.967-3.646 2.354l2.046 2.046h-5v-5z"/></svg>\n'},61453:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.26579 2H8.50199L14 14H12.2038L10.5646 10.4651H5.33978L3.8099 14H2L7.26579 2ZM9.84747 8.94352L7.86682 4.61794L6.0296 8.94352H9.84747Z"/>\n</svg>\n'},10375:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13.76 15.17a5 5 0 111.41-1.41l3.54 3.53a1 1 0 01-1.42 1.42l-3.53-3.54zM14 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n</svg>'},4868:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.75739 10.1716C7.96696 10.6951 7.01908 11 6 11C3.23858 11 1 8.76142 1 6C1 3.23858 3.23858 1 6 1C8.76142 1 11 3.23858 11 6C11 7.01908 10.6951 7.96696 10.1716 8.75739L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L8.75739 10.1716ZM9 6C9 7.65685 7.65685 9 6 9C4.34315 9 3 7.65685 3 6C3 4.34315 4.34315 3 6 3C7.65685 3 9 4.34315 9 6Z"/>\n</svg>\n'},5983:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.47244 10.3917C8.9108 10.7755 8.23162 11 7.5 11C5.567 11 4 9.433 4 7.5C4 5.567 5.567 4 7.5 4C9.433 4 11 5.567 11 7.5C11 8.23162 10.7755 8.9108 10.3917 9.47244L12.4596 11.5404C12.7135 11.7942 12.7135 12.2058 12.4596 12.4596C12.2058 12.7135 11.7942 12.7135 11.5404 12.4596L9.47244 10.3917ZM9.9 7.5C9.9 8.82548 8.82548 9.9 7.5 9.9C6.17452 9.9 5.1 8.82548 5.1 7.5C5.1 6.17452 6.17452 5.1 7.5 5.1C8.82548 5.1 9.9 6.17452 9.9 7.5Z"/>\n</svg>\n'},687:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="selectbox-checkmark" viewBox="0 0 16 16">\n  <path d="M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z"/>\n</svg>\n'},45243:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.57087 9.63143H5.15509L4.85492 10.3844C4.408 11.4698 4.18788 12.182 4.18788 12.5144C4.18788 12.8672 4.30795 13.1385 4.54141 13.3217C4.78155 13.5048 5.08171 13.5998 5.45525 13.5998V14H2V13.5998C2.51362 13.5184 2.9005 13.3352 3.1473 13.0435C3.39411 12.7518 3.70094 12.1481 4.05447 11.2256C4.08116 11.1374 4.22123 10.7982 4.46804 10.2148L7.84992 2H8.18344L12.0656 11.3951L12.5992 12.6365C12.7193 12.9146 12.8794 13.1317 13.0862 13.2945C13.2863 13.4573 13.5931 13.5591 14 13.5998V14H9.4308V13.5998C9.99111 13.5998 10.3713 13.5591 10.5648 13.4709C10.7649 13.3895 10.8583 13.2199 10.8583 12.9689C10.8583 12.84 10.7248 12.4601 10.4647 11.8293L9.57087 9.63143ZM9.42412 9.23799L7.36965 4.19785L5.32185 9.23799H9.42412Z"/>\n</svg>\n'},16761:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.892 2.298a.5.5 0 01.707 0l1.085 1.086a.5.5 0 010 .707l-.939.94-1.793-1.793.94-.94zm1.414-.707a1.5 1.5 0 00-2.122 0L8.892 2.884l-.354.354.354.353 2.5 2.5.353.354.354-.354 1.293-1.293a1.5 1.5 0 000-2.12L12.306 1.59zM2 9.776v3.207h3.207l5.855-5.855-3.208-3.207L2 9.776zM3 12v-1.852l4.854-4.812 1.793 1.792L4.834 12H3z"/><path d="M2 14h10v1H2z"/></svg>\n'},71665:e=>{e.exports='<svg width="229" height="141" xmlns="http://www.w3.org/2000/svg">\n  \x3c!-- outline --\x3e\n  <path fill-rule="evenodd" d="M40 129h113v4a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8V61a8 8 0 0 0-8-8h-7V21a8 8 0 0 0-8-8H48a8 8 0 0 0-8 8v94a7.981 7.981 0 0 0 2.708 6H34v2a6 6 0 0 0 6 6zm2-14a6 6 0 0 0 6 6h105V61a8 8 0 0 1 8-8h23V21a6 6 0 0 0-6-6H48a6 6 0 0 0-6 6v94zm111 8v4H40a4 4 0 0 1-4-4h117zm11.026-68H161a6 6 0 0 0-6 6v72a6 6 0 0 0 6 6h32a6 6 0 0 0 6-6V61a6 6 0 0 0-6-6h-3.026l-2.282 3.862a2 2 0 0 1-1.722.982h-17.94a2 2 0 0 1-1.722-.982L164.026 55z"/>\n  \x3c!-- devices background --\x3e\n  <g fill-opacity=".3">\n    <path d="M62.636 25.636a9 9 0 1 1 12.729 12.73 9 9 0 0 1-12.728-12.73zm7.737 11.885c1.483-2.583 2.968-5.163 4.453-7.743.18-.314.252-.646.207-1.005-.11-.828-.95-1.427-1.766-1.247-1.001.22-1.491 1.256-1.03 2.177.166.337.246.695.253 1.12l-.023.245a2.4 2.4 0 0 1-2.525 2.131c-.87-.053-1.523-.472-1.969-1.218a69.107 69.107 0 0 1-.697-1.2l-.203-.355-.417-.725-.006-.01-.263-.458-.257-.447-.301-.519c-.307-.525-.771-.805-1.376-.773-1.143.06-1.787 1.271-1.217 2.267.565.987 1.133 1.972 1.701 2.96l.933 1.62a691.079 691.079 0 0 0 1.868 3.241c.311.534.795.793 1.41.748.549-.04.95-.33 1.225-.81z"/>\n    <path d="M86 115a3 3 0 0 0 3-3V50a3 3 0 0 0-3-3H51a3 3 0 0 0-3 3v62a3 3 0 0 0 3 3h35zm91-89a3 3 0 0 1-3 3H98a3 3 0 0 1 0-6h76a3 3 0 0 1 3 3zm-3 15a3 3 0 1 0 0-6H98a3 3 0 1 0 0 6h76zm3 12h-16a8 8 0 0 0-8 8v54H98a3 3 0 0 1-3-3V50a3 3 0 0 1 3-3h76a3 3 0 0 1 3 3v3zM34 121h119v7h48v6a6 6 0 0 1-6 6h-36a6 6 0 0 1-6-6v-5H40a6 6 0 0 1-6-6v-2zm132-27a2 2 0 0 1 2-2h25a2 2 0 1 1 0 4h-25a2 2 0 0 1-2-2zm2 5a2 2 0 1 0 0 4h25a2 2 0 1 0 0-4h-25zm-2 9a2 2 0 0 1 2-2h25a2 2 0 1 1 0 4h-25a2 2 0 0 1-2-2z"/>\n    <path d="M161 92a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-2 9.044a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2 4.956a2 2 0 1 0-.001 3.999A2 2 0 0 0 161 106z"/>\n    <path d="M181.951 71.005c-2.735-2.673-7.166-2.673-9.9 0a6.735 6.735 0 0 0 0 9.68c2.734 2.672 7.165 2.672 9.9 0a6.74 6.74 0 0 0 0-9.68zm-.419 3.15a5162.507 5162.507 0 0 0-3.464 5.888c-.214.364-.526.585-.953.615-.478.034-.855-.162-1.096-.568-.488-.82-.971-1.643-1.455-2.466l-.724-1.232-.234-.397c-.364-.618-.727-1.235-1.089-1.854-.443-.757.058-1.678.947-1.723.47-.025.831.188 1.069.588l.229.385.41.697.329.56c.037.061.073.124.109.186l.049.083c.179.305.357.61.542.913.347.567.855.886 1.532.926.958.057 1.848-.623 1.963-1.62.008-.068.014-.136.017-.176v-.001l.001-.01a1.883 1.883 0 0 0-.197-.851c-.358-.7.023-1.489.802-1.656.634-.137 1.288.319 1.374.949.034.272-.022.525-.161.763z"/>\n  </g>\n  \x3c!-- clouds --\x3e\n  <path opacity=".3" d="M26.69 108.052A7.707 7.707 0 0 0 18.988 100a7.712 7.712 0 0 0-6.978 4.423 4.206 4.206 0 0 0-2.447-.777c-2.28 0-4.128 1.786-4.128 3.99 0 .327.042.644.119.948-2.6.554-4.554 2.906-4.554 5.724C1 117.537 3.565 120 6.73 120h18.787c3.028 0 5.483-2.586 5.483-5.967 0-2.932-1.846-5.381-4.31-5.981zm169.77-97.574a9.724 9.724 0 0 1-.011-.453c0-5.537 4.372-10.025 9.767-10.025 3.906 0 7.276 2.355 8.838 5.756a5.224 5.224 0 0 1 3.1-1.012c2.887 0 5.228 2.324 5.228 5.192 0 .425-.053.839-.15 1.234 3.294.72 5.768 3.769 5.768 7.436 0 4.202-3.249 7.394-7.257 7.394h-23.799c-3.835 0-6.944-3.353-6.944-7.752 0-3.815 2.338-6.99 5.46-7.77zm15.748 8.237.669.798a.38.38 0 0 0 .554.038 5.741 5.741 0 0 0 1.715-4.113c0-3.005-2.271-5.459-5.146-5.668V8.714c0-.082-.083-.125-.135-.07l-1.839 1.958a.107.107 0 0 0 0 .14l1.839 1.958c.052.055.135.012.135-.07v-1.01c1.888.205 3.365 1.825 3.365 3.818 0 1.07-.434 2.029-1.122 2.725a.41.41 0 0 0-.035.552zm-3.005 2.387v1.177c0 .082.083.125.135.07l1.839-1.957a.107.107 0 0 0 0-.14l-1.839-1.958c-.052-.055-.135-.012-.135.07v.878l-.363-.051c-1.707-.364-2.996-1.894-2.996-3.753 0-1.125.475-2.129 1.224-2.833a.392.392 0 0 0 .041-.542l-.683-.793a.379.379 0 0 0-.544-.04 5.73 5.73 0 0 0-1.82 4.207c0 3.002 2.269 5.453 5.141 5.665z"/>\n  <g opacity=".3">\n    \x3c!-- circles --\x3e\n    <path d="M40 25.95c-.329.033-.663.05-1 .05-5.523 0-10-4.477-10-10S33.477 6 39 6c4.478 0 8.268 2.943 9.542 7h6.177C53.315 5.597 46.811 0 39 0c-8.837 0-16 7.163-16 16s7.163 16 16 16c.336 0 .67-.01 1-.03v-6.02z" fill="url(#ltr)"/>\n    <path d="M201 125.148a12.933 12.933 0 0 0 7.802 1.58c7.136-.797 12.275-7.228 11.479-14.364-.797-7.135-7.226-12.273-14.361-11.475a12.947 12.947 0 0 0-4.92 1.579v6.49a7.977 7.977 0 0 1 5.474-3.1 7.997 7.997 0 0 1 8.837 7.062A8.001 8.001 0 0 1 201 118.663v6.485z" fill="url(#rtl)"/>\n    \x3c!-- lines --\x3e\n    <path d="M186 50v-9h25.5a4.5 4.5 0 0 1 0 9H186z" fill="url(#ltr)"/>\n    <path d="M201 69v-8a8.05 8.05 0 0 0-.062-1H223.5a4.5 4.5 0 0 1 0 9H201z" fill="url(#ltr)"/>\n    <path d="M201 88v-9h10.5a4.5 4.5 0 0 1 0 9H201z" fill="url(#ltr)"/>\n    <path d="M40 79.067V88H13.17a4.466 4.466 0 1 1 0-8.933H40z" fill="url(#rtl)"/>\n    <path d="M40 60.067V69H26.84a4.466 4.466 0 0 1 0-8.933H40z" fill="url(#rtl)"/>\n    <path d="M40 41v8.933H18.235a4.466 4.466 0 0 1 0-8.933H40z" fill="url(#rtl)"/>\n    <path d="M10.163 69a4.466 4.466 0 1 0 0-8.933H4.466a4.466 4.466 0 1 0 0 8.933h5.697z" fill="url(#rtl)"/>\n  </g>\n\n  <defs>\n    <linearGradient id="rtl" x1="0" y1="100%" x2="100%" y2="100%">\n      <stop offset="0" stop-color="var(--colorHighlightBgAlpha, #4A67FB33)"/>\n      <stop offset="100%" stop-color="var(--colorHighlightBg, #4A67FB)"/>\n    </linearGradient>\n    <linearGradient id="ltr" x1="0" y1="100%" x2="100%" y2="100%">\n      <stop offset="0" stop-color="var(--colorHighlightBg, #4A67FB)"/>\n      <stop offset="100%" stop-color="var(--colorHighlightBgAlpha, #4A67FB33)"/>\n    </linearGradient>\n  </defs>\n</svg>\n'},67651:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12v1.857S2 15 3.077 15h9.846S14 15 14 13.857V12h-1v1.857c0 .064-.007.1-.012.12A.289.289 0 0112.9 14H3.077c-.017 0-.03 0-.04-.002A.485.485 0 013 13.841V12H2zM7 7H4l4 2.698L11.935 7H9V2H7v5zm1 4L2.935 7.415C2.361 6.935 2.7 6 3.448 6H6V2a1 1 0 011-1h2a1 1 0 011 1v4h2.488c.748 0 1.087.936.512 1.415L8 11z"/></svg>\n'},73216:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.357 3c0-1.03.8-2 1.91-2 1.079 0 1.94.952 1.94 2v.25h1.75c.906 0 1.7.794 1.7 1.7V6.7h.25c1.044 0 2 .843 2 1.94 0 1.11-.97 1.91-2 1.91h-.25v1.75c0 .906-.794 1.7-1.7 1.7h-2.6v-1.4c0-.542-.473-1-1.09-1-.605 0-1.06.446-1.06 1V14h-2.6c-.906 0-1.7-.794-1.7-1.7V9.7h1.4c.553 0 1-.455 1-1.06 0-.618-.459-1.09-1-1.09h-1.4v-2.6c0-.906.794-1.7 1.7-1.7h1.75V3zm1.91-1c-.48 0-.91.44-.91 1v1.25h-2.75c-.354 0-.7.346-.7.7v1.6h.4c1.168 0 2 .998 2 2.09 0 1.105-.844 2.06-2 2.06h-.4v1.6c0 .354.346.7.7.7h1.6v-.4c0-1.156.955-2 2.06-2 1.092 0 2.09.832 2.09 2v.4h1.6c.354 0 .7-.346.7-.7V9.55h1.25c.56 0 1-.43 1-.91 0-.493-.455-.94-1-.94h-1.25V4.95c0-.354-.346-.7-.7-.7h-2.75V3c0-.542-.46-1-.94-1z"/></svg>\n'},87710:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 7a.501.501 0 00-.502.5v7c0 .274.224.5.502.5h11a.501.501 0 00.502-.5v-7c0-.274-.224-.5-.502-.5h-11zm-1.498.5c0-.83.672-1.5 1.498-1.5h11a1.5 1.5 0 011.498 1.5v7A1.5 1.5 0 0113.5 16h-11a1.5 1.5 0 01-1.498-1.5v-7z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1a3 3 0 00-3.002 3v2.5a.5.5 0 11-.996 0V4a4 4 0 117.996 0v2.5a.5.5 0 11-.996 0V4A3 3 0 008 1zM8 10a1 1 0 10-.002 2.002A1 1 0 008 10zm-1.998 1A2 2 0 1110 10.998 2 2 0 016.002 11z"/></svg>\n'},21922:e=>{e.exports='<svg width="17" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M5 6h7v1H5V6zM5 8h7v1H5V8zM5 10h7v1H5v-1z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4a2 2 0 012-2h7a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V4zm2.2 0A1.2 1.2 0 004 5.2v7.6A1.2 1.2 0 005.2 14h6.6a1.2 1.2 0 001.2-1.2V5.2A1.2 1.2 0 0011.8 4H5.2z"/></svg>\n'},3699:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.714 6.296l.207 1.817c.491.193.945.458 1.35.781l1.68-.725c.171-.099.354.021.402.106l1.418 2.457c.098.169.061.303-.11.401l-1.471 1.088c.038.254.057.514.057.779 0 .276-.021.547-.062.811l1.423 1.147c.171.099.207.232.11.401l-1.342 2.325c-.049.084-.232.204-.402.105l-1.692-.693c-.413.331-.877.601-1.378.797l-.246 1.811c0 .197-.195.296-.293.296h-2.684c-.195 0-.293-.099-.293-.296l-.281-1.805c-.507-.196-.976-.468-1.392-.802l-1.692.693c-.171.099-.354-.021-.402-.105l-1.342-2.325c-.098-.169-.061-.303.11-.401l1.423-1.147c-.041-.264-.062-.535-.062-.811 0-.265.02-.525.057-.779l-1.471-1.088c-.171-.099-.207-.232-.11-.401l1.418-2.457c.049-.084.232-.204.402-.106l1.68.725c.406-.324.861-.589 1.352-.782l.212-1.816c0-.197.195-.296.293-.296h2.837c.195 0 .293.099.293.296zm-1.714 8.704c1.105 0 2-.895 2-2 0-1.104-.895-2-2-2s-2 .896-2 2c0 1.105.895 2 2 2z"/>\n</svg>\n'},62675:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.711 1.296l.207 1.817c.491.193.945.458 1.35.781l1.68-.725c.171-.099.354.021.402.106l1.418 2.457c.098.169.061.303-.11.401l-1.471 1.088c.038.254.057.514.057.779 0 .276-.021.547-.062.811l1.423 1.147c.171.099.207.232.11.401l-1.342 2.325c-.049.085-.232.204-.402.106l-1.693-.693c-.413.331-.877.601-1.378.797l-.246 1.811c0 .197-.195.296-.293.296h-2.684c-.195 0-.293-.099-.293-.296l-.281-1.805c-.507-.196-.976-.468-1.393-.802l-1.692.693c-.171.099-.354-.021-.402-.106l-1.342-2.325c-.098-.169-.061-.303.11-.401l1.423-1.147c-.041-.264-.062-.535-.062-.811 0-.265.02-.525.057-.779l-1.471-1.088c-.171-.099-.207-.232-.11-.401l1.418-2.457c.049-.084.232-.204.402-.106l1.68.725c.406-.324.861-.589 1.352-.782l.212-1.816c0-.197.195-.296.293-.296h2.837c.195 0 .293.099.293.296zm-1.715 8.704c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},89052:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.992 3.823l-.208-1.823h-1.571l-.213 1.823-.558.219c-.397.156-.765.37-1.095.633l-.469.374-1.687-.728-.786 1.361 1.475 1.092-.088.594c-.031.206-.046.417-.046.632 0 .224.017.444.05.658l.088.57-1.439 1.159.727 1.259 1.706-.698.46.369c.338.271.717.491 1.127.649l.539.208.284 1.825h1.454l.248-1.825.549-.214c.405-.158.78-.376 1.115-.645l.46-.369 1.706.698.727-1.259-1.439-1.159.088-.57c.033-.214.05-.434.05-.658 0-.215-.016-.426-.046-.632l-.088-.594 1.475-1.092-.786-1.361-1.687.728-.469-.374c-.329-.262-.696-.476-1.093-.632l-.559-.22zm-5.948-.654c-.171-.099-.354.021-.402.106l-1.418 2.457c-.098.169-.061.303.11.401l1.471 1.088c-.038.254-.057.514-.057.779 0 .276.021.547.062.811l-1.423 1.147c-.171.099-.207.232-.11.401l1.342 2.325c.049.085.232.204.402.106l1.692-.693c.417.334.886.607 1.393.802l.281 1.805c0 .197.098.296.293.296h2.684c.098 0 .293-.099.293-.296l.246-1.811c.501-.195.965-.466 1.378-.797l1.693.693c.171.099.354-.021.402-.106l1.342-2.325c.098-.169.061-.303-.11-.401l-1.423-1.147c.041-.264.062-.535.062-.811 0-.265-.02-.525-.057-.779l1.471-1.088c.171-.099.207-.232.11-.401l-1.418-2.457c-.049-.084-.232-.204-.402-.106l-1.68.725c-.405-.324-.86-.588-1.35-.781l-.207-1.817c0-.197-.098-.296-.293-.296h-2.837c-.098 0-.293.099-.293.296l-.212 1.816c-.491.193-.946.458-1.352.782l-1.68-.725zM8 9c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm0 1c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},78754:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.376.17a.5.5 0 0 0-.752 0l-3.5 4A.5.5 0 0 0 4.5 5H6v5.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5V5h1.5a.5.5 0 0 0 .376-.83l-3.5-4ZM6.5 4h-.898L8 1.26 10.398 4H9.5a.5.5 0 0 0-.5.5V10H7V4.5a.5.5 0 0 0-.5-.5ZM2 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 0 0-1h-1A1.5 1.5 0 0 0 1 7.5v7A1.5 1.5 0 0 0 2.5 16h11a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 13.5 6h-1a.5.5 0 0 0 0 1h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-7Z"/>\n</svg>\n'},63267:e=>{e.exports='<svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <polygon points="5 3 5 0 3 0 3 3 0 3 0 5 3 5 3 8 5 8 5 5 8 5 8 3" />\n</svg>\n'},42822:e=>{e.exports='<svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="0 3 0 5 8 5 8 3" />\n</svg>\n'},92800:e=>{e.exports='<svg viewBox="0 0 110 4" xmlns="http://www.w3.org/2000/svg">\n  <path d="M44 2.011c1.1-.011 2.2 1.989 3.3 1.989h62.7v-4l-110 .018v1.993s43.703.003 44 0z" class="folder-tab-color"/>\n</svg>\n'},23641:e=>{e.exports='<svg viewBox="0 0 110 90" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">\n  <g>\n    <path class="folderoutline" fill="url(#sd-folder-gradient)" d="M0 0h110v90h-110z" />\n    <path class="folder-tab-color" d="M44 2.011c1.1-.011 2.2 1.989 3.3 1.989h62.7v-4l-110 .018v1.993s43.703.003 44 0z" />\n  </g>\n</svg>\n'},82474:e=>{e.exports='<svg class="spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path class="spinner-part1" d="M8 5c-.6 0-1-.4-1-1V1c0-.5.4-1 1-1 .5 0 1 .4 1 1v3c0 .6-.4 1-1 1z"/>\n  <path class="spinner-part2" d="M13.7 3.7L11.5 6c-.4.3-1 .3-1.4 0-.3-.5-.3-1 0-1.5l2.3-2.2c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4z"/>\n  <path class="spinner-part3" d="M15 9h-3c-.5 0-1-.4-1-1 0-.5.4-1 1-1h3c.5 0 1 .4 1 1s-.4 1-1 1z"/>\n  <path class="spinner-part4" d="M13.7 13.6c-.4.4-1 .4-1.4 0L10 11.4c-.3-.4-.3-1 0-1.4.5-.4 1-.4 1.5 0l2.2 2.2c.4.4.4 1 0 1.4z"/>\n  <path class="spinner-part5" d="M8 16c-.6 0-1-.4-1-1v-3c0-.5.4-1 1-1 .5 0 1 .4 1 1v3c0 .6-.4 1-1 1z"/>\n  <path class="spinner-part6" d="M6 11.5l-2.3 2.2c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L4.5 10c.4-.3 1-.3 1.4 0 .3.5.3 1 0 1.5z"/>\n  <path class="spinner-part7" d="M4 9H1c-.6 0-1-.4-1-1 0-.5.4-1 1-1h3c.5 0 1 .4 1 1s-.4 1-1 1z"/>\n  <path class="spinner-part8" d="M6 6c-.5.3-1 .3-1.5 0L2.3 3.6c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0L6 4.5c.3.4.3 1 0 1.4z"/>\n</svg>\n'},86484:e=>{e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <rect class="border" x=".5" y=".5" width="195" height="31" rx="1.5" />\n  <path class="highlight" fill-rule="evenodd" d="M109 13h-8v8h8v-8zm-9-1v10h10V12h-10z"/>\n  <path fill-rule="evenodd" d="M9 9H1v16h8V9zM0 8v18h10V8H0z" class="border"/>\n  <path class="highlight" d="M12 25V6h1v19z"/>\n  <path class="highlight" fill-rule="evenodd" d="M177 25V7H12V6h173v19h10v1H93V9H15v17H1v-1h13V8h80v17h2V8h80v17h1zM97 9h78v16H97V9zm-79 4h8v8h-8v-8zm-1 9V12h10v10H17zm165-8.598L179 16l3 2.598v-5.196z"/>\n</svg>\n'},18998:e=>{e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <rect x=".5" y=".5" width="195" height="31" rx="1.5" class="border"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 9h8v16H1V9zM0 26V8h10v18H0zM177 9H97v16h80V9zM96 8v18h82V8H96zm13 5h-8v8h8v-8zm-9-1v10h10V12h-10z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M25 13h-8v8h8v-8zm-9-1v10h10V12H16z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M13 9h80v17h1V8H12v18h1V9z"/>\n  <path class="highlight" d="M94 25h101v1H94zM1 25h11v1H1zM13 5h26v3H13zM40 5h26v2H40zM67 5h26v2H67z"/>\n</svg>\n'},86681:e=>{e.exports='<svg width="196" height="48" xmlns="http://www.w3.org/2000/svg">\n  <path class="border" d="M2 .5h192a1.5 1.5 0 011.5 1.5v44a1.5 1.5 0 01-1.5 1.5H2A1.5 1.5 0 01.5 46V2A1.5 1.5 0 012 .5z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 28h80v16H4V28zM3 45V27h82v18H3zm5-13h8v8H8v-8zm-1 9V31h10v10H7zm161-13H88v16h80V28zm-81-1v18h82V27H87zm5 5h8v8h-8v-8zm-1 9V31h10v10H91zm93-9h-8v8h8v-8zm-9-1v10h10V31h-10zm-4-4h24v1h-23v16h23v1h-24V27z" class="highlight"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9 8H1v16h8V8zM0 7v18h10V7H0z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M25 12h-8v8h8v-8zm-9-1v10h10V11H16z" class="highlight"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M97 8h80v16H97V8zm-1 17V7h82v18H96zm5-13h8v8h-8v-8zm-1 9V11h10v10h-10z"/>\n  <path class="highlight" d="M93 24h103v1H93z"/>\n  <path class="highlight" d="M1 24h12v1H1z"/>\n  <g class="default-style">\n    <path fill-rule="evenodd" clip-rule="evenodd" class="highlight" d="M92 9H14v14h78V9zM14 7a2 2 0 00-2 2v14a2 2 0 002 2h78a2 2 0 002-2V9a2 2 0 00-2-2H14z"/>\n    <path opacity=".25" d="M90 11H80v10h10V11z" class="highlight"/>\n  </g>\n  <g class="dotted-style">\n    <path d="M39 4H13V7H12V25H13V8H93V25H94V7H39V4Z" class="highlight"/>\n    <path d="M66 4H40V6H66V4Z" class="highlight"/>\n    <path d="M67 4H93V6H67V4Z" class="highlight"/>\n  </g>\n</svg>\n'},95331:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5A1.5 1.5 0 012.5 1h1A1.5 1.5 0 015 2.5v1A1.5 1.5 0 013.5 5h-1A1.5 1.5 0 011 3.5v-1zm5 0A1.5 1.5 0 017.5 1h1A1.5 1.5 0 0110 2.5v1A1.5 1.5 0 018.5 5h-1A1.5 1.5 0 016 3.5v-1zM12.5 1A1.5 1.5 0 0011 2.5v1A1.5 1.5 0 0012.5 5h1A1.5 1.5 0 0015 3.5v-1A1.5 1.5 0 0013.5 1h-1zM1 7.5A1.5 1.5 0 012.5 6h1A1.5 1.5 0 015 7.5v1A1.5 1.5 0 013.5 10h-1A1.5 1.5 0 011 8.5v-1zM7.5 6A1.5 1.5 0 006 7.5v1A1.5 1.5 0 007.5 10h1A1.5 1.5 0 0010 8.5v-1A1.5 1.5 0 008.5 6h-1zM11 7.5A1.5 1.5 0 0112.5 6h1A1.5 1.5 0 0115 7.5v1a1.5 1.5 0 01-1.5 1.5h-1A1.5 1.5 0 0111 8.5v-1zM2.5 11A1.5 1.5 0 001 12.5v1A1.5 1.5 0 002.5 15h1A1.5 1.5 0 005 13.5v-1A1.5 1.5 0 003.5 11h-1zM6 12.5A1.5 1.5 0 017.5 11h1a1.5 1.5 0 011.5 1.5v1A1.5 1.5 0 018.5 15h-1A1.5 1.5 0 016 13.5v-1zm6.5-1.5a1.5 1.5 0 00-1.5 1.5v1a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-1a1.5 1.5 0 00-1.5-1.5h-1z"/>\n</svg>\n'},23942:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 5h2v2h-2z"/>\n  <path fill-opacity=".35" d="M5 1h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm8 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2z"/>\n  <path fill-opacity=".1" d="M5 5h-4v10h10v-4h4v-10h-10z"/>\n</svg>\n'},25531:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 1.288a1 1 0 00-1 0L2.5 4.461a1 1 0 00-.5.867v6.344a1 1 0 00.5.867L8 15.712a1 1 0 001 0l5.5-3.173a1 1 0 00.5-.867V5.328a1 1 0 00-.5-.867L9 1.288zM7.004 5.825A.75.75 0 017.75 5h1.343a.75.75 0 01.746.825l-.35 3.5a.75.75 0 01-.746.675H8.1a.75.75 0 01-.746-.675l-.35-3.5zm.417 5.925a.75.75 0 01.75-.75h.5a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75v-.5z"/></svg>\n'},33435:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 15A7 7 0 108 1a7 7 0 000 14zM8 4a1 1 0 100 2 1 1 0 000-2zm0 3a1 1 0 00-1 1v3a1 1 0 102 0V8a1 1 0 00-1-1z"/></svg>\n'},32783:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="208" height="128" viewBox="0 0 208 128">\n\t<rect fill="none" stroke-width="10" width="198" height="118" x="5" y="5" ry="10" />\n\t<path stroke-width="0" d="m 30,98 0,-68 20,0 20,25 20,-25 20,0 0,68 -20,0 0,-39 -20,25 -20,-25 0,39 z" />\n\t<path stroke-width="0" d="m 155,98 -30,-33 20,0 0,-35 20,0 0,35 20,0 z" />\n</svg>\n'},75124:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.125 2.344a7 7 0 101.44 1.408L7.918 11.03a1 1 0 01-1.44.147.998.998 0 01-.345-.288L4.32 8.499A1 1 0 115.913 7.29l1.175 1.548 5.037-6.494z"/></svg>\n'},39135:e=>{e.exports='<svg viewBox="0 0 7 4" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 4l-3.5-4h7z"/></svg>'},62525:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n      <path d="M12.6 7C9.507 7 7 9.506 7 12.6h1.6c0-2.206 1.794-4 4-4s4 1.794 4 4-1.794 4-4 4c-1.29 0-2.425-.623-3.157-1.573H7.56c.905 1.875 2.818 3.172 5.04 3.172 3.093 0 5.6-2.508 5.6-5.6 0-3.094-2.507-5.6-5.6-5.6"/>\n      <path d="M13 13H7V7l6 6z"/>\n</svg>'},76667:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M.784 13.53L7.118 1.653a1 1 0 011.764 0l6.334 11.875A1 1 0 0114.333 15H1.667a1 1 0 01-.883-1.47zm5.799-7.705A.75.75 0 017.329 5H8.67a.75.75 0 01.747.825l-.35 3.5A.75.75 0 018.32 10H7.68a.75.75 0 01-.746-.675l-.35-3.5zM7 11.75a.75.75 0 01.75-.75h.5a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75v-.5z"/></svg>\n'},12371:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11 15C11 15.5523 10.5523 16 10 16C9.44772 16 9 15.5523 9 15C9 14.4477 9.44772 14 10 14C10.5523 14 11 14.4477 11 15Z"/>\n  <path d="M14 15C14 15.5523 13.5523 16 13 16C12.4477 16 12 15.5523 12 15C12 14.4477 12.4477 14 13 14C13.5523 14 14 14.4477 14 15Z"/>\n  <path d="M17 15C17 15.5523 16.5523 16 16 16C15.4477 16 15 15.5523 15 15C15 14.4477 15.4477 14 16 14C16.5523 14 17 14.4477 17 15Z"/>\n  <path fill-rule="evenodd" d="M15.2222 7C13.3064 7 11.6041 8.03226 10.7673 9.58975C10.4836 9.53088 10.1896 9.5 9.88889 9.5C8.33443 9.5 6.94973 10.3278 6.25133 11.5896C4.93963 12.2253 4 13.5297 4 15.0833C4 17.3063 5.90238 19 8.11111 19H17.8889C20.0976 19 22 17.3063 22 15.0833C22 13.7239 21.2795 12.5539 20.221 11.8576C20.2218 11.8218 20.2222 11.7859 20.2222 11.75C20.2222 9.06683 17.9219 7 15.2222 7ZM12.3078 11.0947C12.6187 9.92977 13.7733 9 15.2222 9C16.9409 9 18.2222 10.291 18.2222 11.75C18.2222 11.9148 18.2065 12.0754 18.1766 12.231L18.0233 13.0279L18.7717 13.3419C19.5266 13.6587 20 14.3421 20 15.0833C20 16.0821 19.1166 17 17.8889 17H8.11111C6.8834 17 6 16.0821 6 15.0833C6 14.3101 6.51675 13.5977 7.32859 13.3027L7.74278 13.1522L7.91117 12.745C8.20096 12.0441 8.95509 11.5 9.88889 11.5C10.2579 11.5 10.6004 11.5855 10.8973 11.7327L11.9926 12.2759L12.3078 11.0947Z"/>\n</svg>\n'},30249:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10Z"/>\n  <path d="M8 10C8.55228 10 9 9.55228 9 9C9 8.44772 8.55228 8 8 8C7.44772 8 7 8.44772 7 9C7 9.55228 7.44772 10 8 10Z"/>\n  <path d="M12 9C12 9.55228 11.5523 10 11 10C10.4477 10 10 9.55228 10 9C10 8.44772 10.4477 8 11 8C11.5523 8 12 8.44772 12 9Z"/>\n  <path fill-rule="evenodd" d="M6.06137 4.79152C6.88693 3.69117 8.2498 3 9.75 3C11.971 3 13.9354 4.53945 14.2158 6.67358C15.2565 7.2517 16 8.31987 16 9.6C16 11.5612 14.2953 13 12.3663 13H3.63375C1.71373 13 0 11.559 0 9.6C0 8.25863 0.810198 7.14916 1.93276 6.59292C2.38358 5.39217 3.6016 4.6 4.9375 4.6C5.33032 4.6 5.70959 4.66698 6.06137 4.79152ZM9.75 5C8.60263 5 7.6952 5.67043 7.37686 6.50514L6.86674 7.84271L5.7864 6.90347C5.57817 6.72244 5.28239 6.6 4.9375 6.6C4.26343 6.6 3.82196 7.04773 3.75852 7.4773L3.66694 8.09744L3.06887 8.28526C2.39216 8.49778 2 9.04475 2 9.6C2 10.2858 2.64177 11 3.63375 11H12.3663C13.365 11 14 10.29 14 9.6C14 9.05326 13.6102 8.50615 12.9389 8.28911L12.2278 8.05923L12.25 7.18864C12.2431 6.05963 11.2128 5 9.75 5Z"/>\n</svg>\n'},81606:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1a7 7 0 100 14A7 7 0 008 1zm.648 10.758l3.084-2.68c.357-.323.357-.946 0-1.269a.989.989 0 00-1.297 0L9 9.179V5c0-.5-.494-1-1-1s-1 .5-1 1v4.178L5.565 7.81a.989.989 0 00-1.297 0c-.357.323-.357.946 0 1.27l3.084 2.679a.989.989 0 001.296 0z"/></svg>\n'},21776:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.2132 18H18.6296C20.491 18 22 16.4965 22 14.6418C22 13.2753 21.1809 12.0994 20.0051 11.5751C20.0504 11.3248 20.0741 11.0671 20.0741 10.8038C20.0741 10.0367 19.8733 9.3163 19.5212 8.69196L10.2132 18Z"/>\n  <path d="M18.3595 7.02522C17.5821 6.38468 16.586 6 15.5 6C13.3927 6 11.6237 7.44854 11.1344 9.40423C10.6465 9.14615 10.0903 9 9.5 9C8.01292 9 6.74245 9.92742 6.23543 11.2354C4.92742 11.7425 4 13.0129 4 14.5C4 16.395 5.50607 17.9383 7.38657 17.9982L18.3595 7.02522Z"/>\n</svg>\n'},71775:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 3C10.8495 3 11.6369 3.26446 12.2844 3.71557L3.00002 13C1.34062 12.9946 0 11.6497 0 10C0 8.686 0.84 7.57 2.022 7.164C2.187 5.942 3.232 5 4.5 5C5.167 5 5.772 5.26 6.22 5.686C6.765 4.123 8.25 3 10 3Z"/>\n  <path d="M13.2844 4.71558L5 13H12.99C14.663 13 16 11.657 16 10C16 8.69701 15.164 7.58501 13.996 7.17201L14 7.00001C14 6.15055 13.7356 5.36314 13.2844 4.71558Z"/>\n</svg>\n'},38668:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19 12C19 12.0568 18.9988 12.1133 18.9965 12.1695C20.1635 12.5803 21 13.6925 21 15C21 16.6569 19.6569 18 18 18H8C6.34315 18 5 16.6569 5 15C5 13.6462 5.89669 12.5019 7.12853 12.1285C7.50189 10.8967 8.64623 10 10 10C10.4917 10 10.9557 10.1183 11.3652 10.3279C11.9984 8.9538 13.3878 8 15 8C17.2091 8 19 9.79086 19 12Z"/>\n</svg>\n'},45016:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.996 7.172C15.164 7.585 16 8.697 16 10C16 11.657 14.663 13 12.99 13H3.01C1.346 13 0 11.653 0 10C0 8.686 0.84 7.57 2.022 7.164C2.187 5.942 3.232 5 4.5 5C5.167 5 5.772 5.26 6.22 5.686C6.765 4.123 8.25 3 10 3C12.21 3 14 4.79 14 7L13.996 7.172Z"/>\n</svg>\n'},3117:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M15.2222 7C13.3064 7 11.6041 8.03226 10.7673 9.58975C10.4836 9.53088 10.1896 9.5 9.88889 9.5C8.33443 9.5 6.94973 10.3278 6.25133 11.5896C4.93963 12.2253 4 13.5297 4 15.0833C4 17.3063 5.90238 19 8.11111 19H17.8889C20.0976 19 22 17.3063 22 15.0833C22 13.7239 21.2795 12.5539 20.221 11.8576C20.2218 11.8218 20.2222 11.7859 20.2222 11.75C20.2222 9.06683 17.9219 7 15.2222 7ZM12.3078 11.0947C12.6187 9.92977 13.7733 9 15.2222 9C16.9409 9 18.2222 10.291 18.2222 11.75C18.2222 11.9148 18.2065 12.0754 18.1766 12.231L18.0233 13.0279L18.7717 13.3419C19.5266 13.6587 20 14.3421 20 15.0833C20 16.0821 19.1166 17 17.8889 17H8.11111C6.8834 17 6 16.0821 6 15.0833C6 14.3101 6.51675 13.5977 7.32859 13.3027L7.74278 13.1522L7.91117 12.745C8.20096 12.0441 8.95509 11.5 9.88889 11.5C10.2579 11.5 10.6004 11.5855 10.8973 11.7327L11.9926 12.2759L12.3078 11.0947Z"/>\n</svg>\n'},29832:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.75 3C8.2498 3 6.88693 3.69117 6.06137 4.79152C5.70959 4.66698 5.33032 4.6 4.9375 4.6C3.6016 4.6 2.38358 5.39217 1.93276 6.59292C0.810198 7.14916 0 8.25863 0 9.6C0 11.559 1.71373 13 3.63375 13H12.3663C14.2953 13 16 11.5612 16 9.6C16 8.31987 15.2565 7.2517 14.2158 6.67358C13.9354 4.53945 11.971 3 9.75 3ZM7.37686 6.50514C7.6952 5.67043 8.60263 5 9.75 5C11.2128 5 12.2431 6.05963 12.25 7.18864L12.2278 8.05923L12.9389 8.28911C13.6102 8.50615 14 9.05326 14 9.6C14 10.29 13.365 11 12.3663 11H3.63375C2.64177 11 2 10.2858 2 9.6C2 9.04475 2.39216 8.49778 3.06887 8.28526L3.66694 8.09744L3.75852 7.4773C3.82196 7.04773 4.26343 6.6 4.9375 6.6C5.28239 6.6 5.57817 6.72244 5.7864 6.90347L6.86674 7.84271L7.37686 6.50514Z"/>\n</svg>\n'},76611:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 15A7 7 0 108 1a7 7 0 000 14zM7.352 4.242l-3.084 2.68c-.357.323-.357.946 0 1.269a.989.989 0 001.297 0L7 6.821V11c0 .5.494 1 1 1s1-.5 1-1V6.822l1.435 1.369a.989.989 0 001.296 0c.358-.323.358-.946 0-1.27L8.649 4.243a.989.989 0 00-1.296 0z"/></svg>\n'},89016:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>\n</svg>\n'},43380:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">\n  <path d="M13.5 6l-1.4-1.4-3.1 3-3.1-3L4.5 6l3.1 3.1-3 2.9 1.5 1.4L9 10.5l2.9 2.9 1.5-1.4-3-2.9"/>\n</svg>\n'},61373:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zm0-2A6 6 0 108 2a6 6 0 000 12z"/>\n</svg>\n'},1149:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.998 0C5.24 0 4 2 4 4v2h-.502A2.5 2.5 0 001 8.5v5A2.5 2.5 0 003.498 16h9a2.5 2.5 0 002.498-2.5v-5A2.5 2.5 0 0012.498 6h-.502V4c0-2-1.239-4-3.998-4zm1.999 6V4c0-1-.344-2-1.999-2C6.344 2 6 3 6 4v2h3.997zM3 8.5a.5.5 0 01.498-.5h9a.5.5 0 01.498.5v5a.5.5 0 01-.498.5h-9A.5.5 0 013 13.5v-5zM8 13a2 2 0 100-4 2 2 0 000 4zm0-1a1 1 0 100-2 1 1 0 000 2z"/>\n</svg>\n'},19016:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.2 0C3.157.402 0 3.822 0 7.98 0 12.41 3.582 16 8 16a7.983 7.983 0 006.494-3.335l-1.738-1.006A6 6 0 117.2 2.053V0z"/>\n  <path opacity=".5" fill-rule="evenodd" d="M16 7.98c0 1.175-.252 2.29-.705 3.296l-1.74-1.006A6.001 6.001 0 008.8 2.053V0c4.044.402 7.201 3.822 7.201 7.98z"/>\n</svg>\n'},26055:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.352 1.242l-3.084 2.68c-.357.323-.357.946 0 1.269a.989.989 0 001.297 0L7 3.821V11c0 .5.494 1 1 1s1-.5 1-1V3.822l1.435 1.369a.989.989 0 001.296 0c.358-.323.358-.946 0-1.27L8.649 1.243a.989.989 0 00-1.296 0z"/>\n  <path d="M0 11v2.5A2.5 2.5 0 002.498 16h11a2.5 2.5 0 002.498-2.5V11h-2v2.5a.5.5 0 01-.498.5h-11A.5.5 0 012 13.5V11H0z"/>\n</svg>\n'},11826:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C5.34315 6 4 7.34315 4 9V17C4 18.6569 5.34315 20 7 20H19C20.6569 20 22 18.6569 22 17V9C22 7.34315 20.6569 6 19 6H7ZM6 9C6 8.44772 6.44772 8 7 8H19C19.5523 8 20 8.44772 20 9V17C20 17.5523 19.5523 18 19 18H7C6.44772 18 6 17.5523 6 17V9Z"/>\n  <rect style="display: var(--displayTileRow)" opacity="0.5" x="12" y="8" width="2" height="10"/>\n  <rect style="display: var(--displayTileColumn)" opacity="0.5" x="6" y="12" width="14" height="2"/>\n</svg>\n'},1313:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M3 2C1.34315 2 0 3.34315 0 5V11C0 12.6569 1.34315 14 3 14H13C14.6569 14 16 12.6569 16 11V5C16 3.34315 14.6569 2 13 2H3ZM2 5C2 4.44772 2.44772 4 3 4H13C13.5523 4 14 4.44772 14 5V11C14 11.5523 13.5523 12 13 12H3C2.44772 12 2 11.5523 2 11V5Z"/>\n  <rect style="display: var(--displayTileRow)" opacity="0.5" x="7" y="4" width="2" height="8"/>\n  <rect style="display: var(--displayTileColumn)" opacity="0.5" x="2" y="7" width="12" height="2"/>\n</svg>\n'},67567:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8 6C8 5.44772 7.55228 5 7 5H1C0.447715 5 0 5.44772 0 6V10C0 10.5523 0.447715 11 1 11H15C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9H9C8.44771 9 8 8.55228 8 8V6Z"/>\n  <rect opacity="0.35" x="9" y="5" width="7" height="3" rx="1"/>\n</svg>\n'},47746:e=>{e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 5C6.34314 5 5 6.34314 5 8V18C5 19.6569 6.34314 21 8 21H18C19.6569 21 21 19.6569 21 18V8C21 6.34314 19.6569 5 18 5H8ZM8 14H12V18H14V14H18V12H14V8H12V12H8V14Z"/>\n</svg>\n'},89702:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" d="M4 2C2.89543 2 2 2.89543 2 4V12C2 13.1046 2.89543 14 4 14H12C13.1046 14 14 13.1046 14 12V4C14 2.89543 13.1046 2 12 2H4ZM7 4H9V7H12V9H9V12H7V9H4V7H7V4Z"/>\n</svg>\n'},43085:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".6" d="M8.531 12.067a1 1 0 01-1.062 0L2.628 9.03a1 1 0 00-1.058-.003l-.203.126a1 1 0 00-.004 1.698L7.47 14.67a1 1 0 001.06 0l6.107-3.817a1 1 0 00-.004-1.698l-.203-.126a1 1 0 00-1.058.003l-4.84 3.036z"/>\n  <path d="M1.357 6.848a1 1 0 010-1.696l6.113-3.82a1 1 0 011.06 0l6.113 3.82a1 1 0 010 1.696l-6.113 3.82a1 1 0 01-1.06 0l-6.113-3.82z"/>\n</svg>\n'},95846:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 1a1 1 0 0 0-1 1v9.293l2.146-2.147a.5.5 0 0 1 .708 0L5.5 10.793l4.646-4.647a.5.5 0 0 1 .708 0L15 10.293V2a1 1 0 0 0-1-1H2ZM0 12.5V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v10.5ZM15 14v-2.293l-4.5-4.5-4.646 4.647a.5.5 0 0 1-.708 0L3.5 10.207l-2.5 2.5V14a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1ZM4 5a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/>\n</svg>\n'},94411:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M3.055 6.549c.052.082.111.156.176.222l4.905 6.065c.45.693 1.34.868 2.193.79.899-.084 1.94-.453 2.93-1.069.99-.614 1.783-1.384 2.256-2.152.449-.73.687-1.604.266-2.316l-3.26-7.088a1.329 1.329 0 0 0-.141-.287c-.243-.374-.638-.572-1.055-.658-.424-.086-.916-.068-1.433.023-1.037.183-2.276.682-3.49 1.435-1.213.753-2.209 1.643-2.833 2.49-.311.423-.546.857-.656 1.275-.11.415-.106.86.128 1.247l.014.023Zm8.477-5.303c-.056-.076-.17-.161-.408-.21-.258-.053-.615-.05-1.058.028-.883.156-2.003.596-3.136 1.3-1.133.703-2.024 1.512-2.556 2.234-.266.362-.427.68-.494.936-.061.233-.037.373.007.457l.08.099a.765.765 0 0 0 .351.15c.259.052.616.05 1.058-.028.883-.156 2.004-.597 3.136-1.3 1.133-.703 2.025-1.512 2.556-2.234.267-.362.427-.681.494-.936a.763.763 0 0 0 .022-.383l-.052-.113Zm.687 1.493c-.1.178-.216.356-.345.532-.625.847-1.62 1.737-2.834 2.49-1.213.754-2.453 1.252-3.49 1.435a5.116 5.116 0 0 1-.629.074l4.01 4.96a.498.498 0 0 1 .036.05c.138.222.524.418 1.27.35.714-.066 1.607-.371 2.494-.922.887-.55 1.557-1.217 1.932-1.827.393-.639.388-1.072.25-1.293a.499.499 0 0 1-.03-.055L12.22 2.739ZM4.5 13.5a2 2 0 0 1-4 0c0-2 2-4 2-4s2 2 2 4Z"/>\n</svg>\n'},95369:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="m3 6.5-.4-.1L.1 3.9c-.1-.2-.1-.6 0-.8l3-3c.2-.1.6-.1.8 0l2.5 2.5c.2.2.2.5 0 .7s-.5.2-.7 0L3.5 1.2 1.2 3.5l2.1 2.1c.2.2.2.5 0 .7 0 .2-.2.2-.3.2zM15.5 16h-.1l-4-1-.2-.1-1.5-1.5c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.4 1.4 3.1.8-.9-3.1-1.4-1.4c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.5 1.5.1.2 1 4-.1.5-.3.1zm-11 0-.4-.1-4-4-.1-.4.1-.4 11-11c.2-.2.5-.2.7 0l4 4c.2.2.2.5 0 .7l-11 11c0 .2-.2.2-.3.2zm-3.3-4.5 3.3 3.3L14.8 4.5l-3.3-3.3L1.2 11.5z" />\n  <path d="m4.5 11-.4-.1-1.5-1.5c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.5 1.5c.2.2.2.5 0 .7l-.3.1zm2-2-.4-.1-1.5-1.5c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.5 1.5c.2.1.2.5.1.7l-.4.1zm2-2-.4-.1-1.5-1.5c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.5 1.5c.2.1.2.5.1.7l-.4.1zm2-2-.4-.1-1.5-1.5c-.2-.2-.2-.5 0-.7s.5-.2.7 0l1.5 1.5c.2.2.2.5 0 .7l-.3.1z" />\n</svg>'},36561:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">\n  <path fill-rule="evenodd" d="M41 4a3 3 0 0 0-2.1.9L23.5 19.5a8.2 8.2 0 0 1 3 1.9 8.3 8.3 0 0 1 2 3L43 9.2A3 3 0 0 0 41 4ZM29 26.8l15.5-16.2a5 5 0 0 0-7-7.1L21.1 19a8.3 8.3 0 0 0-6.4 2.4c-1 1-1.6 2.4-2 3.8a34.1 34.1 0 0 0-1.7 9 60.2 60.2 0 0 0 0 1.6l-.1.1 1 .1h-1v1h1v-1 1h.2a37.8 37.8 0 0 0 5.8-.7c1.6-.2 3.3-.6 4.8-1a9.6 9.6 0 0 0 3.8-2 8.3 8.3 0 0 0 2.4-6.5ZM3 7a4 4 0 0 1 4-4h21v2H7a2 2 0 0 0-2 2v34c0 1.1.9 2 2 2h34a2 2 0 0 0 2-2V20h2v21a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7Zm17.7 14A6.3 6.3 0 0 1 25 31.8c-.5.6-1.5 1-3 1.5a32.2 32.2 0 0 1-8.4 1.6H13a62.3 62.3 0 0 1 1.6-9c.4-1.5 1-2.5 1.5-3a6.3 6.3 0 0 1 4.5-2Z" />\n  <circle cx="41" cy="41" r="7" fill="var(--colorFgIntense)" />\n  <path fill-rule="evenodd" d="M40 42v2h2v-2h2v-2h-2v-2h-2v2h-2v2h2Z" fill="var(--colorBgIntense)" />\n</svg>\n'},71475:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 0a.5.5 0 0 0-.493.418l-.311 1.865a5.957 5.957 0 0 0-.963.398L3.694 1.583a.5.5 0 0 0-.644.053L1.636 3.05a.5.5 0 0 0-.053.644l1.098 1.54c-.16.306-.293.627-.398.962l-1.865.31A.5.5 0 0 0 0 7v2a.5.5 0 0 0 .418.493l1.865.311c.105.335.239.656.398.963l-1.098 1.539a.5.5 0 0 0 .053.644l1.414 1.414a.5.5 0 0 0 .644.053l1.54-1.098c.306.16.627.293.962.398l.31 1.865A.5.5 0 0 0 7 16h2a.5.5 0 0 0 .493-.418l.311-1.865c.335-.105.656-.239.963-.398l1.538 1.099a.5.5 0 0 0 .645-.053l1.414-1.414a.5.5 0 0 0 .053-.644l-1.098-1.54c.16-.307.293-.628.398-.963l1.865-.31A.5.5 0 0 0 16 9V7a.5.5 0 0 0-.418-.493l-1.865-.311a5.955 5.955 0 0 0-.398-.963l1.099-1.538a.5.5 0 0 0-.054-.645L12.95 1.636a.5.5 0 0 0-.643-.053l-1.54 1.098a5.958 5.958 0 0 0-.962-.398L9.494.418A.5.5 0 0 0 9 0H7Zm.13 2.76L7.424 1h1.152l.294 1.76a.5.5 0 0 0 .37.401c.465.12.903.302 1.305.54a.5.5 0 0 0 .546-.022l1.451-1.036.816.815L12.32 4.91a.5.5 0 0 0-.023.546c.239.402.421.84.54 1.306a.5.5 0 0 0 .403.37L15 7.423v1.152l-1.76.294a.5.5 0 0 0-.401.37c-.12.465-.302.903-.54 1.305a.5.5 0 0 0 .022.545l1.036 1.453-.815.815-1.451-1.037a.5.5 0 0 0-.546-.023c-.402.239-.84.421-1.306.54a.5.5 0 0 0-.37.403L8.577 15H7.424l-.294-1.76a.5.5 0 0 0-.37-.401 4.964 4.964 0 0 1-1.305-.54.5.5 0 0 0-.545.022l-1.452 1.036-.815-.815 1.036-1.451a.5.5 0 0 0 .023-.546 4.963 4.963 0 0 1-.54-1.306.5.5 0 0 0-.403-.37L1 8.577V7.424l1.76-.294a.5.5 0 0 0 .401-.37c.12-.465.302-.903.54-1.305a.5.5 0 0 0-.022-.545L2.643 3.458l.815-.815L4.91 3.679a.5.5 0 0 0 .545.023c.402-.239.84-.421 1.306-.54a.5.5 0 0 0 .37-.403ZM6 8a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"/>\n</svg>\n'},35024:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.976 11c-1.92.537-1.91 1.258-2.323 2.9C3.24 15.54 1 15.673 1 15.673c8.832 1.68 7.978-3.656 7.978-3.656C6.798 12.267 5.976 11 5.976 11M14 1.127c-.868-.316-1.91-.022-2.316.652l-.17.28c-.94.748-1.934 1.895-2.758 3.264C7.932 6.692 7.436 8.02 7.3 9.062l-.16.265c-.406.674-.03 1.484.838 1.8.866.316 1.908.023 2.314-.652l.202-.336c.92-.75 1.884-1.872 2.686-3.205s1.293-2.627 1.445-3.656l.212-.353c.406-.674.03-1.484-.838-1.8" />\n</svg>\n'},67905:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 11L4.86568 7.36568C4.36171 6.86171 4.71865 6 5.43137 6L11.5686 6C12.2814 6 12.6383 6.86171 12.1343 7.36569L8.5 11Z"/>\n</svg>\n'},29295:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.848 3.349v.99H12.63c-.457 1.264-1.074 2.297-1.852 3.15.871.675 1.937 1.18 3.222 1.47-.245.247-.567.725-.719 1.015-1.361-.35-2.46-.922-3.349-1.682C9.5 9 9 9.5 8 10l-.638-.969C8.053 8.708 9 8 9.162 7.533c-.76-.88-1.344-1.947-1.8-3.194h-1.21v-.99h3.315V2h1.024v1.349h3.357zM9.992 6.773c.608-.666 1.09-1.469 1.454-2.434H8.478c.363.922.862 1.742 1.514 2.434z"/>\n  <path d="M5.846 11.558H3.15L2.636 13H1l2.78-7h1.425L8 13H6.364l-.518-1.442zm-2.282-1.169h1.867l-.939-2.62-.928 2.62z"/>\n</svg>\n'},67757:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n<path class="trashicon-lid" d="M15.5 7c-.276 0-.5-.224-.5-.5l-.001-1.03c-.016-.262-.233-.47-.499-.47h-4c-.267 0-.485.209-.499.473l-.001 1.027c0 .276-.224.5-.5.5h-2.5c-.552 0-1 .448-1 1s.448 1 1 1h11c.552 0 1-.448 1-1s-.448-1-1-1h-2.5z"/>\n<path class="trashicon-bin" d="M17 10c.552 0 1 .448 1 1v8c0 1.105-.895 2-2 2h-7c-1.105 0-2-.895-2-2v-8l.007-.117c.058-.497.48-.883.993-.883s.936.386.993.883l.007.117v7c0 .552.448 1 1 1h5c.552 0 1-.448 1-1v-7l.007-.117c.058-.497.481-.883.993-.883z"/>\n<path class="trashicon-content" opacity=".3" d="M10 10v8h1v-8h-1zM12 10v8h1v-8h-1zM14 18v-8h1v8h-1z"/>\n</svg>\n'},14302:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" d="M7 5V12H9V5H7Z"/>\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3C3 3.55228 3.44772 4 4 4H12C12.5523 4 13 3.55228 13 3C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 5V12C4 13.6569 5.34315 15 7 15H9C10.6569 15 12 13.6569 12 12V5H10V12C10 12.5523 9.55228 13 9 13H7C6.44772 13 6 12.5523 6 12V5H4Z"/>\n</svg>\n'},3895:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3H13C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 4V11.5C4 12.3284 4.67157 13 5.5 13H10.5C11.3284 13 12 12.3284 12 11.5V4H11V11.5C11 11.7761 10.7762 12 10.5 12H5.5C5.22385 12 5 11.7761 5 11.5V4H4Z"/>\n  <path opacity="0.3" d="M6 4V11H10V4H6Z"/>\n</svg>\n'},85382:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M8,6.5c0.8,0,1.5,0.7,1.5,1.5S8.8,9.5,8,9.5S6.5,8.8,6.5,8S7.2,6.5,8,6.5 M8,5C6.3,5,5,6.3,5,8s1.3,3,3,3s3-1.3,3-3\n\t\tS9.7,5,8,5L8,5z"/>\n</svg>\n'},88826:e=>{e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle strokeWidth="2" cx="8" cy="8" r="3"/>\n</svg>\n'},33271:e=>{e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <path class="border" d="M2 .5h192a1.5 1.5 0 011.5 1.5v28a1.5 1.5 0 01-1.5 1.5H2A1.5 1.5 0 01.5 30V2A1.5 1.5 0 012 .5z"/>\n  <path d="M1 24h12v1H1z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25V7h10v18H0zM1 8h8v16H1V8zM100 11v10h10V11h-10zm9 1h-8v8h8v-8z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13 8h80v17h102v-1h-17V7H96v17h-2V7H12v18h1V8zm84 16h80V8H97v16z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M16 11v10h10V11H16zm9 1h-8v8h8v-8z"/>\n  <path fill="var(--colorBg)" d="M166 6a2 2 0 012-2h11a2 2 0 012 2v11a2 2 0 01-2 2h-11a2 2 0 01-2-2V6z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M179 5h-11a1 1 0 00-1 1v11a1 1 0 001 1h11a1 1 0 001-1V6a1 1 0 00-1-1zm-11-1a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V6a2 2 0 00-2-2h-11z"/>\n  <path class="highlight" d="M170 7h8v8l-8-8z"/>\n</svg>\n'},48013:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M17.03 7.4l-3.18 3.18a.5.5 0 01-.85-.35v-3.3a6.15 6.15 0 00-2.36 11.83c.45.19.78.62.75 1.11-.04.63-.63 1.07-1.22.86A8.15 8.15 0 0113 4.93V2.76a.5.5 0 01.85-.35l4.09 4.08-.88.88a.7.7 0 01-.03.03zm1.38 2.76c.18.32.54.5.9.42l.23-.06c.59-.15.92-.78.63-1.31-.3-.55-1.04-.62-1.48-.18l-.16.17a.81.81 0 00-.12.96zm.73 3.23c.03-.5.34-.96.83-1.08.6-.15 1.19.25 1.18.86a8.2 8.2 0 01-.18 1.6c-.13.62-.82.88-1.37.57a1.15 1.15 0 01-.54-1.22c.04-.24.07-.48.08-.73zm-1.8 4.04a.79.79 0 01.94-.16l.22.13c.54.3.7 1 .26 1.44a8.11 8.11 0 01-3.96 2.19c-.6.14-1.13-.38-1.1-1 .04-.5.42-.88.9-1 1-.28 1.96-.8 2.75-1.6z" clip-rule="evenodd"/>\n</svg>\n'},27470:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M10.31 4.55L8.87 5.98a.5.5 0 01-.85-.35V3.87a4.2 4.2 0 00-2.98 7.2 4.22 4.22 0 005.19.62l1.4 1.47a6.22 6.22 0 11-3.6-11.29V.5a.5.5 0 01.84-.35l2.92 2.91-.04.05-1.44 1.44zm1.2 5.91a4.2 4.2 0 00.73-2.18l2-.25a6.2 6.2 0 01-1.33 3.9l-1.4-1.47zm2.56-3.83l-2 .25a4.2 4.2 0 00-.5-1.08L13 4.37c.52.69.88 1.46 1.07 2.26z" clip-rule="evenodd"/>\n</svg>\n'},1293:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M10.74 4.14L8.95 5.93a.5.5 0 01-.85-.36V3.31a4.59 4.59 0 00-3.25 7.86 4.6 4.6 0 005.8.57l.7.74A5.6 5.6 0 118.1 2.3v-1.1a.5.5 0 01.85-.36l2.54 2.54-.04.04-.71.71zm1.07 6.5c.58-.79.88-1.72.89-2.66l1-.12a5.58 5.58 0 01-1.2 3.51l-.7-.73zm1.73-4.04l-1 .12c-.13-.5-.36-1-.67-1.44l.72-.72c.46.62.78 1.32.95 2.04z" clip-rule="evenodd"/>\n</svg>\n'},1652:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M14 6V2h-4c0-1.1-.9-2-2-2S6 .9 6 2H2v4c1.1 0 2 .9 2 2s-.9 2-2 2v4h4c0-1.1.9-2 2-2s2 .9 2 2h4v-4c1.1 0 2-.9 2-2s-.9-2-2-2z"/></svg>'},9390:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="10" height="5" rx="1"/>\n</svg>\n'},44278:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M3 1a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V4a3 3 0 00-3-3H3zM2 4a1 1 0 011-1h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4z"/>\n  <rect x="3" y="4" width="10" height="5" rx="1"/>\n</svg>\n'},22493:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="5" height="8" rx="1"/>\n</svg>\n'},98434:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M3 1a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V4a3 3 0 00-3-3H3zM2 4a1 1 0 011-1h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4z"/>\n  <rect x="3" y="4" width="5" height="8" rx="1"/>\n</svg>\n'},16619:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" clip-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="7" height="8" rx="1"/>\n</svg>\n'},88111:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 1.167h8a3 3 0 013 3v7.666a3 3 0 01-3 3H4a3 3 0 01-3-3V4.167a3 3 0 013-3zm0 1a2 2 0 00-2 2v7.666a2 2 0 002 2h8a2 2 0 002-2V4.167a2 2 0 00-2-2H4z"/>\n  <path d="M11.691 11.962a.499.499 0 00.16-.106l.005-.005A.498.498 0 0012 11.5v-5a.5.5 0 00-1 0v3.793L6.854 6.146a.5.5 0 10-.708.708L10.293 11H6.5a.5.5 0 000 1h5.003a.501.501 0 00.188-.038z"/>\n</svg>\n'},23634:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 1.167h8a3 3 0 013 3v7.666a3 3 0 01-3 3H4a3 3 0 01-3-3V4.167a3 3 0 013-3zm0 1a2 2 0 00-2 2v7.666a2 2 0 002 2h8a2 2 0 002-2V4.167a2 2 0 00-2-2H4z"/>\n  <path d="M4.309 4.038A.498.498 0 004 4.5v5a.5.5 0 001 0V5.707l4.146 4.147a.5.5 0 00.708-.708L5.707 5H9.5a.5.5 0 000-1h-5-.003a.5.5 0 00-.188.038z"/>\n</svg>\n'},80162:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.962 2.309A.5.5 0 0013.5 2h-5a.5.5 0 000 1h3.793L8.146 7.146a.5.5 0 10.708.708L13 3.707V7.5a.5.5 0 001 0v-5-.003a.5.5 0 00-.038-.188zM2 9.5a.5.5 0 01.5-.5h4a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-4a.5.5 0 01-.5-.5v-4zm1 .5v3h3v-3H3z" />\n</svg>'},37609:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22">\n    <path d="M3 5h16v2H3zM3 10h16v2H3zM3 15h16v2H3z"/>\n</svg>\n'},3783:e=>{e.exports='\x3c!-- Monochrome --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22">\n  <path d="M18.6 3.4C17.1 2 14.9 2 11 2S4.9 2 3.4 3.4C2 4.9 2 7.1 2 11s0 6.1 1.4 7.6C4.9 20 7.1 20 11 20s6.1 0 7.6-1.4C20 17.1 20 14.9 20 11s0-6.1-1.4-7.6zm-2.2 5.2l-4.2 7.2c-.3.4-.6.7-1.1.8-.6 0-1-.2-1.3-.7-.9-1.5-1.7-3-2.6-4.5-.5-.9-1.1-1.8-1.6-2.8-.6-.9 0-2 1.1-2.1.6 0 1 .2 1.3.7.4.7.8 1.3 1.2 2 .3.5.6 1 .8 1.5.4.7 1 1.1 1.8 1.1 1.2.1 2.2-.8 2.4-2v-.2c0-.4-.1-.7-.2-1-.4-.9 0-1.8 1-2 .8-.2 1.6.4 1.7 1.2 0 .2-.1.5-.3.8z"/>\n</svg>\n'},38151:e=>{e.exports='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n  <path d="M16 32c7.011 0 10.91 0 13.454-2.546C32 26.91 32 23.011 32 16c0-7.011 0-10.909-2.546-13.454C26.91 0 23.011 0 16 0 8.989 0 5.091 0 2.546 2.546 0 5.09 0 8.989 0 16c0 7.01 0 10.909 2.546 13.454C5.09 32 8.989 32 16 32" fill="#4c70f0"/>\n  <path d="M23.547 12.942c-1.957 3.406-3.917 6.81-5.87 10.217-.364.633-.892 1.016-1.616 1.068-.811.06-1.448-.283-1.857-.987-1.239-2.135-2.463-4.278-3.693-6.417-.748-1.302-1.499-2.602-2.243-3.905-.752-1.315.096-2.913 1.603-2.99.796-.042 1.41.325 1.814 1.018.552.947 1.094 1.9 1.64 2.85.395.684.78 1.374 1.186 2.05.586.984 1.449 1.538 2.597 1.607a3.163 3.163 0 0 0 3.328-2.812c.015-.13.024-.259.03-.325-.009-.56-.113-1.033-.335-1.478-.607-1.217.04-2.581 1.358-2.874 1.074-.238 2.186.553 2.328 1.645.062.48-.032.92-.27 1.333m.71-5.463c-4.634-4.639-12.147-4.639-16.781 0-4.635 4.638-4.635 12.158 0 16.795 4.634 4.638 12.147 4.638 16.782 0 4.634-4.637 4.634-12.157 0-16.795" fill="#fff"/>\n</svg>\n'},43893:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.9604 4.44569C10.4629 3.42529 10.9928 2.28123 12.0753 2.03561C12.9563 1.83607 13.8679 2.4994 13.9847 3.41546C14.0358 3.81793 13.958 4.18653 13.763 4.5331C12.1575 7.38833 10.55 10.2422 8.94712 13.0988C8.64918 13.6293 8.2163 13.9505 7.62207 13.9945C6.95657 14.044 6.43394 13.757 6.09839 13.1662C5.08249 11.3768 4.07782 9.58024 3.06885 7.78674C2.45515 6.69519 1.83948 5.605 1.22842 4.51209C0.612089 3.41004 1.30728 2.06983 2.54391 2.00479C3.19687 1.97057 3.70069 2.27852 4.03195 2.85919C4.48497 3.65295 4.9294 4.45213 5.37779 5.2486C5.70114 5.82249 6.01788 6.40011 6.35014 6.96825C6.83152 7.79216 7.53892 8.25696 8.48058 8.31489C9.81355 8.3962 11.0512 7.40798 11.2109 5.95665C11.2227 5.84824 11.2307 5.73983 11.2356 5.68427C11.2284 5.21472 11.1426 4.81903 10.9604 4.44569Z"/>\n</svg>\n'},32727:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.256 4.73144L2.67246 20.0209C1.924 21.3541 2.88751 23 4.41643 23H21.5836C23.1125 23 24.076 21.3541 23.3275 20.0209L14.744 4.73144C13.9798 3.3702 12.0202 3.3702 11.256 4.73144Z" fill-opacity="0.2"/>\n<path d="M11.9059 10.4231C11.5644 10.4231 11.2975 10.7153 11.3314 11.0521L11.7933 15.6284C11.8228 15.9208 12.0712 16.1435 12.3678 16.1435H13.6322C13.9288 16.1435 14.1772 15.9208 14.2067 15.6284L14.6686 11.0521C14.7026 10.7153 14.4357 10.4231 14.0941 10.4231H11.9059Z" />\n<path d="M12.4227 17.2876C12.1038 17.2876 11.8453 17.5437 11.8453 17.8596V19.0037C11.8453 19.3197 12.1038 19.5758 12.4227 19.5758H13.5774C13.8962 19.5758 14.1547 19.3197 14.1547 19.0037V17.8596C14.1547 17.5437 13.8962 17.2876 13.5774 17.2876H12.4227Z" />\n</svg>\n'},20643:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path d="M7.13381 2.50139L1.36522 12.5003C0.980609 13.1669 1.46175 14 2.23141 14H13.7686C14.5382 14 15.0194 13.1669 14.6348 12.5003L8.86619 2.50139C8.48136 1.83435 7.51864 1.83435 7.13381 2.50139Z" fill-opacity="0.2"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.32878 5.00012C6.88506 5.00012 6.53835 5.38324 6.5825 5.82475L6.9325 9.32475C6.97084 9.70815 7.29346 10.0001 7.67878 10.0001H8.3213C8.70661 10.0001 9.02923 9.70815 9.06757 9.32475L9.41757 5.82475C9.46173 5.38324 9.11501 5.00012 8.6713 5.00012H7.32878ZM7.75001 11C7.33579 11 7.00001 11.3358 7.00001 11.75V12.25C7.00001 12.6642 7.33579 13 7.75001 13H8.25001C8.66422 13 9.00001 12.6642 9.00001 12.25V11.75C9.00001 11.3358 8.66422 11 8.25001 11H7.75001Z"/>\n</svg>\n'},70913:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.329 5a.75.75 0 00-.747.825l.35 3.5A.75.75 0 007.68 10h.642a.75.75 0 00.747-.675l.35-3.5A.75.75 0 008.67 5H7.33zm.421 6a.75.75 0 00-.75.75v.5c0 .414.336.75.75.75h.5a.75.75 0 00.75-.75v-.5a.75.75 0 00-.75-.75h-.5z"/>\n  <path fill-rule="evenodd" d="M6.689 2.33a1.5 1.5 0 012.622 0l-.437.243.437-.242 5.8 10.44A1.5 1.5 0 0113.802 15H2.2a1.5 1.5 0 01-1.312-2.228l5.8-10.441zm1.748.486a.5.5 0 00-.874 0l-5.8 10.441A.5.5 0 002.2 14h11.6a.5.5 0 00.438-.743l-5.8-10.44z"/>\n</svg>\n'},17349:e=>{e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path d="M10 41.787a8 8 0 012.928-10.928L52.024 8.287a8 8 0 0110.928 2.928l2.497 4.324-52.953 30.572L10 41.787z" fill-opacity=".25"/>\r\n  <rect x="31.931" y="60.45" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 31.931 60.45)"/>\r\n  <rect x="27.743" y="53.195" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 27.743 53.195)"/>\r\n  <rect x="36.135" y="67.731" width="34.781" height="3.821" rx="1.911" transform="rotate(-30 36.135 67.73)"/>\r\n  <rect x="40.339" y="75.012" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 40.339 75.012)"/>\r\n  <rect x="44.542" y="82.293" width="33.095" height="3.821" rx="1.911" transform="rotate(-30 44.542 82.293)"/>\r\n  <rect x="48.746" y="89.573" width="29.043" height="3.821" rx="1.911" transform="rotate(-30 48.746 89.573)"/>\r\n  <path d="M13.82 45.347l50.305-29.044.764 1.325L14.585 46.67z"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M85.048 53.428L64.36 17.92l-1.728 1.006 21.18 36.355 1.236-1.853zm9.61 16.493l-1.793.897 3.77 6.472.007.011c.71 1.184 1.222 2.481 1.171 3.694-.047 1.13-.587 2.346-2.343 3.444-3.18 1.987-25.291 14.808-36.966 21.48a1 1 0 10.992 1.736c11.658-6.662 33.813-19.507 37.034-21.52 2.243-1.402 3.204-3.186 3.281-5.056.075-1.785-.662-3.486-1.45-4.8l-3.704-6.358z" fill="#000"/>\r\n  <path opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M54.367 10.29a1 1 0 01-.37 1.364 7943.31 7943.31 0 01-24.024 13.68c-7.909 4.491-14.478 8.222-15.459 8.81-.726.436-1.342 1.31-1.605 2.391-.26 1.069-.148 2.243.448 3.237l.006.01.005.009 2 3.5.496.868-1.736.992-.496-.868-1.995-3.491c-.899-1.504-1.036-3.225-.671-4.728.362-1.493 1.246-2.87 2.52-3.635.995-.597 7.632-4.367 15.595-8.89 8.121-4.612 17.621-10.007 23.922-13.62a1 1 0 011.364.37z" fill="#fff"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.928 32.59L53.024 10.02a6 6 0 018.196 2.196l23.81 41.24 1.237-1.856-23.315-40.384a8 8 0 00-10.928-2.928L12.928 30.859A8 8 0 0010 41.787l37.858 65.572a8 8 0 0010.928 2.928l39.096-22.572a8 8 0 002.928-10.928l-4.454-7.715-1.792.896 4.514 7.819a6 6 0 01-2.196 8.196l-39.096 22.572a6 6 0 01-8.196-2.196L11.732 40.787a6 6 0 012.196-8.196z"/>\r\n  <path opacity=".8" d="M105.515 21.267l5.957 3.44-22.546 39.051-5.958-3.44z"/>\r\n  <path d="M111.472 24.706l5.957 3.44-22.546 39.051-5.957-3.44z"/>\r\n  <path opacity=".2" d="M94.882 67.198l-11.914-6.88.989 12.045 10.925-5.165z"/>\r\n  <path d="M83.78 69.613l.177 2.75 2.47-1.222-2.647-1.528z"/>\r\n  <path opacity=".8" d="M109.365 14.598a3 3 0 014.098-1.098l3.359 1.94-4.586 7.943-5.957-3.44 3.086-5.345z"/>\r\n  <path d="M116.822 15.44l3.359 1.939a3 3 0 011.098 4.098l-3.086 5.345-5.957-3.44 4.586-7.943z"/>\r\n</svg>\r\n'},4798:e=>{e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path d="M4 10a6 6 0 016-6h106a6 6 0 016 6v7H4v-7z" fill-opacity=".2"/>\r\n  <path d="M63 4h2v112h-2zM65 59h57v2H65z"/>\r\n  <path d="M4 17h118v2H4z"/>\r\n  <rect x="16.788" y="8.915" width="25.139" height="4.436" rx="2.218"/>\r\n  <rect x="77.418" y="8.915" width="25.139" height="4.436" rx="2.218"/>\r\n  <rect x="9.394" y="8.915" width="4.436" height="4.436" rx="2.218"/>\r\n  <rect x="70.024" y="8.915" width="4.436" height="4.436" rx="2.218"/>\r\n  <rect opacity=".2" x="9" y="37" width="47" height="20" rx="2"/>\r\n  <rect x="9" y="26" width="37" height="6" rx="3"/>\r\n  <rect x="9" y="61" width="23.661" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="91" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="75" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="105" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="68" width="16" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="98" width="16" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="82" width="36" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="61" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="91" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="75" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="105" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="27" y="68" width="29" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="27" y="98" width="29" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="47" y="82" width="9" height="4" rx="2" fill-opacity=".2"/>\r\n  <path d="M64 61h58v49a6 6 0 01-6 6H64V61z" fill-opacity=".25"/>\r\n  <rect x="71.503" y="89.988" width="41.406" height="14.788" rx="2"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M72 71h25v2H72v-2zm41 4H87v2h26v-2zm-24 8H72v2h17v-2zm15-4H72v2h32v-2zm-32-4h13v2H72v-2zm41-4H99v2h14v-2zm-7 8h7v2h-7v-2zm7 4H91v2h22v-2z"/>\r\n  <path opacity=".1" d="M115 6a1 1 0 000-2v2zM6 17v-6H4v6h2zm0-6c0-.84.26-2.122 1.012-3.166C7.726 6.842 8.926 6 11 6V4C8.274 4 6.474 5.158 5.388 6.666 4.34 8.122 4 9.84 4 11h2zm5-5H115V4H11v2z" fill="#fff"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11a9 9 0 019-9h104a9 9 0 019 9v98a9 9 0 01-9 9H11a9 9 0 01-9-9V11zm9-7a7 7 0 00-7 7v98a7 7 0 007 7h104a7 7 0 007-7V11a7 7 0 00-7-7H11z"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M121 12a1 1 0 011 1V108.5c0 2.21-.694 4.095-1.96 5.437-1.27 1.344-3.043 2.063-5.04 2.063H11a1 1 0 010-2h104c1.503 0 2.73-.531 3.585-1.437.859-.908 1.415-2.273 1.415-4.063V13a1 1 0 011-1z" fill="#000"/>\r\n</svg>\r\n'},34511:e=>{e.exports='<svg width="220" height="140" viewBox="0 0 220 140" xmlns="http://www.w3.org/2000/svg">\n    <path fill="#EFEFEF" d="M0 0H220V140H0V0Z"/>\n    <path fill="#E3E3E3" d="M0 114H220V140H0V114Z"/>\n    <path class="active-tab-preview" d="M6 120H75V134H6V120Z"/>\n    <path fill="#FFFFFF" d="M76 120H144V134H76V120ZM145 120H214V134H145V120Z"/>\n</svg>\n'},31614:e=>{e.exports='<svg width="220" height="140" xmlns="http://www.w3.org/2000/svg">\n    <path fill="#EFEFEF" d="M3 0H217C217.796 0 218.559 0.283653 219.121 0.788559C219.684 1.29346 220 1.97826 220 2.69231V140H0V2.69231C0 1.97826 0.31607 1.29346 0.87868 0.788559C1.44129 0.283653 2.20435 0 3 0V0Z"/>\n    <path fill="#E3E3E3" d="M0 0H81V140H0V0Z"/>\n    <path class="active-tab-preview" d="M6 6H75V20H6V6Z"/>\n    <path fill="#FFFFFF" d="M6 21H75V35H6V21ZM6 36H75V50H6V36Z"/>\n</svg>\n'},76201:e=>{e.exports='<svg width="220" height="140" xmlns="http://www.w3.org/2000/svg">\n    <path fill="#EFEFEF" d="M3 0H217C217.796 0 218.559 0.283653 219.121 0.788559C219.684 1.29346 220 1.97826 220 2.69231V140H0V2.69231C0 1.97826 0.31607 1.29346 0.87868 0.788559C1.44129 0.283653 2.20435 0 3 0V0Z"/>\n    <path fill="#E3E3E3" d="M139 0H220V140H139V0Z"/>\n    <path class="active-tab-preview" d="M145 6H214V20H145V6Z"/>\n    <path fill="#FFFFFF" d="M145 21H214V35H145V21ZM145 36H214V50H145V36Z"/>\n</svg>\n'},48753:e=>{e.exports='<svg width="220" height="140" xmlns="http://www.w3.org/2000/svg">\n  <path fill="#EFEFEF" d="M3 0h214a3.18 3.18 0 0 1 2.121.789c.563.504.879 1.19.879 1.903V140H0V2.692C0 1.978.316 1.293.879.79A3.183 3.183 0 0 1 3 0Z"/>\n  <path fill="#E3E3E3" d="M0 0h220v26H0V0Z"/>\n  <path class="active-tab-preview" d="M6 6h69v14H6V6Z"/>\n  <path fill="#FFFFFF" d="M76 6h68v14H76V6Zm69 0h69v14h-69V6Z"/>\n</svg>\n'},76259:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 116 116">\n  <path fill="#ef3939" d="M58 115c25 0 38.9 0 47.9-9.1C115 96.9 115 83 115 58s0-38.9-9.1-47.9C96.9 1 83 1 58 1s-38.9 0-47.9 9.1C1 19.1 1 33 1 58s0 38.9 9.1 47.9C19.1 115 33 115 58 115z"/>\n  <linearGradient id="a" x1="36.55" x2="91.02" y1="21.06" y2="115.39" gradientUnits="userSpaceOnUse">\n    <stop offset="0" stop-opacity=".2"/>\n    <stop offset=".79" stop-opacity=".05"/>\n  </linearGradient>\n  <path fill="url(#a)" d="M95.1 36.9A42.7 42.7 0 1 0 21.2 80l20.1 34.8 10.8.1h5.7c11.1 0 20 0 27.3-.8 9.1-1 15.6-3.2 20.7-8.3 7.3-7.3 8.7-17.9 9-34.9a3101.9 3101.9 0 0 1-19.7-34z"/>\n  <path fill="#fff" d="M88 27.8a42.7 42.7 0 1 0-60.3 60.5A42.7 42.7 0 1 0 88 27.8zm-2.5 19.7L64.4 84.2c-1.3 2.3-3.2 3.7-5.8 3.8-2.9.2-5.2-1-6.7-3.6L38.6 61.3l-8.1-14a7.1 7.1 0 0 1 5.8-10.8 6.8 6.8 0 0 1 6.5 3.7l5.9 10.3 4.3 7.4c2.1 3.5 5.2 5.5 9.3 5.8 5.8.3 11.3-3.9 12-10.1l.1-1.2c0-2-.4-3.7-1.2-5.3a7 7 0 0 1 4.9-10.3 7 7 0 0 1 8.4 5.9 8 8 0 0 1-1 4.8z"/>\n</svg>\n'},33427:e=>{e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11a9 9 0 019-9h104a9 9 0 019 9v98a9 9 0 01-9 9H11a9 9 0 01-9-9V11zm9-7a7 7 0 00-7 7v98a7 7 0 007 7h104a7 7 0 007-7V11a7 7 0 00-7-7H11z"/>\r\n  <path d="M4 10a6 6 0 016-6h106a6 6 0 016 6v8H4v-8z" fill-opacity=".25"/>\r\n  <rect x="16" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="54" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="92" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect x="9" y="9" width="5" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="47" y="9" width="5" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="85" y="9" width="5" height="5" rx="2.5"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M122 18H4v2h37v96h2V20h79v-2z"/>\r\n  <path d="M4 19h37v97H10a6 6 0 01-6-6V19z" fill-opacity=".25"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.394 25.643a3.697 3.697 0 00-3.697 3.695 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.695zm0 13.3a3.697 3.697 0 00-3.697 3.694 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.694zM5.697 55.936a3.697 3.697 0 017.394 0 3.697 3.697 0 01-7.394 0zm3.697 9.605a3.697 3.697 0 00-3.697 3.695 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.695zM5.697 82.535a3.697 3.697 0 017.394 0 3.697 3.697 0 01-7.394 0zm3.697 9.605a3.697 3.697 0 00-3.697 3.694 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.694zM30.097 25.643H16.048v1.478h14.049v-1.478zm0 13.3H16.048v1.477h14.049v-1.477zM16.048 52.242h14.049v1.478H16.048v-1.478zm14.049 13.3H16.048v1.477h14.049v-1.478zM16.048 78.84h14.049v1.478H16.048V78.84zm14.049 13.3H16.048v1.477h14.049V92.14zM16.048 28.598H38.23v1.477H16.048V28.6zm22.182 13.3H16.048v1.477H38.23v-1.478zM16.048 55.196H38.23v1.478H16.048v-1.478zm22.182 13.3H16.048v1.478H38.23v-1.478zm-22.182 13.3H38.23v1.477H16.048v-1.478zM38.23 95.095H16.048v1.477H38.23v-1.477zM16.048 31.553h18.485v1.478H16.048v-1.478zm18.485 13.3H16.048v1.477h18.485v-1.478zM16.048 58.152h18.485v1.478H16.048v-1.478zm18.485 13.3H16.048v1.477h18.485v-1.478zM16.048 84.751h18.485v1.477H16.048v-1.477zM34.533 98.05H16.048v1.478h18.485V98.05z"/>\r\n  <path opacity=".1" d="M115 6a1 1 0 000-2v2zM6 17v-6H4v6h2zm0-6c0-.84.26-2.122 1.012-3.166C7.726 6.842 8.926 6 11 6V4C8.274 4 6.474 5.158 5.388 6.666 4.34 8.122 4 9.84 4 11h2zm5-5H115V4H11v2z" fill="#fff"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M121 11a1 1 0 011 1V108.5c0 2.21-.694 4.095-1.96 5.437-1.27 1.344-3.043 2.063-5.04 2.063H11a1 1 0 010-2h104c1.503 0 2.73-.531 3.585-1.437.859-.908 1.415-2.273 1.415-4.063V12a1 1 0 011-1z" fill="#000"/>\r\n</svg>\r\n'},9927:e=>{e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1 1h2v1H1V1zm1 1h2v1H2V2zm4 0h2v1H6V2zm1-1h2v1H7V1zM3 3h4v1H3V3zm1 1h2v1H4V4zM3 5h4v1H3V5zM2 6h2v1H2V6zm4 0h2v1H6V6zm1 1h2v1H7V7zM1 7h2v1H1V7z"/>\n</svg>'},7969:e=>{e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M1 2h8v1H1V2zM0 1h10v1H0V1zm0 7h10v1H0V8zm0-6h1v6H0V2zm9 0h1v6H9V2z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M1 3h6v1H1V3zM0 2h8v1H0V2zm1 7h6v1H1V9zM0 3h1v7H0V3zm7 0h1v7H7V3zM2 0h8v1H2V0zm7 1h1v7H9V1z"/>\n  </g>\n</svg>\n'},98221:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n    <path d="M1 7h8v2H1z"/>\n</svg>'},51759:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n  <path d="M10.2.5l-.7-.7L5 4.3.5-.2l-.7.7L4.3 5-.2 9.5l.7.7L5 5.7l4.5 4.5.7-.7L5.7 5"/>\n</svg>\n'},9592:e=>{e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M9 1v8H1V1h8m1-1H0v10h10V0z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M3 0H2v2H0v8h8V8h2V0H3zm4 9H1V3h6v6zm2-2H8V2H3V1h6v6z"/>\n  </g>\n</svg>\n'},96375:e=>{e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n  <path d="M0 5H10V6H0V5Z"/>\n</svg>\n'},13929:e=>{e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M21 8C21 6.89543 20.1046 6 19 6H7C5.89543 6 5 6.89543 5 8V18C5 19.1046 5.89543 20 7 20H19C20.1046 20 21 19.1046 21 18V8ZM10 8H12V10H10V8ZM9 8H7V10H9V8ZM19 11V18H7V11H19ZM13 10H19V8H13V10Z"/>\n</svg>\n'},2144:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1 4C1 2.89543 1.89543 2 3 2H13C14.1046 2 15 2.89543 15 4V12C15 13.1046 14.1046 14 13 14H3C1.89543 14 1 13.1046 1 12V4ZM9 4H13V6H9V4ZM8 4H6V6H8V4ZM5 4H3V6H5V4ZM3 7L3 12H13V7H3Z"/>\n</svg>\n'},32545:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14 3H2a1 1 0 00-1 1v2h14V4a1 1 0 00-1-1zM1 12V7h14v5a1 1 0 01-1 1H2a1 1 0 01-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2zm4 2H2v1h4V4z"/>\n</svg>\n'},31866:e=>{e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M1 4C1 3.44772 1.44772 3 2 3H14C14.5523 3 15 3.44772 15 4V6H1V4ZM1 7V12C1 12.5523 1.44772 13 2 13H14C14.5523 13 15 12.5523 15 12V7H1ZM2 4H6V5H2V4Z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M2 3H14C14.5523 3 15 3.44772 15 4V6H16V4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V6H1V4C1 3.44772 1.44772 3 2 3ZM1 7H0V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V7H15V12C15 12.5523 14.5523 13 14 13H2C1.44772 13 1 12.5523 1 12V7Z"/>\n</svg>\n'},62077:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACfSURBVHgBvZIxCgMhEEXHkEZPscex1s7LZHMWwU5bvU1yCW3NuoEQwoy6BPY1Mvh9OirAn7Dvwhjz2IYFya3OuTsmuPzUC+Csm/w2I+iBSo4IUAkpkFKC1hqVTAkaSilK8uFKTaSUQAixC0opEGNEc90TMPZ+Zc45mSEFbefWgvceQgikgGwh5wzW2r2VHt07mOHoPxgKnqMFtdZh5lxeJo4r4FiF0c8AAAAASUVORK5CYII="},72536:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACfSURBVHgBvZIxCgMhEEXHkEZPscex1s7LZHMWwU5bvU1yCW3NuoEQwoy6BPY1Mvh9OirAn7Dvwhjz2IYFya3OuTsmuPzUC+Csm/w2I+iBSo4IUAkpkFKC1hqVTAkaSilK8uFKTaSUQAixC0opEGNEc90TMPZ+Zc45mSEFbefWgvceQgikgGwh5wzW2r2VHt07mOHoPxgKnqMFtdZh5lxeJo4r4FiF0c8AAAAASUVORK5CYII="},26591:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAyUlEQVR42q3TvQrCMBDAcV+ro7vvURx9AXVyaUGwuzinfsw66OYD+AJ2K21DUlooDaXEXOGki7mCDfy4G5L/lslsvvjLuAFz1j9MBwe01queped5F8dxthAZGti0bfvFGHsIISRGyEDTNDsjAEqpAALanH7EGqjr+tDnuu4+DMM78H3/DHesgaqqjhYnMlCW5bUoihuAHSciA+bBM8/zDuw4cScDUsqXDRngnL9RlmURTtzJQJIkPE3TDuw4ERmI41jZkIEhRv2NH2DDzUU+EiSYAAAAAElFTkSuQmCC"},86635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAqUlEQVR4AWP4z4gfElbAYMNQw9AAhSkMzBgKgNIiDOxQGMXgg6mgQYVdBSgJwgx8DLkMtUiwgsEXqKCBBwGTeKP5ENBbkKEBpEAAAftBGEKC+WAFlaK4IVhBjhQCFkiCMAKCFYTKIWCELAhHyMbJgXCcHFiBk7KTsicYI6CLEgi7KIEV6KnrqauDMAJARIAQpKCWz1RQBzvkMgWGBYMjkGjADoEyjpTHJgCRpZrxxM2tswAAAABJRU5ErkJggg=="},68551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAZElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/X+IKHgPCyhs3vxzn+FXwq/7yIGDAt//SqA8MgF9hfa1XsQ+LgAAAABJRU5ErkJggg=="},13253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiAxMIBBzsKlp7AAAA6klEQVQoz42RP04CURDGf8MObmyk8QSElhtQYGdBYSgJhhvABTCEI+AFJJGaUEDiRewojKEBJWGzBXlRGQoWeKsJOJN5k5l8b/59YsJJyXBGhBJlNIlmPNnmN6TNNWGiNSomaVW0EMOUAlMY05C29/mLV4V69pDYvPedN/QqmLQUDhMARSJyQESOCGyCgjtWYJHY/gWF2AOofYuav4PC3GsR2I+MeoDcNUePQF5hmYUQR5iALAMQXexurPCp4AhxKcCb7rzwcPUSrP2uR3bc5fpWuKFEkLptFYAhVYwP+cumDAA6993nf7G5BYxPRUIY3xtuAAAAAElFTkSuQmCC"},89661:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAbElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/Z90BRi+wFQAcSCcpoKC97CAwuGGXwm/7iMHDoYJDFicTZICAK40+w1CznHyAAAAAElFTkSuQmCC"},28141:()=>{},85746:()=>{},78491:()=>{},70253:e=>{"use strict";e.exports=JSON.parse('{"M":{"pb":[["af","Afrikaans","Afrikaans"],["az","Azerbaijani","Azərbaycanca"],["be","Belarusian","Беларуская"],["bg","Bulgarian","български"],["cs","Czech","Čeština"],["da","Danish","Dansk"],["de","German","Deutsch"],["de-CH","Swiss German","Schweizerdeutsch"],["el","Greek","Ελληνικά"],["en-US","English (US)","English (US)"],["en-GB","English (UK)","English (UK)"],["es","Spanish","Español"],["et","Estonian","Eesti keel"],["fa","Persian","فارسی"],["fi","Finnish","Suomi"],["fr","French","Français"],["fy","Frisian","Frysk"],["gd","Scots Gaelic","Gàidhlig"],["hu","Hungarian","Magyar"],["hr","Croatian","Hrvatski"],["hy","Armenian","Հայերեն"],["id","Indonesian","Bahasa Indonesia"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["ja-KS","Japanese (Kansai)","関西弁"],["ja","Japanese","日本語"],["kab","Kabyle","Taqbaylit"],["ko","Korean","한국어"],["ku","Kurdish","Kurdî"],["lt","Lithuanian","Lietuvių"],["nb","Norwegian (Bokmål)","Norsk (bokmål)"],["nn","Norwegian (Nynorsk)","Norsk (nynorsk)"],["nl","Dutch","Nederlands"],["pl","Polish","Polski"],["pt-BR","Portuguese (Brazil)","Português (Brasil)"],["pt-PT","Portuguese (Portugal)","Português (Europeu)"],["ro","Romanian","Română"],["ru","Russian","Русский"],["sk","Slovak","Slovenčina"],["sl","Slovenian","Slovenščina"],["sq","Albanian","Shqip"],["sr","Serbian","Српски"],["sr-Latn","Serbian (Latin)","Srpski"],["sv","Swedish","Svenska"],["tr","Turkish","Türkçe"],["uk","Ukrainian","Українська"],["vi","Vietnamese","Tiếng Việt"],["zh-CN","Chinese (Simplified)","简体中文"],["zh-TW","Chinese (Traditional)","正體中文"]]}}')}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=t,e=[],s.O=(t,n,i,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,i,r]=e[u],o=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(o=!1,r<a&&(a=r));if(o){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=296,(()=>{var e={296:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,o,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var u=l(s)}for(t&&t(n);c<a.length;c++)r=a[c],s.o(e,r)&&e[r]&&e[r][0](),e[a[c]]=0;return s.O(u)},n=self.webpackChunkgapp_browser_react=self.webpackChunkgapp_browser_react||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[739,277],(()=>s(33125)));i=s.O(i)})();