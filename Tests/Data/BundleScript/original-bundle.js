!function(e){function t(t){for(var n,r,o=t[0],l=t[1],c=t[2],m=0,d=[];m<o.length;m++)r=o[m],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);d.length;)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},i={2:0},s=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([1437,0,16]),a()}([,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);function i(e,t,a){const i=Array.from(arguments);i[0]="Ð"+i[0];let s=Object(n.a)(...i);return s.startsWith("Ð")&&(s=s.substr(1)),{label:Object(n.a)(...arguments),labelEnglish:s}}},,,,,function(e,t,a){"use strict";a.d(t,"Zd",(function(){return tn})),a.d(t,"hc",(function(){return an})),a.d(t,"jc",(function(){return nn})),a.d(t,"ic",(function(){return sn})),a.d(t,"mc",(function(){return rn})),a.d(t,"kc",(function(){return on})),a.d(t,"lc",(function(){return ln})),a.d(t,"oc",(function(){return cn})),a.d(t,"C",(function(){return un})),a.d(t,"E",(function(){return mn})),a.d(t,"B",(function(){return dn})),a.d(t,"H",(function(){return hn})),a.d(t,"J",(function(){return pn})),a.d(t,"M",(function(){return bn})),a.d(t,"N",(function(){return gn})),a.d(t,"Gb",(function(){return Nn})),a.d(t,"od",(function(){return fn})),a.d(t,"k",(function(){return _n})),a.d(t,"W",(function(){return vn})),a.d(t,"L",(function(){return En})),a.d(t,"I",(function(){return Cn})),a.d(t,"K",(function(){return wn})),a.d(t,"Q",(function(){return On})),a.d(t,"R",(function(){return yn})),a.d(t,"yb",(function(){return Sn})),a.d(t,"zb",(function(){return Tn})),a.d(t,"Hb",(function(){return kn})),a.d(t,"Lb",(function(){return An})),a.d(t,"Jb",(function(){return In})),a.d(t,"Bc",(function(){return Dn})),a.d(t,"Cc",(function(){return Mn})),a.d(t,"Qb",(function(){return Pn})),a.d(t,"Rb",(function(){return xn})),a.d(t,"Ob",(function(){return Ln})),a.d(t,"Zb",(function(){return jn})),a.d(t,"Wb",(function(){return Rn})),a.d(t,"ac",(function(){return Bn})),a.d(t,"Pb",(function(){return Fn})),a.d(t,"Xb",(function(){return Un})),a.d(t,"Yb",(function(){return Hn})),a.d(t,"Kb",(function(){return Vn})),a.d(t,"cc",(function(){return Wn})),a.d(t,"dc",(function(){return zn})),a.d(t,"Ub",(function(){return Gn})),a.d(t,"ec",(function(){return Kn})),a.d(t,"Mb",(function(){return Yn})),a.d(t,"Ib",(function(){return $n})),a.d(t,"Tb",(function(){return Xn})),a.d(t,"qc",(function(){return Zn})),a.d(t,"sc",(function(){return Qn})),a.d(t,"Rc",(function(){return qn})),a.d(t,"Tc",(function(){return Jn})),a.d(t,"Id",(function(){return ei})),a.d(t,"Ld",(function(){return ti})),a.d(t,"Kd",(function(){return ai})),a.d(t,"Jd",(function(){return ni})),a.d(t,"fb",(function(){return ii})),a.d(t,"gb",(function(){return si})),a.d(t,"qd",(function(){return ri})),a.d(t,"rd",(function(){return oi})),a.d(t,"Ec",(function(){return li})),a.d(t,"Qd",(function(){return ci})),a.d(t,"wb",(function(){return ui})),a.d(t,"h",(function(){return mi})),a.d(t,"i",(function(){return di})),a.d(t,"pd",(function(){return hi})),a.d(t,"ib",(function(){return pi})),a.d(t,"V",(function(){return bi})),a.d(t,"pb",(function(){return gi})),a.d(t,"sb",(function(){return Ni})),a.d(t,"tb",(function(){return fi})),a.d(t,"ub",(function(){return _i})),a.d(t,"vb",(function(){return vi})),a.d(t,"Pd",(function(){return Ei})),a.d(t,"td",(function(){return Ci})),a.d(t,"q",(function(){return wi})),a.d(t,"n",(function(){return Oi})),a.d(t,"o",(function(){return yi})),a.d(t,"p",(function(){return Si})),a.d(t,"xb",(function(){return Ti})),a.d(t,"jb",(function(){return ki})),a.d(t,"cb",(function(){return Ai})),a.d(t,"Sd",(function(){return Ii})),a.d(t,"Td",(function(){return Di})),a.d(t,"Ud",(function(){return Mi})),a.d(t,"g",(function(){return Pi})),a.d(t,"F",(function(){return xi})),a.d(t,"G",(function(){return Li})),a.d(t,"vd",(function(){return ji})),a.d(t,"nb",(function(){return Ri})),a.d(t,"Db",(function(){return Bi})),a.d(t,"be",(function(){return Fi})),a.d(t,"ce",(function(){return Ui})),a.d(t,"Bb",(function(){return Hi})),a.d(t,"P",(function(){return Vi})),a.d(t,"Od",(function(){return Wi})),a.d(t,"Ac",(function(){return zi})),a.d(t,"zc",(function(){return Gi})),a.d(t,"U",(function(){return Ki})),a.d(t,"ud",(function(){return Yi})),a.d(t,"sd",(function(){return $i})),a.d(t,"Wd",(function(){return Xi})),a.d(t,"xc",(function(){return Zi})),a.d(t,"yc",(function(){return Qi})),a.d(t,"Fc",(function(){return qi})),a.d(t,"Gc",(function(){return Ji})),a.d(t,"Hc",(function(){return es})),a.d(t,"Ic",(function(){return ts})),a.d(t,"Jc",(function(){return as})),a.d(t,"Kc",(function(){return ns})),a.d(t,"Lc",(function(){return is})),a.d(t,"Mc",(function(){return ss})),a.d(t,"Nc",(function(){return rs})),a.d(t,"Xd",(function(){return os}));var n=a(995),i=a.n(n);a.d(t,"c",(function(){return i.a}));var s=a(996),r=a.n(s);a.d(t,"d",(function(){return r.a}));var o=a(997),l=a.n(o);a.d(t,"e",(function(){return l.a}));var c=a(998),u=a.n(c);a.d(t,"f",(function(){return u.a}));var m=a(999),d=a.n(m);a.d(t,"l",(function(){return d.a}));var h=a(728),p=a.n(h);a.d(t,"r",(function(){return p.a}));var b=a(1e3),g=a.n(b);a.d(t,"s",(function(){return g.a}));var N=a(1001),f=a.n(N);a.d(t,"t",(function(){return f.a}));var _=a(1002),v=a.n(_);a.d(t,"u",(function(){return v.a}));var E=a(1003),C=a.n(E);a.d(t,"v",(function(){return C.a}));var w=a(1004),O=a.n(w);a.d(t,"w",(function(){return O.a}));var y=a(1005),S=a.n(y);a.d(t,"x",(function(){return S.a}));var T=a(1006),k=a.n(T);a.d(t,"y",(function(){return k.a}));var A=a(1007),I=a.n(A);a.d(t,"z",(function(){return I.a}));var D=a(1008),M=a.n(D);a.d(t,"A",(function(){return M.a}));var P=a(1009),x=a.n(P);a.d(t,"D",(function(){return x.a}));a(1010);var L=a(1011),j=a.n(L);a.d(t,"O",(function(){return j.a}));var R=a(1012),B=a.n(R);a.d(t,"S",(function(){return B.a}));var F=a(1013),U=a.n(F);a.d(t,"T",(function(){return U.a}));var H=a(1014),V=a.n(H);a.d(t,"db",(function(){return V.a}));var W=a(1015),z=a.n(W);a.d(t,"X",(function(){return z.a}));var G=a(1016),K=a.n(G);a.d(t,"Y",(function(){return K.a}));var Y=a(1017),$=a.n(Y);a.d(t,"hb",(function(){return $.a}));a(1018);var X=a(1019),Z=a.n(X);a.d(t,"kb",(function(){return Z.a}));var Q=a(729),q=a.n(Q);a.d(t,"lb",(function(){return q.a}));var J=a(730),ee=a.n(J);a.d(t,"mb",(function(){return ee.a}));var te=a(1020),ae=a.n(te);a.d(t,"ob",(function(){return ae.a}));var ne=a(447),ie=a.n(ne);a.d(t,"rb",(function(){return ie.a}));var se=a(1021),re=a.n(se);a.d(t,"Ab",(function(){return re.a}));var oe=a(1022),le=a.n(oe);a.d(t,"Eb",(function(){return le.a}));var ce=a(1023),ue=a.n(ce);a.d(t,"Fb",(function(){return ue.a}));var me=a(731),de=a.n(me);a.d(t,"fc",(function(){return de.a}));var he=a(1024),pe=a.n(he);a.d(t,"nc",(function(){return pe.a}));var be=a(1025),ge=a.n(be);a.d(t,"rc",(function(){return ge.a}));var Ne=a(1026),fe=a.n(Ne);a.d(t,"tc",(function(){return fe.a}));var _e=a(1027),ve=a.n(_e);a.d(t,"uc",(function(){return ve.a}));var Ee=a(1028),Ce=a.n(Ee);a.d(t,"vc",(function(){return Ce.a}));var we=a(1029),Oe=a.n(we);a.d(t,"a",(function(){return Oe.a}));var ye=a(1030),Se=a.n(ye);a.d(t,"eb",(function(){return Se.a}));var Te=a(1031),ke=a.n(Te);a.d(t,"wc",(function(){return ke.a}));var Ae=a(1032),Ie=a.n(Ae);a.d(t,"Dc",(function(){return Ie.a}));var De=a(1033),Me=a.n(De);a.d(t,"ld",(function(){return Me.a}));var Pe=a(1034),xe=a.n(Pe);a.d(t,"md",(function(){return xe.a}));var Le=a(1035),je=a.n(Le);a.d(t,"nd",(function(){return je.a}));var Re=a(1036),Be=a.n(Re);a.d(t,"wd",(function(){return Be.a}));var Fe=a(1037),Ue=a.n(Fe);a.d(t,"xd",(function(){return Ue.a}));var He=a(1038),Ve=a.n(He);a.d(t,"yd",(function(){return Ve.a}));var We=a(1039),ze=a.n(We);a.d(t,"zd",(function(){return ze.a}));var Ge=a(1040),Ke=a.n(Ge);a.d(t,"Ad",(function(){return Ke.a}));a(1041);var Ye=a(1042),$e=a.n(Ye);a.d(t,"Cd",(function(){return $e.a}));var Xe=a(1043),Ze=a.n(Xe);a.d(t,"Ed",(function(){return Ze.a}));var Qe=a(1044),qe=a.n(Qe);a.d(t,"Hd",(function(){return qe.a}));var Je=a(1045),et=a.n(Je);a.d(t,"Dd",(function(){return et.a}));var tt=a(1046),at=a.n(tt);a.d(t,"Gd",(function(){return at.a}));var nt=a(1047),it=a.n(nt);a.d(t,"Fd",(function(){return it.a}));a(865);var st=a(1048),rt=a.n(st);a.d(t,"Md",(function(){return rt.a}));var ot=a(1049),lt=a.n(ot);a.d(t,"Nd",(function(){return lt.a}));var ct=a(1050),ut=a.n(ct);a.d(t,"Vd",(function(){return ut.a}));a(1051);var mt=a(1052),dt=a.n(mt);a.d(t,"le",(function(){return dt.a}));var ht=a(1053),pt=a.n(ht);a.d(t,"me",(function(){return pt.a}));var bt=a(1054),gt=a.n(bt);a.d(t,"fe",(function(){return gt.a}));var Nt=a(1055),ft=a.n(Nt);a.d(t,"Pc",(function(){return ft.a}));var _t=a(1056),vt=a.n(_t);a.d(t,"b",(function(){return vt.a}));var Et=a(1057),Ct=a.n(Et);a.d(t,"je",(function(){return Ct.a}));var wt=a(1058),Ot=a.n(wt);a.d(t,"ee",(function(){return Ot.a}));var yt=a(1059),St=a.n(yt);a.d(t,"de",(function(){return St.a}));var Tt=a(1060),kt=a.n(Tt);a.d(t,"ge",(function(){return kt.a}));var At=a(1061),It=a.n(At);a.d(t,"he",(function(){return It.a}));var Dt=a(1062),Mt=a.n(Dt);a.d(t,"ke",(function(){return Mt.a}));var Pt=a(1063),xt=a.n(Pt);a.d(t,"Sb",(function(){return xt.a}));var Lt=a(1064),jt=a.n(Lt);a.d(t,"Vb",(function(){return jt.a}));var Rt=a(1065),Bt=a.n(Rt);a.d(t,"bc",(function(){return Bt.a}));var Ft=a(1066),Ut=a.n(Ft);a.d(t,"Nb",(function(){return Ut.a}));var Ht=a(1067),Vt=a.n(Ht);a.d(t,"qb",(function(){return Vt.a}));var Wt=a(1068),zt=a.n(Wt);a.d(t,"Sc",(function(){return zt.a}));var Gt=a(1069),Kt=a.n(Gt);a.d(t,"Uc",(function(){return Kt.a}));var Yt=a(1070),$t=a.n(Yt);a.d(t,"Vc",(function(){return $t.a}));var Xt=a(1071),Zt=a.n(Xt);a.d(t,"Wc",(function(){return Zt.a}));var Qt=a(1072),qt=a.n(Qt);a.d(t,"Xc",(function(){return qt.a}));var Jt=a(1073),ea=a.n(Jt);a.d(t,"Yc",(function(){return ea.a}));var ta=a(1074),aa=a.n(ta);a.d(t,"Zc",(function(){return aa.a}));var na=a(1075),ia=a.n(na);a.d(t,"ad",(function(){return ia.a}));var sa=a(1076),ra=a.n(sa);a.d(t,"bd",(function(){return ra.a}));var oa=a(1077),la=a.n(oa);a.d(t,"cd",(function(){return la.a}));var ca=a(1078),ua=a.n(ca);a.d(t,"dd",(function(){return ua.a}));var ma=a(1079),da=a.n(ma);a.d(t,"ed",(function(){return da.a}));var ha=a(1080),pa=a.n(ha);a.d(t,"fd",(function(){return pa.a}));var ba=a(1081),ga=a.n(ba);a.d(t,"gd",(function(){return ga.a}));var Na=a(1082),fa=a.n(Na);a.d(t,"hd",(function(){return fa.a}));var _a=a(1083),va=a.n(_a);a.d(t,"id",(function(){return va.a}));var Ea=a(1084),Ca=a.n(Ea);a.d(t,"jd",(function(){return Ca.a}));var wa=a(1085),Oa=a.n(wa);a.d(t,"kd",(function(){return Oa.a}));var ya=a(866),Sa=a.n(ya);a.d(t,"ie",(function(){return Sa.a}));var Ta=a(1086),ka=a.n(Ta);a.d(t,"ab",(function(){return ka.a}));var Aa=a(1087),Ia=a.n(Aa);a.d(t,"bb",(function(){return Ia.a}));var Da=a(1088),Ma=a.n(Da);a.d(t,"Z",(function(){return Ma.a}));var Pa=a(1089),xa=a.n(Pa);a.d(t,"j",(function(){return xa.a}));var La=a(1090),ja=a.n(La);a.d(t,"m",(function(){return ja.a}));var Ra=a(1091),Ba=a.n(Ra);a.d(t,"Cb",(function(){return Ba.a}));var Fa=a(1092),Ua=a.n(Fa);a.d(t,"gc",(function(){return Ua.a}));var Ha=a(1093),Va=a.n(Ha);a.d(t,"pc",(function(){return Va.a}));var Wa=a(1094),za=a.n(Wa);a.d(t,"Oc",(function(){return za.a}));var Ga=a(1095),Ka=a.n(Ga);a.d(t,"Qc",(function(){return Ka.a}));var Ya=a(1096),$a=a.n(Ya);a.d(t,"Bd",(function(){return $a.a}));var Xa=a(1097),Za=a.n(Xa);a.d(t,"Rd",(function(){return Za.a}));var Qa=a(1098),qa=a.n(Qa);a.d(t,"Yd",(function(){return qa.a}));var Ja=a(1099),en=a.n(Ja);a.d(t,"ae",(function(){return en.a}));const tn={small:a(1442),medium:a(1443),large:a(1444)},an={small:a(1445),medium:a(1446),large:a(1447)},nn={small:a(1448),medium:a(1449),large:a(1450)},sn={small:a(1451),medium:a(1452),large:a(1453)},rn={small:a(1454),medium:a(1455),large:a(1456)},on={small:a(1457),medium:a(1458),large:a(1459)},ln={small:a(1460),medium:a(1461),large:a(1462)},cn={small:a(1100),medium:a(1100),large:a(1463)},un={small:a(1464),medium:a(1465),large:a(1466)},mn={small:a(867),medium:a(867),large:a(867)},dn={small:a(1101),medium:a(1101),large:a(1467)},hn={small:a(1468),medium:a(1469),large:a(1470)},pn={small:a(868),medium:a(868),large:a(868)},bn={small:a(869),medium:a(869),large:a(869)},gn={small:a(870),medium:a(870),large:a(870)},Nn={small:a(871),medium:a(871),large:a(871)},fn={small:a(872),medium:a(872),large:a(872)},_n={small:a(873),medium:a(873),large:a(873)},vn={small:a(1471),medium:a(1472),large:a(1473)},En={small:a(874),medium:a(874),large:a(874)},Cn={small:a(875),medium:a(875),large:a(875)},wn={small:a(876),medium:a(876),large:a(876)},On={small:a(1474),medium:a(1475),large:a(1476)},yn={small:a(877),medium:a(877),large:a(877)},Sn={small:a(1477),medium:a(1478),large:a(1479)},Tn={small:a(878),medium:a(878),large:a(878)},kn={small:a(1480),medium:a(1481),large:a(1482)},An={small:a(879),medium:a(879),large:a(879)},In={small:a(1483),medium:a(1484),large:a(1485)},Dn={small:a(1486),medium:a(1102),large:a(1102)},Mn={small:a(880),medium:a(880),large:a(880)},Pn={small:a(1487),medium:a(1488),large:a(1489)},xn={small:a(1490),medium:a(1103),large:a(1103)},Ln={small:a(1491),medium:a(1492),large:a(1493)},jn={small:a(1494),medium:a(1495),large:a(1496)},Rn={small:a(1497),medium:a(1498),large:a(1499)},Bn={small:a(1500),medium:a(1501),large:a(1502)},Fn={small:a(1503),medium:a(1504),large:a(1505)},Un={small:a(1506),medium:a(1507),large:a(1508)},Hn={small:a(1509),medium:a(1510),large:a(1511)},Vn={small:a(1512),medium:a(1513),large:a(1514)},Wn={small:a(1515),medium:a(1516),large:a(1517)},zn={small:a(1518),medium:a(1519),large:a(1520)},Gn={small:a(1521),medium:a(1522),large:a(1523)},Kn={small:a(1524),medium:a(1525),large:a(1526)},Yn=(a(881),a(881),a(881),a(882),a(882),a(882),{small:a(883),medium:a(883),large:a(883)}),$n={small:a(1527),medium:a(1528),large:a(1529)},Xn={small:a(1530),medium:a(1531),large:a(1532)},Zn={small:a(1533),medium:a(1104),large:a(1104)},Qn={small:a(884),medium:a(884),large:a(884)},qn={small:a(1534),medium:a(1105),large:a(1105)},Jn={small:a(885),medium:a(885),large:a(885)},ei={small:a(1106),medium:a(1106),large:a(1535)},ti={small:a(1107),medium:a(1107),large:a(1536)},ai={small:a(1108),medium:a(1108),large:a(1537)},ni={small:a(1109),medium:a(1109),large:a(1538)},ii={small:a(1539),medium:a(1540),large:a(1541)},si={small:a(886),medium:a(886),large:a(886)},ri={small:a(1542),medium:a(1543),large:a(1544)},oi={small:a(1545),medium:a(1546),large:a(1547)},li={small:a(1110),medium:a(1110),large:a(1548)},ci={small:a(1111),medium:a(1111),large:a(1549)},ui={small:a(1550),medium:a(1551),large:a(1552)},mi={small:a(1553),medium:a(1554),large:a(1555)},di={small:a(887),medium:a(887),large:a(887)},hi={small:a(1556),medium:a(1557),large:a(1558)},pi={small:a(1559),medium:a(1560),large:a(1561)},bi={small:a(1562),medium:a(1112),large:a(1112)},gi={small:a(1563),medium:a(1113),large:a(1113)},Ni={small:a(447),medium:a(447),large:a(447)},fi={small:a(888),medium:a(888),large:a(888)},_i={small:a(889),medium:a(889),large:a(889)},vi={small:a(890),medium:a(890),large:a(890)},Ei={small:a(891),medium:a(891),large:a(891)},Ci=(a(892),a(892),a(892),{small:a(1564),medium:a(1565),large:a(1566)}),wi={small:a(893),medium:a(893),large:a(893)},Oi={small:a(1114),medium:a(1114),large:a(1567)},yi={small:a(730),medium:a(730),large:a(1568)},Si={small:a(729),medium:a(729),large:a(1569)},Ti={small:a(894),medium:a(894),large:a(894)},ki={small:a(895),medium:a(895),large:a(895)},Ai={small:a(896),medium:a(896),large:a(896)},Ii={small:a(1115),medium:a(1115),large:a(1570)},Di={small:a(1116),medium:a(1116),large:a(1571)},Mi={small:a(897),medium:a(897),large:a(897)},Pi={small:a(1572),medium:a(1573),large:a(1574)},xi=(a(1575),a(1576),a(1577),{small:a(1578),medium:a(1579),large:a(1580)}),Li={small:a(1581),medium:a(1582),large:a(1583)},ji={small:a(1584),medium:a(1585),large:a(1586)},Ri={small:a(1587),medium:a(1588),large:a(1589)},Bi={small:a(1590),medium:a(1591),large:a(1592)},Fi={small:a(1593),medium:a(1594),large:a(1595)},Ui={small:a(898),medium:a(898),large:a(898)},Hi={small:a(1117),medium:a(1117),large:a(1596)},Vi={small:a(1118),medium:a(1118),large:a(1597)},Wi={small:a(1119),medium:a(1119),large:a(1598)},zi={small:a(1120),medium:a(1120),large:a(1599)},Gi={small:a(1121),medium:a(1121),large:a(1600)},Ki={small:a(1601),medium:a(1122),large:a(1122)},Yi={small:a(899),medium:a(899),large:a(899)},$i={small:a(900),medium:a(900),large:a(900)},Xi={small:a(1602),medium:a(1603),large:a(1604)},Zi={small:a(901),medium:a(901),large:a(901)},Qi={small:a(902),medium:a(902),large:a(902)},qi={small:a(1605),medium:a(1123),large:a(1123)},Ji={small:a(1606),medium:a(1124),large:a(1124)},es={small:a(1607),medium:a(1125),large:a(1125)},ts={small:a(1608),medium:a(1126),large:a(1126)},as={small:a(1609),medium:a(1127),large:a(1127)},ns={small:a(1610),medium:a(1128),large:a(1128)},is={small:a(1611),medium:a(1129),large:a(1129)},ss={small:a(1612),medium:a(1130),large:a(1130)},rs={small:a(1613),medium:a(1131),large:a(1131)},os={small:a(1614),medium:a(1615),large:a(1616)}},,,function(e,t,a){"use strict";var n=a(1258),i=a.n(n);t.a=new class extends i.a{}},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return B})),a.d(t,"d",(function(){return ve}));var n=a(397),i=a(57),s=a.n(i),r=a(53),o=a(6),l=a(108),c=a(12),u=a(35),m=a(17),d=a(10),h=a(125),p=a.n(h),b=a(303),g=a(112),N=a.n(g),f=a(37),_=a(26),v=a(361),E=a(284),C=a(398),w=a(23),O=a(46),y=a(1),S=a(188),T=a(14),k=a(856);const A="change",I=`${w.p.internals.startpage}?section=Speed-dials&activeSpeedDialIndex=0`;let D=Object(_.Map)(),M=Object(_.Map)(),P=Object(_.Set)(),x=Object(_.Map)(),L=Object(_.Map)(),j=Object(_.Map)(),R=Object(_.Map)();class B extends(Object(_.Record)({type:"tab",id:0,page:new r.b})){}class F extends(Object(_.Record)({type:"group",id:"",page:new r.b,pages:Object(_.List)()})){}function U(e){if(e.pinned&&"on"!==o.a.get(y.kTabsClosePinned))return!1;return!(o.a.get(y.kTabsNeverCloseLast)&&Object(w.i)(e.url)&&H.isLastPage(e.windowId))}const H=new class extends s.a{constructor(...e){var t,a,n;super(...e),n=U,(a="canClosePage")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}findPageToActivateAfterClosingPage(e,t){return oe(e,t)}findRepositionedIndex(e,t,a){return function(e,t,a){const n=o.a.get(y.kTabsNewPlacement);if(e.pinned)return e.index;if(function(e){return L.get(e.getIn(["extData","ext_id"]))}(e))return Z(e.getIn(["extData","ext_id"]),!1),e.index;const i=e.openerTabId?H.getPageById(e.openerTabId):null,s=i?Object(r.c)(i):Object(r.c)(e),l=(()=>{if(!a)return e.index;const t=Object(r.c)(a);if(s&&s!==t&&H.isGroup(t,a.windowId)){return H.getGroup(t,a.windowId).last().index+1}return a.pinned?0:a.index+1})();switch(n){case"directrightofcurrent":return l;case"openintabstackwithrelated":case"rightofcurrent":{if("number"!=typeof e.openerTabId)return e.index;const a=H.getPageById(e.openerTabId);if(null==a?void 0:a.pinned)return 0;const n=t=>t.id!==e.openerTabId&&t.openerTabId!==e.openerTabId,i=t.skipWhile(n).takeUntil(n).last();return i?i.index+1:e.index}case"alwayslast":{if(s&&o.a.get(y.kTabsStackingOpenInCurrent)){return H.getGroup(s,e.windowId).last().index+1}const a=t.last();return a?a.index+1:l}default:return l}}(e,this.getPages(t),a)}getPages(e){return D.get(e)||Object(_.List)()}getMutablePagesInAllWindows(){let e=Object(_.List)();return D.forEach((t,a)=>{e=e.concat(t)}),e}getTabs(e,t,a=H.getPages(e)){return V(e,t,a)}getPageById(e){return this.getMutablePagesInAllWindows().find(t=>t.id===e)}getPageByReloadId(e){let t=void 0;return D.forEach((a,n)=>{t||(t=a.find(t=>t.getIn(["extData","ext_id"])===e))}),t}getPageHistory(e){return M.get(e)}unsafeGetActivePage(e=window.vivaldiWindowId,t=H.getPages(e)){return W(t)}getActivePage(e=window.vivaldiWindowId){return this.getPages(e).find(e=>e.active)}getLastVisited(e){const t=M.get(e);return t.get(t.count()-2)}isActivePage(e){return H.unsafeGetActivePage().get("id")===e}isUnread(e){return e.unread&&!e.discarded}getGroup(e,t,a=D.get(t)){return e?z(a,e):Object(_.List)()}isDisplayingImage(e){const t=H.getPageById(e);return!!t&&["image/jpeg","image/pjpeg","image/jpg","image/webp","image/png","image/gif","image/bmp","image/vnd.microsoft.icon","image/x-icon","image/x-xbitmap","image/x-png","image/svg+xml"].includes(t.get("mimeType"))}isGroup(e,t){return!!e&&G(D.get(t),e)}getGroupHighlightId(e,t){return K(this.getPages(t),t,e)}getTiles(e,t,a=this.getPages(t)){return Y(a,e)}isSelecting(e){return P.has(e)}getSelection(e){return x.get(e)}getSelectedPages(e){const t=x.get(e).reduce((t,a)=>{const n=this.getPages(e).find(e=>e.id===a);return n?[...t,n]:t},[]);return Object(_.List)(t).sortBy(e=>e.index)}getReloadingPages(){return this.getMutablePagesInAllWindows().filter(e=>e.getIn(["extData","interval"])>0)}getDiscardablePages(e){return this.getPages(e).filter(e=>!e.discarded&&!e.active&&!e.isInspected&&e.url!==H.getDefaultStartpage())}getNewGroupId(){return p()()}getTitleByGroupId(e,t){return(o.a.get(y.kTabsStackingNameMap)||{})[e]||t}getUnreadCount(e){let t=0;return this.getPages(e).forEach(e=>{H.isUnread(e)&&t++}),t}getHistoryManagerState(e){const t={},a=this.getPageById(e);if(a){const e=a.getIn(["extData","historyManagerState"]);e&&e.forEach((e,a)=>{t[a]=e})}return t}isLastPage(e){return $(this.getPages(e))}getStepInfo(e,t,a,n){const i=H.getTabs(n,!0),s=Object(r.c)(e);if(s&&!a){const a=i.flatMap((e,t)=>Object(r.c)(e.page)===s?[t]:[]),n=a.get(0),o=a.get(-1);let l;return l=t?e.index+1>o?o:e.index+1:e.index-1<n?n:e.index-1,{pages:_.List.of(e),index:l}}{const l=s&&a?H.getGroup(s,n):_.List.of(e);if(t){const t=s&&a?l.last().index:e.index;if(t===i.last().page.index)return;const o=i.get(t+1),c=Object(r.c)(null==o?void 0:o.page);let u;if(c){u=H.getGroup(c,n).last().index}else u=t+1;return{pages:l,index:u}}{var o;const t=s&&a?l.first().index:e.index;if(t===((null===(o=i.find(e=>!(null==e?void 0:e.page.pinned)))||void 0===o?void 0:o.page.index)||0))return;const c=i.get(t-1),u=Object(r.c)(null==c?void 0:c.page);let m;if(u){m=H.getGroup(u,n).first().index}else m=t-1;return{pages:l,index:m}}}}isActiveInternal(){const e=H.unsafeGetActivePage().get("url");return w.p.isInternalUrl(e)}isActiveExternal(){const e=H.unsafeGetActivePage().get("url");return!w.p.isInternalUrl(e)}getStartpage(){const e=u.a.getSync("BROWSER_COLOR_BG");return I+"&background-color="+e}getDefaultStartpage(){if(m.a.isGuestSession())return w.p.internals["guest-intro"];let e=o.a.get(y.kTabsNewPageLink);if(e===f.l.EXTENSION){var t;(null===(t=o.a.get(y.kExtensionURLOverrides).newtab)||void 0===t?void 0:t.some(e=>e.active))||(e=f.l.STARTPAGE)}switch(e){case f.l.EXTENSION:return f.a;case f.l.BLANKPAGE:return w.p.internals.blankpage;case f.l.HOMEPAGE:const e=o.a.get(y.kHomepage);return e===f.n?this.getStartpage():e;case f.l.CUSTOM:const t=o.a.get(y.kTabsNewPageCustomUrl);return Object(O.n)(t)||Object(O.j)(t)?w.p.getUrl(t):w.p.internals.blankpage;case f.l.STARTPAGE:default:return this.getStartpage()}}canUseForMenu(e,t){const a=H.getPages(e);return a.size===t.size&&!t.some((e,t)=>{const n=a.get(t);return e!==n&&(e.title!==n.title||e.url!==n.url)})}isUrlInAnyWindowPromise(e){return new Promise(t=>{d.a.windows.getAll({populate:!0},a=>{const n=a&&a.some(t=>t.tabs&&t.tabs.some(t=>t.url&&t.url===e||t.pendingUrl&&t.pendingUrl===e));t(n)})})}useDefaultIcon(e){if(!e.url)return!0;const t=e.url;return!e.favIconUrl&&!Object(w.h)(t)&&!Object(w.f)(t)}emitChange(e){H.emit(A,e)}addChangeListener(e){this.on(A,e)}removeChangeListener(e){this.removeListener(A,e)}};const V=N()(1)((e,t,a)=>t?a.map(e=>new B({page:e,id:e.id})):a.groupBy(e=>Object(r.c)(e)||e.id).map((t,n,i)=>t.count()>=2?new F({id:n,pages:t,page:a.find(t=>t.id===K(a,e,`${n}`))}):new B({page:t.first(),id:t.first().id})).toList()),W=N()(1)(e=>e.find(e=>e.active)||new r.b);const z=N()(10)((function(e,t){return t?e.filter(e=>Object(r.c)(e)===t):Object(_.List)()})),G=N()(10)((e,t)=>!("off"===o.a.get(y.kTabsStackingMode)||!t)&&e.filter(e=>Object(r.c)(e)===t).count()>1),K=N()(10)((e,t,a)=>{const n=z(e,a).map(e=>e.id);return M.get(t).reverse().find(e=>n.contains(e))||n.first()});const Y=N()(10)((function(e,t){return t?e.filter(e=>Object(r.d)(e)===t):Object(_.List)()}));const $=N()(1)(e=>e.filter(e=>!e.isRemoved).count()<2);const X=Object(E.a)(e=>d.a.tabs.query({windowId:e},e=>e.forEach(e=>{const t=H.getPageById(e.id?e.id:-1);if(t){let a;try{a=JSON.parse(e.extData||"{}")}catch(e){a={}}const n=Object(_.Map)(a);Object(_.is)(n,t.extData)||d.a.tabs.update(t.id,{extData:JSON.stringify(a)},()=>{d.a.runtime.lastError})}})),160);function Z(e,t){L=L.set(e,t)}function Q(e,t,a,n){const i=H.getPages(t);if(!i)return!1;const s=i.findIndex(t=>t.id===e);if(-1===s)return!1;const r=D;return D=D.setIn([t,s,a],n),r!==D}function q(e,t){const a=Q(t,e,"unread",!1),n=W(H.getPages(e)),i=n.id!==t&&Q(n.id,e,"active",!1),s=Q(t,e,"active",!0);return a||i||s}async function J(e,t,a=[]){if(!e)return;const i=Object(_.List)(e.map(e=>{e.favIconUrl||(e.favIconUrl=function(e){return!e.favIconUrl||e.favIconUrl.startsWith("file://")?"chrome://favicon/size/16@2x/"+(e.url||""):(e.favIconUrl&&w.p.isExtensionProtocol(e.favIconUrl)&&w.p.isOurExtension(e.favIconUrl),e.favIconUrl)}(e));let t=n.a.tabToPage(e);return t.hasIn(["extData","useDefaultIcon"])||(t=t.setIn(["extData","useDefaultIcon"],!1)),t.hasIn(["extData","ext_id"])||(t=t.setIn(["extData","ext_id"],p()())),t}));D=D.set(t,i),e.forEach(k.b),X(t),M=M.set(t,function(e,t){let a=Object(_.List)(t.reduce((t,a)=>{const n=e.find(e=>e.getIn(["extData","ext_id"])===a);return n&&t.push(n.id),t},[]));a=e.filter(e=>!a||!a.includes(e.id)).map(e=>e.id).concat(a);const n=e.find(e=>e.active);return n&&(a=Object(v.b)(a,n.id)),a}(D.get(t),a)),he(t),H.emitChange()}function ee(e,t){const a=D.get(t).filter(t=>t.id!==e).map((e,t)=>e.set("index",t));D=D.set(t,a);const n=M.get(t).filter(e=>a.some(t=>t.id===e));M=M.set(t,n),Object(T.b)(M.get(t),t),he(t)}function te(e,t,a){const i=D;D=D.set(t,n.a.updatePage(D.get(t),e,a)),i!==D&&H.emitChange()}function ae(e,t,a){const n=D.get(t).find(t=>t.id===e);n&&(he(t),function(e,t){const a=D.get(e.windowId).findIndex(t=>t.id===e.id);if(t===a&&e.index===t)return!1;const n=D.get(e.windowId).delete(a).splice(t,0,e).map((e,t)=>e.set("index",t));return D=D.set(e.windowId,n),!0}(n,a)&&H.emitChange())}async function ne(t,a=!1,i=0,s){j=j.delete(t),R=R.delete(t);let r=0;R.forEach(e=>{e.index<=i&&r++}),i-=r;let o=n.a.tabToPage(await new Promise(e=>d.a.tabs.get(t,e)));s&&(o=o.setIn(["extData","group"],s),X(o.windowId));const l=D.get(o.windowId).splice(i,0,o).map((e,t)=>e.set("index",t));D=D.set(o.windowId,l);const c=await new Promise(e=>d.a.tabs.get(t,e));Object(k.b)(c);const u={status:c.status,url:c.url,pinned:c.pinned,audible:c.audible,discarded:c.discarded,autoDiscardable:c.autoDiscardable,mutedInfo:c.mutedInfo,favIconUrl:c.favIconUrl,title:c.title,extData:c.extData};void 0!==c.id&&c.url&&await async function(t,a,n){await new Promise(t=>e.nextTick(t)),Q(t,a,"url",n),Q(t,a,"target",void 0),H.emitChange()}(c.id,c.windowId,c.url),te(t,c.windowId,u),he(o.windowId)}function ie(e,t=window.vivaldiWindowId,a=!0){q(t,e)&&(he(t,!1,a),d.a.tabs.update(e,{active:!0},()=>{d.a.runtime.lastError}),M=M.set(t,Object(v.b)(M.get(t),e)),Object(T.b)(M.get(t),t),H.emitChange())}let se=Object(_.Map)(),re=null;function oe(e,t){const a=o.a.get(y.kTabsActivationPreferRelated),n=o.a.get(y.kTabsActivationOnClose);let i;if(a){const a="left"!==n;if(i=function(e,t,a){let n;if(e.openerTabId){const i=()=>t.takeUntil(t=>t.id===e.id).filter(t=>t.openerTabId===e.openerTabId).reverse(),s=()=>t.slice(e.index+1).filter(t=>t.openerTabId===e.openerTabId);n=a?s().first()||i().first():i().first()||s().first(),n||(n=t.find(t=>t.id===e.openerTabId))}return n||(n=t.skipUntil(t=>t.id===e.id).skip(1).find(t=>t.openerTabId===e.id)),n}(e,D.get(t),a),i)return i}switch(n){case"left":const a=e.index-1;i=a<0?D.get(t).find(t=>t.id!==e.id):D.get(t).get(a);break;case"right":i=D.get(t).get(e.index+1),i||(i=D.get(t).reverse().find(t=>t.id!==e.id));break;case"activation_order":i=void 0;break;default:0,i=void 0}if(!i){const a=M.get(t).filter(e=>D.get(t).some(t=>t.id===e)).filter(t=>t!==e.id).last();i=D.get(t).find(e=>e.id===a)}return i===e&&(i=null),i}function le(e,t,a=!1){if(a&&H.isGroup(Object(r.c)(t),t.windowId)){const a=H.getGroup(Object(r.c)(t),t.windowId).map(e=>e.id);return e.union(a)}return e.add(t.id)}function ce(e,t,a=!1){return e.contains(t.id)?function(e,t,a=!1){if(a&&H.isGroup(Object(r.c)(t),t.windowId)){const a=H.getGroup(Object(r.c)(t),t.windowId).map(e=>e.id);return e.subtract(a)}return e.remove(t.id)}(e,t,a):le(e,t,a)}function ue(e,t){const a=e.toList().filter(e=>e!==t.id).map(e=>{const t=H.getPageById(e);return t?t.index:-1});if(!a.isEmpty()){const e=a.insert(0,t.index).toArray();d.a.tabs.highlight({tabs:e,windowId:window.vivaldiWindowId})}}let me=null,de=null;function he(e,t=!1,a=!0){P=P.remove(e),me=de=H.unsafeGetActivePage(e);const n=!t&&o.a.get(y.kTabsSelectionIncludeActive);x=n&&me?x.set(e,le(Object(_.Set)(),de,a)):x.set(e,Object(_.Set)())}function pe(e){he(e),H.emitChange()}function be(e,t,a=!0){const n=e.windowId,i=D.get(n);if(P.has(e.windowId)){const s=x.get(e.windowId).map(e=>{const t=i.find(t=>t.id===e);return t&&"number"==typeof t.index?t.index:-1}).filter(e=>e>-1).sort(),r="next"===t,o=r?s.last():s.first(),l=r?o+1:o-1;if(de&&me){const e=l<0||l>=i.size?i.get(o).id:i.get(l).id,t=x.get(n).size>1&&!(me.id<=de.id&&de.id<=e&&r||me.id>=de.id&&de.id>=e&&!r);if(!t&&(l<0||l>i.size))return;if(t){const e=i.get(r?s.first():s.last());e&&ge(e,!1,a)}else{const e=i.get(l);e&&ge(e,!1,a)}}}else{const s=H.isGroup(Object(r.c)(e),n);if(s&&o.a.get(y.kTabsSelectionIncludeActive))ge(e,!1,a);else if(s){const s=H.getGroup(Object(r.c)(e),n).map(e=>e.id),o="next"===t?s.last()+1:s.first()-1,l=i.find(e=>e.id===o);l&&ge(l,!1,a)}else{const n="next"===t?e.index+1:e.index-1;if(n>=0&&n<i.size){const e=i.get(n);e&&ge(e,!1,a)}}}}function ge(e,t,a,n=!1){P.has(e.windowId)||he(e.windowId,n,a),t?function(e,t){if(!me||!de)return;const a=de.index,n=me.index,i=e.windowId,s=D.get(i).filter(e=>e.index>=Math.min(n,a)&&e.index<=Math.max(n,a)).flatMap(e=>{const t=Object(r.c)(e);return H.isGroup(t,i)?H.getGroup(t,i):[e]}).map(e=>e.id),l=e.index,c=!o.a.get(y.kTabsSelectionIncludeActive),u=D.get(i).filter(e=>e.index>=Math.min(n,l)&&e.index<=Math.max(n,l)&&!(c&&e.active)).flatMap(e=>{const a=Object(r.c)(e);return t&&H.isGroup(a,i)?H.getGroup(a,i):[e]}).map(e=>e.id),m=x.get(i).subtract(s).union(u);x=x.set(i,m),de=e,ue(x.get(i),H.unsafeGetActivePage(i)),P=P.add(i),H.emitChange()}(e,a):function(e,t){de=e,P.has(e.windowId)||(me=e);const a=x.get(e.windowId);if(!P.has(e.windowId)&&e.active){const n=le(a,e,t);x=x.set(e.windowId,n)}else{const n=ce(a,e,t);x=x.set(e.windowId,n)}ue(x.get(e.windowId),H.unsafeGetActivePage(e.windowId)),P=P.add(e.windowId),H.emitChange()}(e,a)}const Ne=function(){let e,t;return function(a,n,i=!1){Object(b.a)(n)?(e?e=Object(v.a)(M.get(a),e):(e=M.get(a),t=M.get(a).last()),e=Object(v.d)(e,!1===i),ie(e.last()),Object(S.f)(n,()=>{const n=t,i=e&&e.last();if(n&&i){let e=M.get(a);e=e.filter(e=>e!==n&&e!==i).push(n),M=M.set(a,e),n!==i&&(e=M.get(a).push(i),M=M.set(a,e))}Object(T.b)(M.get(a),a),e=t=null})):(M=M.set(a,Object(v.d)(M.get(a),!1===i)),Object(T.b)(M.get(a),a),ie(M.get(a).last()))}}(),fe=function(){let e,t;return function(a,n,i=!1){const s=H.getPages(a),r=s.findIndex(e=>e.active);e?e=Object(v.a)(M.get(a),e):(e=M.get(a),t=s.getIn([r,"id"]));const o=((r+(i?-1:1))%s.size+s.size)%s.size,l=s.getIn([o,"id"]);l&&ie(l,a),Object(S.f)(n,()=>{const n=t,i=s.getIn([o,"id"]);if(e&&n&&i){const t=Object(v.a)(M.get(a),e.filter(e=>e!==n&&e!==i).push(n).push(i));M=M.set(a,t)}Object(T.b)(M.get(a),a),e=t=null})}}();H.dispatchToken=c.a.register(e=>{switch(e.actionType){case"PAGE_CLEAR":D=D.set(window.vivaldiWindowId,Object(_.List)()),M=M.set(window.vivaldiWindowId,Object(_.List)()),P=P.remove(window.vivaldiWindowId),x=x.set(window.vivaldiWindowId,Object(_.Set)()),L=Object(_.Map)();break;case"PAGE_CLOSE":!function(e){let t=!1;e.forEach(e=>{const a=Q(e.id,e.windowId,"isClosing",!0);t=t||a}),t&&H.emitChange()}(e.pages);break;case"CHROME_TABS_INIT":c.a.waitFor([l.a.dispatchToken]),J(e.tabs,e.windowId,e.historystack);break;case"CHROME_TABS_CREATE":c.a.waitFor([l.a.dispatchToken]),function(e){const{page:t,tabActivationHistory:a,deactivatePageId:n}=e,i=t.windowId;if(!m.a.getState().get(i))return;let s=D.get(i)?D.get(i):Object(_.List)();s=s.splice(t.index,0,t).map((e,t)=>(e.id===n&&(e=e.set("active",!1)),e.set("index",t))),D=D.set(i,s),M=M.set(t.windowId,a),he(t.windowId),H.emitChange({type:"created",id:t.id})}(e);break;case"NAVIGATION_SET_STATE":{const{pageId:t,windowId:a,navigationState:n}=e;if("stop"!==n.trigger&&"abort"!==n.trigger)break;const i=D.get(a).findIndex(e=>e.id===t);if(-1===i)break;const{target:s}=D.get(a).get(i);if(!s)break;const r=D.get(a).setIn([i,"url"],s.committedUrl).setIn([i,"target"],void 0);D=D.set(a,r),H.emitChange();break}case"CHROME_TABS_REMOVED":{const{tabId:t,removeInfo:a}=e;!function(e,t){m.a.getState().get(t)&&(ee(e,t),H.emitChange({type:"removed",tabId:e}))}(t,a.windowId);break}case"CHROME_TABS_UPDATED":c.a.waitFor([l.a.dispatchToken]),te(e.tabId,e.windowId,e.changeInfo);break;case"CHROME_TABS_MOVED":{const{tabId:t,windowId:a,index:n}=e;ae(t,a,n);break}case"CHROME_TABS_ACTIVATED":{const{activeInfo:t}=e;!function(e){const t=q(e.windowId,e.tabId);let a=M.get(e.windowId);const n=a.last();(t||n!==e.tabId)&&(a=Object(v.b)(a,e.tabId),M=M.set(e.windowId,a),Object(T.b)(M.get(e.windowId),e.windowId),he(e.windowId),H.emitChange())}(t);break}case"CHROME_TABS_DETACHED":{const{tabId:t,detachInfo:a}=e;!function(e,t){const a=D.get(t.oldWindowId).find(t=>t.id===e);if(a){if(Object(k.a)(e,a.url),ee(e,t.oldWindowId),he(a.windowId),a.active){const e=oe(a,t.oldWindowId);e&&ie(e.id)}H.emitChange()}}(t,a);break}case"CHROME_TABS_ATTACHED":{const{tabId:t,attachInfo:a}=e;!async function(e,t){const a=j.get(e);if(t.discarded)await ne(e,!0,t.newPosition);else if(void 0!==a)a!==window.vivaldiWindowId&&await ne(e,!1,t.newPosition);else{var n;const a=(null===(n=R.get(e))||void 0===n?void 0:n.groupId)||"";R=R.set(e,{windowId:t.newWindowId,index:t.newPosition,groupId:a})}}(t,a);break}case"PAGE_OPEN_URL":!function(e,t,a,n,i="",s=""){const o=D.get(t).findIndex(t=>t.id===e);if(-1===o)return!1;const l=new r.a({committedUrl:D.get(t).get(o).url,post:n,headers:i,transition:s}),c=D.get(t).setIn([o,"target"],l).setIn([o,"url"],a).setIn([o,"mimeType"],"text/html");D=D.set(t,c),H.emitChange()}(e.pageId,e.windowId,e.url,e.post,e.headers,e.transition);break;case"PAGE_OPEN":ie(e.pageId,e.windowId,e.selectGroup);break;case"PAGE_MINIMIZE":!function(e){se.get(e)&&Object(_.is)(re,M.get(e))||(se=se.set(e,M.get(e)));let t=se.get(e);t=Object(v.d)(t,!0),ie(t.last()),se=se.set(e,t),re=M.get(e)}(e.windowId);break;case"PAGE_SET_IS_INSPECTED":a=e.pageId,n=e.windowId,i=e.inspected,Q(a,n,"isInspected",i);break;case"PAGE_SET_IS_RESTORED":Z(e.extId,e.restored);break;case"PAGE_TABSTACK_CREATE":pe(e.pages.first().windowId);break;case"PAGE_SET_ORIGIN":!function(e,t,a){Q(e,t,"originUrl",a)&&H.emitChange()}(e.pageId,e.windowId,e.url);break;case"PAGE_SET_PROCESSEXITSTATE":!function(e,t,a){Q(e,t,"processexitstate",a)&&H.emitChange()}(e.pageId,e.windowId,e.processexitstate);break;case"PAGE_SET_TITLE":!function(e,t,a){Q(e,t,"title",a)&&H.emitChange()}(e.pageId,e.windowId,e.title);break;case"PAGE_SET_IMAGE_INSPECTOR":!function(e,t,a){Q(e,t,"showImageInspector",a)&&H.emitChange()}(e.pageId,e.windowId,e.showImageInspector);break;case"READERMODE":!function(e,t,a){Q(e,t,"supportsReaderMode",a)&&H.emitChange()}(e.pageId,e.windowId,e.supportsReaderMode);break;case"VIVALDI_TABS_ATTACHED":t=e.tabId,e.fromWindowId,j=j.delete(t);break;case"VIVALDI_TABS_DETACHED":!async function(e,t){if(t===window.vivaldiWindowId){if(void 0===R.get(e))return}const a=R.get(e);void 0!==a&&a.windowId===window.vivaldiWindowId?await ne(e,!1,a.index,a.groupId):j=j.set(e,t)}(e.tabId,e.toWindowId);break;case"VIVALDI_TABS_UPDATED":!function(e,t,a){const n=D;if(a.hasOwnProperty("mimeType")&&Q(e,t,"mimeType",a.mimeType),a.hasOwnProperty("showImages")){let n;n=!0===a.loadFromCacheOnly?"cache":!0===a.showImages?"always":"never",Q(e,t,"imageLoading",n)}n!==D&&H.emitChange()}(e.pageId,e.windowId,e.tabInfo);break;case"PAGE_SELECTION_SET":ge(e.page,e.multiSelect,e.addGroup,e.excludeActive);break;case"PAGE_SELECTION_TOGGLE_RELATED":!function(e){if(P.has(e.windowId)||he(e.windowId),de=e,H.isGroup(Object(r.c)(e),e.windowId)){const t=x.get(e.windowId);x=x.set(e.windowId,le(t,e,!0))}else{const t=H.getTabs(e.windowId),[,a]=Object(C.a)(e,t);x=x.set(e.windowId,a.reduce((e,t)=>e.add(t.id),x.get(e.windowId))),P=P.add(e.windowId)}H.emitChange()}(e.page);break;case"PAGE_SELECTION_EXPAND_PREVIOUS":be(e.page,"previous");break;case"PAGE_SELECTION_EXPAND_NEXT":be(e.page,"next");break;case"PAGE_SELECTION_CLEAR":pe(e.windowId);break;case"PAGE_CYCLE_BY_HISTORY":Ne(e.windowId,e.maybeEvent,e.goBack);break;case"PAGE_CYCLE_BY_ORDER":fe(e.windowId,e.maybeEvent,e.goBack);break;case"PAGE_SET_ORIGINAL_CONTENT_TYPE":Q(e.pageId,e.windowId,"originalContentType",e.contentType),H.emitChange()}var t,a,n,i}),t.c=H;const{unsafeGetActivePage:_e,getLastVisited:ve}=H}).call(this,a(82))},function(e,t,a){"use strict";var n=a(617),i=a(397),s=a(85),r=a(12);var o=a(189),l=a(13),c=a(262),u=a(11),m=a(6),d=a(157),h=a(435),p=a(16),b=(a(35),a(95)),g=a(158),N=a(17),f=a(489),_=a(10),v=a(976),E=a(125),C=a.n(E),w=a(484),O=a(84),y=a(7),S=a(37),T=a(121);async function k(e,t){const a=await Object(T.e)(e);if(!a)return;let n;try{n=JSON.parse(a.extData||"{}")}catch(e){n={}}const i={...n,...t};let s=!1;const r=Object.entries(i).reduce((e,[t,a])=>void 0===a&&void 0!==n[t]?(s=!0,e):{...e,[t]:a},{}),o=JSON.stringify(r);o===a.extData||!s&&"{}"===o||await Object(T.l)(e,{extData:o})}var A=a(23),I=a(26),D=a(53),M=a(46),P=a(1),x=a(137),L=a(361);a.d(t,"b",(function(){return J}));let j=Object(I.Map)(),R=0;const B={bookmarkId:"",inBackground:!1,inCurrent:!1,inSpecificPageId:void 0,incognito:!1,transition:d.a.AUTO_TOPLEVEL,index:void 0,post:!1,singleton:!1,skipParams:!1,groupId:void 0};async function F(e="",t=B){const a=Object(A.e)(e);let i=a&&"_blank"!==a?a:l.c.getDefaultStartpage();if(N.a.isGuestSession()&&Object(A.g)(i))return Promise.reject("Illegal URL for Guest mode!");if(i===A.a.welcome&&y.a.utilities.setSharedData({key:"has_shown_welcome_page",value:!0}),t.inNewWindow)return void ce(i,{incognito:t.incognito,transition:t.transition});const s=t.inSpecificPageId&&l.c.getPageById(t.inSpecificPageId)||l.c.unsafeGetActivePage();let o,u="";t.post&&([i,o]=function(e){const t=Object(O.parse)(e,!1);return[t.href.replace(t.search||"","")||"",t.query||""]}(i),u="Content-Type: application/x-www-form-urlencoded\r\n\r\n");const d=Object(A.k)(i),h=l.c.getPages(window.vivaldiWindowId).find(e=>Object(M.i)(i,e.url,!!t.skipParams));if(t.singleton&&Object(A.h)(i)&&h)return d&&r.a.dispatch({actionType:"PAGE_OPEN_URL",pageId:h.id,windowId:h.windowId,url:i}),void r.a.dispatch({actionType:"PAGE_OPEN",windowId:h.windowId,pageId:h.id});if((t.inCurrent||t.inSpecificPageId)&&s.windowId&&!N.a.isPopup()){t.bookmarkId&&n.a.add(s.id,t.bookmarkId,i);const e=s.getIn(["extData","ext_id"]);return c.a.destroyPeriodicAlarm(e),void r.a.dispatch({actionType:"PAGE_OPEN_URL",pageId:s.id,windowId:s.windowId,url:i,post:o,headers:u,transition:t.transition})}const p=t.windowId?t.windowId:N.a.getLastActiveBrowserWindowId(),g={url:t.post?"about:blank":Object(v.a)(i),windowId:p,index:t.index,active:!t.inBackground,transition:t.transition,openerTabId:t.addOpenerTabId&&s?s.id:void 0};t.groupId&&(g.extData=JSON.stringify({group:t.groupId}));const f=(await Object(T.a)(g)).id;m.a.get(P.kTabsFocusWebview)&&b.a.doAction("focusWebView"),void 0!==f&&t.bookmarkId&&n.a.add(f,t.bookmarkId,i),t.post&&void 0!==f&&r.a.dispatch({actionType:"PAGE_OPEN_URL",pageId:f,windowId:p,url:i,post:o,headers:u,transition:t.transition}),t.inBackground||await function(e,t){return new Promise(a=>{_.a.windows.update(e,t,a)})}(p,{focused:!0})}function U(e,t,a){const n=a.windowId;N.a.getState().get(n)&&("complete"===t.status&&(t.title=a.title),r.a.dispatch({actionType:"CHROME_TABS_UPDATED",tabId:e,windowId:a.windowId,changeInfo:t}))}function H(e,t){const a=l.c.unsafeGetActivePage();s.a.handleShortcut(a?a.url:"",e,t,N.a.isSettings())}function V(e,t,a){(class{static setMediaState(e,t){r.a.dispatch({actionType:"PAGE_SET_MEDIASTATE",tabId:e,mediastate:t})}}).setMediaState(e,a)}function W(e,t){let a=t.adoptedLanguage;"und"===a&&(a=t.cldLanguage,"und"===a&&(a="")),h.a.setDeterminedLanguage(e,a)}function z(e,t,a,n){h.a.setPageTranslated(e,{isTranslated:!0,originalLang:t,translatedLang:a,error:n})}function G(e,t){!1===t&&h.a.revertTranslation(e)}function K(e,t,a,n){let i="undecided";switch(n){case"allow":i="allowed";break;case"block":i="blocked";break;case"ask":case"default":default:i="undecided"}let s=null;try{s=new URL(a)}catch(e){return}o.a.setPermission(e,s.origin,t,null,i)}function Y(e,t){e===N.a.getId()&&(t?b.a.back():b.a.forward())}function $(e,t,a){r.a.dispatch({actionType:"VIVALDI_TABS_ATTACHED",tabId:e,fromWindowId:t}),V(e,window.vivaldiWindowId,a)}function X(e,t){r.a.dispatch({actionType:"VIVALDI_TABS_DETACHED",tabId:e,toWindowId:t})}function Z(e,t,a){r.a.dispatch({actionType:"VIVALDI_TABS_UPDATED",pageId:e,windowId:t,tabInfo:a})}function Q(e,t){if(e!==N.a.getId())return;t!==l.c.unsafeGetActivePage().id&&ue(t,e)}function q(e,t){const a={actionType:"CHROME_TABS_REMOVED",tabId:e,removeInfo:t};r.a.dispatch(a)}async function J(e,t){if(0===e.count())return;const a=e.reduce((e,t)=>{const a=l.c.getPageById(t);return a&&e.push(a.getIn(["extData","ext_id"])),e},[]);await Object(f.a)(t,{historystack:a})}let ee;async function te(e){var t;const a=e.windowId,n=l.c.getPages(a)?l.c.getActivePage(a):void 0,i={ext_id:C()()},s=l.c.getPageHistory(a)?l.c.getPageHistory(a):Object(I.List)(),o=e.active?Object(L.b)(s,e.id):Object(L.c)(s,e.id);if(ee){const{index:t}=await Object(T.e)(e.id);e=e.set("index",t),ee=void 0}else{let t=l.c.findRepositionedIndex(e,a,n);if(t!==e.index){const a=await Object(T.f)([e.id],{index:t});t=Array.isArray(a)?a[0].index:a.index,e=e.set("index",t)}}const c=e.openerTabId,u=m.a.get(P.kTabsNewPlacement),d="number"==typeof c&&l.c.getPageById(c);if(d){const t="openintabstackwithrelated"===u&&!Object(A.h)(d.url)&&!d.pinned?await fe(Object(I.List)([d,e])):Object(D.c)(d),n=m.a.get(P.kTabsStackingOpenInCurrent);if(t&&n){const e=l.c.getGroup(t,d.windowId).size>1;e&&(i.group=t);const n=d.getIn(["extData","tiling"]);e&&n&&l.c.getTiles(n.get("id"),a).size>1&&(i.tiling=n)}}r.a.dispatch({actionType:"CHROME_TABS_CREATE",page:e.mergeIn(["extData"],i),tabActivationHistory:o,deactivatePageId:e.active?null==n?void 0:n.id:void 0}),await k(e.id,i);const h="number"==typeof e.openerTabId?null===(t=l.c.getActivePage())||void 0===t?void 0:t.imageLoading:m.a.get(P.kPageImageLoading);h&&await new Promise(t=>{y.a.tabsPrivate.update(e.id,{showImages:"never"!==h,loadFromCacheOnly:"cache"===h},t)}),await J(o,a),await new Promise(t=>{a&&_.a.windows.update(e.windowId,{focused:!0,drawAttention:!0},t)})}function ae(e){e.windowId===window.vivaldiWindowId&&r.a.dispatch({actionType:"CHROME_TABS_ACTIVATED",activeInfo:e})}function ne(e,t){t.newWindowId===window.vivaldiWindowId&&r.a.dispatch({actionType:"CHROME_TABS_ATTACHED",tabId:e,attachInfo:t})}function ie(e,t){t.oldWindowId===window.vivaldiWindowId&&r.a.dispatch({actionType:"CHROME_TABS_DETACHED",tabId:e,detachInfo:t})}function se(e,t){const a=t.windowId;a===window.vivaldiWindowId&&r.a.dispatch({actionType:"CHROME_TABS_MOVED",tabId:e,windowId:a,index:t.toIndex})}let re=!1,oe=null;async function le(e,t,a){var n;r.a.dispatch({actionType:p.a.UNLOAD_DIALOG_CLOSED,tabId:t,proceed:a,windowId:e}),re=!1,!a&&(null===(n=oe)||void 0===n?void 0:n.id)&&(await Object(T.j)(oe.id),oe=null)}async function ce(e,t={},a="normal"){const n=t.hasOwnProperty("left"),i=m.a.get(P.kWindowsSizeCache);N.a.isPopup()||N.a.isSettings()||(i.width=window.innerWidth,i.height=window.innerHeight,u.a.set(P.kWindowsSizeCache,i));const s=await new Promise(e=>y.a.zoom.getVivaldiUIZoom(e)),r=N.a.isMaximized()&&!n?{state:"maximized"}:{width:Math.round(i.width*s),height:Math.round(i.height*s)};"string"==typeof e&&(e=Object(A.e)(e));const o={url:e,incognito:!1,transition:d.a.AUTO_TOPLEVEL,...r,...t},c={ext_id:C()(),windowType:a,...t.extData?JSON.parse(t.extData):null};if(o.extData=JSON.stringify(c),void 0===o.url){const e=m.a.get(P.kIncognitoShowIntro);o.url=o.incognito&&e?A.a["private-intro"]:l.c.getDefaultStartpage()}return new Promise(e=>_.a.windows.create(o,e))}function ue(e,t,a=!0){r.a.dispatch({actionType:"PAGE_OPEN",pageId:e,windowId:t,selectGroup:a})}function me(e){r.a.dispatch({actionType:"PAGE_MINIMIZE",windowId:e})}async function de(){return!re&&(!(!N.a.isPopup()&&!N.a.isSettings())&&(re=!0,await g.a.close(N.a.getId()),re=!1,!0))}async function he(e){if(re)return;const t=e instanceof I.List?e:I.List.of(e);if(0===t.size)return;re=!0;const a=t.first().windowId,n=function(e,t){const a=l.c.getPages(t),{canClosePage:n}=l.c;if(1===a.size&&!n(a.first()))return Object(I.List)([]);const i=m.a.get(P.kTabsClosePinned);return"off"===i||"bury"===i?e.filter(e=>!e.pinned):e}(t,a);r.a.dispatch({actionType:"PAGE_CLOSE",pages:n});const i=t.find(e=>e.pinned&&e.active),s=m.a.get(P.kTabsClosePinned);i&&"bury"===s&&me(a),await Promise.all(n.map(e=>{const t=e.getIn(["extData","ext_id"]);return c.a.destroyPeriodicAlarm(t)}));const o=m.a.get(P.kTabsNeverCloseLast),u=n.count()===l.c.getPages(a).count();o&&u&&!oe&&(oe=await Object(T.a)({url:N.a.isGuestSession(a)?S.p:Object(v.a)(l.c.getDefaultStartpage()),active:!1,transition:d.a.AUTO_TOPLEVEL,windowId:a}));const h=n.map(e=>e.id).toJS();!oe&&await async function(e,t){const a=e.some(e=>e.pinned),n=m.a.get(P.kTabsClosePinned),i=e.some(e=>e.active);if("bury"===n&&a){const e=l.c.getPageHistory(t).get(-2);return void 0!==e&&await Object(T.l)(e,{active:!0})}if(1===e.size&&i){var s;const a=null===(s=l.c.findPageToActivateAfterClosingPage(e.first(),t))||void 0===s?void 0:s.id;return void 0!==a&&await Object(T.l)(a,{active:!0})}}(n,a);try{await Object(T.j)(h)}catch(e){console.warn(e)}oe=null,re=!1,await async function(e,t){await new Promise(a=>{let n=!1;function i(){a(),l.c.removeChangeListener(s),n=!0}function s(t){t&&"removed"===t.type&&t.id===e&&!n&&i()}setTimeout(()=>{!n&&i()},t),l.c.addChangeListener(s)})}(h[0],100),oe&&void 0!==oe.id&&(await Object(T.l)(oe.id,{active:!0}),oe=null)}async function pe(e,t,a){if(0!==R)return;let n=I.List.of(l.c.unsafeGetActivePage());const i=N.a.getActiveBrowserOrPopupWindowId();"other"===e?n=l.c.getPages(i).filter(e=>e.id!==l.c.unsafeGetActivePage().id):"all"===e?n=l.c.getPages(i):a&&"selection"===e&&(n=a),await Promise.all(n.map(async e=>{R++;try{await y.a.tabsPrivate.update(e.id,{muteTab:"mute"===t})}finally{R--}}))}async function be(e,t){const a=window.vivaldiWindowId;if(e instanceof I.List){const n=e;let i=n.some(e=>e.index<t)?t+1:t;return Promise.all(n.map(async(e,t)=>(0===t?i>e.index&&i--:t>0&&i<e.index&&i++,Object(T.f)(e.id,{index:i,windowId:a}))))}const n=e;return Object(T.f)(n.id,{windowId:a,index:t})}async function ge(e,t){const a=await Object(T.f)(e.map(e=>e.id).toJS(),{windowId:t,index:-1});await new Promise(e=>{_.a.windows.update(t,{focused:!0},e)});const n=e.find(e=>e.active);return n&&await Object(T.l)(n.id,{active:!0}),a}async function Ne(e,t,a,n){const i=l.c.getStepInfo(e,t,a,n);if(!i)return;const{pages:s,index:r}=i;await Se.moveDroppedTabs(s,e.id,r,void 0,n)}async function fe(e,t,a){if(e.some(e=>e.pinned))return console.warn("Can't group pinned pages."),"";"number"==typeof t&&await Object(T.f)(e.map(e=>e.id).toArray(),{windowId:window.vivaldiWindowId,index:t});const n=e.find(D.c),i=n?Object(D.c)(n):"",s=a||i||C()();return await Promise.all(e.map(async({id:e})=>{await k(e,{group:s})})),r.a.dispatch({actionType:"PAGE_TABSTACK_CREATE",pages:e}),s}async function _e(e){const t=e instanceof I.List?e:I.List.of(e);r.a.dispatch({actionType:"PAGE_TABSTACK_REMOVE_FROM",pages:t}),await Promise.all(t.map(e=>k(e.id,{group:"",tiling:""})));const a=t.first().windowId,n=l.c.getPages(a).last().index+1;await Se.moveToIndex(t,n)}async function ve(e,t){await Promise.all(e.map(e=>Object(T.l)(e.id,{pinned:t})))}async function Ee(e,t=l.c.unsafeGetActivePage()){if(!t)return;let a,n;"always"===e?(a=!0,n=!1):"cache"===e?(a=!0,n=!0):"never"===e&&(a=!1,n=!1),await y.a.tabsPrivate.update(t.get("id"),{showImages:a,loadFromCacheOnly:n,enablePlugins:a})}async function Ce(e,t,a="selection"){const n=t||(e.count()<4?"row":"grid"),i=C()();await Promise.all(e.map(e=>k(e.id,{tiling:{layout:n,type:a,id:i}}))),r.a.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,id:i})}function we(e,t){const a=l.c.getTiles(e,t);a&&Oe(a)}async function Oe(e){await Promise.all(e.map(e=>k(e.id,{tiling:""}))),r.a.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,id:""})}function ye(e){r.a.dispatch({actionType:"PAGE_SELECTION_CLEAR",windowId:e})}const Se={clear:function(){r.a.dispatch({actionType:"PAGE_CLEAR"})},clearSelection:ye,clonePages:async function(e){return ee=new Promise(t=>{e.sort((e,t)=>e.index-t.index).filter(e=>!Object(A.l)(e)).map((e,t)=>async()=>{const a=e.index,n=await Object(T.c)(e.id);if(!n)return-1;const s=n.id;if(!s)return-1;"alwayslast"===m.a.get(P.kTabsActivationOnClone)&&await Object(T.f)(s,{index:-1}),"rightofcurrent"===m.a.get(P.kTabsActivationOnClone)&&await Object(T.f)(s,{index:a+1+t});const r=Object(D.c)(e);if(r&&l.c.getGroup(r,e.windowId).size>1){const t=i.a.tabToPage(n);await fe(Object(I.List)([e,t])),t.setIn(["extData","group"],r)}return s}).reduce(async(e,t)=>[...await e,await t()],Promise.resolve([])).then(t)}),ee},close:async function(){const e=N.a.getActiveBrowserOrPopupWindowId();if(l.c.isSelecting(e)){const t=l.c.getSelectedPages(e);await he(t)}else if(!await de()){const t=l.c.getActivePage(e);t&&await he(I.List.of(t))}},closeOther:function(e,t){const a=e instanceof I.List?e:I.List.of(e);let n;n=t?a.flatMap(e=>l.c.isGroup(Object(D.c)(e),e.windowId)?l.c.getGroup(Object(D.c)(e),e.windowId):I.List.of(e)):a;const i=n.first().windowId;he(l.c.getPages(i).filterNot(e=>n.some(t=>t.id===e.id)))},closePage:he,closeTabStack:async function(e){const t=l.c.getPageById(e);if(!t)return;const a=Object(D.c)(t);he(l.c.getGroup(a,t.windowId))},closeToLeft:async function(e,t=!1){const a=N.a.getActiveBrowserOrPopupWindowId(),n=Object(D.c)(e);let i;if(i=t?l.c.getPages(a).skipUntil(e=>Object(D.c)(e)===n).takeUntil(t=>t.id===e.id):l.c.isGroup(Object(D.c)(e),e.windowId)?l.c.getPages(a).takeUntil(t=>t.id===e.id).filter(e=>Object(D.c)(e)!==n):l.c.getPages(a).takeUntil(t=>t.id===e.id),!i.isEmpty())return he(i)},closeToRight:async function(e,t=!1){const a=N.a.getActiveBrowserOrPopupWindowId();let n=l.c.getPages(a).skipUntil(t=>t.id===e.id).skip(1);const i=Object(D.c)(e);if(t?n=n.takeUntil(e=>Object(D.c)(e)!==i):l.c.isGroup(Object(D.c)(e),e.windowId)&&(n=n.filter(e=>Object(D.c)(e)!==i)),!n.isEmpty())return he(n)},closeUrl:function(e){const t=N.a.getActiveBrowserOrPopupWindowId();he(l.c.getPages(t).filter(t=>Object(M.i)(e,t.url)))},closePopupOrSettingsWindow:de,createTabStack:fe,changePeriodicReloadForPages:async function(e,t){await Promise.all(e.map(e=>k(e,{interval:t})))},cycleByHistory:function(e,t,a={goBack:!1}){r.a.dispatch({actionType:"PAGE_CYCLE_BY_HISTORY",windowId:e,maybeEvent:t,goBack:a.goBack})},cycleByOrder:function(e,t,a={goBack:!1}){r.a.dispatch({actionType:"PAGE_CYCLE_BY_ORDER",windowId:e,maybeEvent:t,goBack:a.goBack})},detachPage:async function(e,t,a){const n=e instanceof I.List?e:I.List.of(e);1===n.size&&await _e(n);const i=n.first(),s=n.rest(),r=await ce([],{tabId:i.id,left:t,top:a,extData:JSON.stringify({isDropped:!0})});(null==r?void 0:r.id)&&s.count()&&await ge(s,r.id)},discardPage:function(e){e.isInspected||Object(T.b)(e.id)},exitPictureInPicture:function(e){Object(T.d)({target:{tabId:e},function:()=>{document.pictureInPictureElement&&document.exitPictureInPicture()}}).catch(e=>{})},expandSelectionNext:function(e,t=!0){r.a.dispatch({actionType:"PAGE_SELECTION_EXPAND_NEXT",page:e,addGroup:t})},expandSelectionPrevious:function(e,t=!0){r.a.dispatch({actionType:"PAGE_SELECTION_EXPAND_PREVIOUS",page:e,addGroup:t})},expandTabStack:async function(e){const t=N.a.getActiveBrowserOrPopupWindowId(),a=l.c.getPages(t).filter(t=>Object(D.c)(t)===e);await Promise.all(a.map(e=>k(e.id,{group:"",tiling:""})))},loadPromise:async function(){var e;T.g.addListener(te),_.a.tabs.onUpdated.addListener(U),_.a.tabs.onRemoved.addListener(q),_.a.tabs.onDetached.addListener(ie),_.a.tabs.onMoved.addListener(se),_.a.tabs.onActivated.addListener(ae),_.a.tabs.onDetached.addListener(ie),_.a.tabs.onAttached.addListener(ne),function(){const{tabsPrivate:e}=y.a;e.onKeyboardShortcut.addListener(H),e.onMediaStateChanged.addListener(V),e.onPermissionAccessed.addListener(K),e.onRockerGesture.addListener(Y),e.onTabIsAttached.addListener($),e.onTabIsDetached.addListener(X),e.onTabUpdated.addListener(Z),e.onBeforeUnloadDialogClosed.addListener(le),e.onLanguageDetermined.addListener(W),e.onPageTranslated.addListener(z),e.onIsPageTranslatedChanged.addListener(G)}(),function(){const{windowPrivate:e}=y.a;e.onBeforeUnloadDialogOpened.addListener(Q)}(),m.a.addListener(P.kTabsSelectionIncludeActive,ye);const t=window.vivaldiWindowId,a=await async function(e,t){return new Promise(a=>{_.a.windows.get(e,t,a)})}(t,{populate:!0}),n=a.tabs||[],i=a.extData&&(null===(e=function(e){try{return JSON.parse(e)}catch(e){0}}(a.extData))||void 0===e?void 0:e.historystack)||[];if(r.a.dispatch({actionType:"CHROME_TABS_INIT",tabs:n,windowId:t,historystack:i}),!N.a.isSettings()&&!N.a.isPopup()&&!N.a.isIncognitoOrGuest()){const e=await l.c.isUrlInAnyWindowPromise(A.a.welcome);s=e,y.a.utilities.canShowWhatsNewPage(e=>{e.show&&y.a.utilities.getVersion().then(({vivaldiVersion:e})=>{F("https://vivaldi.com/newfeatures?hl="+Object(w.a)()+"&version="+e+"&os=W",{inCurrent:!1,inBackground:s})})})}var s},minimizePage:me,moveDroppedTabs:async function(e,t,a,n,i){void 0!==n&&await Promise.all(e.map(e=>k(e.id,{group:n}))),await be(e,a),(t?e.find(e=>e.id===parseInt(t)):e.first())&&ue(t,i),await new Promise(e=>setTimeout(e,100)),ve(e.filter(e=>e.pinned),!0)},moveToIndex:be,moveToWindow:ge,muteAllExcept:function(e){const t=N.a.getActiveBrowserOrPopupWindowId();pe("selection","mute",l.c.getPages(t).filter(t=>-1===e.findIndex(e=>e.id===t.id)))},newTab:async function(e,t,a){const n=Object(A.e)(t),i=n&&"_blank"!==n?n:l.c.getDefaultStartpage(),s={url:i,windowId:e,index:a,active:!0},o=await Object(T.a)(s);if(void 0!==(null==o?void 0:o.id)){const t=o.id;return r.a.dispatch({actionType:"PAGE_OPEN_URL",pageId:t,windowId:e,url:i,post:void 0}),t}throw new Error("Failed to create tab")},openIncognitoWindow:function(e){ce(e,{incognito:!0})},openLastPage:function(){const e=N.a.getActiveBrowserOrPopupWindowId(),t="off"===m.a.get(P.kTabsStackingMode),a=l.c.getTabs(e,t).last();a&&ue(a.page.id,e)},activateTab:ue,activateTabByIndex:function(e){const t=N.a.getActiveBrowserOrPopupWindowId(),a="off"===m.a.get(P.kTabsStackingMode),n=l.c.getTabs(t,a).get(e);if(!n)return;if(!Boolean(n.pages)||!n.page.active)return void ue(n.page.id,n.page.windowId);if(n.pages.last()===n.page)return void ue(n.pages.first().id,t);const i=n.pages.findIndex(e=>e.active)+1;ue(n.pages.get(i).id,t)},openURL:F,openUrls:async function(e,t){t.inNewWindow?await Se.openWindow(e,{incognito:t.incognito}):await Promise.all(e.map((a,n)=>t.inCurrent?Se.openURL(a,{...t,inCurrent:0===n,inBackground:0!==n}):Se.openURL(a,{...t,inBackground:t.inBackground||a!==Object(x.default)(e)})))},openWindow:ce,openWindowNew:async function(e=l.c.getDefaultStartpage(),t,a="normal"){"string"==typeof e&&(e=Object(A.e)(e)),"string"==typeof t.tabUrl&&(t.tabUrl=Object(A.e)(t.tabUrl));const n=m.a.get(P.kWindowsSizeCache);"normal"!==a||(n.width=window.innerWidth,n.height=window.innerHeight,u.a.set(P.kWindowsSizeCache,n));const i=await new Promise(e=>y.a.zoom.getVivaldiUIZoom(e)),s={width:Math.round(n.width*i),height:Math.round(n.height*i),minWidth:500,minHeight:300,...t.bounds?t.bounds:null},r={incognito:!1,focused:!0,...t};r.bounds=s;const o={ext_id:C()(),windowType:a,...t.extData?JSON.parse(t.extData):null};return r.extData=JSON.stringify(o),new Promise(t=>{y.a.windowPrivate.create(e,r,a,e=>{let a=void 0;if(-1!==e){const t=_.a.extension.getViews({windowId:e});t&&t.length>0&&(a=t[0])}t({windowId:e,contentWindow:a})})})},setOriginalContentType:function(e,t,a){r.a.dispatch({actionType:"PAGE_SET_ORIGINAL_CONTENT_TYPE",pageId:e,windowId:t,contentType:a})},reloadPage:async function(e){const t=e instanceof I.List?e:I.List.of(e);await Promise.all(t.map(e=>Object(T.i)(e)))},removeFromTabStack:_e,setFindResults:function(e){r.a.dispatch({actionType:p.a.FIND_IN_PAGE_RESULT_ACTION,searchText:e.searchText,numberOfMatches:e.numberOfMatches,activeMatchOrdinal:e.activeMatchOrdinal,selectionRect:e.selectionRect,...e})},setHistoryManagerState:async function(e,t){await k(e,{historyManagerState:t})},setImageInspector:function(e,t,a){r.a.dispatch({actionType:"PAGE_SET_IMAGE_INSPECTOR",pageId:e,windowId:t,showImageInspector:a})},setImageLoading:Ee,setIsRestored:function(e,t){r.a.dispatch({actionType:"PAGE_SET_IS_RESTORED",extId:e,restored:t})},setMuting:pe,setOrigin:function(e,t,a){let n=j.get(e);n&&clearTimeout(n.id),a&&a.length>0?(n={},n.url=a,n.id=setTimeout(()=>{n=j.get(e),r.a.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,windowId:t,url:n.url})},1e3),j=j.set(e,n)):(n&&(j=j.delete(e)),r.a.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,windowId:t,url:""}))},setPageInspected:function(e,t,a){r.a.dispatch({actionType:"PAGE_SET_IS_INSPECTED",pageId:e,windowId:t,inspected:a})},setPinned:ve,setProcessExitState:function(e,t,a){r.a.dispatch({actionType:"PAGE_SET_PROCESSEXITSTATE",pageId:e,windowId:t,processexitstate:a})},setReaderState:async function(e,t){await k(e,{readerMode:t})},setSelection:function(e,t=!1,a=!0,n=!1){r.a.dispatch({actionType:"PAGE_SELECTION_SET",page:e,multiSelect:t,addGroup:a,excludeActive:n})},setThumbnail:async function(e,t){const a=l.c.getPageById(e);a&&(t?await k(e,{urlForThumbnail:a.url,thumbnail:t}):await k(e,{urlForThumbnail:void 0,thumbnail:void 0}))},setTitle:function(e,t,a){r.a.dispatch({actionType:"PAGE_SET_TITLE",pageId:e,windowId:t,title:a})},showHomepage:async function(e){const t=m.a.get(P.kHomepage),a=l.c.getDefaultStartpage(),n=t===S.n&&a===S.a?a:t;await F(n,e)},stepActivePage:async function(e,t,a){await Ne(l.c.unsafeGetActivePage(a),e,t,a)},stepPage:Ne,tileLastActive:async function(e="row",t){const a=Object(I.List)([l.c.unsafeGetActivePage(t),l.c.getPageById(Object(l.d)(t))].filter(Boolean));a.count()>1&&(a.forEach(e=>{const a=Object(D.d)(e);a&&we(a,t)}),await Ce(a,e))},tilePages:Ce,tileTabStack:async function(e,t,a){const n=l.c.getGroup(e,t),i=a||(n.count()<4?"row":"grid");await Ce(n,i,"group")},toggleImageLoading:async function(e=l.c.unsafeGetActivePage()){if(e){const t=e.get("imageLoading");"always"===t?await Ee("never"):"never"===t?await Ee("cache"):await Ee("always")}},toggleMuting:async function(e){const t=e.filter(e=>!e.getIn(["extData","vivaldi_tab_muted"])),a=e.filter(e=>e.getIn(["extData","vivaldi_tab_muted"]));await pe("selection","mute",t),await pe("selection","unmute",a)},toggleRelatedSelection:function(e){r.a.dispatch({actionType:"PAGE_SELECTION_TOGGLE_RELATED",page:e})},toggleSelectedPagesPinned:async function(e){const t=l.c.isSelecting(e)?l.c.getSelection(e).map(t=>l.c.getPages(e).find(e=>e.id===t)).filter(Boolean).toList():I.List.of(l.c.unsafeGetActivePage(e));t.size&&await Promise.all(t.map(async e=>{if(e)return Object(T.l)(e.id,{pinned:!e.pinned})}))},treeMove:async function({pages:e,groups:t,targetPage:a,after:n,area:i,group:s="",windowId:r}){await Promise.all(e.map(async e=>{switch(i){case"pinned":return await k(e.id,{group:s,tiling:""}),void await Object(T.l)(e.id,{pinned:!0});case"stack":{var a;const t=(null===(a=l.c.getPages(r).find(e=>Object(D.c)(e)===s&&Boolean(e.getIn(["extData","tiling"]))))||void 0===a?void 0:a.getIn(["extData","tiling"]).toJS())||"";return await k(e.id,{group:s,tiling:t}),void await Object(T.l)(e.id,{pinned:!1})}case"regular":{const a=Object(D.c)(e),n=t.includes(a)&&a||"",i=e.getIn(["extData","tiling"]);return await k(e.id,{group:n,tiling:n&&i&&i.toJS()}),void await Object(T.l)(e.id,{pinned:!1})}}}));let o=(a?a.index:0)+(n?1:0);await Promise.all(e.map(async(e,t)=>{0===t?o>e.index&&o--:t>0&&o<e.index&&o++,await Object(T.f)(e.id,{windowId:r,index:o})}))},untilePages:Oe,untileTileGroup:we};t.a=Se},,function(e,t,a){"use strict";var n=a(1259);const i=a.n(n)()({BACKGROUND_TASKS_SET:null,BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM:null,BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM:null,BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM:null,BROWSING_DATA_REMOVED:null,CALENDAR_CHANGED:null,CALENDAR_CREATED:null,CALENDAR_DATA_CHANGED:null,CALENDAR_DELETED:null,CALENDAR_EVENT_CHANGED:null,CALENDAR_EVENT_CREATED:null,CALENDAR_EVENT_DELETED:null,CALENDAR_EVENT_TYPE_CHANGED:null,CALENDAR_EVENT_TYPE_CREATED:null,CALENDAR_EVENT_TYPE_DELETED:null,CALENDAR_NOTIFICATION_CHANGED:null,CAPTURE_AREA_TO_DISK:null,CAPTURE_AREA_TO_CLIPBOARD:null,CAPTURE_PAGE_TO_DISK:null,CAPTURE_PAGE_TO_CLIPBOARD:null,CHANGED:null,CHROME_SET_DEVICES:null,CHROME_TABS_API:null,CHROME_TABS_REPLACED:null,CLOSE_FIND_IN_PAGE_ACTION:null,COMMAND_INITIALIZE:null,COMMAND_SET_NAMED_MENU:null,COMMAND_UPDATE_COMMAND:null,CONTACT_ADD_CONTACTS:null,CONTACT_DELETE_CONTACTS:null,CONTACT_INITIALIZE:null,CONTACT_SAVE_CONTACT:null,CONTACT_SELECT_CONTACT:null,FIND_IN_PAGE_ACTION:null,FIND_IN_PAGE_FOCUS:null,FIND_IN_PAGE_RESULT_ACTION:null,MAIL_APPLY_FILTER:null,MAIL_CLEAR_QUERY:null,MAIL_GOTO_UNREAD:null,MAIL_GOTO_NEXT_UNREAD:null,MAIL_GOTO_PREVIOUS_UNREAD:null,MAIN_SHOW_ADD_FEED:null,MAIN_SHOW_BOOKMARK_DIALOG:null,MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG:null,MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG:null,MAIN_SHOW_CREATE_CALENDAR_DIALOG:null,MAIN_SHOW_IMPORT_CALENDAR:null,MAIN_SHOW_IMPORT_DATA:null,MAIN_SHOW_KEYBOARDS_SHORTCUTS:null,MAIN_SHOW_PAGE_ACCESS_KEYS:null,MAIN_SHOW_OPEN_SESSION:null,MAIN_SHOW_QUICKCOMMANDS:null,MAIN_SHOW_SAVE_SESSION:null,MAIN_SHOW_VISUAL_TAB_SWITCHER:null,NAVGIATION_TYPED_HISTORY_DELETE:null,NAVIGATION_ADD_POPUP:null,NAVIGATION_HISTORY_ALL_DELETED:null,NAVIGATION_REMOVE_POPUP:null,NAVIGATION_RESET_BLOCKED_CONTENT:null,NAVIGATION_RESET_BLOCKED_POPUPS:null,NAVIGATION_RESET_PERMISSIONS:null,NAVIGATION_SET_BLOCKED_CONTENT:null,NAVIGATION_SET_PERMISSION:null,NAVIGATION_TYPED_HISTORY_DELETE:null,PAGE_ACTION_FAST_FORWARD_URL_CHANGED:null,PAGE_BACK:null,PAGE_FORWARD:null,PAGE_GET_HISTORY:null,PAGE_GO:null,PAGE_RELOAD:null,PAGE_RESUME_UPDATES:null,PAGE_SET_LOADING:null,PAGE_SET_MEDIA_PERMISSION:null,PAGE_STOP:null,PAGE_UPDATE:null,PAGE_UPDATED:null,PANEL_CLEAR_TRANSITION_STATE:null,PANEL_INIT:null,PANEL_MOVE:null,PANEL_SET_AVAILABLE:null,PANEL_SET_CONTENT_VISIBLE:null,PANEL_SET_FOCUS:null,PANEL_TOGGLE_FLOATING:null,PANEL_SET_MAIL_WINDOW:null,PANEL_SET_PANELS:null,PANEL_SET_RESIZABLE:null,PANEL_SET_WIDTH:null,PANEL_TOGGLE_CONTENT:null,PANEL_TOGGLE_PANEL:null,RSS_CLEAR_FEEDS:null,RSS_FEEDS_FOUND:null,SEARCH_ENGINES_INIT:null,SEARCH_ENGINES_ADD:null,SEARCH_ENGINES_REMOVE:null,SEARCH_ENGINES_MODIFY:null,SEARCH_ENGINES_SET_COLLECTION:null,SEARCH_ENGINES_SET_DEFAULT:null,SEARCH_ENGINES_REORDER:null,SEARCH_ENGINES_RESTORE:null,SEARCH_FIELD_ADD_TYPED_HISTORY:null,SEARCH_FIELD_DELETE_TYPED_HISTORY:null,SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:null,SEARCH_FIELD_INIT_TYPED_HISTORY:null,SEARCH_FIELD_SET_STATE:null,SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:null,SEARCH_SUGGEST_RESULT:null,SETTINGS_HIDE_COMPONENT:null,SETTINGS_SHOW_COMPONENT:null,SHOW_FIND_IN_PAGE_ACTION:null,SPATNAV_NAVIGATE:null,SYNC_ENGINE_STATE_CHANGED:null,TAB_CLOSEBUTTON_DISABLED:null,TAB_CLOSE_ALL_BUT_ACTIVE_TAB:null,TAB_NEW_BACKGROUND_TAB:null,TAB_NEW_TAB:null,TAB_STACK_CREATE:null,TAB_STACK_DISSOLVE:null,TAB_STACK_REMOVE:null,TAB_STACK_TILE_GRID:null,TAB_STACK_TILE_HORIZONTAL:null,TAB_STACK_TILE_VERTICAL:null,TAB_STACK_UNTILE:null,TAB_SWITCH_BACK_HISTORY:null,TAB_SWITCH_BACK_ORDER:null,TAB_SWITCH_BACK_SETTING:null,TAB_SWITCH_FORWARD_HISTORY:null,TAB_SWITCH_FORWARD_ORDER:null,TAB_SWITCH_FORWARD_SETTING:null,TAB_TOGGLE_THUMBNAIL:null,TAB_UNDO_RECENTLY_CLOSED:null,TAB_VIEW_PAGE_SOURCE:null,TILES_INITIALIZED:null,TILE_SET_LAYOUT:null,VIVALDI_ACCOUNT_STATE_UPDATED:null,VIVALDI_ACCOUNT_TOKEN_FETCH_FAILED:null,VIVALDI_ACCOUNT_INFO_FETCH_FAILED:null,WEBPAGEVIEW_ACTIONS:null,WEBVIEW_CLEAR_IF_ACTIVE:null,WEBVIEW_SET_ACTIVE:null,WEBVIEW_SET_UTILITY_VIEW:null,WINDOW_HTML5_FULL_SCREEN:null,WINDOW_MINIMAL_UI:null,WINDOW_TOGGLE_ADDRESS_BAR:null,WINDOW_TOGGLE_BOOKMARKS_BAR:null,WINDOW_TOGGLE_PANEL_TOGGLE:null,WINDOW_TOGGLE_STATUS_BAR:null,WINDOW_TOGGLE_TABS:null,WINDOW_UPDATE_FROM_PREFS:null,UNLOAD_DIALOG_CLOSED:null});t.a=i},function(e,t,a){"use strict";a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return N}));var n=a(41),i=a(6),s=a(143),r=a.n(s),o=a(12),l=a(16),c=a(489),u=a(1),m=a(99);function d(e){return!!e.minimalUI||!!e.fullScreen}function h(e,t,a){return Object(m.c)(e,e=>{const n=e.get(t);n&&a(n)})}class p extends r.a{getInitialState(){return new Map}_updateUIState(e,t){const a=this.isMinimalUI(e),n=d(t);a&&!n?t.visibleUI=this.getUIFromPrefs():!a&&n&&(t.visibleUI={bookmarksBar:!1,addressBar:!1,panelToggle:!1,tabs:!1,statusBar:"overlay"})}reduce(e,t){switch(t.actionType){case"WINDOW_SET_STATE":return Object(m.c)(e,e=>{const{windowId:a,windowState:n}=t;e.set(a,n)});case"WINDOW_CLOSED":return Object(m.c)(e,e=>{const{windowId:a}=t;e.delete(a)});case l.a.WINDOW_UPDATE_FROM_PREFS:{const{windowId:a}=t;return this.isMinimalUI(a)?e:h(e,a,e=>{e.visibleUI=this.getUIFromPrefs()})}case"WINDOW_ACTIVATED":return h(e,t.windowId,e=>{e.active=t.activated});case"WINDOW_FULL_SCREEN":return o.a.waitFor([n.d.dispatchToken]),h(e,t.windowId,e=>{const{fullScreen:a,windowId:n}=t;e.fullScreen=a,a||(e.html5FullScreen=!1),this._updateUIState(n,e)});case"WINDOW_FULL_SCREEN_MENU_BAR":return h(e,t.windowId,e=>{e.fullscreenMenubarShown=t.shown});case l.a.WINDOW_HTML5_FULL_SCREEN:return h(e,t.windowId,e=>{e.html5FullScreen=t.html5FullScreen,e.fullScreen?e.restoreState="fullscreen":e.maximized?e.restoreState="maximized":e.restoreState="normal"});case"WINDOW_MAXIMIZED":return h(e,t.windowId,e=>{const{maximized:a}=t;e.maximized=a,e.restoreState=a?"maximized":"normal"});case"WINDOW_MINIMIZED":return h(e,t.windowId,e=>{const{minimized:a}=t;e.minimized=a,e.restoreState=a?"minimized":"normal"});case l.a.WINDOW_MINIMAL_UI:return o.a.waitFor([n.d.dispatchToken]),h(e,t.windowId,e=>{e.minimalUI=t.minimalUI,this._updateUIState(t.windowId,e)});case l.a.WINDOW_TOGGLE_BOOKMARKS_BAR:return this.isMinimalUI(t.windowId)?h(e,t.windowId,e=>{e.visibleUI.bookmarksBar=!e.visibleUI.bookmarksBar}):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case l.a.WINDOW_TOGGLE_ADDRESS_BAR:return this.isMinimalUI(t.windowId)?h(e,t.windowId,e=>{e.visibleUI.addressBar=!e.visibleUI.addressBar}):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case l.a.WINDOW_TOGGLE_TABS:return this.isMinimalUI(t.windowId)?h(e,t.windowId,e=>{e.visibleUI.tabs=!e.visibleUI.tabs}):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case l.a.WINDOW_TOGGLE_PANEL_TOGGLE:return this.isMinimalUI(t.windowId)?h(e,t.windowId,e=>{e.visibleUI.panelToggle=!e.visibleUI.panelToggle}):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e);case l.a.WINDOW_TOGGLE_STATUS_BAR:return this.isMinimalUI(t.windowId)?h(e,t.windowId,e=>{e.visibleUI.statusBar="on"===e.visibleUI.statusBar?"off":"on"}):(console.warn("Attempting to toggle toolbars for a window without minimal UI"),e)}return e}getId(){let e=-1;for(const[t,a]of this.getState()){if(a.active)return t;e=t}return e}getActiveBrowserOrPopupWindowId(){const e=window.vivaldiWindowId;for(const[e,t]of this.getState())if(t.active&&"settings"!==t.type)return e;return e}getLastActiveBrowserWindowId(){let e=-1;for(const[t,a]of this.getState()){if(a.active&&"normal"===a.type)return t;"normal"===a.type&&(e=t)}return e}isFullscreen(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.fullScreen)||!1}isHTML5Fullscreen(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.html5FullScreen)||!1}isIncognito(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.incognito)||!1}isMaximized(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.maximized)||!1}isMinimized(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.minimized)||!1}isActive(e=this.getId()){var t;return(null===(t=this.getState().get(e))||void 0===t?void 0:t.active)||!1}isPopup(e=this.getId()){var t;return"popup"===(null===(t=this.getState().get(e))||void 0===t?void 0:t.type)}isSettings(e=this.getId()){var t;return"settings"===(null===(t=this.getState().get(e))||void 0===t?void 0:t.type)}isMinimalUI(e=this.getId()){const t=this.getState().get(e);return!!t&&d(t)}isGuestSession(e=this.getId()){const t=this.getState().get(e);return!t||t.guest}getVisibleUI(e=this.getId()){const t=this.getState().get(e);if(!t)throw new Error("WindowStore.getVisibleState: Expected a valid windowId");return t.visibleUI}isIncognitoOrGuest(e=this.getId()){return this.isIncognito(e)||this.isGuestSession(e)}getRestoreState(e){const t=this.getState().get(e);if(!t)throw new Error("WindowStore.getVisibleState: Expected a valid windowId");return t.restoreState}getUIFromPrefs(){return{bookmarksBar:i.a.get(u.kBookmarksBarVisible),addressBar:i.a.get(u.kAddressBarVisible),panelToggle:i.a.get(u.kPanelsShowToggle),tabs:i.a.get(u.kTabsVisible),statusBar:i.a.get(u.kStatusBarDisplay)}}}const b=new p(o.a),g={_oldState:b.getState(),recordState(){const e=this._oldState,t=b.getState();this._oldState=t;for(const[a,n]of t){const t=e.get(a);t&&n.visibleUI&&d(t)===d(n)&&t.fullScreen===n.fullScreen&&t.visibleUI===n.visibleUI||n.html5FullScreen||Object(c.a)(a,{minimalUI:n.minimalUI,fullScreen:n.fullScreen,visibleUI:n.visibleUI})}}};function N(e){return e.html5FullScreen?"fullscreen inner":e.fullScreen?"fullscreen":e.maximized?"maximized":"normal"}b.addListener(g.recordState.bind(g)),t.a=b},,,,function(e,t,a){"use strict";var n=a(0),i=a(217);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.a=function(e,t){return n.forwardRef((a,r)=>{const o=Object(i.a)(t);return(n.createElement(e,s({},a,{ref:r,prefValues:o,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertPrefsCache.jsx",lineNumber:21,columnNumber:12}})))})}},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(45),s=a.n(i),r=a(21),o=a(72),l=a(1277),c=a(35),u=a(25),m=a(20),d=a.n(m),h=a(78),p=a(125),b=a.n(p),g=a(112),N=a.n(g),f=a(74),_=a(1),v=a(173),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButton.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=["mousedown","pointerdown","touchstart"],O=a(865),y=[_.kKeyboardTabToAll];class S extends n.PureComponent{constructor(...t){super(...t),C(this,"dragImage",new Image),C(this,"uuid",b()()),C(this,"buttonRef",n.createRef()),C(this,"state",{buttonRect:void 0,bgColor:c.a.getSync("BROWSER_COLOR_BG"),isDragging:!1,isDragOver:!1,horizontalPosition:null,verticalPosition:null,hasPointerEntered:!1,isMenuVisible:!1,windowRect:void 0}),C(this,"onWindowResize",()=>{this.props.isPopupVisible&&this.updateButtonRect()}),C(this,"updateBgColor",()=>{this.setState({bgColor:c.a.getSync("BROWSER_COLOR_BG")})}),C(this,"onMouseEnter",()=>{this.updateDragImage(this.props.dragImage,this.props.image,c.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"))}),C(this,"updateDragImage",N()(1)((e,t,a)=>{if(!e&&!t)return void(this.dragImage.src="");const n=document.createElement("canvas"),i=new Image;i.onerror=(e,t)=>{console.warn(`Error loading image for ${this.props.name||this.props.title||"unnamed button"}`,e)},i.onload=()=>{const t=n.getContext("2d");if(n.width=32,n.height=32,t.fillStyle=a,t.fillRect(0,0,32,32),e)t.drawImage(i,4,4,24,24);else{const e=s()(a).luminance()<.4;e&&(t.fillStyle="white",t.globalCompositeOperation="difference",t.fillRect(0,0,32,32)),t.globalCompositeOperation="multiply",t.drawImage(i,4,4,24,24),e&&(t.globalCompositeOperation="difference",t.fillRect(0,0,32,32))}t.beginPath(),t.moveTo(16,0),t.bezierCurveTo(0,0,0,0,0,16),t.bezierCurveTo(0,32,0,32,16,32),t.bezierCurveTo(32,32,32,32,32,16),t.bezierCurveTo(32,0,32,0,16,0),t.rect(0,0,32,32),t.closePath(),t.clip(),t.clearRect(0,0,32,32),this.dragImage.src=n.toDataURL()},e?i.src=e:t&&(i.src="data:image/svg+xml;charset=utf-8,"+t)})),C(this,"setFocus",()=>{var e;null===(e=this.buttonRef.current)||void 0===e||e.focus()}),C(this,"updateButtonRect",()=>new Promise(e=>{var t;const a=this.getRect();if(!a)return;const n=null===(t=this.context.document.body)||void 0===t?void 0:t.getBoundingClientRect();this.setState({buttonRect:a,windowRect:n},()=>e())})),C(this,"getContextMenuHandler",e=>this.hasMenu()||Boolean(this.props.customizeMenu)?this.showCustomizeMenu(e,e.target):null),C(this,"showMenu",e=>{if(this.state.isDragging)return;let t=[];const a=e||this.buttonRef.current;this.props.menu&&(t=t.concat(this.props.menu)),this.props.customizeMenu&&(t=t.concat(this.props.customizeMenu)),this.props.menuPromise?this.props.menuPromise().then(e=>{t=e.concat(t),this.props.menuOrigin&&(this.context.removeEventListener("pointerup",this.pointerUp,!0),Object(h.a)(this.context.vivaldiWindowId,t,this.menuVisibilityChanged,this.props.menuOrigin,a||void 0)())}):this.props.menu&&this.props.menuOrigin&&(this.context.removeEventListener("pointerup",this.pointerUp,!0),Object(h.a)(this.context.vivaldiWindowId,t,this.menuVisibilityChanged,this.props.menuOrigin,a||void 0)())}),C(this,"showCustomizeMenu",(e,t)=>{const a=!this.props.disabled||this.props.alwaysMenu,n=a?(this.props.menu||[]).concat(this.props.customizeMenu||[]):this.props.customizeMenu||[];e.persist(),e.preventDefault(),e.stopPropagation(),a&&this.props.menuPromise?this.props.menuPromise().then(t=>{Object(h.a)(this.context.vivaldiWindowId,t.concat(n),this.menuVisibilityChanged)(e)}):Object(h.a)(this.context.vivaldiWindowId,n,this.menuVisibilityChanged)(e)}),C(this,"getRect",()=>{var e;return null===(e=this.buttonRef.current)||void 0===e?void 0:e.getBoundingClientRect()}),C(this,"hidePopup",async()=>{var e,t;await this.updateButtonRect(),null===(e=(t=this.props).hidePopup)||void 0===e||e.call(t)}),C(this,"onBlur",e=>{var t,a;null===(t=(a=this.props).onBlur)||void 0===t||t.call(a,e)}),C(this,"onFocus",async e=>{var t,a;e.persist(),await this.updateButtonRect(),null===(t=(a=this.props).onFocus)||void 0===t||t.call(a,e)}),C(this,"onDragStart",e=>{e.persist(),e.shiftKey?(clearTimeout(this.menuTimer),e.dataTransfer.dropEffect="move",this.dragImage.src&&e.dataTransfer.setDragImage(this.dragImage,0,0),this.props.mimeType&&this.props.mimeContent&&(e.dataTransfer.setData(this.props.mimeType,this.props.mimeContent),e.dataTransfer.setData("text/plain","")),this.setState({isDragging:!0},()=>{this.props.onDragStart&&this.props.onDragStart(e)})):e.preventDefault()}),C(this,"onDragEnter",e=>{this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)&&(e.persist(),this.setState({isDragOver:!0},()=>{this.props.onDragEnter&&this.props.mimeContent?this.props.onDragEnter(e,this.props.mimeContent):this.props.onDragEnter&&this.props.onDragEnter(e)}))}),C(this,"onDragLeave",e=>{this.setState({verticalPosition:null,horizontalPosition:null,isDragOver:!1})}),C(this,"onDragOver",e=>{if(this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)){let t=.5;void 0!==this.props.edgeAmount&&this.props.edgeAmount>=0&&this.props.edgeAmount<=.5&&(t=this.props.edgeAmount);const a=this.state.buttonRect;if(a){const n=e.clientX-a.left,i=e.clientY-a.top,s=n<a.width*t,r=n>a.width*(1-t),o=i<a.height*t,l=i>a.height*(1-t);e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.setState({isDragOver:!0,verticalPosition:o?"top":l?"bottom":"center",horizontalPosition:s?"left":r?"right":"center"})}}}),C(this,"onDrop",e=>{const t=this.state.verticalPosition||"center",a=this.state.horizontalPosition||"center";this.setState({verticalPosition:null,horizontalPosition:null,isDragging:!1,isDragOver:!1}),e.persist(),this.props.onDrop&&this.props.onDrop(e,a,t)}),C(this,"onDragEnd",e=>{e.persist(),this.setState({isDragging:!1},()=>{this.props.onDragEnd&&this.props.onDragEnd(e)})}),C(this,"pointerEnter",e=>{e.persist(),this.updateButtonRect().then(()=>{this.props.onPointerEnter&&this.props.onPointerEnter(e)}),this.setState({hasPointerEntered:!0})}),C(this,"pointerLeave",e=>{clearTimeout(this.menuTimer),this.setState({hasPointerEntered:!1}),this.props.onPointerLeave&&this.props.onPointerLeave(e)}),C(this,"limitToDrag",e=>{e.shiftKey||e.preventDefault()}),C(this,"menuVisibilityChanged",t=>{t?this.setState({isMenuVisible:!0}):e.nextTick(()=>{this.setState({isMenuVisible:!1})})}),C(this,"onMenuIndicator",e=>{const{parentElement:t}=e.target;t instanceof HTMLElement&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation()),this.state.isMenuVisible||setTimeout(()=>this.showMenu(t),90)}),C(this,"pointerDown",e=>{const t=Date.now();if(this.pointerTimestamp&&t-this.pointerTimestamp<150)return void e.preventDefault();e.persist();const a=e.shiftKey;if(a||e.button!==f.a.kLeft||"function"!=typeof this.props.onPointerDown){if(!a){const a=e.currentTarget;let n=!0;e.preventDefault(),e.button===f.a.kLeft&&this.hasMenu()?this.props.onClick?(e.stopPropagation(),this.menuTimer=setTimeout(()=>this.showMenu(a),650)):this.state.isMenuVisible&&(n=!1):e.button===f.a.kRight&&(this.hasMenu()||this.props.customizeMenu)&&(e.stopPropagation(),n=!1),n&&(this.pointerTimestamp=t,this.context.addEventListener("pointerup",this.pointerUp,!0))}}else this.props.onPointerDown(e)}),C(this,"pointerUp",e=>{this.context.removeEventListener("pointerup",this.pointerUp,!0),clearTimeout(this.menuTimer);const t=this.buttonRef.current;if(t&&(e.target===t||e.target===t.parentElement)){const t=e.ctrlKey;if(e.button===f.a.kCenter||t)e.preventDefault(),e.stopPropagation(),this.props.onMiddleClick&&this.props.onMiddleClick(e);else if(e.button===f.a.kLeft){const t=Date.now()-this.pointerTimestamp;this.props.onClick&&("mouse"===e.pointerType||t<650)?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLElement&&this.showMenu(e.target))}}}),C(this,"onAuxClick",e=>{e.button===f.a.kCenter&&(e.preventDefault(),e.stopPropagation())}),C(this,"keyDown",e=>{if(clearTimeout(this.menuTimer),this.hasMenu()){const t=e.keyCode;t===o.a.KEY_DOWN&&"bottom"===this.props.menuOrigin?(this.showMenu(e.currentTarget),e.preventDefault(),e.stopPropagation()):t===o.a.KEY_UP&&"top"===this.props.menuOrigin&&(this.showMenu(e.currentTarget),e.preventDefault(),e.stopPropagation())}else this.props.onKeyDown&&this.props.onKeyDown(e)}),C(this,"keyUp",e=>{const t=e.keyCode;t!==o.a.KEY_SPACE&&t!==o.a.KEY_ENTER&&t!==o.a.KEY_RETURN||(this.props.onClick?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),this.showMenu(e.currentTarget)))}),C(this,"onDoubleClick",e=>{e.stopPropagation()})}componentDidMount(){c.a.addListener("BROWSER_COLOR_BG",this.updateBgColor),this.context.addEventListener("resize",this.onWindowResize,!1),e.nextTick(()=>{this.updateButtonRect()})}componentWillUnmount(){c.a.removeListener("BROWSER_COLOR_BG",this.updateBgColor),this.context.removeEventListener("pointerup",this.pointerUp,!0),this.context.removeEventListener("resize",this.onWindowResize,!1)}hasMenu(){return Boolean(this.props.menu)||Boolean(this.props.menuPromise)}render(){const e=this.props.disabled,t="number"==typeof this.props.tabIndex?this.props.tabIndex:this.props.prefValues[_.kKeyboardTabToAll],a=this.props.image||null,i=this.props.imagePath||null,s=this.props.title||null,r=this.props.badgeText||null,o=this.props.isMenuIndicatorVisible||!1,u=this.props.isPopupVisible||!1,m=!(!this.props.onDragStart||!this.props.mimeType),h=!(!this.props.onDrop||!this.props.onDragEnter),p=this.props.children||null,b=d()("ToolbarButton-Button",{"button-on":this.props.isOn,"button-textonly":!a&&!i,"button-pressed":this.props.isPressed||u,"button-dragged":this.state.isDragging,"button-dragover":this.state.isDragOver,"button-dragover-top":"top"===this.state.verticalPosition,"button-dragover-bottom":"bottom"===this.state.verticalPosition,"button-dragover-center":"center"===this.state.verticalPosition&&"center"===this.state.horizontalPosition,"button-dragover-left":"left"===this.state.horizontalPosition,"button-dragover-right":"right"===this.state.horizontalPosition});if(!s&&!this.props.tooltip)return console.warn("Button hidden due to missing title and tooltip"),null;let g=!1;return this.props.isMenuIndicatorVisible&&(g=(this.state.isMenuVisible||this.state.hasPointerEntered)&&!e),n.createElement("div",{className:d()("button-toolbar",this.props.className,{[this.uuid]:p,"button-menu":this.props.isMenuIndicatorVisible,"button-highlight-color":g&&c.a.getSync("TABCOLOR_BEHIND_TABS"),"button-highlight-color-accent":g&&!c.a.getSync("TABCOLOR_BEHIND_TABS")}),onContextMenu:e?this.getContextMenuHandler:null,style:this.props.style,onMouseEnter:this.onMouseEnter,draggable:e&&m||null,onPointerDown:e&&m?this.limitToDrag:null,onDragStart:e&&m?this.onDragStart:null,onDragEnd:m?this.onDragEnd:null,onDragEnter:h?this.onDragEnter:null,onDragOver:h?this.onDragOver:null,onDragLeave:h?this.onDragLeave:null,onDrop:h?this.onDrop:null,title:e?this.props.tooltip||s:null,__source:{fileName:E,lineNumber:693,columnNumber:12}},n.createElement("button",{name:this.props.name,ref:this.buttonRef,disabled:e,draggable:!e&&m||null,onDragStart:m?this.onDragStart:null,tabIndex:0!==t?t:null,onKeyDown:this.keyDown,onKeyUp:this.keyUp,onPointerDown:this.pointerDown,onAuxClick:this.onAuxClick,autoFocus:this.props.autoFocus,onPointerEnter:this.pointerEnter,onPointerLeave:this.pointerLeave,onDoubleClick:this.onDoubleClick,onContextMenu:this.getContextMenuHandler,onBlur:this.onBlur,onFocus:this.onFocus,style:this.props.buttonStyle||null,title:e?null:this.props.tooltip||s,type:"button",className:b||null,__source:{fileName:E,lineNumber:715,columnNumber:7}},!i&&a&&n.createElement("span",{dangerouslySetInnerHTML:{__html:a},__source:{fileName:E,lineNumber:737,columnNumber:36}}),i&&n.createElement("img",{src:i,alt:"",__source:{fileName:E,lineNumber:738,columnNumber:26}}),(a||i)&&r&&n.createElement("span",{className:"button-badge",style:this.props.badgeColor?Object(v.e)(this.props.badgeColor.hex(),this.state.bgColor):{},__source:{fileName:E,lineNumber:740,columnNumber:13}},r),s&&n.createElement("span",{className:"button-title",__source:{fileName:E,lineNumber:750,columnNumber:22}},s),o&&n.createElement("span",{className:"button-toolbar-menu-indicator",onPointerDown:this.state.isMenuVisible?void 0:this.onMenuIndicator,dangerouslySetInnerHTML:{__html:O},__source:{fileName:E,lineNumber:752,columnNumber:13}}),!a&&!i&&r&&n.createElement("span",{className:"button-badge",style:this.props.badgeColor?Object(v.e)(this.props.badgeColor.hex(),this.state.bgColor):{},__source:{fileName:E,lineNumber:760,columnNumber:13}},r)),p&&this.props.hidePopup&&this.props.popupPosition&&this.state.buttonRect&&this.state.windowRect&&n.createElement(l.a,{eventTypes:w,outsideClickIgnoreClass:[this.uuid,this.props.outsideClickIgnoreClass||""],disableOnClickOutside:!u,hasLightArrow:this.props.hasLightArrow,hidePopup:this.hidePopup,isVisible:u,verticalPosition:this.props.popupPosition,className:this.props.className,buttonRect:this.state.buttonRect,buttonRef:this.buttonRef,width:this.props.popupWidth,popupClassName:this.props.popupClassName,anchorPosition:this.props.popupAnchor,windowRect:this.state.windowRect,__source:{fileName:E,lineNumber:773,columnNumber:11}},p))}}C(S,"contextType",u.a),t.a=Object(r.a)(S,y)}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"o",(function(){return p})),a.d(t,"a",(function(){return N})),a.d(t,"g",(function(){return v})),a.d(t,"m",(function(){return C})),a.d(t,"k",(function(){return O})),a.d(t,"h",(function(){return T})),a.d(t,"f",(function(){return k})),a.d(t,"n",(function(){return A})),a.d(t,"l",(function(){return I})),a.d(t,"j",(function(){return M})),a.d(t,"e",(function(){return P})),a.d(t,"d",(function(){return L})),a.d(t,"c",(function(){return j})),a.d(t,"i",(function(){return R})),a.d(t,"p",(function(){return B}));a(53);var n=a(6),i=a(2),s=a(37),r=a(46),o=a(1),l=a(9);function c(e,t){let a=e;if(t.displayUrl){const n=Object(r.f)(e);a=t.displayUrl+(t.copyParams&&n.path?"/"+n.path+"/":"/")}else a="";return a}function u(e,t){const a=(t.url||"").includes("?")?"&":"?",[n,i]=e.slice(t.displayUrl.length).split("?"),s=new URLSearchParams(i);n&&"/"!==n&&s.append("path",Object(r.u)(n));const o=t.copyParams&&e.length>t.displayUrl.length?s.toString():"";return(t.url||"")+(o?a+o:"")}const m={general:{title:Object(i.a)("General"),icon:l.Yd},appearance:{title:Object(i.a)("Appearance"),icon:l.m},themes:{title:Object(i.a)("Themes"),icon:l.Rd},startpage:{title:Object(i.a)("title","Start Page"),icon:l.Bd},tabs:{title:Object(i.a)("Tabs"),icon:l.Pd.medium},panel:{title:Object(i.a)("title","Panel"),icon:l.Ac.medium},addressbar:{title:Object(i.a)("title","Address Bar"),icon:l.j},bookmarks:{title:Object(i.a)("Bookmarks"),icon:l.C.medium},qc:{title:Object(i.a)("Quick Commands"),icon:l.Qc},keyboard:{title:Object(i.a)("Keyboard"),icon:l.Cb},mouse:{title:Object(i.a)("Mouse"),icon:l.gc},search:{title:Object(i.a)("noun","Search"),icon:l.td.medium},privacy:{title:Object(i.a)("Privacy"),icon:l.Oc},downloads:{title:Object(i.a)("Downloads"),icon:l.fb.medium},sync:{title:Object(i.a)("Sync"),icon:l.Id.medium},webpages:{title:Object(i.a)("Webpages"),icon:l.ae},network:{title:Object(i.a)("Network"),icon:l.pc},mail:{section:"mail",title:Object(i.a)("Mail"),icon:l.Hb.medium},rss:{title:Object(i.a)("Feeds"),icon:l.Rc.medium},calendar:{title:Object(i.a)("Calendar"),icon:l.H.medium},chat:{title:Object(i.a)("Chat"),icon:l.Q.medium},all:{title:Object(i.a)("Display All"),icon:l.vd.medium}},d={"vivaldi://settings/":"settings","vivaldi://startpage/":"startpage","vivaldi://bookmarks/":"bookmarks","vivaldi://history/":"history","vivaldi://calendar/":"calendar","vivaldi://chat/":"chat","vivaldi://mailpage/":"mailpage","vivaldi://saga/":"saga","chrome://saga/":"saga","vivaldi://guest-intro/":"guest-intro","vivaldi://private-intro/":"private-intro","vivaldi://welcome/":"welcome","vivaldi://themecolors/":"themecolors","vivaldi://experiments/":"experiments","vivaldi://actionlog/":"actionlog","vivaldi://notes/":"notes"},h={"vivaldi://settings/":l.vd.medium,"vivaldi:settings":l.vd.medium,"vivaldi://startpage/":l.Bd,"vivaldi:startpage":l.Bd,"vivaldi://bookmarks/":l.C.medium,"vivaldi:bookmarks":l.C.medium,"vivaldi://history/":l.yb.medium,"vivaldi:history":l.yb.medium,"vivaldi://calendar/":l.H.medium,"vivaldi:calendar":l.H.medium,"vivaldi://chat/":l.Q.medium,"vivaldi:chat":l.Q.medium,"vivaldi://mailpage/":l.Hb.medium,"vivaldi:mailpage":l.Hb.medium,"vivaldi://themecolors/":l.Rd,"vivaldi:themecolors":l.Rd,"vivaldi://notes/":l.qc.medium,"vivaldi:notes":l.qc.medium,"vivaldi://game/":"chrome://game/","vivaldi:game":"chrome://game/","vivaldi://saga/":"chrome://saga/","vivaldi:saga":"chrome://saga/"};function p(e){return e.startsWith("vivaldi:")?h[e]||l.Yd:e}const b=["settings","startpage","bookmarks","history","calendar","chat","notes","mailpage","private-intro","experiments"],g={settings:`${s.o}/components/settings/settings.html`,startpage:`${s.r}/startpage`,bookmarks:`${s.r}/startpage?section=bookmarks`,history:`${s.r}/startpage?section=history`,notes:`${s.r}/startpage?section=notes`,calendar:`${s.r}/startpage?section=calendar`,mailpage:`${s.o}/components/mail/mail.html`,chat:`${s.o}/components/mail/chat.html`,saga:`${s.o}/saga/saga.html`,"guest-intro":`${s.o}/components/guest-intro/guest-intro.html`,"private-intro":`${s.o}/components/private-intro/private-intro.html`,welcome:`${s.o}/components/welcome/welcome.html`,themecolors:`${s.o}/components/themecolors/themecolors.html`,experiments:`${s.o}/components/experiments/experiments.html`,actionlog:`${s.o}/components/actionlog/actionlog.html`},N={...g,about:"chrome://version","vivaldi-urls":"chrome://chrome-urls",blankpage:"about:blank",extensions:"chrome://extensions",game:"chrome://game",saga:"chrome://saga"},f=[N.settings,N.bookmarks,N.history,N.notes,N.calendar,N.mailpage,N.chat,N.themecolors,N.experiments,N.actionlog,N.game],_=[{displayUrl:"vivaldi://history",url:N.history,copyParams:!0},{displayUrl:"vivaldi://calendar",url:N.calendar,copyParams:!0},{displayUrl:"vivaldi://notes",url:N.notes,copyParams:!0},{displayUrl:"vivaldi://bookmarks",url:N.bookmarks,copyParams:!0},{displayUrl:"vivaldi://settings",url:N.settings,copyParams:!0},{displayUrl:"",url:N.startpage,copyParams:!1},{displayUrl:"vivaldi://startpage",url:N.startpage,copyParams:!1},{displayUrl:"",url:"chrome://newtab",copyParams:!1},{displayUrl:"",url:N.blankpage,copyParams:!1},{displayUrl:"vivaldi://mail",url:N.mailpage,copyParams:!0},{displayUrl:"vivaldi://saga",url:N.saga,copyParams:!0},{displayUrl:"vivaldi://chat",url:N.chat,copyParams:!0},{displayUrl:"vivaldi://about",url:N.about,copyParams:!0},{displayUrl:"vivaldi://help",url:"https://vivaldi.com/help",copyParams:!0},{displayUrl:"vivaldi://vivaldi-urls",url:N["vivaldi-urls"],copyParams:!0},{displayUrl:"vivaldi://extensions",url:"chrome://extensions",copyParams:!0},{displayUrl:"vivaldi://guest-intro",url:N["guest-intro"],copyParams:!0},{displayUrl:"",url:N["private-intro"],copyParams:!0},{displayUrl:"vivaldi://welcome",url:N.welcome,copyParams:!0},{displayUrl:"vivaldi://themecolors",url:N.themecolors,copyParams:!0},{displayUrl:"vivaldi://experiments",url:N.experiments,copyParams:!0},{displayUrl:"vivaldi://actionlog",url:N.actionlog,copyParams:!0},{displayUrl:"vivaldi://game",url:N.game,copyParams:!1},{displayUrl:"about:blank",url:"about:blank",copyParams:!1,mapUrlToDisplayUrl:e=>e},{displayUrl:"about:about",url:N.about,copyParams:!1},{displayUrl:"chrome://history",url:N.history,copyParams:!0},{displayUrl:"chrome://bookmarks",url:N.bookmarks,copyParams:!0},{displayUrl:"chrome://newtab",mapDisplayUrlToUrl:e=>C(e)?N.startpage:e,copyParams:!1},{displayUrl:"vivaldi://",url:"chrome://",copyParams:!0,mapDisplayUrlToUrl:(e,t)=>"vivaldi://"===e?N.about:function(e,t){const a=t.copyParams&&e.length>t.displayUrl.length?Object(r.u)(e.slice(t.displayUrl.length)):"";return(t.url||"")+a}(e,t),mapUrlToDisplayUrl:(e,t)=>function(e,t){const a=t.copyParams&&e.length>(t.url||"").length?Object(r.u)(e.slice((t.url||"").length)):"";return t.displayUrl+a}(e,t)},{displayUrl:"vivaldi:",copyParams:!1,mapDisplayUrlToUrl:e=>{const t=e.indexOf("/"),a=-1===t?e.length:t,n=N[e.substring(8,a)];return n?u(e,{displayUrl:e.substring(0,a),url:n,copyParams:!0}):e}}];function v(e){let t=e;if(-1===t.indexOf("://")){const e=t.indexOf(":");e>-1&&(t=t.slice(0,e)+"://"+t.slice(e+1))}if("/"!==t[t.length-1]&&(t+="/"),!(t in d))return!1;const a=d[t];return b.includes(a)}function E(e,t){return O(e)?l.vd.medium:e===N.history?l.yb.medium:e===N.bookmarks?l.C.medium:e===N.calendar?l.H.medium:e.startsWith(N.notes)?l.qc.medium:C(e)?l.Bd:D(e)?l.Hb.medium:function(e){return"string"==typeof e&&0===e.indexOf(N.chat)}(e)?"/resources/vivaldi_chat_default.png":e.startsWith(N.game)?"chrome://favicon/chrome://game/":e.startsWith(N.extensions)?"chrome://favicon/chrome://extensions/":e===N["private-intro"]?l.ie:t||"/resources/favicon@2x.png"}function C(e){var t,a;const i=null===(t=n.a.get(o.kExtensionURLOverrides))||void 0===t?void 0:null===(a=t.newtab)||void 0===a?void 0:a.find(e=>e.active),r=n.a.get(o.kTabsNewPageLink)===s.l.EXTENSION;return i&&r?e===i.entry:e.startsWith("chrome://newtab")||e.startsWith(N.startpage)||e.startsWith("vivaldi://startpage")}function w(e,t){return t&&0===t.indexOf(e)}function O(e){return w(N.settings,e)}const y=Object.keys(N).map(e=>N[e]),S=[...Object.keys(g).map(e=>g[e]),...Object.keys(d)];function T(e){return y.some(t=>e.startsWith(t))}function k(e){return e.startsWith(N.game)||e.startsWith(N.extensions)}function A(e){return S.some(t=>e.startsWith(t))}function I(e){return f.some(t=>e.get("url").startsWith(t))}function D(e){return"string"==typeof e&&0===e.indexOf(N.mailpage)}function M(e){return 0===e.indexOf(N.notes)}function P(e){const t=e=e.trim();e=e?e.toLowerCase():e;const a=_.find(t=>t.displayUrl&&w(t.displayUrl,e));return a?a.mapDisplayUrlToUrl?a.mapDisplayUrlToUrl(e,a):u(e,a):t}function x(e){if((t=e).startsWith(s.a)||t.startsWith(s.q)||t.startsWith(s.p)||"about:blank"===t||(null===(a=n.a.get(o.kExtensionURLOverrides))||void 0===a?void 0:null===(i=a.newtab)||void 0===i?void 0:i.some(e=>e.active&&e.entry===t)))return"";var t,a,i;for(let t=0;t<_.length;t++){const a=_[t];if(a.url&&w(a.url,e)){e=a.mapUrlToDisplayUrl?a.mapUrlToDisplayUrl(e,a):c(e,a);break}}return e}function L(e,t){if(e){if(e.startsWith(N.bookmarks))t=Object(i.a)("Bookmarks");else if(e.startsWith(N.history))t=Object(i.a)("History");else if(e.startsWith(N.calendar))t=Object(i.a)("Calendar");else if(e.startsWith(N.chat)){const a=Object(r.f)(e).path;t=a?Object(i.a)(`Chat: ${a}`):Object(i.a)("Chat")}else if(e.startsWith(N.notes))"Start Page"===t&&(t=Object(i.a)("Notes"));else if(C(e))t=Object(i.a)("browser","Start Page");else if(e===N.experiments)t=Object(i.a)("Experimental Features");else if(e===N.actionlog)t=Object(i.a)("Action Log");else if(e===N["guest-intro"])t=Object(i.a)("Guest Profile Introduction");else if(e===N["private-intro"])t=Object(i.a)("Private Window Introduction");else if(e===N.welcome)t=Object(i.a)("Welcome");else if(e===N.blankpage)t=Object(i.a)("title","Blank Page");else if(e.startsWith(N.settings)){const a=Object(r.f)(e).path,n=a?a.split("/")[0]:"general";t=Object(i.a)("$1 Settings",m[n]?[m[n].title]:[n])}t===e&&(t=Object(r.s)(x(e)))}return t}function j(e){const{title:t="",url:a=""}=e;return L(a,t)}function R(e){var t,a;return e.startsWith(s.a)||e.startsWith(s.q)||e.startsWith(s.p)||"about:blank"===e||function(e){return n.a.get(o.kTabsNewPageLink)===s.l.CUSTOM&&n.a.get(o.kTabsNewPageCustomUrl)===e}(e)||function(e){return n.a.get(o.kTabsNewPageLink)===s.l.HOMEPAGE&&n.a.get(o.kHomepageCache)===e}(e)||Boolean(null===(t=n.a.get(o.kExtensionURLOverrides))||void 0===t?void 0:null===(a=t.newtab)||void 0===a?void 0:a.some(t=>t.active&&t.entry===e))}const B={internals:N,settingCategories:m,isNewTabPage:R,isBannedFromGuestMode:v,getExtensionUrlFromInternalProtocolUrl:function(e){return e in d?g[d[e]]:e},getFavicon:function(e,t){return A(e)||k(e)?E(e,t):t||"/resources/default_favicon_64.png"},getDisplayUrl:x,getHoverUrl:function(e){let t=x(e);return""===t&&C(e)&&(t="vivaldi://startpage/"),t},getDisplayTitleByUrl:L,getDisplayTitle:j,hasCustomFavicon:k,removeTrailingSlashWhenNoPath:r.s,getUrl:P,isMailPage:D,isNotesManager:M,isStartPage:C,isInternalUrl:T,isVivaldiComponent:A,isExtensionProtocol:function(e){return e.startsWith(s.i)},isOurExtension:function(e){return e.substring(0,s.o.length)===s.o},isInternalPage:function(e){return T(e.url||"")},isSettingsUrl:O,matchInternal:function(e,t){return w(N[e],t)},matchUrl:w,equalUrl:function(e,t,a){return a?e&&t&&Object(r.t)(e)===Object(r.t)(t):e&&t&&Object(r.u)(e)===Object(r.u)(t)},internalUrl:function(e,t,a,n){const i=N[e],s=i.includes("?")?"&":"?";return i+s+"path="+encodeURIComponent(Object(r.u)(t))+(a?"&title="+encodeURIComponent(a):"")+(n?"&query="+encodeURIComponent(n):"")}}},function(e,t,a){"use strict";(function(e){var n=a(243),i=a(32),s=a(42),r=a(445),o=a(36),l=a(293),c=a(692),u=a(13),m=a(11),d=a(6),h=a(12),p=a(16),b=a(17),g=a(2),N=a(10),f=a(1269),_=a(254),v=a(88),E=a.n(v),C=a(7),w=a(38),O=a(1),y=a(70),S=a(252),T=a(509),k=a(541),A=a(298),I=a(105),D=a(100),M=a(171),P=a(23);const{getLocalGoogleTasksCalendars:x}=s.a,L=new Set(E.a.tz.names());const j=()=>({title:Object(g.a)("Change External Event"),body:Object(g.a)("You’re changing an external event. Changes you make will only show locally and may be overwritten by changes from event organiser."),actions:[{title:Object(g.a)("Make change"),action:"confirm"}],cancelAction:{title:Object(g.a)("Cancel"),action:"cancel",default:!0}}),R=e=>{let t="",a="";switch(e){case"save":t=Object(g.a)("Change Recurring Event"),a=Object(g.a)("You’re changing a repeating event. Do you want to change this occurrence only, this and upcoming events or change all events from start?");break;case"trash":t=Object(g.a)("Delete Recurring Event"),a=Object(g.a)("You’re deleting a repeating event. Do you want to delete this occurrence only, this and upcoming events or delete all events from start?");break;case"move":t=Object(g.a)("Reschedule Recurring Event"),a=Object(g.a)("You’re rescheduling a repeating event. Do you want to change this occurrence only, this and upcoming events or reschedule all events from start by same amount?");break;case"copy":t=Object(g.a)("Copy Recurring Event"),a=Object(g.a)("You’re copying a repeating event. Do you want to copy this occurrence only, this and upcoming events or copy all events from start?")}return{title:t,body:a,actions:[{title:Object(g.a)("Only this Event"),action:"single",default:!0},{title:Object(g.a)("This and Upcoming"),action:"upcoming"},{title:Object(g.a)("All Events"),action:"all"}],cancelAction:{title:Object(g.a)("Cancel"),action:"cancel"}}};function B(e,t){const a={start:0,end:0},n=E()(t.start),i=t.end&&E()(t.end);return e.task?i?t.byDateOnly?(a.start=e.start?E()(e.start).year(n.year()).month(n.month()).date(n.date()).valueOf():t.start,a.due=e.due?E()(e.due).year(i.year()).month(i.month()).date(i.date()).valueOf():t.end):(a.start=t.start,a.due=t.end):(t.byDateOnly?a.due=e.due?E()(e.due).year(n.year()).month(n.month()).date(n.date()).valueOf():t.start:a.due=t.start,a.start=e.start&&e.due?a.due-(e.due-e.start):0):t.byDateOnly?(a.start=E()(e.start).year(n.year()).month(n.month()).date(n.date()).valueOf(),a.end=i?E()(e.due).year(i.year()).month(i.month()).date(i.date()).valueOf():e.end?a.start+e.end-e.start:0):(a.start=t.start,a.end=t.end||e.end?a.start+e.end-e.start:0),t.hasOwnProperty("allDay")&&(a.allDay=t.allDay),a}const F=new class{async loadAccounts(){return new Promise(e=>C.a.calendar.getAllAccounts(e))}async loadCalendars(){return new Promise(e=>C.a.calendar.getAll(e))}async loadEvents(){return new Promise(e=>{C.a.calendar.getAllEvents(t=>{e(F.transformVivaldiEvents(t))})})}async loadPromise(){if(!d.a.get(O.kMailIsTurnedOff)){const[e,t,a]=await Promise.all([F.loadAccounts(),F.loadEvents(),F.loadCalendars(),l.b.loadNotifications()]);h.a.dispatch({actionType:"CALENDAR_INIT",accounts:e,events:t,calendars:a}),F.loadAlarms()}}transformVivaldiEvents(e){return e.map(e=>{const{rrule:t,start:a=0,end:n,due:i,attachment:r,...o}=e;let l,c=0,u=0,m=0;if(e.timezone===w.i||e.allDay){const e=E.a.tz.guess()||"",t=E.a.tz.zone(e);t&&(c=t.utcOffset(a||0)*w.g,u=t.utcOffset(n||0)*w.g,m=t.utcOffset(i||0)*w.g)}else L.has(o.timezone)||(o.timezone=E.a.tz.guess());return t&&(l=Object(I.i)(t,a+c,e.timezone)),{...o,...Object(_.a)(l?{recurrence:l}:null),start:a?a+c:0,end:n?n+u:0,due:i?i+m:0,attachment:s.a.stringToAttachments(r)}})}loadAlarms(){N.a.alarms.getAll(e=>{h.a.dispatch({actionType:"CALENDAR_ALARMS_INIT",alarms:e})})}createException(e,t,a,n){return new Promise(i=>{C.a.calendar.createEventException(e,t,a,n,e=>i(F.transformVivaldiEvents([e])[0]))})}createEvent(e,t=!0){return new Promise((a,r)=>{const o=Object(D.g)(e),c=i.a.getCalendars().find(e=>e.id===o.calendarId);if(c&&c.hidden){const{id:e}=c;F.updateCalendar(e,{hidden:!1})}C.a.calendar.eventCreate(o,e=>{if(N.a.runtime.lastError)console.warn("vivaldi.calendar.create failed: %o",N.a.runtime.lastError),r("Error creating event");else{if(t&&s.a.isRemoteCalendar(e.calendarId)){const[t]=F.transformVivaldiEvents([e]);n.a.createEvent(t)}const i=F.transformVivaldiEvents([e])[0];i.notifications&&i.notifications.forEach(e=>{Object(l.a)(e,i)}),a(i)}})})}createEvents(e){return new Promise((t,a)=>{const n=e.map(e=>{const{recurrence:t,...a}=e;return{rrule:t?y.a.optionsToString({...t.origOptions,count:0===t.origOptions.count?1:t.origOptions.count}):"",...a}}).map(e=>Object(D.g)(e));C.a.calendar.eventsCreate(n,e=>{N.a.runtime.lastError&&(console.warn("vivaldi.calendar.create failed: %o",N.a.runtime.lastError),a(N.a.runtime.lastError)),t(e)})})}eventToCreateDetails(e){const{alarmId:t,id:a,recurrence:n,recurrenceExceptions:i,trash:r,trash_time:o,notifications:l,filteredOut:c,invites:u,attachment:m,recurrenceId:d,...h}=e,p={...h,attachment:s.a.attachmentsToString(m),is_template:!1};return n&&(p.rrule=y.a.optionsToString({...n.origOptions,count:0===n.origOptions.count?1:n.origOptions.count})),p.timezone=p.timezone||E.a.tz.guess(),p.notifications=null==l?void 0:l.map(e=>({name:e.name,when:e.when})),p.invites=null==u?void 0:u.map(e=>({address:e.address,name:e.name||"",partstat:e.partstat||"NEEDS-ACTION"})),p}async updateEvent(e,t,a=!1){function o(t){const a=parseInt(e.id.split(":")[1]);let n=0,i=e.recurrence;if(a!==e.start){var s;n=e.start-a;const t=Object(I.j)(null===(s=e.recurrence)||void 0===s?void 0:s.origOptions,n);i=t&&Object(I.a)({...t,...Object(_.a)(t.dtstart?{dtstart:new Date(Object(D.f)(t.dtstart).valueOf()+n)}:null)})}const r=t.start+n,o=r+e.end-e.start;return{...e,uid:t.uid,id:t.id,start:r,end:o,recurrence:i}}function u(e){const{id:t,trash_time:a,recurrenceExceptions:n,recurrence:i,notifications:r,invites:o,eventExceptions:l,filteredOut:c,attachment:u,recurrenceId:m,...d}=e;return d.rrule=i?i.toString():"",new Promise(e=>C.a.calendar.updateEvent(t,{...d,attachment:s.a.attachmentsToString(u)},t=>e(F.transformVivaldiEvents([t])[0])))}let m,d=Object(D.g)(e,!1);if(d.id=d.id.split("-")[0],s.a.isGeneratedRecurringEvent(e)){const i=d.id.split(":")[0],r=parseInt(d.id.split(":")[1]),l=s.a.getGeneratedSourceEvent(e);switch(t){case"single":if(s.a.getBaseEventIfException(d)){var h,p;const e=null==l?void 0:null===(h=l.recurrenceExceptions)||void 0===h?void 0:null===(p=h.find(e=>e.date===d.recurrenceId))||void 0===p?void 0:p.exception_event_id;if(!e)throw new Error("Could not find exception event id");d.id=e,d.recurrence=void 0,d.recurrenceExceptions=[],m=await u(d),d=l}else{const t=F.eventToCreateDetails({...e,calendarId:e.calendarId,start:e.start,sequence:0,recurrence:void 0});m=await F.createEvent(t,!1),d=await F.createException(i,m.id,!1,r)}m.recurrenceId=r;break;case"upcoming":if(!r||!l)throw new Error(`Invalid event id to update, ${d.id}`);const{recurrence:t}=l;if(!t)throw new Error(`No recurrence on event to update, ${d.id}`);const c=new Date(r),b=Object(I.b)(t,c);if(!b){d=o(l);break}const{origOptions:g}=t,f=e.start-r,_=d.recurrence&&Object(I.j)({...d.recurrence.origOptions},f),v=Object(I.a)({...g,until:b});let E,w;const O=g.count;if(O){const e=v.all().length;E=y.a.optionsToString({...g,count:e});const t=O-e;w=_&&Object(I.a)({..._,count:t,dtstart:c})}else E=y.a.optionsToString({...g,until:Object(D.j)(b)}),w=_&&Object(I.a)({..._,dtstart:c});const S=await new Promise(e=>{C.a.calendar.updateEvent(l.id,{rrule:E},t=>{if(N.a.runtime.lastError)throw new Error(N.a.runtime.lastError);e(F.transformVivaldiEvents([t])[0])})});return s.a.isRemoteCalendar(S.calendarId)&&a&&n.a.updateEvent(S),d.uid=s.a.generateGUID(),d.href="",d.etag="",d.trash||(d.recurrence=w,d=await F.createEvent(F.eventToCreateDetails(d))),d;case"all":default:if(!l)throw new Error(`Source event for ${e.id} not found`);d=o(l)}}(d.timezone===w.i||d.allDay)&&(d.start&&(d.start=Object(D.j)(new Date(d.start)).valueOf()),d.end&&(d.end=Object(D.j)(new Date(d.end)).valueOf()),d.end_recurring&&(d.end_recurring=Object(D.j)(new Date(d.end_recurring)).valueOf()),d.due&&(d.due=Object(D.j)(new Date(d.due)).valueOf()));const b=i.a.getEvents(),g=s.a.isOwnEvent(d),f=s.a.shouldIncrementSequence(d,b);if(g&&f){const{sequence:e}=d;if(d.sequence=e?e+1:1,!d.trash){const e=b.find(e=>e.id===d.id);!function(e,t,a,n=!1){if(!(t.invites&&0!==t.invites.length||a&&a.invites&&0!==a.invites.length))return;if(!t.invites||!e)throw new Error("Missing invites from draft or invalid event Id");const i=(null==a?void 0:a.invites)?a.invites:[],o=Object(k.a)(t.invites,i,"address"),l=Object(k.a)(i,t.invites,"address"),c=Object(k.a)(i,l,"address");if(o.forEach(t=>{C.a.calendar.createInvite({event_id:e,name:t.name||"",address:t.address,partstat:t.partstat})}),c.forEach(e=>{const a=t.invites&&t.invites.find(t=>t.address===e.address);a&&C.a.calendar.updateInvite({id:e.id,name:a.name,partstat:a.partstat})}),l.forEach(e=>C.a.calendar.deleteInvite(e.id)),s.a.isOwnEvent(t)){const e=[];o.length&&e.push(["create",o]),n&&c.length&&e.push(["update",c]),l.length&&e.push(["cancel",l]),r.a.sendAttendeeMails(t,e)}}(d.id,d,e,!0)}}return d.trash||function(e,t){const a=t.notifications||[];if(!e)throw new Error("Can not save event notifications, invalid event Id.");const[n,i]=Object(T.a)(a,e=>!e.id),s=c.a.getState().notifications.filter(e=>e.event_id===t.id),[r,o]=Object(T.a)(i,e=>s.some(t=>t.id===e.id));n.filter(e=>!s.some(t=>e.when===t.when)).forEach(a=>{l.b.createNotification({event_id:e,when:a.when,period:a.period||0,delay:a.delay||0,name:a.name||"",description:a.description||""},t)}),r.forEach(e=>{l.b.updateNotification(e,t)}),o.forEach(e=>{l.b.deleteNotification(e)})}(d.id,d),s.a.isRemoteCalendar(d.calendarId)&&a&&n.a.updateEvent(d,m),u(d)}selectEvent(e,t){h.a.dispatch({actionType:"CALENDAR_EVENT_SELECT",editor:e,options:t})}addEventCommand(e){e.task||e.start||(e.start=Object(D.e)(Date.now()));const t={pageId:i.a.getDialogResourceKey(),uid:Symbol("AddEventDialog")};F.editEvent(t,null,e),h.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_EDIT_EVENT",options:{editor:t}})}addCalendarCommand(){h.a.dispatch({actionType:p.a.MAIN_SHOW_CREATE_CALENDAR_DIALOG})}editEvent(e,t,a){let n;if(!t){const{start:t,end:l,task:c=!1,allDay:u=!1,title:m=""}=a||{},{calendarFilter:h}=i.a.getCalendarState(e.pageId),p=E()();let b=0,g=0;if(!c){const e=h.selectedDate.clone().hour(p.hour()).minute(p.minute()).valueOf();b=t?u?E()(t).startOf("day").valueOf():t:u?E()(e).startOf("day").valueOf():e,g=l?u?E()(l).startOf("day").add(1,"day").valueOf():l:u?E()(b).add(1,"day").valueOf():b+d.a.get(O.kCalendarDefaultDuration)}const N=d.a.get(O.kCalendarDefaultNotification);let f;-1!==N&&(f=[{id:"",name:"",when:N*w.g}]);let _=i.a.getDefaultCalendarId();const v=i.a.getCalendars(),C=v.find(e=>e.id===_),y=i.a.getAccounts().find(e=>e.id===(null==C?void 0:C.accountId));var r;if("google"===(null==y?void 0:y.account_type))if(c&&!(null==C?void 0:null===(r=C.supportedCalendarComponent)||void 0===r?void 0:r.vtodo)){const e=x(y);e.length>0&&(_=e[0].id)}else{var o;if(!(null==C?void 0:null===(o=C.supportedCalendarComponent)||void 0===o?void 0:o.vevent)){const e=v.find(e=>{var t;return e.accountId===y.id&&(null===(t=e.supportedCalendarComponent)||void 0===t?void 0:t.vevent)});e&&(_=e.id)}}n={...a,title:m,calendarId:_,uid:s.a.generateGUID(),id:"",start:b,end:g,allDay:u,task:c,notifications:f}}const l=i.a.getEditState();if(l.eventDraft){"cancel"===d.a.get(O.kCalendarClickOutside)?this.cancelEventEdit(l.editor):this.saveEventEdit(l.editor,t||n)}h.a.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:t?Object(A.a)(t):n})}async pollAllCalDAVAccounts(e){const t=i.a.getAccounts().filter(e=>e.url).map(e=>e.id),a={didPoll:!1,calendars:[],message:"",error:!1};if(0===t.length)return a;const n=i.a.getCalendars().filter(e=>t.some(t=>t===e.accountId)).filter(e=>e.active).map(e=>e.lastChecked).filter(Boolean).reduce((e,t)=>t>e?t:e,0)+6e4<=Date.now();return e&&!n?a:await F.pollCalDAVAccounts(t)}async pollCalDAVAccounts(e){return await n.a.pollCalDAV(e)}updateEventEdit(e,t){const{eventDraft:a}=i.a.getEditState();if(a&&a.task!==t.task)if(t.task)t.start=0,t.allDay?t.due=a.end-w.c:t.due=a.end;else if(a.due)t.end=a.due,t.start=a.start?a.start:a.due-d.a.get(O.kCalendarDefaultDuration);else{const e=Object(D.e)(Date.now());t.start=e,t.end=e+d.a.get(O.kCalendarDefaultDuration)}if(a&&a.allDay!==t.allDay&&(t.allDay?t.end&&(t.end=t.end+w.c):(t.end&&(t.end=t.end-w.c),t.timezone===w.i&&(t.timezone=""))),!t.organizer&&t.invites&&t.invites.length){const{invites:e}=t,a=i.a.getCalendars().find(e=>e.id===t.calendarId);if(a){const n=i.a.getAccountForCalendar(a.id),s=n&&"google"===n.account_type?n.username:d.a.get(O.kCalendarMailAccount);t.organizer=s,e.find(e=>e.address===s)||e.push({id:"",event_id:t.id,address:s,partstat:"ACCEPTED"})}}const{calendarId:n,task:r}=t,o=i.a.getAccountForCalendar(n);if("google"===(null==o?void 0:o.account_type)&&r&&a&&!a.task){const e=s.a.getLocalGoogleTasksCalendars(o);e.length&&(t.calendarId=e[0].id,t.allDay=!0,t.timezone=w.i)}h.a.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:t})}cancelEventEdit(e){h.a.dispatch({actionType:"CALENDAR_EVENT_EDIT",editor:e,eventDraft:null})}async saveEventEdit(e,t){const{eventDraft:a,editor:n,events:l}=i.a.getCalendarState(e.pageId);if(!a||n.pageId!==e.pageId||n.uid!==e.uid)return!1;if(!s.a.doesCalendarsExistsAndShowWarning())return!1;if(!a.calendarId){const e=i.a.getDefaultCalendarId();a.calendarId=e}a.id=a.id.split("-")[0];const c=l.find(e=>e.id===a.id),u=s.a.shouldSaveEvent(a,c);if("IGNORE"===u)return F.cancelEventEdit(e),!0;if("DELETE"===u)return await F.trashEvent(e,a.id);if(a.id){if("SAVE_INVITED"!==u&&!s.a.isOwnEvent(a)){const{action:e}=await o.a.showCalendarModal({modal:j()});if("cancel"===e)return!0}let n="all";if(c&&s.a.isRecurringEvent(c)){const{action:e}=await o.a.showCalendarModal({modal:R("save")});n=e}"all"!==n&&"upcoming"!==n&&"single"!==n||F.updateEvent(a,n,!0),F.cancelEventEdit(e),t&&F.editEvent(e,t)}else{var m;const t=await F.createEvent(F.eventToCreateDetails({...a,title:a.title||""}));(null==t?void 0:null===(m=t.invites)||void 0===m?void 0:m.length)&&r.a.sendAttendeeMails(t,[["create",t.invites]]),F.selectEvent(e,{event:t,publish:!1})}return!0}async moveEvent(e,t,a){const n=i.a.getEvent(t);if(!n)return;if(!s.a.isOwnEvent(n)){const{action:e}=await o.a.showCalendarModal({modal:j()});if("cancel"===e)return n}const r=B(n,a);!1===a.allDay&&n.allDay&&n.end-n.start===w.c&&(r.end=r.start+d.a.get(O.kCalendarDefaultDuration));const l={...n,...r};if(!s.a.isRecurringEvent(n))return F.cancelEventEdit(e),F.updateEvent(l,void 0,!0);{const{action:e}=await o.a.showCalendarModal({modal:R("move")});if("all"===e||"upcoming"===e||"single"===e)return F.updateEvent(l,e,!0)}}async copyEvent(e,t,a){const n=i.a.getEvent(t);if(n){let e="";const t=B(n,a),i={...n,...t,uid:s.a.generateGUID(),etag:"",href:""},{recurrence:l}=n;if(l){if(e=await o.a.showCalendarModal({modal:R("copy")}),"cancel"===e)return;if("single"===e)i.recurrence=void 0;else{const t=a.start-n.start,s=Object(I.j)(l.origOptions,t);if("upcoming"===e){s.dtstart=new Date(i.start);const e=l.origOptions.count;if(e){let t=0;const a=Object(D.j)(new Date(n.start));l.all((e,n)=>!(e>=a)||(t=n,!1)),s.count=e-t}}else if("all"===e&&l.origOptions.dtstart){var r;s.dtstart=Object(D.f)(new Date(l.origOptions.dtstart.valueOf()+t)),i.start=(null===(r=s.dtstart)||void 0===r?void 0:r.valueOf())||0,i.end=i.start+n.end-n.start}l.origOptions.until&&(s.until=Object(D.f)(new Date(l.origOptions.until.valueOf()+t))),i.recurrence=Object(I.a)(s)}}return F.createEvent(F.eventToCreateDetails(i))}}async trashEvent(e,t){function a(a){var o;const l=t.split(":")[0];i.a.getEventsPerCalendar(a.calendarId).forEach(e=>{e.recurrenceExceptions&&e.recurrenceExceptions.forEach(e=>{const{exception_event_id:t,parent_event_id:a}=e;t&&l===a&&F.deleteEvent(t)})}),F.updateEvent({...a,trash:!0},"all"),F.cancelEventEdit(e),s.a.isRemoteCalendar(a.calendarId)&&n.a.deleteEvent(l),(null===(o=a.invites)||void 0===o?void 0:o.length)&&s.a.isOwnEvent(a)&&r.a.sendAttendeeMails(a,[["cancel",a.invites]])}if(t){const[c,u]=t.split("-")[0].split(":"),m=parseInt(u),d=i.a.getEvent(c);if(!d)return!1;if(s.a.isRecurringEvent(d)){const{action:t}=await o.a.showCalendarModal({modal:R("trash")});switch(t){case"single":F.createException(c,"0",!0,m).then(t=>{var a;if(s.a.isRemoteCalendar(t.calendarId)&&(t.sequence=parseInt(t.sequence)+1,n.a.updateEvent(t)),F.cancelEventEdit(e),null===(a=d.invites)||void 0===a?void 0:a.length){const{recurrence:e,...t}=d;r.a.sendAttendeeMails(t,[["cancel",d.invites]],!0)}});break;case"upcoming":{var l;const{recurrence:t}=d;if(!t||!d.start)return!1;const n=Object(I.b)(t,new Date(m));if(!n){a(d);break}const{count:i,...s}=t.origOptions,o=Object(I.a)({...s,until:n});if(C.a.calendar.updateEvent(c,{rrule:o.toString()}),F.cancelEventEdit(e),null===(l=d.invites)||void 0===l?void 0:l.length){const e={...d,recurrence:o};r.a.sendAttendeeMails(e,[["update",d.invites]])}break}case"all":a(d)}}else a(d)}else F.cancelEventEdit(e);return!0}restoreEvent(e,t){if(t||(t=i.a.getCalendarState(e.pageId).trashedEvents.slice(-1)[0]),t){var a;const{id:e,calendarId:i,title:o,start:l,end:c}=t;F.updateEvent({id:e,calendarId:i,title:o,start:l,end:c,trash:!1}),(null===(a=t.invites)||void 0===a?void 0:a.length)&&r.a.sendAttendeeMails(t,[["create",t.invites]]),s.a.isRemoteCalendar(i)&&n.a.createEvent(t)}}cancelEventChange(e){const t=i.a.getEditState();if(!t||!t.eventDraft)return;const a=i.a.getPendingEvent();F.cancelEventEdit(e),a&&F.editEvent(e,a)}createAccount(e){return new Promise((t,a)=>{C.a.calendar.createAccount(e,e=>{if(N.a.runtime.lastError)return console.warn("create account %o",N.a.runtime.lastError),a(N.a.runtime.lastError);t(e)})})}updateAccount(e){const{id:t,...a}=e;C.a.calendar.updateAccount(t,a,e=>{N.a.runtime.lastError&&console.warn("update account %o",N.a.runtime.lastError)})}async updateCalendar(e,t,a=!0){const i=async(e,t)=>new Promise(a=>{C.a.calendar.update(e,t,e=>{N.a.runtime.lastError&&console.warn("update calendar %o",N.a.runtime.lastError),a(e)})});return s.a.isRemoteCalendar(e)&&a?(await n.a.updateCalendar(e,t),await i(e,t)):await i(e,t)}toggleCalendarVisibility(e){const t=i.a.getCalendars().find(t=>t.id===e);t&&this.updateCalendar(e,{hidden:!t.hidden})}setDefaultCalendarId(e){i.a.getCalendars().find(t=>t.id===e)&&(m.a.set(O.kCalendarDefaultCalendarId,e),h.a.dispatch({actionType:"CALENDAR_SET_DEFAULT"}))}setDefaultAccountId(e){i.a.getAccounts().find(t=>t.id===e)&&(m.a.set(O.kCalendarDefaultAccountId,e),h.a.dispatch({actionType:"CALENDAR_SET_DEFAULT"}))}async createCalendar(e,t=!1){const a=i.a.getAccounts().find(t=>t.id===e.accountId),s=!!(e&&a&&a.url);if(a&&t&&s){const{status:t,message:i,name:s,ctag:r}=await n.a.createCalendar(a,e);if(!t)return{result:{status:t,message:i}};e.name=s,e.ctag=r||""}try{const t=await C.a.calendar.create(e);return{result:{status:!0,message:Object(g.a)("Success")},calendar:t}}catch(a){console.warn("createCalendar ",a);const s=i.a.getAccounts().find(t=>t.id===e.accountId),r=!(!s||!s.url);return t&&s&&r&&await n.a.deleteCalendar(s,e.name),{result:{status:!1,message:a}}}}deleteAccount(e){return new Promise((t,a)=>{C.a.calendar.deleteAccount(e,e=>{if(N.a.runtime.lastError)return console.warn("Delete calendar account %o",N.a.runtime.lastError),a(!1);t(e)})})}async deleteCalendar(e,t=!1){const a=i.a.getAccounts().find(t=>t.id===e.accountId),s=!(!a||!a.url);t&&a&&s&&await n.a.deleteCalendar(a,e.name);try{return{status:await C.a.calendar.delete(e.id),message:""}}catch(e){return console.warn("deleteCalendar ",e),{status:!1,message:e}}}deleteEvent(e){const t=e.split("-")[0].split(":")[0],{notifications:a}=c.a.getState();return a.filter(e=>e.event_id===t).forEach(e=>{l.b.deleteNotification(e)}),new Promise((e,a)=>{C.a.calendar.deleteEvent(t,()=>{N.a.runtime.lastError&&(console.warn("vivaldi.calendar.delete failed: %o",N.a.runtime.lastError),a(N.a.runtime.lastError)),e()})})}updateCalendarUI(e,t){const{displayMode:a}=t,{calendarFilter:n}=i.a.getCalendarState(e);if(a&&a!==n.displayMode){const n=e===i.a.getPanelResourceKey()?O.kCalendarPanelDisplayMode:O.kCalendarDisplayMode;m.a.set(n,a);const{calendarFilter:r}=i.a.getCalendarState(e),{anchorDate:o,selectedDate:l}=r;s.a.getDisplayRange(o,a).contains(l)||(t.merge?t=t.merge({anchorDate:l.clone(),selectedDate:l}):(t.anchorDate=l.clone(),t.selectedDate=l))}h.a.dispatch({actionType:"CALENDAR_UPDATE_UI",calendarUI:t,pageId:e})}selectDate(e,t,a=!1){const{calendarFilter:n}=i.a.getCalendarState(e),{anchorDate:r,displayMode:o}=n;let l;l=s.a.getDisplayRange(r,o).contains(t)?{selectedDate:t,allDaySelected:a}:{anchorDate:t,selectedDate:t,allDaySelected:a},F.updateCalendarUI(e,n.merge(l))}_shiftView(e,t,a){const{calendarFilter:n}=i.a.getCalendarState(e),{anchorDate:r,displayMode:o,selectedDate:l}=n;let c;switch(o){case"agenda":case"multiweek":c="week";break;default:c=o}const u="previous"===t?r.clone().subtract(1,c):r.clone().add(1,c);let m;if(a&&s.a.getDisplayRange(u,o).contains(a))m=a.clone();else if("month"===o){const e=s.a.getDisplayRange(u,o),t=Object(D.h)(l,r);m=Object(D.i)(t,l.weekday(),u,!1),m.isAfter(e.end,"day")&&(m=Object(D.d)(l.weekday(),u,!0))}else m="previous"===t?l.clone().subtract(1,c):l.clone().add(1,c);this.updateCalendarUI(e,{anchorDate:u,selectedDate:m})}viewPreviousPeriod(e,t){this._shiftView(e,"previous",t)}viewNextPeriod(e,t){this._shiftView(e,"next",t)}startParseForImport(e){Object(S.g)(e)}loadFileEntry(e){Object(S.d)(e)}clearImportCache(){Object(S.a)(),h.a.dispatch({actionType:"VIVALDI_CALENDAR_CLEAR_IMPORT_STATUS"})}setEventsToImportCount(e){h.a.dispatch({actionType:"CALENDAR_TO_IMPORT_COUNT",eventsToImportCount:e})}setImportedEventsCount(e){h.a.dispatch({actionType:"CALENDAR_SET_IMPORTED_COUNT",importedEventsCount:e})}setImportEventState(e){h.a.dispatch({actionType:"CALENDAR_SET_IMPORT_STATE",importEventState:e})}init(){d.a.addListener(O.kMailIsTurnedOff,U),F.startAPIChangeListeners(!0),n.a.calendarServicerStart()}startListeners(){F.startAPIChangeListeners(),n.a.calendarServicerStart()}stopListeners(){F.stopAPIChangeListeners(),n.a.calendarStop()}eventCreated(e){if(F.loadPromise(),!b.a.isActive())return;const t=u.c.unsafeGetActivePage();P.p.getDisplayUrl(t.url).startsWith("vivaldi://calendar")||Object(M.a)({title:Object(g.a)("New Event Created"),onClick:()=>{o.a.showCalendar(e.start)}})}startAPIChangeListeners(t=!1){d.a.get(O.kMailIsTurnedOff)||(C.a.calendar.onEventCreated.addListener(this.eventCreated),Object.keys(H).forEach(e=>C.a.calendar[e].addListener(F.loadPromise)),t?e.nextTick(()=>F.loadPromise()):F.loadPromise(),l.b.startAPIChangeListeners())}stopAPIChangeListeners(){C.a.calendar.onEventCreated.removeListener(this.eventCreated),Object.keys(H).forEach(e=>C.a.calendar[e].removeListener(F.loadPromise))}exportEvents(e){Object(f.a)(e)}};function U(e,t,a){a===O.kMailIsTurnedOff&&(t?F.stopAPIChangeListeners():F.startAPIChangeListeners())}const H={onCalendarDataChanged:p.a.CALENDAR_DATA_CHANGED,onEventRemoved:p.a.CALENDAR_EVENT_DELETED,onEventChanged:p.a.CALENDAR_EVENT_CHANGED,onCalendarChanged:p.a.CALENDAR_CHANGED,onCalendarCreated:p.a.CALENDAR_CREATED,onCalendarRemoved:p.a.CALENDAR_DELETED};t.a=F}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0);HTMLElement;const i=Object(n.createContext)(window);t.a=i},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(57),i=a.n(n),s=a(51),r=a(12),o=a(16),l=a(2),c=a(351),u=a(23);const m="0",d="1",h="2",p=d;let b=!1,g={id:d,children:[],nickname:"",title:"",partner:"",description:"",trash:!1,thumbnail:"",bookmarkbar:!1,speeddial:!1,url:""};const N=(new Map).set(g.id,g),f=new Map;let _=g,v=[],E={},C=[],w=[],O=!1,y=!1,S=!1;const T=new i.a;function k(e,t){const{url:a,title:n,description:i,nickname:s}=e;return t.toLowerCase().split(" ").every(e=>a!==c.a&&(null==a?void 0:a.toLowerCase().includes(e))||n.toLowerCase().includes(e)||i.toLowerCase().includes(e)||s.toLowerCase().includes(e))}const A=new class{hasBeenInitialized(){return b}getRootNode(){return g}getRootId(){return g.id}getTopNodes(){return g.children}getLastTopNode(){const e=this.getTopNodes();if(e.length>1)return e[e.length-2]}getBookmarkBarFolderId(){return _.id}getBookmarksBarNodes(){return v}getSpeeddialFolders(){return C}isFailedUpgrade(){return S}getItemById(e){return N.get(e)}getUrlByNode(e){return e.url&&A.filterUrl(e.url)||""}filterUrl(e){return e===c.a?"":e}getDragData(e,t){const a=t.map(e=>A.getItemById(e));if("text/plain"===e){const e=[];return a.forEach(t=>{const a=this.isFolder(t)?t&&t.title:t&&u.p.getHoverUrl(A.getUrlByNode(t));a&&e.push(a)}),e.join("\r\n")}if("text/html"===e){const e=a&&1===a.length?a[0]:void 0;if(e){const t=u.p.getHoverUrl(A.getUrlByNode(e));if(t&&e.title)return"<a href="+t+">"+e.title+"</a>"}return""}if("vivaldi/x-title"===e)return a[0]&&a[0].title||"";if("text/uri-list"===e){const e=[];return a.forEach(t=>{this.isFolder(t)||t&&e.push(u.p.getHoverUrl(A.getUrlByNode(t)))}),e.join("\r\n")}return""}getCutIds(){return w}getFilteredTree(e,t){e=e.toLowerCase();const a=[];function n(i){const s=[];for(const o of i){var r;if(t.inTrash||!o.trash){if(null===(r=o.children)||void 0===r?void 0:r.length){const e=n(o.children);if(e.length&&t.folders){s.push({...o,children:e});continue}}if(k(o,e)){const e={...o};o.children&&t.folders&&a.push(o.id),e.children&&t.folders&&s.push({...e,children:n(e.children)}),!e.children&&t.bookmarks&&s.push(e)}}}return s}return{nodes:t.root?n([this.getRootNode()]):n(this.getTopNodes()),collapsed:a}}getFilteredFlat(e,t){e=e.toLowerCase();const a=[],n=A.iterateTrees(A.getTopNodes(),t.inTrash);for(const i of n)(i.children&&t.folders||!i.children&&t.bookmarks)&&k(i,e)&&(i.children?a.push({...i,children:[],isExpanded:!1}):a.push({...i}));return a}treeSortComparator(e,t,a){if(e.trash)return 1;if(t.trash)return-1;if(A.isFolder(e)&&!A.isFolder(t))return-1;if(A.isFolder(t)&&!A.isFolder(e))return 1;const{sortOrder:n}=a;let{sortField:i}=a;return e[i]||t[i]||(i="title",e[i]||t[i]||(i="dateAdded")),s.a.getDefaultComparator(n,i)(e,t)}getFoldersWithin(e,t){return e.filter(e=>!e.trash&&e.children&&!e.url).reduce((e,{id:a,title:n,children:i})=>(e.push({id:a,title:n,level:t}),i?e.concat(this.getFoldersWithin(i,t+1)):e),[])}hasNickname(e){if(""===e.trim())return!1;e=e.toLowerCase();for(const t of A.iterateTree())if(e===t.nickname.toLowerCase())return!0;return!1}getNicknamed(e,t=!0){if("string"!=typeof e||e.length<1)return[];e=e.toLowerCase();const a=[];for(const n of A.iterateTree())e===n.nickname.toLowerCase()&&(n.children&&t?n.children.forEach(e=>!e.children&&a.push(e)):a.push(n));return a}getDefaultFolderName(){return Object(l.a)("title","New Folder")}isTrashed(e){return this.isDescendantOf(e,E.id)}isDescendantOf(e,t){for(;;){if(e.id===t)return!0;if(!e.parentId)break;e=N.get(e.parentId)}return!1}isFolder(e){return!!e&&(e.children&&e.children.length>0||void 0===e.url)}isPartner(e){return Boolean(e.partner)}isSeparator(e){return"---"===e.title&&"separator"===e.description}sanitizeForUpdate(e){let t;return t=A.isSeparator(e)?{...e,description:""}:{...e},delete t.id,t}validateAsBookmarkBarFolder(e){const t=A.getItemById(e);if(t&&t.children&&!A.isTrashed(t))return t}validateForClipboard(e){return e.filter(e=>e!==E.id)}validateForDrag(e){return e.filter(e=>e!==E.id)}validateForDeletion(e){return e.filter(e=>e!==E.id)}validateForEdit(e){if(-1!==[m,d,h,E.id].indexOf(e))return!1;const t=A.getItemById(e);return!(!t||A.isSeparator(t))}getTitle(e){const t=A.getItemById(e);return t?t.title:""}*iterateTree(){yield*A.iterateTrees(g.children)}*iterateTrees(e,t){for(const a of e)a.trash&&!t||(yield a,a.children&&(yield*A.iterateTrees(a.children,t)))}findByUrl(e){for(const t of A.iterateTree())if(t.url===e)return t}isReady(){return b}emitChange(){O?y=!0:T.emit(o.a.CHANGED)}addChangeListener(e){T.on(o.a.CHANGED,e)}removeChangeListener(e){T.off(o.a.CHANGED,e)}__reset({bookmarks:e}){g=e}};function I(e){if(e.partner){const t=f.get(e.partner);if(t)switch(t){case"Bookmarks":e.title=Object(l.a)("Bookmarks");break;case"Speed Dial":e.title=Object(l.a)("Speed Dial");break;case"Vivaldi":e.title=Object(l.a)("Vivaldi")}}if(N.set(e.id,e),e.children)for(const t of e.children)I(t)}function D(){const e={speeddial:[],bookmarkbar:g},t=function(a){a.url||(a.speeddial&&e.speeddial.push(a),a.bookmarkbar&&(e.bookmarkbar=a),a.children&&!a.trash&&a.children.forEach(t))};t(g),C=e.speeddial,_=e.bookmarkbar,v=(_.children||[]).filter(e=>!e.trash)}function M(e){const t=N.get(e.parentId);void 0===e.url&&(e.children||(e.isExpanded=!1,e.children=[])),I(e),t.children.splice(e.index,0,e),x(t);L(t,!1,Boolean(e.speeddial)),A.emitChange()}function P(e,t){const a=N.get(e);if(!a)return;!function e(t){if(N.delete(t.id),t.children)for(const a of t.children)e(a)}(a);const n=N.get(a.parentId);n.children.splice(a.index,1),0===n.children.length&&(n.isExpanded=!1),x(n),L(n,A.getBookmarkBarFolderId()===e,Boolean(a.speeddial)),t&&A.emitChange()}function x(e){e&&e.children&&e.children.forEach((e,t)=>{e.index=t,e.treeIndex=t})}function L(e,t,a){if(e)for(;e.children=e.children.slice(),A.getBookmarkBarFolderId()===e.id&&(t=!0),e.speeddial&&(a=!0),e.parentId;)e=N.get(e.parentId);(t||a)&&D()}r.a.register(e=>{switch(e.actionType){case"BOOKMARKS_INIT":!function(e,t,a){b=!0;const n=e[0];if(g=n.children[0],g.parentId=void 0,E=n.children.find(e=>Boolean(e.trash)),E.parentId=g.id,E.index=g.children.length,g.children.push(E),f.clear(),Array.isArray(a.folders))for(const e of a.folders)f.set(e.guid,e.title);N.clear(),I(g),D(),S=t}(e.bookmarks,e.upgraded,e.partnerDB),A.emitChange();break;case"BOOKMARKS_SET_BATCH_MODE":e.edit?O=!0:(O=!1,y&&(A.emitChange(),y=!1));break;case"BOOKMARKS_ADD_ITEM":M(e.changes);break;case"BOOKMARKS_CHANGE_ITEM":!function(e,t){let a=N.get(e);if(!a)return;let n=!1;for(const e of Object.keys(t))if(t[e]!==a[e]){n=!0;break}if(!n)return;const i=a.bookmarkbar||t.bookmarkbar!==a.bookmarkbar,s=a.speeddial||t.speeddial!==a.speeddial;if(t.favicon){const{favicon:e,...n}=t;n.faviconUrl=(a.url||"")+"/?"+Math.random(),t=n}a={...a,...t},N.set(a.id,a);let r=null;a.parentId?(r=N.get(a.parentId),r.children[a.index]=a):g=a,L(r,i,s),A.emitChange()}(e.id,e.changes);break;case"BOOKMARKS_MOVE_ITEM":!function(e,t){const a=A.getItemById(e);a&&(P(e,!1),a.parentId=t.parentId,a.index=t.index,M(a))}(e.id,e.changes);break;case"BOOKMARKS_REMOVE_ITEM":P(e.id,!0);break;case"BOOKMARKS_SET_CUT_IDS":w=e.ids,A.emitChange();break;default:return}}),t.b=A;const{isTrashed:j}=A},function(e,t,a){"use strict";(function(e){var n=a(276),i=a(57),s=a.n(i),r=a(47),o=a(282),l=a(56),c=a(6),u=a(12),m=a(16),d=a(264),h=a.n(d),p=a(49),b=a(34),g=a(172),N=a(104),f=a(207),_=a(156),v=a(539),E=a(3),C=a(758),w=a(192),O=a(1),y=a(402);let S,T,k,A=[],I="",D=!1,M=[],P={},x=!1,L=!1;function j(e,t){e.forEach(e=>{const{accountId:a,path:n,counter:i}=e;if(P[a]||(P[a]={}),t&&P[a][n]){const e=P[a][n];e.total+=i.total,e.unseen+=i.unseen,e.unread+=i.unread}else P[a][n]=i})}function R(e=!1){if(e){const e=c.a.get(O.kMailSearchThreading);M.forEach(t=>{const{searchListId:a,sentDate:n,threadKey:i}=t,s={id:a,sentDate:n,threadKey:i};t.id=Object(w.c)(s,e),Object(C.a)(t)})}const t=H.getComparator();M.sort(t),F(),H.emitChange({target:"listEntries",updateSelection:!0})}function B(e,t,a){const n=new Set(e);a.forEach(e=>{if(!n.has(e.totalViewId))return;const{viewIntersections:a,counter:i}=e;a.total.every(e=>n.has(e))&&(i.total+=t),a.unseen.every(e=>n.has(e))&&(i.unseen+=t),a.unread.every(e=>n.has(e))&&(i.unread+=t)})}function F(e=!1){N.a.log("initListEntries start - isSubSet:",e),A=(e?A:M).filter(e=>H.isVisible(e)),x=!1,N.a.log("initListEntries end")}function U(){I="",S=void 0,D=!1,F(),H.emitChange({target:"listEntries"})}const H=new class extends s.a{getByAccountId(e){return p.a.getByAccountId(e)}getByFolder(e,t=E.m){if(e)return p.a.getByFolderId([e,t])}get(e){return p.a.get(e)}getByIds(e){return p.a.getByIds(e)}getByFolderId(e){return p.a.getByFolderId(e)}getSourceFilters(e){const t=M.find(t=>t.searchListId===e);if(t){const{sourceFilterIds:e}=t;return p.a.getByIds(e)}return[]}isLoading(){return x}isInitialized(){return L}filterExists(e,t){return!!p.a.getByFolderId([e,t])}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}getKnownFlags(){const e=this.getByAccountId(E.E).map(e=>e.path),t=Object.keys(E.O).map(e=>E.O[e]);return e.concat(t)}isSenderMailingList(e){const t=E.fb+"/",a=E.t+"/";return void 0!==p.a.getAll().find(n=>n.accountId===E.F&&(n.path===t+e||n.path===a+e))}isCounterFolder(e){const t=H.get(e);return t&&![E.i,E.ub].includes(t.accountId)}getCounters(e,t=E.m){return P[e]&&P[e][t]}getCounterFolders(e){const t=e.filter(e=>{const t=e%E.Z,a=Math.floor(e/E.Z);if(!H.isCounterFolder(a))return!1;const n=H.get(a),{showRead:i,showMailingLists:s,showFeeds:r,showJunk:o,showCustomFolder:l}=b.b.getFilterOptions(n);switch(t){case E.ab:return i&&s&&r;case E.cb:return!0;case E.bb:return!i;case E.X:return!s;case E.Y:return!r;case E.W:return!o;case E.U:return!l;default:return!1}});if(0===t.length)return[];const a=[];return t.forEach(e=>{const t=Math.floor(e/E.Z),n=H.get(t);if(!n)return;if(a.some(e=>e.accountId===n.accountId&&e.path===n.path))return;const i={accountId:n.accountId,path:n.path,totalViewId:0,viewIntersections:{total:[],unseen:[],unread:[]},counter:{total:0,unseen:0,unread:0}},{showDeleted:s,showMailingLists:r,showFeeds:o,showJunk:l,showCustomFolder:c}=b.b.getFilterOptions(n),u=t*E.Z+E.ab,m=t*E.Z+E.cb,d=t*E.Z+E.bb,h=r?0:t*E.Z+E.X,p=s?0:t*E.Z+E.V,g=o?0:t*E.Z+E.Y,N=l?0:t*E.Z+E.W,f=c?0:t*E.Z+E.U;i.totalViewId=u;const{viewIntersections:_}=i;if(h||p||g||N||f){const e=[];h&&e.push(h),p&&e.push(p),g&&e.push(g),N&&e.push(N),f&&e.push(f),_.total=e,_.unseen=[m].concat(e),_.unread=[d].concat(e)}else _.total=[u],_.unseen=[m],_.unread=[d];a.push(i)}),a}getIndex(){return M}getIndexIds(){return M.map(e=>e.searchListId)}getListEntry(e){const t=this.getComparator(),a=h()(M,{id:e},t);return M[a]}getListEntryBySearchListId(e){return M.find(t=>t.searchListId===e)}getListEntryByUniqueKey(e){const t=c.a.get(O.kMailSearchThreading),a=Object(w.c)(e,t);let n=this.getListEntry(a);return void 0===n&&(console.warn("Entry not found in index, fallback to linear search "+e.id),n=this.getListEntryBySearchListId(e.id)),n}matchesViewIntersection(e,t){return Array.isArray(t)&&t.every(t=>e.includes(t))}getComparator(){return c.a.get(O.kMailSearchAscending)?y.b:Object(y.c)(y.b)}isVisible(e){if(D||void 0!==k);else if(!H.matchesViewIntersection(e.viewIds,T))return!1;return(!k||!k.some((t,a)=>t!==e.threadKey[a]))&&!(S&&h()(S,e,y.d)<0)}hasNoListEntries(){return 0===A.length}createListEntry(e,t,a){const{id:n,messageId:i,attachment:s,flags:r,replied:o,sentDate:l,subject:c,threadKey:u,unseen:m,queued:d,sourceFilterIds:h,sources:p}=e,b=e.to.map(e=>f.a.add(e)),g=e.from.map(e=>f.a.add(e));return{id:Object(w.c)(e,a),searchListId:n,messageId:i,attachment:s,flags:r,replied:o,sentDate:l,subject:c,threadKey:u,unseen:m,queued:d,viewIds:t,sourceFilterIds:h,sources:p,toIds:b,fromIds:g}}getListEntries(){return A}getQueryNumFound(){var e;return null===(e=S)||void 0===e?void 0:e.length}getListEntriesByFolder(e,t){const a=this.getByFolder(e,t);if(!a)throw new Error("Filter not found "+[e,t].join());const n=b.b.getViewIntersection(a);return M.filter(e=>this.matchesViewIntersection(e.viewIds,n))}getListEntryIdsByViewIds(e){return M.filter(t=>t.viewIds.some(t=>e.has(t))).map(e=>e.searchListId)}getQuery(){return I}};H.dispatchToken=u.a.register(t=>{switch(t.actionType){case"MAIL_INIT_INDEX_FINISHED":R(),L=!0,H.emitChange({target:"finishIndexProgress"});break;case"MAIL_INIT_INDEX_BATCH":!function(e,t,a){const n=c.a.get(O.kMailSearchThreading),i=new Set;for(const e of t)for(const t of e.viewIds)i.add(t);const s=H.getCounterFolders([...i]);for(let a=0;a<e.length;a++){const i=e[a],{searchListId:r,viewIds:o}=t[a];if(i.id>r)throw new Error(`Database inconsistency: extra viewIds entry ${r}.`);if(i.id<r)throw new Error(`Database inconsistency: viewIds entry for SLE ${i.id} not found.`);const l=H.createListEntry(i,o,n);if(M.push(l),s.length>0){const e=new Set(o);s.forEach(t=>{if(!e.has(t.totalViewId))return;const{viewIntersections:a,counter:n}=t;a.total.every(t=>e.has(t))&&n.total++,a.unseen.every(t=>e.has(t))&&n.unseen++,a.unread.every(t=>e.has(t))&&n.unread++})}}j(s,!0),H.emitChange({target:"updateIndexProgress",indexCount:M.length,total:a})}(t.sleBatch,t.viewIdsBatch,t.total);break;case"MAIL_UPDATE_QUERY_RESULTS":{const{queryResults:e,queryAllMessages:a,isQueryContinuation:n}=t;!function(e,t,a){S=e,D=t,F(a),H.emitChange({target:"listEntries"})}(e,a,n);break}case"MAIL_QUERY_CHANGE":i=t.query,I=i;break;case m.a.MAIL_CLEAR_QUERY:U();break;case"MAIL_INDEX_UPDATE":!function(e){const{addedSles:t,removedSles:a}=e,{sleUpdates:i}=e,s=H.getComparator(),r=c.a.get(O.kMailSearchThreading),o=new Set;let l=!1;const u=new Set,m=[],d=[];if(a&&a.forEach(e=>{const t=Object(w.c)(e,r),a=h()(M,{id:t},s);if(a>=0){const[e]=M.splice(a,1);e.viewIds.forEach(e=>u.add(e)),d.push(e.viewIds)}const n=h()(A,{id:t},s);n>=0&&(A.splice(n,1),l=!0),o.add(e.id)}),o.size>0&&v.a.removeEntries(o),t&&t.forEach(e=>{const t=H.createListEntry(e,[],r),a=h()(M,t,s);a<0&&M.splice(-a-1,0,t)}),i&&i.forEach(e=>{const t=H.getListEntryByUniqueKey(e);if(!t)return void console.warn("ListEntry not found "+JSON.stringify(e));const a=[...t.viewIds],{updates:i}=e;if(void 0!==i.sentDate){t.sentDate=i.sentDate;const{searchListId:e,sentDate:a,threadKey:n}=t;t.id=Object(w.c)({id:e,sentDate:a,threadKey:n},r)}Object.keys(i).includes("queued")&&(void 0===i.queued?delete t.queued:t.queued=i.queued),void 0!==i.attachment&&(t.attachment=i.attachment),void 0!==i.flags&&(t.flags=i.flags),void 0!==i.from&&(t.fromIds=i.from.map(f.a.add)),void 0!==i.sourceFilterIds&&(t.sourceFilterIds=i.sourceFilterIds),void 0!==i.subject&&(t.subject=i.subject),void 0!==i.to&&(t.toIds=i.to.map(f.a.add));const o=i.removedViewIds||[],c=i.addedViewIds||[];if(void 0!==i.unseen)if(t.unseen=i.unseen,i.unseen){const e=[...new Set(a.map(e=>Math.floor(e/E.Z)))].map(e=>e*E.Z+E.cb);c.push(...e)}else{const e=a.filter(e=>e%E.Z===E.cb);o.push(...e)}if(void 0!==i.sources){let e=!1,s=!1;if(i.sources.forEach((a,n)=>{if(a){const i=t.sources.get(n);if(i){if(void 0!==a.read&&i.read!==a.read){const t=n*E.Z+E.bb;a.read?o.push(t):c.push(t),e=!0}if(void 0!==a.deleted&&i.deleted!==a.deleted){const e=n*E.Z+E.V;a.deleted?o.push(e):c.push(e),s=!0}}t.sources.set(n,{...i,...a})}else t.sources.delete(n)}),e||s){const i=new Set;a.forEach(e=>{const t=Math.floor(e/E.Z);i.add(t)});const r=[...i].filter(e=>!t.sources.has(e));if(r.length>0){if(e){const e=r.map(e=>e*E.Z+E.bb);Object(g.a)(t.sources)?o.push(...e):c.push(...e)}if(s){const e=r.map(e=>e*E.Z+E.V);Object(n.a)(t.sources)?o.push(...e):c.push(...e)}}}}a.forEach(e=>u.add(e));let p=[...a];o.length>0&&(t.viewIds=t.viewIds.filter(e=>!o.includes(e)),p=p.filter(e=>!o.includes(e)),o.forEach(e=>u.add(e))),c.length>0&&(t.viewIds=t.viewIds.concat(c),p.push(...c),c.forEach(e=>u.add(e))),d.push(a),m.push(p);const b=H.isVisible({...t,viewIds:a}),N=H.isVisible(t);if(b||N){if(!b&&N){const e=h()(A,t,s);A.splice(-e-1,0,t)}else if(b){let a=h()(A,t,s);if(a<0&&r){const{id:e}=t;a=A.findIndex(t=>t.id===e)}if(a<0)return void console.warn("Message not found in _listEntries",{sleUpdate:e});N?A[a]=t:A.splice(a,1)}l=!0}}),l&&(A=A.slice(),H.emitChange({target:"listEntries",updateSelection:!0})),u.size>0){const e=H.getCounterFolders([...u]);e.length>0&&(d.forEach(t=>{B(t,-1,e)}),m.forEach(t=>{B(t,1,e)}),j(e,!0),H.emitChange({target:"counters"}))}}(t.updates);break;case"MAIL_INDEX_ORDER":R(t.threadingToggled);break;case"MAIL_FILTERS_INIT":H.emitChange({target:"filters"});break;case"MAILING_LIST_GROUPS_INIT":!async function(){await _.a.initMailingLists(),H.emitChange({target:"mailingLists"})}();break;case"MAIL_FILTERS_CHANGED":{const{filterIds:e}=t;!function(e){const t=l.a.getSelectedFolder();if(t){const{accountId:a,path:n}=t;if(a!==E.ub){const t=H.getByFolder(a,n);t&&e.includes(t.id)&&(T=b.b.getViewIntersection(t),F(),H.emitChange({target:"listEntries",updateSelection:!0}))}}H.emitChange({target:"filters",filterIds:e,updateSelection:!0,updateScrollPosition:!0})}(e);break}case"MAILING_LIST_GROUP_CHANGED":H.emitChange({target:"mailingLists"});break;case"MAIL_UPDATE_COUNTERS":{const{countedFolders:e,deltaValues:a}=t;j(e,a),H.emitChange({target:"counters"});break}case"MAIL_INIT_MESSAGES":t.folderIntersection?(a=t.folderIntersection,I="",S=void 0,D=!1,k=void 0,T=a,F(),H.emitChange({target:"listEntries",updateSelection:!0})):function(){A=[],I="",S=void 0,D=!1,T=void 0,k=void 0;const e=c.a.get(O.kMailAccounts);x=!!e&&e.length>0,H.emitChange({target:"listEntries",isLoading:x})}();break;case"MAIL_UPDATE_THREAD_KEYS":{const{updates:a}=t;!function(t){const a=c.a.get(O.kMailSearchThreading),n=H.getComparator();let i,s=!1;for(const e of t.values()){let t=Object(w.c)(e,a),r={id:t},l=h()(M,r,n);if(l<0){const{id:n}=e;if(console.warn("Entry not found in index, fallback to linear search "+n),l=M.findIndex(e=>e.searchListId===n),l<0)throw new Error("Failed to update thread key, entry not found in index "+n);const i=M[l],{sentDate:s,threadKey:o}=i;t=Object(w.c)({id:n,sentDate:s,threadKey:o},a),r={id:t}}if(a){const t=h()(A,r,n),[i]=M.splice(l,1);i.threadKey=e.newThreadKey;const{searchListId:o,sentDate:c,threadKey:u}=i;if(i.id=Object(w.c)({id:o,sentDate:c,threadKey:u},a),l=-h()(M,i,n)-1,M.splice(l,0,i),H.isVisible(i)){t>=0&&A.splice(t,1);const e=h()(A,i,n);A.splice(-e-1,0,i),s=!0}}else{M[l].threadKey=e.newThreadKey}const c=o.a.getSelectedThreadPrefix();if(c){const t=e.threadKey.splice(0,2);c.every((e,a)=>t[a]===e)&&(i=M[l])}}i&&e.nextTick(()=>i&&r.a.selectThread(i)),s&&H.emitChange({target:"listEntries"})}(a);break}case"MAIL_SELECT_THREAD":const{threadPrefix:s}=t;U(),function(e){k=e,F(),H.emitChange({target:"listEntries",updateSelection:!0,updateScrollPosition:!0})}(s);break;case m.a.MAIL_GOTO_UNREAD:H.emitChange({target:"gotoUnread"});break;case m.a.MAIL_GOTO_NEXT_UNREAD:H.emitChange({target:"gotoNextUnread"});break;case m.a.MAIL_GOTO_PREVIOUS_UNREAD:H.emitChange({target:"gotoPreviousUnread"});break;case"MAIL_STOP":A=[],I="",S=void 0,D=!1,M=[],P={},x=!1,T=void 0,k=void 0,L=!1,H.emitChange({target:"counters"}),H.emitChange({target:"listEntries"})}var a,i}),t.a=H}).call(this,a(82))},,function(e,t,a){"use strict";var n=a(44),i=a(85),s=a(6),r=a(2),o=a(10),l=a(208),c=a(1);let u=void 0;function m(){return Object(r.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefhiklmnorstuvwxz")}function d(){return void 0===u&&(u=["ja","zh-CN","zh-TW","ja","ko"].indexOf(o.a.i18n.getUILanguage())>-1),u}function h(e){const t=e.indexOf("&");if(-1===t||" "===e[t+1])return-1===t?-1:-2;if("&"!==e[t+1])return t;let a=1;for(let n=t+1;n<e.length&&"&"===e[n];n++)a++;return a%2==0?-1:t}function p(e,t,a,n,i){let s=0;for(;-1!==s;){const i=t.charAt(s),r=i.toUpperCase();if(-1!==n.indexOf(i)&&-1===e.indexOf(r)&&(0!==s&&!0!==a||i===r))return s;s=t.indexOf(" ",s+1),-1!==s&&s++}for(let a=0;a<t.length;a++){const i=t.charAt(a);if(-1!==n.indexOf(i)&&-1===e.indexOf(i.toUpperCase()))return a}return i?-1:p("",t,a,n,!0)}function b(e){var t;return Boolean(null===(t=e.commandName)||void 0===t?void 0:t.startsWith("COMMAND_MAIL"))}function g(e){return"separator"===e.type}function N(e){return"folder"===e.type}function f(e){return{label:e,labelEnglish:e}}function _(){return Object(r.a)("...")}const v={commandItem:{type:"command",label:"",labelEnglish:""},separatorItem:{type:"separator",label:"",labelEnglish:""},getShortcutSettings:function(){return{enabled:s.a.get(c.kKeyboardShortcutsEnable),singleKey:s.a.get(c.kKeyboardShortcutsEnableSingleKey),mailSingleKey:s.a.get(c.kKeyboardShortcutsEnableSingleKeyForMail)}},getShortcut:function(e,t){let a="";if(t.enabled&&e.shortcuts&&!1!==e.showshortcut)for(let n=0;n<e.shortcuts.length;n++){const s=e.shortcuts[n];if(i.a.isSingleKeyShortcut(s))if(b(e)){if(!1===t.mailSingleKey)continue}else if(!1===t.singleKey)continue;if(0!==s.length){a=Object(l.a)(s);break}}return a},isMailCommand:b,isSeparator:g,makeLabelPair:f,getDisplayName:function(e){if(g(e))return"";let t=e.labelWithMnemonic||e.label||"";return e.emphasized&&(t=`• ${t}`),e.ellipsis?t+_():t},makeNumberMnemonic:function(e,t){const a=t<9&&!0;if(a){return{...f("&"+(t+1)+" "+e),mnemonic:a}}return{...f(e),mnemonic:a}},ellipsisString:_,getShortcutsForSubMenus:function(e){const t=Object.keys(n.default.getCommandShortcuts()).filter(e=>e.includes("alt+")&&5===e.length),a=m(),i=s.a.get(c.kKeyboardShortcutsAltOpensMenu),r=[],o=[];e.forEach(e=>{if(e.mnemonic&&e.label&&!g(e)){const t=e.label.indexOf("&");if(-1!==t&&t+1<e.label.length){const a=e.label.toUpperCase().charCodeAt(t+1);-1===r.indexOf(a)&&r.push(a)}}});for(let n=0;n<e.length;n++){const s=e[n];if(!s.label||!N(s)||!1===i||!1===s.mnemonic){o.push({index:n});continue}const l=d()?s.labelEnglish:s.label;if(void 0===l){o.push({index:n});continue}if(r.length>0){const e=l.indexOf("&");if(-1!==e&&e+1<l.length){const a=l.toUpperCase().charCodeAt(e+1),i=String.fromCharCode(a).toLowerCase(),s="alt+"+i;t.includes(s)?o.push({index:n,key:i,offset:e}):(o.push({index:n,shortcut:s,key:i,offset:e}),t.push(s));continue}}let c=!1;for(let e=0;e+1<l.length&&!c;e++){const i=l.toUpperCase().charCodeAt(e);if(-1!==r.indexOf(i))continue;const s=String.fromCharCode(i).toLowerCase();if(-1===a.indexOf(s))continue;const u="alt+"+s;t.includes(u)||(o.push({index:n,shortcut:u,key:s,offset:e}),t.push(u),c=!0)}c||o.push({index:n})}return o},installMnemonics:function e(t,a){const n=m(),i=0===o.a.i18n.getUILanguage().indexOf("en"),s=d();let r="";for(let e=0;e<t.length;e++){const n=t[e];if(n.label)if(g(n)||!1===n.mnemonic){if(!1===n.mnemonic){const e=h(n.label);(e>=0||-2===e)&&(n.labelWithMnemonic=n.label.replace(/\&/g,"&&"))}}else if(a.length>e){const t=s?n.labelEnglish:n.label;let i=a[e].offset;void 0!==i&&i+1<=n.label.length?("&"===n.label[i]?n.labelWithMnemonic=n.label:n.labelWithMnemonic=s?n.label+" (&"+t.charAt(i).toUpperCase()+")":n.label.slice(0,i)+"&"+n.label.slice(i),r+=n.label.charAt(i+1).toUpperCase()):(i=n.label.indexOf("&"),n.labelWithMnemonic=-1!==i?n.label:void 0)}else{const e=h(n.label);e>=0&&e+1<n.label.length?(n.labelWithMnemonic=n.label,r+=n.label.charAt(e+1).toUpperCase()):n.labelWithMnemonic=-2===e?n.label.replace(/\&/g,"&&"):void 0}}for(let a=0;a<t.length;a++){const o=t[a];if(!o.label)continue;const l=s?o.labelEnglish:o.label;if(void 0!==l&&!g(o)&&!1!==o.mnemonic&&void 0===o.labelWithMnemonic){const e=p(r,l,i,n,!1);e>=0&&(r+=l.charAt(e).toUpperCase(),o.labelWithMnemonic=s?o.label+" (&"+l.charAt(e).toUpperCase()+")":o.label.slice(0,e)+"&"+o.label.slice(e))}o.items&&e(o.items,[])}},getMenuBarString:function(e,t){if(!e.label)return{name:"",offset:-1};let a=d()?e.labelEnglish:e.label,n=void 0===t.offset?-1:t.offset;return d()&&(-1!==n?(a=e.label+" ("+a.charAt(n).toUpperCase()+")",n=a.length-2):a=e.label),{name:a,offset:n}}};t.a=v},function(e,t,a){"use strict";var n=a(15),i=a.n(n),s=a(26);class r extends(Object(s.Record)({displayMode:"month",filterText:"",anchorDate:(new i.a).startOf("hour"),selectedDate:(new i.a).startOf("hour"),allDaySelected:!1,showSearchResults:!1,showCompletedTasks:!1})){}var o=r,l=a(42),c=a(57),u=a.n(c),m=a(649),d=a(11),h=a(6),p=a(12),b=a(88),g=a.n(b),N=a(112),f=a.n(N),_=a(375),v=a(105),E=a(509);const C=Object(_.extendMoment)(g.a);var w=f()(2)((e,t,a)=>{const n=l.a.getDisplayRange(t,a);let i=[];const[s,r]=Object(E.a)(e,l.a.isRecurringEvent);let o=[];return s.forEach(e=>{if(e.trash&&!C.range(e.start,e.end).overlaps(n))o=o.concat(e);else if(!e.trash){const{recurrence:t}=e;if(!t)return;const{start:a,end:s}=n,r=Object(v.c)(t.toString(),a.valueOf(),s.valueOf(),e.timezone),[l,c]=((e,t)=>{const a=[],n=[];return t.forEach(t=>{const i={...e},s=(e.recurrenceExceptions||[]).filter(e=>t.valueOf()===e.date),r=s.length>0;if(s.forEach(e=>{const{cancelled:i,parent_event_id:s,exception_event_id:r}=e;if(!i&&s&&r){n.push(r);const e=B.getEvent(s),i=B.getEvent(r);if(e&&i){const n={...i};n.id=`${e.id}:${n.start}`,n.recurrence=e.recurrence,n.recurrenceId=t.valueOf(),a.push(n)}}}),!r){const n=(e.end||e.start)-e.start;i.start=t.valueOf(),i.end=t.valueOf()+n,i.is_recurring=!0,i.id=`${e.id}:${t.valueOf()}`,i.uid=e.uid,a.push(i)}}),[a,n]})(e,r);o=o.concat(l),i=i.concat(c)}}),r.filter(e=>{if(i.includes(e.id))return!1;if(e.task){if(!e.due)return!1;if(e.start){const{start:t}=e,a=e.due||e.end;return(a&&a!==t?a:t+1)>n.start.valueOf()&&t<=n.end.valueOf()}return n.contains(e.due)}{const{start:t,end:a}=e;return(a&&a!==t?a:t+1)>n.start.valueOf()&&t<=n.end.valueOf()}}).concat(o)}),O=a(1);let y,S=[],T=[],k=[],A={editor:{pageId:NaN,uid:Symbol("CalendarStore")},eventDraft:null,selectedEvent:"",initialEventDraft:null},I=[],D=new Map;const M=new Map,P=f()(1)(e=>e.filter(e=>!e.hidden)),x=f()(1)((e,t)=>t.filter(t=>e.find(e=>e.id===t.calendarId))),L=f()(2)(e=>Object(E.a)(e,e=>!e.trash)),j=f()(2)((e,t)=>{const a=e.filter(e=>e.task);return t?a:a.filter(e=>!e.complete)}),R=new class extends u.a{getPanelResourceKey(){return-999}getMailResourceKey(){return-998}getDialogResourceKey(){return-997}getImportStatus(e){if(!e)return new m.a;const t=M.get(e);return t||new m.a}getAllImportStates(){return M}getDefaultCalendarId(){const e=h.a.get(O.kCalendarDefaultCalendarId);return T.find(t=>t.id===e)?e:T.length>0?(d.a.set(O.kCalendarDefaultCalendarId,T[0].id),T[0].id):""}getDefaultAccountId(){const e=h.a.get(O.kCalendarDefaultAccountId);return S.find(t=>t.id===e)?e:S.length>0?(d.a.set(O.kCalendarDefaultAccountId,S[0].id),S[0].id):""}getEditState(){return A}getPendingEvent(){return y}getEventsPerCalendar(e){return I.filter(t=>t.calendarId===e)}getEvent(e){const[t,a]=e.split("-")[0].split(":"),n=I.find(e=>e.id===t);return a&&n?w([n],i()(parseInt(a)),"day")[0]:n}getEvents(){return I}getAccounts(){return S}getAccountForCalendar(e){const t=R.getAccounts(),a=R.getCalendars().find(t=>t.id===e);if(!a)return;const{accountId:n}=a;return t.find(e=>e.id===n)}getCalendars(){return T}getCalendarState(e,t){const a=this.getFilter(e,t),n=this.getEditState(),s=P(T),r=x(s,I);a.anchorDate.localeData()!==i.a.localeData()&&(a.anchorDate.locale(i.a.locale()),a.selectedDate.locale(i.a.locale()));let[o,c]=L(r);const u=j(o,a.showCompletedTasks);let m=w(o,a.anchorDate,a.displayMode);if(""!==a.filterText){const e=a.filterText.toLowerCase();m=["agenda","year"].includes(a.displayMode)?m.filter(t=>l.a.eventSearchPredicate(t,e)):m.map(t=>({...t,filteredOut:!l.a.eventSearchPredicate(t,e)}))}o=((e,t,a)=>{const{initialEventDraft:n}=e,{anchorDate:s,displayMode:r}=t;return n&&!n.id&&i.a.range(n.start,n.end).overlaps(l.a.getDisplayRange(s,r))?a.concat([n]):a})(n,a,m);const d=n.eventDraft;if(d&&d.id){const e=I.find(e=>e.id===d.id);e&&d.etag!==e.etag&&(d.etag=e.etag,d.href=e.href)}return{eventDraft:d?{...d}:void 0,initialEventDraft:n.initialEventDraft,selectedEvent:n.selectedEvent,editor:n.editor,events:o,trashedEvents:c,tasks:u,calendarFilter:a,accounts:S,calendars:T,alarms:k,defaultCalendarId:this.getDefaultCalendarId()}}getEventAlarms(e){return k.reduce((t,a)=>{if(a.name.split(":")[0]===e){const[e,n]=a.name.split(":");t.push({eventId:e,minutes:parseInt(n),name:a.name})}return t},[])}getFilter(e,t){if(!e)return new o;let a=D.get(e);if(!a){const n=e===R.getPanelResourceKey()?O.kCalendarPanelDisplayMode:O.kCalendarDisplayMode;a=new o;const i={displayMode:h.a.get(n),...t};a=a.merge(i),D=D.set(e,a)}return a}emitChange(){this.emit("change")}emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};p.a.register(e=>{switch(e.actionType){case"CALENDAR_INIT":!function(e){const{accounts:t,calendars:a,events:n}=e;S=t,T=a,I=n,R.emitChangeParam("calendarDataReady")}(e);break;case"CALENDAR_EVENTS_INIT":s=e.events,I=s,R.emitChangeParam("calendarDataReady");break;case"CALENDAR_EVENT_EDIT":!function(e,t){const a=A.eventDraft;if(a&&t&&a.id!==t.id)return;const n=!t,s=!a||n,r={editor:e,eventDraft:t,selectedEvent:n&&a?a.id:"",initialEventDraft:s?t?{...t}:void 0:A.initialEventDraft};A=r,y=null;const o=R.getFilter(e.pageId);if(t){let a;if(t.task){const e=t.due&&i()(t.due);e&&!e.isSame(o.selectedDate,"hour")&&(a=e)}else{l.a.getEventRange(t).contains(o.selectedDate)||(a=i()(t.start))}if(a){const t=o.merge({selectedDate:a});D=D.set(e.pageId,t)}}R.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.eventDraft);break;case"CALENDAR_EVENT_SELECT":!function(e,t){var a;const{event:n,date:s,publish:r=!0,allDay:o}=t,c=A.editor.uid===e.uid,u=void 0!==(null==n?void 0:n.id)&&(null==n?void 0:n.id)===(null===(a=A.eventDraft)||void 0===a?void 0:a.id);if(c&&u)return;const m={selectedEvent:n?n.id:"",editor:e,eventDraft:c?void 0:A.eventDraft,initialEventDraft:c?void 0:A.initialEventDraft};A=m;const d=R.getFilter(e.pageId);if(n){let t;if(s)t=s;else{l.a.getEventRange(n).contains(d.selectedDate,{exclusive:!0})||(t=i()(n.start))}if(t){const a=d.merge({selectedDate:t,...void 0!==o?{allDaySelected:o}:{}});D=D.set(e.pageId,a)}}r&&R.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.options);break;case"CALENDAR_ACCOUNTS_INIT":n=e.accounts,S=n,R.emitChangeParam("calendarDataReady");break;case"CALENDAR_CALENDARS_INIT":a=e.calendars,T=a,R.emitChangeParam("calendarDataReady");break;case"CALENDAR_UPDATE_UI":!function(e,t){const a=R.getFilter(e),n=a.merge(t);if(D=D.set(e,n),a.selectedDate!==n.selectedDate&&A&&A.editor.pageId===e){const e={...A,selectedEvent:""};A=e}R.emitChangeParam("calendarDataReady",e)}(e.pageId,e.calendarUI);break;case"CALENDAR_SET_IMPORTED_COUNT":!function(e){const{importId:t,importedEventsCount:a}=e,n=R.getImportStatus(t),i=n.importedEventsCount,s=i.set(i.size,a),r=n.merge({importedEventsCount:s});M.set(t,r),R.emitChangeParam("importCount")}(e.importedEventsCount);break;case"CALENDAR_TO_IMPORT_COUNT":!function(e){const{eventsToImportCount:t,importId:a}=e,n=R.getImportStatus(a).merge({eventsToImportCount:t,importedEventsCount:[]});M.set(a,n),R.emitChangeParam("importCount")}(e.eventsToImportCount);break;case"CALENDAR_SET_IMPORT_STATE":!function(e){const{importId:t,importEventState:a}=e,n=R.getImportStatus(t).merge({importEventState:a});M.set(t,n),R.emitChangeParam("importCount")}(e.importEventState);break;case"CALENDAR_SET_DEFAULT":R.emitChangeParam("defaultCalendarChange");break;case"CALENDAR_ALARMS_INIT":t=e.alarms,k=t,R.emitChangeParam("calendarDataReady");break;case"VIVALDI_CALENDAR_CLEAR_IMPORT_STATUS":M.clear();break;default:return}var t,a,n,s});var B=t.a=R},,,,function(e,t,a){"use strict";var n=a(24),i=a(14),s=a(6),r=a(12),o=a(16),l=a(17),c=a(125),u=a.n(c),m=a(7),d=a(139),h=a(1),p=a(23);let b;const g=new class{openGuestWindow(){m.a.runtimePrivate.switchToGuestSession(e=>{e||console.warn("Guest mode is disabled.")})}closeGuestSession(){m.a.runtimePrivate.closeGuestSession(e=>{e||console.warn("Guest mode is disabled.")})}managePeople(){return m.a.runtimePrivate.openProfileSelectionWindow()}closeActiveProfile(){m.a.runtimePrivate.closeActiveProfile(e=>{e||console.warn("Failed to open profile window.")})}showAddFeed(e){r.a.dispatch({actionType:o.a.MAIN_SHOW_ADD_FEED,options:e})}showQuickCommand(){r.a.dispatch({actionType:o.a.MAIN_SHOW_QUICKCOMMANDS})}async showCalendar(e){const t=["vivaldi://calendar",e?`&anchordate=${e}`:""];await i.a.openURL(t.join(""),{singleton:!0})}showCalendarNotification(e,t,a=!1){r.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_ALARM",options:{notification:e,event:t,fullscreen:a}})}showAddEvent(e,t){n.a.addEventCommand({title:e,url:t})}showKeyboardShortcuts(){r.a.dispatch({actionType:o.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS})}showPageAccessKeys(){r.a.dispatch({actionType:o.a.MAIN_SHOW_PAGE_ACCESS_KEYS})}showConfirmOpenBookmarkDialog(e){r.a.dispatch({actionType:o.a.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG,options:e})}showClearBrowsingHistoryDialog(e){r.a.dispatch({actionType:o.a.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG,options:e})}showClearPrivateData(){g.showClearBrowsingHistoryDialog({})}showImportCalendar(){r.a.dispatch({actionType:o.a.MAIN_SHOW_IMPORT_CALENDAR})}showCalendarModal(e){return new Promise(t=>r.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_MODAL_DIALOG",options:{...e,resolve:t}}))}showImportData(){r.a.dispatch({actionType:o.a.MAIN_SHOW_IMPORT_DATA})}showBookmarkDialog(e){r.a.dispatch({actionType:o.a.MAIN_SHOW_BOOKMARK_DIALOG,options:e})}async showMail(){await i.a.openURL(p.p.internals.mailpage,{singleton:!0})}showMailUnsubscribeDialog(e){const t={actionType:"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG",options:e};r.a.dispatch(t)}showMailAuthenticationDialog(e){const t={actionType:"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG",options:e};r.a.dispatch(t)}showMailDeleteDialogSetting(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING",options:e};r.a.dispatch(t)}showMailDeleteDialogFolders(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS",options:e};r.a.dispatch(t)}showMailDeleteDialogAccounts(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS",options:e};r.a.dispatch(t)}showMailDeleteDialogConfirmAll(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL",options:e};r.a.dispatch(t)}showSaveSession(e){r.a.dispatch({actionType:o.a.MAIN_SHOW_SAVE_SESSION,options:e})}showOpenSession(){r.a.dispatch({actionType:o.a.MAIN_SHOW_OPEN_SESSION})}showDialog(e){const t={actionType:"MAIN_SHOW_DIALOG",options:e};r.a.dispatch(t)}async showExtensions(){await i.a.openURL("vivaldi://extensions",{singleton:!0})}async showHistory(){await i.a.openURL("vivaldi://history",{singleton:!0})}async showNotes(){await i.a.openURL("vivaldi://notes",{singleton:!0})}async showBookmarks(){await i.a.openURL("vivaldi://bookmarks",{singleton:!0})}async showWelcome(){await i.a.openURL("vivaldi://welcome")}async showSettings(e="general",t){const a=Object(d.a)(t)?"":Object.keys(t).map(e=>`${e}=${t[e]}`).join("&");s.a.get(h.kSettingsInTab)?await i.a.openURL(`vivaldi://settings/${e}/?${a}`,{singleton:!0,skipParams:!0}):r.a.dispatch({actionType:"MAIN_SHOW_SETTINGSWINDOW",options:`${e}&${a}`})}showAccountSheet(e="login"){r.a.dispatch({actionType:"MAIN_SHOW_ACCOUNT_SHEET",options:e})}showMailAccountDialog(){r.a.dispatch({actionType:"MAIN_SHOW_MAIL_ACCOUNT_DIALOG"})}showCalendarAccountDialog(){r.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG"})}openNewPopAsTabOrWindow(e,t){if(s.a.get(h.kPopupsShowInTab))e.window.accept(t+";1");else{const t=t=>{e.window?e.window.accept(t+";1"):i.a.openURL(e.targetUrl,{windowId:t})},a=()=>({left:e.initialLeft,top:e.initialTop,width:e.initialWidth,height:e.initialHeight}),n={identifier:u()(),getWindowBounds:a,windowType:"popup",acceptOrBlockCallback:t};r.a.dispatch({actionType:"POPUPWINDOW_OPENED",popupWindow:n})}}startCasting(){m.a.utilities.startChromecast()}setPaneFocus(e){r.a.dispatch({actionType:"MAIN_SELECTING_TOOLBAR",options:{enable:e}})}stepFocus(e){i.a.clearSelection(l.a.getActiveBrowserOrPopupWindowId());const t=function(e,t){return Array.from(document.querySelectorAll(e)).map(e=>{const t=e.getBoundingClientRect(),a=function(e){let t=0,a=0;for(;e instanceof HTMLElement&&(t+=e.offsetTop,a+=e.offsetLeft,e.offsetParent);)e=e.offsetParent;return{left:a,top:t}}(e);return{elm:e,rect:{left:a.left,top:a.top,width:t.width,height:t.height}}}).sort((e,a)=>t?e.rect.left<a.rect.left?-1:e.rect.left>a.rect.left?1:e.rect.top<a.rect.top?-1:e.rect.top>a.rect.top?1:0:e.rect.top<a.rect.top?-1:e.rect.top>a.rect.top?1:e.rect.left<a.rect.left?-1:e.rect.left>a.rect.left?1:0)},n=function(e,t){const a=t.children;let i=!1;for(let t=0;t<a.length;t++){if(a[t]===e)return!0;if(n(e,a[t])){i=!0;break}}return i},s=t(".pagefocusstop",!0),r=t(".uifocusstop",!1).concat(s);if(r.length>0){let t=-1;const o=document.activeElement;for(let e=0;e<r.length;e++)if(r[e].elm===o||n(o,r[e].elm)){t=e;break}if(t=-1===t?e?0:r.length-1:e?t+1<r.length?t+1:0:0===t?r.length-1:t-1,-1!==s.findIndex(e=>e===r[t])){const e=parseInt(r[t].elm.getAttribute("data-id"));i.a.activateTab(e,l.a.getActiveBrowserOrPopupWindowId()),a(150).default.executeActions("COMMAND_FOCUS_WEBVIEW"),b=setTimeout(()=>g.setPaneFocus(!1),1e3)}else r[t].elm.focus(),b&&clearTimeout(b);g.setPaneFocus(!0)}}};t.a=g},,function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"r",(function(){return r})),a.d(t,"t",(function(){return o})),a.d(t,"u",(function(){return l})),a.d(t,"s",(function(){return c})),a.d(t,"v",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"k",(function(){return h})),a.d(t,"l",(function(){return p})),a.d(t,"g",(function(){return b})),a.d(t,"h",(function(){return g})),a.d(t,"f",(function(){return N})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return _})),a.d(t,"w",(function(){return v})),a.d(t,"o",(function(){return E})),a.d(t,"n",(function(){return C})),a.d(t,"q",(function(){return w})),a.d(t,"m",(function(){return O})),a.d(t,"p",(function(){return y})),a.d(t,"j",(function(){return S})),a.d(t,"e",(function(){return T}));var n=a(2),i=a(9);const s={INIT:Object(n.a)("Idle"),STARTING_PARSING_EVENTS:Object(n.a)("Import Started"),PARSING_FINISHED:Object(n.a)("Events Parsed"),IMPORTING:Object(n.a)("Importing..."),IMPORT_FINISHED:Object(n.a)("Import Finished"),IMPORT_ERROR:Object(n.a)("Import Error")},r="YYYYMMDD",o="YYYYMMDDTHHmmss",l="YYYYMMDDTHHmmss[Z]",c="YYYYMMDDZ",u="YYYYMMDDTHHmmssZ",m="X-VIVALDI-FLOATING",d={UNKNOWN:0,VERIFYING:1,OK:2,ERROR:3},h=4,p={local:Object(n.a)("data storage","Local"),google:Object(n.a)("Google Calendar"),vivaldi:Object(n.a)("Vivaldi.net"),caldav:Object(n.a)("CalDAV"),ical:Object(n.a)("Web Calendar")},b=6e4,g=9e5,N=36e5,f=24*N,_=600,v=[{value:"#e73359",name:Object(n.a)("calendar","Red")},{value:"#ee8835",name:Object(n.a)("calendar","Orange")},{value:"#696969",name:Object(n.a)("calendar","Gray")},{value:"#14a434",name:Object(n.a)("calendar","Green")},{value:"#4facf2",name:Object(n.a)("calendar","Blue")},{value:"#b260d3",name:Object(n.a)("calendar","Purple")},{value:"#8b7251",name:Object(n.a)("calendar","Brown")}],E=(i.P.small,i.nb.small,i.be.small,i.td.small,()=>"https://tasks.googleapis.com"),C=()=>"https://www.googleapis.com/calendar",w=e=>`https://${e}/.well-known/caldav`,O=e=>`https://apidata.googleusercontent.com/caldav/v2/${e.trim()}`,y=e=>`https://calendar.vivaldi.net/calendars/${e.trim().toLowerCase()}`,S="X-VIVALDI-EVENT-REMINDER",T="-10"},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return N})),a.d(t,"e",(function(){return W}));var n=a(57),i=a.n(n),s=a(11),r=a(6),o=a(12),l=a(16),c=a(161),u=a(17),m=a(489),d=a(284),h=a(310),p=a(1);const b=260,g=35,N=10,f=["downloads","tabs"],_=["chat"];let v,E,C=!1,w=!1,O=!1,y=0;const S={};let T=[],k=[],A=[],I=[];const D=new Map;let M=null;const P=Object(d.a)(m.a,500);function x(){const e={};e.barVisible=w,e.selectedPanel=v,e.width=y,e.panelVisible=C,s.a.set(p.kPanelsState,e),P(window.vivaldiWindowId,{SHOW_PANEL:e.barVisible,SELECTED_PANEL:e.selectedPanel,PANEL_WIDTH:e.width,SHOW_PANEL_CONTENT:e.panelVisible})}function L(e){return!!V.getPanelAvailable(e)&&!!("mail"!==e&&"contacts"!==e||V.getIsMailWindow())}function j(e){const t=c.a.getIndexByShortcut(e);-1!==t&&void 0!==T&&t>=1&&T.length>=t&&(e=T[t-1].id),L(e)&&(w=!0,y=0===y?290:y,e===v?(C?(M&&M.focus(),E=!1):(M=document.activeElement,E=!0),C=!C):(e||(M=document.activeElement),v=e,C=!0,E=!0),x())}function R(){!1===C?w?(v=void 0,w=!1):(w=!0,v&&j(v)):(M&&M.focus(),y=0===y?290:y,w=!w,C=!C),x(),V.emitChange("")}function B(e,t){if(!u.a.getState().has(e))return;const a=u.a.getState().get(e),n=a&&Object(u.c)(a),i=Object(u.c)({...a,...t});n&&!i&&V.getPanelButtonsVisible()!==O&&R(),!n&&i&&(O=V.getPanelButtonsVisible(),O&&R())}function F(e){e?(w=!0,C=!0,v||(v=V.getDefaultPanel())):C=!1,x()}function U(){!1===C?(E=!0,F(!0),V.emitChange("")):V.emitChange("setFocus")}function H(e,t,a){if(e===p.kPanelsWebItems){const e=T,n=V.getSelectedWebPanelIndex();if(T=t.map(e=>({activeUrl:e.activeUrl,available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:e.origin,resizable:e.resizable,title:e.title,url:e.url,width:e.width})),I=T.map(e=>e.id),D.clear(),I.forEach(e=>{D.set(e,!0)}),!a)if(T.length>e.length){if(u.a.isActive()){let t=T.length-1;for(let a=0;a<e.length;a++)if(e[a].id!==T[a].id){t=a;break}j(T[t].id)}}else if(T.length<e.length&&-1!==n){let e=void 0;if(V.getAvailablePanelCount()>0)-1===V.getSelectedWebPanelIndex()&&(e=n>=T.length?0===T.length?V.getLastAvailablePanel():T[T.length-1].id:T[n].id);else{const t=V.getSelectedWebPanelIndex();-1!==t&&(e=T[t].id)}void 0===e?(v=void 0,F(!1)):e!==v&&(C?j(e):v=e)}}else e===p.kPanelsList&&(t.length>0&&("format"!==t[0].id||7!==parseInt(t[0].format))?(k=Object(h.default)(function(e){const t=Object(h.default)(e),a=[];return r.a.getDefault(p.kPanelsList).forEach((e,n)=>{if(0===n)a.push(e);else{const n=Object(h.default)(e);for(let e=0;e<t.length;e++){const a=t[e];if(n.id===a.id){void 0!==a.available&&(n.available=a.available),void 0!==a.forMailOnly&&(n.forMailOnly=a.forMailOnly),void 0!==a.width&&(n.width=a.width),void 0!==a.resizable&&(n.resizable=a.resizable),t.splice(e,1);break}}a.push(n)}}),a}(t)),s.a.set(p.kPanelsList,k)):k=Object(h.default)(t),A=(n=k,u.a.isGuestSession()?n.filter(e=>"format"!==e.id).filter(e=>f.includes(e.id)):n.filter(e=>"format"!==e.id).filter(e=>!_.includes(e.id))).map(e=>e.id),!v||V.getIsWebPanel(v)||V.getPanelAvailable(v)&&V.canRenderInWindow(v)||(v=void 0,F(!1)));var n}const V=new class extends i.a{getRegPanelOrder(){return A}getWebPanelOrder(){return I}canRenderInWindow(e){return!!V.getIsWebPanel(e)||(["mail","contacts","feeds"].includes(e)?V.getIsMailWindow()&&!r.a.get(p.kMailIsTurnedOff):"calendar"!==e||!r.a.get(p.kMailIsTurnedOff))}shouldShowPanel(e){return(!r.a.get(p.kMailIsTurnedOff)||!["mail","calendar","contacts","feeds"].includes(e))&&!_.includes(e)}isAvailable(e){const t=k.find(t=>t.id===e);return void 0!==t&&t.available}canAutoOpen(e){const t=V.getSelectedPanel(),a=V.getPanelWidth();return!(e===t&&a>50)}getResizableByPanel(e){for(let t=0;t<k.length;t++)if(k[t].id===e)return k[t].resizable;for(let t=0;t<T.length;t++)if(T[t].id===e)return T[t].resizable;return!1}getWidthByPanel(e){for(let t=0;t<k.length;t++)if(k[t].id===e)return k[t].width;for(let t=0;t<T.length;t++)if(T[t].id===e)return T[t].width;return-1}getPanelAvailable(e){for(let t=0;t<k.length;t++)if(k[t].id===e)return!1!==k[t].available;for(let t=0;t<T.length;t++)if(T[t].id===e)return!1!==T[t].available;return!1}getAvailablePanelCount(){let e=0;for(let t=0;t<k.length;t++)!1!==k[t].available&&e++;for(let t=0;t<T.length;t++)!1!==T[t].available&&e++;return e}getFirstAvailablePanel(){for(let e=0;e<k.length;e++)if(!1!==k[e].available){if(!0===k[e].forMailOnly&&!this.getIsMailWindow())continue;return k[e].id}for(let e=0;e<T.length;e++)if(!1!==T[e].available)return T[e].id}getLastAvailablePanel(){for(let e=T.length-1;e>=0;e--)if(!1!==T[e].available)return T[e].id;for(let e=k.length-1;e>=0;e--)if(!1!==k[e].available){if(!0===k[e].forMailOnly&&!this.getIsMailWindow())continue;return k[e].id}}getRegPanels(){return k}getWebPanels(){return T}getIsWebPanel(e){return D.has(e)}getPanelButtonsVisible(){return w}getPanelContentVisible(){return C}getSelectedPanel(){return v}getIsPanelVisible(e){return C&&v===e}getIsWebPanelSelected(){return!!v&&V.getIsWebPanel(v)}getSelectedWebPanelIndex(){return this.getIsWebPanelSelected()?T.findIndex(e=>e.id===v):-1}getFocusContent(){return E}getTransitionState(e){return S[e]}getPanelWidth(){const e=u.a.getVisibleUI(window.vivaldiWindowId).panelToggle;if(!0===e&&!1===w&&!1===C)return N;if(!0===e&&!0===w&&!1===C)return g+N;if(!0===w&&!1===C)return g;if(!0===w&&!0===C){let e=y;if(!0===V.getResizableByPanel(v)){const t=V.getWidthByPanel(v);t>0&&(e=t)}return e<=0?b:e}return 0}getDefaultPanel(){return"bookmarks"}getIsMailWindow(){return Boolean(window.isMailWindow)&&!u.a.isIncognitoOrGuest()}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};V.dispatchToken=o.a.register(e=>{switch(e.actionType){case l.a.PANEL_INIT:!function(e){e.isMail&&(window.isMailWindow=!0);const t=e.regPanelList.length>0?e.regPanelList:r.a.getDefault(p.kPanelsList);H(p.kPanelsList,t,!0),u.a.isGuestSession()||H(p.kPanelsWebItems,e.webPanelItems,!0),w=e.showButtons,C=e.showContent,y=e.width>=290?e.width:0,v=e.selectedPanel,L(v)||(v=V.getFirstAvailablePanel(),v||(C=!1))}(e.state),E=e.state.showContent,V.emitChange("");break;case l.a.PANEL_SET_AVAILABLE:!function(e,t){if(V.getIsWebPanel(e)){const a=T.find(t=>t.id===e);a&&a.available!==t&&(a.available=t,s.a.set(p.kPanelsWebItems,T),V.emitChange(""))}else{const a=k.find(t=>t.id===e);a&&a.available!==t&&(a.available=t,s.a.set(p.kPanelsList,k),V.emitChange(""))}}(e.panel,e.available);break;case l.a.PANEL_SET_CONTENT_VISIBLE:F(e.visible),V.emitChange("");break;case l.a.PANEL_SET_FOCUS:U();break;case"PANEL_TOGGLE_CURRENT":!function(){const e=v||V.getFirstAvailablePanel();e&&(j(e),V.emitChange(""))}();break;case l.a.PANEL_TOGGLE_FLOATING:s.a.toggle(p.kPanelsAsOverlayEnabled,!0,!1);break;case l.a.PANEL_SET_MAIL_WINDOW:window.isMailWindow=!0,V.emitChange("");break;case l.a.PANEL_SET_RESIZABLE:!function(e,t){if(V.getIsWebPanel(e)){const a=T.find(t=>t.id===e);a&&a.resizable!==t&&(a.resizable=t,a.resizable||(a.width=-1),s.a.set(p.kPanelsWebItems,T),V.emitChange(""))}else{const a=k.find(t=>t.id===e);a&&a.resizable!==t&&(a.resizable=t,a.resizable||(a.width=-1),s.a.set(p.kPanelsList,k),V.emitChange(""))}}(e.panel,e.resizable);break;case l.a.PANEL_SET_PANELS:H(e.key,e.value,null===e.oldValue),V.emitChange("");break;case l.a.PANEL_SET_WIDTH:!function(e,t){if(V.getIsWebPanel(e)){const a=T.find(t=>t.id===e);a&&a.width!==t&&(a.width=t,s.a.set(p.kPanelsWebItems,T))}else{const a=k.find(t=>t.id===e);a&&a.width!==t&&(a.width=t,s.a.set(p.kPanelsList,k))}!0!==V.getResizableByPanel(e)&&(y=t),x()}(e.panel,e.width),V.emitChange("");break;case"PANEL_REMOVE_FOCUS":E=!1,V.emitChange("");break;case"PANEL_SHOW_NEXT":!function(e){if(!1!==C)if(v){const t=k.map(e=>e.id).filter(e=>V.getPanelAvailable(e)&&V.canRenderInWindow(e)&&V.shouldShowPanel(e));if(T.filter(e=>e.available).forEach(e=>t.push(e.id)),t.length<2)return;let a=t.indexOf(v);if(-1===a)return;a+="next"===e?1:-1,a=(a+t.length)%t.length,j(t[a]),V.emitChange("")}else{void 0!==V.getFirstAvailablePanel()&&(j(V.getDefaultPanel()),V.emitChange(""))}else U()}(e.direction);break;case"PANEL_SHOW_CONTENT":!function(e){const{setFocus:t,selectId:a}=e;let{panel:n}=e;const i=c.a.getIndexByShortcut(n);if(-1!==i&&void 0!==T&&i>=1&&T.length>=i&&(n=T[i-1].id),C&&v===n){const e=V.getTransitionState(n);if((null==e?void 0:e.selectId)===a)return}L(n)&&(w=!0,C=!0,y=0===y?290:y,v=n,E=t,S[n]={setFocus:t,selectId:a,reason:e.reason},x(),V.emitChange("display"))}(e);break;case l.a.PANEL_TOGGLE_CONTENT:j(e.panel),V.emitChange("");break;case l.a.PANEL_MOVE:!function(e,t,a){if(V.getIsWebPanel(e)){if(V.getIsWebPanel(t)){const n=I.findIndex(t=>t===e);let i=I.findIndex(e=>e===t);"below"===a&&i++,i>n&&i--,I=Object(h.default)(I),I.splice(i,0,I.splice(n,1)[0]);const r=[];I.forEach(e=>{const t=T.filter(t=>t.id===e)[0];r.push(t)}),T=r,s.a.set(p.kPanelsWebItems,T)}}else if(!V.getIsWebPanel(t)){const n=A.findIndex(t=>t===e);let i=A.findIndex(e=>e===t);"below"===a&&i++,i>n&&i--,A=Object(h.default)(A),A.splice(i,0,A.splice(n,1)[0]);const r=[];r.push(k[0]),A.forEach(e=>{const t=k.filter(t=>t.id===e)[0];r.push(t)}),k=r,s.a.set(p.kPanelsList,k)}}(e.from,e.to,e.position),V.emitChange("");break;case l.a.PANEL_CLEAR_TRANSITION_STATE:t=e.panel,S[t]&&(delete S[t],V.emitChange(""));break;case l.a.PANEL_TOGGLE_PANEL:R();break;case"WINDOW_FULL_SCREEN":{const{fullScreen:t,windowId:a}=e;B(a,{fullScreen:t});break}case l.a.WINDOW_MINIMAL_UI:{const{minimalUI:t,windowId:a}=e;B(a,{minimalUI:t});break}}var t}),t.d=V;const{getPanelWidth:W,getSelectedPanel:z}=V},function(e,t,a){"use strict";var n=a(32),i=a(45),s=a.n(i),r=a(36),o=a(88),l=a.n(o),c=a(6),u=a(35),m=a(2),d=a(10),h=a(7),p=a(375),b=a(70),g=a(38),N=a(261),f=a(1),_=a(433);const v=u.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),E=Object(p.extendMoment)(l.a);function C(e){return`${e<=0?"+":"-"}${Math.abs(Math.floor(e/60)).toString().padStart(2,"0")}${(e%60).toString().padStart(2,"0")}`}function w(e,t,a){const n=E.tz.zone(e);if(!n)return"";const i=`BEGIN:VTIMEZONE\r\nTZID:${e}`;let s="";const{untils:r=[],offsets:o=[],abbrs:l=[]}=n;if(1===r.length)s+=`BEGIN:STANDARD\nDTSTART:19700101T000000\nTZOFFSETFROM:${C(o[0])}\nTZOFFSETTO:${C(o[0])}\nTZNAME:${l[0]}\nEND:STANDARD\r\n`;else{let n=r.findIndex(e=>e>t);n=Math.max(n,1);do{const t=n%2==0?"STANDARD":"DAYLIGHT";s+=`BEGIN:${t}\nDTSTART:${E.tz(r[n-1],e).format("YYYYMMDDTHHmmss")}\nTZOFFSETFROM:${C(o[n-1])}\nTZOFFSETTO:${C(o[n])}\nTZNAME:${l[n]}\nEND:${t}\r\n`,n++}while(n<r.length-1&&r[n]<a)}return`${i}\r\n${s}END:VTIMEZONE\r\n`}const O={getCalendarColors:e=>function(e){let t=s()(e);t.get("lab.l")<12.5?t=t.set("lab.l",12.5):t.get("lab.l")>77.5&&(t=t.set("lab.l",77.5));const a=t.set("lab.l",t.get("lab.l")<70?"+70":"-70");return{"--colorCalendarBg":t.css(),"--colorCalendarBgAlpha":t.alpha(.3).css(),"--colorCalendarFg":a.css()}}(e&&e.color?e.color:u.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG")),createCalendarIcon:(e,t,a=!1)=>`<svg width="${t}" height="${t}" viewBox="0 0 32 32">\n      <circle cx="16" cy="16" r="16" fill="${e.color||v}" />\n      ${a?'<path d="M 8 17 l 7 7 l 11 -11 l -3 -3 l -8 8 l -4 -4  z" fill="#FFF" />':""}\n    </svg>`,createEventNotificationString:(e,t,a,n)=>{const i=a?`:${a}`:"",s=t.split(":")[0];return`${`${g.j}${n?"_SNOOZE":""}`}=${e}:${s}${i}`},parseEventNotificationString:e=>{let t={notificationId:""};if(!e.startsWith(g.j))return t;const a=e.split("=")[1];if(a){const[n,i,s]=a.split(":");t={notificationId:n,eventId:i,recurringStart:s?parseInt(s):void 0,snooze:-1!==e.indexOf("_SNOOZE")}}return t},shouldSaveEvent:(e,t)=>{const a=!e.id,n=["id","uid","calendarId","start","end","allDay"],i=Object.entries(e).every(([e,t])=>!t||n.includes(e));if(a)return i?"DELETE":"SAVE";{const{notifications:a,...n}=e,{notifications:s,...r}=t||{},o=Object(N.default)(n,r),l=Object(N.default)(a,s);return o&&l?"IGNORE":o?"SAVE_INVITED":i?"DELETE":"SAVE"}},isOwnEvent(e){const t=n.a.getAccountForCalendar(e.calendarId);return"ical"!==(null==t?void 0:t.account_type)&&(!e.organizer||c.a.get(f.kMailAccounts).some(t=>t.MAIL_EMAIL===e.organizer))},shouldIncrementSequence:(e,t=[])=>{const a=e=>[e.address,e.partstat],n=t.find(t=>t.id===e.id);if(!n)return!1;const i=(n.invites||[]).map(a),s=(e.invites||[]).map(a);return n.start!==e.start||n.end!==e.end||n.allDay!==e.allDay||!Object(N.default)(n.rrule,e.rrule)||!Object(N.default)(i,s)||!Object(N.default)(n.recurrenceExceptions||[],e.recurrenceExceptions||[])},getDisplayRange:(e,t)=>{let a,n;switch(t){case"agenda":a=E(e).startOf("day"),n=E(e).add(1,"month").endOf("day");break;case"month":a=E(e).startOf("month").weekday(0),n=E(e).endOf("month").weekday(6);break;case"multiweek":a=E(e).subtract(1,"week").startOf("week"),n=E(e).add(1,"week").endOf("week");break;default:a=e.clone().startOf(t),n=e.clone().endOf(t)}return E.range(a,n)},getEventRange:e=>E.range(e.start,e.end),isAllDayEvent:e=>{if(e.allDay)return!0;const t=E(e.start),a=E(e.end);return!t.isSame(e.end,"day")&&!(a.diff(t,"day",!0)<1&&a.isSame(a.clone().startOf("day")))},isRecurringEvent:e=>Boolean(e.recurrence&&e.recurrence instanceof b.a),isGeneratedRecurringEvent:e=>-1!==("string"==typeof e?e:e.id).indexOf(":"),getGeneratedSourceEvent:e=>{const[t]=e.id.split("-")[0].split(":"),a=n.a.getEvents().find(e=>e.id===t);if(!a)throw new Error(`Source event not found for recurring event id: ${e.id}`);return a},getBaseEventIfException:e=>{var t,a;const[i]=e.id.split("-")[0].split(":"),s=n.a.getEvent(i);if((null==s?void 0:null===(t=s.recurrenceExceptions)||void 0===t?void 0:t.length)&&!(null===(a=e.recurrenceExceptions)||void 0===a?void 0:a.length))return s},generateKey:e=>{const{calendarId:t,id:a,uid:n,sequence:i}=e;let s=`${t}-${a}`;return n&&(s=`${s} '-' ${n}`),i&&(s=`${s} '-' ${i}`),s},eventSearchPredicate:(e,t)=>["title","description","location","url","invites","organizer"].some(a=>(Array.isArray(e[a])?function(t){return"invites"===t&&e.invites?e.invites.map(e=>e.address).join(""):""}(a):e[a]||"").toLowerCase().indexOf(t.toLowerCase())>=0&&!e.trash),searchEvents:(e,t)=>e.filter(e=>O.eventSearchPredicate(e,t)).sort((e,t)=>t.start-e.start),filterEventsByPeriod:(e,t,a,n=1)=>{const i=t.clone();let s,r;"allday"===a?(s=i.startOf("day").valueOf(),r=i.add(n-1,"day").endOf("day").valueOf()):(s=i.startOf(a).valueOf(),r=i.add(n-1,a).endOf(a).valueOf());const o=t.dayOfYear(),l=e.filter(e=>e.id.indexOf("-")>0).map(e=>e.id.split("-")).filter(([e,t])=>parseInt(t)<=o).reduce((e,[t,a])=>(e[t]=Math.max(e[t]||0,parseInt(a)),e),{}),c=e.filter(e=>e.task?e.start&&e.due?e.start<=r&&e.due>s||e.start===e.due&&e.start>=s&&e.start<r:!!e.due&&(e.due>=s&&e.due<=r):e.start<r&&(e.end||e.start)>s||e.start<r&&e.start>=s).filter(e=>{const[t,a]=e.id.split("-");return!a||l[t]===parseInt(a)});return"hour"===a?c.filter(e=>!O.isAllDayEvent(e)):"allday"===a?c.filter(e=>O.isAllDayEvent(e)):c},eventsToICalendar:function(e,t={}){const{method:a,includeRecurrenceId:n=!0}=t,i=E.tz().format(g.u),s=["BEGIN:VCALENDAR","PRODID:-Vivaldi Calendar V1.0//EN","VERSION:2.0","CALSCALE:GREGORIAN","DTSTAMP:"+i];a&&s.push(`METHOD:${a}`),s.push("");let r=s.join("\r\n");const o=E.tz.guess()||"utc",l=e.reduce((e,t)=>{if(!t.allDay&&(t.recurrence||t.timezone)){const a=t.timezone||o,n=t.start||1/0;let i=t.end||-1/0;t.recurrence&&(i=t.recurrence.options.until?t.recurrence.options.until.valueOf():t.recurrence.options.count?t.recurrence.all().pop().valueOf():1/0),e[a]?e[a]={firstOccurrence:Math.min(n,e[a].firstOccurrence),lastOccurrence:Math.max(i,e[a].lastOccurrence)}:e[a]={firstOccurrence:n,lastOccurrence:i}}return e},{});for(const e in l)e!==g.i&&"utc"!==e.toLowerCase()&&(r+=w(e,l[e].firstOccurrence,l[e].lastOccurrence));return e.map(e=>{let t=[];e.organizer&&(t=[`ORGANIZER:mailto:${e.organizer}`]),e.invites&&e.invites.length&&(t=t.concat(e.invites.map(e=>`ATTENDEE;RSVP=TRUE${e.partstat?`;PARTSTAT=${e.partstat}`:""}:mailto:${e.address}`)));const{uid:a,recurrenceId:s}=e,r=Boolean(s&&n);let o="",l="",c="",u="";e.allDay?(u=";VALUE=DATE",o=`${E(e.start).format(g.r)}`,l=e.end&&E(e.end).format(g.r),c=r&&E(s).format(g.r)):e.timezone===g.i?(o=E(e.start).format(g.t),l=e.end&&E(e.end).format(g.t),c=r&&E(s).format(g.t)):e.timezone&&"utc"!==e.timezone.toLowerCase()?(u=`;TZID=${e.timezone}`,o=E.tz(e.start,e.timezone).format(g.t),l=e.end&&E.tz(e.end,e.timezone).format(g.t),c=r&&E.tz(s,e.timezone).format(g.t)):(o=E.tz(e.start,"utc").format(g.u),l=e.end&&E.tz(e.end,"utc").format(g.u),c=r&&E.tz(s,e.timezone).format(g.t));const m=e.notifications&&e.notifications.map(e=>`BEGIN:VALARM\nACTION:DISPLAY\nDESCRIPTION:${e.name}\nTRIGGER:-${E.duration(e.when).toString()}\nEND:VALARM`).join("\n"),d=[],{recurrence:h,recurrenceExceptions:p}=e;if(h){const{dtstart:e,...t}=h.origOptions;d.push(b.a.optionsToString(t))}return p&&p.forEach(t=>{const{date:a,cancelled:n}=t;if(n){let t="",n="";e.allDay?(t=";VALUE=DATE",n=`${E.tz(a,"utc").format(g.r)}`):e.timezone===g.i?n=E(a).format(g.t):e.timezone?(t=`;TZID=${e.timezone}`,n=E.tz(a,e.timezone).format(g.t)):n=E.tz(a,"utc").format(g.u),d.push(`EXDATE${t}:${n}`)}}),[e.task?"BEGIN:VTODO":"BEGIN:VEVENT","DTSTAMP;VALUE=DATE-TIME:"+i,e.description?`DESCRIPTION:${N=e.description,N.replace(/\r\n|\n/g,"\\n")}`:"",l?`DTEND${u}:${l}`:"",`DTSTART${u}:${o}`,m||"",c?`RECURRENCE-ID${u}:${c}`:"",Number.isInteger(e.sequence)?`SEQUENCE:${e.sequence||0}`:"",`SUMMARY:${e.title}`,a?`UID:${a}`:"",...t,...d,O.attachmentsToString(e.attachment),e.task?"END:VTODO\r\n":"END:VEVENT\r\n"].filter(Boolean).join("\r\n");var N}).forEach(e=>{r+=e}),(r+"END:VCALENDAR").split(/\r?\n/).map(e=>{if(e.length<=75)return e;let t="",a=0;for(;a<e.length;)a+75>=e.length?t+=e.substr(a):t+=e.substr(a,73)+"\r\n ",a+=73;return t}).join("\r\n")},attachmentsToString:e=>(e||[]).map(e=>{const{filename:t,fmttype:a}=e;return`ATTACH${t?`;FILENAME=${t}`:""}${a?`;FMTTYPE=${a}`:""}:${e.url}`}).join("\r\n"),stringToAttachments:(e="")=>e.split("\r\n").filter(Boolean).filter(e=>e.indexOf("ENCODING")+e.indexOf("BINARY")===-2).map(e=>{const[t,a]=Object(_.c)(e,":",2),n=t.match(/FILENAME=([^;:]+)/),i=t.match(/FMTTYPE=([^;:]+)/);return{url:a,filename:n?n[1]:void 0,fmttype:i?i[1]:void 0}}),generateGUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),isRemoteCalendar:e=>{const t=n.a.getCalendars().find(t=>t.id===e);if(!t)return!1;const{accountId:a}=t,i=n.a.getAccounts().find(e=>e.id===a);return!!(t&&i&&i.url&&t.active)},isGoogleCalendar:e=>{const t=n.a.getCalendars().find(t=>t.id===e);if(!t)return!1;const{accountId:a}=t,i=n.a.getAccounts().find(e=>e.id===a);return!(!t||!i||"google"!==i.account_type)},isLocalCalendar:e=>{const t=n.a.getAccounts(),a=n.a.getCalendars().find(t=>t.id===e);if(!a)return!1;const{accountId:i}=a,s=t.find(e=>e.id===i);return!!s&&"local"===s.account_type},isCalDAV:e=>"vivaldi"===e||"caldav"===e||"google"===e,ensureAccountType:e=>Object.keys(g.l).find(t=>t===e)||"local",savePassword:async(e,t,a)=>{const{urlValid:n}=await h.a.utilities.isUrlValid(e||"");return n?(h.a.savedpasswords.add(!0,{username:t||"",password:a||"",signon_realm:"calendar",origin:e||""}),{result:!0,message:""}):{result:!1,message:Object(m.a)("Invalid URL")}},getPassword:(e,t)=>new Promise(a=>h.a.savedpasswords.get({signon_realm:"calendar",origin:e||"",username:t||""},(e,t)=>a({found:e,password:t}))),deletePassword:(e,t)=>h.a.savedpasswords.delete(!0,{signon_realm:"calendar",origin:e||"",username:t||""}),doesCalendarsExistsAndShowWarning:()=>0!==n.a.getCalendars().length||(r.a.showCalendarModal({modal:{title:Object(m.a)("No Calendar Defined"),body:Object(m.a)("At least one calendar is required to add an event."),actions:[{title:Object(m.a)("Open Calendar Settings"),action:"settings",default:!0}],cancelAction:{title:Object(m.a)("Cancel"),action:"cancel"}}}).then(({action:e})=>{"settings"===e&&r.a.showSettings("calendar")}),!1),getAllChromeAlarms:()=>new Promise(e=>{d.a.alarms.getAll(t=>{e(t)})}),getAllNotifications:()=>new Promise(e=>{h.a.calendar.getAllNotifications(t=>{e(t)})}),getLocalGoogleTasksCalendars:e=>"google"!==e.account_type?[]:n.a.getCalendars().filter(t=>{var a;return t.accountId===e.id&&(null===(a=t.supportedCalendarComponent)||void 0===a?void 0:a.vtodo)}),getPollResultText(e){const{calendars:t,error:a,message:n,didPoll:i}=e;if(a)return n;if(!i)return Object(m.a)("Poll already in progress");const s=t.reduce((e,t)=>e+t.numberOfChangedCalendars,0);return 0===s?Object(m.a)("Refresh complete. No change."):Object(m.a)("Refresh complete. $1 calendar was updated.","Refresh complete. $1 calendars were updated.",[s])}};t.a=O},,function(e,t,a){"use strict";a.r(t);var n=a(79),i=a(50),s=a(28),r=a(57),o=a.n(r),l=a(85),c=a(31),u=a(14),m=a(13),d=a(67),h=a(41),p=a(454),b=a(6),g=a(201),N=a(253),f=a(51),_=a(12),v=a(16),E=a(35),C=a(17),w=a(2),O=a(10),y=a(224),S=a(4),T=a(7),k=a(117),A=a(522),I=a(1),D=a(23);let M=!1;const P={name:"",items:[],tokens:[],installed:!1,radioCounter:1,radioGroup:{},hasBookmarkContainer:!1,bookmarkExtrasEdge:"below"},x=[{name:"CONTAINER_WEBPANEL",hideInSettings:!1},{name:"CONTAINER_TAB",hideInSettings:!1},{name:"CONTAINER_PINNED_TAB",hideInSettings:!1},{name:"CONTAINER_CLOSED_TAB",hideInSettings:!1},{name:"CONTAINER_PERIODIC_RELOAD",hideInSettings:!1},{name:"CONTAINER_BOOKMARK",hideInSettings:!1},{name:"CONTAINER_MAC_SERVICES",hideInSettings:!0}];let L=[];const j={},R=["COMMAND_CLOSE_TAB","COMMAND_CLOSE_WINDOW","COMMAND_EXIT","COMMAND_QUIT_MAC_MAYBE_WARN","COMMAND_NEW_WINDOW","COMMAND_NEW_PRIVATE_WINDOW","COMMAND_SHOW_HELP"],B=A.a,F={MENU_FILE:{...Object(S.a)("win_linux","File")},MENU_EDIT:{...Object(S.a)("win_linux","Edit")},MENU_VIEW:{...Object(S.a)("win_linux","View")},MENU_BOOKMARKS:{testVisibility:()=>!C.a.isGuestSession(),...Object(S.a)("win_linux","Bookmarks")},MENU_TOOLS:{...Object(S.a)("win_linux","Tools")},MENU_WINDOW:{...Object(S.a)("win_linux","Window")},MENU_HELP:{...Object(S.a)("win_linux","Help")},MENU_IMAGES_AND_ANIMATION:{...Object(S.a)("win_linux","Images and Animations")},MENU_CAPTURE:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADCSURBVHgB1ZHBEcIgEEXB5JBjSsASvDFwoRMtQSvQDqwhlXiCqyXEDsydYfDvIRlEUK/5h7Cz87O8zzK2evFSU2s94hBpL8b4cM5t2S8ZY4RSaiwMfUopRd5v6YMfDpzzK8reez+hPuZGEJyaprlhkCAaeC7W2mFBLk3/RklEKV7MTURFJoqDc88+I8UlQklAPIcQdl3XMcS6ozWUfBtWVz8XyDzVTFWC+dFwe1961DfVVlRTuuo2vY1W9M+A2qpXqhfDA07BmbR5ZAAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAGRJREFUeNq9j8EVwCAIQx2FzeqmvcTnGBmBEegBq/hKjy3ckk+Mpfw5IMy3MbFPWTK0S7BahcKgOIJCWONQwI0PmVAHLGbNu+UsAOwy71JAu2xl7fkEY9kb0LeSI8s/lWzI+nQuBXxjN95EoeQAAAAASUVORK5CYII=",...Object(S.a)("win_linux","Capture")},COMMAND_NEW_PRIVATE_WINDOW:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_NEW_GUEST_WINDOW:{testVisibility:()=>!C.a.isIncognito()},COMMAND_OPEN_PAGE:{ellipsis:!0},COMMAND_FOCUS_ADDRESSFIELD:{ellipsis:!0,...Object(S.a)("Open Location")},COMMAND_SAVE_PAGE:{ellipsis:!0},COMMAND_PRINT_PAGE:{ellipsis:!0},COMMAND_START_CHROMECAST:{ellipsis:!0},COMMAND_IMPORT_CALENDAR:{testVisibility:()=>!C.a.isGuestSession()&&!b.a.get(I.kMailIsTurnedOff)},COMMAND_IMPORT_DATA:{testVisibility:()=>!C.a.isGuestSession(),ellipsis:!0},COMMAND_EXPORT_DATA:{testVisibility:()=>!C.a.isGuestSession(),ellipsis:!0},COMMAND_OPEN_SESSION:{testVisibility:()=>!C.a.isGuestSession(),ellipsis:!0},COMMAND_SAVE_SESSION:{testVisibility:()=>!C.a.isGuestSession(),ellipsis:!0},COMMAND_FIND_IN_PAGE:{ellipsis:!0},COMMAND_TOGGLE_MENU_POSITION:{prefs:{pref:I.kMenuDisplay,isChecked:()=>{const e=b.a.get(I.kMenuDisplay);return!0===e||"top"===e||"on"===e}},...Object(S.a)("Horizontal Main Menu")},COMMAND_MAIN_TOGGLE_TAB_BAR:{prefs:{windowState:"tabs",isChecked:()=>C.a.getVisibleUI().tabs},...Object(S.a)("command","Show Tab Bar")},COMMAND_SHOW_BOOKMARK_BAR:{prefs:{windowState:"bookmarksBar",isChecked:()=>C.a.getVisibleUI().bookmarksBar},...Object(S.a)("command","Show Bookmarks Bar"),testVisibility:()=>!C.a.isGuestSession()},COMMAND_TOGGLE_FOOTER:{prefs:{windowState:"statusBar",isChecked:()=>"on"===C.a.getVisibleUI().statusBar},...Object(S.a)("command","Show Status Bar")},COMMAND_TOGGLE_STARTPAGE_NAVIGATION:{prefs:{pref:I.kStartpageNavigation,isChecked:()=>{const e=b.a.get(I.kStartpageNavigation);return"on"===e||"speed_dial_only"===e}},...Object(S.a)("command","Show Start Page Navigation")},COMMAND_TOGGLE_PANEL:{prefs:{panelState:"SHOW_PANEL",isChecked:()=>h.d.getPanelButtonsVisible()},...Object(S.a)("command","Show Panel")},COMMAND_SHOW_BOOKMARK_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACJSURBVHgB7ZKxCoAgEIavaG3wBcJGt2ZdnHurXiR6itY2X6Pew8HOUAgREaWtH0Tvzv87Dg6gUk2YEEKceNHYZ2PMpZQaISUEmCDV+xOpQQuV+gFfA6SUlDE2FAGsWWt9EEL2FKRLmXHzNhs7yJwN8GZc28XGnPMHArkjvM1W7r1CjrDbVFIr1g1wAzRdx1+LFgAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAE9JREFUeNpjYCAWHLl/5D8CHr2PqeA/hP7PC4Iw3jBVsF/hmjYeBfsVjtw/+hCkBKsCsHT90XqQEqwKQNIgFkgJVgUQaYgSLAqOGuDm4QUAABBqP/s39jMAAAAASUVORK5CYII=",testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_MAIL_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7ZHRDYAgDETBMAhuoL8wBZOyBb+6gWyCVyOmQSAMwCWkTem7tKkQUzIn1toLQY9AKaUYQlgpV6yu8bEjejyHhpNDxphNSunR4xCPXF940ws5MiGgBpfGqhyPGgBkE/fs2YB/E9Qm6cFNA27Sg6srVEy64gYRp0xiQHRGMfXpBmxdTd/71HkZAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAATklEQVR42s3PsQ3AMAgEwB+J/ev/ORiFFAhjKxTuEqiAkwDgJ0FnvFPeIGRyWdUyuoyxAaBJjrO7gSI1HkASrlUDAGR9yQiO3+L+zY/jAaekW1uCzRxFAAAAAElFTkSuQmCC",testVisibility:()=>!C.a.isGuestSession()&&h.d.canRenderInWindow.bind(void 0,"mail")&&!b.a.get(I.kMailIsTurnedOff)},COMMAND_SHOW_CONTACTS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF0SURBVHgBtVM7boNAEOVnic72BSwiX8DpIn8UcgIfIeEEzg1QTuA6nW8Q5wZE4lcmXTrb0KTcBgnxzRuLtQhQIEUeabXLm3lvZ98IQfhniH2KFovFnSiK93TO89z3PO+D56Q+AmVZakVRqLQgpCNGPKfUCymRZdkzCJsK2g0Ggxfse+AbEiAwjmMSYK0O0jTdgjwE6QbrFtAYmGlZVozWv7q6E+u3o/jgOM64iZFgFEUa9jUu+IEHry0PqC0kWV0dN9M3S5JkKMvyOYddrXvQy0QKPOFMgg/k0yMXuQj4vn+Ew8JyudQ5Np/PZ+hKcF33pCiKxnESQcdrOv+ZAgQMEN5WqxXtjM6SJBlV6wzEeu2oJYDQiQjjPlVVpamQyAz43rZti2xp1Atyrd0nmj9ueaDnINh0On3H27eTyYSFYdg5RpmTsZmczJNcBPhO07RTEATfTQGpek+LzAOjJHMN5M2uDi4ewKQDfpquGvoXaB2Fa8QvffXhZBpebQgAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAvklEQVR42pWQMQ7CMAxFMzLmBvgIjGx0ZOzIVjbGjh3bG/QIcBNL2EkkFo7gI+QIILeiTSMqgS1FSfzy429j/g/eU0ONP6wC7uRaTbTJJVrqOHLkHi1uqFEgQCp7HUrAN+6N8ccMQMtx3qF97FzrL8n7AE4mLXHbAK6lOukhB1QhQ1ioGBzsFPXl6CNUE0AFx3s5rnoaAV/PQOckAAILdd9Gc9by4AJYuFotfxD9Jh2SLGam/TwzgF/LnE3/EG8smIVnSsnf6AAAAABJRU5ErkJggg==",testVisibility:()=>!C.a.isGuestSession()&&h.d.canRenderInWindow.bind(void 0,"contacts")&&!b.a.get(I.kMailIsTurnedOff)},COMMAND_SHOW_DOWNLOADS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADPSURBVHgBxZLBDYIwFIZblTtMAIYpBA51BKfwzAS6gUePzuAGvUC4OoFNF5B7k9a/Rkw1QCQQ/ZKmf1/7+t5rHyEjoV0baZpeMUVWG2NEWZZLMgRcYNr0JzMykv9fsGgEY8xXSt26Drrv4HlewDmv3zKwBkrpGlJorfOiKF4/9NQ5Ro091jhb5m4UKaWI4/iMbzuGYRhgza09y7I9bFs4r6qqurg+rX2AciKUc4LTIxIy85H2xo38FUmS7FD7gfyEvm7rOztdHwA+IAtOpuIO/nhVS2EDB78AAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAb0lEQVR42mNgIAUcuX/k/5H/R+/jVvAfQdJbwX4BkONAEKIAAvcLICk57HDk/rECuEkFR94fs0c3ReHI/cMNYMUNR+8fV8Digv0KR/YfXX90/ZH9KIajgqP1R/oZyADYfY4kSljBfpjfUeB+oqwHAI1/WdoNOXPUAAAAAElFTkSuQmCC"},COMMAND_SHOW_NOTES_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACgSURBVHgB7VLBDYQgENw1FnAlWAeEGrSEK+GugrsOtAU70CKgDkuwAnBMNFHCRhM/PpwPsDPsLuwQXQRvD0qpNzPX2L5S4hDCAP5vrW3XWLbLxvyTLi98gaXZxvJIU6BK5ZzrUwmMMaX3viMJWutAB4g1GV1EfqbKCnwen0qQEj4dyIjHOMLOpSSGkarZzmIHIL+wa4MnJN0GF47gP3QrTBi9PG385uw1AAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAASklEQVR42mNgIA4cTTjy/sh/BDx6/0g8ioIj95GlwfA9qoL/R/2R+Yf8j/xHU4BuKTkKkF0wRE14jxZQAUfvo8cFamC/R4sLCgAAKuF43sJZFFMAAAAASUVORK5CYII=",testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_HISTORY_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD8SURBVHgB3VJLDoIwEG1BYMsR8Aa647fgKHAC4gn0BsQTKCfwCOCChB3eQI9QtxDAmYQmTW2NOxMnadKZad983iPk10blQJIk3jAMJ7hu4LhCis3zXE/TtGvb9sGDhuJzhw8ty1o3TUP5QZ9SejVNs/N93yMqC8PwEgRBLsXukr+PoqhSdgAVEsdxSinmib5t28dlvHcAnLmua0Y+2JJ3dQBK0878JUBpGEalA5EBGDAhUkeAgRS3DyAF+kue6QBufd/nchUEgeVleAeaU6SZ51biQ+A6Qx0AlU9g4ywvNI7jA3zOQUxbHlMqEbookFIiKRE7HMcxE5X4B/YCuLpojZ4/JTwAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAf0lEQVR42rWQ3RWAIAiFHcER2jA3sFHawBF46GJjNAIj2Kn879RT4QMIH4hXqc+MBhAE4TzCbh36srAlHW8aBtIg7PwYoy16C6oASOpGyFOkBsJb1KXT20/AzNuFtEDe4UTcfQdiW31aKwVzYI0O3hQdlqnT4UDYFSVBXflP2wFyclxBF22/4AAAAABJRU5ErkJggg==",testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_WINDOW_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABYSURBVHgB7ZLdCcAgDIQvpYO0c2T+ZI26SWofCgriDwqC+L3kOMiFkACzoV8w8+PLVdNkZk5V78j0AVbSKe9AJ5SblENEKDJaAoausAOAM9Cu9hLfJ2IdXuDHHKAeH9NrAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAALElEQVR42mNgoAo4cv/If0x49D5CwX90EpVFjALskAGLWmSXDTUFhEKStgAAWEdiK3NU7WoAAAAASUVORK5CYII=",testVisibility:()=>h.d.canRenderInWindow.bind(void 0,"tabs")},COMMAND_SHOW_CALENDAR_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACISURBVHgB1ZLBDYAgDEVr4wCOwBgEhnEGN3AEV3AST8whI7ABloQmmCgQ5aAvIfxC+wsEgNYopXat9Z7TKR0L2hxpWmgMhR6WxmyMWUOAvOq9nyuKAyI2OkMn8FBJmovwErxy5w53OmvwmGZv8O8rOCmlKBXHHMtxz4J+4oSIG7mLgocLufAZDrWyPsrbeWhUAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACOSURBVHgB1ZLBDYAgDEULMeHqCFyZyhncwBFYwUkcgRscZQQnAEsiCQcEohz0JSQt+f2FpgC90Vrv4ZTiFBIDY8zknJOEkLHSw6JmEUKsIaHx1nu/NBQHOGolZJ7uoZFUS+ElNOceO9zFRYPHdJvBj7+Ay3EopXit+NLYmA+JwcwY29CdlwxCI1z5GT7DCTJle8x3rbO8AAAAAElFTkSuQmCC",testVisibility:()=>!C.a.isGuestSession()&&h.d.canRenderInWindow.bind(void 0,"calendar")&&!b.a.get(I.kMailIsTurnedOff)},CONTAINER_WEBPANEL:{...Object(S.a)("Web Panels"),settingsLabel:Object(w.a)("[All Web Panels]")},COMMAND_SET_LOAD_IMAGES_ALWAYS:{prefs:{imageLoadingPref:"always",isChecked:()=>"always"===b.a.get(I.kPageImageLoading)}},COMMAND_SET_LOAD_IMAGES_NEVER:{prefs:{imageLoadingPref:"never",isChecked:()=>"never"===b.a.get(I.kPageImageLoading)}},COMMAND_SET_LOAD_IMAGES_CACHE:{prefs:{imageLoadingPref:"cache",isChecked:()=>"cache"===b.a.get(I.kPageImageLoading)},...Object(S.a)("Load Images from Cache")},COMMAND_SET_ANIMATIONS_LOOP:{prefs:{animationPref:"allowed"}},COMMAND_SET_ANIMATIONS_NEVER:{prefs:{animationPref:"none"}},COMMAND_SET_ANIMATIONS_ONCE:{prefs:{animationPref:"once"}},COMMAND_MAIN_ZOOM_IN:{persistent:!0},COMMAND_MAIN_ZOOM_OUT:{persistent:!0},CONTAINER_BOOKMARK:{labelIndex:0,settingsLabel:Object(w.a)("[All Bookmarks]"),settingsRename:!1,testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_SETTINGS:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFUlEQVR4AWJwL/ChCOOUsLKy2m9tbf0fhIHs9SQbACidvK0yCGIgHGISTEj0d4D3tgPoADrgOoAOoIMt6UrQ2XhLAH3vSTzhzwRr5WZGuxpYHh4e7hwfHy80gfyXgIDn09PTpM47FxcXr7pm7q+vr9dBgU3v73SfTk5OipgAp4U5PeoqGvxCIDa3690TSW0Vt3v1xBgqHL4gigluqAyNIOKDVeT+PlLlTmlcf9IAfigfHKXv+1URWSZRFNeDPUFEUQYEua7rraZpNqkY26vj9icRBYEiBbvLkYKLSHs/EqC6izJkgML9Y5vEBMqsXsHfgr0NodX4uD1qUIAEftbWNwIZBJhtBxs0Bj9lCyqn/IU06zMNHe/UfCL6J8KbGwAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAVFBMVEX////ExMTFxcXExMS/v7/FxcXExMTDw8PExMTFxcXHx8e/v7/ExMTExMTFxcXFxcXDw8PGxsbKysrFxcXCwsLDw8PFxcXExMTGxsbGxsbExMTExMQtledLAAAAG3RSTlMA79+fEJ/PgN9/ICCPvzBgkG8wr1BAT18/cHDxOv8OAAAAdUlEQVR4AQXBhQHDIAAAsOBQnRv//7kEAABgn/MOAOptiQBaOS5BnuWRvrDOa98y6wgjZqQEQCp49sYZ4psWP/DY6QTqBzwrgcj+grUPzh7ejLhgKwDsBWtsoS3kS7yGBX7bK82cw3akAaDejgoA0px3AADAH03KBE7hRjloAAAAAElFTkSuQmCC",ellipsis:!0,testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_QUICK_COMMANDS:{ellipsis:!0},COMMAND_SHOW_BOOKMARKS:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_HISTORY:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_NOTES:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_SHOW_CALENDAR:{testVisibility:()=>!C.a.isGuestSession()&&!b.a.get(I.kMailIsTurnedOff)},COMMAND_SHOW_MAIL:{testVisibility:()=>!C.a.isGuestSession()&&!b.a.get(I.kMailIsTurnedOff)},COMMAND_SHOW_EXTENSIONS:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_CAPTURE_PAGE_TO_DISK:{...Object(S.a)("Page to File")},COMMAND_CAPTURE_PAGE_TO_CLIPBOARD:{...Object(S.a)("Page to Clipboard")},COMMAND_TAB_TRANSLATE_PAGE:{...Object(S.a)("command","Translate Page")},COMMAND_CAPTURE_AREA_TO_DISK:{...Object(S.a)("Area to File")},COMMAND_CAPTURE_AREA_TO_CLIPBOARD:{...Object(S.a)("Area to Clipboard")},COMMAND_SHOW_CLEAR_PRIVATE_DATA:{ellipsis:!0,testVisibility:()=>!C.a.isIncognitoOrGuest()},COMMAND_DEVELOPER_TOOLS:{testVisibility:()=>!m.c.isActiveInternal()},COMMAND_FULLSCREEN:{...Object(S.a)("Fullscreen")},COMMAND_MAIN_TOGGLE_UI:{...Object(S.a)("Hide UI")},CONTAINER_PINNED_TAB:{...Object(S.a)("title","Pinned Tabs"),settingsLabel:Object(w.a)("[All Pinned Tabs]")},CONTAINER_CLOSED_TAB:{...Object(S.a)("title","Closed Tabs"),settingsLabel:Object(w.a)("[All Closed Tabs]")},CONTAINER_TAB:{...Object(S.a)("title","Tabs"),settingsLabel:Object(w.a)("[All Tabs]")},CONTAINER_PERIODIC_RELOAD:{...Object(S.a)("title","Periodic Reload"),settingsLabel:Object(w.a)("[Periodic Reload]")},COMMAND_SHOW_WELCOME:{testVisibility:()=>!C.a.isGuestSession()},COMMAND_CHECK_FOR_UPDATES:{ellipsis:!0,testVisibility:()=>!0},COMMAND_SHOW_ABOUT:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgBzVLLTcQwEHU+yjkN5EMHHPM75MgROqADditIOHKDClg6gAowUn43tgQraYAjRErCG5FFjjd7hifZ4xm9eTNjm7G/hkFbkiS54zivruv6Xde9nCLHcUycned5Wtu2nGI6bdM0ZTPnOgzDzVoyiqQwqcL/EQD4b0DXszRNbVXANM09zMfs7hcCmqbdSly77/sbVYBzTsmCzsMwXC0EiqLgaOv5EITgJggCnx3DBm/XNI1YCBAsy9pKLdqGYTzKo9BFw/jjOMrdMk12oijKUD0/+KgmaF7EfNhz+HlVVQsBXXbQxYPUBY3iY13OyQLVn5gCQ3aEEJ945y8cL1Qi3Utd129HcbYCfJh3qiqPgtbP1rj6WhDVtoqfsxMw1oL4pgKj0AsEWPdlWd6xf4tvaZVsnjSI7BsAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAjUlEQVR42q1QSRGAMAysBCQgBSdYwAE4qAQkICEPtvBEAhIqYZm2FAIDvEhe2dlrYswPM3Yg+isGAccuHww7NUpSJUyxQXgpMkEKeBDLje9aFbGAc3mcbkgeJ4TV6VZSRktCUkyorfTRo91jVjcEex2nazHTbvqY2pwE1I8PC9ZJ//bR6lMfPSwIa36eDUlAgXmKiZFsAAAAAElFTkSuQmCC"}};Object(S.a)("mac","Vivaldi"),Object(S.a)("mac","File"),Object(S.a)("mac","Edit"),Object(S.a)("mac","View"),Object(S.a)("mac","Bookmarks"),Object(S.a)("mac","Tools"),Object(S.a)("mac","Window"),Object(S.a)("mac","Help"),Object(S.a)("Preferences"),Object(S.a)("mac","Services"),Object(S.a)("mac","Show All"),Object(S.a)("text_mac","Delete"),Object(S.a)("mac","Show Tab Bar"),Object(S.a)("Hide Tab Bar"),Object(S.a)("Show Bookmarks Bar"),Object(S.a)("Hide Bookmarks Bar"),Object(S.a)("mac","Show Status Bar"),Object(S.a)("mac","Hide Status Bar"),I.kStartpageNavigation,Object(S.a)("mac","Show Start Page Navigation"),Object(S.a)("mac","Hide Start Page Navigation"),Object(S.a)("mac","Show Panel"),Object(S.a)("mac","Hide Panel"),Object(S.a)("Show Bookmarks Panel"),Object(S.a)("Hide Bookmarks Panel"),Object(S.a)("Show Mail Panel"),Object(S.a)("Hide Mail Panel"),Object(S.a)("Show Contacts Panel"),Object(S.a)("Hide Contacts Panel"),Object(S.a)("Show Downloads Panel"),Object(S.a)("Hide Downloads Panel"),Object(S.a)("Show Notes Panel"),Object(S.a)("Hide Notes Panel"),Object(S.a)("Show History Panel"),Object(S.a)("Hide History Panel"),Object(S.a)("Show Window Panel"),Object(S.a)("Hide Window Panel"),h.d.canRenderInWindow.bind(void 0,"tabs"),Object(S.a)("Show Calendar Panel"),Object(S.a)("Hide Calendar Panel"),Object(S.a)("Load Images From Cache"),Object(S.a)("mac","Enter Full Screen"),Object(S.a)("mac","Exit Full Screen"),Object(S.a)("verb","Capture"),I.kAllowJavascriptAppleEvents,Object(S.a)("Allow JavaScript from Apple Events"),Object(S.a)("Disable JavaScript from Apple Events"),Object(S.a)("mac","Zoom"),Object(S.a)("mac","Bring All to Front");function U(e){const t=F[e.action],a=function(e){const t=e.parameter;if(void 0===t)return;switch(e.action){case"COMMAND_OPEN_LINK":return{handler:e=>{const a=n.a.getOpenOptionsFromDisposition("setting",!1,e);u.a.openURL(t,{...a})},url:t};default:return}}(e);return a?{...t,...a}:t}function H(){L.forEach(e=>{l.a.unbind(e.key,e.func)}),L=[];const e=J.getCommandShortcuts();Object.keys(e).forEach(t=>{const a=e[t].function,n=e[t].isEnabled,i=e[t].inContext,s=e[t].onAutoRepeat,r=e[t].name.startsWith("COMMAND_MAIL");l.a.bind(t,a,s,r,n,i),L.push({key:t,func:a})})}function V(e,t){j[e]=t,P.installed&&function e(t,a,n){for(let i=n.length-1;i>=0;i--)if(n[i].items)e(t,a,n[i].items);else if(n[i].commandName===t){a.shortcut?n[i].shortcuts=a.shortcut:delete n[i].shortcuts;break}}(e,t,P.items)}function W(e){if(e.hasOwnProperty("param"))return e.action.bind(null,e.param);const{chain:t}=e;return"CATEGORY_COMMAND_CHAIN"===e.category&&(null==t?void 0:t.length)&&(e.action=()=>Object(k.b)(t)),e.action.bind(null,void 0)}function z(e,t){const a={};for(const n in j){const i=j[n];void 0!==i&&B.concat(b.a.get(I.kChainedCommandsCommandList)).forEach(s=>{if(s.name===n&&(!0===t||!0!==s.readonly)&&i.hasOwnProperty(e)){const t=i[e];t&&t.forEach(e=>{let t;t="function"==typeof s.isEnabled?s.isEnabled:()=>!s.isEnabled||s.isEnabled,a[e]={function:W(s),label:s.gestureLabel||s.label,name:s.name,onAutoRepeat:s.repeat,isEnabled:t,inContext:s.inContext}})}})}return a}function G(e,t){let a=c.a.commandItem;const n=U(e);if(n&&void 0!==n.inMenu){if("function"==typeof n.inMenu&&(n.inMenu=n.inMenu()),!1===n.inMenu)return;delete n.inMenu}if("folder"===e.type)a={id:e.id,commandName:e.action,items:[],type:e.type,...n,withNoWindow:!0},e.children&&e.children.forEach(e=>{const n=G(e,t);n&&a.items&&a.items.push(n)});else if("command"===e.type)a={id:e.id,commandName:e.action,type:e.type,...n};else if("checkbox"===e.type)a={id:e.id,commandName:e.action,type:e.type,...n};else if("radio"===e.type){if(!e.radiogroup)return;{let t=P.radioGroup[e.radiogroup];void 0===t&&(P.radioGroup[e.radiogroup]=P.radioCounter++,t=P.radioGroup[e.radiogroup]),a={id:e.id,commandName:e.action,type:e.type,group:e.radiogroup,radiogroup:t,...n}}}else"container"===e.type?-1!==x.findIndex(t=>t.name===e.action)&&(n.container={content:e.action,mode:e.containermode,edge:e.containeredge,cpp:"CONTAINER_BOOKMARK"===e.action||"CONTAINER_MAC_SERVICES"===e.action},a={id:e.id,type:e.type,...n,withNoWindow:!0},t&&"CONTAINER_BOOKMARK"===e.action&&(P.hasBookmarkContainer=!0,e.containeredge&&(P.bookmarkExtrasEdge=e.containeredge))):"separator"===e.type&&(a={...c.a.separatorItem,id:e.id});void 0!==e.title&&(a.label=a.labelEnglish=e.title,a.settingsLabel&&delete a.settingsLabel,a.ellipsis=!1),void 0!==e.custom&&(a.custom=e.custom),a.showshortcut=e.showshortcut;const i=j[e.action];return i&&i.shortcut&&(a.shortcuts=i.shortcut),a}function K(e,t){P.installed&&(!function e(t){t.forEach(t=>{var a,n,i,s,r,o,l;if(t.items)e(t.items);else if(null===(a=t.prefs)||void 0===a?void 0:a.callback)if(null===(n=t.prefs)||void 0===n?void 0:n.pref)b.a.removeListener(null===(o=t.prefs)||void 0===o?void 0:o.pref,null===(l=t.prefs)||void 0===l?void 0:l.callback);else if(null===(i=t.prefs)||void 0===i?void 0:i.imageLoadingPref){var c;m.c.removeChangeListener(null===(c=t.prefs)||void 0===c?void 0:c.callback)}else if(null===(s=t.prefs)||void 0===s?void 0:s.animationPref){var u;O.a.accessibilityFeatures.animationPolicy.onChange.removeListener(null===(u=t.prefs)||void 0===u?void 0:u.callback)}else if(null===(r=t.prefs)||void 0===r?void 0:r.panelState){var d;h.d.removeChangeListener(null===(d=t.prefs)||void 0===d?void 0:d.callback)}})}(P.items),P.tokens.forEach(e=>{e.remove()})),P.name=e,P.radioCounter=1,P.radioGroup={},P.items=[],P.tokens=[],P.hasBookmarkContainer=!1,P.bookmarkExtrasEdge="below",t?t.forEach(e=>{const t=G(e,!0);t&&P.items.push(t)}):console.error("No entries in menu:",e),Y(P.items,P.tokens,!0),P.installed=!0}function Y(e,t,a){const n=(e,t)=>{e.statestrings&&(e.label=e.statestrings[t?1:0].label,e.labelEnglish=e.statestrings[t?1:0].labelEnglish),e.checked=t},i=(e,t)=>{t.callback=()=>{if("function"==typeof t.isChecked){const a=t.isChecked();e.checked!==a&&(n(e,a),J.emitChange("menuState"))}}};e.forEach(e=>{if(e.items)Y(e.items,t,a);else if(e.prefs){const s=e.prefs;if(s.pref)"function"==typeof s.isChecked&&(n(e,s.isChecked()),a&&(i(e,s),s.pref&&s.callback&&b.a.addListener(s.pref,s.callback)));else if(s.imageLoadingPref)"function"==typeof s.isChecked&&(n(e,s.isChecked()),a&&(i(e,s),s.callback&&m.c.addChangeListener(s.callback)));else if(s.animationPref)a&&(s.callback=function(){O.a.accessibilityFeatures.animationPolicy.get({},({value:e})=>{const t=e===s.animationPref;this.checked!==t&&(n(this,t),J.emitChange("menuState"))})}.bind(e),s.callback(),s.callback&&O.a.accessibilityFeatures.animationPolicy.onChange.addListener(s.callback));else if(s.panelState)switch(s.panelState){case"SHOW_PANEL":case"SHOW_CONTENT":"function"==typeof s.isChecked&&(n(e,s.isChecked()),a&&(i(e,s),s.callback&&h.d.addChangeListener(s.callback)))}else s.windowState&&"function"==typeof s.isChecked&&(n(e,s.isChecked()),a&&(i(e,s),s.callback&&t.push(C.a.addListener(s.callback))))}})}function $(e,t){const a=b.a.get(I.kChainedCommandsCommandList),n=e=>{for(let i=0;i<e.length;i++){const r=e[i];let o=!1;if(r.commandName){for(let e=a.length-1;e>=0;e--){const t=a[e];if(t.name===r.commandName){r.handler||(r.handler=()=>Object(k.b)(t.chain)),void 0===r.label&&(r.label=t.label||""),void 0===r.labelEnglish&&(r.labelEnglish=t.labelEnglish||t.label||""),o=!0;break}}if(!o)for(let e=0;e<B.length;e++){const t=B[e];if(t.name===r.commandName){r.handler||(r.handler=W(t)),r.withNoWindow=t.withNoWindow,void 0===r.label&&(r.label=t.label||""),void 0===r.labelEnglish&&(r.labelEnglish=t.labelEnglish||""),o=!0;break}}}if(o||"command"!==r.type||(void 0===r.label&&(r.label=r.commandName||""),void 0===r.labelEnglish&&(r.labelEnglish=r.commandName||""),r.visible=!1,r.handler=()=>{}),r.items)n(r.items);else if(r.container&&t)if(!0===r.container.cpp)if("CONTAINER_BOOKMARK"===r.container.content){const e=r.container.edge||P.bookmarkExtrasEdge,t=b.a.get(I.kBookmarksManagerSorting),a=f.a.toMenuSorting(t.sortOrder,t.sortField),n={id:s.b.getRootId(),type:T.a.menubarMenu.ContainerType.BOOKMARKS,offset:0,edge:e,groupFolders:t.sortOrder!==f.a.NO_SORTING,sortField:a.field,sortOrder:a.order};r.container&&(r.container.details=n)}else r.container.content;else{let t=[],a=void 0,n=void 0;"CONTAINER_WEBPANEL"===r.container.content?t=X():"CONTAINER_PINNED_TAB"===r.container.content?(t=Q(),a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD5SURBVHgBtVHBDYJAEOTQvz59WoJvIPFKwA6kEqES7UCtAPwQflqCDwrgSUIAZ8iRXIAE0DjJZfcuO3O7s4bxIxZziqWU6w2QpmnWvpkzyNuiKJ6maYaWZe1mC4B8ruv6gvSAc2U3kwUcx/EZ4zgO0IHLPM/zRkAMFMuqqvbtXQixxs8uiB7iiW9lWXpJkryZL7sCJIMkURzxjkjDAsRmBHah1/cEgDsKj4wofvEBpvHnW5dM9DxQpMYo3W3ViTEqQA9U2hMZFeCuOSs8CHURejJJgLtGoEiGs2rHoaHYwmNIQGit+2pNkb6mSWDrtm3Xyu3vMGbW3/ABNRKFPPHD6XUAAAAASUVORK5CYII=",n="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///+/v7/Hx8e/v7/ExMTFxcXFxcXExMTFxcXDw8PDw8PExMTFxcXExMTExMTGxsbQpf+eAAAAEHRSTlMAECAg398wv3+AQI9g7/8/FKJcHQAAAFFJREFUeAFjQAWMClCGSRiUUZEqAKY5C6aC5FZ0bF1eBOK3d/R4gCVSEzg2gBlsYRwNYMay1Awwg9k3LRzMYH/6IWMBiDEPqBUs8wJmYQKaAwANFhLITP6v6wAAAABJRU5ErkJggg=="):"CONTAINER_CLOSED_TAB"===r.container.content?t=Z():"CONTAINER_TAB"===r.container.content?t=q():"CONTAINER_PERIODIC_RELOAD"===r.container.content&&(t=p.a.getForActivePage()),"folder"===r.container.mode?(delete r.container,r.type="folder",r.items=t,r.iconPNG=a,r.iconPNGWhite=n):(e.splice(i,1,...t),i+=t.length-1)}}},i=Object(y.a)(e);return n(i),i}function X(){return h.d.getWebPanelOrder().map((e,t)=>{const a=h.d.getWebPanels().filter(t=>t.id===e)[0],n=j["COMMAND_SHOW_WEB_PANEL_"+(t+1)],i=n&&n.shortcut?n.shortcut:[];return{...c.a.makeNumberMnemonic(a.title||a.url||Object(w.a)("Unknown Web Panel"),t),commandName:"JS_LOCAL_TOGGLE_WEBPANEL",parameter:e,handler:d.a.toggleContent.bind(this,e),url:a.activeUrl,shortcuts:i}})}function Z(){const e=e=>{return(t=D.p.getDisplayTitle(e)).length>70&&(t=t.substring(0,70)+"..."),t;var t},t=N.a.getTrash().map((t,a)=>{if(t.tab){const n=t.tab;return{...c.a.makeNumberMnemonic(e(n),a),url:n.url,handler:()=>g.a.undeleteTab(n)}}const n=t.window;if(null==n?void 0:n.tabs){const{tabs:t}=n;return{...Object(S.a)("Window with $1 Tab","Window with $1 Tabs",[t.length]),items:t.map((t,a)=>({...c.a.makeNumberMnemonic(e(t),a),url:t.url,handler:()=>g.a.undeleteTab(t)})).concat([c.a.separatorItem,{handler:()=>g.a.undeleteWindow(n),...Object(S.a)("Restore All")}])}}}).filter(Boolean),a=t.length;return t.push(c.a.separatorItem),t.push({handler:g.a.emptyTrash,visible:a>0,...Object(S.a)("verb","Clear All")}),t}function Q(){const e=C.a.getActiveBrowserOrPopupWindowId();return m.c.getTabs(e,!1).toArray().filter(e=>"tab"===e.type&&e.page.pinned).map((e,t)=>{const a=e.page;return{...c.a.makeNumberMnemonic(D.p.getDisplayTitle(a),t),handler:()=>u.a.activateTab(a.id,a.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:a.get("url"),parameter:a.get("id").toString(),emphasized:a.get("active")}})}function q(){const e=C.a.getActiveBrowserOrPopupWindowId();return m.c.getTabs(e,"off"===b.a.get(I.kTabsStackingMode)).toArray().filter(e=>"tab"===e.type&&!e.page.pinned||"group"===e.type).map((e,t)=>{if("tab"===e.type){const a=e.page;return{...c.a.makeNumberMnemonic(D.p.getDisplayTitle(a),t),handler:()=>u.a.activateTab(a.id,a.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:a.get("url"),parameter:a.get("id").toString(),emphasized:a.get("active")}}if("group"===e.type)return{...c.a.makeNumberMnemonic(m.c.getTitleByGroupId(e.id,e.page.get("title")),t),iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBvZJLCsAgDERj8SD2Gnp+vYbeJDXQRQlNiB98C7NweAwkAIs4elJKtY8ghRCxlVJu0dIFCAra/wVGSBJjrNOCnLPrhGmB1GRYwJsMCzjLAv/Opq2K7gAsWO/hm/Msc7bJX4O9TY7wAFQ4MpFfIoDNAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAPElEQVR42mNgIAyO3D/yHxkevY+u4D9+PhYFaKZgMwFFDLsCJFNwmQAXp4ICLOFApEMJhCYRAUZqnJAJALGlehnFYWcIAAAAAElFTkSuQmCC",items:e.pages.toArray().map((e,t)=>({...c.a.makeNumberMnemonic(D.p.getDisplayTitle(e),t),handler:()=>u.a.activateTab(e.id,e.windowId),commandName:"JS_LOCAL_ACTIVATE_TAB",url:e.get("url"),parameter:e.get("id").toString(),emphasized:e.get("active")}))}}).filter(Boolean)}const J=new class extends o.a{getIsInitialized(){return M}getClosedTabContainer(){return Z()}getCommandShortcuts(){return z("shortcut",!1)}getCommandsGestures(){return z("gestures",!0)}getCommands(){return B}getQuickCommands(){return this.getCommands().filter(e=>{const t=j[e.name];(null==t?void 0:t.shortcut)&&(e.shortcut=t.shortcut);let a=!0;"function"==typeof e.isEnabled?a=e.isEnabled():void 0!==e.isEnabled&&(a=e.isEnabled);const n=!e.inContext||e.inContext();let i;return i="function"==typeof e.showInQC?e.showInQC():e.showInQC,a&&n&&i})}getAllCommands(){return B.concat(b.a.get(I.kChainedCommandsCommandList)).reduce((e,t)=>{if("function"==typeof t.isEnabled&&!t.isEnabled())return e;const a=j[t.name];return e.push({...t,...a}),e},[])}getVivDefinedCommands(){return this.getUserEditableCommands().filter(e=>"CATEGORY_COMMAND_CHAIN"!==e.category)}getChainCommandsShortcuts(){return this.getUserEditableCommands().filter(e=>"CATEGORY_COMMAND_CHAIN"===e.category).map(e=>({name:e.name,shortcuts:e.shortcut}))}isCommandWhitelisted(e){for(const t in j)if(void 0!==j[t]){const a=j[t];if(a.shortcut&&a.shortcut.includes(e))return R.includes(t)}return!1}isActionWhitelistedForSettings(e){return R.includes(e)}isNamedMenuAvailable(e){return P.name===e}getNamedMenu(e,t){return this.isNamedMenuAvailable(e)?$(P.items,t):[]}getBookmarkExtrasEdge(){return P.bookmarkExtrasEdge}makeMenuWithContent(e,t){const a=[];return e.forEach(e=>{const t=G(e,!1);t&&a.push(t)}),$(a,t)}getMenuItem(e,t){let a=e;"container"!==a.type||t||(a={...e,containermode:"folder"});const n=this.makeMenuWithContent([a],!t);return 1!==n.length||"separator"!==n[0].type&&void 0===n[0].label?{label:e.action,labelEnglish:e.action}:(Y(n,[],!1),n[0])}getHandlerByAction(e,t){let a;switch(e){case"JS_LOCAL_ACTIVATE_TAB":{const e=parseInt(t),n=m.c.getPageById(e);n&&(a=()=>u.a.activateTab(n.id,n.windowId));break}case"JS_LOCAL_ADD_ACTIVE_TAB_TO_BOOKMARKS":{const e=t,n=m.c.unsafeGetActivePage();n&&e&&(a=()=>i.a.bookmarkPageInFolder(n,e));break}case"JS_LOCAL_TOGGLE_WEBPANEL":const s=t;s&&(a=()=>d.a.toggleContent(s));break;case"COMMAND_OPEN_LINK":t&&(a=()=>{const e=n.a.getOpenOptionsFromDisposition("setting",!1,{});u.a.openURL(t,{...e})});break;default:void 0!==t&&(a=p.a.getHandlerByAction(e,t))}return a}getUserEditableCommands(){return this.getAllCommands().filter(e=>!e.name.includes("COMMAND_OPEN_LINK"))}makeCommandList(e){const t=B.filter(t=>e?e===t.name:!1!==t.inMenu);return void 0===e&&t.push.apply(t,x.filter(e=>!(e=>!!(e.hideInSettings||"CONTAINER_BOOKMARK"===e.name&&P.hasBookmarkContainer))(e)).map(e=>({name:e.name,behavior:"container"}))),J.makeMenuWithContent(t.map(e=>{switch(e.behavior){case"checkbox":return{id:e.name,action:e.name,type:"checkbox"};case"radio":return{id:e.name,action:e.name,type:"radio"};case"container":return{id:e.name,action:e.name,containermode:"folder",type:"container"};default:return{id:e.name,action:e.name,parameter:e.parameter,type:"command"}}}),!1)}getCommandParameter(e){const t=B.filter(t=>t.name===e);if(1===t.length)return t[0].parameter}getCommandLabel(e){const t=B.filter(t=>t.name===e);if(1===t.length)return t[0].label}getOpenLinkName(){return"COMMAND_OPEN_LINK"}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};_.a.register(e=>{switch(e.actionType){case v.a.COMMAND_INITIALIZE:e.commands.forEach(e=>{V(e.command,e.value)}),H(),M=!0,J.emitChange("init");break;case v.a.COMMAND_SET_NAMED_MENU:K(e.name,e.content),J.emitChange("menu");break;case v.a.COMMAND_UPDATE_COMMAND:V(e.commandKey,e.commandValue),H(),J.emitChange("shortcut");break;case"COMMAND_UPDATE_SHORTCUT_CHAIN":!function(e){const{name:t}=e,a=j[t];if(a){const{shortcut:t}=a;if(null==t?void 0:t.length){l.a.unbind(t);const{chain:a}=e;l.a.bind(t,()=>Object(k.b)(a))}}}(e.info);break;case"COMMAND_REMOVE_CONFIG":!function(e){if(j[e]){const{shortcut:t}=j[e];delete j[e],E.a.remove(e),(null==t?void 0:t.length)&&l.a.unbind(t)}T.a.menuContent.removeAction([e])}(e.commandKey),J.emitChange("shortcut");break;default:return}});t.default=J},,function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"t",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return f})),a.d(t,"o",(function(){return _})),a.d(t,"q",(function(){return E})),a.d(t,"b",(function(){return C})),a.d(t,"g",(function(){return w})),a.d(t,"m",(function(){return O})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return S})),a.d(t,"p",(function(){return T})),a.d(t,"l",(function(){return k})),a.d(t,"e",(function(){return A})),a.d(t,"n",(function(){return I})),a.d(t,"u",(function(){return D})),a.d(t,"r",(function(){return M})),a.d(t,"h",(function(){return P})),a.d(t,"d",(function(){return x})),a.d(t,"s",(function(){return L}));var n=a(112),i=a.n(n),s=a(641),r=a.n(s),o=a(84),l=a.n(o),c=a(37),u=a(691);const m=["vivaldi:","chrome:","chrome-extension:"],d=["about:","data:","javascript:","view-source:"],h=[...m,...d,"file://","ftp://","http://","https://"],p=[...m,"ftp://","http://","https://"];function b(e){return D(e).split("?")[0].split("#")[0]}function g(e){const t=e?e.split("?"):[];try{return t.length>1?r.a.parse(t[1]):{}}catch(e){return console.warn(e),{}}}function N(e,t,a){const n=D(e.toLocaleLowerCase()),i=D(t.toLocaleLowerCase());return a?n&&i&&b(n)===b(i):n&&i&&n===i}function f(e){if(!e.trim())return"";if(Object(u.b)(e))return l.a.format({host:Object(u.a)(e),protocol:"file"});const t=l.a.parse(e);if(!t.protocol){const t=l.a.format({host:e,protocol:"http"});return l.a.parse(t).format()}if(!t.slashes&&!h.includes(t.protocol)){const t=l.a.format({host:e,protocol:"http"});return l.a.parse(t).format()}return t.format()}function _(e){const t=l.a.parse(e),a=parseInt(t.port);return!!(t.protocol&&t.host&&t.slashes&&(null===t.port||a>=0&&a<=65535))}const v=new RegExp(`^(//|${h.join("|")})`,"g");function E(e){return e.replace(v,"")}const C=f;function w(e){return e=e.toLowerCase(),!h.some(t=>e.startsWith(t))}function O(e){return e=e.toLowerCase(),d.some(t=>e.startsWith(t))}function y(e){return e=e.toLowerCase(),["file:","localhost:"].some(t=>e.startsWith(t))}function S(e){const t=l.a.parse(e).protocol;return!!t&&m.some(e=>-1!==e.indexOf(t))}const T=i()(100)(S);function k(e){return e.startsWith("/resources/")}function A(e){if(e.includes(c.o)){const t=c.o+"/browser.html#";e=e.includes(t)?e.substr(t.length-1,e.length):"http://"+e.substr(c.o.length+1,e.length)}else e.match(/^[a-zA-Z]+:\/\//)||(e="http://"+e);return e}function I(e){if(0===e.length)return!1;const t=e.endsWith("."),a=/^localhost/.test(e),n=!e.includes(" ")&&e.indexOf(".")>0,i=!w(e)&&""!==E(e),s=f(e),r=p.find(e=>s.startsWith(e))||"a^";if(RegExp(`(${r}).+:`).test(s)){const e=s.lastIndexOf(":")+1,t=parseInt(s.substring(e,s.length));return t>=0&&t<=65535}return!t&&(a||n||i)}function D(e){return e.replace(/^\/+|\/+$/gm,"")}function M(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}function P(e){return j.test(e)}function x(e,t){return e.includes(".")?e:`${e}.${t}`}function L(e){return e.replace(/\s/g,"").replace(/^([a-z]+?:\/?\/?[^\/]*)\/*?(\/[\?#].*)?$/,"$1$2")}const j=/^(([^/<>()\[\]\.,;:\s@\"]+(\.[^/<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^/<>()[\]\.,;:\s@\"]{2,})$/i},function(e,t,a){"use strict";var n=a(6),i=a(2),s=a(10),r=a(207),o=a(43),l=a(1),c=a(98),u=a(171),m=a(23);var d=a(58),h=a(172),p=a(99),b=a(166),g=a(68),N=a(119),f=a(145),_=a(175),v=a(29),E=a(282),C=a(56),w=a(65),O=a(12),y=a(16),S=a(239),T=a(8),k=a(49),A=a(34),I=a(241),D=a(513),M=a(80);var P=async function(e,t){const{searchListId:a,sentDate:n,threadKey:i}=e;return await T.a.searchList.update(a,{unseen:t}),[{id:a,sentDate:n,threadKey:i,updates:{unseen:t}}]},x=a(60),L=a(156),j=a(280),R=a(539),B=a(3),F=a(261),U=a(284),H=a(104),V=a(7);function W(e,t){const a=e.replace(/\bfrom:/g,"fromAddress:").replace(/\bto:/g,"toAddress:").replace(/(\S*[@\.]+\S*)/g,'"$1"'),n=Date.now();return w.a.setStatus(Object(i.a)("Searching for $1...",[a])),async function(e){return new Promise(t=>{try{V.a.mailPrivate.searchMessages(e,t)}catch(t){console.error(`Search failed for query: ${e}`,t)}})}(a).then(e=>{if(t()){const e=`Discarding results for outdated query: ${a}`;throw H.a.log(e),new Error(e)}{const t=Date.now()-n;return w.a.setStatus(Object(i.a)("Search for $2 returned $1 result in $3ms.","Search for $2 returned $1 results in $3ms.",[e.length,a,t])),H.a.log(`search for ${a} returned ${e.length} results in ${t}ms`),e}})}var z=a(66),G=a(717);function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Y=new class{constructor(){K(this,"markSeenDebounced",Object(U.a)(async e=>{const t=await P(e,!1);await Object(M.a)({priority:B.p.HIGH,type:"RE_RUN_SLES",searchListIds:[e.searchListId]}),Y.updateIndex({sleUpdates:t}),x.a.filter()},1e3)),K(this,"lastNotificationSentDates",new Map),k.a.on("updateFilters",e=>this.updateFilters(e))}updateThreadKeys(e){O.a.dispatch({actionType:"MAIL_UPDATE_THREAD_KEYS",updates:e})}addAccounts(e){O.a.dispatch({actionType:"MAIL_ADD_ACCOUNTS",accounts:e})}setDisconnected(e,t,a){O.a.dispatch({actionType:"MAIL_IS_DISCONNECTED",accountId:e,isDisconnected:t,errorMessage:a})}setConnecting(e,t){O.a.dispatch({actionType:"MAIL_IS_CONNECTING",accountId:e,isConnecting:t})}replaceAccounts(e){O.a.dispatch({actionType:"MAIL_REPLACE_ACCOUNTS",accounts:e})}setAllMailsInFolderAsReadCmd(){const e=C.a.getSelectedFolder();if(e){const{accountId:t,path:a}=e;Y.setAllMailsInFolderAsRead(t,a)}}deleteEntriesFromFolderCmd(){const e=C.a.getSelectedFolder();if(e){const{accountId:t,path:a}=e;Y.deleteEntriesFromFolder(t,a)}}async deleteEntriesFromFolder(e,t){const a=v.a.getListEntriesByFolder(e,t);await g.a.prepareDelete(!0,a)}moveAllToTrash(e,t,a){const n=v.a.getListEntriesByFolder(e,t);g.a.prepareDelete(!1,n,a)}setAllMailsInFolderAsRead(e,t){const a=v.a.getListEntriesByFolder(e,t),n=v.a.getByFolderId([e,t]);if(!n)throw new Error("Filter not found");const i=a.filter(e=>!Object(h.a)(e.sources,n)),s=I.a.setRead(i,!0);Y.updateIndex({sleUpdates:s})}async removeAccount(e,t,a){await T.a.transaction("rw",[T.a.buffer,T.a.accounts],async()=>{await Object(D.a)({accountId:e,path:"",operation:"BUFFER_OPERATION_REMOVE_ACCOUNT",deleteFiles:t}),await T.a.accounts.delete(e)}),a===B.J.IMAP&&await _.a.disconnectIMAPClient(e),O.a.dispatch({actionType:"MAIL_REMOVE_ACCOUNT",accountId:e}),x.a.removeFolders(e),N.a.flushBuffer()}async removeAccountPath(e,t,a){await T.a.transaction("rw",[T.a.buffer,T.a.accounts],async()=>{await Object(D.a)({accountId:e,path:t,operation:"BUFFER_OPERATION_REMOVE_ACCOUNT_PATH",deleteFiles:!0}),a===B.J.IMAP&&await T.a.accounts.where("accountId").equals(e).modify(e=>{delete e.folders[t]})}),N.a.flushBuffer()}setSearchOptions(e){O.a.dispatch({actionType:"MAIL_SEARCH_SET_OPTIONS",options:e})}async addLabelsFilter(e){const t={name:Object(z.h)(e),accountId:B.E,path:e,filterValue:{include:[[{flag:e}]],exclude:A.b.getSearchListButtonExcludeRules(B.E),...A.b.getSearchListButtons(B.E)}},a=await f.a.addAndModifyParents(t,{include:[[{flag:e}]]},B.p.NORMAL);x.a.updateFilters(a)}async addFilter(e,t=!0){let a;await T.a.transaction("rw",[T.a.filters,T.a.filteringQueue],async()=>{a=await f.a.add(e),t&&Object(M.a)({type:"RUN_FILTERS",priority:B.p.HIGH,folderIds:[[e.accountId,e.path]],updateFilters:!0})}),a&&await x.a.updateFilters(a),t&&x.a.filter()}async putFilter(e,t){const a=function(e,t){if(e.filterValue.query!==t.filterValue.query)return!0;const{filterValue:a}=Object(p.a)(e,e=>{A.b.removeOptionalRules(e)}),{filterValue:n}=Object(p.a)(t,e=>{A.b.removeOptionalRules(e)});return!Object(F.default)(a.include,n.include)||!Object(F.default)(a.exclude||[],n.exclude||[])}(e,t);await T.a.transaction("rw",[T.a.filters,T.a.filteringQueue],async()=>{const t=await f.a.put(e);x.a.updateFilters(t),a&&Object(M.a)({type:"RUN_FILTERS",priority:B.p.HIGH,filterIds:[e.id],updateFilters:!0})}),a&&x.a.filter()}async addContactFilters(e,t=!1,a=!1){const n=[],i=B.i;for(const s of e){const e={...s,address:s.address.toLowerCase()},r=e.address;if(!v.a.filterExists(i,r)){const s={name:r,accountId:i,path:r,filterValue:{include:[[{from:e}],[{to:e}]],...A.b.getSearchListButtons(B.i)}};a&&(s.filterValue.showFeeds=!0),n.push(s),t&&await Object(M.a)({type:"RUN_FILTERS",priority:B.p.LOW,folderIds:[[i,r]],updateFilters:!0})}}if(n.length>0){const e=await f.a.bulkAddIfNotExists(n);x.a.updateFilters(e),t&&x.a.filter()}}async runSystemTasks(){await Object(G.b)()}async runSystemTask(e){await Object(G.a)(e)}async removeFilter(e){await f.a.remove(e),x.a.updateFilters([e]),x.a.filter()}async rerunFilter(e,t){await Object(M.a)({type:"RUN_FILTERS",priority:B.p.LOW,folderIds:[[e,t]]}),x.a.filter()}async runStoredQueryFilters(e){const t=v.a.getByAccountId(B.M);if(0===t.length)return;const a=t.map(e=>[e.accountId,e.path]);await Object(M.a)({type:"FILTERS_SLES",priority:B.p.NORMAL,folderIds:a,searchListIds:e}),x.a.filter()}async updateFilters(e){O.a.dispatch({actionType:"MAIL_FILTERS_CHANGED",filterIds:e});const t=[];e.forEach(e=>A.b.getAllViewTypes().forEach(a=>t.push(e*B.Z+a))),Y.updateCounters(t)}async toggleMoveToOther(e){const t=e.path;let a,n,i="";t.startsWith(B.fb)?(a=B.t,i=B.fb,n=t.substr(B.fb.length+1)):(a=B.fb,i=B.t,n=t.substr(B.t.length+1));const s=await f.a.moveAndModifyParents(e.accountId,i,a,n);x.a.updateFilters(s),Y.selectFolder({...e,path:[a,n].join("/"),id:B.G+"_"+[a,n].join("/")}),x.a.filter()}async removeMailingListFilter(e){const t=e.filterValue.include,a=t&&t[0],n=a&&a[0];if(null==n?void 0:n.listId){const t=n.listId,a={listId:t,name:t,parentFolderType:"matches",subFolderType:"none",isIgnored:!0};await L.a.updateMailingListGroup(a),await N.a.updateMailingListGroup(a);const i=await f.a.removeAndModifyParents(e,{include:e.filterValue.include},B.p.LOW);x.a.updateFilters(i),O.a.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:a}),x.a.filter()}else(null==n?void 0:n.senderIsMailingList)&&await Y.toggleSenderAsMailingList(n.senderIsMailingList)}async toggleSenderAsMailingList(e){const t=B.F,a=[B.t,B.fb],n=[{senderIsMailingList:e}],i=a.map(a=>v.a.getByFolder(t,[a,e].join("/"))).find(e=>void 0!==e);if(i){const e=await f.a.removeAndModifyParents(i,{include:[n]},B.p.LOW);x.a.updateFilters(e)}else{const a={name:e,accountId:t,path:`${B.t}/${e}`,filterValue:{include:[n],exclude:[[{flag:B.O.DELETED}]],...A.b.getSearchListButtons(B.F)}},i=await T.a.filters.where("[accountId+path]").equals([B.i,e]).first();if(!i)throw new Error("Contact filter not found "+e);const s=i.id*B.Z+B.ab,r=v.a.getIndex().filter(e=>e.viewIds.includes(s)).map(e=>e.searchListId),o=await f.a.addAndModifyParents(a,{include:[n]},B.p.LOW,r);x.a.updateFilters(o)}x.a.filter()}updateQueryResults(e){if(e.length>0){if(Y.changeQuery(e),e.length>2){const t=E.a.getOptions().allMessages||!1,a=function(e){return e.length>2&&e.length>v.a.getQuery().length&&e.substr(0,v.a.getQuery().length)===v.a.getQuery()}(e);W(e,(function(){return e!==v.a.getQuery()})).then(e=>{O.a.dispatch({actionType:"MAIL_UPDATE_QUERY_RESULTS",queryResults:e,queryAllMessages:t,isQueryContinuation:a})}).catch(()=>{})}}else Y.clearQuery()}changeQuery(e){O.a.dispatch({actionType:"MAIL_QUERY_CHANGE",query:e})}clearQuery(){O.a.dispatch({actionType:y.a.MAIL_CLEAR_QUERY})}async regenerateUncategorizedMailingLists(){const e=v.a.getByAccountId(B.F),t=j.a.mailingListGroupToFilters(e),a=L.a.getGroups(),n=t.filter(e=>!a.some(t=>t.listId===e.path.split("/")[1]));await Y.regenerateMailingLists(n,!0)}async regenerateAllMailingLists(){const e=v.a.getByAccountId(B.F),t=j.a.mailingListGroupToFilters(e);await Y.regenerateMailingLists(t,!0)}async regenerateExistingMailingListGroup(e,t){var a;const n=v.a.getByAccountId(B.F),i=j.a.mailingListGroupToFilters(n,t);if(null===(a=L.a.get(B.H))||void 0===a?void 0:a.isIgnored)await Y.regenerateMailingLists(i,!0);else{const e=j.a.mailingListGroupToFilters(n,t),a=[...new Set([...i,...e])];await Y.regenerateMailingLists(a,!1)}}async regenerateMailingListGroup(e,t=!1){const a=v.a.getByAccountId(B.F),n=j.a.mailingListGroupToFilters(a,e);await Y.regenerateMailingLists(n,t)}async regenerateMailingLists(e,t=!1){let a;if(!t){const t=e.map(e=>A.b.getTotalViewByFilterId(e.id));a=v.a.getListEntryIdsByViewIds(new Set(t))}for(const t of e){const e=await f.a.removeAndModifyParents(t,{include:t.filterValue.include},B.p.LOW);x.a.updateFilters(e)}await Object(M.a)({priority:B.p.LOW,type:"RE_RUN_SLES",searchListIds:a,runMailingLists:!0,updateFilters:!0}),x.a.filter()}async refreshMailingList(){await Object(M.a)({priority:B.p.LOW,type:"RE_RUN_SLES",runMailingLists:!0,updateFilters:!0}),x.a.filter()}async removeMailingListGroup(e){await L.a.removeMailingListGroup(e),await N.a.removeMailingListGroup(e),await Y.regenerateMailingListGroup(e),O.a.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async removeIgnoredMailingList(e){await L.a.removeMailingListGroup(e),await N.a.removeMailingListGroup(e),await Y.refreshMailingList(),O.a.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}initializeMailAccounts(){return b.a.getAccountsAndFolders().then(e=>{Y.replaceAccounts(e.accounts),d.a.initFolders(e.folders)})}async initializeMailFiltersStore(){Y.initMailingLists(),await Y.initFilters(),await Y.initIndex()}async initIndex(){const e=await T.a.searchList.count();let t=1e3,a=-1;await async function n(){const i=Date.now(),[s,r]=await Promise.all([T.a.searchList.where("id").above(a).limit(t).toArray(),T.a.viewIds.where("searchListId").above(a).limit(t).toArray()]);if(O.a.dispatch({actionType:"MAIL_INIT_INDEX_BATCH",sleBatch:s,viewIdsBatch:r,total:e}),s.length===t){const{id:e}=s[t-1];a=e;const r=Date.now();t=S.a.adjustBatchSize(1e3,1e5,50,t,r-i),await n()}}(),O.a.dispatch({actionType:"MAIL_INIT_INDEX_FINISHED"})}updateIndex(e){O.a.dispatch({actionType:"MAIL_INDEX_UPDATE",updates:e});const{sleUpdates:t=[]}=e,a=v.a.getQuery(),h=Y.getViewIntersection();let p=!1;const b=new Set(n.a.get(l.kMailAccounts).filter(e=>e.offline).map(e=>e.MAIL_EMAIL));t.forEach(e=>{if(a){const t=v.a.getListEntryByUniqueKey(e);if(!t)return void console.warn("ListEntry not found "+JSON.stringify(e));const{updates:a}=e;p=v.a.matchesViewIntersection(t.viewIds,h)||Array.isArray(a.viewIds)&&v.a.matchesViewIntersection(a.viewIds,h)}if(n.a.get(l.kMailNotifications)){const{addedViewIds:t}=e.updates;if(null==t?void 0:t.some(t=>{if(t%B.Z!=0)return!1;const a=t/B.Z,n=k.a.get(a);if(!n)return!1;const{accountId:i,path:s}=n;if(b.has(i))return!1;if(!(d.a.getFolderType(i,s)===B.v))return!1;const r=Y.lastNotificationSentDates.get(i)||0;return e.sentDate>r&&(Y.lastNotificationSentDates.set(i,e.sentDate),!0)})){const t=v.a.getListEntryByUniqueKey(e);t&&function(e){const t=Object(c.e)(r.a.get(e.fromIds)),a=Object(c.e)(r.a.get(e.toIds));Object(u.a)({title:e.subject,body:Object(i.a)("New mail from $1 to $2",[t,a]),icon:"resources/mail_notification_icon.png",silent:!n.a.get(l.kMailNotificationsSoundOn),onClick:()=>{const t=`message/${e.searchListId}`,a=m.p.internalUrl("mailpage",t,Object(i.a)("Mail"));o.c.openURL(a);const n=s.a.extension.getViews().find(e=>e.isMailWindow);n&&s.a.windows.update(n.vivaldiWindowId,{drawAttention:!0})}})}(t)}}}),p&&Y.updateQueryResults(a)}initMailingLists(){O.a.dispatch({actionType:"MAILING_LIST_GROUPS_INIT"})}async updateMailingListGroupName(e){await L.a.updateMailingListGroup(e),await N.a.updateMailingListGroup(e),await f.a.updateName([[B.F,B.t+"/"+e.listId],[B.F,B.fb+"/"+e.listId]],e.name),O.a.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async updateMailingListGroup(e){const t=L.a.get(e.listId);if(await L.a.updateMailingListGroup(e),await N.a.updateMailingListGroup(e),"uncategorized"===e.parentFolderType)await Y.regenerateUncategorizedMailingLists();else if((null==t?void 0:t.isIgnored)&&!e.isIgnored)await Y.refreshMailingList();else if(t)await Y.regenerateExistingMailingListGroup(t,e);else{const t=!0;await Y.regenerateMailingListGroup(e,t)}O.a.dispatch({actionType:"MAILING_LIST_GROUP_CHANGED",mailingListGroup:e})}async initFilters(){await k.a.initFilters(),O.a.dispatch({actionType:"MAIL_FILTERS_INIT"})}async start(){w.a.setPersistentStatus("MAIL_DB_OPEN",Object(i.a)("Opening mail DB - This may take time if upgrades are due...")),await T.a.open(),w.a.clearPersistentStatus("MAIL_DB_OPEN"),await Y.initializeMailAccounts(),await Y.initializeMailFiltersStore()}stop(){O.a.dispatch({actionType:"MAIL_STOP"}),k.a.clear(),R.a.clear(),r.a.clear(),d.a.clear()}addAccountIndicator(e,t,a=0,n=0){O.a.dispatch({actionType:"MAIL_INDICATOR_ADD_ACCOUNT",accountId:e,indicator:t,current:a,total:n})}addPathIndicator(e,t,a,n=0,i=0){O.a.dispatch({actionType:"MAIL_INDICATOR_ADD_PATH",accountId:e,path:t,indicator:a,current:n,total:i})}removeAccountIndicator(e,t){O.a.dispatch({actionType:"MAIL_INDICATOR_REMOVE_ACCOUNT",accountId:e,indicator:t})}removePathIndicator(e,t,a){O.a.dispatch({actionType:"MAIL_INDICATOR_REMOVE_PATH",accountId:e,path:t,indicator:a})}removeAllIndicators(e){O.a.dispatch({actionType:"MAIL_INDICATOR_REMOVE_ALL",accountId:e})}applyFilter(){O.a.dispatch({actionType:y.a.MAIL_APPLY_FILTER})}updateCounters(e){let t;t=e||k.a.getAll().reduce((e,t)=>{const a=A.b.getAllViewTypes().map(e=>t.id*B.Z+e);return e.concat(a)},[]);const a=v.a.getCounterFolders(t);0!==a.length&&(v.a.getIndex().forEach(e=>{const{viewIds:t}=e;a.forEach(e=>{if(!t.includes(e.totalViewId))return;const{viewIntersections:a,counter:n}=e;a.total.every(e=>t.includes(e))&&n.total++,a.unseen.every(e=>t.includes(e))&&n.unseen++,a.unread.every(e=>t.includes(e))&&n.unread++})}),O.a.dispatch({actionType:"MAIL_UPDATE_COUNTERS",countedFolders:a,deltaValues:!1}))}pageForward(){const e=C.a.getHistoryIndex();Y.selectFolderFromHistory(e+1)}pageBack(){const e=C.a.getHistoryIndex();Y.selectFolderFromHistory(e-1)}selectFolderFromHistory(e){const t=C.a.getOptionsFromHistory(e);O.a.dispatch({actionType:"MAIL_FOLDER_SELECT_HISTORY_INDEX",historyIndex:e}),t.threadPrefix?$(t.threadPrefix):X()}selectFolder(e,t={}){O.a.dispatch({actionType:"MAIL_SELECT_FOLDER",folder:e,options:t}),t.threadPrefix?$(t.threadPrefix):X(e)}reselectFolderOnSubscriptionChange(e,t,a){const n=C.a.getSelectedFolder();if(n&&n.accountId===e&&n.path===t){const e={...n,subscribed:a};Y.selectFolder(e)}}async subscribeMailbox(e,t){const a=C.a.getSelectedFolder();if(a&&!a.subscribed){Y.reselectFolderOnSubscriptionChange(e,t,!0);try{await _.a.subscribeMailbox(e,t)}catch(a){Y.reselectFolderOnSubscriptionChange(e,t,!1),w.a.setStatus(Object(i.a)("Failed to subscribe to mailbox: $1",[a])),console.error(a)}}}async unsubscribeMailbox(e,t,a){const n=C.a.getSelectedFolder();if(n&&n.subscribed)try{Y.reselectFolderOnSubscriptionChange(e,t,!1);try{await _.a.unsubscribeMailbox(e,t,a)}catch(a){throw Y.reselectFolderOnSubscriptionChange(e,t,!0),a}a&&Y.removeAccountPath(e,t,B.J.IMAP)}catch(e){w.a.setStatus(Object(i.a)("Failed to unsubscribe from mailbox: $1",[e])),console.error(e)}}selectThread(e){const t=[e.threadKey[0],e.threadKey[1]],a={accountId:B.ub,path:String(t),id:String(t),name:e.subject},n={threadPrefix:t};Y.selectFolder(a,n)}selectContact(e,t=!1){const a=e.toLowerCase(),n={accountId:B.i,path:a,id:a,name:a},i={forSender:t};O.a.dispatch({actionType:"MAIL_SELECT_FOLDER",folder:n,options:i}),X(n)}orderIndex(e){O.a.dispatch({actionType:"MAIL_INDEX_ORDER",threadingToggled:e});const t=v.a.getQuery();t&&Y.updateQueryResults(t)}getViewIntersection(e,t={}){if(e||(e=C.a.getSelectedFolder()),!e)return;const{accountId:a,path:n=B.m}=e,i=v.a.getByFolder(a,n);return i?A.b.getViewIntersection(i):void 0}undo(){const e=R.a.pop();if(!e)return;const{updates:t,updateItems:a,operation:n,sourcesPerSle:i}=e;if(0!==a.length&&"setFlags"===n){const e=I.a.setCustomFlags(a,t,i,!1);Y.updateIndex({sleUpdates:e})}}};function $(e){O.a.dispatch({actionType:"MAIL_SELECT_THREAD",threadPrefix:e})}function X(e){O.a.dispatch({actionType:"MAIL_INIT_MESSAGES",folderIntersection:Y.getViewIntersection(e)})}t.a=Y},,,function(e,t,a){"use strict";var n=a(79),i=a(11),s=a(6),r=a(35),o=a(10),l=a(7),c=a(1);const u="[bookmark update]",m=function(){return new Promise(e=>{l.a.bookmarksPrivate.updatePartners((t,a,n)=>{o.a.runtime.lastError&&(console.warn(u,"failed to call vivaldi.bookmarksPrivate.updatePartners:",o.a.runtime.lastError.message),t=!1,a=!1),e([t,a,n])})})},d=function(e){const t=function(e,a){for(let n=0;n<e.length;n++){const i=e[n];i.url&&(i.partner?console.warn(u,"partner id in bookmark tree without version:",i.partner,i.url):a.set(i.url,i.id)),i.children&&t(i.children,a)}};return Promise.all([new Promise(e=>{o.a.bookmarks.getTree(t=>{o.a.runtime.lastError&&console.warn(u,"failed to call chrome.bookmarks.getTree:",o.a.runtime.lastError.message),e(t)})}).then(e=>{const a=new Map;return e&&t(e,a),a}),fetch("./default-bookmarks/fallback-partner-ids.json",{method:"GET"}).then(e=>e.json()).then(t=>{let a=t[e];return a||(a=t[r.a.getFallbackLocale()]),a})]).then(([e,t])=>{const a={numMatch:0,size:0};return t?Promise.all(function*(e,t,a){const n=Object.keys(t);e:for(const i of n){const n=t[i];a.size+=1;for(const t of n){const n=e.get(t);if(n){console.warn(u,"Match",i,t),a.numMatch+=1,yield new Promise(e=>{o.a.bookmarks.update(n,{partner:i},()=>{o.a.runtime.lastError&&console.warn(u,"failed to update partner:",i,o.a.runtime.lastError.message),e()})});continue e}}console.warn(u,"No match for",i,n.join(" "))}}(e,t,a)).then(()=>a):a}).then(e=>{console.warn(u,"Urls matched",e.numMatch,"of",e.size)})};var h={init:()=>m().then(([e,t,a])=>t?d(a).then(()=>(i.a.set(c.kBookmarksVersion,"0"),m().then(([e])=>e))):e).catch(e=>(console.warn(u,"error while updating bookmarks:",e),!1)).then(e=>(e||console.warn(u,"failed to update bookmarks, current version:",s.a.get(c.kBookmarksVersion)),e))},p=a(28),b=(a(53),a(13)),g=a(12),N=a(2),f=a(224),_=a(254),v=a(15),E=a.n(v),C=a(26),w=a(351),O=a(23);let y=!0,S=!0;var T=new Map;function k(){y=!0}function A(){y=!1,M()}function I(){g.a.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!0})}function D(){g.a.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!1})}function M(e=!1){const t=o.a.bookmarks.getTree(),a=fetch("./default-bookmarks/partners.json").then(e=>e.json()).catch(()=>(console.warn("Failed to load partner bookmarks"),{bookmarks:[],folders:[]}));return Promise.all([t,a]).then(([t,a])=>{g.a.dispatch({actionType:"BOOKMARKS_INIT",bookmarks:t,failedUpgrade:e,partnerDB:a})})}function P(e,t){y||g.a.dispatch({actionType:"BOOKMARKS_ADD_ITEM",id:e,changes:t})}function x(e,t){y||g.a.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:t})}function L(e,t){y||g.a.dispatch({actionType:"BOOKMARKS_MOVE_ITEM",id:e,changes:t})}function j(e){g.a.dispatch({actionType:"BOOKMARKS_REMOVE_ITEM",id:e})}function R(e,t){y||M()}function B(e){y||g.a.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:{favicon:!0}})}function F(e,t){y||g.a.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:t})}function U(){!1===S&&(S=!0,l.a.bookmarksPrivate.onFaviconChanged.removeListener(B))}function H(){!0===S&&(S=!1,l.a.bookmarksPrivate.onFaviconChanged.addListener(B))}function V(e){"Escape"===e.key&&K.setCutIds([])}function W(e,t){if("BookmarkCutIds"===e){const e=t.length>0?t.split(","):[];e.length>0?window.addEventListener("keydown",V,!0):window.removeEventListener("keydown",V,!0),g.a.dispatch({actionType:"BOOKMARKS_SET_CUT_IDS",ids:e})}}async function z(e){const t=b.c.getTabs(e.windowId,!1,e.pages).map(e=>({page:e.pages?void 0:e.page,url:e.pages?void 0:e.page.get("url"),title:"group"===e.type?b.c.getTitleByGroupId(e.id,Object(N.a)("Stack")):Object(O.c)(e.page),children:e.pages?e.pages.map(e=>({page:e,url:e.get("url"),title:Object(O.c)(e)})).toArray():void 0})).filter(e=>e.children||e.url);if(!t.size)return;const{parentId:a,index:n}=e;if(1!==t.size||e.forceFolder){if(e.isStack){return await Promise.all(t.map(async({children:e,title:t})=>{if(!(null==e?void 0:e.length))return;const n=await o.a.bookmarks.create({parentId:a,title:t});return await K.createBookmarks(e,n.id,0),n.id})).then(e=>e.filter(Boolean)[0])}{const i={parentId:a,..."number"==typeof n?{index:n}:null},s=await o.a.bookmarks.create(i),r=E()(s.dateAdded).format("YYYY-MM-DD, HH:mm:ss"),l=e.isSelection?Object(N.a)("Saved Tab Selection ($1)",[r]):Object(N.a)("Saved Tabs ($1)",[r]);return await o.a.bookmarks.update(s.id,{title:l}),await Promise.all(t.map(async e=>{const{children:t,title:a,url:n}=e;if(null==t?void 0:t.length){const e=await o.a.bookmarks.create({parentId:s.id,title:a});await K.createBookmarks(t,e.id,0)}else await o.a.bookmarks.create({parentId:s.id,title:a,url:n})})),s.id}}{const{children:e,title:i,page:s}=t.first();if(null==e?void 0:e.length){const t={parentId:a,title:i,..."number"==typeof n?{index:n}:null},s=await o.a.bookmarks.create(t);return await K.createBookmarks(e,s.id,0),s.id}return s&&!e?K.bookmarkPageInFolder(s,a,n):void 0}}function G({clipboardData:e},t,a){e&&(t=p.b.validateForClipboard(t),e.setData("vivaldi/x-cut",a),e.setData(n.c,JSON.stringify(t)),e.setData("text/plain",p.b.getDragData("text/plain",t)))}const K=new class{loadPromise(){return h.init().then(e=>M(!e)).then(()=>{y=!1,S=!1,o.a.bookmarks.onImportBegan.addListener(k),o.a.bookmarks.onImportEnded.addListener(A),o.a.bookmarks.onChanged.addListener(x),o.a.bookmarks.onCreated.addListener(P),o.a.bookmarks.onRemoved.addListener(j),o.a.bookmarks.onMoved.addListener(L),o.a.bookmarks.onChildrenReordered.addListener(R),l.a.bookmarkContextMenu.onOpen.addListener(U),l.a.bookmarkContextMenu.onClose.addListener(H),l.a.menubarMenu.onOpen.addListener(U),l.a.menubarMenu.onClose.addListener(H),l.a.bookmarksPrivate.onFaviconChanged.addListener(B),l.a.bookmarksPrivate.onMetaInfoChanged.addListener(F),l.a.utilities.onSharedDataUpdated.addListener(W),l.a.utilities.getSharedData({key:"BookmarkCutIds",value:""},e=>{e&&W("BookmarkCutIds",e)})})}setBookmarkBarFolderAndToggleVisibility(e){const t=p.b.getBookmarkBarFolderId()!==e||!s.a.get(c.kBookmarksBarVisible);return K.setBookmarkBarFolder(e).then(e=>{e&&i.a.set(c.kBookmarksBarVisible,t)})}setBookmarkBarFolderAndShow(e){return K.setBookmarkBarFolder(e).then(e=>{e&&i.a.set(c.kBookmarksBarVisible,!0)})}async setBookmarkBarFolder(e){const t=p.b.getItemById(e);if(!t||!p.b.isFolder(t))return!1;if(e===p.b.getRootId())return!1;const a=p.b.getBookmarkBarFolderId();if(a===e)return!0;I();try{await o.a.bookmarks.update(a,{bookmarkbar:!1}),await o.a.bookmarks.update(e,{bookmarkbar:!0})}catch(e){console.warn(`BookmarkActions: Failed to set bookmark bar folder: ${e}`)}finally{D()}return!0}toggleSpeeddialFolder(e){const t=p.b.getItemById(e);t&&p.b.isFolder(t)&&o.a.bookmarks.update(t.id,{speeddial:!t.speeddial})}setCutIds(e){l.a.utilities.setSharedData({key:"BookmarkCutIds",value:e.length>0?e.join():""})}async move(e,t,a){const n=p.b.validateForDrag(e).map(e=>{var t;return null===(t=p.b.getItemById(e))||void 0===t?void 0:t.id}).filter(Boolean);I();const i=await function(e,{parentId:t,index:a}){return e.reduce(async(e,n)=>{var i;const s=await e,r=null===(i=s[s.length-1])||void 0===i?void 0:i.index,l=await o.a.bookmarks.move(n,{parentId:t,index:void 0!==r?r+1:a});return s.push(l),Promise.resolve(s)},Promise.resolve([]))}(n,{parentId:t,index:a});return D(),i.map(e=>e.id)}reorder(e,t){return e=p.b.validateForDrag(e),I(),Promise.all(e.reverse().map(e=>o.a.bookmarks.move(e,{parentId:t,index:0}).then(e=>e.id))).then(e=>(D(),e))}async duplicate(e,t,a){const n=Object(f.a)(e.map(e=>p.b.getItemById(e)).filter(e=>e&&!e.trash));I();const i=await Promise.all(n.map(async e=>{const{title:n,url:i,description:s,nickname:r,children:l}=e,c=await o.a.bookmarks.create({index:a++,parentId:t,title:n,...Object(_.a)(i?{url:i}:null),...Object(_.a)(s?{description:s}:null),...Object(_.a)(r?{nickname:r}:null)});if(!c)throw new Error("Bookmark was not created");if(null==l?void 0:l.length){const e=l.map(({id:e})=>e);await this.duplicate(e,c.id,0)}return c.id}));return D(),i}async createWithPromise(e,t,a){I();const n=await((e,t,a)=>Promise.all(e.map(async e=>{var n;if(e.separator)return this.createSeparator(t,void 0===a?void 0:a++);const i=await o.a.bookmarks.create({title:e.title,url:e.url||(e.children?null:w.a),parentId:t,description:e.description||null,nickname:e.nickname||null,index:void 0===a?void 0:a++});return(null===(n=e.children)||void 0===n?void 0:n.length)?await K.createWithPromise(e.children,i.id,0):i})))(e,t,a);return D(),n}createSeparator(e,t){return o.a.bookmarks.create({title:"---",url:w.a,parentId:e,description:"separator",nickname:"",index:t})}async createBookmarks(e,t,a){I();const n=await Promise.all(e.map(({url:e,title:n})=>o.a.bookmarks.create({parentId:t,url:e,title:n,index:a++}).then(({id:e})=>e)));return D(),n}remove(e=[]){return I(),Promise.all(e.map(e=>{if(T.get(e))return T.get(e);const t=p.b.getItemById(e);return p.b.isFolder(t)&&(null==t?void 0:t.id)===s.a.get(c.kBookmarksSaveFolder)&&i.a.set(c.kBookmarksSaveFolder,p.a),p.b.isFolder(t)?o.a.bookmarks.removeTree(e).catch(()=>console.warn(`Error removing bookmark tree: ${e}`)).then(()=>T.delete(e)):o.a.bookmarks.remove(e).catch(()=>console.warn(`Error removing bookmark: ${e}`)).then(()=>T.delete(e))})).then(()=>D())}update(e,t){const a=p.b.sanitizeForUpdate(t);return o.a.bookmarks.update(e,a)}create(e){const t=p.b.sanitizeForUpdate(e);return o.a.bookmarks.create(t)}async emptyTrash(){!1===await new Promise(e=>l.a.bookmarksPrivate.emptyTrash(e))&&console.warn("Empty trash failed.")}bookmarkAllOpenPages(e,t,a){return z({pages:b.c.getPages(e),windowId:e,parentId:t,index:a,isStack:!1,isSelection:!1,forceFolder:!0})}bookmarkPages(e,t,a,n,i){return z({pages:e instanceof C.List?e:C.List.of(e),windowId:t,parentId:n,index:i,isStack:a,isSelection:!0,forceFolder:e instanceof C.List})}async bookmarkPageInFolder(e,t=p.b.getRootNode().id,a){const{url:n}=e,i=Object(O.c)(e),{id:s}=await o.a.bookmarks.create({parentId:t,url:n,title:i,..."number"==typeof a?{index:a}:null});return s}cut(e,t){G(e,t,"true"),K.setCutIds(t),e.stopPropagation(),e.preventDefault()}copy(e,t){G(e,t,"false"),e.stopPropagation(),e.preventDefault()}paste({clipboardData:e},t,a){const i=p.b.getItemById(t);if(!i||!e)return Promise.resolve({isCut:!1,ids:[]});let s,r;p.b.isFolder(i)?(s=i.id,r=!0===a&&i.children?i.children.length:0,r>0&&i.children[r-1].trash&&r--):(s=i.parentId,r=(i.index||0)+1);const o=-1!==e.types.findIndex(e=>e===n.c)?JSON.parse(e.getData(n.c)):[];return 0===o.length?Promise.resolve({isCut:!1,ids:[]}):p.b.getCutIds().length>0&&"true"===e.getData("vivaldi/x-cut")?K.move(o,s,r).then(e=>(K.setCutIds([]),{isCut:!0,ids:e})):K.duplicate(o,s,r).then(e=>({isCut:!1,ids:e}))}async onDropEvent(e,t,a,i){if(e.dataTransfer.types.includes(n.c)){const s=JSON.parse(e.nativeEvent.dataTransfer.getData(n.c));n.a.isCopyModifierPressed(e)||i&&i.disableMove?await K.duplicate(s,t,a):await K.move(s,t,a)}else{const i=await n.a.getUrlsFromEventPromise(e,!0);await K.createBookmarks(i,t,a)}}};t.a=K},function(e,t,a){"use strict";var n=a(7);const i=(e=2,t)=>(a,n)=>{if(e<=1)return 0;if(t&&(a=a[t],n=n[t]),!a&&!n)return 0;if(!a)return 2===e?1:-1;if(!n)return 2===e?-1:1;if("number"==typeof a&&"number"==typeof n)return 2===e?a-n:n-a;const i=a.toString().localeCompare(n.toString());return i>0?2===e?1:-1:i<0?2===e?-1:1:0},s={treeSort:function(e,t=i(),a="children"){const n=e=>{for(const t of e){const e=t[a];Array.isArray(e)&&n(e)}e.sort(t)};n(e)},getDefaultComparator:i,toMenuSorting:function(e,t){let a=void 0;e===s.ASCENDING_SORT?a=n.a.menubarMenu.SortOrder.ASCENDING:e===s.DESCENDING_SORT&&(a=n.a.menubarMenu.SortOrder.DESCENDING);let i=void 0;if(void 0!==a)switch(t){case"title":i=n.a.menubarMenu.SortField.TITLE;break;case"url":i=n.a.menubarMenu.SortField.URL;break;case"nickname":i=n.a.menubarMenu.SortField.NICKNAME;break;case"description":i=n.a.menubarMenu.SortField.DESCRIPTION;break;case"dateadded":i=n.a.menubarMenu.SortField.DATEADDED}return{order:a,field:i}},NO_SORTING:1,ASCENDING_SORT:2,DESCENDING_SORT:3};t.a=s},function(e,t,a){"use strict";var n=a(0),i=a(218);class s extends n.PureComponent{render(){const{children:e,filter:t}=this.props;return t?Array.isArray(e)?e.map((e,a)=>n.createElement(n.Fragment,{key:a,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategoryChild.jsx",lineNumber:18,columnNumber:9}},Object(i.a)(e,t))):Object(i.a)(e,t):e}}t.a=s},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return r}));var n=a(26);class i extends(Object(n.Record)({committedUrl:"",transition:"",post:void 0,headers:""})){}function s(e){return e.getIn(["extData","group"])||void 0}function r(e){return e.getIn(["extData","tiling","id"])||void 0}class o extends(Object(n.Record)({id:0,index:-1,windowId:void 0,openerTabId:null,active:!1,pinned:!1,audible:"",discarded:!1,url:"",title:"",favIconUrl:"",incognito:"",sessionId:"",extData:Object(n.Map)(),target:void 0,processexitstate:void 0,favIcon:"",imageLoading:"always",showImageInspector:!1,mimeType:"text/html",originUrl:"",unread:!0,isInspected:!1,isMailPage:!1,isClosing:!1,supportsReaderMode:!1,originalContentType:""})){}t.b=o},,,function(e,t,a){"use strict";var n=a(68),i=a(57),s=a.n(i),r=a(12),o=a(35),l=a(58),c=a(4),u=a(3);const m={[u.c]:[],[u.zb]:[u.db],[u.qb]:[],[u.tb]:[u.vb,u.G,u.Ab,u.db],[u.l]:[u.P,u.R,u.rb,u.vb,u.G,u.Ab,u.db],[u.hb]:[u.P,u.R,u.rb,u.vb,u.G,u.Ab,u.db],[u.D]:[],[u.xb]:[u.vb]};let d;Object.freeze(m);let h=[],p=-1,b=[],g=!1,N=!1;const f=new class extends s.a{constructor(...e){var t,a,i;super(...e),i=e=>[{handler:n.a.goToNextUnread,..."list"===e?Object(c.a)("Next Unread"):Object(c.a)("Go to Next Unread")},{handler:n.a.goToPreviousUnread,..."list"===e?Object(c.a)("Previous Unread"):Object(c.a)("Go to Previous Unread")},{handler:n.a.markAsReadAndGoToNextUnread,...Object(c.a)("Mark Read and Go to Next Unread")}],(a="getGoToMenuItems")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}isOptionAllowedAsDefault(e){const t=this.getSelectedFolder();let a=m[u.c];if(t){const e=l.a.getFolderType(t.accountId,t.path);m.hasOwnProperty(e)&&(a=m[e]);const i=Object(n.b)();e||(i.type===u.xb&&(a=m[u.xb]),i.type===u.sb&&(a=m[u.tb])),g!==i.shouldDisable.trashButton&&(g=i.shouldDisable.trashButton),N!==i.shouldDisable.spamButton&&(N=i.shouldDisable.spamButton)}return a&&!a.includes(e)}clear(){d=void 0,h=[],p=-1,b=[],f.emitChange()}getSelectedFolder(){return d}shouldDisableTrashButton(){return g}shouldDisableSpamButton(){return N}getSelectionHistory(){return h}getHistoryIndex(){return p}getOptionsFromHistory(e){return void 0!==e?b[e]:b[p]}isFolderAnEditMailFolder(){const e=f.getSelectedFolder(),t=e&&l.a.getFolderType(e.accountId,e.path);return[u.l,u.hb,u.tb].includes(t)}isTrashFolderSelected(){if(!d)return!1;const{accountId:e,path:t,type:a=""}=d;return a===u.xb||e===u.c&&t===u.wb}isSentFolderSelected(){if(!d)return!1;const{accountId:e,path:t,type:a=""}=d;return a===u.tb||e===u.c&&t===u.sb}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}canGoBack(){return f.getSelectionHistory().length>1&&f.getHistoryIndex()>0}canGoForward(){const e=f.getSelectionHistory();return e.length>1&&f.getHistoryIndex()<e.length-1}},_=function(){o.a.set({FOLDER_SELECTION:d},e=>{e&&console.error("Failed to store selected folder",d,e)})};f.dispatchToken=r.a.register(e=>{switch(e.actionType){case"MAIL_SELECT_FOLDER":t=e.folder,a=e.options,p>-1&&(h=h.slice(0,p+1),b=b.slice(0,p+1)),(!((n=h[h.length-1])===(i=t)||n&&i&&n.accountId===i.accountId&&n.path===i.path)||Object.keys(a).length>0)&&(p=h.length,h.push(t),b.push(a)),d=t,_(),f.emitChange();break;case"MAIL_FOLDER_SELECT_HISTORY_INDEX":const{historyIndex:s}=e;void 0!==s&&(!function(e){e>=0&&e<h.length&&(p=e,d=h[p],_())}(s),f.emitChange());break;case"MAIL_STOP":f.clear()}var t,a,n,i}),t.a=f},,,,,function(e,t,a){"use strict";var n=a(0),i=a(14),s=a(2),r=a(218),o=a(523),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategory.jsx";function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m="https://vivaldi.com/privacy/";function d(e){return"string"!=typeof e.type}class h extends n.Component{constructor(e){super(e),u(this,"hiddenWhenFilter",""),u(this,"hiddenChildComponents",{}),u(this,"unfilteredChildren",e=>n.Children.map(e.children,e=>e&&d(e)?n.cloneElement(e,{filter:""}):e)),u(this,"filteredChildren",e=>n.Children.map(e.children,(t,a)=>!t||d(t)?t:Object(r.a)(t,e.filter))),u(this,"searchChildren",e=>{if(!e.filter)return n.Children.map(e.children,e=>e);return e.categoryTitle.toLowerCase().includes(e.filter.toLowerCase())?this.unfilteredChildren(e):this.filteredChildren(e)}),u(this,"shouldSearchHiddenComponent",(e,t)=>!t||e.length>=t.length||e!==t.slice(0,e.length)),u(this,"hideCategoryIfEmpty",()=>{this.root&&(1===this.root.children.length||!0===this.props.displayPrivacyLink&&2===this.root.children.length?(this.root.style.display="none",this.hiddenWhenFilter=this.props.filter):(this.root.style.removeProperty("display"),this.hiddenWhenFilter=""))}),u(this,"openPrivacyPage",e=>{i.a.openURL(m),e.preventDefault()}),this.state={children:this.searchChildren(this.props)}}componentDidMount(){this.hideCategoryIfEmpty()}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter?this.hiddenWhenFilter?this.shouldSearchHiddenComponent(this.hiddenWhenFilter,e.filter)&&this.setState({children:this.searchChildren(e)}):this.setState({children:this.searchChildren(e)}):this.props.children!==e.children&&this.setState({children:this.searchChildren(e)})}componentDidUpdate(){this.hideCategoryIfEmpty()}render(){const e=this.props.categoryTitle&&n.createElement("h2",{__source:{fileName:l,lineNumber:127,columnNumber:7}},this.props.categoryTitle),t=Object(r.a)(e,this.props.filter)||e,a=Object(o.a)(this.props,["filter","categoryTitle","displayPrivacyLink"]);return n.createElement("div",c({ref:e=>e?this.root=e:null},a,{__source:{fileName:l,lineNumber:137,columnNumber:7}}),t,e&&!0===this.props.displayPrivacyLink&&n.createElement("div",{className:"privacy-link",__source:{fileName:l,lineNumber:140,columnNumber:11}},n.createElement("a",{href:m,title:m,onClick:this.openPrivacyPage,__source:{fileName:l,lineNumber:141,columnNumber:13}},Object(s.a)("Learn more about Privacy in Vivaldi"))),this.state.children)}}u(h,"defaultProps",{displayPrivacyLink:!1}),t.a=h},,,,function(e,t,a){"use strict";var n=a(12),i=a(10);let s;const r=new class{setStatus(e,t){clearTimeout(s),n.a.dispatch({actionType:"STATUS_SET_STATUS",status:e}),t&&(s=setTimeout(r.clearStatus,t))}clearStatus(){clearTimeout(s),n.a.dispatch({actionType:"STATUS_SET_STATUS",status:""})}setPersistentStatus(e,t){n.a.dispatch({actionType:"STATUS_SET_PERSISTENT_STATUS",key:e,status:t})}clearPersistentStatus(e){n.a.dispatch({actionType:"STATUS_CLEAR_PERSISTENT_STATUS",key:e})}};i.a.runtime.onMessage.addListener((e,t)=>{if(i.a.runtime.id!==t.id||"object"!=typeof e||null==e)return;const{action:a,status:n}=e;"setStatus"===a&&"string"==typeof n&&r.setStatus(n)}),t.a=r},,function(e,t,a){"use strict";(function(e){var n=a(6),i=a(12),s=a(16),r=a(161),o=a(17),l=a(10),c=a(1);const u=new class{loadPromise(){return new Promise((e,t)=>{const{vivaldiWindowId:a}=window;l.a.windows.get(a,t=>{const a=t&&t.extData?JSON.parse(t.extData):{},i=n.a.get(c.kPanelsState),s={};s.showButtons=i.barVisible,s.showContent=i.panelVisible,s.width=i.width,s.selectedPanel=i.selectedPanel,a.hasOwnProperty("SHOW_PANEL_CONTENT")&&(s.showContent=a.SHOW_PANEL_CONTENT),a.hasOwnProperty("SHOW_PANEL")&&(s.showButtons=a.SHOW_PANEL),a.hasOwnProperty("PANEL_WIDTH")&&(s.width=a.PANEL_WIDTH),a.hasOwnProperty("SELECTED_PANEL")&&(s.selectedPanel=a.SELECTED_PANEL),n.a.get(c.kMailIsTurnedOff)&&["calendar","contacts","feeds","mail"].includes(s.selectedPanel)&&(s.selectedPanel=""),e(s)})}).then(e=>{o.a.isIncognitoOrGuest(window.vivaldiWindowId)||(e.isMail=!l.a.extension.getViews().some(e=>e.isMailWindow)),r.a.upgrade(),n.a.addListener(c.kPanelsList,u.setPanels),n.a.addListener(c.kPanelsWebItems,u.setPanels),n.a.addListener(c.kMailIsTurnedOff,(e,t,a)=>{u.setPanels(null,n.a.get(c.kPanelsList),c.kPanelsList)}),e.regPanelList=n.a.get(c.kPanelsList),e.webPanelItems=n.a.get(c.kPanelsWebItems),i.a.dispatch({actionType:s.a.PANEL_INIT,state:e})})}setFocus(){i.a.dispatch({actionType:s.a.PANEL_SET_FOCUS})}removeFocus(){i.a.dispatch({actionType:"PANEL_REMOVE_FOCUS"})}toggleFloating(){i.a.dispatch({actionType:s.a.PANEL_TOGGLE_FLOATING})}showNextPanel(e){i.a.dispatch({actionType:"PANEL_SHOW_NEXT",direction:e})}setContentVisible(e){i.a.dispatch({actionType:s.a.PANEL_SET_CONTENT_VISIBLE,visible:e})}togglePanel(){i.a.dispatch({actionType:s.a.PANEL_TOGGLE_PANEL})}toggleContent(e){i.a.dispatch({actionType:s.a.PANEL_TOGGLE_CONTENT,panel:e})}move(e,t,a){i.a.dispatch({actionType:s.a.PANEL_MOVE,from:e,to:t,position:a})}showContent(e,t={selectId:"",reason:""}){const{setFocus:a=!1,selectId:n,reason:s}=t;i.a.dispatch({actionType:"PANEL_SHOW_CONTENT",panel:e,setFocus:a,selectId:n,reason:s})}setAvailable(e,t){i.a.dispatch({actionType:s.a.PANEL_SET_AVAILABLE,panel:e,available:t})}setWidth(e,t){i.a.dispatch({actionType:s.a.PANEL_SET_WIDTH,panel:e,width:t})}closePanel(){i.a.dispatch({actionType:"PANEL_TOGGLE_CURRENT"})}setPanelResizable(e,t){i.a.dispatch({actionType:s.a.PANEL_SET_RESIZABLE,panel:e,resizable:t})}setPanels(t,a,n){e.nextTick(()=>i.a.dispatch({actionType:s.a.PANEL_SET_PANELS,key:n,value:a,oldValue:t}))}setMailWindow(){i.a.dispatch({actionType:s.a.PANEL_SET_MAIL_WINDOW})}clearTransitionState(e){i.a.dispatch({actionType:s.a.PANEL_CLEAR_TRANSITION_STATE,panel:e})}};t.a=u}).call(this,a(82))},function(e,t,a){"use strict";var n=a(131),i=a(47),s=a(29),r=a(119),o=a(227),l=a(8),c=a(58),u=a(172),m=a(80),d=a(240),h=a(488),p=a(60),b=a(3),g=a(403);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f{constructor(){N(this,"updatedSources",new Map),N(this,"imapDelete",[]),N(this,"imapCopy",[])}addSourceUpdate(e,t,a){const n=this.updatedSources.get(t);n?n.set(e,a):this.updatedSources.set(t,new Map([[e,a]]))}addSource(e,t,a){this.addSourceUpdate(e,t,{read:a,deleted:!1,internal:!0})}removeSource(e,t){this.addSourceUpdate(e,t,void 0)}deleteSource(e,t){this.addSourceUpdate(e,t,{deleted:!0})}undeleteSource(e,t){this.addSourceUpdate(e,t,{deleted:!1})}addImapDelete(e,t,a){this.imapDelete.push({accountId:e,path:t,searchListId:a})}addImapCopy(e,t,a){const n=t.find(t=>{const a=e.sources.get(t);return a&&!a.internal});if(n){const t=s.a.get(n);if(!t)throw new Error("Filter not found "+n);const{accountId:i,path:r}=t;this.imapCopy.push({accountId:i,path:r,destinationPath:a,searchListId:e.searchListId})}}}function _(e){const t=new Map;return[...e.keys()].forEach(e=>{const a=s.a.get(e);if(!a)throw new Error("Filter not found "+e);const{accountId:n}=a,i=t.get(n);i?i.push(e):t.set(n,[e])}),t}async function v(e){const{updatedSources:t,imapCopy:a,imapDelete:n}=e,s=new Set;if(t.size>0&&(s.add(l.a.searchList),s.add(l.a.filteringQueue),s.add(l.a.filters)),(n.length>0||a.length>0)&&(s.add(l.a.imap),s.add(l.a.buffer)),s.size>0){let e=[];await l.a.transaction("rw",[...s],async()=>{t.size>0&&(e=await Object(h.a)(t),t.forEach((e,t)=>{Object(m.a)({type:"RE_RUN_SLES",priority:b.p.HIGH,searchListIds:[t],filterIds:[...e.keys()],folderIds:[[b.c,b.C]]})})),a.length>0&&await d.a.addCopy(a),n.length>0&&await d.a.addDelete(n)}),p.a.filter(),r.a.flushBuffer(),e.length>0&&i.a.updateIndex({sleUpdates:e})}}var E={markAsJunk:async function(e){const t=new f;e.forEach(e=>{const{searchListId:a,sources:n}=e;_(n).forEach((i,r)=>{const l=Object(g.a)(r)&&o.a.getFoldersOfType(r,b.D);if(l&&l.length>0){const o=new Set;l.forEach(l=>{const{path:c}=l,m=s.a.getByFolder(r,c);if(!m)throw new Error("Filter not found "+r+" "+c);const{id:d}=m,h=e.sources.get(d);if(h)h.internal&&t.addImapCopy(e,i,c);else{const s=Object(u.a)(n);t.addSource(d,a,s),t.addImapCopy(e,i,c)}o.add(d)}),i.forEach(n=>{if(o.has(n))return;const i=e.sources.get(n);if(!i)throw new Error("Source not found "+n+" on listEntry "+e.id);if(!i.internal){const e=s.a.get(n);if(!e)throw new Error("Filter not found "+n);t.addImapDelete(r,e.path,a),t.deleteSource(n,a)}})}})}),await v(t)},markAsNotJunk:async function(e){const t=new f;e.forEach(e=>{const{searchListId:a,sources:n}=e;_(n).forEach((i,r)=>{const l=s.a.getByIds(i);if(l.some(({accountId:e,path:t})=>c.a.getFolderType(e,t)===b.xb))l.forEach(({id:e,accountId:n,path:i})=>{c.a.getFolderType(n,i)===b.D&&(t.removeSource(e,a),t.addImapDelete(n,i,a))});else{let m=!1;if(l.forEach(({id:s,accountId:r,path:o})=>{if(c.a.getFolderType(r,o)===b.D)t.removeSource(s,a),t.addImapDelete(r,o,a);else{m=!0;const r=n.get(s);if(!r)throw new Error("Source not found");r.deleted&&(t.undeleteSource(s,a),t.addImapCopy(e,i,o))}}),!m){const l=o.a.getFoldersOfType(r,b.v);if(!l||0===l.length)throw new Error("No inbox found on account "+r);const c=l[0].path,m=s.a.getByFolder(r,c);if(!m)throw new Error("Inbox filter not found "+r+" "+c);const d=Object(u.a)(n);t.addSource(m.id,a,d),t.addImapCopy(e,i,c)}}})}),await v(t)}},C=a(199),w=a(56),O=a(36),y=a(13),S=a(6),T=a(553),k=a(12),A=a(16),I=a(17),D=a(766),M=a(206),P=a(579);var x=async function(e,t){await l.a.transaction("rw",[l.a.searchList],()=>{l.a.searchList.where("id").anyOf(e).modify(e=>{e.sourceFilterIds=e.sourceFilterIds.filter(e=>!t.includes(e)),t.forEach(t=>{e.sources.delete(t)})})})},L=a(34);var j=async function(e,t){const a=[],n={},o=[],c=await M.a.loadAllAccounts(),u=[],h=[],g=new L.a;e.forEach(e=>{const{searchListId:i,sentDate:r,messageId:l,sources:m,threadKey:d}=e,p=t.get(i);p&&(m.size===p.length?h.push({id:i,sentDate:r,threadKey:d}):g.add(p,i),p.forEach(e=>{const t=s.a.get(e);if(!t)return;const{accountId:m,path:d}=t;if(m===b.c)return;if(a.push({accountId:m,searchListId:i,sentDate:r}),m===b.n)return void u.push({path:d,messageId:l});const h=c.find(e=>e.MAIL_EMAIL===m);h?h.accountType===b.J.POP?n[m]?n[m].push(i):n[m]=[i]:h.accountType===b.J.IMAP&&o.push({accountId:m,path:d,searchListId:i}):console.warn("Account "+m+" not found")}))});const N=[l.a.messages,l.a.searchList,l.a.threading,l.a.filteringQueue,l.a.viewIds];(o.length>0||Object.keys(n).length>0)&&(N.push(l.a.buffer),o.length>0&&N.push(l.a.imap),Object.keys(n).length>0&&N.push(l.a.pop)),u.length>0&&N.push(l.a.deletedFeedItems),await l.a.transaction("rw",N,async()=>{for(const{filterIds:e,searchListIds:t}of g.batches){const a=[...e];x(t,a);const n=new Map(a.map(e=>[e,void 0]));Object(m.a)({type:"UPDATE_SLE",priority:b.p.HIGH,searchListIds:t,sources:n})}u.length>0&&l.a.deletedFeedItems.bulkAdd(u),h.length>0&&Object(P.a)(h.map(({id:e})=>e)),o.length>0&&d.a.addDelete(o);const e=Object.keys(n);if(e.length>0){const t=[];for(const a of e)t.push({accountId:a,searchListIds:n[a],operation:"BUFFER_OPERATION_DELETE_POP"});t.length>0&&l.a.buffer.bulkAdd(t)}}),i.a.updateIndex({removedSles:h}),r.a.flushBuffer(),p.a.filter();for(const e of a){const{accountId:t,searchListId:a,sentDate:n}=e;await Object(D.a)(t,a,n).catch(()=>console.warn("Error deleting file. May not exist!",e))}},R=a(241),B=a(49);var F=async function(e,t,a,n){const s=B.a.getByFolderId([t,a]),o=B.a.getByFolderId([t,n]);if(!s||!o)throw new Error(`Could not move messages.\n      No filter found for ${t}/${a}\n      or ${t}/${n}\n      when trying to move ${e.length} messages`);const u=new Map;e.forEach(e=>{const n=e.sources.get(s.id);if(!n)throw new Error(`Can't move message from ${t}/${a}\n        No source found for entry:\n        ${e.subject}\n        in filter: ${s.name}`);const i=new Map;i.set(s.id,void 0),i.set(o.id,n),u.set(e.searchListId,i)});const g=e.map(e=>e.searchListId);let N=[];await l.a.transaction("rw",[l.a.searchList,l.a.buffer,l.a.imap,l.a.filteringQueue,l.a.filters],async()=>{await d.a.addMove(g.map(e=>({accountId:t,path:a,destinationPath:n,searchListId:e}))),N=await Object(h.a)(u);const e=B.a.getByFolderIds([[b.j,`${t}/${a}`],[b.j,`${t}/${n}`]]).map(e=>e.id),i=[[t,a],[t,n]];c.a.getFolderType(t,a)===c.a.getFolderType(t,n)?await Object(m.a)({type:"FILTERS_SLES",priority:b.p.HIGH,folderIds:i,filterIds:e,searchListIds:g}):await Object(m.a)({type:"RE_RUN_SLES",priority:b.p.HIGH,folderIds:i,filterIds:e,searchListIds:g})}),r.a.flushBuffer(),p.a.filter(),N.length>0&&i.a.updateIndex({sleUpdates:N})},U=a(2),H=a(171);var V=async function(e,t){const a=new Map,n=[],c=[],u=[],N=new Set,f=new Map;function _(e,t,n){const i=a.get(t),s={deleted:n,read:!0};i?i.set(e,s):a.set(t,new Map([[e,s]]))}function v(e,t,a){const{searchListId:n,sources:i}=e;N.add(e),i.forEach((e,i)=>{const s={...e,read:!0};if(t.has(i)&&(s.deleted=a),Object.keys(e).some(t=>e[t]!==s[t])){const e=f.get(n);e?e.set(i,s):f.set(n,new Map([[i,s]]))}})}function E(e,t,a){const n=t.find(t=>{const a=e.sources.get(t);return a&&!a.internal});if(n){const{accountId:t,path:i}=s.a.get(n);c.push({key:[t,i,e.searchListId],destinationPath:a})}}e.forEach(e=>{const{searchListId:i}=e,r=t.get(i),l=new Map;r&&0!==r.length?(r.forEach(e=>{const t=s.a.get(e),{accountId:a}=t,n=l.get(a);n?n.push(e):l.set(a,[e])}),l.forEach((t,r)=>{const l=Object(g.a)(r)&&o.a.getFoldersOfType(r,b.xb);if(l&&l.length>0){const o=new Set;l.forEach(n=>{const{path:l}=n,c=s.a.getByFolder(r,l),{id:m}=c,d=e.sources.get(m);if(d)if(d.internal)E(e,t,l),d.deleted&&_(m,i,!1);else if(d.deleted){const t=new Set([m]);v(e,t,!1)}else u.push(e);else!function(e,t,n,i){const s=a.get(t),r={deleted:n,internal:i,read:!0};s?s.set(e,r):a.set(t,new Map([[e,r]]))}(m,i,!1,!0),E(e,t,l);o.add(m)});const c=t.filter(e=>!o.has(e));v(e,new Set(c),!0),c.forEach(t=>{if(!e.sources.get(t).internal){const e=s.a.get(t);n.push([r,e.path,i])}_(t,i,!0)})}else v(e,new Set(t),!0)})):console.warn("No deleteSourceFilterIds for searchListId "+i)});const C=new Set;if(a.size>0&&(C.add(l.a.searchList),C.add(l.a.filteringQueue),C.add(l.a.filters)),(n.length>0||c.length>0)&&(C.add(l.a.imap),C.add(l.a.buffer)),N.size>0&&C.add(l.a.flaggingQueue),C.size>0){const e=[];await l.a.transaction("rw",[...C],async()=>{if(N.size>0){const t=R.a.setCustomFlags([...N],{},f);e.push(...t)}if(a.size>0){const t=await Object(h.a)(a);e.push(...t);const n=new L.a;a.forEach((e,t)=>{const a=[...e.keys()];n.add(a,t)});for(const{filterIds:e,searchListIds:t}of n.batches)Object(m.a)({type:"RE_RUN_SLES",priority:b.p.HIGH,searchListIds:t,filterIds:[...e],folderIds:[[b.c,b.wb]]})}if(c.length>0||n.length>0){const e=n.slice();if(c.forEach(t=>{const{key:a}=t;e.find(e=>e.every((e,t)=>e===a[t]))||e.push(a)}),c.length>0){const e=[];for(const t of c){const{key:a,destinationPath:n}=t,[i,s,r]=a;e.push({accountId:i,path:s,searchListId:r,destinationPath:n})}await d.a.addCopy(e)}if(n.length>0){const e=[];for(const t of n){const[a,n,i]=t;e.push({accountId:a,path:n,searchListId:i})}await d.a.addDelete(e)}}}),p.a.filter(),r.a.flushBuffer(),e.length>0&&i.a.updateIndex({sleUpdates:e})}u.length>0&&(e.length===u.length?Object(H.a)({title:Object(U.a)("Already in trash"),icon:"resources/mail_notification_icon.png"}):Object(H.a)({title:Object(U.a)("Some were already in trash"),icon:"resources/mail_notification_icon.png"}))},W=a(767),z=a(759);var G=async function(e){const t=await Object(z.a)(e),a=[];return await l.a.searchList.where("id").anyOf([...e.keys()]).modify(n=>{const{id:i,sourceFilterIds:s,sources:r}=n,o=e.get(i);o&&o.forEach((e,i)=>{let o=!1;if(!t.has(i))throw new Error("Can not add a source for a non-existing filter ID "+i);s.includes(i)||(s.push(i),o=!0),r.has(i)||(r.set(i,{...e}),o=!0),o&&a.push(n)})}),a},K=a(354),Y=a(494),$=a(225);var X=async function(e){const t=[],a=[],n=[],u=[],h=new Map,g=[];for(const i of e){const{sources:e}=i;e.forEach((e,r)=>{const{accountId:o,path:l}=s.a.get(r);c.a.getFolderType(o,l)===b.xb?e.internal?t.push({sourceFilterId:r,listEntry:i}):a.push({sourceFilterId:r,listEntry:i}):e.internal?n.push({sourceFilterId:r,listEntry:i}):e.deleted&&u.push({sourceFilterId:r,listEntry:i})})}const N=new Map;if(n.length>0){const e=await M.a.loadAllAccounts(),t=[],a=[];for(const i of n){const{sourceFilterId:n,listEntry:s}=i,{searchListId:r,sentDate:o,threadKey:l,unseen:c,flags:u,sources:m}=s,d=B.a.get(n),{accountId:p,path:g}=d,f=e.find(e=>e.MAIL_EMAIL===p);if(!f){console.warn("Account not found for accountId "+p);continue}if(f.accountType===b.J.IMAP){let e=!1;for(const[t,i]of m){if(i.internal||t===n)continue;const s=B.a.get(t);if(!s||s.accountId!==p)continue;const{path:o}=s;a.push({accountId:p,path:o,destinationPath:g,searchListId:r}),e=!0;break}if(!e){const e=await Object(Y.a)(p,r,o);e&&t.push({accountId:p,path:g,operation:"BUFFER_OPERATION_UPLOAD_MESSAGE",message:Object($.a)(e),searchListId:r})}}let _=N.get(r);_||(_={searchListId:r,sentDate:o,threadKey:l,unseen:c,flags:u,sources:m},N.set(r,_));const v=m.get(n),E={read:void 0!==v&&v.read,internal:!0,deleted:!1};let C=h.get(r);C?C.set(n,E):(C=new Map([[n,E]]),h.set(r,C))}await d.a.addCopy(a),await l.a.buffer.bulkAdd(t)}if(u.length>0){const e=new Map;for(const t of u){const{sourceFilterId:a,listEntry:n}=t,{searchListId:i,sentDate:s,threadKey:r,unseen:o,flags:l,sources:c}=n;let u=N.get(i);u||(u={searchListId:i,sentDate:s,threadKey:r,unseen:o,flags:l,sources:c},N.set(i,u));const m=c.get(a),d={read:void 0!==m&&m.read,internal:!1,deleted:!1};let p=h.get(i);p?p.set(a,d):(p=new Map([[a,d]]),h.set(i,p));const b=e.get(a);b?b.push(i):e.set(a,[i])}for(const[t,a]of e){const e=s.a.get(t);if(!e)throw new Error("Filter not found, id "+t);const{accountId:n,path:i}=e;await K.a.deleteImapEntries(n,i,a)}}if(N.size>0){const e=R.a.setCustomFlags([...N.values()],{[b.O.SEEN]:!1},h,!1);g.push(...e)}const f=new Map;function _(e,t){const{searchListId:a}=e;let n=f.get(a);if(!n){const{sentDate:t,threadKey:i,sourceFilterIds:s,sources:r}=e,o=new Map;for(const[e,t]of r)o.set(e,t);n={sentDate:t,threadKey:i,sourceFilterIds:s.slice(),sources:o},f.set(a,n)}const{sourceFilterIds:i,sources:s}=n;t.forEach((e,t)=>{if(e)i.includes(t)||i.push(t);else{const e=i.indexOf(t);e>=0&&i.splice(e,1)}s.set(t,e)})}const v=new Map;function E(e,t){const a=v.get(e);a?a.push(t):v.set(e,[t])}if(a.length>0){const e=[],t=[],n=new Map,i=new L.a;for(const i of a){const{sourceFilterId:a,listEntry:s}=i,{searchListId:r,sourceFilterIds:l,sources:c}=s,u=B.a.getByIds(l),m=u.find(e=>e.id===a),d=u.filter(e=>e.accountId===m.accountId),{accountId:h,path:p}=m;if(1===d.length){const t=o.a.getFoldersOfType(h,b.v)[0];if(!t)throw new Error("Can not undelete, an inbox folder was not found for "+h);const{path:i}=t;e.push({accountId:h,path:p,destinationPath:i,searchListId:r});const l=B.a.getByFolderId([h,i]),u=c.get(a),m=void 0!==u&&u.read,d=new Map([[l.id,{read:m,deleted:!1,internal:!0}]]),g=new Map([[r,d]]),[N]=await G(g);if(N){_(s,d);const e=n.get(r);e?e.push(l.id):n.set(r,[l.id])}}else t.push({accountId:h,path:p,searchListId:r});E(r,a),_(s,new Map([[a,void 0]]))}d.a.addMove(e),d.a.addDelete(t),r.a.flushBuffer(),n.forEach((e,t)=>i.add(e,t));for(const{filterIds:e,searchListIds:t}of i.batches)Object(m.a)({type:"FILTERS_SLES",priority:b.p.NORMAL,filterIds:[...e],searchListIds:t,updateFilters:!0})}if(t.length>0){const e=new Map;for(const a of t){const{listEntry:t,sourceFilterId:n}=a,{searchListId:i}=t;E(i,n),_(t,new Map([[n,void 0]]));const s=e.get(n);s?s.push(i):e.set(n,[i])}for(const[t,a]of e){const e=s.a.get(t);if(!e)throw new Error("Filter not found, id "+t);const{accountId:n,path:i}=e;await K.a.uploadEntries(n,i,new Set(a)),await K.a.copyAndMoveEntries(n,i,a)}}if(f.size>0&&f.forEach((e,t)=>{const{sentDate:a,threadKey:n,sourceFilterIds:i,sources:s}=e;g.push({id:t,sentDate:a,threadKey:n,updates:{sourceFilterIds:i,sources:s}})}),v.size>0){const e=[];v.forEach((t,a)=>{const n=e.find(e=>e.filterIds.size===t.length&&t.every(t=>e.filterIds.has(t)));n?n.searchListIds.push(a):e.push({filterIds:new Set(t),searchListIds:[a]})});for(const{searchListIds:t,filterIds:a}of e){const e=[...a];await x(t,e);const n=new Map(e.map(e=>[e,void 0]));Object(m.a)({type:"UPDATE_SLE",priority:b.p.HIGH,searchListIds:t,sources:n})}}g.length>0&&i.a.updateIndex({sleUpdates:g}),p.a.filter()},Z=a(37),Q=a(66),q=a(1),J=a(4),ee=a(442);function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e){const t=function(){const e=I.a.getActiveBrowserOrPopupWindowId(),t=y.c.getTabs(e).find(e=>e.page.get("active"));return!(!t||!t.page)&&Object(ee.b)(t.page.url)}();let a=[];if(!t){const t=T.a.get(Z.m);if(!t)return a;t.selectedIds.forEach(t=>{const n=s.a.getListEntry(t.id);n&&(e?function e(t,a){t.push(a),a.children&&a.children.forEach(a=>e(t,a))}(a,n):a.push(n))})}if(!a.length||t){const e=n.a.getActiveListEntry();if(e){const t=s.a.getListEntry(e.id);t&&(a=[t])}}return a}function ne(e,t){for(let a=0;a<e.length;a++)if(c.a.getFolderType(e[a].accountId,e[a].path)!==t)return!0;return!1}function ie(e,t){return e.some(e=>c.a.getFolderType(e.accountId,e.path)===t)}function se(){const e={type:"",shouldDisable:{trashButton:!1,spamButton:!1}},t=ae(),a=[];for(let e=0;e<t.length;e++)a.push(t[e].sourceFilterIds);const n=[];for(let e=0;e<a.length;e++)a[e].length>1?n.push(a[e].slice(-1).pop()):n.push(a[e][0]);const i=s.a.getByIds(n),r=ie(i,b.sb),o=ie(i,b.xb),l=ie(i,b.D),c=o&&ne(i,b.xb),u=l&&ne(i,b.D);return o&&(e.type=b.xb),r&&(e.type=b.sb,c&&(e.shouldDisable.trashButton=!0)),r||(c&&(e.shouldDisable.trashButton=!0),!c&&u&&(e.shouldDisable.spamButton=!0)),e}function re(e,t,a){const s=e.filter(e=>e&&(void 0===a||a(e))),r=t(s);i.a.updateIndex({sleUpdates:r});const o=n.a.getActiveListEntry();if(o){const e=s.find(e=>e.id===o.id);e&&(o.flags=e.flags)}}function oe(e,t){re(ae(),e,t)}function le(){return y.c.unsafeGetActivePage().isMailPage}function ce(e){return S.a.get(e?q.kMailDeleteInOtherLocations:q.kMailMarkDeleteInOtherLocations)}async function ue(e){let t=n.a.getActiveMessage();if(!t)return;const a=n.a.getRaw();if(a&&!t.bodyParts){let n=await a.parseMainPart();e&&(n=n.concat(await a.parseAttachments())),t={...t,bodyParts:n}}return t}a.d(t,"b",(function(){return se}));const me=new class{constructor(){te(this,"openMessage",()=>{const e=n.a.getActiveListEntry(),t=n.a.getActiveMessage();if(!e||!t)return;const a=s.a.getByIds(e.sourceFilterIds),i=a.some(e=>{const{accountId:t,path:a}=e;return t===b.c&&(a===b.k||a===b.gb)}),r=a.some(e=>{const{accountId:t,path:a}=e;return t===b.c&&a===b.sb}),o=c.a.getFolderTypes(a);return i?C.a.open(t):r||o.has(b.tb)?me.createDraftFromSent():void Object(W.a)(t)}),te(this,"getMoveToFolderMenu",()=>{const e=ae(),t=e.map(e=>{const t=[];return e.sources.forEach((e,a)=>{e.internal||e.deleted||t.push(a)}),t});if(0===t.length)return[];const a=t.reduce((e,t)=>e.filter(e=>t.includes(e))),n=[];if(s.a.getByIds(a).forEach(e=>{const{accountId:t,path:a}=e,i=c.a.getFolderType(t,a);!L.b.isVirtualViewFolder(t)&&[b.eb,b.v].includes(i)&&n.push([t,a])}),0===n.length)return[];const i=[];return n.forEach(([t,a])=>{let n=c.a.getPathsByType(t,b.eb);n.push(...c.a.getPathsByType(t,b.v)),n=n.filter(e=>e!==a),n.length>0&&i.push({items:n.map(n=>({handler:()=>F(e,t,a,n),...Object(J.a)(n)})),...Object(J.a)("Move from $1",[t+"/"+a])})}),i}),te(this,"getCustomLabelsMenu",e=>s.a.getByAccountId(b.E).map(t=>({type:"checkbox",checked:e.indexOf(t.path)>-1,handler:this.toggleLabel(t.path,e),...Object(J.a)(t.name)}))),te(this,"clearAllLabels",e=>{const t=e.reduce((e,t)=>({...e,[t]:!1}),{});this.setCustomFlags(t)}),te(this,"toggleLabel",(e,t)=>()=>{const a=-1===t.indexOf(e);this.setCustomFlags({[e]:a})}),te(this,"getStandardFlagsMenu",e=>s.a.getByAccountId(b.q).map(t=>({type:"checkbox",checked:t.path===e,handler:this.toggleStandardFlag(t.path,e),label:R.a.translateFlag(t.path),labelEnglish:t.path}))),te(this,"toggleStandardFlag",(e,t)=>()=>{const a=t===e?Object(Q.d)(b.O.CLEAR_FLAGS):Object(Q.d)(e);this.setCustomFlags({[b.O.FLAGGED]:a.flagged,[b.O.MAIL_FLAG_BIT_0]:a.bit0,[b.O.MAIL_FLAG_BIT_1]:a.bit1,[b.O.MAIL_FLAG_BIT_2]:a.bit2})})}enableThreadedView(){if(!le())return;const e=ae();e&&e.length>0&&e[0]&&i.a.selectThread(e[0])}enableSenderView(e){if(le())if(e)i.a.selectContact(e,!0);else{const e=n.a.getActiveMessage(),t=e&&e.from[0];t&&t.address&&i.a.selectContact(t.address,!0)}}setActiveMailDetail(e){k.a.dispatch({actionType:"MAIL_SET_ACTIVE_COMPONENT",mailDetail:e})}setActiveMessage(e){k.a.dispatch({actionType:"MAIL_SET_ACTIVE_MESSAGE",message:e})}markAsReadAndGoToNextUnread(){le()&&(me.markRead(),k.a.dispatch({actionType:A.a.MAIL_GOTO_UNREAD}))}goToNextUnread(){le()&&k.a.dispatch({actionType:A.a.MAIL_GOTO_NEXT_UNREAD})}goToPreviousUnread(){le()&&k.a.dispatch({actionType:A.a.MAIL_GOTO_PREVIOUS_UNREAD})}clearIfActive(e){setTimeout(()=>{k.a.dispatch({actionType:"MAIL_CLEAR_IF_ACTIVE",mailDetail:e})},100)}refreshActiveMessage(){k.a.dispatch({actionType:"MAIL_REFRESH_ACTIVE_MESSAGE"})}async createDraftFromSent(){const e=await ue(!0);e&&C.a.createDraftFromSent(e)}async reply(){const e=await ue(!1);e&&await C.a.reply(e)}async replyAll(){const e=await ue(!1);e&&await C.a.replyToAll(e)}async forward(){const e=await ue(!0);e&&await C.a.forward(e)}markRead(){le()&&oe(e=>R.a.setRead(e,!0))}markUnread(){le()&&oe(e=>R.a.setRead(e,!1))}markThreadRead(){if(!le())return;re(ae(!0),e=>R.a.setRead(e,!0))}markThreadUnread(){if(!le())return;re(ae(!0),e=>R.a.setRead(e,!1))}markFlagged(){oe(e=>R.a.setFlagged(e,!0),e=>!Object(Q.p)(e))}markUnflagged(){oe(e=>R.a.setFlagged(e,!1),e=>Object(Q.p)(e))}setCustomFlags(e){oe(t=>R.a.setCustomFlags(t,e))}async prepareDelete(e,t,a){const n=t||ae();if(n.some(e=>e.sources.size>1)||a){const i=w.a.getSelectedFolder();if(!i)return void console.warn("No folder selected");const{accountId:r,path:o=b.m,type:l}=i,u=l===b.tb,m=function(e){let t=0;for(const a of e)for(const[e,n]of[...a.sources.entries()]){const{accountId:a,path:i}=s.a.get(e);c.a.getFolderType(a,i)===b.tb||n.deleted||++t}return t}(n);if(u||m<=1&&!a);else{const a=s.a.getByFolderId([r,o]),i=n.some(e=>e.sources.has(a.id)),l=ce(e);if(i){if("ask"===l)return void O.a.showMailDeleteDialogSetting({entries:n,deletePermanently:e})}else{if(t)return void O.a.showMailDeleteDialogConfirmAll({entries:n,deletePermanently:e});if(n.length>1){if(["selected","folders","ask"].includes(l))return void O.a.showMailDeleteDialogConfirmAll({entries:n,deletePermanently:e})}else if([...n[0].sources.values()].filter(e=>!e.deleted).length>1){if("selected"===l)return void O.a.showMailDeleteDialogFolders({entries:n,deletePermanently:e});if(["folders","ask"].includes(l))return void O.a.showMailDeleteDialogAccounts({entries:n,deletePermanently:e})}}}}await this.delete(n,e)}async delete(e,t,a={}){const{setting:n,accountIds:i,sourceFilterIds:r}=a,o=n||ce(t),l=new Map,u=w.a.getSelectedFolder();if(!u)return void console.warn("No folder selected");const{accountId:m,path:d=b.m}=u,h=s.a.getByFolderId([m,d]),p=w.a.isSentFolderSelected();if(e.forEach(e=>{const a=[];e.sources.forEach((e,n)=>{if(!t&&e.deleted)return;if(!function(e,t,a){const{accountId:n,path:i}=s.a.get(t),r=c.a.getFolderType(n,i);return e.deleted||r===b.tb===a}(e,n,p))return;const l=s.a.get(n);if(l)if(i||r){if(i&&!i.get(l.accountId))return;if(r&&!r.get(n))return;a.push(n)}else"selected"===o?h&&h.id===n&&a.push(n):"folders"===o?l.accountId===m&&a.push(n):a.push(n)}),a.length>0&&l.set(e.searchListId,a)}),0===l.size)return;const g=e.filter(e=>l.has(e.searchListId));g.forEach(e=>{C.a.closeComposer(e.searchListId)}),t?j(g,l):V(g,l)}undelete(){const e=ae();X(e)}markAsJunk(){const e=ae();E.markAsJunk(e)}markAsNotJunk(){const e=ae();E.markAsNotJunk(e)}};t.a=me},function(e,t,a){"use strict";var n=a(0),i=a(40),s=a.n(i);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends n.Component{constructor(...e){super(...e),r(this,"setCheckedDisabledRadio",e=>{this.getRadios().forEach(t=>{t.value===e.value.toString()&&(t.checked=!0),t.disabled=Boolean(e.disabled)})}),r(this,"getRadios",()=>s.a.findDOMNode(this).querySelectorAll('input[type="radio"]'))}componentDidMount(){this.getRadios().forEach(e=>{e.name=this.props.name,e.addEventListener("change",this.props.onChange)}),this.setCheckedDisabledRadio(this.props)}componentDidUpdate(e){e.value===this.props.value&&e.disabled===this.props.disabled||this.setCheckedDisabledRadio(this.props)}componentWillUnmount(){this.getRadios().forEach(e=>{e.removeEventListener("change",this.props.onChange)})}render(){return n.createElement("div",{className:this.props.className,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RadioGroup.jsx",lineNumber:62,columnNumber:7}},this.props.children)}}t.a=o},,,function(e,t,a){"use strict";const n=Object.freeze({KEY_CANCEL:3,KEY_HELP:6,KEY_BACK_SPACE:8,KEY_TAB:9,KEY_CLEAR:12,KEY_RETURN:13,KEY_ENTER:14,KEY_SHIFT:16,KEY_CONTROL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_ESCAPE:27,KEY_SPACE:32,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_PRINTSCREEN:44,KEY_INSERT:45,KEY_DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_SEMICOLON:59,KEY_EQUALS:61,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,KEY_META:91,KEY_CONTEXT_MENU:93,KEY_NUMPAD0:96,KEY_NUMPAD1:97,KEY_NUMPAD2:98,KEY_NUMPAD3:99,KEY_NUMPAD4:100,KEY_NUMPAD5:101,KEY_NUMPAD6:102,KEY_NUMPAD7:103,KEY_NUMPAD8:104,KEY_NUMPAD9:105,KEY_MULTIPLY:106,KEY_ADD:107,KEY_SEPARATOR:108,KEY_SUBTRACT:109,KEY_DECIMAL:110,KEY_DIVIDE:111,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_F13:124,KEY_F14:125,KEY_F15:126,KEY_F16:127,KEY_F17:128,KEY_F18:129,KEY_F19:130,KEY_F20:131,KEY_F21:132,KEY_F22:133,KEY_F23:134,KEY_F24:135,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145,KEY_COMMA:188,KEY_PERIOD:190,KEY_SLASH:191,KEY_BACK_QUOTE:192,KEY_OPEN_BRACKET:219,KEY_BACK_SLASH:220,KEY_CLOSE_BRACKET:221,KEY_QUOTE:222});t.a=n},,function(e,t,a){"use strict";const n={kNone:-1,kLeft:0,kCenter:1,kRight:2,kBack:3,kForward:4,isContextMenuButton:e=>2===e,isNavigationButton:e=>3===e||4===e,isNoModifierPressed:e=>!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey),setWebviewPointerEvents:(e,t)=>{const a=e?"":"none";for(const e of t.getElementsByTagName("WEBVIEW"))e.style.pointerEvents=a}};t.a=n},,,,function(e,t,a){"use strict";var n=a(79),i=a(256),s=a(31),r=a(444),o=a(10),l=a(496),c=a(582),u=a(583),m=a(584),d=a(585),h=a(7);let p={x:0,y:0,width:0,height:0},b="topLeft",g="none",N=null;t.a=function(e,t,a,f="pointer",_,v=-1){const E=s.a.getShortcutSettings();let C=0;const w=new Map,O=function(e){const t=w.get(e.id);if(e.id>=0&&t){const a=n.a.makeEventFlagsFromApiResponse(e.state);t.call(this,a)}},y=function(e){g="none",i.a.onHover(""),h.a.menubarMenu.onOpen.removeListener(S),h.a.menubarMenu.onClose.removeListener(T),h.a.menubarMenu.onHover.removeListener(i.a.onHover),h.a.menubarMenu.onAction.removeListener(O);const t=N;t&&(N=null,e||t())},S=function(){g="shown","function"==typeof a&&a(!0)},T=function(){"function"==typeof a&&a(!1),y(!1)},k=function(e){return e.filter(e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible).map(e=>{const t={};if(s.a.isSeparator(e))t.separator={};else if("container"===e.type){if(e.container)switch(e.container.content){case"extensions":case"imageinprofile":case"linkinprofile":case"notes":case"pwa":case"linkinpwa":case"sendpagetodevices":case"sendlinktodevices":case"speech":case"spellcheck":case"spellcheckoptions":const a=C++;t.container={id:a,content:e.container.content,mode:e.container.mode||"folder",name:s.a.getDisplayName(e)};break;default:console.warn("Unknown container content",e.container.content)}}else{const a=C++,n=s.a.getDisplayName(e);let i,r;switch(e.handler&&(n||e.url)&&w.set(a,e.handler),e.commandName&&0===e.commandName.indexOf("DOCUMENT_")&&(i=e.commandName),(e.iconPNG||e.iconPNGWhite)&&(r=[e.iconPNG||"",e.iconPNGWhite||""]),e.type){case"checkbox":case"radio":t.item={id:a,action:i,name:n,type:e.type,radiogroup:e.radiogroup?e.radiogroup:-1,checked:!(!e.checked||e.statestrings)&&e.checked,shortcut:s.a.getShortcut(e,E),showshortcut:e.showshortcut,url:e.url,enabled:e.enabled,icons:r};break;default:t.item={id:a,action:i,name:n,type:e.items?"folder":"command",shortcut:s.a.getShortcut(e,E),showshortcut:e.showshortcut,url:e.url,enabled:e.enabled,icons:r},e.items&&(t.children=k(e.items))}}return t})},A=function(a){if("none"!==g)return void("shown"===g?N=A.bind(null,a):console.error("Attempt to show another context menu while one is initializing"));const n="function"==typeof t?t():t;0!==n.length&&(g="initializing",s.a.installMnemonics(n,[]),h.a.menubarMenu.onOpen.addListener(S),h.a.menubarMenu.onClose.addListener(T),h.a.menubarMenu.onHover.addListener(i.a.onHover),h.a.menubarMenu.onAction.addListener(O),h.a.contextMenu.show({windowId:e,documentId:v,rect:p,origin:b,icons:[l.a,c.a,u.a,m.a,d.a],children:k(n)},()=>{const e=o.a.runtime.lastError;e&&(console.error(e.message),y(!0))}))};return function(e){var t,a;e&&(null==e?void 0:null===(t=e.nativeEvent)||void 0===t?void 0:null===(a=t.path)||void 0===a?void 0:a.find(e=>"vivaldi-tooltip"===e.id))||r.a.hideTooltip(),e&&(e.persist(),e.preventDefault(),e.stopPropagation());if(p={x:0,y:0,width:0,height:0},b=f,"pointer"===f)p.x=e?e.clientX:0,p.y=e?e.clientY:0;else{let t=_?_.getBoundingClientRect():null;!t&&e&&(t=e.nativeEvent.srcElement.getBoundingClientRect()),t&&(p.x=t.left+1,p.y=t.top,p.width=t.width,p.height=t.height)}A(e)}}},function(e,t,a){"use strict";a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return g}));var n=a(28),i=a(36),s=a(14),r=a(6),o=a(157),l=a(10),c=a(228),u=a(149),m=a(7),d=a(46),h=a(23),p=a(1);const b="vivaldi/x-bookmarks";function g(e){return!Object(h.m)(e)}const N={open:function(e,t){if(t&&r.a.get(p.kBookmarksConfirmOpening)&&e.bookmarks.length>=r.a.get(p.kBookmarksConfirmOpeningThreshold))i.a.showConfirmOpenBookmarkDialog({urls:e.bookmarks.map(({url:e})=>e),openOptions:{inCurrent:e.inCurrent,inNewWindow:e.inNewWindow,inBackground:e.inBackground,incognito:e.incognito}});else{let t=!1===e.inCurrent;const a=!0===e.inNewWindow;let i=!0===e.inBackground;const l=!0===e.incognito;if(!1===t&&!1===a&&!1===i&&!0===e.allowOverride&&(!0===r.a.get(p.kBookmarksOpenInNewTab)&&(t=!0,!0===r.a.get(p.kTabsOpenNewInBackground)&&(i=!0)),1===e.bookmarks.length&&e.bookmarks[0].url.startsWith("javascript:")&&(t=!1)),!0===a){0;const t=e.bookmarks.map(e=>e.url).filter(e=>n.b.filterUrl(e).length>0);s.a.openWindow(t,{incognito:l,transition:o.a.AUTO_BOOKMARK})}else{const a=e.bookmarks.filter(e=>n.b.filterUrl(e.url).length>0),s=a.length>0?a[a.length-1]:void 0;a.forEach(e=>{!0===t?!0===i?this.openInNewTab(e,!0):this.openInNewTab(e,e!==s):(this.openInCurrentTab(e),t=!0)})}}},openInNewTab:function(e,t){s.a.openURL(e.url,{bookmarkId:e.id,inCurrent:!1,inBackground:t,transition:o.a.AUTO_BOOKMARK})},openInCurrentTab:function(e){s.a.openURL(e.url,{bookmarkId:e.id,inCurrent:!0,transition:o.a.AUTO_BOOKMARK})},openInNewWindow:function(e,t,a){s.a.openURL(e.url,{bookmarkId:e.id,inNewWindow:!0,inBackground:t,incognito:a,transition:o.a.AUTO_BOOKMARK})},getBookmarksByNode:function(e){let t=[];return e.children?t=t.concat(e.children.filter(e=>e.url)):e.url&&t.push(e),t},getOpenOptionsFromDisposition:function(e,t,a){switch(e){case"setting":return Object(u.b)(a);case"current":return{inCurrent:!0};case"new-tab":return{inCurrent:!1,inBackground:t||r.a.get(p.kTabsOpenNewInBackground)};case"new-window":return{inNewWindow:!0,inBackground:t};case"new-private-window":return{inNewWindow:!0,inBackground:t,incognito:!0}}return{}},isCopyModifierPressed:function(e){return e.ctrlKey},makeEventFlagsFromApiResponse:function(e){const t={};return e.left?t.button=0:e.right?t.button=2:e.center&&(t.button=1),e.ctrl&&(t.ctrlKey=!0),e.alt&&(t.altKey=!0),e.shift&&(t.shiftKey=!0),e.command&&(t.metaKey=!0),t},async verifyNode(e,t){const a={...e};if(a.url&&(a.url=a.url.trim()),a.title&&(a.title=a.title.trim()),a.nickname&&(a.nickname=a.nickname.trim()),a.description&&(a.description=a.description.trim()),t)return a.url="",a;if(a.url.length>0){const{urlValid:e,schemeValid:t}=await m.a.utilities.isUrlValid(a.url);e&&t||(a.url=Object(d.c)(a.url))}return a.url.length>0?a:null},extractTitleFromEvent:function(e){const{dataTransfer:t}=e.nativeEvent;if(t){var a=t.getData("vivaldi/x-title");if(""===a){const e=t.getData("text/html");if(""!==e){var n=document.createElement("div");n.innerHTML=e;const t=n.getElementsByTagName("a");if(t&&t[0]){const e=t[0].textContent;""!==e&&(a=e)}}}return a}},getUrlsFromEventPromise:(e,t)=>new Promise((a,n)=>{const i=e.dataTransfer.getData("vivaldi/x-tab-entries"),s=e.dataTransfer.getData("text/uri-list");if(i){const e=JSON.parse(i).ids.map(e=>parseInt(e)).sort((e,t)=>e-t);l.a.tabs.query({},t=>a(t.filter(t=>e.some(e=>t.id===e)).filter(({url:e})=>!Object(h.h)(e)).map(({title:e,url:t},a)=>({title:e||Object(c.a)(t),url:t}))))}else{if(s.length>0){const t=N.extractTitleFromEvent(e);return a(s.split("\n").map((e,a)=>({url:e,title:0===a&&""!==t?t:Object(c.a)(e)})))}if(!0!==t)return n();{let t=e.dataTransfer.getData("text/plain");if(t.length>0){if(Object(d.o)(t))return a([{url:t,title:Object(c.a)(t)}]);if(t=t.trim(),t.length>0&&!/\s/.test(t)){const e=t.indexOf(".");if(e>0&&e<t.length-1&&(t=Object(d.c)(t),Object(d.o)(t)))return a([{url:t,title:Object(c.a)(t)}])}return n()}}}}),isBookmarkable:g};t.a=N},,,,,,function(e,t,a){"use strict";var n=a(13),i=a(6),s=a(17),r=a(10),o=a(109),l=a(1);var c=["f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","f13","f14","f15","f16","f17","f18","f19"],u=["ctrl+t","ctrl+n","ctrl+w"],m={delete:"del",option:"alt",command:"meta",return:"enter",escape:"esc",comma:",",period:".",del:"del",mod:"ctrl"},d=["left","right","shift+left","shift+right","shift+up","shift+down","enter","shift+enter"];d=d.concat(["ctrl+a","ctrl+z","ctrl+y","ctrl+u","ctrl+left","ctrl+right","ctrl+backspace","ctrl+delete","ctrl+home","ctrl+end","ctrl+shift+left","ctrl+shift+right","shift+home","shift+end"]);const h={};function p(e){var t=e.split("+");t=t.map(e=>m[e]||e);var a="";function n(e){t.indexOf(e)>-1&&(a+=e+"+",t.splice(t.indexOf(e),1))}return n("ctrl"),n("alt"),n("shift"),n("meta"),t.sort(),t.forEach((e,n)=>{a+=e,n+1<t.length&&(a+="+")}),a.toLowerCase()}function b(e){return{ctrlKey:-1!==e.indexOf("ctrl"),altKey:-1!==e.indexOf("alt"),metaKey:-1!==e.indexOf("meta"),shiftKey:-1!==e.indexOf("shift"),key:e.split("+").pop()}}function g(e,t){t(e)}function N(e){return 1===e.length||e.startsWith("numpad")}function f(e){var t=b(e),a=e.split("+").pop();if(-1!==d.indexOf(e))return!1;if("esc"===a||"down"===a||"up"===a||"home"===a||"end"===a||"pagedown"===a||"pageup"===a)return!0;if(c.indexOf(a)>-1)return!0;if(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey){if("backspace"===a||"del"===a)return!0;if(t.ctrlKey||t.metaKey||t.altKey)return!0}return!1}const _=["INPUT","FRAME","IFRAME","SELECT","TEXTAREA"],v=["submit","button","reset","radio","checkbox"];let E=!1;const C=["f2","ctrl+f","ctrl+o","ctrl+p","ctrl+shift+d","ctrl+shift+m"],w=["chrome://game/","docs.google.com"];var O={bind:function(e,t,a,n,i,s){return[].concat(e).filter(Boolean).map(e=>e.trim()).forEach(e=>function(e,t,a,n,i,s){const r=p(e),o=h[r]||[];o.push({callback:n,onAutoRepeat:Boolean(t),isMailShortcut:Boolean(a),isEnabled:i||(()=>!0),inContext:s||(()=>!0)}),h[r]=o}(e,a,n,t,i,s)),this},unbind:function(e,t){return[].concat(e).forEach(e=>function(e,t){if(e){const a=p(e);h[a]&&(t?h[a]=h[a].filter(e=>e.callback!==t):delete h[a])}}(e,t)),this},keyComboFromEvent:function(e){if(!(["Alt","Shift","Control","Meta","CapsLock","NumLock","AltGraph"].indexOf(e.key)>-1)&&"keydown"===e.type){const t=function(e){if(e.code.startsWith("Numpad")){var t=o.a[e.keyCode].substr(6);if(t>="0"&&t<="9")return e.code}return o.a[e.keyCode]}(e);if("None"===t)return"";{let a=function(e){var t="";return e.metaKey&&(t+="meta+"),e.altKey&&(t+="alt+"),e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),t}(e);return a+=t,p(a.toLowerCase())}}return""},shortcutAllowedInText:f,isSingleKeyShortcut:N,setDevToolsConflicts:function(e){E=e},handleShortcut:function(e,t,o,c){let m=t.toLowerCase().replace(" ","");m.endsWith("arrow")&&(m=m.substring(0,m.length-5)),m=p(m);const d=function(e){const t=h[e];return t&&t.length?t[t.length-1]:void 0}(m);if(d){if(!d.isEnabled()||!d.inContext())return;if(!0===o&&!1===d.onAutoRepeat)return;r.a.windows.getCurrent({},t=>{if(t.id===s.a.getId()){const t=b(m);!function(e,t,s,r,o,c){const m=document.activeElement;if(N(t)){if(E)return;if(o){if(!i.a.get(l.kKeyboardShortcutsEnableSingleKeyForMail))return;if(!window.isMailWindow)return;if(!n.c.unsafeGetActivePage().isMailPage&&!i.a.get(l.kKeyboardShortcutsEnableSingleKey))return}else if(!i.a.get(l.kKeyboardShortcutsEnableSingleKey))return;for(const e of w)if(c.includes(e))return}if(r){if(!1===a(44).default.isCommandWhitelisted(t))return}if(!i.a.get(l.kKeyboardShortcutsEnable)){const e=a(44).default.getAllCommands().find(e=>"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS"===e.name);if(!e||!Array.isArray(e.shortcut)||!e.shortcut.some(e=>e===t))return}if(E&&C.includes(t))return;const d=m?m.tagName:"",h=m instanceof HTMLInputElement?m.type:"",p=!!m&&m.isContentEditable;_.includes(d)&&!v.includes(h)||p?f(t)&&g(s,e):m&&"WEBVIEW"===d?m.getFocusedElementInfo((a,n,i,r)=>{if(!i||f(t)){const i="OBJECT"===a,o="SELECT"===a,l="SPAN"===a&&"spinbutton"===r,c=("EMBED"===a||i)&&"application/x-shockwave-flash"===n;(!c&&!o&&!l||c&&u.indexOf(t)>-1||o&&f(t))&&g(s,e)}}):g(s,e)}(d.callback,m,t,c,d.isMailShortcut,e)}})}}};t.a=O},function(e,t,a){"use strict";a.d(t,"b",(function(){return d}));var n=a(57),i=a.n(n),s=a(12),r=a(16),o=a(35),l=a(125),c=a.n(l),u=a(224),m=a(7);const d="vivaldi/x-search-engine";let h,p,b,g,N,f,_,v,E=[],C=[],w=!1,O=void 0,y=p,S=!0;function T(e){v=parseInt(e.nextHistoryId);const t=v;isNaN(v)&&(v=1),h=e.version;const a=Object(u.a)(e.engines).map(e=>A(e)),n=a.filter(e=>e.removed),i=[];n.forEach(e=>{-1===i.findIndex(t=>t.id===e.id)&&i.push(e)});const s=a.filter(e=>!e.removed);E=s.concat(i),C=s,p=C.find(t=>t.id===e.default),b=C.find(t=>t.id===e.defaultPrivate),g=C.find(t=>t.id===e.current),N=C.find(t=>t.id===e.currentSD),f=C.find(t=>t.id===e.currentPrivate),_=C.find(t=>t.id===e.context),w=e.defaultChanged,O=e.customOrder,v!==t&&D()}function k(e){return{id:e.id,historyId:e.historyId,name:e.name?e.name.trim():"",url:e.url?e.url.trim():"",suggestUrl:e.suggestUrl?e.suggestUrl.trim():"",faviconUrl:e.faviconUrl?e.faviconUrl.trim():"",keyword:e.keyword?e.keyword.trim().toLowerCase():"",post:Boolean(e.post),removed:Boolean(e.removed),custom:Boolean(e.custom)}}function A(e){const t=k(e);return t.historyId||(t.historyId=v++),t}function I(e,t,a){switch(t){case"defaultPrivate":b=C.find(t=>t.id===e);break;case"current":g=C.find(t=>t.id===e);break;case"currentSD":N=C.find(t=>t.id===e);break;case"currentPrivate":f=C.find(t=>t.id===e);break;case"context":_=C.find(t=>t.id===e);break;case"default":default:const t=C.find(t=>t.id===e);void 0!==t&&(p=t,w=!0)}a&&D()}function D(){if(void 0!==h){const e={version:h,nextHistoryId:v,engines:E,default:p?p.id:void 0,defaultPrivate:b?b.id:void 0,current:g?g.id:void 0,currentSD:N?N.id:void 0,currentPrivate:f?f.id:void 0,context:_?_.id:void 0,defaultChanged:w,customOrder:O};o.a.set({SEARCH_ENGINE_COLLECTION:e})}}const M=new class extends i.a{setPopupEngine(e){y=e,S=!1}getFirstLaunch(){return S}getCurrentPopupEngine(){return y}get(){return{list:C,defaultEngine:p}}getList(){return C}getDefault(e){return e&&b?b:p}getCurrent(e){return e&&f?f:g}getCurrentSD(e){return e&&b?b:N}getContext(){return _}isDefault(e,t){const a=M.getDefault(t);return a&&a.id===e}getHasCustomOrder(){return!0===O}getByQuery(e){return M.getList().find(t=>e.toLowerCase().startsWith(t.keyword+" "))}getByKeyword(e){const t=e.toLowerCase();return C.find(e=>e.keyword.length>0&&e.keyword===t)}getByHistoryId(e){return C.find(t=>t.historyId===e)}hasKeyword(e){return void 0!==M.getByKeyword(e)}getById(e){return C.find(t=>t.id===e)}getIndexById(e){return C.findIndex(t=>t.id===e)}getNewEngine(){return{id:c()(),name:"",keyword:"",url:"",custom:!0,post:!1,faviconUrl:"",suggestUrl:""}}emitChangeParam(e){this.emit(r.a.CHANGED,e)}addChangeListener(e){this.on(r.a.CHANGED,e)}removeChangeListener(e){this.removeListener(r.a.CHANGED,e)}};s.a.register(e=>{switch(e.actionType){case r.a.SEARCH_ENGINES_INIT:T(e.collection);break;case r.a.SEARCH_ENGINES_SET_COLLECTION:t=e.collection,a=e.writeToSettings,T(t),a&&D();break;case r.a.SEARCH_ENGINES_ADD:!function(e,t){if(e.id){const a=A(e);-1===M.getIndexById(a.id)&&(E.push(a),C.push(a),t&&I(a.id,"default",!1),D())}}(e.engine,e.makeDefault);break;case r.a.SEARCH_ENGINES_REMOVE:!function(e){const t=E.findIndex(t=>t.id===e);if(-1!==t){const a=E.splice(t,1);if(a[0].removed=!0,E.push(a[0]),C=E.filter(e=>!e.removed),p.id===e){const e=o.a.getDefaultSearchEngines();p=M.getById(e.default),void 0===p&&(p=C[0]),w=!0}b&&b.id===e&&(b=p),g&&g.id===e&&(g=void 0),N&&N.id===e&&(N=void 0),f&&f.id===e&&(f=void 0),_&&_.id===e&&(_=void 0),D(),m.a.historyPrivate.deleteAllSearchTermsForKeyword(a[0].historyId)}}(e.id);break;case r.a.SEARCH_ENGINES_MODIFY:!function(e,t){const a=A(e);if(E.find(e=>e.id===a.id)){const e=o.a.getDefaultSearchEngines().engines.find(e=>e.id===a.id),n=e?k(e):void 0;void 0!==n&&(n.name===a.name&&n.url===a.url&&n.suggestUrl===a.suggestUrl&&n.keyword===a.keyword&&Boolean(n.post)===Boolean(a.post)?a.custom=!1:a.custom=!0);let i=E.findIndex(e=>e.id===a.id);E.splice(i,1,a),i=M.getIndexById(a.id),C.splice(i,1,a),t?I(a.id,"default",!0):D()}}(e.engine,e.makeDefault);break;case r.a.SEARCH_ENGINES_REORDER:!function(e,t){const a=E.filter(e=>!e.removed),n=a.findIndex(t=>t.id===e);if(-1!==n&&t<a.length){const e=a.splice(n,1);a.splice(t,0,e[0]),E=a.concat(E.filter(e=>e.removed)),C=a,O=!0,D()}}(e.id,e.index);break;case r.a.SEARCH_ENGINES_SET_DEFAULT:I(e.id,e.type,e.writeToSettings);break;case r.a.SEARCH_ENGINES_RESTORE:!function(e){const t={...o.a.getDefaultSearchEngines()};if(t.engines=Object(u.a)(t.engines),t.engines.forEach(e=>{e.post=Boolean(e.post),e.custom=!1,e.faviconUrl=e.faviconUrl?e.faviconUrl:"",e.suggestUrl=e.suggestUrl?e.suggestUrl:""}),t.customOrder=!1,e){const e=E.filter(e=>!e.removed&&e.custom);Array.prototype.push.apply(t.engines,e)}T(t),D()}(e.keepCustomSearches);break;default:return}var t,a;M.emitChangeParam(e)}),t.a=M},function(e,t,a){"use strict";a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return g})),a.d(t,"a",(function(){return N})),a.d(t,"b",(function(){return f}));var n=a(45),i=a.n(n),s=a(173),r=a(11),o=a(6),l=a(35),c=a(17),u=a(405),m=a(320),d=a(298),h=a(261),p=a(1);const b="user_color",g="user_image",N="desktop_image",f="chrome://vivaldi-data/desktop-image/0",_=matchMedia("(prefers-color-scheme: dark)"),v=["center","top","right","bottom","left"];function E(e,t,a,n,i){let s;for(let r=0;r<e[t].length;r++){const o=e[t][r];if(a===o[0]&&n===o[1]&&i===o[2]){s=r;break}}void 0===s?e[t].push([a,n,i,1]):e[t][s][3]++}function C(e){return Object.entries(e).reduce((e,[t,a])=>{const n=t[0].toUpperCase()+t.slice(1),r=a.luminance()>s.b,o=i.a.mix(a,r?s.c:s.a),l=r?s.a:s.c;return e[`--colorImage${n}Fg`]=l.css(),e[`--colorImage${n}FgAlpha`]=l.alpha(.6).css(),e[`--colorImage${n}FgAlphaHeaviest`]=l.alpha(.05).css(),e[`--colorImage${n}Bg`]=o.css(),e[`--colorImage${n}BgAlpha`]=o.alpha(.6).css(),e[`--colorImage${n}BgAlphaHeavy`]=o.alpha(.3).css(),e},{})}function w(e){return 60*e.hours+e.minutes}const O={getDocumentColors:e=>{const{baseFg:t,baseBg:a,highlightBg:n}=function(e){return c.a.isIncognito(e)?Object(m.a)(O.getTheme(o.a.get(p.kThemePrivateWindow)).colors,["baseFg","baseBg","highlightBg"]):{baseFg:l.a.getSync("BROWSER_COLOR_FG"),baseBg:l.a.getSync("BROWSER_COLOR_BG"),highlightBg:l.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG")}}(e),{colorFg:r,colorBgLightIntense:u,colorHighlightBg:d}=s.d.fgBgHighlight(i()(t),i()(a),i()(n));return{color:r.css(),backgroundColor:u.css(),linkColor:d.css()}},createImageBackground:async e=>{const t=o.a.get(p.kThemeBackgroundData),a=t===b||i.a.valid(t),n={};if(!o.a.get(p.kThemeTransparentTabBar)){const{accentOnWindow:t}=function(e){return c.a.isIncognito(e)?O.getTheme(o.a.get(p.kThemePrivateWindow)).settings:{accentFromPage:l.a.getSync("USE_TABCOLOR"),accentOnWindow:l.a.getSync("TABCOLOR_BEHIND_TABS"),borderRadius:l.a.getSync("BORDER_RADIUS"),tabsTransparent:l.a.getSync("USE_TAB_TRANSPARENT_TABS")}}(e);n["--colorTabBar"]=t?"var(--colorAccentBg)":"var(--colorBg)"}if(!a){const e=t===N?f:[g].includes(t)?o.a.get(p.kThemeBackgroundUserImage):t,a=o.a.get(p.kThemeBackgroundPosition);let s,r;try{if(s=await async function(e){const t=document.createElement("img"),a=new Promise((e,a)=>{t.addEventListener("load",e,{once:!0}),t.addEventListener("error",a,{once:!0})});return t.src=e,await a,t}(e),r=function(e){const t=document.createElement("canvas"),a=t.getContext("2d"),n=[15,31,47,63,79,95,111,127,143,159,175,191,207,223,239,255],s={center:[],top:[],right:[],bottom:[],left:[]};t.width=16,t.height=16,a.imageSmoothingEnabled=!1,a.drawImage(e,0,0,16,16);const r=a.getImageData(0,0,16,16).data;for(let e=0;e<r.length/4;e++){const t=4*e,a=r[t],i=r[t+1],o=r[t+2],l=n.includes(e),c=e>240,u=!l&&e%16==0;E(s,!c&&e<16?"top":c?"bottom":l?"right":u?"left":"center",a,i,o)}return v.reduce((e,t)=>{s[t].sort((e,t)=>t[3]-e[3]);const a=s[t][0];return e[t]=i()(a[0],a[1],a[2]),e},{})}(s),n.backgroundColor=r.center.css(),"stretched"!==a){const e=s.naturalHeight/window.devicePixelRatio,t=s.naturalWidth/window.devicePixelRatio;n.backgroundSize=`${t}px ${e}px`}}catch(t){console.error("Error loading background image: "+e)}return"stretched"===a&&(n.backgroundSize="cover"),"repeating"!==a&&(n.backgroundRepeat="no-repeat"),n.backgroundImage=`url("${e}")`,r?{...n,...C(r)}:n}const s=i()(t===b?o.a.get(p.kThemeBackgroundUserColor):t),r={center:s,top:s,right:s,bottom:s,left:s};return{...n,background:s.css(),...C(r)}},getPalette:(e,t)=>{const a=document.createElement("canvas"),n=t||16,i=a.getContext("2d"),s=[],r=[];a.width=n,a.height=n,i.imageSmoothingEnabled=!1,i.drawImage(e,0,0,n,n);const o=i.getImageData(0,0,n,n).data;for(let e=0;e<o.length/4;e++){const t=4*e,a=o[t],n=o[t+1],i=o[t+2];let r=void 0;if(!(0===o[t+3]||a>240&&i>240&&n>240)){for(let e=0;e<s.length;e++)if(a===s[e][0]&&n===s[e][1]&&i===s[e][2]){r=e;break}void 0===r?s.push([a,n,i,1]):s[r][3]++}}s.sort((e,t)=>t[3]-e[3]);for(let e=0;e<Math.min(10,s.length);e++)r.push([s[e][0],s[e][1],s[e][2]]);return r},getSchedules:()=>{const e=l.a.getSync("THEMES_SYSTEM").concat(l.a.getSync("THEMES_USER")),t=Object(d.a)(o.a.get(p.kThemeScheduleTimeline));return t.map(t=>e.some(e=>e.name===t.themeName)?t:Object.assign(t,{themeName:e[e.length-1].name})),t},setTheme:e=>{if(e&&.1===e.version){switch(o.a.get(p.kThemeScheduleEnabled)){case"off":break;case"system":const t=o.a.get(p.kThemeScheduleOS),a=_.matches;r.a.set(p.kThemeScheduleOS,{...t,[a?"dark":"light"]:e.name});break;case"timeline":const n=O.getSchedules(),i=O.getTimerByDate(new Date,u.a);if(i){const t=n.findIndex(e=>e.id===i.id);n[t].themeName=e.name,r.a.set(p.kThemeScheduleTimeline,n)}else console.error("Unable to get the currently scheduled theme.");break;default:console.error("Invalid theme schedule type.")}l.a.set({THEME_CURRENT:e.name,BROWSER_COLOR_BG:e.colors.baseBg,BROWSER_COLOR_FG:e.colors.baseFg,BROWSER_COLOR_HIGHLIGHT_BG:e.colors.highlightBg,BROWSER_COLOR_ACCENT_BG:e.colors.accentBg,TABCOLOR_BEHIND_TABS:e.settings.accentOnWindow,USE_TABCOLOR:e.settings.accentFromPage,USE_TAB_TRANSPARENT_TABS:e.settings.tabsTransparent,BORDER_RADIUS:e.settings.borderRadius})}},_switchThemeBySystem:e=>{const t=e.matches?O.getTheme(o.a.get(p.kThemeScheduleOS).dark):O.getTheme(o.a.get(p.kThemeScheduleOS).light);O.setTheme(t)},setSystemThemeSchedule:()=>{O._switchThemeBySystem(_),_.addEventListener("change",O._switchThemeBySystem)},revokeSystemThemeSchedule:()=>{_.removeEventListener("change",O._switchThemeBySystem)},getTheme:(e,t=!1)=>{const a=l.a.getSync("THEMES_SYSTEM").concat(l.a.getSync("THEMES_USER")),n=Object(d.a)(a.find(t=>t.name===e));return n||Object(d.a)(a[0])},isSystemTheme:e=>l.a.getSync("THEMES_SYSTEM").some(t=>Object(h.default)(t,e)),getTimerByDate:(e,t)=>{const a=60*e.getHours()+e.getMinutes(),n=t===u.b?O.getSchedules().reduce((e,t)=>[...e,t,{...t,hours:t.hours+24}],[]).sort((e,t)=>w(e)-w(t)).find(({hours:e,minutes:t})=>60*e+t>a):O.getSchedules().reduce((e,t)=>[...e,t,{...t,hours:t.hours-24}],[]).sort((e,t)=>w(t)-w(e)).find(({hours:e,minutes:t})=>60*e+t<=a);if(!n)throw new Error("ThemeUtilities: Error getting theme schedule.");return n}};t.e=O},,function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(57),i=a.n(n),s=a(12),r=a(169);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l="vivaldi/x-notes",c=500,u={children:[],content:"",dateAdded:0,id:"1",index:0,parentId:"0",separator:!1,title:"Notes",trash:!1};let m=u,d={id:-1},h=[];const p=new class extends i.a{constructor(...e){super(...e),o(this,"_resolveReady",r.default),o(this,"ready",(()=>new Promise(e=>{this._resolveReady=e}))()),o(this,"init",e=>{m=e[0]?e[0]:u,d=function e(t){if(!t.children)return;for(let a=0;a<t.children.length;a++){const n=t.children[a];if(n.trash)return n;if(n.children){const t=e(n);if(void 0!==t)return t}}return}(m)||{id:-1},p.emitChange("init",""),this._resolveReady()})}getRootNode(){return m}getLastTopNode(){const e=this.getRootNode(),t=e&&e.children?e.children:[];if(t.length>1)return t[t.length-2]}hasNotes(){const e=this.getRootNode();if(e&&e.children){if(e.children.length>1)return!0;const t=e.children[0];if(t&&t.trash)return Boolean(t.children&&t.children.length>0)}return!1}isFolder(e){return Boolean(e.children)}isSeparator(e){return Boolean(e.separator)}isNodeEmpty(e){const t=p.getNodeById(e);return t&&!t.title&&!t.content&&(!t.children||0===t.children.length)}hasChildren(e){return e.children&&e.children.length>0}getNodeById(e){const t=function(a){if(a)for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(m.children)}getDragData(e,t){const a=t.map(e=>p.getNodeById(e)).filter(Boolean);switch(e){case"text/plain":case"vivaldi/x-title":{const e=[];return a.forEach(t=>{e.push(p.isFolder(t)?t.title:t.content)}),e.join("\r\n")}case"text/html":{const e=a&&1===a.length?a[0]:void 0;return e&&e.url&&e.title?"<a href="+e.url+">"+e.title+"</a>":""}case"text/uri-list":return a.filter(e=>!!e.url).join("\r\n");default:return""}}getFilteredTree(e,t){const a=function(e,t,n,i,s){if(!e)return;let r=!1;return e.forEach(e=>{let o=!1;if(e.children){const l={...e,children:[]};a(e.children,l.children,n,i,s)&&(t.push(l),r=!0,o=!0)}if(!o&&p._matchNode(e,i,s)){const a={...e};t.push(a),e.children&&n.push(e.id),r=!0}}),r},n=this.getRootNode().children,i=[],s=[];return a(n,i,s,e,t),{nodes:i,collapsed:s}}getFilteredFlat(e,t){const a=(e,t,n,i)=>{e&&e.forEach(e=>{!i.inTrash&&e.trash||(p._matchNode(e,n,i)&&(e.children?t.push({...e,children:[],isExpanded:!1}):t.push({...e})),e.children&&a(e.children,t,n,i))})},n=this.getRootNode().children,i=[];return a(n,i,e.toLowerCase(),t),i}_matchNode(e,t,a){let n=!1;const i=t.toLowerCase().split(" "),s=e.title?e.title.toLowerCase():"",r=e.content?e.content.toLowerCase():"",o=e.url?e.url.toLowerCase():"";return s.length&&(n=i.every(e=>s.includes(e))),!n&&r&&!1!==a.content&&(n=i.every(e=>r.includes(e))),!n&&o&&!1!==a.url&&(n=i.every(e=>o.includes(e))),n}validateForDrag(e){return e.filter(e=>e!==d.id)}validateForDeletion(e){return e.filter(e=>e!==d.id)}validateForEdit(e){return e!==d.id}getTitle(e){const t=p.getNodeById(e);return t&&(t.title||t.content)||""}getCutIds(){return h}emitChange(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};function b(e,t){const a=m.children;if(m!==u&&a){!0===function e(t,a,n){if(t.id===n.parentId){const e=n||{level:a,treeIndex:n.index};return t.children&&t.children.splice(n.index||0,0,e),f(t),!0}if(t.children)for(let i=0;i<t.children.length;i++){const s=t.children[i],r=s.children;if(r){if(!0===e(s,a+1,n))return s.children=[...r],!0}}return!1}(m,0,e)&&(m.children=[...a],p.emitChange(t,e.id))}}function g(e,t){const a=m.children;if(m!==u&&a){!0===function e(t,a,n){if(!t.children)return!1;for(let i=0;i<t.children.length;i++){const s=t.children[i];if(s.id===a&&(s.content!==n.content||s.url!==n.url)){const e={...t.children[i],...n};return t.children.splice(i,1,e),!0}if(s.children){const t=s.children;if(!0===e(s,a,n))return s.children=[...t],!0}}return!1}(m,e,t)&&(m.children=[...a],p.emitChange("changed",e))}}function N(e,t){const a=m.children;if(m!==u&&a){!0===function e(t,a){if(!t.children)return!1;for(let n=0;n<t.children.length;n++){const i=t.children[n];if(i.id===a)return t.children.splice(n,1),f(t),!0;if(i.children){const t=i.children;if(!0===e(i,a))return i.children=[...t],0===i.children.length&&(i.isExpanded=!1),!0}}return!1}(m,e)&&(m.children=[...a],!0!==t&&p.emitChange("removed",e))}}function f(e){if(e.children)for(let t=0;t<e.children.length;t++){const a=e.children[t];a.index=t,a.treeIndex=t}}s.a.register(e=>{switch(e.actionType){case"NOTES_INIT":p.init(e.notes);break;case"NOTES_ADD_ITEM":b(e.item,"added");break;case"NOTES_CHANGE_ITEM":g(e.id,e.changes);break;case"NOTES_MOVE_ITEM":!function(e,t,a){if(m!==u&&m.children){const n=p.getNodeById(e);if(void 0!==n){N(e,!0);const i=n.index||0;n.parentId===t&&a>i&&a--,n.parentId=t,n.index=a,b(n,"moved")}}}(e.id,e.targetFolder,e.targetIndex);break;case"NOTES_REMOVE_ITEM":N(e.id,!1);break;case"NOTES_SET_CUT_IDS":h=e.ids,p.emitChange("cutids","")}}),t.b=p},function(e,t,a){"use strict";var n=a(271),i=a(85),s=a(0),r=a.n(s),o=a(25),l=a(234),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\Modal.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.Component{constructor(e,t){super(e),u(this,"modalRef",r.a.createRef()),u(this,"closeModalHandler",e=>{this.props.onRequestClose(e)}),u(this,"handleClickOutside",e=>{this.props.ignoreClick&&!e.target.closest(".window-close")||this.closeModalHandler(e)}),u(this,"keyDownModal",e=>{"Escape"!==e.key||this.props.ignoreEscape||(e.preventDefault(),this.closeModalHandler(e.nativeEvent))}),this._lastFocused=t.document.activeElement}componentDidMount(){this.props.ignoreEscape||i.a.bind("meta+.",this.closeModalHandler)}componentWillUnmount(){this.props.ignoreEscape||i.a.unbind("meta+.",this.closeModalHandler);const{document:e}=this.context;this.modalRef.current&&this.modalRef.current.contains(e.activeElement)&&this._lastFocused&&this._lastFocused.focus()}render(){return r.a.createElement(n.a,{focusName:"focus_modal",forceTrap:!0,id:"modal-bg",className:this.props.viewMode?this.props.viewMode:"slide",style:this.props.dialogWidth&&{width:this.props.dialogWidth,minWidth:"unset"},__source:{fileName:c,lineNumber:75,columnNumber:7}},r.a.createElement("div",{onKeyDown:this.keyDownModal,ref:this.modalRef,__source:{fileName:c,lineNumber:84,columnNumber:9}},this.props.children))}}u(m,"contextType",o.a),t.a=Object(l.a)(m)},function(e,t,a){"use strict";var n=a(44),i=a(168),s=a(31),r=a(2),o=a(4);var l={actions:function(){return["DOCUMENT_CONTAINER_AV","DOCUMENT_CONTAINER_EXTENSIONS"].concat(i.a.actions())},options:function(e,t){const a=void 0===t,l={...s.a.commandItem};switch(e.action){case"DOCUMENT_CONTAINER_AV":return l.settingsLabel=Object(r.a)("[Media Controls]"),l.type="container",{...l,...Object(o.a)("Media Controls")};case"DOCUMENT_CONTAINER_EXTENSIONS":return l.settingsLabel=Object(r.a)("[Extensions]"),l.type="container",{...l,...Object(o.a)("Extensions")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):n.default.getMenuItem(e,a)}}};var c={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_BOOKMARK","CONTEXT_NEW_BOOKMARK","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...Object(o.a)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...Object(o.a)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...Object(o.a)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...Object(o.a)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...Object(o.a)("Open in Private Window")};case"CONTEXT_BOOKMARK":return{...i,...Object(o.a)("Add Active Tab")};case"CONTEXT_NEW_BOOKMARK":return{...i,...Object(o.a)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...i,...Object(o.a)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...i,...Object(o.a)("New Separator")};case"CONTEXT_EDIT":return{...i,...Object(o.a)("command","Edit")};case"CONTEXT_RENAME":return{...i,...Object(o.a)("Rename")};case"CONTEXT_CUT":return{...i,...Object(o.a)("win_linux","Cut")};case"CONTEXT_COPY":return{...i,...Object(o.a)("win_linux","Copy")};case"CONTEXT_PASTE":return{...i,...Object(o.a)("win_linux","Paste")};case"CONTEXT_DELETE":return{...i,...Object(o.a)("other","Delete")};default:return n.default.getMenuItem(e,a)}}};var u={actions:function(){return["CONTEXT_BOOKMARK","CONTEXT_NEW_BOOKMARK","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_PASTE","CONTEXT_CONTAINER_SORT"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_BOOKMARK":return{...i,...Object(o.a)("Add Active Tab")};case"CONTEXT_NEW_BOOKMARK":return{...i,...Object(o.a)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...i,...Object(o.a)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...i,...Object(o.a)("New Separator")};case"CONTEXT_PASTE":return{...i,...Object(o.a)("win_linux","Paste")};case"CONTEXT_CONTAINER_SORT":return i.settingsLabel=Object(r.a)("[Sort Options]"),i.type="container",{...i,...Object(o.a)("Sort")};default:return n.default.getMenuItem(e,a)}}};var m={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_SET_SPEEDDIAL","CONTEXT_UNSET_SPEEDDIAL","CONTEXT_SET_BOOKMARK_BAR","CONTEXT_UNSET_BOOKMARK_BAR","CONTEXT_MOVE_TO_BOOKMARK_BAR","CONTEXT_BOOKMARK","CONTEXT_BOOKMARK_ALL","CONTEXT_NEW_ITEM","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","CONTEXT_IMPORT","CONTEXT_SETTINGS","CONTEXT_CONTAINER_SEARCH"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...Object(o.a)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...Object(o.a)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...Object(o.a)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...Object(o.a)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...Object(o.a)("Open in Private Window")};case"CONTEXT_SET_SPEEDDIAL":return{...i,...Object(o.a)("Use as Speed Dial")};case"CONTEXT_UNSET_SPEEDDIAL":return{...i,...Object(o.a)("Remove from Speed Dial")};case"CONTEXT_SET_BOOKMARK_BAR":return{...i,...Object(o.a)("Set as Bookmark Bar Folder")};case"CONTEXT_UNSET_BOOKMARK_BAR":return{...i,...Object(o.a)("Remove as Bookmark Bar Folder")};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{...i,...Object(o.a)("Move to Bookmark Bar Folder")};case"CONTEXT_BOOKMARK":return{...i,...Object(o.a)("Bookmark Active Page")};case"CONTEXT_BOOKMARK_ALL":return{...i,...Object(o.a)("Bookmark All Open Pages")};case"CONTEXT_NEW_ITEM":return{...i,...Object(o.a)("New Bookmark")};case"CONTEXT_NEW_FOLDER":return{...i,...Object(o.a)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...i,...Object(o.a)("New Separator")};case"CONTEXT_RENAME":return{...i,...Object(o.a)("Rename")};case"CONTEXT_CUT":return{...i,...Object(o.a)("verb","Cut")};case"CONTEXT_COPY":return{...i,...Object(o.a)("verb","Copy")};case"CONTEXT_PASTE":return{...i,...Object(o.a)("verb","Paste")};case"CONTEXT_DELETE":return{...i,...Object(o.a)("verb","Delete")};case"CONTEXT_EMPTY_TRASH":return{...i,...Object(o.a)("Empty Trash")};case"CONTEXT_EXPAND_ALL":return{...i,...Object(o.a)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...i,...Object(o.a)("Collapse All Folders")};case"CONTEXT_IMPORT":return i.ellipsis=!0,{...i,...Object(o.a)("Import Bookmarks")};case"CONTEXT_SETTINGS":return i.type="folder",{...i,...Object(o.a)("Settings")};case"CONTEXT_CONTAINER_SEARCH":return i.settingsLabel=Object(r.a)("[Search Settings]"),i.type="container",{...i,...Object(o.a)("command","Search")};default:return n.default.getMenuItem(e,a)}}};var d={actions:function(){return["CONTEXT_CONTAINER_CLOSED_TAB"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_CONTAINER_CLOSED_TAB":return i.settingsLabel=Object(r.a)("[All Closed Tabs]"),i.type="container",{...i,...Object(o.a)("Closed Tabs")};default:return n.default.getMenuItem(e,a)}}};var h={actions:function(){return["CONTEXT_COMPOSE_MAIL","CONTEXT_VIEW_ALL_MESSAGES","CONTEXT_NEW_ITEM","CONTEXT_EDIT","CONTEXT_DELETE","CONTEXT_CONTAINER_DEFAULT_ACTION"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_COMPOSE_MAIL":return{...i,...Object(o.a)("Compose Mail")};case"CONTEXT_VIEW_ALL_MESSAGES":return{...i,...Object(o.a)("View All Messages")};case"CONTEXT_NEW_ITEM":return{...i,...Object(o.a)("New Contact")};case"CONTEXT_EDIT":return{...i,...Object(o.a)("command","Edit")};case"CONTEXT_DELETE":return{...i,...Object(o.a)("verb","Delete")};case"CONTEXT_CONTAINER_DEFAULT_ACTION":return i.settingsLabel=Object(r.a)("[Default Action]"),i.type="container",{...i,...Object(o.a)("Default Action")};default:return n.default.getMenuItem(e,a)}}},p=a(159);var b={actions:function(){return["DOCUMENT_SUGGEST_PASSWORD","DOCUMENT_SHOW_PASSWORDS","DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","DOCUMENT_PASTE_AS_PLAIN_TEXT","DOCUMENT_SELECT_ALL","DOCUMENT_ADD_AS_SEARCH_ENGINE","COMMAND_COPY_SELECTION_TO_NOTE","DOCUMENT_GOTO_URL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_SEARCH","DOCUMENT_SEARCH_LAST_USED","DOCUMENT_CONTAINER_SEARCH_WITH","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CONTAINER_SPEECH"].concat(i.a.actions())},options:function(e,t){const a=void 0===t,l=t||p.a.settingsState,c={...s.a.commandItem};switch(e.action){case"DOCUMENT_SUGGEST_PASSWORD":return c.ellipsis=!0,{...c,...Object(o.a)("Suggest Password")};case"DOCUMENT_SHOW_PASSWORDS":return c.ellipsis=!0,{...c,...Object(o.a)("Show all Saved Passwords")};case"DOCUMENT_LOOK_UP":return{...c,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_EMOJI":return{...c,...Object(o.a)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...c,shortcuts:["ctrl+z"],...Object(o.a)("win_linux","Undo")};case"DOCUMENT_REDO":return{...c,shortcuts:["ctrl+y"],...Object(o.a)("win_linux","Redo")};case"DOCUMENT_CUT":return{...c,shortcuts:["ctrl+x"],...Object(o.a)("win_linux","Cut")};case"DOCUMENT_COPY":return{...c,shortcuts:["ctrl+c"],...Object(o.a)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...c,shortcuts:["ctrl+v"],...Object(o.a)("win_linux","Paste")};case"DOCUMENT_PASTE_AS_PLAIN_TEXT":return{...c,...Object(o.a)("Paste as Plain Text")};case"DOCUMENT_SELECT_ALL":return{...c,shortcuts:["ctrl+a"],...Object(o.a)("win_linux","Select All")};case"DOCUMENT_GOTO_URL":return{...c,...p.a.getLabelWithParameter(e,l.selectionurl,a)};case"DOCUMENT_ADD_AS_SEARCH_ENGINE":return c.ellipsis=!0,{...c,...Object(o.a)("Add as Search Engine")};case"COMMAND_COPY_SELECTION_TO_NOTE":return{...n.default.getMenuItem(e,a),...Object(o.a)("Copy to Note")};case"DOCUMENT_CONTAINER_NOTES":return c.settingsLabel=Object(r.a)("[All notes]"),c.type="container",{...c,...Object(o.a)("Insert Note")};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":return{...c,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_CONTAINER_SEARCH_WITH":return c.settingsLabel=Object(r.a)("[All search engines]"),c.type="container",{...c,...Object(o.a)("Search With")};case"DOCUMENT_CONTAINER_EXTENSIONS":return c.settingsLabel=Object(r.a)("[Extensions]"),c.type="container",{...c,...Object(o.a)("Extensions")};case"DOCUMENT_CONTAINER_SPELLCHECK":return c.settingsLabel=Object(r.a)("[Spell Check]"),c.type="container",{...c,...Object(o.a)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return c.settingsLabel=Object(r.a)("[Spell Check Options]"),c.type="container",{...c,...Object(o.a)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return c.settingsLabel=Object(r.a)("[Writing Direction Options]"),c.type="container",{...c,...Object(o.a)("Writing Direction")};case"DOCUMENT_CONTAINER_SPEECH":return c.settingsLabel=Object(r.a)("[Speech Commands]"),c.type="container",{...c,...Object(o.a)("Speech")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):n.default.getMenuItem(e,a)}}};var g={actions:function(){return["CONTEXT_OPEN_FILE","CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_FILEMANAGER","CONTEXT_COPY_ADDRESS","CONTEXT_COPY_PATH","CONTEXT_RESTART","CONTEXT_STOP","CONTEXT_RESUME","CONTEXT_REMOVE","CONTEXT_REMOVE_ALL_FINISHED"]},options:function(e,t){const a=void 0===t,i=t||{numAddresses:1,numFiles:1,numImages:1,hasActive:!1,hasPaused:!1,hasCompleted:!1},r={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_FILE":return{...r,...a||i.numFiles<2?Object(o.a)("the file","Open"):Object(o.a)("Open Files")};case"CONTEXT_OPEN_IN":return r.type="folder",{...r,...a||i.numFiles<2?Object(o.a)("Open Image in"):Object(o.a)("Open Images in")};case"CONTEXT_OPEN_IN_NEW_TAB":return{...r,...Object(o.a)("open in","New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...r,...Object(o.a)("Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...r,...Object(o.a)("Current Tab")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...r,...Object(o.a)("open in","New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...r,...Object(o.a)("open in","Private Window")};case"CONTEXT_FILEMANAGER":return{...r,...Object(o.a)("Show in File Manager")};case"CONTEXT_COPY_ADDRESS":return{...r,...a||i.numAddresses<2?Object(o.a)("Copy Download Address"):Object(o.a)("Copy Download Addresses")};case"CONTEXT_COPY_PATH":return{...r,...a||i.numFiles<2?Object(o.a)("Copy Local Path"):Object(o.a)("Copy Local Paths")};case"CONTEXT_RESTART":return{...r,...Object(o.a)("command","Restart")};case"CONTEXT_STOP":return{...r,...Object(o.a)("other","Stop")};case"CONTEXT_RESUME":return{...r,...Object(o.a)("Resume Download")};case"CONTEXT_REMOVE":return{...r,...Object(o.a)("verb","Remove")};case"CONTEXT_REMOVE_ALL_FINISHED":return{...r,...Object(o.a)("Remove All Finished")};default:return n.default.getMenuItem(e,a)}}};var N={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_FILTER_BY","CONTEXT_COPY","CONTEXT_SAVE","CONTEXT_DELETE","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL"]},options:function(e,t){const a=t||{address:""},i=void 0===t,l={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...l,...Object(o.a)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...l,...Object(o.a)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...l,...Object(o.a)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...l,...Object(o.a)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...l,...Object(o.a)("Open in Private Window")};case"CONTEXT_FILTER_BY":return l.settingsLabel=Object(r.a)("Filter by Address"),{...l,...i?Object(o.a)("Filter by Address"):Object(o.a)("Filter by “$1”",[a.address])};case"CONTEXT_COPY":return{...l,...Object(o.a)("Copy Address")};case"CONTEXT_SAVE":return{...l,...Object(o.a)("Save as Bookmarks")};case"CONTEXT_DELETE":return{...l,...Object(o.a)("verb","Delete")};case"CONTEXT_EXPAND_ALL":return{...l,...Object(o.a)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...l,...Object(o.a)("Collapse All Folders")};default:return n.default.getMenuItem(e,i)}}};var f={actions:function(){return["DOCUMENT_OPEN_IMAGE_IN_NEW_TAB","DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB","DOCUMENT_OPEN_IMAGE_IN_TAB","DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW","DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW","DOCUMENT_SAVE_IMAGE","DOCUMENT_COPY_IMAGE","DOCUMENT_COPY_IMAGE_ADDRESS","DOCUMENT_SHOW_IMAGE_PROPERTIES","DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND","DOCUMENT_RELOAD_IMAGE","DOCUMENT_SEARCH_FOR IMAGE","DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE","DOCUMENT_CONTAINER_EXTENSIONS"].concat(i.a.actions())},options:function(e,t){const a=void 0===t,l={...s.a.commandItem};switch(e.action){case"DOCUMENT_OPEN_IMAGE_IN_NEW_TAB":return{...l,...Object(o.a)("Open Image in New Tab")};case"DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB":return{...l,...Object(o.a)("Open Image in Background Tab")};case"DOCUMENT_OPEN_IMAGE_IN_TAB":return{...l,...Object(o.a)("Open Image")};case"DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW":return{...l,...Object(o.a)("Open Image in New Window")};case"DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW":return{...l,...Object(o.a)("Open Image in Private Window")};case"DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE":return l.settingsLabel=Object(r.a)("[Open Image in Another Profile]"),l.type="container",{...l,...Object(o.a)("Open Image in Another Profile")};case"DOCUMENT_SAVE_IMAGE":return l.ellipsis=!0,{...l,...Object(o.a)("Save Image As")};case"DOCUMENT_COPY_IMAGE":return{...l,...Object(o.a)("Copy Image")};case"DOCUMENT_COPY_IMAGE_ADDRESS":return{...l,...Object(o.a)("Copy Image Address")};case"DOCUMENT_SHOW_IMAGE_PROPERTIES":return l.ellipsis=!0,{...l,...Object(o.a)("Image Properties")};case"DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND":return{...l,...Object(o.a)("Use Image as Start Page Background")};case"DOCUMENT_RELOAD_IMAGE":return{...l,...Object(o.a)("Reload Image")};case"DOCUMENT_QR_CODE":return{...l,...Object(o.a)("command","Create QR Code for This Image")};case"DOCUMENT_SEARCH_FOR IMAGE":return{...l,...Object(o.a)("Search for Image")};case"DOCUMENT_CONTAINER_EXTENSIONS":return l.settingsLabel=Object(r.a)("[Extensions]"),l.type="container",{...l,...Object(o.a)("Extensions")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):n.default.getMenuItem(e,a)}}};var _={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_COPY","COMMAND_COPY_SELECTION_TO_NOTE","DOCUMENT_PRINT","DOCUMENT_GOTO_URL","DOCUMENT_SEARCH","DOCUMENT_SEARCH_LAST_USED","DOCUMENT_CONTAINER_SEARCH_WITH","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_SEND_BY_MAIL","DOCUMENT_ADD_TO_CALENDAR","DOCUMENT_CONTAINER_SPEECH"].concat(i.a.actions())},options:function(e,t){const a=void 0===t,l=t||p.a.settingsState,c={...s.a.commandItem};switch(e.action){case"DOCUMENT_LOOK_UP":return{...c,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_COPY":return{...c,...Object(o.a)("command","Copy")};case"COMMAND_COPY_SELECTION_TO_NOTE":return{...n.default.getMenuItem(e,a),...Object(o.a)("Copy to Note")};case"DOCUMENT_PRINT":return c.ellipsis=!0,{...c,...Object(o.a)("command","Print")};case"DOCUMENT_GOTO_URL":return{...c,...p.a.getLabelWithParameter(e,l.selectionurl,a)};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":return{...c,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_CONTAINER_SEARCH_WITH":return c.settingsLabel=Object(r.a)("[All search engines]"),c.type="container",{...c,...Object(o.a)("Search With")};case"DOCUMENT_CONTAINER_EXTENSIONS":return c.settingsLabel=Object(r.a)("[Extensions]"),c.type="container",{...c,...Object(o.a)("Extensions")};case"DOCUMENT_SEND_BY_MAIL":return{...c,...Object(o.a)("Send by Mail")};case"DOCUMENT_ADD_TO_CALENDAR":return{...c,...Object(o.a)("Add as Calendar Event")};case"DOCUMENT_CONTAINER_SPEECH":return c.settingsLabel=Object(r.a)("[Speech Commands]"),c.type="container",{...c,...Object(o.a)("Speech")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):n.default.getMenuItem(e,a)}}};var v={actions:function(){const e=["DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_DEVELOPER_TOOLS"].concat(i.a.actions());return["DOCUMENT_OPEN_IN_NEW_TAB","DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB","DOCUMENT_OPEN_IN_TAB","DOCUMENT_OPEN_IN_NEW_WINDOW","DOCUMENT_OPEN_IN_PRIVATE_WINDOW","DOCUMENT_ADD_LINK_TO_BOOKMARKS","DOCUMENT_ADD_LINK_TO_WEBPANEL","DOCUMENT_SEND_LINK_BY_MAIL","DOCUMENT_COPY_LINK_ADDRESS","DOCUMENT_COPY_LINK_TEXT","DOCUMENT_CONTAINER_OPEN_IN_PWA","DOCUMENT_CONTAINER_OPEN_IN_PROFILE","DOCUMENT_CONTAINER_SEND_TO_DEVICES","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_CONTAINER_LINK_SELECTION","DOCUMENT_CONTAINER_LINKED_IMAGE"].concat(_.actions().filter(t=>!e.includes(t))).concat(f.actions().filter(t=>!e.includes(t))).concat(l.actions().filter(t=>!e.includes(t))).concat(i.a.actions())},options:function(e,t){const a=void 0===t,c=t||p.a.settingsState,u={...s.a.commandItem};switch(e.action){case"DOCUMENT_OPEN_IN_NEW_TAB":return{...u,...Object(o.a)("Open Link in New Tab")};case"DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB":return{...u,...Object(o.a)("Open Link in Background Tab")};case"DOCUMENT_OPEN_IN_TAB":return{...u,...Object(o.a)("Open Link")};case"DOCUMENT_OPEN_IN_NEW_WINDOW":return{...u,...Object(o.a)("Open Link in New Window")};case"DOCUMENT_OPEN_IN_PRIVATE_WINDOW":return{...u,...Object(o.a)("Open Link in Private Window")};case"DOCUMENT_CONTAINER_OPEN_IN_PWA":return u.settingsLabel=Object(r.a)("[Open Link in Progressive Web Apps]"),u.type="container",{...u,...Object(o.a)("Open Link in Progressive Web Apps")};case"DOCUMENT_CONTAINER_OPEN_IN_PROFILE":return u.settingsLabel=Object(r.a)("[Open Link in Another Profile]"),u.type="container",{...u,...Object(o.a)("Open Link in Another Profile")};case"DOCUMENT_ADD_LINK_TO_BOOKMARKS":return{...u,...Object(o.a)("Bookmark Link")};case"DOCUMENT_ADD_LINK_TO_WEBPANEL":return{...u,...Object(o.a)("Add Link to Web Panel")};case"DOCUMENT_SEND_LINK_BY_MAIL":return{...u,...Object(o.a)("Send Link by Mail")};case"DOCUMENT_SAVE_LINK":return u.ellipsis=!0,{...u,...Object(o.a)("Save Link As")};case"DOCUMENT_COPY_LINK_ADDRESS":return{...u,...!a&&c.ismailto?Object(o.a)("Copy Email Address"):Object(o.a)("Copy Link Address")};case"DOCUMENT_COPY_LINK_TEXT":return{...u,...Object(o.a)("Copy Link Text")};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return u.settingsLabel=Object(r.a)("[Send Link to Your Devices]"),u.type="container",{...u,...Object(o.a)("Send Link to Your Devices")};case"DOCUMENT_CONTAINER_EXTENSIONS":return u.settingsLabel=Object(r.a)("[Extensions]"),u.type="container",{...u,...Object(o.a)("Extensions")};case"DOCUMENT_CONTAINER_LINK_SELECTION":return u.settingsLabel=Object(r.a)("[Selection menu]"),u.type="container",{...u,...Object(o.a)("Text Selection")};case"DOCUMENT_CONTAINER_LINKED_IMAGE":return u.settingsLabel=Object(r.a)("[Image menu]"),u.type="container",{...u,...Object(o.a)("Image")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):_.actions().includes(e.action)?_.options(e,t):f.actions().includes(e.action)?f.options(e,t):l.actions().includes(e.action)?l.options(e,t):n.default.getMenuItem(e,a)}}};var E={actions:function(){return["COMMAND_MAIL_REPLY","COMMAND_MAIL_REPLY_ALL","COMMAND_MAIL_FORWARD","COMMAND_MAIL_MARK_READ","COMMAND_MAIL_MARK_UNREAD","COMMAND_MAIL_GOTO_NEXT_UNREAD","COMMAND_MAIL_GOTO_PREVIOUS_UNREAD","COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD","CONTEXT_CONTAINER_MOVE","CONTEXT_ADD_FLAG","CONTEXT_REMOVE_FLAG","CONTEXT_CONTAINER_FLAGS","CONTEXT_CONTAINER_LABELS","CONTEXT_EDIT","CONTEXT_SEND","CONTEXT_CONTAINER_TRASH","COMMAND_MAIL_ENABLE_THREADED_VIEW","COMMAND_MAIL_MARK_THREAD_READ","COMMAND_MAIL_MARK_THREAD_UNREAD","COMMAND_MAIL_ENABLE_SENDER_VIEW","CONTEXT_SENDER_IS_MAILING_LIST","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","COMMAND_MAIL_COMPOSE_NEW_MESSAGE"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_GOTO":return i.type="folder",{...i,...Object(o.a)("Go to")};case"CONTEXT_CONTAINER_MOVE":return i.settingsLabel=Object(r.a)("[Move to Folders]"),i.type="container",{...i,...Object(o.a)("Move")};case"CONTEXT_ADD_FLAG":return{...i,...Object(o.a)("Add Flag")};case"CONTEXT_REMOVE_FLAG":return{...i,...Object(o.a)("Remove Flag")};case"CONTEXT_CONTAINER_FLAGS":return i.settingsLabel=Object(r.a)("[All Flags]"),i.type="container",{...i,...Object(o.a)("Flags")};case"CONTEXT_CONTAINER_LABELS":return i.settingsLabel=Object(r.a)("[All Labels]"),i.type="container",{...i,...Object(o.a)("Labels")};case"CONTEXT_EDIT":return{...i,...Object(o.a)("mail","Edit")};case"CONTEXT_MARK_AS_SPAM":return{...i,...Object(o.a)("mail","Mark Message as Spam")};case"CONTEXT_NOT_SPAM":return{...i,...Object(o.a)("mail","Not Spam")};case"CONTEXT_SEND":return{...i,...Object(o.a)("Send")};case"CONTEXT_CONTAINER_TRASH":return i.settingsLabel=Object(r.a)("[Trash elements]"),i.type="container",{...i,...Object(o.a)("Trash")};case"CONTEXT_THREAD":return i.type="folder",{...i,...Object(o.a)("Thread")};case"CONTEXT_SENDER":return i.type="folder",{...i,...Object(o.a)("Sender")};case"CONTEXT_SENDER_IS_MAILING_LIST":return i.type="checkbox",{...i,...Object(o.a)("Treat Sender as a Mailing List")};case"CONTEXT_EXPAND_ALL":return{...i,...Object(o.a)("Expand All Threads")};case"CONTEXT_COLLAPSE_ALL":return{...i,...Object(o.a)("Collapse All Threads")};default:return n.default.getMenuItem(e,a)}}};var C={actions:function(){return["CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR","CONTEXT_CONTAINER_BACKWARD_HISTORY","CONTEXT_CONTAINER_FORWARD_HISTORY"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR":return i.settingsLabel=Object(r.a)("[Customize]"),i.type="container",{...i,...Object(o.a)("Customize")};case"CONTEXT_CONTAINER_BACKWARD_HISTORY":return i.settingsLabel=Object(r.a)("[Backward History]"),i.type="container",{...i,...Object(o.a)("Backward History")};case"CONTEXT_CONTAINER_FORWARD_HISTORY":return i.settingsLabel=Object(r.a)("[Forward History]"),i.type="container",{...i,...Object(o.a)("Forward History")};default:return n.default.getMenuItem(e,a)}}};var w={actions:function(){return["CONTEXT_OPEN_ADDRESS","CONTEXT_NEW_FROM_SELECTION","CONTEXT_NEW_ITEM","CONTEXT_NEW_FOLDER","CONTEXT_NEW_SEPARATOR","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","CONTEXT_EMPTY_TRASH","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL","CONTEXT_SETTINGS","CONTEXT_CONTAINER_SEARCH"]},options:function(e,t){const a=t||{inManager:!1},i=void 0===t,l={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...l,...Object(o.a)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...l,...Object(o.a)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...l,...Object(o.a)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...l,...Object(o.a)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...l,...Object(o.a)("Open in Private Window")};case"CONTEXT_SET_SPEEDDIAL":return{...l,...Object(o.a)("Use as Speed Dial")};case"CONTEXT_UNSET_SPEEDDIAL":return{...l,...Object(o.a)("Remove from Speed Dial")};case"CONTEXT_SET_BOOKMARK_BAR":return{...l,...Object(o.a)("Set as Bookmark Bar Folder")};case"CONTEXT_UNSET_BOOKMARK_BAR":return{...l,...Object(o.a)("Remove as Bookmark Bar Folder")};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{...l,...Object(o.a)("Move to Bookmark Bar Folder")};case"CONTEXT_BOOKMARK":return{...l,...Object(o.a)("Bookmark Active Page")};case"CONTEXT_BOOKMARK_ALL":return{...l,...Object(o.a)("Bookmark All Open Pages")};case"CONTEXT_OPEN_ADDRESS":return{...l,...Object(o.a)("Open Note Address")};case"CONTEXT_NEW_FROM_SELECTION":return{...l,...Object(o.a)("Copy Selection to New Note")};case"CONTEXT_NEW_ITEM":return{...l,...Object(o.a)("New Note")};case"CONTEXT_NEW_FOLDER":return{...l,...Object(o.a)("command","New Folder")};case"CONTEXT_NEW_SEPARATOR":return{...l,...Object(o.a)("New Separator")};case"CONTEXT_EDIT":return i?{...l,...Object(o.a)("command","Edit")}:{...l,...a.inManager?Object(o.a)("Edit in New Tab"):Object(o.a)("Edit in Notes Manager")};case"CONTEXT_RENAME":return{...l,...Object(o.a)("Rename")};case"CONTEXT_CUT":return{...l,...Object(o.a)("verb","Cut")};case"CONTEXT_COPY":return{...l,...Object(o.a)("verb","Copy")};case"CONTEXT_PASTE":return{...l,...Object(o.a)("verb","Paste")};case"CONTEXT_DELETE":return{...l,...Object(o.a)("verb","Delete")};case"CONTEXT_EMPTY_TRASH":return{...l,...Object(o.a)("Empty Trash")};case"CONTEXT_EXPAND_ALL":return{...l,...Object(o.a)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...l,...Object(o.a)("Collapse All Folders")};case"CONTEXT_SETTINGS":return l.type="folder",{...l,...Object(o.a)("Settings")};case"CONTEXT_CONTAINER_SEARCH":return l.settingsLabel=Object(r.a)("[Search Settings]"),l.type="container",{...l,...Object(o.a)("command","Search")};default:return n.default.getMenuItem(e,i)}}};var O={actions:function(){return["DOCUMENT_BACK","DOCUMENT_FORWARD","DOCUMENT_RELOAD","COMMAND_ADD_BOOKMARK","DOCUMENT_ADD_TO_WEBPANEL","DOCUMENT_SEND_BY_MAIL","DOCUMENT_SAVE","DOCUMENT_PRINT","DOCUMENT_CAST","DOCUMENT_COPY_ADDRESS","DOCUMENT_CONTAINER_SEND_TO_DEVICES","DOCUMENT_CONTAINER_EXTENSIONS","DOCUMENT_QR_CODE","DOCUMENT_CONTAINER_PLUGIN_ROTATION"].concat(i.a.actions())},options:function(e,t){const a=void 0===t,l=t||p.a.settingsState,c={...s.a.commandItem};switch(e.action){case"DOCUMENT_BACK":{const e=l.iswebpanel?[]:p.a.getShortcuts("COMMAND_PAGE_BACK");return{...c,shortcuts:e,...Object(o.a)("navigation","Back")}}case"DOCUMENT_FORWARD":{const e=l.iswebpanel?[]:p.a.getShortcuts("COMMAND_PAGE_FORWARD");return{...c,shortcuts:e,...Object(o.a)("navigation","Forward")}}case"DOCUMENT_RELOAD":{const e=l.iswebpanel?[]:p.a.getShortcuts("COMMAND_PAGE_REFRESH");return{...c,shortcuts:e,...Object(o.a)("navigation","Reload")}}case"COMMAND_ADD_BOOKMARK":return{...n.default.getMenuItem(e,a),...c,...Object(o.a)("Bookmark Page")};case"DOCUMENT_ADD_TO_WEBPANEL":return{...c,...Object(o.a)("Add Page to Web Panel")};case"DOCUMENT_SEND_BY_MAIL":return{...c,...Object(o.a)("Send by Mail")};case"DOCUMENT_SAVE":{const e=l.iswebpanel?[]:p.a.getShortcuts("COMMAND_SAVE_PAGE");return c.ellipsis=!0,{...c,shortcuts:e,...Object(o.a)("Save As")}}case"DOCUMENT_PRINT":{const e=l.iswebpanel?[]:p.a.getShortcuts("COMMAND_PRINT_PAGE");return c.ellipsis=!0,{...c,shortcuts:e,...Object(o.a)("command","Print")}}case"DOCUMENT_CAST":return c.ellipsis=!0,{...c,...Object(o.a)("Cast")};case"DOCUMENT_COPY_ADDRESS":return{...c,...l.iswebpanel?Object(o.a)("Copy Panel Address"):Object(o.a)("Copy Page Address")};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return c.settingsLabel=Object(r.a)("[Send to Your Devices]"),c.type="container",{...c,...Object(o.a)("Send to Your Devices")};case"DOCUMENT_QR_CODE":return{...c,...Object(o.a)("command","Create QR Code for This Page")};case"DOCUMENT_CONTAINER_EXTENSIONS":return c.settingsLabel=Object(r.a)("[Extensions]"),c.type="container",{...c,...Object(o.a)("Extensions")};case"DOCUMENT_CONTAINER_PLUGIN_ROTATION":return c.settingsLabel=Object(r.a)("[Plugin Rotation Commands]"),c.type="container",{...c,...Object(o.a)("Plugin Rotation")};default:return i.a.actions().includes(e.action)?i.a.options(e,t):n.default.getMenuItem(e,a)}}};var y={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_COPY_ADDRESS","CONTEXT_DESKTOP_VERSION","CONTEXT_MOBILE_VERSION","CONTEXT_SEPARATE_WIDTH","CONTEXT_CONTAINER_TOOLBAR","CONTEXT_REMOVE_WEB_PANEL","CONTEXT_CONTAINER_REG_PANELS","CONTEXT_CONTAINER_WEB_PANELS","CONTEXT_CONTAINER_REMOVED_PANELS","CONTEXT_CONTAINER_PERIODIC_TIMER"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_CONTAINER_PERIODIC_TIMER":return i.settingsLabel=Object(r.a)("[Periodic Reload]"),i.type="container",{...i,...Object(o.a)("Periodic Reload")};case"CONTEXT_MENU_OPEN":return i.type="folder",{...i,...Object(o.a)("Open in")};case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...Object(o.a)("open in","New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...Object(o.a)("Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...Object(o.a)("Current Tab")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...Object(o.a)("open in","New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...Object(o.a)("open in","Private Window")};case"CONTEXT_COPY_ADDRESS":return{...i,...Object(o.a)("Copy Panel Address")};case"CONTEXT_DESKTOP_VERSION":return{...i,...Object(o.a)("Show Desktop Version")};case"CONTEXT_MOBILE_VERSION":return{...i,...Object(o.a)("Show Mobile Version")};case"CONTEXT_SEPARATE_WIDTH":return i.type="checkbox",{...i,...Object(o.a)("Separate Width")};case"CONTEXT_CONTAINER_TOOLBAR":return i.settingsLabel=Object(r.a)("[Toolbar]"),i.type="container",{...i,...Object(o.a)("Toolbar")};case"CONTEXT_REMOVE_WEB_PANEL":return{...i,...Object(o.a)("Remove Web Panel")};case"CONTEXT_MENU_PANEL":return i.type="folder",{...i,...Object(o.a)("Panels")};case"CONTEXT_CONTAINER_REG_PANELS":return i.settingsLabel=Object(r.a)("[All Regular Panels]"),i.type="container",{...i,...Object(o.a)("Regular Panels")};case"CONTEXT_CONTAINER_WEB_PANELS":return i.settingsLabel=Object(r.a)("[All Web Panels]"),i.type="container",{...i,...Object(o.a)("Web Panels")};case"CONTEXT_CONTAINER_REMOVED_PANELS":return i.settingsLabel=Object(r.a)("[All Removed Panels]"),i.type="container",{...i,...Object(o.a)("Removed Panels")};default:return n.default.getMenuItem(e,a)}}};var S={actions:function(){return["CONTEXT_CONTAINER_REG_PANELS","CONTEXT_CONTAINER_WEB_PANELS","CONTEXT_CONTAINER_REMOVED_PANELS"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_CONTAINER_REG_PANELS":return i.settingsLabel=Object(r.a)("[All Regular Panels]"),i.type="container",{...i,...Object(o.a)("Regular Panels")};case"CONTEXT_CONTAINER_WEB_PANELS":return i.settingsLabel=Object(r.a)("[All Web Panels]"),i.type="container",{...i,...Object(o.a)("Web Panels")};case"CONTEXT_CONTAINER_REMOVED_PANELS":return i.settingsLabel=Object(r.a)("[All Removed Panels]"),i.type="container",{...i,...Object(o.a)("Removed Panels")};default:return n.default.getMenuItem(e,a)}}};var T={actions:function(){return["CONTEXT_OPEN_IN_NEW_TAB","CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB","CONTEXT_OPEN_IN_TAB","CONTEXT_OPEN_IN_NEW_WINDOW","CONTEXT_OPEN_IN_PRIVATE_WINDOW","CONTEXT_OPEN_ALL","CONTEXT_SET_THUMBNAIL","CONTEXT_CLEAR_THUMBNAIL","CONTEXT_RELOAD","CONTEXT_EDIT","CONTEXT_RENAME","CONTEXT_CUT","CONTEXT_COPY","CONTEXT_PASTE","CONTEXT_DELETE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{...i,...Object(o.a)("Open in New Tab")};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{...i,...Object(o.a)("Open in Background Tab")};case"CONTEXT_OPEN_IN_TAB":return{...i,...Object(o.a)("Open")};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{...i,...Object(o.a)("Open in New Window")};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{...i,...Object(o.a)("Open in Private Window")};case"CONTEXT_OPEN_ALL":return{...i,...Object(o.a)("Open All Bookmarks")};case"CONTEXT_SET_THUMBNAIL":return i.ellipsis=!0,{...i,...Object(o.a)("Select Custom Thumbnail")};case"CONTEXT_CLEAR_THUMBNAIL":return{...i,...Object(o.a)("Clear Custom Thumbnail")};case"CONTEXT_RELOAD":return{...i,...Object(o.a)("Reload")};case"CONTEXT_EDIT":return{...i,...Object(o.a)("command","Edit")};case"CONTEXT_RENAME":return{...i,...Object(o.a)("Rename")};case"CONTEXT_CUT":return{...i,...Object(o.a)("win_linux","Cut")};case"CONTEXT_COPY":return{...i,...Object(o.a)("win_linux","Copy")};case"CONTEXT_PASTE":return{...i,...Object(o.a)("win_linux","Paste")};case"CONTEXT_DELETE":return{...i,...Object(o.a)("other","Delete")};default:return n.default.getMenuItem(e,a)}}};var k={actions:function(){return["CONTEXT_RENAME","CONTEXT_REMOVE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_RENAME":return{...i,...Object(o.a)("Rename")};case"CONTEXT_REMOVE":return{...i,...Object(o.a)("Remove from Speed Dial")};default:return n.default.getMenuItem(e,a)}}};var A={actions:function(){return["CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL","CONTEXT_ADD_FOLDER_TO_SPEEDDIAL","CONTEXT_PASTE","CONTEXT_CUSTOMIZE","COMMAND_TOGGLE_STARTPAGE_NAVIGATION"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL":return{...i,...Object(o.a)("command","Add Bookmark to Speed Dial")};case"CONTEXT_ADD_FOLDER_TO_SPEEDDIAL":return{...i,...Object(o.a)("command","Add Speed Dial Folder")};case"CONTEXT_PASTE":return{...i,...Object(o.a)("win_linux","Paste")};case"CONTEXT_CUSTOMIZE":return i.ellipsis=!0,{...i,...Object(o.a)("other","Customize")};default:return n.default.getMenuItem(e,a)}}};var I={actions:function(){return["CONTEXT_NEW","CONTEXT_TOGGLE_SUBSTRIP_LOCK","CONTEXT_BOOKMARK_ALL","CONTEXT_SAVE_SESSION","CONTEXT_REOPEN"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_LOCK_SUBSTRIP":case"CONTEXT_UNLOCK_SUBSTRIP":return{...i,visible:!1};case"CONTEXT_NEW":return{...i,...Object(o.a)("command","New Tab")};case"CONTEXT_TOGGLE_SUBSTRIP_LOCK":return{...i,...Object(o.a)("Lock Second Tab Row")};case"CONTEXT_BOOKMARK_ALL":return{...i,...Object(o.a)("Bookmark All Tabs")};case"CONTEXT_SAVE_SESSION":return{...i,...Object(o.a)("Save All Tabs as Session")};case"CONTEXT_REOPEN":return{...i,...Object(o.a)("Reopen Closed Tab")};default:return n.default.getMenuItem(e,a)}}};var D={actions:function(){return["CONTEXT_CLOSE","CONTEXT_TABSTACK_REMOVE_FROM"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem};switch(e.action){case"CONTEXT_CLOSE":return{...i,...Object(o.a)("Close Tab")};case"CONTEXT_TABSTACK_REMOVE_FROM":return{...i,...Object(o.a)("Remove from Tab Stack")};default:return n.default.getMenuItem(e,a)}}};var M={actions:function(){return["CONTEXT_NEW","CONTEXT_RELOAD","CONTEXT_CLONE","CONTEXT_PIN","CONTEXT_UNPIN","CONTEXT_MUTE","CONTEXT_MUTE_OTHER","CONTEXT_OPTIMIZE_FS_VIDEOS","CONTEXT_BOOKMARK","CONTEXT_BOOKMARK_STACK","CONTEXT_BOOKMARK_ALL","CONTEXT_SAVE_SESSION","CONTEXT_TABSTACK_BY_SELECTION","CONTEXT_TABSTACK_BY_HOST","CONTEXT_TABSTACK_RENAME","CONTEXT_TABSTACK_REMOVE_FROM","CONTEXT_TABSTACK_UNGROUP","CONTEXT_TILE_TABSTACK","CONTEXT_UNTILE_TABSTACK","CONTEXT_TILE_TABS","CONTEXT_UNTILE_SELECTION","CONTEXT_HIBERNATE_TAB","CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS","CONTEXT_HIBERNATE_TABSTACK","CONTEXT_HIBERNATE_BACKGROUND","CONTEXT_CLOSE","CONTEXT_CLOSE_TABSTACK","CONTEXT_CLOSE_OTHER","CONTEXT_CLOSE_LEFT","CONTEXT_CLOSE_RIGHT","CONTEXT_REOPEN","CONTEXT_CUSTOMIZE","CONTEXT_CONTAINER_PWA","CONTEXT_CONTAINER_MOVE_TO_WINDOW","CONTEXT_MOVE","CONTEXT_TABSTACK_MOVE","CONTEXT_MOVE_LEFT","CONTEXT_MOVE_RIGHT","CONTEXT_CONTAINER_PERIODIC_TIMER","CONTEXT_TABSTACK_BY_HOSTS","CONTEXT_MOVE_STACK_LEFT","CONTEXT_MOVE_STACK_RIGHT"]},options:function(e,t){const a=t||{isMultiSelect:!1,count:-1,closableCount:-1,unSelectedCount:0,unpinned:0,pinned:0,playing:0,hostname:"",hostnameCount:-1,canHibernateCount:-1,horizontal:!0,someIncognito:!1,canCloneCount:-1},i=void 0===t,l={...s.a.commandItem};switch(e.action){case"CONTEXT_NEW":return{...l,...Object(o.a)("command","New Tab")};case"CONTEXT_RELOAD":return{...l,...a.isMultiSelect?Object(o.a)("Reload $1 Tab","Reload $1 Tabs",[a.count]):Object(o.a)("Reload Tab")};case"CONTEXT_CLONE":return{...l,...a.isMultiSelect?Object(o.a)("Clone $1 Tab","Clone $1 Tabs",[a.canCloneCount]):Object(o.a)("Clone Tab")};case"CONTEXT_PIN":return{...l,...a.isMultiSelect?Object(o.a)("Pin $1 Tab","Pin $1 Tabs",[a.unpinned]):Object(o.a)("Pin Tab")};case"CONTEXT_UNPIN":return{...l,...a.isMultiSelect?Object(o.a)("Unpin $1 Tab","Unpin $1 Tabs",[a.pinned]):Object(o.a)("Unpin Tab")};case"CONTEXT_CONTAINER_PERIODIC_TIMER":return l.settingsLabel=Object(r.a)("[Periodic Reload]"),l.type="container",{...l,...Object(o.a)("Periodic Reload")};case"CONTEXT_MUTE":return l.type="checkbox",{...l,...a.isMultiSelect?Object(o.a)("Mute $1 Tab","Mute $1 Tabs",[a.playing]):Object(o.a)("Mute Tab")};case"CONTEXT_MUTE_OTHER":return{...l,...Object(o.a)("Mute Other Tabs")};case"CONTEXT_OPTIMIZE_FS_VIDEOS":return{...l,...Object(o.a)("Optimize fullscreen videos")};case"CONTEXT_BOOKMARK":return{...l,...a.isMultiSelect?Object(o.a)("Bookmark $1 Tab","Bookmark $1 Tabs",[a.count]):Object(o.a)("Bookmark Tab")};case"CONTEXT_BOOKMARK_STACK":return{...l,...Object(o.a)("Bookmark Tab Stack")};case"CONTEXT_BOOKMARK_ALL":return{...l,...Object(o.a)("Bookmark All Tabs")};case"CONTEXT_SAVE_SESSION":return{...l,...a.count>0?Object(o.a)("Save $1 Selected Tab as Session","Save $1 Selected Tabs as Session",[a.count]):Object(o.a)("Save All Tabs as Session")};case"CONTEXT_TABSTACK_BY_SELECTION":return{...l,...i?Object(o.a)("Stack Selected Tabs"):Object(o.a)("Stack $1 Selected Tab","Stack $1 Selected Tabs",[a.unpinned])};case"CONTEXT_TABSTACK_BY_HOST":return{...l,...i?Object(o.a)("Stack Tabs by Host"):Object(o.a)("Stack Tabs by Host ($1 of $2)",[a.hostnameCount,a.hostname])};case"CONTEXT_TABSTACK_BY_HOSTS":return{...l,...Object(o.a)("Stack Tabs by Hosts")};case"CONTEXT_TABSTACK_RENAME":return{...l,...Object(o.a)("Rename Tab Stack")};case"CONTEXT_TABSTACK_REMOVE_FROM":return{...l,...Object(o.a)("Remove from Tab Stack")};case"CONTEXT_TABSTACK_UNGROUP":return{...l,...Object(o.a)("Unstack Tabs")};case"CONTEXT_TILE_TABSTACK":return{...l,...Object(o.a)("Tile Tab Stack")};case"CONTEXT_UNTILE_TABSTACK":return{...l,...Object(o.a)("Untile Tab Stack")};case"CONTEXT_TILE_TABS":return{...l,...i?Object(o.a)("Tile Tabs"):Object(o.a)("Tile $1 Tab","Tile $1 Tabs",[a.count])};case"CONTEXT_UNTILE_SELECTION":return{...l,...Object(o.a)("Untile Selection")};case"CONTEXT_HIBERNATE_TAB":return{...l,...Object(o.a)("Hibernate Tab")};case"CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS":return{...l,...i?Object(o.a)("Hibernate Selected Background Tabs"):Object(o.a)("Hibernate $1 Background Tab","Hibernate $1 Background Tabs",[a.canHibernateCount])};case"CONTEXT_HIBERNATE_TABSTACK":return{...l,...Object(o.a)("Hibernate Tab Stack")};case"CONTEXT_HIBERNATE_BACKGROUND":return{...l,...Object(o.a)("Hibernate Background Tabs")};case"CONTEXT_CLOSE":return{...l,...a.isMultiSelect?Object(o.a)("Close $1 Tab","Close $1 Tabs",[a.closableCount]):Object(o.a)("Close Tab")};case"CONTEXT_CLOSE_TABSTACK":return{...l,...Object(o.a)("Close Tab Stack")};case"CONTEXT_CLOSE_OTHER":return{...l,...a.isMultiSelect&&a.unSelectedCount>0?Object(o.a)("Close Other ($1 Unselected Tab)","Close Other ($1 Unselected Tabs)",[a.unSelectedCount]):Object(o.a)("Close Other Tabs")};case"CONTEXT_CLOSE_LEFT":return{...l,...a.horizontal?Object(o.a)("Close Tabs to the Left"):Object(o.a)("Close the Tabs Above")};case"CONTEXT_CLOSE_RIGHT":return{...l,...a.horizontal?Object(o.a)("Close Tabs to the Right"):Object(o.a)("Close the Tabs Below")};case"CONTEXT_REOPEN":return{...l,...Object(o.a)("Reopen Closed Tab")};case"CONTEXT_CUSTOMIZE":return l.ellipsis=!0,{...l,...Object(o.a)("panel","Customize")};case"CONTEXT_CONTAINER_PWA":return l.settingsLabel=Object(r.a)("[All Progressive Web Apps]"),l.type="container",{...l,...Object(o.a)("Progressive Web Apps")};case"CONTEXT_CONTAINER_MOVE_TO_WINDOW":return l.settingsLabel=Object(r.a)("[All Window Destinations]"),l.type="container",{...l,...Object(o.a)("Window Destinations")};case"CONTEXT_MOVE":return l.type="folder",{...l,...a.isMultiSelect&&!a.someIncognito?Object(o.a)("Move $1 Tab","Move $1 Tabs",[a.count]):Object(o.a)("Move Tab")};case"CONTEXT_TABSTACK_MOVE":return l.type="folder",{...l,...Object(o.a)("Move Tab Stack")};case"CONTEXT_MOVE_LEFT":case"CONTEXT_MOVE_STACK_LEFT":return{...l,...a.horizontal?Object(o.a)("navigation","Left"):Object(o.a)("Up")};case"CONTEXT_MOVE_RIGHT":case"CONTEXT_MOVE_STACK_RIGHT":return{...l,...a.horizontal?Object(o.a)("navigation","Right"):Object(o.a)("Down")};default:return n.default.getMenuItem(e,i)}}};var P={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","DOCUMENT_SELECT_ALL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CONTAINER_SPEECH"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem},l=t||p.a.settingsState;switch(e.action){case"DOCUMENT_LOOK_UP":return{...i,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_EMOJI":return{...i,...Object(o.a)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...i,shortcuts:["ctrl+z"],...Object(o.a)("win_linux","Undo")};case"DOCUMENT_REDO":return{...i,shortcuts:["ctrl+y"],...Object(o.a)("win_linux","Redo")};case"DOCUMENT_CUT":return{...i,shortcuts:["ctrl+x"],...Object(o.a)("win_linux","Cut")};case"DOCUMENT_COPY":return{...i,shortcuts:["ctrl+c"],...Object(o.a)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...i,shortcuts:["ctrl+v"],...Object(o.a)("win_linux","Paste")};case"DOCUMENT_SELECT_ALL":return{...i,shortcuts:["ctrl+a"],...Object(o.a)("win_linux","Select All")};case"DOCUMENT_CONTAINER_NOTES":return i.settingsLabel=Object(r.a)("[All notes]"),i.type="container",{...i,...Object(o.a)("Insert Note")};case"DOCUMENT_CONTAINER_SPELLCHECK":return i.settingsLabel=Object(r.a)("[Spell Check]"),i.type="container",{...i,...Object(o.a)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return i.settingsLabel=Object(r.a)("[Spell Check Options]"),i.type="container",{...i,...Object(o.a)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return i.settingsLabel=Object(r.a)("[Writing Direction Options]"),i.type="container",{...i,...Object(o.a)("Writing Direction")};case"DOCUMENT_CONTAINER_SPEECH":return i.settingsLabel=Object(r.a)("[Speech Commands]"),i.type="container",{...i,...Object(o.a)("Speech")};default:return n.default.getMenuItem(e,a)}}};var x={actions:function(){return["DOCUMENT_LOOK_UP","DOCUMENT_EMOJI","DOCUMENT_UNDO","DOCUMENT_REDO","DOCUMENT_CUT","DOCUMENT_COPY","DOCUMENT_PASTE","COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO","DOCUMENT_SELECT_ALL","DOCUMENT_CONTAINER_NOTES","DOCUMENT_CONTAINER_SPELLCHECK","DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS","DOCUMENT_CUSTOMIZE","DOCUMENT_SHOW_FULL_ADDRESS","DOCUMENT_CONTAINER_SPEECH"]},options:function(e,t){const a=void 0===t,i={...s.a.commandItem},l=t||p.a.settingsState;switch(e.action){case"DOCUMENT_LOOK_UP":return{...i,...p.a.getLabelWithParameter(e,l.printableselection,a)};case"DOCUMENT_EMOJI":return{...i,...Object(o.a)("Emoji && Symbols")};case"DOCUMENT_UNDO":return{...i,shortcuts:["ctrl+z"],...Object(o.a)("win_linux","Undo")};case"DOCUMENT_REDO":return{...i,shortcuts:["ctrl+y"],...Object(o.a)("win_linux","Redo")};case"DOCUMENT_CUT":return{...i,shortcuts:["ctrl+x"],...Object(o.a)("win_linux","Cut")};case"DOCUMENT_COPY":return{...i,shortcuts:["ctrl+c"],...Object(o.a)("win_linux","Copy")};case"DOCUMENT_PASTE":return{...i,shortcuts:["ctrl+v"],...Object(o.a)("win_linux","Paste")};case"DOCUMENT_SELECT_ALL":return{...i,shortcuts:["ctrl+a"],...Object(o.a)("win_linux","Select All")};case"DOCUMENT_CONTAINER_NOTES":return i.settingsLabel=Object(r.a)("[All notes]"),i.type="container",{...i,...Object(o.a)("Insert Note")};case"DOCUMENT_CONTAINER_SPELLCHECK":return i.settingsLabel=Object(r.a)("[Spell Check]"),i.type="container",{...i,...Object(o.a)("Spell Check")};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return i.settingsLabel=Object(r.a)("[Spell Check Options]"),i.type="container",{...i,...Object(o.a)("Spell Check Options")};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return i.settingsLabel=Object(r.a)("[Writing Direction Options]"),i.type="container",{...i,...Object(o.a)("Writing Direction")};case"DOCUMENT_CUSTOMIZE":return i.ellipsis=!0,{...i,...Object(o.a)("panel","Customize")};case"DOCUMENT_SHOW_FULL_ADDRESS":return i.type="checkbox",{...i,...Object(o.a)("Show Full Address")};case"DOCUMENT_CONTAINER_SPEECH":return i.settingsLabel=Object(r.a)("[Speech Commands]"),i.type="container",{...i,...Object(o.a)("Speech")};default:return n.default.getMenuItem(e,a)}}};var L={actions:function(){return["CONTEXT_NEW","CONTEXT_NEW_STACK","CONTEXT_NEW_STACK_FOR_HOST","CONTEXT_TABSTACK_UNGROUP","CONTEXT_CLONE","CONTEXT_RELOAD","CONTEXT_HIBERNATE_TAB","CONTEXT_PIN","CONTEXT_UNPIN","CONTEXT_TILE_TABS","CONTEXT_UNTILE_TABS","CONTEXT_MUTE","CONTEXT_MUTE_OTHER","CONTEXT_UNMUTE","CONTEXT_RENAME","CONTEXT_COPY","CONTEXT_SAVE","CONTEXT_SAVE_ALL","CONTEXT_EXPORT","CONTEXT_EXPORT_ALL","CONTEXT_DELETE","CONTEXT_EMPTY_TRASH","CONTEXT_REOPEN","CONTEXT_EXPAND_ALL","CONTEXT_COLLAPSE_ALL"]},options:function(e,t){const a=t||{hostname:"",selectedCount:0},i=void 0===t,r={...s.a.commandItem};switch(e.action){case"CONTEXT_NEW":return{...r,...Object(o.a)("command","New Tab")};case"CONTEXT_NEW_STACK":return{...r,...Object(o.a)("Stack $1 Selected Tab","Stack $1 Selected Tabs",[a.selectedCount])};case"CONTEXT_NEW_STACK_FOR_HOST":return{...r,...i?Object(o.a)("Stack Tabs by Host"):Object(o.a)("Stack Tabs by Host ($1)",[a.hostname])};case"CONTEXT_TABSTACK_UNGROUP":return{...r,...Object(o.a)("Unstack Tabs")};case"CONTEXT_CLONE":return{...r,...Object(o.a)("Clone")};case"CONTEXT_RELOAD":return{...r,...Object(o.a)("Reload")};case"CONTEXT_HIBERNATE_TAB":return{...r,...Object(o.a)("Hibernate")};case"CONTEXT_PIN":return{...r,...Object(o.a)("Pin")};case"CONTEXT_UNPIN":return{...r,...Object(o.a)("Unpin")};case"CONTEXT_TILE_TABS":return{...r,...Object(o.a)("Tile")};case"CONTEXT_UNTILE_TABS":return{...r,...Object(o.a)("Untile")};case"CONTEXT_MUTE":return{...r,...Object(o.a)("Mute")};case"CONTEXT_MUTE_OTHER":return{...r,...Object(o.a)("Mute Others")};case"CONTEXT_UNMUTE":return{...r,...Object(o.a)("Unmute")};case"CONTEXT_RENAME":return{...r,...Object(o.a)("Rename")};case"CONTEXT_COPY":return{...r,...Object(o.a)("Copy Address")};case"CONTEXT_SAVE":return{...r,...Object(o.a)("Save as Bookmarks")};case"CONTEXT_SAVE_ALL":return{...r,...Object(o.a)("Save All as Bookmarks")};case"CONTEXT_EXPORT":return{...r,...Object(o.a)("Save as Session")};case"CONTEXT_EXPORT_ALL":return{...r,...Object(o.a)("Save All as Session")};case"CONTEXT_DELETE":return{...r,...Object(o.a)("Close")};case"CONTEXT_EMPTY_TRASH":return{...r,...Object(o.a)("command","Clear All")};case"CONTEXT_REOPEN":return{...r,...Object(o.a)("Reopen")};case"CONTEXT_EXPAND_ALL":return{...r,...Object(o.a)("Expand All Folders")};case"CONTEXT_COLLAPSE_ALL":return{...r,...Object(o.a)("Collapse All Folders")};default:return n.default.getMenuItem(e,i)}}},j=a(7);const R=[{name:Object(r.a)("Web Page"),group:"8",indent:0,sort:!0},{name:Object(r.a)("Mail"),group:"6",indent:0,sort:!0},{name:Object(r.a)("section","Start page"),group:"1",indent:0,sort:!0},{name:Object(r.a)("Panels"),group:"4",indent:0,sort:!0},{name:Object(r.a)("Tabs"),group:"2",indent:0,sort:!0},{name:Object(r.a)("Bookmarks"),group:"5",indent:0,sort:!0},{name:Object(r.a)("context","Address Bar"),group:"3",indent:0,sort:!1},{name:Object(r.a)("Other"),group:"7",indent:0,sort:!0}],B={tab:{name:Object(r.a)("context","Tab"),group:"2",...M},tabstackthumbnails:{name:Object(r.a)("Tab Stack Thumbnails"),group:"2",...D},tabbar:{name:Object(r.a)("context","Tab Bar"),group:"2",...I},closedtab:{name:Object(r.a)("Tab Trash Can"),group:"2",...d},windowlist:{name:Object(r.a)("Window List"),group:"2",...L},bookmarkbar:{name:Object(r.a)("Bookmark Bar"),group:"5",...u},bookmarkbaritem:{name:Object(r.a)("Bookmark Bar Button"),group:"5",...c},bookmarklist:{name:Object(r.a)("Bookmark List"),group:"5",...m},panelbar:{name:Object(r.a)("Panel Bar"),group:"4",...S},panelbaritem:{name:Object(r.a)("Panel Bar Button"),group:"4",...y},backwardbutton:{name:Object(r.a)("Back Button"),group:"3",...C},forwardbutton:{name:Object(r.a)("Forward Button"),group:"3",...C},rewindbutton:{name:Object(r.a)("Rewind Button"),group:"3",...C},fastforwardbutton:{name:Object(r.a)("Fast Forward Button"),group:"3",...C},reloadbutton:{name:Object(r.a)("Reload Button"),group:"3",...C},homebutton:{name:Object(r.a)("Home Button"),group:"3",...C},urledit:{name:Object(r.a)("Text Field"),group:"3",...x},speeddialitem:{name:Object(r.a)("Speed Dial Button"),group:"1",...T},startpage:{name:Object(r.a)("context","Start Page"),group:"1",...A},startpagebar:{name:Object(r.a)("Start Page Bar"),group:"1",...k},mailsearchlist:{name:Object(r.a)("Message List"),group:"6",...E},contactlist:{name:Object(r.a)("Contacts"),group:"6",...h},noteslist:{name:Object(r.a)("Notes List"),group:"7",...w},historylist:{name:Object(r.a)("History List"),group:"7",...N},downloadlist:{name:Object(r.a)("Download List"),group:"7",...g},uiedit:{name:Object(r.a)("Text Field"),group:"7",...P},link:{name:Object(r.a)("Link"),group:"8",...v},image:{name:Object(r.a)("Image"),group:"8",...f},page:{name:Object(r.a)("Page"),group:"8",...O},selection:{name:Object(r.a)("context","Selection"),group:"8",..._},docedit:{name:Object(r.a)("Text Field"),group:"8",...b},audiovideo:{name:Object(r.a)("Audio and Video"),group:"8",...l}},F=()=>Object.keys(B),U=e=>R.some(t=>t.group===e),H=e=>{if(U(e)){const t=R.findIndex(t=>t.group===e);return R[t].name}return B[e].name},V=e=>B[e].options,W=e=>B[e].actions;function z(e,t,a,n){const i=V(e);if(i){const e=e=>Promise.resolve(i(e));return function e(t,a,n){return Promise.all(t.map(t=>a(t).then(i=>{let r=s.a.commandItem;switch(t.type){case"folder":r={...i,type:t.type,id:t.id,items:[],commandName:t.action};break;case"command":case"checkbox":r={...i,type:t.type,id:t.id,commandName:t.action};break;case"radio":break;case"container":n?i.container?(i.container.cpp=!0,i.container.mode=t.containermode||"folder",i.container.edge=t.containeredge||"off",r={type:t.type,id:t.id,...i}):"inline"===t.containermode?(i.items||(i.items=[]),r={...i,type:"container",id:t.id}):"folder"===t.containermode&&(delete i.type,r={...i,type:"folder",id:t.id}):(i.container={content:t.action,mode:t.containermode,edge:t.containeredge,cpp:!1},r={...i,type:t.type,id:t.id,commandName:t.action});break;case"separator":r={...s.a.separatorItem,id:t.id}}return void 0!==t.title&&(r.label&&(r.label=t.title),r.labelEnglish&&(r.labelEnglish=t.title),r.settingsLabel&&delete r.settingsLabel,r.ellipsis=!1),void 0!==t.custom&&(r.custom=t.custom),r.showshortcut=t.showshortcut,"folder"===t.type&&t.children&&!1!==i.visible?e(t.children,a,n).then(e=>(Array.prototype.push.apply(r.items,e),r)):r}))).then(e=>e.reduce((e,t)=>!1===t.visible?[...e]:"container"===t.type&&t.items&&n?[...e,...t.items]:[...e,t],[]))}(a,t||e,n)}return Promise.resolve([])}const G={isSection:U,getKeys:F,getSettingsList:()=>{const e={};Object.keys(B).forEach(t=>{const a=B[t];e[a.group]||(e[a.group]=[]),e[a.group].push(t)});let t=[];return R.forEach(a=>{if(e[a.group]){const n={key:a.group,indent:a.indent,name:a.name},i=e[a.group].map(e=>({key:e,indent:a.indent+1,name:H(e)})).sort((e,t)=>!1===a.sort?0:e.name<t.name?-1:e.name>t.name?1:0);i&&i.length>0&&(t=[...t,n,...i])}}),t},getNamedMenu:(e,t)=>new Promise(a=>{j.a.menuContent.get(e,(n,i,s)=>{a(s?z(e,t,s,!0):[])})}),makeMenuWithContent:(e,t)=>z(e,void 0,t,!1),makeCommandList:e=>{if(void 0===B[e])return[];const t={id:"",type:"command",action:""},a=V(e);return W(e)().map(e=>(t.action=e,{action:e,...a(t),id:e}))},hasName:e=>F().includes(e)||U(e),getName:H,getOptionFunction:V,getActionList:W};t.a=G},,,,function(e,t,a){"use strict";var n=a(130),i=a(47),s=(a(53),a(13)),r=a(12),o=a(16),l=a(180),c=a(17);const u=new class{doAction(e,t){const a=c.a.getId(),n=s.c.getActivePage(a);r.a.dispatch({actionType:o.a.WEBPAGEVIEW_ACTIONS,action:e,pageId:n?n.id:0,...t?{payload:t}:null})}findInPage(e,t,a){const i=n.a.getActiveWebView(),s={findNext:!1,matchCase:a||!1};i&&i.find(t,s,this._findCallback.bind(this,e,t,a))}findNextInPage(e,t,a,i){const s=n.a.getActiveWebView(),r={backward:a||!1,findNext:!0,matchCase:i||!1};s&&s.find(t,r,this._findCallback.bind(this,e,t,i))}_findCallback(e,t,a,n){!0!==n.canceled&&r.a.dispatch({actionType:o.a.FIND_IN_PAGE_RESULT_ACTION,matchCase:a,pageId:e,searchText:t,...n})}showFindInPageToolbar(e){r.a.dispatch({actionType:o.a.SHOW_FIND_IN_PAGE_ACTION,pageId:e})}closeFindInPageToolbar(e){return!0===l.a.isFindInPageOpen(e)&&(r.a.dispatch({actionType:o.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e}),!0)}go(e){r.a.dispatch({actionType:o.a.PAGE_GO,index:e||0})}back(){s.c.unsafeGetActivePage().isMailPage?i.a.pageBack():r.a.dispatch({actionType:o.a.PAGE_BACK})}forward(){s.c.unsafeGetActivePage().isMailPage?i.a.pageForward():r.a.dispatch({actionType:o.a.PAGE_FORWARD})}getPageHistory(e){r.a.dispatch({actionType:o.a.PAGE_GET_HISTORY,callback:e})}stop(){r.a.dispatch({actionType:o.a.PAGE_STOP})}reload(e=!1){r.a.dispatch({actionType:o.a.PAGE_RELOAD,bypassCache:e})}updated(e){r.a.dispatch({actionType:o.a.PAGE_UPDATED,pageId:e.id})}};t.a=u},,function(e,t,a){"use strict";function n(e){return!!e&&e.contains(document.activeElement)}function i(e){return e.querySelectorAll("a[href]:not([tabindex='-1']),\n    button:not([disabled]):not([tabindex='-1']),\n    input:not([disabled]):not([tabindex='-1']),\n    select:not([disabled]):not([tabindex='-1']),\n    textarea:not([disabled]):not([tabindex='-1']),\n    [contenteditable]:not([tabindex='-1']),\n    [tabindex]:not([disabled]):not([tabindex='-1'])")}function s(e,t){const a=[...i(t||e)],n=a.findIndex(t=>t===e.activeElement);a[(n+1)%a.length].focus()}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s}))},,,function(e,t,a){"use strict";a.d(t,"h",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"j",(function(){return d})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"e",(function(){return N}));var n=a(6),i=a(88),s=a.n(i),r=a(38),o=a(1);function l(e,t){const a=t?t.clone():e.clone(),n=a.startOf("month");return Math.floor((e.diff(a,"day")+1+n.weekday()-1)/7)}function c(e,t,a,n=!0){const i=a.clone();let s=7*e+1-i.startOf("month").weekday()+t;if(n){const e=i.endOf("month").date();s=Math.max(1,Math.min(s,e))}return i.date(s)}function u(e,t,a=!1){const n=t.clone(),i=n.endOf("month").weekday(),s=a?i-e:(i-e+7)%7;return n.subtract(s,"day")}function m(e,t,a=!1){const n=t.clone(),i=n.startOf("month").weekday(),s=a?e-i:(e-i+7)%7;return n.add(s,"day")}function d(e,t){t&&t!==r.i||(t=s.a.tz.guess());const a=s.a.tz(e,t);return new Date(Date.UTC(a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second()))}function h(e,t){return t&&t!==r.i||(t=s.a.tz.guess()),s.a.tz([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],t).toDate()}function p(e,t=!0){const{start:a=0,end:i=0}=e;if(i&&i<a&&(e.end=a+(e.allDay?r.c:n.a.get(o.kCalendarDefaultDuration))),e.task?(e.due||(e.start=0),e.end=0):(e.due=0,e.end||(e.end=e.allDay?a+r.c:a)),e.allDay){if(e.timezone=r.i,e.start){const a=new Date(e.start||0),n=new Date(a.getFullYear(),a.getMonth(),a.getDate());e.start=(t?d(n):n).valueOf()}if(e.task&&e.due){const a=new Date(e.due||0),n=new Date(a.getFullYear(),a.getMonth(),a.getDate());e.due=(t?d(n):n).valueOf()}else if(!e.task&&e.end){const a=new Date(e.end||0),n=new Date(a.getFullYear(),a.getMonth(),a.getDate());e.end=(t?d(n):n).valueOf(),e.start===e.end&&(e.end=e.end+r.c)}}return e.task&&e.start===e.due&&(e.start=0),e}function b(e){return e.timezone&&e.timezone!==r.i?e.timezone:s.a.tz.guess()||""}function g(e){const t=b(e),a=s.a.tz(e.start,t),n=s.a.tz(e.end,t),i=s.a.tz(e.due||0,t);return e.allDay&&!e.task&&n.subtract(1,"day"),e.allDay&&e.task&&e.start&&e.due&&i.subtract(1,"day"),{start:a,end:n,due:i}}function N(e){return Math.ceil(e/r.f)*r.f}},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r}));var n=a(2),i=a(1);const s={BOOKMARK_NICKNAME:"bookmarkNick",BOOKMARK_FOLDER:"bookmarkFolder",BOOKMARK:"bookmark",CLOSED_TAB:"closedTab",NOTE_ADD:"noteAdd",COMMAND_KEYWORD:"commandKeyword",NOTE_OPEN:"note",COMMAND:"command",CALCULATOR:"calculator",HISTORY:"history",KEYWORDSEARCH:"keywordSearch",OPEN_TAB:"openTab",SEARCH:"search",TITLE:"title",URL:"url",CONTENT_SCRIPT:"contentScript",EXTENSION:"extension",COMMAND_CHAIN:"commandChain"},r=[{key:"CALCULATOR",name:Object(n.a)("Calculator"),pref:i.kQuickCommandsShowCalculator},{key:"NORMAL_COMMAND",name:Object(n.a)("Commands")},{key:"COMMAND_CHAIN",name:Object(n.a)("Command Chains")},{key:"KEYWORD_SEARCH",name:Object(n.a)("Web Search & URL Entry")},{key:"OPEN_TABS",name:Object(n.a)("Open Tabs")},{key:"BOOKMARK_ITEM_OR_FOLDER",name:Object(n.a)("Bookmarks"),pref:i.kQuickCommandsShowBookmarks},{key:"NOTES_SEARCH",name:Object(n.a)("Notes"),pref:i.kQuickCommandsShowNotes},{key:"HISTORY",name:Object(n.a)("Browsing History"),pref:i.kQuickCommandsShowHistory},{key:"EXTENSIONS",name:Object(n.a)("Extensions"),pref:i.kQuickCommandsShowExtensions},{key:"PAGE_ACTIONS",name:Object(n.a)("Page Actions"),pref:i.kQuickCommandsShowPageActions},{key:"CLOSED_TABS",name:Object(n.a)("Closed Tabs")}]},,function(e,t,a){"use strict";a(903),a(904),a(905),a(906),a(907),a(908),a(909),a(910),a(911),a(912),a(913),a(914),a(915),a(916),a(917),a(918),a(919),a(920),a(921),a(922),a(923),a(924),a(925),a(926),a(927),a(928),a(929),a(930),a(931),a(932),a(933),a(934),a(935),a(936),a(937),a(938),a(939),a(940),a(941),a(942),a(943),a(944),a(945),a(946),a(947);var n=a(6),i=a(2),s=a(10),r=a(15),o=a.n(r);const l=new RegExp(/'.*?'/g),c=new RegExp(/(\]?([^\]])*\[)|(\]\w+$)/g),u=e=>`[${e.replace(/'/g,"")}]`,m=e=>e.replace(/y/g,"Y").replace(/d/g,"D"),d=e=>e.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace("DDDD","dddd");var h=a(1);a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return N}));const p={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},b=s.a.i18n.getUILanguage().toLowerCase();function g(e){return String(e.year()).padStart(4,"0")+"-"+String(e.month()+1).padStart(2,"0")+"-"+String(e.date()).padStart(2,"0")}function N(e){return String(e.hour()).padStart(2,"0")+":"+String(e.minute()).padStart(2,"0")}function f(e){if("hy"===(e=e.toLowerCase()))return"hy-am";if("sr"===e)return"sr-cyrl";const t=o()().locale(e);return t.locale()===e?e:"-"===e[2]&&(e=e.substring(0,2),t.locale(e),t.locale()===e)?e:"en"}function _(e){const t=o()().locale(f(b));if(t.localeData)return"short"===e?t.localeData().weekdaysShort():t.localeData().weekdays();const a=new Date,n=new Date(a.setDate(a.getDate()-a.getDay())),i=[];let s=0;for(;s<7;)i.push(n.toLocaleString(b,{weekday:e})),n.setDate(n.getDate()+1),s++;return i}function v(e="long"){const t=o()().locale(f(b));if(t.localeData)return"short"===e?t.localeData().monthsShort():t.localeData().months();const a=[];let n=0;for(;n<12;){const t=new Date(2e3,n,1);a.push(t.toLocaleString(b,{month:e})),n++}return a}const E={getWeekdays:_,getMonths:v,getLocale:function(e){const t=f(b),a=o()().locale(t),i=n.a.get(h.kCalendarStartOfWeek),s=parseInt(n.a.get(h.kCalendarWeekNumberRule));if(e&&"language"!==n.a.get(h.kCalendarDateFormat)){const a=(e=(e=>{if(e.timeFormat=e.timeFormat.replace(/tt/,"A").replace(/t/,"A"),e.shortDateFormat.includes("'")?e.shortDateFormat=e.shortDateFormat.replace(l,u).replace(c,e=>m(e)):e.shortDateFormat=m(e.shortDateFormat),e.longDateFormat.includes("'")){const t=e.longDateFormat.replace(l,u).replace(c,e=>d(e));e.longDateFormat=t+" "+e.timeFormat}else e.longDateFormat=d(e.longDateFormat)+" "+e.timeFormat;return e})(e)).timeFormat,n=a.replace(":ss",""),r=e.longDateFormat,o=r.replace(/.?dddd.?/,"").trim(),h=o.replace(/\s?(h+.m+.s+)\s?a?/gi,"").trim(),b=e.shortDateFormat.includes("DD")&&e.shortDateFormat.includes("MM")?e.shortDateFormat:e.shortDateFormat.replace(/M+/,"MM").replace(/D+/,"DD"),g="system"===i?e.firstDayOfWeek:p[i],N=7+g-s;return{name:t+"-viv",parentLocale:t,months:v("long"),monthsShort:v("short"),weekdays:_("long"),weekdaysShort:_("short"),week:{dow:g,doy:N},longDateFormat:{LT:n,LTS:a,L:b,LL:h,LLL:o,LLLL:r}}}{if(!a.localeData)return o.a.localeData();const e={name:t+"-viv",parentLocale:t,months:v("long"),monthsShort:v("short"),weekdays:_("long"),weekdaysShort:_("short"),week:a.localeData()._week,longDateFormat:a.localeData()._longDateFormat};return"system"!==i&&(e.week.dow=p[i]),e.week.doy=7+e.week.dow-s,e}},getWeekdayFormat:function(e="LL"){return Object(i.a)("$1, $2",["dddd",e])},getShortDateFormat:function(){return o.a.localeData().longDateFormat("ll").replace("MMMM","MMM").replace(/([^MD]*)?Y+([^MD]*)?$/g,"").replace(/^Y+([^MD]*)?/,"").trim().replace(/(^,)|(,$)/g,"")},fixMomentLocale:f,formatYMD:g,formatTime:N};t.a=E},,function(e,t,a){"use strict";a.d(t,"l",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"k",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return g})),a.d(t,"b",(function(){return N})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return C}));var n=a(112),i=a.n(n),s=a(15),r=a.n(s),o=a(70),l=a(100);const c=[o.a.MO,o.a.TU,o.a.WE,o.a.TH,o.a.FR,o.a.SA,o.a.SU];function u(e){const t=c[(e+6)%7];if(!t)throw new Error("Invalid weekday number");return t}function m(e,t,a){try{const n=t?Object(l.j)(new Date(t),a):void 0;return Object(o.d)(e,{dtstart:n})}catch(t){console.warn("Error parsing rrule string '%s' %o",e,t)}}function d(e){let{dtstart:t,until:a}=e;return t=t&&Object(l.j)(t),a=a&&Object(l.j)(a),new o.a({...e,dtstart:t,until:a})}function h(e,t){let{dtstart:a,until:n}=t;return a=a?Object(l.j)(a):e.origOptions.dtstart,t.hasOwnProperty("until")?n&&(n=Object(l.j)(n)):n=e.origOptions.until&&Object(l.f)(e.origOptions.until),new o.a({...e.origOptions,...t,dtstart:a,until:n})}function p(e,t){function a(e){return e.weeks()-e.clone().startOf("month").weeks()}function n(e,t,a){const n="number"==typeof a?a:a.weekday,i=c[((n+e)%7+7)%7];if(!i)throw new Error("Weekday not found. Should not happen.");return i&&a.hasOwnProperty("n")&&"number"==typeof a.n?i.nth(a.n+t):i}if(!(null==e?void 0:e.dtstart))return{freq:1};const i=Object(l.f)(e.dtstart),s=r()(i),o=r()(i).add(t,"millisecond"),u=o.diff(s,"day");if(!u)return e;const m=a(o)-a(s),{byweekday:d,bymonthday:h}=e;return d?Array.isArray(d)?e.byweekday=d.map(e=>n(u,m,e)):e.byweekday=n(u,m,d):h&&(Array.isArray(h)?e.bymonthday=h.map(e=>s.clone().date(e).add(u,"day").date()):"number"==typeof h&&(e.bymonthday=s.clone().date(h).add(u,"day").date())),e}const b=i()(250)((function(e,t,a,n){const i=m(e);return i?i.between(Object(l.j)(new Date(t),n),Object(l.j)(new Date(a),n),!0).map(e=>Object(l.f)(e,n)):[]}));function g(e,t,a,n,i){return e.between(Object(l.j)(t,i),Object(l.j)(a,i),!0,(e,t)=>t<n).map(e=>Object(l.f)(e,i))}function N(e,t,a,n){const i=e.before(Object(l.j)(t,a),n);return i instanceof Date?Object(l.f)(i):null}function f(e){const{bymonthday:t}=e.origOptions;return t?Array.isArray(t)?t:[t]:[]}function _(e){return"number"==typeof e?e:e.weekday}function v(e){const{byweekday:t}=e.origOptions;return t?Array.isArray(t)?t.map(_):[_(t)]:[]}function E(e){return"number"==typeof e?new o.b(e):e}function C(e){const{byweekday:t}=e.origOptions;return t?Array.isArray(t)?t.map(E):[E(t)]:[]}},,function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(20),r=a.n(s),o=a(9),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FloatingLabel.jsx";function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class u extends i.a.PureComponent{constructor(...e){var t,a,n;super(...e),t=this,a="inputRef",n=i.a.createRef(),a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentDidMount(){if(this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}componentDidUpdate(e){if(!e.focusInput&&this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}render(){const{placeholder:e="",label:t,labelImportant:a,style:n,isVerified:s,hasError:u,focusInput:m,...d}=this.props,h=r()({"floating-label":!0,verified:s&&!this.props.disabled});let p;return t&&(p=a?i.a.createElement("strong",{__source:{fileName:l,lineNumber:68,columnNumber:11}},t):i.a.createElement("span",{__source:{fileName:l,lineNumber:68,columnNumber:40}},t)),i.a.createElement("label",{className:h,style:n,__source:{fileName:l,lineNumber:72,columnNumber:7}},p,"textarea"!==d.type?i.a.createElement(i.a.Fragment,null,i.a.createElement("input",c({},d,{ref:this.inputRef,className:"floating-input",type:this.props.type,placeholder:e,__source:{fileName:l,lineNumber:76,columnNumber:13}})),u&&!this.props.disabled&&i.a.createElement("span",{className:"error",dangerouslySetInnerHTML:{__html:o.Dd},__source:{fileName:l,lineNumber:84,columnNumber:15}})):i.a.createElement("textarea",c({},d,{ref:this.inputRef,className:"floating-input",placeholder:e,__source:{fileName:l,lineNumber:91,columnNumber:11}})))}}t.a=u},function(e,t,a){"use strict";a.d(t,"b",(function(){return y}));var n=a(57),i=a.n(n),s=a(13),r=a(11),o=a(6),l=a(12),c=a(35),u=a(10),m=a(761),d=a(7),h=a(23),p=a(1);const b={};let g=!1,N=[],f=!1;const _={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,selectionEnd:-1,selectionStart:-1},v=new class extends i.a{getUrlfieldStateFromId(e){return{..._,...b[e.toString()]}}showTypedHistory(){return g}getTypedHistory(){return N}getThemeColors(){return w()}emitChange(e){this.emit("CHANGED",e)}addChangeListener(e){this.on("CHANGED",e)}removeChangeListener(e){this.removeListener("CHANGED",e)}__reset(){for(const e in b)delete b[e]}};function E(e,t){const a=(e||"").toString(),n=b[a];return(!n||!Object.keys(t).every(e=>t[e]===n[e]))&&(b[a]={...n,...t},!0)}function C(e){const t=e+"";b[t],b[t]={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,selectionEnd:0,selectionStart:0}}function w(){const e=o.a.get(p.kWebpagesReaderStyle).themeStyle;return"theme"===e?c.a.getKeysSync(["BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_HIGHLIGHT_BG"]):"dark"===e?{BROWSER_COLOR_BG:"#111111",BROWSER_COLOR_FG:"#f6f6f6",BROWSER_COLOR_HIGHLIGHT_BG:"#0080ff"}:{BROWSER_COLOR_BG:"#f6f6f6",BROWSER_COLOR_FG:"#111111",BROWSER_COLOR_HIGHLIGHT_BG:"#0000ee"}}function O(){const e={...o.a.get(p.kWebpagesReaderStyle),...w()},t=s.c.unsafeGetActivePage();t.extData.get("readerMode")&&u.a.tabs.sendMessage(t.id,{readerStyle:e})}function y(e,t){E(e,{isActive:t})}v.dispatchToken=l.a.register(e=>{var t,a;switch(e.actionType){case"URLFIELD_SET_STATE":E(e.pageId,e.state)&&v.emitChange();break;case"NAVIGATION_SET_STATE":if(!(null===(t=e.navigationState)||void 0===t?void 0:t.isLoading)&&(f=!1,"abort"===e.navigationState.trigger)){const t=e.pageId+"";b[t]&&!b[t].editUrl&&C(t),v.emitChange()}break;case"CHROME_TABS_CREATE":{const{page:t}=e;f=!0,E(t.id,{isActive:Object(h.i)(t.url)});break}case"PAGE_RELOAD":C(s.c.unsafeGetActivePage().get("id")),v.emitChange();break;case"PAGE_OPEN":v.emitChange();break;case"PAGE_CLOSE":!function(e){for(const{id:t}of e.values())delete b[t+""]}(e.pages),v.emitChange();break;case"URLFIELD_TYPED_HISTORY_SHOW":g||(g=!0,v.emitChange());break;case"URLFIELD_HISTORY_DELETE":a=e.url,u.a.history.deleteUrl({url:a},()=>v.emitChange());break;case"READERMODE_RESET":r.a.reset(p.kWebpagesReaderStyle),O(),v.emitChange();break;case"READERMODE_SET_STYLE":O();break;case"URLFIELD_CLEAR_STATE":f||(C(e.pageId),v.emitChange());break;case"URLFIELD_TYPED_HISTORY_UPDATE":d.a.historyPrivate.getTypedHistory("",-1,50,e=>{N=Object(m.a)(e),v.emitChange("URLFIELD_TYPED_HISTORY_UPDATE")});break;case"URLFIELD_TYPED_HISTORY_HIDE":g&&(g=!1,v.emitChange());break;case"URLFIELD_COPY_STATE":E(e.pageId,e.state)&&v.emitChange();break;case"CHROME_TABS_INIT":e.tabs.forEach(({id:e,url:t=""})=>{void 0!==e&&(b[e.toString()]={autocompleteValue:void 0,editUrl:void 0,isActive:!o.a.get(p.kTabsFocusWebview)&&(Object(h.i)(t)||""===t),isOmniDropdownOpen:!1,selectionEnd:-1,selectionStart:-1})}),v.emitChange()}}),t.a=v},function(e,t,a){"use strict";t.a={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Capslock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"None",60:"<",61:"=",63:"ß",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",92:"None",93:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"*",107:"+",108:",",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"Scrolllock",160:"^",161:"!",163:"#",164:"$",165:"None",166:"BrowserBack",167:"BrowserForward",169:")",170:"*",171:"+",173:"None",174:"None",175:"None",176:"Next",177:"Previous",178:"Stop",179:"None",180:"None",181:"None",182:"None",183:"None",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"None",193:"None",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"Meta",225:"AltGraph",226:"None",230:"None",233:"None",234:"None",255:"None"}},,function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(84),r=a.n(s),o=a(46),l=a(23),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Favicon.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=["/resources","chrome://favicon","data:"];class d extends i.a.PureComponent{constructor(...e){super(...e),u(this,"state",{url:this.props.url,loadFailed:!1}),u(this,"handleImageLoadError",()=>{this.setState({loadFailed:!0})})}static getDerivedStateFromProps(e,t){return{url:t.loadFailed?e.fallbackUrl||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABiUlEQVR42u2XK08DURBG6U/D80eQeMIjqGJAocCA6hqqUBASakCBAYUqSbvb92u3j6VZZjYcQ3q3hWlSRJucfF8yt3PPlbuxtb2zUtYC/1dAfge/ZHOlAkgsXSBJkn0B9ki6nvE87z5Twi7g5vtM4pCwC0yn0yPZn6KdBATcEnaBfBzHx4p0EvIIuCTMAnLhqXCiaCcBgSwJk8B4PD6Ti1K0k3QE5kn8WWA0Gl24mEwm5wjMk7AIXA6Hw6tZ6EzO7GZhFpCLChBFkUfSyVmEYVgwC8gF14PBoKhoJwGY/ThflB2HJoF+v38jL0mRTi5MLpezCchLbnu9HtyRdFLRsyTdLNDtdkvykgdFOgkl0oVZoNPpPMqip0Vot9tkiv7XLNBqtZ5l2YuinVTkAtLJMgTeMngl6STdLNBsNt+h0WiQdNI5NwvIonK9XnfxQToomwVkiV+r1YJZ6IwEYGYWCIKgbcEs4Pt+JIQOIpJO0s0ClUrls1qtQkwqOiM5R9JNAktk9QLrb0MXX53cKptKU4a6AAAAAElFTkSuQmCC":e.url}}render(){let e=Object(l.o)(this.state.url);if(e.startsWith("<svg"))return i.a.createElement("span",{ref:this.props.refFavicon,className:this.props.className,style:this.props.style,dangerouslySetInnerHTML:{__html:e},__source:{fileName:c,lineNumber:51,columnNumber:9}});const t=m.some(t=>e.startsWith(t));if(this.props.topLevelOnly&&!t){const{hostname:t}=r.a.parse(e),a=(t||"").split(".");e=`https://${a.slice(-2).join(".")}/favicon.ico`}const a=Object(o.c)(e).replace("vivaldi://","chrome://"),n=this.props.size||16,s=t||this.props.avoidCache?e:`chrome://favicon/size/${n}@1x/${a} 1x,`+`chrome://favicon/size/${n}@2x/${a} 2x`;return(i.a.createElement("img",{ref:this.props.refFavicon,className:this.props.className,width:n,height:n,srcSet:s,style:this.props.style,onError:this.handleImageLoadError,__source:{fileName:c,lineNumber:74,columnNumber:7}}))}}t.a=d},,,function(e,t,a){"use strict";(function(e){var n=a(14),i=a(6),s=a(86),r=a(404),o=a(157),l=a(108),c=a(12),u=a(35),m=a(17),d=a(10),h=a(1263),p=a(7),b=a(46),g=a(691),N=a(1);const f=[];async function _({url:e,options:t}){const{addTypedSearchHistory:a,enableSearch:i,allowOverride:s,useSearchEngine:r,...o}=t;await n.a.openURL(e.replace(/ /g,"%20"),{inCurrent:!t.hasOwnProperty("inBackground"),...o})}function v(e,t,a,n){n?r.a.addTypedSearchHistory(t):f.push({url:e,keywordId:a,searchTerms:t})}function E({url:t}){if(e.nextTick(()=>{c.a.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"})}),void 0===t)return;const a=f.findIndex(e=>e.url===t);if(-1!==a){const e=f.splice(a,1);p.a.historyPrivate.setKeywordSearchTermsForURL(t,e[0].keywordId,e[0].searchTerms)}}function C(e,t){return e.replace(/%s/g,encodeURIComponent(t).replace("'","%27")).replace(/%S/g,t)}function w(e,t={}){const a=e,n=t.addTypedSearchHistory;if(t.useSearchEngine){const e=t.useSearchEngine.historyId,i=C(t.useSearchEngine.url,a);return v(i,a,e,n),{url:i,options:{...t}}}const i=s.a.getByQuery(a);if(i){const e=a.substr(i.keyword.length+1),s=C(i.url,e);return v(s,e,i.historyId,n),{url:s,options:{...t,post:i.post,transition:o.a.KEYWORD}}}const r=s.a.getDefault(m.a.isIncognito());if(r){const e=C(r.url,a);return v(e,a,r.historyId,n),{url:e,options:{...t,post:r.post,transition:o.a.GENERATED}}}return{url:e,options:{...t}}}async function O(e,t){if(function(e){const t=e.split(" ");return t.length>=2&&s.a.hasKeyword(t[0])}(e))return Promise.resolve(w(e,t));const a=e.trimEnd().replace(/^https:\/(?!\/)/i,"https://").replace(/^https:\/{3,}/i,"https://").replace(/^http:\/(?!\/)/i,"http://").replace(/^http:\/{3,}/i,"http://"),{urlValid:n,schemeValid:i,schemeParsed:r,externalHandler:o,normalizedUrl:l}=await p.a.utilities.isUrlValid(a);if(Object(g.b)(a)){const e=Object(b.c)(a);return Promise.resolve({url:e,options:t})}const c=!i&&r&&!o,u=n&&i&&("http"===r||"https"===r)||!r||r&&!l,m=/\s/.test(a),d=m&&/^(\w{1,}\:(\/\/)?)?(\w{1,}(\.\w{1,})?(:\d{1,5})?[/?#])/.test(a),N=/\.(.{2,})(\/)/.test(a.split(" ")[0]),f=/^([a-zA-Z0-9\-\._~!$&'()\*+,;=%]*(:[a-zA-Z0-9\-\._~!$&'()\*+,;=%]*)?)?@\S*/.test(a),_=/^[^/^ ]{1,}:(\/\/)?[^/^ ]{1,}(\/|\?|#)/.test(a),v=function(e){if(!e.includes(":"))return!1;if(e.includes(" ")&&e.indexOf(" ")<e.indexOf(":"))return!1;try{const t=parseInt(e.split(":")[1].split("/")[0]);return t>=0&&t<=65535}catch(e){return!1}}(a);if(t.enableSearch&&!_&&!f&&!N&&(c||u&&m&&!d)&&!v){const{url:e,options:n}=w(a,t);return Promise.resolve({url:e,options:n})}if(n&&(i||o))return Promise.resolve({url:a,options:t});const E=a.startsWith("?");if(E||Object(b.h)(a)||t.enableSearch&&Object(h.a)(a)){const{url:e,options:n}=w(E?a.substr(1):a,t);return Promise.resolve({url:e,options:n})}const C=Object(b.c)(a),O=/[a-z]+\/$/.test(a),y=/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(a),S=await p.a.utilities.getUrlFragments(C),T=Boolean(S.tld&&S.tld.fragment);if(t.enableSearch&&!y&&!T&&!O){const{url:e,options:n}=w(a,t);return Promise.resolve({url:e,options:n})}try{return new URL(C),Promise.resolve({url:C,options:t})}catch(e){if(t.enableSearch){const{url:e,options:n}=w(a,t);return Promise.resolve({url:e,options:n})}return Promise.resolve({url:"vivaldi://network-error/-300",options:t})}}function y(){c.a.dispatch({actionType:"URLFIELD_TYPED_HISTORY_SHOW"})}function S(){c.a.dispatch({actionType:"URLFIELD_TYPED_HISTORY_HIDE"})}d.a.history.onVisitRemoved.addListener((function(e){c.a.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"}),e&&e.allHistory&&c.a.dispatch({actionType:"NAVIGATION_HISTORY_ALL_DELETED"})})),t.a={clearUrlfieldState:function(e){c.a.dispatch({actionType:"URLFIELD_CLEAR_STATE",pageId:e})},setUrlfieldState:function(e,t){c.a.dispatch({actionType:"URLFIELD_SET_STATE",pageId:e,state:t})},clearSelection:function(e){c.a.dispatch({actionType:"URLFIELD_SET_STATE",state:{selectionStart:-1,selectionEnd:-1},pageId:e})},goSearchURL:async function(e,t){const{url:a,options:n}=w(e,t);await _({url:a,options:n})},toggleTypedHistory:function(){!0===l.a.showTypedHistory()?S():y()},deleteHistory:function(e){c.a.dispatch({actionType:"URLFIELD_HISTORY_DELETE",url:e})},copyUrlfieldState:function(e,t){c.a.dispatch({actionType:"URLFIELD_COPY_STATE",pageId:e,state:t})},showTypedHistory:y,hideTypedHistory:S,go:async function(e,t){await Promise.all(e.map((a,n)=>{const i=a.trimStart();if(!i)return Promise.resolve();const s={...t};return e.length>1&&(s.inBackground=n!==e.length-1),O(i,s).then(_)}))},processSearchUrl:w,migrateTypedHistory:function(){e.nextTick(()=>{let e=void 0;try{e=JSON.parse(u.a.getSync("TYPED_HISTORY"))}catch(e){return}if(!e||!e.h)return;const t=o.a.TYPED,a=i.a.get(N.kAddressBarInlineSearchEnabled);e.h.forEach(e=>O(e.u,{enableSearch:a,transition:t}).then(({url:a,options:n})=>{p.a.historyPrivate.migrateOldTypedUrl(a,e.w,n.transition||t)})),u.a.remove("TYPED_HISTORY")}),d.a.history.onVisited.addListener(E),c.a.dispatch({actionType:"URLFIELD_TYPED_HISTORY_UPDATE"})}}}).call(this,a(82))},,,function(e,t,a){"use strict";var n=a(79),i=a(28),s=a(44),r=a(57),o=a.n(r),l=a(295),c=a(89),u=a(14),m=a(13),d=a(6),h=a(86),p=a(253),b=a(17),g=a(2),N=a(10),f=a(149),_=a(694),v=a(4),E=a(355);const C=Object(v.a)("keyword","default"),w=(e,t,a)=>t.every(t=>{const n=e.label.toLowerCase(),i=e.labelEnglish.toLowerCase();return a?n.includes(t)||i.includes(t):n.includes(t)});var O=function(e,t,a){const n=e.trim().toLowerCase().split(" ").filter(Boolean);return t.filter(e=>function(e,t,a){return((e,t,a)=>{const{keyword:n}=e;if(!n)return!1;const{validity:i}=n;let s=!1,r=!1,o=t.find(e=>{let t=!1;return s=a&&e===C.labelEnglish||e===C.label,i&&(t=i.test(e)),isNaN(e)||(r=!0),s||r||t});const l=t.filter(e=>!e.includes(String(o)));if(l.length&&w(e,l,a)){const{min:t,max:a,type:i,defaultValue:l}=n;return s?Object.assign(e,{foundKeyword:!0},{paramValue:l}):("number"==typeof o||r?o=Object(E.default)(o,t,a):"mixed"===i&&(o=o?{keyword:n,param:o}:void 0),Object.assign(e,{paramValue:o},{foundKeyword:Boolean(o)}))}})(e,t,a)||w(e,t,a)}(e,n,a))};var y=a(7),S=a(551),T=a(351),k=a(763),A=a(101),I=a(46),D=a(306),M=a(188),P=a(9),x=a(1),L=a(208),j=a(23);a.d(t,"v",(function(){return F})),a.d(t,"z",(function(){return U})),a.d(t,"b",(function(){return H})),a.d(t,"h",(function(){return V})),a.d(t,"t",(function(){return z})),a.d(t,"e",(function(){return K})),a.d(t,"g",(function(){return Y})),a.d(t,"s",(function(){return $})),a.d(t,"c",(function(){return X})),a.d(t,"o",(function(){return Z})),a.d(t,"n",(function(){return Q})),a.d(t,"p",(function(){return q})),a.d(t,"d",(function(){return J})),a.d(t,"w",(function(){return ee})),a.d(t,"f",(function(){return te})),a.d(t,"q",(function(){return ae})),a.d(t,"m",(function(){return ne})),a.d(t,"l",(function(){return ie})),a.d(t,"j",(function(){return se})),a.d(t,"r",(function(){return re})),a.d(t,"u",(function(){return oe})),a.d(t,"y",(function(){return le})),a.d(t,"k",(function(){return ce})),a.d(t,"i",(function(){return ue})),a.d(t,"x",(function(){return de})),a.d(t,"a",(function(){return he}));const R={"⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9"},B=new k.a,F=e=>{const t=Object(M.e)(e),a=Object(M.d)(e),n=Object(f.b)(e),i=m.c.unsafeGetActivePage().isMailPage,s=d.a.get(x.kQuickCommandsOpenUrlInNewTab);return t||i?(n.inCurrent=!1,n.inBackground=!0):a&&s?n.inCurrent=!0:s&&(n.inCurrent=!1,n.inBackground=!1),n},U=e=>{if("number"==typeof e||!isNaN(e))return Number(e);const{param:t}=e,{min:a,max:n}=e.keyword,i=String.fromCharCode(39),s=String.fromCharCode(34),r=t.indexOf(i),o=t.indexOf(s),l=r>0&&t.substring(0,r)||0,c=o>0&&t.substring(r+1,o)||0,u=60*parseInt(l)+parseInt(c);return Object(E.default)(u,a,n)};async function H(e){const t=s.default.getVivDefinedCommands().concat(S.a);for(const a of e){const{key:e,param:n}=a,i=t.find(t=>t.guid.includes(e));if(!i){console.error(`chainedCommandExecution: Command ${e} not found`);break}const{action:s,keyword:r,param:o}=i;let l=void 0!==n?n:o;if(void 0!==l&&r)switch(typeof n!==r.type&&(l=r.defaultValue),typeof n){case"string":"string"==typeof l&&(l=l.length?l:r.defaultValue);break;case"number":l=Object(E.default)(l,r.min,r.max)}l?await s(l):await s()}}const V=(e,t)=>{const a=e.toLowerCase().split(" "),n=d.a.get(x.kQuickCommandsLimitResults),i=d.a.get(x.kQuickCommandsSearchPriority),r=s.default.getChainCommandsShortcuts();let o=t.filter(e=>a.every(t=>e.label.toLowerCase().includes(t)&&e.chain.length)).map(e=>{var t;const{chain:a,key:n,label:s,name:o}=e,l=r.find(e=>e.name===o);return{name:s,id:n,meta:l&&(null===(t=l.shortcuts)||void 0===t?void 0:t.length)?l.shortcuts[0]:"",type:A.b.COMMAND_CHAIN,selectPriority:i.indexOf("COMMAND_CHAIN"),action:()=>H(a)}});return n&&(o=o.slice(0,20)),G({title:"Command Chains",array:o})},W=e=>e.reduce((e,t)=>e.concat(t.children?W(t.children):t),[]);function z(e,t){const a=e.toLowerCase(),n=t.toLowerCase();return a.indexOf(n)}function G(e){const{title:t,array:a,translateParam:n,subtitle:i}=e;return a.length?(a.unshift({name:Object(g.a)(t),type:A.b.TITLE,subtitle:i&&n?Object(g.a)(i,n):null,count:a.length}),a):[]}function K(e){const t=i.b.getNicknamed(e,!1).map(e=>{const{url:t=T.a}=e;return{folderId:e.children?e.id:void 0,type:A.b.BOOKMARK_NICKNAME,name:e.title,url:e.children?void 0:t,selectPriority:-1,nickname:e.nickname,imageUrl:e.children?P.pb.small:j.p.getFavicon(t,t)}});return G({title:Object(g.a)("Nickname Match"),array:t})}function Y(e){const t=e.replace(/,/g,".").replace(/x/gi,"*").replace(/([^\s])([⁰¹²³⁴⁵⁶⁷⁸⁹]+)/gu,"$1 ^ $2 ").replace(/[⁰¹²³⁴⁵⁶⁷⁸⁹]/gu,e=>R[e]);if(!t)return[];let a;try{a=B.evaluate(t)}catch(e){}if(void 0===a||"function"==typeof a)return[];let n=a;const i=`${String.fromCharCode(8722)}0`,s=`${String.fromCharCode(45)}0`,r=d.a.get(x.kQuickCommandsSearchPriority);return n!==i&&n!==s||(n="0"),[{name:n.toString(),searchString:e,selectPriority:r.indexOf("CALCULATOR"),type:A.b.CALCULATOR}]}function $(e,t){const a=e.toLowerCase().split(" "),n=d.a.get(x.kQuickCommandsSearchPriority),i=t.filter(e=>me(e.title||"",e.url||"",a)).map(e=>{const{id:t,url:a=""}=e;if(void 0===t)throw new Error("QuickCommandSearch.getOpenTabs: Expected number id");return{name:j.p.getDisplayTitle(e),url:Object(I.j)(a)?"":a,type:A.b.OPEN_TAB,selectPriority:n.indexOf("OPEN_TABS"),pageId:t,windowId:e.windowId,imageUrl:j.p.getFavicon(a,a)}});return G({title:Object(g.a)("Tabs"),array:i})}async function X(){return new Promise(e=>{N.a.management.getAll(t=>e(t))})}async function Z(){return new Promise(e=>{y.a.extensionActionUtils.getToolbarExtensions(t=>{const a=t.map(e=>({badgeIcon:e.badgeIcon,id:e.id}));e(a)})})}function Q(e,t,a){const n=d.a.get(x.kQuickCommandsSearchPriority),i=d.a.get(x.kQuickCommandsLimitResults),s=e.toLowerCase().split(" ");let r=t.filter(e=>{const t=e.name.toLowerCase(),a=e.shortName.toLowerCase();return!e.isApp&&s.every(e=>t.includes(e)||a.includes(e))}).map(e=>{const t=a.find(t=>t.id===e.id),i=t?t.badgeIcon:P.eb;return{name:e.name,imageUrl:i,id:e.id,type:A.b.EXTENSION,enabled:e.enabled,optionsUrl:e.optionsUrl,selectPriority:n.indexOf("EXTENSIONS")}});i&&(r=r.slice(0,20));const o=Object(L.b)("ctrl");return G({title:Object(g.a)("Extensions"),array:r,translateParam:[o],subtitle:"Open Options Page with $1"})}function q(e){const t=d.a.get(x.kQuickCommandsSearchPriority),a=d.a.get(x.kQuickCommandsLimitResults);let n=l.a.getFilteredHistory(e).map(e=>{const{url:a,title:n,visitTime:i,visitCount:s}=e;return{type:A.b.HISTORY,imageUrl:j.p.getFavicon(a,a),selectPriority:t.indexOf("HISTORY"),url:a,name:n,visitTime:i,visitCount:s}});return a&&(n=n.slice(0,20)),G({title:Object(g.a)("History"),array:n})}function J(e){const t=d.a.get(x.kQuickCommandsSearchPriority),a=d.a.get(x.kQuickCommandsLimitResults),n=e.toLowerCase();let s=i.b.getFilteredFlat(n,{bookmarks:!1,folders:!0,inTrash:!1}).filter(e=>e.nickname.toLowerCase()!==n).map(e=>({folderId:e.id,type:A.b.BOOKMARK_FOLDER,name:e.title,selectPriority:t.indexOf("BOOKMARK_ITEM_OR_FOLDER"),nickname:e.nickname,imageUrl:P.pb.small}));return a&&(s=s.slice(0,20)),G({title:Object(g.a)("Open All Bookmarks in Folder"),array:s})}async function ee(e){const{id:t,enabled:a,optionsPage:n,optionsUrl:i}=e;a||await N.a.management.setEnabled(t,!0),n&&i.length?u.a.openURL(i,{inCurrent:!n}):he.emitChange(t)}function te(e){const t=d.a.get(x.kQuickCommandsSearchPriority),a=d.a.get(x.kQuickCommandsLimitResults),n=e.toLowerCase();let s=i.b.getFilteredFlat(n,{bookmarks:!0,folders:!1,inTrash:!1}).filter(e=>e.nickname.toLowerCase()!==n).map(e=>{const{url:a=T.a,nickname:n,title:i}=e;return{type:A.b.BOOKMARK,name:i,url:a,selectPriority:t.indexOf("BOOKMARK_ITEM_OR_FOLDER"),nickname:n,imageUrl:j.p.getFavicon(a,a)}});return a&&(s=s.slice(0,20)),G({title:"Bookmarks",array:s})}function ae(e){const t=e.split(" ")[0],a=h.a.getByKeyword(t);if(!a)return[];const n=e.substring(t.length).trim(),i=encodeURIComponent(n);return[{name:Object(g.a)("Keyword Search “$1” on $2",[n,a.name]),nickname:a.keyword,type:A.b.KEYWORDSEARCH,imageUrl:a.faviconUrl,selectPriority:-1,value:a.url.replace(/%s/gi,i)}]}function ne(e,t){const a=d.a.get(x.kQuickCommandsSearchPriority),n=encodeURIComponent(e);return[{name:Object(g.a)("Search “$1” on $2",[e,null==t?void 0:t.name]),type:A.b.SEARCH,imageUrl:null==t?void 0:t.faviconUrl,selectPriority:a.indexOf("KEYWORD_SEARCH"),value:null==t?void 0:t.url.replace(/%s/gi,n)}]}function ie(e){return e.length<4?[]:[{name:Object(g.a)("Create Note “$1”",[e]),type:A.b.NOTE_ADD,value:e}]}function se(e){const t=s.default.getQuickCommands(),a=d.a.get(x.kQuickCommandsSearchEnglish);return G({title:"Commands",array:O(e,t,a).map(e=>{const{label:t,shortcut:a,foundKeyword:n,keyword:i,paramValue:s}=e;let r=t;const o=s&&n?s:void 0;i&&(r=n?Object(g.a)("Run $1",[t]):t+" #");const l=d.a.get(x.kQuickCommandsSearchPriority);return{name:r,type:i?A.b.COMMAND_KEYWORD:A.b.COMMAND,meta:a?a[0]:"",commandName:e.name,searchString:t,selectPriority:n?-1:l.indexOf("NORMAL_COMMAND"),value:o}})})}function re(e){const t=d.a.get(x.kQuickCommandsSearchPriority),a=d.a.get(x.kQuickCommandsLimitResults);let n=c.b.getFilteredFlat(e,{inTrash:!1}).map(e=>{const{id:a,title:n,children:i,content:s,url:r}=e,o=e.attachments&&e.attachments.length>0;return{type:A.b.NOTE_OPEN,id:a,url:r||"",name:n||s||"",isFolder:void 0!==(null==i?void 0:i.length),selectPriority:t.indexOf("NOTES_SEARCH"),nickname:n&&s?s:"",hasAttachment:o}});return a&&(n=n.slice(0,20)),G({title:"Notes",array:n})}function oe(e){if(!Object(I.n)(e)&&!Object(I.j)(e))return[];const t=Object(I.c)(e),a=d.a.get(x.kQuickCommandsSearchPriority),n={name:t,type:A.b.URL,selectPriority:Object(I.g)(e)?a.indexOf("KEYWORD_SEARCH")-1:-1,imageUrl:j.p.getFavicon(t,t)};return G({title:t.toLowerCase().startsWith("javascript:")?"Execute":"Go to Address",array:[n]})}async function le(e){const t=await N.a.bookmarks.getSubTree(e);if(t[0].children){const e={bookmarks:W(t[0].children),inCurrent:d.a.get(x.kQuickCommandsOpenUrlInNewTab)};n.a.open(e,!0)}}function ce(e,t){const a=e.toLowerCase().split(" "),n=d.a.get(x.kQuickCommandsSearchPriority);return G({title:"Page Actions",array:t.filter(e=>a.every(t=>Object(_.a)(e).toLowerCase().includes(t))).map(e=>({type:A.b.CONTENT_SCRIPT,selectPriority:n.indexOf("PAGE_ACTIONS"),script:e,name:Object(_.a)(e)}))})}function ue(e){const t=d.a.get(x.kQuickCommandsSearchPriority),a=d.a.get(x.kQuickCommandsLimitResults),n=e.toLowerCase().split(" ");let i=p.a.getTrash().flatMap(e=>{var t;return(null===(t=e.window)||void 0===t?void 0:t.tabs)?e.window.tabs.flatMap(t=>({lastModified:e.lastModified,...t})):{lastModified:e.lastModified,...e.tab}}).filter(e=>me(e.title||"",e.url||"",n)).map(e=>{const a=e.url||"";return{name:e.title||"",url:Object(I.j)(a)?"":a,type:A.b.CLOSED_TAB,selectPriority:t.indexOf("CLOSED_TABS"),imageUrl:j.p.getFavicon(a,a),command:e}});return a&&(i=i.slice(0,20)),G({title:Object(g.a)("Closed Tabs"),array:i})}function me(e,t,a){const n=Object(I.j)(t)?e:`${e} ${t}`;return a.every(e=>n.toLowerCase().includes(e))}function de(){m.c.getDiscardablePages(b.a.getId()).filter(e=>!Object(D.e)(e)).forEach(u.a.discardPage)}const he=new class extends o.a{emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}}},,function(e,t,a){"use strict";var n=a(10),i=a(37);const s={};let r=0;const o={updateThreads:function(){return l("updateThreads",[...arguments])},rerunThreading:function(e,t){return l("rerunThreading",[...arguments])},filter:function(){return l("filter",[...arguments])},start:function(){return l("start",[...arguments])},stop:function(){return l("stop",[...arguments])},removeMailingListGroup:function(e){return l("removeMailingListGroup",[...arguments])},updateMailingListGroup:function(e){return l("updateMailingListGroup",[...arguments])},addAccount:function(e,t){return l("addAccount",[...arguments])},flushBuffer:function(){return l("flushBuffer",[...arguments])},updateFlags:function(){return l("updateFlags",[...arguments])}};function l(e,t){return new Promise((a,o)=>{const l=r++;s[l]={resolve:a,reject:o},n.a.runtime.getBackgroundPage(a=>{const n={promiseId:l,func:e,args:t};a&&a.postMessage({background:n},i.o)})})}t.a=o,window.addEventListener("message",(function(e){if(e.origin!==i.o)return;const{background:t}=e.data;if(t){const{promiseId:e,results:a,error:n}=t,{resolve:i,reject:r}=s[e];delete s[e],n?r(n):i(a)}}),!1)},,function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"k",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return b})),a.d(t,"g",(function(){return g}));var n=a(397),i=a(10);a(7);function s(e){return new Promise((t,a)=>{i.a.tabs.get(e,e=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t(e)})})}function r(e,t,a){return new Promise((n,s)=>{i.a.tabs.sendMessage(e,t,a,e=>{i.a.runtime.lastError?s(i.a.runtime.lastError.message):n(e)})})}function o(e){return new Promise((t,a)=>{i.a.tabs.create(e,e=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t(e)})})}function l(e){return new Promise((t,a)=>{i.a.tabs.duplicate(e,e=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t(e)})})}function c(e){return new Promise((t,a)=>{i.a.tabs.query(e,e=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t(e)})})}function u(e,t){return new Promise((a,n)=>{i.a.tabs.update(e,t,e=>{i.a.runtime.lastError?n(i.a.runtime.lastError.message):a(e)})})}function m(e,t){return new Promise((a,n)=>{i.a.tabs.move(e,t,e=>{i.a.runtime.lastError?n(i.a.runtime.lastError.message):a(e)})})}function d(e,t){return new Promise((a,n)=>{i.a.tabs.reload(e,t,()=>{i.a.runtime.lastError?n(i.a.runtime.lastError.message):a()})})}function h(e){return new Promise((t,a)=>{i.a.tabs.remove(e,()=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t()})})}function p(e){return new Promise((t,a)=>{i.a.scripting.executeScript(e,()=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t()})})}function b(e){return new Promise((t,a)=>{i.a.tabs.discard(e,e=>{i.a.runtime.lastError?a(i.a.runtime.lastError.message):t(e)})})}const g={addListener:e=>{i.a.tabs.onCreated.addListener(async t=>{if(void 0===t.id)throw new Error("chrome.tabs.onCreated: tab ID missing");e(n.a.tabToPage(t))})},removeListener:()=>{}}},,,,,function(e,t,a){"use strict";function n(e){e.preventDefault(),e.stopPropagation()}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";var n=a(255),i=a(57),s=a.n(i),r=a(12),o=a(16);const l={};let c;const u=new class extends s.a{getAsArray(){return Object.values(l)}getAsTree(e){const t=e?e.toLowerCase():e;return t?u.getAsArray().filter(e=>m(e,t)):u.getAsArray()}getSelected(){return c}getNodeById(e){return l[e]}getContactsWithAddress(e){const t=u.getAsArray().filter(t=>{if(t.emailAddresses&&t.emailAddresses.length>0)return t.emailAddresses.some(t=>t.emailAddress.toLowerCase()===e.toLowerCase())});if(t.length>0)return t[0]}isTrustedEmailAddress(e){for(const t of u.getAsArray())for(const a of t.emailAddresses)if(a.emailAddress===e&&t.trusted)return!0;return!1}getMailAddresses(){const e=[];return u.getAsArray().forEach(t=>t.emailAddresses.forEach(a=>{const n={address:a.emailAddress};t.name&&(n.name=t.name),e.push(n)})),e}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}},m=function(e,t){if(!t||0===t.length)return!0;if(e.name&&e.name.toLowerCase().indexOf(t)>-1)return!0;if(e.emailAddresses){let a=!1;if(e.emailAddresses.forEach(e=>{e.emailAddress.toLowerCase().indexOf(t)>-1&&(a=!0)}),a)return!0}return!1};r.a.register(e=>{switch(e.actionType){case o.a.CONTACT_INITIALIZE:a=e.contacts,i=e.newContact,a.forEach(e=>{l[e.id]=Object(n.a)(e)}),i?(c=i,u.emitChange({reason:"newContact",contact:i,focusContactView:!0})):u.emitChange({reason:"startup"});break;case o.a.CONTACT_SAVE_CONTACT:t=e.contact,l[t.id]=t,c&&c.id!==t.id||(c=t),u.emitChange({reason:"updatedContact"});break;case o.a.CONTACT_ADD_CONTACTS:e.contacts.forEach(e=>{l[e.id]=Object(n.a)(e)}),u.emitChange({reason:"addGeneratedContacts"});break;case o.a.CONTACT_DELETE_CONTACTS:e.ids.forEach(e=>{delete l[e]}),u.emitChange({reason:"deleteContact"});break;case o.a.CONTACT_SELECT_CONTACT:!function(e,t){c=e,u.emitChange({reason:"selectedContact",contact:e,focusContactView:t})}(e.contact,e.focusContactView)}var t,a,i}),t.a=u},,function(e,t,a){"use strict";a.d(t,"l",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"k",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"i",(function(){return N})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return _})),a.d(t,"j",(function(){return v})),a.d(t,"g",(function(){return E})),a.d(t,"c",(function(){return C})),a.d(t,"b",(function(){return w})),a.d(t,"d",(function(){return O}));var n=a(296),i=a(174),s=a(67),r=a(41),o=a(11),l=a(6),c=a(2),u=a(690),m=a(1),d=a(171);function h(e){const{to:t,message:a,toThread:s,threadId:r,kind:o}=e,c=t.includes("conference")?"groupchat":"chat",u=l.a.get(m.kChatProcessHintNoStore),d={to:t,from:i.a.getClient().jid,body:a,type:c,read:!0,delay:{timestamp:new Date},processingHints:{noStore:u},thread:r||"foo",parentThread:s||"bar",kind:{value:o}},h=v(i.a.getClient().jid);!t.includes("conference")&&t!==h&&n.a.receivedMessage(d),i.a.getClient().sendMessage(d)}function p(){return[{type:"conversation",displayName:"Bachelor",address:"bachelor@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Feedback",address:"feedback@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Random",address:"random@conference.xmpp.vivaldi.net"},{type:"conversation",displayName:"Vivaldi Configs",address:"vivaldi_configs@conference.xmpp.vivaldi.net"}]}function b(e){return e.split("@")[0]}function g(e){const t=[...l.a.get(m.kChatFavorites)];o.a.set(m.kChatFavorites,[...t,e])}function N(e){const t=[...l.a.get(m.kChatFavorites)];t.splice(e,1),o.a.set(m.kChatFavorites,t)}function f(e){return{type:"title",name:Object(c.a)(e)}}function _(e){return{displayName:e.split("@")[0],type:"conversation",address:e}}function v(e){return e.split("/")[0]}function E(e){return"chat"===e.type?b(e.from):e.from.split("/")[1]}function C(e){const t=e.map(e=>e.author);if(t.length>=5)return"Many people are typing.";if(t.length<=4&&t.length>2){const e=t.map((e,t,a)=>4===a.length?t<=2?`${e},`:e:t<=1?`${e},`:e),a=e.filter(e=>e.includes(","));return e.splice(a.length,0,"and"),e.join(" ")+" are typing."}return 2===t.length?t.join(" and ")+" are typing.":1===t.length?t.join("")+" is typing.":void 0}function w(e){if("groupchat"===e.type&&E(e)===i.a.getClient().bareJid)return;const t=()=>{r.d.getIsPanelVisible("chat")||s.a.showContent("chat")},a="chat"===e.type,n=a?E(e):e.from.split("@")[0],o=a?e.body:`${E(e)}: ${e.body}`;l.a.get(m.kChatNotifications)&&Object(d.a)({title:n||"",body:o||"",icon:"resources/chat_notification_icon.png",requireInteraction:!1,silent:!l.a.get(m.kChatNotificationsSoundOn),onClick:t})}async function O(e,t){const a=Object(u.a)(t,{paging:{max:50,before:""}}),n=l.a.get(m.kChatConversationTimestamps).find(t=>t.name===e);let s;e.includes("conference")?s=await i.a.getClient().searchHistory(e,a):(a.with=e,s=await i.a.getClient().searchHistory(a));const r=await s.results.filter(e=>e.item.message.body).map(e=>{const{delay:t}=e.item.message;let a=!1;if(t&&t.timestamp&&n){const e=new Date(t.timestamp);a=n.timestamp>e}return{...e.item.message,read:a}}),{first:o="",last:c=""}=s.paging;return{messages:r,first:o,last:c}}},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(0),r=a.n(s),o=a(12),l=a(16);let c=r.a.createRef();const u=new class extends i.a{getActiveWebView(){return c.current&&c.current.webview}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};u.dispatchToken=o.a.register(e=>{switch(e.actionType){case l.a.WEBVIEW_CLEAR_IF_ACTIVE:c.current===e.component&&(c=r.a.createRef(),u.emitChange());break;case l.a.WEBVIEW_SET_ACTIVE:c=e.ref,u.emitChange()}}),t.a=u},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(29),r=a(12),o=a(276),l=a(302),c=a(260),u=a(216);let m;const d=new class extends i.a{getActiveMessage(){return m&&m.state.message}getActiveListEntry(){return m&&m.props.listEntry}getAttachments(){return m&&m.state.message?m.state.message.bodyParts?Object(c.b)(m.state.message.bodyParts).filter(e=>!e.inUse):m.state.raw?Object(u.d)(m.state.raw.mimeTree):[]:[]}getRaw(){return m&&m.state.raw}emitChange(e){this.emit("change",e)}isTrash(){return!(!m||!m.props.listEntry)&&Object(o.a)(m.props.listEntry.sources)}isJunk(){return!(!m||!m.props.listEntry)&&Object(l.a)(m.props.listEntry.sources)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};r.a.register(e=>{switch(e.actionType){case"MAIL_SET_ACTIVE_COMPONENT":m!==e.mailDetail&&(m=e.mailDetail,d.emitChange());break;case"MAIL_SET_ACTIVE_MESSAGE":m&&(m.setState({message:e.message}),d.emitChange());break;case"MAIL_CLEAR_IF_ACTIVE":m===e.mailDetail&&(m=void 0,d.emitChange());break;case"MAIL_INDEX_UPDATE":{r.a.waitFor([s.a.dispatchToken]);const{updates:t}=e;if(!m||!m.props.listEntry||!t.sleUpdates)return;const{searchListId:a}=m.props.listEntry;t.sleUpdates.some(e=>e.id===a)&&d.emitChange();break}case"MAIL_REFRESH_ACTIVE_MESSAGE":d.emitChange()}}),t.a=d},,,function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"l",(function(){return i})),a.d(t,"k",(function(){return s})),a.d(t,"n",(function(){return r})),a.d(t,"m",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return b})),a.d(t,"a",(function(){return g}));const n=1,i=.5,s=4,r=.25,o=.05,l=1,c=.2,u=5,m=.1,d=1,h=.5,p=2,b=.05,g=1},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(0),i=a(52),s=a(20),r=a.n(s),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\CommonComponents.jsx";function l({children:e,text:t,className:a,label:i,leadingText:s,highlight:l}){const c=l?t.split(l.regExp).reduce((e,t,a)=>a?e.concat([n.createElement("mark",{key:a,__source:{fileName:o,lineNumber:31,columnNumber:20}},l.matches[a-1])]).concat([t]):e.concat([t]),[]):t;return(n.createElement("div",{className:r()("setting-single",a,{"setting-single--LeadingText":s}),__source:{fileName:o,lineNumber:37,columnNumber:10}},n.createElement("label",{title:i,__source:{fileName:o,lineNumber:38,columnNumber:5}},e,n.createElement("span",{__source:{fileName:o,lineNumber:40,columnNumber:7}},c))))}function c({children:e,heading:t,className:a,filter:s}){return n.createElement(i.a,{filter:s,__source:{fileName:o,lineNumber:52,columnNumber:10}},n.createElement("div",{className:r()("setting-group",a),__source:{fileName:o,lineNumber:53,columnNumber:5}},t&&n.createElement("h3",{__source:{fileName:o,lineNumber:54,columnNumber:19}},t),e))}},,,,,function(e,t,a){"use strict";(function(e){const a=Array();const n={onCommand:function(t){e.nextTick(()=>{a.forEach(e=>{e.command===t&&e.callback(t)})})},hasListener:function(e){return a.filter(t=>t.command===e).length>0},addListener:function(e,t){-1===a.findIndex(a=>a.command===e&&a.callback===t)&&a.push({command:e,callback:t})},removeListener:function(e,t){const n=a.findIndex(a=>a.command===e&&a.callback===t);-1!==n&&a.splice(n,1)}};t.a=n}).call(this,a(82))},,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"h",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"b",(function(){return u}));const n="vivaldi/x-commanditem",i="vivaldi/x-commandfolder",s="vivaldi/x-commandmixed",r="vivaldi/x-menuitem",o="vivaldi/x-menudefaulttopfolder",l="vivaldi/x-menufolder",c="vivaldi/x-menumixed",u="vivaldi/x-bookmarkcontainer";function m(e){return e.replace(/(^|\+)(.)/gu,(e,t,a)=>t+a.toUpperCase())}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(17);const i={openInBackgroundTab:{inCurrent:!1,inBackground:!0,inNewWindow:!1,allowOverride:!1,incognito:!1}};function s(e){const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},a=t.ctrl,i=!t.shift&&!a&&!t.alt,s={inCurrent:!0,inBackground:!1,inNewWindow:!1,allowOverride:!1,incognito:!1};return t.shift&&a&&t.alt?(s.inNewWindow=!0,s.incognito=!0):t.shift&&a&&!t.alt?(s.inNewWindow=!0,s.incognito=n.a.isIncognito()):!t.shift||a||t.alt?t.shift||!a||t.alt?i&&1===e.button?(s.inCurrent=!1,s.inBackground=!0):i&&2===e.button?s.inCurrent=!1:i&&(s.allowOverride=!0):(s.inCurrent=!1,s.inBackground=!0):s.inCurrent=!1,s}},function(e,t,a){"use strict";a.r(t);var n=a(44),i=a(11),s=a(6),r=a(12),o=a(16),l=a(35),c=a(7),u=a(37),m=a(117),d=a(522),h=a(1);const p=function(e){n.default.isNamedMenuAvailable(e)&&c.a.menuContent.get(e,(t,a,n)=>{r.a.dispatch({actionType:o.a.COMMAND_SET_NAMED_MENU,name:e,content:n})})},b=new class{loadPromise(){const{version:e}=u.b;e!==s.a.get(h.kChainedCommandsVersion)&&(e=>{const{chains:t}=u.b,a=s.a.get(h.kChainedCommandsDeletedCommandList),n=s.a.get(h.kChainedCommandsCommandList),r=n.map(e=>e.key),o=t.filter(e=>!a.includes(e.key)&&!r.includes(e.key)),l=[...n,...o];i.a.set(h.kChainedCommandsCommandList,l),i.a.set(h.kChainedCommandsVersion,e)})(e);const t=s.a.get(h.kChainedCommandsCommandList);d.a.concat(t).forEach(e=>{e.readonly||l.a.addListener(e.name,b.commandChanged)});const a=d.a.concat(t).map(e=>e.name),n=l.a.getKeysSync(a),m=d.a.concat(t).map(e=>{const t=n[e.name];if(t)return{command:e.name,value:t}}).filter(Boolean);return r.a.dispatch({actionType:o.a.COMMAND_INITIALIZE,commands:m}),c.a.menuContent.onChanged.addListener(p),Promise.resolve()}requestNamedMenu(e){n.default.getIsInitialized()&&!n.default.isNamedMenuAvailable(e)&&c.a.menuContent.get(e,(t,a,n)=>{r.a.dispatch({actionType:o.a.COMMAND_SET_NAMED_MENU,name:e,content:n})})}restoreCommandShortcutKeys(){n.default.getUserEditableCommands().forEach(e=>{const t={shortcut:(l.a.getDefault(e.name)||{}).shortcut,gestures:e.gestures};l.a.set({[e.name]:t})})}restoreCommandGestures(){n.default.getUserEditableCommands().forEach(e=>{const t=l.a.getDefault(e.name);if(t){const a={shortcut:e.shortcut,gestures:t.gestures?t.gestures:null};l.a.set({[e.name]:a})}})}commandChanged(e,t,a){r.a.dispatch({actionType:o.a.COMMAND_UPDATE_COMMAND,commandKey:a,commandValue:t})}updateChainShortcut(e){r.a.dispatch({actionType:"COMMAND_UPDATE_SHORTCUT_CHAIN",info:e})}removeCommandConfig(e){r.a.dispatch({actionType:"COMMAND_REMOVE_CONFIG",commandKey:e}),l.a.removeListener(e,b.commandChanged)}executeActions(e,t){var a;const i=n.default.getCommands().find(t=>t.name===e);if(!i){const t=s.a.get(h.kChainedCommandsCommandList);for(let a=t.length-1;a>=0;a--)if(t[a].name===e){Object(m.b)(t[a].chain);break}return}const r=null===(a=i.keyword)||void 0===a?void 0:a.defaultValue;let o=t;var l,c;t||i.param||!r||(o=r),(l=i.action,c=i.param?[i.param]:[o],function(){l.apply(null,c)})()}};t.default=b},function(e,t,a){"use strict";var n=a(130),i=a(387),s=a(89),r=a(14),o=a(13),l=a(67),c=a(41),u=a(6),m=a(12),d=a(17),h=a(2),p=a(10),b=a(7),g=a(1),N=a(171),f=a(23);let _=!0;const v=function(){_=!0},E=function(){_=!1,C()};async function C(){const e=await new Promise(e=>b.a.notes.getTree(e));m.a.dispatch({actionType:"NOTES_INIT",notes:e})}function w(e,t){if(_)return;if(m.a.dispatch({actionType:"NOTES_ADD_ITEM",id:e,item:t}),!d.a.isActive())return;const a=u.a.get(g.kNotesCreationShowPanel),n=o.c.unsafeGetActivePage(),i=f.p.getDisplayUrl(n.url).startsWith("vivaldi://notes");!a||i?u.a.get(g.kNotesCreationNotify)&&!c.d.getIsPanelVisible("notes")&&!i&&Object(N.a)({title:Object(h.a)("New Note Created"),onClick:()=>l.a.showContent("notes",{setFocus:!0,selectId:e,reason:""})}):l.a.showContent("notes")}const O=function(e,t){_||m.a.dispatch({actionType:"NOTES_MOVE_ITEM",id:e,targetFolder:t.parentId,targetIndex:t.index})},y=function(e,t){_||m.a.dispatch({actionType:"NOTES_CHANGE_ITEM",id:e,changes:t})},S=function(e){_||m.a.dispatch({actionType:"NOTES_REMOVE_ITEM",id:e})},T={scale:1,width:0,height:0};function k({id:e,url:t,content:a}){if(!a)return Promise.reject();const n=s.b.getNodeById(e);if(!n)return Promise.reject();const i={attachments:[...n.attachments||[],{content:a}],...!n.url&&t?{url:t}:null};return new Promise(t=>{b.a.notes.update(e,i,t)})}function A(e){"Escape"===e.key&&x([])}function I(e,t){if("NotesCutIds"!==e||"string"!=typeof t)return;const a=t.length>0?t.split(","):[];a.length>0?window.addEventListener("keydown",A,!0):window.removeEventListener("keydown",A,!0),m.a.dispatch({actionType:"NOTES_SET_CUT_IDS",ids:a})}function D({clipboardData:e},t,a){e&&(e.setData("vivaldi/x-cut",a?"true":"false"),e.setData(s.c,JSON.stringify(t)),e.setData("text/plain",s.b.getDragData("text/plain",t)))}function M(e){return new Promise(t=>{b.a.notes.create(e,t)})}function P(e){return new Promise((t,a)=>{const n=new FileReader;n.onloadend=({target:e})=>{t(e.result)},n.onerror=()=>{n.abort(),a()},n.readAsDataURL(e)})}function x(e){b.a.utilities.setSharedData({key:"NotesCutIds",value:e.length>0?e.join():""})}async function L(e){const t=n.a.getActiveWebView();if(t)return k({id:e,url:["richtexteditor","markdowneditor"].includes(t.name)?"":t.src,content:await function(e,t=T){return new Promise((a,n)=>{e.getThumbnail(t,e=>{p.a.runtime.lastError&&n(p.a.runtime.lastError.message),a(e)})})}(t)})}t.a={loadPromise:async function(){await C(),_=!1,b.a.notes.onImportBegan.addListener(v),b.a.notes.onImportEnded.addListener(E),b.a.notes.onCreated.addListener(w),b.a.notes.onMoved.addListener(O),b.a.notes.onChanged.addListener(y),b.a.notes.onRemoved.addListener(S),b.a.utilities.onSharedDataUpdated.addListener(I),b.a.utilities.getSharedData({key:"NotesCutIds",value:""},e=>{e&&I("NotesCutIds",e)})},emptyTrash:function(){return new Promise((e,t)=>{b.a.notes.emptyTrash(a=>{!1===a&&(console.warn("Empty trash failed."),t("Empty trash failed.")),e()})})},addScreenshot:L,addAreaCapture:async function(e){const t=n.a.getActiveWebView(),a=!t||f.p.isInternalUrl(t.src),s=!t||a?void 0:t.src;try{return k({id:e,url:s,content:await i.a.captureAreaCommand("note")})}catch(e){}},addImageFile:async function(e,t){return k({id:e,content:await P(t)})},createNoteFromCapture:async function(e){const t=[{content:e}],a=o.c.unsafeGetActivePage().get("url"),n=await M({type:"note",attachments:t,url:a}),i=c.d.getPanelAvailable("notes");if(n)if(i){const e={selectId:n.id,setFocus:!0,reason:""};l.a.showContent("notes",e)}else{const e=f.p.internalUrl("notes",n.id);r.a.openURL(e,{inCurrent:!1})}},readFileAsDataURL:P,removeAttachment:function(e,t){const a=s.b.getNodeById(e);if(!a||!a.attachments)return Promise.resolve();const n=a.attachments.filter(e=>e.checksum!==t.checksum);return new Promise(t=>{b.a.notes.update(e,{attachments:n},()=>t())})},createNotesFromTreeNodes:function e(t,a,n,i){return Promise.all(t.map(async(t,r)=>{const o=void 0===n?void 0:n+r;if(t.separator)return void M({index:o,parentId:`${a}`,type:"separator"});const l=await M({parentId:`${a}`,index:o,type:s.b.isFolder(t)?"folder":"note",attachments:t.attachments,content:t.content,title:t.title,url:t.url});return t.children?await e(t.children,l.id,0,i):void 0})).then(()=>{})},createNote:async function(e,t=!0){const{content:a,url:n}=e,i=await M({type:"note",content:a,url:n});return n&&u.a.get(g.kNotesCreationAddScreenshot)&&t?L(i.id):i},cut:function(e,t){D(e,t,!0),x(t),e.stopPropagation(),e.preventDefault()},copy:function(e,t){D(e,t,!1),e.stopPropagation(),e.preventDefault()},setCutIds:x}},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(16),o=a(26),l=a(99),c=a(236);let u=Object(o.Map)();const m={};let d=new Map;const h={},p={},b=new class extends i.a{constructor(...e){var t,a,n;super(...e),t=this,a="emitChange",n=Object(c.default)(e=>{this.emit("change",e)},250),a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}getNavigationInfo(e){return m[e]}getSSLInfo(e){return d.get(e)}getBlockedPopupsById(e){return h[e]||Object(o.Set)()}getPermissionsById(e){return u.get(e,Object(o.Map)())}getblockedPageContents(e){return p[e]||Object(o.List)()}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};s.a.register(e=>{switch(e.actionType){case"NAVIGATION_SET_STATE":t=e.pageId,a=e.navigationState,m[t]=a,b.emit("change",{pageId:t,navigationState:a});break;case"PAGE_SET_SSL_STATE":!function(e,t){const a=d;d=Object(l.c)(d,a=>{const n=a.get(e);n?(n.state=t.state,n.issuer=t.issuer):"none"!==t.state&&a.set(e,{state:t.state,issuer:t.issuer})}),a!==d&&b.emitChange()}(e.pageId,e.info);break;case r.a.NAVIGATION_ADD_POPUP:!function(e,t){let a=h[e]||Object(o.Set)();a=a.add(t),h[e]=a,b.emitChange()}(e.pageId,e.popupEvent);break;case r.a.NAVIGATION_REMOVE_POPUP:!function(e,t){const a=h[e];a&&(h[e]=a.filter(e=>e.targetUrl!==t),b.emitChange())}(e.pageId,e.targetUrl);break;case r.a.NAVIGATION_RESET_BLOCKED_POPUPS:!function(e){h[e]&&(h[e]=Object(o.Set)(),b.emitChange())}(e.pageId);break;case r.a.NAVIGATION_SET_PERMISSION:!function(e,t,a,n,i){switch(a){case"audiocapture":a="microphone";break;case"videocapture":a="camera"}let s=u.get(e,Object(o.Map)()),r=s.get(t,Object(o.Map)());const l={requestEvent:n,state:i};r=r.set(a,l),s=s.set(t,r),u=u.set(e,s),b.emitChange("setPermissionInfo")}(e.pageId,e.origin,e.permission,e.requestEvent,e.state);break;case r.a.NAVIGATION_RESET_PERMISSIONS:!function(e){u=u.delete(e),b.emitChange()}(e.pageId);break;case r.a.NAVIGATION_SET_BLOCKED_CONTENT:!function(e,t){let a=p[e]||Object(o.List)();a=a.push(t),p[e]=a,b.emitChange()}(e.pageId,e.content_type);break;case r.a.NAVIGATION_RESET_BLOCKED_CONTENT:!function(e){p[e]=Object(o.List)(),b.emitChange()}(e.pageId)}var t,a}),t.a=b},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a(11),i=a(6),s=a(1);const r=36,o=(e,t)=>{const a={...i.a.get(s.kAppearanceTreeColumnsEntries),[t]:e};n.a.set(s.kAppearanceTreeColumnsEntries,a)},l=()=>i.a.get(s.kAppearanceTreeColumnsEntries),c=e=>e.filter(e=>e.visible).reduce((e,t)=>(e.push({id:t.value,width:t.width||100,key:t.key}),e),[]),u=e=>e.map(e=>e.key?`minmax(${Math.min(e.width/2,100)}px, 1fr)`:`minmax(${r}px, ${e.width}px)`).join(" ")},function(e,t,a){"use strict";var n=a(0),i=a(35),s="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertVivaldiSettings.jsx";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e,t){class a extends n.Component{constructor(...e){super(...e),o(this,"state",{vivaldiSettings:i.a.getKeysSync(t)}),o(this,"settingsChangeHandler",e=>{this.setState(t=>({vivaldiSettings:{...t.vivaldiSettings,...e}}))})}componentDidMount(){i.a.addMultiListener(t,this.settingsChangeHandler)}componentWillUnmount(){i.a.removeMultiListener(t,this.settingsChangeHandler)}render(){const{forwardedRef:t,...a}=this.props;return(n.createElement(e,r({},a,{ref:t,vivaldiSettings:this.state.vivaldiSettings,__source:{fileName:s,lineNumber:54,columnNumber:14}})))}}return(n.forwardRef((e,t)=>n.createElement(a,r({},e,{forwardedRef:t,__source:{fileName:s,lineNumber:63,columnNumber:5}}))))}},function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var n=a(143),i=a.n(n),s=a(12),r=a(16);function o(e){return e.hasToken?"loggedIn":"invalid_credentials"===e.lastTokenFetchError.errorType?"loginFailed":0!==e.tokenRequestTime?"loggingIn":e.accountInfo.accountId?"credentialsMissing":"loggedOut"}class l extends i.a{getInitialState(){return{accountInfo:{accountId:"",username:"",pictureUrl:""},hasSavedPassword:!1,hasToken:!1,accessToken:"",hasEncryptedToken:!1,tokenRequestTime:0,nextTokenRequestTime:0,lastTokenFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},lastAccountInfoFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},isReady:!1}}reduce(e,t){switch(t.actionType){case r.a.VIVALDI_ACCOUNT_STATE_UPDATED:return t.state}return e}}t.a=new l(s.a)},,function(e,t,a){"use strict";t.a={LINK:"link",TYPED:"typed",AUTO_BOOKMARK:"auto_bookmark",AUTO_SUBFRAME:"auto_subframe",MANUAL_SUBFRAME:"manual_subframe",GENERATED:"generated",AUTO_TOPLEVEL:"auto_toplevel",FORM_SUBMIT:"form_submit",RELOAD:"reload",KEYWORD:"keyword",KEYWORD_GENERATED:"keyword_generated"}},function(e,t,a){"use strict";(function(e){var n=a(11),i=a(6),s=a(65),r=a(12),o=a(16),l=a(17),c=a(2),u=a(10),m=a(540),d=a(7),h=a(259),p=a(1);function b(e){return new Promise(t=>u.a.windows.remove(e,t))}function g(e,t){r.a.dispatch({actionType:"WINDOW_FULL_SCREEN",windowId:e,fullScreen:t})}function N(e,t){r.a.dispatch({actionType:"WINDOW_MAXIMIZED",windowId:e,maximized:t})}function f(e,t){r.a.dispatch({actionType:"WINDOW_MINIMIZED",windowId:e,minimized:t})}function _(e,t){r.a.dispatch({actionType:"WINDOW_ACTIVATED",windowId:e,activated:t})}function v(e,t,a,n){l.a.isMinimalUI(e)||r.a.dispatch({windowId:e,actionType:o.a.WINDOW_UPDATE_FROM_PREFS})}const E=new class{constructor(){d.a.windowPrivate.onFullscreen.addListener(g),d.a.windowPrivate.onMaximized.addListener(N),d.a.windowPrivate.onMinimized.addListener(f),d.a.windowPrivate.onActivated.addListener(_)}minimize(e){d.a.windowPrivate.setState(e,"minimized")}minimizeAll(){u.a.runtime.sendMessage({dispatchAction:h.b})}maximize(e){d.a.windowPrivate.setState(e,"maximized")}restore(e){d.a.windowPrivate.setState(e,"normal")}setFullscreen(e){d.a.windowPrivate.setState(e,"fullscreen")}toggleFullscreen(e){if(l.a.isFullscreen(e)){let t=l.a.getRestoreState(e);t="fullscreen"===t?"normal":t,d.a.windowPrivate.setState(e,t)}else E.setFullscreen(e)}restoreStateAfterHTMLFullscreen(e){const t=l.a.getRestoreState(e);d.a.windowPrivate.setState(e,t)}async close(e){if(e!==window.vivaldiWindowId)return b(e);await Promise.all([...l.a.getState().keys()].map(e=>b(e)))}onHTML5FullScreen(e,t){e?E.setFullscreen(t):E.restoreStateAfterHTMLFullscreen(t),r.a.dispatch({actionType:o.a.WINDOW_HTML5_FULL_SCREEN,windowId:t,html5FullScreen:e})}toggleMinimalUI(e){r.a.dispatch({actionType:o.a.WINDOW_MINIMAL_UI,windowId:e,minimalUI:!l.a.isMinimalUI(e)})}toggleBookmarksBar(e){l.a.isMinimalUI(e)?r.a.dispatch({windowId:e,actionType:o.a.WINDOW_TOGGLE_BOOKMARKS_BAR}):l.a.isGuestSession(e)||n.a.toggle(p.kBookmarksBarVisible,!0,!1)}toggleAddressBar(e){l.a.isMinimalUI(e)?r.a.dispatch({windowId:e,actionType:o.a.WINDOW_TOGGLE_ADDRESS_BAR}):n.a.toggle(p.kAddressBarVisible,!0,!1)}toggleTabs(e){l.a.isMinimalUI(e)?r.a.dispatch({windowId:e,actionType:o.a.WINDOW_TOGGLE_TABS}):n.a.toggle(p.kTabsVisible,!0,!1)}togglePanelToggle(e){l.a.isMinimalUI(e)?r.a.dispatch({windowId:e,actionType:o.a.WINDOW_TOGGLE_PANEL_TOGGLE}):n.a.toggle(p.kPanelsShowToggle,!0,!1)}toggleStatusBar(t){l.a.isMinimalUI(t)?r.a.dispatch({windowId:t,actionType:o.a.WINDOW_TOGGLE_STATUS_BAR}):(n.a.toggle(p.kStatusBarDisplay,"on",i.a.get(p.kStatusBarMinimized)),e.nextTick(()=>{"overlay"===i.a.get(p.kStatusBarDisplay)&&s.a.setStatus(Object(c.a)("Status Info set to Overlay"),2e3)}))}__initForTests(){r.a.dispatch({actionType:"WINDOW_SET_STATE",windowState:{active:!0,fullScreen:!1,fullscreenMenubarShown:!1,guest:!1,html5FullScreen:!1,incognito:!1,maximized:!0,minimized:!1,nativeDecorations:!1,minimalUI:!1,restoreState:"normal",type:"normal",visibleUI:{addressBar:!1,bookmarksBar:!1,panelToggle:!1,tabs:!0,statusBar:"on"}},windowId:42})}loadPromise(){return new Promise(e=>{return t=t=>{if("number"!=typeof t.id)throw new Error("WindowActions: Window does not have an id.");const a=t.id,n=Object(m.a)(t.extData);window.vivaldiWindowId=a;const s=n.visibleUI?n.visibleUI:l.a.getUIFromPrefs(),c=n.windowType?n.windowType:"normal",u=n.fullScreen&&i.a.get(p.kStartupRememberFullScreen);u&&d.a.windowPrivate.setState(a,"fullscreen"),d.a.runtimePrivate.isGuestSession(a,l=>{const m={active:t.focused,fullScreen:u,fullscreenMenubarShown:!1,guest:l,html5FullScreen:!1,incognito:t.incognito&&!l,maximized:"maximized"===t.state,minimalUI:n.minimalUI,minimized:!1,nativeDecorations:i.a.get(p.kWindowsUseNativeDecoration),type:c,visibleUI:s,restoreState:"maximized"===t.state?"maximized":"normal"};r.a.dispatch({actionType:"WINDOW_SET_STATE",windowState:m,windowId:a}),"object"==typeof n.tiles&&r.a.dispatch({actionType:o.a.TILES_INITIALIZED,tilesState:n.tiles}),i.a.addListener([p.kAddressBarVisible,p.kBookmarksBarVisible,p.kPanelsShowToggle,p.kStatusBarDisplay,p.kTabsVisible],v.bind(null,window.vivaldiWindowId)),e()})},void d.a.windowPrivate.getCurrentId(e=>{u.a.windows.get(e,t)});var t})}};t.a=E}).call(this,a(82))},function(e,t,a){"use strict";var n=a(44),i=a(31),s=a(86),r=a(17),o=a(4);const l=new Map;function c(e,t){const a=r.a.getId(),n=s.a.getDefault(e);if(t&&l.has(a)){return s.a.getById(l.get(a))||n}return n}t.a={settingsState:{linkurl:"",linktitle:"",pageurl:"",pagetitle:"",srcurl:"",selection:"",printableselection:"",selectionurl:"",keywordurl:"",isdevtools:!1,iseditable:!1,isimage:!1,isframe:!1,iswebpanel:!1,ismailto:!1,support:{copy:!1,audio:!1,canvas:!1,editoptions:!1,emoji:!1,extensions:!1,pictureinpicture:!1,password:!1,passwordgeneration:!1,passwordshowall:!1,paste:!1,plugin:!1,qrcode:!1,sendlinktodevices:!1,sendpagetodevices:!1,video:!1},textfield:"document"},getLabelWithParameter:function(e,t,a){switch(e.action){case"DOCUMENT_LOOK_UP":if(e.title){const n=e.title;return delete e.title,{...a?i.a.makeLabelPair(n):i.a.makeLabelPair(n.replace("$1",t))}}return{...a?Object(o.a)("Look Up “$1”"):Object(o.a)("Look Up “$1”",[t])};case"DOCUMENT_GOTO_URL":if(e.title){const n=e.title;return delete e.title,{...a?i.a.makeLabelPair(n):i.a.makeLabelPair(n.replace("$1",t))}}return{...a?Object(o.a)("Go to “$1”"):Object(o.a)("Go to “$1”",[t])};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const n="DOCUMENT_SEARCH_LAST_USED"===e.action,s=c(r.a.isIncognito(),n);if(e.title){const n=e.title;return delete e.title,{...a?i.a.makeLabelPair(n):i.a.makeLabelPair(n.replace("$1",s.name).replace("$2",t))}}return a?n?{...Object(o.a)("Search $1 for “$2” (With Last Used Engine)")}:{...Object(o.a)("Search $1 for “$2”")}:{...Object(o.a)("Search $1 for “$2”",[s.name,t])}}default:return i.a.makeLabelPair("")}},setSearchEngine:function(e){const t=r.a.getId();-1!==t&&l.set(t,e.id)},getSearchEngine:c,getShortcuts:function(e){return n.default.getMenuItem({id:"",type:"command",action:e},!0).shortcuts||[]}}},,function(e,t,a){"use strict";var n=a(200),i=a(14),s=a(262),r=a(11),o=a(6),l=a(125),c=a.n(l),u=a(224),m=a(7),d=a(1);const h={upgrade:function(){const e=o.a.get(d.kPanelsWebVersion);""===e&&h._upgrade(""),m.a.utilities.getVersion().then(({vivaldiVersion:t})=>{t&&t!==e&&h._upgrade(t)})},_upgrade:function(e){const t=function(e){return void 0!==e.activeUrl&&void 0!==e.available&&void 0!==e.faviconUrl&&void 0!==e.faviconUrlValid&&void 0!==e.id&&void 0!==e.mobileMode&&"bundle"===e.origin&&void 0!==e.resizable&&void 0!==e.title&&void 0!==e.url&&void 0!==e.width};if(""===e){const e=o.a.get(d.kPanelsWebList).map(e=>({activeUrl:e.activeUrl||e.contentUrl||"",available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:"user",resizable:Boolean(e.resizable),title:e.title,url:e.contentUrl,width:e.width}));Object(u.a)(o.a.getDefault(d.kPanelsWebItems)).forEach(a=>{t(a)?e.push(a):console.warn("Bundled web panel has wrong format",a)}),r.a.set(d.kPanelsWebItems,e);const a=o.a.get(d.kPanelsWebRemovedList).map(e=>({activeUrl:e.activeUrl||e.contentUrl||"",available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:"user",resizable:Boolean(e.resizable),title:e.title,url:e.contentUrl,width:e.width}));r.a.set(d.kPanelsWebRemovedItems,a)}else{const a=Object(u.a)(o.a.get(d.kPanelsWebModified)),n=Object(u.a)(o.a.get(d.kPanelsWebItems));let i=!1;o.a.getDefault(d.kPanelsWebItems).forEach(e=>{if(t(e)){const t=n.findIndex(t=>t.id===e.id);-1!==t||a.includes(e.id)?-1===t||a.includes(e.id)||n[t].mobileMode===e.mobileMode&&n[t].url===e.url||(n[t].mobileMode=e.mobileMode,n[t].url=e.url,i=!0):(n.push({activeUrl:e.activeUrl||e.url,available:e.available,faviconUrl:e.faviconUrl,faviconUrlValid:e.faviconUrlValid,id:e.id,mobileMode:e.mobileMode,origin:e.origin,resizable:e.resizable,title:e.title,url:e.url,width:e.width}),i=!0)}else console.warn("Bundled web panel has wrong format",e)});const s=o.a.getDefault(d.kPanelsWebItems);for(let e=n.length-1;e>=0;e--){const t=n[e];if("bundle"===t.origin&&!a.includes(t.id)){-1===s.findIndex(e=>e.id===t.id)&&(n.splice(e,1),i=!0)}}for(let e=a.length-1;e>=0;e--){const t=a[e];let r=n.findIndex(e=>e.id===t);-1===r&&(r=s.findIndex(e=>e.id===t),-1===r&&(a.splice(e,1),i=!0))}r.a.set(d.kPanelsWebVersion,e),i&&(r.a.set(d.kPanelsWebModified,a),r.a.set(d.kPanelsWebItems,n))}},addByUrl:function(e){h.addByUrls([e],-1)},addByUrls:function(e,t){const a=e.map(e=>({activeUrl:e,available:!0,faviconUrl:"",faviconUrlValid:!1,id:c()(),mobileMode:!0,origin:"user",resizable:!1,title:"",url:e,width:-1}));h.addPanels(a,t)},addPanels:function(e,t){const a=o.a.get(d.kPanelsWebItems);e.forEach(e=>{-1===t||t>=a.length?a.push(e):a.splice(t,0,e),-1!==t&&t++}),r.a.set(d.kPanelsWebItems,a)},removeById:function(e){const t=o.a.get(d.kPanelsWebItems);if(t.length>0){s.a.destroyPeriodicAlarm(e);const a=t.filter(t=>t.id===e)[0],n=t.filter(t=>t.id!==e);if(r.a.set(d.kPanelsWebItems,n),a){const t=o.a.get(d.kPanelsWebRemovedItems).slice();if(t.push(a),r.a.set(d.kPanelsWebRemovedItems,t),"bundle"===a.origin){const t=o.a.get(d.kPanelsWebModified).slice();t.includes(e)||(t.push(e),r.a.set(d.kPanelsWebModified,t))}}}},setMobileMode:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.mobileMode=t),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},setAvailable:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.available=t),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},setTitle:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.title=t),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},setActiveUrl:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.activeUrl=t),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},setUrl:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.url=t,s.activeUrl=t),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},setFaviconUrl:function(e,t){const a=o.a.get(d.kPanelsWebItems);if(a.length>0){const n=[];for(let i=0;i<a.length;i++){const s=a[i];s.id===e&&(s.faviconUrl=t,s.faviconUrlValid=!0),n.push(s)}r.a.set(d.kPanelsWebItems,n)}},recoverWebPanel:function(e){const t=o.a.get(d.kPanelsWebRemovedItems);if(t.length>0&&e<t.length){const a=t[e];if("bundle"===a.origin){const e=o.a.get(d.kPanelsWebModified).slice(),t=e.findIndex(e=>e===a.id);-1!==t&&(e.splice(t,1),r.a.set(d.kPanelsWebModified,e))}h.addPanels([a],-1);const n=t.slice();n.splice(e,1),r.a.set(d.kPanelsWebRemovedItems,n)}},emptyTrash:function(){r.a.set(d.kPanelsWebRemovedList,[]),r.a.set(d.kPanelsWebRemovedItems,[])},copyWebPanelAdress:function(e){const t=this.getUrlById(e);t.length>0&&n.a.copyUrlToClipboard(t)},getUrlById:function(e){const t=o.a.get(d.kPanelsWebItems).filter(t=>e===t.id).map(e=>e.activeUrl);return t.length>0?t[0]:""},openInTab:function(e,t,a){const n=this.getUrlById(e);n.length>0&&i.a.openURL(n,{inCurrent:t,inBackground:a})},openInWindow:function(e,t){const a=this.getUrlById(e);a.length>0&&i.a.openURL(a,{inNewWindow:!0,incognito:t})},getIndexByShortcut:function(e){const t="webpanel".length,a=e.substr(0,t),n=e.substr(t).trim();return"webpanel"===a&&n>="1"&&n<="9"?parseInt(n):-1},setUIContent:function(e){const t=o.a.get(d.kPanelsWebToolbar);t.showToolbar=e.showToolbar,t.allControls=e.allControls,r.a.set(d.kPanelsWebToolbar,t)},getFaviconPrefix:function(){return"chrome://favicon/"}};t.a=h},function(e,t,a){"use strict";a(53);var n=a(143),i=a.n(n),s=a(12),r=a(26);class o extends i.a{getInitialState(){return new r.Map}reduce(e,t){switch(t.actionType){case"PAGE_SET_MEDIASTATE":const{tabId:a,mediastate:n}=t;return function(e,t,a){const n=e.get(a);if(n){const i=n.intersect(t).union(t);return e.set(a,i)}return t.length>0?e.set(a,Object(r.Set)(t)):e}(e,n,a);case"PAGE_CLOSE":return function(e,t){let a=e;return t.forEach(e=>{a.has(e.id)&&(a=a.remove(e.id))}),a}(e,t.pages);default:return e}}hasMediaState(e,t){const a=this.getState().get(e);return!!a&&a.has(t)}}t.a=new o(s.a)},,,,,function(e,t,a){"use strict";var n=a(255),i=a(127),s=a(47),r=a(12),o=a(16),l=a(7);const c=new class{initializeContactStore(e){l.a.contacts.getAll(t=>{r.a.dispatch({actionType:o.a.CONTACT_INITIALIZE,contacts:t,newContact:e})})}saveContact(e){r.a.dispatch({actionType:o.a.CONTACT_SAVE_CONTACT,contact:e})}addGeneratedContacts(e){r.a.dispatch({actionType:o.a.CONTACT_ADD_CONTACTS,contacts:e})}selectContact(e,t=!1){r.a.dispatch({actionType:o.a.CONTACT_SELECT_CONTACT,contact:e,focusContactView:t})}deleteContactsByIds(e){return Promise.all(e.map(e=>new Promise(t=>{"number"==typeof e?t():l.a.contacts.delete(e,()=>{t()})}))).then(()=>{r.a.dispatch({actionType:o.a.CONTACT_DELETE_CONTACTS,ids:e})})}newEmptyContact(){return new Promise(e=>{l.a.contacts.create({},t=>{const a=Object(n.a)(t);return c.initializeContactStore(a),e(a)})})}newContactFromMailAddress(e,t){l.a.contacts.create({name:e.name||""},a=>l.a.contacts.addEmailAddress({contactId:a.id,emailAddress:e.address},a=>{const i=Object(n.a)(a);c.initializeContactStore(i),s.a.addContactFilters([e],t)}))}putTrustedEmailAddress(e){let t=!1;i.a.getAsArray().forEach(a=>a.emailAddresses.forEach(n=>{e.address===n.emailAddress&&(t=!0,c.update(a.id,{trusted:!0}))})),!1===t&&l.a.contacts.create({name:e.name||"",generatedFromSentMail:!0,trusted:!0},t=>l.a.contacts.addEmailAddress({contactId:t.id,emailAddress:e.address},e=>c.addGeneratedContacts([e])))}update(e,t){Object.keys(t).length>0&&l.a.contacts.update(e,t,e=>c.saveContact(Object(n.a)(e)))}updatePropertyItem(e){l.a.contacts.updatePropertyItem(e,e=>c.saveContact(Object(n.a)(e)))}updateEmailAddress(e,t){l.a.contacts.updateEmailAddress(e,t,e=>c.saveContact(Object(n.a)(e)))}addPropertyItem(e){l.a.contacts.addPropertyItem(e,e=>c.saveContact(Object(n.a)(e)))}removePropertyItem(e){l.a.contacts.removePropertyItem(e,e=>c.saveContact(Object(n.a)(e)))}addEmailAddress(e){l.a.contacts.addEmailAddress(e,e=>c.saveContact(Object(n.a)(e)))}removeEmailAddress(e){l.a.contacts.removeEmailAddress(e,e=>c.saveContact(Object(n.a)(e)))}addIfNotAddressExists(e,t=!1){l.a.contacts.getAll(a=>{const n=new Set;a.forEach(e=>e.emailAddresses.forEach(e=>{e.emailAddress&&n.add(e.emailAddress.toLowerCase())}));const i=[];e.forEach(e=>{n.has(e.address.toLowerCase())||(l.a.contacts.create({name:e.name||"",generatedFromSentMail:!0},t=>{l.a.contacts.addEmailAddress({contactId:t.id,emailAddress:e.address},e=>c.addGeneratedContacts([e]))}),i.push(e))}),s.a.addContactFilters(i,t)})}};t.a=c},function(e,t,a){"use strict";var n=a(44),i=a(31),s=a(159),r=a(2),o=a(4);t.a={actions:function(){return["DOCUMENT_CONTAINER_DEVELOPER_TOOLS","DOCUMENT_VALIDATE_URL","DOCUMENT_VIEW_SOURCE","DOCUMENT_VIEW_FRAME_SOURCE","DOCUMENT_RELOAD_FRAME","DOCUMENT_INSPECT"]},options:function(e,t){const a=void 0===t,l=t||s.a.settingsState,c={...i.a.commandItem};switch(e.action){case"DOCUMENT_CONTAINER_DEVELOPER_TOOLS":return c.settingsLabel=Object(r.a)("[Developer Tools]"),c.type="container",{...c,...Object(o.a)("Developer Tools")};case"DOCUMENT_VALIDATE_URL":return{...c,...Object(o.a)("Validate")};case"DOCUMENT_VIEW_SOURCE":{const e=s.a.getShortcuts("COMMAND_TAB_VIEW_PAGE_SOURCE");return{...c,shortcuts:l.iswebpanel?[]:e,...l.iswebpanel?Object(o.a)("View Panel Source"):Object(o.a)("View Page Source")}}case"DOCUMENT_VIEW_FRAME_SOURCE":return{...c,...Object(o.a)("View Frame Source")};case"DOCUMENT_RELOAD_FRAME":return{...c,...Object(o.a)("Reload Frame")};case"DOCUMENT_INSPECT":{const e=s.a.getShortcuts("COMMAND_DEVELOPER_TOOLS");return{...c,shortcuts:l.iswebpanel?[]:e,...Object(o.a)("Inspect")}}default:return n.default.getMenuItem(e,a)}}}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));function n(e){const t=new Notification(e.title,{body:e.body,icon:e.icon?e.icon:"/resources/icon_notifications.png",silent:Boolean(e.silent),requireInteraction:Boolean(e.requireInteraction)});t.onclick=()=>{e.onClick&&e.onClick(),t.close()},e.requireInteraction||setTimeout(()=>t.close(),e.timeout||5e3)}},,function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return w}));var n=a(45),i=a.n(n),s=a(6),r=a(112),o=a.n(r),l=a(1);const c=.4,u=i()("#fff"),m=i()("#000"),d=i()("#06a700"),h=i()("#efaf00"),p=i()("#c64539");function b(e,t,a){return i.a.deltaE(e,t)>=a}function g(e,t,a=1,n=!1){const r=parseFloat(s.a.get(l.kThemeContrast))*a;return b(e,t,r)?e:e.luminance()>t.luminance()?function(e,t,a,n=!1){do{if((e=e.brighten(.1)).num()===u.num()){if(!n)return u;do{if((e=e.darken(.1)).num()===m.num())return m}while(!b(e,t,a))}}while(!b(e,t,a));return e}(e,t,r,n):function(e,t,a,n=!1){let s=i()(e.hex());do{if(s=s.darken(.1),s.num()===m.num()){if(!n)return m;let s=i()(e.hex());do{if(s=s.brighten(.1),s.num()===u.num())return u}while(!b(s,t,a));return s}}while(!b(s,t,a));return s}(e,t,r,n)}function N(e,t){const a=e.luminance()>c?e.brighten(.75):e.darken(.75),n=i.a.mix(e,t,.1),s=i.a.mix(e,t,.2),r=i.a.mix(e,t,.4);return{colorFg:e,colorFgAlpha:e.alpha(.1),colorFgIntense:g(a,t,4),colorFgFaded:g(n,t,4),colorFgFadedMore:g(s,t,4),colorFgFadedMost:g(r,t,4)}}function f(e,t){const a=e.luminance()>c,n=e.darken(.15),r=e.darken(.3),o=e.brighten(.1),m=e.brighten(.5),d=e.brighten(.2),h=a?e.brighten(.3):e.darken(.3),p=a?e.brighten(.5):e.darken(.5),b=a?e.darken(.1):e.brighten(.1),N=a?e.darken(.4):e.brighten(.4),f=a?e.darken(.3):e.brighten(.3),_=a?i.a.mix(u,e,.4).alpha(.95):p.darken(.1).alpha(.92);return{colorBg:e,colorBgAlpha:e.alpha(.9),colorBgAlphaHeavy:e.alpha(.65),colorBgAlphaHeavier:e.alpha(.25),colorBgAlphaBlur:e.alpha(s.a.get(l.kThemeTransparency)),colorBgDark:g(n,t,1.5),colorBgDarker:g(r,t,1.5),colorBgLight:g(o,t,1.5),colorBgLighter:g(m,t,1.5),colorBgLightIntense:g(d,t,1.5),colorBgIntense:g(h,t,1.5),colorBgIntenser:g(p,t,1.5),colorBgIntserAlpha:_,colorBgInverse:g(b,t,1.5),colorBgInverser:g(N,t,1.5),colorBgFaded:g(f,t,1.5),backgroundBlur:s.a.get(l.kThemeBlurEnable)?"blur(10px)":"unset"}}function _(e,t){const a=e.darken(.5),n=e.luminance()>c?m:u;let s=i.a.mix(t.set("hsl.l",e.get("hsl.l")),t,.8);return s=g(s,t,.3),{colorHighlightBg:e,colorHighlightBgUnfocused:s,colorHighlightBgAlpha:e.alpha(.1),colorHighlightBgDark:g(a,t,1.2),colorHighlightFg:n,colorHighlightFgAlpha:n.alpha(.5),colorHighlightFgAlphaHeavy:n.alpha(.25)}}function v(e,t){const a=e.luminance()>c,n=a?m:u,s=i.a.mix(n,e,.4),r=e.darken(.4),o=e.darken(1),l=a?e.brighten(.3).desaturate(1):e.darken(.3).desaturate(1),d=e.brighten(.5),h=e.brighten(1.2),p=g(e,e,2,!0),b=p.darken(.25);return{colorAccentBg:e,colorAccentBgAlpha:h.alpha(.4),colorAccentBgAlphaHeavy:h.alpha(.25),colorAccentBgDark:r,colorAccentBgDarker:o,colorAccentBgFaded:l,colorAccentBgFadedMore:d,colorAccentBgFadedMost:h,colorAccentBorder:p,colorAccentBorderDark:b,colorAccentFg:n,colorAccentFgFaded:s,colorAccentFgAlpha:n.alpha(.25)}}function E(e){const t=.003*s.a.get(l.kThemeContrast),a=e.luminance()<t?e.brighten(1):e.darken(.5),n=g(a,e,2),r=n.luminance()>e.luminance(),o=e.luminance()<=c?i.a.mix(n,e,.35):i.a.mix(n,e,.7),u=r?n.brighten(.4):n.darken(.4),m=g(a,e,1);return{colorBorder:n,colorBorderDisabled:g(o,e,1),colorBorderSubtle:i.a.mix(m,e,.25),colorBorderIntense:g(u,e,2.5)}}function C(e){const t=g(d,e,4),a=t.alpha(.1),n=t.luminance()>c?m:u,i=g(h,e,4),s=i.alpha(.1),r=i.luminance()>c?m:u,o=g(p,e,4),l=o.alpha(.1),b=o.luminance()>c?m:u;return{colorSuccessBg:t,colorSuccessBgAlpha:a,colorSuccessFg:n,colorWarningBg:i,colorWarningBgAlpha:s,colorWarningFg:r,colorErrorBg:o,colorErrorBgAlpha:l,colorErrorFg:b}}const w=o()(2)((e,t)=>{const a={};let n;try{n=_(i()(e),i()(t))}catch(e){return a}return Object.keys(n).forEach(e=>{a[`--${e}`]=n[e].toString()}),a}),O={all:function(e,t,a,n){return e=g(e,t,4),t=g(t,e,1.5),a=g(a,t,1.2),n=g(n,t,1.2,!0),{...N(e,t),...f(t,e),..._(a,t),...v(n),...E(t),...C(t)}},accentOnly:function(e,t,a){return t=g(t,a,4),a=g(a,t,1.5),v(e=g(e,a,1.2))},fgBgHighlight:function(e,t,a){return e=g(e,t,4),t=g(t,e,1.5),a=g(a,t,1.2),{...f(t,e),...N(e,t),..._(a,t)}}};t.d=O},function(e,t,a){"use strict";var n=a(518),i=a(296),s=a(57),r=a.n(s),o=a(6),l=function(e,t){t.define({element:"kind",fields:{type:n.a.attribute("type"),value:n.a.text()},namespace:"vivaldi:legend",path:"message.kind"})},c=function(e,t){t.define({element:"foo",fields:{type:n.a.attribute("type"),value:n.a.text()},namespace:"http://example.com/p/foo",path:"message.mystanza"}),t.define({path:"client.bareJid"}),e.bareJid=e.config.jid.split("@")[0],e.sendMyStanza=(t,a)=>e.sendMessage({to:t,from:e.config.jid,body:"Foo",mystanza:{type:"bar",value:a}}),e.on("message",t=>{t.mystanza&&e.emit("mystanza",t)})},u=a(129),m=a(1);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let h;const p=new class extends r.a{constructor(...e){super(...e),d(this,"createClient",(e,t,a="https://xmpp.vivaldi.net:5443/bosh",s="wss://xmpp.vivaldi.net:5443/ws")=>{h=n.b({jid:e,password:t,resource:"legend",transports:{websocket:s,bosh:a}}),h.use(c),h.use(l),h.on("available",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"available")}),h.on("auth:failed",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"auth:failed")}),h.on("auth:success",e=>{i.a.loggingIn(),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"auth:success")}),h.on("chat:state",e=>{if(Object(u.g)(e)!==h.bareJid){const t={type:e.chatState,typing:e};this.emitChange(t)}"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"chat:state")}),h.on("disconnected",e=>{i.a.disconnected(),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"disconnected")}),h.on("connected",e=>{i.a.connected(),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"connected")}),h.on("raw:outgoing",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e)}),h.on("session:started",async()=>{await h.enableCarbons(),h.sendPresence(),i.a.init(),Object(u.h)().forEach(e=>{e.address&&h.joinRoom(e.address,h.bareJid)}),"off"!==o.a.get(m.kChatDebugOutput)&&console.log("session started event")}),h.on("session:end",()=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log("Chat: Got ended")}),h.on("muc:join",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"joined")}),h.on("muc:available",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"available")}),h.on("muc:declined",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"declined")}),h.on("muc:*",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"everything muc")}),h.on("muc:destroyed",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"destroyed")}),h.on("muc:error",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"error")}),h.on("muc:failed",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"failed")}),h.on("muc:invite",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"invite")}),h.on("muc:leave",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"leave")}),h.on("muc:other",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"other")}),h.on("muc:topic",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"muc:topic")}),h.on("raw:incoming",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"raw:incoming")}),h.on("muc:unavailable",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"unavailable")}),h.on("marker:acknowledged",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"ackMsg")}),h.on("marker:displayed",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"disMsg")}),h.on("marker:received",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"recMsg")}),h.on("chat",e=>{i.a.receivedMessage(e,!0),Object(u.b)(e),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"chat")}),h.on("groupchat",e=>{i.a.receivedMessage(e,!0),Object(u.b)(e),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"groupchat")}),h.on("presence",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"presence")}),h.on("subscribe",e=>{h.acceptSubscription(e.from),"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e,"subscribe")}),h.on("sm",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"sm")}),h.on("message:error",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.error(e,"message:error")}),h.on("stream:management:ack",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"stream:management:ack")}),h.on("stanza:acked",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"stanza:acked")}),h.on("stanza:failed",()=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.error("Message not sent")}),h.on("stream:data",e=>{"verbose"===o.a.get(m.kChatDebugOutput)&&console.log(e,"stream:data")}),h.on("unavailable",e=>{"off"!==o.a.get(m.kChatDebugOutput)&&console.log(e)}),h.connect()}),d(this,"signOut",()=>{h.disconnect(),i.a.signOut()}),d(this,"getClient",()=>{if(!h)throw new Error("Client wasn't ready");return h})}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};t.a=p},function(e,t,a){"use strict";var n=a(10),i=a(580),s=a(37);const r={};let o=0;const l={fetchRawOfMessage:function(e,t,a){return c("fetchRawOfMessage",[...arguments])},connectIMAPClient:function(e){return c("connectIMAPClient",[...arguments])},connectIMAPClients:function(){return c("connectIMAPClients",[...arguments])},disconnectIMAPClient:function(e){return c("disconnectIMAPClient",[...arguments])},reconnectIMAPClient:function(e){return c("reconnectIMAPClient",[...arguments])},reconnectIMAPClients:function(){return c("reconnectIMAPClients",[...arguments])},disconnectIMAPClients:function(){return c("disconnectIMAPClients",[...arguments])},checkNewDeletedModified:function(e,t){return c("checkNewDeletedModified",[...arguments])},rescanUnreadFlags:function(e,t){return c("rescanUnreadFlags",[...arguments])},checkForMail:function(e){return c("checkForMail",[...arguments])},setCheckInterval:function(e,t){return c("setCheckInterval",[...arguments])},preFetch:function(e){return c("preFetch",[...arguments])},subscribeMailbox:function(e,t){return c("subscribeMailbox",[...arguments])},unsubscribeMailbox:function(e,t,a){return c("unsubscribeMailbox",[...arguments])}};function c(e,t){return new Promise((a,i)=>{const l=o++;r[l]={resolve:a,reject:i},n.a.runtime.getBackgroundPage(a=>{if(!a)return;const n={promiseId:l,func:e,args:t};a.postMessage({imap:n},s.o)})})}t.a=l,window.addEventListener("message",(function(e){if(e.origin!==s.o)return;const{imap:t}=e.data;if(t){const{promiseId:e,results:a,error:n}=t,{resolve:s,reject:o}=r[e];delete r[e],n?o(Object(i.a)(n)):s(a)}}),!1)},,,function(e,t,a){"use strict";var n=a(84),i=a.n(n);const s={constructUrl:e=>e.filter(Boolean).map(e=>("/"===e.charAt(0)&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),e)).join("/"),concatUrl(e,t){const a=i.a.parse(e);if(!a)return"";const{protocol:n,host:s}=a;return(n||"")+"//"+(s||"")+t},stripDoubleQuotes:e=>e?e.split('"').join(""):e,parseHttpStatusCode(e){try{return parseInt(e.split(" ")[1],10)}catch(e){console.warn("Error parsing http status")}return-1},httpStatusSuccess(e){const t=s.parseHttpStatusCode(e);return t>=200&&t<300},basicHttpAuthenticationHeader:(e,t)=>`Basic ${btoa(unescape(encodeURIComponent(`${e}:${t}`)))}`,getCalDAVUrl(e,t){const a=i.a.parse(e);let n="";const{protocol:r,host:o}=a;return r&&o&&t&&(n=`${r}//${s.constructUrl([o,t])}`),n}};t.a=s},,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=(a(53),a(12)),r=a(16);const o={},l={};let c="";const u=new class extends i.a{emitChangeParam(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}isFindInPageOpen(e){return!0===o[e]}getFindResultsForPage(e){let t=l[e];return void 0===t&&(t={activeMatchOrdinal:0,numberOfMatches:0,searchText:c,canceled:!1,matchCase:!1,isFindInPageToolbarOpen:!1,selectionRect:{left:0,top:0,width:0,height:0}}),t.isFindInPageToolbarOpen=!0===o[e]||!1,t}};s.a.register(e=>{switch(e.actionType){case r.a.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?o[e.pageId]=!0:"findNextInPage"===e.action||"findPreviousInPage"===e.action?!0!==o[e.pageId]&&(o[e.pageId]=!0,u.emitChangeParam({type:r.a.WEBPAGEVIEW_ACTIONS,action:"findInPage",pageId:e.pageId})):"focusWebView"!==e.action&&"focusSearchField"!==e.action||u.emitChangeParam({type:"URLFIELD_BLUR"}),u.emitChangeParam({type:"WEBPAGEVIEW_ACTIONS",action:e.action,pageId:e.pageId,payload:e.payload});break;case"NAVIGATION_SET_STATE":if(e.navigationState&&"start"!==e.navigationState.trigger||!1===o[e.pageId])return;!0===o[e.pageId]&&(o[e.pageId]=!1,u.emitChangeParam({type:r.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.FIND_IN_PAGE_RESULT_ACTION:o[e.pageId]&&(l[e.pageId]=e,c=e.searchText,u.emitChangeParam({type:r.a.FIND_IN_PAGE_RESULT_ACTION,pageId:e.pageId,...e.results}));break;case r.a.SHOW_FIND_IN_PAGE_ACTION:o[e.pageId]?u.emitChangeParam({type:r.a.FIND_IN_PAGE_FOCUS,pageId:e.pageId}):(o[e.pageId]=!0,u.emitChangeParam({type:r.a.SHOW_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.CLOSE_FIND_IN_PAGE_ACTION:o[e.pageId]&&(o[e.pageId]=!1,u.emitChangeParam({type:r.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.PAGE_GO:u.emitChangeParam({type:r.a.PAGE_GO,index:e.index});break;case r.a.PAGE_UPDATED:u.emitChangeParam({type:e.actionType,pageId:e.pageId});break;case r.a.PAGE_RELOAD:u.emitChangeParam({type:r.a.PAGE_RELOAD,bypassCache:e.bypassCache});break;case r.a.PAGE_STOP:case r.a.PAGE_BACK:case r.a.PAGE_FORWARD:u.emitChangeParam({type:e.actionType});break;case r.a.PAGE_GET_HISTORY:u.emitChangeParam({type:e.actionType,callback:e.callback});break;case r.a.MAIN_SHOW_QUICKCOMMANDS:case r.a.PANEL_SET_FOCUS:u.emitChangeParam({type:"URLFIELD_BLUR"})}}),t.a=u},,,,,function(e,t,a){"use strict";(function(e){var n=a(0),i=a(79),s=a(91),r=a(85),o=a(31),l=a(40),c=a.n(l),u=a(272),m=a(791),d=a(553),h=a(407),p=a(1281),b=a(51),g=a(35),N=a(158),f=a(25),_=a(20),v=a.n(_),E=a(78),C=a(224),w=a(4),O=a(303),y=a(74),S=a(153),T=a(431),k=a(284),A=a(188),I="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiTreeList.jsx";function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M(e){e.target.select()}class P extends n.PureComponent{constructor(t){super(t),D(this,"emptyDragOverObj",{id:-1,position:""}),D(this,"_dropSupport",{available:!1,onto:!1,edge:!1}),D(this,"inlineEditTimeoutId",-1),D(this,"expandTimer",void 0),D(this,"_leftMouseTimeStamp",0),D(this,"expandId",-1),D(this,"_isMounted",!1),D(this,"_hasCutCopyPasteListeners",!1),D(this,"_isComposing",!1),D(this,"_scrollTopNeedsUpdate",!1),D(this,"_canCutCopyPaste",!1),D(this,"resetSelectionModel",()=>{this.selectionModel.resetSelectionModel(),this.updateSelectionState()}),D(this,"updateSelectionState",e=>{this.forceUpdate(e)}),D(this,"SelectionMixinSelectAll",()=>{this.selectionModel.selectAll(this.getAllIds()),this.updateSelectionState()}),D(this,"SelectionMixinSetLead",e=>{this.selectionModel.setLeadIndex(e),this.updateSelectionState()}),D(this,"SelectionMixinSelectItem",(e,t,a,n,i)=>{this.selectionModel.setLeadIndex(e);const s=t;let r=this.selectionModel.isSelected(e);if(s||a)r=i||!r;else{if(i&&this.selectionModel.length>1)return;this.selectionModel.unSelectAll(),r=!0}if(a&&-1!==this.selectionModel.anchorIndex){const t=this.getSelectedIdsFromIdToAnchor(e);this.selectionModel.setSelectedIds(t)}else this.selectionModel.setIndexSelected(e,r);this.updateSelectionState()}),D(this,"getSelectedIdsFromIdToAnchor",e=>{const t=this.selectionModel.anchorIndex;return this.getIdsBetween(t,e)}),D(this,"_initializeSettings",e=>{if(!e.settings)return;this._expandSettings="EXPAND_"+e.settings,this._scrollTopSettings="SCROLL_TOP_"+e.settings,this._scrollTopNeedsUpdate=!0,this._searchStyleSettings="SEARCH_STYLE_"+e.settings,this._onRowsRenderedOptions="ON_ROWS_RENDERED_OPTIONS_"+e.settings;let t={};"always"===e.defaultFolderExpansion?t=this.getAllFoldersExpandedModel(e.nodes):(t=g.a.getSync("EXPAND_"+e.settings),t||"fallback"!==e.defaultFolderExpansion||(t=this.getAllFoldersExpandedModel(e.nodes)),t||(t={})),this.prepareDataForRender(e.nodes,t,e.sorting)}),D(this,"_updateSelectionStateIfNeeded",t=>{if(t.settings){this._selectionSettings="SELECTION_"+t.settings;const a=g.a.getSync(this._selectionSettings);if(a){const t=this.getSelectedItem();this.selectionModel.setData(a),this.updateSelectionState(()=>{const{onSelect:a}=this.props;if(a){const n=this.getSelectedItem();let i=-1;!n||t&&n.id===t.id?t&&(i=t.id):(i=n.id,a(n)),e.nextTick(()=>{-1!==i&&this.scrollToId(i)})}})}else this.resetSelectionModel()}}),D(this,"focusTree",()=>{if(this.refs.treeListEntries){const e=c.a.findDOMNode(this.refs.treeListEntries);e instanceof HTMLElement&&e.focus()}}),D(this,"prepareDataForRender",(e,t,a)=>{const n=this.getRenderedItems(e,t,a);this.setState({renderedArray:n,expandModel:t}),"function"==typeof this.props.rowHeight&&this.rerenderVisibleTreeItems()}),D(this,"setCutIds",e=>{this.props.setCutIds&&this.props.setCutIds(e)}),D(this,"onCut",e=>{e.preventDefault();const{isValidForClipboard:t}=this.props;if(!this._canCutCopyPaste||!t)return;const a=this.getAllSelectedItems().filter(e=>t(e)).map(e=>e.id);this.props.onCut?this.props.onCut(e,a):(this.setCutIds(a),this.setClipboard(e,!0))}),D(this,"onCopy",e=>{const{isValidForClipboard:t,onCopy:a}=this.props;if(this._canCutCopyPaste&&t)if(a){a(e,this.getAllSelectedItems().filter(e=>t(e)).map(e=>e.id))}else this.setClipboard(e,!1)}),D(this,"toggleSelectedExpansion",e=>{this.stopInlineEditTimer();const t=e||this.selectionModel.leadIndex;if(-1===t)return;if(this.state.inlineEditId===t)return;const a=this.findTreeItem(t);a&&this.props.isFolder(a)&&this.toggleExpandModel(a.id)}),D(this,"expand",e=>{const t=this.findTreeItem(e);t&&this.props.isFolder(t)&&!t.isExpanded&&this.toggleExpandModel(t.id)}),D(this,"collapse",e=>{const t=this.findTreeItem(e);t&&this.props.isFolder(t)&&t.isExpanded&&this.toggleExpandModel(t.id)}),D(this,"toggleExpandModel",e=>{this.state.expandModel[e]=void 0===this.state.expandModel[e]?!this.props.expandedByDefault:!this.state.expandModel[e],this.state.expandModel[e]===Boolean(this.props.expandedByDefault)&&delete this.state.expandModel[e],this.saveExpandModel(this.state.expandModel),this.prepareDataForRender(this.props.nodes,this.state.expandModel,this.props.sorting)}),D(this,"saveExpandModel",e=>{if(this.props.settings&&"always"!==this.props.defaultFolderExpansion){const t={};t[this._expandSettings]=e,g.a.set(t)}}),D(this,"saveSelectionModel",()=>{if(this.props.settings){const e={};e[this._selectionSettings]=this.selectionModel.getData(),g.a.set(e)}}),D(this,"_findTreeIndex",e=>this.state.renderedArray.findIndex(t=>t.id===e)),D(this,"_scrollLeadNodeIntoView",()=>{const e=this._findTreeIndex(this.selectionModel.leadIndex);this.scrollIntoView(e)}),D(this,"getAllFoldersCollapsedModel",e=>{const t={};if(this.props.expandedByDefault){const a=e=>{this.props.isFolder(e)&&(t[e.id]=!1),this.props.hasChildren(e)&&e.children.forEach(a)};e.forEach(a)}return t}),D(this,"collapseAll",()=>{const e=this.getAllFoldersCollapsedModel(this.props.nodes);this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()}),D(this,"getAllFoldersExpandedModel",e=>{const t={};if(!this.props.expandedByDefault){const a=e=>{this.props.isFolder(e)&&(t[e.id]=!0),this.props.hasChildren(e)&&e.children.forEach(a)};e.forEach(a)}return t}),D(this,"getExpandModel",()=>this.state.expandModel),D(this,"expandWithModel",e=>{this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()}),D(this,"expandAll",()=>{this.expandAllExcept([])}),D(this,"expandAllExcept",e=>{const t=this.getAllFoldersExpandedModel(this.props.nodes);e.forEach(e=>{this.props.expandedByDefault?t[e]=!1:delete t[e]}),this.saveExpandModel(t),this.prepareDataForRender(this.props.nodes,t,this.props.sorting),this._scrollLeadNodeIntoView()}),D(this,"onImport",()=>{this.props.onImport&&this.props.onImport()}),D(this,"setClipboard",(e,t)=>{const{isValidForClipboard:a,getDragData:n,mimeType:i}=this.props;if(!i||!a||!n)return;const s=this.getAllSelectedItems().filter(e=>a(e)).map(e=>e.id);e.clipboardData.setData("vivaldi/x-cut",t),e.clipboardData.setData(i,JSON.stringify(s)),e.clipboardData.setData("text/plain",n("text/plain",s)),e.clipboardData.setData("text/html",n("text/html",[this.selectionModel.leadIndex])),e.stopPropagation(),e.preventDefault()}),D(this,"contextMenuSpy",e=>{this._canCutCopyPaste=!1;const t=c.a.findDOMNode(this);let a=e.target;for(;a;){if(a===t){this._canCutCopyPaste=!0;break}a=a.parentNode}}),D(this,"keyDownSpy",e=>{this._canCutCopyPaste=!0}),D(this,"onPaste",e=>{if(e.preventDefault(),!this._canCutCopyPaste)return;const{mimeType:t,onPaste:a}=this.props;if(a){const t=this.getSelectedItem();return void(t&&a(e,t))}if(!t)return;const n=this.getTargetFromSelection(),i=e.clipboardData;if(!i)return;const s=-1!==i.types.findIndex(e=>e===t)?JSON.parse(i.getData(t)):[];if(0!==s.length)if("true"===i.getData("vivaldi/x-cut")){if(!(this.props.cutIds&&this.props.cutIds.length>0)||!this.props.onMove)return;this.props.onMove(s,n.parentId,n.index,"on").then(e=>{this.setCutIds([]),this.selectionModel.setSelectedIds(e);const{onSelect:t}=this.props;if(e.length>0&&t){const a=this.findTreeItem(e[0]);a&&t(a)}this.rerenderVisibleTreeItems()})}else{const e=Object(C.a)(s.map(e=>this.findTreeItem(e)));this.props.onCreate&&this.props.onCreate(e,n.parentId,n.index,!1).then(e=>{const t=Array.isArray(e)?e:e.items;Boolean(t)&&t.length>0&&(this.selectionModel.setSelectedIds(t.map(e=>e.id)),this.SelectionMixinSetLead(t[0].id),this.rerenderVisibleTreeItems())})}}),D(this,"moveNode",(e,t)=>{this.props.onMove&&this.canMoveUpDown(e,t)&&(t?this.props.onMove([e.id],e.parentId,e.index-1,"above"):this.props.onMove([e.id],e.parentId,e.index+2,"below"))}),D(this,"canMoveUpDown",(e,t)=>{if(!0===t&&0===e.index)return!1;if(!1===t){let t=0;if(e.parentId===this.props.rootId)t=this.props.nodes.length,t>0&&this.props.nodes[t-1].trash&&t--;else{const a=this.findTreeItem(e.parentId);a&&a.children&&(t=a.children.length)}if(e.index+1>=t)return!1}const a=!!this.props.sorting&&this.props.sorting.sortOrder!==b.a.NO_SORTING,n=!this.props.supportsUpDownMove||this.props.supportsUpDownMove(e,t);return!a&&n}),D(this,"getKeyEventMap",()=>({esc:this.onKeyEscUp,up:this.onKeyArrowUp,down:this.onKeyArrowDown,"alt+up":this.onKeyArrowUp,"alt+down":this.onKeyArrowDown,left:this._collapseFolderOrSelectParent,right:this._expandFolder,del:this.onKeyDelete,home:this.onKeyHome,end:this.onKeyEnd,pageup:this.onKeyPageUp,pagedown:this.onKeyPageDown,"shift+del":this.onKeyShiftDelete,"shift+up":this.onKeyArrowUp,"shift+down":this.onKeyArrowDown,"shift+home":this.onKeyHome,"shift+end":this.onKeyEnd,"shift+pageup":this.onKeyPageUp,"shift+pagedown":this.onKeyPageDown,"ctrl+a":this.onKeySelectAll,"ctrl+left":this._collapseFolderOrSelectParent,"ctrl+right":this._expandFolder,"ctrl+space":this.onKeyCtrlSpace,"ctrl+up":this.onKeyCtrlUp,"ctrl+down":this.onKeyCtrlDown})),D(this,"enableCutCopyPasteListeners",e=>{if(this._canCutCopyPaste=e,this._hasCutCopyPasteListeners!==e){this._hasCutCopyPasteListeners=e;const{document:t}=this.context;this._hasCutCopyPasteListeners?(t.addEventListener("cut",this.onCut),t.addEventListener("copy",this.onCopy),t.addEventListener("paste",this.onPaste),t.addEventListener("contextmenu",this.contextMenuSpy),t.addEventListener("keydown",this.keyDownSpy)):(t.removeEventListener("cut",this.onCut),t.removeEventListener("copy",this.onCopy),t.removeEventListener("paste",this.onPaste),t.removeEventListener("contextmenu",this.contextMenuSpy),t.removeEventListener("keydown",this.keyDownSpy))}}),D(this,"onLostFocus",()=>{this.stopInlineEditTimer(),this.enableCutCopyPasteListeners(!1),this.setState({hasFocus:!1})}),D(this,"onGotFocus",()=>{if(-1===this.state.inlineEditId){let e=this.getSelectedItem();e&&-1===this._findTreeIndex(e.id)&&(e=void 0),this.enableCutCopyPasteListeners(!0),this.setState({hasFocus:!0})}}),D(this,"scrollIntoView",e=>{var t;null===(t=this.refs.treeListEntries)||void 0===t||t.scrollToRow(e)}),D(this,"setSelectedIds",e=>{this.selectionModel.resetSelectionModel(),this.selectionModel.selectAll(e),this.saveSelectionModel(),this.updateSelectionState()}),D(this,"selectByIndex",e=>{this.state.renderedArray.length>e&&this.selectByNode(this.state.renderedArray[e])}),D(this,"selectById",(e,t,a)=>{const n=-1===e?void 0:this.props.onSelect?this.findTreeItem(e):{id:e};this.selectByNode(n,t,a)}),D(this,"selectByNode",(e,t,a)=>{const n=e?e.id:-1;this.props.onSelect&&(e&&this.selectionModel.FirstSingleItemSelected===e.id||this.props.onSelect(e)),a||(a=this._findTreeIndex(n)),-1!==a&&this.scrollIntoView(a),t?this.SelectionMixinSelectItem(n,t.ctrlKey,t.shiftKey,t.metaKey,"contextmenu"===t.type):this.SelectionMixinSelectItem(n),this.saveSelectionModel()}),D(this,"scrollToId",e=>{this.scrollIntoView(this._findTreeIndex(e))}),D(this,"onItemClick",(e,t)=>{t.stopPropagation(),this.props.onItemClick&&this.props.onItemClick(t,e)}),D(this,"onItemDoubleClick",(e,t)=>{this.stopInlineEditTimer(),this.props.onItemDoubleClick&&(this.props.canDoubleClick&&this.props.canDoubleClick(e)||!this.props.isFolder(e))&&this.props.onItemDoubleClick(t,e)}),D(this,"onItemMouseDown",(e,t,a)=>{if(y.a.isNavigationButton(a.button))return;const n=this.selectionModel.selectedIds;let i=!1;for(const t of n)if(t.id===e.id){i=!0;break}this.state.hasFocus&&i&&1===n.length&&a.button===y.a.kLeft&&!Object(O.a)(a)&&a.target instanceof HTMLElement&&"title"===a.target.className&&a.timeStamp-this._leftMouseTimeStamp>300?this.startInlineEditTimerForId(e.id):this.stopInlineEditTimer();const s=a.ctrlKey;i&&!s||(i&&s&&1===n.length?this.unSelectAll():this.selectByNode(e,a)),"function"==typeof this.props.onItemMouseDown&&this.props.onItemMouseDown(e,a),a.button===y.a.kLeft&&(this._leftMouseTimeStamp=a.timeStamp),t&&this.focusTree()}),D(this,"onItemMouseUp",(e,t)=>{var a,n;if(y.a.isNavigationButton(t.button))return;const i=this.selectionModel.selectedIds,s=t.ctrlKey;i.length>1&&t.button!==y.a.kRight&&!s&&this.selectByNode(e,t),null===(a=(n=this.props).onItemMouseUp)||void 0===a||a.call(n,e,t)}),D(this,"onContextMenuOpen",(e,t)=>{t&&this.scrollIntoView(this._findTreeIndex(t.id))}),D(this,"rerenderVisibleTreeItems",()=>{var e;null===(e=this.refs.treeListEntries)||void 0===e||e.recomputeRowHeights()}),D(this,"getParentAndIndex",(e,t)=>{let a,n=void 0;if(e)if(this.props.isFolder(e))a=e.id,!e.isExpanded&&t&&this.toggleExpandModel(e.id);else{a=e.parentId;const{id:t}=e;if(a===this.props.rootId)this.props.nodes&&(n=this.props.nodes.findIndex(e=>e.id===t)+1);else{const e=this.findTreeItem(a);e&&e.children&&(n=e.children.findIndex(e=>e.id===t)+1)}}else a=this.props.rootId;return{parentId:a,index:n}}),D(this,"getTargetFromSelection",()=>{const e=this.selectionModel.FirstSingleItemSelected;let t;return e&&-1!==e&&(t=this.findTreeItem(e),this.props.isValidAddTarget&&!this.props.isValidAddTarget(t)&&(t=void 0)),this.getParentAndIndex(t,!0)}),D(this,"onAdd",async(e,t)=>{const a={children:e?[]:void 0,isNew:!0};t&&(a.title=t.title,a.content=t.content,a.url=t.url,a.separator=t.separator);const{parentId:n,index:i}=this.getTargetFromSelection();if(!this.props.onCreate)return;const s=await this.props.onCreate([a],n,i,!0);if(!s)return;const r=Array.isArray(s)?s:s.items,o=!Array.isArray(s)&&s.props.edit;if(1!==r.length)return;const[l]=r;this.getSelected()!==l.id&&this.selectByNode(l),o&&this.startInlineEdit(l.id)}),D(this,"onSave",()=>{const{onSave:e}=this.props;e&&e(this.getAllSelectedItems().map(e=>e.id))}),D(this,"onSaveAll",()=>{this.props.onSave&&this.props.onSave([])}),D(this,"onExport",()=>{const{onExport:e}=this.props;e&&e(this.getAllSelectedItems().map(e=>e.id))}),D(this,"onExportAll",()=>{this.props.onExport&&this.props.onExport([])}),D(this,"onDelete",e=>{let t=this.getAllSelectedItems().map(e=>e.id);return this.props.validateForDeletion&&(t=this.props.validateForDeletion(t)),this.setState({isDeleting:!0}),this.onDeleteItems(t,e)}),D(this,"onDeleteItems",(e,t)=>{if(e&&e.length>0){let a=-1;const n=this.selectionModel.selectedIds;for(const e of n){const t=this._findTreeIndex(e.id);(-1===a||t<a)&&(a=t)}a<0&&(a=0);const i=this.state.renderedArray[a];if(!this.props.delete)return Promise.resolve();let s=void 0!==i.parentId?this.findTreeItem(i.parentId):void 0;return this.props.delete(e,t).then(()=>{if(this.props.disableSelectAfterDelete)return;const t=this.state.renderedArray.filter(t=>!e.includes(t.id));if(0===t.length)this.selectByNode(void 0);else if(s)if(this.props.hasChildren(s)&&(s={...s},s.children=s.children.filter(t=>!e.includes(t.id)),s.children=this.sortItems(s.children,this.props.sorting)),this.props.hasChildren(s)){const e=s.children;if(1===e.length)this.selectByNode(e[0]);else{const n=e[0],i=e[e.length-1],s=this._findTreeIndex(n.id),r=this._findTreeIndex(i.id);if(a<=s)this.selectByNode(n);else if(a>=r)this.selectByNode(i);else{let n=0;if(r-s+1>e.length){const e=a-s;for(let a=0;a<e;a++){const e=t[s+a];this.props.hasChildren(e)&&e.isExpanded&&(n-=e.children.length)}}const i=e[a-s+n];this.selectByNode(i)}}}else this.selectByNode(s);else{let e=this.state.renderedArray.filter(e=>e.parentId===this.props.rootId||!0===e.trash);const n=e.findIndex(e=>e.id===i.id);if(n>=0){e=t.filter(e=>e.parentId===this.props.rootId||!0===e.trash);const a=e.length-1,i=e[Math.min(n,a)];this.selectByNode(i)}else{const e=t.length-1,n=t[Math.min(a,e)];this.selectByNode(n)}}}).catch(()=>{})}return Promise.resolve()}),D(this,"onKeyCtrlUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(0===a)return;const n=-1===a?this.state.renderedArray.length-1:a-1;if(n<0)return;const i=this.state.renderedArray[n];this.SelectionMixinSetLead(i.id),this.scrollIntoView(n)})),D(this,"onKeyCtrlDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(a===this.state.renderedArray.length-1)return;const n=a+1,i=this.state.renderedArray[n];this.SelectionMixinSetLead(i.id),this.scrollIntoView(n)})),D(this,"onKeyArrowDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(a!==this.state.renderedArray.length-1){if(!0===e.altKey)this.moveNode(this.state.renderedArray[a],!1);else{const t=a+1,n=this.state.renderedArray[t];this.selectByNode(n,e,t)}e.preventDefault(),e.stopPropagation()}})),D(this,"onKeyArrowUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(0!==a){if(!0===e.altKey)this.moveNode(this.state.renderedArray[a],!0);else{const t=-1===a?this.state.renderedArray.length-1:a-1;if(t<0)return;const n=this.state.renderedArray[t];this.selectByNode(n,e,t)}e.preventDefault(),e.stopPropagation()}})),D(this,"onKeyEscUp",e=>{this.selectionModel.setSelectedIds([])}),D(this,"onKeyHome",e=>{const t=this.state.renderedArray[0];this.selectByNode(t,e,0),e.preventDefault(),e.stopPropagation()}),D(this,"onKeyEnd",e=>{const t=this.state.renderedArray.length,a=this.state.renderedArray[t-1];this.selectByNode(a,e,t-1),e.preventDefault(),e.stopPropagation()}),D(this,"onKeyPageDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t),n=this.state.renderedArray.length;let i=this.state.height,s=a;for(;s<n-1;){const e="function"==typeof this.props.rowHeight?this.props.rowHeight({index:s}):this.props.rowHeight||24;if(!(i>=e))break;i-=e,s++}if(s===a)return;const r=this.state.renderedArray[s];this.selectByNode(r,e,s),e.preventDefault(),e.stopPropagation()})),D(this,"onKeyPageUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);let n=this.state.height,i=a;for(;i>0;){const e="function"==typeof this.props.rowHeight?this.props.rowHeight({index:i}):this.props.rowHeight||24;if(!(n>=e))break;n-=e,i--}if(i===a)return;const s=this.state.renderedArray[i];this.selectByNode(s,e,i),e.preventDefault(),e.stopPropagation()})),D(this,"onKeyShiftDelete",e=>{this.onKeyDelete(e,!0)}),D(this,"onKeyDelete",(e,t=!1)=>{this.onDelete(t),e.preventDefault(),e.stopPropagation()}),D(this,"onKeySelectAll",()=>{this.SelectionMixinSelectAll(),this.saveSelectionModel()}),D(this,"onKeyCtrlSpace",e=>{const t=this.selectionModel.leadIndex;this.SelectionMixinSelectItem(t,e.ctrlKey,e.shiftKey,e.metaKey,"contextmenu"===e.type)}),D(this,"_setExpandState",(e,t)=>{if(this.state.expandModel&&this.selectionModel.isSingleItemSelected){const e=this.findTreeItem(this.selectionModel.leadIndex);e&&(e.isExpanded&&!t||!e.isExpanded&&t)&&-1!==this.selectionModel.FirstSingleItemSelected&&this.toggleExpandModel(this.selectionModel.FirstSingleItemSelected)}e.preventDefault(),e.stopPropagation()}),D(this,"_collapseFolderOrSelectParent",e=>{const t=this.getSelectedItem();if(t&&!0===this.isfolderAndHasItems(t)&&t.isExpanded)this._setExpandState(e,!1);else{const e=this.selectionModel.leadIndex;if(e){const t=this._findTreeIndex(e);if(t){const e=this.state.renderedArray[t].level;for(let a=t-1;a>=0;a--){const t=this.state.renderedArray[a];if(t.level<e){this.selectByNode(t);break}}}}}}),D(this,"expandToId",e=>{let t=this.findTreeItem(e);for(;t;)t=this.findTreeItem(t.parentId),t&&this.isFolder(t)&&!t.isExpanded&&this.toggleExpandModel(t.id)}),D(this,"_expandFolder",e=>{const t=this.getSelectedItem();t&&!0===this.isfolderAndHasItems(t)&&this._setExpandState(e,!0)}),D(this,"unSelectAll",()=>{this.selectByNode(void 0)}),D(this,"isItemLead",e=>e===this.selectionModel.leadIndex),D(this,"isItemSelected",e=>this.selectionModel.isSelected(e)),D(this,"supportDropForItem",(e,t)=>this.props.getDropSupport?this.props.getDropSupport(e,t):{available:!1,onto:!1,edge:!1}),D(this,"onDragLeaveItem",(e,t)=>{this.cancelDragOverObject(),this.resetAutoExpandTimer()}),D(this,"onDragOverItem",(e,t,a)=>{const n=a.currentTarget;if(!this.supportDropForItem(e,a).available)return;const i=n.getBoundingClientRect(),s="function"==typeof this.props.rowHeight?this.props.rowHeight({index:e.treeIndex}):this.props.rowHeight||24,r=(a.clientY-i.top)/s;let o="";!0===t.onto?o=r<=.25?t.edge?"above":"on":r>.75&&t.edge?"below":"on":t.edge&&(r<=.5?o="above":r>.5&&(o="below")),(this.state.dragOverObj.id!==e.id||this.state.dragOverObj.id===e.id&&this.state.dragOverObj.position!==o)&&this.setState({dragOverObj:{id:e.id,position:o}},this.initAutoExpandTimer(e,o))}),D(this,"initAutoExpandTimer",(e,t)=>{e.isExpanded||!this.props.isFolder(e)||"on"!==t?this.resetAutoExpandTimer():this.expandId!==e.id&&(this.resetAutoExpandTimer(),this.expandId=e.id,this.expandTimer=setTimeout(this.onAutoExpandTimer,1200))}),D(this,"resetAutoExpandTimer",()=>{this.expandTimer&&(clearTimeout(this.expandTimer),this.expandTimer=void 0,this.expandId=-1)}),D(this,"onAutoExpandTimer",()=>{-1!==this.expandId&&(this.state.dragOverObj.id===this.expandId&&"on"===this.state.dragOverObj.position&&this.toggleExpandModel(this.expandId),this.resetAutoExpandTimer())}),D(this,"onDragEmptyArea",e=>{if(this.state.renderedArray.length>0){const t=this.state.renderedArray[this.state.renderedArray.length-1];this._dropSupport=this.supportDropForItem(t,e),this._dropSupport.available&&this._dropSupport.edge&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",this.state.dragOverObj.id!==t.id&&"below"!==this.state.dragOverObj.position&&this.setState({dragOverObj:{id:t.id,position:"below"}}))}e.stopPropagation()}),D(this,"onDropEmptyArea",e=>{if(this.resetAutoExpandTimer(),this.state.renderedArray.length>0&&this._dropSupport.available){const t=this.state.renderedArray[this.state.renderedArray.length-1];this.onDrop(t,this._dropSupport,e),this._dropSupport={available:!1,onto:!1,edge:!1}}e.preventDefault(),e.stopPropagation()}),D(this,"onDrop",(e,t,a)=>{this.resetAutoExpandTimer();const n=i.a.isCopyModifierPressed(a),s=this.state.dragOverObj.position,{mimeType:r}=this.props;switch(s){case"above":case"below":if(!1===t.edge)return void this.cancelDragOverObject();break;case"on":if(!1===t.onto)return void this.cancelDragOverObject();break;default:return void this.cancelDragOverObject()}let o;if(r&&a.dataTransfer&&-1!==a.dataTransfer.types.findIndex(e=>e===r)?o=JSON.parse(a.dataTransfer.getData(r)):this.props.onDrop&&this.props.onDrop(a,e,s).then(e=>{this.cancelDragOverObject(),e&&e.length>0&&this.selectByNode(e[0])}),!o||o.length<=0)return void this.cancelDragOverObject();const l=this.props.isFolder(e);let c=!1,u={id:e.id,index:0,parentId:void 0};this.props.getTargetSpec?u=this.props.getTargetSpec(e,s):"above"===s?(u.index=parseInt(e.index),u.parentId=e.parentId):"on"===s?u.parentId=l?e.id:e.parentId:"below"===s&&(e.isExpanded?u.parentId=e.id:(u.index=parseInt(e.index)+1,u.parentId=e.parentId));const m=o.map(t=>{if(t===e.id)return void(c=!0);const a=this.findTreeItem(t);if(n||!this.props.isFolder(a)||!a||!this.findItemInFolder(a,e.id))return a;c=!0}).filter(e=>null!==e);if(c||m.length<=0)this.cancelDragOverObject();else if(n){const e=Object(C.a)(m);this.props.onCreate&&this.props.onCreate(e,u.parentId,u.index,!1).then(this.cancelDragOverObject())}else{var d,h;const e=m.map(e=>e.id);null===(d=(h=this.props).onMove)||void 0===d||d.call(h,e,u.parentId,u.index,s).then(()=>{this.cancelDragOverObject()})}}),D(this,"cancelDragOverObject",()=>{this.setState({dragOverObj:this.emptyDragOverObj})}),D(this,"onDragEndItem",()=>{this.cancelDragOverObject()}),D(this,"onCompositionStart",()=>{this._isComposing=!0}),D(this,"onCompositionEnd",()=>{this._isComposing=!1}),D(this,"onKeyDown",async e=>{const t=Object(A.c)(e);if(this.stopInlineEditTimer(),-1!==this.state.inlineEditId)return void("Escape"===e.key&&t?(e.preventDefault(),await this.cancelInlineEdit(),this.focusTree()):"Enter"!==e.key||this._isComposing?"F2"===e.key&&e.preventDefault():(e.preventDefault(),await this.saveInlineEdit(),this.focusTree()));if("Escape"===e.key&&t)this.setCutIds([]),e.preventDefault();else if(this.props.supportsInlineEdit&&"F2"===e.key){const t=!0===this.props.supportsInlineEdit?this.getSelectedItem():void 0;if(t){return void(this.startInlineEdit(t.id)&&e.preventDefault())}}let a=!1;if(this.props.onItemsActivated&&"Enter"===e.key){if(!1===e.repeat){const t=this.getAllSelectedItems();t&&this.props.onItemsActivated&&this.props.onItemsActivated(e,t)}a=!0,e.preventDefault()}var n=r.a.keyComboFromEvent(e.nativeEvent),i=this.getKeyEventMap()[n];i&&i(e.nativeEvent),!a&&this.props.onKeyDown&&this.props.onKeyDown(e)}),D(this,"startInlineEditTimerForId",e=>{this.stopInlineEditTimer(),!0===this.props.supportsInlineEdit&&(this.inlineEditTimeoutId=setTimeout(this.startInlineEdit.bind(this,e),700))}),D(this,"stopInlineEditTimer",()=>{-1!==this.inlineEditTimeoutId&&(clearTimeout(this.inlineEditTimeoutId),this.inlineEditTimeoutId=-1)}),D(this,"startInlineEditForSelectedItem",()=>{const e=this.selectionModel.FirstSingleItemSelected;-1!==e&&this.startInlineEdit(e)}),D(this,"startInlineEdit",e=>{const t=this.selectionModel.selectedIds;if(1===t.length&&t[0].id===e){var a,n;const t=this.state.renderedArray.filter(t=>t.id===e);if(1===t.length&&(null===(a=(n=this.props).isValidToEdit)||void 0===a?void 0:a.call(n,t[0].id)))return this.setState({inlineEditId:e,inlineEditText:this.props.getTitle?this.props.getTitle(e):""}),!0}return!1}),D(this,"getInlineEditId",()=>-1===this.state.inlineEditId?void 0:this.state.inlineEditId),D(this,"setInlineEditText",e=>{const t=e.target.value;this.setState({inlineEditText:t})}),D(this,"cancelInlineEdit",()=>new Promise(e=>{this.setState({inlineEditId:-1,inlineEditText:""},e)})),D(this,"saveInlineEdit",()=>new Promise((e,t)=>{if(-1===this.state.inlineEditId||!this.props.saveTitle)return t();this.props.saveTitle(this.state.inlineEditId,this.state.inlineEditText),this.setState({inlineEditId:-1,inlineEditText:""},e)})),D(this,"onRowsRendered",e=>{this.props.onRowsRendered&&(this.props.onRowsRendered(e),g.a.set({[this._onRowsRenderedOptions]:e})),this.updateScrollTop()}),D(this,"updateScrollTop",()=>{if(this._scrollTopNeedsUpdate){this._scrollTopNeedsUpdate=!1;const e=g.a.getSync(this._scrollTopSettings);this.refs.treeListEntries.scrollToPosition(e)}}),D(this,"onScroll",Object(k.a)(e=>{const{scrollTop:t}=e;this._scrollTopSettings&&g.a.set({[this._scrollTopSettings]:t})},500)),D(this,"getSelectedItem",()=>this.findTreeItem(this.selectionModel.leadIndex)),D(this,"isFolder",e=>e&&this.props.isFolder(e)),D(this,"isfolderAndHasItems",e=>e.children&&e.children.length>0),D(this,"getSelected",()=>this.selectionModel.FirstSingleItemSelected),D(this,"getRenderedItems",(e,t,a)=>{const n=[];if(!e||0===e.length)return n;e=this.sortItems(e,a);const i=a&&a.sortOrder!==b.a.NO_SORTING,s=e=>{if(!(i&&this.props.isSeparator&&this.props.isSeparator(e)))if(n.push(e),this.props.hasChildren(e)){if(e.isExpanded="0"===e.id||(t&&this.props.expandedByDefault?!1!==t[e.id]:t[e.id]||!1),e.isExpanded)for(const t of e.children)t.level=e.level+1,s(t)}else delete e.isExpanded};for(const t of e)t.level=0,s(t);return n}),D(this,"canSort",e=>e&&e.sortOrder&&e.sortOrder!==b.a.NO_SORTING),D(this,"sortItems",(e,t)=>{if(!t||!this.canSort(t))return e;!1!==this.props.supportsDeepCopy&&(e=Object(C.a)(e));const a=t.comparator||b.a.getDefaultComparator(t.sortOrder,t.sortField);return b.a.treeSort(e,a),e}),D(this,"getSelectedFromTree",()=>{const e=[],t=function(a,n){for(let i=0;i<n.length;i++){const s=n[i];a.selectionModel.isSelected(s.id)?e.push(s):s.children&&t(a,s.children)}};return t(this,this.props.nodes),e}),D(this,"getAllSelectedItems",()=>{const e=this.selectionModel.selectedIds;if(0===e.length)return e;if(e.length>1&&!this.canSort(this.props.sorting))return this.getSelectedFromTree();const t=function(e,a){for(let n=0;n<e.length;n++){let i=e[n];if(i.id===a)return i;if(i.children&&(i=t(i.children,a),i))return i}},a=e.map(e=>t(this.props.nodes,e.id)).filter(e=>void 0!==e);return this.sortItems(a,this.props.sorting)}),D(this,"findTreeItem",e=>{let t=null;const a=n=>{if(n.id===e)return t=n;n.children&&n.children.forEach(a)};return this.props.nodes.forEach(a),t}),D(this,"findItemInFolder",(e,t)=>{let a=null;const n=e=>{if(e.id===t)return a=e;e.children&&e.children.forEach(n)};return e.children.forEach(n),a}),D(this,"getIdsBetween",(e,t)=>{const a=this._findTreeIndex(e),n=this._findTreeIndex(t);let i=[];return i=a>n?this.state.renderedArray.slice(n,a+1):this.state.renderedArray.slice(a,n+1),i.map(e=>e.id)}),D(this,"getAllIds",()=>this.state.renderedArray.map((e,t)=>e.id||t)),D(this,"getSearchStyle",()=>{let e=g.a.getSync(this._searchStyleSettings);return void 0===e&&(e="tree"),e}),D(this,"setSearchStyle",e=>{const t={};t[this._searchStyleSettings]=e,g.a.set(t,()=>{this.props.onSearchStyleChanged&&this.props.onSearchStyleChanged(e)})}),D(this,"getNamedContextMenuItems",(e,t)=>{const a=s.a.getOptionFunction(e.name),{document:n}=this.context,i=e.getState?e.getState():{};return s.a.getNamedMenu(e.name,async s=>{switch(s.action){case"CONTEXT_EXPAND_ALL":return{handler:this.expandAll,visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_COLLAPSE_ALL":return{handler:this.collapseAll,...a(s,i),visible:e.getVisibility(s,t)};case"CONTEXT_NEW_ITEM":return{handler:()=>{this.onAdd(!1)},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_NEW_FOLDER":return{handler:()=>{this.onAdd(!0)},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_NEW_SEPARATOR":return{handler:()=>{this.onAdd(!1,{separator:!0})},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_EDIT":return{handler:()=>{var e,t;null===(e=(t=this.props).onEdit)||void 0===e||e.call(t)},visible:e.getVisibility(s,t)&&"function"==typeof this.props.onEdit,...a(s,i)};case"CONTEXT_RENAME":return{handler:()=>{this.startInlineEditForSelectedItem()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_CUT":return{handler:()=>{n.execCommand("cut")},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_COPY":return{handler:()=>{n.execCommand("copy")},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_PASTE":return{handler:()=>{n.execCommand("paste")},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_SAVE":return{handler:()=>{this.onSave()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_SAVE_ALL":return{handler:()=>{this.onSaveAll()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_EXPORT":return{handler:()=>{this.onExport()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_EXPORT_ALL":return{handler:()=>{this.onExportAll()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_DELETE":return{handler:()=>{this.onDelete(!1)},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_IMPORT":return{handler:()=>{this.onImport()},visible:e.getVisibility(s,t),...a(s,i)};case"CONTEXT_CONTAINER_SEARCH":{const n=this.getSearchStyle();return{items:[{type:"radio",radiogroup:1,checked:"flat"===n,handler:this.setSearchStyle.bind(this,"flat"),...Object(w.a)("Flat Search")},{type:"radio",radiogroup:1,checked:"tree"===n,handler:this.setSearchStyle.bind(this,"tree"),...Object(w.a)("Tree Search")}],visible:e.getVisibility(s,t),...a(s,i)}}default:return e.getCapability(s,a,t,i)}})}),D(this,"getContextMenuItemsPromise",e=>this.props.getContextMenuItemsPromise?this.props.getContextMenuItemsPromise(e).then(t=>this.appendStandardMenuItems(e,t)):Promise.resolve([])),D(this,"getContextMenuItems",e=>{if(!0===this.props.appendContextItems){let t=this.appendStandardMenuItems(e,[]);const a=this.props.getContextMenuItems?this.props.getContextMenuItems(e):[];return t.length>0&&a.length>0&&(t=t.concat([o.a.separatorItem]),t=t.concat(a)),t}{const t=this.props.getContextMenuItems?this.props.getContextMenuItems(e):[];return this.appendStandardMenuItems(e,t)}}),D(this,"appendStandardMenuItems",(e,t)=>{const a=this.props.getContextMenuItemProps?this.props.getContextMenuItemProps(e):{},n=()=>{t.length>0&&(t=t.concat([o.a.separatorItem]))};if((a.showNewItem||a.showNewFolder||a.showNewSeparator||a.showEdit||a.showMoveUp||a.showMoveDown||a.showRename)&&(n(),a.showNewItem&&t.push({handler:()=>{this.onAdd(!1)},testVisibility:()=>a.showNewItem,...this.props.getContextMenuNewItemString?this.props.getContextMenuNewItemString():{label:"",labelEnglish:""}}),a.showNewFolder&&t.push({handler:()=>{this.onAdd(!0)},testVisibility:()=>a.showNewFolder,...Object(w.a)("command","New Folder")}),a.showNewSeparator&&t.push({handler:()=>{this.onAdd(!1,{separator:!0})},testVisibility:()=>a.showNewSeparator,...Object(w.a)("New Separator")}),(a.showEdit||a.showRename)&&n(),a.showEdit&&t.push({handler:()=>{this.props.onEdit&&this.props.onEdit()},testVisibility:()=>a.showEdit,...Object(w.a)("verb","Edit")}),a.showRename&&t.push({handler:()=>this.startInlineEditForSelectedItem(),testVisibility:()=>a.showRename,...Object(w.a)("Rename")}),(a.showMoveUp||a.showMoveDown)&&(n(),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!0)},testVisibility:()=>a.showMoveUp,...Object(w.a)("Move Up")}),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!1)},testVisibility:()=>a.showMoveDown,...Object(w.a)("Move Down")}))),a.showCut||a.showCopy||a.showPaste){n();const{document:e}=this.context;t=t.concat([{handler:()=>{e.execCommand("cut")},visible:!0===a.showCut,...Object(w.a)("verb","Cut")},{handler:()=>{e.execCommand("copy")},visible:!0===a.showCopy,...this.props.getContextMenuCopyString?this.props.getContextMenuCopyString():Object(w.a)("verb","Copy")},{handler:()=>{e.execCommand("paste")},visible:!0===a.showPaste,...Object(w.a)("verb","Paste")}])}if((a.showSave||a.showSaveAll)&&(n(),a.showSave&&(t=t.concat([{handler:()=>{this.onSave()},...this.props.getContextMenuSaveString?this.props.getContextMenuSaveString():Object(w.a)("verb","Save")}])),a.showSaveAll&&(t=t.concat([{handler:()=>{this.onSaveAll()},...this.props.getContextMenuSaveAllString?this.props.getContextMenuSaveAllString():Object(w.a)("verb","Save All")}]))),(a.showExport||a.showExportAll)&&(n(),a.showExport&&(t=t.concat([{handler:()=>{this.onExport()},...this.props.getContextMenuExportString?this.props.getContextMenuExportString():Object(w.a)("verb","Export")}])),a.showExportAll&&(t=t.concat([{handler:()=>{this.onExportAll()},...this.props.getContextMenuExportAllString?this.props.getContextMenuExportAllString():Object(w.a)("verb","Export All")}]))),a.showDelete&&(n(),t.push({handler:()=>{this.onDelete(!1)},...this.props.getContextMenuDeleteString?this.props.getContextMenuDeleteString():Object(w.a)("verb","Delete")})),a.showExpandCollapse&&(n(),t=t.concat([{handler:this.expandAll,...Object(w.a)("Expand All Folders")},{handler:this.collapseAll,...Object(w.a)("Collapse All Folders")}])),a.showImport&&(n(),t.push({handler:this.onImport,ellipsis:!0,...this.props.getContextMenuImportString?this.props.getContextMenuImportString():Object(w.a)("Import")})),a.showSettings){n();const e=this.getSearchStyle();t=t.concat([{items:[{type:"checkbox",checked:"flat"===e,handler:this.setSearchStyle.bind(this,"flat"),...Object(w.a)("Flat Search")},{type:"checkbox",checked:"tree"===e,handler:this.setSearchStyle.bind(this,"tree"),...Object(w.a)("Tree Search")}],...Object(w.a)("Settings")}])}return a.showCustomSettings&&(n(),this.props.addCustomSettingMenu&&(t=t.concat([this.props.addCustomSettingMenu()]))),a.showFullscreen&&(n(),t=t.concat([{handler:()=>N.a.toggleFullscreen(this.context.vivaldiWindowId),...Object(w.a)("Fullscreen")}])),t}),D(this,"onResize",e=>{const t=e[0].contentRect;this.updateTreeSize(t.width,t.height)}),D(this,"updateTreeSize",(e,t)=>{this._isMounted&&this.setState({width:e,height:t})}),D(this,"onContextMenu",async e=>{const t=this.getSelectedItem();if(this.props.menu)return e.persist(),e.preventDefault(),e.stopPropagation(),void(this.props.menu&&this.getNamedContextMenuItems(this.props.menu,t).then(a=>{Object(E.a)(this.context.vivaldiWindowId,a,a=>{a&&this.onContextMenuOpen(e,t)})(e)}));let a;e.preventDefault(),e.stopPropagation(),this.props.getContextMenuItemsPromise?(e.persist(),a=await this.getContextMenuItemsPromise(t)):a=this.getContextMenuItems(t),Object(E.a)(this.context.vivaldiWindowId,a,a=>{a&&this.onContextMenuOpen(e,t)})(e)}),D(this,"renderTreeItem",e=>{var t,a;const{key:i,index:s,style:r}=e,o=this.state.renderedArray[s];o.treeIndex=s,void 0===o.id&&(o.id=s);const l=this.selectionModel.isSelected(o.id),c=null===(t=this.state.renderedArray[s-1])||void 0===t?void 0:t.id,u=null===(a=this.state.renderedArray[s+1])||void 0===a?void 0:a.id,m=s>=0&&c&&this.selectionModel.isSelected(c),d=u&&this.selectionModel.isSelected(u),h=this.selectionModel.leadIndex===o.id,b=this.props.cutIds&&this.props.cutIds.indexOf(o.id)>-1;let g=!1;!0===l&&(g=this.state.hasFocus||o.id===this.state.inlineEditId);let N=this.props.enableDragAndDrop&&this.state.inlineEditId!==o.id;N&&this.props.isValidDragSource&&(N=this.props.isValidDragSource(o));const f=this.state.inlineEditId===o.id?this.state.inlineEditText:void 0,_={node:o,isSelected:l,inlineEditText:f,onChange:this.setInlineEditText,onFocus:M,onBlur:()=>{this.saveInlineEdit()}},{rowComponent:v,getRowComponentProps:E}=this.props,C=E?E(_):_;return n.createElement(p.a,{key:i,index:s,Component:v,componentProps:C,treeItem:o,style:r,isExpanded:o.isExpanded,isSeparator:this.props.isSeparator,toggle:this.toggleExpandModel,onContextMenu:this.onContextMenu,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,selected:l,isFirstSelected:l&&!m,isLastSelected:l&&!d,hasFocus:g,lead:h,isCut:b,validateForDrag:this.props.validateForDrag,onDragStart:this.stopInlineEditTimer,supportDrop:this.props.enableDragAndDrop?this.supportDropForItem:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeaveItem:null,onDragOver:this.props.enableDragAndDrop?this.onDragOverItem:null,onDragEnd:this.onDragEndItem,onDrop:this.onDrop,mimeType:this.props.mimeType,getDragData:this.props.getDragData,setCustomDragData:this.props.setCustomDragData,dragover:this.state.dragOverObj.id===o.id,dragOverObj:this.state.dragOverObj,inlineEditText:f,getAllSelectedItems:this.getAllSelectedItems,isFolder:this.props.isFolder,isDraggable:N,hasChildren:this.props.hasChildren,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,enableDragAndDrop:this.props.enableDragAndDrop,__source:{fileName:I,lineNumber:2822,columnNumber:9}})});let a={};"always"===t.defaultFolderExpansion?a=this.getAllFoldersExpandedModel(t.nodes):t.settings&&(a=g.a.getSync("EXPAND_"+t.settings),a||"fallback"!==t.defaultFolderExpansion||(a=this.getAllFoldersExpandedModel(t.nodes)),a||(a={}));const{multiSelect:l}=t;this.selectionModel=new m.a(l),this.state={dragOverObj:this.emptyDragOverObj,hasFocus:!1,expandModel:a,renderedArray:this.getRenderedItems(t.nodes,a,t.sorting),inlineEditId:-1,inlineEditText:"",width:0,height:("number"==typeof t.rowHeight?t.rowHeight:24)*t.nodes.length,isDeleting:!1}}UNSAFE_componentWillMount(){this._updateSelectionStateIfNeeded(this.props)}componentDidMount(){const{selectionStoreKey:e}=this.props;if(e){if(d.a.has(e))throw new Error(`Key ${e} has already been set in\n          SelectionStore. VivaldiTreeList expects instances using\n          selectionStoreKey props to be singleton.`);d.a.set(e,this.selectionModel)}this._initializeSettings(this.props),this._isMounted=!0;const t=c.a.findDOMNode(this);if(t){t.addEventListener("focus",this.onGotFocus,!0);const e=t.parentElement;e&&this.updateTreeSize(e.clientWidth,e.clientHeight)}}UNSAFE_componentWillReceiveProps(e){if(this.props.multiSelect!==e.multiSelect&&(this.selectionModel.multiSelect=Boolean(e.multiSelect)),e.settings!==this.props.settings)this._initializeSettings(e),this._updateSelectionStateIfNeeded(e),this.updateScrollTop();else{let t={};if(Object.keys(this.state.expandModel).length>0&&"always"===this.props.defaultFolderExpansion&&!this.state.isDeleting){const a=this.getAllFoldersExpandedModel(e.nodes);t=Object.assign(a,this.state.expandModel)}else t=this.state.expandModel;!0===this.state.isDeleting&&this.setState({isDeleting:!1}),this.prepareDataForRender(e.nodes,t,e.sorting)}}componentDidUpdate(e,t){if(this.state.renderedArray.length===t.renderedArray.length)this.rerenderVisibleTreeItems();else if(e.columns!==this.props.columns){(e.columns&&e.columns.flatMap(e=>e.id).join())!==(this.props.columns&&this.props.columns.flatMap(e=>e.id).join())&&this.rerenderVisibleTreeItems()}}componentWillUnmount(){this.enableCutCopyPasteListeners(!1),this.stopInlineEditTimer(),this.resetAutoExpandTimer(),this._isMounted=!1;const e=c.a.findDOMNode(this);e&&e.removeEventListener("focus",this.onGotFocus,!0);const{selectionStoreKey:t}=this.props;t&&d.a.get(t)===this.selectionModel&&d.a.delete(t)}render(){const e=this.props.columns&&Object(S.c)(this.props.columns),t=v()(this.props.className,{"vivaldi-tree":!this.props.className,"no-selection":-1===this.selectionModel.anchorIndex});return n.createElement(u.a,{style:{"--gridColumns":e},className:t,onBlur:this.onLostFocus,onKeyDown:this.onKeyDown,onDragOver:this.props.enableDragAndDrop?this.onDragEmptyArea:null,onDragLeave:this.props.enableDragAndDrop?this.cancelDragOverObject:null,onDrop:this.props.enableDragAndDrop?this.onDropEmptyArea:null,onClick:this.unSelectAll,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onContextMenu:this.onContextMenu,onResize:this.onResize,__source:{fileName:I,lineNumber:2891,columnNumber:7}},n.createElement(T.a,{ref:"treeListEntries",onRowsRendered:this.onRowsRendered,onScroll:this.onScroll,width:this.state.width,height:this.state.height,rowHeight:this.props.rowHeight||24,rowRenderer:this.renderTreeItem,rowCount:this.state.renderedArray.length,overscanRowCount:0,onScrollbarPresenceChange:this.props.onScrollbarPresenceChange,scrollToAlignment:this.props.scrollToAlignment,__source:{fileName:I,lineNumber:2906,columnNumber:9}}))}}D(P,"contextType",f.a),D(P,"defaultProps",{enableDragAndDrop:!0,rowHeight:24}),t.a=P}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0);const i=n.createContext({editor:{pageId:NaN},displayDensity:"full",isActivePage:!1,isPanel:!1});t.a=i},,function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return u}));var n=a(303),i=a(7);function s(e){return!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)}function r(e){return e.altKey&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey}function o(e){return!e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey}function l(e){return!e.altKey&&!e.shiftKey&&e.ctrlKey&&!e.metaKey}function c(e){const{altKey:t,shiftKey:a,ctrlKey:n,metaKey:i}=e;return!t&&!a&&n&&!i}const u=(m=!1,function(e,t,a){a=a||null,Object(n.a)(e)?!0!==m&&(m=!0,i.a.tabsPrivate.onKeyboardChanged.addListener((function n(s,r,o,l){var c,u,d;!r&&(c=e.key,u=l,d={ctrlKey:[17],altKey:[18],metaKey:[91,93]},Object.keys(d).filter(e=>c).filter(e=>-1!==d[e].indexOf(u)).some(Boolean))&&(m=!1,t.call(a),i.a.tabsPrivate.onKeyboardChanged.removeListener(n))}))):t.call(a)});var m},function(e,t,a){"use strict";var n=a(12),i=a(16);const s=new class{setNavigationState(e,t,a){n.a.dispatch({actionType:"NAVIGATION_SET_STATE",pageId:e,windowId:t,navigationState:a})}setSSLState(e,t){n.a.dispatch({actionType:"PAGE_SET_SSL_STATE",pageId:e,info:t})}addBlockedPopupEvent(e,t){n.a.dispatch({actionType:i.a.NAVIGATION_ADD_POPUP,pageId:e,popupEvent:t})}removeBlockedPopup(e,t){n.a.dispatch({actionType:i.a.NAVIGATION_REMOVE_POPUP,pageId:e,targetUrl:t})}resetBlockedPopups(e){n.a.dispatch({actionType:i.a.NAVIGATION_RESET_BLOCKED_POPUPS,pageId:e})}setPermission(e,t,a,s,r){n.a.dispatch({actionType:i.a.NAVIGATION_SET_PERMISSION,pageId:e,origin:t,permission:a,requestEvent:s,state:r})}resetPermissions(e){n.a.dispatch({actionType:i.a.NAVIGATION_RESET_PERMISSIONS,pageId:e})}setPageHasBlockedContent(e,t){n.a.dispatch({actionType:i.a.NAVIGATION_SET_BLOCKED_CONTENT,content_type:t,pageId:e})}resetPageHasBlockedContent(e){n.a.dispatch({actionType:i.a.NAVIGATION_RESET_BLOCKED_CONTENT,pageId:e})}};t.a=s},function(e,t,a){"use strict";var n=a(387),i=a(13),s=a(6),r=a(12),o=a(16),l=a(2),c=a(1),u=a(171);const m=new class{newBackgroundTab(e,t){r.a.dispatch({actionType:o.a.TAB_NEW_BACKGROUND_TAB,url:e,addOpenerTabId:t})}switchTabBackBySetting(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_BACK_SETTING,maybeEvent:t})}switchTabForwardBySetting(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_FORWARD_SETTING,maybeEvent:t})}switchTabBackByHistory(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_BACK_HISTORY,maybeEvent:t})}switchTabForwardByHistory(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_FORWARD_HISTORY,maybeEvent:t})}switchTabBackByOrder(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_BACK_ORDER,maybeEvent:t})}switchTabForwardByOrder(e,t){r.a.dispatch({actionType:o.a.TAB_SWITCH_FORWARD_ORDER,maybeEvent:t})}closeAllButActiveTab(){r.a.dispatch({actionType:o.a.TAB_CLOSE_ALL_BUT_ACTIVE_TAB})}stackUntile(){r.a.dispatch({actionType:o.a.TAB_STACK_UNTILE})}stackCreate(){r.a.dispatch({actionType:o.a.TAB_STACK_CREATE})}stackDissolve(){r.a.dispatch({actionType:o.a.TAB_STACK_DISSOLVE})}stackRemove(){r.a.dispatch({actionType:o.a.TAB_STACK_REMOVE})}stackTileGrid(){r.a.dispatch({actionType:o.a.TAB_STACK_TILE_GRID})}stackTileHorizontal(){r.a.dispatch({actionType:o.a.TAB_STACK_TILE_HORIZONTAL})}stackTileVertical(){r.a.dispatch({actionType:o.a.TAB_STACK_TILE_VERTICAL})}viewPageSource(){r.a.dispatch({actionType:o.a.TAB_VIEW_PAGE_SOURCE})}toggleTabThumbnail(){r.a.dispatch({actionType:o.a.TAB_TOGGLE_THUMBNAIL})}async capturePage(e){const t=i.c.unsafeGetActivePage(),a=t?t.id:0;if(a){const t=s.a.get(c.kWebpagesCaptureCompressionFormat),{success:i}=await n.a.captureFullpage(a,t,e);i&&"clipboard"===e&&Object(u.a)({title:Object(l.a)("Page Captured"),body:Object(l.a)("Image stored in the clipboard.")})}}async captureArea(e){try{await n.a.captureAreaCommand(e)}catch(e){}}};t.a=m},,,function(e,t,a){"use strict";var n=a(174),i=a(6),s=a(143),r=a.n(s),o=a(12),l=a(129),c=a(1),u=a(137);function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a{constructor(...e){super(...e),m(this,"getMessagesFrom",e=>this.getState().messages.get(e)),m(this,"hasUnreadMessages",e=>{const t=i.a.get(c.kChatConversationTimestamps).find(t=>t.name===e),a=this.getState().messages.get(e);if(a){const e=n.a.getClient().bareJid;return a.messages.some(a=>{if(!a.delay||!t)return;const n=Object(l.g)(a),i=new Date(a.delay.timestamp).getTime();return t.timestamp<i&&n!==e})}return!1}),m(this,"getLastMessageFrom",e=>{const t=this.getMessagesFrom(e);return t?Object(u.default)(t.messages):""}),m(this,"getActiveConversation",()=>this.getState().active),m(this,"getSortedConversationByNewest",()=>[...this.getState().messages.entries()].sort((e,t)=>{const a=Object(u.default)(e[1].messages),n=Object(u.default)(t[1].messages);return a&&n&&a.delay&&n.delay?new Date(a.delay.timestamp).getTime()<new Date(n.delay.timestamp).getTime()?1:-1:1}).map(e=>e[0])),m(this,"getUnreadCount",()=>{const e=i.a.get(c.kChatConversationTimestamps);let t=0;const a=this.getState(),s=a.active,r=n.a.getClient().bareJid;return a.messages.forEach((a,n)=>{const i=e.find(e=>e.name===n);if(i){a.messages.some(e=>{if(!e.delay)return;const t=new Date(e.delay.timestamp).getTime(),a=Object(l.g)(e);return i.timestamp<t&&n!==s&&a!==r})&&t++}}),t})}getInitialState(){return{messages:new Map,isConnected:!1,isLoggedIn:!1,active:""}}reduce(e,t){switch(t.actionType){case"CHAT_INIT":return{...e,messages:t.messages};case"CHAT_LOG_IN":return{...e,isLoggedIn:!0};case"CHAT_SIGN_OUT":return{...e,isLoggedIn:!1};case"CHAT_HISTORY":case"CHAT_MESSAGE_RECEIVED":case"CHAT_ACTIVITY_ACTION":{const{messages:a}=e;return a.set(t.origin,t.messages),{...e,messages:a}}case"CHAT_CONNECTED":return{...e,isConnected:!0};case"CHAT_DISCONNECTED":return{...e,isConnected:!1};case"CHAT_ACTIVE_ACTION":return{...e,active:t.active}}return e}}t.a=new d(o.a)},,,,,,function(e,t,a){"use strict";var n=a(127),i=a(467),s=a(29),r=a(56),o=a(14),l=a(13),c=a(6),u=a(2),m=a(510),d=a(697),h=a(427),p=a(15),b=a.n(p),g=a(120),N=a(98);function f(e){try{return Object(g.i)(decodeURIComponent(e))}catch(e){return""}}var _=a(3),v=a(23),E=a(260),C=a(192),w=a(1),O=a(349);async function y(e,t,a){const{inReplyTo:n,references:s}=k(e),{bodyParts:r=[]}=e,{cidAttachments:o}=x(r),l=P(r),c=function(e,t,a){let n=M(e,t);n=Object(E.a)(a,n);const i=b()(e.sentDate).format("LLLL (Z)"),s=e.from,r=a?"\n\n":"<br><br>",o=s.length>0?s[0].name||s[0].address:"unknown",l=Object(u.a)("On $1, $2 wrote:",[i,o])+r;return n?a?r+l+"> "+n.replace(/\r?\n/g,"\n> "):`${r}${l}<blockquote style="margin: 0 0 0.80ex; border-left: #0000FF 2px solid; padding-left: 1ex">${n}</blockquote>`:l}(e,o,l),{selectedAccount:m,from:d,messageId:h}=L(e),p=Date.now(),g={selectedAccount:m,messageId:h,from:[...d],subject:D(e,"Re: "),sentDate:p,threadKey:Object(C.b)(p,e.id),attachments:[],to:t,cc:a,bcc:[],plaintext:l,cidAttachments:o,body:c,inReplyTo:n,references:s,focusOnBody:!0,replied:e.id};i.a.set(g),await A()}function S(e){const{from:t,messageId:a,selectedAccount:n}=L(void 0,"account"),i=function(e){const[,t]=e.split(":",2),[a,n=""]=t.split("?",2),i={to:Object(N.g)(f(a))};return n.split("&").forEach(e=>{["cc","bcc"].filter(t=>e.startsWith(t+"=")).forEach(t=>{const a=f(e.substr(t.length+1));i[t]=Object(N.g)(a)}),["body","subject"].filter(t=>e.startsWith(t+"=")).forEach(t=>i[t]=f(e.substr(t.length+1)))}),i}(e),s=Date.now();return{bcc:[],body:"",cc:[],subject:"",...i,attachments:[],from:t,messageId:a,plaintext:!0,selectedAccount:n,sentDate:s,threadKey:Object(C.b)(s)}}function T(e){const{bodyParts:t=[]}=e,a=P(t),{attachments:n,cidAttachments:i}=x(t),s=M(e,i),{inReplyTo:r,references:o,messageId:l,to:c,cc:u,bcc:m,subject:d,sentDate:h}=e,{selectedAccount:p,from:b}=L(e,"message");return{plaintext:a,attachments:n,cidAttachments:i,body:s,inReplyTo:r,references:o,messageId:l,to:c,cc:u,bcc:m||[],subject:d,sentDate:h,selectedAccount:p,from:[...b],threadKey:Object(C.b)(h,e.id)}}function k(e){const{messageId:t,inReplyTo:a,references:n}=e,i={inReplyTo:t,references:n?n.slice():[]};return 0===i.references.length&&a&&i.references.push(a),t&&i.references.push(t),i}async function A(e){const t=I(e);await o.a.openURL(t,{singleton:Boolean(e)})}function I(e){return v.p.internalUrl("mailpage","composer/draft",Object(u.a)("Mail - Draft"),e?JSON.stringify({id:e}):void 0)}function D(e,t=""){if(!e)return"";const a=e.subject||"";return 0===a.indexOf(t)?a:t+a}function M(e,t){const a=Object(d.a)(!0,e.bodyParts);return a&&a.content?"html"===a.type?function(){const i={};t.forEach(e=>{e.id&&(i["cid:"+e.id]=e)});const s=(r=e.from,r&&r.length>0&&n.a.isTrustedEmailAddress(r[0].address));var r;return Object(O.d)(a.content,{attachments:i,blockHTTPLeaks:!e.trusted&&!s}).sanitized}():a.content:""}function P(e){const t=Object(d.a)(!0,e);return!t||"html"!==t.type}function x(e){const t=[],a=[];return Object(E.b)(e).forEach(e=>{if(e.inUse)a.push(e);else{const{id:a,inUse:n,...i}=e;t.push(i)}}),{attachments:t,cidAttachments:a}}function L(e,t){const a=c.a.get(w.kMailDefaultAccount)||_.I,n=c.a.get(w.kMailLastSentFrom),i=c.a.get(w.kMailAccounts);let o,l,u;if(i.length>0){if("account"===t){const e=r.a.getSelectedFolder();if((null==e?void 0:e.accountId)&&(o=i.find(t=>t.MAIL_EMAIL===e.accountId)),!o&&(null==e?void 0:e.accountId)===_.j){const t=null==e?void 0:e.path.split("/")[0];o=i.find(e=>e.MAIL_EMAIL===t)}}else if(e){const{from:a,to:n}=e,r=a.map(e=>e.address),l=n.map(e=>e.address);if("message"===t?r.length>0&&(o=i.find(e=>r.includes(e.MAIL_EMAIL))):l.length>0&&(o=i.find(e=>l.includes(e.MAIL_EMAIL))),!o){const t=s.a.getSourceFilters(e.id),a=new Set(t.map(e=>e.accountId));o=i.find(e=>a.has(e.MAIL_EMAIL))}}!o&&a===_.I&&n&&(o=i.find(e=>e.MAIL_EMAIL===n)),o||a===_.I||(o=i.find(e=>e.MAIL_EMAIL===a)),o||(o=i[0])}return o?(l=[{name:o.MAIL_NAME,address:o.MAIL_EMAIL}],u=Object(m.a)(o.MAIL_EMAIL)):(l=[],u=Object(m.a)()),{selectedAccount:o,from:l,messageId:u}}a.d(t,"b",(function(){return S}));t.a={closeComposer:function(e){const t=I(e);o.a.closeUrl(t)},createDraft:async function(e={}){const{selectedAccount:t,from:a,messageId:n}=L(void 0,"account"),{to:s,subject:r="",body:o=""}=e;if(!t)return;const l=Date.now(),c={selectedAccount:t,messageId:n,subject:r,body:o,from:[...a],sentDate:l,threadKey:Object(C.b)(l),to:s?[...Object(N.g)(s)]:[],cc:[],bcc:[],plaintext:!0,attachments:[]};i.a.set(c),await A()},createDraftFromSent:function(e){const{bodyParts:t=[]}=e,a=P(t),{attachments:n,cidAttachments:s}=x(t),r=M(e,s),{selectedAccount:o,from:l,messageId:c}=L(e,"message"),{to:u,cc:m,bcc:d}=e,h=Date.now(),p={to:u,cc:m,bcc:d||[],sentDate:h,threadKey:Object(C.b)(h),subject:D(e),plaintext:a,attachments:n,cidAttachments:s,body:r,focusOnBody:!0,selectedAccount:o,from:[...l],messageId:c};i.a.set(p),A()},forward:async function(e){const{inReplyTo:t,references:a}=k(e),{bodyParts:n=[]}=e,{attachments:s,cidAttachments:r}=x(n),o=P(n),l=function(e,t,a){const n=M(e,t),i=new Date(parseInt(e.sentDate)),s=Object(N.e)(e.from),r=Object(N.e)(e.to),o=Object(N.e)(e.cc);let l=`\n\n\n----- ${Object(u.a)("Forwarded message")} -----\n`;s&&(l+=Object(u.a)("From: $1",[s])+"\n");r&&(l+=Object(u.a)("To: $1",[r])+"\n");o&&(l+=Object(u.a)("Cc: $1",[o])+"\n");e.subject&&(l+=Object(u.a)("Subject: $1",[e.subject])+"\n");return l+=Object(u.a)("Date: $1",[i.toString()])+"\n\n\n",(a?l:l.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"))+n}(e,r,o),{selectedAccount:c,from:m,messageId:d}=L(e),h=Date.now(),p={selectedAccount:c,messageId:d,from:[...m],sentDate:h,threadKey:Object(C.b)(h,e.id),to:[],cc:[],bcc:[],subject:D(e,"Fwd: "),plaintext:o,attachments:s,cidAttachments:r,body:l,inReplyTo:t,references:a,forwarded:e.id};i.a.set(p),await A()},open:function(e){const t=T(e);i.a.set(t),A(e.id)},prepareDraft:function(e){return Object(h.a)(e).then(e=>{if(!e)return!1;const t=T(e);return i.a.set(t),!0})},reply:async function(e){let t;t=r.a.isSentFolderSelected()?e.to:e.replyTo&&e.replyTo.length>0?e.replyTo:e.from,await y(e,t,[])},replyToAll:async function(e){const t=c.a.get(w.kMailAccounts)||[],{from:a,to:n,replyTo:i,cc:s}=e,r=Object(N.c)(...i,...a,...n).filter(e=>t.every(t=>t.MAIL_EMAIL!==e.address)),o=Object(N.c)(...s).filter(e=>t.every(t=>t.MAIL_EMAIL!==e.address));await y(e,[...r],[...o])},closeMailPages:function(){const e=v.a.mailpage,t=l.c.getMutablePagesInAllWindows().filter(t=>t.url.startsWith(e));o.a.closePage(t)}}},function(e,t,a){"use strict";var n=a(130),i=a(151),s=a(13),r=a(95),o=a(17),l=a(7);const c=["INPUT","FRAME","IFRAME","OBJECT","SELECT","TEXTAREA","EMBED"];function u(){let e;const t=function(t){const{clipboardData:a}=t;a&&a.types.indexOf("text/plain")>-1&&(e=a.getData("text/plain"),t.preventDefault())};return document.addEventListener("paste",t),document.execCommand("paste"),document.removeEventListener("paste",t),e}const m=new class{undo(){l.a.editcommand.execute("undo")}redo(){l.a.editcommand.execute("redo")}cut(){l.a.editcommand.execute("cut")}copy(){l.a.editcommand.execute("copy")}paste(){l.a.editcommand.execute("paste")}selectAll(){l.a.editcommand.execute("selectAll")}set(e){const{body:t}=document;if(!e||!t)return;const a=document.createElement("input");a.style.position="absolute",a.style.zIndex="-1",a.value=e,t.appendChild(a),a.select(),document.execCommand("copy")||console.error("Failed to copy text."),t.removeChild(a)}pasteAsPlainText(){l.a.editcommand.execute("pasteAndMatchStyle")}pasteAsPlainTextOrPasteAndGo(){const e=u();if(o.a.isPopup()){const e=n.a.getActiveWebView();if(e){const t=parseInt(e.id,10);e.getFocusedElementInfo((e,a,n)=>{n&&l.a.editcommand.execute("pasteAndMatchStyle",t)})}return}const{activeElement:t}=document;(null==t?void 0:t.classList.contains("url"))?r.a.doAction("urlPasteAndGo",{clipboardText:e}):(null==t?void 0:t.classList.contains("vivaldi-searchfield"))?r.a.doAction("searchPasteAndGo",{clipboardText:e}):c.indexOf(null==t?void 0:t.tagName)>-1||(null==t?void 0:t.isContentEditable)?l.a.editcommand.execute("pasteAndMatchStyle"):"WEBVIEW"===(null==t?void 0:t.tagName)?t.getFocusedElementInfo((t,a,n)=>{n?l.a.editcommand.execute("pasteAndMatchStyle"):r.a.doAction("urlPasteAndGo",{clipboardText:e})}):r.a.doAction("urlPasteAndGo",{clipboardText:e})}async createNoteFromSelection(){const e=s.c.unsafeGetActivePage().get("id"),t=s.c.unsafeGetActivePage().get("url"),a=u(),n=await l.a.utilities.getSelectedText(e);await i.a.createNote({content:a,url:n===a?t:void 0})}copyUrlToClipboard(e){const t=function(t){t.clipboardData.setData("text/plain",e),t.preventDefault()};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}};t.a=m},function(e,t,a){"use strict";var n=a(14),i=a(253),s=a(12),r=a(10),o=a(540),l=a(7);const c=new class{emptyTrash(){l.a.utilities.clearAllRecentlyClosedSessions()}undeleteTab(e){return new Promise((t,a)=>{const i=JSON.parse(e.extData||"{}").ext_id;n.a.setIsRestored(i,!0),r.a.sessions.restore(e.sessionId,n=>{r.a.runtime.lastError&&(console.warn("Error restoring tab: ",e,r.a.runtime.lastError),a()),t()})})}async undeletePreviousTab(){const e=i.a.getTrash().find(e=>e.tab);(null==e?void 0:e.tab)&&await c.undeleteTab(e.tab)}undeleteWindow(e){r.a.sessions.restore(e.sessionId,t=>{r.a.runtime.lastError&&console.warn("Error restoring page: ",e,r.a.runtime.lastError.message)})}loadPromise(){return new Promise((e,t)=>r.a.sessions.getRecentlyClosed(t=>{r.a.windows.getAll({},a=>{const n=t.filter(e=>{if(e.tab)return!0;if(!e.window)return!1;let t=!0;const n=Object(o.a)(e.window.extData);for(let e=0;e<a.length;e++){if(t=Object(o.a)(a[e].extData).ext_id!==n.ext_id,!t)break}return t});s.a.dispatch({actionType:"CHROME_SET_SESSION",session:n}),e()})}))}};r.a.sessions.onChanged.addListener(c.loadPromise),t.a=c},,,function(e,t,a){"use strict";(function(e){var n=a(31),i=a(0),s=a.n(i),r=a(40),o=a.n(r),l=a(221),c=a(51),u=a(25),m=a(2),d=a(20),h=a.n(d),p=a(78),b=a(4),g=a(153),N=a(9),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortingSelector.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v="vivaldi/x-sortfield";class E extends s.a.PureComponent{constructor(t){super(t),_(this,"getWidth",e=>{const{HTMLElement:t}=this.context,a=o.a.findDOMNode(this),n=a instanceof t?a.getBoundingClientRect():null;n&&n.width&&this.setState({maxWidth:n.width,dataKey:e})}),_(this,"saveColumnsToSettings",()=>{this.dragged="",this.props.onSaveRow&&this.props.onSaveRow()}),_(this,"resizeRow",(e,t,a)=>{const{dataKey:n}=this.state;this.setState(t=>{const i=t.columns?[...t.columns]:[],s=i.flatMap(e=>e.id).indexOf(n),r=a.target.parentElement,o=Math.round(e-r.getClientRects()[0].left),l=s+1,c=r.nextSibling,u=Math.round(r.clientWidth+c.clientWidth)-o;return o<0||u<0?{columns:i}:(i[l].key||0===s&&!i[s].key?i[s]={...i[s],width:o}:i[l]={...i[l],width:u},this.props.onUpdateRow&&this.props.onUpdateRow(i),{columns:i})})}),_(this,"updateField",e=>{const t=e.target.value;let a;a="manually"===t?c.a.NO_SORTING:this.props.sortOrder===c.a.NO_SORTING?c.a.ASCENDING_SORT:this.props.sortOrder,this.props.onSortChange(a,t)}),_(this,"updateSort",(e,t)=>{let a;if(t.preventDefault(),e===this.props.sortField)switch(this.props.sortOrder){case c.a.ASCENDING_SORT:a=c.a.DESCENDING_SORT;break;case c.a.DESCENDING_SORT:a=!1!==this.props.manualSorting?c.a.NO_SORTING:c.a.ASCENDING_SORT;break;case c.a.NO_SORTING:a=c.a.ASCENDING_SORT}else a=c.a.ASCENDING_SORT;a&&this.props.onSortChange(a,e)}),_(this,"updateOrder",()=>{const e=this.props.sortOrder===c.a.DESCENDING_SORT?c.a.ASCENDING_SORT:c.a.DESCENDING_SORT;this.props.onSortChange(e,this.props.sortField)}),_(this,"onDragStart",(e,t)=>{this.dragged=e,t.dataTransfer.setData(v,!0),t.stopPropagation()}),_(this,"onDragOver",(e,t)=>{const{HTMLElement:a}=this.context;if(t.dataTransfer&&!t.dataTransfer.types.includes(v))return;if(t.preventDefault(),t.stopPropagation(),e===this.dragged||!(t.currentTarget instanceof a))return;const n=t.currentTarget.getBoundingClientRect(),i=(t.clientX-n.left)/n.width<=.5?"left":"right";this.setState({dragOverField:{id:e,position:i}})}),_(this,"onDrop",t=>{if(this.state.columns&&void 0!==this.state.dragOverField&&this.state.columns.length>1&&t.dataTransfer.getData(v)){const{columns:a,dragOverField:n}=this.state,i=a.findIndex(e=>e.id===this.dragged),s=Math.max(0,a.findIndex(e=>e.id===n.id)+("right"===n.position?1:0)),r=i-s;if(0===r||!this.state.columns)return;t.preventDefault(),t.stopPropagation(),this.setState(e=>{if(e.columns){const t=[...e.columns];return t.splice(Math.max(0,s-(r<0?1:0)),0,t.splice(i,1)[0]),this.resetDragOverField(),this.props.onUpdateRow&&this.props.onUpdateRow(t),{columns:t}}}),e.nextTick(()=>this.saveColumnsToSettings())}}),_(this,"resetDragOverField",()=>{this.setState({dragOverField:void 0})}),_(this,"resetColumns",()=>{const e=Object(g.d)(this.props.fields);e&&(this.setState({columns:e}),this.props.onUpdateRow&&this.props.onUpdateRow(e))}),_(this,"onContextMenu",e=>{if(!this.state.columns)return;const t=this.state.columns.flatMap(e=>e.id),a=this.props.fields.filter(e=>!e.key).map(e=>({handler:this.toggleColumn.bind(this,e.value),type:"checkbox",checked:t.includes(e.value),...n.a.makeLabelPair(e.text)}),[]);this.props.columns&&(a.push(n.a.separatorItem),a.push({handler:this.resetColumns,...Object(b.a)("Reset Columns")})),Object(p.a)(this.context.vivaldiWindowId,a)(e)}),_(this,"toggleColumn",t=>{if(!this.state.columns)return;const a=this.state.columns.flatMap(e=>e.id);a.includes(t)?this.setState(e=>{const n=e.columns||[];if(n){const e=a.indexOf(t),i=[...n.slice(0,e),...n.slice(e+1)];return this.props.onUpdateRow&&this.props.onUpdateRow(i),{columns:i}}}):this.setState(e=>{const a=e.columns||[],n=this.props.fields.find(e=>e.value===t);if(n&&a.length>0){const e=this.props.fields.indexOf(n),i=[...a.slice(0,e),{id:t,width:n.width||20},...a.slice(e)];return this.props.onUpdateRow&&this.props.onUpdateRow(i),{columns:i}}}),e.nextTick(()=>this.saveColumnsToSettings())}),_(this,"_getSortLabel",e=>{const t=e.text,a=e.value,n=this.props.sortField===a,i=e.fullScreenTitle,{dragOverField:r}=this.state,o=r&&r.id===e.value,u=r&&r.position||"",d=h()({"sortselector-button":!0,"sortselector-button-active":n&&this.props.sortOrder!==c.a.NO_SORTING,"direction-ascending":n&&this.props.sortOrder===c.a.ASCENDING_SORT,"direction-descending":n&&this.props.sortOrder===c.a.DESCENDING_SORT,"over-left":o&&"left"===u,"over-right":o&&"right"===u,"drag-over":o}),{columns:p}=this.state,b=p.findIndex(e=>e.id===a),g=p[b];return s.a.createElement("div",{key:"key_"+a+t+i,onContextMenu:this.onContextMenu,__source:{fileName:f,lineNumber:365,columnNumber:7}},s.a.createElement("button",{draggable:1!==this.props.fields.length,onDragStart:this.onDragStart.bind(this,a),onDragOver:this.onDragOver.bind(this,a),onDragLeave:this.resetDragOverField,onDrop:this.onDrop,className:d,onClick:this.updateSort.bind(this,a),title:i||Object(m.a)("Toggle Sort Order"),disabled:!a,tabIndex:this.props.keyAccess,__source:{fileName:f,lineNumber:368,columnNumber:9}},g&&g.width<80?s.a.createElement("span",{className:"column-icon",dangerouslySetInnerHTML:{__html:e.icon?e.icon:N.ib.small},__source:{fileName:f,lineNumber:380,columnNumber:15}}):s.a.createElement("span",{className:"column-label",__source:{fileName:f,lineNumber:385,columnNumber:15}},t),s.a.createElement("span",{className:"column-sort-order",dangerouslySetInnerHTML:{__html:N.S},__source:{fileName:f,lineNumber:387,columnNumber:13}})),p&&b>-1&&b<p.length-1&&s.a.createElement(l.a,{onSlidebarPosition:this.resizeRow,onStart:()=>this.getWidth(a),onStop:this.saveColumnsToSettings,style:this.props.style,position:"right",__source:{fileName:f,lineNumber:393,columnNumber:11}}))}),this.state={columns:t.columns||[],maxWidth:0,dataKey:"",dragOverField:void 0}}render(){const e=h()({"sortselector-button":!0,"direction-ascending":this.props.sortOrder===c.a.ASCENDING_SORT,"direction-descending":this.props.sortOrder===c.a.DESCENDING_SORT});let t=this.state.columns&&this.state.columns.length>0?this.state.columns.map(e=>{const t=this.props.fields.find(t=>t.value===e.id);if(t)return this._getSortLabel(t)}):this.props.fields.map(e=>this._getSortLabel(e));if(!0===this.props.fullsize){const e=this.props.columns&&Object(g.c)(this.props.columns);return(s.a.createElement("div",{className:h()("sortselector","sortselector-tableheader",{"tableheader-add-scrollbar-spacing":!!this.props.alignHeaderWithScrollbar}),style:{gridTemplateColumns:e},__source:{fileName:f,lineNumber:425,columnNumber:9}},t))}return 1!==this.props.fields.length||this.props.compact?(t=this.props.fields.map(e=>s.a.createElement("option",{key:e.value,value:e.value,__source:{fileName:f,lineNumber:445,columnNumber:11}},e.fullScreenTitle)),!1!==this.props.manualSorting&&t.unshift(s.a.createElement("option",{key:"manually",value:"manually",__source:{fileName:f,lineNumber:453,columnNumber:11}},Object(m.a)("Sort Manually"))),s.a.createElement("div",{className:"sortselector sortselector-compact",__source:{fileName:f,lineNumber:460,columnNumber:9}},s.a.createElement("div",{className:"sortselector-area",__source:{fileName:f,lineNumber:461,columnNumber:11}},s.a.createElement("select",{className:"sortselector-dropdown",title:Object(m.a)("Sort by..."),value:this.props.sortField,tabIndex:this.props.keyAccess,onChange:this.updateField,__source:{fileName:f,lineNumber:462,columnNumber:13}},t)),s.a.createElement("button",{className:e,onClick:this.updateOrder,title:this.props.sortOrder===c.a.ASCENDING_SORT?Object(m.a)("Sort Descending"):Object(m.a)("Sort Ascending"),tabIndex:this.props.keyAccess,disabled:this.props.sortOrder===c.a.NO_SORTING&&"disabled",dangerouslySetInnerHTML:{__html:N.S},__source:{fileName:f,lineNumber:471,columnNumber:11}}))):s.a.createElement("div",{className:"sortselector sortselector-tableheader single",__source:{fileName:f,lineNumber:437,columnNumber:9}},t)}}_(E,"contextType",u.a),t.a=E}).call(this,a(82))},,,function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=new class{constructor(){n(this,"mailAddresses",[]),n(this,"addressMap",new Map),n(this,"nameMap",new Map),n(this,"clear",()=>{this.mailAddresses=[],this.addressMap=new Map,this.nameMap=new Map}),n(this,"add",e=>{const{address:t,name:a=""}=e,n=this.addressMap.get(t)||[],i=this.nameMap.get(a)||[];let s=n.find(e=>i.includes(e));return void 0!==s?s:(s=this.mailAddresses.length,this.mailAddresses.push(e),0===n.length?this.addressMap.set(t,[s]):n.push(s),0===i.length?this.nameMap.set(a,[s]):i.push(s),s)}),n(this,"get",e=>e.map(e=>this.mailAddresses[e]))}}},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=(e=e.replace(/left/g,"←").replace(/right/g,"→").replace(/up/g,"↑").replace(/down/g,"↓")).replace(/(^|\+)(\w)/g,e=>e.toUpperCase())),e),i=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=e.replace(/(^|\+)(\w)/g,e=>e.toUpperCase())),e)},,function(e,t,a){"use strict";var n=a(237),i=a(12),s=a(10),r=a(254),o=a(7);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e){return new Promise(t=>{s.a.downloads.search(e,t)})}t.a=new class{constructor(){l(this,"_isPolling",!1),l(this,"_openAfterDownload",new Set),l(this,"_dispatchUpdate",e=>{i.a.dispatch({actionType:"DOWNLOAD_PANEL_UPDATED",downloadItems:e})}),l(this,"_replaceDownloadItem",(e,t)=>{const a=n.a.getItems(),i=a.find(t=>t.id===e.id);if(!i)return;const s=a.indexOf(i),r=[...a.slice(0,s),t,...a.slice(s+1)];this._dispatchUpdate(r)}),l(this,"_startPolling",()=>{this._isPolling||(this._intervalId=setInterval(this._pollInProgressDownloads,500),this._isPolling=!0)}),l(this,"_stopPolling",()=>{this._isPolling=!1,clearInterval(this._intervalId)}),l(this,"_handleNewDownloadItem",e=>{const t=n.a.getFilter(),a=n.a.getOrderBy(),o={...Object(r.a)(t?{query:t.split(" ")}:null),...Object(r.a)(a?{orderBy:[a]}:null)};s.a.downloads.search(o,t=>{this._dispatchUpdate(t);const a=n.a.getItems().find(t=>t.id===e);a&&i.a.dispatch({actionType:"DOWNLOAD_STARTED",downloadItem:a})})}),l(this,"_updateState",e=>{const t=n.a.getItems(),a=t.findIndex(t=>t.id===e.id);if(-1===a)return void this._handleNewDownloadItem(e.id);const i=[...t.slice(0,a),e,...t.slice(a+1)];this._dispatchUpdate(i)}),l(this,"_updateStateForDownloadItems",e=>{e.forEach(this._updateState)}),l(this,"_handleInProgressSearch",e=>{e.filter(e=>!e.paused).length||this._stopPolling(),this._setTotalProgress(e),this._updateStateForDownloadItems(e)}),l(this,"_handleFileDeleted",(e,t)=>{this._pollInProgressDownloads(),e?s.a.downloads.search({id:e,limit:1},a=>{if(!a||!Array.isArray(a))return void console.warn(`DownloadActions: _handleFileDeleted: Failed to search downloads for ID ${e} (${t})`);const n=a[0];n&&this._updateState(n)}):console.warn(`DownloadActions: _handleFileDeleted: Invalid download ID ${e} (${t})`)}),l(this,"_pollInProgressDownloads",()=>{s.a.downloads.search({state:"in_progress"},this._handleInProgressSearch)}),l(this,"_setTotalProgress",e=>{const t=e.filter(e=>!e.paused),a=t.length,n=function(e){return e.length?e.map(e=>e.bytesReceived/e.totalBytes).reduce((e,t)=>e*t):0}(t);i.a.dispatch({actionType:"DOWNLOAD_SET_TOTAL_PROGRESS",totalNumberOfDownloads:a,totalProgress:n})}),l(this,"_handleDangerousFileDownload",e=>{s.a.windows.getLastFocused(t=>{t.id===window.vivaldiWindowId&&s.a.downloads.acceptDanger(e,()=>{s.a.runtime.lastError,0})})}),l(this,"_onTransferChanged",e=>{e.paused&&e.paused.previous&&!e.paused.current?this._onTransferCreated():(e.filename&&this._handleNewDownloadItem(e.id),e.danger&&e.danger.current!==e.danger.previous&&this._handleDangerousFileDownload(e.id),e.exists&&!e.exists.current&&this._handleFileDeleted(e.id,"Deleted from disk"),e.state&&("interrupted"===e.state.current&&this._handleFileDeleted(e.id,"Interrupted"),"complete"===e.state.current&&(s.a.downloads.search({id:e.id,limit:1},([e])=>{this._updateState(e),this._pollInProgressDownloads(),i.a.dispatch({actionType:"DOWNLOAD_COMPLETED",downloadItem:e})}),this._openAfterDownload.has(e.id)&&(s.a.downloads.open(e.id),this._openAfterDownload.delete(e.id)))))}),l(this,"_onTransferErased",e=>{const t=n.a.getItems(),a=t.findIndex(t=>t.id===e);if(-1===a)return;const i=[...t.slice(0,a),...t.slice(a+1)];this._dispatchUpdate(i)}),l(this,"_onTransferCreated",()=>{this._startPolling()}),l(this,"_showDownload",e=>{s.a.downloads.show(e)}),l(this,"_openDownload",e=>{s.a.downloads.open(e)}),l(this,"_pauseDownload",e=>{s.a.downloads.pause(e)}),l(this,"_resumeDownload",e=>{s.a.downloads.resume(e)}),l(this,"_eraseDownload",e=>{s.a.downloads.erase({id:e})}),l(this,"_restartDownload",e=>c({id:e}).then(([t])=>{return(a={url:t.url},new Promise(e=>{s.a.downloads.download(a,e)})).then(e=>c({id:e})).then(([e])=>this._replaceDownloadItem(t,e)).then(()=>{return t={id:e},new Promise(e=>{s.a.downloads.erase(t,e)});var t});var a})),l(this,"forceUpdate",()=>{const e=n.a.getFilter(),t=n.a.getOrderBy();this._searchDownloads({filter:e,orderBy:t}).then(e=>{i.a.dispatch({actionType:"DOWNLOAD_SET_ORDER_BY",downloadItems:e,orderBy:t})})}),l(this,"ready",(()=>{let e,t,a;return Promise.race([function t(a=0){return new Promise(n=>{o.a.utilities.isDownloadManagerReady(i=>{if(i)return n();a++,e=setTimeout(()=>t(a),1e3*a)})})}(),new Promise(e=>{a=()=>{e()},o.a.utilities.onDownloadManagerReady.addListener(a)}),new Promise(e=>{t=setTimeout(e,2e4)})]).then(()=>{clearTimeout(e),clearTimeout(t),o.a.utilities.onDownloadManagerReady.removeListener(a)})})()),l(this,"addOpenAfterDownload",e=>{this._openAfterDownload.add(e)}),l(this,"setSearchFilter",e=>this.ready.then(()=>this._setSearchFilter(e))),l(this,"setOrderBy",e=>this.ready.then(()=>this._setOrderBy(e))),l(this,"showDownload",e=>{this.ready.then(()=>{this._showDownload(e)})}),l(this,"eraseDownload",e=>{this.ready.then(()=>{this._eraseDownload(e)})}),l(this,"openDownload",e=>{this.ready.then(()=>{this._openDownload(e)})}),l(this,"pauseDownload",e=>{this.ready.then(()=>{this._pauseDownload(e)})}),l(this,"resumeDownload",e=>{this.ready.then(()=>{this._resumeDownload(e)})}),l(this,"restartDownload",e=>this.ready.then(()=>this._restartDownload(e))),l(this,"loadPromise",()=>(s.a.downloads.setShelfEnabled(!1),s.a.downloads.onChanged.addListener(this._onTransferChanged),s.a.downloads.onCreated.addListener(this._onTransferCreated),s.a.downloads.onErased.addListener(this._onTransferErased),this.ready.then(this._startPolling),Promise.resolve()))}_searchDownloads({filter:e,orderBy:t}){return new Promise(a=>{const n={...Object(r.a)(e?{query:e.split(" ")}:null),...Object(r.a)(t?{orderBy:[t]}:null)};s.a.downloads.search(n,e=>{a(e)})})}_setSearchFilter(e){if(e===n.a.getFilter())return Promise.resolve();const t=n.a.getOrderBy();return this._searchDownloads({filter:e,orderBy:t}).then(t=>{i.a.dispatch({actionType:"DOWNLOAD_SET_FILTER",downloadItems:t,filter:e})})}_setOrderBy(e){if(e===n.a.getOrderBy())return Promise.resolve();const t=n.a.getFilter();return this._searchDownloads({filter:t,orderBy:e}).then(t=>{i.a.dispatch({actionType:"DOWNLOAD_SET_ORDER_BY",downloadItems:t,orderBy:e})})}}},,,,,,,function(e,t,a){"use strict";var n=a(0),i=a(6);t.a=function(e){const[t,a]=n.useState(i.a.getList(e));return n.useEffect(()=>{function t(e,t,n){a(e=>({...e,[n]:t}))}return e.forEach(e=>i.a.addListener(e,t)),()=>{e.forEach(e=>i.a.removeListener(e,t))}},[e]),t}},function(e,t,a){"use strict";a.d(t,"b",(function(){return u}));var n=a(0),i=a(395),s=a(135),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keywordFound.js";const o=function(e,t){var a;if(!e)return[!1,e];if("string"==typeof e){const a=l(e,t);return[a,a?u(e,t):e]}if(e.type===s.b){const a=l(e.props.text,t);return[a,a?u(e,t):e]}if(!("input"!==e.type&&"textarea"!==e.type||"string"!=typeof e.props.value&&"string"!=typeof e.props.defaultValue||"radio"===e.props.type||"checkbox"===e.props.type||"password"===e.props.type)){const a=l("string"==typeof e.props.value?e.props.value:e.props.defaultValue,t);return[a,a?c(e,t):e]}if("select"===e.type){let a=!1;return n.Children.forEach(e.props.children,e=>{(null==e?void 0:e.props.children)&&"string"==typeof(null==e?void 0:e.props.children)&&(null==e?void 0:e.props.children.toLowerCase().includes(t))&&(a=!0)}),[a,a?c(e,t):e]}if(null===(a=e.props)||void 0===a?void 0:a.children){let a=!1;const i=n.cloneElement(e,e.props,n.Children.map(e.props.children,e=>{const[n,i]=o(e,t);return a=a||n,[a,i]}));return[a,i]}return[!1,e]};function l(e,t){return e.toLowerCase().includes(t.toLowerCase())}const c=(e,t)=>n.createElement("div",{className:"settings-text-bubble-highlight-wrapper",__source:{fileName:r,lineNumber:71,columnNumber:5}},e,n.createElement("mark",{className:"settings-text-bubble-highlight",__source:{fileName:r,lineNumber:73,columnNumber:7}},t));const u=(e,t)=>{if(!t||!e)return e;if(e.type===s.b)return function(e,t){const a=new RegExp(Object(i.a)(t),"gi"),s=e.props.text.match(a)||[];return n.cloneElement(e,{highlight:{matches:s,regExp:a}})}(e,t);if("string"!=typeof e)return e;const a=new RegExp(Object(i.a)(t),"gi"),o=e.match(a)||[],l=e.split(a).reduce((e,t,a)=>{let i=e;return a&&(i=i.concat([n.createElement("mark",{key:a,__source:{fileName:r,lineNumber:107,columnNumber:37}},o[a-1])])),i=i.concat([t]),i},[]);return n.createElement("span",{__source:{fileName:r,lineNumber:112,columnNumber:20}},l)};t.a=function(e,t){if(!t)return e;const[a,n]=o(e,t);return a?n:null}},,,function(e,t,a){"use strict";var n=a(74),i=a(0),s=a.n(i),r=a(25),o=a(20),l=a.n(o);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}(e,t,"get"))}var m=new WeakMap;class d extends s.a.Component{constructor(...e){super(...e),m.set(this,{writable:!0,value:s.a.createRef()}),c(this,"componentDidMount",()=>{const e=u(this,m).current;e&&(e.addEventListener("pointerdown",this.handlePointerDown,!0),e.addEventListener("pointerup",this.handlePointerUp,!0),e.addEventListener("pointercancel",this.handleStop,!0))}),c(this,"componentWillUnmount",()=>{const e=u(this,m).current;e&&(e.removeEventListener("pointerdown",this.handlePointerDown,!0),e.removeEventListener("pointerup",this.handlePointerUp,!0),e.removeEventListener("pointercancel",this.handleStop,!0))}),c(this,"handleDoubleClick",e=>{this.props.onDoubleClick&&(this.props.onDoubleClick(),e.stopPropagation())}),c(this,"handlePointerDown",e=>{e.preventDefault(),0===e.button&&(e.currentTarget.setPointerCapture(e.pointerId),n.a.setWebviewPointerEvents(!1,this.context.document),e.currentTarget.addEventListener("pointermove",this.handlePointerMove,!0),this.props.onStart&&this.props.onStart())}),c(this,"handlePointerUp",e=>{1===e.button?this.handleDoubleClick(e):this.handleStop(e)}),c(this,"handlePointerMove",e=>{if(!e.buttons)return void this.handleStop(e);const t=this.props.returnOffset?e.movementX:e.pageX+(this.props.offset||0),a=this.props.returnOffset?e.movementY:e.pageY+(this.props.offset||0);window.requestAnimationFrame(()=>{this.props.onSlidebarPosition(t,a,e)})}),c(this,"handleStop",({currentTarget:e,pointerId:t})=>{e.releasePointerCapture(t),n.a.setWebviewPointerEvents(!0,this.context.document),e.removeEventListener("pointermove",this.handlePointerMove,!0),this.props.onStop&&this.props.onStop()})}render(){const{position:e}=this.props,t="left"===e||"right"===e?"SlideBar--FullHeight":"SlideBar--FullWidth",a="right"===e||"bottom"===e;return s.a.createElement("button",{type:"button",tabIndex:"-1",ref:u(this,m),style:this.props.style,onDoubleClick:this.handleDoubleClick,className:l()("SlideBar",this.props.className,t,{alternate:a}),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SlideBar.jsx",lineNumber:130,columnNumber:7}})}}c(d,"contextType",r.a),c(d,"defaultProps",{offset:0}),t.a=d},function(e,t,a){"use strict";var n=a(0),i=a(9),s="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FormFeedback.jsx";function r(e){switch(e){case"error":return i.Dd;case"warning":return i.Hd;case"success":return i.Gd;case"info":default:return i.Ed}}class o extends n.Component{constructor(...e){var t,a,i;super(...e),t=this,a="_refFeedback",i=n.createRef(),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}componentDidMount(){var e;null===(e=this._refFeedback.current)||void 0===e||e.scrollIntoViewIfNeeded()}componentDidUpdate(){var e;null===(e=this._refFeedback.current)||void 0===e||e.scrollIntoViewIfNeeded()}render(){const{type:e,children:t}=this.props;return(n.createElement("div",{ref:this._refFeedback,className:`FormFeedback FormFeedback--${e}`,__source:{fileName:s,lineNumber:55,columnNumber:7}},n.createElement("span",{className:"FormFeedback-Icon",dangerouslySetInnerHTML:{__html:r(e)},__source:{fileName:s,lineNumber:58,columnNumber:9}}),t))}}t.a=o},,,,,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12);let r={},o=!1;const l=new class extends i.a{getAll(){return r}hasLoadedFolders(){return o}getFoldersOfType(e,t){return r[e].folders[t]}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}clear(){r={},o=!1}};l.dispatchToken=s.a.register(e=>{switch(e.actionType){case"MAIL_ADD_ACCOUNTS":r={...r,...e.accounts},l.emitChange();break;case"MAIL_REPLACE_ACCOUNTS":r=e.accounts,o=!0,l.emitChange();break;case"MAIL_REMOVE_ACCOUNT":delete r[e.accountId],r={...r},l.emitChange();break;case"MAIL_STOP":l.clear()}}),t.a=l},function(e,t,a){"use strict";var n=a(6),i=a(772);var s=function(e){try{return decodeURI(Object(i.a)(e))}catch(t){return e}},r=a(700),o=a(7),l=a(46),c=a(84),u=a(743),m=a(137),d=a(1),h=a(23);function p(){return{scheme:null,username:null,password:null,host:null,path:null,ref:null,query:null,port:null,tld:null}}function b(e){if(!e)return"";const t=Object(c.parse)(e);"view-source:"!==t.protocol&&("mailto:"!==t.protocol&&(t.auth=""),e=Object(c.format)(t));const a=n.a.get(d.kAddressBarShowFullUrl)?h.p.getDisplayUrl(e):Object(l.s)(h.p.getDisplayUrl(e));return s(a)}function g(e){const t=e.scheme&&!l.a.includes(`${e.scheme}:`)&&"vivaldi"!==e.scheme,a=e.path&&"/"!==e.path||e.query||e.ref?e.path:"",n=null!==e.query?`?${e.query}`:"",i=null!==e.ref?`#${e.ref}`:"";return(e.scheme?`${e.scheme}:${t?"//":""}`:"")+(e.username?e.username:"")+(e.password?`:${e.password}`:"")+(e.username||e.password?"@":"")+(e.host?e.host:"")+(e.port?`:${e.port}`:"")+(a||"")+(n||"")+(i||"")}function N(e){const t=n.a.get(d.kAddressBarShowFullUrl),a=f(e,["tld","host","port","path",...t?["scheme"]:[],...t?["ref"]:[],...t?["query"]:[]]),i=a.path&&"/"!==a.path||a.query?a.path:"";return{...a,path:i}}function f(e,t){const a=t.includes("username"),n=t.includes("password"),i=t.includes("tld"),s=t.includes("host"),r=t.includes("port"),o=t.includes("path"),l=t.includes("scheme"),c=t.includes("ref"),u=t.includes("query");return{scheme:l?e.scheme:"",username:a?e.username:"",password:n?e.password:"",host:s?e.host:"",path:o?e.path:"",ref:c?e.ref:"",query:u?e.query:"",port:r?e.port:"",tld:i?e.tld:""}}async function _(e){const t=h.p.getDisplayUrl(e);if(!t)return{scheme:null,username:null,password:null,host:null,path:null,ref:null,query:null,port:null,tld:null};const a=await o.a.utilities.getUrlFragments(t);return a.scheme?function(e){const t=Object(r.a)(e.path.fragment),a=Object(r.a)(e.ref.fragment),n=e.query.fragment;return{scheme:""===e.scheme.fragment&&e.scheme.begin===e.scheme.end?null:e.scheme.fragment,username:""===e.username.fragment&&e.username.begin===e.username.end?null:e.username.fragment,password:""===e.password.fragment&&e.password.begin===e.password.end?null:e.password.fragment,host:""===e.host.fragment&&e.host.begin===e.host.end?null:e.host.fragment,path:""===t&&e.path.begin===e.path.end?null:t,ref:""===a&&e.ref.begin===e.ref.end?null:a,query:""===n&&e.query.begin===e.query.end?null:n,port:""===e.port.fragment&&e.port.begin===e.port.end?null:e.port.fragment,tld:""===e.tld.fragment&&e.tld.begin===e.tld.end?null:e.tld.fragment}}(a):{scheme:null,username:null,password:null,host:null,path:null,ref:null,query:null,port:null,tld:null}}function v(e,t){if(!t||!e)return null;const a=e.substring(0,e.length-t.length).split(".").filter(Boolean),n=Object(u.a)(a).join(".");return{basedomain:Object(m.default)(a),subdomain:n,tld:t}}a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return b})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return N})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return _})),a.d(t,"g",(function(){return v}))},function(e,t,a){"use strict";var n=a(12),i=a(16),s=a(35),r=a(125),o=a.n(r),l=a(224);function c(e,t){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_SET_COLLECTION,collection:t,writeToSettings:!1})}const u=new class{loadPromise(){return new Promise((e,t)=>{const a=s.a.getSync("SEARCH_ENGINE_COLLECTION"),r=s.a.getDefaultSearchEngines();if(a.version!==r.version){const e={...a};e.version=r.version,e.engines=Object(l.a)(e.engines),r.engines.forEach(t=>{const a=e.engines.find(e=>e.id===t.id);if(a){if(!0!==a.removed)if(a.custom)if(a.url===(t.url||"")&&a.suggestUrl===(t.suggestUrl||"")&&a.name===(t.name||"")&&a.post===Boolean(t.post)){const n={...t};n.custom=!0,n.keyword=a.keyword;const i=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(i,1,n)}else{const n={...a};n.id=o()(),e.engines.push(n),e.default===a.id&&(e.default=n.id),e.defaultPrivate===a.id&&(e.defaultPrivate=n.id);const i=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(i,1,t)}else{const n={historyId:a.historyId,...t};n.post=Boolean(t.post);const i=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(i,1,n)}}else e.engines.push(t)}),e.engines=e.engines.map(t=>(-1!==r.engines.findIndex(e=>e.id===t.id)||!1!==Boolean(t.custom)||e.default!==t.id&&e.defaultPrivate!==t.id||(t.custom=!0),t)).filter(t=>-1!==r.engines.findIndex(e=>e.id===t.id)||!1!==Boolean(t.custom)||(e.default===t.id&&(e.default=r.default,e.defaultChanged=!1),e.current===t.id&&(e.current=void 0),!1)),e.default!==r.default&&!0!==e.defaultChanged&&(e.default=r.default);const t=[];e.engines.forEach((a,n)=>{!0!==a.removed&&!0===a.custom&&a.keyword&&(-1===t.findIndex(e=>e===a.keyword)?t.push(a.keyword):e.engines[n].keyword="")}),e.engines.forEach((a,n)=>{!0!==a.removed&&!0!==a.custom&&a.keyword&&(-1===t.findIndex(e=>e===a.keyword)?t.push(a.keyword):e.engines[n].keyword="")}),s.a.set({SEARCH_ENGINE_COLLECTION:e}),n.a.dispatch({actionType:i.a.SEARCH_ENGINES_INIT,collection:e})}else n.a.dispatch({actionType:i.a.SEARCH_ENGINES_INIT,collection:a});s.a.addListener("SEARCH_ENGINE_COLLECTION",c),e()})}add(e,t){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_ADD,engine:e,makeDefault:t})}remove(e){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_REMOVE,id:e})}modify(e,t){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_MODIFY,engine:e,makeDefault:t})}reorder(e,t){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_REORDER,id:e,index:t})}setDefault(e,t,a=!0){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"defaultPrivate":"default",writeToSettings:a})}setDefaultForSearchField(e,t,a=!0){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"currentPrivate":"current",writeToSettings:a})}setDefaultForSpeedDial(e,t){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"currentSD",writeToSettings:!t})}setDefaultForContextMenu(e,t=!0){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"context",writeToSettings:t})}restore(e){n.a.dispatch({actionType:i.a.SEARCH_ENGINES_RESTORE,keepCustomSearches:e})}};t.a=u},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="vivaldi/x-calendar-event",i="vivaldi/x-calendar-create-event"},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),s=a(491),r=a(40);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e){return Object(n.forwardRef)((function(t,a){if("function"==typeof a)throw Error("Callback refs not supported");const[l,c]=Object(n.useState)(!1),u=Object(n.useCallback)(()=>c(!1),[]),m=Object(n.useCallback)(()=>c(!0),[]),d=Object(n.useRef)(null),h=a||d,p=Object(n.useCallback)(()=>h.current?Object(r.findDOMNode)(h.current):null,[h]),b=Object(n.useCallback)(()=>h.current?h.current.handleClickOutside:null,[h]),{disableOnClickOutside:g,eventTypes:N,outsideClickIgnoreClass:f,..._}=t;return Object(s.a)(p,b,f,g||l,N),i.a.createElement(e,o({},_,{ref:h,enableOnClickOutside:u,disableOnClickOutside:m,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertClickOutside.jsx",lineNumber:54,columnNumber:12}}))}))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const n=/(\b(https?|ftp):\/\/\S+)/gi;function i(e){let t="";for(;e.endsWith(".")||e.endsWith(">")||e.endsWith(":");)t=e.substr(e.length-1)+t,e=e.substr(0,e.length-1);return`<a href="${e}" target="_blank">${e}</a>${t}`}function s(e){return e.replace(n,i).replace(/(^|[^\/])(www\.[^ \f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff>]+(\b|$))/gi,'$1<a href="http://$2" target="_blank">$2</a>').replace(/(^|[^\/:=])\b([A-Z0-9\-\_\.]+@[A-Z\_-]+(\.[A-Z]+)+)/gi,'$1<a href="mailto:$2">$2</a>')}},,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(17);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.a{constructor(){super(),o(this,"_downloadItems",[]),o(this,"_totalNumberOfDownloads",0),o(this,"_totalProgress",0),o(this,"_filter",""),o(this,"addChangeListener",e=>{this.on("change",e)}),o(this,"removeChangeListener",e=>{this.removeListener("change",e)}),s.a.register(e=>{switch(e.actionType){case"DOWNLOAD_PANEL_UPDATED":return this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"});case"DOWNLOAD_COMPLETED":return void this._emitChange({reason:"download_completed",downloadItem:e.downloadItem});case"DOWNLOAD_STARTED":return void this._emitChange({reason:"download_started",downloadItem:e.downloadItem});case"DOWNLOAD_SET_TOTAL_PROGRESS":return this._totalProgress=e.totalProgress,this._totalNumberOfDownloads=e.totalNumberOfDownloads,void this._emitChange({reason:"download_total_progress_changed"});case"DOWNLOAD_SET_FILTER":return this._filter=e.filter,this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"});case"DOWNLOAD_SET_ORDER_BY":return this._orderBy=e.orderBy,this._downloadItems=e.downloadItems,void this._emitChange({reason:"download_panel_updated"})}})}_emitChange(e){this.emit("change",e)}getTotalNumberOfDownloads(){return this._totalNumberOfDownloads}getTotalProgress(){return this._totalProgress}getFilter(){return this._filter}getOrderBy(){return this._orderBy}getItems(){const e=r.a.isIncognito();return this._downloadItems.filter(t=>!(!e&&t.incognito)).filter(e=>!("interrupted"===e.state&&""===e.filename))}}t.a=new l},,,,function(e,t,a){"use strict";var n=a(119),i=a(2),s=a(104),r=a(8);var o=async function(e){0!==e.searchListIds.length?await r.a.flaggingQueue.add(e):console.warn("Not queueing flag update request with no searchListIds")},l=a(539),c=a(3),u=a(66);function m(e,t,a,n){return d(e,{[t]:a},void 0,n)}function d(e,t,a=new Map,i){const r=e.map(e=>e.searchListId),c=new Map,m=[];if(e.forEach(e=>{const n={},i=Object(u.v)(e.flags,t);e.flags=n.flags=i;const s=a.get(e.searchListId);if(s&&s.size>0){const t=new Map,a=new Map;s.forEach((i,s)=>{t.set(s,i),!0===i.read&&(e.unseen=n.unseen=!1);const r=e.sources.get(s);if(r){const e={};for(const t of Object.keys(i))i[t]!==r[t]&&(e[t]=r[t]);Object.keys(e).length>0&&a.set(s,e)}}),n.sources=t,c.set(e.searchListId,a)}const{searchListId:r,sentDate:o,threadKey:l}=e;m.push({id:r,sentDate:o,threadKey:l,updates:n})}),s.a.log("add to flagging queue",r,a,t),o({searchListIds:r,sourcesPerSle:a,flagUpdates:t}),n.a.updateFlags(),i){const a={};for(const e of Object.keys(t))a[e]=!t[e];l.a.push({operation:"setFlags",updates:a,sourcesPerSle:c,updateItems:e})}return m}const h={setRead:function(e,t){const a=[],n=new Map;return e.forEach(e=>{const{searchListId:i,sources:s}=e,r=new Map;s.forEach((e,a)=>{e.read!==t&&r.set(a,{read:t})}),r.size>0&&(a.push(e),n.set(i,r))}),d(e,{},n,!0)},setFlagged:function(e,t){return m(e,c.O.FLAGGED,t,!0)},setForwarded:function(e,t){return m(e,c.O.FORWARDED,t,!1)},setReplied:function(e,t){return m(e,c.O.ANSWERED,t,!1)},setCustomFlags:function(e,t,a=new Map,n=!0){return d(e,t,a,n)},translateFlag:function(e){switch(e){case c.O.RED:return Object(i.a)("flag","Red");case c.O.ORANGE:return Object(i.a)("flag","Orange");case c.O.YELLOW:return Object(i.a)("flag","Yellow");case c.O.GREEN:return Object(i.a)("flag","Green");case c.O.BLUE:return Object(i.a)("flag","Blue");case c.O.PURPLE:return Object(i.a)("flag","Purple");case c.O.GRAY:return Object(i.a)("flag","Gray");default:return e}}};t.a=h},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12);const r=new Set,o=new Set,l=new Map,c=new class extends i.a{emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}hasError(e){return this.isDisconnected(e)&&void 0!==this.getErrorMessage(e)}hasAuthenticationError(e){if(this.hasError(e)){const t=this.getErrorMessage(e);return!!t&&t.toString().toLowerCase().indexOf("authentication")>=0}return!1}isDisconnected(e){return o.has(e)}isConnecting(e){return r.has(e)}isConnected(e){return!this.isConnecting(e)&&!this.isDisconnected(e)}getErrorMessage(e){return l.get(e)}};s.a.register(e=>{switch(e.actionType){case"MAIL_IS_DISCONNECTED":{const{accountId:t,isDisconnected:a,errorMessage:n}=e;let i=!1;a?(i=!o.has(t),o.add(t)):(i=o.has(t),o.delete(t)),n?l.set(t,n):l.delete(t),i&&c.emitChange({accountId:t,isDisconnected:a});break}case"MAIL_IS_CONNECTING":{const{accountId:t,isConnecting:a}=e;let n=!1;a?(n=!r.has(t),r.add(t)):(n=r.has(t),r.delete(t)),n&&c.emitChange({accountId:t,isConnecting:a});break}}}),t.a=c},function(e,t,a){"use strict";var n=a(24),i=a(263),s=a(178),r=a(32),o=a(42),l=a(614),c=a(293),u=a(65),m=a(2),d=a(460),h=a(84),p=a.n(h);const{constructUrl:b}=s.a;const{constructUrl:g}=s.a;function N(e,t,a,n,i){const{url:s,uid:r,etag:l,href:c}=t,{username:u,password:m,oauth2Token:d}=e,h=p.a.parse(s);let b="";const{protocol:N,host:f}=h;let _="";if(N&&f&&c)b=`${N}//${f}${c}`;else{if(!N||!f||!r)return{};const e=N+"//"+f;_="/"+g([a,r])+".ics",b=g([e,_])}const v={};return i||l?v["If-Match"]='"'+l+'"':v["If-None-Match"]="*",{username:u,password:m,oauth2Token:d,headers:v,url:b,href:_,method:"PUT",contentType:"text/calendar; charset=utf-8",body:o.a.eventsToICalendar(n)}}const{constructUrl:f}=s.a;function _(e,t,a,n,i){const{uid:s,href:r}=n,{username:o,password:l,oauth2Token:c}=e,u=p.a.parse(t);let m="";const{protocol:d,host:h}=u;if(d&&h&&r)m=`${d}//${h}${r}`;else{if(!d||!h||!s)return{};m=f([d+"//"+h,a,s+".ics"])}return{username:o,password:l,oauth2Token:c,url:m,method:"GET",contentType:"text/calendar; charset=utf-8"}}var v=a(104);function E(e,t){return{...e,method:"REPORT",body:`<?xml version="1.0" encoding="UTF-8"?>\n    <c:calendar-multiget xmlns:d="DAV:" xmlns:c="urn:ietf:params:xml:ns:caldav">\n    <d:prop>\n        <d:getetag />\n        <c:calendar-data />\n    </d:prop>\n      ${t.map(e=>`<d:href>${e}</d:href>`).join("")}\n    </c:calendar-multiget>`}}var C=a(616),w=a(305);const{stripDoubleQuotes:O}=s.a;var y=a(393),S=a(252);const{stripDoubleQuotes:T}=s.a;function k(e){let t=[];const a=Object(w.a)(e);return!a.parsererror&&"d_multistatus"===a.root&&a.d_multistatus.d_response&&(t=a.d_multistatus.d_response.map(e=>{var t,a;if(-1===(null==e?void 0:null===(t=e.d_status)||void 0===t?void 0:null===(a=t.content)||void 0===a?void 0:a.indexOf("200")))return null;const n=e.d_href?decodeURIComponent(e.d_href.content):"",i=e.d_propstat&&e.d_propstat.d_prop&&e.d_propstat.d_prop.d_getetag?T(e.d_propstat.d_prop.d_getetag.content):"",s=e.d_propstat&&e.d_propstat.d_prop&&e.d_propstat.d_prop.c_calendarData?String(e.d_propstat.d_prop.c_calendarData.content):"",r=Object(y.a)(s);return r.VEVENT.length?Object(S.b)(r.VEVENT[0],{href:n,etag:i}):r.VTODO.length?{...Object(S.b)(r.VTODO[0],{href:n,etag:i}),task:!0}:{href:n,etag:i}}).filter(Boolean)),t}var A=a(509);const{httpStatusSuccess:I,parseHttpStatusCode:D,stripDoubleQuotes:M}=s.a;var P=a(314),x=a(7),L=a(38);const{basicHttpAuthenticationHeader:j}=s.a;function R(e,t){return t||(t=L.w[0].value),`<?xml version="1.0" encoding="utf-8"?>\n    <C:mkcalendar xmlns:C="urn:ietf:params:xml:ns:caldav"><set xmlns="DAV:">\n      <prop><displayname>${e}</displayname>\n        <C:supported-calendar-component-set>\n          <C:comp name="VEVENT" />\n        </C:supported-calendar-component-set>\n        <calendar-color xmlns="http://apple.com/ns/ical/">${t}</calendar-color>\n      </prop></set>\n    </C:mkcalendar>`}var B=a(346);const{constructUrl:F,stripDoubleQuotes:U}=s.a;function H(e){let t="";return e.split("/").forEach(e=>{e.includes("@")&&(t=e)}),t}async function V(e,t){const a=await i.a.getAuthentication(e),{oauth2Token:n}=a,s=[Object(L.n)(),"/v3/calendars",`?key=${B.a}`],r=F(s),o=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${n}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({summary:t})}),l={status:!1,message:"",description:"",name:""};if(o.ok){const e=function(e){const{id:t,summary:a,etag:n,timeZone:i}=e;return{name:t,description:a,ctag:U(n),timezone:i}}(await o.json());l.status=!0,l.description=e.description,l.name=`/caldav/v2/${e.name}/events/`,l.ctag=e.ctag}return l}var W=a(15),z=a.n(W),G=a(742);const{getLocalGoogleTasksCalendars:K}=o.a,{constructUrl:Y,stripDoubleQuotes:$}=s.a;function X(e,t){const{title:a,notes:i,etag:s,due:r,id:o,completed:l}=e,c=r?z()(r).valueOf():void 0,u=l?z()(l).valueOf():void 0,m={id:t.id,calendarId:t.calendarId,title:a,task:!0,description:i,due:c,etag:$(s),status:status,uid:o,complete:Boolean(l),completed:u,timezone:L.i,allDay:!0},[d]=n.a.transformVivaldiEvents([m]);return d}function Z(e,t){const{title:a,notes:n,due:i,etag:s,id:r,completed:o}=e,l=o?z()(o).valueOf():void 0;return{calendarId:t,title:a,is_template:!1,task:!0,description:n,due:i?z()(i).valueOf():void 0,etag:$(s),status:status,uid:r,complete:Boolean(o),completed:l,timezone:L.i,allDay:!0}}async function Q(e){const t=await i.a.getAuthentication(e),{parsed:a,status:s}=await async function(e){const{oauth2Token:t}=e,a=new XMLHttpRequest;return a.open("GET",`${Object(L.o)()}/tasks/v1/users/@me/lists?maxResults=200&key=${B.a}`),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","Bearer "+t),new Promise((e,t)=>{a.send(),a.onload=()=>{const{status:t,response:n,readyState:i}=a,s=JSON.parse(n);i===L.k&&e({status:t,parsed:s})}})}(t),o={numberOfCalendarsPolled:0,numberOfChangedCalendars:0};if(a.error){const t=new Date;return r.a.getCalendars().filter(t=>t.accountId===e.id).forEach(async e=>await n.a.updateCalendar(e.id,{lastChecked:t.valueOf()},!1)),v.a.log("Error fetching TaskList: ",s,a),o}const l=function(e){const{items:t=[],etag:a}=e;return{...e,etag:$(a),items:t.map(e=>({...e,etag:$(e.etag)}))}}(a),c=K(e);o.numberOfCalendarsPolled=l.items.length;const u=Object(G.a)(l.items,c,(e,t)=>{const{id:a}=e;return a===t.name}),m=await async function(e,t){return await Promise.all(e.map(async e=>{const a={accountId:t,name:e.id,description:e.title,active:!0,supportedCalendarComponent:{vevent:!1,vtodo:!0,vjournal:!1}},i=await n.a.createCalendar(a);return i.calendar?i.calendar:Promise.reject()}))}(u,e.id),[d,h]=Object(A.a)(c,e=>l.items.some(t=>t.id===e.name));await Promise.all(h.map(async e=>{await n.a.deleteCalendar(e)}));const p=m.concat(d),b=Object(G.a)(p,l.items,(e,t)=>{const{name:a}=e;return a===t.id&&e.ctag===t.etag});await Promise.all(b.map(async e=>{const a=function(e){const{items:t=[],etag:a}=e;return{...e,etag:$(a),items:t.map(e=>({...e,etag:$(e.etag)}))}}(await async function(e,t){const{oauth2Token:a}=e,n=new XMLHttpRequest;return n.open("GET",`${Object(L.o)()}/tasks/v1/lists/${t}/tasks?${["showCompleted=true","showHidden=true"].join("&")}&key=${B.a}`),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","Bearer "+a),new Promise((e,t)=>{n.send(),n.onload=()=>{const{status:a,response:i,statusText:s,readyState:r}=n,o=JSON.parse(i);a>=200&&a<300&&r===L.k?e(o):t({status:a,statusText:s})}})}(t,e.name)),i=r.a.getEventsPerCalendar(e.id).filter(e=>!e.trash),s=a.items.filter(e=>!i.some(t=>t.uid===e.id)),c=i.filter(e=>-1===a.items.findIndex(t=>t.id===e.uid)),u=i.map(e=>{const t=a.items.find(t=>t.id===e.uid&&$(t.etag)!==e.etag);return t?{...X(t,e)}:null}).filter(Boolean),m=s.map(t=>Z(t,e.id));await Promise.all(m.map(async e=>await n.a.createEvent(e,!1))),await Promise.all(c.map(async e=>await n.a.deleteEvent(e.id))),await Promise.all(u.map(async e=>await n.a.updateEvent(e,void 0,!1)));const d=l.items.find(t=>e.name===t.id);let h={ctag:a.etag};(null==d?void 0:d.title)!==e.description&&(h={...h,description:null==d?void 0:d.title}),(m.length||c.length||u.length)&&o.numberOfChangedCalendars++,await n.a.updateCalendar(e.id,h,!1)}));const g=new Date;return p.forEach(async e=>await n.a.updateCalendar(e.id,{lastChecked:g.valueOf()},!1)),o}var q=a(433);const{basicHttpAuthenticationHeader:J,concatUrl:ee,stripDoubleQuotes:te}=s.a;const{basicHttpAuthenticationHeader:ae}=s.a,{getLocalGoogleTasksCalendars:ne}=o.a,{stripDoubleQuotes:ie,getCalDAVUrl:se}=s.a,{setStatus:re}=u.a,{isCalDAV:oe}=o.a,le=["title","location","description"];let ce;const ue=new Map;let me=!1,de=!1;const he={},pe=new Set;function be(e){const t=p.a.parse(e),{host:a,protocol:n}=t;if(n&&a)return n+"//"+a}function ge(e){if("calendarDataReady"===e){const e=r.a.getAccounts().map(e=>e.url).filter(Boolean);if(0===e.length)return void pe.clear();e.forEach(e=>{pe.has(e)||(Ce(),pe.add(e))})}}function Ne(e){const t={};return Object.keys(e).forEach(a=>{le.indexOf(a)>=0&&"string"==typeof e[a]&&e[a]&&(t[a]=Object(q.b)(e[a]))}),t}function fe(e,t){const a=t.flatMap(e=>e.recurrenceExceptions||[]);e.forEach(e=>{e.eventExceptions&&e.eventExceptions.forEach(async t=>{if(!a.some(a=>{if(a&&a.parent_event_id===e.id&&a.date===t.exception.exceptionDate)return!0})){const{exceptionDate:a,cancelled:i}=t.exception;if(!a)return;if(!t.exception_event||i)return void n.a.createException(e.id,"0",!0,a);const{start:s,end:r,title:o,description:l}=t.exception_event,{uid:c,id:u,rrule:m,eventExceptions:d,recurrence:h,alarmId:p,filteredOut:b,recurrenceExceptions:g,trash:N,trash_time:f,attachment:_,invites:v,notifications:E,recurrenceId:C,...w}=e;if(!s||!r)return;w.start=s,w.end=r,w.title=o,w.description=l;const O=await n.a.createEvent({...w,is_template:!1},!1);n.a.createException(u,O.id,!1,a),x.a.calendar.updateEvent(e.id,{sequence:e.sequence,etag:e.etag})}})})}async function _e(e,t,a){const{id:i}=e,s=k(t),o=r.a.getEventsPerCalendar(a).filter(e=>!e.trash);let l=o.filter(e=>!s.some(t=>t.href===e.href));const u=s.filter(e=>!o.some(t=>t.etag===e.etag)).map(e=>e.href||"");if(0===u.length)return void l.forEach(e=>n.a.deleteEvent(e.id));n.a.setImportEventState({importId:i,importEventState:"IMPORTING"}),n.a.setEventsToImportCount({importId:i,eventsToImportCount:u.length});const m=be(e.url);if(!m)return Promise.reject();const d=r.a.getCalendars().find(e=>e.id===a);if(!d)return;const h=m+d.name,p=await Object(P.a)(E(e,u),h);let b=[];b=p.response?k(p.response):await async function(e,t){const{username:a,password:n,url:i}=e;return(await Promise.all(t.map(async e=>{const t=ee(i,e),s=await fetch(t,{method:"GET",headers:{"Content-Type":"text/calendar",Authorization:J(a,n)}});if(s.ok){const t=te(s.headers.get("ETag")||"");return{icsString:await s.text(),etag:t,href:e}}}))).filter(Boolean).map(e=>{const{etag:t,icsString:a,href:n}=e,i=Object(y.a)(a);return Object(S.b)(i.VEVENT[0],{etag:t,href:n})})}(e,u),b=b.map(e=>({...e,calendarId:a})),l=l.filter(e=>b.some(t=>e.uid!==t.uid));const g=[];let N=0,f=0;b.filter(e=>!o.some(t=>t.uid===e.uid)).forEach(e=>{50===N&&(g[++f]=[],N=0),g[f]||(g[f]=[]),g[f].push(e),N++});const _=o.map(e=>{const t=b.find(t=>t.uid===e.uid&&t.etag!==e.etag);return t?Object(S.e)(t,e):null}).filter(Boolean),[v,C]=Object(A.a)(_,e=>e.eventExceptions&&e.eventExceptions.length>0);fe(v,o);try{C.forEach(e=>n.a.updateEvent(e))}catch(e){console.warn("Error updating event",e)}return l.forEach(e=>n.a.deleteEvent(e.id)),new Promise((e,t)=>{g.reduce((e,t)=>e.then(()=>n.a.createEvents(t).then(e=>{n.a.setImportedEventsCount({importId:i,importedEventsCount:e.created_count}),n.a.loadPromise()})),Promise.resolve()).then(()=>{c.b.updateAllAlarms(),n.a.setImportEventState({importId:i,importEventState:"IMPORT_FINISHED"}),e()}).catch(e=>{console.warn(e),n.a.setImportEventState({importId:i,importEventState:"IMPORT_ERROR"}),t(e)})})}async function ve(e,t){const a={calendarId:e.id,ctag:e.ctag,lastCalendarPoll:Date.now(),changed:!1},n=be(t.url);if(!n)return Promise.reject();const s=n+e.name,r=await i.a.getAuthentication(t),o=e.id,l=e.ctag,c=await Object(P.a)(function(e){const{account_type:t}=e,a={Depth:"google"===t?0:1};return{...e,headers:a,method:"PROPFIND",body:'<?xml version="1.0" encoding="UTF-8"?>\n    <D:propfind xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/"\n      xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:prop>\n    <D:displayname />\n    <CS:getctag />\n    </D:prop>\n    </D:propfind>'}}(r),s),{ctag:u}=function(e){const t=Object(w.a)(e),a={displayName:"",ctag:""};if(!t.parserror){const e=t.d_multistatus.d_response[0].d_propstat.d_prop,n=e.cs_getctag;n&&(a.ctag=O(n.content));const i=e.d_displayname;i&&(a.displayName=i.content)}return a}(c.response);return a.ctag=u,""===u||l!==u?(a.changed=!0,await async function(e,t,a){const{response:n}=await Object(P.a)((i=t,{...i,method:"REPORT",headers:{Depth:1},body:'<?xml version="1.0" encoding="UTF-8"?>\n    <C:calendar-query xmlns:D="DAV:" xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:prop>\n      <D:getetag />\n    </D:prop>\n    <C:filter>\n      <C:comp-filter name="VCALENDAR" />\n    </C:filter>\n   </C:calendar-query>'}),a);var i;return await _e(t,n,e)}(o,r,s),a):a}async function Ee(e,t){const a=e.ctag,s={calendarId:e.id,ctag:e.ctag,lastCalendarPoll:Date.now(),changed:!1},o=be(t.url);if(!o)throw new Error("Missing URL prefix");const l=e.id,u=o+e.name,m=await i.a.getAuthentication(t),d=await Object(P.a)(function(e,t){return t=t||"",{...e,method:"REPORT",body:`<?xml version="1.0" encoding="UTF-8"?>\n    <D:sync-collection xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/"\n      xmlns:C="urn:ietf:params:xml:ns:caldav">\n    <D:sync-token>${encodeURI(t)}</D:sync-token>\n    <D:sync-level>1</D:sync-level>\n    <D:prop>\n      <D:getetag />\n    </D:prop>\n    </D:sync-collection>`}}(m,a),u),{createdUpdated:h,deletedHrefs:p,syncToken:b,serverThrottlesEvents:g,error:N}=function(e,t){const a=Object(w.a)(e),n={createdUpdated:[],deletedHrefs:[],syncToken:"",serverThrottlesEvents:!1,error:!0};if(a.parsererror)return n;const{d_syncToken:i,d_response:s}=a.d_multistatus;if(i&&(n.syncToken=i.content,n.error=!1),!s)return n;const r=[];s.forEach(e=>{var a;let i=null===(a=e.d_status)||void 0===a?void 0:a.content;if(!i)try{i=e.d_propstat.d_status.content}catch(e){console.warn("parseSyncCollection: ",e)}const s=I(i);var o,l,c;t===e.d_href.content?(null==e?void 0:null===(o=e.d_status)||void 0===o?void 0:o.content)&&507===D(e.d_status.content)&&(n.serverThrottlesEvents=!0):r.push({etag:(null===(l=e.d_propstat)||void 0===l?void 0:null===(c=l.d_prop)||void 0===c?void 0:c.d_getetag)?M(e.d_propstat.d_prop.d_getetag.content):"",href:e.d_href.content,isDeletedOnServer:s})});const[o,l]=Object(A.a)(r,e=>e.isDeletedOnServer);return{...n,createdUpdated:o.map(({href:e,etag:t})=>({href:e,etag:t})),deletedHrefs:l.map(({href:e})=>decodeURIComponent(e)),error:!1}}(d.response,e.name);if(N&&v.a.log("CalDAV. Error parsing sync-collection",e.name),a===b)return s;s.changed=!0;const f=r.a.getEventsPerCalendar(l).filter(e=>!e.trash),_=h.filter(({etag:e})=>-1===f.findIndex(t=>t.etag===e)).map(e=>e.href||""),C=k((await Object(P.a)(E(m,_),u)).response).map(t=>({...t,calendarId:e.id})),O=C.filter(e=>!f.some(t=>t.uid===e.uid)),y=[];let T=0,x=0;O.forEach(e=>{50===T&&(y[++x]=[],T=0),y[x]||(y[x]=[]),y[x].push(e),T++});const L=f.flatMap(e=>e.recurrenceExceptions?e.recurrenceExceptions.map(e=>e.exception_event_id):[]),j=f.map(e=>{const t=C.find(t=>t.uid===e.uid&&t.etag!==e.etag);return t&&!L.includes(e.id)?Object(S.e)(t,e):null}).filter(Boolean),R=f.filter(e=>p.some(t=>t===e.href)),[B,F]=Object(A.a)(j,e=>e.eventExceptions&&e.eventExceptions.length>0);fe(B,f);try{await Promise.all(F.map(async e=>await n.a.updateEvent(e)))}catch(e){console.warn("Error updating event",e)}return await Promise.all(R.map(async e=>await n.a.deleteEvent(e.id))),n.a.setImportEventState({importId:l,importEventState:"IMPORTING"}),n.a.setEventsToImportCount({importId:l,eventsToImportCount:O.length}),await Promise.all(y.map(async e=>{const t=await n.a.createEvents(e);return n.a.setImportedEventsCount({importId:l,importedEventsCount:t.created_count}),n.a.loadPromise(),t})),y.flat().some(e=>e.notifications)&&c.b.updateAllAlarms(),n.a.setImportEventState({importId:l,importEventState:"IMPORT_FINISHED"}),s.ctag=b,g?(e.ctag=b,Ee(e,t)):s}async function Ce(e){const t={didPoll:!1,calendars:[],error:!1,message:""};if(!window.isMailWindow||me)return t;me=!0;let a=r.a.getAccounts().filter(e=>e.url.length);return a=a.filter(e=>!ue.has(e.id)),e&&e.length&&(a=e.map(e=>a.find(t=>t.id===e)).filter(Boolean)),ue.size&&!de&&(de=!0,await Promise.all(Array.from(ue.values()).map(async e=>await e.onRemoval(e.accountId))),de=!1),await a.reduce(async(a,s)=>a.then(async()=>{const{url:a,account_type:o,name:c}=s;if(!(!!e&&e.includes(s.id))){const e=r.a.getCalendars().filter(e=>e.accountId===s.id).map(e=>e.lastChecked).filter(Boolean).reduce((e,t)=>t>e?t:e,0),t=Date.now();if(!((e?e+1e3*L.d:t)<=t))return[]}try{if(t.didPoll=!0,n.a.stopAPIChangeListeners(),oe(o)){const e=await i.a.getAuthentication(s),l=await Object(P.a)(Object(d.a)(e),a),u=Object(C.a)(l.response);if(0===u.length&&console.error("No Server Calendars...",c),"google"===o){const e=await Q(s);t.calendars.push(e)}const m=await async function(e,t){const a=r.a.getCalendars().filter(t=>{if("google"===e.account_type){if(!t.supportedCalendarComponent)return;const{vevent:a}=t.supportedCalendarComponent;return t.accountId===e.id&&a}return t.accountId===e.id}),i=t.filter(e=>!a.some(t=>e.name===t.name)),s=await Promise.all(i.map(async t=>{const{ctag:a,supportsSyncCollection:i,syncToken:s,...r}=t,o={accountId:e.id,active:!0,...r},{calendar:l}=await n.a.createCalendar(o);return l||Promise.reject()})),[o,l]=Object(A.a)(a,e=>t.some(t=>t.name===e.name));await Promise.all(l.map(async e=>await n.a.deleteCalendar(e)));const c=s.concat(o);t.forEach(async e=>{const t=c.find(t=>t.name===e.name);if(!t)return;const a={};"#"!==e.color&&e.color!==t.color&&(a.color=e.color),e.description!==t.description&&(a.description=e.description),Object.keys(a).length&&await n.a.updateCalendar(t.id,a,!1)});const u=c.filter(t=>t.active&&t.accountId===e.id),m=await Promise.all(u.map(async a=>{const n=t.find(e=>e.name===a.name);return n?n.supportsSyncCollection?n.syncToken!==a.ctag?await Ee(a,e):void 0:await ve(a,e):Promise.resolve()}));await Promise.all(m.filter(Boolean).map(async e=>{const{calendarId:t,ctag:a}=e;await n.a.updateCalendar(t,{ctag:a},!1)}));const d=m.filter(Boolean).reduce((e,t)=>(t.changed&&e++,e),0);return{numberOfCalendarsPolled:u.length,numberOfChangedCalendars:d}}(s,u);t.calendars.push(m)}else if("ical"===o){const e=await l.a.fetchAndCreate(s);t.calendars.push(e)}}catch(e){t.message=function(e,t){const{status:a,statusText:n}=t,{name:i}=e;he[i]||(he[i]={authenticationErrorCount:0});let s="",r=he[i].authenticationErrorCount;0===a?s=Object(m.a)("Could not connect to: $1",[i]):401===a?(r=++he[i].authenticationErrorCount,s=Object(m.a)("Calendar Authentication Error: $1. Attempt: $2. $3.",[i,r,n])):a&&n?s=Object(m.a)("Calendar Error: $1. $2 - $3",[i,a,n]):console.warn(Object(m.a)("Calendar Warning. Unspecified"),t);s&&re(s,6e3);return he[i]={authenticationErrorCount:r},s}(s,e),t.error=!0}finally{n.a.startAPIChangeListeners();const e=r.a.getCalendars().filter(e=>e.accountId===s.id).map(e=>e.id);await Promise.all(e.filter(Boolean).map(async e=>await n.a.updateCalendar(e,{lastChecked:Date.now()},!1)))}}),Promise.resolve()).finally(()=>{me=!1,r.a.getAccounts().some(e=>e.url)&&(ce=setTimeout(()=>Ce(),2e4))}),t}const we={resetStatus(e){he[e]&&(he[e].authenticationErrorCount=0)},pollCalDAV:e=>(ce&&clearTimeout(ce),me?{didPoll:!1,calendars:[],message:"",error:!1}:Ce(e)),calendarServicerStart(){r.a.addChangeListener(ge)},prepareForDeleteAccount(e){ue.set(e.accountId,e),Ce([e.accountId])},doneDeleteAccount(e){ue.delete(e)},calendarStop(){clearTimeout(ce)},async deleteEvent(e){const t=r.a.getEvents().find(t=>t.id===e);if(!t)return;const a=r.a.getCalendars().find(e=>e.id===t.calendarId);if(!a)return;const n=r.a.getAccounts(),{accountId:s}=a,o=n.find(e=>e.id===s);if(o&&a&&o.url&&a.active){const e=await i.a.getAuthentication(o);if("google"===o.account_type&&t.task){if(!t.uid)return;!async function(e,t){const{oauth2Token:a}=e,n=new XMLHttpRequest;n.open("DELETE",`${Object(L.o)()}/tasks/v1/lists/@default/tasks/${t}?key=${B.a}`),n.setRequestHeader("Authorization","Bearer "+a),new Promise((e,t)=>{n.send(),n.onload=()=>{const{status:a,statusText:i,readyState:s}=n;a>=200&&a<300&&s===L.k?e(!0):t({status:a,statusText:i})}})}(e,t.uid)}else if(t.href){const{href:n}=t;Object(P.a)(function(e,t,a){if(a.indexOf("/")>=0){const e=a.split("/");a=e[e.length-1]}const{url:n,username:i,password:s,oauth2Token:r}=e,o=p.a.parse(n),{protocol:l,host:c}=o;return l&&c?{username:i,password:s,oauth2Token:r,url:b([l+"//"+c,t,a]),method:"DELETE"}:{}}(e,a.name,n))}}},async updateEvent(e,t){const a={...e,...Ne(e)},n=r.a.getCalendars().find(e=>e.id===a.calendarId),s=r.a.getAccounts();if(!n)return;const{accountId:o}=n,l=s.find(e=>e.id===o);if(!l)return;const c=await i.a.getAuthentication(l);if("google"===l.account_type&&a.task)!async function(e,t){const{oauth2Token:a}=e,n=new XMLHttpRequest,{etag:i="",title:s,uid:r="",due:o}=t;n.open("PUT",`${Object(L.o)()}/tasks/v1/lists/@default/tasks/${i}?key=${B.a}`),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","Bearer "+a);const l=o?z()(o).format("YYYY-MM-DDTHH:mm:ssZ"):void 0,c={kind:"tasks#taskList",id:`${r}`,etag:`${i}`,title:`${s}`,due:l?`${l}`:void 0};new Promise((e,t)=>{n.send(JSON.stringify(c)),n.onload=()=>{const{status:a,response:i,statusText:s,readyState:r}=n;try{const n=JSON.parse(i);a>=200&&a<300&&r===L.k?e(n):t({status:a,statusText:s})}catch(e){v.a.log("Error parsing create Task response ",e)}}})}(c,a);else if(a.href){if(l.url&&n.active){const{etag:e,href:i,uid:s}=a,o={url:l.url,etag:e,href:i,uid:s},u=[a];(a.recurrenceExceptions||[]).forEach(e=>{const n=e.exception_event_id;if(n){const i=n===(null==t?void 0:t.id)?t:r.a.getEvent(n);i&&(i.recurrenceId=e.date,i.sequence=a.sequence,u.push(i))}});const m=await Object(P.a)(N(c,o,n.name,u,!0));let d="";if(m.etag)d=ie(m.etag);else{const e=await Object(P.a)(_(c,l.url,n.name,a));d=ie(e.etag||"")}x.a.calendar.updateEvent(a.id,{etag:d})}}else a.sequence=0,we.createEvent(a)},updateCalendar:(e,t)=>new Promise((a,n)=>{const o=r.a.getAccounts(),l=r.a.getCalendars().find(t=>t.id===e);if(!l)return void a();const{accountId:c}=l,u=o.find(e=>e.id===c);if(!u||!u.url)return void a();const m={};t.description!==l.description&&(m.description=t.description),t.color!==l.color&&(m.color=t.color),0!==Object.keys(m).length?i.a.getAuthentication(u).then(e=>{Object(P.a)(function(e,t,a,n){const i=p.a.parse(t),{protocol:r,host:o}=i;let l="";if(r&&o){const e=r+"//"+o;l=s.a.constructUrl([e,a])}const c=[];return n.description&&c.push(`<D:displayname>${n.description}</D:displayname>`),n.color&&c.push(`<calendar-color xmlns="http://apple.com/ns/ical/">${n.color}</calendar-color>`),{...e,url:l,method:"PROPPATCH",body:`<?xml version="1.0" encoding="UTF-8"?>\n<D:propertyupdate xmlns:D="DAV:"\nxmlns:CS="http://calendarserver.org/ns/"\nxmlns:C="urn:ietf:params:xml:ns:caldav">\n<D:set>\n<D:prop>\n${c.join("\n")}\n</D:prop>\n</D:set>\n</D:propertyupdate>`}}(e,u.url,l.name,m)).then(e=>{e.success&&a()}).catch(e=>{n(e)})}):a()}),async createEvent(e){const t={...e,...Ne(e),uid:e.uid||o.a.generateGUID()},a=r.a.getAccounts();let s=r.a.getCalendars().find(e=>e.id===t.calendarId);if(!s)return;const{etag:l,href:c,uid:u}=t,{accountId:m}=s,d=a.find(e=>e.id===m);if(!d)return;const h={url:d.url,etag:l,href:c,uid:u},p=[t].filter(Boolean),b=await i.a.getAuthentication(d),g=s.id;if("google"===d.account_type&&t.task){const e=ne(d);if(!e.find(e=>e.id===g)){if(!(e.length>0))return void v.a.log("Warning. No Google Task list found. Task not created.");s=e[0]}const a=await async function(e,t,a){const{oauth2Token:n}=e,i=new XMLHttpRequest,{etag:s="",title:r,uid:o="",due:l}=a,c=[Object(L.o)(),"/tasks/v1/lists/",t,`tasks?key=${B.a}`],u=Y(c);i.open("POST",u),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","Bearer "+n);const m=l?z()(l).format("YYYY-MM-DDTHH:mm:ssZ"):void 0,d={kind:"tasks#taskList",id:`${o}`,etag:`${s}`,title:`${r}`,due:m?`${m}`:void 0};return new Promise((e,t)=>{i.send(JSON.stringify(d)),i.onload=()=>{const{status:a,response:n,statusText:s,readyState:r}=i,o=JSON.parse(n);a>=200&&a<300&&r===L.k?e(o):t({status:a,statusText:s})}})}(b,s.name,t);t.etag=ie(a.etag),t.uid=a.id,n.a.updateEvent(t,void 0,!1)}else{const e=await Object(P.a)(N(b,h,s.name,p,!1));let a="";if(t.href=decodeURIComponent(e.href||""),e.etag)a=ie(e.etag);else{const e=await Object(P.a)(_(b,d.url,s.name,t));a=ie(e.etag||"")}t.etag=a,n.a.updateEvent(t,void 0,!1)}},async createCalendar(e,t){if("google"===e.account_type){const{name:a,description:n}=t,i=a||n||"";return await V(e,i)}return await async function(e,t){const a={message:"",status:!1,name:"",description:""},{url:n,username:s}=e,{name:r,color:o,description:l}=t,c=r||l||"",u=`${n.endsWith("/")?n:n+"/"}${c}`,{password:d}=await i.a.getAuthentication(e),h=await fetch(u,{method:"MKCALENDAR",headers:{Accept:"text/xml",Authorization:j(s,d)},body:R(c,o)});if(h.ok){const e=await fetch(u,{method:"PROPFIND",headers:{Accept:"text/xml",Brief:"t",Depth:"1",Authorization:j(s,d)},body:'<?xml version="1.0" encoding="utf-8"?><D:propfind xmlns:D="DAV:">\n                  <D:prop><D:getetag /><D:getcontenttype /></D:prop></D:propfind>'});if(e.ok){const t=await e.text(),n=Object(w.a)(t);if(n.d_error||n.parsererror||!n.d_multistatus)return a;n.d_multistatus.d_response.forEach(e=>{const{d_href:t}=e;a.name=t.content,a.status=!0,a.message=Object(m.a)("Success")})}}else 405===h.status?a.message=Object(m.a)("Error creating Calendar. It might already exist."):a.message=Object(m.a)("Error creating Calendar on Server");return a}(e,t)},async deleteCalendar(e,t){const{account_type:a,url:n,username:s}=e;if("google"===a){const a=r.a.getCalendars().find(e=>e.name===t);if(!(null==a?void 0:a.supportedCalendarComponent))return{message:Object(m.a)("Calendar not found"),status:!1};const{supportedCalendarComponent:n}=a,{vtodo:s}=n;if(s){return async function(e,t){const{oauth2Token:a}=e,n=new XMLHttpRequest;return n.open("DELETE",`${Object(L.o)()}/tasks/v1/users/@me/lists/${t}?key=${B.a}`),n.setRequestHeader("Authorization","Bearer "+a),new Promise((e,t)=>{n.send(),n.onload=()=>{const{status:a,statusText:i,readyState:s}=n;a>=200&&a<300&&s===L.k?e({status:!0,message:""}):t({status:a,message:i})}})}(await i.a.getAuthentication(e),t)}return await async function(e,t){const a=await i.a.getAuthentication(e),{oauth2Token:n}=a,s=[Object(L.n)(),"/v3/calendars",(r=H(t),r.endsWith("/")?r.slice(0,-1):r),`?key=${B.a}`];var r;const o=F(s);return{status:(await fetch(o,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}})).ok,message:""}}(e,t)}const o=se(n,t),{password:l}=await i.a.getAuthentication(e);return{status:(await fetch(o,{method:"DELETE",headers:{Depth:"infinity",Authorization:ae(s,l)}})).ok,message:""}}};t.a=we},,,,,,,,,function(e,t,a){"use strict";a.d(t,"f",(function(){return k})),a.d(t,"g",(function(){return D})),a.d(t,"b",(function(){return O})),a.d(t,"e",(function(){return y})),a.d(t,"d",(function(){return A})),a.d(t,"a",(function(){return I})),a.d(t,"c",(function(){return S}));var n=a(24),i=a(383),s=a(32),r=a(42),o=a(293),l=a(10),c=a(254),u=a(88),m=a.n(u),d=a(393),h=a(38),p=a(433),b=a(1261),g=a(105),N=a(100);const{createLocalAccountAndCalendar:f}=i.a;let _;function v(e,t){return t&&t!==h.i?m.a.tz(e,t):m()(e)}function E(e){if(m.a.tz.names().includes(e)||e===h.i)return e;const t=m.a.tz.guess(),a=Object(b.findIana)(e);return t&&a&&a.includes(t)?t:a&&a.length?a[0]:""}function C(e){return"DATE"===e.params.VALUE?h.s:h.v}function w(e,t){const a=C(e),{value:n}=e;if(t===h.i){const e=m.a.tz(n,a,"UTC").toDate();return Object(N.f)(e).valueOf()}return t?m.a.tz(n,a,t).valueOf():m()(n,a).valueOf()}const O=(e,t={},a)=>{var n,i;let r=[],o=[];const l={title:""},u=["SUMMARY","LOCATION","DESCRIPTION"];Object.keys(e).forEach(t=>{u.indexOf(t)>=0&&"string"==typeof e[t]&&("SUMMARY"===t?l.title=Object(p.a)(e[t]):l[t.toLowerCase()]=Object(p.a)(e[t]))}),e.EXCEPTIONS&&(r=e.EXCEPTIONS.map(e=>{const n=O(e,t,a),i=e["RECURRENCE-ID"];if(i&&i.value){const e=w(i,i.params.TZID),{recurrence:t,...a}=n;return{exception:{cancelled:!1,exceptionDate:e},exception_event:a}}}).filter(Boolean)),e.ATTENDEE&&(o=e.ATTENDEE.map(e=>({name:e.params.CN||"",address:e.value,partstat:e.params.PARTSTAT||"NEEDS-ACTION"})));let d,b=!1,N=0;const f=e.DTSTART&&E(e.DTSTART.params.TZID);e.DTSTART&&e.DTSTART.value&&("DATE"===e.DTSTART.params.VALUE&&(b=!0),N=w(e.DTSTART,f));const _=e.DTEND&&E(e.DTEND.params.TZID);if(e.DTEND&&e.DTEND.value&&(d=w(e.DTEND,_)),e.DURATION){d=N+m.a.duration(e.DURATION).asMilliseconds()}let y=[];e.VALARM&&(y=e.VALARM.map(t=>{const{TRIGGER:a=""}=t;return{when:-m.a.duration(a).asMilliseconds(),name:e.SUMMARY||""}}));let S=e.LOCATION;"string"!=typeof S&&(S=""),e.EXDATE&&e.EXDATE.forEach(e=>{const t=C(e),a=E(e.params.TZID),n=a?m.a.tz(e.value,t,a):m()(e.value,t);r.push({exception:{cancelled:!0,exceptionDate:n.valueOf()}})});const T=e.URL&&e.URL.value;if(N&&d){const e=v(N,f),t=v(d,_),a=e.startOf("day").valueOf()===N,n=t.startOf("day").valueOf()===d,i=1===t.diff(e,"d");a&&n&&i&&(b=!0)}const k=null===(n=e.RRULE)||void 0===n?void 0:n.match(/UNTIL=(\d{8}T\d{6}Z)/);if(k&&"DATE"===(null===(i=e.DTSTART)||void 0===i?void 0:i.params.VALUE)){var A;const t=`UNTIL=${m()(k[1]).add(12,"hour").format(h.r)}`;e.RRULE=null===(A=e.RRULE)||void 0===A?void 0:A.replace(/UNTIL=\d{8}T\d{6}Z/,t)}return{...l,recurrence:e.RRULE?Object(g.i)(e.RRULE,N,f):void 0,url:T,start:N,end:d,timezone:f,allDay:b,end_recurring:void 0,is_recurring:!!e.RRULE,calendarId:a||s.a.getDefaultCalendarId(),href:t.href,etag:t.etag,uid:e.UID?e.UID:"",organizer:e.ORGANIZER&&e.ORGANIZER.value,notifications:y,sequence:parseInt(e.SEQUENCE)||0,...Object(c.a)(r.length>0?{eventExceptions:r}:null),...Object(c.a)(o.length>0?{invites:o}:null),attachment:e.ATTACH,is_template:!1}};function y(e,t){const{is_template:a,...n}=e,i=function(e,t){if(e.invites)return e.invites.map(e=>{const a=t.invites&&t.invites.find(t=>t.address===e.address);return{...e,id:(null==a?void 0:a.id)||"",event_id:(null==a?void 0:a.event_id)||""}})}(e,t),s=function(e,t){if(!e.notifications)return t.notifications;const a=t.notifications;if(!a)return e.notifications.map(e=>({...e,id:"",event_id:t.id}));const n=e.notifications.filter(e=>!a.some(t=>t.when===e.when)).map(e=>({...e,id:"",event_id:t.id}));return[...a,...n]}(e,t);return{...n,attachment:r.a.stringToAttachments(e.attachment),...Object(c.a)(i?{invites:i}:null),...Object(c.a)(s?{notifications:s}:null),id:t.id,start:e.start||0,end:e.end||0}}const S=(e,t,a)=>{if(0===e.length)return Promise.resolve();const i=[[]];let s=0,r=0;return e.forEach(e=>{100===s&&(i[++r]=[],s=0),i[r].push(O(e,{},t)),s++}),n.a.stopAPIChangeListeners(),new Promise((e,t)=>{i.reduce((e,t)=>e.then(()=>n.a.createEvents(t).then(e=>{n.a.setImportedEventsCount({importId:a,importedEventsCount:e.created_count}),n.a.loadPromise()})),Promise.resolve()).then(t=>{e()}).catch(e=>{console.warn(e),t(e)}).finally(e=>{n.a.startAPIChangeListeners(),o.b.updateAllAlarms()})})};function T(e,t,a){return n.a.setEventsToImportCount({importId:t,eventsToImportCount:a.length}),n.a.setImportEventState({importId:t,importEventState:"IMPORTING"}),S(a,e,t).then(()=>{n.a.setImportEventState({importId:t,importEventState:"IMPORT_FINISHED"})}).catch(e=>{console.warn(e),n.a.setImportEventState({importId:t,importEventState:"IMPORT_ERROR"})})}async function k(e,t){const{calendarId:a,createNew:i,newCalendarName:s,importId:r}=t;n.a.setImportEventState({importId:r,importEventState:"PARSING_FINISHED"});const l=Object(d.a)(e).VEVENT;if(i){const e=await f(null,{name:"",description:s,accountId:""});await T(e.id,r,l)}else await T(a,r,l);o.b.updateAllAlarms()}const A=e=>new Promise((t,a)=>{Promise.all(_.map(t=>{const{name:a}=t;var i;n.a.setImportEventState({importId:a,importEventState:"STARTING_PARSING_EVENTS"}),(i=t,new Promise((e,t)=>{const a=new FileReader;i.file(e=>{a.readAsText(e)}),a.onerror=e=>{t(e)},a.onload=t=>{e(t.target.result)}})).then(t=>{k(t,e[a])})})).then(()=>{t()}).catch(e=>{console.warn(e),a(e)})}),I=()=>{_=[]},D=e=>{l.a.fileSystem.chooseEntry({type:"openFile",acceptsMultiple:!0,accepts:[{mimeTypes:["text/*"],extensions:["ics","txt"]}]},t=>{t&&(_=t,e(t))})}},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(112),o=a.n(r);let l=[];const c=new class extends i.a{getTrash(){return u(l)}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}},u=o()(1)(e=>e.filter(e=>!!e.tab||(e.window?"settings"!==(e.window.extData?JSON.parse(e.window.extData):{}).windowType:void 0)));s.a.register(e=>{switch(e.actionType){case"CHROME_SET_SESSION":t=e.session,l=t,c.emitChange()}var t}),t.a=c},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var n=a(98);const i="/resources/contact-person.png";function s(e){const t={toString:function(){return Object(n.a)(this)},isEmpty:function(){return!(this.name||0!==this.emailAddresses.length||this.birthday||this.note||0!==this.postalAddresses.length||0!==this.phonenumbers.length||this.avatarUrl)},clearGenerated:function(){this.isGeneratedFromSentMail&&(this.isGeneratedFromSentMail=!1)}};return Object.assign(Object.create(t),e)}},function(e,t,a){"use strict";var n=a(79),i=a(50),s=a(28),r=a(36),o=a(13),l=a(65),c=a(23);const u={onAction:function(e){const t=function(e,t){i.a.copy(t,[e])},a=function(e,t){i.a.cut(t,[e])},n=function(e,t){i.a.paste(t,e,!0)},l=s.b.getItemById(e.id);if(l){const c=void 0!==l.index?l.index+1:-1;switch(e.command){case"addactivetab":s.b.isFolder(l)?i.a.bookmarkPageInFolder(o.c.unsafeGetActivePage(),l.id):i.a.bookmarkPageInFolder(o.c.unsafeGetActivePage(),l.parentId||"",c);break;case"edit":r.a.showBookmarkDialog({mode:e.command,id:e.id,index:-1});break;case"addfolder":case"addbookmark":r.a.showBookmarkDialog({mode:e.command,id:e.id,index:c});break;case"addseparator":s.b.isFolder(l)?i.a.createSeparator(e.id,l.children?l.children.length:0):l.parentId&&i.a.createSeparator(l.parentId,c);break;case"cut":const u=a.bind(null,e.id);document.addEventListener("cut",u),document.execCommand("cut"),document.removeEventListener("cut",u);break;case"copy":const m=t.bind(null,e.id);document.addEventListener("copy",m),document.execCommand("copy"),document.removeEventListener("copy",m);break;case"paste":const d=n.bind(null,e.id);document.addEventListener("paste",d),document.execCommand("paste"),document.removeEventListener("paste",d)}}},onHover:function(e){l.a.setStatus(c.p.getHoverUrl(s.b.filterUrl(e)))},onOpen:function(e){const t=s.b.getItemById(e.id);if(t){const a=n.a.getOpenOptionsFromDisposition(e.disposition,e.background,n.a.makeEventFlagsFromApiResponse(e.state));a.bookmarks=n.a.getBookmarksByNode(t),n.a.open(a,!0)}}};t.a=u},,,function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return r}));const n="vivaldiStartDragging",i="vivaldiEndDragging",s="vivaldiMinimizeWindow",r="webPanelTitleChanged"},,,function(e,t,a){"use strict";var n=a(14),i=a(13),s=a(12),r=a(279);t.a={load:async function(){const e=new Map,t=Date.now();i.c.getReloadingPages().forEach(a=>{const n=a.getIn(["extData","interval"]),i=a.getIn(["extData","ext_id"]),s={id:i,periodInMinutes:n,scheduledTime:Object(r.b)({periodInMinutes:n,scheduledTime:t}),from:"tab"};e.set(i,s)}),s.a.dispatch({actionType:"PERIODIC_RELOAD_ALL",alarms:e})},createOrDestroyAlarm:async function(e){const{alarm:t,id:a,interval:n,from:i}=e;(null==t?void 0:t.periodInMinutes)===n?await this.destroyPeriodicAlarm(a):await this.createPeriodicReloadAlarm({id:a,interval:n,from:i})},createPeriodicReloadAlarm:async function(e){const{id:t,from:a,interval:o}=e;if(!o)return;const l={id:t,scheduledTime:Object(r.b)({periodInMinutes:o,scheduledTime:Date.now()}),periodInMinutes:o,from:a},c=i.c.getPageByReloadId(t);c&&await n.a.changePeriodicReloadForPages([c.id],o),s.a.dispatch({actionType:"PERIODIC_RELOAD_CREATE",alarm:{alarmId:t,alarm:l}})},destroyAllPeriodicAlarms:async function(){const e=i.c.getReloadingPages().map(e=>e.id).toArray();await n.a.changePeriodicReloadForPages(e,0),s.a.dispatch({actionType:"PERIODIC_RELOAD_DESTROY_ALL"})},destroyPeriodicAlarm:async function(e){const t=i.c.getPageByReloadId(e);t&&await n.a.changePeriodicReloadForPages([t.id],0),s.a.dispatch({actionType:"PERIODIC_RELOAD_DESTROY",alarmId:e})},updateRunningAlarm:function(e,t){const a={alarmId:e,alarm:t};s.a.dispatch({actionType:"PERIODIC_RELOAD_UPDATE",alarm:a})}}},function(e,t,a){"use strict";var n=a(42),i=a(10),s=a(757),r=a(346);const o={};let l=!1;const c={getAuthentication:async e=>{const{url:t,username:a,account_type:n}=e;return a&&t?new Promise((i,s)=>{"google"===n?c._getOAuth(a).then(t=>{i({...e,oauth2Token:t.xoauth2,username:a,password:""})}).catch(e=>{l=!1,s(e)}):c._getVivaldiPassword(a,t||"").then(t=>{i({...e,username:"vivaldi"===n?t.username.toLowerCase():t.username,password:t.password,oauth2Token:""})})}):Promise.reject("Username or URL missing")},_getVivaldiPassword:async(e,t)=>{const{password:a}=await n.a.getPassword(t,e);return{username:e,password:a,oauth2Token:""}},_getOAuth:e=>new Promise((t,a)=>{if(o[e])t({username:e,xoauth2:o[e]});else if(!l)return l=!0,Object(s.a)(i.a.identity.launchWebAuthFlow)({url:Object(r.b)(e),interactive:!0}).then((n="")=>{if(n.substr(n.indexOf("#")+1).split("&").forEach(t=>{if(t.startsWith("access_token="))o[e]=t.substr(13);else if(t.startsWith("expires_in=")){const a=1e3*parseInt(t.substr(11));a>0&&setTimeout(()=>o[e]=void 0,a)}}),!o[e])return a("OAuth2 endpoint didn't provide access token");l=!1,t({username:e,xoauth2:o[e]})}).catch(e=>{a(e.message)})})};t.a=c},,,,,,,,function(e,t,a){"use strict";var n=a(0),i=a(6),s=a(40),r=a.n(s),o=a(25),l=a(1),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FocusTrap.jsx";function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.PureComponent{constructor(...e){super(...e),m(this,"_getFocusable",()=>{const{HTMLElement:e}=this.context,t=r.a.findDOMNode(this);let a=void 0;t instanceof e&&(a=t.querySelectorAll(`a[href]:not([tabindex='-1']),\n        button:not([disabled]):not([tabindex='-1']),\n        input:not([disabled]):not([tabindex='-1']),\n        select:not([disabled]):not([tabindex='-1']),\n        textarea:not([disabled]):not([tabindex='-1']),\n        p[contenteditable]:not([tabindex='-1']),\n        [tabindex]:not([tabindex='-1']):not(.${this.props.focusName})`)),this._focusable=a}),m(this,"isSiblingAfter",(e,t)=>{if(e&&t){let a=t;for(;a;){if(a===e)return!0;a=a.nextSibling}}return!1}),m(this,"focus",()=>{if(this._focusable&&this._focusable.length>0){const e=this._focusable[0];e&&e.focus()}}),m(this,"handleTopFocus",e=>{if(this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,a=this._focusable[0],n=this._focusable[this._focusable.length-1];if(!a||!n)return;e.relatedTarget instanceof t&&this.isSiblingAfter(a,e.relatedTarget)?n.focus():a.focus()}}),m(this,"handleBottomFocus",e=>{if(this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,a=this._focusable[0],n=this._focusable[this._focusable.length-1];if(!a||!n)return;e.relatedTarget instanceof t&&this.isSiblingAfter(e.relatedTarget,n)?a.focus():n.focus()}})}componentDidMount(){this._getFocusable()}componentDidUpdate(e){e.children!==this.props.children&&this._getFocusable()}componentWillUnmount(){delete this._focusable}render(){const{children:e,childRef:t,focusName:a,forceTrap:s,...r}=this.props,o=this._focusable&&this._focusable.length>0;return s||!0===i.a.get(l.kWebpagesFocusTrap)?n.createElement("div",u({},r,{ref:t,__source:{fileName:c,lineNumber:126,columnNumber:9}}),n.createElement("span",{tabIndex:"0",className:a,onFocus:this.handleTopFocus,__source:{fileName:c,lineNumber:127,columnNumber:11}}),e,!1===o&&n.createElement("span",{className:"focus-anchor",tabIndex:"0",__source:{fileName:c,lineNumber:131,columnNumber:38}}),n.createElement("span",{tabIndex:"0",className:a,onFocus:this.handleBottomFocus,__source:{fileName:c,lineNumber:132,columnNumber:11}})):n.createElement("div",u({},r,{ref:t,__source:{fileName:c,lineNumber:139,columnNumber:9}}),e)}}m(d,"contextType",o.a),t.a=d},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(40),r=a.n(s),o=a(25),l=a(523);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.a.PureComponent{constructor(...e){super(...e),u(this,"componentDidMount",()=>{this._attachObserver()}),u(this,"componentWillUnmount",()=>{this._detachObserver()}),u(this,"_attachObserver",()=>{const{Element:e,ResizeObserver:t}=this.context,a=r.a.findDOMNode(this);if(a instanceof e)try{this._observer=new t(this.props.onResize),this._observer.observe(a)}catch(e){console.warn(e)}}),u(this,"_detachObserver",()=>{const{Element:e}=this.context,t=r.a.findDOMNode(this);t instanceof e&&this._observer.unobserve(t)})}componentDidUpdate(e){this.props.attached&&!e.attached&&this._detachObserver(),!this.props.attached&&e.attached&&this._attachObserver()}render(){const e=this.props.component,t=Object(l.a)(this.props,["onResize","component","children","attached"]);return i.a.createElement(e,c({},t,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\vivaldi\\NativeResizeObserver.js",lineNumber:78,columnNumber:7}}),this.props.children)}}u(m,"contextType",o.a),u(m,"defaultProps",{className:"resize",component:"div",children:null,attached:!0}),t.a=m},function(e,t,a){"use strict";var n=a(0),i=a(90),s=a(379),r=a(2),o=a(20),l=a.n(o),c=a(218),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\MasterDetail.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.Component{constructor(e){super(e),m(this,"onSelectItem",e=>{this.setState({selectedIndex:e})}),m(this,"onCreateItem",e=>{this.setState({isCreating:!0}),"function"==typeof this.props.onCreateItem&&this.props.onCreateItem(e)}),m(this,"onCancelCreate",e=>{this.setState({isCreating:!1}),"function"==typeof this.props.onCancelCreateItem&&this.props.onCancelCreateItem()}),m(this,"considerRemovingItem",()=>{this.setState({showDeleteConfirmation:!0})}),m(this,"cancelRemoval",()=>{this.setState({showDeleteConfirmation:!1})}),m(this,"renderContentElement",(e,t,a,n)=>{if(!e||t)return n(a);const i=e&&a&&function(e,t){let a=!1;const n={...t};for(const i of Object.keys(t)){const s=t[i];s.toLowerCase().includes(e)&&(n[i]=Object(c.b)(s,e),a=!0)}return a?n:null}(e,a);return e&&!i?null:n(i||a)}),this.state={selectedIndex:this.props.initialSelectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,showDeleteConfirmation:!1}}componentDidUpdate(e){this.props.items.length!==e.items.length&&this.cancelRemoval()}render(){const{items:e,masterLayout:t}=this.props,a=this.state.selectedIndex,o=null!=a&&e[a];let m;const d=(this.props.title||this.props.subtitle||"").toLowerCase().includes(this.props.filter)?"":this.props.filter,h=!d||e.some(e=>"string"==typeof e.name&&e.name.toLowerCase().includes(d));return(this.state.isCreating||this.props.isCreating)&&this.props.renderCreate?m=this.renderContentElement(d,h,this.props.createStrings?this.props.createStrings:this.props.contentStrings,this.props.renderCreate.bind(this)):o?m=this.renderContentElement(d,h,this.props.contentStrings,this.props.renderContent.bind(this,a)):this.props.renderEmpty&&(m=this.renderContentElement(d,h,this.props.emptyStrings?this.props.emptyStrings:this.props.contentStrings,this.props.renderEmpty.bind(this))),m||h?n.createElement("div",{__source:{fileName:u,lineNumber:173,columnNumber:7}},this.props.title&&n.createElement("h2",{__source:{fileName:u,lineNumber:175,columnNumber:11}},Object(c.b)(this.props.title,this.props.filter)),this.props.subtitle&&n.createElement("h3",{__source:{fileName:u,lineNumber:178,columnNumber:11}},Object(c.b)(this.props.subtitle,this.props.filter)),n.createElement("div",{className:this.props.className?this.props.className+" master-detail":"master-detail",style:this.props.style,__source:{fileName:u,lineNumber:180,columnNumber:9}},this.state.showDeleteConfirmation&&o&&this.props.deleteDialog&&n.createElement(i.a,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:u,lineNumber:188,columnNumber:13}},this.props.deleteDialog({account:o,onClose:this.cancelRemoval})),this.state.showDeleteConfirmation&&o&&this.props.deleteTitle&&n.createElement(i.a,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:u,lineNumber:193,columnNumber:13}},n.createElement("header",{className:"dialog-header",__source:{fileName:u,lineNumber:194,columnNumber:15}},n.createElement("h1",{className:"dialog-title",__source:{fileName:u,lineNumber:195,columnNumber:17}},this.props.deleteTitle)),n.createElement("div",{className:"dialog-content",__source:{fileName:u,lineNumber:197,columnNumber:15}},n.createElement("p",{className:"error",__source:{fileName:u,lineNumber:198,columnNumber:17}},Object(r.a)("Are you sure you would like to delete “$1”?",[this.props.isChain?o.label:o.name]))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:u,lineNumber:208,columnNumber:15}},n.createElement("input",{type:"button",className:"danger",value:Object(r.a)("verb","Delete"),onClick:"function"==typeof this.props.onRemove?this.props.onRemove.bind(this,a):null,__source:{fileName:u,lineNumber:209,columnNumber:17}}),n.createElement("input",{type:"button",value:Object(r.a)("Cancel"),autoFocus:!0,onClick:this.cancelRemoval,__source:{fileName:u,lineNumber:217,columnNumber:17}}))),n.createElement("div",{className:l()({master:!0,"master-layout-double":0===t,"master-layout-single":1===t}),__source:{fileName:u,lineNumber:226,columnNumber:11}},n.createElement(s.a,{items:e,emptyListGraphic:this.props.emptyListGraphic,emptyListString:this.props.emptyListString,renderListItem:this.props.renderListItem,onSelectItem:this.onSelectItem,onCreateItem:this.onCreateItem,isCreating:this.props.isCreating,moveItem:this.props.moveItem,onRemove:this.props.onRemove,filter:this.props.filter,selectedIndex:this.state.selectedIndex,onContextMenu:this.props.onContextMenu,onActivate:this.props.onActivate,onCancelCreate:this.onCancelCreate,addTipString:this.props.addTipString,considerRemovingItem:this.considerRemovingItem,deleteTipString:this.props.deleteTipString,supportDragAndDrop:this.props.supportDragAndDrop,mimeType:this.props.mimeType?this.props.mimeType.toString():void 0,renderCreateListItem:this.props.renderCreateListItem,__source:{fileName:u,lineNumber:232,columnNumber:13}})),m)):null}}t.a=d},,,function(e,t,a){"use strict";var n=a(49),i=a(58),s=a(302),r=a(3);t.a=function(e,t){if(Object(s.a)(e))return!1;const a=t&&e.get(t.id);if(t&&a){if(a.deleted)return!0;const{accountId:e,path:n}=t;return i.a.getFolderType(e,n)===r.xb}return e.size>0&&[...e.entries()].every(([e,t])=>{if(t.deleted)return!0;const a=n.a.get(e);if(!a)return console.error("Source filter not found "+e),!0;const{accountId:s,path:o}=a;return i.a.getFolderType(s,o)===r.xb})}},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(6),s=a(2),r=a(15),o=a.n(r),l=a(97),c=a(103),u=a(1),m=a(9),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\DateInput.jsx";function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=function(e,t){return"0"!==e&&e.length<t?e.padStart(t,"0"):e.length>t?e.slice(e.length-t):e};class g extends n.PureComponent{constructor(t){super(t),p(this,"_focused",!1),p(this,"hidden",n.createRef()),p(this,"fieldRefs",{day:this.props.dayInputRef||n.createRef(),month:n.createRef(),year:n.createRef()}),p(this,"inputPosition",-1),p(this,"setCache",()=>{const[e,t,a]=this.props.value.split("-");this.setState({year:e,month:t,day:a})}),p(this,"getOrder",()=>{const e=this.getFormat().match(/(d+|m+|y+)/gi);if(!e)throw new Error("Incompatible date format found.");return e.map(e=>({type:e.replace(/^d+/i,"day").replace(/^m+/i,"month").replace(/^y+/i,"year"),format:e}))}),p(this,"getFormat",()=>this.props.format||o.a.localeData().longDateFormat("L")),p(this,"processChange",e=>{this.props.onChange(e)}),p(this,"select",e=>{this.inputPosition=-1,e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())}),p(this,"focus",()=>{const e=this.fieldRefs[this._template[0].type];e&&e.current.focus()}),p(this,"onKeyDown",t=>{const{key:a,target:n}=t,i=n.dataset.type,s=this._template.findIndex(e=>e.type===i);if(a&&("ArrowLeft"===a||"ArrowRight"===a||"ArrowDown"===a))switch(a){case"ArrowRight":t.preventDefault();const e=this.fieldRefs[this._template[s+1].type];return void(e&&e.current.select());case"ArrowLeft":t.preventDefault();const a=this.fieldRefs[this._template[s-1].type];return void(a&&a.current.select());case"ArrowDown":return void(t.altKey&&(t.preventDefault(),this.hidden.current&&this.hidden.current.focus()))}isNaN(Number(a))&&e.nextTick(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()})}),p(this,"onChangeDate",e=>{const{type:t}=e.target.dataset;let a=parseInt(e.target.value);const n=[this.state.year,this.state.month,this.state.day],i=!e.nativeEvent.inputType,s=i&&this.props.step?parseInt(this.props.step):1;let r=!1;if(i&&"day"===t){const e=parseInt(this.state.day);r=!0,a=a<e?e-s:e+s}const l="year"!==t?2:(this.getFormat().match(/y/gi)||"YYYY").length,u="year"===t?9999:"month"===t?12:o()(this.props.value).daysInMonth(),m=e.target.value===l||i?1:0;parseInt(a)>u?i?a%=u:a=u:a<m&&(a=i?u:m);let d=a.toString();i&&(d=b(d,l)),r&&e.target.setAttribute("value",d),!i&&(10*a>u||e.target.value.length>=l)&&(d=b(d,l),this.skipToNextField(t)),this.setState({[t]:d},()=>{const e=["year","month","day"].indexOf(t);if(d.length<l)return;n[e]=d;const a=o()(n.join("-"));if(a.isValid()){if(this.props.min&&a.isBefore(o()(this.props.min))||this.props.max&&a.isAfter(o()(this.props.max)))return;const e=this.hidden.current,t=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;e&&t&&(t.call(e,Object(c.c)(a)),e.dispatchEvent(new Event("input",{bubbles:!0})))}})}),p(this,"onFocus",t=>{if(t.persist(),t.preventDefault(),this._focused)return;const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onFocus&&a instanceof HTMLElement&&Object(l.a)(a)&&(this._focused=!0,this.props.onFocus(t))})}),p(this,"onBlur",t=>{const a=this._template.reduce((e,t)=>{const a=this.state[t.type];return a.length<t.format.length&&(e[t.type]=b(a,t.format.length)),e},{});Object.keys(a).length>0&&this.setState(a),t.preventDefault(),t.persist();const n=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onBlur&&n instanceof HTMLElement&&!Object(l.a)(n)&&(this._focused=!1,this.props.onBlur(t))})}),p(this,"keepFocusWithin",e=>{e.preventDefault(),Object(l.a)(e.target.nextElementSibling)||this.focus()}),p(this,"renderFields",()=>{const e=this.getFormat().match(/([^d+|m+|y+]+)/gi)||["/","/"],t=[this._template[0].type,e[0],this._template[1].type,e[1],this._template[2].type],a={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.onKeyDown,onChange:this.onChangeDate,disabled:this.props.disabled};return n.createElement("span",{className:"faux date",__source:{fileName:d,lineNumber:330,columnNumber:12}},t.map((e,t)=>{switch(e.toLowerCase()){case"day":return n.createElement("input",h({},a,{key:"dd_"+t,className:"dateInputDay",type:"number",ref:this.fieldRefs.day,"data-type":"day",tabIndex:this.props.tabIndex,placeholder:Object(s.a)("dd"),value:this.state.day,__source:{fileName:d,lineNumber:335,columnNumber:15}}));case"month":return n.createElement("input",h({},a,{key:"mm_"+t,className:"dateInputMonth",type:"number",ref:this.fieldRefs.month,"data-type":"month",tabIndex:this.props.tabIndex,placeholder:Object(s.a)("date","mm"),value:this.state.month,__source:{fileName:d,lineNumber:350,columnNumber:15}}));case"year":return n.createElement("input",h({},a,{key:"yy_"+t,className:"dateInputYear",type:"number",ref:this.fieldRefs.year,"data-type":"year",tabIndex:this.props.tabIndex,placeholder:Object(s.a)("yyyy"),value:this.state.year,__source:{fileName:d,lineNumber:365,columnNumber:15}}));default:return n.createElement("span",{key:"separator_"+t,className:"dateInputSeparator",__source:{fileName:d,lineNumber:380,columnNumber:15}},e)}}))}),this._template=this.getOrder();const[a,i,r]=this.props.value.split("-");this.state={year:a,month:i,day:r}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}skipToNextField(t){const a=this._template.length,n=this._template.findIndex(e=>e.type===t)+1;n===a&&i.a.get(u.kCalendarAutoTabDatetime)?Object(l.b)(document):e.nextTick(()=>{var e;const t=this._template[Math.min(n,a-1)].type;null===(e=this.fieldRefs[t].current)||void 0===e||e.select()})}render(){const{format:e,onChange:t,tabIndex:a,onFocus:i,onBlur:s,dayInputRef:r,...o}=this.props;return(n.createElement("span",{className:"dateInput",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:d,lineNumber:396,columnNumber:7}},n.createElement("input",h({},o,{type:"date",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:d,lineNumber:401,columnNumber:9}})),this.renderFields(),n.createElement("span",{className:"arrowDown",dangerouslySetInnerHTML:{__html:m.n.medium},__source:{fileName:d,lineNumber:411,columnNumber:9}})))}}t.a=g}).call(this,a(82))},,function(e,t,a){"use strict";a.d(t,"b",(function(){return h}));var n=a(57),i=a.n(n),s=a(262),r=a(12),o=a(99);let l=null,c=new Map;const u=new class extends i.a{getAlarmFromReloadId(e){return c.get(e)}existingAlarms(){return Boolean(c.size)}getPanelAlarms(e){return e.map(e=>this.getAlarmFromReloadId(e)).filter(Boolean)}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}},m=()=>{0===c.size&&(l=clearInterval(l),u.emitChange([]))},d=()=>l=setInterval(()=>{const e=Date.now(),t=[];c.forEach((a,n)=>{const{scheduledTime:i,periodInMinutes:r,id:o,from:l}=a,c=(i-e)/6e4/r;if(c<=0){const e={id:o,scheduledTime:h({periodInMinutes:r,scheduledTime:i}),periodInMinutes:r,from:l};t.push({type:"RELOAD",id:n}),s.a.updateRunningAlarm(n,e)}else t.push({type:"TIME_CHANGED",remainingTime:c,id:n,from:l})}),u.emitChange(t)},1e3);r.a.register(e=>{switch(e.actionType){case"PERIODIC_RELOAD_ALL":n=e.alarms,c=Object(o.c)(c,e=>{n.forEach((t,a)=>{e.set(a,t)})}),!l&&c.size&&d();break;case"PERIODIC_RELOAD_CREATE":a=e.alarm,c=Object(o.c)(c,e=>{e.set(a.alarmId,a.alarm)}),l||d();break;case"PERIODIC_RELOAD_DESTROY":t=e.alarmId,c=Object(o.c)(c,e=>{e.delete(t)}),m();break;case"PERIODIC_RELOAD_UPDATE":c=Object(o.c)(c,t=>{t.set(e.alarm.alarmId,e.alarm.alarm)});break;case"PERIODIC_RELOAD_DESTROY_ALL":c=Object(o.c)(c,e=>{e.clear()}),m()}var t,a,n});const h=e=>{const{scheduledTime:t,periodInMinutes:a}=e;return t+60*a*1e3};t.a=u},,function(e,t,a){"use strict";var n=a(12),i=a(16);var s=new class{setBackgroundTasks(e){n.a.dispatch({actionType:i.a.BACKGROUND_TASKS_SET,tasks:e})}},r=function(e,t,a,n,i,s){this.id=e,this.title=a,this.description=i,this.menuItems=s,this.progress=0,this.text=t},o=a(2);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=new class{constructor(){l(this,"pendingEntries",[]),l(this,"activeEntries",[]),l(this,"tasks",[]),l(this,"add",(e,t,a)=>{this.pendingEntries.push({id:e,url:t,callback:a})}),l(this,"run",()=>{for(;;){if(this.activeEntries.length>=1)return;if(0===this.pendingEntries.length)return void(0===this.activeEntries.length&&(this.removeFromArrayById("thumbnailCapture",this.tasks),s.setBackgroundTasks(this.tasks)));const e=this.pendingEntries.shift();this.activeEntries.push(e);let t=this.getFromArrayById("thumbnailCapture",this.tasks);t||(t=new r("thumbnailCapture","","Thumbnail Capture","",[{name:Object(o.a)("Cancel"),handler:function(){this.pendingEntries=[]}.bind(this)}]),this.tasks.push(t)),t.title=Object(o.a)("Updating thumbnail for $1",[e.url]),t.description=Object(o.a)("$1 bookmark waiting for update.","$1 bookmarks waiting for update.",[this.pendingEntries.length]),t.text=this.pendingEntries.length+this.activeEntries.length,s.setBackgroundTasks(this.tasks),e.callback.call(null,e.id,e.url)}}),l(this,"onLoaded",e=>{this.removeFromArrayById(e,this.activeEntries),this.run()}),l(this,"contains",e=>this.isInArrayById(e,this.pendingEntries)||this.isInArrayById(e,this.activeEntries)),l(this,"getFromArrayById",(e,t)=>t.find(t=>t.id===e)),l(this,"isInArrayById",(e,t)=>t.length&&void 0!==this.getFromArrayById(e,t)),l(this,"removeFromArrayById",(e,t)=>{const a=t.findIndex(t=>t.id===e);-1!==a&&t.splice(a,1)})}},u=a(10),m=a(7),d=a(23);let h=0;const p=new Map,b={getPageThumbnail(e,t,a){h>4||(h++,e.getThumbnail(g(t),e=>{h--,u.a.runtime.lastError?a(void 0):a(e||void 0)}))},updateBookmark(e){this.updateBookmarks([e])},updateBookmarks(e){for(const t of e){const e=t.url;e&&!c.contains(t.id)&&(c.add(t.id,d.p.getUrl(e),N),f(t.id))}c.run()},linkAndQueryUpdatingBookmark:(e,t)=>t?(p.set(e,t),c.contains(t)):(p.delete(e),!1),unlinkBookmarkComponent(e){p.delete(e)}},g=e=>e.compact?{width:330,height:270}:{width:440,height:360},N=(e,t)=>{const a={bookmarkId:e,url:t};m.a.thumbnails.captureBookmark(a,t=>{c.onLoaded(e),f(e)})};function f(e){for(const[t,a]of p)a===e&&t.forceUpdate()}t.a=b},function(e,t,a){"use strict";var n=a(12),i=a(57),s=a.n(i),r=a(56);let o={};const l=new class extends s.a{clear(){o={},l.emitChange()}getOptions(){return o}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}isSenderViewOn(){return l.getOptions().forSender}getSelectedThreadPrefix(){return l.getOptions().threadPrefix}};l.dispatchToken=n.a.register(e=>{switch(e.actionType){case"MAIL_SELECT_FOLDER":n.a.waitFor([r.a.dispatchToken]),o=e.options,l.emitChange();break;case"MAIL_FOLDER_SELECT_HISTORY_INDEX":n.a.waitFor([r.a.dispatchToken]),o=r.a.getOptionsFromHistory(),l.emitChange();break;case"MAIL_SEARCH_SET_OPTIONS":o=e.options,l.emitChange();break;case"MAIL_STOP":l.clear()}}),t.a=l},function(e,t,a){"use strict";var n=a(10),i=a(580),s=a(37);const r={};let o=0;const l={checkForMail:function(e){return c("checkForMail",[...arguments])},deletePopMail:function(e,t){return c("deletePopMail",[...arguments])},getPopMessage:function(e,t,a){return c("getPopMessage",[...arguments])},setCheckInterval:function(e,t){return c("setCheckInterval",[...arguments])},verifyPopLogin:function(e){return c("verifyPopLogin",[...arguments])}};function c(e,t){return new Promise((a,i)=>{const l=o++;r[l]={resolve:a,reject:i},n.a.runtime.getBackgroundPage(a=>{const n={promiseId:l,func:e,args:t};a&&a.postMessage({pop:n},s.o)})})}t.a=l,window.addEventListener("message",(function(e){if(e.origin!==s.o)return;const{pop:t}=e.data;if(t){const{promiseId:e,results:a,error:n}=t,{resolve:s,reject:o}=r[e];delete r[e],n?o(new Error(Object(i.a)(n))):s(a)}}),!1)},,function(e,t,a){"use strict";var n=a(552),i=a(436),s=a(2);let r=[],o=[];const l={getTranslationCode:e=>n.c[e]||e,getTranslationLocales(){if(!r.length){const e=i.a.getState().serverLanguages;o=n.a.filter(e=>!n.d.includes(e.key)).concat(n.b),r=o.filter(t=>{const a=l.getTranslationCode(t.key);return e.includes(a)})}return r},getHumanReadableLanguageFromCode(e){const t=o.find(t=>{const a=l.getTranslationCode(t.key);return t.key===e||a===e});return t?t.value:Object(s.a)("Unknown ($1)",[e])}};t.a=l},,,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return C}));var n=a(32),i=a(42),s=a(36),r=a(692),o=a(6),l=a(12),c=a(16),u=a(10),m=a(15),d=a.n(m),h=a(7),p=a(38),b=a(1),g=a(105),N=a(171);const{createEventNotificationString:f,parseEventNotificationString:_}=i.a;let v;async function E(e){const t=await new Promise(e=>u.a.alarms.getAll(e));await Promise.all(t.map(async t=>{const{notificationId:a,snooze:n}=_(t.name);e!==a||n||await new Promise(e=>u.a.alarms.clear(t.name,e))}))}function C(e,t){const{id:a,event_id:i,when:s,delay:r=0}=e,o=t||i&&n.a.getEvent(i);if(!o)return console.warn("Can not create alarms, event not found",e),void h.a.calendar.deleteNotification(a);if(o.trash)return;const{recurrence:l}=o;let c=[];if(l){const e=null==i?void 0:i.split(":")[1],t=Date.now()+s+r;c=Object(g.c)(l.toString(),t,t+7*p.c,o.timezone).map(e=>e.valueOf()-s).filter(t=>!e||t===e)}else o.start-s+r>Date.now()&&(c=[o.start-s+r]);c.forEach(e=>{u.a.alarms.create(f(a,o.id,e),{when:e})})}const w=new class{async loadNotifications(){await h.a.calendar.getAllNotifications(e=>{l.a.dispatch({actionType:"NOTIFICATIONS_INIT",notifications:e})})}deleteNotification(e){const{id:t,event_id:a}=e;a&&(h.a.calendar.deleteNotification(t),E(t))}createNotification(e,t){e.event_id&&(e.event_id=e.event_id.split(":")[0]),h.a.calendar.createNotification(e,e=>{e.event_id&&C(e,t)})}snooze(e,t,a){const n=Date.now()+a*p.g;u.a.alarms.create(f(e.id,t.id,void 0,!0),{when:n})}async updateNotification(e,t){let{id:a,event_id:n,...i}=e;n&&(n=n.split(":")[0]);const s=await new Promise(e=>h.a.calendar.updateNotification(a,i,t=>e(t)));s.event_id&&(await E(a),await C(s,t))}async updateAlarmsForNotification(e,t){await E(e.id),await C(e,t)}async updateAllAlarms(){const e=await i.a.getAllNotifications();await Promise.all(e.map(e=>E(e.id))),await Promise.all(e.map(e=>C(e)))}startAPIChangeListeners(){o.a.get(b.kMailIsTurnedOff)?console.warn("Calendar is disabled. Not starting Notifications API listeners."):(Object.keys(y).forEach(e=>h.a.calendar[e].addListener(w.loadNotifications)),v||(v=setInterval(()=>w.updateAllAlarms(),30*p.g)),e.nextTick(()=>w.updateAllAlarms()))}stopAPIChangeListeners(){Object.keys(y).forEach(e=>h.a.calendar[e].removeListener(w.loadNotifications)),v&&(clearInterval(v),v=null)}showNotification(e,t){const a=o.a.get(b.kCalendarNotificationType),n=o.a.get(b.kCalendarNotificationSound);if("system"===a){const a=t.title||e.name||"",n=d()(t.start).format("LT");Object(N.a)({title:`${n} - ${a}`,requireInteraction:!0,silent:!0})}else s.a.showCalendarNotification(e,t,"dialog"!==a);if(n){new Audio(n).play()}}};function O(e){const{notificationId:t}=_(e.name);if(!t)return;const{notifications:a}=r.a.getState(),i=a.find(e=>t===e.id);if(!i)return;const s=n.a.getEvent(i.event_id||"");if(s){if(o.a.get(b.kCalendarHiddenHidesNotifications)){const e=n.a.getCalendars().find(e=>e.id===s.calendarId);if(null==e?void 0:e.hidden)return}w.showNotification(i,s)}}u.a.alarms.onAlarm.addListener(O),o.a.addListener(b.kMailIsTurnedOff,(function(e,t,a){a===b.kMailIsTurnedOff&&(t?u.a.alarms.onAlarm.removeListener(O):u.a.alarms.onAlarm.addListener(O))}));const y={onNotificationChanged:c.a.CALENDAR_NOTIFICATION_CHANGED};t.b=w}).call(this,a(82))},,function(e,t,a){"use strict";(function(e){var n=a(57),i=a.n(n),s=a(15),r=a.n(s),o=a(13),l=a(51),c=a(12),u=a(35),m=a(399),d=a(26),h=a(523),p=a(512),b=a(455),g=a(425),N=a(375),f=a(103),_=a(975);const v=Object(N.extendMoment)(r.a);let E=null,C=new d.Map,w=new d.Map({today:[],other:[]});const O={};let y=l.a.DESCENDING_SORT,S="";const T=new class extends i.a{getPanelResourceKey(){return"PANEL"}isPanel(e){return"PANEL"===e}getHistorySearchResults(e){let t=[];const a=this.getFilter(e);if(a.sortOrder!==y||a.sortField!==S){const{sortOrder:e,sortField:t}=a;w=w.set("today",this.sortHistory(e,t,w.get("today"))),w=w.set("other",this.sortHistory(e,t,w.get("other"))),y=a.sortOrder,S=a.sortField}if(t=a.sortOrder===l.a.DESCENDING_SORT?w.get("today").concat(w.get("other")):w.get("other").concat(w.get("today")),t=t.filter(e=>e.visitTime>=a.startTime.valueOf()&&e.visitTime<=a.endTime.valueOf()),a.parsedFilter.query||a.parsedFilter.title||a.parsedFilter.url){const e={items:t,filterText:a.parsedFilter.query.toLowerCase(),titleFilter:a.parsedFilter.title.toLowerCase(),urlFilter:a.parsedFilter.url.toLowerCase(),shouldSearchUrl:a.searchURL};t=Object(_.a)(e)}return{items:t,filter:a,oldestHistoryDate:E||v()}}getFilteredHistory(e){const t={items:w.get("today").concat(w.get("other")),filterText:e,shouldSearchUrl:!0},a=Object(_.a)(t),n=new Map;for(let e=a.length;e--;){const t=a[e].children;for(let e=t.length;e--;){const a=t[e],i=n.get(a.url);n.set(a.url,{...a,visitCount:i?i.visitCount+a.visitCount:a.visitCount,visitTime:i?Math.max(i.visitTime,a.visitTime):a.visitTime})}}return[...n.values()]}sortHistory(e,t,a){const n=l.a.getDefaultComparator(e,t);return l.a.treeSort(a,n),a}getStatistics(e){const t={...w.get("todaysStats",{}),...w.get("olderStats",{})},a=C.get(e,new m.a);return this.getFilteredStatistics(t,a.parsedFilter.query.toLowerCase())}getFilteredStatistics(e,t){const a={};return Object.keys(e).forEach(n=>{const i=e[n].mostVisited.filter(e=>-1!==e.url.indexOf(t));i.length&&(a[n]={mostVisited:i,timeArr:e[n].timeArr,pages:i.length,visits:i.reduce((e,t)=>e+t.visitCount,0)})}),a}getFilter(e){let t=C.get(e);if("number"!=typeof e){if(t||(t=new m.a({range:v.range(v().startOf("day"),v().endOf("day"))})),"PANEL"!==e)return console.error("Unkonwn subscriber id",e),t;{const e=this.getTimeByRange({rangePicker:t.rangePicker});t=t.merge({endTime:e.endTime?e.endTime:t.endTime,startTime:e.startTime?e.startTime:t.startTime})}}else if(!t){t=new m.a({range:v.range(v().startOf("day"),v().endOf("day"))});let a={...o.c.getHistoryManagerState(e)};0===Object.getOwnPropertyNames(a).length?(a={...u.a.getSync("HISTORY_MANAGER_STATE")},a.endTime=v(),"range"===a.displayMode?(a.startTime?a.startTime=v(a.startTime):E?a.startTime=E:v().startOf("month"),a.range=v.range(a.startTime,a.endTime)):(a.startTime=v().startOf(a.displayMode),a.range=v.range(v(a.startTime).startOf(a.displayMode),v(a.endTime).endOf(a.displayMode)))):(a.startTime=a.startTime?v(a.startTime):v(),a.endTime=a.endTime?v(a.endTime):v(),a.range=v.range(v(a.startTime).startOf("day"),v(a.endTime).endOf("day"))),t=t.merge(a)}return C=C.set(e,t),t}getTimeByRange(e,t){return isNaN(parseInt(e.rangePicker))?"today"===e.rangePicker?(e.startTime=v().startOf("day"),e.endTime=v().endOf("day")):"yesterday"===e.rangePicker?(e.startTime=v().subtract(1,"day").startOf("day"),e.endTime=v().subtract(1,"day").endOf("day")):"last_month"===e.rangePicker?(e.startTime=v().subtract(1,"month").startOf("month"),e.endTime=v().subtract(1,"month").endOf("month")):"all"===e.rangePicker?(t&&(e.startTime=t.startOf("day")),e.endTime=v().endOf("day")):"date_range"===e.rangePicker||console.warn("Unknown date range",e.rangePicker):(e.startTime=v().subtract(parseInt(e.rangePicker),"day").startOf("day"),e.endTime=v().endOf("day")),e}emitChange(e){this.emit("change",e)}emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};function k(e){if("start"===e)O.id||(O.id=setInterval(k,6e5,"tick"),O.date=v());else if("stop"===e)O.id&&(clearInterval(O.id),O.id=void 0);else if("tick"===e){const e=v();O.date.date()!==e.date()&&(O.date=e,T.emitChange("searchResultsReady"))}}function A(e){e.forEach(e=>{e.isFolder?function(e){const t=v(e.at).startOf("day"),a=v(e.at).endOf("day"),n=Object(f.c)(t);let i="other",s="olderStats";v().isBetween(t,a)&&(i="today",s="todaysStats");w.get(i).forEach((e,t)=>{if(e.id===n){const e=w.get(i),a=w.get(s);w=w.set(s,Object(h.a)(a,n)),e.splice(t,1),w=w.set(i,e)}})}(e):void 0===e.url?console.error("Can not remove history element. Url missing"):function(e){const t=v(e.at).startOf("day"),a=v(e.at).endOf("day"),n=Object(f.c)(t);let i="other",s="olderStats";v().isBetween(t,a)&&(i="today",s="todaysStats");const r=[];w.get(i).forEach(t=>{if(t.id===n){const a=w.get(s);a[n].mostVisited.forEach((t,i)=>{t.url===e.url&&a[n].mostVisited.splice(i,1)});const i=t.children.filter(t=>t.url!==e.url);i.length>0&&(i.length!==t.children.length?r.push({...t,children:i}):r.push(t))}else r.push(t)}),w=w.set(i,r)}(e)}),T.emitChange("searchResultsReady")}function I(e,t){const a={};return Object(p.a)(e,(e,n)=>{const i={},s=Object(b.a)(e,"hour");Object(p.a)(s,(e,t)=>{const a=Object(g.a)(e,"url");i[t]={pages:a.length,visits:e.reduce((e,t)=>e+t.visitCount,0)}});const r=[];for(let e=0;e<=24;e++)r.push({hour:e,pages:i[e]?i[e].pages:0,visits:i[e]?i[e].visits:0,unixDate:v(n+"T"+(e<10?"0":"")+e).valueOf()});a[e[0].dateKey]={mostVisited:t[e[0].dateKey],timeArr:r}}),a}function D(e){return Object(b.a)(e,"dateKey")}function M(e){const t=[];return Object(p.a)(e,(e,a)=>{const n=Object(b.a)(e,"url"),i=[];Object(p.a)(n,(e,t)=>{const a=e[0],n=e.reduce((e,t)=>e.visitTime>t.visitTime?e:t).visitTime,s=e.reduce((e,t)=>e+t.visitCount,0);i.push({address:a.address,isBookmarked:a.isBookmarked,protocol:a.protocol,title:a.title,hour:a.hour,transition_type:a.transition_type,url:t,id:a.id+"_"+n,visitCount:s,visitTime:n,dateKey:a.dateKey})}),t.push({children:i,id:e[0].dateKey,pages:Object.keys(n).length,visitCount:i.reduce((e,t)=>e+t.visitCount,0),visitTime:v(e[0].dateKey).valueOf()})}),t}function P(e){const t={};return e.forEach(e=>{const a=e.children.slice().sort((e,t)=>e.visitCount-t.visitCount);t[e.id]=a.map(e=>({url:e.url,visitCount:e.visitCount}))}),t}c.a.register(t=>{switch(t.actionType){case"CHROME_TABS_REMOVED":a=t.tabId,C=C.delete(a);break;case"HISTORY_INIT":k("start");break;case"HISTORY_INIT_FILTER":!function(e,t){if(!e.startTime||!e.endTime)return void console.error("Initializing history filter failed. Missing timestamps");const a=T.getTimeByRange({rangePicker:e.rangePicker,startTime:v(e.startTime),endTime:v(e.endTime)}),n=C.get(t,new m.a);C=C.set(t,n.merge(a)),T.emitChangeParam("filterChange",t)}(t.setting,t.id);break;case"HISTORY_LOAD_TODAY":!function(e){const t=w.get("today");if(t.length>0){if(v(t[0].visitTime).endOf("day")<v().startOf("day")){w=w.set("other",t.concat(w.get("other")));const e=w.get("todaysStats"),a=w.get("olderStats"),n=Object.assign(e,a);w=w.set("olderStats",n)}}const a=D(e),n=M(a);if(y===l.a.ASCENDING_SORT){const e=l.a.getDefaultComparator(y,"visitTime");l.a.treeSort(n,e)}w=w.set("today",n);const i=I(a,P(n));w=w.set("todaysStats",i),T.emitChange("searchResultsReady")}(t.items);break;case"HISTORY_LOAD_YESTERDAY_AND_OLDER":!function(e){const t=D(e),a=M(t),n=P(a);w=w.set("other",w.get("other").concat(a)),E=v(w.get("other").reduce((e,t)=>e<t.id?e:t.id,v().valueOf()));const i=I(t,n);w=w.set("olderStats",{...w.get("olderStats"),...i}),T.emitChange("searchResultsReady")}(t.items);break;case"HISTORY_REMOVE_AFTER":!function(e){if(0===e)w=new d.Map,w=w.set("today",[]),w=w.set("other",[]),w=w.set("todaysStats",{}),w=w.set("olderStats",{}),T.emitChange("searchResultsReady");else{const t=v();let a="today",n="todaysStats";e<t.startOf("d").valueOf()&&(a="other",n="olderStats",w=w.set("today",[])),w=w.set("todaysStats",{});let i=!1;const s=[],r=w.get(a);r.forEach(t=>{const a=t.children.slice().filter(t=>t.visitTime<=e);i=i||a.length!==t.children.length,a.length>0&&(a.length!==t.children.length?s.push({...t,children:a}):s.push(t))}),w=w.set(a,i?s:r);const o=w.get(n,{}),l=new v(e);Object.keys(o).forEach(e=>{v(e).startOf("day")>=l.startOf("day")&&delete o[e]}),w=w.set(n,o),T.emitChange("searchResultsReady")}}(t.since);break;case"HISTORY_REMOVE_VISITS":A(t.visits);break;case"HISTORY_SEARCH":!function(t,a){const n=C.get(a);C=C.set(a,t),n.text!==t.text&&T.emitChangeParam("filterChange",a),e.nextTick(()=>{T.emitChangeParam("searchResultsReady",a)})}(t.filter,t.id)}var a}),t.a=T}).call(this,a(82))},function(e,t,a){"use strict";var n=a(174),i=a(193),s=a(11),r=a(6),o=a(12),l=a(129),c=a(1);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=new class{constructor(){u(this,"init",()=>{fetch("https://xmpp.vivaldi.net:5555/lastmsgs",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n.a.getClient().bareJid})}).then(e=>e.json()).then(e=>{(e=e.concat(Object(l.h)())).forEach(async e=>{const t=e.displayName?e.address:`${e.username}@xmpp.vivaldi.net`,a=await Object(l.d)(t),{messages:n}=i.a.getState();n.set(t,a),o.a.dispatch({actionType:"CHAT_INIT",messages:n})})})}),u(this,"receivedMessage",async(e,t=!1)=>{if(!e.body)return;const a=t?Object(l.j)(e.from):Object(l.j)(e.to);e.read=!1;const n=i.a.getMessagesFrom(a);let s;if(n&&(s={...n,messages:[...n.messages,e]}),!s){s={...await Object(l.d)(a)}}o.a.dispatch({actionType:"CHAT_MESSAGE_RECEIVED",origin:a,messages:s})}),u(this,"loggingIn",()=>{o.a.dispatch({actionType:"CHAT_LOG_IN"})}),u(this,"signOut",()=>{o.a.dispatch({actionType:"CHAT_SIGN_OUT"})}),u(this,"connected",()=>{o.a.dispatch({actionType:"CHAT_CONNECTED"})}),u(this,"disconnected",()=>{o.a.dispatch({actionType:"CHAT_DISCONNECTED"})}),u(this,"getMoreHistory",async e=>{const t=i.a.getMessagesFrom(e);if(!t)return;const a=t?t.first:"",n=t?t.messages:[],s={paging:{max:30,before:a}},r=await Object(l.d)(e,s);if(!r.messages.length||!r.first.length)return;const c={messages:[...r.messages,...n],first:r.first,last:r.last};o.a.dispatch({actionType:"CHAT_HISTORY",origin:e,messages:c})}),u(this,"updateLastActivity",(e,t)=>{if(!e.length)return;const a=r.a.get(c.kChatConversationTimestamps),n=a.findIndex(t=>t.name===e);if(-1!==n?a.splice(n,1,{name:e,timestamp:Date.now()}):a.push({name:e,timestamp:Date.now()}),s.a.set(c.kChatConversationTimestamps,a),!t.length)return;const l=i.a.getMessagesFrom(e);if(l){for(let e=l.messages.findIndex(e=>e.id===t[t.length-1])-1;e<l.messages.length;e++)l.messages[e].read=!0;o.a.dispatch({actionType:"CHAT_ACTIVITY_ACTION",origin:e,messages:l})}}),u(this,"updateActiveConversation",e=>{o.a.dispatch({actionType:"CHAT_ACTIVE_ACTION",active:e})})}};t.a=m},function(e,t,a){"use strict";var n=a(130),i=a(13),s=a(6),r=a(65),o=a(12),l=a(324),c=a(2),u=a(7),m=a(134),d=a(1),h=a(23);const p=new class{async setUIZoomPercentage(e){await p.setUIZoom(e/100)}async setUIZoom(e){const t=Math.min(Math.max(e,m.l),m.k);await u.a.zoom.setVivaldiUIZoom(t)}setPageZoomPercentage(e){p.setPageZoom(e/100)}setPageZoom(e){const t=Math.min(Math.max(e,m.h),m.g);i.c.unsafeGetActivePage().url.startsWith(h.p.internals.notes)?o.a.dispatch({actionType:"ZOOM_NOTES",zoomData:t}):o.a.dispatch({actionType:"ZOOM_PAGE",zoomData:t});const a=n.a.getActiveWebView();a&&(a.setZoom(t),"overlay"!==s.a.get(d.kStatusBarDisplay)&&s.a.get(d.kToolbarsStatus).includes("Zoom")||r.a.setStatus(Object(c.a)("Page Zoom $1%",[Math.round(100*t)]),2e3))}async uiZoomIn(){const{uiZoom:e}=l.a.getState(),t=parseFloat(e+m.n);await p.setUIZoom(t)}async uiZoomOut(){const{uiZoom:e}=l.a.getState(),t=parseFloat(e-m.n);await p.setUIZoom(t)}async pageZoomIn(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e+m.i).toFixed(2)))}async pageZoomOut(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e-m.i).toFixed(2)))}async pageZoomHalf(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((e/2).toFixed(2)))}async pageZoomReset(){const e=await u.a.zoom.getDefaultZoom();p.setPageZoom(e)}async pageZoomDouble(){const e=await p.getActiveZoom();p.setPageZoom(parseFloat((2*e).toFixed(2)))}getActiveZoom(){return new Promise(e=>{const t=n.a.getActiveWebView();t?t.getZoom(t=>{e(t)}):e(m.f)}).then(e=>e)}dispatchZoomUI(e){o.a.dispatch({actionType:"ZOOM_SET_UI",zoomData:e})}};function b(e){o.a.dispatch({actionType:"ZOOM_PAGE_DEFAULT",zoomData:e})}u.a.zoom.getVivaldiUIZoom(e=>{p.dispatchZoomUI(e)}),u.a.zoom.onUIZoomChanged.addListener(e=>{const t=n.a.getActiveWebView();t&&["richtexteditor","markdowneditor"].includes(t.name)||p.dispatchZoomUI(e)}),u.a.zoom.getDefaultZoom(b),u.a.zoom.onDefaultZoomChanged.addListener(b),t.a=p},,,,,function(e,t,a){"use strict";var n=a(49),i=a(58),s=a(3);t.a=function(e){return[...e.entries()].some(([e,t])=>{if(t.deleted)return!1;const a=n.a.get(e);if(!a)return console.error("Source filter not found "+e),!1;const{accountId:r,path:o}=a;return i.a.getFolderType(r,o)===s.D})}},function(e,t,a){"use strict";t.a=e=>Boolean(e&&["ctrlKey","altKey","metaKey","shiftKey"].some(t=>!0===e[t]))},,function(e,t,a){"use strict";var n=a(104);function i(e){return(e=e.replace(/[^0-9a-z]+([a-z]|$)/gi,(e,t)=>t.toUpperCase()))||(e=":"),e}function s(e,t){const a=(new DOMParser).parseFromString(e,"text/xml");if(!a||a.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","parsererror").length)return{parsererror:!0,root:"",simplifyerror:!1};const n={prefixes:(t||{}).prefixes||{":":""},simplify:(t||{}).simplify||[]},s={parsererror:!1,root:"",simplifyerror:!1};return s.root=function e(t,a,n,s){let r="",o="";for(let l=0;l<t.childNodes.length;l++){const c=t.childNodes[l];if(c instanceof Element){let o=i(c.localName);const l=t.nodeType===Node.DOCUMENT_NODE||n.simplify.some(e=>c.parentNode instanceof Element&&(e.parentns===(c.parentNode.namespaceURI||"")&&e.parent===c.parentNode.localName&&e.elementns===(c.namespaceURI||"")&&e.element===c.localName)),u=c.namespaceURI||":",m=c.namespaceURI||"";o=n.prefixes&&n.prefixes.hasOwnProperty(u)?n.prefixes[u]+"_"+o:m+":"+o,r=o;const d={attributes:{}};for(let e=0;e<c.attributes.length;e++){const t=c.attributes[e];let a=i(t.localName);const s=t.namespaceURI||":",r=t.namespaceURI||"";a=n.prefixes&&n.prefixes.hasOwnProperty(s)?n.prefixes[s]+"_"+a:r+":"+a,d.attributes[a]=t.nodeValue}e(c,d,n,s),l?a[o]?(s.simplifyerror=!0,a.simplifyerror||(a.simplifyerror={}),a.simplifyerror[o]instanceof Array||(a.simplifyerror[o]=[]),a.simplifyerror[o].push(d)):a[o]=d:(a[o]instanceof Array||(a[o]=[]),a[o].push(d))}else c.nodeType!==Node.TEXT_NODE&&c.nodeType!==Node.CDATA_SECTION_NODE||(o+=c.nodeValue)}return t.nodeType===Node.ELEMENT_NODE&&(a.content=o.replace(/^\s+$/,"")),r}(a,s,n,s),s.root||(s.parsererror=!0),s}a.d(t,"a",(function(){return u}));const r="DAV:",o="urn:ietf:params:xml:ns:caldav",l="http://calendarserver.org/ns/",c={prefixes:{":":"",[r]:"d",[o]:"c",[l]:"cs"},simplify:[{parentns:o,parent:"calendar-home-set",elementns:r,element:"href"},{parentns:o,parent:"calendar-multiget",elementns:r,element:"prop"},{parentns:o,parent:"calendar-query",elementns:o,element:"filter"},{parentns:o,parent:"calendar-query",elementns:r,element:"prop"},{parentns:o,parent:"comp-filter",elementns:o,element:"comp-filter"},{parentns:r,parent:"current-user-principal",elementns:r,element:"href"},{parentns:o,parent:"filter",elementns:o,element:"comp-filter"},{parentns:r,parent:"multistatus",elementns:r,element:"sync-token"},{parentns:r,parent:"prop",elementns:o,element:"calendar-data"},{parentns:r,parent:"prop",elementns:o,element:"calendar-home-set"},{parentns:r,parent:"prop",elementns:r,element:"current-user-principal"},{parentns:r,parent:"prop",elementns:r,element:"displayname"},{parentns:r,parent:"prop",elementns:l,element:"getctag"},{parentns:r,parent:"prop",elementns:r,element:"getetag"},{parentns:r,parent:"prop",elementns:r,element:"resourcetype"},{parentns:r,parent:"prop",elementns:o,element:"supported-calendar-component-set"},{parentns:r,parent:"prop",elementns:r,element:"sync-token"},{parentns:r,parent:"propfind",elementns:r,element:"prop"},{parentns:r,parent:"propstat",elementns:r,element:"prop"},{parentns:r,parent:"propstat",elementns:r,element:"status"},{parentns:r,parent:"resourcetype",elementns:r,element:"calendar"},{parentns:r,parent:"resourcetype",elementns:r,element:"collection"},{parentns:r,parent:"response",elementns:r,element:"href"},{parentns:r,parent:"response",elementns:r,element:"status"},{parentns:o,parent:"sync-collection",elementns:r,element:"prop"},{parentns:r,parent:"sync-collection",elementns:l,element:"sync-level"},{parentns:r,parent:"sync-collection",elementns:l,element:"sync-token"}]};function u(e){var t;const a=s(e,c);return Array.isArray(null==a?void 0:null===(t=a.d_multistatus)||void 0===t?void 0:t.d_response)&&(a.d_multistatus.d_response=a.d_multistatus.d_response.map(e=>{if(!Array.isArray(e.d_propstat))return e;const t=e.d_propstat.filter(e=>{var t;return-1!==(t=e.d_status,Array.isArray(t)?t[0]:t).content.indexOf("200")}).reduce((e,t)=>e.d_prop?(e.d_prop=Object.assign(e.d_prop,t.d_prop),e):Object.assign(e,t),{});return e.d_propstat=t,e})),a.d_error&&(n.a.log("caldavtojson error",a),a.parsererror=!0),a}},function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return u}));a(53);var n=a(13),i=a(26);function s(e){const t=n.c.getPageById(e);return!!t&&r(t)}function r(e){const t=e.getIn(["extData","tiling","id"]);if(!t)return!1;if(n.c.getPages(e.windowId).filter(e=>e.getIn(["extData","tiling","id"])===t).count()<2)return!1;const a=n.c.unsafeGetActivePage().getIn(["extData","tiling","id"]);return t&&a&&t===a}function o(e){if(!e)return!1;if(e.active)return!0;const t=c(e);return!!t&&t.some(e=>e.active)}function l(e){if(!n.c.getPages(e))return Object(i.List)();const t=n.c.unsafeGetActivePage(e);return t?c(t)||i.List.of(t):Object(i.List)()}function c(e){return r(e)?n.c.getTiles(e.getIn(["extData","tiling","id"]),e.windowId):null}function u(e){return!!e&&n.c.isGroup(e.getIn(["extData","group"]),e.windowId)}},,,,,function(e,t,a){"use strict";var n=a(295),i=a(12),s=a(35),r=a(10),o=a(15),l=a.n(o),c=a(7);a(399);let u=!1;const m=[];function d(){const e=l()().startOf("date"),t=l()().endOf("date");return new Promise(a=>{c.a.historyPrivate.visitSearch({startTime:e.valueOf(),endTime:t.valueOf()},e=>{i.a.dispatch({actionType:"HISTORY_LOAD_TODAY",items:e}),a()})})}function h(e){for(;e.timeRemaining()>0&&m.length>0;){const e=m.pop();e.length>0&&i.a.dispatch({actionType:"HISTORY_LOAD_YESTERDAY_AND_OLDER",items:e}),m.length>0&&requestIdleCallback(h)}}const p=new class{loadPromise(){return d().then(()=>{i.a.dispatch({actionType:"HISTORY_INIT"});const e="HISTORY_"+n.a.getPanelResourceKey(),t=s.a.getSync(e);t&&i.a.dispatch({actionType:"HISTORY_INIT_FILTER",id:n.a.getPanelResourceKey(),setting:t}),r.a.history.onVisited.addListener(d)})}loadAll(){if(!u){u=!0;const e="month",t=l()().subtract(1,"d").endOf("d"),a=36,n=[],i=l()().subtract(a+1,e).endOf(e),s=l()("1970-01-01");n.push({e:i.valueOf(),s:s.valueOf()});for(let i=a;i>=0;i--){const a=l()(t).subtract(i,e).endOf(0===i?"d":e),s=l()(a).startOf(e);n.push({e:a.valueOf(),s:s.valueOf()})}n.forEach(e=>{c.a.historyPrivate.visitSearch({startTime:e.s.valueOf(),endTime:e.e.valueOf()},e=>{e.length>0&&(m.push(e),requestIdleCallback(h))})})}}deleteHistoryPromise(e){return i.a.dispatch({actionType:"HISTORY_REMOVE_VISITS",visits:e}),Promise.all(e.map(e=>new Promise(t=>{const a=l()(e.at);let n={startTime:l()(a.startOf("day")).valueOf(),endTime:l()(a.endOf("day")).valueOf()};e.isFolder?r.a.history.deleteRange(n,()=>{t()}):(n={...n,url:e.url||""},c.a.historyPrivate.deleteVisits(n,()=>{t()}))})))}removeLocalHistory(e){l()(e).isSame(l()(),"day")?d():i.a.dispatch({actionType:"HISTORY_REMOVE_AFTER",since:e})}searchHistory(e,t){i.a.dispatch({actionType:"HISTORY_SEARCH",filter:t,id:e})}saveStateFromSearchQuery(e,t){const a=t.toJS();n.a.isPanel(e)?s.a.set({["HISTORY_"+e]:{rangePicker:a.rangePicker,startTime:a.startTime.valueOf(),endTime:a.endTime.valueOf()}}):s.a.set({HISTORY_MANAGER_STATE:{displayMode:a.displayMode,startTime:a.startTime.valueOf(),endTime:a.endTime.valueOf(),dayPickerVisible:a.dayPickerVisible,moreInfoVisible:a.moreInfoVisible,monthEntriesVisible:a.monthEntriesVisible}})}};t.a=p},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(2);const i=[Object(n.a)("bytes"),Object(n.a)("KB"),Object(n.a)("MB"),Object(n.a)("GB"),Object(n.a)("TB"),Object(n.a)("PB")];function s(e,t){if(isNaN(e))return e?e.toString():"";if(e<=0)return Object(n.a)("0 bytes");void 0===t&&(t=e<1024?0:2);let a=i.length-1;for(var s=0;s<i.length;s++)if(e<Math.pow(1024,s+1)){a=s;break}let r=(e/Math.pow(1024,a)).toLocaleString(void 0,{maximumFractionDigits:t});if(t>0){const e="."+"0".repeat(t);r.endsWith(e)&&(r=r.substring(0,r.length-e.length))}return r+(i[a]?" "+i[a]:"")}},function(e,t,a){"use strict";var n=a(145),i=a(47),s=a(11),r=a(6),o=a(10),l=a(60),c=a(3),u=a(409),m=a(1);const d=new class{constructor(){var e,t,a;a=()=>{window.isMailWindow?Object(u.a)():o.a.runtime.sendMessage({refreshRSS:!0})},(t="updateAllFeeds")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}add(e){const t=r.a.get(m.kRssSettings),a=e.filter(e=>!t.some(t=>t.url===e.url));a.length&&s.a.set(m.kRssSettings,[...t,...a])}async removeAllFeeds(){const e=r.a.get(m.kRssSettings);try{for(const t of e){const e=await n.a.removeContactFilter(t.path);void 0!==e&&l.a.updateFilters([e]),await i.a.removeAccountPath(c.n,t.path,"RSS")}s.a.set(m.kRssSettings,[])}catch(e){console.error(e)}}async removeFeed(e){const t=r.a.get(m.kRssSettings),a=t.findIndex(t=>t.path===e);try{const r=await n.a.removeContactFilter(e);void 0!==r&&l.a.updateFilters([r]),i.a.removeAccountPath(c.n,e,"RSS");const o=[...t];o.splice(a,1),s.a.set(m.kRssSettings,o)}catch(e){console.error(e)}}async edit(e,t){const a=r.a.get(m.kRssSettings),i=a[t];if(i.title!==e.title){const t=await n.a.setFilterName(c.n,i.path,e.title);l.a.updateFilters(t)}a[t]=e,s.a.set(m.kRssSettings,a)}};t.a=d},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(178);const{basicHttpAuthenticationHeader:i}=n.a;function s(e,t){return new Promise((a,n)=>{const{username:s,password:r,body:o,method:l,contentType:c,oauth2Token:u,headers:m,href:d}=e;t||(t=e.url);const h=new XMLHttpRequest;if(h.open(l,t,!0,s,r),m&&Object.keys(m).forEach(e=>{h.setRequestHeader(e,m[e])}),h.setRequestHeader("Content-Type",c||"application/xml; charset=utf-8"),u)h.setRequestHeader("Authorization","Bearer "+u);else{const e=i(s,r);h.setRequestHeader("Authorization",e)}h.onload=()=>{const{status:e,response:t,statusText:i}=h,s=h.getResponseHeader("ETag");e>=200&&e<300?a({href:d,response:t,etag:s,status:e,success:e>=200&&e<300}):n({status:e,statusText:i})},h.onerror=()=>{const{status:e,statusText:t}=h;n({status:e,statusText:t})},h.send(o)})}},,,,,,,,,function(e,t,a){"use strict";var n=a(0),i=a(20),s=a.n(i),r=a(9),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FolderIcon.jsx";class l extends n.PureComponent{constructor(...e){var t,a,n;super(...e),n=()=>this.props.trash?r.Wd:this.props.speeddial?this.props.open?r.vb:r.ub:this.props.open?r.tb:r.pb,(a="getImageSet")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=s()("folder-icon",this.props.className,{sd:this.props.speeddial});return(n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:{marginLeft:this.props.leftMargin?this.props.leftMargin:null,marginRight:this.props.rightMargin?this.props.rightMargin:null},__source:{fileName:o,lineNumber:53,columnNumber:7}},this.props.icon?this.props.icon:n.createElement("g",{className:"fill-override",dangerouslySetInnerHTML:{__html:(this.props.imageSet||this.getImageSet()).small},__source:{fileName:o,lineNumber:63,columnNumber:13}}),(this.props.isConnecting||this.props.disconnected)&&n.createElement("g",{className:this.props.isConnecting?"folder-evaluating":"folder-error",onClick:this.props.onClickStatusIcon,__source:{fileName:o,lineNumber:69,columnNumber:11}},n.createElement("circle",{cx:"10.5",cy:"10.5",r:"5",__source:{fileName:o,lineNumber:71,columnNumber:13}}),this.props.isConnecting?n.createElement("text",{x:"7.5",y:"14",fontSize:"10px",__source:{fileName:o,lineNumber:73,columnNumber:17}},"~"):n.createElement("text",{x:"9.5",y:"14",fontSize:"10px",__source:{fileName:o,lineNumber:74,columnNumber:17}},"!"))))}}t.a=l},function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12),r=a(134);class o extends i.a{constructor(){super(s.a)}getInitialState(){return{zoom:r.f,defaultPageZoom:r.f,uiZoom:r.j,notesZoom:r.f}}reduce(e,t){switch(t.actionType){case"ZOOM_PAGE":return{...e,zoom:t.zoomData};case"ZOOM_NOTES":return{...e,notesZoom:t.zoomData};case"ZOOM_SET_UI":return{...e,uiZoom:t.zoomData};case"ZOOM_PAGE_DEFAULT":return{...e,defaultPageZoom:t.zoomData}}return e}}t.a=new o},function(e,t,a){"use strict";var n=a(462),i=a(47),s=a(29),r=a(14),o=a(12),l=a(495),c=a(581),u=a(579),m=a(60),d=a(386),h=a(3);const p=new class{constructor(){var e,t,a;a={},(t="drafts")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}setActiveMailComposer(e){o.a.dispatch({actionType:"MAIL_SET_ACTIVE_COMPOSER",mailComposer:e}),p.drafts[e.state.id]=1}clearActiveMailComposer(e){o.a.dispatch({actionType:"MAIL_CLEAR_ACTIVE_COMPOSER",mailComposer:e})}deleteDraftMessage(){const e=n.a.getDraftIdAndCancelDraftUpdates();e&&(Object(u.a)([e.id]),i.a.updateIndex({removedSles:[e]}))}async queueMessage(e,t){const a=n.a.getComposer();if(!a)return;const{to:u,cc:p,bcc:b}=a.state;if([u,p,b].every(e=>0===e.length))return void o.a.dispatch({actionType:"MAIL_ACTIVE_COMPOSER_MODAL",noRecipients:!0});const{id:g}=a.props;let N;if(g){if(await a.flushPendingChanges(),N=await Object(l.a)(g),N){s.a.getByIds(N.sourceFilterIds).some(e=>e.accountId===h.c&&e.path===h.k)&&(N=await async function(e,t){const a={filteringPriority:h.p.HIGH,addedProperties:t?{}:{searchList:{queued:!0}}},{sleUpdate:n,updatedSle:s}=await Object(c.a)(e,h.c,h.k,h.c,h.gb,a);return i.a.updateIndex({sleUpdates:[n]}),m.a.filter(),s}(g,e))}}else a.cancelPendingChanges();if(!N){const t=await n.a.getMessagePromise();if(!t)return;N=await d.a.storeMessage(t,e)}e&&d.a.sendSelected([N]),r.a.close()}sendMessage(){p.queueMessage(!0)}addAttachment(){o.a.dispatch({actionType:"MAIL_ADD_ATTACHMENT"})}};t.a=p},function(e,t,a){"use strict";a(970),a(687);var n=a(12),i=a(16);const s=new class{setActiveWebView(e){n.a.dispatch({actionType:i.a.WEBVIEW_SET_ACTIVE,ref:e})}clearIfActive(e){n.a.dispatch({actionType:i.a.WEBVIEW_CLEAR_IF_ACTIVE,component:e})}};t.a=s},function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return b}));var n=a(26);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,o(e,t,"get"))}function r(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,o(e,t,"set"),a),a}function o(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var l=new WeakMap,c=new WeakMap,u=new WeakMap,m=new WeakMap;class d{constructor(e=500){if(l.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:0}),u.set(this,{writable:!0,value:Object(n.List)()}),m.set(this,{writable:!0,value:new Event("undoredo")}),i(this,"undoDisabled",!0),i(this,"redoDisabled",!0),e<1)throw new Error("Stack size must be greater than 0");r(this,l,e)}record(e){r(this,u,s(this,u).slice(s(this,c),s(this,l)-1+s(this,c)).unshift(e)),r(this,c,0),this._onChange()}clear(){r(this,u,Object(n.List)()),r(this,c,0),this._onChange()}undo(){this.undoDisabled||(s(this,u).get(s(this,c)).undo(),r(this,c,s(this,c)+1),this._onChange(),document.dispatchEvent(s(this,m)))}redo(){this.redoDisabled||(r(this,c,s(this,c)-1),s(this,u).get(s(this,c)).redo(),this._onChange(),document.dispatchEvent(s(this,m)))}_onChange(){this.undoDisabled=s(this,c)===s(this,u).size,this.redoDisabled=0===s(this,c)}}var h=new WeakMap,p=new WeakMap;class b{constructor(e,t,a){h.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:void 0}),r(this,h,e),r(this,p,t),this._updateFunction=a}undo(){this._updateFunction(s(this,h))}redo(){this._updateFunction(s(this,p))}}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(12),i=a(17),s=a(7);function r(e){n.a.dispatch({actionType:"SYNC_ENGINE_STATE_CHANGED",engineData:e})}function o(e){n.a.dispatch({actionType:"SYNC_CYCLE_COMPLETED",cycleData:e})}const l=new class{start(){s.a.sync.start()}stop(){s.a.sync.stop()}clearData(){s.a.sync.clearData()}setEncryptionPassword(e,t){s.a.sync.setEncryptionPassword(e,e=>t(e))}async loadPromise(){if(i.a.isIncognitoOrGuest())return;const e=new Promise(e=>s.a.sync.getEngineState(t=>{r(t),s.a.sync.onEngineStateChanged.addListener(e=>r(e)),e()})),t=new Promise(e=>s.a.sync.getLastCycleState(t=>{o(t),s.a.sync.onCycleCompleted.addListener(e=>o(e)),e()}));await Promise.all([e,t])}};t.a=l},,function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12);class r extends i.a{getInitialState(){return{engineData:{engineState:"stopped",disableReasons:[],protocolErrorType:"success",protocolErrorDescription:"",protocolErrorClientAction:"unknown",usesEncryptionPassword:!1,needsDecryptionPassword:!1,isEncryptingEverything:!1,isSetupInProgress:!1,isFirstSetupComplete:!1,syncEverything:!0,dataTypes:[],isReady:!1},cycleData:{cycleStartTime:0,downloadUpdatesStatus:"not_synced",commitStatus:"not_synced",nextRetryTime:0,isReady:!1}}}reduce(e,t){switch(t.actionType){case"SYNC_ENGINE_STATE_CHANGED":return{engineData:t.engineData,cycleData:e.cycleData};case"SYNC_CYCLE_COMPLETED":return{engineData:e.engineData,cycleData:t.cycleData}}return e}}t.a=new r(s.a)},,function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return v}));var n=a(198),i=a.n(n),s="https://240.0.0.0/?url=",r=/(url\("?)(?!data:)/gim;const o="type",l="name";function c(e,t){for(var a=t.length-1;a>=0;a--){if(t[t[a]]){var n=t[t[a]].replace(r,"$1"+s);t[t[a]]=n}t[t[a]]&&e.push(t[a]+":"+t[t[a]]+";")}}const u=function(e,t){if("style"===t.tagName){var a=[];e.sheet&&function e(t,a){for(var n=a.length-1;n>=0;n--){var i=a[n];if(1===i.type&&i.selectorText)t.push(i.selectorText+"{"),i.style&&c(t,i.style),t.push("}");else if(i.type===i.MEDIA_RULE)t.push("@media "+i.media.mediaText+"{"),e(t,i.cssRules),t.push("}");else if(i.type===i.FONT_FACE_RULE)t.push("@font-face {"),i.style&&c(t,i.style),t.push("}");else if(i.type===i.KEYFRAMES_RULE){t.push("@keyframes "+i.name+"{");for(var s=i.cssRules.length-1;s>=0;s--){var r=i.cssRules[s];8===r.type&&r.keyText&&(t.push(r.keyText+"{"),r.style&&c(t,r.style),t.push("}"))}t.push("}")}}}(a,e.sheet.cssRules),e.textContent=a.join("\n")}};var m=["action","background","poster","src"];let d=!1;const h=function(e){if(m.forEach(t=>{e.hasAttribute(t)&&!/^(data|blob):/i.test(e.getAttribute(t))&&(d=!0,e.removeAttribute(t))}),e.hasAttribute("style")){for(var t=e.style,a=[],n=t.length-1;n>=0;n--){if(e.style[t[n]]&&r.test(e.style[t[n]])){var i=e.style[t[n]].replace(r,"$1"+s);e.style[t[n]]=i}a.push(t[n]+":"+e.style[t[n]]+";")}a.length?e.setAttribute("style",a.join("")):e.removeAttribute("style")}},p=function(e){"target"in e&&e.setAttribute("target","_blank"),e.hasAttribute("target")||!e.hasAttribute("xlink:href")&&!e.hasAttribute("href")||e.setAttribute("xlink:show","new")},b=function(e,t){const a=e[t.src];if(a){const e=new Blob([a.content],{type:a.mimeType});t.setAttribute("lang",t.src),t.setAttribute("src",URL.createObjectURL(e)),a.inUse=!0}};function g(e,t){const a=t&&t.attachments||{};let n=!0;t&&t.hasOwnProperty("blockHTTPLeaks")&&(n=t.blockHTTPLeaks),i.a.addHook("afterSanitizeAttributes",p),i.a.addHook("afterSanitizeAttributes",b.bind(void 0,a)),n&&(i.a.addHook("afterSanitizeAttributes",h),i.a.addHook("uponSanitizeElement",u)),d=!1;const s=i.a.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allowfullscreen"],ALLOW_UNKNOWN_PROTOCOLS:!0,FORBID_TAGS:n?["svg"]:[],WHOLE_DOCUMENT:!0});return i.a.removeHooks("afterSanitizeAttributes"),i.a.removeHooks("uponSanitizeElement"),{sanitized:s,leakPrevented:d}}let N=[],f={};function _(e){if("string"==typeof e.src&&e.src.startsWith("blob:")){let t=e.getAttribute("lang");t?(N.push(t),e.removeAttribute("lang"),e.setAttribute("src",t)):(t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(),f[e.src]={cid:t,mimeType:e.getAttribute(o),filename:e.getAttribute(l)},e.setAttribute("src","cid:"+t),e.removeAttribute(o),e.removeAttribute(l))}}function v(e){i.a.addHook("afterSanitizeAttributes",_);const t={blobFreeHTML:i.a.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!0}),cidsInUse:N,newImages:f};return i.a.removeHooks("afterSanitizeAttributes"),N=[],f={},t}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="http://bookmark.placeholder.url/"},function(e,t,a){"use strict";var n=a(461),i=a(13),s=a(6),r=a(12),o=a(95),l=a(10),c=a(1);const u=new class{setFastForwardUrl(e,t,a){r.a.dispatch({actionType:"FAST_FORWARD_SET_FORWARD_URL",pageId:e,forwardUrl:t})}_updateRewindInfo(e,t,a){r.a.dispatch({actionType:"FAST_FORWARD_SET_REWIND_INFO",pageId:e,history:a,currentIndex:t})}setRewindInfo(e,t){e.getPageHistory((e,a)=>{l.a.runtime.lastError||u._updateRewindInfo(t,e,a)})}copyFastForwardState(e,t){r.a.dispatch({actionType:"FAST_FORWARD_COPY_STATE",pageId:e,fastForwardState:t})}navigateRewind(){const e=i.c.unsafeGetActivePage(),t=n.a.getRewindRelativeIndex(e.get("id"));o.a.go(-1*t)}navigateFastforward(){const e=i.c.unsafeGetActivePage();l.a.tabs.sendMessage(e.get("id"),{navigateFastforward:!0})}isFFWEnabled(){return s.a.get(c.kKeyboardShortcutsSpaceFastForwards)}sendMessage(e,t,a={}){l.a.tabs.sendMessage(e,{...a,action:t,pageId:e})}onIsFFWEnabled(e){this.isFFWEnabled()&&u.sendMessage(e,"ffwGoForward")}initTab(e){const t=this.isFFWEnabled();u.sendMessage(e,"fastForwardInit",{enabled:t})}initFastForward(){l.a.runtime.onMessage.addListener((e,t)=>{if(!function(e){return l.a.runtime.id===e.id&&0===e.frameId}(t)||!e)return;if("string"!=typeof e.action||"number"!=typeof e.pageId)return;const{action:a,pageId:n}=e;"fastforwardUrlChanged"===a&&"string"==typeof e.nextUrl?u.setFastForwardUrl(n,e.nextUrl,t.url):"canFFWGoForward"===a&&u.onIsFFWEnabled(n)})}};t.a=u},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(6),s=a(2),r=a(15),o=a.n(r),l=a(97),c=a(103),u=a(1),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TimeInput.jsx";function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=["hour","minute","meridiem"],b=function(e){return 1===e.length?`0${e}`:e.length>2?e.slice(e.length-2):e};class g extends n.PureComponent{constructor(t){super(t),h(this,"_focused",!1),h(this,"hidden",n.createRef()),h(this,"fieldRefs",{hour:n.createRef(),minute:n.createRef(),meridiem:n.createRef()}),h(this,"hr12",""),h(this,"getFormat",()=>this.props.format||o()().localeData().longDateFormat("LT")),h(this,"setCache",()=>{const[e="",t=""]=this.props.value.split(":");this.setState({hour:e,minute:t,dateCache:o()(`2010-10-20 ${this.props.value}`)})}),h(this,"processChange",e=>{1!==this.state.hour.length&&1!==this.state.minute.length&&this.props.onChange(e)}),h(this,"select",e=>{e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())}),h(this,"focus",()=>{var e;null===(e=this.fieldRefs.hour.current)||void 0===e||e.focus()}),h(this,"onKeyDown",t=>{var a,n;const{key:i,target:s}=t,r=s.dataset.type;if(i){const e=p.indexOf(r);switch(i){case"ArrowRight":t.preventDefault();const i=e+1===p.length?e:e+1;return void(null===(a=this.fieldRefs[p.slice(i,i+1)[0]].current)||void 0===a||a.select());case"ArrowLeft":t.preventDefault();const s=0===e?e:e-1;return void(null===(n=this.fieldRefs[p.slice(s,s+1)[0]].current)||void 0===n||n.select())}}isNaN(Number(i))&&e.nextTick(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()})}),h(this,"switchMeridiem",e=>{const{target:t}=e,a="string"==typeof e.key?e.key:"",n=this.state.dateCache.set("minute",parseInt(this.state.minute)).add(12,"hour"),{type:s}=e.target.dataset;"meridiem"===s&&("ArrowUp"===a||"ArrowDown"===a||"wheel"===e.type&&t===document.activeElement||a.toLowerCase()===n.format("a")[0].toLowerCase())&&(e.preventDefault(),this.setInput(n),this.setState({dateCache:n})),!i.a.get(u.kCalendarAutoTabDatetime)||"a"!==a.toLowerCase()&&"p"!==a.toLowerCase()?this.onKeyDown(e):Object(l.b)(document)}),h(this,"onChangeTime",e=>{const{type:t}=e.target.dataset;let a=parseInt(e.target.value);const n=!e.nativeEvent.inputType,i=n&&this.props.step?parseInt(this.props.step):1;let s=!1;if(n&&"minute"===t&&a%i!=0){const e=parseInt(this.state.minute);s=!0,a<e?a=e-a%i:a-=a%i}const r="minute"===t?59:this.hr12?12:23,l="minute"===t?60:this.hr12?12:24;a>r?n?a%=l:this.hr12&&"hour"===t?(a%=l,this.state.dateCache.hour(a+12)):a=r:a<0&&(a=n?(a+l)%l:0);let c=a.toString();n&&(c=b(c)),s&&e.target.setAttribute("value",c),!n&&(10*a>r||e.target.value.length>=2)&&(c=b(c),this.skipToNextField(t)),this.setState({[t]:c},()=>{let{hour:e}=this.state;this.hr12&&parseInt(e)<12&&"pm"===this.state.dateCache.format(this.hr12).toLowerCase()&&(e=parseInt(e)+12);const t=o()(this.state.dateCache).set("hour",parseInt(e)).set("minute",parseInt(this.state.minute));t.isValid()&&this.setInput(t)})}),h(this,"setInput",e=>{const t=this.hidden.current,a=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;t&&a&&(a.call(t,Object(c.b)(e)),t.dispatchEvent(new Event("input",{bubbles:!0})))}),h(this,"onFocus",t=>{if(t.persist(),t.preventDefault(),this._focused||!(t.target instanceof HTMLElement))return;const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onFocus&&a instanceof HTMLElement&&Object(l.a)(a)&&(this._focused=!0,this.props.onFocus(t))})}),h(this,"onBlur",t=>{const{hour:a,minute:n}=this.state;(a.length<2||n.length<2)&&this.setState({hour:b(a),minute:b(n)}),t.preventDefault(),t.persist();const i=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onBlur&&i instanceof HTMLElement&&!Object(l.a)(i)&&(this._focused=!1,this.props.onBlur(t))})}),h(this,"keepFocusWithin",e=>{e.preventDefault(),Object(l.a)(e.target.nextElementSibling)||this.focus()}),h(this,"renderFields",()=>{const e=this.getFormat().replace(/[hma:]/gi,""),t={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.onKeyDown,onChange:this.onChangeTime,disabled:this.props.disabled};let a=this.state.hour;return 1!==a.length&&(a=this.hr12?b(((parseInt(this.state.hour)+11)%12+1).toString()):this.state.hour),n.createElement("span",{className:"faux time",__source:{fileName:m,lineNumber:338,columnNumber:12}},n.createElement("input",d({},t,{className:"dateInputHour",tabIndex:this.props.tabIndex,type:"number",ref:this.fieldRefs.hour,"data-type":"hour",placeholder:Object(s.a)("hh"),value:a,__source:{fileName:m,lineNumber:339,columnNumber:7}})),n.createElement("span",{className:"dateInputSeparator",__source:{fileName:m,lineNumber:350,columnNumber:7}},":"),n.createElement("input",d({},t,{className:"dateInputMinute",type:"number",ref:this.fieldRefs.minute,"data-type":"minute",tabIndex:this.props.tabIndex,step:this.props.step,placeholder:Object(s.a)("time","mm"),value:this.state.minute,__source:{fileName:m,lineNumber:351,columnNumber:7}})),this.hr12&&n.createElement("span",{__source:{fileName:m,lineNumber:363,columnNumber:22}},e),this.hr12&&n.createElement("input",d({},t,{type:"text",ref:this.fieldRefs.meridiem,"data-type":"meridiem",className:"dateInputAmPm",tabIndex:this.props.tabIndex,placeholder:"--",value:this.state.dateCache.format(this.hr12).trim(),onKeyDown:this.switchMeridiem,onWheel:this.switchMeridiem,onChange:this.select,__source:{fileName:m,lineNumber:365,columnNumber:9}})))});const a=this.getFormat().replace(/[hm:]/gi,"").trim();a&&(this.hr12=a);const[r="",g=""]=this.props.value.split(":");this.state={hour:r,minute:g,dateCache:o()(`2010-10-20 ${this.props.value}`)}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}skipToNextField(t){const a=this.hr12?3:2,n=p.indexOf(t)+1;n===a&&i.a.get(u.kCalendarAutoTabDatetime)?Object(l.b)(document):e.nextTick(()=>{var e;const t=p[Math.min(n,a-1)];null===(e=this.fieldRefs[t].current)||void 0===e||e.select()})}render(){return n.createElement("span",{className:"dateInput time",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:m,lineNumber:384,columnNumber:7}},n.createElement("input",{type:"time",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",value:this.props.value,disabled:this.props.disabled,onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:m,lineNumber:389,columnNumber:9}}),this.renderFields())}}t.a=g}).call(this,a(82))},,,function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12);class r extends i.a{getInitialState(){return{isActive:!1}}reduce(e,t){switch(t.actionType){case"BREAKMODE":return{isActive:!e.isActive}}return e}}t.a=new r(s.a)},,function(e,t,a){"use strict";var n=a(0),i=a(395);t.a=function(e="",t="",a){if(t.startsWith("data:"))return t;const s=e.toLowerCase().split(" ");let r;try{r=new RegExp("("+s.map(e=>Object(i.a)(e.toLowerCase())).filter(e=>e.trim().length>0).join("|")+")","i")}catch(e){return t}const o=t.toLowerCase().split(r);let l=0;return(n.createElement("span",{className:a},o.reduce((e,a,i)=>{const s=l,o=a.match(r);return l+=a.length,o?e.concat(n.createElement("b",{key:i},t.substr(s,a.length))):e.concat(n.createElement("span",{key:i},t.substr(s,a.length)))},[])))}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(9),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\thumbnail\\Thumbnail.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.a.PureComponent{constructor(...e){super(...e),o(this,"_imageElementKey",0),o(this,"_reloadRetryCount",0),o(this,"onImageError",()=>{if(void 0!==this._reloadRetryTimer)return;if(this._reloadRetryCount>=4)return void(4===this._reloadRetryCount&&(this._reloadRetryCount=5,this.props.onImageLoadError&&this.props.onImageLoadError(this.props.src)));this._reloadRetryCount++;const e=1e3*Math.pow(2,this._reloadRetryCount);this._reloadRetryTimer=setTimeout(this.onTryReload,e)}),o(this,"onTryReload",()=>{this._reloadRetryTimer=void 0,this._imageElementKey++,this.forceUpdate()})}componentDidUpdate(e){e.src!==this.props.src&&this.finishErrorRecovery()}componentWillUnmount(){this.finishErrorRecovery()}finishErrorRecovery(){this._reloadRetryCount=0,void 0!==this._reloadRetryTimer&&(clearTimeout(this._reloadRetryTimer),this._reloadRetryTimer=void 0)}render(){const e=this.props.className||"thumbnail-image";return this.props.src?i.a.createElement("div",{className:e,style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,__source:{fileName:r,lineNumber:85,columnNumber:9}},i.a.createElement("img",{ref:"thumbnail",width:"100%",height:"auto",src:this.props.src,onError:this.onImageError,key:this._imageElementKey,__source:{fileName:r,lineNumber:95,columnNumber:11}})):i.a.createElement("div",{className:e,style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,dangerouslySetInnerHTML:this.props.isFolder?{__html:s.Ad}:{__html:s.d},__source:{fileName:r,lineNumber:107,columnNumber:7}})}}t.a=l},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s}));a(23);function n(e,t){if(e.title)return e.title;if(!e.content)return t||"";return e.content.split("\n")[0].trim().replace(/ {2,}/g," ").replace(/^#+ /g,"").substr(0,128).trim()}function i({content:e}){return e?e.replace(/\n+/g,"").length:0}function s({content:e}){return e?e.trim().split(/\s+/g).length:0}},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return r}));a(26);function n(e,t){const a=e.indexOf(t);return(-1===a?e:e.delete(a)).push(t)}function i(e,t){const a=e.indexOf(t);return(-1===a?e:e.delete(a)).unshift(t)}function s(e,t=!1){return!0===t?e.pop().unshift(e.last()):e.shift().push(e.first())}function r(e,t){let a=t.asMutable();return a=e.reduce((e,t)=>e.contains(t)?e:e.push(t),a),a=a.reduce((t,a)=>e.contains(a)?t:t.filter(e=>e!==a),a),a.asImmutable()}},,,,,,,,,,,,,,,,function(e,t,a){"use strict";(function(e){var n=a(1415),i=a(79),s=a(50),r=a(1416),o=a(28),l=a(150),c=a(111),u=a(1290),m=a(21),d=a(72),h=a(36),p=a(719),b=a(6),g=a(0),N=a.n(g),f=a(40),_=a.n(f),v=a(1291),E=a(793),C=a(515),w=a(157),O=a(1292),y=a(1417),S=a(84),T=a.n(S),k=a(114),A=a(108),I=a(25),D=a(17),M=a(2),P=a(20),x=a.n(P),L=a(149),j=a(303),R=a(700),B=a(7),F=a(37),U=a(800),H=a(1),V=a(228),W=a(46),z=a(516),G=a(437),K=a(236),Y=a(591),$=a(23),X="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlField.jsx";function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,J(e,t,"set"),a),a}function q(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,J(e,t,"get"))}function J(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const ee=[H.kAddressBarAutocompleteSuffixExpansionValue,H.kAddressBarAutocompleteSuffixExpansionEnabled,H.kAddressBarInlineSearchEnabled,H.kAddressBarInlineSearchSuggestEnabled,H.kAddressBarInlineSearchSuggestOnNickname,H.kAddressBarOmniboxCutcopyEncoded,H.kAddressBarOmniboxEnabled,H.kAddressBarOmniboxShowBookmarks,H.kAddressBarOmniboxShowBrowserHistory,H.kAddressBarOmniboxShowTopSites,H.kAddressBarOmniboxShowTypedHistory,H.kAddressBarSelectOnClick,H.kAddressBarShowFullUrl,H.kAddressBarTypedHistoryEnabled,H.kAddressBarUrlOpenShortcut,H.kAddressBarOmniboxNumberOfBookmarkResults,H.kAddressBarOmniboxNumberOfHistoryResults,H.kAddressBarOmniboxNumberOfTypedHistoryResults,H.kAddressBarOmniboxNumberOfSearchSuggestions,H.kAddressBarStripJavascriptOnPaste,H.kAddressBarHighlightBaseDomain];let te=[];const ae=[["vivaldi://version/",Object(M.a)("Vivaldi Version")],["vivaldi://help/",Object(M.a)("Help Pages")],["vivaldi://about/",Object(M.a)("About")],["vivaldi://welcome/",Object(M.a)("Vivaldi Welcome Tour")],["vivaldi://notes/",Object(M.a)("Notes")],["vivaldi://bookmarks/",Object(M.a)("Bookmarks")],["vivaldi://history/",Object(M.a)("History")],["vivaldi://settings/",Object(M.a)("Settings")],["vivaldi://extensions/",Object(M.a)("Extensions")],["vivaldi://experiments/",Object(M.a)("Experiments")],["vivaldi://game/",Object(M.a)("Vivaldia Game")]].map(([e,t],a)=>({url:e,score:a,title:t,disableDelete:!0,id:e,type:"OMNI_RESULT_INTERNAL",favicon:N.a.createElement(c.a,{url:e,__source:{fileName:X,lineNumber:225,columnNumber:12}})})),ne=ae.map(e=>({...e,url:e.url.replace(/\//g,"")}));function ie(e){return e.startsWith("vivaldi:/")?ae.filter(t=>t.url.startsWith(e)):e.startsWith("vivaldi:")?ne.filter(t=>t.url.startsWith(e)):[]}var se=new WeakMap,re=new WeakMap,oe=new WeakMap,le=new WeakMap,ce=new WeakMap,ue=new WeakMap,me=new WeakMap,de=new WeakMap;class he extends N.a.PureComponent{constructor(...t){super(...t),se.set(this,{writable:!0,value:!1}),re.set(this,{writable:!0,value:!1}),oe.set(this,{writable:!0,value:!1}),le.set(this,{writable:!0,value:!1}),ce.set(this,{writable:!0,value:!1}),ue.set(this,{writable:!0,value:""}),me.set(this,{writable:!0,value:!1}),de.set(this,{writable:!0,value:0}),Z(this,"_nav",new U.a(this)),Z(this,"_omniDropdownElement",N.a.createRef()),Z(this,"_urlInput",N.a.createRef()),Z(this,"bookmarkSearch",new r.a),Z(this,"historySearch",new v.a({provider:new u.a})),Z(this,"typedHistorySearch",new O.a),Z(this,"state",{typedUrl:"",isOmniDropdownOpen:!1,bookmarkResults:[],historyResults:[],typedHistoryResults:[],nicknameResults:[],suggestResults:[],dropdownSelectionIndex:-1,selectedItem:void 0,autocompletedItem:void 0,value:"",isMetaKeyPressed:!1,autocompleteData:[]}),Z(this,"setUrlfieldState",e=>{k.a.setUrlfieldState(this.props.pageId,e)}),Z(this,"globalKeydownListener",(e,t,a,n)=>{n===d.a.KEY_CONTROL&&this.setState({isMetaKeyPressed:t})}),Z(this,"_onWindowStoreChanged",()=>{this.setState({isMetaKeyPressed:!1})}),Z(this,"_isSuggestEnabled",()=>{const{prefValues:e}=this.props,t=Boolean(this.props.typedSearchEngine);return!!e[H.kAddressBarInlineSearchSuggestEnabled]&&e[H.kAddressBarOmniboxEnabled]&&(!e[H.kAddressBarInlineSearchSuggestOnNickname]||t)}),Z(this,"_onSearchSuggestionsChanged",({suggestions:e})=>{this.searchDoneSuggest(e)}),Z(this,"_onUrlbarStoreChanged",e=>{"URLFIELD_TYPED_HISTORY_UPDATE"===e&&this.state.isOmniDropdownOpen&&this.typedHistorySearch.search(this.state.typedUrl,{count:b.a.get(H.kAddressBarOmniboxNumberOfTypedHistoryResults)}).then(this.searchDoneTypedHistory)}),Z(this,"getTypedURL",()=>this.state.typedUrl),Z(this,"_getInputWasIncrementedOrDecremented",(e,t)=>{let a,n;return t?(a=e.startsWith(t)||!(this.props.editUrl||"").startsWith(e),n=(t||"").startsWith(e)&&e.length<t.length):(a=e.startsWith(this.props.editUrl||"")||null==this.props.editUrl||null==this.props.displayUrl,n=(this.props.displayUrl||"").startsWith(e)),n&&a&&(a=!1),{inputWasIncremented:a,inputWasDecremented:n}}),Z(this,"searchDoneBookmarks",e=>{const t=Object(G.default)(e.filter(e=>e.type.startsWith("OMNI_RESULT_BOOKMARK")&&!e.type.includes("OMNI_RESULT_BOOKMARK_NICKNAME")),b.a.get(H.kAddressBarOmniboxNumberOfBookmarkResults)),a=Object(G.default)(e.filter(e=>e.type.startsWith("OMNI_RESULT_BOOKMARK_NICKNAME")||e.type.startsWith("OMNI_RESULT_FOLDER_NICKNAME")),b.a.get(H.kAddressBarOmniboxNumberOfBookmarkResults));this.setState({nicknameResults:a,bookmarkResults:t})}),Z(this,"searchDoneHistory",e=>{q(this,se)&&this.setState({historyResults:e})}),Z(this,"searchDoneTypedHistory",e=>{if(!q(this,se))return;const t=this.props.prefValues[H.kAddressBarTypedHistoryEnabled]?e:[];this.setState({typedHistoryResults:t})}),Z(this,"_maybePrefixWithKeyword",e=>this.props.typedSearchEngine&&this.props.typedSearchEngine.keyword&&!e.startsWith(this.props.typedSearchEngine.keyword+" ")?this.props.typedSearchEngine.keyword+" "+e:e),Z(this,"searchDoneSuggest",e=>{const t=b.a.get(H.kAddressBarOmniboxNumberOfSearchSuggestions),a=Object(G.default)(e,t).map(e=>{const t=this._maybePrefixWithKeyword(e),a=this.props.typedSearchEngine||this.props.defaultSearchEngine;return{id:e,type:"OMNI_RESULT_SUGGEST",disableDelete:!0,url:t,favicon:N.a.createElement("img",{src:a&&a.faviconUrl,__source:{fileName:X,lineNumber:539,columnNumber:26}})}});this.setState({suggestResults:a})}),Z(this,"_throttledSearchSuggest",Object(K.default)((e,t)=>{const a=E.a.suggest(e,t);te=Object(Y.a)(te.concat(a),10)},500,{leading:!1})),Z(this,"onClick",async t=>{if(!this.props.prefValues[H.kAddressBarSelectOnClick])return;const{button:a,currentTarget:n}=t,{selectionStart:i,selectionEnd:s,value:r}=n;if(0===a&&Date.now()-q(this,de)<350)return;Q(this,de,Date.now());const o=0===i&&s===r.length;if(i===s||o){if(this.isUrlInputFocusedOnMouseDown())return void this.handleInputSelect(n);0===a&&await new Promise(t=>e.nextTick(t)),n.select(),this._focusedOnMouseDown=null}}),Z(this,"onMouseDown",()=>{this._focusedOnMouseDown=document.activeElement}),Z(this,"onValueChange",e=>{this.setUrlfieldState({editUrl:e}),this.setState({typedUrl:e,selectedItem:void 0},()=>{e?this.performSearch(e):this.hideDropdown()})}),Z(this,"onAutocompleteValueChange",t=>{Q(this,ue,t),this.props.onChange&&this.props.onChange(t),e.nextTick(()=>{this.props.editUrl&&this.setUrlfieldState({autocompleteValue:t})})}),Z(this,"handleInputSelect",e=>{q(this,oe)?Q(this,oe,!1):""!==e.value.trim()&&"none"===e.selectionDirection&&(e.selectionDirection="forward")}),Z(this,"onSelected",e=>{var t;const{currentTarget:a,nativeEvent:n}=e;"selectionchange"===n.type&&""===(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&a.value!==this.props.displayUrl&&this.setUrlfieldState({editUrl:a.value}),"mouseup"!==n.type&&this.handleInputSelect(a)}),Z(this,"_handleUndo",e=>{const t=e.currentTarget,{value:a}=this.state;if(this.state.value.length<t.value.length){e.preventDefault();const t=e.currentTarget.selectionStart-1;t>0?this.setUrlfieldState({editUrl:a.substring(0,t)}):(this.setUrlfieldState({editUrl:""}),this.hideDropdown())}""===a&&(e.preventDefault(),this.revertUrl())}),Z(this,"_cleanupState",()=>{Q(this,ce,!1)}),Z(this,"_constructSearchSuggestion",()=>{const{typedSearchEngine:e,defaultSearchEngine:t}=this.props,a=e||t;if(!a)return;if(!(this._isSuggestEnabled()&&(e&&e.suggestUrl||!e&&t&&t.suggestUrl)))return;const n=e&&function(e,t){return t&&e.startsWith(t.keyword+" ")?e.substr(t.keyword.length+1):e}(this.state.typedUrl,this.props.typedSearchEngine)||this.state.typedUrl;return n.trim()?this._throttledSearchSuggest(n.trim(),a):void 0}),Z(this,"_updateAutocompleteItem",e=>{q(this,se)&&this.setState({autocompleteData:e})}),Z(this,"_throttledSearch",Object(K.default)(async(e,t)=>{if(!q(this,se)||this.props.pageId!==e||q(this,re))return;this._cleanupState(),this._constructSearchSuggestion();const a=this.historySearch.search(t,{count:b.a.get(H.kAddressBarOmniboxNumberOfHistoryResults)}).catch(()=>[]);a.then(this.searchDoneHistory);const n=this.typedHistorySearch.search(t,{count:b.a.get(H.kAddressBarOmniboxNumberOfTypedHistoryResults)});n.then(this.searchDoneTypedHistory);const i=this.bookmarkSearch.search(t);if(i.then(this.searchDoneBookmarks),this.updateDropdown(),!this.props.autocompletionEnabled)return void await Promise.all([a,n,i]);if(q(this,me))return this.setState({autocompleteData:[]}),Q(this,me,!1),void await Promise.all([i,a,n]);const s=await i,r=b.a.get(H.kAddressBarAutocompletePreferBookmarks),o=ie(t);r&&0!==s.length&&this._updateAutocompleteItem([...s,...o]);const[l,c]=await Promise.all([a,n]);this._updateAutocompleteItem([...s,...l,...c,...o])},200)),Z(this,"performSearch",e=>{if(""===e.trim())return;const{inputWasIncremented:t,inputWasDecremented:a}=this._getInputWasIncrementedOrDecremented(e,this.state.typedUrl);(a||!t&&!a)&&this.setState({autocompletedItem:void 0}),Q(this,re,!1),this._throttledSearch(this.props.pageId,e)}),Z(this,"revertUrl",e=>{q(this,se)&&(this.setUrlfieldState({editUrl:e,autocompleteValue:void 0}),this.setState({typedUrl:"",value:""}))}),Z(this,"_openOmniDropDown",()=>{this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen||!this.props.prefValues[H.kAddressBarTypedHistoryEnabled]||k.a.showTypedHistory()}),Z(this,"_onEscPressed",()=>{var e;null!==(e=this._urlInput.current)&&void 0!==e&&e.isIMEOpen||(this.hideDropdown(),"string"==typeof this.props.editUrl?(this.revertUrl(),this.setState({autocompleteData:[]}),this.select()):(this.blur(),l.default.executeActions("COMMAND_FOCUS_WEBVIEW")))}),Z(this,"hideDropdown",()=>{this.state.isOmniDropdownOpen&&this.setState(e=>({isOmniDropdownOpen:!1,dropdownSelectionIndex:-1,selectedItem:void 0})),this.props.isTypedHistoryOpen&&this.setState(t=>(e.nextTick(()=>{k.a.hideTypedHistory()}),{dropdownSelectionIndex:-1,selectedItem:void 0}))}),Z(this,"getDropdown",()=>this._omniDropdownElement.current&&this._omniDropdownElement.current),Z(this,"onPaste",e=>{const{clipboardData:t}=e;if("text/plain"!==t.types[0])return;const a=t.getData("text/plain");a.trim()||e.preventDefault();const n=/^(\s*javascript:)+/i,i=e.currentTarget.selectionStart;if(b.a.get(H.kAddressBarStripJavascriptOnPaste)){if(n.test(a)){e.preventDefault();const t=a.replace(/javascript:/gi,""),n=Object(z.a)(this.state.typedUrl||"",t,i,e.currentTarget.selectionEnd);return void this.onValueChange(n)}if(n.test(this.state.typedUrl+a)){e.preventDefault();const t=(this.state.typedUrl+a).replace(/javascript:/gi,""),n=Object(z.a)("",t,i,e.currentTarget.selectionEnd);return void this.onValueChange(n)}}Q(this,me,!0)}),Z(this,"onClipboardEvent",e=>{const{clipboardData:t,type:a,currentTarget:n}=e;if(!(n instanceof HTMLInputElement&&t))return;if(0!==n.selectionStart||n.selectionEnd!==n.value.length)return;let i=n.value;n.selectionEnd&&n.selectionEnd!==n.value.length&&(i=n.value.substring(0,n.selectionEnd));const s=this.props.editUrl===i;if(this.props.prefValues[H.kAddressBarOmniboxCutcopyEncoded]&&!s&&(i=encodeURI(i).replace(/%25/g,"%")),i.length>=F.j&&i.endsWith("...")&&void 0!==this.props.pageUrl&&this.props.pageUrl.startsWith(i.substring(0,F.j))&&(i=this.props.pageUrl),Object(W.g)(i)&&i.match(/[\.\/]/)&&this.state.value===this.props.displayUrl){const e=T.a.parse($.p.getDisplayUrl(this.props.pageUrl||""));e&&e.protocol&&(i=e.protocol+(e.slashes?"//":"")+i)}if(t.setData("text",i),"cut"===a){const e=n.value.substr(n.selectionEnd);this.setUrlfieldState({editUrl:e}),n.setSelectionRange(0,0),this.setState({selectedItem:void 0,typedUrl:e})}e.preventDefault()}),Z(this,"_saveStateOnKeyEvent",({currentTarget:e})=>{const t=e.value?e.value:"";e.selectionStart===e.selectionEnd&&e.selectionStart===t.length&&this.setState({typedUrl:t})}),Z(this,"_shortcutListener",(e,t,a,n)=>{if(t)switch(n){case d.a.KEY_ESCAPE:this._onEscPressed();break;case d.a.KEY_BACK_SPACE:case d.a.KEY_DELETE:1===a&&this.state.selectedItem&&this.onOmniDropdownItemDelete(this.state.selectedItem)}}),Z(this,"_setUpComponentEventListeners",()=>{B.a.tabsPrivate.onKeyboardChanged.addListener(this._shortcutListener)}),Z(this,"_tearDownComponentEventListeners",()=>{B.a.tabsPrivate.onKeyboardChanged.removeListener(this._shortcutListener)}),Z(this,"onFocus",e=>{Q(this,le,!0),this.props.onFocus&&this.props.onFocus(e),this.props.showDropdown&&this._setUpComponentEventListeners()}),Z(this,"onBlur",t=>{const{getSelection:a}=this.context;Q(this,le,!1);const n=a();if(n&&n.focusNode instanceof Element&&"UrlField"===n.focusNode.className&&n.removeAllRanges(),this.props.onBlur&&this.props.onBlur(),this.props.showDropdown&&this._tearDownComponentEventListeners(),this.state.selectedItem&&this.state.selectedItem.url){const e=this.state.selectedItem.url;this.setUrlfieldState({editUrl:e})}this.hideDropdown(),e.nextTick(()=>{var e;(null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains("uifocusstop"))||h.a.setPaneFocus(!1)})}),Z(this,"_handleSelectedItemChanged",()=>{if(!this.props.onChange)return;const e=this.state.selectedItem&&this.state.selectedItem.url?this.state.selectedItem.url:"";this.props.onChange(e)}),Z(this,"onKeyDown",e=>{if((this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen)&&(!this._urlInput.current||!this._urlInput.current.isIMEOpen)){const t=e.ctrlKey,a=e.altKey,n=e.shiftKey,i=!1,s=!t&&a&&!n&&!i,r=!t&&!a&&n&&!i,o=!(t||a||n||i);switch(e.key){case"Escape":e.preventDefault(),e.stopPropagation();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),s?this._nav.sectionUp().then(this._handleSelectedItemChanged):this._nav.up().then(this._handleSelectedItemChanged);break;case"Tab":o?(e.preventDefault(),e.stopPropagation(),this._nav.down().then(this._handleSelectedItemChanged)):r&&(e.preventDefault(),e.stopPropagation(),this._nav.up().then(this._handleSelectedItemChanged));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),s?this._nav.sectionDown().then(this._handleSelectedItemChanged):this._nav.down().then(this._handleSelectedItemChanged);break;case"PageUp":this._nav.pageUp().then(this._handleSelectedItemChanged);break;case"PageDown":this._nav.pageDown().then(this._handleSelectedItemChanged)}}const t="z"===e.key&&!e.shiftKey&&e.ctrlKey;if(Object(j.a)(e)||"ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&"End"!==e.key&&"Home"!==e.key)if(t)this._handleUndo(e);else if("ArrowDown"!==e.key)if("ArrowUp"!==e.key);else{0===e.currentTarget.selectionStart&&(e.preventDefault(),this._openOmniDropDown())}else this._openOmniDropDown();else this._saveStateOnKeyEvent(e)}),Z(this,"_urlFieldGo",async(e,t)=>{var a,n;this.props.onSubmit&&(this.blur(),this.revertUrl(e),this.setState({autocompleteData:[]}),this.hideDropdown(),await(null===(a=(n=this.props).onSubmit)||void 0===a?void 0:a.call(n,{url:e,...t?{options:t}:null})),Q(this,re,!0))}),Z(this,"onKeyPress",e=>{this.props.onKeyPress&&this.props.onKeyPress(e)}),Z(this,"onDragStart",e=>{Q(this,ce,!0),e.currentTarget.value===window.getSelection().toString()&&this.props.onUrlDrag&&this.props.onUrlDrag(e)}),Z(this,"onDragEnd",()=>{Q(this,ce,!1)}),Z(this,"onDragEnter",e=>{if(e.stopPropagation(),!q(this,ce)&&(e.preventDefault(),this.isDropAllowed(e))){const t=e.target;t instanceof HTMLInputElement&&t.classList.add("pseudo-selected")}}),Z(this,"onDragOver",e=>{this.isDropAllowed(e)&&e.preventDefault()}),Z(this,"onDragLeave",e=>{if(q(this,ce))return;const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")}),Z(this,"onDrop",e=>{const t=e.target;if(t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected"),"function"==typeof this.props.onDrop)q(this,ce)||(this.props.onDrop(e),e.stopPropagation(),e.preventDefault());else if(this.props.handleDrop){e.stopPropagation(),e.preventDefault();let t="";const a=e.dataTransfer?e.dataTransfer.getData("text/uri-list"):"";if(a.length>0){const e=a.split("\n");e.length>0&&(t=e[0])}else t=e.dataTransfer?e.dataTransfer.getData("text/plain"):"";this.setUrlfieldState({editUrl:t}),this.focus()}}),Z(this,"isDropAllowed",e=>{if(!e||!e.dataTransfer)return!1;const t=[i.c,"text/uri-list","text/plain"],a=e.dataTransfer;return!(1===a.types.length&&a.types.includes("text/plain")&&""===a.getData("text/plain"))&&a.types.some(e=>t.includes(e))}),Z(this,"setDropdownSelectionIndex",e=>{this.setState({dropdownSelectionIndex:e,autocompleteData:[]})}),Z(this,"setAutocompleteHighlight",this.setDropdownSelectionIndex),Z(this,"onOmniDropdownItemClicked",(e,t)=>{this.revertUrl(),this.blur(),k.a.setUrlfieldState(this.props.pageId,{editUrl:void 0}),Array.isArray(e.urls)?k.a.go(e.urls,{...t,inCurrent:!1}):e.url&&k.a.go([e.url],{...t,enableSearch:!0}),this.hideDropdown()}),Z(this,"_deleteBookmarkItem",e=>{const{id:t}=e;s.a.remove([t]),this.setState(e=>({bookmarkResults:e.bookmarkResults.filter(e=>e.id!==t),selectedItem:void 0,dropdownSelectionIndex:-1}))}),Z(this,"_deleteHistoryItem",e=>{k.a.deleteHistory(e.url),this.setState(t=>({historyResults:t.historyResults.filter(t=>t.url!==e.url),typedHistoryResults:t.typedHistoryResults.filter(t=>t.url!==e.url),selectedItem:void 0,dropdownSelectionIndex:-1}))}),Z(this,"onOmniDropdownItemDelete",e=>{if(function(e){return Boolean(e.type)&&e.type.startsWith("OMNI_RESULT_BOOKMARK")}(e)){const t=e;return void this._deleteBookmarkItem(t)}const t=e;this._deleteHistoryItem(t)}),Z(this,"isUrlInputFocusedOnMouseDown",()=>{if(!this._urlInput.current)return!1;return _.a.findDOMNode(this._urlInput.current)===this._focusedOnMouseDown}),Z(this,"getSearchEngine",()=>{if(!this.props.prefValues[H.kAddressBarInlineSearchEnabled]&&!this.props.typedSearchEngine)return;const e=this.props.typedSearchEngine||this.props.defaultSearchEngine,t="OMNI_TYPE_SEARCH";if(!e)return;const a=this.state.typedUrl;return{title:Object(M.a)("Search $1",[e.name]),type:t,items:[{id:e.id,type:t,displayText:this.props.typedSearchEngine?a.substring(e.keyword.length+1):a,text:a,url:a,disableDelete:!0,disablePatternHighlight:!0,favicon:N.a.createElement("img",{src:e.faviconUrl,__source:{fileName:X,lineNumber:1495,columnNumber:18}})}]}}),Z(this,"_getFormattedOmniDropdownItems",()=>{const e=this.getSearchEngine(),t=this.props.topSites?Object(G.default)(this.props.topSites.filter(e=>e.title.includes(this.state.typedUrl)||e.url.includes(this.state.typedUrl)).map(e=>({...e,id:e.url,type:"OMNI_RESULT_TOPSITE"})),5):[];return[{type:"OMNI_TYPED_SUGGESTION",items:ie(this.state.typedUrl)},...e?[e]:[],{title:Object(M.a)("Nickname"),type:"OMNI_RESULT_BOOKMARK_NICKNAME",items:this.state.nicknameResults.map(e=>({...e,disableDelete:!0,favicon:e.url?N.a.createElement(c.a,{url:e.url,__source:{fileName:X,lineNumber:1529,columnNumber:15}}):N.a.createElement("img",{src:"/resources/folder@2x.png",__source:{fileName:X,lineNumber:1530,columnNumber:15}})}))},{title:Object(M.a)("Frequently Visited Pages"),type:"OMNI_RESULT_TOPSITE",items:this.props.prefValues[H.kAddressBarOmniboxShowTopSites]?t.map(e=>({...e,favicon:N.a.createElement(c.a,{url:e.url,__source:{fileName:X,lineNumber:1539,columnNumber:24}})})):[]},{title:Object(M.a)("Typed History"),type:"OMNI_RESULT_TYPED_HISTORY",items:this.props.prefValues[H.kAddressBarOmniboxShowTypedHistory]&&this.props.prefValues[H.kAddressBarTypedHistoryEnabled]?this.state.typedHistoryResults.map(e=>({...e,favicon:N.a.createElement(c.a,{url:e.url,__source:{fileName:X,lineNumber:1551,columnNumber:26}})})):[]},{title:Object(M.a)("Suggestions"),type:"OMNI_RESULT_SUGGEST",items:this.state.suggestResults},{title:Object(M.a)("Bookmarks"),type:"OMNI_RESULT_BOOKMARK_UNKNOWN",items:this.props.prefValues[H.kAddressBarOmniboxShowBookmarks]?this.state.bookmarkResults.map(e=>({...e,disableDelete:!0,favicon:N.a.createElement(c.a,{url:e.url,__source:{fileName:X,lineNumber:1567,columnNumber:24}})})):[]},{title:Object(M.a)("Browser History"),type:"OMNI_RESULT_HISTORY_UNKNOWN",items:this.props.prefValues[H.kAddressBarOmniboxShowBrowserHistory]?this.state.historyResults.map(e=>({...e,favicon:N.a.createElement(c.a,{url:e.url,__source:{fileName:X,lineNumber:1577,columnNumber:22}})})):[]}]}),Z(this,"_getFormattedTypedHistoryItems",()=>{const e=this.props.typedHistory?this.props.typedHistory.map(({url:e,text:t})=>({displayText:t||e,url:e,favicon:N.a.createElement(c.a,{url:e,__source:{fileName:X,lineNumber:1589,columnNumber:20}})})):[];return[{type:"OMNI_RESULT_TYPED_HISTORY",title:Object(M.a)("Typed History"),items:e}]}),Z(this,"onTypedHistoryItemDelete",e=>{k.a.deleteHistory(e.url)}),Z(this,"renderDropdown",({typedHistoryItems:e,omniDropdownItems:t})=>this.props.isTypedHistoryOpen?N.a.createElement(p.a,{ref:this._omniDropdownElement,onSelectedItemChanged:e=>this.setState({selectedItem:e}),onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:e,selectionIndex:this.state.dropdownSelectionIndex,onDeleteItem:this.onTypedHistoryItemDelete,__source:{fileName:X,lineNumber:1617,columnNumber:9}}):this.props.prefValues[H.kAddressBarOmniboxEnabled]&&this.state.isOmniDropdownOpen?N.a.createElement(p.a,{ref:this._omniDropdownElement,onSelectedItemChanged:e=>this.setState({selectedItem:e}),onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:t,selectionIndex:this.state.dropdownSelectionIndex,typedSearchEngine:this.props.typedSearchEngine,defaultSearchEngine:this.props.defaultSearchEngine,onDeleteItem:this.onOmniDropdownItemDelete,pattern:this.state.typedUrl,setAutocompleteHighlight:this.setDropdownSelectionIndex,__source:{fileName:X,lineNumber:1636,columnNumber:7}}):null),Z(this,"handleSubmit",async({autocompletedValue:e,typedValue:t},a)=>{if(a.ctrlKey&&this.props.prefValues[H.kAddressBarAutocompleteSuffixExpansionEnabled]&&this.props.prefValues[H.kAddressBarAutocompleteSuffixExpansionValue])return void await this._urlFieldGo(Object(W.d)(t,this.props.prefValues[H.kAddressBarAutocompleteSuffixExpansionValue]));const n=e,s=a.shiftKey&&"shift"===this.props.prefValues[H.kAddressBarUrlOpenShortcut]||a.altKey&&"alt"===this.props.prefValues[H.kAddressBarUrlOpenShortcut]||!1,r=s&&a.ctrlKey,l={...Object(L.b)({ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey}),inCurrent:!s,inBackground:r,transition:w.a.TYPED,incognito:D.a.isIncognitoOrGuest()},{selectedItem:c}=this.state;if(c)return"OMNI_RESULT_FOLDER_NICKNAME"===c.type?void k.a.go(c.urls,{...l,inCurrent:!1}):"OMNI_TYPE_SEARCH"===c.type?void k.a.goSearchURL(c.url,{inBackground:l.inBackground,inCurrent:l.inCurrent,inNewWindow:l.inNewWindow,incognito:l.incognito||D.a.isGuestSession(),allowOverride:l.allowOverride,transition:l.transition}):void await this._urlFieldGo(c.url,l);if(o.b.hasNickname(n)){const{transition:e,...t}=l;return i.a.open({bookmarks:o.b.getNicknamed(n),...t},!0),this.revertUrl(n),this.blur(),this.hideDropdown(),this.setState({autocompleteData:[]}),void Q(this,re,!0)}await this._urlFieldGo(n,l)}),Z(this,"onMouseUp",e=>{const{getSelection:t}=this.context,{button:a,currentTarget:n}=e})}get autocompletedValue(){return q(this,ue)}componentDidMount(){Q(this,se,!0),C.a.addChangeListener(this._onSearchSuggestionsChanged),A.a.addChangeListener(this._onUrlbarStoreChanged),this._windowStoreToken=D.a.addListener(this._onWindowStoreChanged),B.a.tabsPrivate.onKeyboardChanged.addListener(this.globalKeydownListener)}componentWillUnmount(){Q(this,se,!1),C.a.removeChangeListener(this._onSearchSuggestionsChanged),A.a.removeChangeListener(this._onUrlbarStoreChanged),this._tearDownComponentEventListeners(),this._windowStoreToken.remove(),B.a.tabsPrivate.onKeyboardChanged.removeListener(this.globalKeydownListener)}static getDerivedStateFromProps(e,t){return-1===t.dropdownSelectionIndex&&Object(R.a)(e.displayUrl)!==t.typedUrl?{value:"string"==typeof e.editUrl?e.editUrl:e.displayUrl||t.typedUrl}:t.selectedItem?{value:t.selectedItem.text||t.selectedItem.url||""}:{value:e.editUrl||t.typedUrl}}focus(){var e;null===(e=this._urlInput.current)||void 0===e||e.focus()}blur(){var e;null===(e=this._urlInput.current)||void 0===e||e.blur()}select(){var e;null===(e=this._urlInput.current)||void 0===e||e.select()}updateDropdown(){if(!q(this,re)&&this.props.showDropdown){if(!this.props.prefValues[H.kAddressBarOmniboxEnabled])return;if(!q(this,le))return;this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen&&this.hideDropdown(),Q(this,oe,!0),this.setState({isOmniDropdownOpen:!0,dropdownSelectionIndex:-1})}}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex),this.props.isTypedHistoryOpen&&!e.isTypedHistoryOpen&&this.focus(),this.props.pageId!==e.pageId&&this._cleanupState(),this.props.stateResetKey!==e.stateResetKey&&this.setState({typedUrl:"",isOmniDropdownOpen:!1,bookmarkResults:[],historyResults:[],typedHistoryResults:[],nicknameResults:[],suggestResults:[],dropdownSelectionIndex:-1,selectedItem:void 0,autocompletedItem:void 0,value:"",isMetaKeyPressed:!1,autocompleteData:[]})}render(){const e={typedHistoryItems:this._getFormattedTypedHistoryItems(),omniDropdownItems:this._getFormattedOmniDropdownItems()},t=this.props.prefValues[H.kAddressBarShowFullUrl],a=this.props.prefValues[H.kAddressBarHighlightBaseDomain],{value:i}=this.state,s=Object(V.c)(this.props.urlFragments);return N.a.createElement(N.a.Fragment,null,N.a.createElement("div",{className:x()("UrlField",{"UrlField--HasEditText":Boolean(this.props.editUrl),"UrlField--IsEmpty":""===this.state.value}),__source:{fileName:X,lineNumber:1780,columnNumber:7}},N.a.createElement(n.a,{stateResetKey:this.props.pageId,ref:this._urlInput,autoFocus:this.props.autoFocus,className:this.props.className||"",url:this.props.pageUrl||"",autocompleteOnTitle:Boolean(this.props.autocompleteOnTitle),onSubmit:this.handleSubmit,autocompleteData:this.state.autocompleteData,value:i,onValueChange:this.onValueChange,onAutocompleteValueChange:this.onAutocompleteValueChange,disabled:this.props.disabled?this.props.disabled:void 0,placeholder:this.props.placeholder?this.props.placeholder:void 0,title:this.props.title?this.props.title:void 0,readOnly:this.props.readonly,onBlur:this.onBlur,onFocus:this.onFocus,onSelect:this.onSelected,onClick:this.onClick,onContextMenu:this.onClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onKeyPress:this.onKeyPress,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onKeyDown:this.onKeyDown,onCut:this.onClipboardEvent,onCopy:this.onClipboardEvent,onPaste:this.onPaste,__source:{fileName:X,lineNumber:1787,columnNumber:9}}),N.a.createElement(y.b,{urlFragments:s,url:this.props.displayUrl,shouldShowFullUrl:t,onGoToPath:this._urlFieldGo,isClickable:this.state.isMetaKeyPressed,onBaseDomainObscured:this.props.onBaseDomainObscured,shouldHighlightBaseDomain:a,__source:{fileName:X,lineNumber:1830,columnNumber:9}})),this.renderDropdown(e))}}Z(he,"contextType",I.a),Z(he,"defaultProps",{urlFragments:Object(V.f)()}),t.a=Object(m.a)(he,ee)}).call(this,a(82))},,function(e,t,a){"use strict";(function(e){var n=a(0),i=a(85),s=a(25),r=a(2),o=a(20),l=a.n(o),c=a(37),u=a(218),m=a(208),d=a(9),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortableList.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends n.Component{constructor(t){super(t),p(this,"dropSupport",!1),p(this,"moveUpCombo",Object(m.b)("alt+up")),p(this,"moveDownCombo",Object(m.b)("alt+down")),p(this,"refItems",n.createRef()),p(this,"setSelected",(e,t)=>{void 0!==t&&(this.setState({isCreating:this.props.onCancelCreate&&t}),t&&this.props.onCreateItem?this.props.onCreateItem():!t&&this.props.onCancelCreate&&this.props.onCancelCreate()),this.setState({selectedIndex:e}),"function"==typeof this.props.onSelectItem&&this.props.onSelectItem(e)}),p(this,"loadItemAt",t=>{this.setSelected(t),e.nextTick(()=>{const e=this.refItems.current;if(e){const t=e.querySelector(".item-selected");t&&t.focus()}})}),p(this,"setIsCreating",()=>{this.setSelected(this.props.items.length,!0),e.nextTick(()=>{const e=this.refItems.current;e&&(e.scrollTop=e.scrollHeight)})}),p(this,"removeItem",e=>{e>=this.props.items.length?("function"==typeof this.props.onCancelCreate&&this.props.onCancelCreate(),this.setSelected(this.props.items.length-1,!1)):"function"==typeof this.props.considerRemovingItem?this.props.considerRemovingItem():"function"==typeof this.props.onRemove&&this.props.onRemove(this.state.selectedIndex)}),p(this,"moveDown",()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex+1<this.props.items.length&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex+1),this.loadItemAt(this.state.selectedIndex+1))}),p(this,"moveUp",()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex>0&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex-1),this.loadItemAt(this.state.selectedIndex-1))}),p(this,"focusItem",(e,t)=>{if(this.state.isCreating||this.props.isCreating)return;this.state.selectedIndex!==e&&this.loadItemAt(e);const a=this.refItems.current;a&&a.focus(),t&&t.stopPropagation()}),p(this,"onDoubleClick",(e,t)=>{this.props.onActivate&&this.props.onActivate(e,t),t.stopPropagation()}),p(this,"clearDndTimer",()=>{this.dndTimerId&&(clearTimeout(this.dndTimerId),delete this.dndTimerId)}),p(this,"onDragStartButton",(e,t)=>{this.props.supportDragAndDrop&&this.props.mimeType&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(this.props.mimeType,e))}),p(this,"onDragEnter",e=>{this.props.supportDragAndDrop&&this.props.mimeType&&(e.preventDefault(),e.stopPropagation(),this.dropSupport=e.dataTransfer.types.some(e=>e===this.props.mimeType),e.dataTransfer.dropEffect=this.dropSupport?"move":"none")}),p(this,"onDragLeave",e=>{this.props.supportDragAndDrop&&(e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout(()=>{delete this.dndTimerId,this.setState({dropIndex:-1,dropPosition:""})},c.g))}),p(this,"getDropPosition",e=>{let t=0;const a=e.currentTarget.getBoundingClientRect(),n=a.height;return t=(e.clientY-a.top)/n,t<=.5?"above":"below"}),p(this,"onDragOverButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport){t.dataTransfer.dropEffect="move",this.clearDndTimer();const a=this.getDropPosition(t);this.state.dropIndex===e&&this.state.dropPosition===a||this.setState({dropIndex:e,dropPosition:a})}}),p(this,"onDragOver",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport){e.dataTransfer.dropEffect="move",this.clearDndTimer();const t=this.props.items.length>0?this.props.items.length-1:0,a="below";this.state.dropIndex===t&&this.state.dropPosition===a||this.setState({dropIndex:t,dropPosition:a})}}),p(this,"onDropButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport&&this.props.mimeType){const a=t.dataTransfer.getData(this.props.mimeType);if(void 0!==a){let n=e+("below"===this.getDropPosition(t)?1:0);a<n&&(n-=1),this.props.moveItem&&(this.props.moveItem(a,n),this.loadItemAt(n))}}this.setState({dropIndex:-1,dropPosition:""})}),p(this,"onDrop",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport&&this.props.mimeType){const t=e.dataTransfer.getData(this.props.mimeType);if(void 0!==t){let e=this.props.items.length;t<e&&(e-=1),this.props.moveItem&&(this.props.moveItem(t,e),this.loadItemAt(e))}}this.setState({dropIndex:-1,dropPosition:""})}),p(this,"onDragEnd",()=>{this.setState({dropIndex:-1,dropPosition:""})}),p(this,"onKeyDown",e=>{const t=i.a.keyComboFromEvent(e.nativeEvent);if("tab"!==t&&this.props.items&&this.props.items.length>0){let a=!0;const n=this.props.items.length;switch(t){case"up":this.loadItemAt(this.state.selectedIndex<=0?n-1:this.state.selectedIndex-1);break;case"down":this.loadItemAt(this.state.selectedIndex+1>=n?0:this.state.selectedIndex+1);break;case"del":case"backspace":this.removeItem(this.state.selectedIndex);break;case"home":this.loadItemAt(0);break;case"end":this.loadItemAt(n-1);break;case"alt+up":this.moveUp();break;case"alt+down":this.moveDown();break;case"enter":case"space":this.props.onActivate&&(this.props.onActivate(this.state.selectedIndex,e),a=!1);break;case"pageup":case"pagedown":default:a=!1}a&&e.preventDefault()}}),p(this,"getButtonClassByIndex",e=>l()({item:!0,"item-default":this.props.items[e].isDefault,"item-selected":e===this.state.selectedIndex&&!(this.state.isCreating||this.props.isCreating),dragoverAbove:e===this.state.dropIndex&&"above"===this.state.dropPosition,dragoverBelow:e===this.state.dropIndex&&"below"===this.state.dropPosition})),this.state={selectedIndex:this.props.selectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,dropIndex:-1,dropPosition:""}}componentWillUnmount(){this.clearDndTimer()}componentDidUpdate(e){if(e.items.length!==this.props.items.length){let t=-1;if(this.props.items.length>0)if(0===e.items.length)t=0;else if(this.props.items.length>e.items.length){const a=this.props.items.filter(({key:t})=>!e.items.some(({key:e})=>e===t));t=this.props.items.indexOf(a[0])}else-1!==this.state.selectedIndex&&(t=Math.min(this.state.selectedIndex,this.props.items.length-1),t===this.props.items.length-1&&this.focusItem(t));this.setSelected(t,!1)}e.isCreating!==this.props.isCreating&&this.props.isCreating&&this.setIsCreating()}render(){const{items:e,filter:t,emptyListGraphic:a,emptyListString:i}=this.props,{selectedIndex:s}=this.state,o=this.state.isCreating||this.props.isCreating,l=!!(null!=s&&e[s])&&e[s].isDefault,c=0===e.length&&!o;return n.createElement(n.Fragment,null,n.createElement("div",{ref:this.refItems,className:"master-items",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop,onKeyDown:this.onKeyDown,tabIndex:c?-1:0,__source:{fileName:h,lineNumber:473,columnNumber:9}},c&&a&&i&&n.createElement("div",{className:"master-items-empty",dangerouslySetInnerHTML:{__html:`${a}<div>${i}</div>`},__source:{fileName:h,lineNumber:484,columnNumber:13}}),e.map((e,a)=>n.createElement("button",{type:"button",title:e.name,className:this.getButtonClassByIndex(a),key:a,tabIndex:-1,draggable:this.props.supportDragAndDrop,onContextMenu:this.props.onContextMenu?this.props.onContextMenu.bind(this,a):null,onDragStart:this.onDragStartButton.bind(this,a),onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,a),onDrop:this.onDropButton.bind(this,a),onDragEnd:this.onDragEnd,onMouseDown:this.focusItem.bind(this,a),onDoubleClick:this.onDoubleClick.bind(this,a),__source:{fileName:h,lineNumber:493,columnNumber:15}},this.props.renderListItem(Object(u.b)(e.name,t),e))),"function"==typeof this.props.renderCreateListItem&&o&&this.props.renderCreateListItem()&&n.createElement("button",{className:"item item-selected",__source:{fileName:h,lineNumber:524,columnNumber:13}},this.props.renderCreateListItem())),(this.props.optionsList||this.props.onRemove||this.props.moveItem)&&n.createElement("div",{className:"master-toolbar",__source:{fileName:h,lineNumber:534,columnNumber:11}},this.props.optionsList&&n.createElement("select",{className:"button-toolbar sortable-list-options",onChange:this.props.onCreateItem,title:this.props.addTipString,defaultValue:null,__source:{fileName:h,lineNumber:536,columnNumber:15}},this.props.optionsList&&this.props.optionsList.map(e=>n.createElement("option",{key:e.key,value:e.key,__source:{fileName:h,lineNumber:544,columnNumber:21}},e.value,""!==e.key&&` [${e.key}]`))),this.props.onRemove&&n.createElement(n.Fragment,null,n.createElement("button",{className:"button-toolbar",style:this.props.optionsList?{pointerEvents:"none"}:null,tabIndex:this.props.optionsList?-1:null,title:this.props.addTipString,onClick:this.setIsCreating,disabled:this.props.onCancelCreate&&o,dangerouslySetInnerHTML:{__html:d.h.medium},__source:{fileName:h,lineNumber:554,columnNumber:15}}),n.createElement("button",{className:"button-toolbar",title:this.props.deleteTipString,onClick:this.removeItem.bind(this,s),disabled:!o&&e.length<1||l,dangerouslySetInnerHTML:{__html:d.pd.medium},__source:{fileName:h,lineNumber:564,columnNumber:15}})),this.props.moveItem&&n.createElement(n.Fragment,null,n.createElement("button",{className:"button-toolbar button-move-up",title:Object(r.a)("Move Up ($1)",[this.moveUpCombo]),onClick:this.moveUp,dangerouslySetInnerHTML:{__html:d.q.medium},__source:{fileName:h,lineNumber:577,columnNumber:15}}),n.createElement("button",{className:"button-toolbar button-move-down",title:Object(r.a)("Move Down ($1)",[this.moveDownCombo]),onClick:this.moveDown,dangerouslySetInnerHTML:{__html:d.n.medium},__source:{fileName:h,lineNumber:583,columnNumber:15}}))))}}p(b,"contextType",s.a),t.a=b}).call(this,a(82))},,,,function(e,t,a){"use strict";var n=a(24),i=a(243),s=a(32),r=a(42),o=a(2),l=a(38);const{deletePassword:c}=r.a,u={getCalendarCreateParams:()=>({name:"",description:Object(o.a)("New Calendar"),accountId:s.a.getDefaultAccountId(),color:u.getLocalCalendarCreateColor(),timezone:"",active:!1}),getAccountCreateParams:()=>({name:Object(o.a)("Local Account"),url:"",account_type:"local",username:""}),createLocalAccountAndCalendar:async(e,t)=>{t={...u.getCalendarCreateParams(),...t};const a=u.getLocalAccount();if(a){return await n.a.createCalendar({...t,accountId:a.id})}{e={...u.getAccountCreateParams(),...e};const a=await n.a.createAccount(e);return await n.a.createCalendar({...t,accountId:a.id})}},getLocalAccount:()=>s.a.getAccounts().find(e=>"local"===e.account_type),getLocalCalendarCreateColor:()=>{const e=u.getLocalAccount();if(!e)return l.w[Math.floor(Math.random()*l.w.length)].value;const t=e.id,a=s.a.getCalendars().filter(e=>e.accountId===t).map(e=>e.color?e.color.toLowerCase().replace("#",""):"");let n=l.w.filter(e=>!a.includes(e.value.toLowerCase()));return n.length||(n=l.w),n[Math.floor(Math.random()*n.length)].value},startDeletingCalendars:async e=>{const t=s.a.getAccounts().find(t=>t.id=e);if(!t)return;const{username:a,url:r}=t,o=s.a.getCalendars().filter(t=>t.accountId===e);n.a.stopListeners();try{for(const e of o)await n.a.deleteCalendar(e);await n.a.deleteAccount(e),c(a,r)}finally{n.a.startListeners(),i.a.doneDeleteAccount(e)}}};t.a=u},,,function(e,t,a){"use strict";var n=a(119),i=a(167),s=a(227),r=a(47),o=a(769),l=a(29),c=a(65),u=a(2),m=a(443),d=a(104),h=a(3);const p=function(e,t,a,n){if(this.alreadySending)return void d.a.log(`[mail][smtp][onidle][${e.MAIL_EMAIL}]Already Sending!`);d.a.log(`[mail][smtp][onidle][${e.MAIL_EMAIL}]`),this.alreadySending=!0;const i=[...t,...a,...n].map(e=>e.address);this.useEnvelope({from:e.MAIL_EMAIL,to:i})},b=function(e,t,a){d.a.log("[mail][smtp][onready]failedRecipients:",a.length),a.length>0?t({message:Object(u.a)("Rejected recipients: $1",[a.join()])}):(this.send(e),this.end())},g=function(e,t,a,n){d.a.log(`[mail][smtp][ondone]subject:"${e}" success:${n}`),n?c.a.setStatus(Object(u.a)("Sent message: $1",[e]),h.T):c.a.setStatus(Object(u.a)("Failed to send message: $1",[e])),this.quit(),n?t():a(Object(u.a)("Failed to send message: $1",[e]))},N=function(e,t,a){a?(d.a.log("[mail][smtp][onclose]Closed because of an error!"),t({message:Object(u.a)("SMTP client closed on error")})):(d.a.log("[mail][smtp][onclose]"),e())},f=function(e,t,a){d.a.log(`[mail][smtp][onerror][${e.MAIL_EMAIL}]${a.message}`);const n=e.MAIL_SMTP_SERVER||"",i=e.MAIL_SMTP_USER||"";c.a.setStatus(Object(u.a)("$1 - Server: $2 - User: $3",[a.message,n,i])),this.quit(),t(a)};var _={send:function(e,t,a,n,i,s){return d.a.log(`[mail][smtp][send][${e.MAIL_EMAIL}]subject:"${t}"`),-1===e.MAIL_SMTP_PORT?(console.warn("not gonna send as the smtp port is missing"),c.a.setStatus(Object(u.a)("SMTP client not configured for sending mail")),Promise.reject()):(c.a.setStatus(Object(u.a)("Sending")),new Promise((r,o)=>{m.a.getSMTPClient(e).then(l=>{l.onidle=p.bind(l,e,a,n,i),l.onready=b.bind(l,s,o),l.ondone=g.bind(l,t,r,o),l.onerror=f.bind(l,e,o),l.onclose=N.bind(l,r,o),l.connect()}).catch(e=>o(e))}))}},v=a(11),E=a(6),C=a(241),w=a(206),O=a(357),y=a(513),S=a(80),T=a(452),k=a(427),A=a(495),I=a(581),D=a(60),M=a(699),P=a(850),x=a(260),L=a(1),j=a(171);let R=!1;async function B(e,t){t||(e.queued=!0);const a=await Object(O.a)(h.c,h.gb,h.hb,[e],{filteringPriority:h.p.HIGH}),[i]=a;return r.a.updateIndex({addedSles:a}),D.a.filter(),n.a.updateThreads(),i}function F(e,t){if(0===e.length)return void c.a.setStatus(Object(u.a)("No messages to send"),2e3);if(R)return;R=!0;let a=0;const m=l.a.getByFolder(h.c,h.gb);if(m)return c.a.setStatus(Object(u.a)("Preparing to send $1 messages",[e.length]),2e3),e.reduce((e,l)=>e.then(()=>{const e=l.sources.get(m.id);if(e&&!e.deleted){const e=void 0!==l.searchListId?l.searchListId:l.id;if(t||!l.queued)return Object(k.a)(e).then(e=>{if(e)return async function(e){if(!e.from||0===e.from.length)throw new Error(Object(u.a)("Can not send. No sender specified!"));const t=await w.a.loadAllAccounts(),a=e.from.map(e=>e.address),l=t.find(e=>e.MAIL_EMAIL===a[0]);if(!l)throw new Error(Object(u.a)("Can not send. No account set up for sender $1",[a[0]]));const c=l.MAIL_EMAIL,m=s.a.getFoldersOfType(c,h.tb);let d,p,b=!1;m&&m.length?(d=c,p=m[0].path,b=!0):(d=h.c,p=h.sb);const g=e.bodyParts&&e.bodyParts[0].content;if("string"!=typeof g)throw new Error(`Could not switch to raw because first bodyPart is not string, it is: ${typeof g}`);const N=1e3*Math.floor(Date.now()/1e3),f=Object(x.b)(e.bodyParts),E=await o.a.build({...e,sentDate:N},g,f),{subject:O,to:k,cc:M,bcc:j}=e;await _.send(l,O,k,M,j||[],E);const R={searchList:{sentDate:N},messages:{sentDate:N},threading:{sentDate:N}},B={searchList:["queued"]};b&&(await Object(P.a)(d,N,e.id,E),B.messages=["bodyParts"]);const F={addedProperties:R,removedProperties:B,filteringPriority:h.p.HIGH},{sleUpdate:U}=await Object(I.a)(e.id,h.c,h.gb,d,p,F);d!==h.c&&Object(S.a)({type:"FILTERS_SLES",priority:h.p.HIGH,searchListIds:[e.id],folderIds:[[h.c,h.sb]]}),await Object(T.a)([e.id]),r.a.updateIndex({sleUpdates:[U]}),D.a.filter(),v.a.set(L.kMailLastSentFrom,l.MAIL_EMAIL),b&&l.accountType===h.J.IMAP?await Object(y.a)({accountId:c,path:p,operation:"BUFFER_OPERATION_UPLOAD_MESSAGE",message:E,searchListId:e.id}).then(()=>n.a.flushBuffer()):console.warn("No sent folder found for account",c);const H=e.forwarded||e.replied;if(void 0!==H){const t=await Object(A.a)(H);if(!t)return void console.warn(`Referenced message with id ${H} not found`);const a={searchListId:t.id,sentDate:t.sentDate,threadKey:t.threadKey,flags:t.flags,unseen:t.unseen,sources:t.sources},n=e.forwarded?C.a.setForwarded([a],!0):C.a.setReplied([a],!0);r.a.updateIndex({sleUpdates:n})}i.a.addIfNotAddressExists(e.to,!0)}(e).then(()=>++a).catch(e=>{console.error(e),Object(j.a)({title:e.message||e})})})}}),Promise.resolve()).then(()=>{R=!1,a>0&&E.a.get(L.kMailNotifications)&&E.a.get(L.kMailNotificationsOnSuccessfullySent)&&Object(j.a)({title:Object(u.a)("$1 message successfully sent","$1 messages successfully sent",[a]),icon:"resources/mail_notification_icon.png"})}).catch(e=>{R=!1,console.error(e)});console.error("Outbox filter missing!")}const U={sendAll:function(e=!0){M.a.m3GetAll().then(t=>F(t,e))},sendExternalMessage:async function(e,t=!0){const a=await B(e,t);t&&U.sendSelected([a])},sendForAccount:function(e){M.a.m3GetAll().then(t=>F(t.filter(t=>t.from&&t.from[0]&&t.from[0].address===e),!0))},sendSelected:function(e){F(e,!0)},storeMessage:B};t.a=U},function(e,t,a){"use strict";var n=a(693),i=a(11),s=a(6),r=a(7),o=a(1);let l;const c=()=>(n.a.updateCapture(),new Promise((e,t)=>{l=(a,n)=>{a&&t("Capture Cancelled"),e(n)}})),u={captureFullpage:(e,t,a)=>{const n={encodeFormat:t,encodeQuality:85,fullPage:!0,height:3e4,saveToDisk:"file"===a,showFileInPath:"file"===a,copyToClipboard:"clipboard"===a,saveFilePattern:s.a.get(o.kWebpagesCaptureSaveFilePattern)};return new Promise(t=>{r.a.thumbnails.captureTab(e,n,(e,a)=>{t({success:e,image:a})})})},captureAreaCommand:e=>(i.a.set(o.kWebpagesCaptureSaveLocation,e),c()),beginCaptureArea:c,doCapture:e=>{const{x:t,y:a,width:n,height:i}=e,c=s.a.get(o.kWebpagesCaptureSaveLocation),u=s.a.get(o.kWebpagesCaptureCompressionFormat),m=s.a.get(o.kWebpagesCaptureSaveFilePattern),d="note"===c,h="clipboard"===c;r.a.thumbnails.captureUI({posX:t,posY:a,width:n,height:i,encodeFormat:u,encodeQuality:85,saveToDisk:!0!==d,showFileInPath:!0!==d,copyToClipboard:h,saveFilePattern:m},(e,t)=>{l(!e,t)})},cancelCallback:()=>{n.a.updateCapture(),l&&(l(!0),l=void 0)}};t.a=u},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(25),r=a(523);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends n.Component{constructor(e){super(e),l(this,"shouldComponentUpdate",()=>{const{document:e}=this.context;return!(this.element&&this.element===e.activeElement)}),l(this,"setRef",e=>{this.element=e,e&&this.props.setElementRef&&this.props.setElementRef(e)}),l(this,"updateContent",e=>{if(this.element){const e=this.element.innerText;this.props.updateContent(e||"")}})}render(){const e=(this.props.className||"")+" editable",t=Object(r.a)(this.props,["className","content","updateContent","formatter","setElementRef"]);return i.a.createElement("p",o({},t,{className:e,contentEditable:"plaintext-only",onBlur:this.updateContent,onInput:this.updateContent,ref:this.setRef,suppressContentEditableWarning:!0,"data-placeholder":this.props.placeholder?this.props.placeholder:"",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\Editable.jsx",lineNumber:55,columnNumber:7}}),this.props.formatter(this.props.content))}}l(c,"contextType",s.a);var u=c;class m extends n.Component{constructor(...e){var t,a,n;super(...e),n=e=>{const{event:t,field:a}=this.props;(e&&e!==t[a]||!e&&t[a])&&this.props.updateEvent({...t,[a]:e})},(a="updateText")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{event:e}=this.props;return(n.createElement(u,{setElementRef:e=>{this.props.focusRef&&e&&(this.props.focusRef.current=e)},tabIndex:this.props.tabIndex,title:this.props.label,placeholder:this.props.label,className:`cal-event-${this.props.field}`,content:e[this.props.field],formatter:e=>e,updateContent:this.updateText,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TextEditor.jsx",lineNumber:25,columnNumber:7}}))}}t.a=m},function(e,t,a){"use strict";var n=a(0),i=a(32),s=a(42),r=a(615),o=a(20),l=a.n(o),c=a(109),u=a(9),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\IconSelect.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends n.Component{constructor(...e){super(...e),d(this,"state",{isOpen:!1}),d(this,"elementRef",n.createRef()),d(this,"toggleDropdown",()=>this.setState(e=>({isOpen:!e.isOpen}))),d(this,"closeDropdown",()=>this.setState({isOpen:!1})),d(this,"openDropdown",()=>this.setState({isOpen:!0})),d(this,"onSelected",({id:e})=>{this.props.onSelected(e),this.closeDropdown()}),d(this,"onKeyDown",e=>{const t=c.a[e.keyCode];if(this.state.isOpen)"Escape"===t&&this.closeDropdown();else switch(t){case"Up":case"Down":case"Space":this.openDropdown()}})}componentDidUpdate(e,t){t.isOpen&&!this.state.isOpen&&this.elementRef.current&&this.elementRef.current.focus()}render(){let e=this.props.selectedItem?"<div>"+this.props.selectedItem.name+"</div>":this.props.placeholder;return this.props.selectedItem&&this.props.selectedItem.iconSVG&&(e=this.props.selectedItem.iconSVG+e),n.createElement("div",{className:l()("IconSelect",{"IconSelect-Popup":"popup"===this.props.editMode,"IconSelect-Inline":"inline"===this.props.editMode,"IconSelect-Open":this.state.isOpen}),__source:{fileName:m,lineNumber:75,columnNumber:7}},n.createElement("button",{className:"IconSelect-Button",onKeyDown:this.onKeyDown,onClick:this.toggleDropdown,tabIndex:this.props.tabIndex||0,ref:this.elementRef,dangerouslySetInnerHTML:{__html:e+u.n.medium},__source:{fileName:m,lineNumber:80,columnNumber:9}}),this.state.isOpen&&n.createElement("div",{className:"IconSelect-Dropdown",__source:{fileName:m,lineNumber:90,columnNumber:11}},n.createElement(r.a,{items:this.props.items,onClose:this.closeDropdown,onItemActivated:this.onSelected,__source:{fileName:m,lineNumber:91,columnNumber:13}})))}}var p=h,b=a(14),g=a(2),N=a(235),f=a(15),_=a.n(f),v=a(742),E=a(100),C=a(198);a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return S})),a.d(t,"d",(function(){return D})),a.d(t,"c",(function(){return P}));var w="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\RenderUtilities.jsx";const O=Object(g.a)("calendar","Default"),y=new DOMParser;function S(e){const{start:t,end:a,due:n}=Object(E.b)(e);let i,s="";return i=e.allDay?_.a.localeData().longDateFormat("LL"):"LT",e.start&&e.end&&t.valueOf()===a.valueOf()?s=`${t.format(i)}`:e.start&&e.end?s=`${t.format(i)}-${a.format(i)}`:e.start&&e.due?s=`${t.format(i)}-${n.format(i)}`:e.due&&(s=`${n.format(i)}`),s}function T(e){let t="";if(void 0!==e){t=`${_()(e).format("LT")}`}return t}function k(e){const t=Object(g.a)("Ctrl/Cmd-click to follow link");return e.replace(/(href="([^"]*)")/gi,`$1 title="${t}\n\n$2"`)}function A(e){const t=e.target.closest("a");t&&e.currentTarget.contains(t)&&t.href&&(e.stopPropagation(),e.preventDefault(),b.a.openURL(t.href))}function I(e){for(let a=0;a<e.length;a++)if("<"===e[a]){let n=0;for(let i=a+1;i<e.length;i++){const s=e[i];if("<"===s)n++;else if(">"===s){if(!n){if("/"===e[i-1]){a=i+1;break}{var t;const n=e.slice(a+1,i),s=null===(t=n.match(/\w+/i))||void 0===t?void 0:t[0];if(s){const t=`</${s}>`,n=e.indexOf(t,i);if(-1!==n){a=i+n+t.length+1;break}}e=`${e.slice(0,a)}&lt;${n}&gt;${e.slice(i+1)}`,a=i+6;break}}n--}if(i===e.length-1){e=`${e.slice(0,a)}&lt;${e.slice(a+1)}`;break}}}return e}const D=(e,t,a)=>{let i=t.trim();if(!i)return null;return i=function(e){var t;return-1===e.indexOf("<")||(null===(t=y.parseFromString(e,"text/html").body)||void 0===t?void 0:t.innerText)===e}(I(i))?(e=>{const t=e.match(/(\n|[^\r\n]+)/g);return t&&1!==t.length?t.map(e=>-1!==e.indexOf("\n")?"<br />":e.startsWith("-::")?`<p class="delimiter">${e}</p>`:`<p>${e}</p>`).join(""):e})(I(Object(N.a)(i))):Object(C.sanitize)(i,{FORBID_TAGS:["style"]}),n.createElement("span",{ref:a,className:`cal-event-${e}`,key:e,onClick:A,dangerouslySetInnerHTML:{__html:k(i)},__source:{fileName:w,lineNumber:159,columnNumber:5}})};function M(e){return{type:"Normal",name:e.description||e.name||O,iconSVG:s.a.createCalendarIcon(e,10),noPrettifying:!0,id:e.id}}const P=(e,t,a,r)=>{const o=i.a.getCalendars();if(0===o.length)return n.createElement("div",{__source:{fileName:w,lineNumber:188,columnNumber:7}},Object(g.a)("You have no calendars set up, event can not be saved"));const l=e.calendarId||i.a.getDefaultCalendarId(),c=o.find(e=>e.id===l);if(!c)return;const u=i.a.getAccounts().find(e=>e.id===c.accountId);if(!u)return;if("ical"===u.account_type)return n.createElement("div",{__source:{fileName:w,lineNumber:209,columnNumber:12}},n.createElement("label",{__source:{fileName:w,lineNumber:210,columnNumber:7}},Object(g.a)("Calendar Name")),n.createElement("p",{__source:{fileName:w,lineNumber:211,columnNumber:7}},c.description||c.name));let m=[];if("google"===u.account_type&&e.task)m=s.a.getLocalGoogleTasksCalendars(u);else{const e=i.a.getAccounts().filter(e=>"ical"===e.account_type).map(e=>e.id);m=Object(v.a)(i.a.getCalendars(),e,(e,t)=>e.accountId===t);const t=s.a.getLocalGoogleTasksCalendars(u).map(e=>e.id);m=Object(v.a)(m,t,(e,t)=>e.id===t)}const d=m.map(M);let h=d.find(e=>e.id===l);return h||(h=d[0]),n.createElement(p,{key:"calendars",items:d,selectedItem:h,onSelected:t,placeholder:Object(g.a)("Select calendar"),tabIndex:a,editMode:r,__source:{fileName:w,lineNumber:246,columnNumber:5}})}},,,,function(e,t,a){"use strict";var n=a(38),i=a(433);function s(e){try{if(e.startsWith('"')&&e.endsWith('"'))return e.slice(1,-1)}catch(t){console.error("Parsing error in stripQuotes %o %o",t,e)}return e}const r=e=>{const t={};for(;e.length>1;){const a=e.shift(),[l,c]=Object(i.c)(a,":",2);if(void 0===c)throw new Error(`Error parsing iCal line: "${a}". Value not found.`);const[u,m]=l.split(/;(.*)/,2),d=m?Object(i.c)(m,";").reduce((e,t)=>{const[a,n]=t.split("=");return e[a]=s(n),e},{}):{};switch(u){case"BEGIN":const i=c;let s=r(e);switch(t[i]&&(s=[].concat(t[i],s)),i){case"VEVENT":case"VTODO":case"VALARM":case"VTIMEZONE":case"STANDARD":case"DAYLIGHT":t[i]=Array.isArray(s)?s:[s];break;default:t[i]=s}break;case"END":return t;case"RECURRENCE-ID":case"DTSTART":case"DTEND":case"DTSTAMP":c.endsWith("Z")?d.TZID="UTC":d.TZID||(d.TZID=n.i),t[u]={value:c,params:d};break;case"ATTENDEE":t[u]=(t[u]||[]).concat([{value:o(c),params:d}]);break;case"EXDATE":c.indexOf(",")>=0?t[u]=c.split(",").map(e=>({value:e,params:d})):t[u]=(t[u]||[]).concat([{value:c,params:d}]);break;case"ORGANIZER":t[u]={value:o(c),params:d};break;case"URL":t[u]={value:c,params:d};break;case"ATTACH":t[u]=t[u]?[t[u],a].join("\r\n"):a;break;case"UID":case"CLASS":case"CREATED":case"DESCRIPTION":case"GEO":case"LAST-MODIFIED":case"LOCATION":case"PRIORITY":case"SEQUENCE":case"STATUS":case"SUMMARY":case"TRANSP":t[u]=c;break;default:t[u]?t[u]=[].concat(t[u]||[],c):t[u]=c}}return t},o=e=>e.toLowerCase().startsWith("mailto:")?e.substr(7):e;t.a=e=>{const t=(e=>{const t=e.split(/\r\n|\n|\r/).filter(e=>""!==e.trim()),a=[];let n="";for(;t.length>0;){const e=t.shift();" "===e[0]||"\t"===e[0]?n+=e.substr(1):(n&&a.push(n),n=e.trim())}return n&&a.push(n),a})(e),a=r(t);if(!a.VCALENDAR)return{VEVENT:[],VTODO:[]};if(a.VCALENDAR.VEVENT){const e=a.VCALENDAR.VEVENT.reduce((e,t)=>{const a=e.findIndex(e=>e.UID===t.UID);return-1===a?e.push({UID:t.UID,VEVENT:[t]}):e[a].VEVENT.push(t),e},[]).reduce((e,t)=>{const a=t.VEVENT.reduce((e,t)=>(t["RECURRENCE-ID"]?e.EXCEPTIONS?e.EXCEPTIONS.push(t):e.EXCEPTIONS=[t]:e={...e,...t},e),{});return e.push(a),e},[]);a.VCALENDAR.VEVENT=e}else a.VCALENDAR.VEVENT=[];return{...a.VCALENDAR}}},,function(e,t,a){"use strict";t.a=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var n=a(0),i=a(277),s=a(22),r=a(25),o=a(2),l=a(109),c=a(88),u=a.n(c),m=a(70),d=a(105),h=a(9),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\RecurrenceEditor.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=new Map([["none",{name:Object(o.a)("No repeat"),frequency:void 0}],["days",{name:Object(o.a)("Daily"),frequency:m.a.DAILY}],["weeks",{name:Object(o.a)("Weekly"),frequency:m.a.WEEKLY}],["months_dom",{name:Object(o.a)("Monthly by date"),frequency:m.a.MONTHLY}],["months_dow",{name:Object(o.a)("Monthly by week"),frequency:m.a.MONTHLY}],["years",{name:Object(o.a)("Yearly"),frequency:m.a.YEARLY}]]),N=new Map([[m.a.DAILY,["day","days"]],[m.a.WEEKLY,["week","weeks"]],[m.a.MONTHLY,["month","months"]],[m.a.YEARLY,["year","years"]]]);function f(e){return{[m.a.DAILY]:"days",[m.a.WEEKLY]:"weeks",[m.a.MONTHLY]:"months",[m.a.YEARLY]:"years"}[e]||"none"}const _=e=>{if(!e)return Object(o.a)("No repeat");const{count:t,dtstart:a,until:n,interval:i=1}=e.origOptions,s=u()(a).format("LL");let r="",l="";if(i<=2)switch(e.origOptions.freq){case m.a.DAILY:r=Object(o.a)("Repeats daily","Repeats every other day",[i]);break;case m.a.WEEKLY:r=Object(o.a)("Repeats weekly","Repeats every other week",[i]);break;case m.a.MONTHLY:r=Object(o.a)("Repeats monthly","Repeats every other month",[i]);break;case m.a.YEARLY:r=Object(o.a)("Repeats yearly","Repeats every other year",[i])}else switch(e.origOptions.freq){case m.a.DAILY:r=Object(o.a)("Repeats every $1 days","Repeats every $1 days",[i]);break;case m.a.WEEKLY:r=Object(o.a)("Repeats every $1 weeks","Repeats every $1 weeks",[i]);break;case m.a.MONTHLY:r=Object(o.a)("Repeats every $1 months","Repeats every $1 months",[i]);break;case m.a.YEARLY:r=Object(o.a)("Repeats every $1 years","Repeats every $1 years",[i])}if(t&&t>0)l=Object(o.a)("$1 time beginning $2","$1 times beginning $2",[t,s]);else if(n){const e=u()(n).format("LL");l=Object(o.a)("from $1 to $2",[s,e])}else l=Object(o.a)("beginning $1",[s]);return Object(o.a)("$1, $2",[r,l])};class v extends n.Component{constructor(e){super(e),b(this,"domPickerRef",n.createRef()),b(this,"storedFocusElement",null),b(this,"isTypingDate",!1),b(this,"endDateElement",n.createRef()),b(this,"changeField",e=>{const{recurrence:t}=this.props.event;if(!t)return;const a=e.currentTarget.name;let{value:n}=e.currentTarget;"number"===e.currentTarget.type&&(n=parseInt(n),(isNaN(n)||n<1)&&(n=0)),this.props.event.recurrence=Object(d.k)(t,{[a]:n}),this.props.updateEvent(this.props.event)}),b(this,"verifyValidValue",e=>{const{recurrence:t}=this.props.event;if(!t)return;const a=e.currentTarget.name;let{value:n}=e.currentTarget;"number"===e.currentTarget.type&&(n=parseInt(n),(isNaN(n)||n<1)&&(n=1,this.props.event.recurrence=Object(d.k)(t,{[a]:n}),this.props.updateEvent(this.props.event)))}),b(this,"changeRecurrence",e=>{const{value:t}=e.currentTarget,{event:a}=this.props,n=new Date(a.start);let i;switch(t){case"days":i=Object(d.a)({dtstart:n,freq:m.a.DAILY,interval:1});break;case"weeks":i=Object(d.a)({dtstart:n,freq:m.a.WEEKLY,interval:1,byweekday:(n.getDay()+6)%7});break;case"months_dom":i=Object(d.a)({dtstart:n,freq:m.a.MONTHLY,interval:1,bymonthday:n.getDate()});break;case"months_dow":const e=Math.ceil(n.getDate()/7),t=Object(d.h)(n.getDay()).nth(e);i=Object(d.a)({dtstart:n,freq:m.a.MONTHLY,interval:1,byweekday:t});break;case"years":i=Object(d.a)({dtstart:n,freq:m.a.YEARLY,interval:1})}this.props.event.recurrence=i,this.props.updateEvent(this.props.event)}),b(this,"changeDate",e=>{const{event:t}=this.props,a=t.recurrence;a&&(t.recurrence=Object(d.k)(a,{until:u()(e.currentTarget.value).endOf("day").toDate()}),this.props.updateEvent(t))}),b(this,"changeEnds",e=>{const t=e.target.value,{event:a}=this.props,n=a.recurrence;if(!n)return;let i;switch(t){case"forever":i=Object(d.k)(n,{until:void 0,count:void 0});break;case"endDate":const e=f(n.origOptions.freq);i=Object(d.k)(n,{count:void 0,until:u()(a.start).add(1,e).toDate()});break;case"count":i=Object(d.k)(n,{count:1,until:void 0})}a.recurrence=i,this.props.updateEvent(a)}),b(this,"changeDayOfMonth",e=>{const{recurrence:t}=this.props.event;if(!t)return;const a=this.state.monthDates.split(",").map(e=>parseInt(e)).filter(e=>e>=1&&e<=31);a.length&&(this.props.event.recurrence=Object(d.k)(t,{bymonthday:a}),this.props.updateEvent(this.props.event))}),b(this,"typeDayOfMonth",e=>{this.setState({monthDates:e.currentTarget.value})}),b(this,"toggleDayOfMonthPicker",()=>{const{document:e}=this.context;this.setState(e=>({showMonthPicker:!e.showMonthPicker}),()=>{if(this.state.showMonthPicker){this.storedFocusElement=e.activeElement;const t=e.querySelector("button[name='1-dayOfMonth']");t&&t.focus()}})}),b(this,"hideDayOfMonthPicker",()=>{this.setState({showMonthPicker:!1},()=>{this.storedFocusElement&&(this.storedFocusElement.focus(),this.storedFocusElement=null)})}),b(this,"dayOfWeekPickerClick",e=>{e.target.focus();const{recurrence:t}=this.props.event;if(!t)return;const a=parseInt(e.target.name);if(isNaN(a))throw new Error("Can not select day, invalid day value");const n=new Set(Object(d.f)(t));n.has(a)&&n.size>1?n.delete(a):n.add(a),this.props.event.recurrence=Object(d.k)(t,{byweekday:Array.from(n)}),this.props.updateEvent(this.props.event)}),b(this,"dayOfMonthPickerClick",e=>{e.target.focus();const t=parseInt(e.target.name);this.selectDayOfMonth(t)}),b(this,"selectDayOfMonth",e=>{const{recurrence:t}=this.props.event;if(!t)return;const a=new Set(Object(d.e)(t));a.has(e)&&a.size>1?a.delete(e):a.add(e),this.props.event.recurrence=Object(d.k)(t,{bymonthday:Array.from(a).sort((e,t)=>e-t)}),this.props.updateEvent(this.props.event)}),b(this,"monthPickerBlur",e=>{const t=this.domPickerRef.current;t&&e.relatedTarget instanceof Node&&!t.contains(e.relatedTarget)&&this.setState({showMonthPicker:!1})}),b(this,"dayOfWeekPickerKeyDown",e=>{const{document:t}=this.context,a=t.activeElement;if(!a||!a.hasAttribute("name"))return;const n=u()().localeData().firstDayOfWeek(),i=(parseInt(a.name)-n+7)%7;let s=null;switch(l.a[e.keyCode]){case"Left":i>0&&(s=i-1);break;case"Right":i<6&&(s=i+1);break;default:return}if(null!==s){s=(s+n)%7;const e=t.querySelector(`button[name='${s}-dayOfWeek']`);e&&(e.tabIndex=0,e.focus(),a.tabIndex=-1)}}),b(this,"dayOfMonthPickerKeyDown",e=>{if(!this.state.showMonthPicker&&"Down"===l.a[e.keyCode])return void this.toggleDayOfMonthPicker();const{document:t}=this.context,a=t.activeElement;if(!a||!a.hasAttribute("name"))return;const n=parseInt(a.name);let i;switch(l.a[e.keyCode]){case"Up":n>7&&(i=n-7);break;case"Down":n<25&&(i=n+7);break;case"Left":n%7!=1&&(i=n-1);break;case"Right":n%7!=0&&(i=n+1);break;case"Enter":return this.selectDayOfMonth(n),void e.stopPropagation();case"Escape":return e.stopPropagation(),void this.hideDayOfMonthPicker();default:return}if(i){const e=t.querySelector(`button[name='${i}-dayOfMonth']`);e&&e.focus()}}),b(this,"weekOfMonthChange",e=>{const{recurrence:t}=this.props.event;if(!t)return;const a=parseInt(e.currentTarget.value);let[n,i]=e.currentTarget.name.split("-");n=parseInt(n);const s=Object(d.g)(t),r=s[n];"weekOfMonthWeek"===i?s[n]=s[n].nth(a):"weekOfMonthDay"===i&&(s[n]=d.l[a],void 0!==r.n&&(s[n]=s[n].nth(r.n))),this.props.event.recurrence=Object(d.k)(t,{byweekday:s}),this.props.updateEvent(this.props.event)}),b(this,"addWeekOfMonth",()=>{const{event:e}=this.props,{recurrence:t}=e;if(!t)return;const a=u()(e.start),n=Math.ceil(a.date()/7),i=Object(d.h)(a.day()).nth(n),s=Object(d.g)(t);s.push(i),e.recurrence=Object(d.k)(t,{byweekday:s}),this.props.updateEvent(e)}),b(this,"deleteWeekOfMonth",e=>{const t=parseInt(e.currentTarget.name),{event:a}=this.props,{recurrence:n}=a;if(!n)return;const i=Object(d.g)(n).splice(t,1),s=Object(d.k)(n,{byweekday:i});a.recurrence=s,this.props.updateEvent(a)});const t=u()().startOf("week");this.week=[...Array(7).keys()].map(()=>{const e={name:t.format("dddd"),number:(t.day()+6)%7};return t.add(1,"day"),e}),this.state={showMonthPicker:!1,bymonthday:[],monthDates:""}}static getDerivedStateFromProps(e,t){const{recurrence:a}=e.event,n={bymonthday:a?a.origOptions.bymonthday:void 0};return a&&t.bymonthday!==a.origOptions.bymonthday&&(n.monthDates=Object(d.e)(a).join(", "),n.bymonthday=a.origOptions.bymonthday),n}renderWeekSelection(){const{recurrence:e}=this.props.event;if(!e)return null;const t=Object(d.f)(e),a=this.week.map((e,a)=>{const i=t.includes(e.number),r=`${e.number}-dayOfWeek`;return(n.createElement(n.Fragment,{key:r,__source:{fileName:p,lineNumber:590,columnNumber:14}},n.createElement(s.a,{name:r,onClick:this.dayOfWeekPickerClick,onKeyDown:this.dayOfWeekPickerKeyDown,title:e.name.substr(0,1),tooltip:e.name,tabIndex:i?this.props.tabIndex:-1,isPressed:i,__source:{fileName:p,lineNumber:591,columnNumber:9}}),a<this.week.length-1&&n.createElement("hr",{__source:{fileName:p,lineNumber:601,columnNumber:11}})))});return n.createElement("div",{className:"edit-group capped-width",__source:{fileName:p,lineNumber:606,columnNumber:7}},n.createElement("div",{className:"toolbar toolbar-default calendar-week-picker",__source:{fileName:p,lineNumber:607,columnNumber:9}},n.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:p,lineNumber:608,columnNumber:11}},a)))}renderDayOfMonthSelection(){const{event:e}=this.props,{recurrence:t}=e;if(!t)return null;const a=Object(d.e)(t);return(n.createElement("div",{className:"edit-group capped-width",__source:{fileName:p,lineNumber:624,columnNumber:7}},n.createElement("label",{__source:{fileName:p,lineNumber:625,columnNumber:9}},n.createElement("span",{__source:{fileName:p,lineNumber:627,columnNumber:11}},Object(o.a)("On days")),n.createElement("input",{type:"text",id:"day_of_month",value:this.state.monthDates||u.a.tz(e.start,e.timezone).date(),onChange:this.typeDayOfMonth,onBlur:this.changeDayOfMonth,__source:{fileName:p,lineNumber:628,columnNumber:11}}),n.createElement(s.a,{className:"button-narrow",image:h.H.small,popupPosition:"below",isPopupVisible:this.state.showMonthPicker,popupWidth:240,onClick:this.toggleDayOfMonthPicker,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,tooltip:Object(o.a)("Show date picker"),hidePopup:this.hideDayOfMonthPicker,popupClassName:"ToolbarButtonPopup-DefaultStyles",__source:{fileName:p,lineNumber:635,columnNumber:11}},n.createElement("div",{className:"dom-picker",ref:this.domPickerRef,onBlur:this.monthPickerBlur,__source:{fileName:p,lineNumber:649,columnNumber:13}},n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:p,lineNumber:654,columnNumber:15}},[...Array(31).keys()].map(e=>{const t=e+1;return(n.createElement(s.a,{isPressed:a.includes(t),name:`${t}-dayOfMonth`,key:t,onKeyDown:this.dayOfMonthPickerKeyDown,onClick:this.dayOfMonthPickerClick,tabIndex:this.state.showMonthPicker?this.props.tabIndex:-1,title:t.toString(),tooltip:Object(o.a)("Repeat monthly on day $1",[t]),__source:{fileName:p,lineNumber:658,columnNumber:19}}))})))))))}renderWeekOfMonthSelection(){const{recurrence:e}=this.props.event;if(!e)return null;const t=Object(d.g)(e);return t.map((e,a)=>n.createElement("div",{className:"edit-group",key:a,__source:{fileName:p,lineNumber:685,columnNumber:7}},n.createElement("label",{__source:{fileName:p,lineNumber:686,columnNumber:9}},n.createElement("select",{name:`${a}-weekOfMonthWeek`,onChange:this.weekOfMonthChange,tabIndex:this.props.tabIndex,value:e.n,__source:{fileName:p,lineNumber:687,columnNumber:11}},n.createElement("option",{value:"1",__source:{fileName:p,lineNumber:694,columnNumber:13}},Object(o.a)("First")),n.createElement("option",{value:"2",__source:{fileName:p,lineNumber:696,columnNumber:13}},Object(o.a)("ordering","Second")),n.createElement("option",{value:"3",__source:{fileName:p,lineNumber:698,columnNumber:13}},Object(o.a)("Third")),n.createElement("option",{value:"4",__source:{fileName:p,lineNumber:700,columnNumber:13}},Object(o.a)("Fourth")),n.createElement("option",{value:"5",__source:{fileName:p,lineNumber:702,columnNumber:13}},Object(o.a)("Fifth")),n.createElement("option",{value:"-1",__source:{fileName:p,lineNumber:704,columnNumber:13}},Object(o.a)("Last")),n.createElement("option",{value:"-2",__source:{fileName:p,lineNumber:706,columnNumber:13}},Object(o.a)("Second last"))),n.createElement("select",{name:`${a}-weekOfMonthDay`,onChange:this.weekOfMonthChange,tabIndex:this.props.tabIndex,value:e.weekday,__source:{fileName:p,lineNumber:708,columnNumber:11}},this.week.map(e=>n.createElement("option",{key:e.number,value:e.number,__source:{fileName:p,lineNumber:715,columnNumber:15}},e.name))),t.length>1&&n.createElement("input",{type:"button",className:"circular",name:`${a}`,onClick:this.deleteWeekOfMonth,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,title:Object(o.a)("Remove rule"),value:"–",__source:{fileName:p,lineNumber:720,columnNumber:13}}),n.createElement("input",{type:"button",className:"circular",onClick:this.addWeekOfMonth,onKeyDown:this.dayOfMonthPickerKeyDown,tabIndex:this.props.tabIndex,title:Object(o.a)("Add rule"),value:"+",__source:{fileName:p,lineNumber:733,columnNumber:11}}))))}render(){const{event:e}=this.props,t=e.recurrence||{origOptions:{}},{freq:a,interval:s,count:r,until:l}=t.origOptions,c=a===m.a.MONTHLY?t.origOptions.byweekday?"months_dow":"months_dom":f(a),d=void 0!==r?"count":l?"endDate":"forever",h=N.get(a)||["",""],b=Object(o.a)(...h,[s]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"edit-group capped-width",__source:{fileName:p,lineNumber:765,columnNumber:9}},n.createElement("select",{name:"frequency",ref:this.props.focusRef,onChange:this.changeRecurrence,tabIndex:this.props.tabIndex,value:c,__source:{fileName:p,lineNumber:766,columnNumber:11}},Array.from(g).map(([e,t])=>n.createElement("option",{key:e,value:e,__source:{fileName:p,lineNumber:774,columnNumber:17}},t.name)))),"weeks"===c&&this.renderWeekSelection(),"months_dom"===c&&this.renderDayOfMonthSelection(),"months_dow"===c&&this.renderWeekOfMonthSelection(),"none"!==c&&n.createElement("div",{className:"edit-group capped-width",__source:{fileName:p,lineNumber:790,columnNumber:11}},n.createElement("label",{__source:{fileName:p,lineNumber:791,columnNumber:13}},n.createElement("span",{__source:{fileName:p,lineNumber:793,columnNumber:15}},Object(o.a)("every")),n.createElement("input",{type:"number",name:"interval",min:"1",disabled:!c,onChange:this.changeField,onBlur:this.verifyValidValue,tabIndex:this.props.tabIndex,value:s||"",__source:{fileName:p,lineNumber:794,columnNumber:15}}),n.createElement("span",{__source:{fileName:p,lineNumber:804,columnNumber:15}},b))),"none"!==c&&n.createElement("div",{className:"edit-group",__source:{fileName:p,lineNumber:810,columnNumber:11}},n.createElement("select",{name:"endsRepeating",ref:this.props.focusRef,onChange:this.changeEnds,tabIndex:this.props.tabIndex,value:d,__source:{fileName:p,lineNumber:811,columnNumber:13}},n.createElement("option",{value:"forever",__source:{fileName:p,lineNumber:819,columnNumber:15}},Object(o.a)("Forever")),n.createElement("option",{value:"endDate",__source:{fileName:p,lineNumber:821,columnNumber:15}},Object(o.a)("Ending")),n.createElement("option",{value:"count",__source:{fileName:p,lineNumber:823,columnNumber:15}},Object(o.a)("Repeating"))),n.createElement(n.Fragment,null,"endDate"===d&&n.createElement(i.a,{name:"endDate",onChange:this.changeDate,min:u()(e.start).format("YYYY-MM-DD"),tabIndex:this.props.tabIndex,ref:this.endDateElement,value:u()(l).format("YYYY-MM-DD"),__source:{fileName:p,lineNumber:828,columnNumber:17}}),"count"===d&&n.createElement("label",{__source:{fileName:p,lineNumber:839,columnNumber:17}},n.createElement("input",{size:"3",type:"number",name:"count",onChange:this.changeField,onBlur:this.verifyValidValue,min:"1",tabIndex:this.props.tabIndex,value:r||"",__source:{fileName:p,lineNumber:840,columnNumber:19}}),n.createElement("span",{__source:{fileName:p,lineNumber:851,columnNumber:19}},Object(o.a)("time","times",[r]))))))}}b(v,"contextType",r.a),t.a=v},function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a(53),i=a(26),s=a(23);function r(e){const t=e.id;if(void 0===t)throw new Error("Chrome.tabToPage: tab ID missing");const a=new n.b({id:t});return o(i.List.of(a),t,e).first()}function o(e,t,a){const n=e.findIndex(e=>e.id===t);if(-1===n)return e;for(const[t,o]of Object.entries(a))switch(t){case"extData":{if("string"!=typeof o)continue;const t=e.getIn([n,"extData"])||Object(i.Map)();let a;try{a=JSON.parse(o)}catch(e){a={}}e=e.setIn([n,"extData"],t.merge(a));break}case"active":e=e.setIn([n,"active"],o),o&&(e=e.setIn([n,"unread"],!1));break;case"pendingUrl":case"url":if("string"!=typeof o)continue;if("url"===t&&a.pendingUrl)continue;e=(e=(e=e.setIn([n,"isMailPage"],s.p.isMailPage(o))).setIn([n,"url"],(r=o).startsWith("vivaldi://")?s.p.getUrl(r):r)).setIn([n,"target"],void 0);break;case"favIconUrl":if("string"!=typeof o)continue;e=e.setIn([n,"favIconUrl"],o);break;case"index":case"windowId":case"openerTabId":case"pinned":case"audible":case"title":case"incognito":case"sessionId":case"discarded":e=e.setIn([n,t],o)}var r;return e}const l={tabToPage:r,updatePage:o};t.a=l},function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(511),i=a(84),s=a.n(i),r=a(23);function o(e){if(r.p.isInternalUrl(e.get("url"))){if(Object.keys(r.p.internals).find(t=>e.get("url").startsWith(r.p.internals[t])))return r.p.getDisplayTitle(e)}return s.a.parse(Object(n.a)(e.get("url"))).hostname||""}function l(e,t){const a=o(e);return[a,t.filter(e=>"tab"===e.type).filter(e=>!e.getIn(["page","pinned"])).filter(e=>o(e.get("page"))===a)]}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(51),i=a(15),s=a.n(i),r=a(26);class o extends(Object(r.Record)({title:"",url:"",query:""})){}class l extends(Object(r.Record)({text:"",startTime:s()().startOf("day"),endTime:s()().endOf("day"),rangePicker:"today",displayMode:"day",parsedFilter:new o,dayPickerVisible:!1,moreInfoVisible:!0,monthEntriesVisible:!0,searchURL:!0,searchTitle:!0,range:null,sortOrder:n.a.DESCENDING_SORT,sortField:"visitTime"})){}},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(6),i=a(3),s=a(1);function r(e){const t=n.a.get(s.kMailAccounts).find(t=>t.MAIL_EMAIL===e);return t&&t.accountType}function o(e){return r(e)===i.J.IMAP}function l(e){return r(e)===i.J.POP}},function(e,t,a){"use strict";(function(e){var n=a(13),i=a(6),s=a(12),r=a(16),o=a(35),l=a(1);const{SEARCH_FIELD_SET_STATE:c,SEARCH_FIELD_ADD_TYPED_HISTORY:u,SEARCH_FIELD_DELETE_TYPED_HISTORY:m,SEARCH_FIELD_INIT_TYPED_HISTORY:d,SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:h,SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:p}=r.a,b=new class{setState(e){const t=n.c.unsafeGetActivePage();s.a.dispatch({actionType:c,state:e,page:t})}addTypedSearchHistory(t){const a=i.a.get(l.kAddressBarSearchTypedHistoryEnabled),r=!1!==n.c.unsafeGetActivePage().get("incognito");a&&!r&&e.nextTick(()=>{s.a.dispatch({actionType:u,query:t})})}deleteTypedSearchHistory(e){s.a.dispatch({actionType:m,query:e})}load(){const e=o.a.getSync("TYPED_SEARCH_HISTORY");s.a.dispatch({actionType:d,typedHistory:e})}};i.a.addListener(l.kHistoryDaysToKeepVisits,(e,t)=>{0===t?s.a.dispatch({actionType:h}):0===e&&t>0&&s.a.dispatch({actionType:p})}),t.a=b}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));const n=0,i=1},,function(e,t,a){"use strict";(function(e){const a={throttleSync:function(t,a={}){return function(){if(!a.isRunning){a.isRunning=!0;try{t.apply(this,arguments)}finally{e.nextTick(()=>{a.isRunning=!1})}}}}};t.a=a}).call(this,a(82))},,function(e,t,a){"use strict";var n=a(41),i=a(6),s=a(421),r=a(313);var o=a(1270),l=a(250),c=a.n(l),u=a(651),m=a(3),d=a(1);function h(e,t){return e.id+(t.pubDate?e.publishdate:e.updatedate)+e.links.alternate.map(e=>e.url).join(" | ")}function p(e){const t=e.url,a=new s.a,n=new XMLHttpRequest,l=new Promise((e,i)=>{n.overrideMimeType("text/xml"),n.open("GET",t,!0),n.onload=function(){if(n.status>=400)return;let s=n.responseURL;s.match(/^(https?|ftp|file):/i)||(s=t);const r=a.parseFeed(n.responseXML,n.responseText,s);"string"==typeof r?i(r):e(r)},n.onreadystatechange=()=>{n.status>=400&&i(n.status)},n.onerror=n.onabort=function(e){i(e)},n.send()}),p=i.a.get(d.kRssSettings);return l.then(a=>{const n=p.findIndex(t=>t.url===e.url);if(-1===n)return Promise.reject("Feed deleted");const i=p[n],s={pubDate:!1};t.match(/^https?:\/\/(\w+\.)?youtube\.com\//i)&&(s.pubDate=!0);const l=a.plaintitle;i.title||(i.title=l),i.path||(i.path=e.url);const d=a.feeditems.map(t=>{return{accountId:m.n,path:e.url,subject:t.plaintitle,raw:t.xmloriginal,sentDate:Object(u.a)(t.updatedate).getTime()||0,messageId:c()(h(t,s)),from:[{name:l,address:l}],replyTo:(n=t.people.author.concat(t.people.contributor,a.people.author,a.people.managingeditor,a.people.webmaster),n.filter(e=>e.email).map(e=>({name:e.name?e.name:e.email,address:e.email}))),to:[],cc:[],flags:[]};var n});return Object(o.a)(i.title,i.path,d).then(()=>{i&&(i.lastChecked=(new Date).valueOf(),r.a.edit(i,n))})}).catch(e=>{console.warn("Failed fetching URL: %s. %o",t,e)})}let b;a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return N})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return _}));async function g(e){const t=(new Date).valueOf(),a=e.filter(e=>{const{refreshInterval:a,lastChecked:n=0,offline:i}=e;return t>=6e4*a+n&&!i});for(const e of a)await p(e)}function N(){g(i.a.get(d.kRssSettings).map(e=>({...e,lastChecked:0})))}function f(){if(!n.d.getIsMailWindow()||i.a.get(d.kMailIsTurnedOff))return;0!==i.a.get(d.kRssSettings).length&&(N(),void 0!==b&&(console.warn("RSSStartup: Did not expect an existing polling interval ID"),clearInterval(b)),b=setInterval(()=>g(i.a.get(d.kRssSettings)),6e4))}function _(){clearInterval(b),b=void 0}},,,,,,,,,,function(e,t,a){"use strict";function n(e){return`<iframe src="${function(e){return`https://www.youtube-nocookie.com/embed/${e}?rel=0`}(e)}" frameborder="0" allowfullscreen></iframe>`}a.d(t,"a",(function(){return n}))},,function(e,t,a){"use strict";var n=a(235),i=a(419),s=a(98);function r(e,t){const a=e[t];return"string"==typeof a?a:""}function o(e,t){if(e.match(/^\s*#/g))return e;try{return new URL(e,t).href}catch(t){return e}}function l(e){try{return new URL(e),!0}catch(e){return!1}}function c(e,t){const a=[...e.attributes].find(e=>e.nodeName.toLowerCase()===t);return a?a.nodeName:""}const u=/^\s*(https?|ftp|file):/i;function m(e,t){if(!(t&&t.match(u)&&l(t)&&e.match(/<[a-z][\w\-:]*[\s\/][^>]*=|<style\b/i)))return e;const a=(new DOMParser).parseFromString(e,"text/html"),n=a.documentElement,i=a.head,s=a.body;if(!(a&&n instanceof Element&&i instanceof Element&&s instanceof Element))return e;const r=e.match(/<html\b/i),o=e.match(/<head\b/i),c=e.match(/<(body|frameset)\b/i),m=n.attributes.length,h=i.attributes.length,p=s.attributes.length,b=i.childNodes.length,g=s.childNodes.length;let N;if(o||h||b||!i.parentNode||i.parentNode.removeChild(i),c||p||g||!s.parentNode||s.parentNode.removeChild(s),r||m)N=a.createElement("div"),N.appendChild(n);else{if(!n.children.length)return e;N=c||p||o||h||b&&g?n:b?i:s}return d(N,t).innerHTML}function d(e,t){if(!t||!t.match(u)||!l(t))return e;const a=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),n=[...e.getElementsByTagName("base")].filter(e=>c(e,"href"));if(n.length){const e=n[0].getAttribute(c(n[0],"href"));if(e&&e.match(u)&&l(e))t=e;else if(e&&!e.match(/^\s*[a-z0-9\-\+\.]+:/i)){const a=o(e,t);!a.match(u)&&l(a)||(t=a)}n.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}const i=a.documentElement;if(!i)return e;const s=a.createElement("base");s instanceof HTMLBaseElement&&(s.href=t,i.appendChild(s));const m=a.importNode(e,!0);i&&i.appendChild(m);const d=[{attr:"action",prop:"action",check:"",pattern:null,replacer:null},{attr:"archive",prop:"",check:"archive",pattern:/([^\s]+)/g,replacer:function(e,a){return o(a,t)}},{attr:"background",prop:"",check:"background",pattern:null,replacer:null},{attr:"cite",prop:"cite",check:"",pattern:null,replacer:null},{attr:"data",prop:"data",check:"",pattern:null,replacer:null},{attr:"formaction",prop:"formAction",check:"",pattern:null,replacer:null},{attr:"longdesc",prop:"longDesc",check:"",pattern:null,replacer:null},{attr:"href",prop:"href",check:"",pattern:null,replacer:null},{attr:"poster",prop:"poster",check:"",pattern:null,replacer:null},{attr:"src",prop:"src",check:"",pattern:null,replacer:null},{attr:"srcset",prop:"",check:"srcset",pattern:/([^,\s]+)(\s+[^,\s]+)/g,replacer:function(e,a,n){return o(a,t)+n}},{attr:"xml:link",prop:"",check:"",pattern:null,replacer:null}],h=m.getElementsByTagName("*");for(let e=0;e<h.length;e++){const n=h[e],s=a.createElement(n.localName.toLowerCase());i.appendChild(s);for(const{attr:e,prop:a,check:i,pattern:l,replacer:u}of d){const m=c(n,e);if(m){const c=n.getAttribute(m)||"";if(s.setAttribute(e,c),l&&u){if(i&&r(s,i)||!i){const e=c.replace(l,u);c!==e&&n.setAttribute(m,e)}}else if(a){const e=r(s,a);e&&(c===e||c.match(/^\s*#/g)||n.setAttribute(m,e))}else if(i&&r(s,i)||!i){const e=o(c,t);c!==e&&n.setAttribute(m,e)}}}const l=function(e,a){return'url("'+o(a,t)+'")'},u=/\burl\("([^"]+)"\)/g,m=c(n,"style");if(m){s.setAttribute("style",n.getAttribute(m)||"");const e=s.style.cssText;if(e){const t=e.replace(u,l);e!==t&&n.setAttribute(m,t)}}if(s instanceof HTMLStyleElement&&n.textContent.length&&s.sheet instanceof CSSStyleSheet){s.textContent=n.textContent;const e=[...s.sheet.cssRules].map(e=>e.cssText).join("\n"),t=e.replace(u,l);e!==t&&(n.textContent=t)}i.removeChild(s)}return e.ownerDocument.adoptNode(m)}function h(){}function p(){this.category=[],this.cloud=[],this.people=new v,this.feeditems=[],this.generator=null,this.haserrors=!1,this.htmlrights="",this.htmldescription="",this.htmltitle="",this.icon=null,this.id="",this.image=null,this.language="",this.lastbuilddate="",this.links=new N,this.plaintitle="",this.pubdate="",this.publishdate="",this.rating="",this.skipdays=new y,this.skiphours=[],this.textinput=[],this.ttl="",this.updated="",this.updatedate="",this.updatefrequency="",this.updateperiod=""}function b(){this.category=[],this.people=new v,this.htmlbody="",this.htmlcontent="",this.htmldescription="",this.htmlrights="",this.htmlsummary="",this.htmltitle="",this.id="",this.links=new N,this.plaintitle="",this.pubdate="",this.publishdate="",this.published="",this.source=null,this.updated="",this.updatedate="",this.xmloriginal=""}function g(){this.description="",this.height="",this.link="",this.title="",this.url="",this.width=""}function N(){this.alternate=[],this.comments=[],this.docs=[],this.enclosure=[],this.next=[],this.prev=[],this.related=[],this.self=[],this.serviceedit=[],this.servicepost=[],this.via=[]}function f(){this.hreflang="",this.bytelength="",this.mimetype="",this.title="",this.url=""}function _(){this.label="",this.scheme="",this.term=""}function v(){this.author=[],this.contributor=[],this.managingeditor=[],this.webmaster=[]}function E(){this.email="",this.name="",this.url=""}function C(){this.name="",this.url="",this.version=""}function w(){this.domain="",this.path="",this.port="",this.protocol="",this.registerprocedure=""}function O(){this.htmldescription="",this.link="",this.name="",this.title=""}function y(){this.sunday=this.monday=this.tuesday=this.wednesday=this.thursday=this.friday=this.saturday=!1}function S(){this.htmltitle="",this.items=[],this.ownername="",this.owneremail="",this.ownerurl="",this.plaintitle="",this.publishdate="",this.updatedate=""}function T(){this.category="",this.created="",this.feedurl="",this.htmldescription="",this.htmltitle="",this.items=[],this.language="",this.pageurl="",this.plaintitle="",this.supported=!0}a.d(t,"a",(function(){return h}));const k="http://www.w3.org/1999/xhtml";function A(e){return(e||"").replace(/^\s+|\s+$/g,"")}function I(e){return(e||"").replace(/^\s*[\r\n]|\s+$/g,"")}function D(e){return document.createElementNS(k,"div").appendChild(document.createTextNode(e)).parentNode.innerHTML}function M(e){const t=document.implementation.createHTMLDocument().createElementNS(k,"div");return t.innerHTML=e,A(t.textContent)}function P(e,t,a){return e.match(/&(#\d+|#x[0-9a-e]+|[a-z][0-9a-z]*);|<[a-z][a-z0-9\-]*\b[^>]*>/i)?m(A(e),U("",t,a)):Object(n.a)(D(I(e)))}function x(e){return e.toLowerCase()}function L(e,t){return A(e||t).toLowerCase()}function j(e){let t="";for(let a=0;a<e.childNodes.length;a++)e.childNodes[a].nodeType!==Node.TEXT_NODE&&e.childNodes[a].nodeType!==Node.CDATA_SECTION_NODE||(t+=e.childNodes[a].nodeValue);return t}function R(e,t,a){for(let n=t.length-1;n>=0;n--)if(t[n]){if(e.hasAttributeNS(t[n],a))return e.getAttributeNS(t[n],a);if(e.namespaceURI===t[n]&&(!n||e.hasAttributeNS("",a)))return e.getAttributeNS("",a);if(!n)return null}else{if(!n&&e.namespaceURI)return null;if(!n||!e.namespaceURI&&e.hasAttributeNS("",a))return e.getAttributeNS("",a)}}function B(e,t,a){for(let n=t.length-1;n>=0;n--)if(t[n]){if(e.hasAttributeNS(t[n],a))return!0;if(e.namespaceURI===t[n]&&(!n||e.hasAttributeNS("",a)))return!!n||e.hasAttributeNS("",a);if(!n)return!1}else{if(!n&&e.namespaceURI)return!1;if(!n||!e.namespaceURI&&e.hasAttributeNS("",a))return!!n||e.getAttributeNS("",a)}}function F(e){try{return new URL(e),!0}catch(e){return!1}}function U(e,t,a){const n=/^[a-z0-9\-\+\.]+:/i;if(e.match(n))return e;const i=/^(https?|ftp|file):/i,s=[e];let r,o=!1;for(;!o&&t.nodeType===Node.ELEMENT_NODE;){if(t.hasAttribute("xml:base")&&(r=A(t.getAttribute("xml:base")),r.length)){const e=r.match(n);o=r.match(i)&&F(r),e&&!o||(s[s.length]=r)}t=t.parentNode}if(!o){if(!a.match(i)||!F(a))return e;s[s.length]=a}for(a=s.pop();void 0!==(r=s.pop());)try{a=new URL(r,a).href}catch(t){return e}return a||(a=e),a}const H=new RegExp("^[\\p{Ps}\\p{Pi}\"'<]+|[\\p{Pe}\\p{Pf}\"'>]+$","ug");h.prototype.parseFeed=function(e,t,a){const r="http://www.w3.org/2005/Atom",o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l="http://purl.org/rss/1.0/",c="http://channel.netscape.com/rdf/simple/0.9/",u="http://purl.org/dc/elements/1.1/";function h(e,t){let a="";const n=new XMLSerializer;e=e.cloneNode(!0);const i=document.createTreeWalker(e,NodeFilter.SHOW_CDATA_SECTION);for(;i.nextNode();)i.currentNode.parentNode.replaceChild(i.currentNode.ownerDocument.createTextNode(i.currentNode.nodeValue),i.currentNode);if(t)for(let t=0;t<e.childNodes.length;t++)a+=n.serializeToString(e.childNodes[t]);else a=n.serializeToString(e).replace(/^<[^>]+>|<[^>]+>$/g,"");return a}function N(e,t,a){if(1===t.length)return e.getElementsByTagNameNS(t[0],a);const n=e.getElementsByTagName("*"),i=[];for(let e=0;e<n.length;e++)n[e].localName===a&&-1!==t.indexOf(n[e].namespaceURI)&&(i[i.length]=n[e]);return i}function v(e,t){const i=L(R(e,J,"type"),"");if(e.children.length){if(e.children.length>1||e.children[0]!==(e.getElementsByTagNameNS(k,"div")[0]||e.getElementsByTagNameNS(e.namespaceURI,"div")[0])||function(e){for(let t=0;t<e.childNodes.length;t++)if(e.childNodes[t].nodeType===Node.TEXT_NODE&&e.childNodes[t].nodeValue.replace(/^\s+|\s+$/g,"")||e.childNodes[t].nodeType===Node.CDATA_SECTION_NODE)return!0;return!1}(e)){return h(d(e,U("",e,a)))}return h(d(e.children[0],U("",e.children[0],a)),e.children[0].namespaceURI===k)}if("html"===i||"text/html"===i||"xhtml"===i||i.match(/^application\/.*\+xml$/))return m(A(j(e)),U("",e,a));if(i&&"text"!==i&&!i.match(/^text\/plain$/)&&i.match(/^[\-\w]+\/[\-\w\+]+$/)){if(t){const a=new f;a.url="data:"+i+";base64,"+A(j(e)).replace(/\s+/g,""),a.mimetype=i,T(a,t)}return""}return Object(n.a)(D(I(j(e))))}function y(e){if(e.children.length){return h(d(e,U("",e,a)))}return P(j(e),e,a)}function S(e){const t=new g;if(e.children.length){for(let n,i,s=0;s<e.children.length;s++)if(n=e.children[s],i=x(n.localName),-1!==J.indexOf(n.namespaceURI))if("url"===i||"link"===i){const e=A(j(n));e&&(t[i]=U(e,n,a))}else if("feedlink"===i){const e=A(j(n));e&&(t.link=U(e,n,a))}else"title"===i||"feedtitle"===i?t.title=A(j(n)):"description"!==i&&"width"!==i&&"height"!==i||(t[i]=A(j(n)))}else{const n=A(j(e));n&&(t.url=U(n,e,a))}return t}function T(e,t){const a=t.find(t=>t.url===e.url&&t.title===e.title&&t.hreflang===e.hreflang);a?(!a.mimetype&&e.mimetype&&(a.mimetype=e.mimetype),!a.bytelength&&e.bytelength&&(a.bytelength=e.bytelength)):t[t.length]=e}function F(e,t){let n,i;if("enclosure"===e.localName||"comments"===e.localName||"docs"===e.localName?n=e.localName:"source"===e.localName||"feedsource"===e.localName?n="via":"relation"===e.localName?n="related":(n=L(R(e,J,"rel"),"alternate"),n=n.replace(/\W/g,"")),"source"!==e.localName&&"feedsource"!==e.localName&&e.childNodes.length?i=A(j(e)):B(e,J,"href")?i=A(R(e,J,"href")):B(e,J,"url")?i=A(R(e,J,"url")):e.namespaceURI===u&&(i=A(j(e))),i&&n&&t.links.hasOwnProperty(n)){const s=new f;s.url=U(i,e,a),"source"===e.localName||"feedsource"===e.localName?s.title=A(j(e)):s.title=A(R(e,J,"title")),s.mimetype=A(R(e,J,"type")),s.hreflang=A(R(e,J,"hreflang")),s.bytelength=A(R(e,J,"length")),T(s,t.links[n])}}function V(e){const t=new _,a=A(j(e));return a.length?(t.label=t.term=a,t.scheme=A(R(e,J,"domain"))):(t.term=A(R(e,J,"term")),t.label=A(R(e,J,"label")||t.term),t.scheme=A(R(e,J,"scheme"))),t}function W(e){const t=new C;t.name=A(j(e));const n=A(R(e,J,"uri"));return n&&(t.url=U(n,e,a)),t.version=A(R(e,J,"version")),t}function z(e){let t;if(e.children.length){t=new E;for(let n,i,s=0;s<e.children.length;s++)if(n=e.children[s],i=x(n.localName),-1!==J.indexOf(n.namespaceURI)){if("name"===i||"email"===i)t[i]=A(j(n));else if("uri"===i){const e=A(j(n));e&&(t.url=U(e,n,a))}}else if("http://xmlns.com/foaf/0.1"===n.namespaceURI)if("name"===i)t[i]=A(j(n));else if("homepage"===i){const e=A(n.getAttributeNS(o,"resource"));e&&(t.url=U(e,n,a))}else"mbox"===i&&(t.email=A(n.getAttributeNS(o,"resource")).replace(/^[a-z]+:/i,""))}else{const a=A(j(e));Object(s.d)(a)?(t=new E,t.email=a):t=G(null,a)}return t}function G(e,t){const a=new E,n=e?j(e):t;a.name=A(n.replace(/[\s<(]*(mailto\s*:\s*)?[^\s<>():,@]+@[^\s<>():,@]+[\s>)]*/i," ")).replace(H,"");const i=n.match(/[^\s<>():,@]+@[^\s<>():,@]+/);return i&&(a.email=i[0].replace(/^"([^\"]*)"$/,"$1")),a}function K(e){const t=new w;return t.domain=A(R(e,J,"domain")),t.port=A(R(e,J,"port")),t.path=A(R(e,J,"path")),t.registerprocedure=A(R(e,J,"registerProcedure"))||A(R(e,J,"registerprocedure")),t.protocol=A(R(e,J,"protocol")),t}function Y(e){const t=new O;for(let n,i,s=0;s<e.children.length;s++)if(n=e.children[s],i=x(n.localName),-1!==J.indexOf(n.namespaceURI))if("description"===i)t.htmldescription=y(n);else if("title"===i||"feedtitle"===i)t.title=A(j(n));else if("name"===i)t.name=A(j(n));else if("link"===i||"feedlink"===i){const e=A(j(n));e&&(t.link=U(e,n,a))}return t}function $(e,t){for(let a,n,i=0;i<e.children.length;i++)a=e.children[i],-1!==J.indexOf(a.namespaceURI)&&"day"===x(a.localName)&&(n=A(j(a)).toLowerCase(),t.hasOwnProperty(n)&&(t[n]=!0))}function X(e,t){for(let a,n,i=0;i<e.children.length;i++)a=e.children[i],-1!==J.indexOf(a.namespaceURI)&&"hour"===x(a.localName)&&(n=A(j(a)).toLowerCase(),n.match(/^\d+$/)&&1*n<24&&1*n>=0&&(t[n]=!0))}function Z(t){const n=new XMLSerializer;let i=n.serializeToString(t);const s=/^([^>]+)\sxmlns="http:\/\/www.w3.org\/1999\/xhtml"/;if(q&&(i=i.replace(/<(\/?)feed(source|link|image|title)\b/g,"<$1$2"),i=i.replace(s,"$1")),!ee.contains(t)){let e=n.serializeToString(ee.cloneNode(!1));q&&(e=e.replace(s,"$1")),i=`${e}${i}`}for(;t&&t.parentNode!==e;){const r=(t=t.parentNode).cloneNode(!1),o=U("",t,a);r.setAttribute("xml:base",o),q&&t!==ee&&t!==e.documentElement&&t.hasAttribute("xmlns")&&r.removeAttribute("xmlns");let l=n.serializeToString(r);l=l.replace(/^<([\w\-:]+)\b([^>]*)\/>$/,"<$1$2></$1>"),q&&(l=l.replace(s,"$1")),l=l.split("></"),i=l[0]+">"+i+"</"+l[1]}return i}function Q(t){const a=new p;for(let e,n,i=0;i<t.children.length;i++)e=t.children[i],n=x(e.localName),-1!==J.indexOf(e.namespaceURI)?"id"===n?a[n]=A(j(e)):"image"===n||"feedimage"===n?e.children.length&&(a.image=S(e)):"logo"===n?a.image=S(e):"icon"===n?a[n]=S(e):"generator"===n?a[n]=W(e):"title"===n||"feedtitle"===n?("channel"===t.localName?a.htmltitle=y(e):a.htmltitle=v(e),a.plaintitle=M(a.htmltitle)):"rights"===n?a.htmlrights=v(e):"subtitle"===n?a.htmldescription=v(e):"copyright"===n?a.htmlrights=y(e):"description"===n?a.htmldescription=y(e):"updated"===n||"lastbuilddate"===n||"pubdate"===n||"rating"===n||"language"===n?a[n]=A(j(e)):"ttl"===n?a[n]=A(j(e)):"category"===n?a[n][a[n].length]=V(e):"link"===n||"feedlink"===n||"docs"===n?F(e,a):"cloud"===n?a[n][a[n].length]=K(e):"author"===n||"contributor"===n||"managingeditor"===n||"webmaster"===n?a.people[n][a.people[n].length]=z(e):"textinput"===n?e.children.length&&(a[n][a[n].length]=Y(e)):"skipdays"===n?$(e,a[n]):"skiphours"===n&&X(e,a[n]):"http://purl.org/rss/1.0/modules/syndication/"===e.namespaceURI?"updateperiod"!==n&&"updatefrequency"!==n||(a[n]=A(j(e)).toLowerCase()):e.namespaceURI===u&&("title"===n?(a.htmltitle=y(e),a.plaintitle=M(a.htmltitle)):"description"===n?a.htmldescription=y(e):"date"===n?a.pubdate=A(j(e)):"language"===n?a[n]=A(j(e)):"rights"===n?a.htmlrights=y(e):"subject"===n?a.category[a.category.length]=V(e):"source"===n||"relation"===n?F(e,a):"publisher"===n?a.people.managingeditor[a.people.managingeditor.length]=G(e):"creator"===n?a.people.author[a.people.author.length]=G(e):"contributor"===n&&(a.people[n][a.people[n].length]=G(e)));if(!a.language){const n=x(t.localName);"source"===n||"feedsource"===n?t.hasAttribute("xml:lang")&&(a.language=A(t.getAttribute("xml:lang"))):e.documentElement.hasAttribute("xml:lang")&&(a.language=A(e.documentElement.getAttribute("xml:lang")))}if(a.publishdate=a.pubdate||a.updated||a.lastbuilddate,a.updatedate=a.lastbuilddate||a.updated||a.pubdate,a.ttl.match(/^\d+$/))a.ttl=parseInt(a.ttl)||"";else if(a.updateperiod||a.updatefrequency){let e;e=a.updatefrequency.match(/^\d+$/)&&parseInt(a.updatefrequency)||1;const t={hourly:60,daily:1440,weekly:10080,monthly:306600,yearly:3679200};t.hasOwnProperty(a.updateperiod)?a.ttl=Math.round(t[a.updateperiod]/e):a.ttl=Math.round(t.daily/e)}else a.ttl="";return a}let q=!1;if("string"!=typeof t)return"HTMLStringNotString";if("string"!=typeof a)return"FeedURLNotString";if(!e||e.getElementsByTagNameNS(k,"parsererror").length){if(t&&t.match(/^\w*</)&&(t.match(/<[\w\-:]+[^>]*>/g)||[]).length>3&&(t.match(/<\/[\w\-:]+>/g)||[]).length>3){for(;t.match(/<(source|link|image|title)\b(([^\/>]|\/[^>])*>[^<]*((?!<\1\b([^\/>]|\/[^>])*>)<[^<]*)*?)<\/\1>/i);)t=t.replace(/<(source|link|image|title)\b(([^\/>]|\/[^>])*>[^<]*((?!<\1\b([^\/>]|\/[^>])*>)<[^<]*)*?)<\/\1>/gi,"<feed$1$2</feed$1>");t="<!doctype html><html><head><title></title></head><body>"+(t=(t=t.replace(/<(\w+:link|\w+:category|category|\w+:cloud|cloud|\w+:enclosure|enclosure)\b([^>]*)\/>/gi,"<$1$2></$1>")).replace(/<!\[CDATA\[([\w\W]*?)\]\]>/gi,(e,t)=>D(t)))+"</body></html>",e=(new DOMParser).parseFromString(t,"text/html"),q=!0}if(!e||e.getElementsByTagNameNS(k,"parsererror").length)return"NoDocumentNode";e.body&&((e=e.body).documentElement=e.children[0])}if(!e.documentElement)return"NoDocumentElement";const J=[e.documentElement.namespaceURI];let ee;if(J[0]||"feed"!==e.documentElement.localName?J[0]===o&&(J[1]=l,J[2]=c):J[1]=r,ee="feed"===e.documentElement.localName?e.documentElement:N(e.documentElement,J,"channel")[0],!ee)return"NoChannelElement";-1===J.indexOf(r)&&J.unshift(r),-1===J.indexOf(l)&&J.unshift(l),-1===J.indexOf(c)&&J.unshift(c);const te=Q(ee);if(te.haserrors=q,e.documentElement!==ee&&e.documentElement.children.length>1)for(let t,a,n=0;n<e.documentElement.children.length;n++)t=e.documentElement.children[n],a=x(t.localName),-1!==J.indexOf(t.namespaceURI)&&("image"===a||"feedimage"===a?te.image=S(t):"textinput"===a&&(te[a][te[a].length]=Y(t)));let ae;ae="feed"===ee.localName?N(e,J,"entry"):N(e,J,"item");for(let e=0;e<ae.length;e++){let t=!1;te.feeditems[e]=new b;for(let a,s,r=0;r<ae[e].children.length;r++)if(a=ae[e].children[r],s=x(a.localName),-1!==J.indexOf(a.namespaceURI))"link"===s||"feedlink"===s||"enclosure"===s||"comments"===s?F(a,te.feeditems[e]):"title"===s||"feedtitle"===s?("item"===a.parentNode.localName?te.feeditems[e].htmltitle=y(a):te.feeditems[e].htmltitle=v(a),te.feeditems[e].plaintitle=M(te.feeditems[e].htmltitle)):"summary"===s||"rights"===s?te.feeditems[e]["html"+s]=v(a):"content"===s?te.feeditems[e].htmlcontent=v(a,te.feeditems[e].links.enclosure):"description"===s?t?te.feeditems[e].htmlsummary=y(a):te.feeditems[e].htmldescription=y(a):"author"===s||"contributor"===s?te.feeditems[e].people[s][te.feeditems[e].people[s].length]=z(a):"category"===s?te.feeditems[e][s][te.feeditems[e][s].length]=V(a):"id"===s||"published"===s||"updated"===s||"pubdate"===s?te.feeditems[e][s]=A(j(a)):"guid"===s?(te.feeditems[e].id=A(j(a)),"false"!==L(R(a,J,"isPermaLink"),"")&&"false"!==L(R(a,J,"ispermalink"),"")&&F(a,te.feeditems[e])):"source"!==s&&"feedsource"!==s||("item"===a.parentNode.localName?F(a,te.feeditems[e]):te.feeditems[e].source=Q(a));else if(a.namespaceURI===u)"title"===s?(te.feeditems[e].htmltitle=y(a),te.feeditems[e].plaintitle=M(te.feeditems[e].htmltitle)):"description"===s?te.feeditems[e].htmldescription=y(a):"date"===s?te.feeditems[e].pubdate=A(j(a)):"rights"===s?te.feeditems[e].htmlrights=y(a):"subject"===s?te.feeditems[e].category[te.feeditems[e].category.length]=V(a):"identifier"===s?(te.feeditems[e].id||(te.feeditems[e].id=A(j(a))),F(a,te.feeditems[e])):"source"===s||"relation"===s?F(a,te.feeditems[e]):"publisher"===s||"creator"===s?te.feeditems[e].people.author[te.feeditems[e].people.author.length]=G(a):"contributor"===s&&(te.feeditems[e].people[s][te.feeditems[e].people[s].length]=G(a));else if("http://purl.org/rss/1.0/modules/content/"===a.namespaceURI)"encoded"===s&&(t||te.feeditems[e].htmlsummary||(te.feeditems[e].htmlsummary=te.feeditems[e].htmldescription),t=!0,te.feeditems[e].htmldescription=j(a));else if("http://search.yahoo.com/mrss/"===a.namespaceURI)switch(s){case"group":{var ne;const t=null===(ne=a.getElementsByTagName("media:description")[0])||void 0===ne?void 0:ne.innerHTML;if(t){const a=Object(n.a)(t);te.feeditems[e].htmldescription+=`<div class="preformatted">${a}</div>`}const i=a.getElementsByTagName("media:thumbnail")[0];if(i){const t=new g;t.url=i.getAttribute("url"),t.width=i.getAttribute("width"),t.height=i.getAttribute("height"),te.feeditems[e].links.enclosure.push(t)}break}}else if("http://www.youtube.com/xml/schemas/2015"===a.namespaceURI)switch(s){case"videoid":te.feeditems[e].htmldescription+=(ie=a.innerHTML,`<div class="video-wrapper">${Object(i.a)(ie)}</div>`)}else if("http://www.itunes.com/dtds/podcast-1.0.dtd"===a.namespaceURI)switch(s){case"author":case"block":case"category":case"duration":case"email":case"explicit":break;case"image":{const t=new g;t.url=a.getAttribute("href"),te.feeditems[e].links.enclosure.push(t);break}}te.feeditems[e].publishdate=te.feeditems[e].published||te.feeditems[e].pubdate||te.feeditems[e].updated,te.feeditems[e].updatedate=te.feeditems[e].updated||te.feeditems[e].pubdate||te.feeditems[e].published,te.feeditems[e].htmlbody=te.feeditems[e].htmlcontent||te.feeditems[e].htmldescription||te.feeditems[e].htmlsummary,te.feeditems[e].xmloriginal=Z(ae[e])}var ie;return te},h.prototype.parseOPML=function(e,t){function a(e,i){for(let s,r,o=0;o<e.children.length;o++)if(s=e.children[o],r=x(s.localName),-1!==n.indexOf(s.namespaceURI)&&"outline"===r&&"true"!==L(R(s,n,"isComment"),"")){const e=new T;if(-1!==["rss","atom"].indexOf(L(R(s,n,"type"),""))&&(e.feedurl=A(R(s,n,"xmlUrl")),e.feedurl)){e.feedurl=U(e.feedurl,s,t),e.created=A(R(s,n,"created")),e.htmldescription=P(R(s,n,"description")||"",s,t),e.language=A(R(s,n,"language")),e.pageurl=A(R(s,n,"htmlUrl"))||A(R(s,n,"url")),e.pageurl&&(e.pageurl=U(e.pageurl,s,t));const a=L(R(s,n,"version"),"");e.supported=Boolean(!a||a.match(/^(rss\d*|atom\s*[\d\.]*)$/i))}if(B(s,n,"category")?e.category=A(R(s,n,"category")):e.category=i.category||"",s.children.length&&a(s,e),e.feedurl||e.items.length){i.items[i.items.length]=e;const a=A(R(s,n,"text")),r=A(R(s,n,"title"));a&&r&&a!==r?(e.htmltitle=P(a.length<=r.length?a:r,s,t),e.htmldescription||(e.htmldescription=P(a.length<=r.length?r:a,s,t))):e.htmltitle=P(a||r,s,t)||D(e.feedurl),e.plaintitle=M(e.htmltitle)}}}const n=[null,"","http://opml.org/spec2"];if("string"!=typeof t)return"FeedURLNotString";if(!e||e.getElementsByTagNameNS(k,"parsererror").length)return"NoDocumentNode";if(!e.documentElement)return"NoDocumentElement";if("opml"!==e.documentElement.localName&&"outlineDocument"!==e.documentElement.localName||-1===n.indexOf(e.documentElement.namespaceURI))return"WrongDocumentElement";const i=new S;for(let s,r,o=0;o<e.documentElement.children.length;o++)if(s=e.documentElement.children[o],-1!==n.indexOf(e.documentElement.namespaceURI))if(r=x(s.localName),"head"===r){for(let e,a,r=0;r<s.children.length;r++)if(e=s.children[r],-1!==n.indexOf(e.namespaceURI))if(a=x(e.localName),"title"===a)i.htmltitle=P(j(e),e,t),i.plaintitle=M(i.htmltitle);else if("ownername"===a||"owneremail"===a)i[a]=A(j(e));else if("datecreated"===a)i.publishdate=A(j(e));else if("datemodified"===a)i.updatedate=A(j(e));else if("ownerid"===a){const a=A(j(e));a&&(i.ownerurl=U(a,e,t))}}else"body"===r&&a(s,i);return i}},,,,,,,,,function(e,t,a){"use strict";var n=a(90),i=a(0),s=a.n(i),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ConfirmationDlg.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends s.a.Component{constructor(...e){super(...e),o(this,"onRequestClose",()=>{this.props.onRequestClose?this.props.onRequestClose():this.props.onClose(!1)}),o(this,"onClose",()=>{this.props.onClose(!1)}),o(this,"onConfirmed",()=>{this.props.onClose(!0)})}render(){return s.a.createElement(n.a,{viewMode:"slide",dialogWidth:this.props.dialogWidth||400,onRequestClose:this.onRequestClose,__source:{fileName:r,lineNumber:35,columnNumber:7}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:r,lineNumber:39,columnNumber:9}},s.a.createElement("h1",{className:"dialog-title",__source:{fileName:r,lineNumber:40,columnNumber:11}},this.props.title)),s.a.createElement("div",{className:"dialog-content",__source:{fileName:r,lineNumber:42,columnNumber:9}},this.props.prompt),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:r,lineNumber:43,columnNumber:9}},s.a.createElement("input",{type:"button",className:"primary",value:this.props.positive,onClick:this.onConfirmed,autoFocus:!0,__source:{fileName:r,lineNumber:44,columnNumber:11}}),!this.props.hideNegative&&s.a.createElement("input",{type:"button",value:this.props.negative,onClick:this.onClose,__source:{fileName:r,lineNumber:46,columnNumber:40}})))}}t.a=l},,function(e,t,a){"use strict";var n=a(45),i=a.n(n),s=a(0),r=a.n(s),o=a(25),l=a(2),c=a(234),u=a(261),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorPicker.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends s.Component{constructor(e){super(e),d(this,"handleClickOutside",e=>{this.props.hide(this.props.name,e)}),d(this,"_abort",()=>{this.props.setColor(i()(this.state.originalColor),this.props.name),this.props.hide(this.props.name)}),d(this,"getColorFromPlot",e=>{const t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,s=(t.height-n)/t.height,r=a/t.width;r>1||r<0||s>1||s<0?this.setState({dragging:!1}):this.setState({s:r,v:s},()=>{const e=i.a.hsv(this.state.h,r,s);this.props.setColor(e,this.props.name,!0)})}),d(this,"startPlotMove",e=>{this.getColorFromPlot(e),this.setState({dragging:!0})}),d(this,"plotMove",e=>{this.state.dragging&&this.getColorFromPlot(e)}),d(this,"stopPlotMove",()=>{this.setState({dragging:!1})}),d(this,"onPlotRecticleKeyDown",e=>{if("Enter"===e.key||"Tab"===e.key&&e.shiftKey)return this.props.hide(this.props.name),void e.preventDefault();if("Escape"===e.key)return e.preventDefault(),void this._abort();if("ArrowUp"===e.key||"ArrowRight"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key){e.preventDefault();const t=e.shiftKey?10:1;let a=this.state.s,n=this.state.v;if("ArrowUp"===e.key?n+=.01*t:"ArrowDown"===e.key?n-=.01*t:"ArrowRight"===e.key?a+=.01*t:"ArrowLeft"===e.key&&(a-=.01*t),a>1||a<0||n>1||n<0)return;this.setState({s:a,v:n},()=>{const e=i.a.hsv(this.state.h,a,n);this.props.setColor(e,this.props.name)})}}),d(this,"onHueSliderChange",e=>{this.setState({h:e.currentTarget.value},()=>{const e=i.a.hsv(this.state.h,this.state.s,this.state.v);this.props.setColor(e,this.props.name)})}),d(this,"onSystemPickerChange",e=>{const t=i()(e.currentTarget.value);this.setState({h:t.get("hsv.h"),s:t.get("hsv.s"),v:t.get("hsv.v")},()=>{this.props.setColor(t,this.props.name,!0)})}),d(this,"onSystemPickerKeyDown",e=>{"Escape"===e.key?(e.preventDefault(),this._abort()):"Tab"!==e.key||e.shiftKey||this.props.hide(this.props.name)});const t=i()(this.props.color),a=t.get("hsv.h");this.state={dragging:!1,originalColor:this.props.color,h:Number.isNaN(a)?0:a,s:t.get("hsv.s"),v:t.get("hsv.v")}}componentDidMount(){this.context.addEventListener("mouseup",this.stopPlotMove),this.refs.reticle.focus()}shouldComponentUpdate(e,t){if(!Object(u.default)(this.state,t))return!0;if(this.props.name!==e.name)return!0;if(this.props.color!==e.color){const t=i.a.hsv(this.state.h,this.state.s,this.state.v);if(!Object(u.default)(t.hex(),e.color))return!0}return!1}componentWillUnmount(){this.context.removeEventListener("mouseup",this.stopPlotMove)}render(){if(!this.props.name||!this.props.color)return null;const e=i.a.hsv(this.state.h,this.state.s,this.state.v),t=128-128*this.state.v,a=`translateX(${128*this.state.s}px)`+`translateY(${t}px)`;return(s.createElement("div",{className:`colorpicker ignore-onclickoutside-${this.props.name}`,__source:{fileName:m,lineNumber:206,columnNumber:7}},s.createElement("div",{className:"colorpicker-plot",onMouseDown:this.startPlotMove,onMouseMove:this.plotMove,style:{backgroundColor:i.a.hsv(this.state.h,1,1).hex()},__source:{fileName:m,lineNumber:207,columnNumber:9}},s.createElement("button",{type:"button",ref:"reticle",className:"colorpicker-plot-reticle",onKeyDown:this.onPlotRecticleKeyDown,style:{transform:a},__source:{fileName:m,lineNumber:211,columnNumber:11}})),s.createElement("input",{type:"range",className:"rangeHue",min:0,max:359,value:this.state.h,onMouseDown:this.onHueSliderChange,onChange:this.onHueSliderChange,__source:{fileName:m,lineNumber:218,columnNumber:9}}),s.createElement("input",{type:"color",title:Object(l.a)("Show system color picker"),className:"colorpicker-system",value:e.hex(),onKeyDown:this.onSystemPickerKeyDown,onChange:this.onSystemPickerChange,__source:{fileName:m,lineNumber:226,columnNumber:9}})))}}d(h,"contextType",o.a);var p=Object(c.a)(h),b=a(807),g=a(20),N=a.n(g),f=a(284),_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorEditor.jsx";function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E=/^([0-9a-f]{3}){1,2}$/i;class C extends r.a.Component{constructor(e){super(e),v(this,"createColorIcon",e=>`<svg width="16" height="16" viewBox="0 0 16 16">\n      <rect x="0" y="0" width="16" height="16" rx="2" ry="2" fill="${e}" />\n    </svg>`),v(this,"hexInputEvents",e=>{let t=e.currentTarget.value;if("#"===t.charAt(0)&&(t=t.substring(1)),t.length>6&&(t=t.substring(0,6)),this.setState({color:t}),6===t.length){const e=i()(t);e&&this.props.setColor(e,this.props.colorKey)}}),v(this,"toggleColorPicker",()=>{this.setState(e=>(this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!e.isPickerVisible),{isPickerVisible:!e.isPickerVisible}))}),v(this,"hideColorPicker",(e,t)=>{t.target!==this.refs.colorToggle&&(t.stopPropagation(),this.setState({isPickerVisible:!1}),this.refs.colorToggle.focus(),this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!1))}),v(this,"onColorPicked",(e,t,a=!1)=>{this.setState({color:e.hex().substring(1)}),a?this.debouncedSetColor(e,t):this.props.setColor(e,t)}),v(this,"onDropdownColorSelected",e=>{const t=i()(e);t&&(this.setState({color:t.hex().substring(1)}),this.props.setColor(t,this.props.colorKey))}),this.state={isPickerVisible:!1,color:e.colorValue.substring(1)},this.debouncedSetColor=Object(f.a)(this.props.setColor,100,{leading:!1}),e.predefinedColors&&(this.dropdownColors=e.predefinedColors.map(e=>({type:"Normal",name:e.name,iconSVG:this.createColorIcon(e.value),noPrettifying:!0,id:e.value})))}componentWillUnmount(){this.props.onToggleColorPicker&&this.props.onToggleColorPicker(!1)}render(){const e=this.props.colorKey,t=this.props.predefinedColors&&this.props.predefinedColors.length>0;let{color:a}=this.state;return E.test(a)||(a=this.props.colorValue.replace("#","")),r.a.createElement("div",{className:N()("ColorEditor",{"with-dropdown":t}),__source:{fileName:_,lineNumber:142,columnNumber:7}},this.props.label&&r.a.createElement("label",{htmlFor:e,className:"color-name",__source:{fileName:_,lineNumber:146,columnNumber:11}},this.props.label),r.a.createElement("div",{className:"ColorEditor-ColorPickerContainer",__source:{fileName:_,lineNumber:151,columnNumber:9}},r.a.createElement("button",{type:"button",className:"color-preview",disabled:this.props.disabled,tabIndex:0,ref:"colorToggle",onClick:this.toggleColorPicker,style:{backgroundColor:`#${a}`},__source:{fileName:_,lineNumber:152,columnNumber:11}}),this.state.isPickerVisible&&r.a.createElement(p,{key:e,name:e,color:`#${a}`,setColor:this.onColorPicked,hide:this.hideColorPicker,__source:{fileName:_,lineNumber:163,columnNumber:13}}),t&&r.a.createElement(b.a,{className:"ColorEditor-VivaldiDropdown",disabled:this.props.disabled,items:this.dropdownColors,onValueChange:this.onDropdownColorSelected,tooltip:Object(l.a)("Choose a Color"),value:a,hideButtonText:!0,__source:{fileName:_,lineNumber:172,columnNumber:13}})),r.a.createElement("div",{className:"ColorEditor-HexTextInput",__source:{fileName:_,lineNumber:184,columnNumber:9}},r.a.createElement("span",{className:"ColorEditor-HexTextInput-Octothorpe",__source:{fileName:_,lineNumber:185,columnNumber:11}},"#"),r.a.createElement("input",{className:"ColorEditor-HexTextInput-InputField",type:"text",id:e,disabled:this.props.disabled,value:this.state.color,spellCheck:"false",onChange:this.hexInputEvents,__source:{fileName:_,lineNumber:186,columnNumber:11}})))}}t.a=C},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n=e=>e.replace(/\\\\|\\;|\\,|\\[Nn]/g,e=>{switch(e){case"\\\\":return"\\";case"\\;":return";";case"\\,":return",";case"\\n":case"\\N":return"\n";default:return e}}),i=e=>e.replace(/\\|;|,|\n/g,e=>{switch(e){case"\\":return"\\\\";case";":return"\\;";case",":return"\\,";case"\n":case"N":return"\\n";default:return e}});function s(e,t,a){let n=!1;if(a&&a<2)return[e];a=a||1/0;const i=[0];for(let s=0;s<e.length;s++){const r=e[s];if('"'===r)0!==s&&"\\"===e[s-1]||(n=!n);else if(r===t&&!n&&(i.push(s+1),i.length>=a))break}return 1===i.length?[e]:i.map((t,a)=>{const n=i[a+1];return e.slice(t,n?n-1:n)})}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(285),i=a(6),s=a(436),r=a(12),o=a(484),l=a(7),c=a(1);class u{static init(){l.a.tabsPrivate.onShowTranslationUI.addListener((e,t,a,n)=>{r.a.dispatch({actionType:"VIVALDI_TABS_TRANSLATION_PROGRESS",tabId:e,translateStep:t,error:a,autoTranslate:n})}),u.dispatchLanguageChanges(),i.a.addListener(c.kVivaldiTranslateLanguageList,()=>{u.dispatchLanguageChanges()})}static dispatchLanguageChanges(){const e=i.a.get(c.kVivaldiTranslateLanguageList);e.length>0&&r.a.dispatch({actionType:"VIVALDI_SET_SERVER_LANGUAGES",languages:e})}static setDeterminedLanguage(e,t){r.a.dispatch({actionType:"VIVALDI_TABS_LANGUAGE_DETERMINED",tabId:e,pageLanguage:t})}static setPageTranslated(e,t){r.a.dispatch({actionType:"VIVALDI_TABS_PAGE_TRANSLATED",tabId:e,message:t})}static revertTranslation(e){r.a.dispatch({actionType:"VIVALDI_TABS_PAGE_TRANSLATED_REVERT",tabId:e})}static resetTranslationParameters(e){r.a.dispatch({actionType:"PAGE_RESET_TRANSLATION_PARAMETERS",tabId:e})}static async translatePage(e){let t=Object(o.a)();t=t.substring(0,2);const a=n.a.getTranslationCode(t),i=s.a.getPageState(e);a&&i&&await l.a.tabsPrivate.translatePage(e,i.pageLanguage?i.pageLanguage:"auto",a)}}},function(e,t,a){"use strict";a(53);var n=a(143),i=a.n(n),s=a(12),r=a(99),o=a(26);class l extends i.a{getInitialState(){return{pageState:new o.Map,serverLanguages:["en","ko","no","tr","zh-Hant","nl","sv","ur","fa","hu","is","ar","fi","id","ja","pt","uk","pl","ru","zh-Hans","cs","es","hi","de","fr","it"].sort()}}reduce(e,t){switch(t.actionType){case"VIVALDI_TABS_LANGUAGE_DETERMINED":return Object(r.a)(e,e=>{const{tabId:a,pageLanguage:n}=t;e=function(e,t,a){const n=e.pageState.get(t);if(n)return n.pageLanguage=a,e.pageState=e.pageState.set(t,n),e;{const n={pageLanguage:a,translateStep:"idle"};return e.pageState=e.pageState.set(t,n),e}}(e,a,n)});case"VIVALDI_TABS_PAGE_TRANSLATED":return Object(r.a)(e,e=>{const{tabId:a}=t,{isTranslated:n,originalLang:i,translatedLang:s,error:r}=t.message;e=function(e,t,a,n,i,s){a&&"no_error"!==s&&(a=!1);let r=e.pageState.get(t);if(r)r={...r,originalLang:n,translatedLang:i,isTranslated:a,error:s},e.pageState=e.pageState.set(t,r);else{const r={originalLang:n,translatedLang:i,isTranslated:a,error:s,translateStep:"idle"};e.pageState=e.pageState.set(t,r)}return e}(e,a,n,i,s,r)});case"PAGE_CLOSE":return Object(r.a)(e,e=>{e=function(e,t){const a=e;return t.forEach(e=>{a.pageState.has(e.id)&&(a.pageState=a.pageState.remove(e.id))}),a}(e,t.pages)});case"VIVALDI_SET_SERVER_LANGUAGES":return Object(r.a)(e,e=>{e=function(e,t){return e.serverLanguages=t,e}(e,t.languages)});case"PAGE_RESET_TRANSLATION_PARAMETERS":return Object(r.a)(e,e=>{e=function(e,t){const a=e;a.pageState.has(t)&&(a.pageState=a.pageState.remove(t));return a}(e,t.tabId)});case"VIVALDI_TABS_PAGE_TRANSLATED_REVERT":return Object(r.a)(e,e=>{e=function(e,t){let a=e.pageState.get(t);if(a)a={...a,isTranslated:!1},e.pageState=e.pageState.set(t,a);else{const a={isTranslated:!1,translateStep:"idle"};e.pageState=e.pageState.set(t,a)}return e}(e,t.tabId)});case"VIVALDI_TABS_TRANSLATION_PROGRESS":return Object(r.a)(e,e=>{e=function(e,t,a,n,i){let s=e.pageState.get(t);if(s)s={...s,translateStep:a,error:n,autoTranslate:i},e.pageState=e.pageState.set(t,s);else{const s={isTranslated:!1,translateStep:a,error:n,autoTranslate:i};e.pageState=e.pageState.set(t,s)}return e}(e,t.tabId,t.translateStep,t.error,t.autoTranslate)})}return e}isTranslated(e){const t=this.getState().pageState.get(e);return!!t&&Boolean(t.isTranslated)}getPageState(e){return this.getState().pageState.get(e)||{pageLanguage:"",translateStep:"idle"}}}t.a=new l(s.a)},,,function(e,t,a){"use strict";var n=a(11),i=a(6),s=a(10),r=a(26),o=a(1),l=a(350);t.a=function(e,t){s.a.tabs.query({},a=>{const s=Object(r.Set)(a.map(e=>JSON.parse(e.extData||"{}").group).filter(Boolean)),c=i.a.get(o.kTabsStackingNameMap)||{},u=Object(l.default)(c,(e,t)=>s.includes(t));t?u[e]=t:delete u[e],n.a.set(o.kTabsStackingNameMap,u)})}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return l}));var n=a(14),i=a(13),s=a(7),r=a(46);const o=["ad_blocking","tracking"],l=(e,t,a,s)=>{const r={tracking:{process:!1,exempt:!1},ad_blocking:{process:!1,exempt:!1}};if(parseInt(t)!==s)switch(t){case"0":r.tracking.exempt=!0,r.ad_blocking.exempt=!0;break;case"1":r.tracking.process=!0,r.ad_blocking.exempt=!0;break;case"2":r.tracking.process=!0,r.ad_blocking.process=!0}Object.keys(r).forEach(t=>{r[t].process?m(e,t,"process_list"):d(e,t,"process_list"),r[t].exempt?m(e,t,"exempt_list"):d(e,t,"exempt_list")}),a&&n.a.reloadPage(i.c.unsafeGetActivePage().get("id"))},c=(e,t)=>{if(Object(r.j)(e))return;const{hostname:a}=new URL(e);s.a.contentBlocking.getAllExceptionLists(e=>{let n=0;o.forEach(t=>{e[t].process_list.find(e=>{a.includes(e)&&n++})});let i="0";switch(t){case"ad_blocking":i=0===n||1===n?"2":"0";break;case"tracking":i=2===n||0===n?"1":"0";break;default:return}l(a,i,!0)})},u=(e,t)=>{s.a.contentBlocking.getActiveExceptionsList(e,a=>{t({["tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled"]:"exempt_list"===a})})},m=(e,t,a)=>{s.a.contentBlocking.addExceptionForDomain(t,a,e)},d=(e,t,a)=>{s.a.contentBlocking.removeExceptionForDomain(t,a,e)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));a(13);var n=a(23);function i(e){return!!n.p.matchUrl(n.p.internalUrl("mailpage","composer"),e)}function s(e){return!!n.p.matchUrl(n.p.internalUrl("mailpage","message"),e)}},,function(e,t,a){"use strict";var n=a(12);const i=(e,t)=>t?setTimeout(e,t):e();let s;const r=new class{showTooltip(e,t=0){clearTimeout(s),s=i(()=>n.a.dispatch({actionType:"TOOLTIP_SET",id:e}),t)}hideTooltip(e=0){clearTimeout(s),s=i(()=>n.a.dispatch({actionType:"TOOLTIP_SET",id:null}),e)}};t.a=r},function(e,t,a){"use strict";var n=a(42),i=a(36),s=a(11),r=a(6),o=a(2),l=a(510),c=a(386),u=a(120),m=a(192),d=a(1);const h=(e,t)=>({title:e.task?Object(o.a)("Task has External Attendees"):Object(o.a)("Event has External Attendees"),body:Object(o.a)("To notify attendees about this, email messages should be sent. If you prefer to not send messages you can choose so."),actions:[{title:Object(o.a)("Send Messages"),action:"send",default:!0}],cancelAction:{title:Object(o.a)("Don’t Send Messages"),action:"cancel",default:!1},inputs:[{name:"note",label:Object(o.a)("Add a Custom Note to the Messages")}],checks:[{name:"remember",label:Object(o.a)("Remember My Choice")}]});async function p(e,t,a){const n={type:"html",content:a.body},i={type:"attachment",filename:"invite.ics",content:Object(u.b)(a.iCal),mimeType:"application/ics"},s=Date.now();c.a.sendExternalMessage({bcc:[],bodyParts:[n,i],cc:[],flags:[],forwarded:void 0,from:e,inReplyTo:"",internal:!1,messageId:Object(l.a)(e[0].address),replied:void 0,sentDate:s,subject:a.subject,threadKey:Object(m.b)(s),to:t})}const b={sendAttendeeMails:async function(e,t,a=!1){var l;if(n.a.isGoogleCalendar(e.calendarId))return;const c=r.a.get(d.kCalendarSendInviteEmailAction),u="ask"===c?await i.a.showCalendarModal({modal:h(e)}):{action:c};if("cancel"===u.action)return;"ask"===c&&(null===(l=u.checks)||void 0===l?void 0:l.remember)&&s.a.set(d.kCalendarSendInviteEmailAction,u.action);let m="",b="",g="REQUEST";if(!e.organizer)throw new Error(`Event organizer not found for event uid ${String(e.uid)}`);const N=[{address:e.organizer}],f=`<strong>${e.organizer}</strong>`,_=`<strong>${e.title}</strong>`,v=t.map(([t,i])=>{switch(t){case"create":m=Object(o.a)("Event invitation: $1",[e.title]),b=Object(o.a)("$1 has invited you to event “$2”",[f,_]),g="REQUEST";break;case"update":m=Object(o.a)("Event updated: $1",[e.title]),b=Object(o.a)("$1 has updated event “$2”",[f,_]),g="REQUEST";break;case"cancel":m=Object(o.a)("Event cancelled: $1",[e.title]),b=Object(o.a)("$1 has cancelled event “$2”",[f,_]),g="CANCEL"}const{note:s}=u.inputs||{};s&&(b+="<br/><br/><strong>"+Object(o.a)("Event organiser added the following note:")+"</strong><br/>"+s);const r={method:g,includeRecurrenceId:a},l=n.a.eventsToICalendar([e],r),c=i.filter(t=>t.address!==e.organizer).map(e=>({address:e.address,...e.name?{name:e.name}:null}));if(0!==c.length)return p(N,c,{subject:m,body:b,iCal:l})});return Promise.all(v)},sendReplyMails:async function(e,t,a){let i="",s="";const r=e.organizer;if(!r)throw new Error(`Event organizer not found for event uid ${String(e.uid)}`);const l=[{address:"DECLINECOUNTER"===a?r:t}],c=`<strong>${t}</strong>`,u=`<strong>${e.title}</strong>`;switch(a){case"ACCEPTED":i=Object(o.a)("Accepted: $1",[e.title]),s=Object(o.a)("$1 has accepted your invitation to “$2”",[c,u]);break;case"TENTATIVE":i=Object(o.a)("Tentatively accepted: $1",[e.title]),s=Object(o.a)("$1 has tentatively accepted your invitation to “$2”",[c,u]);break;case"DECLINED":i=Object(o.a)("Declined: $1",[e.title]),s=Object(o.a)("$1 has declined your invitation to “$2”",[c,u]);break;case"DECLINECOUNTER":i=Object(o.a)("Event change proposal declined: $1",[e.title]),s=Object(o.a)("$1 has declined your proposed changes to “$2”",[c,u])}const m={method:"DECLINECOUNTER"===a?"DECLINECOUNTER":"REPLY"};return p(l,[{address:"DECLINECOUNTER"===a?t:r}],{subject:i,body:s,iCal:n.a.eventsToICalendar([e],m)})}};t.a=b},,function(e,t){e.exports='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg">\n  <path stroke-width="0" d="M7 5L3.366 8.634A.8.8 0 012 8.07V1.93a.8.8 0 011.366-.565L7 5z"/>\n</svg>\n'},,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return ve}));var n=a(2),i=a(655),s=a.n(i),r=a(567),o=a(689),l=a(198),c=a(92),u=a.n(c),m=a(656),d=a.n(m),h=a(657),p=a.n(h),b=a(658),g=a.n(b),N=a(659),f=a.n(N),_=a(660),v=a.n(_),E=a(661),C=a.n(E),w=a(662),O=a.n(w),y=a(663),S=a.n(y),T=a(664),k=a.n(T),A=a(665),I=a.n(A),D=a(666),M=a.n(D),P=a(667),x=a.n(P),L=a(668),j=a.n(L),R=a(669),B=a.n(R),F=a(670),U=a.n(F),H=a(671),V=a.n(H),W=a(672),z=a.n(W),G=a(673),K=a.n(G),Y=a(674),$=a.n(Y),X=a(675),Z=a.n(X),Q=a(676),q=a.n(Q),J=a(677),ee=a.n(J),te=a(678),ae=a.n(te),ne=a(679),ie=a.n(ne),se=a(680),re=a.n(se),oe=a(681),le=a.n(oe),ce=a(682),ue=a.n(ce),me=a(683),de=a.n(me),he=a(684),pe=a.n(he),be=a(685),ge=a.n(be),Ne=a(686),fe=a.n(Ne);const _e={FORBID_TAGS:["style"],ALLOW_UNKNOWN_PROTOCOLS:!0};class ve{constructor(){u.a.registerLanguage("apache",d.a),u.a.registerLanguage("applescript",p.a),u.a.registerLanguage("bash",g.a),u.a.registerLanguage("basic",f.a),u.a.registerLanguage("coffeescript",v.a),u.a.registerLanguage("cpp",C.a),u.a.registerLanguage("css",O.a),u.a.registerLanguage("diff",S.a),u.a.registerLanguage("django",k.a),u.a.registerLanguage("dockerfile",I.a),u.a.registerLanguage("dos",M.a),u.a.registerLanguage("ini",x.a),u.a.registerLanguage("java",j.a),u.a.registerLanguage("javascript",B.a),u.a.registerLanguage("json",U.a),u.a.registerLanguage("less",V.a),u.a.registerLanguage("markdown",z.a),u.a.registerLanguage("mathematica",K.a),u.a.registerLanguage("matlab",$.a),u.a.registerLanguage("nginx",Z.a),u.a.registerLanguage("objectivec",q.a),u.a.registerLanguage("perl",ee.a),u.a.registerLanguage("python",ae.a),u.a.registerLanguage("ruby",ie.a),u.a.registerLanguage("scss",re.a),u.a.registerLanguage("shell",le.a),u.a.registerLanguage("sql",ue.a),u.a.registerLanguage("swift",de.a),u.a.registerLanguage("typescript",pe.a),u.a.registerLanguage("vim",ge.a),u.a.registerLanguage("xml",fe.a),this.remarkable=new r.a("commonmark",{html:!0,breaks:!0,typographer:!1,quotes:Object(n.a)("“”‘’"),highlight:(e,t)=>{if(t&&u.a.getLanguage(t))try{return u.a.highlight(t,e).value}catch(e){}return""}}),this.remarkable.use(s.a),this.remarkable.use(o.a);const e=this.remarkable.inline.validateLink,t=/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,a=/^\s*blob:chrome-extension:\/\/[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i;this.remarkable.inline.validateLink=n=>e(n)||n.match(t)||n.match(a),this.remarkable.inline.ruler.enable(["del","mark","sub","sup"]),this.remarkable.block.ruler.enable(["table"])}getRawMarkup(e){return Object(l.sanitize)(this.remarkable.render(e),_e)}}},function(e,t,a){"use strict";var n=a(31),i=a(13),s=a(262),r=a(279),o=a(4),l=a(46);const c=[1,2,5,10,30],u=(e,t)=>{const a=i.c.getPageByReloadId(e);if("tab"===t&&a&&Object(l.j)(a.get("url")))return[];const u=r.a.existingAlarms(),m=r.a.getAlarmFromReloadId(e);return[...c.map(a=>({type:"checkbox",checked:(null==m?void 0:m.periodInMinutes)===a,handler:()=>{const n={alarm:m,id:e,interval:a,from:t};s.a.createOrDestroyAlarm(n)},commandName:"PERIODIC_RELOAD",parameter:a.toString(),...Object(o.a)("$1 Minute","$1 Minutes",[a])})),...[n.a.separatorItem,{visible:Boolean(null==m?void 0:m.id.includes(e)),handler:()=>{s.a.destroyPeriodicAlarm(e)},commandName:"PERIODIC_RELOAD_DISABLE",parameter:"",...Object(o.a)("timer","Disable")},{visible:u,handler:s.a.destroyAllPeriodicAlarms,commandName:"PERIODIC_RELOAD_DISABLE",parameter:"all",...Object(o.a)("timers","Disable All")}]]},m={getForActivePage:()=>{const e=i.c.unsafeGetActivePage(),t=e.getIn(["extData","ext_id"]);return e?u(t,"tab"):[]},getMenu:u,getHandlerByAction:(e,t)=>{let a;switch(e){case"PERIODIC_RELOAD":const e=i.c.unsafeGetActivePage().getIn(["extData","ext_id"]),n=r.a.getAlarmFromReloadId(e),o=parseInt(t);a=()=>s.a.createOrDestroyAlarm({alarm:n,id:e,interval:o,from:"tab"});break;case"PERIODIC_RELOAD_DISABLE":if("all"===t)a=s.a.destroyAllPeriodicAlarms;else{const e=i.c.unsafeGetActivePage().getIn(["extData","ext_id"]);a=()=>s.a.destroyPeriodicAlarm(e)}}return a}};t.a=m},,,,,,function(e,t,a){"use strict";function n(e){return{...e,headers:{Depth:1},method:"PROPFIND",body:'<?xml version="1.0" encoding="UTF-8"?>\n    <D:propfind xmlns:D="DAV:"\n      xmlns:CS="http://calendarserver.org/ns/">\n      <D:prop>\n        <D:getetag />\n        <D:displayname />\n        <CS:getctag />\n        <D:resourcetype />\n        <supported-calendar-component-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <supported-address-data xmlns="urn:ietf:params:xml:ns:carddav" />\n        <xmpp-uri xmlns="http://calendarserver.org/ns/" />\n        <calendar-color xmlns="http://apple.com/ns/ical/" />\n        <D:supported-report-set />\n        <D:sync-token />\n      </D:prop>\n    </D:propfind>'}}function i(){return'<?xml version="1.0" encoding="utf-8"?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:current-user-principal />\n        <D:resourcetype xmlns:D="DAV:" />\n      </D:prop>\n    </D:propfind>'}function s(){return'<?xml version="1.0" encoding="utf-8"?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:displayname />\n        <schedule-inbox-URL xmlns="urn:ietf:params:xml:ns:caldav" />\n        <schedule-outbox-URL xmlns="urn:ietf:params:xml:ns:caldav" />\n        <calendar-user-address-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <default-calendar-URL xmlns="http://icewarp.com/ns/" />\n        <default-tasks-URL xmlns="http://icewarp.com/ns/" />\n        <default-contacts-URL xmlns="http://icewarp.com/ns/" />\n        <default-notes-URL xmlns="http://icewarp.com/ns/" />\n        <calendar-home-set xmlns="urn:ietf:params:xml:ns:caldav" />\n        <addressbook-home-set xmlns="urn:ietf:params:xml:ns:carddav" />\n        <D:resourcetype xmlns:D="DAV:" />\n        <supported-calendar-component-set xmlns="urn:ietf:params:xml:ns:caldav" />\n      </D:prop>\n    </D:propfind>'}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s}))},function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12),r=a(84),o=a.n(r),l=a(99);const c={rewindHistory:[],rewindIndexes:[],forwardUrl:""};function u(e,t){return o.a.parse(e).hostname===o.a.parse(t).hostname}function m(e,t,a,n){e.rewindHistory||(e.rewindHistory=[],e.rewindIndexes=[]);const i=e.prev&&e.prev.url&&u(e.prev.url,t.url);return a!==n.length-1&&(e.prev&&!i&&a<n.length-1?(n.length-1-a>1&&(e.rewindHistory.length>0&&u(e.rewindHistory[e.rewindHistory.length-1].url,e.prev.url)&&e.rewindHistory[e.rewindHistory.length-1].url!==e.prev.url?(e.rewindHistory.push(e.prev),e.rewindIndexes.push(n.length-a-2)):u(n[n.length-1].url,e.prev.url)&&n[n.length-1].url!==e.prev.url&&(e.rewindHistory.push(e.prev),e.rewindIndexes.push(n.length-a-2))),e.rewindHistory.push(t),e.rewindIndexes.push(n.length-a-1)):0===a&&n.length>0&&(e.rewindHistory.push(t),e.rewindIndexes.push(n.length-a-1))),e.prev=t,e}function d(e,t){let a=e.get(t);return a||(a={...c},e.set(t,a)),a}class h extends i.a{getInitialState(){return new Map}getStateById(e){return this.getState().get(e)||c}getFastForwardUrl(e){return this.getStateById(e).forwardUrl}getRewindRelativeIndex(e){const t=this.getState().get(e);if(t){const{rewindIndexes:e}=t;if(e.length>0)return e[0]}return 0}getRewindHistory(e){return this.getStateById(e.id).rewindHistory}getRewindIndexes(e){return this.getStateById(e.id).rewindIndexes}reduce(e,t){switch(t.actionType){case"FAST_FORWARD_SET_FORWARD_URL":return Object(l.c)(e,e=>{const{forwardUrl:a,pageId:n}=t;d(e,n).forwardUrl=a});case"CHROME_TABS_UPDATED":return Object(l.c)(e,a=>{const{tabId:n,changeInfo:i}=t;if("loading"!==i.status)return e;d(a,n).forwardUrl=""});case"FAST_FORWARD_SET_REWIND_INFO":return Object(l.c)(e,e=>{const{currentIndex:a,history:n,pageId:i}=t,{rewindHistory:s,rewindIndexes:r}=(o=a,n.slice(0,o+1).reduceRight(m,{}));var o;const l=d(e,i);l.rewindHistory=s,l.rewindIndexes=r});case"FAST_FORWARD_COPY_STATE":return Object(l.c)(e,e=>{const{fastForwardState:a,pageId:n}=t;e.set(n,a)});default:return e}}}t.a=new h(s.a)},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(10);let o;const l=new class extends i.a{getDraftIdAndCancelDraftUpdates(){if(o){o.cancelPendingChanges();const{id:e}=o.props;if(void 0!==e){const{sentDate:t,threadKey:a}=o;return{id:e,sentDate:t,threadKey:a}}}}getMessagePromise(){return o?o.buildMessage():Promise.resolve()}getComposer(){return o}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};s.a.register(e=>{switch(e.actionType){case"MAIL_SET_ACTIVE_COMPOSER":o!==e.mailComposer&&(o=e.mailComposer);break;case"MAIL_CLEAR_ACTIVE_COMPOSER":o===e.mailComposer&&(o=void 0);break;case"MAIL_ADD_ATTACHMENT":r.a.fileSystem.chooseEntry({type:"openFile",acceptsMultiple:!0},e=>{e&&Promise.all(e.map(e=>new Promise(t=>e.file(a=>{const n=new FileReader;n.onloadend=a=>t({type:"attachment",content:new Uint8Array(a.target.result),filename:e.name}),n.readAsArrayBuffer(a)})))).then(e=>o&&o.setState({attachments:[...o.state.attachments,...e]},o.onBodyChange))});break;case"MAIL_ACTIVE_COMPOSER_MODAL":e.noRecipients&&l.emitChange("noRecipients")}}),t.a=l},function(e,t,a){"use strict";var n=a(111),i=a(0),s=a.n(i),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\MasterDetailListItem.jsx";class o extends s.a.PureComponent{render(){let e=this.props.iconPath;return"gmail.com"===e&&(e="ssl.gstatic.com/ui/v1/icons/mail/images/favicon5.ico"),"googleusercontent.com"===e&&(e="google.com/favicon.ico"),s.a.createElement(s.a.Fragment,null,s.a.createElement(n.a,{avoidCache:!0,topLevelOnly:e===this.props.iconPath,size:32,className:"item-icon",url:e?`https://${e}`:this.props.iconFallbackPath,fallbackUrl:this.props.iconFallbackPath,style:this.props.style,__source:{fileName:r,lineNumber:26,columnNumber:9}}),s.a.createElement("div",{className:"item-title",__source:{fileName:r,lineNumber:38,columnNumber:9}},this.props.title),s.a.createElement("div",{className:"item-meta",__source:{fileName:r,lineNumber:41,columnNumber:9}},this.props.meta))}}t.a=o},function(e,t,a){"use strict";a.d(t,"d",(function(){return f})),a.d(t,"a",(function(){return _})),a.d(t,"c",(function(){return E}));var n=a(0),i=a(277),s=a(598),r=a(6),o=a(600),l=a(353),c=a(2),u=a(88),m=a.n(u),d=a(38),h=a(100),p=a(1),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\DateTimeEditor.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=[n.createElement("option",{key:"none",__source:{fileName:b,lineNumber:21,columnNumber:3}},Object(c.a)("Use Current Timezone")),n.createElement("option",{key:"floating",value:d.i,__source:{fileName:b,lineNumber:22,columnNumber:3}},Object(c.a)("Always in Local Time"))].concat(m.a.tz.names().map(e=>n.createElement("option",{key:e,value:e,__source:{fileName:b,lineNumber:24,columnNumber:3}},e)));function f(e,t,a){const n=Object(h.c)(e),i=m.a.tz(e[t],n).format("YYYY-MM-DD");return v(t,e,m.a.tz(`${i} ${a}`,n).valueOf())}function _(e,t,a){const n=Object(h.c)(e),i=m.a.tz(e[t],n).format("HH:mm"),s=m.a.tz(`${a} ${i}`,n);return e.allDay&&"end"===t&&s.add(1,"day"),v(t,e,s.valueOf())}function v(e,t,a){if(!isNaN(a)){const n=r.a.get(p.kCalendarAutoAdjustEnd);if("start"===e&&("always"===n||"timed_only"===n&&!t.allDay)){const e=t.end-t.start;t.start=a,t.end=a+e}else t[e]=a}return t}function E(e,t){const a=e.timezone||m.a.tz.guess(),n=m.a.tz(e.start,a);e.start=m.a.tz(n.format("YYYYMMDDTHHmmss"),t).valueOf();const i=m.a.tz(e.end,a);return e.end=m.a.tz(i.format("YYYYMMDDTHHmmss"),t).valueOf(),e.timezone=t,e}class C extends n.Component{constructor(...e){super(...e),g(this,"createTimeHandler",e=>t=>{const{value:a}=t.currentTarget;this.props.updateEvent(f(this.props.event,e,a))}),g(this,"createDateHandler",e=>t=>{const{value:a}=t.currentTarget;this.props.updateEvent(_(this.props.event,e,a))}),g(this,"setTimezone",e=>{const{value:t}=e.currentTarget;t!==this.props.event.timezone&&this.props.updateEvent(E(this.props.event,t))}),g(this,"setAllDay",e=>{const{checked:t}=e.currentTarget;this.props.event.allDay=t,this.props.updateEvent(this.props.event)})}render(){const{event:e}=this.props,{start:t,end:a}=Object(h.b)(e);return n.createElement("div",{__source:{fileName:b,lineNumber:122,columnNumber:7}},!e.task&&n.createElement(n.Fragment,null,n.createElement("div",{className:"edit-group large-gap",__source:{fileName:b,lineNumber:124,columnNumber:11}},n.createElement(i.a,{className:"cal-event-date-picker",onChange:this.createDateHandler("start"),tabIndex:this.props.tabIndex,title:Object(c.a)("Event Start Date"),value:t.format("YYYY-MM-DD"),__source:{fileName:b,lineNumber:125,columnNumber:13}}),!e.allDay&&n.createElement(l.a,{className:"cal-event-time-picker",onChange:this.createTimeHandler("start"),ref:this.props.focusRef,tabIndex:this.props.tabIndex,step:"5",title:Object(c.a)("Event Start Time"),value:t.format("HH:mm"),__source:{fileName:b,lineNumber:133,columnNumber:15}})),n.createElement("div",{className:"edit-group large-gap",__source:{fileName:b,lineNumber:144,columnNumber:11}},n.createElement(i.a,{className:"cal-event-date-picker",onChange:this.createDateHandler("end"),tabIndex:this.props.tabIndex,title:Object(c.a)("Event End Date"),value:a.format("YYYY-MM-DD"),__source:{fileName:b,lineNumber:145,columnNumber:13}}),!e.allDay&&n.createElement(l.a,{className:"cal-event-time-picker",onChange:this.createTimeHandler("end"),tabIndex:this.props.tabIndex,step:"5",title:Object(c.a)("Event End Time"),value:a.format("HH:mm"),__source:{fileName:b,lineNumber:153,columnNumber:15}}))),e.task&&n.createElement("div",{className:"edit-group large-gap",__source:{fileName:b,lineNumber:165,columnNumber:11}},n.createElement(o.a,{event:e,onDateChange:this.createDateHandler("due"),onTimeChange:this.createTimeHandler("due"),updateEvent:this.props.updateEvent,tabIndex:this.props.tabIndex,__source:{fileName:b,lineNumber:166,columnNumber:13}})),n.createElement("div",{className:"edit-group large-gap",__source:{fileName:b,lineNumber:175,columnNumber:9}},n.createElement("label",{__source:{fileName:b,lineNumber:176,columnNumber:11}},n.createElement("input",{type:"checkbox",checked:e.allDay,onChange:this.setAllDay,tabIndex:this.props.tabIndex,__source:{fileName:b,lineNumber:177,columnNumber:13}}),n.createElement("span",{__source:{fileName:b,lineNumber:184,columnNumber:13}},Object(c.a)("All Day"))),n.createElement("label",{__source:{fileName:b,lineNumber:186,columnNumber:11}},n.createElement("select",{disabled:e.allDay,onChange:this.setTimezone,value:e.allDay?d.i:e.timezone,tabIndex:this.props.tabIndex,__source:{fileName:b,lineNumber:187,columnNumber:13}},N))),n.createElement(s.b,{event:e,tabIndex:this.props.tabIndex,updateEvent:this.props.updateEvent,label:Object(c.a)("Notifications"),__source:{fileName:b,lineNumber:197,columnNumber:9}}))}}t.b=C},,function(e,t,a){"use strict";var n=a(31),i=a(11),s=a(6),r=a(0),o=a.n(r),l=a(492),c=a(21),u=a(44),m=a(22),d=a(35),h=a(2),p=a(85),b=a(548),g=a(208),N=a(9),f=a(1),_=a(704),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\singleshortcut\\SingleShortcut.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends r.PureComponent{constructor(...e){super(...e),E(this,"state",{commands:Object(b.b)(),error:null}),E(this,"componentDidMount",()=>{u.default.addChangeListener(this.onStoreChange)}),E(this,"componentWillUnmount",()=>{u.default.removeChangeListener(this.onStoreChange)}),E(this,"onStoreChange",()=>{this.setState({commands:Object(b.b)()})}),E(this,"getCommand",()=>this.state.commands.find(e=>e.name===this.props.name)),E(this,"findExistingShortcut",e=>this.state.commands.filter(e=>e.shortcut).find(t=>{var a;return null===(a=t.shortcut)||void 0===a?void 0:a.includes(e)})),E(this,"isDefault",()=>{var e;const t=d.a.getDefault(this.props.name).shortcut,a=null===(e=this.getCommand())||void 0===e?void 0:e.shortcut;return void 0===a||(!(null==t||!t.every((e,t)=>e===a[t]))||void 0===t&&0===a.length)}),E(this,"restoreDefault",()=>{const e=d.a.getDefault(this.props.name);if(e.shortcut)for(let t=0;t<e.shortcut.length;t++){const a=e.shortcut[t],n=this.findExistingShortcut(a);if(n&&n.name!==this.props.name)return void this.setState({error:Object(h.a)("Shortcut $1 is already assigned to “$2” command.",[Object(g.b)(a).toUpperCase(),n.label])})}const t=this.getCommand();t&&this.save(t,e.shortcut||[])}),E(this,"handleKeyEvent",e=>{const t=this.getCommand();if(!t||["Escape","Tab"].includes(e.key)||e.getModifierState("AltGraph"))return void this.setState({error:null});e.preventDefault();const a=p.a.keyComboFromEvent(e.nativeEvent);if("Backspace"!==e.key){if(a){const e=this.findExistingShortcut(a);if(!s.a.get(f.kKeyboardShortcutsEnableSingleKey)&&p.a.isSingleKeyShortcut(a))this.setState({error:Object(h.a)("Single Key Shortcuts are currently disabled.")});else if(e)this.setState({error:Object(h.a)("Shortcut $1 is already assigned to “$2” command.",[Object(g.b)(a).toUpperCase(),e.label])});else if(-1!==_.c.indexOf(a)){const e=Object(g.b)(a);this.setState({error:Object(h.a)("Shortcut $1 is reserved by the system.",[e.toUpperCase()])})}else-1===_.b.indexOf(a)&&this.setState({error:null},()=>{const e=(t.shortcut||[]).concat(a);this.save(t,e,()=>{this.refs.comboInput.focus()})})}}else{var n;const e=null===(n=t.shortcut)||void 0===n?void 0:n.slice(0,t.shortcut.length-1);e&&this.setState({error:null},()=>{this.save(t,e)})}}),E(this,"deleteCombo",(e,t,a,n)=>{const i=a.filter((e,t)=>t!==n);if("Delete"===e.key){const a=e.currentTarget.nextElementSibling;this.save(t,i,()=>{a instanceof HTMLElement&&a.focus()})}else if("Backspace"===e.key&&a){const a=e.currentTarget.previousElementSibling||e.currentTarget.nextElementSibling;this.save(t,i,()=>{a instanceof HTMLElement&&a.focus()})}else this.handleKeyEvent(e)}),E(this,"save",(e,t,a)=>{const{name:n,gestures:i,showInQC:s}=e;this.setState({error:null},()=>{d.a.set({[n]:{name:n,shortcut:t,gestures:i,showInQC:s}},a)})})}render(){const e=this.getCommand(),t=e&&Array.isArray(e.shortcut)&&e.shortcut;return r.createElement(r.Fragment,null,r.createElement("div",{className:"SingleShortcut-Toolbar toolbar toolbar-default",__source:{fileName:v,lineNumber:198,columnNumber:9}},r.createElement("div",{className:"multiinput",__source:{fileName:v,lineNumber:200,columnNumber:11}},r.createElement("div",{className:"multiinput-group",__source:{fileName:v,lineNumber:201,columnNumber:13}},e&&t&&t.map((a,n)=>r.createElement("button",{key:a,style:{textTransform:"capitalize"},className:"multiinput-item",onKeyDown:a=>{this.deleteCombo(a,e,t,n)},__source:{fileName:v,lineNumber:203,columnNumber:17}},Object(g.b)(a))),r.createElement("input",{type:"text",ref:"comboInput",placeholder:t&&0===t.length&&this.props.placeholder||null,onKeyDown:this.handleKeyEvent,__source:{fileName:v,lineNumber:214,columnNumber:15}}))),r.createElement(m.a,{onClick:this.restoreDefault,image:N.lc.medium,disabled:void 0!==e&&this.isDefault(),tooltip:Object(h.a)("Restore default shortcut"),__source:{fileName:v,lineNumber:223,columnNumber:11}})),this.state.error&&r.createElement("p",{className:"SingleShortcut-Error",dangerouslySetInnerHTML:{__html:N.Zd.small+this.state.error},__source:{fileName:v,lineNumber:232,columnNumber:11}}))}}var w=C,O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\breakmode\\BreakModePopup.jsx";const y=[f.kPrivacyBreakModeIntroductionShow];class S extends o.a.PureComponent{render(){return o.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:O,lineNumber:29,columnNumber:7}},o.a.createElement("div",{className:"BreakModePopup--Graphic",dangerouslySetInnerHTML:{__html:N.F.large},__source:{fileName:O,lineNumber:30,columnNumber:9}}),o.a.createElement("h1",{__source:{fileName:O,lineNumber:35,columnNumber:9}},Object(h.a)("Take a Break")),o.a.createElement("p",{className:"BreakModePopup-Intro",__source:{fileName:O,lineNumber:38,columnNumber:9}},Object(h.a)("Vivaldi is fading content and pausing media. Focus elsewhere for a while.")),o.a.createElement("h3",{__source:{fileName:O,lineNumber:42,columnNumber:9}},Object(h.a)("Keyboard Shortcut")),o.a.createElement(w,{name:"COMMAND_BREAKMODE_TOGGLE",placeholder:Object(h.a)("No shortcut assigned"),__source:{fileName:O,lineNumber:45,columnNumber:9}}),o.a.createElement("label",{__source:{fileName:O,lineNumber:50,columnNumber:9}},o.a.createElement("input",{type:"checkbox",checked:!this.props.prefValues[f.kPrivacyBreakModeIntroductionShow],onChange:()=>{i.a.toggle(f.kPrivacyBreakModeIntroductionShow,!0,!1)},__source:{fileName:O,lineNumber:51,columnNumber:11}}),o.a.createElement("span",{__source:{fileName:O,lineNumber:58,columnNumber:11}},Object(h.a)("Do not show again"))))}}var T=Object(c.a)(S,y),k=a(356),A=a(4),I="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\breakmode\\BreakModeButton.jsx";function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=[f.kPrivacyBreakModeIntroductionShow];class P extends o.a.PureComponent{constructor(...e){super(...e),D(this,"state",{shouldShowPopup:k.a.getState().isActive&&this.props.prefValues[f.kPrivacyBreakModeIntroductionShow],isInBreakMode:k.a.getState().isActive}),D(this,"componentDidMount",()=>{this.breakModeStoreToken=k.a.addListener(this.onBreakModeChanged)}),D(this,"componentWillUnmount",()=>{this.breakModeStoreToken.remove()}),D(this,"onBreakModeChanged",()=>{const e=k.a.getState().isActive,t=e&&this.props.prefValues[f.kPrivacyBreakModeIntroductionShow];this.setState({isInBreakMode:e,shouldShowPopup:t})}),D(this,"hidePopup",()=>{this.setState({shouldShowPopup:!1})})}render(){return o.a.createElement(m.a,{className:"panel-clickoutside-ignore",tooltip:this.state.isInBreakMode?Object(h.a)("End Break"):Object(h.a)("Take a Break"),onClick:l.a.toggleBreakMode,isOn:this.state.isInBreakMode,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,image:this.state.isInBreakMode?N.G[this.props.size]:N.F[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"BreakModePopup ToolbarButtonPopup-DefaultStyles",popupWidth:220,isPopupVisible:this.state.shouldShowPopup,menu:[{type:"checkbox",checked:this.props.prefValues[f.kPrivacyBreakModeIntroductionShow],handler:()=>{i.a.toggle(f.kPrivacyBreakModeIntroductionShow,!0,!1)},...Object(A.a)("Show Break Mode Introduction")}],__source:{fileName:I,lineNumber:84,columnNumber:12}},o.a.createElement(T,{__source:{fileName:I,lineNumber:118,columnNumber:7}}))}}var x=Object(c.a)(P,M),L=a(103),j=a(125),R=a.n(j),B=a(15),F=a.n(B),U=a(171);const H={getTimeFormat:()=>s.a.get(f.kClockShowSeconds)?"LTS":"LT",getDateFormat:()=>L.a.getShortDateFormat(),getTimeAndDateFormat:()=>H.getDateFormat()+"  "+H.getTimeFormat(),setTimer:(e,t)=>{const a=new Date;if(e.date<a){const t=new Date(e.date);t.setDate(t.getDate()+1),e.date=t.valueOf()}i.a.set(f.kClockTimers,[...s.a.get(f.kClockTimers),{...e,type:t,id:R()()}])},removeTimer:e=>{const t=s.a.get(f.kClockTimers).filter(t=>e!==t.id);i.a.set(f.kClockTimers,t)},completeTimer:e=>{const t=s.a.get(f.kClockNotificationSound),a={title:H.getName(e),silent:!1,requireInteraction:!0};if(t){new Audio(t).play()}Object(U.a)(a)},getName:e=>e.name||("alarm"===e.type?Object(h.a)("Alarm"):Object(h.a)("Countdown")),getActiveLabel:(e,t)=>{const a=F()(e.date),n=F.a.duration(a.diff(new Date)),i=n.hours(),s=n.minutes();let r;if(r="alarm"===e.type?a.format("LT"):i&&s?Object(h.a)("$1h $2m",[i,s]):i?Object(h.a)("$1h",[i]):s?Object(h.a)("$1m",[s]):Object(h.a)("Now"),t){return`${r} - ${H.getName(e)}`}return r},getAlarm:e=>s.a.get(f.kClockTimers).find(t=>t.id===e&&"alarm"===t.type),setAlarmWithPreset:e=>{const t=new Date;t.setSeconds(0),t.setHours(e.hour),t.setMinutes(e.minute);const a={name:e.name,date:t.valueOf()};H.setTimer(a,"alarm")},getAlarmPreset:e=>s.a.get(f.kClockAlarmPresets).find(t=>t.id===e),saveAlarmPreset:(e,t,a)=>{const n=R()();i.a.set(f.kClockAlarmPresets,[...s.a.get(f.kClockAlarmPresets),{name:e,hour:t,minute:a,id:n}])},removeAlarmPreset:e=>{const t=s.a.get(f.kClockAlarmPresets).filter(t=>t.id!==e);i.a.set(f.kClockAlarmPresets,t)},getCountdown:e=>s.a.get(f.kClockTimers).find(t=>t.id===e&&"countdown"===t.type),setCountdownWithPreset:e=>{const t=new Date,a={name:e.name,date:t.setSeconds(t.getSeconds()+e.seconds).valueOf()};H.setTimer(a,"countdown")},getCountdownPreset:e=>s.a.get(f.kClockCountdownPresets).find(t=>t.id===e),saveCountdownPreset:(e,t)=>{const a=R()();i.a.set(f.kClockCountdownPresets,[...s.a.get(f.kClockCountdownPresets),{name:e,seconds:t,id:a}])},removeCountdownPreset:e=>{const t=s.a.get(f.kClockCountdownPresets).filter(t=>t.id!==e);i.a.set(f.kClockCountdownPresets,t)}};var V=H,W=a(353),z=a(20),G=a.n(z),K="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupAlarm.jsx";function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $=[f.kKeyboardTabToAll,f.kClockAlarmPresets,f.kClockTimers];class X extends o.a.PureComponent{constructor(...e){super(...e),Y(this,"state",{selectedPresetId:null,name:""}),Y(this,"isPresetSelected",e=>e.id===this.state.selectedPresetId&&e.name===this.state.name&&this.props.minute===e.minute&&this.props.hour===e.hour),Y(this,"setAlarm",()=>{const e=this.state.name,t=new Date;t.setHours(this.props.hour),t.setMinutes(this.props.minute),t.setSeconds(0),this.setState({selectedPresetId:null,name:""},()=>{this.props.hidePopup({name:e,date:t.valueOf()},"alarm")})}),Y(this,"setName",e=>{this.setState({name:e.currentTarget.value})}),Y(this,"selectPreset",e=>{const t=e.name,a=e.id;this.props.setHour(e.hour),this.props.setMinute(e.minute),this.setState({name:t,selectedPresetId:a})}),Y(this,"timeChange",e=>{const t=e.currentTarget.value.split(":"),a=parseInt(t[0]),n=parseInt(t[1]);this.props.setHour(a),this.props.setMinute(n)}),Y(this,"savePreset",()=>{V.saveAlarmPreset(this.state.name,this.props.hour,this.props.minute)}),Y(this,"setPreview",()=>{this.props.setMode("alarm")})}render(){const e=this.props.prefValues[f.kClockAlarmPresets],t=this.state.selectedPresetId&&V.getAlarmPreset(this.state.selectedPresetId),a=this.props.alarms,n=new Date;n.setHours(this.props.hour),n.setMinutes(this.props.minute);const i=[],s=[];return a.forEach(e=>{this.props.now.valueOf()<e.date?i.push(e):s.push(e)}),o.a.createElement("div",{className:"ClockPopup-Alarms",__source:{fileName:K,lineNumber:129,columnNumber:12}},o.a.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:K,lineNumber:130,columnNumber:7}},e.map(e=>{const a=t&&this.isPresetSelected(e);return(o.a.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:K,lineNumber:133,columnNumber:18}},o.a.createElement("button",{className:G()("ClockPopup-Preset",{"ClockPopup-Preset--selected":a}),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:K,lineNumber:134,columnNumber:13}},e.name),o.a.createElement("button",{className:G()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":a}),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>V.removeAlarmPreset(e.id),dangerouslySetInnerHTML:{__html:N.Nd},__source:{fileName:K,lineNumber:143,columnNumber:13}})))})),o.a.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setAlarm,__source:{fileName:K,lineNumber:155,columnNumber:7}},o.a.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:K,lineNumber:159,columnNumber:9}},o.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:K,lineNumber:160,columnNumber:11}},o.a.createElement("h3",{__source:{fileName:K,lineNumber:161,columnNumber:13}},Object(h.a)("Time")),o.a.createElement(W.a,{className:"ClockPopup-DateInputField",onChange:this.timeChange,step:"5",title:Object(h.a)("Alarm time"),onFocus:this.setPreview,value:F()(n).format("HH:mm"),__source:{fileName:K,lineNumber:162,columnNumber:13}})),o.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:K,lineNumber:171,columnNumber:11}},o.a.createElement("h3",{__source:{fileName:K,lineNumber:172,columnNumber:13}},Object(h.a)("Alarm preset","Name")),o.a.createElement("input",{className:"ClockPopup-Name",type:"text",onFocus:this.setPreview,placeholder:Object(h.a)("Alarm preset","Name"),onChange:this.setName,value:this.state.name,__source:{fileName:K,lineNumber:173,columnNumber:13}}))),o.a.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:K,lineNumber:184,columnNumber:9}},o.a.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:Object(h.a)("Save Preset"),__source:{fileName:K,lineNumber:185,columnNumber:11}}),o.a.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:Object(h.a)("Start"),__source:{fileName:K,lineNumber:195,columnNumber:11}}))))}}var Z=Object(c.a)(X,$),Q="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupCountdown.jsx";function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const J=[f.kKeyboardTabToAll,f.kClockCountdownPresets,f.kClockTimers];class ee extends o.a.PureComponent{constructor(...e){super(...e),q(this,"state",{selectedPresetId:null,name:""}),q(this,"isPresetSelected",e=>{const t=60*this.props.minute+3600*this.props.hour;return e.id===this.state.selectedPresetId&&e.name===this.state.name&&t===e.seconds}),q(this,"setCountdown",()=>{const e=this.state.name,t=F()().add(this.props.hour,"hours").add(this.props.minute,"minutes").valueOf();this.setState({selectedPresetId:null,name:""},()=>{this.props.hidePopup({name:e,date:t},"countdown")})}),q(this,"setMinute",e=>{const{value:t}=e.currentTarget,a=Math.min(Math.max(parseInt(t),0),59);this.props.setMinute(a)}),q(this,"setHour",e=>{const{value:t}=e.currentTarget,a=Math.min(Math.max(parseInt(t),0),23);this.props.setHour(a)}),q(this,"decrementHour",()=>{this.props.setHour(this.props.hour-1)}),q(this,"incrementHour",()=>{this.props.setHour(this.props.hour+1)}),q(this,"decrementMinute",()=>{this.props.setMinute(this.props.minute-1)}),q(this,"incrementMinute",()=>{this.props.setMinute(this.props.minute+1)}),q(this,"setName",e=>{this.setState({name:e.currentTarget.value})}),q(this,"setPreview",()=>{this.props.setMode("countdown")}),q(this,"selectPreset",e=>{const t=F.a.duration(e.seconds,"seconds"),a=e.name,n=t.hours(),i=t.minutes();this.props.setHour(n),this.props.setMinute(i),this.setState({name:a,selectedPresetId:e.id})}),q(this,"savePreset",()=>{const e=60*this.props.hour*60+60*this.props.minute;V.saveCountdownPreset(this.state.name,e)})}render(){const e=this.props.prefValues[f.kClockCountdownPresets],t=this.state.selectedPresetId&&V.getCountdownPreset(this.state.selectedPresetId),a=this.props.countdowns,n=[],i=[];return a.forEach(e=>{this.props.now.valueOf()<e.date?n.push(e):i.push(e)}),o.a.createElement("div",{className:"ClockPopup-Countdowns",__source:{fileName:Q,lineNumber:146,columnNumber:12}},o.a.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:Q,lineNumber:148,columnNumber:7}},e.map(e=>{const a=t&&this.isPresetSelected(e);return(o.a.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:Q,lineNumber:151,columnNumber:18}},o.a.createElement("button",{className:G()("ClockPopup-Preset",{"ClockPopup-Preset--selected":a}),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:Q,lineNumber:152,columnNumber:13}},e.name),o.a.createElement("button",{className:G()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":a}),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>V.removeCountdownPreset(e.id),dangerouslySetInnerHTML:{__html:N.Nd},__source:{fileName:Q,lineNumber:161,columnNumber:13}})))})),o.a.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setCountdown,__source:{fileName:Q,lineNumber:173,columnNumber:7}},o.a.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:Q,lineNumber:177,columnNumber:9}},o.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:Q,lineNumber:178,columnNumber:11}},o.a.createElement("h3",{__source:{fileName:Q,lineNumber:179,columnNumber:13}},Object(h.a)("Hours")),o.a.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"hour",step:1,min:0,max:23,onFocus:this.setPreview,placeholder:Object(h.a)("hh"),onChange:this.setHour,value:this.props.hour,__source:{fileName:Q,lineNumber:180,columnNumber:13}}),o.a.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:Q,lineNumber:192,columnNumber:13}},o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],disabled:23===this.props.hour,onClick:this.incrementHour,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:Q,lineNumber:193,columnNumber:15}}),o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],disabled:0===this.props.hour,type:"button",onClick:this.decrementHour,className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:Q,lineNumber:200,columnNumber:15}}))),o.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:Q,lineNumber:210,columnNumber:11}},o.a.createElement("h3",{__source:{fileName:Q,lineNumber:211,columnNumber:13}},Object(h.a)("Minutes")),o.a.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"minute",step:1,min:0,max:59,placeholder:Object(h.a)("time","mm"),onChange:this.setMinute,onFocus:this.setPreview,value:this.props.minute,__source:{fileName:Q,lineNumber:212,columnNumber:13}}),o.a.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:Q,lineNumber:224,columnNumber:13}},o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],disabled:59===this.props.minute,onClick:this.incrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:Q,lineNumber:225,columnNumber:15}}),o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],disabled:0===this.props.minute,onClick:this.decrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:Q,lineNumber:232,columnNumber:15}}))),o.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:Q,lineNumber:241,columnNumber:11}},o.a.createElement("h3",{__source:{fileName:Q,lineNumber:242,columnNumber:13}},Object(h.a)("Countdown preset","Name")),o.a.createElement("input",{className:"ClockPopup-Name",type:"text",placeholder:Object(h.a)("Countdown preset","Name"),onChange:this.setName,onFocus:this.setPreview,value:this.state.name,__source:{fileName:Q,lineNumber:243,columnNumber:13}}))),o.a.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:Q,lineNumber:254,columnNumber:9}},o.a.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:Object(h.a)("Save Preset"),__source:{fileName:Q,lineNumber:255,columnNumber:11}}),o.a.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:Object(h.a)("Start"),__source:{fileName:Q,lineNumber:265,columnNumber:11}}))))}}var te=Object(c.a)(ee,J),ae="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopup.jsx";function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ie=[f.kKeyboardTabToAll,f.kClockShowSeconds,f.kClockMode];class se extends o.a.PureComponent{constructor(e){super(e),ne(this,"setAlarmHour",e=>{this.setState({alarmHour:e})}),ne(this,"setAlarmMinute",e=>{this.setState({alarmMinute:e})}),ne(this,"setCountdownHour",e=>{this.setState({countdownHour:e})}),ne(this,"setCountdownMinute",e=>{this.setState({countdownMinute:e})}),ne(this,"setMode",e=>{i.a.set(f.kClockMode,e),this.setState({previewMode:e})}),ne(this,"setPreviewMode",e=>{this.setState({previewMode:e})}),ne(this,"getClockStyle",()=>{const e=this.props.now.getHours(),t=this.props.prefValues[f.kClockShowSeconds]?this.props.now.getSeconds():0,a=this.props.now.getMinutes(),n=a/60,i={"--hourDeg":(e+n)%12*30-90+"deg","--minuteDeg":6*a+"deg","--secondDeg":this.props.prefValues[f.kClockShowSeconds]?`${6*t+360*a+60*e*360}deg`:"0deg"};if("countdown"===this.state.previewMode&&(i["--hourPercent"]=this.state.countdownHour<12?this.state.countdownHour/.12:100,i["--minutePercent"]=this.state.countdownMinute/.6),"alarm"===this.state.previewMode){const t=this.state.alarmHour>e?this.state.alarmHour-e:this.state.alarmHour-e+60,s=t>0?t-n:0,r=this.state.alarmMinute>a?this.state.alarmMinute-a:this.state.alarmMinute-a+60;i["--hourPercent"]=s<12?s/.12:100,i["--minutePercent"]=r/.6}return i}),ne(this,"getInfoText",e=>{const t=e.filter(e=>"alarm"===e.type),a=e.filter(e=>"countdown"===e.type);return t.length>0&&a.length>0?Object(h.a)("$1 alarm","$1 alarms",[t.length])+", "+Object(h.a)("$1 countdown","$1 countdowns",[a.length]):t.length>0?Object(h.a)("$1 alarm","$1 alarms",[t.length]):a.length>0?Object(h.a)("$1 countdown","$1 countdowns",[a.length]):F()().format(V.getTimeAndDateFormat())}),this.state={alarmHour:13,alarmMinute:37,countdownHour:0,countdownMinute:0,previewMode:"alarm"===this.props.prefValues[f.kClockMode]?"alarm":"countdown"}}render(){const e=this.props.timers,t=e.filter(e=>this.props.now.valueOf()<e.date),a=e.filter(e=>this.props.now.valueOf()>e.date);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ClockPopup-Header",__source:{fileName:ae,lineNumber:155,columnNumber:7}},o.a.createElement("h2",{__source:{fileName:ae,lineNumber:156,columnNumber:9}},Object(h.a)("Clock")),o.a.createElement("div",{className:"info",__source:{fileName:ae,lineNumber:157,columnNumber:9}},this.getInfoText(t))),o.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:ae,lineNumber:162,columnNumber:7}},o.a.createElement("div",{style:this.getClockStyle(),className:G()("ClockPopup-BigClock",{"ClockPopup-BigClock--ShowSeconds":this.props.prefValues[f.kClockShowSeconds]}),dangerouslySetInnerHTML:{__html:N.e},__source:{fileName:ae,lineNumber:163,columnNumber:9}}),o.a.createElement("div",{className:"ClockPopup-Active",__source:{fileName:ae,lineNumber:170,columnNumber:9}},t.map((e,t)=>o.a.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Active",__source:{fileName:ae,lineNumber:172,columnNumber:20}},o.a.createElement("button",{className:"ClockPopup-Timer-Name",__source:{fileName:ae,lineNumber:173,columnNumber:15}},V.getActiveLabel(e,!0)),o.a.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>V.removeTimer(e.id),dangerouslySetInnerHTML:{__html:N.Nd},__source:{fileName:ae,lineNumber:176,columnNumber:15}})))),a.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{__source:{fileName:ae,lineNumber:188,columnNumber:13}},Object(h.a)("Past Timers")),o.a.createElement("div",{className:"ClockPopup-Passed",__source:{fileName:ae,lineNumber:191,columnNumber:13}},a.map(e=>o.a.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Passed",__source:{fileName:ae,lineNumber:193,columnNumber:17}},o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],className:"ClockPopup-Timer-Name",__source:{fileName:ae,lineNumber:197,columnNumber:19}},V.getName(e)),o.a.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>V.removeTimer(e.id),dangerouslySetInnerHTML:{__html:N.Nd},__source:{fileName:ae,lineNumber:203,columnNumber:19}}))))),o.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:ae,lineNumber:215,columnNumber:9}},o.a.createElement("div",{className:"toolbar-group",__source:{fileName:ae,lineNumber:216,columnNumber:11}},o.a.createElement(m.a,{title:Object(h.a)("Countdown"),isPressed:"countdown"===this.props.prefValues[f.kClockMode],onClick:()=>this.setMode("countdown"),__source:{fileName:ae,lineNumber:217,columnNumber:13}}),o.a.createElement(m.a,{title:Object(h.a)("Alarm"),isPressed:"alarm"===this.props.prefValues[f.kClockMode],onClick:()=>this.setMode("alarm"),__source:{fileName:ae,lineNumber:222,columnNumber:13}}))),"countdown"===this.props.prefValues[f.kClockMode]&&o.a.createElement(te,{now:this.props.now,hour:this.state.countdownHour,minute:this.state.countdownMinute,hidePopup:this.props.hidePopup,setHour:this.setCountdownHour,setMinute:this.setCountdownMinute,setMode:this.setPreviewMode,countdowns:e.filter(e=>"countdown"===e.type),__source:{fileName:ae,lineNumber:230,columnNumber:11}}),"alarm"===this.props.prefValues[f.kClockMode]&&o.a.createElement(Z,{now:this.props.now,alarms:e.filter(e=>"alarm"===e.type),hidePopup:this.props.hidePopup,hour:this.state.alarmHour,minute:this.state.alarmMinute,setHour:this.setAlarmHour,setMode:this.setPreviewMode,setMinute:this.setAlarmMinute,__source:{fileName:ae,lineNumber:242,columnNumber:11}})))}}var re=Object(c.a)(se,ie),oe="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockButton.jsx";function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ce=[f.kClockButtonShowDate,f.kClockButtonShowName,f.kClockButtonStyle,f.kClockAlarmPresets,f.kClockCountdownPresets,f.kClockNotificationSound,f.kClockShowSeconds,f.kClockTimers],ue={"":Object(h.a)("other","None"),"../../resources/notification_ding.opus":Object(h.a)("Ding"),"../../resources/notification_rooster.opus":Object(h.a)("Rooster"),"../../resources/notification_tada.opus":Object(h.a)("Tada")};class me extends o.a.PureComponent{constructor(e){super(e),le(this,"buttonRef",o.a.createRef()),le(this,"heartbeat",()=>{this.now=new Date;const e=this.now.getMinutes(),t=this.now.getHours();let a=!1;e!==this.state.minute&&t!==this.state.hour?(this.setState({hour:t,minute:e}),a=!0):e!==this.state.minute?(this.setState({minute:e}),a=!0):this.props.prefValues[f.kClockShowSeconds]&&(this.forceUpdate(),a=!0),this.props.prefValues[f.kClockTimers].forEach(e=>{Math.round(e.date/1e3)===Math.round(this.now.valueOf()/1e3)&&(a||this.forceUpdate(),V.completeTimer(e))})}),le(this,"getActiveTimers",()=>this.props.prefValues[f.kClockTimers].sort((e,t)=>e.date-t.date).filter(e=>this.now.valueOf()<e.date)),le(this,"getFirstTimer",()=>this.getActiveTimers()[0]),le(this,"getActiveMode",()=>{const e=this.getFirstTimer();return e?e.type:"time"}),le(this,"hidePopup",(e,t)=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1},()=>{e&&t&&setTimeout(()=>{V.setTimer(e,t)},120)})}),le(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),le(this,"getClockStyle",()=>{const e=this.getFirstTimer(),t=this.now.getHours(),a=this.now.getMinutes(),n={"--hourDeg":`${30*(t+a/60)-90}deg`,"--minuteDeg":`${6*a+360*t}deg`};if(e&&"countdown"===e.type){const t=F()(e.date).diff(this.now,"seconds"),a=F.a.duration(t,"seconds"),i=a.hours();n["--countdownHourPercent"]=i%12/.12,n["--countdownMinutePercent"]=i>0?100:a.minutes()/.6}return n}),le(this,"getButtonText",()=>{const e="image"!==this.props.prefValues[f.kClockButtonStyle],t=this.props.prefValues[f.kClockButtonShowDate],a=this.props.prefValues[f.kClockButtonShowName],n=this.getFirstTimer();return e&&n&&"countdown"===n.type?V.getActiveLabel(n,a):e&&t?F()(this.now).format(V.getTimeAndDateFormat()):e?F()(this.now).format(V.getTimeFormat()):t?F()(this.now).format(V.getDateFormat()):void 0}),le(this,"getTooltip",()=>{const e=this.getActiveTimers();let t=F()(this.now).format("LL LT");if(e.length>0){const a=e.filter(e=>"countdown"===e.type),n=e.filter(e=>"alarm"===e.type);a.length>0&&(t+="\n\n"+Object(h.a)("Countdowns"),a.forEach(e=>{t+="\n"+V.getActiveLabel(e,!0)})),n.length>0&&(t+="\n\n"+Object(h.a)("Alarms"),n.forEach(e=>{t+="\n"+V.getActiveLabel(e,!0)}))}return t}),this.now=new Date,this.state={isPopupOpen:!1,hour:this.now.getHours(),minute:this.now.getMinutes()}}componentDidMount(){this.intervalRef=setInterval(this.heartbeat,1e3)}componentWillUnmount(){clearInterval(this.intervalRef)}componentDidUpdate(e,t){const a=this.buttonRef.current;this.state.isPopupOpen&&(null==a||a.updateButtonRect())}render(){const e=this.props.prefValues[f.kClockTimers].sort((e,t)=>e.date-t.date),t=this.getActiveMode(),a=this.getFirstTimer(),n=this.props.prefValues[f.kClockButtonStyle],s=[{visible:this.props.prefValues[f.kClockCountdownPresets].length>0,items:this.props.prefValues[f.kClockCountdownPresets].map(e=>({handler:()=>V.setCountdownWithPreset(e),...Object(A.a)(e.name)})),...Object(A.a)("New Countdown")},{visible:this.props.prefValues[f.kClockAlarmPresets].length>0,items:this.props.prefValues[f.kClockAlarmPresets].map(e=>({handler:()=>V.setAlarmWithPreset(e),...Object(A.a)(e.name)})),...Object(A.a)("New Alarm")},{items:[{type:"checkbox",checked:"imageandtext"===n,handler:()=>i.a.set(f.kClockButtonStyle,"imageandtext"),...Object(A.a)("Image and Text")},{type:"checkbox",checked:"image"===n,handler:()=>i.a.set(f.kClockButtonStyle,"image"),...Object(A.a)("Image only")},{type:"checkbox",checked:"text"===n,handler:()=>i.a.set(f.kClockButtonStyle,"text"),...Object(A.a)("Text only")}],...Object(A.a)("Button Style")},{items:[{type:"checkbox",checked:this.props.prefValues[f.kClockButtonShowName],handler:()=>i.a.set(f.kClockButtonShowName,!0),...Object(A.a)("Show Name")},{type:"checkbox",checked:!this.props.prefValues[f.kClockButtonShowName],handler:()=>i.a.set(f.kClockButtonShowName,!1),...Object(A.a)("Time Only")}],...Object(A.a)("Button Label")},{items:Object.keys(ue).map(e=>{const t=ue[e];return{type:"checkbox",checked:this.props.prefValues[f.kClockNotificationSound]===e,handler:()=>i.a.set(f.kClockNotificationSound,e),...Object(A.a)(t)}}),...Object(A.a)("Notification Sound")},{type:"checkbox",checked:this.props.prefValues[f.kClockShowSeconds],handler:()=>i.a.set(f.kClockShowSeconds,!this.props.prefValues[f.kClockShowSeconds]),...Object(A.a)("Show Seconds")},{type:"checkbox",checked:this.props.prefValues[f.kClockButtonShowDate],handler:()=>i.a.set(f.kClockButtonShowDate,!this.props.prefValues[f.kClockButtonShowDate]),...Object(A.a)("Show Date")}];return o.a.createElement(m.a,{className:`ClockButton ClockButton--${t}`,isOn:"time"!==t,onClick:this.togglePopup,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,ref:this.buttonRef,tooltip:this.getTooltip(),title:this.getButtonText(),image:"text"!==n?N.W[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,popupWidth:210,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"ClockPopup",isPopupVisible:this.state.isPopupOpen,menu:s,style:this.getClockStyle(),__source:{fileName:oe,lineNumber:337,columnNumber:12}},o.a.createElement(re,{now:this.now,timers:e,firstTimer:a,hidePopup:this.hidePopup,__source:{fileName:oe,lineNumber:364,columnNumber:7}}))}}var de=Object(c.a)(me,ce),he=a(784),pe=a(131),be=a(175),ge=a(47),Ne=a(282),fe=a(56),_e=a(13),ve=a(95),Ee="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\MailNavButton.jsx";function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const we=[f.kMailIsTurnedOff,f.kMailSearchThreading,f.kMailViewLayout];class Oe extends o.a.PureComponent{constructor(...e){super(...e),Ce(this,"state",{canGoBack:!1,canGoForward:!1}),Ce(this,"_isMounted",!1),Ce(this,"updateNavigationButtons",()=>{this.setState({canGoBack:fe.a.canGoBack(),canGoForward:fe.a.canGoForward()})}),Ce(this,"checkForMail",()=>{be.a.checkForMail()}),Ce(this,"_onHistorySelection",e=>{ge.a.selectFolderFromHistory(e)}),Ce(this,"_getHistoryMenuPromise",e=>()=>{const t=fe.a.getHistoryIndex(),a=_e.c.unsafeGetActivePage().url,i=fe.a.getSelectionHistory(),s="backward"===e?i.slice(0,t).reverse():i.slice(t+1),r="backward"===e?(e,t)=>e-t-1:(e,t)=>e+t+1,o=s.map((e,i)=>({url:a,handler:this._onHistorySelection.bind(null,r(t,i)),...n.a.makeNumberMnemonic(e.name,i)}));return Promise.resolve(o)}),Ce(this,"selectHistoryItem",e=>{ge.a.selectFolderFromHistory(e)}),Ce(this,"rewindFolderSelection",()=>{ge.a.selectFolderFromHistory(0)}),Ce(this,"forwardToEndOfFolderSelection",()=>{ge.a.selectFolderFromHistory(fe.a.getSelectionHistory().length-1)}),Ce(this,"toggleLayout",()=>{const e=["horizontal","vertical","vertical_wide"],t=e.indexOf(this.props.prefValues[f.kMailViewLayout]),a=e[(t+1)%3];i.a.set(f.kMailViewLayout,a)})}componentDidMount(){this._isMounted=!0,Ne.a.addChangeListener(this.updateNavigationButtons),pe.a.addChangeListener(this.updateNavigationButtons)}componentWillUnmount(){this._isMounted=!1,Ne.a.removeChangeListener(this.updateNavigationButtons),pe.a.removeChangeListener(this.updateNavigationButtons)}render(){const{name:e,size:t}=this.props;switch(e){case"MailBack":return o.a.createElement(m.a,{menuOrigin:this.props.menuOrigin,disabled:!this.state.canGoBack,onClick:ve.a.back,tooltip:Object(h.a)("Go to previous page")+"\n"+Object(h.a)("Hold for history list"),menuPromise:this._getHistoryMenuPromise("backward"),customizeMenu:this.props.customizeMenu,image:N.hc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Ee,lineNumber:157,columnNumber:16}});case"MailForward":return o.a.createElement(m.a,{menuOrigin:this.props.menuOrigin,disabled:!this.state.canGoForward,onClick:ve.a.forward,tooltip:Object(h.a)("Go to next page")+"\n"+Object(h.a)("Hold for forward history list"),menuPromise:this._getHistoryMenuPromise("forward"),image:N.jc[this.props.size],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Ee,lineNumber:174,columnNumber:16}});case"MailReload":return o.a.createElement(m.a,{disabled:this.props.disabled,menuOrigin:this.props.menuOrigin,tooltip:Object(h.a)("Check for mail"),onClick:this.checkForMail,image:N.Wb[this.props.size],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Ee,lineNumber:191,columnNumber:16}});case"MailViewLayout":const a=this.props.prefValues[f.kMailViewLayout];let n=N.Sd[t];return"vertical"===a?n=N.Td[t]:"vertical_wide"===a&&(n=N.Ud[t]),o.a.createElement(m.a,{tooltip:Object(h.a)("Toggle View"),onClick:this.toggleLayout,disabled:this.props.prefValues[f.kMailIsTurnedOff],image:n,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Ee,lineNumber:214,columnNumber:16}});case"MailViewThreading":const s=this.props.prefValues[f.kMailSearchThreading];return(o.a.createElement(m.a,{tooltip:s?Object(h.a)("Hide Message Threads"):Object(h.a)("Show Message Threads"),onClick:()=>i.a.set(f.kMailSearchThreading,!s),image:s?N.cc[t]:N.dc[t],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:e,__source:{fileName:Ee,lineNumber:230,columnNumber:16}}));default:return console.warn(`ToolbarButton “${e}” not found`),null}}}var ye=Object(c.a)(Oe,we),Se=a(29),Te=a(284);function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ae extends r.PureComponent{constructor(...e){super(...e),ke(this,"state",{query:Se.a.getQuery()}),ke(this,"doSearch",Object(Te.a)(()=>{const e=this.state.query;ge.a.changeQuery(e),ge.a.updateQueryResults(e)},200)),ke(this,"onQueryChange",()=>{this.setState({query:this.refs.searchInput.value},this.doSearch)}),ke(this,"selectedFolderChanged",()=>{this.setState({query:""})})}UNSAFE_componentWillMount(){fe.a.addChangeListener(this.selectedFolderChanged)}componentWillUnmount(){fe.a.removeChangeListener(this.selectedFolderChanged)}render(){return r.createElement("input",{ref:"searchInput",className:"searchfield-input",type:"search",placeholder:Object(h.a)("mail","Search"),value:this.state.query,onChange:this.onQueryChange,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchField.jsx",lineNumber:44,columnNumber:7}})}}var Ie=Ae,De=a(41),Me=a(34),Pe=a(442),xe=a(99),Le=a(3),je="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchListButtons.jsx";function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Be=[f.kPanelsAsOverlayEnabled,f.kPanelsPosition,f.kMailSearchThreading,f.kMailViewDimensions,f.kMailViewLayout,f.kToolbarsMail,f.kToolbarsMailComposer,f.kToolbarsMailMessage];class Fe extends o.a.Component{constructor(...e){super(...e),Re(this,"state",{allMessages:!1,searchInput:"",showMailingLists:!0,showMailingListsButton:!1,showRead:!0,showReadButton:!1,showDeleted:!1,showDeletedButton:!1,showCustomFolder:!0,showCustomFolderButton:!1,showJunk:!1,showJunkButton:!1,showFeeds:!1,showFeedsButton:!1,panelWidth:De.d.getPanelWidth(),panelButtonsVisible:De.d.getPanelButtonsVisible(),panelContentVisible:De.d.getPanelContentVisible()}),Re(this,"panelStoreChanged",()=>{this.setState({panelWidth:De.d.getPanelWidth(),panelButtonsVisible:De.d.getPanelButtonsVisible(),panelContentVisible:De.d.getPanelContentVisible()})}),Re(this,"checkIfAllMessages",()=>{const e=Ne.a.getOptions();this.setState({allMessages:!!e.allMessages})}),Re(this,"selectedFolderChanged",()=>{let e,t;const a=fe.a.getSelectedFolder();if(!a)return;e=a.accountId,t=a.path;const n=Se.a.getByFolder(e,t||Le.m),i=n?n.filterValue:{...Me.b.getSearchListButtons("")};n&&this.updateViews(n),this.updateShowButtons(i)}),Re(this,"updateViews",e=>{this.setState(Me.b.getFilterOptions(e))}),Re(this,"_toggleFilter",e=>{const t=fe.a.getSelectedFolder(),a=t&&this.getOldFilter(t);a&&this.setState(t=>{const n=!t[e],i=Object(xe.c)(a,t=>{t.filterValue[e]=n});return ge.a.putFilter(i,a),{[e]:n}})}),Re(this,"toggleShowFeedsInUnread",()=>{this._toggleFilter("showFeeds")}),Re(this,"toggleShowMailingLists",()=>{this._toggleFilter("showMailingLists")}),Re(this,"toggleShowRead",()=>{const e=fe.a.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const a=Object(xe.c)(t,e=>{Me.b.toggleExcludeFlag(e.filterValue,Le.O.SEEN)});this.setState({showRead:!Me.b.shouldExcludeFlag(a.filterValue,Le.O.SEEN)}),ge.a.putFilter(a,t)}),Re(this,"toggleShowDeleted",()=>{const e=fe.a.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const a=Object(xe.c)(t,e=>{const t=e.accountId,a=e.filterValue;Me.b.isVirtualViewFolder(t)?Me.b.shouldExcludeFlag(a,Le.O.DELETED)!==Me.b.shouldExcludeFolderType(a,Le.xb)?Me.b.toggleExcludeFlag(a,Le.O.DELETED):(Me.b.toggleExcludeFlag(a,Le.O.DELETED),Me.b.toggleExcludeFolderType(a,Le.xb)):Me.b.shouldIncludeAccountFolderType(a,t,Le.xb)===Me.b.shouldExcludeFlag(a,Le.O.DELETED)?Me.b.toggleExcludeFlag(a,Le.O.DELETED):(Me.b.toggleIncludeAccountFolderType(a,t,Le.xb),Me.b.toggleExcludeFlag(a,Le.O.DELETED))});this.setState({showDeleted:!Me.b.shouldExcludeFlag(a.filterValue,Le.O.DELETED)}),ge.a.putFilter(a,t)}),Re(this,"toggleShowJunk",()=>{const e=fe.a.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const a=Object(xe.c)(t,e=>{const t=e.accountId,a=e.filterValue;Me.b.isVirtualViewFolder(t)?(Me.b.toggleExcludeFolderType(a,Le.D),this.setState({showJunk:!Me.b.shouldExcludeFolderType(a,Le.D)})):(Me.b.toggleIncludeAccountFolderType(a,t,Le.D),this.setState({showJunk:Me.b.shouldIncludeAccountFolderType(a,t,Le.D)}))});ge.a.putFilter(a,t)}),Re(this,"toggleshowCustomFolder",async()=>{const e=fe.a.getSelectedFolder(),t=e&&this.getOldFilter(e);if(!t)return;const a=Object(xe.c)(t,e=>{const{accountId:t,filterValue:a}=e;Me.b.isVirtualViewFolder(t)&&(Me.b.toggleExcludeFolderType(a,Le.eb),this.setState({showCustomFolder:!Me.b.shouldExcludeFolderType(a,Le.eb)}))});ge.a.putFilter(a,t)}),Re(this,"getOldFilter",e=>Se.a.getByFolder(e.accountId,e.path||Le.m)),Re(this,"updateShowButtons",e=>{this.setState({showMailingListsButton:this._updateShowButton(e,"showMailingListsButton"),showReadButton:this._updateShowButton(e,"showReadButton"),showDeletedButton:this._updateShowButton(e,"showDeletedButton"),showJunkButton:this._updateShowButton(e,"showJunkButton"),showFeedsButton:this._updateShowButton(e,"showFeedsButton"),showCustomFolderButton:this._updateShowButton(e,"showCustomFolderButton")})}),Re(this,"_updateShowButton",(e,t)=>!e.hasOwnProperty(t)||e[t]),Re(this,"getFieldStyle",e=>{const{prefValues:t}=this.props,{panelWidth:a,panelButtonsVisible:n,panelContentVisible:i}=this.state,s="list"!==e?0:6,r=!t[f.kPanelsAsOverlayEnabled]&&"left"===t[f.kPanelsPosition],o=34*t["composer"===e?f.kToolbarsMailComposer:"message"===e?f.kToolbarsMailMessage:f.kToolbarsMail].indexOf("MailSearch");if("horizontal"===t[f.kMailViewLayout])return{flexBasis:"list"!==e?0:360,marginRight:s};const l=r?o>a?o-a:0:o,c=t[f.kMailViewDimensions],u=t[f.kPanelsAsOverlayEnabled]&&n?i?34:a:0,m="vertical_wide"===t[f.kMailViewLayout];return{width:"list"!==e?0:Math.min(Math.max((m?c.widthWide:c.width)-l+u-(r&&i?0:s),270),800),marginRight:s}})}componentDidMount(){De.d.addChangeListener(this.panelStoreChanged),fe.a.addChangeListener(this.selectedFolderChanged),Ne.a.addChangeListener(this.checkIfAllMessages),this.selectedFolderChanged(),this.checkIfAllMessages()}componentWillUnmount(){De.d.removeChangeListener(this.panelStoreChanged),Ne.a.removeChangeListener(this.checkIfAllMessages),fe.a.removeChangeListener(this.selectedFolderChanged)}getLeftSpacerStyle(e){const{prefValues:t}=this.props,{panelWidth:a}=this.state,n="list"!==e?0:6,i=!t[f.kPanelsAsOverlayEnabled]&&"left"===t[f.kPanelsPosition],s=34*t["composer"===e?f.kToolbarsMailComposer:"message"===e?f.kToolbarsMailMessage:f.kToolbarsMail].indexOf("MailSearch");return"horizontal"===t[f.kMailViewLayout]?{width:Math.max(i?a-s:n,n),flexShrink:5}:{width:i?Math.max(a-s,n):n,flexShrink:5}}render(){const e=this.state.allMessages,t=_e.c.unsafeGetActivePage().url;let a="list";return Object(Pe.a)(t)?a="composer":Object(Pe.b)(t)&&(a="message"),"list"!==a?o.a.createElement("div",{className:"toolbar",style:this.getFieldStyle(a),__source:{fileName:je,lineNumber:396,columnNumber:14}}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:this.getLeftSpacerStyle(a),__source:{fileName:je,lineNumber:401,columnNumber:9}}),o.a.createElement("div",{className:"toolbar",style:this.getFieldStyle(a),__source:{fileName:je,lineNumber:402,columnNumber:9}},o.a.createElement("div",{className:"SearchField",__source:{fileName:je,lineNumber:403,columnNumber:11}},o.a.createElement(Ie,{__source:{fileName:je,lineNumber:405,columnNumber:13}}),o.a.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:je,lineNumber:407,columnNumber:13}},this.state.showReadButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showRead,tooltip:Object(h.a)("Show Read"),onClick:this.toggleShowRead,image:this.state.showRead?N.Vb:N.Ub.small,__source:{fileName:je,lineNumber:409,columnNumber:17}}),this.state.showCustomFolderButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showCustomFolder,tooltip:Object(h.a)("Show Messages from Custom IMAP Folders"),onClick:this.toggleshowCustomFolder,image:this.state.showCustomFolder?N.qb:N.Mb.small,__source:{fileName:je,lineNumber:419,columnNumber:17}}),this.state.showMailingListsButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showMailingLists,tooltip:Object(h.a)("Show Mailing Lists"),onClick:this.toggleShowMailingLists,image:this.state.showMailingLists?N.Sb:N.Rb.small,__source:{fileName:je,lineNumber:430,columnNumber:17}}),this.state.showFeedsButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showFeeds,tooltip:Object(h.a)("Show Feeds"),onClick:this.toggleShowFeedsInUnread,image:this.state.showFeeds?N.Sc:N.Rc.small,__source:{fileName:je,lineNumber:440,columnNumber:17}}),this.state.showJunkButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showJunk,tooltip:Object(h.a)("Show Junk"),onClick:this.toggleShowJunk,image:this.state.showJunk?N.bc:N.ac.small,__source:{fileName:je,lineNumber:450,columnNumber:17}}),this.state.showDeletedButton&&!e&&o.a.createElement(m.a,{isOn:this.state.showDeleted,tooltip:Object(h.a)("Show Trash"),onClick:this.toggleShowDeleted,image:this.state.showDeleted?N.Nb:N.Wd.small,__source:{fileName:je,lineNumber:460,columnNumber:17}})))))}}var Ue=Object(c.a)(Fe,Be),He=a(45),Ve=a.n(He),We=a(154),ze=a(143),Ge=a.n(ze),Ke=a(12),Ye=a(264),$e=a.n(Ye),Xe=a(49),Ze=a(58),Qe=a(298);class qe extends Ge.a{getInitialState(){return{accounts:new Map,maxSles:5}}reduce(e,t){switch(t.actionType){case"MAIL_INDEX_UPDATE":Ke.a.waitFor([Se.a.dispatchToken]);const{addedSles:a,removedSles:n}=t.updates;return Object(xe.a)(e,e=>{n&&function(e,t){const a=new Set(e.map(({id:e})=>e));t.accounts.forEach(e=>{e.sles=e.sles.filter(({id:e})=>!a.has(e))})}(n,e),a&&Je(a,e)});case"MAIL_INIT_INDEX_BATCH":return Ke.a.waitFor([Se.a.dispatchToken]),Object(xe.a)(e,e=>{Je(t.sleBatch,e)});case"MAIL_STOP":return this.getInitialState();default:return e}}getSles(e){const{accounts:t}=this.getState(),a=[...t.keys()],n=new Map(a.map(e=>[e,0])),i=[];for(;i.length<e;){let e,s;for(const i of a){const a=n.get(i);if(void 0===a)throw new Error("account index not found "+i);const r=t.get(i);if(void 0===r)throw new Error("account data not found "+i);const o=r.sles[a];o&&((!s||o.sentDate>s.sentDate)&&(s=o,e=i))}if(!e||!s)break;{const t=n.get(e);if(void 0===t)throw new Error("account index not found "+e);n.set(e,t+1),i.push(s)}}return i}getSlesByAccountId(e,t){const a=this.getState().accounts.get(e);if(!a)throw new Error("Account "+e+" not found");const{sles:n}=a;return n.slice(0,t)}}function Je(e,t){const{accounts:a,maxSles:n}=t;for(const t of e){const e=new Set,i=Xe.a.getByIds(t.sourceFilterIds);for(const t of i){const{accountId:a,path:n}=t;Ze.a.getFolderType(a,n)===Le.v&&e.add(a)}for(const i of e){let e=a.get(i);e||(e={sles:[]},a.set(i,e));const{sles:s}=e;let r=$e()(s,t,(e,t)=>t.sentDate-e.sentDate);r<0&&(r=-r-1),r<n&&(s.splice(r,0,Object(Qe.a)(t)),s.length>n&&s.pop())}}}var et=new qe(Ke.a),tt=a(242),at=a(36),nt=a(8),it=a(206),st=a(207),rt=a(767),ot=a(7),lt=a(25),ct="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailStatusPopup.jsx";function ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const mt=[f.kKeyboardTabToAll];class dt extends o.a.PureComponent{constructor(e){var t;super(e),ut(this,"checkIfMailTabActive",()=>{const e=_e.c.unsafeGetActivePage(),t=null==e?void 0:e.get("isMailPage");this.setState({isMailTabActive:t})}),ut(this,"handleActiveMessageStoreChange",()=>{this.updateCurrentMessageDebounced()}),ut(this,"updateCurrentMessageDebounced",Object(Te.a)(()=>{this.setState({activeListEntry:pe.a.getActiveListEntry()})})),ut(this,"_openMessage",async e=>{const t=await nt.a.messages.get(e);this.props.hidePopup(),Object(rt.a)(t)}),ut(this,"_authenticate",async e=>{const t=await it.a.loadAccount(e);at.a.showMailAuthenticationDialog({account:t}),this.props.hidePopup()}),ut(this,"_viewLog",()=>{ot.a.devtoolsPrivate.toggleDevtools("console"),this.props.hidePopup()}),ut(this,"_openAccount",async e=>{this.props.hidePopup()}),ut(this,"openMailSettings",()=>{at.a.showSettings("mail"),this.props.hidePopup()}),ut(this,"getContextMenu",()=>{const e=s.a.get(f.kMailAccounts),t=[Le.c].concat(e.map(e=>e.MAIL_EMAIL));return[{handler:this.openMailSettings,...Object(A.a)("Mail Settings")},{handler:this._viewLog,...Object(A.a)("View Log")},{...Object(A.a)("Select Folder"),items:t.map(e=>({type:"checkbox",checked:this.props.accountId===e,handler:()=>this.props.updateRecentMessages(e),...Object(A.a)(e)}))}]}),this.state={activeListEntry:pe.a.getActiveListEntry(),isMailTabActive:null===(t=_e.c.unsafeGetActivePage())||void 0===t?void 0:t.get("isMailPage")}}componentDidMount(){pe.a.addChangeListener(this.handleActiveMessageStoreChange),_e.c.addChangeListener(this.checkIfMailTabActive)}componentWillUnmount(){pe.a.removeChangeListener(this.handleActiveMessageStoreChange),_e.c.removeChangeListener(this.checkIfMailTabActive)}render(){const e=s.a.get(f.kMailAccounts),t=this.state.activeListEntry;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"MailStatusPopup-Header",__source:{fileName:ct,lineNumber:162,columnNumber:7}},o.a.createElement("h2",{__source:{fileName:ct,lineNumber:163,columnNumber:9}},Object(h.a)("Mail Status")),o.a.createElement("div",{className:"toolbar button-popup-header-toolbar",__source:{fileName:ct,lineNumber:166,columnNumber:9}},o.a.createElement("div",{className:"toolbar-group",__source:{fileName:ct,lineNumber:167,columnNumber:11}},o.a.createElement(m.a,{onClick:()=>{at.a.showMail(),this.props.hidePopup()},disabled:this.state.isMailTabActive,menuOrigin:"bottomLeft",title:Object(h.a)("Show Mail"),__source:{fileName:ct,lineNumber:168,columnNumber:13}}),o.a.createElement("hr",{__source:{fileName:ct,lineNumber:177,columnNumber:13}}),o.a.createElement(m.a,{menuOrigin:"bottomLeft",image:N.vd.small,menu:this.getContextMenu(),tooltip:Object(h.a)("Recent message settings"),__source:{fileName:ct,lineNumber:178,columnNumber:13}})))),o.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:ct,lineNumber:188,columnNumber:7}},t&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{__source:{fileName:ct,lineNumber:192,columnNumber:13}},Object(h.a)("Current Message - $1",[t.subject])),o.a.createElement("dl",{className:"MailStatusPopup-MessageDetail",__source:{fileName:ct,lineNumber:195,columnNumber:13}},o.a.createElement("dt",{__source:{fileName:ct,lineNumber:196,columnNumber:15}},Object(h.a)("Internal ID")),o.a.createElement("dd",{__source:{fileName:ct,lineNumber:197,columnNumber:15}},t.searchListId),o.a.createElement("dt",{__source:{fileName:ct,lineNumber:198,columnNumber:15}},Object(h.a)("Thread ID")),o.a.createElement("dd",{__source:{fileName:ct,lineNumber:199,columnNumber:15}},t.threadKey),[...t.sources.entries()].map(([e,t])=>o.a.createElement(o.a.Fragment,{key:e,__source:{fileName:ct,lineNumber:201,columnNumber:17}},o.a.createElement("dt",{__source:{fileName:ct,lineNumber:202,columnNumber:19}},Object(h.a)("Filter ID: $1",[e])),o.a.createElement("dd",{__source:{fileName:ct,lineNumber:205,columnNumber:19}},o.a.createElement("span",{__source:{fileName:ct,lineNumber:206,columnNumber:21}},t.read?Object(h.a)("Read"):Object(h.a)("Unread")),", ",o.a.createElement("span",{__source:{fileName:ct,lineNumber:211,columnNumber:21}},t.deleted?Object(h.a)("Deleted"):Object(h.a)("Not deleted")),", ",o.a.createElement("span",{__source:{fileName:ct,lineNumber:216,columnNumber:21}},t.internal?Object(h.a)("Internal"):Object(h.a)("External"))))))),o.a.createElement("h3",{__source:{fileName:ct,lineNumber:228,columnNumber:9}},Object(h.a)("Accounts")),o.a.createElement("div",{className:"MailStatusPopup-List",__source:{fileName:ct,lineNumber:231,columnNumber:9}},e.map(e=>{const t=e.MAIL_EMAIL;let a=!1,n=!1,i=!1,s=!1,r=!1;return e.offline?a=!0:tt.a.isConnected(t)?n=!0:tt.a.isConnecting(t)?i=!0:tt.a.hasAuthenticationError(t)?s=!0:tt.a.hasError(t)&&(r=!0),o.a.createElement(o.a.Fragment,{key:t,__source:{fileName:ct,lineNumber:247,columnNumber:20}},o.a.createElement("button",{tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:()=>this._openAccount(t),className:"MailStatusPopup-ListItem MailStatusPopup-Account",__source:{fileName:ct,lineNumber:248,columnNumber:15}},o.a.createElement("div",{className:"MailStatusPopup-Account-Name",__source:{fileName:ct,lineNumber:255,columnNumber:17}},t),o.a.createElement("div",{className:"MailStatusPopup-Account-Status",__source:{fileName:ct,lineNumber:258,columnNumber:17}},a&&Object(h.a)("Offline"),n&&Object(h.a)("Connected"),i&&Object(h.a)("Connecting..."),s&&Object(h.a)("Authentication Error"),r&&Object(h.a)("Error"))),s&&o.a.createElement("button",{className:"MailStatusPopup-Account-Status-Retry",onClick:this._authenticate.bind(this,t),__source:{fileName:ct,lineNumber:267,columnNumber:17}},Object(h.a)("Retry")))})),o.a.createElement("h3",{__source:{fileName:ct,lineNumber:278,columnNumber:9}},this.props.accountId===Le.c?Object(h.a)("Recent in All Messages"):Object(h.a)("Recent in $1",[Object(h.a)(this.props.accountId)])),o.a.createElement("div",{className:"MailStatusPopup-List",__source:{fileName:ct,lineNumber:285,columnNumber:9}},this.props.recentMessages.map(e=>{const t=st.a.get(e.fromIds);return(o.a.createElement("button",{key:e.searchListId,tabIndex:this.props.prefValues[f.kKeyboardTabToAll],className:G()("MailStatusPopup-ListItem","MailStatusPopup-Mail",{"MailStatusPopup-Mail--Unseen":e.unseen}),onClick:()=>this._openMessage(e.searchListId),__source:{fileName:ct,lineNumber:288,columnNumber:20}},o.a.createElement("div",{className:"MailStatusPopup-Mail-Title",__source:{fileName:ct,lineNumber:298,columnNumber:15}},e.subject),o.a.createElement("div",{className:"MailStatusPopup-Mail-Sender",__source:{fileName:ct,lineNumber:301,columnNumber:15}},t[0].address),o.a.createElement("div",{className:"MailStatusPopup-Mail-Date",__source:{fileName:ct,lineNumber:304,columnNumber:15}},F()(e.sentDate).fromNow())))}))))}}ut(dt,"contextType",lt.a);var ht=Object(c.a)(dt,mt),pt=a(785),bt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailStatusButton.jsx";function gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Nt=[f.kMailAccounts,f.kMailCountersPanelUnseenEnabled,f.kMailCountersStatusButtonEnabled,f.kMailIsTurnedOff,f.kMailStatusButtonStyle,f.kRssSettings];class ft extends o.a.PureComponent{constructor(e){super(e),gt(this,"_isMounted",!1),gt(this,"getMessageCount",()=>this.props.prefValues[f.kMailCountersPanelUnseenEnabled]?this.state.unseen:this.state.unread),gt(this,"handleMailFiltersStoreChange",e=>{switch(e.target){case"counters":const e=Se.a.getCounters("All Messages","Unread"),t=e?e.unseen:0,a=e?e.unread:0;return void this.setState({unseen:t,unread:a})}}),gt(this,"handleMailLatestStoreChange",()=>{this.updateRecentMessagesDebounced(this.state.accountId)}),gt(this,"handlePanelStoreChange",()=>{this.setState({isMailWindow:De.d.getIsMailWindow()})}),gt(this,"hidePopup",()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})}),gt(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),gt(this,"openMailAccountSheet",()=>{at.a.showMailAccountDialog()}),gt(this,"openMailSettings",()=>{at.a.showSettings("mail")}),gt(this,"updateRecentMessages",e=>{try{if(this._isMounted){const t=(e===Le.c?et.getSles(5):et.getSlesByAccountId(e,5)).map(e=>Se.a.createListEntry(e,[],!1));this.setState({accountId:e,recentMessages:t})}}catch(e){console.error(e)}}),gt(this,"updateRecentMessagesDebounced",Object(Te.a)(e=>this.updateRecentMessages(e),500,{leading:!0,maxWait:1e3})),gt(this,"getTooltip",()=>{const e=this.props.prefValues[f.kMailIsTurnedOff],t=this.props.prefValues[f.kMailAccounts].length+this.props.prefValues[f.kRssSettings].length>0;if(e||!t)return Object(h.a)("Mail");const a=this.props.prefValues[f.kMailCountersPanelUnseenEnabled],n=this.getMessageCount();let i=Object(h.a)("Mail Status");return n>0&&(i+=" "+(a?Object(h.a)("($1 unseen)","($1 unseen)",[n]):Object(h.a)("($1 unread)","($1 unread)",[n]))),this.state.recentMessages.length>0&&(i+="\n\n"),this.state.recentMessages.forEach((e,t)=>{t>0&&(i+="\n\n"),i+=e.subject;const a=st.a.get(e.fromIds);a.length>0&&(i+="\n"+a[0].address)}),i}),this.state={accountId:Le.c,isMailWindow:De.d.getIsMailWindow(),isPopupOpen:!1,recentMessages:[],unseen:0,unread:0}}componentDidMount(){Se.a.addChangeListener(this.handleMailFiltersStoreChange),De.d.addChangeListener(this.handlePanelStoreChange),this._mailLatestStoreToken=et.addListener(this.handleMailLatestStoreChange),this._isMounted=!0}componentWillUnmount(){this._isMounted=!1,Se.a.removeChangeListener(this.handleMailFiltersStoreChange),De.d.removeChangeListener(this.handlePanelStoreChange),this._mailLatestStoreToken.remove()}render(){if(!De.d.getIsMailWindow())return null;const e=this.props.prefValues[f.kMailStatusButtonStyle],t=this.props.prefValues[f.kMailCountersStatusButtonEnabled],a=this.props.prefValues[f.kMailIsTurnedOff],n=this.props.prefValues[f.kMailAccounts].length+this.props.prefValues[f.kRssSettings].length>0,s=this.props.prefValues[f.kMailCountersPanelUnseenEnabled];if(a)return null;const r=[{handler:this.openMailSettings,...Object(A.a)("Mail Settings")},{items:[{type:"checkbox",checked:"imageandtext"===e,handler:()=>i.a.set(f.kMailStatusButtonStyle,"imageandtext"),...Object(A.a)("Image and Text")},{type:"checkbox",checked:"image"===e,handler:()=>i.a.set(f.kMailStatusButtonStyle,"image"),...Object(A.a)("Image only")},{type:"checkbox",checked:"text"===e,handler:()=>i.a.set(f.kMailStatusButtonStyle,"text"),...Object(A.a)("Text only")}],...Object(A.a)("Button Style")},{type:"checkbox",checked:t,handler:()=>i.a.set(f.kMailCountersStatusButtonEnabled,!t),...Object(A.a)("Show message counter")}];return(o.a.createElement(m.a,{badgeColor:s?void 0:Ve()(this.props.vivaldiSettings.BROWSER_COLOR_FG),badgeText:t?Object(pt.b)(this.getMessageCount()):void 0,className:"MailStatusButton MailStatusButton--STATE",disabled:a,onClick:n?this.togglePopup:this.openMailAccountSheet,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,tooltip:this.getTooltip(),title:"image"!==e?Object(h.a)("Mail Status"):void 0,image:"text"!==e?N.Hb[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"MailStatusPopup ToolbarButtonPopup-DefaultStyles",popupWidth:400,isPopupVisible:this.state.isPopupOpen,menu:r,__source:{fileName:bt,lineNumber:266,columnNumber:12}},o.a.createElement(ht,{hidePopup:this.hidePopup,updateRecentMessages:this.updateRecentMessages,recentMessages:this.state.recentMessages,accountId:this.state.accountId,__source:{fileName:bt,lineNumber:302,columnNumber:7}})))}}var _t=Object(We.a)(Object(c.a)(ft,Nt),["BROWSER_COLOR_FG"]),vt=a(325),Et=a(68);var Ct={getItems:function(e,t){const a=[],n="read"===t?s.a.get(f.kMailReadHeadersHidden):s.a.get(f.kMailComposeHeadersHidden);return e.map(e=>{a.push({type:"checkbox",checked:!n.includes(e.ref),handler:this._setField.bind(this,e.ref,t),...e.labels})}),a},_setField:function(e,t){const a="read"===t?f.kMailReadHeadersHidden:f.kMailComposeHeadersHidden;let n=s.a.get(a).slice();n.includes(e)?n=n.filter(t=>t!==e):n.push(e),i.a.set(a,n)}},wt=a(786),Ot=a(14),yt=a(787),St=a(172),Tt=a(66),kt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageActionButtons.jsx";function At(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const It=[{ref:"from",labels:Object(A.a)("sender","From")},{ref:"cc",labels:Object(A.a)("Carbon Copy")},{ref:"bcc",labels:Object(A.a)("Blind Carbon Copy")}],Dt=[f.kMailSendOrQueue];class Mt extends r.PureComponent{constructor(...e){super(...e),At(this,"state",{standardFlag:"",customLabels:[],unread:!1,messageSelected:!1,showLabel:!1}),At(this,"activeMessageStoreChanged",()=>{const e=pe.a.getActiveListEntry();if(e){const t=Se.a.getListEntry(e.id);if(t){const e=fe.a.getSelectedFolder(),a=e&&Se.a.getByFolder(e.accountId,e.path);this.setState({messageSelected:!0,unread:!Object(St.a)(t.sources,a),standardFlag:Object(Tt.j)(t.flags),customLabels:Object(Tt.e)(t.flags)})}else this.setState({messageSelected:!1})}else this.setState({messageSelected:!1})}),At(this,"createCustomLabel",()=>{this.setState({showLabel:!0})}),At(this,"onCustomLabelDlgClose",(e,t)=>{e&&(Et.a.toggleLabel(t,this.state.customLabels)(),ge.a.addLabelsFilter(t)),this.setState({showLabel:!1})}),At(this,"closeCustomFlagDlg",()=>{this.setState({showLabel:!1})}),At(this,"getSendQueueMenu",()=>[{type:"checkbox",checked:"send"===this.props.prefValues[f.kMailSendOrQueue],handler:this.sendAndSetSendAsDefault,...Object(A.a)("Send")},{type:"checkbox",checked:"queue"===this.props.prefValues[f.kMailSendOrQueue],handler:this.queueAndSetQueueAsDefault,...Object(A.a)("Queue")}]),At(this,"sendAndSetSendAsDefault",()=>{"send"!==this.props.prefValues[f.kMailSendOrQueue]&&i.a.set(f.kMailSendOrQueue,"send")}),At(this,"queueAndSetQueueAsDefault",()=>{"queue"!==this.props.prefValues[f.kMailSendOrQueue]&&i.a.set(f.kMailSendOrQueue,"queue")}),At(this,"deleteDraftMessage",()=>{Ot.a.close(),vt.a.deleteDraftMessage()}),At(this,"customLabelsMenuData",()=>{const e=Et.a.getCustomLabelsMenu(this.state.customLabels);return e.push(n.a.separatorItem,{handler:this.createCustomLabel,...Object(A.a)("Add New Label...")}),this.state.customLabels.length>0&&e.push(n.a.separatorItem,{handler:Et.a.clearAllLabels.bind(null,this.state.customLabels),...Object(A.a)("Clear All Labels")}),e}),At(this,"getId",e=>{switch(e){case"MailMsgReply":case"MailMsgReplyToAll":return Le.rb;case"MailMsgForward":return Le.s;case"MailMsgStatusRead":return fe.a.isOptionAllowedAsDefault(Le.db)?Le.db:Le.Ab;case"MailMsgFlag":return Le.P;case"MailMsgLabel":return Le.R;case"MailMsgSpam":return Le.vb}return""})}componentDidMount(){pe.a.addChangeListener(this.activeMessageStoreChanged),this.activeMessageStoreChanged()}componentWillUnmount(){pe.a.removeChangeListener(this.activeMessageStoreChanged)}render(){const e=pe.a.isTrash(),t=pe.a.isJunk(),a=this.props.size;if(!fe.a.isOptionAllowedAsDefault(this.getId(this.props.name)))return null;switch(this.props.name){case"MailMsgEdit":return fe.a.isFolderAnEditMailFolder()?r.createElement(m.a,{tooltip:Object(h.a)("mail","Edit"),onClick:Et.a.openMessage,disabled:!this.state.messageSelected,image:N.ib[a],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:272,columnNumber:18}}):null;case"MailMsgReply":return r.createElement(m.a,{tooltip:Object(h.a)("Reply"),onClick:Et.a.reply,disabled:!this.state.messageSelected,image:N.Xb[a],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:289,columnNumber:16}});case"MailMsgReplyToAll":return r.createElement(m.a,{tooltip:Object(h.a)("Reply to All"),onClick:Et.a.replyAll,disabled:!this.state.messageSelected,image:N.Yb[a],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:304,columnNumber:16}});case"MailMsgForward":return r.createElement(m.a,{tooltip:Object(h.a)("mail","Forward"),onClick:Et.a.forward,disabled:!this.state.messageSelected,image:N.Pb[a],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:319,columnNumber:16}});case"MailMsgStatusRead":const n=fe.a.getSelectedFolder();let i=!0;return n&&n.accountId&&n.path&&(i=Ze.a.getFolderType(n.accountId,n.path)!==Le.yb),r.createElement(m.a,{tooltip:this.state.unread?Object(h.a)("Mark Read"):Object(h.a)("Mark Unread"),onClick:this.state.unread?Et.a.markRead:Et.a.markUnread,disabled:!this.state.messageSelected,isMenuIndicatorVisible:i,menu:fe.a.getGoToMenuItems(Le.S.toolbar),image:this.state.unread?N.ec[a]:N.Ub[a],menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:340,columnNumber:16}});case"MailMsgFlag":return r.createElement(m.a,{tooltip:Object(h.a)("Flag"),onClick:Et.a.toggleStandardFlag(this.state.standardFlag?this.state.standardFlag:Le.O.RED,this.state.standardFlag),disabled:!this.state.messageSelected,image:N.nb[a],isMenuIndicatorVisible:!0,menu:Et.a.getStandardFlagsMenu(this.state.standardFlag),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:363,columnNumber:16}});case"MailMsgLabel":return r.createElement(m.a,{tooltip:Object(h.a)("Label"),disabled:!this.state.messageSelected,image:N.Db[a],isMenuIndicatorVisible:!0,menu:this.customLabelsMenuData(),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,size:a,hidePopup:this.closeCustomFlagDlg,hasLightArrow:!0,popupClassName:"ToolbarButtonPopup-DefaultStyles",popupPosition:this.props.popupPosition,isPopupVisible:this.state.showLabel,__source:{fileName:kt,lineNumber:382,columnNumber:16}},r.createElement(wt.a,{onClose:this.onCustomLabelDlgClose,viewMode:"slide",__source:{fileName:kt,lineNumber:402,columnNumber:11}}));case"MailMsgTrash":const s=Object(yt.a)(e,Le.S.toolbar);return(r.createElement(m.a,{tooltip:e?Object(h.a)("Undelete"):Object(h.a)("Move to Trash"),onClick:e?Et.a.undelete:()=>Et.a.prepareDelete(!1),disabled:!this.state.messageSelected||fe.a.shouldDisableTrashButton(),image:N.Wd[a],isMenuIndicatorVisible:s.length>0,menu:s,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:410,columnNumber:16}}));case"MailMsgMove":return r.createElement(m.a,{tooltip:Object(h.a)("Move to Folder"),disabled:!this.state.messageSelected,image:N.Tb[a],isMenuIndicatorVisible:!0,menu:Et.a.getMoveToFolderMenu(),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:430,columnNumber:16}});case"MailMsgSend":const o="send"===this.props.prefValues[f.kMailSendOrQueue];return(r.createElement(m.a,{tooltip:o?Object(h.a)("Send"):Object(h.a)("Queue"),onClick:o?vt.a.sendMessage:vt.a.queueMessage.bind(null,!1),image:N.Zb[a],menu:this.getSendQueueMenu(),isMenuIndicatorVisible:!0,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:448,columnNumber:16}}));case"MailMsgDiscard":return r.createElement(m.a,{tooltip:Object(h.a)("Discard Draft"),onClick:this.deleteDraftMessage,image:N.Kb[a],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:468,columnNumber:16}});case"MailMsgAttach":return r.createElement(m.a,{tooltip:Object(h.a)("Add Attachment"),onClick:vt.a.addAttachment,image:N.Ib[a],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:484,columnNumber:16}});case"MailMsgSpam":return r.createElement(m.a,{tooltip:t?Object(h.a)("Not Spam"):Object(h.a)("Mark Message as Spam"),onClick:t?Et.a.markAsNotJunk:Et.a.markAsJunk,disabled:!this.state.messageSelected||e&&!t||fe.a.shouldDisableSpamButton(),image:N.ac[a],isMenuIndicatorVisible:!1,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:500,columnNumber:16}});case"MailMsgShowHeaders":return r.createElement(m.a,{tooltip:Object(h.a)("Show Headers"),isMenuIndicatorVisible:!1,image:N.Qb[this.props.size],menu:Ct.getItems(It,"composer"),menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:kt,lineNumber:521,columnNumber:16}});default:return console.warn(`ToolbarButton “${this.props.name}” not found`),null}}}At(Mt,"contextType",lt.a);var Pt=Object(c.a)(Mt,Dt),xt=a(91),Lt=a(352),jt=a(461),Rt=a(152),Bt=a(157),Ft=a(149),Ut=a(53),Ht=a(108),Vt=a(23),Wt=a(26),zt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\NavButton.jsx";function Gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Kt(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,Yt(e,t,"set"),a),a}function Yt(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var $t=new WeakMap;class Xt extends o.a.PureComponent{constructor(e){super(e),Gt(this,"_isMounted",!1),$t.set(this,{writable:!0,value:void 0}),Gt(this,"fastForwardStoreChanged",()=>{this.setState(e=>this.getFastForwardStoreState(e.activePageId))}),Gt(this,"getFastForwardStoreState",e=>({forwardUrl:jt.a.getFastForwardUrl(e),rewindRelativeIndex:jt.a.getRewindRelativeIndex(e)})),Gt(this,"navigationStoreChanged",()=>{this.setState(e=>({navigationInfo:Rt.a.getNavigationInfo(e.activePageId)}))}),Gt(this,"pageStoreChanged",()=>{if(!this._isMounted)return;const e=_e.c.unsafeGetActivePage(),t=Vt.p.isInternalPage(e)&&!e.url.startsWith(Vt.p.internals.startpage);e.id!==this.state.activePageId?this.setState({activePageId:e.id,isInternalPage:t,navigationInfo:Rt.a.getNavigationInfo(e.id),...this.getFastForwardStoreState(e.id)}):t!==this.state.isInternalPage&&this.setState({isInternalPage:t})}),Gt(this,"reload",()=>{this.state.navigationInfo&&(this.state.navigationInfo.isLoading?ve.a.stop():ve.a.reload())}),Gt(this,"cloneSelectedTabs",()=>{_e.c.isSelecting(this.context.vivaldiWindowId)?Ot.a.clonePages(_e.c.getSelectedPages(this.context.vivaldiWindowId)):Ot.a.clonePages(Wt.List.of(_e.c.unsafeGetActivePage(this.context.vivaldiWindowId)))}),Gt(this,"back",e=>{ve.a.back()}),Gt(this,"backInBackground",()=>{this.openURLFromHistory(-1)}),Gt(this,"forward",()=>{ve.a.forward()}),Gt(this,"forwardInBackground",()=>{this.openURLFromHistory(1)}),Gt(this,"openURLFromHistory",e=>{ve.a.getPageHistory((t,a)=>{const n=t+e;if(n>=0||n<a.length){const e=_e.c.getPageById(this.state.activePageId),t=e?Object(Ut.c)(e):null;Ot.a.openURL(a[n].url,{inCurrent:!1,inBackground:!0,transition:Bt.a.RELOAD,groupId:t&&this.isSubstripVisible(t)?t:void 0})}})}),Gt(this,"rewind",()=>{ve.a.go(-1*this.state.rewindRelativeIndex)}),Gt(this,"rewindInBackground",()=>{if(this.state.rewindRelativeIndex>0){const e=_e.c.unsafeGetActivePage(),t=jt.a.getRewindHistory(e);t.length>0&&Ot.a.openURL(t[0].url,{inBackground:!0,transition:Bt.a.RELOAD})}}),Gt(this,"goHome",()=>{Object(Ht.b)(this.state.activePageId,!1),Ot.a.showHomepage({inCurrent:!0})}),Gt(this,"goHomeInBackground",()=>{Ot.a.showHomepage({inBackground:!0})}),Gt(this,"getHistory",()=>new Promise(e=>ve.a.getPageHistory((t,a)=>this.setState({pageHistoryIndex:t},e(a))))),Gt(this,"_onHistorySelection",(e,t,a)=>{const{ctrlKey:n,shiftKey:i,altKey:s,button:r,metaKey:o}=a;if(t&&(n||i||s||o||0!==r)){const e=Object(Ft.b)({button:r,ctrlKey:Boolean(n),altKey:Boolean(s),shiftKey:Boolean(i),metaKey:Boolean(o)});Ot.a.openUrls([t],{...e})}else ve.a.go(e-this.state.pageHistoryIndex)}),Gt(this,"getHistoryMenuPromise",e=>()=>this.getHistory().then(t=>{const a="backward"===e?t.slice(0,this.state.pageHistoryIndex).reverse():t.slice(this.state.pageHistoryIndex+1),i="backward"===e?(e,t)=>e-t-1:(e,t)=>e+t+1;return a.map((e,t)=>({...n.a.makeNumberMnemonic(e.name,t),url:e.url,handler:this._onHistorySelection.bind(null,i(this.state.pageHistoryIndex,t),e.url)}))})),Gt(this,"getContextMenuPromise",e=>()=>{const t=xt.a.getOptionFunction(e);return xt.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_CONTAINER_CUSTOMIZE_TOOLBAR":return{items:this.props.customizeMenu,...t(e,{})};case"CONTEXT_CONTAINER_FORWARD_HISTORY":return this.getHistoryMenuPromise("forward")().then(a=>({items:a,...t(e,{})}));case"CONTEXT_CONTAINER_BACKWARD_HISTORY":return this.getHistoryMenuPromise("backward")().then(a=>({items:a,...t(e,{})}));default:return{...t(e,{})}}})});const t=_e.c.unsafeGetActivePage();this.state={activePageId:t.id,isInternalPage:Vt.p.isInternalPage(t),navigationInfo:Rt.a.getNavigationInfo(t.id),pageHistoryIndex:-1,...this.getFastForwardStoreState(t.id)}}componentDidMount(){this._isMounted=!0,Kt(this,$t,jt.a.addListener(this.fastForwardStoreChanged)),Rt.a.addChangeListener(this.navigationStoreChanged),_e.c.addChangeListener(this.pageStoreChanged)}componentWillUnmount(){var e,t;this._isMounted=!1,(e=this,t=$t,function(e,t){return t.get?t.get.call(e):t.value}(e,Yt(e,t,"get"))).remove(),Rt.a.removeChangeListener(this.navigationStoreChanged),_e.c.removeChangeListener(this.pageStoreChanged)}isSubstripVisible(e){const t=_e.c.getTabs(this.context.vivaldiWindowId,!0,_e.c.getGroup(e,this.context.vivaldiWindowId));return"substrip"===s.a.get(f.kTabsStackingMode)&&(s.a.get(f.kTabsStackingSubstripLocked)||t.size>1)}render(){const{isInternalPage:e,navigationInfo:t}=this.state,a="top"===s.a.get(f.kAddressBarPosition)?"bottomLeft":"topLeft";switch(this.props.name){case"Back":return o.a.createElement(m.a,{menuOrigin:a,disabled:!t||!t.canGoBack,onClick:this.back,onMiddleClick:this.backInBackground,tooltip:Object(h.a)("Go to previous page")+"\n"+Object(h.a)("Hold for history list"),menuPromise:this.getContextMenuPromise("backwardbutton"),alwaysMenu:!0,image:N.hc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:346,columnNumber:16}});case"Forward":return o.a.createElement(m.a,{menuOrigin:a,disabled:!t||!t.canGoForward,onClick:this.forward,onMiddleClick:this.forwardInBackground,tooltip:Object(h.a)("Go to next page")+"\n"+Object(h.a)("Hold for forward history list"),menuPromise:this.getContextMenuPromise("forwardbutton"),alwaysMenu:!0,image:N.jc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:363,columnNumber:16}});case"Rewind":return o.a.createElement(m.a,{className:"button-narrow",disabled:!(Number.isInteger(this.state.rewindRelativeIndex)&&this.state.rewindRelativeIndex>0),onClick:this.rewind,onMiddleClick:this.rewindInBackground,tooltip:Object(h.a)("Rewind by visited domain")+"\n"+Object(h.a)("Hold for history domain list"),menuPromise:this.getContextMenuPromise("rewindbutton"),alwaysMenu:!0,menuOrigin:a,image:N.mc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:380,columnNumber:16}});case"FastForward":return o.a.createElement(m.a,{className:"button-narrow",menuOrigin:a,tooltip:this.state.forwardUrl?Object(h.a)("Fast Forward - $1",[this.state.forwardUrl]):Object(h.a)("Fast Forward"),menuOrigin:a,onClick:Lt.a.navigateFastforward,disabled:!this.state.forwardUrl,menuPromise:this.getContextMenuPromise("fastforwardbutton"),alwaysMenu:!0,image:N.ic[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:402,columnNumber:16}});case"Reload":case"COMMAND_PAGE_REFRESH":const n=!!t&&t.isLoading;return(o.a.createElement(m.a,{disabled:e,menuOrigin:a,menuPromise:this.getContextMenuPromise("reloadbutton"),alwaysMenu:!0,tooltip:n&&!e?Object(h.a)("verb","Stop"):Object(h.a)("Reload current page"),onClick:this.reload,onMiddleClick:this.cloneSelectedTabs,image:n&&!e?N.oc[this.props.size]:N.lc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:427,columnNumber:16}}));case"Home":case"COMMAND_SHOW_HOMEPAGE":return o.a.createElement(m.a,{tooltip:Object(h.a)("Go to homepage"),menuOrigin:a,menuPromise:this.getContextMenuPromise("homebutton"),alwaysMenu:!0,onClick:this.goHome,onMiddleClick:this.goHomeInBackground,image:N.kc[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:zt,lineNumber:452,columnNumber:16}});default:return null}}}Gt(Xt,"contextType",lt.a);var Zt=Xt,Qt=a(78);function qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Jt extends o.a.Component{constructor(...e){super(...e),qt(this,"state",{taskInfo:this.props.taskInfo}),qt(this,"onContextMenu",e=>{const{taskInfo:t}=this.props;Object(Qt.a)(this.context.vivaldiWindowId,t.menuItems)})}render(){const{taskInfo:e}=this.props;return(o.a.createElement("p",{className:"button-toolbar-small in-progress",id:e.id,title:e.title+"\n"+e.description,onContextMenu:this.onContextMenu,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatus.jsx",lineNumber:34,columnNumber:7}},this.state.taskInfo.text))}}qt(Jt,"contextType",lt.a);var ea=Jt,ta=a(524);function aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class na extends o.a.PureComponent{constructor(...e){super(...e),aa(this,"state",{backgroundTasks:ta.a.getBackgroundTasks()}),aa(this,"onBackgroundTaskStoreChange",()=>{this.setState({backgroundTasks:ta.a.getBackgroundTasks()})})}componentDidMount(){ta.a.addChangeListener(this.onBackgroundTaskStoreChange)}componentWillUnmount(){ta.a.removeChangeListener(this.onBackgroundTaskStoreChange)}render(){return o.a.createElement(o.a.Fragment,null,this.state.backgroundTasks.map(e=>o.a.createElement(ea,{key:e.id,taskInfo:e,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatusList.jsx",lineNumber:41,columnNumber:9}})))}}var ia=na,sa=a(387),ra=a(1278);class oa extends Ge.a{getInitialState(){return{capturing:!1}}reduce(e,t){switch(t.actionType){case"CAPTURE_UPDATE":return{capturing:!e.capturing}}return e}getCapturingState(){return this.getState().capturing}}var la=new oa(Ke.a),ca=a(151),ua=a(69),ma="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureImages.jsx";function da(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ha=[f.kWebpagesCaptureCaptureMode,f.kWebpagesCaptureCompressionFormat,f.kWebpagesCaptureSaveLocation];class pa extends o.a.PureComponent{constructor(...e){super(...e),da(this,"state",{isPopupOpen:!1,captureInProgress:!1,captureArea:!1}),da(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),da(this,"hidePopup",()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})}),da(this,"_captureListener",()=>{this.setState({captureArea:la.getCapturingState()})}),da(this,"onCaptureFullpage",()=>{const e=this.props.prefValues[f.kWebpagesCaptureSaveLocation],t=this.props.prefValues[f.kWebpagesCaptureCompressionFormat];this.setState({captureInProgress:!0},async()=>{const{image:a}=await sa.a.captureFullpage(this.props.pageId,t,e);"clipboard"===e?Object(U.a)({title:Object(h.a)("Page Captured"),body:Object(h.a)("Image stored in the clipboard.")}):"note"===e&&await ca.a.createNoteFromCapture(a),this.setState({isPopupOpen:!1,captureInProgress:!1})})}),da(this,"onCaptureArea",async()=>{this.setState({isPopupOpen:!1});const e=this.props.prefValues[f.kWebpagesCaptureSaveLocation];let t;try{t=await sa.a.beginCaptureArea()}catch(e){this.setState({isPopupOpen:!0})}t&&("clipboard"===e?Object(U.a)({title:Object(h.a)("Area Captured"),body:Object(h.a)("Image stored in the clipboard")}):"note"===e&&await ca.a.createNoteFromCapture(t))}),da(this,"setFormat",e=>{const t=e.currentTarget.value;"png"===t||"jpg"===t?(i.a.set(f.kWebpagesCaptureSaveLocation,"file"),i.a.set(f.kWebpagesCaptureCompressionFormat,t)):i.a.set(f.kWebpagesCaptureSaveLocation,t)}),da(this,"setMode",e=>{const t=e.currentTarget.value;"area"===t?i.a.set(f.kWebpagesCaptureCaptureMode,"area"):"fullpage"===t&&i.a.set(f.kWebpagesCaptureCaptureMode,"fullpage")})}componentDidMount(){this._captureStoreToken=la.addListener(this._captureListener)}componentWillUnmount(){this._captureStoreToken.remove()}render(){const e=this.props.prefValues[f.kWebpagesCaptureSaveLocation],t="clipboard"===e||"note"===e?e:this.props.prefValues[f.kWebpagesCaptureCompressionFormat],a=this.props.isInternalPage?"area":this.props.prefValues[f.kWebpagesCaptureCaptureMode];return o.a.createElement(o.a.Fragment,null,this.state.captureArea&&o.a.createElement(ra.a,{__source:{fileName:ma,lineNumber:186,columnNumber:11}}),o.a.createElement(m.a,{tooltip:Object(h.a)("title","Capture Page"),onClick:this.togglePopup,disabled:this.props.disabled,image:N.P[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.isPopupOpen,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:this.props.mimeContent,__source:{fileName:ma,lineNumber:188,columnNumber:7}},o.a.createElement("h2",{__source:{fileName:ma,lineNumber:206,columnNumber:9}},Object(h.a)("title","Capture")),o.a.createElement(ua.a,{name:"modePicker",className:"popup-scrollarea",disabled:this.props.isInternalPage,value:a,onChange:this.setMode,__source:{fileName:ma,lineNumber:209,columnNumber:9}},o.a.createElement("label",{title:Object(h.a)("Capture the full page, including non-visible parts."),__source:{fileName:ma,lineNumber:215,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"fullpage",__source:{fileName:ma,lineNumber:217,columnNumber:13}}),Object(h.a)("Full Page")),o.a.createElement("label",{title:Object(h.a)("Capture a selection of a webpage or user interface."),__source:{fileName:ma,lineNumber:220,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"area",__source:{fileName:ma,lineNumber:222,columnNumber:13}}),Object(h.a)("radio","Selection"))),o.a.createElement("h2",{__source:{fileName:ma,lineNumber:227,columnNumber:9}},Object(h.a)("title","Format")),o.a.createElement(ua.a,{name:"formatPicker",value:t,className:"popup-scrollarea",onChange:this.setFormat,__source:{fileName:ma,lineNumber:230,columnNumber:9}},o.a.createElement("label",{__source:{fileName:ma,lineNumber:235,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"png",__source:{fileName:ma,lineNumber:236,columnNumber:13}}),Object(h.a)("Save as PNG")),o.a.createElement("label",{__source:{fileName:ma,lineNumber:239,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"jpg",__source:{fileName:ma,lineNumber:240,columnNumber:13}}),Object(h.a)("Save as JPEG")),o.a.createElement("label",{__source:{fileName:ma,lineNumber:243,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"clipboard",__source:{fileName:ma,lineNumber:244,columnNumber:13}}),Object(h.a)("Copy to Clipboard")),o.a.createElement("label",{__source:{fileName:ma,lineNumber:247,columnNumber:11}},o.a.createElement("input",{type:"radio",value:"note",__source:{fileName:ma,lineNumber:248,columnNumber:13}}),Object(h.a)("Create Note with..."))),!0===this.state.captureInProgress&&o.a.createElement("div",{className:"capture-progress",__source:{fileName:ma,lineNumber:254,columnNumber:11}},o.a.createElement("p",{className:"in-progress",__source:{fileName:ma,lineNumber:255,columnNumber:13}},Object(h.a)("Capture in progress..."))),o.a.createElement("footer",{className:"dialog-footer",__source:{fileName:ma,lineNumber:260,columnNumber:9}},o.a.createElement("input",{type:"submit",onClick:"area"===a?this.onCaptureArea:this.onCaptureFullpage,disabled:this.state.captureInProgress,value:Object(h.a)("action","Capture"),autoFocus:!0,__source:{fileName:ma,lineNumber:261,columnNumber:11}}))))}}var ba=Object(c.a)(pa,ha),ga=a(40),Na=a.n(ga),fa=a(694),_a=a(97),va="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\page-actions\\PageActionChooser.jsx";function Ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ca extends o.a.PureComponent{constructor(...e){super(...e),Ea(this,"state",{pageactionFiles:[],drawerOpen:!1,currentTarget:null,scriptOverrides:[],contentScripts:[]}),Ea(this,"updateScriptList",()=>{ot.a.pageActions.getScripts(e=>{this.setState({contentScripts:e})})}),Ea(this,"onOverridesChanged",e=>{e===this.props.pageId&&this.updateScriptOverrides()}),Ea(this,"updateScriptOverrides",()=>{ot.a.pageActions.getScriptOverridesForTab(this.props.pageId,e=>{this.setState({scriptOverrides:e})})}),Ea(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))}),Ea(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),Ea(this,"onItemClicked",(e,t)=>{this.isScriptEnabled(e)?ot.a.pageActions.setScriptOverrideForTab(e,this.props.pageId,"no_override",()=>{}):ot.a.pageActions.setScriptOverrideForTab(e,this.props.pageId,"enabled",()=>{})}),Ea(this,"hasScriptOverrides",()=>0!==this.state.scriptOverrides.length),Ea(this,"isScriptEnabled",e=>{const t=this.state.scriptOverrides.find(t=>t.script===e);return!!t&&"enabled"===t.override}),Ea(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),Ea(this,"moveFocus",(e,t,a)=>{const n=Na.a.findDOMNode(this);if(n instanceof HTMLElement&&(!0===a||Object(_a.a)(n))){const a=Array.from(n.querySelectorAll("input")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(console.log("ids",a),0===a.length)return;let i;switch(t){case"current":if(""===e&&(e=a[0]),i=a.indexOf(e),-1===i)return;break;case"up":case"down":if(1===a.length)return;if(i=a.indexOf(e),-1===i)return;if("up"===t){if(i--,i<0)return}else if(i++,i>=a.length)return;break;default:return}e=a[i];const s=n.querySelector(`input[data-id="${e}"]`);s&&s.focus()}})}componentDidMount(){ot.a.pageActions.onScriptsChanged.addListener(this.updateScriptList),ot.a.pageActions.onOverridesChanged.addListener(this.onOverridesChanged),this.updateScriptList(),this.updateScriptOverrides()}componentWillUnmount(){ot.a.pageActions.onScriptsChanged.removeListener(this.updateScriptList),ot.a.pageActions.onOverridesChanged.removeListener(this.onOverridesChanged)}componentDidUpdate(e){this.props.pageId!==e.pageId&&this.updateScriptOverrides()}render(){return o.a.createElement(m.a,{tooltip:Object(h.a)("Page Actions"),disabled:this.props.disabled,isPopupVisible:this.state.drawerOpen,isOn:this.hasScriptOverrides(),onClick:this.togglePopup,hidePopup:this.hidePopup,image:N.zc[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,hasLightArrow:"above"===this.props.popupPosition,popupWidth:225,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:this.props.mimeContent,__source:{fileName:va,lineNumber:207,columnNumber:12}},o.a.createElement("h2",{__source:{fileName:va,lineNumber:228,columnNumber:7}},Object(h.a)("Page Actions")),o.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:va,lineNumber:229,columnNumber:7}},this.state.contentScripts.map((e,t)=>{const a=t.toString();return(o.a.createElement("label",{key:t,onKeyDown:this.keyDownHandler.bind(this,a),__source:{fileName:va,lineNumber:233,columnNumber:13}},o.a.createElement("input",{"data-id":a,autoFocus:0===t,type:"checkbox",onChange:this.onItemClicked.bind(this,e),checked:this.isScriptEnabled(e),__source:{fileName:va,lineNumber:235,columnNumber:15}}),o.a.createElement("span",{__source:{fileName:va,lineNumber:241,columnNumber:15}},Object(fa.a)(e))))})))}}var wa=Ca,Oa=a(130),ya=a(297),Sa=a(588),Ta=a(324),ka=a(10),Aa=a(134);function Ia(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Da extends o.a.PureComponent{constructor(...e){super(...e),Ia(this,"state",{disabled:!Oa.a.getActiveWebView(),defaultPageZoom:Ta.a.getState().defaultPageZoom,zoom:Ta.a.getState().zoom,notesZoom:Ta.a.getState().notesZoom,isNoteWebView:!1}),Ia(this,"_onActiveWebViewStoreChanged",()=>{const e=Oa.a.getActiveWebView();e&&e.getZoom(t=>{this._updateZoomState(this.rangeCheck(t),e.name)}),this.setState({disabled:!e})}),Ia(this,"_onZoomStoreChanged",()=>{const{defaultPageZoom:e,zoom:t,notesZoom:a}=Ta.a.getState();this.setState({defaultPageZoom:e,zoom:t,notesZoom:a})}),Ia(this,"_onTabZoomChange",e=>{const t=Oa.a.getActiveWebView();t&&t.getZoom(a=>{a===e.oldZoomFactor&&e.tabId===this.props.pageId&&this._updateZoomState(e.newZoomFactor,t.name)})}),Ia(this,"_onPageZoom",(e,t)=>{if(e!==this.context.vivaldiWindowId)return;const a=Oa.a.getActiveWebView();a&&a.getZoom(e=>{e+=.1*t,this._updateZoomState(e,a.name)})}),Ia(this,"_updateZoomState",(e,t)=>{"markdowneditor"===t||"richtexteditor"===t?this.setState({notesZoom:e,isNoteWebView:!0}):this.setState({zoom:e,isNoteWebView:!1})}),Ia(this,"setZoomLevel",e=>{ya.a.setPageZoom(this.rangeCheck(e))}),Ia(this,"rangeCheck",e=>Math.min(Math.max(e,Aa.h),Aa.g))}componentDidMount(){this._zoomDetectStoreToken=Ta.a.addListener(this._onZoomStoreChanged),ka.a.tabs.onZoomChange.addListener(this._onTabZoomChange),ot.a.tabsPrivate.onPageZoom.addListener(this._onPageZoom),Oa.a.addChangeListener(this._onActiveWebViewStoreChanged)}componentWillUnmount(){Oa.a.removeChangeListener(this._onActiveWebViewStoreChanged),ka.a.tabs.onZoomChange.removeListener(this._onTabZoomChange),ot.a.tabsPrivate.onPageZoom.removeListener(this._onPageZoom),this._zoomDetectStoreToken.remove()}render(){const{disabled:e,zoom:t,notesZoom:a,isNoteWebView:n,defaultPageZoom:i}=this.state;return(o.a.createElement(Sa.a,{zoom:n?a:t,key:"zoomslider",scrolling:!0,inFooter:!0,defaultZoomLevel:i,maxLevel:Aa.g,minLevel:Aa.h,step:Aa.i,disabled:e,customizeMenu:this.props.customizeMenu,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\PageZoomIndicator.jsx",lineNumber:153,columnNumber:7}}))}}Ia(Da,"contextType",lt.a);var Ma=Da,Pa=a(67),xa=a(788),La=a(347),ja=a(155),Ra=a(789);function Ba(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fa extends r.Component{constructor(...e){super(...e),Ba(this,"state",{statusText:Object(h.a)("Sync"),statusOverlay:"none",active:!1}),Ba(this,"onStoreChange",()=>{const e=Object(ja.b)(ja.a.getState()),t=ja.a.getState().accountInfo.username,a=La.a.getState().engineData,n=La.a.getState().cycleData,i=a.isFirstSetupComplete&&"stopped"!==a.engineState;let s="none";"loggedOut"!==e&&(a.isFirstSetupComplete&&("credentialsMissing"===e||"loginFailed"===e||a.needsDecryptionPassword)||"failed"===a.engineState&&!a.disableReasons.includes("not_signed_in")||"disable_sync_on_client"===a.protocolErrorClientAction?s="failed":["started","stopped"].includes(a.engineState)&&0===parseInt(n.nextRetryTime)||(s="waiting"));let r=Object(h.a)("Sync");if("loggedOut"===e)r=Object(h.a)("Sync not connected");else if("failed"===s)r=Object(h.a)("Failed to start Sync for “$1”",[t]);else if("clearing_data"===a.engineState)r=Object(h.a)("Clearing Sync server data for “$1”",[t]);else if("configuration_pending"===a.engineState)r=Object(h.a)("Setting up Sync for “$1”",[t]);else if("started"===a.engineState){if(r=Object(h.a)("Connected to Sync as “$1”",[t]),"not_synced"!==n.downloadUpdatesStatus){const[e,t]=Object(Ra.a)(n);r+="\n"+Object(h.a)("Last sync: $1",[F()(n.cycleStartTime).format("l, LTS")])+"\n"+e+"\n"+t}}else r=Object(h.a)("Connecting to Sync as “$1”...",[t]);this.setState({active:i,statusOverlay:s,statusText:r})}),Ba(this,"openSyncSettings",()=>{at.a.showSettings("sync")}),Ba(this,"getImageForStatus",e=>{let t=N.Ld;return"failed"===this.state.statusOverlay?t=N.Kd:"waiting"===this.state.statusOverlay?t=N.Jd:this.state.active&&(t=N.Id),t})}componentDidMount(){this.syncStoreToken=La.a.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=ja.a.addListener(this.onStoreChange),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return r.createElement(m.a,{onClick:this.openSyncSettings,image:this.getImageForStatus(status)[this.props.size],tooltip:this.state.statusText,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\SyncStatus.jsx",lineNumber:145,columnNumber:12}})}}var Ua=Fa,Ha="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleImages.jsx";function Va(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Wa=[{title:Object(h.a)("Always"),profile:"always"},{title:Object(h.a)("Cached"),profile:"cache"},{title:Object(h.a)("title","Never"),profile:"never"}],za=[{title:Object(h.a)("command","Loop"),profile:"allowed"},{title:Object(h.a)("Once"),profile:"once"},{title:Object(h.a)("command","Never"),profile:"none"}];class Ga extends o.a.PureComponent{constructor(...e){super(...e),Va(this,"_isMounted",!1),Va(this,"state",{imageProfile:"always",animationProfile:"allowed",drawerOpen:!1}),Va(this,"_onPageStoreChanged",()=>{this._isMounted&&this.setState({imageProfile:_e.c.unsafeGetActivePage().get("imageLoading")})}),Va(this,"_onAnimationPolicyChanged",()=>{ka.a.accessibilityFeatures.animationPolicy.get({},({value:e})=>{this._isMounted&&this.setState({animationProfile:e})})}),Va(this,"onImageProfileSelected",e=>{switch(e){case"never":this.updatePageImageState(!1,!1,!1);break;case"cache":this.updatePageImageState(!0,!0,!0);break;case"always":this.updatePageImageState(!0,!1,!0)}}),Va(this,"onAnimationsProfileSelected",e=>{this.setState({animationProfile:e},()=>{ka.a.accessibilityFeatures.animationPolicy.set({value:e})})}),Va(this,"updatePageImageState",(e,t,a)=>{ot.a.tabsPrivate.update(_e.c.unsafeGetActivePage().get("id"),{showImages:e,loadFromCacheOnly:t,enablePlugins:a})}),Va(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),Va(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))})}componentDidMount(){this._isMounted=!0,_e.c.addChangeListener(this._onPageStoreChanged),ka.a.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){this._isMounted=!1,_e.c.removeChangeListener(this._onPageStoreChanged),ka.a.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){const e=this.state.imageProfile,t=this.state.animationProfile,a=this.props.disabled;return o.a.createElement(m.a,{buttonStyle:{"--displayImagesAll":"always"===e?"block":"none","--displayImagesCached":"cache"!==e||a?"none":"block","--displayImagesNever":"never"!==e||a?"none":"block","--displayAnimationOnce":"once"===t?"block":"none","--displayAnimationNever":"none"===t?"block":"none"},tooltip:Object(h.a)("Toggle images and animation"),onClick:this.togglePopup,disabled:this.props.disabled,image:N.Bb[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.drawerOpen,onDragStart:this.props.onDragStart,hasLightArrow:"above"===this.props.popupPosition,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:"ToolbarButtonPopup-DefaultStyles",mimeContent:this.props.mimeContent,__source:{fileName:Ha,lineNumber:159,columnNumber:7}},o.a.createElement("form",{__source:{fileName:Ha,lineNumber:185,columnNumber:9}},o.a.createElement("h2",{__source:{fileName:Ha,lineNumber:186,columnNumber:11}},Object(h.a)("title","Load Images")),o.a.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:Ha,lineNumber:187,columnNumber:11}},Wa.map(({title:t,profile:a},n)=>o.a.createElement("label",{key:"imagePolicy-"+a,__source:{fileName:Ha,lineNumber:189,columnNumber:15}},o.a.createElement("input",{autoFocus:e===a,type:"radio",name:"toggle-image-group",checked:e===a,onChange:this.onImageProfileSelected.bind(this,a),__source:{fileName:Ha,lineNumber:190,columnNumber:17}}),t))),o.a.createElement("h2",{__source:{fileName:Ha,lineNumber:202,columnNumber:11}},Object(h.a)("Play Image Animation")),o.a.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:Ha,lineNumber:203,columnNumber:11}},za.map(({title:e,profile:a})=>o.a.createElement("label",{key:"animationPolicy-"+a,__source:{fileName:Ha,lineNumber:205,columnNumber:15}},o.a.createElement("input",{type:"radio",name:"toggle-animations-group",checked:t===a,onChange:this.onAnimationsProfileSelected.bind(this,a),__source:{fileName:Ha,lineNumber:206,columnNumber:17}}),e)))))}}var Ka=Ga,Ya=a(74),$a="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleTiling.jsx";function Xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Za=function(e){const t=_e.c.unsafeGetActivePage(e),a=Object(Ut.d)(t);return{groupId:t.getIn(["extData","group"]),tileId:a&&_e.c.getTiles(a,e).count()>1?a:"",tileMode:t.getIn(["extData","tiling","layout"]),pageSelection:_e.c.getSelection(e),disabled:1===_e.c.getPages(e).count()}};class Qa extends o.a.PureComponent{constructor(e,t){super(e),Xa(this,"_isMounted",!1),Xa(this,"_onPageStoreChange",()=>{this._isMounted&&this.setState(Za(this.context.vivaldiWindowId))}),Xa(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))}),Xa(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),Xa(this,"setTiling",e=>{if(e.hasOwnProperty("button")&&e.button!==Ya.a.kLeft)return;const t=e.currentTarget.value;if(this.state.pageSelection.count()>1){const e=this.state.pageSelection.map(e=>_e.c.getPageById(e)).filter(Boolean).toList();Ot.a.tilePages(e,t),Ot.a.clearSelection(this.context.vivaldiWindowId)}else if(this.state.tileId){const e=_e.c.getTiles(this.state.tileId,this.context.vivaldiWindowId);Ot.a.tilePages(e,t)}else _e.c.isGroup(this.state.groupId,this.context.vivaldiWindowId)?Ot.a.tileTabStack(this.state.groupId,this.context.vivaldiWindowId,t):Ot.a.tileLastActive(t,this.context.vivaldiWindowId);this.hidePopup()}),Xa(this,"untile",()=>{Ot.a.untileTileGroup(this.state.tileId,this.context.vivaldiWindowId),this.hidePopup()}),Xa(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;case" ":case"Enter":this.setTiling(t);break;default:return}t.preventDefault(),t.stopPropagation()}),Xa(this,"moveFocus",(e,t,a)=>{const n=Na.a.findDOMNode(this);if(n instanceof HTMLElement&&(!0===a||Object(_a.a)(n))){const a=Array.from(n.querySelectorAll("button.PageTiling-Button")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===a.length)return;let i;switch(t){case"current":if(""===e&&(e=a[0]),i=a.indexOf(e),-1===i)return;break;case"up":case"down":if(1===a.length)return;if(i=a.indexOf(e),-1===i)return;if("up"===t){if(i--,i<0)return}else if(i++,i>=a.length)return;break;default:return}e=a[i];const s=n.querySelector(`button.PageTiling-Button[data-id="${e}"]`);s&&s.focus()}}),this.state={drawerOpen:!1,...Za(t.vivaldiWindowId)}}componentDidMount(){this._isMounted=!0,_e.c.addChangeListener(this._onPageStoreChange)}componentDidUpdate(e){this._isMounted&&e.pageId!==this.props.pageId&&this.hidePopup()}componentWillUnmount(){this._isMounted=!1,_e.c.removeChangeListener(this._onPageStoreChange)}render(){return o.a.createElement(m.a,{customizeMenu:this.props.customizeMenu,tooltip:Object(h.a)("Page tiling")+"\n"+Object(h.a)("Tile the current tab selection, tab stack, or last active tab"),buttonStyle:{"--displayTileColumn":!this.state.tileId||"column"!==this.state.tileMode&&"grid"!==this.state.tileMode?"none":"unset","--displayTileRow":!this.state.tileId||"row"!==this.state.tileMode&&"grid"!==this.state.tileMode?"none":"unset"},className:`tilingtoggle ${this.props.size}`,disabled:this.state.disabled,image:N.Od[this.props.size],size:this.props.size,onPointerDown:this.togglePopup,isPopupVisible:this.state.drawerOpen,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,hasLightArrow:!0,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,popupClassName:`ToolbarButtonPopup-DefaultStyles ${this.props.size}`,mimeContent:this.props.mimeContent,__source:{fileName:$a,lineNumber:241,columnNumber:12}},o.a.createElement("h2",{__source:{fileName:$a,lineNumber:272,columnNumber:7}},Object(h.a)("Page Tiling")),o.a.createElement("button",{className:G()("PageTiling-Button",{"button-on":"row"===this.state.tileMode}),"data-id":"row",title:Object(h.a)("Tile vertically"),onKeyDown:this.keyDownHandler.bind(this,"row"),onMouseUp:this.setTiling,value:"row",dangerouslySetInnerHTML:{__html:N.Od[this.props.size]+Object(h.a)("Tile Vertically")},style:{"--displayTileColumn":"none","--displayTileRow":"unset"},__source:{fileName:$a,lineNumber:275,columnNumber:7}}),o.a.createElement("button",{className:G()("PageTiling-Button",{"button-on":"column"===this.state.tileMode}),"data-id":"column",title:Object(h.a)("Tile horizontally"),onKeyDown:this.keyDownHandler.bind(this,"column"),onMouseUp:this.setTiling,value:"column",dangerouslySetInnerHTML:{__html:N.Od[this.props.size]+Object(h.a)("Tile Horizontally")},style:{"--displayTileColumn":"unset","--displayTileRow":"none"},__source:{fileName:$a,lineNumber:291,columnNumber:7}}),o.a.createElement("button",{className:G()("PageTiling-Button",{"button-on":"grid"===this.state.tileMode}),"data-id":"grid",title:Object(h.a)("Tile to grid"),onKeyDown:this.keyDownHandler.bind(this,"grid"),onMouseUp:this.setTiling,value:"grid",dangerouslySetInnerHTML:{__html:N.Od[this.props.size]+Object(h.a)("Tile to Grid")},style:{"--displayTileColumn":"unset","--displayTileRow":"unset"},__source:{fileName:$a,lineNumber:307,columnNumber:7}}),o.a.createElement("button",{className:"PageTiling-Button","data-id":"none",title:Object(h.a)("Untile pages"),disabled:!this.state.tileMode,onKeyDown:this.keyDownHandler.bind(this,"none"),onMouseUp:this.untile,dangerouslySetInnerHTML:{__html:N.Od[this.props.size]+Object(h.a)("Untile Pages")},style:{"--displayTileColumn":"none","--displayTileRow":"none"},__source:{fileName:$a,lineNumber:323,columnNumber:7}}))}}Xa(Qa,"contextType",lt.a);var qa=Qa,Ja=a(17),en="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\StatusButton.jsx";function tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const an=[f.kBiscuitVersion,f.kPanelsPosition],nn=Object(h.a)("$1 click to toggle panel floating",[Object(h.a)("key","Control")]),sn=function(){const e=_e.c.unsafeGetActivePage();return{activePageId:e.id,activePageUrl:e.url}};class rn extends o.a.PureComponent{constructor(e,t){super(e),tn(this,"_isMounted",!1),tn(this,"_onPageStoreChange",()=>{this._isMounted&&this.setState(sn())}),tn(this,"_onPanelStoreChanged",()=>{this._isMounted&&this.setState({panelOpen:De.d.getPanelButtonsVisible()})}),tn(this,"_onWindowStoreChanged",()=>{const e=Ja.a.getVisibleUI(this.context.vivaldiWindowId).statusBar;this._isMounted&&this.state.statusBarDisplay!==e&&this.setState({statusBarDisplay:e})}),this.state={biscuitUA:"",panelOpen:De.d.getPanelButtonsVisible(),statusBarDisplay:Ja.a.getVisibleUI(t.vivaldiWindowId).statusBar,...sn()}}componentDidMount(){this._isMounted=!0,_e.c.addChangeListener(this._onPageStoreChange),De.d.addChangeListener(this._onPanelStoreChanged),this._windowStoreToken=Ja.a.addListener(this._onWindowStoreChanged),this.props.prefValues[f.kBiscuitVersion]&&ot.a.utilities.getVersion().then(({vivaldiVersion:e,chromiumVersion:t})=>{this._isMounted&&this.setState({biscuitUA:`Vivaldi ${e} / Chrome ${t}`})})}componentWillUnmount(){this._isMounted=!1,De.d.removeChangeListener(this._onPanelStoreChanged),_e.c.removeChangeListener(this._onPageStoreChange),this._windowStoreToken.remove()}render(){const e=!!this.state.activePageId&&Vt.p.isInternalUrl(this.state.activePageUrl);switch(this.props.name){case"PanelToggle":return o.a.createElement(m.a,{className:"panel-clickoutside-ignore",tooltip:this.state.panelOpen?Object(h.a)("Hide Panel")+"\n"+nn:Object(h.a)("verb","Show Panel")+"\n"+nn,onClick:Pa.a.togglePanel,onMiddleClick:Pa.a.toggleFloating,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,style:{transform:"right"===this.props.prefValues[f.kPanelsPosition]?"scaleX(-1)":"unset"},image:N.Ac[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:164,columnNumber:16}});case"SyncStatus":return!Ja.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&o.a.createElement(Ua,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:189,columnNumber:11}});case"StatusInfo":return"overlay"!==this.state.statusBarDisplay?o.a.createElement(xa.a,{__source:{fileName:en,lineNumber:203,columnNumber:11}}):null;case"TaskList":return o.a.createElement(ia,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,__source:{fileName:en,lineNumber:206,columnNumber:16}});case"VersionInfo":return this.props.prefValues[f.kBiscuitVersion]?o.a.createElement("div",{className:"biscuit-setting-version",__source:{fileName:en,lineNumber:213,columnNumber:13}},o.a.createElement("span",{className:"application-icon-biscuit",dangerouslySetInnerHTML:{__html:N.fc},__source:{fileName:en,lineNumber:214,columnNumber:15}}),o.a.createElement("span",{className:"biscuit-string",__source:{fileName:en,lineNumber:217,columnNumber:15}},this.state.biscuitUA)):null;case"CaptureImages":return o.a.createElement(ba,{key:"capture-images",pageId:this.state.activePageId,isInternalPage:e,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:224,columnNumber:16}});case"TilingToggle":return o.a.createElement(qa,{pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:242,columnNumber:16}});case"ImagesToggle":return o.a.createElement(Ka,{key:"toggle-images",disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:259,columnNumber:16}});case"PageActions":return o.a.createElement(wa,{key:"pageaction-chooser",pageId:this.state.activePageId,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:en,lineNumber:275,columnNumber:16}});case"Zoom":return o.a.createElement(Ma,{key:"zoomslider",pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,__source:{fileName:en,lineNumber:292,columnNumber:16}});default:return null}}}tn(rn,"contextType",lt.a);var on=Object(c.a)(rn,an),ln="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonSwitcher.jsx";class cn extends o.a.Component{render(){switch(this.props.name){case"Back":case"Forward":case"Rewind":case"FastForward":case"Reload":case"Home":return o.a.createElement(Zt,{name:this.props.name,customizeMenu:this.props.customizeMenu,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:52,columnNumber:16}});case"BreakMode":return o.a.createElement(x,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:64,columnNumber:14}});case"Clock":return o.a.createElement(de,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:78,columnNumber:16}});case"MailStatus":return o.a.createElement(_t,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:92,columnNumber:16}});case"PanelToggle":case"SyncStatus":case"StatusInfo":case"TaskList":case"VersionInfo":case"CaptureImages":case"TilingToggle":case"ImagesToggle":case"PageActions":case"Zoom":return o.a.createElement(on,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:115,columnNumber:16}});case"MailBack":case"MailForward":case"MailReload":case"MailViewLayout":case"MailViewThreading":return o.a.createElement(ye,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,disabled:!1,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:133,columnNumber:16}});case"MailSearch":return o.a.createElement(Ue,{__source:{fileName:ln,lineNumber:147,columnNumber:16}});case"MailMsgEdit":case"MailMsgReply":case"MailMsgReplyToAll":case"MailMsgForward":case"MailMsgStatusRead":case"MailMsgFlag":case"MailMsgLabel":case"MailMsgSend":case"MailMsgShowHeaders":case"MailMsgSpam":case"MailMsgDiscard":case"MailMsgAttach":case"MailMsgTrash":case"MailMsgMove":return o.a.createElement(Pt,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:ln,lineNumber:164,columnNumber:16}});case"Game":return o.a.createElement(he.a,{customizeMenu:this.props.customizeMenu,isStartPage:!1,name:this.props.name,menuOrigin:this.props.menuOrigin,mimeType:this.props.mimeType,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,popupPosition:this.props.popupPosition,size:this.props.size,__source:{fileName:ln,lineNumber:178,columnNumber:16}});case"Spacer":return o.a.createElement("div",{className:"toolbar-spacer",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:ln,lineNumber:195,columnNumber:16}});case"FlexibleSpacer":return o.a.createElement("div",{className:"toolbar-spacer-flexible",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:ln,lineNumber:204,columnNumber:16}});default:return console.warn(`ToolbarButton “${this.props.name}” not found`),null}}}a.d(t,"a",(function(){return hn}));var un="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\Toolbar.jsx";function mn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let dn=!1;class hn extends o.a.PureComponent{constructor(...e){super(...e),mn(this,"_dropOnSelf",!1),mn(this,"_dragIndex",null),mn(this,"state",{buttons:this.props.name?s.a.get(this.props.name):[]}),mn(this,"onPrefsChanged",(e,t)=>{this.setState({buttons:t})}),mn(this,"reset",()=>{this.props.name&&i.a.reset(this.props.name)}),mn(this,"removeButton",e=>{if(!this.props.name)return;const t=s.a.get(this.props.name);this.props.name&&i.a.set(this.props.name,t.filter((t,a)=>e!==a))}),mn(this,"onDrop",(e,t,a)=>{dn=!0;const n=this.state.buttons.slice(),s="right"===t?1:0,r=(this._dragIndex||0)+s,o=e.dataTransfer.getData("vivaldi/x-button-toolbar"),l=e.dataTransfer.getData("vivaldi/x-button-index");this._dropOnSelf=this.props.name===e.dataTransfer.getData("vivaldi/x-toolbar-name"),this._dropOnSelf?(n[l]=null,n.splice(r,0,o),this.props.name&&i.a.set(this.props.name,n.filter(e=>e))):(n.splice(r,0,o),this.props.name&&i.a.set(this.props.name,n))}),mn(this,"getButtonMenu",e=>[n.a.separatorItem,{items:[{handler:this.removeButton.bind(this,e),...Object(A.a)("Remove From Toolbar")},n.a.separatorItem,{handler:this.reset,...Object(A.a)("Reset Toolbar to Default")}],...Object(A.a)("command","Customize")}])}componentDidMount(){this.props.name&&s.a.addListener(this.props.name,this.onPrefsChanged)}componentWillUnmount(){this.props.name&&s.a.removeListener(this.props.name,this.onPrefsChanged)}render(){return o.a.createElement("div",{className:G()("toolbar","toolbar-droptarget",this.props.className,"toolbar-"+this.props.size),__source:{fileName:un,lineNumber:140,columnNumber:7}},this.state.buttons.map((e,t)=>o.a.createElement(cn,{key:t,name:e,menuOrigin:this.props.menuOrigin,customizeMenu:this.getButtonMenu(t),popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:e=>{dn=!1,this._dropOnSelf=!1,e.dataTransfer.setData("vivaldi/x-button-index",t),e.dataTransfer.setData("vivaldi/x-toolbar-name",this.props.name)},onDragEnd:e=>{!this._dropOnSelf&&dn&&this.removeButton(t),this._dropOnSelf=!1,this._dragIndex=null},onDrop:this.onDrop,onDragEnter:()=>{this._dragIndex=t},mimeType:"vivaldi/x-button-toolbar",__source:{fileName:un,lineNumber:148,columnNumber:11}})))}}},function(e,t,a){"use strict";let n;t.a={get:function(){return n},set:function(e){n=e}}},function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return u}));var n=a(210),i=a(10);function s(e){return e.replace(/["~*\/:<>?\\|\p{Cc}\p{Cf}]+/gu," ").replace(/^[ .]+|[ .]+$/g,"")}function r(e,t){c(l(e),s(e.filename),t)}function o(e){const t=l(e),a=s(e.filename);return{suggestedFilename:a,url:t,request:{deny:()=>URL.revokeObjectURL(t),allow:e=>c(t,a,e)}}}function l(e){const t=u(e);return URL.createObjectURL(t)}function c(e,t,a){i.a.downloads.download({url:e,filename:t,saveAs:"saveas"===a},t=>{URL.revokeObjectURL(e),"open"===a&&n.a.addOpenAfterDownload(t)})}function u(e){const t=e.content,a=e.mimeType;return new Blob([t],{type:a})}},,,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=(a(53),a(12)),r=a(26),o=a(236);let l=new r.Map;const c=new class extends i.a{constructor(...e){var t,a,n;super(...e),t=this,a="emitChange",n=Object(o.default)(e=>{this.emit("change",e)},250),a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}getProgressInfo(e){const t=l.get(e);if(t)return t}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};c.dispatchToken=s.a.register(e=>{switch(e.actionType){case"PAGE_SET_PROGRESS":{const{pageId:t,progressState:a}=e;!function(e,t){const a=l.get(t);e!==a&&(a&&a.progress>e.progress&&(e.progress=a.progress),l=l.set(t,e),c.emitChange())}(a,t);break}case"PAGE_CLOSE":e.pages.forEach(e=>{l.has(e.id)&&(l=l.remove(e.id),c.emitChange())})}}),t.a=c},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(10);async function i(e,t){const a=await new Promise(t=>n.a.windows.get(e,t)),i=a.extData&&JSON.parse(a.extData)||{},s=JSON.stringify({...i,...t});await new Promise(t=>{n.a.windows.update(e,{extData:s},t)})}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(25),i=a(0);const s=["mousedown","touchstart"];function r(e,t,a="ignore-react-onclickoutside",r=!1,o=s){const{document:l,Element:c}=Object(i.useContext)(n.a);Object(i.useEffect)(()=>{if(!r)return o.forEach(e=>l.addEventListener(e,n)),()=>{o.forEach(e=>l.removeEventListener(e,n))};function n(n){const i=e(),s=t();if(!i||!s)return;let r=n.target;for(;r instanceof c;){const e=r;if(Array.isArray(a)){if(a.some(t=>e.classList.contains(t)))return}else if(e.classList.contains(a))return;r=r.parentNode}n.target instanceof c&&!i.contains(n.target)&&s(n)}},[c,r,l,t,e,a,o])}},function(e,t,a){"use strict";var n=a(356),i=a(14),s=a(12),r=a(10),o=a(7),l=a(121);function c(e,t){"BreakModeId"===e&&"boolean"==typeof t&&s.a.dispatch({actionType:"BREAKMODE",isActive:t})}t.a={toggleBreakMode:async function(){const e=!n.a.getState().isActive;await async function(e){const t=e?"mute":"unmute";e&&s.a.dispatch({actionType:"TOOLTIP_SET",id:null});await i.a.setMuting("all",t),await o.a.utilities.setSharedData({key:"BreakModeId",value:e});const a=await Object(l.h)({});await Promise.all(a.map(async t=>{await new Promise(a=>{if(!(t.id&&t.id>=0))return a();r.a.tabs.sendMessage(t.id,{breakmode:e},a)})}))}(e)},loadPromise:async function(){o.a.utilities.onSharedDataUpdated.addListener(c),await new Promise(e=>{o.a.utilities.getSharedData({key:"BreakModeId",value:!1},e)})&&c("BreakModeId",!0)}}},,,function(e,t,a){"use strict";var n=a(8);t.a=async function(e){return n.a.searchList.get(e)}},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAyUlEQVR42q3TvQrCMBDAcV+ro7vvURx9AXVyaUGwuzinfsw66OYD+AJ2K21DUlooDaXEXOGki7mCDfy4G5L/lslsvvjLuAFz1j9MBwe01queped5F8dxthAZGti0bfvFGHsIISRGyEDTNDsjAEqpAALanH7EGqjr+tDnuu4+DMM78H3/DHesgaqqjhYnMlCW5bUoihuAHSciA+bBM8/zDuw4cScDUsqXDRngnL9RlmURTtzJQJIkPE3TDuw4ERmI41jZkIEhRv2NH2DDzUU+EiSYAAAAAElFTkSuQmCC"},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t,a,n)=>{if(e.dataTransfer.setData("text/uri-list",t),e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("vivaldi/x-title",a),!n){const n="text/plain",i=`${n}:${`${a.replace(/[<>:"/\\|?*\n\r]/g,"_").substring(0,100)}.url`}:data:${n};base64,${btoa("[InternetShortcut]\nURL="+t)}`;e.dataTransfer.setData("DownloadURL",i)}return e}},,,,,function(e,t,a){"use strict";var n=a(0),i=a(14),s=a(2),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ErrorBoundary.jsx";class o extends n.Component{constructor(...e){var t,a,n;super(...e),t=this,a="state",n={hasError:!1,stack:"",existingChildren:this.props.children},a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}static getDerivedStateFromProps(e,t){return e.children!==t.existingChildren?{hasError:!1,existingChildren:e.children}:null}static getDerivedStateFromError(e){return{hasError:!0,stack:e.stack}}componentDidCatch(e,t){return null}openBugReport(){i.a.openURL("https://vivaldi.com/bugreport/")}render(){return this.state.hasError?n.createElement("div",{className:"error-boundary",__source:{fileName:r,lineNumber:59,columnNumber:9}},n.createElement("h1",{__source:{fileName:r,lineNumber:60,columnNumber:11}},Object(s.a)("An error occurred")),n.createElement("pre",{__source:{fileName:r,lineNumber:61,columnNumber:11}},this.state.stack),n.createElement("p",{__source:{fileName:r,lineNumber:62,columnNumber:11}},Object(s.a)("Please consider reporting the issue to help us fix it")),n.createElement("input",{type:"button",onClick:this.openBugReport,value:Object(s.a)("Report issue"),__source:{fileName:r,lineNumber:65,columnNumber:11}})):this.props.children}}t.a=o},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(24),s=a(186),r=a(13),o=a(599),l=a(217),c=a(1),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarStoreSubscription.jsx";function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const d=[c.kCalendarDisplayDensity];t.a=function(t,a){return n.forwardRef((function(h,p){var b;const{pageId:g}=h,N=Object(o.a)(g,a),f=Object(l.a)(d),[_,v]=n.useState((null===(b=r.c.getActivePage())||void 0===b?void 0:b.id)===g),E=n.useMemo(()=>({pageId:g,uid:N.editor.uid}),[g,N.editor.uid]);n.useEffect(()=>{const t=()=>{var e;v((null===(e=r.c.getActivePage())||void 0===e?void 0:e.id)===g)};return r.c.addChangeListener(t),()=>{r.c.removeChangeListener(t),e.nextTick(()=>i.a.saveEventEdit(E))}},[E,g]);const C=f[c.kCalendarDisplayDensity],w=n.useMemo(()=>({editor:E,displayDensity:C,isActivePage:_,isPanel:!1}),[E,C,_]);return n.createElement(s.a.Provider,{value:w,__source:{fileName:u,lineNumber:82,columnNumber:7}},n.createElement(t,m({},h,{ref:p},N,{__source:{fileName:u,lineNumber:83,columnNumber:9}})))}))}}).call(this,a(82))},,,,function(e,t,a){"use strict";var n=a(45),i=a.n(n),s=a(154),r=a(0),o=a.n(r),l=a(2);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends o.a.PureComponent{constructor(...e){super(...e),c(this,"refCanvas",o.a.createRef()),c(this,"getInheritedColor",()=>{if(!this._isMounted)return;let e="#111111";this.props.color?e=this.props.color:this.refCanvas.current&&(e=getComputedStyle(this.refCanvas.current).getPropertyValue("color")),this._color!==e&&(this._color=e)}),c(this,"renderIcon",e=>{if(!this.refCanvas.current)return;const t=this.refCanvas.current.getContext("2d");this.getInheritedColor();let a=0;function n(e,t){return e+a*(t-e)}const s=()=>{t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},r=()=>{t.beginPath(),t.moveTo(2,27),t.lineTo(5,30),t.lineTo(28,7),t.lineTo(25,4),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,8),t.lineTo(6,20),t.lineTo(4,20),t.moveTo(14,24),t.lineTo(18,20),t.lineTo(18,28),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},o=()=>{t.beginPath(),t.moveTo(6,25),t.lineTo(4,23),t.lineTo(4,8),t.lineTo(6,6),t.lineTo(26,6),t.lineTo(28,8),t.lineTo(28,23),t.lineTo(26,25),t.moveTo(26,23),t.lineTo(26,14),t.lineTo(14,14),t.lineTo(14,23),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},l=()=>{if(!t)return;t.clearRect(18,0,32,32),a=a>1?0:Math.ceil(100*(a+.05))/100,t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.moveTo(n(14,22),n(12,4)),t.quadraticCurveTo(n(18,32),16,n(14,22),n(20,28)),t.lineTo(n(16,24),n(22,30)),t.quadraticCurveTo(n(20,34),16,n(16,24),n(10,2)),t.closePath(),t.lineWidth=0;const e=a<.7?1:parseFloat((1-a)/.3);t.fillStyle=i()(this._color).alpha(e).css(),t.fill(),this.props.mediaState.has("playing")&&this.props.animated?this._isMounted&&(this.getInheritedColor(),this._timeoutId=setTimeout(l,64)):c(this.props.mediaState)},c=e=>{t.globalCompositeOperation&&(this._timeoutId&&clearTimeout(this._timeoutId),t.clearRect(0,0,32,32),e.has("pip")?o():e.has("muting")?r():e.has("playing")&&this.props.animated?l():s())};c(e)})}componentDidMount(){this._isMounted=!0,this.renderIcon(this.props.mediaState)}componentDidUpdate(e){const{mediaState:t,color:a,animated:n,active:i,vivaldiSettings:s}=this.props;!this._isMounted||e.mediaState===t&&e.color===a&&e.animated===n&&e.active===i&&e.vivaldiSettings.BROWSER_COLOR_BG===s.BROWSER_COLOR_BG||this.renderIcon(this.props.mediaState)}componentWillUnmount(){this._isMounted=!1,this._timeoutId&&clearTimeout(this._timeoutId)}render(){let e="";return this.props.mediaState.has("playing")?e=Object(l.a)("Mute tab audio"):this.props.mediaState.has("muting")?e=Object(l.a)("Unmute tab audio"):this.props.mediaState.has("pip")&&(e=Object(l.a)("Exit Picture in Picture")),o.a.createElement("canvas",{ref:this.refCanvas,className:"audioicon",width:32,height:32,title:e,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\AudioIcon.jsx",lineNumber:218,columnNumber:7}})}}t.a=Object(s.a)(u,["BROWSER_COLOR_BG"])},,,function(e,t,a){"use strict";t.a=function(e){const t=e?e.substring(e.indexOf("@")+1):"vivaldi.com",a=new Uint32Array(2);return window.crypto.getRandomValues(a),Date.now()+"."+a.join(".")+"@"+t}},function(e,t,a){"use strict";var n=a(1262),i=a.n(n);t.a=function(e,t){try{return i()(e,t)}catch(t){return e}}},,function(e,t,a){"use strict";var n=a(8);t.a=function(e){return n.a.buffer.add(e)}},,function(e,t,a){"use strict";var n=a(12),i=a(16),s=a(57);const r=new class extends s.EventEmitter{emitChange(){this.emit(i.a.CHANGED)}emitChangeParam(e){this.emit(i.a.CHANGED,e)}getSearchSuggestURL(e,t=""){return t.replace(/\%s/gi,encodeURIComponent(e))}addChangeListener(e){this.on(i.a.CHANGED,e)}removeChangeListener(e){this.removeListener(i.a.CHANGED,e)}};n.a.register(e=>{switch(e.actionType){case i.a.SEARCH_SUGGEST_RESULT:const t=JSON.parse(e.json)[1].filter(e=>"string"==typeof e);r.emitChangeParam({query:e.query,suggestions:t,uid:e.uid})}}),t.a=r},function(e,t,a){"use strict";function n(e,t,a,n){return e.substring(0,a)+t+e.substring(n)}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));const i=/^(.*?:\/\/\/*)(.*)$/,s=/(.*?)\/*([#?].*)/;function r(e){if(e.startsWith("data:"))return{schema:"data:",host:"",postfix:"",path:e.substring("data:".length)};let t;try{t=new URL(e)}catch(e){return{schema:"",host:"",path:"",postfix:""}}const a=e.match(i),n=a&&a[1]||"",r=e.match(s),o=r&&r[2]||"",l=t.hostname+(t.port?`:${t.port}`:"");let c;try{c=decodeURI(t.pathname)}catch(e){c=t.pathname}return"vivaldi://"===n?{schema:n,host:l,path:c.startsWith("//")?c.substring(2,c.length-1):c,postfix:o}:{schema:n,host:l,path:c,postfix:o}}},function(e,t,a){"use strict";var n=a(84),i=a.n(n);t.a=function(e){if(!e)return"";const{hostname:t}=i.a.parse(e);return t&&(e=t),0===e.indexOf("www.")&&(e=e.split("www.")[1]),e.includes("/")&&(e=e.split("/")[0]),e}},,function(e,t,a){"use strict";var n=a(72),i=a(0),s=a.n(i),r=a(791),o=a(783),l=a(112),c=a.n(l),u=a(98),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MultiInput.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends s.a.Component{constructor(e){super(e),d(this,"refMultiInputOptions",{}),d(this,"remainingItems",[]),d(this,"selectionModel",new r.a),d(this,"onKeyArrowUp",()=>{const e=this.selectionModel.leadIndex;e>0&&(this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(e-1,!0),this.forceUpdate())}),d(this,"onKeyArrowDown",()=>{const e=this.selectionModel.leadIndex;e<this.state.filteredList.length-1&&(this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(e+1,!0),this.forceUpdate())}),d(this,"resetSelectionModel",()=>{this.selectionModel.resetSelectionModel(),this.forceUpdate()}),d(this,"tokenize",(e,t)=>{const a=/[\S]+/g;let n=[];if(e&&(n=n.concat(e.match(a)||[])),t){const e=t.match(/[^@.+]+/g)||[];n=n.concat([...e,...t.split("@"),t])}return new Set(n.map(e=>e.toLowerCase()))}),d(this,"filterItems",e=>{const t=this.remainingItems,a=[];if(e.length>0){const n=this.tokenize(e);for(let e=0;e<t.length;e++){const i=t[e],s=this.tokenize(i.name,i.address);Object(o.a)(n,s)&&-1===a.indexOf(i)&&a.push(i)}}return this.selectionModel.resetSelectionModel(),this.selectionModel.setIndexSelected(0,!0),this.setState({filteredList:a}),a}),d(this,"inputChanged",()=>{const e=this.refInputField?this.refInputField.value:"",t=this.filterItems(e);let a=!0;0!==e.length&&0!==t.length||(a=!1);const n=this.props.setIsValidInput;if(n){let t=!1;if(e.trim().length>0){const a=Object(u.g)(e);if(a.length>0){const e=a[0];Object(u.d)(e.address)&&(t=!0)}}n(t)}this.setState({inputValue:e,dropDownVisible:a})}),d(this,"onOptionClick",e=>{this.selectOption(e)}),d(this,"onItemClick",e=>{this.removeOption(e)}),d(this,"getRemainingItems",e=>{let t=[];const a=this.props.allItems||[];return c()(1)((e,a)=>(0===e.length?t=a:a.forEach(a=>{e.filter(e=>e.address.toLowerCase()===a.address.toLowerCase()).length>0||t.push(a)}),t))(e,a)}),d(this,"removeOption",e=>{const t=this.props.selectedItems,a=[],n=t.indexOf(e);for(let e=0;e<t.length;e++){const i=t[e];e!==n&&a.push(i)}this.remainingItems=this.getRemainingItems(a),this.setState({filteredList:this.remainingItems,inputValue:Object(u.f)(e)},()=>this.refInputField&&this.refInputField.select()),this.props.itemSelectionCallback(a)}),d(this,"inputConfirmed",e=>{let t=!1;if(e&&e.value&&e.value.trim().length>0){let a="";const n=this.props.selectedItems,i=Object(u.g)(e.value);for(;i.length>0;){const e=i.shift();if(!Object(u.d)(e.address)){i.unshift(e),a=Object(u.e)(i);break}n.push(e),t=!0}t&&(this.remainingItems=this.getRemainingItems(n),this.setState({filteredList:this.remainingItems,inputValue:a,dropDownVisible:!1}),this.props.itemSelectionCallback(n))}return t}),d(this,"selectOption",e=>{this.selectionModel.resetSelectionModel(),this.setState(t=>{const a=this.props.selectedItems;return a.push(e),this.remainingItems=this.getRemainingItems(a),this.props.itemSelectionCallback(a),{filteredList:this.remainingItems,inputValue:"",dropDownVisible:!1}})}),d(this,"inputKeyDown",e=>{const t=e.keyCode,a=!this.refInputField||0===this.refInputField.value.trim().length,i=this.props.selectedItems,s=this.state.filteredList[this.selectionModel.leadIndex],r=t===n.a.KEY_TAB||t===n.a.KEY_RETURN;r||","===e.key?a||(void 0!==s&&r?(this.selectOption(s),e.preventDefault()):this.inputConfirmed(this.refInputField)&&e.preventDefault(),e.stopPropagation()):a&&t===n.a.KEY_BACK_SPACE&&i.length>0?(this.removeOption(i[i.length-1]),e.preventDefault()):t===n.a.KEY_ESCAPE?(a||e.stopPropagation(),this.setState({inputValue:"",dropDownVisible:!1})):this.state.dropDownVisible&&t===n.a.KEY_DOWN?(this.onKeyArrowDown(),e.preventDefault()):this.state.dropDownVisible&&t===n.a.KEY_UP&&(this.onKeyArrowUp(),e.preventDefault())}),d(this,"inputLostFocus",e=>{this.inputConfirmed(this.refInputField),this.setState({dropDownVisible:!1})}),d(this,"itemKeyDown",(e,t)=>{const a=this.props.selectedItems,i=a.indexOf(e),s=t.keyCode;this.refInputField&&i===a.length-1&&this.refInputField.focus(),s!==n.a.KEY_BACK_SPACE&&s!==n.a.KEY_DELETE||this.removeOption(e)}),d(this,"renderSelectedItem",(e,t)=>{let a="";return e.address?a=e.address:"string"==typeof e&&(a=e),s.a.createElement("button",{key:"selected_item_"+t,title:a,onKeyDown:this.itemKeyDown.bind(this,e),onClick:this.onItemClick.bind(this,e),className:"multiinput-item",tabIndex:this.props.tabIndex?this.props.tabIndex:0,__source:{fileName:m,lineNumber:314,columnNumber:7}},e.name&&s.a.createElement("span",{className:"multiinput-item-primary",__source:{fileName:m,lineNumber:324,columnNumber:11}},e.name),e.address&&s.a.createElement("span",{className:"multiinput-item-secondary",__source:{fileName:m,lineNumber:330,columnNumber:11}},"<"+e.address+">"),"string"==typeof e&&s.a.createElement("span",{className:"multiinput-item-primary",__source:{fileName:m,lineNumber:336,columnNumber:11}},e))}),d(this,"focus",()=>{this.refInputField&&this.refInputField.focus()}),d(this,"renderMailAddressForOption",e=>s.a.createElement("div",{__source:{fileName:m,lineNumber:351,columnNumber:5}},e.name?s.a.createElement(s.a.Fragment,{__source:{fileName:m,lineNumber:353,columnNumber:9}},s.a.createElement("div",{className:"multiinput-option-primary",__source:{fileName:m,lineNumber:354,columnNumber:11}},e.name),s.a.createElement("div",{className:"multiinput-option-secondary",__source:{fileName:m,lineNumber:357,columnNumber:11}},"<"+e.address+">")):s.a.createElement("div",{className:"multiinput-option-primary",__source:{fileName:m,lineNumber:362,columnNumber:9}},e.address))),d(this,"renderInputField",()=>s.a.createElement("input",{type:"text",ref:e=>this.refInputField=e,value:this.state.inputValue,onChange:this.inputChanged,onBlur:this.inputLostFocus,onKeyDown:this.inputKeyDown,autoComplete:"false",spellCheck:"false",placeholder:this.props.placeholder,tabIndex:this.props.tabIndex?this.props.tabIndex:0,__source:{fileName:m,lineNumber:371,columnNumber:7}})),d(this,"renderOption",(e,t)=>{const a=this.selectionModel.isSelected(t);return(s.a.createElement("div",{className:"multiinput-option",key:"option_"+t,ref:e=>this.refMultiInputOptions["option_"+t]=e,role:"option","data-id":t,"data-selected":a?"":null,onClick:this.onOptionClick.bind(this,e),__source:{fileName:m,lineNumber:389,columnNumber:7}},this.renderMailAddressForOption(e)))}),d(this,"renderDropDown",()=>s.a.createElement("div",{role:"listbox",className:"multiinput-select",__source:{fileName:m,lineNumber:403,columnNumber:7}},this.state.filteredList.map(this.renderOption))),this.remainingItems=this.getRemainingItems(e.selectedItems),this.state={filteredList:[],inputValue:"",dropDownVisible:!1}}componentDidUpdate(e){e.selectedItems!==this.props.selectedItems&&(this.remainingItems=this.getRemainingItems(this.props.selectedItems))}render(){return s.a.createElement("div",{ref:e=>this.refMultiInputEnvelope=e,className:"multiinput",__source:{fileName:m,lineNumber:411,columnNumber:7}},this.props.selectedItems.map(this.renderSelectedItem),s.a.createElement("div",{className:"multiinput-group",ref:this.refs.ref,__source:{fileName:m,lineNumber:414,columnNumber:9}},this.renderInputField(),this.state.dropDownVisible?this.renderDropDown():""))}}t.a=h},function(e,t,a){"use strict";var n=a(12),i=a(16),s=a(17),r=a(7);function o(e){n.a.dispatch({actionType:i.a.VIVALDI_ACCOUNT_STATE_UPDATED,state:e})}const l=new class{login(e,t,a){r.a.vivaldiAccount.login(e,t,a),r.a.sync.start()}logout(){r.a.sync.stop(),r.a.vivaldiAccount.logout()}loadPromise(){return s.a.isIncognitoOrGuest()?Promise.resolve():new Promise(e=>r.a.vivaldiAccount.getState(t=>{o(t),r.a.vivaldiAccount.onAccountStateChanged.addListener(o),e()}))}};t.a=l},,function(e,t,a){"use strict";var n=a(68),i=a(492),s=a(200),r=a(140),o=a(352),l=a(47),c=a(199),u=a(36),m=a(151),d=a(14),h=a(13),p=a(67),b=a(41),g=a(262),N=a(11),f=a(6),_=a(696),v=a(764),E=a(72),C=a(85);function w(e,t){return e*(1+t)}function O(e,t,a){var n=Number.MAX_VALUE;for(let i=0;i<e.length;i++){const s=e[i],r=y(s,t),o=w(s.w,r);r<=a&&o<n&&(n=o)}var i=[];for(let s=0;s<e.length;s++){const r=e[s],o=y(r,t),l=w(r.w,o);o<=a&&l===n&&i.push(r)}return i}function y(e,t){let a;return a=180===t&&e.d&&e.d<0?t+e.d:Math.abs((e.d||0)-t),a}function S(e,t){var a=e.filter(e=>e.d===t);return a.length?a[0]:(a=function(e,t){var a=Number.MAX_VALUE;for(let n=0;n<e.length;n++){const i=y(e[n],t);i<a&&(a=i)}var n=[];for(let i=0;i<e.length;i++){const s=e[i];y(s,t)===a&&n.push(s)}return{pts:n,dev:a}}(e,t).pts).reduce((e,a)=>{const n=e.d||NaN,i=a.d||NaN;return 180===t&&n>i?e:180===t&&i>n?a:n<i?e:a})}function T(e,t){e.forEach(e=>{var a;e.d=function(e,t){var a=e.x-e.sx,n=e.y-e.sy;if(0===a&&0===n)return t;var i=Math.atan2(n,a);return i*=180/Math.PI,Math.round(i)}(e,t),e.w=(a=e,Math.round(Math.pow(a.x-a.sx,2)+Math.pow(a.y-a.sy,2)))});var a,n=O(e,t,90),i=O(e,t,45),s=i.length?i:n;return 0===s.length?console.log("No point in this direction. Should wrap!"):a=1===s.length?s[0]:S(s,t),a}function k(e,t){Array.isArray(e.below)?e.below.push(t):e.below=[t]}function A(e,t){Array.isArray(e.above)?e.above.push(t):e.above=[t]}function I(e,t){Array.isArray(e.toRight)?e.toRight.push(t):e.toRight=[t]}function D(e,t){Array.isArray(e.toLeft)?e.toLeft.push(t):e.toLeft=[t]}function M(e,t){return e>=t.left&&e<=t.right}function P(e,t){return e>=t.top&&e<=t.bottom}function x(e){return e.left+(e.right-e.left)/2}function L(e,t){const a=x(e),n=x(t);return M(a,t)?(e.quality=1,a):M(n,e)?(e.quality=1,n):M(e.left,t)?(e.quality=2,e.left):M(e.right,t)?(e.quality=2,e.right):M(t.left,e)?(e.quality=2,t.left):M(t.right,e)?(e.quality=2,t.right):e.left>t.right?(e.quality=2,e.left):e.right<t.left?(e.quality=2,e.right):(e.quality=1,a)}function j(e){return e.top+(e.bottom-e.top)/2}function R(e,t){const a=j(e),n=j(t);return P(a,t)?(e.quality=1,a):P(n,e)?(e.quality=1,n):P(e.top,t)?(e.quality=2,e.top):P(e.bottom,t)?(e.quality=2,e.bottom):P(t.top,e)?(e.quality=2,t.top):P(t.bottom,e)?(e.quality=2,t.bottom):e.top>t.bottom?(e.quality=2,e.top):e.bottom<t.top?(e.quality=2,e.bottom):(e.quality=1,a)}function B(e){const t=e.filter(e=>1===e.quality),a=e.filter(e=>2===e.quality);return t.length>0?t:a}function F(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}function U(e,t){return e.bottom>=t.top&&e.bottom<=t.bottom&&e.right>=t.left&&e.right<=t.right||e.top<=t.bottom&&e.top>=t.top&&e.left>=t.left&&e.left<=t.right}var H={buildPoints:function(e){var t=0;return e.map(a=>{var n=a;return n.id=++t,function(e,t){for(var a=0;a<t.length;a++){const n=t[a];n.id!==e.id&&(U(e,n)?(n.left<e.left&&D(e,n),n.right>e.right&&I(e,n),n.top<e.top&&A(e,n),n.bottom>e.bottom&&k(e,n)):(n.top>e.top?k(e,n):n.bottom<=e.top&&A(e,n),n.left>e.left?I(e,n):n.right<=e.left&&D(e,n)))}return e}(n,e)})},buildPointsDeprecated:function(e){var t=0;return e.map(a=>{var n=a[0];return n.id=++t,n.data=a[1],function(e,t){for(var a=0;a<t.length;a++){const n=t[a][0];n.id!==e.id&&(U(e,n)?(n.left<e.left&&D(e,n),n.right>e.right&&I(e,n),n.top<e.top&&A(e,n),n.bottom>e.bottom&&k(e,n)):(n.top>e.top?k(e,n):n.bottom<=e.top&&A(e,n),n.left>e.left?I(e,n):n.right<=e.left&&D(e,n)))}return e}(n,e)})},nextUp:function(e){if(!e.above)return;var t=T(B(e.above.map((t,a)=>{var n=L(e,t);return{sx:n,sy:U(t,e)?Math.min(e.bottom,t.bottom):e.top,x:t.right<n?t.right:t.left>n?t.left:n,y:t.bottom,i:a,w:1,quality:e.quality}})),-90);return t&&e?e.above&&e.above[t.i]:void 0},nextDown:function(e){if(!e.below)return;var t=T(B(e.below.map((t,a)=>{var n=L(e,t);return{sx:n,sy:F(t,e)?e.top:U(t,e)?Math.max(e.top,t.top):e.bottom,x:t.right<n?t.right:t.left>n?t.left:n,y:t.top,i:a,w:1,quality:e.quality}})),90);return t&&e?e.below&&e.below[t.i]:void 0},nextRight:function(e){if(!e.toRight)return;var t=T(B(e.toRight.map((t,a)=>{var n=F(t,e)?e.left:U(t,e)?Math.max(e.left,t.left):e.right,i=R(e,t);return{sx:n,sy:i,x:t.left,y:t.bottom<i?t.bottom:t.top>i?t.top:i,i:a,w:1,quality:e.quality}})),0);return t&&e?e.toRight&&e.toRight[t.i]:void 0},nextLeft:function(e){if(!e.toLeft)return;var t=T(B(e.toLeft.map((t,a)=>{var n=R(e,t);return{sx:U(t,e)?Math.min(e.right,t.right):e.left,sy:n,x:t.right,y:t.bottom<n?t.bottom:t.top>n?t.top:n,i:a,w:1,quality:e.quality}})),180);return t&&e?e.toLeft&&e.toLeft[t.i]:void 0}},V=a(7),W=a(1);function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let G,K,Y,$,X,Z=[],Q=-1,q="",J=!0,ee="";function te(){V.a.tabsPrivate.onWebviewClickCheck.addListener(me),V.a.tabsPrivate.onKeyboardChanged.addListener(se),C.a.bind("ctrl+enter",oe),C.a.bind("shift+enter",le),C.a.bind("ctrl+shift+enter",ce)}function ae(e){const t=document.activeElement;t&&(K||(K=document.createElement("div"),K.id="spatnav-indicator",K.style.position="absolute",K.style.boxShadow="0 0 10px 4px rgba(255,122,0,0.70), 0 0 0 2px #FF7A00",K.style.borderRadius="2px",K.style.backgroundColor="transparent",K.style.zIndex="0","visible"!==K.style.visibility&&(K.style.visibility="visible",te()),G.appendChild(K)),V.a.zoom.getVivaldiUIZoom(a=>{const n=t.getBoundingClientRect(),i=n.top,s=n.left;K.style.left=s+e.left/a+"px",K.style.top=i+e.top/a+"px",K.style.width=e.width/a+"px",K.style.height=e.height/a+"px","visible"!==K.style.visibility&&(K.style.visibility="visible",te())}))}function ne(){K&&(K.style.visibility="hidden"),V.a.tabsPrivate.onWebviewClickCheck.removeListener(me),V.a.tabsPrivate.onKeyboardChanged.removeListener(se),C.a.unbind("ctrl+enter",oe),C.a.unbind("shift+enter",le),C.a.unbind("ctrl+shift+enter",ce)}function ie(e){if(0!==Z.length)return"up"===e?function(){let e=Z[0];return Z.forEach((function(t){t.top>e.top&&(e=t)})),e}():"left"===e?function(){let e=Z[0];return Z.forEach((function(t){t.left>e.left&&(e=t)})),e}():"down"===e||"right"===e?function(){let e=Z[0];return Z.forEach((function(t){e.left+e.top>t.left+t.top&&(e=t)})),e}():void 0}function se(e,t,a,n){n===E.a.KEY_ESCAPE&&0===a?ne():n!==E.a.KEY_RETURN&&n!==E.a.KEY_ENTER||0!==a?"WEBVIEW"!==document.activeElement.tagName&&ne():re(0)}function re(e){ne();const t=document.activeElement,a=parseInt(t.getAttribute("tab_id"));Y&&V.a.tabsPrivate.activateElementFromPoint(a,Math.round(Y.left+Y.width/2),Math.round(Y.top+Y.height/2),e),J=!0}function oe(){re(2)}function le(){re(1)}function ce(){re(3)}function ue(e,t){const a=document.activeElement.getBoundingClientRect(),n="up"===t||"down"===t?Math.round(a.height/2):Math.round(a.width/2);ee=Y?Y.path:"",V.a.tabsPrivate.scrollPage(e,t,n,()=>{V.a.tabsPrivate.getSpatialNavigationRects(e,(function(e){Z=H.buildPoints(e),0===Z.length?(ne(),J=!0):(Y=Z.find(e=>e.path===ee),Y||(Y=ie(t)),Y&&(ee="",ae(Y),J=!1))}))}),V.a.tabsPrivate.getScrollPosition(e,(function(e,t){$=e,X=t}))}function me(e,t,a,n,i){ne()}async function de(e){const t=document.activeElement,a=parseInt(t.getAttribute("tab_id"));if(!f.a.get(W.kWebpagesSpatialNavigationEnabled)&&a)return;const{scrollx:n,scrolly:i}=await function(e){return new Promise(t=>{V.a.tabsPrivate.getScrollPosition(e,(e,a)=>{t({scrollx:e,scrolly:a})})})}(a);$===n&&X===i||(J=!0),$=n,X=i,a!==Q&&(Q=a,J=!0);const s=await V.a.tabsPrivate.getSpatialNavigationRects(a);if(J&&(Z=H.buildPoints(s),Y=ie(e),J=!1),G=document.getElementById("app"),0!==s.length)if(K)if("visible"!==K.style.visibility)Y&&ae(Y);else{let t;t=Y?function(e,t){switch(t){case"left":return H.nextLeft(e);case"up":return H.nextUp(e);case"right":return H.nextRight(e);case"down":return H.nextDown(e)}}(Y,e):ie(e),t?(ae(t),Y=t):ue(a,e)}else Y=ie(e),ae(Y);else ue(a,e)}h.c.addChangeListener((function(){const e=h.c.unsafeGetActivePage().url;q?q!==e&&(K&&"visible"===K.style.visibility&&ne(),q=e,J=!0):q=e}));var he=async function(e){await de(e)};var pe=new class{constructor(){z(this,"left",he.bind(this,"left")),z(this,"up",he.bind(this,"up")),z(this,"right",he.bind(this,"right")),z(this,"down",he.bind(this,"down"))}},be=a(190),ge=a(435),Ne=a(201),fe=a(95),_e=a(158),ve=a(17),Ee=a(297),Ce=a(2),we=a(10),Oe=a(4),ye=a(134),Se=a(26),Te=a(441),ke=a(89);const Ae=()=>{const e=ke.b.getFilteredFlat("",{inTrash:!1});Ie(t=>{t?e.forEach(e=>{const{content:a="",url:n="",dateAdded:i=0}=e,s=new Date(i).toString(),r=new Blob([`${a}\n${s}\n${n||""}`]),o=`${a.substring(0,4)}_ ${e.id}.txt`;we.a.fileSystem.getWritableEntry(t,e=>{e.getFile(o,{create:!0},e=>{e.createWriter(e=>{let t=!1;e.onwriteend=function(e){if(!t)return t=!0,void this.truncate(r.size)},e.onerror=function(e){console.warn("Error Exporting Notes: "+e.toString())},e.write(r)})})})}):console.warn("Error exporting notes, directory missing")})},Ie=e=>{we.a.fileSystem.chooseEntry({type:"openDirectory"},t=>{const a=we.a.runtime.lastError;a?console.error(a.message):e(t)})},De=()=>{Ie(e=>{if(!e)return void console.warn("Error importing notes, directory missing");const t=e.createReader(),a=()=>{t.readEntries((function(e){e.length>0&&(e.forEach(e=>{e.file((function(e){const t=new FileReader;t.onloadend=function(){const e=this.result;e&&V.a.notes.create({content:e})},t.readAsText(e)}),e=>{console.warn("Error reading file "+e)})}),a())}))};a()})};var Me=a(117),Pe=a(131),xe=a(130),Le=a(468);var je=a(87),Re=a(35);var Be=a(23);a.d(t,"a",(function(){return Fe}));const Fe=[{name:"COMMAND_NEW_WINDOW",action:()=>{ve.a.isGuestSession()?u.a.openGuestWindow():d.a.openWindow()},withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"b6ddaabf-d87f-4c2c-affa-ce81bb30bfca",...Object(Oe.a)("command","New Window")},{name:"COMMAND_NEW_PRIVATE_WINDOW",action:d.a.openIncognitoWindow,isEnabled:()=>!ve.a.isGuestSession(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"176ff9a8-a516-4015-9b0a-14434746ce9b",...Object(Oe.a)("New Private Window")},{name:"COMMAND_NEW_GUEST_WINDOW",action:u.a.openGuestWindow,isEnabled:()=>!ve.a.isIncognito(),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!0,guid:"1453aae1-130d-465f-98eb-cbda5061445d",...Object(Oe.a)("New Guest Window")},{name:"COMMAND_MANAGE_PEOPLE",action:()=>u.a.managePeople(),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!0,guid:"49023738-dc53-4fce-8fd8-68bcdc89be34",...Object(Oe.a)("Manage Profiles")},{name:"COMMAND_CLOSE_WINDOW",action:()=>_e.a.close(ve.a.getId()),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"172583c9-c8d5-45f7-9e4d-65cff9333679",...Object(Oe.a)("command","Close Window")},{name:"COMMAND_SHOW_QUICK_COMMANDS",action:u.a.showQuickCommand,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"f8d653f3-1371-4cf2-ab83-b8c62ad98add",...Object(Oe.a)("Quick Commands")},{name:"COMMAND_FULLSCREEN",action:()=>_e.a.toggleFullscreen(ve.a.getId()),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"7420368f-565e-409f-8eec-5b5c578429af",...Object(Oe.a)("Fullscreen Mode")},{name:"COMMAND_TASK_MANAGER",action:()=>V.a.utilities.openTaskManager(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"3aed82ac-e497-4f75-9f13-c5a7df0ac448",...Object(Oe.a)("Task Manager")},{name:"COMMAND_SHOW_SETTINGS",action:()=>u.a.showSettings(),isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"1e05a540-7261-427f-a902-8a75f5e81cdd",...Object(Oe.a)("Settings")},{name:"COMMAND_SHOW_ACCOUNT_SHEET",action:u.a.showAccountSheet,isEnabled:()=>(ve.a.isGuestSession(),!1),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ae3f522d-999f-4733-905b-1b0d45ee7e85",...Object(Oe.a)("Account Sheet")},{name:"COMMAND_SHOW_EXTENSIONS",action:()=>u.a.showExtensions(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"ef8d7f53-627c-4286-a03e-7affc92b5ff3",...Object(Oe.a)("Extensions")},{name:"COMMAND_SHOW_HISTORY",action:()=>u.a.showHistory(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"dd8723f0-b05a-4d22-b55b-b1c1a6e282e2",...Object(Oe.a)("History")},{name:"COMMAND_SHOW_NOTES",action:()=>u.a.showNotes(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"97006589-839d-4c3e-aa37-311a864618b5",...Object(Oe.a)("Notes")},{name:"COMMAND_SHOW_BOOKMARKS",action:()=>u.a.showBookmarks(),withNoWindow:!0,isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9cde01a4-9df7-4a2e-84a1-27997c6df705",...Object(Oe.a)("Bookmarks")},{name:"COMMAND_SHOW_WELCOME",action:()=>u.a.showWelcome(),isEnabled:()=>!ve.a.isGuestSession(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"3e27424f-656a-48bf-85e4-01364ec27b57",...Object(Oe.a)("Vivaldi Welcome Tour")},{name:"COMMAND_SHOW_CLEAR_PRIVATE_DATA",action:u.a.showClearPrivateData,isEnabled:()=>!ve.a.isIncognitoOrGuest(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"10a45d9e-c539-4c67-92fd-c2332fb41127",...Object(Oe.a)("Delete Browsing Data")},{name:"COMMAND_SHOW_BOOKMARK_BAR",action:()=>_e.a.toggleBookmarksBar(ve.a.getId()),behavior:"checkbox",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"42b84fc2-a9c1-425d-a08f-f349dbb6e8a6",...Object(Oe.a)("Bookmarks Bar")},{name:"COMMAND_TOGGLE_APPLE_EVENTS",action:N.a.toggle.bind(N.a,W.kAllowJavascriptAppleEvents,!0,!1),inMenu:!1,showInQC:!1,isEnabled:()=>!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"c8908d2a-9b77-4eb3-bdcf-327f5d78fe60",...Object(Oe.a)("Apple Events")},{name:"COMMAND_TOGGLE_MENU_POSITION",action:N.a.toggle.bind(N.a,W.kMenuDisplay,"vivaldi","top"),hideInSettings:!1,inMenu:!0,showInQC:!0,behavior:"checkbox",category:"CATEGORY_COMMAND_APPEARANCE",guid:"6c186895-cfb1-4ce5-8d9b-21484a438ef6",...Object(Oe.a)("command","Menu Position")},{name:"COMMAND_TOGGLE_FOOTER",action:()=>_e.a.toggleStatusBar(ve.a.getId()),behavior:"checkbox",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"ea570117-f29e-4fd2-b4de-649a4660a4f2",...Object(Oe.a)("other","Status Bar")},{name:"COMMAND_TOGGLE_STARTPAGE_NAVIGATION",action:()=>N.a.toggle(W.kStartpageNavigation,"off","on"),behavior:"checkbox",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a1563471-d01b-4e7f-8a40-552120443cd5",...Object(Oe.a)("other","Start Page Navigation")},{name:"COMMAND_TOGGLE_INTERFACE_COLOR",action:function(){const e=Re.a.getKeysSync(["THEMES_SYSTEM","THEMES_USER","THEME_CURRENT"]),t=e.THEMES_SYSTEM.concat(e.THEMES_USER);if(0===t.length||1===t.length)return;const a=t.findIndex(t=>t.name===e.THEME_CURRENT);if(-1===a)return;const n=t[(a+1)%t.length];je.e.setTheme(n)},showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"0a9303d7-c8b0-4b0d-b6e0-02a5ba457360",...Object(Oe.a)("Next Theme")},{name:"COMMAND_EXIT",action:()=>{V.a.runtimePrivate.exit()},hideInSettings:!1,inMenu:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"842121fd-5e5a-48f3-95ad-947d37aebedb",...Object(Oe.a)("verb","Exit")},{name:"COMMAND_QUIT_MAC_MAYBE_WARN",action:()=>{},inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",withNoWindow:!0,guid:"ff0ac033-0fcf-4c77-b664-7f7c3e4a2044",...Object(Oe.a)("Quit $1",["Vivaldi"])},{name:"COMMAND_SHOW_HELP",action:()=>d.a.openURL("https://help.vivaldi.com/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"643fde7b-ac28-4241-b0d0-bc221ee88785",...Object(Oe.a)("browser","Vivaldi Help")},{name:"COMMAND_SHOW_KEYBOARDSHORTCUTS",action:u.a.showKeyboardShortcuts,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"12ab9d03-8327-4e5d-a905-609af0ab5528",...Object(Oe.a)("Keyboard Cheat Sheet")},{name:"COMMAND_REPORT_BUG",action:()=>d.a.openURL("https://forum.vivaldi.net/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"f9f6da04-7ebc-4fb4-8633-f122ca145217",...Object(Oe.a)("Report A Bug On The Forum")},{name:"COMMAND_SHOW_PAGE_ACCESS_KEYS",action:u.a.showPageAccessKeys,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"7838709a-7042-4913-b541-25ff2268f774",...Object(Oe.a)("Show Webpage Access Key Shortcuts")},{name:"COMMAND_BREAKMODE_TOGGLE",action:()=>i.a.toggleBreakMode(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"a3596917-8095-42e9-8efb-31ad8ad0cbaa",...Object(Oe.a)("command","Break Mode")},{name:"COMMAND_START_CHROMECAST",action:u.a.startCasting,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"8b650af8-6342-48f5-a45b-2d56933fb389",...Object(Oe.a)("Cast")},{name:"COMMAND_MAIN_TOGGLE_TAB_BAR",action:()=>_e.a.toggleTabs(ve.a.getId()),behavior:"checkbox",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"c4bfbdc9-1e24-4b60-bbfe-a706be090f7b",...Object(Oe.a)("command","Tab Bar")},{name:"COMMAND_MAIN_TOGGLE_PANEL_TOGGLE",action:()=>_e.a.togglePanelToggle(ve.a.getId()),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"1ad09f05-6a12-41e9-9bf3-ddf58f24bea4",...Object(Oe.a)("Panel Toggle")},{name:"COMMAND_MAIN_TOGGLE_ADDRESS_BAR",action:()=>_e.a.toggleAddressBar(ve.a.getId()),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"14fc610b-d5dc-49fc-973d-4d666394948b",...Object(Oe.a)("other","Address Bar")},{name:"COMMAND_MAIN_TOGGLE_UI",action:()=>_e.a.toggleMinimalUI(ve.a.getId()),behavior:"checkbox",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"3b773be0-6af6-47f4-807c-19ad590693a2",...Object(Oe.a)("Toggle UI")},{name:"COMMAND_CAPTURE_AREA_TO_DISK",action:()=>be.a.captureArea("file"),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"6ae02ffe-8039-4689-9e73-a7cd5ae792b3",...Object(Oe.a)("Capture Area to File")},{name:"COMMAND_CAPTURE_AREA_TO_CLIPBOARD",action:()=>be.a.captureArea("clipboard"),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"2c2057eb-ec79-4d9e-a8de-5bbb0c2a6249",...Object(Oe.a)("Capture Area to Clipboard")},{name:"COMMAND_FOCUS_NEXT",action:u.a.stepFocus.bind(null,!0),repeat:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"8202e8f1-c0d1-4a85-bbab-f66a52656a30",...Object(Oe.a)("Focus Next Pane")},{name:"COMMAND_FOCUS_PREVIOUS",action:u.a.stepFocus.bind(null,!1),repeat:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"0dc4e130-6728-46e0-a632-3a2e7d817f2a",...Object(Oe.a)("Focus Previous Pane")},{name:"COMMAND_NEW_TAB",action:()=>{if(!r.a.hasListener("COMMAND_NEW_TAB"))return d.a.openURL();r.a.onCommand("COMMAND_NEW_TAB")},withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"b3515e1b-9cf2-4ba0-ba34-fac6ce308b08",...Object(Oe.a)("command","New Tab")},{name:"COMMAND_NEW_TAB_OUTSIDE_GROUP",action:()=>d.a.openURL(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"4b4d97fa-f94d-4bc1-80b6-2849a56dbe42",...Object(Oe.a)("command","New Top Level Tab")},{name:"COMMAND_NEW_BACKGROUND_TAB",action:()=>be.a.newBackgroundTab(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"5c2631d5-69cd-4bd5-b6e2-93b8a6ca0281",...Object(Oe.a)("New Background Tab")},{name:"COMMAND_CLONE_TAB",action:()=>{const e=ve.a.getActiveBrowserOrPopupWindowId();return h.c.isSelecting(e)?d.a.clonePages(h.c.getSelectedPages(e)):d.a.clonePages(Se.List.of(h.c.unsafeGetActivePage(e)))},showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"74393bfb-4c31-4b25-afc4-471cb9d621ca",...Object(Oe.a)("Clone Selected Tabs")},{name:"COMMAND_MOVE_TAB_TO_NEW_WINDOW",action:()=>d.a.detachPage(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"d03d4bc8-26c4-49f6-b3ce-23980637ae76",...Object(Oe.a)("Move Tab to New Window")},{name:"COMMAND_PIN_TAB",action:e=>d.a.toggleSelectedPagesPinned(ve.a.getActiveBrowserOrPopupWindowId()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8b413c0e-9024-4fbe-8813-68c76096c87b",...Object(Oe.a)("Pin / Unpin Tab")},{name:"COMMAND_CLOSE_TAB",action:()=>d.a.close(),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"f0a3a628-6977-4812-ab11-96a1d1fbc08d",...Object(Oe.a)("Close Tab")},{name:"COMMAND_CLOSE_TAB_TO_LEFT",action:()=>d.a.closeToLeft(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cd97956b-c939-4271-9037-1676c70e4fa4",...Object(Oe.a)("Close Tabs to the Left")},{name:"COMMAND_CLOSE_TAB_TO_RIGHT",action:()=>d.a.closeToRight(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cfb3068d-5e79-4dac-a741-50879d4e81db",...Object(Oe.a)("Close Tabs to the Right")},{name:"COMMAND_CLOSE_ALL_BUT_ACTIVE_TAB",action:be.a.closeAllButActiveTab,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"275ca3f7-ecfb-4445-bf87-686cd473536e",...Object(Oe.a)("Close Other Tabs")},{name:"COMMAND_TAB_THUMBNAIL",action:be.a.toggleTabThumbnail,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"c46c994e-81a8-4b4b-ae15-4e64a643af7b",...Object(Oe.a)("Tab Thumbnail")},{name:"COMMAND_SHOW_ABOUT",action:()=>d.a.openURL(Be.p.internals.about),category:"CATEGORY_COMMAND_APPLICATION",withNoWindow:!0,showInQC:!0,guid:"b5396606-e86b-4cca-bd74-029f3c538423",...Object(Oe.a)("About")},{name:"COMMAND_CHECK_FOR_UPDATES",action:()=>V.a.autoUpdate.checkForUpdates(!0),showInQC:!ve.a.isGuestSession(),isEnabled:()=>!ve.a.isGuestSession(),withNoWindow:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"b4ef4439-df4a-4634-95f7-509c95e42b69",...Object(Oe.a)("Check for Updates")},{name:"COMMAND_SHOW_COMMUNITY",action:()=>d.a.openURL("https://vivaldi.net/?pk_campaign=v-menu"),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"cb626c77-47cd-46e3-9cf7-d976f50aadbd",...Object(Oe.a)("Community Blogs")},{name:"COMMAND_TAB_SWITCH_BACK_SETTING",action:be.a.switchTabBackBySetting,inMenu:!1,repeat:!0,showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"ee5eec5e-9ebf-4faf-b2ec-4fdba8b328d0",...Object(Oe.a)("Tab Cycler Back")},{name:"COMMAND_TAB_SWITCH_FORWARD_SETTING",action:be.a.switchTabForwardBySetting,inMenu:!1,repeat:!0,showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7c2836f2-93e5-445f-9674-46a29759ff34",...Object(Oe.a)("Tab Cycler Forward")},{name:"COMMAND_TAB_SWITCH_BACK_ORDER",action:be.a.switchTabBackByOrder,repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"9693c49b-29e0-442e-925d-d34d95f977a4",...Object(Oe.a)("Previous Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_ORDER",action:be.a.switchTabForwardByOrder,repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"037d899d-b191-49c7-a932-87d8881d7037",...Object(Oe.a)("Next Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_HISTORY",action:be.a.switchTabForwardByHistory,repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a645ffdf-6235-425a-896e-3dfd8d4eebb1",...Object(Oe.a)("Previous Tab (Recent)")},{name:"COMMAND_TAB_SWITCH_BACK_HISTORY",action:be.a.switchTabBackByHistory,repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"0c39ac37-1deb-4dc8-bea4-54672978af06",...Object(Oe.a)("Next Tab (Recent)")},{name:"COMMAND_TAB_MOVE_BACKWARD",action:()=>d.a.stepActivePage(!1,"dotted"===f.a.get(W.kTabsStackingMode),ve.a.getActiveBrowserOrPopupWindowId()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"bb5e2bde-67dd-40ff-9d87-43032f048b7a",...Object(Oe.a)("Move Active Tab Backward")},{name:"COMMAND_TAB_MOVE_FORWARD",action:()=>d.a.stepActivePage(!0,"dotted"===f.a.get(W.kTabsStackingMode),ve.a.getActiveBrowserOrPopupWindowId()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8338b153-b32d-4a29-962e-cb3bbc5861d0",...Object(Oe.a)("Move Active Tab Forward")},{name:"COMMAND_TAB_DISABLE_ALL_RELOADS",action:()=>g.a.destroyAllPeriodicAlarms(),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7d40d732-b025-4722-bc23-b66ada752339",...Object(Oe.a)("Disable Periodic Timers")},{name:"COMMAND_TAB_PERIODIC_RELOAD",action:async e=>{const t=Object(Me.z)(e),a=h.c.unsafeGetActivePage().getIn(["extData","ext_id"]),n=t/60;await g.a.createPeriodicReloadAlarm({id:a,interval:n,from:"tab"})},showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",keyword:{type:"mixed",defaultValue:60,unit:Object(Ce.a)("time","Seconds"),min:60,max:31556926,validity:/(^(\d+'(\d+")?|\d+")$)/g},guid:"bf7a3a4a-565a-46c7-835c-fa2a6d4b7fdf",...Object(Oe.a)("tab","Periodic Reload")},{name:"COMMAND_PAGE_SELECTION_CURRENT",action:()=>d.a.setSelection(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2cd718aa-76d4-4bd4-9c55-6117822d402e",...Object(Oe.a)("other","Select Current Tab")},{name:"COMMAND_PAGE_SELECTION_EXPAND_PREVIOUS",action:()=>d.a.expandSelectionPrevious(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"e245bce5-20a7-481f-910e-23bf1de86748",...Object(Oe.a)("other","Select Previous Tab")},{name:"COMMAND_PAGE_SELECTION_EXPAND_NEXT",action:()=>d.a.expandSelectionNext(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"23e27390-f1bf-4ec3-92b5-7634daeabc5b",...Object(Oe.a)("other","Select Next Tab")},{name:"COMMAND_PAGE_SELECTION_TOGGLE_RELATED",action:()=>d.a.toggleRelatedSelection(h.c.unsafeGetActivePage()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7ef25cfa-632f-4872-832c-ca6c9dfb5769",...Object(Oe.a)("other","Select Related Tabs")},{name:"COMMAND_PAGE_SELECTION_CLEAR",action:()=>d.a.clearSelection(ve.a.getActiveBrowserOrPopupWindowId()),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cf44c36e-ab42-4700-a80e-93f5f504c72b",...Object(Oe.a)("other","Deselect Tabs")},{name:"COMMAND_TAB_SWITCH_1",action:()=>d.a.activateTabByIndex(0),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a4d46cc3-e258-4c20-ab39-3174ec9acbb9",...Object(Oe.a)("Switch to Tab 1")},{name:"COMMAND_TAB_SWITCH_2",action:()=>d.a.activateTabByIndex(1),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"3a792281-c3a3-4501-b64c-b5173206195d",...Object(Oe.a)("Switch to Tab 2")},{name:"COMMAND_TAB_SWITCH_3",action:()=>d.a.activateTabByIndex(2),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"5e570a93-4779-4266-aebe-f2abe0e081ae",...Object(Oe.a)("Switch to Tab 3")},{name:"COMMAND_TAB_SWITCH_4",action:()=>d.a.activateTabByIndex(3),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"34281a36-77c7-4f3c-99e1-73529174cfb6",...Object(Oe.a)("Switch to Tab 4")},{name:"COMMAND_TAB_SWITCH_5",action:()=>d.a.activateTabByIndex(4),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"71cd67b0-77bb-4cf3-a7ee-8e26462eb42e",...Object(Oe.a)("Switch to Tab 5")},{name:"COMMAND_TAB_SWITCH_6",action:()=>d.a.activateTabByIndex(5),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"d8b8a23c-f47b-4341-8adc-844cc52562b1",...Object(Oe.a)("Switch to Tab 6")},{name:"COMMAND_TAB_SWITCH_7",action:()=>d.a.activateTabByIndex(6),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"c537cc07-a3ff-4151-997c-40e25056e65d",...Object(Oe.a)("Switch to Tab 7")},{name:"COMMAND_TAB_SWITCH_8",action:()=>d.a.activateTabByIndex(7),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"710bb550-7dea-4436-9d0c-fea152299507",...Object(Oe.a)("Switch to Tab 8")},{name:"COMMAND_TAB_SWITCH_9",action:()=>d.a.activateTabByIndex(8),showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"91f469f5-f527-433c-a1fa-2e3f399c7820",...Object(Oe.a)("Switch to Tab 9")},{name:"COMMAND_TAB_SWITCH_LAST",action:d.a.openLastPage,showInQC:!1,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"750d7779-97ec-493d-afa8-a62c179d6d82",...Object(Oe.a)("Switch to the Last Tab")},{name:"COMMAND_HIBERNATE_OTHER_TABS",action:()=>Object(Me.x)(),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"62655c2c-509d-40f9-aec9-d4428af56884",...Object(Oe.a)("Hibernate Background Tabs")},{name:"COMMAND_SHOW_CLOSED_TABS",action:r.a.onCommand.bind(r.a,"COMMAND_SHOW_CLOSED_TABS"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"ba89f260-0036-4f93-95aa-11b65790621d",...Object(Oe.a)("Show Closed Tabs")},{name:"COMMAND_TAB_REOPEN_RECENTLY_CLOSED",action:()=>Ne.a.undeletePreviousTab(),tweakedShortcut:"ctrl+z",withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"7e925f03-11a3-47b4-b092-e1c355661796",...Object(Oe.a)("Reopen Closed Tab")},{name:"COMMAND_TAB_STACK_TILE_VERTICAL",action:be.a.stackTileVertical,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"854f8a44-50bd-41bc-8277-acd51e719d1b",...Object(Oe.a)("Tile Vertically")},{name:"COMMAND_TAB_STACK_TILE_HORIZONTAL",action:be.a.stackTileHorizontal,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2991fb16-2df8-42b5-898a-25a0d028ac41",...Object(Oe.a)("Tile Horizontally")},{name:"COMMAND_TAB_STACK_TILE_GRID",action:be.a.stackTileGrid,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"83c2d2d0-a53b-4521-82b5-4c2e61ed024b",...Object(Oe.a)("Tile to Grid")},{name:"COMMAND_TAB_STACK_UNTILE",action:be.a.stackUntile,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a0294e45-6204-406e-b456-2664e4d23b24",...Object(Oe.a)("Untile Tabs")},{name:"COMMAND_TAB_STACK_CREATE",action:be.a.stackCreate,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"cdd99010-5477-4508-aa28-d671de35dcb2",...Object(Oe.a)("Stack Tabs")},{name:"COMMAND_TAB_STACK_DISSOLVE",action:be.a.stackDissolve,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"61ab7d82-7602-4f72-9f00-07a426ff47c1",...Object(Oe.a)("Unstack Tabs")},{name:"COMMAND_TAB_STACK_REMOVE",action:be.a.stackRemove,showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"56cf9bd1-63b1-4ebf-92b0-c909e5d479c6",...Object(Oe.a)("Remove from Tab Stack")},{name:"COMMAND_TOGGLE_MOUSE_GESTURES",action:()=>N.a.toggle(W.kMouseGesturesEnabled,!0,!1),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"01f9d07d-5ec6-41a4-927c-129cef008d65",...Object(Oe.a)("Toggle Mouse Gestures")},{name:"COMMAND_TOGGLE_IMAGES",action:()=>d.a.toggleImageLoading(),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"6777b0a7-25d2-4e5e-a4e1-b5fcc0fcdef8",...Object(Oe.a)("other","Load Images")},{name:"COMMAND_SET_LOAD_IMAGES_ALWAYS",action:()=>d.a.setImageLoading("always"),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8d1f63a0-6e3c-42dd-a1b8-9a740f65bafe",...Object(Oe.a)("other","Images On")},{name:"COMMAND_SET_LOAD_IMAGES_NEVER",action:()=>d.a.setImageLoading("never"),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"e346b0a7-74c6-4e69-952e-420d33e54a8e",...Object(Oe.a)("other","Images Off")},{name:"COMMAND_SET_LOAD_IMAGES_CACHE",action:()=>d.a.setImageLoading("cache"),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"f016e79c-a799-465f-9d01-2869a751774c",...Object(Oe.a)("other","Load Images From Cache")},{name:"COMMAND_SET_ANIMATIONS_LOOP",action:()=>we.a.accessibilityFeatures.animationPolicy.set({value:"allowed"}),behavior:"radio",category:"CATEGORY_COMMAND_TAB_ACTION",showInQC:!0,guid:"080beb50-b815-4416-8a69-246907b2805a",...Object(Oe.a)("other","Loop Animations")},{name:"COMMAND_SET_ANIMATIONS_NEVER",action:()=>we.a.accessibilityFeatures.animationPolicy.set({value:"none"}),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"1d4df136-9d8e-4541-b0b9-1a66a5b23444",...Object(Oe.a)("other","No Animations")},{name:"COMMAND_SET_ANIMATIONS_ONCE",action:()=>we.a.accessibilityFeatures.animationPolicy.set({value:"once"}),behavior:"radio",showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8159b932-9a12-4cef-bf84-f046ab3a2030",...Object(Oe.a)("other","Play Animations Once")},{name:"COMMAND_PAGE_TOGGLE_MUTE",action:()=>d.a.toggleMuting(Se.List.of(h.c.unsafeGetActivePage())),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"a6f425df-46e7-48f9-8be2-3b03329fa8d0",...Object(Oe.a)("Mute / Unmute Tab")},{name:"COMMAND_PAGE_MUTE_OTHER",action:()=>d.a.setMuting("other","mute"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"4cb148ba-cb83-4e4a-be3e-43b60a3f3982",...Object(Oe.a)("Mute Other Tabs")},{name:"COMMAND_PAGE_MUTE_ALL",action:()=>d.a.setMuting("all","mute"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"431a57f8-a637-41e5-a4de-1b1c3be081db",...Object(Oe.a)("Mute All Tabs")},{name:"COMMAND_PAGE_UNMUTE_OTHER",action:()=>d.a.setMuting("other","unmute"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"4dc07cbf-4c8b-42ed-8117-c123834a76c5",...Object(Oe.a)("Unmute Other Tabs")},{name:"COMMAND_PAGE_UNMUTE_ALL",action:()=>d.a.setMuting("all","unmute"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"9badb24d-1a7b-46fd-8e95-d50f93812911",...Object(Oe.a)("Unmute All Tabs")},{name:"COMMAND_CAPTURE_PAGE_TO_DISK",action:()=>be.a.capturePage("file"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2fe0abe5-421c-4d9d-83ef-16e9f9deb9bb",...Object(Oe.a)("Capture Page to File")},{name:"COMMAND_CAPTURE_PAGE_TO_CLIPBOARD",action:()=>be.a.capturePage("clipboard"),showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"2a8349df-be2b-44e8-8db9-4f349a470790",...Object(Oe.a)("Capture Page to Clipboard")},{name:"COMMAND_TAB_TRANSLATE_PAGE",action:e=>{const t=h.c.unsafeGetActivePage();if(t)return ge.a.translatePage(t.id)},isEnabled:()=>{const e=h.c.unsafeGetActivePage();return!!e&&Boolean(e.pageLanguage&&""!==e.pageLanguage)},showInQC:!0,category:"CATEGORY_COMMAND_TAB_ACTION",guid:"8d7a4844-f2d5-4cfe-abcd-e2fd99005a41",...Object(Oe.a)("tab","Translate Page")},{name:"COMMAND_IMPORT_DATA",action:u.a.showImportData,isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"6c851825-1e73-4ec5-ad5e-2ec9c826524c",...Object(Oe.a)("command","Import from Applications or Files")},{name:"COMMAND_EXPORT_DATA",action:()=>we.a.bookmarks.export(),isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"fba8ba2b-f317-463a-b685-6d3fb7040845",...Object(Oe.a)("Export Bookmarks")},{name:"COMMAND_EXPORT_NOTES",action:()=>Ae(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"fe0e224c-a903-4952-ae3d-d69d8777c24a",...Object(Oe.a)("Export Notes")},{name:"COMMAND_IMPORT_NOTES",action:()=>De(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"db20661f-37e9-4376-94c8-9aebc7a27628",...Object(Oe.a)("Import Notes")},{name:"COMMAND_NEW_TAB_LINK",action:(e,t,a)=>d.a.openURL(a,{addOpenerTabId:!0}),overLink:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"62966533-b4f6-4f86-a02c-9753948c6277",...Object(Oe.a)("Open Link in New Tab (Over a Link)")},{name:"COMMAND_NEW_BACKGROUND_TAB_LINK",action:(e,t,a)=>be.a.newBackgroundTab(a,!0),overLink:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"db3df40a-0d5f-4f87-a57a-cf9640e401c3",...Object(Oe.a)("Open Link in Background Tab (Over a Link)")},{name:"COMMAND_READERVIEW_TOGGLE",action:()=>_.a.toggleReaderMode(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"8dd47fc9-4c1f-4487-a475-f55bfa61aaf2",...Object(Oe.a)("Toggle Reader View")},{name:"COMMAND_BOOKMARK_SELECTED_TABS",action:r.a.onCommand.bind(r.a,"COMMAND_BOOKMARK_SELECTED_TABS"),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"12bef254-49e1-4205-b14e-acd4d3b4238b",...Object(Oe.a)("Bookmark Selected Tabs")},{name:"COMMAND_SAVE_SESSION",action:u.a.showSaveSession.bind(u.a,{mode:"all"}),isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"ec8eb1b8-53ef-48f8-bbdc-d0c44af2d5cd",...Object(Oe.a)("command","Save Open Tabs as Session")},{name:"COMMAND_SAVE_SELECTED_SESSION",action:r.a.onCommand.bind(r.a,"COMMAND_SAVE_SELECTED_SESSION"),isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"0fe4c500-31cf-4d73-8dc1-281eb4259fe7",...Object(Oe.a)("command","Save Selected Tabs as Session")},{name:"COMMAND_OPEN_SESSION",action:u.a.showOpenSession,isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"4a65bd2a-ec3c-42ca-ac7a-67040fe8cebc",...Object(Oe.a)("Open Saved Session")},{name:"COMMAND_ADD_BOOKMARK",action:fe.a.doAction,isEnabled:()=>!ve.a.isGuestSession(),param:"addBookmark",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"844219eb-ed35-4b17-a9f4-7789466c233c",...Object(Oe.a)("Create Bookmark")},{name:"COMMAND_BLOCK_TRACKING",action:()=>{const{url:e}=h.c.unsafeGetActivePage();Object(Te.a)(e,"tracking")},isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9afb77f2-d3d3-4596-8a04-58ab48a345fa",...Object(Oe.a)("Block / Unblock Tracking")},{name:"COMMAND_BLOCK_TRACKING_AND_ADS",action:()=>{const{url:e}=h.c.unsafeGetActivePage();Object(Te.a)(e,"ad_blocking")},isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"da2af162-2140-4aae-8366-3add4793ac17",...Object(Oe.a)("Block / Unblock Ads and Tracking")},{name:"COMMAND_FOCUS_ADDRESSFIELD",action:fe.a.doAction,param:"focusAddressField",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"96a396d8-d485-4f61-926b-bdab1eddaf94",...Object(Oe.a)("Focus Address Field")},{name:"COMMAND_PAGE_REFRESH",action:fe.a.reload,param:!1,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"bc31a027-870d-40ba-b3f1-20adcff8fff2",...Object(Oe.a)("Reload Page")},{name:"COMMAND_PAGE_RELOAD_NOCACHE",action:fe.a.reload,param:!0,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"d92c060c-a9f7-490c-a4a0-8c5cccfa09dd",...Object(Oe.a)("Force Page Reload")},{name:"COMMAND_PAGE_SCROLL_UP",action:fe.a.doAction,repeat:!0,param:"pageScrollUp",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"078f10b2-1901-4f9e-97b3-1018f7633099",...Object(Oe.a)("Page Up")},{name:"COMMAND_PAGE_SCROLL_DOWN",action:fe.a.doAction,repeat:!0,showInQC:!0,param:"pageScrollDown",category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"eae41430-4ed9-48e5-9e91-90aeefdb4b4e",...Object(Oe.a)("Page Down")},{name:"COMMAND_PAGE_SCROLL_TOP",action:fe.a.doAction,param:"pageScrollTop",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"f74cd1f0-c90c-4a2e-8b7b-f06d88cad75a",...Object(Oe.a)("Scroll Page to Top")},{name:"COMMAND_PAGE_SCROLL_BOTTOM",action:fe.a.doAction,param:"pageScrollBottom",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"29bbb63b-b356-4dfe-aa45-9cf39d94d279",...Object(Oe.a)("Scroll Page to Bottom")},{name:"COMMAND_FOCUS_WEBVIEW",action:fe.a.doAction,param:"focusWebView",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"f71373d5-f966-4603-b7c5-a4a1722b3989",...Object(Oe.a)("Focus Page")},{name:"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS",action:N.a.toggle.bind(N.a,W.kKeyboardShortcutsEnable,!0,!1),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"88d6a31d-9d50-4c8f-a9a2-207ac2b600c3",...Object(Oe.a)("Disable Keyboard Shortcuts")},{name:"COMMAND_FOCUS_SEARCHFIELD",action:fe.a.doAction,param:"focusSearchField",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"eead069f-a0b5-4f2c-add7-051003353311",...Object(Oe.a)("Focus Search Field")},{name:"COMMAND_FIND_IN_PAGE",action:fe.a.doAction,param:"findInPage",showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"3686e24b-c64b-4402-9b79-d58dc92c29a8",...Object(Oe.a)("Find in Page")},{name:"COMMAND_FIND_NEXT_IN_PAGE",action:fe.a.doAction,param:"findNextInPage",repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"055c6e9c-2b9c-4170-aeb0-43f3caf35c3e",...Object(Oe.a)("Find Next in Page")},{name:"COMMAND_FIND_PREVIOUS_IN_PAGE",action:fe.a.doAction,param:"findPreviousInPage",repeat:!0,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"ef2ad516-3e00-4e9f-9dc3-b1bccd1cc317",...Object(Oe.a)("Find Previous in Page")},{name:"COMMAND_PAGE_BACK",action:fe.a.back,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"f8f93b48-b1ed-43c3-bd65-e7240fd76d3f",...Object(Oe.a)("History Back")},{name:"COMMAND_PAGE_FORWARD",action:fe.a.forward,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"b00e2d3c-a9ba-49b8-bce7-1faf1894a5f3",...Object(Oe.a)("History Forward")},{name:"COMMAND_PAGE_REWIND",action:o.a.navigateRewind,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"67c60e96-fab2-433b-a012-107daa3856ef",...Object(Oe.a)("History Rewind")},{name:"COMMAND_PAGE_FAST_FORWARD",action:o.a.navigateFastforward,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"964655e4-0274-4e26-82a7-b15161958009",...Object(Oe.a)("Fast Forward")},{name:"COMMAND_PRINT_PAGE",action:fe.a.doAction,param:"print",showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"9fbbe402-d11b-479d-ab97-e7e6deb10d36",...Object(Oe.a)("Print")},{name:"COMMAND_STOP_PAGE",action:fe.a.stop,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"77dfb30f-d825-4089-a042-c3f664c656b5",...Object(Oe.a)("Stop Loading")},{name:"COMMAND_OPEN_PAGE",action:()=>V.a.utilities.openPage(),withNoWindow:!0,showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"e513ed70-7241-4722-83cb-4e8d10da8f02",...Object(Oe.a)("a file","Open File")},{name:"COMMAND_SAVE_PAGE",action:function(){const e=Pe.a.getRaw();if(e){const t=Pe.a.getActiveListEntry(),a=t?Object(Le.d)(t.subject):"message";e.saveAs(a+".eml")}else xe.a.getActiveWebView()&&V.a.utilities.savePage()},showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"a60f2f63-dd5a-46a6-b425-40e423e88fc0",...Object(Oe.a)("Save Page As")},{name:"COMMAND_SEARCH_WITH_SELECTION",action:()=>v.a.withPageSelection(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"1599c08b-51f2-413b-a572-dcacb43560b2",...Object(Oe.a)("Search with Selection")},{name:"COMMAND_MAIN_ZOOM",action:Ee.a.setPageZoomPercentage,category:"CATEGORY_COMMAND_APPEARANCE",keyword:{type:"number",unit:Object(Ce.a)("Percentage"),defaultValue:100*ye.a,min:100*ye.h,max:100*ye.g},showInQC:!0,guid:"9a6682a0-9a28-4e44-b9f9-fc554f02c363",...Object(Oe.a)("Page Zoom")},{name:"COMMAND_MAIN_ZOOM_IN",action:()=>Ee.a.pageZoomIn(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"9f04836a-e0cb-4220-93dd-57d0a606ee11",...Object(Oe.a)("Page Zoom In")},{name:"COMMAND_MAIN_ZOOM_OUT",action:()=>Ee.a.pageZoomOut(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"f68b5e96-3c0c-49cb-a8f9-d23b43182bc0",...Object(Oe.a)("Page Zoom Out")},{name:"COMMAND_MAIN_ZOOM_HALF",action:()=>Ee.a.pageZoomHalf(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d5959c06-f090-4f5e-8470-7871986393ab",...Object(Oe.a)("Page Zoom Out Half")},{name:"COMMAND_MAIN_ZOOM_DOUBLE",action:()=>Ee.a.pageZoomDouble(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"dd72265d-01e1-483e-a50f-5b018ca20151",...Object(Oe.a)("Page Zoom In Double")},{name:"COMMAND_MAIN_ZOOM_RESET",action:()=>Ee.a.pageZoomReset(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"483984bb-e647-4ed5-aae8-f82ef947b450",...Object(Oe.a)("Page Zoom Reset")},{name:"COMMAND_MAIN_UI_ZOOM",action:e=>Ee.a.setUIZoomPercentage(e),category:"CATEGORY_COMMAND_APPEARANCE",keyword:{type:"number",unit:Object(Ce.a)("Percentage"),defaultValue:100*ye.a,min:100*ye.l,max:100*ye.k},showInQC:!0,guid:"6884b1a9-0cfc-4456-8d1b-9cb73c99703f",...Object(Oe.a)("UI Zoom")},{name:"COMMAND_MAIN_UI_ZOOM_IN",action:()=>Ee.a.uiZoomIn(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b56f4b61-eff8-4d57-af15-a19fba06c587",...Object(Oe.a)("UI Zoom In")},{name:"COMMAND_MAIN_UI_ZOOM_OUT",action:()=>Ee.a.uiZoomOut(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d62013de-e829-4454-ab03-71a864341009",...Object(Oe.a)("UI Zoom Out")},{name:"COMMAND_MAIN_UI_ZOOM_RESET",action:()=>Ee.a.setUIZoomPercentage(100),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a62aaffc-305b-4892-90c3-5839c0650260",...Object(Oe.a)("UI Zoom Reset")},{name:"COMMAND_TAB_VIEW_PAGE_SOURCE",action:be.a.viewPageSource,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"7c42ad51-fab5-46c5-acff-663947a13c96",...Object(Oe.a)("View Page Source")},{name:"COMMAND_DEVELOPER_TOOLS",action:()=>V.a.devtoolsPrivate.toggleDevtools("default"),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"cdc3b594-d57f-417d-89ee-69be8facd3aa",...Object(Oe.a)("Developer Tools")},{name:"COMMAND_DEVTOOLS_INSPECTOR",action:()=>V.a.devtoolsPrivate.toggleDevtools("inspect"),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"e6a1c7d5-21ad-4195-bc9e-95ebcb6ee2eb",...Object(Oe.a)("Toggle Developer Tools")},{name:"COMMAND_DEVTOOLS_CONSOLE",action:()=>V.a.devtoolsPrivate.toggleDevtools("console"),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"1e335c06-1036-4b76-be45-20fea16ab840",...Object(Oe.a)("Developer Tools Console")},{name:"COMMAND_SHOW_HOMEPAGE",action:()=>d.a.showHomepage({inCurrent:!0}),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"51eac690-a178-4a3e-99dd-32c73f923559",...Object(Oe.a)("Home")},{name:"COMMAND_TOGGLE_PANEL",action:p.a.togglePanel,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"5cbd037c-973a-4c3d-aa43-5454bc0ec0e4",...Object(Oe.a)("command","Panel")},{name:"COMMAND_FOCUS_PANEL",action:p.a.setFocus,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"efaed294-3e8e-42fa-9a47-d121e6a11e5f",...Object(Oe.a)("Focus Panel")},{name:"COMMAND_FOCUS_MAINMENU",action:r.a.onCommand.bind(r.a,"COMMAND_FOCUS_MAINMENU"),hideInSettings:!1,inMenu:!0,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"bb1fc5ee-68bd-4e4f-ae16-43269ada0f69",...Object(Oe.a)("Focus Main Menu")},{name:"COMMAND_FOCUS_BOOKMARKBAR",action:r.a.onCommand.bind(r.a,"COMMAND_FOCUS_BOOKMARKBAR"),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d2c3cb39-c495-4aca-bac5-23f2db06ccca",...Object(Oe.a)("Focus Bookmarks Bar")},{name:"COMMAND_FOCUS_TABBAR",action:r.a.onCommand.bind(r.a,"COMMAND_FOCUS_TABBAR"),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"ab5fd96a-effc-448f-afdf-2bef8cba6527",...Object(Oe.a)("Focus Tab Bar")},{name:"COMMAND_FOCUS_PANELBAR",action:r.a.onCommand.bind(r.a,"COMMAND_FOCUS_PANELBAR"),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"454b1c03-0570-4977-99e8-337a1aafdb70",...Object(Oe.a)("Focus Panel Bar")},{name:"COMMAND_TOGGLE_FLOATING_PANEL",action:p.a.toggleFloating,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b70131d8-1022-411e-89aa-096a8528ab45",...Object(Oe.a)("Toggle Floating Panel")},{name:"COMMAND_SHOW_NEXT_PANEL",action:p.a.showNextPanel,param:"next",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"302fdcd3-d914-418f-895d-c4ede9b6c02e",...Object(Oe.a)("Open Next Panel")},{name:"COMMAND_SHOW_PREVIOUS_PANEL",action:p.a.showNextPanel,param:"previous",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4569302b-1f24-440c-965c-da7f9bfca097",...Object(Oe.a)("Open Previous Panel")},{name:"COMMAND_SHOW_BOOKMARK_PANEL",action:p.a.toggleContent,param:"bookmarks",isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"48ee057a-93c3-4be5-903b-6d2e701ecb96",...Object(Oe.a)("title","Bookmarks Panel")},{name:"COMMAND_TOGGLE_CURRENT_PANEL",action:p.a.closePanel,showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4128d533-256b-41f1-ba47-3c435ca3f2b4",...Object(Oe.a)("Toggle Current Panel")},{name:"COMMAND_SHOW_MAIL_PANEL",action:p.a.toggleContent,param:"mail",showInQC:b.d.getIsMailWindow,isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),category:"CATEGORY_COMMAND_APPEARANCE",guid:"66a51de3-2c98-468a-ac92-0728cd798ca5",...Object(Oe.a)("title","Mail Panel")},{name:"COMMAND_SHOW_CONTACTS_PANEL",action:p.a.toggleContent,param:"contacts",showInQC:b.d.getIsMailWindow,isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),category:"CATEGORY_COMMAND_APPEARANCE",guid:"9492e500-30da-44fc-a28b-88c22a06c304",...Object(Oe.a)("title","Contacts Panel")},{name:"COMMAND_SHOW_DOWNLOADS_PANEL",action:p.a.toggleContent,param:"downloads",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"4fcaed1c-c5db-42a8-b47d-7e6674ecd252",...Object(Oe.a)("title","Downloads Panel")},{name:"COMMAND_SHOW_NOTES_PANEL",action:p.a.toggleContent,param:"notes",isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"96dc03a2-7c99-49ff-9055-f03ac6eb90fe",...Object(Oe.a)("title","Notes Panel")},{name:"COMMAND_SHOW_HISTORY_PANEL",action:p.a.toggleContent,param:"history",isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"d26038ee-d140-42c5-98b0-27f14b9a8645",...Object(Oe.a)("title","History Panel")},{name:"COMMAND_SHOW_WINDOW_PANEL",action:p.a.toggleContent,param:"tabs",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"7dc09b96-d5f1-4999-b2da-d8dd1f1e1651",...Object(Oe.a)("title","Window Panel")},{name:"COMMAND_SHOW_WEB_PANEL_1",action:p.a.toggleContent,param:"webpanel 1",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"9a724d62-6b4f-4bec-affe-31a05966ccf9",...Object(Oe.a)("Web Panel 1")},{name:"COMMAND_SHOW_WEB_PANEL_2",action:p.a.toggleContent,param:"webpanel 2",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a0ed3813-af8f-42af-8466-bbaf197bb5a6",...Object(Oe.a)("Web Panel 2")},{name:"COMMAND_SHOW_WEB_PANEL_3",action:p.a.toggleContent,param:"webpanel 3",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a28d673c-5242-4330-aff1-b5df09dfad7c",...Object(Oe.a)("Web Panel 3")},{name:"COMMAND_SHOW_WEB_PANEL_4",action:p.a.toggleContent,param:"webpanel 4",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a13f216c-d341-4057-a573-0b954dcde28f",...Object(Oe.a)("Web Panel 4")},{name:"COMMAND_SHOW_WEB_PANEL_5",action:p.a.toggleContent,param:"webpanel 5",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"e859c95a-52fc-4c30-87cc-768fd35cd5b9",...Object(Oe.a)("Web Panel 5")},{name:"COMMAND_SHOW_WEB_PANEL_6",action:p.a.toggleContent,param:"webpanel 6",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"61c088f8-a1b3-4a73-a359-08796372e33a",...Object(Oe.a)("Web Panel 6")},{name:"COMMAND_SHOW_WEB_PANEL_7",action:p.a.toggleContent,param:"webpanel 7",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"6fff7b4d-a154-4945-aacf-e57bc67afde8",...Object(Oe.a)("Web Panel 7")},{name:"COMMAND_SHOW_WEB_PANEL_8",action:p.a.toggleContent,param:"webpanel 8",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"26e5191f-7c81-4d3b-a499-e8945a9a6ec3",...Object(Oe.a)("Web Panel 8")},{name:"COMMAND_SHOW_WEB_PANEL_9",action:p.a.toggleContent,param:"webpanel 9",showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"b0732781-fdf6-4ba8-8fcf-6d94f24edc37",...Object(Oe.a)("Web Panel 9")},{name:"COMMAND_COPY_SELECTION_TO_NOTE",action:async()=>{const{id:e,url:t}=h.c.unsafeGetActivePage(),a=await V.a.utilities.getSelectedText(e);await m.a.createNote({content:a,url:t})},isEnabled:()=>!ve.a.isGuestSession(),showInQC:!0,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"fa2d0620-4233-4d59-ab5d-e868fb52ad03",...Object(Oe.a)("Copy Selected Text to Note")},{name:"COMMAND_SPATNAV_LEFT",action:()=>pe.left(),repeat:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"466272ae-7b00-4113-bdb3-159ae29e848c",...Object(Oe.a)("Spatial Navigation Left")},{name:"COMMAND_SPATNAV_UP",action:()=>pe.up(),repeat:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"527416b5-8d0f-4d05-b251-9a1c70cbbb11",...Object(Oe.a)("Spatial Navigation Up")},{name:"COMMAND_SPATNAV_RIGHT",action:()=>pe.right(),repeat:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"0a095dee-caba-457d-b119-6a9cc12c9496",...Object(Oe.a)("Spatial Navigation Right")},{name:"COMMAND_SPATNAV_DOWN",action:()=>pe.down(),repeat:!0,inMenu:!1,showInQC:!1,category:"CATEGORY_COMMAND_WEBPAGE_NAVIGATION",guid:"b554b968-c3b1-4522-a927-07d3d5bf74a3",...Object(Oe.a)("Spatial Navigation Down")},{name:"COMMAND_CLIPBOARD_UNDO",action:s.a.undo,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"fb89c51c-3fe7-4bab-b9f6-27174e89b76d",...Object(Oe.a)("win_linux","Undo")},{name:"COMMAND_CLIPBOARD_REDO",action:s.a.redo,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"cfd7113d-8501-4fee-b8e3-c776297620d5",...Object(Oe.a)("win_linux","Redo")},{name:"COMMAND_CLIPBOARD_CUT",action:s.a.cut,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"ef5d4a31-9ca0-424e-a3af-ec9770084dca",...Object(Oe.a)("win_linux","Cut")},{name:"COMMAND_CLIPBOARD_COPY",action:s.a.copy,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"6dae1e1a-695b-41c5-9ca9-deb1fabe9cc9",...Object(Oe.a)("win_linux","Copy")},{name:"COMMAND_CLIPBOARD_PASTE",action:s.a.paste,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"aa12b05a-94cf-4660-8272-37da19294192",...Object(Oe.a)("win_linux","Paste")},{name:"COMMAND_CLIPBOARD_SELECT_ALL",action:s.a.selectAll,readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"ce41214f-6878-42ef-b120-3deb06cfcf2e",...Object(Oe.a)("win_linux","Select All")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT",action:s.a.pasteAsPlainText,showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"bac47f7e-084f-4255-b27e-24f767aa300b",...Object(Oe.a)("Paste as Plain Text")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO",action:s.a.pasteAsPlainTextOrPasteAndGo,category:"CATEGORY_COMMAND_APPLICATION",showInQC:!0,guid:"1ca0b67d-f911-4141-949b-09c728430f2f",...Object(Oe.a)("Paste and Go")},{name:"COMMAND_CLIPBOARD_PASTE_AS_NOTE",action:()=>s.a.createNoteFromSelection(),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"eb19c8a1-019b-4eea-a159-4e7efaa7737a",...Object(Oe.a)("Paste to New Note")},{name:"COMMAND_WINDOW_MINIMIZE",action:()=>_e.a.minimize(ve.a.getId()),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"855ad23f-900b-42bf-af4d-4ce6b419ce09",...Object(Oe.a)("Minimize")},{name:"COMMAND_HIDE_OTHERS",action:()=>{},readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"f1a77d87-7c3c-45be-9402-91d111381491",...Object(Oe.a)("Hide Others")},{name:"COMMAND_HIDE_VIVALDI",action:()=>{},readonly:!0,showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"75e245b8-1cce-44e3-87f5-2cade5e26f6a",...Object(Oe.a)("Hide $1",["Vivaldi"])},{name:"COMMAND_OPEN_LINK",action:()=>{},withNoWindow:!0,inMenu:!1,showInQC:!1,parameter:"https://www.vivaldi.com",category:"CATEGORY_COMMAND_APPLICATION",guid:"e1ecbf58-47e1-4eb1-92f5-3ff610aadd53",...Object(Oe.a)("Open Link")},{name:"COMMAND_IMPORT_CALENDAR",action:u.a.showImportCalendar,isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),showInQC:!1,category:"CATEGORY_COMMAND_APPLICATION",guid:"625f8ff2-0498-4505-a661-286572c62c7b",...Object(Oe.a)("Import Calendar")},{name:"COMMAND_SHOW_CALENDAR",action:()=>u.a.showCalendar(),withNoWindow:!0,isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"67287254-750b-4dbd-b290-cdc1b4906c2c",...Object(Oe.a)("Calendar")},{name:"COMMAND_SHOW_CALENDAR_PANEL",action:p.a.toggleContent,param:"calendar",isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPEARANCE",guid:"a01cf36b-2f32-4919-924b-80e4e14a41b2",...Object(Oe.a)("title","Calendar Panel")},{name:"COMMAND_ADD_CALENDAR_EVENT",action:u.a.showAddEvent.bind("",""),isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"594afe15-9134-49e6-9aa8-1f50b0925ef8",...Object(Oe.a)("New Calendar Event")},{name:"COMMAND_ADD_NEW_CALENDAR_ACCOUNT",action:u.a.showCalendarAccountDialog,isEnabled:()=>!ve.a.isGuestSession()&&!f.a.get(W.kMailIsTurnedOff),showInQC:!0,category:"CATEGORY_COMMAND_APPLICATION",guid:"a379c8cf-024b-49b5-94ac-9a8ac279e048",...Object(Oe.a)("Add New Calendar Account")},{name:"COMMAND_MAIL_COMPOSE_NEW_MESSAGE",action:()=>c.a.createDraft(),showInQC:!0,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,guid:"1c54b411-5b73-4eba-b5bf-6787d1f377fe",category:"CATEGORY_COMMAND_MAIL",...Object(Oe.a)("command","Compose New Message")},{name:"COMMAND_SHOW_MAIL",action:()=>u.a.showMail(),withNoWindow:!0,showInQC:!0,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>window.isMailWindow,guid:"670dbed7-f692-4fa4-a926-fe46183b82bb",category:"CATEGORY_COMMAND_APPLICATION",...Object(Oe.a)("Mail")},{name:"COMMAND_MAIL_REPLY",action:()=>n.a.reply(),isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"fa9e273b-11fd-4be9-b77e-461a1e9fcc4e",...Object(Oe.a)("Reply to Message")},{name:"COMMAND_MAIL_REPLY_ALL",action:()=>n.a.replyAll(),showInQC:!0,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,category:"CATEGORY_COMMAND_MAIL",guid:"cc59e4b7-c907-48b7-9057-f4dc2ae9c552",...Object(Oe.a)("Reply All")},{name:"COMMAND_MAIL_FORWARD",action:()=>n.a.forward(),isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"f45c60df-9ca1-444e-8108-656b0a15c68e",...Object(Oe.a)("mail","Forward Message")},{name:"COMMAND_MAIL_DELETE_PERMANENTLY",action:()=>n.a.prepareDelete(!0,void 0),isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"7b0de3f1-2173-4bde-96bf-f9fa1063abe7",...Object(Oe.a)("Delete Permanently")},{name:"COMMAND_MAIL_DELETE_ALL_PERMANENTLY",action:()=>l.a.deleteEntriesFromFolderCmd(),isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"f00fc3db-c1c9-460e-acad-16495b522b8e",...Object(Oe.a)("Delete All Permanently")},{name:"COMMAND_MAIL_MARK_READ",action:n.a.markRead,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"02a17cf8-4e45-4d32-b06c-38edf99544da",...Object(Oe.a)("mail","Mark Message as Read")},{name:"COMMAND_MAIL_GOTO_NEXT_UNREAD",action:n.a.goToNextUnread,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"75f673af-21e8-43f2-8aa8-b96b8dbd0245",...Object(Oe.a)("mail","Next Unread")},{name:"COMMAND_MAIL_GOTO_PREVIOUS_UNREAD",action:n.a.goToPreviousUnread,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"24aab8e7-7bd0-470d-88f8-5ecdb1f19224",...Object(Oe.a)("mail","Previous Unread")},{name:"COMMAND_MAIL_MARK_ALL_READ",action:l.a.setAllMailsInFolderAsReadCmd,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!1,category:"CATEGORY_COMMAND_MAIL",guid:"c929109f-99fa-45a5-80ca-9a3fdd17bd63",...Object(Oe.a)("mail","Mark All as Read")},{name:"COMMAND_MAIL_MARK_THREAD_READ",action:n.a.markThreadRead,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"3110cb8a-11eb-4643-b834-f88ee1bf0155",...Object(Oe.a)("mail","Mark Message Thread as Read")},{name:"COMMAND_MAIL_MARK_THREAD_UNREAD",action:n.a.markThreadUnread,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"655c64c3-8e8f-44ff-a7bf-a05f2c9a6115",...Object(Oe.a)("mail","Mark Message Thread as Unread")},{name:"COMMAND_MAIL_MARK_UNREAD",action:n.a.markUnread,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"6b193cc2-62ca-41a8-9a17-d311541aef54",...Object(Oe.a)("mail","Mark Message as Unread")},{name:"COMMAND_MAIL_ENABLE_SENDER_VIEW",action:n.a.enableSenderView,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"61ab202a-46ad-45ce-92b9-85c3295ef801",...Object(Oe.a)("mail","Show Messages from Sender")},{name:"COMMAND_MAIL_ENABLE_THREADED_VIEW",action:n.a.enableThreadedView,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"5c21bfa1-f0b2-4804-a395-71243d99dad8",...Object(Oe.a)("mail","Show Message Thread")},{name:"COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD",action:n.a.markAsReadAndGoToNextUnread,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>h.c.unsafeGetActivePage().isMailPage,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"92f285b0-90dc-4051-940e-eefee7b4692f",...Object(Oe.a)("mail","Mark Message as Read and Go to Next Unread")},{name:"COMMAND_MAIL_ADD_NEW_MAIL_ACCOUNT",action:u.a.showMailAccountDialog,isEnabled:()=>!f.a.get(W.kMailIsTurnedOff),inContext:()=>window.isMailWindow,showInQC:!0,category:"CATEGORY_COMMAND_MAIL",guid:"2b65911f-8bfc-4e9b-bf43-b78bfc7c4587",...Object(Oe.a)("mail","Add New Mail Account")}]},,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(16),o=a(26);let l=Object(o.List)();const c=new class extends i.a{getBackgroundTasks(){return l}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};s.a.register(e=>{switch(e.actionType){case r.a.BACKGROUND_TASKS_SET:t=e.tasks,l=Object(o.List)(t),c.emitChange()}var t}),t.a=c},,function(e,t,a){"use strict";a.d(t,"b",(function(){return k}));var n=a(0),i=a(119),s=a(430),r=a(107),o=a(222),l=a(624),c=a(14),u=a(808),m=a(809),d=a(6),h=a(528),p=a(2),b=a(250),g=a.n(b),N=a(257),f=a(7),_=a(3),v=a(709),E=a(1),C="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\CreateMailAccount.jsx";function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{UNKNOWN:O,VERIFYING:y,OK:S,ERROR:T}=_.K,k={Back:Object(p.a)("account creation","Back"),IMAP:Object(p.a)("IMAP"),"Manual Setup":Object(p.a)("Manual Setup"),"Edit Servers":Object(p.a)("Edit Servers"),Manual:Object(p.a)("Manual"),POP:Object(p.a)("POP"),"Email Address":Object(p.a)("Email Address"),Password:Object(p.a)("Password"),"Offline account":Object(p.a)("Offline account"),"Prefetch full messages":Object(p.a)("Prefetch full messages"),"Add your First Account":Object(p.a)("Add your First Account"),"Add Mail Account":Object(p.a)("Add Mail Account"),"Enter your email address below and we’ll help you get going with your first account.":Object(p.a)("Enter your email address below and we’ll help you get going with your first account."),"Enter your email address below and we’ll help you get going.":Object(p.a)("Enter your email address below and we’ll help you get going."),"If you would like a new mail account, we offer a free account when you register with vivaldi.net.":Object(p.a)("If you would like a new mail account, we offer a free account when you register with vivaldi.net."),"Don’t have an email address?":Object(p.a)("Don’t have an email address?"),"We have a selection of trusted email providers for you to choose from.":Object(p.a)("We have a selection of trusted email providers for you to choose from."),"Please provide the password for your account":Object(p.a)("Please provide the password for your account"),"Enter your password":Object(p.a)("Enter your password"),...l.b,"IMAP Server":Object(p.a)("IMAP Server"),"POP Server":Object(p.a)("POP Server"),"SMTP Server":Object(p.a)("SMTP Server"),"Account Type":Object(p.a)("Account Type"),Port:Object(p.a)("Port")};class A extends n.PureComponent{constructor(e){super(e),w(this,"_isMounted",!1),w(this,"setAccountProperty",(e,t)=>{"MAIL_EMAIL"===e?this.setState(e=>{const a=e.syncUsernames&&e.account.MAIL_EMAIL===e.account.MAIL_USER&&e.account.MAIL_EMAIL===e.account.MAIL_SMTP_USER,n={...e.account,MAIL_EMAIL:t,MAIL_USER:a?t:e.account.MAIL_USER,MAIL_SMTP_USER:a?t:e.account.MAIL_SMTP_USER};return{addressValidated:!this.accountExists(t)&&(e.account.offline||h.a.isValidEmail(n)),account:n,syncUsernames:a}}):"MAIL_PASSWORD"===e?this.setState(e=>{const a=e.syncPasswords&&e.account.MAIL_PASSWORD===e.account.MAIL_SMTP_PASSWORD;return{account:{...e.account,MAIL_PASSWORD:t,MAIL_SMTP_PASSWORD:a?t:e.account.MAIL_SMTP_PASSWORD},syncPasswords:a}}):"MAIL_PORT"===e||"MAIL_SMTP_PORT"===e?this.setState(a=>({account:{...a.account,[e]:""!==t?Number(t):NaN},..."MAIL_PORT"===e?{incomingVerified:!1}:{smtpVerified:!1}})):"MAIL_SERVER"===e||"MAIL_SMTP_SERVER"===e?this.setState(a=>({account:{...a.account,[e]:t},incomingVerified:"MAIL_SERVER"!==e&&a.incomingVerified,smtpVerified:"MAIL_SMTP_SERVER"!==e&&a.smtpVerified})):this.setState(a=>({account:{...a.account,[e]:t}}))}),w(this,"onChangeAccountProperty",e=>{const{name:t,value:a}=e.target;this.setAccountProperty(t,a)}),w(this,"autofill",()=>{this.state.account.offline?this.createOffline():this.setState(e=>({isEdited:e.status===T,status:y,statusText:Object(p.a)("Attempting account autodiscovery...")}),()=>{h.a.autofill(this.state.account,this.autofillCallback)})}),w(this,"signIn",()=>{this.setState(e=>({isAdding:!1,isEdited:e.status===T,status:y,statusText:Object(p.a)("Attempting sign in...")}),()=>{h.a.signIn(this.state.account,this.signInCallback)})}),w(this,"completeDiscovery",e=>{this.setState({account:e,isAdding:!1,status:S,statusText:Object(p.a)("Autodiscovery completed."),incomingVerified:!0,smtpVerified:!0,userVerified:!1})}),w(this,"onCancel",()=>{this.setState({showConfirmOAuth:!1,status:S})}),w(this,"onConfirmOAuth",e=>{const t=!e;this.setState(e=>({account:{...e.account,useOAuth:t},showConfirmOAuth:!1})),t?this.signIn():this.completeDiscovery(this.state.account)}),w(this,"autofillCallback",(e,t,a)=>{if(this._isMounted)if(e===S)Object(v.a)(a)?this.setState({account:{...t},showConfirmOAuth:!0}):this.completeDiscovery(t);else if(e===T){const e=t.MAIL_SERVER&&t.MAIL_PASSWORD&&t.MAIL_SMTP_SERVER&&t.MAIL_SMTP_PASSWORD;this.setState(a=>{const n={...a.account,...t};return{status:T,statusText:e?Object(p.a)("This should not happen"):Object(p.a)("Autodiscovery failed. Please enter server settings"),showManual:!e,account:n,userVerified:!1}})}}),w(this,"signInCallback",(e,t,a)=>{this._isMounted&&e===S?this.setState({account:a,isAdding:!1,status:S,statusText:Object(p.a)("Login completed."),incomingVerified:!0,smtpVerified:!0,userVerified:!0},this.saveAccount):this._isMounted&&e===T&&this.setState(e=>{const n={...e.account,...a};return{status:T,statusText:t,account:n,userVerified:!1}})}),w(this,"considerAddingAccount",e=>{const t=e.target.name||"",a="BACK"===t,n="MANUAL"===t&&!this.state.isAdding||a;"Enter"!==e.key||n||this.onSubmit()}),w(this,"createOffline",()=>{const e=g()(this.state.account.MAIL_EMAIL).substring(0,6);f.a.mailPrivate.createFileDirectory(e,()=>{Object(N.a)(this.state.account)})}),w(this,"createAccountBooleanHandler",e=>t=>{const{checked:a}=t.target;this.setState(t=>({account:{...t.account,[e]:a}}))}),w(this,"changeOffline",this.createAccountBooleanHandler("offline")),w(this,"changePreFetch",this.createAccountBooleanHandler("preFetch")),w(this,"saveAccount",()=>{Object(N.a)(this.state.account),i.a.addAccount(this.state.account,this.state.capability)}),w(this,"setViewType",e=>{const t=e.target.name;this.setState(e=>({showManual:"MANUAL"===t}))}),w(this,"onSubmit",()=>{!this.state.addressValidated||this.isCreating()||(this.state.isAdding&&!this.state.showManual?this.autofill():this.signIn())}),w(this,"renderSubmitButton",()=>{const e=this.state.status!==T&&!this.state.showManual,t=this.state.status===T&&!this.state.showManual;let a;this.state.showManual?a=Object(p.a)("Add Account"):this.state.isAdding?a=Object(p.a)("Continue"):e?a=Object(p.a)("Sign In"):t&&(a=Object(p.a)("Retry login"));const i=!this.state.addressValidated||this.isCreating();return(n.createElement("input",{onClick:this.onSubmit,className:"primary",disabled:i,type:"button",value:a,__source:{fileName:C,lineNumber:391,columnNumber:12}}))}),w(this,"onChangeMailAccountType",e=>{const t=e.target.value===_.J.POP?_.J.POP:_.J.IMAP;this.setState(e=>({account:{...e.account,accountType:t}}))}),w(this,"isCreating",()=>this.state.status===y),w(this,"renderStatusCheck",()=>{if(this.state.status===y||this.state.status===T)return n.createElement(o.a,{type:this.state.status===T?"error":"info",__source:{fileName:C,lineNumber:421,columnNumber:9}},this.state.statusText)}),w(this,"onSignUpClicked",()=>{c.a.openURL("https://vivaldi.com/email-signup/"),this.props.onClose&&this.props.onClose()}),this.state={isAdding:!0,status:O,statusText:"",account:{accountType:_.J.IMAP},capability:[],addressValidated:!1,incomingVerified:!1,smtpVerified:!1,userVerified:!1,isEdited:!1,showManual:!1,syncUsernames:!0,syncPasswords:!0,showConfirmOAuth:!1}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}accountExists(e){return(d.a.get(E.kMailAccounts)||[]).findIndex(t=>t.MAIL_EMAIL===e)>=0}render(){const e=this.isCreating(),t=this.state.account.accountType===_.J.POP,a=!this.state.account.useOAuth&&this.state.showManual,i=Object(v.a)(this.state.capability);return n.createElement("div",{className:"detail",__source:{fileName:C,lineNumber:442,columnNumber:7}},n.createElement("div",{className:"detail-content",__source:{fileName:C,lineNumber:443,columnNumber:9}},n.createElement("div",{className:"setting-group-double",__source:{fileName:C,lineNumber:444,columnNumber:11}},this.state.isAdding&&!this.state.showManual&&n.createElement(n.Fragment,null,n.createElement("h2",{__source:{fileName:C,lineNumber:447,columnNumber:17}},this.props.emptyAccounts?k["Add your First Account"]:k["Add Mail Account"]),n.createElement("p",{className:"mail-setup-description",__source:{fileName:C,lineNumber:452,columnNumber:17}},this.props.emptyAccounts?k["Enter your email address below and we’ll help you get going with your first account."]:k["Enter your email address below and we’ll help you get going."])),!this.state.isAdding&&!this.state.showManual&&n.createElement(n.Fragment,null,n.createElement("h2",{__source:{fileName:C,lineNumber:462,columnNumber:17}},k["Enter your password"]),n.createElement("p",{className:"mail-setup-description no-margin",__source:{fileName:C,lineNumber:463,columnNumber:17}},Object(p.a)("Please provide the password for your account")),n.createElement("a",{className:"mail-setup-email-link",href:"mailto:"+this.state.account.MAIL_EMAIL,__source:{fileName:C,lineNumber:466,columnNumber:17}},this.state.account.MAIL_EMAIL))),n.createElement("div",{className:"setting-group-double",onKeyPress:this.considerAddingAccount,__source:{fileName:C,lineNumber:472,columnNumber:11}},this.state.isAdding&&n.createElement("div",{className:"setting-single mail-address",__source:{fileName:C,lineNumber:474,columnNumber:15}},n.createElement(r.a,{focusInput:this.props.focusInput,type:"text",disabled:e,isVerified:this.state.addressValidated,label:"",name:"MAIL_EMAIL",onChange:this.onChangeAccountProperty,placeholder:Object(p.a)("Enter your email address"),__source:{fileName:C,lineNumber:475,columnNumber:17}}),n.createElement("select",{className:"CreateMailAccount-dropdown",onChange:this.onChangeMailAccountType,value:this.state.account.accountType,__source:{fileName:C,lineNumber:485,columnNumber:17}},n.createElement("option",{value:_.J.IMAP,__source:{fileName:C,lineNumber:489,columnNumber:19}},Object(p.a)("IMAP")),n.createElement("option",{value:_.J.POP,__source:{fileName:C,lineNumber:490,columnNumber:19}},Object(p.a)("POP3")))),!this.state.isAdding&&!this.state.showManual&&n.createElement("div",{className:"setting-single mail-address",__source:{fileName:C,lineNumber:495,columnNumber:15}},n.createElement(r.a,{type:"password",disabled:e,label:"",autoFocus:!0,placeholder:Object(p.a)("My long safe password"),onChange:this.onChangeAccountProperty,name:"MAIL_PASSWORD",__source:{fileName:C,lineNumber:496,columnNumber:17}})),t&&this.state.showManual&&n.createElement(u.a,{account:this.state.account,setAccountProperty:this.setAccountProperty,__source:{fileName:C,lineNumber:508,columnNumber:15}})&&n.createElement(m.a,{popMaxSize:this.state.account.popMaxSize,setAccountProperty:this.setAccountProperty,__source:{fileName:C,lineNumber:512,columnNumber:15}}),this.state.showManual&&n.createElement(l.a,{variant:"create",account:this.state.account,incomingVerified:this.state.incomingVerified,searchableStrings:this.props.searchableStrings,showErrors:this.state.status===T,smtpVerified:this.state.smtpVerified,userVerified:this.state.userVerified,setAccountProperty:this.setAccountProperty,isGmail:i,__source:{fileName:C,lineNumber:518,columnNumber:15}}),n.createElement("div",{className:"setting-group-double",__source:{fileName:C,lineNumber:530,columnNumber:13}},this.renderStatusCheck(),this.renderSubmitButton(),!a&&n.createElement("input",{onClick:this.setViewType,type:"button",name:"MANUAL",value:this.state.isAdding?this.props.searchableStrings["Manual Setup"]:this.props.searchableStrings["Edit Servers"],__source:{fileName:C,lineNumber:534,columnNumber:17}}),a&&n.createElement("input",{onClick:this.setViewType,type:"button",name:"BACK",value:this.props.searchableStrings.Back,__source:{fileName:C,lineNumber:546,columnNumber:17}}))),n.createElement("div",{className:"footer",__source:{fileName:C,lineNumber:555,columnNumber:11}},this.state.isAdding&&!this.state.showManual&&n.createElement("div",{className:"email-partnership",__source:{fileName:C,lineNumber:557,columnNumber:15}},n.createElement("h3",{__source:{fileName:C,lineNumber:558,columnNumber:17}},k["Don’t have an email address?"]),n.createElement("a",{href:"https://vivaldi.com/email-signup/",onClick:this.onSignUpClicked,__source:{fileName:C,lineNumber:559,columnNumber:17}},k["We have a selection of trusted email providers for you to choose from."])))),this.state.showConfirmOAuth&&n.createElement(s.a,{title:Object(p.a)("Gmail Authentication"),prompt:Object(p.a)("Using an app-specific password will only connect to Gmail. Use OAuth to connect Gmail and log into all Google services."),positive:Object(p.a)("Use App-Specific Password"),negative:Object(p.a)("Use OAuth"),onRequestClose:this.onCancel,onClose:this.onConfirmOAuth,__source:{fileName:C,lineNumber:567,columnNumber:11}}))}}t.a=A},,function(e,t,a){"use strict";var n=a(283),i=a(536),s=a(2),r=a(443);function o(e){if(0===e.length)throw new Error("raceToResolve: Need an array with at least one Promise.");let t;return new Promise((a,n)=>Promise.all(e.map(e=>e.then(a).catch(e=>t=e))).then(()=>n(t)))}var l=a(3);async function c(e){const t=await e.listWellKnownFolders();for(const a of[l.v,l.tb,l.xb])if(Array.isArray(t[a])&&t[a].length>0){const{path:n,subscribed:i}=t[a][0];i||await e.subscribeMailbox({path:n})}}const{OK:u,ERROR:m,OFFLINE:d}=l.K,h=async function(e){try{const t=await r.a.getIMAPClient(e);return t.onError=e=>new Error(Object(s.a)("Login for incoming server failed. IMAP server responded with: $1",[e.message])),await t.login(),t}catch(e){throw new Error(Object(s.a)("Login for incoming server failed. IMAP server responded with: $1",[e.message]))}},p=function(e){return r.a.getSMTPClient(e).then(e=>new Promise((t,a)=>{e.onidle=e.quit,e.onerror=a,e.onclose=t,e.connect()})).catch(e=>{throw new Error(Object(s.a)("Login for outgoing server failed. Server responded with: $1",[e.message]))})},b=(e,t=!1)=>{const[a,n,i,r]=t?[e.MAIL_SMTP_PORT,e.MAIL_SMTP_SERVER,e.MAIL_SMTP_USER,e.MAIL_SMTP_PASSWORD]:[e.MAIL_PORT,e.MAIL_SERVER,e.MAIL_USER,e.MAIL_PASSWORD];if(!a||"number"!=typeof a)throw new Error(t?Object(s.a)("Outgoing port is missing or not a number"):Object(s.a)("Incoming port is missing or not a number"));if(!n)throw new Error(t?Object(s.a)("Outgoing server information is missing"):Object(s.a)("Incoming server information is missing"));if(!e.useOAuth){if(!i)throw new Error(t?Object(s.a)("Outgoing username is missing"):Object(s.a)("Incoming username is missing"));if(!r)throw new Error(t?Object(s.a)("Outgoing password is missing"):Object(s.a)("Incoming password is missing"))}},g=(e,t,a,n,s)=>new Promise((s,r)=>{const o=i.default.open(e,t,{useSecureTransport:"ssl"===a});o.onerror=e=>{r({})},o.onopen=()=>{o.close(),s("MAIL_SMTP_SERVER"===n?{MAIL_SMTP_SERVER:e,MAIL_SMTP_PORT:t,MAIL_SMTP_SOCKET_TYPE:a}:{MAIL_SERVER:e,MAIL_PORT:t})}}),N=(e,t,a)=>{const n={...e,MAIL_SMTP_USER:a};return p(n).then(()=>[u,"Outgoing connection success",n,t]).catch(t=>{throw[m,t.message,e]})},f=(e,t,a)=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.onload=async function(){if(200===s.status)try{const a=s.responseXML;let o,l,c,m,d;for(const e of a.getElementsByTagName("incomingServer"))e.getAttribute("type")===t&&"ssl"===e.getElementsByTagName("socketType")[0].textContent.toLowerCase()&&(o=e.getElementsByTagName("hostname")[0].textContent,l=e.getElementsByTagName("port")[0].textContent);for(const e of a.getElementsByTagName("outgoingServer"))"smtp"===e.getAttribute("type")&&"plain"!==e.getElementsByTagName("socketType")[0].textContent.toLowerCase()&&(c=e.getElementsByTagName("hostname")[0].textContent,m=e.getElementsByTagName("port")[0].textContent,d=e.getElementsByTagName("socketType")[0].textContent.toLowerCase());if(!(o&&l&&c&&m&&d))return i(new Error("autodiscover: Missing Outgoing or Incoming Server/Port information"));const h={...e,MAIL_SERVER:o,MAIL_PORT:Number(l),MAIL_SMTP_SERVER:c,MAIL_SMTP_PORT:Number(m),MAIL_SMTP_SOCKET_TYPE:"ssl"===d?"ssl":"starttls"},p=await r.a.getCapabilities(h);n([u,h,p])}catch(e){i(new Error(`autodiscover: ${e}`))}else i(new Error("autodiscover: Not in autoconfing"))},s.timeout=2e3;const o=function(){i(new Error("autodiscover: Error looking up in autoconfig"))};s.onerror=o,s.ontimeout=o,s.open("GET",a),s.responseType="document",s.send()}),_={isValidEmail:e=>{if(!e||!e.MAIL_EMAIL)return!1;const t=e.MAIL_EMAIL.split("@");if(t&&2===t.length){const e=t[1].split(".");return!!(e&&e[1]&&e[1].length>1)}return!1},verify:(e,t)=>{e.offline?t(d,e):(async e=>(b(e,!0),await p(e)))(e).then(()=>(async e=>{if(b(e,!1),e.accountType!==l.J.IMAP)return n.a.verifyPopLogin(e);(await h(e)).logout()})(e)).then(()=>{t(u,e)},a=>{t(m,e,a)})},autofill:(e,t)=>{if(!_.isValidEmail(e))return void t(m,e,[]);const a=e.MAIL_EMAIL,n=e.MAIL_EMAIL&&a.split("@")[1];let i="imap",s=993;e.accountType===l.J.POP&&(i="pop",s=995),((e,t,a)=>{const n=[`http://autoconfig.${t}/mail/config-v1.1.xml?emailaddress=${e.MAIL_EMAIL}`,`https://autoconfig.vivaldi.net/v1.1/${t}`,`http://${t}/.well-known/autoconfig/mail/config-v1.1.xml?emailaddress=${e.MAIL_EMAIL}`],i="pop"===a?"pop3":a;return o(n.map(t=>f(e,i,t)))})(e,n,i).catch(()=>((e,t,a,n)=>{const i=[`${a}.${t}`,`mail.${t}`,`${a}.mail.${t}`],s=[`smtp.${t}`,`mail.${t}`,`smtp.mail.${t}`];let l,c,d;return Promise.race([new Promise(e=>setTimeout(e,1e4)),Promise.allSettled([o([...i.map(e=>g(e,n,"ssl","MAIL_SERVER"))]).then(async t=>{l=t,c=await r.a.getCapabilities({...e,...l})}),new Promise(e=>Promise.allSettled([o([...s.map(e=>g(e,465,"ssl","MAIL_SMTP_SERVER"))]).then(t=>{d=t,e()}),o([...s.map(e=>g(e,587,"starttls","MAIL_SMTP_SERVER"))]).then(e=>{d||(d=e)})]).then(e))])]).then(()=>{const t={...e,...l,...d};return[["MAIL_SERVER","MAIL_PORT","MAIL_SMTP_SERVER","MAIL_SMTP_PORT","MAIL_SMTP_SOCKET_TYPE"].every(e=>t[e])?u:m,t,c]})})(e,n,i,s)).then(e=>{t(...e)})},signIn:async(e,t)=>{if(e.offline)return t(d,"offline",e);e.MAIL_PORT||(e.MAIL_PORT=e.accountType===l.J.IMAP?993:995),e.MAIL_SMTP_PORT||(e.MAIL_SMTP_PORT=465,e.MAIL_SMTP_SOCKET_TYPE="ssl");try{b(e,!1),b(e,!0)}catch(a){return void t(m,a.message,e)}let a;try{a=await r.a.getCapabilities(e)}catch(a){const n=Object(s.a)("Could not connect to server. Received following message: $1",[a.message]);return void t(m,n,e)}if(e.useOAuth){return void t(...await N(e,a,e.MAIL_EMAIL))}const i=[e.MAIL_USER],p=[e.MAIL_SMTP_USER];if(e.MAIL_EMAIL===e.MAIL_USER&&e.MAIL_EMAIL===e.MAIL_SMTP_USER&&e.MAIL_EMAIL.includes("@")){const t=e.MAIL_EMAIL.split("@")[0];i.push(t),p.push(t)}const g=await Promise.allSettled([o(p.map(t=>N(e,a,t))),o(i.map(t=>(async(e,t)=>{const a={...e,MAIL_USER:t};try{if(e.accountType===l.J.IMAP){const e=await h(a);return[u,"Incoming connection success",a,[],e]}return await n.a.verifyPopLogin(e),[u,"Incoming connection success",a]}catch(t){throw[m,t.message,e,[]]}})(e,t)))]);let f={...e},_=u,v="",E=!1;for(const e of g)if(e.reason)_=m,v=e.reason[1],f={...f,...e.reason[2]};else if(e.value&&(f={...f,...e.value[2]},5===e.value.length)){const t=e.value[4];E||(await c(t),E=!0),t.logout()}t(_,v,f)}};t.a=_},,,,,,,,,,,function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=new class{constructor(){n(this,"buffer",[]),n(this,"maxSize",200)}clear(){this.buffer=[],this.maxSize=200}push(e){this.buffer.length===this.maxSize&&this.buffer.shift(),this.buffer.push(e)}pop(){return this.buffer.pop()}removeEntries(e){this.buffer.forEach(t=>{t.updateItems=t.updateItems.filter(t=>!e.has(t.searchListId))})}}},,,,,function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return fe}));var n=a(0),i=a(326),s=a(130),r=a(50),o=a(617),l=a(760),c=a(1413),u=a(1293),m=a(607),d=a(502),h=a(1294),p=a(352),b=a(853),g=a(1399),N=a(21),f=a(1391),_=a(85),v=a(36),E=a(162),C=a(189),w=a(152),O=a(14),y=a(13),S=a(67),T=a(41),k=a(6),A=a(1347),I=a(40),D=a.n(I),M=a(812),P=a(987),x=a(65),L=a(281),j=a(157),R=a(435),B=a(108),F=a(988),U=a(16),H=a(1348),V=a(95),W=a(180),z=a(158),G=a(25),K=a(17),Y=a(2),$=a(10),X=a(20),Z=a.n(X),Q=a(125),q=a.n(Q),J=a(228),ee=a(837),te=a(1349),ae=a.n(te),ne=a(7),ie=a(1),se=a(26),re=a(284),oe=a(236),le=a(169),ce=a(23),ue=a(306),me=a(46),de=a(9),he=a(121),pe=a(149),be="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageContent.jsx";function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ne=[ie.kMailIsTurnedOff,ie.kRssDetectFeeds,ie.kWebpagesReaderControls,ie.kWebpagesReaderStyle],fe=Object(re.a)(e=>e());class _e extends n.PureComponent{constructor(t){super(t),ge(this,"captureScheduled",!1),ge(this,"viewUnchangedFlags",{}),ge(this,"webview",null),ge(this,"_localStatus",!1),ge(this,"_devtoolsCloseTimerId",0),ge(this,"_eventGuard",null),ge(this,"refInternalPage",n.createRef()),ge(this,"refWebView",n.createRef()),ge(this,"_onMediaStateStoreChanged",()=>{this.setState({mediaState:E.a.getState().get(this.props.id)||Object(se.Set)()})}),ge(this,"toggleImageInspector",()=>{O.a.setImageInspector(this.props.id,this.context.vivaldiWindowId,!this.props.showImageInspector)}),ge(this,"checkProcessExitState",()=>{this.props.processexitstate&&"normal"!==this.props.processexitstate&&e.nextTick(()=>O.a.setProcessExitState(this.props.id,this.context.vivaldiWindowId,void 0))}),ge(this,"updateViewUnchangedFlag",(e,t)=>{e.isActive===t.isActive&&e.extData.get("tiling")===t.extData.get("tiling")||(this.viewUnchangedFlags={})}),ge(this,"isDevtoolsDockedAndActive",()=>"bottom"===this.state.dockingState||"left"===this.state.dockingState||"right"===this.state.dockingState),ge(this,"updatePageThumbnailWithActiveWebview",e=>{var t=!1!==y.c.unsafeGetActivePage().get("incognito");if(this.webview){const a=q()();this.viewUnchangedFlags[a]=!0===this.props.isActive,setTimeout(()=>{if(Object(ce.n)(this.props.url))this.viewUnchangedFlags[a]&&this.webview&&L.a.getPageThumbnail(this.webview,{compact:!0},e=>{this.props.isActive&&this.viewUnchangedFlags[a]&&e&&O.a.setThumbnail(this.props.id,e)});else{const e={encodeFormat:"jpg",encodeQuality:80,fullPage:!1,width:330,height:270};ne.a.thumbnails.captureTab(this.props.id,e,(e,t)=>{!$.a.runtime.lastError&&e&&O.a.setThumbnail(this.props.id,t)})}},e);const n=l.a.getQueue(this.props.id);if(!t&&n&&n.get("url")===this.props.url){const e=n.get("id");$.a.bookmarks.get(e,t=>{if($.a.runtime.lastError)console.warn("chrome.bookmarks.get failed:",e,$.a.runtime.lastError);else{const e=t&&1===t.length?t[0]:null;e&&!e.thumbnail&&this.webview&&L.a.getPageThumbnail(this.webview,{compact:!1},t=>{t&&(this.props.isActive&&e&&this.viewUnchangedFlags&&this.viewUnchangedFlags[a]?r.a.update(e.id,{thumbnail:t}):console.warn("Cannot update thumbnail as page was not active"))})}}),o.a.remove(this.props.id,e)}}}),ge(this,"attachEventHandlers",()=>{W.a.addChangeListener(this._onWebpageviewStoreChanged),ne.a.devtoolsPrivate.onDockingSizesChanged.addListener(this.onDockingSizesChanged),ne.a.devtoolsPrivate.onDockingStateChanged.addListener(this.onDockingStateChanged),ne.a.devtoolsPrivate.onClosed.addListener(this.onDevtoolsClosed),ne.a.devtoolsPrivate.onDevtoolsUndocked.addListener(this.onDevtoolsUndocked),ne.a.tabsPrivate.onTabIsAttached.addListener(this.onWebViewElementIsAttached),ne.a.tabsPrivate.onTabIsDetached.addListener(this.onWebViewElementIsDetached),ne.a.utilities.onShowQRCode.addListener(this.onShowQRCode)}),ge(this,"removeEventHandlers",()=>{W.a.removeChangeListener(this._onWebpageviewStoreChanged),ne.a.devtoolsPrivate.onDockingSizesChanged.removeListener(this.onDockingSizesChanged),ne.a.devtoolsPrivate.onDockingStateChanged.removeListener(this.onDockingStateChanged),ne.a.devtoolsPrivate.onClosed.removeListener(this.onDevtoolsClosed),ne.a.devtoolsPrivate.onDevtoolsUndocked.removeListener(this.onDevtoolsUndocked),ne.a.tabsPrivate.onTabIsAttached.removeListener(this.onWebViewElementIsAttached),ne.a.tabsPrivate.onTabIsDetached.removeListener(this.onWebViewElementIsDetached),ne.a.utilities.onShowQRCode.removeListener(this.onShowQRCode)}),ge(this,"updateNavigationState",(e,t,a,n)=>{var i,s;const r={canGoBack:Boolean(null===(i=this.refWebView.current)||void 0===i?void 0:i.canGoBack()),canGoForward:Boolean(null===(s=this.refWebView.current)||void 0===s?void 0:s.canGoForward()),webviewUrl:e,isLoading:t,reason:n,trigger:a};"start"!==a&&O.a.setOrigin(this.props.id,this.context.vivaldiWindowId,""),C.a.setNavigationState(this.props.id,this.context.vivaldiWindowId,r)}),ge(this,"handleClose",async()=>{if(!await O.a.closePopupOrSettingsWindow()){await new Promise(e=>setTimeout(e,100));const e=y.c.getPageById(this.props.id);e&&await O.a.closePage(e)}}),ge(this,"handleLoadCommit",e=>{if(!e.isTopLevel||void 0===e.url)return;const{url:t}=e;P.a.resetRssFeeds(this.props.id),Object(ce.n)(t)?p.a.setFastForwardUrl(this.props.id,""):this.injectScripts(this.props.id),this.webview&&p.a.setRewindInfo(this.webview,this.props.id),this.updateNavigationState(t,!0,"commit")}),ge(this,"handleLoadStart",e=>{if(!e.isTopLevel)return;this.props.extData.get("urlForThumbnail")!==e.url&&O.a.setThumbnail(this.props.id,null),C.a.resetPermissions(this.props.id),this.updateNavigationState(e.url,!0,"start"),C.a.resetPageHasBlockedContent(this.props.id),C.a.resetBlockedPopups(this.props.id),R.a.resetTranslationParameters(this.props.id),this.captureScheduled=!1}),ge(this,"handleLoadStop",e=>{this.updateNavigationState(e.target.src,!1,"stop"),this.props.extData.get("thumbnail")||this.updatePageThumbnailWithActiveWebview(0),!1===this.captureScheduled&&(this.captureScheduled=!0,this.updatePageThumbnailWithActiveWebview(5e3))}),ge(this,"handleLoadRedirected",e=>{if(e.isTopLevel){const t=e.newUrl,a=e.oldUrl;O.a.setThumbnail(this.props.id,null),this.captureScheduled=!1,o.a.update(this.props.id,a,t)}}),ge(this,"handleContentAllowed",e=>{if("midi-sysex"===e.allowedType||"location"===e.allowedType||"notifications"===e.allowedType){const t=this.props.url?new URL(this.props.url).origin:"";C.a.setPermission(this.props.id,t,e.allowedType,null,"allowed")}}),ge(this,"handleContentBlocked",e=>{if("popups"!==e.blockedType&&"sound"!==e.blockedType)if("midi-sysex"===e.blockedType||"location"===e.blockedType){const t=this.props.url?new URL(this.props.url).origin:"";C.a.setPermission(this.props.id,t,e.blockedType,null,"blocked")}else C.a.setPageHasBlockedContent(this.props.id,e.blockedType)}),ge(this,"handleLoadAbort",e=>{e.preventDefault(),e.isTopLevel&&this.updateNavigationState(e.url,!1,"abort",e.reason)}),ge(this,"handleOnLoadProgress",e=>{if(Object(ce.h)(e.url))return;const t={url:e.url,progress:e.progress,loadedBytes:e.loadedBytes,loadedElements:e.loadedElements,totalElements:e.totalElements};A.a.setProgressState(this.props.id,t)}),ge(this,"handleOnFindUpdate",e=>{O.a.setFindResults(e)}),ge(this,"handleOnFullscreen",e=>{!1===E.a.hasMediaState(this.props.id,"capturing")&&z.a.onHTML5FullScreen(e.enterFullscreen,e.windowId),this.setState({tabIsFullscreen:e.enterFullscreen})}),ge(this,"handleBlockedPopup",e=>{C.a.addBlockedPopupEvent(this.props.id,e)}),ge(this,"injectScripts",Object(oe.default)(e=>{var t;const a=!this.props.prefValues[ie.kMailIsTurnedOff]&&this.props.prefValues[ie.kRssDetectFeeds];null===(t=this.refWebView.current)||void 0===t||t.executeScript({allFrames:!0,code:`window.__vivaldiPageId = ${e};\n             window.__vivaldiDetectFeeds = ${a.toString()};\n             window.__vivaldiContentScriptsInitialized;`,runAt:"document_start"}).then(t=>{var a,n;if(t&&t.some(e=>!e)&&(null===(a=this.refWebView.current)||void 0===a||a.executeScript({file:"inject-root-bundle.js"}).catch(e=>{console.warn("Injecting inject-root-bundle failed:",e)}),k.a.get(ie.kWebpagesAllowSelectionInLinks)))return null===(n=this.refWebView.current)||void 0===n?void 0:n.executeScript({allFrames:!0,file:"inject-all-bundle.js"}).then(()=>{p.a.initTab(e)})}).catch(e=>{console.warn("Checking for inject-all-bundle failed:",e)}),this.props.extData.get("readerMode")&&this.injectReaderView()},400)),ge(this,"injectReaderView",()=>{var e;const t={code:ae.a,runAt:"document_start"};null===(e=this.refWebView.current)||void 0===e||e.executeScript(t).catch(le.default)}),ge(this,"onNewPopup",e=>{e.targetUrl||(e.targetUrl="about:blank"),v.a.openNewPopAsTabOrWindow(e,this.context.vivaldiWindowId)}),ge(this,"handleOnNewWindow",async e=>{const t=K.a.isPopup(this.context.vivaldiWindowId)?0:this.context.vivaldiWindowId;switch(e.windowOpenDisposition){case"current_tab":e.preventDefault(),e.window.accept(t+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(t+";0");break;case"new_foreground_tab":e.preventDefault(),e.window.accept(t+";1");break;case"new_window":e.preventDefault();const a=await O.a.openWindow([]);"number"==typeof(null==a?void 0:a.id)&&e.window.accept(a.id+";1");break;case"off_the_record":e.preventDefault(),O.a.openWindow(e.targetUrl,{incognito:!0,transition:j.a.LINK}).then(t=>{t&&t.id&&e.window.accept(t.id+";1;I")});break;case"new_popup":e.preventDefault(),this.onNewPopup(e)}}),ge(this,"showDialog",e=>{e.webview=this.webview,this.setState({customData:e})}),ge(this,"handleOnCloseDialog",()=>{this.setState({customData:null})}),ge(this,"handleOnJavascriptDialog",e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)}),ge(this,"handleOnPermissionRequest",e=>{e.preventDefault();const t=e.url?new URL(e.url).origin:"";switch(e.permission){case"geolocation":case"microphone":case"microphone_and_camera":case"camera":case"notifications":C.a.setPermission(this.props.id,t,e.permission,e.request,"undecided");break;case"loadplugin":C.a.setPermission(this.props.id,t,"flash",e.request,"undecided");break;case"pointerLock":e.request.allow(),e.dialogtype=e.permission,this.showDialog(e);break;case"download":k.a.get(ie.kDownloadsStartAutomatically)?(e.request.allow(),k.a.get(ie.kDownloadsOpenPanelOnNew)&&T.d.canAutoOpen("downloads")&&S.a.toggleContent("downloads")):(e.dialogtype=e.permission,this.showDialog(e));break;case"media":e.request.allow();break;default:e.dialogtype=e.permission,this.showDialog(e)}}),ge(this,"handleOnProcessExit",e=>{O.a.setProcessExitState(this.props.id,this.context.vivaldiWindowId,e.reason)}),ge(this,"handleOnSSLStateChanged",e=>{if(e.SSLState){const t={state:e.SSLState,issuer:e.issuerstring};C.a.setSSLState(this.props.id,t)}}),ge(this,"handleOnTargetURLChanged",e=>{const t=Object(J.a)(e.newUrl);x.a.setStatus(t),this._localStatus=!0}),ge(this,"handleOnCreateSearch",e=>{e.dialogtype="createSearch",this.showDialog(e)}),ge(this,"handleOnPasteAndGo",e=>{e.preventDefault();const t={ctrlKey:e.modifiers.includes("ctrl"),shiftKey:e.modifiers.includes("shift"),altKey:e.modifiers.includes("alt"),metaKey:!1},a=e.clipBoardText,n=Object(pe.b)(t);"search"===e.pasteTarget&&V.a.doAction("searchPasteAndGo",{clipboardText:a,openOptions:n}),"url"===e.pasteTarget&&V.a.doAction("urlPasteAndGo",{clipboardText:a,openOptions:n})}),ge(this,"handleOnContentsCreated",()=>{Object(ce.n)(this.props.url)||this.injectScripts(this.props.id)}),ge(this,"_onWebpageviewStoreChanged",e=>{if(this.props.isActive)switch(e.type){case U.a.CLOSE_FIND_IN_PAGE_ACTION:var t;return null===(t=this.webview)||void 0===t||t.stopFinding("keep"),void this.focusWebView(this.props.url);case U.a.PAGE_GO:var a;return void(null===(a=this.webview)||void 0===a||a.go(e.index));case U.a.PAGE_BACK:var n;return void(null===(n=this.webview)||void 0===n||n.back());case U.a.PAGE_FORWARD:var i;return void(null===(i=this.webview)||void 0===i||i.forward());case U.a.PAGE_GET_HISTORY:var r;return void(null===(r=this.webview)||void 0===r||r.getPageHistory(e.callback));case U.a.PAGE_STOP:{const e=w.a.getNavigationInfo(this.props.id);var o;if(!e||e&&e.isLoading)null===(o=this.refWebView.current)||void 0===o||o.stop();return}case U.a.PAGE_RELOAD:return this.checkProcessExitState(),void Object(he.i)(this.props.id,{bypassCache:e.bypassCache});case U.a.WEBPAGEVIEW_ACTIONS:switch(e.action){case"focusWebView":return void this.focusWebView(this.props.url);case"pageScrollUp":return void this.pageScrollUp();case"pageScrollDown":return void this.pageScrollDown();case"pageScrollTop":return void this.pageScrollTop();case"pageScrollBottom":return void this.pageScrollBottom();case"print":const e=s.a.getActiveWebView();return void(e===this.webview?ne.a.utilities.print(this.props.id):e&&e.print())}}}),ge(this,"focusWebView",e=>{var t,a;Object(ce.n)(e)?null===(t=this.refInternalPage.current)||void 0===t||t.focus():null===(a=this.webview)||void 0===a||a.focus()}),ge(this,"pageScrollUp",()=>{ne.a.tabsPrivate.scrollPage(y.c.unsafeGetActivePage().id,"pageup",0,()=>{$.a.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+($.a.runtime.lastError.message||""))})}),ge(this,"pageScrollDown",()=>{ne.a.tabsPrivate.scrollPage(y.c.unsafeGetActivePage().id,"pagedown",0,()=>{$.a.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+($.a.runtime.lastError.message||""))})}),ge(this,"pageScrollTop",()=>{ne.a.tabsPrivate.scrollPage(y.c.unsafeGetActivePage().id,"top",0,()=>{$.a.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+($.a.runtime.lastError.message||""))})}),ge(this,"pageScrollBottom",()=>{ne.a.tabsPrivate.scrollPage(y.c.unsafeGetActivePage().id,"bottom",0,()=>{$.a.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+($.a.runtime.lastError.message||""))})}),ge(this,"onKeyDown",e=>{"Escape"===e.key&&V.a.closeFindInPageToolbar(this.props.id)&&e.preventDefault()}),ge(this,"onMouseDown",()=>{O.a.activateTab(this.props.id,this.props.windowId)}),ge(this,"onMouseLeave",()=>{this._localStatus&&(this._localStatus=!1,x.a.clearStatus())}),ge(this,"updateDockingSizes_",e=>{ne.a.devtoolsPrivate.getDockingStateSizes(e,e=>{const t=e.hideInspectedContents,a=e.inspectedHeight,n=e.inspectedLeft,i=e.inspectedTop,s=e.inspectedWidth;ne.a.zoom.getVivaldiUIZoom(e=>this.setState({hideInspectedContents:t,viewWidth:s/e,viewHeight:a/e,viewTop:i/e,viewLeft:n/e,disableWebviewEvents:!0},()=>{this._eventGuard&&clearTimeout(this._eventGuard),this._eventGuard=setTimeout(()=>{this.setState({disableWebviewEvents:!1})},300)}))})}),ge(this,"onShowQRCode",(e,t)=>{e===this.props.id&&this.setState({customData:{url:t,dialogtype:"qrcode"}})}),ge(this,"onDockingSizesChanged",e=>{e===this.props.id&&this.updateDockingSizes_(e)}),ge(this,"onDockingStateChanged",(e,t)=>{e===this.props.id&&this.state.dockingState!==t&&(this.setState({dockingState:t}),O.a.setPageInspected(e,this.context.vivaldiWindowId,"off"!==t))}),ge(this,"onDevtoolsClosed",e=>{e===this.props.id&&(this.setState({dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0}),O.a.setPageInspected(e,this.context.vivaldiWindowId,!1))}),ge(this,"onNewDevtoolsWindowCreated",(e,t)=>{t.contentWindow.vivaldiInspectTabId=e,t.contentWindow.vivaldiWindowId=this.context.vivaldiWindowId,this._devtoolsCloseTimerId&&(clearTimeout(this._devtoolsCloseTimerId),this._devtoolsCloseTimerId=0),t.onClosed.addListener(this.onDevtoolsWindowClosed.bind(this,e))}),ge(this,"onDevtoolsWindowClosed",e=>{"undocked"===this.state.dockingState&&(this._devtoolsCloseTimerId=setTimeout(()=>{ne.a.devtoolsPrivate.closeDevtools(e,e=>{})},1e3),O.a.setPageInspected(e,this.context.vivaldiWindowId,!1))}),ge(this,"onDevtoolsUndocked",(e,t,a)=>{if(e===this.props.id){const n={left:a.left,top:a.top,width:a.right-a.left,height:a.bottom-a.top},i={id:"DevToolsApp_"+e.toString(),resizable:!0,state:a.maximized?"maximized":"normal",hidden:!0!==t,alwaysOnTop:a.alwaysOnTop,outerBounds:n};$.a.app.window.create("devtools.html",i,this.onNewDevtoolsWindowCreated.bind(this,e)),this.setState({dockingState:"undocked"})}}),ge(this,"onWebViewElementIsAttached",(e,t)=>{const{id:a,isActive:n,url:s}=this.props;e===a&&this.refs.pagediv&&(this.webview=this.refs.pagediv.firstChild,n&&!Object(ce.n)(s)&&i.a.setActiveWebView({current:this}))}),ge(this,"onWebViewElementIsDetached",(e,t)=>{e===this.props.id&&(i.a.clearIfActive(this),this.webview=null)}),ge(this,"updateFocus",(e,t)=>{if(!this.props.discarded)if(this.props.isActive){const e=D.a.findDOMNode(this);e instanceof Node&&e.contains(this.activeElement)?fe(()=>{this.activeElement&&(this.activeElement.focus(),delete this.activeElement)}):B.a.getUrlfieldStateFromId(this.props.id).isActive||Object(ee.a)({pageId:this.props.id,url:t,activeElement:this.activeElement})||fe(()=>this.focusWebView(t))}else this.activeElement=this.context.document.activeElement}),ge(this,"_onFindInPage",(e,t)=>{V.a.findInPage(this.props.id,e,t)}),ge(this,"_onFindNextInPage",(e,t,a)=>{V.a.findNextInPage(this.props.id,e,t,a)}),this.state={draggedLength:null,customData:null,dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0,hideInspectedContents:!1,disableWebviewEvents:!1,tabIsFullscreen:!1,mediaState:E.a.getState().get(this.props.id)||Object(se.Set)()}}componentDidMount(){this.props.discarded?this.props.isVisible&&e.nextTick(()=>{Object(he.i)(this.props.id)}):this.webview=this.refs.pagediv.firstChild,this.attachEventHandlers(),this.updateFocus(this.props.id,this.props.url),this.props.isActive&&e.nextTick(()=>F.a.setUtilityWebView(this.webview)),this._mediaStateStoreToken=E.a.addListener(this._onMediaStateStoreChanged)}componentDidUpdate(t,a){const{target:n}=this.props;if(n&&n!==t.target){this.checkProcessExitState();const{transition:t,post:a,headers:i}=n;this.props.url&&e.nextTick(()=>{var e;null===(e=this.refWebView.current)||void 0===e||e.sendRequest(this.props.url,t||j.a.LINK,null!=a,a||"",i||"")})}if(e.nextTick(()=>{w.a.getNavigationInfo(this.props.id)||this.updateNavigationState(this.props.url,!1,"content")}),t.url&&this.props.url!==t.url&&Object(me.o)(this.props.url)&&Object(me.o)(t.url)){const a=new URL(t.url),n=new URL(this.props.url);a.origin!==n.origin&&e.nextTick(()=>{C.a.resetPermissions(t.id),C.a.resetPageHasBlockedContent(t.id),C.a.resetBlockedPopups(t.id)})}if(t.discarded&&!this.props.discarded?this.webview=this.refs.pagediv.firstChild:this.props.discarded&&(this.webview=null),this.props.discarded&&this.props.isVisible&&e.nextTick(()=>{Object(he.i)(this.props.id)}),(n&&n!==t.target||t.url!==this.props.url||t.isActive!==this.props.isActive||t.discarded!==this.props.discarded)&&this.updateFocus(this.props.id,this.props.url),this.webview){const a=t.discarded&&!this.props.discarded,n=(!t.isActive||a)&&this.props.isActive;if(n){e.nextTick(()=>F.a.setUtilityWebView(this.webview)),!this.props.extData.get("thumbnail")&&e.nextTick(()=>{this.updatePageThumbnailWithActiveWebview(0)})}const s=t.isActive&&!this.props.isActive,r=Object(ce.n)(t.url),o=Object(ce.n)(this.props.url),l=!r&&o;o||!n&&!r?(s||l)&&e.nextTick(()=>{var e;(i.a.clearIfActive(this),this.state.tabIsFullscreen)&&(null===(e=this.webview)||void 0===e||e.setIsFullscreen(!1))}):e.nextTick(()=>i.a.setActiveWebView({current:this}))}if(this.props.extData.get("readerMode")&&!t.extData.get("readerMode"))this.injectReaderView();else if(!this.props.extData.get("readerMode")&&t.extData.get("readerMode")){var s;null===(s=this.refWebView.current)||void 0===s||s.reload()}if(this.props.prefValues[ie.kWebpagesReaderStyle]!==t.prefValues[ie.kWebpagesReaderStyle]&&this.props.extData.get("readerMode")){const e={...this.props.prefValues[ie.kWebpagesReaderStyle],...B.a.getThemeColors()};Object(he.k)(this.props.id,{readerStyle:e})}this.updateViewUnchangedFlag(t,this.props),_.a.setDevToolsConflicts(this.isDevtoolsDockedAndActive());const r=!t.prefValues[ie.kMailIsTurnedOff]&&t.prefValues[ie.kRssDetectFeeds],o=this.props.prefValues[ie.kMailIsTurnedOff]||!this.props.prefValues[ie.kRssDetectFeeds];r&&o&&P.a.resetRssFeeds(this.props.id)}componentWillUnmount(){this.state.tabIsFullscreen&&e.nextTick(()=>{z.a.restoreStateAfterHTMLFullscreen(this.context.vivaldiWindowId)}),this.removeEventHandlers(),ne.a.devtoolsPrivate.closeDevtools(this.props.id,e=>{}),this.webview&&e.nextTick(()=>{i.a.clearIfActive(this)}),this._mediaStateStoreToken.remove()}render(){const e=this.props.supportsReaderMode,t=this.props.extData.get("readerMode")&&e,a=y.c.isDisplayingImage(this.props.id),i="off"!==this.state.dockingState&&!Object(ce.n)(this.props.url),s="auto"===this.state.viewWidth||0===this.state.viewWidth?"100%":this.state.viewWidth+this.state.viewLeft,r=0!==this.state.viewWidth,o=0!==this.state.viewHeight,l=this.state.mediaState.has("recording")||this.state.mediaState.has("capturing"),p={visibility:l||this.props.isVisible?"inherit":"hidden",zIndex:this.props.isVisible?"initial":"-1",opacity:this.props.isVisible?1:0};if(this.state.tabIsFullscreen&&l){const e=1920,t=1080,a=this.props.contentWidth/e;p.transform=`scale(${a})`,p.left=(this.props.contentWidth-e)/2,p.top=(this.props.contentHeight-t)/2,p.width=e,p.height=t,p.position="absolute"}const N=Number(this.props.id),_=Z()("webpageview",{active:this.props.isActive,internal:Object(ce.n)(this.props.url),tiled:Object(ue.c)(this.props.id),visible:this.props.isVisible,pagefocusstop:this.props.isVisible});return n.createElement(d.a,{__source:{fileName:be,lineNumber:1404,columnNumber:7}},n.createElement("div",{className:_,ref:"webpageview",style:p,"data-id":this.props.id,tabIndex:"-1",onKeyDown:this.onKeyDown,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,__source:{fileName:be,lineNumber:1405,columnNumber:9}},t&&this.props.prefValues[ie.kWebpagesReaderControls]&&!(i&&"undocked"!==this.state.dockingState)&&n.createElement(M.a,{prefs:!1,filter:"",__source:{fileName:be,lineNumber:1418,columnNumber:13}}),!a&&!Object(ce.j)(this.props.url)&&n.createElement(b.a,{isActive:this.props.isActive,pageId:this.props.id,onFindInPage:this._onFindInPage,onFindNextInPage:this._onFindNextInPage,__source:{fileName:be,lineNumber:1422,columnNumber:13}}),n.createElement(c.a,{tabId:N,__source:{fileName:be,lineNumber:1428,columnNumber:11}}),n.createElement(h.a,{url:this.props.url,__source:{fileName:be,lineNumber:1430,columnNumber:11}}),n.createElement("div",{ref:"webpagecontainer",className:"row-wrapper",__source:{fileName:be,lineNumber:1432,columnNumber:11}},n.createElement("div",{className:"devtools-container",__source:{fileName:be,lineNumber:1434,columnNumber:13}},i&&n.createElement(u.a,{active:this.props.isActive,tabId:N,dockingState:this.state.dockingState,__source:{fileName:be,lineNumber:1436,columnNumber:17}}),n.createElement("div",{ref:"pagediv",className:"webpage",style:i?{top:this.state.viewTop,left:this.state.viewLeft,width:r?this.state.viewWidth:"none",height:o?this.state.viewHeight:"none",pointerEvents:this.state.disableWebviewEvents?"none":null}:null,__source:{fileName:be,lineNumber:1442,columnNumber:15}},!this.props.discarded&&n.createElement(H.a,{ref:this.refWebView,id:N,onClose:this.handleClose,onContentsCreated:this.handleOnContentsCreated,onCreateSearch:this.handleOnCreateSearch,onContentAllowed:this.handleContentAllowed,onContentBlocked:this.handleContentBlocked,onDialog:this.handleOnJavascriptDialog,onExit:this.handleOnProcessExit,onFindUpdate:this.handleOnFindUpdate,onFullscreen:this.handleOnFullscreen,onLoadAbort:this.handleLoadAbort,onLoadCommit:this.handleLoadCommit,onLoadProgress:this.handleOnLoadProgress,onLoadRedirect:this.handleLoadRedirected,onLoadStart:this.handleLoadStart,onLoadStop:this.handleLoadStop,onNewWindow:this.handleOnNewWindow,onPasteAndGo:this.handleOnPasteAndGo,onPermissionRequest:this.handleOnPermissionRequest,onSslStateChanged:this.handleOnSSLStateChanged,onTargetUrlChanged:this.handleOnTargetURLChanged,onWindowBlocked:this.handleBlockedPopup,__source:{fileName:be,lineNumber:1453,columnNumber:19}})),n.createElement(f.a,{ref:this.refInternalPage,pageId:this.props.id,url:this.props.url,isVisible:this.props.isVisible,isActive:this.props.isActive,updatePageThumbnailWithActiveWebview:this.updatePageThumbnailWithActiveWebview,__source:{fileName:be,lineNumber:1480,columnNumber:15}}),a&&!this.props.showImageInspector&&n.createElement("button",{className:"inspector",title:Object(Y.a)("Image Properties"),style:{left:s},onClick:this.toggleImageInspector,dangerouslySetInnerHTML:{__html:de.Ed},__source:{fileName:be,lineNumber:1490,columnNumber:17}})),a&&n.createElement(g.a,{url:this.props.url,open:this.props.showImageInspector,toggleImageInspector:this.toggleImageInspector,__source:{fileName:be,lineNumber:1500,columnNumber:15}}),this.props.isActive&&this.state.customData&&n.createElement(m.a,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:be,lineNumber:1509,columnNumber:15}}))))}}ge(_e,"contextType",G.a),t.a=Object(N.a)(_e,Ne)}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return m}));var n=a(45),i=a.n(n),s=a(6),r=a(35),o=a(1);function l(){const e=r.a.getSync("BROWSER_COLOR_FG");return`html, body {\n      overflow: initial;\n    }\n    body {\n      margin: 12px 24px 24px;\n      font-family: sans-serif;\n      font-size: 100%;\n      ${"inherit_themes"===s.a.get(o.kMailComposerColors)?`color: rgb(${i()(e).rgb().toString()});`:""}\n      ${"black_on_white"===s.a.get(o.kMailComposerColors)?"background: white;":""}\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    blockquote {\n      padding-inline-start: 18px;\n      border-left: 3px solid inherit;\n      margin: 0;\n      opacity: 0.85;\n    }\n    pre {\n      white-space: pre-wrap;\n    }\n    ${u()}`}function c(){const e=r.a.getSync("BROWSER_COLOR_FG"),t=r.a.getSync("BROWSER_COLOR_BG"),a=r.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG");return{colorFg:`rgb(${i()(e).rgb().toString()})`,colorBg:`rgb(${i()(t).rgb().toString()})`,colorBgDark:`rgb(${i()(t).darken(.1).rgb().toString()})`,colorBorder:`rgb(${i()(e).luminance(.5).rgb().toString()})`,colorHighlight:`rgb(${i()(a).rgb().toString()})`}}function u(){const e=c();return`\n    .tooltip {\n      --colorFg: ${e.colorFg};\n      --colorBg: ${e.colorBg};\n      --colorBgDark: ${e.colorBgDark};\n      --colorBorder: ${e.colorBorder};\n      --colorHighlight: ${e.colorHighlight};\n      --TipWidth: 480px;\n      position: relative;\n    }\n    .tooltip .tooltip-text * {\n      user-select: none;\n    }\n    .tooltip-text input {\n      margin-left: 3px;\n      border: 1px solid var(--colorBorder);\n      border-radius: 2px;\n      font-size: small;\n      opacity: 0.8;\n      color: var(--colorFg);\n      background-color: var(--colorBg);\n    }\n    .tooltip-text input:active {\n      background-color: var(--colorBgDark);\n    }\n    .tooltip-text input:first-of-type {\n      margin-left: 12px;\n    }\n    .tooltip-text a {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--colorFg);\n    }\n    .tooltip .tooltip-text {\n      cursor: default;\n      position: absolute;\n      z-index: 1;\n      display: flex;\n      top: 100%;\n      left: -6px;\n      max-width: var(--TipWidth);\n      padding: 6px 6px 6px 12px;\n      color:var(--colorFg);\n      background-color: var(--colorBg);\n      border: 1px solid var(--colorBgDark);\n      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 3px 10px rgba(0, 0, 0, 0.3);\n      border-radius: 3px;\n    }\n  `}function m(e){return`${function(e){const t={...c(),...e?{colorFg:e.baseFg,colorBg:e.baseBg,colorHighlight:e.highlightBg,colorBgDark:e.accentBg}:{}};return`\n    html, body, iframe {\n      background-color: transparent;\n      padding: 0;\n      margin: 0;\n      font-family: sans-serif;\n      overflow: initial;\n    }\n    body[contenteditable="plaintext-only"] {\n      font-family: monospace;\n    }\n    body {\n      --colorFg: ${t.colorFg};\n      --colorBg: ${t.colorBg};\n      --colorBgDark: ${t.colorBgDark};\n      --colorBorder: ${t.colorBorder};\n      --colorHighlight: ${t.colorHighlight};\n      --EditorPadding: 12px;\n      --MaxWidth: 700px;\n      margin-left: var(--EditorPadding);\n      padding-left: calc(calc(50% - calc(var(--MaxWidth) / 2) - var(--EditorPadding))) !important;\n      padding-right: calc(50% - calc(var(--MaxWidth) / 2)) !important;\n      padding-top: var(--EditorPadding);\n      padding-bottom: calc(var(--EditorPadding) * 3);\n      color: var(--colorFg);\n      font-size: 100%;\n      cursor: text;\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    a:-webkit-any-link {\n      color: var(--colorHighlight);\n      cursor: pointer;\n    }\n  `}(e)}\n    html, body, iframe {\n      font-family: sans-serif;\n      font-size: 100%;\n    }\n    body {\n      overflow: overlay;\n    }\n    input[type=checkbox] {\n      appearance: none;\n      position: relative;\n      width: 16px;\n      height: 16px;\n      min-width: 16px;\n      min-height: 16px;\n      vertical-align: middle;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n      margin: unset;\n      border-width: 1px;\n      border-style: solid;\n      border-color: rgba(0,0,0,0.2);\n      background-color: var(--colorBg);\n    }\n    input[type='checkbox']:disabled {\n      opacity: 1;\n      filter: grayscale(1);\n    }\n    input[type=checkbox]:before,\n    input[type=checkbox]:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: var(--colorHighlight);\n      transform-origin: 0 0;\n    }\n    input[type=checkbox]:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0.4);\n    }\n    input[type=checkbox]:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(1.2);\n    }\n    ${u()}\n  `}},function(e,t,a){"use strict";var n=a(272),i=a(0),s=a.n(i),r=a(66),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailLabels.jsx";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a.Component{constructor(...e){super(...e),l(this,"mailLabelRef",s.a.createRef()),l(this,"state",{breakpoint:!1,componentMaxWidth:32,shouldDetachObserver:!1,numberOfVisibleLabelsAllowed:0,numberOfCheckedLabels:Object(r.e)(this.props.flags).length}),l(this,"observerHandler",()=>{0===this.state.numberOfCheckedLabels?this.setState({shouldDetachObserver:!0}):this.setState({shouldDetachObserver:!1})}),l(this,"observeTargetHandler",e=>{const t=e[0].target;this.setNumberOfVisibleLabelsAllowed(t.clientWidth),t.clientWidth>this.state.componentMaxWidth&&this.setBreakpoint(!1),t.clientWidth<this.state.componentMaxWidth&&this.setBreakpoint(!0)}),l(this,"setNumberOfVisibleLabelsAllowed",e=>{const t=e/(32+(3+3*(e/32)));this.setState({numberOfVisibleLabelsAllowed:t})}),l(this,"setNumberOfCheckedLabels",e=>{this.setState({numberOfCheckedLabels:e})}),l(this,"setBreakpoint",e=>{this.setState({breakpoint:e})}),l(this,"setComponentMaxWidth",e=>{this.setState({componentMaxWidth:e})}),l(this,"getComponentMaxWidth",()=>{const e=Object(r.e)(this.props.flags);return(32+3*this.state.numberOfVisibleLabelsAllowed)*e.length})}componentDidMount(){this.state.numberOfCheckedLabels>0&&(this.setComponentMaxWidth(this.getComponentMaxWidth()),this.observerHandler())}componentDidUpdate(e,t){const a=this.mailLabelRef.current&&this.mailLabelRef.current.clientWidth;this.props.flags!==e.flags&&(this.setComponentMaxWidth(this.getComponentMaxWidth()),this.setNumberOfCheckedLabels(Object(r.e)(this.props.flags).length),this.observerHandler(),a&&(a>this.state.componentMaxWidth&&this.setBreakpoint(!1),a<this.state.componentMaxWidth&&this.setBreakpoint(!0)))}render(){if(0===this.state.numberOfCheckedLabels)return null;let e=[],t=[];this.state.breakpoint?(e=Object(r.e)(this.props.flags).slice(this.state.numberOfVisibleLabelsAllowed).map(e=>Object(r.h)(e)),t=Object(r.e)(this.props.flags).slice(0,this.state.numberOfVisibleLabelsAllowed).map(e=>Object(r.h)(e))):t=Object(r.e)(this.props.flags).map(e=>Object(r.h)(e));const a=e.join("\n");return(s.a.createElement("div",{className:this.props.className,ref:this.mailLabelRef,__source:{fileName:o,lineNumber:131,columnNumber:7}},s.a.createElement(n.a,{className:"MailLabels-Observer",onResize:this.observeTargetHandler,attached:this.state.shouldDetachObserver,__source:{fileName:o,lineNumber:135,columnNumber:9}},s.a.createElement("ul",{className:"MailLabels-Container",style:this.props.style,__source:{fileName:o,lineNumber:140,columnNumber:11}},t.map((e,t)=>s.a.createElement("li",{title:Object(r.h)(e),className:"MailLabels-Label",key:e,__source:{fileName:o,lineNumber:144,columnNumber:15}},Object(r.h)(e))),e.length>0&&s.a.createElement("li",{title:a,className:"MailLabels-Label MailLabels-Tooltip",__source:{fileName:o,lineNumber:152,columnNumber:13}},`+${e.length}`)))))}}t.a=c},,function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(21),r=a(11),o=a(52),l=a(2),c=a(1),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\AccessKeys.jsx";const m=[c.kWebpagesAccessKeys],d=r.a.getEventHandler;class h extends i.a.Component{render(){return i.a.createElement(o.a,{filter:this.props.filter,__source:{fileName:u,lineNumber:25,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:u,lineNumber:26,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:u,lineNumber:27,columnNumber:11}},Object(l.a)("Access Keys")),i.a.createElement("div",{className:"setting-single",__source:{fileName:u,lineNumber:28,columnNumber:11}},i.a.createElement("label",{__source:{fileName:u,lineNumber:29,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kWebpagesAccessKeys],onChange:d(c.kWebpagesAccessKeys),__source:{fileName:u,lineNumber:30,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:u,lineNumber:33,columnNumber:15}},Object(l.a)("Allow Access Keys"))),i.a.createElement("p",{className:"info",__source:{fileName:u,lineNumber:35,columnNumber:13}},Object(l.a)("Some websites may use this accessibility feature to register shortcuts for certain elements, using $1 modifier.",["Shift+Alt"])))))}}var p=Object(s.a)(h,m);var b=function(e){switch(e){case"CATEGORY_COMMAND_APPLICATION":return Object(l.a)("win_linux","Window");case"CATEGORY_COMMAND_APPEARANCE":return Object(l.a)("win_linux","View");case"CATEGORY_COMMAND_TAB_ACTION":return Object(l.a)("command","Tab");case"CATEGORY_COMMAND_WEBPAGE_NAVIGATION":return Object(l.a)("Page");case"CATEGORY_COMMAND_MAIL":return Object(l.a)("Mail");case"CATEGORY_COMMAND_CHAIN":return Object(l.a)("Chains");default:return"Unknown"}},g=a(150),N=a(44),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\ConfigureSingleKeyShortcuts.jsx";const _=r.a.getEventHandler;class v extends n.Component{render(){return n.createElement(o.a,{filter:this.props.filter,__source:{fileName:f,lineNumber:26,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:f,lineNumber:27,columnNumber:9}},n.createElement("h3",{__source:{fileName:f,lineNumber:28,columnNumber:11}},Object(l.a)("Keyboard Shortcuts")),n.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:30,columnNumber:11}},n.createElement("label",{__source:{fileName:f,lineNumber:31,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsEnable],onChange:_(c.kKeyboardShortcutsEnable),__source:{fileName:f,lineNumber:32,columnNumber:15}}),n.createElement("span",{__source:{fileName:f,lineNumber:35,columnNumber:15}},Object(l.a)("Enable Keyboard Shortcuts")))),n.createElement("div",{className:"setting-single pad-left",__source:{fileName:f,lineNumber:38,columnNumber:11}},n.createElement("label",{__source:{fileName:f,lineNumber:39,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsEnableSingleKey],onChange:_(c.kKeyboardShortcutsEnableSingleKey),disabled:!this.props.prefValues[c.kKeyboardShortcutsEnable],__source:{fileName:f,lineNumber:40,columnNumber:15}}),n.createElement("span",{__source:{fileName:f,lineNumber:46,columnNumber:15}},Object(l.a)("Single Key Shortcuts")))),!this.props.prefValues[c.kMailIsTurnedOff]&&n.createElement("div",{className:"setting-single pad-left",__source:{fileName:f,lineNumber:50,columnNumber:13}},n.createElement("label",{__source:{fileName:f,lineNumber:51,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsEnableSingleKeyForMail],onChange:_(c.kKeyboardShortcutsEnableSingleKeyForMail),disabled:!this.props.prefValues[c.kKeyboardShortcutsEnable],__source:{fileName:f,lineNumber:52,columnNumber:17}}),n.createElement("span",{__source:{fileName:f,lineNumber:59,columnNumber:17}},Object(l.a)("Mail Single Key Shortcuts")))),n.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:63,columnNumber:11}},n.createElement("label",{__source:{fileName:f,lineNumber:64,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsSpaceFastForwards],onChange:_(c.kKeyboardShortcutsSpaceFastForwards),__source:{fileName:f,lineNumber:65,columnNumber:15}}),n.createElement("span",{__source:{fileName:f,lineNumber:69,columnNumber:15}},Object(l.a)("Space Key to Fast Forward")))),n.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:73,columnNumber:13}},n.createElement("label",{__source:{fileName:f,lineNumber:74,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsAltOpensMenu],onChange:_(c.kKeyboardShortcutsAltOpensMenu),__source:{fileName:f,lineNumber:75,columnNumber:17}}),n.createElement("span",{__source:{fileName:f,lineNumber:79,columnNumber:17}},Object(l.a)("Alt Key for Main Menu"))))))}}var E=v,C=a(6),w=a(69),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\FullKeyAccess.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=[c.kKeyboardTabToAll,c.kKeyboardTabToAllUsesSystemDefault,c.kWebpagesFocusTrap],T=r.a.getEventHandler;class k extends i.a.Component{constructor(...e){super(...e),y(this,"handleDarwinKeyAccess",e=>{const t=C.a.get(c.kSystemMacKeyboardUiMode),a=e.target&&e.target.checked;a||-1===this.props.prefValues[c.kKeyboardTabToAll]?a&&2===t&&0!==this.props.prefValues[c.kKeyboardTabToAll]?r.a.set(c.kKeyboardTabToAll,0):a&&0===t&&-1!==this.props.prefValues[c.kKeyboardTabToAll]&&r.a.set(c.kKeyboardTabToAll,-1):r.a.set(c.kKeyboardTabToAll,-1),r.a.set(c.kKeyboardTabToAllUsesSystemDefault,a)}),y(this,"renderFullKeyboardAccess",()=>i.a.createElement("div",{className:"setting-group",__source:{fileName:O,lineNumber:51,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:O,lineNumber:52,columnNumber:9}},Object(l.a)("Full Keyboard Access")),!1,i.a.createElement(w.a,{name:"keyAccessSetting",className:"setting-single",value:this.props.prefValues[c.kKeyboardTabToAll],onChange:T(c.kKeyboardTabToAll),__source:{fileName:O,lineNumber:66,columnNumber:9}},i.a.createElement("label",{__source:{fileName:O,lineNumber:70,columnNumber:11}},i.a.createElement("input",{type:"radio",value:"0",disabled:this.props.prefValues[c.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:O,lineNumber:71,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:O,lineNumber:74,columnNumber:13}},Object(l.a)("Focus All Controls"))),i.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:76,columnNumber:11}},Object(l.a)("Press TAB key to focus all controls")),i.a.createElement("label",{__source:{fileName:O,lineNumber:80,columnNumber:11}},i.a.createElement("input",{type:"radio",value:"-1",disabled:this.props.prefValues[c.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:O,lineNumber:81,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:O,lineNumber:84,columnNumber:13}},Object(l.a)("Focus Input"))),i.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:86,columnNumber:11}},Object(l.a)("Press TAB key to focus text boxes and lists only"))))),y(this,"onFocusCyclingChanged",e=>{const t="1"===e.target.value;r.a.set(c.kWebpagesFocusTrap,t)}),y(this,"renderFocusCycling",()=>i.a.createElement("div",{className:"setting-group",__source:{fileName:O,lineNumber:101,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:O,lineNumber:102,columnNumber:9}},Object(l.a)("Focus Cycling")),i.a.createElement(w.a,{name:"toolbarFocusCycling",className:"setting-single",value:this.props.prefValues[c.kWebpagesFocusTrap]?"1":"0",onChange:this.onFocusCyclingChanged,__source:{fileName:O,lineNumber:103,columnNumber:9}},i.a.createElement("label",{__source:{fileName:O,lineNumber:107,columnNumber:11}},i.a.createElement("input",{type:"radio",value:"1",__source:{fileName:O,lineNumber:108,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:O,lineNumber:109,columnNumber:13}},Object(l.a)("Cycle in Component"))),i.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:111,columnNumber:11}},Object(l.a)("TAB key focus is bound to individual toolbars or webpage")),i.a.createElement("label",{__source:{fileName:O,lineNumber:114,columnNumber:11}},i.a.createElement("input",{type:"radio",value:"0",__source:{fileName:O,lineNumber:115,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:O,lineNumber:116,columnNumber:13}},Object(l.a)("Cycle All"))),i.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:118,columnNumber:11}},Object(l.a)("TAB key focus cycles through whole application")))))}render(){return i.a.createElement(o.a,{filter:this.props.filter,__source:{fileName:O,lineNumber:128,columnNumber:7}},this.renderFocusCycling(),this.renderFullKeyboardAccess())}}var A=Object(s.a)(k,S),I=a(704),D=a(90),M=a(61),P=a(783),x=a(20),L=a.n(x),j=a(218),R=a(208);a.d(t,"b",(function(){return H}));var B="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\Keyboard.jsx";function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=[c.kMailIsTurnedOff,c.kChainedCommandsCommandList,c.kKeyboardShortcutsAltOpensMenu,c.kKeyboardShortcutsEnable,c.kKeyboardShortcutsEnableSingleKey,c.kKeyboardShortcutsEnableSingleKeyForMail,c.kKeyboardShortcutsSpaceFastForwards];function H(){return N.default.getAllCommands().filter(e=>!e.keyword&&!e.overLink&&!e.hideInSettings)}class V extends n.Component{constructor(...e){super(...e),F(this,"state",{commandArray:H(),openCategories:["CATEGORY_COMMAND_APPLICATION"],confirmation:!1,hideFullKeyAccess:0,hideConfigureSingleKeyShortcut:0,shouldHideKeyboardShortcuts:!1,keyboardShortcutFilter:""}),F(this,"_onStoreChange",()=>{this.setState({commandArray:H()})}),F(this,"switchCategory",e=>{this.setState(t=>{const a=t.openCategories;return a.indexOf(e)>-1?a.splice(a.indexOf(e),1):a.push(e),{openCategories:a}})}),F(this,"confirmRestoreKeys",()=>{this.setState({confirmation:!0})}),F(this,"restoreKeys",()=>{g.default.restoreCommandShortcutKeys(),this.setState({confirmation:!1})}),F(this,"onCancel",()=>{this.setState({confirmation:!1})}),F(this,"renderModal",()=>n.createElement(D.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:B,lineNumber:141,columnNumber:7}},n.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:B,lineNumber:144,columnNumber:9}},n.createElement("header",{className:"dialog-header",__source:{fileName:B,lineNumber:145,columnNumber:11}},n.createElement("h1",{className:"dialog-title",__source:{fileName:B,lineNumber:146,columnNumber:13}},Object(l.a)("Restore Keyboard Shortcuts?"))),n.createElement("div",{className:"dialog-content",__source:{fileName:B,lineNumber:150,columnNumber:11}},n.createElement("p",{__source:{fileName:B,lineNumber:151,columnNumber:13}},Object(l.a)("All keyboard shortcuts will be restored to default."))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:B,lineNumber:155,columnNumber:11}},n.createElement("input",{type:"button",className:"danger",onClick:this.restoreKeys,value:Object(l.a)("Restore"),__source:{fileName:B,lineNumber:156,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.onCancel,value:Object(l.a)("Cancel"),autoFocus:!0,__source:{fileName:B,lineNumber:161,columnNumber:13}}))))),F(this,"renderKeyboardCommandCategories",(e,t)=>{const a=e.reduce((e,t)=>(e[t.category]=(e[t.category]||[]).concat(t),e),{}),i=Object.keys(a).map((e,n)=>this.renderKeyboardCommandCategory(e,a[e],t));return i.length>0?n.createElement("div",{className:"setting-single",__source:{fileName:B,lineNumber:188,columnNumber:9}},n.createElement("div",{className:"keystrokes",__source:{fileName:B,lineNumber:189,columnNumber:11}},i),!this.props.filter&&"read-only"!==this.props.view&&n.createElement("input",{type:"button",onClick:this.confirmRestoreKeys,value:Object(l.a)("Restore Default Keys"),__source:{fileName:B,lineNumber:193,columnNumber:13}})):null}),F(this,"renderKeyboardCommandCategory",(e,t,a)=>{const i=b(e),s=a||this.state.openCategories.indexOf(e)>-1?"show":"hide";return n.createElement("div",{className:"category "+s,key:e,__source:{fileName:B,lineNumber:211,columnNumber:7}},n.createElement("button",{onClick:this.switchCategory.bind(this,e),__source:{fileName:B,lineNumber:212,columnNumber:9}},Object(j.b)(i,a)),n.createElement("div",{className:"list",__source:{fileName:B,lineNumber:215,columnNumber:9}},t.map((e,t)=>this.renderCommandKeys(e,t,a))))}),F(this,"renderCommandKeys",(e,t,a)=>{const i=!this.props.prefValues[c.kKeyboardShortcutsEnable],s=!this.props.prefValues[c.kKeyboardShortcutsEnableSingleKey];if("read-only"===this.props.view)return n.createElement("div",{className:"keycombo",key:t,__source:{fileName:B,lineNumber:231,columnNumber:7}},n.createElement("label",{__source:{fileName:B,lineNumber:232,columnNumber:9}},Object(j.b)(e.label,a)),e.shortcut&&e.shortcut.map((e,t)=>[n.createElement("span",{key:t,title:i?Object(l.a)("Keyboard Shortcuts are disabled"):1===e.length&&s?Object(l.a)("Single Key Shortcuts are disabled"):"",__source:{fileName:B,lineNumber:234,columnNumber:11}},n.createElement("input",{type:"button",disabled:!0,className:e.length>1?"item regular":"item single",value:Object(R.b)(e),__source:{fileName:B,lineNumber:238,columnNumber:13}}))]));if(!e.readonly){const t=e.name.toLowerCase();return(n.createElement("div",{className:"keycombo",key:t,__source:{fileName:B,lineNumber:251,columnNumber:9}},n.createElement("label",{htmlFor:"combo-"+t,__source:{fileName:B,lineNumber:252,columnNumber:11}},Object(j.b)(e.label,this.props.filter)),n.createElement(I.a,{prefValues:this.props.prefValues,id:"combo-"+t,key:t,commandArray:this.state.commandArray,command:e,__source:{fileName:B,lineNumber:255,columnNumber:11}})))}return null}),F(this,"renderListOfKeyboardCommands",e=>{let t=[];if("read-only"===this.props.view){t=this.state.commandArray.filter(e=>Boolean(e.shortcut&&e.shortcut.length>0))}else t=this.state.commandArray;if(e){const a=this.tokenize(e);t=t.filter(t=>(t.label||t.name).toLowerCase().indexOf(e.toLowerCase())>-1||(t.shortcut||[]).some(e=>{const t=this.tokenize(e);return Object(P.a)(a,t)}))}return t.length>0?n.createElement("div",{className:"keyboard-shortcut-list",__source:{fileName:B,lineNumber:297,columnNumber:9}},e&&n.createElement("header",{__source:{fileName:B,lineNumber:299,columnNumber:13}},n.createElement("h3",{__source:{fileName:B,lineNumber:300,columnNumber:15}},Object(l.a)("Showing all keyboard shortcut entries matching $1.",[e]))),this.renderKeyboardCommandCategories(t,e)):null}),F(this,"tokenize",e=>new Set(e.match(/[^,\s\+]+/g)||[]))}componentDidMount(){N.default.addChangeListener(this._onStoreChange),C.a.addListener(c.kMailIsTurnedOff,this._onStoreChange)}componentWillUnmount(){N.default.removeChangeListener(this._onStoreChange),C.a.removeListener(c.kMailIsTurnedOff,this._onStoreChange)}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter&&this.setState({keyboardShortcutFilter:""})}render(){const e=this.state.keyboardShortcutFilter||this.props.filter;if("read-only"===this.props.view)return this.renderListOfKeyboardCommands(e);const{prefValues:t}=this.props;return(n.createElement(M.a,{categoryTitle:Object(l.a)("Keyboard"),className:L()({"keyboard-shortcut-list":!0,singlekeydisabled:!t[c.kKeyboardShortcutsEnableSingleKey],singlekeydisabledmail:!t[c.kKeyboardShortcutsEnableSingleKeyForMail]}),filter:this.props.filter,__source:{fileName:B,lineNumber:325,columnNumber:7}},this.state.confirmation&&this.renderModal(),n.createElement(A,{filter:this.props.filter,__source:{fileName:B,lineNumber:336,columnNumber:9}}),n.createElement(p,{filter:this.props.filter,__source:{fileName:B,lineNumber:338,columnNumber:9}}),n.createElement(E,{filter:this.props.filter,prefValues:t,__source:{fileName:B,lineNumber:340,columnNumber:9}}),this.renderListOfKeyboardCommands(e)))}}t.a=Object(s.a)(V,U)},,function(e,t,a){"use strict";t.a=function(){return"win"}},function(e,t,a){"use strict";a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return f}));var n=a(44),i=a(107),s=a(14),r=a(0),o=a.n(r),l=a(762),c=a(2),u=a(4),m=a(126),d=a(117),h=a(695),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\EditChainedCommand.jsx";const b=["COMMAND_OPEN_LINK_DEFAULT","COMMAND_OPEN_LINK_CURRENT","COMMAND_OPEN_LINK_BACKGROUND"],g={name:Object(c.a)("title","Chain Name"),emptyTitle:Object(c.a)("Add your First Command Chain"),emptyDescription:Object(c.a)("Press the “Add” button to the left to add a new Chain."),parameter:Object(c.a)("chainedcommand","Command Parameter")},N=Object(c.a)("Valid URL"),f=[{name:"COMMAND_CHAINED_SLEEP",action:e=>new Promise(t=>setTimeout(t,e)),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,keyword:{type:"number",defaultValue:1e3,unit:Object(c.a)("Milliseconds"),min:1,max:3e4},guid:"2eb81004-6703-46db-9933-6afcfde924e4",...Object(u.a)("command","Delay")},{name:b[0],action:async e=>await s.a.openURL(e,{inCurrent:!1,inBackground:!1}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,keyword:{type:"string",defaultValue:"https://vivaldi.com",unit:N},guid:"f57b8092-9426-4bc8-8e39-fcf3e315b065",...Object(u.a)("command","Open Link in New Tab")},{name:b[1],action:async e=>await s.a.openURL(e,{inCurrent:!0}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,keyword:{type:"string",defaultValue:"https://vivaldi.com",unit:N},guid:"0b01337b-4c13-4197-90c8-179c5c91cfff",...Object(u.a)("command","Open Link in Current Tab")},{name:b[2],action:async e=>await s.a.openURL(e,{inBackground:!0}),category:"CATEGORY_COMMAND_APPLICATION",showInQC:!1,keyword:{type:"string",defaultValue:"https://vivaldi.com",unit:N},guid:"00e0e4ad-de61-4e36-8d7e-6aead10cf1c5",...Object(u.a)("command","Open Link in Background Tab")}],_=["b6ddaabf-d87f-4c2c-affa-ce81bb30bfca","176ff9a8-a516-4015-9b0a-14434746ce9b","1453aae1-130d-465f-98eb-cbda5061445d","172583c9-c8d5-45f7-9e4d-65cff9333679","d03d4bc8-26c4-49f6-b3ce-23980637ae76","855ad23f-900b-42bf-af4d-4ce6b419ce09"];t.b=({chain:e,removeFrom:t,changeParameter:a,addToChain:s,nameChange:r,name:u,shouldFocusSelector:g,moveItem:N,searchableStrings:v})=>{const E=Object(h.a)(),C=n.default.getVivDefinedCommands().filter(e=>!e.overLink&&!_.includes(e.guid)),w=f.concat(C),O=e=>{Object(m.a)(e);const t=e.target;t instanceof HTMLElement&&t.classList.contains("ChainedCommand-Item")&&t.classList.add("ChainedCommand-Item--Over")},y=e=>{Object(m.a)(e);const t=e.target;t instanceof HTMLElement&&t.classList.contains("ChainedCommand-Item--Over")&&t.classList.remove("ChainedCommand-Item--Over")},S=e=>{const{keyword:t}=e;if(!t)return null;const{max:a,min:n,defaultValue:i,type:s,unit:r}=t;return("number"===s||"mixed"===s?Object(c.a)("Min: $1",[n])+"\n"+Object(c.a)("Max: $1",[a])+"\n":"")+Object(c.a)("Default: $1",[i])+"\n"+Object(c.a)("Parameter Unit: $1",[r])};return o.a.createElement("div",{className:"detail",__source:{fileName:p,lineNumber:204,columnNumber:5}},o.a.createElement("div",{className:"detail-content",__source:{fileName:p,lineNumber:205,columnNumber:7}},o.a.createElement("div",{className:"setting-group",__source:{fileName:p,lineNumber:206,columnNumber:9}},o.a.createElement("div",{className:"setting-single",__source:{fileName:p,lineNumber:207,columnNumber:11}},o.a.createElement(i.a,{label:v.name,type:"text",value:u||"",onChange:e=>r(e.target.value),__source:{fileName:p,lineNumber:208,columnNumber:13}}))),o.a.createElement("div",{className:"ChainedCommand setting-group-unlimited",onDragOver:e=>{Object(m.a)(e),e.dataTransfer.dropEffect="move"},__source:{fileName:p,lineNumber:217,columnNumber:9}},e.map((n,r)=>{const u=w.findIndex(e=>e.guid===n.key),d=w[u],h={val:d,position:r+1,shouldDelete:!1},f={position:r,shouldDelete:!0},_=E&&g&&r>0;return o.a.createElement("div",{className:"ChainedCommand-Item",key:n.uniqueId,draggable:e.length>1,onClick:e=>e.preventDefault(),onDrop:e=>((e,t)=>{Object(m.a)(e);const a=e.dataTransfer.getData("vivaldi/x-oldIndex"),n=parseInt(a);isNaN(n)||N(n,t),y(e)})(e,r),onDragStart:e=>((e,t)=>{e.dataTransfer.setData("vivaldi/x-oldIndex",t)})(e,r),onDragEnter:O,onDragLeave:y,__source:{fileName:p,lineNumber:234,columnNumber:17}},o.a.createElement("div",{className:"ChainedCommand-Item--Title floating-label",__source:{fileName:p,lineNumber:244,columnNumber:19}},o.a.createElement("span",{className:"ChainedCommand-Item--Name",__source:{fileName:p,lineNumber:245,columnNumber:21}},`Command ${r+1}`),o.a.createElement(l.a,{className:"ChainedCommand--Selector",placeholder:Object(c.a)("Filter Commands"),isClearable:!0,defaultValueIdx:u,autoFocus:_,openMenuOnFocus:!1,isMulti:!1,commands:w,setSelectedItem:e=>s({val:e,...f}),__source:{fileName:p,lineNumber:249,columnNumber:23}})),void 0!==n.param&&o.a.createElement("div",{className:"ChainedCommand-Item--Parameter",title:S(d),__source:{fileName:p,lineNumber:263,columnNumber:21}},o.a.createElement(i.a,{label:v.parameter,type:(C=n.label,b.includes(C)?"text":"number"),placeholder:n.defaultValue,value:n.param,onChange:e=>((e,t)=>a(e.target.value,t))(e,r),draggable:"true",onDragStart:e=>e.preventDefault(),__source:{fileName:p,lineNumber:266,columnNumber:23}})),o.a.createElement("div",{className:"ChainedCommand-Item--Controls",__source:{fileName:p,lineNumber:277,columnNumber:19}},o.a.createElement("input",{type:"button",className:"circular remove",title:Object(c.a)("Remove Command"),disabled:1===e.length,onClick:()=>t(r),__source:{fileName:p,lineNumber:278,columnNumber:21}}),o.a.createElement("input",{type:"button",className:"circular add",title:Object(c.a)("Add Command"),onClick:()=>s(h),__source:{fileName:p,lineNumber:285,columnNumber:21}})));var C})),o.a.createElement("input",{type:"button",value:Object(c.a)("Test Chain"),onClick:()=>Object(d.b)(e),__source:{fileName:p,lineNumber:296,columnNumber:11}})))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l}));var n=a(1265),i=a(2);const s=n.languages.list.map(([e,t,a])=>({key:e,value:Object(i.a)(t),local:a})),r=[{key:"ar",value:Object(i.a)("Arabic"),local:"اَلْعَرَبِيَّةُ"},{key:"bs",value:Object(i.a)("Bosnian"),local:"bosanski"},{key:"ca",value:Object(i.a)("Catalan"),local:"català"},{key:"gl",value:Object(i.a)("Galician"),local:"Galego"},{key:"he",value:Object(i.a)("Hebrew"),local:"עברית / עִבְרִית"},{key:"hi",value:Object(i.a)("Hindi"),local:"हिन्दी"},{key:"km",value:Object(i.a)("Khmer"),local:"ភាសាខ្មែរ"},{key:"lv",value:Object(i.a)("Latvian"),local:"latviešu valoda"},{key:"mk",value:Object(i.a)("Macedonian"),local:"македонски"},{key:"ms",value:Object(i.a)("Malay"),local:"Bahasa melayu"},{key:"th",value:Object(i.a)("Thai"),local:"ภาษาไทย"},{key:"ur",value:Object(i.a)("Urdu"),local:"اُردُو"},{key:"uz",value:Object(i.a)("Uzbek"),local:"o’zbek tili ўзбек тили"}],o=["de-CH","en-GB","ja-KS","nn","pt-BR"],l={"en-US":"en",nb:"no","pt-PT":"pt",sr:"sr-Cyrl","zh-CN":"zh-Hans","zh-TW":"zh-Hant",iw:"he"}},function(e,t,a){"use strict";const n=new Map;t.a=n},function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return _})),a.d(t,"c",(function(){return d}));var n=a(42),i=a(112),s=a.n(i),r=a(15),o=a.n(r),l=a(37),c=a(355),u=a(509);function m(e){return e.task?e.start?{start:e.start,end:e.due||0}:{start:e.due||0,end:e.due?e.due+1:0}:{start:e.start,end:e.end}}const d=(e,t=!1)=>{const a=t?Math.ceil:Math.floor,n=new Date(e);let i=n.getHours();return 0===i&&t&&(i=24),4*i+a(n.getMinutes()/15)},h=(e,t)=>{e.items.forEach(a=>{const n=N(e.items,a,t).sort((e,t)=>e.stacking-t.stacking);let i=0;for(;n[i]&&i===n[i].stacking;)i++;a.stacking=i,a.adjacent=n})},p=e=>{e.items.forEach(e=>{const t=new Set(e.adjacent.map(e=>e.stacking)).size;e.stackSize=t+1})},b=(e,t)=>0===t?e:b(t,e%t),g=(e,t)=>e*t/b(e,t),N=(e,t,a)=>e.filter(e=>(!!t.events||e.event.id!==t.event.id)&&("day"===a?e.startRow<t.endRow&&e.endRow>t.startRow:e.startCol<t.endCol&&e.endCol>t.startCol)),f=s()(2)((e,t,a)=>{let n=((e,t)=>(e.sort((e,t)=>{const{start:a,end:n}=m(e),{start:i,end:s}=m(t);if(a!==i)return a-i;const r=n-a,o=s-i;return r!==o?o-r:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)}),{columns:-1,maxStackSize:0,items:e.map(e=>{const{start:t,end:a}=m(e),n=d(t),i=d(a,!0);return{event:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startRow:n,endRow:i>n?i:n+1,startCol:0,endCol:0}})}))(e);return h(n,"day"),p(n),n=(e=>{const t=[...new Set(e.items.map(e=>e.stackSize))],a=t.reduce((e,t)=>t>e?t:e,-1),n=t.reduce((e,t)=>g(e,t),1),i=n/a;return{columns:n,maxStackSize:a,items:e.items.map(e=>(e.startCol=e.stacking*i,e.endCol=(e.stacking+1)*i,e))}})(n),(e=>{e.items.sort((e,t)=>t.stacking-e.stacking).forEach(t=>{t.canExpand=t.stacking!==e.maxStackSize-1&&!t.adjacent.filter(e=>e.stacking===t.stacking+1).some(e=>!1===e.canExpand)})})(n),(e=>{e.items.filter(e=>e.canExpand).sort((e,t)=>{const a=e.adjacent.filter(e=>e.canExpand).length,n=t.adjacent.filter(e=>e.canExpand).length;return a===n?e.stacking-t.stacking:n-a}).forEach(t=>{const a=e.columns/e.maxStackSize,n=t.adjacent.filter(e=>e.stacking>t.stacking),i=n.filter(e=>e.canExpand),s=n.filter(e=>!e.canExpand),r=((0===s.length?e.maxStackSize*a:s.reduce((e,t)=>t.startCol<e?t.startCol:e,1/0))-t.startCol)/((new Set(i.map(e=>e.stacking)).size+1)*a),o=Math.round(a*r-a);t.endCol+=o,t.canExpand=!1,i.forEach(e=>{e.startCol+=o,e.endCol+=o})})})(n),n});const _=s()(2)((e,t,a)=>{let i=function(e,t,a){const i=t.clone().startOf("day"),s=e=>{let{start:t,end:n}=m(e);return n===o()(n).startOf("day").valueOf()&&(n-=1),[Object(c.default)(o()(t).diff(i,"day"),0,a-1),Object(c.default)(o()(n).diff(i,"day")+1,1,a)]};let[r,d]=Object(u.a)(e,e=>{const[t,a]=s(e);return a-t>1});const h=r.sort((e,t)=>{const{start:a,end:n}=m(e),{start:i,end:s}=m(t),r=(n||l.k)-a,o=(s||l.k)-i;return r!==o?o-r:a!==i?a-i:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)}).map(e=>{const[t,a]=s(e);return{event:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startCol:t,endCol:a,startRow:0,endRow:0}});d=d.sort((e,t)=>{if(!e.id||!t.id)return e.id?-1:1;const a=n.a.isAllDayEvent(e);if(a!==n.a.isAllDayEvent(t))return a?-1:1;const{start:i,end:s}=m(e),{start:r,end:o}=m(t);if(i!==r)return i-r;const c=(s||l.k)-i,u=(o||l.k)-r;return c!==u?u-c:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)});const p=[],b=i.clone();for(;b.diff(i,"day")<a;){const e=n.a.filterEventsByPeriod(d,b,"day"),t=Object(c.default)(b.diff(i,"day"),0,a-1);p.push({events:e,adjacent:[],stacking:1/0,stackSize:-1,canExpand:!1,startCol:t,endCol:t+1,startRow:0,endRow:0,date:b.valueOf()}),b.add(1,"day")}return{rows:-1,maxStackSize:0,items:h,multiEventItems:p}}(e,t,a);return h(i,"week"),p(i),i=(e=>{const t=[...new Set(e.items.map(e=>e.stackSize))].reduce((e,t)=>t>e?t:e,0);return{rows:t,maxStackSize:t,items:e.items.map(e=>(e.startRow=e.stacking,e.endRow=e.stacking+1,e)),multiEventItems:e.multiEventItems}})(i),i=(e=>{const t=e.multiEventItems.length?e.rows+1:e.rows,a=e.multiEventItems.map(a=>{const n=N(e.items,a,"week"),i=Math.max(0,...n.map(e=>e.endRow));return{...a,startRow:i,endRow:t}});return{...e,rows:t,multiEventItems:a}})(i),i})},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=(e,t,a=!0)=>Boolean(t&&e.ctrlKey),i=(e,t,a=!0)=>Boolean(t&&e.shiftKey)},function(e,t,a){"use strict";var n=a(50),i=a(28),s=a(311),r=a(103),o=a(0),l=a.n(o),c=a(15),u=a.n(c),m=a(126),d=a(9),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryFolder.jsx";class p extends l.a.Component{constructor(...e){var t,a,n;super(...e),n=(e,t)=>{e.preventDefault(),e.altKey?this.props.historyItem.isExpanded?this.props.collapseAll():this.props.expandAll():this.props.toggle(t)},(a="handleClick")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.props.historyItem,t=e.children.reduce((e,t)=>e+t.visitCount,0),a=r.a.getWeekdayFormat("LL"),n=u()(e.visitTime).format(a);return l.a.createElement("label",{"data-parent":e.id,onClick:this.props.fullView?t=>this.handleClick(t,e.id):null,__source:{fileName:h,lineNumber:44,columnNumber:7}},!this.props.fullView&&l.a.createElement("span",{className:"expand-icon",onMouseDown:m.a,onMouseUp:t=>this.handleClick(t,e.id),dangerouslySetInnerHTML:{__html:d.rb},__source:{fileName:h,lineNumber:47,columnNumber:11}}),l.a.createElement("span",{className:"url",__source:{fileName:h,lineNumber:52,columnNumber:9}},n),!0===this.props.showBadge&&l.a.createElement("span",{className:"item-count",__source:{fileName:h,lineNumber:56,columnNumber:11}},t))}}var b=p,g=a(111),N=a(65),f=a(2),_=a(497),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryItem.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends l.a.Component{constructor(...e){super(...e),E(this,"onDragStart",e=>{const t=this.props.historyItem;var a=document.createElement("img");a.srcset="chrome://favicon/size/16@1x/"+t.url+" 1x,chrome://favicon/size/16@2x/"+t.url+" 2x",e.dataTransfer.setDragImage(a,a.width-a.width/3,a.height-a.height/3),a.remove(),Object(_.a)(e,t.url,t.title,this.props.isPrivateWindow)}),E(this,"handleMouseEnter",e=>{N.a.setStatus(e)}),E(this,"handleMouseLeave",()=>{N.a.clearStatus()})}render(){const e=this.props.historyItem,t=u()(e.visitTime),a=e.url.split("\\").pop().split("/").pop()||e.url,n=r.a.getWeekdayFormat("LL");return this.props.fullView?this.props.columns?l.a.createElement(l.a.Fragment,null,this.props.columns.map(i=>{switch(i.id){case"visitTime":return l.a.createElement("label",{key:i.id,className:"date",title:t.format(n),draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:59,columnNumber:21}},l.a.createElement("span",{__source:{fileName:v,lineNumber:65,columnNumber:23}},t.format("LTS")));case"title":return l.a.createElement("label",{key:i.id,className:"title",title:e.title?e.title:a,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:70,columnNumber:21}},l.a.createElement(g.a,{url:e.url,__source:{fileName:v,lineNumber:76,columnNumber:23}}),l.a.createElement("span",{__source:{fileName:v,lineNumber:77,columnNumber:23}},e.title?e.title:a));case"address":return l.a.createElement("label",{key:i.id,className:"url",title:e.url,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:82,columnNumber:21}},e.isBookmarked&&l.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:v,lineNumber:89,columnNumber:25}},l.a.createElement("path",{d:"M4.5,13.5v-12h7v12L8,10.7L4.5,13.5z",__source:{fileName:v,lineNumber:91,columnNumber:27}})),l.a.createElement("span",{__source:{fileName:v,lineNumber:94,columnNumber:23}},e.url));case"visitCount":return l.a.createElement("label",{key:i.id,className:"visits",draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:99,columnNumber:21}},e.visitCount>1&&l.a.createElement("span",{className:"item-count",__source:{fileName:v,lineNumber:105,columnNumber:25}},e.visitCount));default:console.warn("Unknown sorting field:",i.id)}})):null:l.a.createElement("label",{title:t.format("LTS")+"\n"+t.format(n)+"\n• "+(e.title?Object(f.a)("Title: $1",[e.title])+"\n• ":"")+Object(f.a)("Address: $1",[e.url]),onMouseEnter:this.handleMouseEnter.bind(this,e.url),onMouseLeave:this.handleMouseLeave,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:121,columnNumber:9}},l.a.createElement(g.a,{url:e.url,__source:{fileName:v,lineNumber:130,columnNumber:11}}),l.a.createElement("span",{className:"title",__source:{fileName:v,lineNumber:131,columnNumber:11}},l.a.createElement("span",{className:"time",__source:{fileName:v,lineNumber:132,columnNumber:13}},t.format("LT")),e.title?e.title:e.url),e.visitCount>1&&l.a.createElement("span",{className:"item-count",__source:{fileName:v,lineNumber:138,columnNumber:13}},e.visitCount))}}var w=C,O=a(14),y=a(6),S=a(185),T=a(17),k=a(149),A=a(74),I=a(1),D=a(319),M=a(36),P="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryTree.jsx";function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){y.a.get(I.kBookmarksConfirmOpening)&&e.length>=y.a.get(I.kBookmarksConfirmOpeningThreshold)?M.a.showConfirmOpenBookmarkDialog({urls:e,openOptions:{inCurrent:t.inCurrent,inNewWindow:t.inNewWindow,inBackground:t.inBackground,incognito:t.incognito}}):O.a.openUrls(Object(D.a)(e),t)}class j extends l.a.PureComponent{constructor(...e){super(...e),x(this,"refTreeList",l.a.createRef()),x(this,"_isPrivateWindow",T.a.isIncognito()),x(this,"mapObject",(e,t)=>Object.keys(e).map(a=>t(a,e[a]))),x(this,"state",{showBadge:y.a.get(I.kPanelsShowFolderBadge)}),x(this,"_onBadgeChanged",(e,t)=>{this.setState({showBadge:Boolean(t)})}),x(this,"hasChildren",e=>!!e.children&&e.children.length>0),x(this,"isFolder",e=>!!e&&!!e.children),x(this,"unSelectAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.unSelectAll()}),x(this,"getSelectedItems",()=>{var e;const t=null===(e=this.refTreeList.current)||void 0===e?void 0:e.getAllSelectedItems().map(e=>e.id);return this.getItemsByIds(t,!0)}),x(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),x(this,"getItemById",e=>{const t=function(a){for(let n=0;n<a.length;n++){let i=a[n];if(i.id===e)return i;if(i.children&&(i=t(i.children),i))return i}};return t(this.props.nodes)}),x(this,"getItemsByIds",(e,t)=>{const a=[];return e.forEach(e=>{const n=this.getItemById(e);n&&(n.children&&t?Array.prototype.push.apply(a,n.children):a.push(n))}),a}),x(this,"openSelected",()=>{L(this.getSelectedItems().map(({url:e})=>e),{inCurrent:!0,inBackground:!1})}),x(this,"openSelectedInNewTab",e=>{L(this.getSelectedItems().map(({url:e})=>e),{inCurrent:!1,inBackground:e||y.a.get(I.kTabsOpenNewInBackground)})}),x(this,"openSelectedInNewWindow",e=>{L(this.getSelectedItems().map(({url:e})=>e),{inNewWindow:!0,incognito:e})}),x(this,"copy",(e,t)=>{const a=this.getItemsByIds(t,!0).map(e=>e.url);e.clipboardData.setData("text/plain",a.join("\n")),e.clipboardData.setData("text/uri-list",a),e.preventDefault()}),x(this,"delete",e=>{const t=[];return this.getItemsByIds(e,this.props.historyFilter&&this.props.historyFilter.text.length>0).forEach(e=>{this.isFolder(e)?t.push({isFolder:!0,at:u()(e.id)}):t.push({isFolder:!1,url:e.url,at:e.visitTime})}),s.a.deleteHistoryPromise(t)}),x(this,"_saveBookmarks",e=>{const t=this.getItemsByIds(e,!0).map(e=>({url:e.url,title:e.title}));n.a.createBookmarks(t,i.b.getRootNode().id)}),x(this,"handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),x(this,"expandAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAll()}),x(this,"collapseAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.collapseAll()}),x(this,"getMenuCapability",async(e,t,a)=>{const n={address:a?a.address:""};switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this.openSelectedInNewTab(!1),visible:Boolean(a),...t(e,n)};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this.openSelectedInNewTab(!0),visible:!y.a.get(I.kTabsOpenNewInBackground)&&Boolean(a),...t(e,n)};case"CONTEXT_OPEN_IN_TAB":return{handler:this.openSelected,visible:Boolean(a),...t(e,n)};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>this.openSelectedInNewWindow(!1),visible:Boolean(a),...t(e,n)};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>this.openSelectedInNewWindow(!0),visible:Boolean(a),...t(e,n)};case"CONTEXT_FILTER_BY":return{handler:()=>this.props.onSearchDomain(a.address),visible:Boolean(a)&&!this.isFolder(a),...t(e,n)};default:return{...t(e,n)}}}),x(this,"getMenuVisibility",(e,t)=>{if(t)switch(e.action){case"CONTEXT_COPY":case"CONTEXT_SAVE":case"CONTEXT_DELETE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}else switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}}),x(this,"onContextMenu",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onContextMenu(e)}),x(this,"onItemMouseDown",(e,t)=>{t.button===A.a.kCenter&&(t.preventDefault(),t.stopPropagation())}),x(this,"onItemMouseUp",(e,t)=>{t.button===A.a.kCenter&&(this.openSelectedInNewTab(!0),t.preventDefault(),t.stopPropagation())}),x(this,"onItemDoubleClick",e=>{e.button!==A.a.kCenter&&this.onItemsActivated(e,this.getSelectedItems())}),x(this,"onItemsActivated",(e,t)=>{const a=Object(k.b)(e);L(this.getItemsByIds(t.map(e=>e.id),!0).map(({url:e})=>e),{...a})}),x(this,"isValidForClipboard",()=>!0),x(this,"validateForDeletion",e=>e),x(this,"getRowComponentProps",e=>({...e,columns:this.props.columns,showBadge:this.state.showBadge})),x(this,"rowComponent",e=>{const{columns:t,node:a}=e,n=[];return this.isFolder(a)?n.push(l.a.createElement(b,{key:"history_tree_folder_"+a.id+"_"+a.visitTime,historyItem:a,toggle:this.handleExpandClick,expandAll:this.expandAll,collapseAll:this.collapseAll,showBadge:e.showBadge,fullView:this.props.fullView,__source:{fileName:P,lineNumber:356,columnNumber:9}})):n.push(l.a.createElement(w,{columns:t,key:"history_tree_item_"+a.id+"_"+a.visitTime,historyItem:a,isPrivateWindow:this._isPrivateWindow,fullView:this.props.fullView,__source:{fileName:P,lineNumber:367,columnNumber:9}})),n})}componentDidMount(){y.a.addListener(I.kPanelsShowFolderBadge,this._onBadgeChanged)}componentWillUnmount(){y.a.removeListener(I.kPanelsShowFolderBadge,this._onBadgeChanged)}render(){if(!this.props.nodes)return null;const e={name:"historylist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return(l.a.createElement(S.a,{settings:this.props.inManager?"HISTORY_MANAGER":"HISTORY_PANEL",ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,columns:this.props.columns,defaultFolderExpansion:"always",hasChildren:this.hasChildren,isFolder:this.isFolder,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onItemsActivated,onCopy:this.copy,onSave:this._saveBookmarks,menu:e,delete:this.delete,disableSelectAfterDelete:!1,enableDragAndDrop:!1,isValidForClipboard:this.isValidForClipboard,validateForDeletion:this.validateForDeletion,__source:{fileName:P,lineNumber:389,columnNumber:7}}))}}t.a=j},function(e,t,a){"use strict";var n=a(263),i=a(178),s=a(84),r=a.n(s),o=a(2),l=a(305),c=a(460);var u=a(616);var m=a(314),d=a(7),h=a(38);a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return f}));const{basicHttpAuthenticationHeader:p,concatUrl:b}=i.a;async function g(e,t){const a={foundService:!1,url:"",calendarCount:0,eventCount:0,statusMessage:""},{username:n,url:i}=e,s=i,d=await N(e,t);if(!d.continueDiscovery)return a.statusMessage=d.message,a;const{userPrincipal:g,isCalendarUrl:f}=d;if(g&&!e.url.endsWith(g))e.url=b(e.url,g);else{const a=await async function(e,t,a){const n=e&&r.a.parse(e).host||"",i=Object(h.q)(n);return new Promise((n,s)=>{const o=new XMLHttpRequest;o.open("GET",i,!0,t,a),o.setRequestHeader("Authorization",p(t,a)),o.onload=()=>{const t=r.a.parse(o.responseURL),a=r.a.parse(e);t.href===a.href?404===o.status?n({continueDiscovery:!1,redirectedUrl:""}):(o.status,n({continueDiscovery:!0,redirectedUrl:""})):n({continueDiscovery:!1,redirectedUrl:t.href})},o.onerror=()=>{n({continueDiscovery:!0,redirectedUrl:""})},o.send(null)})}(i,n,t);if(a.redirectedUrl){e.url=a.redirectedUrl;const{userPrincipal:n}=await N(e,t);n&&!e.url.endsWith(n)&&(e.url=b(e.url,n))}}const _=await async function(e,t){const{username:a,url:n}=e,i=await fetch(n,{method:"PROPFIND",headers:{"Content-Type":"text/xml;charset=UTF-8",Authorization:p(a,t),Brief:"t",Depth:"0"},body:Object(c.b)()});if(i.ok){const e=function(e){const t=Object(l.a)(e),a={calendarHomeSet:"",errorMsg:""};if(t.d_error)return a.errorMsg="Error parsing calendar HomeSet",a;if(!t.parserror){if(!t.d_multistatus)return a.errorMsg="Error parsing calendar HomeSet",a;t.d_multistatus.d_response.forEach(e=>{const{d_propstat:t}=e,{d_prop:n}=t,{c_calendarHomeSet:i}=n;if(!i)return;const s=i.d_href.content;a.calendarHomeSet=s})}return a}(await i.text());if(e.calendarHomeSet)return e.calendarHomeSet}return""}(e,t);if(!_){const n=await async function(e,t){const{username:a,url:n}=e,i=await fetch(n,{method:"PROPFIND",headers:{"Content-Type":"text/xml;charset=UTF-8",Authorization:p(a,t),Brief:"t",Depth:"1"},body:Object(c.b)()});if(i.ok){const e=await i.text();return Object(u.a)(e)}return[]}(e,t);if(n.length)return a.calendarCount=n.length,a.foundService=!0,a.url=e.url,a}if(f)a.foundService=!0,e.url=s;else{if(!_)return a.url=s,a.foundService=!1,a.statusMessage=Object(o.a)("No calendars found. Please try different URL."),a;e.url=b(e.url,_),a.foundService=!0}const v={...e,oauth2Token:"",password:t},E=await Object(m.a)(Object(c.a)(v),e.url),C=Object(u.a)(E.response);return C.length&&(a.calendarCount=C.length,a.foundService=!0,a.url=e.url),a}async function N(e,t){const{username:a,url:n}=e,i={authenticated:!1,userPrincipal:"",continueDiscovery:!1,message:"",isCalendarUrl:!1};try{const e=await fetch(n,{method:"PROPFIND",credentials:"omit",headers:{Brief:"t",Depth:"0","Content-Type":"text/xml;charset=UTF-8",Authorization:p(a,t)},body:Object(c.c)()}),{status:s,ok:r}=e;if(r)s>=200&&s<=299&&(i.authenticated=!0);else{if(401===s)return i.message=Object(o.a)("Authentication error"),i;if(404===s)return i.message=Object(o.a)("CalDAV service not found"),i.continueDiscovery=!0,i;if(405===s)return i.continueDiscovery=!0,i}const u=await e.text(),m=Object(l.a)(u);if(m.d_error||!m.d_multistatus)return i.message=Object(o.a)("Parser error"),i.continueDiscovery=!0,i;const d=function(e){let t="";const a=Object(l.a)(e);return!a.parsererror&&"d_multistatus"===a.root&&a.d_multistatus.d_response&&a.d_multistatus.d_response.forEach(e=>{var a,n;if(null==e?void 0:null===(a=e.d_propstat)||void 0===a?void 0:null===(n=a.d_prop)||void 0===n?void 0:n.d_currentUserPrincipal){const{d_href:a}=e.d_propstat.d_prop.d_currentUserPrincipal;t=a.content}}),t}(u);d&&(i.userPrincipal=d,i.continueDiscovery=!0)}catch{i.message=Object(o.a)("CalDAV service not found: $1",[e.url])}return i}async function f(e,t){const{account_type:a,username:i,url:s}=e,{urlValid:r}=await d.a.utilities.isUrlValid(s),l={url:s,calendarCount:0,eventCount:0,foundService:!1,statusMessage:""};if(!r)return{statusMessage:Object(o.a)("Invalid URL"),...l};let h;try{h="google"===a?await n.a.getAuthentication(e):{oauth2Token:"",id:"",name:"",url:s,username:"vivaldi"===a?i.toLowerCase():i,password:t}}catch(e){return Promise.resolve(l)}try{const e=await Object(m.a)(Object(c.a)(h),s),t=Object(u.a)(e.response);return{...l,foundService:!0,calendarCount:t.length}}catch(e){return{...l,statusMessage:e.statusText}}}},function(e,t,a){"use strict";var n=a(356),i=a(143),s=a.n(i),r=a(12),o=a(16);class l extends s.a{constructor(){super(r.a)}getInitialState(){return null}allHidden(){return null===this.getState()}getShowTooltip(e){return this.getState()===e}reduce(e,t){switch(t.actionType){case"URLFIELD_SET_STATE":return null;case o.a.WEBPAGEVIEW_ACTIONS:if(["focusSearchField","focusAddressField"].indexOf(t.action)>-1)return null;break;case"TOOLTIP_SET":if(!n.a.getState().isActive)return t.id}return e}}t.a=new l},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);function i(e){return Array.isArray(e)?(Array.isArray(e[1])&&(e[1]=e[1].map(e=>i(e))),Object(n.a)(...e)):e}},,function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAqUlEQVR4AWP4z4gfElbAYMNQw9AAhSkMzBgKgNIiDOxQGMXgg6mgQYVdBSgJwgx8DLkMtUiwgsEXqKCBBwGTeKP5ENBbkKEBpEAAAftBGEKC+WAFlaK4IVhBjhQCFkiCMAKCFYTKIWCELAhHyMbJgXCcHFiBk7KTsicYI6CLEgi7KIEV6KnrqauDMAJARIAQpKCWz1RQBzvkMgWGBYMjkGjADoEyjpTHJgCRpZrxxM2tswAAAABJRU5ErkJggg=="},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAZElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/X+IKHgPCyhs3vxzn+FXwq/7yIGDAt//SqA8MgF9hfa1XsQ+LgAAAABJRU5ErkJggg=="},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiAxMIBBzsKlp7AAAA6klEQVQoz42RP04CURDGf8MObmyk8QSElhtQYGdBYSgJhhvABTCEI+AFJJGaUEDiRewojKEBJWGzBXlRGQoWeKsJOJN5k5l8b/59YsJJyXBGhBJlNIlmPNnmN6TNNWGiNSomaVW0EMOUAlMY05C29/mLV4V69pDYvPedN/QqmLQUDhMARSJyQESOCGyCgjtWYJHY/gWF2AOofYuav4PC3GsR2I+MeoDcNUePQF5hmYUQR5iALAMQXexurPCp4AhxKcCb7rzwcPUSrP2uR3bc5fpWuKFEkLptFYAhVYwP+cumDAA6993nf7G5BYxPRUIY3xtuAAAAAElFTkSuQmCC"},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAbElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/Z90BRi+wFQAcSCcpoKC97CAwuGGXwm/7iMHDoYJDFicTZICAK40+w1CznHyAAAAAElFTkSuQmCC"},,,function(e,t,a){"use strict";var n=a(130),i=a(21),s=a(72),r=a(0),o=a.n(r),l=a(22),c=a(25),u=a(2),m=a(20),d=a.n(m),h=a(78),p=a(1),b=a(9),g=a(297),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\ZoomIndicator.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=[p.kAppearanceRangeButtons,p.kKeyboardTabToAll];class v extends o.a.PureComponent{constructor(...e){super(...e),f(this,"state",{editing:!1}),f(this,"setZoomLevel",(e,t,a)=>{this.props.onZoomUpdated(e,a),this.refs.editZoom&&(this.refs.editZoom.value=Math.round(100*e))}),f(this,"resetZoom",()=>{this.setZoomLevel(this.props.defaultZoomLevel),g.a.dispatchZoomUI(this.props.defaultZoomLevel)}),f(this,"updateZoomLevel",()=>{const e=parseFloat(this.props.zoom);this.setZoomLevel(e,this.props.delay)}),f(this,"zoomInStep",()=>{this.setZoomLevel(parseFloat((this.props.zoom+this.props.step).toFixed(2)))}),f(this,"zoomOutStep",()=>{this.setZoomLevel(parseFloat((this.props.zoom-this.props.step).toFixed(2)))}),f(this,"zoomHalf",()=>{this.setZoomLevel(parseFloat((this.props.zoom/2).toFixed(2)))}),f(this,"zoomDouble",()=>{this.setZoomLevel(parseFloat((2*this.props.zoom).toFixed(2)))}),f(this,"handleKeyDown",e=>{e.keyCode===s.a.KEY_LEFT?(this.zoomOutStep(),e.preventDefault()):e.keyCode===s.a.KEY_RIGHT&&(this.zoomInStep(),e.preventDefault())}),f(this,"rangeChanged",e=>{const{value:t}=e.target;this.setZoomLevel(parseFloat(t),this.state.editing,this.props.delay)}),f(this,"_onEditKeyDown",e=>{const{step:t,zoom:a}=this.props;if(e.keyCode===s.a.KEY_ESCAPE)this.setState({editing:!1});else if(e.keyCode===s.a.KEY_SUBTRACT)this.setZoomLevel(a-t,!0),e.preventDefault();else if(e.keyCode===s.a.KEY_ADD)this.setZoomLevel(a+t,!0),e.preventDefault();else if(e.keyCode===s.a.KEY_RETURN){let e=this.refs.editZoom.value/100;0!==e&&e===parseFloat(e)||(e=1),this.setZoomLevel(e)}}),f(this,"toggleEditZoom",()=>{this.props.disabled||this.setState(e=>({editing:!e.editing}),()=>{this.refs.editZoom.select()})}),f(this,"_onEditZoomBlur",()=>{this.setState({editing:!1})}),f(this,"onMouseEnter",()=>{!1!==this.props.scrolling&&document.addEventListener("wheel",this.onMouseWheel,!0)}),f(this,"onMouseLeave",()=>{!1!==this.props.scrolling&&document.removeEventListener("wheel",this.onMouseWheel,!0)}),f(this,"onMouseDown",()=>{this._activeElement=document.activeElement}),f(this,"onMouseUp",()=>{this.props.delay&&this.updateZoomLevel(),this._activeElement&&(this._activeElement.focus(),delete this._activeElement)}),f(this,"onMouseWheel",e=>{e.deltaX<0?this.zoomOutStep():e.deltaX>0?this.zoomInStep():e.deltaY>0?this.zoomOutStep():e.deltaY<0&&this.zoomInStep()}),f(this,"incrementCount",()=>{this.setZoomLevel(this.props.zoom+this.props.step)}),f(this,"decrementCount",()=>{this.setZoomLevel(this.props.zoom-this.props.step)}),f(this,"onPageZoomUpdated",e=>{const t=n.a.getActiveWebView();t&&t.setZoom(e)}),f(this,"showCustomizeMenu",(e,t)=>{const a=this.props.customizeMenu;a&&(e.persist(),e.preventDefault(),e.stopPropagation(),Object(h.a)(this.context.vivaldiWindowId,a)(e))})}render(){const e=o.a.Fragment,{customizeMenu:t,zoom:a}=this.props,n=this.props.prefValues[p.kAppearanceRangeButtons],i=this.props.disabled||(this.props.defaultZoomLevel?this.props.defaultZoomLevel===a:1===a),s=this.state.editing?o.a.createElement("input",{className:"zoom-percent",type:"number",ref:"editZoom",defaultValue:Math.round(100*a),onKeyDown:this._onEditKeyDown,onBlur:this._onEditZoomBlur,step:"1",disabled:this.props.disabled,__source:{fileName:N,lineNumber:239,columnNumber:9}}):o.a.createElement("span",{className:d()({"zoom-percent":!0,disabled:this.props.disabled}),onClick:this.toggleEditZoom,__source:{fileName:N,lineNumber:248,columnNumber:9}},`${Math.round(100*a)} %`),r=this.props.inFooter?this.props.prefValues[p.kKeyboardTabToAll]:0;return o.a.createElement("div",{onContextMenu:t?this.showCustomizeMenu:null,className:"page-zoom-controls",__source:{fileName:N,lineNumber:260,columnNumber:7}},o.a.createElement(l.a,{className:"reset-zoom",onClick:this.resetZoom,tooltip:Object(u.a)("Reset Zoom"),disabled:i,title:Object(u.a)("Reset"),tabIndex:r,__source:{fileName:N,lineNumber:262,columnNumber:9}}),!n&&o.a.createElement(e,{__source:{fileName:N,lineNumber:272,columnNumber:11}},o.a.createElement("input",{type:"range",min:this.props.minLevel,max:this.props.maxLevel,step:this.props.step,onChange:this.rangeChanged,onKeyDown:this.handleKeyDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:-1===r?this.onMouseDown:null,onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp,value:a,disabled:this.props.disabled,tabIndex:r,__source:{fileName:N,lineNumber:273,columnNumber:13}}),s),n&&o.a.createElement(e,{__source:{fileName:N,lineNumber:294,columnNumber:11}},o.a.createElement(l.a,{onClick:this.decrementCount,tooltip:Object(u.a)("Zoom Out"),disabled:this.props.disabled,image:b.pd.medium,tabIndex:r,__source:{fileName:N,lineNumber:295,columnNumber:13}}),s,o.a.createElement(l.a,{onClick:this.incrementCount,tooltip:Object(u.a)("Zoom In"),disabled:this.props.disabled,image:b.h.medium,tabIndex:r,__source:{fileName:N,lineNumber:303,columnNumber:13}})))}}f(v,"contextType",c.a),f(v,"defaultProps",{disabled:!1}),t.a=Object(i.a)(v,_)},function(e,t,a){"use strict";(function(e){var n=a(21),i=a(72),s=a(719),r=a(11),o=a(0),l=a.n(o),c=a(229),u=a(1287),m=a(86),d=a(404),h=a(721),p=a(793),b=a(515),g=a(221),N=a(16),f=a(95),_=a(180),v=a(25),E=a(17),C=a(2),w=a(20),O=a.n(w),y=a(149),S=a(303),T=a(7),k=a(800),A=a(1),I=a(236),D=a(591),M=a(355),P=a(9),x="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchField.jsx";function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let j=[];const R=Object(I.default)((e,t)=>{const a=p.a.suggest(e,t);j=Object(D.a)(j.concat(a),10)},500,{leading:!1}),B=[A.kAddressBarSearchFieldWidth,A.kAddressBarSearchInNewTab,A.kAddressBarSearchTypedHistoryEnabled,A.kAddressBarSearchKeepSelected,A.kKeyboardTabToAll];function F({disabled:e,tabIndex:t,onMouseDown:a,onClick:n}){return l.a.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:x,lineNumber:115,columnNumber:5}},l.a.createElement("div",{className:"button-toolbar",__source:{fileName:x,lineNumber:116,columnNumber:7}},l.a.createElement("button",{disabled:e,tabIndex:t,title:Object(C.a)("Show search history"),onMouseDown:a,onClick:n,dangerouslySetInnerHTML:{__html:P.me},__source:{fileName:x,lineNumber:117,columnNumber:9}})))}function U({onClick:e,tabIndex:t}){return l.a.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:x,lineNumber:132,columnNumber:5}},l.a.createElement("div",{className:"button-toolbar",__source:{fileName:x,lineNumber:133,columnNumber:7}},l.a.createElement("button",{onMouseDown:e=>e.preventDefault(),tabIndex:t,title:Object(C.a)("verb","Search"),className:"SearchField-ExecuteSearchButton",onClick:e,dangerouslySetInnerHTML:{__html:P.me},__source:{fileName:x,lineNumber:134,columnNumber:9}})))}class H extends l.a.PureComponent{constructor(...t){super(...t),L(this,"_isPasting",!1),L(this,"_nav",new k.a(this)),L(this,"_isIMEOpen",!1),L(this,"_justClosedIME",!1),L(this,"_isOnSpeedDial","speed_dial_view"===this.props.origin),L(this,"_omniDropdownRef",l.a.createRef()),L(this,"_suppressReplace",!1),L(this,"state",{dropdownSelectionIndex:-1,editText:"",typedValue:"",filteredTypedHistoryStore:[],isOmniDropdownOpen:!1,searchSuggestionStore:[],showAll:!1,searchEngineSelectItems:[],typedHistoryStore:[],currentSearchEngine:void 0,selectedItem:void 0,numberOfSelectableItems:0,isSearchEngineSelectOpen:!1,firstLaunch:m.a.getFirstLaunch(),previousSelectedEngine:m.a.getCurrentPopupEngine()}),L(this,"_onWebpageviewStoreChanged",t=>{if(t.type===N.a.WEBPAGEVIEW_ACTIONS)if("searchPasteAndGo"===t.action&&t.payload){const a=t.payload;!this._isOnSpeedDial&&e.nextTick(()=>this._pasteAndGo(a))}else"focusSearchField"===t.action&&e.nextTick(this.focusField)}),L(this,"_pasteAndGo",({openOptions:e,clipboardText:t})=>{this._search({value:t,openOptions:e})}),L(this,"_onSearchSuggestionsChanged",({suggestions:e,query:t,uid:a})=>{const{document:n}=this.context;if(n.activeElement!==this._refSearch||!j.includes(a))return;const i=e.map(e=>({id:e,url:e,type:"OMNI_RESULT_SUGGEST"}));this.state.editText&&t&&(this.state.editText.startsWith(t)||t.startsWith(this.state.editText))&&this.setState({searchSuggestionStore:i},()=>this._showDropdown())}),L(this,"_onSearchEngineStoreChanged",e=>{if(e.actionType===N.a.SEARCH_ENGINES_SET_COLLECTION&&E.a.isActive(this.context.vivaldiWindowId)||this._isOnSpeedDial&&("current"===e.type||"currentPrivate"===e.type)||!this._isOnSpeedDial&&"currentSD"===e.type)return;const t=this.props.prefValues[A.kAddressBarSearchKeepSelected],a=E.a.isIncognito(this.context.vivaldiWindowId),n=this._isOnSpeedDial?m.a.getCurrentSD(a):m.a.getCurrent(a),i=m.a.getDefault(a);let s=n;n&&(e.type&&!e.type.startsWith("default")||t||!this.state.firstLaunch&&"field"!==this.props.shouldRenderAs)||(s=i);const r=m.a.getList().map(e=>({name:e.name,icon:e.faviconUrl,shortcut:e.keyword,noPrettifying:!0,id:e.id,url:e.url}));if(!m.a.getHasCustomOrder()){[i,n].forEach(e=>{if(e){const t=r.findIndex(t=>t.id===e.id);r.unshift(r.splice(t,1)[0])}})}m.a.setPopupEngine(s),this.setState({currentSearchEngine:s,searchEngineSelectItems:r})}),L(this,"_onSearchFieldStoreChanged",()=>{const{document:e}=this.context,t=h.a.getTypedSearchHistory().map(e=>({...e,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"})),a={};if(a.typedHistoryStore=t,e.activeElement===this._refSearch){const e=h.a.getSearchText(),n=e.trim()&&t.filter(t=>t.url.toLowerCase().startsWith(e.toLowerCase()))||[];a.editText=e,a.filteredTypedHistoryStore=n}this.setState(a)}),L(this,"_onCompositionStart",()=>{this._isIMEOpen=!0}),L(this,"_onCompositionEnd",()=>{this._isIMEOpen=!1,this._justClosedIME=!0}),L(this,"_search",({value:e,openOptions:t})=>{const{document:a}=this.context;R.cancel&&R.cancel(),this._refSearch&&a.activeElement===this._refSearch&&this._refSearch.blur(),j=[],this.setState({editText:e}),d.a.setState({editText:e});let n=!t||!1!==t.inCurrent;this.props.prefValues[A.kAddressBarSearchInNewTab]&&(this._isOnSpeedDial||(n=!1));const i=e.indexOf(" "),s=e.split(" ")[0],r=m.a.getByKeyword(s);if(e=r?e.substring(i,e.length):e,r){const e=E.a.isIncognitoOrGuest(this.context.vivaldiWindowId);this._isOnSpeedDial?c.a.setDefaultForSpeedDial(r.id,e):c.a.setDefaultForSearchField(r.id,e)}const o={...t,inCurrent:n,addTypedSearchHistory:!0};e.length>0&&this.props.onSearch(e,this.state.currentSearchEngine,o)}),L(this,"onKeyDowned",t=>{this._justClosedIME=!1;const a=t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey,n=!Object(S.a)(t),{isOmniDropdownOpen:i}=this.state;switch(t.key){case"ArrowUp":return void(i&&(t.preventDefault(),t.stopPropagation()));case"ArrowDown":return void(a&&this.onKeyPressed(t));case"Tab":if(!i)return;return n&&(t.preventDefault(),t.stopPropagation(),e.nextTick(this._nav.down)),void(a&&(t.preventDefault(),t.stopPropagation(),e.nextTick(this._nav.up)));case"Escape":return void("button"!==this.props.shouldRenderAs?(t.stopPropagation(),t.preventDefault(),this.setState(e=>({editText:e.typedValue}))):this.state.isOmniDropdownOpen&&(t.stopPropagation(),t.preventDefault(),this.setState({isOmniDropdownOpen:!1})));case"Enter":return void(n||this.onKeyPressed(t))}}),L(this,"onExecuteSearchButtonClick",e=>{const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},a=Object(y.b)(t),n=this.state.selectedItem?this.state.selectedItem.url:this.state.typedValue;this._search({value:n,openOptions:a})}),L(this,"onKeyPressed",e=>{const{key:t,shiftKey:a,currentTarget:n}=e;switch(t){case"Enter":{this._justClosedIME=!1,R.cancel&&R.cancel();const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},a=Object(y.b)(t);return void this._search({value:n.value,openOptions:a})}case"ArrowDown":if(!a)return;return void(this.state.typedHistoryStore.length>0&&this.props.prefValues[A.kAddressBarSearchTypedHistoryEnabled]&&this._showDropdown({showAll:!0}));case"Tab":return void this._hideDropdown()}}),L(this,"onSearchEngineChanged",e=>{const t=this._refSearch?this._refSearch.value:"";if(this._refSearch&&""===t&&this._refSearch.focus(),t.length>0){const a=m.a.getById(e),n={addTypedSearchHistory:!0,inCurrent:this._isOnSpeedDial||!0!==this.props.prefValues[A.kAddressBarSearchInNewTab]};this.props.onSearch(t,a,n)}const a=E.a.isIncognito(this.context.vivaldiWindowId);this._isOnSpeedDial?c.a.setDefaultForSpeedDial(e,a):c.a.setDefaultForSearchField(e,a),this.setState({searchSuggestionStore:[],isSearchEngineSelectOpen:!1})}),L(this,"onTypedSearchHistoryClicked",e=>{d.a.setState({editText:e}),this.props.onSearch(e,this.state.currentSearchEngine)}),L(this,"onTypedSearchHistoryDeleted",e=>{const{url:t}=e;d.a.deleteTypedSearchHistory(t)}),L(this,"_showDropdown",(e={})=>{if(!0===this._isPasting)return;const{document:t}=this.context;let{showAll:a}=e;"boolean"!=typeof a&&(a=!1),this.setState({showAll:a}),!0!==this.state.isOmniDropdownOpen&&(this._refSearch&&t.activeElement!==this._refSearch&&this._refSearch.focus(),this.setState({isOmniDropdownOpen:!0}))}),L(this,"_hideDropdown",()=>{this.state.isOmniDropdownOpen&&this.setState({selectedItem:void 0,isOmniDropdownOpen:!1,showAll:!1,searchSuggestionStore:[]})}),L(this,"getDropdown",()=>this._omniDropdownRef.current),L(this,"setAutocompleteHighlight",(e,t)=>{this.setState({dropdownSelectionIndex:e}),t&&this.setState(e=>({editText:e.selectedItem&&e.selectedItem.url||e.editText}))}),L(this,"_esc",()=>{this._isIMEOpen||this._justClosedIME?this._justClosedIME=!1:(!0===this.state.isOmniDropdownOpen?this._hideDropdown():this.state.editText?(this.setState({typedValue:""}),d.a.setState({editText:""})):f.a.doAction("focusWebView"),this._justClosedIME=!1)}),L(this,"_onDelete",()=>{this.state.selectedItem&&this.onTypedSearchHistoryDeleted(this.state.selectedItem)}),L(this,"_onKeyboardChanged",(e,t,a,n)=>{if(t&&0===a)switch(n){case i.a.KEY_DOWN:if(this._isIMEOpen)return;!0===this.state.isOmniDropdownOpen?this._nav.down():this.setState({isSearchEngineSelectOpen:!0});break;case i.a.KEY_UP:this._isIMEOpen||this._nav.up();break;case i.a.KEY_END:this.setAutocompleteHighlight(this.state.numberOfSelectableItems-1,!0);break;case i.a.KEY_ESCAPE:"button"!==this.props.shouldRenderAs&&this._esc();break;case i.a.KEY_HOME:this.setAutocompleteHighlight(0,!0);break;case i.a.KEY_PAGE_DOWN:this._nav.pageDown();break;case i.a.KEY_PAGE_UP:this._nav.pageUp();break;case i.a.KEY_DELETE:this._onDelete()}}),L(this,"onFocus",()=>{T.a.tabsPrivate.onKeyboardChanged.addListener(this._onKeyboardChanged)}),L(this,"onBlur",e=>{const{getSelection:t}=this.context;this._hideDropdown();const a=t();a&&a.empty(),T.a.tabsPrivate.onKeyboardChanged.removeListener(this._onKeyboardChanged)}),L(this,"onMouseDown",e=>{const{document:t}=this.context;this._focusedOnMouseDown=t.activeElement}),L(this,"onMouseUp",({currentTarget:e})=>{const{document:t}=this.context;t.activeElement===e&&(this._focusedOnMouseDown!==this._refSearch&&e.selectionStart===e.selectionEnd&&e.select(),this._focusedOnMouseDown=void 0)}),L(this,"onDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),L(this,"onPaste",e=>{this._isPasting=!0,setTimeout(()=>this._isPasting=!1,5)}),L(this,"onChange",({currentTarget:{value:e}})=>{d.a.setState({editText:e});const t=e.length>0&&e.indexOf(" ")>=1?m.a.getByQuery(e):null;t&&this.setState({currentSearchEngine:t}),this.props.suggestEnabled&&e.trim()&&e.length>1?this.state.currentSearchEngine&&R(e,this.state.currentSearchEngine):this.setState({searchSuggestionStore:[]}),this.setState({dropdownSelectionIndex:-1,typedValue:e})}),L(this,"onDragStart",e=>{this._suppressReplace=!0}),L(this,"onDragOver",e=>{e.stopPropagation()}),L(this,"onDragEnter",e=>{if(e.stopPropagation(),this._suppressReplace)return;e.preventDefault();const t=e.target;t instanceof HTMLInputElement&&""!==t.value&&t.classList.add("pseudo-selected")}),L(this,"onDragLeave",e=>{if(!this._suppressReplace){const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")}}),L(this,"onDropped",e=>{if(this._suppressReplace)this._suppressReplace=!1;else{const t=e.dataTransfer.getData("text/plain");e.dataTransfer.types.length>1&&""!==t&&(e.preventDefault(),this.setState({editText:t}),d.a.setState({editText:t}));const a=e.target;a instanceof HTMLInputElement&&a.classList.remove("pseudo-selected")}}),L(this,"onToggleDropdownClicked",e=>{if(e.preventDefault(),"click"!==e.type||0===e.clientX||0===e.clientY)return this.state.isOmniDropdownOpen?void this._hideDropdown():(this._onSearchFieldStoreChanged(),void this._showDropdown({showAll:!0}))}),L(this,"onSlidebarPosition",(e,t)=>{if(this._refSearchField){const t=this._refSearchField.getBoundingClientRect();r.a.set(A.kAddressBarSearchFieldWidth,Math.floor(t.right-e))}}),L(this,"getWidth",()=>Object(M.default)(this.props.prefValues[A.kAddressBarSearchFieldWidth],175,800)),L(this,"focusField",()=>{const e=Boolean("field"===this.props.shouldRenderAs&&E.a.getVisibleUI(this.context.vivaldiWindowId).addressBar);this._refSearch&&this._isOnSpeedDial!==e&&this._refSearch.select()}),L(this,"setFocusInSearchField",()=>{this._refSearch&&this._refSearch.select()}),L(this,"onOmniDropdownItemClicked",(e,t)=>{this._search({value:e.url,openOptions:t})}),L(this,"onContextMenu",e=>{e.stopPropagation()}),L(this,"onOmniDropdownSelectedItemChange",e=>{this.setState({selectedItem:e})}),L(this,"renderDropdown",()=>{const e=[{items:this.state.showAll?this.state.typedHistoryStore:this.state.filteredTypedHistoryStore,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"},{items:this.props.suggestEnabled?this.state.searchSuggestionStore.map(e=>({...e,disableDelete:!0})):[],type:"OMNI_RESULT_SUGGEST"}];return 0===e.length?null:l.a.createElement(s.a,{hideIcons:!0,onSelectedItemChanged:this.onOmniDropdownSelectedItemChange,defaultSearchEngine:this.state.currentSearchEngine,onDeleteItem:this.onTypedSearchHistoryDeleted,onLinkItemClicked:this.onOmniDropdownItemClicked,pattern:this.state.editText,ref:this._omniDropdownRef,selectionIndex:this.state.dropdownSelectionIndex,setAutocompleteHighlight:this.setAutocompleteHighlight,items:e,__source:{fileName:x,lineNumber:906,columnNumber:7}})}),L(this,"toggleSearchEngineSelectOpen",()=>{this.setState(e=>({isSearchEngineSelectOpen:!e.isSearchEngineSelectOpen}))}),L(this,"closeSearchEngineSelect",()=>{this.setState({isSearchEngineSelectOpen:!1})})}componentDidMount(){this._onSearchEngineStoreChanged({type:"default"}),this._onSearchFieldStoreChanged(),m.a.addChangeListener(this._onSearchEngineStoreChanged),h.a.addChangeListener(this._onSearchFieldStoreChanged),b.a.addChangeListener(this._onSearchSuggestionsChanged),_.a.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){m.a.removeChangeListener(this._onSearchEngineStoreChanged),h.a.removeChangeListener(this._onSearchFieldStoreChanged),b.a.removeChangeListener(this._onSearchSuggestionsChanged),_.a.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex);const a=(this.state.showAll?this.state.typedHistoryStore.length:this.state.filteredTypedHistoryStore.length)+this.state.searchSuggestionStore.length;this._nav.setNumberOfSelectableItems(a)}render(){const e=this.state.currentSearchEngine?Object(C.a)("Search $1",[this.state.currentSearchEngine.name]):"",t=0===this.state.typedHistoryStore.length,a=Boolean(this.state.typedValue),n=!a&&this.props.prefValues[A.kAddressBarSearchTypedHistoryEnabled];return l.a.createElement("div",{ref:e=>this._refSearchField=e,className:O()(this.props.className,"iconmenu-container","SearchField"),onContextMenu:this.onContextMenu,style:{"--SearchFieldWidth":this.getWidth()},__source:{fileName:x,lineNumber:942,columnNumber:7}},"button"!==this.props.shouldRenderAs&&l.a.createElement(g.a,{className:"SearchField-SlideBar",onSlidebarPosition:this.onSlidebarPosition,offset:2,position:"left",__source:{fileName:x,lineNumber:953,columnNumber:11}}),l.a.createElement(u.a,{onItemClicked:this.onSearchEngineChanged,items:this.state.searchEngineSelectItems,isOpen:this.state.isSearchEngineSelectOpen,onClose:this.closeSearchEngineSelect,toggleOpen:this.toggleSearchEngineSelectOpen,icon:this.state.currentSearchEngine?this.state.currentSearchEngine.faviconUrl:"",useFavicon:this.props.useFavicon,__source:{fileName:x,lineNumber:961,columnNumber:9}}),l.a.createElement("input",{ref:e=>this._refSearch=e,className:"vivaldi-searchfield searchfield-input",onBlur:this.onBlur,onChange:this.onChange,autoFocus:"button"===this.props.shouldRenderAs,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDropped,onFocus:this.onFocus,onKeyDown:this.onKeyDowned,onKeyPress:this.onKeyPressed,onCompositionStart:this._onCompositionStart,onCompositionUpdate:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onPaste:this.onPaste,placeholder:e,tabIndex:this._isOnSpeedDial?0:null,type:"search",value:this.state.editText,__source:{fileName:x,lineNumber:974,columnNumber:9}}),this.state.isOmniDropdownOpen&&this.renderDropdown(),a&&l.a.createElement(U,{onClick:this.onExecuteSearchButtonClick,tabIndex:this.props.prefValues[A.kKeyboardTabToAll],__source:{fileName:x,lineNumber:1004,columnNumber:11}}),n&&l.a.createElement(F,{disabled:t,tabIndex:this.props.prefValues[A.kKeyboardTabToAll],onMouseDown:this.onToggleDropdownClicked,onClick:this.onToggleDropdownClicked,__source:{fileName:x,lineNumber:1011,columnNumber:11}}))}}L(H,"contextType",v.a),t.a=Object(n.a)(H,B)}).call(this,a(82))},,,,function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h}));var n=a(395),i=a(511),s=a(46);function r(e,t){if(!e)return!0;if(e.score&&t.score&&t.score!==e.score)return t.score>e.score;return Object(s.q)(t.url).length<Object(s.q)(e.url).length}function o(e){return/\w{1,}\.[a-z]{2}/g.test(e)}function l(e,t){if(!o(e))return!1;return new RegExp(Object(n.a)(e)+"/").test(t)}function c(e,t){let a=t.url.indexOf("://")+1;a>0&&(a+=2);const n=function(e,t){let a=t.url.indexOf("://")+1;a>0&&(a+=2);let n=t.url.toLowerCase().indexOf(e.toLowerCase());return 0!==n&&(n=t.url.substr(a).toLowerCase().indexOf(e.toLowerCase()),n>-1&&(n+=a)),n}(e,t);return 0===n||n===a||n===a+4&&"www."===t.url.substr(a,4)}function u({preferBookmarks:e,firstBookmarkItem:t,firstBookmarkNicknameItem:a,firstHistoryItem:n,firstTypedHistoryItem:s,firstBookmarkTitleItem:r,firstInternalUrlItem:o}){const l=(e?[a,t,r,s,n,o]:[n,s,t,o]).find(Boolean);return s&&n&&l===s&&(c=s.url,u=n.url,Object(i.a)(c).startsWith(Object(i.a)(u)))?n:l;var c,u}function m(e,t,a){if(0===t.length)return;const{autocompleteOnTitle:n,preferBookmarks:i}=a,{firstBookmarkIndex:s,firstBookmarkTitleIndex:m,firstHistoryIndex:d,firstTypedHistoryIndex:h,firstBookmarkNicknameIndex:p,firstInternalUrlIndex:b}=function({items:e,value:t,autocompleteOnTitle:a}){let n=-1,i=-1,s=-1,u=-1,m=-1,d=-1;for(let a=0;a<e.length;a++){const h=e[a];if("OMNI_RESULT_FOLDER_NICKNAME"!==h.type&&(h.url&&!l(t,h.url))){if(h.nickname&&h.nickname.toLowerCase().startsWith(t.toLowerCase()))return{firstBookmarkIndex:a,firstBookmarkTitleIndex:i,firstHistoryIndex:s,firstTypedHistoryIndex:u,firstBookmarkNicknameIndex:m,firstInternalUrlIndex:d};if(c(t,h))switch(h.type){case"OMNI_RESULT_HISTORY_PROMOTED":case"OMNI_RESULT_HISTORY_URL":r(e[s],h)&&(s=a);break;case"OMNI_RESULT_BOOKMARK_PROMOTED":case"OMNI_RESULT_BOOKMARK_DESCRIPTION":case"OMNI_RESULT_BOOKMARK_NICKNAME":case"OMNI_RESULT_BOOKMARK_TITLE":case"OMNI_RESULT_BOOKMARK_TITLE_EXACT":case"OMNI_RESULT_BOOKMARK_UNKNOWN":case"OMNI_RESULT_BOOKMARK_URL":case"OMNI_RESULT_BOOKMARK_URL_HOST":r(e[n],h)&&(n=a);break;case"OMNI_RESULT_TYPED_HISTORY":case"OMNI_RESULT_TYPED_HISTORY_SEARCH":r(e[u],h)&&(u=a);break;case"OMNI_RESULT_INTERNAL":-1===d&&(d=a)}if(h.type.startsWith("OMNI_RESULT_BOOKMARK")){if(h.title.toLowerCase().startsWith(t.toLowerCase())&&!o(t)){-1===i?i=a:e[i].title.length<h.title.length&&(i=a);continue}if(h.nickname&&h.nickname.toLowerCase().startsWith(t.toLowerCase())&&-1===m){m=a;continue}}}}return{firstBookmarkIndex:n,firstBookmarkTitleIndex:i,firstHistoryIndex:s,firstTypedHistoryIndex:u,firstBookmarkNicknameIndex:m,firstInternalUrlIndex:d}}({items:t,value:e,autocompleteOnTitle:n});return u({preferBookmarks:i,firstBookmarkItem:t[s],firstBookmarkNicknameItem:t[p],firstHistoryItem:t[d],firstTypedHistoryItem:t[h],firstBookmarkTitleItem:n?t[m]:void 0,firstInternalUrlItem:t[b]})}function d(e){switch(e){case"OMNI_RESULT_BOOKMARK_URL_HOST":return 200;case"OMNI_RESULT_BOOKMARK_PROMOTED":return 100;default:return 0}}function h(e,t){return(t.visitCount?t.visitCount:0)+("OMNI_RESULT_HISTORY_PROMOTED"===e?200:0)-100*(((t.url||"").match(/\//g)||[]).length-3)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a(90),s=a(2),r=a(46),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\CreateLinkModal.jsx";function l({onCreateLink:e,onCancelCreateLink:t,link:a,useAddress:l}){const c=n.useRef(),u=l?a?Object(s.a)("Edit Address"):Object(s.a)("Add Address"):a?Object(s.a)("Edit Link"):Object(s.a)("Create Link");return n.createElement(i.a,{dialogWidth:400,onRequestClose:t,__source:{fileName:o,lineNumber:37,columnNumber:5}},n.createElement("header",{className:"dialog-header",__source:{fileName:o,lineNumber:38,columnNumber:7}},n.createElement("h1",{className:"dialog-title",__source:{fileName:o,lineNumber:39,columnNumber:9}},u)),n.createElement("form",{onSubmit:()=>{e(c.current?Object(r.c)(c.current.value):"https://")},__source:{fileName:o,lineNumber:41,columnNumber:7}},n.createElement("div",{className:"dialog-content",__source:{fileName:o,lineNumber:42,columnNumber:9}},n.createElement("input",{ref:c,defaultValue:a||"https://",type:"text",autoFocus:!0,onFocus:e=>e.currentTarget.select(),__source:{fileName:o,lineNumber:43,columnNumber:11}})),n.createElement("footer",{className:"dialog-footer",__source:{fileName:o,lineNumber:51,columnNumber:9}},n.createElement("input",{type:"submit",className:"primary",value:Object(s.a)("Save Link"),__source:{fileName:o,lineNumber:52,columnNumber:11}}),n.createElement("input",{type:"button",onClick:t,value:Object(s.a)("Cancel"),__source:{fileName:o,lineNumber:53,columnNumber:11}}))))}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(15),o=a.n(r);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.a.PureComponent{constructor(...e){super(...e),l(this,"state",{remaining:o.a.duration({})}),l(this,"componentDidMount",()=>{this.nextTick()}),l(this,"componentWillUnmount",()=>{clearTimeout(this.timer)}),l(this,"nextTick",()=>{this.timer=setTimeout(this.nextTick,1e3),this.props.end.isAfter(o()())?(this.setState({remaining:o.a.duration(this.props.end.diff(o()()))}),this.props.onElapsed(!1)):(this.setState({remaining:o.a.duration(this.props.end.diff(o()()))}),this.props.onElapsed(!0))})}render(){const e=this.state.remaining;return(i.a.createElement("span",{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Countdown.jsx",lineNumber:46,columnNumber:13}},Object(s.a)(this.props.label,[e.minutes().toString().padStart(2,"0")+":"+e.seconds().toString().padStart(2,"0")])))}}t.a=c},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(2),s="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\LoggedInUserSection.jsx";function r({deviceName:e,pictureUrl:t,username:a,onLogout:r,onOpenProfilePage:o}){return n.createElement("div",{className:"setting-group-double",__source:{fileName:s,lineNumber:22,columnNumber:5}},n.createElement("div",{className:"sync-status",__source:{fileName:s,lineNumber:23,columnNumber:7}},n.createElement("div",{className:"avatar-username",__source:{fileName:s,lineNumber:24,columnNumber:9}},n.createElement("img",{src:t||"/resources/default-avatar.png",className:"profile-picture",title:Object(i.a)("View account profile page"),onClick:o,alt:"",__source:{fileName:s,lineNumber:25,columnNumber:11}}),n.createElement("div",{className:"user-info",__source:{fileName:s,lineNumber:34,columnNumber:11}},n.createElement("p",{className:"info",__source:{fileName:s,lineNumber:35,columnNumber:13}},r&&Object(i.a)("Logged in as"),n.createElement("span",{className:"username",onClick:o,__source:{fileName:s,lineNumber:38,columnNumber:15}},a),e&&" "+Object(i.a)("on $1",[e])))),r&&n.createElement("input",{type:"button",value:Object(i.a)("Logout"),onClick:r,__source:{fileName:s,lineNumber:45,columnNumber:23}})))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),i=a(25),s=a(2),r=a(109),o=a(97),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\NotificationsEditor.jsx";function c(e){if(e%1440==0){const t=e/1440;return Object(s.a)("$1 day before","$1 days before",[t])}if(e%60==0){const t=e/60;return Object(s.a)("$1 hour before","$1 hours before",[t])}return Object(s.a)("$1 minute before","$1 minutes before",[e])}const u=[[-1,Object(s.a)("No alarm")],[0,Object(s.a)("At event time")],[5,c(5)],[10,c(10)],[15,c(15)],[30,c(30)],[45,c(45)],[60,c(60)],[120,c(120)],[1440,c(1440)],[2880,c(2880)]];function m(e){"Enter"===r.a[e.keyCode]&&e.stopPropagation()}t.b=function(e){const t=n.useContext(i.a),{document:a}=t,[r,d]=n.useState(!1);n.useEffect(()=>{if(r){const e=a.querySelectorAll(".cal-event-alarm-time");e.length&&e[e.length-1].focus(),d(!1)}},[r,a]);const h=t=>{const{event:a}=e,{value:n}=t.target,i="+"===n?0:parseInt(n),s={id:"",event_id:a.id,name:a.title,when:6e4*i};a.notifications=[...a.notifications||[],s],d(!0),e.updateEvent(a)},p=(t,a)=>{const{notifications:n}=e.event,i=parseInt(a.target.value);if(!n||isNaN(i))return;if(-1===i)return void b(t,a);const s=n.indexOf(t);-1!==s&&(n[s].when=6e4*i,e.updateEvent(e.event))},b=(t,a)=>{const{notifications:n}=e.event;if(!n)return;const i=a.target.closest(".calendar-event");if(i instanceof HTMLElement){const e=Object(o.c)(i);e.forEach((t,n)=>{t===a.target&&e[n-1]&&e[n-1].focus()})}const s=n.indexOf(t);-1!==s&&(n.splice(s,1),e.updateEvent(e.event))},{event:g}=e;return n.createElement(n.Fragment,null,e.label&&n.createElement("h2",{__source:{fileName:l,lineNumber:137,columnNumber:22}},e.label),g.notifications&&g.notifications.length>0?n.createElement(n.Fragment,null,g.notifications.map((t,a)=>{const i=t.when/6e4,r=[...u];return r.find(([e])=>e===i)||(r.push([i,c(i)]),r.sort(([e],[t])=>e-t)),n.createElement("div",{key:t.id||a,className:"edit-group",__source:{fileName:l,lineNumber:147,columnNumber:18}},n.createElement("label",{__source:{fileName:l,lineNumber:148,columnNumber:13}},n.createElement("select",{className:"cal-event-alarm-time",tabIndex:e.tabIndex,onChange:p.bind(null,t),value:i,disabled:0===r.length,__source:{fileName:l,lineNumber:149,columnNumber:15}},r.map(([e,t])=>n.createElement("option",{key:e,value:e,__source:{fileName:l,lineNumber:157,columnNumber:21}},t))),n.createElement("input",{className:"circular",onClick:b.bind(null,t),onKeyDown:m,tabIndex:e.tabIndex,type:"button",title:Object(s.a)("Remove alarm"),value:"–",__source:{fileName:l,lineNumber:159,columnNumber:15}}),n.createElement("input",{className:"circular",onClick:h,onKeyDown:m,tabIndex:e.tabIndex,type:"button",title:Object(s.a)("Add another alarm"),value:"+",__source:{fileName:l,lineNumber:168,columnNumber:15}})))})):n.createElement("div",{className:"edit-group",__source:{fileName:l,lineNumber:181,columnNumber:9}},n.createElement("label",{__source:{fileName:l,lineNumber:182,columnNumber:11}},n.createElement("select",{className:"cal-event-alarm-time",tabIndex:e.tabIndex,onChange:h,value:-1,disabled:0===u.length,__source:{fileName:l,lineNumber:183,columnNumber:13}},u.map(([e,t])=>n.createElement("option",{key:e,value:e,__source:{fileName:l,lineNumber:191,columnNumber:19}},t))))))}},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(32),s=a(65),r=a(2);function o(t,a){e.nextTick(()=>{s.a.setStatus(t,a)})}t.a=function(e,t){const[a,s]=n.useState(i.a.getCalendarState(e,t));return n.useEffect(()=>{const t=(t,a)=>{if(!(e>0&&a>0&&a!==e&&void 0!==a))switch(t){case"importCount":(()=>{for(const e of i.a.getAllImportStates()){const t=e[1],{eventsToImportCount:a,importEventState:n,importedEventsCount:i}=t;if("IMPORT_ERROR"===n)o(Object(r.a)("Import Error"));else if("IMPORTING"===n){const e=i.reduce((e,t)=>e+t,0),t=Math.round(e/a*100);e>0&&o(Object(r.a)("Imported $1 of $2 ($3%)",[e,a,t]))}}})();break;case"calendarDataReady":case"defaultCalendarChange":default:s(i.a.getCalendarState(e))}};return i.a.addChangeListener(t),()=>{i.a.removeChangeListener(t)}},[e]),a}}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(277),s=a(353),r=a(2),o=a(88),l=a.n(o),c=a(100),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TaskDueTimeEditor.jsx";t.a=function(e){const{event:t,updateEvent:a}=e,o=n.createRef(),m=n.createRef(),d=n.useRef("");n.useEffect(()=>{var e;if("date"===d.current)null===(e=m.current)||void 0===e||e.focus();else if("add"===d.current){var t;null===(t=o.current)||void 0===t||t.focus()}d.current=""},[o,m,d]);const h=n.useCallback(()=>{t.due=Object(c.e)(Date.now()),a(t),d.current="date"},[t,a]),p=n.useCallback(()=>{t.due=0,a(t),d.current="add"},[t,a]),b=Object(c.c)(t);return n.createElement(n.Fragment,null,t.task&&!t.due&&n.createElement("input",{type:"button",onClick:h,value:Object(r.a)("Add Due Time"),tabIndex:e.tabIndex,ref:o,__source:{fileName:u,lineNumber:50,columnNumber:7}}),t.task&&!!t.due&&n.createElement(n.Fragment,null,n.createElement(i.a,{className:"cal-event-date-picker",onChange:e.onDateChange,tabIndex:e.tabIndex,title:Object(r.a)("Task Due Date"),value:l.a.tz(t.due,b).format("YYYY-MM-DD"),dayInputRef:m,__source:{fileName:u,lineNumber:60,columnNumber:7}}),!t.allDay&&n.createElement(s.a,{className:"cal-event-time-picker",disabled:t.allDay,onChange:e.onTimeChange,tabIndex:e.tabIndex,step:"5",title:Object(r.a)("Task Due Time"),value:t.allDay?"00:00":l.a.tz(t.due,b).format("HH:mm"),__source:{fileName:u,lineNumber:69,columnNumber:9}}),n.createElement("input",{className:"circular",onClick:p,tabIndex:e.tabIndex,type:"button",title:Object(r.a)("Clear Due Time"),value:"x",__source:{fileName:u,lineNumber:79,columnNumber:7}})))}},,,,,function(e,t,a){"use strict";var n=a(399);t.a=function(e){if(""===e||void 0===e)return new n.b;const t=["title","url"],a={},i=e.match(/(\S+:\s*'.*')|(\S+:\s*".*")|(\S+:\s*\S+)|(\S+)/g);if(null===i)return new n.b;let s="";for(let e=0;e<i.length;e++){const n=i[e].trim();if(n.length>0){let e=!1;for(let i=0;i<t.length;i++){const r=n.toLowerCase().indexOf(t[i]+":"),o=t[i].length+1;r>-1&&(e=!0,void 0===a[t[i]]?(s=t[i],a[t[i]]=n.slice(r+o).trim()):a[t[i]]+=" "+n.slice(r+o).trim())}e||(s?a[s]=a[s]+" "+n:void 0===a.query?a.query=n:a.query+=" "+n)}}return new n.b({title:a.title||"",url:a.url||"",query:a.query||""})}},function(e,t,a){"use strict";function n(e){let t=0;if(e){const a="complete"===e.state?e.totalBytes:e.bytesReceived;if(e.startTime&&a){t=a/((e.endTime?new Date(e.endTime).getTime():Date.now())-new Date(e.startTime).getTime())*1e3}}return t}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(229),r=a(86),o=a(2),l=a(983),c=a(46),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngine.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends i.a.Component{constructor(e){super(e),m(this,"getDataUri",(e,t)=>{const a=new Image;a.onload=function(){const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight,a.getContext("2d").drawImage(this,0,0),t(a.toDataURL(e))},a.src=e}),m(this,"constructFavicon",e=>{if(e){const t=Object(c.c)(e.trim()),a=document.createElement("a");a.href=t;const n=a.protocol+"//"+a.host+"/favicon.ico";this.getDataUri(n,e=>{this.faviconUrl=e})}}),m(this,"updateFavicon",e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();if(t)return void this.constructFavicon(t)}this.faviconUrl=""}),m(this,"canCreate",()=>this.state.name.trim()&&this.state.url.trim()&&!1===this.state.nicknameTaken),m(this,"create",()=>{if(this.canCreate()){const e=r.a.getNewEngine();e.name=this.state.name,e.keyword=this.refs.newKeyword.value,e.url=Object(l.encode)(this.state.url),e.suggestUrl=this.refs.newSuggestUrl?Object(l.encode)(this.refs.newSuggestUrl.value):"",e.faviconUrl=this.faviconUrl,s.a.add(e,this.state.default),"function"==typeof this.props.onClose&&this.props.onClose()}}),m(this,"nameChange",e=>{"string"==typeof e.target.value&&this.setState({name:e.target.value})}),m(this,"defaultChange",e=>{"boolean"==typeof e.target.checked&&this.setState({default:e.target.checked})}),m(this,"urlChange",e=>{"string"==typeof e.target.value&&this.setState({url:e.target.value})}),m(this,"nicknameChange",e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();this.setState({nicknameTaken:t.length>0&&r.a.hasKeyword(t)})}}),this.state={name:this.props.name?this.props.name:"",url:this.props.url?this.props.url.replace("{searchTerms}","%s"):"",nicknameTaken:!1,default:!1},this.faviconUrl=""}componentDidMount(){this.constructFavicon(this.props.url)}render(){const e=this.state.nicknameTaken?r.a.getByKeyword(this.refs.newKeyword.value.trim()):null,t=e?e.name:"";return i.a.createElement("form",{onSubmit:this.create,__source:{fileName:u,lineNumber:135,columnNumber:7}},i.a.createElement("header",{className:"dialog-header",__source:{fileName:u,lineNumber:136,columnNumber:9}},i.a.createElement("h1",{className:"dialog-title",__source:{fileName:u,lineNumber:137,columnNumber:11}},Object(o.a)("Add Search Engine"))),i.a.createElement("div",{className:"dialog-content",__source:{fileName:u,lineNumber:140,columnNumber:9}},i.a.createElement("label",{className:"fieldset",__source:{fileName:u,lineNumber:141,columnNumber:11}},i.a.createElement("input",{className:"searchengine_url setting-single-flex",type:"text",placeholder:Object(o.a)("URL"),value:this.state.url,onChange:this.urlChange,onBlur:this.updateFavicon,__source:{fileName:u,lineNumber:142,columnNumber:13}})),i.a.createElement("label",{className:"fieldset",__source:{fileName:u,lineNumber:152,columnNumber:11}},i.a.createElement("input",{className:"setting-single-flex",type:"text",value:this.state.name,placeholder:Object(o.a)("Description"),onChange:this.nameChange,autoFocus:!0,__source:{fileName:u,lineNumber:153,columnNumber:13}}),i.a.createElement("input",{className:"searchengine_keyword setting-single-noflex",type:"text",ref:"newKeyword",placeholder:Object(o.a)("Nickname"),onChange:this.nicknameChange,__source:{fileName:u,lineNumber:162,columnNumber:13}})),this.state.nicknameTaken&&i.a.createElement("p",{className:"info",style:{textAlign:"right"},__source:{fileName:u,lineNumber:172,columnNumber:13}},Object(o.a)("Nickname in use by $1 search engine",[t])),i.a.createElement("label",{className:"fieldset",__source:{fileName:u,lineNumber:177,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.state.default,onChange:this.defaultChange,__source:{fileName:u,lineNumber:178,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:u,lineNumber:183,columnNumber:13}},Object(o.a)("Set as Default Search")))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:u,lineNumber:187,columnNumber:9}},i.a.createElement("input",{type:"submit",onClick:this.create,disabled:!this.canCreate(),value:Object(o.a)("Add"),__source:{fileName:u,lineNumber:188,columnNumber:11}}),i.a.createElement("input",{type:"button",onClick:this.props.onClose,value:Object(o.a)("Cancel"),__source:{fileName:u,lineNumber:194,columnNumber:11}})))}}var h=d,p=a(90),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngineDlg.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends i.a.Component{constructor(...e){super(...e),g(this,"state",{msg:"",shown:!0,modalShown:!1}),g(this,"handleClose",()=>{this.state.shown&&this.props.onClose(),this.setState(e=>({shown:!e.shown}))})}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}render(){return this.state.shown?i.a.createElement(p.a,{onRequestClose:this.handleClose,__source:{fileName:b,lineNumber:41,columnNumber:9}},i.a.createElement("div",{className:"dialog-addsearch",__source:{fileName:b,lineNumber:42,columnNumber:11}},i.a.createElement(h,{onClose:this.handleClose,name:this.props.name,url:this.props.url,__source:{fileName:b,lineNumber:43,columnNumber:13}}))):null}}var f=N,_=a(774),v=a(20),E=a.n(v),C="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\overlayinfobubble.jsx";function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends i.a.Component{constructor(e){super(e),w(this,"startHover",e=>{this.setState({hover:!0})}),w(this,"endHover",e=>{this.setState({hover:!1})}),w(this,"showSelf",()=>{this._timeoutID&&clearTimeout(this._timeoutID),this.setState({show:!0}),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!0)}),w(this,"hideSelf",e=>{this._timeoutID&&clearTimeout(this._timeoutID),this._timeoutID=setTimeout(this.onClose,e)}),w(this,"onClose",()=>{this.setState({show:!1,hover:!1}),this.props.onClose&&this.props.onClose(),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!1)}),w(this,"onContextMenu",e=>{this._timeoutID&&clearTimeout(this._timeoutID),this.props.onContextMenu&&this.props.onContextMenu(e)}),w(this,"show",()=>{this.showSelf(),this.hideSelf(4e3)}),this.state={hover:!1,show:!0}}componentDidMount(){this.hideSelf(4e3)}componentWillUnmount(){this._timeoutID&&clearTimeout(this._timeoutID)}render(){var e=E()({overlayinfobubble:!0,show:this.state.hover||this.state.show});return(i.a.createElement("div",{onMouseEnter:this.startHover,onMouseLeave:this.endHover,__source:{fileName:C,lineNumber:96,columnNumber:7}},i.a.createElement("div",{className:e,onContextMenu:this.onContextMenu,onClick:this.hideSelf.bind(this,0),__source:{fileName:C,lineNumber:99,columnNumber:9}},this.props.overlayText)))}}var y=O,S=a(11),T=a(6),k=a(25),A=a(78),I=a(4),D=a(1);function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends i.a.Component{constructor(e){super(e),M(this,"overlayRef",null),M(this,"overlayVisible",!0),M(this,"showSelf",()=>{this.setState({show:!0}),this.overlayRef&&this.overlayRef.show()}),M(this,"hideSelf",()=>{this.setState({show:!1,contextOpen:!1})}),M(this,"alwaysHide",()=>{S.a.set(D.kWebpagesFullScreenShowBubble,!1),this.hideSelf()}),M(this,"shouldShow",()=>!!T.a.get(D.kWebpagesFullScreenShowBubble)&&(this.state.contextOpen||this.state.show)),M(this,"onOverlayVisibilityChanged",e=>{this.overlayVisible=e}),M(this,"onContextMenu",e=>{const t=[{handler:this.hideSelf.bind(this),...Object(I.a)("Hide Fullscreen Reminder")},{handler:this.alwaysHide,...Object(I.a)("Never Show Fullscreen Reminder")}];Object(A.a)(this.context.vivaldiWindowId,t,e=>this.setState({contextOpen:e}))(e)}),this.state={contextOpen:!1,show:!0}}render(){let e=null;if(this.shouldShow()){const t=Object(o.a)("Press Escape key to exit fullscreen.");e=i.a.createElement(y,{ref:e=>this.overlayRef=e,customData:this.props.customData,onClose:this.props.closeDialog,onContextMenu:this.onContextMenu,onVisibilityChanged:this.onOverlayVisibilityChanged,overlayText:t,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\fullscreeninfowrapper.jsx",lineNumber:94,columnNumber:17}})}return e}}M(P,"contextType",k.a);var x=P,L=a(7),j=a(26),R=a(166),B=a(119),F=a(167),U=a(127),H=a(227),V=a(47),W=a(67),z=a(65),G=a(776),K=a(239),Y=a(10),$=a(8),X=a(49),Z=a(34),Q=a(58),q=a(3);const J=[["is_read",q.O.SEEN],["is_replied",q.O.ANSWERED],["is_forwarded",q.O.FORWARDED],["is_resent",void 0],["is_outgoing",void 0],["is_sent",void 0],["is_queued",void 0],["is_seen",void 0],["is_timequeued",void 0],["is_deleted",q.O.DELETED],["has_attachment",void 0],["has_image_attachment",void 0],["has_audio_attachment",void 0],["has_video_attachment",void 0],["has_zip_attachment",void 0],["is_onepart_message",void 0],["currently unused bit",void 0],["is_waiting_for_indexing",void 0],["is_newsfeed_message",void 0],["partially_fetched",void 0],["is_news_message",void 0],["allow_8bit",void 0],["is_imported",void 0],["has_priority",void 0],["has_priority_low",void 0],["has_priority_max",void 0],["is_control_message",void 0],["allow_quotestring_qp",void 0],["has_keywords",void 0],["permanently_removed",void 0],["dir_forced_ltr",void 0],["dir_forced_rtl",void 0]];var ee=a(104),te=a(495),ae=a(60),ne=a(440),ie=a(744);var se=a(125),re=a.n(se);var oe=a(777),le=a(257),ce=a(384),ue=a(216),me=a(612),de=a(456),he=a(523);async function pe(e){return new Promise(t=>{L.a.mailPrivate.readFileToBuffer(e,e=>t(new Uint8Array(e)))})}async function be(e){const{profilePath:t}=e;await $.a.importStatus.get(t)?await $.a.importStatus.update(t,e):await $.a.importStatus.add(e)}async function ge(e){T.a.get(D.kMailIsTurnedOff)&&(ee.a.log("Mail is turned off - turning it on for importing from m2"),S.a.set(D.kMailIsTurnedOff,!1),W.a.showContent("mail")),e&&"/"!==e[e.length-1]&&(e+="/");const{mailPath:t,profilePath:a}=e?{mailPath:e+"mail/",profilePath:e}:await async function(){return new Promise(e=>{L.a.importData.getProfiles(t=>{const a=t.find(e=>e.name.match(/^[OÓ]pera/i));if(a){let t=a.profilePath;t.includes("operaprefs.ini")&&(t=t.substr(0,t.indexOf("operaprefs.ini"))),"/"!==t[t.length-1]&&(t+="/");let n=a.mailPath;"/"!==n[n.length-1]&&(n+="/"),e({mailPath:n,profilePath:t})}})})}();await be({profilePath:a}),await async function(e,t){ee.a.log("importing accounts from",t);const a=H.a.getAll(),n=function(e){const t={section:/^\[(Account(s)?[0-9]+)\]$/,param:/^([^=]+?)\s*=\s*(.*?)$/,comment:/^[;#].*$/},a=new Map,n=e.split(/[\r\n]+/);let i=null;return n.forEach(e=>{const n=e.trim();if(!t.comment.test(n))if(t.param.test(n)){const e=n.split("=",2),t=e[0].toLowerCase().replace(/\s+/g,"_"),s=isNaN(e[1])?e[1]:Number(e[1]);if(i){const e={...a.get(i),[t]:s};a.set(i,e)}else a.set(t,s)}else t.section.test(n)?(i=n.substr(1,n.length-2).toLowerCase(),a.set(i,{})):0===e.length&&i?i=null:ee.a.log("... parsing accounts - ignored line:",n)}),ee.a.log("... parsing accounts - parseMap:",a),Object(ie.a)(a).filter(([e,t])=>t.account_name).map(([e,t])=>({section:e,MAIL_EMAIL:t.email,MAIL_PORT:t.incoming_port,MAIL_SERVER:t.incoming_servername,MAIL_USER:t.incoming_username,MAIL_SMTP_SERVER:t.outgoing_servername,MAIL_SMTP_PORT:t.outgoing_port,MAIL_SMTP_SOCKET_TYPE:587===t.outgoing_port?"starttls":"ssl",MAIL_SMTP_USER:t.outgoing_username,accountType:t.incoming_protocol,offline:!0,MAIL_PASSWORD:"",MAIL_SMTP_PASSWORD:""}))}(await async function(e){const t=e+"accounts.ini";return new Promise(a=>{L.a.mailPrivate.readFileToText(t,t=>{if(!t)throw new Error(`accounts.ini file not found in Opera Mail path: ${e}`);a(t)})})}(t)),i=new Map;for(const e of n)try{if(![q.J.IMAP,q.J.POP].includes(e.accountType.toUpperCase())){console.warn(`Importing accounts of type "${e.accountType}" is not supported`);continue}if(i.set(e.section,e.MAIL_EMAIL),a[e.MAIL_EMAIL])continue;const t=Object(he.a)(e,"section");await B.a.addAccount(t,[""]),Object(le.a)(t),ee.a.log("... imported account",e.MAIL_EMAIL)}catch(t){console.error(`Failed importing account ${JSON.stringify(e)}`)}be({profilePath:e,accounts:i})}(a,t),await async function(e){ee.a.log("importing contacts from",e);const t=U.a.getMailAddresses(),a=new Set(t.map(e=>e.address)),n=await async function(e){const t=e+"contacts.adr";return new Promise(a=>{L.a.mailPrivate.readFileToText(t,t=>{t||(console.warn(`contacts.adr file not found in Opera profile path: ${e}`),Y.a.runtime.lastError),a(t)})})}(e);if(!n)return void ee.a.log("... no contacts found in",e);const i=function(e){const t=e.split("#FOLDER")[0].split("#CONTACT");t.shift();const a=t.map(e=>e.replace(/\t/g,"")).map(e=>e.split(/[\r\n]+/g)).map(e=>{const t={};return e.forEach(e=>{const a=e.trim(),n=a.split("=")[0].toLowerCase(),i=a.split("=")[1];n.length&&(t[n]=i)}),t});return ee.a.log("... parsing contacts - parsed:",a),a.map(e=>{const{mail:t}=e,a=String.fromCharCode(2)+String.fromCharCode(2);return{avatarUrl:"",birthday:0,emailAddresses:t.split(a).map(e=>({emailAddress:e,id:re()(),type:""})),id:e.id,name:e.name,note:e.description,phoneNumbers:[{phoneNumber:e.phone,id:re()(),type:""}],postalAddresses:[{id:re()(),postalAddress:e.postalAddress,type:""}],separator:!1,trusted:!0,isEmpty:()=>!1,clearGenerated:()=>{}}})}(n);let s=0;for(const e of i){ee.a.log(`... importing contact ${++s}/${i.length}`);for(const t of e.emailAddresses)a.has(t.emailAddress)||F.a.newContactFromMailAddress({address:t.emailAddress,name:e.name},!1)}ee.a.log(`... compared and/or imported ${i.length} contacts`)}(a),await async function(e,t){ee.a.log("importing messages from",t);const a=await async function(e){return new Promise(t=>{L.a.mailPrivate.getFilePaths(e+"store/",t)})}(t);a.sort(),ee.a.log(`... found ${a.length} messages to import`),await async function(e,t,a){const n=K.a.adjustBatchSize.bind(void 0,25,1e3,500);let i=25;const s=await $.a.importStatus.get(e),r=s.accounts||new Map;let o=(null==s?void 0:s.currentIndex)||0;return new Promise((s,l)=>{!async function c(){const u=t.slice(o,o+i);if(0===u.length)return void s();const m=Date.now();try{await a(e,u,t.length,o,r),o+=u.length,await be({profilePath:e,currentIndex:o})}catch(e){return void l(e)}const d=Date.now();i=n(i,d-m),c()}()})}(e,a,async(e,t,a,n,i)=>{await async function(e,t,a,n,i){ee.a.log(`... importing ${n}/${a}`);const s=Date.now(),r={};for(const e of t){const t=await pe(e);await we(t,r,e,i)}try{await async function(e){const t={};for(const a in e){t[a]=new Set;for(const n in e[a]){t[a].add(n);const{folderType:i,messages:s}=e[a][n];for(const e of s){const t=Object(ue.b)(Object(ue.g)(e.raw));if(t){const{bodyParts:a,raw:n}=await ne.a.parse(e.raw,t.mimeTree);e.bodyParts=a,e.raw=n}}const r=await Object(me.b)(a,n,i,s);V.a.updateIndex(r);const{addedSles:o=[],sleUpdates:l=[]}=r,c=[];for(const e of o){const t=s.findIndex(t=>t.messageId===e.messageId&&t.sentDate===e.sentDate&&t.subject===e.subject);if(!(t>-1))throw new Error("Added sle not found in incoming batch");{c.push(e.id);const n=s[t];await Object(ce.a)(a,e.sentDate,e.id,n.raw)}}c.length>0&&await Object(de.b)(a,c);for(const e of l){const n=await Object(te.a)(e.id);if(!n)throw new Error("Updated sle not found in db");const i=s.findIndex(e=>e.messageId===n.messageId&&e.sentDate===n.sentDate&&e.subject===n.subject);if(i>-1)for(const e of n.sourceFilterIds){const r=X.a.get(e);if(!r)throw new Error(`Filter not found for filterId ${e}`);t[r.accountId]=t[r.accountId]||new Set,t[r.accountId].add(r.path),await Object(ce.a)(r.accountId,n.sentDate,n.id,s[i].raw),await Object(de.a)(a,n.id)}else console.warn("Updated sle not found in incoming batch",n.subject,n.id)}Object(G.a)(a,n,s)}}ae.a.filter(),B.a.updateThreads()}(r)}catch(e){console.error(e)}const l=Date.now();Ne+=(l-s)/1e3,fe+=t.length;const c=fe/Ne,u=new Date((a-n)/c*1e3);z.a.setStatus(Object(o.a)("Importing: $1/$2. Batch size: $3. Rate: $4/s. Remaining: $5h:$6m:$7s",[n,a,t.length,c.toFixed(1),u.getHours(),u.getMinutes(),u.getSeconds()]))}(0,t,a,n,i)}),ee.a.log("... finished importing the messages"),z.a.setStatus(Object(o.a)("Finished importing $1 messages",[a.length]),q.T)}(a,t)}let Ne=0,fe=0;async function _e(e,t){let a=X.a.getByFolderId([e,t]);return a||(a=Z.b.getDefaultFilterForPath(e,t,ve(t)),await V.a.addFilter(a,!1)),a}function ve(e){let t=q.eb;switch(e.toLowerCase()){case"archive":t=q.h;break;case"drafts":t=q.l;break;case"inbox":t=q.v;break;case"junk":case"spam":t=q.D;break;case"sent":t=q.tb;break;case"trash":t=q.xb}return t}async function Ee(e,t){const a=Q.a.getFolders();if(!a[e]||!a[e][t]){const a=ve(t),n=H.a.getAll()[e].folders,i=t.indexOf(".")>-1?".":"/",s={name:t,path:t,delimiter:i,type:a};n[a]=n[a]||[],n[a].push(s),await R.a.addFolders(e,n),ae.a.addFolders(e,n)}}function Ce(e,t,a,n){const i=ve(t);n[e]||(n[e]={}),n[e][t]||(n[e][t]={folderType:i,messages:[]}),n[e][t].messages.push(a)}async function we(e,t,a,n){const i=Object(oe.a)(e),s=H.a.getAll(),r=new Set;if(i.received){const e=i.received.match(/\bfor\s<(.+@.+\..+)>/);e&&r.add(e[1])}r.add(...i.to.map(e=>e.address)),r.add(...i.cc.map(e=>e.address));const o=Array.from(r).filter(e=>s[e]),l=new Set(i.from.map(e=>e.address)),c=Array.from(l).filter(e=>s[e]);if(0===o.length&&0===c.length){const e=a.match(/(account[0-9]+)/i);if(e){const t=e[1].toLowerCase(),a=n.get(t);a&&o.push(a)}}const u=i.operaStatus?function(e){const t={supportedFlags:[],unsupportedFlags:[]},a=e.substring(34,42);if(null==a.match(/^[A-Fa-f0-9]{8}$/))return console.error("invalid flags hex value"),t;const n=parseInt(a,16);for(let e=0;e<J.length;e++){const a=J[e],i=n&Math.pow(2,e);i&&a[1]?t.supportedFlags.push(a[1]):i&&t.unsupportedFlags.push(a[0])}return t}(i.operaStatus):{supportedFlags:[],unsupportedFlags:[]},m={to:i.to,from:i.from,cc:i.cc,inReplyTo:i.inReplyTo,replyTo:i.replyTo,subject:i.subject,sentDate:i.sentDate,messageId:i.messageId||"",listId:i.listId,references:i.references,flags:u.supportedFlags,internal:!0,raw:e};for(const e of o){let a=q.u;if(i.operaLocation){const e=i.operaLocation.split(":");2===e.length&&(a=e[0])}await Ee(e,a),await _e(e,a),Ce(e,a,m,t)}for(const e of c)await Ee(e,q.sb),await _e(e,q.sb),Ce(e,q.sb,m,t)}var Oe="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ImportDialog.jsx";class ye extends n.PureComponent{constructor(){var e,t,a;super(),a=!1,(t="_isMounted")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,this.handleClick=this.handleClick.bind(this),this.onHandleClick=this.onHandleClick.bind(this),this.handlePasswordChange=this.handlePasswordChange.bind(this),this.handleProfileChange=this.handleProfileChange.bind(this),this.handleUserProfileChange=this.handleUserProfileChange.bind(this),this.onImportStarted=this.onImportStarted.bind(this),this.onImportItemStarted=this.onImportItemStarted.bind(this),this.onImportItemEnded=this.onImportItemEnded.bind(this),this.onImportItemFailed=this.onImportItemFailed.bind(this),this.onImportEnded=this.onImportEnded.bind(this),this.state={importState:"IDLE",useDefaultLocation:!0,profilesArray:[],shown:!0,modalShown:!1,selectedIndex:0,importOptions:[],selectedProfile:"",masterPassword:"",importItemStatus:Object(j.List)()}}componentDidMount(){this._isMounted=!0,L.a.importData.onImportStarted.addListener(this.onImportStarted),L.a.importData.onImportItemStarted.addListener(this.onImportItemStarted),L.a.importData.onImportItemEnded.addListener(this.onImportItemEnded),L.a.importData.onImportItemFailed.addListener(this.onImportItemFailed),L.a.importData.onImportEnded.addListener(this.onImportEnded),L.a.importData.getProfiles(e=>{this._isMounted&&this.setState({profilesArray:e,importOptions:JSON.parse(JSON.stringify(e))})})}componentWillUnmount(){this._isMounted=!1,L.a.importData.onImportStarted.removeListener(this.onImportStarted),L.a.importData.onImportItemStarted.removeListener(this.onImportItemStarted),L.a.importData.onImportItemEnded.removeListener(this.onImportItemEnded),L.a.importData.onImportItemFailed.removeListener(this.onImportItemFailed),L.a.importData.onImportEnded.removeListener(this.onImportEnded)}handleClick(){const e=this.state.shown;this.setState(e=>({shown:!e.shown})),e&&this.props.onClose()}getStatusItems(){return this.state.importItemStatus}onHandleClick(){this.startImport()}onImportStarted(){this.setState({importState:"IMPORT_STARTED"})}onImportItemStarted(e){this.setItemState(e,"IMPORT_STARTED")}onImportItemEnded(e){this.setItemState(e,"IMPORT_COMPLETED")}onImportItemFailed(e,t){this.setItemState(e,"IMPORT_FAILED",t)}onImportEnded(e){this.setState({importState:0===e?"IMPORT_COMPLETED":"IMPORT_FAILED"})}setItemState(e,t,a){let n=this.getStatusItems();const i=n.filter(t=>t.itemName===e).first(),s={itemName:e,state:t,errorMsg:a};n=i?n.map(t=>t.itemName===e?"IMPORT_FAILED"===t.state?t:{...s}:t):n.push(s),this.setState({importItemStatus:n})}startImport(){const e=this.state.selectedIndex,t=this.state.profilesArray,a=t[e].history,n=t[e].favorites,i=t[e].passwords,s=t[e].search,r=t[e].notes,o=t[e].speeddial,l=t[e].email,c=this.state.useDefaultLocation;let u="";this.refs.userProfile&&(u=""===this.state.selectedProfile?this.refs.userProfile.value:this.state.selectedProfile);const m=Array(e.toString(),a.toString(),n.toString(),i.toString(),s.toString(),r.toString(),c.toString(),u.toString(),o.toString());L.a.importData.startImport(m,this.state.masterPassword,(e,t)=>{if("Cancel"===e)this.setState({importState:"IDLE"});else if(this.setState({importState:"IMPORT_STARTED"}),l){const e={itemName:"email",state:"IMPORT_COMPLETED"};this.setState({importItemStatus:Object(j.List)([e])}),ge(t)}})}handlePasswordChange(e){e.target instanceof HTMLInputElement&&this.setState({masterPassword:e.target.value.toString()})}handleProfileChange(e){if(e.target instanceof HTMLSelectElement){var t=parseInt(e.target.value,10),a=this.state.importOptions[t].hasDefaultInstall;this.setState({selectedIndex:t,useDefaultLocation:a})}}handleUserProfileChange(e){e.target instanceof HTMLSelectElement&&this.setState({selectedProfile:e.target.value})}_toggleDefault(e){this.setState(e=>({useDefaultLocation:!e.useDefaultLocation}))}__changeSelection(e,t){this.setState(a=>{var n=[...a.profilesArray];return n[e][t]=!n[e][t],{profilesArray:n}})}_getImportButtonText(e,t){const a=e.willShowDialogType;return this.state.useDefaultLocation||"none"===a?Object(o.a)("Start Import"):"file"===a&&"Safari"!==t?Object(o.a)("Choose a File..."):"folder"===a?Object(o.a)("Choose a Folder..."):""}_getImportItemStatus(e){const t=this.getStatusItems().filter(t=>t.itemName===e).first();if(t){if("IMPORT_FAILED"===t.state)return n.createElement("div",{className:"import-result",__source:{fileName:Oe,lineNumber:253,columnNumber:11}},n.createElement("div",{className:"import-failed",title:t.errorMsg,__source:{fileName:Oe,lineNumber:254,columnNumber:13}},Object(o.a)("ERROR")));if("IMPORT_COMPLETED"===t.state)return n.createElement("div",{className:"import-result",__source:{fileName:Oe,lineNumber:261,columnNumber:11}},n.createElement("div",{className:"import-success",__source:{fileName:Oe,lineNumber:262,columnNumber:13}},Object(o.a)("other","email"===e?Object(o.a)("Check Status Bar for progress"):"Done")))}return""}_getImportItemMarkup(e,t,a,i,s,r){return n.createElement("div",{className:"setting-single",__source:{fileName:Oe,lineNumber:276,columnNumber:7}},n.createElement("div",{className:"import-setting",__source:{fileName:Oe,lineNumber:277,columnNumber:9}},n.createElement("input",{id:t,type:"checkbox",checked:s,onChange:this.__changeSelection.bind(this,a,e),disabled:r,__source:{fileName:Oe,lineNumber:278,columnNumber:11}}),n.createElement("label",{htmlFor:t,__source:{fileName:Oe,lineNumber:283,columnNumber:11}},i)),this._getImportItemStatus(e))}render(){var e=this.state.profilesArray.map(e=>n.createElement("option",{key:e.index,value:e.index,__source:{fileName:Oe,lineNumber:294,columnNumber:9}},e.name)),t=this.state.selectedIndex,a=this.state.profilesArray[t],i=this.state.importOptions[t];if(i&&i.UserProfiles&&i.UserProfiles.length>0)var s=i.UserProfiles.map(e=>n.createElement("option",{key:e.profileName,value:e.profileName,__source:{fileName:Oe,lineNumber:308,columnNumber:11}},e.profileDisplayName));if(i){var r=Boolean(!(i.passwords||i.history||i.notes||i.search||i.speeddial||i.email));return(n.createElement(p.a,{onRequestClose:this.handleClick,__source:{fileName:Oe,lineNumber:327,columnNumber:3}},function(){const l="IMPORT_COMPLETED"===this.state.importState||"IMPORT_FAILED"===this.state.importState,c="IMPORT_STARTED"===this.state.importState;return n.createElement("div",{className:"import-data",__source:{fileName:Oe,lineNumber:333,columnNumber:5}},n.createElement("header",{className:"dialog-header",__source:{fileName:Oe,lineNumber:334,columnNumber:7}},n.createElement("h1",{className:"dialog-title",__source:{fileName:Oe,lineNumber:335,columnNumber:9}},Object(o.a)("title","Import from Applications or Files"))),n.createElement("div",{className:"dialog-content",__source:{fileName:Oe,lineNumber:338,columnNumber:7}},n.createElement("fieldset",{__source:{fileName:Oe,lineNumber:339,columnNumber:9}},n.createElement("label",{htmlFor:"browserSel",className:"from",__source:{fileName:Oe,lineNumber:340,columnNumber:11}},Object(o.a)("import","From")),n.createElement("select",{id:"browserSel",onChange:this.handleProfileChange,value:this.state.selectedIndex,disabled:c||l,autoFocus:!0,__source:{fileName:Oe,lineNumber:344,columnNumber:11}},e)),n.createElement("fieldset",{__source:{fileName:Oe,lineNumber:352,columnNumber:9}},s&&n.createElement("div",{className:"profile",__source:{fileName:Oe,lineNumber:354,columnNumber:13}},n.createElement("label",{htmlFor:"userProfile",__source:{fileName:Oe,lineNumber:355,columnNumber:15}},Object(o.a)("Chrome User Profile")),n.createElement("select",{ref:"userProfile",id:"userProfile",onChange:this.handleUserProfileChange,disabled:c,value:this.state.selectedProfile,__source:{fileName:Oe,lineNumber:356,columnNumber:15}},s)),i&&i.favorites&&this._getImportItemMarkup("favorites","f-favorites",t,Object(o.a)("Bookmarks"),!!a&&a.favorites,r||c),i.passwords&&this._getImportItemMarkup("passwords","f-passwords",t,Object(o.a)("Passwords"),!!a&&a.passwords,c),i.supportsMasterPassword&&n.createElement("div",{className:"setting-single import-masterpassword",__source:{fileName:Oe,lineNumber:384,columnNumber:13}},n.createElement("label",{htmlFor:"f-masterpassword",__source:{fileName:Oe,lineNumber:385,columnNumber:15}},Object(o.a)("Master password, if needed:")),n.createElement("input",{id:"f_masterpassword",type:"password",onChange:this.handlePasswordChange,__source:{fileName:Oe,lineNumber:388,columnNumber:15}})),i.history&&this._getImportItemMarkup("history","f-history",t,Object(o.a)("History"),!!a&&a.history,c),i.notes&&this._getImportItemMarkup("notes","f-notes",t,Object(o.a)("Notes"),!!a&&a.notes,c),i.search&&this._getImportItemMarkup("search","f-search",t,Object(o.a)("Search Engines"),!!a&&a.search,c),i.speeddial&&this._getImportItemMarkup("speeddial","f-speeddial",t,Object(o.a)("Speed Dial"),!!a&&a.speeddial,c),i.email&&this._getImportItemMarkup("email","f-email",t,Object(o.a)("Mail"),!!a&&a.email,c),i&&i.supportsStandaloneImport&&n.createElement("div",{__source:{fileName:Oe,lineNumber:438,columnNumber:13}},n.createElement("div",{className:"setting-single",__source:{fileName:Oe,lineNumber:439,columnNumber:15}},n.createElement("input",{id:"f-location",type:"checkbox",checked:this.state.useDefaultLocation&&i.hasDefaultInstall,onChange:this._toggleDefault.bind(this,i),disabled:!1===i.hasDefaultInstall||c,__source:{fileName:Oe,lineNumber:440,columnNumber:17}}),n.createElement("label",{htmlFor:"f-location",__source:{fileName:Oe,lineNumber:445,columnNumber:17}},Object(o.a)("Use Default Profile Location"))))),i&&i.hasDefaultInstall&&i.profilePath.length>0&&n.createElement("div",{className:"import-pathname",__source:{fileName:Oe,lineNumber:455,columnNumber:11}},Object(o.a)("Detected Profile Path:"),n.createElement("br",{__source:{fileName:Oe,lineNumber:456,columnNumber:42}}),n.createElement("input",{type:"text",value:i.profilePath,readOnly:!0,__source:{fileName:Oe,lineNumber:457,columnNumber:13}}))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:Oe,lineNumber:463,columnNumber:7}},!0===c&&n.createElement("div",{__source:{fileName:Oe,lineNumber:465,columnNumber:11}},n.createElement("p",{className:"in-progress",__source:{fileName:Oe,lineNumber:466,columnNumber:13}},Object(o.a)("Import in progress...."))),!1===l&&!1===c&&n.createElement("div",{__source:{fileName:Oe,lineNumber:470,columnNumber:11}},n.createElement("input",{type:"button",className:"primary",onClick:this.onHandleClick,disabled:c,value:this._getImportButtonText(i),__source:{fileName:Oe,lineNumber:471,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.handleClick,disabled:c,value:Object(o.a)("Cancel"),__source:{fileName:Oe,lineNumber:476,columnNumber:13}})),!0===l&&n.createElement("div",{className:"cardview",__source:{fileName:Oe,lineNumber:483,columnNumber:11}},n.createElement("input",{type:"button",className:"primary",onClick:this.handleClick,value:Object(o.a)("Close"),__source:{fileName:Oe,lineNumber:484,columnNumber:13}}))))}.bind(this)()))}return null}}var Se=ye,Te=a(745),ke=a(84),Ae="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\javascriptDialog.jsx";function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class De extends i.a.Component{constructor(...e){super(...e),Ie(this,"_pendingAction",!0),Ie(this,"state",{promptValue:this.props.customData.defaultPromptText}),Ie(this,"handleLoadStart",e=>{e.isTopLevel&&this.onCancel()}),Ie(this,"onOk",e=>{this._pendingAction&&(e.preventDefault(),this._pendingAction=!1,this.props.customData.dialog.ok(this.state.promptValue)),this.props.onClose()}),Ie(this,"onCancel",()=>{this._pendingAction&&(this._pendingAction=!1,this.props.customData.dialog.cancel()),this.props.onClose()}),Ie(this,"handlePrompt",e=>{this.setState({promptValue:e.target.value})})}componentDidMount(){this.props.customData.webview.addEventListener("loadstart",this.handleLoadStart),"prompt"!==this.props.customData.messageType?Object(Te.a)(()=>this.refs.okButton.focus(),80):Object(Te.a)(()=>this.refs.promptInput.select(),80)}componentWillUnmount(){this.props.customData.webview.removeEventListener("loadstart",this.handleLoadStart)}render(){const e=Object(ke.parse)(this.props.customData.url).hostname,t=this.props.customData.messageType,a=e?Object(o.a)("JavaScript from “$1”",[e]):Object(o.a)("JavaScript from localhost");return i.a.createElement(p.a,{dialogWidth:400,onRequestClose:this.onCancel,ignoreClick:!0,viewMode:"dialog-javascript slide",__source:{fileName:Ae,lineNumber:82,columnNumber:7}},i.a.createElement("header",{className:"dialog-header",__source:{fileName:Ae,lineNumber:88,columnNumber:11}},i.a.createElement("h1",{className:"dialog-title",title:a,__source:{fileName:Ae,lineNumber:89,columnNumber:13}},a)),i.a.createElement("form",{onSubmit:this.onOk,__source:{fileName:Ae,lineNumber:91,columnNumber:11}},i.a.createElement("div",{className:"dialog-content",__source:{fileName:Ae,lineNumber:92,columnNumber:13}},i.a.createElement("p",{__source:{fileName:Ae,lineNumber:93,columnNumber:15}},this.props.customData.messageText),"prompt"===t&&i.a.createElement("input",{type:"text",ref:"promptInput",value:this.state.promptValue,onChange:this.handlePrompt,__source:{fileName:Ae,lineNumber:97,columnNumber:17}})),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Ae,lineNumber:104,columnNumber:13}},i.a.createElement("input",{ref:"okButton",type:"submit",value:Object(o.a)("OK"),__source:{fileName:Ae,lineNumber:105,columnNumber:15}}),"alert"!==t&&i.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:Ae,lineNumber:111,columnNumber:17}}))))}}var Me=De,Pe=a(702),xe="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\dialogRenderWrapper.jsx";t.a=function({customData:e,closeDialog:t}){switch(e.dialogtype){case"download":return i.a.createElement(_.a,{customData:e,onClose:t,__source:{fileName:xe,lineNumber:40,columnNumber:9}});case"import":return i.a.createElement(Se,{onClose:t,__source:{fileName:xe,lineNumber:47,columnNumber:9}});case"createSearch":return i.a.createElement(f,{onClose:t,name:e.Name,url:e.Url,__source:{fileName:xe,lineNumber:53,columnNumber:9}});case"javascript":return i.a.createElement("div",{className:"modal-overlay",__source:{fileName:xe,lineNumber:62,columnNumber:9}},i.a.createElement(Me,{customData:e,onClose:t,__source:{fileName:xe,lineNumber:63,columnNumber:11}}));case"fullscreen":return i.a.createElement(x,{customData:e,closeDialog:t,__source:{fileName:xe,lineNumber:71,columnNumber:9}});case"pointerLock":{const a=Object(o.a)("Press Escape key to exit the pointer lock.");return(i.a.createElement(y,{customData:e,onClose:t,overlayText:a,__source:{fileName:xe,lineNumber:79,columnNumber:9}}))}case"qrcode":return i.a.createElement("div",{className:"modal-overlay",__source:{fileName:xe,lineNumber:87,columnNumber:9}},i.a.createElement(Pe.a,{useModal:!0,data:e.url,hidePopup:t,__source:{fileName:xe,lineNumber:88,columnNumber:11}}));default:return console.error("DialogRenderWrapper.render: unknown dialogtype:"+e.dialogtype),null}}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(24),r=a(277),o=a(600),l=a(388),c=a(353),u=a(2),m=a(464),d=a(100),h=a(389),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\BasicsEditor.jsx";function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends n.Component{constructor(...e){super(...e),g(this,"createTimeHandler",e=>t=>{const{value:a}=t.currentTarget;this.props.updateEvent(Object(m.d)(this.props.event,e,a))}),g(this,"createDateHandler",e=>t=>{const{value:a}=t.currentTarget;this.props.updateEvent(Object(m.a)(this.props.event,e,a))}),g(this,"onCalendarChange",e=>{this.props.event.calendarId=e.target.value,this.props.updateEvent(this.props.event)}),g(this,"onCalendarSelected",e=>{s.a.setDefaultCalendarId(e),this.props.event.calendarId=e,this.props.updateEvent(this.props.event)})}render(){const{event:e}=this.props,{start:t,end:a}=Object(d.b)(e);return n.createElement(n.Fragment,null,n.createElement("div",{className:"edit-group large-gap",__source:{fileName:p,lineNumber:52,columnNumber:9}},n.createElement(l.a,b({...this.props,label:Object(u.a)("Title"),field:"title"},{__source:{fileName:p,lineNumber:53,columnNumber:11}}))),n.createElement("div",{className:"edit-group large-gap",__source:{fileName:p,lineNumber:61,columnNumber:9}},!e.task&&e.allDay&&n.createElement(n.Fragment,null,n.createElement(r.a,{className:"cal-event-date-picker",onChange:this.createDateHandler("start"),tabIndex:this.props.tabIndex,title:Object(u.a)("Event Start Date"),value:t.format("YYYY-MM-DD"),__source:{fileName:p,lineNumber:63,columnNumber:13}}),n.createElement("span",{__source:{fileName:p,lineNumber:70,columnNumber:13}},"-"),n.createElement(r.a,{className:"cal-event-date-picker",onChange:this.createDateHandler("end"),tabIndex:this.props.tabIndex,title:Object(u.a)("Event End Date"),value:a.format("YYYY-MM-DD"),__source:{fileName:p,lineNumber:71,columnNumber:13}})),!e.task&&!e.allDay&&n.createElement(n.Fragment,null,n.createElement(c.a,{className:"cal-event-time-picker",onChange:this.createTimeHandler("start"),tabIndex:this.props.tabIndex,step:"5",title:Object(u.a)("Event Start Time"),value:t.format("HH:mm"),__source:{fileName:p,lineNumber:80,columnNumber:13}}),n.createElement("span",{__source:{fileName:p,lineNumber:88,columnNumber:13}},"-"),n.createElement(c.a,{className:"cal-event-time-picker",onChange:this.createTimeHandler("end"),tabIndex:this.props.tabIndex,step:"5",title:Object(u.a)("Event End Time"),value:a.format("HH:mm"),__source:{fileName:p,lineNumber:89,columnNumber:13}})),e.task&&n.createElement(o.a,{event:e,updateEvent:this.props.updateEvent,onDateChange:this.createDateHandler("due"),onTimeChange:this.createTimeHandler("due"),tabIndex:this.props.tabIndex,__source:{fileName:p,lineNumber:99,columnNumber:13}})),e&&n.createElement("div",{className:"edit-group large-gap capped-width",__source:{fileName:p,lineNumber:110,columnNumber:11}},Object(h.c)(e,this.onCalendarSelected,this.props.tabIndex,"inline")))}}var f=N,_=a(186),v=a(816),E=a(25),C="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventBubble.jsx";var w=function(e){const t=n.useContext(E.a),a=n.useRef(n.createRef().current),i=n.useRef(),s=n.useCallback((e,a)=>{i.current||(i.current=requestAnimationFrame(()=>{(async function(e,t,a){var n;const i=e.current,s=t.current;if(!i||!s)return;const r=(null===(n=i.parentElement)||void 0===n?void 0:n.getBoundingClientRect())||{left:0,top:0,bottom:0},o=i.getBoundingClientRect(),l=s.getBoundingClientRect(),c=l.left-r.left,u=a.innerWidth-l.right;u>=o.width?(i.style.left=`${l.right-r.left}px`,i.style.right="auto",i.classList.remove("CalendarEventBubble--RightArrow"),i.classList.add("CalendarEventBubble--LeftArrow")):c>=o.width?(i.style.right=`${a.innerWidth-l.left}px`,i.style.left="auto",i.classList.remove("CalendarEventBubble--LeftArrow"),i.classList.add("CalendarEventBubble--RightArrow")):c>u?(i.style.left="0px",i.style.right="auto",i.classList.remove("CalendarEventBubble--LeftArrow"),i.classList.add("CalendarEventBubble--RightArrow")):(i.style.right="0px",i.style.left="auto",i.classList.remove("CalendarEventBubble--RightArrow"),i.classList.add("CalendarEventBubble--LeftArrow"));const m=i.querySelector(".CalendarEventBubble-Arrow"),d=l.top-r.top,h=a.innerHeight-l.bottom,p=(o.height-l.height)/2;if(d>p&&h>p){if(i.style.top=`${l.top-r.top-p}px`,i.style.bottom="auto",m){const e=p+l.height/2;m.style.top=`${e}px`}}else if(h<p){if(i.style.bottom="0px",i.style.top="auto",m){const e=Math.min(o.height-20,o.height-h-l.height/2+20);m.style.top=`${e}px`}}else if(i.style.top="0px",i.style.bottom="auto",m){const e=Math.max(20,l.top-r.top+l.height/2);m.style.top=`${e}px`}})(e,a,t).then(()=>{i.current=null})}))},[i,t]);return n.useEffect(()=>{function n(){s(a,e.eventRef)}const i=new ResizeObserver(n);let r=e.eventRef.current;for(;r&&!r.classList.contains("calendar-grid");)r=r.parentElement;return r&&r.addEventListener("scroll",n),t.addEventListener("resize",n),e.eventRef.current&&i.observe(e.eventRef.current),s(a,e.eventRef),()=>{r&&r.removeEventListener("scroll",n),e.eventRef.current&&i.unobserve(e.eventRef.current),t.removeEventListener("resize",n)}},[e.eventRef,s,t]),n.createElement("div",{className:"CalendarEventBubble",ref:a,"data-top":"225px",__source:{fileName:C,lineNumber:140,columnNumber:5}},n.createElement("div",{className:"CalendarEventBubble-Arrow",__source:{fileName:C,lineNumber:145,columnNumber:7}}),n.createElement("div",{className:"CalendarEventBubble-Inner",__source:{fileName:C,lineNumber:146,columnNumber:7}},n.createElement(v.a,{event:e.event,__source:{fileName:C,lineNumber:147,columnNumber:9}}),n.createElement("div",{className:"CalendarEventBubble-Buttons",__source:{fileName:C,lineNumber:148,columnNumber:9}},n.createElement("input",{type:"submit",value:Object(u.a)("calendar","Done"),onClick:e.saveEvent,__source:{fileName:C,lineNumber:149,columnNumber:11}}),n.createElement("input",{type:"button",value:Object(u.a)("calendar","Cancel"),onClick:e.discardChanges,__source:{fileName:C,lineNumber:154,columnNumber:11}}))))},O=a(32),y=a(42),S=a(15),T=a.n(S),k=a(38),A="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventResizer.jsx";function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D extends n.PureComponent{constructor(...e){super(...e),I(this,"state",{resizeMode:"",eventResized:"",resizeBox:{top:0,bottom:0},resizePosition:0}),I(this,"onResizeMouseDown",(e,t,a)=>{e.preventDefault(),e.stopPropagation(),document.addEventListener("mousemove",this.onResizeMouseMove),document.addEventListener("mouseup",this.onResizeMouseUp);const n=e.currentTarget.parentElement.getBoundingClientRect();this.setState({resizeMode:a,eventResized:t.id,resizeBox:{top:n.top,bottom:n.bottom},resizePosition:e.clientY})}),I(this,"onResizeMouseMove",e=>{const t=e.clientY;this.setState(e=>e.resizeMode?{resizePosition:t}:null)}),I(this,"onResizeMouseUp",e=>{document.removeEventListener("mousemove",this.onResizeMouseMove),document.removeEventListener("mouseup",this.onResizeMouseUp),this.setState(e=>{if(!e.resizeMode)return null;const t=this.props.event,{newTime:a=T()()}=this.getResizedTime(t);if("bottom"===e.resizeMode){const e=t.start;s.a.moveEvent(this.context.editor,t.id,{start:e,end:a.valueOf()})}else{const e=t.end;s.a.moveEvent(this.context.editor,t.id,{start:a.valueOf(),end:e})}return{resizeMode:"",eventResized:"",resizeBox:{top:0,bottom:0},resizePosition:0}})}),I(this,"getResizedTime",e=>{let t=0,a=0,n=0;if(this.state.resizeMode){const{top:e,bottom:i}=this.state.resizeBox,s=i-e;if(n="bottom"===this.state.resizeMode?Math.max(this.state.resizePosition-e,5):Math.max(i-this.state.resizePosition,5),n<s)t=n/s;else{a=(n-s)/((document.body.getBoundingClientRect().height-200)/24)}}let i=0;const s=6e4*this.props.stepSize;if(t){const a=e.end-e.start;i="bottom"===this.state.resizeMode?e.start+a*t:e.end-a*t}else a&&(i="bottom"===this.state.resizeMode?e.end+a*k.f:e.start-a*k.f);return i=Math.round(i/s)*s,"bottom"===this.state.resizeMode?i=Math.min(T()(e.end).endOf("day").valueOf(),i):"top"===this.state.resizeMode&&(i=Math.max(T()(e.start).startOf("day").valueOf(),i)),{newTime:T()(i),overlayHeight:n}})}render(){if(this.props.disabled||!this.props.stepSize)return n.createElement(n.Fragment,null,this.props.children);const e=this.props.event;let t,a={};if(this.state.resizeMode){const n=this.getResizedTime(e),i=n.overlayHeight,s=O.a.getCalendars().find(t=>t.id===e.calendarId);a=y.a.getCalendarColors(s),t=n.newTime,a.height=i||0,"bottom"===this.state.resizeMode?a.top=0:"top"===this.state.resizeMode&&(a.bottom=0)}return(n.createElement(n.Fragment,null,n.createElement("div",{onMouseDown:t=>this.onResizeMouseDown(t,e,"top"),className:"calendar-event-resizer",__source:{fileName:A,lineNumber:178,columnNumber:9}}),this.props.children,n.createElement("div",{className:"calendar-event-resizer",onMouseDown:t=>this.onResizeMouseDown(t,e,"bottom"),__source:{fileName:A,lineNumber:183,columnNumber:9}}),this.state.resizeMode&&n.createElement("div",{className:"calendar-event-resize-overlay",style:a,__source:{fileName:A,lineNumber:188,columnNumber:11}},t?t.format("LT"):"")))}}I(D,"contextType",_.a);var M=D,P=a(14),x=a(9),L="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\DescriptionEditor.jsx";function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class R extends n.Component{render(){const{event:e}=this.props;return(n.createElement(n.Fragment,null,n.createElement("div",{className:"edit-group large-gap",__source:{fileName:L,lineNumber:17,columnNumber:9}},n.createElement(l.a,j({...this.props,label:Object(u.a)("Description"),field:"description"},{__source:{fileName:L,lineNumber:18,columnNumber:11}}))),n.createElement("div",{className:"edit-group",__source:{fileName:L,lineNumber:27,columnNumber:9}},n.createElement(l.a,j({...this.props,label:Object(u.a)("URL"),field:"url"},{__source:{fileName:L,lineNumber:28,columnNumber:11}}))),e.attachment&&e.attachment.length>0&&n.createElement("div",{className:"cal-event-attchments",__source:{fileName:L,lineNumber:38,columnNumber:9}},e.attachment.map(e=>n.createElement("div",{className:"cal-event-attachment",key:e.url,__source:{fileName:L,lineNumber:40,columnNumber:13}},n.createElement("span",{dangerouslySetInnerHTML:{__html:x.Ib.small},__source:{fileName:L,lineNumber:41,columnNumber:15}}),n.createElement("a",{onClick:()=>P.a.openURL(e.url),title:e.url,__source:{fileName:L,lineNumber:42,columnNumber:15}},e.filename||e.url))))))}}var B=R,F=a(20),U=a.n(F),H="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\EventTabs.jsx";class V extends n.PureComponent{render(){return i.a.createElement("div",{className:"cal-edit-tabs",ref:e=>{e&&!e.classList.contains("right-edge")&&requestAnimationFrame(()=>{const t=e.getBoundingClientRect().right,a=e.closest(".calendar-viewport");a&&t>a.getBoundingClientRect().right&&e.classList.add("right-edge")})},__source:{fileName:H,lineNumber:18,columnNumber:7}},this.props.tabs.map(e=>{const{id:t,label:a,icon:n}=e;return(i.a.createElement("button",{className:U()("cal-edit-tab",{selected:this.props.currentTabId===t}),dangerouslySetInnerHTML:{__html:n},key:`tab-${t}`,onClick:this.props.onSelectTab.bind(null,t),tabIndex:"-1",title:a,__source:{fileName:H,lineNumber:38,columnNumber:13}}))}))}}var W=V,z=a(817),G=a(40),K=a.n(G),Y=a(396),$="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\TaskEditor.jsx";class X extends n.Component{constructor(...e){var t,a,n;super(...e),n=(e,t)=>{this.props.event[e]=t.currentTarget.checked,this.props.event.task&&(this.props.event.invites=[]),this.props.updateEvent(this.props.event)},(a="changeField")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{event:e}=this.props;return(n.createElement(n.Fragment,null,n.createElement("div",{className:"edit-group large-gap",__source:{fileName:$,lineNumber:22,columnNumber:9}},n.createElement("label",{__source:{fileName:$,lineNumber:23,columnNumber:11}},n.createElement("input",{type:"checkbox",ref:this.props.focusRef,checked:e.task,disabled:e.task,onChange:this.changeField.bind(null,"task"),tabIndex:this.props.tabIndex,__source:{fileName:$,lineNumber:24,columnNumber:13}}),n.createElement("span",{__source:{fileName:$,lineNumber:33,columnNumber:13}},Object(u.a)("Is a Task")))),n.createElement("div",{className:"edit-group",__source:{fileName:$,lineNumber:36,columnNumber:9}},n.createElement("label",{__source:{fileName:$,lineNumber:37,columnNumber:11}},n.createElement("input",{disabled:!e.task,type:"checkbox",checked:e.complete,onChange:this.changeField.bind(null,"complete"),tabIndex:e.task?this.props.tabIndex:-1,__source:{fileName:$,lineNumber:38,columnNumber:13}}),n.createElement("span",{__source:{fileName:$,lineNumber:46,columnNumber:13}},Object(u.a)("Complete"))))))}}var Z=X,Q=a(78),q=a(109),J=a(112),ee=a.n(J),te=a(818),ae=a(217),ne=a(97);var ie=function(e,t,a,i){const s=n.useContext(E.a),[r,o]=n.useState({tabId:"basics",toFocus:""}),l=n.useRef({});l.current={currentTabState:r,tabs:e,editing:a};const c=n.useRef(!1),u=n.useRef(null),m=(e,t)=>{if(e.tabIndex<0){const t=e.tabIndex;e.tabIndex=0,e.focus(),e.tabIndex=t}else e.focus();const a=s.getSelection();if(a)if(e instanceof HTMLInputElement&&"number"===e.type)e.select();else{if(a.focusNode&&a.focusNode.childNodes[a.focusOffset]===e)return;{const n=s.document.createRange();if(!(n&&e instanceof HTMLElement))return;n.selectNodeContents(e);const i=e.hasChildNodes()?e.childNodes[0]:null;if(t&&i)try{n.setStart(i,t.start),n.setEnd(i,t.end)}catch(e){n.collapse(!1),console.error("Setting caret position failed!",e.message)}else n.collapse(!1);a.removeAllRanges(),a.addRange(n)}}},d=n.useCallback((t,a="")=>{const n=l.current.currentTabState.tabId;if(!e.get(t)||t===n)return;const i=e.get(n),r=i&&i.containerRef.current,c=s.getSelection();if(r&&r.contains(s.document.activeElement)){const e=[];if(c)for(let t=0;t<c.rangeCount;t++)e.push(c.getRangeAt(t));const t={element:s.document.activeElement,ranges:e};i&&(i.storedFocus=t)}s.document.activeElement&&s.document.activeElement.blur(),o({tabId:t,toFocus:a})},[e,s]);return n.useEffect(()=>{const e=e=>{const{tabs:t,currentTabState:a}=l.current,n=t.get(a.tabId);let i;"next"===e?(i=n&&n.index+1||0,i=i<t.size?i:0):(i=n&&n.index-1||0,i=i<0?t.size-1:i);const s=[...t.values()].find(e=>e.index===i),r="next"===e?"first":"last";d(s&&s.id||"basics",r)},a=e.bind(null,"next"),n=e.bind(null,"previous"),s=t=>{const{changeTab:a,direction:n}=(e=>{const t=q.a[e.keyCode];return"PageUp"===t||"Tab"===t&&e.altKey&&e.shiftKey?{changeTab:!0,direction:"previous"}:"PageDown"===t||"Tab"===t&&e.altKey?{changeTab:!0,direction:"next"}:{changeTab:!1,direction:"next"}})(t);a&&(t.preventDefault(),e(n))},r=e=>{const{tabs:t,currentTabState:a}=l.current;let n;t.forEach(t=>{const a=t.containerRef.current;a&&e.target instanceof HTMLElement&&a.contains(e.target)&&(n=t.id)}),n&&n!==a.tabId&&d(n)},o=i&&i[0].current,c=i&&i[1].current;o&&o.addEventListener("focusin",n),c&&c.addEventListener("focusin",a);const u=t.current;return u&&(u.addEventListener("keydown",s),u.addEventListener("focusin",r)),()=>{u&&(u.removeEventListener("keydown",s),u.removeEventListener("focusin",r)),o&&o.removeEventListener("focusin",n),c&&c.removeEventListener("focusin",a)}},[a,t,d,i]),n.useEffect(()=>{const n=a&&!1===c.current;if(c.current=a,!a)return;const o=t.current,l=s.getSelection(),d=e.get(r.tabId);if(o&&d)if(n){e.forEach(e=>e.storedFocus=null),o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});const t=d.focusRef&&d.focusRef.current;t&&m(t,u.current)}else if(i&&["first","last"].includes(r.toFocus)){let e=[];if(o instanceof HTMLElement&&(e=Object(ne.c)(o)),i&&i.length&&(e=Array.from(e).slice(1,-1)),e.length)"first"===r.toFocus?m(e[0]):m(e[e.length-1]);else{const e=d.focusRef&&d.focusRef.current;e&&m(e)}}else if(d.storedFocus){const e=d.storedFocus;e.element&&e.element.focus(),l&&(l.removeAllRanges(),e.ranges.forEach(e=>l.addRange(e)))}else if(!o.contains(s.document.activeElement)){const e=d.focusRef&&d.focusRef.current;e&&m(e)}},[a,r]),[r.tabId,e=>d(e,"first")]},se=a(1),re="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEvent.jsx";function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const le=[se.kCalendarEditMode,se.kCalendarDisplayEventIcons],ce=[["basics",Object(u.a)("Basic Event Info"),x.ib.small],["time",Object(u.a)("Date and Time"),x.yb.small],["recurrence",Object(u.a)("Recurrence"),x.od.small],["location",Object(u.a)("Location"),x.Gb.small],["description",Object(u.a)("Description"),x.w],["task",Object(u.a)("Task"),x.N.small],["participants",Object(u.a)("Type to add Participants"),x.Bc.small]],ue=e=>{const t=Object(h.b)(e),a=Object(Y.b)(e.recurrence);let n=`${e.title||""}`;return t&&(n+=` (${t})`),e.location&&(n+=`\n${e.location}`),e.description&&(n+=`\n${e.description}`),a&&(n+=`\n${a}`),n},me=ee()(10)(e=>{const t=O.a.getCalendars().find(t=>t.id===e);return y.a.getCalendarColors(t)});function de(e){["Space","Enter"].includes(q.a[e.keyCode])&&e.stopPropagation()}function he(e){const t=n.useContext(_.a),a=n.useContext(E.a),i=(e,t)=>e.length>=t?`${e.substring(0,t)}...`:e||"",r=n.useRef(new Map(ce.map((e,t)=>{const[a,i,s]=e;return[a,{id:a,label:i,icon:s,index:t,focusRef:n.createRef(),containerRef:n.createRef(),storedFocus:null}]}))),{event:o,isSelected:c,isEditing:d,isAllDay:p,isFiltering:b}=e,g=n.useRef(null),N=n.useRef(null),v=n.useRef(null),C=Object(ae.a)(le),[S,T]=ie(r.current,g,d,[N,v]),{saveEvent:k,discardChanges:A,updateEvent:I,trashEvent:D,getContextMenu:P}=Object(te.a)(o),L=r.current.get("title"),j=L&&L.focusRef||n.createRef(),R=r.current.get("time"),F=R&&R.focusRef||n.createRef(),H=""===o.id,V=C[se.kCalendarEditMode];const G=n.useCallback(()=>{H?A():D()},[A,D,H]);let $;if(d&&"popup"===V){const e=document.querySelector("#main > .inner");e&&(t.isActivePage||t.isPanel)&&($=K.a.createPortal(n.createElement(w,{event:o,eventRef:g,saveEvent:k,discardChanges:A,__source:{fileName:re,lineNumber:198,columnNumber:9}}),e))}return(n.createElement(n.Fragment,null,n.createElement(M,{event:o,disabled:d&&"popup"===V||!e.resizeStepSize,stepSize:e.resizeStepSize||0,__source:{fileName:re,lineNumber:210,columnNumber:5}},n.createElement("div",{className:U()("calendar-event",{selected:c||d,editing:d&&"inline"===V,"all-day":p,solid:"solid"===e.displayStyle,"filtered-out":o.filteredOut,"task-completed":o.task&&o.complete,compact:"compact"===t.displayDensity,"event-passed":!b&&!d&&o.end&&o.end<Date.now()}),style:o.calendarId!==O.a.getDefaultCalendarId()?me(o.calendarId):{},ref:g,onContextMenu:function(e){s.a.selectEvent(t.editor,{event:o}),Object(Q.a)(a.vivaldiWindowId,P())(e)},title:ue(o),__source:{fileName:re,lineNumber:215,columnNumber:7}},d&&"inline"===V&&n.createElement(W,{tabs:Array.from(r.current.values()),currentTabId:S,onSelectTab:T,__source:{fileName:re,lineNumber:235,columnNumber:11}}),n.createElement("div",{className:"cal-event-body",__source:{fileName:re,lineNumber:241,columnNumber:9}},d&&"inline"===V&&n.createElement(n.Fragment,null,n.createElement("span",{className:"sentry",tabIndex:"0",ref:N,__source:{fileName:re,lineNumber:246,columnNumber:13}}),Array.from(r.current.values(),e=>{const{id:t,label:a,focusRef:i}=e,s=S===t,r=s?0:-1,c={event:o,updateEvent:I,field:t,label:a,focusRef:i,tabIndex:r};let d;switch(t){case"basics":d=n.createElement(f,oe({},c,{__source:{fileName:re,lineNumber:262,columnNumber:29}}));break;case"recurrence":d=n.createElement(Y.a,oe({},c,{__source:{fileName:re,lineNumber:265,columnNumber:29}}));break;case"description":d=n.createElement(B,oe({},c,{__source:{fileName:re,lineNumber:268,columnNumber:29}}));break;case"time":d=n.createElement(m.b,oe({},c,{__source:{fileName:re,lineNumber:271,columnNumber:29}}));break;case"task":d=n.createElement(Z,oe({},c,{__source:{fileName:re,lineNumber:274,columnNumber:29}}));break;case"participants":d=n.createElement(z.a,oe({},c,{__source:{fileName:re,lineNumber:277,columnNumber:29}}));break;default:d=n.createElement("div",{className:"edit-group",__source:{fileName:re,lineNumber:281,columnNumber:21}},n.createElement(l.a,oe({},c,{__source:{fileName:re,lineNumber:282,columnNumber:23}})))}return(n.createElement("div",{key:e.id,ref:e.containerRef,className:U()("cal-event-body-edit",{selected:s}),__source:{fileName:re,lineNumber:287,columnNumber:17}},d,n.createElement("div",{className:"cal-event-body-buttons",__source:{fileName:re,lineNumber:295,columnNumber:19}},n.createElement("input",{onClick:k,onKeyDown:de,tabIndex:r,type:"submit",value:Object(u.a)("calendar","Done"),__source:{fileName:re,lineNumber:296,columnNumber:21}}),n.createElement("input",{onClick:G,onKeyDown:de,tabIndex:r,type:"button",value:H?Object(u.a)("Cancel"):Object(u.a)("verb","Delete"),__source:{fileName:re,lineNumber:303,columnNumber:21}}))))}),n.createElement("span",{className:"sentry",tabIndex:"0",ref:v,__source:{fileName:re,lineNumber:314,columnNumber:13}})),(!d||"popup"===V)&&n.createElement(n.Fragment,null,n.createElement("div",{className:"cal-event-header",__source:{fileName:re,lineNumber:320,columnNumber:13}},!p&&"transparent"===e.displayStyle&&!o.task&&n.createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",xmlns:"http://www.w3.org/2000/svg",className:"cal-event-dot",__source:{fileName:re,lineNumber:323,columnNumber:17}},n.createElement("rect",{width:"8",height:"8",rx:"3",__source:{fileName:re,lineNumber:330,columnNumber:19}})),o.task&&n.createElement("input",{type:"checkbox",checked:o.complete,onChange:function(t){const{checked:a}=t.target;e.event.complete=a,s.a.updateEvent(e.event)},onClick:e=>e.stopPropagation(),tabIndex:c?"0":"-1",__source:{fileName:re,lineNumber:335,columnNumber:17}}),!p&&!!o.start&&n.createElement("span",{className:"cal-event-time",ref:F,__source:{fileName:re,lineNumber:345,columnNumber:17}},Object(h.a)(o.start)),!p&&!o.start&&!!o.due&&n.createElement("span",{className:"cal-event-time",ref:F,__source:{fileName:re,lineNumber:351,columnNumber:17}},Object(h.a)(o.due)),Object(h.d)("title",((e,a,n)=>{switch(t.displayDensity){case"full":return e;case"compact":return i(e,a);case"minimal":return n?i(e,n):"";default:return e}})(o.title,80,80),j),C[se.kCalendarDisplayEventIcons]&&n.createElement("div",{className:"cal-event-icons",__source:{fileName:re,lineNumber:360,columnNumber:17}},o.url&&n.createElement("span",{dangerouslySetInnerHTML:{__html:x.w},__source:{fileName:re,lineNumber:362,columnNumber:21}}),o.location&&n.createElement("span",{dangerouslySetInnerHTML:{__html:x.Gb.small},__source:{fileName:re,lineNumber:365,columnNumber:21}}),!(!o.notifications||!o.notifications.length)&&n.createElement("span",{dangerouslySetInnerHTML:{__html:x.k.small},__source:{fileName:re,lineNumber:368,columnNumber:21}}),y.a.isRecurringEvent(o)&&n.createElement("span",{dangerouslySetInnerHTML:{__html:x.od.small},__source:{fileName:re,lineNumber:371,columnNumber:21}}),o.attachment&&o.attachment.length>0&&n.createElement("span",{dangerouslySetInnerHTML:{__html:x.Ib.small},__source:{fileName:re,lineNumber:374,columnNumber:21}}))),"minimal"!==t.displayDensity&&n.createElement("div",{className:"cal-event-body-content",__source:{fileName:re,lineNumber:381,columnNumber:13}},Object(h.d)("description",o.description||""),Object(h.d)("location",o.location||""),Object(h.d)("url",o.url||"")))))),$))}const pe=(e,t)=>!e.isEditing&&!t.isEditing&&(e.event===t.event&&e.isSelected===t.isSelected&&e.isAllDay===t.isAllDay&&e.isFiltering===t.isFiltering);t.a=n.memo(he,pe)},,,,,,function(e,t,a){"use strict";var n=a(24),i=a(32),s=a(2),r=a(393),o=a(7),l=a(252);function c(e,t){return e.filter(e=>!t.some(t=>t.uid===e.UID))}function u(e,t){const a=[];return t.forEach(e=>{e.recurrenceExceptions&&e.recurrenceExceptions.forEach(e=>{a.push(e.exception_event_id)})}),t.filter(t=>!e.some(e=>{const n=t.uid===e.UID,i=a.includes(t.id);return n||!t.uid&&i}))}function m(e,t){return e.filter(e=>t.some(t=>t.uid===e.UID))}async function d(e){return await fetch(e,{headers:{Accept:"text/calendar"}})}const h={probeWebCalendar:async e=>{const{url:t}=e;let a=0;const n={url:t,calendarCount:0,eventCount:0,foundService:!1,statusMessage:""},{urlValid:i}=await o.a.utilities.isUrlValid(t);if(!i)return{...n,statusMessage:Object(s.a)("Invalid URL $1",[t])};try{const e=await d(t),{status:i,statusText:o}=e;if(i>=200&&i<300){const i=await e.text();try{a=Object(r.a)(i).VEVENT.length}catch(e){return{...n,statusMessage:Object(s.a)("No Web Calendar found: $1",[t])}}return{...n,foundService:!0,eventCount:a,statusMessage:Object(s.a)("Success")}}return{...n,statusMessage:Object(s.a)("Not connected. $1",[o])}}catch(e){return{...n,statusMessage:Object(s.a)("Error $1",e.message)}}},fetchAndCreate:async e=>{const{url:t}=e;if(!t)throw"Url missing";const a={numberOfCalendarsPolled:1,numberOfChangedCalendars:0},s=await d(t);if(200!==s.status)throw`Fetch remote calendar. Status code: ${s.status}`;const o=await s.text(),p=Object(r.a)(o),b=p["X-WR-CALNAME"]||e.name,g=await h.getCalendar(e,b),{id:N}=g,f=p.VEVENT,_=i.a.getEventsPerCalendar(N),{create:v,deleteEvents:E,update:C}=function(e,t){return{create:c(e,t),deleteEvents:u(e,t),update:m(e,t)}}(f,_);return(v.length||E.length)&&(a.numberOfChangedCalendars=1),E.reduce(async(e,t)=>e.then(()=>n.a.deleteEvent(t.id)),Promise.resolve()),await Object(l.c)(v,g.id,""),await h.updateEvents(C,g.id)&&(a.numberOfChangedCalendars=1),a},getCalendar:(e,t)=>new Promise((a,s)=>{const r=i.a.getCalendars().filter(t=>t.accountId===e.id).find(e=>e.name===t);if(r)a(r);else{const i={name:t,accountId:e.id,active:!0};n.a.createCalendar(i).then(e=>{e.calendar&&a(e.calendar)})}}),updateEvents:(e,t)=>new Promise(a=>{const s=e.map(e=>Object(l.b)(e,{},t)),r=i.a.getEventsPerCalendar(t),o=s.filter(e=>r.some(t=>e.uid===t.uid&&(e.title!==t.title||(e.description||"")!==t.description||e.start!==t.start||e.end!==t.end||e.allDay!==t.allDay||e.sequence!==t.sequence||(e.recurrence?e.recurrence.toString():"")!==(t.recurrence?t.recurrence.toString():""))));r.filter(e=>o.some(t=>t.uid===e.uid)).reduce((e,t)=>{const a=o.find(e=>e.uid===t.uid);return a&&e.push(Object(l.e)(a,t)),e},[]).forEach(e=>{n.a.updateEvent(e)}),s.forEach(e=>{e.eventExceptions&&e.eventExceptions.forEach(t=>{const a=r.find(t=>t.uid===e.uid);if(a&&a.recurrenceExceptions){const{exceptionDate:e}=t.exception,{recurrenceExceptions:i}=a;!i.find(t=>t.date===e)&&e&&n.a.createException(a.id,"0",!0,e)}})}),a(o.length)})};t.a=h},function(e,t,a){"use strict";var n=a(0),i=a(40),s=a.n(i),r=a(20),o=a.n(r),l=a(74),c=a(208),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenuItem.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.PureComponent{constructor(...e){super(...e),m(this,"_handleMouseUp",e=>{e.button!==l.a.kLeft?e.stopPropagation():this.props.onItemActivated(this.props.item,e)}),m(this,"_killEvent",e=>{e.preventDefault(),e.stopPropagation()}),m(this,"_handleMouseOver",()=>{this.props.setSelected(this.props.index)}),m(this,"_getDisplayName",()=>n.createElement("span",{__source:{fileName:u,lineNumber:53,columnNumber:13}},this.props.item.name)),m(this,"_getDisplayShortcut",()=>{if(this.props.item.shortcut){const e=this.props.item.noPrettifying?this.props.item.shortcut:Object(c.b)(this.props.item.shortcut);return(n.createElement("span",{className:"shortcut",__source:{fileName:u,lineNumber:61,columnNumber:15}},e))}return null}),m(this,"_getIcon",()=>{if(this.props.item.iconSVG)return this.props.item.iconSVG;{let e;return e=this.props.item.icon?this.props.item.icon:this.props.item.url?"chrome://favicon/origin/"+this.props.item.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","<img src='"+e+"'>"}}),m(this,"_renderItem",()=>{const e=this.props.item.type||"Normal";return(n.createElement("li",{className:o()({selectedItem:this.props.isSelected}),onMouseOver:this._handleMouseOver,onMouseDown:this._killEvent,onMouseUp:this._handleMouseUp,__source:{fileName:u,lineNumber:91,columnNumber:7}},"Normal"===e&&n.createElement("a",{tabIndex:"0",__source:{fileName:u,lineNumber:98,columnNumber:11}},n.createElement("label",{className:"menu-icon",dangerouslySetInnerHTML:{__html:this._getIcon()},__source:{fileName:u,lineNumber:99,columnNumber:13}}),n.createElement("label",{className:"menu-label",__source:{fileName:u,lineNumber:101,columnNumber:13}},this._getDisplayName(),this._getDisplayShortcut())),"Checkbox"===e&&n.createElement("a",{tabIndx:"0",__source:{fileName:u,lineNumber:109,columnNumber:11}},n.createElement("label",{__source:{fileName:u,lineNumber:110,columnNumber:13}},n.createElement("span",{className:"menu-icon",__source:{fileName:u,lineNumber:111,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.item.checked,readOnly:!0,__source:{fileName:u,lineNumber:112,columnNumber:17}})),n.createElement("span",{className:"menu-label",__source:{fileName:u,lineNumber:115,columnNumber:15}},this._getDisplayName()))),"Radio"===e&&n.createElement("a",{tabIndex:"0",__source:{fileName:u,lineNumber:121,columnNumber:11}},n.createElement("label",{__source:{fileName:u,lineNumber:122,columnNumber:13}},n.createElement("span",{className:"menu-icon",__source:{fileName:u,lineNumber:123,columnNumber:15}},n.createElement("input",{className:"menu-icon",type:"radio",name:"radiomenu",checked:this.props.item.checked,readOnly:!0,__source:{fileName:u,lineNumber:124,columnNumber:17}})),n.createElement("span",{className:"menu-label",__source:{fileName:u,lineNumber:127,columnNumber:15}},this._getDisplayName())))))}),m(this,"_renderDivider",()=>n.createElement("li",{className:"divider",__source:{fileName:u,lineNumber:136,columnNumber:12}}))}UNSAFE_componentWillReceiveProps(e){if(e.isSelected&&!this.props.isSelected){const e=s.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.scrollIntoViewIfNeeded(!1)}}render(){return"Separator"===this.props.item.type?this._renderDivider():this._renderItem()}}var h=d,p=a(72),b=a(234),g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenu.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends n.PureComponent{constructor(...e){super(...e),N(this,"state",{selectedItemIndex:this.props.items.findIndex(e=>{var t;return e.id===(null===(t=this.props.selectedItem)||void 0===t?void 0:t.id)})}),N(this,"_takeFocus",e=>{e&&e.stopPropagation&&e.stopPropagation();const t=s.a.findDOMNode(this);if(t&&t instanceof HTMLElement){const e=t.querySelector(".menu .focusTrap");e&&e instanceof HTMLButtonElement&&e.focus()}}),N(this,"_onKeyboardFocusIn",()=>{const e=s.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.addEventListener("keydown",this._handleKeyboardNavigation)}),N(this,"_onKeyboardFocusOut",()=>{const e=s.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.removeEventListener("keydown",this._handleKeyboardNavigation)}),N(this,"_handleKeyboardNavigation",e=>{var t,a;switch(e.preventDefault(),e.which){case p.a.KEY_SPACE:case p.a.KEY_RETURN:const n=this.state.selectedItemIndex;n>=0&&n<=this._getMaxMenuIndex()&&this._onItemActivated(this.props.items[n],e);break;case p.a.KEY_ESCAPE:null===(t=(a=this.props).onClose)||void 0===t||t.call(a);break;case p.a.KEY_UP:this._stepSelection(!1);break;case p.a.KEY_DOWN:this._stepSelection(!0);break;default:e.stopPropagation()}}),N(this,"_stepSelection",e=>{let t=this.state.selectedItemIndex;if(0!==this.props.items.filter(e=>"Separator"!==e.type).length){do{t+=e?1:-1,t=(t+this.props.items.length)%this.props.items.length}while("Separator"===this.props.items[t].type);this._setSelected(t)}}),N(this,"_getMaxMenuIndex",()=>this.props.items.length-1),N(this,"_setSelected",e=>{"Separator"===this.props.items[e].type||e>this._getMaxMenuIndex()||this.setState({selectedItemIndex:e})}),N(this,"_onClicked",e=>{e.preventDefault(),e.stopPropagation();const t=e.nativeEvent.target;t&&t instanceof HTMLElement&&t.focus()}),N(this,"_onItemActivated",(e,t)=>{t.stopPropagation(),this.props.onItemActivated(e)}),N(this,"handleClickOutside",e=>{var t,a;null===(t=(a=this.props).onClose)||void 0===t||t.call(a)})}render(){return n.createElement("nav",{className:o()("menu",this.props.className),onMouseOver:this._takeFocus,onMouseDown:this._onClicked,onMouseUp:this._onClicked,onBlur:()=>{var e,t;return null===(e=(t=this.props).onClose)||void 0===e?void 0:e.call(t)},tabIndex:"-1",__source:{fileName:g,lineNumber:136,columnNumber:7}},n.createElement("input",{type:"text",className:"focusTrap",autoFocus:!0,onFocus:this._onKeyboardFocusIn,onBlur:this._onKeyboardFocusOut,__source:{fileName:g,lineNumber:142,columnNumber:7}}),n.createElement("ul",{__source:{fileName:g,lineNumber:149,columnNumber:9}},this.props.items.map((e,t)=>n.createElement(h,{key:t,index:t,item:e,isSelected:this.state.selectedItemIndex===t,setSelected:this._setSelected,onItemActivated:this._onItemActivated,__source:{fileName:g,lineNumber:151,columnNumber:13}}))))}}t.a=Object(b.a)(f)},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(305);function i(e){const t=Object(n.a)(e),a=[];return t.d_error||t.parsererror||!t.d_multistatus?[]:(t.d_multistatus.d_response.forEach(e=>{const{d_href:t,d_propstat:n}=e,{content:i}=t,{d_prop:s}=n,{d_displayname:r,cs_getctag:o,d_syncToken:l,d_supportedReportSet:c,c_calendarColor:u}=s,m=r?r.content:"";let d="";d=u||s["http://apple.com/ns/ical/:calendarColor"];const h=d?d[0].content:"",p={vevent:!1,vjournal:!1,vtodo:!1};if(s.c_supportedCalendarComponentSet){const{c_comp:e}=s.c_supportedCalendarComponentSet;p.vevent=e.some(e=>"VEVENT"===e.attributes._name),p.vtodo=e.some(e=>"VTODO"===e.attributes._name)}let b=!1;c&&c[0].d_supportedReport&&c[0].d_supportedReport.forEach(e=>{e.d_report.forEach(e=>{e.d_syncCollection&&(b=!0)})});const g=o?o.content:"",N=l?l.content:"",{vevent:f,vtodo:_}=p;if(f||_){const e={syncToken:decodeURIComponent(N),supportsSyncCollection:b,ctag:decodeURIComponent(g),description:m,name:decodeURIComponent(i),color:"#"===h?"":h,supportedCalendarComponent:p};a.push(e)}}),a)}},function(e,t,a){"use strict";var n=a(760),i=a(12),s=a(16);const r=new class{add(e,t,a){i.a.dispatch({actionType:s.a.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM,pageId:e,id:t,url:a})}update(e,t,a){const r=n.a.getQueue(e);r&&0!==r.get("id")&&r.get("url")===t&&i.a.dispatch({actionType:s.a.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM,pageId:e,id:r.get("id"),url:a})}remove(e,t){i.a.dispatch({actionType:s.a.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM,pageId:e,id:t})}};t.a=r},,,function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12),r=a(99);class o extends i.a{constructor(){super(s.a)}getInitialState(){return{status:"",persistentStatuses:new Map}}reduce(e,t){switch(t.actionType){case"STATUS_SET_STATUS":return Object(r.a)(e,e=>{e.status=t.status});case"STATUS_SET_PERSISTENT_STATUS":return Object(r.a)(e,e=>{e.persistentStatuses.set(t.key,t.status)});case"STATUS_CLEAR_PERSISTENT_STATUS":return Object(r.a)(e,e=>{e.persistentStatuses.delete(t.key)});case"CHROME_TABS_ACTIVATED":return Object(r.a)(e,e=>{e.status=""})}return e}}t.a=new o},,,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(16);const o=new class extends i.a{emitChangeParam(e){this.emit("change",e)}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};s.a.register(e=>{switch(e.actionType){case r.a.TAB_NEW_TAB:o.emitChangeParam({action:"newTab",url:e.url});break;case r.a.TAB_NEW_BACKGROUND_TAB:o.emitChangeParam({action:"newBackgroundTab",url:e.url,addOpenerTabId:e.addOpenerTabId});break;case r.a.TAB_CLOSE_ALL_BUT_ACTIVE_TAB:o.emitChangeParam({action:"closeAllButActiveTab"});break;case r.a.TAB_SWITCH_BACK_SETTING:o.emitChangeParam({action:"switchTabBackBySetting",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_SETTING:o.emitChangeParam({action:"switchTabForwardBySetting",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_BACK_HISTORY:o.emitChangeParam({action:"switchTabBackByHistory",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_HISTORY:o.emitChangeParam({action:"switchTabForwardByHistory",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_BACK_ORDER:o.emitChangeParam({action:"switchTabBackByOrder",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_ORDER:o.emitChangeParam({action:"switchTabForwardByOrder",maybeEvent:e.maybeEvent});break;case r.a.TAB_UNDO_RECENTLY_CLOSED:o.emitChangeParam({action:"reopenRecentlyClosed"});break;case r.a.TAB_VIEW_PAGE_SOURCE:o.emitChangeParam({action:"viewPageSource"});break;case r.a.TAB_STACK_CREATE:o.emitChangeParam({action:"stackCreate"});break;case r.a.TAB_STACK_DISSOLVE:o.emitChangeParam({action:"stackDissolve"});break;case r.a.TAB_STACK_REMOVE:o.emitChangeParam({action:"stackRemove"});break;case r.a.TAB_STACK_UNTILE:o.emitChangeParam({action:"stackUntile"});break;case r.a.TAB_STACK_TILE_GRID:o.emitChangeParam({action:"stackTileGrid"});break;case r.a.TAB_STACK_TILE_HORIZONTAL:o.emitChangeParam({action:"stackTileHorizontal"});break;case r.a.TAB_STACK_TILE_VERTICAL:o.emitChangeParam({action:"stackTileVertical"});break;case r.a.TAB_TOGGLE_THUMBNAIL:o.emitChangeParam({action:"tabThumbnail"});break;case r.a.UNLOAD_DIALOG_CLOSED:o.emitChangeParam({action:"unloadDialogClosed",proceed:e.proceed})}}),t.a=o},function(e,t,a){"use strict";a.d(t,"b",(function(){return u}));var n=a(107),i=a(0),s=a.n(i),r=a(2),o=a(3),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailServerForm.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u={Port:Object(r.a)("Port"),"Incoming Server":Object(r.a)("Incoming Server"),Username:Object(r.a)("Username"),Password:Object(r.a)("Password"),"App Password":Object(r.a)("App Password"),"Outgoing Server":Object(r.a)("Outgoing Server"),"Use App Password":Object(r.a)("Use App Password"),"Use OAuth":Object(r.a)("Use OAuth")};class m extends s.a.PureComponent{constructor(...e){super(...e),c(this,"toggleOAuth",()=>{this.props.setAccountProperty("useOAuth",!this.props.account.useOAuth)}),c(this,"onChangeEvent",e=>{const{name:t,value:a}=e.target;this.props.setAccountProperty(t,a)}),c(this,"areServersGmail",()=>{const{MAIL_SERVER:e,MAIL_SMTP_SERVER:t}=this.props.account;return[e,t].every(e=>e&&e.includes("gmail.com"))})}isImap(){return this.props.account.accountType===o.J.IMAP}render(){const{MAIL_SERVER:e,MAIL_PORT:t,MAIL_USER:a,MAIL_PASSWORD:i,MAIL_SMTP_SERVER:o,MAIL_SMTP_PORT:c,MAIL_SMTP_USER:u,MAIL_SMTP_PASSWORD:m,MAIL_SMTP_SOCKET_TYPE:d}=this.props.account;return(s.a.createElement("div",{className:"setting-group-block",__source:{fileName:l,lineNumber:68,columnNumber:7}},s.a.createElement("div",{key:"mail__imap",className:"setting-group",__source:{fileName:l,lineNumber:69,columnNumber:9}},s.a.createElement("div",{className:"setting-single setting-single-flex",__source:{fileName:l,lineNumber:70,columnNumber:11}},s.a.createElement(n.a,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SERVER",label:this.props.searchableStrings["Incoming Server"],labelImportant:!0,placeholder:"mail.vivaldi.net",isVerified:this.props.incomingVerified,hasError:this.props.showErrors&&!e,value:e||"",style:{width:"calc(75% - 6px)",flex:1},__source:{fileName:l,lineNumber:71,columnNumber:13}}),s.a.createElement(n.a,{type:"number",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_PORT",label:this.props.searchableStrings.Port,placeholder:this.isImap()?"993":"995",isVerified:this.props.incomingVerified,value:t||"",style:{width:"25%"},__source:{fileName:l,lineNumber:87,columnNumber:13}})),s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:98,columnNumber:11}},s.a.createElement("label",{className:"floating-label",disabled:!0,__source:{fileName:l,lineNumber:99,columnNumber:13}},Object(r.a)("Connection security:"),s.a.createElement("select",{name:"MAIL_SOCKET_TYPE",value:"ssl",disabled:!0,__source:{fileName:l,lineNumber:101,columnNumber:15}},s.a.createElement("option",{value:"ssl",__source:{fileName:l,lineNumber:106,columnNumber:17}},"SSL/TLS")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:110,columnNumber:11}},s.a.createElement(n.a,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_USER",label:this.props.searchableStrings.Username,placeholder:"user@vivaldi.net",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!a,value:a||"",__source:{fileName:l,lineNumber:111,columnNumber:13}})),!this.props.account.useOAuth&&s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:124,columnNumber:13}},s.a.createElement(n.a,{type:"password",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_PASSWORD",label:this.props.isGmail?this.props.searchableStrings["App Password"]:this.props.searchableStrings.Password,placeholder:"",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!i,value:i||"",__source:{fileName:l,lineNumber:125,columnNumber:15}}))),s.a.createElement("div",{key:"mail__smtp",className:"setting-group",__source:{fileName:l,lineNumber:142,columnNumber:9}},s.a.createElement("div",{className:"setting-single setting-single-flex",__source:{fileName:l,lineNumber:143,columnNumber:11}},s.a.createElement(n.a,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_SERVER",label:this.props.searchableStrings["Outgoing Server"],labelImportant:!0,placeholder:"mail.vivaldi.net",isVerified:this.props.smtpVerified,hasError:this.props.showErrors&&!o,value:o||"",style:{width:"calc(50% - 6px)",flex:1},__source:{fileName:l,lineNumber:144,columnNumber:13}}),s.a.createElement(n.a,{type:"number",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_PORT",label:this.props.searchableStrings.Port,placeholder:"465",value:c||"",isVerified:this.props.smtpVerified,style:{width:"25%"},__source:{fileName:l,lineNumber:160,columnNumber:13}})),s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:172,columnNumber:11}},s.a.createElement("label",{className:"floating-label",__source:{fileName:l,lineNumber:173,columnNumber:13}},Object(r.a)("Socket type:"),s.a.createElement("select",{name:"MAIL_SMTP_SOCKET_TYPE",onChange:this.onChangeEvent,value:d||"ssl",__source:{fileName:l,lineNumber:175,columnNumber:15}},s.a.createElement("option",{value:"ssl",__source:{fileName:l,lineNumber:180,columnNumber:17}},Object(r.a)("SSL/TLS (Recommended)")),s.a.createElement("option",{value:"starttls",__source:{fileName:l,lineNumber:181,columnNumber:17}},"StartTLS")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:185,columnNumber:11}},s.a.createElement(n.a,{type:"text",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_USER",label:this.props.searchableStrings.Username,placeholder:"user@vivaldi.net",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!u,value:u||"",__source:{fileName:l,lineNumber:186,columnNumber:13}})),!this.props.account.useOAuth&&s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:199,columnNumber:13}},s.a.createElement(n.a,{type:"password",disabled:this.props.disabled,onChange:this.onChangeEvent,name:"MAIL_SMTP_PASSWORD",label:this.props.isGmail?this.props.searchableStrings["App Password"]:this.props.searchableStrings.Password,placeholder:"",isVerified:this.props.userVerified,hasError:this.props.showErrors&&!m,value:m||"",__source:{fileName:l,lineNumber:200,columnNumber:15}})),(this.props.isGmail||this.areServersGmail())&&s.a.createElement("label",{className:"setting-single",__source:{fileName:l,lineNumber:216,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:!!this.props.account.useOAuth&&this.props.account.useOAuth,onChange:this.toggleOAuth,__source:{fileName:l,lineNumber:217,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:l,lineNumber:222,columnNumber:15}},this.props.searchableStrings["Use OAuth"])))))}}t.a=m},function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return A}));var n=a(107),i=a(222),s=a(175),r=a(624),o=a(283),l=a(808),c=a(809),u=a(0),m=a.n(u),d=a(22),h=a(528),p=a(2),b=a(10),g=a(250),N=a.n(g),f=a(257),_=a(7),v=a(3),E=a(803),C=a(709),w="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\EditMailAccount.jsx";function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{VERIFYING:y,OK:S,ERROR:T,OFFLINE:k}=v.K,A={"Sender Name":Object(p.a)("Sender Name"),Signature:Object(p.a)("Signature"),"Prefetch full messages":Object(p.a)("Prefetch full messages"),"Offline account":Object(p.a)("Offline account"),"Update Account":Object(p.a)("Update Account"),Identity:Object(p.a)("Identity"),Servers:Object(p.a)("Servers"),"Name and signature":Object(p.a)("Name and signature"),"Add a sender name and signature for this account.":Object(p.a)("Add a sender name and signature for this account."),...r.b},I=["MAIL_EMAIL","MAIL_PORT","MAIL_SERVER","MAIL_USER","MAIL_PASSWORD","MAIL_SMTP_PORT","MAIL_SMTP_SERVER","MAIL_SMTP_USER","MAIL_SMTP_PASSWORD","offline"];class D extends m.a.PureComponent{constructor(e){super(e),O(this,"_isMounted",!1),O(this,"_hasVerified",!1),O(this,"_isConnectionUpdated",(e,t)=>I.some(a=>e[a]!==t[a])),O(this,"saveAccount",async()=>{const e=this.props.accountSettings,t=this.state.accountSettings,a=this._isConnectionUpdated(e,t);t.accountType===v.J.POP?o.a.checkForMail():t.accountType===v.J.IMAP&&(a?(await s.a.disconnectIMAPClient(e.MAIL_EMAIL),s.a.connectIMAPClient(t)):t.MAIL_PASSWORD!==e.MAIL_PASSWORD&&t.accountType===v.J.IMAP&&s.a.reconnectIMAPClient(t.MAIL_EMAIL)),e&&(a&&(this.setState({status:y,statusText:Object(p.a)("Verifying..."),incomingVerified:!1,smtpVerified:!1,userVerified:!1}),h.a.verify(this.state.accountSettings,this.verifyAccountCallback)),Object(f.a)(t,e))}),O(this,"setAccountProperty",(e,t)=>{"MAIL_PORT"===e||"MAIL_SMTP_PORT"===e?this.setState(a=>({accountSettings:{...a.accountSettings,[e]:Number(t)}})):this.setState(a=>({accountSettings:{...a.accountSettings,[e]:t}}))}),O(this,"autoSetAccountProperty",(e,t)=>{t!==this.props.accountSettings[e]&&this.setState(a=>({accountSettings:{...a.accountSettings,[e]:t}}),()=>Object(f.a)(this.state.accountSettings,this.props.accountSettings))}),O(this,"autoSaveAccountProperty",e=>{const{name:t,value:a}=e.target;this.autoSetAccountProperty(t,a)}),O(this,"areNonAutosavedPropertiesSame",()=>{const e=this.props.accountSettings,t=this.state.accountSettings;return t.MAIL_EMAIL===e.MAIL_EMAIL&&t.MAIL_PASSWORD===e.MAIL_PASSWORD&&t.MAIL_PORT===e.MAIL_PORT&&t.MAIL_SERVER===e.MAIL_SERVER&&t.MAIL_SMTP_PASSWORD===e.MAIL_SMTP_PASSWORD&&t.MAIL_SMTP_PORT===e.MAIL_SMTP_PORT&&t.MAIL_SMTP_SERVER===e.MAIL_SMTP_SERVER&&t.MAIL_SMTP_USER===e.MAIL_SMTP_USER&&t.MAIL_USER===e.MAIL_USER&&t.popDeletion===e.popDeletion&&t.useOAuth===e.useOAuth}),O(this,"verifyAccountCallback",(e,t,a)=>{if(!this._isMounted)return;const n=N()(t.MAIL_EMAIL).substring(0,6);new Promise((e,t)=>{_.a.mailPrivate.getFileDirectory(n,a=>{b.a.runtime.lastError?new Promise(e=>{_.a.mailPrivate.createFileDirectory(n,n=>{b.a.runtime.lastError?t(Object(p.a)("Error creating data directory")):e(a)})}).then(e(a)):e(a)})}).then(n=>{if(this._isMounted&&e===S)this.setState({status:S,statusText:Object(p.a)("Verified"),incomingVerified:!0,smtpVerified:!0,userVerified:!0});else if(this._isMounted&&e===T){const e="string"==typeof t.MAIL_SERVER&&t.MAIL_SERVER.length>3,n="string"==typeof t.MAIL_SMTP_SERVER&&t.MAIL_SMTP_SERVER.length>3;this.setState({status:T,statusText:Object(p.a)("Error: $1",[a.message]),incomingVerified:e&&!isNaN(t.MAIL_PORT),smtpVerified:n&&!isNaN(t.MAIL_SMTP_PORT),userVerified:!1})}else this._isMounted&&e===k&&this.setState({status:k,statusText:Object(p.a)("Offline")})}).catch(e=>{this.setState({status:T,statusText:e})})}),O(this,"autoSaveAccountBooleanHandler",e=>t=>{const{checked:a}=t.target,{preFetch:n,MAIL_EMAIL:i}=this.state.accountSettings;this.setState(t=>({accountSettings:{...t.accountSettings,[e]:a}}),()=>{Object(f.b)(this.state.accountSettings),"preFetch"===e&&!n&&a&&s.a.preFetch(i)})}),O(this,"setViewType",e=>{"servers"!==e||this._hasVerified||(this._hasVerified=!0,h.a.verify(this.props.accountSettings,this.verifyAccountCallback)),this.setState({view:e})}),O(this,"changeOffline",this.autoSaveAccountBooleanHandler("offline")),O(this,"changePreFetch",this.autoSaveAccountBooleanHandler("preFetch")),this.state={status:y,statusText:Object(p.a)("Verifying..."),accountSettings:this.props.accountSettings,incomingVerified:!1,smtpVerified:!1,userVerified:!1,view:"identity"}}static getDerivedStateFromProps(e,t){return e.accountSettings.MAIL_EMAIL!==t.accountSettings.MAIL_EMAIL?{accountSettings:e.accountSettings}:null}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(t,a){this.props.accountSettings!==t.accountSettings&&this._isConnectionUpdated(t.accountSettings,this.props.accountSettings)&&e.nextTick(()=>{this._isMounted&&(this.setState({status:y,statusText:Object(p.a)("Verifying..."),incomingVerified:!1,smtpVerified:!1,userVerified:!1}),h.a.verify(this.props.accountSettings,this.verifyAccountCallback))})}render(){const e=this.props.showTips,t=this.state.accountSettings,a=t.accountType===v.J.POP,s=this.state.status===T?"error":this.state.status===S?"success":"info";return m.a.createElement("div",{className:"detail",__source:{fileName:w,lineNumber:328,columnNumber:7}},m.a.createElement("div",{className:"detail-content",__source:{fileName:w,lineNumber:329,columnNumber:9}},e&&m.a.createElement(m.a.Fragment,null,m.a.createElement("h2",{__source:{fileName:w,lineNumber:332,columnNumber:15}},A["Name and signature"]),m.a.createElement("p",{className:"mail-setup-description",__source:{fileName:w,lineNumber:333,columnNumber:15}},A["Add a sender name and signature for this account."])),!e&&m.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:w,lineNumber:340,columnNumber:13}},m.a.createElement("div",{className:"toolbar-group",__source:{fileName:w,lineNumber:341,columnNumber:15}},m.a.createElement(d.a,{isPressed:"identity"===this.state.view,onClick:()=>this.setViewType("identity"),title:this.props.searchableStrings.Identity,__source:{fileName:w,lineNumber:342,columnNumber:17}}),m.a.createElement(d.a,{isPressed:"servers"===this.state.view,onClick:()=>this.setViewType("servers"),title:this.props.searchableStrings.Servers,__source:{fileName:w,lineNumber:347,columnNumber:17}}))),"identity"===this.state.view&&m.a.createElement("div",{className:"setting-group-block mail-identity",__source:{fileName:w,lineNumber:356,columnNumber:13}},m.a.createElement("div",{className:"setting-group",__source:{fileName:w,lineNumber:357,columnNumber:15}},m.a.createElement("div",{className:"setting-single",__source:{fileName:w,lineNumber:358,columnNumber:17}},m.a.createElement("h3",{__source:{fileName:w,lineNumber:359,columnNumber:19}},this.props.searchableStrings["Sender Name"]),m.a.createElement(n.a,{type:"text",onChange:this.autoSaveAccountProperty,name:"MAIL_NAME",label:"",placeholder:"John Doe",value:t.MAIL_NAME?t.MAIL_NAME:"",__source:{fileName:w,lineNumber:360,columnNumber:19}}))),m.a.createElement("div",{className:"setting-group",__source:{fileName:w,lineNumber:370,columnNumber:15}},!a&&m.a.createElement("label",{className:"setting-single",__source:{fileName:w,lineNumber:372,columnNumber:19}},m.a.createElement("input",{type:"checkbox",checked:!!t.preFetch&&t.preFetch,onChange:this.changePreFetch,__source:{fileName:w,lineNumber:373,columnNumber:21}}),m.a.createElement("span",{__source:{fileName:w,lineNumber:377,columnNumber:21}},this.props.searchableStrings["Prefetch full messages"])),a&&m.a.createElement(c.a,{popMaxSize:t.popMaxSize,setAccountProperty:this.autoSetAccountProperty,__source:{fileName:w,lineNumber:383,columnNumber:19}}),m.a.createElement("label",{className:"setting-single",__source:{fileName:w,lineNumber:388,columnNumber:17}},m.a.createElement("input",{type:"checkbox",checked:!!t.offline&&t.offline,onChange:this.changeOffline,__source:{fileName:w,lineNumber:389,columnNumber:19}}),m.a.createElement("span",{__source:{fileName:w,lineNumber:393,columnNumber:19}},this.props.searchableStrings["Offline account"]))),m.a.createElement("div",{className:"setting-single mail-signature",__source:{fileName:w,lineNumber:396,columnNumber:15}},m.a.createElement("h3",{__source:{fileName:w,lineNumber:397,columnNumber:17}},this.props.searchableStrings.Signature),m.a.createElement(n.a,{type:"textarea",rows:"4",onChange:this.autoSaveAccountProperty,name:"signature",label:"",placeholder:void 0===t.signature?E.a:"",value:t.signature||"",__source:{fileName:w,lineNumber:398,columnNumber:17}})),e&&m.a.createElement("div",{className:"setting-group-double",__source:{fileName:w,lineNumber:410,columnNumber:17}},m.a.createElement("input",{type:"submit",value:Object(p.a)("Continue"),onClick:()=>e(),__source:{fileName:w,lineNumber:411,columnNumber:19}}))),"servers"===this.state.view&&m.a.createElement("form",{onSubmit:this.saveAccount,__source:{fileName:w,lineNumber:421,columnNumber:13}},a&&m.a.createElement(l.a,{account:t,setAccountProperty:this.setAccountProperty,__source:{fileName:w,lineNumber:423,columnNumber:17}}),m.a.createElement(r.a,{variant:"create",disabled:t.useOAuth,account:t,incomingVerified:this.state.incomingVerified,showErrors:this.state.status===T,smtpVerified:this.state.smtpVerified,userVerified:this.state.userVerified,setAccountProperty:this.setAccountProperty,searchableStrings:this.props.searchableStrings,isGmail:Object(C.a)(this.props.capability),__source:{fileName:w,lineNumber:428,columnNumber:15}}),m.a.createElement("div",{className:"setting-group-double",__source:{fileName:w,lineNumber:440,columnNumber:15}},this.state.statusText&&m.a.createElement(i.a,{type:s,__source:{fileName:w,lineNumber:442,columnNumber:19}},this.state.statusText),m.a.createElement("input",{type:"submit",value:Object(p.a)("Update Account"),disabled:this.areNonAutosavedPropertiesSame(),__source:{fileName:w,lineNumber:446,columnNumber:17}})))))}}t.a=D}).call(this,a(82))},function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(12),r=a(16);const o=new class extends i.a{emitChange(){this.emit("change")}emitChangeParam(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};s.a.register(e=>{switch(e.actionType){case r.a.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG:o.emitChangeParam({action:"confirmOpenBookmarks",options:e.options});break;case r.a.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG:o.emitChangeParam({action:"showClearBrowsingHistory",options:e.options});break;case"MAIN_SELECTING_TOOLBAR":o.emitChangeParam({type:e.actionType,options:e.options});break;case r.a.MAIN_SHOW_BOOKMARK_DIALOG:case r.a.MAIN_SHOW_SAVE_SESSION:case r.a.MAIN_SHOW_ADD_FEED:case"MAIN_SHOW_CALENDAR_ALARM":case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CALENDAR_MODAL_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case"MAIN_SHOW_ACCOUNT_SHEET":case"MAIN_SHOW_DIALOG":case"MAIN_SHOW_SETTINGSWINDOW":o.emitChangeParam({type:e.actionType,options:e.options});break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":case r.a.MAIN_SHOW_CREATE_CALENDAR_DIALOG:case r.a.MAIN_SHOW_IMPORT_CALENDAR:case r.a.MAIN_SHOW_IMPORT_DATA:case r.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case r.a.MAIN_SHOW_PAGE_ACCESS_KEYS:case r.a.MAIN_SHOW_OPEN_SESSION:case r.a.MAIN_SHOW_QUICKCOMMANDS:o.emitChangeParam({type:e.actionType})}}),t.a=o},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(608),r=a(42),o=a(20),l=a.n(o),c=a(126),u=a(230),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarGridEvent.jsx";t.a=function(e){const{event:t,position:a,isActiveEditor:o,editor:d,editingEvent:h,eventKeyDown:p,displayStyle:b,isDragging:g,isFiltering:N,selectedEvent:f,setIsDragging:_}=e,[v,E]=n.useState("");return n.useMemo((function(){const e=r.a.isAllDayEvent(t),C=g&&v===t.id,w=t.id===f,O=!!h&&h.id===t.id&&o,y=O&&h?h:t,S=r.a.generateKey(t);return n.createElement("div",{key:`${S}-${a?a.gridRowStart:""}`,className:l()("event-dragger",{dragged:C,selected:w||O}),style:a,draggable:!0,onDragStart:O?c.a:e=>{if(e.dataTransfer){const{id:a,calendarId:n}=t;e.dataTransfer.setData(u.b,JSON.stringify({id:a,calendarId:n})),e.stopPropagation(),_(!0),E(t.id)}},onDragEnd:e=>{e.dataTransfer.types.some(e=>e===u.b)&&e.stopPropagation(),_(!1),E("")},onClick:e=>{(!h||h&&h.id!==t.id)&&i.a.editEvent(d,t)},onKeyDown:e=>p(e,t),__source:{fileName:m,lineNumber:84,columnNumber:7}},n.createElement(s.a,{displayStyle:b,event:y,isEditing:O,isSelected:w,resizeStepSize:e?0:5,isAllDay:e,isFiltering:N,__source:{fileName:m,lineNumber:97,columnNumber:9}}))}),[h,t,d,v,p,o,g,N,a,f,_,b])}},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(79),i=a(50),s=a(28),r=a(327),o=a(320);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c{constructor(){l(this,"cut",i.a.cut),l(this,"copy",i.a.copy),this.undoStack=new r.b}undo(){this.undoStack.undo()}redo(){this.undoStack.redo()}clearUndoStack(){this.undoStack.clear()}async paste(e,t,a){const n=s.b.getCutIds(),o=n.length>0?s.b.getItemById(n[0]).parentId:"",l=await i.a.paste(e,t,a),{isCut:c,ids:u}=l;return this.undoStack.record(new r.a({sourceId:o,isCut:c,ids:u},{sourceId:o,targetId:t,isCut:c,ids:u},e=>{e.targetId?i.a.move(e.ids,e.targetId,0):c?i.a.move(e.ids,e.sourceId,0):i.a.remove(e.ids)})),l}async create(e){const t=await i.a.create(e);if(t)return this.undoStack.record(new r.a({createdId:t.id,remove:!0},{createdId:t.id,parentId:t.parentId},e=>{e.remove?i.a.remove([e.createdId]):i.a.move([e.createdId],e.parentId||"",t.index||0)})),t}async createWithPromise(e,t,a){const n=await i.a.createWithPromise(e,t,a),s=n.map(e=>e.id);return this.undoStack.record(new r.a({createdIds:s,parentId:t,index:a,remove:!0},{createdIds:s,parentId:t,index:a},e=>{e.remove?i.a.remove(e.createdIds):i.a.move(e.createdIds,e.parentId,e.index||0)})),n}update(e,t){const a=s.b.getItemById(e);return i.a.update(e,t).then(n=>(this.undoStack.record(new r.a({nodeId:e,item:Object(o.a)(a,Object.keys(t))},{nodeId:e,item:t},e=>{i.a.update(e.nodeId,e.item)})),n))}async mergeWithPromise(e,t,a){const n=(await this.createWithPromise([{parentId:e.parentId,children:[],title:a}],e.parentId||"",0))[0].id;return await this.move([e.id,t.id],n,0),n}async move(e,t,a){const n=e.length>0?s.b.getItemById(e[0]).parentId:"",o=await i.a.move(e,t,a);return this.undoStack.record(new r.a({ids:e,parentId:n,index:0},{ids:e,parentId:t,index:a},e=>{i.a.move(e.ids,e.parentId,e.index)})),o}async reorder(e,t){const a={nodeId:t,order:s.b.getItemById(t).children.map(e=>e.id)},n=await i.a.reorder(e,t);return this.undoStack.record(new r.a(a,{nodeId:t,order:e},e=>{i.a.reorder(e.order,e.nodeId)})),n}async remove(e=[]){if(0===e.length)return;const t={removed:e,parentId:s.b.getItemById(e[0]).parentId};await i.a.remove(e),this.undoStack.record(new r.a(t,{ids:e},e=>{e.removed?i.a.move(e.removed,e.parentId||"",0):i.a.remove(e.ids)}))}async duplicate(e,t,a){const n=await i.a.duplicate(e,t,a);return this.undoStack.record(new r.a({ids:n,remove:!0},{ids:n,parentId:t,index:a},e=>{e.remove?i.a.remove(e.ids):i.a.move(e.ids,e.parentId,e.index)})),n}async createBookmarks(e,t,a){const n=await i.a.createBookmarks(e,t,a);return this.undoStack.record(new r.a({ids:n,remove:!0},{ids:n,parentId:t,index:a},e=>{e.remove?i.a.remove(e.ids):i.a.move(e.ids,e.parentId,e.index)})),n}onDropEvent(e,t,a,i){if(e.dataTransfer.types.includes(n.c)){const s=JSON.parse(e.nativeEvent.dataTransfer.getData(n.c));n.a.isCopyModifierPressed(e)||i&&i.disableMove?this.duplicate(s,t,a):this.move(s,t,a)}else n.a.getUrlsFromEventPromise(e,!0).then(e=>this.createBookmarks(e,t,a))}}},,,,,function(e,t,a){"use strict";var n=a(26);class i extends(Object(n.Record)({eventsToImportCount:0,importedEventsCount:new n.List,importEventState:"INIT"})){}t.a=i},function(e,t,a){"use strict";function n(e,t){if(!t.length)return null;if(1===t.length)return t[0];let a=t.filter(e=>""!==e.hreflang);const n=t.filter(e=>""===e.hreflang);if(!a.length)return n[0];e=e.map(e=>e.replace(/_/g,"-").toLowerCase()),a=a.map(e=>({lang:e.hreflang.replace(/_/g,"-").toLowerCase(),val:e}));let i=!1;do{for(let t=0;t<e.length;t++){const n=a.find(a=>a.lang===e[t]);if(n)return n.val}i=!1,a.forEach(e=>{const t=e.lang.lastIndexOf("-");-1!==t&&(i=!0,e.lang=e.lang.substring(0,t))})}while(i);e=e.map(e=>e.replace(/-[\w\W]*$/g,"").toLowerCase());for(let t=0;t<e.length;t++){const n=a.find(a=>a.lang===e[t]);if(n)return n.val}return n.length?n[0]:a[0].val}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(652);function i(e){let t=new Date(e);return s(t)||(t=r(e)),t}const s=e=>e instanceof Date&&!isNaN(e),r=(e="")=>new Date(e.trim().replace(/\b[a-z]+$/i,e=>n.a[e.toUpperCase()]||"+0000"))},,,,function(e,t){let a=!0;const n=(e,t)=>{const a=e[t].level-1;for(let n=t-1;n>=0;n--)if(e[n].level===a)return n;return-1};e.exports=(e,t)=>{t&&(a=!0===t.enabled),e.block.ruler.after("list","todo",(e,t,a)=>{const n=((e,t)=>{const a=e.bMarks[t]+e.blkIndent,n=e.eMarks[t];return e.src.substr(a,n-a)})(e,t);return"list"===e.parentType&&("[ ]"===n.substring(0,3)||"[x]"===n.substring(0,3).toLowerCase())&&(e.tokens.push({type:"todo",content:n,block:!0,lines:[t],level:e.level}),e.line=t+1,!0)},{}),e.renderer.rules.todo=(e,t,i)=>((e,t,i)=>{const s=e[t],r=e[t-1],o=e[n(e,t-1)];let l=s.content;if(r&&"list_item_open"===r.type&&o&&"bullet_list_open"===o.type){const e=1===l.toLowerCase().indexOf("x");return l=l.slice(3).trim(),'<input type="checkbox"'+(e?" checked":"")+(a?"":" disabled")+" />"+l}return l})(e,t);const i=e.renderer.rules.list_item_open;e.renderer.rules.list_item_open=(e,t,a,s)=>{const r=e[t+1],o=e[n(e,t)];return o&&"bullet_list_open"===o.type&&r&&"todo"===r.type?'<li class="todo">':i(e,t,a,s)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(0),i=a(45),s=a.n(i),r=a(72),o=a(14),l=a(87),c=a(35),u=a(10),m=a(7),d=a(349),h=a(37),p=a(284),b=a(545);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,_(e,t,"set"),a),a}function f(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,_(e,t,"get"))}function _(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var v=new WeakMap;class E extends n.Component{constructor(...e){super(...e),v.set(this,{writable:!0,value:""}),g(this,"getContentAsBodyParts",()=>{const e=this.webview;return e?new Promise((t,a)=>{e.executeScript({code:"document.body.innerHTML"},e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"html",content:e[0]}]):a("RichTextEdit.getContentAsBodyParts: Couldn't get contet from Webview")})}):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")}),g(this,"postMessage",e=>{this.webview&&this.webview.contentWindow&&this.webview.contentWindow.postMessage&&this.webview.contentWindow.postMessage(e,h.o)}),g(this,"setContent",(e,t)=>{this.postMessage({type:"SET_CONTENT",isPlainText:t,value:e})}),g(this,"setStyle",(e="")=>{if(""!==f(this,v)&&f(this,v)===e)return;N(this,v,e);const t=l.e.getTheme(e).colors;this.postMessage({type:"SET_STYLE",isDark:s()(t.baseBg).luminance()<=.4,isNote:this.props.isNote,css:this.getCSS(t)}),this.contentLoadHandled=!1}),g(this,"debouncedUpdateState",Object(p.a)(()=>{this.props.updateButtonState(),this.props.updateDropdownAndColorState()},100)),g(this,"handleConsoleMessage",e=>{const[t,a=""]=e.message.split(" ",2);switch(t){case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"linkupdate":case"createLink":case"editLink":case"copyLink":case"unlink":this.props.handleLinkEvent(t,a);break;default:throw new Error(e.message)}}),g(this,"handleLinkClicked",e=>{e.targetUrl.startsWith("#")||(o.a.openURL(e.targetUrl),e.preventDefault())}),g(this,"handleContentLoad",()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(this.props.themeId),this.props.onContentLoad&&this.props.onContentLoad())}),g(this,"keyEventListener",(e,t,a,n,i)=>{1===a&&t&&n===r.a.KEY_TAB&&document.activeElement===this.webview&&this.props.focusPreviousElement()}),g(this,"execCommand",(e,t)=>{this.postMessage({type:"EXEC_COMMAND",command:e,value:t}),setTimeout(()=>this.webview&&this.webview.focus(),0)}),g(this,"onChange",(e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownAndColorState()}),g(this,"onClick",e=>{switch(e){case"createLink":this.props.handleLinkEvent("createLinkClicked");break;case"insertImage":this.insertImage();break;default:this.execCommand(e,""),this.props.updateButtonState()}}),g(this,"insertImage",()=>{u.a.fileSystem.chooseEntry({type:"openFile",accepts:[{mimeTypes:["image/*"]}]},e=>{!u.a.runtime.lastError&&e&&e.file(t=>{const a=URL.createObjectURL(t);this.execCommand("insertHTML",`<img src="${a}" ${d.b}="${t.type}" ${d.a}="${e.name}" />`)})})}),g(this,"unlink",()=>{this.execCommand("unlink",!1)}),g(this,"selectSurrounding",()=>{this.postMessage({type:"SELECT_SURROUNDING"})}),g(this,"getCSS",e=>this.props.isNote?Object(b.c)(e):Object(b.b)()),g(this,"setZoomLevel",e=>{const t=this.webview;t&&(t.setZoomMode("per-view"),t.setZoom(e))}),g(this,"executeScript",e=>new Promise((t,a)=>{this.webview?this.webview.executeScript(e,t):a()}))}focus(){return this.webview&&this.webview.focus()}hasFocus(){return!!this.webview&&this.webview===document.activeElement}componentDidMount(){c.a.addListener("THEME_CURRENT",this.setStyle),this.webview&&this.webview.addEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.addEventListener("contentload",this.handleContentLoad),this.webview&&this.webview.addEventListener("newwindow",this.handleLinkClicked),m.a.tabsPrivate.onKeyboardChanged.addListener(this.keyEventListener)}componentWillUnmount(){c.a.removeListener("THEME_CURRENT",this.setStyle),this.webview&&this.webview.removeEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.removeEventListener("contentload",this.handleContentLoad),this.webview&&this.webview.removeEventListener("newwindow",this.handleLinkClicked),m.a.tabsPrivate.onKeyboardChanged.removeListener(this.keyEventListener)}render(){return n.createElement("webview",{className:"editor-webview",name:"richtexteditor",ref:e=>this.webview=e,style:this.props.hidden||this.props.disabled?{display:"none"}:{},allowtransparency:"on",src:"components/notes/richtexteditor/richtexteditor.html",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RichTextEditor.jsx",lineNumber:271,columnNumber:7}})}}g(E,"defaultProps",{hidden:!1})},,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a(550),i=a(974),s=a.n(i);function r(e){return"win"===Object(n.a)()?function(e){return 1===e.indexOf(":")&&e.match(/^[a-z]/gi)||0===e.indexOf("/")||0===e.indexOf("\\")}(e):function(e){return 0===e.indexOf("/")}(e)}function o(e){return"win"===Object(n.a)()?function(e){let t=s.a.resolve(e).replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI(t)}(e):function(e){return encodeURI(s.a.resolve(e))}(e)}},function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12);class r extends i.a{constructor(){super(s.a)}getInitialState(){return{notifications:[]}}reduce(e,t){switch(t.actionType){case"NOTIFICATIONS_INIT":return{...e,notifications:t.notifications}}return e}}t.a=new r},function(e,t,a){"use strict";var n=a(12);const i={updateCapture:function(){n.a.dispatch({actionType:"CAPTURE_UPDATE"})}};t.a=i},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(4);const i=[Object(n.a)("Transitions Forced"),Object(n.a)("Filter Obscure"),Object(n.a)("Filter Grayscale"),Object(n.a)("Filter Black and White"),Object(n.a)("Fonts Monospace"),Object(n.a)("Transform 3D"),Object(n.a)("Highlight Hover"),Object(n.a)("CSS Debugger"),Object(n.a)("Filter Sepia"),Object(n.a)("Filter Intensify"),Object(n.a)("Skewed Images"),Object(n.a)("Highlight Focus"),Object(n.a)("Transitions Removed"),Object(n.a)("Filter Invert"),Object(n.a)("Inline Access Keys"),Object(n.a)("Page Minimap")];function s(e){const t=e.lastIndexOf("\\"),a=-1===t?e:e.substr(t+1),n=a.lastIndexOf("."),s=a.substr(0,n).replace(/_/g," "),r=i.findIndex(e=>e.labelEnglish===s);return-1===r?s:i[r].label}},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(0);const i=e=>{const t=Object(n.useRef)();return Object(n.useEffect)(()=>{t.current=e}),t.current},s=()=>{const[e,t]=Object(n.useState)(!1);return Object(n.useEffect)(()=>(t(!0),()=>{t(!1)}),[e]),e}},function(e,t,a){"use strict";var n=a(14),i=a(13),s=a(12),r=a(95),o=a(10),l=a(1264),c=a.n(l);const u=new class{setReaderModeStyle(){s.a.dispatch({actionType:"READERMODE_SET_STYLE"})}resetReaderModeStyle(){s.a.dispatch({actionType:"READERMODE_RESET"})}async toggleReaderMode(e=i.c.unsafeGetActivePage()){c()(e.url)&&(e.extData.get("readerMode")?await n.a.setReaderState(e.id,!1):await n.a.setReaderState(e.id,!0),r.a.doAction("focusWebView"))}};o.a.runtime.onMessage.addListener((function(e){if(e&&e.type)switch(e.type){case"SET_RM":if(!e.payload||"boolean"!=typeof e.payload.isReaderable||"number"!=typeof e.payload.pageId)return;const t=e.payload.pageId,a=e.payload.isReaderable;o.a.tabs.get(t,e=>{s.a.dispatch({actionType:"READERMODE",supportsReaderMode:a,pageId:t,windowId:e.windowId})});break;case"SET_RM_STYLE":u.setReaderModeStyle()}})),t.a=u},,,function(e,t,a){"use strict";var n=a(8),i=a(3);t.a=new class{m3GetAll(){return n.a.transaction("rw",[n.a.searchList,n.a.filters],()=>n.a.filters.where("[accountId+path]").equals([i.c,i.gb]).first().then(e=>{if(!e)throw new Error("Outbox filter not found");return n.a.searchList.where("sourceFilterIds").equals(e.id).toArray()}))}}},function(e,t,a){"use strict";var n=a(772);t.a=function(e){if(!e)return"";try{return decodeURIComponent(Object(n.a)(e))}catch(t){return e}}},,function(e,t,a){"use strict";a.d(t,"b",(function(){return m}));var n=a(90),i=a(0),s=a.n(i),r=a(2),o=a(7),l=a(171),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\QRSharePopup.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e){const t=e.length;switch(!0){case t>180&&t<287:return 426;case t>122:return 354;case t>84:return 306;default:return 258}}class d extends s.a.Component{constructor(e){super(e),u(this,"onUrlInputChanged",e=>{const t=e.currentTarget.value;this.setState({data:t}),t&&t.length>2&&o.a.utilities.generateQRCode(t,e=>{this.setState({qrImage:e,dataChanged:!0})})}),u(this,"onGenerate",(e,t)=>{if(this.props.data){const a=Object(r.a)("QR Code Generated");o.a.utilities.generateQRCode(this.props.data,e,t=>{"dataurl"===e?this.setState({qrImage:t,data:this.props.data}):"clipboard"===e&&Object(l.a)({title:a,body:Object(r.a)("Image stored in the clipboard.")})}),t&&this.props.hidePopup()}}),u(this,"onCancel",()=>{this.props.hidePopup()}),u(this,"renderDialogHeader",()=>s.a.createElement("div",{className:"dialog-header",__source:{fileName:c,lineNumber:94,columnNumber:12}},s.a.createElement("h3",{__source:{fileName:c,lineNumber:94,columnNumber:43}},Object(r.a)("Scan QR Code")))),u(this,"renderQRImage",()=>s.a.createElement("div",{className:"dialog-content",__source:{fileName:c,lineNumber:98,columnNumber:12}},this.state.data.length>287?s.a.createElement("p",{__source:{fileName:c,lineNumber:100,columnNumber:11}},Object(r.a)("Address is too long, QR code source cannot exceed $1 characters.",[287])):s.a.createElement("img",{src:this.state.qrImage,className:"qr-image",__source:{fileName:c,lineNumber:104,columnNumber:11}}),s.a.createElement("input",{type:"text",value:this.state.data,spellCheck:"false",maxLength:287,onChange:this.onUrlInputChanged,onFocus:e=>e.target.select(),autoFocus:!0,__source:{fileName:c,lineNumber:106,columnNumber:7}}))),u(this,"renderSaveCancel",()=>s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:c,lineNumber:117,columnNumber:12}},s.a.createElement("input",{type:"button",onClick:this.onGenerate.bind(this,"clipboard",!0),disabled:this.state.data.length>287,value:Object(r.a)("verb","Copy"),__source:{fileName:c,lineNumber:118,columnNumber:7}}),s.a.createElement("input",{type:"button",onClick:this.onGenerate.bind(this,"file",!0),disabled:this.state.data.length>287,value:Object(r.a)("Save to Download"),__source:{fileName:c,lineNumber:122,columnNumber:7}}))),u(this,"renderPopupContents",()=>s.a.createElement("div",{className:"qr-share-dialog",__source:{fileName:c,lineNumber:130,columnNumber:12}},this.renderDialogHeader(),this.renderQRImage(),this.renderSaveCancel())),this.state={qrImage:"",data:this.props.data,dataChanged:!1}}componentDidMount(){this.onGenerate("dataurl")}componentDidUpdate(e){this.state.dataChanged||this.props.data===e.data||this.setState({data:this.props.data},this.onGenerate.bind(this,"dataurl"))}render(){return this.props.useModal?s.a.createElement(n.a,{dialogWidth:m(this.state.data),onRequestClose:this.onCancel,__source:{fileName:c,lineNumber:139,columnNumber:14}},this.renderPopupContents()):this.renderPopupContents()}}t.a=d},function(e,t,a){"use strict";var n=a(45),i=a.n(n),s=a(6),r=a(7),o=a(1);let l=!1;const c=i()("black");let u,m=c,d=c;const h={_onPrefsCacheChanged:function(e,t,a){a===o.kRazerChromaEnabled&&!0===t&&h.init()},isInitialized:function(){return l},setInitCallback:function(e){u=e},onChromaReady:function(){l||(l=!0,d!==c&&(h.setColor(d),d=c),u&&u(),r.a.utilities.onRazerChromaReady.removeListener(this.onChromaReady))},init:function(){l=!1,s.a.addListener([o.kRazerChromaEnabled],this._onPrefsCacheChanged),r.a.utilities.onRazerChromaReady.addListener(this.onChromaReady),r.a.utilities.isRazerChromaReady(e=>{e&&this.onChromaReady()})},setColor:function(e){if(l){if(m.css()!==e.css()){const[,,t]=e.hsl();t<.1&&(e=e.brighten(1));const a=[],n=i.a.bezier([m.toString(),e.toString()]);for(let e=1;e<11;e++){const[t,i,s]=n(e/10).rgb();a.push({red:t,green:i,blue:s})}r.a.utilities.setRazerChromaColor(a,e=>{e||console.warn("Error setting Razer Chroma color")}),m=e}}else d=e}};t.a=h},function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return g}));var n=a(0),i=a(35),s=a(25),r=a(2),o=a(20),l=a.n(o),c=a(85),u=a(1),m=a(208),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\KeyboardShortcutEditSetting.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=(e,t)=>c.a.isSingleKeyShortcut(e)?t?"singlemail":"single":"",b=["shift+tab","tab","space","enter","left","right","up","down","pageup","pagedown","numlock","home","end","insert","del"],g=["alt+shift+f4","alt+f4","shift+insert","ctrl+insert","shift+f10"];class N extends n.Component{constructor(...e){super(...e),h(this,"state",{keyValue:this.props.command.shortcut||[],selectedCombo:"",active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),h(this,"findExistingShortcut",e=>this.props.commandArray.filter(e=>e.shortcut).find(t=>{var a;return null===(a=t.shortcut)||void 0===a?void 0:a.includes(e)})),h(this,"isTweakedShortcut",e=>(!this.props.command.shortcut||!this.props.command.shortcut.includes(e))&&(this.props.command.tweakedShortcut&&this.props.command.tweakedShortcut===e)),h(this,"restoreDefault",()=>{const e=i.a.getDefault(this.props.command.name);if(e.shortcut)for(let t=0;t<e.shortcut.length;t++){const a=this.findExistingShortcut(e.shortcut[t]);if(a&&this.props.command.name!==a.name&&!this.isTweakedShortcut(e.shortcut[t]))return void this.setState({duplicateCombo:{shortcut:Object(m.b)(e.shortcut[t]),label:a.label},systemReservedCombo:"",singleKeyWarning:!1})}this.setState({keyValue:e.shortcut||null},this.save)}),h(this,"onClearComboButton",()=>{const{selectedCombo:e}=this.state,t=this.props.command.shortcut;if(!e||!t)return void this.setState({keyValue:[]},this.save);const a=t.indexOf(e);if(a<0)return void this.setState({selectedCombo:""},this.save);const n=[...t.slice(0,a),...t.slice(a+1)];this.setState({keyValue:n,selectedCombo:n[a]||""},this.save)}),h(this,"onClearComboButtonMouseDown",e=>{e.preventDefault()}),h(this,"handleKeyEvent",e=>{var t=c.a.keyComboFromEvent(e.nativeEvent);"tab"!==t&&"shift+tab"!==t&&e.preventDefault();var a=this.findExistingShortcut(t);if("PageUp"!==e.nativeEvent.key&&"PageDown"!==e.nativeEvent.key||!e.nativeEvent.ctrlKey||e.preventDefault(),e.getModifierState("AltGraph"))return;const{selectedCombo:n}=this.state;if(t&&"backspace"===t||n&&"del"===t){let e=this.props.command.shortcut;n&&e?e.splice(e.indexOf(n),1):e&&(e=e.slice(0,e.length-1)),this.setState({keyValue:e||[],duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1},this.save),this.refs.comboInput.focus()}else!this.props.prefValues[u.kKeyboardShortcutsEnableSingleKey]&&t&&c.a.isSingleKeyShortcut(t)?this.setState({duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!0}):a&&!this.isTweakedShortcut(t)?this.setState({duplicateCombo:{shortcut:Object(m.b)(t),label:a.label},systemReservedCombo:"",singleKeyWarning:!1}):t&&-1!==g.indexOf(t)?this.setState({systemReservedCombo:Object(m.b)(t),duplicateCombo:null,singleKeyWarning:!1}):t&&-1===b.indexOf(t)?this.setState(e=>({keyValue:(e.keyValue||[]).slice().concat(t),duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save):this.navigateWithArrowKeys(e)}),h(this,"navigateWithArrowKeys",e=>{let t=null;if(!this.state.keyValue||0===this.state.keyValue.length)return;const a=c.a.keyComboFromEvent(e.nativeEvent),{document:n,HTMLElement:i}=this.context,s=n.activeElement;switch(a){case"left":s&&(t=s.previousElementSibling);break;case"right":s&&(t=s.nextElementSibling);break;case"up":s&&s.parentNode&&(t=s.parentNode.firstChild);break;case"down":s&&s.parentNode&&(t=s.parentNode.lastChild)}t instanceof i&&(e.preventDefault(),e.stopPropagation(),t.focus())}),h(this,"save",()=>{const e={name:this.props.command.name,shortcut:this.state.keyValue,gestures:this.props.command.gestures};i.a.set({[this.props.command.name]:e})}),h(this,"onTextFocus",()=>{this.setState({active:!0})}),h(this,"onTextBlur",e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()}),h(this,"onButtonFocus",()=>{this.setState({active:!0})}),h(this,"onButtonBlur",e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()}),h(this,"onComboFocus",e=>{this.setState({selectedCombo:e.currentTarget.dataset.raw,active:!0})}),h(this,"onComboBlur",()=>{this.setState({selectedCombo:"",active:!1})}),h(this,"renderCombos",()=>{if(this.props.command.shortcut&&this.props.command.shortcut.length>0){const e=this.props.command.name.startsWith("COMMAND_MAIL");return this.props.command.shortcut&&this.props.command.shortcut.map((t,a)=>n.createElement("button",{key:a,className:`multiinput-item\n              ${p(t,e)}`,"data-raw":t,onFocus:this.onComboFocus,onBlur:this.onComboBlur,onKeyDown:this.handleKeyEvent,__source:{fileName:d,lineNumber:329,columnNumber:11}},Object(m.b)(t)))}}),h(this,"renderKeyboardShortcutEditSetting",()=>n.createElement("div",{className:l()({controls:!0,active:this.state.active}),__source:{fileName:d,lineNumber:346,columnNumber:7}},n.createElement("div",{className:"multiinput",__source:{fileName:d,lineNumber:350,columnNumber:9}},n.createElement("div",{className:"multiinput-group",__source:{fileName:d,lineNumber:351,columnNumber:11}},this.renderCombos(),n.createElement("input",{type:"text",ref:"comboInput",id:this.props.id,defaultValue:"",onKeyDown:this.handleKeyEvent,onFocus:this.onTextFocus,onBlur:this.onTextBlur,__source:{fileName:d,lineNumber:353,columnNumber:13}}))),n.createElement("input",{type:"button",className:"circular restorekey",title:Object(r.a)("Restore default shortcut"),onClick:this.restoreDefault,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:d,lineNumber:363,columnNumber:9}}),n.createElement("input",{type:"button",className:"circular clearkey",title:Object(r.a)("Clear shortcut"),onMouseDown:this.onClearComboButtonMouseDown,onClick:this.onClearComboButton,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:d,lineNumber:370,columnNumber:9}}),this.state.duplicateCombo&&n.createElement("p",{className:"info",__source:{fileName:d,lineNumber:379,columnNumber:9}},Object(r.a)("Shortcut $1 is already assigned to “$2” command.",[this.state.duplicateCombo.shortcut.toUpperCase(),this.state.duplicateCombo&&this.state.duplicateCombo.label])),this.state.systemReservedCombo&&n.createElement("p",{className:"info",__source:{fileName:d,lineNumber:386,columnNumber:9}},Object(r.a)("Shortcut $1 is reserved by the system.",[this.state.systemReservedCombo.toUpperCase()])),this.state.singleKeyWarning&&n.createElement("p",{className:"info",__source:{fileName:d,lineNumber:392,columnNumber:9}},Object(r.a)("Single Key Shortcuts are currently disabled."))))}render(){return this.renderKeyboardShortcutEditSetting()}}h(N,"contextType",s.a),t.a=N},function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(28),i=a(111),s=a(323),r=a(0),o=a.n(r),l=a(351),c=a(9),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkTreeTitleCell.jsx";function m({onExpandClick:e,inManager:t,fullView:a,node:r,inlineEditText:m,onChange:d,onBlur:h,onFocus:p,showBadge:b,onMouseEnter:g,onMouseLeave:N}){const f=16*(r.level+1)+"px",_=16*r.level+"px",v=Boolean(r.children),E=Boolean(v&&r.children.length);return o.a.createElement("label",{key:"0","data-parent":r.parentId,onMouseEnter:g,onMouseLeave:N,__source:{fileName:u,lineNumber:45,columnNumber:10}},v&&E&&o.a.createElement("span",{className:"expand-icon",style:{marginLeft:_},onMouseUp:()=>e(r.id),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},dangerouslySetInnerHTML:{__html:c.rb},__source:{fileName:u,lineNumber:53,columnNumber:7}}),v&&r.trash&&o.a.createElement(s.a,{speeddial:r.speeddial,open:r.isExpanded,trash:!0,leftMargin:E?0:f,__source:{fileName:u,lineNumber:62,columnNumber:7}}),v&&!r.trash&&o.a.createElement(s.a,{speeddial:r.speeddial,open:r.isExpanded,trash:!1,leftMargin:E?0:f,__source:{fileName:u,lineNumber:71,columnNumber:7}}),!v&&o.a.createElement(i.a,{url:r.faviconUrl?r.faviconUrl:r.url,style:{marginLeft:f},className:"tree-row-image",__source:{fileName:u,lineNumber:80,columnNumber:7}}),void 0!==m&&o.a.createElement("input",{type:"text",value:m,onChange:d,onFocus:p,onBlur:h,autoFocus:!0,__source:{fileName:u,lineNumber:91,columnNumber:7}}),void 0===m&&o.a.createElement("span",{className:"title",__source:{fileName:u,lineNumber:102,columnNumber:7}},r.title?r.title:r.url===l.a||t?"":r.url),b&&E&&!a&&o.a.createElement("span",{className:"item-count",__source:{fileName:u,lineNumber:113,columnNumber:7}},r.children.filter(e=>!n.b.isSeparator(e)).length))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(133);function i(e,t,a=((e,t,a)=>Object(n.a)(t[e],a[e]))){if(e===t)return!0;const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let n=0;n<i.length;n++)if(!t.hasOwnProperty(i[n])||!a(i[n],e,t))return!1;return!0}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a(14),i=a(0),s=a.n(i),r=a(2),o=a(9),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\guest-intro\\GuestIntro.jsx";const c="https://vvld.in/guest";function u(e){e.preventDefault(),n.a.openURL(c,{inCurrent:!1,inBackground:!1})}class m extends s.a.Component{render(){return s.a.createElement("div",{className:"guest-intro",__source:{fileName:l,lineNumber:28,columnNumber:7}},s.a.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:l,lineNumber:30,columnNumber:9}},s.a.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:l,lineNumber:31,columnNumber:11}})),s.a.createElement("div",{className:"guest-intro-content",__source:{fileName:l,lineNumber:34,columnNumber:9}},s.a.createElement("h1",{__source:{fileName:l,lineNumber:35,columnNumber:11}},Object(r.a)("title","Guest Profile")),s.a.createElement("span",{className:"guest-intro-icon",dangerouslySetInnerHTML:{__html:o.Bc.medium},__source:{fileName:l,lineNumber:36,columnNumber:11}}),s.a.createElement("p",{__source:{fileName:l,lineNumber:43,columnNumber:11}},Object(r.a)("Browsing with a Guest profile means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),s.a.createElement("p",{__source:{fileName:l,lineNumber:44,columnNumber:11}},s.a.createElement("a",{tabIndex:0,href:c,onClick:u,__source:{fileName:l,lineNumber:45,columnNumber:13}},Object(r.a)("Learn more about Guest Profiles")))))}}t.b=m},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const n=/^X-GM-EXT-1$/i;function i(e){return e.some(e=>e.match(n))}},function(e,t,a){"use strict";a.d(t,"b",(function(){return b}));var n=a(107),i=a(0),s=a.n(i),r=a(229),o=a(86),l=a(2),c=a(298),u=a(261),m=a(46),d=a(218),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\EditSearchEngine.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b={title:Object(l.a)("title","Name"),Nickname:Object(l.a)("Nickname"),"Nickname in use by $1":Object(l.a)("Nickname in use by $1",[""]),URL:Object(l.a)("URL"),"Substitute search keyword in address with %s or %S":Object(l.a)("Substitute search keyword in address with %s or %S"),"Suggest URL":Object(l.a)("Suggest URL"),"Use POST method":Object(l.a)("Use POST method"),"Set as Default Search":Object(l.a)("Set as Default Search"),"Set as Private Search":Object(l.a)("Set as Private Search"),Save:Object(l.a)("Save")};function g(e){const t=o.a.getById(e);return t?{id:e,name:t.name?t.name.trim():"",url:t.url?t.url.trim():"",suggestUrl:t.suggestUrl?t.suggestUrl.trim():"",faviconUrl:t.faviconUrl?t.faviconUrl.trim():"",keyword:t.keyword?t.keyword.trim().toLowerCase():"",post:Boolean(t.post),default:o.a.isDefault(e,!1),defaultFixed:o.a.isDefault(e,!1),private:o.a.isDefault(e,!0),nicknameTaken:!1}:{id:e,name:"",url:"",suggestUrl:"",faviconUrl:"",keyword:"",post:!1,default:!1,defaultFixed:!1,private:!1,nicknameTaken:!1}}class N extends s.a.Component{constructor(e){super(e),p(this,"urlHasChanged",!1),p(this,"handleKeyDown",e=>{"Enter"===e.key&&this.save()}),p(this,"handleBlur",()=>{this.props.id===this.state.id&&this.save()}),p(this,"getDataUri",(e,t)=>{const a=new Image;a.onload=function(){const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight,a.getContext("2d").drawImage(this,0,0),t(a.toDataURL(e))},a.src=e}),p(this,"constructFavicon",e=>{if(e&&!this.state.faviconUrl){const t=Object(m.c)(e.trim()),a=document.createElement("a");a.href=t;const n=a.protocol+"//"+a.host+"/favicon.ico";this.getDataUri(n,e=>{this.urlHasChanged&&this.setState({faviconUrl:e},()=>this.save())})}}),p(this,"canSave",e=>e.id&&!e.nicknameTaken),p(this,"save",(e=this.state,t=!0)=>{if(this.canSave(e)){const a=e.url.trim(),n=o.a.getById(e.id);if(n){const i=Object(c.a)(n);n.name=e.name,n.keyword=e.keyword,n.url=a?a.includes(":")?a:Object(m.c)(a):"",n.suggestUrl=""!==e.suggestUrl.trim()?Object(m.c)(e.suggestUrl):"",this.urlHasChanged&&(n.faviconUrl=e.faviconUrl),n.post=e.post;const s=o.a.getDefault(!1).id,l=o.a.getDefault(!0).id;Object(u.default)(i,n)&&e.default===(s===this.state.id)&&e.private===(l===this.state.id)||(r.a.modify(n,e.default),e.private?r.a.setDefault(n.id,!0):l===n.id&&r.a.setDefault(s,!0)),t&&this.setState(e=>({defaultFixed:e.default}))}}}),p(this,"nameChange",e=>{this.setState({name:e.target.value})}),p(this,"nicknameChange",e=>{const t=e.target.value.trim();let a=t.length>0&&o.a.hasKeyword(t);if(a&&this.props.id){const e=o.a.getById(this.props.id);e&&e.keyword===t&&(a=!1)}this.setState({keyword:t,nicknameTaken:a})}),p(this,"urlChange",e=>{const t=e.target.value;Object(m.n)(t)&&this.constructFavicon(t),this.setState({url:t}),this.urlHasChanged=!0}),p(this,"suggestUrlChange",e=>{this.setState({suggestUrl:e.target.value})}),p(this,"defaultChange",e=>{this.setState({default:e.target.checked},()=>this.save())}),p(this,"privateChange",e=>{this.setState({private:e.target.checked},()=>this.save())}),p(this,"postChange",e=>{this.setState({post:e.target.checked},()=>this.save())}),this.state=g(e.id)}static getDerivedStateFromProps(e,t){return e.id!==t.id?g(e.id):null}componentDidUpdate(e,t){e.id!==this.props.id&&(this.save(t,!1),this.urlHasChanged=!1)}render(){const e=this.state.nicknameTaken?o.a.getByKeyword(this.state.keyword):null,t=e?e.name:"";return s.a.createElement("div",{className:"detail",__source:{fileName:h,lineNumber:244,columnNumber:7}},s.a.createElement("div",{className:"detail-content",__source:{fileName:h,lineNumber:245,columnNumber:9}},s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:247,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:248,columnNumber:11}},s.a.createElement(n.a,{type:"text",focusInput:this.props.focusNameInput,label:this.props.searchableStrings.title,value:this.state.name,onBlur:this.handleBlur,onChange:this.nameChange,onKeyDown:this.handleKeyDown,__source:{fileName:h,lineNumber:249,columnNumber:13}}))),s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:260,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:261,columnNumber:11}},s.a.createElement(n.a,{type:"text",label:this.props.searchableStrings.Nickname,value:this.state.keyword,onBlur:this.handleBlur,onChange:this.nicknameChange,onKeyDown:this.handleKeyDown,__source:{fileName:h,lineNumber:262,columnNumber:13}})),this.state.nicknameTaken&&s.a.createElement("span",{className:"info dropfade",__source:{fileName:h,lineNumber:271,columnNumber:13}},Object(d.b)(Object(l.a)("Nickname in use by $1",[t]),this.props.filter))),s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:280,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:281,columnNumber:11}},s.a.createElement(n.a,{type:"text",label:this.props.searchableStrings.URL,value:this.state.url,onBlur:this.handleBlur,onChange:this.urlChange,onKeyDown:this.handleKeyDown,__source:{fileName:h,lineNumber:282,columnNumber:13}})),s.a.createElement("p",{className:"info",__source:{fileName:h,lineNumber:290,columnNumber:11}},this.props.searchableStrings["Substitute search keyword in address with %s or %S"])),s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:295,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:296,columnNumber:11}},s.a.createElement(n.a,{type:"text",label:this.props.searchableStrings["Suggest URL"],value:this.state.suggestUrl,onBlur:this.handleBlur,onChange:this.suggestUrlChange,onKeyDown:this.handleKeyDown,__source:{fileName:h,lineNumber:297,columnNumber:13}}))),s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:307,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:308,columnNumber:11}},s.a.createElement("label",{__source:{fileName:h,lineNumber:309,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:this.state.default,disabled:this.state.default,onChange:this.defaultChange,__source:{fileName:h,lineNumber:310,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:h,lineNumber:314,columnNumber:15}},this.props.searchableStrings["Set as Default Search"]))),s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:317,columnNumber:11}},s.a.createElement("label",{__source:{fileName:h,lineNumber:318,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:this.state.private,disabled:this.state.default&&this.state.private,onChange:this.privateChange,__source:{fileName:h,lineNumber:319,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:h,lineNumber:323,columnNumber:15}},this.props.searchableStrings["Set as Private Search"])))),s.a.createElement("div",{className:"setting-group",__source:{fileName:h,lineNumber:328,columnNumber:9}},s.a.createElement("div",{className:"setting-single",__source:{fileName:h,lineNumber:329,columnNumber:11}},s.a.createElement("label",{__source:{fileName:h,lineNumber:330,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:this.state.post,onChange:this.postChange,__source:{fileName:h,lineNumber:331,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:h,lineNumber:334,columnNumber:15}},this.props.searchableStrings["Use POST method"]))),s.a.createElement("p",{className:"info",__source:{fileName:h,lineNumber:337,columnNumber:11}},Object(l.a)("Submit searches as POST requests.")),s.a.createElement("p",{className:"info",__source:{fileName:h,lineNumber:338,columnNumber:11}},Object(l.a)("Warning: Unless the engine supports POST requests, enabling this will break searches with this engine.")))))}}t.a=N},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(24),s=a(186),r=a(1418),o=a(1419),l=a(1319),c=a(32),u=a(1320),m=a(42),d=a(200),h=a(85),p=a(36),b=a(11),g=a(6),N=a(25),f=a(78),_=a(4),v=a(109),E=a(15),C=a.n(E),w=a(491),O=a(230),y=a(1),S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\Calendar.jsx";t.a=function(t){const a=n.useContext(s.a),E=n.useContext(N.a),T=n.useRef(null);n.useEffect(()=>{g.a.get(y.kCalendarOnboardingShown)||(b.a.set(y.kCalendarOnboardingShown,!0),e.nextTick(()=>{p.a.showCalendarAccountDialog()}))},[]);const k=()=>{const e=c.a.getCalendarState().trashedEvents.sort((e,t)=>(e.trash_time||0)-(t.trash_time||0)).slice(-1);e.length&&i.a.restoreEvent(a.editor,e[0])},A=n.useCallback((e,t)=>{var a;const n=c.a.getEditState(),i=E.document.getSelection(),s=E.document.activeElement,r=n.selectedEvent||(null===(a=n.eventDraft)||void 0===a?void 0:a.id);if(r&&(!i||i.isCollapsed)&&T.current&&T.current.contains(s)){const{clipboardData:a}=e;if(!a)throw new Error("No clipboardData on copy event");e.preventDefault();const n=c.a.getEvent(r);if(!n)return void console.error(`Event to copy (id: ${r}) not found`);a.setData("text/plain",n.title),a.setData(O.b,r),a.setData("vivaldi/x-cut",t)}},[E.document]),I=n.useCallback(e=>{A(e,"true")},[A]),D=n.useCallback(e=>{A(e,"false")},[A]),M=n.useCallback(async e=>{if(T.current&&T.current.contains(E.document.activeElement)){const{clipboardData:n}=e;if(!n)throw new Error("No clipboardData on paste event");const s=c.a.getEditState().eventDraft;if(s&&"DELETE"!==m.a.shouldSaveEvent(s))return;const r=n.getData(O.b);if(r){e.preventDefault();const o=t.filter.selectedDate.valueOf(),l=t.filter.allDaySelected;let c;c="true"===n.getData("vivaldi/x-cut")?await i.a.moveEvent(a.editor,r,{start:o,byDateOnly:l}):await i.a.copyEvent(a.editor,r,{start:o,byDateOnly:l}),s?i.a.editEvent(a.editor,c):i.a.selectEvent(a.editor,{event:c})}else{const e=n.getData("text/plain");e&&i.a.editEvent(a.editor,null,{title:e,start:t.filter.selectedDate.valueOf()})}}},[E.document,a.editor,t.filter]);n.useEffect(()=>{h.a.bind("ctrl+z",k);const e=T.current;return e&&(E.document.addEventListener("cut",I),E.document.addEventListener("copy",D),E.document.addEventListener("paste",M)),()=>{h.a.unbind("ctrl+z",k),e&&(E.document.removeEventListener("cut",I),E.document.removeEventListener("cut",D),E.document.removeEventListener("paste",M))}});const P=e=>{const n=t.filter.merge(e);i.a.updateCalendarUI(a.editor.pageId,n)},x=e=>{const{displayModes:a}=t;if(!a||t.displayMode)return;let n=a.findIndex(e=>e===t.filter.displayMode)+e;n<0?n=0:n>=a.length&&(n=a.length-1),P({displayMode:a[n]})},L=n.useCallback((e,t)=>{"Enter"!==v.a[e.keyCode]||e.shiftKey||(e.preventDefault(),e.stopPropagation(),i.a.saveEventEdit(a.editor))},[a.editor]),j=n.useCallback(()=>()=>{const{editor:e,eventDraft:t}=c.a.getEditState();if(t&&e.uid===a.editor.uid&&(a.isActivePage||a.isPanel)){switch(g.a.get(y.kCalendarClickOutside)){case"cancel":i.a.cancelEventEdit(a.editor);break;case"save_and_close":case"save_and_new":i.a.saveEventEdit(a.editor)}}},[a.editor,a.isActivePage,a.isPanel]),R=n.useCallback(()=>T.current,[]);Object(w.a)(R,j,["calendar-viewport","calendar-modal","calendar-dialog","CalendarEventBubble"]);const B=t.displayMode||t.filter.displayMode,F=c.a.getCalendars().find(e=>e.id===c.a.getDefaultCalendarId()),U=a.editor.pageId===c.a.getPanelResourceKey();return n.createElement("div",{ref:T,className:"calendar-viewport",onContextMenu:e=>{const t=e.target instanceof HTMLElement&&e.target.closest(".calendar-grid");t&&t!==document.activeElement&&t instanceof HTMLElement&&t.focus(),Object(f.a)(E.vivaldiWindowId,(()=>{const e=[{handler:d.a.paste,...Object(_.a)("verb","Paste")}];return c.a.getCalendarState().trashedEvents.length&&e.push({handler:k,...Object(_.a)("Restore Event from Trash")}),e})())(e)},onKeyDown:e=>{const{editingEvent:n,selectedEvent:s}=t,r=e.ctrlKey;if(n)switch(v.a[e.keyCode]){case"Escape":i.a.cancelEventEdit(a.editor);break;case"Del":case"Backspace":r&&i.a.trashEvent(a.editor,n.id)}else switch(v.a[e.keyCode]){case"Del":case"Backspace":s&&i.a.trashEvent(a.editor,s),e.preventDefault(),e.stopPropagation();break;case"PageUp":e.ctrlKey?x(-1):i.a.viewPreviousPeriod(a.editor.pageId);break;case"PageDown":e.ctrlKey?x(1):i.a.viewNextPeriod(a.editor.pageId);break;case"Home":const t=C()();P({anchorDate:t,selectedDate:t})}},style:m.a.getCalendarColors(F),__source:{fileName:S,lineNumber:307,columnNumber:5}},("day"===B||"week"===B&&!U)&&n.createElement(o.a,{anchorDate:t.anchorDate||t.filter.anchorDate,filter:t.filter,events:t.events,displayMode:B,selectedEvent:t.selectedEvent,editingEvent:t.editingEvent,editorUid:t.editorUid,eventKeyDown:L,__source:{fileName:S,lineNumber:315,columnNumber:9}}),("week"===B&&U||"multiweek"===B||"month"===B)&&n.createElement(r.a,{filter:t.filter,events:t.events,displayMode:B,selectedEvent:t.selectedEvent,editingEvent:t.editingEvent,editorUid:t.editorUid,eventKeyDown:L,__source:{fileName:S,lineNumber:331,columnNumber:9}}),"year"===B&&n.createElement(l.a,{filter:t.filter,events:t.events,__source:{fileName:S,lineNumber:343,columnNumber:9}}),"agenda"===B&&n.createElement(u.a,{filter:t.filter,events:t.events,displayMode:B,eventDisplayStyle:t.eventDisplayStyle||"transparent",selectedEvent:t.selectedEvent,editingEvent:t.editingEvent,editorUid:t.editorUid,eventKeyDown:L,__source:{fileName:S,lineNumber:350,columnNumber:9}}))}}).call(this,a(82))},function(e,t,a){"use strict";var n=a(972),i=a.n(n),s=a(566);t.a=Object(s.DragDropContext)(i.a)},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const n=["mail.google.com"];function i(e,t,a=999){if(!e||!t)return"";const i=n.some(e=>t.includes(e))?e.match(/[\(\[\{](\d+)[\}\]\)]/):e.match(/^\((\d+)\D*?\)/);if(!(null==i?void 0:i[1]))return"";const s=parseInt(i[1]);return s<=0?"":s>a?"+":i[1]}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(851),r=a(11),o=a(2),l=a(1),c=a(135),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarDropdown.jsx";const m=r.a.getEventHandler;class d extends i.a.Component{render(){const e=this.props.prefValues;return(i.a.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Address Field Drop-Down Menu"),__source:{fileName:u,lineNumber:28,columnNumber:7}},i.a.createElement(c.b,{text:Object(o.a)("Show Drop-Down when Typing"),__source:{fileName:u,lineNumber:32,columnNumber:9}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarOmniboxEnabled],onChange:m(l.kAddressBarOmniboxEnabled),__source:{fileName:u,lineNumber:33,columnNumber:11}})),i.a.createElement(c.b,{text:Object(o.a)("Include Bookmarks"),className:"pad-left",__source:{fileName:u,lineNumber:40,columnNumber:9}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowBookmarks],onChange:m(l.kAddressBarOmniboxShowBookmarks),__source:{fileName:u,lineNumber:44,columnNumber:11}})),i.a.createElement(c.b,{text:Object(o.a)("Include Typed History"),className:"pad-left",__source:{fileName:u,lineNumber:52,columnNumber:9}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowTypedHistory],onChange:m(l.kAddressBarOmniboxShowTypedHistory),__source:{fileName:u,lineNumber:56,columnNumber:11}})),i.a.createElement(c.b,{text:Object(o.a)("Include Frequently Visited Pages"),className:"pad-left",__source:{fileName:u,lineNumber:64,columnNumber:9}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowTopSites],onChange:m(l.kAddressBarOmniboxShowTopSites),__source:{fileName:u,lineNumber:68,columnNumber:11}})),i.a.createElement(c.b,{text:Object(o.a)("Include Browser History"),className:"pad-left",__source:{fileName:u,lineNumber:76,columnNumber:9}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowBrowserHistory],onChange:m(l.kAddressBarOmniboxShowBrowserHistory),__source:{fileName:u,lineNumber:80,columnNumber:11}}))))}}var h=d,p=a(69),b=a(52),g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarShortcuts.jsx";const N=r.a.getEventHandler;class f extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:g,lineNumber:19,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:g,lineNumber:20,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:g,lineNumber:21,columnNumber:11}},Object(o.a)("Open Address in New Tab")),i.a.createElement(p.a,{name:"urlfieldShortcut",className:"setting-single",value:this.props.value,onChange:N(l.kAddressBarUrlOpenShortcut),__source:{fileName:g,lineNumber:22,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:g,lineNumber:26,columnNumber:13}},i.a.createElement("label",{__source:{fileName:g,lineNumber:27,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"alt",__source:{fileName:g,lineNumber:28,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:g,lineNumber:29,columnNumber:17}},"Alt + Enter"))),i.a.createElement("div",{className:"setting-single",__source:{fileName:g,lineNumber:36,columnNumber:13}},i.a.createElement("label",{__source:{fileName:g,lineNumber:37,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"shift",__source:{fileName:g,lineNumber:38,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:g,lineNumber:39,columnNumber:17}},"Shift + Enter"))))))}}var _=f,v=a(21),E=a(36),C=a(61),w="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBar.jsx";const O=[l.kAddressBarAutocompleteSuffixExpansionEnabled,l.kAddressBarAutocompleteSuffixExpansionValue,l.kAddressBarAutocompleteEnabled,l.kAddressBarAutocompletePreferBookmarks,l.kAddressBarExtensionsShowAllToggle,l.kAddressBarExtensionsShowHiddenToggle,l.kAddressBarExtensionsRenderInDropdown,l.kAddressBarOmniboxCutcopyEncoded,l.kAddressBarOmniboxEnabled,l.kAddressBarOmniboxShowBookmarks,l.kAddressBarOmniboxShowTopSites,l.kAddressBarOmniboxShowTypedHistory,l.kAddressBarOmniboxShowBrowserHistory,l.kAddressBarPosition,l.kAddressBarSelectOnClick,l.kAddressBarShowFullUrl,l.kAddressBarShowProfile,l.kAddressBarShowProgress,l.kAddressBarShowQrGenerator,l.kAddressBarStripJavascriptOnPaste,l.kAddressBarUrlOpenShortcut,l.kAddressBarVisible,l.kAddressBarHighlightBaseDomain],y=r.a.getEventHandler;class S extends n.Component{constructor(...e){var t,a,i;super(...e),i=()=>n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Security Features"),__source:{fileName:w,lineNumber:272,columnNumber:12}},n.createElement(c.b,{text:Object(o.a)("Strip JavaScript From Pasted Text"),__source:{fileName:w,lineNumber:273,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarStripJavascriptOnPaste],onChange:y(l.kAddressBarStripJavascriptOnPaste),__source:{fileName:w,lineNumber:274,columnNumber:9}})),n.createElement(c.b,{text:Object(o.a)("Highlight Base Domain in Address"),__source:{fileName:w,lineNumber:280,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarHighlightBaseDomain],onChange:y(l.kAddressBarHighlightBaseDomain),__source:{fileName:w,lineNumber:281,columnNumber:9}}))),(a="renderSecurityFeatures")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}changeExtensionToggleAll(e){const t=e.target.checked;!1===t&&(r.a.set(l.kAddressBarExtensionsShowAllToggle,!0),r.a.set(l.kAddressBarExtensionsShowHiddenToggle,!1)),r.a.set(l.kAddressBarExtensionsShowHiddenToggle,!1),r.a.set(l.kAddressBarExtensionsShowAllToggle,t)}changeExtensionToggleHidden(e){const t=e.target.checked;!1===t&&(r.a.set(l.kAddressBarExtensionsShowHiddenToggle,!0),r.a.set(l.kAddressBarExtensionsShowAllToggle,!1)),r.a.set(l.kAddressBarExtensionsShowHiddenToggle,t),r.a.set(l.kAddressBarExtensionsShowAllToggle,!1)}enableExtensionRenderInDropdown(e){const t=e.target.checked;!1===t&&r.a.set(l.kAddressBarExtensionsRenderInDropdown,!0),!0===t&&r.a.set(l.kAddressBarExtensionsRenderInDropdown,!1),r.a.set(l.kAddressBarExtensionsRenderInDropdown,t)}renderShowAddressBar(){return n.createElement(c.a,{filter:this.props.filter,className:"unlimited",__source:{fileName:w,lineNumber:116,columnNumber:13}},n.createElement(c.b,{text:Object(o.a)("Show Address Bar"),__source:{fileName:w,lineNumber:117,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarVisible],onChange:y(l.kAddressBarVisible),__source:{fileName:w,lineNumber:118,columnNumber:9}})))}renderAddressBarPosition(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Address Bar Position"),__source:{fileName:w,lineNumber:126,columnNumber:13}},n.createElement(p.a,{name:"addressbar-position",value:this.props.prefValues[l.kAddressBarPosition],onChange:y(l.kAddressBarPosition),className:"group",__source:{fileName:w,lineNumber:127,columnNumber:7}},n.createElement(c.b,{text:Object(o.a)("Top"),__source:{fileName:w,lineNumber:133,columnNumber:9}},n.createElement("input",{type:"radio",value:"top",__source:{fileName:w,lineNumber:134,columnNumber:11}})),n.createElement(c.b,{text:Object(o.a)("Bottom"),__source:{fileName:w,lineNumber:136,columnNumber:9}},n.createElement("input",{type:"radio",value:"bottom",__source:{fileName:w,lineNumber:137,columnNumber:11}}))))}renderAddressBarOptions(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Address Field Options"),__source:{fileName:w,lineNumber:144,columnNumber:13}},n.createElement(c.b,{text:Object(o.a)("Show Full Address"),__source:{fileName:w,lineNumber:145,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowFullUrl],onChange:y(l.kAddressBarShowFullUrl),__source:{fileName:w,lineNumber:146,columnNumber:9}})),n.createElement(c.b,{text:Object(o.a)("Select Address on Activation"),__source:{fileName:w,lineNumber:150,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarSelectOnClick],onChange:y(l.kAddressBarSelectOnClick),__source:{fileName:w,lineNumber:151,columnNumber:9}})),n.createElement(c.b,{text:Object(o.a)("Copy and Cut Encoded Address"),__source:{fileName:w,lineNumber:155,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarOmniboxCutcopyEncoded],onChange:y(l.kAddressBarOmniboxCutcopyEncoded),__source:{fileName:w,lineNumber:156,columnNumber:9}})),n.createElement(c.b,{text:Object(o.a)("Page Load Progress Bar"),__source:{fileName:w,lineNumber:160,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowProgress],onChange:y(l.kAddressBarShowProgress),__source:{fileName:w,lineNumber:161,columnNumber:9}})),n.createElement(c.b,{text:Object(o.a)("QR Code Generator"),__source:{fileName:w,lineNumber:165,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowQrGenerator],onChange:y(l.kAddressBarShowQrGenerator),__source:{fileName:w,lineNumber:166,columnNumber:9}})))}renderAddressBarAutoComplete(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Address Auto-Complete"),__source:{fileName:w,lineNumber:174,columnNumber:13}},n.createElement(c.b,{text:Object(o.a)("radio","Enabled"),__source:{fileName:w,lineNumber:175,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompleteEnabled],onChange:y(l.kAddressBarAutocompleteEnabled),__source:{fileName:w,lineNumber:176,columnNumber:9}})),n.createElement(c.b,{className:"pad-left",text:Object(o.a)("Always Prefer Bookmarks"),__source:{fileName:w,lineNumber:182,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompletePreferBookmarks],disabled:!this.props.prefValues[l.kAddressBarAutocompleteEnabled],onChange:y(l.kAddressBarAutocompletePreferBookmarks),__source:{fileName:w,lineNumber:183,columnNumber:9}})))}renderDomainExpansion(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Domain Expansion"),__source:{fileName:w,lineNumber:195,columnNumber:13}},n.createElement("p",{className:"info pad-top",__source:{fileName:w,lineNumber:196,columnNumber:7}},Object(o.a)("Expand top level domains with Ctrl + Enter. This shortcut takes precedence over tab opening modifiers")),n.createElement(c.b,{text:Object(o.a)("radio","Enabled"),__source:{fileName:w,lineNumber:200,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionEnabled],onChange:y(l.kAddressBarAutocompleteSuffixExpansionEnabled),__source:{fileName:w,lineNumber:201,columnNumber:9}})),n.createElement(c.b,{className:"pad-left",text:Object(o.a)("Suffix"),__source:{fileName:w,lineNumber:206,columnNumber:7}},n.createElement("input",{disabled:!this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionEnabled],type:"text",defaultValue:this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionValue],maxLength:"256",onChange:y(l.kAddressBarAutocompleteSuffixExpansionValue),__source:{fileName:w,lineNumber:207,columnNumber:9}})))}renderExtensions(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Extension Visibility"),__source:{fileName:w,lineNumber:218,columnNumber:13}},n.createElement(c.b,{label:Object(o.a)("Show and hide only hidden extensions"),text:Object(o.a)("Toggle Only Hidden Extensions"),__source:{fileName:w,lineNumber:219,columnNumber:7}},n.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[l.kAddressBarExtensionsShowHiddenToggle],onChange:this.changeExtensionToggleHidden,__source:{fileName:w,lineNumber:223,columnNumber:9}})),n.createElement(c.b,{label:Object(o.a)("Show and hide all extensions"),text:Object(o.a)("Toggle All Extensions"),__source:{fileName:w,lineNumber:231,columnNumber:7}},n.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[l.kAddressBarExtensionsShowAllToggle],onChange:this.changeExtensionToggleAll,__source:{fileName:w,lineNumber:235,columnNumber:9}})),n.createElement(c.b,{label:Object(o.a)("Enable the drop-down menu for hidden extensions"),text:Object(o.a)("Expand Hidden Extensions to Drop-Down Menu"),__source:{fileName:w,lineNumber:243,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarExtensionsRenderInDropdown],onChange:this.enableExtensionRenderInDropdown,__source:{fileName:w,lineNumber:247,columnNumber:9}})))}renderProfileManagement(){return n.createElement(c.a,{filter:this.props.filter,heading:Object(o.a)("Profile Management"),__source:{fileName:w,lineNumber:257,columnNumber:13}},n.createElement(c.b,{text:Object(o.a)("Show Profile Button"),__source:{fileName:w,lineNumber:258,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowProfile],onChange:y(l.kAddressBarShowProfile),__source:{fileName:w,lineNumber:259,columnNumber:9}})),n.createElement("input",{type:"button",onClick:E.a.managePeople,value:Object(o.a)("Manage Profiles"),__source:{fileName:w,lineNumber:263,columnNumber:7}}))}render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("title","Address Bar"),filter:this.props.filter,__source:{fileName:w,lineNumber:291,columnNumber:7}},this.renderShowAddressBar(),this.renderAddressBarPosition(),this.renderAddressBarOptions(),n.createElement(_,{value:this.props.prefValues[l.kAddressBarUrlOpenShortcut],filter:this.props.filter,__source:{fileName:w,lineNumber:296,columnNumber:9}}),this.renderAddressBarAutoComplete(),n.createElement(h,{prefValues:this.props.prefValues,filter:this.props.filter,__source:{fileName:w,lineNumber:303,columnNumber:9}}),this.renderDomainExpansion(),this.renderProfileManagement(),this.renderExtensions(),this.renderSecurityFeatures())}}var T=Object(v.a)(S,O),k=a(40),A=a.n(k),I=a(65),D=a(1307),M=a(385),P=a(25),x=a(10),L=a(7),j="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\Appearance.jsx";function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B=[l.kAppearanceCssUiModsDirectory,l.kAppearanceHudEnabled,l.kAppearanceRangeButtons,l.kPopupsShowInTab,l.kSettingsInTab,l.kStatusBarDisplay,l.kStatusBarMinimized,l.kThemeSimpleScrollbar,l.kThemeUseAnimation,l.kWindowsLinuxAltControls,l.kWindowsUseNativeDecoration],F=r.a.getEventHandler,U=[{key:l.kToolbarsNavigation,name:Object(o.a)("Reset Address Bar")},{key:l.kToolbarsStatus,name:Object(o.a)("Reset Status Bar")}];class H extends i.a.Component{constructor(...e){super(...e),R(this,"state",{modFolder:this.props.prefValues[l.kAppearanceCssUiModsDirectory]}),R(this,"reportStatusBar",e=>{const{value:t}=e.target;r.a.set(l.kStatusBarDisplay,t),"on"!==t&&(r.a.set(l.kStatusBarMinimized,t),"overlay"===t&&I.a.setStatus(Object(o.a)("Status Info set to Overlay"),2e3))}),R(this,"handleResetToolbarClick",e=>{r.a.reset(e)}),R(this,"uiZoomUpdate",()=>{const e=A.a.findDOMNode(this.refs.ui_zoom_setting),{Element:t}=this.context;e instanceof t&&e.scrollIntoViewIfNeeded()}),R(this,"selectCSSFolder",()=>{L.a.utilities.selectFile(Object(o.a)("Select Folder for CSS UI Mods"),"folder",e=>{!x.a.runtime.lastError&&e&&(this.setState({modFolder:e}),r.a.set(l.kAppearanceCssUiModsDirectory,e))})}),R(this,"onChangeCSSModFolder",e=>{this.setState({modFolder:e.target.value}),r.a.set(l.kAppearanceCssUiModsDirectory,e.target.value)})}renderUseNativeWindow(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:92,columnNumber:7}},i.a.createElement("label",{__source:{fileName:j,lineNumber:93,columnNumber:9}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWindowsUseNativeDecoration],onChange:F(l.kWindowsUseNativeDecoration),__source:{fileName:j,lineNumber:94,columnNumber:11}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:97,columnNumber:11}},Object(o.a)("Use Native Window"))),i.a.createElement("p",{className:"info",__source:{fileName:j,lineNumber:99,columnNumber:9}},Object(o.a)("This setting requires a restart to take full effect.")))}renderOpenInTabs(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:108,columnNumber:7}},i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:109,columnNumber:9}},i.a.createElement("label",{__source:{fileName:j,lineNumber:110,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kSettingsInTab],onChange:F(l.kSettingsInTab),__source:{fileName:j,lineNumber:111,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:115,columnNumber:13}},Object(o.a)("Open Settings in a Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:118,columnNumber:9}},i.a.createElement("label",{__source:{fileName:j,lineNumber:119,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPopupsShowInTab],onChange:F(l.kPopupsShowInTab),__source:{fileName:j,lineNumber:120,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:123,columnNumber:13}},Object(o.a)("Open Popups in Tabs")))))}renderShowUI(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:132,columnNumber:7}},i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:133,columnNumber:9}},i.a.createElement("label",{__source:{fileName:j,lineNumber:134,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeUseAnimation],onChange:F(l.kThemeUseAnimation),__source:{fileName:j,lineNumber:135,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:138,columnNumber:13}},Object(o.a)("Use Animation")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:143,columnNumber:11}},i.a.createElement("label",{__source:{fileName:j,lineNumber:144,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeSimpleScrollbar],onChange:F(l.kThemeSimpleScrollbar),__source:{fileName:j,lineNumber:145,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:148,columnNumber:15}},Object(o.a)("Simple Scrollbars")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:153,columnNumber:9}},i.a.createElement("label",{__source:{fileName:j,lineNumber:154,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAppearanceRangeButtons],onChange:F(l.kAppearanceRangeButtons),__source:{fileName:j,lineNumber:155,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:158,columnNumber:13}},Object(o.a)("Use Buttons in Range Controls")))))}renderWindowsControlPosition(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:167,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:j,lineNumber:168,columnNumber:9}},Object(o.a)("Window Controls Position")),i.a.createElement(p.a,{className:"linuxAltControls",name:"linuxAltControls",value:this.props.prefValues[l.kWindowsLinuxAltControls],onChange:F(l.kWindowsLinuxAltControls,"convert"),__source:{fileName:j,lineNumber:169,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:173,columnNumber:11}},i.a.createElement("label",{__source:{fileName:j,lineNumber:174,columnNumber:13}},i.a.createElement("input",{type:"radio",value:"false",__source:{fileName:j,lineNumber:175,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:176,columnNumber:15}},Object(o.a)("Right Side")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:179,columnNumber:11}},i.a.createElement("label",{__source:{fileName:j,lineNumber:180,columnNumber:13}},i.a.createElement("input",{type:"radio",value:"true",__source:{fileName:j,lineNumber:181,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:182,columnNumber:15}},Object(o.a)("Left Side"))))))}renderStatusBar(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:192,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:j,lineNumber:193,columnNumber:9}},Object(o.a)("title","Status Bar")),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:194,columnNumber:9}},i.a.createElement(p.a,{name:"StatusBar",className:"group",value:this.props.prefValues[l.kStatusBarDisplay],onChange:this.reportStatusBar,__source:{fileName:j,lineNumber:195,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:199,columnNumber:13}},i.a.createElement("label",{__source:{fileName:j,lineNumber:200,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"on",__source:{fileName:j,lineNumber:201,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:202,columnNumber:17}},Object(o.a)("verb","Show Status Bar")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:205,columnNumber:13}},i.a.createElement("label",{__source:{fileName:j,lineNumber:206,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"overlay",__source:{fileName:j,lineNumber:207,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:208,columnNumber:17}},Object(o.a)("Status Info Overlay")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:211,columnNumber:13}},i.a.createElement("label",{__source:{fileName:j,lineNumber:212,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"off",__source:{fileName:j,lineNumber:213,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:214,columnNumber:17}},Object(o.a)("verb","Hide Status Bar")))))))}renderToolbarCustomizations(){const e=U.map(e=>i.a.createElement("div",{className:"setting-single",key:e.key,__source:{fileName:j,lineNumber:226,columnNumber:9}},i.a.createElement("input",{type:"button",onClick:this.handleResetToolbarClick.bind(this,e.key),value:e.name,__source:{fileName:j,lineNumber:227,columnNumber:11}})));return(i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:234,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:j,lineNumber:235,columnNumber:9}},Object(o.a)("Toolbar Customization")),e))}renderUserInterfaceZoom(){return i.a.createElement("div",{className:"setting-group unlimited",ref:"ui_zoom_setting",__source:{fileName:j,lineNumber:252,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:j,lineNumber:253,columnNumber:9}},Object(o.a)("User Interface Zoom")),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:254,columnNumber:9}},i.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:j,lineNumber:255,columnNumber:11}},i.a.createElement(D.a,{onUIZoomUpdate:this.uiZoomUpdate,__source:{fileName:j,lineNumber:256,columnNumber:12}}))))}renderCustomStylingOptions(){return M.a.isEnabled("css_mods")?i.a.createElement("div",{className:"setting-subgroup",__source:{fileName:j,lineNumber:281,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:282,columnNumber:11}},i.a.createElement("div",{className:"setting-single folder-selection",__source:{fileName:j,lineNumber:283,columnNumber:13}},i.a.createElement("input",{type:"text",value:this.state.modFolder,title:Object(o.a)("Enter Custom UI Modifications Path"),onChange:this.onChangeCSSModFolder,__source:{fileName:j,lineNumber:284,columnNumber:15}}),i.a.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectCSSFolder,__source:{fileName:j,lineNumber:288,columnNumber:17}})),i.a.createElement("p",{className:"info",__source:{fileName:j,lineNumber:292,columnNumber:13}},Object(o.a)("Directory for custom CSS UI modification files."),i.a.createElement("br",{__source:{fileName:j,lineNumber:293,columnNumber:69}}),Object(o.a)("They must have a .css extension to be included."),i.a.createElement("br",{__source:{fileName:j,lineNumber:294,columnNumber:69}}),Object(o.a)("No guarantees are made that these will work in new versions of Vivaldi."),i.a.createElement("br",{__source:{fileName:j,lineNumber:295,columnNumber:93}}),Object(o.a)("This requires a restart to apply.")))):null}renderHUD(){return i.a.createElement("div",{className:"setting-group",__source:{fileName:j,lineNumber:307,columnNumber:12}},i.a.createElement("h3",{__source:{fileName:j,lineNumber:308,columnNumber:7}},Object(o.a)("Overlaid Status Indicator")),i.a.createElement("div",{className:"setting-single",__source:{fileName:j,lineNumber:309,columnNumber:7}},i.a.createElement("label",{__source:{fileName:j,lineNumber:310,columnNumber:9}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAppearanceHudEnabled],onChange:F(l.kAppearanceHudEnabled),__source:{fileName:j,lineNumber:311,columnNumber:11}}),i.a.createElement("span",{__source:{fileName:j,lineNumber:315,columnNumber:11}},Object(o.a)("Show when entering or exiting Break Mode")))))}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{categoryTitle:Object(o.a)("Window Appearance"),filter:this.props.filter,__source:{fileName:j,lineNumber:324,columnNumber:9}},this.renderOpenInTabs(),this.renderShowUI(),this.renderUseNativeWindow(),!1,this.renderStatusBar(),this.renderToolbarCustomizations(),this.renderUserInterfaceZoom(),this.renderHUD()),i.a.createElement(C.a,{categoryTitle:Object(o.a)("Custom UI Modifications"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:j,lineNumber:338,columnNumber:9}},this.renderCustomStylingOptions()))}}R(H,"contextType",P.a);var V=Object(v.a)(H,B),W="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\updates\\Autoupdate.jsx";function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G(e,t,a,n){return $(e,t),Y(a,"set"),function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,a,n),n}function K(e,t,a){return $(e,t),Y(a,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,a)}function Y(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function $(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}const X=[l.kUpdateNotifier,l.kUpdateSchedule];class Z extends i.a.Component{constructor(...e){super(...e),z(this,"_isMounted",!1),z(this,"_updateNotifierStatusKnown",!1),z(this,"state",{showUpdateSettings:!1,updateNotifierEnabled:!1,autoInstallUpdate:!0}),z(this,"refreshUpdateNotifierEnabled",()=>{L.a.autoUpdate.isUpdateNotifierEnabled(e=>{this.setUpdateNotifierEnabled(e)})}),z(this,"setUpdateNotifierEnabled",e=>{this._isMounted&&this.setState({updateNotifierEnabled:e})}),z(this,"refreshAutoInstallUpdates",()=>{L.a.autoUpdate.getAutoInstallUpdates(e=>{this._isMounted&&this.setState({autoInstallUpdate:e})})}),z(this,"toggleUpdateSettings",()=>{this._updateNotifierStatusKnown||(this._updateNotifierStatusKnown=!0,this.refreshUpdateNotifierEnabled()),this.setState(e=>({showUpdateSettings:!e.showUpdateSettings}))}),z(this,"toggleUpdateNotifier",e=>{e.target.checked?L.a.autoUpdate.enableUpdateNotifier(e=>{e?this.setUpdateNotifierEnabled(!0):this.refreshUpdateNotifierEnabled()}):L.a.autoUpdate.disableUpdateNotifier(e=>{e?this.setUpdateNotifierEnabled(!1):this.refreshUpdateNotifierEnabled()})}),z(this,"toggleAutoInstallUpdate",e=>{const t=e.target.checked;L.a.autoUpdate.setAutoInstallUpdates(t),this.refreshAutoInstallUpdates()})}componentDidMount(){this._isMounted=!0,void 0===K(Z,Z,Q)&&L.a.autoUpdate.hasAutoUpdates().then(e=>{G(Z,Z,Q,e),this._isMounted&&this.forceUpdate()})}componentWillUnmount(){this._isMounted=!1}getUpdateLabel(){return!1===K(Z,Z,Q)?Object(o.a)("Notify About Updates"):Object(o.a)("Automatically Download and Install Updates")}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Updates"),filter:this.props.filter,__source:{fileName:W,lineNumber:138,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:W,lineNumber:139,columnNumber:9}},i.a.createElement("p",{__source:{fileName:W,lineNumber:141,columnNumber:11}},Object(o.a)("Get the latest security fixes by allowing automatic updates of Vivaldi.")),!1,i.a.createElement("div",{className:"setting-single",__source:{fileName:W,lineNumber:180,columnNumber:13}},i.a.createElement("input",{type:"button",value:this.state.showUpdateSettings?Object(o.a)("Hide Update Settings"):Object(o.a)("Show Update Settings"),onClick:this.toggleUpdateSettings,__source:{fileName:W,lineNumber:181,columnNumber:15}})),this.state.showUpdateSettings&&i.a.createElement("div",{className:"setting-single",__source:{fileName:W,lineNumber:191,columnNumber:13}},i.a.createElement("label",{__source:{fileName:W,lineNumber:192,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.state.updateNotifierEnabled,onChange:this.toggleUpdateNotifier,__source:{fileName:W,lineNumber:193,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:W,lineNumber:196,columnNumber:17}},this.getUpdateLabel()))),!1))}}var Q={writable:!0,value:void 0},q=Object(v.a)(Z,X),J="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\biscuit\\BiscuitMode.jsx";const ee=[l.kBiscuitLoadBookmarks,l.kBiscuitLogLevel,l.kBiscuitVersion],te=r.a.getEventHandler;class ae extends i.a.Component{render(){return"🐶"!==this.props.filter?null:i.a.createElement("span",{__source:{fileName:J,lineNumber:33,columnNumber:7}},i.a.createElement("h2",{__source:{fileName:J,lineNumber:34,columnNumber:9}},"Biscuit Area 🐶"),i.a.createElement("div",{className:"setting-group",__source:{fileName:J,lineNumber:35,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:J,lineNumber:36,columnNumber:11}},"Biscuit Mode"),i.a.createElement("div",{className:"setting-single",__source:{fileName:J,lineNumber:37,columnNumber:13}},i.a.createElement("label",{__source:{fileName:J,lineNumber:38,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBiscuitVersion],onChange:te(l.kBiscuitVersion),__source:{fileName:J,lineNumber:39,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:J,lineNumber:42,columnNumber:19}},"Show Browser Version on Status Bar"))),i.a.createElement("div",{className:"setting-single",__source:{fileName:J,lineNumber:45,columnNumber:13}},i.a.createElement("label",{__source:{fileName:J,lineNumber:46,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBiscuitLoadBookmarks],onChange:te(l.kBiscuitLoadBookmarks),__source:{fileName:J,lineNumber:47,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:J,lineNumber:50,columnNumber:19}},"Upgrade Bookmarks Every Startup"))),i.a.createElement("div",{className:"setting-single",__source:{fileName:J,lineNumber:53,columnNumber:13}},i.a.createElement("span",{__source:{fileName:J,lineNumber:54,columnNumber:15}},"Log level"),i.a.createElement("select",{value:this.props.prefValues[l.kBiscuitLogLevel],onChange:te(l.kBiscuitLogLevel),__source:{fileName:J,lineNumber:55,columnNumber:15}},i.a.createElement("option",{value:"info",__source:{fileName:J,lineNumber:58,columnNumber:17}},"Info"),i.a.createElement("option",{value:"warn",__source:{fileName:J,lineNumber:59,columnNumber:17}},"Warn"),i.a.createElement("option",{value:"error",__source:{fileName:J,lineNumber:60,columnNumber:17}},"Error"),i.a.createElement("option",{value:"none",__source:{fileName:J,lineNumber:61,columnNumber:17}},"None")))))}}var ne=Object(v.a)(ae,ee),ie=a(50),se=a(773),re="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkBar.jsx";const oe=[l.kBookmarksBarDisplay,l.kBookmarksBarPosition,l.kBookmarksBarVisible],le=r.a.getEventHandler;class ce extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=e=>{ie.a.setBookmarkBarFolder(e.target.value)},(a="onFolderChange")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Bookmark Bar"),filter:this.props.filter,__source:{fileName:re,lineNumber:36,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:re,lineNumber:37,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:38,columnNumber:11}},i.a.createElement("label",{__source:{fileName:re,lineNumber:39,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksBarVisible],onChange:le(l.kBookmarksBarVisible),__source:{fileName:re,lineNumber:40,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:43,columnNumber:15}},Object(o.a)("Show Bookmark Bar"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:re,lineNumber:48,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:re,lineNumber:49,columnNumber:11}},Object(o.a)("Select Bookmark Bar Folder")),i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:50,columnNumber:11}},i.a.createElement(se.a,{onChange:this.onFolderChange,__source:{fileName:re,lineNumber:51,columnNumber:13}}))),i.a.createElement("div",{className:"setting-group",__source:{fileName:re,lineNumber:56,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:re,lineNumber:57,columnNumber:11}},Object(o.a)("Bookmark Bar Position")),i.a.createElement(p.a,{name:"bookmark-position",value:this.props.prefValues[l.kBookmarksBarPosition],onChange:le(l.kBookmarksBarPosition),__source:{fileName:re,lineNumber:58,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:61,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:62,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"top",__source:{fileName:re,lineNumber:63,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:64,columnNumber:17}},Object(o.a)("Top")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:67,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:68,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"bottom",__source:{fileName:re,lineNumber:69,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:70,columnNumber:17}},Object(o.a)("Bottom")))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:re,lineNumber:76,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:re,lineNumber:77,columnNumber:11}},Object(o.a)("Bookmark Bar Display")),i.a.createElement(p.a,{name:"bookmark_bar_display",value:this.props.prefValues[l.kBookmarksBarDisplay],onChange:le(l.kBookmarksBarDisplay),__source:{fileName:re,lineNumber:79,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:82,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:83,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"default",__source:{fileName:re,lineNumber:84,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:85,columnNumber:17}},Object(o.a)("Text and Icon")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:88,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:89,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"text",__source:{fileName:re,lineNumber:90,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:91,columnNumber:17}},Object(o.a)("Text Only")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:94,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:95,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"icon",__source:{fileName:re,lineNumber:96,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:97,columnNumber:17}},Object(o.a)("Icon Only")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:re,lineNumber:100,columnNumber:13}},i.a.createElement("label",{__source:{fileName:re,lineNumber:101,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"iconexceptfolders",__source:{fileName:re,lineNumber:102,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:re,lineNumber:103,columnNumber:17}},Object(o.a)("Bookmark Icon Only")))))))}}var ue=Object(v.a)(ce,oe),me="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkSettings.jsx";function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const he=[l.kBookmarksConfirmAdding,l.kBookmarksConfirmOpening,l.kBookmarksConfirmOpeningThreshold,l.kBookmarksFetchPageMetadata,l.kBookmarksOpenInNewTab,l.kBookmarksSingleClickOpens,l.kBookmarksUnderlineMenuLetter],pe=r.a.getEventHandler;class be extends n.Component{constructor(...e){super(...e),de(this,"minThreshold",1),de(this,"maxThreshold",99)}render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("Bookmarks"),filter:this.props.filter,__source:{fileName:me,lineNumber:41,columnNumber:7}},n.createElement("div",{className:"setting-group unlimited",__source:{fileName:me,lineNumber:42,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:me,lineNumber:43,columnNumber:11}},n.createElement("label",{__source:{fileName:me,lineNumber:44,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksOpenInNewTab],onChange:pe(l.kBookmarksOpenInNewTab),__source:{fileName:me,lineNumber:45,columnNumber:15}}),n.createElement("span",{__source:{fileName:me,lineNumber:50,columnNumber:15}},Object(o.a)("Open Bookmarks in New Tab")))),n.createElement("div",{className:"setting-single",__source:{fileName:me,lineNumber:53,columnNumber:11}},n.createElement("label",{__source:{fileName:me,lineNumber:54,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksSingleClickOpens],onChange:pe(l.kBookmarksSingleClickOpens),__source:{fileName:me,lineNumber:55,columnNumber:15}}),n.createElement("span",{__source:{fileName:me,lineNumber:58,columnNumber:17}},Object(o.a)("Open Bookmark Panel Items with Single Click")))),n.createElement("div",{className:"setting-single",__source:{fileName:me,lineNumber:62,columnNumber:13}},n.createElement("label",{__source:{fileName:me,lineNumber:63,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksUnderlineMenuLetter],onChange:pe(l.kBookmarksUnderlineMenuLetter),__source:{fileName:me,lineNumber:64,columnNumber:17}}),n.createElement("span",{__source:{fileName:me,lineNumber:68,columnNumber:19}},Object(o.a)("Use '&' in Title to Underline Next Letter in Menus")))),n.createElement("div",{className:"setting-single max-bookmarks",__source:{fileName:me,lineNumber:72,columnNumber:11}},n.createElement("label",{__source:{fileName:me,lineNumber:73,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksConfirmOpening],onChange:pe(l.kBookmarksConfirmOpening),__source:{fileName:me,lineNumber:74,columnNumber:15}}),n.createElement("span",{__source:{fileName:me,lineNumber:79,columnNumber:15}},Object(o.a)("Confirm Opening Bookmarks over Maximum of")),n.createElement("input",{type:"number",size:"2",disabled:!this.props.prefValues[l.kBookmarksConfirmOpening],value:this.props.prefValues[l.kBookmarksConfirmOpeningThreshold],onChange:pe(l.kBookmarksConfirmOpeningThreshold),min:this.minThreshold,max:this.maxThreshold,__source:{fileName:me,lineNumber:80,columnNumber:15}}))),n.createElement("div",{className:"setting-single max-bookmarks",__source:{fileName:me,lineNumber:90,columnNumber:11}},n.createElement(c.b,{text:Object(o.a)("Fetch Bookmark Data from Page Metadata"),__source:{fileName:me,lineNumber:91,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksFetchPageMetadata],onChange:pe(l.kBookmarksFetchPageMetadata),__source:{fileName:me,lineNumber:92,columnNumber:15}}))),n.createElement("div",{className:"setting-single",__source:{fileName:me,lineNumber:99,columnNumber:11}},n.createElement(c.b,{text:Object(o.a)("Always Open Bookmark Dialog"),__source:{fileName:me,lineNumber:100,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksConfirmAdding],onChange:pe(l.kBookmarksConfirmAdding),__source:{fileName:me,lineNumber:101,columnNumber:15}})))))}}var ge=Object(v.a)(be,he),Ne=a(15),fe=a.n(Ne),_e=a(598),ve=a(38),Ee="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CalendarSettings.jsx";const Ce=[l.kCalendarAutoAdjustEnd,l.kCalendarAutoTabDatetime,l.kCalendarClickOutside,l.kCalendarCollapseHours,l.kCalendarDayEnds,l.kCalendarDayStarts,l.kCalendarDefaultDuration,l.kCalendarDefaultNotification,l.kCalendarDisplayDensity,l.kCalendarDisplayEventIcons,l.kCalendarDisplayWeekNumber,l.kCalendarEditMode,l.kCalendarHiddenHidesNotifications,l.kCalendarMailAccount,l.kCalendarNotificationType,l.kCalendarNotificationSound,l.kCalendarOnlyHourlyDivider,l.kCalendarOnlyHourlyKeynav,l.kCalendarSendInviteEmailAction,l.kCalendarTimeIncrements,l.kMailAccounts],we=r.a.getEventHandler,Oe=[["",Object(o.a)("other","None")],["../../../resources/notification_ding.opus",Object(o.a)("Ding")],["../../../resources/notification_rooster.opus",Object(o.a)("Rooster")],["../../../resources/notification_tada.opus",Object(o.a)("Tada")]],ye=[[0,Object(o.a)("No Duration")],[5*ve.g,Object(o.a)("$1 minute","$1 minutes",[5])],[10*ve.g,Object(o.a)("$1 minute","$1 minutes",[10])],[15*ve.g,Object(o.a)("$1 minute","$1 minutes",[15])],[30*ve.g,Object(o.a)("$1 minute","$1 minutes",[30])],[45*ve.g,Object(o.a)("$1 minute","$1 minutes",[45])],[1*ve.f,Object(o.a)("$1 hour","$1 hours",[1])],[2*ve.f,Object(o.a)("$1 hour","$1 hours",[2])],[3*ve.f,Object(o.a)("$1 hour","$1 hours",[3])],[8*ve.f,Object(o.a)("$1 hour","$1 hours",[8])]],Se=fe()().startOf("day"),Te=[];for(;Se.hour()<13;){const e=Se.hour();Te.push(n.createElement("option",{key:e,value:e,__source:{fileName:Ee,lineNumber:90,columnNumber:20}},Se.format("LT"))),Se.add(1,"hour")}Se.hour(12);const ke=[];for(;Se.hour()>0;){Se.add(1,"hour");const e=Se.hour()||24;ke.push(n.createElement("option",{key:e,value:e,__source:{fileName:Ee,lineNumber:98,columnNumber:18}},Se.format("LT")))}class Ae extends n.Component{renderMailAccountSelection(){const e=this.props.prefValues[l.kMailAccounts],t=this.props.prefValues[l.kCalendarMailAccount],a=e.find(e=>e.MAIL_EMAIL===t);return n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:113,columnNumber:7}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:114,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:116,columnNumber:11}},Object(o.a)("Calendar Mail Account")),n.createElement("select",{value:t,onChange:we(l.kCalendarMailAccount),__source:{fileName:Ee,lineNumber:117,columnNumber:11}},!a&&n.createElement("option",{value:t,disabled:!0,__source:{fileName:Ee,lineNumber:122,columnNumber:15}},Object(o.a)("Select mail account")),e.map(e=>n.createElement("option",{key:e.MAIL_EMAIL,value:e.MAIL_EMAIL,__source:{fileName:Ee,lineNumber:125,columnNumber:15}},e.MAIL_EMAIL)))))}render(){return n.createElement(n.Fragment,null,n.createElement(C.a,{categoryTitle:Object(o.a)("Calendar Display"),filter:this.props.filter,__source:{fileName:Ee,lineNumber:140,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:144,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:145,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:146,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarDisplayEventIcons],onChange:we(l.kCalendarDisplayEventIcons),__source:{fileName:Ee,lineNumber:147,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:150,columnNumber:15}},Object(o.a)("Show Event Property Icons")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:153,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:154,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarDisplayWeekNumber],onChange:we(l.kCalendarDisplayWeekNumber),__source:{fileName:Ee,lineNumber:155,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:158,columnNumber:15}},Object(o.a)("Show Week Number"))),n.createElement("p",{className:"info",__source:{fileName:Ee,lineNumber:160,columnNumber:13}},Object(o.a)("For week settings see Language under General Settings.")))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:166,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:167,columnNumber:11}},Object(o.a)("Events Layout")),n.createElement(p.a,{name:"calendar-density",value:this.props.prefValues[l.kCalendarDisplayDensity],onChange:we(l.kCalendarDisplayDensity),className:"group",__source:{fileName:Ee,lineNumber:168,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:174,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:175,columnNumber:15}},n.createElement("input",{type:"radio",value:"full",__source:{fileName:Ee,lineNumber:176,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:177,columnNumber:17}},Object(o.a)("Full")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:180,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:181,columnNumber:15}},n.createElement("input",{type:"radio",value:"compact",__source:{fileName:Ee,lineNumber:182,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:183,columnNumber:17}},Object(o.a)("calendar","Compact")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:186,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:187,columnNumber:15}},n.createElement("input",{type:"radio",value:"minimal",__source:{fileName:Ee,lineNumber:188,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:189,columnNumber:17}},Object(o.a)("Minimal")))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:195,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:197,columnNumber:11}},Object(o.a)("Day Settings")),n.createElement("div",{className:"setting-single full-width",__source:{fileName:Ee,lineNumber:198,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:199,columnNumber:13}},n.createElement("span",{__source:{fileName:Ee,lineNumber:200,columnNumber:15}},Object(o.a)("Day Starts At")),n.createElement("select",{name:"day_starts",value:this.props.prefValues[l.kCalendarDayStarts],onChange:we(l.kCalendarDayStarts),__source:{fileName:Ee,lineNumber:201,columnNumber:15}},Te))),n.createElement("div",{className:"setting-single full-width",__source:{fileName:Ee,lineNumber:211,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:212,columnNumber:13}},n.createElement("span",{__source:{fileName:Ee,lineNumber:213,columnNumber:15}},Object(o.a)("Day Ends At")),n.createElement("select",{name:"day_ends",value:this.props.prefValues[l.kCalendarDayEnds],onChange:we(l.kCalendarDayEnds),__source:{fileName:Ee,lineNumber:214,columnNumber:15}},ke))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:224,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:225,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarCollapseHours],onChange:we(l.kCalendarCollapseHours),__source:{fileName:Ee,lineNumber:226,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:231,columnNumber:15}},Object(o.a)("Collapse Excluded Hours"))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:236,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:237,columnNumber:11}},Object(o.a)("Time Increments")),n.createElement(p.a,{name:"time-increments",value:this.props.prefValues[l.kCalendarTimeIncrements],onChange:we(l.kCalendarTimeIncrements),className:"group",__source:{fileName:Ee,lineNumber:238,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:244,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:245,columnNumber:15}},n.createElement("input",{type:"radio",value:"15",__source:{fileName:Ee,lineNumber:246,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:247,columnNumber:17}},Object(o.a)("15 Minutes")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:250,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:251,columnNumber:15}},n.createElement("input",{type:"radio",value:"30",__source:{fileName:Ee,lineNumber:252,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:253,columnNumber:17}},Object(o.a)("30 Minutes")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:256,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:257,columnNumber:15}},n.createElement("input",{type:"radio",value:"60",__source:{fileName:Ee,lineNumber:258,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:259,columnNumber:17}},Object(o.a)("1 Hour"))))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:263,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:264,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarOnlyHourlyDivider],onChange:we(l.kCalendarOnlyHourlyDivider),__source:{fileName:Ee,lineNumber:265,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:270,columnNumber:15}},Object(o.a)("Show Only 1 Hour Grid Lines")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:273,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:274,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarOnlyHourlyKeynav],onChange:we(l.kCalendarOnlyHourlyKeynav),__source:{fileName:Ee,lineNumber:275,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:280,columnNumber:15}},Object(o.a)("Use 1 Hour Increments for Keyboard Navigation"))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:285,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:287,columnNumber:11}},Object(o.a)("Click Outside Event Should")),n.createElement(p.a,{name:"click-outside",value:this.props.prefValues[l.kCalendarClickOutside],onChange:we(l.kCalendarClickOutside),className:"group",__source:{fileName:Ee,lineNumber:288,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:294,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:295,columnNumber:15}},n.createElement("input",{type:"radio",value:"cancel",__source:{fileName:Ee,lineNumber:296,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:298,columnNumber:17}},Object(o.a)("Discard Changes")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:301,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:302,columnNumber:15}},n.createElement("input",{type:"radio",value:"save_and_close",__source:{fileName:Ee,lineNumber:303,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:305,columnNumber:17}},Object(o.a)("Save Changes")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:308,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:309,columnNumber:15}},n.createElement("input",{type:"radio",value:"save_and_new",__source:{fileName:Ee,lineNumber:310,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:312,columnNumber:17}},Object(o.a)("Save Changes and Create new Event"))))))),n.createElement(C.a,{categoryTitle:Object(o.a)("Calendar Editing"),filter:this.props.filter,__source:{fileName:Ee,lineNumber:319,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:323,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:325,columnNumber:11}},Object(o.a)("Edit Mode")),n.createElement(p.a,{name:"edit-mode",value:this.props.prefValues[l.kCalendarEditMode],onChange:we(l.kCalendarEditMode),className:"group",__source:{fileName:Ee,lineNumber:326,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:332,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:333,columnNumber:15}},n.createElement("input",{type:"radio",value:"inline",__source:{fileName:Ee,lineNumber:334,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:336,columnNumber:17}},Object(o.a)("Inline")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:339,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:340,columnNumber:15}},n.createElement("input",{type:"radio",value:"popup",__source:{fileName:Ee,lineNumber:341,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:343,columnNumber:17}},Object(o.a)("radio","Dialog")))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:348,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:350,columnNumber:11}},Object(o.a)("Default Event Duration")),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:351,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:352,columnNumber:13}},n.createElement("select",{value:this.props.prefValues[l.kCalendarDefaultDuration],onChange:we(l.kCalendarDefaultDuration),__source:{fileName:Ee,lineNumber:353,columnNumber:15}},ye.map(([e,t])=>n.createElement("option",{key:e,value:e,__source:{fileName:Ee,lineNumber:358,columnNumber:19}},t)))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:369,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:371,columnNumber:11}},Object(o.a)("Auto Adjust End Time")),n.createElement("p",{className:"info",__source:{fileName:Ee,lineNumber:372,columnNumber:11}},Object(o.a)("Automatically update end time when editing to keep same event duration.")),n.createElement(p.a,{name:"auto-adjust-end",value:this.props.prefValues[l.kCalendarAutoAdjustEnd],onChange:we(l.kCalendarAutoAdjustEnd),className:"group",__source:{fileName:Ee,lineNumber:375,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:381,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:382,columnNumber:15}},n.createElement("input",{type:"radio",value:"always",__source:{fileName:Ee,lineNumber:383,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:384,columnNumber:17}},Object(o.a)("Always")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:387,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:388,columnNumber:15}},n.createElement("input",{type:"radio",value:"never",__source:{fileName:Ee,lineNumber:389,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:390,columnNumber:17}},Object(o.a)("other","Never")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:393,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:394,columnNumber:15}},n.createElement("input",{type:"radio",value:"timed_only",__source:{fileName:Ee,lineNumber:395,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:397,columnNumber:17}},Object(o.a)("Except for All Day Events")))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:402,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:404,columnNumber:11}},Object(o.a)("Auto Focus Next Date/Time")),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:405,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:406,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarAutoTabDatetime],onChange:we(l.kCalendarAutoTabDatetime),__source:{fileName:Ee,lineNumber:407,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:410,columnNumber:15}},Object(o.a)("Automatically move focus to next field after typing complete date or time value")))))),n.createElement(C.a,{categoryTitle:Object(o.a)("Calendar Notifications"),filter:this.props.filter,__source:{fileName:Ee,lineNumber:416,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:420,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:421,columnNumber:11}},n.createElement("label",{__source:{fileName:Ee,lineNumber:422,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarHiddenHidesNotifications],onChange:we(l.kCalendarHiddenHidesNotifications),__source:{fileName:Ee,lineNumber:423,columnNumber:15}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:427,columnNumber:15}},Object(o.a)("Disable for Hidden Calendars"))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:432,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:433,columnNumber:11}},Object(o.a)("Notification type")),n.createElement(p.a,{name:"calendarnotificationgroup",value:this.props.prefValues[l.kCalendarNotificationType]||"",onChange:we(l.kCalendarNotificationType),__source:{fileName:Ee,lineNumber:434,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:439,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:440,columnNumber:15}},n.createElement("input",{type:"radio",value:"system",__source:{fileName:Ee,lineNumber:441,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:442,columnNumber:17}},Object(o.a)("System Notification")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:445,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:446,columnNumber:15}},n.createElement("input",{type:"radio",value:"dialog",__source:{fileName:Ee,lineNumber:447,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:449,columnNumber:17}},Object(o.a)("calendar","Dialog")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:452,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:453,columnNumber:15}},n.createElement("input",{type:"radio",value:"melt",__source:{fileName:Ee,lineNumber:454,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:456,columnNumber:17}},Object(o.a)("Melt Browser")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:459,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:460,columnNumber:15}},n.createElement("input",{type:"radio",value:"burn",__source:{fileName:Ee,lineNumber:461,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:463,columnNumber:17}},Object(o.a)("Burn Browser")))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:469,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:470,columnNumber:11}},Object(o.a)("Notification Sound")),n.createElement(p.a,{name:"calendarnotificationsoundgroup",value:this.props.prefValues[l.kCalendarNotificationSound]||"",onChange:we(l.kCalendarNotificationSound),__source:{fileName:Ee,lineNumber:471,columnNumber:11}},Oe.map(([e,t])=>n.createElement("div",{className:"setting-single",key:e,__source:{fileName:Ee,lineNumber:477,columnNumber:15}},n.createElement("label",{__source:{fileName:Ee,lineNumber:478,columnNumber:17}},n.createElement("input",{type:"radio",value:e,__source:{fileName:Ee,lineNumber:479,columnNumber:19}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:480,columnNumber:19}},t)))))),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:487,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:488,columnNumber:11}},Object(o.a)("Default Event Notification")),n.createElement("select",{value:this.props.prefValues[l.kCalendarDefaultNotification],onChange:we(l.kCalendarDefaultNotification),__source:{fileName:Ee,lineNumber:489,columnNumber:11}},_e.a.map(([e,t])=>n.createElement("option",{key:e,value:e,__source:{fileName:Ee,lineNumber:494,columnNumber:15}},t))))),n.createElement(C.a,{categoryTitle:Object(o.a)("Calendar Integration"),filter:this.props.filter,__source:{fileName:Ee,lineNumber:505,columnNumber:7}},this.renderMailAccountSelection(),n.createElement("div",{className:"setting-group",__source:{fileName:Ee,lineNumber:511,columnNumber:9}},n.createElement("h3",{__source:{fileName:Ee,lineNumber:512,columnNumber:11}},Object(o.a)("Send Invite Email Messages")),n.createElement(p.a,{name:"calendarinviteemailsgroup",value:this.props.prefValues[l.kCalendarSendInviteEmailAction]||"",onChange:we(l.kCalendarSendInviteEmailAction),__source:{fileName:Ee,lineNumber:513,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:518,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:519,columnNumber:15}},n.createElement("input",{type:"radio",value:"ask",__source:{fileName:Ee,lineNumber:520,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:521,columnNumber:17}},Object(o.a)("Ask Each Time")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:524,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:525,columnNumber:15}},n.createElement("input",{type:"radio",value:"send",__source:{fileName:Ee,lineNumber:526,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:527,columnNumber:17}},Object(o.a)("Always Send Messages")))),n.createElement("div",{className:"setting-single",__source:{fileName:Ee,lineNumber:530,columnNumber:13}},n.createElement("label",{__source:{fileName:Ee,lineNumber:531,columnNumber:15}},n.createElement("input",{type:"radio",value:"cancel",__source:{fileName:Ee,lineNumber:532,columnNumber:17}}),n.createElement("span",{__source:{fileName:Ee,lineNumber:533,columnNumber:17}},Object(o.a)("Never Send Messages"))))))))}}var Ie=Object(v.a)(Ae,Ce),De=a(746),Me="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Capture.jsx";function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const xe=[l.kWebpagesCaptureDirectory,l.kWebpagesCaptureSaveFilePattern],Le=r.a.getEventHandler,je=new Date,Re="139cea89-3ed1-4ccd-bd3c-7a6a36f824d5",Be=[{tag:"$timestamp",title:Object(o.a)("Long date"),format:"YYYY-MM-DD HH.mm.ss"},{tag:"$year",title:Object(o.a)("Year"),format:"YYYY"},{tag:"$month",title:Object(o.a)("Month"),format:"MM"},{tag:"$day",title:Object(o.a)("Day"),format:"DD"},{tag:"$hour",title:Object(o.a)("Hour"),format:"HH"},{tag:"$minute",title:Object(o.a)("Minute"),format:"mm"},{tag:"$second",title:Object(o.a)("time","Second"),format:"ss"},{tag:"$ms",title:Object(o.a)("Millisecond"),format:"SSS"},{tag:"$longid",title:Object(o.a)("Unique ID"),value:Re},{tag:"$shortid",title:Object(o.a)("Short unique ID"),value:Re.substring(24)},{tag:"$host",title:Object(o.a)("Active tab host name"),value:"example.com"},{tag:"$title",title:Object(o.a)("Active tab title"),value:Object(o.a)("Example Page Title")}];class Fe extends n.Component{constructor(...e){super(...e),Pe(this,"handleDragEnter",e=>{const{dataTransfer:t,target:a}=e;a&&t.types.includes("text/plain")&&(a.setSelectionRange(a.value.length,a.value.length),a.focus())}),Pe(this,"setDragData",e=>{const{dataTransfer:t,target:a}=e;t.setData("text/plain",a.innerText),t.dropEffect="none",t.effectAllowed="copyMove",t.setDragImage(a,0,0)}),Pe(this,"handleDoubleClick",e=>{const{HTMLInputElement:t}=this.context,{target:a}=e;let n=a.innerText;if(this._inputRef instanceof t){const e=this._inputRef.selectionStart,t=this._inputRef.value||"";n=" "+n+" ";let a=e>0?t.substr(0,e)+n+t.substr(e):t+n;a=a.replace(/ {2}/g," ").trim(),r.a.set(l.kWebpagesCaptureSaveFilePattern,a),this._inputRef&&this._inputRef.focus()}}),Pe(this,"resetSetting",()=>{r.a.reset(l.kWebpagesCaptureSaveFilePattern)}),Pe(this,"parseFileName",()=>{let e=this.props.prefValues[l.kWebpagesCaptureSaveFilePattern];return Be.forEach(t=>{const a=new RegExp(Object(De.a)(t.tag),"gi"),n=t.format?fe()(je).format(t.format):t.value;e=e.replace(a,n)}),(e||Re)+".png"}),Pe(this,"selectCaptureFolder",()=>{L.a.utilities.selectFile(Object(o.a)("Select Capture Folder"),"folder",e=>{!x.a.runtime.lastError&&e&&r.a.set(l.kWebpagesCaptureDirectory,e)})}),Pe(this,"renderTags",()=>Be.map((e,t)=>n.createElement("span",{draggable:"true",key:t,onDoubleClick:this.handleDoubleClick,onDragStart:this.setDragData,title:e.title+(e.format?" ("+e.format+")":""),__source:{fileName:Me,lineNumber:123,columnNumber:11}},e.tag)))}render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("Image Capture"),filter:this.props.filter,__source:{fileName:Me,lineNumber:137,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:Me,lineNumber:140,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:Me,lineNumber:141,columnNumber:11}},n.createElement("h3",{__source:{fileName:Me,lineNumber:142,columnNumber:13}},Object(o.a)("Capture Storage Folder")),n.createElement("div",{className:"setting-single folder-selection",__source:{fileName:Me,lineNumber:143,columnNumber:13}},n.createElement("input",{type:"text",value:this.props.prefValues[l.kWebpagesCaptureDirectory],title:Object(o.a)("Enter capture storage folder"),spellCheck:"false",onChange:Le(l.kWebpagesCaptureDirectory),__source:{fileName:Me,lineNumber:144,columnNumber:15}}),n.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectCaptureFolder,__source:{fileName:Me,lineNumber:149,columnNumber:17}})))),n.createElement("div",{className:"setting-group",__source:{fileName:Me,lineNumber:155,columnNumber:9}},n.createElement("div",{className:"setting-single capture-name-template",__source:{fileName:Me,lineNumber:156,columnNumber:11}},n.createElement("h3",{__source:{fileName:Me,lineNumber:157,columnNumber:13}},Object(o.a)("Capture File Name Template")),n.createElement("input",{type:"text",ref:e=>this._inputRef=e,onDragEnter:this.handleDragEnter,value:this.props.prefValues[l.kWebpagesCaptureSaveFilePattern],title:Object(o.a)("Modify file name template"),spellCheck:"false",onChange:Le(l.kWebpagesCaptureSaveFilePattern),__source:{fileName:Me,lineNumber:158,columnNumber:13}}),n.createElement("p",{className:"info",__source:{fileName:Me,lineNumber:165,columnNumber:13}},this.parseFileName()),n.createElement("p",{className:"info",__source:{fileName:Me,lineNumber:168,columnNumber:13}},this.renderTags()),n.createElement("input",{type:"button",value:Object(o.a)("Restore Default"),onClick:this.resetSetting,__source:{fileName:Me,lineNumber:171,columnNumber:13}}))))}}Pe(Fe,"contextType",P.a);var Ue=Object(v.a)(Fe,xe),He=a(174),Ve=a(193),We=a(129),ze="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\chat\\ChatSettings.jsx";function Ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ke=[l.kChatDebugOutput,l.kChatNotifications,l.kChatNotificationsSoundOn,l.kChatProcessHintNoStore,l.kChatTabMode,l.kChatTypingIndication],Ye=r.a.getEventHandler;class $e extends i.a.Component{constructor(...e){super(...e),Ge(this,"state",{isLoggedIn:!1}),Ge(this,"chatStoreListener",()=>{const e=Ve.a.getState();this.setState({isLoggedIn:e.isLoggedIn})}),Ge(this,"connect",()=>{He.a.getClient().connect()}),Ge(this,"disconnect",()=>{He.a.getClient().disconnect()}),Ge(this,"signOut",()=>{He.a.signOut()})}componentDidMount(){this._chatStoreToken=Ve.a.addListener(this.chatStoreListener),this.chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{isLoggedIn:e}=this.state,{filter:t,prefValues:a}=this.props;return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Chat"),filter:t,__source:{fileName:ze,lineNumber:82,columnNumber:7}},e&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ze,lineNumber:87,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:88,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:89,columnNumber:15}},"Account"),i.a.createElement("p",{__source:{fileName:ze,lineNumber:90,columnNumber:15}},Object(We.j)(He.a.getClient().jid)),i.a.createElement("label",{__source:{fileName:ze,lineNumber:91,columnNumber:15}},i.a.createElement("input",{type:"button",className:"danger",onClick:this.signOut,value:Object(o.a)("Logout"),__source:{fileName:ze,lineNumber:92,columnNumber:17}})))),i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ze,lineNumber:101,columnNumber:11}},i.a.createElement("div",{className:"setting-group",__source:{fileName:ze,lineNumber:102,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:103,columnNumber:15}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:104,columnNumber:17}},"Debug"),i.a.createElement("input",{type:"button",onClick:this.disconnect,value:Object(o.a)("Disconnect"),__source:{fileName:ze,lineNumber:105,columnNumber:17}}),i.a.createElement("input",{type:"button",onClick:this.connect,value:Object(o.a)("Connect"),__source:{fileName:ze,lineNumber:110,columnNumber:17}}))),i.a.createElement("div",{className:"setting-group",__source:{fileName:ze,lineNumber:117,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:118,columnNumber:15}},Object(o.a)("Debug Console Output")),i.a.createElement(p.a,{name:"menuStyle",value:this.props.prefValues[l.kChatDebugOutput],onChange:Ye(l.kChatDebugOutput),className:"setting-single",__source:{fileName:ze,lineNumber:119,columnNumber:15}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:124,columnNumber:17}},i.a.createElement("label",{__source:{fileName:ze,lineNumber:125,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"off",__source:{fileName:ze,lineNumber:126,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:127,columnNumber:21}},Object(o.a)("Off")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:130,columnNumber:17}},i.a.createElement("label",{__source:{fileName:ze,lineNumber:131,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"simple",__source:{fileName:ze,lineNumber:132,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:133,columnNumber:21}},Object(o.a)("Simple")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:136,columnNumber:17}},i.a.createElement("label",{__source:{fileName:ze,lineNumber:137,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"verbose",__source:{fileName:ze,lineNumber:138,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:139,columnNumber:21}},Object(o.a)("Verbose")))))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:ze,lineNumber:147,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:148,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:149,columnNumber:13}},Object(o.a)("Notifications")),i.a.createElement("label",{__source:{fileName:ze,lineNumber:150,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:a[l.kChatNotifications],onChange:Ye(l.kChatNotifications),__source:{fileName:ze,lineNumber:151,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:156,columnNumber:17}},Object(o.a)("Notifications Enabled")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:159,columnNumber:11}},i.a.createElement("label",{__source:{fileName:ze,lineNumber:160,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:a[l.kChatNotificationsSoundOn],onChange:Ye(l.kChatNotificationsSoundOn),__source:{fileName:ze,lineNumber:161,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:166,columnNumber:15}},Object(o.a)("Play Sound"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:ze,lineNumber:170,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:171,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:172,columnNumber:13}},Object(o.a)("Typing Indication")),i.a.createElement("label",{__source:{fileName:ze,lineNumber:173,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:a[l.kChatTypingIndication],onChange:Ye(l.kChatTypingIndication),__source:{fileName:ze,lineNumber:174,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:179,columnNumber:15}},Object(o.a)("Send My Typing Status"))),i.a.createElement("p",{className:"info",__source:{fileName:ze,lineNumber:181,columnNumber:13}},Object(o.a)("Let other people see you're typing a message")))),i.a.createElement("div",{className:"setting-group",__source:{fileName:ze,lineNumber:186,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:187,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:188,columnNumber:13}},Object(o.a)("Store Messages")),i.a.createElement("label",{__source:{fileName:ze,lineNumber:189,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:a[l.kChatProcessHintNoStore],onChange:Ye(l.kChatProcessHintNoStore),__source:{fileName:ze,lineNumber:190,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:195,columnNumber:15}},Object(o.a)("Avoid Storing Messages"))),i.a.createElement("p",{className:"info",__source:{fileName:ze,lineNumber:197,columnNumber:13}},Object(o.a)("Tell the server to not store messages you send")))),i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ze,lineNumber:202,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ze,lineNumber:203,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ze,lineNumber:204,columnNumber:13}},Object(o.a)("Presentation")),i.a.createElement("p",{className:"info",__source:{fileName:ze,lineNumber:205,columnNumber:13}},Object(o.a)("Always open conversations in tabs")),i.a.createElement("label",{__source:{fileName:ze,lineNumber:208,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:a[l.kChatTabMode],onChange:Ye(l.kChatTabMode),__source:{fileName:ze,lineNumber:209,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ze,lineNumber:214,columnNumber:15}},Object(o.a)("Tab Mode"))))))}}Object(v.a)($e,Ke);var Xe=a(6),Ze="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ColorSettings.jsx";const Qe=[l.kThemeBlurEnable,l.kThemeColorAccentSaturationLimit,l.kThemeContrast,l.kThemeDimBlurred,l.kThemeTransparency,l.kThemeTransparentTabBar],qe=r.a.getEventHandler;class Je extends i.a.PureComponent{render(){const e=Xe.a.getDefault(l.kThemeContrast),t=Xe.a.getDefault(l.kThemeColorAccentSaturationLimit),a=Xe.a.getDefault(l.kThemeTransparency),n=this.props.prefValues[l.kThemeColorAccentSaturationLimit],s=this.props.prefValues[l.kThemeContrast],c=this.props.prefValues[l.kThemeTransparency];return i.a.createElement(C.a,{categoryTitle:Object(o.a)("noun","Color"),filter:this.props.filter,__source:{fileName:Ze,lineNumber:49,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Ze,lineNumber:52,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Ze,lineNumber:53,columnNumber:11}},Object(o.a)("Contrast Adjustment")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:54,columnNumber:11}},i.a.createElement("div",{className:"toolbar",__source:{fileName:Ze,lineNumber:55,columnNumber:13}},i.a.createElement("input",{type:"range",min:-4,max:20,step:1,style:{maxWidth:100},onChange:({target:e})=>{const t=Number(e.value)+5;r.a.set(l.kThemeContrast,t)},value:s-5,__source:{fileName:Ze,lineNumber:56,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:67,columnNumber:15}},s-5),i.a.createElement("input",{type:"button",style:{marginLeft:"auto"},onClick:()=>r.a.set(l.kThemeContrast,e),title:Object(o.a)("Reset Contrast"),disabled:s===e,value:Object(o.a)("Reset"),__source:{fileName:Ze,lineNumber:70,columnNumber:15}})))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Ze,lineNumber:84,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Ze,lineNumber:85,columnNumber:11}},Object(o.a)("Opacity")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:87,columnNumber:11}},i.a.createElement("div",{className:"toolbar",__source:{fileName:Ze,lineNumber:88,columnNumber:13}},i.a.createElement("input",{type:"range",min:.75,max:1,step:.01,style:{maxWidth:100},onChange:qe(l.kThemeTransparency),value:c,__source:{fileName:Ze,lineNumber:89,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:97,columnNumber:15}},`${Math.floor(100*c)}%`),i.a.createElement("input",{type:"button",style:{marginLeft:"auto"},onClick:()=>r.a.set(l.kThemeTransparency,a),title:Object(o.a)("Reset Opacity"),disabled:c===a,value:Object(o.a)("Reset"),__source:{fileName:Ze,lineNumber:100,columnNumber:15}}))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:112,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Ze,lineNumber:113,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeTransparentTabBar],onChange:qe(l.kThemeTransparentTabBar),__source:{fileName:Ze,lineNumber:114,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:117,columnNumber:15}},Object(o.a)("Transparent Tab Bar")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:121,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Ze,lineNumber:122,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeBlurEnable],onChange:qe(l.kThemeBlurEnable),__source:{fileName:Ze,lineNumber:123,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:126,columnNumber:13}},Object(o.a)("Enable Blur"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Ze,lineNumber:133,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Ze,lineNumber:134,columnNumber:11}},Object(o.a)("Limit Accent Color Saturation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:135,columnNumber:11}},i.a.createElement("div",{className:"toolbar",__source:{fileName:Ze,lineNumber:136,columnNumber:13}},i.a.createElement("input",{type:"range",min:.1,max:1,step:.1,style:{maxWidth:100},onChange:qe(l.kThemeColorAccentSaturationLimit),value:this.props.prefValues[l.kThemeColorAccentSaturationLimit],__source:{fileName:Ze,lineNumber:137,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:145,columnNumber:15}},`${Math.floor(100*n)}%`),i.a.createElement("input",{type:"button",style:{marginLeft:"auto"},onClick:()=>r.a.set(l.kThemeColorAccentSaturationLimit,t),title:Object(o.a)("Reset Contrast"),disabled:n===t,value:Object(o.a)("Reset"),__source:{fileName:Ze,lineNumber:148,columnNumber:15}})))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Ze,lineNumber:161,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Ze,lineNumber:162,columnNumber:11}},Object(o.a)("Background Window Behavior")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ze,lineNumber:164,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Ze,lineNumber:165,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeDimBlurred],onChange:qe(l.kThemeDimBlurred),__source:{fileName:Ze,lineNumber:166,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Ze,lineNumber:169,columnNumber:15}},Object(o.a)("Fade Foreground Colors"))))))}}var et=Object(v.a)(Je,Qe),tt=a(150),at=a(44),nt=a(200),it=a(31),st=a(90),rt=a(379),ot=a(78),lt=a(4);const ct="https://downloads.vivaldi.com/",ut={[ct+"ddg/tds-v2-current.json"]:"DuckDuckGo Tracker Radar",[ct+"easylist/easyprivacy-current.txt"]:"EasyPrivacy",[ct+"easylist/easylist-current.txt"]:"EasyList",[ct+"lists/abp/abp-filters-anti-cv-current.txt"]:"ABP anti-circumvention list",[ct+"lists/vivaldi/partners-current.txt"]:Object(o.a)("Allow ads from our partners (support Vivaldi)"),"https://www.i-dont-care-about-cookies.eu/abp/":Object(o.a)("Remove cookie warnings ($1)",["I don’t care about cookies"]),"https://secure.fanboy.co.nz/fanboy-cookiemonster.txt":Object(o.a)("Remove cookie warnings ($1)",["Easylist Cookie List"]),"https://easylist-downloads.adblockplus.org/Liste_AR.txt":Object(o.a)("Arabic ($1)",["Liste AR"]),"http://stanev.org/abp/adblock_bg.txt":Object(o.a)("Bulgarian ($1)",["Bulgarian List"]),"https://easylist-downloads.adblockplus.org/easylistchina.txt":Object(o.a)("Chinese ($1)",["EasyList China"]),"https://raw.githubusercontent.com/cjx82630/cjxlist/master/cjx-annoyance.txt":Object(o.a)("Chinese ($1)",["CJX’s Annoyance List"]),"https://raw.githubusercontent.com/yecarrillo/adblock-colombia/master/adblock_co.txt":Object(o.a)("Colombian ($1)",["Colombian List by Yecarrillo"]),"https://raw.githubusercontent.com/tomasko126/easylistczechandslovak/master/filters.txt":Object(o.a)("Czech and Slovak ($1)",["Czech and Slovak filter list"]),"https://easylist-downloads.adblockplus.org/easylistdutch.txt":Object(o.a)("Dutch ($1)",["EasyList Dutch"]),"https://pgl.yoyo.org/adservers/serverlist.php?hostformat=adblockplus&mimetype=plaintext":Object(o.a)("English ($1)",["Peter Lowe’s List"]),"https://adblock.ee/list.php":Object(o.a)("Estonian ($1)",["Eesti saitidele kohandatud filter"]),"https://gurud.ee/ab.txt":Object(o.a)("Estonian ($1)",["Filters by Gurud.ee"]),"https://cdn.rawgit.com/SlashArash/adblockfa/master/adblockfa.txt":Object(o.a)("Farsi ($1)",["AdBlock Farsi"]),"https://raw.githubusercontent.com/finnish-easylist-addition/finnish-easylist-addition/master/Finland_adb.txt":Object(o.a)("Finnish ($1)",["EasyList Finland"]),"https://easylist-downloads.adblockplus.org/liste_fr.txt":Object(o.a)("French ($1)",["Liste FR"]),"https://easylist.to/easylistgermany/easylistgermany.txt":Object(o.a)("German ($1)",["EasyList Germany"]),"https://www.void.gr/kargig/void-gr-filters.txt":Object(o.a)("Greek ($1)",["void.gr"]),"https://raw.githubusercontent.com/easylist/EasyListHebrew/master/EasyListHebrew.txt":Object(o.a)("Hebrew ($1)",["EasyList Hebrew"]),"https://raw.githubusercontent.com/hufilter/hufilter/master/hufilter.txt":Object(o.a)("Hungarian ($1)",["hufilter"]),"https://adblock.gardar.net/is.abp.txt":Object(o.a)("Icelandic ($1)",["Icelandic ABP List"]),"https://easylist-downloads.adblockplus.org/indianlist.txt":Object(o.a)("Indian ($1)",["Indian List"]),"https://raw.githubusercontent.com/heradhis/indonesianadblockrules/master/subscriptions/abpindo.txt":Object(o.a)("Indonesian ($1)",["ABPindo"]),"https://raw.githubusercontent.com/gioxx/xfiles/master/filtri.txt":Object(o.a)("Italian ($1)",["X Files"]),"https://easylist-downloads.adblockplus.org/easylistitaly.txt":Object(o.a)("Italian ($1)",["EasyList Italy"]),"https://raw.githubusercontent.com/k2jp/abp-japanese-filters/master/abpjf.txt":Object(o.a)("Japanese ($1)",["ABP Japanese filters"]),"https://raw.githubusercontent.com/eEIi0A5L/adblock_filter/master/mochi_filter.txt":Object(o.a)("Japanese ($1)",["もちフィルタ（広告ブロック）"]),"https://raw.githubusercontent.com/eEIi0A5L/adblock_filter/master/tamago_filter.txt":Object(o.a)("Japanese ($1)",["たまごフィルタ（mobile filter）"]),"https://easylist-downloads.adblockplus.org/koreanlist.txt":Object(o.a)("Korean ($1)",["Korean List"]),"https://raw.githubusercontent.com/yous/YousList/master/youslist.txt":Object(o.a)("Korean ($1)",["YousList"]),"https://notabug.org/latvian-list/adblock-latvian/raw/master/lists/latvian-list.txt":Object(o.a)("Latvian ($1)",["Latvian List"]),"https://raw.githubusercontent.com/EasyList-Lithuania/easylist_lithuania/master/easylistlithuania.txt":Object(o.a)("Lithuanian ($1)",["EasyList Lithuania"]),"https://raw.githubusercontent.com/DandelionSprout/adfilt/master/NorwegianExperimentalList%20alternate%20versions/NordicFiltersABP.txt":Object(o.a)("Nordic ($1)",["Dandelion Sprout’s Nordic Filters"]),"https://easylist-downloads.adblockplus.org/easylistpolish.txt":Object(o.a)("Polish ($1)",["EasyList Polish"]),"https://easylist-downloads.adblockplus.org/easylistportuguese.txt":Object(o.a)("Portuguese ($1)",["EasyList Portuguese"]),"https://www.zoso.ro/pages/rolist.txt":Object(o.a)("Romanian ($1)",["ROLIST"]),"https://easylist-downloads.adblockplus.org/advblock.txt":Object(o.a)("Russian ($1)",["RU AdList"]),"https://easylist-downloads.adblockplus.org/easylistspanish.txt":Object(o.a)("Spanish ($1)",["EasyList Spanish"]),"https://secure.fanboy.co.nz/fanboy-turkish.txt":Object(o.a)("Turkish ($1)",["Fanboy’s Turkish"]),"https://raw.githubusercontent.com/abpvn/abpvn/master/filter/abpvn.txt":Object(o.a)("Vietnamese ($1)",["ABPVN List"])};function mt(e){return ut[e]||e}var dt=a(9),ht=a(169),pt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerSources.jsx";function bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const gt={success:Object(o.a)("Fetched successfully"),download_failed:Object(o.a)("Failed to download"),file_not_found:Object(o.a)("File cannot be located"),file_read_error:Object(o.a)("File cannot be read"),file_unsupported:Object(o.a)("Invalid format"),failed_saving_parsed_rules:Object(o.a)("Cannot save to the profile"),unknown:Object(o.a)("Fetch not completed")};class Nt extends n.PureComponent{constructor(...e){super(...e),bt(this,"fileInput",n.createRef()),bt(this,"state",{blockerSources:[],sortedList:[],cachedSource:void 0,newSource:"",showEditor:0,importError:""}),bt(this,"updateSources",()=>{L.a.contentBlocking.getRuleSources(this.props.ruleGroup,e=>{this.setState({blockerSources:e,sortedList:this.remapSources(e)})}),this.state.cachedSource&&L.a.contentBlocking.getRuleSource(this.props.ruleGroup,this.state.cachedSource.id,e=>{"success"===e.last_fetch_result?this.setState({cachedSource:e,showEditor:3,importError:""}):this.setState({showEditor:1,importError:gt[e.last_fetch_result]})})}),bt(this,"remapSources",e=>{if(e){return e.map((e,t)=>{const a=e.unsafe_adblock_metadata,n=e.is_from_url?e.source_url:e.source_file,i=a.title&&mt(n)===n?a.title:mt(n);return{key:e.id.toString(),name:i,isDefault:e.source_url.startsWith(ct),enabled:e.loaded,id:e.id}}).sort((e,t)=>e.name<t.name?-1:1).sort((e,t)=>e.isDefault&&!t.isDefault?-1:1)}return[]}),bt(this,"updateNewSource",e=>{const{value:t}=e.currentTarget;this.setState({newSource:t})}),bt(this,"onImportFromFile",e=>{L.a.utilities.selectFile([{ext:"txt"}],Object(o.a)("Select a Blocker List Text File"),"file",e=>{!x.a.runtime.lastError&&e?this.importFromFile(e):this.closeDialog()})}),bt(this,"importFromFile",e=>{L.a.contentBlocking.addKnownSourceFromFile(this.props.ruleGroup,e,e=>this.finishImport(e))}),bt(this,"importFromUrl",()=>{this.state.newSource.includes(ct)?this.setState({importError:Object(o.a)("Failed to add internal list")}):L.a.contentBlocking.addKnownSourceFromURL(this.props.ruleGroup,this.state.newSource,e=>this.finishImport(e))}),bt(this,"finishImport",e=>{x.a.runtime.lastError?(console.warn(Object.values(x.a.runtime.lastError)),this.setState({cachedSource:void 0,importError:Object(o.a)("Failed to add list")})):L.a.contentBlocking.getRuleSource(this.props.ruleGroup,e,e=>{this.setState({cachedSource:e,showEditor:2,importError:""})})}),bt(this,"onToggleStatus",e=>{this.state.sortedList[e]&&this.toggleStatus(this.state.sortedList[e].id)}),bt(this,"toggleStatus",e=>{const t=this.state.blockerSources.find(t=>t.id===e);t&&(t.loaded?L.a.contentBlocking.disableSource(this.props.ruleGroup,e):L.a.contentBlocking.enableSource(this.props.ruleGroup,e))}),bt(this,"copySource",e=>{const t=this.state.blockerSources.find(t=>e===t.id);if(t){const e=t.is_from_url?t.source_url:t.source_file;nt.a.set(e)}}),bt(this,"onRemoveSource",e=>{this.state.sortedList[e]&&this.removeSource(this.state.sortedList[e].id)}),bt(this,"removeSource",e=>{L.a.contentBlocking.deleteKnownSource(this.props.ruleGroup,e)}),bt(this,"restoreSources",()=>{L.a.contentBlocking.resetPresetSources(this.props.ruleGroup),this.updateSources()}),bt(this,"onContextMenu",(e,t)=>{const a=this.state.sortedList[e];if(!a)return;const n=[{handler:this.copySource.bind(null,a.id),...Object(lt.a)("Copy List Origin")},{handler:this.toggleStatus.bind(null,a.id),visible:!a.enabled,...Object(lt.a)("Enable List")},{handler:this.toggleStatus.bind(null,a.id),visible:a.enabled,...Object(lt.a)("Disable List")},{...it.a.separatorItem,visible:!a.isDefault||"ad_blocking"===this.props.ruleGroup},{handler:this.removeSource.bind(null,a.id),visible:!a.isDefault,...Object(lt.a)("Remove List")},{handler:this.restoreSources,visible:"ad_blocking"===this.props.ruleGroup,...Object(lt.a)("Restore Built-In Lists")}];Object(ot.a)(this.context.vivaldiWindowId,n)(t)}),bt(this,"showDialog",()=>{this.setState({showEditor:1})}),bt(this,"onCancel",()=>{this.state.cachedSource&&this.removeSource(this.state.cachedSource.id),this.closeDialog()}),bt(this,"closeDialog",()=>{this.setState({cachedSource:void 0,newSource:"",importError:"",showEditor:0})}),bt(this,"renderDialog",()=>{const{cachedSource:e,showEditor:t}=this.state,a=e?e.unsafe_adblock_metadata:void 0;return n.createElement(st.a,{dialogWidth:500,onRequestClose:this.state.showEditor<2?this.onCancel:ht.default,__source:{fileName:pt,lineNumber:298,columnNumber:12}},n.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:pt,lineNumber:301,columnNumber:7}},n.createElement("header",{className:"dialog-header",__source:{fileName:pt,lineNumber:302,columnNumber:9}},n.createElement("h1",{className:"dialog-title",__source:{fileName:pt,lineNumber:303,columnNumber:11}},Object(o.a)("Import New Blocker List"))),1===t&&n.createElement("div",{className:"dialog-content",__source:{fileName:pt,lineNumber:309,columnNumber:11}},n.createElement("p",{className:"info",__source:{fileName:pt,lineNumber:310,columnNumber:13}},Object(o.a)("Enter URL to import blocker rules")),n.createElement("div",{className:"dialog-row",__source:{fileName:pt,lineNumber:313,columnNumber:13}},n.createElement("input",{type:"text",value:this.state.newSource,onChange:this.updateNewSource,autoFocus:!0,__source:{fileName:pt,lineNumber:314,columnNumber:15}}),n.createElement("label",{__source:{fileName:pt,lineNumber:320,columnNumber:15}},n.createElement("button",{type:"button",title:Object(o.a)("Import from a file..."),dangerouslySetInnerHTML:{__html:dt.pb.medium},onClick:this.onImportFromFile,__source:{fileName:pt,lineNumber:321,columnNumber:17}})))),e&&2===t&&n.createElement("div",{className:"dialog-content",__source:{fileName:pt,lineNumber:333,columnNumber:11}},n.createElement("h3",{__source:{fileName:pt,lineNumber:334,columnNumber:13}},Object(o.a)("Loading..."))),e&&3===t&&n.createElement("div",{className:"dialog-content",__source:{fileName:pt,lineNumber:339,columnNumber:11}},n.createElement("h3",{__source:{fileName:pt,lineNumber:340,columnNumber:13}},a?a.title:e.source_url),a&&n.createElement("p",{className:"info",__source:{fileName:pt,lineNumber:342,columnNumber:15}},e.source_url),n.createElement("p",{__source:{fileName:pt,lineNumber:344,columnNumber:13}},Object(o.a)("Valid rules: $1",[e.rules_info.valid_rules]),n.createElement("br",{__source:{fileName:pt,lineNumber:345,columnNumber:76}}),Object(o.a)("Invalid rules: $1",[e.rules_info.invalid_rules]),n.createElement("br",{__source:{fileName:pt,lineNumber:346,columnNumber:80}}),Object(o.a)("Unsupported rules: $1",[e.rules_info.unsupported_rules]))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:pt,lineNumber:352,columnNumber:9}},this.state.importError&&n.createElement("p",{className:"info",__source:{fileName:pt,lineNumber:354,columnNumber:13}},this.state.importError),(1===t||2===t)&&n.createElement("input",{type:"submit",className:"primary",onClick:this.importFromUrl,value:Object(o.a)("Import..."),__source:{fileName:pt,lineNumber:357,columnNumber:13}}),3===t&&n.createElement("input",{type:"submit",className:"primary",onClick:this.closeDialog,value:Object(o.a)("blocker","Done"),autoFocus:!0,__source:{fileName:pt,lineNumber:365,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:pt,lineNumber:373,columnNumber:11}}))))}),bt(this,"renderItem",(e,t)=>{const a=this.state.blockerSources.find(e=>t.id===e.id);return a?n.createElement("div",{className:"ContentBlocker-SourceItem",__source:{fileName:pt,lineNumber:387,columnNumber:12}},n.createElement("input",{type:"checkbox",onMouseDown:e=>e.stopPropagation(),checked:t.enabled,onChange:this.toggleStatus.bind(null,a.id),__source:{fileName:pt,lineNumber:388,columnNumber:7}}),n.createElement("span",{className:"title",__source:{fileName:pt,lineNumber:394,columnNumber:7}},e),n.createElement("p",{className:"info",__source:{fileName:pt,lineNumber:397,columnNumber:7}},""!==a.rules_list_checksum?Object(o.a)("Updated on $1",[fe()(a.last_update).format("lll")]):a.loaded?Object(o.a)("Not fetched"):Object(o.a)("Disabled"),a.is_fetching?" "+Object(o.a)("(Fetching...)"):"")):null})}componentDidMount(){this.updateSources(),L.a.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),L.a.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),L.a.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources)}componentWillUnmount(){L.a.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),L.a.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),L.a.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources)}render(){const{sortedList:e}=this.state,t=Math.min(44*e.length+22,200);return n.createElement(b.a,{filter:this.props.filter,__source:{fileName:pt,lineNumber:412,columnNumber:7}},0!==this.state.showEditor&&this.renderDialog(),n.createElement("h3",{__source:{fileName:pt,lineNumber:414,columnNumber:9}},this.props.title),n.createElement("div",{className:"ContentBlocker-Sources master-detail sortable-list",style:{minHeight:t},__source:{fileName:pt,lineNumber:415,columnNumber:9}},n.createElement(rt.a,{items:e,renderListItem:this.renderItem,filter:this.props.filter,onActivate:this.onToggleStatus,onContextMenu:this.onContextMenu,onCreateItem:this.showDialog,onRemove:this.onRemoveSource,addTipString:Object(o.a)("Add List"),deleteTipString:Object(o.a)("Remove List"),supportDragAndDrop:!1,__source:{fileName:pt,lineNumber:418,columnNumber:11}})))}}bt(Nt,"contextType",P.a);var ft=Nt,_t=a(20),vt=a.n(_t),Et=a(441),Ct=a(46),wt=a(319),Ot="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerRules.jsx";function yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const St=["tracking","ad_blocking"];class Tt extends n.PureComponent{constructor(...e){super(...e),yt(this,"_refSelect",n.createRef()),yt(this,"state",{exceptionRules:void 0,exceptionList:[],trackerBlockingEnabled:!1,adBlockingEnabled:!1,blockerSources:[],newException:{name:"",level:"2"},addExceptionDialog:!1,showSources:!1,incorrectFormat:!1}),yt(this,"getRules",()=>St.forEach(e=>Object(Et.b)(e,e=>{this.setState(e,()=>this.updateExceptions())}))),yt(this,"updateExceptions",()=>L.a.contentBlocking.getAllExceptionLists(e=>{const t=Object.values(e).reduce((e,t)=>e=e.concat(t.exempt_list).concat(t.process_list),[]),a=this.remapExceptions(Object(wt.a)(t).sort());this.setState({exceptionRules:e,exceptionList:a})})),yt(this,"setDefaultBlocking",e=>{const{value:t}=e.target;switch(t){case"0":L.a.contentBlocking.setActiveExceptionsList("tracking","process_list"),L.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"1":L.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),L.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"2":L.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),L.a.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list")}this.getRules()}),yt(this,"deleteException",e=>{if("number"==typeof e&&this.state.exceptionList){const t=this.state.exceptionList[e].key;["tracking","ad_blocking"].forEach(e=>["process_list","exempt_list"].forEach(a=>L.a.contentBlocking.removeExceptionForDomain(e,a,t))),this.updateExceptions()}}),yt(this,"deleteAllExceptions",()=>{["tracking","ad_blocking"].forEach(e=>["process_list","exempt_list"].forEach(t=>L.a.contentBlocking.removeAllExceptions(e,t))),this.updateExceptions()}),yt(this,"remapExceptions",e=>e?e.map(e=>({key:e,name:e})):[]),yt(this,"onContextMenu",(e,t)=>{const a=[{handler:this.deleteException.bind(null,e),...Object(lt.a)("Remove Site")},{handler:this.deleteAllExceptions,...Object(lt.a)("Remove All Sites from List")}];Object(ot.a)(this.context.vivaldiWindowId,a)(t)}),yt(this,"updateNewException",e=>{const t=e.currentTarget;"name"===t.name?this.setState(e=>({newException:{...e.newException,name:t.value}})):this.setState(e=>({newException:{...e.newException,level:t.value}}))}),yt(this,"onAddNewException",()=>this.setState({addExceptionDialog:!0})),yt(this,"onClose",()=>this.setState(e=>({newException:{...e.newException,name:""},addExceptionDialog:!1,incorrectFormat:!1}))),yt(this,"toggleSources",()=>this.setState(e=>({showSources:!e.showSources}))),yt(this,"saveException",()=>{const{newException:e}=this.state,t=Object(Ct.q)(Object(Ct.r)(e.name));t?(Object(Et.c)(t,e.level),this.onClose()):this.setState({incorrectFormat:!0})}),yt(this,"getPageBlockingLevel",e=>{const{exceptionRules:t}=this.state;if(!t)return;let a=0;return!t.tracking.process_list.includes(e)&&t.tracking.exempt_list.includes(e)||a++,!t.ad_blocking.process_list.includes(e)&&t.ad_blocking.exempt_list.includes(e)||a++,a}),yt(this,"changePageBlocking",e=>{const{name:t,value:a}=e.target;Object(Et.c)(t,a,!0)}),yt(this,"renderModal",()=>n.createElement(st.a,{dialogWidth:500,onRequestClose:this.onClose,__source:{fileName:Ot,lineNumber:247,columnNumber:5}},n.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:Ot,lineNumber:248,columnNumber:7}},n.createElement("header",{className:"dialog-header",__source:{fileName:Ot,lineNumber:249,columnNumber:9}},n.createElement("h1",{className:"dialog-title",__source:{fileName:Ot,lineNumber:250,columnNumber:11}},Object(o.a)("Add a New Site to Exception List"))),n.createElement("div",{className:"dialog-content",__source:{fileName:Ot,lineNumber:254,columnNumber:9}},n.createElement("input",{type:"text",name:"name",placeholder:Object(o.a)("e.g. example.com"),value:this.state.newException.name,onChange:this.updateNewException,autoFocus:!0,__source:{fileName:Ot,lineNumber:255,columnNumber:11}}),this.state.incorrectFormat&&n.createElement("p",{className:"info",__source:{fileName:Ot,lineNumber:264,columnNumber:13}},Object(o.a)("Enter a valid domain name excluding the protocol")),n.createElement("select",{value:this.state.newException.level,onChange:this.updateNewException,name:"level",__source:{fileName:Ot,lineNumber:266,columnNumber:11}},n.createElement("option",{value:"0",__source:{fileName:Ot,lineNumber:270,columnNumber:13}},Object(o.a)("No Blocking")),n.createElement("option",{value:"1",__source:{fileName:Ot,lineNumber:271,columnNumber:13}},Object(o.a)("Block Trackers")),n.createElement("option",{value:"2",__source:{fileName:Ot,lineNumber:272,columnNumber:13}},Object(o.a)("Block Trackers and Ads")))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:Ot,lineNumber:275,columnNumber:9}},n.createElement("input",{type:"submit",className:"primary",onClick:this.saveException,value:Object(o.a)("other","Add Site"),__source:{fileName:Ot,lineNumber:276,columnNumber:11}}),n.createElement("input",{type:"button",onClick:this.onClose,value:Object(o.a)("Cancel"),__source:{fileName:Ot,lineNumber:282,columnNumber:11}}))))),yt(this,"onSelectItem",e=>{var t,a;const{HTMLSelectElement:n}=this.context,i=null===(t=this._refSelect.current)||void 0===t?void 0:null===(a=t.refItems.current)||void 0===a?void 0:a.children;if(!i||0===i.length)return;const s=i[e].children[1];s instanceof n&&(this.currentSelection=s)}),yt(this,"onActivate",(e,t)=>{var a;t.target!==this.currentSelection&&(null===(a=this.currentSelection)||void 0===a||a.focus())}),yt(this,"renderItem",(e,t)=>{if(!t)return null;const a=this.getPageBlockingLevel(t.key);return(n.createElement(n.Fragment,null,n.createElement("span",{__source:{fileName:Ot,lineNumber:318,columnNumber:9}},e),n.createElement("select",{value:a,name:t.name,onMouseDown:e=>e.stopPropagation(),onChange:this.changePageBlocking,tabIndex:"-1",__source:{fileName:Ot,lineNumber:319,columnNumber:9}},n.createElement("option",{value:"0",__source:{fileName:Ot,lineNumber:325,columnNumber:11}},Object(o.a)("No Blocking")),n.createElement("option",{value:"1",__source:{fileName:Ot,lineNumber:326,columnNumber:11}},Object(o.a)("Block Trackers")),n.createElement("option",{value:"2",__source:{fileName:Ot,lineNumber:327,columnNumber:11}},Object(o.a)("Block Trackers and Ads")))))})}componentDidMount(){this.getRules(),this.updateExceptions(),L.a.contentBlocking.onExceptionsChanged.addListener(this.updateExceptions),L.a.contentBlocking.onStateChanged.addListener(this.getRules)}componentWillUnmount(){L.a.contentBlocking.onExceptionsChanged.removeListener(this.updateExceptions),L.a.contentBlocking.onStateChanged.removeListener(this.getRules)}render(){const e=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0);return(n.createElement(C.a,{categoryTitle:Object(o.a)("title","Tracker and Ad Blocking"),"data-anchor":"tracker_and_ad_blocking",filter:this.props.filter,__source:{fileName:Ot,lineNumber:339,columnNumber:7}},this.state.addExceptionDialog&&this.renderModal(),n.createElement("div",{className:"ContentBlocker",__source:{fileName:Ot,lineNumber:346,columnNumber:9}},n.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ot,lineNumber:348,columnNumber:11}},n.createElement("h3",{__source:{fileName:Ot,lineNumber:349,columnNumber:13}},Object(o.a)("Blocking Level")),n.createElement("p",{className:"info",__source:{fileName:Ot,lineNumber:350,columnNumber:13}},Object(o.a)("Select default level of protection.")),n.createElement("label",{className:vt()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":0===e}),__source:{fileName:Ot,lineNumber:354,columnNumber:13}},n.createElement("button",{value:"0",title:Object(o.a)("No content blocking will be applied to any site by default."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",dangerouslySetInnerHTML:{__html:dt.A},__source:{fileName:Ot,lineNumber:359,columnNumber:15}}),n.createElement("span",{className:"keep-ea-words",__source:{fileName:Ot,lineNumber:366,columnNumber:17}},Object(o.a)("No Blocking"))),n.createElement("label",{className:vt()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":1===e}),__source:{fileName:Ot,lineNumber:370,columnNumber:13}},n.createElement("button",{value:"1",title:Object(o.a)("Online trackers collect personal information and browsing habits across multiple sites."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:dt.A},__source:{fileName:Ot,lineNumber:375,columnNumber:15}}),n.createElement("span",{className:"keep-ea-words",__source:{fileName:Ot,lineNumber:383,columnNumber:17}},Object(o.a)("Block Trackers"))),n.createElement("label",{className:vt()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":2===e}),__source:{fileName:Ot,lineNumber:387,columnNumber:13}},n.createElement("button",{value:"2",title:Object(o.a)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:dt.A},__source:{fileName:Ot,lineNumber:392,columnNumber:15}}),n.createElement("span",{className:"keep-ea-words",__source:{fileName:Ot,lineNumber:400,columnNumber:17}},Object(o.a)("Block Trackers and Ads")))),n.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ot,lineNumber:405,columnNumber:11}},n.createElement("h3",{__source:{fileName:Ot,lineNumber:406,columnNumber:13}},Object(o.a)("Exceptions")),n.createElement("p",{className:"info",__source:{fileName:Ot,lineNumber:407,columnNumber:13}},Object(o.a)("Manage blocking level per site")),this.state.exceptionList&&n.createElement("div",{className:"ContentBlocker-Exceptions master-detail sortable-list",__source:{fileName:Ot,lineNumber:409,columnNumber:15}},n.createElement(rt.a,{ref:this._refSelect,items:this.state.exceptionList,renderListItem:this.renderItem,filter:this.props.filter,onContextMenu:this.onContextMenu,onCreateItem:this.onAddNewException,onRemove:this.deleteException,addTipString:Object(o.a)("Add Site Exception"),deleteTipString:Object(o.a)("Remove Site Exception"),supportDragAndDrop:!1,onSelectItem:this.onSelectItem,onActivate:this.onActivate,__source:{fileName:Ot,lineNumber:410,columnNumber:17}})),n.createElement("input",{type:"button",value:this.state.showSources?Object(o.a)("Hide Sources"):Object(o.a)("Manage Sources"),onClick:this.toggleSources,__source:{fileName:Ot,lineNumber:426,columnNumber:13}})),this.state.showSources&&n.createElement(n.Fragment,null,n.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ot,lineNumber:437,columnNumber:15}},n.createElement("div",{className:"setting-single",__source:{fileName:Ot,lineNumber:438,columnNumber:17}},n.createElement(ft,{filter:this.props.filter,ruleGroup:"tracking",title:Object(o.a)("Tracker Blocking Sources"),__source:{fileName:Ot,lineNumber:439,columnNumber:19}}))),n.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ot,lineNumber:447,columnNumber:15}},n.createElement("div",{className:"setting-single",__source:{fileName:Ot,lineNumber:448,columnNumber:17}},n.createElement(ft,{filter:this.props.filter,ruleGroup:"ad_blocking",title:Object(o.a)("Ad Blocking Sources"),__source:{fileName:Ot,lineNumber:449,columnNumber:19}})))))))}}yt(Tt,"contextType",P.a);var kt=Tt,At=a(111),It="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieItem.jsx";function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Mt extends n.Component{constructor(...e){super(...e),Dt(this,"state",{viewInfo:null,viewCookies:!1}),Dt(this,"deleteCookie",e=>{this.state.viewInfo?(this.removeChromeEntry(this.state.viewInfo),this.setState({viewCookies:Boolean(this.props.count>1),viewInfo:null})):(this.props.items.map(e=>this.removeChromeEntry(e)),this.setState({viewCookies:!1,viewInfo:null})),e.stopPropagation()}),Dt(this,"removeChromeEntry",e=>{const t={url:"http"+(e.secure?"s":"")+"://"+e.domain+e.path,name:e.name};x.a.cookies.remove(t,e=>{this.props.onCookieDelete(e)})}),Dt(this,"showDetail",()=>{this.setState(e=>({viewCookies:!e.viewCookies,viewInfo:!0===e.viewCookies?null:e.viewInfo}))}),Dt(this,"showInfo",e=>{this.setState({viewInfo:e})}),Dt(this,"renderCookies",()=>this.props.items.map((e,t)=>n.createElement("a",{tabIndex:"0",key:"cookie-"+e.name.toLowerCase(),onFocus:this.showInfo.bind(this,e),__source:{fileName:It,lineNumber:82,columnNumber:7}},e.name))),Dt(this,"renderInfo",()=>n.createElement("dl",{__source:{fileName:It,lineNumber:92,columnNumber:7}},n.createElement("dt",{__source:{fileName:It,lineNumber:93,columnNumber:9}},Object(o.a)("Expires:")),n.createElement("dd",{__source:{fileName:It,lineNumber:94,columnNumber:9}},this.state.viewInfo&&fe()(this.state.viewInfo.expirationDate).format("l LT")),n.createElement("dt",{__source:{fileName:It,lineNumber:98,columnNumber:9}},Object(o.a)("Path:")),n.createElement("dd",{__source:{fileName:It,lineNumber:99,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.path),n.createElement("dt",{__source:{fileName:It,lineNumber:100,columnNumber:9}},Object(o.a)("Host Only:")),n.createElement("dd",{__source:{fileName:It,lineNumber:101,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.hostOnly.toString()),n.createElement("dt",{__source:{fileName:It,lineNumber:102,columnNumber:9}},Object(o.a)("HTTP Only:")),n.createElement("dd",{__source:{fileName:It,lineNumber:103,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.httpOnly.toString()),n.createElement("dt",{__source:{fileName:It,lineNumber:104,columnNumber:9}},Object(o.a)("Session:")),n.createElement("dd",{__source:{fileName:It,lineNumber:105,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.session.toString()),n.createElement("dt",{__source:{fileName:It,lineNumber:106,columnNumber:9}},Object(o.a)("Secure:")),n.createElement("dd",{__source:{fileName:It,lineNumber:107,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.secure.toString()),n.createElement("dt",{__source:{fileName:It,lineNumber:108,columnNumber:9}},Object(o.a)("Value:")),n.createElement("dd",{__source:{fileName:It,lineNumber:109,columnNumber:9}},this.state.viewInfo&&this.state.viewInfo.value)))}render(){const{domain:e}=this.props,t=e.replace("/^./g","");return n.createElement("li",{__source:{fileName:It,lineNumber:119,columnNumber:7}},n.createElement("div",{className:"overview",onClick:this.showDetail,__source:{fileName:It,lineNumber:120,columnNumber:9}},n.createElement(At.a,{className:"site-icon",url:t,__source:{fileName:It,lineNumber:121,columnNumber:11}}),e,!this.state.viewCookies&&n.createElement("span",{className:"count",__source:{fileName:It,lineNumber:124,columnNumber:13}},this.props.count),n.createElement("span",{className:"controls",__source:{fileName:It,lineNumber:126,columnNumber:11}},n.createElement("input",{type:"button",className:"circular clearkey",title:this.state.viewInfo?Object(o.a)("Delete selected cookie"):Object(o.a)("Delete cookies"),onClick:this.deleteCookie,__source:{fileName:It,lineNumber:127,columnNumber:13}}))),this.state.viewCookies&&n.createElement("div",{className:"detail",__source:{fileName:It,lineNumber:135,columnNumber:11}},this.renderCookies(),this.state.viewInfo&&n.createElement("div",{className:"info",__source:{fileName:It,lineNumber:138,columnNumber:15}},this.renderInfo())))}}var Pt=Mt,xt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieManager.jsx";function Lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class jt extends n.PureComponent{constructor(...e){super(...e),Lt(this,"state",{cookieData:{},cookieFilter:"",confirmation:!1,showCookies:!1}),Lt(this,"getAllCookies",()=>{x.a.cookies.getAll({},e=>{this.setState({cookieData:e.reduce((e,t)=>{var a=e[t.domain]||[];return a.push(t),e[t.domain]=a,e},{})})})}),Lt(this,"deleteFilteredCookies",()=>{x.a.cookies.getAll({},e=>{for(var t=0;t<e.length;t++)e[t].domain.toLowerCase().includes(this.state.cookieFilter.toLowerCase())&&x.a.cookies.remove({url:this.getCookieUrl(e[t]),name:e[t].name});this.getAllCookies()})}),Lt(this,"deleteAllCookies",()=>{var e=0;x.a.cookies.getAll({},a=>{e=a.length;for(var n=0;n<a.length;n++)x.a.cookies.remove({url:this.getCookieUrl(a[n]),name:a[n].name},t)});var t=t=>{0===--e&&this.setState({cookieData:{},confirmation:!1,showCookies:!1})}}),Lt(this,"getCookieUrl",e=>"http"+(e.secure?"s":"")+"://"+e.domain+e.path),Lt(this,"deleteCookie",()=>{this.getAllCookies()}),Lt(this,"onSettingsFilter",e=>{this.setState({cookieFilter:e.target.value})}),Lt(this,"onAskToDelete",()=>{this.setState({confirmation:!0})}),Lt(this,"onCancel",()=>{this.setState({confirmation:!1})}),Lt(this,"renderModal",()=>n.createElement(st.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:xt,lineNumber:116,columnNumber:7}},n.createElement("div",{className:"dialog-delete-cookies",__source:{fileName:xt,lineNumber:119,columnNumber:9}},n.createElement("header",{className:"dialog-header",__source:{fileName:xt,lineNumber:120,columnNumber:11}},n.createElement("h1",{className:"dialog-title",__source:{fileName:xt,lineNumber:121,columnNumber:13}},Object(o.a)("Delete All Cookies?"))),n.createElement("div",{className:"dialog-content",__source:{fileName:xt,lineNumber:125,columnNumber:11}},n.createElement("p",{__source:{fileName:xt,lineNumber:126,columnNumber:13}},Object(o.a)("All cookies will be removed."))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:xt,lineNumber:130,columnNumber:11}},n.createElement("input",{type:"button",className:"primary",onClick:this.deleteAllCookies,value:Object(o.a)("other","Delete"),autoFocus:!0,__source:{fileName:xt,lineNumber:131,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:xt,lineNumber:136,columnNumber:13}}))))),Lt(this,"showCookieList",()=>{this.setState(e=>({showCookies:!e.showCookies}))})}componentDidMount(){this.getAllCookies()}render(){if(!this.state.cookieData)return n.createElement("div",{className:"saved-passwords",__source:{fileName:xt,lineNumber:156,columnNumber:9}},n.createElement("p",{__source:{fileName:xt,lineNumber:157,columnNumber:11}},Object(o.a)("No cookies found.")));const{cookieData:e,cookieFilter:t}=this.state,a=t.toLowerCase(),i=Object.keys(e).length,s=Object.keys(e).reduce((t,a)=>t+e[a].length,0);return n.createElement(b.a,{filter:this.props.filter,__source:{fileName:xt,lineNumber:169,columnNumber:7}},n.createElement("div",{className:"setting-group setting-cookies unlimited",__source:{fileName:xt,lineNumber:170,columnNumber:9}},this.state.confirmation&&this.renderModal(),n.createElement("h3",{__source:{fileName:xt,lineNumber:172,columnNumber:11}},Object(o.a)("Saved Cookies")),n.createElement("p",{__source:{fileName:xt,lineNumber:174,columnNumber:11}},Object(o.a)("Vivaldi currently stores $1 from $2.",[Object(o.a)("$1 cookie entry","$1 cookie entries",[s]),Object(o.a)("$1 domain","$1 domains",[i])])),this.state.showCookies&&n.createElement("div",{__source:{fileName:xt,lineNumber:185,columnNumber:13}},n.createElement("div",{className:"setting-single",__source:{fileName:xt,lineNumber:186,columnNumber:15}},n.createElement("input",{type:"search",placeholder:Object(o.a)("Filter by domain"),value:t,onChange:this.onSettingsFilter,__source:{fileName:xt,lineNumber:187,columnNumber:17}})),n.createElement("div",{className:"setting-single",__source:{fileName:xt,lineNumber:193,columnNumber:15}},n.createElement("ul",{__source:{fileName:xt,lineNumber:194,columnNumber:17}},Object.keys(e).filter(e=>e.includes(a)).map(t=>n.createElement(Pt,{key:"domain-"+t,domain:t,count:e[t].length,items:e[t],onCookieDelete:this.deleteCookie,__source:{fileName:xt,lineNumber:198,columnNumber:21}})),0===Object.keys(e).filter(e=>e.includes(a)).length&&t&&n.createElement("li",{style:{margin:"6px"},__source:{fileName:xt,lineNumber:208,columnNumber:19}},Object(o.a)("Query “$1” matches no result.",[t]))))),n.createElement("div",{className:"setting-single",__source:{fileName:xt,lineNumber:217,columnNumber:11}},n.createElement("input",{type:"button",value:this.state.showCookies?Object(o.a)("Hide Saved Cookies"):Object(o.a)("Show Saved Cookies"),disabled:0===s,onClick:this.showCookieList,__source:{fileName:xt,lineNumber:218,columnNumber:13}}),n.createElement("input",{type:"button",className:"danger",onClick:this.onAskToDelete,disabled:0===s,value:Object(o.a)("Delete All Cookies"),__source:{fileName:xt,lineNumber:224,columnNumber:13}}),t&&n.createElement("input",{type:"button",onClick:this.deleteFilteredCookies,value:Object(o.a)("Delete Filtered Cookies"),__source:{fileName:xt,lineNumber:231,columnNumber:15}}))))}}var Rt=jt,Bt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieSettings.jsx";function Ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ut extends n.Component{constructor(...e){super(...e),Ft(this,"state",{cookieSetting:"",cookieMode:"off"}),Ft(this,"handleCookieModeChange",e=>{const t=e.target.value;L.a.utilities.setBlockThirdPartyCookies(t,e=>{}),this.setState({cookieMode:t})}),Ft(this,"handleChange",e=>{const t=e.target.value;this.setState({cookieSetting:t}),L.a.utilities.setDefaultContentSettings("cookies",t,ht.default)})}UNSAFE_componentWillMount(){L.a.utilities.getDefaultContentSettings("cookies",e=>{this.setState({cookieSetting:e})}),L.a.utilities.getBlockThirdPartyCookies(e=>{this.setState({cookieMode:e})})}render(){const e="block"===this.state.cookieSetting;return(n.createElement(C.a,{categoryTitle:Object(o.a)("Cookies"),filter:this.props.filter,__source:{fileName:Bt,lineNumber:57,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:Bt,lineNumber:58,columnNumber:9}},n.createElement("h3",{__source:{fileName:Bt,lineNumber:59,columnNumber:11}},Object(o.a)("Accept Cookies")),n.createElement(p.a,{className:"cookieSelection",name:"cookieSelGroup",value:this.state.cookieSetting,onChange:this.handleChange,__source:{fileName:Bt,lineNumber:61,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:65,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:66,columnNumber:15}},n.createElement("input",{type:"radio",value:"allow",__source:{fileName:Bt,lineNumber:67,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:68,columnNumber:17}},Object(o.a)("radio","All")))),n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:71,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:72,columnNumber:15}},n.createElement("input",{type:"radio",value:"session_only",__source:{fileName:Bt,lineNumber:73,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:74,columnNumber:17}},Object(o.a)("title","Session Only")))),n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:77,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:78,columnNumber:15}},n.createElement("input",{type:"radio",value:"block",__source:{fileName:Bt,lineNumber:79,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:80,columnNumber:17}},Object(o.a)("other","Never")))))),n.createElement("div",{className:"setting-group",__source:{fileName:Bt,lineNumber:86,columnNumber:9}},n.createElement("h3",{__source:{fileName:Bt,lineNumber:87,columnNumber:11}},Object(o.a)("Third-Party Cookies")),n.createElement("p",{className:"info",__source:{fileName:Bt,lineNumber:88,columnNumber:11}},Object(o.a)("Disabling third party cookies might make some pages fail to work as intended.")),n.createElement(p.a,{className:"cookieSelection",name:"cookieSelGroup2",value:this.state.cookieMode,onChange:this.handleCookieModeChange,__source:{fileName:Bt,lineNumber:92,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:96,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:97,columnNumber:15}},n.createElement("input",{type:"radio",value:"off",disabled:e,__source:{fileName:Bt,lineNumber:98,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:99,columnNumber:17}},Object(o.a)("radio","Allow All")))),n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:102,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:103,columnNumber:15}},n.createElement("input",{type:"radio",value:"BlockThirdPartyIncognitoOnly",disabled:e,__source:{fileName:Bt,lineNumber:104,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:106,columnNumber:17}},Object(o.a)("radio","Block In Incognito Mode Only")))),n.createElement("div",{className:"setting-single",__source:{fileName:Bt,lineNumber:109,columnNumber:13}},n.createElement("label",{__source:{fileName:Bt,lineNumber:110,columnNumber:15}},n.createElement("input",{type:"radio",value:"BlockThirdParty",disabled:e,__source:{fileName:Bt,lineNumber:111,columnNumber:17}}),n.createElement("span",{__source:{fileName:Bt,lineNumber:113,columnNumber:17}},Object(o.a)("radio","Block All")))))),n.createElement(Rt,{filter:this.props.filter,__source:{fileName:Bt,lineNumber:118,columnNumber:9}})))}}var Ht=Ut,Vt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\downloads\\Downloads.jsx";const Wt=[l.kDownloadDefaultDirectory,l.kDownloadsNotifyOnComplete,l.kDownloadsOpenPanelOnNew,l.kDownloadsStartAutomatically,l.kDownloadsUpdateDefaultDownloadWhenSavingAs],zt=r.a.getEventHandler;class Gt extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=()=>{L.a.utilities.selectFile(Object(o.a)("Select Download Folder"),"folder",e=>{!x.a.runtime.lastError&&e&&r.a.set(l.kDownloadDefaultDirectory,e)})},(a="selectDownloadFolder")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Downloads"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:Vt,lineNumber:44,columnNumber:7}},i.a.createElement("div",{className:"setting-subgroup",__source:{fileName:Vt,lineNumber:47,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Vt,lineNumber:48,columnNumber:11}},Object(o.a)("Download Location")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Vt,lineNumber:49,columnNumber:11}},i.a.createElement("div",{className:"setting-single folder-selection",__source:{fileName:Vt,lineNumber:50,columnNumber:13}},i.a.createElement("input",{type:"text",value:this.props.prefValues[l.kDownloadDefaultDirectory],title:Object(o.a)("Enter Default Download Directory Path"),onChange:zt(l.kDownloadDefaultDirectory),__source:{fileName:Vt,lineNumber:51,columnNumber:15}}),i.a.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectDownloadFolder,__source:{fileName:Vt,lineNumber:55,columnNumber:17}}))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Vt,lineNumber:60,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Vt,lineNumber:61,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsStartAutomatically],onChange:zt(l.kDownloadsStartAutomatically),__source:{fileName:Vt,lineNumber:62,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Vt,lineNumber:65,columnNumber:15}},Object(o.a)("Save Files to Default Location Without Asking")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Vt,lineNumber:68,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Vt,lineNumber:69,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsUpdateDefaultDownloadWhenSavingAs],onChange:zt(l.kDownloadsUpdateDefaultDownloadWhenSavingAs),__source:{fileName:Vt,lineNumber:70,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Vt,lineNumber:73,columnNumber:15}},Object(o.a)("Update Default Location When Choosing Save as Location")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Vt,lineNumber:76,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Vt,lineNumber:77,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsOpenPanelOnNew],onChange:zt(l.kDownloadsOpenPanelOnNew),__source:{fileName:Vt,lineNumber:78,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Vt,lineNumber:81,columnNumber:15}},Object(o.a)("Open Download Panel Automatically")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Vt,lineNumber:84,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Vt,lineNumber:85,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsNotifyOnComplete],onChange:zt(l.kDownloadsNotifyOnComplete),__source:{fileName:Vt,lineNumber:86,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Vt,lineNumber:89,columnNumber:15}},Object(o.a)("Notify on Completed Downloads"))))))}}var Kt=Object(v.a)(Gt,Wt),Yt=a(217),$t="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\FeaturesSettings.jsx";const Xt=r.a.getEventHandler,Zt=[l.kMailIsTurnedOff];var Qt=function(e){const t=Object(Yt.a)(Zt);return(i.a.createElement(C.a,{categoryTitle:Object(o.a)("Productivity Features"),filter:e.filter,"data-anchor":"features",__source:{fileName:$t,lineNumber:27,columnNumber:5}},i.a.createElement(b.a,{filter:e.filter,__source:{fileName:$t,lineNumber:32,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:$t,lineNumber:33,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:$t,lineNumber:34,columnNumber:11}},i.a.createElement("label",{__source:{fileName:$t,lineNumber:35,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:!t[l.kMailIsTurnedOff],onChange:Xt(l.kMailIsTurnedOff,"inverse"),__source:{fileName:$t,lineNumber:36,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:$t,lineNumber:41,columnNumber:15}},Object(o.a)("Enable Mail, Calendar and Feeds"))))))))},qt=a(271),Jt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fonts.jsx";function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ta={standard:{localizedFamily:Object(o.a)("Standard")},sansserif:{localizedFamily:Object(o.a)("Sans-serif")},serif:{localizedFamily:Object(o.a)("Serif")},fixed:{localizedFamily:Object(o.a)("Monospaced")},cursive:{localizedFamily:Object(o.a)("Cursive")},fantasy:{localizedFamily:Object(o.a)("Fantasy")}},aa=[9,10,11,12,13,14,16,18,20,24],na=[0,4,6,7,8,...aa],ia=[l.kWebKitDefaultFontSize,l.kWebKitMinimumFontSize],sa=r.a.getEventHandler;class ra extends n.Component{constructor(...e){super(...e),ea(this,"state",{fontList:[],fonts:{}}),ea(this,"_getFonts",e=>{this.setState(t=>({fonts:{...t.fonts,[e.genericFamily]:{font:e.fontId,localizedFamily:ta[e.genericFamily].localizedFamily}}}))}),ea(this,"mapObject",(e,t)=>Object.keys(e).map(a=>t(a,e[a]))),ea(this,"changeHandler",(e,t)=>{let a=l.kWebKitStandardFontFamily;switch(e){case"standard":a=l.kWebKitStandardFontFamily;break;case"fantasy":a=l.kWebKitFantasyFontFamily;break;case"fixed":a=l.kWebKitFixedFontFamily;break;case"sansserif":a=l.kWebKitSansSerifFontFamily;break;case"serif":a=l.kWebKitSerifFontFamily;break;case"cursive":a=l.kWebKitCursiveFontFamily}r.a.set(a,t.target.value)}),ea(this,"renderOptions",e=>{const t="default"===e?parseInt(this.props.prefValues[l.kWebKitDefaultFontSize]):parseInt(this.props.prefValues[l.kWebKitMinimumFontSize]),a="default"===e?aa:na;return a.includes(t)||(a.push(t),a.sort((e,t)=>e-t)),a.map(e=>n.createElement("option",{key:e,__source:{fileName:Jt,lineNumber:160,columnNumber:29}},e))})}componentDidMount(){x.a.fontSettings.onFontChanged.addListener(this._getFonts),x.a.fontSettings.getFontList(e=>{this.setState({fontList:e})}),this.mapObject(ta,(e,t)=>{x.a.fontSettings.getFont({genericFamily:e},a=>{this.setState(n=>({fonts:{...n.fonts,[e]:{font:a.fontId,localizedFamily:t.localizedFamily}}}))})})}componentWillUnmount(){x.a.fontSettings.onFontChanged.removeListener(this._getFonts)}render(){const{prefValues:e}=this.props,t=this.state.fontList.map(e=>n.createElement("option",{key:e.fontId,value:e.fontId,__source:{fileName:Jt,lineNumber:166,columnNumber:14}},e.displayName));return n.createElement(C.a,{categoryTitle:Object(o.a)("Fonts"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:Jt,lineNumber:170,columnNumber:7}},n.createElement("div",{className:"setting-group-double font-slider",__source:{fileName:Jt,lineNumber:175,columnNumber:9}},n.createElement("label",{__source:{fileName:Jt,lineNumber:176,columnNumber:11}},n.createElement("span",{__source:{fileName:Jt,lineNumber:177,columnNumber:13}},Object(o.a)("Default Font Size")),n.createElement("span",{className:"fake-dataset",__source:{fileName:Jt,lineNumber:178,columnNumber:13}},n.createElement("input",{type:"number",min:"6",max:"99",value:e[l.kWebKitDefaultFontSize],onChange:sa(l.kWebKitDefaultFontSize),__source:{fileName:Jt,lineNumber:179,columnNumber:15}}),n.createElement("select",{value:e[l.kWebKitDefaultFontSize],onChange:sa(l.kWebKitDefaultFontSize),__source:{fileName:Jt,lineNumber:185,columnNumber:15}},this.renderOptions("default")))),n.createElement("label",{__source:{fileName:Jt,lineNumber:192,columnNumber:11}},n.createElement("span",{__source:{fileName:Jt,lineNumber:193,columnNumber:13}},Object(o.a)("Minimum Font Size")),n.createElement("span",{className:"fake-dataset",__source:{fileName:Jt,lineNumber:194,columnNumber:13}},n.createElement("input",{type:"number",min:"0",max:"99",value:e[l.kWebKitMinimumFontSize],onChange:sa(l.kWebKitMinimumFontSize),__source:{fileName:Jt,lineNumber:195,columnNumber:15}}),n.createElement("select",{value:e[l.kWebKitMinimumFontSize],onChange:sa(l.kWebKitMinimumFontSize),__source:{fileName:Jt,lineNumber:201,columnNumber:15}},this.renderOptions("minimum"))))),n.createElement("div",{className:"setting-group-double pad-top font-face-list",__source:{fileName:Jt,lineNumber:210,columnNumber:9}},n.createElement("h3",{__source:{fileName:Jt,lineNumber:211,columnNumber:11}},Object(o.a)("Default Fonts")),this.mapObject(this.state.fonts,(e,a)=>n.createElement("label",{key:e,className:"setting-single",__source:{fileName:Jt,lineNumber:214,columnNumber:15}},n.createElement("span",{__source:{fileName:Jt,lineNumber:215,columnNumber:17}},a.localizedFamily),n.createElement("select",{onChange:this.changeHandler.bind(this,e),value:a.font,__source:{fileName:Jt,lineNumber:216,columnNumber:17}},t)))))}}var oa=Object(v.a)(ra,ia),la=a(107),ca="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\HueIntegration.jsx";function ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ma=[l.kHueBridgeIp,l.kHueEnabled,l.kHueLights,l.kHueUsername];class da extends i.a.Component{constructor(...e){super(...e),ua(this,"initialState",()=>({groups:[],lights:[],validBridge:!1,validUsername:!1,waitingForButtonPress:!1,givenUp:!1,manualIp:""})),ua(this,"_isMounted",!1),ua(this,"state",this.initialState()),ua(this,"verifyBridge",()=>{const e=Xe.a.get(l.kHueBridgeIp);e?fetch(`http://${e}/description.xml`).then(e=>{e.ok?this.setState({validBridge:!0},this.verifyUsername):this.getBridge()}).catch(e=>{this.getBridge()}):this.getBridge()}),ua(this,"getBridge",()=>{fetch("https://discovery.meethue.com/").then(e=>{e.ok?e.json().then(e=>{e&&e[0]&&e[0].internalipaddress?(r.a.set(l.kHueBridgeIp,e[0].internalipaddress),this.verifyBridge()):this.setState({givenUp:!0})}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})})}),ua(this,"setBridge",()=>{r.a.set(l.kHueBridgeIp,this.state.manualIp),this.verifyBridge()}),ua(this,"verifyUsername",()=>{const e=Xe.a.get(l.kHueBridgeIp),t=Xe.a.get(l.kHueUsername);t?fetch(`http://${e}/api/${t}/`).then(e=>{e.ok?e.json().then(e=>{if(e[0]&&e[0].error)r.a.set(l.kHueUsername,""),this.getUsername();else if(e&&e.config){const t=[];Object.keys(e.lights).map(e=>parseInt(e)).filter(e=>!isNaN(e)).forEach(a=>{const n=e.lights[a];t[a]=n});const a=Object.keys(e.groups).map(t=>e.groups[t]).filter(e=>{if("Room"===e.type&&e.lights.length>0){if(e.lights.map(e=>{const a=parseInt(e);return t[a]}).filter(e=>e).length>0)return e}});this.setState({groups:a,lights:t,validUsername:!0,waitingForButtonPress:!1})}}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})}):this.getUsername()}),ua(this,"getUsername",()=>{const e=Xe.a.get(l.kHueBridgeIp);e&&fetch(`http://${e}/api`,{method:"POST",body:JSON.stringify({devicetype:"vivaldi_browser#desktop_hue"})}).then(e=>{e.ok?e.json().then(e=>{e[0]&&e[0].success&&e[0].success.username?(r.a.set(l.kHueUsername,e[0].success.username),this.verifyUsername()):e&&e[0]&&e[0].error&&101===e[0].error.type&&(this.setState({waitingForButtonPress:!0}),setTimeout(()=>{this._isMounted&&this.getUsername()},1e3))}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})})}),ua(this,"toggleLight",(e,t)=>{const a=Xe.a.get(l.kHueBridgeIp),n=Xe.a.get(l.kHueUsername),i=!Xe.a.get(l.kHueLights).includes(t),s=Xe.a.get(l.kHueLights).filter(e=>e!==t);i&&s.push(t),fetch(`http://${a}/api/${n}/lights/${e}/state`,{method:"put",body:JSON.stringify({alert:"select"})}),r.a.set(l.kHueLights,s)}),ua(this,"resetBridge",()=>{r.a.reset(l.kHueBridgeIp),r.a.reset(l.kHueUsername),this.setState(this.initialState())}),ua(this,"changeManualIp",e=>{this.setState({manualIp:e.currentTarget.value})})}componentDidMount(){this._isMounted=!0,this.props.prefValues[l.kHueEnabled]&&this.props.prefValues[l.kHueBridgeIp]&&this.verifyBridge()}componentWillUnmount(){this._isMounted=!1}render(){const e=this.props.prefValues[l.kHueEnabled],t=this.props.prefValues[l.kHueLights],{waitingForButtonPress:a,validBridge:n,validUsername:s,groups:c,lights:u}=this.state;return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Philips Hue Theme Integration"),filter:this.props.filter,__source:{fileName:ca,lineNumber:290,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:ca,lineNumber:295,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ca,lineNumber:296,columnNumber:11}},i.a.createElement("label",{__source:{fileName:ca,lineNumber:297,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e,onChange:r.a.getEventHandler(l.kHueEnabled),__source:{fileName:ca,lineNumber:298,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ca,lineNumber:302,columnNumber:15}},Object(o.a)("Enable Hue"))),e&&n&&!a?i.a.createElement("p",{className:"info",__source:{fileName:ca,lineNumber:305,columnNumber:15}},Object(o.a)("Connected to Hue Bridge at $1.",[this.props.prefValues[l.kHueBridgeIp]])):i.a.createElement("p",{className:"info",__source:{fileName:ca,lineNumber:310,columnNumber:15}},Object(o.a)("Requires a Philips Hue lighting system on the local network.")))),e&&n&&i.a.createElement("div",{className:"setting-group",__source:{fileName:ca,lineNumber:318,columnNumber:11}},i.a.createElement("input",{type:"button",className:"danger",value:Object(o.a)("Reset Bridge Connection"),onClick:this.resetBridge,__source:{fileName:ca,lineNumber:319,columnNumber:13}})),e&&(!n||a)&&i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ca,lineNumber:327,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ca,lineNumber:328,columnNumber:13}},Object(o.a)("Bridge Discovery")),!a&&i.a.createElement("div",{className:"setting-group",__source:{fileName:ca,lineNumber:330,columnNumber:13}},i.a.createElement(la.a,{type:"text",onChange:this.changeManualIp,label:Object(o.a)("Bridge IP (Leave blank to autodiscover)"),placeholder:"127.0.0.1",value:this.state.manualIp,__source:{fileName:ca,lineNumber:331,columnNumber:15}}),i.a.createElement("div",{className:"setting-single",__source:{fileName:ca,lineNumber:338,columnNumber:15}},i.a.createElement("input",{type:"button",className:"primary",value:this.state.manualIp?Object(o.a)("Connect"):Object(o.a)("Find Bridge"),onClick:this.state.manualIp?this.setBridge:this.getBridge,__source:{fileName:ca,lineNumber:339,columnNumber:17}}))),a&&i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ca,lineNumber:353,columnNumber:13}},i.a.createElement("p",{className:"info",__source:{fileName:ca,lineNumber:354,columnNumber:15}},Object(o.a)("Found Bridge at $1. Waiting for button press...",[this.props.prefValues[l.kHueBridgeIp]])),i.a.createElement("div",{className:"hue-press-button",dangerouslySetInnerHTML:{__html:`${dt.f}${Object(o.a)("Press the button on your Bridge")}`},__source:{fileName:ca,lineNumber:359,columnNumber:15}}))),e&&s&&c.length>0&&u.length>0&&i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ca,lineNumber:369,columnNumber:11}},c.map((e,a)=>i.a.createElement("div",{className:"setting-group",key:a,__source:{fileName:ca,lineNumber:372,columnNumber:15}},i.a.createElement("h3",{__source:{fileName:ca,lineNumber:373,columnNumber:17}},e.name),e.lights.map(e=>{const a=parseInt(e),n=u[a];if(!n)return null;const s=n.state.reachable?"":` (${Object(o.a)("Unreachable")})`,r=t&&t.some(e=>e===n.uniqueid),l=n.type.toLowerCase().includes("color light");return i.a.createElement("div",{className:"setting-single",key:n.uniqueid,__source:{fileName:ca,lineNumber:390,columnNumber:21}},i.a.createElement("label",{__source:{fileName:ca,lineNumber:391,columnNumber:23}},i.a.createElement("input",{type:"checkbox",checked:r,disabled:!l,onChange:this.toggleLight.bind(this,a,n.uniqueid),__source:{fileName:ca,lineNumber:392,columnNumber:25}}),i.a.createElement("span",{__source:{fileName:ca,lineNumber:398,columnNumber:25}},`${n.name}${s}`)))})))))}}var ha=Object(v.a)(da,ma),pa=a(548),ba=a(747),ga="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\AcceptLanguage.jsx";function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fa=[l.kTranslateEnabled],_a=r.a.getEventHandler;class va extends i.a.PureComponent{constructor(...e){super(...e),Na(this,"_isMounted",!1),Na(this,"state",{language:x.a.i18n.getUILanguage(),acceptLangs:[],acceptLangsList:[]}),Na(this,"updateAcceptedList",()=>{x.a.i18n.getAcceptLanguages(e=>{x.a.runtime.lastError?(console.error(x.a.runtime.lastError.message),this._isMounted&&this.setState({acceptLangs:[]})):this._isMounted&&this.setState({acceptLangs:e})})}),Na(this,"onContextMenu",(e,t)=>{const a=[];e>=0&&e<this.state.acceptLangs.length&&(a.push({...Object(lt.a)("Move to Top"),handler:this.moveItemToTop.bind(this,e),visible:0!==e}),a.push({...Object(lt.a)("Move Up"),handler:this.moveItem.bind(this,e,e-1),visible:e>1}),a.push({...Object(lt.a)("Move Down"),handler:this.moveItem.bind(this,e,e+1),visible:e!==this.state.acceptLangs.length-1}),a.push({...Object(lt.a)("verb","Remove"),handler:this.removeItem.bind(this,e),visible:this.state.acceptLangs[e]!==this.state.language&&this.state.acceptLangs.length>1})),Object(ot.a)(this.context.vivaldiWindowId,a)(t)}),Na(this,"addItem",e=>{if(e&&e.target){const t=e.target.value;x.a.languageSettingsPrivate.enableLanguage(t),this.updateAcceptedList()}}),Na(this,"moveItem",(e,t)=>{const a=t<e?"UP":"DOWN",n=Math.abs(e-t);Object(ba.a)(n,()=>{x.a.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],a)}),this.updateAcceptedList()}),Na(this,"moveItemToTop",e=>{x.a.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],"TOP"),this.updateAcceptedList()}),Na(this,"removeItem",e=>{this.state.acceptLangs.length<=1||(x.a.languageSettingsPrivate.disableLanguage(this.state.acceptLangs[e]),this.updateAcceptedList())}),Na(this,"resetToDefault",()=>{r.a.reset(l.kAcceptLanguages),this.updateAcceptedList()}),Na(this,"resetTranslationSettingsToDefault",()=>{L.a.prefs.resetTranslationPrefs()}),Na(this,"remapLangs",()=>this.state.acceptLangs.map(e=>({key:e,name:e,isDefault:e===this.state.language||this.state.acceptLangs.length<=1}))),Na(this,"renderItem",(e,t)=>i.a.createElement("span",{__source:{fileName:ga,lineNumber:185,columnNumber:12}},e))}componentDidMount(){this._isMounted=!0,x.a.languageSettingsPrivate.getLanguageList(e=>{x.a.runtime.lastError?console.error(x.a.runtime.lastError.message):this._isMounted&&this.setState({acceptLangsList:e.sort((e,t)=>e.code.localeCompare(t.code)).map(e=>({key:e.code,value:e.nativeDisplayName}))})}),this.updateAcceptedList()}componentWillUnmount(){this._isMounted=!1}render(){const e=this.state.acceptLangsList.filter(e=>!this.state.acceptLangs.includes(e.key));return e.unshift({key:"",value:Object(o.a)("Select Language")}),i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:ga,lineNumber:198,columnNumber:7}},i.a.createElement("div",{className:"setting-group accept-language-list",__source:{fileName:ga,lineNumber:199,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ga,lineNumber:200,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ga,lineNumber:201,columnNumber:13}},Object(o.a)("Accept Languages")),i.a.createElement("p",{className:"info",__source:{fileName:ga,lineNumber:202,columnNumber:13}},Object(o.a)("Preferred languages, accepted by compatible websites in given order")),this.state.acceptLangsList.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"master-detail sortable-list",__source:{fileName:ga,lineNumber:206,columnNumber:15}},i.a.createElement(rt.a,{items:this.remapLangs(),filter:this.props.filter,onCreateItem:this.addItem,moveItem:this.moveItem,onRemove:this.removeItem,onContextMenu:this.onContextMenu,renderListItem:this.renderItem,optionsList:e,addTipString:Object(o.a)("Add Language"),deleteTipString:Object(o.a)("Remove Language"),supportDragAndDrop:!0,mimeType:"vivaldi/x-settings-accept-langage",__source:{fileName:ga,lineNumber:207,columnNumber:17}})),i.a.createElement("input",{type:"button",value:Object(o.a)("Reset to Default"),onClick:this.resetToDefault,__source:{fileName:ga,lineNumber:222,columnNumber:15}})):i.a.createElement("p",{__source:{fileName:ga,lineNumber:228,columnNumber:15}},Object(o.a)("Language list retrieval for “$1” failed",[this.state.language]))),i.a.createElement("div",{className:"setting-single offer-translate",__source:{fileName:ga,lineNumber:232,columnNumber:11}},i.a.createElement("label",{__source:{fileName:ga,lineNumber:233,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTranslateEnabled],onChange:_a(l.kTranslateEnabled),__source:{fileName:ga,lineNumber:234,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:ga,lineNumber:237,columnNumber:15}},i.a.createElement("h3",{__source:{fileName:ga,lineNumber:238,columnNumber:15}},Object(o.a)("Automatically offer to translate pages")))),i.a.createElement("p",{className:"info",__source:{fileName:ga,lineNumber:241,columnNumber:13}},Object(o.a)("When unchecked, translation popup and automatic translations will be disabled. Translation can still be manually triggered on each page.")),i.a.createElement("input",{type:"button",value:Object(o.a)("Reset Translation Settings to Default"),onClick:this.resetTranslationSettingsToDefault,__source:{fileName:ga,lineNumber:244,columnNumber:13}}))))}}Na(va,"contextType",P.a);var Ea=Object(v.a)(va,fa),Ca=a(103),wa=a(552),Oa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\LanguageSetting.jsx";function ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Sa=[l.kCalendarDateFormat,l.kCalendarStartOfWeek,l.kCalendarWeekNumberRule],Ta=r.a.getEventHandler;class ka extends i.a.Component{constructor(...e){super(...e),ya(this,"locales",[...wa.a].sort((e,t)=>e.local.localeCompare(t.local))),ya(this,"_isMounted",!1),ya(this,"state",{initialLanguage:"",language:"",confirmation:!1,localMoment:Ca.a.getLocale()}),ya(this,"langChanged",e=>{const t=e.currentTarget.selectedOptions[0].dataset.lang;this.setState({language:t})}),ya(this,"saveLanguage",()=>{L.a.utilities.setLanguage(this.state.language,()=>{this.setState(e=>({initialLanguage:e.language,confirmation:!1}))})}),ya(this,"saveDateFormat",e=>{const t=e.target.value;r.a.set(l.kCalendarDateFormat,t)}),ya(this,"updateFormatPreview",()=>{L.a.utilities.getSystemDateFormat(e=>{this._isMounted&&this.setState({localMoment:Ca.a.getLocale(e)})})}),ya(this,"confirmLanguageChange",()=>{this.setState({confirmation:!0})}),ya(this,"onCancel",()=>{this.setState(e=>({language:e.initialLanguage,confirmation:!1}))}),ya(this,"renderModal",()=>{const e=this.locales.find(e=>e.key===this.state.language);return e?i.a.createElement(st.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:Oa,lineNumber:132,columnNumber:7}},i.a.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:Oa,lineNumber:135,columnNumber:9}},i.a.createElement("header",{className:"dialog-header",__source:{fileName:Oa,lineNumber:136,columnNumber:11}},i.a.createElement("h1",{className:"dialog-title",__source:{fileName:Oa,lineNumber:137,columnNumber:13}},Object(o.a)("Save New Language?"))),i.a.createElement("div",{className:"dialog-content",__source:{fileName:Oa,lineNumber:141,columnNumber:11}},i.a.createElement("p",{__source:{fileName:Oa,lineNumber:142,columnNumber:13}},Object(o.a)("Vivaldi user interface language will be set to:")),i.a.createElement("p",{__source:{fileName:Oa,lineNumber:143,columnNumber:13}},i.a.createElement("strong",{__source:{fileName:Oa,lineNumber:143,columnNumber:16}},e.local+(e.value!==e.local?" – "+e.value:""))),i.a.createElement("p",{__source:{fileName:Oa,lineNumber:147,columnNumber:13}},Object(o.a)("Browser restart is required for new setting to take effect."))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Oa,lineNumber:149,columnNumber:11}},i.a.createElement("input",{type:"button",className:"danger",onClick:this.saveLanguage,value:Object(o.a)("Save Language"),__source:{fileName:Oa,lineNumber:150,columnNumber:13}}),i.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),autoFocus:!0,__source:{fileName:Oa,lineNumber:154,columnNumber:13}})))):null})}componentDidMount(){this._isMounted=!0,L.a.utilities.getLanguage(e=>{this._isMounted&&this.setState({language:e,initialLanguage:e})}),this.updateFormatPreview()}componentDidUpdate(e,t){const a=this.props.prefValues,n=e.prefValues;a[l.kCalendarDateFormat]===n[l.kCalendarDateFormat]&&a[l.kCalendarStartOfWeek]===n[l.kCalendarStartOfWeek]&&a[l.kCalendarWeekNumberRule]===n[l.kCalendarWeekNumberRule]||this.updateFormatPreview()}componentWillUnmount(){this._isMounted=!1}render(){const e=fe()(),{longDateFormat:t,week:a,weekdays:n}=this.state.localMoment;return e.localeData()._week=this.state.localMoment.week,i.a.createElement(C.a,{categoryTitle:Object(o.a)("Language"),"data-anchor":"language",filter:this.props.filter,__source:{fileName:Oa,lineNumber:172,columnNumber:7}},this.state.confirmation&&this.renderModal(),i.a.createElement("p",{className:"info",__source:{fileName:Oa,lineNumber:178,columnNumber:9}},Object(o.a)("These settings require a restart to take full effect.")),i.a.createElement("form",{className:"setting-group",onSubmit:this.confirmLanguageChange,__source:{fileName:Oa,lineNumber:182,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Oa,lineNumber:183,columnNumber:11}},Object(o.a)("User Interface Language")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Oa,lineNumber:184,columnNumber:11}},i.a.createElement("select",{onChange:this.langChanged,value:this.state.language.toLowerCase(),__source:{fileName:Oa,lineNumber:185,columnNumber:13}},this.locales.map(e=>i.a.createElement("option",{key:e.key,value:e.key.toLowerCase(),"data-lang":e.key,__source:{fileName:Oa,lineNumber:190,columnNumber:21}},e.local+(e.value!==e.local?" – "+e.value:"")))),i.a.createElement("input",{type:"submit",className:"primary",disabled:this.state.language===this.state.initialLanguage,value:Object(o.a)("Save Language"),__source:{fileName:Oa,lineNumber:196,columnNumber:13}}))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Oa,lineNumber:203,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Oa,lineNumber:204,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Oa,lineNumber:205,columnNumber:13}},Object(o.a)("Preferred Date & Time Format")),i.a.createElement("p",{className:"info",__source:{fileName:Oa,lineNumber:206,columnNumber:13}},Object(o.a)("Affects beginning day of week, time and date display format.")),i.a.createElement("select",{value:this.props.prefValues[l.kCalendarDateFormat],onChange:this.saveDateFormat,__source:{fileName:Oa,lineNumber:209,columnNumber:13}},i.a.createElement("option",{value:"system",__source:{fileName:Oa,lineNumber:212,columnNumber:15}},Object(o.a)("Inherit from Operating System")),i.a.createElement("option",{value:"language",__source:{fileName:Oa,lineNumber:213,columnNumber:15}},Object(o.a)("Same as Selected Language")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Oa,lineNumber:217,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Oa,lineNumber:219,columnNumber:13}},Object(o.a)("Week Starts On")),i.a.createElement("label",{__source:{fileName:Oa,lineNumber:220,columnNumber:13}},i.a.createElement("select",{name:"week_starts",value:this.props.prefValues[l.kCalendarStartOfWeek],onChange:Ta(l.kCalendarStartOfWeek),__source:{fileName:Oa,lineNumber:221,columnNumber:15}},i.a.createElement("option",{value:"system",__source:{fileName:Oa,lineNumber:226,columnNumber:17}},Object(o.a)("System Default")),i.a.createElement("option",{value:"sunday",__source:{fileName:Oa,lineNumber:227,columnNumber:17}},Object(o.a)("Sunday")),i.a.createElement("option",{value:"monday",__source:{fileName:Oa,lineNumber:228,columnNumber:17}},Object(o.a)("Monday")),i.a.createElement("option",{value:"tuesday",__source:{fileName:Oa,lineNumber:229,columnNumber:17}},Object(o.a)("Tuesday")),i.a.createElement("option",{value:"wednesday",__source:{fileName:Oa,lineNumber:230,columnNumber:17}},Object(o.a)("Wednesday")),i.a.createElement("option",{value:"thursday",__source:{fileName:Oa,lineNumber:231,columnNumber:17}},Object(o.a)("Thursday")),i.a.createElement("option",{value:"friday",__source:{fileName:Oa,lineNumber:232,columnNumber:17}},Object(o.a)("Friday")),i.a.createElement("option",{value:"saturday",__source:{fileName:Oa,lineNumber:233,columnNumber:17}},Object(o.a)("Saturday"))))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Oa,lineNumber:238,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Oa,lineNumber:240,columnNumber:13}},Object(o.a)("First Week Number")),i.a.createElement("label",{__source:{fileName:Oa,lineNumber:241,columnNumber:13}},i.a.createElement("select",{name:"week_number_rule",value:this.props.prefValues[l.kCalendarWeekNumberRule],onChange:Ta(l.kCalendarWeekNumberRule),__source:{fileName:Oa,lineNumber:242,columnNumber:15}},i.a.createElement("option",{value:"4",__source:{fileName:Oa,lineNumber:248,columnNumber:17}},Object(o.a)("First 4 Day Week (ISO8601)")),i.a.createElement("option",{value:"1",__source:{fileName:Oa,lineNumber:250,columnNumber:17}},Object(o.a)("First Week in Calendar Year")),i.a.createElement("option",{value:"7",__source:{fileName:Oa,lineNumber:252,columnNumber:17}},Object(o.a)("First Whole Week"))))),i.a.createElement("dl",{className:"info",style:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"2px 8px",margin:"12px 0"},__source:{fileName:Oa,lineNumber:257,columnNumber:11}},i.a.createElement("dt",{__source:{fileName:Oa,lineNumber:266,columnNumber:13}},Object(o.a)("Time Format")),i.a.createElement("dd",{__source:{fileName:Oa,lineNumber:267,columnNumber:13}},e.format(t.LT)),i.a.createElement("dt",{__source:{fileName:Oa,lineNumber:268,columnNumber:13}},Object(o.a)("Short Date")),i.a.createElement("dd",{__source:{fileName:Oa,lineNumber:269,columnNumber:13}},e.format(t.L)),i.a.createElement("dt",{__source:{fileName:Oa,lineNumber:270,columnNumber:13}},Object(o.a)("Long Date")),i.a.createElement("dd",{__source:{fileName:Oa,lineNumber:271,columnNumber:13}},e.format(t.LLLL)),i.a.createElement("dt",{__source:{fileName:Oa,lineNumber:272,columnNumber:13}},Object(o.a)("Start of Week")),i.a.createElement("dd",{__source:{fileName:Oa,lineNumber:273,columnNumber:13}},n[a.dow]),i.a.createElement("dt",{__source:{fileName:Oa,lineNumber:274,columnNumber:13}},Object(o.a)("Week Number")),i.a.createElement("dd",{__source:{fileName:Oa,lineNumber:275,columnNumber:13}},e.week()))),i.a.createElement(Ea,{filter:this.props.filter,__source:{fileName:Oa,lineNumber:279,columnNumber:9}}))}}var Aa=Object(v.a)(ka,Sa),Ia=a(852),Da=a(24),Ma=a(42),Pa=a(432),xa=a(222),La="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CalendarItem.jsx";function ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{isLocalCalendar:Ra}=Ma.a,{UNKNOWN:Ba,OK:Fa,ERROR:Ua}=ve.a;class Ha extends n.Component{constructor(...e){super(...e),ja(this,"state",{status:Ba,statusText:"",calendar:this.props.calendar}),ja(this,"isCalendarChanged",()=>{const e=this.props.calendar;return!!e&&!(this.state.calendar.name===e.name&&this.state.calendar.description===e.description&&this.state.calendar.color===e.color&&this.state.calendar.hidden===e.hidden&&this.state.calendar.active===e.active&&this.state.calendar.timezone===e.timezone)}),ja(this,"setCalendarProperty",e=>{this.setState(t=>({calendar:{...t.calendar,...e}}))}),ja(this,"onChange",e=>{const{name:t,value:a}=e.target,n={},i="iconindex"===t?isNaN(a)?0:parseInt(a):a;n[t]=i,this.setCalendarProperty(n)}),ja(this,"isUrlValid",async e=>{if(!e)return!1;const{urlValid:t}=await L.a.utilities.isUrlValid(e);return t}),ja(this,"logStatus",(e,t)=>{this.setState({status:t,statusText:e})}),ja(this,"saveCalendar",()=>{this.props.save(this.state.calendar)}),ja(this,"setColor",(e,t,a=!1)=>{this.setCalendarProperty({color:e.hex()})}),ja(this,"onChangeCheckbox",e=>{const{checked:t,name:a}=e.target;this.setState(e=>({calendar:{...e.calendar,[a]:t}}))}),ja(this,"exportCalendar",()=>Da.a.exportEvents(this.state.calendar.id))}render(){const{description:e,color:t,hidden:a,active:i,id:s}=this.state.calendar,r=this.state.status===Ua?"error":this.state.status===Fa?"success":"info";return n.createElement("form",{className:"detail",onSubmit:this.saveCalendar,__source:{fileName:La,lineNumber:126,columnNumber:7}},n.createElement("div",{className:"detail-content",__source:{fileName:La,lineNumber:127,columnNumber:9}},n.createElement("div",{className:"setting-group",__source:{fileName:La,lineNumber:129,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:130,columnNumber:13}},n.createElement(la.a,{type:"text",onChange:this.onChange,name:"description",label:this.props.searchableStrings["Calendar Name"],value:e,__source:{fileName:La,lineNumber:131,columnNumber:15}})),n.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:139,columnNumber:13}},n.createElement("label",{__source:{fileName:La,lineNumber:140,columnNumber:15}},n.createElement("input",{type:"checkbox",name:"hidden",checked:a,onChange:this.onChangeCheckbox,__source:{fileName:La,lineNumber:141,columnNumber:17}}),n.createElement("span",{__source:{fileName:La,lineNumber:147,columnNumber:17}},this.props.searchableStrings["Hide from Calendar View"])))),n.createElement("div",{className:"setting-group",__source:{fileName:La,lineNumber:151,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:152,columnNumber:13}},n.createElement(Pa.a,{label:this.props.searchableStrings.Color,disabled:a,colorKey:"color",colorValue:t||ve.w[0].value,setColor:this.setColor,predefinedColors:ve.w,__source:{fileName:La,lineNumber:153,columnNumber:15}}))),!Ra(s)&&n.createElement("div",{className:"setting-group",__source:{fileName:La,lineNumber:165,columnNumber:11}},n.createElement("h3",{__source:{fileName:La,lineNumber:166,columnNumber:13}},Object(o.a)("Sync Calendar")),n.createElement("div",{className:"setting-single",__source:{fileName:La,lineNumber:167,columnNumber:13}},n.createElement("label",{title:Object(o.a)("Active"),__source:{fileName:La,lineNumber:168,columnNumber:15}},n.createElement("input",{type:"checkbox",name:"active",checked:i,onChange:this.onChangeCheckbox,__source:{fileName:La,lineNumber:169,columnNumber:17}}),n.createElement("span",{__source:{fileName:La,lineNumber:175,columnNumber:17}},this.props.searchableStrings.Active)))),this.state.statusText&&n.createElement("div",{className:"setting-group-double",__source:{fileName:La,lineNumber:181,columnNumber:13}},n.createElement(xa.a,{type:r,__source:{fileName:La,lineNumber:182,columnNumber:15}},this.state.statusText))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:La,lineNumber:188,columnNumber:9}},n.createElement("input",{type:"submit",value:Object(o.a)("Save"),disabled:!this.isCalendarChanged(),__source:{fileName:La,lineNumber:189,columnNumber:11}}),n.createElement("input",{type:"button",onClick:this.exportCalendar,value:Object(o.a)("Export Calendar"),__source:{fileName:La,lineNumber:194,columnNumber:11}})))}}var Va=Ha,Wa=a(383),za=a(32),Ga=a(503),Ka="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CreateCalendar.jsx";function Ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{getCalendarCreateParams:$a}=Wa.a;class Xa extends i.a.PureComponent{constructor(e){super(e),Ya(this,"setColor",(e,t,a=!1)=>this.setCalendarProperty(t,e.hex())),Ya(this,"onAccountChange",e=>{this.setCalendarProperty("accountId",e.target.value)}),Ya(this,"onCalendarChange",e=>{const{name:t,value:a}=e.target,n="iconindex"===t?isNaN(a)?0:parseInt(a):a;this.setCalendarProperty(t,n)}),Ya(this,"setCalendarProperty",(e,t)=>this.setState(a=>({calendar:{...a.calendar,[e]:t}}))),Ya(this,"createCalendar",()=>{this.props.createCalendar(this.state.calendar)}),Ya(this,"isCalendarValid",()=>Boolean(this.state.calendar.description)),this.state={calendar:$a()}}render(){const{color:e,description:t,accountId:a}=this.state.calendar,n=za.a.getAccounts();return i.a.createElement("form",{className:"detail",onSubmit:this.createCalendar,__source:{fileName:Ka,lineNumber:68,columnNumber:7}},i.a.createElement("div",{className:"detail-content",__source:{fileName:Ka,lineNumber:69,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Ka,lineNumber:70,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ka,lineNumber:71,columnNumber:13}},n.length>1&&i.a.createElement("label",{__source:{fileName:Ka,lineNumber:73,columnNumber:17}},Object(o.a)("Account"),i.a.createElement("select",{onChange:this.onAccountChange,value:a,__source:{fileName:Ka,lineNumber:75,columnNumber:19}},n.map(e=>i.a.createElement("option",{key:e.id,value:e.id,__source:{fileName:Ka,lineNumber:77,columnNumber:23}},e.name)))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Ka,lineNumber:86,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ka,lineNumber:87,columnNumber:13}},i.a.createElement(la.a,{type:"text",onChange:this.onCalendarChange,name:"description",label:this.props.searchableStrings["Calendar Name"],value:t,autoFocus:!0,__source:{fileName:Ka,lineNumber:88,columnNumber:15}}))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Ka,lineNumber:99,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ka,lineNumber:100,columnNumber:13}},i.a.createElement(Pa.a,{label:this.props.searchableStrings.Color,colorKey:"color",colorValue:e||ve.w[0].value,setColor:this.setColor,predefinedColors:ve.w,__source:{fileName:Ka,lineNumber:101,columnNumber:15}})))),i.a.createElement("div",{className:"detail-toolbar",__source:{fileName:Ka,lineNumber:111,columnNumber:9}},i.a.createElement("input",{className:"primary",type:"submit",disabled:!this.isCalendarValid(),value:Object(o.a)("Create Calendar"),__source:{fileName:Ka,lineNumber:112,columnNumber:11}})))}}var Za=Xa,Qa=a(273),qa=a(250),Ja=a.n(qa),en="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\ListCalendars.jsx";function tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{ensureAccountType:an}=Ma.a,nn={"Add your First Calendar":Object(o.a)("Add your First Calendar"),"Press the “Add” button to the left to add a new Calendar.":Object(o.a)("Press the “Add” button to the left to add a new Calendar.")},sn={...ve.l,"Calendar Name":Object(o.a)("Calendar Name"),Active:Object(o.a)("Active"),"Hide from Calendar View":Object(o.a)("Hide from Calendar View"),"Calendar Type":Object(o.a)("Calendar Type"),Name:Object(o.a)("calendar","Name"),CalDav:Object(o.a)("CalDAV"),URL:Object(o.a)("Address"),Subscribe:Object(o.a)("Subscribe"),Password:Object(o.a)("Password"),Username:Object(o.a)("Username"),"Event Template":Object(o.a)("Event Template"),"Refresh Interval":Object(o.a)("Refresh Interval"),Timezone:Object(o.a)("Timezone"),Color:Object(o.a)("calendar","Color"),Index:Object(o.a)("Index")};class rn extends i.a.PureComponent{constructor(...e){super(...e),tn(this,"removeAt",e=>{const t=this.props.calendars[e];Da.a.deleteCalendar(t,!0)}),tn(this,"renderListItem",(e,t)=>{const a=this.props.accounts.find(e=>e.id===t.accountId);if(a){const n=an(a.account_type),s="local"===n?dt.H:dt.M;return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"item-icon",style:{fill:t.color},dangerouslySetInnerHTML:{__html:s.large},__source:{fileName:en,lineNumber:81,columnNumber:9}}),i.a.createElement("div",{className:"item-title",__source:{fileName:en,lineNumber:86,columnNumber:11}},e),i.a.createElement("div",{className:"item-meta",__source:{fileName:en,lineNumber:89,columnNumber:11}},`${a.name} (${ve.l[n]})`))}return i.a.createElement("div",{__source:{fileName:en,lineNumber:95,columnNumber:14}})}),tn(this,"renderCreateListItem",()=>i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"item-title",__source:{fileName:en,lineNumber:101,columnNumber:7}},Object(o.a)("New Calendar")),i.a.createElement("div",{className:"item-meta",__source:{fileName:en,lineNumber:102,columnNumber:7}}," "))),tn(this,"save",e=>{const{id:t,...a}=e;Da.a.updateCalendar(t,a)}),tn(this,"createCalendar",e=>{0===za.a.getAccounts().length?Wa.a.createLocalAccountAndCalendar(null,e):(Da.a.setDefaultAccountId(e.accountId),Da.a.createCalendar(e,!0))}),tn(this,"renderContent",(e,t)=>{const{calendars:a}=this.props,n=a&&a[e],s=Ja()(Object.values(n).reduce((e,t)=>e+t));return i.a.createElement(Va,{key:s,save:this.save,searchableStrings:t,calendar:n,__source:{fileName:en,lineNumber:130,columnNumber:7}})}),tn(this,"renderCreate",e=>i.a.createElement(Za,{searchableStrings:e,createCalendar:this.createCalendar,__source:{fileName:en,lineNumber:140,columnNumber:5}})),tn(this,"renderEmpty",e=>i.a.createElement("div",{className:"detail",__source:{fileName:en,lineNumber:147,columnNumber:5}},i.a.createElement("div",{className:"detail-content",__source:{fileName:en,lineNumber:148,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:en,lineNumber:149,columnNumber:9}},nn["Add your First Calendar"]),i.a.createElement("p",{__source:{fileName:en,lineNumber:150,columnNumber:9}},nn["Press the “Add” button to the left to add a new Calendar."])))),tn(this,"remapCalendars",()=>this.props.calendars.map(e=>({...e,name:e.description||e.name,key:e.id})))}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Calendars"),filter:this.props.filter,__source:{fileName:en,lineNumber:171,columnNumber:7}},i.a.createElement(Qa.a,{style:{height:280},className:"allowOverflow",deleteTitle:Object(o.a)("title","Delete Calendar"),addTipString:Object(o.a)("Add Calendar"),deleteTipString:Object(o.a)("tooltip","Delete Calendar"),emptyListGraphic:a(1674),emptyListString:Object(o.a)("No Calendars added"),filter:this.props.filter,items:this.remapCalendars(),masterLayout:0,onRemove:this.removeAt,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,renderCreate:this.renderCreate,renderEmpty:this.renderEmpty,contentStrings:sn,emptyStrings:nn,createStrings:sn,__source:{fileName:en,lineNumber:175,columnNumber:7}}))}}var on=Object(Ga.a)(rn),ln=a(166),cn=a(526),un=a(625),mn=a(47),dn=a(257),hn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailAccountDeleteDialog.jsx";class pn extends i.a.PureComponent{constructor(...e){var t,a,n;super(...e),n={deleteFiles:!1},(a="state")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}async onSubmit(e){const{MAIL_EMAIL:t,accountType:a}=this.props.account;e.preventDefault(),Object(dn.b)({...this.props.account,isDeleted:!0}),mn.a.removeAccount(t,this.state.deleteFiles,a),this.props.onClose()}onChangeFileDeletion(){this.setState(e=>({deleteFiles:!e.deleteFiles}))}render(){const{MAIL_EMAIL:e}=this.props.account;return(i.a.createElement("form",{onSubmit:this.onSubmit.bind(this),__source:{fileName:hn,lineNumber:48,columnNumber:7}},i.a.createElement("header",{className:"dialog-double-header",__source:{fileName:hn,lineNumber:49,columnNumber:9}},i.a.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:dt.Zd.large},__source:{fileName:hn,lineNumber:50,columnNumber:11}}),i.a.createElement("h1",{className:"dialog-title",__source:{fileName:hn,lineNumber:53,columnNumber:11}},Object(o.a)("Delete Account $1",[e]))),i.a.createElement("div",{className:"dialog-content",__source:{fileName:hn,lineNumber:57,columnNumber:9}},i.a.createElement("label",{__source:{fileName:hn,lineNumber:58,columnNumber:11}},i.a.createElement("input",{autoFocus:!0,type:"checkbox",checked:this.state.deleteFiles,onChange:this.onChangeFileDeletion.bind(this),__source:{fileName:hn,lineNumber:59,columnNumber:13}}),Object(o.a)("Also delete message files from disk")),i.a.createElement("p",{className:"info",__source:{fileName:hn,lineNumber:67,columnNumber:11}},Object(o.a)("If checked, all message files for $1 will be deleted. Otherwise they will remain on disk.",[e]))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:hn,lineNumber:71,columnNumber:9}},i.a.createElement("input",{type:"submit",className:"danger",value:Object(o.a)("verb","Delete"),autoFocus:!0,__source:{fileName:hn,lineNumber:72,columnNumber:11}}),i.a.createElement("input",{type:"button",onClick:this.props.onClose,value:Object(o.a)("Cancel"),__source:{fileName:hn,lineNumber:73,columnNumber:11}}))))}}var bn=pn,gn=a(463),Nn=a(14),fn=a(810),_n=a(206),vn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\ListMailAccounts.jsx";function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Cn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wn extends n.PureComponent{constructor(...e){super(...e),Cn(this,"_isMounted",!1),Cn(this,"state",{isCreating:!1,accounts:[],capabilities:{},setupStep:"setup"}),Cn(this,"loadAccountsAndCapabilities",async e=>{const t=await _n.a.loadAllAccounts();if(t.length<this.state.accounts.length)this.setState({accounts:t});else{let a;e&&t.length>this.state.accounts.length&&(a="signature");const n=await ln.a.getCapabilities();this._isMounted&&(a?this.setState({accounts:t,capabilities:n,setupStep:a,isCreating:!1}):this.setState({accounts:t,capabilities:n}))}}),Cn(this,"renderListItem",(e,t)=>{if(t.name){const e=t.MAIL_EMAIL.split("@")[1],a=t.isDeleted?Object(o.a)("Deleting..."):e;return n.createElement(gn.a,{title:t.name,meta:a,iconPath:e,iconFallbackPath:"/resources/vivaldi_mail_default.png",__source:{fileName:vn,lineNumber:103,columnNumber:14}})}return null}),Cn(this,"showDirectory",e=>{L.a.mailPrivate.getFileDirectory(e,e=>{e&&Nn.a.openURL(`file://${e}`,{inCurrent:!1,inBackground:!1})})}),Cn(this,"onContextMenu",(e,t)=>{const a=this.state.accounts[e],n=a&&a.MAIL_EMAIL,i=Ja()(n).substring(0,6),s=[{handler:this.showDirectory.bind(this,i),visible:!0,...Object(lt.a)("Reveal Data Folder")}];Object(ot.a)(this.context.vivaldiWindowId,s)(t)}),Cn(this,"renderCreateListItem",()=>n.createElement(gn.a,{title:Object(o.a)("New Account"),meta:Object(o.a)("Setup in progress..."),iconFallbackPath:"/resources/vivaldi_mail_default.png",style:{opacity:.3},__source:{fileName:vn,lineNumber:142,columnNumber:7}})),Cn(this,"renderContent",(e,t)=>{const a=this.state.accounts[e],i=this.state.capabilities[a.MAIL_EMAIL]||[];return"tips"===this.state.setupStep?n.createElement(fn.a,{onCreateItem:this.onCreateItem,__source:{fileName:vn,lineNumber:155,columnNumber:14}}):n.createElement(un.a,{accountSettings:a,capability:i,searchableStrings:t,showTips:"signature"===this.state.setupStep?()=>this.showTips():void 0,__source:{fileName:vn,lineNumber:159,columnNumber:12}})}),Cn(this,"showTips",()=>{this.setState({setupStep:"tips"})}),Cn(this,"renderCreate",e=>n.createElement(cn.a,{key:"create",focusInput:!0,emptyAccounts:0===this.state.accounts.length,searchableStrings:e,__source:{fileName:vn,lineNumber:174,columnNumber:12}})),Cn(this,"renderEmpty",e=>n.createElement(cn.a,{key:"empty",emptyAccounts:!0,searchableStrings:e,__source:{fileName:vn,lineNumber:183,columnNumber:5}})),Cn(this,"remapAccounts",()=>this.state.accounts.map(e=>({...e,key:e.MAIL_EMAIL,name:e.MAIL_EMAIL}))),Cn(this,"deleteDialog",e=>n.createElement(bn,En({},e,{__source:{fileName:vn,lineNumber:197,columnNumber:12}}))),Cn(this,"onCreateItem",()=>{this.setState({isCreating:!0,setupStep:"setup"})}),Cn(this,"onCancelCreateItem",()=>{this.setState({isCreating:!1})})}componentDidMount(){this._isMounted=!0,this.loadAccountsAndCapabilities()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(e){if(e.prefValues[l.kMailAccounts]!==this.props.prefValues[l.kMailAccounts]){const e=!0;this.loadAccountsAndCapabilities(e)}}render(){return n.createElement(Qa.a,{title:Object(o.a)("Mail Accounts"),addTipString:Object(o.a)("Add account"),items:this.remapAccounts(),masterLayout:0,onRemove:()=>{},deleteDialog:this.deleteDialog,onContextMenu:this.onContextMenu,emptyListGraphic:a(1675),emptyListString:Object(o.a)("No accounts added"),renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,contentStrings:un.b,isCreating:this.state.isCreating,onCreateItem:this.onCreateItem,onCancelCreateItem:this.onCancelCreateItem,renderCreate:this.renderCreate,className:"setting-mail-account",createStrings:cn.b,renderEmpty:this.renderEmpty,emptyStrings:cn.b,filter:this.props.filter,__source:{fileName:vn,lineNumber:213,columnNumber:12}})}}Cn(wn,"contextType",P.a);var On=Object(v.a)(wn,[l.kMailAccounts]),yn=a(811),Sn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\rss\\RSSAccountItem.jsx";function Tn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const kn={Title:Object(o.a)("Title"),Address:Object(o.a)("Address"),"Every 5 minutes":Object(o.a)("Every 5 minutes"),"Every 15 minutes":Object(o.a)("Every 15 minutes"),"Every 30 minutes":Object(o.a)("Every 30 minutes"),"Every hour":Object(o.a)("Every hour"),"Every 2 hours":Object(o.a)("Every 2 hours"),"Every 6 hours":Object(o.a)("Every 6 hours"),"Every 12 hours":Object(o.a)("Every 12 hours"),Daily:Object(o.a)("Daily"),Weekly:Object(o.a)("Weekly"),Offline:Object(o.a)("Offline")};class An extends n.Component{constructor(e){super(e),Tn(this,"isAccountChanged",()=>{const e=this.props.account;if(!e||!this.state.urlValidated)return!1;const{url:t,path:a,title:n,refreshInterval:i,offline:s}=this.state.account;return!(n===e.title&&t===e.url&&a===e.path&&i===e.refreshInterval&&s===e.offline)}),Tn(this,"isUrlValid",e=>""!==e.trim()&&(e.split(/\s/).filter(e=>e)||[e]).every(e=>Object(Ct.n)(e))),Tn(this,"setAccountProperty",e=>{const{name:t,value:a}=e.target,n=this.isUrlValid("url"===t?a:this.state.account.url);this.setState(e=>({account:{...e.account,[t]:a},urlValidated:n}))}),Tn(this,"changeOffline",e=>{const{checked:t}=e.target,a=this.isUrlValid(this.state.account.url);this.setState(e=>({account:{...e.account,offline:t},urlValidated:a}))}),Tn(this,"saveAccount",()=>{const{url:e,path:t,title:a,refreshInterval:n,lastChecked:i,offline:s}=this.state.account;this.props.save({url:e,path:t,title:a,refreshInterval:n,lastChecked:i,offline:s},this.props.accountIndex)}),this.state={account:this.props.account,accountIndex:this.props.accountIndex,urlValidated:!1}}render(){return n.createElement("form",{className:"detail",onSubmit:this.saveAccount,__source:{fileName:Sn,lineNumber:115,columnNumber:7}},n.createElement("div",{className:"detail-content",__source:{fileName:Sn,lineNumber:116,columnNumber:9}},n.createElement("div",{className:"setting-group",__source:{fileName:Sn,lineNumber:117,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Sn,lineNumber:118,columnNumber:13}},n.createElement(la.a,{type:"text",onChange:this.setAccountProperty,name:"title",label:this.props.searchableStrings.Title,placeholder:Object(o.a)("Feed Title"),value:this.state.account.title,autoFocus:!this.state.account.title,__source:{fileName:Sn,lineNumber:119,columnNumber:15}})),n.createElement("div",{className:"setting-single",__source:{fileName:Sn,lineNumber:130,columnNumber:13}},n.createElement(la.a,{type:"text",onChange:this.setAccountProperty,name:"url",label:this.props.searchableStrings.Address,placeholder:Object(o.a)("Feed Address"),isVerified:this.state.urlValidated,value:this.state.account.url,__source:{fileName:Sn,lineNumber:131,columnNumber:15}})),n.createElement("div",{className:"setting-single",__source:{fileName:Sn,lineNumber:141,columnNumber:13}},n.createElement("label",{className:"floating-label",__source:{fileName:Sn,lineNumber:142,columnNumber:15}},n.createElement("span",{__source:{fileName:Sn,lineNumber:143,columnNumber:17}},Object(o.a)("Refresh Interval")),n.createElement("select",{onChange:this.setAccountProperty,value:this.state.account.refreshInterval,name:"refreshInterval",__source:{fileName:Sn,lineNumber:144,columnNumber:17}},Object(yn.a)()))),n.createElement("div",{className:"setting-single",__source:{fileName:Sn,lineNumber:153,columnNumber:13}},n.createElement("label",{__source:{fileName:Sn,lineNumber:154,columnNumber:15}},n.createElement("input",{type:"checkbox",name:"offline",checked:!!this.state.account.offline&&this.state.account.offline,onChange:this.changeOffline,__source:{fileName:Sn,lineNumber:155,columnNumber:17}}),n.createElement("span",{__source:{fileName:Sn,lineNumber:161,columnNumber:17}},this.props.searchableStrings.Offline))))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:Sn,lineNumber:167,columnNumber:9}},n.createElement("input",{type:"submit",value:Object(o.a)("Save"),disabled:!this.isAccountChanged(),__source:{fileName:Sn,lineNumber:168,columnNumber:11}})))}}var In=An,Dn=a(313),Mn=a(84),Pn=a.n(Mn),xn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\rss\\ListRSSAccounts.jsx";function Ln(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jn=[l.kRssDetectFeeds,l.kRssEmbedYoutubeAttachments,l.kRssShowNotifications],Rn=r.a.getEventHandler,Bn={"Add your First Newsfeed Account":Object(o.a)("Add your First Newsfeed Account"),"Press the “Add” button to the left to add a new account.":Object(o.a)("Press the “Add” button to the left to add a new account.")};class Fn extends i.a.PureComponent{constructor(e){super(e),Ln(this,"componentDidMount",()=>{Xe.a.addListener(l.kRssSettings,this._onSettingsChanged)}),Ln(this,"componentWillUnmount",()=>{Xe.a.removeListener(l.kRssSettings,this._onSettingsChanged)}),Ln(this,"_onSettingsChanged",(e,t)=>{this.setState({accounts:t})}),Ln(this,"removeAt",e=>{const{path:t}=this.state.accounts[e];Dn.a.removeFeed(t)}),Ln(this,"renderListItem",(e,t)=>{const{hostname:a}=Pn.a.parse(t.url),n=(a||"").split(".").slice(-2).join(".");return i.a.createElement(gn.a,{key:t.url,title:t.title,meta:t.url,iconPath:n,iconFallbackPath:"/resources/vivaldi_rss_default.png",__source:{fileName:xn,lineNumber:82,columnNumber:12}})}),Ln(this,"renderCreateListItem",()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(gn.a,{title:Object(o.a)("New Feed"),meta:Object(o.a)("Setup in progress..."),iconFallbackPath:"/resources/vivaldi_rss_default.png",style:{opacity:.3},__source:{fileName:xn,lineNumber:92,columnNumber:5}}))),Ln(this,"save",(e,t)=>{const{accounts:a}=this.state;if(t<a.length)Dn.a.edit(e,t);else{const t=[],a=e.url.split(/\s/).filter(e=>e);a.length>1?a.forEach(a=>{const{title:n,path:i}=e;t.some(e=>e.url===a)||t.push({url:a,path:i,title:n,refreshInterval:5,lastChecked:0,offline:!1})}):t.push(e),Dn.a.add(t)}}),Ln(this,"renderContent",(e,t)=>{const{accounts:a}=this.state,n=a&&a[e];return n?i.a.createElement(In,{key:n.url,save:this.save,searchableStrings:t,account:n,accountIndex:e,__source:{fileName:xn,lineNumber:134,columnNumber:9}}):null}),Ln(this,"renderCreate",e=>{const{accounts:t}=this.state;return i.a.createElement(In,{save:this.save,searchableStrings:e,account:{title:"",url:"",path:"",lastChecked:0,refreshInterval:0,offline:!1},accountIndex:t.length,__source:{fileName:xn,lineNumber:157,columnNumber:7}})}),Ln(this,"renderEmpty",e=>i.a.createElement("div",{className:"detail",__source:{fileName:xn,lineNumber:167,columnNumber:5}},i.a.createElement("div",{className:"detail-content",__source:{fileName:xn,lineNumber:168,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:xn,lineNumber:169,columnNumber:9}},e["Add your First Newsfeed Account"]),i.a.createElement("p",{__source:{fileName:xn,lineNumber:170,columnNumber:9}},e["Press the “Add” button to the left to add a new account."])))),Ln(this,"remapAccounts",()=>this.state.accounts.map(e=>({...e,key:e.title,name:e.title}))),this.state={accounts:Xe.a.get(l.kRssSettings)}}render(){return i.a.createElement(C.a,{filter:this.props.filter,categoryTitle:Object(o.a)("Newsfeed Accounts"),__source:{fileName:xn,lineNumber:183,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:xn,lineNumber:187,columnNumber:9}},i.a.createElement(Qa.a,{deleteTitle:Object(o.a)("title","Delete Feed"),addTipString:Object(o.a)("title","Add Feed"),deleteTipString:Object(o.a)("tooltip","Delete Feed"),emptyListGraphic:a(1676),emptyListString:Object(o.a)("No Feeds added"),filter:this.props.filter,items:this.remapAccounts(),masterLayout:0,onRemove:this.removeAt,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,renderCreate:this.renderCreate,renderEmpty:this.renderEmpty,contentStrings:kn,emptyStrings:Bn,style:{height:300},__source:{fileName:xn,lineNumber:188,columnNumber:11}}),i.a.createElement("div",{className:"setting-single",__source:{fileName:xn,lineNumber:207,columnNumber:11}},i.a.createElement("input",{type:"button",onClick:Dn.a.updateAllFeeds,value:Object(o.a)("Update All Feeds"),__source:{fileName:xn,lineNumber:208,columnNumber:13}}))),i.a.createElement("div",{className:"setting-group",__source:{fileName:xn,lineNumber:216,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:xn,lineNumber:217,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:xn,lineNumber:218,columnNumber:13}},Object(o.a)("Feed Detection")),i.a.createElement("label",{title:Object(o.a)("Use Vivaldi Feeds to detect, preview and subscribe to feeds."),__source:{fileName:xn,lineNumber:219,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kRssDetectFeeds],onChange:Rn(l.kRssDetectFeeds),__source:{fileName:xn,lineNumber:222,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:xn,lineNumber:227,columnNumber:15}},Object(o.a)("Detect Feeds in Web Pages"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:xn,lineNumber:232,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:xn,lineNumber:233,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:xn,lineNumber:234,columnNumber:13}},Object(o.a)("Feed Notifications")),i.a.createElement("label",{__source:{fileName:xn,lineNumber:235,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kRssShowNotifications],onChange:Rn(l.kRssShowNotifications),__source:{fileName:xn,lineNumber:236,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:xn,lineNumber:240,columnNumber:15}},Object(o.a)("Show Notifications for New Feed Items"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:xn,lineNumber:245,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:xn,lineNumber:246,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:xn,lineNumber:247,columnNumber:13}},Object(o.a)("Attachments")),i.a.createElement("label",{__source:{fileName:xn,lineNumber:248,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kRssEmbedYoutubeAttachments],onChange:Rn(l.kRssEmbedYoutubeAttachments),__source:{fileName:xn,lineNumber:249,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:xn,lineNumber:253,columnNumber:15}},Object(o.a)("Embed YouTube Links in Attachments"))))))}}var Un=Object(v.a)(Fn,jn),Hn=a(127),Vn=a(519),Wn=a(98),zn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterSelector.jsx";function Gn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kn extends i.a.PureComponent{constructor(...e){super(...e),Gn(this,"state",{rule:"",ruleName:Object.keys(this.props.rules)[0],mailAddresses:Object(Wn.c)(...Hn.a.getMailAddresses()),isValidInput:!1}),Gn(this,"_mailAddressesChanged",()=>{const e=Object(Wn.c)(...Hn.a.getMailAddresses());this.setState({mailAddresses:e})}),Gn(this,"onChangeRuleName",e=>{const t=e.target.value;"subject"!==t&&"to"!==t&&"from"!==t&&"cc"!==t||this.setState({ruleName:t})}),Gn(this,"onChange",e=>{this.setState({rule:e.target.value,isValidInput:e.target.value.trim().length>0})}),Gn(this,"onSubmit",()=>{this.state.rule&&"subject"===this.state.ruleName&&(this.props.onSubmit({subject:this.state.rule}),this.setState({rule:""}))}),Gn(this,"addAddressToRuleGroup",e=>{if(e.length>0){const t={[this.state.ruleName]:e[0]};this.props.onSubmit(t)}}),Gn(this,"setIsValidInput",e=>{this.state.isValidInput!==e&&this.setState({isValidInput:e})})}componentDidMount(){Hn.a.addChangeListener(this._mailAddressesChanged)}componentWillUnmount(){Hn.a.removeChangeListener(this._mailAddressesChanged)}render(){const e=this.state.ruleName;return(i.a.createElement("form",{onSubmit:this.onSubmit,__source:{fileName:zn,lineNumber:86,columnNumber:7}},i.a.createElement("select",{onChange:this.onChangeRuleName,value:this.state.ruleName,__source:{fileName:zn,lineNumber:87,columnNumber:9}},this.props.rules&&Object.keys(this.props.rules).map(e=>i.a.createElement("option",{key:e,value:e,__source:{fileName:zn,lineNumber:90,columnNumber:15}},this.props.rules[e]))),"from"===e||"to"===e||"cc"===e?i.a.createElement(Vn.a,{id:e,selectedItems:[],allItems:this.state.mailAddresses||[],itemSelectionCallback:this.addAddressToRuleGroup,setIsValidInput:this.setIsValidInput,__source:{fileName:zn,lineNumber:97,columnNumber:13}}):i.a.createElement("input",{type:"text",onChange:this.onChange,value:this.state.rule,__source:{fileName:zn,lineNumber:105,columnNumber:13}}),i.a.createElement("input",{type:"button",disabled:!this.state.isValidInput,onClick:this.onSubmit,value:Object(o.a)("Add"),__source:{fileName:zn,lineNumber:111,columnNumber:9}})))}}var Yn=Kn,$n=a(34),Xn=a(99),Zn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterManagerEditor.jsx";function Qn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const qn={from:Object(o.a)("sender","From"),to:Object(o.a)("To"),cc:Object(o.a)("Cc"),subject:Object(o.a)("Subject")},Jn={MailFilter:Object(o.a)("MailFilter","Name"),"Search (using keywords)":Object(o.a)("Search (using keywords)"),Include:Object(o.a)("Include"),"Add Include Group":Object(o.a)("Add Include Group"),Exclude:Object(o.a)("Exclude"),"Add Exclude Group":Object(o.a)("Add Exclude Group"),Save:Object(o.a)("Save")};class ei extends n.Component{constructor(...e){super(...e),Qn(this,"state",{filter:this.props.filter}),Qn(this,"updateName",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({filter:e})=>{e.name=t}))}),Qn(this,"updateFilter",(e,t)=>{const a=t.target.value;this.setState(Object(Xn.c)(({filter:t})=>{"query"===e&&(t.name&&t.name!==t.filterValue.query||(t.name=a)),t.filterValue[e]=a}))}),Qn(this,"saveFilter",()=>{this.state.filter.id?this.props.filter.id&&mn.a.putFilter(this.state.filter,this.props.filter):mn.a.addFilter(this.state.filter,!0)}),Qn(this,"addRuleGroup",e=>{this.setState(Object(Xn.c)(({filter:t})=>{t.filterValue[e]?t.filterValue[e].push([]):t.filterValue[e]=[[]]}))}),Qn(this,"addRuleToGroup",(e,t,a)=>{this.setState(Object(Xn.c)(({filter:n})=>{n.filterValue[e]&&n.filterValue[e][t].push(a)}))}),Qn(this,"removeRule",(e,t,a)=>{this.setState(Object(Xn.c)(({filter:n})=>{n.filterValue[e]&&n.filterValue[e][t].splice(a,1)}))}),Qn(this,"removeGroup",(e,t)=>{this.setState(Object(Xn.c)(({filter:a})=>{a.filterValue[e]&&(1===a.filterValue[e].length?delete a.filterValue[e]:a.filterValue[e].splice(t,1))}))}),Qn(this,"renderSingleRule",(e,t,a,i)=>{let s,r;if(this.state.filter.filterValue[t]){const e=this.state.filter.filterValue[t][a][i];for(const t in e)r="from"===t||"to"===t||"cc"===t?Object(Wn.f)(e[t]):e[t],s=qn[t]}return(n.createElement("div",{className:"setting-rule",key:i,__source:{fileName:Zn,lineNumber:159,columnNumber:7}},n.createElement("span",{className:"setting-rule-name",__source:{fileName:Zn,lineNumber:160,columnNumber:9}},s),n.createElement("span",{className:"setting-rule-value",__source:{fileName:Zn,lineNumber:161,columnNumber:9}},r),n.createElement("button",{onClick:this.removeRule.bind(this,t,a,i),title:Object(o.a)("Remove Rule"),className:"FormButton setting-rule-remove",dangerouslySetInnerHTML:{__html:dt.Nd},__source:{fileName:Zn,lineNumber:162,columnNumber:9}})))}),Qn(this,"renderRuleGroups",e=>{const t=$n.b.findOptionalRules(this.state.filter),a=Object.keys(qn),i=[],s=this.state.filter.filterValue[e];return null==s||s.forEach((s,r)=>{const l=[];0===s.length?l.push(void 0):s.forEach((n,i)=>{for(const s in n){if($n.b.isOptionalRule(n,t))return;a.includes(s)&&l.push(this.renderSingleRule(n[s],e,r,i))}}),l.length>0&&i.push(n.createElement("div",{key:e+String(r),className:"setting-rulegroup",__source:{fileName:Zn,lineNumber:209,columnNumber:11}},n.createElement("div",{className:"setting-rulegroup-header",__source:{fileName:Zn,lineNumber:213,columnNumber:13}},n.createElement(Yn,{rules:qn,onSubmit:this.addRuleToGroup.bind(this,e,r),__source:{fileName:Zn,lineNumber:214,columnNumber:15}}),n.createElement("button",{className:"FormButton setting-rulegroup-remove danger",title:Object(o.a)("Remove Group"),onClick:this.removeGroup.bind(this,e,r),dangerouslySetInnerHTML:{__html:dt.Nd},__source:{fileName:Zn,lineNumber:222,columnNumber:15}})),l))}),i})}UNSAFE_componentWillReceiveProps(e){this.setState({filter:e.filter})}render(){return n.createElement("div",{className:"detail",__source:{fileName:Zn,lineNumber:244,columnNumber:7}},n.createElement("div",{className:"detail-content",__source:{fileName:Zn,lineNumber:245,columnNumber:9}},n.createElement("div",{className:"setting-group",__source:{fileName:Zn,lineNumber:246,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Zn,lineNumber:247,columnNumber:13}},n.createElement(la.a,{type:"text",onChange:this.updateName,label:this.props.searchableStrings.MailFilter,value:this.state.filter.name||"",__source:{fileName:Zn,lineNumber:248,columnNumber:15}}))),n.createElement("div",{className:"setting-group",__source:{fileName:Zn,lineNumber:256,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:Zn,lineNumber:257,columnNumber:13}},n.createElement(la.a,{type:"text",onChange:this.updateFilter.bind(this,"query"),label:this.props.searchableStrings["Search (using keywords)"],title:Object(o.a)("Tokenized search through content, recipients, and subject field"),value:this.state.filter.filterValue.query||"",__source:{fileName:Zn,lineNumber:258,columnNumber:15}}))),n.createElement("div",{className:"setting-rules",__source:{fileName:Zn,lineNumber:270,columnNumber:11}},n.createElement("h3",{__source:{fileName:Zn,lineNumber:271,columnNumber:13}},this.props.searchableStrings.Include),this.renderRuleGroups("include"),n.createElement("input",{type:"button",onClick:this.addRuleGroup.bind(this,"include"),value:Object(o.a)("Add Include Group"),__source:{fileName:Zn,lineNumber:273,columnNumber:13}})),n.createElement("div",{className:"setting-rules",__source:{fileName:Zn,lineNumber:280,columnNumber:11}},n.createElement("h3",{__source:{fileName:Zn,lineNumber:281,columnNumber:13}},this.props.searchableStrings.Exclude),this.renderRuleGroups("exclude"),n.createElement("input",{type:"button",onClick:this.addRuleGroup.bind(this,"exclude"),value:Object(o.a)("Add Exclude Group"),__source:{fileName:Zn,lineNumber:283,columnNumber:13}}))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:Zn,lineNumber:290,columnNumber:9}},n.createElement("input",{type:"button",className:"primary",onClick:this.saveFilter,disabled:this.props.filter===this.state.filter,value:Object(o.a)("Update Mail Filter"),__source:{fileName:Zn,lineNumber:291,columnNumber:11}}),n.createElement("input",{type:"button",disabled:this.props.filter===this.state.filter,onClick:()=>{this.setState({filter:this.props.filter})},value:Object(o.a)("Cancel"),__source:{fileName:Zn,lineNumber:298,columnNumber:11}})))}}var ti=ei,ai=a(29),ni=a(49),ii=a(3),si="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailFilterManager.jsx";function ri(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oi=[l.kMailAccounts,l.kMailIsTurnedOff],li={"Filters added in the mail panel will appear here.":Object(o.a)("Filters added in the mail panel will appear here.")};class ci extends i.a.PureComponent{constructor(e){super(e),ri(this,"mailFiltersChanged",e=>{if("filters"!==e.target)return;const t=this.loadMailFilters();this.state.mailFilters.length===t.length&&this.state.mailFilters.every((e,a)=>e===t[a])||this.setState({mailFilters:t})}),ri(this,"loadMailFilters",()=>ni.a.getAll().filter(e=>e.accountId===ii.M&&e.path!==ii.m)),ri(this,"remapMailFilters",e=>e.map((e,t)=>({...e,key:String(t)}))),ri(this,"renderListItem",(e,t)=>i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"item-icon",dangerouslySetInnerHTML:{__html:dt.Ob.small},__source:{fileName:si,lineNumber:96,columnNumber:7}}),i.a.createElement("div",{className:"item-title",__source:{fileName:si,lineNumber:102,columnNumber:7}},e))),ri(this,"renderContent",(e,t)=>i.a.createElement(ti,{searchableStrings:t,filter:this.state.mailFilters[e],__source:{fileName:si,lineNumber:109,columnNumber:5}})),ri(this,"renderCreateListItem",()=>i.a.createElement("div",{className:"item-title",__source:{fileName:si,lineNumber:115,columnNumber:5}},Object(o.a)("New Filter"))),ri(this,"renderCreate",e=>{const t={name:"",accountId:ii.M,path:Math.random().toString(36).substring(2),filterValue:{}};return(i.a.createElement(ti,{searchableStrings:e,filter:t,__source:{fileName:si,lineNumber:127,columnNumber:12}}))}),ri(this,"renderEmpty",e=>i.a.createElement("div",{className:"detail",__source:{fileName:si,lineNumber:133,columnNumber:5}},i.a.createElement("div",{className:"detail-content",__source:{fileName:si,lineNumber:134,columnNumber:7}},i.a.createElement("p",{__source:{fileName:si,lineNumber:135,columnNumber:9}},e["Filters added in the mail panel will appear here."])))),ri(this,"removeAt",e=>{const t=this.state.mailFilters[e];mn.a.removeFilter(t.id)}),this.state={mailFilters:this.loadMailFilters()}}componentDidMount(){ai.a.addChangeListener(this.mailFiltersChanged)}componentWillUnmount(){ai.a.removeChangeListener(this.mailFiltersChanged)}render(){return 0===this.props.prefValues[l.kMailAccounts].length||this.props.prefValues[l.kMailIsTurnedOff]?null:i.a.createElement(Qa.a,{title:Object(o.a)("Mail Filters"),deleteTitle:Object(o.a)("Delete Filter"),addTipString:Object(o.a)("Add Mail Filter"),deleteTipString:Object(o.a)("Delete Mail Filter"),masterLayout:1,items:this.remapMailFilters(this.state.mailFilters),onRemove:this.removeAt,renderListItem:this.renderListItem,renderContent:this.renderContent,contentStrings:Jn,renderCreate:this.renderCreate,renderCreateListItem:this.renderCreateListItem,renderEmpty:this.renderEmpty,emptyStrings:li,filter:this.props.filter,style:{height:500},__source:{fileName:si,lineNumber:151,columnNumber:7}})}}var ui=Object(v.a)(ci,oi),mi="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\mail\\MailSettings.jsx";const di=[l.kCalendarRelativeDates,l.kMailAccounts,l.kMailCheckInterval,l.kMailComposerColors,l.kMailCountersPanelDraftsEnabled,l.kMailCountersPanelSwitcherEnabled,l.kMailCountersPanelTrashEnabled,l.kMailCountersPanelUnseenEnabled,l.kMailCountersStatusButtonEnabled,l.kMailDefaultAccount,l.kMailDeleteInOtherLocations,l.kMailImapLogsOn,l.kMailMarkDeleteInOtherLocations,l.kMailNotifications,l.kMailNotificationsOnSuccessfullySent,l.kMailNotificationsSoundOn,l.kMailPanelActivityIndicatorsEnabled,l.kMailSearchThreading,l.kMailShowUnsubscribed,l.kMailSingleClickTabs,l.kMailSmtpLogsOn,l.kMailViewLayout],hi=r.a.getEventHandler;class pi extends n.Component{constructor(...e){var t,a,i;super(...e),i=e=>e.map((e,t)=>n.createElement("div",{className:"setting-single",key:"default-account-"+t,__source:{fileName:mi,lineNumber:72,columnNumber:7}},n.createElement("label",{__source:{fileName:mi,lineNumber:73,columnNumber:9}},n.createElement("input",{type:"radio",value:e.MAIL_EMAIL,__source:{fileName:mi,lineNumber:74,columnNumber:11}}),n.createElement("span",{__source:{fileName:mi,lineNumber:75,columnNumber:11}},e.MAIL_EMAIL)))),(a="renderMailAccountRadioGroup")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const e=this.props.prefValues[l.kMailAccounts];return(n.createElement(C.a,{categoryTitle:Object(o.a)("Mail Settings"),filter:this.props.filter,__source:{fileName:mi,lineNumber:85,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:86,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:87,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:88,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailImapLogsOn],onChange:hi(l.kMailImapLogsOn),__source:{fileName:mi,lineNumber:89,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:92,columnNumber:15}},Object(o.a)("Turn on IMAP Logs in Console"),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:93,columnNumber:15}},Object(o.a)("Reconnect mail accounts to make this effective. Note that this will degrade performance of the mail client."))))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:99,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:100,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailSmtpLogsOn],onChange:hi(l.kMailSmtpLogsOn),__source:{fileName:mi,lineNumber:101,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:104,columnNumber:15}},Object(o.a)("Turn on SMTP Logs in Console"),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:105,columnNumber:15}},Object(o.a)("Turn this on for debugging problems with sending mail. Will take effect immediately. No need to reconnect.")))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:113,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:114,columnNumber:11}},Object(o.a)("Mail View Layout")),n.createElement(p.a,{name:"mailviewgroup",value:this.props.prefValues[l.kMailViewLayout],onChange:hi(l.kMailViewLayout),__source:{fileName:mi,lineNumber:115,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:118,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:119,columnNumber:15}},n.createElement("input",{type:"radio",value:"horizontal",__source:{fileName:mi,lineNumber:120,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:121,columnNumber:17}},Object(o.a)("mail","Horizontal")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:124,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:125,columnNumber:15}},n.createElement("input",{type:"radio",value:"vertical",__source:{fileName:mi,lineNumber:126,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:127,columnNumber:17}},Object(o.a)("mail","Vertical")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:130,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:131,columnNumber:15}},n.createElement("input",{type:"radio",value:"vertical_wide",__source:{fileName:mi,lineNumber:132,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:133,columnNumber:17}},Object(o.a)("Vertical Wide"))))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:mi,lineNumber:138,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:139,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kCalendarRelativeDates],onChange:hi(l.kCalendarRelativeDates),__source:{fileName:mi,lineNumber:140,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:144,columnNumber:15}},Object(o.a)("Use Relative Dates"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:149,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:150,columnNumber:11}},Object(o.a)("Mail Notifications")),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:151,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:152,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailNotifications],onChange:hi(l.kMailNotifications),__source:{fileName:mi,lineNumber:153,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:157,columnNumber:15}},Object(o.a)("mail","Enabled")))),n.createElement("div",{className:"setting-single pad-left",__source:{fileName:mi,lineNumber:160,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:161,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailNotificationsSoundOn],disabled:!this.props.prefValues[l.kMailNotifications],onChange:hi(l.kMailNotificationsSoundOn),__source:{fileName:mi,lineNumber:162,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:167,columnNumber:15}},Object(o.a)("Play Sound")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:170,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:171,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailNotificationsOnSuccessfullySent],disabled:!this.props.prefValues[l.kMailNotifications],onChange:hi(l.kMailNotificationsOnSuccessfullySent),__source:{fileName:mi,lineNumber:172,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:176,columnNumber:15}},Object(o.a)("Notify on Successfully Sent"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:181,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:182,columnNumber:11}},Object(o.a)("Unseen Messages")),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:183,columnNumber:11}},Object(o.a)("Enables a workflow where you deliberately mark messages as read")),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:187,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:188,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailCountersPanelUnseenEnabled],onChange:hi(l.kMailCountersPanelUnseenEnabled),__source:{fileName:mi,lineNumber:189,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:192,columnNumber:15}},Object(o.a)("Count Unseen Messages"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:198,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:199,columnNumber:11}},Object(o.a)("Mail Counters")),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:200,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:201,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailCountersStatusButtonEnabled],onChange:hi(l.kMailCountersStatusButtonEnabled),__source:{fileName:mi,lineNumber:202,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:205,columnNumber:15}},Object(o.a)("Show on status button")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:209,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:210,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailCountersPanelSwitcherEnabled],onChange:hi(l.kMailCountersPanelSwitcherEnabled),__source:{fileName:mi,lineNumber:211,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:214,columnNumber:15}},Object(o.a)("Show on panel button")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:219,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:220,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailCountersPanelTrashEnabled],onChange:hi(l.kMailCountersPanelTrashEnabled),__source:{fileName:mi,lineNumber:221,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:224,columnNumber:15}},Object(o.a)("Show for trashed messages")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:230,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:231,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailCountersPanelDraftsEnabled],onChange:hi(l.kMailCountersPanelDraftsEnabled),__source:{fileName:mi,lineNumber:232,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:235,columnNumber:15}},Object(o.a)("Show for draft messages"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:243,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:244,columnNumber:11}},Object(o.a)("mail","Panel")),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:245,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:246,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailSingleClickTabs],onChange:hi(l.kMailSingleClickTabs),__source:{fileName:mi,lineNumber:247,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:250,columnNumber:15}},Object(o.a)("Open Mail Tabs with Single Click")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:254,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:255,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailPanelActivityIndicatorsEnabled],onChange:hi(l.kMailPanelActivityIndicatorsEnabled),__source:{fileName:mi,lineNumber:256,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:259,columnNumber:15}},Object(o.a)("Show activity indicators"))),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:263,columnNumber:13}},Object(o.a)("Briefly display status next to folders when updating."))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:267,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:268,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailShowUnsubscribed],onChange:hi(l.kMailShowUnsubscribed),__source:{fileName:mi,lineNumber:269,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:272,columnNumber:15}},Object(o.a)("Show unsubscribed mailboxes"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:278,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:279,columnNumber:11}},Object(o.a)("Message Sorting Order")),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:280,columnNumber:11}},n.createElement("label",{__source:{fileName:mi,lineNumber:281,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailSearchThreading],onChange:hi(l.kMailSearchThreading),__source:{fileName:mi,lineNumber:282,columnNumber:15}}),n.createElement("span",{__source:{fileName:mi,lineNumber:285,columnNumber:15}},Object(o.a)("Threaded"))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:290,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:291,columnNumber:11}},Object(o.a)("Check For New Mail")),n.createElement(p.a,{name:"mailcheckintervalgroup",value:this.props.prefValues[l.kMailCheckInterval],onChange:hi(l.kMailCheckInterval),__source:{fileName:mi,lineNumber:293,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:296,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:297,columnNumber:15}},n.createElement("input",{type:"radio",value:"one_minute",__source:{fileName:mi,lineNumber:298,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:299,columnNumber:17}},Object(o.a)("Every Minute")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:302,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:303,columnNumber:15}},n.createElement("input",{type:"radio",value:"fifteen_minutes",__source:{fileName:mi,lineNumber:304,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:305,columnNumber:17}},Object(o.a)("Every 15 Minutes")))),n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:308,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:309,columnNumber:15}},n.createElement("input",{type:"radio",value:"manual",__source:{fileName:mi,lineNumber:310,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:311,columnNumber:17}},Object(o.a)("mail","Manually")))))),e&&n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:318,columnNumber:11}},n.createElement("h3",{__source:{fileName:mi,lineNumber:319,columnNumber:13}},Object(o.a)("Default Sender in New Messages")),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:320,columnNumber:13}},Object(o.a)("Used as fallback if no account is selected")),n.createElement(p.a,{name:"maildefaultaccountgroup",value:this.props.prefValues[l.kMailDefaultAccount]||ii.I,onChange:hi(l.kMailDefaultAccount),__source:{fileName:mi,lineNumber:323,columnNumber:13}},this.renderMailAccountRadioGroup(e),n.createElement("div",{className:"setting-single",key:"default-account-mru",__source:{fileName:mi,lineNumber:327,columnNumber:15}},n.createElement("label",{__source:{fileName:mi,lineNumber:328,columnNumber:17}},n.createElement("input",{type:"radio",value:ii.I,__source:{fileName:mi,lineNumber:329,columnNumber:19}}),n.createElement("span",{__source:{fileName:mi,lineNumber:330,columnNumber:19}},Object(o.a)("Most Recently Used")))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:337,columnNumber:9}},n.createElement("h3",{__source:{fileName:mi,lineNumber:338,columnNumber:11}},Object(o.a)("Composer Colors")),n.createElement("p",{className:"info",__source:{fileName:mi,lineNumber:339,columnNumber:11}},Object(o.a)("Doesn't affect the color of sent messages")),n.createElement(p.a,{name:"mailcomposercolors",value:this.props.prefValues[l.kMailComposerColors],onChange:hi(l.kMailComposerColors),__source:{fileName:mi,lineNumber:342,columnNumber:11}},n.createElement("div",{className:"setting-single",key:"composer-background-white",__source:{fileName:mi,lineNumber:345,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:346,columnNumber:15}},n.createElement("input",{type:"radio",value:"black_on_white",__source:{fileName:mi,lineNumber:347,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:348,columnNumber:17}},Object(o.a)("Black on White")))),n.createElement("div",{className:"setting-single",key:"composer-background-theme",__source:{fileName:mi,lineNumber:351,columnNumber:13}},n.createElement("label",{__source:{fileName:mi,lineNumber:352,columnNumber:15}},n.createElement("input",{type:"radio",value:"inherit_themes",__source:{fileName:mi,lineNumber:353,columnNumber:17}}),n.createElement("span",{__source:{fileName:mi,lineNumber:354,columnNumber:17}},Object(o.a)("Inherit Theme Colors")))))),n.createElement("div",{className:"setting-group",__source:{fileName:mi,lineNumber:360,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:mi,lineNumber:361,columnNumber:11}},n.createElement("h3",{__source:{fileName:mi,lineNumber:362,columnNumber:13}},Object(o.a)("Delete Duplicate Messages")),n.createElement("select",{value:this.props.prefValues[l.kMailMarkDeleteInOtherLocations],onChange:hi(l.kMailMarkDeleteInOtherLocations),__source:{fileName:mi,lineNumber:363,columnNumber:13}},n.createElement("option",{value:"ask",__source:{fileName:mi,lineNumber:366,columnNumber:15}},Object(o.a)("Ask")),n.createElement("option",{value:"folders",__source:{fileName:mi,lineNumber:367,columnNumber:15}},Object(o.a)("From All Folders on Current Account")),n.createElement("option",{value:"accounts",__source:{fileName:mi,lineNumber:368,columnNumber:15}},Object(o.a)("From All Accounts and Folders")))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:mi,lineNumber:371,columnNumber:11}},n.createElement("h3",{__source:{fileName:mi,lineNumber:372,columnNumber:13}},Object(o.a)("Permanently Delete Duplicate Messages")),n.createElement("select",{value:this.props.prefValues[l.kMailDeleteInOtherLocations],onChange:hi(l.kMailDeleteInOtherLocations),__source:{fileName:mi,lineNumber:373,columnNumber:13}},n.createElement("option",{value:"ask",__source:{fileName:mi,lineNumber:376,columnNumber:15}},Object(o.a)("Ask")),n.createElement("option",{value:"selected",__source:{fileName:mi,lineNumber:377,columnNumber:15}},Object(o.a)("From the Current Folder Only")),n.createElement("option",{value:"folders",__source:{fileName:mi,lineNumber:378,columnNumber:15}},Object(o.a)("From All Folders on Current Account")),n.createElement("option",{value:"accounts",__source:{fileName:mi,lineNumber:379,columnNumber:15}},Object(o.a)("From All Accounts and Folders")))))))}}var bi=Object(v.a)(pi,di),gi=a(156),Ni="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListIgnoredLists.jsx";function fi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _i extends i.a.PureComponent{constructor(...e){super(...e),fi(this,"state",{ignoredMailingLists:gi.a.getIgnored()}),fi(this,"mailingListsChanged",e=>{if("mailingLists"===e.target){const e=gi.a.getIgnored();if(this.state.ignoredMailingLists.length===e.length&&this.state.ignoredMailingLists.every((t,a)=>t===e[a]))return;this.setState({ignoredMailingLists:e})}}),fi(this,"remap",e=>e.map((e,t)=>({name:e.listId,key:String(t)}))),fi(this,"renderListItem",(e,t)=>i.a.createElement("span",{title:t.listId,__source:{fileName:Ni,lineNumber:56,columnNumber:12}},e)),fi(this,"onRemove",e=>{mn.a.removeIgnoredMailingList(this.state.ignoredMailingLists[e])}),fi(this,"onChangeIgnoreAll",e=>{const{value:t}=e.target,a="true"===t,n=gi.a.get(ii.H);n&&n.isIgnored!==a&&(n.isIgnored=!n.isIgnored,mn.a.updateMailingListGroup(n))})}componentDidMount(){ai.a.addChangeListener(this.mailingListsChanged)}componentWillUnmount(){ai.a.removeChangeListener(this.mailingListsChanged)}render(){return i.a.createElement("div",{className:"detail",__source:{fileName:Ni,lineNumber:75,columnNumber:7}},i.a.createElement("div",{className:"detail-content",__source:{fileName:Ni,lineNumber:76,columnNumber:9}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ni,lineNumber:77,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Ni,lineNumber:78,columnNumber:13}},Object(o.a)("Uncategorized mailing lists")),i.a.createElement("p",{className:"info",__source:{fileName:Ni,lineNumber:79,columnNumber:13}},Object(o.a)("Manage the rest of the mailing lists that have been automatically generated using the list-id attribute"))),i.a.createElement(p.a,{name:"subFolderType",value:gi.a.areUncategorizedMailingListsIgnored(),onChange:this.onChangeIgnoreAll,className:"setting-group unlimited",__source:{fileName:Ni,lineNumber:81,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ni,lineNumber:87,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ni,lineNumber:88,columnNumber:15}},i.a.createElement("input",{type:"radio",value:!0,__source:{fileName:Ni,lineNumber:89,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Ni,lineNumber:90,columnNumber:17}},Object(o.a)("mailinglist subfolder","Ignore All")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ni,lineNumber:93,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ni,lineNumber:94,columnNumber:15}},i.a.createElement("input",{type:"radio",value:!1,__source:{fileName:Ni,lineNumber:95,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Ni,lineNumber:96,columnNumber:17}},Object(o.a)("Ignore Selected"))))),i.a.createElement("div",{className:"setting-single master-detail sortable-list",__source:{fileName:Ni,lineNumber:100,columnNumber:11}},i.a.createElement(rt.a,{items:this.remap(this.state.ignoredMailingLists),renderListItem:this.renderListItem,filter:this.props.filter,deleteTipString:Object(o.a)("Stop ignoring uncategorized mailing list"),supportDragAndDrop:!1,onRemove:this.onRemove,__source:{fileName:Ni,lineNumber:101,columnNumber:13}}))))}}var vi=_i,Ei="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListManagerEditor.jsx";function Ci(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const wi={MailFilter:Object(o.a)("MailFilter","Name"),Sender:Object(o.a)("Sender"),"List-Id":Object(o.a)("List-Id")};class Oi extends i.a.Component{constructor(...e){super(...e),Ci(this,"state",{mailingList:this.props.mailingList,updating:!1}),Ci(this,"updateListId",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({mailingList:e})=>{e.listId===e.name&&(e.name=t),e.listId=t}))}),Ci(this,"updateName",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({mailingList:e})=>{e.name=t}))}),Ci(this,"onlyPathChanged",()=>Object.keys(this.state.mailingList).every(e=>"name"===e?this.state.mailingList[e]!==this.props.mailingList[e]:this.state.mailingList[e]===this.props.mailingList[e])),Ci(this,"saveMailingList",async()=>{this.setState({updating:!0}),this.onlyPathChanged()?await mn.a.updateMailingListGroupName(this.state.mailingList):await mn.a.updateMailingListGroup(this.state.mailingList)}),Ci(this,"hasChanged",()=>this.state.mailingList!==this.props.mailingList),Ci(this,"isIgnoredChanged",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({mailingList:e})=>{e.isIgnored="true"===t}))}),Ci(this,"onChangeSubfolderType",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({mailingList:e})=>{e.subFolderType=t}))}),Ci(this,"onChangeParentFolder",e=>{const t=e.target.value;this.setState(Object(Xn.c)(({mailingList:e})=>{e.parentFolderType=t}))}),Ci(this,"cancel",()=>{this.setState({mailingList:this.props.mailingList})})}UNSAFE_componentWillReceiveProps(e){e.mailingList!==this.props.mailingList&&this.setState(Object(Xn.c)(t=>{t.mailingList=e.mailingList,t.updating=!1}))}render(){const e=this.state.mailingList;return(i.a.createElement("form",{className:"detail",style:{overflowY:"scroll"},__source:{fileName:Ei,lineNumber:114,columnNumber:7}},i.a.createElement("div",{className:"detail-content",__source:{fileName:Ei,lineNumber:115,columnNumber:9}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ei,lineNumber:116,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Ei,lineNumber:117,columnNumber:13}},Object(o.a)("Mailing list group")),i.a.createElement("p",{className:"info",__source:{fileName:Ei,lineNumber:118,columnNumber:13}},Object(o.a)("Group your autogenerated mailing lists. When a match is found, the whole list-id is used to group messages."))),i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ei,lineNumber:124,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ei,lineNumber:125,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ei,lineNumber:126,columnNumber:15}},this.props.searchableStrings["List-Id"],i.a.createElement("select",{name:"parentFolderType",value:e.parentFolderType,onChange:this.onChangeParentFolder,__source:{fileName:Ei,lineNumber:128,columnNumber:17}},i.a.createElement("option",{value:"endsWith",__source:{fileName:Ei,lineNumber:133,columnNumber:19}},Object(o.a)("Ends with")),i.a.createElement("option",{value:"startsWith",__source:{fileName:Ei,lineNumber:134,columnNumber:19}},Object(o.a)("Starts with"))),i.a.createElement("input",{type:"text",onChange:this.updateListId,value:e.listId,disabled:!this.props.isCreating,__source:{fileName:Ei,lineNumber:136,columnNumber:17}}))),i.a.createElement(p.a,{name:"mailcheckintervalgroup",value:e.isIgnored,onChange:this.isIgnoredChanged,className:"setting-single",__source:{fileName:Ei,lineNumber:144,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ei,lineNumber:149,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Ei,lineNumber:150,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"true",__source:{fileName:Ei,lineNumber:151,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Ei,lineNumber:152,columnNumber:19}},Object(o.a)("Not a mailing list")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ei,lineNumber:155,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Ei,lineNumber:156,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"false",__source:{fileName:Ei,lineNumber:157,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Ei,lineNumber:158,columnNumber:19}},Object(o.a)("A mailing list"))))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ei,lineNumber:162,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ei,lineNumber:163,columnNumber:15}},i.a.createElement("span",{__source:{fileName:Ei,lineNumber:164,columnNumber:17}},Object(o.a)("Folder name:")),i.a.createElement("input",{type:"text",onChange:this.updateName,disabled:e.isIgnored,value:e.name,__source:{fileName:Ei,lineNumber:165,columnNumber:17}}))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ei,lineNumber:173,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ei,lineNumber:174,columnNumber:15}},i.a.createElement("span",{__source:{fileName:Ei,lineNumber:175,columnNumber:17}},Object(o.a)("Subfolder grouping:")),i.a.createElement("select",{disabled:e.isIgnored,name:"subFolderType",value:e.subFolderType,onChange:this.onChangeSubfolderType,__source:{fileName:Ei,lineNumber:176,columnNumber:17}},i.a.createElement("option",{value:"none",__source:{fileName:Ei,lineNumber:182,columnNumber:19}},Object(o.a)("mailinglist subfolder","None")),i.a.createElement("option",{value:"host",__source:{fileName:Ei,lineNumber:183,columnNumber:19}},Object(o.a)("Host")),i.a.createElement("option",{value:"title",__source:{fileName:Ei,lineNumber:184,columnNumber:19}},Object(o.a)("Title")),i.a.createElement("option",{value:"senderName",__source:{fileName:Ei,lineNumber:185,columnNumber:19}},Object(o.a)("Sender Name"))))),this.state.updating&&i.a.createElement(xa.a,{type:"info",__source:{fileName:Ei,lineNumber:191,columnNumber:15}},Object(o.a)("Updating")))),i.a.createElement("div",{className:"detail-toolbar",__source:{fileName:Ei,lineNumber:195,columnNumber:9}},!this.props.isCreating&&i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:"submit",className:"primary",disabled:!this.hasChanged()||this.state.updating,onClick:this.saveMailingList,value:Object(o.a)("Update Mailing List Group"),__source:{fileName:Ei,lineNumber:198,columnNumber:15}}),i.a.createElement("input",{type:"button",disabled:!this.hasChanged(),onClick:this.cancel,value:Object(o.a)("Cancel"),__source:{fileName:Ei,lineNumber:205,columnNumber:15}})),this.props.isCreating&&i.a.createElement("input",{type:"submit",className:"primary",disabled:this.props.mailingList===this.state.mailingList||this.state.updating,onClick:this.saveMailingList,value:Object(o.a)("Add Mailing List Group"),__source:{fileName:Ei,lineNumber:214,columnNumber:13}}))))}}var yi=Oi,Si="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailingListManager.jsx";function Ti(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ki=[l.kMailAccounts,l.kMailIsTurnedOff],Ai={"Mailing lists added in the mail panel will appear here.":Object(o.a)("Mailing lists added in the mail panel will appear here.")};class Ii extends i.a.PureComponent{constructor(e){super(e),Ti(this,"mailingListGroupsChanged",e=>{if("mailingLists"===e.target){const e=this.getMailingLists();if(this.state.mailingListGroups.length===e.length&&this.state.mailingListGroups.every((t,a)=>t===e[a]))return;this.setState({mailingListGroups:e})}}),Ti(this,"getMailingLists",()=>gi.a.getGroups()),Ti(this,"remapMailingListGroups",e=>{const t=[...e];return t.push({name:"Uncategorized mailing lists",isDefault:!0}),t.map((e,t)=>{let a=e.name;return e.listId&&a!==e.listId&&(a+=" ("+e.listId+")"),{...e,name:a,key:String(t)}})}),Ti(this,"getFavicon",e=>{if(e){const t=e.split("@");if(t&&2===t.length){const e=t[1].split(".");if(e&&e[1]&&e[1].length>1)return i.a.createElement(At.a,{key:0,className:"item-icon",url:`${t[1]}`,__source:{fileName:Si,lineNumber:98,columnNumber:13}})}}return(i.a.createElement("svg",{className:"item-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",key:0,__source:{fileName:Si,lineNumber:108,columnNumber:7}},i.a.createElement("path",{opacity:".35",d:"M0 3h8v1H0zM0 5h3v1H0zM0 7h3v1H0z",__source:{fileName:Si,lineNumber:113,columnNumber:9}}),i.a.createElement("path",{d:"M15 5H5a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zm-1 4l-4 2-4-2V7l4 2 4-2z",__source:{fileName:Si,lineNumber:114,columnNumber:9}})))}),Ti(this,"renderListItem",(e,t)=>i.a.createElement(i.a.Fragment,null,"matches"!==t.parentFolderType&&this.getFavicon(t.listId),i.a.createElement("div",{className:"item-title",__source:{fileName:Si,lineNumber:124,columnNumber:7}},e))),Ti(this,"renderContent",(e,t)=>this.state.mailingListGroups.length===e?i.a.createElement(vi,{filter:this.props.filter,__source:{fileName:Si,lineNumber:132,columnNumber:14}}):i.a.createElement(yi,{searchableStrings:t,mailingList:this.state.mailingListGroups[e],__source:{fileName:Si,lineNumber:136,columnNumber:14}})),Ti(this,"renderEmpty",e=>i.a.createElement("div",{className:"detail",__source:{fileName:Si,lineNumber:143,columnNumber:5}},i.a.createElement("div",{className:"detail-content",__source:{fileName:Si,lineNumber:144,columnNumber:7}},i.a.createElement("p",{__source:{fileName:Si,lineNumber:145,columnNumber:9}},e["Mailing lists added in the mail panel will appear here."])))),Ti(this,"renderCreateListItem",()=>i.a.createElement("div",{className:"item-title",__source:{fileName:Si,lineNumber:151,columnNumber:5}},Object(o.a)("New Mailing List Group"))),Ti(this,"renderCreate",e=>i.a.createElement(yi,{isCreating:!0,searchableStrings:e,mailingList:{name:"",isIgnored:!1,subFolderType:"host",parentFolderType:"endsWith",listId:""},__source:{fileName:Si,lineNumber:162,columnNumber:12}})),Ti(this,"removeAt",e=>{this.setState(t=>{const a=[...t.mailingListGroups],[n]=a.splice(e,1);return mn.a.removeMailingListGroup(n),{mailingListGroups:a}})}),this.state={mailingListGroups:this.getMailingLists()}}componentDidMount(){ai.a.addChangeListener(this.mailingListGroupsChanged)}componentWillUnmount(){ai.a.removeChangeListener(this.mailingListGroupsChanged)}render(){if(0===this.props.prefValues[l.kMailAccounts].length||this.props.prefValues[l.kMailIsTurnedOff])return null;const e=this.remapMailingListGroups(this.state.mailingListGroups);return(i.a.createElement(Qa.a,{key:e.length,title:Object(o.a)("Mailing Lists"),className:"setting-mailing-lists",deleteTitle:Object(o.a)("Delete List"),addTipString:Object(o.a)("Add Mailing List"),deleteTipString:Object(o.a)("Delete Mailing List"),items:e,onRemove:this.removeAt,masterLayout:1,renderListItem:this.renderListItem,renderContent:this.renderContent,contentStrings:wi,renderCreate:this.renderCreate,renderCreateListItem:this.renderCreateListItem,renderEmpty:this.renderEmpty,emptyStrings:Ai,filter:this.props.filter,style:{height:400},__source:{fileName:Si,lineNumber:185,columnNumber:7}}))}}var Di=Object(v.a)(Ii,ki),Mi=a(626),Pi=a(91),xi=a(185),Li=a(126),ji=a(147),Ri=a(188),Bi="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\CommandList.jsx";function Fi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ui extends i.a.Component{constructor(e){super(e),Fi(this,"refTreeList",i.a.createRef()),Fi(this,"_searchKey",""),Fi(this,"_appendToSearch",!1),Fi(this,"_onCommandStoreChanged",e=>{if("menu"===e){const e=this.state.searchFilter;this.setState(this._getStateWithSearchFilter(e))}}),Fi(this,"_getStateWithSearchFilter",e=>{const t=e=>e.sort((e,t)=>{if("container"===e.type&&"container"===t.type){const a=e.settingsLabel||"",n=t.settingsLabel||"";return a<n?-1:a>n?1:0}return"container"===e.type&&"container"!==t.type?"separator"===t.type?1:-1:"container"!==e.type&&"container"===t.type?"separator"===e.type?-1:1:"separator"===e.type?-1:"separator"===t.type?-1:e.label<t.label?-1:e.label>t.label?1:0}),a=(e,t)=>({parentId:e,id:t.id,type:t.type,label:t.settingsLabel||t.label,action:"",shortcuts:t.shortcuts}),n=e=>t(at.default.makeCommandList().filter(t=>-1!==(t.settingsLabel||t.label||"").toLowerCase().indexOf(e))),i=e=>{const a=at.default.getChainCommandsShortcuts();return t(Xe.a.get(l.kChainedCommandsCommandList).map(e=>{const t=a.find(t=>t.name===e.name);return{type:"command",action:e.name,id:e.name,...it.a.makeLabelPair(e.label),shortcuts:null==t?void 0:t.shortcuts}}).filter(t=>-1!==(t.label||"").toLowerCase().indexOf(e)))},s=(e,s)=>{const r=((e,a)=>t(Pi.a.makeCommandList(e).filter(e=>{const t=e.settingsLabel||e.label;return void 0===t?(console.warn("Action ignored for command list",e.action),!1):-1!==t.toLowerCase().indexOf(a)})))(e,s).map(e=>a("chainfolder",e)),l=n(s).map(e=>a("appfolder",e)),c=i(s).map(e=>a("chainfolder",e));return[{id:"contextfolder",parentId:"",label:Object(o.a)("Context Commands"),action:"",type:"folder",children:r},{id:"appfolder",parentId:"",label:Object(o.a)("Application Commands"),action:"",type:"folder",children:l},{id:"chainfolder",parentId:"",label:Object(o.a)("Command Chains"),action:"",type:"folder",children:c}]};let r=[];if(!Pi.a.isSection(this.props.menu)){const t=e.toLowerCase();r=Pi.a.getKeys().includes(this.props.menu)?s(this.props.menu,t):(e=>{const t=n(e).map(e=>a("appfolder",e)),s=i(e).map(e=>a("chainfolder",e));return[{id:"appfolder",parentId:"",label:Object(o.a)("Application Commands"),action:"",type:"folder",children:t},{id:"chainfolder",parentId:"",label:Object(o.a)("Command Chains"),action:"",type:"folder",children:s}]})(t);const l={parentId:"",id:"separator",type:"separator",action:"",label:""};r.splice(0,0,l);const c=at.default.makeCommandList(at.default.getOpenLinkName());if(c&&1===c.length){const e={parentId:"",id:c[0].id,type:c[0].type,action:"",label:c[0].label};r.splice(0,0,e)}}return{searchFilter:e,commandItems:r}}),Fi(this,"_hasChildren",e=>{var t;return Boolean(null===(t=e.children)||void 0===t?void 0:t.length)}),Fi(this,"_isFolder",e=>Boolean(e.children)),Fi(this,"_isSeparator",e=>"separator"===e.type),Fi(this,"_isValidDragSource",e=>!this._isFolder(e)),Fi(this,"_validateForDrag",e=>e),Fi(this,"_getDragData",(e,t)=>""),Fi(this,"_getNodeById",e=>{const t=a=>{if(a)for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(this.state.commandItems)}),Fi(this,"_getMimeData",e=>{let t="";const a=[];return e.forEach(e=>{const n=this._getNodeById(e);if(n){t="folder"===n.type?""===t||t===ji.c?ji.c:ji.e:""===t||t===ji.d?ji.d:ji.e;const e={id:"",type:n.type,action:n.id};"folder"===n.type&&(e.title=n.label);const i=at.default.getCommandParameter(e.action);if(i&&(e.parameter=i),at.default.getOpenLinkName()===e.action){const t=at.default.getCommandLabel(e.action);t&&(e.title=t)}const s={menu:"contextfolder"===n.parentId?this.props.menu:"",node:e};a.push(s)}}),{mimeType:t,payload:JSON.stringify(a)}}),Fi(this,"_setDragData",(e,t)=>{const a=this._getMimeData(t);e.setData(a.mimeType,a.payload)}),Fi(this,"_copy",(e,t)=>{const a=e.clipboardData;if(a){const e=this._getMimeData(t);a.setData(e.mimeType,e.payload)}Object(Li.a)(e)}),Fi(this,"_onKeyDown",e=>{const t=(e,t)=>{for(let a=t;a<this.state.commandItems.length;a++){const t=this.state.commandItems[a];if(t.label&&t.label.toUpperCase().startsWith(e))return t}};switch(e.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:if(Object(Ri.c)(e)){var a;const i=null===(a=this.refTreeList.current)||void 0===a?void 0:a.getSelectedItem(),s=this._searchKey.length;let r;if("ArrowLeft"===e.key||"ArrowRight"===e.key){if(0===s)break;r=i?i.treeIndex+1:0}else if(this._appendToSearch&&!1===e.repeat){const t=e.key.toUpperCase();1===s&&this._searchKey[0]===t?r=i?i.treeIndex+1:0:(this._searchKey+=t,r=i?i.treeIndex:0)}else this._searchKey=e.key.toUpperCase(),r=i?i.treeIndex+1:0;let o=t(this._searchKey,r);var n;if(o||0===r||(o=t(this._searchKey,0)),o)null===(n=this.refTreeList.current)||void 0===n||n.selectByNode(o),e.preventDefault();clearTimeout(this._timeout),this._appendToSearch=!0,this._timeout=setTimeout(()=>{this._appendToSearch=!1},400)}}}),Fi(this,"_onSearchFilterChange",e=>{this.setState(this._getStateWithSearchFilter(e.target.value))}),Fi(this,"_handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),Fi(this,"_getContextMenuItems",e=>e?[{testVisibility:()=>this._isValidForClipboard(e)&&this.props.canAddToTree(),handler:()=>{const t=this._getMimeData([e.id]);this.props.addToTree(t.mimeType,t.payload)},...Object(lt.a)("Add to Content")}]:[]),Fi(this,"_getContextMenuItemProps",e=>({showCopy:this._isValidForClipboard(e)})),Fi(this,"_isValidForClipboard",e=>!this._isFolder(e)),Fi(this,"rowComponent",e=>{var t;const a=e.node,n=16*a.level+"px",s=16*(a.level+1)+"px";if(this._isSeparator(a))return i.a.createElement("label",{key:"0",style:{marginLeft:s},__source:{fileName:Bi,lineNumber:504,columnNumber:9}},i.a.createElement("hr",{className:"separator-left",__source:{fileName:Bi,lineNumber:505,columnNumber:11}}),Object(o.a)("Menu Separator"),i.a.createElement("hr",{className:"separator-right",__source:{fileName:Bi,lineNumber:507,columnNumber:11}}));let r=a.label;a.ellipsis&&(r+=it.a.ellipsisString()),"container"===a.type&&a.settingsLabel&&(r=a.settingsLabel);const c=this._isFolder(a)&&this._hasChildren(a);let u=Xe.a.get(l.kKeyboardShortcutsEnable);return(null===(t=a.shortcuts)||void 0===t?void 0:t.length)>0&&1===a.shortcuts[0].length&&u&&(u=it.a.isMailCommand(a)?Xe.a.get(l.kKeyboardShortcutsEnableSingleKeyForMail):Xe.a.get(l.kKeyboardShortcutsEnableSingleKey)),i.a.createElement("label",{key:"0",__source:{fileName:Bi,lineNumber:534,columnNumber:7}},c&&i.a.createElement("span",{className:"expand-icon",style:{marginLeft:n},onMouseDown:Li.a,onMouseUp:()=>this._handleExpandClick(a.id),dangerouslySetInnerHTML:{__html:dt.rb},__source:{fileName:Bi,lineNumber:536,columnNumber:11}}),i.a.createElement("span",{className:"title",style:c?null:{marginLeft:s},__source:{fileName:Bi,lineNumber:543,columnNumber:9}},r),a.shortcuts&&a.shortcuts.length>0&&i.a.createElement("span",{className:"item-count",__source:{fileName:Bi,lineNumber:549,columnNumber:11}},Object(ji.a)(a.shortcuts[0])))}),this.state=this._getStateWithSearchFilter("")}componentDidMount(){var e;this.state.commandItems.length>0&&(null===(e=this.refTreeList.current)||void 0===e||e.selectByNode(this.state.commandItems[0]));at.default.addChangeListener(this._onCommandStoreChanged)}componentWillUnmount(){clearTimeout(this._timeout),at.default.removeChangeListener(this._onCommandStoreChanged)}componentDidUpdate(e,t){if(this.props.menu!==e.menu){const e=this.state.searchFilter;this.setState(this._getStateWithSearchFilter(e))}}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(xi.a,{ref:this.refTreeList,rowComponent:this.rowComponent,nodes:this.state.commandItems,enableDragAndDrop:!0,validateForDrag:this._validateForDrag,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,hasChildren:this._hasChildren,isFolder:this._isFolder,isValidForClipboard:this._isValidForClipboard,onCopy:this._copy,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,onKeyDown:this._onKeyDown,__source:{fileName:Bi,lineNumber:560,columnNumber:9}}),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bi,lineNumber:577,columnNumber:9}},i.a.createElement("input",{type:"search",className:"menu-search",value:this.state.searchFilter,placeholder:Object(o.a)("Filter Commands"),onChange:this._onSearchFilterChange,__source:{fileName:Bi,lineNumber:578,columnNumber:11}})))}}var Hi=Ui,Vi=a(1308),Wi="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\Menu.jsx";function zi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gi=[l.kMenuDisplay];class Ki extends i.a.Component{constructor(e){super(e),zi(this,"_onMenuChange",e=>{this.setState({menu:e.target.value})}),zi(this,"_handleResetMenu",()=>{L.a.menuContent.reset(this.state.menu,void 0,()=>{}),this.closeConfirmation()}),zi(this,"_canAddToTree",()=>!!this.refs.menuTree.getSelectedItem()),zi(this,"_addToTree",(e,t)=>{const a=this.refs.menuTree.getSelectedItem();a&&this.refs.menuTree.addToNode(a,t,!0)}),zi(this,"confirmReset",()=>this.setState({confirmation:!0})),zi(this,"closeConfirmation",()=>this.setState({confirmation:!1})),zi(this,"getMenuName",e=>{if(e||(e=this.state.menu),Pi.a.hasName(e))return Pi.a.getName(e);switch(e){case"vivaldi":return Object(o.a)("Vivaldi Button Menu");case"menubar":return Object(o.a)("Horizontal Menu");case"mac":return Object(o.a)("Application Menu");default:return e}}),zi(this,"renderModal",()=>{const e=this.getMenuName();return(i.a.createElement(st.a,{dialogWidth:400,onRequestClose:this.closeConfirmation,viewMode:"anchor slide",__source:{fileName:Wi,lineNumber:91,columnNumber:7}},i.a.createElement("header",{className:"dialog-header",__source:{fileName:Wi,lineNumber:95,columnNumber:9}},i.a.createElement("h1",{className:"dialog-title",__source:{fileName:Wi,lineNumber:96,columnNumber:11}},Object(o.a)("Reset $1?",[e]))),i.a.createElement("div",{className:"dialog-content",__source:{fileName:Wi,lineNumber:100,columnNumber:9}},i.a.createElement("p",{__source:{fileName:Wi,lineNumber:101,columnNumber:11}},Object(o.a)("$1 will be reset to its default state.",[e]))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Wi,lineNumber:105,columnNumber:9}},i.a.createElement("input",{type:"button",className:"primary",onClick:this._handleResetMenu,value:Object(o.a)("Reset to Default"),autoFocus:!0,__source:{fileName:Wi,lineNumber:106,columnNumber:11}}),i.a.createElement("input",{type:"button",onClick:this.closeConfirmation,value:Object(o.a)("Cancel"),__source:{fileName:Wi,lineNumber:111,columnNumber:11}}))))}),zi(this,"_getOptionItems",()=>[...["vivaldi","menubar"].map(e=>({key:e,indent:1,name:this.getMenuName(e)})),...Pi.a.getSettingsList()]);const t="top"===this.props.prefValues[l.kMenuDisplay]?"menubar":"vivaldi";this.state={menu:t,confirmation:!1}}render(){const e=this._getOptionItems().map(e=>0===e.indent?i.a.createElement("optgroup",{key:e.key,label:e.name,__source:{fileName:Wi,lineNumber:134,columnNumber:16}}):i.a.createElement("option",{key:e.key,value:e.key,__source:{fileName:Wi,lineNumber:136,columnNumber:16}}," ".repeat(2*e.indent),e.name));return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Wi,lineNumber:144,columnNumber:7}},this.state.confirmation&&this.renderModal(),i.a.createElement("div",{className:"setting-single",__source:{fileName:Wi,lineNumber:148,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Wi,lineNumber:149,columnNumber:11}},Object(o.a)("Menu Customization")),i.a.createElement("select",{className:"menu-list",value:this.state.menu,onChange:this._onMenuChange,__source:{fileName:Wi,lineNumber:150,columnNumber:11}},e)),i.a.createElement("div",{className:"menu-lists",__source:{fileName:Wi,lineNumber:158,columnNumber:9}},i.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:Wi,lineNumber:159,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Wi,lineNumber:160,columnNumber:13}},Object(o.a)("Content"))),i.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:Wi,lineNumber:162,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Wi,lineNumber:163,columnNumber:13}},Object(o.a)("Commands"))),i.a.createElement("div",{className:"setting-single menu-items",__source:{fileName:Wi,lineNumber:165,columnNumber:11}},i.a.createElement(Vi.a,{ref:"menuTree",menu:this.state.menu,confirmReset:this.confirmReset,filter:this.props.filter,__source:{fileName:Wi,lineNumber:166,columnNumber:13}})),i.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:Wi,lineNumber:173,columnNumber:11}},i.a.createElement(Hi,{canAddToTree:this._canAddToTree,addToTree:this._addToTree,menu:this.state.menu,filter:this.props.filter,__source:{fileName:Wi,lineNumber:174,columnNumber:13}})))))}}var Yi=Object(v.a)(Ki,Gi),$i="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\MenuType.jsx";const Xi=[l.kMenuDisplay,l.kMenuIconType],Zi=r.a.getEventHandler;class Qi extends i.a.PureComponent{render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Menu"),filter:this.props.filter,__source:{fileName:$i,lineNumber:29,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:$i,lineNumber:31,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:$i,lineNumber:32,columnNumber:13}},Object(o.a)("title","Menu Position")),i.a.createElement(p.a,{name:"menuPosition",value:this.props.prefValues[l.kMenuDisplay],onChange:Zi(l.kMenuDisplay),className:"group",__source:{fileName:$i,lineNumber:33,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:37,columnNumber:15}},i.a.createElement("label",{__source:{fileName:$i,lineNumber:38,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"vivaldi",__source:{fileName:$i,lineNumber:39,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:$i,lineNumber:40,columnNumber:19}},Object(o.a)("menu","Vivaldi Button")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:43,columnNumber:15}},i.a.createElement("label",{__source:{fileName:$i,lineNumber:44,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"top",__source:{fileName:$i,lineNumber:45,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:$i,lineNumber:46,columnNumber:19}},Object(o.a)("menu","Horizontal")))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:$i,lineNumber:53,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:$i,lineNumber:54,columnNumber:13}},Object(o.a)("Menu Icon Style")),i.a.createElement(p.a,{name:"menuStyle",value:this.props.prefValues[l.kMenuIconType],onChange:Zi(l.kMenuIconType),className:"group",__source:{fileName:$i,lineNumber:55,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:59,columnNumber:15}},i.a.createElement("label",{__source:{fileName:$i,lineNumber:60,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"icon",__source:{fileName:$i,lineNumber:61,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:$i,lineNumber:62,columnNumber:19}},Object(o.a)("Vivaldi Icon")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:65,columnNumber:15}},i.a.createElement("label",{__source:{fileName:$i,lineNumber:66,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"burger",__source:{fileName:$i,lineNumber:67,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:$i,lineNumber:68,columnNumber:19}},Object(o.a)("Menu Icon")))))),i.a.createElement(Yi,{filter:this.props.filter,__source:{fileName:$i,lineNumber:74,columnNumber:9}}))}}var qi=Object(v.a)(Qi,Xi),Ji=a(1309),es="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\network\\NetworkSettings.jsx";class ts extends n.Component{constructor(...e){var t,a,n;super(...e),n=()=>{L.a.utilities.launchNetworkSettings(e=>{})},(a="onClick")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("Network"),filter:this.props.filter,__source:{fileName:es,lineNumber:18,columnNumber:9}},n.createElement("div",{className:"setting-group",__source:{fileName:es,lineNumber:19,columnNumber:11}},n.createElement("h3",{__source:{fileName:es,lineNumber:20,columnNumber:13}},Object(o.a)("Proxies")),n.createElement("div",{className:"setting-single",__source:{fileName:es,lineNumber:22,columnNumber:13}},n.createElement("label",{__source:{fileName:es,lineNumber:23,columnNumber:15}},n.createElement("input",{type:"button",value:Object(o.a)("Proxy Settings"),onClick:this.onClick,__source:{fileName:es,lineNumber:24,columnNumber:17}})))))}}var as=ts,ns="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\panel\\Panel.jsx";const is=[l.kMailContactDefaultAction,l.kMailSingleClickTabs,l.kNotesCreationAddScreenshot,l.kNotesCreationNotify,l.kNotesCreationShowPanel,l.kPanelsAsOverlayAutoClose,l.kPanelsLazyLoad,l.kPanelsAsOverlayEnabled,l.kPanelsPosition,l.kPanelsShowFolderBadge,l.kPanelsShowToggle,l.kPanelsWindowDragToStack,l.kPanelsWindowShowPinnedGroup,l.kPanelsWindowSingleClickOpens,l.kPanelsWindowShowUnread,l.kTabsCounterDetection],ss=r.a.getEventHandler;class rs extends n.Component{render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("Panels"),filter:this.props.filter,__source:{fileName:ns,lineNumber:56,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:57,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:58,columnNumber:11}},Object(o.a)("Panel Position")),n.createElement(p.a,{name:"panelPosition",value:this.props.prefValues[l.kPanelsPosition],onChange:ss(l.kPanelsPosition),className:"group",__source:{fileName:ns,lineNumber:59,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:63,columnNumber:13}},n.createElement("label",{__source:{fileName:ns,lineNumber:64,columnNumber:15}},n.createElement("input",{type:"radio",value:"left",__source:{fileName:ns,lineNumber:65,columnNumber:17}}),n.createElement("span",{__source:{fileName:ns,lineNumber:66,columnNumber:17}},Object(o.a)("Left Side")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:70,columnNumber:13}},n.createElement("label",{__source:{fileName:ns,lineNumber:71,columnNumber:15}},n.createElement("input",{type:"radio",value:"right",__source:{fileName:ns,lineNumber:72,columnNumber:17}}),n.createElement("span",{__source:{fileName:ns,lineNumber:73,columnNumber:17}},Object(o.a)("Right Side")))))),n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:80,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:81,columnNumber:11}},Object(o.a)("Panel Options")),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:82,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Display a panel toggle button along the side"),__source:{fileName:ns,lineNumber:83,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsShowToggle],onChange:ss(l.kPanelsShowToggle),__source:{fileName:ns,lineNumber:84,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:87,columnNumber:15}},Object(o.a)("Show Panel Toggle")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:90,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Overlay panel over browser content"),__source:{fileName:ns,lineNumber:91,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsAsOverlayEnabled],onChange:ss(l.kPanelsAsOverlayEnabled),__source:{fileName:ns,lineNumber:92,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:95,columnNumber:15}},Object(o.a)("Floating Panel")))),n.createElement("div",{className:"setting-single pad-left",__source:{fileName:ns,lineNumber:98,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Automatically collapse panel upon losing focus"),__source:{fileName:ns,lineNumber:99,columnNumber:13}},n.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kPanelsAsOverlayEnabled],checked:this.props.prefValues[l.kPanelsAsOverlayAutoClose],onChange:ss(l.kPanelsAsOverlayAutoClose),__source:{fileName:ns,lineNumber:100,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:104,columnNumber:15}},Object(o.a)("Auto-Close Inactive Panel")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:107,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:108,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsShowFolderBadge],onChange:ss(l.kPanelsShowFolderBadge),__source:{fileName:ns,lineNumber:109,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:112,columnNumber:15}},Object(o.a)("Show Folder Counters"))))),n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:117,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:118,columnNumber:11}},Object(o.a)("Web Panels")),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:119,columnNumber:13}},n.createElement("label",{title:Object(o.a)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:ns,lineNumber:120,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsCounterDetection],onChange:ss(l.kTabsCounterDetection),__source:{fileName:ns,lineNumber:121,columnNumber:17}}),n.createElement("span",{__source:{fileName:ns,lineNumber:124,columnNumber:17}},Object(o.a)("Detect Page Title Notifications")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:127,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Wait to Load Panels Until Activated"),__source:{fileName:ns,lineNumber:128,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsLazyLoad],onChange:ss(l.kPanelsLazyLoad),__source:{fileName:ns,lineNumber:129,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:132,columnNumber:15}},Object(o.a)("Lazy Load"))))),n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:137,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:138,columnNumber:11}},Object(o.a)("title","Notes Panel")),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:139,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Show panel content when adding a note from a page"),__source:{fileName:ns,lineNumber:140,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationShowPanel],onChange:ss(l.kNotesCreationShowPanel),__source:{fileName:ns,lineNumber:141,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:144,columnNumber:15}},Object(o.a)("Open Panel Automatically")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:148,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:149,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationNotify],onChange:ss(l.kNotesCreationNotify),__source:{fileName:ns,lineNumber:150,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:153,columnNumber:15}},Object(o.a)("Notify on Adding New Note")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:157,columnNumber:11}},n.createElement("label",{title:Object(o.a)("Add a screenshot when adding a note from a page"),__source:{fileName:ns,lineNumber:158,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationAddScreenshot],onChange:ss(l.kNotesCreationAddScreenshot),__source:{fileName:ns,lineNumber:159,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:162,columnNumber:15}},Object(o.a)("Fetch Screenshot for New Notes"))))),n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:168,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:169,columnNumber:11}},Object(o.a)("title","Window Panel")),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:170,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:171,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowSingleClickOpens],onChange:ss(l.kPanelsWindowSingleClickOpens),__source:{fileName:ns,lineNumber:172,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:175,columnNumber:15}},Object(o.a)("Activate with Single Click")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:179,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:180,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowShowPinnedGroup],onChange:ss(l.kPanelsWindowShowPinnedGroup),__source:{fileName:ns,lineNumber:181,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:184,columnNumber:15}},Object(o.a)("Pinned Folder")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:188,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:189,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowDragToStack],onChange:ss(l.kPanelsWindowDragToStack),__source:{fileName:ns,lineNumber:190,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:193,columnNumber:15}},Object(o.a)("Make Tab Stack with Mouse Drag")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:197,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:198,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowShowUnread],onChange:ss(l.kPanelsWindowShowUnread),__source:{fileName:ns,lineNumber:199,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:202,columnNumber:15}},Object(o.a)("Show Unread Tabs Badge"))))),n.createElement("div",{className:"setting-group",__source:{fileName:ns,lineNumber:208,columnNumber:9}},n.createElement("h3",{__source:{fileName:ns,lineNumber:209,columnNumber:11}},Object(o.a)("title","Contacts Panel")),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:210,columnNumber:11}},n.createElement("label",{__source:{fileName:ns,lineNumber:211,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMailSingleClickTabs],onChange:ss(l.kMailSingleClickTabs),__source:{fileName:ns,lineNumber:212,columnNumber:15}}),n.createElement("span",{__source:{fileName:ns,lineNumber:215,columnNumber:15}},Object(o.a)("Activate with Single Click")))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:ns,lineNumber:219,columnNumber:11}},n.createElement("h3",{__source:{fileName:ns,lineNumber:220,columnNumber:13}},Object(o.a)("Default Contact Action")),n.createElement(p.a,{name:"contactDefaulAction",value:this.props.prefValues[l.kMailContactDefaultAction],onChange:ss(l.kMailContactDefaultAction),className:"group",__source:{fileName:ns,lineNumber:221,columnNumber:13}},n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:225,columnNumber:15}},n.createElement("label",{__source:{fileName:ns,lineNumber:226,columnNumber:17}},n.createElement("input",{type:"radio",value:"viewAllMessages",__source:{fileName:ns,lineNumber:227,columnNumber:19}}),n.createElement("span",{__source:{fileName:ns,lineNumber:228,columnNumber:19}},Object(o.a)("View All Mail Messages")))),n.createElement("div",{className:"setting-single",__source:{fileName:ns,lineNumber:231,columnNumber:15}},n.createElement("label",{__source:{fileName:ns,lineNumber:232,columnNumber:17}},n.createElement("input",{type:"radio",value:"compose",__source:{fileName:ns,lineNumber:233,columnNumber:19}}),n.createElement("span",{__source:{fileName:ns,lineNumber:234,columnNumber:19}},Object(o.a)("radio","Compose New Message"))))))))}}var os=Object(v.a)(rs,is),ls="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\HistorySetting.jsx";const cs=[l.kHistoryDaysToKeepVisits],us=r.a.getEventHandler;class ms extends i.a.Component{render(){const e=this.props.prefValues[l.kHistoryDaysToKeepVisits],t=[0,1,7,31,91,182,365,3650].includes(e);return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:ls,lineNumber:29,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:ls,lineNumber:30,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:ls,lineNumber:31,columnNumber:11}},Object(o.a)("other","Save Browsing History")),i.a.createElement("div",{className:"setting-single",__source:{fileName:ls,lineNumber:32,columnNumber:11}},i.a.createElement("select",{onChange:us(l.kHistoryDaysToKeepVisits),value:e,__source:{fileName:ls,lineNumber:33,columnNumber:13}},i.a.createElement("option",{value:"0",__source:{fileName:ls,lineNumber:36,columnNumber:15}},Object(o.a)("command","Session Only")),i.a.createElement("option",{value:"1",__source:{fileName:ls,lineNumber:37,columnNumber:15}},Object(o.a)("One Day")),i.a.createElement("option",{value:"7",__source:{fileName:ls,lineNumber:38,columnNumber:15}},Object(o.a)("One Week")),i.a.createElement("option",{value:"31",__source:{fileName:ls,lineNumber:39,columnNumber:15}},Object(o.a)("One Month")),i.a.createElement("option",{value:"91",__source:{fileName:ls,lineNumber:40,columnNumber:15}},Object(o.a)("Three Months")),i.a.createElement("option",{value:"182",__source:{fileName:ls,lineNumber:41,columnNumber:15}},Object(o.a)("Six Months")),i.a.createElement("option",{value:"365",__source:{fileName:ls,lineNumber:42,columnNumber:15}},Object(o.a)("One Year")),i.a.createElement("option",{value:"3650",__source:{fileName:ls,lineNumber:43,columnNumber:15}},Object(o.a)("Forever")),!t&&i.a.createElement("option",{value:e,__source:{fileName:ls,lineNumber:45,columnNumber:17}},Object(o.a)("Other ($1 Days)",[e])))),i.a.createElement("p",{className:"info",__source:{fileName:ls,lineNumber:51,columnNumber:11}},Object(o.a)("Browser restart is required for new setting to take effect."))))}}var ds=Object(v.a)(ms,cs),hs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\Privacy.jsx";function ps(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const bs=[l.kAddressBarInlineSearchEnabled,l.kAddressBarInlineSearchSuggestEnabled,l.kAddressBarSearchSuggestEnabled,l.kAddressBarSearchTypedHistoryEnabled,l.kAddressBarTypedHistoryEnabled,l.kAlternateErrorPagesEnabled,l.kEnableDoNotTrack,l.kPrivacyAdverseAdBlockEnabled,l.kPrivacyAutofillServerAssist,l.kPrivacyGoogleComponentExtensionsCryptoToken,l.kPrivacyGoogleComponentExtensionsHangoutServices,l.kPrivacyGoogleComponentExtensionsMediaRouter,l.kPrivacyGoogleComponentExtensionsWebStore,l.kSafeBrowsingEnabled,l.kIncognitoShowIntro,l.kWebRTCIPHandlingPolicy];const gs=r.a.getEventHandler;class Ns extends i.a.Component{constructor(...e){super(...e),ps(this,"toggleChromePrivacyWebRTCChange",()=>{const e=this.webRTCAnnouncesIPs()?"disable_non_proxied_udp":"default";r.a.set(l.kWebRTCIPHandlingPolicy,e)}),ps(this,"webRTCAnnouncesIPs",()=>["default","default_public_interface_only","default_public_and_private_interfaces"].some(e=>this.props.prefValues[l.kWebRTCIPHandlingPolicy]===e))}render(){const e=this.props.prefValues;return(i.a.createElement(C.a,{categoryTitle:Object(o.a)("Privacy"),displayPrivacyLink:!0,filter:this.props.filter,__source:{fileName:hs,lineNumber:81,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:86,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:87,columnNumber:11}},Object(o.a)("Google Services")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:88,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:89,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kSafeBrowsingEnabled],onChange:gs(l.kSafeBrowsingEnabled),__source:{fileName:hs,lineNumber:90,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:93,columnNumber:15}},Object(o.a)("Phishing and malware protection")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:97,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:98,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAlternateErrorPagesEnabled],onChange:gs(l.kAlternateErrorPagesEnabled),__source:{fileName:hs,lineNumber:99,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:102,columnNumber:15}},Object(o.a)("DNS to help resolve navigation errors")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:108,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:109,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyAutofillServerAssist],onChange:gs(l.kPrivacyAutofillServerAssist),__source:{fileName:hs,lineNumber:110,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:113,columnNumber:15}},Object(o.a)("Form Autofill Assist"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:120,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:121,columnNumber:11}},Object(o.a)("Google Extensions")),i.a.createElement("p",{className:"info",__source:{fileName:hs,lineNumber:122,columnNumber:11}},Object(o.a)("Browser restart is required for new settings to take effect.")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:124,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:125,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyGoogleComponentExtensionsCryptoToken],onChange:gs(l.kPrivacyGoogleComponentExtensionsCryptoToken),__source:{fileName:hs,lineNumber:126,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:129,columnNumber:15}},Object(o.a)("Crypto Token"))),i.a.createElement("p",{className:"info",__source:{fileName:hs,lineNumber:133,columnNumber:13}},Object(o.a)("Disabling this option might break Google services."))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:138,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:139,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyGoogleComponentExtensionsHangoutServices],onChange:gs(l.kPrivacyGoogleComponentExtensionsHangoutServices),__source:{fileName:hs,lineNumber:140,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:143,columnNumber:15}},Object(o.a)("Hangouts")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:149,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:150,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyGoogleComponentExtensionsMediaRouter],onChange:gs(l.kPrivacyGoogleComponentExtensionsMediaRouter),__source:{fileName:hs,lineNumber:151,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:154,columnNumber:15}},Object(o.a)("Chromecast Media Router"))),i.a.createElement("p",{className:"info",__source:{fileName:hs,lineNumber:158,columnNumber:13}},Object(o.a)("Disabling this option might break Google services."))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:163,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:164,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyGoogleComponentExtensionsWebStore],onChange:gs(l.kPrivacyGoogleComponentExtensionsWebStore),__source:{fileName:hs,lineNumber:165,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:168,columnNumber:15}},Object(o.a)("Web Store"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:176,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:177,columnNumber:11}},Object(o.a)("noun","Search")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:178,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:179,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarInlineSearchEnabled],onChange:gs(l.kAddressBarInlineSearchEnabled),__source:{fileName:hs,lineNumber:180,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:183,columnNumber:15}},Object(o.a)("Search in Address Field")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:187,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:188,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarInlineSearchSuggestEnabled],onChange:gs(l.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:hs,lineNumber:189,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:192,columnNumber:15}},Object(o.a)("Suggestions in Address Field")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:196,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:197,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarSearchSuggestEnabled],onChange:gs(l.kAddressBarSearchSuggestEnabled),__source:{fileName:hs,lineNumber:198,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:201,columnNumber:15}},Object(o.a)("Suggestions in Search Field"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:206,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:207,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:208,columnNumber:13}},Object(o.a)("Do Not Track")),i.a.createElement("label",{title:Object(o.a)("Send “Do Not Track” directive to supporting websites"),__source:{fileName:hs,lineNumber:209,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kEnableDoNotTrack],onChange:gs(l.kEnableDoNotTrack),__source:{fileName:hs,lineNumber:210,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:213,columnNumber:15}},Object(o.a)("Ask Websites Not to Track Me")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:216,columnNumber:11}},i.a.createElement("label",{title:"Reject advertisement on websites listed by Google as privacy offenders",__source:{fileName:hs,lineNumber:217,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyAdverseAdBlockEnabled],onChange:gs(l.kPrivacyAdverseAdBlockEnabled),__source:{fileName:hs,lineNumber:218,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:221,columnNumber:15}},Object(o.a)("Block Ads on Abusive Sites")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:224,columnNumber:11}},i.a.createElement("label",{title:Object(o.a)("Web Real-Time Communication broadcast may leak IP address to services"),__source:{fileName:hs,lineNumber:225,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.webRTCAnnouncesIPs(),onChange:this.toggleChromePrivacyWebRTCChange,__source:{fileName:hs,lineNumber:226,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:230,columnNumber:15}},Object(o.a)("Broadcast IP for Best WebRTC Performance"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:235,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:236,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:237,columnNumber:13}},Object(o.a)("Show Typed History")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:238,columnNumber:13}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:239,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarTypedHistoryEnabled],onChange:gs(l.kAddressBarTypedHistoryEnabled),__source:{fileName:hs,lineNumber:240,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:244,columnNumber:17}},Object(o.a)("radio","In Address Field")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:247,columnNumber:13}},i.a.createElement("label",{__source:{fileName:hs,lineNumber:248,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarSearchTypedHistoryEnabled],onChange:gs(l.kAddressBarSearchTypedHistoryEnabled),__source:{fileName:hs,lineNumber:249,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:254,columnNumber:17}},Object(o.a)("radio","In Search Field")))))),i.a.createElement(ds,{filter:this.props.filter,__source:{fileName:hs,lineNumber:260,columnNumber:9}}),i.a.createElement("div",{className:"setting-group",__source:{fileName:hs,lineNumber:262,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:hs,lineNumber:263,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:hs,lineNumber:264,columnNumber:13}},Object(o.a)("Private Windows")),i.a.createElement("label",{__source:{fileName:hs,lineNumber:265,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kIncognitoShowIntro],onChange:gs(l.kIncognitoShowIntro),__source:{fileName:hs,lineNumber:266,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hs,lineNumber:269,columnNumber:15}},Object(o.a)("Show Introduction"))))),!1))}}var fs=Object(v.a)(Ns,bs),_s=a(154),vs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\PrivateThemeSelect.jsx";const Es=[l.kThemePrivateWindow];function Cs({currentTarget:e}){r.a.set(l.kThemePrivateWindow,e.value)}var ws=Object(v.a)(Object(_s.a)((function({vivaldiSettings:e,prefValues:t,filter:a}){const i=[...e.THEMES_SYSTEM,...e.THEMES_USER],s=t[l.kThemePrivateWindow];return n.createElement(C.a,{categoryTitle:Object(o.a)("Private Window theme"),filter:a,__source:{fileName:vs,lineNumber:42,columnNumber:5}},n.createElement("div",{className:"setting-single setting-single--LeadingText",__source:{fileName:vs,lineNumber:43,columnNumber:7}},n.createElement("label",{__source:{fileName:vs,lineNumber:44,columnNumber:9}},n.createElement("select",{value:s,onChange:Cs,__source:{fileName:vs,lineNumber:45,columnNumber:11}},i.map(e=>n.createElement("option",{key:e.name,value:e.name,__source:{fileName:vs,lineNumber:50,columnNumber:15}},e.name))),n.createElement("span",{__source:{fileName:vs,lineNumber:53,columnNumber:11}},Object(o.a)("Select theme to use for Private Windows")))))}),["THEMES_USER","THEMES_SYSTEM"]),Es),Os=a(551),ys=a(35),Ss=a(125),Ts=a.n(Ss),ks=a(23),As=a(695),Is="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\ChainedCommands.jsx";const Ds=[l.kChainedCommandsCommandList,l.kChainedCommandsDeletedCommandList],Ms=ks.p.settingCategories,Ps=Object(o.a)("duplicate","Clone"),xs=e=>{const t=e.keyword?e.keyword.defaultValue:void 0;return{name:e.label,label:e.name,key:e.guid,uniqueId:Ts()(),param:t,defaultValue:t}};var Ls=Object(v.a)(({filter:e,category:t})=>{var a;const s=Object(As.a)(),c=Object(n.useContext)(P.a),[u,m]=Object(n.useState)(Xe.a.get(l.kChainedCommandsCommandList)),d=Object(As.b)(u),h=Object(n.useRef)(0),p=t!==Ms.all;Object(n.useEffect)(()=>{if(u.length>(null==d?void 0:d.length)){const e=((e,t)=>{const a=new Set((null==t?void 0:t.map(e=>e.key))||[]);return e.map(e=>e.key).find(e=>!a.has(e))})(u,d);e&&ys.a.addListener(`COMMAND_${e}`,tt.default.commandChanged)}r.a.set(l.kChainedCommandsCommandList,u)},[d,u]);const g=e=>{const{val:t,position:a,shouldDelete:n}=e;if(!t||!s)return;const i=xs(t),r=[...u],o=r[h.current];o.chain.splice(a,n,i),r[h.current]=o,m(r),v()},N=(e,t)=>{const a=[...u],n=a[h.current],{chain:i}=n,s=i.splice(e,1)[0];i.splice(t,0,s),n.chain=i,a[h.current]=n,m(a),v()},f=(e,t)=>{const a=!isNaN(e)&&e.length?Number(e):e,n=[...u],{chain:i}=n[h.current],s=i[t];s.param=a,i[t]=s,n[h.current].chain=i,m(n),v()},_=e=>{const t=[...u],{chain:a}=t[h.current];a.splice(e,1),m(t),v()},v=()=>{const{chain:e,name:t}=u[h.current],a={chain:e,name:t};tt.default.updateChainShortcut(a)},E=e=>{const t=[...u],a=t[h.current];a.label=e,t[h.current]=a,m(t)},C=()=>{const e=[...u],t=e[h.current],a=Ts()(),n={...t,chain:t.chain.slice(),key:a,name:`COMMAND_${a}`,label:`${t.label} ${Ps}`};e.splice(h.current+1,0,n),m(e)};return i.a.createElement(b.a,{filter:e,__source:{fileName:Is,lineNumber:275,columnNumber:5}},i.a.createElement("p",{className:"info",__source:{fileName:Is,lineNumber:276,columnNumber:7}},Object(o.a)("A Command Chain is a group of commands executed in a sequence. You can trigger a Chain from Quick Commands, or assign it a custom Keyboard Shortcut or Mouse Gesture.")),i.a.createElement(Qa.a,{className:"Setting--ChainedCommand",masterLayout:1,contentStrings:Os.c,items:u,filter:e,deleteTitle:Object(o.a)("title","Delete Command Chain"),deleteTipString:Object(o.a)("tooltip","Delete Command Chain"),addTipString:Object(o.a)("Add Command Chain"),onRemove:e=>{const t=[...u],a=t.splice(e,1)[0],{key:n}=a,i=Xe.a.get(l.kChainedCommandsDeletedCommandList);m(t),h.current=0,tt.default.removeCommandConfig(a.name),r.a.set(l.kChainedCommandsDeletedCommandList,[n,...i])},onContextMenu:(e,t)=>{const a=[{handler:C,...Object(lt.a)("Clone Command Chain")}];Object(ot.a)(c.vivaldiWindowId,a)(t)},renderEmpty:e=>i.a.createElement("div",{className:"detail",__source:{fileName:Is,lineNumber:226,columnNumber:5}},i.a.createElement("div",{className:"detail-content",__source:{fileName:Is,lineNumber:227,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:Is,lineNumber:228,columnNumber:9}},e.emptyTitle),i.a.createElement("p",{__source:{fileName:Is,lineNumber:229,columnNumber:9}},e.emptyDescription))),moveItem:(e,t)=>{const a=[...u],n=a.splice(e,1)[0];a.splice(t,0,n),m(a)},emptyListString:Object(o.a)("Add a Chain to Start"),emptyListGraphic:dt.je,deleteLabel:null===(a=u[h.current])||void 0===a?void 0:a.label,onCreateItem:()=>{const e=Object(o.a)("create","New Chain"),t=Ts()(),a={label:e,name:`COMMAND_${t}`,chain:[xs(Os.a[0])],key:t,shortcut:[],category:"CATEGORY_COMMAND_CHAIN"};m(e=>[...e,a])},renderCreate:e=>{const t=u.length-1,{chain:a,label:n}=u[t];return h.current=t,i.a.createElement(Os.b,{changeParameter:f,removeFrom:_,shouldFocusSelector:p,cloneChain:C,addToChain:g,searchableStrings:e,moveItem:N,nameChange:E,name:n,chain:a,__source:{fileName:Is,lineNumber:239,columnNumber:7}})},mimeType:"vivaldi/x-settings-chained-command-type",supportDragAndDrop:!0,renderListItem:(e,t)=>i.a.createElement("div",{className:"item-title",__source:{fileName:Is,lineNumber:172,columnNumber:12}},t.label),renderContent:(e,t)=>{const{chain:a,label:n}=u[e];return h.current=e,i.a.createElement(Os.b,{changeParameter:f,removeFrom:_,shouldFocusSelector:p,cloneChain:C,addToChain:g,searchableStrings:t,moveItem:N,nameChange:E,name:n,chain:a,__source:{fileName:Is,lineNumber:260,columnNumber:7}})},isChain:!0,__source:{fileName:Is,lineNumber:279,columnNumber:7}}))},Ds),js=a(101),Rs=a(208),Bs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\QuickCommands.jsx";function Fs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Us=[l.kQuickCommandsKeepValue,l.kQuickCommandsOpenUrlInNewTab,l.kQuickCommandsSearchEnglish,l.kQuickCommandsMatchNickname,l.kQuickCommandsLimitResults,l.kQuickCommandsSearchPriority,l.kQuickCommandsShowBookmarks,l.kQuickCommandsShowCalculator,l.kQuickCommandsShowExtensions,l.kQuickCommandsShowHistory,l.kQuickCommandsShowPageActions,l.kQuickCommandsShowNotes,l.kQuickCommandsUseNotesManager],Hs=r.a.getEventHandler;class Vs extends i.a.Component{constructor(...e){super(...e),Fs(this,"toggleSetting",e=>{r.a.set(e,!this.props.prefValues[e])}),Fs(this,"renderListItem",(e,t)=>{var a;const n=null===(a=js.a.find(e=>e.key===t.key))||void 0===a?void 0:a.pref,s=n&&this.props.prefValues[n];return i.a.createElement("div",{onDoubleClick:n?()=>this.toggleSetting(n):null,__source:{fileName:Bs,lineNumber:77,columnNumber:12}},n?i.a.createElement("input",{type:"checkbox",value:t.key,checked:s,onChange:Hs(n),__source:{fileName:Bs,lineNumber:79,columnNumber:11}}):i.a.createElement("span",{style:{width:16},__source:{fileName:Bs,lineNumber:85,columnNumber:11}}),t.name)}),Fs(this,"resetList",()=>{r.a.reset(l.kQuickCommandsSearchPriority)}),Fs(this,"moveItem",(e,t)=>{const a=this.props.prefValues[l.kQuickCommandsSearchPriority],n=a.splice(e,1)[0];a.splice(t,0,n),r.a.set(l.kQuickCommandsSearchPriority,a)})}render(){const e=this.props.prefValues,t=ys.a.getSync("COMMAND_SHOW_QUICK_COMMANDS").shortcut;return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{categoryTitle:Object(o.a)("Quick Commands"),filter:this.props.filter,__source:{fileName:Bs,lineNumber:109,columnNumber:9}},i.a.createElement("p",{className:"info",__source:{fileName:Bs,lineNumber:111,columnNumber:11}},t&&t.length>0&&Object(o.a)("Open Quick Commands with $2 shortcut.","Open Quick Commands with $2 shortcuts.",[t.length,Object(Rs.b)(t).toUpperCase()])," ",Object(o.a)("Press Down or Up keys with $1 modifier to skip to next search result section. Press Right key to auto-complete input from current list selection.",["Alt"])),i.a.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Bs,lineNumber:125,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:126,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:Bs,lineNumber:127,columnNumber:15}},Object(o.a)("Search Types and Priority")),i.a.createElement("p",{className:"info",__source:{fileName:Bs,lineNumber:128,columnNumber:15}},Object(o.a)("Select data types to include in Quick Command search results. Reorder the list to change default search highlight priority.")),i.a.createElement("div",{className:"master-detail sortable-list qc-priority",__source:{fileName:Bs,lineNumber:131,columnNumber:15}},i.a.createElement(rt.a,{filter:this.props.filter,items:(a=e[l.kQuickCommandsSearchPriority],a.map(e=>{var t;return{key:e,name:(null===(t=js.a.find(t=>t.key===e))||void 0===t?void 0:t.name)||""}})),moveItem:this.moveItem,renderListItem:this.renderListItem,supportDragAndDrop:!0,mimeType:"vivaldi/x-settings-quick-command-type",__source:{fileName:Bs,lineNumber:132,columnNumber:17}})),i.a.createElement("input",{type:"button",onClick:this.resetList,value:Object(o.a)("Reset Priority"),__source:{fileName:Bs,lineNumber:141,columnNumber:15}}))),i.a.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Bs,lineNumber:149,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Bs,lineNumber:150,columnNumber:13}},Object(o.a)("Quick Command Options")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:152,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:153,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsKeepValue],onChange:Hs(l.kQuickCommandsKeepValue),__source:{fileName:Bs,lineNumber:154,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:157,columnNumber:17}},Object(o.a)("Keep Last Typed Value")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:161,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:162,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsLimitResults],onChange:Hs(l.kQuickCommandsLimitResults),__source:{fileName:Bs,lineNumber:163,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:166,columnNumber:17}},Object(o.a)("Limit Number of Visible Search Results")))),!navigator.language.startsWith("en")&&i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:171,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:172,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsSearchEnglish],onChange:Hs(l.kQuickCommandsSearchEnglish),__source:{fileName:Bs,lineNumber:173,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:176,columnNumber:17}},Object(o.a)("Include English Search Terms"))),i.a.createElement("p",{className:"info",__source:{fileName:Bs,lineNumber:178,columnNumber:15}},Object(o.a)("Include English equivalent of command names in search results"))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:182,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:183,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsOpenUrlInNewTab],onChange:Hs(l.kQuickCommandsOpenUrlInNewTab),__source:{fileName:Bs,lineNumber:184,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:188,columnNumber:19}},Object(o.a)("Open Links in New Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:192,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:193,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsMatchNickname],onChange:Hs(l.kQuickCommandsMatchNickname),__source:{fileName:Bs,lineNumber:194,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:198,columnNumber:19}},Object(o.a)("Open Bookmarks on Nickname Match")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Bs,lineNumber:202,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Bs,lineNumber:203,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsUseNotesManager],onChange:Hs(l.kQuickCommandsUseNotesManager),__source:{fileName:Bs,lineNumber:204,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Bs,lineNumber:208,columnNumber:19}},Object(o.a)("Open Notes in Notes Manager")))))),i.a.createElement(C.a,{categoryTitle:Object(o.a)("Command Chains"),filter:this.props.filter,__source:{fileName:Bs,lineNumber:214,columnNumber:9}},i.a.createElement(Ls,{filter:this.props.filter,category:this.props.category,__source:{fileName:Bs,lineNumber:216,columnNumber:11}})));var a}}var Ws=Object(v.a)(Vs,Us),zs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\RazerChromaIntegration.jsx";function Gs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ks=["keyboard","mouse","chromalink","mousemat","headset"],Ys=[l.kRazerChromaDevices,l.kRazerChromaEnabled],$s=[{device:"keyboard",text:Object(o.a)("Keyboard")},{device:"mouse",text:Object(o.a)("Mouse")},{device:"mousemat",text:Object(o.a)("Mouse Mat")},{device:"headset",text:Object(o.a)("Headset")},{device:"chromalink",text:Object(o.a)("Chroma Link")}];class Xs extends n.Component{constructor(e){super(e),Gs(this,"isDeviceEnabled",(e,t)=>e.findIndex(e=>e===t)>-1),Gs(this,"onChromaEnabled",e=>{const t=e.target.checked;r.a.set(l.kRazerChromaEnabled,t)}),Gs(this,"onDeviceChecked",(e,t)=>{const a=t.target.checked,n=this.props.prefValues[l.kRazerChromaDevices],i=Ks.filter(t=>e===t?a:this.isDeviceEnabled(n,t));r.a.set(l.kRazerChromaDevices,i)})}renderDeviceList(){const e=this.props.prefValues[l.kRazerChromaDevices];return $s.map(t=>n.createElement("div",{key:t.device,className:"setting-single pad-left",__source:{fileName:zs,lineNumber:67,columnNumber:9}},n.createElement("label",{__source:{fileName:zs,lineNumber:68,columnNumber:11}},n.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kRazerChromaEnabled],checked:Boolean(this.isDeviceEnabled(e,t.device)),onChange:this.onDeviceChecked.bind(this,t.device),__source:{fileName:zs,lineNumber:69,columnNumber:13}}),n.createElement("span",{__source:{fileName:zs,lineNumber:74,columnNumber:13}},t.text))))}render(){return n.createElement(C.a,{categoryTitle:Object(o.a)("Razer Chroma Theme Integration"),filter:this.props.filter,__source:{fileName:zs,lineNumber:86,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:zs,lineNumber:89,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:zs,lineNumber:90,columnNumber:11}},n.createElement("label",{__source:{fileName:zs,lineNumber:91,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kRazerChromaEnabled],onChange:this.onChromaEnabled,__source:{fileName:zs,lineNumber:92,columnNumber:15}}),n.createElement("span",{__source:{fileName:zs,lineNumber:96,columnNumber:15}},Object(o.a)("Enable Razer Chroma Integration"))),n.createElement("p",{className:"info",__source:{fileName:zs,lineNumber:98,columnNumber:13}},Object(o.a)("Requires Razer Chroma enabled devices connected to the local machine."))),this.renderDeviceList()))}}var Zs=Object(v.a)(Xs,Ys),Qs=a(812),qs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordItem.jsx";class Js extends n.Component{render(){const{origin:e,username:t,password:a}=this.props.savedPassword,{columns:i}=this.props;return i.length<1||!this.props.savedPassword?null:i.map(i=>{switch(i.id){case"origin":return n.createElement("label",{key:i.id,__source:{fileName:qs,lineNumber:34,columnNumber:13}},n.createElement("span",{className:"site-icon",onDoubleClick:this.props.openLink.bind(null,e),title:Object(o.a)("Double-click to visit $1",[e]),__source:{fileName:qs,lineNumber:35,columnNumber:15}},n.createElement(At.a,{url:e,__source:{fileName:qs,lineNumber:39,columnNumber:17}})),n.createElement("span",{__source:{fileName:qs,lineNumber:41,columnNumber:15}},e));case"username":return n.createElement("label",{key:i.id,__source:{fileName:qs,lineNumber:47,columnNumber:13}},n.createElement("input",{type:"text",value:t,tabIndex:-1,readOnly:!0,__source:{fileName:qs,lineNumber:48,columnNumber:15}}));case"password":return n.createElement("div",{key:i.id,__source:{fileName:qs,lineNumber:54,columnNumber:13}},n.createElement("label",{__source:{fileName:qs,lineNumber:55,columnNumber:15}},this.props.showPassword?n.createElement("input",{type:"text",value:a,tabIndex:-1,readOnly:!0,__source:{fileName:qs,lineNumber:57,columnNumber:21}}):n.createElement("span",{__source:{fileName:qs,lineNumber:58,columnNumber:21}},"•••••••")),n.createElement("button",{type:"button",className:"listcontrol",title:this.props.showPassword?Object(o.a)("Hide password"):Object(o.a)("other","Show password"),tabIndex:-1,onClick:this.props.togglePassword.bind(null,this.props.savedPassword.index),dangerouslySetInnerHTML:{__html:dt.Oc},__source:{fileName:qs,lineNumber:61,columnNumber:15}}));default:return null}})}}var er=Js,tr=a(316);function ar(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nr extends i.a.PureComponent{constructor(...e){super(...e),ar(this,"_passwordTree",i.a.createRef()),ar(this,"state",{visiblePasswords:[]}),ar(this,"togglePassword",e=>{L.a.savedpasswords.authenticate(t=>{t&&this.onShowPassword(e)})}),ar(this,"onShowPassword",e=>{this.setState(t=>{const a=t.visiblePasswords.slice(0);return a.includes(e)?a.splice(a.indexOf(e),1):a.push(e),{visiblePasswords:a}})}),ar(this,"onPasswordDeleted",e=>{this.state.visiblePasswords.includes(e)&&this.setState(t=>{const a=t.visiblePasswords.slice(0);return a.splice(a.indexOf(e),1),{visiblePasswords:a}})}),ar(this,"openLink",e=>{Nn.a.openURL(e)}),ar(this,"copyPassword",e=>{L.a.savedpasswords.authenticate(t=>{t&&nt.a.set(e)})}),ar(this,"getContextMenuItems",e=>{const t=this.state.visiblePasswords.includes(e.index);return[{handler:this.onShowPassword.bind(null,e.index),visible:t,...Object(lt.a)("Hide Password")},{handler:this.togglePassword.bind(null,e.index),visible:!t,...Object(lt.a)("Show Password")},it.a.separatorItem,{handler:this.copyPassword.bind(null,e.password),...Object(lt.a)("Copy Password")},{handler:nt.a.set.bind(null,e.username),...Object(lt.a)("Copy Account Name")},{handler:this.openLink.bind(null,e.origin),visible:Object(Ct.c)(e.origin).startsWith("http"),...Object(lt.a)("Visit Page")},it.a.separatorItem,{handler:this.props.onDelete.bind(null,e),...Object(lt.a)("Delete Password")}]}),ar(this,"onKeyDown",e=>{if(!this._passwordTree.current)return;const t=this._passwordTree.current.getSelectedItem();if(t)switch(e.key){case"Delete":case"Backspace":this.props.onDelete(t);break;case"Enter":this.openLink(t.origin)}}),ar(this,"onMouseDown",()=>{this._passwordTree.current&&this._passwordTree.current.focusTree()}),ar(this,"getRowComponentProps",e=>({columns:this.props.columns,savedPassword:e.node,showPassword:this.state.visiblePasswords.includes(e.node.index),togglePassword:this.togglePassword,openLink:this.openLink}))}componentDidMount(){this._passwordTree.current&&this._passwordTree.current.focusTree()}render(){return i.a.createElement(xi.a,{ref:this._passwordTree,rowComponent:er,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,enableDragAndDrop:!1,onItemMouseDown:this.onMouseDown,onItemDoubleClick:ht.default,onKeyDown:this.onKeyDown,getContextMenuItems:this.getContextMenuItems,isFolder:tr.a,isValidForClipboard:tr.a,hasChildren:tr.a,sorting:this.props.sorting,columns:this.props.columns,multiSelect:!1,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordsTree.jsx",lineNumber:156,columnNumber:7}})}}var ir=nr,sr=a(204),rr=a(153),or="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswords.jsx";function lr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const cr=x.a.passwordsPrivate.onPasswordsFileExportProgress,ur=[l.kCredentialsEnableService],mr=r.a.getEventHandler,dr=[{text:Object(o.a)("Website"),value:"origin",fullScreenTitle:Object(o.a)("Sort by website"),width:300,visible:!0,key:!0},{text:Object(o.a)("title","Account Name"),value:"username",fullScreenTitle:Object(o.a)("Sort by account name"),width:160,visible:!0},{text:Object(o.a)("Password"),value:"password",fullScreenTitle:Object(o.a)("Sort by password"),width:160,visible:!0}];class hr extends n.Component{constructor(e){super(e),lr(this,"passwordTree",n.createRef()),lr(this,"sortComparator",(e,t)=>e.index<t.index?1:-1),lr(this,"onSortChange",(e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}})}),lr(this,"onUpdateRow",e=>this.setState({columns:e})),lr(this,"onSaveRow",()=>Object(rr.b)(this.state.columns,"passwords")),lr(this,"exportProgress",e=>{this.setState({exportStatus:e.status}),console.log("status: "+e.status)}),lr(this,"getSavedPassords",()=>L.a.savedpasswords.getList(e=>{this.setState({savedPasswordsData:e})})),lr(this,"deleteSavedPassword",()=>{const e=this.state.toRemove;e&&(L.a.savedpasswords.remove(e.index,()=>{this.passwordTree.current&&this.passwordTree.current.onPasswordDeleted(e.index),this.getSavedPassords()}),this.setState({confirmation:!1,toRemove:null}))}),lr(this,"onAskToDelete",e=>this.setState({confirmation:!0,toRemove:e})),lr(this,"onCancel",()=>this.setState({confirmation:!1,toRemove:null})),lr(this,"togglePasswordList",()=>this.setState(e=>({passwordsVisible:!e.passwordsVisible,siteFilter:""}))),lr(this,"exportPasswords",()=>{x.a.passwordsPrivate.exportPasswords(()=>{})}),lr(this,"filterEntries",e=>this.setState({siteFilter:e.target.value})),lr(this,"renderDeleteConfirmationModal",()=>{const e=this.state.toRemove;if(!e)return null;const t=Pn.a.parse(e.origin).hostname;return(n.createElement(st.a,{onRequestClose:this.onCancel,dialogWidth:400,__source:{fileName:or,lineNumber:190,columnNumber:7}},n.createElement("div",{className:"dialog-delete-password",__source:{fileName:or,lineNumber:191,columnNumber:9}},n.createElement("header",{className:"dialog-header",__source:{fileName:or,lineNumber:192,columnNumber:11}},n.createElement("h1",{className:"dialog-title",__source:{fileName:or,lineNumber:193,columnNumber:13}},Object(o.a)("Delete password for $1?",[t||e.origin]))),n.createElement("div",{className:"dialog-content",__source:{fileName:or,lineNumber:197,columnNumber:11}},n.createElement("p",{__source:{fileName:or,lineNumber:198,columnNumber:13}},Object(o.a)("Password for user “$1” on page “$2” will be removed.",[e.username,e.origin]))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:or,lineNumber:204,columnNumber:11}},n.createElement("input",{type:"button",className:"primary",onClick:this.deleteSavedPassword,value:Object(o.a)("other","Delete"),autoFocus:!0,__source:{fileName:or,lineNumber:205,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:or,lineNumber:210,columnNumber:13}})))))});const t=Object(rr.e)().passwords;this.state={savedPasswordsData:[],confirmation:!1,toRemove:null,siteFilter:"",passwordsVisible:!1,columns:t||Object(rr.d)(dr),sorting:{sortOrder:1,sortField:"manually",comparator:this.sortComparator},exportStatus:"NOT_STARTED"}}componentDidMount(){this.getSavedPassords(),cr.addListener(this.exportProgress)}componentWillUnmount(){cr.removeListener(this.exportProgress)}render(){const{siteFilter:e}=this.state,t=e.toLowerCase(),a=this.state.savedPasswordsData.filter(e=>e.username.toLowerCase().includes(t)||e.origin.toLowerCase().includes(t));return n.createElement(C.a,{categoryTitle:Object(o.a)("Passwords"),filter:this.props.filter,className:"saved-passwords setting-group unlimited",__source:{fileName:or,lineNumber:229,columnNumber:7}},this.state.confirmation&&this.renderDeleteConfirmationModal(),n.createElement("div",{className:"setting-group unlimited",__source:{fileName:or,lineNumber:234,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:or,lineNumber:235,columnNumber:11}},n.createElement("label",{__source:{fileName:or,lineNumber:236,columnNumber:13}},n.createElement("input",{type:"checkbox",onChange:mr(l.kCredentialsEnableService),checked:this.props.prefValues[l.kCredentialsEnableService],__source:{fileName:or,lineNumber:237,columnNumber:15}}),n.createElement("span",{__source:{fileName:or,lineNumber:241,columnNumber:15}},Object(o.a)("Save Webpage Passwords")))),this.state.passwordsVisible&&n.createElement("div",{className:"setting-single",__source:{fileName:or,lineNumber:246,columnNumber:13}},n.createElement("input",{type:"search",defaultValue:"",placeholder:Object(o.a)("Filter Passwords"),onChange:this.filterEntries,__source:{fileName:or,lineNumber:247,columnNumber:15}})),this.state.passwordsVisible&&n.createElement("div",{className:"saved-passwords-tree",__source:{fileName:or,lineNumber:257,columnNumber:13}},n.createElement(sr.a,{fields:dr,fullsize:!0,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,keyAccess:0,manualSorting:!1,__source:{fileName:or,lineNumber:258,columnNumber:15}}),n.createElement(ir,{ref:this.passwordTree,sorting:this.state.sorting,columns:this.state.columns,onDelete:this.onAskToDelete,nodes:a,__source:{fileName:or,lineNumber:269,columnNumber:15}})),0===a.length&&n.createElement("div",{className:"saved-passwords",__source:{fileName:or,lineNumber:279,columnNumber:13}},e?Object(o.a)("Query “$1” matches no result.",[e]):Object(o.a)("No saved passwords found.")),a.length>0&&n.createElement("div",{className:"setting-single",__source:{fileName:or,lineNumber:288,columnNumber:13}},n.createElement("input",{type:"button",onClick:this.togglePasswordList,value:this.state.passwordsVisible?Object(o.a)("Hide Passwords"):Object(o.a)("Show Saved Passwords"),__source:{fileName:or,lineNumber:289,columnNumber:15}}),n.createElement("input",{type:"button",onClick:this.exportPasswords,value:Object(o.a)("Export Passwords"),disabled:"IN_PROGRESS"===this.state.exportStatus,__source:{fileName:or,lineNumber:297,columnNumber:15}}),"FAILED_CANCELLED"===this.state.exportStatus||"FAILED_WRITE_FAILED"===this.state.exportStatus&&n.createElement(xa.a,{type:"error",key:"error",__source:{fileName:or,lineNumber:305,columnNumber:17}},Object(o.a)("Export failed.")),n.createElement("p",{className:"info",__source:{fileName:or,lineNumber:309,columnNumber:15}},Object(o.a)("Passwords are exported in clear text without encryption.")))))}}var pr=Object(v.a)(hr,ur),br=a(1310),gr=a(17),Nr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSidebar.jsx";function fr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _r=[l.kMailIsTurnedOff];function vr(e,t){const a=t[l.kMailIsTurnedOff];return Object.keys(ks.b).filter(e=>!("calendar"===e&&a||"mail"===e&&a||"rss"===e&&a||"chat"===e)).filter(t=>{const a=ks.b[t].section,n=!a||a===t,i=!!e&&a===e.section;return n||i}).map(e=>({...ks.b[e],key:e}))}class Er extends i.a.PureComponent{constructor(...e){super(...e),fr(this,"rowComponent",e=>{const t=e.node,a=this.props.selectedCategory.title===t.title,n=t.section&&t.section!==t.key&&t.section===this.props.selectedCategory.section;return i.a.createElement("div",{key:t.id,onMouseDown:e=>e.preventDefault(),className:vt()({"button-category":!0,"category-selected":a,section:n}),__source:{fileName:Nr,lineNumber:80,columnNumber:7}},!n&&i.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon},__source:{fileName:Nr,lineNumber:89,columnNumber:11}}),t.title)}),fr(this,"handleItemClick",(e,{key:t})=>{this.props.onCategorySelected(t)}),fr(this,"handleItemsActivated",(e,t)=>{this.props.onCategorySelected(t[0].key)}),fr(this,"handleFilterChange",({currentTarget:e})=>{this.props.onFilterChange(e.value)})}render(){return i.a.createElement("div",{className:"settings-sidebar",__source:{fileName:Nr,lineNumber:109,columnNumber:12}},i.a.createElement("header",{className:"settings-navigation-header",__source:{fileName:Nr,lineNumber:110,columnNumber:7}},i.a.createElement("input",{className:"settings-search",type:"search",ref:this.props.focusRef,placeholder:Object(o.a)("verb","Search"),value:this.props.filter,onChange:this.handleFilterChange,autoFocus:gr.a.isSettings(this.context.vivaldiWindowId),tabIndex:"0",__source:{fileName:Nr,lineNumber:111,columnNumber:9}})),i.a.createElement(xi.a,{rowComponent:this.rowComponent,nodes:vr(this.props.selectedCategory,this.props.prefValues),className:"settings-navigation",settings:"SETTINGS_TREE",onItemClick:this.handleItemClick,onItemsActivated:this.handleItemsActivated,enableDragAndDrop:!1,rowHeight:28,isFolder:tr.a,hasChildren:tr.a,__source:{fileName:Nr,lineNumber:122,columnNumber:7}}))}}var Cr=Object(v.a)(Er,_r),wr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startpage\\StartPage.jsx";const Or=[l.kStartpageNavigation,l.kStartpageSpeedDialAddButtonVisible,l.kStartpageSpeedDialAllowDnd,l.kStartpageSpeedDialColumns,l.kStartpageSpeedDialControlsVisible,l.kStartpageSpeedDialDeleteVisible,l.kStartpageSpeedDialFaviconVisible,l.kStartpageSpeedDialGameButtonShow,l.kStartpageSpeedDialTitlesVisible,l.kStartpageSpeedDialWidth],yr=r.a.getEventHandler;class Sr extends i.a.PureComponent{render(){const{filter:e,prefValues:t}=this.props;return(i.a.createElement("div",{__source:{fileName:wr,lineNumber:49,columnNumber:7}},i.a.createElement(C.a,{categoryTitle:Object(o.a)("verb","Start Page"),filter:e,__source:{fileName:wr,lineNumber:50,columnNumber:9}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:wr,lineNumber:54,columnNumber:11}},i.a.createElement("div",{className:"setting-group",__source:{fileName:wr,lineNumber:56,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:wr,lineNumber:57,columnNumber:15}},Object(o.a)("Start Page Navigation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:58,columnNumber:15}},i.a.createElement(p.a,{name:"StartPageNavigation",value:t[l.kStartpageNavigation],onChange:yr(l.kStartpageNavigation),__source:{fileName:wr,lineNumber:59,columnNumber:17}},i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:63,columnNumber:19}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:64,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"on",__source:{fileName:wr,lineNumber:65,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:66,columnNumber:23}},Object(o.a)("Show on Internal Pages")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:69,columnNumber:19}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:70,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"speed_dial_only",__source:{fileName:wr,lineNumber:71,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:72,columnNumber:23}},Object(o.a)("Show on Speed Dial Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:75,columnNumber:19}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:76,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"off",__source:{fileName:wr,lineNumber:77,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:78,columnNumber:23}},Object(o.a)("radio","Hide Titles"))))))))),i.a.createElement(C.a,{categoryTitle:Object(o.a)("Speed Dial"),filter:e,__source:{fileName:wr,lineNumber:87,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:wr,lineNumber:88,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:wr,lineNumber:89,columnNumber:13}},Object(o.a)("Speed Dial Appearance")),i.a.createElement(p.a,{name:"SpeedDialTitles",value:t[l.kStartpageSpeedDialTitlesVisible],onChange:yr(l.kStartpageSpeedDialTitlesVisible),__source:{fileName:wr,lineNumber:91,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:95,columnNumber:15}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:96,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"always",__source:{fileName:wr,lineNumber:97,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:98,columnNumber:19}},Object(o.a)("Show Title")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:101,columnNumber:15}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:102,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"hover",__source:{fileName:wr,lineNumber:103,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:104,columnNumber:19}},Object(o.a)("Show Title on Hover")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:107,columnNumber:15}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:108,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"never",__source:{fileName:wr,lineNumber:109,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:110,columnNumber:19}},Object(o.a)("Hide Title"))))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:115,columnNumber:13}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:116,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialFaviconVisible],onChange:yr(l.kStartpageSpeedDialFaviconVisible),disabled:"never"===t[l.kStartpageSpeedDialTitlesVisible],__source:{fileName:wr,lineNumber:117,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:123,columnNumber:17}},Object(o.a)("Show Favicon")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:wr,lineNumber:127,columnNumber:13}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:128,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialDeleteVisible],onChange:yr(l.kStartpageSpeedDialDeleteVisible),__source:{fileName:wr,lineNumber:129,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:132,columnNumber:17}},Object(o.a)("Show Delete Button")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:135,columnNumber:13}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:136,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialControlsVisible],onChange:yr(l.kStartpageSpeedDialControlsVisible),__source:{fileName:wr,lineNumber:137,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:140,columnNumber:17}},Object(o.a)("Show Thumbnail Control Buttons")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:143,columnNumber:13}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:144,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialAddButtonVisible],onChange:yr(l.kStartpageSpeedDialAddButtonVisible),__source:{fileName:wr,lineNumber:145,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:148,columnNumber:17}},Object(o.a)("Show “Add” button"))),i.a.createElement("p",{className:"info",__source:{fileName:wr,lineNumber:150,columnNumber:15}},Object(o.a)("When disabled, new bookmarks can be added by double-clicking the Speed Dial background.")))),i.a.createElement("div",{className:"setting-group",__source:{fileName:wr,lineNumber:154,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:155,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:wr,lineNumber:156,columnNumber:15}},Object(o.a)("Maximum Columns")),i.a.createElement("select",{className:"max-columns",value:t[l.kStartpageSpeedDialColumns],onChange:yr(l.kStartpageSpeedDialColumns),title:Object(o.a)("Maximum number of Speed Dial columns"),__source:{fileName:wr,lineNumber:157,columnNumber:15}},i.a.createElement("option",{value:1,__source:{fileName:wr,lineNumber:161,columnNumber:17}},"1"),i.a.createElement("option",{value:2,__source:{fileName:wr,lineNumber:162,columnNumber:17}},"2"),i.a.createElement("option",{value:3,__source:{fileName:wr,lineNumber:163,columnNumber:17}},"3"),i.a.createElement("option",{value:4,__source:{fileName:wr,lineNumber:164,columnNumber:17}},"4"),i.a.createElement("option",{value:5,__source:{fileName:wr,lineNumber:165,columnNumber:17}},"5"),i.a.createElement("option",{value:6,__source:{fileName:wr,lineNumber:166,columnNumber:17}},"6"),i.a.createElement("option",{value:7,__source:{fileName:wr,lineNumber:167,columnNumber:17}},"7"),i.a.createElement("option",{value:8,__source:{fileName:wr,lineNumber:168,columnNumber:17}},"8"),i.a.createElement("option",{value:10,__source:{fileName:wr,lineNumber:169,columnNumber:17}},"10"),i.a.createElement("option",{value:12,__source:{fileName:wr,lineNumber:170,columnNumber:17}},"12"),i.a.createElement("option",{value:99,__source:{fileName:wr,lineNumber:172,columnNumber:17}},Object(o.a)("Unlimited")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:wr,lineNumber:176,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:wr,lineNumber:177,columnNumber:15}},Object(o.a)("Speed Dial Thumbnail Size")),i.a.createElement("select",{className:"max-columns",value:t[l.kStartpageSpeedDialWidth],onChange:yr(l.kStartpageSpeedDialWidth),__source:{fileName:wr,lineNumber:178,columnNumber:15}},i.a.createElement("option",{value:120,__source:{fileName:wr,lineNumber:181,columnNumber:17}},Object(o.a)("Tiny")),i.a.createElement("option",{value:170,__source:{fileName:wr,lineNumber:182,columnNumber:17}},Object(o.a)("other","Small")),i.a.createElement("option",{value:220,__source:{fileName:wr,lineNumber:183,columnNumber:17}},Object(o.a)("other","Default")),i.a.createElement("option",{value:270,__source:{fileName:wr,lineNumber:184,columnNumber:17}},Object(o.a)("other","Large")),i.a.createElement("option",{value:320,__source:{fileName:wr,lineNumber:185,columnNumber:17}},Object(o.a)("Huge")),i.a.createElement("option",{value:-1,__source:{fileName:wr,lineNumber:187,columnNumber:17}},Object(o.a)("Scale to Fit Columns")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:wr,lineNumber:191,columnNumber:13}},i.a.createElement("label",{__source:{fileName:wr,lineNumber:192,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialAllowDnd],onChange:yr(l.kStartpageSpeedDialAllowDnd),__source:{fileName:wr,lineNumber:193,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:196,columnNumber:17}},Object(o.a)("Allow Drag and Drop Reordering"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:wr,lineNumber:201,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:wr,lineNumber:202,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:wr,lineNumber:203,columnNumber:15}},Object(o.a)("Vivaldia, the Vivaldi Game")),i.a.createElement("label",{__source:{fileName:wr,lineNumber:204,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:t[l.kStartpageSpeedDialGameButtonShow],onChange:yr(l.kStartpageSpeedDialGameButtonShow),__source:{fileName:wr,lineNumber:205,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wr,lineNumber:208,columnNumber:17}},Object(o.a)("Show on Speed Dial"))))))))}}var Tr=Object(v.a)(Sr,Or),kr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\CloseWindowConfirmation.jsx";const Ar=r.a.getEventHandler,Ir=[l.kWindowsShowWindowCloseConfirmationDialog];class Dr extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:kr,lineNumber:26,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:kr,lineNumber:27,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:kr,lineNumber:28,columnNumber:11}},Object(o.a)("Close Window Confirmation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:kr,lineNumber:29,columnNumber:11}},i.a.createElement("label",{__source:{fileName:kr,lineNumber:30,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWindowsShowWindowCloseConfirmationDialog],onChange:Ar(l.kWindowsShowWindowCloseConfirmationDialog),__source:{fileName:kr,lineNumber:31,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:kr,lineNumber:36,columnNumber:15}},Object(o.a)("Show Close Window Confirmation Dialog"))))))}}var Mr=Object(v.a)(Dr,Ir),Pr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\ExitConfirmation.jsx";const xr=r.a.getEventHandler,Lr=[l.kSystemShowExitConfirmationDialog];class jr extends i.a.Component{renderMacQuitConfirmation(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Pr,lineNumber:32,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Pr,lineNumber:33,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Pr,lineNumber:34,columnNumber:13}},Object(o.a)("Quit Confirmation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Pr,lineNumber:35,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Pr,lineNumber:36,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kConfirmToQuitEnabled],onChange:xr(l.kConfirmToQuitEnabled),__source:{fileName:Pr,lineNumber:37,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Pr,lineNumber:42,columnNumber:17}},Object(o.a)("Show Quit Confirmation Dialog"))))))}renderExitConfirmation(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Pr,lineNumber:52,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Pr,lineNumber:53,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Pr,lineNumber:54,columnNumber:11}},Object(o.a)("Exit Confirmation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Pr,lineNumber:55,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Pr,lineNumber:56,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kSystemShowExitConfirmationDialog],onChange:xr(l.kSystemShowExitConfirmationDialog),__source:{fileName:Pr,lineNumber:57,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Pr,lineNumber:62,columnNumber:15}},Object(o.a)("Show Exit Confirmation Dialog"))))))}render(){return this.renderExitConfirmation()}}var Rr=Object(v.a)(jr,Lr),Br=a(37),Fr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\HomePageSetting.jsx";function Ur(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Hr=[l.kHomepage,l.kHomepageCache];class Vr extends i.a.Component{constructor(...e){super(...e),Ur(this,"state",{customHomepage:this.props.prefValues[l.kHomepageCache]}),Ur(this,"saveHomePage",({currentTarget:e})=>{this.setState({customHomepage:e.value});const t=""!==e.value?Object(Ct.b)(e.value):e.value;r.a.set(l.kHomepage,t||"about:blank"),t!==Br.n&&r.a.set(l.kHomepageCache,t)})}render(){const e=("about:blank"===this.props.prefValues[l.kHomepage]?"":this.props.prefValues[l.kHomepage])===Br.n;return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Fr,lineNumber:60,columnNumber:7}},i.a.createElement("div",{className:"setting-group homepage",__source:{fileName:Fr,lineNumber:61,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Fr,lineNumber:62,columnNumber:11}},Object(o.a)("noun","Homepage")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Fr,lineNumber:64,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Fr,lineNumber:65,columnNumber:13}},i.a.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:e,value:Br.n,__source:{fileName:Fr,lineNumber:66,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Fr,lineNumber:72,columnNumber:15}},Object(o.a)("other","Start Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Fr,lineNumber:76,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Fr,lineNumber:77,columnNumber:13}},i.a.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:!e,value:this.props.prefValues[l.kHomepageCache],__source:{fileName:Fr,lineNumber:78,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Fr,lineNumber:84,columnNumber:15}},Object(o.a)("Specific Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Fr,lineNumber:88,columnNumber:11}},i.a.createElement("input",{type:"text",placeholder:Object(o.a)("Address"),disabled:e,onChange:this.saveHomePage,value:this.state.customHomepage,__source:{fileName:Fr,lineNumber:89,columnNumber:13}}))))}}var Wr=Object(v.a)(Vr,Hr),zr=a(72),Gr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSessionItem.jsx";class Kr extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=e=>{var t=this.props.urlItem;t.url=e.target.value,this.props.onSave(t)},(a="handleUrlChange")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Gr,lineNumber:24,columnNumber:7}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Gr,lineNumber:25,columnNumber:9}},i.a.createElement("input",{className:"edit",type:"text",value:this.props.urlItem.url,onChange:this.handleUrlChange,__source:{fileName:Gr,lineNumber:26,columnNumber:11}}),i.a.createElement("input",{type:"button",tabIndex:"-1",className:"circular clearkey",onClick:this.props.onDelete,title:Object(o.a)("Remove page"),__source:{fileName:Gr,lineNumber:29,columnNumber:11}})))}}var Yr=Kr,$r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSession.jsx";function Xr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zr extends i.a.Component{constructor(...e){super(...e),Xr(this,"state",{STARTUP_SESSION_URLS:[],hasUrlInInput:!1}),Xr(this,"handleInputChange",e=>{if(e.target.value.length>2?this.setState({hasUrlInInput:!0}):this.setState({hasUrlInInput:!1}),e.keyCode===zr.a.KEY_ESCAPE)e.target.value="",this.setState({hasUrlInInput:!1});else{if(e.keyCode!==zr.a.KEY_RETURN&&e.keyCode!==zr.a.KEY_ENTER)return;e.target.value.length>2&&this.addUrl()}}),Xr(this,"saveChanges",()=>{for(var e=[],t=this.state.STARTUP_SESSION_URLS,a=0;a<t.length;a++)e.push(t[a].url);r.a.set(l.kURLsToRestoreOnStartup,e)}),Xr(this,"addUrl",()=>{var e=this.refs.createUrlField.value.trim();-1===e.indexOf("://")&&(e="http://"+e),this.refs.createUrlField.value="",this.setState({hasUrlInInput:!1});var t=0;this.state.STARTUP_SESSION_URLS.length>0&&(t=Math.max.apply(Math,this.state.STARTUP_SESSION_URLS.map(e=>e.id?e.id:0))),this.state.STARTUP_SESSION_URLS.push({url:e,id:t+1}),this.saveChanges()}),Xr(this,"save",e=>{this.setState(t=>{for(var a=t.STARTUP_SESSION_URLS,n=0;n<a.length;n++)if(a[n].id===e.id){var i=e.url;-1===i.indexOf(":")&&(i="http://"+i),a[n].url=i;break}return{STARTUP_SESSION_URLS:a}},()=>{this.saveChanges()})}),Xr(this,"deleteUrl",e=>{this.setState(t=>{for(var a=t.STARTUP_SESSION_URLS,n=0;n<a.length;n++)if(a[n].url===e.url){a.splice(n,1);break}return{STARTUP_SESSION_URLS:a}},()=>{this.saveChanges()})}),Xr(this,"useCurrentPages",()=>{x.a.tabs.query({windowType:"normal"},e=>{const t=e.filter(e=>!ks.p.isInternalPage(e)).map((e,t)=>({id:t+1,url:e.url||""}));this.setState({STARTUP_SESSION_URLS:t}),this.saveChanges()})})}UNSAFE_componentWillMount(){var e=Xe.a.get(l.kURLsToRestoreOnStartup).map((e,t)=>({url:e,id:t}));this.setState({STARTUP_SESSION_URLS:e})}render(){var e=this.state.STARTUP_SESSION_URLS.map(e=>i.a.createElement(Yr,{urlItem:e,key:e.id,onDelete:this.deleteUrl.bind(this,e),onSave:this.save,filter:this.props.filter,__source:{fileName:$r,lineNumber:154,columnNumber:9}}));return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:$r,lineNumber:164,columnNumber:7}},i.a.createElement("div",{className:"setting-group setting-startup-specific-pages",__source:{fileName:$r,lineNumber:165,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:$r,lineNumber:166,columnNumber:11}},Object(o.a)("Startup Pages")),e,i.a.createElement("div",{className:"setting-flexgroup",__source:{fileName:$r,lineNumber:169,columnNumber:11}},i.a.createElement("input",{type:"text",className:"setting-single-flex",ref:"createUrlField",value:this.props.url,onChange:this.handleInputChange,placeholder:Object(o.a)("Enter page URL"),__source:{fileName:$r,lineNumber:170,columnNumber:13}}),i.a.createElement("input",{type:"button",className:"setting-single-noflex",onClick:this.addUrl,disabled:!this.state.hasUrlInInput,value:Object(o.a)("Add"),__source:{fileName:$r,lineNumber:177,columnNumber:13}})),i.a.createElement("input",{type:"button",onClick:this.useCurrentPages,value:Object(o.a)("Use Current Pages"),__source:{fileName:$r,lineNumber:184,columnNumber:11}}))))}}var Qr=Zr,qr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettings.jsx";function Jr(){return(Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function eo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const to=[l.kTabsAlwaysLoadPinnedAfterRestore,l.kTabsDeferLoadingAfterRestore],ao=r.a.getEventHandler;class no extends i.a.PureComponent{constructor(...e){super(...e),eo(this,"_isMounted",!1),eo(this,"state",{STARTUP_OPTIONS:"last"}),eo(this,"saveStartup",e=>{const t=e.target.value,a=Xe.a.get(l.kURLsToRestoreOnStartup);L.a.utilities.setStartupAction(t,a,e=>{this.setState({STARTUP_OPTIONS:e})})})}componentDidMount(){this._isMounted=!0,L.a.utilities.getStartupAction(e=>{this._isMounted&&this.setState({STARTUP_OPTIONS:e})})}componentWillUnmount(){this._isMounted=!1}render(){const e="urls"===this.state.STARTUP_OPTIONS?i.a.createElement(Qr,Jr({},this.props,{__source:{fileName:qr,lineNumber:68,columnNumber:7}})):null;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:qr,lineNumber:71,columnNumber:7}},i.a.createElement("span",{__source:{fileName:qr,lineNumber:72,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:qr,lineNumber:73,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:qr,lineNumber:74,columnNumber:13}},Object(o.a)("Startup with")),i.a.createElement(p.a,{name:"startupSettings",value:this.state.STARTUP_OPTIONS,onChange:this.saveStartup,__source:{fileName:qr,lineNumber:76,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:qr,lineNumber:79,columnNumber:15}},i.a.createElement("label",{__source:{fileName:qr,lineNumber:80,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"last",__source:{fileName:qr,lineNumber:81,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:82,columnNumber:19}},Object(o.a)("Last Session")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:qr,lineNumber:85,columnNumber:15}},i.a.createElement("label",{__source:{fileName:qr,lineNumber:86,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"homepage",__source:{fileName:qr,lineNumber:87,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:88,columnNumber:19}},Object(o.a)("radio","Homepage")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:qr,lineNumber:91,columnNumber:15}},i.a.createElement("label",{__source:{fileName:qr,lineNumber:92,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"speeddial",__source:{fileName:qr,lineNumber:93,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:94,columnNumber:19}},Object(o.a)("radio","Start Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:qr,lineNumber:97,columnNumber:15}},i.a.createElement("label",{__source:{fileName:qr,lineNumber:98,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"urls",__source:{fileName:qr,lineNumber:99,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:100,columnNumber:19}},Object(o.a)("Specific Pages"))))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:qr,lineNumber:106,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Wait to load restored session content until tab is activated."),__source:{fileName:qr,lineNumber:107,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsDeferLoadingAfterRestore],onChange:ao(l.kTabsDeferLoadingAfterRestore),__source:{fileName:qr,lineNumber:109,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:113,columnNumber:17}},Object(o.a)("Lazy Load Restored Tabs")))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:qr,lineNumber:117,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Load pinned tabs before they are activated."),__source:{fileName:qr,lineNumber:118,columnNumber:15}},i.a.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kTabsDeferLoadingAfterRestore],checked:this.props.prefValues[l.kTabsAlwaysLoadPinnedAfterRestore],onChange:ao(l.kTabsAlwaysLoadPinnedAfterRestore),__source:{fileName:qr,lineNumber:120,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:qr,lineNumber:127,columnNumber:17}},Object(o.a)("Always Load Pinned Tabs"))))),e)))}}var io=Object(v.a)(no,to),so="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupWelcome.jsx";const ro=[l.kWelcomeReadPages,l.kWelcomeSeenPages];class oo extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=()=>{r.a.set(l.kWelcomeReadPages,[]),r.a.set(l.kWelcomeSeenPages,[])},(a="resetSeen")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.props.prefValues[l.kWelcomeReadPages].length>0,t=this.props.prefValues[l.kWelcomeSeenPages].length>0;return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:so,lineNumber:36,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:so,lineNumber:37,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:so,lineNumber:38,columnNumber:11}},Object(o.a)("Welcome Page")),i.a.createElement("div",{className:"setting-single",__source:{fileName:so,lineNumber:40,columnNumber:11}},i.a.createElement("label",{__source:{fileName:so,lineNumber:41,columnNumber:13}},i.a.createElement("input",{type:"button",disabled:e+t===0,value:Object(o.a)("Reset Welcome Page"),onClick:this.resetSeen,__source:{fileName:so,lineNumber:42,columnNumber:15}})))))}}Object(v.a)(oo,ro);var lo=a(813),co="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettingsSection.jsx";function uo(){return(uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class mo extends n.Component{render(){return n.createElement(n.Fragment,null,n.createElement(C.a,{categoryTitle:Object(o.a)("Startup"),filter:this.props.filter,__source:{fileName:co,lineNumber:19,columnNumber:7}},n.createElement(lo.a,uo({},this.props,{__source:{fileName:co,lineNumber:22,columnNumber:9}})),n.createElement(Wr,uo({},this.props,{__source:{fileName:co,lineNumber:23,columnNumber:9}})),n.createElement(io,uo({},this.props,{__source:{fileName:co,lineNumber:24,columnNumber:9}})),!1),n.createElement(C.a,{key:"2",categoryTitle:Object(o.a)("title","Close and Exit"),filter:this.props.filter,__source:{fileName:co,lineNumber:27,columnNumber:7}},n.createElement(Rr,uo({},this.props,{__source:{fileName:co,lineNumber:33,columnNumber:9}})),n.createElement(Mr,uo({},this.props,{__source:{fileName:co,lineNumber:35,columnNumber:11}}))))}}var ho=mo,po=a(1311),bo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabActivation.jsx";const go=r.a.getEventHandler,No=[l.kTabsActivationOnClose,l.kTabsActivationPreferRelated,l.kTabsAlignNext,l.kTabsDoubleClickClose,l.kTabsFocusWebview,l.kTabsBarPosition,l.kTabsNeverCloseLast];class fo extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=()=>{const e=this.props.prefValues[l.kTabsBarPosition];return"top"===e||"bottom"===e},(a="isHorizontal")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{prefValues:e}=this.props;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:bo,lineNumber:44,columnNumber:7}},i.a.createElement("span",{__source:{fileName:bo,lineNumber:45,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:bo,lineNumber:46,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:47,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:bo,lineNumber:48,columnNumber:15}},Object(o.a)("Close Tab Activation")),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:50,columnNumber:15}},i.a.createElement("label",{title:Object(o.a)("Activate tabs related by origin first"),__source:{fileName:bo,lineNumber:51,columnNumber:17}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsActivationPreferRelated],onChange:go(l.kTabsActivationPreferRelated),__source:{fileName:bo,lineNumber:52,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:56,columnNumber:19}},Object(o.a)("Always Activate Related Tab")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:bo,lineNumber:60,columnNumber:15}},i.a.createElement(p.a,{name:"tabActivate",value:e[l.kTabsActivationOnClose],onChange:go(l.kTabsActivationOnClose),__source:{fileName:bo,lineNumber:61,columnNumber:17}},i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:66,columnNumber:19}},i.a.createElement("label",{__source:{fileName:bo,lineNumber:67,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"activation_order",__source:{fileName:bo,lineNumber:68,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:69,columnNumber:23}},Object(o.a)("Activate in Recently Used Order")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:73,columnNumber:19}},i.a.createElement("label",{__source:{fileName:bo,lineNumber:74,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"left",__source:{fileName:bo,lineNumber:75,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:76,columnNumber:23}},this.isHorizontal()?Object(o.a)("Activate Left in Tab Order"):Object(o.a)("Activate Above in Tab Order")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:82,columnNumber:19}},i.a.createElement("label",{__source:{fileName:bo,lineNumber:83,columnNumber:21}},i.a.createElement("input",{type:"radio",value:"right",__source:{fileName:bo,lineNumber:84,columnNumber:23}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:85,columnNumber:23}},this.isHorizontal()?Object(o.a)("Activate Right in Tab Order"):Object(o.a)("Activate Below in Tab Order")))))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:bo,lineNumber:95,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:bo,lineNumber:96,columnNumber:13}},Object(o.a)("Tab Handling")),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:97,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Align the close buttons to easily close multiple tabs"),__source:{fileName:bo,lineNumber:98,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsAlignNext],onChange:go(l.kTabsAlignNext),__source:{fileName:bo,lineNumber:100,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:104,columnNumber:17}},Object(o.a)("Align Next Close Button")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:108,columnNumber:13}},i.a.createElement("label",{__source:{fileName:bo,lineNumber:109,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsDoubleClickClose],onChange:go(l.kTabsDoubleClickClose),__source:{fileName:bo,lineNumber:110,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:114,columnNumber:17}},Object(o.a)("Close Tab on Double Click")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:118,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Prevents window closing along with last tab."),__source:{fileName:bo,lineNumber:119,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsNeverCloseLast],onChange:go(l.kTabsNeverCloseLast),__source:{fileName:bo,lineNumber:120,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:123,columnNumber:17}},Object(o.a)("Keep Window Open When Last Tab is Closed")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:bo,lineNumber:127,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Focus page content instead of addressfield"),__source:{fileName:bo,lineNumber:128,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsFocusWebview],onChange:go(l.kTabsFocusWebview),__source:{fileName:bo,lineNumber:129,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:bo,lineNumber:132,columnNumber:17}},Object(o.a)("Focus Page Content on New Tab"))))))))}}var _o=Object(v.a)(fo,No),vo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabCycling.jsx";const Eo=r.a.getEventHandler,Co=[l.kMouseWheelTabSwitch,l.kTabsCycleByRecentOrder,l.kTabsMinimize,l.kTabsVisualSwitchEnable,l.kTabsVisualSwitchListLayout];class wo extends i.a.Component{render(){const e=this.props.prefValues;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:vo,lineNumber:36,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:vo,lineNumber:37,columnNumber:9}},i.a.createElement("h3",{htmlFor:"tabSelection",__source:{fileName:vo,lineNumber:38,columnNumber:11}},Object(o.a)("Tab Cycling")),i.a.createElement(p.a,{name:"tabCyclingOrder",value:this.props.prefValues[l.kTabsCycleByRecentOrder],onChange:Eo(l.kTabsCycleByRecentOrder,"convert"),__source:{fileName:vo,lineNumber:40,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:vo,lineNumber:43,columnNumber:13}},i.a.createElement("label",{__source:{fileName:vo,lineNumber:44,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"true",__source:{fileName:vo,lineNumber:45,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:46,columnNumber:17}},Object(o.a)("Cycle in Recently Used Order")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:vo,lineNumber:49,columnNumber:13}},i.a.createElement("label",{__source:{fileName:vo,lineNumber:50,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"false",__source:{fileName:vo,lineNumber:51,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:52,columnNumber:17}},Object(o.a)("Cycle in Tab Order"))))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:vo,lineNumber:57,columnNumber:11}},i.a.createElement("label",{__source:{fileName:vo,lineNumber:58,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsVisualSwitchEnable],onChange:Eo(l.kTabsVisualSwitchEnable),__source:{fileName:vo,lineNumber:59,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:62,columnNumber:15}},Object(o.a)("Show Tab Cycler")))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:vo,lineNumber:66,columnNumber:11}},i.a.createElement("label",{__source:{fileName:vo,lineNumber:67,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsVisualSwitchListLayout],disabled:!this.props.prefValues[l.kTabsVisualSwitchEnable],onChange:Eo(l.kTabsVisualSwitchListLayout),__source:{fileName:vo,lineNumber:68,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:72,columnNumber:15}},Object(o.a)("Display Tab Cycler as List")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:vo,lineNumber:76,columnNumber:11}},i.a.createElement("label",{title:Object(o.a)("Scroll over Tab Bar to switch tabs by order, or scroll anywhere else while holding Alt key to switch tabs per Tab Cycling setting."),__source:{fileName:vo,lineNumber:77,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e[l.kMouseWheelTabSwitch],onChange:Eo(l.kMouseWheelTabSwitch),__source:{fileName:vo,lineNumber:80,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:83,columnNumber:15}},Object(o.a)("Switch Tabs by Scrolling")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:vo,lineNumber:87,columnNumber:11}},i.a.createElement("label",{__source:{fileName:vo,lineNumber:88,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsMinimize],onChange:Eo(l.kTabsMinimize),__source:{fileName:vo,lineNumber:89,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:vo,lineNumber:92,columnNumber:15}},Object(o.a)("Minimize Active Tab"))),i.a.createElement("p",{className:"info",__source:{fileName:vo,lineNumber:94,columnNumber:13}},Object(o.a)("Click current tab to switch to last active tab."))))))}}var Oo=Object(v.a)(wo,Co),yo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabMuting.jsx";const So=r.a.getEventHandler,To=[l.kTabsAutoMuting];class ko extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:yo,lineNumber:26,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:yo,lineNumber:27,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:yo,lineNumber:28,columnNumber:11}},Object(o.a)("Mute Tab Audio")),i.a.createElement(p.a,{name:"mutableTabs",value:this.props.prefValues[l.kTabsAutoMuting],onChange:So(l.kTabsAutoMuting),__source:{fileName:yo,lineNumber:29,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:yo,lineNumber:32,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yo,lineNumber:33,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"off",__source:{fileName:yo,lineNumber:34,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yo,lineNumber:35,columnNumber:17}},Object(o.a)("Play All Audio")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:yo,lineNumber:38,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yo,lineNumber:39,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"onlyActive",__source:{fileName:yo,lineNumber:40,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yo,lineNumber:41,columnNumber:17}},Object(o.a)("Play Only in Active Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:yo,lineNumber:44,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yo,lineNumber:45,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"prioritizeActive",__source:{fileName:yo,lineNumber:46,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yo,lineNumber:47,columnNumber:17}},Object(o.a)("Prioritize Active Tab")))))))}}var Ao=Object(v.a)(ko,To),Io="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOpen.jsx";const Do=r.a.getEventHandler,Mo=[l.kTabsActivationOnClone,l.kTabsNewPlacement,l.kTabsOpenNewInBackground];class Po extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Io,lineNumber:30,columnNumber:7}},i.a.createElement("span",{__source:{fileName:Io,lineNumber:31,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Io,lineNumber:32,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:33,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:Io,lineNumber:34,columnNumber:15}},Object(o.a)("New Tab Position")),i.a.createElement(p.a,{name:"tabOpen",value:this.props.prefValues[l.kTabsNewPlacement],onChange:Do(l.kTabsNewPlacement),__source:{fileName:Io,lineNumber:35,columnNumber:15}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:38,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:39,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:Io,lineNumber:40,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:41,columnNumber:21}},Object(o.a)("After Related Tabs")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:44,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:45,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"directrightofcurrent",__source:{fileName:Io,lineNumber:46,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:47,columnNumber:21}},Object(o.a)("After Active Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:50,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:51,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:Io,lineNumber:52,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:53,columnNumber:21}},Object(o.a)("As Last Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:56,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:57,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"openintabstackwithrelated",__source:{fileName:Io,lineNumber:58,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:59,columnNumber:21}},Object(o.a)("As Tab Stack with Related Tab"))))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Io,lineNumber:64,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:65,columnNumber:17}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsOpenNewInBackground],onChange:Do(l.kTabsOpenNewInBackground),__source:{fileName:Io,lineNumber:66,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:69,columnNumber:19}},Object(o.a)("New Tab from Link Opens in Background")))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Io,lineNumber:76,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:77,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:Io,lineNumber:78,columnNumber:15}},Object(o.a)("Cloned Tab Position")),i.a.createElement(p.a,{name:"tabClone",value:this.props.prefValues[l.kTabsActivationOnClone],onChange:Do(l.kTabsActivationOnClone),__source:{fileName:Io,lineNumber:79,columnNumber:15}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:82,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:83,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:Io,lineNumber:84,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:85,columnNumber:21}},Object(o.a)("Next to Original Tab")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Io,lineNumber:88,columnNumber:17}},i.a.createElement("label",{__source:{fileName:Io,lineNumber:89,columnNumber:19}},i.a.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:Io,lineNumber:90,columnNumber:21}}),i.a.createElement("span",{__source:{fileName:Io,lineNumber:91,columnNumber:21}},Object(o.a)("As Last Tab")))))))))}}var xo=Object(v.a)(Po,Mo),Lo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOptions.jsx";const jo=r.a.getEventHandler,Ro=[l.kTabsActiveMinSize,l.kTabsAtEdge,l.kTabsCloseButtonLeft,l.kTabsCloseButtonPermanent,l.kTabsCounterDetection,l.kTabsDimHibernated,l.kTabsPageLoadInfo,l.kTabsBarPosition,l.kTabsShowCloseButton,l.kTabsShowSeparator,l.kTabsThumbnails,l.kTabsTooltip,l.kTabsUnread];class Bo extends i.a.Component{render(){const{prefValues:e}=this.props;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Lo,lineNumber:56,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Lo,lineNumber:57,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:58,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Lo,lineNumber:59,columnNumber:13}},Object(o.a)("Tab Options")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:61,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:62,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsTooltip],onChange:jo(l.kTabsTooltip),__source:{fileName:Lo,lineNumber:63,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:66,columnNumber:17}},Object(o.a)("Show Popup Thumbnails")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:70,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:71,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsThumbnails],onChange:jo(l.kTabsThumbnails),__source:{fileName:Lo,lineNumber:72,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:75,columnNumber:17}},Object(o.a)("Show Tab Thumbnails")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:79,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:80,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsShowCloseButton],onChange:jo(l.kTabsShowCloseButton),__source:{fileName:Lo,lineNumber:81,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:84,columnNumber:17}},Object(o.a)("Display Close Button")))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Lo,lineNumber:88,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:89,columnNumber:15}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kTabsShowCloseButton],checked:e[l.kTabsCloseButtonLeft],onChange:jo(l.kTabsCloseButtonLeft),__source:{fileName:Lo,lineNumber:90,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:94,columnNumber:17}},Object(o.a)("On Left Side")))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Lo,lineNumber:98,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:99,columnNumber:15}},i.a.createElement("input",{type:"checkbox",disabled:!e[l.kTabsShowCloseButton],checked:e[l.kTabsCloseButtonPermanent],onChange:jo(l.kTabsCloseButtonPermanent),__source:{fileName:Lo,lineNumber:100,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:104,columnNumber:17}},Object(o.a)("Permanently")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:108,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:Lo,lineNumber:109,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsCounterDetection],onChange:jo(l.kTabsCounterDetection),__source:{fileName:Lo,lineNumber:110,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:113,columnNumber:17}},Object(o.a)("Detect Page Title Notifications")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:117,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:118,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsAtEdge],onChange:jo(l.kTabsAtEdge),disabled:"left"===e[l.kTabsBarPosition]||"right"===e[l.kTabsBarPosition],__source:{fileName:Lo,lineNumber:119,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:125,columnNumber:17}},Object(o.a)("Remove Tab Spacing in Maximized Windows")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:133,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Display a triangle symbol for unread Tabs"),__source:{fileName:Lo,lineNumber:134,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsUnread],onChange:jo(l.kTabsUnread),__source:{fileName:Lo,lineNumber:135,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:138,columnNumber:17}},Object(o.a)("Use Unread Indicators"))),i.a.createElement("div",{className:e[l.kTabsUnread]?"img-setting":"img-setting disabled",__source:{fileName:Lo,lineNumber:140,columnNumber:15}},i.a.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:a(1677)},__source:{fileName:Lo,lineNumber:142,columnNumber:17}}))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:150,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:151,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsDimHibernated],onChange:jo(l.kTabsDimHibernated),__source:{fileName:Lo,lineNumber:152,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:155,columnNumber:17}},Object(o.a)("Dim Icon when Hibernated")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:159,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Lo,lineNumber:160,columnNumber:15}},i.a.createElement("input",{type:"checkbox",disabled:"top"===e[l.kTabsBarPosition]||"bottom"===e[l.kTabsBarPosition],checked:e[l.kTabsShowSeparator],onChange:jo(l.kTabsShowSeparator),__source:{fileName:Lo,lineNumber:161,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:167,columnNumber:17}},Object(o.a)("Show Separator Below Pinned Tabs")))))),i.a.createElement("div",{className:"setting-group tab-min-width",__source:{fileName:Lo,lineNumber:173,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Lo,lineNumber:174,columnNumber:11}},Object(o.a)("Active Tab Minimum Width")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:175,columnNumber:11}},i.a.createElement("label",{title:Object(o.a)("Minimum width of horizontally scaled active tab"),__source:{fileName:Lo,lineNumber:176,columnNumber:13}},i.a.createElement("input",{type:"range",value:e[l.kTabsActiveMinSize],min:30,max:180,step:30,onChange:jo(l.kTabsActiveMinSize),__source:{fileName:Lo,lineNumber:178,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:185,columnNumber:15}},Object(o.a)("$1 pixel","$1 pixels",[parseInt(e[l.kTabsActiveMinSize])]))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:Lo,lineNumber:190,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Lo,lineNumber:191,columnNumber:11}},Object(o.a)("Page Load Progress")),i.a.createElement(p.a,{name:"tabPageLoadInfo",value:this.props.prefValues[l.kTabsPageLoadInfo],onChange:jo(l.kTabsPageLoadInfo),__source:{fileName:Lo,lineNumber:192,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:195,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Display tab progress bar while page is loading"),__source:{fileName:Lo,lineNumber:196,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"progress_bar",__source:{fileName:Lo,lineNumber:197,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:198,columnNumber:17}},Object(o.a)("Progress Bar")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:201,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Display circular progress in place of favicon while page is loading"),__source:{fileName:Lo,lineNumber:202,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"progress_icon",__source:{fileName:Lo,lineNumber:203,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:204,columnNumber:17}},Object(o.a)("Favicon Progress")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:207,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Display spinner in place of favicon while page is loading"),__source:{fileName:Lo,lineNumber:208,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"spinner",__source:{fileName:Lo,lineNumber:209,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:210,columnNumber:17}},Object(o.a)("Favicon Spinner")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Lo,lineNumber:213,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Don’t display page loading progress"),__source:{fileName:Lo,lineNumber:214,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"none",__source:{fileName:Lo,lineNumber:215,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Lo,lineNumber:216,columnNumber:17}},Object(o.a)("radio","None"))))))))}}var Fo=Object(v.a)(Bo,Ro),Uo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPage.jsx";function Ho(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Vo=r.a.getEventHandler,Wo=[l.kExtensionURLOverrides,l.kTabsNewPageLink];class zo extends i.a.Component{constructor(...e){super(...e),Ho(this,"state",{customUrl:Xe.a.get(l.kTabsNewPageCustomUrl)}),Ho(this,"_handleCustomUrlChange",({currentTarget:e})=>{const t=e.value;this.setState({customUrl:t}),this._saveCustomUrl(t)}),Ho(this,"_saveCustomUrl",e=>{const t=Object(Ct.c)(e);r.a.set(l.kTabsNewPageCustomUrl,t),this.props.prefValues[l.kTabsNewPageLink]!==Br.l.CUSTOM&&r.a.set(l.kTabsNewPageLink,Br.l.CUSTOM)}),Ho(this,"focusCustomUrlInput",()=>{this._customPageRef&&this._customPageRef.focus()})}render(){var e;const t=this.props.prefValues,a=null===(e=t[l.kExtensionURLOverrides].newtab)||void 0===e?void 0:e.some(e=>e.active),n=t[l.kTabsNewPageLink]===Br.l.EXTENSION;return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Uo,lineNumber:68,columnNumber:7}},i.a.createElement("div",{className:"setting-group new-tab-page",__source:{fileName:Uo,lineNumber:69,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Uo,lineNumber:70,columnNumber:11}},Object(o.a)("title","New Tab Page")),i.a.createElement(p.a,{name:"tabPageSettings",value:t[l.kTabsNewPageLink],onChange:Vo(l.kTabsNewPageLink),__source:{fileName:Uo,lineNumber:71,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Uo,lineNumber:74,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Uo,lineNumber:75,columnNumber:15}},i.a.createElement("input",{type:"radio",value:Br.l.STARTPAGE,checked:t[l.kTabsNewPageLink]===Br.l.STARTPAGE||t[l.kTabsNewPageLink]===Br.l.EXTENSION,onChange:Vo(l.kTabsNewPageLink),__source:{fileName:Uo,lineNumber:76,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Uo,lineNumber:83,columnNumber:17}},Object(o.a)("noun","Start Page")))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Uo,lineNumber:86,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Allow installed third-party extensions to control the Start Page"),__source:{fileName:Uo,lineNumber:87,columnNumber:15}},i.a.createElement("input",{type:"checkbox",disabled:!a,checked:n,onChange:Vo(l.kTabsNewPageLink),value:n?Br.l.STARTPAGE:Br.l.EXTENSION,__source:{fileName:Uo,lineNumber:89,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Uo,lineNumber:97,columnNumber:17}},Object(o.a)("Controlled by Extension")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Uo,lineNumber:100,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Uo,lineNumber:101,columnNumber:15}},i.a.createElement("input",{type:"radio",value:Br.l.HOMEPAGE,__source:{fileName:Uo,lineNumber:102,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Uo,lineNumber:103,columnNumber:17}},Object(o.a)("other","Homepage")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Uo,lineNumber:106,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Uo,lineNumber:107,columnNumber:15}},i.a.createElement("input",{type:"radio",value:Br.l.BLANKPAGE,__source:{fileName:Uo,lineNumber:108,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Uo,lineNumber:109,columnNumber:17}},Object(o.a)("other","Blank Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Uo,lineNumber:112,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Uo,lineNumber:113,columnNumber:15}},i.a.createElement("input",{type:"radio",className:"pad-top",onMouseUp:this.focusCustomUrlInput,value:Br.l.CUSTOM,__source:{fileName:Uo,lineNumber:114,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Uo,lineNumber:118,columnNumber:17}},i.a.createElement("input",{type:"text",ref:e=>this._customPageRef=e,placeholder:Object(o.a)("Specific Page"),onChange:this._handleCustomUrlChange,value:this.state.customUrl,tabIndex:t[l.kTabsNewPageLink]===Br.l.CUSTOM?0:-1,__source:{fileName:Uo,lineNumber:119,columnNumber:19}})))))))}}var Go=Object(v.a)(zo,Wo),Ko="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPinning.jsx";const Yo=[l.kTabsClosePinned],$o=r.a.getEventHandler;class Xo extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Ko,lineNumber:26,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Ko,lineNumber:27,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:Ko,lineNumber:28,columnNumber:11}},Object(o.a)("Pinned Tabs")),i.a.createElement(p.a,{name:"closablePinnedTabs",value:this.props.prefValues[l.kTabsClosePinned],onChange:$o(l.kTabsClosePinned),__source:{fileName:Ko,lineNumber:29,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Ko,lineNumber:32,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ko,lineNumber:33,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"off",__source:{fileName:Ko,lineNumber:34,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Ko,lineNumber:35,columnNumber:17}},Object(o.a)("Don’t Close Pinned Tabs")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ko,lineNumber:38,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ko,lineNumber:39,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"bury",__source:{fileName:Ko,lineNumber:40,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Ko,lineNumber:41,columnNumber:17}},Object(o.a)("Minimize Instead of Close")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Ko,lineNumber:44,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Ko,lineNumber:45,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"on",__source:{fileName:Ko,lineNumber:46,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Ko,lineNumber:47,columnNumber:17}},Object(o.a)("Close as Other Tabs")))))))}}var Zo=Object(v.a)(Xo,Yo),Qo=a(523),qo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TabPositionPreview.jsx";function Jo(){return(Jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const el={top:Object(o.a)("Top"),right:Object(o.a)("Right"),bottom:Object(o.a)("Bottom"),left:Object(o.a)("Left")};class tl extends n.Component{render(){if(!this.props.position)return null;const e=this.props.position,t=el[this.props.position],a=vt()({selectbox:!0,"selectbox-selected":this.props.selected}),i=Object(Qo.a)(this.props,["position","vivaldiSettings"]);return n.createElement("button",Jo({className:a,title:t},i,{__source:{fileName:qo,lineNumber:36,columnNumber:7}}),n.createElement("div",{className:"selectbox-image",__source:{fileName:qo,lineNumber:41,columnNumber:9}},n.createElement("svg",{viewBox:"0 0 96 76",xmlns:"http://www.w3.org/2000/svg",className:"tab-preview",__source:{fileName:qo,lineNumber:42,columnNumber:11}},"top"===e&&n.createElement("g",{__source:{fileName:qo,lineNumber:46,columnNumber:15}},n.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:qo,lineNumber:47,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h96v12H0z",__source:{fileName:qo,lineNumber:48,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 2h30v8H33zM64 2h30v8H64z",__source:{fileName:qo,lineNumber:49,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:qo,lineNumber:50,columnNumber:17}})),"right"===e&&n.createElement("g",{__source:{fileName:qo,lineNumber:54,columnNumber:15}},n.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:qo,lineNumber:55,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorBgDark",d:"M62 0h34v76H62z",__source:{fileName:qo,lineNumber:56,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-non-active-tab",d:"M64 11h30v8H64zM64 20h30v8H64z",__source:{fileName:qo,lineNumber:57,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M64 2h30v8H64z",__source:{fileName:qo,lineNumber:58,columnNumber:17}})),"bottom"===e&&n.createElement("g",{__source:{fileName:qo,lineNumber:62,columnNumber:15}},n.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:qo,lineNumber:63,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 64h96v12H0z",__source:{fileName:qo,lineNumber:64,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 66h30v8H33zM64 66h30v8H64z",__source:{fileName:qo,lineNumber:65,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 66h30v8H2z",__source:{fileName:qo,lineNumber:66,columnNumber:17}})),"left"===e&&n.createElement("g",{__source:{fileName:qo,lineNumber:70,columnNumber:15}},n.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:qo,lineNumber:71,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h34v76H0z",__source:{fileName:qo,lineNumber:72,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-non-active-tab",d:"M2 11h30v8H2zM2 20h30v8H2z",__source:{fileName:qo,lineNumber:73,columnNumber:17}}),n.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:qo,lineNumber:74,columnNumber:17}}))),n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:qo,lineNumber:78,columnNumber:11}},n.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:qo,lineNumber:81,columnNumber:13}}))),n.createElement("div",{className:"selectbox-title",__source:{fileName:qo,lineNumber:85,columnNumber:9}},t))}}var al=tl,nl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPosition.jsx";const il=[l.kKeyboardTabToAll,l.kTabsBarPosition,l.kTabsVisible],sl=r.a.getEventHandler;class rl extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=e=>{r.a.set(l.kTabsBarPosition,e)},(a="setTabPosition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.props.prefValues,t=e[l.kTabsBarPosition];return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:nl,lineNumber:43,columnNumber:7}},i.a.createElement("div",{style:{display:"inline"},__source:{fileName:nl,lineNumber:44,columnNumber:9}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:nl,lineNumber:45,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:nl,lineNumber:46,columnNumber:13}},i.a.createElement("label",{__source:{fileName:nl,lineNumber:47,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:e[l.kTabsVisible],onChange:sl(l.kTabsVisible),__source:{fileName:nl,lineNumber:48,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:nl,lineNumber:51,columnNumber:17}},Object(o.a)("radio","Show Tab Bar"))))),i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:nl,lineNumber:55,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:nl,lineNumber:56,columnNumber:13}},i.a.createElement("h3",{__source:{fileName:nl,lineNumber:57,columnNumber:15}},Object(o.a)("Tab Bar Position")),i.a.createElement(al,{position:"top",selected:"top"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"top"),__source:{fileName:nl,lineNumber:59,columnNumber:15}}),i.a.createElement(al,{position:"left",selected:"left"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"left"),__source:{fileName:nl,lineNumber:64,columnNumber:15}}),i.a.createElement(al,{position:"right",selected:"right"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"right"),__source:{fileName:nl,lineNumber:69,columnNumber:15}}),i.a.createElement(al,{position:"bottom",selected:"bottom"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"bottom"),__source:{fileName:nl,lineNumber:74,columnNumber:15}})))))}}var ol=Object(v.a)(rl,il),ll="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabSelection.jsx";const cl=r.a.getEventHandler,ul=[l.kTabsSelectionEnabled,l.kTabsSelectionIncludeActive];class ml extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:ll,lineNumber:27,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:ll,lineNumber:28,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:ll,lineNumber:29,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:ll,lineNumber:30,columnNumber:13}},Object(o.a)("Tab Selection")),i.a.createElement("div",{className:"setting-single",__source:{fileName:ll,lineNumber:32,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("Select multiple tabs with Ctrl and Shift"),__source:{fileName:ll,lineNumber:33,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsSelectionEnabled],onChange:cl(l.kTabsSelectionEnabled),__source:{fileName:ll,lineNumber:37,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:ll,lineNumber:41,columnNumber:17}},Object(o.a)("Enable Tab Selection")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:ll,lineNumber:45,columnNumber:13}},i.a.createElement("label",{title:Object(o.a)("The active tab will always be part of the initial tab selection"),__source:{fileName:ll,lineNumber:46,columnNumber:15}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsSelectionIncludeActive],onChange:cl(l.kTabsSelectionIncludeActive),__source:{fileName:ll,lineNumber:50,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:ll,lineNumber:54,columnNumber:17}},Object(o.a)("Include Active Tab in Initial Selection")))))))}}var dl=Object(v.a)(ml,ul),hl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabStacking.jsx";const pl=r.a.getEventHandler,bl=[l.kTabsStackingAllowDnd,l.kTabsStackingAutoExpand,l.kTabsStackingMode,l.kTabsStackingOpenInCurrent,l.kTabsBarWidth,l.kTabsBarPosition,l.kTabsStackingPreferDotted];class gl extends i.a.Component{render(){const{prefValues:e}=this.props;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:hl,lineNumber:39,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:hl,lineNumber:40,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:hl,lineNumber:41,columnNumber:11}},Object(o.a)("Tab Stacking")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hl,lineNumber:43,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:44,columnNumber:13}},i.a.createElement("input",{name:"tab-stack-style",type:"radio",value:"dotted",checked:"dotted"===e[l.kTabsStackingMode],onChange:pl(l.kTabsStackingMode),__source:{fileName:hl,lineNumber:45,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:52,columnNumber:15}},Object(o.a)("radio","Compact"))),i.a.createElement("div",{className:"dotted"===e[l.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hl,lineNumber:54,columnNumber:13}},i.a.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:a(1678)},__source:{fileName:hl,lineNumber:56,columnNumber:15}}))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:hl,lineNumber:64,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:65,columnNumber:13}},i.a.createElement("input",{name:"tab-stack-style",type:"radio",value:"substrip",checked:"substrip"===e[l.kTabsStackingMode],onChange:()=>{r.a.set(l.kTabsBarWidth,260),r.a.set(l.kTabsStackingMode,"substrip")},__source:{fileName:hl,lineNumber:66,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:74,columnNumber:15}},Object(o.a)("Two-Level"))),i.a.createElement("div",{className:"substrip"===e[l.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hl,lineNumber:76,columnNumber:13}},i.a.createElement("span",{className:e[l.kTabsStackingPreferDotted]?"image alternate":"image",dangerouslySetInnerHTML:{__html:a(1679)},__source:{fileName:hl,lineNumber:78,columnNumber:15}}))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:hl,lineNumber:86,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:87,columnNumber:13}},i.a.createElement("input",{type:"checkbox",disabled:"substrip"!==e[l.kTabsStackingMode],checked:e[l.kTabsStackingPreferDotted],onChange:pl(l.kTabsStackingPreferDotted),__source:{fileName:hl,lineNumber:88,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:94,columnNumber:15}},Object(o.a)("Use Compact Display Style")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:hl,lineNumber:97,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:98,columnNumber:13}},i.a.createElement("input",{name:"tab-stack-style",type:"radio",value:"accordion",checked:"accordion"===e[l.kTabsStackingMode],onChange:pl(l.kTabsStackingMode),__source:{fileName:hl,lineNumber:99,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:104,columnNumber:15}},Object(o.a)("Accordion"))),i.a.createElement("div",{className:"accordion"===e[l.kTabsStackingMode]?"img-setting":"img-setting disabled",__source:{fileName:hl,lineNumber:106,columnNumber:13}},i.a.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:a(1680)},__source:{fileName:hl,lineNumber:108,columnNumber:15}}))),i.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:hl,lineNumber:115,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:116,columnNumber:13}},i.a.createElement("input",{type:"checkbox",disabled:"accordion"!==e[l.kTabsStackingMode],checked:e[l.kTabsStackingAutoExpand],onChange:pl(l.kTabsStackingAutoExpand),__source:{fileName:hl,lineNumber:117,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:123,columnNumber:15}},Object(o.a)("Auto Expand")))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:hl,lineNumber:126,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:127,columnNumber:13}},i.a.createElement("input",{name:"tab-stack-style",type:"radio",value:"off",checked:"off"===e[l.kTabsStackingMode],onChange:pl(l.kTabsStackingMode),__source:{fileName:hl,lineNumber:128,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:133,columnNumber:15}},Object(o.a)("Disable"))))),i.a.createElement("div",{className:"setting-group",__source:{fileName:hl,lineNumber:137,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:hl,lineNumber:138,columnNumber:11}},Object(o.a)("Tab Stack Options")),i.a.createElement("div",{className:"setting-single",__source:{fileName:hl,lineNumber:140,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:141,columnNumber:13}},i.a.createElement("input",{type:"checkbox",disabled:"off"===e[l.kTabsStackingMode],checked:e[l.kTabsStackingOpenInCurrent],onChange:pl(l.kTabsStackingOpenInCurrent),__source:{fileName:hl,lineNumber:142,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:146,columnNumber:15}},Object(o.a)("Open Tabs in Current Tab Stack")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hl,lineNumber:150,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hl,lineNumber:151,columnNumber:13}},i.a.createElement("input",{type:"checkbox",disabled:"off"===e[l.kTabsStackingMode],checked:e[l.kTabsStackingAllowDnd],onChange:pl(l.kTabsStackingAllowDnd),__source:{fileName:hl,lineNumber:152,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hl,lineNumber:157,columnNumber:15}},Object(o.a)("Allow Stacking by Drag and Drop")))))))}}var Nl=Object(v.a)(gl,bl),fl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabsSettingSection.jsx";function _l(){return(_l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class vl extends n.Component{render(){return n.createElement("span",{__source:{fileName:fl,lineNumber:23,columnNumber:7}},n.createElement(C.a,{categoryTitle:Object(o.a)("Tabs"),filter:this.props.filter,__source:{fileName:fl,lineNumber:24,columnNumber:9}},n.createElement(ol,_l({},this.props,{__source:{fileName:fl,lineNumber:25,columnNumber:11}})),n.createElement(Go,_l({},this.props,{__source:{fileName:fl,lineNumber:26,columnNumber:11}})),n.createElement(xo,_l({},this.props,{__source:{fileName:fl,lineNumber:27,columnNumber:11}})),n.createElement(_o,_l({},this.props,{__source:{fileName:fl,lineNumber:28,columnNumber:11}}))),n.createElement(C.a,{categoryTitle:Object(o.a)("Tab Display"),filter:this.props.filter,__source:{fileName:fl,lineNumber:31,columnNumber:9}},n.createElement(Fo,_l({},this.props,{__source:{fileName:fl,lineNumber:32,columnNumber:11}}))),n.createElement(C.a,{categoryTitle:Object(o.a)("Tab Features"),filter:this.props.filter,__source:{fileName:fl,lineNumber:35,columnNumber:9}},n.createElement(Oo,_l({},this.props,{__source:{fileName:fl,lineNumber:36,columnNumber:11}})),n.createElement(dl,_l({},this.props,{__source:{fileName:fl,lineNumber:37,columnNumber:11}})),n.createElement(Nl,_l({},this.props,{__source:{fileName:fl,lineNumber:38,columnNumber:11}})),n.createElement(Zo,_l({},this.props,{__source:{fileName:fl,lineNumber:39,columnNumber:11}})),n.createElement(Ao,_l({},this.props,{__source:{fileName:fl,lineNumber:40,columnNumber:11}}))))}}var El=vl,Cl=a(45),wl=a.n(Cl),Ol=a(87),yl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeBackground.jsx";function Sl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Tl=[l.kSystemHasDesktopWallpaperProtocol,l.kThemeBackgroundData,l.kThemeBackgroundPosition,l.kThemeBackgroundUserColor,l.kThemeBackgroundUserImage],kl=r.a.getEventHandler,Al={"#EDEEF2":Object(o.a)("background","Light"),"#1D1E21":Object(o.a)("background","Dark"),"#BBDFEF":Object(o.a)("background","Blue"),"#fce370":Object(o.a)("background","Yellow"),"#a4edd9":Object(o.a)("background","Green"),"#ffb6c9":Object(o.a)("background","Pink"),"#A9C8B3":Object(o.a)("background","Soft Green"),"#BEB0CB":Object(o.a)("background","Purple"),"#EFE5DD":Object(o.a)("background","Sand"),"#FA7C68":Object(o.a)("background","Orange")},Il={"4-0-wallpaper-light.jpg":Object(o.a)("Blurred Circle Light"),"4-0-wallpaper-dark.jpg":Object(o.a)("Blurred Circle Dark"),"bg_3.8.light.webp":Object(o.a)("Thrust Light"),"bg_3.8.dark.webp":Object(o.a)("Thrust Dark"),"aurora_light.webp":Object(o.a)("Aurora Light"),"aurora_dark.jpg":Object(o.a)("Aurora Dark")},Dl={"bg_alt_4.webp":Object(o.a)("Beach"),"bg_alt_3.webp":Object(o.a)("Flowers"),"bg_water.webp":Object(o.a)("Water")},Ml={"bg_color_play.svg":Object(o.a)("Color Play"),"bg_spinning_light.svg":Object(o.a)("Spinning Light"),"bg_abstract_1_light.svg":Object(o.a)("Circles Light"),"bg_abstract_1.svg":Object(o.a)("Circles Dark"),"bg_abstract_blue_clouds.webp":Object(o.a)("Blue Clouds"),"bg_alt_7.jpg":Object(o.a)("Human"),"bg_alt_1.jpg":Object(o.a)("Pink Cloud"),"bg_alt_6.webp":Object(o.a)("Blueprint")},Pl={"bg_sweets_colorful_purple.svg":Object(o.a)("Sweets"),"bg_space.svg":Object(o.a)("Space"),"bg_sour.svg":Object(o.a)("Sour"),"bg_melons.svg":Object(o.a)("Melons"),"bg_leafs.svg":Object(o.a)("Leaves"),"bg_flowers.svg":Object(o.a)("Flowers")},xl={"bg_geometric_1.svg":Object(o.a)("Purple Rain"),"bg_geometric_6.svg":Object(o.a)("Red Wave"),"bg_geometric_4.svg":Object(o.a)("Tilted Light"),"bg_geometric_3.svg":Object(o.a)("Tilted Dark"),"bg_geometric_5.svg":Object(o.a)("Cubes"),"bg_geometric_8.svg":Object(o.a)("Speeding Lines"),"bg_geometric_2.svg":Object(o.a)("Blue Edge")},Ll={"bg_animals_bird_1.webp":Object(o.a)("Bird"),"bg_animals_cat_1.webp":Object(o.a)("Cat"),"bg_animals_dog_1.webp":Object(o.a)("Dog"),"bg_animals_fish_1.webp":Object(o.a)("Fish"),"bg_animals_lizard_1.webp":Object(o.a)("Lizard")},jl={...Al,...Il,...Dl,...Ml,...Pl,...xl,...Ll,"Custom Background Image":Object(o.a)("Custom Background Image"),"Custom Background Color":Object(o.a)("Custom Background Color")},Rl=[{key:"colors",name:Object(o.a)("Colors"),content:Al},{key:"vivaldi",name:Object(o.a)("Vivaldi"),content:Il},{key:"nature",name:Object(o.a)("Nature"),content:Dl},{key:"abstract",name:Object(o.a)("Abstract"),content:Ml},{key:"playful",name:Object(o.a)("Playful"),content:Pl},{key:"shapes",name:Object(o.a)("Shapes"),content:xl},{key:"animals",name:Object(o.a)("Animals"),content:Ll},{key:"custom",name:Object(o.a)("Custom")}];class Bl extends i.a.PureComponent{constructor(e){super(e),Sl(this,"initialListIndex",0),Sl(this,"setBackgroundImage",e=>{const t=[Ol.d,Ol.a].includes(e)?e:`../resources/${e}`;r.a.set(l.kThemeBackgroundData,t)}),Sl(this,"selectLocalBackgroundImage",e=>{L.a.utilities.selectLocalImage({title:Object(o.a)("Select Background Image"),preferencePath:l.kThemeBackgroundUserImage},()=>{this.setBackgroundImage(Ol.d)})}),Sl(this,"setBackgroundColor",e=>{r.a.set(l.kThemeBackgroundData,e)}),Sl(this,"setBackgroundColorCustom",e=>{r.a.set(l.kThemeBackgroundUserColor,e),r.a.set(l.kThemeBackgroundData,Ol.c)}),Sl(this,"handleColorClick",()=>{this.refs.bgColorPicker.click()}),Sl(this,"handleImageClick",()=>{this.refs.bgImagePicker.click()}),Sl(this,"toggleColorPicker",e=>{this.setState({isPickerVisible:e})}),Sl(this,"hideColorPicker",(e,t)=>{t.target!==this.refs.colorToggle&&(t.stopPropagation(),this.setState({isPickerVisible:!1}),this.refs.colorToggle.focus())}),Sl(this,"renderBackgroundListItem",(e,t)=>i.a.createElement("div",{className:"item-title",__source:{fileName:yl,lineNumber:261,columnNumber:7}},e)),Sl(this,"renderImageContent",(e,t)=>{const a=this.props.prefValues[l.kThemeBackgroundData];return(i.a.createElement(i.a.Fragment,null,Object.keys(e).map(e=>{const n=`../resources/${e}`;return(i.a.createElement("button",{key:e,title:t[e],className:vt()("selectbox",{"selectbox-selected":n===a}),onClick:()=>this.setBackgroundImage(e),__source:{fileName:yl,lineNumber:272,columnNumber:16}},i.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${n})`},dangerouslySetInnerHTML:{__html:dt.b},__source:{fileName:yl,lineNumber:280,columnNumber:11}}),i.a.createElement("div",{className:"selectbox-title",__source:{fileName:yl,lineNumber:284,columnNumber:11}},t[e])))})))}),Sl(this,"renderColorContent",(e,t)=>{const a=this.props.prefValues[l.kThemeBackgroundData],n=wl.a.valid(a)&&wl()(a).hex().toLowerCase();return i.a.createElement(i.a.Fragment,null,Object.keys(e).map(e=>i.a.createElement("button",{key:e,title:t[e],className:vt()("selectbox",{"selectbox-selected":n===e.toLowerCase()}),onClick:this.setBackgroundColor.bind(this,e),__source:{fileName:yl,lineNumber:297,columnNumber:9}},i.a.createElement("div",{className:"selectbox-image",style:{backgroundColor:e},dangerouslySetInnerHTML:{__html:dt.b},__source:{fileName:yl,lineNumber:305,columnNumber:11}}),i.a.createElement("div",{className:"selectbox-title",__source:{fileName:yl,lineNumber:309,columnNumber:11}},t[e]))))}),Sl(this,"renderCustomContent",e=>{const t=this.props.prefValues[l.kThemeBackgroundData],a=this.props.prefValues[l.kThemeBackgroundUserImage],n=this.props.prefValues[l.kThemeBackgroundUserColor];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:yl,lineNumber:324,columnNumber:5}},i.a.createElement("h3",{__source:{fileName:yl,lineNumber:326,columnNumber:7}},Object(o.a)("Custom Color")),i.a.createElement("button",{title:e["Custom Background Color"],className:vt()("selectbox",{"selectbox-selected":t===Ol.c}),onClick:()=>this.setBackgroundColorCustom(n),__source:{fileName:yl,lineNumber:327,columnNumber:7}},i.a.createElement("div",{className:"selectbox-image",style:{backgroundColor:n},dangerouslySetInnerHTML:{__html:dt.b},__source:{fileName:yl,lineNumber:334,columnNumber:9}})),i.a.createElement(Pa.a,{colorKey:"Background Color",colorValue:n,setColor:e=>this.setBackgroundColorCustom(e.hex()),onToggleColorPicker:this.toggleColorPicker,__source:{fileName:yl,lineNumber:340,columnNumber:7}})),i.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:yl,lineNumber:348,columnNumber:5}},i.a.createElement("h3",{__source:{fileName:yl,lineNumber:349,columnNumber:7}},Object(o.a)("Custom Image")),i.a.createElement("button",{title:e["Custom Background Image"],className:vt()("selectbox",{"selectbox-selected":t===Ol.d}),onClick:()=>this.setBackgroundImage(Ol.d),__source:{fileName:yl,lineNumber:350,columnNumber:7}},i.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${a})`},dangerouslySetInnerHTML:{__html:dt.b},__source:{fileName:yl,lineNumber:357,columnNumber:9}})),i.a.createElement("label",{__source:{fileName:yl,lineNumber:363,columnNumber:7}},i.a.createElement("input",{title:Object(o.a)("Locate an image to use as background"),value:Object(o.a)("Open Image..."),type:"button",onClick:this.handleImageClick,__source:{fileName:yl,lineNumber:364,columnNumber:9}}))),this.props.prefValues[l.kSystemHasDesktopWallpaperProtocol]&&i.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:yl,lineNumber:373,columnNumber:7}},i.a.createElement("h3",{__source:{fileName:yl,lineNumber:374,columnNumber:9}},Object(o.a)("Desktop Wallpaper")),i.a.createElement("button",{title:Object(o.a)("Use the operating system wallpaper as background"),className:vt()("selectbox",{"selectbox-selected":t===Ol.a}),onClick:()=>this.setBackgroundImage(Ol.a),__source:{fileName:yl,lineNumber:375,columnNumber:9}},i.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${Ol.b})`},dangerouslySetInnerHTML:{__html:dt.b},__source:{fileName:yl,lineNumber:382,columnNumber:11}}))))}),Sl(this,"renderBackgroundContent",(e,t)=>{const a=Rl[e],n=a&&a.content,s=a&&a.key;return n?"colors"===s?i.a.createElement("div",{className:"detail",__source:{fileName:yl,lineNumber:400,columnNumber:16}},i.a.createElement("div",{className:"detail-content",__source:{fileName:yl,lineNumber:401,columnNumber:11}},this.renderColorContent(n,t))):i.a.createElement("div",{className:"detail",__source:{fileName:yl,lineNumber:406,columnNumber:16}},i.a.createElement("div",{className:"detail-content",__source:{fileName:yl,lineNumber:407,columnNumber:11}},this.renderImageContent(n,t))):i.a.createElement("div",{className:"detail",__source:{fileName:yl,lineNumber:413,columnNumber:14}},i.a.createElement("div",{className:"detail-content",__source:{fileName:yl,lineNumber:414,columnNumber:9}},this.renderCustomContent(t)))});const t=e.prefValues[l.kThemeBackgroundData];if(wl.a.valid(t))this.initialListIndex=Rl.findIndex(e=>"colors"===e.key);else if([Ol.c,Ol.d,Ol.a].includes(t))this.initialListIndex=Rl.findIndex(e=>"custom"===e.key);else{const e=t.substr(13);this.initialListIndex=Rl.findIndex(t=>t.content&&Object.keys(t.content).includes(e))}this.state={isPickerVisible:!1}}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Background"),filter:this.props.filter,__source:{fileName:yl,lineNumber:423,columnNumber:7}},i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:yl,lineNumber:424,columnNumber:9}},i.a.createElement("div",{className:"settings-startpage settings-group unlimited",__source:{fileName:yl,lineNumber:425,columnNumber:11}},i.a.createElement(Qa.a,{style:{height:300},items:Rl.map(e=>({key:e.key,name:e.name})),className:this.state.isPickerVisible?"allowOverflow":void 0,masterLayout:1,initialSelectedIndex:this.initialListIndex,renderListItem:this.renderBackgroundListItem,renderContent:this.renderBackgroundContent,contentStrings:jl,filter:this.props.filter,__source:{fileName:yl,lineNumber:426,columnNumber:13}}),i.a.createElement("input",{title:Object(o.a)("Select File..."),ref:"bgImagePicker",style:{position:"absolute",visibility:"hidden"},onClick:this.selectLocalBackgroundImage.bind(this),__source:{fileName:yl,lineNumber:442,columnNumber:13}})),i.a.createElement("div",{className:"setting-group pad-top",__source:{fileName:yl,lineNumber:450,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:yl,lineNumber:451,columnNumber:11}},Object(o.a)("Image Position")),i.a.createElement(p.a,{name:"themeImagePositionGroup",value:this.props.prefValues[l.kThemeBackgroundPosition],onChange:kl(l.kThemeBackgroundPosition),__source:{fileName:yl,lineNumber:452,columnNumber:11}},i.a.createElement("div",{className:"setting-single",__source:{fileName:yl,lineNumber:457,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yl,lineNumber:458,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"stretched",__source:{fileName:yl,lineNumber:459,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yl,lineNumber:460,columnNumber:17}},Object(o.a)("Stretch to Fit")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:yl,lineNumber:463,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yl,lineNumber:464,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"repeating",__source:{fileName:yl,lineNumber:465,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yl,lineNumber:466,columnNumber:17}},Object(o.a)("verb","Repeat")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:yl,lineNumber:469,columnNumber:13}},i.a.createElement("label",{__source:{fileName:yl,lineNumber:470,columnNumber:15}},i.a.createElement("input",{type:"radio",value:"centered",__source:{fileName:yl,lineNumber:471,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:yl,lineNumber:472,columnNumber:17}},Object(o.a)("Center"))))))))}}var Fl=Object(v.a)(Bl,Tl),Ul=a(1317),Hl=a(298),Vl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeColorEditor.jsx";const Wl={baseBg:"BROWSER_COLOR_BG",baseFg:"BROWSER_COLOR_FG",highlightBg:"BROWSER_COLOR_HIGHLIGHT_BG",accentBg:"BROWSER_COLOR_ACCENT_BG"},zl={baseBg:Object(o.a)("Background"),baseFg:Object(o.a)("Foreground"),highlightBg:Object(o.a)("Highlight"),accentBg:Object(o.a)("Accent")};class Gl extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=(e,t,a=!1)=>{const n=e.hex(),i=Object(Hl.a)(this.props.vivaldiSettings.THEMES_USER),s=this.props.theme;for(let e=0;e<i.length;e++)i[e].name.toLowerCase()===s.name.toLowerCase()&&(i[e].colors[t]=n);ys.a.set({[Wl[t]]:n,THEMES_USER:i})},(a="setColor")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.props.colorKey;return(i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Vl,lineNumber:66,columnNumber:5}},i.a.createElement(Pa.a,{label:zl[e],colorKey:e,colorValue:this.props.color,setColor:this.setColor,__source:{fileName:Vl,lineNumber:67,columnNumber:7}})))}}var Kl=Object(_s.a)(Gl,["THEMES_USER"]),Yl="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeEditor.jsx";function $l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xl={baseBg:"BROWSER_COLOR_BG",baseFg:"BROWSER_COLOR_FG",highlightBg:"BROWSER_COLOR_HIGHLIGHT_BG",accentBg:"BROWSER_COLOR_ACCENT_BG"},Zl={accentFromPage:"USE_TABCOLOR",accentOnWindow:"TABCOLOR_BEHIND_TABS",borderRadius:"BORDER_RADIUS",tabsTransparent:"USE_TAB_TRANSPARENT_TABS"};class Ql extends i.a.Component{constructor(...e){super(...e),$l(this,"state",{baseBgShowPicker:!1,baseFgShowPicker:!1,highlightBgShowPicker:!1,accentBgShowPicker:!1}),$l(this,"saveThemeSetting",(e,t,a)=>{const n=Object(Hl.a)(this.props.vivaldiSettings.THEMES_USER),i=this.props.theme,s=a.target[t];for(let t=0;t<n.length;t++)n[t].name.toLowerCase()===i.name.toLowerCase()&&(n[t].settings[e]=s);ys.a.set({[Zl[e]]:s,THEMES_USER:n})}),$l(this,"renameTheme",e=>{const t=this.props.vivaldiSettings.THEMES_SYSTEM.concat(this.props.vivaldiSettings.THEMES_USER),a=Object(Hl.a)(this.props.vivaldiSettings.THEMES_USER),n=this.props.theme,i=e.target.value,s=Object(Hl.a)(Xe.a.get(l.kThemeScheduleTimeline));if(i.length<1)e.target.value=n.name;else{for(let a=0;a<t.length;a++)if(t[a].name.toLowerCase()===i.toLowerCase())return void(e.target.value=n.name);a.forEach((e,t)=>{a[t].name.toLowerCase()===n.name.toLowerCase()&&(Object.keys(s).map(e=>{s[e].themeName===n.name&&(s[e].themeName=i)}),a[t].name=i)}),r.a.set(l.kThemeScheduleTimeline,s),ys.a.set({THEMES_USER:a,THEME_CURRENT:i})}})}UNSAFE_componentWillReceiveProps(e){this.refs.themeNameInput&&this.props.theme&&this.props.theme.name&&e.theme&&e.theme.name&&e.theme.name!==this.props.theme.name&&(this.refs.themeNameInput.value=e.theme.name)}render(){const e=this.props.theme;if(!e)return null;const t=Number(e.settings.borderRadius);let a;return a=t<0?Object(o.a)("Disabled"):0===t?Object(o.a)("command","Default"):`${t}px`,i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Yl,lineNumber:148,columnNumber:5}},i.a.createElement("div",{className:"themes-edit",__source:{fileName:Yl,lineNumber:149,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited theme-metadata",__source:{fileName:Yl,lineNumber:151,columnNumber:9}},i.a.createElement("input",{className:"theme-name",type:"text",ref:"themeNameInput",onChange:this.renameTheme,defaultValue:e.name,__source:{fileName:Yl,lineNumber:152,columnNumber:11}})),i.a.createElement("div",{className:"setting-group unlimited theme-colors",__source:{fileName:Yl,lineNumber:160,columnNumber:9}},Object.keys(Xl).map(t=>{const a=e.colors[t];return(i.a.createElement(Kl,{key:e.name+"_"+t,colorKey:t,color:a,theme:e,filter:this.props.filter,__source:{fileName:Yl,lineNumber:164,columnNumber:15}}))})),i.a.createElement("div",{className:"setting-group unlimited theme-settings",__source:{fileName:Yl,lineNumber:175,columnNumber:9}},i.a.createElement("div",{className:"setting-group pad-top",__source:{fileName:Yl,lineNumber:177,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Yl,lineNumber:178,columnNumber:13}},Object(o.a)("Theme Preferences")),i.a.createElement("div",{className:"setting-single",__source:{fileName:Yl,lineNumber:179,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Yl,lineNumber:180,columnNumber:15}},i.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"accentFromPage","checked"),checked:e.settings.accentFromPage,__source:{fileName:Yl,lineNumber:181,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Yl,lineNumber:186,columnNumber:17}},Object(o.a)("Accent Color from Active Page")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Yl,lineNumber:190,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Yl,lineNumber:191,columnNumber:15}},i.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"accentOnWindow","checked"),checked:e.settings.accentOnWindow,__source:{fileName:Yl,lineNumber:192,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Yl,lineNumber:197,columnNumber:17}},Object(o.a)("Apply Accent Color to Window")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Yl,lineNumber:201,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Yl,lineNumber:202,columnNumber:15}},i.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"tabsTransparent","checked"),checked:e.settings.tabsTransparent,__source:{fileName:Yl,lineNumber:203,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Yl,lineNumber:208,columnNumber:17}},Object(o.a)("Transparent Tabs"))))),i.a.createElement("div",{className:"setting-group pad-top",__source:{fileName:Yl,lineNumber:213,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Yl,lineNumber:214,columnNumber:13}},Object(o.a)("Corner Rounding")),i.a.createElement("div",{className:"setting-single border-radius",__source:{fileName:Yl,lineNumber:215,columnNumber:13}},i.a.createElement("label",{__source:{fileName:Yl,lineNumber:216,columnNumber:15}},i.a.createElement("input",{type:"range",title:Object(o.a)("Adjust interface corner rounding"),min:-1,max:14,value:t,onChange:this.saveThemeSetting.bind(this,"borderRadius","value"),tabIndex:this.props.keyAccess,__source:{fileName:Yl,lineNumber:217,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:Yl,lineNumber:224,columnNumber:17}},a)))))))}}var ql=Object(_s.a)(Ql,["THEMES_SYSTEM","THEMES_USER"]),Jl=a(173),ec=a(261),tc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themes\\ThemePreview.jsx";function ac(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nc extends n.Component{constructor(...e){super(...e),ac(this,"_setTheme",()=>{Ol.e.setTheme(this.props.theme)}),ac(this,"_deleteTheme",()=>{this.props.deleteTheme&&!Ol.e.isSystemTheme(this.props.theme)&&this.props.deleteTheme(this.props.theme.name)}),ac(this,"_isSystemTheme",()=>Ol.e.isSystemTheme(this.props.theme)),ac(this,"handleKeyDown",e=>{e.keyCode!==zr.a.KEY_BACK_SPACE&&e.keyCode!==zr.a.KEY_DELETE||this._deleteTheme()}),ac(this,"onContextMenu",e=>{const t=[{visible:!this.props.iscurrent,handler:this._setTheme,...Object(lt.a)("Apply $1",[this.props.theme.name])},{visible:!this._isSystemTheme(),handler:this._deleteTheme,...Object(lt.a)("Delete $1",[this.props.theme.name])}];Object(ot.a)(this.context.vivaldiWindowId,t)(e)})}shouldComponentUpdate(e){return!Object(ec.default)(this.props,e)}componentDidMount(){this.updateStyleFrom(this.props.theme)}componentDidUpdate(e){Object(ec.default)(this.props.theme,e.theme)||this.updateStyleFrom(this.props.theme)}updateStyleFrom(e){const t=wl()(e.colors.baseFg),a=wl()(e.colors.baseBg),n=wl()(e.colors.highlightBg),i=wl()(e.colors.accentBg),s=Jl.d.all(t,a,n,i);Object.keys(s).forEach(e=>{if(this.refs.themePreview){const t=`--${e}`;this.refs.themePreview.style.removeProperty(t),this.refs.themePreview.style.setProperty(t,s[e])}})}render(){const e=this.props.theme.settings.accentOnWindow,t=e?"var(--colorAccentBg)":"var(--colorBg)",a=e?"var(--colorBg)":"var(--colorAccentBg)",i=e?"var(--colorAccentBgFaded)":"var(--colorBgLight)",s=vt()({selectbox:!0,"selectbox-selected":this.props.iscurrent});return n.createElement("button",{tabIndex:this.props.tabIndex?this.props.tabIndex:0,className:s,onKeyDown:this.handleKeyDown,onContextMenu:this.onContextMenu,onClick:this.props.iscurrent?null:this._setTheme,__source:{fileName:tc,lineNumber:113,columnNumber:7}},n.createElement("div",{className:"selectbox-image",__source:{fileName:tc,lineNumber:121,columnNumber:9}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-preview",ref:"themePreview",width:"96",height:"76",viewBox:"0 0 96 76",__source:{fileName:tc,lineNumber:122,columnNumber:11}},n.createElement("rect",{fill:"var(--colorBgDarker)",x:"0",y:"16",width:"96",height:"57",__source:{fileName:tc,lineNumber:128,columnNumber:13}}),n.createElement("rect",{fill:t,width:"96",height:"10",__source:{fileName:tc,lineNumber:129,columnNumber:13}}),n.createElement("path",{fill:a,d:"M0 10h96v6H0v-6zm0-6h30v6H0V4z",__source:{fileName:tc,lineNumber:130,columnNumber:13}}),n.createElement("rect",{fill:"var(--colorBgDark)",y:"16",width:"6",height:"57",__source:{fileName:tc,lineNumber:131,columnNumber:13}}),n.createElement("rect",{fill:"var(--colorBgLightIntense)",x:"6",y:"16",width:"18",height:"57",__source:{fileName:tc,lineNumber:132,columnNumber:13}}),n.createElement("rect",{fill:i,x:"31",y:"4",width:"30",height:"6",__source:{fileName:tc,lineNumber:133,columnNumber:13}}),n.createElement("rect",{fill:"var(--colorBg)",y:"73",width:"96",height:"3",__source:{fileName:tc,lineNumber:134,columnNumber:13}}),n.createElement("rect",{fill:"var(--colorFg)",x:"8",y:"69",width:"6",height:"2",__source:{fileName:tc,lineNumber:135,columnNumber:13}}),n.createElement("rect",{fill:"var(--colorHighlightBg)",x:"16",y:"69",width:"6",height:"2",__source:{fileName:tc,lineNumber:136,columnNumber:13}})),n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:tc,lineNumber:138,columnNumber:11}},n.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:tc,lineNumber:141,columnNumber:13}}))),n.createElement("div",{className:"selectbox-title",__source:{fileName:tc,lineNumber:145,columnNumber:9}},this.props.theme.name))}}ac(nc,"contextType",P.a);var ic=nc,sc=a(22),rc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\Themes.jsx";function oc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lc(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,cc(e,t,"set"),a),a}function cc(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var uc=new WeakMap;class mc extends i.a.PureComponent{constructor(...e){super(...e),uc.set(this,{writable:!0,value:void 0}),oc(this,"state",{editTheme:!1}),oc(this,"_addTheme",()=>{const e=Object(Hl.a)(this.props.vivaldiSettings.THEMES_USER),t=Object(o.a)("New Theme");let a=1;for(;this._isUserThemeNameInUse(`${t} ${a}`);)a+=1;const n=`${t} ${a}`;e.push({version:.1,name:n,colors:{baseBg:ys.a.getSync("BROWSER_COLOR_BG"),baseFg:ys.a.getSync("BROWSER_COLOR_FG"),highlightBg:ys.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),accentBg:ys.a.getSync("BROWSER_COLOR_ACCENT_BG")},settings:{accentOnWindow:ys.a.getSync("TABCOLOR_BEHIND_TABS"),accentFromPage:ys.a.getSync("USE_TABCOLOR"),tabsTransparent:ys.a.getSync("USE_TAB_TRANSPARENT_TABS"),borderRadius:ys.a.getSync("BORDER_RADIUS")}}),ys.a.set({THEMES_USER:e},()=>{const e=Ol.e.getTheme(n);var t;Ol.e.setTheme(e),function(e,t){return t.get?t.get.call(e):t.value}(t=this,cc(t,uc,"get"))&&!this.state.editTheme&&this.setState({editTheme:!0})})}),oc(this,"_deleteTheme",(e=this.props.vivaldiSettings.THEME_CURRENT)=>{const t=this.props.vivaldiSettings,a=t.THEMES_SYSTEM,n=Object(Hl.a)(t.THEMES_USER),i=Ol.e.getSchedules();for(let t=0;t<n.length;t++){let s=0;if(n[t].name===e){n.splice(t,1);for(let t=0;t<i.length;t++)i[t].undeletable||i[t].themeName.toLowerCase()!==e.toLowerCase()||i.splice(t,1);if(e===this.props.vivaldiSettings.THEME_CURRENT){n[t]?s=t:n[t-1]&&(s=t-1);const e=n.length>0?n[s]:a[a.length-1];r.a.set(l.kThemeScheduleTimeline,i),ys.a.set({THEME_CURRENT:e.name,THEMES_USER:n,BROWSER_COLOR_BG:e.colors.baseBg,BROWSER_COLOR_FG:e.colors.baseFg,BROWSER_COLOR_HIGHLIGHT_BG:e.colors.highlightBg,BROWSER_COLOR_ACCENT_BG:e.colors.accentBg,TABCOLOR_BEHIND_TABS:e.settings.accentOnWindow,USE_TABCOLOR:e.settings.accentFromPage,USE_TAB_TRANSPARENT_TABS:e.settings.tabsTransparent,BORDER_RADIUS:e.settings.borderRadius})}else r.a.set(l.kThemeScheduleTimeline,i),ys.a.set({THEMES_USER:n})}}}),oc(this,"_toggleEdit",()=>{this.setState(e=>({editTheme:!e.editTheme}))}),oc(this,"_isUserThemeNameInUse",e=>{const t=this.props.vivaldiSettings.THEMES_USER;for(let a=0;a<t.length;a++)if(t[a].name===e)return!0;return!1})}componentDidMount(){lc(this,uc,!0)}componentWillUnmount(){lc(this,uc,!1)}UNSAFE_componentWillReceiveProps(e){const t=e.vivaldiSettings.THEMES_SYSTEM,a=e.vivaldiSettings.THEME_CURRENT;for(let e=0;e<t.length;e++)t[e]&&t[e].name===a&&this.setState({editTheme:!1})}render(){const e=this.props.vivaldiSettings,t=[...e.THEMES_SYSTEM,...e.THEMES_USER],a=Ol.e.getTheme(ys.a.getSync("THEME_CURRENT")),n=Ol.e.isSystemTheme(a);return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Themes"),filter:this.props.filter,__source:{fileName:rc,lineNumber:197,columnNumber:7}},i.a.createElement("p",{className:"info",__source:{fileName:rc,lineNumber:198,columnNumber:9}},Object(o.a)("Select one of the pre-defined themes. You may change it to your\n            liking, or create a new theme using the tools below.")),i.a.createElement("div",{className:"setting-group unlimited pad-top",__source:{fileName:rc,lineNumber:203,columnNumber:9}},t.map(e=>i.a.createElement(ic,{filter:this.props.filter,key:e.name,theme:e,deleteTheme:this._deleteTheme,iscurrent:a.name===e.name,__source:{fileName:rc,lineNumber:206,columnNumber:15}})),i.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:rc,lineNumber:215,columnNumber:11}},i.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:rc,lineNumber:216,columnNumber:13}},i.a.createElement(sc.a,{tooltip:Object(o.a)("Add Theme"),onClick:this._addTheme,image:dt.h.medium,tabIndex:0,__source:{fileName:rc,lineNumber:217,columnNumber:15}}),i.a.createElement("hr",{__source:{fileName:rc,lineNumber:223,columnNumber:15}}),i.a.createElement(sc.a,{tooltip:Object(o.a)("Remove Theme"),disabled:n,onClick:this._deleteTheme.bind(this,void 0),image:dt.pd.medium,tabIndex:0,__source:{fileName:rc,lineNumber:224,columnNumber:15}})),i.a.createElement(sc.a,{title:Object(o.a)("Edit Theme"),isPressed:this.state.editTheme,onClick:n?this._addTheme:this._toggleEdit,image:dt.ib.medium,tabIndex:0,__source:{fileName:rc,lineNumber:232,columnNumber:13}})),this.state.editTheme&&i.a.createElement(ql,{theme:a,__source:{fileName:rc,lineNumber:243,columnNumber:13}})))}}var dc=Object(_s.a)(mc,["THEMES_SYSTEM","THEMES_USER","THEME_CURRENT"]),hc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesPlugins.jsx";const pc=[l.kPluginsAlwaysOpenPdfExternally,l.kPluginsWidevineEnabled],bc=r.a.getEventHandler;class gc extends i.a.Component{constructor(e){super(e)}render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Plugins"),filter:this.props.filter,__source:{fileName:hc,lineNumber:32,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:hc,lineNumber:33,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:hc,lineNumber:34,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hc,lineNumber:35,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:!this.props.prefValues[l.kPluginsAlwaysOpenPdfExternally],onChange:bc(l.kPluginsAlwaysOpenPdfExternally,"inverse"),__source:{fileName:hc,lineNumber:36,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hc,lineNumber:41,columnNumber:15}},Object(o.a)("Enable Internal PDF Viewer")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:hc,lineNumber:44,columnNumber:11}},i.a.createElement("label",{__source:{fileName:hc,lineNumber:45,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPluginsWidevineEnabled],onChange:bc(l.kPluginsWidevineEnabled),__source:{fileName:hc,lineNumber:46,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:hc,lineNumber:49,columnNumber:15}},Object(o.a)("Enable Widevine Plugin"))))))}}var Nc=Object(v.a)(gc,pc),fc=a(588),_c=a(134);function vc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ec extends i.a.PureComponent{constructor(...e){super(...e),vc(this,"state",{zoom:1}),vc(this,"rangeCheck",e=>Math.min(Math.max(e,_c.d),_c.c)),vc(this,"_onDefaultZoomChanged",e=>{this.setState({zoom:this.rangeCheck(e)})}),vc(this,"setZoomLevel",e=>{const t=this.rangeCheck(e);L.a.zoom.setDefaultZoom(t)})}componentDidMount(){L.a.zoom.onDefaultZoomChanged.addListener(this._onDefaultZoomChanged),L.a.zoom.getDefaultZoom(this._onDefaultZoomChanged)}componentWillUnmount(){L.a.zoom.onDefaultZoomChanged.removeListener(this._onDefaultZoomChanged)}render(){const{zoom:e}=this.state;return(i.a.createElement(fc.a,{zoom:e,defaultZoomLevel:_c.b,key:"zoomslider",scrolling:!0,inFooter:!1,maxLevel:_c.c,minLevel:_c.d,step:_c.e,disabled:!1,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\DefaultPageZoomIndicator.jsx",lineNumber:51,columnNumber:12}}))}}var Cc=Ec,wc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\DefaultGlobalZoom.jsx";function Oc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const yc=[l.kMouseWheelPageZoom,l.kWebpagesTabZoomEnabled],Sc=r.a.getEventHandler;class Tc extends i.a.Component{constructor(...e){super(...e),Oc(this,"state",{defaultGlobalZoom:1}),Oc(this,"updateLocalState",e=>{this.setState({defaultGlobalZoom:e})}),Oc(this,"handleZoomUpdated",e=>{L.a.zoom.setDefaultZoom(e)})}UNSAFE_componentWillMount(){L.a.zoom.getDefaultZoom(e=>{this.setState({defaultGlobalZoom:e})}),L.a.zoom.onDefaultZoomChanged.addListener(this.updateLocalState)}componentWillUnmount(){L.a.zoom.onDefaultZoomChanged.removeListener(this.updateLocalState)}render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:wc,lineNumber:61,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:wc,lineNumber:62,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:wc,lineNumber:63,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:wc,lineNumber:64,columnNumber:13}},Object(o.a)("Default Webpage Zoom")),i.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:wc,lineNumber:65,columnNumber:13}},i.a.createElement(Cc,{__source:{fileName:wc,lineNumber:66,columnNumber:15}}))),i.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:wc,lineNumber:69,columnNumber:11}},i.a.createElement("label",{__source:{fileName:wc,lineNumber:70,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMouseWheelPageZoom],onChange:Sc(l.kMouseWheelPageZoom),__source:{fileName:wc,lineNumber:71,columnNumber:17}}),i.a.createElement("span",{__source:{fileName:wc,lineNumber:74,columnNumber:17}},Object(o.a)("Use $1+Scroll to Zoom Page",["Ctrl"])))),i.a.createElement("div",{className:"setting-single",__source:{fileName:wc,lineNumber:78,columnNumber:11}},i.a.createElement("label",{__source:{fileName:wc,lineNumber:79,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesTabZoomEnabled],onChange:Sc(l.kWebpagesTabZoomEnabled),__source:{fileName:wc,lineNumber:80,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:wc,lineNumber:83,columnNumber:15}},Object(o.a)("Use Tab Zoom"))),i.a.createElement("p",{className:"info",__source:{fileName:wc,lineNumber:85,columnNumber:13}},Object(o.a)("Retain zoom level when navigating between websites")))))}}var kc=Object(v.a)(Tc,yc),Ac="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fullscreen.jsx";const Ic=[l.kWebpagesFullScreenShowBubble];Ic.push(l.kWebpagesFullScreenHideMouse);const Dc=r.a.getEventHandler;class Mc extends i.a.Component{render(){const e=i.a.createElement("div",{className:"setting-single",__source:{fileName:Ac,lineNumber:31,columnNumber:5}},i.a.createElement("label",{__source:{fileName:Ac,lineNumber:32,columnNumber:7}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesFullScreenShowBubble],onChange:Dc(l.kWebpagesFullScreenShowBubble),__source:{fileName:Ac,lineNumber:33,columnNumber:9}}),i.a.createElement("span",{__source:{fileName:Ac,lineNumber:37,columnNumber:9}},Object(o.a)("Show Fullscreen Reminder")))),t=i.a.createElement("div",{className:"setting-single",__source:{fileName:Ac,lineNumber:44,columnNumber:7}},i.a.createElement("label",{__source:{fileName:Ac,lineNumber:45,columnNumber:9}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesFullScreenHideMouse],onChange:Dc(l.kWebpagesFullScreenHideMouse),__source:{fileName:Ac,lineNumber:46,columnNumber:11}}),i.a.createElement("span",{__source:{fileName:Ac,lineNumber:50,columnNumber:9}},Object(o.a)("Hide the Mouse Cursor for Page-initiated Fullscreen"))));return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Ac,lineNumber:56,columnNumber:7}},i.a.createElement("span",{__source:{fileName:Ac,lineNumber:57,columnNumber:9}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Ac,lineNumber:58,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Ac,lineNumber:59,columnNumber:13}},Object(o.a)("Fullscreen Mode")),e,t)))}}var Pc=Object(v.a)(Mc,Ic),xc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\GlobalPermissions.jsx";function Lc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jc={sound:Object(o.a)("Sound"),notifications:Object(o.a)("Notifications"),location:Object(o.a)("Geolocation"),"media-stream-camera":Object(o.a)("Camera"),"media-stream-mic":Object(o.a)("Microphone"),sensors:Object(o.a)("Motion Sensors"),"bluetooth-scanning":Object(o.a)("Bluetooth Devices"),"midi-sysex":Object(o.a)("MIDI Devices"),popups:Object(o.a)("Popups")},Rc=["sensors","sound","popups"];class Bc extends i.a.PureComponent{constructor(...e){super(...e),Lc(this,"initPermissionState",()=>{Object.keys(jc).forEach(e=>{L.a.utilities.getDefaultContentSettings(e,t=>{this.setState({[e]:t})})})}),Lc(this,"changePermission",e=>{const{name:t,value:a}=e.target;L.a.utilities.setDefaultContentSettings(t,a,()=>this.setState({[t]:a}))}),Lc(this,"resetToDefaults",()=>{Object.keys(jc).forEach(e=>{L.a.utilities.setDefaultContentSettings(e,"default",ht.default)}),this.initPermissionState()})}componentDidMount(){this.initPermissionState()}render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:xc,lineNumber:72,columnNumber:7}},i.a.createElement("div",{className:"setting-group global-permissions",__source:{fileName:xc,lineNumber:73,columnNumber:9}},i.a.createElement("h3",{__source:{fileName:xc,lineNumber:74,columnNumber:11}},Object(o.a)("Default Permissions")),i.a.createElement("p",{className:"info",__source:{fileName:xc,lineNumber:75,columnNumber:11}},Object(o.a)("Certain website permissions can be controlled globally.")),i.a.createElement("div",{className:"setting-single",__source:{fileName:xc,lineNumber:76,columnNumber:11}},this.state&&Object.keys(this.state).map(e=>i.a.createElement("label",{key:e,__source:{fileName:xc,lineNumber:79,columnNumber:17}},i.a.createElement("span",{__source:{fileName:xc,lineNumber:80,columnNumber:19}},jc[e]),i.a.createElement("select",{value:this.state[e],onChange:this.changePermission,name:e,__source:{fileName:xc,lineNumber:81,columnNumber:19}},i.a.createElement("option",{value:"allow",__source:{fileName:xc,lineNumber:85,columnNumber:21}},Object(o.a)("other","Allow")),!Rc.includes(e)&&i.a.createElement("option",{value:"ask",__source:{fileName:xc,lineNumber:87,columnNumber:23}},Object(o.a)("Ask")),i.a.createElement("option",{value:"block",__source:{fileName:xc,lineNumber:89,columnNumber:21}},Object(o.a)("Block")))))),i.a.createElement("div",{className:"setting-single",__source:{fileName:xc,lineNumber:95,columnNumber:11}},i.a.createElement("input",{type:"button",value:Object(o.a)("Reset to Defaults"),onClick:this.resetToDefaults,__source:{fileName:xc,lineNumber:96,columnNumber:13}}))))}}var Fc=Bc,Uc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\HardwareAcceleration.jsx";const Hc=[l.kHardwareAccelerationModeEnabled],Vc=r.a.getEventHandler;class Wc extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Uc,lineNumber:26,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Uc,lineNumber:27,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Uc,lineNumber:28,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Uc,lineNumber:29,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kHardwareAccelerationModeEnabled],onChange:Vc(l.kHardwareAccelerationModeEnabled),__source:{fileName:Uc,lineNumber:30,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Uc,lineNumber:34,columnNumber:15}},Object(o.a)("Use Hardware Acceleration When Available"))),i.a.createElement("p",{className:"info",__source:{fileName:Uc,lineNumber:36,columnNumber:13}},Object(o.a)("This setting requires a restart to take full effect.")))))}}var zc=Object(v.a)(Wc,Hc),Gc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageAnimation.jsx";function Kc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Yc extends i.a.Component{constructor(...e){super(...e),Kc(this,"state",{animationPolicy:"allowed"}),Kc(this,"_onAnimationPolicyChanged",()=>{x.a.accessibilityFeatures.animationPolicy.get({},({value:e})=>{this.setState({animationPolicy:e})})}),Kc(this,"onSelected",e=>{const t=e.target.value;this.setState({animationPolicy:t},()=>{x.a.accessibilityFeatures.animationPolicy.set({value:t})})})}componentDidMount(){x.a.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){x.a.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Gc,lineNumber:55,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Gc,lineNumber:56,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Gc,lineNumber:57,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Gc,lineNumber:58,columnNumber:13}},Object(o.a)("Play Image Animation")),i.a.createElement(p.a,{name:"animationPolicy",value:this.state.animationPolicy,onChange:this.onSelected,__source:{fileName:Gc,lineNumber:59,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Gc,lineNumber:63,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Gc,lineNumber:64,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"allowed",__source:{fileName:Gc,lineNumber:65,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Gc,lineNumber:66,columnNumber:19}},Object(o.a)("command","Loop")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Gc,lineNumber:69,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Gc,lineNumber:70,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"once",__source:{fileName:Gc,lineNumber:71,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Gc,lineNumber:72,columnNumber:19}},Object(o.a)("Once")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Gc,lineNumber:75,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Gc,lineNumber:76,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"none",__source:{fileName:Gc,lineNumber:77,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Gc,lineNumber:78,columnNumber:19}},Object(o.a)("radio","Never"))))))))}}var $c=Yc,Xc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageLoading.jsx";function Zc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qc extends i.a.Component{constructor(...e){super(...e),Zc(this,"state",{imageLoading:"always"}),Zc(this,"_initState",()=>{const e=Xe.a.get(l.kPageImageLoading);e&&this.setState({imageLoading:e})}),Zc(this,"_onSettingsChanged",(e,t)=>{this.setState({imageLoading:t})}),Zc(this,"onSelected",e=>{const t=e.currentTarget.value;this.setState({imageLoading:t},()=>{r.a.set(l.kPageImageLoading,t)})})}componentDidMount(){this._initState(),Xe.a.addListener(l.kPageImageLoading,this._onSettingsChanged)}componentWillUnmount(){Xe.a.removeListener(l.kPageImageLoading,this._onSettingsChanged)}render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Xc,lineNumber:58,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:Xc,lineNumber:59,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Xc,lineNumber:60,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:Xc,lineNumber:61,columnNumber:13}},Object(o.a)("page settings","Load Images")),i.a.createElement("p",{className:"info",__source:{fileName:Xc,lineNumber:62,columnNumber:13}},Object(o.a)("Image loading setting for new tabs. Tabs opened from links will not use this setting, but will inherit the setting from the parent tab.")),i.a.createElement(p.a,{name:"imageLoadingPolicy",value:this.state.imageLoading,onChange:this.onSelected,__source:{fileName:Xc,lineNumber:65,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Xc,lineNumber:69,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Xc,lineNumber:70,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"always",__source:{fileName:Xc,lineNumber:71,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Xc,lineNumber:72,columnNumber:19}},Object(o.a)("radio","Always")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Xc,lineNumber:75,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Xc,lineNumber:76,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"never",__source:{fileName:Xc,lineNumber:77,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Xc,lineNumber:78,columnNumber:19}},Object(o.a)("radio","Never")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:Xc,lineNumber:81,columnNumber:15}},i.a.createElement("label",{__source:{fileName:Xc,lineNumber:82,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"cache",__source:{fileName:Xc,lineNumber:83,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:Xc,lineNumber:84,columnNumber:19}},Object(o.a)("radio","Cached"))))))))}}var qc=Qc,Jc="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\PictureInPicture.jsx";const eu=[l.kWebpagesPictureInPictureButtonEnabled],tu=r.a.getEventHandler;class au extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:Jc,lineNumber:25,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Jc,lineNumber:26,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:Jc,lineNumber:27,columnNumber:11}},i.a.createElement("label",{__source:{fileName:Jc,lineNumber:28,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesPictureInPictureButtonEnabled],onChange:tu(l.kWebpagesPictureInPictureButtonEnabled),__source:{fileName:Jc,lineNumber:29,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:Jc,lineNumber:33,columnNumber:15}},Object(o.a)("Picture-in-Picture Button On Videos"))),i.a.createElement("p",{className:"info",__source:{fileName:Jc,lineNumber:35,columnNumber:13}},Object(o.a)("This setting requires a restart to take effect.")))))}}var nu=Object(v.a)(au,eu),iu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SelectTextInLink.jsx";const su=[l.kWebpagesAllowSelectionInLinks],ru=r.a.getEventHandler;class ou extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:iu,lineNumber:25,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:iu,lineNumber:26,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:iu,lineNumber:27,columnNumber:11}},i.a.createElement("label",{__source:{fileName:iu,lineNumber:28,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesAllowSelectionInLinks],onChange:ru(l.kWebpagesAllowSelectionInLinks),__source:{fileName:iu,lineNumber:29,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:iu,lineNumber:33,columnNumber:15}},Object(o.a)("Allow Text Selection in Links"))))))}}var lu=Object(v.a)(ou,su),cu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Smoothscrolling.jsx";const uu=[l.kWebpagesSmoothScrollingEnabled],mu=r.a.getEventHandler;class du extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:cu,lineNumber:25,columnNumber:7}},i.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:cu,lineNumber:26,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:cu,lineNumber:27,columnNumber:11}},i.a.createElement("label",{__source:{fileName:cu,lineNumber:28,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesSmoothScrollingEnabled],onChange:mu(l.kWebpagesSmoothScrollingEnabled),__source:{fileName:cu,lineNumber:29,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:cu,lineNumber:32,columnNumber:15}},Object(o.a)("Smooth Scrolling"))),i.a.createElement("p",{className:"info",__source:{fileName:cu,lineNumber:34,columnNumber:13}},Object(o.a)("This setting requires a restart to take full effect.")))))}}var hu=Object(v.a)(du,uu),pu="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SpatialNavigation.jsx";const bu=[l.kWebpagesSpatialNavigationEnabled],gu=r.a.getEventHandler;class Nu extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:pu,lineNumber:25,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:pu,lineNumber:26,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:pu,lineNumber:27,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:pu,lineNumber:28,columnNumber:13}},Object(o.a)("Spatial Navigation")),i.a.createElement("p",{className:"info",__source:{fileName:pu,lineNumber:29,columnNumber:13}},Object(o.a)("Navigate between links and elements by holding shift and pressing the arrow keys.")),i.a.createElement("label",{__source:{fileName:pu,lineNumber:32,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesSpatialNavigationEnabled],onChange:gu(l.kWebpagesSpatialNavigationEnabled),__source:{fileName:pu,lineNumber:33,columnNumber:15}}),i.a.createElement("span",{__source:{fileName:pu,lineNumber:36,columnNumber:15}},Object(o.a)("spatial navigation","Enabled"))))))}}var fu=Object(v.a)(Nu,bu),_u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\TabToFocus.jsx";const vu=r.a.getEventHandler,Eu=[l.kWebpagesTabFocusesLinks];class Cu extends i.a.Component{render(){return i.a.createElement(b.a,{filter:this.props.filter,__source:{fileName:_u,lineNumber:26,columnNumber:7}},i.a.createElement("div",{className:"setting-group",__source:{fileName:_u,lineNumber:27,columnNumber:9}},i.a.createElement("div",{className:"setting-single",__source:{fileName:_u,lineNumber:28,columnNumber:11}},i.a.createElement("h3",{__source:{fileName:_u,lineNumber:29,columnNumber:13}},Object(o.a)("Webpage Focus")),i.a.createElement("p",{className:"info",__source:{fileName:_u,lineNumber:30,columnNumber:13}},Object(o.a)("This setting takes effect in new tabs or windows only.")),i.a.createElement(p.a,{name:"tabToFocusSetting",className:"setting-single",value:this.props.prefValues[l.kWebpagesTabFocusesLinks],onChange:vu(l.kWebpagesTabFocusesLinks,"convert"),__source:{fileName:_u,lineNumber:33,columnNumber:13}},i.a.createElement("div",{className:"setting-single",__source:{fileName:_u,lineNumber:37,columnNumber:15}},i.a.createElement("label",{__source:{fileName:_u,lineNumber:38,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"false",__source:{fileName:_u,lineNumber:39,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:_u,lineNumber:40,columnNumber:19}},Object(o.a)("Focus Forms Only")))),i.a.createElement("div",{className:"setting-single",__source:{fileName:_u,lineNumber:43,columnNumber:15}},i.a.createElement("label",{className:"setting-single",__source:{fileName:_u,lineNumber:44,columnNumber:17}},i.a.createElement("input",{type:"radio",value:"true",__source:{fileName:_u,lineNumber:45,columnNumber:19}}),i.a.createElement("span",{__source:{fileName:_u,lineNumber:46,columnNumber:19}},Object(o.a)("Focus All Controls and Links"))))))))}}var wu=Object(v.a)(Cu,Eu),Ou="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesSettingSection.jsx";function yu(){return(yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Su extends i.a.Component{render(){return i.a.createElement(C.a,{categoryTitle:Object(o.a)("Webpages"),filter:this.props.filter,__source:{fileName:Ou,lineNumber:24,columnNumber:7}},i.a.createElement(hu,yu({},this.props,{__source:{fileName:Ou,lineNumber:25,columnNumber:9}})),i.a.createElement(zc,yu({},this.props,{__source:{fileName:Ou,lineNumber:26,columnNumber:9}})),i.a.createElement(nu,yu({},this.props,{__source:{fileName:Ou,lineNumber:27,columnNumber:9}})),i.a.createElement(lu,yu({},this.props,{__source:{fileName:Ou,lineNumber:28,columnNumber:9}})),i.a.createElement(wu,yu({},this.props,{__source:{fileName:Ou,lineNumber:29,columnNumber:9}})),i.a.createElement(fu,yu({},this.props,{__source:{fileName:Ou,lineNumber:30,columnNumber:9}})),i.a.createElement(Pc,yu({},this.props,{__source:{fileName:Ou,lineNumber:31,columnNumber:9}})),i.a.createElement(Fc,yu({},this.props,{__source:{fileName:Ou,lineNumber:32,columnNumber:9}})),i.a.createElement($c,yu({},this.props,{__source:{fileName:Ou,lineNumber:33,columnNumber:9}})),i.a.createElement(qc,yu({},this.props,{__source:{fileName:Ou,lineNumber:34,columnNumber:9}})),i.a.createElement(kc,yu({},this.props,{__source:{fileName:Ou,lineNumber:35,columnNumber:9}})))}}var Tu=Su,ku=a(708);a.d(t,"a",(function(){return Mu}));var Au="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\Settings.jsx";function Iu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Du=ks.p.settingCategories,Mu="http://example.com/?path=",Pu=[l.kMailIsTurnedOff];function xu(e){const t=Object(Ct.f)(e),a=t.query,n=a?"all":t.path,i=n&&n.split("/");let s;if(!a&&i&&i.length>0&&Du[i[0]]&&(s=Du[i[0]],i.length>1)){const e=i.join("_");s=Du[e]}return s||(a?Du.all:Du.general)}function Lu(){return n.createElement("div",{className:"guest-intro",__source:{fileName:Au,lineNumber:129,columnNumber:5}},n.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:Au,lineNumber:130,columnNumber:7}},n.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:Au,lineNumber:131,columnNumber:9}})),n.createElement("div",{className:"guest-intro-content",__source:{fileName:Au,lineNumber:133,columnNumber:7}},n.createElement("h1",{__source:{fileName:Au,lineNumber:134,columnNumber:9}},Object(o.a)("Settings Unavailable")),n.createElement("p",{__source:{fileName:Au,lineNumber:135,columnNumber:9}},Object(o.a)("Settings are not available in guest windows.")),n.createElement("p",{__source:{fileName:Au,lineNumber:138,columnNumber:9}},n.createElement("a",{tabIndex:0,href:ku.a,onClick:ku.c,__source:{fileName:Au,lineNumber:139,columnNumber:11}},Object(o.a)("Learn more about Guest Profiles")))))}class ju extends n.Component{constructor(...e){var t,a;super(...e),Iu(this,"refSidebar",n.createRef()),Iu(this,"refContent",n.createRef()),Iu(this,"state",{category:xu(this.props.url),filter:(t=this.props.url,(null===(a=Object(Ct.f)(t))||void 0===a?void 0:a.search)||""),showAccountSheet:!1}),Iu(this,"_onMainStoreChanged",({type:e})=>{"MAIN_SHOW_ACCOUNT_SHEET"===e&&this.setState({showAccountSheet:!0})}),Iu(this,"closeAccountSheet",()=>this.setState({showAccountSheet:!1})),Iu(this,"focusFilterInput",()=>{var e;return null===(e=this.refSidebar.current)||void 0===e?void 0:e.focus()}),Iu(this,"scrollToAnchor",e=>{const{HTMLElement:t}=this.context,a=function(e){const t=Object(Ct.f)(e);return t.scroll?t.scroll:""}(e);if(!a)return;const n=A.a.findDOMNode(this);if(!(n instanceof t))return;const i=n.querySelector(`[data-anchor='${a}']`);i&&i.scrollIntoView()}),Iu(this,"onMacMenuAction",(e,t,a)=>{this.context.vivaldiWindowId===e&&at.default.isActionWhitelistedForSettings(t)&&tt.default.executeActions(t)}),Iu(this,"getWindowTitle",()=>this.state.category?Object(o.a)("Vivaldi Settings: $1",[this.state.category.title]):Object(o.a)("Vivaldi Settings")),Iu(this,"show",e=>{const t=this.state.category&&this.state.category===Du.all,a=this.state.category&&this.state.category===e;return t||a}),Iu(this,"onSettingsFilterChange",e=>{this.setState({filter:e}),this.state.category!==Du.all&&this._setCategory("all")}),Iu(this,"setCategory",e=>{this.setState({filter:""}),this._setCategory(e)}),Iu(this,"scrollTop",()=>{this.refContent.current&&(this.refContent.current.scrollTop=0)}),Iu(this,"_setCategory",e=>{gr.a.isSettings(this.context.vivaldiWindowId)?this.setState({category:Du[e]}):Nn.a.openURL(ks.p.internalUrl("settings",e),{inCurrent:!0})})}static getDerivedStateFromProps(e,t){return e.url.startsWith(Mu)?null:{category:xu(e.url)}}componentDidMount(){const{document:e,vivaldiWindowId:t}=this.context;gr.a.isSettings(t)&&(e.title=this.getWindowTitle()),this.scrollToAnchor(this.props.url),this.focusFilterInput(),Mi.a.addChangeListener(this._onMainStoreChanged)}componentDidUpdate(e,t){const{document:a,vivaldiWindowId:n}=this.context;gr.a.isSettings(n)&&t.category!==this.state.category&&(a.title=this.getWindowTitle()),t.category!==this.state.category&&this.scrollTop()}componentWillUnmount(){Mi.a.removeChangeListener(this._onMainStoreChanged)}render(){if(gr.a.isGuestSession(this.context.vivaldiWindowId))return n.createElement(Lu,{__source:{fileName:Au,lineNumber:289,columnNumber:14}});const{filter:e}=this.state,t=e.length>=2?e:"",a=!this.props.prefValues[l.kMailIsTurnedOff];return n.createElement(qt.a,{focusName:"focus_settings",className:"vivaldi-settings",__source:{fileName:Au,lineNumber:303,columnNumber:7}},n.createElement("header",{className:"settings-header",__source:{fileName:Au,lineNumber:308,columnNumber:9}},n.createElement("h1",{__source:{fileName:Au,lineNumber:309,columnNumber:11}},this.getWindowTitle())),n.createElement(Cr,{focusRef:this.refSidebar,filter:this.state.filter,onFilterChange:this.onSettingsFilterChange,selectedCategory:this.state.category,onCategorySelected:this.setCategory,__source:{fileName:Au,lineNumber:312,columnNumber:9}}),gr.a.isSettings(this.context.vivaldiWindowId)&&gr.a.isActive(this.context.vivaldiWindowId)&&this.state.showAccountSheet&&n.createElement(st.a,{onRequestClose:this.closeAccountSheet,viewMode:"slide",__source:{fileName:Au,lineNumber:323,columnNumber:11}},n.createElement(s.a,{onClose:this.closeAccountSheet,__source:{fileName:Au,lineNumber:324,columnNumber:13}})),this.state.category&&n.createElement("div",{className:"settings-content",ref:this.refContent,__source:{fileName:Au,lineNumber:330,columnNumber:11}},this.show(Du.general)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:334,columnNumber:13}},n.createElement(ho,{filter:t,__source:{fileName:Au,lineNumber:335,columnNumber:15}})),this.show(Du.general)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:340,columnNumber:13}},n.createElement(q,{filter:t,__source:{fileName:Au,lineNumber:341,columnNumber:15}})),this.show(Du.general)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:345,columnNumber:13}},n.createElement(Aa,{filter:t,__source:{fileName:Au,lineNumber:346,columnNumber:15}})),this.show(Du.general)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:350,columnNumber:13}},n.createElement(Qt,{filter:t,__source:{fileName:Au,lineNumber:351,columnNumber:15}})),this.show(Du.appearance)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:355,columnNumber:13}},n.createElement(V,{filter:t,__source:{fileName:Au,lineNumber:356,columnNumber:15}})),this.show(Du.appearance)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:360,columnNumber:13}},n.createElement(qi,{filter:t,__source:{fileName:Au,lineNumber:361,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:365,columnNumber:13}},n.createElement(dc,{filter:t,__source:{fileName:Au,lineNumber:366,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:370,columnNumber:13}},n.createElement(Fl,{filter:t,__source:{fileName:Au,lineNumber:371,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:375,columnNumber:13}},n.createElement(et,{filter:t,__source:{fileName:Au,lineNumber:376,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:380,columnNumber:13}},n.createElement(ws,{filter:t,__source:{fileName:Au,lineNumber:381,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:385,columnNumber:13}},n.createElement(Ul.a,{filter:t,__source:{fileName:Au,lineNumber:386,columnNumber:15}})),this.show(Du.themes)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:390,columnNumber:13}},n.createElement(Zs,{filter:t,__source:{fileName:Au,lineNumber:391,columnNumber:15}}),n.createElement(ha,{filter:t,__source:{fileName:Au,lineNumber:392,columnNumber:15}})),this.show(Du.startpage)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:397,columnNumber:13}},n.createElement(Tr,{filter:t,__source:{fileName:Au,lineNumber:398,columnNumber:15}})),this.show(Du.tabs)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:403,columnNumber:13}},n.createElement(El,{filter:t,__source:{fileName:Au,lineNumber:404,columnNumber:15}})),this.show(Du.panel)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:409,columnNumber:13}},n.createElement(os,{filter:t,__source:{fileName:Au,lineNumber:410,columnNumber:15}})),this.show(Du.addressbar)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:415,columnNumber:13}},n.createElement(T,{filter:t,__source:{fileName:Au,lineNumber:416,columnNumber:15}})),this.show(Du.bookmarks)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:421,columnNumber:13}},n.createElement(ge,{filter:t,__source:{fileName:Au,lineNumber:422,columnNumber:15}}),n.createElement(ue,{filter:t,__source:{fileName:Au,lineNumber:423,columnNumber:15}})),this.show(Du.qc)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:427,columnNumber:13}},n.createElement(Ws,{filter:t,category:this.state.category,__source:{fileName:Au,lineNumber:428,columnNumber:15}})),this.show(Du.keyboard)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:433,columnNumber:13}},n.createElement(pa.a,{filter:t,view:"editable",__source:{fileName:Au,lineNumber:434,columnNumber:15}})),this.show(Du.mouse)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:438,columnNumber:13}},n.createElement(Ji.a,{filter:t,category:this.state.category,__source:{fileName:Au,lineNumber:439,columnNumber:15}})),this.show(Du.search)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:444,columnNumber:13}},n.createElement(br.a,{filter:t,__source:{fileName:Au,lineNumber:445,columnNumber:15}})),this.show(Du.privacy)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:449,columnNumber:13}},n.createElement(fs,{filter:t,__source:{fileName:Au,lineNumber:450,columnNumber:15}})),this.show(Du.privacy)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:454,columnNumber:13}},n.createElement(kt,{filter:t,__source:{fileName:Au,lineNumber:455,columnNumber:15}})),this.show(Du.privacy)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:459,columnNumber:13}},n.createElement(pr,{filter:t,__source:{fileName:Au,lineNumber:460,columnNumber:15}})),this.show(Du.privacy)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:464,columnNumber:13}},n.createElement(Ht,{filter:t,__source:{fileName:Au,lineNumber:465,columnNumber:15}})),this.show(Du.downloads)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:469,columnNumber:13}},n.createElement(Kt,{filter:t,__source:{fileName:Au,lineNumber:470,columnNumber:15}})),this.show(Du.sync)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:475,columnNumber:13}},n.createElement(po.a,{category:this.state.category,filter:t,__source:{fileName:Au,lineNumber:476,columnNumber:15}})),this.show(Du.webpages)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:483,columnNumber:13}},n.createElement(Tu,{filter:t,__source:{fileName:Au,lineNumber:484,columnNumber:15}})),this.show(Du.webpages)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:488,columnNumber:13}},n.createElement(Nc,{filter:t,__source:{fileName:Au,lineNumber:489,columnNumber:15}})),this.show(Du.webpages)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:493,columnNumber:13}},n.createElement(Qs.a,{prefs:!0,filter:t,__source:{fileName:Au,lineNumber:494,columnNumber:15}})),this.show(Du.webpages)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:498,columnNumber:13}},n.createElement(Ue,{filter:t,__source:{fileName:Au,lineNumber:499,columnNumber:15}})),this.show(Du.webpages)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:503,columnNumber:13}},n.createElement(oa,{filter:t,__source:{fileName:Au,lineNumber:504,columnNumber:15}})),this.show(Du.network)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:510,columnNumber:13}},n.createElement(as,{filter:t,__source:{fileName:Au,lineNumber:511,columnNumber:15}})),a&&this.show(Du.rss)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:516,columnNumber:13}},n.createElement(Un,{filter:t,__source:{fileName:Au,lineNumber:517,columnNumber:15}})),a&&this.show(Du.mail)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:522,columnNumber:13}},n.createElement(On,{filter:t,__source:{fileName:Au,lineNumber:523,columnNumber:15}})),a&&this.show(Du.calendar)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:528,columnNumber:13}},n.createElement(Ia.a,{filter:t,pageId:-1,__source:{fileName:Au,lineNumber:529,columnNumber:15}}),n.createElement(on,{filter:t,pageId:-1,__source:{fileName:Au,lineNumber:530,columnNumber:15}}),n.createElement(Ie,{filter:t,__source:{fileName:Au,lineNumber:531,columnNumber:15}})),!1,a&&this.show(Du.mail)&&n.createElement(n.Fragment,{__source:{fileName:Au,lineNumber:542,columnNumber:13}},n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:543,columnNumber:15}},n.createElement(bi,{filter:t,__source:{fileName:Au,lineNumber:544,columnNumber:17}})),n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:546,columnNumber:15}},n.createElement(Di,{filter:t,__source:{fileName:Au,lineNumber:547,columnNumber:17}})),n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:549,columnNumber:15}},n.createElement(ui,{filter:t,__source:{fileName:Au,lineNumber:550,columnNumber:17}}))),this.show(Du.biscuit)&&n.createElement("section",{className:"setting-section",__source:{fileName:Au,lineNumber:557,columnNumber:13}},n.createElement(ne,{filter:t,__source:{fileName:Au,lineNumber:558,columnNumber:15}}))))}}Iu(ju,"contextType",P.a);t.b=Object(v.a)(ju,Pu)},function(e,t,a){"use strict";var n=a(8),i=a(65),s=a(2),r=a(7);async function o(e){const{currentPosition:t,searchListIds:a}=e;if(!a)return void console.error(`Task ${e.taskName} should have searchListIds array`);if(0===a.length||t>=a.length)return;const o=a.length;let l=t;await async function t(){const c=a.slice(l,l+1e4);await function(e){return new Promise(t=>{try{r.a.mailPrivate.deleteMessages(e,e=>{e||console.warn("Failed to remove messages from FTS db"),t()})}catch(t){console.error(`Failed to remove messages: ${e.join()}`,t)}})}(c),await n.a.systemTasks.update(e.id,{currentPosition:l+c.length}),c.length>=1e4?(l+=1e4,i.a.setStatus(Object(s.a)("Remove deleted entries from search database: $1/$2",[l,o])),await t()):i.a.setStatus(Object(s.a)("Remove deleted entries from search database: $1/$2",[o,o]),3e3)}(),n.a.systemTasks.delete(e.id)}var l=a(29),c=a(6),u=a(446),m=a(427),d=a(495),h=a(440),p=a(494),b=a(768),g=a(216),N=a(428),f=a(1);async function _(){const e=await n.a.systemTasks.toArray();for(const t of e)await v(t)}async function v(e){"restore_full_text_search_db"===e.taskName?await async function(e){const t=await n.a.searchList.toCollection().primaryKeys();let a=t.indexOf(e.currentPosition);a<0&&(a=0);const r=t.length;if(r<1)return;i.a.setStatus(Object(s.a)("Building text-search database: $1/$2",[a,r]));let o=[];for(let _=a;_<t.length;_++){if(c.a.get(f.kMailIsTurnedOff)){i.a.setStatus(Object(s.a)("Mail client turned off - Stopped building text-search database"),3e3);break}a++;const v=t[_],E=await Object(d.a)(v);if(!E){console.error(`Message ${v} not found in searchList table`);continue}const C=await Object(m.a)(v);if(!C){console.error(`Message ${v} not found in messages table`);continue}const{subject:w,to:O,cc:y,from:S,replyTo:T}=C;let k="";for(const e of E.sourceFilterIds){const t=l.a.get(e);if(!t){console.error(`Filter not found for sourceFilterId ${e} and searcList entry ${v}`);continue}const{accountId:a}=t,n=await Object(p.a)(a,v,E.sentDate);if(n){const e=Object(g.b)(Object(g.g)(n));if(!e){console.warn("Message exists on disk but is empty",a,v);continue}const t=await h.a.parse(n,e.mimeTree),i=Object(N.a)(t.bodyParts);k&&k.trim()!==i.trim()?(console.warn(`Entry ${v} has more than one copy on disk and they don't agree`,k,i),i.length>k.length&&(k=i)):k=i}}o.push({searchListId:v,subject:w,body:k,to:Object(u.a)(O),cc:Object(u.a)(y),from:Object(u.a)(S),replyTo:Object(u.a)(T)}),(o.length>=20||a>=r)&&(await Object(b.a)(o),await n.a.systemTasks.update(e.id,{currentPosition:v}),i.a.setStatus(Object(s.a)("Building text-search database: $1/$2",[a,r])),o=[],a>=r&&n.a.systemTasks.delete(e.id))}}(e):"delete_full_text_search_entries"===e.taskName?await o(e):console.error("task not supported",e)}a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return v}))},,function(e,t,a){"use strict";var n=a(0),i=a(2),s=a(20),r=a.n(s),o=a(358),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniLinkItem.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.PureComponent{constructor(...e){super(...e),u(this,"domElement",n.createRef()),u(this,"handleMouseUp",e=>{1===e.button&&this.props.onMiddleClick()}),u(this,"handleDelete",e=>{this.props.onDelete&&(this.props.onDelete(),e.stopPropagation())})}componentDidUpdate(e){!e.isHighlighted&&this.props.isHighlighted&&this.domElement.current&&this.domElement.current.scrollIntoViewIfNeeded()}render(){const{displayText:e,index:t,isHighlighted:a,linkItem:s,onClick:u,onMouseOver:m,pattern:d,favicon:h}=this.props,p=r()({"omni-clickable":!0,OmniLinkItem:!0,"OmniLinkItem--Highlighted":a,"OmniLinkItem--SingleValue":!this.props.details});return n.createElement("div",{"data-index":t,"data-url":s.nickname||s.url||"",ref:this.domElement,className:p,onClick:u,onMouseUp:this.handleMouseUp,onMouseOver:m,__source:{fileName:c,lineNumber:72,columnNumber:7}},h&&n.createElement("div",{className:"OmniLinkItem-Favicon",__source:{fileName:c,lineNumber:85,columnNumber:21}},h),n.createElement("span",{className:"OmniLinkItem-Url",__source:{fileName:c,lineNumber:88,columnNumber:9}},d?Object(o.a)(d,e,"OmniLinkItem-Url"):e),this.props.details&&n.createElement("span",{className:"OmniLinkItem-Details",__source:{fileName:c,lineNumber:95,columnNumber:11}},d&&Object(o.a)(d,this.props.details||"","OmniLinkItem-Details")||this.props.details,"OMNI_RESULT_FOLDER_NICKNAME"===s.type&&" – "+Object(i.a)("Open all bookmarks in folder ($1)",[s.urls&&s.urls.length||0])),this.props.onDelete&&n.createElement("span",{className:"OmniLinkItem-EraseButton",title:Object(i.a)("Delete history item"),onClick:this.handleDelete,dangerouslySetInnerHTML:{__html:l.Nd},__source:{fileName:c,lineNumber:108,columnNumber:11}}))}}var d=a(149),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniDropdown.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends n.PureComponent{constructor(...e){super(...e),p(this,"state",{searchEngineKeyword:"",searchEngineName:""}),p(this,"getNumberOfItems",()=>this.props.items.reduce((e,{items:t})=>e+t.length,0)),p(this,"onLinkItemClicked",(e,t)=>{const a={ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,button:t.button};this.props.onLinkItemClicked(e,Object(d.b)(a))}),p(this,"onDeleteItem",e=>{this.props.onDeleteItem(e)}),p(this,"getFaviconUrl",()=>this.props.typedSearchEngine?this.props.typedSearchEngine.faviconUrl:this.props.defaultSearchEngine?this.props.defaultSearchEngine.faviconUrl:""),p(this,"onLinkItemMiddleClicked",e=>{const t=d.a.openInBackgroundTab;this.props.onLinkItemClicked(e,t)}),p(this,"renderLinkItem",(e,t)=>{const a=this._linkItemCount===this.props.selectionIndex,i=function(e){return e.displayText?e.displayText:e.url?e.url:e.title?e.title:e.text?e.text:""}(e);return this._linkItemCount++,n.createElement(m,{key:e.type+"-"+e.id+t,displayText:i,index:t,isHighlighted:a,linkItem:e,details:e.nickname||e.title||void 0,onClick:this.onLinkItemClicked.bind(null,e),onMiddleClick:this.onLinkItemMiddleClicked.bind(null,e),onDelete:e.disableDelete?void 0:this.onDeleteItem.bind(null,e),pattern:e.disablePatternHighlight?void 0:this.props.pattern,favicon:!this.props.hideIcons&&(e.favicon?e.favicon:void 0),__source:{fileName:h,lineNumber:146,columnNumber:7}})}),p(this,"renderCollection",({items:e,title:t,type:a})=>{if(!e||0===e.length)return null;const s=`${a}-${t||""}`;return(n.createElement("section",{key:s,className:"OmniDropdown-Collection",__source:{fileName:h,lineNumber:175,columnNumber:7}},t&&n.createElement("label",{className:"OmniDropdown-Label",__source:{fileName:h,lineNumber:176,columnNumber:19}},Object(i.a)(t)),e.map(this.renderLinkItem)))})}static getDerivedStateFromProps(e){const t=(e.typedSearchEngine||e.defaultSearchEngine||{name:""}).name;return{searchEngineKeyword:!e.typedSearchEngine&&e.defaultSearchEngine&&e.defaultSearchEngine.keyword&&e.defaultSearchEngine.keyword+" "||"",searchEngineName:t}}componentDidUpdate(e,t){if(this.props.selectionIndex!==e.selectionIndex){const e=this.getCurrentValue(this.props.selectionIndex);this.props.onSelectedItemChanged&&e&&this.props.onSelectedItemChanged(e)}const a=this.getNumberOfItems();this.props.onNumberOfSelectableItemsChanged&&this.props.onNumberOfSelectableItemsChanged(a)}getCurrentValue(e){return this.props.items.reduce((e,t)=>[...e,...t.items],[])[e]}render(){const{items:e}=this.props;return this._linkItemCount=0,n.createElement("div",{className:"OmniDropdown",__source:{fileName:h,lineNumber:190,columnNumber:7}},e.map(this.renderCollection))}}t.a=b},function(e,t,a){"use strict";var n=a(10),i=a(440),s=a(225),r=a(384);var o=a(216);function l(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,u(e,t,"set"),a),a}function c(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,u(e,t,"get"))}function u(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}async function m(e){const{mimeTree:t,raw:a}=await i.a.getMimeTree(e);return new p(t,a)}a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return p}));var d=new WeakMap,h=new WeakMap;class p{constructor(e,t){d.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),this.lock=function(){let e=Promise.resolve();return async function(){const t=e;let a;if(e=new Promise(e=>a=e),await t,!a)throw new Error("createMutex.lock: Expected release to be defined");return a}}(),this.mimeTree=e,this.raw=t}async getByteString(){let e="";const t=await this.lock();try{e=Object(s.a)(this.raw)}finally{t()}return e}async parse(e){let t=[];const a=await this.lock();try{const n=await i.a.parse(this.raw,e);t=n.bodyParts,this.raw=n.raw}finally{a()}return t}async parseAttachments(){if(c(this,d))return c(this,d);const e=[],t=Object(o.d)(this.mimeTree);for(const a of t){(await this.parse(a.mimeTree)).forEach(t=>{"attachment"===t.type&&e.push(t)})}return l(this,d,e),e}async parseCalendar(){let e;const t=Object(o.a)(this.mimeTree);if(t){const a=await this.parse(t.mimeTree);a.length&&(e=a[0])}return e}async parseMainPart(){if(c(this,h))return c(this,h);const e=Object(o.c)(this.mimeTree);if(!e)return[];let t=[];const a=await this.lock();try{const n=await i.a.parse(this.raw,e.mimeTree);t=n.bodyParts,this.raw=n.raw}finally{a()}return l(this,h,t),t}async saveAs(e){const t=await this.lock(),a=new Blob([this.raw],{type:"message/rfc822"}),i=URL.createObjectURL(a);n.a.downloads.download({url:i,filename:e,saveAs:!0},e=>{URL.revokeObjectURL(i),t()})}async writeBufferToDisk(e,t,a){const n=await this.lock();try{await Object(r.a)(e,t,a,this.raw)}finally{n()}}}},function(e,t,a){"use strict";var n=a(13),i=a(6),s=a(12),r=a(16),o=a(35),l=a(57),c=a(437),u=a(654),m=a(169),d=a(523),h=a(299),p=a(1);const b={};let g=[];const N=[],f=new class extends l.EventEmitter{emitChange(){this.emit(r.a.CHANGED)}getSearchText(){const e=n.c.unsafeGetActivePage(),t=b[e.get("id")];return t&&t.editText||""}getTypedSearchHistory(){return g||[]}addChangeListener(e){this.on(r.a.CHANGED,e)}removeChangeListener(e){this.removeListener(r.a.CHANGED,e)}};function _(e,t=m.default){let a=N;try{e&&(a=JSON.parse(e))}catch(e){console.warn("Unable to parse typed history JSON. TODO: fix!",e)}a&&t(function(e=[]){if(!Array.isArray(e))throw TypeError("typedhistory must be an array");return Object(u.a)(e.map(e=>"string"==typeof e?{id:e,url:e,when:Date.now()}:e&&["id","url","when"].every(t=>e.hasOwnProperty(t))?e:null))}(a))}function v(e){!function(e){if("function"!=typeof e)throw TypeError("loadTypedHistory: callback required");if(i.a.get(p.kHistoryDaysToKeepVisits)>0){_(o.a.getSync("TYPED_SEARCH_HISTORY"),e)}else _(JSON.stringify(g),e)}(t=>{let a=(n=t,s=e.query,r=n||N,n&&Array.isArray(n)&&n.length>=30&&(r=Object(c.default)(n,30)),r&&s&&(r=r.filter(({url:e})=>e!==s)),r);var n,s,r;a=[{id:e.query,url:e.query,when:Date.now()}].concat(a),i.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(a)}),g=a,f.emitChange()})}function E(){o.a.remove("TYPED_SEARCH_HISTORY")}s.a.register(e=>{switch(e.actionType){case r.a.SEARCH_FIELD_SET_STATE:!function(e){const t=e.page.get("id");b[t]=Object.assign(b[t]||{},Object(d.a)(e.state,"searchEngine")),f.emitChange()}(e);break;case r.a.SEARCH_FIELD_ADD_TYPED_HISTORY:v(e);break;case"CHROME_TABS_REMOVED":!function(e){b[e.tabId]=void 0}(e);break;case r.a.SEARCH_FIELD_DELETE_TYPED_HISTORY:!function(e){const t=g.filter(({url:t})=>e!==t);i.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(t)}),g=t,f.emitChange()}(e.query);break;case r.a.SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:E();break;case r.a.NAVIGATION_HISTORY_ALL_DELETED:E(),g=[],f.emitChange();break;case r.a.SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(g)});break;case r.a.SEARCH_FIELD_INIT_TYPED_HISTORY:_(e.typedHistory,e=>{g=e,f.emitChange()});break;case r.a.BROWSING_DATA_REMOVED:!0===Object(h.default)(e,"dataTypes.typedHistory")&&function({since:e,dataTypes:{typedHistory:t}}){if(null==t)throw TypeError("Typed history must be true or false");const a=g.filter(({when:t})=>e-t>0);i.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(a)}),g=a,f.emitChange()}(e)}}),t.a=f},,function(e,t,a){"use strict";(function(e){var n=a(507),i=a(50),s=a(28),r=a(140),o=a(91),l=a(111),c=a(21),u=a(154),m=a(36),d=a(162),h=a(53),p=a(14),b=a(13),g=a(11),N=a(0),f=a.n(N),_=a(40),v=a.n(_),E=a(272),C=a(221),w=a(1400),O=a(623),y=a(990),S=a(359),T=a(22),k=a(444),A=a(1377),I=a(201),D=a(253),M=a(25),P=a(17),x=a(2),L=a(10),j=a(20),R=a.n(j),B=a(78),F=a(74),U=a(439),H=a(7),V=a(841),W=a(26),z=a(259),G=a(1),K=a(236),Y=a(355),$=a(425),X=a(398),Z=a(306),Q=a(46),q=a(9),J=a(23),ee="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabBar.jsx";function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ie(e,t,"get"))}function ne(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,ie(e,t,"set"),a),a}function ie(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const se=[G.kAddressBarInlineSearchEnabled,G.kAddressBarShowProgress,G.kKeyboardTabToAll,G.kMediaRouterMediaRemotingEnabled,G.kMouseWheelTabSwitch,G.kPanelsPosition,G.kTabsActiveMinSize,G.kTabsAlignNext,G.kTabsBarWidth,G.kTabsCloseButtonPermanent,G.kTabsClosePinned,G.kTabsCounterDetection,G.kTabsCycleByRecentOrder,G.kTabsDimHibernated,G.kTabsDoubleClickClose,G.kTabsBarHeight,G.kTabsMinimize,G.kTabsPageLoadInfo,G.kTabsNeverCloseLast,G.kTabsSelectionEnabled,G.kTabsBarSliderXpos,G.kTabsBarSliderYpos,G.kTabsShowCloseButton,G.kTabsShowSeparator,G.kTabsStackingAllowDnd,G.kTabsStackingAllowRename,G.kTabsStackingMode,G.kTabsStackingNameMap,G.kTabsStackingOpenAccordions,G.kTabsStackingSubstripLocked,G.kTabsThumbnails,G.kTabsTooltip,G.kTabsUnread,G.kTabsVisualSwitchEnable,G.kThemeUseAnimation,G.kTabsStackingPreferDotted,G.kTabsStackingAutoExpand],re=function(e,t,a){const n=Object(h.c)(e)||"",i=n&&("substrip"===a||"accordion"===a)?b.c.getTabs(t,!0,b.c.getGroup(n,t)):Object(W.List)(),s="off"===a;return{tabs:b.c.getTabs(t,s),pages:b.c.getPages(t),activePageId:e.id,activePageTitle:e.title,url:e.url,incognito:e.incognito,tilingId:e.getIn(["extData","tiling","id"]),groupId:n,pinned:e.pinned,isSelecting:b.c.isSelecting(t),pageSelection:b.c.getSelection(t),pageHistory:b.c.getPageHistory(t),stackTabs:i,isSubstripVisible:!i.isEmpty()}};var oe=new WeakMap,le=new WeakMap,ce=new WeakMap;class ue extends f.a.PureComponent{constructor(t,a){super(t),oe.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:!1}),te(this,"visibleOnMount",this.props.visible),te(this,"refResizeObserver",f.a.createRef()),te(this,"refTabBarContainer",f.a.createRef()),ce.set(this,{writable:!0,value:!1}),te(this,"handleKeyboardChange",(e,t,a)=>{ne(this,le,0!==a)}),te(this,"updateDocumentTitleById",e=>{const t=b.c.getPageById(e);t&&this.updateDocumentTitle(t)}),te(this,"updateDocumentTitle",e=>{const t=J.p.getDisplayTitle(e);t!==document.title&&(document.title=t)}),te(this,"onWindowResize",()=>{clearTimeout(this._resizingTimeout),this.setState({isResizing:!0}),this._resizingTimeout=setTimeout(()=>{this.setState({isResizing:!1})},1e3)}),te(this,"setIsExpectingDrop",e=>{this.setState({isExpectingDrop:e})}),te(this,"closePage",async e=>{ne(this,ce,!0),await p.a.closePage(e),ne(this,ce,!1),this._onPageStoreChange()}),te(this,"onMessageReceived",(e,t)=>{if(L.a.runtime.id===t.id&&"object"==typeof e&&null!=e)switch(e.dispatchAction){case z.c:return void this.setIsExpectingDrop(!0);case z.a:return void this.setIsExpectingDrop(!1)}}),te(this,"setTabBarWidth",(e,t=!0)=>{this.setState({tabBarWidth:e},()=>t&&g.a.set(G.kTabsBarWidth,e))}),te(this,"setTabBarHeight",(e,t=!0)=>{this.setState({tabBarHeight:e},()=>t&&g.a.set(G.kTabsBarHeight,e))}),te(this,"setInnerTabBarWidth",(e,t=!0)=>{this.setState({tabBarSliderXpos:e},()=>t&&g.a.set(G.kTabsBarSliderXpos,e))}),te(this,"setInnerTabBarHeight",(e,t=!0)=>{this.setState({tabBarSliderYpos:e},()=>t&&g.a.set(G.kTabsBarSliderYpos,e))}),te(this,"_onPageStoreChange",()=>{if(ae(this,ce))return;const e=b.c.getPageById(this.state.activePageId),t=b.c.unsafeGetActivePage();this.updateDocumentTitle(t),this.setState(re(t,this.context.vivaldiWindowId,this.props.prefValues[G.kTabsStackingMode]),()=>this.updateAccordionStatus(t,e))}),te(this,"_onMediaStateStoreChanged",()=>{const e=b.c.unsafeGetActivePage(),t=d.a.getState().get(e.id)||Object(W.Set)();this.setState({mediaState:t})}),te(this,"updateAccordionStatus",(e,t)=>{this.props.prefValues[G.kTabsStackingAutoExpand]&&"accordion"===this.props.prefValues[G.kTabsStackingMode]&&this.setState(t=>{const a=t.openAccordions.filter(e=>!e.auto),n=Object(h.c)(e);return n&&a.push({groupId:n,auto:!0}),g.a.set(G.kTabsStackingOpenAccordions,a.map(e=>e.groupId)),{openAccordions:a}})}),te(this,"isSelecting",()=>this.props.prefValues[G.kTabsSelectionEnabled]&&this.state.isSelecting&&!this.state.pageSelection.isEmpty()),te(this,"getSelectedPages",()=>this.isSelecting()?this.state.pageSelection.reduce((e,t)=>{const a=b.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===t);return a?e.push(a):e},Object(W.List)()).sortBy(e=>e.index):Object(W.List)()),te(this,"_onCommandSpy",e=>{switch(e){case"COMMAND_BOOKMARK_SELECTED_TABS":i.a.bookmarkPages(this.getSelectedPages(),this.context.vivaldiWindowId,!1,s.b.getRootNode().id);break;case"COMMAND_SAVE_SELECTED_SESSION":const e=this.getSelectedPages().map(e=>e.id).toArray();e.length>0&&m.a.showSaveSession({mode:"selected",ids:e});break;case"COMMAND_NEW_TAB":this.createTab("keyboard")}}),te(this,"onTabStoreChange",t=>{const{action:a,url:n,maybeEvent:i,addOpenerTabId:s}=t,r="off"===this.props.prefValues[G.kTabsStackingMode];switch(a){case"newBackgroundTab":e.nextTick(()=>p.a.openURL(n,{inBackground:!0,addOpenerTabId:s}));break;case"closeAllButActiveTab":e.nextTick(()=>this.closeAllButActiveTab());break;case"switchTabBackBySetting":this.switchBackBySetting(i);break;case"switchTabForwardBySetting":this.switchForwardBySetting(i);break;case"switchTabBackByHistory":this.switchBackByHistory(i);break;case"switchTabForwardByHistory":this.switchForwardByHistory(i);break;case"switchTabBackByOrder":this.switchBackByOrder(i);break;case"switchTabForwardByOrder":this.switchForwardByOrder(i);break;case"viewPageSource":this.state.url.startsWith("view-source:")||e.nextTick(()=>p.a.openURL(`view-source:${this.state.url}`,{incognito:this.state.incognito}));break;case"stackUntile":e.nextTick(()=>{this.isSelecting()?this.getSelectedPages().map(e=>e.getIn(["extData","tiling","id"])).filter(Boolean).toSet().forEach(p.a.untileTileGroup):e.nextTick(()=>p.a.untileTileGroup(this.state.tilingId,this.context.vivaldiWindowId))});break;case"stackCreate":if(r)break;e.nextTick(()=>{if(this.isSelecting())p.a.createTabStack(this.getSelectedPages());else{const e=b.c.getPages(this.context.vivaldiWindowId).filter(e=>!Object(h.c)(e)&&!1===e.pinned);if(e.count()>1){const[t,a]=Object(X.a)(b.c.unsafeGetActivePage(),b.c.getTabs(this.context.vivaldiWindowId,r));if(a.count()>1){const e=b.c.getNewGroupId();Object(U.a)(e,t),p.a.createTabStack(a,void 0,e)}else p.a.createTabStack(e)}}});break;case"stackDissolve":if(r)break;e.nextTick(()=>p.a.expandTabStack(this.state.groupId)),this.handleCompressAccordion(this.state.groupId);break;case"stackRemove":if(r)break;e.nextTick(()=>this.removeFromTabStack(this.state.pageSelection));break;case"stackTileGrid":case"stackTileHorizontal":case"stackTileVertical":const t="stackTileGrid"===a?"grid":"stackTileHorizontal"===a?"column":"row";e.nextTick(()=>{this.isSelecting()?p.a.tilePages(this.getSelectedPages(),t):this.state.groupId?p.a.tileTabStack(this.state.groupId,this.context.vivaldiWindowId,t):p.a.tileLastActive(t,this.context.vivaldiWindowId)});break;case"tabThumbnail":this.switchTabViewAndEnablePreview();break;case"unloadDialogClosed":ne(this,ce,!1),this._onPageStoreChange()}}),te(this,"onActivateTab",e=>{if(k.a.hideTooltip(),e.active)p.a.clearSelection(this.context.vivaldiWindowId);else{const t="dotted"===this.props.prefValues[G.kTabsStackingMode];p.a.activateTab(e.id,this.context.vivaldiWindowId,t)}}),te(this,"createTab",async(e,t)=>{if(t)return void p.a.openURL(void 0,{groupId:t});const a=this.props.prefValues[G.kTabsStackingMode],n=b.c.getPageById(this.state.activePageId),i=n&&Object(h.c)(n);if("dotted"!==a&&"accordion"!==a)if("substrip"!==a)p.a.openURL();else{if("mainStrip"===e||!this.isSubstripVisible())return void p.a.openURL();if(i)p.a.openURL(void 0,{groupId:i});else{const e=b.c.unsafeGetActivePage(),t=await p.a.createTabStack(Object(W.List)([e]),e.index);p.a.openURL(void 0,{groupId:t})}}else i&&"keyboard"===e&&b.c.isGroup(i,this.context.vivaldiWindowId)?p.a.openURL(void 0,{groupId:i}):p.a.openURL()}),te(this,"closeAllButActiveTab",()=>{p.a.closeOther(b.c.unsafeGetActivePage(),!1)}),te(this,"removeFromTabStack",e=>{const t=e.flatMap(e=>{const t=b.c.getPageById(e);return t?[t]:[]}).toList();t.isEmpty()||p.a.removeFromTabStack(t)}),te(this,"muteTab",(e,t)=>{t&&t.stopPropagation(),p.a.toggleMuting(W.List.of(e))}),te(this,"closeSingleTab",(e,t)=>{(null==t?void 0:t.stopPropagation)&&t.stopPropagation(),p.a.closePage(e)}),te(this,"switchBackBySetting",t=>{this.props.prefValues[G.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(t,!1,ae(this,le)):this.props.prefValues[G.kTabsCycleByRecentOrder]?e.nextTick(()=>p.a.cycleByHistory(this.context.vivaldiWindowId,t,{goBack:!0})):e.nextTick(()=>p.a.cycleByOrder(this.context.vivaldiWindowId,t,{goBack:!0}))}),te(this,"switchForwardBySetting",t=>{this.props.prefValues[G.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(t,!0,ae(this,le)):this.props.prefValues[G.kTabsCycleByRecentOrder]?e.nextTick(()=>p.a.cycleByHistory(this.context.vivaldiWindowId,t,{goBack:!1})):e.nextTick(()=>p.a.cycleByOrder(this.context.vivaldiWindowId,t,{goBack:!1}))}),te(this,"switchBackByHistory",t=>{e.nextTick(()=>p.a.cycleByHistory(this.context.vivaldiWindowId,t,{goBack:!0}))}),te(this,"switchForwardByHistory",t=>{e.nextTick(()=>p.a.cycleByHistory(this.context.vivaldiWindowId,t,{goBack:!1}))}),te(this,"switchBackByOrder",t=>{e.nextTick(()=>p.a.cycleByOrder(this.context.vivaldiWindowId,t,{goBack:!0}))}),te(this,"switchForwardByOrder",t=>{e.nextTick(()=>p.a.cycleByOrder(this.context.vivaldiWindowId,t,{goBack:!1}))}),te(this,"reopenClosedTab",()=>{I.a.undeletePreviousTab()}),te(this,"switchTabViewAndEnablePreview",()=>{const e=this.props.prefValues[G.kTabsThumbnails],t=this.props.tabPosition,{tabBarWidth:a}=this.state,n="left"===t||"right"===t;e?n?g.a.set(G.kTabsThumbnails,!1):this.switchTabView():(g.a.set(G.kTabsThumbnails,!0),n&&30===a&&this.switchTabView())}),te(this,"switchTabView",()=>{const e=this.props.tabPosition,{tabBarWidth:t,tabBarHeight:a}=this.state;if("top"===e||"bottom"===e){const e=a<75?150:30;this.setTabBarHeight(e)}else{const e=180!==t?180:30;this.setTabBarWidth(e)}}),te(this,"onSlidebarPosition",Object(K.default)((e,t)=>{const a=this.refTabBarContainer.current;if(!(a instanceof Element))return;const n=a.getBoundingClientRect();switch(this.props.tabPosition){case"top":this.setTabBarHeight(Math.round(t-n.top),!1);break;case"bottom":this.setTabBarHeight(Math.round(n.bottom-t),!1);break;case"left":this.setTabBarWidth(Math.min(Math.round(e-n.left),360),!1);break;case"right":this.setTabBarWidth(Math.min(Math.round(n.right-e),360),!1);break;default:throw new Error("Unknown tabbar position")}},64)),te(this,"handleSliderDown",()=>{this.setState({isResizing:!0})}),te(this,"handleSliderUp",()=>{this.setState({isResizing:!1}),"top"===this.props.tabPosition||"bottom"===this.props.tabPosition?(g.a.set(G.kTabsBarHeight,this.state.tabBarHeight),this.snapToEdge()):g.a.set(G.kTabsBarWidth,this.state.tabBarWidth)}),te(this,"onInnerSlidebarPosition",Object(K.default)((e,t)=>{const a=v.a.findDOMNode(this.refResizeObserver.current);if(!(a instanceof Element))return;const n=a.getBoundingClientRect();switch(this.props.tabPosition){case"top":this.setInnerTabBarHeight(Math.round(t-n.top),!1);break;case"bottom":this.setInnerTabBarHeight(Math.round(n.bottom-t),!1);break;case"left":this.setInnerTabBarWidth(Object(Y.default)(Math.round(e-n.left),30,330),!1);break;case"right":this.setInnerTabBarWidth(Object(Y.default)(Math.round(n.right-e),30,330),!1);break;default:throw new Error("Unknown tabbar position")}},64)),te(this,"handleInnerSliderDown",()=>{this.setState({isResizing:!0})}),te(this,"handleInnerSliderUp",()=>{this.setState({isResizing:!1}),"top"===this.props.tabPosition||"bottom"===this.props.tabPosition?(g.a.set(G.kTabsBarSliderYpos,this.state.tabBarSliderYpos),this.snapToEdge()):this.setInnerTabBarWidth(this.state.tabBarSliderXpos)}),te(this,"switchInnerTabView",()=>{const e=this.props.tabPosition,{tabBarWidth:t,tabBarHeight:a,tabBarSliderXpos:n}=this.state;if("top"===e||"bottom"===e){const e=a<75?150:30;this.setInnerTabBarHeight(e)}else{const e=n!==t/2?t/2:30;this.setInnerTabBarWidth(e)}}),te(this,"snapToEdge",()=>{const e=this.refTabBarContainer.current;if(!(e instanceof HTMLElement))return;let t=parseInt(e.style.height);t>30&&t<50?t=30:t<150&&t>130&&(t=150),this.setTabBarHeight(t)}),te(this,"getGroupHighlightId",(e,t)=>b.c.getGroupHighlightId(e,t)),te(this,"getTabStackThumbnailsContextMenu",(e,t)=>{const a=o.a.getOptionFunction(e);return o.a.getNamedMenu(e,e=>{switch(e.action){case"CONTEXT_CLOSE":return Promise.resolve({handler:this.closeSingleTab.bind(this,t),...a(e,{})});case"CONTEXT_TABSTACK_REMOVE_FROM":return Promise.resolve({handler:()=>this.removeFromTabStack(this.state.pageSelection),...a(e,{})});default:return Promise.resolve({...a(e,{})})}})}),te(this,"getTabBarContextMenu",(e,t)=>{const{prefValues:a}=this.props,n=P.a.isGuestSession(this.context.vivaldiWindowId),r=o.a.getOptionFunction(e);return o.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_NEW":return{handler:()=>this.createTab(t?"subStrip":"mainStrip"),...r(e,{})};case"CONTEXT_TOGGLE_SUBSTRIP_LOCK":{const t=a[G.kTabsStackingSubstripLocked];return{handler:()=>g.a.set(G.kTabsStackingSubstripLocked,!t),visible:"substrip"===a[G.kTabsStackingMode],checked:t,...r(e,{})}}case"CONTEXT_BOOKMARK_ALL":return{handler:()=>i.a.bookmarkAllOpenPages(this.context.vivaldiWindowId,s.b.getRootNode().id),visible:!n,...r(e,{})};case"CONTEXT_SAVE_SESSION":return{handler:()=>m.a.showSaveSession({mode:"all"}),visible:!n,...r(e,{})};case"CONTEXT_REOPEN":return{handler:this.reopenClosedTab,visible:Boolean(D.a.getTrash().length),...r(e,{})};default:return{...r(e,{})}}})}),te(this,"onAuxClick",(e,t)=>{e.button===F.a.kCenter&&this.createTab(t?"subStrip":"mainStrip"),e.preventDefault()}),te(this,"onDoubleClick",(e,t)=>{e.button===F.a.kLeft&&"top"!==this.props.tabPosition&&this.createTab(t?"subStrip":"mainStrip")}),te(this,"getTooltipPlacement",()=>({top:"below",bottom:"above",left:"after",right:"before"}[this.props.tabPosition])),te(this,"getTooltipMediaState",e=>this.state.activePageId===e?this.state.mediaState:d.a.getState().get(e)||Object(W.Set)()),te(this,"getTooltipContent",(e,t)=>{const a=b.c.getPageById(e);if(!a)return{width:0,height:0,content:null};const{prefValues:n}=this.props;let i,s;const r=Object(Z.b)(a)&&!t;if("off"!==n[G.kTabsStackingMode]&&r){const e=Object(h.c)(a);i=b.c.getGroup(e,this.context.vivaldiWindowId),s=e?this.getGroupHighlightId(e,this.context.vivaldiWindowId):null}else i=W.List.of(a),s=null;const o=!r&&Object(Z.e)(a),c=r?f.a.createElement("div",{className:"tab-group",__source:{fileName:ee,lineNumber:1149,columnNumber:7}},i.map(e=>f.a.createElement("div",{key:e.id,className:R()({"tooltip-item":!0,active:e.active,"last-active":s&&s===e.id}),onMouseDown:t=>Object(V.a)([e],t),onContextMenu:t=>this.onTabStackTooltipContextMenu(e,t),onClick:()=>this.onActivateTab(e),onAuxClick:t=>{t.button===F.a.kCenter&&(t.preventDefault(),t.stopPropagation(),this.closeSingleTab(e))},__source:{fileName:ee,lineNumber:1151,columnNumber:11}},f.a.createElement(S.a,{src:e.getIn(["extData","thumbnail"]),__source:{fileName:ee,lineNumber:1169,columnNumber:13}}),f.a.createElement("div",{className:"thumbnail-caption",__source:{fileName:ee,lineNumber:1171,columnNumber:13}},this.renderThumbnailText(e),f.a.createElement("span",{className:"thumbnail-buttons",__source:{fileName:ee,lineNumber:1173,columnNumber:15}},f.a.createElement(l.a,{className:"favicon",url:e.url,__source:{fileName:ee,lineNumber:1174,columnNumber:17}}),f.a.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:q.Nd},tabIndex:n[G.kKeyboardTabToAll],onClick:t=>this.closeSingleTab(e,t),__source:{fileName:ee,lineNumber:1175,columnNumber:17}}),this.renderAudioIcon(e)))))):f.a.createElement("div",{className:"tab-solo",__source:{fileName:ee,lineNumber:1130,columnNumber:7}},f.a.createElement("div",{key:"tabbar_tooltip",className:R()({"tooltip-item":!0,active:a.active}),__source:{fileName:ee,lineNumber:1131,columnNumber:9}},!o&&f.a.createElement(S.a,{src:a.getIn(["extData","thumbnail"]),__source:{fileName:ee,lineNumber:1138,columnNumber:13}}),f.a.createElement("div",{className:"thumbnail-caption",__source:{fileName:ee,lineNumber:1140,columnNumber:11}},this.renderThumbnailText(a),f.a.createElement("span",{className:"thumbnail-buttons",__source:{fileName:ee,lineNumber:1142,columnNumber:13}},this.renderAudioIcon(a))))),u=o?30:210,m=this.context.innerWidth-("left"===this.props.tabPosition||"right"===this.props.tabPosition?this.getWidth():0),d=this.context.innerHeight-("top"===this.props.tabPosition||"bottom"===this.props.tabPosition?this.getHeight():0);if(!r)return{width:222,height:u,content:c};let p=320,g=92*i.count();if(g>d){const e=Math.floor(d/92),t=Math.ceil(i.count()/e);p=320*t,g=92*Math.ceil(i.count()/t)}return{width:Math.min(p,320*Math.floor(m/320)),height:Math.min(g,92*Math.floor(d/92)),content:c}}),te(this,"renderThumbnailText",e=>{const t=J.p.getDisplayTitle(e);return(f.a.createElement("span",{className:"thumbnail-text",__source:{fileName:ee,lineNumber:1235,columnNumber:13}},f.a.createElement("strong",{className:"title",__source:{fileName:ee,lineNumber:1236,columnNumber:7}},t.length>245?t.substring(0,240)+"...":t),!J.p.isInternalUrl(e.url)&&Object(Q.n)(e.url)&&f.a.createElement("span",{className:"url",__source:{fileName:ee,lineNumber:1242,columnNumber:9}},new URL(e.url).hostname)))}),te(this,"renderAudioIcon",e=>{const t=this.getTooltipMediaState(e.id);if(t.has("playing")||t.has("muting"))return f.a.createElement("button",{className:"tooltip-audio-button",tabIndex:this.props.prefValues[G.kKeyboardTabToAll],onClick:this.muteTab.bind(this,e),__source:{fileName:ee,lineNumber:1251,columnNumber:9}},f.a.createElement(n.a,{color:this.props.vivaldiSettings.BROWSER_COLOR_FG,animated:this.props.prefValues[G.kThemeUseAnimation],mediaState:t,__source:{fileName:ee,lineNumber:1255,columnNumber:11}}))}),te(this,"getTabDirection",()=>{const e=this.props.tabPosition;return"left"===e||"right"===e?"column":"row"}),te(this,"setOverflowClass",(e,t)=>{t?this.setState({tabStripOverflow:e}):this.setState({tabBarOverflow:e})}),te(this,"onResize",([e])=>{if(!ae(this,oe))return;const t=e.target;this.setState(e=>{var a;return{tabStripWidth:t.clientWidth,tabStripHeight:t.clientHeight,tabBarContainerWidth:null===(a=t.parentElement)||void 0===a?void 0:a.clientWidth}})}),te(this,"getWidth",()=>{if(!this.props.visible)return 0;const{tabBarWidth:e}=this.state,t=30*(this.isSubstripVisible()?2:1)+(this.state.tabBarOverflow?16:0)+(this.state.tabStripOverflow?16:0);return Object(Y.default)(e,t,360)||t}),te(this,"getHeight",()=>{if(!this.props.visible)return 0;const{tabBarHeight:e}=this.state,t=this.isSubstripVisible()?61:30;if(!this.props.prefValues[G.kTabsThumbnails])return t;return Object(Y.default)(e,t,150)||30}),te(this,"clearDisplay",e=>{const t=e[0];t instanceof HTMLElement&&"none"===t.style.display&&t.style.removeProperty("display")}),te(this,"showSubStack",e=>{const t=b.c.getPageById(e);if(!t)return;const a=Object(h.c)(t);if(a){const e=b.c.getTabs(this.context.vivaldiWindowId,!0,b.c.getGroup(a,this.context.vivaldiWindowId));this.setState({stackTabs:e})}else{const e=W.List.of(new b.b({page:t,id:t.id}));this.setState({stackTabs:e})}}),te(this,"onContextMenu",(e,t)=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getTabBarContextMenu("tabbar",t).then(t=>{Object(B.a)(this.context.vivaldiWindowId,t)(e)})}),te(this,"onTabStackTooltipContextMenu",(e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getTabStackThumbnailsContextMenu("tabstackthumbnails",e).then(e=>{Object(B.a)(this.context.vivaldiWindowId,e)(t)})}),te(this,"handleExpandAccordion",e=>{this.setState(t=>{const a=t.openAccordions.concat({groupId:e,auto:!1});return g.a.set(G.kTabsStackingOpenAccordions,a.map(e=>e.groupId)),{openAccordions:a}})}),te(this,"handleCompressAccordion",e=>{this.setState(t=>{const a=t.openAccordions.filter(t=>t.groupId!==e&&!1===t.auto);return g.a.set(G.kTabsStackingOpenAccordions,a.map(e=>e.groupId)),{openAccordions:a}})}),te(this,"toggleAutoExpandAccordion",e=>{e&&this.setState(t=>{const a=t.openAccordions.find(t=>t.groupId===e),n=!!a&&!a.auto;return{openAccordions:t.openAccordions.filter(t=>t.groupId!==e).concat({groupId:e,auto:n})}})});const r=b.c.unsafeGetActivePage(a.vivaldiWindowId),c=this.props.prefValues[G.kTabsStackingOpenAccordions].map(e=>({groupId:e,auto:!1}));this.state={tabStripWidth:0,tabStripHeight:0,isResizing:!1,tabBarOverflow:!1,tabStripOverflow:!1,tabBarHeight:this.props.prefValues[G.kTabsBarHeight],tabBarWidth:this.props.prefValues[G.kTabsBarWidth],...re(r,a.vivaldiWindowId,t.prefValues[G.kTabsStackingMode]),mediaState:d.a.getState().get(r.id)||Object(W.Set)(),tabBarSliderYpos:this.props.prefValues[G.kTabsBarSliderYpos],tabBarSliderXpos:this.props.prefValues[G.kTabsBarSliderXpos],tabBarContainerWidth:0,isExpectingDrop:!1,openAccordions:c}}componentDidUpdate(e,t){"top"!==this.props.tabPosition&&"bottom"!==this.props.tabPosition||!0!==this.props.prefValues[G.kTabsThumbnails]||!1!==e.prefValues[G.kTabsThumbnails]||this.setTabBarHeight(150),e.prefValues[G.kTabsStackingMode]!==this.props.prefValues[G.kTabsStackingMode]&&this._onPageStoreChange()}componentDidMount(){L.a.runtime.onMessage.addListener(this.onMessageReceived),b.c.addChangeListener(this._onPageStoreChange),O.a.addChangeListener(this.onTabStoreChange),r.a.addListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),r.a.addListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),r.a.addListener("COMMAND_NEW_TAB",this._onCommandSpy),H.a.tabsPrivate.onKeyboardChanged.addListener(this.handleKeyboardChange),this.updateDocumentTitleById(this.state.activePageId),ne(this,oe,!0),this.context.addEventListener("resize",this.onWindowResize,!1),this._mediaStateStoreToken=d.a.addListener(this._onMediaStateStoreChanged),this.cleanUpOpenAccordions()}componentWillUnmount(){this._mediaStateStoreToken.remove(),L.a.runtime.onMessage.removeListener(this.onMessageReceived),b.c.removeChangeListener(this._onPageStoreChange),O.a.removeChangeListener(this.onTabStoreChange),r.a.removeListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),r.a.removeListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),r.a.removeListener("COMMAND_NEW_TAB",this._onCommandSpy),H.a.tabsPrivate.onKeyboardChanged.removeListener(this.handleKeyboardChange),ne(this,oe,!1),this.context.removeEventListener("resize",this.onWindowResize,!1),clearTimeout(this._resizingTimeout)}cleanUpOpenAccordions(){const e=this.state.pages.reduce((e,t)=>(e.push(Object(h.c)(t)),e),[]);this.setState(t=>{const a=Object($.a)(t.openAccordions,"groupId").filter(t=>e.includes(t.groupId));return g.a.set(G.kTabsStackingOpenAccordions,a.map(e=>e.groupId)),{openAccordions:a}})}isSubstripVisible(){const{prefValues:e,visible:t}=this.props;return t&&"substrip"===e[G.kTabsStackingMode]&&(e[G.kTabsStackingSubstripLocked]||this.state.stackTabs.size>1)}render(){const e=this.props.vivaldiSettings,t=this.props.prefValues,a=this.props.tabPosition,n=this.getTabDirection(),i="row"===n?this.state.tabStripWidth-32:this.state.tabStripWidth,s="column"===n?this.state.tabStripHeight-32:this.state.tabStripHeight,r="column"===n?Math.max(this.state.tabBarWidth-i,32):this.state.tabBarContainerWidth-32,o=t[G.kTabsThumbnails]&&("top"===a||"bottom"===a)||"left"===a||"right"===a,l=this.props.prefValues[G.kTabsStackingSubstripLocked],c=this.isSubstripVisible(),u=l&&this.state.stackTabs.isEmpty()?W.List.of(new b.b({page:b.c.unsafeGetActivePage(),id:this.state.activePageId})):this.state.stackTabs;return f.a.createElement("div",{id:"tabs-tabbar-container",ref:this.refTabBarContainer,style:"top"===a||"bottom"===a?{height:this.getHeight()}:{width:this.getWidth()},className:R()({[this.props.visible?this.props.tabPosition:"none"]:!0,accordion:"accordion"===t[G.kTabsStackingMode],dotted:"dotted"===t[G.kTabsStackingMode]||t[G.kTabsStackingPreferDotted]}),__source:{fileName:ee,lineNumber:1451,columnNumber:7}},f.a.createElement("div",{id:"tabs-container",onAuxClick:e=>this.onAuxClick(e,!1),onDoubleClick:e=>this.onDoubleClick(e,!1),className:R()({overflow:this.state.tabBarOverflow,[this.props.visible?this.props.tabPosition:"none"]:!0}),style:{flexGrow:c&&"row"===n?0:1},__source:{fileName:ee,lineNumber:1465,columnNumber:9}},f.a.createElement(E.a,{ref:this.refResizeObserver,className:"resize",onResize:this.onResize,__source:{fileName:ee,lineNumber:1476,columnNumber:11}},f.a.createElement(y.a,{isSubstrip:!1,isSubstripVisible:c,maxWidth:i,maxHeight:s,tabBarWidth:this.state.tabBarWidth,direction:n,onActivateTab:this.onActivateTab,getTooltipContent:this.getTooltipContent,getGroupHighlightId:this.getGroupHighlightId,setOverflowClass:this.setOverflowClass,settings:e,prefValues:t,reopenClosedTab:this.reopenClosedTab,tabPosition:this.props.tabPosition,isSelecting:this.isSelecting(),isResizing:this.state.isResizing,pageSelection:this.state.pageSelection,pages:this.state.pages,tabs:this.state.tabs,switchByScroll:t[G.kMouseWheelTabSwitch],createTab:this.createTab,showSubStack:this.showSubStack,isExpectingDrop:this.state.isExpectingDrop,onContextMenu:this.onContextMenu,setIsExpectingDrop:this.setIsExpectingDrop,activeGroupId:this.state.groupId,openAccordions:this.state.openAccordions,handleExpandAccordion:this.handleExpandAccordion,handleCompressAccordion:this.handleCompressAccordion,toggleAutoExpandAccordion:this.toggleAutoExpandAccordion,closePage:this.closePage,__source:{fileName:ee,lineNumber:1481,columnNumber:13}})),f.a.createElement("div",{className:"toolbar toolbar-tabbar sync-and-trash-container",style:{maxWidth:Math.max(30,i-30)},__source:{fileName:ee,lineNumber:1516,columnNumber:11}},!P.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&f.a.createElement(w.a,{__source:{fileName:ee,lineNumber:1521,columnNumber:15}}),f.a.createElement(A.a,{__source:{fileName:ee,lineNumber:1522,columnNumber:13}})),o&&"column"===n&&f.a.createElement(C.a,{onSlidebarPosition:c?this.onInnerSlidebarPosition:this.onSlidebarPosition,onStart:c?this.handleInnerSliderDown:this.handleSliderDown,onStop:c?this.handleInnerSliderUp:this.handleSliderUp,onDoubleClick:c?this.switchInnerTabView:this.switchTabView,offset:1,position:this.props.tabPosition,__source:{fileName:ee,lineNumber:1525,columnNumber:13}})),c&&f.a.createElement("div",{id:"tabs-subcontainer",onAuxClick:e=>this.onAuxClick(e,!0),onDoubleClick:e=>this.onDoubleClick(e,!0),className:R()({overflow:this.state.tabStripOverflow,[this.props.visible?this.props.tabPosition:"none"]:!0,visible:c}),style:{flexBasis:c&&"column"===n?Math.max(this.getWidth()-this.state.tabBarSliderXpos-(this.state.tabBarOverflow?16:0),30):0},__source:{fileName:ee,lineNumber:1544,columnNumber:11}},f.a.createElement(y.a,{isSubstrip:!0,isSubstripVisible:c,maxWidth:r,maxHeight:s,tabBarWidth:this.state.tabBarWidth,direction:n,onActivateTab:this.onActivateTab,getTooltipContent:this.getTooltipContent,getGroupHighlightId:this.getGroupHighlightId,setOverflowClass:this.setOverflowClass,settings:e,prefValues:t,reopenClosedTab:this.reopenClosedTab,tabPosition:this.props.tabPosition,isSelecting:this.isSelecting(),isResizing:this.state.isResizing,pageSelection:this.state.pageSelection,pages:this.state.pages,tabs:u,switchByScroll:t[G.kMouseWheelTabSwitch],createTab:this.createTab,isExpectingDrop:this.state.isExpectingDrop,onContextMenu:this.onContextMenu,setIsExpectingDrop:this.setIsExpectingDrop,activeGroupId:this.state.groupId,openAccordions:[],closePage:this.closePage,__source:{fileName:ee,lineNumber:1563,columnNumber:13}}),f.a.createElement("div",{className:R()("toolbar toolbar-tabbar toolbar-large subcontainer-lock",{[this.props.tabPosition]:!0}),__source:{fileName:ee,lineNumber:1594,columnNumber:13}},f.a.createElement(T.a,{onClick:()=>g.a.set(G.kTabsStackingSubstripLocked,!l),menuOrigin:"bottomLeft",className:l?"tabs-locked":"tabs-unlocked",tooltip:Object(x.a)("Lock second row of Tabs"),image:l?q.xc.small:q.yc.small,__source:{fileName:ee,lineNumber:1600,columnNumber:15}}))),o&&f.a.createElement(C.a,{onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.switchTabView,offset:1,position:this.props.tabPosition,__source:{fileName:ee,lineNumber:1617,columnNumber:11}}))}}te(ue,"contextType",M.a),t.a=Object(c.a)(Object(u.a)(ue,["BROWSER_COLOR_FG"]),se)}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(595),s=a(853),r=a(151),o=a(831),l=a(832),c=a(2),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentPopup.jsx";function m({noteId:e,attachments:t,onRemoveAttachment:a,onInsertMarkdown:i,dragFormat:s}){return n.createElement("div",{className:"NotesAttachmentPopup",__source:{fileName:u,lineNumber:20,columnNumber:5}},n.createElement(l.a,{noteId:e,attachments:t,onRemoveAttachment:a,onInsertMarkdown:i,dragFormat:s,__source:{fileName:u,lineNumber:21,columnNumber:7}}),n.createElement(o.a,{noteId:e,disabled:!1,keyAccess:-1,text:Object(c.a)("Add attachment"),__source:{fileName:u,lineNumber:29,columnNumber:7}}))}var d=a(22),h=a(95),p=a(25),b=a(9);a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return _}));var g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerToolbar.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=[[{command:"bold",text:Object(c.a)("Bold"),icon:b.Uc},{command:"italic",text:Object(c.a)("Italic"),icon:b.ad},{command:"strikeThrough",text:Object(c.a)("Strike through"),icon:b.id}],[{command:"insertOrderedList",text:Object(c.a)("Numbered list"),icon:b.Yc},{command:"insertUnorderedList",text:Object(c.a)("Bullet list"),icon:b.Zc},{command:"outdent",text:Object(c.a)("Remove indentation"),icon:b.fd},{command:"indent",text:Object(c.a)("Indent"),icon:b.Wc}],[{command:"createLink",text:Object(c.a)("Create Link"),icon:b.Vc}],[{command:"undo",text:Object(c.a)("win_linux","Undo"),icon:b.kd},{command:"redo",text:Object(c.a)("win_linux","Redo"),icon:b.gd}]];class _ extends n.Component{constructor(...e){super(...e),N(this,"state",{anchor:"",buttonState:[],createLinkModalOpen:!1,formatBlock:"p",link:"",isAttachmentPopupOpen:!1}),N(this,"updateButtonState",(e,t)=>{this.setState(a=>({buttonState:e||a.buttonState,formatBlock:t||a.formatBlock}))}),N(this,"updateLinkState",e=>{this.setState(t=>{if(t.anchor!==e)return{anchor:e}})}),N(this,"onCreateLink",e=>{this.setState({createLinkModalOpen:!1}),this.props.onCreateLink(e)}),N(this,"onCancelCreateLink",()=>{this.setState({createLinkModalOpen:!1}),this.props.onCancelCreateLink()}),N(this,"showCreateLinkModal",()=>this.setState({createLinkModalOpen:!0})),N(this,"cacheFocus",()=>{const{document:e}=this.context;e.activeElement?this._focusCache=e.activeElement:this._focusCache=void 0}),N(this,"restoreFocus",()=>{this._focusCache&&this._focusCache.focus()})}render(){const{noteId:e}=this.props;let t=0;return(n.createElement("div",{className:"NotesManager-Toolbar",__source:{fileName:g,lineNumber:185,columnNumber:7}},this.state.createLinkModalOpen&&n.createElement(i.a,{onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,link:this.state.link||this.state.anchor,__source:{fileName:g,lineNumber:187,columnNumber:11}}),n.createElement("div",{className:"toolbar toolbar-default NotesManager-Buttons",__source:{fileName:g,lineNumber:193,columnNumber:9}},n.createElement(d.a,{tooltip:this.props.inFullView?Object(c.a)("Enter Full View"):Object(c.a)("Exit Full View"),onClick:this.props.toggleFullEditor,image:this.props.inFullView?b.jb.medium:b.cb.medium,__source:{fileName:g,lineNumber:194,columnNumber:11}}),n.createElement("select",{onChange:e=>{this.props.onParagraphFormatChange("formatBlock",e),this.restoreFocus()},onMouseDown:this.cacheFocus,value:this.state.formatBlock,title:Object(c.a)("Paragraph Format"),tabIndex:"-1",disabled:this.props.disabled,__source:{fileName:g,lineNumber:208,columnNumber:11}},n.createElement("option",{value:"h1",__source:{fileName:g,lineNumber:219,columnNumber:13}},Object(c.a)("Heading 1")),n.createElement("option",{value:"h2",__source:{fileName:g,lineNumber:220,columnNumber:13}},Object(c.a)("Heading 2")),n.createElement("option",{value:"h3",__source:{fileName:g,lineNumber:221,columnNumber:13}},Object(c.a)("Heading 3")),n.createElement("option",{value:"h4",__source:{fileName:g,lineNumber:222,columnNumber:13}},Object(c.a)("Heading 4")),n.createElement("option",{value:"p",__source:{fileName:g,lineNumber:223,columnNumber:13}},Object(c.a)("Paragraph")),n.createElement("option",{value:"pre",__source:{fileName:g,lineNumber:224,columnNumber:13}},Object(c.a)("Preformatted"))),f.map((e,a)=>{const i=e.map((e,a)=>n.createElement(d.a,{key:e.command,tooltip:e.text,image:e.icon,onClick:()=>this.props.onStylingButtonClicked(e.command),tabIndex:-1,disabled:this.props.disabled,isPressed:!0===this.state.buttonState[t+a],__source:{fileName:g,lineNumber:229,columnNumber:15}}));return t+=i.length,n.createElement("div",{key:a,className:"toolbar-group",__source:{fileName:g,lineNumber:241,columnNumber:15}},i)}),n.createElement(d.a,{style:{marginLeft:"auto"},title:Object(c.a)("$1 Attachment","$1 Attachments",[this.props.attachments.length]),onClick:()=>this.setState(e=>({isAttachmentPopupOpen:!e.isAttachmentPopupOpen})),isPopupVisible:this.state.isAttachmentPopupOpen,hidePopup:()=>this.setState({isAttachmentPopupOpen:!1}),popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:222,popupPosition:"below",image:b.r,disabled:this.props.disabled,__source:{fileName:g,lineNumber:247,columnNumber:13}},e&&n.createElement(m,{attachments:this.props.attachments,noteId:e,onRemoveAttachment:t=>{r.a.removeAttachment(e,t)},onInsertMarkdown:this.props.handleAttachmentMarkdown,dragFormat:this.props.visualMode?"html":"url",__source:{fileName:g,lineNumber:268,columnNumber:17}})),n.createElement("div",{className:"toolbar-group",__source:{fileName:g,lineNumber:280,columnNumber:13}},n.createElement(d.a,{title:Object(c.a)("Text"),onClick:()=>this.props.setVisualMode(!1),isPressed:!this.props.visualMode,disabled:this.props.disabled,__source:{fileName:g,lineNumber:281,columnNumber:15}}),n.createElement(d.a,{title:Object(c.a)("Visual"),onClick:()=>this.props.setVisualMode(!0),isPressed:this.props.visualMode,disabled:this.props.disabled,__source:{fileName:g,lineNumber:287,columnNumber:15}}))),n.createElement(s.a,{isActive:this.props.isActive,pageId:this.props.pageId,onFindInPage:(e,t)=>h.a.findInPage(this.props.pageId,e,t),onFindNextInPage:(e,t,a)=>h.a.findNextInPage(this.props.pageId,e,t,a),__source:{fileName:g,lineNumber:296,columnNumber:9}})))}}N(_,"contextType",p.a)},,,,function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1 8c0-2.182 1.75-4 3.85-4h7.35C13.74 4 15 5.31 15 6.91s-1.26 3.15-2.8 3.15H6.25C5.27 10.06 4.5 9.018 4.5 8s.77-2 1.75-2h5.753v1.063H6.25c-.42 0-.7.5-.7.937 0 .436.28.97.7.97h5.95c.98 0 1.75-1.043 1.75-2.06 0-1.02-.77-1.82-1.75-1.82H4.85c-1.54 0-2.8 1.31-2.8 2.91s1.26 2.91 2.8 2.91l6.155.148V12H4.85C2.75 12 1 10.182 1 8z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M11 8L7.36568 11.6343C6.86171 12.1383 6 11.7814 6 11.0686L6 4.93137C6 4.21865 6.86171 3.86171 7.36569 4.36569L11 8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M5 8L8.63432 4.36568C9.13829 3.86171 10 4.21865 10 4.93137L10 11.0686C10 11.7814 9.13829 12.1383 8.63431 11.6343L5 8Z"/>\n</svg>\n'},function(e,t){e.exports='\x3c!-- Monochrome --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22">\n  <path d="M18.6 3.4C17.1 2 14.9 2 11 2S4.9 2 3.4 3.4C2 4.9 2 7.1 2 11s0 6.1 1.4 7.6C4.9 20 7.1 20 11 20s6.1 0 7.6-1.4C20 17.1 20 14.9 20 11s0-6.1-1.4-7.6zm-2.2 5.2l-4.2 7.2c-.3.4-.6.7-1.1.8-.6 0-1-.2-1.3-.7-.9-1.5-1.7-3-2.6-4.5-.5-.9-1.1-1.8-1.6-2.8-.6-.9 0-2 1.1-2.1.6 0 1 .2 1.3.7.4.7.8 1.3 1.2 2 .3.5.6 1 .8 1.5.4.7 1 1.1 1.8 1.1 1.2.1 2.2-.8 2.4-2v-.2c0-.4-.1-.7-.2-1-.4-.9 0-1.8 1-2 .8-.2 1.6.4 1.7 1.2 0 .2-.1.5-.3.8z"/>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(172);function i(e){delete e.isParent,delete e.parentId,delete e.isChild,delete e.children,delete e.unreadInThread}const s={getThreadsAsTree:function(e,t=!0){if(0===e.length)return[];let a;t||e.reverse();let s=[];const r=[e[0]];i(e[0]),e[0].level=0;for(let t=1;t<e.length;t++){const o=e[t-1],l=e[t];i(l),l.level=l.threadKey.length-2,l.threadKey[0]===o.threadKey[0]&&0!==l.threadKey[1]&&l.threadKey[1]===o.threadKey[1]?((!a||l.threadKey.length>o.threadKey.length)&&(a?s.push(a):s.push(o),a=o,o.isParent=!0),s.length>0&&l.threadKey.length<o.threadKey.length&&(a=s.pop()),l.parentId=a.id,l.isChild=!0,a.children=a.children||[],a.children.push(l),Object(n.a)(l.sources)||a.unreadInThread||(a.unreadInThread=!0,s.forEach(e=>e.unreadInThread=!0))):(r.push(l),a=void 0,s=[])}return t?r:r.reverse()}};t.b=s},,function(e,t,a){"use strict";var n=a(57),i=a.n(n),s=a(26),r=a.n(s),o=a(12),l=a(16);const c={},u=new class extends i.a{getQueue(e){return c[e]||r.a.Map()}emitChange(){this.emit(l.a.CHANGED)}addChangeListener(e){this.on(l.a.CHANGED,e)}removeChangeListener(e){this.removeListener(l.a.CHANGED,e)}};function m(e){c[e]&&(c[e]=void 0)}o.a.register(e=>{switch(e.actionType){case l.a.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM:t=e.pageId,a=e.id,n=e.url,c[t]=r.a.Map({id:a,url:n}),u.emitChange();break;case l.a.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM:!function(e,t,a){c[e]&&(c[e]=r.a.Map({id:t,url:a}))}(e.pageId,e.id,e.url),u.emitChange();break;case l.a.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM:m(e.pageId,e.id),u.emitChange();break;case"CHROME_TABS_REMOVED":m(e.tabId),u.emitChange()}var t,a,n;return!0}),t.a=u},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(86);function i(e){return e.map(({keywordId:e,terms:t,url:a,title:i})=>{let s;if(-1!==e){const a=n.a.getByHistoryId(e);s=a?`${a.keyword} ${t}`:`? ${t}`}return{...s?{text:s}:null,url:a,title:i,type:"OMNI_RESULT_TYPED_HISTORY",id:a}})}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(1393),r=a(2),o=a(20),l=a.n(o),c=a(491),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\vivaldiselector\\VivaldiSelector.jsx";const m={clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:()=>({}),loadingIndicator:()=>({}),menu:()=>({}),menuList:()=>({}),menuPortal:()=>({}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:()=>({}),singleValue:()=>({}),valueContainer:()=>({})};t.a=function(e){const t=()=>{var e,t;null===(e=a.current)||void 0===e||null===(t=e.select)||void 0===t||t.blur()},a=Object(n.useRef)(null),o=Object(n.useRef)(null),d=Object(n.useCallback)(()=>o.current,[]),h=Object(n.useCallback)(()=>t,[]);Object(c.a)(d,h);const{autoFocus:p,placeholder:b,commands:g,isClearable:N,openMenuOnFocus:f,isMulti:_,customStyles:v,defaultValueIdx:E}=e,C={...m,...v},w=l()("VivaldiSelector",e.className);return i.a.createElement("div",{ref:o,__source:{fileName:u,lineNumber:83,columnNumber:5}},i.a.createElement(s.a,{ref:a,className:w,classNamePrefix:"Inner",autoFocus:p||!1,defaultValue:g[E||0],isClearable:N||!1,openMenuOnFocus:f||!1,isMulti:_||!1,onChange:t=>{return a=t,void e.setSelectedItem(a);var a},styles:C,onInputChange:(e,a)=>{"menu-close"===a.action&&t()},placeholder:b,options:g,loadingMessage:()=>Object(r.a)("Loading..."),noOptionsMessage:()=>Object(r.a)("No options"),__source:{fileName:u,lineNumber:84,columnNumber:5}}))}},,function(e,t,a){"use strict";var n=a(13),i=a(6),s=a(86),r=a(114),o=a(17),l=a(7),c=a(1);const u={withPageSelection:async function(){const e=n.c.unsafeGetActivePage().get("id"),t=await l.a.utilities.getSelectedText(e);await u.withTextAndDefaultEngine(t)},withTextAndDefaultEngine:async function(e){await u.withTextAndEngine(e,s.a.getDefault(o.a.isIncognito()).id)},withTextAndEngine:async function(e,t){const a=s.a.getById(t);if(e&&a){const t=i.a.get(c.kPageSearchInBackground);await r.a.goSearchURL(e,{inCurrent:o.a.isPopup(),inBackground:t,useSearchEngine:a,addOpenerTabId:!0})}}};t.a=u},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(14),i=a(23);function s(e){var t="message/"+e.id,a=e.subject,s=i.p.internalUrl("mailpage",t,a);n.a.openURL(s)}},,function(e,t,a){"use strict";var n=a(476),i=a(120),s=a(260),r=a(98);function o(e){let t="text/calendar; charset=utf-8",a="";"string"==typeof e.content&&(a=Object(i.a)(e.content),"string"!=typeof a&&(a=""));const s=a.match(/METHOD:\s*(\w+)/);s&&(t+=`; method=${s[1]}`);const r=new n.a(t);return r.setContent(a),r}t.a={build:async function(e,t,a){let i;const l=await Object(s.e)(t),c=a.filter(e=>"application/ics"===e.mimeType);if("string"==typeof l){const e=new n.a("text/plain; charset=utf-8");e.setContent(l),c.length?(i=new n.a("multipart/alternative"),i.appendChild(e),i.appendChild(o(c[0]))):i=e}else{const e=Object(s.c)(t);i=new n.a("multipart/alternative");const r=new n.a("text/plain; charset=utf-8");r.setContent(e),i.appendChild(r);const l=a.filter(e=>e.id),u=new n.a("text/html; charset=utf-8");if(u.setContent(t),l.length>0){const e=new n.a("multipart/related");e.appendChild(u),l.forEach(t=>e.createChild(t.mimeType,{filename:t.filename,isEncoded:"string"==typeof t.content}).setContent(t.content).setHeader("Content-Disposition","inline").setHeader("Content-Id",t.id)),i.appendChild(e)}else i.appendChild(u);c.length&&i.appendChild(o(c[0]))}const u=a.filter(e=>!e.id);let m;return u.length>0?(m=new n.a("multipart/mixed"),m.appendChild(i),u.forEach(e=>{const t=m.createChild(e.mimeType,{filename:e.filename,isEncoded:"string"==typeof e.content});t.setHeader("Content-Disposition","attachment"),t.setContent(e.content)})):m=i,m.addHeader("message-id","<"+e.messageId+">"),m.addHeader("from",Object(r.e)(e.from)),m.addHeader("to",Object(r.e)(e.to)),m.addHeader("cc",Object(r.e)(e.cc)),m.addHeader("subject",e.subject),m.addHeader("date",new Date(e.sentDate).toUTCString().replace(/GMT/,"+0000")),e.inReplyTo&&e.inReplyTo.length>0&&m.addHeader("in-reply-to","<"+e.inReplyTo+">"),e.references&&e.references.length>0&&m.addHeader("references","<"+e.references.join("> <")+">"),m.build()}}},,,function(e,t,a){"use strict";function n(e){return e.replace(/%25/g,"%2525").replace(/%(?![0-9a-fA-F]{2})/g,"%25").replace(/%09/g,"%2509").replace(/%0D%0A/g,"%250D%250A")}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";var n=a(28),i=a(0),s=a.n(i),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksfoldersflatlist.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(){return n.b.hasBeenInitialized()?{nodes:n.b.getFoldersWithin([n.b.getRootNode()],0),bookmarksBarFolderId:n.b.getBookmarkBarFolderId()}:{nodes:null,bookmarksBarFolderId:void 0}}class c extends s.a.Component{constructor(...e){super(...e),o(this,"state",l()),o(this,"_onStoreChange",()=>{this.setState(l())}),o(this,"getFolderId",e=>{if(this.props.selectedItemID){const t=e.find(e=>e.id===this.props.selectedItemID);if(t)return t.id;console.warn("Bookmark folder not found")}return this.state.bookmarksBarFolderId})}UNSAFE_componentWillMount(){n.b.addChangeListener(this._onStoreChange)}componentWillUnmount(){n.b.removeChangeListener(this._onStoreChange)}render(){if(!this.state.nodes)return null;const e=this.getFolderId(this.state.nodes),t=this.state.nodes.find(t=>t.id===e).title,a=this.state.nodes.map(e=>s.a.createElement("option",{key:"dir_"+e.id,value:e.id,__source:{fileName:r,lineNumber:53,columnNumber:7}}," ".repeat(3*e.level),e.title));return s.a.createElement("span",{className:"bookmark-folder-picker",__source:{fileName:r,lineNumber:60,columnNumber:7}},s.a.createElement("input",{type:"text",value:t,tabIndex:"-1",readOnly:!0,__source:{fileName:r,lineNumber:61,columnNumber:9}}),s.a.createElement("select",{className:"bookmark-folders",value:e,onChange:this.props.onChange,__source:{fileName:r,lineNumber:62,columnNumber:9}},a))}}t.a=c},function(e,t,a){"use strict";var n=a(150),i=a(90),s=a(11),r=a(6),o=a(0),l=a.n(o),c=a(2),u=a(312),m=a(84),d=a.n(m),h=a(775),p=a(1),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\downloadDialog.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=Object(h.a)("input");class f extends l.a.Component{constructor(...e){super(...e),g(this,"state",{shown:!0,modalShown:!1,askNextTime:!1}),g(this,"onOpen",()=>{this.props.customData.request.allow("open"),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&r.a.get(p.kDownloadsOpenPanelOnNew)&&n.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),g(this,"onSave",()=>{this.props.customData.request.allow(),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&r.a.get(p.kDownloadsOpenPanelOnNew)&&n.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),g(this,"onSaveAs",()=>{this.props.customData.request.allow("saveas"),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&r.a.get(p.kDownloadsOpenPanelOnNew)&&n.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),g(this,"onCancel",()=>{this.props.customData.request.deny(),this.setState(e=>({shown:!e.shown})),this.close()}),g(this,"close",()=>{s.a.set(p.kDownloadsStartAutomatically,this.state.askNextTime),this.props.onClose()}),g(this,"onAskDownloadChanged",({target:e})=>{this.setState({askNextTime:e.checked})})}componentDidMount(){this.refs.defaultAction.focus()}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}render(){const e=this.props.customData.url.startsWith("data:");let t="",a="";this.props.customData.suggestedFilename&&e||({hostname:t,pathname:a}=d.a.parse(this.props.customData.url));const n=this.props.customData.suggestedFilename?this.props.customData.suggestedFilename:(a||"").split("/").pop(),s=e?Object(c.a)("Data URL"):t,r=-1===this.props.customData.fileSize?Object(c.a)("Unknown"):Object(u.a)(this.props.customData.fileSize);return l.a.createElement(i.a,{ignoreEscape:!1,onRequestClose:this.onCancel,__source:{fileName:b,lineNumber:121,columnNumber:7}},l.a.createElement("div",{className:"dialog-download",__source:{fileName:b,lineNumber:123,columnNumber:9}},l.a.createElement("header",{className:"dialog-header",__source:{fileName:b,lineNumber:124,columnNumber:11}},l.a.createElement("h1",{className:"dialog-title",title:n,__source:{fileName:b,lineNumber:125,columnNumber:13}},Object(c.a)("Download “$1”?",[n]))),l.a.createElement("div",{className:"dialog-content",__source:{fileName:b,lineNumber:131,columnNumber:11}},l.a.createElement("p",{__source:{fileName:b,lineNumber:132,columnNumber:13}},l.a.createElement("span",{className:"label",title:n,__source:{fileName:b,lineNumber:133,columnNumber:15}},Object(c.a)("File Name:")),n),l.a.createElement("p",{__source:{fileName:b,lineNumber:136,columnNumber:13}},l.a.createElement("span",{className:"label",__source:{fileName:b,lineNumber:136,columnNumber:16}},Object(c.a)("File Size:")),r),l.a.createElement("p",{__source:{fileName:b,lineNumber:137,columnNumber:13}},l.a.createElement("span",{className:"label",__source:{fileName:b,lineNumber:137,columnNumber:16}},Object(c.a)("Host:")),s),l.a.createElement("label",{className:"autosave",__source:{fileName:b,lineNumber:138,columnNumber:13}},l.a.createElement("input",{type:"checkbox",onChange:this.onAskDownloadChanged,__source:{fileName:b,lineNumber:139,columnNumber:15}}),l.a.createElement("span",{__source:{fileName:b,lineNumber:142,columnNumber:15}},Object(c.a)("Always Save Files to Default Download Location")))),l.a.createElement("footer",{className:"dialog-footer",__source:{fileName:b,lineNumber:145,columnNumber:11}},l.a.createElement("input",{type:"button",className:"primary",onClick:this.onSave,ref:"defaultAction",value:Object(c.a)("Save"),__source:{fileName:b,lineNumber:146,columnNumber:13}}),l.a.createElement("input",{type:"button",onClick:this.onSaveAs,value:Object(c.a)("Save As..."),__source:{fileName:b,lineNumber:152,columnNumber:13}}),l.a.createElement(N,{type:"button",onClick:this.onOpen,value:Object(c.a)("Open"),__source:{fileName:b,lineNumber:156,columnNumber:13}}),l.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(c.a)("Cancel"),__source:{fileName:b,lineNumber:160,columnNumber:13}}))))}}t.a=f},function(e,t,a){"use strict";var n=a(0),i=a.n(n);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){return class extends i.a.Component{constructor(...e){super(...e),r(this,"state",{disabled:!0}),r(this,"enable",()=>this.setState({disabled:this.props.disabled||!1}))}componentDidMount(){this.timeout=setTimeout(this.enable,500)}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{disabled:t,...a}=this.props,n=e||"input";return i.a.createElement(n,s({},a,{disabled:this.state.disabled,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\withDelay.jsx",lineNumber:31,columnNumber:14}}))}}}},,,,,,function(e,t,a){"use strict";t.a=(e,t)=>({radiusRound:e>-1?"100px":0,radiusRounded:e>-1?"2px":0,radiusRoundedLess:e>0?"2px":0,radius:`${e}px`,radiusHalf:`${e/2}px`,scrollbarWidth:t?"12px":"15px"})},,function(e,t,a){"use strict";t.a=(e,t)=>{for(const a of e){let e=!1;for(const n of t)0!==n.indexOf(a)||(e=!0);if(!e)return!1}return!0}},function(e,t,a){"use strict";var n=a(21),i=a(14),s=a(11),r=a(0),o=a.n(r),l=a(22),c=a(2),u=a(4),m=a(1),d=a(9),h=a(169),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\game\\GameButton.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=[m.kStartpageSpeedDialGameButtonShow];function N(){return o.a.createElement("div",{className:"GamePreviewPopup",__source:{fileName:p,lineNumber:80,columnNumber:11}},o.a.createElement("h2",{className:"GamePreviewPopup-HeaderText",__source:{fileName:p,lineNumber:81,columnNumber:5}},Object(c.a)("Vivaldia Game")),o.a.createElement("button",{className:"GamePreviewPopup-SettingsButton",title:Object(c.a)("Settings"),dangerouslySetInnerHTML:{__html:d.vd.large},onClick:()=>{i.a.openURL("vivaldi://settings/startpage/",{inBackground:!1})},__source:{fileName:p,lineNumber:82,columnNumber:5}}),o.a.createElement("img",{className:"GamePreviewPopup-PreviewImage",src:"resources/game_screenshot.png",__source:{fileName:p,lineNumber:88,columnNumber:5}}),o.a.createElement("button",{onClick:()=>{i.a.openURL("vivaldi://game/",{inCurrent:!1,inBackground:!1})},className:"GamePreviewPopup-StartButton FormButton primary",title:Object(c.a)("Click to Play"),__source:{fileName:p,lineNumber:89,columnNumber:5}},Object(c.a)("Click to Play")))}class f extends o.a.PureComponent{constructor(...e){super(...e),b(this,"state",{isPopupOpen:!1,isIconHovered:!1}),b(this,"hidePopup",()=>{this.setState({isPopupOpen:!1})}),b(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))})}render(){const{isStartPage:e}=this.props,t=this.state.isPopupOpen||this.state.isIconHovered&&e?"resources/game_icon_alternate.png":"resources/game_icon.png",a=[{type:"checkbox",handler:()=>{s.a.toggle(m.kStartpageSpeedDialGameButtonShow,!0,!1)},checked:this.props.prefValues[m.kStartpageSpeedDialGameButtonShow],...Object(u.a)("Show Game on Speed Dial")}];return o.a.createElement(l.a,{className:"GameButton",customizeMenu:this.props.customizeMenu||void 0,tooltip:Object(c.a)("Vivaldia the game"),popupPosition:this.props.popupPosition||"above",name:this.props.name||"Game",image:d.wb[this.props.size||"large"],imagePath:e?t:void 0,mimeType:this.props.mimeType||"vivaldi/x-button-toolbar",mimeContent:this.props.name||"Game",menu:a,hidePopup:this.hidePopup,onClick:this.togglePopup,isPopupVisible:this.state.isPopupOpen,menuOrigin:this.props.menuOrigin||void 0,popupPosition:this.props.popupPosition||"above",popupWidth:180,onDragStart:this.props.onDragStart||h.default,onDragEnd:this.props.onDragEnd||void 0,onDrop:this.props.onDrop||void 0,onDragEnter:this.props.onDragEnter||void 0,onPointerEnter:()=>this.setState({isIconHovered:!0}),onPointerLeave:()=>this.setState({isIconHovered:!1}),popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",__source:{fileName:p,lineNumber:130,columnNumber:12}},o.a.createElement(N,{__source:{fileName:p,lineNumber:155,columnNumber:7}}))}}t.a=Object(n.a)(f,g)},function(e,t,a){"use strict";a.d(t,"b",(function(){return d}));var n=a(21),i=a(154),s=a(29),r=a(0),o=a.n(r),l=a(2),c=a(1),u=a(173);const m=[c.kMailCountersPanelSwitcherEnabled,c.kMailCountersPanelUnseenEnabled];function d(e){if(e>0)return e>9999?Object(l.a)("$1 K",[Math.floor(e/1e3)]):e.toString()}t.a=Object(i.a)(Object(n.a)((function(e){const[t,a]=Object(r.useState)(0),[n,i]=Object(r.useState)(0);if(Object(r.useEffect)(()=>{function e(e){if("counters"!==e.target)return;const t=s.a.getCounters("All Messages","Unread");a(t?t.unseen:0),i(t?t.unread:0)}return s.a.addChangeListener(e),function(){s.a.removeChangeListener(e)}},[]),!e.prefValues[c.kMailCountersPanelSwitcherEnabled])return null;const l=d(e.prefValues[c.kMailCountersPanelUnseenEnabled]?t:n);if(l){const t=e.prefValues[c.kMailCountersPanelUnseenEnabled]?{}:Object(u.e)(e.vivaldiSettings.BROWSER_COLOR_FG,e.vivaldiSettings.BROWSER_COLOR_BG);return(o.a.createElement("span",{className:"button-badge",style:t,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailUnseenCounter.jsx",lineNumber:82,columnNumber:7}},l))}return null}),m),["BROWSER_COLOR_FG","BROWSER_COLOR_BG"])},function(e,t,a){"use strict";var n=a(29),i=a(90),s=a(0),r=a.n(s),o=a(2),l=a(3),c=a(66),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailCustomLabelDlg.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends r.a.Component{constructor(...e){super(...e),m(this,"state",{newLabel:""}),m(this,"onSave",()=>{const e=Object(c.a)(this.state.newLabel);this.props.onClose(!0,e)}),m(this,"onCancel",()=>{this.props.onClose(!1,this.state.newLabel)}),m(this,"doesLabelExist",e=>n.a.getByAccountId(l.E).map(e=>e.name.toLowerCase()).includes(e.toLowerCase())),m(this,"newLabelChanged",e=>{const t=Object(c.u)(e.target.value);t!==this.state.newLabel&&this.setState({newLabel:t})}),m(this,"onKeyDown",e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),this.onSave())})}render(){return r.a.createElement(i.a,{onRequestClose:this.onCancel,viewMode:this.props.viewMode,__source:{fileName:u,lineNumber:58,columnNumber:7}},r.a.createElement("header",{className:"dialog-header",__source:{fileName:u,lineNumber:59,columnNumber:9}},r.a.createElement("h1",{className:"dialog-title",__source:{fileName:u,lineNumber:60,columnNumber:11}},Object(o.a)("Create New Label"))),r.a.createElement("form",{onSubmit:this.onSave,__source:{fileName:u,lineNumber:62,columnNumber:9}},r.a.createElement("div",{className:"dialog-content",__source:{fileName:u,lineNumber:63,columnNumber:11}},r.a.createElement("input",{type:"text",className:"new-label",onChange:this.newLabelChanged,onKeyDown:this.onKeyDown,value:this.state.newLabel,autoFocus:!0,__source:{fileName:u,lineNumber:64,columnNumber:13}})),r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:u,lineNumber:71,columnNumber:11}},r.a.createElement("input",{type:"submit",className:"primary",value:this.doesLabelExist(this.state.newLabel)?Object(o.a)("Already Exists"):Object(o.a)("Save"),disabled:""===this.state.newLabel||this.doesLabelExist(this.state.newLabel),__source:{fileName:u,lineNumber:72,columnNumber:13}}),r.a.createElement("input",{type:"button",value:Object(o.a)("Cancel"),onClick:this.onCancel,__source:{fileName:u,lineNumber:79,columnNumber:13}}))))}}t.a=d},function(e,t,a){"use strict";var n=a(68),i=a(4),s=a(3);t.a=function(e,t){const a=[];return e?(a.push({handler:()=>n.a.prepareDelete(!0),...Object(i.a)("mail","Delete Permanently")}),t!==s.S.toolbar&&a.push({handler:n.a.undelete,...Object(i.a)("mail","Undelete")})):t!==s.S.toolbar&&a.push({handler:()=>n.a.prepareDelete(!1),...Object(i.a)("mail","Move to Trash")}),a}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(620),r=a(20),o=a.n(r),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\StatusInfo.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends i.a.PureComponent{constructor(...e){super(...e),c(this,"state",{status:s.a.getState().status,visible:!1}),c(this,"onStoreChange",()=>{clearTimeout(this._statusTimeout),clearInterval(this._persistentStatusInterval);const{status:e,persistentStatuses:t}=s.a.getState();e?this.setState({status:e,visible:!0}):1===t.size?this.setState({status:[...t.values()][0],visible:!0}):t.size>1?this._persistentStatusInterval=setInterval(()=>{this._persistentStatusIndex=this._persistentStatusIndex%t.size;const e=[...t.values()][this._persistentStatusIndex++];this.setState({status:e,visible:!0})},2e3):this._statusTimeout=setTimeout(()=>this.setState({visible:!1}),200)})}componentDidMount(){this._statusStoreToken=s.a.addListener(this.onStoreChange),this._persistentStatusIndex=0}componentWillUnmount(){clearTimeout(this._statusTimeout),clearInterval(this._persistentStatusInterval),this._statusStoreToken.remove()}render(){return i.a.createElement("p",{style:this.props.style,className:o()({StatusInfo:!0,"StatusInfo--Visible":this.state.visible}),__source:{fileName:l,lineNumber:76,columnNumber:7}},i.a.createElement("span",{className:"StatusInfo-Content",__source:{fileName:l,lineNumber:82,columnNumber:9}},this.state.status))}}t.a=u},function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(2);const i="▽",s="▼",r="△",o="▲",l="⭍",c={not_synced:Object(n.a)("Not synced"),success:Object(n.a)("Success"),in_progress:Object(n.a)("In progress..."),auth_error:Object(n.a)("Sync server refused your credentials"),server_error:Object(n.a)("Sync server encountered an error"),network_error:Object(n.a)("Network error"),client_error:Object(n.a)("Client error"),conflict:Object(n.a)("Conflict with another client’s data occurred"),throttled:Object(n.a)("Sync server throttled the connection"),other_error:Object(n.a)("Unexpected error")};function u(e,t){return function(e,t){switch(e){case"not_synced":case"in_progress":return t?i:r;case"success":return t?s:o;default:return l}}(e,t)+" "+(t?Object(n.a)("Download: $1",[c[e]]):Object(n.a)("Upload: $1",[c[e]]))}function m(e){return[u(e.downloadUpdatesStatus,!0),u(e.commitStatus,!1)]}},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(1408),s=a(1409),r=a(50),o=a(1397),l=a(28),c=a(1283),u=a(1410),m=a(271),d=a(21),h=a(36),p=a(189),b=a(152),g=a(14),N=a(13),f=a(1284),_=a(1398),v=a(1411),E=a(11),C=a(1285),w=a(1286),O=a(40),y=a.n(O),S=a(272),T=a(857),k=a(86),A=a(589),I=a(1288),D=a(1289),M=a(623),P=a(466),x=a(22),L=a(157),j=a(1412),R=a(1401),B=a(377),F=a(84),U=a.n(F),H=a(114),V=a(108),W=a(180),z=a(25),G=a(17),K=a(2),Y=a(10),$=a(517),X=a(4),Z=a(7),Q=a(26),q=a(37),J=a(1),ee=a(284),te=a(592),ae=a(228),ne=a(46),ie=a(79),se=a(9),re=a(544),oe=a(497),le=a(23),ce="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlBar.jsx";function ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function me(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,he(e,t,"get"))}function de(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,he(e,t,"set"),a),a}function he(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const pe=[J.kAddressBarAutocompleteEnabled,J.kAddressBarExtensionsVisible,J.kAddressBarExtensionsRenderInDropdown,J.kAddressBarExtensionsShowAllToggle,J.kAddressBarExtensionsShowHiddenToggle,J.kAddressBarInlineSearchEnabled,J.kAddressBarPosition,J.kAddressBarSearchDisplay,J.kAddressBarSearchSuggestEnabled,J.kAddressBarShowProfile,J.kAddressBarShowQrGenerator,J.kAddressBarTypedHistoryEnabled,J.kPopupsShowInTab,J.kKeyboardTabToAll,J.kAddressBarSearchShowFavicon,J.kTabsFocusWebview];function be(e){return{isTypedHistoryOpen:V.a.showTypedHistory(),typedHistory:V.a.getTypedHistory(),...V.a.getUrlfieldStateFromId(e)}}function ge(e){return{blockedPageContent:b.a.getblockedPageContents(e),blockedPopups:b.a.getBlockedPopupsById(e),permissionInfo:b.a.getPermissionsById(e),sslInfo:b.a.getSSLInfo(e)}}function Ne(){Z.a.utilities.showPasswordDialog()}function fe(e){if(!e)return;const t=k.a.getByQuery(e);return t&&t.keyword&&e.substring(t.keyword.length)?t:void 0}function _e(e){e.preventDefault(),H.a.toggleTypedHistory()}function ve(e){e.preventDefault(),E.a.toggle(J.kAddressBarExtensionsVisible,!0,!1)}function Ee({className:e}){return n.createElement("div",{className:e,title:Object(K.a)("Private Browsing Window"),dangerouslySetInnerHTML:{__html:a(866)+Object(K.a)("Private")},__source:{fileName:ce,lineNumber:261,columnNumber:5}})}function Ce(e){return function(e){const t=Object(ae.b)(e,["scheme","host","tld","port","path","query","ref"]);return Object(ae.d)(t).substring(0,q.j)}(e)}var we=new WeakMap;class Oe extends n.PureComponent{constructor(t,a){super(t),we.set(this,{writable:!0,value:void 0}),ue(this,"passwordElm",n.createRef()),ue(this,"siteInfoElm",n.createRef()),ue(this,"refUrlField",n.createRef()),ue(this,"getReaderContextMenu",()=>[{handler:()=>h.a.showSettings("webpages"),visible:!1===G.a.isGuestSession(this.context.vivaldiWindowId),...Object(X.a)("Configure Reader View")}]),ue(this,"_setBookmarkedState",Object(ee.a)(e=>{if(!me(this,we))return;const t=l.b.findByUrl(e);this.setState({bookmarkData:t?{...t}:void 0})},100)),ue(this,"_onUrlbarStoreChanged",()=>{const e=be(this.props.id);this.setState({editUrl:e.editUrl,isTypedHistoryOpen:e.isTypedHistoryOpen,typedHistory:e.typedHistory})}),ue(this,"_onNavigationStoreChanged",e=>{const t=()=>{const e=ge(this.props.id);this.setState({blockedPageContent:e.blockedPageContent,blockedPopups:e.blockedPopups,permissionInfo:e.permissionInfo,sslInfo:e.sslInfo})};"setPermissionInfo"===e?setTimeout(t,200):t()}),ue(this,"_onSearchEngineStoreChanged",()=>{this.setState({defaultSearchEngine:k.a.getDefault(G.a.isIncognito(this.context.vivaldiWindowId))})}),ue(this,"_onRssDetectStoreChanged",()=>{this.setState({feeds:T.a.getState()})}),ue(this,"_onPageStoreChanged",()=>{const e=N.c.getPageById(this.props.id);this.setState({isReaderModeActive:Boolean(e&&e.extData.get("readerMode")),supportsReaderMode:!!e&&e.supportsReaderMode})}),ue(this,"selectAddressField",async()=>{var e;me(this,we)&&(null===(e=this.refUrlField.current)||void 0===e||e.select())}),ue(this,"focusAddressField",()=>{var e;me(this,we)&&(null===(e=this.refUrlField.current)||void 0===e||e.focus())}),ue(this,"blurAddressField",()=>{var e;me(this,we)&&(null===(e=this.refUrlField.current)||void 0===e||e.blur(),this.hideDropdown())}),ue(this,"onSearch",(e,t,a={})=>{t&&t.url&&(H.a.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...a}),this.hideDropdown())}),ue(this,"onSearchAddTypedSearchHistory",Object(te.a)(this.onSearch,{addTypedSearchHistory:!0})),ue(this,"_onBookmarkStoreChanged",()=>{this._setBookmarkedState(this.props.url)}),ue(this,"_onTabStoreChanged",e=>{"newTab"!==e.action&&"closeTab"!==e.action||this.hideDropdown()}),ue(this,"_onWebpageviewStoreChanged",t=>{if("WEBPAGEVIEW_ACTIONS"===t.type){var a;if("focusAddressField"===t.action)this.onCloseCreateBookmarkCallout(),this.focusAddressField(),null===(a=this.refUrlField.current)||void 0===a||a.select();else if("urlPasteAndGo"===t.action&&t.payload){const e=t.payload;this.urlPasteAndGo(e)}"focusSearchField"===t.action&&(this.state.isAddressBarVisible||this.focusSearchField())}"URLFIELD_BLUR"===t.type&&e.nextTick(()=>this.hideDropdown())}),ue(this,"focusSearchField",()=>{void 0!==this.refs.searchField&&this.refs.searchField&&this.refs.searchField.setFocusInSearchField()}),ue(this,"urlPasteAndGo",async e=>{const{clipboardText:t}=e;if(!t)return;const a=V.a.getUrlfieldStateFromId(this.props.id).isActive,n=y.a.findDOMNode(this.refUrlField.current).querySelector("input"),i=a?n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd):t;this.blurAddressField(),await H.a.go([i],{transition:L.a.TYPED,addTypedSearchHistory:!1,enableSearch:!0,...e.openOptions})}),ue(this,"onUrlFieldFocus",()=>{Object(V.b)(this.props.id,!0)}),ue(this,"onUrlFieldBlur",()=>{Object(V.b)(this.props.id,!1)}),ue(this,"onPasswordFocus",e=>{Z.a.utilities.isDialogOpen("password",e=>{Z.a.utilities.focusDialog("password",e=>{})})}),ue(this,"compareProtocol",e=>{if(Object(ne.n)(e)&&Object(ne.g)(e)&&this.props.url&&Object($.a)(e)===Object($.a)(this.props.url)){const t=U.a.parse(this.props.url).protocol,a=U.a.format({host:e,protocol:t});if(Object(ne.o)(a))return a}return e}),ue(this,"handleUrlFieldSubmit",async({url:t,options:a})=>{const n=fe(this.state.editUrl),i=this.props.id;b.a.on("change",(async function t(a){if(!a||a.pageId!==i)return;["start","stop"].includes(a.navigationState.trigger)&&(await new Promise(e.nextTick),b.a.off("change",t),H.a.setUrlfieldState(i,{editUrl:void 0}))}));const s=Boolean(n||this.props.prefValues[J.kAddressBarInlineSearchEnabled]);n||(t=this.compareProtocol(t)),await H.a.go([t],{...a,enableSearch:s,addTypedSearchHistory:!1})}),ue(this,"easterEggNavigation",async()=>{var e;const t=null===(e=this.refUrlField.current)||void 0===e?void 0:e.autocompletedValue;t&&(this.hideDropdown(),await H.a.go([le.p.getUrl(t)],{enableSearch:!0,transition:L.a.TYPED,addTypedSearchHistory:!1}))}),ue(this,"onSiteInfoButtonFieldGo",()=>{this.easterEggNavigation()}),ue(this,"initOriginUrl",()=>{this.props.id&&g.a.setOrigin(this.props.id,this.context.vivaldiWindowId,Ce(this.state.urlFragments))}),ue(this,"onUrlFieldDrop",e=>{const t=e.dataTransfer;if(!t)return;const a=t.getData("text/uri-list");if(a.length>0){const e=a.split("\n");e.length>0&&(this.initOriginUrl(),H.a.go(e))}else{const e=t.getData("text/plain");e.length>0&&(Object(ne.o)(e)?(this.initOriginUrl(),H.a.go([e])):(H.a.setUrlfieldState(this.props.id,{editUrl:e}),this.focusAddressField()))}}),ue(this,"togglePasswordIcon",(e,t)=>{e===this.context.vivaldiWindowId&&this.setState(e=>({showPasswordIcon:t}))}),ue(this,"setUrlDragEvent",e=>{const t=this.context.document.createElement("img"),a=G.a.isIncognito(this.context.vivaldiWindowId);t.src=this.props.favIconUrl||"/resources/default_favicon_64.png",e.dataTransfer.setDragImage(t,Math.min(t.width-t.width/3,64),Math.min(t.height-t.height/3,64)),t.remove();const n=N.c.unsafeGetActivePage();Object(oe.a)(e,this.props.url,n.title,a),e.dataTransfer.effectAllowed="all"}),ue(this,"onReaderModeClicked",()=>{this.state.isReaderModeActive?g.a.setReaderState(this.props.id,!1):g.a.setReaderState(this.props.id,!0)}),ue(this,"onCreateBookmarkCallout",()=>{this.props.active&&this.props.url&&this.setState({createBookmarkCallout:!0})}),ue(this,"onCloseCreateBookmarkCallout",()=>{this.setState({createBookmarkCallout:!1})}),ue(this,"onPopupAllowed",e=>{p.a.removeBlockedPopup(this.props.id,e.targetUrl),this.refs.popupBlockerNotificator.onDialogClosed(),this.openNewPopAsTabOrWindow(e)}),ue(this,"openNewPopAsTabOrWindow",e=>{h.a.openNewPopAsTabOrWindow(e,this.context.vivaldiWindowId)}),ue(this,"_isEditingUrl",()=>{const{editUrl:e}=this.state;return void 0!==e&&(""===e||Ce(this.state.urlFragments)!==e)}),ue(this,"hideDropdown",()=>{var e;null===(e=this.refUrlField.current)||void 0===e||e.hideDropdown()}),ue(this,"_storeDialogAnchorRect",(e,t)=>{const a="top"===this.props.prefValues[J.kAddressBarPosition]?"down":"up";Z.a.zoom.getVivaldiUIZoom(n=>{Z.a.utilities.setDialogPosition(t,this.context.vivaldiWindowId,{left:Math.round(e.left*n),top:Math.round(e.top*n),width:Math.round(e.width*n),height:Math.round(e.height*n)},a)})}),ue(this,"_updateDialogPositions",()=>{const e=this.passwordElm.current;if(e){const t=e.getRect();t&&this._passwordPopupPos!==t&&(this._passwordPopupPos=t,this._storeDialogAnchorRect({left:t.left,top:t.top,width:t.width,height:t.height},"password"))}const t=this.siteInfoElm.current&&this.siteInfoElm.current.refs.siteInfoButton;if(t&&t instanceof Element){const e=t.getBoundingClientRect();this._permissionPopupPos!==e&&(this._permissionPopupPos=e,this._storeDialogAnchorRect({left:e.left,top:e.top,width:e.width,height:e.height},"permission"))}Y.a.windows.get(this.context.vivaldiWindowId,{},e=>{if(!Y.a.runtime.lastError){let{left:t=0,top:a=0,width:n,height:i}=e;n=n||0,i=i||0,this._storeDialogAnchorRect({left:Math.round(t+n/2),top:Math.round(a+i/2),width:0,height:0},"chromecast")}})}),ue(this,"_onWindowStoreChanged",()=>{const e=G.a.getVisibleUI(this.context.vivaldiWindowId).addressBar;this.state.isAddressBarVisible!==e&&this.setState({isAddressBarVisible:e})}),ue(this,"_onWindowPositionChanged",e=>{e===this.context.vivaldiWindowId&&this._sendBatchedUpdatedBounds()}),ue(this,"_sendBatchedUpdatedBounds",()=>{this._resizeDelayRunning||(this._resizeDelayRunning=!0,setTimeout(()=>{this._updateDialogPositions(),this._resizeDelayRunning=!1},500))}),ue(this,"onUrlbarResized",e=>{this._sendBatchedUpdatedBounds()});const i=be(t.id),s=ge(t.id),r=N.c.getPageById(t.id),o=l.b.findByUrl(t.url);this.state={isBaseDomainObscured:!1,topSites:[],urlFragments:Object(ae.f)(),createBookmarkCallout:!1,hasFeed:!0,bookmarkData:o?{...o}:void 0,showPasswordIcon:!1,isAddressBarVisible:G.a.getVisibleUI(a.vivaldiWindowId).addressBar,defaultSearchEngine:k.a.getDefault(G.a.isIncognito(a.vivaldiWindowId)),feeds:T.a.getState(),isReaderModeActive:Boolean(r&&r.extData.get("readerMode")),supportsReaderMode:!!r&&r.supportsReaderMode,editUrl:i.editUrl,isTypedHistoryOpen:i.isTypedHistoryOpen,typedHistory:i.typedHistory,blockedPageContent:s.blockedPageContent,blockedPopups:s.blockedPopups,permissionInfo:s.permissionInfo,sslInfo:s.sslInfo}}static getDerivedStateFromProps(e){const{id:t}=e,a=be(t),n=ge(t),i=N.c.getPageById(t),s=l.b.findByUrl(e.url);return{isReaderModeActive:Boolean(i&&i.extData.get("readerMode")),supportsReaderMode:!!i&&i.supportsReaderMode,editUrl:a.editUrl,isTypedHistoryOpen:a.isTypedHistoryOpen,typedHistory:a.typedHistory,blockedPageContent:n.blockedPageContent,blockedPopups:n.blockedPopups,permissionInfo:n.permissionInfo,sslInfo:n.sslInfo,bookmarkData:s?{...s}:void 0}}componentDidUpdate(e,t){const a=e.url!==this.props.url,n=e.id!==this.props.id;n&&this.hideDropdown(),!this.props.prefValues[J.kTabsFocusWebview]&&n&&V.a.getUrlfieldStateFromId(this.props.id).isActive&&Object(re.b)(()=>{var e;return null===(e=this.refUrlField.current)||void 0===e?void 0:e.select()}),a&&(this._setBookmarkedState(this.props.url),Object(ae.e)(this.props.url).then(e=>{this.setState({urlFragments:e})}))}componentDidMount(){de(this,we,!0),Object(ae.e)(this.props.url).then(e=>{this.setState({urlFragments:e})}),G.a.isGuestSession(this.context.vivaldiWindowId)||Y.a.topSites.get(e=>{this.setState({topSites:e})}),l.b.addChangeListener(this._onBookmarkStoreChanged),W.a.addChangeListener(this._onWebpageviewStoreChanged),M.a.addChangeListener(this._onTabStoreChanged),V.a.addChangeListener(this._onUrlbarStoreChanged),b.a.addChangeListener(this._onNavigationStoreChanged),k.a.addChangeListener(this._onSearchEngineStoreChanged),N.c.addChangeListener(this._onPageStoreChanged),Z.a.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),Z.a.utilities.onPasswordIconStatusChanged.addListener(this.togglePasswordIcon),this._windowStoreToken=G.a.addListener(this._onWindowStoreChanged),this._rssDetectStoreToken=T.a.addListener(this._onRssDetectStoreChanged),V.a.getUrlfieldStateFromId(this.props.id).isActive&&Object(re.b)(()=>{var e;return null===(e=this.refUrlField.current)||void 0===e?void 0:e.select()})}componentWillUnmount(){de(this,we,!1),l.b.removeChangeListener(this._onBookmarkStoreChanged),W.a.removeChangeListener(this._onWebpageviewStoreChanged),M.a.removeChangeListener(this._onTabStoreChanged),V.a.removeChangeListener(this._onUrlbarStoreChanged),b.a.removeChangeListener(this._onNavigationStoreChanged),k.a.removeChangeListener(this._onSearchEngineStoreChanged),N.c.removeChangeListener(this._onPageStoreChanged),Z.a.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),Z.a.utilities.onPasswordIconStatusChanged.removeListener(this.togglePasswordIcon),this._windowStoreToken.remove(),this._rssDetectStoreToken.remove()}render(){var e,t;const{prefValues:a,url:d}=this.props,h=fe(this.state.editUrl),p=le.p.isInternalUrl(d)||d.startsWith("chrome://"),b=Object(ne.n)(escape(d))&&!(p||Object(ne.m)(d)||Object(ne.k)(d)),g=this.state.typedHistory.length>0?Object(K.a)("Show typed history"):Object(K.a)("Enter an address to activate typed history"),N=Object(K.a)("Save your password"),E=a[J.kAddressBarTypedHistoryEnabled]&&!0!==this.props.readonly,O="top"===a[J.kAddressBarPosition]?"bottomLeft":"topLeft",y="top"===a[J.kAddressBarPosition]?"below":"above",T=this.state.feeds.get(this.props.id)||Object(Q.List)(),k=T.size,M=Ce(this.state.urlFragments),L=function(e){return Boolean(e)&&!le.p.isInternalUrl(e)&&!le.p.isNewTabPage(e)}(d),{isBaseDomainObscured:F}=this.state,U=Object(ie.b)(d),H=l.b.isReady()&&void 0!==this.props.id&&U;return n.createElement(m.a,{focusName:"focus_addressbar",className:"UrlBar toolbar toolbar-mainbar toolbar-large",__source:{fileName:ce,lineNumber:958,columnNumber:7}},this.props.showNavigationButtons&&n.createElement(P.a,{name:J.kToolbarsNavigation,className:"toolbar-mainbar",menuOrigin:O,popupPosition:y,size:"large",__source:{fileName:ce,lineNumber:962,columnNumber:11}}),n.createElement("div",{className:"UrlBar-AddressField",__source:{fileName:ce,lineNumber:971,columnNumber:9}},n.createElement("div",{className:"toolbar-insideinput",__source:{fileName:ce,lineNumber:973,columnNumber:13}},n.createElement(c.a,{blockerVisible:b,position:y,tabIndex:a[J.kKeyboardTabToAll],pageId:this.props.id,url:d,__source:{fileName:ce,lineNumber:974,columnNumber:15}})),h?n.createElement("div",{className:"SiteInfoButton",__source:{fileName:ce,lineNumber:985,columnNumber:15}},n.createElement("img",{className:"SiteInfoButton-SearchEngineFavicon",src:h.faviconUrl,__source:{fileName:ce,lineNumber:986,columnNumber:17}})):n.createElement(D.a,{ref:this.siteInfoElm,draggable:!p,isEditingUrl:this._isEditingUrl(),isInternal:p,onDragStart:this.setUrlDragEvent,fieldGo:this.onSiteInfoButtonFieldGo,sslIssuer:null===(e=this.state.sslInfo)||void 0===e?void 0:e.issuer,sslState:null===(t=this.state.sslInfo)||void 0===t?void 0:t.state,tabIndex:a[J.kKeyboardTabToAll],__source:{fileName:ce,lineNumber:991,columnNumber:15}}),n.createElement("div",{className:"UrlBar-UrlFieldWrapper",__source:{fileName:ce,lineNumber:1004,columnNumber:11}},n.createElement(S.a,{className:"observer",onResize:this.onUrlbarResized,__source:{fileName:ce,lineNumber:1005,columnNumber:13}},n.createElement(B.a,{stateResetKey:p||this.props.id,ref:this.refUrlField,onBaseDomainObscured:e=>this.setState({isBaseDomainObscured:e}),urlFragments:this.state.urlFragments,onSubmit:this.handleUrlFieldSubmit,className:"UrlBar-UrlField url vivaldi-addressfield uifocusstop",editUrl:this.state.editUrl,displayUrl:M,pageId:this.props.id,pageUrl:d,onUrlDrag:this.setUrlDragEvent,autoFocus:!1,autocompletionEnabled:a[J.kAddressBarAutocompleteEnabled],isTypedHistoryOpen:this.state.isTypedHistoryOpen,onBlur:this.onUrlFieldBlur,onFocus:this.onUrlFieldFocus,onDrop:this.onUrlFieldDrop,placeholder:a[J.kAddressBarInlineSearchEnabled]?Object(K.a)("Search or enter an address"):Object(K.a)("Enter an address"),showDropdown:!0,typedHistory:this.state.typedHistory,topSites:this.state.topSites,autocompleteOnTitle:!0,defaultSearchEngine:this.state.defaultSearchEngine,typedSearchEngine:h,readonly:this.props.readonly,__source:{fileName:ce,lineNumber:1009,columnNumber:15}}))),n.createElement("div",{className:"toolbar toolbar-small toolbar-insideinput",__source:{fileName:ce,lineNumber:1052,columnNumber:11}},F&&n.createElement("div",{title:Object(K.a)("Caution!\nThe entire domain name cannot be shown. Make sure you trust this website before submitting data."),className:"UrlBar-UrlObfuscationWarning",dangerouslySetInnerHTML:{__html:se.Zd.small},__source:{fileName:ce,lineNumber:1054,columnNumber:15}}),n.createElement(f.a,{pageId:this.props.id,ref:"webpageview_loadprogress",open:!p,__source:{fileName:ce,lineNumber:1061,columnNumber:13}}),n.createElement(_.a,{pageId:this.props.id,pagePermissions:this.state.permissionInfo,popupPosition:y,__source:{fileName:ce,lineNumber:1066,columnNumber:13}}),this.state.blockedPopups.size>0&&n.createElement(v.a,{ref:"popupBlockerNotificator",url:d,blockedPopups:this.state.blockedPopups,onPopupAllowed:this.onPopupAllowed,popupPosition:y,__source:{fileName:ce,lineNumber:1072,columnNumber:15}}),this.state.blockedPageContent.size>0&&n.createElement(s.a,{pageId:this.props.id,url:d,position:y,blockedPageContent:this.state.blockedPageContent,__source:{fileName:ce,lineNumber:1081,columnNumber:15}}),k>0&&n.createElement(w.a,{feeds:T,__source:{fileName:ce,lineNumber:1088,columnNumber:15}}),this.state.showPasswordIcon&&n.createElement(x.a,{ref:this.passwordElm,className:"password-icon",tooltip:N,onClick:Ne,image:se.Dc,tabIndex:0,onFocus:this.onPasswordFocus,__source:{fileName:ce,lineNumber:1092,columnNumber:15}}),!p&&this.state.supportsReaderMode&&n.createElement(x.a,{menu:this.getReaderContextMenu(),menuOrigin:"topLeft",isPressed:this.state.isReaderModeActive,image:se.ld,onClick:this.onReaderModeClicked,tooltip:Object(K.a)("Reader View"),__source:{fileName:ce,lineNumber:1104,columnNumber:15}}),L&&a[J.kAddressBarShowQrGenerator]&&n.createElement(C.a,{popupPosition:y,size:this.props.size,data:d,__source:{fileName:ce,lineNumber:1115,columnNumber:15}}),L&&n.createElement(j.a,{popupPosition:y,size:this.props.size,tabId:this.props.id,url:d,__source:{fileName:ce,lineNumber:1121,columnNumber:15}})),H&&n.createElement(o.a,{key:d,setBookmarked:async e=>await r.a.create(e),pageId:this.props.id,bookmarkData:this.state.bookmarkData,popupPosition:y,__source:{fileName:ce,lineNumber:1132,columnNumber:13}}),n.createElement("div",{className:"toolbar toolbar-small toolbar-insideinput",__source:{fileName:ce,lineNumber:1141,columnNumber:11}},E&&n.createElement("div",{className:"button-toolbar",__source:{fileName:ce,lineNumber:1143,columnNumber:15}},n.createElement("button",{title:g,tabIndex:a[J.kKeyboardTabToAll],disabled:0===this.state.typedHistory.length,onMouseDown:_e,dangerouslySetInnerHTML:{__html:se.me},__source:{fileName:ce,lineNumber:1144,columnNumber:17}})))),"button"===a[J.kAddressBarSearchDisplay]&&this.state.isAddressBarVisible&&n.createElement(I.a,{shouldRenderAs:a[J.kAddressBarSearchDisplay],popupPosition:y,popupWidth:210,prefValues:this.props.prefValues,size:this.props.size,iconSize:"small",__source:{fileName:ce,lineNumber:1161,columnNumber:11}}),("field"===a[J.kAddressBarSearchDisplay]||!this.state.isAddressBarVisible)&&n.createElement(A.a,{className:"UrlBar-SearchField",onSearch:this.onSearchAddTypedSearchHistory,shouldRenderAs:a[J.kAddressBarSearchDisplay],ref:"searchField",useFavicon:a[J.kAddressBarSearchShowFavicon],suggestEnabled:a[J.kAddressBarSearchSuggestEnabled],__source:{fileName:ce,lineNumber:1172,columnNumber:11}}),(a[J.kAddressBarShowProfile]&&this.state.isAddressBarVisible&&!G.a.isPopup(this.context.vivaldiWindowId)&&!G.a.isIncognito(this.context.vivaldiWindowId)||G.a.isGuestSession(this.context.vivaldiWindowId))&&n.createElement(i.a,{popupPosition:y,size:this.props.size,__source:{fileName:ce,lineNumber:1187,columnNumber:11}}),this.state.isAddressBarVisible&&!G.a.isPopup(this.context.vivaldiWindowId)&&n.createElement(R.a,{popupPosition:y,size:this.props.size,__source:{fileName:ce,lineNumber:1194,columnNumber:11}}),n.createElement(u.a,{extensionAnchor:this.props.extensionAnchor,isAddressBarVisible:this.state.isAddressBarVisible,showToolbar:a[J.kAddressBarExtensionsVisible],showAllExtensionsButton:a[J.kAddressBarExtensionsShowAllToggle],showHiddenExtensionsButton:a[J.kAddressBarExtensionsShowHiddenToggle],renderInDropdown:a[J.kAddressBarExtensionsRenderInDropdown],toggleExtensionToolbar:ve,popupPosition:y,size:this.props.size,__source:{fileName:ce,lineNumber:1199,columnNumber:11}}),this.state.isAddressBarVisible&&G.a.isIncognito(this.context.vivaldiWindowId)&&n.createElement(Ee,{className:"UrlBar-PrivateWindowIndicator",__source:{fileName:ce,lineNumber:1212,columnNumber:11}}))}}ue(Oe,"contextType",z.a),t.a=Object(d.a)(Oe,pe)}).call(this,a(82))},function(e,t,a){"use strict";t.a=class{constructor(e=!0){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1,this.multiSelect_=e}isSelected(e){for(const t of this.selectedIds_)if(t.id===e)return t.selected;return!1}get length(){return this.selectedIds_.length}get isSingleItemSelected(){return 1===this.selectedIds_.length}get FirstSingleItemSelected(){return this.isSingleItemSelected?this.selectedIds_[0].id:-1}get selectedIds(){return this.selectedIds_}resetSelectionModel(){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1}getData(){return{selectedIds_:this.selectedIds_,anchorIndex_:this.anchorIndex_,leadIndex_:this.leadIndex_}}setData(e){this.anchorIndex_=e.anchorIndex_,this.leadIndex_=e.leadIndex_,this.selectedIds_=e.selectedIds_}unSelectAll(){this.selectedIds_=[]}selectAll(e){this.multiSelect&&(e.forEach(e=>{this.selectedIds_.push({id:e,selected:!0})}),e.length>0&&(-1===this.anchorIndex_&&(this.anchorIndex_=e[0]),-1===this.leadIndex_&&(this.leadIndex_=e[0])))}setSelectedIds(e){this.multiSelect?this.selectedIds_=e.map(e=>({id:e,selected:!0})):this.setIndexSelected(this.leadIndex,!0)}setLeadIndex(e){this.leadIndex=e}setIndexSelected(e,t){var a=this.selectedIds_.map(e=>e.id).indexOf(e),n=this.selectedIds_[a];if((!n||n.selected!==t)&&(this.multiSelect||this.resetSelectionModel(),this.leadIndex=e,this.anchorIndex=e,-1!==e))if(t)this.selectedIds_.push({id:e,selected:t});else{var i=this.selectedIds_.map(e=>e.id).indexOf(e);-1!==i&&this.selectedIds_.splice(i,1)}}get leadIndex(){return this.leadIndex_}set leadIndex(e){this.leadIndex_=e}get anchorIndex(){return this.anchorIndex_}set anchorIndex(e){this.anchorIndex_=e}get multiSelect(){return this.multiSelect_}set multiSelect(e){this.multiSelect_=e}}},function(e,t,a){"use strict";var n=a(9),i=a(0),s=a.n(i),r=a(20),o=a.n(r),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\icon\\Icon.jsx";function c(e,t){return t?t>16?e.large:t<16?e.small:e.medium:e.medium}function u({icon:e,size:t,className:a}){const n=t&&{"--IconSize":t};return(s.a.createElement("span",{style:n,className:o()("VivaldiSvgIcon",a),dangerouslySetInnerHTML:{__html:e},__source:{fileName:l,lineNumber:38,columnNumber:5}}))}function m({size:e,className:t}){const a=c(n.Wd,e);return(s.a.createElement(u,{icon:a,size:e,className:t,__source:{fileName:l,lineNumber:48,columnNumber:10}}))}function d({size:e,className:t}){return s.a.createElement(u,{icon:n.D,size:e,className:t,__source:{fileName:l,lineNumber:52,columnNumber:10}})}function h({size:e,className:t}){return s.a.createElement(u,{icon:n.S,size:e,className:t,__source:{fileName:l,lineNumber:56,columnNumber:10}})}function p({size:e,className:t}){return s.a.createElement(u,{size:e,className:t,icon:'\n<svg width="8" height="12" viewBox="0 0 8 12" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.06006 1.60666L6.1134 0.666656L4.00006 2.77999L1.88673 0.666656L0.940063 1.60666L4.00006 4.66666L7.06006 1.60666ZM0.940063 10.3933L1.88673 11.3333L4.00006 9.21999L6.1134 11.3333L7.0534 10.3933L4.00006 7.33332L0.940063 10.3933Z"/>\n</svg>\n    ',__source:{fileName:l,lineNumber:60,columnNumber:10}})}function b({size:e,className:t}){const a=c(n.pb,e);return(s.a.createElement(u,{icon:a,size:e,className:t,__source:{fileName:l,lineNumber:73,columnNumber:10}}))}function g({size:e,className:t}){const a=c(n.sb,e);return(s.a.createElement(u,{icon:a,size:e,className:t,__source:{fileName:l,lineNumber:78,columnNumber:10}}))}function N({size:e,className:t}){const a=c(n.ub,e);return(s.a.createElement(u,{icon:a,size:e,className:t,__source:{fileName:l,lineNumber:83,columnNumber:10}}))}function f({size:e,className:t}){return s.a.createElement(u,{size:e,className:t,icon:'\n<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n  <rect x="1" y="1" width="7" height="7" rx="2"/>\n  <rect x="1" y="10" width="7" height="7" rx="2"/>\n  <rect x="10" y="10" width="7" height="7" rx="2"/>\n  <rect x="10" y="1" width="7" height="7" rx="2"/>\n</svg>\n    ',__source:{fileName:l,lineNumber:87,columnNumber:10}})}function _({size:e,className:t}){const a=c(n.td,e);return(s.a.createElement(u,{icon:a,size:e,className:t,__source:{fileName:l,lineNumber:103,columnNumber:10}}))}t.a=function({size:e,className:t,type:a}){switch(a){case"trash":return s.a.createElement(m,{className:t,size:e,__source:{fileName:l,lineNumber:121,columnNumber:14}});case"bookmark":return s.a.createElement(d,{className:t,size:e,__source:{fileName:l,lineNumber:124,columnNumber:14}});case"caret":case"chevron":return s.a.createElement(h,{className:t,size:e,__source:{fileName:l,lineNumber:128,columnNumber:14}});case"contract":return s.a.createElement(p,{className:t,size:e,__source:{fileName:l,lineNumber:131,columnNumber:14}});case"folder":return s.a.createElement(b,{className:t,size:e,__source:{fileName:l,lineNumber:134,columnNumber:14}});case"folder-arrow":return s.a.createElement(g,{className:t,size:e,__source:{fileName:l,lineNumber:137,columnNumber:14}});case"speed-dial-folder":return s.a.createElement(N,{className:t,size:e,__source:{fileName:l,lineNumber:140,columnNumber:14}});case"speed-dial":return s.a.createElement(f,{className:t,size:e,__source:{fileName:l,lineNumber:143,columnNumber:14}});case"search":return s.a.createElement(_,{className:t,size:e,__source:{fileName:l,lineNumber:146,columnNumber:14}})}}},function(e,t,a){"use strict";var n=a(13),i=a(515),s=a(12),r=a(16),o=a(125),l=a.n(o),c=a(169),u=a(534);const m={abort:c.default,responseText:""};let d={...m},h="";function p(e,t){if(d&&d.readyState===XMLHttpRequest.DONE&&200===d.status)try{const t=d.responseText,a={actionType:r.a.SEARCH_SUGGEST_RESULT,query:h,json:t,uid:e};s.a.dispatch(a)}finally{d={...m},h=""}}t.a={suggest:(e,t)=>{if(e.length<2)return void s.a.dispatch({actionType:r.a.SEARCH_SUGGEST_RESULT,query:"",json:'["", []]',cuid:l()});if(n.c.unsafeGetActivePage().get("incognito"))return;if(!t.suggestUrl)return;const a=i.a.getSearchSuggestURL(e,t.suggestUrl);d&&(d.abort(),h="",d={...m});const o=l()();return h=e,d=new XMLHttpRequest,d.onreadystatechange=Object(u.a)(p,o,a),d.open("GET",a,!0),d.send(),o}}},,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=a(40),i=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(t){s(this,"_numberOfSelectableItems",0),s(this,"_selectionIndex",-1),s(this,"setNumberOfSelectableItems",e=>{this._numberOfSelectableItems=e}),s(this,"getNumberOfSelectableItems",()=>this._numberOfSelectableItems),s(this,"setSelectionIndex",e=>{this._selectionIndex=e}),s(this,"getSelectionIndex",()=>this._selectionIndex),s(this,"_moveHighlight",(t,a)=>{const n=this._inputComponent.getDropdown(),s=i.a.findDOMNode(n);if(!(s instanceof HTMLElement))return Promise.reject();let r=-1;const o=Array.from(s.getElementsByClassName("omni-clickable")),l=this.getSelectionIndex(),c=this.getNumberOfSelectableItems();if(null==l||-1===l||null==o[l])r=t?0:c-1;else{const e=o[l],n=0===l||parseInt(s.scrollTop)+10>e.offsetTop;switch(a){case"page":if(t)n?r=o.findIndex(e=>e.offsetTop+e.offsetHeight>s.offsetHeight):(s.scrollTop=e.offsetTop,r=o.findIndex(e=>e.offsetTop>s.offsetHeight+s.scrollTop)),-1===r&&(r+=c);else if(n)s.scrollTop-=s.offsetHeight;else{let e=o.length-1;for(;e>0&&!(o[e].offsetTop-o[e].offsetHeight<s.scrollTop);e--);r=e}break;case"section":if(t){let e=this._getSectionIndex(!0,l+1,o);-1===e&&(e=this._getSectionIndex(!0,0,o)),-1!==e&&(r=e)}else{let e=this._getSectionIndex(!1,l-1,o);-1===e&&(e=this._getSectionIndex(!1,o.length-1,o)),-1!==e&&(r=e)}break;case"line":r=l+(t?1:-1),t?r>=c&&(r=-1):r<-1&&(r=c-1)}}return Number.isInteger(r)?(this._inputComponent.setAutocompleteHighlight(r,!0),new Promise(t=>{e.nextTick(t)})):Promise.reject()}),s(this,"_getSectionIndex",(e,t,a)=>{if(e)for(let e=t;e<a.length;e++){if("0"===a[e].dataset.index)return e}else for(let e=t;e>=0;e--){if("0"===a[e].dataset.index)return e}return-1}),s(this,"up",()=>this._moveHighlight(!1,"line")),s(this,"down",()=>this._moveHighlight(!0,"line")),s(this,"pageUp",()=>this._moveHighlight(!1,"page")),s(this,"pageDown",()=>this._moveHighlight(!0,"page")),s(this,"sectionUp",()=>this._moveHighlight(!1,"section")),s(this,"sectionDown",()=>this._moveHighlight(!0,"section")),this._inputComponent=t}}}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),s=a(2),r=a(20),o=a.n(r),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesImageAttachment.jsx";function c({onDelete:e,onContextMenu:t,item:a,onOpen:n,onDragStart:r,draggable:c}){return i.a.createElement("div",{className:"AttachmentItem",onDragStart:r?e=>r(e,a):null,draggable:c,__source:{fileName:l,lineNumber:19,columnNumber:5}},i.a.createElement("img",{className:"AttachmentItem-Image",src:a.content,__source:{fileName:l,lineNumber:24,columnNumber:7}}),i.a.createElement("button",{className:"AttachmentItem-DeleteButton",title:Object(s.a)("Remove attachment"),onClick:()=>e(),tabIndex:"-1",__source:{fileName:l,lineNumber:25,columnNumber:7}}),i.a.createElement("button",{className:o()({"AttachmentItem-ViewOverlayButton":!0,"dragging-enabled":c}),title:Object(s.a)("View attachment"),onContextMenu:t,onClick:n,__source:{fileName:l,lineNumber:29,columnNumber:7}}))}},function(e,t,a){"use strict";var n=a(0),i=a(20),s=a.n(i),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Switch.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends n.PureComponent{constructor(...e){super(...e),o(this,"state",{dragging:!1,position:this.props.checked?12:0}),o(this,"updateButtonPosition",()=>{this.setState({position:this.props.checked?12:0})}),o(this,"onChange",e=>{const t=e.target.checked?12:0;this.setState({position:t}),this.props.onChange&&this.props.onChange(e)}),o(this,"onClick",e=>{this.state.dragging?(e.preventDefault(),this.setState({dragging:!1})):this.toggleSwitch()}),o(this,"toggleSwitch",()=>{if(this._switchInput){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});this._switchInput.dispatchEvent(e)}}),o(this,"cancelEvent",e=>{e.preventDefault()}),o(this,"onPointerMove",e=>{if(1===e.buttons&&this._switchInput&&this._switchButton===document.activeElement){this.state.dragging||this.setState({dragging:!0});const t=this._switchInput.getBoundingClientRect(),a=Math.max(0,Math.min(e.clientX-t.left-6,12));this.setState({position:a}),e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString())}}),o(this,"onPointerUp",e=>{if(this.state.dragging){e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString());const{position:t}=this.state;t>=0&&t<=6?(this.setState({position:0}),this.props.checked&&this.toggleSwitch()):(this.setState({position:12}),this.props.checked||this.toggleSwitch())}})}componentDidUpdate(e){e.checked!==this.props.checked&&this.updateButtonPosition()}render(){const{position:e}=this.state;return(n.createElement("div",{className:s()("Switch",{"Switch--Disabled":this.props.disabled}),__source:{fileName:r,lineNumber:111,columnNumber:7}},n.createElement("input",{ref:e=>this._switchInput=e,className:"Switch-Input",type:"checkbox",onChange:this.onChange,checked:this.props.checked,disabled:this.props.disabled,value:this.props.value,onPointerDown:this.cancelEvent,tabIndex:this.props.tabIndex,__source:{fileName:r,lineNumber:116,columnNumber:9}}),n.createElement("button",{ref:e=>this._switchButton=e,className:s()({"Switch-Button":!0,dragging:this.state.dragging}),style:{transform:`translateX(${e}px)`},onPointerMove:this.onPointerMove,onPointerUp:this.onPointerUp,onClick:this.onClick,tabIndex:"-1",__source:{fileName:r,lineNumber:127,columnNumber:9}})))}}t.a=l},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);const i=Object(n.a)("Sent with Vivaldi Mail. Download Vivaldi for free at vivaldi.com")},function(e,t,a){"use strict";var n=a(0),i=a(36),s=a(2),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDisabled.jsx";t.a=function(){return n.createElement("div",{className:"MailDisabled",__source:{fileName:r,lineNumber:9,columnNumber:5}},n.createElement("h1",{__source:{fileName:r,lineNumber:10,columnNumber:7}},Object(s.a)("Mail, Calendar and Feeds are Turned Off")),n.createElement("p",{__source:{fileName:r,lineNumber:11,columnNumber:7}},Object(s.a)("Vivaldi email client is turned off. Go to Settings\n        to enable it, set up accounts or change preferences.")),n.createElement("input",{type:"button",onClick:()=>i.a.showSettings("general",{scroll:"features"}),tabIndex:0,value:Object(s.a)("Go to Settings"),__source:{fileName:r,lineNumber:13,columnNumber:7}}))}},function(e,t,a){"use strict";(function(e){var n=a(325),i=a(462),s=a(68),r=a(326),o=a(119),l=a(167),c=a(127),u=a(175),m=a(242),d=a(47),h=a(29),p=a(56),b=(a(971),a(1396)),g=a(1405),N=a(283),f=a(6),_=a(720),v=a(0),E=a.n(v),C=a(87),w=a(35),O=a(25),y=a(2),S=a(8),T=a(855),k=a(206),A=a(104),I=a(513),D=a(427),M=a(1302),P=a(1303),x=a(207),L=a(494),j=a(706),R=a(7),B=a(428),F=a(9),U=a(456),H=a(3),V=a(1),W="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDetail.jsx";function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}async function K(e,t,a){const{id:n,sentDate:i}=t,{accountId:s}=a;await e.writeBufferToDisk(s,i,n),"imap"===a.type?await Object(U.a)(s,n):await S.a.pop.update([s,a.uidl],{headersOnly:!1})}const Y=["BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_HIGHLIGHT_BG"];class $ extends E.a.Component{constructor(t,a){super(t),G(this,"messageBody",E.a.createRef()),G(this,"messageHeader",E.a.createRef()),G(this,"isRssFeedMessage",!1),G(this,"_setIfActive",t=>{e.nextTick(()=>{t.pageIsActive?(s.a.setActiveMailDetail(this),r.a.setActiveWebView(this.messageBody)):(s.a.clearIfActive(this),this.messageBody.current&&r.a.clearIfActive(this.messageBody.current))})}),G(this,"_markSeenIfHasBody",()=>{d.a.markSeenDebounced.cancel();const{listEntry:e}=this.props,{message:t,raw:a}=this.state;if(e&&t){const{bodyParts:n}=t;e&&e.unseen&&(a||n)&&d.a.markSeenDebounced(e)}}),G(this,"onConnectionChanged",e=>{m.a.isDisconnected(e.accountId)||this.state.raw||this.props.listEntry&&(A.a.log("connection established - fetch message"),this.fetchMessage(this.props))}),G(this,"settingsHandler",()=>{this.setState({...C.e.getDocumentColors(this.context.vivaldiWindowId)})}),G(this,"checkIfReadyToReadFromDisk",e=>{"finishIndexProgress"===e.target&&(h.a.removeChangeListener(this.checkIfReadyToReadFromDisk),this.fetchMessage(this.props))}),G(this,"addMessageBody",async(e,t)=>{const a=Object(B.a)(t);if(!await R.a.mailPrivate.addMessageBody(e,a))throw new Error(`Failed to add body to FTS db for id ${e}`)}),G(this,"fetchMessage",async t=>{m.a.removeChangeListener(this.onConnectionChanged);const{listEntry:a}=t;if(this.setState({message:void 0,raw:void 0,showRaw:!1},()=>{e.nextTick(s.a.refreshActiveMessage)}),!a)return;const{searchListId:n,sentDate:i,sourceFilterIds:r,fromIds:l}=a;this._currentId=n;const b=await Object(D.a)(n);if(!b)return;const g=()=>this._currentId!==b.id;if(g())return;const v=f.a.get(V.kMailAccounts),E=p.a.getSelectedFolder(),C=E&&v.find(e=>e.MAIL_EMAIL===E.accountId),w=h.a.getByIds(r),O=[];if(E&&C)for(const e of w)e.accountId!==E.accountId||E.path!==H.m&&e.path!==E.path||O.push(e);0===O.length&&O.push(...w);const y=O.filter(e=>{const t=a.sources.get(e.id);return t&&!t.internal});let S,P,j;for(const e of O)if(S=await Object(L.a)(e.accountId,n,i),S)break;if(!g()){if(this.isRssFeedMessage=O.some(e=>e.accountId===H.n),!S){if(this.setState({message:b},s.a.refreshActiveMessage),this.isRssFeedMessage)return void A.a.warn("fetchMessage: Unexpected rss messages without a raw");if(0===y.length)return;const e=v.filter(e=>e.accountType===H.J.IMAP&&!e.offline),t=y.filter(t=>e.find(e=>e.MAIL_EMAIL===t.accountId)),a={},i=v.filter(e=>e.accountType===H.J.POP);if(i.length>0){const e=await k.a.loadAllAccounts(),t=y.filter(e=>i.find(t=>t.MAIL_EMAIL===e.accountId));for(const n of t){const t=e.find(e=>e.MAIL_EMAIL===n.accountId);t&&(a[n.accountId]=t)}}for(const e of t){const{accountId:t,path:a}=e;try{if(S=await u.a.fetchRawOfMessage(t,a,b.id),S){P={accountId:t,type:"imap"};break}}catch(e){A.a.info(e)}}if(!S&&Object.keys(a).length>0){const e=(await Object(M.a)(n)).filter(e=>e.headersOnly);for(const t of e){const{accountId:e,uidl:n}=t,i=a[e];try{S=await N.a.getPopMessage(i,n,b),P={accountId:e,type:"pop",uidl:n};break}catch(e){A.a.info(e)}}}if(!S)return A.a.log("Failed to fetch message"),void m.a.addChangeListener(this.onConnectionChanged);if(g()){if(S&&P){const e=await Object(_.a)(S),t=await e.parseMainPart();await this.addMessageBody(n,t),await K(e,b,P),d.a.runStoredQueryFilters([n]),y.length>1&&Object(I.a)({operation:"BUFFER_OPERATION_FETCH_RAW_FOR_ALL_SOURCES",searchListId:n}).then(o.a.flushBuffer)}return}}if(this.isRssFeedMessage){const e=new TextDecoder("utf-8").decode(S);j=Object(T.a)(e)}this.setState({isSenderTrusted:this.isRssFeedMessage||x.a.get(l).every(e=>c.a.isTrustedEmailAddress(e.address)),message:this.isRssFeedMessage?{...b,bodyParts:j}:b,raw:this.isRssFeedMessage?new _.b({contentType:{value:"application/rss+xml",params:{}},contentID:void 0,disposition:void 0,transferEncoding:"7bit",bodyStart:0,byteLength:S.byteLength,byteOffset:S.byteOffset},S):await Object(_.a)(S)},async()=>{s.a.refreshActiveMessage(),y.length>1&&Object(I.a)({operation:"BUFFER_OPERATION_FETCH_RAW_FOR_ALL_SOURCES",searchListId:n}).then(o.a.flushBuffer);const e=this.state.raw;if(!e||!P)return;const t=await e.parseMainPart();await this.addMessageBody(n,t),await K(e,b,P),d.a.runStoredQueryFilters([n])})}}),G(this,"toggleRaw",()=>{this.setState(e=>({showRaw:!e.showRaw}))}),G(this,"onUnblockExternalContent",e=>{const t=this.state.message;if(t)if(e){const e=t.from;e[0]&&(l.a.putTrustedEmailAddress(e[0]),this.setState({isSenderTrusted:!0}))}else Object(P.a)(t.id),this.setState(e=>e.message?{message:{...e.message,trusted:!0}}:null)});const{color:n,backgroundColor:i,linkColor:b}=C.e.getDocumentColors(a.vivaldiWindowId);this.state={message:void 0,showRaw:!1,isSenderTrusted:!1,color:n,backgroundColor:i,linkColor:b}}componentDidMount(){w.a.addMultiListener(Y,this.settingsHandler),h.a.getIndex().length>0?this.fetchMessage(this.props):h.a.addChangeListener(this.checkIfReadyToReadFromDisk),this._setIfActive(this.props)}_isBeingActivated(e){return!this.props.pageIsActive&&e.pageIsActive}UNSAFE_componentWillReceiveProps(e){const t=e.listEntry?e.listEntry.searchListId:void 0;if((this.props.listEntry?this.props.listEntry.searchListId:void 0)!==t)this.fetchMessage(e);else if(this._isBeingActivated(e)){if(void 0!==t&&n.a.drafts[t]){const t=i.a.getComposer();t&&t.flushPendingChanges().then(()=>this.fetchMessage(e))}n.a.drafts={}}e.pageIsActive!==this.props.pageIsActive&&this._setIfActive(e)}shouldComponentUpdate(e,t){return e.hasNoListEntries!==this.props.hasNoListEntries||(!Object(j.a)(this.state,t)||!!this.props.prefValues&&!!e.prefValues&&this.props.prefValues[V.kMailViewLayout]!==e.prefValues[V.kMailViewLayout])}componentDidUpdate(){this._markSeenIfHasBody()}componentWillUnmount(){w.a.removeMultiListener(Y,this.settingsHandler),h.a.removeChangeListener(this.checkIfReadyToReadFromDisk),m.a.removeChangeListener(this.onConnectionChanged),this._currentId=-1,e.nextTick(()=>{s.a.clearIfActive(this),this.messageBody.current&&r.a.clearIfActive(this.messageBody.current)})}render(){let e=[],t="";const{listEntry:a,hasNoListEntries:n}=this.props;if(a){const{fromIds:n}=a;e=x.a.get(n),t=e.length>0?e[0].address:""}return(E.a.createElement("div",{id:"mail_detail",__source:{fileName:W,lineNumber:524,columnNumber:7}},a&&E.a.createElement(g.a,{ref:this.messageHeader,message:this.state.message,listEntry:a,toggleRaw:this.toggleRaw,showRaw:this.state.showRaw,from:e,fromAddress:t,__source:{fileName:W,lineNumber:526,columnNumber:11}}),E.a.createElement("div",z({},!this.props.listEntry&&{style:{display:"none"}},{className:"message-body-part",__source:{fileName:W,lineNumber:536,columnNumber:9}}),E.a.createElement(b.a,{ref:this.messageBody,isRss:this.isRssFeedMessage,color:this.state.color,backgroundColor:this.state.backgroundColor,linkColor:this.state.linkColor,message:this.state.message,raw:this.state.raw,showRaw:this.state.showRaw,isSenderTrusted:this.state.isSenderTrusted,fromAddress:t,onUnblockExternalContent:this.onUnblockExternalContent,__source:{fileName:W,lineNumber:540,columnNumber:11}})),!a&&!n&&E.a.createElement("section",{className:"no-message-selected",__source:{fileName:W,lineNumber:555,columnNumber:11}},E.a.createElement("div",{dangerouslySetInnerHTML:{__html:F.fe},__source:{fileName:W,lineNumber:556,columnNumber:13}}),E.a.createElement("div",{__source:{fileName:W,lineNumber:559,columnNumber:13}},Object(y.a)("No message selected")))))}}G($,"contextType",O.a),t.a=$}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(383),r=a(32),o=a(42),l=a(107),c=a(222),u=a(614),m=a(14),d=a(22),h=a(2),p=a(38),b=a(9),g=a(557),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\CreateCalendarAccount.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{createLocalAccountAndCalendar:_}=s.a,{ensureAccountType:v,isCalDAV:E,savePassword:C}=o.a,{UNKNOWN:w,VERIFYING:O,OK:y,ERROR:S}=p.a;function T(e){switch(e){case"vivaldi":return Object(h.a)("user@vivaldi.net");case"google":return Object(h.a)("user@gmail.com");default:return""}}function k(e,t="vivaldi"){return{status:w,statusText:"",name:Object(h.a)("New account"),url:"",account_type:t,username:"",password:"",step:"accountType",initial:e,calendars:[]}}class A extends n.Component{constructor(...e){super(...e),f(this,"state",k(!0,this.props.onboarding?"local":"vivaldi")),f(this,"account",null),f(this,"componentDidMount",()=>{r.a.addChangeListener(this.onStoreChange)}),f(this,"componentWillUnmount",()=>{r.a.removeChangeListener(this.onStoreChange)}),f(this,"onStoreChange",()=>{if(this.account){const e=r.a.getCalendars().filter(e=>{var t;return e.accountId===(null===(t=this.account)||void 0===t?void 0:t.id)});this.setState({calendars:e})}}),f(this,"changeType",e=>{const t=v(e);t!==this.state.account_type?this.setState({account_type:t,url:"",username:"",password:""}):this.setState({account_type:t})}),f(this,"handleChange",e=>{const{target:{name:t,value:a}}=e;this.setState({[t]:a})}),f(this,"selectAccountType",()=>{const e=s.a.getLocalAccount();if("local"===this.state.account_type&&e){const t=r.a.getCalendars().filter(t=>t.accountId===(null==e?void 0:e.id));this.setState({step:"accountSummary",calendars:t})}else this.setState({step:"accountInfo"})}),f(this,"goBack",()=>{"accountInfo"===this.state.step&&this.setState({step:"accountType"})}),f(this,"addAnother",()=>{this.account=null,this.setState(k(!1))}),f(this,"toggleCalendarHidden",(e,t)=>{t.hidden=e.target.checked,i.a.updateCalendar(t.id,{hidden:t.hidden})}),f(this,"setDefaultCalendar",(e,t)=>{i.a.setDefaultCalendarId(t.id)}),f(this,"createAccount",async()=>{const{name:e,url:t,account_type:a,username:n}=this.state;let i,s;E(a)?i=await this.createCalDAVAccount():"ical"===a?i=await this.createWebCalendar():"local"===a&&(s=await _({name:e,url:t,account_type:a,username:n},null)),i?(this.account=i,this.setState({step:"accountSummary"})):s&&this.setState({step:"accountSummary",calendars:[s]})}),f(this,"log",(e,t)=>{this.setState({statusText:e,status:t})}),f(this,"createWebCalendar",async()=>{this.log(Object(h.a)("Verifying..."),O);const{name:e,url:t,account_type:a,username:n}=this.state,s={name:e,url:t,account_type:a,username:n,interval:p.d},{foundService:r,statusMessage:o,eventCount:l}=await u.a.probeWebCalendar({id:"",...s});let c;return!r&&o?this.log(o,S):(c=await i.a.createAccount(s),this.log(Object(h.a)("Connected to Web Calendar, found $1 event(s).",[l]),y)),c}),f(this,"createCalDAVAccount",async()=>{var e;this.log(Object(h.a)("Verifying..."),O);const{name:t,url:a,account_type:n,username:s,password:r}=this.state,o={name:t,url:a,account_type:n,username:s,interval:p.d};"vivaldi"===n&&-1===s.indexOf("@")&&(o.username=`${s}@vivaldi.net`,this.setState({username:o.username}));let l,c={statusMessage:"",foundService:!1};if("caldav"===n)c=await Object(g.b)({id:"",...o},r),c.foundService?(o.url=c.url,this.log(Object(h.a)("Connected to CalDAV, found $1 calendar.","Connected to CalDAV, found $1 calendars.",[c.calendarCount]),y)):this.log(c.statusMessage,S);else if("google"===n){if(o.url=Object(p.m)(o.username),c=await Object(g.a)({id:"",...o},r),!c.foundService)return void this.log(Object(h.a)("Could not connect. Make sure to enter a valid email address."),S)}else"vivaldi"===n&&(o.url=Object(p.p)(o.username),c=await Object(g.b)({id:"",...o},r));if(null===(e=c)||void 0===e?void 0:e.foundService){const e=await C(o.url,o.username,r);this.setState({url:o.url,password:r}),e.result?(l=await i.a.createAccount(o),i.a.pollCalDAVAccounts([l.id]),this.log(Object(h.a)("Account created"),y)):this.log(Object(h.a)("Error saving password"),S)}else this.log(c.statusMessage,O);return l})}render(){const{name:e,url:t,account_type:a,username:i}=this.state,{password:o}=this.state,u=["vivaldi","google","caldav","ical"];s.a.getLocalAccount()||u.unshift("local");const p=this.state.status===S?"error":this.state.status===y?"success":"info";let g,f;if("accountInfo"===this.state.step)switch(this.state.account_type){case"vivaldi":g=Object(h.a)("Vivaldi.net account, OK - now enter your login details below and let us fetch your calendars.");break;case"caldav":g=Object(h.a)("CalDAV account, OK - now enter the server URL and your login details below and let us fetch your calendars.");break;case"google":g=Object(h.a)("Google account, OK - now enter your username below and then log in using the google dialog shown.");break;case"ical":g=Object(h.a)("Web calendar, OK - now enter the calendar URL below and let us fetch your events.")}return"accountSummary"===this.state.step&&(f=r.a.getDefaultCalendarId()),n.createElement(n.Fragment,null,"accountType"===this.state.step&&n.createElement("form",{className:"detail",onSubmit:this.selectAccountType,__source:{fileName:N,lineNumber:306,columnNumber:9}},n.createElement("div",{className:"detail-content",__source:{fileName:N,lineNumber:307,columnNumber:11}},this.props.onboarding&&n.createElement(n.Fragment,null,n.createElement("img",{src:"/resources/vivaldi_calendar_default.png",alt:"",width:"64",height:"64",__source:{fileName:N,lineNumber:309,columnNumber:15}}),this.state.initial&&n.createElement(n.Fragment,null,n.createElement("h1",{__source:{fileName:N,lineNumber:311,columnNumber:17}},Object(h.a)("Welcome to Vivaldi Calendar")),n.createElement("p",{__source:{fileName:N,lineNumber:312,columnNumber:17}},Object(h.a)("Let’s get you going by adding your first account."))),!this.state.initial&&n.createElement(n.Fragment,null,n.createElement("h1",{__source:{fileName:N,lineNumber:315,columnNumber:17}},Object(h.a)("Vivaldi Calendar")),n.createElement("p",{__source:{fileName:N,lineNumber:316,columnNumber:17}},Object(h.a)("Great, let’s add another account.")))),n.createElement("div",{className:"toolbar toolbar-pills toolbar-wrap",__source:{fileName:N,lineNumber:319,columnNumber:13}},this.props.onboarding&&!u.includes("local")&&n.createElement(d.a,{isPressed:"local"===this.state.account_type,title:this.props.searchableStrings.local,onClick:()=>this.changeType("local"),__source:{fileName:N,lineNumber:321,columnNumber:17}}),u.map(e=>n.createElement(d.a,{key:e,isPressed:e===this.state.account_type,title:this.props.searchableStrings[e],onClick:()=>this.changeType(e),__source:{fileName:N,lineNumber:329,columnNumber:17}})))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:N,lineNumber:339,columnNumber:11}},n.createElement("input",{type:"submit",value:Object(h.a)("Continue"),autoFocus:!0,__source:{fileName:N,lineNumber:340,columnNumber:13}}))),"accountInfo"===this.state.step&&n.createElement("form",{className:"detail",onSubmit:this.createAccount,__source:{fileName:N,lineNumber:346,columnNumber:9}},n.createElement("div",{className:"detail-content",__source:{fileName:N,lineNumber:347,columnNumber:11}},this.props.onboarding&&n.createElement(n.Fragment,null,n.createElement("h1",{__source:{fileName:N,lineNumber:349,columnNumber:15}},Object(h.a)("Add Your First Calendar Account")),n.createElement("p",{__source:{fileName:N,lineNumber:350,columnNumber:15}},g)),n.createElement("div",{className:"setting-group unlimited",__source:{fileName:N,lineNumber:352,columnNumber:13}},n.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:353,columnNumber:15}},n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:354,columnNumber:17}},n.createElement(l.a,{type:"text",name:"name",onChange:this.handleChange,label:this.props.searchableStrings.Name,value:e,autoFocus:!0,__source:{fileName:N,lineNumber:355,columnNumber:19}}))),("caldav"===a||"ical"===a)&&n.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:366,columnNumber:17}},n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:367,columnNumber:19}},n.createElement(l.a,{type:"text",name:"url",onChange:this.handleChange,label:this.props.searchableStrings.URL,value:t,__source:{fileName:N,lineNumber:368,columnNumber:21}})))),E(a)&&n.createElement("div",{className:"setting-group unlimited",__source:{fileName:N,lineNumber:381,columnNumber:15}},n.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:382,columnNumber:17}},n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:383,columnNumber:19}},n.createElement(l.a,{type:"text",name:"username",onChange:this.handleChange,label:this.props.searchableStrings.Username,value:i,placeholder:T(a),__source:{fileName:N,lineNumber:384,columnNumber:21}}))),("vivaldi"===a||"caldav"===a)&&n.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:396,columnNumber:19}},n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:397,columnNumber:21}},n.createElement(l.a,{type:"password",name:"password",onChange:this.handleChange,label:this.props.searchableStrings.Password,value:o,__source:{fileName:N,lineNumber:398,columnNumber:23}})))),this.state.statusText&&n.createElement("div",{className:"setting-group-double",__source:{fileName:N,lineNumber:412,columnNumber:15}},n.createElement(c.a,{type:p,__source:{fileName:N,lineNumber:413,columnNumber:17}},this.state.statusText))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:N,lineNumber:420,columnNumber:11}},n.createElement("input",{type:"submit",value:Object(h.a)("Add Account"),__source:{fileName:N,lineNumber:421,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.goBack,value:Object(h.a)("navigation","Back"),__source:{fileName:N,lineNumber:422,columnNumber:13}}))),"accountSummary"===this.state.step&&n.createElement("form",{className:"detail",onSubmit:this.props.showTips,__source:{fileName:N,lineNumber:428,columnNumber:9}},n.createElement("div",{className:"detail-content",__source:{fileName:N,lineNumber:429,columnNumber:11}},n.createElement("span",{className:"ShowMailTipsAndTricks-allSetIcon",dangerouslySetInnerHTML:{__html:b.ee},__source:{fileName:N,lineNumber:430,columnNumber:13}}),n.createElement("h1",{__source:{fileName:N,lineNumber:434,columnNumber:13}},Object(h.a)("Great, You’re All Set!")),n.createElement("p",{__source:{fileName:N,lineNumber:435,columnNumber:13}},Object(h.a)("We found the following calendars:")),this.state.calendars.length>0&&n.createElement("table",{__source:{fileName:N,lineNumber:437,columnNumber:15}},n.createElement("thead",{__source:{fileName:N,lineNumber:438,columnNumber:17}},n.createElement("tr",{__source:{fileName:N,lineNumber:439,columnNumber:19}},n.createElement("td",{__source:{fileName:N,lineNumber:440,columnNumber:21}},Object(h.a)("Calendar")),n.createElement("td",{__source:{fileName:N,lineNumber:441,columnNumber:21}},Object(h.a)("show","Hide")),n.createElement("td",{__source:{fileName:N,lineNumber:442,columnNumber:21}},Object(h.a)("calendar","Default")))),n.createElement("tbody",{__source:{fileName:N,lineNumber:445,columnNumber:17}},this.state.calendars.map(e=>n.createElement("tr",{key:e.id,__source:{fileName:N,lineNumber:447,columnNumber:19}},n.createElement("td",{__source:{fileName:N,lineNumber:448,columnNumber:21}},e.description||e.name),n.createElement("td",{__source:{fileName:N,lineNumber:449,columnNumber:21}},n.createElement("input",{type:"checkbox",onChange:t=>this.toggleCalendarHidden(t,e),checked:e.hidden,__source:{fileName:N,lineNumber:450,columnNumber:23}})),n.createElement("td",{__source:{fileName:N,lineNumber:456,columnNumber:21}},n.createElement("input",{type:"radio",onChange:t=>this.setDefaultCalendar(t,e),checked:f===e.id,__source:{fileName:N,lineNumber:457,columnNumber:23}})))))),0===this.state.calendars.length&&n.createElement("p",{__source:{fileName:N,lineNumber:469,columnNumber:15}},Object(h.a)("None yet, hold on a moment. If the list is not populated soon then something went wrong.")),n.createElement("p",{__source:{fileName:N,lineNumber:471,columnNumber:13}},Object(h.a)("Where to next?"))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:N,lineNumber:474,columnNumber:11}},n.createElement("input",{type:"submit",value:Object(h.a)("Show Tips and Tricks"),__source:{fileName:N,lineNumber:475,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.addAnother,value:Object(h.a)("Add Another Account"),__source:{fileName:N,lineNumber:476,columnNumber:13}}),n.createElement("input",{type:"button",value:Object(h.a)("Open Vivaldi Calendar"),onClick:()=>{m.a.openURL("vivaldi://calendar"),this.props.done&&this.props.done()},__source:{fileName:N,lineNumber:477,columnNumber:13}}))))}}t.a=A},function(e,t,a){"use strict";var n=a(0),i=a(615),s=a(72),r=a(20),o=a.n(r),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiDropdown.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m({className:e}){return n.createElement("span",{className:e,dangerouslySetInnerHTML:{__html:l.me},__source:{fileName:c,lineNumber:30,columnNumber:10}})}function d({item:e}){return n.createElement("span",{className:"VivaldiDropdown-SelectedValue",__source:{fileName:c,lineNumber:34,columnNumber:10}},n.createElement("img",{src:e.icon,className:"VivaldiDropdown-SelectedValue-Icon",__source:{fileName:c,lineNumber:35,columnNumber:5}}),n.createElement("span",{className:"VivaldiDropdown-SelectedValue-Title",__source:{fileName:c,lineNumber:36,columnNumber:5}},e.name),n.createElement(m,{className:"VivaldiDropdown-SelectedValue-Arrow",__source:{fileName:c,lineNumber:37,columnNumber:5}}))}class h extends n.Component{constructor(...e){super(...e),u(this,"refButton",n.createRef()),u(this,"state",{isExpanded:!1}),u(this,"onItemActivated",({id:e})=>{this.props.onValueChange(e),this.collapse()}),u(this,"collapse",()=>{this.setState({isExpanded:!1}),this.focus()}),u(this,"expand",()=>{this.setState({isExpanded:!0})}),u(this,"handleKeyDown",e=>{switch(e.which){case s.a.KEY_UP:case s.a.KEY_DOWN:this.expand()}}),u(this,"focus",()=>{var e;null===(e=this.refButton.current)||void 0===e||e.focus()})}render(){const e=this.props.items.find(e=>e.id===this.props.value);return(n.createElement("div",{className:o()("VivaldiDropdown",this.props.className),__source:{fileName:c,lineNumber:80,columnNumber:7}},n.createElement("button",{type:"button",ref:this.refButton,disabled:this.props.disabled,onMouseDown:()=>this.expand(),title:this.props.tooltip,className:o()("VivaldiDropdown-Button",{"VivaldiDropdown-Button--isActive":this.state.isExpanded}),onKeyDown:this.handleKeyDown,__source:{fileName:c,lineNumber:81,columnNumber:9}},this.props.hideButtonText?n.createElement(m,{className:"VivaldiDropdown-SelectedValue-Arrow",__source:{fileName:c,lineNumber:93,columnNumber:15}}):n.createElement(d,{item:e||this.props.items[0],__source:{fileName:c,lineNumber:94,columnNumber:15}})),this.state.isExpanded&&n.createElement(i.a,{className:"VivaldiDropdown-DropdownMenu",items:this.props.items,onClose:this.collapse,onItemActivated:this.onItemActivated,selectedItem:e,__source:{fileName:c,lineNumber:98,columnNumber:11}})))}}t.a=h},function(e,t,a){"use strict";var n=a(69),i=a(0),s=a.n(i),r=a(2),o=a(3),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\PopDeletionSettings.jsx";class c extends s.a.PureComponent{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"onChange",e=>{let{name:t,value:a,checked:n}=e.target;a===o.kb&&n&&(a=o.jb);const i={...this.props.account.popDeletion,[t]:a};this.props.setAccountProperty("popDeletion",i)})}render(){const e=this.props.account.popDeletion||{},{when:t=o.kb,howManyDays:a=o.ib}=e;return s.a.createElement("div",{className:"setting-group",__source:{fileName:l,lineNumber:42,columnNumber:9}},s.a.createElement(n.a,{name:"popdeletiongroup",value:t,onChange:this.onChange,disabled:t===o.kb,name:"when",__source:{fileName:l,lineNumber:43,columnNumber:11}},s.a.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:48,columnNumber:13}},s.a.createElement("label",{__source:{fileName:l,lineNumber:49,columnNumber:15}},s.a.createElement("input",{type:"checkbox",checked:t!==o.kb,value:o.kb,onChange:this.onChange,name:"when",__source:{fileName:l,lineNumber:50,columnNumber:17}}),s.a.createElement("span",{__source:{fileName:l,lineNumber:56,columnNumber:17}},Object(r.a)("Delete mail from server")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:l,lineNumber:59,columnNumber:13}},s.a.createElement("label",{className:"pop-how-many-days",__source:{fileName:l,lineNumber:60,columnNumber:15}},s.a.createElement("input",{type:"radio",value:o.jb,default:!0,__source:{fileName:l,lineNumber:61,columnNumber:17}}),s.a.createElement("input",{type:"number",min:"1",disabled:t!==o.jb,value:a,placeholder:o.ib,onChange:this.onChange,name:"howManyDays",className:"pop-how-many-days-input",__source:{fileName:l,lineNumber:62,columnNumber:17}}),s.a.createElement("span",{__source:{fileName:l,lineNumber:72,columnNumber:17}},Object(r.a)("days after receiving from server")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:l,lineNumber:75,columnNumber:13}},s.a.createElement("label",{__source:{fileName:l,lineNumber:76,columnNumber:15}},s.a.createElement("input",{type:"radio",value:o.lb,__source:{fileName:l,lineNumber:77,columnNumber:17}}),s.a.createElement("span",{__source:{fileName:l,lineNumber:78,columnNumber:17}},Object(r.a)("when deleting locally")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:l,lineNumber:81,columnNumber:13}},s.a.createElement("label",{__source:{fileName:l,lineNumber:82,columnNumber:15}},s.a.createElement("input",{type:"radio",value:o.mb,__source:{fileName:l,lineNumber:83,columnNumber:17}}),s.a.createElement("span",{__source:{fileName:l,lineNumber:84,columnNumber:17}},Object(r.a)("when received from server"))))))}}t.a=c},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(3),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\PopMaxSizeSettings.jsx";const l={"Limit size when loading":Object(s.a)("Limit size when loading"),"Limit (MB)":Object(s.a)("Limit (MB)")};class c extends i.a.PureComponent{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"onChange",e=>{const{name:t,value:a,checked:n}=e.target,i={...this.props.popMaxSize,[t]:"limited"===t?n:a};"limited"===t&&n&&!i.limit&&(i.limit=r.ob),this.props.setAccountProperty("popMaxSize",i)})}render(){const{limited:e=!1,limit:t=r.ob}=this.props.popMaxSize||{};return(i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"setting-single",__source:{fileName:o,lineNumber:43,columnNumber:9}},i.a.createElement("input",{type:"checkbox",name:"limited",checked:e,onChange:this.onChange,__source:{fileName:o,lineNumber:44,columnNumber:11}}),i.a.createElement("span",{__source:{fileName:o,lineNumber:48,columnNumber:11}},l["Limit size when loading"])),i.a.createElement("label",{className:"setting-single setting-single-flex",__source:{fileName:o,lineNumber:53,columnNumber:9}},i.a.createElement("input",{type:"number",name:"limit",placeholder:r.ob,disabled:!e,onChange:this.onChange,value:t,style:{width:90},__source:{fileName:o,lineNumber:54,columnNumber:11}}),i.a.createElement("span",{__source:{fileName:o,lineNumber:63,columnNumber:11}},l["Limit (MB)"]))))}}t.a=c},function(e,t,a){"use strict";var n=a(47),i=a(36),s=a(14),r=a(67),o=a(0),l=a.n(o),c=a(2),u=a(3),m=a(9),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\ShowMailTipsAndTricks.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends l.a.PureComponent{constructor(...e){super(...e),h(this,"SM",["start","singlekey","unseen","filterbuttons","feeds","final"]),h(this,"state",{current:"start"}),h(this,"getNextState",()=>{const e=this.SM.indexOf(this.state.current),t=this.SM[e+1];this.setState({current:t})}),h(this,"openMail",()=>{this.props.onClose&&this.props.onClose(),r.a.showContent("mail",{setFocus:!0,selectId:"",reason:""}),i.a.showMail(),n.a.selectFolder({name:Object(c.a)("Unread"),accountId:u.c,path:u.yb,id:u.d+"_"+u.yb})})}renderState(){switch(this.state.current){case"start":return l.a.createElement("div",{className:"ShowMailTipsAndTricks-allSetContainer",__source:{fileName:d,lineNumber:39,columnNumber:11}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-allSetIcon",dangerouslySetInnerHTML:{__html:m.ee},__source:{fileName:d,lineNumber:40,columnNumber:13}}),l.a.createElement("h1",{className:"ShowMailTipsAndTricks-allSetTitle",__source:{fileName:d,lineNumber:44,columnNumber:13}},Object(c.a)("Great, you're all set!")),l.a.createElement("p",{className:"ShowMailTipsAndTricks-description",__source:{fileName:d,lineNumber:45,columnNumber:13}},Object(c.a)("Where to next?")));case"singlekey":const e="https://help.vivaldi.com/desktop/shortcuts/keyboard-shortcuts/";return(l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:d,lineNumber:51,columnNumber:11}},Object(c.a)("Mail Tips & Tricks")),l.a.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:d,lineNumber:52,columnNumber:13}},Object(c.a)("Single key shortcuts")),l.a.createElement("p",{className:"ShowMailTipsAndTricks-description",__source:{fileName:d,lineNumber:53,columnNumber:13}},Object(c.a)("When you're in Mail you can hit a single key to get common tasks done faster")),l.a.createElement("div",{className:"ShowMailTipsAndTricks-shortcuts",__source:{fileName:d,lineNumber:54,columnNumber:13}},l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:55,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:56,columnNumber:17}},"R"),Object(c.a)("Reply")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:59,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:60,columnNumber:17}},"T"),Object(c.a)("Threaded View")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:63,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:64,columnNumber:17}},"F"),Object(c.a)("mail","Forward")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:67,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:68,columnNumber:17}},"G"),Object(c.a)("Mark the current e-mail as read and jump to the next unread.")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:71,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:72,columnNumber:17}},"K"),Object(c.a)("Mark as Read")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:75,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:76,columnNumber:17}},"E"),Object(c.a)("Enable Sender View (only show emails to and from the sender)")),l.a.createElement("label",{className:"ShowMailTipsAndTricks-shortcutContainer",__source:{fileName:d,lineNumber:79,columnNumber:15}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-fakeButton",__source:{fileName:d,lineNumber:80,columnNumber:17}},"M"),Object(c.a)("Mark Thread as Read")),l.a.createElement("a",{href:e,onClick:()=>s.a.openURL(e),__source:{fileName:d,lineNumber:83,columnNumber:15}},Object(c.a)("Learn more about keyboard shortcuts")))));case"unseen":const t="https://help.vivaldi.com/mail/mail-get-started/view-and-manage-messages/#Message_read_status";return(l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:d,lineNumber:92,columnNumber:13}},Object(c.a)("Mail Tips & Tricks")),l.a.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:d,lineNumber:93,columnNumber:13}},Object(c.a)("Unseen and Unread")),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:d,lineNumber:94,columnNumber:13}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-icon--Unseen",dangerouslySetInnerHTML:{__html:m.he},__source:{fileName:d,lineNumber:95,columnNumber:15}}),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide ShowMailTipsAndTricks-descriptionSide--Unseen",__source:{fileName:d,lineNumber:99,columnNumber:15}},l.a.createElement("p",{__source:{fileName:d,lineNumber:100,columnNumber:17}},Object(c.a)("In Vivaldi Mail, we separate between emails you've seen and those you have read.")),l.a.createElement("p",{__source:{fileName:d,lineNumber:101,columnNumber:17}},Object(c.a)("Emails are not marked read until you press K or G on the keyboard (or use the toolbar buttons).")),l.a.createElement("a",{href:t,onClick:()=>s.a.openURL(t),__source:{fileName:d,lineNumber:102,columnNumber:17}},Object(c.a)("Learn more about Unseen emails."))))));case"filterbuttons":const a="https://help.vivaldi.com/mail/mail-get-started/view-and-manage-messages/#Display_messages";return(l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:d,lineNumber:112,columnNumber:13}},Object(c.a)("Mail Tips & Tricks")),l.a.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:d,lineNumber:113,columnNumber:13}},Object(c.a)("View Toggles")),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:d,lineNumber:114,columnNumber:13}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-icon",dangerouslySetInnerHTML:{__html:m.ge},__source:{fileName:d,lineNumber:115,columnNumber:15}}),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:d,lineNumber:119,columnNumber:15}},l.a.createElement("p",{__source:{fileName:d,lineNumber:120,columnNumber:17}},Object(c.a)("They are Show Read, Show Custom IMAP folders, Show Mailing Lists, Show Feeds, Show Junk, and Show Deleted.")),l.a.createElement("p",{__source:{fileName:d,lineNumber:121,columnNumber:17}},Object(c.a)("For global views, such as the Unread view, you can quickly filter out messages that have already been dealt with (like read messages) or sorted (like e-mail in other folders than your Inbox).")),l.a.createElement("a",{href:a,onClick:()=>s.a.openURL(a),__source:{fileName:d,lineNumber:122,columnNumber:17}},Object(c.a)("Learn more about View Toggles"))))));case"feeds":const n="https://help.vivaldi.com/mail/mail-feeds/feeds/";return(l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:d,lineNumber:132,columnNumber:13}},Object(c.a)("Mail Tips & Tricks")),l.a.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:d,lineNumber:133,columnNumber:13}},Object(c.a)("Feeds")),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:d,lineNumber:134,columnNumber:13}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-feedsIcon",dangerouslySetInnerHTML:{__html:m.ke},__source:{fileName:d,lineNumber:135,columnNumber:15}}),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:d,lineNumber:139,columnNumber:15}},l.a.createElement("p",{__source:{fileName:d,lineNumber:140,columnNumber:17}},Object(c.a)("That's right, we have a Feed reader built into our email client!")),l.a.createElement("p",{__source:{fileName:d,lineNumber:141,columnNumber:17}},Object(c.a)("You can add feeds directly in the Mail Panel, or use the standalone Feeds panel.")),l.a.createElement("a",{href:n,onClick:()=>s.a.openURL(n),__source:{fileName:d,lineNumber:142,columnNumber:17}},Object(c.a)("Learn more about the Feed reader"))))));case"final":const i="https://help.vivaldi.com/mail/#mail-get-started";return(l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"ShowMailTipsAndTricks-title",__source:{fileName:d,lineNumber:152,columnNumber:13}},Object(c.a)("Mail Tips & Tricks")),l.a.createElement("h2",{className:"ShowMailTipsAndTricks-subtitle",__source:{fileName:d,lineNumber:153,columnNumber:13}},Object(c.a)("Get all the help you need")),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionContainer",__source:{fileName:d,lineNumber:154,columnNumber:13}},l.a.createElement("span",{className:"ShowMailTipsAndTricks-icon",dangerouslySetInnerHTML:{__html:m.de},__source:{fileName:d,lineNumber:155,columnNumber:15}}),l.a.createElement("div",{className:"ShowMailTipsAndTricks-descriptionSide",__source:{fileName:d,lineNumber:159,columnNumber:15}},l.a.createElement("p",{__source:{fileName:d,lineNumber:160,columnNumber:17}},Object(c.a)("Want more tips and tricks? Our Help pages contain all the documentation you need.")),l.a.createElement("p",{__source:{fileName:d,lineNumber:161,columnNumber:17}},Object(c.a)("Visit our Help pages for Mail.")),l.a.createElement("a",{href:i,onClick:()=>s.a.openURL(i),__source:{fileName:d,lineNumber:162,columnNumber:17}},Object(c.a)("Learn more about Vivaldi Mail"))))));default:return}}render(){return l.a.createElement("div",{className:"ShowMailTipsAndTricks",__source:{fileName:d,lineNumber:198,columnNumber:7}},this.renderState(),l.a.createElement("div",{className:"ShowMailTipsAndTricks-buttonContainer",__source:{fileName:d,lineNumber:200,columnNumber:9}},"final"!==this.state.current&&l.a.createElement("input",{type:"submit",className:"ShowMailTipsAndTricks-button",value:"start"===this.state.current?Object(c.a)("Show me tips and tricks"):Object(c.a)("Next tip"),onClick:this.getNextState,__source:{fileName:d,lineNumber:202,columnNumber:13}}),"start"===this.state.current&&l.a.createElement("input",{type:"button",className:"ShowMailTipsAndTricks-button",value:Object(c.a)("Add another account"),onClick:this.props.onCreateItem,__source:{fileName:d,lineNumber:210,columnNumber:13}}),l.a.createElement("input",{type:"button",className:"ShowMailTipsAndTricks-button",value:Object(c.a)("Open Vivaldi Mail"),onClick:this.openMail,__source:{fileName:d,lineNumber:217,columnNumber:11}})))}}t.a=p},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),i=a(2);const s=()=>[{value:5,name:Object(i.a)("Every 5 Minutes")},{value:15,name:Object(i.a)("Every 15 Minutes")},{value:30,name:Object(i.a)("Every 30 Minutes")},{value:60,name:Object(i.a)("Every Hour")},{value:120,name:Object(i.a)("Every 2 Hours")},{value:360,name:Object(i.a)("Every 6 Hours")},{value:720,name:Object(i.a)("Every 12 Hours")},{value:1440,name:Object(i.a)("Daily")},{value:10080,name:Object(i.a)("Weekly")}].map(e=>n.createElement("option",{key:e.value,value:e.value,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rss\\RSSUtilities.js",lineNumber:17,columnNumber:3}},e.name))},function(e,t,a){"use strict";var n=a(21),i=a(154),s=a(11),r=a(0),o=a.n(r),l=a(696),c=a(22),u=a(108),m=a(2),d=a(218),h=a(1423),p=a(1),b=a(9),g=a(236),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\readermode\\ReaderModeControls.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=s.a.getEventHandler,v=[p.kKeyboardTabToAll,p.kWebpagesReaderAllowVertical,p.kWebpagesReaderControls,p.kWebpagesReaderStyle],E=["ja","ja-KS","ko","zh-CN","zh-TW"].includes(navigator.language);class C extends o.a.Component{constructor(...e){super(...e),f(this,"state",{isOpen:!1}),f(this,"setTheme",e=>()=>{this.setStyle({themeStyle:e})}),f(this,"setFontFamily",e=>()=>{this.setStyle({fontFamily:e})}),f(this,"setLineHeight",e=>()=>{const t=(this.props.prefValues[p.kWebpagesReaderStyle].lineHeight+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({lineHeight:parseFloat(t)})}),f(this,"setFontSize",e=>()=>{const t=(this.props.prefValues[p.kWebpagesReaderStyle].fontSize+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({fontSize:parseFloat(t)})}),f(this,"setWidth",e=>()=>{const t=this.props.prefValues[p.kWebpagesReaderStyle];this.setStyle({width:Math.round(t.width+("increment"===e?50:-50))})}),f(this,"setDirection",e=>()=>{this.setStyle({writingMode:e})}),f(this,"setStyle",Object(g.default)(e=>{s.a.set(p.kWebpagesReaderStyle,{...this.props.prefValues[p.kWebpagesReaderStyle],...e}),l.a.setReaderModeStyle()},300,{leading:!0,trailing:!0})),f(this,"allowVerticalReader",e=>{s.a.set(p.kWebpagesReaderAllowVertical,e.target.checked),e.target.checked||this.setDirection("unset")()}),f(this,"toggleControls",()=>{this.setState(e=>({isOpen:!e.isOpen}))}),f(this,"canFontGrow",()=>this.props.prefValues[p.kWebpagesReaderStyle].fontSize<2),f(this,"canFontShrink",()=>this.props.prefValues[p.kWebpagesReaderStyle].fontSize>.5),f(this,"canLineHeightGrow",()=>this.props.prefValues[p.kWebpagesReaderStyle].lineHeight<2),f(this,"canLineHeightShrink",()=>this.props.prefValues[p.kWebpagesReaderStyle].lineHeight>1),f(this,"canColumnGrow",()=>{const e=this.props.prefValues[p.kWebpagesReaderStyle],t=document.body?document.body.clientWidth:0,a=document.body?document.body.clientHeight:0,n=Math.max(t-80,2e3),i=Math.max(a-100,900),s="vertical-rl"===e.writingMode;return e.width<(s?i:n)}),f(this,"canColumnShrink",()=>this.props.prefValues[p.kWebpagesReaderStyle].width>300)}render(){const{BROWSER_COLOR_FG:e,BROWSER_COLOR_ACCENT_BG:t}=this.props.vivaldiSettings,a=this.props.prefValues[p.kWebpagesReaderAllowVertical],n=this.props.prefValues[p.kWebpagesReaderStyle],i=u.a.getThemeColors().BROWSER_COLOR_FG,s="vertical-rl"===n.writingMode;if(this.props.prefs){const i=o.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:N,lineNumber:185,columnNumber:9}},o.a.createElement("h2",{__source:{fileName:N,lineNumber:186,columnNumber:11}},Object(m.a)("Reader")),o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:190,columnNumber:11}},o.a.createElement("label",{__source:{fileName:N,lineNumber:191,columnNumber:13}},o.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[p.kWebpagesReaderControls],onChange:_(p.kWebpagesReaderControls),__source:{fileName:N,lineNumber:192,columnNumber:15}}),o.a.createElement("span",{__source:{fileName:N,lineNumber:195,columnNumber:15}},Object(m.a)("Display Settings on Page in Reader")))),!E&&o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:200,columnNumber:13}},o.a.createElement("label",{__source:{fileName:N,lineNumber:201,columnNumber:15}},o.a.createElement("input",{type:"checkbox",checked:a,onChange:_(p.kWebpagesReaderAllowVertical),__source:{fileName:N,lineNumber:202,columnNumber:17}}),o.a.createElement("span",{__source:{fileName:N,lineNumber:205,columnNumber:17}},Object(m.a)("Allow Vertical Text Direction")))),o.a.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:N,lineNumber:210,columnNumber:11}},o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:211,columnNumber:13}},o.a.createElement("h3",{__source:{fileName:N,lineNumber:212,columnNumber:15}},Object(m.a)("Font Face")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:213,columnNumber:15}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:214,columnNumber:17}},o.a.createElement(c.a,{title:Object(m.a)("Sans-serif"),image:b.sd.medium,isPressed:"sans-serif"===n.fontFamily,onClick:this.setFontFamily("sans-serif"),tabIndex:0,__source:{fileName:N,lineNumber:215,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:222,columnNumber:19}}),o.a.createElement(c.a,{title:Object(m.a)("Serif"),image:b.ud.medium,isPressed:"serif"===n.fontFamily,onClick:this.setFontFamily("serif"),tabIndex:0,__source:{fileName:N,lineNumber:223,columnNumber:19}})))),o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:234,columnNumber:13}},o.a.createElement("h3",{__source:{fileName:N,lineNumber:235,columnNumber:15}},Object(m.a)("Font Size")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:236,columnNumber:15}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:237,columnNumber:17}},o.a.createElement(c.a,{className:"decrease-font-size",tooltip:Object(m.a)("Decrease font size"),title:Object(m.a)("Decrease"),image:b.sd.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),tabIndex:0,__source:{fileName:N,lineNumber:238,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:247,columnNumber:19}}),o.a.createElement(c.a,{className:"increase-font-size",tooltip:Object(m.a)("Increase font size"),title:Object(m.a)("Increase"),image:b.sd.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),tabIndex:0,__source:{fileName:N,lineNumber:248,columnNumber:19}})),o.a.createElement("span",{__source:{fileName:N,lineNumber:258,columnNumber:17}},Math.round(100*n.fontSize)+" %"))),o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:264,columnNumber:13}},o.a.createElement("h3",{className:"pad-top",__source:{fileName:N,lineNumber:265,columnNumber:15}},Object(m.a)("Line Height")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:266,columnNumber:15}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:267,columnNumber:17}},o.a.createElement(c.a,{title:Object(m.a)("Tighten"),tooltip:Object(m.a)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:b.Eb,tabIndex:0,__source:{fileName:N,lineNumber:268,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:276,columnNumber:19}}),o.a.createElement(c.a,{title:Object(m.a)("Loosen"),tooltip:Object(m.a)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:b.Fb,tabIndex:0,__source:{fileName:N,lineNumber:277,columnNumber:19}})),o.a.createElement("span",{__source:{fileName:N,lineNumber:286,columnNumber:17}},parseFloat(n.lineHeight).toFixed(1)))),o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:292,columnNumber:13}},o.a.createElement("h3",{__source:{fileName:N,lineNumber:293,columnNumber:15}},Object(m.a)("Column Width")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:294,columnNumber:15}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:295,columnNumber:17}},o.a.createElement(c.a,{title:Object(m.a)("Shrink"),tooltip:Object(m.a)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:b.Y,tabIndex:0,__source:{fileName:N,lineNumber:296,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:304,columnNumber:19}}),o.a.createElement(c.a,{title:Object(m.a)("Grow"),tooltip:Object(m.a)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:b.X,tabIndex:0,__source:{fileName:N,lineNumber:305,columnNumber:19}})),o.a.createElement("span",{__source:{fileName:N,lineNumber:314,columnNumber:17}},n.width+" px"))),(E||a)&&o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:321,columnNumber:15}},o.a.createElement("h3",{__source:{fileName:N,lineNumber:322,columnNumber:17}},Object(m.a)("Text Direction")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:323,columnNumber:17}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:324,columnNumber:19}},o.a.createElement(c.a,{tooltip:Object(m.a)("Horizontal Text"),title:Object(m.a)("title","Horizontal"),onClick:this.setDirection("unset"),isPressed:"vertical-rl"!==n.writingMode,image:b.md,tabIndex:0,__source:{fileName:N,lineNumber:325,columnNumber:21}}),o.a.createElement(c.a,{tooltip:Object(m.a)("Vertical Text"),title:Object(m.a)("title","Vertical"),isPressed:"vertical-rl"===n.writingMode,onClick:this.setDirection("vertical-rl"),image:b.nd,tabIndex:0,__source:{fileName:N,lineNumber:333,columnNumber:21}})))),o.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:346,columnNumber:13}},o.a.createElement("h3",{__source:{fileName:N,lineNumber:347,columnNumber:15}},Object(m.a)("Color Scheme")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default",__source:{fileName:N,lineNumber:348,columnNumber:15}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:N,lineNumber:349,columnNumber:17}},o.a.createElement(c.a,{title:Object(m.a)("other","Light"),image:b.U.medium,onClick:this.setTheme("light"),isPressed:"light"===n.themeStyle,buttonStyle:{"--kIconCircleFill":"#f6f6f6","--kIconCircleStroke":e},tabIndex:0,__source:{fileName:N,lineNumber:350,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:361,columnNumber:19}}),o.a.createElement(c.a,{title:Object(m.a)("other","Dark"),image:b.U.medium,onClick:this.setTheme("dark"),isPressed:"dark"===n.themeStyle,buttonStyle:{"--kIconCircleFill":"#111111","--kIconCircleStroke":e},tabIndex:0,__source:{fileName:N,lineNumber:362,columnNumber:19}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:373,columnNumber:19}}),o.a.createElement(c.a,{title:Object(m.a)("other","Theme"),image:b.U.medium,isPressed:"theme"===n.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":t,"--kIconCircleStroke":e},tabIndex:0,__source:{fileName:N,lineNumber:374,columnNumber:19}}))))),o.a.createElement("div",{className:"setting-group unlimited pad-top",__source:{fileName:N,lineNumber:390,columnNumber:11}},o.a.createElement("input",{type:"button",value:Object(m.a)("Reset to Defaults"),onClick:l.a.resetReaderModeStyle,__source:{fileName:N,lineNumber:391,columnNumber:13}})));return Object(d.a)(i,this.props.filter)}return[o.a.createElement(h.a,{key:"toolbar",classNames:"reader-toolbar",in:this.state.isOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:N,lineNumber:402,columnNumber:11}},o.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium reader-toolbar",__source:{fileName:N,lineNumber:413,columnNumber:13}},o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:415,columnNumber:15}},o.a.createElement(c.a,{tooltip:Object(m.a)("Sans-serif"),image:b.sd.medium,isPressed:"sans-serif"===n.fontFamily,onClick:this.setFontFamily("sans-serif"),__source:{fileName:N,lineNumber:416,columnNumber:17}}),o.a.createElement(c.a,{tooltip:Object(m.a)("Serif"),image:b.ud.medium,buttonStyle:{fontFamily:"serif"},isPressed:"serif"===n.fontFamily,onClick:this.setFontFamily("serif"),__source:{fileName:N,lineNumber:422,columnNumber:17}})),o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:431,columnNumber:15}},o.a.createElement(c.a,{className:"decrease-font-size",tooltip:Object(m.a)("Decrease font size"),image:b.sd.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),__source:{fileName:N,lineNumber:432,columnNumber:17}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:439,columnNumber:17}}),o.a.createElement(c.a,{className:"increase-font-size",tooltip:Object(m.a)("Increase font size"),image:b.sd.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),__source:{fileName:N,lineNumber:440,columnNumber:17}})),o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:449,columnNumber:15}},o.a.createElement(c.a,{className:s?"button-rotateimage":"",tooltip:Object(m.a)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:b.Eb,__source:{fileName:N,lineNumber:450,columnNumber:17}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:457,columnNumber:17}}),o.a.createElement(c.a,{className:s?"button-rotateimage":"",tooltip:Object(m.a)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:b.Fb,__source:{fileName:N,lineNumber:458,columnNumber:17}})),o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:467,columnNumber:15}},o.a.createElement(c.a,{className:s?"button-rotateimage":"",tooltip:Object(m.a)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:b.Y,__source:{fileName:N,lineNumber:468,columnNumber:17}}),o.a.createElement("hr",{__source:{fileName:N,lineNumber:475,columnNumber:17}}),o.a.createElement(c.a,{className:s?"button-rotateimage":"",tooltip:Object(m.a)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:b.X,__source:{fileName:N,lineNumber:476,columnNumber:17}})),(E||a)&&o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:486,columnNumber:17}},o.a.createElement(c.a,{tooltip:Object(m.a)("Horizontal Text"),isPressed:"vertical-rl"!==n.writingMode,onClick:this.setDirection("unset"),image:b.md,__source:{fileName:N,lineNumber:487,columnNumber:19}}),o.a.createElement(c.a,{tooltip:Object(m.a)("Vertical Text"),isPressed:"vertical-rl"===n.writingMode,onClick:this.setDirection("vertical-rl"),image:b.nd,__source:{fileName:N,lineNumber:493,columnNumber:19}})),o.a.createElement("div",{className:"toolbar-group",__source:{fileName:N,lineNumber:502,columnNumber:15}},o.a.createElement(c.a,{tooltip:Object(m.a)("other","Light"),image:b.U.medium,onClick:this.setTheme("light"),isPressed:"light"===n.themeStyle,buttonStyle:{"--kIconCircleFill":"white","--kIconCircleStroke":e},__source:{fileName:N,lineNumber:503,columnNumber:17}}),o.a.createElement(c.a,{tooltip:Object(m.a)("other","Dark"),image:b.U.medium,onClick:this.setTheme("dark"),image:b.U.medium,isPressed:"dark"===n.themeStyle,buttonStyle:{"--kIconCircleFill":"black","--kIconCircleStroke":e},__source:{fileName:N,lineNumber:513,columnNumber:17}}),o.a.createElement(c.a,{tooltip:Object(m.a)("other","Inherit Theme"),image:b.U.medium,isPressed:"theme"===n.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":t,"--kIconCircleStroke":e},__source:{fileName:N,lineNumber:524,columnNumber:17}})))),o.a.createElement(c.a,{buttonStyle:this.state.isOpen?void 0:{fill:i},key:"reader-settings-toggle",className:"reader-settings-toggle",onClick:this.toggleControls,tooltip:Object(m.a)("Reader settings"),image:b.vd.medium,__source:{fileName:N,lineNumber:539,columnNumber:11}})]}}t.a=Object(n.a)(Object(i.a)(C,["BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG"]),v)},function(e,t,a){"use strict";var n=a(0),i=a(21),s=a(11),r=a(52),o=a(2),l=a(7),c=a(1),u=a(9),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultSettings.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=[c.kStartupCheckIsDefault],p=s.a.getEventHandler;class b extends n.Component{constructor(...e){super(...e),d(this,"_isMounted",!1),d(this,"state",{isVivaldiDefault:!0}),d(this,"getDefaultBrowserValue",()=>{l.a.utilities.isVivaldiDefaultBrowser(e=>{this._isMounted&&this.setState({isVivaldiDefault:!0===e})})}),d(this,"setVivaldiDefault",()=>{l.a.utilities.setVivaldiAsDefaultBrowser(e=>{this._isMounted&&this.setState({isVivaldiDefault:!0===e})}),this.props.onClose&&this.props.onClose()}),d(this,"renderCheckbox",()=>n.createElement("label",{title:Object(o.a)("Check if Vivaldi is your default browser upon every startup"),__source:{fileName:m,lineNumber:71,columnNumber:7}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kStartupCheckIsDefault],onChange:p(c.kStartupCheckIsDefault),__source:{fileName:m,lineNumber:73,columnNumber:9}}),n.createElement("span",{__source:{fileName:m,lineNumber:76,columnNumber:9}},Object(o.a)("Check on Startup"))))}componentDidMount(){this.getDefaultBrowserValue(),this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return this.props.onClose?n.createElement("form",{onSubmit:this.setVivaldiDefault,className:"SuggestDefault",__source:{fileName:m,lineNumber:84,columnNumber:9}},n.createElement("span",{__source:{fileName:m,lineNumber:85,columnNumber:11}},Object(o.a)("Enjoying Vivaldi? Make it your default browser.")),n.createElement("input",{type:"submit",value:Object(o.a)("browser","Set as Default Browser"),__source:{fileName:m,lineNumber:86,columnNumber:11}}),this.renderCheckbox(),n.createElement("button",{type:"button",className:"SuggestDefault-Close",dangerouslySetInnerHTML:{__html:u.kb},onClick:this.props.onClose,__source:{fileName:m,lineNumber:88,columnNumber:11}})):n.createElement(r.a,{filter:this.props.filter,__source:{fileName:m,lineNumber:99,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:100,columnNumber:9}},!this.props.onClose&&n.createElement("h3",{__source:{fileName:m,lineNumber:102,columnNumber:13}},Object(o.a)("Default Browser")),n.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:104,columnNumber:11}},this.state.isVivaldiDefault?n.createElement("p",{__source:{fileName:m,lineNumber:112,columnNumber:17}},Object(o.a)("Vivaldi is set as your default browser.")):n.createElement("div",{__source:{fileName:m,lineNumber:106,columnNumber:15}},n.createElement("p",{__source:{fileName:m,lineNumber:107,columnNumber:17}},Object(o.a)("Vivaldi isn’t your default browser.")),n.createElement("input",{type:"button",onClick:this.setVivaldiDefault,value:Object(o.a)("browser","Set as Default"),__source:{fileName:m,lineNumber:108,columnNumber:17}}))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:m,lineNumber:115,columnNumber:11}},this.renderCheckbox())))}}t.a=Object(i.a)(b,h)},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(50),s=a(28),r=a(21),o=a(0),l=a.n(o),c=a(359),u=a(281),m=a(377),d=a(114),h=a(108),p=a(25),b=a(2),g=a(20),N=a.n(g),f=a(15),_=a.n(f),v=a(7),E=a(351),C=a(1),w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkEditor.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S="BookmarkEditor",T=[C.kBookmarksBarVisible];class k extends l.a.Component{constructor(...e){super(...e),y(this,"refTitle",l.a.createRef()),y(this,"refUrlField",l.a.createRef()),y(this,"_isCreating",!1),y(this,"_disableSaveOnBlur",!1),y(this,"state",{id:"",title:"",url:"",nickname:"",description:"",thumbnail:"",speeddial:!1,isFolder:!1,isTrash:!1,isSeparator:!1,dateAdded:null,editUrl:null,dataChanged:!1,autocompleteValue:""}),y(this,"resetUrlField",()=>{d.a.setUrlfieldState(S,{editUrl:void 0,autocompleteValue:void 0})}),y(this,"setIsCreating",e=>{this._isCreating=e}),y(this,"getIsCreating",()=>this._isCreating),y(this,"_onUrlbarStoreChanged",()=>{const{isActive:e,isOmniDropdownOpen:t,selectionEnd:a,selectionStart:n,...i}=h.a.getUrlfieldStateFromId(S);this.setState(i)}),y(this,"onSubmit",()=>{this._save(),this.props.onFocusTree()}),y(this,"_save",()=>{if(this.state.isTrash||""===this.state.id||!1===this.state.dataChanged)return Promise.resolve();const e=this.state.autocompleteValue||this.state.editUrl||this.state.url||E.a,t={id:this.state.id,title:this.state.title,url:e,nickname:this.state.nickname,description:this.state.description,speeddial:this.state.speeddial};return this._updateStoreWithItem(t)}),y(this,"_saveOnBlur",()=>{!1===this._disableSaveOnBlur&&this._save().then(this.setIsCreating(!1))}),y(this,"_updateStoreWithItem",e=>new Promise(t=>{n.a.verifyNode(e,this.state.isFolder).then(e=>{e&&i.a.update(e.id,e).then(a=>{const n={};e.id===this.state.id&&(n.url=s.b.filterUrl(e.url),n.description=a.description),this.setState(n),this.resetUrlField(),t()})})})),y(this,"_updateStateWithItem",(e={id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},t)=>{const a=s.b.isSeparator(e);this.setState({id:e.id,title:a?"":e.title,url:a?"":s.b.getUrlByNode(e),nickname:a?"":e.nickname,description:a?"":e.description,speeddial:!a&&e.speeddial,thumbnail:a?"":e.thumbnail,isFolder:!a&&!e.url,isTrash:!a&&s.b.isTrashed(e),isSeparator:a,dateAdded:e.dateAdded?new Date(e.dateAdded):null,dataChanged:!1},()=>{t&&t()})}),y(this,"handleKeyPress",e=>{if(e.stopPropagation(),"Escape"===e.key){e.preventDefault(),d.a.clearUrlfieldState(S);const t=this.state.id;this.getIsCreating()?(this.setIsCreating(!1),this._updateStateWithItem({id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},()=>{this.props.onCancel(t,!0)})):this.props.onCancel(t,!1)}}),y(this,"focusUrlField",()=>{this.refUrlField.current&&this.refUrlField.current.focus()}),y(this,"focusTitleField",()=>{this.refTitle.current&&this.refTitle.current.focus()}),y(this,"handleFocus",e=>{this.props.updateLayout&&this.props.updateLayout();const{HTMLInputElement:t}=this.context;e.target instanceof t&&e.target.select()}),y(this,"handleUpdateThumbnail",e=>{if(e.stopPropagation(),this.state.isFolder)return void i.a.update(this.state.id,{thumbnail:""});const t={id:this.state.id,url:this.state.url};n.a.verifyNode(t,!1).then(e=>{e&&u.a.updateBookmark(e)})}),y(this,"onBookmarkStoreChange",()=>{const e=this.state.id;if(e){const t=s.b.getItemById(e);t&&(null==t?void 0:t.id)===this.state.id&&this._updateStateWithItem(t)}}),y(this,"handleSetCustomThumbnail",e=>{e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),v.a.utilities.selectLocalImage({title:Object(b.a)("Select Custom Image"),thumbnailBookmarkId:this.state.id})}),y(this,"checkChangeSpeeddial",()=>{this.setState(e=>({speeddial:!e.speeddial,dataChanged:!0}),()=>{this._save()})}),y(this,"isBookmarkBarChecked",()=>s.b.getBookmarkBarFolderId()===this.state.id&&this.props.prefValues[C.kBookmarksBarVisible]),y(this,"checkChangeBookmarkBar",()=>{this.setState(e=>({dataChanged:!0}),()=>{i.a.setBookmarkBarFolderAndToggleVisibility(this.state.id)})}),y(this,"onInputChange",(e,t)=>{this.setState({[e]:t.target.value,dataChanged:!0})}),y(this,"onUrlChange",e=>{this.setState({url:e||"",dataChanged:!0})}),y(this,"setItem",e=>{d.a.clearUrlfieldState(S),this._updateStateWithItem(e,()=>{this.getIsCreating()&&(this._disableSaveOnBlur=!0,this.state.isFolder?this.focusTitleField():this.state.isTrash||this.focusUrlField(),this._disableSaveOnBlur=!1)})})}componentDidMount(){h.a.addChangeListener(this._onUrlbarStoreChanged),s.b.addChangeListener(this.onBookmarkStoreChange),e.nextTick(()=>{const e=this.props.getSelectedItem();e&&this.setItem(e)})}componentDidUpdate(e,t){t.id!==this.state.id&&this.resetUrlField()}componentWillUnmount(){h.a.removeChangeListener(this._onUrlbarStoreChanged),s.b.removeChangeListener(this.onBookmarkStoreChange),this._save(),e.nextTick(()=>d.a.clearUrlfieldState(S)),u.a.unlinkBookmarkComponent(this)}render(){const e=u.a.linkAndQueryUpdatingBookmark(this,this.state.id),{isFolder:t,isTrash:a}=this.state,n=_()(this.state.dateAdded).format("LLL"),i=!this.state.id||this.state.isSeparator||a;return l.a.createElement("div",{className:"manager-editor",onKeyDown:this.handleKeyPress,__source:{fileName:O,lineNumber:385,columnNumber:7}},l.a.createElement("form",{className:"addbookmark-cardwrapper cardview",onSubmit:this.onSubmit,__source:{fileName:O,lineNumber:386,columnNumber:9}},l.a.createElement("div",{className:"upper-half",__source:{fileName:O,lineNumber:389,columnNumber:11}},l.a.createElement("div",{className:"title-and-address",__source:{fileName:O,lineNumber:390,columnNumber:13}},l.a.createElement("div",{className:"fieldset",__source:{fileName:O,lineNumber:391,columnNumber:15}},l.a.createElement("input",{className:"cardview title",ref:this.refTitle,placeholder:Object(b.a)("Title"),onChange:this.onInputChange.bind(this,"title"),value:this.state.title,disabled:i,type:"text",onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:O,lineNumber:392,columnNumber:17}})),l.a.createElement("div",{className:t?"fieldset collapse":"fieldset",__source:{fileName:O,lineNumber:403,columnNumber:15}},l.a.createElement(m.a,{ref:this.refUrlField,stateResetKey:this.state.id,pageId:S,autocompletionEnabled:!0,autoFocus:!1,className:"cardview address",disabled:i||t,displayUrl:this.state.url,editUrl:this.state.editUrl,handleDrop:!0,onBlur:this._saveOnBlur,onFocus:this.handleFocus,onKeyPress:this.handleKeyPress,onChange:this.onUrlChange,placeholder:Object(b.a)("Address"),title:Object(b.a)("Enter webpage address"),__source:{fileName:O,lineNumber:404,columnNumber:17}})),l.a.createElement("div",{className:"fieldset",__source:{fileName:O,lineNumber:423,columnNumber:15}},l.a.createElement("input",{className:"cardview nickname",placeholder:Object(b.a)("Nickname"),value:this.state.nickname,onChange:this.onInputChange.bind(this,"nickname"),type:"text",disabled:i,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:O,lineNumber:424,columnNumber:17}}))),l.a.createElement("div",{className:"preview",__source:{fileName:O,lineNumber:436,columnNumber:13}},l.a.createElement(c.a,{key:this.state.id,isFolder:t,src:this.state.thumbnail,__source:{fileName:O,lineNumber:437,columnNumber:15}}),!i&&l.a.createElement("div",{className:"thumb-controls",__source:{fileName:O,lineNumber:442,columnNumber:17}},l.a.createElement("button",{type:"button",tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:N()({circular:!0,"set-custom-thumbnail":!0}),title:Object(b.a)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:w.yd},__source:{fileName:O,lineNumber:443,columnNumber:19}}),l.a.createElement("button",{type:"button",tabIndex:"-1",className:N()({circular:!0,"update-thumbnail":!0,updating:e}),title:Object(b.a)("Update thumbnail"),onClick:this.handleUpdateThumbnail,dangerouslySetInnerHTML:{__html:w.lc.large},__source:{fileName:O,lineNumber:453,columnNumber:19}})))),l.a.createElement("div",{className:"lower-half",__source:{fileName:O,lineNumber:468,columnNumber:11}},l.a.createElement("div",{className:"fieldset resizable",__source:{fileName:O,lineNumber:469,columnNumber:13}},l.a.createElement("textarea",{className:"description",placeholder:Object(b.a)("Description"),value:this.state.description,onChange:this.onInputChange.bind(this,"description"),type:"text",disabled:i,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:O,lineNumber:470,columnNumber:15}})),l.a.createElement("div",{className:"speeddial-bookmarksbar",__source:{fileName:O,lineNumber:480,columnNumber:13}},l.a.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:O,lineNumber:481,columnNumber:15}},l.a.createElement("label",{__source:{fileName:O,lineNumber:483,columnNumber:17}},l.a.createElement("input",{className:"cardview",disabled:i||!t||a,checked:this.state.speeddial,onChange:this.checkChangeSpeeddial,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:O,lineNumber:484,columnNumber:19}}),l.a.createElement("span",{__source:{fileName:O,lineNumber:491,columnNumber:19}},Object(b.a)("Speed Dial")))),l.a.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:O,lineNumber:494,columnNumber:15}},l.a.createElement("label",{__source:{fileName:O,lineNumber:496,columnNumber:17}},l.a.createElement("input",{className:"cardview",disabled:i||!t||a,checked:this.isBookmarkBarChecked(),onChange:this.checkChangeBookmarkBar,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:O,lineNumber:497,columnNumber:19}}),l.a.createElement("span",{__source:{fileName:O,lineNumber:504,columnNumber:19}},Object(b.a)("Bookmark Bar"))))),this.state.dateAdded&&l.a.createElement("div",{className:"fieldset",__source:{fileName:O,lineNumber:509,columnNumber:15}},l.a.createElement("div",{className:"meta-icon date fieldset",dangerouslySetInnerHTML:{__html:w.y},__source:{fileName:O,lineNumber:510,columnNumber:17}}),l.a.createElement("span",{className:"dateCreated bookmark",title:Object(b.a)("Date created"),__source:{fileName:O,lineNumber:512,columnNumber:17}},n))),l.a.createElement("input",{type:"submit",hidden:!0,__source:{fileName:O,lineNumber:520,columnNumber:11}})))}}y(k,"contextType",p.a),t.a=Object(r.a)(k,T)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(50),s=a(28),r=a(36),o=a(13),l=a(6),c=a(0),u=a.n(c),m=a(65),d=a(705),h=a(51),p=a(185),b=a(25),g=a(2),N=a(10),f=a(149),_=a(15),v=a.n(_),E=a(74),C=a(1),w=a(23),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkTree.jsx";function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(){i.a.setBookmarkBarFolderAndShow(s.b.getRootId())}function k(e){return!!e&&s.b.isTrashed(e)}function A(e){return!e.trash}function I(e){return!k(e)}function D(e){m.a.setStatus(w.p.getHoverUrl(s.b.getUrlByNode(e)))}function M(){m.a.clearStatus()}function P(e,t){t.button===E.a.kCenter&&(t.preventDefault(),t.stopPropagation())}function x(e){return e&&Boolean(e.trash)}function L(e,t){const a={bookmarks:t,incognito:e,inNewWindow:!0};n.a.open(a,!0)}function j(e,t){const a=Object(f.b)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}),i=t.map(e=>n.a.getBookmarksByNode(e)).flat();n.a.open({...a,bookmarks:i},!0)}function R(e,t){i.a.update(e,{title:t})}function B(e){return Boolean(e.speeddial)}function F(e){return!x(e)}function U(e){return!!e.children&&e.children.length>0}function H(e){return!(!e||!e.children&&e.url)}function V(e,t){const a={id:e.id,index:0,parentId:void 0};if(x(e)&&"on"!==t){const e=s.b.getLastTopNode();e?(a.parentId=e.parentId,a.index=(e.index||0)+1):a.parentId=s.b.getRootNode().id}else H(e)&&"on"===t?a.parentId=e.id:e.isExpanded&&"below"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=(e.index||0)+("below"===t?1:0));return a}function W(e){const{columns:t,node:a}=e,{onExpandClick:n,inManager:i,fullView:r}=e,o=s.b.isSeparator(a),l=16*(a.level+1)+"px";if(o){const e=0===(t?t.findIndex(e=>"title"===e.id):0)?l:0;return u.a.createElement("label",{"data-parent":a.parentId,key:"0",__source:{fileName:O,lineNumber:213,columnNumber:12}},u.a.createElement("hr",{style:{marginLeft:e},className:"separator",__source:{fileName:O,lineNumber:214,columnNumber:7}}))}return r?t.map(t=>{switch(t.id){case"title":return u.a.createElement(d.a,{key:a.id,node:a,inlineEditText:e.inlineEditText,onExpandClick:n,inManager:i,fullView:r,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,showBadge:e.showBadge,onMouseEnter:()=>D(a),onMouseLeave:()=>M(),__source:{fileName:O,lineNumber:239,columnNumber:9}});case"url":return u.a.createElement("label",{key:t.id,__source:{fileName:O,lineNumber:257,columnNumber:9}},U(a)&&r?u.a.createElement("span",{className:"secondary",__source:{fileName:O,lineNumber:259,columnNumber:15}},Object(g.a)("$1 item","$1 items",[a.children.length])):u.a.createElement("span",{__source:{fileName:O,lineNumber:264,columnNumber:15}},w.p.getHoverUrl(s.b.getUrlByNode(a))));case"nickname":return u.a.createElement("label",{key:t.id,__source:{fileName:O,lineNumber:270,columnNumber:9}},u.a.createElement("span",{__source:{fileName:O,lineNumber:271,columnNumber:11}},a.nickname));case"description":return u.a.createElement("label",{key:t.id,__source:{fileName:O,lineNumber:276,columnNumber:9}},u.a.createElement("span",{__source:{fileName:O,lineNumber:277,columnNumber:11}},a.description));case"dateAdded":return u.a.createElement("label",{key:t.id,className:"right-aligned",__source:{fileName:O,lineNumber:282,columnNumber:9}},u.a.createElement("span",{__source:{fileName:O,lineNumber:283,columnNumber:11}},v()(a.dateAdded).format("ll")))}}):u.a.createElement(d.a,{key:a.id,node:a,inlineEditText:e.inlineEditText,onExpandClick:n,inManager:i,fullView:r,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,showBadge:e.showBadge,onMouseEnter:()=>D(a),onMouseLeave:()=>M(),__source:{fileName:O,lineNumber:219,columnNumber:12}})}class z extends u.a.PureComponent{constructor(...t){super(...t),S(this,"refTreeList",u.a.createRef()),S(this,"state",{nodes:[],cutIds:[],showBadge:l.a.get(C.kPanelsShowFolderBadge)}),S(this,"expandModel",{}),S(this,"_onStoreChange",()=>{this.onFilterChange(this.props.filter)}),S(this,"onFilterChange",(e,t)=>{if(e&&e.length>0){var a;const n={bookmarks:!0,folders:!0};if("tree"===(null===(a=this.refTreeList.current)||void 0===a?void 0:a.getSearchStyle())){const a=s.b.getFilteredTree(e,n);this.setState({nodes:a.nodes,cutIds:s.b.getCutIds()},null==t?void 0:t(a.collapsed))}else{const a=s.b.getFilteredFlat(e,n);this.setState({nodes:a,cutIds:s.b.getCutIds()},null==t?void 0:t([]))}}else this.setState({nodes:s.b.getTopNodes(),cutIds:s.b.getCutIds()},null==t?void 0:t([]))}),S(this,"_onBadgeChanged",(e,t)=>{this.setState({showBadge:Boolean(t)})}),S(this,"deleteSelectedItems",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.onDelete()}),S(this,"expandAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAll()}),S(this,"collapseAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.collapseAll()}),S(this,"setSearchStyle",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.setSearchStyle(e)}),S(this,"onSearchStyleChanged",t=>{this.props.filter&&this.onFilterChange(this.props.filter,a=>{"tree"===t&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAllExcept(a)})})}),S(this,"scrollToId",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.scrollToId(e)}),S(this,"onDrop",(e,t,a)=>{const i=V(t,a);return n.a.getUrlsFromEventPromise(e,!0).then(e=>this.onCreate(e,i.parentId,i.index,!1))}),S(this,"onAdd",e=>{var t;const a=e?{title:Object(g.a)("title","New Folder")}:{};null===(t=this.refTreeList.current)||void 0===t||t.onAdd(e,a)}),S(this,"bookmarkActivePage",async e=>{var t;const a=null===(t=this.refTreeList.current)||void 0===t?void 0:t.getParentAndIndex(e,!0),n=o.c.unsafeGetActivePage();if(void 0!==(null==a?void 0:a.parentId)){const e=await i.a.bookmarkPages(n,n.windowId,!1,a.parentId,a.index);var s;if("string"==typeof e)null===(s=this.refTreeList.current)||void 0===s||s.selectById(e)}}),S(this,"bookmarkAllOpenPages",async e=>{var t;const a=null===(t=this.refTreeList.current)||void 0===t?void 0:t.getParentAndIndex(e,!0);if(void 0!==(null==a?void 0:a.parentId)){const e=await i.a.bookmarkAllOpenPages(this.context.vivaldiWindowId,a.parentId,a.index);var n;if("string"==typeof e)null===(n=this.refTreeList.current)||void 0===n||n.selectById(e)}}),S(this,"onRootPasteContextMenu",e=>{document.addEventListener("paste",this.onRootPaste),document.execCommand("paste"),document.removeEventListener("paste",this.onRootPaste)}),S(this,"onRootPaste",e=>{i.a.paste(e,s.b.getRootNode().id,!0)}),S(this,"getSelectedBookmarks",()=>{var e;return((null===(e=this.refTreeList.current)||void 0===e?void 0:e.getAllSelectedItems())||[]).map(e=>n.a.getBookmarksByNode(e)).flat()}),S(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),S(this,"_openInNewTab",e=>{const t={bookmarks:this.getSelectedBookmarks(),inCurrent:!1,inBackground:e||l.a.get(C.kTabsOpenNewInBackground)};n.a.open(t,!0)}),S(this,"_openBookmark",()=>{const e={bookmarks:this.getSelectedBookmarks(),inCurrent:!0};n.a.open(e,!0)}),S(this,"_supportSingleClick",()=>l.a.get(C.kBookmarksSingleClickOpens)&&!this.props.inManager),S(this,"getMenuCapability",async(e,t,a)=>{const n=Boolean(a)&&!x(a)&&!s.b.isSeparator(a);switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this._openInNewTab(!1),visible:n,...t(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this._openInNewTab(!0),visible:n&&!l.a.get(C.kTabsOpenNewInBackground),...t(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:this._openBookmark,visible:n,...t(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>L(!1,this.getSelectedBookmarks()),visible:n,...t(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>L(!0,this.getSelectedBookmarks()),visible:n,...t(e,{})};case"CONTEXT_SET_SPEEDDIAL":return{handler:()=>{i.a.toggleSpeeddialFolder(a.id)},visible:Boolean(a)&&!k(a)&&!B(a)&&H(a)&&s.b.validateForEdit(a.id),...t(e,{})};case"CONTEXT_UNSET_SPEEDDIAL":return{handler:()=>{i.a.toggleSpeeddialFolder(a.id)},visible:Boolean(a)&&!k(a)&&B(a)&&H(a)&&s.b.validateForEdit(a.id),...t(e,{})};case"CONTEXT_SET_BOOKMARK_BAR":{const n=Boolean(a)&&l.a.get(C.kBookmarksBarVisible)&&s.b.getBookmarkBarFolderId()===a.id;return{handler:a?()=>i.a.setBookmarkBarFolderAndToggleVisibility(a.id):T,visible:!a||H(a)&&!n&&!x(a),...t(e,{})}}case"CONTEXT_UNSET_BOOKMARK_BAR":return{handler:()=>i.a.setBookmarkBarFolderAndToggleVisibility(a.id),visible:Boolean(a)&&l.a.get(C.kBookmarksBarVisible)&&s.b.getBookmarkBarFolderId()===a.id,...t(e,{})};case"CONTEXT_MOVE_TO_BOOKMARK_BAR":return{handler:()=>async function(e){const t=s.b.getBookmarkBarFolderId(),a=s.b.getItemById(t);if(!a||s.b.isDescendantOf(a,e))return;const n=s.b.getItemById(e);n&&n.parentId!==t&&await N.a.bookmarks.move(e,{parentId:t})}(a.id),visible:Boolean(a)&&!x(a),...t(e,{})};case"CONTEXT_BOOKMARK":return{handler:a?()=>this.bookmarkActivePage(a):()=>this.bookmarkActivePage(s.b.getRootNode()),visible:!x(a),...t(e,{})};case"CONTEXT_BOOKMARK_ALL":return Promise.resolve({handler:a?()=>this.bookmarkAllOpenPages(a):()=>this.bookmarkAllOpenPages(s.b.getRootNode()),visible:!x(a),...t(e,{})});case"CONTEXT_EMPTY_TRASH":return{handler:()=>{i.a.emptyTrash()},visible:Boolean(a)&&x(a),...t(e,{})};case"CONTEXT_SETTINGS":default:return{...t(e,{})}}}),S(this,"getMenuVisibility",(e,t)=>{if(t)if(x(t))switch(e.action){case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}else{const a=x(t)||s.b.isSeparator(t);switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":return!a;case"CONTEXT_NEW_SEPARATOR":return!t.trash&&this.props.sorting.sortOrder===h.a.NO_SORTING;case"CONTEXT_RENAME":return s.b.validateForEdit(t.id);case"CONTEXT_CUT":case"CONTEXT_COPY":case"CONTEXT_PASTE":return!a;case"CONTEXT_DELETE":return!x(t);case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}else switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":return!0;case"CONTEXT_NEW_SEPARATOR":return this.props.sorting.sortOrder===h.a.NO_SORTING;case"CONTEXT_PASTE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_IMPORT":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}),S(this,"onContextMenu",(e,t)=>{var a;null===(a=this.refTreeList.current)||void 0===a||a.onContextMenu(e)}),S(this,"getDropSupport",(e,t)=>{const a=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===n.c);return{available:a,onto:a&&H(e),edge:!0}}),S(this,"handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),S(this,"onItemClick",(e,t)=>{var a;e.button!==E.a.kCenter&&this._supportSingleClick()&&!H(t)&&void 0===(null===(a=this.refTreeList.current)||void 0===a?void 0:a.getInlineEditId())&&this.openWithEventModifiers(e)}),S(this,"onItemDoubleClick",(e,t)=>{e.button===E.a.kCenter||this._supportSingleClick()||H(t)||this.openWithEventModifiers(e)}),S(this,"onItemMouseUp",(e,t)=>{t.button===E.a.kCenter&&(this._openInNewTab(!0),t.preventDefault(),t.stopPropagation())}),S(this,"openWithEventModifiers",e=>{const t=Object(f.b)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey});n.a.open({...t,bookmarks:this.getSelectedBookmarks()},!0)}),S(this,"getRowComponentProps",e=>({...e,childCount:e.node.children?e.node.children.length:0,columns:this.props.columns||[],showBadge:this.state.showBadge})),S(this,"unSelectAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.unSelectAll()}),S(this,"onSelect",async e=>{if(!this.props.onSelect)return;if(!e)return void this.props.onSelect();const t=await N.a.bookmarks.get(e.id),a=t&&1===t.length?t[0]:null;a&&this.props.onSelect(a)}),S(this,"onCreate",async(e,t,a,n)=>{const r=await i.a.createWithPromise(e,t,a),o=1===r.length&&s.b.isSeparator(r[0]);return this.props.onCreate(!o&&n),r})}componentDidMount(){s.b.addChangeListener(this._onStoreChange),l.a.addListener(C.kPanelsShowFolderBadge,this._onBadgeChanged),this.onFilterChange(this.props.filter,()=>{var e;const t=null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem();t&&this.onSelect(t)})}UNSAFE_componentWillReceiveProps(t){if(this.props.filter!==t.filter){const a=t.filter.length,n=this.props.filter.length;0===n&&a>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this.onFilterChange(t.filter,t=>{a>0?e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAllExcept(t)}):n>0&&0===a&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandWithModel(this.expandModel)})})}}componentWillUnmount(){l.a.removeListener(C.kPanelsShowFolderBadge,this._onBadgeChanged),s.b.removeChangeListener(this._onStoreChange)}render(){const e={name:"bookmarklist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return(u.a.createElement(p.a,{ref:this.refTreeList,rowComponent:e=>u.a.createElement(W,y({},e,{onExpandClick:e=>this.handleExpandClick(e),inManager:this.props.inManager,fullView:this.props.fullView,__source:{fileName:O,lineNumber:784,columnNumber:18}})),getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,cutIds:this.state.cutIds,onSelect:this.onSelect,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:P,onItemMouseUp:this.onItemMouseUp,onItemsActivated:j,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:i.a.remove,onMove:i.a.move,onEdit:this.props.onEdit,onCut:i.a.cut,onCopy:i.a.copy,onImport:r.a.showImportData,isFolder:H,isSeparator:s.b.isSeparator,supportsInlineEdit:!0,menu:e,mimeType:n.c,getDropSupport:this.getDropSupport,getDragData:s.b.getDragData,hasChildren:U,settings:this.props.inManager?"BOOKMARKS_MANAGER":"BOOKMARKS_PANEL",multiSelect:!this._supportSingleClick(),setCutIds:i.a.setCutIds,getTitle:s.b.getTitle,saveTitle:R,getTargetSpec:V,sorting:this.props.sorting,onDrop:this.onDrop,rootId:s.b.getRootId(),isValidAddTarget:I,isValidDragSource:F,isValidForClipboard:A,isValidToEdit:s.b.validateForEdit,validateForDrag:s.b.validateForDrag,validateForDeletion:s.b.validateForDeletion,columns:this.props.columns,__source:{fileName:O,lineNumber:781,columnNumber:7}}))}}S(z,"contextType",b.a),t.a=z}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(277),r=a(598),o=a(14),l=a(817),c=a(396),u=a(600),m=a(388),d=a(353),h=a(25),p=a(2),b=a(78),g=a(88),N=a.n(g),f=a(818),_=a(38),v=a(464),E=a(100),C=a(9),w=a(389),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\CalendarEventFull.jsx";function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const S=[n.createElement("option",{key:"none",__source:{fileName:O,lineNumber:48,columnNumber:3}},Object(p.a)("Use Current Timezone")),n.createElement("option",{key:"floating",value:_.i,__source:{fileName:O,lineNumber:49,columnNumber:3}},Object(p.a)("Always in Local Time"))].concat(N.a.tz.names().map(e=>n.createElement("option",{key:e,value:e,__source:{fileName:O,lineNumber:51,columnNumber:3}},e)));t.a=e=>{const{event:t}=e,{updateEvent:a,getContextMenu:g}=Object(f.a)(t),N=n.useRef(),T=n.useContext(h.a),{document:k,getSelection:A}=T;n.useEffect(()=>{const e=N.current,t=A();if(e&&t){e.focus();const a=k.createRange();a.selectNodeContents(e),a.collapse(!1),t.removeAllRanges(),t.addRange(a)}},[k,A]);const I={updateEvent:a,event:t,tabIndex:0},D=t=>n=>{const{value:i}=n.currentTarget;a(Object(v.d)(e.event,t,i))},M=t=>n=>{const{value:i}=n.currentTarget;a(Object(v.a)(e.event,t,i))},P=(t,n)=>{e.event[t]=n.currentTarget.checked,e.event.task&&(e.event.invites=[]),a(e.event)},{start:x,end:L}=Object(E.b)(t);return n.createElement("div",{className:"CalendarEventFull",onContextMenu:e=>{Object(b.a)(T.vivaldiWindowId,g())(e)},style:{backgroundImage:C.N},__source:{fileName:O,lineNumber:128,columnNumber:5}},n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:133,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.ib.small},__source:{fileName:O,lineNumber:134,columnNumber:9}}),n.createElement(m.a,y({},I,{field:"title",label:Object(p.a)("Title"),focusRef:N,__source:{fileName:O,lineNumber:138,columnNumber:9}}))),n.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:O,lineNumber:146,columnNumber:7}},n.createElement(m.a,y({},I,{field:"description",label:Object(p.a)("Description"),__source:{fileName:O,lineNumber:147,columnNumber:9}}))),!t.task&&n.createElement(n.Fragment,null,n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:155,columnNumber:9}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.yb.small},__source:{fileName:O,lineNumber:156,columnNumber:11}}),n.createElement("div",{__source:{fileName:O,lineNumber:160,columnNumber:11}},n.createElement(s.a,{onChange:M("start"),title:Object(p.a)("Event Start Date"),value:x.format("YYYY-MM-DD"),__source:{fileName:O,lineNumber:161,columnNumber:13}}),!t.allDay&&n.createElement(d.a,{onChange:D("start"),step:"5",title:Object(p.a)("Event Start Time"),value:x.format("HH:mm"),__source:{fileName:O,lineNumber:167,columnNumber:15}}),"–",!t.allDay&&n.createElement(d.a,{onChange:D("end"),step:"5",title:Object(p.a)("Event End Time"),value:L.format("HH:mm"),__source:{fileName:O,lineNumber:176,columnNumber:15}}),n.createElement(s.a,{onChange:M("end"),title:Object(p.a)("Event End Date"),value:L.format("YYYY-MM-DD"),__source:{fileName:O,lineNumber:183,columnNumber:13}}))),n.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:O,lineNumber:190,columnNumber:9}},n.createElement("div",{className:"edit-group",__source:{fileName:O,lineNumber:191,columnNumber:11}},n.createElement("label",{__source:{fileName:O,lineNumber:192,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:t.allDay,onChange:t=>{const{checked:n}=t.currentTarget;e.event.allDay=n,a(e.event)},__source:{fileName:O,lineNumber:193,columnNumber:15}}),n.createElement("span",{__source:{fileName:O,lineNumber:199,columnNumber:15}},Object(p.a)("All Day")))))),t.task&&n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:206,columnNumber:9}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.yb.small},__source:{fileName:O,lineNumber:207,columnNumber:11}}),n.createElement(u.a,{event:t,updateEvent:a,onDateChange:M("due"),onTimeChange:D("due"),__source:{fileName:O,lineNumber:211,columnNumber:11}})),(!t.task||!!t.due)&&n.createElement("div",{className:"CalendarEventFull-Row CalendarEventFull-Row--NoIcon",__source:{fileName:O,lineNumber:221,columnNumber:9}},n.createElement("div",{className:"edit-group",__source:{fileName:O,lineNumber:222,columnNumber:11}},n.createElement("label",{__source:{fileName:O,lineNumber:223,columnNumber:13}},n.createElement("select",{disabled:t.allDay,onChange:t=>{const{value:n}=t.currentTarget;n!==e.event.timezone&&a(Object(v.c)(e.event,n))},value:t.allDay?_.i:t.timezone,__source:{fileName:O,lineNumber:224,columnNumber:15}},S)))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:236,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.N.small},__source:{fileName:O,lineNumber:237,columnNumber:9}}),n.createElement("div",{className:"edit-group",__source:{fileName:O,lineNumber:241,columnNumber:9}},n.createElement("label",{__source:{fileName:O,lineNumber:242,columnNumber:11}},n.createElement("input",{type:"checkbox",checked:t.task,disabled:t.task,onChange:P.bind(null,"task"),__source:{fileName:O,lineNumber:243,columnNumber:13}}),n.createElement("span",{__source:{fileName:O,lineNumber:250,columnNumber:13}},Object(p.a)("Is a Task"))),n.createElement("label",{__source:{fileName:O,lineNumber:252,columnNumber:11}},n.createElement("input",{disabled:!t.task,type:"checkbox",checked:t.complete,onChange:P.bind(null,"complete"),__source:{fileName:O,lineNumber:253,columnNumber:13}}),n.createElement("span",{__source:{fileName:O,lineNumber:260,columnNumber:13}},Object(p.a)("Complete"))))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:265,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.Gb.small},__source:{fileName:O,lineNumber:266,columnNumber:9}}),n.createElement(m.a,y({},I,{field:"location",label:Object(p.a)("Location"),__source:{fileName:O,lineNumber:270,columnNumber:9}}))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:277,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:C.od.small},__source:{fileName:O,lineNumber:278,columnNumber:9}}),n.createElement("div",{className:"CalendarEventFull-Recurrence",__source:{fileName:O,lineNumber:282,columnNumber:9}},n.createElement(c.a,y({},I,{field:"recurrence",label:"recurrence",__source:{fileName:O,lineNumber:283,columnNumber:11}})))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:291,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.w},__source:{fileName:O,lineNumber:292,columnNumber:9}}),n.createElement(m.a,y({},I,{field:"url",label:Object(p.a)("URL"),__source:{fileName:O,lineNumber:296,columnNumber:9}}))),t.attachment&&t.attachment.length>0&&n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:304,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon",dangerouslySetInnerHTML:{__html:C.r},__source:{fileName:O,lineNumber:305,columnNumber:9}}),t.attachment.map(e=>n.createElement("div",{className:"CalendarEventFull-Attachment",key:e.url,__source:{fileName:O,lineNumber:310,columnNumber:11}},n.createElement("a",{onClick:()=>o.a.openURL(e.url),title:e.url,__source:{fileName:O,lineNumber:311,columnNumber:13}},e.filename||e.url)))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:322,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:C.k.small},__source:{fileName:O,lineNumber:323,columnNumber:9}}),n.createElement("div",{className:"CalendarEventFull-Notifications",__source:{fileName:O,lineNumber:327,columnNumber:9}},n.createElement(r.b,{event:t,updateEvent:a,buttonText:Object(p.a)("Add Notification"),__source:{fileName:O,lineNumber:328,columnNumber:11}}))),n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:336,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:C.Bc.small},__source:{fileName:O,lineNumber:337,columnNumber:9}}),n.createElement("div",{className:"CalendarEventFull-Notifications",__source:{fileName:O,lineNumber:341,columnNumber:9}},n.createElement(l.a,y({},I,{field:"attendees",label:Object(p.a)("Type to add Participants"),__source:{fileName:O,lineNumber:342,columnNumber:11}})))),t.calendarId!==_.e&&n.createElement("div",{className:"CalendarEventFull-Row",__source:{fileName:O,lineNumber:351,columnNumber:7}},n.createElement("span",{className:"CalendarEventFull-Icon CalendarEventFull-Icon--WithInput",dangerouslySetInnerHTML:{__html:C.H.small},__source:{fileName:O,lineNumber:352,columnNumber:9}}),Object(w.c)(t,e=>{i.a.setDefaultCalendarId(e),t.calendarId=e,a(t)},void 0,"popup")))}},function(e,t,a){"use strict";var n=a(0),i=a(127),s=a(72),r=a(519),o=a(6),l=a(2),c=a(97),u=a(1),m=a(9),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\event\\ParticipantsEditor.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={ACCEPTED:{icon:m.s,text:Object(l.a)("Has accepted the invite")},DECLINED:{icon:m.t,text:Object(l.a)("Has declined the invite")},TENTATIVE:{icon:m.u,text:Object(l.a)("Has tentatively accepted the invite")},"NEEDS-ACTION":{icon:m.v,text:Object(l.a)("Has not replied to the invite")},DELEGATED:{icon:m.Pb.large,text:Object(l.a)("Has delegated invite to another person")}};class b extends n.Component{constructor(e){super(e),h(this,"contacts",[]),h(this,"showNoMailWarning",!1),h(this,"stopEnterEvent",e=>{e.keyCode===s.a.KEY_RETURN&&e.stopPropagation()}),h(this,"contactSelected",e=>{if(!e.length)return;const t=e.pop(),{event:a}=this.props,n={id:"",event_id:a.id,name:t.name,address:t.address,sent:!1};a.invites?a.invites=[n,...a.invites]:a.invites=[n],this.props.updateEvent(a),this.contacts=this.getRemainingContacts(this.contacts),this.forceUpdate()}),h(this,"removeInvite",(e,t)=>{const{event:a}=this.props;if(!a.invites||0===a.invites.length)return;const{invites:n}=a,s=n.findIndex(t=>t.address===e);if(-1===s)return;n.splice(s,1);const r=t.target.closest(".calendar-event");if(r instanceof HTMLElement){const e=Object(c.c)(r);e.forEach((a,n)=>{a===t.target&&e[n-1]&&e[n-1].focus()})}this.props.updateEvent(a),this.contacts=this.getRemainingContacts(i.a.getMailAddresses()),this.forceUpdate()}),this.contacts=this.getRemainingContacts(i.a.getMailAddresses())}getRemainingContacts(e){const{event:t}=this.props;if(!t.invites||0===t.invites.length)return e;const a=new Set(t.invites.map(e=>e.address));return e.filter(e=>!a.has(e.address))}render(){var e;const{event:t}=this.props,a=(t.invites||[]).filter(e=>e.address!==t.organizer);return t.task?n.createElement("div",{className:"cal-event-participants",__source:{fileName:d,lineNumber:130,columnNumber:14}},n.createElement("p",{className:"info",__source:{fileName:d,lineNumber:131,columnNumber:9}},Object(l.a)("Participants not supported for Tasks"))):n.createElement("div",{className:"cal-event-participants",__source:{fileName:d,lineNumber:138,columnNumber:7}},n.createElement(r.a,{ref:this.props.focusRef,id:"foo_this_property_is_not_used",allItems:this.contacts,itemSelectionCallback:this.contactSelected,selectedItems:[],placeholder:this.props.label,tabIndex:this.props.tabIndex,__source:{fileName:d,lineNumber:141,columnNumber:9}}),!!(null===(e=t.invites)||void 0===e?void 0:e.length)&&n.createElement("div",{className:"cal-event-participantslist",__source:{fileName:d,lineNumber:151,columnNumber:11}},t.organizer&&n.createElement("div",{key:t.organizer,className:"cal-event-participant",title:Object(l.a)("Event Organizer"),__source:{fileName:d,lineNumber:153,columnNumber:15}},n.createElement("span",{className:"cal-event-participant-status",dangerouslySetInnerHTML:{__html:m.Bc.small},__source:{fileName:d,lineNumber:158,columnNumber:17}}),n.createElement("span",{className:"cal-event-participant-address",__source:{fileName:d,lineNumber:164,columnNumber:17}},t.organizer),n.createElement("input",{onClick:this.removeInvite.bind(this,t.organizer||""),onKeyDown:this.stopEnterEvent,tabIndex:this.props.tabIndex,type:"button",value:Object(l.a)("verb","Remove"),__source:{fileName:d,lineNumber:167,columnNumber:17}})),a.map((e,t)=>{const a=e.partstat||"NEEDS-ACTION",i=p[a]?p[a]:p["NEEDS-ACTION"];return n.createElement("div",{key:e.address,className:"cal-event-participant",title:i.text,__source:{fileName:d,lineNumber:184,columnNumber:17}},n.createElement("span",{className:"cal-event-participant-status",dangerouslySetInnerHTML:{__html:i.icon},__source:{fileName:d,lineNumber:189,columnNumber:19}}),n.createElement("span",{className:"cal-event-participant-address",__source:{fileName:d,lineNumber:195,columnNumber:19}},e.address),n.createElement("input",{onClick:this.removeInvite.bind(this,e.address),onKeyDown:this.stopEnterEvent,tabIndex:this.props.tabIndex,type:"button",value:Object(l.a)("verb","Remove"),__source:{fileName:d,lineNumber:198,columnNumber:19}}))})),!o.a.get(u.kCalendarMailAccount)&&n.createElement("p",{className:"info",__source:{fileName:d,lineNumber:212,columnNumber:11}},Object(l.a)("In order to send invitations you will need to select a mail account in calendar settings.")))}}t.a=b},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(200),o=a(4);t.a=e=>{const{editor:t}=n.useContext(s.a),a=n.useCallback(()=>{i.a.saveEventEdit(t)},[t]),l=n.useCallback(()=>{i.a.cancelEventChange(t)},[t]),c=n.useCallback(e=>{i.a.updateEventEdit(t,e)},[t]),u=n.useCallback(()=>{i.a.trashEvent(t,e.id)},[t,e]),m=n.useCallback(a=>{i.a.selectEvent(t,{event:e}),a?r.a.cut():r.a.copy()},[e,t]),d=n.useCallback(()=>[{handler:()=>m(!0),...Object(o.a)("verb","Cut")},{handler:()=>m(!1),...Object(o.a)("verb","Copy")},{handler:u,...Object(o.a)("Delete Event")}],[u,m]);return{saveEvent:a,discardChanges:l,updateEvent:c,trashEvent:u,getContextMenu:d}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a(24),s=a(25),r=a(230);function o(e,t,a){const[o,l]=n.useState(null),[c,u]=n.useState(""),{document:m,getComputedStyle:d}=n.useContext(s.a),h=n.useRef(),p=n.useRef(()=>{}),b=n.useRef({dragging:!1,cancelled:!1,currentX:null,currentY:null,initialTime:0,initialEndTime:0,initialStartRow:0,initialEndRow:0,initialLeftCol:0,initialRightCol:0});n.useEffect(()=>{var e;const t=m.createElement("div");t.classList.add("calendar-drag-image"),h.current=t,null===(e=m.body)||void 0===e||e.append(t)},[m]);const g=n.useCallback(()=>{e&&u({gridTemplateColumns:d(e).gridTemplateColumns,gridTemplateRows:d(e).gridTemplateRows})},[e,d]),N=n.useCallback(()=>{u(null)},[]),f=n.useCallback(()=>{l(null),b.current.dragging=!1,b.current.cancelled=!1,b.current.initialTime=0,b.current.initialStartRow=0,b.current.currentX=null,b.current.currentY=null,N()},[N]);return p.current=n.useCallback(()=>{if(b.current.dragging){const a=t(e,b.current,o);a?l(a):f(),requestAnimationFrame(p.current)}else b.current.cancelled||o&&i.a.editEvent(a,null,{start:o.startTime,end:o.endTime,allDay:o.isAllDay}),f()},[f,o,a,e,t]),{gridFrozen:c,handlers:{onDragStart:e=>{e.dataTransfer.items.length||(h.current&&e.dataTransfer.setDragImage(h.current,0,0),e.dataTransfer.setData(r.a,!0),b.current.dragging=!0,b.current.currentX=e.clientX,b.current.currentY=e.clientY,g(),e.stopPropagation(),requestAnimationFrame(p.current))},onDragOver:e=>{e.dataTransfer.types.some(e=>e===r.a)&&(b.current.currentX=e.clientX,b.current.currentY=e.clientY,e.stopPropagation(),e.preventDefault())},onDragEnd:e=>{"none"===e.dataTransfer.dropEffect&&(b.current.dragging=!1,b.current.cancelled=!0,e.stopPropagation(),e.preventDefault())},onDrop:e=>{e.dataTransfer.types.some(e=>e===r.a)&&(b.current.currentX=e.clientX,b.current.currentY=e.clientY,b.current.dragging=!1,e.stopPropagation())}},overlay:o}}},function(e,t,a){"use strict";var n=a(0),i=a(186),s=a(32),r=a(42),o=a(20),l=a.n(o),c=a(217),u=a(38),m=a(1),d=a(509),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarMonth.jsx";const p=[m.kCalendarDisplayWeekNumber];function b(e){const t=s.a.getCalendars().find(t=>t.id===e.event.calendarId),a=Math.max(0,Math.floor((e.event.start-e.startTime)/u.h)),i=Math.min(96,Math.floor((e.event.end-e.startTime)/u.h));return n.createElement("line",{stroke:"var(--colorCalendarBg)",style:r.a.getCalendarColors(t),x1:110,x2:110,y1:a,y2:i,__source:{fileName:h,lineNumber:52,columnNumber:5}})}function g(e){const t=s.a.getCalendars().find(t=>t.id===e.event.calendarId),a=Math.floor(48-10*(e.count-1)-10)+20*e.index,i=a+14;return n.createElement("line",{key:e.event.id,stroke:"var(--colorCalendarBg)",x1:10,x2:10,y1:a,y2:i,style:r.a.getCalendarColors(t),__source:{fileName:h,lineNumber:74,columnNumber:5}})}function N(e){const[t,a]=Object(d.a)(r.a.filterEventsByPeriod(e.events,e.day,"day"),r.a.isAllDayEvent),i=e.day.clone();return n.createElement(n.Fragment,{key:e.day.valueOf(),__source:{fileName:h,lineNumber:98,columnNumber:5}},n.createElement("div",{className:l()("CalendarMonth-Day",{"CalendarMonth-Day--OtherMonth":!e.isSameMonth,"CalendarMonth-Day--Selected":e.isSelected,"CalendarMonth-Day--Current":e.day.isSame(Date.now(),"day"),"CalendarMonth-Day--Weekend":e.day.day()%6==0}),onClick:()=>e.onSelect(i),__source:{fileName:h,lineNumber:99,columnNumber:7}},n.createElement("span",{__source:{fileName:h,lineNumber:108,columnNumber:9}},e.day.format("D")),!(!a.length&&!t.length)&&n.createElement("svg",{viewBox:"0 0 120 96",__source:{fileName:h,lineNumber:110,columnNumber:11}},a.map(t=>n.createElement(b,{key:t.id,event:t,startTime:e.day.valueOf(),__source:{fileName:h,lineNumber:112,columnNumber:15}})),t.map((e,a)=>n.createElement(g,{key:e.id,event:e,index:a,count:t.length,__source:{fileName:h,lineNumber:119,columnNumber:15}})))))}function f(e){const t=n.useContext(i.a),a=Object(c.a)(p)[m.kCalendarDisplayWeekNumber],{events:s,month:o}=e,u=o.clone().startOf("month").startOf("week");let d;if(e.fixedHeight)d=[...Array(42).keys()].map(e=>u.clone().add(e,"day"));else{const e=r.a.getDisplayRange(o,"month");d=Array.from(e.by("day"))}const b=d.slice(0,7);return(n.createElement("div",{className:l()("CalendarMonth",{"CalendarMonth--ShowWeeknumber":a}),__source:{fileName:h,lineNumber:150,columnNumber:5}},a&&n.createElement("span",{__source:{fileName:h,lineNumber:155,columnNumber:26}}),b.map(e=>n.createElement("span",{key:`hdr-${e.valueOf()}`,className:"CalendarMonth-DayOfWeek",__source:{fileName:h,lineNumber:157,columnNumber:9}},e.format("dd")[0])),d.map((i,r)=>{const l=i.isSame(o,"month");return a&&r%7==0?n.createElement(n.Fragment,{key:r,__source:{fileName:h,lineNumber:169,columnNumber:13}},n.createElement("span",{className:"CalendarMonth-Week",__source:{fileName:h,lineNumber:170,columnNumber:15}},i.week()),e.showOutOfMonthDays||l?n.createElement(N,{day:i,events:s,pageId:t.editor.pageId,isSelected:e.selectedDate.isSame(i,e.highlightMode),isSameMonth:l,onSelect:e.onSelect,__source:{fileName:h,lineNumber:172,columnNumber:19}}):n.createElement("span",{__source:{fileName:h,lineNumber:180,columnNumber:19}})):e.showOutOfMonthDays||l?n.createElement(N,{key:i.valueOf(),day:i,events:s,pageId:t.editor.pageId,isSelected:e.selectedDate.isSame(i,e.highlightMode),isSameMonth:l,onSelect:e.onSelect,__source:{fileName:h,lineNumber:186,columnNumber:15}}):n.createElement("span",{key:i.valueOf(),__source:{fileName:h,lineNumber:195,columnNumber:15}})})))}f.defaultProps={highlightMode:"day",fixedHeight:!1},t.a=f},,,,,,,,function(e,t,a){"use strict";var n=a(277),i=a(295),s=a(0),r=a.n(s),o=a(2),l=a(15),c=a.n(l),u=a(605),m=a(103),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistorySearch.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends r.a.Component{constructor(...e){super(...e),h(this,"search",e=>{this.props.search(this.props.historyFilter.merge(e))}),h(this,"focusField",()=>{this.refs.search.focus()}),h(this,"onSearchChange",e=>{this.updateFilter(e.target.value)}),h(this,"updateFilter",e=>{const t=Object(u.a)(e.trim()),a={text:e,parsedFilter:t};this.search(a)}),h(this,"onStartTimeChange",e=>{const t=c()(e.target.value).startOf("day");t.isValid()&&this.search({startTime:t})}),h(this,"onEndTimeChange",e=>{const t=c()(e.target.value).endOf("day");this.search({endTime:t})}),h(this,"onSelectOption",()=>{const e=i.a.getTimeByRange({rangePicker:this.refs.datePicker.value},this.props.minDate.startOf("day"));this.search(e)}),h(this,"convertDate",e=>Object(m.c)(c()(e)))}render(){const e=this.props.historyFilter,t=this.convertDate(new Date);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:"search",type:"search",tabIndex:"0",style:{flexShrink:2},value:e.text,onChange:this.onSearchChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:Object(o.a)("verb","Search"),__source:{fileName:d,lineNumber:71,columnNumber:7}}),this.props.showPicker&&r.a.createElement("select",{ref:"datePicker",style:{flexShrink:2},value:this.props.historyFilter.rangePicker,onChange:this.onSelectOption,__source:{fileName:d,lineNumber:83,columnNumber:9}},r.a.createElement("option",{value:"today",__source:{fileName:d,lineNumber:88,columnNumber:11}},Object(o.a)("Today")),r.a.createElement("option",{value:"yesterday",__source:{fileName:d,lineNumber:89,columnNumber:11}},Object(o.a)("Yesterday")),r.a.createElement("option",{value:"7",__source:{fileName:d,lineNumber:90,columnNumber:11}},Object(o.a)("Last 7 Days")),r.a.createElement("option",{value:"30",__source:{fileName:d,lineNumber:91,columnNumber:11}},Object(o.a)("Last 30 Days")),r.a.createElement("option",{value:"date_range",__source:{fileName:d,lineNumber:92,columnNumber:11}},Object(o.a)("Date Range...")),r.a.createElement("option",{value:"all",__source:{fileName:d,lineNumber:93,columnNumber:11}},Object(o.a)("All History"))),this.props.showPicker&&"date_range"===this.props.historyFilter.rangePicker&&r.a.createElement("div",{className:"date-range",__source:{fileName:d,lineNumber:99,columnNumber:9}},r.a.createElement(n.a,{title:Object(o.a)("Start Date"),max:t,value:this.convertDate(e.startTime),onChange:this.onStartTimeChange,__source:{fileName:d,lineNumber:100,columnNumber:11}}),r.a.createElement(n.a,{title:Object(o.a)("End Date"),max:t,value:this.convertDate(e.endTime),onChange:this.onEndTimeChange,__source:{fileName:d,lineNumber:105,columnNumber:11}})))}}t.a=p},function(e,t,a){"use strict";var n=a(0),i=a(295);a(15);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){return class extends n.Component{constructor(e){super(e),r(this,"_onStoreChange",(e,t)=>{if(t===this.id||void 0===t)if("filterChange"===e){const e=i.a.getFilter(this.id);this.setState({historyFilter:e})}else"searchResultsReady"===e&&this.setState(this._getSearchStateById(this.id))}),r(this,"_getSearchStateById",e=>{const t=i.a.getHistorySearchResults(e);return{historyItems:t.items,historyFilter:t.filter,historyStatistics:i.a.getStatistics(e),oldestHistoryDate:t.oldestHistoryDate}}),this.id=e.pageId||i.a.getPanelResourceKey(),this.state=this._getSearchStateById(this.id)}UNSAFE_componentWillMount(){i.a.addChangeListener(this._onStoreChange)}componentWillUnmount(){i.a.removeChangeListener(this._onStoreChange)}render(){return n.createElement(e,s({},this.props,this.state,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryStoreSubscription.jsx",lineNumber:71,columnNumber:14}}))}}}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),i=a(151),s=a(2),r=a(20),o=a.n(r),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\AddAttachmentButton.jsx";function u({disabled:e,keyAccess:t,noteId:a,text:r,onOpenDialog:u}){const m=n.useRef(null);return n.createElement("label",{className:o()("button-toolbar",{disabled:e}),title:Object(s.a)("Attach new file..."),tabIndex:t,__source:{fileName:c,lineNumber:27,columnNumber:5}},n.createElement("input",{ref:m,type:"file",style:{display:"none"},accept:"image/*",disabled:e,onChange:e=>i.a.addImageFile(a,e.target.files[0]),__source:{fileName:c,lineNumber:32,columnNumber:7}}),n.createElement("button",{disabled:e,tabIndex:t,onClick:function(){var e;null==u||u(),null===(e=m.current)||void 0===e||e.click()},__source:{fileName:c,lineNumber:40,columnNumber:7}},n.createElement("div",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:l.r},__source:{fileName:c,lineNumber:41,columnNumber:9}}),n.createElement("span",{__source:{fileName:c,lineNumber:42,columnNumber:9}},r)))}},function(e,t,a){"use strict";var n=a(801),i=a(31),s=a(14),r=a(6),o=a(0),l=a.n(o),c=a(25),u=a(78),m=a(4),d=a(149),h=a(1),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentContainer.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t,a){const n={inCurrent:t,inBackground:a};s.a.openURL(e.content,n)}function N(e,t){const a={inNewWindow:!0,incognito:t};s.a.openURL(e.content,a)}function f(e,t){const a=Object(d.b)({ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey});s.a.openURL(e.content,{...a})}class _ extends l.a.Component{constructor(...e){super(...e),b(this,"onContextMenu",(e,t)=>{const a=[{items:[{handler:g.bind(null,e,!0,!1),...Object(m.a)("Current Tab")},{handler:g.bind(null,e,!1,r.a.get(h.kTabsOpenNewInBackground)),...Object(m.a)("open in","New Tab")},{handler:g.bind(null,e,!1,!0),visible:!r.a.get(h.kTabsOpenNewInBackground),...Object(m.a)("Background Tab")},i.a.separatorItem,{handler:N.bind(null,e,!1),...Object(m.a)("open in","New Window")},{handler:N.bind(null,e,!0),...Object(m.a)("open in","Private Window")}],...Object(m.a)("Open in")},i.a.separatorItem,{handler:(e=>{e.checksum&&this.props.onInsertMarkdown(e.checksum)}).bind(null,e),...Object(m.a)("Insert Markdown"),visible:!!this.props.onInsertMarkdown},{handler:this.props.onRemoveAttachment.bind(null,e),...Object(m.a)("verb","Remove")}];Object(u.a)(this.context.vivaldiWindowId,a)(t)}),b(this,"onDragStart",(e,t)=>{if(!t.checksum||!this.props.noteId)return;const a=`${this.props.noteId}/${t.checksum}`;"html"===this.props.dragFormat?e.dataTransfer.setData("text/html",`<img src="chrome://vivaldi-data/notes-attachment/${a}" />`):e.dataTransfer.setData("text/plain",`attachment:${a}`)})}render(){const{attachments:e}=this.props;return(l.a.createElement("div",{className:"NotesAttachments",__source:{fileName:p,lineNumber:128,columnNumber:7}},e.map((e,t)=>l.a.createElement(n.a,{key:e.checksum,item:e,onContextMenu:this.onContextMenu.bind(null,e),onOpen:f.bind(null,e),onDelete:this.props.onRemoveAttachment.bind(null,e),onDragStart:this.onDragStart,draggable:!!this.props.onInsertMarkdown,__source:{fileName:p,lineNumber:130,columnNumber:11}}))))}}b(_,"contextType",c.a),b(_,"defaultProps",{onInsertMarkdown:()=>Promise.resolve(),dragFormat:"url"}),t.a=_},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(323),s=a(151),r=a(89),o=a(14),l=a(13),c=a(6),u=a(51),m=a(185),d=a(2),h=a(15),p=a.n(h),b=a(74),g=a(126),N=a(7),f=a(46),_=a(360),v=a(9),E=a(1),C=a(169),w=a(23),O=a(149),y="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\notesTree.jsx";function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e){o.a.openURL(w.p.internalUrl("notes",e.id),{singleton:!0})}class k extends n.PureComponent{constructor(...t){super(...t),S(this,"refTreeList",n.createRef()),S(this,"state",{nodes:[],populated:!1,cutIds:[],showBadge:c.a.get(E.kPanelsShowFolderBadge)}),S(this,"expandModel",{}),S(this,"isEmpty",()=>this.state.populated&&0===this.state.nodes.length),S(this,"isInManager",()=>Boolean(this.props.columns)),S(this,"deleteSelectedItems",()=>{var e;return(null===(e=this.refTreeList.current)||void 0===e?void 0:e.onDelete())||Promise.reject()}),S(this,"delete",(e=[])=>Promise.all(e.map(e=>"string"!=typeof e?Promise.resolve():new Promise(t=>{N.a.notes.get(e,a=>{a&&a.length>0&&!this.isTrashCan(a[0])?N.a.notes.remove(e,t):t()})})))),S(this,"isFolder",e=>r.b.isFolder(e)),S(this,"isTrashCan",e=>Boolean(e.trash)),S(this,"isEditable",()=>!1),S(this,"getUrlsByNodes",e=>e.map(e=>r.b.getNodeById(e.id)).filter(e=>!!e&&!!e.url).map(e=>Object(f.e)(e.url))),S(this,"onItemMouseDown",(e,t)=>{t.button===b.a.kCenter&&Object(g.a)(t)}),S(this,"onItemMouseUp",(e,t)=>{if(t.button===b.a.kCenter){const a=this.getUrlsByNodes([e]);a.length>0?o.a.openUrls(a,{...Object(O.b)({button:t.button,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey})}):T(e),Object(g.a)(t)}}),S(this,"onItemDoubleClick",(e,t)=>{const a=this.getUrlsByNodes([t]);a.length>0?o.a.openUrls(a,{...Object(O.b)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey})}):T(t)}),S(this,"onNodesActivated",(e,t)=>{const a=this.getUrlsByNodes(t);o.a.openUrls(a,{...Object(O.b)({button:e.button,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey})})}),S(this,"onFilterChange",(e,t=C.default)=>{let a=[],n=[];if(r.b.hasNotes())if(e.length>0){var i;let t=e.toLowerCase();const s={};if(t.startsWith("url:")?(t=t.substring(4),s.url=t.length>0,s.content=!1):t.startsWith("content:")&&(t=t.substring(8),s.url=!1,s.content=t.length>0),"."===t&&(s.url=!1),"tree"===(null===(i=this.refTreeList.current)||void 0===i?void 0:i.getSearchStyle())){const e=r.b.getFilteredTree(t,s);a=e.nodes,n=e.collapsed}else a=r.b.getFilteredFlat(t,s)}else a=r.b.getRootNode().children;this.setState(e=>({nodes:a,populated:!0,cutIds:r.b.getCutIds()}),()=>t(n))}),S(this,"_onStoreChange",()=>{this.onFilterChange(this.props.filter)}),S(this,"_onBadgeChanged",(e,t)=>{this.setState({showBadge:Boolean(t)})}),S(this,"hasChildren",e=>!!e.children&&e.children.length>0),S(this,"handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),S(this,"unSelectAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.unSelectAll()}),S(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),S(this,"expandAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAll()}),S(this,"collapseAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.collapseAll()}),S(this,"setSearchStyle",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.setSearchStyle(e)}),S(this,"onSearchStyleChanged",t=>{this.props.filter&&this.onFilterChange(this.props.filter,a=>{"tree"===t&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAllExcept(a)})})}),S(this,"isValidForClipboard",e=>!this.isTrashCan(e)),S(this,"isValidDragSource",e=>!this.isTrashCan(e)),S(this,"isValidAddTarget",e=>!this.isTrashed(e)),S(this,"isTrashed",e=>{return!!e&&(!!this.isTrashCan(e)||!!e.parentId&&this.isTrashed(null===(t=this.refTreeList.current)||void 0===t?void 0:t.findTreeItem(e.parentId)));var t}),S(this,"onAddFolder",()=>{var e;const t={title:Object(d.a)("title","New Folder")};null===(e=this.refTreeList.current)||void 0===e||e.onAdd(!0,t)}),S(this,"onAddNote",e=>{var t;return null===(t=this.refTreeList.current)||void 0===t?void 0:t.onAdd(!1,e)}),S(this,"selectById",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.selectById(e)}),S(this,"onDrop",(e,t,a)=>{const n=e.dataTransfer.getData("text/plain");if(n.length>0){const e=this.getTargetSpec(t,a),i={content:n};return this.onCreate([i],e.parentId,e.index,!0)}return Promise.resolve()}),S(this,"getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:void 0};if(this.isTrashCan(e)&&"on"!==t){const e=r.b.getLastTopNode();e?(a.parentId=e.parentId,a.index=(e.index||0)+1):a.parentId=r.b.getRootNode().id}else this.isFolder(e)&&"on"===t?a.parentId=e.id:e.isExpanded&&"below"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=(e.index||0)+("below"===t?1:0));return a}),S(this,"onCreate",(e,t,a,n)=>s.a.createNotesFromTreeNodes(e,t,a,n).then(()=>this.props.onCreated())),S(this,"onMove",(e,t,a)=>(e=r.b.validateForDrag(e),Promise.all(e.map(e=>new Promise(n=>{const i={parentId:t,index:a},s=r.b.getNodeById(e);N.a.notes.move(e,i,()=>{n(e)}),void 0!==a&&s&&(s.parentId!==t||s.index>a)&&a++}))))),S(this,"getText",()=>new Promise(e=>{const t=l.c.unsafeGetActivePage().get("id");N.a.utilities.getSelectedText(t,e)})),S(this,"getMenuCapability",async(e,t,a)=>{const n={inManager:this.isInManager()};switch(e.action){case"CONTEXT_OPEN_ADDRESS":{const i=null==a?void 0:a.url;return{handler:()=>!!i&&o.a.openUrls([i],{inNewWindow:!1,inCurrent:!1,inBackground:c.a.get(E.kTabsOpenNewInBackground)}),visible:!!i,...t(e,n)}}case"CONTEXT_NEW_FROM_SELECTION":return this.getText().then(a=>{const i=l.c.unsafeGetActivePage().get("url");return{visible:!!a,handler:()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.onAdd(!1,{content:a,url:i})},...t(e,n)}});case"CONTEXT_EDIT":return{handler:()=>T(a),visible:Boolean(a)&&!this.isTrashCan(a),...t(e,n)};case"CONTEXT_EMPTY_TRASH":return{handler:()=>{s.a.emptyTrash()},visible:Boolean(a)&&this.isTrashCan(a),...t(e,n)};case"CONTEXT_SETTINGS":default:return{...t(e,n)}}}),S(this,"getMenuVisibility",(e,t)=>{if(t)if(this.isTrashCan(t))switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}else{const a=this.isTrashCan(t)||r.b.isSeparator(t);switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":return!this.isTrashCan(t);case"CONTEXT_NEW_SEPARATOR":return!this.isTrashCan(t)&&this.props.sorting.sortOrder===u.a.NO_SORTING;case"CONTEXT_RENAME":return!a;case"CONTEXT_CUT":case"CONTEXT_COPY":case"CONTEXT_PASTE":case"CONTEXT_DELETE":return!this.isTrashCan(t);case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}else switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_NEW_FOLDER":return!0;case"CONTEXT_NEW_SEPARATOR":return this.props.sorting.sortOrder===u.a.NO_SORTING;case"CONTEXT_PASTE":case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":case"CONTEXT_CONTAINER_SEARCH":return!0;default:return!1}}),S(this,"onContextMenu",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onContextMenu(e)}),S(this,"getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!0};return a.available=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===r.c),a.available&&(a.onto=this.isFolder(e)),a}),S(this,"saveTitle",(e,t)=>{N.a.notes.update(e,{title:t})}),S(this,"renderTitleRow",e=>{var t;const a=e.node,s=16*(a.level+1)+"px",r=16*a.level+"px",o=this.isFolder(a);return n.createElement("label",{key:a.id,__source:{fileName:y,lineNumber:581,columnNumber:7}},o&&this.hasChildren(a)&&n.createElement("span",{className:"expand-icon",style:{marginLeft:r},onMouseDown:g.a,onMouseUp:()=>this.handleExpandClick(a.id),dangerouslySetInnerHTML:{__html:v.rb},__source:{fileName:y,lineNumber:584,columnNumber:11}}),o&&n.createElement(i.a,{trash:this.isTrashCan(a),open:a.isExpanded,leftMargin:this.hasChildren(a)?0:s,__source:{fileName:y,lineNumber:592,columnNumber:11}}),!o&&!a.url&&n.createElement("span",{style:{marginLeft:s},className:"tree-icon",dangerouslySetInnerHTML:{__html:v.vc},__source:{fileName:y,lineNumber:599,columnNumber:11}}),!o&&!!a.url&&n.createElement("span",{style:{marginLeft:s},className:"tree-icon",dangerouslySetInnerHTML:{__html:v.uc},__source:{fileName:y,lineNumber:605,columnNumber:11}}),void 0!==e.inlineEditText&&n.createElement("input",{type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:y,lineNumber:611,columnNumber:11}}),void 0===e.inlineEditText&&n.createElement("span",{className:"title",title:Object(_.b)(a),__source:{fileName:y,lineNumber:621,columnNumber:11}},Object(_.b)(a)),e.showBadge&&!this.props.fullView&&this.hasChildren(a)&&n.createElement("span",{className:"item-count",__source:{fileName:y,lineNumber:631,columnNumber:11}},null===(t=a.children)||void 0===t?void 0:t.length))}),S(this,"getRowComponentProps",e=>({...e,childCount:e.node.children?e.node.children.length:0,columns:this.props.columns,showBadge:this.state.showBadge})),S(this,"rowComponent",e=>{const t=e.node,a=r.b.isSeparator(t),i=this.isFolder(t),s=16*(t.level+1)+"px",{columns:o}=e,l=[];return a?l.push(n.createElement("label",{key:`${t.id}__separator__${l.length}`,"data-parent":t.parentId,__source:{fileName:y,lineNumber:660,columnNumber:9}},n.createElement("hr",{style:{marginLeft:s},className:"separator",__source:{fileName:y,lineNumber:663,columnNumber:11}}))):this.props.fullView?(o||[]).map(a=>{switch(a.id){case"title":l.push(this.renderTitleRow(e));break;case"url":l.push(n.createElement("label",{key:a.id,__source:{fileName:y,lineNumber:676,columnNumber:15}},n.createElement("span",{__source:{fileName:y,lineNumber:677,columnNumber:17}},t.url)));break;case"content":l.push(n.createElement("label",{key:a.id,__source:{fileName:y,lineNumber:683,columnNumber:15}},!i&&n.createElement("span",{__source:{fileName:y,lineNumber:685,columnNumber:19}},t.content),i&&t.children&&t.children.length>0&&n.createElement("span",{className:"secondary",__source:{fileName:y,lineNumber:688,columnNumber:19}},Object(d.a)("$1 item","$1 items",[t.children.length]))));break;case"attachments":l.push(n.createElement("label",{key:a.id,className:"right-aligned",__source:{fileName:y,lineNumber:697,columnNumber:15}},n.createElement("span",{__source:{fileName:y,lineNumber:698,columnNumber:17}},t.attachments&&t.attachments.length>0?t.attachments.length:"")));break;case"dateAdded":l.push(n.createElement("label",{key:a.id,className:"right-aligned",__source:{fileName:y,lineNumber:707,columnNumber:15}},!i&&n.createElement("span",{__source:{fileName:y,lineNumber:709,columnNumber:19}},p()(t.dateAdded).format("ll"))))}}):l.push(this.renderTitleRow(e)),l})}componentDidMount(){c.a.addListener(E.kPanelsShowFolderBadge,this._onBadgeChanged),r.b.addChangeListener(this._onStoreChange),this.onFilterChange(this.props.filter)}componentWillUnmount(){c.a.removeListener(E.kPanelsShowFolderBadge,this._onBadgeChanged),r.b.removeChangeListener(this._onStoreChange)}UNSAFE_componentWillReceiveProps(t){if(this.props.filter!==t.filter){const a=t.filter.length,n=this.props.filter.length;0===n&&a>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this.onFilterChange(t.filter,t=>{a>0?e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAllExcept(t)}):n>0&&0===a&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandWithModel(this.expandModel)})})}}render(){if(!this.state.populated&&!this.props.filter)return null;const e=r.b.getRootNode().id,t={name:"noteslist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return n.createElement(m.a,{ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,cutIds:this.state.cutIds,settings:this.props.settings,rootId:e,onSelect:this.props.onItemSelected,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onNodesActivated,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:this.delete,onMove:this.onMove,onDrop:this.onDrop,onCut:s.a.cut,onCopy:s.a.copy,supportsInlineEdit:!0,mimeType:r.c,getDropSupport:this.getDropSupport,getDragData:r.b.getDragData,isFolder:this.isFolder,isSeparator:r.b.isSeparator,hasChildren:this.hasChildren,menu:t,setCutIds:s.a.setCutIds,getTitle:r.b.getTitle,saveTitle:this.saveTitle,getTargetSpec:this.getTargetSpec,isValidAddTarget:this.isValidAddTarget,isValidDragSource:this.isValidDragSource,isValidForClipboard:this.isValidForClipboard,isValidToEdit:r.b.validateForEdit,validateForDrag:r.b.validateForDrag,validateForDeletion:r.b.validateForDeletion,sorting:this.props.sorting,columns:this.props.columns,__source:{fileName:y,lineNumber:734,columnNumber:7}})}}t.a=k}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a(2),s=a(9),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesWelcome.jsx";function o({onAddNote:e}){return n.createElement("div",{className:"notes-welcome",__source:{fileName:r,lineNumber:13,columnNumber:5}},n.createElement("div",{className:"happy-note",onClick:e,__source:{fileName:r,lineNumber:14,columnNumber:7}},n.createElement("span",{dangerouslySetInnerHTML:{__html:s.tc},__source:{fileName:r,lineNumber:15,columnNumber:9}}),n.createElement("h1",{__source:{fileName:r,lineNumber:16,columnNumber:9}},Object(i.a)("Write Your First Note")),n.createElement("p",{__source:{fileName:r,lineNumber:17,columnNumber:9}},Object(i.a)("Add a new note to begin, or select text on any webpage and create a note from contextual menu."))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a(22),s=a(2),r=a(9),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanelToolbar.jsx";class l extends n.PureComponent{constructor(...e){var t,a,i;super(...e),t=this,a="refSearch",i=n.createRef(),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}focusSearch(){this.refSearch.current&&this.refSearch.current.focus()}render(){const{editorLayout:e,filter:t,onFilterValueChange:a,onAddNote:l,onDeleteSelectedItems:c,onAddFolder:u,onSetLayout:m,isDeleteDisabled:d}=this.props;return n.createElement("div",{className:"toolbar toolbar-default toolbar-small toolbar-wrap",__source:{fileName:o,lineNumber:49,columnNumber:7}},n.createElement("input",{ref:this.refSearch,type:"search",className:"notesearch",placeholder:Object(s.a)("verb","Search"),value:t,title:Object(s.a)("Limit the search to address or content by $1 or $2",["URL:","CONTENT:"]),onChange:({currentTarget:e})=>a(e.value),__source:{fileName:o,lineNumber:50,columnNumber:9}}),n.createElement("div",{className:"toolbar",style:e?{flexGrow:1}:{},__source:{fileName:o,lineNumber:61,columnNumber:9}},n.createElement("div",{className:"toolbar-group",__source:{fileName:o,lineNumber:68,columnNumber:11}},n.createElement(i.a,{onClick:l,tooltip:Object(s.a)("New Note"),image:r.h.small,__source:{fileName:o,lineNumber:69,columnNumber:13}}),n.createElement(i.a,{onClick:c,tooltip:Object(s.a)("other","Delete"),image:r.pd.small,disabled:d,__source:{fileName:o,lineNumber:74,columnNumber:13}})),n.createElement("div",{className:"toolbar-group",__source:{fileName:o,lineNumber:81,columnNumber:11}},n.createElement(i.a,{onClick:u,image:r.pb.small,tooltip:Object(s.a)("command","New Folder"),__source:{fileName:o,lineNumber:82,columnNumber:13}})),e&&n.createElement(i.a,{style:{marginLeft:"auto"},onClick:m,image:"vertical"===e?r.Td.small:r.Sd.small,tooltip:Object(s.a)("command","Toggle Layout"),__source:{fileName:o,lineNumber:90,columnNumber:13}})))}}},function(e,t,a){"use strict";var n=a(50),i=a(28),s=a(0),r=a.n(s),o=a(40),l=a.n(o),c=a(25),u=a(20),m=a.n(u),d=a(78),h=(a(644),"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialTitle.jsx");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends r.a.PureComponent{constructor(...e){super(...e),p(this,"bookmarkActions",this.props.bookmarkActions||n.a),p(this,"state",{isEditing:!1,title:this.props.bookmark.title,fallbackTitle:this.props.bookmark.title}),p(this,"_documentClickHandler",e=>{const t=l.a.findDOMNode(this),a=e.target;t&&a instanceof HTMLElement&&!t.contains(a)?this.refs.input.blur():document.removeEventListener("click",this._documentClickHandler)}),p(this,"handleMouseDown",e=>{e.preventDefault()}),p(this,"handleClick",e=>{"click"!==this.props.howToEdit?this.props.onSelect&&this.props.onSelect(e):this.enableEditing()}),p(this,"handleDoubleClick",e=>{"doubleClick"===this.props.howToEdit&&this.enableEditing()}),p(this,"handleBlur",e=>{this.finishEdit("save")}),p(this,"handleChange",e=>{const t=e.target.value;this.setState({title:t})}),p(this,"handleKeyDown",e=>{switch(e.stopPropagation(),e.key){case"Enter":this.finishEdit("save");break;case"Escape":this.props.needsInitialEdit&&this.state.title===i.b.getDefaultFolderName()?this.finishEdit("delete"):this.finishEdit("undo")}}),p(this,"removeSpeedDial",()=>{this.bookmarkActions.update(this.props.bookmark.id,{speeddial:!1})}),p(this,"containEvent",e=>{e.stopPropagation()}),p(this,"onContextMenu",e=>{this.state.isEditing?e.stopPropagation():(e.persist(),e.preventDefault(),e.stopPropagation(),this.props.getContextMenuItemsPromise(this.props.bookmark).then(t=>{Object(d.a)(this.context.vivaldiWindowId,t)(e)}))})}componentDidUpdate(e,t){!1===e.needsInitialEdit&&!0===this.props.needsInitialEdit&&!1===this.state.isEditing&&this.enableEditing(),!1===t.isEditing&&!0===this.state.isEditing&&this.refs.input&&this.refs.input.value&&(this.refs.input.setSelectionRange(0,this.refs.input.value.length),this.refs.input.focus())}enableEditing(){!1===this.state.isEditing&&(document.addEventListener("click",this._documentClickHandler),this.setState({isEditing:!0}))}finishEdit(e){if(!1===this.state.isEditing)return;document.removeEventListener("click",this._documentClickHandler),this.props.needsInitialEdit&&this.props.setSpeedDialAwaitingEdit("");const t=this.props.bookmark.id;switch(e){case"save":this.setState({isEditing:!1},()=>{this.bookmarkActions.update(t,{title:this.state.title}).then(()=>{this.props.onFinished&&this.props.onFinished(!1)})});break;case"undo":this.setState(e=>({title:e.fallbackTitle,isEditing:!1}),()=>{this.bookmarkActions.update(t,{title:this.state.title}).then(()=>{this.props.onFinished&&this.props.onFinished(!1)})});break;case"delete":this.setState({isEditing:!1},()=>{this.props.onFinished&&this.props.onFinished(!0),this.bookmarkActions.remove([t])})}}render(){const e=m()({"editable-title-container":!0,edit:this.state.isEditing}),t={...this.props.style,width:this.props.bookmark.title.length+"ch"};return r.a.createElement("span",{className:e,onContextMenu:this.onContextMenu,__source:{fileName:h,lineNumber:222,columnNumber:7}},this.state.isEditing?r.a.createElement("input",{type:"text",ref:"input",className:"sd-title-editor",value:this.state.title,onBlur:this.handleBlur,style:t,onKeyDown:this.handleKeyDown,onMouseDown:this.containEvent,onChange:this.handleChange,autoFocus:!0,__source:{fileName:h,lineNumber:240,columnNumber:13}}):r.a.createElement("button",{className:this.props.className,"data-id":this.props.bookmark.id,tabIndex:this.props.keyAccess,onClick:this.handleClick,title:this.props.bookmark.title,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this,this.props.bookmark.id):void 0,onMouseDown:this.handleMouseDown,style:this.props.style,onDoubleClick:this.handleDoubleClick,__source:{fileName:h,lineNumber:226,columnNumber:13}},this.props.bookmark.title))}}p(b,"contextType",c.a),t.a=b},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(13),i=a(180);function s({pageId:e,url:t,activeElement:a}){const s=n.c.getPageById(e);if(null==s?void 0:s.isMailPage)return"";if("quick-command-search"===(null==a?void 0:a.className))return"quickCommands";let r=!1;try{r=!0===i.a.getFindResultsForPage(e).isFindInPageToolbarOpen}catch(e){console.warn(e)}return!0===r?"findInPage":""}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2);function i(e){const{unseen:t,unread:a,total:i}=e;return t>0?t===a&&a===i?Object(n.a)("$1 new message","$1 new messages",[t]):t===a?Object(n.a)("$1 new message of $2 messages","$1 new messages of $2 messages",[t,i]):Object(n.a)("$1 new in $2 unread of $3 messages","$1 new in $2 unread of $3 messages",[t,a,i]):a>0?a===i?Object(n.a)("$1 unread message","$1 unread messages",[a]):Object(n.a)("$1 unread of $2 messages","$1 unread of $2 messages",[a,i]):Object(n.a)("$1 message","$1 messages",[i])}},,function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(20),r=a.n(s);class o extends i.a.Component{render(){const e=this.props.progress,t=r()({"page-progress-indicator":!0,"progress-done":1===e});return i.a.createElement("progress",{className:t,value:100*e,max:100,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabProgressIndicator.jsx",lineNumber:18,columnNumber:7}})}}t.a=o},function(e,t,a){"use strict";a(53);var n=a(14),i=a(10),s=a(7),r=a(26),o=a(259);t.a=function(e,t,a){const l=()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",h)},c=(t,l,u,m)=>{s.a.tabsPrivate.onDragEnd.removeListener(c),i.a.runtime.sendMessage({dispatchAction:o.a}),!t&&l&&n.a.detachPage(Object(r.List)(e),u,m),a&&a.onDragEnd()},u=t.pageX,m=t.pageY,d=t=>{if(Math.abs(t.pageX-u)>5||Math.abs(t.pageY-m)>5){l();const n=(a?a.element:t.target).getBoundingClientRect(),r=a?a.offsetLeft:0,u=a?a.offsetTop:0,m=a?a.offsetHeight:0,d=a?a.offsetWidth:0;i.a.runtime.sendMessage({dispatchAction:o.c}),s.a.tabsPrivate.onDragEnd.addListener(c);const[h]=e;s.a.tabsPrivate.startDrag({mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:e.map(e=>e.id),active:(e.find(e=>e.active)||h).id}),url:h.url,title:h.title,posX:n.left+r,posY:n.top+u,width:n.width+d,height:n.height+m,cursorX:10,cursorY:10}),a&&a.onDragStart(e)}},h=()=>{l()};window.addEventListener("mousemove",d),window.addEventListener("mouseup",h)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=function(){let e,t,a,n,i;return function(s,r,o,l){const c=(new Date).getTime();s!==e||r!==t?(e=s,t=r,a=c):s===e&&r===t&&s!==n&&r!==i&&a&&c-a>o&&(l(),n=s,i=r,e=t=a=void 0)}}},function(e,t,a){"use strict";var n=a(140),i=a(72),s=a(6),r=a(0),o=a.n(r),l=a(25),c=a(17),u=a(7),m=a(1);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends o.a.PureComponent{constructor(...e){super(...e),d(this,"lastKeyWasAltDown",!1),d(this,"_onCommandSpy",()=>{c.a.isActive(this.context.vivaldiWindowId)&&this.props.changeFocus()}),d(this,"_onWindowStoreChanged",()=>{!c.a.isActive(this.context.vivaldiWindowId)&&this.props.showAccessKeys&&this.props.showAccessKeys(!1)}),d(this,"_onMouseChanged",e=>{!1===e&&(this.lastKeyWasAltDown=!1)}),d(this,"_onWindowPositionChanged",()=>{this.lastKeyWasAltDown=!1}),d(this,"_keyEventListener",(e,t,a,n,r)=>{if(this.context.vivaldiWindowId===e&&c.a.isActive(e)){const e=n===i.a.KEY_ALT&&(t?4===a:0===a);e&&this.props.showAccessKeys&&this.props.showAccessKeys(t),!t&&n===i.a.KEY_ALT&&this.lastKeyWasAltDown&&!r&&s.a.get(m.kKeyboardShortcutsAltOpensMenu)&&this.props.changeFocus(),this.lastKeyWasAltDown=e&&t}})}componentDidMount(){u.a.tabsPrivate.onMouseChanged.addListener(this._onMouseChanged),u.a.tabsPrivate.onKeyboardChanged.addListener(this._keyEventListener),u.a.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),n.a.addListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken=c.a.addListener(this._onWindowStoreChanged)}componentWillUnmount(){u.a.tabsPrivate.onMouseChanged.removeListener(this._onMouseChanged),u.a.tabsPrivate.onKeyboardChanged.removeListener(this._keyEventListener),u.a.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),n.a.removeListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken.remove()}render(){return null}}d(h,"contextType",l.a),t.a=h},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(256),s=a(31),r=a(496),o=a(582),l=a(583),c=a(584),u=a(585),m=a(7);let d=0,h={},p=!1;const b=function(e,t,a){return e.filter(e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible).map(e=>{var n;const i=s.a.getDisplayName(e),r=d++;(i||e.url)&&(h[r]=e.handler);const o={};if(null===(n=e.container)||void 0===n?void 0:n.details)o.container=e.container.details;else if(s.a.isSeparator(e))o.separator={};else{const n=void 0!==e.id&&""!==t&&e.id===t;let l;switch((e.iconPNG||e.iconPNGWhite)&&(l=[e.iconPNG||"",e.iconPNGWhite||""]),e.type){case"checkbox":case"radio":o.item={id:r,name:i,type:e.type,radiogroup:e.radiogroup?e.radiogroup:-1,checked:e.checked,shortcut:s.a.getShortcut(e,a),url:e.url,icons:l};break;default:o.item={id:r,name:i,type:e.items?"folder":"command",selected:n,persistent:e.persistent,shortcut:s.a.getShortcut(e,a),url:e.url,icons:l},e.items&&(o.children=b(e.items,t,a))}}return o})},g={show:function(t,a,g,N){d=0,h={};const f=s.a.getShortcutSettings(),_=function(e){N&&N(e)},v=function(){N&&N(-1)},E=function(e){const t=n.a.makeEventFlagsFromApiResponse(e.state);h[e.id].call(this,t,{})},C=function(e){console.warn(e)};!function(){if(!p){p=!0;const n=a.map(e=>(s.a.installMnemonics(e.menu.items,e.menu.preferred),{id:e.id,rect:e.rect,children:b(e.menu.items,e.menu.expandId,f)}));(function(e){return new Promise(t=>{m.a.zoom.getVivaldiUIZoom(a=>{e.forEach(e=>{e.rect.x=parseInt((e.rect.x+1)*a),e.rect.y=parseInt((e.rect.y+0)*a),e.rect.width=parseInt(e.rect.width*a),e.rect.height=parseInt(e.rect.height*a)}),t()})})})(n).then(()=>{m.a.menubarMenu.onAction.addListener(E),m.a.menubarMenu.onOpenBookmark.addListener(i.a.onOpen),m.a.menubarMenu.onBookmarkAction.addListener(i.a.onAction),m.a.menubarMenu.onHover.addListener(i.a.onHover),m.a.menubarMenu.onOpen.addListener(_),m.a.menubarMenu.onClose.addListener(v),m.a.menubarMenu.onError.addListener(C),m.a.menubarMenu.show({id:t,siblings:n,icons:[r.a,o.a,l.a,c.a,u.a]},()=>{i.a.onHover(""),m.a.menubarMenu.onAction.removeListener(E),m.a.menubarMenu.onOpenBookmark.removeListener(i.a.onOpen),m.a.menubarMenu.onBookmarkAction.removeListener(i.a.onAction),m.a.menubarMenu.onHover.removeListener(i.a.onHover),m.a.menubarMenu.onOpen.removeListener(_),m.a.menubarMenu.onClose.removeListener(v),m.a.menubarMenu.onError.removeListener(C),e.nextTick(()=>{p=!1})})})}}()}};t.a=g}).call(this,a(82))},,,,,,function(e,t,a){"use strict";var n=a(493),i=a(10),s=a(7);t.a=function(e,t,a,r){return o=r,l=Object(n.a)(e,t,a),new Promise((e,t)=>{const{pathArray:a,fileName:n}=l;s.a.mailPrivate.writeTextToMessageFile(a,n,o,()=>{i.a.runtime.lastError&&t({lastError:i.a.runtime.lastError,pathArray:a,fileName:n}),e()})}).catch(e=>{console.warn("writeToDisk %o",e)});var o,l}},function(e,t,a){"use strict";var n=a(596),i=a(222),s=a(21),r=a(597),o=a(14),l=a(11),c=a(0),u=a.n(c),m=a(520),d=a(155),h=a(25),p=a(17),b=a(2),g=a(15),N=a.n(g),f=a(7),_=a(1),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountLogin.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=[_.kSyncSessionName],w=l.a.getEventHandler;class O extends u.a.PureComponent{constructor(e){super(e),E(this,"onVivaldiAccountChange",()=>{const e=d.a.getState();this.setState(t=>({accountState:e,password:""===t.password&&e.hasSavedPassword?"•••••••":"•••••••"!==t.password||e.hasSavedPassword?t.password:""}))}),E(this,"onCountDownElapsed",e=>{this.setState({countdownElapsed:e})}),E(this,"onUsernameChange",e=>{this.setState({username:e.target.value})}),E(this,"onPasswordChange",e=>{this.setState({password:e.target.value})}),E(this,"onSavePasswordChange",e=>{this.setState({savePassword:e.target.checked})}),E(this,"onLogin",()=>{this.state.username&&this.state.password&&m.a.login(this.state.username,"•••••••"===this.state.password?"":this.state.password,this.state.savePassword)}),E(this,"onLogout",()=>{m.a.logout()}),E(this,"onRegister",()=>{this.props.onChangeDisplay()}),E(this,"openProfilePage",()=>{o.a.openURL("https://login.vivaldi.net/profile/samlsso")}),E(this,"renderForm",e=>{const t=""!==this.state.accountState.accountInfo.accountId,a=this.state.accountState.hasSavedPassword&&this.state.accountState.accountInfo.username===this.state.username;return u.a.createElement("form",{onSubmit:this.onLogin,noValidate:!0,__source:{fileName:v,lineNumber:135,columnNumber:7}},u.a.createElement("div",{className:"AccountSheet-FormGrid",__source:{fileName:v,lineNumber:137,columnNumber:9}},u.a.createElement("label",{__source:{fileName:v,lineNumber:138,columnNumber:11}},Object(b.a)("User Name"),u.a.createElement("input",{type:"text",value:this.state.username,disabled:t,onChange:this.onUsernameChange,autoFocus:!0,__source:{fileName:v,lineNumber:140,columnNumber:13}})),u.a.createElement("label",{__source:{fileName:v,lineNumber:149,columnNumber:11}},Object(b.a)("Password"),u.a.createElement("input",{type:"password",value:this.state.password,onChange:this.onPasswordChange,__source:{fileName:v,lineNumber:151,columnNumber:13}})),u.a.createElement("label",{className:"AccountSheet-Password",__source:{fileName:v,lineNumber:156,columnNumber:11}},u.a.createElement("input",{type:"checkbox",disabled:a&&"•••••••"===this.state.password,checked:this.state.savePassword||a&&"•••••••"===this.state.password,onChange:this.onSavePasswordChange,__source:{fileName:v,lineNumber:157,columnNumber:13}}),Object(b.a)("Save Password")),u.a.createElement("label",{__source:{fileName:v,lineNumber:167,columnNumber:11}},Object(b.a)("Device Name"),u.a.createElement("input",{type:"text",placeholder:this.state.defaultSessionName,value:this.props.prefValues[_.kSyncSessionName],onChange:w(_.kSyncSessionName),__source:{fileName:v,lineNumber:169,columnNumber:13}}))),e&&u.a.createElement(i.a,{type:"error",__source:{fileName:v,lineNumber:178,columnNumber:11}},e),u.a.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:v,lineNumber:181,columnNumber:9}},u.a.createElement("input",{type:"submit",value:Object(b.a)("Login"),__source:{fileName:v,lineNumber:182,columnNumber:11}}),t&&u.a.createElement("input",{type:"button",value:Object(b.a)("Cancel"),onClick:this.onLogout,__source:{fileName:v,lineNumber:184,columnNumber:13}}),u.a.createElement("input",{type:"button",onClick:this.onRegister,value:Object(b.a)("Create Vivaldi.net Account"),__source:{fileName:v,lineNumber:188,columnNumber:11}})))});const t=d.a.getState();this.state={username:t.accountInfo.username,password:"",defaultSessionName:"",savePassword:!1,countdownElapsed:!1,accountState:t}}componentDidMount(){this.vivaldiAccountStoreToken=d.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange(),f.a.sync.getDefaultSessionName(e=>this.setState({defaultSessionName:e}))}componentWillUnmount(){this.vivaldiAccountStoreToken.remove()}render(){if(p.a.isIncognitoOrGuest(this.context.vivaldiWindowId))return null;const e=this.state.accountState,t=e.accountInfo.username,a=e.lastTokenFetchError.serverMessage,i=e.lastTokenFetchError.errorCode,s=N()(e.nextTokenRequestTime);let o=null;switch(Object(d.b)(e)){case"loggedIn":const l=this.props.prefValues[_.kSyncSessionName]?this.props.prefValues[_.kSyncSessionName]:this.state.defaultSessionName;return(u.a.createElement(r.a,{deviceName:l,pictureUrl:e.accountInfo.pictureUrl,username:t,onLogout:this.onLogout,onOpenProfilePage:this.openProfilePage,__source:{fileName:v,lineNumber:216,columnNumber:11}}));case"loginFailed":o=a?Object(b.a)("Vivaldi.net rejected your credentials: $1 ($2).",[a,i]):-1===i?Object(b.a)("You must use a vivaldi.net user account to log in."):Object(b.a)("Vivaldi.net rejected your credentials: Error code $1",[i]);break;case"loggingIn":return s.isAfter(N()())&&("network_error"===e.lastTokenFetchError.errorType&&(o=Object(b.a)("Unable to connect to vivaldi.net.")),"server_error"===e.lastTokenFetchError.errorType&&(o=a?Object(b.a)("Vivaldi.net is experiencing issues: $1 ($2).",[a,i]):Object(b.a)("Vivaldi.net is experiencing issues: Error code $1.",[i]))),u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:o?null:"in-progress",__source:{fileName:v,lineNumber:258,columnNumber:13}},Object(b.a)("Logging in to Vivaldi.net as $1. Please wait.",[t])),o&&u.a.createElement("p",{__source:{fileName:v,lineNumber:261,columnNumber:23}},o,u.a.createElement(n.a,{label:"Retrying in $1",end:s,onElapsed:this.onCountDownElapsed,__source:{fileName:v,lineNumber:263,columnNumber:15}})),u.a.createElement("input",{type:"button",value:Object(b.a)("Cancel"),onClick:this.onLogout,__source:{fileName:v,lineNumber:268,columnNumber:13}}));case"credentialsMissing":o=e.hasEncryptedToken?Object(b.a)("Failed to decrypt your credentials. Please log in again."):Object(b.a)("Failed to retreive your credentials. Please log in again.")}return(u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",{__source:{fileName:v,lineNumber:289,columnNumber:9}},Object(b.a)("Log into Your Account")),u.a.createElement("p",{__source:{fileName:v,lineNumber:290,columnNumber:9}},Object(b.a)("To begin with data synchronization, a confirmed Vivaldi account is required. Log in with your existing credentials or setup a new account.")),this.renderForm(o)))}}E(O,"contextType",h.a);var y=Object(s.a)(O,C),S=a(1305),T="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountSheet.jsx";class k extends u.a.PureComponent{constructor(e){var t,a,n;super(e),n=()=>{this.setState(e=>({display:"login"===e.display?"register":"login"}))},(a="onChangeDisplay")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={display:"string"==typeof this.props.options?this.props.options:"login"}}render(){const{display:e}=this.state;return(u.a.createElement("div",{className:"AccountSheet",__source:{fileName:T,lineNumber:35,columnNumber:7}},u.a.createElement("img",{src:"/resources/icon_128.png",alt:"",width:"64",height:"64",__source:{fileName:T,lineNumber:36,columnNumber:9}}),"register"===e&&u.a.createElement(S.a,{onClose:this.props.onClose,onChangeDisplay:this.onChangeDisplay,__source:{fileName:T,lineNumber:38,columnNumber:11}}),"login"===e&&u.a.createElement(y,{onClose:this.props.onClose,onChangeDisplay:this.onChangeDisplay,__source:{fileName:T,lineNumber:44,columnNumber:11}})))}}t.a=k},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(24),r=a(243),o=a(42),l=a(107),c=a(222),u=a(614),m=a(2),d=a(7),h=a(38),p=a(557),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\AccountItem.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{isCalDAV:N,getPassword:f,savePassword:_,deletePassword:v,getPollResultText:E}=o.a,{UNKNOWN:C,VERIFYING:w,OK:O,ERROR:y}=h.a;class S extends n.Component{constructor(e){super(e),g(this,"componentDidMount",()=>{const{url:e,username:t}=this.state;e&&t&&f(e,t).then(e=>{e.found&&this.setState({password:e.password})})}),g(this,"probeAccounts",async()=>{const{account:e}=this.props,{account_type:t}=e,{password:a}=this.state;let n={foundService:!1,statusText:""};if(this.logStatus(Object(m.a)("Verifying..."),w),"ical"===t){n=await u.a.probeWebCalendar(this.getAccount());const{foundService:e,eventCount:t}=n;if(e)return this.logStatus(Object(m.a)("Connected to Web Calendar. Found $1 Event(s)",[t]),O),e}else if("google"===t)n=await Object(p.a)(this.getAccount(),a);else{if(!this.state.password)return this.logStatus(Object(m.a)("Password Missing..."),y),!1;n=await Object(p.a)(this.getAccount(),a)}return n.foundService?(this.logStatus(Object(m.a)("Connected to CalDAV. Found $1 Calendar(s)",[n.calendarCount]),O),r.a.resetStatus(this.props.account.name)):this.logStatus(Object(m.a)("Not connected. $1",[n.statusMessage||""]),y),n.foundService}),g(this,"isAccountChanged",()=>this.state.name!==this.props.account.name||this.state.username!==this.props.account.username||this.state.url!==this.props.account.url||this.state.passwordChanged),g(this,"onChangeCredentials",e=>{const t=e.target.value,a=this.state.url,n=this.state.username;this.setState({password:t,passwordChanged:!0,status:C}),d.a.utilities.isUrlValid(a).then(e=>{e.urlValid?(this.logStatus("",C),_(a,n,t).then(e=>{e.result||this.logStatus(e.message,y)})):this.logStatus(Object(m.a)("Invalid URL"),w)})}),g(this,"getAccount",()=>({id:this.props.account.id,name:this.state.name,username:this.state.username,url:this.state.url,account_type:this.props.account.account_type})),g(this,"logStatus",(e,t)=>{this.setState({status:t,statusText:e})}),g(this,"saveAccount",async()=>{let e=!0;const{account_type:t}=this.props.account;"local"!==t&&(e=await this.probeAccounts()),this.setState({passwordChanged:!1},()=>{e&&this.props.saveAccount(this.getAccount())})}),g(this,"changeName",e=>{const t=e.target.value;this.setState({name:t})}),g(this,"changeUrl",e=>{const t=e.target.value;this.setState({url:t},()=>{d.a.utilities.isUrlValid(t).then(e=>{e?this.logStatus("",C):this.logStatus(Object(m.a)("Invalid URL"),w)})})}),g(this,"changeUsername",e=>{const t=e.target.value;t!==this.state.username&&(v(this.state.url,this.state.username),this.setState({username:t},()=>{_(this.state.url,t,this.state.password).then(e=>{e.result||this.logStatus(e.message,y)})}))}),g(this,"pollAccount",async()=>{this.logStatus(Object(m.a)("Checking account for changes..."),w),this.setState({refreshing:!0});const e=await s.a.pollCalDAVAccounts([this.props.account.id]),{error:t}=e;this.logStatus(E(e),t?y:O),this.setState({refreshing:!1})}),this.state={status:C,statusText:"",password:"",passwordChanged:!1,name:e.account.name,username:e.account.username,url:e.account.url,refreshing:!1}}render(){const{name:e,url:t,account_type:a,username:i}=this.getAccount(),{password:s}=this.state,r=this.state.status===y?"error":this.state.status===O?"success":"info";return n.createElement("form",{className:"detail",onSubmit:this.saveAccount,__source:{fileName:b,lineNumber:243,columnNumber:7}},n.createElement("div",{className:"detail-content",__source:{fileName:b,lineNumber:244,columnNumber:7}},n.createElement("div",{className:"setting-group",__source:{fileName:b,lineNumber:246,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:b,lineNumber:247,columnNumber:11}},n.createElement(l.a,{type:"text",onChange:this.changeName,label:this.props.searchableStrings.Name,value:e,__source:{fileName:b,lineNumber:248,columnNumber:13}}))),"local"!==a&&n.createElement("div",{className:"setting-group",__source:{fileName:b,lineNumber:258,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:b,lineNumber:259,columnNumber:13}},n.createElement(l.a,{type:"text",onChange:this.changeUrl,label:this.props.searchableStrings.URL,value:t,__source:{fileName:b,lineNumber:260,columnNumber:15}}))),N(a)&&n.createElement("div",{className:"setting-group",__source:{fileName:b,lineNumber:271,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:b,lineNumber:272,columnNumber:13}},n.createElement(l.a,{type:"text",onChange:this.changeUsername,name:"username",label:this.props.searchableStrings.Username,value:i,__source:{fileName:b,lineNumber:273,columnNumber:15}}))),["vivaldi","caldav"].includes(a)&&n.createElement("div",{className:"setting-group",__source:{fileName:b,lineNumber:285,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:b,lineNumber:286,columnNumber:13}},n.createElement(l.a,{type:"password",onChange:this.onChangeCredentials,name:"password",label:this.props.searchableStrings.Password,value:s,__source:{fileName:b,lineNumber:287,columnNumber:15}}))),this.state.statusText&&n.createElement("div",{className:"setting-group-double",__source:{fileName:b,lineNumber:299,columnNumber:11}},n.createElement(c.a,{type:r,__source:{fileName:b,lineNumber:300,columnNumber:13}},this.state.statusText))),n.createElement("div",{className:"detail-toolbar",__source:{fileName:b,lineNumber:307,columnNumber:7}},n.createElement("input",{type:"submit",value:Object(m.a)("Save"),disabled:!this.isAccountChanged(),__source:{fileName:b,lineNumber:308,columnNumber:9}}),"local"!==a&&n.createElement(n.Fragment,null,n.createElement("input",{type:"button",onClick:this.probeAccounts,value:Object(m.a)("Test"),__source:{fileName:b,lineNumber:316,columnNumber:11}}),n.createElement("input",{type:"button",className:"primary",onClick:this.pollAccount,value:Object(m.a)("Refresh"),disabled:this.state.refreshing,__source:{fileName:b,lineNumber:321,columnNumber:11}}))))}}var T=S,k=a(383),A=a(503),I=a(806),D=a(273),M=a(463),P=a(61),x=a(250),L=a.n(x),j=a(84),R=a.n(j),B=a(169);a.d(t,"b",(function(){return W}));var F="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\calendar\\ListCalendarAccounts.jsx";function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{startDeletingCalendars:H}=k.a,{prepareForDeleteAccount:V}=r.a,W={...h.l,"Calendar Type":Object(m.a)("Calendar Type"),Name:Object(m.a)("calendar","Name"),URL:Object(m.a)("Address"),Password:Object(m.a)("Password"),Username:Object(m.a)("Username"),"Refresh Interval":Object(m.a)("Refresh Interval"),Timezone:Object(m.a)("Timezone"),Description:Object(m.a)("Description")};class z extends i.a.Component{constructor(...e){super(...e),U(this,"state",{deletingAccount:""}),U(this,"saveAccount",e=>{s.a.updateAccount(e)}),U(this,"getFallbackIcon",e=>"caldav"===e?"/resources/calendar_caldav.png":"ical"===e?"/resources/calendar_web.png":"/resources/vivaldi_calendar_default.png"),U(this,"renderListItem",(e,t)=>{const a=o.a.ensureAccountType(t.account_type);let n="";if("vivaldi"===a||"google"===a){const{hostname:e}=R.a.parse(t.url);n=(e||"").split(".").slice(-2).join(".")}return(i.a.createElement(M.a,{title:t.name,meta:h.l[a],iconPath:n,iconFallbackPath:this.getFallbackIcon(a),__source:{fileName:F,lineNumber:90,columnNumber:7}}))}),U(this,"renderCreateListItem",()=>i.a.createElement(M.a,{title:Object(m.a)("New Account"),meta:Object(m.a)("Setup in progress..."),iconFallbackPath:"/resources/vivaldi_calendar_default.png",style:{opacity:.3},__source:{fileName:F,lineNumber:100,columnNumber:12}})),U(this,"renderContent",(e,t)=>{const a=this.props.accounts[e],n=L()(Object.values(a).reduce((e,t)=>e+t));return i.a.createElement(T,{key:n,filter:this.props.filter,searchableStrings:t,account:a,saveAccount:this.saveAccount,__source:{fileName:F,lineNumber:115,columnNumber:12}})}),U(this,"remapAccounts",()=>this.props.accounts.map(e=>({...e,key:e.id}))),U(this,"renderCreate",e=>i.a.createElement(I.a,{filter:this.props.filter,searchableStrings:e,__source:{fileName:F,lineNumber:132,columnNumber:5}})),U(this,"deleteAccountDialog",e=>{const{account:t,onClose:a}=e,n=this.state.deletingAccount===t.id;return i.a.createElement("div",{__source:{fileName:F,lineNumber:151,columnNumber:7}},i.a.createElement("header",{className:"dialog-header",__source:{fileName:F,lineNumber:152,columnNumber:9}},i.a.createElement("h1",{className:"dialog-title",__source:{fileName:F,lineNumber:153,columnNumber:11}},Object(m.a)("Are you sure you want to remove this account and its events?"))),i.a.createElement("div",{className:"dialog-content",__source:{fileName:F,lineNumber:157,columnNumber:9}},i.a.createElement("p",{__source:{fileName:F,lineNumber:158,columnNumber:10}},Object(m.a)("This operation cannot be undone."))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:F,lineNumber:160,columnNumber:9}},i.a.createElement("input",{type:"button",className:"danger",disabled:n,onClick:async()=>{this.setState({deletingAccount:t.id}),"local"===t.account_type?H(t.id):V({accountId:t.id,onRemoval:H})},value:n?Object(m.a)("Removing Account"):Object(m.a)("verb","Remove"),autoFocus:!0,__source:{fileName:F,lineNumber:161,columnNumber:11}}),i.a.createElement("input",{type:"button",onClick:a,value:Object(m.a)("Cancel"),__source:{fileName:F,lineNumber:167,columnNumber:11}})))})}render(){return i.a.createElement(P.a,{categoryTitle:Object(m.a)("Calendar Accounts"),filter:this.props.filter,__source:{fileName:F,lineNumber:176,columnNumber:7}},i.a.createElement(D.a,{style:{height:320},deleteDialog:this.deleteAccountDialog,addTipString:Object(m.a)("Add Account"),deleteTipString:Object(m.a)("tooltip","Delete Account"),filter:this.props.filter,items:this.remapAccounts(),masterLayout:0,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,renderCreate:this.renderCreate,contentStrings:W,createStrings:W,onRemove:B.default,__source:{fileName:F,lineNumber:180,columnNumber:9}}))}}t.a=Object(A.a)(z)},function(e,t,a){"use strict";var n=a(130),i=a(0),s=a.n(i),r=a(7),o=a(1407),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPageHitEntry.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends s.a.PureComponent{constructor(e){super(e),c(this,"_getNewSelectionImage",(e,t)=>{if(e={left:e.left,top:e.top,width:e.width,height:e.height},!n.a.getActiveWebView())return!1;const a={fullPage:!1,rect:e};r.a.thumbnails.captureTab(t,a,(e,t)=>{e?this.setState({hitImage:t,justFound:!0}):this.resetJustFound()})}),c(this,"resetJustFound",()=>{this.setState({justFound:!1})}),this.state={hitImage:null,justFound:!1,uiZoom:1},r.a.zoom.getVivaldiUIZoom(e=>{this.setState({uiZoom:e})})}componentDidUpdate(e){(this.props.selectionRect.top!==e.selectionRect.top||this.props.selectionRect.left!==e.selectionRect.left||this.props.selectionRect.width!==e.selectionRect.width||this.props.selectionRect.height!==e.selectionRect.height)&&this.props.selectionRect.width&&this.props.selectionRect.height&&this._getNewSelectionImage(this.props.selectionRect,this.props.tabId)}render(){const e=n.a.getActiveWebView();if(!this.state.hitImage||!e)return null;const{selectionRect:t,hitOffset:a}=this.props,{uiZoom:i}=this.state,r={position:"absolute",top:parseInt(t.top/i)+a,left:parseInt(t.left/i),width:parseInt(t.width/i),height:parseInt(t.height/i)};return s.a.createElement(o.a,{in:this.state.justFound,appear:!0,enter:!0,exit:!0,unmountOnExit:!0,onEntered:(e,t)=>this.resetJustFound(),timeout:{appear:200,enter:200,exit:200},__source:{fileName:l,lineNumber:116,columnNumber:9}},e=>s.a.createElement("img",{src:this.state.hitImage,style:r,className:`fip-active-hit ${e}`,__source:{fileName:l,lineNumber:129,columnNumber:13}}))}}var m=u,d=a(6),h=a(22),p=a(16),b=a(95),g=a(180),N=a(25),f=a(2),_=a(10),v=a(20),E=a.n(v),C=a(1423),w=a(188),O=a(9),y=a(1),S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPage.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends s.a.PureComponent{constructor(e){super(e),T(this,"_isIMEOpen",!1),T(this,"onCompositionStart",()=>{this._isIMEOpen=!0}),T(this,"onCompositionEnd",()=>{this._isIMEOpen=!1,this.onFindInPageTextChanged()}),T(this,"onWebpageviewStoreChanged",e=>{if(!e.pageId||e.pageId===this.props.pageId&&n.a.getActiveWebView()){switch(e.type){case p.a.FIND_IN_PAGE_RESULT_ACTION:this.setState(this._getStateFromStores(!0));break;case p.a.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?this.setState(this._getStateFromStores(!1),this.populateWithPageSelection):"findNextInPage"===e.action?(this.focusFindInPageInput(),this.onNextClicked()):"findPreviousInPage"===e.action&&(this.focusFindInPageInput(),this.onPreviousClicked());break;case p.a.CLOSE_FIND_IN_PAGE_ACTION:this.setState(this._getStateFromStores(!1));break;case p.a.FIND_IN_PAGE_FOCUS:this.focusFindInPageInput()}if(this.refs.fipToolbar){const e=this.refs.fipToolbar.getBoundingClientRect();this.setState({hitOffset:e.height})}}}),T(this,"populateWithPageSelection",()=>{r.a.utilities.getSelectedText(this.props.pageId,e=>{if(e.length>0){this.refs.inputText.value=e.substring(0,128),this.onFindInPageTextChanged()}this.focusFindInPageInput()})}),T(this,"scrollBy",e=>{let t;t=d.a.get(y.kWebpagesSmoothScrollingEnabled)?e?()=>window.scrollBy({top:window.innerHeight,behavior:"smooth"}):()=>window.scrollBy({top:-window.innerHeight,behavior:"smooth"}):e?()=>window.scrollBy({top:window.innerHeight,behavior:"auto"}):()=>window.scrollBy({top:-window.innerHeight,behavior:"auto"}),_.a.scripting.executeScript({target:{tabId:this.props.pageId},function:t},()=>{_.a.runtime.lastError})}),T(this,"onKeyDown",e=>{if(!Object(w.d)(e))switch(e.key){case"PageDown":return void this.scrollBy(!0);case"PageUp":return void this.scrollBy(!1)}"m"===e.key&&Object(w.b)(e)&&this.onMatchCaseClicked(),"Enter"===e.key&&(Object(w.d)(e)?this.onPreviousClicked():Object(w.b)(e)?this.closeAndActivate():this.onNextClicked())}),T(this,"focusFindInPageInput",()=>{const e=this.refs.inputText;e&&(e.focus(),e.value&&e.select())}),T(this,"_getFindInPageText",()=>{const e=this.refs.inputText;return e?e.value:""}),T(this,"onMatchCaseClicked",()=>{this.props.onFindInPage(this._getFindInPageText(),!this.state.matchCase),this.setState(e=>({matchCase:!e.matchCase}))}),T(this,"onPreviousClicked",()=>{this.props.onFindNextInPage(this._getFindInPageText(),!0,this.state.matchCase)}),T(this,"onNextClicked",()=>{this.props.onFindNextInPage(this._getFindInPageText(),!1,this.state.matchCase)}),T(this,"onCloseClicked",()=>{b.a.closeFindInPageToolbar(this.props.pageId)}),T(this,"closeAndActivate",()=>{this.onCloseClicked();const e=n.a.getActiveWebView();e&&e.stopFinding("activate")}),T(this,"onFindInPageTextChanged",()=>{if(this._isIMEOpen)return;const e=this._getFindInPageText();this.state.findInPageText!==e&&(this.setState({findInPageText:e}),this.props.onFindInPage(e,this.state.matchCase))}),T(this,"_getStateFromStores",e=>{const t=g.a.getFindResultsForPage(this.props.pageId);let a={};return a=e?{...this.state,activeMatchOrdinal:t.activeMatchOrdinal,matchCase:t.matchCase||!1,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect}:{activeMatchOrdinal:t.activeMatchOrdinal,findInPageText:t.searchText,hitOffset:0,isFindInPageToolbarOpen:t.isFindInPageToolbarOpen,matchCase:t.matchCase,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect},a}),this.state=this._getStateFromStores(!1)}componentDidMount(){g.a.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){g.a.removeChangeListener(this.onWebpageviewStoreChanged)}render(){if(d.a.get(y.kThemeUseAnimation)){const e=n.a.getActiveWebView();e&&(0!==this.state.numberOfMatches&&this.state.isFindInPageToolbarOpen?(e.style.transition="filter 100ms",e.style.filter="brightness(95%)"):e.style.filter="brightness(100%)")}return(s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{classNames:"find-in-page",in:this.state.isFindInPageToolbarOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:S,lineNumber:310,columnNumber:7}},s.a.createElement("div",{ref:"fipToolbar",onKeyDown:this.onKeyDown,className:E()("find-in-page","toolbar","toolbar-default",{"fip-nomatches":0===this.state.numberOfMatches&&this.state.findInPageText.length>0}),tabIndex:"-1",__source:{fileName:S,lineNumber:321,columnNumber:9}},s.a.createElement("span",{className:"fip-input-label",__source:{fileName:S,lineNumber:329,columnNumber:11}},Object(f.a)("Find in Page:")),s.a.createElement("div",{className:"fip-input-container toolbar toolbar-default",__source:{fileName:S,lineNumber:333,columnNumber:11}},s.a.createElement("input",{ref:"inputText",type:"search",onChange:this.onFindInPageTextChanged,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,defaultValue:this.state.findInPageText,__source:{fileName:S,lineNumber:334,columnNumber:13}}),s.a.createElement("span",{className:"fip-results",style:{display:this.state.findInPageText.length>0?"inline":"none"},__source:{fileName:S,lineNumber:342,columnNumber:13}},Object(f.a)("$1 of $2",[this.state.activeMatchOrdinal,this.state.numberOfMatches]))),s.a.createElement("div",{className:"toolbar-group",__source:{fileName:S,lineNumber:354,columnNumber:11}},s.a.createElement(h.a,{className:"button-narrow",onClick:this.onPreviousClicked,image:O.mb,tooltip:Object(f.a)("Previous match"),__source:{fileName:S,lineNumber:355,columnNumber:13}}),s.a.createElement(h.a,{className:"button-narrow",onClick:this.onNextClicked,image:O.lb,tooltip:Object(f.a)("Next match"),__source:{fileName:S,lineNumber:361,columnNumber:13}})),s.a.createElement(h.a,{onClick:this.onCloseClicked,image:O.kb,tooltip:Object(f.a)("Cancel search"),__source:{fileName:S,lineNumber:369,columnNumber:11}}),s.a.createElement("label",{className:"toolbar-group",__source:{fileName:S,lineNumber:375,columnNumber:11}},s.a.createElement("input",{type:"checkbox",checked:this.state.matchCase,onChange:this.onMatchCaseClicked,__source:{fileName:S,lineNumber:376,columnNumber:13}}),s.a.createElement("span",{className:"fip-checkbox-label",__source:{fileName:S,lineNumber:379,columnNumber:13}},Object(f.a)("Match Case"))))),d.a.get(y.kThemeUseAnimation)&&0!==this.state.numberOfMatches&&s.a.createElement(m,{tabId:this.props.pageId,selectionRect:this.state.selectionRect,hitOffset:this.state.hitOffset,hitText:this.state.findInPageText,__source:{fileName:S,lineNumber:390,columnNumber:9}})))}}T(k,"contextType",N.a);t.a=k},function(e,t,a){"use strict";var n=a(0),i=a(820),s=a(22),r=a(2),o=a(20),l=a.n(o),c=a(109),u=a(15),m=a.n(u),d=a(126),h=a(217),p=a(9),b=a(1),g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\DatePickerPopup.jsx";function N(e){const t=n.useRef(),a=n.useRef(),o=Object(h.a)([b.kKeyboardTabToAll]),[u,N]=n.useState("month"===e.mode),[f,_]=n.useState(()=>e.initialPeriod.clone()),[v,E]=n.useState(()=>e.initialPeriod.clone()),C=n.useCallback(e=>{_(e),E(e)},[]);function w(e){e.year()!==v.year()&&v.year(e.year()),C(e)}function O(){u?E(v.clone().subtract(1,"year")):w(f.clone().subtract(1,"month"))}function y(){u?E(v.clone().add(1,"year")):w(f.clone().add(1,"month"))}function S(t){e.setPeriod(t),e.requestClose()}function T(t){"month"===e.mode?S(t):(C(t),N(!1))}function k(e){const t=e.currentTarget;if(t instanceof HTMLElement){const e=t.dataset.month;T(v.clone().month(parseInt(e)))}}function A(t){if(t.keyCode){const e=c.a[t.keyCode];if(t.repeat||"Space"!==e&&"Enter"!==e)return}t.stopPropagation(),t.preventDefault(),N(t=>!t||"month"===e.mode)}return n.useEffect(()=>{var n;return t.current=document.activeElement,null===(n=a.current)||void 0===n||n.focus(),_(e.initialPeriod.clone()),N("month"===e.mode),()=>{var e;null===(e=t.current)||void 0===e||e.focus()}},[e.initialPeriod,e.mode]),n.createElement("div",{className:"DatePickerPopup",ref:a,onMouseDown:d.a,onClick:d.a,onKeyDown:function(t){let a;switch(c.a[t.keyCode]){case"Left":a=u?v.clone().subtract(1,"month"):f.clone().subtract(1,"day");break;case"Right":a=u?v.clone().add(1,"month"):f.clone().add(1,"day");break;case"Up":a=u?v.clone().subtract(3,"month"):f.clone().subtract(1,"week");break;case"Down":a=u?v.clone().add(3,"month"):f.clone().add(1,"week");break;case"PageUp":O();break;case"PageDown":y();break;case"Enter":if(t.target!==t.currentTarget)return;u?T(v.clone()):S(f);break;case"Escape":e.requestClose()}a&&!u?(a.year()!==v.year()&&v.year(a.year()),C(a)):a&&u&&E(a)},tabIndex:"0",__source:{fileName:g,lineNumber:179,columnNumber:5}},n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:g,lineNumber:187,columnNumber:7}},n.createElement("h1",{onMouseDown:A,onKeyDown:A,tooltip:u?Object(r.a)("Show Days"):Object(r.a)("Show Months"),tabIndex:o[b.kKeyboardTabToAll],__source:{fileName:g,lineNumber:188,columnNumber:9}},u?v.format("YYYY"):f.format("MMMM YYYY")),n.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:g,lineNumber:200,columnNumber:9}},n.createElement(s.a,{className:"button-narrow",onClick:O,tooltip:u?Object(r.a)("Previous Year"):Object(r.a)("Previous Month"),image:p.hc.medium,__source:{fileName:g,lineNumber:201,columnNumber:11}}),n.createElement(s.a,{onClick:function(){const e=m()();C(e),E(e)},title:Object(r.a)("Today"),__source:{fileName:g,lineNumber:211,columnNumber:11}}),n.createElement(s.a,{className:"button-narrow",onClick:y,tooltip:u?Object(r.a)("Next Year"):Object(r.a)("Next Month"),image:p.jc.medium,__source:{fileName:g,lineNumber:216,columnNumber:11}}))),!u&&n.createElement(i.a,{events:[],month:f,onSelect:S,selectedDate:f,showOutOfMonthDays:!0,highlightMode:"week"===e.mode?"week":"day",fixedHeight:!0,__source:{fileName:g,lineNumber:229,columnNumber:9}}),u&&n.createElement(n.Fragment,null,n.createElement("div",{className:"DatePickerPopup-YearMonths",__source:{fileName:g,lineNumber:241,columnNumber:9}},m.a.months().map((e,t)=>{const a=t===f.month()&&f.year()===v.year(),i=t===v.month();return n.createElement("div",{className:l()("DatePickerPopup-YearMonth",{"DatePickerPopup-YearMonth--Selected":a,"DatePickerPopup-YearMonth--Highlighted":i}),key:e,"data-month":t,onClick:k,__source:{fileName:g,lineNumber:247,columnNumber:15}},e)}))))}N.defaultProps={mode:"day"};var f=N,_=a(103),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\PeriodPicker.jsx";t.a=function(e){var t,a;const[i,o]=n.useState(!1),l=Object(h.a)([b.kKeyboardTabToAll]);function u(){o(!1)}function d(e){if(e.keyCode){const t=c.a[e.keyCode];if(e.repeat||"Space"!==t&&"Enter"!==t||e.target!==e.currentTarget)return}o(!i)}let g,N;switch(e.displayMode){case"year":N="month",g=e.startDate.year();break;case"month":N="month",g=Object(r.a)("$1 $2",[e.initialPeriod.format("MMMM"),e.initialPeriod.format("YYYY")]);break;case"multiweek":case"week":N="week",g=Object(r.a)("$1 – $2",[e.startDate.format("ll"),null===(t=e.endDate)||void 0===t?void 0:t.format("ll")]);break;case"day":N="day",g=m()(e.startDate).format(_.a.getWeekdayFormat("LL"));break;case"agenda":N="day",g=Object(r.a)("$1 – $2",[e.startDate.format("ll"),null===(a=e.endDate)||void 0===a?void 0:a.format("ll")])}return(n.createElement("div",{className:"PeriodPicker",onKeyDown:d,onMouseDown:d,tabIndex:l[b.kKeyboardTabToAll],__source:{fileName:v,lineNumber:88,columnNumber:5}},n.createElement("h1",{title:Object(r.a)("Click to Select Period"),__source:{fileName:v,lineNumber:94,columnNumber:7}},g),n.createElement(s.a,{tooltip:Object(r.a)("Click to Select Period"),popupPosition:"below",image:p.n.small,onClick:d,hidePopup:u,isPopupVisible:i,popupWidth:300,outsideClickIgnoreClass:"PeriodPicker",tabIndex:-1,__source:{fileName:v,lineNumber:97,columnNumber:7}},n.createElement(f,{initialPeriod:e.initialPeriod,setPeriod:e.setPeriod,mode:N,requestClose:u,__source:{fileName:v,lineNumber:108,columnNumber:9}}))))}},function(e,t,a){"use strict";var n=a(6),i=a(421),s=a(2),r=a(650),o=a(448),l=a(419),c=a(1);a.d(t,"a",(function(){return m}));const u=/^\s*data:/i;function m(e){if(""===e)return[];const t=(new i.a).parseFeed((new DOMParser).parseFromString(e,"application/xml"),e,"");if("string"==typeof t)return[{type:"html",content:`<html><body><p>${Object(s.a)("Error: $1",[t])}</p></body></html>`}];const{feeditems:a}=t;if(!a.length)return[{type:"html",content:`<html><body><p>${Object(s.a)("Error: $1",["NO_FEED_ITEM"])}</p></body></html>`}];const{htmlbody:n,htmlrights:r,links:l}=a[0],c=[{type:"html",content:`<main>\n      ${n}\n    </main>\n    ${g(l,n)}\n    ${d(r)}`}];return["alternate","enclosure","related","via","comments","serviceedit"].forEach(e=>{let t=1;l[e].filter(e=>e.url.match(u)).forEach(a=>{const n=function(e,t){let a="us-ascii",n="text/plain";if(t){const e=t.match(/;\s*charset\s*=\s*("\s*)?([^\s;"]+)/i);e&&(a=e[2]),n=t.replace(/;[\w\W]*$|\s+/g,"")||n}const i={valid:!1,protocol:"",mimeType:n,charset:a,base64:!1,data:""},s=e.match(/^\s*data:([^,]*),([\w\W]*)$/i);if(s){i.valid=!0,i.protocol="data:",i.data=s[2];const e=s[1].split(";");e.forEach((t,a)=>{if(!a&&t.match(/^\s*[a-z]*\/[\w!#$&\-^\.\+]+\s*$/))i.mimeType=t.replace(/\s+/g,"").toLowerCase();else{let n,s;const r=t.indexOf("=");-1===r?n=t:(n=t.substring(0,r),s=t.substring(r+1).replace(/^\s+|"|\s+$/g,"")),n=n.toLowerCase().replace(/^\s+|\s+$/g,""),"charset"===n&&s?i.charset=s.toLowerCase():"base64"===n&&-1===r&&a===e.length-1&&(i.base64=!0,i.data=i.data.replace(/\s+/g,""))}})}return i}(a.url,a.mimetype),{valid:i,mimeType:s,charset:r,base64:l}=n;let{data:u}=n;if(i&&u){let n=a.title.replace(/[\\\/?%*:|"<>\s]/g,"")||`${e}${t++}`;const i=n.replace(/^([^\.]*$|[\w\W]*\.)/,"").toLowerCase(),m=Object(o.detectExtension)(s,i);if(m!==i&&(n=`${n}.${m}`),!l){if("utf-8"===r)try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}else if("us-ascii"===r||"iso-8859-1"===r)u=unescape(u);else{const e=u.length;let t=0;const a=[];for(;t<e;){const n=u.substring(t,t+1);if("%"===n&&e-t>=3){const e=u.substring(t+1,t+2),i=u.substring(t+2,t+3);isNaN(parseInt(e,16))||isNaN(parseInt(i,16))?a.push(n.charCodeAt(0)):(a.push(parseInt(`${e}${i}`,16)),t+=2)}else{const e=n.charCodeAt(0);if(e>255){(new TextEncoder).encode(n).forEach(e=>a.push(e))}else a.push(e)}t++}try{u=new TextDecoder(r).decode(new Uint8Array(a))}catch(e){try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}}}u=new Uint8Array((new TextEncoder).encode(u))}c.push({type:"attachment",mimeType:s,filename:n,content:u})}})}),c}const d=e=>e?`<footer>${e}</footer>`:"",h=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},p=(e,t)=>{const a=e.hreflang?` hreflang="${h(e.hreflang)}`:"";return`<li>\n    <a href="${h(e.url)}"${a}>\n    ${h(e.title?e.title:t.length?t:e.url)}\n    </a>\n    </li>`},b=(e,t)=>`<figure>\n    ${e}\n    ${t?`<figcaption>${h(t)}</figcaption>`:""}\n    </figure>`;const g=(e,t)=>{const a=[],i=e=>!e.url.match(u),o=document.createElement("video"),m=/^(image|img)\/(jpe?g|gif|a?png|svg+xml|bmp|x-icon|webp)(\b|$)/i,d=/^[^\?#]*\.(jpe?g|gif|a?png|svg|bmp|ico|cur|webp)(\?|#|$)/i,g=e.enclosure.filter(i);let N=[];t.match(/<(img|image)\s/i)||(N=g.filter(e=>e.mimetype?e.mimetype.match(m):e.url.match(d)));const f=g.filter(e=>{var t;if(null===(t=e.mimetype)||void 0===t?void 0:t.match(/^video\//i))return o.canPlayType(e.mimetype);if(n.a.get(c.kRssEmbedYoutubeAttachments)){const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/gi.exec(e.url);if(t&&t[1])return e.mimeType="x-vivaldi/feed-embeddable-media/youtube",e.url=t[1],!0}return!1}),_=g.filter(e=>!(!e.mimetype||!e.mimetype.match(/^audio\//i))&&o.canPlayType(e.mimetype)),v=g.filter(e=>!(N.includes(e)||f.includes(e)||_.includes(e)));a.push("<nav>");const E=e.alternate.filter(i),C=Object(r.a)(navigator.languages,E);a.push('<ul class="mainbutton">'),C&&a.push(p(C,Object(s.a)("Open article"))),a.push("</ul>"),E.length>1&&(a.push(`<h2>${Object(s.a)("Main article")}</h2><ul>`),E.forEach(e=>{e!==C&&a.push(p(e,Object(s.a)("Open article")))}),a.push("</ul>")),v.length&&(a.push(`<h2>${Object(s.a)("Attachments")}</h2><ul>`),v.forEach(e=>{a.push(p(e,""))}),a.push("</ul>"));const w=e.related.filter(i);w.length&&(a.push(`<h2>${Object(s.a)("Related content")}</h2><ul>`),w.forEach(e=>{a.push(p(e,""))}),a.push("</ul>"));const O=e.via.filter(i);O.length&&(a.push(`<h2>${Object(s.a)("Sources")}</h2><ul>`),O.forEach(e=>{a.push(p(e,""))}),a.push("</ul>"));const y=e.comments.filter(i);y.length&&(a.push(`<h2>${Object(s.a)("Comments")}</h2><ul>`),y.forEach(e=>{a.push(p(e,""))}),a.push("</ul>"));const S=e.serviceedit.filter(i);return S.length&&(a.push(`<h2>${Object(s.a)("Edit blog post")}</h2><ul>`),S.forEach(e=>{a.push(p(e,""))}),a.push("</ul>")),a.push("</nav>"),(N.length||f.length||_.length)&&(f.length&&(a.push(`<section><h2>${Object(s.a)("Linked videos")}</h2>`),f.forEach(e=>{"x-vivaldi/feed-embeddable-media/youtube"===e.mimeType?a.push(function({url:e}){return b(Object(l.a)(e))}(e)):a.push((e=>b(`<video controls src="${h(e.url)}"></video>`,e.title))(e))}),a.push("</section>")),_.length&&(a.push(`<section><h2>${Object(s.a)("Linked audio")}</h2>`),_.forEach(e=>{a.push((e=>b(`<audio controls src="${h(e.url)}"></audio>`,e.title))(e))}),a.push("</section>")),N.length&&(a.push(`<section><h2>${Object(s.a)("Linked images")}</h2>`),N.forEach(e=>{a.push((e=>{const t=e.title?` alt="${h(e.title)}"`:"";return b(`<img src="${h(e.url)}"${t}>`,e.title)})(e))}),a.push("</section>"))),a.join("")}},function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m}));var n=a(352),i=a(461),s=a(189),r=a(152),o=a(114),l=a(108),c=a(10);function u(e){const t=e.id;if(!t)return console.warn("Need a tab ID to sync"),Promise.resolve();const a={tabId:t};return new Promise(e=>{c.a.runtime.sendMessage({getNavigationState:a},a=>{if(!a)return e();const i=a,{blockedPopups:r,fastForwardState:l,navigationState:c,sslInfo:u,urlbarState:m}=i;n.a.copyFastForwardState(t,l),s.a.setNavigationState(t,window.vivaldiWindowId,c),u&&s.a.setSSLState(t,u),o.a.copyUrlfieldState(t,m),r.forEach(e=>s.a.addBlockedPopupEvent(t,e)),e()})})}function m(e,t){const a={tabId:e,blockedPopups:r.a.getBlockedPopupsById(e),fastForwardState:i.a.getStateById(e),navigationState:r.a.getNavigationInfo(e),sslInfo:r.a.getSSLInfo(e),urlbarState:l.a.getUrlfieldStateFromId(e)};return new Promise(e=>{c.a.runtime.sendMessage({setNavigationState:a},()=>{e()})})}},function(e,t,a){"use strict";var n=a(143),i=a.n(n),s=a(12),r=a(16),o=a(26);const l=Object(o.Record)({href:"",title:"",type:""});class c extends i.a{constructor(){super(s.a)}getInitialState(){return Object(o.Map)()}reduce(e,t){switch(t.actionType){case r.a.RSS_FEEDS_FOUND:{const{tabId:a,feeds:n}=t;return e.set(a,Object(o.List)(n).map(l))}case"PAGE_CLOSE":{const{pages:a}=t;return a.forEach(t=>{e=e.delete(t.id)}),e}case r.a.RSS_CLEAR_FEEDS:{const{tabId:a}=t;return e.delete(a)}default:return e}}}t.a=new c},function(e,t,a){"use strict";var n=a(45),i=a.n(n);t.a=function(e,t,a){t=t||"#006ed7",a=a||"#FFFFFF",this.points=[],this.points_buffer=[],this.stopped=!0,this.canvas=e,this.init_points=function(){this.points=[],this.points_buffer=[];var e={x:40,y:40};this.points.push(e);var t,a=function(e){var t,a=0,n=0,i=0,s=0,r=0,o=0;for(t=0;t<e.length;t++)"0"===e[t]?r+=1:"4"===e[t]&&(r-=1),r>a&&(a=r),r<n&&(n=r);for(t=0;t<e.length;t++)"2"===e[t]?o-=1:"6"===e[t]&&(o+=1),o>i&&(i=o),o<s&&(s=o);return n>0&&(n=0),s>0&&(s=0),120/Math.max(Math.abs(a-n),Math.abs(i-s))}(this.sequence);for(t=0;t<this.sequence.length;t++){var n={};"0"===this.sequence[t]?(n.x=this.points[t].x+a,n.y=this.points[t].y):"2"===this.sequence[t]?(n.x=this.points[t].x,n.y=this.points[t].y+a):"4"===this.sequence[t]?(n.x=this.points[t].x-a,n.y=this.points[t].y):"6"===this.sequence[t]&&(n.x=this.points[t].x,n.y=this.points[t].y-a),this.points.push(n)}var i=this.points[0].x,s=this.points[0].y,r=this.points[0].x,o=this.points[0].y;for(t=1;t<this.points.length;t++)this.points[t].x<i&&(i=this.points[t].x),this.points[t].x>r&&(r=this.points[t].x),this.points[t].y<s&&(s=this.points[t].y),this.points[t].y>o&&(o=this.points[t].y);if(i<40){for(t=0;t<this.points.length;t++)this.points[t].x+=-(i-40);r+=-(i-40)}if(s<40){for(t=0;t<this.points.length;t++)this.points[t].y+=-(s-40);o+=-(s-40)}for(t=0;t<this.points.length;t++)this.points[t].x+=(160-r)/2,this.points[t].y+=(160-o-8)/2;for(t=0;t<this.points.length;t++){var l={x:this.points[t].x,y:this.points[t].y};this.points_buffer.push(l)}},this.reset_points=function(){var e;for(e=0;e<this.points_buffer.length;e++)this.points[e].x=this.points_buffer[e].x,this.points[e].y=this.points_buffer[e].y},this.draw_point=function(e){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,8,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fillStyle=t,this.ctx.fill()},this.idx=0,this.timeout=0,this.draw_segment=function(){if(!this.stopped){if(this.idx>=this.points.length)return this.timeout>=50?(this.timeout=0,this.idx=0,this.reset_points(),void(this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))):(this.ctx.fillStyle=i()(a).alpha(.15).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.timeout++,void(this.requestId=requestAnimationFrame(this.draw_segment.bind(this))));this.timeout=0,this.ctx.fillStyle=i()(a).alpha(.1).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.draw_point(this.points[this.idx]),!this.points[this.idx+1]||this.points[this.idx].x===this.points[this.idx+1].x&&this.points[this.idx].y===this.points[this.idx+1].y?(this.idx++,this.draw_segment()):(this.points[this.idx].x<this.points[this.idx+1].x?this.points[this.idx].x+=4:this.points[this.idx].x>this.points[this.idx+1].x&&(this.points[this.idx].x-=4),this.points[this.idx].y<this.points[this.idx+1].y?this.points[this.idx].y+=4:this.points[this.idx].y>this.points[this.idx+1].y&&(this.points[this.idx].y-=4),this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))}},this.clear_canvas=function(){this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},this.start=function(e){this.sequence=e,this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=3,this.clear_canvas(),this.init_points(),this.stopped&&(this.stopped=!1,this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))},this.stop=function(){this.stopped=!0,this.current_point_index=0,this.timeout=0,this.idx=0,cancelAnimationFrame(this.requestId)}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}));var n=a(2),i=a(3),s=[{name:Object(n.a)("All Messages"),accountId:i.c,id:i.d,children:[]},{name:Object(n.a)("Custom Folders"),accountId:i.j,path:i.m,id:i.j,children:[]},{name:Object(n.a)("Mailing Lists"),accountId:i.F,path:i.m,id:i.G,children:[]},{name:Object(n.a)("Filters"),accountId:i.M,id:i.N,children:[]},{name:Object(n.a)("Flags"),accountId:i.q,id:i.P,children:[]},{name:Object(n.a)("Labels"),accountId:i.E,id:i.R,children:[]}];const r=[...s,{name:Object(n.a)("Feeds"),accountId:i.n,id:i.o,children:[]}]},,,,,,function(e,t){e.exports='<svg viewBox="0 0 7 4" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 4l-3.5-4h7z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path d="M8 2c-.11 0-.221.004-.333.013-1.285.13-2.48.818-3.346 1.926-.866 1.108-1.337 2.554-1.32 4.047v4.99c0 .073.011.145.035.212a.56.56 0 00.104.178.474.474 0 00.155.12.419.419 0 00.362-.002.468.468 0 00.151-.12.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 005.5 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 008 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212l.366.424A.585.585 0 0010.5 14a.585.585 0 00.442-.212l.366-.424a.585.585 0 01.442-.212c.166 0 .325.077.442.212a.469.469 0 00.152.12.411.411 0 00.362.001.474.474 0 00.155-.118.56.56 0 00.103-.18.623.623 0 00.036-.21V7.788c0-1.535-.527-3.007-1.464-4.093C10.598 2.61 9.326 2 8 2zM6.75 7.426c0 .215-.055.425-.158.603a.982.982 0 01-.42.4.82.82 0 01-.542.062.906.906 0 01-.48-.297 1.147 1.147 0 01-.257-.556 1.245 1.245 0 01.054-.627c.07-.198.19-.368.345-.487a.85.85 0 01.52-.183c.25 0 .488.114.664.318.176.203.274.48.274.767zm4.375 0c0 .215-.055.425-.158.603a.982.982 0 01-.42.4.82.82 0 01-.542.062.906.906 0 01-.48-.297 1.147 1.147 0 01-.257-.556 1.245 1.245 0 01.054-.627c.07-.198.19-.368.345-.487a.85.85 0 01.52-.183c.25 0 .488.114.664.318.175.203.274.48.274.767z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M9 0H4S3 0 3 1v14l5-3 5 3V1s0-1-1-1H9z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M7.486 11.143a1 1 0 011.029 0L12 13.232V1.024A.261.261 0 0011.996 1H4.024A.287.287 0 004 1.003V13.234l3.486-2.091zM4 14.4L3 15V1c0-1 1-1 1-1h8c1 0 1 1 1 1v14l-1-.6L8 12l-4 2.4zm8.054-13.396h.002zM4.004.946V.945z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M14 3H2v10h12V3zM4 5h2v2H4V5zm0 3h2v2H4V8zm5-3H7v2h2V5zM7 8h2v2H7V8zm5-3h-2v2h2V5zm-2 3h2v2h-2V8z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M4 1a1 1 0 012 0h1a1 1 0 012 0h1a1 1 0 112 0h.5A2.5 2.5 0 0115 3.5v8a2.5 2.5 0 01-2.5 2.5h-9A2.5 2.5 0 011 11.5v-8A2.5 2.5 0 013.5 1H4zM2 4v7.5A1.5 1.5 0 003.5 13h9a1.5 1.5 0 001.5-1.5V4a1 1 0 00-1-1H3a1 1 0 00-1 1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26"  xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M19 6a2 2 0 012 2v4.299a5.243 5.243 0 00-2-.293V10a1 1 0 00-1-1H8a1 1 0 00-1 1v7a1 1 0 001 1h1.256a4.493 4.493 0 00-.229 2H7a2 2 0 01-2-2V8a2 2 0 012-2h1V5a1 1 0 012 0v1h2V5a1 1 0 112 0v1h2V5a1 1 0 112 0v1h1zm-8 9.758a4.514 4.514 0 00-.329.242H9v-2h2v1.758zm6-3.253c-.294.14-.572.306-.833.495H15v-2h2v1.505zM11 13v-2H9v2h2zm3 0v-2h-2v2h2z" />\n    <path d="M22.372 17.338A2.406 2.406 0 0124 19.6c0 1.326-1.086 2.4-2.446 2.4h-8.108C12.094 22 11 20.922 11 19.6c0-1.051.682-1.944 1.643-2.269a2.021 2.021 0 012.013-1.731c.542 0 1.034.208 1.398.549A3.25 3.25 0 0119.125 14c1.796 0 3.25 1.432 3.25 3.2l-.003.138z"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.907 2.79a.5.5 0 00-.814-.58L8.436 8.73 5.854 6.145a.5.5 0 10-.708.708l3 3a.5.5 0 00.76-.063l5-7zM3.147 4.147A.5.5 0 013.5 4h5a.5.5 0 000-1h-5A1.5 1.5 0 002 4.5v8A1.5 1.5 0 003.5 14h8a1.5 1.5 0 001.5-1.5v-2a.5.5 0 00-1 0v2a.5.5 0 01-.5.5h-8a.5.5 0 01-.5-.5v-8a.5.5 0 01.146-.354z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.01009 13.0077L4.9503 7.76232C3.62689 5.09401 5.39275 2.5 8.01009 2.5C10.6274 2.5 12.3933 5.09401 11.0699 7.76232L8.01009 13.0077ZM8.01009 1.5C4.63204 1.5 2.39952 4.89687 4.06288 8.22361L4.07009 8.23802L4.0782 8.25194L7.14631 13.5116C7.53219 14.1731 8.48799 14.1731 8.87387 13.5116L11.942 8.25194L11.9501 8.23802L11.9573 8.22361C13.6207 4.89686 11.3881 1.5 8.01009 1.5ZM9.0101 6C9.0101 6.55228 8.56239 7 8.0101 7C7.45782 7 7.0101 6.55228 7.0101 6C7.0101 5.44772 7.45782 5 8.0101 5C8.56239 5 9.0101 5.44772 9.0101 6ZM10.0101 6C10.0101 7.10457 9.11467 8 8.0101 8C6.90553 8 6.0101 7.10457 6.0101 6C6.0101 4.89543 6.90553 4 8.0101 4C9.11467 4 10.0101 4.89543 10.0101 6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.35355 1.64645C7.15829 1.45118 6.84171 1.45118 6.64645 1.64645C6.45118 1.84171 6.45118 2.15829 6.64645 2.35355L8.29289 4H3.5C2.11929 4 1 5.11929 1 6.5V9.5C1 10.8807 2.11929 12 3.5 12V11C2.67157 11 2 10.3284 2 9.5V6.5C2 5.67157 2.67157 5 3.5 5H8.29289L6.64645 6.64645C6.45118 6.84171 6.45118 7.15829 6.64645 7.35355C6.84171 7.54882 7.15829 7.54882 7.35355 7.35355L9.85355 4.85355C9.90149 4.80561 9.93766 4.75036 9.96206 4.69139C9.98425 4.63777 9.9967 4.58107 9.99943 4.52399C9.99981 4.516 10 4.508 10 4.5M9.96206 4.30861C9.93766 4.24964 9.90149 4.19439 9.85355 4.14645L7.35355 1.64645M9.96206 4.30861C9.98615 4.36669 9.9996 4.4303 9.99999 4.497Z"/>\n  <path fill-rule="evenodd" d="M15 6.5C15 5.11929 13.8807 4 12.5 4V5C13.3284 5 14 5.67157 14 6.5V9.5C14 10.3284 13.3284 11 12.5 11H7.70711L9.35355 9.35355C9.54882 9.15829 9.54882 8.84171 9.35355 8.64645C9.15829 8.45118 8.84171 8.45118 8.64645 8.64645L6.14645 11.1464C5.95118 11.3417 5.95118 11.6583 6.14645 11.8536L8.64645 14.3536C8.84171 14.5488 9.15829 14.5488 9.35355 14.3536C9.54882 14.1583 9.54882 13.8417 9.35355 13.6464L7.70711 12H12.5C13.8807 12 15 10.8807 15 9.5V6.5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 2C6.93914 2 5.92172 2.42143 5.17158 3.17157C4.42143 3.92172 4.00001 4.93913 4.00001 6V8.48188C3.96952 8.87419 3.79988 9.24291 3.5214 9.5214C3.23918 9.80362 2.86427 9.97406 2.46606 10.0012C2.19715 10.0195 1.99114 10.2476 2.00029 10.517C2.00945 10.7864 2.23047 11 2.50001 11H13.5C13.7695 11 13.9906 10.7864 13.9997 10.517C14.0089 10.2476 13.8029 10.0195 13.534 10.0012C13.1357 9.97406 12.7608 9.80362 12.4786 9.5214C12.2001 9.24291 12.0305 8.87419 12 8.48189V6C12 4.93913 11.5786 3.92172 10.8284 3.17157C10.0783 2.42143 9.06087 2 8.00001 2ZM5.87868 3.87868C6.44129 3.31607 7.20436 3 8.00001 3C8.79565 3 9.55872 3.31607 10.1213 3.87868C10.6839 4.44129 11 5.20435 11 6V8.5C11 8.51133 11.0004 8.52265 11.0012 8.53395C11.0377 9.07104 11.2367 9.58173 11.568 10H4.43204C4.76336 9.58173 4.9623 9.07104 4.99885 8.53395C4.99962 8.52265 5.00001 8.51133 5.00001 8.5V6C5.00001 5.20435 5.31608 4.44129 5.87868 3.87868ZM7.06415 12.3355C6.9733 12.0747 6.68826 11.937 6.42749 12.0278C6.16672 12.1187 6.02897 12.4037 6.11982 12.6645C6.25579 13.0548 6.50984 13.3931 6.84674 13.6325C7.18365 13.8719 7.58669 14.0005 7.99999 14.0005C8.41328 14.0005 8.81632 13.8719 9.15323 13.6325C9.49013 13.3931 9.74418 13.0548 9.88015 12.6645C9.971 12.4037 9.83325 12.1187 9.57248 12.0278C9.31171 11.937 9.02667 12.0747 8.93582 12.3355C8.86814 12.5298 8.74169 12.6981 8.574 12.8173C8.40631 12.9365 8.2057 13.0005 7.99999 13.0005C7.79427 13.0005 7.59366 12.9365 7.42597 12.8173C7.25828 12.6981 7.13183 12.5298 7.06415 12.3355Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 5a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 3a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm1 2a1 1 0 100 2h14a1 1 0 100-2H1z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 3a1 1 0 011-1h14a1 1 0 011 1v1a1 1 0 01-1 1H1a1 1 0 01-1-1v-1zm0 5a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 4a1 1 0 011-1h14a1 1 0 011 1v1a1 1 0 01-1 1H1a1 1 0 01-1-1v-1z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M0 2a1 1 0 011-1h14a1 1 0 110 2H1a1 1 0 01-1-1zm0 8a1 1 0 011-1h14a1 1 0 011 1v5a1 1 0 01-1 1H1a1 1 0 01-1-1v-5zm1-5a1 1 0 000 2h14a1 1 0 100-2H1z"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M1.5 2.5H15l.5 1-9.5 10V7L1.5 2.5z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M6 1a5 5 0 00-5 5v4a5 5 0 005 5h4a5 5 0 005-5V6a5 5 0 00-5-5H6zm1 3h1v4h2v1H7V4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M10 2H6a4 4 0 00-4 4v4a4 4 0 004 4h4a4 4 0 004-4V6a4 4 0 00-4-4zM6 1a5 5 0 00-5 5v4a5 5 0 005 5h4a5 5 0 005-5V6a5 5 0 00-5-5H6z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M2 2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4C16 2.89543 15.1046 2 14 2H2ZM1 3.70001V4.83335L8 8.56668L15 4.83335V3.70001L8 7.43335L1 3.70001Z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M14 3H2C1.44772 3 1 3.44772 1 4V12C1 12.5523 1.44772 13 2 13H14C14.5523 13 15 12.5523 15 12V4C15 3.44772 14.5523 3 14 3ZM2 2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4C16 2.89543 15.1046 2 14 2H2Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" d="M4 4h4l.5 3-1 3 2.5 3 .5 1.5h-9l1-2 2-2.5-1-3L4 4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M6.323 9.832l.876-.692c.597-.471.983-1.206.983-1.983v-.739c0-1.315-.945-2.355-2.052-2.415-1.238-.062-2.312.95-2.312 2.23v.924c0 .777.386 1.512.983 1.983l.876.692-.783.795-2.273 2.306c-.24.244-.378.391-.476.557a1.038 1.038 0 00-.143.51H9.98a2.621 2.621 0 00-.161-.404 2.758 2.758 0 00-.44-.662l-2.273-2.307-.783-.795zm-.141-6.828c1.727.092 3 1.661 3 3.414v.739c0 .829-.306 1.606-.803 2.215-.167.205-.355.39-.56.553l.704.715 1.568 1.592c.455.461.909 1.384.909 1.845 0 .554-.364.923-.91.923H1.91c-.546 0-.91-.37-.91-.923 0-.922.455-1.384.91-1.845l1.567-1.591.705-.716a3.616 3.616 0 01-.561-.553 3.516 3.516 0 01-.803-2.215v-.923c0-1.846 1.546-3.322 3.364-3.23z"/>\n  <path class="small-icon-outline" opacity=".5" d="M10.138 9.157c.348-.734.552-1.53.552-2.327v-.718A5.267 5.267 0 009 2.221C9.42 1.425 9.862 1 11.12 1c1.294 0 2.156 1.166 2.156 2.242v.897c0 .897-.431 1.346-.862 1.794l1.724 1.794c.431.448.862.897.862 1.345 0 .449-.431.897-.862.928h-3.19l-.81-.843z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3H13C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 4V11.5C4 12.3284 4.67157 13 5.5 13H10.5C11.3284 13 12 12.3284 12 11.5V4H11V11.5C11 11.7761 10.7762 12 10.5 12H5.5C5.22385 12 5 11.7761 5 11.5V4H4Z"/>\n  <path opacity="0.3" d="M6 4V11H10V4H6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.29386 0.706223C7.68439 0.315699 8.31561 0.315699 8.70614 0.706223L13.4161 5.4162C13.7912 5.79127 14 6.29808 14 6.82851V12.0001C14 12.2653 13.8946 12.5197 13.7071 12.7072C13.5196 12.8947 13.2652 13.0001 13 13.0001H3C2.73478 13.0001 2.48043 12.8947 2.29289 12.7072C2.10536 12.5197 2 12.2653 2 12.0001V6.82851C2 6.29808 2.20882 5.79127 2.58389 5.4162L7.29386 0.706223ZM4.56066 4.85364L8 1.4143L11.4393 4.85364L8.35355 7.93943C8.15829 8.13469 7.84171 8.13469 7.64645 7.93943L4.56066 4.85364ZM3.85355 5.56075L3.291 6.1233C3.10447 6.30983 3 6.56187 3 6.82851L3 12.0001H13V6.82851C13 6.56187 12.8955 6.30983 12.709 6.12331L12.1464 5.56075L9.06066 8.64653C8.47487 9.23232 7.52513 9.23232 6.93934 8.64653L3.85355 5.56075Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35715 3.36075C2.13321 3.58693 2.00513 3.89221 1.99998 4.21203V11.7872C1.9944 11.9479 2.02161 12.1081 2.07994 12.2577C2.13827 12.4073 2.22646 12.5431 2.33902 12.6568C2.45159 12.7705 2.58612 12.8596 2.73423 12.9185C2.88235 12.9774 3.04089 13.0049 3.19998 12.9993H12.8C13.1166 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H7.99998L6.79998 3H3.19998C2.88333 3.0052 2.58109 3.13457 2.35715 3.36075ZM2.99938 11.822L2.99998 11.8046V4.22318C3.00221 4.16171 3.02739 4.10511 3.06778 4.06432C3.10771 4.02398 3.15927 4.00208 3.2116 4H6.24588L7.49998 6H12.8C12.9104 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8922 11.9753 12.8407 11.9972 12.7884 11.9993H3.18225L3.16453 11.9999C3.14404 12.0006 3.12342 11.9971 3.10382 11.9893C3.08419 11.9815 3.06565 11.9694 3.04965 11.9533C3.03362 11.9371 3.02049 11.9171 3.01163 11.8944C3.00276 11.8717 2.99851 11.847 2.99938 11.822Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" d="M13 3H3v11h10V3zM5 5h6v1H5V5zm0 3h6v1H5V8zm0 3h6v1H5v-1z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M2 2a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V2zm11 1H3v11h10V3z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path ss="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M14 2H2v12h12V2zm-1.5 10.5v-1a8 8 0 00-8-8h-1v1.4h1a6.6 6.6 0 016.6 6.6v1h1.4zm-6-1.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm3 1.5v-1a5 5 0 00-5-5h-1v1.4h1a3.6 3.6 0 013.6 3.6v1h1.4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M1 3.154C1 1.964 1.964 1 3.154 1h9.692C14.036 1 15 1.964 15 3.154v9.692c0 1.19-.964 2.154-2.154 2.154H3.154A2.154 2.154 0 011 12.846V3.154zM3 2h10c.595 0 1 .405 1 1v10c0 .595-.405 1-1 1H3c-.595 0-1-.405-1-1V3c0-.595.405-1 1-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill progress-bar-container" fill-rule="evenodd" clip-rule="evenodd" d="M1 12v2.857S1 16 2.077 16h11.846S15 16 15 14.857V12h-1v2.857c0 .064-.007.1-.012.12A.289.289 0 0113.9 15H2.076c-.017 0-.03 0-.04-.002A.485.485 0 012 14.841V12H1zm1.01 2.993l.003.001a.023.023 0 01-.003 0zm11.972-.002l.002-.003-.002.003z"/>\n  <path class="small-icon-fill" d="M6 6V0h4v6h4l-6 5-6-5h4z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" d="M7 7H4.762L8 9.698 11.238 7H9V1H7v6zm2-7h1v6h4l-1.2 1L8 11 3.2 7 2 6h4V0h3z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 2h9a1 1 0 011 1v9a1 1 0 01-1 1H3a1 1 0 01-1-1V3a1 1 0 011-1zM1 3a2 2 0 012-2h9a2 2 0 012 2v9a2 2 0 01-2 2H3a2 2 0 01-2-2V3zm6 1h1v3h3v1H8v3H7V8H4V7h3V4z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.00071 4.21203C2.00586 3.89221 2.13395 3.58693 2.35788 3.36075C2.58182 3.13457 2.88406 3.0052 3.20071 3H6.80071L8.00072 5H13.0007C13.5007 5 14.0007 5.5 14.0007 6L14.0007 11.7872C13.9956 12.1071 13.8675 12.4123 13.6435 12.6385C13.4196 12.8647 13.1174 12.9941 12.8007 12.9993H3.20071C3.04162 13.0049 2.88308 12.9774 2.73497 12.9185C2.58685 12.8596 2.45232 12.7705 2.33976 12.6568C2.22719 12.5431 2.139 12.4073 2.08067 12.2577C2.02234 12.1081 1.99513 11.9479 2.00071 11.7872V8H2V7H2.00071V4.21203ZM3.00071 8V11.8046L3.00011 11.822C2.99924 11.847 3.0035 11.8717 3.01236 11.8944C3.02122 11.9171 3.03435 11.9371 3.05038 11.9533C3.06639 11.9694 3.08492 11.9815 3.10455 11.9893C3.12415 11.9971 3.14478 12.0006 3.16526 11.9999L3.18298 11.9993H12.7891C12.8414 11.9972 12.893 11.9753 12.9329 11.935C12.9733 11.8942 12.9985 11.8376 13.0007 11.7761L13.0007 8H3.00071ZM13.0007 7H3.00071V4.22318C3.00294 4.16171 3.02812 4.10511 3.06851 4.06432C3.10845 4.02398 3.16001 4.00208 3.21233 4H6.24661L7.50072 6H12.8007C12.9112 6 13.0007 6.08796 13.0007 6.19842V7Z"/>\n  <path fill-rule="evenodd" d="M2.99938 11.822L2.99998 11.8046L2.99938 8H12.8C12.9104 8 13 8.08938 13 8.19983C13 8.87896 13 11.0937 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8922 11.9753 12.8407 11.9972 12.7884 11.9993H3.18225L3.16453 11.9999C3.14404 12.0006 3.12342 11.9971 3.10382 11.9893C3.08419 11.9815 3.06565 11.9694 3.04965 11.9533C3.03362 11.9371 3.02049 11.9171 3.01163 11.8944C3.00276 11.8717 2.99851 11.847 2.99938 11.822Z" fill-opacity="0.1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10 10H12V12H10V10ZM15 10H13V12H15V10ZM15 13H13V15H15V13ZM12 13H10V15H12V13Z"/>\n  <path fill-rule="evenodd" d="M2 4.21203C2.00515 3.89221 2.13323 3.58693 2.35717 3.36075C2.5811 3.13457 2.88334 3.0052 3.2 3H6.8L8 5H13C13.5 5 14 5.5 14 6L14 9H13L13 6.19842C13 6.08796 12.9105 6 12.8 6H7.5L6.24589 4H3.21161C3.15929 4.00208 3.10773 4.02398 3.06779 4.06432C3.02741 4.10511 3.00223 4.16171 3 4.22318V11.8046L2.99939 11.822C2.99853 11.847 3.00278 11.8717 3.01165 11.8944C3.02051 11.9171 3.03364 11.9371 3.04966 11.9533C3.06567 11.9694 3.08421 11.9815 3.10383 11.9893C3.12343 11.9971 3.14406 12.0006 3.16455 11.9999L3.18227 11.9993H9V12.9993H3.2C3.04091 13.0049 2.88237 12.9774 2.73425 12.9185C2.58613 12.8596 2.4516 12.7705 2.33904 12.6568C2.22648 12.5431 2.13828 12.4073 2.07996 12.2577C2.02163 12.1081 1.99441 11.9479 2 11.7872V4.21203Z" />\n  <path fill-rule="evenodd" d="M3 11.8046L2.99939 11.822C2.99853 11.847 3.00278 11.8717 3.01165 11.8944C3.02051 11.9171 3.03364 11.9371 3.04967 11.9533C3.06567 11.9694 3.08421 11.9815 3.10383 11.9893C3.12343 11.9971 3.14406 12.0006 3.16455 11.9999L3.18227 11.9993H9V9H13L13 6.19842C13 6.08796 12.9105 6 12.8 6H7.5L6.24589 4H3.21161C3.15929 4.00208 3.10773 4.02398 3.06779 4.06432C3.02741 4.10511 3.00223 4.16171 3 4.22318V11.8046Z" fill-opacity="0.1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10 10H12V12H10V10ZM15 10H13V12H15V10ZM15 13H13V15H15V13ZM12 13H10V15H12V13Z"/>\n  <path fill-rule="evenodd" d="M2.35788 3.36075C2.13395 3.58693 2.00586 3.89221 2.00071 4.21203V7H2V8H2.00071V11.7872C1.99513 11.9479 2.02234 12.1081 2.08067 12.2577C2.139 12.4073 2.22719 12.5431 2.33976 12.6568C2.45232 12.7705 2.58685 12.8596 2.73497 12.9185C2.88308 12.9774 3.04162 13.0049 3.20071 12.9993H9V11.9993H3.18298L3.16526 11.9999C3.14478 12.0006 3.12415 11.9971 3.10455 11.9893C3.08492 11.9815 3.06639 11.9694 3.05038 11.9533C3.03435 11.9371 3.02122 11.9171 3.01236 11.8944C3.0035 11.8717 2.99924 11.847 3.00011 11.822L3.00071 11.8046V8H13.0007V9H14.0007L14.0007 6C14.0007 5.5 13.5007 5 13.0007 5H8.00072L6.80071 3H3.20071C2.88406 3.0052 2.58182 3.13457 2.35788 3.36075ZM3.00071 7H13.0007V6.19842C13.0007 6.08796 12.9112 6 12.8007 6H7.50072L6.24661 4H3.21233C3.16001 4.00208 3.10845 4.02398 3.06851 4.06432C3.02812 4.10511 3.00294 4.16171 3.00071 4.22318V7Z"/>\n  <path fill-rule="evenodd" d="M2.99998 11.8046L2.99938 11.822C2.99851 11.847 3.00276 11.8717 3.01163 11.8944C3.02049 11.9171 3.03362 11.9371 3.04965 11.9533C3.06565 11.9694 3.08419 11.9815 3.10382 11.9893C3.12342 11.9971 3.14404 12.0006 3.16453 11.9999L3.18225 11.9993H9V9H13V8.19983C13 8.08938 12.9104 8 12.8 8H2.99938L2.99998 11.8046Z" fill-opacity="0.1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8 6C8 5.44772 7.55228 5 7 5H1C0.447715 5 0 5.44772 0 6V10C0 10.5523 0.447715 11 1 11H15C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9H9C8.44771 9 8 8.55228 8 8V6Z"/>\n  <rect opacity="0.35" x="9" y="5" width="7" height="3" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".6" d="M8.531 12.067a1 1 0 01-1.062 0L2.628 9.03a1 1 0 00-1.058-.003l-.203.126a1 1 0 00-.004 1.698L7.47 14.67a1 1 0 001.06 0l6.107-3.817a1 1 0 00-.004-1.698l-.203-.126a1 1 0 00-1.058.003l-4.84 3.036z"/>\n  <path d="M1.357 6.848a1 1 0 010-1.696l6.113-3.82a1 1 0 011.06 0l6.113 3.82a1 1 0 010 1.696l-6.113 3.82a1 1 0 01-1.06 0l-6.113-3.82z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 6L12.1343 9.63432C12.6383 10.1383 12.2814 11 11.5686 11L5.43137 11C4.71865 11 4.36171 10.1383 4.86569 9.63431L8.5 6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.962 2.309A.5.5 0 0013.5 2h-5a.5.5 0 000 1h3.793L8.146 7.146a.5.5 0 10.708.708L13 3.707V7.5a.5.5 0 001 0v-5-.003a.5.5 0 00-.038-.188zM2 9.5a.5.5 0 01.5-.5h4a.5.5 0 01.5.5v4a.5.5 0 01-.5.5h-4a.5.5 0 01-.5-.5v-4zm1 .5v3h3v-3H3z" />\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 1.167h8a3 3 0 013 3v7.666a3 3 0 01-3 3H4a3 3 0 01-3-3V4.167a3 3 0 013-3zm0 1a2 2 0 00-2 2v7.666a2 2 0 002 2h8a2 2 0 002-2V4.167a2 2 0 00-2-2H4z"/>\n  <path d="M4.309 4.038A.498.498 0 004 4.5v5a.5.5 0 001 0V5.707l4.146 4.147a.5.5 0 00.708-.708L5.707 5H9.5a.5.5 0 000-1h-5-.003a.5.5 0 00-.188.038z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 1.167h8a3 3 0 013 3v7.666a3 3 0 01-3 3H4a3 3 0 01-3-3V4.167a3 3 0 013-3zm0 1a2 2 0 00-2 2v7.666a2 2 0 002 2h8a2 2 0 002-2V4.167a2 2 0 00-2-2H4z"/>\n  <path d="M11.691 11.962a.499.499 0 00.16-.106l.005-.005A.498.498 0 0012 11.5v-5a.5.5 0 00-1 0v3.793L6.854 6.146a.5.5 0 10-.708.708L10.293 11H6.5a.5.5 0 000 1h5.003a.501.501 0 00.188-.038z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" clip-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="7" height="8" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="small-icon-fill" fill-rule="evenodd" clip-rule="evenodd" d="M1 4C1 3.44772 1.44772 3 2 3H14C14.5523 3 15 3.44772 15 4V6H1V4ZM1 7V12C1 12.5523 1.44772 13 2 13H14C14.5523 13 15 12.5523 15 12V7H1ZM2 4H6V5H2V4Z"/>\n  <path class="small-icon-outline" fill-rule="evenodd" clip-rule="evenodd" d="M2 3H14C14.5523 3 15 3.44772 15 4V6H16V4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V6H1V4C1 3.44772 1.44772 3 2 3ZM1 7H0V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V7H15V12C15 12.5523 14.5523 13 14 13H2C1.44772 13 1 12.5523 1 12V7Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.57087 9.63143H5.15509L4.85492 10.3844C4.408 11.4698 4.18788 12.182 4.18788 12.5144C4.18788 12.8672 4.30795 13.1385 4.54141 13.3217C4.78155 13.5048 5.08171 13.5998 5.45525 13.5998V14H2V13.5998C2.51362 13.5184 2.9005 13.3352 3.1473 13.0435C3.39411 12.7518 3.70094 12.1481 4.05447 11.2256C4.08116 11.1374 4.22123 10.7982 4.46804 10.2148L7.84992 2H8.18344L12.0656 11.3951L12.5992 12.6365C12.7193 12.9146 12.8794 13.1317 13.0862 13.2945C13.2863 13.4573 13.5931 13.5591 14 13.5998V14H9.4308V13.5998C9.99111 13.5998 10.3713 13.5591 10.5648 13.4709C10.7649 13.3895 10.8583 13.2199 10.8583 12.9689C10.8583 12.84 10.7248 12.4601 10.4647 11.8293L9.57087 9.63143ZM9.42412 9.23799L7.36965 4.19785L5.32185 9.23799H9.42412Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.26579 2H8.50199L14 14H12.2038L10.5646 10.4651H5.33978L3.8099 14H2L7.26579 2ZM9.84747 8.94352L7.86682 4.61794L6.0296 8.94352H9.84747Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M17.2 11.7C17.2 9 15.5 7 13 7c-2.2 0-4.2 2-4.2 4.7v.3h-.3a.5.5 0 00-.5.5V18a1 1 0 001 1h8a1 1 0 001-1v-5.5a.5.5 0 00-.5-.5h-.3v-.3zM15.7 13h-5.4v-1.3c0-1.7 1.4-3 2.8-3 1.7 0 2.8 1.3 2.8 3V13h-.2z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.2 12h-1.3v1H10.3v-1.3c0-1.7 1.4-3 2.8-3 .323 0 .624.047.9.134v-1.72A4.336 4.336 0 0013 7c-2.2 0-4.2 2-4.2 4.7v.3h-.3a.5.5 0 00-.5.5V18a1 1 0 001 1h8a1 1 0 001-1v-5.5a.5.5 0 00-.5-.5h-.3z"/>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),i=a(453),s=a(14),r=a(35),o=a(25),l=a(37),c=a(284),u=a(545),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\PlainTextEditor.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends n.Component{constructor(e){super(e),d(this,"handleContentLoad",()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(),this.props.onContentLoad&&this.props.onContentLoad())}),d(this,"handleGoToURL",e=>{e.preventDefault(),e.targetUrl.startsWith("#")||s.a.openURL(e.targetUrl)}),d(this,"getContentAsBodyParts",()=>{const e=this.webview;return e?new Promise((t,a)=>{e.executeScript({code:"document.body.innerText"},e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"text",content:e[0],charset:"UTF-8"}]):a("PlainTextEdit.getContentAsBodyParts: Couldn't get content from Webview")})}):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")}),d(this,"onClick",e=>{switch(e){case"createLink":this.props.handleLinkEvent(e);break;default:this.execCommand(e,""),this.props.updateButtonState&&this.props.updateButtonState()}}),d(this,"onChange",(e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownState&&this.props.updateDropdownState()}),d(this,"setContent",e=>{this.webview&&this.webview.executeScript&&this.webview.executeScript({code:`document.body.innerText = unescape('${escape(e)}');`},this.setStyle)}),d(this,"setStyle",()=>{this.webview&&this.webview.executeScript&&this.webview.executeScript({code:`document.head.innerHTML = unescape('<style>${escape(Object(u.c)())}</style>');`})}),d(this,"debouncedUpdateState",Object(c.a)(()=>{this.props.updateButtonState&&this.props.updateButtonState(),this.props.updateDropdownState&&this.props.updateDropdownState()},100)),d(this,"handleConsoleMessage",e=>{const[t,a]=e.message.split(" ",2);switch(t){case"caretState":this.onCaretStateEvent(a);break;case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"createLink":this.props.handleLinkEvent(t,a);break;default:throw new Error(e.message)}}),d(this,"setZoomLevel",e=>{const t=this.webview;t&&(t.setZoomMode("per-view"),t.setZoom(e))}),this.state={startOffsetOnNewline:0,createLinkModalOpen:!1,caretState:{bold:!1,italic:!1,strikeThrough:!1,formatBlock:"p",insertOrderedList:!1,insertUnorderedList:!1}},this.markdownFormatter=new i.a}componentDidMount(){var e,t,a;null===(e=this.webview)||void 0===e||e.addEventListener("consolemessage",this.handleConsoleMessage),null===(t=this.webview)||void 0===t||t.addEventListener("contentload",this.handleContentLoad),null===(a=this.webview)||void 0===a||a.addEventListener("newwindow",this.handleGoToURL),r.a.addListener("THEME_CURRENT",this.setStyle)}componentWillUnmount(){var e,t,a;null===(e=this.webview)||void 0===e||e.removeEventListener("consolemessage",this.handleConsoleMessage),null===(t=this.webview)||void 0===t||t.removeEventListener("contentload",this.handleContentLoad),null===(a=this.webview)||void 0===a||a.removeEventListener("newwindow",this.handleGoToURL),r.a.removeListener("THEME_CURRENT",this.setStyle)}onCaretStateEvent(e){if(!e)return;let t;try{t=JSON.parse(e)}catch(e){return}this._updateCaretState(t)}_updateCaretState(e){this.setState(t=>({caretState:{...t.caretState,...e}}),()=>this.props.updateButtonState&&this.props.updateButtonState())}focus(){this.webview&&this.webview.focus()}hasFocus(){const{document:e}=this.context;return!!this.webview&&this.webview===e.activeElement}execCommand(e,t){this.webview&&this.webview.contentWindow&&this.webview.contentWindow.postMessage&&this.webview.contentWindow.postMessage({type:"BUTTON_CLICK",command:e,value:t},l.o)}render(){const{disabled:e,hidden:t}=this.props;return(n.createElement("div",{className:"editor-html",__source:{fileName:m,lineNumber:247,columnNumber:7}},n.createElement("webview",{className:"editor-webview",partition:"persist:markdowneditor",name:"markdowneditor",ref:e=>this.webview=e,style:t||e?{display:"none"}:{},allowtransparency:"on",src:"components/notes/markdowneditor/markdowneditor.html",__source:{fileName:m,lineNumber:248,columnNumber:9}})))}}d(h,"contextType",o.a)},function(e,t,a){"use strict";var n=a(0),i=a(14),s=a(65),r=a(158),o=a(25),l=a(2),c=a(228),u=a(235),m=a(7),d=a(349),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageBody.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e){const{markup:t,style:a,prepend:n}=e;return`{\n  let container = document.querySelector('.VIVcontainer');\n  if (!container) {\n    container = document.createElement('div');\n    container.className = 'VIVcontainer';\n    container.style = 'all:initial';\n    document.body.${n?"prepend":"append"}(container);\n  }\n  let style;\n  let content;\n  let shadowRoot;\n  if (!container.shadowRoot) {\n    style = document.createElement('style');\n    content = document.createElement('div');\n    shadowRoot = container.attachShadow({ mode: 'open' });\n    shadowRoot.appendChild(style);\n    shadowRoot.appendChild(content);\n  } else {\n    shadowRoot = container.shadowRoot;\n    style = shadowRoot.querySelector('style');\n    content = shadowRoot.querySelector('div');\n  }\n  style.textContent = ${JSON.stringify(a)};\n  content.innerHTML = ${JSON.stringify(t)};}`}class g extends n.PureComponent{constructor(...e){super(...e),p(this,"state",{leakPrevented:!1}),p(this,"updateWebviewEventListeners",e=>{const t=this.webview,a=e;this.webview=a,t&&(t.removeEventListener("newwindow",this.handleNewWindow),t.removeEventListener("targeturlchanged",this.handleTargetURLChanged),t.removeEventListener("consolemessage",this.handleConsoleMessage),t.removeEventListener("fullscreen",this.handleOnFullscreen)),a&&(m.a.zoom.getDefaultZoom(e=>a.setZoom(e)),a.addEventListener("newwindow",this.handleNewWindow),a.addEventListener("targeturlchanged",this.handleTargetURLChanged),a.addEventListener("consolemessage",this.handleConsoleMessage),a.addEventListener("fullscreen",this.handleOnFullscreen))}),p(this,"handleOnFullscreen",e=>{r.a.onHTML5FullScreen(e.enterFullscreen,this.context.vivaldiWindowId)}),p(this,"handleNewWindow",e=>{switch(e.preventDefault(),e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.window.accept(this.context.vivaldiWindowId+";1");break;case"new_background_tab":e.window.accept(this.context.vivaldiWindowId+";0");break;case"new_window":i.a.openWindow(e.targetUrl);break;case"off_the_record":i.a.openWindow(e.targetUrl,{incognito:!0})}}),p(this,"handleTargetURLChanged",({newUrl:e})=>{const t=Object(c.a)(e);s.a.setStatus(t)}),p(this,"handleConsoleMessage",e=>{const t=this.props.inject&&this.props.inject.messageHandler;t&&"function"==typeof t&&t(e)}),p(this,"getDefaultStyle",e=>`<style type="text/css">\n    html {\n      overflow-y: auto;\n    }\n    body {\n      ${e?"":`color: ${this.props.color};`}\n      ${e?"":"white-space: pre-wrap;"}\n      background-color: ${e?"white":this.props.backgroundColor};\n      font-family: ${e?"sans-serif":"monospace"};\n      margin: 24px;\n      line-height: 1.3;\n      height: auto !important;\n      min-height: calc(100% - 48px);\n    }\n    ${e?"":`a { color: ${this.props.linkColor}; }`}\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    </style>`),p(this,"getDefaultRssStyle",()=>`<style type="text/css">\n    :root {\n      --colorBg: ${this.props.backgroundColor};\n      --colorFg: ${this.props.color};\n      --colorHighlightBg: ${this.props.backgroundColor};\n      --colorHighlightFg: ${this.props.linkColor};\n    }\n    html {\n      background: var(--colorBg);\n      color: var(--colorFg);\n      font-family: sans-serif;\n      overflow-y: auto;\n    }\n    body {\n      margin: 24px;\n      height: auto !important;\n      min-height: calc(100% - 48px);\n    }\n    body > main {\n      font-size: initial;\n      /* feeds should not be using these variables */\n      /* prevent the feed from copying a custom theme for phishing */\n      --colorBg: white;\n      --colorFg: black;\n      --colorHighlightBg: transparent;\n    }\n    body > main a {\n      color: var(--colorHighlightFg);\n    }\n    body > nav ul.mainbutton a {\n      display: inline-block;\n      padding: 0.3em 12px;\n      font-size: initial;\n      color: var(--colorBg);\n      background-color: var(--colorHighlightFg);\n      border-radius: 4px;\n    }\n    body > nav ul.mainbutton::after {\n      content: "";\n      display: block;\n      border-bottom: 1px solid var(--colorFg);\n      height: 0.7em;\n      opacity: 0.3;\n    }\n    body > nav h2,\n    body > section h2 {\n      font-weight: normal;\n      font-size: larger;\n    }\n    body > nav h2::after,\n    body > section h2::after {\n      content: ":";\n    }\n    body > nav ul,\n    body > nav li {\n      display: block;\n      margin-left: 0;\n      padding-left: 0;\n    }\n    body > nav a {\n      color: var(--colorHighlightFg);\n      text-decoration: none;\n    }\n    body > section img,\n    body > section video,\n    main img,\n    main video,\n    main image,\n    main image,\n    main object,\n    main embed {\n      max-width: 100%;\n      /* allow default image ratio to work in cases where height has been set */\n      height: auto !important;\n    }\n    main iframe {\n      border: none;\n      max-width: 100%;\n    }\n    body > footer {\n      opacity: 0.5;\n    }\n\n    div.video-wrapper {\n      background: #111;\n      margin-left: -24px;\n      margin-top: -24px;\n      margin-right: -24px;\n      margin-bottom: 24px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    div.video-wrapper iframe {\n      --cinema-mode-height: 40vw;\n      height: var(--cinema-mode-height);\n      width: calc(var(--cinema-mode-height) / .5625);\n      min-height: 320px;\n      max-height: 100vh;\n    }\n\n    div.preformatted {\n      white-space: pre-wrap;\n    }\n\n    /* Overrides for specific feed issues */\n    main figure[style*="width"] {\n      /* WordPress hard codes a width which creates scrollbars.\n      Max-width does not fix it because of the default margin.\n      Fix it without breaking feeds that have foating figures. Assume that if\n      a figure has a style attribute with width, it is probably not well\n      styled, and width should be ignored. */\n      width: auto !important;\n    }\n    </style>`)}componentDidUpdate(e){var t;if((e.color!==this.props.color||e.backgroundColor!==this.props.backgroundColor||e.linkColor!==this.props.linkColor)&&(null===(t=this.webview)||void 0===t?void 0:t.executeScript))return void this.webview.executeScript({code:`\n        document.styleSheets[0].deleteRule(0);\n        document.styleSheets[0].insertRule(\n          ":root { --colorBg: ${this.props.backgroundColor}; --colorFg: ${this.props.color}; --colorHighlightFg: ${this.props.linkColor}; }", 0\n        );`});const{textOrHtml:a,blockHTTPLeaks:n,bodyParts:i,isRss:s,showRaw:r}=this.props,{content:o,type:l}=a;let c=!1;if(e.textOrHtml!==a||"html"===l&&e.blockHTTPLeaks!==n){var m;let e,t=!1;if(r){const t=document.createTextNode(o),a=document.createElement("p");a.appendChild(t),e=`<html>${this.getDefaultStyle(!1)}<body>${a.innerHTML}</body></html>`}else if("html"===l){const a={};(i||[]).forEach(e=>{"attachment"===e.type&&e.id&&(a["cid:"+e.id]=e)});const r=Object(d.d)(o,{attachments:a,blockHTTPLeaks:n});t=r.leakPrevented,e=s?this.getDefaultRssStyle()+r.sanitized:this.getDefaultStyle(!0)+r.sanitized}else e=`<html>${this.getDefaultStyle(!1)}<body>${Object(u.a)(o.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}</body></html>`;this.setState({leakPrevented:t}),(null===(m=this.webview)||void 0===m?void 0:m.executeScript)&&(c=!0,this.webview.executeScript({code:`document.open();\n           document.write(${JSON.stringify(e)});\n           document.close();`}))}(c||e.inject!==this.props.inject)&&this.webview&&this.props.inject&&this.webview.executeScript({code:b(this.props.inject)})}render(){const{fromAddress:e,onUnblockExternalContent:t}=this.props,{leakPrevented:a}=this.state;return n.createElement(n.Fragment,null,a&&n.createElement("div",{className:"mail-content-blocked",__source:{fileName:h,lineNumber:373,columnNumber:11}},n.createElement("div",{className:"content-blocked-text",__source:{fileName:h,lineNumber:374,columnNumber:13}},Object(l.a)("This message was prevented from loading external content.")),n.createElement("label",{title:Object(l.a)("Always allow $1",[e]),className:"content-blocked-toggle-container",__source:{fileName:h,lineNumber:377,columnNumber:13}},n.createElement("input",{className:"content-blocked-toggle",ref:"contentBlockedToggle",type:"checkbox",__source:{fileName:h,lineNumber:380,columnNumber:15}}),n.createElement("span",{className:"content-blocked-toggle-text",__source:{fileName:h,lineNumber:384,columnNumber:17}},Object(l.a)("Always allow $1",[e]))),n.createElement("input",{className:"content-blocked-action",type:"button",title:Object(l.a)("Load External Content"),onClick:()=>t(this.refs.contentBlockedToggle.checked),value:Object(l.a)("Load External Content"),__source:{fileName:h,lineNumber:388,columnNumber:13}})),n.createElement("div",{className:"mail_body",__source:{fileName:h,lineNumber:396,columnNumber:9}},n.createElement("section",{tabIndex:"0",__source:{fileName:h,lineNumber:397,columnNumber:11}},n.createElement("webview",{name:"vivaldi-mail",ref:this.updateWebviewEventListeners,src:"data:text/html,<html/>",__source:{fileName:h,lineNumber:398,columnNumber:13}}))))}}p(g,"contextType",o.a),t.a=g},,function(e,t,a){"use strict";var n=a(296),i=a(193),s=a(14),r=a(6),o=a(0),l=a.n(o),c=a(35);class u extends l.a.Component{render(){const{address:e}=this.props;if(!e)return null;const t=e.substring(0,2),a=t.substring(0,1).toUpperCase(),n=t.substring(1),i=a+n,s=c.a.getSync("BROWSER_COLOR_BG");return console.log(a,n),l.a.createElement("span",{className:"profile-picture",style:{backgroundColor:s},__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ProfilePicture.jsx",lineNumber:25,columnNumber:7}},i)}}var m=u,d=a(25),h=a(17),p=a(2),b=a(20),g=a.n(b),N=a(1),f=a(9),_=a(497),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatContactRow.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends l.a.Component{constructor(...e){super(...e),E(this,"state",{isHovered:!1,latestMessage:null,hasUnread:!1}),E(this,"didSelectContact",e=>{const{contact:t,didSelectNewRecipient:a,isPanel:n}=this.props,{ctrlKey:i,shiftKey:o,altKey:l,metaKey:c}=e;r.a.get(N.kChatTabMode)||i||o||l||c?s.a.openURL(`vivaldi://chat/${t.address}`,{singleton:!0}):n?a(t.address):s.a.openURL(`vivaldi://chat/${t.address}`,{singleton:!0})}),E(this,"_chatStoreListener",()=>{const{contact:e}=this.props,t=i.a.hasUnreadMessages(e.address),a=i.a.getLastMessageFrom(e.address);this.setState(e=>({latestMessage:a||e.latestMessage,hasUnread:t}))}),E(this,"onDragStart",e=>{const{contact:t,isDragging:a}=this.props,n=h.a.isIncognito(this.context.vivaldiWindowId);Object(_.a)(e,`vivaldi://chat/${t.address}`,t.address,n),a(!0)}),E(this,"onDragEnd",e=>{this.props.isDragging(!1)}),E(this,"onMouseEnter",()=>{this.setState({isHovered:!0})}),E(this,"onMouseLeave",()=>{this.setState({isHovered:!1})}),E(this,"removeFromFav",e=>{const{contact:t,removeFav:a}=this.props;e.preventDefault(),e.stopPropagation(),"function"==typeof a&&a(t)})}componentDidMount(){this._chatStoreToken=i.a.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{contact:e,style:t,isTyping:a,isFav:n}=this.props,{isHovered:i,latestMessage:s,hasUnread:r}=this.state,o=s?s.body:"",c=a&&!r?l.a.createElement("i",{__source:{fileName:v,lineNumber:126,columnNumber:46}},"Writing..."):o;return l.a.createElement("div",{className:g()({"chat-contact-row":!0,"chat-contact-row--HasUnread":r}),draggable:!0,onClick:this.didSelectContact,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:t,__source:{fileName:v,lineNumber:129,columnNumber:7}},l.a.createElement(m,{address:e.address,__source:{fileName:v,lineNumber:141,columnNumber:9}}),l.a.createElement("div",{className:"main-info",__source:{fileName:v,lineNumber:142,columnNumber:9}},l.a.createElement("p",{className:"name",__source:{fileName:v,lineNumber:143,columnNumber:11}},e.displayName),l.a.createElement("p",{className:"preview",__source:{fileName:v,lineNumber:144,columnNumber:11}},c)),n&&i&&l.a.createElement("span",{className:"close",title:Object(p.a)("Close"),tabIndex:"-1",onClick:this.removeFromFav,dangerouslySetInnerHTML:{__html:f.kb},__source:{fileName:v,lineNumber:146,columnNumber:32}}))}}E(C,"contextType",d.a);var w=C,O=a(272),y=a(431),S=a(129),T=a(429),k="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatContacts.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends l.a.Component{constructor(...e){super(...e),A(this,"treeEntries",l.a.createRef()),A(this,"state",{favorites:r.a.get(N.kChatFavorites),isDragging:!1,width:0,conversations:Object(S.h)()}),A(this,"_chatStoreListener",()=>{const e=i.a.getSortedConversationByNewest(),t=[...r.a.get(N.kChatFavorites)].map(e=>e.address),a=Object(T.a)(e,t);this.chatSetup(a)}),A(this,"chatSetup",e=>{const t=Object(S.e)("Rooms"),a=Object(S.e)("Chats"),n=e.filter(e=>!e.includes("@conference")).map(e=>Object(S.f)(e));n.length&&n.unshift(a);const i=e.filter(e=>e.includes("@conference")).map(e=>Object(S.f)(e));i.length&&i.unshift(t);const s=[...i,...n];this.setState({conversations:s})}),A(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.getData("text/plain");if(t.includes("vivaldi://chat/")){t=t.split("vivaldi://chat/")[1];const e={address:t,type:"conversation",displayName:Object(S.k)(t)};if(this.state.favorites.some(t=>t.address===e.address))return;Object(S.a)(e),this.setState(a=>({conversations:[...a.conversations].filter(e=>"title"===e.type||!e.address.includes(t)),favorites:[...a.favorites,e],isDragging:!1}))}else this.setState({isDragging:!1})}),A(this,"onDragOver",e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"}),A(this,"setDragState",e=>{this.setState({isDragging:e})}),A(this,"setNewRecipient",e=>{this.props.didSelectNewRecipient(e)}),A(this,"removeFav",e=>{this.setState(t=>{const a=[...t.favorites],n=a.findIndex(t=>t.address===e.address);return a.splice(n,1),Object(S.i)(n),{favorites:a}})}),A(this,"onResize",e=>{const{contentRect:t}=e[0];this.setState({width:t.width})}),A(this,"renderItem",e=>{const{index:t,style:a,key:n}=e,i=this.state.conversations[t],{typers:s}=this.props,r=i.address?i.address:"",o=s.get(r),c=(o?o.length:0)>0;switch(i.type){case"title":return l.a.createElement("h1",{style:a,key:n,className:"section-heading",__source:{fileName:k,lineNumber:206,columnNumber:11}},i.name);case"conversation":return l.a.createElement(w,{contact:i,key:n,style:a,didSelectNewRecipient:this.props.didSelectNewRecipient,isDragging:this.setDragState,isTyping:c,isPanel:this.props.isPanel,__source:{fileName:k,lineNumber:215,columnNumber:18}});default:return null}})}componentDidUpdate(e,t){this.props.typers&&this.treeEntries&&this.treeEntries.current&&this.treeEntries.current.forceUpdateGrid(),t.favorites!==this.state.favorites&&this._chatStoreListener()}componentDidMount(){this._chatStoreToken=i.a.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}render(){const{conversations:e,favorites:t,isDragging:a,width:n}=this.state,{isPanel:i}=this.props,s=a||t.length>0;return l.a.createElement("div",{className:"chat-contacts outerScrollbar",__source:{fileName:k,lineNumber:242,columnNumber:7}},s&&l.a.createElement("h1",{className:"section-heading",__source:{fileName:k,lineNumber:244,columnNumber:13}},"Favorites"),l.a.createElement("div",{className:g()({"favorites-view":!0,"view-hide":!s,"view-expand":s}),onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:k,lineNumber:246,columnNumber:11}},t.map((e,t)=>l.a.createElement(w,{key:`${e.displayName}-${t}`,contact:e,didSelectNewRecipient:this.setNewRecipient,isDragging:this.setDragState,isFav:!0,isPanel:i,removeFav:this.removeFav,__source:{fileName:k,lineNumber:257,columnNumber:17}}))),l.a.createElement(O.a,{className:"chat-resize-observer",onResize:this.onResize,__source:{fileName:k,lineNumber:269,columnNumber:11}},l.a.createElement(y.a,{ref:this.treeEntries,height:44*e.length,rowHeight:44,width:n,rowRenderer:this.renderItem,rowCount:e.length,__source:{fileName:k,lineNumber:272,columnNumber:13}})))}}var D=I,M=a(801),P=a(174),x=a(21),L=a(151),j=a(11),R=a(802),B=a(22),F=a(149),U=a(236),H=a(284),V=a(248),W="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatInputView.jsx";function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const G=[N.kChatProcessHintNoStore],K=j.a.getEventHandler;class Y extends l.a.Component{constructor(...e){super(...e),z(this,"fileInput",l.a.createRef()),z(this,"textAreaRef",l.a.createRef()),z(this,"state",{message:"",files:[]}),z(this,"onChangeMessage",e=>{this.setState({message:e.target.value})}),z(this,"focusInputField",()=>{this.textAreaRef&&this.textAreaRef.current&&this.textAreaRef.current.focus()}),z(this,"handleInputKey",e=>{const{message:t,files:a}=this.state;"Enter"!==e.key||e.shiftKey?(this.sendCurrentTyping(),this.sendPausedEvent()):(a.length&&this.uploadFiles(a),t.trim().length&&this._sendMessage(),e.preventDefault())}),z(this,"uploadFiles",e=>{e.map(async e=>{const t=await fetch(e.uploadSlot.upload.url,{method:"put",body:e.file});if(201===t.status){const{to:e}=this.props;this.setState(e=>{const a=[...e.files],n=a.findIndex(e=>e.uploadSlot.download.includes(t.url));return a.splice(n,1),{files:a}}),Object(S.l)({to:e,message:t.url,kind:"file"})}})}),z(this,"sendTypingEvent",e=>{if(r.a.get(N.kChatTypingIndication)){const t=this.props.to.includes("conference")?"groupchat":"chat";P.a.getClient().sendMessage({to:this.props.to,type:t,chatState:e})}}),z(this,"sendCurrentTyping",Object(U.default)(()=>this.sendTypingEvent("composing"),750)),z(this,"sendPausedEvent",Object(H.a)(()=>this.sendTypingEvent("paused"),1500)),z(this,"_sendMessage",async()=>{const{message:e}=this.state,{to:t}=this.props;Object(S.l)({to:t,message:e,kind:"text"}),this.setState({message:"",files:[]}),this.sendTypingEvent("paused")}),z(this,"handleClick",()=>{this.fileInput.current&&this.fileInput.current.click()}),z(this,"_testImage",async e=>{const t=[...this.state.files],a=Promise.all(Object(V.default)(e.target.files).map(async e=>({...await this._processFiles(e)})));this.setState({files:[...t,...await a]},()=>{this.focusInputField()})}),z(this,"_processFiles",async e=>({content:await L.a.readFileAsDataURL(e),uploadSlot:await P.a.getClient().getUploadSlot("upload.xmpp.vivaldi.net",{name:e.name,size:e.size,mediaType:e.type}),file:e,uploaded:!1})),z(this,"onPaste",async e=>{const{files:t}=e.clipboardData;if(t.length){e.preventDefault(),e.stopPropagation();const a=[...this.state.files],n=await this._processFiles(t[0]);this.setState({files:[...a,n]})}}),z(this,"onDrop",async e=>{e.preventDefault(),e.stopPropagation();const{files:t}=e.dataTransfer;if(t.length){const e=[...this.state.files],a=await this._processFiles(t[0]);this.setState({files:[...e,a]})}}),z(this,"onDragOver",e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"}),z(this,"deleteItem",e=>{this.setState(t=>{const a=t.files;return a.splice(e,1),{files:a}})}),z(this,"_openFile",(e,t)=>{let a={inCurrent:!1};const n={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};e&&(a=Object(F.b)(n)),s.a.openURL(t.content,a)})}componentDidMount(){this.focusInputField()}render(){const{files:e,message:t}=this.state,a=!t.length&&!e.length;return l.a.createElement("div",{className:"input-view",onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:W,lineNumber:222,columnNumber:7}},l.a.createElement("div",{className:"NotesAttachments",__source:{fileName:W,lineNumber:227,columnNumber:9}},e.length?e.map((e,t)=>l.a.createElement(M.a,{key:t,onDelete:()=>this.deleteItem(t),onContextMenu:()=>{},onOpen:t=>this._openFile(t,e),item:e,draggable:!1,__source:{fileName:W,lineNumber:229,columnNumber:13}})):null),l.a.createElement("textarea",{ref:this.textAreaRef,className:"chat-text-input",onChange:this.onChangeMessage,onKeyDown:this.handleInputKey,onPaste:this.onPaste,placeholder:Object(p.a)("Type message..."),value:t,__source:{fileName:W,lineNumber:240,columnNumber:9}}),l.a.createElement("div",{className:"toolbar toolbar-default composing-toolbar",__source:{fileName:W,lineNumber:248,columnNumber:11}},l.a.createElement(B.a,{className:"primary send-button",tooltip:Object(p.a)("Send"),onClick:this._sendMessage,disabled:a,image:f.Q.medium,__source:{fileName:W,lineNumber:249,columnNumber:13}}),l.a.createElement("label",{className:"button-toolbar",title:Object(p.a)("Attach new file..."),__source:{fileName:W,lineNumber:256,columnNumber:13}},l.a.createElement("input",{ref:this.fileInput,type:"file",style:{display:"none"},accept:"image/*,text/plain,.pdf",multiple:!0,onChange:e=>this._testImage(e),__source:{fileName:W,lineNumber:259,columnNumber:15}}),l.a.createElement("button",{onClick:this.handleClick,__source:{fileName:W,lineNumber:267,columnNumber:15}},l.a.createElement("div",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:f.r},__source:{fileName:W,lineNumber:268,columnNumber:17}}))),l.a.createElement("label",{className:"incognito-switch",__source:{fileName:W,lineNumber:274,columnNumber:13}},l.a.createElement(R.a,{value:"system",checked:this.props.prefValues[N.kChatProcessHintNoStore],onChange:K(N.kChatProcessHintNoStore),__source:{fileName:W,lineNumber:275,columnNumber:15}}),l.a.createElement("span",{__source:{fileName:W,lineNumber:280,columnNumber:15}},Object(p.a)("Incognito")))))}}var $=Object(x.a)(Y,G),X=a(235),Z=a(15),Q=a.n(Z),q=a(198),J="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatMessage.jsx";function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class te extends l.a.PureComponent{constructor(...e){super(...e),ee(this,"state",{isHovered:!1,data:null}),ee(this,"textToHtml",e=>Object(q.sanitize)(Object(X.a)(e.replace("\n","<br />")),{FORBID_TAGS:["style"]})),ee(this,"handleLinkClick",e=>{const t=e.target.closest("a");if(!t)return;const a={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button},n=Object(F.b)(a);n.inCurrent=!1,s.a.openURL(t.href,n)}),ee(this,"onMouseEnter",()=>{this.setState({isHovered:!0})}),ee(this,"onMouseLeave",()=>{this.setState({isHovered:!1})}),ee(this,"renderImage",()=>{const{msg:e}=this.props,{data:t}=this.state;t||this.compressImageFile(e.body);const a=t?t.base:e.body;return(l.a.createElement("img",{height:t?t.height:200,src:a,width:t?t.width:null,className:"image-preview",draggable:!0,alt:"",onClick:()=>s.a.openURL(e.body),__source:{fileName:J,lineNumber:106,columnNumber:7}}))})}compressImageFile(e){const t=document.createElement("canvas"),a=new Image;a.src=e;const n=t.getContext("2d");a.onload=()=>{const e=Math.min(200/a.width,200/a.height),i=Math.floor(a.width*e),s=Math.floor(a.height*e);t.width=i,t.height=s,n.imageSmoothingEnabled=!1,n.drawImage(a,0,0,i,s);const r=t.toDataURL("image/png",.66);this.setState(()=>({data:{base:r,width:i,height:s}}))},a.onerror=e=>{console.log("Image loading failed",e)}}render(){var e;const{index:t,msg:a,style:n,prevMsg:i}=this.props,{isHovered:s}=this.state,{body:r}=a,o=Object(S.g)(a),c=Object(S.g)(i),u=a.delay?Q.a.utc(a.delay.timestamp).local().format("HH:mm:ss (YYYY-MM-DD)"):"",d=a.delay?Q.a.utc(a.delay.timestamp).local().format("HH:mm"):"",h=s?u:d,p=a.processingHints&&a.processingHints.noStore,b=c!==o||0===t;return l.a.createElement("div",{className:g()({"chat-message":!0,"no-store":p}),style:n,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:J,lineNumber:134,columnNumber:7}},b&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m,{address:Object(S.g)(a),__source:{fileName:J,lineNumber:145,columnNumber:13}}),l.a.createElement("p",{className:"from",__source:{fileName:J,lineNumber:148,columnNumber:13}},o)),l.a.createElement("div",{className:"main-section",__source:{fileName:J,lineNumber:151,columnNumber:9}},l.a.createElement("p",{className:"timestamp",__source:{fileName:J,lineNumber:152,columnNumber:9}},h),"file"===(null===(e=a.kind)||void 0===e?void 0:e.value)?this.renderImage():l.a.createElement("span",{onClick:this.handleLinkClick,className:"message-content",dangerouslySetInnerHTML:{__html:this.textToHtml(r)},__source:{fileName:J,lineNumber:155,columnNumber:11}})))}}var ae=te,ne=a(633),ie=a(319),se=a(261),re="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\MessageList.jsx";function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class le extends l.a.Component{constructor(e){super(e),oe(this,"treeEntries",l.a.createRef()),oe(this,"startIndex",0),oe(this,"endIndex",0),oe(this,"_cellCache",new ne.b({defaultHeight:50,minHeight:30,fixedWidth:!0})),oe(this,"focusLastMessage",()=>{this.treeEntries.current&&this.treeEntries.current.scrollToRow(this.props.messages.length)}),oe(this,"clearSeenMessages",()=>{this.setState({seenMessages:[]})}),oe(this,"rerenderVisibleTreeItems",()=>{this.treeEntries.current&&(this.treeEntries.current.forceUpdateGrid(),this.focusLastMessage())}),oe(this,"loadMoreHistory",()=>{n.a.getMoreHistory(this.props.to)}),oe(this,"onResize",e=>{const{contentRect:t}=e[0];this.setState({width:t.width,height:t.height})}),oe(this,"_recalculateRowHeights",()=>{this._cellCache.clearAll(),this.treeEntries&&this.treeEntries.current&&this.treeEntries.current.recomputeRowHeights()}),oe(this,"addMessageToSeen",e=>{const{seenMessages:t}=this.state,a=e.filter(e=>!1===e.read).map(e=>e.id),n=Object(ie.a)([...t,...a]);n.length>t.length&&this.setState({seenMessages:n})}),oe(this,"_onIndexChanged",e=>{const{messages:t}=this.props;if(0===e.startIndex)return;e.startIndex<=Math.floor(t.length/4)&&this.loadMoreHistory(),this.addMessageToSeen(t.slice(e.startIndex));const a=t[e.stopIndex].id;this.setState({activeMessageId:a}),this.startIndex=e.startIndex,this.endIndex=e.stopIndex}),oe(this,"setScrollPosition",e=>{const t=e.target;t instanceof HTMLElement&&this.setState({bottomOffset:t.scrollHeight-(t.scrollTop+t.clientHeight)})}),oe(this,"renderEmptyState",()=>{const{to:e}=this.props;if(e)return l.a.createElement("div",{className:"empty-state-no-messages",__source:{fileName:re,lineNumber:184,columnNumber:9}},l.a.createElement("img",{src:"/resources/room-default.png",className:"empty-state-icon",alt:"",__source:{fileName:re,lineNumber:185,columnNumber:11}}),l.a.createElement("h1",{__source:{fileName:re,lineNumber:190,columnNumber:11}},"No messages"),l.a.createElement("p",{__source:{fileName:re,lineNumber:191,columnNumber:11}},"This is your first conversation with ",e))}),oe(this,"renderMessageItem",e=>{const{messages:t}=this.props,{index:a,parent:n,style:i,key:s}=e,r=t[a],o=0===a?t[a]:t[a-1];return l.a.createElement(ne.a,{cache:this._cellCache,columnIndex:0,key:s,parent:n,rowIndex:a,__source:{fileName:re,lineNumber:204,columnNumber:7}},()=>l.a.createElement(ae,{style:i,index:a,msg:r,prevMsg:o,__source:{fileName:re,lineNumber:212,columnNumber:11}}))}),this.state={height:0,width:0,bottomOffset:0,seenMessages:[],activeMessageId:""}}componentDidUpdate(e,t){if(e.messages!==this.props.messages)if(0===e.messages.length||t.bottomOffset<=150)this.focusLastMessage();else if(this.treeEntries.current){const e=this.props.messages.findIndex(e=>e.id===t.activeMessageId);this.treeEntries.current.scrollToRow(e),this._recalculateRowHeights()}t.width!==this.state.width&&this._recalculateRowHeights()}componentWillUnmount(){n.a.updateLastActivity(this.props.to,this.state.seenMessages)}shouldComponentUpdate(e,t){return!Object(se.default)(this.state,t)||(!Object(se.default)(e.messages,this.props.messages)||this.props.to!==e.to)}render(){const{messages:e}=this.props,{height:t,width:a}=this.state,n=t<300?1e3:t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{className:"chat-resize-observer outerScrollbar",onScroll:this.setScrollPosition,onResize:this.onResize,__source:{fileName:re,lineNumber:229,columnNumber:7}},l.a.createElement(y.a,{ref:this.treeEntries,deferredMeasurementCache:this._cellCache,className:"messages-list",height:n,onRowsRendered:this._onIndexChanged,rowHeight:this._cellCache.rowHeight,overscanRowCount:25,noRowsRenderer:this.renderEmptyState,width:a,rowRenderer:this.renderMessageItem,rowCount:e.length,__source:{fileName:re,lineNumber:233,columnNumber:11}})))}}var ce=le,ue=(a(53),a(221)),me="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatConversation.jsx";function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class he extends l.a.PureComponent{constructor(...e){super(...e),de(this,"state",{editorHeight:160,messages:[]}),de(this,"_chatStoreListener",()=>{const e=i.a.getMessagesFrom(this.props.to);e?this.setState({messages:e.messages}):n.a.getMoreHistory(this.props.to)}),de(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,260),0)}))}),de(this,"onSlideBarStop",()=>{this.setState(e=>({editorHeight:e.editorHeight}))})}componentDidMount(){this._chatStoreToken=i.a.addListener(this._chatStoreListener),this._chatStoreListener()}componentWillUnmount(){this._chatStoreToken.remove()}componentDidUpdate(e){const{to:t}=this.props;e.to!==t&&this._chatStoreListener()}renderTypers(){const{typers:e}=this.props;return e?Object(S.c)(e):null}render(){const{editorHeight:e,messages:t}=this.state,{to:a}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{__source:{fileName:me,lineNumber:91,columnNumber:9}},l.a.createElement(ce,{messages:t,to:a,__source:{fileName:me,lineNumber:92,columnNumber:11}})),l.a.createElement("section",{className:"chat-input–view",style:{flexBasis:e},__source:{fileName:me,lineNumber:97,columnNumber:9}},l.a.createElement(ue.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,position:"bottom",returnOffset:!0,__source:{fileName:me,lineNumber:100,columnNumber:11}}),l.a.createElement($,{to:a,__source:{fileName:me,lineNumber:106,columnNumber:11}}),l.a.createElement("div",{className:"typing-indicator",__source:{fileName:me,lineNumber:107,columnNumber:11}},l.a.createElement("span",{__source:{fileName:me,lineNumber:108,columnNumber:13}},this.renderTypers()))))}}var pe=he,be="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatOnboarding.jsx";function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ne extends l.a.Component{constructor(...e){super(...e),ge(this,"state",{jid:"",password:""}),ge(this,"jidInputChange",e=>{this.setState({jid:e.target.value})}),ge(this,"passwordInputChange",e=>{this.setState({password:e.target.value})}),ge(this,"keyChange",e=>{"Enter"===e.key&&this.login()}),ge(this,"login",()=>{const{jid:e,password:t}=this.state,a=e.trim();a.length&&t.length&&P.a.createClient(a,t)}),ge(this,"openProductPage",()=>{s.a.openURL("https://vivaldi.com")})}render(){const{jid:e,password:t}=this.state,a=e.trim().length&&t.trim().length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat-onboarding outerScrollbar",__source:{fileName:be,lineNumber:60,columnNumber:9}},l.a.createElement("div",{className:"info-section",__source:{fileName:be,lineNumber:61,columnNumber:9}},l.a.createElement("span",{className:"chat-icon",dangerouslySetInnerHTML:{__html:f.Zb.small},__source:{fileName:be,lineNumber:62,columnNumber:11}}),l.a.createElement("h1",{className:"heading",__source:{fileName:be,lineNumber:66,columnNumber:11}},"Vivaldi Chat"),l.a.createElement("p",{className:"onboarding-pitch",__source:{fileName:be,lineNumber:67,columnNumber:11}},Object(p.a)("Private and lightning fast messaging with friends and groups."))),l.a.createElement("div",{className:"login-container",__source:{fileName:be,lineNumber:72,columnNumber:9}},l.a.createElement("input",{className:"login-input",placeholder:"user@xmpp.vivaldi.net",onChange:this.jidInputChange,onKeyDown:this.keyChange,type:"text",value:e,__source:{fileName:be,lineNumber:73,columnNumber:11}}),l.a.createElement("input",{className:"login-input",placeholder:Object(p.a)("Password"),onChange:this.passwordInputChange,onKeyDown:this.keyChange,type:"password",value:t,__source:{fileName:be,lineNumber:81,columnNumber:11}}),l.a.createElement("input",{className:"login-input login-button",type:"button",disabled:!a,onClick:this.login,value:Object(p.a)("Sign In"),__source:{fileName:be,lineNumber:89,columnNumber:11}})),l.a.createElement("a",{href:"",className:"chat-read-more-link",onClick:this.openProductPage,title:Object(p.a)("Read more about Vivaldi Chat"),__source:{fileName:be,lineNumber:97,columnNumber:9}},Object(p.a)("Learn More"))))}}var fe=Ne,_e=a(161),ve="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ConversationDetail.jsx";function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ce extends l.a.Component{constructor(...e){super(...e),Ee(this,"state",{description:"Description and member list is coming soon."}),Ee(this,"addPanel",()=>{_e.a.addByUrl(`vivaldi://chat/${this.props.to}`)})}render(){const{description:e}=this.state,{to:t}=this.props;return l.a.createElement("div",{className:"conversation-detail",__source:{fileName:ve,lineNumber:30,columnNumber:7}},l.a.createElement("h1",{__source:{fileName:ve,lineNumber:31,columnNumber:9}},t),l.a.createElement("p",{__source:{fileName:ve,lineNumber:32,columnNumber:9}},e),l.a.createElement("input",{type:"button",onClick:this.addPanel,value:Object(p.a)("Add Panel"),__source:{fileName:ve,lineNumber:33,columnNumber:9}}))}}var we=Ce,Oe=a(90),ye="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\NewChat.jsx";function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Te extends l.a.PureComponent{constructor(...e){super(...e),Se(this,"searchField",l.a.createRef()),Se(this,"state",{error:"",to:""}),Se(this,"focusInputField",()=>{this.searchField&&this.searchField.current&&this.searchField.current.focus()}),Se(this,"inputDidChange",e=>{this.setState({error:"",to:e.target.value})}),Se(this,"newConversation",()=>{const{to:e}=this.state;if(e.includes("@"))e.includes("@conference")&&P.a.getClient().joinRoom(e,P.a.getClient().bareJid),this.props.setNewConversation(e.trim()),this.props.onRequestClose();else{const e=Object(p.a)("Please enter a valid XMPP address");this.setState({error:e})}})}componentDidMount(){this.focusInputField()}render(){const{error:e,to:t}=this.state;return(l.a.createElement("div",{className:"chat-new-conversation",__source:{fileName:ye,lineNumber:61,columnNumber:7}},l.a.createElement("h1",{__source:{fileName:ye,lineNumber:62,columnNumber:9}},Object(p.a)("New Chat")),l.a.createElement("p",{__source:{fileName:ye,lineNumber:63,columnNumber:9}},Object(p.a)("Find people from the Vivaldi.net community. XMPP addresses from other services are also welcome.")),l.a.createElement("form",{className:"input-form",onSubmit:this.newConversation,__source:{fileName:ye,lineNumber:65,columnNumber:9}},l.a.createElement("input",{type:"text",placeholder:"user@vivaldi.net",ref:this.searchField,onChange:this.inputDidChange,value:t,__source:{fileName:ye,lineNumber:68,columnNumber:11}}),l.a.createElement("input",{type:"button",className:"primary",disabled:!t.length,value:Object(p.a)("Start Conversation"),onClick:this.newConversation,__source:{fileName:ye,lineNumber:75,columnNumber:11}})),e&&l.a.createElement("p",{className:"validation-error",__source:{fileName:ye,lineNumber:84,columnNumber:20}},e)))}}var ke=Te,Ae=a(10),Ie=a(103),De="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatWrapper.jsx";function Me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pe extends l.a.Component{constructor(...e){super(...e),Me(this,"state",{displayConversationDetail:!1,displayCreateConversation:!1,isConnected:!1,isLoggedIn:!1,isPopupOpen:!1,to:this.props.initialTo,typers:new Map}),Me(this,"chatStoreListener",()=>{const e=i.a.getState();this.setState({isConnected:e.isConnected,isLoggedIn:e.isLoggedIn})}),Me(this,"_chatChangeListener",e=>{if(e.typing&&e.typing.from)switch(e.type){case"composing":this.processComposingType(e.typing);break;case"paused":this.processPausedType(e.typing)}}),Me(this,"processComposingType",e=>{const{typers:t}=this.state,a=Object(S.j)(e.from),n=Object(S.g)(e),i=t.get(a);if(i){const e=[...i],s=e.findIndex(e=>e.author===n);-1!==s?e[s].time=Date.now():e.push({author:n,time:Date.now()}),t.set(a,e)}else{const e=[{author:n,time:Date.now()}];t.set(a,e)}this.setState({typers:t})}),Me(this,"processPausedType",e=>{const{typers:t}=this.state,a=Object(S.j)(e.from),n=Object(S.g)(e),i=t.get(a);if(i&&i.length>1){const e=[...i],s=e.findIndex(e=>e.author===n);e.splice(s,1),t.set(a,e)}else t.delete(a);this.setState({typers:t})}),Me(this,"guardTypingFromDroppedConnections",()=>{this.guardInterval=setInterval(()=>{const{typers:e}=this.state;e.size&&Array.from(e.values()).forEach(t=>{t.forEach((t,a,n)=>{t.time<=Date.now()-2e3&&(n.splice(a,1),this.setState({typers:e}))})})},15e3)}),Me(this,"connect",()=>{P.a.getClient().connect()}),Me(this,"navigateBack",()=>{this.setNewRecipient("")}),Me(this,"setNewRecipient",e=>{n.a.updateActiveConversation(e),this.setState({to:e})}),Me(this,"toggleNewConversation",()=>{this.setState(e=>({displayCreateConversation:!e.displayCreateConversation}))}),Me(this,"toggleConversationDetail",()=>{this.setState(e=>({displayConversationDetail:!e.displayConversationDetail}))}),Me(this,"renderMainView",()=>{const{isLoggedIn:e,to:t,typers:a}=this.state,n=t&&t.length;return l.a.createElement(l.a.Fragment,null,!e&&l.a.createElement(fe,{__source:{fileName:De,lineNumber:203,columnNumber:26}}),e&&!n&&l.a.createElement(D,{didSelectNewRecipient:this.setNewRecipient,isPanel:!0,typers:a,__source:{fileName:De,lineNumber:205,columnNumber:11}}),e&&n&&l.a.createElement(pe,{to:t,typers:a.get(t),__source:{fileName:De,lineNumber:211,columnNumber:11}}))}),Me(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),Me(this,"hidePopup",()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})})}componentDidMount(){P.a.addChangeListener(this._chatChangeListener),Q.a.locale(Ie.a.fixMomentLocale(Ae.a.i18n.getUILanguage())),this._chatStoreToken=i.a.addListener(this.chatStoreListener),this.chatStoreListener(),this.guardTypingFromDroppedConnections()}componentWillUnmount(){P.a.removeChangeListener(this._chatChangeListener),this._chatStoreToken.remove(),clearInterval(this.guardInterval)}render(){const{displayConversationDetail:e,displayCreateConversation:t,isConnected:a,isLoggedIn:n,isPopupOpen:i,to:s}=this.state,o=s.length>0&&n?Object(S.k)(s):"Chat";return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{__source:{fileName:De,lineNumber:246,columnNumber:9}},l.a.createElement("h1",{className:"chat-title",__source:{fileName:De,lineNumber:247,columnNumber:11}},Object(p.a)(o)),n&&l.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:De,lineNumber:248,columnNumber:26}},s.length>0&&!r.a.get(N.kChatTabMode)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{className:"button-toolbar",onClick:this.navigateBack,image:f.o.medium,title:"Back",tooltip:Object(p.a)("Back to Contacts"),__source:{fileName:De,lineNumber:252,columnNumber:17}}),l.a.createElement(B.a,{className:"button-toolbar",onClick:this.toggleConversationDetail,title:"Info",tooltip:Object(p.a)("Info"),__source:{fileName:De,lineNumber:259,columnNumber:17}})),!s.length&&l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{className:"button-toolbar",onClick:this.toggleNewConversation,image:f.h.small,title:Object(p.a)("New"),tooltip:Object(p.a)("Create new conversation"),__source:{fileName:De,lineNumber:268,columnNumber:15}}),l.a.createElement(B.a,{className:"button-toolbar",onClick:this.togglePopup,title:Object(p.a)("Profile"),tooltip:Object(p.a)("View Profile info"),hidePopup:this.hidePopup,isPopupVisible:i,popupClassName:"ChatProfilePopup ToolbarButtonPopup-DefaultStyles",popupPosition:"below",popupWidth:180,__source:{fileName:De,lineNumber:275,columnNumber:15}},l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{__source:{fileName:De,lineNumber:287,columnNumber:19}},P.a.getClient().bareJid),l.a.createElement("p",{__source:{fileName:De,lineNumber:288,columnNumber:19}},Object(S.j)(P.a.getClient().jid))))),!a&&l.a.createElement("span",{className:"chat-connection-status",onClick:this.connect,__source:{fileName:De,lineNumber:293,columnNumber:31}},Object(p.a)("Disconnected️")))),this.renderMainView(),e&&l.a.createElement(Oe.a,{onRequestClose:this.toggleConversationDetail,viewMode:"slide",__source:{fileName:De,lineNumber:305,columnNumber:13}},l.a.createElement(we,{to:s,__source:{fileName:De,lineNumber:308,columnNumber:15}})),t&&l.a.createElement(Oe.a,{onRequestClose:this.toggleNewConversation,viewMode:"slide",__source:{fileName:De,lineNumber:312,columnNumber:40}},l.a.createElement(ke,{onRequestClose:this.toggleNewConversation,setNewConversation:this.setNewRecipient,__source:{fileName:De,lineNumber:315,columnNumber:13}})))}}t.a=Pe},,function(e,t,a){"use strict";function n(e){const{items:t,filterText:a,titleFilter:n,urlFilter:i,shouldSearchUrl:s}=e,r=(i||n||a).toLowerCase().split(" ");return t.map(e=>{const t=e.children.filter(e=>{const t=e.title.toLowerCase(),a=e.url.toLowerCase();return i?r.every(e=>a.includes(e)):n||!s?r.every(e=>t.includes(e)):r.every(e=>a.includes(e)||t.includes(e))});return{...e,children:t}})}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";(function(e){t.a=function(t){const a=t.match(/^(data:)(.*?)?(;charset=.*?)?(;base64)?,(.*)$/);if(!a)return t;const n=a[2],i=a[5],s=new e(i,"base64").toString("binary"),r=new Array(s.length);for(let e=0;e<s.length;e++)r[e]=s.charCodeAt(e);const o=new Uint8Array(r),l=new Blob([o],{type:n});return URL.createObjectURL(l)}}).call(this,a(530).Buffer)},,,,,,,,,,,function(e,t,a){"use strict";var n=a(14),i=a(13),s=a(12),r=a(16),o=a(10);const l=new class{foundRssFeeds(e,t){s.a.dispatch({actionType:r.a.RSS_FEEDS_FOUND,tabId:e,feeds:t})}resetRssFeeds(e){s.a.dispatch({actionType:r.a.RSS_CLEAR_FEEDS,tabId:e})}};o.a.webRequest.onResponseStarted.addListener(e=>{if(-1!==e.tabId){const t=(e.responseHeaders||[]).reverse().find(e=>"content-type"===e.name.toLowerCase());t&&o.a.tabs.get(e.tabId,a=>{n.a.setOriginalContentType(e.tabId,a.windowId,t.value||"")})}},{types:["main_frame"],urls:["http://*/*","https://*/*"]},["responseHeaders"]),o.a.runtime.onMessage.addListener((function(e,t,a){if(e)if(e.feeds)l.foundRssFeeds(e.tabId,e.feeds);else if(t.tab&&"number"==typeof t.tab.id&&"remove_this_preview"===e.command)o.a.tabs.sendMessage(t.tab.id,{command:"remove_preview"});else if(t.tab&&"get_tab_url"===e.command)a(t.tab.url);else if(t.tab&&"get_content_type"===e.command){const e=void 0===t.tab.id?-1:t.tab.id,n=i.c.getPageById(e);a(n?n.originalContentType:"")}})),t.a=l},function(e,t,a){"use strict";var n=a(12),i=a(16);const s=new class{setUtilityWebView(e){n.a.dispatch({actionType:i.a.WEBVIEW_SET_UTILITY_VIEW,webview:e})}};t.a=s},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(199),s=a(36),r=a(6),o=a(40),l=a.n(o),c=a(25),u=a(241),m=a(699),d=a(859),h=a(119),p=a(145),b=a(175),g=a(242),N=a(227),f=a(47),_=a(29),v=a(542),E=a(1364),C=a(1414),w=a(56),O=a(14),y=a(41),S=a(283),T=a(313),k=a(22),A=a(185),I=a(2),D=a(4),M=a(60),P=a(386),x=a(3),L=a(527),j=a(97),R=a(284),B=a(403),F=a(58),U=a(9),H=a(1),V=a(778),W=a(23),z="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanel.jsx";function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const[K,Y,$,X,Z,Q,q]=d.b,{getAllFolders:J,getSubscribedFolders:ee,isAccountSubFolder:te,isAccountRootFolder:ae,isSubscribable:ne}=v.a,ie=[x.t,x.fb],se=[x.O.RED,x.O.ORANGE,x.O.YELLOW,x.O.GREEN,x.O.BLUE,x.O.PURPLE,x.O.GRAY];class re extends n.PureComponent{constructor(...t){super(...t),G(this,"refTreeList",n.createRef()),G(this,"initialState",()=>{const e=!N.a.hasLoadedFolders()&&(r.a.get(H.kMailAccounts).length>0||r.a.get(H.kRssSettings).length>0);return{waiting:e,mailFolders:N.a.getAll(),mailingLists:_.a.getByAccountId(x.F),filters:_.a.getByAccountId(x.M),flags:_.a.getByAccountId(x.q),labels:_.a.getByAccountId(x.E),feeds:_.a.getByAccountId(x.n),allMsgs:_.a.getByAccountId(x.c),customFolderMsgs:_.a.getByAccountId(x.j),online:navigator.onLine,showHiddenMailingLists:!1,indexProgress:e?0:-1}}),G(this,"state",this.initialState()),G(this,"onItemsActivated",(e,t)=>{this.openTabForMailbox(t[0])}),G(this,"onImapStoreChange",()=>{navigator.onLine?this._onOnline():this._onOffline()}),G(this,"onFolderSelection",()=>{e.nextTick(()=>{const e=w.a.getSelectedFolder();var t;e&&(null===(t=this.refTreeList.current)||void 0===t||t.selectByNode(e))})}),G(this,"_onTurningMailOnOrOff",()=>{this.setState(this.initialState())}),G(this,"_onOnline",()=>{this.setState({online:!0})}),G(this,"_onOffline",()=>{this.setState({online:!1})}),G(this,"_onFiltersChanged",e=>{if("mailingLists"===e.target)this.setState({mailingLists:_.a.getByAccountId(x.F)});else if("filters"===e.target){let t;const{filterIds:a}=e;if(a){const e=_.a.getByIds(a),n=[x.M,x.q,x.E,x.n,x.c,x.j,x.F];t=a.length>e.length||e.some(e=>n.includes(e.accountId))}else t=!0;t&&this.setState({filters:_.a.getByAccountId(x.M),flags:_.a.getByAccountId(x.q),labels:_.a.getByAccountId(x.E),feeds:_.a.getByAccountId(x.n),allMsgs:_.a.getByAccountId(x.c),customFolderMsgs:_.a.getByAccountId(x.j),mailingLists:_.a.getByAccountId(x.F)})}else if("updateIndexProgress"===e.target){const t=Math.floor(e.indexCount/e.total*100)||0;this.setState({indexProgress:t})}else"finishIndexProgress"===e.target&&this.setState({indexProgress:-1})}),G(this,"onPanelStoreChange",e=>{var t;this.props.open&&"setFocus"===e&&!Object(j.a)(l.a.findDOMNode(this.refTreeList.current))&&(null===(t=this.refTreeList.current)||void 0===t||t.focusTree())}),G(this,"gotFolders",()=>{this.setState({waiting:!1,mailFolders:N.a.getAll()})}),G(this,"getAllAccountMailboxes",e=>{const t=[];let a;switch(e.path){case x.sb:a=x.tb;break;case x.C:a=x.D;break;case x.wb:a=x.xb}if(a){const e=N.a.getAll();for(const n in e){const i=e[n].folders[a];null==i||i.forEach(({type:e,path:i,subscribed:s})=>{e===a&&t.push({accountId:n,path:i,subscribed:s})})}}return t}),G(this,"openTabForMailbox",t=>{this.hasContentForMessageView(t)&&e.nextTick(()=>{(t.accountId===x.c?this.getAllAccountMailboxes(t):[t]).forEach(({accountId:e,path:t,subscribed:a})=>{Object(B.a)(e)&&a?b.a.checkNewDeletedModified(e,t):Object(B.b)(e)&&S.a.checkForMail(e)}),O.a.openURL(W.p.internals.mailpage,{singleton:!0}),f.a.selectFolder(t)})}),G(this,"handleMailboxClick",Object(R.a)(e=>{if(e.accountId===x.j&&e.path!==x.m){const t=e.path.indexOf("/"),a=e.path.substring(0,t),n=e.path.substring(t+1);this.openTabForMailbox({...e,accountId:a,path:n})}else this.openTabForMailbox(e)},200,{leading:!0,trailing:!1})),G(this,"handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),G(this,"rowComponent",e=>{const t=e.node;return 0===t.level?n.createElement(E.a,{key:t.id,id:t.id,name:t.name,label:t.name,handleExpand:this.handleExpandClick,hasChildren:this.hasChildren(t),onClick:this.handleMailboxClick.bind(this,t),isExpanded:t.isExpanded,accountId:t.accountId,path:t.path,__source:{fileName:z,lineNumber:379,columnNumber:14}}):n.createElement(C.a,{key:t.id,name:t.name,accountId:t.accountId,label:t.name,id:t.id,type:t.type,path:t.path,isAccount:ae(t),isImap:Object(B.a)(t.accountId),level:t.level,onClick:this.handleMailboxClick.bind(this,t),isExpanded:t.isExpanded,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,inlineEditText:e.inlineEditText,handleExpandClick:this.handleExpandClick,hasChildren:this.hasChildren(t),subscribable:ne(t)&&!t.subscribed,__source:{fileName:z,lineNumber:392,columnNumber:12}})}),G(this,"isFolder",e=>!0),G(this,"hasChildren",e=>Boolean(e.children&&e.children.length>0)),G(this,"hasContentForMessageView",e=>!0),G(this,"openMailSettings",()=>{s.a.showMailAccountDialog()}),G(this,"sendAllOutgoing",()=>{P.a.sendAll()}),G(this,"sendForAccount",e=>{P.a.sendForAccount(e)}),G(this,"rescanUnreadFlags",(e,t)=>{b.a.rescanUnreadFlags(e,t)}),G(this,"getContextMenuItems",e=>e?this._getNodeMenuItems(e):this._getRootMenuItems()),G(this,"_getNodeMenuItems",e=>{const t=[];if(t.push({handler:this.openTabForMailbox.bind(null,e),...Object(D.a)("View All Messages")}),t.push({handler:f.a.rerunFilter.bind(null,e.accountId,e.path),...Object(D.a)("Rerun Filter for Folder")}),F.a.getFolderType(e.accountId,e.path)!==x.tb&&F.a.getFolderType(e.accountId,e.path)!==x.l&&F.a.getFolderType(e.accountId,e.path)!==x.hb&&t.push({handler:f.a.setAllMailsInFolderAsRead.bind(null,e.accountId,e.path),...Object(D.a)("Mark All as Read")}),F.a.getFolderType(e.accountId,e.path)!==x.l&&F.a.getFolderType(e.accountId,e.path)!==x.hb&&F.a.getFolderType(e.accountId,e.path)!==x.D||t.push({handler:()=>f.a.moveAllToTrash(e.accountId,e.path,!0),...Object(D.a)("mail","Move All to Trash")}),F.a.getFolderType(e.accountId,e.path)===x.xb&&t.push({handler:f.a.deleteEntriesFromFolder.bind(null,e.accountId,e.path),...Object(D.a)("Empty Trash")}),ae(e)&&t.push({handler:this.checkAccountForMail.bind(null,e.accountId),...Object(D.a)("Check for Mail")}),ae(e)&&t.push({handler:this.sendForAccount.bind(null,e.accountId),...Object(D.a)("Send")}),te(e)&&Object(B.a)(e.accountId)&&t.push({handler:this.rescanUnreadFlags.bind(null,e.accountId,e.path),...Object(D.a)("Rescan Unread Flags")}),ne(e)){const{accountId:a,path:n}=e;if(e.subscribed){const e={accountId:a,path:n};t.push({handler:s.a.showMailUnsubscribeDialog.bind(null,e),...Object(D.a)("Unsubscribe")})}else t.push({handler:f.a.subscribeMailbox.bind(null,a,n),...Object(D.a)("Subscribe")})}if(te(e)&&t.push({handler:()=>h.a.rerunThreading(e.accountId,e.path),...Object(D.a)("Rerun Threading")}),e.accountId===x.M&&e.path){const a=_.a.getByFolder(e.accountId,e.path);a&&t.push({handler:f.a.removeFilter.bind(null,a.id),...Object(D.a)("Delete Filter")})}if(e.accountId===x.F&&e.path!==x.m){const a=_.a.getByFolder(e.accountId,e.path);a&&a.path!==x.fb&&a.path!==x.t&&t.push({handler:f.a.toggleMoveToOther.bind(null,e),...a.path.startsWith(x.fb)?Object(D.a)("Move into Important"):Object(D.a)("Move into Other")}),e.children&&0!==e.children.length||t.push({handler:f.a.removeMailingListFilter.bind(null,a),...Object(D.a)("mail","Remove")})}if(e.accountId===x.n&&(e.id!==x.o&&t.push({handler:T.a.removeFeed.bind(null,e.path),...Object(D.a)("Delete Feed")}),e.id===x.o&&void 0!==e.children&&this.hasChildren(e)&&t.push({handler:T.a.removeAllFeeds,...Object(D.a)("Delete All Feeds")})),e.accountId===x.F&&e.path===x.m&&t.push({handler:f.a.regenerateAllMailingLists,...Object(D.a)("Regenerate")}),e.accountId===x.E&&e.path){const a=_.a.getByFolder(e.accountId,e.path);a&&t.push({handler:f.a.removeFilter.bind(null,a.id),...Object(D.a)("mail","Remove")})}return t}),G(this,"_getRootMenuItems",()=>[]),G(this,"onContextMenu",e=>{var t,a;e.nativeEvent.buttons>0&&(null===(a=this.refTreeList.current)||void 0===a||a.unSelectAll());null===(t=this.refTreeList.current)||void 0===t||t.onContextMenu(e)}),G(this,"_getNodes",(e,t)=>{const a=[],n={};for(let i=0;i<e.length;i++){const s=e[i],r=s.accountId===x.q?u.a.translateFlag(s.path):s.name;de(s.accountId,s.path,"",a,n,t,r)}return a}),G(this,"_getAllMsgsNodes",()=>0===this.state.allMsgs.length?[]:this.state.allMsgs.map(e=>({name:Object(V.a)(e.path),path:e.path,accountId:x.c,id:x.d+"_"+e.path,children:[]}))),G(this,"_getCustomFoldersNodes",()=>{const e=[],t=N.a.getAll(),a=new Set,n=new Set;for(const i in t){v.a.getSubscribedFoldersFlat({folders:t[i].folders}).forEach(t=>{if(t.type===x.eb){a.has(t.name)?n.add(t.name):a.add(t.name);const s=i+"/"+t.path;e.push({...t,id:x.j+"_"+s,accountId:x.j,path:s})}})}return e.forEach(e=>{if(n.has(e.name)){const t=e.path.substring(0,e.path.indexOf("/"));e.name=e.name+" ("+t+")"}}),e}),G(this,"getRowHeight",({index:e},t)=>t.find(t=>{var a;return t.id===(null===(a=this.refTreeList.current)||void 0===a?void 0:a.getAllIds()[e])})?30:24),G(this,"getContextMenuItemProps",e=>({showRename:e.id.startsWith(x.o)})),G(this,"renderMailTree",()=>{const e=r.a.get(H.kMailFeedsInMailPanel),t=(!r.a.get(H.kMailShowUnsubscribed)?ee(this.state.mailFolders):J(this.state.mailFolders)).filter(e=>e.accountId!==x.n);t.sort(oe),K.children=this._getAllMsgsNodes().sort(ue),Y.children=this._getCustomFoldersNodes();const a=this._getNodes(this.state.mailingLists,x.G),i=a.find(e=>e.path===x.fb);i&&(i.name=Object(I.a)("Mailing Lists","Other"));const s=a.find(e=>e.path===x.t);s&&(s.name=Object(I.a)("Mailing Lists","Important")),$.children=a.sort(le);const o={name:Object(I.a)("All Accounts"),path:x.m,accountId:x.a,id:x.d+"_"+x.a,children:[]};Q.children=this._getNodes(this.state.labels,x.R),Z.children=this._getNodes(this.state.flags,x.P).sort(ce),q.children=this._getNodes(this.state.feeds,x.o),X.children=this._getNodes(this.state.filters,x.N),o.children=t;const l=e?d.b:d.a,c="feeds"===this.props.panelId,u=c?[q]:l.concat(o),m=c?"FEEDS_PANEL":"MAIL_PANEL";return n.createElement(A.a,{ref:this.refTreeList,rowComponent:this.rowComponent,getContextMenuItems:this.getContextMenuItems,getContextMenuItemProps:this.getContextMenuItemProps,nodes:u,onItemsActivated:this.onItemsActivated,isFolder:this.isFolder,canDoubleClick:this.hasContentForMessageView,hasChildren:this.hasChildren,settings:m,enableDragAndDrop:!1,multiSelect:!1,supportsInlineEdit:!0,isValidToEdit:this.isValidToEdit,saveTitle:this.saveTitle,getTitle:this.getTitle,rowHeight:e=>this.getRowHeight(e,u),expandedByDefault:!0,__source:{fileName:z,lineNumber:734,columnNumber:7}})}),G(this,"findAccountIndex",(e,t)=>e.findIndex(e=>e.path===t.substring(`${x.o}_`.length))),G(this,"getTitle",e=>{if("number"==typeof e)return"";let t="",a="";if(e.startsWith(x.G))t=x.F,a=x.G;else if(e.startsWith(x.N))t=x.M,a=x.N;else{const t=r.a.get(H.kRssSettings);if(e){return t[this.findAccountIndex(t,e)].title||""}}const n=e.replace(a+"_",""),i=_.a.getByFolder(t,n);return i?i.name:""}),G(this,"isValidToEdit",e=>!!e.startsWith(x.o)||(e.startsWith(x.G)&&e.split("/").length>1||e.startsWith(x.N))),G(this,"saveTitle",(e,t)=>{if(e){const a=r.a.get(H.kRssSettings),n=a.find(t=>t.path===e.substring(`${x.o}_`.length));if(n&&n.title!==t){const i={...n,title:t},s=this.findAccountIndex(a,e);return void T.a.edit(i,s)}}let a,n="";if(e.startsWith(x.G))n=x.F,a=x.G;else{if(!e.startsWith(x.N))return;n=x.M,a=x.N}const i=e.replace(a+"_",""),s=_.a.getByFolder(n,i);s&&t&&(s.name=t,p.a.put(s).then(e=>{M.a.updateFilters(e)}))}),G(this,"_getPendingMenu",()=>{const e=[];return m.a.m3GetAll().then(t=>{const a={};t.forEach(e=>{if(e.from){const t=e.from[0].address;a[t]||(a[t]=[]),a[t].push(e)}});for(const t in a){const n=a[t].length;n>0&&e.push({handler:this.sendForAccount.bind(null,t),...Object(D.a)("Send from $1 ($2)",[t,n])})}return e})}),G(this,"_getFetchMenuItems",()=>{const e=[],t=Object.keys(this.state.mailFolders);for(const a of t)e.push({handler:this.checkAccountForMail.bind(null,a),...Object(D.a)("Check $1",[a])});return e}),G(this,"checkAccountForMail",e=>{Object(B.a)(e)?b.a.checkForMail(e):Object(B.b)(e)&&S.a.checkForMail(e)}),G(this,"checkForMail",()=>{b.a.checkForMail(),S.a.checkForMail()}),G(this,"checkForFeeds",()=>{T.a.updateAllFeeds()}),G(this,"showAddFeedDialog",()=>{s.a.showAddFeed([{url:"",path:"",title:"",refreshInterval:0}])})}componentDidMount(){N.a.addChangeListener(this.gotFolders),_.a.addChangeListener(this._onFiltersChanged),g.a.addChangeListener(this.onImapStoreChange),y.d.addChangeListener(this.onPanelStoreChange),w.a.addChangeListener(this.onFolderSelection),r.a.addListener([H.kMailIsTurnedOff],this._onTurningMailOnOrOff),this.context.addEventListener("online",this._onOnline),this.context.addEventListener("offline",this._onOffline),"mail"===this.props.panelId&&r.a.addListener([H.kMailShowUnsubscribed],b.a.reconnectIMAPClients)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.focusTree()})}componentWillUnmount(){this.context.removeEventListener("online",this._onOnline),this.context.removeEventListener("offline",this._onOffline),N.a.removeChangeListener(this.gotFolders),_.a.removeChangeListener(this._onFiltersChanged),g.a.removeChangeListener(this.onImapStoreChange),y.d.removeChangeListener(this.onPanelStoreChange),w.a.removeChangeListener(this.onFolderSelection),r.a.removeListener([H.kMailIsTurnedOff],this._onTurningMailOnOrOff),"mail"===this.props.panelId&&r.a.removeListener([H.kMailShowUnsubscribed],b.a.reconnectIMAPClients)}render(){if(!this.props.open)return null;const e="feeds"===this.props.panelId,t=this.state.feeds.length,a=r.a.get(H.kMailFeedsInMailPanel);if(e)return n.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:z,lineNumber:906,columnNumber:9}},n.createElement("header",{__source:{fileName:z,lineNumber:907,columnNumber:11}},n.createElement("h1",{__source:{fileName:z,lineNumber:908,columnNumber:13}},this.state.online?this.props.title:Object(I.a)("$1 – Offline",[this.props.title])),n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:z,lineNumber:913,columnNumber:15}},n.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:z,lineNumber:914,columnNumber:17}},n.createElement(k.a,{tooltip:Object(I.a)("Check all feeds"),onClick:this.checkForFeeds,image:U.lc.small,__source:{fileName:z,lineNumber:915,columnNumber:19}}),n.createElement("hr",{__source:{fileName:z,lineNumber:920,columnNumber:19}}),n.createElement(k.a,{tooltip:Object(I.a)("Add a feed"),onClick:this.showAddFeedDialog,image:U.h.small,__source:{fileName:z,lineNumber:921,columnNumber:19}})))),n.createElement("section",{onContextMenu:this.onContextMenu,__source:{fileName:z,lineNumber:931,columnNumber:11}},this.renderMailTree()));{const e=Object.keys(this.state.mailFolders).length;return 0!==e||a&&0!==t||-1!==this.state.indexProgress||this.state.waiting?n.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:z,lineNumber:989,columnNumber:9}},n.createElement("header",{__source:{fileName:z,lineNumber:990,columnNumber:11}},n.createElement("h1",{__source:{fileName:z,lineNumber:991,columnNumber:13}},this.state.online?this.props.title:Object(I.a)("$1 – Offline",[this.props.title])),n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:z,lineNumber:995,columnNumber:15}},n.createElement(n.Fragment,null,n.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:z,lineNumber:997,columnNumber:17}},n.createElement(k.a,{tooltip:Object(I.a)("Check all accounts"),onClick:this.checkForMail,isMenuIndicatorVisible:e>1,image:U.lc.small,menu:this._getFetchMenuItems(),menuOrigin:"bottomLeft",__source:{fileName:z,lineNumber:998,columnNumber:19}}),n.createElement("hr",{__source:{fileName:z,lineNumber:1006,columnNumber:19}}),n.createElement(k.a,{tooltip:Object(I.a)("Send from all accounts"),onClick:this.sendAllOutgoing,disabled:this.state.waiting,isMenuIndicatorVisible:e>1,image:U.Zb.small,menuPromise:this._getPendingMenu,menuOrigin:"bottomLeft",__source:{fileName:z,lineNumber:1007,columnNumber:19}})),n.createElement(k.a,{title:Object(I.a)("Compose"),tooltip:Object(I.a)("Compose new mail"),onClick:i.a.createDraft.bind(null,void 0),image:U.Jb.small,className:"button-mail-compose",__source:{fileName:z,lineNumber:1018,columnNumber:17}})))),n.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:z,lineNumber:1030,columnNumber:11}},this.state.indexProgress>-1?n.createElement("span",{className:"mail-loading",__source:{fileName:z,lineNumber:1034,columnNumber:17}},n.createElement("progress",{max:"100",value:this.state.indexProgress,__source:{fileName:z,lineNumber:1035,columnNumber:19}})):this.renderMailTree())):n.createElement("div",{className:"panel",id:"mail_panel",__source:{fileName:z,lineNumber:947,columnNumber:11}},n.createElement("div",{className:"mail-onboarding-wrapper",__source:{fileName:z,lineNumber:948,columnNumber:13}},n.createElement("div",{className:"mail-onboarding",__source:{fileName:z,lineNumber:949,columnNumber:15}},n.createElement("svg",{width:"46",height:"46",viewBox:"0 0 64 64",fill:"none",__source:{fileName:z,lineNumber:950,columnNumber:17}},n.createElement("path",{d:"M32 64C46.0229 64 53.819 64 58.9095 58.9084C64 53.8169 64 46.0215 64 32C64 17.9785 64 10.1831 58.9095 5.09155C53.819 0 46.0229 0 32 0C17.9771 0 10.1811 0 5.09053 5.09155C0 10.1831 0 17.9785 0 32C0 46.0215 0 53.8169 5.09053 58.9084C10.1811 64 17.9771 64 32 64Z",fill:"#EF3939",__source:{fileName:z,lineNumber:951,columnNumber:19}}),n.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"64",height:"64",__source:{fileName:z,lineNumber:955,columnNumber:19}},n.createElement("path",{d:"M32 64C46.0229 64 53.819 64 58.9095 58.9084C64 53.8169 64 46.0215 64 32C64 17.9785 64 10.1831 58.9095 5.09155C53.819 0 46.0229 0 32 0C17.9771 0 10.1811 0 5.09053 5.09155C0 10.1831 0 17.9785 0 32C0 46.0215 0 53.8169 5.09053 58.9084C10.1811 64 17.9771 64 32 64Z",fill:"#EF3939",__source:{fileName:z,lineNumber:956,columnNumber:21}})),n.createElement("g",{mask:"url(#mask0)",__source:{fileName:z,lineNumber:961,columnNumber:19}},n.createElement("path",{opacity:"0.07",d:"M64.2106 35.5986L54.6357 18.9106L8.91235 20.8603V43.3958L20.2457 64.0705C23.6597 64.2711 27.4055 64.3175 32.1053 64.3175C45.9221 64.3175 54.8791 64.6144 59.8948 59.5898C64.6168 54.8605 64.194 47.9484 64.2106 35.5986Z",fill:"#000",__source:{fileName:z,lineNumber:962,columnNumber:21}})),n.createElement("path",{d:"M31.712 33.7227L55.0447 20.2478C54.8304 18.6236 53.4456 17.3584 51.7751 17.3584H12.2095C10.3961 17.3584 8.91235 18.8501 8.91235 20.6732V20.6898L31.712 33.7227Z",fill:"#fff",__source:{fileName:z,lineNumber:968,columnNumber:19}}),n.createElement("path",{d:"M31.723 36.905L8.91235 23.8666V43.3247C8.91235 45.1479 10.3961 46.6396 12.2095 46.6396H51.7751C53.5885 46.6396 55.0722 45.1479 55.0722 43.3247V23.4191L31.723 36.905Z",fill:"#fff",__source:{fileName:z,lineNumber:971,columnNumber:19}})),n.createElement("h1",{__source:{fileName:z,lineNumber:976,columnNumber:17}},Object(I.a)("Add your first mail account")),n.createElement("p",{__source:{fileName:z,lineNumber:977,columnNumber:17}},Object(I.a)("You can add any IMAP or POP account to Vivaldi Mail")),n.createElement("input",{type:"button",onClick:this.openMailSettings,value:Object(I.a)("Add Mail Account"),__source:{fileName:z,lineNumber:978,columnNumber:17}}))))}}}G(re,"contextType",c.a);const oe=function(e,t){const a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:e.name<t.name?-1:e.name>t.name?1:0},le=function(e,t){return ie.indexOf(e.path)-ie.indexOf(t.path)},ce=function(e,t){return se.indexOf(e.path)-se.indexOf(t.path)},ue=function(e,t){return L.a.indexOf(e.path)-L.a.indexOf(t.path)},me=function(e,t,a,n,i,s,r){n.sort(oe).forEach(n=>{n.path===a?de(e,t,a+"/",n.children,i,s,r):n.children.length>0&&me(e,t,a,n.children,i,s,r)})},de=function(e,t,a,n,i,s,r){const o=t.indexOf("/");if(e===x.n||-1===o)i[a+=t]||(n.push({name:r||t,path:a,accountId:e,id:s+"_"+a,children:[]}),i[a]=!0);else{const l=t.substr(o+1),c=t.substr(0,o);if(i[a+=c])me(e,l,a,n,i,s,r);else{const t={accountId:e,path:a,children:[],id:s+"_"+a,name:c};de(e,l,a+"/",t.children,i,s,r),n.push(t),i[a]=!0}}};t.a=re}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(1370),s=a(150),r=a(140),o=a(85),l=a(36),c=a(31),u=a(74),m=a(1371),d=a(53),h=a(14),p=a(13),b=a(40),g=a.n(b),N=a(1372),f=a(1375),_=a(114),v=a(35),E=a(25),C=a(17),w=a(2),O=a(10),y=a(20),S=a.n(y),T=a(1376),k=a.n(T),A=a(78),I=a(303),D=a(112),M=a.n(D),P=a(439),x=a(7),L=a(26),j=a(259),R=a(1),B=a(631),F=a(97),U=a(842),H=a(284),V=a(46),W=a(555),z=a(397),G=a(23),K="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabStrip.jsx";function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Z(e,t,"get"))}function X(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,Z(e,t,"set"),a),a}function Z(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const Q=Object(U.a)();class q extends(Object(L.Record)({type:"tab",id:0,page:new d.b,isFirst:!1,isLast:!1})){}const J={stiffness:400,damping:32,precision:.1};var ee=new WeakMap;class te extends n.PureComponent{constructor(...t){super(...t),ee.set(this,{writable:!0,value:void 0}),Y(this,"refTabStrip",n.createRef()),Y(this,"refTabs",new Map),Y(this,"state",{isScreenshotting:!1,delta:[0,0],start:[0,0],draggedActive:null,draggedSet:Object(L.Set)(),pageIdsHiddenForDrag:Object(L.Set)(),isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,freeze:null,addressBarVisible:C.a.getVisibleUI(this.context.vivaldiWindowId).addressBar,animate:!1,highlightedId:"",isDraggingPinnedTab:!1}),Y(this,"setOverflowClass",()=>{if(this.refTabStrip.current&&("left"===this.props.tabPosition||"right"===this.props.tabPosition)){const e=g.a.findDOMNode(this.refTabStrip.current);if(e instanceof Element&&e.clientHeight<e.scrollHeight){if(this.props.setOverflowClass(!0,this.props.isSubstrip),this.props.switchByScroll){const t=e.getElementsByClassName("tab active")[0];t&&"function"==typeof t.scrollIntoViewIfNeeded&&t.scrollIntoViewIfNeeded()}}else this.props.setOverflowClass(!1,this.props.isSubstrip)}}),Y(this,"maybeSpring",(e,t)=>this.state.animate&&this.props.prefValues[R.kThemeUseAnimation]&&!this.props.isResizing&&this.fitsInView()?Object(B.spring)(e,t):e),Y(this,"fitsInView",M()(1)(()=>"row"===this.props.direction?30*this.props.tabs.size<this.props.maxWidth:30*this.props.tabs.size<this.props.maxHeight)),Y(this,"onCommandSpy",e=>{switch(e){case"COMMAND_FOCUS_TABBAR":Object(F.a)(g.a.findDOMNode(this))||this.moveFocus("","current",!0)}}),Y(this,"accordionIsOpen",e=>!!e&&this.props.openAccordions.some(t=>t.groupId===e)),Y(this,"onWindowStoreChanged",()=>{this.setState({addressBarVisible:C.a.getVisibleUI(this.context.vivaldiWindowId).addressBar})}),Y(this,"moveFocus",(e,t,a)=>{if(!0===a||Object(F.a)(g.a.findDOMNode(this))){let a=[];const n=g.a.findDOMNode(this.refTabStrip.current);if(n instanceof HTMLElement&&(a=Array.from(n.querySelectorAll("div.tab")).map(e=>e.getAttribute("data-id")).filter(Boolean)),0===a.length)return;if("current"===t){if(""===e&&n instanceof HTMLElement){const t=n.getElementsByClassName("tab active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let n=a.indexOf(e);if(-1===n)return;n="right"===t?n+1>=a.length?0:n+1:n<=0?a.length-1:n-1,e=a[n]}if(n instanceof HTMLElement){const t="newtab"===e?n.querySelector("div.toolbar-tabbar button"):n.querySelector(`div.tab[data-id="${e}"]`);t&&(t.focus(),this.setState({highlightedId:e}))}}}),Y(this,"openStackMenu",(e,t)=>{if(this.isTabStackingEnabled()){const a=p.c.getPageById(e);if(a){const e=Object(d.c)(a);if(p.c.isGroup(e,this.context.vivaldiWindowId)){const a=p.c.getGroup(e,this.context.vivaldiWindowId).toArray().map((e,t)=>({url:e.url,handler:()=>h.a.activateTab(e.id,this.context.vivaldiWindowId),...c.a.makeNumberMnemonic(e.title,t)})),n="top"===this.props.tabPosition||"bottom"===this.props.tabPosition?"bottomLeft":"left"===this.props.tabPosition?"topRight":"topLeft";Object(A.a)(this.context.vivaldiWindowId,a,void 0,n,t)()}}}}),Y(this,"handleLeaveBar",()=>{this.setState({highlightedId:""}),l.a.setPaneFocus(!1),s.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),Y(this,"closeAndFreeze",e=>{const t=e instanceof L.List?e:L.List.of(e),a="on"===this.props.prefValues[R.kTabsClosePinned]?t:t.filter(e=>!e.pinned);if(0!==a.size){if(1===a.size){const e=a.first();!e.pinned&&this.props.prefValues[R.kTabsAlignNext]&&this.freezeTabSize(e)}this.props.closePage(a)}}),Y(this,"freezeTabSize",e=>{const t=()=>{this.setState({freeze:null}),this.context.removeEventListener("mousemove",a)},a=e=>{const a=g.a.findDOMNode(this.refTabStrip.current);if(a instanceof Element){const n=a.getBoundingClientRect();(n.left>e.clientX||n.left+n.width<e.clientX||n.top>e.clientY||n.top+n.height<e.clientY)&&t()}},n=e=>{var t;const n=null===(t=this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:this.isTabStackingEnabled(),isThumb:this.props.prefValues[R.kTabsThumbnails]}).children)||void 0===t?void 0:t.filter(e=>"tab"===e.type);if(n){const t=n.findIndex(t=>{var a;return(null===(a=t.tab)||void 0===a?void 0:a.page.id)===e}),l=n[t];if(l){var i,s;let e;e=(null===(i=l.tab)||void 0===i?void 0:i.get("page").active)?n[t+1]:l;const c=null===(s=e.tab)||void 0===s?void 0:s.page.id;var r,o;if(c)this.setState({freeze:{width:(null===(r=e.layout)||void 0===r?void 0:r.width)||this.props.maxWidth,height:(null===(o=l.layout)||void 0===o?void 0:o.height)||this.props.maxHeight,nextId:c}});this.context.addEventListener("mousemove",a)}}},i=this.props.tabs.getIn([-1,"page","id"]);e.id!==i?n(e.id):t()}),Y(this,"handleTouchStart",(e,t,a,n)=>{this.startInternalDragging(n.touches[0],e,t,a)}),Y(this,"handleTouchMove",e=>{e.preventDefault(),this.updateInternalDragging(e.touches[0])}),Y(this,"handleMouseMove",e=>{e.preventDefault(),e.button===u.a.kLeft?this.updateInternalDragging(e):this.cleanupInternalDragging()}),Y(this,"handleMouseUp",e=>{this.cleanupInternalDragging()}),Y(this,"handleMouseDown",(e,t,a,n)=>{const i=n.detail%2==0;if(n.button===u.a.kLeft&&!i){n.preventDefault();C.a.isActive(this.context.vivaldiWindowId);Object(I.a)(n)||(this.props.onActivateTab(e),this.startInternalDragging(n,e,t,a))}}),Y(this,"handleClick",(e,t)=>{const{prefValues:a,isSubstrip:n}=this.props,i=C.a.isActive(this.context.vivaldiWindowId);if(Object(W.b)(t,a[R.kTabsSelectionEnabled],i))h.a.setSelection(e,!1,!1);else if(Object(W.a)(t,a[R.kTabsSelectionEnabled],i))if("accordion"===this.props.prefValues[R.kTabsStackingMode]){h.a.setSelection(e,!0,!1);const t=p.c.getSelectedPages(this.context.vivaldiWindowId),a=Object(d.c)(t.get(0));t.some(e=>a!==Object(d.c)(e))&&h.a.setSelection(e,!0,!0)}else h.a.setSelection(e,!0,!n)}),Y(this,"handleAccordionToggle",(e,t)=>{var a,n;e&&(t?this.setState({animate:!1},()=>{var t,a;null===(t=(a=this.props).handleCompressAccordion)||void 0===t||t.call(a,e),this.allowDelayedAnimation()}):null===(a=(n=this.props).handleExpandAccordion)||void 0===a||a.call(n,e))}),Y(this,"handleMouseUpGuard",e=>{e.button===u.a.kCenter&&(e.preventDefault(),e.stopPropagation())}),Y(this,"handleAuxClick",(e,t)=>{t.button===u.a.kCenter&&(this.closeAndFreeze(e),t.preventDefault(),t.stopPropagation())}),Y(this,"handleDoubleClick",(e,t)=>{t.preventDefault(),t.stopPropagation();const{prefValues:a}=this.props,n=C.a.isActive(this.context.vivaldiWindowId);if(Object(W.b)(t,a[R.kTabsSelectionEnabled],n))h.a.toggleRelatedSelection(e);else if(a[R.kTabsDoubleClickClose])h.a.closePage(e);else if("accordion"===a[R.kTabsStackingMode]){var i,s;null===(i=(s=this.props).toggleAutoExpandAccordion)||void 0===i||i.call(s,Object(d.c)(e))}}),Y(this,"onDragEnterHandler",e=>{if(e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&this.props.isExpectingDrop)return e.preventDefault(),void e.stopPropagation();e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),Y(this,"onDragLeaveHandler",e=>{clearTimeout(this.removeYieldTimeoutId),this.removeYieldTimeoutId=setTimeout(()=>{$(this,ee)&&(this.setState({yieldAfter:null,yieldBefore:null,yieldOver:null}),clearTimeout(this.removeYieldAnimationTimeoutId),this.removeYieldAnimationTimeoutId=setTimeout(()=>{this.state.yieldBefore||this.state.yieldAfter||!$(this,ee)||this.setState({isYielding:!1})},2e3))},200)}),Y(this,"onDragOverHandler",e=>{if(clearTimeout(this.removeYieldTimeoutId),e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&this.props.isExpectingDrop){e.preventDefault(),e.stopPropagation();const t=300;this.removeYieldTimeoutId=setTimeout(()=>{$(this,ee)&&this.setState({yieldAfter:null,yieldBefore:null})},t)}else e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),Y(this,"onDropHandler",e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),a=e.dataTransfer.getData("text/uri-list"),n=e.dataTransfer.getData("text/plain");this.props.isExpectingDrop&&t?this.droppedTabHandler(t):a?a.split("\n").forEach((e,t)=>h.a.openURL(e,{inCurrent:!1,inBackground:t>0})):n&&_.a.go([n],{inCurrent:!1,enableSearch:this.props.prefValues[R.kAddressBarInlineSearchEnabled]})}),Y(this,"droppedTabHandler",t=>{const{yieldOver:a,draggedActive:n}=this.state,i=JSON.parse(t),s=i.ids.map(e=>parseInt(e)).sort((e,t)=>e-t);O.a.tabs.query({},t=>{const r=Object(L.List)(t).filter(e=>s.some(t=>e.id===t)).map(z.b),o=()=>{const t=a&&p.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===a&&!e.pinned);if(t){let e=Object(d.c)(t);const a=this.isTabStackingEnabled()&&p.c.isGroup(e,this.context.vivaldiWindowId),i=t.windowId===r.first().windowId;let s,o,l=new L.List;if(a)s=p.c.getGroup(e,this.context.vivaldiWindowId).first().index,l=p.c.getGroup(e,this.context.vivaldiWindowId).concat(r);else{s=t.index,l=i&&r.first().index<s?l.concat(r).push(t):l.push(t).concat(r),e=p.c.getNewGroupId();const a=n&&Object(d.c)(n);a&&p.c.isGroup(a,this.context.vivaldiWindowId)&&(o=p.c.getTitleByGroupId(a,""))}if(i){let e=0;r.forEach(t=>{t.index<s&&e++}),s-=e}h.a.createTabStack(l,s,e).then(()=>{e&&o&&Object(P.a)(e,o)}),this.maybeResetDragging()}else{const t=()=>e.nextTick(this.maybeResetDragging),a=i.active,n=this.getYieldIndex(s[0]);if(this.props.isSubstrip)if(1===this.props.tabs.size)h.a.createTabStack(this.props.tabs.concat(r),n,p.c.getNewGroupId());else{var o;const e=null===(o=this.props.tabs.first())||void 0===o?void 0:o.page.getIn(["extData","group"]);h.a.moveDroppedTabs(r,a,n,e,this.context.vivaldiWindowId).then(t)}else if("accordion"===this.props.prefValues[R.kTabsStackingMode]){const e=this.props.pages.map(e=>Object(d.c)(e)),s=e.countBy(e=>e),o=r.reduce((e,t)=>e.add(Object(d.c)(t)),new L.Set),l=i.sourceWindow===this.context.vivaldiWindowId,c=e.get(n),u=n+(n<i.activeIndex?-1:1);let m;m=l?c&&this.accordionIsOpen(c)&&e.get(u)===c?c:1===o.size&&s.get(o.first())===r.size?void 0:"":void 0,h.a.moveDroppedTabs(r,a,n,m,this.context.vivaldiWindowId).then(t)}else{const e="main"!==i.dragSource?"":void 0;h.a.moveDroppedTabs(r,a,n,e,this.context.vivaldiWindowId).then(t)}}O.a.windows.update(this.context.vivaldiWindowId,{focused:!0})};this.setState({animate:!1},()=>{o(),this.allowDelayedAnimation()})})}),Y(this,"showSubStack",Object(H.a)(e=>{var t,a;return null===(t=(a=this.props).showSubStack)||void 0===t?void 0:t.call(a,e)},100)),Y(this,"handleTabPosition",(e,t)=>{clearTimeout(this.removeYieldTimeoutId),"before"===t?this.setState({isYielding:!0,yieldBefore:e,yieldAfter:null,yieldOver:null}):"after"===t?this.setState({isYielding:!0,yieldBefore:null,yieldAfter:e,yieldOver:null}):"over"===t?(this.setState({yieldOver:e}),this.props.isSubstrip||this.showSubStack(e)):"none"===t&&(this.setState({yieldBefore:null,yieldAfter:null,yieldOver:null}),clearTimeout(this.expireYieldTimeoutId),this.expireYieldTimeoutId=setTimeout(()=>{if($(this,ee)){const{yieldBefore:e,yieldAfter:t,yieldOver:a}=this.state;e||t||a||this.setState({isYielding:!1})}},1e3))}),Y(this,"setPageIdsHiddenForDrag",e=>{this.setState({pageIdsHiddenForDrag:e})}),Y(this,"windowDragEnterHandler",e=>{e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&(e.preventDefault(),e.stopPropagation(),this.windowDragOverHandler(e))}),Y(this,"windowDragLeaveHandler",e=>{if(e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation(),0===e.pageX&&0===e.pageY&&this.handleTabPosition(-1,"none")}}),Y(this,"windowDragOverHandler",e=>{if(e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation(),this.delayedActivateWindow(e);const{yieldBefore:t,yieldAfter:a,yieldOver:n}=this.state;if(!n&&!t&&!a){const e=this.state.pageIdsHiddenForDrag.first();if(!e||!this.props.pages.some(t=>t.id===e)){const e=this.props.pages.getIn([-1,"id"]);e&&this.handleTabPosition(e,"after")}}}}),Y(this,"windowDropHandler",e=>{const{dataTransfer:t}=e;if(t&&t.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation();const a=t.getData("vivaldi/x-tab-entries"),n=JSON.parse(a),i=n.ids.map(e=>parseInt(e)).sort((e,t)=>e-t);O.a.tabs.query({},t=>{if(t.find(e=>i.includes(e.id)&&e.windowId!==this.context.vivaldiWindowId)){const e=Object(L.List)(t).filter(e=>i.some(t=>e.id===t)).map(z.b);(()=>{h.a.moveDroppedTabs(e,n.active,-1,void 0,this.context.vivaldiWindowId)})()}else{const t=i.map(e=>parseInt(e)).map(e=>p.c.getPages(this.context.vivaldiWindowId).find(t=>t.id===e)).filter(Boolean);if(t.length===p.c.getPages(this.context.vivaldiWindowId).count())return void this.maybeResetDragging();t.length?h.a.detachPage(Object(L.List)(t),e.screenX,e.screenY):(this.maybeResetDragging(),console.warn("Dropped Page(s) does not exist:",i))}})}}),Y(this,"maybeResetDragging",()=>{if(!$(this,ee))return;const{pageIdsHiddenForDrag:e,isYielding:t,yieldOver:a}=this.state;(!e.isEmpty()||t||a)&&this.setState({isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,pageIdsHiddenForDrag:Object(L.Set)()})}),Y(this,"handleEscKey",()=>{this.abortAndRevertDragging()}),Y(this,"abortAndRevertDragging",()=>{this.state.draggedSet.forEach(e=>h.a.moveToIndex(e,e.index)),this.cleanupInternalDragging(),this.maybeResetDragging()}),Y(this,"getYieldIndex",e=>{const{yieldBefore:t,yieldAfter:a,yieldOver:n}=this.state;if(n){const e=p.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===n);return e?e.index:-1}const i=p.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===t||e.id===a);if(!i)return-1;const s=Object(d.c)(i);let r;if(this.isTabStackingEnabled()&&p.c.isGroup(s,this.context.vivaldiWindowId))if("accordion"===this.props.prefValues[R.kTabsStackingMode]&&this.accordionIsOpen(s))r=i.id;else{const e=p.c.getGroup(s,this.context.vivaldiWindowId);r=t?e.first().id:e.last().id}else r=i.id;return p.c.getPages(this.context.vivaldiWindowId).filter(t=>t.id!==e).findIndex(e=>e.id===r)+(a?1:0)}),Y(this,"startInternalDragging",({pageX:e,pageY:t},a,n,i)=>{let s;this.context.addEventListener("touchmove",this.handleTouchMove,!0),this.context.addEventListener("mousemove",this.handleMouseMove,!0),this.context.addEventListener("touchend",this.handleMouseUp,!0),this.context.addEventListener("mouseup",this.handleMouseUp,!0),u.a.setWebviewPointerEvents(!1,this.context.document),o.a.bind("esc",this.handleEscKey);const{isSelecting:r,pageSelection:l,isSubstrip:c}=this.props,m=Object(d.c)(a),h=this.isTabStackingEnabled()&&p.c.isGroup(m,this.context.vivaldiWindowId),b=r&&l.has(a.id),g=this.props.prefValues[R.kTabsStackingMode];s=b?l.reduce((e,t)=>{const a=p.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===t);return a?e.add(a):e},Object(L.Set)()):h&&("substrip"===g&&!c||"accordion"===g&&!this.accordionIsOpen(m))?Object(L.Set)(p.c.getGroup(m,this.context.vivaldiWindowId)):L.Set.of(a),this.setState({draggedActive:a,draggedSet:s,start:[e,t],delta:[e-n,t-i],isScreenshotting:!1,yieldBefore:null,yieldAfter:null})}),Y(this,"updateInternalDragging",e=>{if(this.state.isScreenshotting)return;const{pageX:t,pageY:a}=e,[n,i]=this.state.start;if(!(Math.abs(n-t)>5||Math.abs(i-a)>5))return;const s=this.props.tabs.find(e=>{var t;return(null===(t=this.state.draggedActive)||void 0===t?void 0:t.id)===e.page.id});s&&this.startDrag(s,0,0)}),Y(this,"_getPagesFromDraggedSet",()=>{const e=[];return this.state.draggedSet.forEach(t=>{const a=p.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===t.id);a&&e.push(a)}),e}),Y(this,"getDragImageData",(e,t)=>{const a=document.createElement("canvas"),n=a.getContext("2d");let i;return a.width=200,a.height=27,n.fillStyle=v.a.getSync("BROWSER_COLOR_BG"),function(e,t,a,n){e.beginPath(),e.moveTo(n,0),e.lineTo(t-n,0),e.quadraticCurveTo(t,0,t,n),e.lineTo(t,a-n),e.quadraticCurveTo(t,a,t-n,a),e.lineTo(n,a),e.quadraticCurveTo(0,a,0,a-n),e.lineTo(0,n),e.quadraticCurveTo(0,0,n,0),e.closePath(),e.clip()}(n,200,27,v.a.getSync("BORDER_RADIUS")),n.fill(),n.fillStyle=v.a.getSync("BROWSER_COLOR_FG"),n.font="12px system-ui",n.fillText(t,25,18),e instanceof HTMLImageElement?i=new Promise((t,a)=>{const i=new Image;i.crossOrigin="Anonymous",i.src=e.srcset,i.onload=()=>{n.drawImage(i,6,5,16,16),t(n.getImageData(0,0,200,27))},i.onerror=e=>{console.warn(e),a(e)}}):e instanceof HTMLSpanElement&&(i=new Promise(t=>{const a=URL.createObjectURL(new Blob([e.innerHTML],{type:"image/svg+xml"})),i=new Image;i.onload=()=>{n.drawImage(i,6,5,16,16),t(n.getImageData(0,0,200,27))},i.src=a})),{width:200,height:27,imageDataPromise:i}}),Y(this,"messageDragging",e=>{C.a.isIncognito(this.context.vivaldiWindowId)||C.a.isGuestSession(this.context.vivaldiWindowId)?this.props.setIsExpectingDrop(e):O.a.runtime.sendMessage({dispatchAction:e?j.c:j.a})}),Y(this,"startDrag",async(e,t,a)=>{var n;this.cleanupInternalDragging();const i=this.state.draggedSet.toList(),s=i.find(e=>e.active)||i.first();if(!(g.a.findDOMNode(this.refTabStrip.current)instanceof Element))return;const r=null===(n=this.refTabs.get(e.page.id.toString()))||void 0===n?void 0:n.current;if(!r)return;const o=r.refTab.current,l=o instanceof Element?o.getBoundingClientRect():{left:0,top:0},c=Object(d.c)(s),u=this.isTabStackingEnabled()&&p.c.isGroup(c,this.context.vivaldiWindowId)?4:0,m=r.refFavicon.current,h=l.left,b=l.top-u,{width:N,height:f,imageDataPromise:_}=this.getDragImageData(m,s.title),v=await _;this.setState({isScreenshotting:!0},()=>{this.messageDragging(!0),this.setupDragEndHandler(i),x.a.tabsPrivate.startDrag({mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:i.map(e=>e.id).toJS(),active:s.id,activeIndex:s.index,dragSource:this.props.isSubstrip?"stack":"main",sourceWindow:this.context.vivaldiWindowId}),imageData:null==v?void 0:v.data.buffer,url:s.url,title:s.title,posX:h,posY:b,width:N,height:f,cursorX:t,cursorY:a});const n={yieldBefore:void 0,yieldAfter:void 0},r=this.props.tabs.findIndex(e=>{var t;return(null===(t=this.state.draggedActive)||void 0===t?void 0:t.id)===e.page.id});var o;if(r>0)n.yieldAfter=null===(o=this.props.tabs.get(r-1))||void 0===o?void 0:o.page.id;else if(r<this.props.tabs.size-1){var l;n.yieldBefore=null===(l=this.props.tabs.get(r+1))||void 0===l?void 0:l.page.id}this.setState({...n,pageIdsHiddenForDrag:i.toSet().map(e=>e.id),isDraggingPinnedTab:e.page.pinned})})}),Y(this,"cleanupInternalDragging",()=>{this.context.removeEventListener("touchmove",this.handleTouchMove,!0),this.context.removeEventListener("mousemove",this.handleMouseMove,!0),this.context.removeEventListener("touchend",this.handleMouseUp,!0),this.context.removeEventListener("mouseup",this.handleMouseUp,!0),u.a.setWebviewPointerEvents(!0,this.context.document),o.a.unbind("esc",this.handleEscKey),this.state.draggedActive&&this.state.draggedActive.active&&this.props.prefValues[R.kTabsMinimize]&&h.a.minimizePage(this.context.vivaldiWindowId),$(this,ee)&&this.setState({start:[0,0],delta:[0,0]})}),Y(this,"clearForceHover",()=>{this.setState(e=>e.freeze?{freeze:{...e.freeze,nextId:-1}}:null)}),Y(this,"createFlexBoxLayout",M()(1)((e,t,a,n,i)=>{var s;const r=parseInt(this.props.prefValues[R.kTabsActiveMinSize]),o="row"===t;let l=!this.props.isSubstrip&&(null===(s=e.first())||void 0===s?void 0:s.page.pinned)&&!o&&this.props.prefValues[R.kTabsShowSeparator];const c=this.props.prefValues[R.kTabsStackingMode],u="accordion"===c&&this.props.openAccordions.length>0?e.flatMap(e=>{if("group"===e.type&&this.accordionIsOpen(Object(d.c)(e.page))){const t=e.get("pages"),a=t.size-1;return t.map((e,t)=>new q({type:"accordionTab",page:e,id:e.id,isFirst:0===t,isLast:t===a}))}return[e]}):e,m={style:{flexDirection:t,width:a,height:n},children:u.reduce((e,t)=>{const s=t.page.pinned,u=t.page.active,m=i.tabStackingEnabled&&!this.props.isSubstrip&&"group"===t.type,d=this.getTabStyle(t,o,u,s,m,i.isThumb);i.freeze&&!s&&(d.width=d.maxWidth=d.minWidth=i.freeze.width,d.height=d.maxHeight=d.minHeight=i.freeze.height),u&&!s&&i.freeze&&i.freeze.width<r&&(d.width=d.maxWidth=d.minWidth=r);const h=!m&&i.pageIdsHiddenForDrag.has(t.page.id),p=m&&t.pages.every(e=>i.pageIdsHiddenForDrag.has(e.id));return(h||p)&&(o?d.width=d.maxWidth=d.minWidth=0:d.height=d.maxHeight=d.minHeight=0),l&&!s&&(e.push({type:"separator",style:{...d,maxHeight:20,minHeight:20,height:20}}),l=!1),i.yieldBefore===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,o,u,s,m,i.isThumb)}}),e.push({type:"tab",tab:t,style:d,isFirst:Boolean(t.isFirst),isLast:Boolean(t.isLast)}),"accordion"!==c||!m&&!t.isLast||h||p||e.push({type:"accordionToggle",tab:t,style:{width:o?16:a,height:o?n:16,alignSelf:o?"flex-end":"center"}}),i.yieldAfter===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,o,u,s,m,i.isThumb)}}),e},[]).concat({type:"button",style:{width:30,height:30,alignSelf:o?"flex-end":"center"}})};return k()(m),m})),Y(this,"getTabConfig",(e,t,a,n)=>({key:e.id.toString(),data:{type:"tab",tab:e,zIndex:e.isFirst||e.get("page").active?2:1},style:{x:this.maybeSpring(t.left,J),y:this.maybeSpring(t.top,J),width:t.width,height:t.height}})),Y(this,"getStyles",()=>{const e=this.props.prefValues[R.kTabsThumbnails],t=this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:this.isTabStackingEnabled(),isThumb:e});return t.children?t.children.map((e,t)=>{const{direction:a,tabs:n,isExpectingDrop:i}=this.props,{layout:s,tab:r}=e,o="row"===a;if(!s)return;let l,c;if(i||n.isEmpty()?(l=s.left,c=s.top):(l=this.maybeSpring(s.left,J),c=this.maybeSpring(s.top,J)),isNaN(s.left)||isNaN(s.width)){0;const e=this.state.freeze?this.state.freeze.width:180;s.left=o?t*e:0,s.width=e,s.top=o?0:30*t,s.height=30}switch(e.type){case"tab":return r?this.getTabConfig(r,s,t,a):null;case"blank":return{key:`space-${t}`,data:{type:"space",zIndex:0},style:{x:s.left,y:s.top,width:this.state.isDraggingPinnedTab&&o?31:s.width,height:s.height}};case"button":return{key:"button",data:{type:"button",zIndex:0},style:{x:l,y:c,width:s.width,height:s.height}};case"separator":return{key:"separator",data:{type:"separator",zIndex:0},style:{x:s.left,y:s.top,width:s.width,height:s.height}};case"accordionToggle":return{key:`accordionToggle-${t}`,data:{type:"accordionToggle",tab:r},style:{x:s.left,y:o?0:s.top,width:s.width,height:s.height}};default:console.warn("Unknown Element",e.type)}}).filter(Boolean):[]}),Y(this,"getFavicon",M()(50)((e,t)=>G.p.getFavicon(e,t))),Y(this,"setTabRef",(e,t)=>{const a=n.createRef();a.current=t,this.refTabs.set(e.toString(),a)})}componentDidMount(){this.setOverflowClass(),this.allowDelayedAnimation(),this.windowStoreToken=C.a.addListener(this.onWindowStoreChanged),r.a.addListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.addEventListener("dragenter",this.windowDragEnterHandler),this.context.addEventListener("dragleave",this.windowDragLeaveHandler),this.context.addEventListener("dragover",this.windowDragOverHandler),this.context.addEventListener("drop",this.windowDropHandler),X(this,ee,!0)}componentWillUnmount(){X(this,ee,!1),this.animateTimeoutId&&clearTimeout(this.animateTimeoutId),this.windowStoreToken.remove(),r.a.removeListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.removeEventListener("dragenter",this.windowDragEnterHandler),this.context.removeEventListener("dragleave",this.windowDragLeaveHandler),this.context.removeEventListener("dragover",this.windowDragOverHandler),this.context.removeEventListener("drop",this.windowDropHandler)}componentDidUpdate(e){this.props.tabs===e.tabs&&this.props.maxWidth===e.maxWidth&&this.props.maxHeight===e.maxHeight&&this.props.settings===e.settings||this.setOverflowClass(),this.props.pages!==e.pages&&(this.maybeResetDragging(),this.props.pages.size>e.pages.size&&this.state.freeze&&this.setState({freeze:null}))}isTabStackingEnabled(){return!this.props.isSubstrip&&"off"!==this.props.prefValues[R.kTabsStackingMode]}allowDelayedAnimation(){this.animateTimeoutId=setTimeout(()=>this.setState({animate:!0}),1e3)}delayedActivateWindow({screenX:e,screenY:t}){Q(e,t,250,()=>O.a.windows.update(this.context.vivaldiWindowId,{focused:!0}))}setupDragEndHandler(e){const t=(a,n,i,s)=>{if(x.a.tabsPrivate.onDragEnd.removeListener(t),this.messageDragging(!1),a)this.abortAndRevertDragging();else if(n){if(e.size===p.c.getPages(this.context.vivaldiWindowId).count())return void this.maybeResetDragging();e.size&&h.a.detachPage(e,i,s)}setTimeout(()=>this.maybeResetDragging(),100)};x.a.tabsPrivate.onDragEnd.addListener(t)}getTabStyle(e,t,a,n,i,s){const r={flex:1,zIndex:0},{prefValues:o,isSubstrip:l}=this.props;return t?(r.maxWidth=180,r.maxHeight=150,r.minHeight=a||l?150:30,a&&(r.minWidth=parseInt(o[R.kTabsActiveMinSize])||31),n&&(r.minWidth=31,r.maxWidth=31,r.flex=0)):(r.maxWidth=360,r.maxHeight=30,r.minHeight=30,s&&(r.maxHeight=150),a&&(r.minHeight=30),n&&(r.minHeight=30,r.maxHeight=30,r.flex=0),i&&"off"!==o[R.kTabsStackingMode]&&("dotted"===o[R.kTabsStackingMode]||o[R.kTabsStackingPreferDotted])&&(r.minHeight=37)),r}render(){const e=this.props.prefValues[R.kTabsStackingMode],t=this.isTabStackingEnabled(),a={top:"below",bottom:"above",left:"after",right:"before"}[this.props.tabPosition];const s=this.props.prefValues[R.kThemeUseAnimation]?150:0,r=this.getStyles();return n.createElement(B.TransitionMotion,{ref:this.refTabStrip,styles:r,children:r=>n.createElement("div",{className:"tab-strip",onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,onDoubleClick:this.state.freeze?e=>e.stopPropagation():null,onContextMenu:e=>this.props.onContextMenu(e,this.props.isSubstrip),__source:{fileName:K,lineNumber:1941,columnNumber:11}},r.map((o,l)=>{const{data:c}=o;if(!c)return;const{x:u,y:h}=o.style,b={"--PositionX":`${u}px`,"--PositionY":`${h}px`,"--Opacity":o.style.opacity,"--Height":o.style.height+"px","--Width":o.style.width+"px","--ZIndex":c.zIndex||0};if("tab"===c.type){var g,_;const i=c.tab,m=i.get("page"),C=m.pendingUrl||m.url,w="group"===i.get("type"),O=Boolean(!this.props.prefValues[R.kTabsTooltip]||!this.state.pageIdsHiddenForDrag.isEmpty()||m.isClosing),y=this.props.prefValues[R.kTabsShowCloseButton]&&p.c.canClosePage(m),T=w&&t&&"substrip"===e&&!this.props.prefValues[R.kTabsStackingPreferDotted]&&!this.props.isSubstrip,k=Object(d.c)(m)||"",A=this.state.pageIdsHiddenForDrag.has(m.id),I=(null===(g=this.props.tabs.filter(e=>e.id===k).first())||void 0===g?void 0:g.pages.size)||0,D="accordion"===e&&I>1&&this.accordionIsOpen(k),M=w?i.get("pages"):Object(L.List)(),P=Boolean((null===(_=this.state.freeze)||void 0===_?void 0:_.nextId)===m.id||this.props.prefValues[R.kTabsCloseButtonPermanent]&&o.style.width>66);this.props.isSubstrip&&"column"===this.props.direction&&(b["--Width"]=Math.max(30,this.props.maxWidth)+"px");const x=m.pinned&&!this.state.isDraggingPinnedTab||this.state.isDraggingPinnedTab&&!m.pinned?void 0:this.handleTabPosition,j=this.props.isSubstrip||D,B=m.active&&this.props.isSubstripVisible&&!this.props.isSubstrip?m.id+1e3:m.id;let F=0;if(D&&i.isFirst){let e=0;for(let t=l;t<r.length;t++){var v,E;const a=r[t];if(e===I)break;0===t&&"space"===(null===(v=a.data)||void 0===v?void 0:v.type)||("tab"===(null===(E=a.data)||void 0===E?void 0:E.type)&&(e+=1),F+="row"===this.props.direction?a.style.width:a.style.height)}F>0&&(F+=16)}return(n.createElement(f.a,{key:o.key,id:B,noPadding:this.props.isSubstripVisible&&!this.props.isSubstrip,disabled:O,pointerEvents:t&&w?"auto":"none",placement:a,appearDelay:200,transitionSpeed:s,disappearDelay:t?200:1,content:()=>this.props.getTooltipContent(B,j),__source:{fileName:K,lineNumber:2054,columnNumber:19}},n.createElement("div",{className:S()("tab-position",{"is-substack":T}),style:b,onMouseDown:e=>this.handleMouseDown(m,u,h,e),onMouseUp:e=>this.handleMouseUpGuard(e),onAuxClick:e=>this.handleAuxClick(m,e),onClick:e=>this.handleClick(m,e),onDoubleClick:e=>this.handleDoubleClick(m,e),onTouchStart:e=>this.handleTouchStart(m,u,h,e),__source:{fileName:K,lineNumber:2067,columnNumber:21}},n.createElement(N.a,{key:m.index,ref:e=>e&&this.setTabRef(m.id,e),id:`tab-${o.key}`,pageId:m.id,url:C,active:m.active,acceptsDrop:m.id===this.state.yieldOver,discarded:m.discarded,incognito:m.incognito,pinned:m.pinned,isUnread:p.c.isUnread(m),groupId:k,tilingType:m.getIn(["extData","tiling","type"]),tilingId:Object(d.d)(m)||"",extId:m.getIn(["extData","ext_id"]),faviconUrl:this.getFavicon(C,m.favIconUrl),title:m.title,thumbnail:m.getIn(["extData","thumbnail"]),stack:M,isInsideAccordion:D,isFirstInGroup:i.isFirst,isLastInGroup:i.isLast,isExpectingDrop:this.props.isExpectingDrop,isSelecting:this.props.isSelecting,isStack:!this.props.isSubstrip&&w,isSubstrip:this.props.isSubstrip,isInternalPage:Object(V.p)(m.url),pageSelection:this.props.pageSelection,isHiddenForDrag:A,pageIdsHiddenForDrag:this.state.pageIdsHiddenForDrag,smallTab:o.style.width<=66,miniTab:o.style.width<=30,highlightId:t?m.id:void 0,direction:this.props.direction,settings:this.props.settings,prefValues:this.props.prefValues,tabPosition:this.props.tabPosition,addressBarVisible:this.state.addressBarVisible,highlighted:this.state.highlightedId===`tab-${o.key}`,forceHover:P,clearForceHover:this.clearForceHover,onMoveFocus:this.moveFocus,onStackMenu:this.openStackMenu,onLeaveBar:this.handleLeaveBar,setPageIdsHiddenForDrag:this.setPageIdsHiddenForDrag,closePage:this.closeAndFreeze,onActivate:this.props.onActivateTab,onDragLeave:this.onDragLeaveHandler,droppedTabHandler:this.droppedTabHandler,accordionSize:F,handleTabPosition:x,reopenClosedTab:this.props.reopenClosedTab,shouldShowCloseButton:y,createTab:e=>this.props.createTab(this.props.isSubstrip?"subStrip":"mainStrip",e),handleExpandAccordion:this.props.handleExpandAccordion,handleCompressAccordion:this.props.handleCompressAccordion,__source:{fileName:K,lineNumber:2079,columnNumber:23}}))))}if("space"===c.type)return n.createElement("div",{key:o.key,className:S()({"tab-position":this.props.isSubstrip||!this.state.yieldOver,"tab-yield-space":this.props.isSubstrip||!this.state.yieldOver}),style:b,onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,__source:{fileName:K,lineNumber:2145,columnNumber:19}});if("separator"===c.type)return n.createElement("div",{key:o.key,className:"separator",style:b,__source:{fileName:K,lineNumber:2160,columnNumber:19}},n.createElement("hr",{__source:{fileName:K,lineNumber:2165,columnNumber:21}}));if("accordionToggle"===c.type){const e=c.tab,t=e.get("page"),a=Object(d.c)(t),s=this.accordionIsOpen(a),r=s?"row"===this.props.direction?"left":"up":"row"===this.props.direction?"right":"down";return n.createElement(i.a,{key:o.key,orientation:r,isActive:e.page.active,style:{...b,justifyContent:"center"},onClick:()=>this.handleAccordionToggle(a,s),title:s?Object(w.a)("Reduce Tab Stack"):Object(w.a)("Expand Tab Stack"),__source:{fileName:K,lineNumber:2177,columnNumber:19}})}return"button"!==c.type||this.props.isSubstrip&&!this.props.isSubstripVisible?void 0:n.createElement("div",{key:o.key,className:"toolbar toolbar-tabbar toolbar-large tab-position",__source:{fileName:K,lineNumber:2194,columnNumber:19}},n.createElement(m.a,{id:"newtab",style:{...b,left:o.style.x,top:o.style.y},highlighted:"newtab"===this.state.highlightedId,tabPosition:this.props.tabPosition,onCreateTab:()=>this.props.createTab(this.props.isSubstrip?"subStrip":"mainStrip"),onMoveFocus:this.moveFocus,onLeaveBar:this.handleLeaveBar,__source:{fileName:K,lineNumber:2198,columnNumber:21}}))})),__source:{fileName:K,lineNumber:1937,columnNumber:7}})}}Y(te,"contextType",E.a),t.a=te}).call(this,a(82))},,,,,function(e,t){e.exports='<svg width="84" height="84" viewBox="0 0 84 84" xmlns="http://www.w3.org/2000/svg">\n\n  <path d="M42.2833 9.02699L42 8.97252L41.7168 9.02699L16.5168 13.8731L15.3 14.1071V15.3462V49.2692V49.5802L15.4237 49.8656C20.1281 60.7219 28.8324 69.0402 41.3684 74.8605L42.0004 75.154L42.6324 74.8602C55.1577 69.0377 63.8559 60.7194 68.5592 49.8656L68.6827 49.5806L68.6828 49.27L68.7001 15.3469L68.7007 14.1073L67.4833 13.8731L42.2833 9.02699Z" opacity="var(--shieldOpacity)" />\n  <path fill-opacity="0.1" d="M42 73.5C55.65 67.2 63 58.8 67.2 49.35V15.3398L42 10.5V73.5Z"/>\n  <path d="M42.0001 16.8L23.1001 19.95V48.3C26.4958 56.6664 32.7958 62.6451 42.0001 67.2C51.1918 62.6388 57.4918 56.6664 60.8875 48.3L60.9001 19.95L42.0001 16.8Z" fill-opacity="var(--shieldInnerOpacity)"/>\n  <path fill-rule="evenodd" fill-opacity="0.8" d="M42 7.44503L70.2013 12.8683L70.1825 49.892L69.9355 50.462C65.0597 61.7138 56.0577 70.2735 43.2647 76.2204L42.0008 76.8079L40.7367 76.221C27.933 70.2764 18.9244 61.7167 14.0474 50.462L13.8 49.8913V12.8681L42 7.44503ZM16.8 49.2692V15.3462L42 10.5L67.2001 15.3462L67.1828 49.2692C62.652 59.725 54.2577 67.8019 42 73.5C29.7318 67.804 21.3318 59.7271 16.8 49.2692Z" />\n\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 110 90" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid slice">\n  <g>\n    <path fill="transparent" d="M0 0h110v90h-110z" class="folderoutline"/>\n    <polygon fill="url(#bookmark-graphic-gradient)" class="bookmark-shadow" points="66 30 65 62 55 57 44 64 60 90 98 90" />\n    <g>\n      <use class="bookmark-shape" xlink:href="#sd-bookmark"/>\n      <use fill="url(#sd-bookmark-gradient)" fill-opacity="0.1" xlink:href="#sd-bookmark"/>\n    </g>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg class="ClockGraphic" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n  <circle class="ClockGraphic-Hour-Indicator" r="17" cx="50" cy="50"/>\n  <circle class="ClockGraphic-Minute-Indicator" r="29" cx="50" cy="50"/>\n  <path d="M50 1C50.5523 1 51 1.44772 51 2L51 12C51 12.5523 50.5523 13 50 13C49.4477 13 49 12.5523 49 12L49 2C49 1.44771 49.4477 1 50 1ZM31.5 17.9571C31.0217 18.2332 30.4101 18.0693 30.134 17.591L25.134 8.93078C24.8578 8.45249 25.0217 7.8409 25.5 7.56475C25.9783 7.28861 26.5899 7.45249 26.866 7.93078L31.866 16.591C32.1422 17.0693 31.9783 17.6809 31.5 17.9571ZM12 51C12.5523 51 13 50.5523 13 50C13 49.4477 12.5523 49 12 49L2 49C1.44772 49 1 49.4477 1 50C1 50.5523 1.44772 51 2 51L12 51ZM17.591 69.866C18.0693 69.5899 18.2332 68.9783 17.9571 68.5C17.6809 68.0217 17.0693 67.8578 16.591 68.134L7.93078 73.134C7.45249 73.4101 7.28861 74.0217 7.56475 74.5C7.8409 74.9783 8.45249 75.1422 8.93078 74.866L17.591 69.866ZM51 88C51 87.4477 50.5523 87 50 87C49.4477 87 49 87.4477 49 88L49 98C49 98.5523 49.4477 99 50 99C50.5523 99 51 98.5523 51 98L51 88ZM31.5 82.0429C31.9783 82.3191 32.1422 82.9307 31.866 83.409L26.866 92.0692C26.5899 92.5475 25.9783 92.7114 25.5 92.4352C25.0217 92.1591 24.8578 91.5475 25.134 91.0692L30.134 82.409C30.4101 81.9307 31.0217 81.7668 31.5 82.0429ZM16.591 31.866C17.0693 32.1422 17.6809 31.9783 17.9571 31.5C18.2332 31.0217 18.0693 30.4101 17.591 30.134L8.93078 25.134C8.45249 24.8578 7.8409 25.0217 7.56476 25.5C7.28862 25.9783 7.45249 26.5899 7.93078 26.866L16.591 31.866ZM92.0692 26.866C92.5475 26.5899 92.7114 25.9783 92.4353 25.5C92.1591 25.0217 91.5475 24.8578 91.0692 25.134L82.409 30.134C81.9307 30.4101 81.7668 31.0217 82.0429 31.5C82.3191 31.9783 82.9307 32.1422 83.409 31.866L92.0692 26.866ZM74.5 7.56476C74.9783 7.8409 75.1422 8.45249 74.866 8.93078L69.866 17.591C69.5899 18.0693 68.9783 18.2332 68.5 17.9571C68.0217 17.6809 67.8578 17.0693 68.134 16.591L73.134 7.93078C73.4101 7.45249 74.0217 7.28861 74.5 7.56476ZM98 51C98.5523 51 99 50.5523 99 50C99 49.4477 98.5523 49 98 49L88 49C87.4477 49 87 49.4477 87 50C87 50.5523 87.4477 51 88 51L98 51ZM74.5 92.4352C74.0217 92.7114 73.4101 92.5475 73.134 92.0692L68.134 83.409C67.8578 82.9307 68.0217 82.3191 68.5 82.0429C68.9783 81.7668 69.5899 81.9307 69.866 82.409L74.866 91.0692C75.1422 91.5475 74.9783 92.1591 74.5 92.4352ZM91.0692 74.866C91.5475 75.1422 92.1591 74.9783 92.4352 74.5C92.7114 74.0217 92.5475 73.4101 92.0692 73.134L83.409 68.134C82.9307 67.8578 82.3191 68.0217 82.0429 68.5C81.7668 68.9783 81.9307 69.5899 82.409 69.866L91.0692 74.866Z" />\n  <path class="ClockGraphic-Hour-Hand" d="M71.1642 50.4857C71.6384 50.4918 72 50.4964 72 50C72 49.4925 71.622 49.4955 71.1322 49.4993C71.089 49.4997 71.0448 49.5 71 49.5L52.0706 48.5986C51.621 47.9356 50.8614 47.5 50 47.5C48.6193 47.5 47.5 48.6193 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C50.8621 52.5 51.6222 52.0637 52.0717 51.3998L71 50.4844C71.0559 50.4844 71.1108 50.4851 71.1642 50.4857Z"/>\n  <path class="ClockGraphic-Minute-Hand" d="M50.4858 16.8358C50.4918 16.3616 50.4964 16 50 16C49.4925 16 49.4955 16.378 49.4993 16.8678C49.4997 16.911 49.5 16.9552 49.5 17L48.562 47.9547C47.9196 48.4072 47.5 49.1546 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C51.3807 52.5 52.5 51.3807 52.5 50C52.5 49.1542 52.0799 48.4064 51.437 47.954L50.4844 17C50.4844 16.9441 50.4851 16.8892 50.4858 16.8358Z" />\n  <path class="ClockGraphic-Second-Hand" d="M50.5 6H49.5V47.55C48.3589 47.7816 47.5 48.7905 47.5 50C47.5 51.3807 48.6193 52.5 50 52.5C51.3807 52.5 52.5 51.3807 52.5 50C52.5 48.7905 51.6411 47.7816 50.5 47.55V6Z" />\n  <circle class="ClockGraphic-CenterCutout" cx="50" cy="50" r="1.5" />\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 285">\n  <path d="M123 280.7c-.9-.1-1.6-.3-1.4-1.2 3.2-13.9 4.9-28.3 9.7-41.8.7-2 1.8-3.9 2.8-6-.5-.4-.9-.8-1-.8-34.6 20.6-69.8 21-105.5 4.4C16 229.9 6.6 221 4 208c-3-14.9-4.9-30.2.4-45.1 6-16.7 18.7-26.9 34.7-33.4 18.6-7.6 37.9-10.2 57.9-8 .5.1 1.1 0 1.4-.3 12.6-9.5 26.9-16.1 40.6-23.7 8.6-4.8 15.9-11.5 24.5-16.3.3-.2.6-.5.7-.8 1.8-5.2 6.3-7.3 10.7-9.3 14.6-6.5 29.4-12.8 44-19.4 23-10.4 44.6-23 64.6-38.4 4.3-3.3 9-6.3 13.5-9.3.8.2 1.1.7 1.3 1.6-4.1 2.8-8.3 5.7-12.5 8.6-12.7 8.9-24.9 18.4-38.6 25.7-22.8 12.2-46.6 22.4-70.3 32.7-4.5 2-9.1 3.9-11.1 9.1-.7 1.9-3.1 2.4-4.7 3.6-17 12.8-36.5 21.6-54.5 32.8-7.7 4.8-15 10.3-21.1 17-2.8 3.1-2.3 5.4 1.7 6.7 4.2 1.3 8.3 1.4 12.3-.9 11.3-6.4 23.4-10.5 36-13.2 2.3-.5 4.6-1.5 6.8-2.5 5.9-2.5 11.9-3.5 18.3-3.3 5.3.2 10.6.5 15.9-.2.7-.1 1.4 0 1.5.9.1.9-.4 1.1-1.2 1.2-1.5.1-2.9.5-4.4.5-5.6.1-11.1 0-16.6 0-1.5 7-3.3 15.1 3.5 20.9 4.2 3.6 8.2 7.5 12.8 11.6-.2-8.1 5.3-12.3 10.7-16.6-2.4-3.1-6-4-9.3-2.8-3.1 1.1-6.2 2-9.3 3-.2.1-.5-.1-.7-.1-.6-1.2 0-1.7 1-2.1 3.5-1.2 7-2.3 10.5-3.6 5.4-2 6.7-5.5 4.2-11.2.7-1 1.9-1.2 3-.9 1.5.3 2.2 1.5 2.4 2.9.6 3.6 1.2 7.2 1.8 11.2 2.1-2 3.3-4 4-6.2 1.2-3.9 2.4-7.9 2.3-12 0-.7.3-1.4 1.3-1.4.8 0 1 .7.9 1.3-.7 7.8-1.8 15.3-8.1 21-2.5 2.3-4.8 4.7-7.4 6.7-4.2 3.2-5 8-5.7 12.7-.9 7.1 3.4 12.7 12 16 1.2.5 2.4.9 3 2.4 4.4-1.9 9.2-3 11.8-7.9 2.2-4.2 6.5-6.3 10.4-8.7 5.3-3.4 10.9-6.3 15.9-10.2 2.6-2 5.6-3.2 8.6-4.5 13-5.4 24.5-13 33.9-23.4 5.9-6.5 9.7-14.7 13.4-22.7 3.1-6.9 7-13 14.6-16.3.4.1.7.7.9 1.4-.3.3-.6.6-1 .8-5.8 3.1-9.3 8-12 13.8-2.8 6.2-6.2 12.1-9.7 18-6.3 10.7-16.4 17.1-26.3 23.7-.5.4-1.1.7-1.6.9-.3 4.1.1 7.8 2.2 11.5 2 3.4 1.5 7.2-1 10.3-2.3 2.8-5.5 2.5-8.8 2-5.5-.8-9.9-4.4-14.9-6.4-4.3-1.7-8-2-10.9 2.1 5 6.1 5.5 10 1.9 14.4-3.4 4.1-7.8 3.8-17.1-1.3-4.1 2.2-8.3 4.2-12.9 5.1-9.2 2-17.4-4.2-15.7-13.3 1.5-7.7-2.8-11.1-7.3-15-4.9-4.3-10.5-8.2-10.9-15.6-.1-3.1.5-6.2.8-9.4.1-.6.1-1.2.2-2.2-8.4 1.5-15.7 6.1-24.4 7.1 19.2 12 32 27.3 29.6 51.1 3.7.5 7.2 1 10.8 1.6-.1 1.9-.3 3.6-.4 5.4 5.7 1.9 11.6 2.8 17.5 3.5 10.9 1.5 22 2.3 33 2.4 15.2.1 29.9-2.8 44-8.4 4.2-1.6 8.4-3.5 12.5-5.3 1.1-.4 2.1-.8 3 .3-36 19.5-73.7 17.3-112 9-1.5 2-1.9 4.5-2.5 7.2 40 7.2 79.3 8.6 117.1-10.2.9 1.1 0 1.8-1.1 2.4-8.4 4.7-17.5 7.3-26.7 9.8-18.6 5-37.5 5.5-56.6 4.2-10.6-.7-21-2.1-31.4-4h-.7c-.6 1.3-1.1 2.5-1.7 3.7-3.7-.5-7.2-1-10.8-1.5-.4.7-.7 1.2-1.2 2 1.9.6 3.7 1.2 5.4 1.8 2.3.9 3.2 2.7 2 4.9-3.4 6.4-6.8 12.8-10.4 19-1.3 2.3-3.2 4.2-4.9 6.4-1.5-.6-3.1-1.1-4.7-1.8-6.3 14.7-7.3 31-13.1 45.8 3.7-16.1 5.7-32.6 12-48.2 1.6.6 3.1 1.2 4.7 1.8-.2-1.2 0-2.3-1-3.1-.8-.6-1.6-1.3-2.5-2 .7-1.6 1.2-3.2 2-4.6.4-.7.9-2 1.9-1.7 1.8.5 3.3 1.6 4.1 3.4.2.5.3 1.1.6 2.2 3.4-6.4 6.6-12.3 9.7-18.4.6-1.1-.4-1.8-1.5-2.2-4.5-1.4-9-3.3-13.7-3.9-4.2 3.1-4.8 9.1-1 11.3-.9 1.4-1.7 2.8-2.7 4.3 1.1.6 2.1 1.1 3.4 1.7-1.3 2.3-2.6 4.6-3.9 7-1.3-.7-2.3-1.4-3.4-2-1.2 1.1-1.2 1.1 1.9 5.2-8.1 15.4-8.3 32.9-13.1 49.3zM92.4 125.6c-10.7-1.2-21-.7-31.2 1.2-14.7 2.7-28.3 7.9-39.5 18.3-13.2 12.2-15 28.9-4.6 42.4 7.5 9.6 17.6 15.4 28.9 19.4 17.5 6.2 35.5 7.3 53.7 4.2 14.8-2.4 28.5-7.7 40-17.8 10.8-9.4 14.9-22.8 10.1-34.7-5-12.5-15.3-19.6-26.9-25.1-.5-.2-1.3.1-1.9.2-7.5 2.3-14.5 5.6-21.4 9.3-4.8 2.6-9.8 1.9-14.5 0-3.7-1.5-4.5-5.4-2-8.4 2.7-3.2 5.8-6 9.3-9zm57.7 76.8c-1.8-.9-4.3.5-5.1-1.6-.9-2.7-1.9-5.5.6-8.2 1.8-1.9 3.3-4.3 4.6-6.6 1.4-2.5 1.9-5.9 6.1-3.7.3-9.6.1-18.7-5.4-26.8 2.8 6.4 4 12.9 2.3 19.8-3.1 12.8-11.8 21.2-22.7 27.4-19.7 11.1-41 14.1-63.2 11.4-17.2-2.1-33.1-7.4-46.4-19.2-11.9-10.5-15.8-25-10-38.3 1.1-2.6 2.8-5.1 4.6-8.4-4.5 5.2-7.4 10.4-9.5 16.1-3.4 9.3-2.4 18.9-2 28.4.3 5.6.3 11.3 2.2 16.7 3.9 11 11.6 18.7 21.7 23.8 25 12.6 51.3 14.7 78.3 7.6 9.2-2.4 17.8-6.5 23.9-11 3.2-5.5 5.4-9.4 7.7-13.3-1-.4-1.8-1-1.8-2-.2-4 .2-7.8 2.6-11.2.7-.9 1.5-1.8 2.9-1.4 2.5.7 5 1.4 7.6 2.2.4-.8.7-1.2 1-1.7zm72.3-46.3c.7.2 1.5.6 2.3.8 5.4 1.3 9.6 5.4 15.2 6.5 5.4 1.1 8.7-.6 8.8-5.2.1-4.5-2.3-8-5.1-11.2-.8-.9-2-1.8-3.6-1.2-6.5 2.3-12.4 5.8-17.6 10.3zm-55.5 29.4c-4.6-.6-8.9-1.2-13.2-1.8-1.4 4-4.2 7-6.6 10.4 5.1.7 10 1.3 14.9 2 1.6-3.6 3.2-7 4.9-10.6zm33.9-12.6c5.6 4.4 11.5 4.8 14 1.1 2.8-4.2 1.6-8.8-3.2-11.7-4.4 2.6-8.8 5.4-10.8 10.6zm-39.4 25c-5.2-.7-10.3-1.4-15.6-2.2.4 1.5.7 2.8.9 4.1 5 .7 9.8 1.3 14.7 2v-3.9zm11.1-31.6c-.9 3.9.8 7.3 4.3 9.8 3 2.2 6.2 2.2 10.4.9-6.6-1.9-11.2-5.5-14.7-10.7zm6.5-31.5c1.9 1.2 3.6 2.3 6.2 3.8-1.4-3.8-1.8-7.1-2.3-10.5-1.4 4.4-1.4 4.4-3.9 6.7z"/>\n  <path d="M80.9 151.5c2.8 0 6.7.8 10.2 3 5.4 3.4 5.6 8.8.3 12.4-6.5 4.4-17.8 4.2-24.1-.4-4.5-3.3-4.5-8.1 0-11.4 3.1-2.4 7.3-3.6 13.6-3.6zM79.4 166c3.1 0 5.5-.6 7.4-1.8 3.4-2.1 3.6-5.4.5-7.6-4.1-3-11.6-2.9-15.7.1-2.8 2.1-2.8 5.2.1 7.2 2.4 1.5 5 2.1 7.7 2.1zm-25.7 2.1c-1.2-.1-2.7-.3-2.6-1.7 0-1.5 1.6-1.7 2.8-1.6 1.2 0 2.8.1 2.7 1.8-.2 1.5-1.7 1.4-2.9 1.5zm1.9-12.5c-1.5 0-2.9-.1-3-1.6 0-1.6 1.5-1.7 2.7-1.7 1.2 0 2.8.2 2.7 1.7.1 1.6-1.5 1.5-2.4 1.6zm11.4 22c-1.4 0-3 0-3-1.6 0-1.4 1.5-1.6 2.7-1.6 1.2 0 2.8 0 2.9 1.5.1 1.7-1.5 1.7-2.6 1.7z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M11.14 2L9 6h8a7.68 7.68 0 0 0-5.86-4zm-.47 3l1-1.9A6.65 6.65 0 0 1 15 5z" stroke-opacity="0" />\n  <path d="M17.45 7H13l3.92 7a8.15 8.15 0 0 0 .52-7zm-.66 4.71L14.71 8h2a7.18 7.18 0 0 1 .06 3.71zM13.69 11L10 18h.08A7.37 7.37 0 0 0 16 15zm-1.91 5.77l2-3.71 1.06 1.83a6.38 6.38 0 0 1-3.07 1.88zM3 14a7.68 7.68 0 0 0 5.86 4L11 14zm5.32 2.9A6.66 6.66 0 0 1 5 15h4.33zM5.41 10.17L3.08 6a8.12 8.12 0 0 0-.52 7H7zM3.27 12a7.14 7.14 0 0 1-.06-3.71L5.29 12zM9.92 2A7.37 7.37 0 0 0 4 5l2.31 4L10 2zM6.27 6.93L5.21 5.1a6.38 6.38 0 0 1 3-1.88z" stroke-opacity="0" />\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#00AA55" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M9.43 10.879L13.524 6l2.298 1.928-6.024 7.19L5 11.082l1.928-2.298z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#AA0055" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M5 7l2 -2l3 3l3 -3l2 2l-3 3l3 3l-2 2l-3 -3l-3 3l-2 -2l3 -3z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <circle fill="#dddd55" cx="10" cy="10" r="10"/>\n    <path fill="#FFF" d="M9.43 10.879L13.524 6l2.298 1.928-6.024 7.19L5 11.082l1.928-2.298z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5 5 C5 0 15 0 15 5 C15 8 11 9 11 11 L11 14 C11 15 9 15 9 14 L9 10 C9 8 13 7 13 5 C13 3 7 3 7 5 C7 6 5 6 5 5z"/>>\n    <circle cx="10" cy="17" r="1"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.02555 3.6815L9.02548 3.68157L7.35355 5.3535C7.15829 5.54876 6.84171 5.54876 6.64645 5.3535C6.45118 5.15824 6.45118 4.84165 6.64645 4.64639L8.31845 2.97439L8.31852 2.97432C8.94279 2.3503 9.78933 1.99976 10.672 1.99976C11.5547 1.99976 12.4012 2.3503 13.0255 2.97432L12.672 3.32795L13.0256 2.97446C13.6496 3.59873 14.0002 4.44527 14.0002 5.32795C14.0002 6.21062 13.6496 7.05716 13.0256 7.68143L13.0256 7.6815L11.3536 9.3535C11.1583 9.54876 10.8417 9.54876 10.6464 9.3535C10.4512 9.15824 10.4512 8.84165 10.6464 8.64639L12.3184 6.97446L12.3184 6.97439C12.755 6.53765 13.0002 5.94544 13.0002 5.32795C13.0002 4.71049 12.755 4.1183 12.3185 3.68157C11.8818 3.245 11.2895 2.99976 10.672 2.99976C10.0545 2.99976 9.46229 3.24498 9.02555 3.6815ZM10.8536 5.14645C11.0488 5.34171 11.0488 5.65829 10.8536 5.85355L5.85355 10.8536C5.65829 11.0488 5.34171 11.0488 5.14645 10.8536C4.95118 10.6583 4.95118 10.3417 5.14645 10.1464L10.1464 5.14645C10.3417 4.95118 10.6583 4.95118 10.8536 5.14645ZM5.3535 7.35355C5.54876 7.15829 5.54876 6.84171 5.3535 6.64645C5.15824 6.45118 4.84165 6.45118 4.64639 6.64645L2.97439 8.31845L2.97432 8.31852C2.3503 8.94279 1.99976 9.78933 1.99976 10.672C1.99976 11.5547 2.3503 12.4012 2.97432 13.0255L3.32795 12.672L2.97446 13.0256C3.59873 13.6496 4.44527 14.0002 5.32795 14.0002C6.21062 14.0002 7.05716 13.6496 7.68143 13.0256L7.6815 13.0256L9.3535 11.3536C9.54876 11.1583 9.54876 10.8417 9.3535 10.6464C9.15824 10.4512 8.84165 10.4512 8.64639 10.6464L6.97446 12.3184L6.97439 12.3184C6.53765 12.755 5.94544 13.0002 5.32795 13.0002C4.71049 13.0002 4.1183 12.755 3.68157 12.3185C3.245 11.8818 2.99976 11.2895 2.99976 10.672C2.99976 10.0545 3.24498 9.46229 3.6815 9.02555L3.68157 9.02548L5.3535 7.35355Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11v1.857S2 14 3.077 14h9.846S14 14 14 12.857V11h-1v1.857c0 .064-.007.1-.012.12A.289.289 0 0112.9 13H3.077c-.017 0-.03 0-.04-.002A.485.485 0 013 12.841V11H2z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 8H4.762L8 10.698 11.238 8H9V3H7v5zm7-1l-6 5-6-5h4V3a1 1 0 011-1h2a1 1 0 011 1v4h4z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 4C7.22386 4 7 4.22386 7 4.5V7.5C7 7.70662 7.12533 7.88397 7.30412 7.96017C7.3329 8.02199 7.37279 8.07992 7.42381 8.13093L8.7304 9.43752C8.96449 9.67161 9.34402 9.67161 9.5781 9.43752C9.81219 9.20344 9.81219 8.82391 9.5781 8.58982L8.27151 7.28323C8.19356 7.20527 8.09947 7.15328 8 7.12725V4.5C8 4.22386 7.77614 4 7.5 4Z"/>\n  <path fill-rule="evenodd" d="M13 7.5C13 10.5376 10.5376 13 7.5 13C4.46243 13 2 10.5376 2 7.5C2 4.4624 4.46243 2 7.5 2C10.5376 2 13 4.4624 13 7.5ZM12 7.5C12 9.98535 9.98528 12 7.5 12C5.01472 12 3 9.98535 3 7.5C3 5.01465 5.01472 3 7.5 3C9.98528 3 12 5.01465 12 7.5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 11c2.652 0 4.854-1.276 5.872-3C12.854 6.276 10.652 5 8 5 5.344 5 3.14 6.28 2.123 8.007 3.132 9.777 5.325 11 8 11zm0 1c-3.181 0-5.918-1.572-7-4 1.082-2.346 3.819-4 7-4s5.918 1.654 7 4c-1.082 2.346-3.819 4-7 4zm1-4a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="trackers" opacity="var(--trackers)" fill-opacity="0.7" d="M8 4l-3 .5v4.5c.539 1.328 1.539 2.277 3 3 1.459-.724 2.459-1.672 2.998-3l.002-4.5z"/>\n  <path class="ads" opacity="var(--ads)" fill-opacity="0.6" d="M2.5 2.5l5.5-1 5.5 1v7l-2.5 3.5-3 1.5-3-1.5-2.5-3.5z"/>\n  <path class="blocking" opacity="var(--blocking)" d="M5.227 7.621l2.773-4.621.031 4h2.527c.138 0 .25.112.25.25l-.036.129-2.773 4.621v-4h-2.558c-.138 0-.25-.112-.25-.25l.036-.129z"/>\n  <g>\n    <path class="outline" d="M8 1l6 1.077-.004 7.538c-1.079 2.324-3.077 4.118-5.996 5.385-2.799-1.213-4.753-2.912-5.86-5.097l-.14-.288v-7.538zm0 1l-5 .923v6.462c.899 1.992 2.566 3.53 5 4.615 2.432-1.085 4.098-2.624 4.997-4.615l.003-6.462z"/>\n    <path d="m8 14c2.432-1.085 4.098-2.624 4.997-4.615l.003-6.462-5-.923z" fill-opacity="0.2"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <clipPath id="addBookmarkPath">\n      <path fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54419 14.4435 4 14.2216 4 13.7734V2C4 1.44775 4.44771 1 5 1H11C11.5523 1 12 1.44775 12 2V13.7734C12 14.2216 11.4558 14.4435 11.1425 14.123Z"/>\n    </clipPath>\n  </defs>\n  <g clip-path="url(#addBookmarkPath)">\n    <path class="bookmark-animated-fill" fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54419 14.4435 4 14.2216 4 13.7734V2C4 1.44775 4.44771 1 5 1H11C11.5523 1 12 1.44775 12 2V13.7734C12 14.2216 11.4558 14.4435 11.1425 14.123Z"/>\n    <path class="bookmark-outline" fill-rule="evenodd" d="M11.1425 14.123L8 10.9091L4.8575 14.123C4.54418 14.4434 4 14.2216 4 13.7734V2C4 1.44772 4.44772 1 5 1H11C11.5523 1 12 1.44772 12 2V13.7734C12 14.2216 11.4558 14.4434 11.1425 14.123ZM8 9.47872L5 12.5469V2L11 2V12.5469L8 9.47872Z"/>\n    <path class="add-bookmark-shadow" d="M8 2H11V12.55L8 9.47656V2Z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n      <path d="M12.6 7C9.507 7 7 9.506 7 12.6h1.6c0-2.206 1.794-4 4-4s4 1.794 4 4-1.794 4-4 4c-1.29 0-2.425-.623-3.157-1.573H7.56c.905 1.875 2.818 3.172 5.04 3.172 3.093 0 5.6-2.508 5.6-5.6 0-3.094-2.507-5.6-5.6-5.6"/>\n      <path d="M13 13H7V7l6 6z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 34">\n  <path d="M40.5 32.5H3.7c-1.1 0-2-.9-2-2v-23c0-1.1.9-2 2-2h36.8c1.1 0 2 .9 2 2v23c0 1.1-.9 2-2 2z" fill-opacity="0" />\n  <circle cx="20" cy="20" r="9.5" fill="none" stroke-width="1.1" />\n  <circle cx="20" cy="20" r="5.5" fill="none" stroke-width="1.1" />\n  <path d="M37.5 8.5h-4c-1.1 0-2 .9-2 2s.9 2 2 2h4c1.1 0 2-.9 2-2s-.9-2-2-2z" />\n  <circle cx="7" cy="10" r="1.5" />\n  <path d="M11 1h5c2 0 3 1 3 3v1H8V4c0-2 1-3 3-3z" />\n</svg>\n'},function(e,t){e.exports='<svg width="11" height="6" viewBox="0 0 11 6" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.5.133l.11-.11 4.456 4.456-1.498 1.497L5.5 2.91 2.432 5.976.934 4.48 5.39.022l.11.11z" />\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.5 3L3 4.5 6.5 8 3 11.5 4.414 13 9.5 8l-5-5zm5 0L8 4.5 11.5 8 8 11.5 9.414 13 14.5 8l-5-5z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M24 14a1 1 0 00-1 1v8h-8a1 1 0 100 2h8v8a1 1 0 102 0v-8h8a1 1 0 100-2h-8v-8a1 1 0 00-1-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13 5l3 2.5-3 2.5v-5zM0 4h11v1h-11zM0 6h11v1h-11zM0 8h11v1h-11zM0 10h7v1h-7z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15 10l-3-2.5 3-2.5v5zM3 4h7v1h-7zM3 6h7v1h-7zM3 8h7v1h-7zM3 10h4v1h-4z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path d="M3.88 2.5h-.69v2.75h1.37V3.91A8.21 8.21 0 0 1 9.2 5.83l-.95.95 1 1 .95-.95a8.21 8.21 0 0 1 1.92 4.63h-1.37v1.38h2.75v-.69A9.64 9.64 0 0 0 3.88 2.5z"/>\n  <path d="M8.28 8.69l-1-1-1.83 1.89a2 2 0 0 0-.88-.21 2.06 2.06 0 1 0 2.06 2.06 2 2 0 0 0-.21-.88z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 9C14.1046 9 15 8.10457 15 7C15 5.89543 14.1046 5 13 5C11.8954 5 11 5.89543 11 7C11 8.10457 11.8954 9 13 9Z"/>\n  <path d="M13 15C14.1046 15 15 14.1046 15 13C15 11.8954 14.1046 11 13 11C11.8954 11 11 11.8954 11 13C11 14.1046 11.8954 15 13 15Z"/>\n  <path d="M15 19C15 20.1046 14.1046 21 13 21C11.8954 21 11 20.1046 11 19C11 17.8954 11.8954 17 13 17C14.1046 17 15 17.8954 15 19Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L8 6.58579L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L9.41421 8L11.7071 10.2929C12.0976 10.6834 12.0976 11.3166 11.7071 11.7071C11.3166 12.0976 10.6834 12.0976 10.2929 11.7071L8 9.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L6.58579 8L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289Z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path d="M13.89 6.23l-2.79.93a4.16 4.16 0 0 1 0 5.22l3 1.18a6.94 6.94 0 0 0-.12-7.34z" fill-opacity="0" />\n  <path d="M15 13.94a7.93 7.93 0 0 0-.09-8L17.66 5l-.32-1-3.07 1-1 .34-3 1-1.23.41-4.11 1.41-1.25.42L1 9.46l2.53 1 1.16.46 4.39 1.76 1.16.46 3.15 1.26 1 .38L17.31 16l.37-.93zM4.5 9.76a3.2 3.2 0 0 1 0-.4l5.58-1.86a3.23 3.23 0 0 1 0 4.5zm6.56 2.62a4.16 4.16 0 0 0 0-5.22l2.79-.93a6.94 6.94 0 0 1 .15 7.34z" stroke-opacity="0" />\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <path stroke-opacity="0" d="M18 5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zM4.29 13.12H3V6.9h1.29zm5.41-.4a2.78 2.78 0 0 1-1.86.56 3 3 0 0 1-1.93-.55 1.84 1.84 0 0 1-.7-1.53h1.23a1.26 1.26 0 0 0 .24.64 1.38 1.38 0 0 0 1.11.38 2.39 2.39 0 0 0 .76-.1.72.72 0 0 0 .56-.72.53.53 0 0 0-.27-.48 3 3 0 0 0-.84-.29l-.67-.15a4.19 4.19 0 0 1-1.4-.48 1.52 1.52 0 0 1-.63-1.34 1.79 1.79 0 0 1 .61-1.39 2.62 2.62 0 0 1 1.81-.55 2.77 2.77 0 0 1 1.7.52 1.85 1.85 0 0 1 .74 1.51H8.91a.89.89 0 0 0-.5-.8 1.72 1.72 0 0 0-.77-.16 1.47 1.47 0 0 0-.82.2.64.64 0 0 0-.31.57.53.53 0 0 0 .3.5 3.76 3.76 0 0 0 .83.26l1.09.26A2.77 2.77 0 0 1 9.8 10a1.52 1.52 0 0 1 .56 1.27 1.78 1.78 0 0 1-.66 1.45zm6.36-.15a2.71 2.71 0 0 1-2 .73 2.71 2.71 0 0 1-2-.73A3.36 3.36 0 0 1 11 10a3.29 3.29 0 0 1 1-2.57 2.71 2.71 0 0 1 2-.73 2.71 2.71 0 0 1 2 .73A3.3 3.3 0 0 1 17 10a3.36 3.36 0 0 1-.94 2.57z"/>\n  <path stroke-opacity="0" d="M14 7.81a1.5 1.5 0 0 0-1.23.57 2.52 2.52 0 0 0-.44 1.62 2.52 2.52 0 0 0 .46 1.62 1.5 1.5 0 0 0 1.23.57 1.48 1.48 0 0 0 1.23-.57A2.55 2.55 0 0 0 15.7 10a2.55 2.55 0 0 0-.45-1.62A1.48 1.48 0 0 0 14 7.81z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 14l2.5-3 2.5 3h-5zM10.5 1l-2.5 3-2.5-3h5zM2 5h12v1h-12zM2 7h12v1h-12zM2 9h12v1h-12z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 3l2.5-3 2.5 3h-5zM10 12l-2.5 3-2.5-3h5zM2 4h11v1h-11zM2 7h11v1h-11zM2 10h11v1h-11z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4.5 11C5.38054 11 6.20201 10.7471 6.89574 10.31L10.2929 13.7071C10.6834 14.0976 11.3166 14.0976 11.7071 13.7071C12.0976 13.3166 12.0976 12.6834 11.7071 12.2929L8.30995 8.89574C8.74709 8.20201 9 7.38054 9 6.5C9 4.01472 6.98528 2 4.5 2C2.01472 2 0 4.01472 0 6.5C0 8.98528 2.01472 11 4.5 11ZM4.5 9C5.88071 9 7 7.88071 7 6.5C7 5.11929 5.88071 4 4.5 4C3.11929 4 2 5.11929 2 6.5C2 7.88071 3.11929 9 4.5 9Z"/>\n  <path d="M13 8L14.9757 6.02426C15.3537 5.64629 15.086 5 14.5515 5H11.4485C10.914 5 10.6463 5.64629 11.0243 6.02426L13 8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 11V7a1 1 0 011-1h1a2 2 0 002-2h4c0 1.1.9 2 2 2h1a1 1 0 011 1v4a1 1 0 01-1 1H3a1 1 0 01-1-1zM1 7v4c0 1.1.9 2 2 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1a1 1 0 01-1-1 1 1 0 00-1-1H6a1 1 0 00-1 1 1 1 0 01-1 1H3a2 2 0 00-2 2zm8 2a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>'},function(e,t){e.exports='<svg class="first-new-note-icon" width="46" height="46">\n  <path class="new-note-border-color" d="M37 46H1a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H2v34h34V29a1 1 0 1 1 2 0v16a1 1 0 0 1-1 1z"/>\n  <path class="new-note-wood-tip" d="M21.707 33.707L20.958 25l-8.665-.707-.754 6.246 3.922 3.922z"/>\n  <path class="new-note-main-color" d="M31.293 5.293l-19 19 5.457 5.457 18.906-19.094z"/>\n  <path class="new-note-secondary-color" d="M17 29l19-19 4.708 4.707-19 19z"/>\n  <path class="new-note-darker-top-eraser" d="M40.7,14.7l5-5c0.4-0.4,0.4-1,0-1.4L42.4,5l-5.8,5.6L40.7,14.7z"/>\n  <path class="new-note-dark-top-eraser" d="M45.707 8.293l-8-8a1 1 0 0 0-1.414 0l-5 5 9.414 9.414 5-5a1 1 0 0 0 0-1.414z"/>\n  <path class="new-note-dark-top-border" d="M30.586 6L32 4.586 41.414 14 40 15.414z"/>\n  <path class="new-note-led-tip" d="M15.5,34.5l-3.9-3.9L11,35L15.5,34.5z"/>\n</svg>'},function(e,t){e.exports='<svg version="1.1" viewBox="0 0 16 16" height="16" width="16" class="note-icon" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="9.5,8.5 9.5,14.9 11.5,13.3 13.5,14.9 13.5,8.5 "/>\n  <path stroke-opacity="0" d="M8,14c-1.6,0-3.4,0-5,0c0-3.7,0-8.3,0-12h10c0,1.3,0,3.7,0,5H8V14z"/>\n  <path fill-opacity="0" d="M8,13.5c-1.6,0-2.9,0-4.5,0c0-3.7,0-7.3,0-11h9c0,1.3,0,3.2,0,4.5"/>\n  <line fill-opacity="0" stroke-width="2" x1="4" y1="3" x2="12" y2="3"/>\n  <line fill-opacity="0" x1="5" y1="6.5" x2="11" y2="6.5"/>\n  <line fill-opacity="0" x1="5" y1="8.5" x2="8" y2="8.5"/>\n  <line fill-opacity="0" x1="5" y1="10.5" x2="8" y2="10.5"/>\n</svg>\n'},function(e,t){e.exports='<svg version="1.1" viewBox="0 0 16 16" height="16" width="16" class="note-icon" xmlns="http://www.w3.org/2000/svg">\n\t<rect x="3.5" y="2.5" width="9" height="11" rx="0.1" ry="0.1" />\n\t<line fill-opacity="0" stroke-width="2" x1="4" y1="3" x2="12" y2="3"/>\n\t<line fill-opacity="0" x1="5" y1="6.5" x2="11" y2="6.5"/>\n\t<line fill-opacity="0" x1="5" y1="8.5" x2="11" y2="8.5"/>\n\t<line fill-opacity="0" x1="5" y1="10.5" x2="11" y2="10.5"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n    <path stroke-width="0" fill-rule="evenodd" d="M5 3h6c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 1H5v2h6V4z"/>\n    <path stroke-width="0" d="M5 10a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM7 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0zM11 10a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM4 12a1 1 0 1 0 2 0 1 1 0 0 0-2 0zM8 11h3a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2z"/>\n    <path stroke-width="0" fill-rule="evenodd" d="M4 1a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H4zm8 1H4a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h8c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M14 6V2h-4c0-1.1-.9-2-2-2S6 .9 6 2H2v4c1.1 0 2 .9 2 2s-.9 2-2 2v4h4c0-1.1.9-2 2-2s2 .9 2 2h4v-4c1.1 0 2-.9 2-2s-.9-2-2-2z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <circle cx="7.5" cy="7.5" r="4.5" fill-opacity="0.1"/>\n  <path d="M7.5 3C10 3 12 5 12 7.5S10 12 7.5 12 3 10 3 7.5 5 3 7.5 3m0-1C4.5 2 2 4.5 2 7.5S4.5 13 7.5 13 13 10.5 13 7.5 10.5 2 7.5 2z" fill-opacity="0.3"/>\n  <path d="M8 7V0H7v7H0v1h7v7h1V8h7V7H8zm0 0v1H7V7h1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14 9H13V10H12V9V11H11V9H8V11H2L2 5H8V7L14 7V9ZM4 7V9H6V7H4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 4h10v1H3zM3 6h10v1H3zM3 8h10v1H3zM3 10h6v1H3z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 8h14v1h-14zM1 6h14v1h-14zM1 4h14v1h-14zM1 10h8v1h-8z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 1h1v8h-1zM7 1h1v14h-1zM9 1h1v14h-1zM11 1h1v14h-1z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n  <circle cx="10" cy="10" r="8" fill="none" stroke-width="1.1" />\n  <circle cx="10" cy="10" r="1.5" fill="none" />\n  <path d="M11.48 10.483l3.537 3.535-.955.955-3.535-3.536zM15.495 1.494l3.02 3.02-1.5 1.498-3.02-3.02z"/>\n</svg>\n'},function(e,t){e.exports='<svg class="add-speeddial-large-plus" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n  <path d="M34 30V0h-4v30H0v4h30v30h4V34h30v-4"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <polygon points="5 3 5 0 3 0 3 3 0 3 0 5 3 5 3 8 5 8 5 5 8 5 8 3" />\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="0 3 0 5 8 5 8 3" />\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 110 90" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">\n  <g>\n    <path class="folderoutline" fill="url(#sd-folder-gradient)" d="M0 0h110v90h-110z" />\n    <path class="folder-tab-color" d="M44 2.011c1.1-.011 2.2 1.989 3.3 1.989h62.7v-4l-110 .018v1.993s43.703.003 44 0z" />\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 110 4" xmlns="http://www.w3.org/2000/svg">\n  <path d="M44 2.011c1.1-.011 2.2 1.989 3.3 1.989h62.7v-4l-110 .018v1.993s43.703.003 44 0z" class="folder-tab-color"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 5h2v2h-2z"/>\n  <path fill-opacity=".35" d="M5 1h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm8 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2zm-12 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 0h2v2h-2v-2z"/>\n  <path fill-opacity=".1" d="M5 5h-4v10h10v-4h4v-10h-10z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 15A7 7 0 108 1a7 7 0 000 14zM8 4a1 1 0 100 2 1 1 0 000-2zm0 3a1 1 0 00-1 1v3a1 1 0 102 0V8a1 1 0 00-1-1z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M.784 13.53L7.118 1.653a1 1 0 011.764 0l6.334 11.875A1 1 0 0114.333 15H1.667a1 1 0 01-.883-1.47zm5.799-7.705A.75.75 0 017.329 5H8.67a.75.75 0 01.747.825l-.35 3.5A.75.75 0 018.32 10H7.68a.75.75 0 01-.746-.675l-.35-3.5zM7 11.75a.75.75 0 01.75-.75h.5a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75v-.5z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 1.288a1 1 0 00-1 0L2.5 4.461a1 1 0 00-.5.867v6.344a1 1 0 00.5.867L8 15.712a1 1 0 001 0l5.5-3.173a1 1 0 00.5-.867V5.328a1 1 0 00-.5-.867L9 1.288zM7.004 5.825A.75.75 0 017.75 5h1.343a.75.75 0 01.746.825l-.35 3.5a.75.75 0 01-.746.675H8.1a.75.75 0 01-.746-.675l-.35-3.5zm.417 5.925a.75.75 0 01.75-.75h.5a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75v-.5z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.125 2.344a7 7 0 101.44 1.408L7.918 11.03a1 1 0 01-1.44.147.998.998 0 01-.345-.288L4.32 8.499A1 1 0 115.913 7.29l1.175 1.548 5.037-6.494z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="208" height="128" viewBox="0 0 208 128">\n\t<rect fill="none" stroke-width="10" width="198" height="118" x="5" y="5" ry="10" />\n\t<path stroke-width="0" d="m 30,98 0,-68 20,0 20,25 20,-25 20,0 0,68 -20,0 0,-39 -20,25 -20,-25 0,39 z" />\n\t<path stroke-width="0" d="m 155,98 -30,-33 20,0 0,-35 20,0 0,35 20,0 z" />\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n  <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">\n  <path d="M13.5 6l-1.4-1.4-3.1 3-3.1-3L4.5 6l3.1 3.1-3 2.9 1.5 1.4L9 10.5l2.9 2.9 1.5-1.4-3-2.9"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.848 3.349v.99H12.63c-.457 1.264-1.074 2.297-1.852 3.15.871.675 1.937 1.18 3.222 1.47-.245.247-.567.725-.719 1.015-1.361-.35-2.46-.922-3.349-1.682C9.5 9 9 9.5 8 10l-.638-.969C8.053 8.708 9 8 9.162 7.533c-.76-.88-1.344-1.947-1.8-3.194h-1.21v-.99h3.315V2h1.024v1.349h3.357zM9.992 6.773c.608-.666 1.09-1.469 1.454-2.434H8.478c.363.922.862 1.742 1.514 2.434z"/>\n  <path d="M5.846 11.558H3.15L2.636 13H1l2.78-7h1.425L8 13H6.364l-.518-1.442zm-2.282-1.169h1.867l-.939-2.62-.928 2.62z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<circle cx="7.5" cy="2.5" r="1.5"/>\n\t<circle cx="7.5" cy="7.5" r="1.5"/>\n\t<circle cx="7.5" cy="12.5" r="1.5"/>\n</svg>\n'},function(e,t){e.exports='<svg class="spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path class="spinner-part1" d="M8 5c-.6 0-1-.4-1-1V1c0-.5.4-1 1-1 .5 0 1 .4 1 1v3c0 .6-.4 1-1 1z"/>\n  <path class="spinner-part2" d="M13.7 3.7L11.5 6c-.4.3-1 .3-1.4 0-.3-.5-.3-1 0-1.5l2.3-2.2c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4z"/>\n  <path class="spinner-part3" d="M15 9h-3c-.5 0-1-.4-1-1 0-.5.4-1 1-1h3c.5 0 1 .4 1 1s-.4 1-1 1z"/>\n  <path class="spinner-part4" d="M13.7 13.6c-.4.4-1 .4-1.4 0L10 11.4c-.3-.4-.3-1 0-1.4.5-.4 1-.4 1.5 0l2.2 2.2c.4.4.4 1 0 1.4z"/>\n  <path class="spinner-part5" d="M8 16c-.6 0-1-.4-1-1v-3c0-.5.4-1 1-1 .5 0 1 .4 1 1v3c0 .6-.4 1-1 1z"/>\n  <path class="spinner-part6" d="M6 11.5l-2.3 2.2c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L4.5 10c.4-.3 1-.3 1.4 0 .3.5.3 1 0 1.5z"/>\n  <path class="spinner-part7" d="M4 9H1c-.6 0-1-.4-1-1 0-.5.4-1 1-1h3c.5 0 1 .4 1 1s-.4 1-1 1z"/>\n  <path class="spinner-part8" d="M6 6c-.5.3-1 .3-1.5 0L2.3 3.6c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0L6 4.5c.3.4.3 1 0 1.4z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 11L4.86568 7.36568C4.36171 6.86171 4.71865 6 5.43137 6L11.5686 6C12.2814 6 12.6383 6.86171 12.1343 7.36569L8.5 11Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="46" height="48" xmlns="http://www.w3.org/2000/svg">\n  <g clip-path="url(#clip0)">\n    <path d="M16.293 11.293A1 1 0 0017 13h12a1 1 0 000-2H17a1 1 0 00-.707.293zM16.293 19.293A1 1 0 0117 19h12a1 1 0 010 2H17a1 1 0 01-.707-1.707z"/>\n    <path fill-rule="evenodd" d="M8.293 1.293A1 1 0 008 2v13.69L.419 21.185a1 1 0 00-.419.841V43a4 4 0 004 4h38a4 4 0 004-4V22.026a1 1 0 00-.417-.839L38 15.689V2a1 1 0 00-1-1H9a1 1 0 00-.707.293zM36 16.174v9.506l-12.972 6.938-.027.016L10 25.68v-9.45V3h26v13.174zM8 18.16l-5.12 3.712L8 24.611v-6.45zm30 6.45v-6.45l5.12 3.712L38 24.61zM2 43V23.67L41.879 45H4a2 2 0 01-2-2zm42 0c0 .27-.055.536-.159.78L25.12 33.769 44 23.669V43z"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <path fill="#fff" d="M0 0h46v48H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n<path d="M4 4H10V10H4V4ZM20 4V10H14V4H20ZM14 15H16V13H14V11H16V13H18V11H20V13H18V15H20V18H18V20H16V18H13V20H11V16H14V15ZM16 15V18H18V15H16ZM4 20V14H10V20H4ZM6 6V8H8V6H6ZM16 6V8H18V6H16ZM6 16V18H8V16H6ZM4 11H6V13H4V11ZM9 11H13V15H11V13H9V11ZM11 6H13V10H11V6ZM2 2V6H0V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0L6 0V2H2ZM22 0C22.5304 0 23.0391 0.210714 23.4142 0.585786C23.7893 0.960859 24 1.46957 24 2V6H22V2H18V0H22ZM2 18V22H6V24H2C1.46957 24 0.960859 23.7893 0.585786 23.4142C0.210714 23.0391 0 22.5304 0 22V18H2ZM22 22V18H24V22C24 22.5304 23.7893 23.0391 23.4142 23.4142C23.0391 23.7893 22.5304 24 22 24H18V22H22Z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" class="selectbox-checkmark" viewBox="0 0 16 16">\n  <path d="M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="72" height="72" xmlns="http://www.w3.org/2000/svg">\n    <path d="M71 52a1 1 0 00-1-1H36a1 1 0 00-1 1v7a1 1 0 001 1h34a1 1 0 001-1v-7z" fill-opacity=".3"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.397 10.5c-1.333 0-2.004 1.608-1.066 2.555l15.435 15.593a.5.5 0 010 .704L1.331 44.945c-.938.947-.267 2.555 1.066 2.555h6.095c.4 0 .784-.16 1.066-.445l16.828-17a1.5 1.5 0 000-2.11l-16.828-17a1.5 1.5 0 00-1.066-.445H2.397zm-.355 1.852a.5.5 0 01.355-.852h6.095a.5.5 0 01.355.148l16.828 17a.5.5 0 010 .704l-16.828 17a.5.5 0 01-.355.148H2.397a.5.5 0 01-.355-.852l15.435-15.593a1.5 1.5 0 000-2.11L2.042 12.352zM20.215 10.5c-1.332 0-2.003 1.608-1.066 2.555l15.436 15.593a.5.5 0 010 .704L19.149 44.945c-.937.947-.267 2.555 1.066 2.555h10.55c.4 0 .784-.16 1.066-.445l16.828-17a1.5 1.5 0 000-2.11l-16.828-17a1.5 1.5 0 00-1.066-.445h-10.55zm-.355 1.852a.5.5 0 01.355-.852h10.55a.5.5 0 01.355.148l16.828 17a.5.5 0 010 .704l-16.828 17a.5.5 0 01-.355.148h-10.55a.5.5 0 01-.355-.852l15.435-15.593a1.5 1.5 0 000-2.11L19.86 12.352zM36 50.5a1.5 1.5 0 00-1.5 1.5v7a1.5 1.5 0 001.5 1.5h34a1.5 1.5 0 001.5-1.5v-7a1.5 1.5 0 00-1.5-1.5H36zm-.5 1.5a.5.5 0 01.5-.5h34a.5.5 0 01.5.5v7a.5.5 0 01-.5.5H36a.5.5 0 01-.5-.5v-7z"/>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 81">\n  <rect x="46" y="35" width="46" height="46" rx="5" class="success"/>\n  <path d="M65 68.83L54.17 58 57 55.17l8 8 16-16L83.83 50 65 68.83z" fill="white"/>\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M68 17a1 1 0 01-1-1V1a1 1 0 112 0v15a1 1 0 01-1 1zm33.28 5.8a1 1 0 010-1.41l10.6-10.6a1 1 0 111.42 1.4L102.7 22.8a1 1 0 01-1.42 0zM36.73 21.4a1 1 0 01-1.42 1.41l-10.6-10.6a1 1 0 011.41-1.42l10.6 10.6zM114 57a1 1 0 011-1h28a1 1 0 010 2h-28a1 1 0 01-1-1zM1 56a1 1 0 100 2h28a1 1 0 100-2H1z" class="success"/>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" width="242" height="195">\n  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M28.88 71.14a34.2 34.2 0 005.32 67.98h.07a58.8 58.8 0 00101.55 37.37 34.18 34.18 0 0053.24-8 31.7 31.7 0 0031.75-54.11 40.46 40.46 0 00-29.75-59.96A60.07 60.07 0 0078.44 36.44a42.13 42.13 0 00-49.55 34.69z" class="highlight-fill" fill-opacity=".25"/>\n  <path d="M130.5 111v50.5m0 0H173a8 8 0 008-8V145m-50.5 16.5H99" class="highlight-stroke" stroke-width="3"/>\n  <mask id="path-3-inside-1" class="bg-fill">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M94.33 178.47h.03a16.64 16.64 0 005.76-32.25 16.64 16.64 0 00-27-11.5 16.65 16.65 0 00-32.42.06 15.83 15.83 0 00-17.06 10.4 16.64 16.64 0 000 33.3h70.69z"/>\n  </mask>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M94.33 178.47h.03a16.64 16.64 0 005.76-32.25 16.64 16.64 0 00-27-11.5 16.65 16.65 0 00-32.42.06 15.83 15.83 0 00-17.06 10.4 16.64 16.64 0 000 33.3h70.69z" class="bg-fill"/>\n  <path d="M94.33 178.47v-3 3zm5.79-32.25l-2.99.26.17 1.9 1.78.65 1.04-2.81zm-27-11.5l-2.92.68 1.09 4.64 3.71-2.98-1.88-2.34zm-32.42.06l-.72 2.91 2.96.75.69-2.98-2.93-.68zM23.95 145.2l-.06 3 2.47.05.52-2.41-2.93-.64zm-.28 33.28v-3 3zm70.66 3h.03v-6h-.02l-.01 6zm.03 0c10.85 0 19.64-8.8 19.64-19.64h-6c0 7.53-6.1 13.64-13.64 13.64v6zM114 161.83c0-8.46-5.35-15.66-12.84-18.43l-2.08 5.63a13.65 13.65 0 018.92 12.8h6zm-10.9-15.88a19.64 19.64 0 00-19.56-17.9v6c7.13 0 12.98 5.46 13.6 12.43l5.97-.53zm-19.56-17.9c-4.65 0-8.93 1.62-12.3 4.33l3.76 4.68c2.34-1.89 5.3-3.01 8.54-3.01v-6zm-7.5 5.98a19.65 19.65 0 00-19.12-15.13v6c6.45 0 11.86 4.48 13.28 10.5l5.84-1.37zM56.92 118.9c-9.33 0-17.13 6.5-19.14 15.21l5.85 1.35a13.65 13.65 0 0113.29-10.56v-6zm-15.49 12.97c-1.3-.32-2.66-.5-4.06-.5v6c.9 0 1.78.12 2.6.32l1.46-5.82zm-4.06-.5a16.73 16.73 0 00-16.35 13.2l5.86 1.26a10.73 10.73 0 0110.49-8.45v-6zM24 142.2h-.36v6h.25l.11-6zm-.36 0A19.64 19.64 0 004 161.83h6c0-7.53 6.1-13.64 13.64-13.64v-6zM4 161.83c0 10.85 8.8 19.64 19.64 19.64v-6c-7.53 0-13.64-6.1-13.64-13.64H4zm19.64 19.64h.03v-6h-.03v6zm70.7-6H23.66v6h70.66v-6z" class="highlight-fill" mask="url(#path-3-inside-1)"/>\n  <mask id="path-5-inside-2" class="bg-fill">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M227.92 148.22a13.89 13.89 0 004.8-26.92 13.9 13.9 0 00-22.53-9.6 13.9 13.9 0 00-27.06.06 11.46 11.46 0 00-13.98 8.69h-.26a13.89 13.89 0 000 27.77h59.03z"/>\n  </mask>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M227.92 148.22a13.89 13.89 0 004.8-26.92 13.9 13.9 0 00-22.53-9.6 13.9 13.9 0 00-27.06.06 11.46 11.46 0 00-13.98 8.69h-.26a13.89 13.89 0 000 27.77h59.03z" class="bg-fill"/>\n  <path d="M227.92 148.22v-3h-3v3h3zm4.8-26.92l-2.98.26.16 1.9 1.79.66 1.04-2.82zm-22.53-9.6l-2.92.69 1.09 4.64 3.71-2.99-1.88-2.34zm-27.06.06l-.72 2.9 2.96.75.69-2.98-2.93-.67zm-13.98 8.69l-.06 3 2.47.04.52-2.41-2.93-.63zm-.26 27.77h3v-3h-3v3zm0 0h-3v3h3v-3zm59.03 0v3h3v-3h-3zm0 3v-6 6zm0 0c9.33 0 16.89-7.56 16.89-16.88h-6c0 6-4.88 10.88-10.9 10.88v6zm16.89-16.88a16.9 16.9 0 00-11.04-15.85l-2.08 5.63a10.9 10.9 0 017.12 10.22h6zm-9.1-13.3c-.75-8.63-8-15.4-16.82-15.4v6c5.69 0 10.36 4.36 10.85 9.92l5.98-.52zm-16.82-15.4c-4 0-7.69 1.4-10.58 3.72l3.76 4.68c1.87-1.5 4.24-2.4 6.82-2.4v-6zm-5.78 5.38A16.9 16.9 0 00196.67 98v6a10.9 10.9 0 0110.6 8.39l5.84-1.37zM196.67 98a16.9 16.9 0 00-16.46 13.08l5.85 1.35a10.9 10.9 0 0110.6-8.43v-6zm-12.81 10.85c-1.13-.28-2.3-.43-3.51-.43v6c.71 0 1.4.08 2.06.25l1.45-5.82zm-3.51-.43a14.46 14.46 0 00-14.14 11.4l5.87 1.26a8.46 8.46 0 018.27-6.66v-6zm-11.15 9.03h-.31v6h.2l.11-6zm-.31 0A16.89 16.89 0 00152 134.33h6c0-6.02 4.88-10.9 10.89-10.9v-6zM152 134.33c0 9.32 7.56 16.88 16.89 16.88v-6A10.89 10.89 0 01158 134.34h-6zm19.89 13.88h-6 6zm56.03-3h-59.03v6h59.03v-6zm-3 3h6-6z" class="highlight-fill" mask="url(#path-5-inside-2)"/>\n  <path d="M126 105h9v11.5a4.5 4.5 0 01-9 0V105z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <path d="M107.27 31.25l-9.02 9.02-5-5a4 4 0 010-5.66l3.36-3.37a4 4 0 015.66 0l5 5.01z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <path d="M156.41 31.25l9.03 9.02 5-5a4 4 0 000-5.66l-3.36-3.37a4 4 0 00-5.66 0l-5 5.01z" class="bg-fill highlight-stroke" stroke-width="2"/>\n  <circle cx="131.66" cy="64.66" r="45.72" class="bg-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M99.03 32.63a45.72 45.72 0 00.6 64.66l32.03-32.03 32.03 32.03.3-.3a45.72 45.72 0 00.3-64.36l-32.63 32.63-32.63-32.63z" class="highlight-fill"/>\n  <circle cx="131.66" cy="64.66" r="45.72" class="highlight-stroke" stroke-width="4"/>\n  <path class="highlight-stroke" d="M99.26 97.21l64.95-64.95"/>\n  <path class="highlight-stroke" d="M164.06 97.2L99.11 32.27"/>\n  <circle cx="131.66" cy="64.66" r="17.52" class="highlight-stroke bg-fill" stroke-width="2"/>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" width="209" height="187" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect x=".5" y=".5" width="208" height="27" rx="2.5" class="form-field"/>\n  <path d="M128 9.5a.5.5 0 00-.5-.5h-8a.5.5 0 000 1h8a.5.5 0 00.5-.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M124 11a1 1 0 00-1 1v6a1 1 0 001 1h10a1 1 0 001-1v-6a1 1 0 00-1-1h-10zm5 4.293L125.707 12h6.586L129 15.293zM124 12h.293L129 16.707 133.707 12H134v6h-10v-6z" class="color-fg"/>\n  <path d="M119 11.5a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zM122 13.5a.5.5 0 00-.5-.5h-2a.5.5 0 000 1h2a.5.5 0 00.5-.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M166 8h10v1h-10V8zm-1 0a1 1 0 011-1h10a1 1 0 011 1v2h-1.085l-.735 7.605c-.077.795-.661 1.395-1.356 1.395h-5.648c-.696 0-1.28-.601-1.356-1.396L166.085 10H165V8zm2.001 2l.723 7.488c.025.265.22.465.452.465h5.648c.233 0 .427-.2.452-.464l.723-7.489h-7.998zm6.491 1.859l-.607-.598-1.818 1.794-1.818-1.794-.606.598 1.818 1.795-1.818 1.795.606.598 1.818-1.795 1.818 1.795.607-.598-1.819-1.795 1.819-1.795z" class="color-fg"/>\n  <path d="M195.5 8a.5.5 0 01-.5-.5.5.5 0 00-.5-.5h-3a.5.5 0 00-.5.5.5.5 0 01-.5.5H189a1 1 0 00-1 1h10a1 1 0 00-1-1h-1.5zM189 10v7.5a1.5 1.5 0 001.5 1.5h5a1.5 1.5 0 001.5-1.5V10h-1v7.5a.5.5 0 01-.5.5h-5a.5.5 0 01-.5-.5V10h-1z" class="color-fg"/>\n  <path opacity=".3" d="M191 10v7h4v-7h-4z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M99.357 9.36a1.239 1.239 0 00-.357.852v7.575a1.185 1.185 0 00.339.87 1.158 1.158 0 00.861.342h9.6c.316-.005.619-.134.843-.36.224-.227.352-.532.357-.852V12c0-.5-.5-1-1-1h-5l-1.2-2h-3.6c-.317.005-.62.135-.843.36zm.642 8.462v-7.599a.236.236 0 01.069-.159.211.211 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.24.24 0 01-.068.159.216.216 0 01-.144.064h-9.624a.16.16 0 01-.153-.105.2.2 0 01-.012-.072z" class="highlight-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M100 17.822v-7.599a.236.236 0 01.068-.159.211.211 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.24.24 0 01-.068.159.216.216 0 01-.144.064h-9.624a.16.16 0 01-.153-.105.2.2 0 01-.012-.072z" class="highlight-fill"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M142 9.154c0-1.19.964-2.154 2.154-2.154h9.692c1.19 0 2.154.964 2.154 2.154v9.692c0 1.19-.964 2.154-2.154 2.154h-9.692A2.154 2.154 0 01142 18.846V9.154zm2.154-1.077h9.692c.595 0 1.077.482 1.077 1.077v9.692c0 .595-.482 1.077-1.077 1.077h-9.692a1.078 1.078 0 01-1.077-1.077V9.154c0-.595.482-1.077 1.077-1.077z" class="color-fg"/>\n  <path d="M153.5 18.5v-1a8.001 8.001 0 00-8-8h-1v1.4h1a6.602 6.602 0 016.6 6.6v1h1.4zM147.5 17a1.501 1.501 0 11-3.002 0 1.501 1.501 0 013.002 0z" class="color-fg"/>\n  <path d="M150.5 17.5v1h-1.4v-1a3.6 3.6 0 00-3.6-3.6h-1v-1.4h1a4.994 4.994 0 013.536 1.464A4.998 4.998 0 01150.5 17.5z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M77 13.829V18a1 1 0 001 1h10a1 1 0 001-1V13.83c0-.53-.209-1.038-.584-1.413l-1.063-1.062-3.292 3.293a1.5 1.5 0 01-2.122 0l-3.292-3.293-1.063 1.062A1.994 1.994 0 0077 13.828zm2.354-3.183l3.293 3.293a.5.5 0 00.706 0l3.293-3.293-2.94-2.94a.998.998 0 00-1.412 0l-2.94 2.94z" class="highlight-fill"/>\n  <rect opacity=".6" x="8" y="43" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="58" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="82" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="97" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="121" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="136" width="166" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".6" x="8" y="160" width="187" height="12" rx="2" class="color-fg-faded"/>\n  <rect opacity=".3" x="8" y="175" width="166" height="12" rx="2" class="color-fg-faded"/>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" width="216" height="200" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <g filter="url(#filter0_d)">\n    <path d="M7 9a5 5 0 015-5h192a5 5 0 015 5v156.03a5 5 0 01-4.55 4.98l-192 17.5A5 5 0 017 182.51V9z" class="bg-fill"/>\n  </g>\n  <rect fill-opacity=".2" x="46" y="24" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="48" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="72" width="60" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="96" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="120" width="77" height="12" rx="2" class="color-fg-faded"/>\n  <rect fill-opacity=".2" x="46" y="144" width="60" height="12" rx="2" class="color-fg-faded"/>\n  <path d="M33 26a2 2 0 100-4 2 2 0 000 4z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M33 32v-5c-.35 0-.687-.06-1-.17V32H22v-6h.293L27 30.707l4.262-4.262A3.01 3.01 0 0130.17 25H22a1 1 0 00-1 1v6a1 1 0 001 1h10a1 1 0 001-1zm-6-2.707L30.293 26h-6.586L27 29.293zM21.357 121.361a1.237 1.237 0 00-.357.851v7.575a1.187 1.187 0 00.339.87 1.156 1.156 0 00.86.342h9.6c.317-.005.62-.134.844-.36.224-.227.352-.532.357-.852V124c0-.5-.5-1-1-1h-5l-1.2-2h-3.6a1.214 1.214 0 00-.843.361zm.642 8.461v-7.599a.24.24 0 01.069-.159.215.215 0 01.143-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064h-9.606l-.018.001a.142.142 0 01-.06-.011.169.169 0 01-.092-.095.179.179 0 01-.013-.072z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M22 129.822v-7.599a.24.24 0 01.067-.159.215.215 0 01.144-.064h3.035l1.254 2h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064h-9.606l-.018.001a.142.142 0 01-.06-.011.169.169 0 01-.092-.095.179.179 0 01-.013-.072z" class="color-fg" fill-opacity=".1"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M32.414 94.5a1.5 1.5 0 00-1.06.44L30.292 96 33 98.707l1-1a1.707 1.707 0 000-2.414l-.354-.354a1.5 1.5 0 00-1.06-.439h-.172zm-.354 1.146a.5.5 0 01.354-.146h.172a.5.5 0 01.353.146l.354.354a.707.707 0 010 1l-.293.293L31.707 96l.353-.354zM29.5 96.793l-5.5 5.5V105h2.707l5.5-5.5-2.707-2.707zM25 104v-1.293l4.5-4.5 1.293 1.293-4.5 4.5H25z" class="color-fg"/>\n  <path d="M23 97h4l-1 1h-3c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h5a1 1 0 001-1v-1l1-1v2a2 2 0 01-2 2h-5a2 2 0 01-2-2v-7c0-1 .895-2 2-2z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M19 72h14.546c.36 0 .715.09.992.31.293.23.462.578.462.99 0 .25-.099.47-.19.626a2.14 2.14 0 01-.318.41L24 85v-8l-5-5zm2.5.95L24 75.5l7-1.5-6 3.5.003 5 8.864-8.849c.062-.063.129-.144.176-.225.045-.076.053-.118.054-.125 0-.117-.038-.183-.1-.232-.078-.06-.223-.12-.45-.12H21.5zM26.294 47.706a.998.998 0 011.412 0l4.71 4.71c.375.375.584.882.584 1.413V59a1 1 0 01-1 1H22a1 1 0 01-1-1v-5.172c0-.53.209-1.037.584-1.412l4.71-4.71zm-2.733 4.148L27 48.414l3.44 3.44-3.086 3.085a.5.5 0 01-.708 0l-3.085-3.085zm-.707.707l-.563.562a.994.994 0 00-.291.706V59h10v-5.172a.994.994 0 00-.291-.705l-.563-.562-3.085 3.086a1.5 1.5 0 01-2.122 0l-3.085-3.086z" class="color-fg"/>\n  <path d="M159 38h-19a3 3 0 01-3-3V25a3 3 0 013-3h19v16z" class="color-fg"/>\n  <path fill-opacity="0.2" d="M159 22h19a3 3 0 013 3v10a3 3 0 01-3 3h-19V22z" class="color-fg-faded"/>\n  <path d="M145.181 34h1.011v-8.103h-1.005l-2.156 1.55v1.067l2.061-1.494h.089V34zm3.381-5.823v.006h.977v-.006c0-.955.64-1.59 1.589-1.59.893 0 1.583.624 1.583 1.433 0 .651-.252 1.09-1.297 2.223l-2.802 3.06V34h5.245v-.91h-3.796V33l1.949-2.094c1.33-1.426 1.712-2.083 1.712-2.925 0-1.286-1.112-2.275-2.566-2.275-1.505 0-2.594 1.034-2.594 2.471z" class="bg-fill"/>\n  <path d="M166.485 34h1.011v-8.103h-1.006l-2.156 1.55v1.067l2.061-1.494h.09V34zm6.199.19c1.718 0 2.92-.97 2.92-2.357 0-1.056-.668-1.876-1.685-2.067v-.09c.837-.23 1.354-.92 1.354-1.808 0-1.263-1.073-2.162-2.589-2.162s-2.589.899-2.589 2.162c0 .882.528 1.584 1.354 1.808v.09c-1.017.191-1.685 1.01-1.685 2.067 0 1.386 1.202 2.358 2.92 2.358zm0-.864c-1.123 0-1.898-.64-1.898-1.567 0-.926.775-1.566 1.898-1.566 1.123 0 1.898.64 1.898 1.566 0 .927-.775 1.567-1.898 1.567zm0-3.987c-.955 0-1.595-.55-1.595-1.375 0-.837.635-1.393 1.595-1.393s1.595.556 1.595 1.393c0 .825-.64 1.375-1.595 1.375z" class="color-fg"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M22 144h10v1H22v-1zm-1 0a1 1 0 011-1h10a1 1 0 011 1v2h-1.085l-.735 7.605c-.077.795-.661 1.395-1.356 1.395h-5.648c-.695 0-1.28-.601-1.356-1.396L22.085 146H21v-2zm2 2l.724 7.488c.025.265.22.466.452.466h5.648c.233 0 .427-.201.452-.465L31 146h-7.998zm6.491 1.859l-.606-.598-1.818 1.794-1.818-1.794-.606.598 1.818 1.795-1.818 1.795.606.598 1.818-1.795 1.818 1.795.606-.598-1.818-1.795 1.819-1.795z" class="color-fg"/>\n  <defs>\n    <filter id="filter0_d" x="0" y="0" width="216" height="197.52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="3.5"/>\n      <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.13 0"/>\n      <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>\n      <feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n    </filter>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80">\n  <path d="M40 80c17.53 0 27.27 0 33.64-6.36C80 67.27 80 57.53 80 40s0-27.27-6.36-33.64C67.27 0 57.53 0 40 0S12.73 0 6.36 6.36C0 12.73 0 22.47 0 40s0 27.27 6.36 33.64C12.73 80 22.47 80 40 80z" fill="#FF6600"/>\n  <path d="M24.2 62.8c3.69 0 6.68-3.02 6.68-6.74s-2.99-6.74-6.68-6.74a6.72 6.72 0 00-6.7 6.74c0 3.72 3 6.74 6.7 6.74z" fill="white"/>\n  <path d="M64.12 58.35a4.16 4.16 0 01-4.25 4.45c-2.46 0-4.43-2-4.71-4.45a38.13 38.13 0 00-33.17-33.48c-2.46-.3-4.48-2.28-4.48-4.76a4.18 4.18 0 014.48-4.28c22.27 2.14 40.04 20.07 42.13 42.52z" fill="white"/>\n  <path d="M48.41 58.35c.35 2.44-1.68 4.45-4.15 4.45-2.46 0-4.41-2.02-4.9-4.43a22.45 22.45 0 00-17.39-17.59c-2.43-.5-4.46-2.46-4.46-4.94 0-2.49 2.02-4.53 4.48-4.18a31.41 31.41 0 0126.42 26.7z" fill="white"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 3.5C0 3.22386 0.223858 3 0.5 3H8.5C8.77614 3 9 3.22386 9 3.5C9 3.77614 8.77614 4 8.5 4H0.5C0.223858 4 0 3.77614 0 3.5ZM0 5.5C0 5.22386 0.223858 5 0.5 5H2.5C2.77614 5 3 5.22386 3 5.5C3 5.77614 2.77614 6 2.5 6H0.5C0.223858 6 0 5.77614 0 5.5ZM3 7.5C3 7.22386 2.77614 7 2.5 7H0.5C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5Z"/>\n  <path fill-rule="evenodd" d="M4.45459 5.16169L9.64645 10.3536L10 10.7071L10.3536 10.3536L15.5454 5.16169C15.8191 5.34012 16 5.64893 16 6V12C16 12.5523 15.5523 13 15 13H5C4.44772 13 4 12.5523 4 12V6C4 5.64893 4.18091 5.34012 4.45459 5.16169ZM5.70711 5H14.2929L10 9.29289L5.70711 5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 7.82852V12.0001C2 12.2653 2.10536 12.5197 2.29289 12.7072C2.48043 12.8947 2.73478 13.0001 3 13.0001H13C13.2652 13.0001 13.5196 12.8947 13.7071 12.7072C13.8946 12.5197 14 12.2653 14 12.0001V7.82852C14 7.29808 13.7912 6.79127 13.4161 6.4162L12.3535 5.3536L9.06066 8.64645C8.47487 9.23223 7.52513 9.23223 6.93934 8.64645L3.64649 5.3536L2.58389 6.4162C2.20882 6.79127 2 7.29808 2 7.82852ZM4.3536 4.64649L7.64645 7.93934C7.84171 8.1346 8.15829 8.1346 8.35355 7.93934L11.6464 4.64649L8.70614 1.70622C8.31561 1.3157 7.68439 1.3157 7.29386 1.70622L4.3536 4.64649Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M3 1C2.44772 1 2 1.44772 2 2V4H3.08537L3.81966 11.6037C3.89644 12.3987 4.48049 13.0002 5.17571 13.0002H10.8242C11.5188 13.0002 12.1033 12.4005 12.1802 11.6048L12.9146 4H14V2C14 1.44772 13.5523 1 13 1H3ZM10.4916 5.85906L9.88546 5.26074L8.06682 7.05543L6.24891 5.26074L5.64282 5.85906L7.46082 7.65367L5.64282 9.44899L6.24891 10.0473L8.06682 8.2519L9.88546 10.0473L10.4916 9.44899L8.67282 7.65367L10.4916 5.85906Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 1.5C10 1.77614 10.2239 2 10.5 2H12C12.5523 2 13 2.44772 13 3H3C3 2.44772 3.44772 2 4 2H5.5C5.77614 2 6 1.77614 6 1.5C6 1.22386 6.22386 1 6.5 1H9.5C9.77614 1 10 1.22386 10 1.5Z"/>\n  <path d="M4 4H12V11.5C12 12.3284 11.3284 13 10.5 13H5.5C4.67157 13 4 12.3284 4 11.5V4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35717 3.36075C2.13323 3.58693 2.00515 3.89221 2 4.21203V11.7872C1.99441 11.9479 2.02163 12.1081 2.07996 12.2577C2.13828 12.4073 2.22648 12.5431 2.33904 12.6568C2.4516 12.7705 2.58613 12.8596 2.73425 12.9185C2.88237 12.9774 3.04091 13.0049 3.2 12.9993H12.8C13.1167 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H8L6.8 3H3.2C2.88334 3.0052 2.5811 3.13457 2.35717 3.36075Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4 1C2.89543 1 2 1.89543 2 3V12C2 13.1046 2.89543 14 4 14H13C14.1046 14 15 13.1046 15 12V3C15 1.89543 14.1046 1 13 1H4ZM11.2774 8.9856C11.6015 9.7681 11.7968 10.5966 11.857 11.439C11.8791 11.7483 12.1284 12 12.4385 12C12.7486 12 13.0018 11.7484 12.9825 11.4389C12.9733 11.2922 12.9606 11.1459 12.9443 11C12.8505 10.1614 12.6391 9.33849 12.3149 8.55585C11.8626 7.46392 11.1997 6.47177 10.364 5.63604C9.52823 4.80031 8.53608 4.13738 7.44415 3.68508C6.66151 3.3609 5.83859 3.14949 5 3.05573C4.85414 3.03942 4.70781 3.02667 4.56114 3.01751C4.25163 2.99817 4 3.25139 4 3.5615C4 3.87161 4.25171 4.12092 4.56103 4.14301C5.40342 4.20316 6.2319 4.39848 7.0144 4.7226C7.97008 5.11846 8.83843 5.69867 9.56988 6.43012C10.3013 7.16157 10.8815 8.02992 11.2774 8.9856ZM9.43123 12C9.11711 12 8.86589 11.7445 8.82923 11.4325C8.7771 10.9889 8.66397 10.5536 8.49233 10.1392C8.24797 9.54928 7.8898 9.01324 7.43828 8.56172C6.98676 8.1102 6.45073 7.75203 5.86078 7.50767C5.44641 7.33603 5.01114 7.2229 4.56748 7.17077C4.2555 7.13411 4 6.88289 4 6.56877C4 6.25465 4.25521 5.9972 4.56792 6.02694C4.71267 6.0407 4.85679 6.05971 5 6.08392C5.44363 6.15891 5.87847 6.28373 6.2961 6.45672C7.02405 6.75825 7.68549 7.20021 8.24264 7.75736C8.79979 8.31451 9.24175 8.97595 9.54328 9.7039C9.71627 10.1215 9.84109 10.5564 9.91608 11C9.94029 11.1432 9.9593 11.2873 9.97306 11.4321C10.0028 11.7448 9.74535 12 9.43123 12ZM5.25 12C5.94036 12 6.5 11.4404 6.5 10.75C6.5 10.0596 5.94036 9.5 5.25 9.5C4.55964 9.5 4 10.0596 4 10.75C4 11.4404 4.55964 12 5.25 12Z"/>\n</svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M8.805 12h-5.805v-1h1v-7h-1v-1h5.866c.703 0 1.747.5 3.134 1.5l-.092 2.183c-.167.192-1.294.311-1.609.47.462.176 1.472 1.126 1.7 1.346v2c-.543.703-2.011 1.5-3.195 1.5zm-.644-1.042c.33 0 .566-.205.706-.615.088-.259.133-.573.133-.94 0-.619-.129-1.041-.387-1.265-.137-.12-.318-.18-.544-.18h-1.069v3zm-.077-3.941c.251 0 .447-.077.587-.231.22-.242.329-.677.329-1.305 0-.633-.117-1.059-.35-1.279-.132-.123-.327-.185-.587-.185h-1.063v3z" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.295 9.866l-.991.991c-.286.286-.67.444-1.081.444-.411 0-.794-.158-1.081-.444-.596-.596-.596-1.565 0-2.161l.991-.991-1.178-1.178-.991.991c-1.243 1.242-1.243 3.276 0 4.518.621.621 1.44.932 2.259.932s1.638-.311 2.259-.932l.991-.991-1.178-1.178M7.705 6.134l.991-.991c.286-.286.67-.444 1.081-.444.411 0 .794.158 1.081.444.286.286.444.67.444 1.081 0 .411-.158.794-.444 1.081l-.991.991 1.178 1.178.991-.991c1.242-1.242 1.242-3.276 0-4.518-.621-.621-1.44-.932-2.259-.932s-1.638.311-2.259.932l-.991.991 1.178 1.179"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path class="hl" d="M5 7.5l-4 3.5v-7z"/>\n  <g>\n    <path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zM6.001 8h8v1h-8zm0 2h8v1h-8z"/>\n    <path d="M2 12h3v1h-3zm4 0h4v1h-4z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 1.5C4 1.22386 4.22386 1 4.5 1H11.5C11.7761 1 12 1.22386 12 1.5C12 1.77614 11.7761 2 11.5 2H4.5C4.22386 2 4 1.77614 4 1.5Z"/>\n  <path d="M7 10L5 8L3 12H13L10 6L7 10Z"/>\n  <path fill-rule="evenodd" d="M2 3H14C14.5523 3 15 3.44772 15 4V13C15 13.5523 14.5523 14 14 14H2C1.44772 14 1 13.5523 1 13V4C1 3.44772 1.44772 3 2 3ZM14 4H2V13H14L14 4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl">\n    <path d="M3 2v-1h1v3h1v1h-3v-1h1v-1h-1v-1zm1 7h1v1h-3v-1h1v-1h1v1zm-2-3h2v1h-2v-1zm2 1h1v1h-1v-1zm0 5v1h-1v-1h-1v-1h3v1h-1zm0 1h1v1h-1v-1zm-2 1h2v1h-2v-1z"/>\n    <path opacity=".5" style="mix-blend-mode:multiply" d="M3 1h2v4h-2zm0 5h2v4h-2zm0 5h2v4h-2z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl" transform="translate(2 1)">\n    <circle id="Oval" cx="1.5" cy="1.5" r="1.5"/>\n    <circle cx="1.5" cy="6.5" r="1.5"/>\n    <circle cx="1.5" cy="11.5" r="1.5"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 11h2v1h-6v-1h2l3-7h-2v-1h6v1h-2z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm1 2h10v1h-10zm-1 2h12v1h-12zM2 10h12v1h-12zm2-2h8v1h-8z"/><path d="M5 12h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h11v1h-11zm0 2h10v1h-10zm0 2h12v1h-12zm0 2h9v1h-9zm0 2h11v1h-11zm0 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3 2h11v1h-11zm1 2h10v1h-10zM2 6h12v1h-12zm3 2h9v1h-9z"/><path d="M3 10h11v1h-11zm5 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm-4.001 2h3v1h-3zm4 0h4v1h-4z"/><path class="hl" d="M1 7.5l4-3.5v7z"/></svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M11.046 6.954c-.629-1.387-2.026-2.354-3.646-2.354-2.206 0-4 1.794-4 4s2.394 4 4.6 4v1.599c-3.093 0-6.2-2.507-6.2-5.599 0-3.094 2.507-5.6 5.6-5.6 2.06 0 3.86 1.112 4.832 2.768l1.768-1.768v5h-5z"/></svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M13.923 3.854c.59-.851.476-2.296-.423-2.854-.902-.557-2.25-.017-2.842.834-.557.804-.53 2.076-.949 2.987-.541 1.176-2.627 1.026-4.709 0-1.144 2.095-2.424 4.639-4 6.467l1.498.928c.674-.109 1.509-.662 1.849-1.269-.027.729-.316 1.375-.885 1.865l2.831 1.748c.361-.34.698-.61 1.07-.84-.211.402-.352.828-.417 1.244l1.676 1.036c.993-1.803 2.924-4.59 4.274-6.171-1.867-1.42-2.421-3.085-1.413-4.034.725-.685 1.903-1.165 2.441-1.942zm-.805-2.155c.427.242.546.743.264 1.112-.276.373-.851.476-1.276.234-.429-.243-.547-.74-.267-1.112.278-.372.851-.477 1.279-.234zm-3.091 10.029l-5.445-3.366 1.07-1.543 5.443 3.366z" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 13H7V4H6.32005C6.11005 4 5.88005 4.02 5.62005 4.05C5.36005 4.09 5.10005 4.19 4.84005 4.35C4.58005 4.51 4.34005 4.78 4.10005 5.13C3.86005 5.49 3.65005 5.98 3.47005 6.61H3.30005V3H12.69V6.61H12.52C12.35 5.98 12.14 5.49 11.9 5.13C11.66 4.78 11.41 4.52 11.14 4.35C10.88 4.19 10.62 4.08 10.36 4.05C10.1 4.01 9.87005 4 9.66005 4H9V13H11V14H5V13Z"/>\n  <path d="M14 8H2V9H14V8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M3 13h9v1h-9zM7.5 10.75l1.5-.75v-6h-1v-1h4v1h-1v6l-2 2h-3l-2-2v-6h-1v-1h4v1h-1v6z"/></g></svg>'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M3.768 5.768c.973-1.656 2.773-2.768 4.832-2.768 3.093 0 5.6 2.506 5.6 5.6 0 3.092-3.107 5.599-6.2 5.599v-1.599c2.206 0 4.6-1.794 4.6-4s-1.794-4-4-4c-1.619 0-3.017.967-3.646 2.354l2.046 2.046h-5v-5z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.293 5h-6.586l3.293 3.293 3.293-3.293zm-8 0h-.293v6h10v-6h-.293l-4.354 4.354-.354.354-.354-.354-4.354-4.354zm-1.293 0c0-.552.448-1 1-1h10c.552 0 1 .448 1 1v6c0 .552-.448 1-1 1h-10c-.552 0-1-.448-1-1v-6z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.962 2.392c.481.347.867.895 1.078 1.55.211.655.22 1.333.043 1.906-.176.571-.555 1.083-1.145 1.295l-.31.078c.117.414.284.828.504 1.231.203.372.437.707.691 1.002l.204-.225c.465-.43 1.085-.53 1.664-.4.576.129 1.137.484 1.572 1.009.435.525.688 1.151.73 1.751.043.598-.123 1.213-.582 1.638-.467.431-1.377.845-2.536.761-1.898-.137-3.372-1.757-4.509-3.838-.571-1.045-1.013-2.2-1.226-3.306-.211-1.097-.207-2.198.179-3.096.169-.393.549-.758.888-1.024.351-.275.756-.517 1.069-.63.595-.214 1.205-.052 1.686.296zm-.585.811c-.286-.206-.553-.241-.763-.166-.178.064-.49.24-.792.476-.313.245-.521.481-.585.631-.275.641-.308 1.515-.116 2.512.19.988.592 2.046 1.122 3.016 1.114 2.039 2.359 3.223 3.704 3.32.895.065 1.53-.263 1.785-.498.18-.167.291-.452.264-.833-.027-.378-.191-.808-.503-1.184-.312-.377-.687-.597-1.02-.671-.33-.074-.592-.003-.767.159-.116.107-.201.26-.242.457l-.175.846-.646-.573c-.532-.472-1.008-1.066-1.388-1.761-.386-.706-.635-1.448-.753-2.177l-.13-.808.778.252c.164.053.314.051.45.003.215-.077.417-.287.528-.649.111-.359.115-.826-.039-1.305s-.425-.84-.712-1.046z" />\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 3c-1.933 0-3.5 1.567-3.5 3.5 0 .763.244 1.468.659 2.044l.015.021 2.393 4.173c.192.335.675.335.868 0l2.393-4.173.015-.021c.414-.574.658-1.28.658-2.044 0-1.933-1.567-3.5-3.5-3.5zm-4.5 3.5c0-2.485 2.015-4.5 4.5-4.5s4.5 2.015 4.5 4.5c0 .971-.308 1.871-.832 2.607l-2.367 4.129c-.576 1.005-2.026 1.005-2.603 0l-2.367-4.129c-.523-.736-.832-1.636-.832-2.607zm2.4 0c0-1.16.94-2.1 2.1-2.1 1.16 0 2.1.94 2.1 2.1 0 1.16-.94 2.1-2.1 2.1-1.16 0-2.1-.94-2.1-2.1zm2.1-1.1c-.608 0-1.1.492-1.1 1.1 0 .608.492 1.1 1.1 1.1.608 0 1.1-.492 1.1-1.1 0-.608-.492-1.1-1.1-1.1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M3 6.5C3 6.22386 3.22386 6 3.5 6H6.5C6.77614 6 7 6.22386 7 6.5V9.5C7 9.77614 6.77614 10 6.5 10H3.5C3.22386 10 3 9.77614 3 9.5V6.5Z"/>\n  <path fill-rule="evenodd" d="M3 3C1.34315 3 0 4.34315 0 6V10C0 11.6569 1.34315 13 3 13H13C14.6569 13 16 11.6569 16 10V6C16 4.34315 14.6569 3 13 3H3ZM2 6C2 5.44772 2.44772 5 3 5H13C13.5523 5 14 5.44772 14 6V10C14 10.5523 13.5523 11 13 11H3C2.44772 11 2 10.5523 2 10V6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16"  xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 3C7 2.44772 6.55228 2 6 2H2C0.895431 2 0 2.89543 0 4V13C0 14.1046 0.895431 15 2 15H14C15.1046 15 16 14.1046 16 13V6C16 5.44772 15.5523 5 15 5H8C7.44772 5 7 4.55228 7 4V3ZM2 8C2 7.44772 2.44772 7 3 7H13C13.5523 7 14 7.44772 14 8V12C14 12.5523 13.5523 13 13 13H3C2.44772 13 2 12.5523 2 12V8Z"/>\n  <rect opacity="0.35" x="8" y="2" width="8" height="2" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 4C0 3.44772 0.447715 3 1 3H15C15.5523 3 16 3.44772 16 4V11C16 11.5523 15.5523 12 15 12H1C0.447715 12 0 11.5523 0 11V4ZM1 8H3V10H1V8ZM3 5H1V7H3V5ZM4 5H6V7H4V5ZM9 5H7V7H9V5ZM10 5H12V7H10V5ZM15 5H13V7H15V5ZM13 8H15V10H13V8ZM12 8H4V10H12V8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 0c-3.025 0-5.5 2.314-5.5 5.143v5.714c0 2.829 2.475 5.143 5.5 5.143s5.5-2.314 5.5-5.143v-5.714c0-2.829-2.475-5.143-5.5-5.143zm-3.5 5.322c0-1.637 1.29-3.006 3-3.322v4h-3v-.678zm7 5.761c0 1.608-1.571 2.917-3.5 2.917-1.931 0-3.5-1.309-3.5-2.917v-4.083h7v4.083zm-3-5.083v-4c1.709.315 3 1.685 3 3.322v.678h-3z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 1C5.44772 1 5 1.44772 5 2V4C5 4.55228 5.44772 5 6 5C6.55228 5 7 5.44772 7 6C7 6.55228 6.55228 7 6 7H2C1.44772 7 1 7.44772 1 8V10.5C1 10.7761 0.776142 11 0.5 11C0.223858 11 0 11.2239 0 11.5V13C0 13.5523 0.447715 14 1 14H3C3.55228 14 4 13.5523 4 13V11.5C4 11.2239 3.77614 11 3.5 11C3.22386 11 3 10.7761 3 10.5V10C3 9.44771 3.44772 9 4 9H6C6.55228 9 7 9.44771 7 10V10.5C7 10.7761 6.77614 11 6.5 11C6.22386 11 6 11.2239 6 11.5V13C6 13.5523 6.44772 14 7 14H9C9.55229 14 10 13.5523 10 13V11.5C10 11.2239 9.77614 11 9.5 11C9.22386 11 9 10.7761 9 10.5V10C9 9.44771 9.44771 9 10 9H12C12.5523 9 13 9.44771 13 10V10.5C13 10.7761 12.7761 11 12.5 11C12.2239 11 12 11.2239 12 11.5V13C12 13.5523 12.4477 14 13 14H15C15.5523 14 16 13.5523 16 13V11.5C16 11.2239 15.7761 11 15.5 11C15.2239 11 15 10.7761 15 10.5V8C15 7.44772 14.5523 7 14 7H10C9.44772 7 9 6.55228 9 6C9 5.44772 9.44771 5 10 5C10.5523 5 11 4.55228 11 4V2C11 1.44772 10.5523 1 10 1H6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 13c3.636 0 6.764-2.067 8-5-1.236-2.933-4.364-5-8-5s-6.764 2.067-8 5c1.236 3.035 4.364 5 8 5zm0-1c2.209 0 4-1.791 4-4s-1.791-4-4-4-4 1.791-4 4 1.791 4 4 4zm0-2c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1.20711 4.20711C0.761654 3.76165 1.07714 3 1.70711 3C1.89464 3 2.0745 3.0745 2.20711 3.20711L5.29289 6.29289C5.68342 6.68342 5.68342 7.31658 5.29289 7.70711L2.20711 10.7929C2.0745 10.9255 1.89464 11 1.70711 11C1.07714 11 0.761653 10.2383 1.20711 9.79289L3.29289 7.70711C3.68342 7.31658 3.68342 6.68342 3.29289 6.29289L1.20711 4.20711Z"/>\n  <path d="M5.70711 4.70711C5.07714 4.07714 5.52331 3 6.41421 3H6.58579C6.851 3 7.10536 3.10536 7.29289 3.29289L10.2929 6.29289C10.6834 6.68342 10.6834 7.31658 10.2929 7.70711L7.29289 10.7071C7.10536 10.8946 6.851 11 6.58579 11H6.41421C5.52331 11 5.07714 9.92286 5.70711 9.29289L7.29289 7.70711C7.68342 7.31658 7.68342 6.68342 7.29289 6.29289L5.70711 4.70711Z"/>\n  <path d="M16 13C16 12.4477 15.5523 12 15 12H9C8.44771 12 8 12.4477 8 13C8 13.5523 8.44771 14 9 14H15C15.5523 14 16 13.5523 16 13Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5A1.5 1.5 0 012.5 1h1A1.5 1.5 0 015 2.5v1A1.5 1.5 0 013.5 5h-1A1.5 1.5 0 011 3.5v-1zm5 0A1.5 1.5 0 017.5 1h1A1.5 1.5 0 0110 2.5v1A1.5 1.5 0 018.5 5h-1A1.5 1.5 0 016 3.5v-1zM12.5 1A1.5 1.5 0 0011 2.5v1A1.5 1.5 0 0012.5 5h1A1.5 1.5 0 0015 3.5v-1A1.5 1.5 0 0013.5 1h-1zM1 7.5A1.5 1.5 0 012.5 6h1A1.5 1.5 0 015 7.5v1A1.5 1.5 0 013.5 10h-1A1.5 1.5 0 011 8.5v-1zM7.5 6A1.5 1.5 0 006 7.5v1A1.5 1.5 0 007.5 10h1A1.5 1.5 0 0010 8.5v-1A1.5 1.5 0 008.5 6h-1zM11 7.5A1.5 1.5 0 0112.5 6h1A1.5 1.5 0 0115 7.5v1a1.5 1.5 0 01-1.5 1.5h-1A1.5 1.5 0 0111 8.5v-1zM2.5 11A1.5 1.5 0 001 12.5v1A1.5 1.5 0 002.5 15h1A1.5 1.5 0 005 13.5v-1A1.5 1.5 0 003.5 11h-1zM6 12.5A1.5 1.5 0 017.5 11h1a1.5 1.5 0 011.5 1.5v1A1.5 1.5 0 018.5 15h-1A1.5 1.5 0 016 13.5v-1zm6.5-1.5a1.5 1.5 0 00-1.5 1.5v1a1.5 1.5 0 001.5 1.5h1a1.5 1.5 0 001.5-1.5v-1a1.5 1.5 0 00-1.5-1.5h-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.976 11c-1.92.537-1.91 1.258-2.323 2.9C3.24 15.54 1 15.673 1 15.673c8.832 1.68 7.978-3.656 7.978-3.656C6.798 12.267 5.976 11 5.976 11M14 1.127c-.868-.316-1.91-.022-2.316.652l-.17.28c-.94.748-1.934 1.895-2.758 3.264C7.932 6.692 7.436 8.02 7.3 9.062l-.16.265c-.406.674-.03 1.484.838 1.8.866.316 1.908.023 2.314-.652l.202-.336c.92-.75 1.884-1.872 2.686-3.205s1.293-2.627 1.445-3.656l.212-.353c.406-.674.03-1.484-.838-1.8" />\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.9604 4.44569C10.4629 3.42529 10.9928 2.28123 12.0753 2.03561C12.9563 1.83607 13.8679 2.4994 13.9847 3.41546C14.0358 3.81793 13.958 4.18653 13.763 4.5331C12.1575 7.38833 10.55 10.2422 8.94712 13.0988C8.64918 13.6293 8.2163 13.9505 7.62207 13.9945C6.95657 14.044 6.43394 13.757 6.09839 13.1662C5.08249 11.3768 4.07782 9.58024 3.06885 7.78674C2.45515 6.69519 1.83948 5.605 1.22842 4.51209C0.612089 3.41004 1.30728 2.06983 2.54391 2.00479C3.19687 1.97057 3.70069 2.27852 4.03195 2.85919C4.48497 3.65295 4.9294 4.45213 5.37779 5.2486C5.70114 5.82249 6.01788 6.40011 6.35014 6.96825C6.83152 7.79216 7.53892 8.25696 8.48058 8.31489C9.81355 8.3962 11.0512 7.40798 11.2109 5.95665C11.2227 5.84824 11.2307 5.73983 11.2356 5.68427C11.2284 5.21472 11.1426 4.81903 10.9604 4.44569Z"/>\n</svg>\n'},function(e,t){e.exports='<svg  viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 1C4.134 1 1 4.134 1 8C1 11.866 4.134 15 8 15C11.866 15 15 11.866 15 8C15 4.134 11.866 1 8 1ZM3 8C3 7.216 3.197 6.484 3.52 5.823C3.522 5.829 3.524 5.839 3.527 5.844L4.125 7.106C4.173 7.209 4.306 7.295 4.419 7.295H4.665C4.778 7.295 4.918 7.376 4.974 7.474L5.492 8.367C5.549 8.467 5.672 8.602 5.764 8.668L6.868 9.463C6.959 9.531 7.128 9.584 7.24 9.584H7.587C7.7 9.584 7.792 9.679 7.792 9.792V11.096C7.792 11.211 7.884 11.304 7.998 11.304H8.231C8.343 11.304 8.435 11.398 8.435 11.513V11.751C8.435 11.866 8.343 11.96 8.231 11.96H7.998C7.884 11.96 7.792 12.053 7.792 12.168V12.979C5.133 12.867 3 10.686 3 8ZM10.372 12.374C10.435 12.297 10.497 12.209 10.531 12.136L11.055 11.01C11.103 10.907 11.143 10.728 11.143 10.613V10.55C11.143 10.435 11.06 10.296 10.961 10.243L9.223 9.319C9.123 9.266 8.948 9.223 8.836 9.221H7.472C7.36 9.221 7.195 9.162 7.107 9.09L6.29 8.423C6.202 8.35 6.131 8.198 6.131 8.083L6.134 7.503C6.135 7.389 6.227 7.295 6.34 7.295H6.893C7.007 7.295 7.099 7.389 7.099 7.503V8.222C7.099 8.336 7.191 8.43 7.304 8.43H7.36C7.473 8.43 7.566 8.336 7.566 8.222L7.565 6.974C7.565 6.858 7.639 6.708 7.729 6.638L8.143 6.316C8.233 6.246 8.398 6.189 8.511 6.189H9.523C9.636 6.189 9.728 6.119 9.728 6.031C9.728 5.944 9.636 5.872 9.523 5.872H9.193C9.08 5.872 8.988 5.779 8.988 5.664L8.99 4.913C8.99 4.797 8.896 4.703 8.785 4.703H8.492C8.379 4.702 8.35 4.635 8.427 4.551L8.866 4.08C8.944 3.996 9.007 3.854 9.007 3.761C9.007 3.667 8.915 3.592 8.802 3.592H8.497C8.385 3.592 8.217 3.537 8.125 3.471L7.741 3.197C7.692 3.162 7.65 3.103 7.619 3.038C7.747 3.029 7.87 3 8 3C8.433 3 8.846 3.073 9.247 3.177C9.25 3.289 9.339 3.38 9.45 3.38H9.747C9.86 3.38 9.952 3.474 9.952 3.589V4.268C9.952 4.384 10.044 4.478 10.157 4.478H10.246C10.359 4.478 10.525 4.422 10.616 4.353C10.616 4.353 10.792 4.215 11.013 4.036C12.213 4.951 13 6.379 13 8C13 9.894 11.929 11.526 10.372 12.374Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.7071 5.70711C12.0976 5.31658 12.0976 4.68342 11.7071 4.29289C11.3166 3.90237 10.6834 3.90237 10.2929 4.29289L8 6.58579L5.70711 4.29289C5.31658 3.90237 4.68342 3.90237 4.29289 4.29289C3.90237 4.68342 3.90237 5.31658 4.29289 5.70711L6.58579 8L4.29289 10.2929C3.90237 10.6834 3.90237 11.3166 4.29289 11.7071C4.68342 12.0976 5.31658 12.0976 5.70711 11.7071L8 9.41421L10.2929 11.7071C10.6834 12.0976 11.3166 12.0976 11.7071 11.7071C12.0976 11.3166 12.0976 10.6834 11.7071 10.2929L9.41421 8L11.7071 5.70711Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 9V4C7 3.44772 7.44772 3 8 3V3C8.55228 3 9 3.44772 9 4V9H12L8 13L4 9H7Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.5" d="M15.3601 14.0944C15.7634 13.2763 16 12.3882 16 11.5V10.7C16 8.97393 15.2386 7.41339 14.0397 6.36118C14.5271 5.47393 15.0397 5 16.5 5C18 5 19 6.3 19 7.5V8.5C19 9.49998 18.5 9.99995 18.0001 10.4999L20 12.5C20.5 13 21 13.5 21 14C21 14.5 20.5 15 20 15.0343H16.3L15.3601 14.0944Z"/>\n  <path d="M15 17L12.5 14.5C13.4 13.8 14 12.7 14 11.5V10.7C14 8.79999 12.6 7.09999 10.7 6.99999C8.7 6.89999 7 8.49999 7 10.5V11.5C7 12.7 7.6 13.8 8.5 14.5L6 17C5.5 17.5 5 18 5 19C5 19.6 5.4 20 6 20H15C15.6 20 16 19.6 16 19C16 18.5 15.5 17.5 15 17Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="m3 7h9v1h-9zm0 2h4v1h-4zm0 2h4v1h-4z"/>\n  <path d="m8 11c0-1.10457.89543-2 2-2h12c1.1046 0 2 .89543 2 2v6c0 1.1046-.8954 2-2 2h-12c-1.10457 0-2-.8954-2-2zm11.2929 0h-6.5858l3.2929 3.2929zm-8 0h-1.2929v6h12v-6h-1.2929l-4.7071 4.7071z" fill-rule="evenodd"/>\n  </svg>'},function(e,t){e.exports='<svg width="16" height="16"\n    xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" d="M2 13a2 2 0 002 2h8a2 2 0 002-2V3a2 2 0 00-1.999-2H4a2 2 0 00-2 2v10zm2-9h8v9H4V4zm1 1.956h6v1H5v-1zm0 2h6v1H5v-1zm0 2h6v1H5v-1z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 12C5 13.1045 4.10457 14 3 14C1.89543 14 1 13.1045 1 12C1 10.8954 1.89543 9.99997 3 9.99997C4.10457 9.99997 5 10.8954 5 12Z"/>\n  <path d="M13 14C13.5523 14 14.004 13.5516 13.9616 13.0009C13.8563 11.6359 13.536 10.2938 13.0104 9.02508C12.3571 7.44785 11.3996 6.01474 10.1924 4.80758C8.98523 3.60042 7.55212 2.64284 5.97488 1.98953C4.70613 1.464 3.36409 1.14362 1.99903 1.03841C1.44837 0.995969 1 1.44768 1 1.99997V2.10229C1 2.65457 1.44865 3.09753 1.99861 3.14813C3.08735 3.24832 4.15675 3.51197 5.17036 3.93182C6.49253 4.47948 7.69388 5.2822 8.70582 6.29414C9.71777 7.30609 10.5205 8.50744 11.0681 9.82961C11.488 10.8432 11.7516 11.9126 11.8518 13.0014C11.9024 13.5513 12.3454 14 12.8977 14H13Z"/>\n  <path d="M9 14C9.55229 14 10.0057 13.5509 9.9445 13.002C9.85086 12.1627 9.63936 11.3391 9.31492 10.5558C8.86262 9.46389 8.19969 8.47173 7.36396 7.63601C6.52823 6.80028 5.53608 6.13734 4.44415 5.68505C3.66087 5.36061 2.83725 5.14911 1.99795 5.05547C1.44907 4.99423 1 5.44768 1 5.99997V6.08323C1 6.63551 1.45001 7.07582 1.99653 7.15539C2.56208 7.23773 3.11654 7.39004 3.64692 7.60973C4.4861 7.95733 5.2486 8.46682 5.89087 9.10909C6.53315 9.75137 7.04264 10.5139 7.39023 11.353C7.60993 11.8834 7.76223 12.4379 7.84458 13.0034C7.92415 13.55 8.36446 14 8.91674 14H9Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.996 7.172C15.164 7.585 16 8.697 16 10C16 11.657 14.663 13 12.99 13H3.01C1.346 13 0 11.653 0 10C0 8.686 0.84 7.57 2.022 7.164C2.187 5.942 3.232 5 4.5 5C5.167 5 5.772 5.26 6.22 5.686C6.765 4.123 8.25 3 10 3C12.21 3 14 4.79 14 7L13.996 7.172Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.75 3C8.2498 3 6.88693 3.69117 6.06137 4.79152C5.70959 4.66698 5.33032 4.6 4.9375 4.6C3.6016 4.6 2.38358 5.39217 1.93276 6.59292C0.810198 7.14916 0 8.25863 0 9.6C0 11.559 1.71373 13 3.63375 13H12.3663C14.2953 13 16 11.5612 16 9.6C16 8.31987 15.2565 7.2517 14.2158 6.67358C13.9354 4.53945 11.971 3 9.75 3ZM7.37686 6.50514C7.6952 5.67043 8.60263 5 9.75 5C11.2128 5 12.2431 6.05963 12.25 7.18864L12.2278 8.05923L12.9389 8.28911C13.6102 8.50615 14 9.05326 14 9.6C14 10.29 13.365 11 12.3663 11H3.63375C2.64177 11 2 10.2858 2 9.6C2 9.04475 2.39216 8.49778 3.06887 8.28526L3.66694 8.09744L3.75852 7.4773C3.82196 7.04773 4.26343 6.6 4.9375 6.6C5.28239 6.6 5.57817 6.72244 5.7864 6.90347L6.86674 7.84271L7.37686 6.50514Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 3C10.8495 3 11.6369 3.26446 12.2844 3.71557L3.00002 13C1.34062 12.9946 0 11.6497 0 10C0 8.686 0.84 7.57 2.022 7.164C2.187 5.942 3.232 5 4.5 5C5.167 5 5.772 5.26 6.22 5.686C6.765 4.123 8.25 3 10 3Z"/>\n  <path d="M13.2844 4.71558L5 13H12.99C14.663 13 16 11.657 16 10C16 8.69701 15.164 7.58501 13.996 7.17201L14 7.00001C14 6.15055 13.7356 5.36314 13.2844 4.71558Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10Z"/>\n  <path d="M8 10C8.55228 10 9 9.55228 9 9C9 8.44772 8.55228 8 8 8C7.44772 8 7 8.44772 7 9C7 9.55228 7.44772 10 8 10Z"/>\n  <path d="M12 9C12 9.55228 11.5523 10 11 10C10.4477 10 10 9.55228 10 9C10 8.44772 10.4477 8 11 8C11.5523 8 12 8.44772 12 9Z"/>\n  <path fill-rule="evenodd" d="M6.06137 4.79152C6.88693 3.69117 8.2498 3 9.75 3C11.971 3 13.9354 4.53945 14.2158 6.67358C15.2565 7.2517 16 8.31987 16 9.6C16 11.5612 14.2953 13 12.3663 13H3.63375C1.71373 13 0 11.559 0 9.6C0 8.25863 0.810198 7.14916 1.93276 6.59292C2.38358 5.39217 3.6016 4.6 4.9375 4.6C5.33032 4.6 5.70959 4.66698 6.06137 4.79152ZM9.75 5C8.60263 5 7.6952 5.67043 7.37686 6.50514L6.86674 7.84271L5.7864 6.90347C5.57817 6.72244 5.28239 6.6 4.9375 6.6C4.26343 6.6 3.82196 7.04773 3.75852 7.4773L3.66694 8.09744L3.06887 8.28526C2.39216 8.49778 2 9.04475 2 9.6C2 10.2858 2.64177 11 3.63375 11H12.3663C13.365 11 14 10.29 14 9.6C14 9.05326 13.6102 8.50615 12.9389 8.28911L12.2278 8.05923L12.25 7.18864C12.2431 6.05963 11.2128 5 9.75 5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 5C5 4.44772 5.44772 4 6 4C6.55228 4 7 4.44772 7 5V11C7 11.5523 6.55228 12 6 12C5.44772 12 5 11.5523 5 11V5Z"/>\n  <path d="M9 5C9 4.44772 9.44772 4 10 4C10.5523 4 11 4.44772 11 5V11C11 11.5523 10.5523 12 10 12C9.44772 12 9 11.5523 9 11V5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" d="M4 2C2.89543 2 2 2.89543 2 4V12C2 13.1046 2.89543 14 4 14H12C13.1046 14 14 13.1046 14 12V4C14 2.89543 13.1046 2 12 2H4ZM7 4H9V7H12V9H9V12H7V9H4V7H7V4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg wisth="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <g clip-path="url(#clear-downloads-clip)" fill-rule="evenodd" clip-rule="evenodd">\n    <path d="M9.385.077a1 1 0 01.538 1.308L7.775 6.54l.238.089c.536.201.78.813.682 1.377-.345 2.006.867 3.83 2.152 5.277.589.662.156 1.716-.73 1.716H2a.968.968 0 01-.979-1c.193-4.414 1.683-6.152 3.523-8.036a.999.999 0 011.065-.236l.292.11L8.077.615A1 1 0 019.385.077zM6.3 13h1.79c-.858-1.282-1.576-2.902-1.438-4.745l-1.13-.423c-.673.716-1.182 1.343-1.578 2.114-.376.734-.689 1.68-.842 3.054h1.98l-.464-1.854a.6.6 0 111.164-.292l.5 2A.602.602 0 016.3 13z"/>\n    <path opacity=".35" d="M14.985 7H11V6h3.985v1zm0 2H11V8h3.985v1zM12 11h3v-1h-3v1z"/>\n  </g>\n  <defs>\n    <clipPath id="clear-downloads-clip">\n      <path fill="white" d="M0 0h16v16H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.8801 6.95769L5.6801 5H4V11H12V6.95769H6.8801ZM12.8425 6.96C12.8423 6.96029 12.8363 6.96 12.8254 6.95824C12.8373 6.95882 12.8428 6.9597 12.8425 6.96ZM6.8 3L8 4.95769H12.8C13.46 4.95769 14 5.2125 14 5.9V11.75C14 12.4375 13.46 13 12.8 13H3.2C2.54 13 2 12.4375 2 11.75V4.25C2 3.5625 2.54 3 3.2 3H6.8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 11L4.86568 7.36568C4.36171 6.86171 4.71865 6 5.43137 6L11.5686 6C12.2814 6 12.6383 6.86171 12.1343 7.36569L8.5 11Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M3 1a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V4a3 3 0 00-3-3H3zM2 4a1 1 0 011-1h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4z"/>\n  <rect x="3" y="4" width="10" height="5" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M3 1a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V4a3 3 0 00-3-3H3zM2 4a1 1 0 011-1h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4z"/>\n  <rect x="3" y="4" width="5" height="8" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g style="display: var(--displayImagesAll)">\n    <path d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n  </g>\n  <g style="display: var(--displayImagesCached)">\n    <path opacity="0.3" d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n    <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" fill="var(--colorWarningBg)" />\n    <path d="M11 10H12V12H14V13H11V10Z" fill="var(--colorWarningFg)"/>\n  </g>\n  <g style="display: var(--displayImagesNever)">\n    <path opacity="0.3" d="M16 4C16 2.89543 15.1046 2 14 2H2C0.895431 2 0 2.89543 0 4V12C0 13.1046 0.895431 14 2 14H14C15.1046 14 16 13.1046 16 12V4ZM4.89 7.5L7.11 10.5L10.223 6L14.223 12H1.778L4.888 7.5H4.89Z"/>\n    <path d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" fill="var(--colorErrorBg)"/>\n    <path d="M14 11H10V13H14V11Z" fill="var(--colorErrorFg)"/>\n  </g>\n  <g style="display: var(--displayAnimationNever)">\n    <path d="M4 8C6.20914 8 8 6.20914 8 4C8 1.79086 6.20914 0 4 0C1.79086 0 0 1.79086 0 4C0 6.20914 1.79086 8 4 8Z" fill="var(--colorErrorBg)"/>\n    <path d="M2 2H3.5V6H2V2Z" fill="var(--colorErrorFg)"/>\n    <path d="M4.5 2H6V6H4.5V2Z" fill="var(--colorErrorFg)"/>\n  </g>\n  <g style="display: var(--displayAnimationOnce)">\n    <circle fill="var(--colorWarningBg)" cx="4" cy="4" r="4"/>\n    <polygon fill="var(--colorWarningFg)" points="3 1 3 7 6 4" />\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8 11C9.10457 11 10 10.1046 10 9C10 7.89543 9.10457 7 8 7C6.89543 7 6 7.89543 6 9C6 10.1046 6.89543 11 8 11Z"/>\n  <path fill-rule="evenodd" d="M6 2C4.89543 2 4 2.89543 4 4H3C1.34315 4 0 5.34315 0 7V11C0 12.6569 1.34315 14 3 14H13C14.6569 14 16 12.6569 16 11V7C16 5.34315 14.6569 4 13 4H12C12 2.89543 11.1046 2 10 2H6ZM6 4H10C10 5.10457 10.8954 6 12 6H13C13.5523 6 14 6.44772 14 7V11C14 11.5523 13.5523 12 13 12H3C2.44772 12 2 11.5523 2 11V7C2 6.44772 2.44772 6 3 6H4C5.10457 6 6 5.10457 6 4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M3 2C1.34315 2 0 3.34315 0 5V11C0 12.6569 1.34315 14 3 14H13C14.6569 14 16 12.6569 16 11V5C16 3.34315 14.6569 2 13 2H3ZM2 5C2 4.44772 2.44772 4 3 4H13C13.5523 4 14 4.44772 14 5V11C14 11.5523 13.5523 12 13 12H3C2.44772 12 2 11.5523 2 11V5Z"/>\n  <rect style="display: var(--displayTileRow)" opacity="0.5" x="7" y="4" width="2" height="8"/>\n  <rect style="display: var(--displayTileColumn)" opacity="0.5" x="2" y="7" width="12" height="2"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14.0046 2C15.1092 2 16 2.89543 16 4V12C16 13.1046 15.1077 14 14.0031 14C10.988 14 5.77574 14 1.99884 14C0.894274 14 0 13.1046 0 12V4C0 2.89543 0.890411 2 1.99498 2C5.09826 2 10.9258 2 14.0046 2ZM6 12.0418V4.01465H3C2.44772 4.01465 2 4.46068 2 5.01297C2 6.48887 2 9.25247 2 10.8705C2 10.9217 2 10.9797 2 11.0417C2 11.594 2.44772 12.0418 3 12.0418H6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.79289 3.79285L2.08578 7.49995L5.79289 11.2071L7.20711 9.79285L4.91421 7.49995L7.20711 5.20706L5.79289 3.79285Z"/>\n  <path d="M8.79289 7.20706L11.0858 9.49995L8.79289 11.7928L10.2071 13.2071L13.9142 9.49995L10.2071 5.79285L8.79289 7.20706Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle\n    fill="var(--kIconCircleFill)"\n    stroke="var(--kIconCircleStroke)"\n    stroke-width="1.1"\n    stroke-opacity="0.8"\n    cx="8" cy="8" r="4.5" />\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M3 4c-.552 0-1 .448-1 1v5c0 .552.448 1 1 1h7c.552 0 1-.448 1-1v-1.625l2.171 1.899c.323.283.829.053.829-.376v-4.796c0-.43-.506-.659-.829-.376l-2.171 1.899v-1.625c0-.552-.448-1-1-1h-7z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M6 1.207c0-.445-.539-.669-.854-.354l-2.793 2.793c-.195.195-.195.512 0 .707l2.793 2.793c.315.315.854.092.854-.354v-1.793h5.5c.276 0 .5-.224.5-.5v-1c0-.276-.224-.5-.5-.5h-5.5v-1.793zM10 12.793c0 .445.539.668.854.354l2.793-2.793c.195-.195.195-.512 0-.707l-2.793-2.793c-.315-.315-.854-.092-.854.354v1.793h-5.5c-.276 0-.5.224-.5.5v1c0 .276.224.5.5.5h5.5v1.793z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M2 11.418v2.582c2.339 0 3.92-.707 4.741-2.121.822-1.414 1.391-2.459 1.707-3.135h3.129v-2.489h-1.991c.759-1.782 1.897-2.674 3.414-2.674v-2.582c-3.072-.014-5.253 1.861-6.543 5.624-1.138 3.319-2.624 4.917-4.457 4.794z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M3.941 7.92c-.592-.822-.941-1.83-.941-2.92 0-2.761 2.239-5 5-5s5 2.239 5 5c0 1.09-.349 2.099-.941 2.92l-3.191 5.567c-.384.67-1.351.67-1.735 0l-3.191-5.567zm4.059-.92c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M4 6V7.333C4 9.358 5.791 11 8 11C10.209 11 12 9.358 12 7.333V6C12 5.448 12.448 5 13 5C13.552 5 14 5.448 14 6V7.667C14 10.31 11.838 12.503 9 12.927V14.001C9 14.553 8.552 15.001 8 15.001C7.448 15.001 7 14.553 7 14.001V12.927C4.162 12.504 2 10.31 2 7.667V6C2 5.448 2.448 5 3 5C3.552 5 4 5.448 4 6ZM5 3C5 1.343 6.343 0 8 0C9.657 0 11 1.343 11 3V7C11 8.657 9.657 10 8 10C6.343 10 5 8.657 5 7V3Z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M3 1c-.552 0-1 .448-1 1v11c0 .552.448 1 1 1h10c.552 0 1-.448 1-1v-11c0-.552-.448-1-1-1h-10zm1 4h1v4h1v3.4c0 .331-.269.6-.6.6h-.9c-.276 0-.5-.224-.5-.5v-7.5zm3 0h2v7.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5v-7.5zm3 7.5v-3.5h1v-4h1v7.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M9 3.308c1.722.408 3 1.95 3 3.692v2.586c0 .265.105.52.293.707l.414.414c.188.188.293.442.293.707v.088c0 .276-.224.5-.5.5h-9c-.276 0-.5-.224-.5-.5v-.088c0-.265.105-.52.293-.707l.414-.414c.188-.188.293-.442.293-.707v-2.586c.047-1.742 1.294-3.284 3-3.692v-.308c0-.598.518-1 1-1 .514 0 1 .402 1 1v.308zm-2.5 10.192c0-.175.03-.344.085-.5h2.829c.055.156.085.325.085.5 0 .828-.672 1.5-1.5 1.5s-1.5-.672-1.5-1.5z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <g class="permission-icon">\n    <path opacity="0.5" d="M3 9C3 9.55228 2.55228 10 2 10V10C1.44772 10 1 9.55228 1 9V2C1 1.44772 1.44772 1 2 1H9C9.55228 1 10 1.44772 10 2V2C10 2.55228 9.55228 3 9 3H3.5C3.22386 3 3 3.22386 3 3.5V9Z"/>\n    <path d="M5 4C4.44772 4 4 4.44772 4 5V12C4 12.5523 4.44772 13 5 13H12C12.5523 13 13 12.5523 13 12V5C13 4.44772 12.5523 4 12 4H5ZM6 6.5C6 6.22386 6.22386 6 6.5 6H10.5C10.7761 6 11 6.22386 11 6.5V10.5C11 10.7761 10.7761 11 10.5 11H6.5C6.22386 11 6 10.7761 6 10.5V6.5Z" />\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.58 2.153l.077.067c3.124 3.124 3.124 8.19 0 11.314-.293.293-.768.293-1.061 0-.293-.293-.293-.768 0-1.061 2.538-2.538 2.538-6.654 0-9.192-.293-.293-.293-.768 0-1.061.268-.268.69-.291.984-.067zm-10.176.067c.268.268.291.69.067.984l-.067.077c-2.483 2.483-2.537 6.476-.162 9.025l.162.168c.293.293.293.768 0 1.061-.293.293-.768.293-1.061 0-3.124-3.124-3.124-8.19 0-11.314.293-.293.768-.293 1.061 0zm8.055 2.054l.077.067c1.953 1.953 1.953 5.118 0 7.071-.293.293-.768.293-1.061 0-.293-.293-.293-.768 0-1.061 1.367-1.367 1.367-3.583 0-4.95-.293-.293-.293-.768 0-1.061.268-.268.69-.291.984-.067zm-5.934.067c.268.268.291.69.067.984l-.067.077c-1.321 1.321-1.365 3.436-.132 4.81l.132.139c.293.293.293.768 0 1.061-.293.293-.768.293-1.061 0-1.953-1.953-1.953-5.118 0-7.071.293-.293.768-.293 1.061 0zm2.475 1.536c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12">\n  <path d="M10 0H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 9H3V3h2zm4 0H7V3h2z"/>\n</svg>'},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22">\n    <path d="M3 5h16v2H3zM3 10h16v2H3zM3 15h16v2H3z"/>\n</svg>\n'},,,,,,,,function(e,t,a){"use strict";a(150),a(44),a(13),a(279),a(6),a(17),a(31),a(496);a(7),a(1)},,,,,,,function(e,t,a){"use strict";t.a=function(e){const t=e.replace(/^.*?\:\/\//,"");return!!t.includes('"')&&(!t.includes("/")||t.indexOf('"')<t.indexOf("/"))}},,function(e){e.exports=JSON.parse('{"languages":{"description":"Triples of the language code, the language name in English and the native language name. The language code must start with two or three letter ISO code for the language. It must use the lower case. The language variant part of the code, if present, must be either two uppercase letters if the variant is a country, like de-CH, or it should start with a capital letter and the rest is small if the variant is a non-country name, like sr-Latn. The variant part must be separated by the dash, not the underscore.","note":"Before adding languages here, make sure they do not already appear in locale.js -> TRANSLATION_LOCALES, and if they do, remove them there.","list":[["af","Afrikaans","Afrikaans"],["az","Azerbaijani","Azərbaycanca"],["be","Belarusian","Беларуская"],["bg","Bulgarian","български"],["cs","Czech","Čeština"],["da","Danish","Dansk"],["de","German","Deutsch"],["de-CH","Swiss German","Schweizerdeutsch"],["el","Greek","Ελληνικά"],["en-US","English (US)","English (US)"],["en-GB","English (UK)","English (UK)"],["es","Spanish","Español"],["et","Estonian","Eesti keel"],["fa","Persian","فارسی"],["fi","Finnish","Suomi"],["fr","French","Français"],["fy","Frisian","Frysk"],["gd","Scots Gaelic","Gàidhlig"],["hu","Hungarian","Magyar"],["hr","Croatian","Hrvatski"],["hy","Armenian","Հայերեն"],["id","Indonesian","Bahasa Indonesia"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["ja-KS","Japanese (Kansai)","関西弁"],["ja","Japanese","日本語"],["kab","Kabyle","Taqbaylit"],["ko","Korean","한국어"],["ku","Kurdish","Kurdî"],["lt","Lithuanian","Lietuvių"],["nb","Norwegian (Bokmål)","Norsk (bokmål)"],["nn","Norwegian (Nynorsk)","Norsk (nynorsk)"],["nl","Dutch","Nederlands"],["pl","Polish","Polski"],["pt-BR","Portuguese (Brazil)","Português (Brasil)"],["pt-PT","Portuguese (Portugal)","Português (Europeu)"],["ro","Romanian","Română"],["ru","Russian","Русский"],["sk","Slovak","Slovenčina"],["sl","Slovenian","Slovenščina"],["sq","Albanian","Shqip"],["sr","Serbian","Српски"],["sr-Latn","Serbian (Latin)","Srpski"],["sv","Swedish","Svenska"],["tr","Turkish","Türkçe"],["uk","Ukrainian","Українська"],["vi","Vietnamese","Tiếng Việt"],["zh-CN","Chinese (Simplified)","简体中文"],["zh-TW","Chinese (Traditional)","正體中文"]]}}')},,,,function(e,t,a){"use strict";var n=a(32),i=a(42),s=a(2),r=a(10);t.a=function(e){const t=n.a.getCalendars().find(t=>t.id===e),{name:a=Object(s.a)("Events")}=t||{};r.a.fileSystem.chooseEntry({type:"saveFile",suggestedName:`${a}.ics`,accepts:[{extensions:["ics"]}],acceptsAllTypes:!0},t=>function(e,t){if(!e)return;const a=n.a.getEventsPerCalendar(t);a.forEach(e=>{var t;(null===(t=e.recurrenceExceptions)||void 0===t?void 0:t.length)&&e.recurrenceExceptions.forEach(t=>{const n=a.find(e=>e.id===t.exception_event_id);n&&(n.recurrenceId=t.date,n.sequence=e.sequence)})});const s=i.a.eventsToICalendar(a);e.createWriter(e=>{const t=new Blob([s]);e.onwriteend=a=>{0===e.length&&e.write(t)},e.truncate(0),e.onerror=e=>{console.warn("Exporting events failed: "+e.toString())}})}(t,e))}},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(145),i=a(47),s=a(14),r=a(6),o=a(65),l=a(2),c=a(239),u=a(10),m=a(34),d=a(855),h=a(357),p=a(1271),b=a(1272),g=a(60),N=a(7),f=a(850),_=a(3),v=a(428),E=a(171),C=a(23),w=a(1);function O(t,a){const n=a.length,s=c.a.adjustBatchSize.bind(void 0,10,100,500);let r,u=10,m=0;return new Promise((c,g)=>{e.nextTick((function g(){const E=a.slice(m,m+u);m+=u,m>n&&(m=n);const C=Date.now();if(0===E.length)return void c(r);return async function(e,t){const a=t.map(e=>e.messageId),n=await Object(b.a)(a),s=await Object(p.a)(e),r=new Set;for(const e of n)r.add(e.messageId);for(const e of s)r.add(e.messageId);const o=t.filter(e=>!r.has(e.messageId));if(0===o.length)return;const l=await Object(h.a)(_.n,e,_.eb,o);i.a.updateIndex({addedSles:l});for(const e of o){const t=l.find(t=>t.messageId===e.messageId),a=Object(d.a)(e.raw);N.a.mailPrivate.addMessageBody(t.id,Object(v.a)(a),e=>{e||console.warn("Failed to add body to FTS db",t.id)}),await Object(f.a)(_.n,e.sentDate,t.id,e.raw)}return l[0]}(t,E).then(e=>{e&&!r?r=e:e&&o.a.setStatus(Object(l.a)("Loading feed $1: $2/$3",[t,m,n]));const a=Date.now();u=s(u,a-C)}).then(()=>e.nextTick(g))}))})}async function y(e,t,a){const c=a.length;await async function(e,t){if(!await n.a.get(_.n,t)){const a={name:e,accountId:_.n,path:t,filterValue:{include:[[{accountId:_.n},{path:t}]],exclude:m.b.getSearchListButtonExcludeRules(_.n),...m.b.getSearchListButtons(_.n)}};await i.a.addFilter(a,!1)}}(e,t);const d=await O(t,a);if(!d)return;await i.a.addContactFilters(a[0].from,!1,!0);const h=()=>{const e=["message",d.id].join("/"),t=C.p.internalUrl("mailpage",e,d.subject);s.a.openURL(t);const a=u.a.extension.getViews().find(e=>e.isMailWindow);a&&u.a.windows.update(a.vivaldiWindowId,{drawAttention:!0})};if(r.a.get(w.kRssShowNotifications)){const e=Object(l.a)("New Feed from $2","New Feeds from $2",[c,t]);Object(E.a)({title:d.subject,body:e,icon:"resources/mail_notification_icon.png",onClick:h})}o.a.setStatus(Object(l.a)("Finished loading feed $2. $1 message loaded","Finished loading feed $2. $1 messages loaded",[c,t]),_.T),g.a.filter()}}).call(this,a(82))},function(e,t,a){"use strict";var n=a(8);t.a=async function(e){return await n.a.deletedFeedItems.where("path").equals(e).toArray()}},function(e,t,a){"use strict";var n=a(8);t.a=async function(e){return await n.a.searchList.where("messageId").anyOf(e).toArray()}},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(50),s=a(1274),r=a(1275),o=a(28),l=a(1276),c=a(150),u=a(140),m=a(91),d=a(72),h=a(36),p=a(31),b=a(13),g=a(11),N=a(6),f=a(0),_=a.n(f),v=a(40),E=a.n(v),C=a(272),w=a(51),O=a(25),y=a(78),S=a(224),T=a(4),k=a(97),A=a(1),I=a(149),D="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbar.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends _.a.PureComponent{constructor(t,a){super(t),M(this,"acceptEnterId",""),M(this,"draggedId",""),M(this,"dropMode",{support:!1,copy:!1}),M(this,"clipboardId",""),M(this,"timer",null),M(this,"_onStoreChange",()=>{const e=o.b.getBookmarksBarNodes();this.setState(t=>{const a=this._getRenderedItems(e,t.sorting,!0===t.newItemAdded?t.editId:"");return{nodes:e,renderedArray:a,cutIds:o.b.getCutIds()}})}),M(this,"_onCommandSpy",()=>{Object(k.a)(E.a.findDOMNode(this))||this.state.renderedArray.length>0&&this._moveFocus(this.state.renderedArray[0].id,"current",!0)}),M(this,"_getRenderedItems",(e,t,a)=>{const n=Object(S.a)(e);if(n.length>0&&t&&t.sortOrder>=w.a.ASCENDING_SORT&&(w.a.treeSort(n,w.a.getDefaultComparator(t.sortOrder,t.sortField)),""!==a)){const e=n.findIndex(e=>e.id===a);-1!==e&&n.splice(0,0,n.splice(e,1)[0])}return n}),M(this,"_handleKeyDown",e=>{e.keyCode===d.a.KEY_ESCAPE&&this._resetDragover()}),M(this,"_onButtonRendered",(e,t)=>{const a=this.state.renderedArray;for(let n=0;n<a.length;n++)if(a[n].id===e){a[n].buttonWidth!==t&&""===this.state.editId&&this.setState(e=>{const a=e.renderedArray.slice();return a[n].buttonWidth=t,{renderedArray:a}});break}}),M(this,"_onResize",e=>{const t=e[0].target;this.setState({maxWidth:Math.floor(t.clientWidth)})}),M(this,"_addActiveTab",()=>{i.a.bookmarkPageInFolder(b.c.unsafeGetActivePage(),o.b.getBookmarkBarFolderId(),0)}),M(this,"_getItemInsertIndex",e=>{const t=this.state.renderedArray.length;return"number"!=typeof e||t<e?t:e}),M(this,"_createNewBookmark",()=>{h.a.showBookmarkDialog({mode:"addbookmark",id:o.b.getBookmarkBarFolderId(),index:0})}),M(this,"_createNewFolder",()=>{h.a.showBookmarkDialog({mode:"addfolder",id:o.b.getBookmarkBarFolderId(),index:0})}),M(this,"_createNewSeparator",e=>{i.a.createSeparator(o.b.getBookmarkBarFolderId(),this._getItemInsertIndex(e))}),M(this,"_resetDragover",()=>{this.setState({dragover:{id:"",position:"",index:0}})}),M(this,"_onEditChanged",e=>{""===e?this.setState(e=>({renderedArray:this._getRenderedItems(e.nodes,e.sorting,""),newItemAdded:!1,editId:""})):this.setState({editId:e})}),M(this,"_onDragEndBookmark",()=>{this.draggedId="",this._resetDragover()}),M(this,"_onDropBar",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=o.b.getBookmarkBarFolderId(),a=o.b.getBookmarksBarNodes().length;i.a.onDropEvent(e,t,a)}this._resetDragover()}),M(this,"_onDragEnter",e=>{this.dropMode=this._getDropModeForEvent(e)}),M(this,"_onDragOverBar",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move")}),M(this,"_onDragOver",(e,t)=>{if(e.id!==this.draggedId&&void 0!==e.index){var a="";if(this.state.sorting.sortOrder===w.a.NO_SORTING){const n=t.currentTarget.getBoundingClientRect(),i=(t.clientX-n.left)/n.width;a=o.b.isFolder(e)?i<=.33?"left":i>.66?"right":"on":i<=.5?"left":"right"}else o.b.isFolder(e)&&(a="on");(this.state.dragover.id!==e.id||this.state.dragover.id===e.id&&this.state.dragover.position!==a)&&this.setState({dragover:{id:e.id,position:a,index:e.index}})}}),M(this,"_onDragStart",e=>{this.draggedId=e}),M(this,"_getDropModeForEvent",e=>{const t={support:!1,copy:!1};return t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===n.c),t.support&&(e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)?t.copy=!1:t.copy=t.support&&(n.a.isCopyModifierPressed(e)||!e.dataTransfer.types.some(e=>e===n.c))),t}),M(this,"_onCut",e=>{i.a.cut(e,[this.clipboardId]),e.stopPropagation(),e.preventDefault()}),M(this,"_onCopy",e=>{i.a.copy(e,[this.clipboardId]),e.stopPropagation(),e.preventDefault()}),M(this,"_onPaste",e=>{const t=this.clipboardId===o.b.getBookmarkBarFolderId();i.a.paste(e,this.clipboardId,t),e.preventDefault(),e.stopPropagation()}),M(this,"_onCutContextMenu",e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("cut",this._onCut),t.execCommand("cut"),t.removeEventListener("cut",this._onCut)}),M(this,"_onCopyContextMenu",e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("copy",this._onCopy),t.execCommand("copy"),t.removeEventListener("copy",this._onCopy)}),M(this,"_onPasteContextMenu",e=>{this.clipboardId=e;const{document:t}=this.context;t.addEventListener("paste",this._onPaste),t.execCommand("paste"),t.removeEventListener("paste",this._onPaste)}),M(this,"_onSortOrderChange",()=>{const e=this.state.sorting.sortOrder===w.a.DESCENDING_SORT?w.a.ASCENDING_SORT:w.a.DESCENDING_SORT;this._onSortChange(e,this.state.sorting.sortField)}),M(this,"_onTitleSortChange",e=>{let t=this.state.sorting.sortOrder;"manually"!==e&&t===w.a.NO_SORTING?t=w.a.ASCENDING_SORT:"manually"===e&&(t=w.a.NO_SORTING),this._onSortChange(t,e)}),M(this,"_onSortChange",(e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}});const a={sortOrder:e,sortField:t};g.a.set(A.kBookmarksBarSorting,a),this.setState(e=>({renderedArray:this._getRenderedItems(e.nodes,a,!0===e.newItemAdded?e.editId:"")}))}),M(this,"_getContextMenuItems",e=>{const t=this.state.sorting.sortOrder!==w.a.NO_SORTING,a=m.a.getOptionFunction(e),n=()=>[{handler:this._onTitleSortChange.bind(this,"manually"),type:"checkbox",checked:"manually"===this.state.sorting.sortField,...Object(T.a)("radio","Manually")},{handler:this._onTitleSortChange.bind(this,"title"),type:"checkbox",checked:"title"===this.state.sorting.sortField,...Object(T.a)("by Title")},{handler:this._onTitleSortChange.bind(this,"url"),type:"checkbox",checked:"url"===this.state.sorting.sortField,...Object(T.a)("by Address")},{handler:this._onTitleSortChange.bind(this,"nickname"),type:"checkbox",checked:"nickname"===this.state.sorting.sortField,...Object(T.a)("by Nickname")},{handler:this._onTitleSortChange.bind(this,"description"),type:"checkbox",checked:"description"===this.state.sorting.sortField,...Object(T.a)("by Description")},{handler:this._onTitleSortChange.bind(this,"dateadded"),type:"checkbox",checked:"dateadded"===this.state.sorting.sortField,...Object(T.a)("by Date Created")},p.a.separatorItem,{handler:this._onSortOrderChange,visible:this.state.sorting.sortOrder!==w.a.NO_SORTING&&this.state.sorting.sortOrder===w.a.ASCENDING_SORT,...Object(T.a)("Descending")},{handler:this._onSortOrderChange,visible:this.state.sorting.sortOrder!==w.a.NO_SORTING&&this.state.sorting.sortOrder!==w.a.ASCENDING_SORT,...Object(T.a)("Ascending")}];return m.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_BOOKMARK":return{handler:this._addActiveTab,...a(e,{})};case"CONTEXT_NEW_BOOKMARK":return{handler:this._createNewBookmark,...a(e,{})};case"CONTEXT_NEW_FOLDER":return{handler:this._createNewFolder,...a(e,{})};case"CONTEXT_NEW_SEPARATOR":return{handler:()=>{this._createNewSeparator(void 0)},visible:!t,...a(e,{})};case"CONTEXT_PASTE":return{handler:()=>{this._onPasteContextMenu(o.b.getBookmarkBarFolderId())},...a(e,{})};case"CONTEXT_CONTAINER_SORT":return{items:n(),...a(e,{})};default:return{...a(e,{})}}})}),M(this,"_moveFocus",(e,t,a)=>{const{document:n}=this.context;if(!0===a||Object(k.a)(E.a.findDOMNode(this))){const a=Array.from(n.querySelectorAll("button.bookmarkbarItem")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let n=a.indexOf(e);n="right"===t?n+1>=a.length?0:n+1:n<=0?a.length-1:n-1,e=a[n]}const i=n.querySelector(`button.bookmarkbarItem[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&this.setState({highlightedId:e},()=>i.focus())}}),M(this,"_handleItemActivated",(e,t,a,i)=>{const s=o.b.getItemById(e);if(o.b.isFolder(s)&&a){const e=this._getMenuSorting(),t="top"===N.a.get(A.kBookmarksBarPosition)?"bottom":"top";r.a.show(s.id,this._getFolderSiblings(),e.field,e.order,t,this._onMenuVisibilityChanged)}else if(t&&i){const e=Object(I.b)({ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,button:i.button});n.a.open({...e,bookmarks:n.a.getBookmarksByNode(s)},!0),h.a.setPaneFocus(!1)}}),M(this,"_handleItemEnter",e=>{""!==this.acceptEnterId&&this.acceptEnterId!==e||(Object(k.a)(E.a.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))}),M(this,"_handleItemLeave",e=>{""===this.state.openMenuId&&this.setState({highlightedId:""})}),M(this,"_handleItemBlur",t=>{e.nextTick(()=>{Object(k.a)(E.a.findDOMNode(this))||this.setState({highlightedId:""})})}),M(this,"_handleItemHighlightMissing",e=>{this.setState({highlightedId:e})}),M(this,"_handleLeaveBar",()=>{h.a.setPaneFocus(!1),c.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),M(this,"_getMenuSorting",()=>w.a.toMenuSorting(this.state.sorting.sortOrder,this.state.sorting.sortField)),M(this,"_getFolderSiblings",()=>{const{document:e}=this.context;return Array.from(e.querySelectorAll("button.bookmarkbarItem")).filter(e=>e.classList.contains("folder")||e.classList.contains("chevron")).map(e=>{const t=e.getBoundingClientRect();return{id:e.dataset.id,offset:Number(e.dataset.offset),folderGroup:Boolean(e.classList.contains("folder")),rect:{x:parseInt(t.left),y:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height)}}})}),M(this,"_onMenuVisibilityChanged",e=>{""===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout(()=>{this.acceptEnterId="",this.timer=null},100),Object(k.a)(E.a.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:""})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e})}),M(this,"_isSorted",()=>"manually"!==this.state.sorting.sortField),M(this,"_onContextMenu",e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this._getContextMenuItems("bookmarkbar").then(t=>{Object(y.a)(this.context.vivaldiWindowId,t)(e)})}),M(this,"_renderBookmarkBarButton",(e,t)=>_.a.createElement(l.a,{ref:e.id,key:e.id,node:e,editTitle:this.state.editId===e.id,isCut:-1!==this.state.cutIds.indexOf(e.id),menuOpen:this.state.openMenuId===e.id,display:this.props.display,statusOff:this.props.statusOff,dragover:this.state.dragover,highlighted:this.state.highlightedId===e.id,keyAccess:0===t?this.props.keyAccess:-1,uiFocus:0===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,onEditChanged:this._onEditChanged,onDragStart:this._onDragStart,onDragEnd:this._onDragEndBookmark,onDragOver:this._onDragOver,getDropModeForEvent:this._getDropModeForEvent,addActiveTab:this._addActiveTab,createNewBookmark:this._createNewBookmark,createNewFolder:this._createNewFolder,createNewSeparator:()=>this._createNewSeparator(t),isSorted:this._isSorted(),resetDragover:this._resetDragover,onButtonRendered:this._onButtonRendered,onCut:this._onCutContextMenu.bind(this,e.id),onCopy:this._onCopyContextMenu.bind(this,e.id),onPaste:this._onPasteContextMenu.bind(this,e.id),__source:{fileName:D,lineNumber:720,columnNumber:7}}));const{document:s}=a;this.state={nodes:o.b.getBookmarksBarNodes(),dragover:{id:"",position:"",index:0},maxWidth:s.documentElement?s.documentElement.clientWidth:0,sorting:{sortOrder:w.a.NO_SORTING,sortField:"manually"},cutIds:o.b.getCutIds(),editId:"",newItemAdded:!1,renderedArray:[],openMenuId:"",highlightedId:""}}componentDidMount(){const e=N.a.get(A.kBookmarksBarSorting);this._onSortChange(e.sortOrder,e.sortField),o.b.addChangeListener(this._onStoreChange),u.a.addListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}componentWillUnmount(){this.timer&&clearTimeout(this.timer),o.b.removeChangeListener(this._onStoreChange),u.a.removeListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}render(){let e=10;const t=[];let a=0,n="",i=0;for(let s=0;s<this.state.renderedArray.length;s++){const r=this.state.renderedArray[s];if(!this._isSorted()||!o.b.isSeparator(r)){const o=e+(r.buttonWidth?r.buttonWidth:0);if(o>this.state.maxWidth&&this.state.editId!==r.id){""===this.state.editId&&this.state.renderedArray[0].parentId&&(n=this.state.renderedArray[0].parentId),a=s;break}t.push(this._renderBookmarkBarButton(r,i)),i++,e=o}}const r=""!==n?_.a.createElement(s.a,{id:n,offset:a,keyAccess:-1,menuOpen:this.state.openMenuId===n,highlighted:this.state.highlightedId===n,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,__source:{fileName:D,lineNumber:787,columnNumber:7}}):null;return(_.a.createElement("div",{className:`bookmark-bar ${this.props.display}`,onDragEnter:this._onDragEnter,onDragOver:this._onDragOverBar,onDragLeave:this._resetDragover,onDrop:this._onDropBar,onContextMenu:this._onContextMenu,__source:{fileName:D,lineNumber:803,columnNumber:7}},_.a.createElement(C.a,{className:"observer",onKeyDown:this._handleKeyDown,onResize:this._onResize,__source:{fileName:D,lineNumber:810,columnNumber:9}},t,r)))}}M(P,"contextType",O.a),t.a=P}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(20),o=a.n(r),l=a(74),c=a(9);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.a.PureComponent{constructor(...e){super(...e),u(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id,"Enter"===e.key,!0);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()}),u(this,"_handleMouseDown",e=>{e.preventDefault()}),u(this,"_handleItemMouseUp",e=>{e.button===l.a.kCenter&&e.preventDefault()}),u(this,"_handleClick",e=>{this.props.onItemActivated(this.props.id,!0,!0,e),e.preventDefault(),e.stopPropagation()}),u(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.id)}),u(this,"_handleFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)}),u(this,"_handleMouseEnter",e=>{this.props.onItemEnter(this.props.id)}),u(this,"_handleMouseLeave",e=>{this.props.onItemLeave(this.props.id)})}render(){return i.a.createElement("button",{className:o()({bookmarkbarItem:!0,chevron:!0,highlighted:this.props.highlighted}),"data-id":this.props.id,"data-offset":this.props.offset,tabIndex:this.props.keyAccess,title:Object(s.a)("More bookmarks"),dangerouslySetInnerHTML:{__html:c.T},onKeyDown:this._handleKeyDown,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseUp:this._handleItemMouseUp,onBlur:this._handleBlur,onFocus:this._handleFocus,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\BookmarkBarExtender.jsx",lineNumber:97,columnNumber:7}})}}t.a=m},function(e,t,a){"use strict";(function(e){var n=a(256),i=a(44),s=a(496),r=a(582),o=a(583),l=a(584),c=a(585),u=a(7);let m=!1;const d={show:function(t,a,d,h,p,b){const g=function(e){b(e)},N=function(){e.nextTick(()=>{b("")})};m||(m=!0,function(e){return new Promise(t=>{u.a.zoom.getVivaldiUIZoom(a=>{e.forEach(e=>{e.rect.x=parseInt((e.rect.x+1)*a),e.rect.y=parseInt((e.rect.y+0)*a),e.rect.width=parseInt(e.rect.width*a),e.rect.height=parseInt(e.rect.height*a)}),t()})})}(a).then(()=>{u.a.menubarMenu.onOpenBookmark.addListener(n.a.onOpen),u.a.menubarMenu.onBookmarkAction.addListener(n.a.onAction),u.a.menubarMenu.onHover.addListener(n.a.onHover),u.a.bookmarkContextMenu.onOpen.addListener(g),u.a.bookmarkContextMenu.onClose.addListener(N),u.a.bookmarkContextMenu.show({id:t,siblings:a,sortField:d,sortOrder:h,edge:i.default.getBookmarkExtrasEdge(),icons:[s.a,r.a,o.a,l.a,c.a]},()=>{m=!1,n.a.onHover(""),u.a.menubarMenu.onOpenBookmark.removeListener(n.a.onOpen),u.a.menubarMenu.onBookmarkAction.removeListener(n.a.onAction),u.a.menubarMenu.onHover.addListener(n.a.onHover),u.a.bookmarkContextMenu.onOpen.removeListener(g),u.a.bookmarkContextMenu.onClose.removeListener(N)})}))}};t.a=d}).call(this,a(82))},function(e,t,a){"use strict";var n=a(79),i=a(50),s=a(28),r=a(91),o=a(111),l=a(323),c=a(36),u=a(6),m=a(0),d=a.n(m),h=a(40),p=a.n(h),b=a(65),g=a(25),N=a(17),f=a(2),_=a(20),v=a.n(_),E=a(78),C=a(74),w=a(1),O=a(497),y=a(23),S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbarItem.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends d.a.Component{constructor(e){super(e),T(this,"dropMode",{support:!1,copy:!1}),T(this,"centerButtonPressed",!1),T(this,"regularWidth",-1),T(this,"canHandleClick",!0),T(this,"_edit",()=>{c.a.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})}),T(this,"_rename",()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged(this.props.node.id)}),T(this,"_handleEditChange",e=>{this.setState({title:e.target.value})}),T(this,"_handleEditKeyDown",e=>{switch(e.key){case"Enter":this._saveTitle(e.currentTarget.value),this.refs.input.blur();break;case"Escape":this._cancelEdit(),this.refs.input.blur()}}),T(this,"_killEvent",e=>{e.preventDefault(),e.stopPropagation()}),T(this,"_cancelEdit",()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged("")}),T(this,"_saveTitle",e=>{i.a.update(this.props.node.id,{title:e})}),T(this,"_handleFocus",e=>{e.currentTarget.select()}),T(this,"_handleEditBlur",e=>{this.state.title||this._cancelEdit(),this.props.onEditChanged(""),this.props.onButtonRendered(this.props.node.id,this.regularWidth)}),T(this,"_delete",()=>{i.a.remove([this.props.node.id])}),T(this,"_handleItemMouseDown",e=>{e.button!==C.a.kLeft&&(this.centerButtonPressed=e.button===C.a.kCenter,e.preventDefault()),this.canHandleClick=!this.props.menuOpen}),T(this,"_handleItemMouseUp",e=>{e.button===C.a.kCenter&&(e.preventDefault(),!0===this.centerButtonPressed&&0===e.buttons&&this.props.onItemActivated(this.props.node.id,!0,!1,e))}),T(this,"_handleClick",e=>{this.canHandleClick&&this.props.onItemActivated(this.props.node.id,!0,!0,e),e.preventDefault(),e.stopPropagation()}),T(this,"_handleKeyDown",e=>{switch("Enter"===e.key&&!0===e.repeat&&e.preventDefault(),e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.node.id,"Enter"===e.key,!0,e);break;case"ArrowLeft":this.props.moveFocus(this.props.node.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.node.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()}),T(this,"_handleDrop",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support&&""!==this.props.dragover.position){const t="on"===this.props.dragover.position?this.props.node.id:this.props.node.parentId,a="on"===this.props.dragover.position?0:this.props.dragover.index+("right"===this.props.dragover.position?1:0);t&&i.a.onDropEvent(e,t,a)}this.props.resetDragover()}),T(this,"_handleDragStart",e=>{const t=N.a.isIncognito(this.context.vivaldiWindowId);this.props.onDragStart(this.props.node.id),this.setState({dragging:!0});const a=JSON.stringify([this.props.node.id.toString()]);e.dataTransfer.setData(n.c,a);const i=y.p.getHoverUrl(s.b.getUrlByNode(this.props.node));Object(O.a)(e,i,this.props.node.title,t),e.dataTransfer.effectAllowed="all"}),T(this,"_handleDragEnd",e=>{this.setState({dragging:!1}),this.props.onDragEnd()}),T(this,"_handleDragLeave",e=>{}),T(this,"_handleDragEnter",e=>{this.dropMode=this.props.getDropModeForEvent(e)}),T(this,"_handleDragOver",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move",this.props.onDragOver(this.props.node,e))}),T(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.node.id)}),T(this,"_handleMouseEnter",e=>{if(!this.props.statusOff){const e=s.b.getUrlByNode(this.props.node);b.a.setStatus(e||this.props.node.title)}this.props.onItemEnter(this.props.node.id)}),T(this,"_handleMouseLeave",e=>{this.props.statusOff||b.a.clearStatus(),this.centerButtonPressed=!1,this.props.onItemLeave(this.props.node.id)}),T(this,"_openInNewWindow",(e,t)=>{const a={bookmarks:n.a.getBookmarksByNode(e),inNewWindow:!0,incognito:t};n.a.open(a,!0)}),T(this,"_openInNewTab",(e,t)=>{const a={bookmarks:n.a.getBookmarksByNode(e),inCurrent:!1,inBackground:t||u.a.get(w.kTabsOpenNewInBackground)};n.a.open(a,!0)}),T(this,"_open",e=>{const t={bookmarks:n.a.getBookmarksByNode(e),inCurrent:!0};n.a.open(t,!0)}),T(this,"_getContextMenuItems",(e,t)=>{const a=s.b.isSeparator(t),n=r.a.getOptionFunction(e);return r.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:this._openInNewTab.bind(this,t,!1),visible:!a,...n(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:this._openInNewTab.bind(this,t,!0),visible:!a&&!u.a.get(w.kTabsOpenNewInBackground),...n(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:this._open.bind(this,t),visible:!a,...n(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:this._openInNewWindow.bind(this,t,!1),visible:!a,...n(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:this._openInNewWindow.bind(this,t,!0),visible:!a,...n(e,{})};case"CONTEXT_BOOKMARK":return{handler:this.props.addActiveTab,visible:!a,...n(e,{})};case"CONTEXT_NEW_BOOKMARK":return{handler:this.props.createNewBookmark,...n(e,{})};case"CONTEXT_NEW_FOLDER":return{handler:this.props.createNewFolder,...n(e,{})};case"CONTEXT_NEW_SEPARATOR":return{handler:this.props.createNewSeparator,visible:!this.props.isSorted,...n(e,{})};case"CONTEXT_EDIT":return{handler:this._edit,visible:!a,...n(e,{})};case"CONTEXT_RENAME":return{handler:this._rename,visible:!a,...n(e,{})};case"CONTEXT_CUT":return{handler:this.props.onCut,visible:!a,...n(e,{})};case"CONTEXT_COPY":return{handler:this.props.onCopy,visible:!a,...n(e,{})};case"CONTEXT_PASTE":return{handler:this.props.onPaste,visible:!a,...n(e,{})};case"CONTEXT_DELETE":return{handler:this._delete,...n(e,{})};default:return{...n(e,{})}}})}),T(this,"_onContextMenu",e=>{this.props.editTitle?e.stopPropagation():(e.persist(),e.preventDefault(),e.stopPropagation(),this._getContextMenuItems("bookmarkbaritem",this.props.node).then(t=>{Object(E.a)(this.context.vivaldiWindowId,t)(e)}))}),T(this,"_onFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.node.id)}),this.state={dragging:!1,title:e.node.title}}componentDidUpdate(){const e=p.a.findDOMNode(this.refs.button);e instanceof HTMLElement&&(this.props.onButtonRendered(this.props.node.id,e.offsetWidth),this.props.editTitle||(this.regularWidth=e.offsetWidth))}componentDidMount(){const e=p.a.findDOMNode(this.refs.button);e instanceof HTMLElement&&this.props.onButtonRendered(this.props.node.id,e.offsetWidth)}render(){const e=this.props.node,t=s.b.getUrlByNode(e),a=s.b.isSeparator(e),n=s.b.isFolder(e);let i;n&&"icon"!==this.props.display?i=Object(f.a)("Show folder contents"):"icon"===this.props.display&&e.title?(i=e.title,t&&(i=i+"\n"+t)):t&&(i=t);let r=!1;"icon"!==this.props.display&&(r="iconexceptfolders"!==this.props.display||!t);const c=e.faviconUrl?e.faviconUrl:e.url;return(d.a.createElement("button",{key:e.id,ref:"button","data-id":e.id,"data-offset":0,title:i,tabIndex:this.props.keyAccess,className:v()({uifocusstop:this.props.uiFocus,bookmarkbarItem:!0,highlighted:this.props.highlighted||this.props.menuOpen,folder:!a&&!e.url,"data-cut":this.props.isCut,dragging:this.state.dragging,dragover:this.props.dragover.id===e.id&&"on"===this.props.dragover.position,dragoverLeft:this.props.dragover.id===e.id&&"left"===this.props.dragover.position,dragoverRight:this.props.dragover.id===e.id&&"right"===this.props.dragover.position}),draggable:!this.props.editTitle,onDragStart:this._handleDragStart,onDragEnd:this._handleDragEnd,onDragEnter:this._handleDragEnter,onDragOver:this._handleDragOver,onDrop:this._handleDrop,onBlur:this._handleBlur,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onClick:this.props.editTitle?void 0:this._handleClick,onMouseDown:this.props.editTitle?void 0:this._handleItemMouseDown,onMouseUp:this.props.editTitle?void 0:this._handleItemMouseUp,onKeyDown:this.props.editTitle?void 0:this._handleKeyDown,onContextMenu:this._onContextMenu,onFocus:this._onFocus,onKeyUp:this._killEvent,__source:{fileName:S,lineNumber:525,columnNumber:7}},a&&d.a.createElement("span",{className:"separator",__source:{fileName:S,lineNumber:561,columnNumber:26}}),!a&&c&&"text"!==this.props.display&&d.a.createElement(o.a,{url:c,__source:{fileName:S,lineNumber:563,columnNumber:11}}),!a&&!e.url&&"text"!==this.props.display&&d.a.createElement(l.a,{speeddial:e.speeddial,__source:{fileName:S,lineNumber:567,columnNumber:11}}),!a&&!this.props.editTitle&&r&&e.title&&d.a.createElement("span",{__source:{fileName:S,lineNumber:571,columnNumber:11}},("text"===this.props.display&&n?"▾ ":"")+e.title),this.props.editTitle&&d.a.createElement("input",{ref:"input",type:"text",value:this.state.title,onFocus:this._handleFocus,onBlur:this._handleEditBlur,onClick:this._killEvent,onKeyDown:this._handleEditKeyDown,onChange:this._handleEditChange,autoFocus:!0,__source:{fileName:S,lineNumber:579,columnNumber:11}})))}}T(k,"contextType",g.a),t.a=k},function(e,t,a){"use strict";var n=a(0),i=a(271),s=a(72),r=a(40),o=a.n(r),l=a(25),c=a(20),u=a.n(c),m=a(234),d=a(1423),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonPopup.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t,a,n){if(!n)return{};const i={};return"above"===t?i.bottom=Math.round(n.height-a.top-n.top+3)+"px":i.top=Math.round(a.bottom-n.top+3)+"px","left"===e?i.right=Math.round(Math.max(n.right-a.right,3))+"px":i.left="right"===e?Math.round(Math.max(a.left,3))+"px":Math.round(a.left+a.width/2)+"px",i}class g extends n.PureComponent{constructor(e,t){super(e),p(this,"popupRef",n.createRef()),p(this,"onIntersect",e=>{e[0].intersectionRatio<=0&&this.props.isVisible&&this.props.hidePopup()}),p(this,"getEdgeMargin",e=>{let t=Number.MAX_SAFE_INTEGER;return"right"===e?t=this.props.buttonRect.left:"left"===e&&(t=this.context.innerWidth-this.props.buttonRect.right),t<=3?3-t:0}),p(this,"handleClickOutside",e=>{this.props.hidePopup()}),p(this,"keyDown",e=>{e.keyCode===s.a.KEY_ESCAPE&&this.props.hidePopup()}),this.portalContainer=t.document.getElementById("browser")}componentDidMount(){this.intersectionObserver=new IntersectionObserver(this.onIntersect,{root:this.portalContainer})}componentDidUpdate(){this.props.isVisible&&this.props.buttonRef.current?this.intersectionObserver.observe(this.props.buttonRef.current):this.props.buttonRef.current&&this.intersectionObserver.observe(this.props.buttonRef.current)}render(){const{verticalPosition:e,popupClassName:t,hasLightArrow:a}=this.props,s=this.props.width||200,r=function(e,t,a,n){if(!a)return;const i=a.right,s=t.left-a.left,r=i-t.right,o=e/2<s+t.width/2-3,l=e/2<r+t.width/2-3,c=e+t.width<r,u=e+t.width<s;if(o&&l){if("left"===n)return"right";if("right"===n)return"left"}else{if(u)return"left";if(c)return"right"}}(s,this.props.buttonRect,this.props.windowRect,this.props.anchorPosition)||"centered";let l={"--popupWidth":Math.round(s)+"px","--buttonWidth":Math.round(this.props.buttonRect.width)+"px","--buttonHeight":Math.round(this.props.buttonRect.height)+"px","--edgeMargin":Math.round(this.getEdgeMargin(r))+"px"};l={...l,...b(r,e,this.props.buttonRect,this.props.windowRect)};const c=n.createElement(d.a,{classNames:"button-popup",in:this.props.isVisible,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:h,lineNumber:176,columnNumber:7}},n.createElement(i.a,{focusName:"focus-popup-area",forceTrap:!0,onKeyDown:this.keyDown,style:l,className:u()(t,"button-popup",`button-popup-${r}`,`button-popup-${e}`,`button-popup-arrow-${a?"light":"dark"}`),childRef:this.popupRef,__source:{fileName:h,lineNumber:187,columnNumber:9}},this.props.children));return this.portalContainer?o.a.createPortal(c,this.portalContainer):c}}p(g,"contextType",l.a),t.a=Object(m.a)(g)},function(e,t,a){"use strict";(function(e){var n=a(387),i=a(693),s=a(72),r=a(0),o=a.n(r),l=a(40),c=a.n(l),u=a(25),m=a(2),d=a(9),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureArea.jsx";t.a=function(){const t=document.getElementById("app"),a=Object(r.useRef)(null),l=Object(r.useRef)(null),p=Object(r.useRef)(0),b=Object(r.useRef)(0),g=Object(r.useRef)(0),N=Object(r.useRef)(0),f=Object(r.useContext)(u.a),[_,v]=Object(r.useState)(null),[E,C]=Object(r.useState)(!1);if(Object(r.useEffect)(()=>{var e;null===(e=a.current)||void 0===e||e.focus()}),!t)return null;const w=()=>{const{x3:e,x4:t,y3:a,y4:n}=O(),i=f.outerWidth,s=f.outerHeight;v({rectStyle:{left:e,top:a,width:t-e,height:n-a},areaStyle:{background:"transparent",borderWidth:`${a}px ${i-t}px ${s-n}px ${e}px`}})},O=()=>({x3:Math.min(p.current,b.current),x4:Math.max(p.current,b.current),y3:Math.min(g.current,N.current),y4:Math.max(g.current,N.current)}),y=()=>{const{current:t}=l;if(!t)return;const{left:a,top:s,width:r,height:o}=t.getBoundingClientRect();i.a.updateCapture();const c={x:a,y:s,width:r,height:o};e.nextTick(()=>{n.a.doCapture(c)})};return c.a.createPortal(o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:a,style:null==_?void 0:_.areaStyle,id:"capture-area",tabIndex:0,onKeyDown:e=>{const{keyCode:t}=e;t===s.a.KEY_ESCAPE?(n.a.cancelCallback(),E&&C(!1)):t!==s.a.KEY_ENTER&&t!==s.a.KEY_RETURN||y()},onPointerDown:e=>{C(!0),p.current=b.current=e.clientX,g.current=N.current=e.clientY,w(),e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString())},onPointerMove:e=>{if(E){b.current=e.clientX,N.current=e.clientY;const t=p.current,a=b.current,n=g.current,i=N.current;a>t?f.outerWidth-a<10&&(b.current=f.outerWidth):a<10&&(b.current=0),i>n?f.outerHeight-i<10&&(N.current=f.outerHeight):i<10&&(N.current=0),w()}},onPointerUp:e=>{if(E){e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString()),C(!1);const{current:t}=l;if(!t)return;const{width:a,height:i}=t.getBoundingClientRect();a<=3&&i<=3&&n.a.cancelCallback()}},__source:{fileName:h,lineNumber:160,columnNumber:7}}),o.a.createElement("div",{ref:l,style:null==_?void 0:_.rectStyle,id:"capture-rect",__source:{fileName:h,lineNumber:170,columnNumber:7}},!E&&o.a.createElement("button",{id:"webpage-capture-button",className:"FormButton",onClick:y,type:"button",title:Object(m.a)("Capture Selection"),dangerouslySetInnerHTML:{__html:d.P.medium},__source:{fileName:h,lineNumber:175,columnNumber:9}}))),t)}}).call(this,a(82))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return g}));var n=a(0),i=a(28),s=a(323),r=a(1280),o=a(792),l=a(2),c=a(10),u=a(20),m=a.n(u),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\BookmarkLocationSelector.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p({onValueChange:e,value:t,placeholder:a,onAddClick:i}){return n.createElement("div",{className:"BookmarkLocationSelector-SearchInput",__source:{fileName:d,lineNumber:46,columnNumber:10}},n.createElement("input",{placeholder:a,className:"BookmarkLocationSelector-SearchInput-Input",type:"search",value:t,onChange:({currentTarget:t})=>e(t.value),__source:{fileName:d,lineNumber:47,columnNumber:5}}),n.createElement(o.a,{type:"search",size:18,className:"BookmarkLocationSelector-SearchInput-Icon",__source:{fileName:d,lineNumber:54,columnNumber:5}}),n.createElement("button",{type:"button",className:"BookmarkLocationSelector-SearchInput-Button",onClick:i,title:t?Object(l.a)("Create “$1” Folder",[t]):Object(l.a)("command","New Folder"),__source:{fileName:d,lineNumber:59,columnNumber:5}},n.createElement(s.a,{__source:{fileName:d,lineNumber:67,columnNumber:7}})))}const b=Object.freeze({folders:!0,bookmarks:!1});class g extends n.PureComponent{constructor(...t){super(...t),h(this,"refFolderList",n.createRef()),h(this,"state",{nodes:i.b.getFilteredTree("",{...b,root:"bookmarks"===this.props.mode}).nodes,filter:"",isEditing:!1}),h(this,"handleBookmarkStoreChange",()=>{const e=[...i.b.getFilteredTree("",{...b,root:"bookmarks"===this.props.mode}).nodes];this.setState({nodes:e})}),h(this,"handleNewFolderButtonClick",async()=>{var e,t;this.setState({isEditing:!0});const a=this.state.filter||Object(l.a)("command","New Folder"),n=this.state.filter?"1":this.props.parentId,i="speeddial"===this.props.mode&&"1"===n,s=await c.a.bookmarks.create({parentId:n,title:a,speeddial:i});null===(e=this.refFolderList.current)||void 0===e||e.expand(n),await this.setParent(s.id),null===(t=this.refFolderList.current)||void 0===t||t.startInlineEdit(s.id),this.setState({filter:""})}),h(this,"setParent",async e=>{await this.props.onParentIdChange(e)}),h(this,"scrollToId",async t=>{var a;await new Promise(t=>e.nextTick(t)),null===(a=this.refFolderList.current)||void 0===a||a.scrollToId(t),await new Promise(t=>e.nextTick(t))}),h(this,"handleFolderTabChange",async e=>{var t;await this.props.onModeChange(e),this.handleBookmarkStoreChange(),null===(t=this.refFolderList.current)||void 0===t||t.focus()}),h(this,"handleFolderTitleChange",(e,t)=>{this.setState({isEditing:!1}),this.props.onFolderTitleChange(e,t)}),h(this,"handleFilterChange",e=>{const t=[...i.b.getFilteredTree(e,{...b,root:"bookmarks"===this.props.mode}).nodes];this.setState({filter:e,nodes:t},()=>{var e;return null===(e=this.refFolderList.current)||void 0===e?void 0:e.expandAll()})})}componentDidMount(){i.b.addChangeListener(this.handleBookmarkStoreChange)}componentWillUnmount(){i.b.removeChangeListener(this.handleBookmarkStoreChange)}render(){const{className:e}=this.props,t=this.state.nodes,a="speeddial"===this.props.mode?function e(t){return t.children?t.children.reduce((t,a)=>{var n;if(a.speeddial)return t.push(a),t;if(null===(n=a.children)||void 0===n?void 0:n.length){const n=e(a);((null==n?void 0:n.length)||a.speeddial)&&t.push({...a,children:n})}return t},[]):[]}({children:t}):t;return n.createElement("div",{className:m()("BookmarkLocationSelector",e),__source:{fileName:d,lineNumber:182,columnNumber:12}},n.createElement("div",{className:"BookmarkLocationSelector-Header",__source:{fileName:d,lineNumber:183,columnNumber:7}},n.createElement("button",{type:"button",className:m()("BookmarkLocationSelector-ToggleButtonGroup-Button",{"BookmarkLocationSelector-ToggleButtonGroup-Button--Pressed":"bookmarks"===this.props.mode}),onClick:()=>this.handleFolderTabChange("bookmarks"),__source:{fileName:d,lineNumber:184,columnNumber:9}},n.createElement(s.a,{speeddial:!1,open:!1,__source:{fileName:d,lineNumber:190,columnNumber:11}}),Object(l.a)("Bookmarks")),n.createElement("button",{type:"button",className:m()("BookmarkLocationSelector-ToggleButtonGroup-Button",{"BookmarkLocationSelector-ToggleButtonGroup-Button--Pressed":"speeddial"===this.props.mode}),onClick:()=>this.handleFolderTabChange("speeddial"),__source:{fileName:d,lineNumber:193,columnNumber:9}},n.createElement(s.a,{speeddial:!0,open:!1,__source:{fileName:d,lineNumber:199,columnNumber:11}}),Object(l.a)("Speed Dials"))),n.createElement(p,{value:this.state.filter,onValueChange:this.handleFilterChange,placeholder:"speeddial"===this.props.mode?Object(l.a)("Find in Speed Dial Folders"):Object(l.a)("Find in All Folders"),onAddClick:this.handleNewFolderButtonClick,__source:{fileName:d,lineNumber:204,columnNumber:7}}),n.createElement(r.a,{key:this.props.mode,ref:this.refFolderList,folders:a,onSelect:this.setParent,selectedId:this.props.parentId,isEditing:this.state.isEditing,expandAll:"speeddial"===this.props.mode,onFolderTitleChange:this.handleFolderTitleChange,className:"BookmarkLocationSelector-FolderList",defaultEditFolderText:this.state.filter||Object(l.a)("command","New Folder"),__source:{fileName:d,lineNumber:215,columnNumber:7}}))}}}).call(this,a(82))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a(28),i=a(705),s=a(0),r=a.n(s),o=a(185),l=a(20),c=a.n(l),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\FolderList.jsx";function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h({node:e,inlineEditText:t,onFocus:a,onChange:n,onBlur:s,onExpandClick:o}){return r.a.createElement(i.a,{key:e.id,node:e,inlineEditText:t,inManager:!1,fullView:!1,showBadge:!1,onExpandClick:o,onFocus:a,onChange:n,onBlur:s,__source:{fileName:u,lineNumber:19,columnNumber:10}})}const p=n.b.getRootId();class b extends r.a.PureComponent{constructor(...e){super(...e),d(this,"refTreeList",r.a.createRef()),d(this,"setSelectedId",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.setSelectedIds([e])}),d(this,"scrollToId",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.scrollToId(e)}),d(this,"expand",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.expand(e)}),d(this,"expandAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAll()}),d(this,"toggleSelectedExpansion",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),d(this,"startInlineEdit",e=>{var t;this.setSelectedId(e),this.scrollToId(e),this.focus(),null===(t=this.refTreeList.current)||void 0===t||t.startInlineEdit(e)}),d(this,"focus",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.focusTree()})}componentDidMount(){this.setFolderTreeView()}componentDidUpdate(e){var t;const a=null===(t=this.refTreeList.current)||void 0===t?void 0:t.getSelected();e.selectedId===this.props.selectedId||a===this.props.selectedId||this.props.isEditing||this.setFolderTreeView()}async setFolderTreeView(){var t;const{selectedId:a}=this.props;var n,i,s,r;((null===(t=this.refTreeList.current)||void 0===t?void 0:t.getSelected())!==a&&this.setSelectedId(a),this.props.expandAll)?null===(n=this.refTreeList.current)||void 0===n||n.expandAll():(null===(i=this.refTreeList.current)||void 0===i||i.collapseAll(),await new Promise(t=>e.nextTick(t)),a&&a!==p?null===(s=this.refTreeList.current)||void 0===s||s.expandToId(a):null===(r=this.refTreeList.current)||void 0===r||r.expand(p));var o;(await new Promise(t=>e.nextTick(t)),a&&"1"!==a)&&(null===(o=this.refTreeList.current)||void 0===o||o.scrollToId(a))}render(){const{folders:e,onSelect:t}=this.props;return(r.a.createElement(o.a,{ref:this.refTreeList,className:c()(this.props.className,"vivaldi-tree"),nodes:e,hasChildren:e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length},isFolder:e=>{var t;return Boolean((null===(t=e.children)||void 0===t?void 0:t.length)&&!e.url)},onSelect:e=>e&&t(e.id),rowComponent:e=>r.a.createElement(h,m({},e,{onExpandClick:e=>this.toggleSelectedExpansion(e),__source:{fileName:u,lineNumber:137,columnNumber:9}})),saveTitle:this.props.onFolderTitleChange,isValidToEdit:()=>!0,getTitle:()=>this.props.defaultEditFolderText,enableDragAndDrop:!1,__source:{fileName:u,lineNumber:127,columnNumber:12}}))}}}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(74),s=a(25),r=a(20),o=a.n(r),l=a(706),c=a(133),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TreeItem.jsx";function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,b(e,t,"get"))}function p(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,b(e,t,"set"),a),a}function b(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function g(e,t,a){switch(e){case"style":case"componentProps":return Object(l.a)(t[e],a[e])}return Object(c.a)(t[e],a[e])}var N=new WeakMap,f=new WeakMap;class _ extends n.Component{constructor(...e){super(...e),N.set(this,{writable:!0,value:{}}),f.set(this,{writable:!0,value:void 0}),d(this,"isFolder",()=>this.props.isFolder(this.props.treeItem)),d(this,"hasChildren",()=>this.props.hasChildren(this.props.treeItem)),d(this,"onClick",e=>{this.props.onItemClick(this.props.treeItem,e),e.stopPropagation()}),d(this,"onDoubleClick",e=>{void 0===this.props.inlineEditText&&(this.isFolder()&&this.onExpandClick(e),this.props.onItemDoubleClick(this.props.treeItem,e))}),d(this,"onDragStart",e=>{const{inlineEditText:t,validateForDrag:a,getAllSelectedItems:n,mimeType:s}=this.props;if(!a||void 0!==t)return;let r=n().map(e=>e.id);r=a(r),0!==r.length&&(this.props.onDragStart(),s&&e.dataTransfer.setData(s,JSON.stringify(r)),e.dataTransfer.setData("text/uri-list",this.props.getDragData&&this.props.getDragData("text/uri-list",r)),e.dataTransfer.setData("text/plain",this.props.getDragData&&this.props.getDragData("text/plain",r)),e.dataTransfer.setData("vivaldi/x-title",this.props.getDragData&&this.props.getDragData("vivaldi/x-title",r)),this.props.setCustomDragData&&this.props.setCustomDragData(e.dataTransfer,r),e.dataTransfer.effectAllowed="all",p(this,f,!0),i.a.setWebviewPointerEvents(!1,this.context.document))}),d(this,"onDragEnd",e=>{p(this,f,!1),i.a.setWebviewPointerEvents(!0,this.context.document),this.props.onDragEnd()}),d(this,"onDragEnter",e=>{this.props.supportDrop&&p(this,N,this.props.supportDrop(this.props.treeItem,e))}),d(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),!0===h(this,N).available&&this.props.onDrop(this.props.treeItem,h(this,N),e)}),d(this,"onDragOver",e=>{const{onDragOver:t,treeItem:a}=this.props;e.stopPropagation(),!0===h(this,N).available&&t&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",t(a,h(this,N),e))}),d(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&!0===h(this,N).available&&this.props.onDragLeave(this.props.treeItem,e)}),d(this,"onMouseDown",e=>{const t=!this.props.isDraggable&&void 0===this.props.inlineEditText;this.props.onMouseDown(this.props.treeItem,t,e)}),d(this,"onMouseUp",e=>{this.props.onMouseUp(this.props.treeItem,e),0===e.buttons&&h(this,f)&&this.onDragEnd(e)}),d(this,"onExpandClick",e=>{this.props.treeItem.children&&this.props.treeItem.children.length>0&&(this.props.toggle(this.props.treeItem.id),e.preventDefault(),e.stopPropagation())})}shouldComponentUpdate(e){return!Object(l.a)(this.props,e,g)}render(){const{Component:e,componentProps:t}=this.props,a=!!this.props.isSeparator&&this.props.isSeparator(this.props.treeItem),i=this.props.selected,s=this.props.dragOverObj.id===this.props.treeItem.id,r=this.props.dragOverObj.position;return n.createElement("div",{style:this.props.style,"data-id":this.props.treeItem.id,className:"tree-item","data-selected":i?"":null,"data-lead":this.props.lead?"":null,"data-cut":this.props.isCut?"":null,"data-expanded":this.props.isExpanded?"":null,onDragEnter:this.props.enableDragAndDrop?this.onDragEnter:null,onDragOver:this.props.enableDragAndDrop?this.onDragOver:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeave:null,onDrop:this.props.enableDragAndDrop?this.onDrop:null,onContextMenu:this.props.onContextMenu,__source:{fileName:u,lineNumber:209,columnNumber:7}},n.createElement("div",{className:o()("tree-row",{folder:this.isFolder(),"tree-row-selected":i,"tree-row-selected--first":this.props.isFirstSelected,"tree-row-selected--last":this.props.isLastSelected,dragover:s&&"on"===r,dragoverAbove:s&&"above"===r,dragoverBelow:s&&"below"===r,"speeddial-folder":this.isFolder()&&this.props.treeItem.speeddial}),"data-separator":a?"":null,"data-selected":i?"":null,"data-nofocus":i&&!this.props.hasFocus?"":null,onClick:this.onClick,onDoubleClick:this.onDoubleClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,draggable:this.props.isDraggable,onDragStart:this.props.enableDragAndDrop?this.onDragStart:null,onDragEnd:this.props.enableDragAndDrop?this.onDragEnd:null,__source:{fileName:u,lineNumber:222,columnNumber:9}},n.createElement(e,m({},t,{__source:{fileName:u,lineNumber:243,columnNumber:11}}))))}}d(_,"contextType",s.a),t.a=_},,function(e,t,a){"use strict";var n=a(36),i=a(69),s=a(0),r=a.n(s),o=a(22),l=a(2),c=a(10),u=a(20),m=a.n(u),d=a(7),h=a(441),p=a(9),b=a(236),g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\blocker\\ContentBlockerPopup.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=Object(l.a)("(Default)"),_=["tracking","ad_blocking"];class v extends r.a.PureComponent{constructor(...e){super(...e),N(this,"state",{adBlockingEnabled:!1,trackerBlockingEnabled:!1,isBlockingAds:!1,isBlockingTrackers:!1,blockedTrackerList:void 0,blockedAdList:void 0,showBlockedTrackers:!1,showBlockedAds:!1,popupOpen:!1,ruleSourceReady:!1}),N(this,"getRules",()=>_.forEach(e=>Object(h.b)(e,t=>{this.setState(t,()=>this.updateException(e))}))),N(this,"getHostname",e=>{let t="";try{t=new URL(e||this.props.url).hostname}catch(e){}return t}),N(this,"togglePopup",()=>this.setState(e=>({popupOpen:!e.popupOpen}))),N(this,"hidePopup",()=>this.setState({popupOpen:!1})),N(this,"showSettings",()=>{this.togglePopup(),n.a.showSettings("privacy",{scroll:"tracker_and_ad_blocking"})}),N(this,"getActiveExceptionList",e=>{const t="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";return this.state[t]?"exempt_list":"process_list"}),N(this,"updateBlockingState",()=>{_.map(e=>this.updateException(e)),_.map(e=>this.updateBlocked(e,[this.props.pageId]))}),N(this,"updateException",e=>d.a.contentBlocking.isExemptOfFiltering(e,this.props.url,t=>{this._isMounted&&("tracking"===e?this.setState({isBlockingTrackers:!t}):this.setState({isBlockingAds:!t}))})),N(this,"updateSources",()=>_.forEach(e=>{d.a.contentBlocking.getRuleSources(e,e=>{this._isMounted&&(e.find(e=>""!==e.rules_list_checksum)?this.setState({ruleSourceReady:!0}):this.setState({ruleSourceReady:!1}))})})),N(this,"updateBlocked",Object(b.default)((e,t)=>{const a="tracking"===e?"blockedTrackerList":"blockedAdList";t.includes(this.props.pageId)&&d.a.contentBlocking.getBlockedUrlsInfo(e,[this.props.pageId],e=>{this._isMounted&&this.setState({[a]:e[0]})})},500)),N(this,"setPageBlocking",e=>{const t=e.target.value,a=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0),n=this.getHostname();Object(h.c)(n,t,!0,a)}),N(this,"handleExpandClick",(e,t)=>{t.preventDefault(),"tracking"===e?this.setState(e=>({showBlockedTrackers:!e.showBlockedTrackers})):this.setState(e=>({showBlockedAds:!e.showBlockedAds}))}),N(this,"renderBlocked",e=>{if(!this.props.blockerVisible)return null;const t="tracking"===e?this.state.blockedTrackerList:this.state.blockedAdList;if(!t)return null;const a=t.blocked_urls_info.slice(0).reduce((e,t)=>{const a=this.getHostname(t.url);return e[a]=(e[a]||0)+t.blocked_count,e},{});for(const e of t.blocked_trackers_info){const t=e.domain;a[t]=(a[t]||0)+e.blocked_count}const n=this.state.showBlockedTrackers&&"tracking"===e||this.state.showBlockedAds&&"ad_blocking"===e;return(r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:m()({"ContentBlocker-Blocked-Arrow":!0,"ContentBlocker-Blocked-Arrow--Expanded":n}),onMouseDown:this.handleExpandClick.bind(null,e),tabIndex:this.props.tabIndex,__source:{fileName:g,lineNumber:233,columnNumber:7}},r.a.createElement("h3",{__source:{fileName:g,lineNumber:240,columnNumber:9}},"tracking"===e?Object(l.a)("$1 Tracker Blocked","$1 Trackers Blocked",[t.total_blocked_count]):Object(l.a)("$1 Ad Blocked","$1 Ads Blocked",[t.total_blocked_count])),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:p.rb},__source:{fileName:g,lineNumber:247,columnNumber:9}})),n&&r.a.createElement("ul",{__source:{fileName:g,lineNumber:250,columnNumber:9}},Object.keys(a).sort((e,t)=>a[e]>a[t]?-1:1).map(e=>r.a.createElement("li",{key:e,__source:{fileName:g,lineNumber:254,columnNumber:15}},r.a.createElement("span",{__source:{fileName:g,lineNumber:255,columnNumber:17}},e),r.a.createElement("span",{__source:{fileName:g,lineNumber:256,columnNumber:17}},a[e]))))))})}componentDidMount(){this._isMounted=!0,this.getRules(),this.updateSources(),this.updateBlockingState(),d.a.contentBlocking.onStateChanged.addListener(this.getRules),d.a.contentBlocking.onUrlsBlocked.addListener(this.updateBlocked),d.a.contentBlocking.onExceptionsChanged.addListener(this.getRules),d.a.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),d.a.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources),d.a.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),c.a.webNavigation.onCommitted.addListener(this.updateBlockingState)}componentDidUpdate(e){this.props.url!==e.url&&this.updateBlockingState()}componentWillUnmount(){this._isMounted=!1,d.a.contentBlocking.onStateChanged.removeListener(this.getRules),d.a.contentBlocking.onUrlsBlocked.removeListener(this.updateBlocked),d.a.contentBlocking.onExceptionsChanged.removeListener(this.getRules),d.a.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),d.a.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources),d.a.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),c.a.webNavigation.onCommitted.removeListener(this.updateBlockingState)}render(){const{ruleSourceReady:e,trackerBlockingEnabled:t,isBlockingTrackers:a,blockedTrackerList:n,adBlockingEnabled:s,isBlockingAds:c,blockedAdList:u}=this.state,{blockerVisible:d,tabIndex:h}=this.props,b=0+(t?1:0)+(s?1:0),N=0+(a?1:0)+(c?1:0),_=n||u;return r.a.createElement(o.a,{buttonStyle:{"--trackers":!_&&d&&1===N?"1":"0","--ads":!_&&d&&2===N?"1":"0","--blocking":n&&a||u&&c?"1":"0"},tooltip:Object(l.a)("Content Blocker")+(e&&a?"\n• "+Object(l.a)("Tracker Blocking Active"):"")+(c&&e?"\n• "+Object(l.a)("Ad Blocking Active"):"")+(e?"":"\n• "+Object(l.a)("Blocking is inactive due to missing or disabled rule lists")),onClick:this.togglePopup,image:p.A,hidePopup:this.hidePopup,popupPosition:this.props.position,popupWidth:240,popupClassName:"ContentBlocker ToolbarButtonPopup-DefaultStyles",className:"ContentBlocker-Control",isPopupVisible:this.state.popupOpen,__source:{fileName:g,lineNumber:284,columnNumber:7}},r.a.createElement("h2",{className:"ContentBlocker-Header",__source:{fileName:g,lineNumber:313,columnNumber:9}},d?Object(l.a)("Blocking Level on $1",[this.getHostname()]):Object(l.a)("Content Blocker")),d&&r.a.createElement(i.a,{name:"contenBlockingPopup",value:N,onChange:this.setPageBlocking,className:"ContentBlocker-Field",__source:{fileName:g,lineNumber:321,columnNumber:11}},r.a.createElement("label",{tabIndex:h,className:m()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":0===N}),__source:{fileName:g,lineNumber:326,columnNumber:13}},r.a.createElement("input",{type:"radio",value:"0",tabIndex:"-1",__source:{fileName:g,lineNumber:332,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Icon",dangerouslySetInnerHTML:{__html:p.A},__source:{fileName:g,lineNumber:333,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:336,columnNumber:15}},Object(l.a)("No Blocking"),0===b&&r.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:339,columnNumber:19}},f))),r.a.createElement("label",{tabIndex:h,className:m()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":1===N}),__source:{fileName:g,lineNumber:344,columnNumber:13}},r.a.createElement("input",{type:"radio",value:"1",tabIndex:"-1",__source:{fileName:g,lineNumber:350,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:p.A},__source:{fileName:g,lineNumber:351,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:355,columnNumber:15}},Object(l.a)("Block Trackers"),1===b&&r.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:358,columnNumber:19}},f))),r.a.createElement("label",{tabIndex:h,className:m()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":2===N}),__source:{fileName:g,lineNumber:363,columnNumber:13}},r.a.createElement("input",{type:"radio",value:"2",tabIndex:"-1",__source:{fileName:g,lineNumber:369,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:p.A},__source:{fileName:g,lineNumber:370,columnNumber:15}}),r.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:374,columnNumber:15}},Object(l.a)("Block Trackers and Ads"),2===b&&r.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:377,columnNumber:19}},f)))),_&&r.a.createElement("div",{className:"ContentBlocker-Blocked",__source:{fileName:g,lineNumber:386,columnNumber:11}},n&&this.renderBlocked("tracking"),u&&this.renderBlocked("ad_blocking")),r.a.createElement("div",{className:"ContentBlocker-Field",__source:{fileName:g,lineNumber:396,columnNumber:9}},r.a.createElement("input",{type:"button",tabIndex:h,onClick:this.showSettings,value:Object(l.a)("Manage Default Settings"),__source:{fileName:g,lineNumber:397,columnNumber:11}})))}}t.a=v},function(e,t,a){"use strict";var n=a(21),i=a(152),s=a(13),r=a(471),o=a(0),l=a.n(o),c=a(180),u=a(20),m=a.n(u),d=a(312),h=a(1),p=a(46),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\progress\\PageloadProgress.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N={bytes:0,bytesDisplayed:0,currentPageId:null,elLoaded:0,elLoadedDisplayed:0,elTotal:0,isProgressing:!1,isStarted:!1,progress:0,stopped:!1,pageloadTicker:""},f=[h.kAddressBarShowProgress,h.kThemeUseAnimation];class _ extends l.a.PureComponent{constructor(...e){super(...e),g(this,"_isMounted",!1),g(this,"state",N),g(this,"_onUpdateProgressState",e=>{this.setState(e)}),g(this,"_onNavigationStoreChanged",()=>{this._onProgressStateStoreChanged()}),g(this,"_onProgressStateStoreChanged",()=>{const e=this.props.pageId,t=s.c.getPageById(e);if(t){const e=t.url;if(Object(p.j)(e))return}const a=r.a.getProgressInfo(e),n=(i.a.getNavigationInfo(e)||{}).trigger,{progress:o=0,loadedBytes:l=0,loadedElements:c=0,totalElements:u=0}=a||{};"start"===n?this.setState({...N,currentPageId:e,isProgressing:!0,isStarted:!0}):"stop"===n?this.setState(e=>({isProgressing:!1,...e.stopped&&{}||{progress:1}})):"commit"!==n||this.state.stopped||(this.setState({bytes:l,elLoaded:c,elTotal:u,isProgressing:!0,isStarted:!0,progress:o}),this.updateCount())}),g(this,"_onWebpageviewStoreChanged",e=>{"PAGE_STOP"===e.type&&1!==this.state.progress&&this.setState({isProgressing:!1,stopped:!0})}),g(this,"getIncrement",(e,t)=>{const a=t-e;let n=0;return a>10?n=Math.floor(a/5):a>4?n=2:a>0&&(n=1),e+n}),g(this,"updateCount",()=>{if(clearTimeout(this._updateTimer),!this._isMounted)return;const e=this.state.bytes,t=this.state.bytesDisplayed,a=this.state.elLoadedDisplayed;let n=this.state.elLoaded;1===this.state.progress&&n<this.state.elTotal&&(n=this.state.elTotal);const i=this.getIncrement(t,e),s=this.getIncrement(a,n);!1===this.props.prefValues[h.kThemeUseAnimation]?this.setState({elLoadedDisplayed:n,bytesDisplayed:e}):(n>a&&this.setState({elLoadedDisplayed:s}),e>t&&this.setState({bytesDisplayed:i}),!this.state.stopped&&(n>s||e>i)&&(this._updateTimer=setTimeout(this.updateCount,80)));const r=e>1048576?1:0,o=Object(d.a)(e,r);this.setState({pageloadTicker:o})})}componentDidMount(){this._isMounted=!0,i.a.addChangeListener(this._onNavigationStoreChanged),r.a.addChangeListener(this._onProgressStateStoreChanged),c.a.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){clearTimeout(this._updateTimer),this._isMounted=!1,i.a.removeChangeListener(this._onNavigationStoreChanged),r.a.removeChangeListener(this._onProgressStateStoreChanged),c.a.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){const a=this.props.pageId;if(a!==t.currentPageId){const e=r.a.getProgressInfo(this.props.pageId),{progress:t=0,loadedBytes:n=0,loadedElements:i=0,totalElements:s=0}=e||{};let o={};o=0===t||1===t||void 0===t?{...N,currentPageId:a}:{...N,currentPageId:a,progress:t,bytes:n,elLoaded:i,elTotal:s},this._onUpdateProgressState(o)}}render(){if(!this.props.open||isNaN(this.state.progress))return null;const e=this.state.progress,t=this.state.elLoadedDisplayed,a=this.state.elTotal,n=this.state.isProgressing,i=this.state.isStarted,s=!0===this.state.stopped,r=m()({pageload:!0,unstarted:!i,progressing:n,"progress-done":1===e||s,stopped:s});return l.a.createElement("div",{className:r,__source:{fileName:b,lineNumber:262,columnNumber:7}},this.props.prefValues[h.kAddressBarShowProgress]&&l.a.createElement("progress",{className:"pageload-indicator",value:100*this.state.progress,max:100,__source:{fileName:b,lineNumber:264,columnNumber:11}}),l.a.createElement("div",{className:"pageload-ticker",__source:{fileName:b,lineNumber:269,columnNumber:9}},this.state.pageloadTicker),l.a.createElement("div",{className:"pageload-ticker",__source:{fileName:b,lineNumber:272,columnNumber:9}},t+"/"+a))}}t.a=Object(n.a)(_,f)},function(e,t,a){"use strict";var n=a(702),i=a(0),s=a.n(i),r=a(22),o=a(2),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\QRShareButton.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends s.a.PureComponent{constructor(...e){super(...e),u(this,"state",{popupVisible:!1}),u(this,"togglePopup",()=>{this.setState(e=>({popupVisible:!e.popupVisible}))}),u(this,"hidePopup",()=>{this.setState({popupVisible:!1})})}render(){return s.a.createElement(r.a,{className:"create-qr-code",image:l.Pc,tooltip:Object(o.a)("Share Page with QR Code"),onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:Object(n.b)(this.props.data),size:this.props.size,__source:{fileName:c,lineNumber:40,columnNumber:12}},s.a.createElement(n.a,{hidePopup:this.hidePopup,data:this.props.data,__source:{fileName:c,lineNumber:52,columnNumber:7}}))}}t.a=m},function(e,t,a){"use strict";var n=a(31),i=a(14),s=a(0),r=a.n(s),o=a(313),l=a(22),c=a(4),u=a(2),m=a(9);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends r.a.PureComponent{constructor(...e){super(...e),d(this,"getMenuItems",()=>this.props.feeds.map(e=>({...n.a.makeLabelPair(e.title+" - "+e.type),items:[{handler:i.a.openURL.bind(this,e.href),...Object(c.a)("Preview")},{handler:o.a.add.bind(this,[{url:e.href,path:e.path,title:e.title,refreshInterval:5,lastChecked:0,offline:!1}]),...Object(c.a)("Subscribe")}]})).toJS()),d(this,"render",()=>r.a.createElement(l.a,{image:m.Rc.small,menu:this.getMenuItems(),menuOrigin:"bottomLeft",tooltip:Object(u.a)("Page offers feeds"),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rssdetect\\RSSFeedDropdown.jsx",lineNumber:57,columnNumber:7}}))}}t.a=h},function(e,t,a){"use strict";var n=a(615),i=a(0),s=a.n(i),r=a(22),o=a(2),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchEngineSelect.jsx";function u({onClick:e,icon:t}){return s.a.createElement(r.a,{onClick:e,tooltip:Object(o.a)("Change search engine"),imagePath:t,__source:{fileName:c,lineNumber:25,columnNumber:10}})}function m({onClick:e}){return s.a.createElement(r.a,{onClick:e,tooltip:Object(o.a)("Change search engine"),image:l.nc,__source:{fileName:c,lineNumber:33,columnNumber:10}})}class d extends s.a.PureComponent{constructor(...e){var t,a,n;super(...e),n=({id:e})=>{this.props.onItemClicked(e)},(a="onItemClicked")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return s.a.createElement(s.a.Fragment,{__source:{fileName:c,lineNumber:47,columnNumber:7}},s.a.createElement("div",{className:"toolbar-insideinput SearchEngineSelect-Icon",__source:{fileName:c,lineNumber:48,columnNumber:9}},this.props.useFavicon?s.a.createElement(u,{onClick:this.props.toggleOpen,icon:this.props.icon,__source:{fileName:c,lineNumber:50,columnNumber:15}}):s.a.createElement(m,{onClick:this.props.toggleOpen,__source:{fileName:c,lineNumber:54,columnNumber:15}})),this.props.isOpen&&s.a.createElement(n.a,{items:this.props.items,onClose:this.props.onClose,onItemActivated:this.onItemClicked,__source:{fileName:c,lineNumber:61,columnNumber:11}}))}}t.a=d},function(e,t,a){"use strict";var n=a(0),i=a(589),s=a(22),r=a(114),o=a(180),l=a(2),c=a(1),u=a(9),m=a(592),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchFieldButton.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends n.PureComponent{constructor(...e){super(...e),h(this,"state",{showPopup:!1}),h(this,"onWebpageviewStoreChanged",e=>{"focusSearchField"===e.action&&this.toggleHiddenSearchFieldPopup()}),h(this,"hideSearchField",()=>{this.setState({showPopup:!1})}),h(this,"toggleHiddenSearchFieldPopup",()=>{this.setState(e=>({showPopup:!e.showPopup}))}),h(this,"onSearch",(e,t,a={})=>{t&&t.url&&(r.a.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...a}),this.hideSearchField())}),h(this,"onSearchAddTypedSearchHistory",Object(m.a)(this.onSearch,{addTypedSearchHistory:!0}))}componentDidMount(){o.a.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){o.a.removeChangeListener(this.onWebpageviewStoreChanged)}render(){const{prefValues:e}=this.props;return(n.createElement(s.a,{image:this.props.size?u.td[this.props.size]:void 0,tooltip:Object(l.a)("Show Search Field"),onClick:this.toggleHiddenSearchFieldPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideSearchField,isPopupVisible:this.state.showPopup,popupWidth:this.props.popupWidth,hasLightArrow:!0,size:this.props.size,popupClassName:"SearchField-Popup",__source:{fileName:d,lineNumber:82,columnNumber:7}},n.createElement(i.a,{onSearch:this.onSearchAddTypedSearchHistory,useFavicon:e[c.kAddressBarSearchShowFavicon],suggestEnabled:e[c.kAddressBarSearchSuggestEnabled],shouldRenderAs:this.props.shouldRenderAs,__source:{fileName:d,lineNumber:94,columnNumber:9}})))}}t.a=p},function(e,t,a){"use strict";var n=a(130),i=a(0),s=a.n(i),r=a(25),o=a(2),l=a(10),c=a(7),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\SiteInfoButton.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d({pageSecurity:e}){switch(e){case"web":case"warning":return s.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:u,lineNumber:53,columnNumber:9}},s.a.createElement("g",{__source:{fileName:u,lineNumber:54,columnNumber:11}},s.a.createElement("path",{d:"M7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8V11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11V8Z",__source:{fileName:u,lineNumber:55,columnNumber:13}}),s.a.createElement("path",{d:"M8 6C8.55228 6 9 5.55228 9 5C9 4.44772 8.55228 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z",__source:{fileName:u,lineNumber:56,columnNumber:13}}),s.a.createElement("path",{fillRule:"evenodd",d:"M15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z",__source:{fileName:u,lineNumber:57,columnNumber:13}})));case"secure":case"certified":return s.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:u,lineNumber:66,columnNumber:9}},s.a.createElement("path",{d:"M12.2 6.7C12.2 4 10.5 2 8 2 5.8 2 3.8 4 3.8 6.7V7H3v7h10V7h-.8v-.3zM10.7 8H5.3V6.7c0-1.7 1.4-3 2.8-3 1.7 0 2.8 1.3 2.8 3V8z",__source:{fileName:u,lineNumber:67,columnNumber:11}}));case"insecure":return s.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:u,lineNumber:74,columnNumber:9}},s.a.createElement("path",{d:"M5.4 7v-.7c0-1.4 1-2.6 2.4-2.6 1 0 1-1.7 0-1.7h-.2c-2 0-3.8 2-3.8 4.3V7H3v7h10V7H5.4z",__source:{fileName:u,lineNumber:75,columnNumber:11}}));case"internal":return s.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:u,lineNumber:82,columnNumber:9}},s.a.createElement("path",{d:"M10.4 5c-.4-.8 0-1.8 1-2 .7 0 1.5.4 1.6 1.2a1.4 1.4 0 0 1-.2 1l-4 7c-.3.5-.7.8-1.2.8-.6 0-1-.2-1.3-.7L3.8 7.8 2.2 5c-.5-.8 0-2 1-2 .7 0 1 .2 1.4.7l1 2 1 1.4a2 2 0 0 0 1.7 1.5 2.2 2.2 0 0 0 2.3-2V6c0-.3 0-.6-.2-1z",__source:{fileName:u,lineNumber:83,columnNumber:11}}));default:return null}}class h extends s.a.PureComponent{constructor(...e){super(...e),m(this,"doActionShowPageInfo",()=>{if(this.props.isEditingUrl)return this.props.fieldGo();n.a.getActiveWebView()&&l.a.windows.getCurrent({},e=>{c.a.zoom.getVivaldiUIZoom(t=>{const a=this.refs.siteInfoButton.getBoundingClientRect(),{left:i=0,top:s=0}=e,r=a.left*t+i-1,o=this.props.isInternal?60:360,{screen:l}=this.context,c=(l.availHeight-(a.bottom+s)*t>o?a.bottom+6:a.top-6)*t+s,u=n.a.getActiveWebView();u&&u.showPageInfo({top:Math.round(c),left:Math.round(r)})})})})}render(){const e=this.props.isEditingUrl||this.props.isInternal?"internal":"none"===(t=this.props.sslState)?"internal":"security_error"===t?"insecure":"warning"===t?"warning":"secure_no_ev"===t?"secure":"secure_with_ev"===t?"certified":"web";var t;return(s.a.createElement("button",{ref:"siteInfoButton",className:`button-addressfield SiteInfoButton ${e}`,title:this.props.isEditingUrl?Object(o.a)("Go to address"):Object(o.a)("Site info"),onClick:this.doActionShowPageInfo,draggable:this.props.draggable,onDragStart:this.props.onDragStart,tabIndex:this.props.tabIndex,__source:{fileName:u,lineNumber:138,columnNumber:7}},s.a.createElement("div",{className:"SiteInfoButton-SecurityBadge",__source:{fileName:u,lineNumber:151,columnNumber:9}},s.a.createElement(d,{pageSecurity:e,__source:{fileName:u,lineNumber:152,columnNumber:11}})),"certified"===e&&s.a.createElement("span",{className:"siteinfo-text",__source:{fileName:u,lineNumber:156,columnNumber:11}},this.props.sslIssuer),"warning"===e&&s.a.createElement("span",{className:"siteinfo-text",__source:{fileName:u,lineNumber:162,columnNumber:11}},Object(o.a)("Not Secure"))))}}m(h,"contextType",r.a),t.a=h},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(395),i=a(7),s=a(593),r=a(23);const o=["http:","https:","file:","ftp:"];class l{constructor(){var e,t,a;a=(e,t)=>{if(!e)return Promise.resolve([]);const[a,...l]=e.replace(/\s+/g," ").trim().split(" ");return new Promise(e=>{i.a.historyPrivate.dbSearch({text:a,maxResults:1e3},a=>{e(a.filter(e=>{const t=e.url&&0!==e.lastVisitTime&&e.url.length<2048&&o.some(t=>(e.url||"").startsWith(t));return function(e,t){if(0===e.length)return!0;const{title:a,url:n}=t;return a&&e.every(e=>a.toLowerCase().includes(e.toLowerCase()))||n&&e.every(e=>n.toLowerCase().includes(e.toLowerCase()))}(l,e)&&t}).map(e=>{const t=function(e,t){const a=t.map(e=>new RegExp(Object(n.a)(e),"i")),{url:i,title:s}=e;return i&&a.every(e=>i.toLowerCase().match(e))?"/"===i.charAt(i.length-1)?"OMNI_RESULT_HISTORY_PROMOTED":"OMNI_RESULT_HISTORY_URL":s&&a.every(e=>s.toLowerCase().match(e))?"OMNI_RESULT_HISTORY_TITLE":"OMNI_RESULT_HISTORY_UNKNOWN"}(e,l);return{type:t,id:e.id,score:Object(s.b)(t,e),title:e.title||"",typed:Boolean(e.typedCount&&e.typedCount>0),url:r.p.getDisplayUrl(e.url||"")}}).sort((e,t)=>(t.score||0)-(e.score||0)).filter((e,a)=>a<t.count))})})},(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";t.a=class{constructor({provider:e}){this._searchProvider=e}search(e,t){const a=new Promise((n,i)=>this._searchProvider.search(e,t).then((...e)=>{a!==this._newestInstanceSearch&&i("A more recent search is in progress"),n(...e)}));return this._newestInstanceSearch=a,this._newestInstanceSearch}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(86),i=a(761),s=a(7);class r{constructor(){var e,t,a;a=(e,t)=>e?new Promise(a=>{const r=n.a.getByQuery(e),o=r?r.historyId:-1;s.a.historyPrivate.getTypedHistory(e,o,t.count,e=>a(Object(i.a)(e)))}):Promise.resolve([]),(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";var n=a(0),i=a(607),s="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\devtools\\devTools.jsx";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={dialog:"handleOnJavascriptDialog"};class l extends n.PureComponent{constructor(e){super(e),r(this,"handleOnJavascriptDialog",e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)}),r(this,"showDialog",e=>{e.webview=this.webview,this.setState({dialogParentElement:this.refs.devTools,customData:e})}),r(this,"handleOnCloseDialog",()=>{this.setState({dialogParentElement:null})}),r(this,"attachWebviewHandlers",()=>{Object.keys(o).forEach(e=>{this.webview&&this.webview.addEventListener(e,this[o[e]])})}),r(this,"removeWebviewHandlers",()=>{Object.keys(o).forEach(e=>{this.webview&&this.webview.removeEventListener(e,this[o[e]])})}),this.webview=null,this.state={dialogParentElement:null,customData:null}}componentDidMount(){this.webview=this.refs.webviewdiv?this.refs.webviewdiv.firstChild:null,this.attachWebviewHandlers()}componentWillUnmount(){this.removeWebviewHandlers()}render(){return"off"!==this.props.dockingState?n.createElement("div",{__source:{fileName:s,lineNumber:89,columnNumber:15}},n.createElement("section",{ref:"devTools",className:"devtools-content",__source:{fileName:s,lineNumber:90,columnNumber:9}},n.createElement("div",{ref:"webviewdiv",dangerouslySetInnerHTML:{__html:`<webview name="${String("vivaldi-devtools-"+this.props.dockingState)}"\n                partition="persist:storage"\n                inspect_tab_id="${String(this.props.tabId)}" />`},__source:{fileName:s,lineNumber:93,columnNumber:11}})),this.props.active&&this.state.dialogParentElement&&this.state.customData&&n.createElement(i.a,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:s,lineNumber:104,columnNumber:11}})):null}}t.a=l},function(e,t,a){"use strict";var n=a(14),i=a(11),s=a(6),r=a(0),o=a.n(r),l=a(2),c=a(9),u=a(1),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionPageBanner.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends o.a.PureComponent{constructor(e,t){super(e),d(this,"onGoClicked",()=>{n.a.openURL("https://vvld.in/chrome-web-store")}),d(this,"onCloseClicked",()=>{this.setState({show:!1}),i.a.set(u.kShowExtensionsBanner,!1)}),this.state={show:s.a.get(u.kShowExtensionsBanner)}}render(){return!this.state.show||this.props.url.indexOf("chrome://extensions")<0?null:o.a.createElement("div",{className:"vivaldi-extension-banner",__source:{fileName:m,lineNumber:46,columnNumber:7}},o.a.createElement("label",{__source:{fileName:m,lineNumber:47,columnNumber:9}},Object(l.a)("You can install any extension from the Chrome Web Store directly to Vivaldi. Just open the web store and click 'Add to Chrome' on your extension of choice.")),o.a.createElement("div",{className:"controls",__source:{fileName:m,lineNumber:48,columnNumber:9}},o.a.createElement("input",{type:"button",value:Object(l.a)("Chrome Web Store"),title:Object(l.a)("Open Chrome Web Store"),onClick:this.onGoClicked,__source:{fileName:m,lineNumber:49,columnNumber:11}}),o.a.createElement("span",{className:"close",value:"close",title:Object(l.a)("Close"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:c.kb},__source:{fileName:m,lineNumber:52,columnNumber:11}})))}}t.a=h},function(e,t,a){"use strict";(function(e){var n=a(325),i=a(462),s=a(119),r=a(430),o=a(127),l=a(21),c=a(85),u=a(47),m=a(467),d=a(1420),h=a(199),p=a(519),b=a(0),g=a.n(b),N=a(25),f=a(2),_=a(10),v=a(78),E=a(510),C=a(4),w=a(357),O=a(1296),y=a(1297),S=a(1298),T=a(1299),k=a(1300),A=a(1301),I=a(60),D=a(3),M=a(803),P=a(1),x=a(260),L=a(192),j=a(9),R=a(349),B=a(236),F="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposer.jsx";function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const H=[P.kKeyboardTabToAll,P.kMailAccounts,P.kMailComposeHeadersHidden];function V(e,t){let a="";if(0===e.length)return a;const n=e[0].address,i=t.find(e=>e.MAIL_EMAIL===n);return i?(void 0===i.signature?a=M.a:""!==i.signature&&(a=i.signature),a):a}class W extends g.a.PureComponent{constructor(t){super(t),U(this,"draftCreated",!1),U(this,"refBody",g.a.createRef()),U(this,"refSubject",g.a.createRef()),U(this,"messageId",Object(E.a)()),U(this,"draftIsPlaintext",!1),U(this,"cidAttachments",[]),U(this,"focusOnBody",!1),U(this,"_initDraft",()=>{const e=this.props.prefValues[P.kMailAccounts],t={from:e.length>0?[{address:e[0].MAIL_EMAIL}]:[],to:[],cc:[],bcc:[],subject:"",attachments:[],mailAddresses:o.a.getMailAddresses(),showModal:!1},a=this.props.mailto&&!this.props.id?Object(h.b)(this.props.mailto):m.a.get();if(!a)return this.sentDate=Date.now(),this.threadKey=Object(L.b)(this.sentDate),this.bodyDraft=V(t.from,e),this.draftIsPlaintext=!0,this.bodyDraft&&(this.bodyDraft=Object(x.f)(this.draftIsPlaintext)+this.bodyDraft),t;this.sentDate=a.sentDate,this.threadKey=a.threadKey,this.references=a.references,this.messageId=a.messageId,this.cidAttachments=a.cidAttachments||[],this.inReplyTo=a.inReplyTo,this.forwarded=a.forwarded,this.replied=a.replied,this.draftIsPlaintext=a.plaintext,this.focusOnBody=a.focusOnBody,this.selectedAccount=a.selectedAccount,t.attachments=a.attachments,t.bcc=a.bcc,t.cc=a.cc,t.from=a.from,t.subject=a.subject,t.to=a.to;const n=V(t.from,e);return this.bodyDraft=Object(x.g)(a.body,n,this.draftIsPlaintext),t}),U(this,"_setIfActive",t=>{t.isActive?(this._bind(),e.nextTick(()=>n.a.setActiveMailComposer(this))):(this._unbind(),e.nextTick(()=>n.a.clearActiveMailComposer(this)),this.flushPendingChanges())}),U(this,"_contactsChanged",()=>{const e=o.a.getMailAddresses();this.setState({mailAddresses:e})}),U(this,"_showModal",e=>{"noRecipients"===e&&this.setState({showModal:!0})}),U(this,"_hideModal",()=>{this.setState({showModal:!1})}),U(this,"onContentLoad",()=>{this.bodyDraft&&setTimeout(()=>{""!==this.bodyDraft&&this.refBody.current&&this.refBody.current.setContent(this.bodyDraft,this.draftIsPlaintext),this.bodyDraft="",this.draftIsPlaintext=!1},150)}),U(this,"_updateSignature",(e,t)=>{const a=this.props.prefValues[P.kMailAccounts],n=V(t,a),i=V(e,a);if(!n&&!i)return;const s=this.refBody.current;s&&s.getContentAsBodyParts().then(e=>{const{content:t}=e[0],a=Object(x.g)(t,i);s.setContent(a,!1)})}),U(this,"buildMessage",()=>this.refBody.current?this.refBody.current.getContentAsBodyParts().then(this.processBodyParts).then(e=>({from:this.state.from,to:this.state.to,cc:this.state.cc,bcc:this.state.bcc,subject:this.state.subject,sentDate:this.sentDate,threadKey:this.threadKey,bodyParts:e,flags:["\\Seen"],inReplyTo:this.inReplyTo,replied:this.replied,forwarded:this.forwarded,...this.references?{references:this.references}:null,internal:!0,messageId:this.messageId,queued:!1})):Promise.reject()),U(this,"_createDraftMessage",e=>Object(w.a)(D.c,D.k,D.l,[e],{filteringPriority:D.p.HIGH}).then(e=>{const t=`${this.props.url}&query={"id":${e[0].id}}`;_.a.tabs.update(this.props.id,{url:t}),u.a.updateIndex({addedSles:e}),I.a.filter(),s.a.updateThreads()})),U(this,"updateAttribute",e=>this.props.id?e(this.props.id):this.draftCreated?Promise.resolve():(this.draftCreated=!0,this.buildMessage().then(this._createDraftMessage))),U(this,"updateBody",Object(B.default)(e=>this.updateAttribute(async t=>{await Object(y.a)(t,e),this.updateIndex(t,{attachment:Object(x.d)(e)})}),5e3,{leading:!1})),U(this,"processBodyParts",e=>{if("html"===e[0].type){const{blobFreeHTML:t,cidsInUse:a,newImages:n}=Object(R.c)(e[0].content),i=this.cidAttachments.filter(e=>e.id&&a.includes("cid:"+e.id));return e[0].content=t,Promise.all(Object.keys(n).map(e=>fetch(e).then(e=>e.arrayBuffer()).then(t=>{const{cid:a,mimeType:i,filename:s}=n[e];return{type:"attachment",content:new Uint8Array(t),filename:s,id:a,mimeType:i}}))).then(t=>e.concat(this.state.attachments,i,t))}return Promise.resolve(e.concat(this.state.attachments))}),U(this,"onBodyChange",()=>{var e;return this._isMounted&&(null===(e=this.refBody.current)||void 0===e?void 0:e.getContentAsBodyParts)?this.refBody.current.getContentAsBodyParts().then(this.processBodyParts).then(this.updateBody):Promise.reject()}),U(this,"flushPendingChanges",async()=>{await this.toSelected.flush(),await this.ccSelected.flush(),await this.bccSelected.flush(),await this.subjectChange.flush(),await this.updateBody.flush()}),U(this,"cancelPendingChanges",()=>{this.toSelected.cancel(),this.ccSelected.cancel(),this.bccSelected.cancel(),this.subjectChange.cancel(),this.updateBody.cancel()}),U(this,"updateIndex",(e,t)=>{const a=[{id:e,sentDate:this.sentDate,threadKey:this.threadKey,updates:t}];u.a.updateIndex({sleUpdates:a})}),U(this,"fromChange",e=>{this.selectedAccount=this.props.prefValues[P.kMailAccounts].find(t=>t.MAIL_EMAIL===e.target.value);const t=this.state;this.setState({from:this.selectedAccount?[{name:this.selectedAccount.MAIL_NAME,address:this.selectedAccount.MAIL_EMAIL}]:[]},()=>(this._updateSignature(this.state.from,t.from),this.updateAttribute(async e=>{await Object(T.a)(e,this.state.from),this.updateIndex(e,{from:this.state.from})}))),this.selectedAccount&&(this.messageId=Object(E.a)(this.selectedAccount.MAIL_EMAIL))}),U(this,"toSelected",Object(B.default)(()=>this.updateAttribute(async e=>{await Object(A.a)(e,this.state.to),this.updateIndex(e,{to:this.state.to})}),5e3,{leading:!1})),U(this,"onToSelected",e=>{this.setState({to:[...e]},()=>this.toSelected())}),U(this,"ccSelected",Object(B.default)(()=>this.updateAttribute(e=>Object(S.a)(e,this.state.cc)),5e3,{leading:!1})),U(this,"onCcSelected",e=>{this.setState({cc:[...e]},()=>this.ccSelected())}),U(this,"bccSelected",Object(B.default)(()=>this.updateAttribute(e=>Object(O.a)(e,this.state.bcc)),5e3,{leading:!1})),U(this,"onBccSelected",e=>{this.setState({bcc:[...e]},()=>this.bccSelected())}),U(this,"subjectChange",Object(B.default)(()=>this.updateAttribute(async e=>{await Object(k.a)(e,this.state.subject),this.updateIndex(e,{subject:this.state.subject})}),5e3,{leading:!1})),U(this,"onSubjectChange",e=>{this.setState({subject:e.target.value},()=>this.subjectChange())}),U(this,"focusSubject",()=>{this.refSubject.current&&this.refSubject.current.focus()}),U(this,"removeAttachment",e=>{this.setState(t=>({attachments:t.attachments.filter((t,a)=>a!==e)}),()=>this.updateAttribute(this.onBodyChange))}),U(this,"_queueMessage",()=>{n.a.queueMessage(!1)}),U(this,"_bind",()=>{c.a.bind("mod+enter",n.a.sendMessage),c.a.bind("mod+shift+enter",this._queueMessage)}),U(this,"_unbind",()=>{c.a.unbind("mod+enter",n.a.sendMessage),c.a.unbind("mod+shift+enter",this._queueMessage)}),U(this,"_onContextMenu",(e,t)=>{const a=[{handler:this.removeAttachment.bind(this,e),...Object(C.a)("mail","Remove")}];Object(v.a)(this.context.vivaldiWindowId,a)(t)}),this.state=this._initDraft()}componentDidMount(){this._isMounted=!0,this._setIfActive(this.props),i.a.addChangeListener(this._showModal),o.a.addChangeListener(this._contactsChanged),this.focusOnBody&&this.refBody.current?this.refBody.current.focus():this.refs.to&&this.refs.to.focus();const{id:t}=this.props;t&&e.nextTick(async()=>{if(await h.a.prepareDraft(t)&&this._isMounted){const e=this._initDraft();this.setState(e,this.onContentLoad)}})}UNSAFE_componentWillReceiveProps(e){e.isActive!==this.props.isActive&&this._setIfActive(e)}componentWillUnmount(){this._isMounted=!1,this._unbind(),i.a.removeChangeListener(this._showModal),o.a.removeChangeListener(this._contactsChanged),e.nextTick(()=>n.a.clearActiveMailComposer(this)),this.flushPendingChanges()}render(){const{from:e,to:t,cc:a,bcc:n,subject:i,attachments:s}=this.state,o=this.props.prefValues[P.kMailComposeHeadersHidden];return g.a.createElement("div",{id:"mail_composer",__source:{fileName:F,lineNumber:549,columnNumber:7}},g.a.createElement("header",{__source:{fileName:F,lineNumber:550,columnNumber:9}},!o.includes("from")&&g.a.createElement("div",{__source:{fileName:F,lineNumber:552,columnNumber:11}},g.a.createElement("label",{htmlFor:"from",__source:{fileName:F,lineNumber:553,columnNumber:13}},Object(f.a)("sender","From")),g.a.createElement("div",{className:"headerItemWrapper",__source:{fileName:F,lineNumber:554,columnNumber:13}},g.a.createElement("select",{ref:"from",id:"from",onChange:this.fromChange,value:e.length>0?e[0].address:"",__source:{fileName:F,lineNumber:555,columnNumber:15}},this.props.prefValues[P.kMailAccounts].map((e,t)=>g.a.createElement("option",{key:t,value:e.MAIL_EMAIL,__source:{fileName:F,lineNumber:560,columnNumber:21}},(e.MAIL_NAME?e.MAIL_NAME:"")+" ("+e.MAIL_EMAIL+")"))))),g.a.createElement("div",{__source:{fileName:F,lineNumber:570,columnNumber:11}},g.a.createElement("label",{htmlFor:"to",__source:{fileName:F,lineNumber:571,columnNumber:13}},Object(f.a)("To")),g.a.createElement("div",{className:"headerItemWrapper",__source:{fileName:F,lineNumber:572,columnNumber:13}},g.a.createElement(p.a,{ref:"to",id:"to",selectedItems:t,allItems:this.state.mailAddresses,itemSelectionCallback:this.onToSelected,__source:{fileName:F,lineNumber:573,columnNumber:15}}))),(a.length>0||!o.includes("cc"))&&g.a.createElement("div",{__source:{fileName:F,lineNumber:581,columnNumber:11}},g.a.createElement("label",{htmlFor:"cc",title:Object(f.a)("Carbon copy"),__source:{fileName:F,lineNumber:582,columnNumber:13}},Object(f.a)("Cc")),g.a.createElement("div",{className:"headerItemWrapper",__source:{fileName:F,lineNumber:583,columnNumber:13}},g.a.createElement(p.a,{id:"cc",selectedItems:a,allItems:this.state.mailAddresses,itemSelectionCallback:this.onCcSelected,__source:{fileName:F,lineNumber:584,columnNumber:15}}))),(n.length>0||!o.includes("bcc"))&&g.a.createElement("div",{__source:{fileName:F,lineNumber:593,columnNumber:11}},g.a.createElement("label",{htmlFor:"bcc",title:Object(f.a)("Blind carbon copy"),__source:{fileName:F,lineNumber:594,columnNumber:13}},Object(f.a)("Bcc")),g.a.createElement("div",{className:"headerItemWrapper",__source:{fileName:F,lineNumber:595,columnNumber:13}},g.a.createElement(p.a,{id:"bcc",selectedItems:n,allItems:this.state.mailAddresses,itemSelectionCallback:this.onBccSelected,__source:{fileName:F,lineNumber:596,columnNumber:15}}))),g.a.createElement("div",{__source:{fileName:F,lineNumber:604,columnNumber:11}},g.a.createElement("label",{htmlFor:"subject",__source:{fileName:F,lineNumber:605,columnNumber:13}},Object(f.a)("Subject")),g.a.createElement("div",{className:"headerItemWrapper",__source:{fileName:F,lineNumber:606,columnNumber:13}},g.a.createElement("input",{type:"text",ref:this.refSubject,tabIndex:"0",id:"subject",value:i,onChange:this.onSubjectChange,__source:{fileName:F,lineNumber:607,columnNumber:15}}))),s.length>0&&g.a.createElement("div",{__source:{fileName:F,lineNumber:617,columnNumber:13}},g.a.createElement("label",{__source:{fileName:F,lineNumber:618,columnNumber:15}},Object(f.a)("Attachments")),g.a.createElement("div",{className:"composer-attachments",__source:{fileName:F,lineNumber:619,columnNumber:15}},s.map((e,t)=>g.a.createElement("div",{onContextMenu:this._onContextMenu.bind(this,t),key:`attachment${t}`,className:"attachment",title:e.filename,__source:{fileName:F,lineNumber:621,columnNumber:19}},g.a.createElement("span",{className:"attachment-title",__source:{fileName:F,lineNumber:633,columnNumber:21}},e.filename),g.a.createElement("button",{className:"attachment-remove",tabIndex:this.props.prefValues[P.kKeyboardTabToAll],onClick:this.removeAttachment.bind(this,t),dangerouslySetInnerHTML:{__html:j.Nd},__source:{fileName:F,lineNumber:636,columnNumber:21}})))))),g.a.createElement("main",{__source:{fileName:F,lineNumber:646,columnNumber:9}},this.state.showModal&&g.a.createElement(r.a,{title:Object(f.a)("Missing Recipients"),prompt:Object(f.a)("At least one address must be added to the To, Cc, or Bcc fields in order to send this email."),positive:Object(f.a)("OK"),onClose:this._hideModal,hideNegative:!0,__source:{fileName:F,lineNumber:648,columnNumber:13}}),g.a.createElement(d.a,{ref:this.refBody,focusPreviousElement:this.focusSubject,onBodyChange:this.onBodyChange,onContentLoad:this.onContentLoad,__source:{fileName:F,lineNumber:656,columnNumber:11}})))}}U(W,"contextType",N.a),t.a=Object(l.a)(W,H)}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.messages.update(e,{bcc:t})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.messages.update(e,{bodyParts:t})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.transaction("rw",[n.a.messages,n.a.searchList],()=>{n.a.searchList.update(e,{cc:t}),n.a.messages.update(e,{cc:t})})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.transaction("rw",[n.a.messages,n.a.searchList],()=>{n.a.searchList.update(e,{from:t}),n.a.messages.update(e,{from:t})})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.transaction("rw",[n.a.messages,n.a.searchList],()=>{n.a.searchList.update(e,{subject:t}),n.a.messages.update(e,{subject:t})})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(8);function i(e,t){return n.a.transaction("rw",[n.a.messages,n.a.searchList],()=>{n.a.searchList.update(e,{to:t}),n.a.messages.update(e,{to:t})})}},function(e,t,a){"use strict";var n=a(8);t.a=function(e){return n.a.pop.where("searchListId").equals(e).toArray()}},function(e,t,a){"use strict";var n=a(8);t.a=function(e){return n.a.messages.update(e,{trusted:!0})}},function(e,t,a){"use strict";(function(e){var n=a(21),i=a(805),s=a(1395),r=a(56),o=a(14),l=a(11),c=a(0),u=a.n(c),m=a(40),d=a.n(m),h=a(25),p=a(2),b=a(1),g=a(284),N=a(29),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailView.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v=[b.kMailViewLayout,b.kMailViewDimensions];class E extends u.a.PureComponent{constructor(...t){super(...t),_(this,"mailSearchRef",u.a.createRef()),_(this,"state",{listEntry:void 0,hasNoListEntries:N.a.hasNoListEntries(),queryString:N.a.getQuery()}),_(this,"onSlidebarPosition",(e,t)=>{const a=d.a.findDOMNode(this.mailSearchRef.current);if(!(a instanceof Element))return;var n=a.getBoundingClientRect(),i=t-n.top,s=e-n.left;const r={...this.props.prefValues[b.kMailViewDimensions]};"horizontal"===this.props.prefValues[b.kMailViewLayout]?(i>2e3?i=2e3:i<120&&(i=120),r.height=Math.floor(i)):(s>2e3?s=2e3:s<200&&(s=200),"vertical_wide"===this.props.prefValues[b.kMailViewLayout]?r.widthWide=Math.floor(s):r.width=Math.floor(s)),l.a.set(b.kMailViewDimensions,r)}),_(this,"_onFiltersChanged",()=>{if(this.state.hasNoListEntries!==N.a.hasNoListEntries()&&this.setState({hasNoListEntries:N.a.hasNoListEntries()}),r.a.getSelectedFolder()){const e=N.a.getQuery();this.setState({queryString:e})}}),_(this,"_folderChanged",()=>{const t=r.a.getSelectedFolder();if(!t)return;const a=Object(p.a)(t.name),n=Object(p.a)(t.accountId);let i=a;a!==n&&(i+=" ("+n+")"),e.nextTick(()=>o.a.setTitle(this.props.id,this.context.vivaldiWindowId,i))}),_(this,"handleSelection",Object(g.a)(e=>{this.setState({listEntry:e})},200,{leading:!0,trailing:!0}))}componentDidMount(){r.a.addChangeListener(this._folderChanged),N.a.addChangeListener(this._onFiltersChanged)}componentWillUnmount(){r.a.removeChangeListener(this._folderChanged),N.a.removeChangeListener(this._onFiltersChanged)}render(){const e="vertical_wide"===this.props.prefValues[b.kMailViewLayout],t="horizontal"===this.props.prefValues[b.kMailViewLayout]?{height:this.props.prefValues[b.kMailViewDimensions].height}:{width:this.props.prefValues[b.kMailViewDimensions][e?"widthWide":"width"]};return u.a.createElement("div",{id:"mail_view",className:this.props.prefValues[b.kMailViewLayout],__source:{fileName:f,lineNumber:148,columnNumber:7}},u.a.createElement(s.a,{ref:this.mailSearchRef,selectedFolder:r.a.getSelectedFolder(),queryString:this.state.queryString,onSlidebarPosition:this.onSlidebarPosition,position:this.props.prefValues[b.kMailViewLayout],style:t,hasNoListEntries:this.state.hasNoListEntries,onSelect:this.handleSelection,__source:{fileName:f,lineNumber:149,columnNumber:9}}),u.a.createElement(i.a,{listEntry:this.state.listEntry,prefValues:this.props.prefValues,hasNoListEntries:this.state.hasNoListEntries,pageIsActive:this.props.isActive,__source:{fileName:f,lineNumber:159,columnNumber:9}}))}}_(E,"contextType",h.a),t.a=Object(n.a)(E,v)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(222),i=a(597),s=a(1306),r=a(0),o=a.n(r),l=a(2),c=a(284),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\AccountSignup.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){const a=new Promise((a,n)=>{fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>{e.ok||n(e.text()),a(e.json())})}),n=new Promise((e,t)=>{const a=setTimeout(()=>{clearTimeout(a),t({status:0,statusText:"Error: Connection timed out [9010]"})},6e4)});return Promise.race([a,n])}class h extends o.a.PureComponent{constructor(...t){super(...t),m(this,"_refEmailField",o.a.createRef()),m(this,"_refUsernameField",o.a.createRef()),m(this,"_refAgeField",o.a.createRef()),m(this,"_refPasswordField",o.a.createRef()),m(this,"state",{username:"",email:"",error:"",age:-1,password:"",savePassword:!0,step:1,fetching:!1}),m(this,"getError",e=>{switch(e){case 1001:case 1005:return{error:Object(l.a)("Please choose a user name between 3 and 30 letters (a-z) and numbers (0-9) only."),step:1,field:"username"};case 1002:return{error:Object(l.a)("Please enter a valid email address."),step:1,field:"email"};case 1003:return{error:Object(l.a)("We require our members to be at least 16 years old to join."),step:1,field:"age"};case 1004:return{error:Object(l.a)("Email is already registered."),step:1,field:"email"};case 1006:return{error:Object(l.a)("Please choose a password at least 12 characters long."),step:2,field:"password"};case 1007:return{error:Object(l.a)("User name “$1” already exists, please enter another one.",[this.state.username]),step:1,field:"username"};case 1008:return{error:Object(l.a)("Email is in wrong format."),step:1,field:"email"};case 1010:return{error:Object(l.a)("Please enter a realistic lifespan number."),step:1,field:"age"};case 2001:return{error:Object(l.a)("User name contains a reserved word."),step:1,field:"username"};case 2002:return{error:Object(l.a)("Email domain has been blacklisted."),step:1,field:"email"};case 2003:return{error:Object(l.a)("IP address has been blacklisted."),step:1,field:"username"};case 3001:return{error:Object(l.a)("Claims are missing."),step:1,field:"username"};case 9e3:return{error:Object(l.a)("Please fill in the required fields."),step:1,field:"username"};case 9010:default:return{error:Object(l.a)("Connection error"),step:1,field:"username"}}}),m(this,"onRegister",e=>{e.currentTarget.password.checkValidity()&&(this.setState({fetching:!0}),d("https://login.viv.ext/profile/sync-registration",{username:this.state.username,emailaddress:this.state.email,password:this.state.password,age:this.state.age,lang:"en",disableNonce:!0}).then(e=>{this.parseResponse(e)}).catch(e=>{console.warn("Registration request failed:",e.statusText),this.setState({fetching:!1,error:this.getError(9010).error})}))}),m(this,"onCheckUserCredentials",e=>{const t=e.currentTarget;t.username.checkValidity()&&t.age.checkValidity()&&t.email.checkValidity()&&(this.setState({fetching:!0}),this.validateServerData("username").then(e=>this.validateServerData("email")).then(e=>{this.goToStep(2),this.setState({fetching:!1})}).catch(e=>{console.warn("Account credentials validation failed",e.statusText),this.setState({fetching:!1})}))}),m(this,"parseResponse",t=>{if(t.error){const a=parseInt(t.error),{error:n,step:i,field:s}=this.getError(a);this.reportValidity(s,n),this.setState({error:n,step:i}),e.nextTick(()=>this.reportValidity(s,n))}else this.setState(e=>{var a;return{error:"",step:(null===(a=t.success)||void 0===a?void 0:a.includes("Registration"))?3:e.step}},()=>{})}),m(this,"validateServerData",e=>d("https://login.viv.ext/profile/validateFieldSync",{field:e,value:this.state[e]}).then(e=>{if(this.parseResponse(e),e.error)return Promise.reject()}).catch(e=>(console.warn("Field validation failed",e.statusText),this.setState({fetching:!1,error:this.getError(9010).error}),Promise.reject()))),m(this,"debouncedValidate",Object(c.a)(e=>this.validateServerData(e).catch(()=>{}),500)),m(this,"reportValidity",(e,t)=>{var a,n,i,s,r;let o=null;switch(e){case"age":o=null===(a=this._refAgeField)||void 0===a?void 0:a.current;break;case"username":o=null===(n=this._refUsernameField)||void 0===n?void 0:n.current;break;case"email":o=null===(i=this._refEmailField)||void 0===i?void 0:i.current;break;case"password":o=null===(s=this._refPasswordField)||void 0===s?void 0:null===(r=s.current)||void 0===r?void 0:r._refInput.current}o&&(o.setCustomValidity(t),o.focus())}),m(this,"onUsernameChange",e=>{this.resetValidity(e);const t=e.target.value;t.match("[a-zA-Z0-9]{3,30}")&&this.debouncedValidate("username"),this.setState({username:t})}),m(this,"onAgeChange",e=>{this.resetValidity(e),this.setState({age:parseInt(e.target.value)})}),m(this,"onEmailChange",e=>{this.resetValidity(e);const t=e.target.value;this.setState({email:t}),t.match(".+@[^\\.]+?\\.\\w[\\w\\.]+?")&&this.debouncedValidate("email")}),m(this,"onPasswordChange",e=>{this.resetValidity(e),this.setState({password:e.target.value})}),m(this,"onSavePasswordChange",e=>{this.setState({savePassword:e.target.checked})}),m(this,"goToStep",e=>this.setState({step:e,error:""})),m(this,"setValidity",e=>{const{name:t,validity:a}=e.target;let n="";switch(!0){case a.rangeUnderflow&&"age"===t:n=this.getError(1003).error;break;case a.rangeOverflow&&"age"===t:n=this.getError(1010).error;break;case a.stepMismatch:case a.rangeUnderflow:case a.rangeOverflow:case a.typeMismatch:case a.patternMismatch:case a.badInput:case a.tooLong:case a.tooShort:"username"===t&&(n=this.getError(1001).error),"password"===t&&(n=this.getError(1006).error),"email"===t&&(n=this.getError(1002).error);break;case a.valueMissing:n=this.getError(9e3).error;break;case a.customError:n=e.target.validationMessage;break;case a.valid:}e.target.setCustomValidity(n),e.target.focus(),e.preventDefault(),this.setState({error:n})}),m(this,"resetValidity",e=>{e.target.setCustomValidity(""),this.setState({error:""})}),m(this,"renderUserDetails",()=>o.a.createElement("form",{onSubmit:this.onCheckUserCredentials,noValidate:!0,className:"AccountSheet-Signup",__source:{fileName:u,lineNumber:424,columnNumber:7}},o.a.createElement("p",{__source:{fileName:u,lineNumber:429,columnNumber:9}},Object(l.a)("To start syncing data across devices, a confirmed Vivaldi account is required. Already have an account?"),o.a.createElement("a",{onClick:this.props.onChangeDisplay,__source:{fileName:u,lineNumber:431,columnNumber:11}},Object(l.a)("Log in."))),o.a.createElement("div",{className:"AccountSheet-FormGrid",__source:{fileName:u,lineNumber:434,columnNumber:9}},o.a.createElement("label",{__source:{fileName:u,lineNumber:435,columnNumber:11}},Object(l.a)("User Name"),o.a.createElement("input",{ref:this._refUsernameField,type:"text",name:"username",value:this.state.username,onChange:this.onUsernameChange,onInvalid:this.setValidity,required:!0,pattern:"[a-zA-Z0-9]{3,30}",autoFocus:!0,__source:{fileName:u,lineNumber:437,columnNumber:13}})),o.a.createElement("label",{__source:{fileName:u,lineNumber:450,columnNumber:11}},Object(l.a)("Age"),o.a.createElement("input",{ref:this._refAgeField,type:"number",name:"age",value:this.state.age>=0?this.state.age:"",onChange:this.onAgeChange,onInvalid:this.setValidity,required:!0,min:"16",max:"150",__source:{fileName:u,lineNumber:452,columnNumber:13}})),o.a.createElement("label",{__source:{fileName:u,lineNumber:465,columnNumber:11}},Object(l.a)("Recovery email"),o.a.createElement("input",{ref:this._refEmailField,type:"email",name:"email",placeholder:"name@provider.com",value:this.state.email,onChange:this.onEmailChange,onInvalid:this.setValidity,pattern:".+@[^\\.]+?\\.\\w[\\w\\.]+?",required:!0,__source:{fileName:u,lineNumber:467,columnNumber:13}}))),this.state.error&&o.a.createElement(n.a,{type:"error",__source:{fileName:u,lineNumber:481,columnNumber:11}},this.state.error),o.a.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:u,lineNumber:483,columnNumber:9}},!this.state.fetching&&o.a.createElement("input",{type:"submit",value:Object(l.a)("Next"),__source:{fileName:u,lineNumber:485,columnNumber:13}}),this.state.fetching&&o.a.createElement("span",{className:"FormButton primary",__source:{fileName:u,lineNumber:488,columnNumber:13}},Object(l.a)("Checking...")),o.a.createElement("input",{type:"button",value:Object(l.a)("Cancel"),onClick:this.props.onClose,__source:{fileName:u,lineNumber:490,columnNumber:11}})))),m(this,"renderPasswordDetails",()=>o.a.createElement("form",{onSubmit:this.onRegister,noValidate:!0,className:"AccountSheet-Signup",__source:{fileName:u,lineNumber:502,columnNumber:7}},o.a.createElement(i.a,{pictureUrl:"",username:this.state.username,deviceName:this.state.email,__source:{fileName:u,lineNumber:507,columnNumber:9}}),o.a.createElement("div",{className:"AccountSheet-FormGrid",__source:{fileName:u,lineNumber:513,columnNumber:9}},o.a.createElement("label",{__source:{fileName:u,lineNumber:514,columnNumber:11}},Object(l.a)("Password"),o.a.createElement(s.a,{ref:this._refPasswordField,name:"password",value:this.state.password,onChange:this.onPasswordChange,onInvalid:this.setValidity,minLength:"12",required:!0,__source:{fileName:u,lineNumber:516,columnNumber:13}})),o.a.createElement("label",{className:"AccountSheet-Password",__source:{fileName:u,lineNumber:526,columnNumber:11}},o.a.createElement("input",{type:"checkbox",checked:this.state.savePassword,onChange:this.onSavePasswordChange,__source:{fileName:u,lineNumber:527,columnNumber:13}}),Object(l.a)("Save Password"))),this.state.error&&o.a.createElement(n.a,{type:"error",__source:{fileName:u,lineNumber:535,columnNumber:11}},this.state.error),o.a.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:u,lineNumber:537,columnNumber:9}},!this.state.fetching&&o.a.createElement("input",{type:"submit",value:Object(l.a)("Register"),__source:{fileName:u,lineNumber:539,columnNumber:13}}),this.state.fetching&&o.a.createElement("span",{className:"FormButton primary",__source:{fileName:u,lineNumber:542,columnNumber:13}},Object(l.a)("Registering...")),o.a.createElement("input",{type:"button",value:Object(l.a)("navigation","Back"),onClick:()=>this.goToStep(1),__source:{fileName:u,lineNumber:545,columnNumber:11}}),o.a.createElement("input",{type:"button",value:Object(l.a)("Cancel"),onClick:this.props.onClose,__source:{fileName:u,lineNumber:550,columnNumber:11}}))))}render(){const{step:e}=this.state;return(o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{__source:{fileName:u,lineNumber:564,columnNumber:9}},Object(l.a)("Create an Account")),1===e&&this.renderUserDetails(),2===e&&this.renderPasswordDetails(),3===e&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"AccountSheet-Signup",__source:{fileName:u,lineNumber:569,columnNumber:13}},o.a.createElement("h3",{__source:{fileName:u,lineNumber:570,columnNumber:15}},"Account for user ",this.state.username," created.")),o.a.createElement("div",{className:"AccountSheet-Footer",__source:{fileName:u,lineNumber:572,columnNumber:13}},o.a.createElement("input",{type:"submit",value:Object(l.a)("Great!"),onClick:this.props.onClose,__source:{fileName:u,lineNumber:573,columnNumber:15}}),o.a.createElement("input",{type:"button",value:Object(l.a)("navigation","Back"),onClick:()=>this.goToStep(1),__source:{fileName:u,lineNumber:578,columnNumber:15}})))))}}t.a=h}).call(this,a(82))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return c}));var n=a(0),i=a(2),s=a(9),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\PasswordInput.jsx";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends n.PureComponent{constructor(...t){super(...t),l(this,"_refInput",n.createRef()),l(this,"state",{type:"password"}),l(this,"toggleVisibility",()=>{var t,a;const n={start:(null===(t=this._refInput.current)||void 0===t?void 0:t.selectionStart)||0,end:(null===(a=this._refInput.current)||void 0===a?void 0:a.selectionEnd)||0};this.setState(e=>({type:"text"===e.type?"password":"text"})),e.nextTick(()=>{this._refInput.current&&(this._refInput.current.selectionStart=n.start,this._refInput.current.selectionEnd=n.end)})})}render(){return n.createElement("span",{className:"PasswordInputWrapper",__source:{fileName:r,lineNumber:33,columnNumber:12}},n.createElement("input",o({},this.props,{ref:this._refInput,type:this.state.type,className:"PasswordInput",__source:{fileName:r,lineNumber:34,columnNumber:7}})),n.createElement("button",{type:"button",title:"password"===this.state.type?Object(i.a)("title","Show password"):Object(i.a)("Hide password"),onClick:this.toggleVisibility,className:"PasswordToggle",dangerouslySetInnerHTML:{__html:s.Oc},__source:{fileName:r,lineNumber:40,columnNumber:7}}))}}}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a.n(n),s=a(297),r=a(588),o=a(324),l=a(134);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends i.a.PureComponent{constructor(...t){super(...t),c(this,"state",{zoom:o.a.getState().uiZoom}),c(this,"_onZoomStoreChanged",()=>{this.setState({zoom:o.a.getState().uiZoom})}),c(this,"setZoomLevel",(t,a)=>{a?this.setState({zoom:t}):s.a.setUIZoom(t),e.nextTick(()=>{this.props.onUIZoomUpdate()})})}componentDidMount(){this._zoomDetectStoreToken=o.a.addListener(this._onZoomStoreChanged)}componentWillUnmount(){this._zoomDetectStoreToken.remove()}render(){const{zoom:e}=this.state;return(i.a.createElement(r.a,{inFooter:!1,zoom:e,defaultZoomLevel:l.j,key:"zoomslider",scrolling:!1,maxLevel:l.k,minLevel:l.l,step:l.m,delay:!0,onZoomUpdated:this.setZoomLevel,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\UIZoomIndicator.jsx",lineNumber:57,columnNumber:12}}))}}t.a=u}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(44),s=a(91),r=a(31),o=a(6),l=a(0),c=a.n(l),u=a(377),m=a(114),d=a(108),h=a(185),p=a(2),b=a(4),g=a(126),N=a(7),f=a(147),_=a(9),v=a(1),E=a(169),C="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\MenuTree.jsx";function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends c.a.Component{constructor(t){super(t),w(this,"refTreeList",c.a.createRef()),w(this,"_isMounted",!1),w(this,"_isMac",!1),w(this,"_editHasFocus",!1),w(this,"_onUrlbarStoreChanged",()=>{const{editUrl:e,autocompleteValue:t}=d.a.getUrlfieldStateFromId("MenuTree");this.setState({autocompleteValue:t,editUrl:e})}),w(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),w(this,"_onMenuChanged",(e,t,a,n)=>{e===this.props.menu&&this._setMenu(e,t,a,this.state.role,n,!1)}),w(this,"_loadMenu",()=>{s.a.isSection(this.props.menu)?this._isMounted&&this.setState({rootId:"",role:"",menuItems:[]}):N.a.menuContent.get(this.props.menu,(e,t,a)=>{this._setMenu(this.props.menu,e,"",t,a,!0)})}),w(this,"_setMenu",(e,t,a,n,r,o)=>{const l=(e,t,a)=>{e.index=a,e.parentId=t,e.items&&(e.children=e.items,e.children.forEach((t,a)=>{l(t,e.id,a)}))};((e,t,a)=>"context"===t?s.a.makeMenuWithContent(e,a):Promise.resolve(i.default.makeMenuWithContent(a,!1)))(e,n,r).then(e=>{e.forEach((e,a)=>{l(e,t,a)}),this._isMounted&&this.setState({rootId:t,role:n,menuItems:e},()=>{if(!0===o&&this.state.menuItems.length>0){var e;null===(e=this.refTreeList.current)||void 0===e||e.selectByNode(this.state.menuItems[0])}else{const e=this._getNodeById(a);var t;if(e)null===(t=this.refTreeList.current)||void 0===t||t.selectByNode(e)}})})}),w(this,"_getNodeById",e=>{const t=a=>{if(a)for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e)return i;if(i.children){const e=t(i.children);if(e)return e}}};return t(this.state.menuItems)}),w(this,"_hasChildren",e=>Boolean(e.children)&&e.children.length>0),w(this,"_isFolder",e=>Boolean(e.children)),w(this,"_isContainer",e=>"container"===e.type),w(this,"_isBookmarkContainer",e=>{var t;return"CONTAINER_BOOKMARK"===(null===(t=e.container)||void 0===t?void 0:t.content)}),w(this,"_isSeparator",e=>"separator"===e.type),w(this,"_isLink",e=>e.commandName===i.default.getOpenLinkName()),w(this,"_isDefaultTopFolder",e=>!this._isContextMenu()&&(!!this._isMac&&["MENU_APPLE_APP","MENU_FILE","MENU_EDIT","MENU_VIEW","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName))),w(this,"_isPersistent",e=>!this._isContextMenu()&&(!!this._isMac&&["MENU_APPLE_APP","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName))),w(this,"_canDeleteNode",e=>!!this._isContextMenu()||(!this._isMac||!this._isPersistent(e)&&!this._isBookmarkContainer(e))),w(this,"_isValidForClipboard",e=>this._isValidDragSource(e)),w(this,"_isValidDragSource",e=>!!this._isContextMenu()||(!this._isMac||!["MENU_APPLE_APP"].includes(e.commandName))),w(this,"_validateForDrag",e=>e.map(this._getNodeById).filter(Boolean).filter(this._isValidDragSource).map(e=>e.id)),w(this,"_validateForDeletion",e=>e.map(this._getNodeById).filter(Boolean).filter(this._canDeleteNode).map(e=>e.id)),w(this,"_validateForRename",e=>{const t=this._getNodeById(e);return!!t&&(!this._isSeparator(t)&&!1!==t.settingsRename)}),w(this,"_validateForEdit",e=>{const t=this._getNodeById(e);return!!t&&this._isLink(t)}),w(this,"_reset",e=>{N.a.menuContent.reset(this.props.menu,[e],E.default)}),w(this,"_setContainerMode",(e,t)=>{N.a.menuContent.update(this.props.menu,e,{containerMode:t},E.default)}),w(this,"_setShowShorcut",(e,t)=>{N.a.menuContent.update(this.props.menu,e,{showshortcut:t},E.default)}),w(this,"_setContainerEdge",(e,t)=>{N.a.menuContent.update(this.props.menu,e,{containerEdge:t},E.default)}),w(this,"_onEdit",()=>{const e=this.getSelectedItem();if(e){const t=e.url||"";m.a.setUrlfieldState("MenuTree",{selectionStart:0,selectionEnd:t.length,editUrl:void 0,autocompleteValue:""}),this.setState({editId:e.id,editTitle:e.label,url:t})}}),w(this,"_onTitleChanged",e=>{const t=e.target.value;this.setState({editTitle:t})}),w(this,"_onUrlChanged",e=>{this.setState({editUrl:e||""})}),w(this,"_onEditFocus",()=>{this._editHasFocus=!0}),w(this,"_onEditBlur",()=>{this._editHasFocus=!1,e.nextTick(()=>{this._saveEdit(!this._editHasFocus,!1)})}),w(this,"_cancelEdit",()=>{this.setState({editId:"",editTitle:"",editUrl:""})}),w(this,"_saveEdit",(e,t)=>{const a=this.state.editId;let n=(this.state.autocompleteValue||this.state.editUrl||this.state.url||"").trim();N.a.utilities.getUrlFragments(n).then(i=>{i.scheme.fragment||(n="http://"+n),N.a.menuContent.update(this.props.menu,a,{title:this.state.editTitle,parameter:n},()=>{e&&this.setState({editId:"",editTitle:"",editUrl:""},()=>{const e=this._getNodeById(a);if(e){var n,i,s;if(t)null===(s=this.refTreeList.current)||void 0===s||s.focusTree();null===(n=this.refTreeList.current)||void 0===n||n.expandToId(a),null===(i=this.refTreeList.current)||void 0===i||i.selectByNode(e)}})})})}),w(this,"_handleEditKeyPress",e=>{"Escape"===e.key&&(e.preventDefault(),this._cancelEdit()),"Enter"===e.key&&(e.preventDefault(),this._saveEdit(!0,!0))}),w(this,"_getTitle",e=>{const t=this._getNodeById(e);if(t){let e=t.label;return t.ellipsis&&(e+=r.a.ellipsisString()),e}return""}),w(this,"_saveTitle",(e,t)=>{N.a.menuContent.update(this.props.menu,e,{title:t},E.default)}),w(this,"_isMenubarMenu",()=>"mac"===this.state.role||"horizontal"===this.state.role),w(this,"_isContextMenu",()=>"context"===this.state.role),w(this,"_getDragData",(e,t)=>""),w(this,"_getMimeData",e=>{let t="",a=!1,n=!1;e.forEach(e=>{const i=this._getNodeById(e);i&&(this._isFolder(i)?(this._isDefaultTopFolder(i)&&(a=!0),t=""===t||t===f.g?f.g:f.i):(this._isBookmarkContainer(i)&&(n=!0),t=""===t||t===f.h?f.h:f.i))});const i=[];return i.push({mimeType:t,payload:JSON.stringify(e)}),a&&i.push({mimeType:f.f,payload:JSON.stringify(e)}),n&&i.push({mimeType:f.b,payload:JSON.stringify(e)}),i}),w(this,"_setDragData",(e,t)=>{this._getMimeData(t).forEach(t=>{e.setData(t.mimeType,t.payload)})}),w(this,"_getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!1};return a.available=t.dataTransfer.types.some(e=>e===f.h||e===f.g||e===f.i||e===f.d||e===f.c||e===f.e),a.available&&(a.onto=this._canDropOnto(e,t),a.edge=this._canDropOnEdge(e,t)),a}),w(this,"_canDropOnto",(e,t)=>{if(this._isFolder(e)){if(this._isMac){if(t.dataTransfer.types.some(e=>e===f.b))return!1;if(t.dataTransfer.types.some(e=>e===f.g)&&t.dataTransfer.types.some(e=>e===f.f))return!1}return!0}return!1}),w(this,"_canDropOnEdge",(e,t)=>0!==e.level||!this._isMenubarMenu()||(!this._isMac||0!==e.index)&&t.dataTransfer.types.some(e=>e===f.g||e===f.i||e===f.c||e===f.e)),w(this,"_getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:""};return this._isFolder(e)&&"on"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0)),a}),w(this,"_canAddToTopLevel",e=>{let t=!0;return this._isMenubarMenu()&&e.forEach(e=>{"folder"!==e.type&&(t=!1)}),t}),w(this,"_handleMimeData",(e,t,a,n,i)=>{const s={type:""};if(this._hasCommandMimeType(n,s)){const a=JSON.parse(i(s.type)).map(e=>{if(!e.menu||e.menu===this.props.menu)return e.node}).filter(Boolean);return this._add(e,t,a,!0).then(()=>Promise.resolve([]))}if(this._hasMenuMimeType(n,s)){const n=i(s.type),r=JSON.parse(n);if(a){const a=[];return this._getContentTree(a,r),this._add(e,t,a,!1).then(()=>Promise.resolve([]))}return this._onMove(r,e,t).then(e=>{if(e&&e.length>0){var t,a;const n=e[0];null===(t=this.refTreeList.current)||void 0===t||t.expandToId(n),null===(a=this.refTreeList.current)||void 0===a||a.setSelectedIds(e),this._setCutIds([])}return Promise.resolve([])})}return Promise.resolve([])}),w(this,"_onDrop",(e,t,a)=>{const i="on"===a?t.id:t.parentId,s="on"===a?0:t.index+("below"===a?1:0),r=n.a.isCopyModifierPressed(e);return this._handleMimeData(i,s,r,e.dataTransfer.types,t=>e.dataTransfer.getData(t))}),w(this,"addToNode",(e,t,a)=>{const n=this._isFolder(e)?e.id:e.parentId,i=this._isFolder(e)?0:e.index+1;return this._add(n,i,JSON.parse(t),a)}),w(this,"_add",(e,t,a,n,i)=>this._addAtPosition(e,t,a,n).then(e=>{var t,a;(null==e?void 0:e.length)>0&&(null===(t=this.refTreeList.current)||void 0===t||t.expandToId(e[0]),null===(a=this.refTreeList.current)||void 0===a||a.setSelectedIds(e))})),w(this,"_addAtPosition",(t,a,n,s)=>{const r=(e,t,a)=>Promise.all(e.map(e=>new Promise(n=>{N.a.menuContent.create(this.props.menu,t,a++,[e],(t,a)=>{e.children?r(e.children,a[0],0).then(()=>{n(a[0])}):n(a[0])})}))),o=s&&1===n.length&&n[0].action===i.default.getOpenLinkName();return r(n,t,a).then(t=>(o&&e.nextTick(this._onEdit),t))}),w(this,"_supportsUpDownMove",(e,t)=>!!this._isValidDragSource(e)&&!(0===e.level&&!0===t&&e.index<=1)),w(this,"_onMove",(e,t,a)=>new Promise(n=>{N.a.menuContent.move(this.props.menu,e,t,a,t=>{n(e)})})),w(this,"_onKeyPressed",e=>{"Escape"===e.key&&this._setCutIds([])}),w(this,"_setCutIds",e=>{N.a.utilities.setSharedData({key:"MenuCutIds",value:e.length>0?e.join():""})}),w(this,"_onSharedDataChanged",(e,t)=>{if("MenuCutIds"===e){const e=t.length>0?t.split(","):[];e.length>0?window.addEventListener("keydown",this._onKeyPressed,!0):window.removeEventListener("keydown",this._onKeyPressed,!0),this.setState({cutIds:e})}}),w(this,"_cut",(e,t)=>{this._setCutIds(t);const a=e.clipboardData;if(a){a.setData("vivaldi/x-cut","true"),this._getMimeData(t).forEach(e=>{a.setData(e.mimeType,e.payload)})}Object(g.a)(e)}),w(this,"_copy",(e,t)=>{const a=e.clipboardData;if(a){this._getMimeData(t).forEach(e=>{a.setData(e.mimeType,e.payload)})}Object(g.a)(e)}),w(this,"_getContentTree",(e,t)=>{t.forEach(t=>{const a=this._getNodeById(t);if(a){const t={id:"",action:a.commandName||"",type:a.type};if(t.action===i.default.getOpenLinkName()&&(t.parameter=a.url,t.title=a.label),"folder"===t.type&&(t.title=a.label,t.children=[],a.children)){const e=a.children.map(e=>e.id),n=[];this._getContentTree(n,e),t.children=n}e.push(t)}})}),w(this,"_hasCommandMimeType",(e,t)=>{for(let a=0;a<e.length;a++){const n=e[a];switch(n){case f.d:case f.c:case f.e:return t.type=n,!0}}return t.type="",!1}),w(this,"_hasMenuMimeType",(e,t)=>{for(let a=0;a<e.length;a++){const n=e[a];switch(n){case f.h:case f.g:case f.i:return t.type=n,!0}}return t.type="",!1}),w(this,"_paste",(e,t)=>{const a=e.clipboardData;if(!a)return Promise.resolve([]);const n="true"===a.getData("vivaldi/x-cut");if(n&&0===this.state.cutIds.length)return Promise.resolve([]);const i=this._isFolder(t)?t.id:t.parentId,s=this._isFolder(t)?0:t.index+1;return this._handleMimeData(i,s,!n,a.types,e=>a.getData(e)).then(e=>(n&&this._setCutIds([]),e))}),w(this,"_onCreate",(t,a,n,s)=>s?new Promise(s=>{const r=[];let o=!1,l=!1;t.forEach((e,t)=>{if(e.children)o=0===t,r.push({id:"",type:"folder",action:"",title:Object(p.a)("command","New Folder")});else if(e.separator)r.push({id:"",type:"separator",action:""});else{l=0===t;const e=i.default.getOpenLinkName();r.push({id:"",type:"command",action:e,title:i.default.getCommandLabel(e)||"",parameter:i.default.getCommandParameter(e)||""})}}),N.a.menuContent.create(this.props.menu,a,void 0===n?-1:n,r,(t,a)=>{l&&e.nextTick(this._onEdit);const n={items:a.map(e=>({id:e})),props:{edit:o}};s(n)})}):Promise.resolve({items:[]})),w(this,"_onRemove",e=>new Promise(t=>{N.a.menuContent.remove(this.props.menu,e,e=>{t(e)})})),w(this,"_handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),w(this,"_getContextMenuItemProps",e=>{return s.a.isSection(this.props.menu)?{}:e?{showMoveUp:null===(t=this.refTreeList.current)||void 0===t?void 0:t.canMoveUpDown(e,!0),showMoveDown:null===(a=this.refTreeList.current)||void 0===a?void 0:a.canMoveUpDown(e,!1),showRename:this._validateForRename(e.id),showEdit:this._validateForEdit(e.id),showDelete:this._canDeleteNode(e),showNewItem:!0,showNewSeparator:!0,showNewFolder:!0,showCut:this._canDeleteNode(e),showCopy:!0,showPaste:!0}:{showNewSeparator:!this._isMenubarMenu(),showNewFolder:!0,showPaste:!0};var t,a}),w(this,"_getContextMenuNewItemString",()=>Object(b.a)("New Link")),w(this,"_getNodeMenuItems",e=>{var t,a,n,i;return[{handler:()=>this._reset(e.id),testVisibility:()=>this._isFolder(e)&&!e.custom,...Object(b.a)("Restore Default Folder")},{testVisibility:()=>this._isContainer(e)&&!this._isBookmarkContainer(e),...Object(b.a)("Show as Subfolder"),type:"checkbox",checked:"folder"===(null===(t=e.container)||void 0===t?void 0:t.mode),handler:()=>{var t;return this._setContainerMode(e.id,"folder"===(null===(t=e.container)||void 0===t?void 0:t.mode)?"inline":"folder")}},{testVisibility:()=>this._isBookmarkContainer(e),...Object(b.a)("Show 'Add Active Tab'"),items:[{type:"radio",checked:"above"===(null===(a=e.container)||void 0===a?void 0:a.edge),radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"above"),...Object(b.a)("Above List")},{type:"radio",checked:"below"===(null===(n=e.container)||void 0===n?void 0:n.edge),radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"below"),...Object(b.a)("Below List")},{type:"separator",name:""},{type:"radio",checked:"off"===(null===(i=e.container)||void 0===i?void 0:i.edge),handler:this._setContainerEdge.bind(this,e.id,"off"),radiogroup:2,...Object(b.a)("radio","Hide")}]},{testVisibility:()=>!0,...Object(b.a)("Show Shortcuts in Menu"),type:"checkbox",enabled:o.a.get(v.kKeyboardShortcutsEnable),checked:!1!==e.showshortcut,handler:()=>this._setShowShorcut(e.id,!(!1!==e.showshortcut))}]}),w(this,"_getContextMenuItems",e=>e?this._getNodeMenuItems(e):[]),w(this,"rowComponent",e=>{var t,a,n;const{inlineEditText:i,node:s,onBlur:l,onChange:u,onFocus:m}=e,d=16*s.level+"px",h=16*(s.level+1)+"px";if(this._isSeparator(s))return c.a.createElement("label",{key:"0",__source:{fileName:C,lineNumber:1080,columnNumber:9}},c.a.createElement("hr",{style:{marginLeft:h},className:"separator",__source:{fileName:C,lineNumber:1081,columnNumber:11}}));let b=s.label;var N,E;(s.ellipsis&&(b+=r.a.ellipsisString()),"container"===s.type)&&(s.settingsLabel?b="inline"===(null===(N=s.container)||void 0===N?void 0:N.mode)||this._isBookmarkContainer(s)?s.settingsLabel:Object(p.a)("$1 (as Subfolder)",[s.settingsLabel]):"folder"===(null===(E=s.container)||void 0===E?void 0:E.mode)&&(b=Object(p.a)("$1 (as Subfolder)",[b])));const w=this._isFolder(s)&&this._hasChildren(s);let O=o.a.get(v.kKeyboardShortcutsEnable);(null===(t=s.shortcuts)||void 0===t?void 0:t.length)>0&&1===s.shortcuts[0].length&&O&&(O=r.a.isMailCommand(s)?o.a.get(v.kKeyboardShortcutsEnableSingleKeyForMail):o.a.get(v.kKeyboardShortcutsEnableSingleKey));const y=!1!==s.showshortcut;return(c.a.createElement("label",{key:"0",__source:{fileName:C,lineNumber:1118,columnNumber:7}},w&&c.a.createElement("span",{className:"expand-icon",style:{marginLeft:d},onMouseDown:g.a,onMouseUp:()=>this._handleExpandClick(s.id),dangerouslySetInnerHTML:{__html:_.rb},__source:{fileName:C,lineNumber:1120,columnNumber:11}}),void 0!==i&&c.a.createElement("input",{type:"text",value:i,onChange:u,onFocus:m,onBlur:l,autoFocus:!0,__source:{fileName:C,lineNumber:1128,columnNumber:11}}),void 0===i&&c.a.createElement("span",{className:"title",style:w?null:{marginLeft:h},__source:{fileName:C,lineNumber:1138,columnNumber:11}},b),(null===(a=s.shortcuts)||void 0===a?void 0:a.length)>0&&!y&&O&&c.a.createElement("span",{style:{textDecoration:"line-through"},className:"item-count",__source:{fileName:C,lineNumber:1146,columnNumber:11}},Object(f.a)(s.shortcuts[0])),(null===(n=s.shortcuts)||void 0===n?void 0:n.length)>0&&y&&O&&c.a.createElement("span",{className:"item-count",__source:{fileName:C,lineNumber:1152,columnNumber:11}},Object(f.a)(s.shortcuts[0]))))}),this.state={rootId:"",role:"",menuItems:[],editId:"",editTitle:"",editUrl:"",autocompleteValue:"",url:"",cutIds:[]}}componentDidMount(){this._isMounted=!0,N.a.menuContent.onChanged.addListener(this._onMenuChanged),N.a.utilities.onSharedDataUpdated.addListener(this._onSharedDataChanged),d.a.addChangeListener(this._onUrlbarStoreChanged),this._loadMenu()}componentWillUnmount(){this._isMounted=!1,N.a.menuContent.onChanged.removeListener(this._onMenuChanged),N.a.utilities.onSharedDataUpdated.removeListener(this._onSharedDataChanged),d.a.removeChangeListener(this._onUrlbarStoreChanged)}componentDidUpdate(e,t){this.props.menu!==e.menu&&(this._cancelEdit(),this._loadMenu())}render(){return this.state?this.state.editId?c.a.createElement("div",{onKeyDown:this._handleEditKeyPress,__source:{fileName:C,lineNumber:1168,columnNumber:9}},c.a.createElement("div",{className:"UrlField",__source:{fileName:C,lineNumber:1169,columnNumber:11}},c.a.createElement("input",{type:"text",placeholder:Object(p.a)("Title"),value:this.state.editTitle,onChange:this._onTitleChanged,onBlur:this._onEditBlur,onFocus:this._onEditFocus,__source:{fileName:C,lineNumber:1170,columnNumber:13}})),c.a.createElement(u.a,{placeholder:Object(p.a)("Address"),title:Object(p.a)("Enter webpage address"),pageId:"MenuTree",autocompletionEnabled:!0,autoFocus:!1,displayUrl:this.state.url,editUrl:this.state.editUrl,handleDrop:!0,onChange:this._onUrlChanged,onBlur:this._onEditBlur,onFocus:this._onEditFocus,autoFocus:!0,__source:{fileName:C,lineNumber:1178,columnNumber:11}})):c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{ref:this.refTreeList,rowComponent:this.rowComponent,nodes:this.state.menuItems,rootId:this.state.rootId,cutIds:this.state.cutIds,enableDragAndDrop:!s.a.isSection(this.props.menu),validateForDrag:this._validateForDrag,validateForDeletion:this._validateForDeletion,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,getDropSupport:this._getDropSupport,onDrop:this._onDrop,onMove:this._onMove,onCreate:this._onCreate,onEdit:this._onEdit,delete:this._onRemove,isValidForClipboard:this._isValidForClipboard,onCut:this._cut,onCopy:this._copy,onPaste:this._paste,hasChildren:this._hasChildren,isFolder:this._isFolder,appendContextItems:!0,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,getContextMenuNewItemString:this._getContextMenuNewItemString,getTitle:this._getTitle,saveTitle:this._saveTitle,supportsInlineEdit:!0,supportsUpDownMove:this._supportsUpDownMove,isValidToEdit:this._validateForRename,__source:{fileName:C,lineNumber:1196,columnNumber:9}}),c.a.createElement("div",{className:"setting-single",__source:{fileName:C,lineNumber:1230,columnNumber:9}},c.a.createElement("input",{type:"button",onClick:this.props.confirmReset,value:Object(p.a)("Restore Default Menu"),__source:{fileName:C,lineNumber:1231,columnNumber:11}}))):null}}t.a=O}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(150),s=a(44),r=a(21),o=a(154),l=a(90),c=a(858),u=a(11),m=a(61),d=a(22),h=a(385),p=a(762),b=a(35),g=a(2),N=a(1),f=a(9),_=a(23),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\mouse\\MouseGestures.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=_.p.settingCategories,w=[N.kMouseGesturesAltGesturesEnabled,N.kMouseGesturesDoubleClickMenuEnabled,N.kMouseGesturesEnabled,N.kMouseGesturesStrokeTolerance,N.kMouseGesturesRockerGesturesEnabled],O=u.a.getEventHandler;class y extends n.Component{constructor(t){super(t),E(this,"lastX",0),E(this,"lastY",0),E(this,"_onCommandStoreChange",()=>{this.setState({commandArray:s.default.getUserEditableCommands().filter(e=>!e.keyword&&!e.hideInSettings),assignedArray:s.default.getCommandsGestures(),addingGesture:0})}),E(this,"populateAngleMap",()=>{const e=2*Math.PI/4,t=2*Math.PI/100,a=[];for(let n=-e/2;n<=2*Math.PI-e/2;n+=t){const t=2*Math.floor((n+e/2)/e);a.push(t)}return a}),E(this,"_getCommandByGesture",e=>this.state.commandArray.find(t=>{if(t.gestures&&t.gestures[0]===e)return t})),E(this,"_getTopCommand",e=>e.find(e=>e.gestures)),E(this,"onGestureListChange",e=>{const t=this.state.selectedCommand;let a=e&&"focus"===e.type&&t&&t.gestures?t.gestures[0]:e.target.value;const n=e&&"focus"===e.type&&t?t:this._getCommandByGesture(a);a&&(this.animation&&!this.animation.stopped||(this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG)),0===a.indexOf("e")&&(a=a.substring(1,a.length)),this.animation.stop(),this.animation.start(a),this.setState({addingGesture:0,selectedCommand:n}))}),E(this,"addGesture",()=>{this.setState({addingGesture:1})}),E(this,"onCancelGesture",()=>{this.moves=[],this.clearAnimation();const e=this.state.commandArray;this.setState({addingGesture:0,gestureExists:!1,selectedCommand:this._getTopCommand(e)})}),E(this,"_findNextCommandGesture",()=>{const e=this.state.selectedCommand,t=this.state.commandArray.filter(e=>e.gestures);if(t&&e){const a=t.findIndex(t=>t.name===e.name);return a<t.length-1?t[a+1]:t[a-1]}}),E(this,"removeGesture",()=>{const e=this._findNextCommandGesture(),t=this.state.selectedCommand;if(!t)return;const a={gestures:null,shortcut:t.shortcut};b.a.set({[t.name]:a}),this.setState({selectedCommand:e}),this.animation&&e&&this.animation.start(e.gestures[0])}),E(this,"editGesture",()=>{const e=this.state.selectedCommand;e&&this.setState(t=>({addingGesture:2,selectedCommand:t.commandArray.find(t=>t.name===e.name)}))}),E(this,"restoreGestures",()=>{i.default.restoreCommandGestures(),this.setState({confirmation:!1})}),E(this,"confirmRestore",()=>{this.setState({confirmation:!0})}),E(this,"onCancel",()=>{this.setState({confirmation:!1})}),E(this,"consolidateCommands",()=>this.state.commandArray.filter(e=>!e.gestures&&e)),E(this,"save",()=>{if(!this.moves)return;let t=this.moves.join("");const a=this.state.selectedCommand;if(!a)return;a.overLink&&(t="e"+t);const n={gestures:[t],shortcut:a.shortcut};b.a.set({[a.name]:n}),this.moves=[],e.nextTick(()=>this.refs.gestureList&&this.refs.gestureList.focus())}),E(this,"addPoint",(e,t,a)=>{this.pointX.push(e),this.pointY.push(t),a&&this.pointDrag.push(a)}),E(this,"addMove",(e,t)=>{const a=2*Math.PI/4;let n=Math.atan2(t,e)+a/2;n<0&&(n+=2*Math.PI);const i=Math.floor(n/(2*Math.PI)*100);Array.isArray(this.moves)&&this.moves.push(this.state.angleMap[i])}),E(this,"redraw",()=>{const e=this.refs.gestureCanvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.strokeStyle=this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,e.lineJoin="round",e.lineWidth=16;for(let t=0;t<this.pointX.length;t++)e.beginPath(),this.pointDrag[t]&&t?e.moveTo(this.pointX[t-1],this.pointY[t-1]):e.moveTo(this.pointX[t]-1,this.pointY[t]),e.lineTo(this.pointX[t],this.pointY[t]),e.closePath(),e.stroke()}),E(this,"penDown",e=>{if(2!==this.state.addingGesture||e.button&&0!==e.button)return;e.touches&&(e=e.touches[0]),this.clearAnimation(),this.clearCanvas(),this.moves=[],this.paint=!0;const t=this.refs.gestureCanvas.getBoundingClientRect();this.addPoint(e.pageX-t.left,e.pageY-t.top),this.redraw()}),E(this,"penMove",e=>{if(2===this.state.addingGesture&&(e.touches&&(e=e.touches[0]),this.paint)){const t=this.refs.gestureCanvas.getBoundingClientRect();if(this.addPoint(e.pageX-t.left,e.pageY-t.top,!0),0===this.lastX)return this.lastX=e.pageX-t.left,void(this.lastY=e.pageY-t.top);const a=e.pageX-t.left-this.lastX,n=e.pageY-t.top-this.lastY,i=10;a*a+n*n>i*i&&(this.lastX=e.pageX-t.left,this.lastY=e.pageY-t.top,this.addMove(a,n)),this.redraw()}}),E(this,"penUp",()=>{if(this.paint=!1,2!==this.state.addingGesture||!this.moves||this.moves.length<3)return;this.moves.length&&(this.moves=this.moves.map((e,t,a)=>{if(e!==a[t-1]&&e===a[t+1])return e}).filter(e=>void 0!==e));let e=this.moves.join("");e.length>5&&(e=e.substring(e.length-5)),this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG),this.animation.start(e);const{assignedArray:t,selectedCommand:a}=this.state;let n;n=a&&a.overLink?t["e"+e]:t[e],this.setState({gestureExists:Boolean(n)})}),E(this,"penLeave",()=>{this.paint&&(this.paint=!1,this.moves=[],this.forceUpdate())}),E(this,"clearAnimation",()=>{if(void 0!==this.animation){this.animation.stop();const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)}}),E(this,"clearCanvas",()=>{this.paint=!1,this.pointX=[],this.pointY=[],this.pointDrag=[];const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)}),E(this,"renderGesture",()=>n.createElement("canvas",{ref:"gestureCanvas",width:"200",height:"200",onTouchStart:this.penDown,onTouchMove:this.penMove,onTouchEnd:this.penUp,onTouchCancel:this.penLeave,onMouseDown:this.penDown,onMouseMove:this.penMove,onMouseUp:this.penUp,onMouseLeave:this.penLeave,__source:{fileName:v,lineNumber:499,columnNumber:7}})),E(this,"renderSearchableCommands",()=>{const e=this.consolidateCommands(),t=this.props.category!==C.all;return n.createElement(p.a,{placeholder:Object(g.a)("Filter commands..."),isClearable:!0,autoFocus:t,openMenuOnFocus:!0,isMulti:!1,setSelectedItem:this.setSelectedCommand,commands:e,__source:{fileName:v,lineNumber:519,columnNumber:7}})}),E(this,"setSelectedCommand",e=>{this.setState({selectedCommand:e})}),E(this,"renderCommands",()=>this.state.commandArray.map(e=>{const{gestures:t}=e;return t?n.createElement("option",{key:`id-gesture-${e.label.split(" ").join("_")}`,value:t[0],__source:{fileName:v,lineNumber:541,columnNumber:11}},e.label):null})),E(this,"renderModal",()=>n.createElement(l.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:v,lineNumber:554,columnNumber:7}},n.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:v,lineNumber:557,columnNumber:9}},n.createElement("header",{className:"dialog-header",__source:{fileName:v,lineNumber:558,columnNumber:11}},n.createElement("h1",{className:"dialog-title",__source:{fileName:v,lineNumber:559,columnNumber:13}},Object(g.a)("Restore Gestures?"))),n.createElement("div",{className:"dialog-content",__source:{fileName:v,lineNumber:563,columnNumber:11}},n.createElement("p",{__source:{fileName:v,lineNumber:564,columnNumber:13}},Object(g.a)("All command gestures will be restored to default settings."))),n.createElement("footer",{className:"dialog-footer",__source:{fileName:v,lineNumber:568,columnNumber:11}},n.createElement("input",{type:"button",className:"danger",onClick:this.restoreGestures,value:Object(g.a)("Restore"),__source:{fileName:v,lineNumber:569,columnNumber:13}}),n.createElement("input",{type:"button",onClick:this.onCancel,value:Object(g.a)("Cancel"),autoFocus:!0,__source:{fileName:v,lineNumber:574,columnNumber:13}})))));const a=s.default.getUserEditableCommands();this.state={commandArray:a.filter(e=>!e.keyword&&!e.hideInSettings),assignedArray:s.default.getCommandsGestures(),selectedCommand:this._getTopCommand(a),addingGesture:0,gestureExists:!1,angleMap:this.populateAngleMap(),confirmation:!1}}componentDidMount(){s.default.addChangeListener(this._onCommandStoreChange),this.props.category!==C.all&&e.nextTick(()=>this.refs.gestureList.focus())}componentWillUnmount(){void 0!==this.animation&&this.animation.stop(),s.default.removeChangeListener(this._onCommandStoreChange)}componentDidUpdate(e){!this.animation||this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG===e.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG&&this.props.vivaldiSettings.BROWSER_COLOR_BG===e.vivaldiSettings.BROWSER_COLOR_BG||(this.clearAnimation(),this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG),this.state.selectedCommand&&this.animation.start(this.state.selectedCommand.gestures[0]))}render(){const e=this.props.prefValues,t=this.state.selectedCommand,a=t&&t.gestures?t.gestures[0]:void 0,i=!this.moves||0===this.moves.length,s=this.state.gestureExists&&!i?this.state.commandArray.find(e=>e.gestures&&e.gestures.includes(this.moves.join(""))):void 0,r=" "+Object(g.a)("This setting requires a restart to take full effect.");return n.createElement(m.a,{categoryTitle:Object(g.a)("Mouse"),filter:this.props.filter,__source:{fileName:v,lineNumber:601,columnNumber:7}},this.state.confirmation&&this.renderModal(),n.createElement("div",{className:"setting-group unlimited",__source:{fileName:v,lineNumber:603,columnNumber:9}},n.createElement("h3",{__source:{fileName:v,lineNumber:604,columnNumber:11}},Object(g.a)("Gestures")),n.createElement("div",{className:"setting-single",__source:{fileName:v,lineNumber:606,columnNumber:11}},n.createElement("label",{__source:{fileName:v,lineNumber:607,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:e[N.kMouseGesturesEnabled],onChange:O(N.kMouseGesturesEnabled),__source:{fileName:v,lineNumber:608,columnNumber:15}}),n.createElement("span",{__source:{fileName:v,lineNumber:611,columnNumber:15}},Object(g.a)("Allow Gestures"))),n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:613,columnNumber:13}},Object(g.a)("Hold down right mouse button and perform a gesture to issue related command.")+r)),n.createElement("div",{className:"setting-single",__source:{fileName:v,lineNumber:618,columnNumber:11}},n.createElement("label",{__source:{fileName:v,lineNumber:619,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:e[N.kMouseGesturesAltGesturesEnabled],onChange:O(N.kMouseGesturesAltGesturesEnabled),__source:{fileName:v,lineNumber:620,columnNumber:15}}),n.createElement("span",{__source:{fileName:v,lineNumber:623,columnNumber:15}},Object(g.a)("win_linux","Perform Gestures with Alt Key"))),n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:629,columnNumber:13}},Object(g.a)("Use gestures with trackpad or other input device.")))),n.createElement("div",{className:"setting-group unlimited gestures",__source:{fileName:v,lineNumber:634,columnNumber:9}},n.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:635,columnNumber:11}},n.createElement("h3",{__source:{fileName:v,lineNumber:636,columnNumber:13}},Object(g.a)("Gesture Mapping")),n.createElement("div",{className:"gesture-map setting-single",__source:{fileName:v,lineNumber:637,columnNumber:13}},n.createElement("select",{ref:"gestureList",className:"gesture-list",value:a,onChange:this.onGestureListChange,onFocus:this.onGestureListChange,onBlur:this.clearAnimation,size:"9",__source:{fileName:v,lineNumber:638,columnNumber:15}},this.renderCommands()),n.createElement("div",{className:2===this.state.addingGesture?"active gesture":"gesture",__source:{fileName:v,lineNumber:648,columnNumber:15}},this.renderGesture())),n.createElement("div",{className:"setting-single record-gesture",__source:{fileName:v,lineNumber:654,columnNumber:13}},0===this.state.addingGesture&&n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:v,lineNumber:656,columnNumber:17}},n.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:v,lineNumber:657,columnNumber:19}},n.createElement(d.a,{tooltip:Object(g.a)("New gesture"),onClick:this.addGesture,image:f.h.medium,__source:{fileName:v,lineNumber:658,columnNumber:21}}),n.createElement("hr",{__source:{fileName:v,lineNumber:663,columnNumber:21}}),n.createElement(d.a,{tooltip:Object(g.a)("Remove gesture"),onClick:this.removeGesture,disabled:!t,image:f.pd.medium,__source:{fileName:v,lineNumber:664,columnNumber:21}})),n.createElement(d.a,{tooltip:Object(g.a)("Edit gesture"),onClick:this.editGesture,disabled:!t,image:f.ib.medium,__source:{fileName:v,lineNumber:671,columnNumber:19}}),n.createElement(d.a,{title:Object(g.a)("Restore Default Gestures"),onClick:this.confirmRestore,__source:{fileName:v,lineNumber:677,columnNumber:19}})),1===this.state.addingGesture&&n.createElement("form",{onSubmit:this.editGesture,__source:{fileName:v,lineNumber:684,columnNumber:17}},n.createElement("h3",{className:"pad-top",__source:{fileName:v,lineNumber:685,columnNumber:19}},Object(g.a)("Pick a Command")),n.createElement("div",{className:"toolbar",__source:{fileName:v,lineNumber:686,columnNumber:19}},this.renderSearchableCommands(),n.createElement("input",{type:"submit",disabled:!t,value:Object(g.a)("Next..."),__source:{fileName:v,lineNumber:688,columnNumber:19}}),n.createElement("input",{type:"button",onClick:this.onCancelGesture,value:Object(g.a)("Cancel"),__source:{fileName:v,lineNumber:691,columnNumber:19}}))),t&&2===this.state.addingGesture&&n.createElement(n.Fragment,null,n.createElement("h3",{className:"pad-top",__source:{fileName:v,lineNumber:700,columnNumber:19}},Object(g.a)("Recording “$1” Gesture",[t.label])),n.createElement("div",{className:"add-gesture",__source:{fileName:v,lineNumber:703,columnNumber:19}},n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:704,columnNumber:21}},Object(g.a)("Draw a new gesture in the highlighted area using the primary input. Gesture may consist of horizontal and vertical lines, limited to maximum of five strokes.")),n.createElement("div",{className:"save",__source:{fileName:v,lineNumber:705,columnNumber:21}},n.createElement("input",{type:"submit",value:Object(g.a)("Save Gesture"),onClick:this.save,disabled:i||this.state.gestureExists,__source:{fileName:v,lineNumber:706,columnNumber:23}}),n.createElement("input",{type:"button",onClick:this.onCancelGesture,value:Object(g.a)("Cancel"),__source:{fileName:v,lineNumber:710,columnNumber:23}}),s&&n.createElement("p",{className:"alert",__source:{fileName:v,lineNumber:714,columnNumber:25}},Object(g.a)("This gesture is already used by “$1” command.",[s.label])))))))),n.createElement("div",{className:"setting-group unlimited",__source:{fileName:v,lineNumber:725,columnNumber:9}},n.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:726,columnNumber:11}},n.createElement("h3",{__source:{fileName:v,lineNumber:727,columnNumber:13}},Object(g.a)("Gesture Sensitivity")),n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:728,columnNumber:13}},Object(g.a)("Set minimum stroke length to be recognized as a gesture move.")),n.createElement("div",{className:"setting-single tolerance",__source:{fileName:v,lineNumber:729,columnNumber:13}},n.createElement("div",{className:"gesture-preview",__source:{fileName:v,lineNumber:730,columnNumber:15}},n.createElement("span",{className:"meter-bg",__source:{fileName:v,lineNumber:731,columnNumber:17}}),n.createElement("span",{className:"meter",style:{width:e[N.kMouseGesturesStrokeTolerance]+"px"},__source:{fileName:v,lineNumber:732,columnNumber:17}}),n.createElement("span",{__source:{fileName:v,lineNumber:734,columnNumber:17}},Object(g.a)("$1 pixels",[e[N.kMouseGesturesStrokeTolerance]]))),n.createElement("input",{type:"range",min:5,max:100,step:5,onChange:O(N.kMouseGesturesStrokeTolerance),value:e[N.kMouseGesturesStrokeTolerance],__source:{fileName:v,lineNumber:736,columnNumber:15}}))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:745,columnNumber:11}},n.createElement("h3",{__source:{fileName:v,lineNumber:746,columnNumber:13}},Object(g.a)("Rocker Gestures")),n.createElement("label",{__source:{fileName:v,lineNumber:747,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:e[N.kMouseGesturesRockerGesturesEnabled],onChange:O(N.kMouseGesturesRockerGesturesEnabled),__source:{fileName:v,lineNumber:748,columnNumber:15}}),n.createElement("span",{__source:{fileName:v,lineNumber:751,columnNumber:15}},Object(g.a)("Allow Rocker Gestures"))),n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:753,columnNumber:13}},Object(g.a)("Press right mouse button followed by left mouse button click to go back in history. Press left mouse button followed by right click to advance forward in history.")+r)),h.a.isEnabled("double_click_menu")&&n.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:759,columnNumber:13}},n.createElement("h3",{__source:{fileName:v,lineNumber:760,columnNumber:15}},Object(g.a)("Double Click Context Menu")),n.createElement("label",{__source:{fileName:v,lineNumber:761,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:e[N.kMouseGesturesDoubleClickMenuEnabled],onChange:O(N.kMouseGesturesDoubleClickMenuEnabled),__source:{fileName:v,lineNumber:762,columnNumber:17}}),n.createElement("span",{__source:{fileName:v,lineNumber:767,columnNumber:17}},Object(g.a)("Allow Double Click to Show Context Menu"))),n.createElement("p",{className:"info",__source:{fileName:v,lineNumber:769,columnNumber:15}},Object(g.a)("Use a double click to show the context menu.")+r))))}}t.a=Object(r.a)(Object(o.a)(y,["BROWSER_COLOR_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),w)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(710),s=a(21),r=a(273),o=a(90),l=a(11),c=a(69),u=a(229),m=a(86),d=a(61),h=a(807),p=a(25),b=a(2),g=a(78),N=a(4),f=a(1),_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\SearchEngines.jsx";function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E=[f.kAddressBarInlineSearchEnabled,f.kAddressBarInlineSearchSuggestEnabled,f.kAddressBarInlineSearchSuggestOnNickname,f.kAddressBarSearchDisplay,f.kAddressBarSearchInNewTab,f.kAddressBarSearchKeepSelected,f.kAddressBarSearchShowFavicon,f.kAddressBarSearchSuggestEnabled,f.kPageSearchInBackground,f.kStartpageSpeedDialDisplaySearch],C=l.a.getEventHandler;function w({engines:e,selectedEngine:t,onValueChange:a,tooltip:i}){const s=e.map(e=>({type:"Normal",id:e.id,name:e.name,icon:e.faviconUrl,checked:t.id===e.id}));return(n.createElement(n.Fragment,null,n.createElement(h.a,{items:s,value:t.id,onValueChange:a,tooltip:i,__source:{fileName:_,lineNumber:75,columnNumber:5}})))}class O extends n.Component{constructor(...t){super(...t),v(this,"_focusEditor",!1),v(this,"_editorKey",0),v(this,"state",{confirmation:!1,foundSearchEngine:!1,keepCustomEngines:!1,searchEngines:m.a.getList(),creatingId:""}),v(this,"_onSearchEngineStoreChanged",()=>{this.setState({searchEngines:m.a.getList()})}),v(this,"restoreSearchEngines",()=>{u.a.restore(this.state.keepCustomEngines),this.setState({confirmation:!1})}),v(this,"setDefault",(e,t)=>{u.a.setDefault(e,t),this._editorKey++}),v(this,"confirmRestoreDefaults",()=>{this.setState({confirmation:!0}),e.nextTick(()=>this._editorKey++)}),v(this,"onCancelConfirm",()=>{this.setState({confirmation:!1})}),v(this,"toggleKeepCustomEngines",()=>{this.setState(e=>({keepCustomEngines:!e.keepCustomEngines}))}),v(this,"renderModal",()=>{const e=this.state.keepCustomEngines?Object(b.a)("Search engines will be reset to default settings, but your custom search engines will be kept."):Object(b.a)("Search engines will be reset to default settings, which will also reset your custom search engines.");return(n.createElement(o.a,{dialogWidth:400,onRequestClose:this.onCancelConfirm,__source:{fileName:_,lineNumber:165,columnNumber:7}},n.createElement("div",{className:"dialog-restore-search",__source:{fileName:_,lineNumber:168,columnNumber:9}},n.createElement("header",{className:"dialog-header",__source:{fileName:_,lineNumber:169,columnNumber:11}},n.createElement("h1",{className:"dialog-title",__source:{fileName:_,lineNumber:170,columnNumber:13}},Object(b.a)("Restore Default Search Engines?"))),n.createElement("div",{className:"dialog-content",__source:{fileName:_,lineNumber:174,columnNumber:11}},n.createElement("p",{__source:{fileName:_,lineNumber:175,columnNumber:13}},e)),n.createElement("footer",{className:"dialog-footer",__source:{fileName:_,lineNumber:179,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:180,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.state.keepCustomEngines,onChange:this.toggleKeepCustomEngines,__source:{fileName:_,lineNumber:181,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:184,columnNumber:15}},Object(b.a)("Keep Custom Searches"))),n.createElement("span",{__source:{fileName:_,lineNumber:186,columnNumber:13}},n.createElement("input",{type:"button",className:"danger",onClick:this.restoreSearchEngines,value:Object(b.a)("Restore"),__source:{fileName:_,lineNumber:187,columnNumber:15}}),n.createElement("input",{type:"button",onClick:this.onCancelConfirm,value:Object(b.a)("Cancel"),autoFocus:!0,__source:{fileName:_,lineNumber:192,columnNumber:15}}))))))}),v(this,"removeAt",e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e],a=m.a.getDefault(!1);a&&a.id!==t.id&&u.a.remove(t.id)}}),v(this,"renderListItem",(e,t)=>this.renderEngine(m.a.getById(t.key),e)),v(this,"renderCreateListItem",()=>this.state.creatingId?this.renderEngine(m.a.getById(this.state.creatingId)):null),v(this,"renderEngine",(e,t)=>{const a=m.a.isDefault(e.id,!0),i=e.faviconUrl?e.faviconUrl:"/resources/default_favicon_64.png";return n.createElement(n.Fragment,null,n.createElement("img",{className:"item-icon",src:i,__source:{fileName:_,lineNumber:232,columnNumber:9}}),n.createElement("div",{className:"item-title",__source:{fileName:_,lineNumber:233,columnNumber:9}},t||e.name),a&&n.createElement("span",{className:"item-badge",__source:{fileName:_,lineNumber:237,columnNumber:11}},Object(b.a)("Private")),n.createElement("div",{className:"item-meta",__source:{fileName:_,lineNumber:239,columnNumber:9}},e.keyword))}),v(this,"onCreateEngine",()=>{const t=m.a.getNewEngine();t.name=Object(b.a)("New Engine"),u.a.add(t,!1),this._focusEditor=!0,this.setState({creatingId:t.id},e.nextTick(()=>this._focusEditor=!1))}),v(this,"renderContent",(e,t)=>{const a=this.state.searchEngines[e];return a?n.createElement(i.a,{key:a.id,focusNameInput:this._focusEditor,searchableStrings:t,filter:this.props.filter,id:a.id,__source:{fileName:_,lineNumber:261,columnNumber:7}}):null}),v(this,"onContextMenu",(e,t)=>{const a=[];if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];m.a.isDefault(t.id,!1)||a.push({handler:this.setDefault.bind(this,t.id,!1),...Object(N.a)("searchengine","Set as Default Search")}),m.a.isDefault(t.id,!0)||a.push({handler:this.setDefault.bind(this,t.id,!0),...Object(N.a)("searchengine","Set as Private Search")})}Object(g.a)(this.context.vivaldiWindowId,a)(t)}),v(this,"onActivate",e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];this.setDefault(t.id,!1)}}),v(this,"renderCreate",e=>n.createElement(i.a,{key:this._editorKey,searchableStrings:e,filter:this.props.filter,__source:{fileName:_,lineNumber:302,columnNumber:12}})),v(this,"moveEngine",(e,t)=>{if(e>=0&&e<this.state.searchEngines.length){const a=this.state.searchEngines[e];u.a.reorder(a.id,t)}})}componentDidMount(){m.a.addChangeListener(this._onSearchEngineStoreChanged)}componentWillUnmount(){m.a.removeChangeListener(this._onSearchEngineStoreChanged)}UNSAFE_componentWillReceiveProps(e){e.filter&&e.filter.length>0&&this.setState(t=>({foundSearchEngine:void 0!==t.searchEngines.find(t=>(t.keyword+t.url+t.name).toLowerCase().indexOf(e.filter.toLowerCase())>-1)}))}render(){if(!this.state.searchEngines)return null;const e=m.a.getDefault(!1),t=m.a.getDefault(!0),a=this.state.searchEngines.map(t=>({key:t.id,name:t.name,isDefault:t.id===e.id}));return n.createElement(d.a,{categoryTitle:Object(b.a)("noun","Search"),filter:this.props.filter,__source:{fileName:_,lineNumber:333,columnNumber:7}},this.state.confirmation&&this.renderModal(),n.createElement("div",{__source:{fileName:_,lineNumber:339,columnNumber:9}},n.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:340,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:341,columnNumber:13}},n.createElement("h3",{__source:{fileName:_,lineNumber:342,columnNumber:15}},Object(b.a)("Default Search Engine")),n.createElement(w,{engines:this.state.searchEngines,selectedEngine:e,onValueChange:e=>u.a.setDefault(e,!1),tooltip:Object(b.a)("Select Default Search Engine"),__source:{fileName:_,lineNumber:343,columnNumber:15}}))),n.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:352,columnNumber:11}},n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:353,columnNumber:13}},n.createElement("h3",{__source:{fileName:_,lineNumber:354,columnNumber:15}},Object(b.a)("Private Window Search Engine")),n.createElement(w,{engines:this.state.searchEngines,selectedEngine:t,onValueChange:e=>u.a.setDefault(e,!0),tooltip:Object(b.a)("Select Private Window Search Engine"),__source:{fileName:_,lineNumber:355,columnNumber:15}})))),n.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:365,columnNumber:9}},n.createElement("h3",{__source:{fileName:_,lineNumber:366,columnNumber:11}},Object(b.a)("Search Field Display")),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:368,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:369,columnNumber:13}},n.createElement(c.a,{name:"renderSearchField",value:this.props.prefValues[f.kAddressBarSearchDisplay],onChange:C(f.kAddressBarSearchDisplay),__source:{fileName:_,lineNumber:370,columnNumber:15}},n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:374,columnNumber:17}},n.createElement("label",{__source:{fileName:_,lineNumber:375,columnNumber:19}},n.createElement("input",{type:"radio",value:"field",__source:{fileName:_,lineNumber:376,columnNumber:21}}),n.createElement("span",{__source:{fileName:_,lineNumber:380,columnNumber:21}},Object(b.a)("Show in Address Bar")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:383,columnNumber:17}},n.createElement("label",{__source:{fileName:_,lineNumber:384,columnNumber:19}},n.createElement("input",{type:"radio",value:"button",__source:{fileName:_,lineNumber:385,columnNumber:21}}),n.createElement("span",{__source:{fileName:_,lineNumber:389,columnNumber:21}},Object(b.a)("Show as a Button")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:392,columnNumber:17}},n.createElement("label",{__source:{fileName:_,lineNumber:393,columnNumber:19}},n.createElement("input",{type:"radio",value:"disabled",__source:{fileName:_,lineNumber:394,columnNumber:21}}),n.createElement("span",{__source:{fileName:_,lineNumber:398,columnNumber:21}},Object(b.a)("Disable"))))))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:405,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:406,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchInNewTab],disabled:"disabled"===this.props.prefValues[f.kAddressBarSearchDisplay],onChange:C(f.kAddressBarSearchInNewTab),__source:{fileName:_,lineNumber:407,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:412,columnNumber:15}},Object(b.a)("Always Search in New Tab")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:416,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:417,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchShowFavicon],disabled:"disabled"===this.props.prefValues[f.kAddressBarSearchDisplay],onChange:C(f.kAddressBarSearchShowFavicon),__source:{fileName:_,lineNumber:418,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:424,columnNumber:15}},Object(b.a)("Show Search Engine Icon"))))),n.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:429,columnNumber:9}},n.createElement("h3",{__source:{fileName:_,lineNumber:430,columnNumber:11}},Object(b.a)("Search Options")),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:431,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:432,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchEnabled],onChange:C(f.kAddressBarInlineSearchEnabled),__source:{fileName:_,lineNumber:433,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:437,columnNumber:15}},Object(b.a)("Search in Address Field")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:441,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:442,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kStartpageSpeedDialDisplaySearch],onChange:C(f.kStartpageSpeedDialDisplaySearch),__source:{fileName:_,lineNumber:443,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:446,columnNumber:15}},Object(b.a)("Show Search Field on Speed Dial")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:450,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:451,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchKeepSelected],onChange:C(f.kAddressBarSearchKeepSelected),__source:{fileName:_,lineNumber:452,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:455,columnNumber:15}},Object(b.a)("Keep Last Selected Search Engine")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:459,columnNumber:11}},n.createElement("label",{__source:{fileName:_,lineNumber:460,columnNumber:13}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kPageSearchInBackground],onChange:C(f.kPageSearchInBackground),__source:{fileName:_,lineNumber:461,columnNumber:15}}),n.createElement("span",{__source:{fileName:_,lineNumber:464,columnNumber:15}},Object(b.a)("Page Selection Search in Background"))))),n.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:469,columnNumber:9}},n.createElement("div",{id:"searchSuggest",className:"setting-group",__source:{fileName:_,lineNumber:470,columnNumber:11}},n.createElement("h3",{__source:{fileName:_,lineNumber:471,columnNumber:13}},Object(b.a)("Allow Search Suggestions")),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:472,columnNumber:13}},n.createElement("label",{__source:{fileName:_,lineNumber:473,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchSuggestEnabled],onChange:C(f.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:_,lineNumber:474,columnNumber:17}}),n.createElement("span",{__source:{fileName:_,lineNumber:477,columnNumber:17}},Object(b.a)("searchengine","In Address Field")))),n.createElement("div",{className:"setting-single pad-left",__source:{fileName:_,lineNumber:480,columnNumber:13}},n.createElement("label",{__source:{fileName:_,lineNumber:481,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchSuggestOnNickname],disabled:!this.props.prefValues[f.kAddressBarInlineSearchSuggestEnabled],onChange:C(f.kAddressBarInlineSearchSuggestOnNickname),__source:{fileName:_,lineNumber:482,columnNumber:17}}),n.createElement("span",{__source:{fileName:_,lineNumber:486,columnNumber:17}},Object(b.a)("Only when Using Search Engine Nickname")))),n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:489,columnNumber:13}},n.createElement("label",{__source:{fileName:_,lineNumber:490,columnNumber:15}},n.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchSuggestEnabled],onChange:C(f.kAddressBarSearchSuggestEnabled),__source:{fileName:_,lineNumber:491,columnNumber:17}}),n.createElement("span",{__source:{fileName:_,lineNumber:496,columnNumber:17}},Object(b.a)("searchengine","In Search Field")))))),n.createElement(r.a,{className:"setting-search-engine",filter:this.props.filter,subtitle:Object(b.a)("Search Engines"),deleteTitle:Object(b.a)("title","Delete Search Engine"),addTipString:Object(b.a)("Add Search Engine"),deleteTipString:Object(b.a)("tooltip","Delete Search Engine"),items:a,supportDragAndDrop:!0,masterLayout:1,mimeType:m.b,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,contentStrings:i.b,renderCreate:this.renderCreate,moveItem:this.moveEngine,onContextMenu:this.onContextMenu,onActivate:this.onActivate,onRemove:this.removeAt,onCreateItem:this.onCreateEngine,__source:{fileName:_,lineNumber:502,columnNumber:9}}),n.createElement("div",{className:"setting-group unlimited",__source:{fileName:_,lineNumber:524,columnNumber:9}},n.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:525,columnNumber:11}},n.createElement("input",{type:"button",onClick:this.confirmRestoreDefaults,value:Object(b.a)("Restore Defaults"),__source:{fileName:_,lineNumber:526,columnNumber:13}}),n.createElement("div",{className:"setting-single pad-left",__source:{fileName:_,lineNumber:529,columnNumber:15}}))))}}v(O,"contextType",p.a),t.a=Object(s.a)(O,E)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a.n(n),s=a(61),r=a(52),o=a(345),l=a(1312),c=a(1313),u=a(1314),m=a(347),d=a(1315),h=a(155),p=a(1316),b=a(25),g=a(17),N=a(2),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\Sync.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends i.a.Component{constructor(t){super(t),_(this,"onSyncStoreChange",()=>{this.setState({syncState:m.a.getState()})}),_(this,"onVivaldiAccountChange",()=>{this.setState({accountState:h.a.getState()})}),_(this,"restartSync",()=>{o.a.stop(),e.nextTick(()=>o.a.start())}),_(this,"startSync",()=>{o.a.start()}),_(this,"stopSync",()=>{o.a.stop()}),_(this,"getContent",()=>{const e=this.state.syncState.engineData;if(e.disableReasons.includes("platform_override"))return i.a.createElement("p",{__source:{fileName:f,lineNumber:85,columnNumber:14}},Object(N.a)("Sync is disabled by your operating system"));if(e.disableReasons.includes("enterprise_policy"))return i.a.createElement("p",{__source:{fileName:f,lineNumber:89,columnNumber:14}},Object(N.a)("Sync has been disabled by your administrator"));const t=e.engineState;if(!this.state.accountState.hasToken)return null;switch(t){case"stopped":return i.a.createElement("div",{className:"setting-group-double",__source:{fileName:f,lineNumber:99,columnNumber:11}},"disable_sync_on_client"===e.protocolErrorClientAction&&i.a.createElement("p",{__source:{fileName:f,lineNumber:102,columnNumber:43}},Object(N.a)("Sync was stopped following a request from the server: $1",["not_my_birthday"===e.protocolErrorType?Object(N.a)("Sync server data was reset"):e.protocolErrorDescription])),i.a.createElement("input",{type:"button",onClick:this.startSync,value:Object(N.a)("Start Sync"),__source:{fileName:f,lineNumber:109,columnNumber:13}}));case"failed":if(e.disableReasons.includes("not_signed_in"))return i.a.createElement("div",{className:"setting-group-double",__source:{fileName:f,lineNumber:117,columnNumber:19}},i.a.createElement("p",{className:"in-progress",__source:{fileName:f,lineNumber:118,columnNumber:13}},Object(N.a)("Waiting for account details")),i.a.createElement("input",{type:"button",onClick:this.stopSync,value:Object(N.a)("Cancel"),__source:{fileName:f,lineNumber:119,columnNumber:13}}));if(e.disableReasons.includes("flag"))return i.a.createElement("p",{__source:{fileName:f,lineNumber:127,columnNumber:19}},Object(N.a)("Sync was disabled from the command line"));let t=Object(N.a)("Unexpected error. You may need to restart Vivaldi.");if(e.disableReasons.includes("unrecoverable_error"))switch(e.protocolErrorClientAction){case"upgrade_client":return i.a.createElement("p",{__source:{fileName:f,lineNumber:135,columnNumber:23}},Object(N.a)("You must upgrade Vivaldi in order to use Sync"));default:t=Object(N.a)("Sync must be restarted: $1",[e.protocolErrorDescription])}return(i.a.createElement("div",{className:"setting-group-double",__source:{fileName:f,lineNumber:142,columnNumber:17}},i.a.createElement("p",{__source:{fileName:f,lineNumber:143,columnNumber:11}},t),i.a.createElement("input",{type:"button",onClick:this.restartSync,value:Object(N.a)("sync","Restart"),__source:{fileName:f,lineNumber:144,columnNumber:11}})));case"starting":return i.a.createElement("p",{className:"in-progress",__source:{fileName:f,lineNumber:151,columnNumber:11}},Object(N.a)("Initializing the Sync engine."));case"starting_server_error":return i.a.createElement("p",{className:"in-progress",__source:{fileName:f,lineNumber:156,columnNumber:11}},Object(N.a)("The sync server is experiencing issues. Retrying initialization soon."));case"clearing_data":return i.a.createElement("p",{className:"in-progress",__source:{fileName:f,lineNumber:161,columnNumber:11}},Object(N.a)("Clearing Sync data. Please wait."));case"configuration_pending":case"started":return e.needsDecryptionPassword?i.a.createElement(c.a,{category:this.props.category,filter:this.props.filter,__source:{fileName:f,lineNumber:167,columnNumber:19}}):e.usesEncryptionPassword?i.a.createElement(l.a,{filter:this.props.filter,category:this.props.category,syncState:this.state.syncState,__source:{fileName:f,lineNumber:177,columnNumber:13}}):i.a.createElement(u.a,{category:this.props.category,filter:this.props.filter,__source:{fileName:f,lineNumber:172,columnNumber:13}})}return null}),this.state={syncState:m.a.getState(),accountState:h.a.getState()}}componentDidMount(){this.syncStoreToken=m.a.addListener(this.onSyncStoreChange),this.vivaldiAccountStoreToken=h.a.addListener(this.onVivaldiAccountChange),this.onSyncStoreChange(),this.onVivaldiAccountChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){if(g.a.isIncognitoOrGuest(this.context.vivaldiWindowId))return i.a.createElement("p",{__source:{fileName:f,lineNumber:189,columnNumber:14}},Object(N.a)("Sync settings are unavailable in Private Windows."));if(!this.state.syncState.engineData.isReady||!this.state.syncState.cycleData.isReady||!this.state.accountState.isReady)return null;const e=this.getContent(),t=this.state.accountState.accountInfo.username;return i.a.createElement(s.a,{categoryTitle:Object(N.a)("Sync"),filter:this.props.filter,className:"sync-setup",__source:{fileName:f,lineNumber:202,columnNumber:7}},i.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:f,lineNumber:203,columnNumber:9}},i.a.createElement(d.a,{filter:this.props.filter,__source:{fileName:f,lineNumber:204,columnNumber:11}})),e&&i.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:f,lineNumber:207,columnNumber:11}},e),i.a.createElement(p.a,{username:t,filter:this.props.filter,__source:{fileName:f,lineNumber:210,columnNumber:9}}))}}_(v,"contextType",b.a),t.a=v}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(430),s=a(596),r=a(21),o=a(69),l=a(52),c=a(345),u=a(2),m=a(15),d=a.n(m),h=a(7),p=a(789),b=a(1),g=a(23),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncConfigure.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=[b.kSyncIsUsingSeparateEncryptionPassword],v={bookmarks:Object(u.a)("Bookmarks and Speed Dials"),preferences:Object(u.a)("Settings (Partially)"),passwords:Object(u.a)("Passwords"),autofill:Object(u.a)("Autofill"),typed_urls:Object(u.a)("Typed History and Remote Sessions"),extensions:Object(u.a)("Extensions"),notes:Object(u.a)("Notes (Except Attachments)")};class E extends n.Component{constructor(e){super(e),f(this,"onCountDownElapsed",e=>{this.setState({countdownElapsed:e})}),f(this,"onSyncEverythingChange",e=>{h.a.sync.setTypes("true"===e.currentTarget.value,this.props.syncState.engineData.dataTypes)}),f(this,"onDataTypeChange",e=>{const t=e.target.name,a=e.target.checked;h.a.sync.setTypes(this.props.syncState.engineData.syncEverything,this.props.syncState.engineData.dataTypes.map(e=>t!==e.dataType?e:{dataType:e.dataType,enabled:a}))}),f(this,"onApplyChanges",()=>{h.a.sync.setupComplete()}),f(this,"onClearData",()=>{this.setState({showConfirmClearDataDialog:!0})}),f(this,"onConfirmClearDataDialog",e=>{this.setState({showConfirmClearDataDialog:!1}),e&&c.a.clearData()}),this.state={countdownElapsed:!1,showConfirmClearDataDialog:!1}}render(){const e=this.props.prefValues[b.kSyncIsUsingSeparateEncryptionPassword],t=this.props.syncState.engineData,a=this.props.syncState.cycleData,r="not_synced"!==this.props.syncState.cycleData.downloadUpdatesStatus?d()(this.props.syncState.cycleData.cycleStartTime).format("l, LTS"):"...",c=t.dataTypes.map(e=>n.createElement("li",{key:e.dataType,__source:{fileName:N,lineNumber:109,columnNumber:7}},n.createElement("label",{className:"setting-single",__source:{fileName:N,lineNumber:110,columnNumber:9}},n.createElement("input",{type:"checkbox",name:e.dataType,disabled:t.syncEverything,checked:e.enabled||t.syncEverything,onChange:this.onDataTypeChange,__source:{fileName:N,lineNumber:111,columnNumber:11}}),n.createElement("span",{__source:{fileName:N,lineNumber:116,columnNumber:11}},v[e.dataType])))),[m,h]=Object(p.a)(a);let f=null;if(0!==parseInt(a.nextRetryTime)){const e=d()(a.nextRetryTime);f=e.isBefore(d()())?n.createElement("p",{className:"in-progress",__source:{fileName:N,lineNumber:130,columnNumber:23}},Object(u.a)("Retrying")):n.createElement(s.a,{label:"Retrying in $1",end:e,onElapsed:this.onCountDownElapsed,__source:{fileName:N,lineNumber:133,columnNumber:11}})}return(n.createElement(l.a,{filter:this.props.filter,__source:{fileName:N,lineNumber:140,columnNumber:7}},n.createElement("div",{className:"setting-group-double",__source:{fileName:N,lineNumber:141,columnNumber:9}},"configuration_pending"===t.engineState&&n.createElement("div",{className:"sync-status detail",__source:{fileName:N,lineNumber:143,columnNumber:13}},n.createElement("span",{__source:{fileName:N,lineNumber:144,columnNumber:15}},Object(u.a)("Confirm Data Synchronization to complete the setup."))),"configuration_pending"!==t.engineState&&n.createElement("div",{className:"sync-status detail",__source:{fileName:N,lineNumber:148,columnNumber:13}},n.createElement("span",{className:"time",__source:{fileName:N,lineNumber:149,columnNumber:15}},Object(u.a)("Last synchronization time: $1",[r])),n.createElement("span",{className:"data-in",__source:{fileName:N,lineNumber:152,columnNumber:15}},m),n.createElement("span",{className:"data-out",__source:{fileName:N,lineNumber:155,columnNumber:15}},h),n.createElement("span",{__source:{fileName:N,lineNumber:158,columnNumber:15}},f)),t.isEncryptingEverything&&n.createElement("div",{__source:{fileName:N,lineNumber:165,columnNumber:13}},n.createElement("h3",{__source:{fileName:N,lineNumber:166,columnNumber:15}},Object(u.a)("Sync Encryption")),"unknown"!==e&&n.createElement("p",{className:"yes"===e?null:"alert",__source:{fileName:N,lineNumber:168,columnNumber:17}},"yes"===e?Object(u.a)("Data secured by encryption password."):Object(u.a)("Warning: Data encryption uses your login credentials, which greatly reduces security of your synced data online. You should consider setting up Sync again using a separate, strong encryption password."))),!t.isEncryptingEverything&&n.createElement("div",{__source:{fileName:N,lineNumber:184,columnNumber:13}},n.createElement("h3",{__source:{fileName:N,lineNumber:185,columnNumber:15}},Object(u.a)("Sync Encryption Error")),n.createElement("p",{className:"info",__source:{fileName:N,lineNumber:186,columnNumber:15}},Object(u.a)("Sync encryption failed. It is recommended that you clear Sync data on the server and then log in again. Sync will then restart with your current browser data."))),n.createElement("div",{className:"setting-single pad-top",__source:{fileName:N,lineNumber:192,columnNumber:11}},n.createElement("h3",{__source:{fileName:N,lineNumber:193,columnNumber:13}},Object(u.a)("Data Synchronization")),n.createElement(o.a,{name:"dataTypeSync",value:t.syncEverything,onChange:this.onSyncEverythingChange,__source:{fileName:N,lineNumber:194,columnNumber:13}},n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:197,columnNumber:15}},n.createElement("label",{__source:{fileName:N,lineNumber:198,columnNumber:17}},n.createElement("input",{type:"radio",value:"true",__source:{fileName:N,lineNumber:199,columnNumber:19}}),n.createElement("span",{__source:{fileName:N,lineNumber:200,columnNumber:19}},Object(u.a)("Synchronize All Data"))),n.createElement("p",{className:"info",__source:{fileName:N,lineNumber:202,columnNumber:17}},Object(u.a)("Allow Vivaldi to synchronize all data, and to automatically enable synchronization of new data types."))),n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:206,columnNumber:15}},n.createElement("label",{__source:{fileName:N,lineNumber:207,columnNumber:17}},n.createElement("input",{type:"radio",value:"false",__source:{fileName:N,lineNumber:208,columnNumber:19}}),n.createElement("span",{__source:{fileName:N,lineNumber:209,columnNumber:19}},Object(u.a)("Synchronize Selected Data"))))),n.createElement("form",{className:"setting-group unlimited",onSubmit:this.onApplyChanges,__source:{fileName:N,lineNumber:213,columnNumber:13}},n.createElement("ul",{className:"pad-left",__source:{fileName:N,lineNumber:215,columnNumber:15}},c),n.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:218,columnNumber:15}},n.createElement("input",{type:"submit",disabled:!t.isSetupInProgress&&t.isFirstSetupComplete,value:t.isFirstSetupComplete?Object(u.a)("Apply Changes"):Object(u.a)("Start Syncing"),autoFocus:!t.isFirstSetupComplete&&this.props.category!==g.p.settingCategories.all,__source:{fileName:N,lineNumber:219,columnNumber:17}}),n.createElement("input",{type:"button",onClick:this.onClearData,value:Object(u.a)("Reset Remote Data"),__source:{fileName:N,lineNumber:230,columnNumber:17}})))),this.state.showConfirmClearDataDialog&&n.createElement(i.a,{title:Object(u.a)("Clearing Remote Synchronized Data"),prompt:Object(u.a)("This will remove all the synchronization data stored on the Sync server, reset your encryption password, and log you out. Are you sure?"),positive:Object(u.a)("Clear Sync Data"),negative:Object(u.a)("Cancel"),onClose:this.onConfirmClearDataDialog,__source:{fileName:N,lineNumber:240,columnNumber:13}}))))}}t.a=Object(r.a)(E,_)},function(e,t,a){"use strict";var n=a(0),i=a(430),s=a(52),r=a(345),o=a(2),l=a(23),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptDecryptionPassword.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.Component{constructor(...e){super(...e),u(this,"state",{encryptionPassword:"",wrongPasswordEntered:!1,showConfirmClearDataDialog:!1}),u(this,"onEncryptionPasswordChange",e=>{this.setState({wrongPasswordEntered:!1,encryptionPassword:e.target.value})}),u(this,"onDecrypt",()=>{this.setState({wrongPasswordEntered:!1}),r.a.setEncryptionPassword(this.state.encryptionPassword,e=>{e||this.setState({wrongPasswordEntered:!0})})}),u(this,"onPasswordLost",()=>{this.setState({showConfirmClearDataDialog:!0})}),u(this,"onConfirmClearDataDialog",e=>{this.setState({showConfirmClearDataDialog:!1}),e&&r.a.clearData()})}render(){return n.createElement(s.a,{filter:this.props.filter,__source:{fileName:c,lineNumber:62,columnNumber:7}},n.createElement("form",{onSubmit:this.onDecrypt,__source:{fileName:c,lineNumber:63,columnNumber:9}},n.createElement("div",{className:"setting-group-double",__source:{fileName:c,lineNumber:64,columnNumber:11}},n.createElement("p",{__source:{fileName:c,lineNumber:65,columnNumber:13}},Object(o.a)("The data on your Sync account are encrypted. Please provide your encryption password to decrypt them.")),this.state.wrongPasswordEntered&&n.createElement("p",{__source:{fileName:c,lineNumber:67,columnNumber:15}},Object(o.a)("Wrong password entered.")),n.createElement("label",{className:"setting-single encryption",__source:{fileName:c,lineNumber:69,columnNumber:13}},n.createElement("span",{__source:{fileName:c,lineNumber:70,columnNumber:15}},Object(o.a)("Encryption Password")),n.createElement("input",{type:"password",value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,autoFocus:this.props.category!==l.p.settingCategories.all,__source:{fileName:c,lineNumber:71,columnNumber:15}})),n.createElement("div",{className:"login",__source:{fileName:c,lineNumber:76,columnNumber:13}},n.createElement("input",{type:"submit",value:Object(o.a)("Decrypt"),__source:{fileName:c,lineNumber:77,columnNumber:15}}),n.createElement("input",{type:"button",onClick:this.onPasswordLost,value:Object(o.a)("I Lost My Password"),__source:{fileName:c,lineNumber:78,columnNumber:15}}))),this.state.showConfirmClearDataDialog&&n.createElement(i.a,{title:Object(o.a)("Clear Remote Synchronized Data"),prompt:Object(o.a)("In order to regain access to your account, all the remote Sync data must be reset. You can then start new synchronization using your current browser data."),positive:Object(o.a)("Clear Sync Data"),negative:Object(o.a)("Cancel"),onClose:this.onConfirmClearDataDialog,__source:{fileName:c,lineNumber:85,columnNumber:13}})))}}t.a=m},function(e,t,a){"use strict";var n=a(0),i=a(430),s=a(52),r=a(345),o=a(155),l=a(25),c=a(2),u=a(23),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptEncryptionPassword.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends n.Component{constructor(...e){super(...e),d(this,"_input",null),d(this,"state",{encryptionPassword:"",showPassword:!1,hasSavedPassword:!1,shortPassword:!1,showConfirmNoEncryptionPasswordDialog:!1}),d(this,"componentDidMount",()=>{this.vivaldiAccountStoreToken=o.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange()}),d(this,"onVivaldiAccountChange",()=>{this.setState({hasSavedPassword:o.a.getState().hasSavedPassword})}),d(this,"onSetPassword",()=>{const{HTMLElement:e}=this.context;!this.state.encryptionPassword&&this.state.hasSavedPassword?this.setState({showConfirmNoEncryptionPasswordDialog:!0,shortPassword:!1}):this.state.encryptionPassword.length<12&&this._input instanceof e?(this._input.focus(),this.setState({shortPassword:!0})):this.doSetPassword(this.state.encryptionPassword)}),d(this,"doSetPassword",e=>{r.a.setEncryptionPassword(e,e=>{e&&this.setState({shortPassword:!1})})}),d(this,"onConfirmNoEncryptionPasswordDialog",e=>{this.setState({showConfirmNoEncryptionPasswordDialog:!1}),e&&this.state.hasSavedPassword&&this.doSetPassword()}),d(this,"onEncryptionPasswordChange",e=>{this.setState({encryptionPassword:e.target.value})}),d(this,"onShowPassword",()=>{this.setState(e=>({showPassword:!e.showPassword}))})}render(){return n.createElement(s.a,{filter:this.props.filter,__source:{fileName:m,lineNumber:102,columnNumber:7}},n.createElement("form",{onSubmit:this.onSetPassword,__source:{fileName:m,lineNumber:103,columnNumber:9}},n.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:m,lineNumber:104,columnNumber:11}},n.createElement("h3",{__source:{fileName:m,lineNumber:105,columnNumber:13}},Object(c.a)("Sync Encryption")),n.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:106,columnNumber:13}},n.createElement("p",{__source:{fileName:m,lineNumber:107,columnNumber:15}},Object(c.a)("To proceed, Sync requires a data encryption password.")),this.state.hasSavedPassword&&n.createElement("p",{className:"info",__source:{fileName:m,lineNumber:109,columnNumber:17}},Object(c.a)("If the password is not set up, your existing login password will be used to encrypt remote data instead. Your personal information can be exposed in case of compromised login credentials."))),n.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:114,columnNumber:13}},this.state.shortPassword&&n.createElement("p",{className:"appear",__source:{fileName:m,lineNumber:116,columnNumber:17}},Object(c.a)("Minimum password length of $1 character is required.","Minimum password length of $1 characters is required.",[12])),n.createElement("span",{className:"encryption-password",__source:{fileName:m,lineNumber:122,columnNumber:15}},n.createElement("input",{ref:e=>this._input=e,title:Object(c.a)("Encryption Password"),type:this.state.showPassword?"text":"password",value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,__source:{fileName:m,lineNumber:123,columnNumber:17}}),n.createElement("label",{className:"show-password",__source:{fileName:m,lineNumber:129,columnNumber:17}},n.createElement("input",{type:"checkbox",onClick:this.onShowPassword,__source:{fileName:m,lineNumber:130,columnNumber:19}}),n.createElement("span",{__source:{fileName:m,lineNumber:132,columnNumber:19}},Object(c.a)("sync","Show password")))))),n.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:137,columnNumber:11}},n.createElement("input",{type:"submit",value:Object(c.a)("OK"),autoFocus:this.props.category!==u.p.settingCategories.all,__source:{fileName:m,lineNumber:138,columnNumber:13}}))),this.state.showConfirmNoEncryptionPasswordDialog&&n.createElement(i.a,{title:Object(c.a)("Encryption Password Not Specified"),prompt:Object(c.a)("Are you sure you want to use your login password for encryption? This greatly reduces security of your synced data online."),positive:Object(c.a)("Proceed Without a Separate Password"),negative:Object(c.a)("Cancel"),onClose:this.onConfirmNoEncryptionPasswordDialog,__source:{fileName:m,lineNumber:145,columnNumber:11}}))}}d(h,"contextType",l.a),t.a=h},function(e,t,a){"use strict";var n=a(596),i=a(21),s=a(597),r=(a(36),a(14)),o=a(11),l=a(0),c=a.n(l),u=a(520),m=a(155),d=a(25),h=a(17),p=a(2),b=a(15),g=a.n(b),N=a(7),f=a(1),_="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\VivaldiAccount.jsx";function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E=[f.kSyncSessionName],C=o.a.getEventHandler;class w extends c.a.Component{constructor(e){super(e),v(this,"onVivaldiAccountChange",()=>{const e=m.a.getState();this.setState({accountState:e}),"•••••"!==this.state.password||e.hasSavedPassword||this.setState({password:""}),""===this.state.password&&e.hasSavedPassword&&this.setState({password:"•••••"})}),v(this,"onCountDownElapsed",e=>{this.setState({countdownElapsed:e})}),v(this,"onUsernameChange",e=>{this.setState({username:e.target.value})}),v(this,"onPasswordChange",e=>{this.setState({password:e.target.value})}),v(this,"onSavePasswordChange",e=>{this.setState({savePassword:e.target.checked})}),v(this,"onLogin",()=>{this.state.username&&this.state.password&&u.a.login(this.state.username,"•••••"===this.state.password?"":this.state.password,this.state.savePassword)}),v(this,"onLogout",()=>{u.a.logout()}),v(this,"onRegister",()=>{r.a.openURL("https://login.vivaldi.net/profile/id/signup"),this.setState({registering:!0})}),v(this,"openProfilePage",()=>{r.a.openURL("https://login.vivaldi.net/profile/samlsso")}),v(this,"renderForm",e=>{const t=""!==this.state.accountState.accountInfo.accountId,a=this.state.accountState.hasSavedPassword&&this.state.accountState.accountInfo.username===this.state.username;return c.a.createElement("form",{onSubmit:this.onLogin,className:"setting-group-double sync-login",__source:{fileName:_,lineNumber:148,columnNumber:7}},e?c.a.createElement("h3",{__source:{fileName:_,lineNumber:149,columnNumber:18}},e):null,c.a.createElement("div",{className:"grid-form",__source:{fileName:_,lineNumber:151,columnNumber:9}},c.a.createElement("label",{htmlFor:"sync_login_username",__source:{fileName:_,lineNumber:152,columnNumber:11}},Object(p.a)("User Name")),c.a.createElement("input",{type:"text",id:"sync_login_username",value:this.state.username,disabled:t,onChange:this.onUsernameChange,__source:{fileName:_,lineNumber:153,columnNumber:11}}),c.a.createElement("label",{htmlFor:"sync_login_password",__source:{fileName:_,lineNumber:159,columnNumber:11}},Object(p.a)("Password")),c.a.createElement("input",{type:"password",id:"sync_login_password",value:this.state.password,onChange:this.onPasswordChange,__source:{fileName:_,lineNumber:160,columnNumber:11}}),c.a.createElement("label",{className:"save-password",__source:{fileName:_,lineNumber:164,columnNumber:11}},c.a.createElement("input",{type:"checkbox",disabled:a&&"•••••"===this.state.password,checked:this.state.savePassword||a&&"•••••"===this.state.password,onChange:this.onSavePasswordChange,__source:{fileName:_,lineNumber:165,columnNumber:13}}),c.a.createElement("span",{__source:{fileName:_,lineNumber:172,columnNumber:13}},Object(p.a)("Save Password"))),c.a.createElement("label",{htmlFor:"device-name",__source:{fileName:_,lineNumber:174,columnNumber:11}},Object(p.a)("Device Name")),c.a.createElement("input",{id:"device-name",type:"text",placeholder:this.state.defaultSessionName,value:this.props.prefValues[f.kSyncSessionName],onChange:C(f.kSyncSessionName),__source:{fileName:_,lineNumber:177,columnNumber:11}}),c.a.createElement("div",{className:"login",__source:{fileName:_,lineNumber:184,columnNumber:11}},c.a.createElement("input",{type:"submit",value:Object(p.a)("Login"),__source:{fileName:_,lineNumber:185,columnNumber:13}}),t&&c.a.createElement("input",{type:"button",value:Object(p.a)("Cancel"),onClick:this.onLogout,__source:{fileName:_,lineNumber:187,columnNumber:15}}))))});const t=m.a.getState();this.state={username:t.accountInfo.username,password:"",defaultSessionName:"",registering:!1,savePassword:!1,countdownElapsed:!1,accountState:t}}componentDidMount(){this.vivaldiAccountStoreToken=m.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange(),N.a.sync.getDefaultSessionName(e=>this.setState({defaultSessionName:e}))}componentWillUnmount(){this.vivaldiAccountStoreToken.remove()}render(){if(h.a.isIncognitoOrGuest(this.context.vivaldiWindowId))return null;const e=this.state.accountState,t=e.accountInfo.username,a=e.lastTokenFetchError.serverMessage,i=e.lastTokenFetchError.errorCode,r=g()(e.nextTokenRequestTime);let o=null;switch(Object(m.b)(e)){case"loggedIn":const l=this.props.prefValues[f.kSyncSessionName]?this.props.prefValues[f.kSyncSessionName]:this.state.defaultSessionName;return(c.a.createElement(s.a,{deviceName:l,pictureUrl:e.accountInfo.pictureUrl,username:t,onLogout:this.onLogout,onOpenProfilePage:this.openProfilePage,__source:{fileName:_,lineNumber:216,columnNumber:11}}));case"loginFailed":o=a?Object(p.a)("Vivaldi.net rejected your credentials: $1 ($2).",[a,i]):-1===i?Object(p.a)("You must use a vivaldi.net user account to log in."):Object(p.a)("Vivaldi.net rejected your credentials: Error code $1",[i]);break;case"loggingIn":return r.isAfter(g()())&&("network_error"===e.lastTokenFetchError.errorType&&(o=Object(p.a)("Unable to connect to vivaldi.net: $1.",[a])),"server_error"===e.lastTokenFetchError.errorType&&(o=a?Object(p.a)("Vivaldi.net is experiencing issues: $1 ($2).",[a,i]):Object(p.a)("Vivaldi.net is experiencing issues: Error code $1.",[i]))),c.a.createElement("div",{__source:{fileName:_,lineNumber:257,columnNumber:11}},c.a.createElement("p",{className:o?null:"in-progress",__source:{fileName:_,lineNumber:258,columnNumber:13}},Object(p.a)("Logging in to Vivaldi.net as $1. Please wait.",[t])),o&&c.a.createElement("p",{__source:{fileName:_,lineNumber:261,columnNumber:23}},o,c.a.createElement(n.a,{label:"Retrying in $1",end:r,onElapsed:this.onCountDownElapsed,__source:{fileName:_,lineNumber:263,columnNumber:15}})),c.a.createElement("input",{type:"button",value:Object(p.a)("Cancel"),onClick:this.onLogout,__source:{fileName:_,lineNumber:268,columnNumber:13}}));case"credentialsMissing":o=e.hasEncryptedToken?Object(p.a)("Failed to decrypt your credentials. Please log in again."):Object(p.a)("Failed to retreive your credentials. Please log in again.")}return this.state.registering?c.a.createElement("div",{__source:{fileName:_,lineNumber:289,columnNumber:9}},c.a.createElement("h3",{__source:{fileName:_,lineNumber:290,columnNumber:11}},Object(p.a)("Register to Vivaldi.net")),c.a.createElement("p",{className:"info",__source:{fileName:_,lineNumber:291,columnNumber:11}},Object(p.a)("Please follow the instructions on the Vivaldi.net registration webpage to create an account. Proceed to log in after you have verified your email address.")),this.renderForm(o)):c.a.createElement("div",{__source:{fileName:_,lineNumber:297,columnNumber:9}},c.a.createElement("p",{className:"info",__source:{fileName:_,lineNumber:298,columnNumber:11}},Object(p.a)("To begin with data synchronization, a confirmed Vivaldi account is required. Log in with your existing credentials or setup a new account.")),this.renderForm(o),c.a.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:301,columnNumber:11}},c.a.createElement("div",{className:"register",className:"setting-single sync-new-account",__source:{fileName:_,lineNumber:302,columnNumber:13}},c.a.createElement("input",{type:"button",onClick:this.onRegister,value:Object(p.a)("Create Vivaldi.net Account"),__source:{fileName:_,lineNumber:303,columnNumber:15}}))),!1)}}v(w,"contextType",d.a),t.a=Object(i.a)(w,E)},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a(14),s=a(52),r=a(2),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\VivaldiCommunityLinks.jsx";function l({username:e,filter:t}){const a=`https://${e}.vivaldi.net`,l="https://forum.vivaldi.net",c="https://imap.vivaldi.net/webmail",u="https://login.vivaldi.net/profile/samlsso";return n.createElement(s.a,{filter:t,__source:{fileName:o,lineNumber:20,columnNumber:5}},n.createElement("section",{__source:{fileName:o,lineNumber:21,columnNumber:7}},n.createElement("h2",{__source:{fileName:o,lineNumber:22,columnNumber:9}},"Vivaldi.net"),n.createElement("div",{__source:{fileName:o,lineNumber:24,columnNumber:9}},n.createElement("a",{href:a,onClick:()=>i.a.openURL(a),__source:{fileName:o,lineNumber:25,columnNumber:11}},Object(r.a)("Vivaldi Community Blog"))),n.createElement("div",{__source:{fileName:o,lineNumber:29,columnNumber:9}},n.createElement("a",{href:l,onClick:()=>i.a.openURL(l),__source:{fileName:o,lineNumber:30,columnNumber:11}},Object(r.a)("Vivaldi Forum"))),n.createElement("div",{__source:{fileName:o,lineNumber:34,columnNumber:9}},n.createElement("a",{href:c,onClick:()=>i.a.openURL(c),__source:{fileName:o,lineNumber:35,columnNumber:11}},Object(r.a)("Webmail"))),n.createElement("div",{__source:{fileName:o,lineNumber:39,columnNumber:9}},n.createElement("a",{href:u,onClick:()=>i.a.openURL(u),__source:{fileName:o,lineNumber:40,columnNumber:11}},Object(r.a)("Vivaldi Account Profile")))))}},function(e,t,a){"use strict";(function(e){var n=a(45),i=a.n(n),s=a(173),r=a(21),o=a(154),l=a(72),c=a(11),u=a(0),m=a.n(u),d=a(61),h=a(87),p=a(22),b=a(25),g=a(2),N=a(20),f=a.n(N),_=a(1),v=a(405),E=a(298),C=a(261),w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeScheduling.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=[_.kThemeScheduleEnabled,_.kThemeScheduleOS,_.kThemeScheduleTimeline],T=c.a.getEventHandler;class k extends m.a.PureComponent{constructor(t){super(t),y(this,"updateNow",()=>{this.setState({now:new Date})}),y(this,"startPointerReschedule",(e,t)=>{t.persist(),t.preventDefault(),this.setState({dragging:!0,selectedId:e},()=>{this.handlePointerReschedule(t)})}),y(this,"pointerReschedule",e=>{e.preventDefault(),this.state.dragging&&this.handlePointerReschedule(e)}),y(this,"stopPointerReschedule",()=>{if(this.state.dragging){this.setState({dragging:!1}),c.a.set(_.kThemeScheduleTimeline,this.state.schedules);const e=h.e.getTimerByDate(new Date,v.a);e&&h.e.setTheme(h.e.getTheme(e.themeName))}}),y(this,"handlePointerReschedule",e=>{const t=this.refs.scheduleTimeline.getBoundingClientRect(),a=e.clientX-t.left,n=5*Math.floor(1439/t.width*a/5);n<0||n>1439||this.setState(e=>{const t=Object(E.a)(e.schedules);for(let a=0;a<t.length;a++){const i=t[a];if(i.id===e.selectedId){i.hours=Math.floor(n/60),i.minutes=n-60*i.hours;break}}return{schedules:t}})}),y(this,"addSchedule",()=>{const e=Object(E.a)(this.state.schedules),t=[];let a=void 0;for(let a=0;a<e.length;a++)t.push(e[a].id);t.sort((e,t)=>e-t);for(let e=0;e<t.length;e++)if(!t.includes(e)){a=e;break}void 0===a&&(a=t[t.length-1]+1),e.push({id:a,minutes:0,hours:12,themeName:"Light",undeletable:!1}),c.a.set(_.kThemeScheduleTimeline,e),this.setState({selectedId:a})}),y(this,"removeScheduleOnDelete",e=>{e.keyCode!==l.a.KEY_BACK_SPACE&&e.keyCode!==l.a.KEY_DELETE||this.removeSchedule()}),y(this,"handleKeyboardReschedule",(e,t)=>{if(t.keyCode===l.a.KEY_LEFT||t.keyCode===l.a.KEY_RIGHT){const a=Object(E.a)(this.state.schedules);for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e){let n=60*i.hours+i.minutes;t.shiftKey?t.keyCode===l.a.KEY_LEFT&&n>29?n-=30:t.keyCode===l.a.KEY_RIGHT&&n<1409&&(n+=30):t.keyCode===l.a.KEY_LEFT&&n>4?n-=5:t.keyCode===l.a.KEY_RIGHT&&n<1434&&(n+=5),i.hours=Math.floor(n/60),i.minutes=n-60*i.hours,this.setState({selectedId:e}),c.a.set(_.kThemeScheduleTimeline,a);const s=h.e.getTimerByDate(new Date,v.a);s&&h.e.setTheme(h.e.getTheme(s.themeName));break}}}else t.keyCode!==l.a.KEY_BACK_SPACE&&t.keyCode!==l.a.KEY_DELETE||this.removeSchedule()}),y(this,"updateScheduleName",(e,t)=>{const a=Object(E.a)(this.state.schedules);for(let n=0;n<a.length;n++){const i=a[n];if(i.id===e){i.themeName=t.target.value;break}}c.a.set(_.kThemeScheduleTimeline,a);const n=h.e.getTimerByDate(new Date,v.a);n&&h.e.setTheme(h.e.getTheme(n.themeName))}),y(this,"removeSchedule",()=>{const e=Object(E.a)(this.state.schedules),t=this.state.selectedId;for(let a=0;a<e.length;a++){const n=e[a];if(!1===n.undeletable&&n.id===t){e.splice(a,1);break}}c.a.set(_.kThemeScheduleTimeline,e),this.setState({selectedId:void 0})}),y(this,"updateOSTheme",t=>{const a=this.props.prefValues[_.kThemeScheduleOS];c.a.set(_.kThemeScheduleOS,{...a,[t.target.name]:t.target.value}),h.e.revokeSystemThemeSchedule(),e.nextTick(()=>h.e.setSystemThemeSchedule())}),y(this,"indicatorFocus",(e,t)=>{t.stopPropagation(),this.setState({selectedId:e})}),y(this,"indicatorBlur",()=>{this.setState({selectedId:void 0})}),this.state={dragging:!1,now:new Date,selectedId:void 0,schedules:h.e.getSchedules()}}componentDidMount(){this.context.addEventListener("pointerup",this.stopPointerReschedule),this.timer=setInterval(this.updateNow,6e4)}componentWillUnmount(){clearInterval(this.timer),this.context.removeEventListener("pointerup",this.stopPointerReschedule)}UNSAFE_componentWillReceiveProps(e){Object(C.default)(e,this.props)||this.setState({schedules:h.e.getSchedules()})}render(){const e=Object(E.a)(this.state.schedules),t=this.state.now,a=`${(t.getMinutes()+60*t.getHours())/14.4}%`,n=this.props.vivaldiSettings.THEMES_SYSTEM.concat(this.props.vivaldiSettings.THEMES_USER),{prefValues:r}=this.props,o="timeline"!==r[_.kThemeScheduleEnabled],l="system"!==r[_.kThemeScheduleEnabled];let c=!0;e.sort((e,t)=>60*e.hours+e.minutes-(60*t.hours+t.minutes)),e.unshift(Object(E.a)(e[e.length-1])),e[0].minutes=0,e[0].hours=0;for(let t=0;t<e.length;t++){const a=e[t],n=e[t+1];a.endMinutes=n?60*n.hours+n.minutes:1440,this.state.selectedId===a.id&&a.undeletable&&(c=!1),a.renderId=t}return(m.a.createElement(d.a,{categoryTitle:Object(g.a)("Scheduled Themes"),className:"setting-group unlimited",filter:this.props.filter,onPointerMove:this.pointerReschedule,__source:{fileName:O,lineNumber:360,columnNumber:7}},m.a.createElement("div",{className:"setting-group-double",__source:{fileName:O,lineNumber:367,columnNumber:9}},m.a.createElement("div",{className:"setting-single",__source:{fileName:O,lineNumber:369,columnNumber:11}},m.a.createElement("label",{__source:{fileName:O,lineNumber:370,columnNumber:13}},m.a.createElement("input",{type:"radio",value:"off",checked:"off"===r[_.kThemeScheduleEnabled],onChange:T(_.kThemeScheduleEnabled),__source:{fileName:O,lineNumber:371,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:O,lineNumber:377,columnNumber:15}},Object(g.a)("No Schedule")))),m.a.createElement("div",{className:"setting-single",__source:{fileName:O,lineNumber:381,columnNumber:11}},m.a.createElement("label",{__source:{fileName:O,lineNumber:382,columnNumber:13}},m.a.createElement("input",{type:"radio",value:"system",checked:"system"===r[_.kThemeScheduleEnabled],onChange:T(_.kThemeScheduleEnabled),__source:{fileName:O,lineNumber:383,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:O,lineNumber:389,columnNumber:15}},Object(g.a)("Use Operating System Theme"))),m.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:391,columnNumber:13}},Object(g.a)("Follow operating system light or dark theme setting where available."))),m.a.createElement("div",{className:"setting-single",__source:{fileName:O,lineNumber:396,columnNumber:11}},m.a.createElement("label",{__source:{fileName:O,lineNumber:397,columnNumber:13}},m.a.createElement("span",{__source:{fileName:O,lineNumber:398,columnNumber:15}},Object(g.a)("Light Theme")),m.a.createElement("select",{name:"light",value:r[_.kThemeScheduleOS].light,disabled:l,onChange:this.updateOSTheme,__source:{fileName:O,lineNumber:399,columnNumber:15}},n.map(e=>m.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:O,lineNumber:405,columnNumber:26}},e.name)))),m.a.createElement("label",{__source:{fileName:O,lineNumber:412,columnNumber:13}},m.a.createElement("span",{__source:{fileName:O,lineNumber:413,columnNumber:15}},Object(g.a)("Dark Theme")),m.a.createElement("select",{name:"dark",value:r[_.kThemeScheduleOS].dark,disabled:l,onChange:this.updateOSTheme,__source:{fileName:O,lineNumber:414,columnNumber:15}},n.map(e=>m.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:O,lineNumber:420,columnNumber:26}},e.name))))),m.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:O,lineNumber:428,columnNumber:11}},m.a.createElement("label",{__source:{fileName:O,lineNumber:429,columnNumber:13}},m.a.createElement("input",{type:"radio",value:"timeline",checked:"timeline"===r[_.kThemeScheduleEnabled],onChange:T(_.kThemeScheduleEnabled),__source:{fileName:O,lineNumber:430,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:O,lineNumber:436,columnNumber:15}},Object(g.a)("Schedule Theme to Change"))),m.a.createElement("p",{className:"info",__source:{fileName:O,lineNumber:438,columnNumber:13}},Object(g.a)("Drag the sliders below to adjust theme schedule time. Change the theme by selecting its name.")))),m.a.createElement("div",{className:"theme-schedule-timeline"+(o?" schedule-disabled":""),ref:"scheduleTimeline",__source:{fileName:O,lineNumber:444,columnNumber:9}},m.a.createElement("span",{className:"theme-schedule-now-indicator",style:{left:a},__source:{fileName:O,lineNumber:447,columnNumber:11}},Object(g.a)("Now")),e.map(t=>{const a=(60*t.hours+t.minutes)/14.4,r=h.e.getTheme(t.themeName);if(!t.endMinutes)return null;const l=t.endMinutes,c=String(t.hours).padStart(2,"0"),u=String(t.minutes).padStart(2,"0"),{baseFg:d,baseBg:p,highlightBg:b,accentBg:g}=r.colors,N={};return Object.entries(s.d.all(i()(d),i()(p),i()(b),i()(g))).forEach(([e,t])=>{N[`--${e}`]=t}),m.a.createElement("div",{key:t.renderId,className:f()("theme-schedule-timeslice",{"timeslice-selected":this.state.selectedId===t.id}),style:{width:`${l/14.4-a}%`,left:`${a}%`},__source:{fileName:O,lineNumber:470,columnNumber:15}},t!==e[0]&&m.a.createElement("div",{title:t.themeName,className:"timeslice-bubble",onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur,disabled:o,onPointerDown:this.startPointerReschedule.bind(this,t.id),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:O,lineNumber:479,columnNumber:19}},m.a.createElement("div",{__source:{fileName:O,lineNumber:489,columnNumber:21}},`${c}:${u}`)),t!==e[0]&&m.a.createElement("div",{className:"theme-schedule-timeslice-indicator",__source:{fileName:O,lineNumber:493,columnNumber:19}},m.a.createElement("input",{type:"button",className:"theme-schedule-timeslice-draghandle",title:t.themeName,onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur,disabled:o,onPointerDown:this.startPointerReschedule.bind(this,t.id),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:O,lineNumber:494,columnNumber:21}})),m.a.createElement("select",{disabled:o,value:t.themeName,style:N,title:r.name,onFocus:this.indicatorFocus.bind(this,t.id),onKeyDown:this.removeScheduleOnDelete,onChange:this.updateScheduleName.bind(this,t.id),__source:{fileName:O,lineNumber:508,columnNumber:17}},n.map(e=>m.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:O,lineNumber:517,columnNumber:29}},e.name))))})),m.a.createElement("div",{className:"setting-group",__source:{fileName:O,lineNumber:527,columnNumber:9}},m.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:O,lineNumber:528,columnNumber:11}},m.a.createElement("div",{className:"toolbar-group",__source:{fileName:O,lineNumber:529,columnNumber:13}},m.a.createElement(p.a,{disabled:o,onClick:this.addSchedule,image:w.h.medium,tooltip:Object(g.a)("Add"),tabIndex:0,__source:{fileName:O,lineNumber:530,columnNumber:15}}),m.a.createElement("hr",{__source:{fileName:O,lineNumber:537,columnNumber:15}}),m.a.createElement(p.a,{disabled:o||!c||void 0===this.state.selectedId,onClick:this.removeSchedule,image:w.pd.medium,tooltip:Object(g.a)("other","Remove"),tabIndex:0,__source:{fileName:O,lineNumber:538,columnNumber:15}}))))))}}y(k,"contextType",b.a),t.a=Object(r.a)(Object(o.a)(k,["THEMES_SYSTEM","THEMES_USER"]),S)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(711),s=a(24),r=a(1321),o=a(32),l=a(503),c=a(1323),u=a(42),m=a(1421),d=a(712),h=a(1324),p=a(271),b=a(21),g=a(103),N=a(804),f=a(15),_=a.n(f),v=a(854),E=a(11),C=a(6),w=a(22),O=a(2),y=a(109),S=a(1),T=a(375),k=a(46),A=a(9),I="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarManager.jsx";function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=Object(T.extendMoment)(_.a),P=[S.kCalendarDisplayDensity,S.kCalendarDisplayWeekNumber,S.kMailIsTurnedOff];class x extends n.Component{constructor(...e){super(...e),D(this,"didManagerGetFocus",!1),D(this,"mainEditorUid",Symbol("CalendarManagerMainView")),D(this,"sidebarEditorUid",Symbol("CalendarManagerSidebarView")),D(this,"displayModeList",["day","week","multiweek","month","year","agenda"]),D(this,"reverse_swipe",!1),D(this,"state",{showDaySidebar:C.a.get(S.kCalendarShowDaySidebar),showTasksSidebar:C.a.get(S.kCalendarShowTasksSidebar),repeatedEventDialog:!1,calendarId:""}),D(this,"handleDisplayModeChange",e=>{this.onUpdateUI({displayMode:e,anchorDate:this.props.calendarFilter.selectedDate})}),D(this,"viewPrevious",()=>s.a.viewPreviousPeriod(this.props.pageId)),D(this,"viewNext",()=>s.a.viewNextPeriod(this.props.pageId)),D(this,"toggleSidebar",()=>{this.setState(e=>{if("agenda"===this.props.calendarFilter.displayMode){const t=!e.showTasksSidebar;return E.a.set(S.kCalendarShowTasksSidebar,t),{showTasksSidebar:t}}{const t=!e.showDaySidebar;return E.a.set(S.kCalendarShowDaySidebar,t),{showDaySidebar:t}}})}),D(this,"toggleCompleted",e=>{this.onUpdateUI({showCompletedTasks:!this.props.calendarFilter.showCompletedTasks})}),D(this,"setToday",()=>{this.setDate(M())}),D(this,"setDate",e=>{this.onUpdateUI({anchorDate:e,selectedDate:e})}),D(this,"onUpdateUI",e=>{const t=this.props.calendarFilter.merge(e);s.a.updateCalendarUI(this.props.pageId,t)}),D(this,"onSearchChange",e=>{this.onUpdateUI({filterText:e,...!e&&{showSearchResults:!1}})}),D(this,"showSearchResults",()=>{this.onUpdateUI({showSearchResults:!0})}),D(this,"closeSearcResults",()=>{this.onUpdateUI({showSearchResults:!1,filterText:""})}),D(this,"setDensityMinimal",()=>{E.a.set(S.kCalendarDisplayDensity,"minimal")}),D(this,"setDensityCompact",()=>{E.a.set(S.kCalendarDisplayDensity,"compact")}),D(this,"setDensityFull",()=>{E.a.set(S.kCalendarDisplayDensity,"full")}),D(this,"newEvent",()=>{const e=this.props.calendarFilter.selectedDate.valueOf();s.a.addEventCommand({start:e})}),D(this,"eventSearchSelected",e=>{const t=o.a.getEvent(e);if(t){const{start:e}=t,a=M(e),n={anchorDate:a,selectedDate:a,showSearchResults:!1};this.onUpdateUI(n)}}),D(this,"_calendars",()=>this.props.calendars.map(e=>n.createElement("option",{key:e.id,value:e.id,__source:{fileName:I,lineNumber:222,columnNumber:6}},e.description||e.name))),D(this,"onKeyDown",e=>{if(!this.props.eventDraft&&!(e.target instanceof HTMLInputElement||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(y.a[e.keyCode]){case"D":this.handleDisplayModeChange("day"),e.stopPropagation();break;case"W":this.handleDisplayModeChange("week"),e.stopPropagation();break;case"N":this.handleDisplayModeChange("multiweek"),e.stopPropagation();break;case"M":this.handleDisplayModeChange("month"),e.stopPropagation();break;case"Y":this.handleDisplayModeChange("year"),e.stopPropagation();break;case"A":this.handleDisplayModeChange("agenda"),e.stopPropagation()}}),D(this,"setCalendar",e=>s.a.setDefaultCalendarId(e.target.value))}componentDidMount(){const t=Object(k.f)(this.props.url);if(t.anchordate){const a=M(parseInt(t.anchordate));e.nextTick(()=>{this.setDate(a)})}!1===this.didManagerGetFocus&&this.context.isActivePage&&(this.didManagerGetFocus=!0,s.a.pollAllCalDAVAccounts(!0))}componentDidUpdate(){!1===this.didManagerGetFocus&&this.context.isActivePage&&(s.a.pollAllCalDAVAccounts(!0),this.didManagerGetFocus=!0),!1===this.context.isActivePage&&(this.didManagerGetFocus=!1)}render(){if(this.props.prefValues[S.kMailIsTurnedOff])return n.createElement(N.a,{__source:{fileName:I,lineNumber:273,columnNumber:9}});const{displayMode:e,anchorDate:t,selectedDate:a,filterText:s,showSearchResults:o}=this.props.calendarFilter,l=u.a.getDisplayRange(t,e),d=this.props.eventDraft,{calendars:b,events:f,tasks:_,trashedEvents:E,selectedEvent:C}=this.props,y=["agenda","year"].includes(e)?0===f.length:f.every(e=>!0===e.filteredOut);let T;const k=this.props.prefValues[S.kCalendarDisplayWeekNumber],D=a.format(g.a.getWeekdayFormat("LL"));if("day"===e)T=k&&Object(O.a)("Week $1",[a.week()]);else if("week"===e)T=k&&Object(O.a)("Week $1",[a.week()]);else if("multiweek"===e){const{start:e,end:t}=l;T=k&&Object(O.a)("Weeks $1 - $2",[e.week(),t.week()])}else if("month"===e){const e=M(t);T=k&&Object(O.a)("Weeks $1 - $2",[e.startOf("month").week(),e.endOf("month").week()])}else if("agenda"===e){const{start:e,end:t}=l;T=k&&Object(O.a)("Weeks $1 - $2",[e.week(),t.week()])}const P=this.props.prefValues[S.kCalendarDisplayDensity],x=["week","multiweek","month","year"].includes(e)&&(!0===this.state.showDaySidebar||"year"===e)||"agenda"===e&&this.state.showTasksSidebar;return n.createElement(p.a,{focusName:"focus_calendar",__source:{fileName:I,lineNumber:321,columnNumber:7}},n.createElement("div",{className:"manager calendar",onKeyDown:this.onKeyDown,__source:{fileName:I,lineNumber:322,columnNumber:9}},n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:I,lineNumber:326,columnNumber:11}},n.createElement(v.a,{initialPeriod:t,setPeriod:this.setDate,startDate:l.start,endDate:l.end,displayMode:e,__source:{fileName:I,lineNumber:327,columnNumber:13}}),T&&n.createElement("p",{className:"weeks",__source:{fileName:I,lineNumber:335,columnNumber:15}},T),n.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:I,lineNumber:338,columnNumber:13}},n.createElement("span",{className:"density-label",__source:{fileName:I,lineNumber:339,columnNumber:15}},Object(O.a)("Layout")),n.createElement(w.a,{tooltip:Object(O.a)("Minimal display"),isPressed:"minimal"===P,onClick:this.setDensityMinimal,image:A.L.medium,__source:{fileName:I,lineNumber:342,columnNumber:15}}),n.createElement(w.a,{tooltip:Object(O.a)("Compact display"),isPressed:"compact"===P,onClick:this.setDensityCompact,image:A.I.medium,__source:{fileName:I,lineNumber:348,columnNumber:15}}),n.createElement(w.a,{tooltip:Object(O.a)("Full display"),isPressed:"full"===P,onClick:this.setDensityFull,image:A.K.medium,__source:{fileName:I,lineNumber:354,columnNumber:15}})),n.createElement(h.a,{filterText:s,onSearchChange:this.onSearchChange,onSelectEvent:this.eventSearchSelected,onShowSearchResults:this.showSearchResults,onUpdateUI:this.onUpdateUI,__source:{fileName:I,lineNumber:362,columnNumber:13}})),n.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:I,lineNumber:370,columnNumber:11}},n.createElement(w.a,{onClick:this.newEvent,title:Object(O.a)("New Event"),image:A.h.medium,__source:{fileName:I,lineNumber:371,columnNumber:13}}),n.createElement(m.a,{calendars:b,defaultCalendarId:this.props.defaultCalendarId,__source:{fileName:I,lineNumber:378,columnNumber:13}}),n.createElement(w.a,{style:{marginLeft:"auto"},onClick:this.setToday,title:Object(O.a)("Today"),__source:{fileName:I,lineNumber:383,columnNumber:13}}),n.createElement("div",{className:"toolbar-group",__source:{fileName:I,lineNumber:390,columnNumber:13}},n.createElement(w.a,{className:"button-narrow",onClick:this.viewPrevious,tooltip:Object(O.a)("Previous"),image:A.hc.medium,__source:{fileName:I,lineNumber:391,columnNumber:15}}),n.createElement(w.a,{className:"button-narrow",onClick:this.viewNext,tooltip:Object(O.a)("Next"),image:A.jc.medium,__source:{fileName:I,lineNumber:398,columnNumber:15}})),n.createElement("div",{className:"toolbar-group",__source:{fileName:I,lineNumber:407,columnNumber:13}},n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"day"),title:Object(O.a)("Day"),tooltip:Object(O.a)("Day (d)"),isPressed:"day"===e,__source:{fileName:I,lineNumber:408,columnNumber:15}}),n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"week"),title:Object(O.a)("Week"),tooltip:Object(O.a)("Week (w)"),isPressed:"week"===e,__source:{fileName:I,lineNumber:416,columnNumber:15}}),n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"multiweek"),title:Object(O.a)("Multiweek"),tooltip:Object(O.a)("Multiweek (n)"),isPressed:"multiweek"===e,__source:{fileName:I,lineNumber:424,columnNumber:15}}),n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"month"),title:Object(O.a)("Month"),tooltip:Object(O.a)("Month (m)"),isPressed:"month"===e,__source:{fileName:I,lineNumber:432,columnNumber:15}}),n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"year"),title:Object(O.a)("Year"),tooltip:Object(O.a)("Year (y)"),isPressed:"year"===e,__source:{fileName:I,lineNumber:440,columnNumber:15}}),n.createElement(w.a,{onClick:this.handleDisplayModeChange.bind(this,"agenda"),title:Object(O.a)("Agenda"),tooltip:Object(O.a)("Agenda (a)"),isPressed:"agenda"===e,__source:{fileName:I,lineNumber:448,columnNumber:15}})),n.createElement(c.a,{trashedEvents:E,__source:{fileName:I,lineNumber:458,columnNumber:13}}),n.createElement(w.a,{onClick:this.toggleSidebar,disabled:"day"===e||"year"===e,tooltip:Object(O.a)("Show Sidebar"),isPressed:"agenda"===e?this.state.showTasksSidebar:this.state.showDaySidebar||"year"===e,image:A.j,__source:{fileName:I,lineNumber:460,columnNumber:13}})),!o&&y&&s&&n.createElement("div",{className:"no-search-results",__source:{fileName:I,lineNumber:471,columnNumber:11}},Object(O.a)("Showing filtered results. Press “Search” for full results")),n.createElement("div",{className:`manager-view ${e}`,__source:{fileName:I,lineNumber:474,columnNumber:11}},o&&n.createElement(r.a,{selectedEvent:C,onSelectEvent:this.eventSearchSelected,filterText:s,onUpdateUI:this.onUpdateUI,onClose:this.closeSearcResults,editingEvent:d,editorUid:this.mainEditorUid,__source:{fileName:I,lineNumber:476,columnNumber:13}}),!o&&n.createElement("div",{className:"manager-content",__source:{fileName:I,lineNumber:487,columnNumber:13}},n.createElement(i.a,{filter:this.props.calendarFilter,events:f,selectedEvent:C,editingEvent:d,editorUid:this.mainEditorUid,displayModes:this.displayModeList,__source:{fileName:I,lineNumber:488,columnNumber:15}})),x&&n.createElement("div",{className:"manager-detail",__source:{fileName:I,lineNumber:500,columnNumber:13}},"agenda"!==e&&n.createElement("div",{className:"header",__source:{fileName:I,lineNumber:502,columnNumber:17}},n.createElement("h1",{__source:{fileName:I,lineNumber:503,columnNumber:19}},D)),"agenda"===e&&n.createElement("div",{className:"header",__source:{fileName:I,lineNumber:507,columnNumber:17}},n.createElement("h1",{__source:{fileName:I,lineNumber:508,columnNumber:19}},Object(O.a)("Tasks"))),n.createElement(i.a,{filter:this.props.calendarFilter,events:"agenda"!==e?u.a.filterEventsByPeriod(f,this.props.calendarFilter.selectedDate,"day"):_,anchorDate:this.props.calendarFilter.selectedDate,displayMode:"agenda"===e?"agenda":"day",eventDisplayStyle:"agenda"===e?"solid":null,selectedEvent:C,editingEvent:d,editorUid:"year"===e?this.mainEditorUid:this.sidebarEditorUid,__source:{fileName:I,lineNumber:514,columnNumber:15}}),"agenda"===e&&n.createElement("div",{className:"footer cal-tasks",__source:{fileName:I,lineNumber:528,columnNumber:17}},n.createElement("label",{__source:{fileName:I,lineNumber:529,columnNumber:19}},n.createElement("input",{type:"checkbox",value:this.props.calendarFilter.showCompletedTasks,onChange:this.toggleCompleted,__source:{fileName:I,lineNumber:530,columnNumber:21}}),n.createElement("span",{__source:{fileName:I,lineNumber:535,columnNumber:21}},Object(O.a)("Show Completed Tasks"))))))))}}t.a=Object(l.a)(Object(d.a)(Object(b.a)(x,P)))}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(820),o=a(42),l=a(109),c=a(100),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarMonthsGrid.jsx";t.a=function(e){const t=n.useContext(s.a),a=n.useRef(),m=()=>{const e=a.current;if(!e)return 0;const t=!!e.childElementCount&&e.children[0];return t?Math.max(1,Math.floor(e.clientWidth/t.clientWidth)):0},{anchorDate:d,displayMode:h}=e.filter,p=o.a.getDisplayRange(d,h),b=Array.from(p.by("month"));return n.createElement("div",{className:`calendar-grid-${e.filter.displayMode} calendar-grid`,onKeyDown:a=>{const n=e.filter.selectedDate;let s,r;switch(l.a[a.keyCode]){case"Left":if(0===n.weekday()||1===n.date()){const e=Object(c.h)(n);s=Object(c.i)(e,6,n.clone().subtract(1,"month"),!0)}else s=n.clone().subtract(1,"day");break;case"Right":if(s=n.clone().endOf("month"),6===n.weekday()||n.isSame(s,"day")){const e=Object(c.h)(n);s=Object(c.i)(e,0,n.clone().add(1,"month"),!0)}else s=n.clone().add(1,"day");break;case"Up":r=m(),n.date()<8?(s=n.clone().subtract(r,"month"),s=Object(c.d)(n.weekday(),s)):s=n.clone().subtract(1,"week");break;case"Down":r=m(),s=n.clone().endOf("month"),s.date()-n.date()<7?(s=n.clone().add(r,"month"),s=Object(c.a)(n.weekday(),s)):s=n.clone().add(1,"week")}s&&(s.hour(n.hour()).minute(n.minute()),i.a.selectDate(t.editor.pageId,s))},ref:a,tabIndex:"0",__source:{fileName:u,lineNumber:103,columnNumber:5}},b.map(a=>{const s=o.a.filterEventsByPeriod(e.events,a,"month");return(n.createElement("div",{key:a.valueOf(),__source:{fileName:u,lineNumber:113,columnNumber:11}},n.createElement("p",{className:"month-name",__source:{fileName:u,lineNumber:114,columnNumber:13}},a.format("MMMM")),n.createElement(r.a,{events:s,month:a,selectedDate:e.filter.selectedDate,onSelect:e=>i.a.selectDate(t.editor.pageId,e),__source:{fileName:u,lineNumber:115,columnNumber:13}})))}))}},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(608),o=a(32),l=a(42),c=a(21),u=a(2),m=a(20),d=a.n(m),h=a(109),p=a(112),b=a.n(p),g=a(15),N=a.n(g),f=a(126),_=a(38),v=a(1),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarTasksGrid.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=[v.kCalendarClickOutside];function O(e,t,a,n=0){const i=n>0?{...a,id:`${a.id}-${n}`}:a,s=e.get(t);Array.isArray(s)?(s.push(i),e.set(t,s)):e.set(t,[i])}const y=b()(2)((function(e){const t=new Map;return e.forEach(e=>{if(e.task&&!e.start){const a=e.due||e.end;if(a){const n=N()(a).format("YYYY-MM-DD");O(t,n,e)}else O(t,"!todos",e)}else if(e.start){const a=N()(e.start).startOf("day");let n=0;const i=e.task?e.due||e.start:e.end;for(;a.valueOf()<i||a.valueOf()===e.start;){const i=a.format("YYYY-MM-DD");O(t,i,e,n),a.add(1,"day"),n++}}}),t.forEach(e=>e.sort((e,t)=>{if(!e.id||!t.id)return e.id?-1:1;const a=l.a.isAllDayEvent(e);return a!==l.a.isAllDayEvent(t)?a?-1:1:e.task&&t.task?(e.due||1/0)-(t.due||1/0):e.start-t.start})),t}));class S extends n.Component{constructor(...e){super(...e),C(this,"state",{eventGroups:new Map,selectedDate:N()()}),C(this,"initialFocusTaken",!1),C(this,"wasEditing",!!this.props.editingEvent&&this.context.editor.uid===this.props.editorUid),C(this,"componentDidUpdate",()=>{const{editor:e}=this.context;this.wasEditing=!!this.props.editingEvent&&e.uid===this.props.editorUid}),C(this,"getEditor",()=>({pageId:this.context.editor.pageId,uid:this.props.editorUid})),C(this,"onClickBackground",e=>{if(e.target===e.currentTarget&&this.props.editingEvent){const{editor:e}=o.a.getEditState();"cancel"===this.props.prefValues[v.kCalendarClickOutside]?i.a.cancelEventEdit(e):i.a.saveEventEdit(e)}}),C(this,"onClickDay",(e,t)=>{const a=t+(new Date).getHours()*_.f,n=this.getEditor();if(this.props.editingEvent){switch(this.props.prefValues[v.kCalendarClickOutside]){case"cancel":i.a.cancelEventEdit(n),i.a.selectDate(n.pageId,N()(a));break;case"save_and_close":i.a.saveEventEdit(n),i.a.selectDate(n.pageId,N()(a));break;case"save_and_new":i.a.editEvent(n,null,{start:a})}}else i.a.editEvent(n,null,{start:a})}),C(this,"onClickEvent",e=>{const{editingEvent:t}=this.props;(!t||t&&t.id!==e.id)&&i.a.editEvent(this.getEditor(),e)}),C(this,"onKeyDown",e=>{const t=e.altKey;if(!this.props.editingEvent){const a=l.a.getDisplayRange(this.props.filter.anchorDate,this.props.displayMode),n=this.state.selectedDate,s=Array.from(this.state.eventGroups.keys()).sort();let r,o;switch(h.a[e.keyCode]){case"Up":if(Object(f.a)(e),r=this.state.eventGroups.get(n.format("YYYY-MM-DD"))||[],o=r.findIndex(e=>e.id===this.props.selectedEvent),t||0===o||0===r.length){const e=s.findIndex(e=>n.isSame(e,"day"));e<=0?i.a.viewPreviousPeriod(this.getEditor().pageId,a.start.clone().subtract(1,"day")):i.a.selectDate(this.getEditor().pageId,N()(s[e-1]))}else if(this.props.selectedEvent){const e=r[o-1];i.a.selectEvent(this.getEditor(),{event:e})}else{const e=r[r.length-1];i.a.selectEvent(this.getEditor(),{event:e})}break;case"Down":if(Object(f.a)(e),r=this.state.eventGroups.get(n.format("YYYY-MM-DD"))||[],o=r.findIndex(e=>e.id===this.props.selectedEvent),t||-1===o||!this.props.selectedEvent){const e=s.findIndex(e=>n.isSame(e,"day"));r=this.state.eventGroups.get(s[e+1])||[],e>=s.length-1?i.a.viewNextPeriod(this.getEditor().pageId,a.end.clone().add(1,"day")):r.length&&!t?i.a.selectEvent(this.getEditor(),{event:r[0],date:n.clone().add(1,"day")}):i.a.selectDate(this.getEditor().pageId,N()(s[e+1]))}else o===r.length-1?i.a.selectEvent(this.getEditor(),{event:null}):i.a.selectEvent(this.getEditor(),{event:r[o+1]});break;case"Enter":if(Object(f.a)(e),this.props.selectedEvent){r=this.state.eventGroups.get(n.format("YYYY-MM-DD"))||[];const e=r.find(e=>e.id===this.props.selectedEvent);i.a.editEvent(this.getEditor(),e)}else{const e=n.clone().hours((new Date).getHours()).valueOf();i.a.editEvent(this.getEditor(),null,{start:e})}break;case"Escape":Object(f.a)(e),this.props.selectedEvent&&i.a.selectEvent(this.getEditor(),{event:null})}}}),C(this,"renderEvents",()=>{const e=[],t=this.state.selectedDate.format("YYYY-MM-DD"),a=Boolean(this.props.filter.filterText),i=[...this.state.eventGroups.keys()].sort();for(const s of i){const i=this.state.eventGroups.get(s)||[],o=t===s;e.push(n.createElement("div",{className:"cal-tasks-row",key:s,__source:{fileName:E,lineNumber:301,columnNumber:9}},"!todos"!==s&&n.createElement("div",{className:"cal-tasks-row-date",__source:{fileName:E,lineNumber:303,columnNumber:13}},N()(s).format("ll")),n.createElement("div",{className:d()("cal-tasks-row-events",{selected:o}),ref:e=>{o&&e&&e.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},__source:{fileName:E,lineNumber:307,columnNumber:11}},i.map(e=>{const{editor:t}=this.context,i=this.props.selectedEvent===e.id&&t.uid===this.props.editorUid,s=!!this.props.editingEvent&&this.props.editingEvent.id===e.id&&t.uid===this.props.editorUid,o=s&&this.props.editingEvent?this.props.editingEvent:e;return n.createElement("div",{key:l.a.generateKey(o),className:"event-container",onClick:this.onClickEvent.bind(null,o),onKeyDown:e=>this.props.eventKeyDown(e,o),__source:{fileName:E,lineNumber:328,columnNumber:17}},n.createElement(r.a,{event:o,displayStyle:this.props.eventDisplayStyle,isSelected:i,isEditing:s,resizeStepSize:15,isAllDay:l.a.isAllDayEvent(o),isFiltering:a,__source:{fileName:E,lineNumber:335,columnNumber:19}}))}),!this.props.editingEvent&&n.createElement("div",{className:d()("calendar-add-event-button",{active:o&&!this.props.selectedEvent,selected:o}),onClick:e=>this.onClickDay(e,Date.parse(s)),__source:{fileName:E,lineNumber:348,columnNumber:15}},"+"))))}return e})}componentDidMount(){const{editor:e}=this.context;this.wasEditing=!!this.props.editingEvent&&e.uid===this.props.editorUid}renderAddEvent(){const e=0===o.a.getEvents().length;return(n.createElement("div",{className:"cal-tasks-row",__source:{fileName:E,lineNumber:369,columnNumber:7}},n.createElement("div",{className:"cal-tasks-row-events selected",__source:{fileName:E,lineNumber:370,columnNumber:9}},e&&n.createElement("h2",{__source:{fileName:E,lineNumber:374,columnNumber:13}},Object(u.a)("Your calendar contains no events. Add the first one below!")),n.createElement("div",{className:"calendar-add-event-button selected active",onClick:e=>this.onClickDay(e,Date.now()),__source:{fileName:E,lineNumber:376,columnNumber:13}},"+"))))}render(){return n.createElement("div",{className:`calendar-grid-${this.props.displayMode}`,onKeyDown:this.onKeyDown,onClick:this.onClickBackground,tabIndex:"0",ref:e=>{e&&(!this.props.editingEvent&&this.wasEditing||!this.initialFocusTaken)&&(e.focus(),this.initialFocusTaken=!0)},__source:{fileName:E,lineNumber:389,columnNumber:7}},0===this.props.events.length&&this.renderAddEvent(),this.renderEvents())}}C(S,"contextType",s.a),C(S,"getDerivedStateFromProps",(e,t)=>{const a=y(e.events);let n;const i=e.filter.selectedDate.format("YYYY-MM-DD"),s=[...a.keys()].sort();for(const e of s)if(!n&&i<=e){n=N()(e);break}if(!n&&s.length){const e=s.pop();"!todos"!==e&&(n=N()(e))}return{eventGroups:a,selectedDate:n||e.filter.selectedDate}}),t.a=Object(c.a)(S,w)},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(608),o=a(32),l=a(42),c=a(2),u=a(20),m=a.n(u),d=a(109),h=a(15),p=a.n(h),b=a(1422),g=a(633),N=a(431),f=a(105),_=a(396),v=a(9),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarSearchList.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends n.Component{constructor(e){super(e),C(this,"cache",{}),C(this,"state",{eventsToRender:[]}),C(this,"selectEvent",e=>{const{start:t}=e,a=p()(t),n={anchorDate:a,selectedDate:a};this.props.onUpdateUI(n)}),C(this,"setSelectedIndex",e=>{const{selectedEvent:t}=this.props,{eventsToRender:a}=this.state,n=a.flatMap(e=>e.events);if(t){let a=n.findIndex(e=>e.id===t);"Up"===e?a=Math.max(0,a-1):"Down"===e&&(a=Math.min(n.length-1,a+1)),i.a.selectEvent(this.getEditor(),{event:n[a]})}else i.a.selectEvent(this.getEditor(),{event:n[0]})}),C(this,"getEditor",()=>({pageId:this.context.editor.pageId,uid:this.props.editorUid})),C(this,"onKeyDown",e=>{switch(d.a[e.keyCode]){case"Up":case"Down":this.setSelectedIndex(d.a[e.keyCode])}}),C(this,"renderDay",({index:e,parent:t,key:a,style:i})=>{const{eventsToRender:s}=this.state;if(0===s.length)return;const r=s[e],o=r.events.map((e,t)=>this.renderEvent(e)),{title:l}=r;return n.createElement(g.a,{key:a,cache:this.cache,parent:t,columnIndex:0,rowIndex:e,__source:{fileName:E,lineNumber:138,columnNumber:7}},n.createElement("div",{className:"cal-tasks-row",style:i,__source:{fileName:E,lineNumber:144,columnNumber:9}},n.createElement("div",{className:"cal-tasks-row-date",__source:{fileName:E,lineNumber:145,columnNumber:11}},l),n.createElement("div",{className:m()("cal-tasks-row-events"),__source:{fileName:E,lineNumber:146,columnNumber:13}},o)))}),C(this,"eventClick",e=>{this.props.onSelectEvent(e.id)}),C(this,"renderEvent",e=>{const t=l.a.isAllDayEvent(e),{selectedEvent:a}=this.props,i=a===e.id,s=!!this.props.editingEvent&&this.props.editingEvent.id===e.id,o=l.a.isRecurringEvent(e),u=Boolean(this.props.filterText);let m;if(o){const{recurrence:t}=e;if(t){const a=Object(_.b)(e.recurrence),n=Object(f.d)(t,new Date,p()().add(1,"y").toDate(),3).map(e=>p()(e).format("LL"));m=`${Object(c.a)("Next occurrences:")}\n          ${n.join(", ")}. ${a}.`}}return(n.createElement("div",{key:e.id,onClick:this.eventClick.bind(null,e),className:"event-container",__source:{fileName:E,lineNumber:182,columnNumber:7}},n.createElement(r.a,{event:e,displayStyle:"transparent",isSelected:i,isEditing:s,isAllDay:t,isFiltering:u,__source:{fileName:E,lineNumber:185,columnNumber:9}}),m&&n.createElement("div",{__source:{fileName:E,lineNumber:193,columnNumber:11}},m)))}),this.cache=new g.b({defaultHeight:50})}componentDidUpdate(e,t){this.props.filterText!==e.filterText&&this.cache.clearAll()}render(){const{eventsToRender:e}=this.state,t=o.a.getCalendars().find(e=>e.id===o.a.getDefaultCalendarId());return n.createElement("div",{className:"manager-content",__source:{fileName:E,lineNumber:205,columnNumber:7}},n.createElement("div",{className:"calendar-viewport",style:l.a.getCalendarColors(t),__source:{fileName:E,lineNumber:206,columnNumber:9}},n.createElement("div",{className:"search-results",__source:{fileName:E,lineNumber:210,columnNumber:11}},Object(c.a)("$1 result for “$2”","$1 results for “$2”",[e.length,this.props.filterText]),n.createElement("button",{onClick:this.props.onClose,__source:{fileName:E,lineNumber:214,columnNumber:13}},n.createElement("span",{dangerouslySetInnerHTML:{__html:v.kb},__source:{fileName:E,lineNumber:215,columnNumber:15}}))),n.createElement("div",{className:"calendar-grid-agenda search-results-list",onKeyDown:this.onKeyDown,__source:{fileName:E,lineNumber:218,columnNumber:11}},n.createElement(b.a,{__source:{fileName:E,lineNumber:222,columnNumber:13}},({height:t,width:a})=>n.createElement(N.a,{width:a,height:t,defferredMeasurementCache:this.cache,rowHeight:this.cache.rowHeight,rowRenderer:this.renderDay,rowCount:e.length,__source:{fileName:E,lineNumber:224,columnNumber:15}})))))}}C(w,"contextType",s.a),C(w,"getDerivedStateFromProps",(e,t)=>{const a=o.a.getEvents()||[];return{eventsToRender:l.a.searchEvents(a,e.filterText).reduce((e,t)=>{const a=p()(t.start).format("ll"),n=e.findIndex(e=>e.title===a);return-1===n?e.push({title:a,events:[t]}):e[n].events.unshift(t),e},[])}}),t.a=w},,function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(31),o=a(22),l=a(2),c=a(4),u=a(9),m=a(169),d=a(230);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends n.PureComponent{constructor(...e){super(...e),h(this,"undeleteEvent",e=>{i.a.restoreEvent(this.context.editor,e)}),h(this,"undo",()=>{const{trashedEvents:e}=this.props;e.length>0&&this.undeleteEvent(e[0])}),h(this,"trimTitle",e=>(e.length>70&&(e=e.substring(0,70)+"..."),e)),h(this,"getContextMenuItems",()=>this.props.trashedEvents.sort((e,t)=>(t.trash_time||0)-(e.trash_time||0)).map(e=>({mnemonic:!1,url:e.id,handler:this.undeleteEvent.bind(this,e),...r.a.makeLabelPair(e.title||"")})).filter(Boolean).concat([r.a.separatorItem,{handler:this.clearAll,...Object(c.a)("other","Clear All")}])),h(this,"clearAll",()=>{const{trashedEvents:e}=this.props;e.forEach(e=>{const{id:t}=e;i.a.deleteEvent(t)})}),h(this,"onDrop",e=>{const t=e.dataTransfer.getData(d.b);if(t){e.preventDefault(),e.stopPropagation();const a=JSON.parse(t),{id:n}=a;i.a.trashEvent(this.context.editor,n)}}),h(this,"render",()=>n.createElement(o.a,{className:"toggle-trash",onDrop:this.onDrop,onDragEnter:m.default,disabled:0===this.props.trashedEvents.length,image:u.Wd.medium,onMiddleClick:this.undo,menu:this.getContextMenuItems(),menuOrigin:"bottomLeft",mimeType:d.b,edgeAmount:0,tooltip:Object(l.a)("Trashed Events"),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarTrash.jsx",lineNumber:86,columnNumber:5}}))}}h(p,"contextType",s.a),t.a=p},function(e,t,a){"use strict";var n=a(0),i=a(32),s=a(42),r=a(103),o=a(25),l=a(2),c=a(20),u=a.n(c),m=a(109),d=a(15),h=a.n(d),p=a(491),b=a(218),g="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\FilterAndSearch.jsx";const{isAllDayEvent:N,searchEvents:f}=s.a,_={events:[],count:0,totalCount:0};t.a=function(e){const t=n.useContext(o.a),{document:a}=t,[c,d]=n.useState(!1),[v,E]=n.useState(_),[C,w]=n.useState(-1),O=n.useRef(),y=n.useRef();n.useEffect(()=>{c&&O.current&&O.current.focus()},[c]);const S=t=>{A(),e.onSelectEvent(t)},T=()=>{A(),e.onShowSearchResults()},k=t=>{const a=i.a.getEvents()||[];let n=f(a,t||e.filterText);const s=n.length;return s>10&&(n=n.slice(0,10)),{events:n,count:n.length,totalCount:s}},A=()=>{d(!1),w(-1)},I=t=>{switch(m.a[t.keyCode]){case"Enter":E(k()),d(!0);break;case"Escape":e.onSearchChange("")}},D=n.useRef(null),M=n.useCallback(()=>A,[]),P=n.useCallback(()=>D.current,[]);return Object(p.a)(P,M),n.createElement("div",{ref:D,className:"toolbar-group FilterAndSearch",__source:{fileName:g,lineNumber:219,columnNumber:5}},n.createElement("input",{type:"search",className:"FilterAndSearch-Input",tabIndex:"0",ref:y,placeholder:Object(l.a)("Filter and Search"),title:Object(l.a)("Type to filter. Press enter or click button to search."),value:e.filterText,onChange:t=>{const{value:a}=t.target;e.onSearchChange(a),""===a&&A(),c&&E(k(a))},onKeyDown:I,__source:{fileName:g,lineNumber:222,columnNumber:7}}),n.createElement("input",{className:"FilterAndSearch-Button",type:"button",disabled:0===e.filterText.length,onClick:T,value:Object(l.a)("verb","Search"),__source:{fileName:g,lineNumber:234,columnNumber:7}}),c&&v.count>0&&n.createElement("div",{className:"SearchDropdown",ref:O,tabIndex:"0",onFocus:e=>{e.target===O.current&&C<0&&w(0)},onKeyDown:e=>{switch(m.a[e.keyCode]){case"Space":case"Enter":C>=0&&C<v.count&&(S(v.events[C].id),e.stopPropagation());break;case"Escape":A(),y.current&&y.current.focus();break;case"Up":w(e=>Math.max(0,e-1));break;case"Down":w(e=>Math.min(v.count-1,e+1));break;case"Tab":a.activeElement===O.current&&(!e.shiftKey&&C<v.count-1?(w(e=>e+1),e.preventDefault()):e.shiftKey&&C>0&&(w(e=>e-1),e.preventDefault()))}},__source:{fileName:g,lineNumber:242,columnNumber:9}},n.createElement("ul",{__source:{fileName:g,lineNumber:249,columnNumber:11}},v.events.map((t,a)=>{const o=i.a.getCalendars(),{title:c,id:m,start:d=0,end:p=0}=t,f=h()(d),_=h()(p),v=o.find(e=>e.id===t.calendarId),E=v?s.a.createCalendarIcon(v,9):"";return n.createElement("li",{className:u()("SearchDropdown-Item",{"SearchDropdown-Item--Selected":C===a}),key:a,onKeyDown:I,onMouseUp:S.bind(null,m),onMouseOver:()=>w(a),__source:{fileName:g,lineNumber:182,columnNumber:7}},n.createElement("div",{className:"SearchDropdown-ItemEvent",__source:{fileName:g,lineNumber:190,columnNumber:9}},n.createElement("p",{className:"SearchDropdown-ItemEventTitle",__source:{fileName:g,lineNumber:191,columnNumber:11}},Object(b.b)(c,e.filterText))),n.createElement("div",{className:"SearchDropdown-ItemMetaData",__source:{fileName:g,lineNumber:195,columnNumber:9}},n.createElement("div",{className:"SearchDropdown-ItemIcon",__source:{fileName:g,lineNumber:196,columnNumber:11}},n.createElement("span",{dangerouslySetInnerHTML:{__html:E},__source:{fileName:g,lineNumber:197,columnNumber:13}})),n.createElement("p",{className:"SearchDropdown-ItemEventCalendar",__source:{fileName:g,lineNumber:199,columnNumber:11}},!!v&&(v.description||v.name)),n.createElement("div",{className:"SearchDropdown-ItemDate",__source:{fileName:g,lineNumber:202,columnNumber:11}},(e=>{const{start:t,end:a}=e,n=h()(t),i=h()(a);return i.isAfter(n,"day")?Object(l.a)("$1 - $2 $3",[n.format(r.a.getShortDateFormat()),i.format(r.a.getShortDateFormat()),n.format("YYYY")]):Object(l.a)("$1. $2",[n.format("ddd"),n.format("ll")])})(t),n.createElement("br",{__source:{fileName:g,lineNumber:204,columnNumber:13}}),!N(t)&&`${f.format("LT")}-${_.format("LT")}`)))})),v.count!==v.totalCount&&n.createElement("div",{className:"SearchDropdown-MoreItems",__source:{fileName:g,lineNumber:253,columnNumber:13}},Object(l.a)("More results, showing first $1 items out of $2 total.",[v.count,v.totalCount])),n.createElement("input",{className:"SearchDropdown-Button",type:"button",onClick:T,value:Object(l.a)("Go to Search Results"),__source:{fileName:g,lineNumber:258,columnNumber:11}})))}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return R}));var n=a(0),i=a(595),s=a(89),r=a(1343),o=a(833),l=a(834),c=a(14),u=a(13),m=a(41),d=a(11),h=a(6),p=a(221),b=a(204),g=a(51),N=a(35),f=a(25),_=a(17),v=a(2),E=a(10),C=a(20),w=a.n(C),O=a(7),y=a(835),S=a(153),T=a(284),k=a(360),A=a(9),I=a(1),D=a(23),M="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManager.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x=[{text:Object(v.a)("Title"),value:"title",fullScreenTitle:Object(v.a)("Sort by title"),width:300,visible:!0,key:!0},{text:Object(v.a)("Content"),value:"content",icon:A.ld,fullScreenTitle:Object(v.a)("Sort by content"),width:300,visible:!1},{text:Object(v.a)("Address"),value:"url",icon:A.w,fullScreenTitle:Object(v.a)("Sort by address"),width:300,visible:!0},{text:Object(v.a)("Date Created"),value:"dateAdded",icon:A.y,fullScreenTitle:Object(v.a)("Sort by creation date"),width:120,visible:!0},{text:Object(v.a)("Attachments"),value:"attachments",icon:A.r,fullScreenTitle:Object(v.a)("Sort by attachments"),width:60,visible:!0}],L=Object(T.a)(j,s.a,{trailing:!0,leading:!1});function j({id:e,changes:t}){return new Promise((a,n)=>{O.a.notes.update(e,t,()=>E.a.runtime.lastError?n(E.a.runtime.lastError):a())})}class R extends n.PureComponent{constructor(t){super(t),P(this,"refBody",n.createRef()),P(this,"_tree",n.createRef()),P(this,"_onPageStoreChange",()=>{u.c.unsafeGetActivePage().id!==this.props.pageId?this.refBody.current&&e.nextTick(this.refBody.current.clearActiveWebViews):e.nextTick(()=>{if(this.state.note){var e,t;if(this.state.note.id!==this.props.id)null===(e=this._tree)||void 0===e||null===(t=e.current)||void 0===t||t.selectById(this.props.id);const a=Object(k.b)(this.state.note);c.a.setTitle(this.props.pageId,this.context.vivaldiWindowId,a)}this.refBody.current&&this.refBody.current.setActiveWebView()})}),P(this,"_onStoreChange",(t,a)=>{switch(t){case"added":{if(u.c.unsafeGetActivePage().id!==this.props.pageId||this.panelHasFocus())return;const t=s.b.getNodeById(a);return this.setState({note:t}),void(t&&!s.b.isSeparator(t)&&e.nextTick(()=>{var e,a;null===(e=this._tree)||void 0===e||null===(a=e.current)||void 0===a||a.selectById(t.id)}))}case"init":{var n;const e=s.b.getNodeById(this.props.id);return this.setState({note:e}),void(null===(n=this._tree.current)||void 0===n||n.selectById(this.props.id))}case"changed":{if(!this.state.note||this.state.note.id!==a)return;const e=s.b.getNodeById(a),t=this.refBody.current;if(t&&t.state.visualMode&&t.hasFocus())return;return this.setState({note:e}),!t||t.state.visualMode||t.hasFocus()||t&&t.onMarkdownContentLoad(),void(t&&t.onRichContentLoad())}}}),P(this,"panelHasFocus",()=>{var e;const{document:t}=this.context;return"notes"===m.d.getSelectedPanel()&&!!(null===(e=t.getElementById("panels-container"))||void 0===e?void 0:e.contains(t.activeElement))}),P(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(s.b.isFolder(e)&&!s.b.isFolder(t))return-1;if(s.b.isFolder(t)&&!s.b.isFolder(e))return 1;const{sortOrder:a,sortField:n}=this.state.sorting;return"title"===n?this.sortByTitle(e,t,a):g.a.getDefaultComparator(a,n)(e,t)}),P(this,"sortByTitle",(e,t,a)=>{if(a<=g.a.NO_SORTING)return 0;const n=e.title||Object(k.b)(e),i=t.title||Object(k.b)(t);return n||i?n?i?a===g.a.ASCENDING_SORT?n.toLowerCase().localeCompare(i.toLowerCase()):i.toLowerCase().localeCompare(n.toLowerCase()):a===g.a.ASCENDING_SORT?-1:1:a===g.a.ASCENDING_SORT?1:-1:0}),P(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{...a.sorting,sortOrder:e,sortField:t}})),d.a.set(I.kNotesManagerSorting,{sortOrder:e,sortField:t})}),P(this,"onUpdateRow",e=>{this.setState({columns:e})}),P(this,"onSaveRow",()=>{Object(S.b)(this.state.columns,"horizontal"===this.state.editorLayout?"notes":"notes_vertical")}),P(this,"onItemCreated",()=>{const t=this.state.note&&s.b.isFolder(this.state.note);this.refBody.current&&!t&&this.refBody.current.focus(),t&&e.nextTick(()=>{var e;this._tree.current&&(null===(e=this._tree.current.refTreeList.current)||void 0===e||e.startInlineEditForSelectedItem())})}),P(this,"onItemSelected",e=>{this.setState({note:e,markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0},()=>{e&&c.a.openURL(D.p.internalUrl("notes",e.id),{inCurrent:!0})})}),P(this,"handleFilterChange",e=>{this.setState({filter:e})}),P(this,"onAddNote",()=>{h.a.get(I.kNotesManagerShowMarkdown)&&this.refBody.current&&this.refBody.current.setVisualMode(!1),this.setState({filter:""}),this._tree.current&&this._tree.current.onAddNote()}),P(this,"onAddFolder",()=>{this.setState({filter:""}),this._tree.current&&this._tree.current.onAddFolder()}),P(this,"onDeleteSelectedItems",()=>{this._tree.current&&this._tree.current.deleteSelectedItems()}),P(this,"toggleFullEditor",()=>{const{innerWidth:e,innerHeight:t}=this.context;this.setState(a=>{const n="vertical"===a.editorLayout?I.kNotesManagerTreeWidth:I.kNotesManagerTreeHeight,i=Math.round(0===a.treeViewSize?("vertical"===a.editorLayout?e:t)/3:0);return d.a.set(n,i),{treeViewSize:i}})}),P(this,"onSlidebarPosition",(e,t)=>{this.setState(a=>"vertical"===a.editorLayout?{treeViewSize:Math.max(a.treeViewSize+e,0)}:{treeViewSize:Math.max(a.treeViewSize+t,0)})}),P(this,"onSlidebarStop",()=>{this.setState(e=>{const t="horizontal"===e.editorLayout?I.kNotesManagerTreeHeight:I.kNotesManagerTreeWidth;let a=e.treeViewSize;return a<=60&&(a=0),d.a.set(t,a),{treeViewSize:a}})}),P(this,"updateNoteContent",(e,t)=>{this.setState(t=>t.note?{note:{...t.note,content:e}}:null,t),this.state.note&&L({id:this.state.note.id,changes:{content:e}})}),P(this,"onKeyUp",e=>{const t=e.key.toLowerCase();if(e.ctrlKey)switch(t){case"f":this.refBody.current&&this.refBody.current.focusFindInPage();break;default:return}else"f3"===t&&this.refBody.current&&this.refBody.current.focusFindInPage()}),P(this,"onSaveLink",e=>{const{note:t}=this.state;t&&j({id:t.id,changes:{url:e}}),this.setState({editLinkModal:!1})}),P(this,"onCancelEditLink",()=>this.setState({editLinkModal:!1})),P(this,"onEditLink",()=>this.setState({editLinkModal:!0})),P(this,"toggleManagerLayout",()=>this.setState(e=>{const t="horizontal"===e.editorLayout?"vertical":"horizontal",a="horizontal"===t?h.a.get(I.kNotesManagerTreeHeight):h.a.get(I.kNotesManagerTreeWidth),n="horizontal"===t?"notes":"notes_vertical";return d.a.set(I.kNotesManagerLayout,t),{editorLayout:t,treeViewSize:a,columns:Object(S.e)()[n]||Object(S.d)(x)}}));const a=h.a.get(I.kNotesManagerSorting),i=h.a.get(I.kNotesManagerLayout),r="horizontal"===i?"notes":"notes_vertical";this.state={filter:"",note:void 0,markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0,editorLayout:i,editLinkModal:!1,treeViewSize:"vertical"===i?h.a.get(I.kNotesManagerTreeWidth):h.a.get(I.kNotesManagerTreeHeight),sorting:{sortOrder:a.sortOrder,sortField:a.sortField,comparator:this.sortComparator},columns:Object(S.e)()[r]||Object(S.d)(x)}}componentDidMount(){u.c.addChangeListener(this._onPageStoreChange),s.b.addChangeListener(this._onStoreChange),this.props.id&&"-1"!==this.props.id&&e.nextTick(()=>{this._tree.current&&this._tree.current.selectById(this.props.id)})}componentDidUpdate(t,a){e.nextTick(()=>{var e;this.state.note&&this.state.note.id!==(null===(e=a.note)||void 0===e?void 0:e.id)&&this._onPageStoreChange()})}componentWillUnmount(){u.c.removeChangeListener(this._onPageStoreChange),s.b.removeChangeListener(this._onStoreChange)}render(){var e;const{note:t,editorLayout:a}=this.state,c=_.a.isIncognitoOrGuest(this.context.vivaldiWindowId)?h.a.get(I.kThemePrivateWindow):N.a.getSync("THEME_CURRENT");return n.createElement("div",{className:w()({"NotesManager manager":!0,"NotesManager--Vertical":"vertical"===a}),onKeyUp:this.onKeyUp,__source:{fileName:M,lineNumber:520,columnNumber:7}},this.state.editLinkModal&&n.createElement(i.a,{onCreateLink:this.onSaveLink,onCancelCreateLink:this.onCancelEditLink,link:t?t.url:"",useAddress:!0,__source:{fileName:M,lineNumber:527,columnNumber:11}}),n.createElement("div",{className:w()({"NotesManager-Tree":!0,"NotesManager-Tree--Collapsed":0===this.state.treeViewSize}),style:{flexBasis:this.state.treeViewSize},__source:{fileName:M,lineNumber:534,columnNumber:9}},n.createElement(y.a,{filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onAddFolder:this.onAddFolder,onDeleteSelectedItems:this.onDeleteSelectedItems,onSetLayout:this.toggleManagerLayout,editorLayout:a,isDeleteDisabled:!this.state.note,__source:{fileName:M,lineNumber:541,columnNumber:11}}),n.createElement("div",{className:"NotesManager-Tree-Container",__source:{fileName:M,lineNumber:552,columnNumber:11}},n.createElement(b.a,{key:this.state.editorLayout,fields:x,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:h.a.get(I.kKeyboardTabToAll),manualSorting:!0,__source:{fileName:M,lineNumber:553,columnNumber:13}}),n.createElement(o.a,{ref:this._tree,settings:`NOTES_MANAGER_TREE_${this.props.pageId}`,filter:this.state.filter,sorting:this.state.sorting,onItemSelected:this.onItemSelected,onCreated:this.onItemCreated,editLink:this.onEditLink,columns:this.state.columns,noteId:this.state.note?this.state.note.id:"-1",pageId:this.props.pageId,fullView:!0,__source:{fileName:M,lineNumber:566,columnNumber:13}}))),s.b.hasNotes()?n.createElement("div",{className:"NotesManager-Note",__source:{fileName:M,lineNumber:585,columnNumber:11}},n.createElement(p.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.toggleFullEditor,returnOffset:!0,position:"vertical"===a?"right":"bottom",__source:{fileName:M,lineNumber:586,columnNumber:13}}),n.createElement(r.a,{ref:this.refBody,inFullView:this.state.treeViewSize>0,noteId:(null===(e=this.state.note)||void 0===e?void 0:e.id)||"-1",note:this.state.note,pageId:this.props.pageId,isFolder:!!t&&s.b.isFolder(t),toggleFullEditor:this.toggleFullEditor,updateNoteContent:this.updateNoteContent,themeId:c,isActive:this.props.isActive,__source:{fileName:M,lineNumber:594,columnNumber:13}})):n.createElement(l.a,{onAddNote:this.onAddNote,__source:{fileName:M,lineNumber:583,columnNumber:11}}))}}P(R,"contextType",f.a)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return C}));var n=a(0),i=a(1344),s=a(326),r=a(453),o=a(970),l=a(11),c=a(6),u=a(687),m=a(1345),d=a(95),h=a(2),p=a(724),b=a(360),g=a(1),N=a(349),f=a(688),_=a(324),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerEditor.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends n.Component{constructor(...t){super(...t),E(this,"refMarkdownEditor",n.createRef()),E(this,"refVisualEditor",n.createRef()),E(this,"refToolbar",n.createRef()),E(this,"markdownFormatter",new r.a),E(this,"turndownService",Object(m.a)({headingStyle:"atx",codeBlockStyle:"fenced"})),E(this,"state",{visualMode:!c.a.get(g.kNotesManagerShowMarkdown)}),E(this,"focus",()=>{var e;this.state.visualMode?null===(e=this.refVisualEditor.current)||void 0===e||e.focus():this.refMarkdownEditor.current&&this.refMarkdownEditor.current.focus()}),E(this,"hasFocus",()=>this.state.visualMode&&this.refVisualEditor.current?this.refVisualEditor.current.hasFocus():!!this.refMarkdownEditor.current&&this.refMarkdownEditor.current.hasFocus()),E(this,"handleAttachmentMarkdown",async e=>{this.refVisualEditor.current&&this.props.note&&this.refVisualEditor.current.execCommand("insertImage",`chrome://vivaldi-data/notes-attachment/${this.props.note.id}/${e}`)}),E(this,"onHtmlChange",()=>{if(!this.refVisualEditor.current)throw new Error("VisualEditor: Building body parts after body is gone");return this.refVisualEditor.current.getContentAsBodyParts().then(e=>{if("html"===e[0].type){const{blobFreeHTML:t}=Object(N.c)(e[0].content),a=this.turndownService.turndown(t);this.props.updateNoteContent(a,()=>{this.refMarkdownEditor&&this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setContent(a)})}})}),E(this,"onMarkDownChange",async()=>{if(!this.refMarkdownEditor.current)throw new Error("MarkdownEditor: Building body parts after body is gone");const e=await this.refMarkdownEditor.current.getContentAsBodyParts();if("text"!==e[0].type)return;const t=e[0].content;this.props.updateNoteContent(t,()=>{})}),E(this,"setZoomLevel",()=>{const e=_.a.getState().notesZoom;this.refVisualEditor.current&&this.refVisualEditor.current.setZoomLevel(e),this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setZoomLevel(e)}),E(this,"onRichContentLoad",()=>{const{note:t}=this.props,a=this.markdownFormatter.getRawMarkup((null==t?void 0:t.content)||"");e.nextTick(()=>{this.refVisualEditor.current&&this.refVisualEditor.current.setContent(a,!1),this.setZoomLevel()})}),E(this,"onMarkdownContentLoad",()=>{const{note:t}=this.props;e.nextTick(()=>{this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setContent((null==t?void 0:t.content)||""),this.setZoomLevel()})}),E(this,"onStylingButtonClicked",e=>{this.state.visualMode?this.refVisualEditor.current&&this.refVisualEditor.current.onClick(e):this.refMarkdownEditor.current&&this.refMarkdownEditor.current.onClick(e)}),E(this,"onParagraphFormatChange",(e,t)=>{this.state.visualMode?this.refVisualEditor.current&&this.refVisualEditor.current.onChange(e,t):this.refMarkdownEditor.current&&this.refMarkdownEditor.current.onChange(e,t)}),E(this,"onCreateLink",e=>{const t=this.state.visualMode?this.refVisualEditor.current:this.refMarkdownEditor.current;t&&(""===e?t.execCommand("unlink"):"https://"!==e&&t.execCommand("createLink",e),t.focus())}),E(this,"onCancelCreateLink",()=>{this.focus()}),E(this,"handleLinkEvent",(e,t)=>{const a=this.refToolbar.current;if(!a)return;const{link:n,anchor:i}=a.state;switch(e){case"linkupdate":a.updateLinkState(t||"");break;case"createLink":case"editLink":a.showCreateLinkModal();break;case"copyLink":break;case"unlink":(n||i)&&this.refVisualEditor.current&&this.refVisualEditor.current.unlink();break;case"createLinkClicked":(n||i)&&this.refVisualEditor.current&&this.refVisualEditor.current.selectSurrounding(),a.showCreateLinkModal()}}),E(this,"focusFindInPage",()=>{e.nextTick(()=>d.a.showFindInPageToolbar(this.props.pageId))}),E(this,"setActiveWebView",()=>{this.clearActiveWebViews(),this.state.visualMode&&this.refVisualEditor?s.a.setActiveWebView(this.refVisualEditor):this.refMarkdownEditor&&s.a.setActiveWebView(this.refMarkdownEditor)}),E(this,"clearActiveWebViews",()=>{this.refVisualEditor.current&&s.a.clearIfActive(this.refVisualEditor.current),this.refMarkdownEditor.current&&s.a.clearIfActive(this.refMarkdownEditor.current)}),E(this,"setVisualMode",e=>this.setState({visualMode:e},()=>{this.setActiveWebView(),this.onRichContentLoad(),l.a.set(g.kNotesManagerShowMarkdown,!this.state.visualMode)})),E(this,"updateDropdownAndColorState",()=>{var e;null===(e=this.refVisualEditor.current)||void 0===e||e.executeScript({code:"['formatBlock'].map(command => document.queryCommandValue(command));"}).then(e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])){var t;const[a]=e[0],n=""===a||"div"===a?"p":a;null===(t=this.refToolbar.current)||void 0===t||t.updateButtonState(void 0,n)}})}),E(this,"updateButtonState",()=>{const e=this.refToolbar.current;if(e)if(this.state.visualMode){var t;const a=`[${'"'+p.b.flat().map(e=>e.command).join('","')+'"'}].map(command => document.queryCommandState(command));`;null===(t=this.refVisualEditor.current)||void 0===t||t.executeScript({code:a}).then(t=>{const a=p.b.flat().map(e=>e.command).indexOf("createLink"),n=t&&t[0]||[];n[a]=!!e.state.anchor,e.updateButtonState(n)})}else{const t=this.refMarkdownEditor?this.refMarkdownEditor.current:null;if(!t)return;const a=p.b.flat().map(e=>e.command).map(e=>t.state.caretState[e]).filter(f.a),{formatBlock:n}=t.state.caretState;e.updateButtonState(a,n)}})}componentDidMount(){this.turndownService.use(i.gfm),this.turndownService.addRule("strikethrough",{filter:["del","s","strike"],replacement:e=>"~~"+e+"~~"}),this.turndownService.addRule("listItem",{filter:"li",replacement:function(e,t,a){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");let n=a.bulletListMarker+" ",i=t.parentNode;if("OL"===i.nodeName){const e=i.getAttribute("start"),a=Array.prototype.indexOf.call(i.children,t);n=(e?Number(e)+a:a+1)+". "}let s=-1;for(;i&&("OL"===i.nodeName||"UL"===i.nodeName);)s+=1,i=i.parentNode;return"    ".repeat(s)+n+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),this.refVisualEditor.current&&this.refVisualEditor.current.focus()}componentDidUpdate(e){e.noteId!==this.props.noteId&&(this.onRichContentLoad(),this.onMarkdownContentLoad())}render(){const{note:e}=this.props,t=e&&e.attachments?e.attachments:[];return n.createElement(n.Fragment,null,n.createElement(p.a,{ref:this.refToolbar,isActive:this.props.isActive,noteId:e?e.id:void 0,pageId:this.props.pageId,attachments:t,disabled:!e||this.props.isFolder,inFullView:this.props.inFullView,visualMode:this.state.visualMode,handleAttachmentMarkdown:this.handleAttachmentMarkdown,onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,onParagraphFormatChange:this.onParagraphFormatChange,onStylingButtonClicked:this.onStylingButtonClicked,setVisualMode:this.setVisualMode,toggleFullEditor:this.props.toggleFullEditor,__source:{fileName:v,lineNumber:362,columnNumber:9}}),n.createElement("div",{className:"NotesManager-Editor",__source:{fileName:v,lineNumber:379,columnNumber:9}},n.createElement("div",{className:"editor-html",__source:{fileName:v,lineNumber:380,columnNumber:11}},n.createElement(u.a,{ref:this.refVisualEditor,onChange:this.onHtmlChange,onContentLoad:this.onRichContentLoad,focusPreviousElement:()=>{},isNote:!0,hidden:!this.state.visualMode,disabled:!e||this.props.isFolder,updateDropdownAndColorState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,themeId:this.props.themeId,__source:{fileName:v,lineNumber:381,columnNumber:13}})),n.createElement(o.a,{ref:this.refMarkdownEditor,onChange:this.onMarkDownChange,onContentLoad:this.onMarkdownContentLoad,hidden:this.state.visualMode,disabled:this.state.visualMode||!e||this.props.isFolder,updateDropdownState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,__source:{fileName:v,lineNumber:396,columnNumber:11}})),e&&n.createElement("footer",{className:"NotesManager-Footer",__source:{fileName:v,lineNumber:409,columnNumber:11}},n.createElement("div",{className:"NotesManager-WordCount",__source:{fileName:v,lineNumber:410,columnNumber:13}},Object(h.a)("$1 word","$1 words",[Object(b.c)(e)])+", "+Object(h.a)("$1 character","$1 characters",[Object(b.a)(e)]))))}}}).call(this,a(82))},,,function(e,t,a){"use strict";(function(e){var n=a(0),i=a(79),s=a(28),r=a(91),o=a(36),l=a(14),c=a(6),u=a(40),m=a.n(u),d=a(836),h=a(65),p=a(359),b=a(281),g=a(157),N=a(25),f=a(2),_=a(20),v=a.n(_),E=a(78),C=a(74),w=a(7),O=a(1),y=a(97),S=a(46),T=a(9),k=a(23),A=(a(644),a(111)),I=a(323),D="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDial.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=new Set;class x extends n.PureComponent{constructor(t){super(t),M(this,"_hasClipboardListener",!1),M(this,"_customThumbnail",!1),M(this,"handleRemoveDial",()=>{const e=Object(y.a)(m.a.findDOMNode(this))?this.props.getNextFocusable(this.props.node.id):"";this.props.bookmarkActions.remove([this.props.node.id]).then(()=>{e&&this.props.moveFocus(e,"current",!1)})}),M(this,"enableClipboardListener",e=>{if(this._hasClipboardListener!==e){this._hasClipboardListener=e;const{document:t}=this.context;this._hasClipboardListener?(t.addEventListener("cut",this.onCut),t.addEventListener("copy",this.onCopy),t.addEventListener("paste",this.onPaste)):(t.removeEventListener("cut",this.onCut),t.removeEventListener("copy",this.onCopy),t.removeEventListener("paste",this.onPaste))}}),M(this,"handleCutDial",()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("cut",this.onCut),e.execCommand("cut"),t||e.removeEventListener("cut",this.onCut)}),M(this,"handleCopyDial",()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("copy",this.onCopy),e.execCommand("copy"),t||e.removeEventListener("copy",this.onCopy)}),M(this,"handlePasteDial",()=>{const{document:e}=this.context,t=this._hasClipboardListener;t||e.addEventListener("paste",this.onPaste),e.execCommand("paste"),t||e.removeEventListener("paste",this.onPaste)}),M(this,"handleRename",()=>{this.refs.title.enableEditing()}),M(this,"onRenameFinished",t=>{t?e.nextTick(()=>{this.props.moveFocus("add","current",!1)}):this.props.moveFocus(this.props.node.id,"current",!1)}),M(this,"handleEdit",()=>{o.a.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})}),M(this,"handleUpdateThumbnail",()=>{this.props.node.url&&b.a.updateBookmark(this.props.node)}),M(this,"handleSetCustomThumbnail",()=>{w.a.utilities.selectLocalImage({title:Object(f.a)("Select Custom Image"),thumbnailBookmarkId:this.props.node.id})}),M(this,"handleClearCustomThumbnail",()=>{this.props.bookmarkActions.update(this.props.node.id,{thumbnail:""})}),M(this,"onThumbnailImageLoadError",e=>{e&&!Object(S.l)(e)&&w.a.bookmarksPrivate.isCustomThumbnail(this.props.node.id,t=>{e===this.props.node.thumbnail&&(t||P.has(e)||(P.add(e),b.a.updateBookmark(this.props.node)))})}),M(this,"openSpeedDialNodeHandler",e=>{const t=e.ctrlKey;let a=!1,n=!1;if(e.shiftKey&&!e.altKey&&t)return void l.a.openWindow(this.props.node.url,{incognito:!1,transition:g.a.AUTO_BOOKMARK});const i="number"==typeof e.button?e.button:C.a.kNone;if(!e.shiftKey||e.altKey||t)if(e.shiftKey||e.altKey||!t){if(i===C.a.kCenter)a=!0,n=!0,e.preventDefault();else if(C.a.isContextMenuButton(i)||C.a.isNavigationButton(i))return}else a=!0,n=!0;else a=!0;this.openSpeedDialNode(this.props.node,{openInBackground:n,openInNewTab:a}),h.a.clearStatus()}),M(this,"openSpeedDialNode",(e,t)=>{this.props.openSpeedDialNode(e,t)}),M(this,"handlePointerEnter",()=>{const{node:e}=this.props,{children:t}=e,a=t?Object(f.a)("$1 Folder",[e.title||""]):e?k.p.getHoverUrl(s.b.getUrlByNode(e)):"";h.a.setStatus(a)}),M(this,"handlePointerLeave",()=>{h.a.clearStatus()}),M(this,"dialPointerDownHandler",e=>{this.props.onPointerDown(this.props.node,e)}),M(this,"pointerDownHandler",e=>{e.button,C.a.kCenter,e.button!==C.a.kLeft&&e.preventDefault(),w.a.bookmarksPrivate.isCustomThumbnail(this.props.node.id,e=>{this._customThumbnail=e})}),M(this,"pointerUpHandler",e=>{this.openSpeedDialNodeHandler(e),this.focusedElement&&setTimeout(()=>{this.focusedElement&&this.focusedElement.focus(),this.focusedElement=null},1)}),M(this,"keyDownHandler",e=>{switch(e.key){case" ":case"Enter":this.openSpeedDialNodeHandler(e);break;case"F2":this.handleRename();break;case"ArrowLeft":if(!this.props.moveFocus(this.props.node.id,"left",!1))return;break;case"ArrowRight":if(!this.props.moveFocus(this.props.node.id,"right",!1))return;break;case"ArrowUp":if(!this.props.moveFocus(this.props.node.id,"up",!1))return;break;case"ArrowDown":if(!this.props.moveFocus(this.props.node.id,"down",!1))return;break;default:return}e.preventDefault(),e.stopPropagation()}),M(this,"cancelEvent",e=>{e.preventDefault(),e.stopPropagation()}),M(this,"getContextMenuItems",(e,t)=>{const a=r.a.getOptionFunction(e),{prefValues:n}=this.props,i="always"===n[O.kStartpageSpeedDialTitlesVisible];return r.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewTab:!0,openInBackground:this.props.prefValues[O.kTabsOpenNewInBackground]}),visible:this.isBookmark(),...a(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewTab:!0,openInBackground:!0}),visible:this.isBookmark()&&!c.a.get(O.kTabsOpenNewInBackground),...a(e,{})};case"CONTEXT_OPEN_IN_TAB":return{handler:()=>this.openSpeedDialNode(t),visible:this.isBookmark(),...a(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewWindow:!0}),visible:this.isBookmark(),...a(e,{})};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:this.openSpeedDialNode.bind(this,t,{openInNewWindow:!0,incognito:!0}),visible:this.isBookmark(),...a(e,{})};case"CONTEXT_OPEN_ALL":return{handler:this.openSpeedDialNode.bind(this,t,{openInBackground:!0}),visible:this.isFolder(),...a(e,{})};case"CONTEXT_SET_THUMBNAIL":return{handler:this.handleSetCustomThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...a(e,{})};case"CONTEXT_CLEAR_THUMBNAIL":return{handler:this.handleClearCustomThumbnail,visible:this._customThumbnail,...a(e,{})};case"CONTEXT_RELOAD":return{handler:this.handleUpdateThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...a(e,{})};case"CONTEXT_EDIT":return{handler:this.handleEdit,...a(e,{})};case"CONTEXT_RENAME":return{handler:this.handleRename,visible:i,...a(e,{})};case"CONTEXT_CUT":return{handler:this.handleCutDial,...a(e,{})};case"CONTEXT_COPY":return{handler:this.handleCopyDial,...a(e,{})};case"CONTEXT_PASTE":return{handler:this.handlePasteDial,...a(e,{})};case"CONTEXT_DELETE":return{handler:this.handleRemoveDial,...a(e,{})};default:return{...a(e,{})}}})}),M(this,"onContextMenu",(e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getContextMenuItems("speeddialitem",e).then(e=>{Object(E.a)(this.context.vivaldiWindowId,e)(t)})}),M(this,"onDragOver",e=>{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===i.c)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=i.a.isCopyModifierPressed(e)?"copy":"move",this.setState({canDrop:!0}))}),M(this,"onDragLeave",e=>{this.state.canDrop&&this.setState({canDrop:!1})}),M(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),this.props.bookmarkActions.onDropEvent(e,this.props.node.id,0),this.setState({canDrop:!1})}),M(this,"onCut",e=>{this.props.bookmarkActions.cut(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()}),M(this,"onCopy",e=>{this.props.bookmarkActions.copy(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()}),M(this,"onPaste",e=>{this.props.bookmarkActions.paste(e,this.props.node.id),e.stopPropagation(),e.preventDefault()}),this.focusedElement=null,this.state={canDrop:!1,isHovered:!1}}componentWillUnmount(){this.enableClipboardListener(!1),b.a.unlinkBookmarkComponent(this)}isFolder(){return!this.props.node.url}isBookmark(){return!this.isFolder()}renderThumbnails(){const e=this.props.node;return e.children?e.thumbnail?n.createElement(p.a,{key:"thumb__folder__"+e.id,src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,className:"thumbnail-folder-image",__source:{fileName:D,lineNumber:567,columnNumber:9}}):e.children.map((t,a)=>{if(a<4)return n.createElement(p.a,{key:"thumb__"+e.id+"__"+a,src:t.thumbnail?t.thumbnail:"",className:"Mini-Thumbnail",onImageLoadError:this.onThumbnailImageLoadError,isFolder:!!t.children,__source:{fileName:D,lineNumber:577,columnNumber:11}})}):null}render(){const e=this.props.node,{children:t}=e,a=b.a.linkAndQueryUpdatingBookmark(this,e.id),i=e.url?e.url:"",s=k.p.getFavicon(i,i),{prefValues:r}=this.props,o="never"!==r[O.kStartpageSpeedDialTitlesVisible],l=r[O.kStartpageSpeedDialFaviconVisible],c=o?45:10,u=l?{}:{textAlign:"center"};return n.createElement("div",{tabIndex:this.props.keyAccess,onPointerDown:this.dialPointerDownHandler,className:v()("draggable","dial",{dragging:this.props.dragging,dragover:this.props.highlight,folder:Boolean(t),isCut:this.props.isCut}),style:{...this.props.style,height:this.props.backgroundHeight,width:this.props.thumbnailWidth},"data-id":e.id,onContextMenu:this.onContextMenu.bind(this,e),onBlur:()=>this.enableClipboardListener(!1),onFocus:()=>this.enableClipboardListener(!0),onKeyDown:this.keyDownHandler,onPointerEnter:()=>this.setState({isHovered:!0}),onPointerLeave:()=>this.setState({isHovered:!1}),onDoubleClick:this.cancelEvent,onPointerUpCapture:this.props.onPointerUp,__source:{fileName:D,lineNumber:603,columnNumber:7}},t?n.createElement("div",{className:v()({"thumbnail-image":!0,"dial-folder-icon":!0,"drop-hover":this.state.canDrop}),title:e.url,style:{height:this.props.thumbnailHeight,width:"100%"},onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,onPointerCancel:this.pointerUpHandler,onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDrop.bind(this),key:e.id,__source:{fileName:D,lineNumber:641,columnNumber:11}},0===t.length&&!e.thumbnail&&n.createElement(p.a,{src:"",isFolder:!0,__source:{fileName:D,lineNumber:662,columnNumber:15}}),t.length>0&&!e.thumbnail&&n.createElement("div",{className:"preview",__source:{fileName:D,lineNumber:665,columnNumber:15}},this.renderThumbnails()),e.thumbnail&&n.createElement(p.a,{className:"thumbnail-folder-image",src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,__source:{fileName:D,lineNumber:670,columnNumber:15}})):n.createElement(p.a,{onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,key:e.id,thumbnailHeight:this.props.thumbnailHeight,thumbnailWidth:"100%",src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,thumbnailHeight:this.props.thumbnailHeight,thumbnailWidth:"100%",__source:{fileName:D,lineNumber:628,columnNumber:11}}),e.url&&r[O.kStartpageSpeedDialControlsVisible]&&n.createElement("div",{className:"thumb-controls",style:{bottom:c},__source:{fileName:D,lineNumber:679,columnNumber:11}},n.createElement("button",{tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:v()({circular:!0,"set-custom-thumbnail":!0}),title:Object(f.a)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:T.yd},__source:{fileName:D,lineNumber:682,columnNumber:13}}),!this.props.incognito&&n.createElement("button",{tabIndex:"-1",onClick:this.handleUpdateThumbnail,className:v()({circular:!0,"update-thumbnail":!0,updating:a}),disabled:a,title:Object(f.a)("Update thumbnail"),dangerouslySetInnerHTML:{__html:T.lc.large},__source:{fileName:D,lineNumber:692,columnNumber:15}})),r[O.kStartpageSpeedDialDeleteVisible]&&n.createElement("button",{tabIndex:"-1",onClick:this.handleRemoveDial,title:Object(f.a)("other","Delete"),className:"close circular",dangerouslySetInnerHTML:{__html:T.zd},__source:{fileName:D,lineNumber:709,columnNumber:11}}),o&&n.createElement("div",{className:v()({"thumbnail-title":!0,hidden:"hover"===r[O.kStartpageSpeedDialTitlesVisible]}),__source:{fileName:D,lineNumber:717,columnNumber:11}},l&&!t&&n.createElement(A.a,{className:"favicon",url:s,__source:{fileName:D,lineNumber:723,columnNumber:15}}),l&&t&&n.createElement(I.a,{rightMargin:0,className:"favicon",__source:{fileName:D,lineNumber:726,columnNumber:15}}),n.createElement(d.a,{ref:"title",bookmark:e,bookmarkActions:this.props.bookmarkActions,className:"button-title",getContextMenuItemsPromise:this.getContextMenuItems.bind(this,"speeddialitem"),howToEdit:"click",keyAccess:-1,needsInitialEdit:this.props.awaitingInitialEditId===e.id,onSelect:this.pointerUpHandler,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,style:u,onFinished:this.onRenameFinished,titleMargin:this.props.titleMargin,__source:{fileName:D,lineNumber:728,columnNumber:13}})))}}M(x,"contextType",N.a),t.a=x}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(12);class i{static setProgressState(e,t){n.a.dispatch({actionType:"PAGE_SET_PROGRESS",pageId:e,progressState:t})}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a.n(n),s=a(10);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends i.a.PureComponent{constructor(...e){super(...e),r(this,"refWebView",i.a.createRef()),r(this,"handleClose",e=>{var t,a;null===(t=(a=this.props).onClose)||void 0===t||t.call(a,e)}),r(this,"handleContentload",e=>{var t,a;null===(t=(a=this.props).onContentLoad)||void 0===t||t.call(a,e)}),r(this,"handleContentscreated",e=>{var t,a;null===(t=(a=this.props).onContentsCreated)||void 0===t||t.call(a,e)}),r(this,"handleCreatesearch",e=>{var t,a;null===(t=(a=this.props).onCreateSearch)||void 0===t||t.call(a,e)}),r(this,"handleContentallowed",e=>{var t,a;null===(t=(a=this.props).onContentAllowed)||void 0===t||t.call(a,e)}),r(this,"handleContentblocked",e=>{var t,a;null===(t=(a=this.props).onContentBlocked)||void 0===t||t.call(a,e)}),r(this,"handleDialog",e=>{var t,a;null===(t=(a=this.props).onDialog)||void 0===t||t.call(a,e)}),r(this,"handleExit",e=>{var t,a;null===(t=(a=this.props).onExit)||void 0===t||t.call(a,e)}),r(this,"handleFindupdate",e=>{var t,a;null===(t=(a=this.props).onFindUpdate)||void 0===t||t.call(a,e)}),r(this,"handleFullscreen",e=>{var t,a;null===(t=(a=this.props).onFullscreen)||void 0===t||t.call(a,e)}),r(this,"handleLoadabort",e=>{var t,a;null===(t=(a=this.props).onLoadAbort)||void 0===t||t.call(a,e)}),r(this,"handleLoadcommit",e=>{var t,a;null===(t=(a=this.props).onLoadCommit)||void 0===t||t.call(a,e)}),r(this,"handleLoadprogress",e=>{var t,a;null===(t=(a=this.props).onLoadProgress)||void 0===t||t.call(a,e)}),r(this,"handleLoadredirect",e=>{var t,a;null===(t=(a=this.props).onLoadRedirect)||void 0===t||t.call(a,e)}),r(this,"handleLoadstart",e=>{var t,a;null===(t=(a=this.props).onLoadStart)||void 0===t||t.call(a,e)}),r(this,"handleLoadstop",e=>{var t,a;null===(t=(a=this.props).onLoadStop)||void 0===t||t.call(a,e)}),r(this,"handleNewwindow",e=>{var t,a;null===(t=(a=this.props).onNewWindow)||void 0===t||t.call(a,e)}),r(this,"handlePasteandgo",e=>{var t,a;null===(t=(a=this.props).onPasteAndGo)||void 0===t||t.call(a,e)}),r(this,"handlePermissionrequest",e=>{var t,a;null===(t=(a=this.props).onPermissionRequest)||void 0===t||t.call(a,e)}),r(this,"handleSslstatechanged",e=>{var t,a;null===(t=(a=this.props).onSslStateChanged)||void 0===t||t.call(a,e)}),r(this,"handleTargetUrlChanged",e=>{var t,a;null===(t=(a=this.props).onTargetUrlChanged)||void 0===t||t.call(a,e)}),r(this,"handleWindowblocked",e=>{var t,a;null===(t=(a=this.props).onWindowBlocked)||void 0===t||t.call(a,e)}),r(this,"canGoBack",()=>!!this.refWebView.current&&this.refWebView.current.canGoBack()),r(this,"canGoForward",()=>!!this.refWebView.current&&this.refWebView.current.canGoForward()),r(this,"executeScript",e=>new Promise((t,a)=>{var n;null===(n=this.refWebView.current)||void 0===n||n.executeScript(e,e=>{s.a.runtime.lastError?a(s.a.runtime.lastError.message):t(e)})})),r(this,"reload",()=>{var e;null===(e=this.refWebView.current)||void 0===e||e.reload()}),r(this,"stop",()=>{var e;null===(e=this.refWebView.current)||void 0===e||e.stop()}),r(this,"sendRequest",(e,t,a,n,i)=>{var s;null===(s=this.refWebView.current)||void 0===s||s.sendRequest(e,t,a,n,i)})}componentDidMount(){const e=this.refWebView.current;e&&(e.addEventListener("close",this.handleClose),e.addEventListener("contentload",this.handleContentload),e.addEventListener("contentscreated",this.handleContentscreated),e.addEventListener("createsearch",this.handleCreatesearch),e.addEventListener("contentallowed",this.handleContentallowed),e.addEventListener("contentblocked",this.handleContentblocked),e.addEventListener("dialog",this.handleDialog),e.addEventListener("exit",this.handleExit),e.addEventListener("findupdate",this.handleFindupdate),e.addEventListener("fullscreen",this.handleFullscreen),e.addEventListener("loadabort",this.handleLoadabort),e.addEventListener("loadcommit",this.handleLoadcommit),e.addEventListener("loadprogress",this.handleLoadprogress),e.addEventListener("loadredirect",this.handleLoadredirect),e.addEventListener("loadstart",this.handleLoadstart),e.addEventListener("loadstop",this.handleLoadstop),e.addEventListener("newwindow",this.handleNewwindow),e.addEventListener("pasteandgo",this.handlePasteandgo),e.addEventListener("permissionrequest",this.handlePermissionrequest),e.addEventListener("sslstatechanged",this.handleSslstatechanged),e.addEventListener("targeturlchanged",this.handleTargetUrlChanged),e.addEventListener("windowblocked",this.handleWindowblocked))}componentWillUnmount(){const e=this.refWebView.current;e&&(e.removeEventListener("close",this.handleClose),e.removeEventListener("contentload",this.handleContentload),e.removeEventListener("contentscreated",this.handleContentscreated),e.removeEventListener("createsearch",this.handleCreatesearch),e.removeEventListener("contentallowed",this.handleContentallowed),e.removeEventListener("contentblocked",this.handleContentblocked),e.removeEventListener("dialog",this.handleDialog),e.removeEventListener("exit",this.handleExit),e.removeEventListener("findupdate",this.handleFindupdate),e.removeEventListener("fullscreen",this.handleFullscreen),e.removeEventListener("loadabort",this.handleLoadabort),e.removeEventListener("loadcommit",this.handleLoadcommit),e.removeEventListener("loadprogress",this.handleLoadprogress),e.removeEventListener("loadredirect",this.handleLoadredirect),e.removeEventListener("loadstart",this.handleLoadstart),e.removeEventListener("loadstop",this.handleLoadstop),e.removeEventListener("newwindow",this.handleNewwindow),e.removeEventListener("pasteandgo",this.handlePasteandgo),e.removeEventListener("permissionrequest",this.handlePermissionrequest),e.removeEventListener("sslstatechanged",this.handleSslstatechanged),e.removeEventListener("targeturlchanged",this.handleTargetUrlChanged),e.removeEventListener("windowblocked",this.handleWindowblocked))}render(){return i.a.createElement("webview",{ref:this.refWebView,id:this.props.id,partition:"persist:storage",tab_id:this.props.id,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebView.jsx",lineNumber:390,columnNumber:12}})}}},function(e,t){e.exports="/* global chrome */\n\n/* This is the user file part of reader mode, it's injected after the\n   browserjs part of reader mode and does the real injecetion\n   (browserjs only does detection at an earlier stage so that we don't\n   need to wait for the page to load to update the indicator status of\n   the readability of the page */\nconst FEATURE_HIDE_PAGE = true;\n/* Hide page on load for better transition while navigating */\n\nconst AVERAGE_READ_WORDS = 225;\nconst _ = window.Translate; // Add LI to scoring elements; Lower default character threshold (500)\n\nconst TAGS = \"section,h2,h3,h4,h5,h6,p,li,td,pre\";\nconst DEFAULT_TAGS_TO_SCORE = TAGS.toUpperCase().split(\",\");\nconst DEFAULT_CHAR_THRESHOLD = 300;\n\nfunction canSetStyle() {\n  return document && document.documentElement && document.documentElement.style;\n} // TODO: not working after delaying injection in the browserjs part of reader view\n\n\nif (FEATURE_HIDE_PAGE && canSetStyle()) {\n  document.documentElement.style.display = 'none';\n}\n\nconst DEBUG_READABILITY = false;\nconst readabilityCss = `\nhtml {\n  margin: 0;\n  padding: 0;\n}\nbody {\n  color: #111111;\n  background-color: #f6f6f6;\n  font-family: sans-serif;\n  font-size: 1.3em;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.5;\n  margin: 0 auto;\n  padding: 40px 10px 80px;\n  text-orientation: upright;\n  transition:\n    color 200ms cubic-bezier(0.4, 0, 1, 1),\n    background-color 200ms cubic-bezier(0.4, 0, 1, 1);\n}\nbody.vertical {\n  margin: 40px auto 0;\n  padding: 40px 60px 0;\n  max-height: calc(100vh - 120px);\n}\n.entry-content * {\n  max-width: 100%;\n  white-space: normal;\n  line-height: inherit;\n  vertical-align: baseline;\n  background: transparent;\n}\n.entry-content p {\n  margin: 1.5em 0;\n}\nbody.vertical .entry-content p {\n  margin: 0 1.5em;\n}\nh1 {\n  font-size: 1.8em;\n  line-height: 1.35;\n}\nh1, h2, h3, h4, h5, h6, b {\n  font-weight: 700;\n}\nhr {\n  border-style: solid;\n  border-width: 0 0 0.5px 0.5px;\n}\n.byline {\n  font-style: italic;\n}\n.entry-content img {\n  max-width: 100%;\n  height: auto;\n}\nbody.vertical .entry-content img {\n  max-height: 100%;\n  width: auto;\n}\n.entry-content code {\n  font-weight: 500;\n}\n.entry-content pre {\n  font-weight: 300;\n  background-color: rgba(128, 128, 128, 0.05);\n  border: 1px solid rgba(128, 128, 128, 0.1);\n  white-space: pre-wrap;\n  padding: 0.5em;\n  margin: 1.5em 0;\n}\n.entry-content code, .entry-content pre {\n  text-align: left;\n  max-width: 100%;\n  writing-mode: horizontal-tb;\n  overflow: auto;\n  white-space: pre-wrap;\n}\nbody.vertical .entry-content pre {\n  margin: 0 1.5em;\n  max-width: 80%;\n  max-height: 100%;\n}\niframe, textarea, input {\n  display: none;\n}\n`;\n\nfunction __vivaldiGetHTML(article) {\n  const content = window.DOMPurify.sanitize(article.content);\n  const words = article.textContent.split(' ').filter(elem => {\n    return elem.length && !elem.match(/\\r?\\n|\\r/g);\n  });\n  const readingTime = Math.round(words.length / AVERAGE_READ_WORDS);\n\n  const readText = _(\"Read time: $1 minute\", \"Read time: $1 minutes\", [readingTime]);\n\n  const byline = article.byline ? `${article.byline} -` : '';\n  return `<!DOCTYPE html>\n<html dir=\"${article.dir}\"><head>\n<title>${article.title}</title>\n<style>${readabilityCss}</style>\n</head><body>\n<h1>${article.title}</h1>` + `<p class=\"byline\">${byline} ${readText}</p>` + `<hr />\n<article class=\"entry-content\">${content}</article>\n</body></html>`;\n}\n\nfunction ready() {\n  if (typeof document !== 'undefined' && ['complete', 'loaded', 'interactive'].indexOf(document.readyState) > -1) {\n    return true;\n  }\n\n  return false;\n}\n\nlet _numTriesLeft = 5;\n\nfunction onLoad() {\n  if (!window['Readability'] && _numTriesLeft-- > -1) {\n    setTimeout(onLoad, 500);\n  }\n\n  try {\n    if (!window['Readability']) {\n      return;\n    } // TODO: should probably reuse this object when enabling, instead\n    // of running it again via the user script\n\n\n    const {\n      Readability\n    } = window;\n    const readability = new Readability(document.cloneNode(true), {\n      classesToPreserve: DEFAULT_TAGS_TO_SCORE,\n      charThreshold: DEFAULT_CHAR_THRESHOLD,\n      debug: DEBUG_READABILITY\n    });\n    const isProbablyReaderable = window.isProbablyReaderable(document);\n    let article;\n\n    if (isProbablyReaderable) {\n      article = readability.parse();\n    } else {\n      console.log('[readability] Probably not readable');\n    }\n\n    if (DEBUG_READABILITY) {\n      console.log('isReadable?', isProbablyReaderable, 'article:', article);\n    }\n\n    if (article) {\n      // VB-22288 Cancel unload events\n      document.beforeunload = () => {};\n\n      document.unload = () => {};\n\n      const reader = document.implementation.createHTMLDocument(document.title);\n      reader.documentElement.innerHTML = __vivaldiGetHTML(article);\n      document.replaceChild(reader.documentElement, document.documentElement);\n\n      if (chrome && chrome.runtime && chrome.runtime.sendMessage) {\n        chrome.runtime.sendMessage({\n          type: 'SET_RM_STYLE'\n        });\n      }\n    } else {\n      console.log('[readability] Nothing to show');\n    }\n  } finally {\n    // The page is rendered with display: none, so need to ensure this\n    // is always called\n    if (FEATURE_HIDE_PAGE && canSetStyle()) {\n      document.documentElement.style.display = 'block';\n    }\n  }\n}\n\nif (ready()) {\n  onLoad();\n} else {\n  window.addEventListener('DOMContentLoaded', onLoad, false);\n}"},function(e,t,a){"use strict";(function(e){var n=a(79),i=a(150),s=a(311),r=a(21),o=a(151),l=a(14),c=a(13),u=a(67),m=a(41),d=a(1351),h=a(0),p=a.n(h),b=a(86),g=a(65),N=a(157),f=a(201),_=a(25),v=a(17),E=a(2),C=a(10),w=a(303),O=a(7),y=a(763),S=a(1),T=a(101),k=a(117),A=a(188),I=a(121),D=a(516),M=a(23),P="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandSearch.jsx";function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L=Object(E.a)("Filter Quick Commands"),j=[S.kAddressBarStripJavascriptOnPaste,S.kQuickCommandsKeepValue,S.kQuickCommandsOpenUrlInNewTab,S.kQuickCommandsSearchEnglish,S.kQuickCommandsSearchPriority,S.kQuickCommandsMatchNickname,S.kChainedCommandsCommandList,S.kQuickCommandsShowBookmarks,S.kQuickCommandsShowCalculator,S.kQuickCommandsShowExtensions,S.kQuickCommandsShowHistory,S.kQuickCommandsShowNotes,S.kQuickCommandsShowPageActions,S.kQuickCommandsLimitResults,S.kQuickCommandsUseNotesManager];let R=!1;class B extends p.a.PureComponent{constructor(...t){super(...t),x(this,"state",{quickCommandSearchValue:this.props.quickCommandValue||"",typeAheadHint:L,renderedArray:[]}),x(this,"_isIMEOpen",!1),x(this,"_justClosedIME",!1),x(this,"expireTimeout",null),x(this,"contentScripts",[]),x(this,"openTabsInAllWindows",[]),x(this,"parser",new y.a),x(this,"_imeProcessSpace",!1),x(this,"defaultEngine",b.a.getDefault(v.a.isIncognito(this.context.vivaldiWindowId))),x(this,"quickCommandInput",p.a.createRef()),x(this,"allExtensions",[]),x(this,"vivaldiExt",[]),x(this,"commandChains",[]),x(this,"_initialSetup",async()=>{const e=Object(k.j)(""),t=await Object(I.h)({windowType:"normal"}),a=await Object(k.s)("",t);this.allExtensions=await Object(k.c)(),this.vivaldiExt=await Object(k.o)(),this.openTabsInAllWindows=t,this.commandChains=this.props.prefValues[S.kChainedCommandsCommandList];const n=Object(k.h)("",this.commandChains);if(this.setState({renderedArray:[...a,...e,...n]},()=>this.hintChange(1)),this.props.prefValues[S.kQuickCommandsKeepValue]){const e=this.state.quickCommandSearchValue;var i,s;if(e.length)null===(i=this.quickCommandInput)||void 0===i||null===(s=i.current)||void 0===s||s.setSelectionRange(0,e.length),this.searchChange(e)}}),x(this,"onKeyDown",t=>{switch(this.qclist.setKeyedNavigation(!0),t.key){case"Process":this._isIMEOpen&&(this._imeProcessSpace=!0);break;case"Escape":this.onEscape(),t.preventDefault(),t.stopPropagation();break;case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":this.qclist.onKeyDown(t),t.preventDefault();break;case"Enter":{if(this._isIMEOpen||this.expireTimeout)break;const e=this.qclist.getSelectedIndex(),a=this.state.renderedArray[e];this.executeCommand(a,t),t.preventDefault(),t.stopPropagation();break}case"Tab":case"ArrowRight":if(Object(w.a)(t)||this._isIMEOpen)break;this.autoCompleteHint(),"Tab"===t.key&&t.preventDefault()}this._justClosedIME=!1,e.nextTick(()=>this.syncOffset())}),x(this,"onCompositionStart",()=>{this._isIMEOpen=!0}),x(this,"onCompositionEnd",()=>{this._isIMEOpen=!1,this._justClosedIME=!0,this.searchChange(this.state.quickCommandSearchValue)}),x(this,"onEscape",()=>{this._isIMEOpen?this._justClosedIME=!1:(this.state.quickCommandSearchValue.length>0&&!this._justClosedIME&&!this._isIMEOpen?(this.props.storeQuickCommandValue(""),this.setState({quickCommandSearchValue:"",typeAheadHint:L},this.searchChange(""))):this._justClosedIME||this.props.onClose(),this._justClosedIME=!1)}),x(this,"syncOffset",()=>{const{current:e}=this.quickCommandInput;e&&(this.refs.quickCommandHint.scrollLeft=e.scrollLeft)}),x(this,"autoCompleteHint",()=>{const{typeAheadHint:e}=this.state,t=this.qclist.getSelectedIndex(),a=this.state.renderedArray[t];if(!e.length||a.type===T.b.CALCULATOR)return;const n=a.type===T.b.COMMAND_KEYWORD&&a.searchString?a.searchString+" ":e;this.setState({quickCommandSearchValue:n},()=>this.searchChange(n))}),x(this,"executeCommand",(t,a)=>{const{ctrlKey:n,altKey:s,metaKey:r,shiftKey:u}=a,m={ctrlKey:n,altKey:s,metaKey:r,shiftKey:u},d=Object(k.v)(m);switch(t.type){case T.b.OPEN_TAB:if(t.windowId&&t.pageId){const{windowId:e,pageId:a}=t;C.a.windows.update(e,{focused:!0},()=>{C.a.tabs.update(a,{active:!0})})}break;case T.b.CLOSED_TAB:t.command&&f.a.undeleteTab(t.command);break;case T.b.CALCULATOR:{const{name:e}=t;navigator.clipboard.writeText(e);break}case T.b.COMMAND_CHAIN:t.action&&t.action();break;case T.b.BOOKMARK_FOLDER:case T.b.BOOKMARK_NICKNAME:t.folderId?Object(k.y)(t.folderId):t.url&&l.a.openURL(t.url,{...d});break;case T.b.BOOKMARK:if(t.url){const{url:e}=t;l.a.openURL(e,{...d})}break;case T.b.EXTENSION:if(t.id&&void 0!==t.enabled){const{id:e,enabled:a,optionsUrl:n=""}=t,i={id:e,enabled:a,optionsPage:Object(A.e)(m),optionsUrl:n};Object(k.w)(i)}break;case T.b.URL:{const{name:e}=t;l.a.openURL(e,{transition:N.a.TYPED,...d});break}case T.b.KEYWORDSEARCH:case T.b.SEARCH:if(t.value&&"string"==typeof t.value){const{value:e}=t;l.a.openURL(e,{transition:N.a.GENERATED,...d})}break;case T.b.COMMAND:case T.b.COMMAND_KEYWORD:if(t.commandName){const{commandName:e,value:a,name:n}=t;return void this.props.onClose().then(()=>{i.default.executeActions(e,a),g.a.setStatus(Object(E.a)("Command: $1",[n]),3e3),this.props.storeQuickCommandValue("")})}break;case T.b.HISTORY:if(t.url){const{url:e}=t;l.a.openURL(e,{...d})}break;case T.b.CONTENT_SCRIPT:{const e=c.c.unsafeGetActivePage().get("id");if(t.script){const{script:a}=t;O.a.pageActions.getScriptOverridesForTab(e,t=>{const n=t.find(e=>e.script===a),i=n&&"enabled"===n.override?"no_override":"enabled";O.a.pageActions.setScriptOverrideForTab(a,e,i,()=>{})})}break}case T.b.NOTE_OPEN:if(t.id){const{id:e}=t;this.handleNotesOpening(e,{...d})}break;case T.b.NOTE_ADD:if(t.value&&"string"==typeof t.value){const{value:e}=t;o.a.createNote({content:e})}}this.setState({quickCommandSearchValue:""}),this.props.storeQuickCommandValue(""),e.nextTick(this.props.onClose)}),x(this,"onSearchChange",e=>{const t=e.target;this.searchChange(t.value)}),x(this,"handleNotesOpening",(e,t)=>{this.props.prefValues[S.kQuickCommandsUseNotesManager]||!m.d.isAvailable("notes")?l.a.openURL(M.p.internalUrl("notes",e),{...t}):u.a.showContent("notes",{setFocus:!0,selectId:e,reason:""})}),x(this,"searchChange",e=>{const t=this.props.prefValues,a=e.trim();let n=[];const i=Object(k.q)(a);i.forEach(e=>n.push(e)),t[S.kQuickCommandsShowCalculator]&&Object(k.g)(a).forEach(e=>n.push(e)),a.length&&!i.length&&Object(k.m)(a,this.defaultEngine).forEach(e=>n.push(e)),t[S.kQuickCommandsShowNotes]&&Object(k.l)(a).forEach(e=>n.push(e));const s=Object(k.s)(a,this.openTabsInAllWindows),r=Object(k.j)(a);if(n=[...n,...s,...r],a.length){let i=[];if(t[S.kQuickCommandsShowExtensions]&&(i=Object(k.n)(a,this.allExtensions,this.vivaldiExt)),n=[...n,...i],t[S.kQuickCommandsShowBookmarks]){Object(k.e)(a).forEach(e=>n.push(e)),Object(k.h)(a,this.commandChains).forEach(e=>n.push(e));const e=Object(k.d)(a),t=Object(k.f)(a);n=[...n,...e,...t]}if(t[S.kQuickCommandsShowNotes]){const e=Object(k.r)(a);n=[...n,...e]}if(a.length>1&&t[S.kQuickCommandsShowHistory]){const e=Object(k.p)(a);n=[...n,...e]}const s=Object(k.i)(a);if(n=[...n,...s],Object(k.u)(a).forEach(e=>n.push(e)),t[S.kQuickCommandsShowPageActions]&&c.c.isActiveExternal()){const t=Object(k.k)(e,this.contentScripts);n=[...n,...t]}}this.setState({quickCommandSearchValue:e,renderedArray:n},()=>this.performSelection())}),x(this,"onPaste",e=>{const{clipboardData:t}=e;if("text/plain"!==t.types[0])return;const a=t.getData("text/plain");a.trim()||e.preventDefault();const{prefValues:n}=this.props,{quickCommandSearchValue:i}=this.state,s=/^(\s*javascript:)+/i,r=e.currentTarget.selectionStart;if(n[S.kAddressBarStripJavascriptOnPaste]){if(s.test(a)){e.preventDefault();const t=a.replace(/javascript:/gi,""),n=Object(D.a)(i||"",t,r,e.currentTarget.selectionEnd);return void this.searchChange(n)}if(s.test(i+a)){e.preventDefault();const t=(i+a).replace(/javascript:/gi,""),n=Object(D.a)("",t,r,e.currentTarget.selectionEnd);this.searchChange(n)}}}),x(this,"getSelectPriority",()=>{const{renderedArray:e}=this.state;let t=0,a=this.props.prefValues[S.kQuickCommandsSearchPriority].length;return e.forEach((e,n)=>{void 0!==e.selectPriority&&e.selectPriority<a&&(t=n,a=e.selectPriority)}),{priority:a,selectIndex:t}}),x(this,"openBookmark",e=>{const t=this.props.prefValues;if(t[S.kQuickCommandsMatchNickname]){if(e.folderId)Object(k.y)(e.folderId);else if(e.url){const a={bookmarks:[{url:e.url}],inCurrent:!1===t[S.kQuickCommandsOpenUrlInNewTab]};n.a.open(a,!1)}this.expireTimeout=setTimeout(()=>{this.setState({quickCommandSearchValue:""},()=>{this.props.onClose()})},200)}}),x(this,"performSelection",()=>{const{renderedArray:e,quickCommandSearchValue:t}=this.state;let{priority:a,selectIndex:n}=this.getSelectPriority();const i=e[n],s=this.props.prefValues[S.kQuickCommandsSearchPriority];if(i.type===T.b.BOOKMARK_NICKNAME)this.openBookmark(i);else if(a===s.length){const a=e.findIndex(e=>e.type===T.b.HISTORY&&e.name.toLowerCase().includes(t.toLowerCase()));n=-1!==a?a:0}this.selectByIndex(n),this.qclist.rerenderVisibleTreeItems()}),x(this,"hintChange",e=>{let t;const{renderedArray:a}=this.state,n=a[e],i=this.state.quickCommandSearchValue;switch(n.type){case T.b.URL:case T.b.NOTE_ADD:case T.b.SEARCH:case T.b.KEYWORDSEARCH:t="";break;case T.b.COMMAND_KEYWORD:case T.b.COMMAND:if(n.value)t="";else{const{name:e}=n,a=Object(k.t)(e,i);t=i+e.substring(a+i.length)}break;case T.b.CALCULATOR:if(n.searchString&&n.name){const{searchString:e,name:a}=n;t=e!==a?`${i} = ${a}`:""}break;default:{let e="";const{name:a="",url:s="",nickname:r=""}=n,o=Object(k.t)(a,i),l=s?Object(k.t)(s,i):-1,c=Object(k.t)(r,i);-1!==o?e=a.substring(o+i.length):s&&-1!==l?e=s.substring(l+i.length):-1!==c&&(e=r.substring(c+i.length)),t=i+e}}i.length||n.type!==T.b.TITLE||(t=L),this.setState({typeAheadHint:t}),this.qclist.rerenderVisibleTreeItems()})}componentDidMount(){R||(R=!0,s.a.loadAll()),this._initialSetup(),O.a.pageActions.getScripts(e=>{this.contentScripts=e})}componentWillUnmount(){const e=this.state.quickCommandSearchValue;this.props.prefValues[S.kQuickCommandsKeepValue]&&e.length?this.props.storeQuickCommandValue(e):this.props.storeQuickCommandValue("")}componentDidUpdate(){this._imeProcessSpace&&this._isIMEOpen&&(this._imeProcessSpace=!1),this.commandChains!==this.props.prefValues[S.kChainedCommandsCommandList]&&(this.commandChains=this.props.prefValues[S.kChainedCommandsCommandList])}selectByIndex(e){this.qclist&&this.qclist.selectByIndex(e)}render(){return p.a.createElement("div",{className:"quick-command-container",__source:{fileName:P,lineNumber:748,columnNumber:7}},p.a.createElement("div",{className:"qc-entry",__source:{fileName:P,lineNumber:749,columnNumber:9}},p.a.createElement("input",{tabIndex:"-1",readOnly:!0,ref:"quickCommandHint",className:"quick-command-search-hint",value:this.state.typeAheadHint,__source:{fileName:P,lineNumber:750,columnNumber:11}}),p.a.createElement("input",{type:"search",autoFocus:!0,ref:this.quickCommandInput,className:"quick-command-search",onKeyDown:this.onKeyDown,onScroll:()=>e.nextTick(this.syncOffset),onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,value:this.state.quickCommandSearchValue,onChange:this.onSearchChange,onPaste:this.onPaste,__source:{fileName:P,lineNumber:756,columnNumber:11}})),p.a.createElement(d.a,{ref:e=>this.qclist=e,renderedArray:this.state.renderedArray,onExecuteCommand:this.executeCommand,syncOffset:this.syncOffset,searchTerm:this.state.quickCommandSearchValue.trim(),hintChange:this.hintChange,__source:{fileName:P,lineNumber:769,columnNumber:9}}))}}x(B,"contextType",_.a),t.a=Object(r.a)(B,j)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(1352),i=a(1353),s=a(1354),r=a(1355),o=a(0),l=a.n(o),c=a(1356),u=a(431),m=a(101),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandList.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends l.a.PureComponent{constructor(...t){super(...t),h(this,"state",{selectedIndex:1}),h(this,"_keyedNavigation",!1),h(this,"_startIndex",0),h(this,"_stopIndex",0),h(this,"setKeyedNavigation",e=>{this._keyedNavigation=e}),h(this,"getSelectedIndex",()=>this.state.selectedIndex),h(this,"selectByIndex",e=>{this.props.hintChange(e),this.setState({selectedIndex:e}),this.rerenderVisibleTreeItems()}),h(this,"onKeyDown",e=>{const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},a=this.props.renderedArray;let n=this.getSelectedIndex(),i=n;if(!t.ctrl&&t.alt&&!t.shift&&!t.command)switch(e.key){case"ArrowUp":n>0&&"title"===a[n-1].type&&n--,i=0;for(let e=n-1;e>=0;e--)if("title"===a[e].type){i=e+1;break}e.preventDefault();break;case"ArrowDown":for(let e=n;e<a.length;e++)if("title"===a[e].type){i=e+1;break}e.preventDefault()}else if(!(t.ctrl||t.alt||t.shift||t.command)){const t=this._stopIndex-this._startIndex;switch(e.key){case"ArrowUp":i=Math.max(0,n-1),e.preventDefault();break;case"ArrowDown":i=Math.min(n+1,a.length-1),e.preventDefault();break;case"PageUp":i=Math.max(0,this._startIndex-t);break;case"PageDown":i=Math.min(this._stopIndex+t,a.length-1)}}i!==n&&("title"===a[i].type&&(i=i>n?++i:Math.max(0,--i)),this.selectByIndex(i))}),h(this,"_onMouseOver",(t,a)=>{this._keyedNavigation||void 0===a.index||(this.selectByIndex(a.index),e.nextTick(()=>this.props.syncOffset()))}),h(this,"_onMouseMove",()=>{this.setKeyedNavigation(!1)}),h(this,"rerenderVisibleTreeItems",()=>{this.refList&&this.refList.forceUpdateGrid()}),h(this,"_onIndexChanged",e=>{this._startIndex=e.startIndex,this._stopIndex=e.stopIndex}),h(this,"renderTreeItem",({index:e,style:t})=>{const a=this.props.renderedArray[e];a.index=e;const o=this.state.selectedIndex===e;switch(a.type){case m.b.TITLE:return l.a.createElement(c.a,{key:a.type+"__"+a.index,selected:o,item:a,style:t,__source:{fileName:d,lineNumber:162,columnNumber:11}});case m.b.HISTORY:return l.a.createElement(s.a,{key:a.type+"__"+a.index,selected:o,item:a,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:d,lineNumber:173,columnNumber:11}});case m.b.CALCULATOR:return l.a.createElement(n.a,{key:a.type+"__"+a.index,selected:o,item:a,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:d,lineNumber:187,columnNumber:11}});case m.b.NOTE_OPEN:case m.b.NOTE_ADD:return l.a.createElement(r.a,{key:a.type+"__"+a.index,selected:o,item:a,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:d,lineNumber:201,columnNumber:11}});default:return l.a.createElement(i.a,{selected:o,key:a.type+"__"+a.index,item:a,style:t,searchTerm:this.props.searchTerm,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:d,lineNumber:215,columnNumber:11}})}})}render(){const e=28*this.props.renderedArray.length,t=e>280?280:e;return l.a.createElement("div",{className:"quick-commands",tabIndex:"1",onKeyDown:this.onKeyDown,onMouseMove:this._onMouseMove,__source:{fileName:d,lineNumber:234,columnNumber:7}},l.a.createElement(u.a,{ref:e=>this.refList=e,onRowsRendered:this._onIndexChanged,scrollToIndex:this.state.selectedIndex,height:t,rowHeight:28,width:520,rowRenderer:this.renderTreeItem,rowCount:this.props.renderedArray.length,__source:{fileName:d,lineNumber:239,columnNumber:9}}))}}t.a=p}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(9),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CalculatorItem.jsx";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.a.PureComponent{constructor(...e){super(...e),l(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),l(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{name:e}=this.props.item;return(i.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:o,lineNumber:40,columnNumber:7}},i.a.createElement("span",{className:"quick-command-favicon",dangerouslySetInnerHTML:{__html:r.a},__source:{fileName:o,lineNumber:46,columnNumber:9}}),i.a.createElement("span",{className:"quick-command-title",__source:{fileName:o,lineNumber:48,columnNumber:9}},e),i.a.createElement("span",{className:"view quick-command-shortcut",__source:{fileName:o,lineNumber:51,columnNumber:9}},Object(s.a)("Press Enter to Copy"))))}}t.a=c},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(208),r=a(111),o=a(358),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CommandItem.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends i.a.PureComponent{constructor(...e){super(...e),c(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),c(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{item:e,style:t,searchTerm:a}=this.props;return(i.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:t,__source:{fileName:l,lineNumber:56,columnNumber:7}},e.imageUrl&&i.a.createElement(r.a,{className:"quick-command-favicon",url:e.imageUrl,__source:{fileName:l,lineNumber:63,columnNumber:11}}),a.length?Object(o.a)(a,e.name,"quick-command-title"):i.a.createElement("span",{className:"quick-command-title",__source:{fileName:l,lineNumber:68,columnNumber:13}},e.name),e.url&&(a.length?Object(o.a)(a,e.url,"quick-command-url"):i.a.createElement("span",{className:"view quick-command-url",__source:{fileName:l,lineNumber:76,columnNumber:15}},e.url)),e.nickname&&(a.length?Object(o.a)(a,e.nickname,"view quick-command-nickname"):i.a.createElement("span",{className:"view quick-command-nickname",__source:{fileName:l,lineNumber:85,columnNumber:15}},e.nickname)),e.meta&&i.a.createElement("span",{className:"view quick-command-meta",__source:{fileName:l,lineNumber:91,columnNumber:11}},Object(s.b)(e.meta))))}}t.a=u},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(15),r=a.n(s),o=a(111),l=a(358),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\HistoryItem.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.a.PureComponent{constructor(...e){super(...e),u(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),u(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{name:e,url:t,imageUrl:a,visitCount:n,visitTime:s}=this.props.item,{searchTerm:u}=this.props,m=r()(s).format("l, LT"),d=e||t;return i.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:c,lineNumber:39,columnNumber:7}},i.a.createElement(o.a,{url:a,className:"quick-command-favicon",__source:{fileName:c,lineNumber:45,columnNumber:9}}),Object(l.a)(u,d,"quick-command-title"),i.a.createElement("span",{className:"quick-command-timestamp",__source:{fileName:c,lineNumber:49,columnNumber:9}},m),i.a.createElement("span",{className:"item-count",__source:{fileName:c,lineNumber:52,columnNumber:9}},n))}}t.a=m},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(9),r=a(111),o=a(358),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QCNoteItem.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u="/resources/folder@2x.png";class m extends i.a.PureComponent{constructor(...e){super(...e),c(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),c(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{item:e,searchTerm:t}=this.props,a=function(e,t){return t?u:e?s.uc:s.vc}(!!e.url,!!e.isFolder);return i.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:l,lineNumber:56,columnNumber:7}},i.a.createElement(r.a,{url:a,className:"quick-command-favicon",__source:{fileName:l,lineNumber:62,columnNumber:9}}),e.name&&Object(o.a)(t,e.name,"quick-command-title"),!e.nickname&&e.url&&Object(o.a)(t,e.url,"quick-command-url"),e.nickname&&Object(o.a)(t,e.nickname,"quick-command-url"),e.hasAttachment&&i.a.createElement("span",{className:"quick-command-attachment",dangerouslySetInnerHTML:{__html:s.r},__source:{fileName:l,lineNumber:76,columnNumber:11}}))}}t.a=m},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\TitleItem.jsx";class r extends i.a.PureComponent{render(){const{item:e,style:t,selected:a}=this.props,{name:n,subtitle:r,count:o}=e;return i.a.createElement("div",{"data-selected":a?"":null,style:t,className:"quick-command-sectionheader",__source:{fileName:s,lineNumber:22,columnNumber:7}},n,r&&i.a.createElement("span",{className:"QuickCommand-Title--Subtitle",__source:{fileName:s,lineNumber:28,columnNumber:11}},r),o>0&&i.a.createElement("span",{className:"item-count",__source:{fileName:s,lineNumber:33,columnNumber:11}},o))}}t.a=r},function(e){e.exports=JSON.parse('{"sites":[{"title":"Vivaldi Browser Help Center","url":"https://help.vivaldi.com","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAKQ2lDQ1BJQ0MgcHJvZmlsZQAAeNqdU3dYk/cWPt/3ZQ9WQtjwsZdsgQAiI6wIyBBZohCSAGGEEBJAxYWIClYUFRGcSFXEgtUKSJ2I4qAouGdBiohai1VcOO4f3Ke1fXrv7e371/u855zn/M55zw+AERImkeaiagA5UoU8Otgfj09IxMm9gAIVSOAEIBDmy8JnBcUAAPADeXh+dLA//AGvbwACAHDVLiQSx+H/g7pQJlcAIJEA4CIS5wsBkFIAyC5UyBQAyBgAsFOzZAoAlAAAbHl8QiIAqg0A7PRJPgUA2KmT3BcA2KIcqQgAjQEAmShHJAJAuwBgVYFSLALAwgCgrEAiLgTArgGAWbYyRwKAvQUAdo5YkA9AYACAmUIszAAgOAIAQx4TzQMgTAOgMNK/4KlfcIW4SAEAwMuVzZdL0jMUuJXQGnfy8ODiIeLCbLFCYRcpEGYJ5CKcl5sjE0jnA0zODAAAGvnRwf44P5Dn5uTh5mbnbO/0xaL+a/BvIj4h8d/+vIwCBAAQTs/v2l/l5dYDcMcBsHW/a6lbANpWAGjf+V0z2wmgWgrQevmLeTj8QB6eoVDIPB0cCgsL7SViob0w44s+/zPhb+CLfvb8QB7+23rwAHGaQJmtwKOD/XFhbnauUo7nywRCMW735yP+x4V//Y4p0eI0sVwsFYrxWIm4UCJNx3m5UpFEIcmV4hLpfzLxH5b9CZN3DQCshk/ATrYHtctswH7uAQKLDljSdgBAfvMtjBoLkQAQZzQyefcAAJO/+Y9AKwEAzZek4wAAvOgYXKiUF0zGCAAARKCBKrBBBwzBFKzADpzBHbzAFwJhBkRADCTAPBBCBuSAHAqhGJZBGVTAOtgEtbADGqARmuEQtMExOA3n4BJcgetwFwZgGJ7CGLyGCQRByAgTYSE6iBFijtgizggXmY4EImFINJKApCDpiBRRIsXIcqQCqUJqkV1II/ItchQ5jVxA+pDbyCAyivyKvEcxlIGyUQPUAnVAuagfGorGoHPRdDQPXYCWomvRGrQePYC2oqfRS+h1dAB9io5jgNExDmaM2WFcjIdFYIlYGibHFmPlWDVWjzVjHVg3dhUbwJ5h7wgkAouAE+wIXoQQwmyCkJBHWExYQ6gl7CO0EroIVwmDhDHCJyKTqE+0JXoS+cR4YjqxkFhGrCbuIR4hniVeJw4TX5NIJA7JkuROCiElkDJJC0lrSNtILaRTpD7SEGmcTCbrkG3J3uQIsoCsIJeRt5APkE+S+8nD5LcUOsWI4kwJoiRSpJQSSjVlP+UEpZ8yQpmgqlHNqZ7UCKqIOp9aSW2gdlAvU4epEzR1miXNmxZDy6Qto9XQmmlnafdoL+l0ugndgx5Fl9CX0mvoB+nn6YP0dwwNhg2Dx0hiKBlrGXsZpxi3GS+ZTKYF05eZyFQw1zIbmWeYD5hvVVgq9ip8FZHKEpU6lVaVfpXnqlRVc1U/1XmqC1SrVQ+rXlZ9pkZVs1DjqQnUFqvVqR1Vu6k2rs5Sd1KPUM9RX6O+X/2C+mMNsoaFRqCGSKNUY7fGGY0hFsYyZfFYQtZyVgPrLGuYTWJbsvnsTHYF+xt2L3tMU0NzqmasZpFmneZxzQEOxrHg8DnZnErOIc4NznstAy0/LbHWaq1mrX6tN9p62r7aYu1y7Rbt69rvdXCdQJ0snfU6bTr3dQm6NrpRuoW623XP6j7TY+t56Qn1yvUO6d3RR/Vt9KP1F+rv1u/RHzcwNAg2kBlsMThj8MyQY+hrmGm40fCE4agRy2i6kcRoo9FJoye4Ju6HZ+M1eBc+ZqxvHGKsNN5l3Gs8YWJpMtukxKTF5L4pzZRrmma60bTTdMzMyCzcrNisyeyOOdWca55hvtm82/yNhaVFnMVKizaLx5balnzLBZZNlvesmFY+VnlW9VbXrEnWXOss623WV2xQG1ebDJs6m8u2qK2brcR2m23fFOIUjynSKfVTbtox7PzsCuya7AbtOfZh9iX2bfbPHcwcEh3WO3Q7fHJ0dcx2bHC866ThNMOpxKnD6VdnG2ehc53zNRemS5DLEpd2lxdTbaeKp26fesuV5RruutK10/Wjm7ub3K3ZbdTdzD3Ffav7TS6bG8ldwz3vQfTw91jicczjnaebp8LzkOcvXnZeWV77vR5Ps5wmntYwbcjbxFvgvct7YDo+PWX6zukDPsY+Ap96n4e+pr4i3z2+I37Wfpl+B/ye+zv6y/2P+L/hefIW8U4FYAHBAeUBvYEagbMDawMfBJkEpQc1BY0FuwYvDD4VQgwJDVkfcpNvwBfyG/ljM9xnLJrRFcoInRVaG/owzCZMHtYRjobPCN8Qfm+m+UzpzLYIiOBHbIi4H2kZmRf5fRQpKjKqLupRtFN0cXT3LNas5Fn7Z72O8Y+pjLk722q2cnZnrGpsUmxj7Ju4gLiquIF4h/hF8ZcSdBMkCe2J5MTYxD2J43MC52yaM5zkmlSWdGOu5dyiuRfm6c7Lnnc8WTVZkHw4hZgSl7I/5YMgQlAvGE/lp25NHRPyhJuFT0W+oo2iUbG3uEo8kuadVpX2ON07fUP6aIZPRnXGMwlPUit5kRmSuSPzTVZE1t6sz9lx2S05lJyUnKNSDWmWtCvXMLcot09mKyuTDeR55m3KG5OHyvfkI/lz89sVbIVM0aO0Uq5QDhZML6greFsYW3i4SL1IWtQz32b+6vkjC4IWfL2QsFC4sLPYuHhZ8eAiv0W7FiOLUxd3LjFdUrpkeGnw0n3LaMuylv1Q4lhSVfJqedzyjlKD0qWlQyuCVzSVqZTJy26u9Fq5YxVhlWRV72qX1VtWfyoXlV+scKyorviwRrjm4ldOX9V89Xlt2treSrfK7etI66Trbqz3Wb+vSr1qQdXQhvANrRvxjeUbX21K3nShemr1js20zcrNAzVhNe1bzLas2/KhNqP2ep1/XctW/a2rt77ZJtrWv913e/MOgx0VO97vlOy8tSt4V2u9RX31btLugt2PGmIbur/mft24R3dPxZ6Pe6V7B/ZF7+tqdG9s3K+/v7IJbVI2jR5IOnDlm4Bv2pvtmne1cFoqDsJB5cEn36Z8e+NQ6KHOw9zDzd+Zf7f1COtIeSvSOr91rC2jbaA9ob3v6IyjnR1eHUe+t/9+7zHjY3XHNY9XnqCdKD3x+eSCk+OnZKeenU4/PdSZ3Hn3TPyZa11RXb1nQ8+ePxd07ky3X/fJ897nj13wvHD0Ivdi2yW3S609rj1HfnD94UivW2/rZffL7Vc8rnT0Tes70e/Tf/pqwNVz1/jXLl2feb3vxuwbt24m3Ry4Jbr1+Hb27Rd3Cu5M3F16j3iv/L7a/eoH+g/qf7T+sWXAbeD4YMBgz8NZD+8OCYee/pT/04fh0kfMR9UjRiONj50fHxsNGr3yZM6T4aeypxPPyn5W/3nrc6vn3/3i+0vPWPzY8Av5i8+/rnmp83Lvq6mvOscjxx+8znk98ab8rc7bfe+477rfx70fmSj8QP5Q89H6Y8en0E/3Pud8/vwv94Tz+4A5JREAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNjMzMzk4REEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNjMzMzk4RUEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MzMzOThCQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM2MzMzOThDQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CzB6ggAABmJJREFUeNrEV1loVGcU/u4yk0xWs5hJE2PERNCKcX9QhBZR1Iii9UERRNFaRdu+iBL3uiDigj5UQaQPFeuCiMQNKxTy4Ip7K6iYxKhxS2LWyTYz995+/507mTszd9rSFjxwQubOnf98/znn+/7zS4Zh4FOaKv60TpwY+zyJXk6fRB9Cz6f3o6fQ3XSFLjmsp9ED9B56O72B/oJ+l/4r/ZX95X43boQAxNh39Ap6wf+40W8scEfp31sgIxmw2U/0pQmXkbhplszo7obR1cV99oSeu92QUlIgeTzMjWK+42AiayvpX9DH0btiAXydMLgsE3MA+ps3MDQNckEB1KFDIeXmmqCMtjbo9fWmG3xPKSxksVgtTXNabRi9kj7VDsBF/9Fxx9yR/vKluZhr6lS4Z86EOm4clIEDQ8As09+/R/DRI/ivXIH/8mUYBKuUlITW0PXYladY/XUtDKDcary4dGuPH5sBPevWwT1lSsLqyPn5cAufNg3BpUvRtXcv/BcuQB08OFE2RMavhbcw2TH4kydIWrAAmdzRXwWPo9aIEcg4dgwpmzZBq6sDOjujsmXZBBO49aEktuba06dIWrgQaYcPc0X1X7V+ypo18OzYgWBtrVMGiuwAvJFeDdVcHT0aaYcO/Wf+paxahaRFi6A9fx5iSMR0O4DMvsd+Pwx66oEDfY/a791D9fr18LEf/s6C7e2o37kTTSdP9j1L3b0bsmBGS0scgHBuPeHaa69eIWnuXKhlZeYj38OHeDR9OnqamtDw8zGMvXsHSQXOGiUoWMMGbDh71iS9RjDeFSsgp6bCtXw5erdsgZKZGaUTso2GIbrQ3QQQNt/vfyDI4LmTJiHY0oyX235IuHudwtTNLGUMHw7V5YLv+vVIZefMQdDrhdzbG91uNpUyFU4ZNAjq+PF9L+SUz0DG2LHwv36NtM+Ho/GXk2i/dcsRgJKejqzycgSpASp3nbdkSeRwGTAAwZFl0JqbHQGYB4vh80EmADkrq+8FF9WumPUPvHsHxaXCRU6/3ro1YRbSJ0xAT2srcubPR/rkyVGB9JJS+BhDlaQ4ACFjCmUhrzGWO28esikwPdXVSC4tQXtVFZpOnHAE0HX7tnlcFmzeHPedKzsbvmAQOntAcgQQ1n0HKyafTS4TpIcyXM8A3dQKu3WSLW/370fR9u1wia6PFSiuHWDwTvaZYmUhOhpPNSOaKhEqjRwJ7+LF6Hn2zJRccTjVUCU/HDyIljNn8H7PHlRTLVOp//kbNzo3KVnhYuBuAghYTAjT0PwksXF00tCgdIr/Y62wogIt586ZrEgqKoL28SPecbeSlTWdtS86fjxhFgMvXkBNTjZLIEBk2TKghwFolE1xqjmZizsvoLwGamogsRyi65O5Y8/gEpNGWbNnI4OnpZNpzGzvgwdQ2QcuqxT2EgTCMmyQp/6LFxN2uXf1aqSOGYMAqSZzIbGA4e81+8O7bVvC3/kuXUKQGVDS0szfyDFNGBptiEphantPn4b+9q3zSgRZQBrqjY2QmEaJB5WfOp9NzntGjUoIoO3oUZPSssX5WBa0R7ot1dSDjoqKhItlzJiBzFmz0H3/PgIsmYvy6t2wIeH7Lfv2IUCGiBLaZFiyA2iMFIu1LS1F4Px5tNoOpLiG5KJpVEyFTVV45AiU/v2ddeHqVbTs2gW3mI6iJyPVzoK62IFE/MDHDu+mcHy2dm18QxYXo4SSrHd0QGYzOgavrETDypVQc3LMA8mwZgKRA+rAB3sGrkcTVodOyc3gONVJELU84fxiLnQaxRyC66RxMxvyw7Jl5vdKXl5f8DDlGPiOuVdxM+LFRMwDrfGiKMMgmHqOZgqPYFPfWftk0WxS/L0kwGYUKfedOoVeUtnFDUgO86DQgVRFmZNz82ZlGIB4Tq3FpqjzXaSagbrozRQfcPIV6XQPG4Yk9onKrhYiJARIUMxPoJqgJ98RuzZrHnNH0EJrPkuT5aEZvBnZAQirsi4OsLeqTACt7AVxkiuclnTeA8xBU9BQHCykpsxLiUw2mJcTi9JO9zYKVkeaopSxBHUZDlezL637wWp7FszZTqiXuJTwvBAdLwl3HIuiAxu2NdySVOWR5WUiuJ7gaibsW7qYRr+yRuchmmHkuWVZETfTHnGS/bN51CDANmavlgEfcAa4SAC/9el+OMOf+nr+pwADAAZ5culxNH/mAAAAAElFTkSuQmCC"},{"title":"WikiPedia","url":"https://www.wikipedia.org","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfhBAwKMAfiL115AAACxklEQVRIx6WVX2jVZRjHP7/T8c9pg2nhv2yDXWg4gqGsQGci68J/FRhq4IUohISpiQpeRoi48DJML0yCukpEiV0oIuaIqTSmUtREFCdhjTTFnTPP9Jz308X57efZ2aJ19vyu3ud9ns/zfX/P+ycKANN4mxZ2MH77gm7O8wgIhEzoClbxdYVMgDA3XKwq3WC4GOamaGHZ/5A+0pbRkmJx1ekAi6PghACkyUU11aebS0OWIhleAOAZQ2QYJEMagCcEppBnKmngCTKJPLVEQI4UNaQjTnGYQWYSUeAeb/Iph7jCS6R4Ro4NtPEZfzCNPJNZSyu7GaSOAaayk/chZPP2+KGIuNc7Fu33c1Piy54ya8FeV4jLvWzWor+6VFxjjwVDlpBVzbtWrPWaw7ZVnGlvPNrpfG8lc3t81b9US4BgUM9YJx4qudVuZ4j7VP3TBR5TS5EDtnkwjisD5HxXbPBxDNBPxDpvqvtsNZcATjrPO/EoAQT1WxGPJoE91op77LPe7xNvcIXbLA5v5nLAY5vFRQ4kGraI9ba5wacJ4Lr1/jRcvxwQ1HYx8rskuMuM+KJXE49ud/Xw+kcDbtsovmUh0bBRnG5vAvjdVzz3PN2QTZVtSxpZBXTxQzyGVuAhXwIRAF8zv/LwPlcQ1J+dJG52KO7MEueIc/xF1Uc2eby8/kgFAK/zDtDBb0TAV8gxaujnGwBOIB9UnqdyBUHtdIq4S+23yQ51vTjLG+pCj4ysP/InlgBDrhIb/NuDvmdBvWBaPOBZm73/X4CgnhbxIxf5o6Vzsk58zTfcX5k+NuCBzSJ+bDFu52kz4mzvjg+gh8V6byXdH3SluLd8A/1bF0rdX0MDm2jE2JNhI9NZH89WdmHUba8FO+wrq6b3PWF+dH2DhPaxEJViHUu+wdCe5tIYd+04PLFdStFNZ9W3eifdE35co4k+7/8AeaKDkPxRJzsAAAAASUVORK5CYII="}]}')},function(e,t,a){"use strict";(function(e){var n=a(814),i=a(28),s=a(815),r=a(21),o=a(41),l=a(11),c=a(6),u=a(0),m=a.n(u),d=a(40),h=a.n(d),p=a(221),b=a(204),g=a(22),N=a(51),f=a(2),_=a(10),v=a(37),E=a(1),C=a(97),w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks\\BookmarksPanel.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=[E.kBookmarksPanelEditorHeight],T=[{text:Object(f.a)("Title"),value:"title",fullScreenTitle:Object(f.a)("Sort by Title")},{text:Object(f.a)("Address"),value:"url",fullScreenTitle:Object(f.a)("Sort by Address")},{text:Object(f.a)("Nickname"),value:"nickname",fullScreenTitle:Object(f.a)("Sort by Nickname")},{text:Object(f.a)("Description"),value:"description",fullScreenTitle:Object(f.a)("Sort by Description")},{text:Object(f.a)("Created"),value:"dateAdded",fullScreenTitle:Object(f.a)("Sort by Date Created")}];class k extends m.a.PureComponent{constructor(...t){super(...t),y(this,"refEditor",m.a.createRef()),y(this,"state",{filter:"",editorHeight:this.props.prefValues[E.kBookmarksPanelEditorHeight],failedUpgrade:!1,sorting:{sortOrder:N.a.NO_SORTING,sortField:"manually",comparator:this.sortComparator}}),y(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(C.a)(h.a.findDOMNode(this))&&this.focusTree()}),y(this,"onBookmarkStoreChange",()=>{this.setState({failedUpgrade:i.b.isFailedUpgrade()})}),y(this,"onSelect",e=>{var t;null===(t=this.refEditor.current)||void 0===t||t.setItem(e)}),y(this,"addBookmark",()=>{this.onAdd(!1)}),y(this,"addFolder",()=>{this.onAdd(!0)}),y(this,"onAdd",t=>{this.setState({filter:""}),this.state.editorHeight>0&&this.refEditor.current?this.refEditor.current._save().then(e.nextTick(()=>this._tree.onAdd(t))):(this.setEditorVisible(),this._tree.onAdd(t))}),y(this,"onCreate",e=>{e&&(this.setEditorVisible(),this.refEditor.current&&this.refEditor.current.setIsCreating(!0))}),y(this,"onEditorCanceled",(e,t)=>{t&&e?this._tree.deleteSelectedItems().then(()=>{_.a.bookmarks.remove(e),this.focusTree()}):this.focusTree()}),y(this,"setEditorVisible",()=>{const e=this.state.editorHeight<230?this.props.prefValues[E.kBookmarksPanelEditorHeight]:this.state.editorHeight;this.updateEditorVisiblityWithHeight(e,!0)}),y(this,"focusTree",()=>{var e;null===(e=this._tree.refTreeList.current)||void 0===e||e.focusTree()}),y(this,"deleteSelectedItems",()=>{this._tree.deleteSelectedItems()}),y(this,"onSortChange",(e,t)=>{const a={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:a});const n={sortOrder:e,sortField:t};l.a.set(E.kBookmarksPanelSorting,n)}),y(this,"sortComparator",(e,t)=>i.b.treeSortComparator(e,t,this.state.sorting)),y(this,"collapseAll",()=>{this._tree.collapseAllFolders()}),y(this,"expandAll",()=>{this._tree.expandAllFolders()}),y(this,"getSelectedItem",()=>this._tree.getSelectedItem()),y(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();e.nativeEvent.buttons>0&&this._tree.unSelectAll(),this._tree.onContextMenu(e,t)}),y(this,"onSearchChange",e=>{this.setState({filter:e.target.value})}),y(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,600),0)}))}),y(this,"onSlideBarStop",()=>{this.updateEditorVisiblityWithHeight(this.state.editorHeight,!0)}),y(this,"onSlidebarToggle",()=>{const e=this.state.editorHeight>v.h?0:230;this.updateEditorVisiblityWithHeight(e,!0)}),y(this,"updateEditorVisiblityWithHeight",(e,t)=>{e<v.h?e=0:e>600&&(e=600),t&&l.a.set(E.kBookmarksPanelEditorHeight,e),this.setState({editorHeight:e})})}componentDidMount(){const e=c.a.get(E.kBookmarksPanelSorting);this.onSortChange(e.sortOrder,e.sortField),o.d.addChangeListener(this.onPanelStoreChange),i.b.addChangeListener(this.onBookmarkStoreChange)}componentWillUnmount(){o.d.removeChangeListener(this.onPanelStoreChange),i.b.addChangeListener(this.onBookmarkStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this.focusTree())}render(){if(!this.props.open)return null;const e=this.props.title+(this.state.failedUpgrade?" (needs upgrade)":"");return m.a.createElement("div",{className:"panel panel-bookmarks",__source:{fileName:O,lineNumber:274,columnNumber:7}},m.a.createElement("header",{__source:{fileName:O,lineNumber:275,columnNumber:9}},m.a.createElement("h1",{__source:{fileName:O,lineNumber:276,columnNumber:11}},e),m.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:O,lineNumber:278,columnNumber:11}},m.a.createElement("input",{type:"search",placeholder:Object(f.a)("verb","Search"),value:this.state.filter,onChange:this.onSearchChange,__source:{fileName:O,lineNumber:279,columnNumber:13}}),m.a.createElement("div",{className:"toolbar",__source:{fileName:O,lineNumber:284,columnNumber:13}},m.a.createElement("div",{className:"toolbar-group",__source:{fileName:O,lineNumber:285,columnNumber:15}},m.a.createElement(g.a,{onClick:this.addBookmark,tooltip:Object(f.a)("New Bookmark"),image:w.h.small,__source:{fileName:O,lineNumber:286,columnNumber:17}}),m.a.createElement(g.a,{onClick:this.deleteSelectedItems,tooltip:Object(f.a)("other","Delete"),image:w.pd.small,__source:{fileName:O,lineNumber:291,columnNumber:17}})),m.a.createElement(g.a,{onClick:this.addFolder,tooltip:Object(f.a)("command","New Folder"),image:w.pb.small,__source:{fileName:O,lineNumber:297,columnNumber:15}})))),m.a.createElement(b.a,{fields:T,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:O,lineNumber:307,columnNumber:9}}),m.a.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:O,lineNumber:314,columnNumber:9}},m.a.createElement(s.a,{ref:e=>this._tree=e,filter:this.state.filter,fullView:!1,inManager:!1,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,__source:{fileName:O,lineNumber:316,columnNumber:11}})),m.a.createElement("section",{className:"panel-bookmarks-edit limited",style:{flexBasis:this.state.editorHeight},__source:{fileName:O,lineNumber:325,columnNumber:9}},m.a.createElement(p.a,{onStop:this.onSlideBarStop,onSlidebarPosition:this.onSlidebarPosition,onDoubleClick:this.onSlidebarToggle,returnOffset:!0,position:"bottom",__source:{fileName:O,lineNumber:327,columnNumber:11}}),this.state.editorHeight>0&&m.a.createElement(n.a,{ref:this.refEditor,updateLayout:this.setEditorVisible,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:O,lineNumber:334,columnNumber:13}})))}}t.a=Object(r.a)(k,S)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(167),i=a(1360),s=a(1402),r=a(1361),o=a(21),l=a(67),c=a(41),u=a(11),m=a(0),d=a.n(m),h=a(40),p=a.n(h),b=a(221),g=a(22),N=a(35),f=a(2),_=a(37),v=a(1),E=a(97),C=a(9),w=a(127),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactsPanel.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=[v.kContactPanelEditorHeight,v.kMailContactDefaultAction,v.kMailSingleClickTabs];class T extends d.a.PureComponent{constructor(...t){super(...t),y(this,"_tree",d.a.createRef()),y(this,"_editor",d.a.createRef()),y(this,"state",{items:w.a.getAsTree(""),filter:"",editorHeight:this.props.prefValues[v.kContactPanelEditorHeight],contact:{id:-1}}),y(this,"_applyTransitionState",()=>{const e=c.d.getTransitionState("contacts");l.a.clearTransitionState("contacts"),this._tree.current&&e?(e.selectId&&this._tree.current.selectById(e.selectId),"edit"===e.reason?this.onEdit():e.setFocus&&this.focusTree()):this.focusTree()}),y(this,"onPanelStoreChange",t=>{if(this.props.open)switch(t){case"setFocus":Object(E.a)(p.a.findDOMNode(this))||this.focusTree();break;case"display":e.nextTick(()=>this._applyTransitionState())}}),y(this,"onContactStoreChange",e=>{switch(e.reason){case"selectedContact":return this.onContactSelectedChange(e.contact,e.focusContactView);case"newContact":return this.onContactSelectedChange(e.contact,e.focusContactView,{items:w.a.getAsTree(this.state.filter)});case"startup":{var t;const e=N.a.getSync("SELECTION_CONTACT_TREE"),a=null==e?void 0:null===(t=e.selectedIds_[0])||void 0===t?void 0:t.id,n=a&&w.a.getNodeById(a)||{id:-1};this.setState(e=>({contact:n,items:w.a.getAsTree(e.filter)}));break}case"addGeneratedContacts":case"deleteContact":case"updatedContact":return this.setState(e=>({contact:w.a.getSelected()||{id:-1},items:w.a.getAsTree(e.filter)}))}}),y(this,"onContactSelectedChange",(e,t,a)=>{this.setState({...a,contact:e},()=>{t&&-1!==e.id&&(this._editor.current&&this._editor.current.enableEditMode(),this._tree.current&&this._tree.current.selectById(e.id))})}),y(this,"newItem",e=>{this._tree.current&&this._tree.current.onAdd(e)}),y(this,"onCreate",(e,t,a,i)=>(this.onEdit(),n.a.newEmptyContact())),y(this,"onEdit",()=>{this.state.editorHeight<_.h&&this.onSlidebarToggle(),(this.state.contact||w.a.getSelected())&&this._editor.current&&this._editor.current.enableEditMode()}),y(this,"deleteSelected",()=>{this._tree.current&&this._tree.current.deleteSelected()}),y(this,"handleFilterChange",e=>{const t=e.target.value;this.setState({filter:t,items:w.a.getAsTree(t)})}),y(this,"onCompose",()=>{this._tree.current&&this._tree.current.compose()}),y(this,"focusTree",()=>{var e;this._tree.current&&(null===(e=this._tree.current.refTreeList.current)||void 0===e||e.focusTree())}),y(this,"onItemSelected",e=>{if(e){if(e.id===this.state.contact.id)return;n.a.selectContact(e,!1)}else this.setState({contact:{id:-1}})}),y(this,"onContextMenu",e=>{this._tree.current&&(e.nativeEvent.buttons>0&&this._tree.current.unSelectAll(),this._tree.current.onContextMenu(e))}),y(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,800),0)}))}),y(this,"onSlideBarStop",()=>{this.setState(e=>{let t=e.editorHeight;return t<=_.h&&(t=0),u.a.set(v.kContactPanelEditorHeight,t),{editorHeight:t}})}),y(this,"onSlidebarToggle",()=>{this.setState(e=>{let t=e.editorHeight;return t>_.h?(t=0,u.a.set(v.kContactPanelEditorHeight,t)):(t=320,u.a.reset(v.kContactPanelEditorHeight)),{editorHeight:t}})})}componentDidMount(){c.d.addChangeListener(this.onPanelStoreChange),w.a.addChangeListener(this.onContactStoreChange)}componentWillUnmount(){c.d.removeChangeListener(this.onPanelStoreChange),w.a.removeChangeListener(this.onContactStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this._applyTransitionState())}render(){if(!this.props.open)return null;const e=this.state.contact&&-1!==this.state.contact.id?this.state.contact:void 0;return d.a.createElement("div",{className:"panel",id:"contacts",__source:{fileName:O,lineNumber:291,columnNumber:7}},d.a.createElement("header",{__source:{fileName:O,lineNumber:293,columnNumber:9}},d.a.createElement("h1",{__source:{fileName:O,lineNumber:294,columnNumber:11}},this.props.title),d.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:O,lineNumber:296,columnNumber:11}},d.a.createElement("input",{type:"search",placeholder:Object(f.a)("verb","Search"),value:this.state.filter,onChange:this.handleFilterChange,__source:{fileName:O,lineNumber:297,columnNumber:13}}),d.a.createElement("div",{className:"toolbar",__source:{fileName:O,lineNumber:301,columnNumber:13}},d.a.createElement("div",{className:"toolbar-group",__source:{fileName:O,lineNumber:302,columnNumber:15}},d.a.createElement(g.a,{onClick:this.newItem.bind(this,!1),tooltip:Object(f.a)("New Contact"),image:C.h.small,__source:{fileName:O,lineNumber:303,columnNumber:17}}),d.a.createElement(g.a,{onClick:this.deleteSelected,disabled:-1===this.state.contact,image:C.pd.small,tooltip:Object(f.a)("other","Delete"),__source:{fileName:O,lineNumber:308,columnNumber:17}})),d.a.createElement(g.a,{onClick:this.onCompose,tooltip:Object(f.a)("Compose mail to contact"),disabled:-1===this.state.contact,image:C.Jb.small,__source:{fileName:O,lineNumber:315,columnNumber:15}})))),d.a.createElement(i.a,{ref:this._tree,nodes:this.state.items,keyAccess:this.props.keyAccess,onCreate:this.onCreate,onEdit:this.onEdit,focusTree:this.focusTree,prefValues:this.props.prefValues,onItemSelected:this.onItemSelected,__source:{fileName:O,lineNumber:325,columnNumber:9}}),d.a.createElement("section",{className:"panel-contacts-edit outerScrollbar",style:{flexBasis:this.state.editorHeight},__source:{fileName:O,lineNumber:336,columnNumber:9}},d.a.createElement(b.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,onDoubleClick:this.onSlidebarToggle,returnOffset:!0,position:"bottom",__source:{fileName:O,lineNumber:339,columnNumber:11}}),this.state.editorHeight>0&&e?d.a.createElement(s.a,{ref:this._editor,key:e.id,contact:e,onEdit:this.onEdit,__source:{fileName:O,lineNumber:347,columnNumber:15}}):d.a.createElement(r.a,{__source:{fileName:O,lineNumber:353,columnNumber:15}})))}}t.a=Object(o.a)(T,S)}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(167),s=a(127),r=a(47),o=a(199),l=a(14),c=a(11),u=a(6),m=a(204),d=a(51),h=a(185),p=a(2),b=a(4),g=a(1),N=a(255),f=a(316),_=a(23),v="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactTree.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=[{text:Object(p.a)("other","Name"),value:"name",fullScreenTitle:Object(p.a)("Sort by Name")}];class w extends n.PureComponent{constructor(...e){super(...e),E(this,"refTreeList",n.createRef()),E(this,"state",{sorting:u.a.get(g.kContactPanelSorting)}),E(this,"onSortChange",(e,t)=>{const a={sortOrder:e,sortField:t};this.setState({sorting:a}),c.a.set(g.kContactPanelSorting,{sortOrder:e,sortField:t})}),E(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(this.isFolder(e)&&!this.isFolder(t))return-1;if(this.isFolder(t)&&!this.isFolder(e))return 1;const{sortOrder:a,sortField:n}=this.state.sorting;return d.a.getDefaultComparator(a,n)(e,t)}),E(this,"getSelectedIds",()=>{var e;return((null===(e=this.refTreeList.current)||void 0===e?void 0:e.getAllSelectedItems())||[]).map(e=>e.id)}),E(this,"getSelectedItems",()=>this.getSelectedIds().map(e=>s.a.getNodeById(e)).filter(e=>void 0!==e)),E(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),E(this,"getNodeName",e=>e.name?e.name:e.emailAddresses&&e.emailAddresses.length>0?e.emailAddresses[0].emailAddress:""),E(this,"isFolder",e=>!1),E(this,"hasChildren",e=>!!e.children&&e.children.length>0),E(this,"unSelectAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.unSelectAll()}),E(this,"deleteSelected",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.onDelete()}),E(this,"deleteByIds",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onDelete(e)}),E(this,"validateForEdit",e=>!0),E(this,"isValidAddTarget",()=>!0),E(this,"getTitle",e=>{if("string"==typeof e){const t=s.a.getNodeById(e);return t?this.getNodeName(t):""}return""}),E(this,"saveTitle",(e,t)=>{const a=s.a.getNodeById(e);void 0!==a&&(a.name=t),i.a.saveContact(a)}),E(this,"onAdd",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onAdd(e)}),E(this,"getMenuCapability",async(e,t,a)=>{switch(e.action){case"CONTEXT_COMPOSE_MAIL":return{handler:this.compose,visible:Boolean(a),...t(e,{})};case"CONTEXT_VIEW_ALL_MESSAGES":return{handler:this.viewAll,visible:Boolean(a),...t(e,{})};case"CONTEXT_CONTAINER_DEFAULT_ACTION":{const a=this.props.prefValues[g.kMailContactDefaultAction];return{items:[{type:"radio",radiogroup:1,checked:"compose"===a,handler:()=>this.setDefaultAction("compose"),...Object(b.a)("Compose")},{type:"radio",radiogroup:1,checked:"viewAllMessages"===a,handler:()=>this.setDefaultAction("viewAllMessages"),...Object(b.a)("View All Messages")}],...t(e,{})}}default:return{...t(e,{})}}}),E(this,"getMenuVisibility",(e,t)=>{if(t)switch(e.action){case"CONTEXT_NEW_ITEM":case"CONTEXT_EDIT":case"CONTEXT_DELETE":return!0;default:return!1}else switch(e.action){case"CONTEXT_NEW_ITEM":return!0;case"CONTEXT_EDIT":case"CONTEXT_DELETE":default:return!1}}),E(this,"onContextMenu",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onContextMenu(e)}),E(this,"setDefaultAction",e=>{c.a.set(g.kMailContactDefaultAction,e)}),E(this,"onDoubleClick",e=>{0!==e.button||this.props.prefValues[g.kMailSingleClickTabs]||this.openTabForSelectedNode()}),E(this,"onNodeMouseDown",(e,t)=>{this.props.focusTree(),0===t.button&&this.props.prefValues[g.kMailSingleClickTabs]&&this.openTabForSelectedNode()}),E(this,"openTabForSelectedNode",()=>{const e=this.props.prefValues[g.kMailContactDefaultAction];"compose"===e?this.compose():"viewAllMessages"===e&&this.viewAll()}),E(this,"compose",()=>{const e=this.getSelectedItems();e&&e.length>0&&o.a.createDraft({to:e.join()})}),E(this,"viewAll",()=>{const e=this.getSelectedItems();e&&e.length>0&&(i.a.selectContact(e[0]),r.a.selectContact(e[0].emailAddresses[0].emailAddress),l.a.openURL(_.p.internals.mailpage,{singleton:!0}))}),E(this,"rowComponent",e=>{const t=e.node,a=t?this.getNodeName(t):"";return n.createElement("label",{key:`contact__list__${t.id}`,tabIndex:"-1",__source:{fileName:v,lineNumber:295,columnNumber:7}},n.createElement("span",{className:"tree-row-image",__source:{fileName:v,lineNumber:298,columnNumber:9}},n.createElement("img",{src:t.avatarUrl?t.avatarUrl:N.b,alt:"",__source:{fileName:v,lineNumber:299,columnNumber:11}})),n.createElement("span",{className:"title",title:a,__source:{fileName:v,lineNumber:303,columnNumber:9}},a))}),E(this,"selectById",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.selectById(e)})}render(){const e={sortOrder:this.state.sorting.sortOrder,sortField:this.state.sorting.sortField,comparator:this.sortComparator},t={name:"contactlist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return n.createElement(n.Fragment,null,n.createElement(m.a,{fields:C,manualSorting:!1,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,compact:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:v,lineNumber:326,columnNumber:7}}),n.createElement("section",{className:"outerScrollbar",__source:{fileName:v,lineNumber:335,columnNumber:7}},n.createElement(h.a,{ref:this.refTreeList,settings:"CONTACT_TREE",rowComponent:this.rowComponent,nodes:this.props.nodes,onSelect:this.props.onItemSelected,onItemMouseDown:this.onNodeMouseDown,menu:t,onCreate:this.props.onCreate,onEdit:this.props.onEdit,onItemsActivated:this.openTabForSelectedNode,onItemDoubleClick:this.onDoubleClick,delete:i.a.deleteContactsByIds,enableDragAndDrop:!1,isFolder:this.isFolder,hasChildren:this.hasChildren,supportsInlineEdit:!1,isValidToEdit:f.a,getTitle:this.getTitle,saveTitle:this.saveTitle,isValidAddTarget:this.isValidAddTarget,sorting:e,__source:{fileName:v,lineNumber:336,columnNumber:9}})))}}t.a=w},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a.n(n),s=a(2),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactViewDisabled.jsx";function o(){return i.a.createElement("div",{className:"contact-view cardview",__source:{fileName:r,lineNumber:8,columnNumber:5}},i.a.createElement("div",{className:"contact-header",__source:{fileName:r,lineNumber:9,columnNumber:7}},i.a.createElement("span",{className:"contact-photo-picker",__source:{fileName:r,lineNumber:10,columnNumber:9}},i.a.createElement("div",{className:"contact-photo",style:{backgroundImage:"url('/resources/contact-person.png')"},__source:{fileName:r,lineNumber:11,columnNumber:11}})),i.a.createElement("input",{className:"contact-name",type:"text",placeholder:Object(s.a)("other","Name"),disabled:!0,__source:{fileName:r,lineNumber:17,columnNumber:11}})),i.a.createElement("input",{className:"contact-email",type:"email",placeholder:Object(s.a)("Email"),disabled:!0,__source:{fileName:r,lineNumber:25,columnNumber:7}}),i.a.createElement("label",{className:"contact-trusted",__source:{fileName:r,lineNumber:32,columnNumber:7}},i.a.createElement("input",{type:"checkbox",disabled:!0,__source:{fileName:r,lineNumber:33,columnNumber:9}}),i.a.createElement("span",{__source:{fileName:r,lineNumber:34,columnNumber:9}},Object(s.a)("Always allow external content in emails"))),i.a.createElement("span",{className:"spacer",__source:{fileName:r,lineNumber:36,columnNumber:7}}),i.a.createElement("input",{className:"contact-email",type:"tel",placeholder:Object(s.a)("Phone number"),disabled:!0,__source:{fileName:r,lineNumber:37,columnNumber:7}}),i.a.createElement("span",{className:"spacer",__source:{fileName:r,lineNumber:43,columnNumber:7}}),i.a.createElement("input",{className:"contact-email",type:"text",placeholder:Object(s.a)("Postal address"),disabled:!0,__source:{fileName:r,lineNumber:44,columnNumber:7}}),i.a.createElement("span",{className:"spacer",__source:{fileName:r,lineNumber:50,columnNumber:7}}),i.a.createElement("input",{className:"contact-email",type:"text",placeholder:Object(s.a)("title","Birthday"),disabled:!0,__source:{fileName:r,lineNumber:51,columnNumber:7}}),i.a.createElement("span",{className:"spacer",__source:{fileName:r,lineNumber:57,columnNumber:7}}),i.a.createElement("input",{className:"contact-postal",type:"text",placeholder:Object(s.a)("Notes"),disabled:!0,__source:{fileName:r,lineNumber:58,columnNumber:7}}))}},function(e,t,a){"use strict";(function(e){var n=a(210),i=a(1403),s=a(1363),r=a(237),o=a(1394),l=a(21),c=a(14),u=a(41),m=a(11),d=a(6),h=a(0),p=a.n(h),b=a(40),g=a.n(b),N=a(221),f=a(51),_=a(25),v=a(17),E=a(2),C=a(10),w=a(37),O=a(1),y=a(97),S=a(171),T="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanel.jsx";function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e,t){if("extension"===e)return"startTime";if(t===f.a.ASCENDING_SORT)return e;switch(e){case"bytesReceived":return"-bytesReceived";case"endTime":return"-endTime";case"filename":return"-filename";case"startTime":return"-startTime";case"url":return"-url"}return"startTime"}const I=[O.kDownloadsPanelEditorHeight];function D(e){return"complete"===e.state&&e.mime.startsWith("image/")}class M extends p.a.PureComponent{constructor(...e){super(...e),k(this,"defaultHeight",d.a.getDefault(O.kDownloadsPanelEditorHeight)),k(this,"state",{downloadItems:[],hasActiveDownloadItemsSelected:!1,hasPausedDownloadItemsSelected:!1,hasCompletedDownloadItemsSelected:!1,hasCompletedDownloadItems:!1,selectedDownloadItem:void 0,filter:"",editorHeight:d.a.get(O.kDownloadsPanelEditorHeight),...d.a.get(O.kDownloadsPanelSorting)}),k(this,"fetchDownloadItemsAndUpdateState",()=>new Promise(e=>{const t=r.a.getItems();let a;this.state.selectedDownloadItem&&(a=t.find(e=>{if(this.state.selectedDownloadItem)return e.id===this.state.selectedDownloadItem.id}),this.updateActiveProgressState());const n=t;this.setState({selectedDownloadItem:a,downloadItems:n,hasCompletedDownloadItems:t.length>0},e)})),k(this,"scrollDownloadItemIntoView",e=>{this._tree&&this._tree.scrollToId(e.id)}),k(this,"selectDownloadItem",e=>{this._tree&&this._tree.selectByNode(e)}),k(this,"onDownloadStoreChange",e=>{switch(e.reason){case"download_completed":{const{downloadItem:t}=e;return void this.onTransferFinished(t)}case"download_started":{const{downloadItem:t}=e;return void this.fetchDownloadItemsAndUpdateState().then(()=>{this.scrollDownloadItemIntoView(t),this.selectDownloadItem(t)})}case"download_panel_updated":return void this.fetchDownloadItemsAndUpdateState()}}),k(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(y.a)(g.a.findDOMNode(this))&&this.focusTree()}),k(this,"_onWindowStoreChange",()=>{this.props.open&&v.a.isActive(this.context.vivaldiWindowId)&&n.a.forceUpdate()}),k(this,"onTransferFinished",e=>{C.a.windows.getLastFocused(t=>{if(t.id!==this.context.vivaldiWindowId)return;if(!d.a.get(O.kDownloadsNotifyOnComplete))return;if(!e)return;const a=e.filename.split("\\").pop().split("/").pop();const i=Object(E.a)("Download Complete"),s=n.a.showDownload.bind(null,e.id);C.a.downloads.getFileIcon(e.id,{size:32},e=>{Object(S.a)({body:a,icon:e,title:i,onClick:s})})}),this.updateActiveProgressState()}),k(this,"getMenuState",()=>{const e=this.updateActiveProgressState();return{numAddresses:this.getNumSelectedAddresses(),numFiles:this.getNumSelectedFiles(),numImages:this.getNumSelectedImages(),hasPaused:e.hasPausedDownloadItemsSelected,hasCompleted:e.hasCompletedDownloadItemsSelected,hasActive:e.hasActiveDownloadItemsSelected}}),k(this,"getMenuCapability",async(e,t,a,n)=>{switch(e.action){case"CONTEXT_OPEN_FILE":return{handler:this.openSelected,visible:Boolean(a)&&n.hasCompleted&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN":return{visible:Boolean(a)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>{this.openSelectedInTab(!1,d.a.get(O.kTabsOpenNewInBackground))},visible:Boolean(a)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>{this.openSelectedInTab(!1,!0)},visible:Boolean(a)&&!d.a.get(O.kTabsOpenNewInBackground)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN_TAB":return{handler:()=>{this.openSelectedInTab(!0,!1)},visible:Boolean(a)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN_NEW_WINDOW":return{handler:()=>{this.openSelectedInWindow(!1)},visible:Boolean(a)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":return{handler:()=>{this.openSelectedInWindow(!0)},visible:Boolean(a)&&n.numImages>0&&n.numFiles>0,...t(e,n)};case"CONTEXT_FILEMANAGER":return{handler:()=>{this.showSelectedInFilemanager()},visible:Boolean(a)&&n.numFiles>0,...t(e,n)};case"CONTEXT_COPY_ADDRESS":return{handler:()=>{this.copySelectedAddress()},visible:Boolean(a),...t(e,n)};case"CONTEXT_COPY_PATH":return{handler:()=>{this.copySelectedPath()},visible:Boolean(a)&&n.hasCompleted&&n.numFiles>0,...t(e,n)};case"CONTEXT_RESTART":return{handler:()=>{this.restartSelected()},visible:Boolean(a)&&(n.hasCompleted||this.fileErrors()),...t(e,n)};case"CONTEXT_STOP":return{handler:()=>{this.stopSelected()},visible:Boolean(a)&&n.hasActive,...t(e,n)};case"CONTEXT_RESUME":return{handler:()=>{this.resumeSelected()},visible:Boolean(a)&&n.hasPaused,...t(e,n)};case"CONTEXT_REMOVE":return{handler:()=>{this.removeSelected()},visible:Boolean(a),...t(e,n)};case"CONTEXT_REMOVE_ALL_FINISHED":return{handler:()=>{this.removeAllFinished()},visible:Boolean(a)&&n.hasCompleted,...t(e,n)};default:return{...t(e,n)}}}),k(this,"getSelectedDownloadItems",()=>{const e=this._tree?this._tree.getSelectedNodes().map(e=>e.id):[];return this.state.downloadItems.filter(t=>-1!==e.findIndex(e=>e===t.id))}),k(this,"getNumSelectedImages",()=>this.getSelectedDownloadItems().filter(D).length),k(this,"getNumSelectedAddresses",()=>this.getSelectedDownloadItems().filter(e=>Boolean(e.url)).length),k(this,"getNumSelectedFiles",()=>{let e=0;const t=this.getSelectedDownloadItems();for(let a=0;a<t.length;a++){const n=t[a];n.exists&&!n.error&&e++}return e}),k(this,"fileErrors",()=>{const e=this.getSelectedDownloadItems().map(e=>e.error);if(e.length)return!e.includes(void 0)}),k(this,"getActiveProgressStateForSelectedDownloadItems",()=>{const e=this.getSelectedDownloadItems(),t=this.state.downloadItems;let a=!1,n=!1,i=!1,s=!1;for(let t=0;t<e.length;t++){const r=e[t];if("in_progress"===r.state?r.paused?n=!0:a=!0:"complete"===r.state&&(i=s=!0),a&&n&&i)break}return s=s||!!t.find(e=>"complete"===e.state),{hasActiveDownloadItemsSelected:a,hasPausedDownloadItemsSelected:n,hasCompletedDownloadItemsSelected:i,hasCompletedDownloadItems:s}}),k(this,"updateActiveProgressState",()=>{const e=this.getActiveProgressStateForSelectedDownloadItems();return this.setState(e),e}),k(this,"canResumeSelected",()=>{const e=this.getSelectedDownloadItems();if(1===e.length){return e[0].canResume}return!1}),k(this,"stopSelected",()=>{this.getSelectedDownloadItems().filter(e=>!e.paused).forEach(({id:e})=>n.a.pauseDownload(e))}),k(this,"resumeSelected",()=>{this.getSelectedDownloadItems().filter(e=>e.canResume).forEach(({id:e})=>n.a.resumeDownload(e))}),k(this,"restartSelected",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>n.a.restartDownload(e))}),k(this,"showSelectedInFilemanager",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>n.a.showDownload(e))}),k(this,"onSortChange",(e,t)=>{m.a.set(O.kDownloadsPanelSorting,{sortOrder:e,sortField:t}),this.setState({sortField:t,sortOrder:e},()=>{const a=A(t,e);n.a.setOrderBy(a)})}),k(this,"openSelected",()=>{this.getSelectedDownloadItems().forEach(e=>{"complete"===e.state&&n.a.openDownload(e.id)})}),k(this,"openSelectedInTab",(e,t)=>{const a=this.getSelectedDownloadItems().filter(e=>"complete"===e.state&&e.mime.startsWith("image/")).map(e=>"file://"+e.filename);if(a.length>0){const n=a[a.length-1];a.forEach(a=>{const i={inCurrent:e,inBackground:t};!1===t&&(i.inBackground=a!==n),c.a.openURL(a,i),e=!1})}}),k(this,"openSelectedInWindow",e=>{const t=this.getSelectedDownloadItems().filter(e=>"complete"===e.state&&e.mime.startsWith("image/")).map(e=>"file://"+e.filename),a={inNewWindow:!0,incognito:e};t.forEach(e=>{c.a.openURL(e,a)})}),k(this,"onSelected",e=>{this.setState({selectedDownloadItem:e},()=>{n.a.forceUpdate(),this.updateActiveProgressState()})}),k(this,"removeAllFinished",()=>{this.state.downloadItems.filter(e=>"complete"===e.state).forEach(({id:e})=>n.a.eraseDownload(e))}),k(this,"removeSelected",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>n.a.eraseDownload(e))}),k(this,"copySelectedAddress",()=>{const e=this.getSelectedDownloadItems().map(e=>e.url);0!==e.length&&navigator.clipboard.writeText(e.join("\n"))}),k(this,"copySelectedPath",()=>{const e=this.getSelectedDownloadItems().filter(e=>"complete"===e.state).map(e=>e.filename);0!==e.length&&navigator.clipboard.writeText(e.join("\n"))}),k(this,"handleFilterChange",e=>{const t=e.target.value;this.setState({filter:t},()=>n.a.setSearchFilter(t))}),k(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,180),0)}))}),k(this,"onSlideBarStop",()=>{this.setState(e=>{let t=e.editorHeight;return t<=w.h&&(t=0,m.a.set(O.kDownloadsPanelEditorHeight,t)),{editorHeight:t}})}),k(this,"onSlidebarToggle",()=>{this.setState(e=>{let t=e.editorHeight;return t>w.h?(t=0,m.a.set(O.kDownloadsPanelEditorHeight,t)):(t=180,m.a.reset(O.kDownloadsPanelEditorHeight)),{editorHeight:t}})}),k(this,"focusTree",()=>{var e;this._tree&&(null===(e=this._tree.refTreeList.current)||void 0===e||e.focusTree())}),k(this,"showSelectedDownloadItem",()=>{this.state.selectedDownloadItem&&n.a.showDownload(this.state.selectedDownloadItem.id)})}componentDidMount(){u.d.addChangeListener(this.onPanelStoreChange),r.a.addChangeListener(this.onDownloadStoreChange),n.a.setOrderBy(A(this.state.sortField,this.state.sortOrder)),n.a.setSearchFilter(this.state.filter),this.windowStoreToken=v.a.addListener(this._onWindowStoreChange),this.fetchDownloadItemsAndUpdateState()}componentDidUpdate(t,a){return a.filter!==this.state.filter?this.fetchDownloadItemsAndUpdateState():"extension"===this.state.sortField||a.sortField===this.state.sortField&&a.sortOrder===this.state.sortOrder?(a.selectedDownloadItem!==this.state.selectedDownloadItem&&this.updateActiveProgressState(),void(!t.open&&this.props.open&&e.nextTick(()=>{this.focusTree(),this._tree&&0===this._tree.getSelectedNodes().length&&this._tree.selectByIndex(0)}))):this.fetchDownloadItemsAndUpdateState()}componentWillUnmount(){r.a.removeChangeListener(this.onDownloadStoreChange),u.d.removeChangeListener(this.onPanelStoreChange),this.windowStoreToken.remove()}render(){if(!this.props.open)return null;const e=this.canResumeSelected(),t={name:"downloadlist",getState:this.getMenuState,getCapability:this.getMenuCapability,getVisibility:()=>!1};return p.a.createElement("div",{className:"panel",id:"downloads",__source:{fileName:T,lineNumber:679,columnNumber:7}},p.a.createElement(s.a,{title:this.props.title,filter:this.state.filter,onFilterChange:this.handleFilterChange,keyAccess:this.props.keyAccess,canResumeDownload:e,onDownloadResume:this.resumeSelected,hasPausedTransfersSelected:this.state.hasPausedDownloadItemsSelected,hasActiveTransfersSelected:this.state.hasActiveDownloadItemsSelected,hasCompletedTransfersSelected:this.state.hasCompletedDownloadItemsSelected,hasCompletedTransfers:this.state.hasCompletedDownloadItems,onStopSelectedDownload:this.stopSelected,onRestartSelectedDownload:this.restartSelected,downloadItem:this.state.selectedDownloadItem?this.state.selectedDownloadItem:void 0,onRemoveSelected:this.removeSelected,onRemoveAllFinished:this.removeAllFinished,__source:{fileName:T,lineNumber:680,columnNumber:9}}),p.a.createElement(o.a,{ref:e=>this._tree=e,keyAccess:this.props.keyAccess,menu:t,nodes:this.state.downloadItems,onSelected:this.onSelected,onSortChange:this.onSortChange,sortField:this.state.sortField,sortOrder:this.state.sortOrder,onErase:n.a.eraseDownload,onResume:n.a.resumeDownload,onPause:n.a.pauseDownload,onShow:n.a.showDownload,onOpen:n.a.openDownload,__source:{fileName:T,lineNumber:701,columnNumber:9}}),p.a.createElement("section",{className:"download-editor",style:{flexBasis:this.state.editorHeight},__source:{fileName:T,lineNumber:717,columnNumber:9}},p.a.createElement(N.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,onDoubleClick:this.onSlidebarToggle,position:"bottom",returnOffset:!0,__source:{fileName:T,lineNumber:719,columnNumber:11}}),this.state.editorHeight>0&&p.a.createElement(i.a,{downloadItem:this.state.selectedDownloadItem?this.state.selectedDownloadItem:void 0,keyAccess:this.props.keyAccess,onShow:this.showSelectedDownloadItem,__source:{fileName:T,lineNumber:728,columnNumber:13}})))}}k(M,"contextType",_.a),t.a=Object(l.a)(M,I)}).call(this,a(82))},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),s=a(22),r=a(2),o=a(9),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanelHeader.jsx";function c({downloadItem:e,canResumeDownload:t,filter:a,hasActiveTransfersSelected:n,hasCompletedTransfers:c,hasCompletedTransfersSelected:u,hasPausedTransfersSelected:m,keyAccess:d,onDownloadResume:h,onFilterChange:p,onRemoveAllFinished:b,onRemoveSelected:g,onRestartSelectedDownload:N,onStopSelectedDownload:f,title:_}){return i.a.createElement("header",{__source:{fileName:l,lineNumber:54,columnNumber:5}},i.a.createElement("h1",{__source:{fileName:l,lineNumber:55,columnNumber:7}},_),i.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium toolbar-wrap",__source:{fileName:l,lineNumber:56,columnNumber:7}},i.a.createElement("input",{type:"search",placeholder:Object(r.a)("verb","Search"),value:a,onChange:p,__source:{fileName:l,lineNumber:57,columnNumber:9}}),i.a.createElement("div",{className:"toolbar",__source:{fileName:l,lineNumber:62,columnNumber:9}},i.a.createElement("div",{className:"toolbar-group",__source:{fileName:l,lineNumber:63,columnNumber:11}},m||t?i.a.createElement(s.a,{tooltip:Object(r.a)("Resume Download"),onClick:h,image:o.rd.small,__source:{fileName:l,lineNumber:65,columnNumber:15}}):i.a.createElement(s.a,{tooltip:Object(r.a)("verb","Pause"),onClick:f,disabled:!n,image:o.Ec.small,__source:{fileName:l,lineNumber:71,columnNumber:15}}),i.a.createElement(s.a,{tooltip:Object(r.a)("command","Restart"),disabled:!e,onClick:N,image:o.qd.small,__source:{fileName:l,lineNumber:79,columnNumber:13}}),i.a.createElement(s.a,{tooltip:Object(r.a)("verb","Remove"),disabled:!(u||m||e&&"interrupted"===e.state),onClick:g,image:o.pd.small,__source:{fileName:l,lineNumber:85,columnNumber:13}}),i.a.createElement(s.a,{tooltip:Object(r.a)("Remove all finished"),disabled:!c,onClick:b,image:o.V.small,__source:{fileName:l,lineNumber:97,columnNumber:13}})))))}},function(e,t,a){"use strict";var n=a(21),i=a(29),s=a(0),r=a.n(s),o=a(838),l=a(126),c=a(1),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanelCategory.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=[c.kMailCountersPanelUnseenEnabled];class h extends r.a.Component{constructor(...e){super(...e),m(this,"_isMounted",!1),m(this,"state",{unseen:0,unread:0,total:0}),m(this,"_updateCounters",(e=this.props)=>{const{accountId:t,path:a}=e;if(this._isMounted){const e=i.a.getCounters(t,a);this.setStateIfNeeded({unread:e&&e.unread||0,unseen:e&&e.unseen||0,total:e&&e.total||0})}}),m(this,"setStateIfNeeded",e=>{Object.getOwnPropertyNames(e).some(t=>e[t]!==this.state[t])&&this.setState(e)}),m(this,"onCountersChanged",e=>{"counters"===e.target&&this._updateCounters()})}componentDidMount(){this._isMounted=!0,this._updateCounters(),i.a.addChangeListener(this.onCountersChanged)}componentWillUnmount(){i.a.removeChangeListener(this.onCountersChanged)}render(){const e=this.state.unseen>0&&this.props.prefValues[c.kMailCountersPanelUnseenEnabled],{unseen:t,unread:n,total:i}=this.state,s=this.props.label+" "+Object(o.a)({unseen:t,unread:n,total:i});return r.a.createElement("div",{className:"mail-panel-category-container",__source:{fileName:u,lineNumber:90,columnNumber:7}},r.a.createElement("label",{className:"mail-panel-category"+(this.props.hasChildren?"":" empty"),title:s,__source:{fileName:u,lineNumber:91,columnNumber:9}},r.a.createElement("span",{onClick:this.props.onClick,className:"title",__source:{fileName:u,lineNumber:98,columnNumber:11}},this.props.label),!this.props.isExpanded&&r.a.createElement("div",{className:"counter-container",__source:{fileName:u,lineNumber:104,columnNumber:13}},e&&r.a.createElement("span",{className:"item-count counter-unseen",__source:{fileName:u,lineNumber:107,columnNumber:17}},this.state.unseen),this.state.unread>0&&r.a.createElement("span",{className:"item-count counter-unread",__source:{fileName:u,lineNumber:113,columnNumber:17}},this.state.unread)),this.props.hasChildren&&r.a.createElement("span",{className:"expand-icon display-hint",onMouseDown:l.a,onMouseUp:()=>this.props.handleExpand(this.props.id),dangerouslySetInnerHTML:{__html:a(447)},__source:{fileName:u,lineNumber:122,columnNumber:13}})))}}t.a=Object(n.a)(h,d)},function(e,t,a){"use strict";(function(e){var n=a(21),i=a(151),s=a(89),r=a(1404),o=a(833),l=a(834),c=a(13),u=a(67),m=a(41),d=a(11),h=a(6),p=a(0),b=a.n(p),g=a(40),N=a.n(g),f=a(221),_=a(204),v=a(835),E=a(51),C=a(25),w=a(17),O=a(2),y=a(7),S=a(37),T=a(1),k=a(97),A=a(360),I=a(23),D="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanel.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=[T.kKeyboardTabToAll,T.kNotesPanelEditorHeight,T.kNotesPanelShowMarkdown],x=[{text:Object(O.a)("Title"),value:"title",fullScreenTitle:Object(O.a)("Sort by Title")},{text:Object(O.a)("Address"),value:"url",fullScreenTitle:Object(O.a)("Sort by Address")},{text:Object(O.a)("Content"),value:"content",fullScreenTitle:Object(O.a)("Sort by Content")},{text:Object(O.a)("Created"),value:"dateAdded",fullScreenTitle:Object(O.a)("Sort by Date Created")}];async function L(e){const{url:t}=c.c.unsafeGetActivePage();if(function(e){const{id:t}=c.c.unsafeGetActivePage();return new Promise(a=>{y.a.utilities.getSelectedText(t,t=>{a(t===e)})})}(e))return t}class j extends b.a.PureComponent{constructor(t){super(t),M(this,"_editor",null),M(this,"_tree",null),M(this,"cancelableId",""),M(this,"selectableId",""),M(this,"canDrop",!1),M(this,"refToolbar",b.a.createRef()),M(this,"_onPageStoreChange",()=>{const e=c.c.unsafeGetActivePage(),t=e?e.url:"";this.setState({activePageUrl:t})}),M(this,"_onStoreChange",(t,a)=>{if("added"===t){if(!this.panelShouldHaveFocus())return;let t="";const n=s.b.getNodeById(a);n&&!s.b.isSeparator(n)&&(this.cancelableId=t=a),e.nextTick(()=>{this.props.open&&w.a.isActive(this.context.vivaldiWindowId)&&this._tree&&(this.cancelableId=t,this._tree.selectById(a))})}const n=this.state.selectedNote&&this.state.selectedNote.id===a;if("changed"===t&&n){const e=s.b.getNodeById(a);return void this.setState({selectedNote:e})}const i=s.b.hasNotes();!i&&this.state.hasNotes&&(this.setState({selectedNote:void 0}),this.focusSearch()),this.setState({hasNotes:i})}),M(this,"panelShouldHaveFocus",()=>{var e,t;const{document:a}=this.context,n=(null===(e=c.c.getActivePage())||void 0===e?void 0:e.url)||"";return Boolean(null===(t=a.getElementById("panels-container"))||void 0===t?void 0:t.contains(a.activeElement))||!I.p.matchInternal("notes",n)}),M(this,"onDragEnterPanelButton",e=>{const t={};return t.support=e.dataTransfer.types.some(e=>"text/plain"===e),t.copy=t.support,t.onButton=t.support,t}),M(this,"onDropPanelButton",e=>{const t=e.dataTransfer.getData("text/plain");L(t).then(e=>{e?i.a.createNote({content:t,url:e}):i.a.createNote({content:t})})}),M(this,"_applyTransitionState",()=>{const e=m.d.getTransitionState("notes");u.a.clearTransitionState("notes"),this._tree&&e?(e.selectId&&this._tree.selectById(e.selectId),e.setFocus&&this.focusTree()):this._tree&&!0===this.state.hasNotes?this.focusTree():this.focusSearch()}),M(this,"_onPanelStoreChange",t=>{if(this.props.open)switch(t){case"setFocus":Object(k.a)(N.a.findDOMNode(this))||this.focusTree();break;case"display":e.nextTick(()=>this._applyTransitionState())}}),M(this,"onItemCreated",()=>{const e=this.getSelectedItem();this.selectableId=e?e.id:""}),M(this,"onItemSelected",e=>{e?(this.cancelableId!==e.id&&(this.cancelableId=""),this.setState({selectedNote:e},()=>{const e=document.activeElement;this.cancelableId&&this._editor&&e&&"NotesManager-Editor"!==e.className&&this._editor.focusPrimaryInput()})):this.setState({selectedNote:void 0})}),M(this,"unSelectAll",()=>{this._tree&&this._tree.unSelectAll(),this.setState({selectedNote:void 0})}),M(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{...a.sorting,sortOrder:e,sortField:t}})),d.a.set(T.kNotesPanelSorting,{sortOrder:e,sortField:t})}),M(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(s.b.isFolder(e)&&!s.b.isFolder(t))return-1;if(s.b.isFolder(t)&&!s.b.isFolder(e))return 1;const{sortOrder:a,sortField:n}=this.state.sorting;return"title"===n?this.sortByTitle(e,t,a):E.a.getDefaultComparator(a,n)(e,t)}),M(this,"sortByTitle",(e,t,a)=>{if(a<=E.a.NO_SORTING)return 0;const n=e.title||Object(A.b)(e),i=t.title||Object(A.b)(t);return n||i?n?i?a===E.a.ASCENDING_SORT?n.toLowerCase().localeCompare(i.toLowerCase()):i.toLowerCase().localeCompare(n.toLowerCase()):a===E.a.ASCENDING_SORT?-1:1:a===E.a.ASCENDING_SORT?1:-1:0}),M(this,"getSelectedItem",()=>this._tree&&this._tree.getSelectedItem()),M(this,"onAddNote",()=>{this.props.prefValues[T.kNotesPanelShowMarkdown]&&this.toggleMarkdown(),0===this.state.editorHeight&&this.resizeToDefault(),this.setState({filter:""}),this._tree?this._tree.onAddNote():i.a.createNote({})}),M(this,"onAddFolder",()=>{this.setState({filter:""}),this._tree&&this._tree.onAddFolder()}),M(this,"deleteSelectedItems",()=>{this._tree&&this._tree.deleteSelectedItems()}),M(this,"handleFilterChange",e=>{this.setState({filter:e})}),M(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,900),0)}))}),M(this,"onSlidebarStop",()=>{this.setState(e=>{let t=e.editorHeight;return t<=S.h&&(t=0),d.a.set(T.kNotesPanelEditorHeight,t),{editorHeight:t}})}),M(this,"toggleMarkdown",()=>{d.a.toggle(T.kNotesPanelShowMarkdown,!0,!1)}),M(this,"resizeToDefault",()=>{this.setState(e=>{let t=e.editorHeight;return t>S.h?(t=0,d.a.set(T.kNotesPanelEditorHeight,t)):(t=300,d.a.reset(T.kNotesPanelEditorHeight)),{editorHeight:t}})}),M(this,"focusSearch",()=>{this.refToolbar.current&&this.refToolbar.current.focusSearch()}),M(this,"focusTree",()=>{var e;this._tree&&(null===(e=this._tree.refTreeList.current)||void 0===e||e.focusTree())}),M(this,"onContextMenu",e=>{var t;e.nativeEvent.buttons>0&&this.unSelectAll(),null===(t=this._tree)||void 0===t||t.onContextMenu(e)}),M(this,"onDragEnter",e=>{this.canDrop=-1!==e.dataTransfer.types.findIndex(e=>"text/plain"===e),e.preventDefault(),e.stopPropagation()}),M(this,"onDragOver",e=>{!0===this.canDrop&&(e.nativeEvent.dataTransfer.dropEffect="copy"),e.preventDefault(),e.stopPropagation()}),M(this,"onDrop",e=>{if(!0===this.canDrop){const t=e.dataTransfer.getData("text/plain");t.length>0&&this._tree&&this._tree.onAddNote({content:t})}e.preventDefault(),e.stopPropagation()}),M(this,"_onKeyDown",e=>{switch(e.key){case"Escape":return this.focusTree(),e.stopPropagation(),void e.preventDefault()}});const a=h.a.get(T.kNotesPanelSorting),n=c.c.unsafeGetActivePage(),r=n?n.url:"";this.state={hasNotes:s.b.hasNotes(),selectedNote:void 0,filter:"",editorHeight:this.props.prefValues[T.kNotesPanelEditorHeight],activePageUrl:r,sorting:{sortOrder:a.sortOrder,sortField:a.sortField,comparator:this.sortComparator}}}componentDidMount(){s.b.addChangeListener(this._onStoreChange),m.d.addChangeListener(this._onPanelStoreChange),c.c.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){s.b.removeChangeListener(this._onStoreChange),m.d.removeChangeListener(this._onPanelStoreChange),c.c.removeChangeListener(this._onPageStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this._applyTransitionState())}render(){if(!this.props.open)return null;const e=this.state.editorHeight>0,t=Boolean(!this.state.selectedNote||this.state.selectedNote&&this.state.selectedNote.trash);return b.a.createElement("div",{className:"panel",id:"notes-panel",__source:{fileName:D,lineNumber:516,columnNumber:5}},b.a.createElement("header",{__source:{fileName:D,lineNumber:518,columnNumber:7}},b.a.createElement("h1",{__source:{fileName:D,lineNumber:519,columnNumber:9}},this.props.title),b.a.createElement(v.a,{ref:this.refToolbar,filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onDeleteSelectedItems:this.deleteSelectedItems,onAddFolder:this.onAddFolder,isDeleteDisabled:t,__source:{fileName:D,lineNumber:520,columnNumber:9}})),!0===this.state.hasNotes&&b.a.createElement(_.a,{fields:x,onSortChange:this.onSortChange,keyAccess:this.props.prefValues[T.kKeyboardTabToAll],sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:D,lineNumber:532,columnNumber:9}}),b.a.createElement("section",{className:"outerScrollbar",onClick:this.unSelectAll,onContextMenu:!0===this.state.hasNotes?this.onContextMenu:null,__source:{fileName:D,lineNumber:540,columnNumber:7}},!1===this.state.hasNotes&&b.a.createElement("div",{className:"no-notes",onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:D,lineNumber:547,columnNumber:11}},b.a.createElement(l.a,{onAddNote:this.onAddNote,__source:{fileName:D,lineNumber:551,columnNumber:13}})),b.a.createElement(o.a,{ref:e=>this._tree=e||null,settings:"NOTES_TREE",filter:this.state.filter,sorting:this.state.sorting,onCreated:this.onItemCreated,onItemSelected:this.onItemSelected,__source:{fileName:D,lineNumber:554,columnNumber:9}})),b.a.createElement("div",{className:"notes-editor",onDragEnter:!0===this.state.hasNotes?null:this.onDragEnter,onDragOver:!0===this.state.hasNotes?null:this.onDragOver,onDrop:!0===this.state.hasNotes?null:this.onDrop,style:{height:this.state.editorHeight},__source:{fileName:D,lineNumber:564,columnNumber:9}},b.a.createElement(f.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.resizeToDefault,returnOffset:!0,position:"bottom",__source:{fileName:D,lineNumber:570,columnNumber:9}}),e&&b.a.createElement(r.a,{ref:e=>this._editor=e,key:this.state.selectedNote?this.state.selectedNote.id:-1,note:this.state.selectedNote,onAdd:this.onAddNote,onOpenDialog:this.props.onOpenDialog,toggleMarkdown:this.toggleMarkdown,viewMarkdown:this.props.prefValues[T.kNotesPanelShowMarkdown],keyAccess:this.props.prefValues[T.kKeyboardTabToAll],onKeyDown:this._onKeyDown,__source:{fileName:D,lineNumber:579,columnNumber:11}})))}}M(j,"contextType",C.a),t.a=Object(n.a)(j,P)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(21),i=a(162),s=a(14),r=a(41),o=a(11),l=a(0),c=a.n(l),u=a(40),m=a.n(u),d=a(204),h=a(22),p=a(51),b=a(17),g=a(1367),N=a(2),f=a(1),_=a(97),v=a(9),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowPanel.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=[{text:"",value:"title",fullScreenTitle:Object(N.a)("Sort by Title")},{text:"",value:"hostname",fullScreenTitle:Object(N.a)("Sort by Host")},{text:"",value:"domain",fullScreenTitle:Object(N.a)("Sort by Domain")},{text:"",value:"sound",fullScreenTitle:Object(N.a)("Sort by Audio Status")}],O=[f.kKeyboardTabToAll,f.kPanelsWindowSorting];class y extends c.a.PureComponent{constructor(e){super(e),C(this,"refTree",c.a.createRef()),C(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(_.a)(m.a.findDOMNode(this))&&this.focusTree()}),C(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{sortOrder:e,sortField:t,comparator:a.sorting.comparator}})),o.a.set(f.kPanelsWindowSorting,{sortOrder:e,sortField:t})}),C(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if("pinned"===e.type)return-1;if("pinned"===t.type)return 1;if("stack"===e.type&&"stack"!==t.type)return-1;if("stack"===t.type&&"stack"!==e.type)return 1;const{sortOrder:a,sortField:n}=this.state.sorting;return"sound"===n?this.sortForSound(e,t,a):p.a.getDefaultComparator(a,n)(e,t)}),C(this,"sortForSound",(e,t,a)=>{if(a<=p.a.NO_SORTING)return 0;let n="";if(e.page){const{page:t}=e;t.discarded||(i.a.hasMediaState(t.id,"playing")||i.a.hasMediaState(t.id,"muting"))&&(n="playing")}let s="";if(t.page){const{page:e}=t;e.discarded||(i.a.hasMediaState(e.id,"playing")||i.a.hasMediaState(e.id,"muting"))&&(s="playing")}if("playing"===n)return-1;if("playing"===s)return 1;return p.a.getDefaultComparator(a,"title")(e,t)}),C(this,"focusTree",()=>{var e;null===(e=this.refTree.current)||void 0===e||e.focusTree()}),C(this,"handleFilterChange",e=>{const t=e.target.value;this.setState({filter:t})}),C(this,"onContextMenu",e=>{var t;null===(t=this.refTree.current)||void 0===t||t.onContextMenu(e)}),C(this,"onAddTab",e=>{var t;null===(t=this.refTree.current)||void 0===t||t.newTab()}),C(this,"onAddWindow",e=>{b.a.isGuestSession()?s.a.openIncognitoWindow():s.a.openWindow()});const t=this.props.prefValues[f.kPanelsWindowSorting];this.state={filter:"",sorting:{sortOrder:t.sortOrder,sortField:t.sortField,comparator:this.sortComparator}}}componentDidMount(){r.d.addChangeListener(this.onPanelStoreChange)}componentWillUnmount(){r.d.removeChangeListener(this.onPanelStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this.focusTree())}render(){if(!this.props.open)return null;const e=b.a.isGuestSession();return c.a.createElement("div",{className:"panel",id:"window-panel",__source:{fileName:E,lineNumber:223,columnNumber:5}},c.a.createElement("header",{__source:{fileName:E,lineNumber:225,columnNumber:7}},c.a.createElement("h1",{__source:{fileName:E,lineNumber:226,columnNumber:9}},this.props.title),c.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:E,lineNumber:228,columnNumber:9}},c.a.createElement("input",{ref:"refSearch",type:"search",className:"tabsearch",placeholder:Object(N.a)("verb","Search"),value:this.state.filter,onChange:this.handleFilterChange,__source:{fileName:E,lineNumber:229,columnNumber:11}}),c.a.createElement("div",{className:"toolbar-group",__source:{fileName:E,lineNumber:236,columnNumber:11}},c.a.createElement(h.a,{tooltip:Object(N.a)("command","New Tab"),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:this.onAddTab,image:v.h.small,__source:{fileName:E,lineNumber:237,columnNumber:13}}),c.a.createElement(h.a,{tooltip:Object(N.a)("action",e?"New Private Window":"New Window"),tabIndex:this.props.prefValues[f.kKeyboardTabToAll],onClick:this.onAddWindow,image:v.be.small,__source:{fileName:E,lineNumber:243,columnNumber:13}})))),c.a.createElement(d.a,{fields:w,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:E,lineNumber:255,columnNumber:7}}),c.a.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:E,lineNumber:262,columnNumber:7}},c.a.createElement(g.a,{ref:this.refTree,sorting:this.state.sorting,filter:this.state.filter,__source:{fileName:E,lineNumber:264,columnNumber:9}})))}}t.a=Object(n.a)(y,O)}).call(this,a(82))},function(e,t,a){"use strict";(function(e){var n=a(507),i=a(50),s=a(28),r=a(21),o=a(36),l=a(162),c=(a(53),a(14)),u=a(13),m=a(0),d=a.n(m),h=a(65),p=a(201),b=a(253),g=a(185),N=a(25),f=a(1368),_=a(17),v=a(2),E=a(20),C=a.n(E),w=a(74),O=a(126),y=a(439),S=a(84),T=a.n(S),k=a(26),A=a(1),I=a(398),D=a(9),M=a(169),P=a(23),x="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowTree.jsx";function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j=[A.kPanelsShowFolderBadge,A.kPanelsWindowDragToStack,A.kPanelsWindowSingleClickOpens,A.kPanelsWindowShowPinnedGroup,A.kTabsAutoMuting,A.kTabsDimHibernated,A.kTabsShowCloseButton,A.kTabsStackingMode,A.kTabsStackingNameMap,A.kTabsUnread,A.kThemeUseAnimation],R="vivaldi/x-window-item";class B extends d.a.PureComponent{constructor(...e){super(...e),L(this,"refTreeList",d.a.createRef()),L(this,"state",{nodes:[]}),L(this,"expandModel",{}),L(this,"blockPageStoreChange",!1),L(this,"lastActivePinnedId",""),L(this,"centerDownId",""),L(this,"focusTree",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.focusTree()}),L(this,"_onPageStoreChanged",()=>{!1===this.blockPageStoreChange&&this._onFilterChange(this.props.filter,M.default);const e=u.c.unsafeGetActivePage();e.pinned&&(this.lastActivePinnedId=e.id.toString())}),L(this,"_onTrashStoreChanged",()=>{this._onFilterChange(this.props.filter,M.default)}),L(this,"_getFavicon",e=>P.p.getFavicon(e.url||"",e.favIconUrl||"")),L(this,"_getNodes",(e=!1)=>{e||(e="off"===this.props.prefValues[A.kTabsStackingMode]);const t=function(e){return e&&e.startsWith("www.")?e.substring(4):e};let a=0,n=u.c.getTabs(this.context.vivaldiWindowId,e).toArray(),i=[];if(this.props.prefValues[A.kPanelsWindowShowPinnedGroup]){const e=n.filter(e=>"tab"===e.type&&e.page.pinned);n=n.filter(e=>!(e.page&&e.page.pinned)),i=[{id:"pinned",type:"pinned_group",parentId:"window1",title:Object(v.a)("title","Pinned Tabs"),index:0,pageIndex:a,children:e.map((e,n)=>{const i=T.a.parse(e.page.url).hostname;return{id:e.id,type:"tab",parentId:"pinned",title:P.p.getDisplayTitle(e.page),url:e.page.url,hostname:i,domain:t(i),faviconUrl:this._getFavicon(e.page),useDefaultIcon:u.c.useDefaultIcon(e.page),active:u.c.isActivePage(parseInt(e.id)),page:e.page,index:n,pageIndex:a++}})}]}const s=n.map((e,n)=>{if("tab"===e.type){const s=T.a.parse(e.page.url).hostname;return{id:e.id,type:"tab",parentId:"window1",title:P.p.getDisplayTitle(e.page),url:e.page.url,hostname:s,domain:t(s),faviconUrl:this._getFavicon(e.page),useDefaultIcon:u.c.useDefaultIcon(e.page),active:u.c.isActivePage(parseInt(e.id)),page:e.page,index:n+(i.length>0?1:0),pageIndex:a++}}if("group"===e.type)return{id:e.id,type:"stack",parentId:"window1",title:this.props.prefValues[A.kTabsStackingNameMap][e.id]||e.page.title,index:n+(i.length>0?1:0),page:e.page,pageIndex:a,children:e.pages.toArray().map((n,i)=>{const s=n.id,r=T.a.parse(n.url).hostname;return{id:s,type:"tab",parentId:e.id,title:P.p.getDisplayTitle(n),url:n.url,hostname:r,domain:t(r),faviconUrl:this._getFavicon(n),useDefaultIcon:u.c.useDefaultIcon(n),active:u.c.isActivePage(s),page:n,index:i,pageIndex:a++}})}}).filter(Boolean);return{id:"root",index:0,children:[{id:"window1",type:"window",parentId:"root",title:Object(v.a)("title","Window")+" - "+P.p.getDisplayTitle(u.c.unsafeGetActivePage()),index:0,pageIndex:a,children:[...i,...s]},{id:"trash",type:"trash",parentId:"root",trash:!0,index:1,title:Object(v.a)("title","Closed Tabs"),children:b.a.getTrash().map((e,a)=>{if(e.tab){const n=e.tab,i=T.a.parse(n.url||"").hostname;return{id:n.sessionId,type:"tab",parentId:"trash",title:P.p.getDisplayTitle(n),url:n.url,hostname:i,domain:t(i),faviconUrl:this._getFavicon(n),useDefaultIcon:!1,closed:!0,tab:n,index:a}}if(e.window){const{window:n}=e,{tabs:i=[]}=n,s=n.sessionId;return{id:s,type:"window",parentId:"trash",title:Object(v.a)("Window with $1 Tab","Window with $1 Tabs",[i.length]),closed:!0,window:e.window,index:a,children:i.map((e,a)=>{const n=T.a.parse(e.url||"").hostname;return{id:e.sessionId,type:"tab",parentId:s,title:P.p.getDisplayTitle(e),url:e.url,hostname:n,domain:t(n),faviconUrl:this._getFavicon(e),useDefaultIcon:!1,closed:!0,tab:e,index:a}})}}})}]}.children}),L(this,"_getPinnedNodesById",e=>{const t=function(e,a,n){const i=e._getNodeById(a);if(i&&i.children){if(i.type===n)return i.children;for(let a=0;a<i.children.length;a++){const s=t(e,i.children[a].id,n);if(s)return s}}},a=this._getNodeById(e);var n;return a?(null===(n=a.page)||void 0===n?void 0:n.pinned)?[a]:t(this,e,"pinned")||[]:[]}),L(this,"_getFilteredTree",(e,t)=>{const a=function(e,t,a){let n=!1;return e.url&&!1!==a.url&&(n=e.url.includes(t)),n||!1===a.title||(n=e.title.toLowerCase().includes(t)),n},n=function(e,t,i,s,r){let o=!1;for(let l=0;l<e.length;l++){const c=e[l];let u=!1;if(c.children){const e={...c,children:[]};n(c.children,e.children,i,s,r)&&(t.push(e),o=!0,u=!0)}if(!u&&a(c,s,r)){const e={...c};t.push(e),c.children&&i.push(c.id),o=!0}}return o},i=[],s=[];return n(this._getNodes(),i,s,e.toLowerCase(),t),{nodes:i,collapsed:s}}),L(this,"_onFilterChange",(e,t)=>{if(e&&e.length>0){const a={url:!0,title:!0},n=this._getFilteredTree(e,a);this.setState({nodes:n.nodes},t(n.collapsed))}else this.setState({nodes:this._getNodes()},t([]))}),L(this,"getSelectedItem",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),L(this,"getSelectedItems",()=>{var e;return(null===(e=this.refTreeList.current)||void 0===e?void 0:e.getAllSelectedItems())||[]}),L(this,"unSelectAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.unSelectAll()}),L(this,"_isTrashCan",e=>e&&"trash"===e.type),L(this,"_isPinnedFolder",e=>e&&this._isFolder(e)&&Boolean("pinned"===e.id)),L(this,"_getSelectedBackgroundPages",()=>{const e=this.getSelectedItems(),t=e.filter(e=>"window"===e.type),a=u.c.unsafeGetActivePage(this.context.vivaldiWindowId);let n=[];return n=t.length>0?u.c.getPages(this.context.vivaldiWindowId).filter(e=>e!==a).toArray():e.map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.page).filter(e=>e&&e!==a),n}),L(this,"_getDiscardablePages",()=>this._getSelectedBackgroundPages().filter(e=>!e.discarded&&!e.isInspected)),L(this,"_getStackableSelectedNodes",()=>{const e=this.getSelectedItems();return 1===e.length&&"stack"===e[0].type?[]:e.filter(e=>"tab"===e.type||"stack"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(e=>e.page&&!e.page.pinned)}),L(this,"_getStackableNodesForHost",(e,t)=>!t||this._isInPinnedFolder(e)||this._isInStackFolder(e)||this._isInTrashFolder(e)?[]:this.state.nodes.filter(e=>"window"===e.type).flatMap(e=>e.children||e).filter(e=>"tab"===e.type).filter(e=>!1===Boolean(e.page.pinned)).filter(e=>e.hostname===t)),L(this,"_getTileableSelectedNodes",()=>{const e=this.getSelectedItems();if(1===e.length&&"stack"===e[0].type){const a=new Map;for(let n=0;n<e[0].children.length;n++){var t;const i=null===(t=e[0].children[n].page)||void 0===t?void 0:t.getIn(["extData","tiling","id"]);if(void 0===i){a.clear();break}a.set(i,"")}if(1===a.size)return[]}return this.filterNodesToTabs().filter(e=>void 0!==e.page&&!this._isInTrashFolder(e))}),L(this,"filterNodesToTabs",()=>this.getSelectedItems().filter(e=>"tab"===e.type||"stack"===e.type||"pinned"===e.type).flatMap(e=>e.children||e)),L(this,"_getSelectedTiledIds",()=>this.filterNodesToTabs().map(e=>e.page?e.page.getIn(["extData","tiling","id"]):"").filter(Boolean).filter((e,t,a)=>a.indexOf(e)===t)),L(this,"_getNodesWithMediaState",(e,t)=>{let a=[];return"selection"===t?a=this.getSelectedItems():"all"===t?a=this.state.nodes:"active"===t&&(a=this.state.nodes.filter(e=>e.page.active)),a.filter(e=>"window"===e.type||"tab"===e.type||"stack"===e.type||"pinned"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(t=>t.page&&l.a.hasMediaState(t.page.id,e)&&!t.page.discarded)}),L(this,"_getMuteableNodesFrom",e=>this._getNodesWithMediaState("playing",e)),L(this,"_muteOthers",e=>{if(e.page)c.a.muteAllExcept([e.page]);else{const t=e.children.map(e=>e.page).filter(Boolean);c.a.muteAllExcept(t)}}),L(this,"_getPlayableNodesFrom",(e,t)=>{let a=this._getNodesWithMediaState("muting",e);if("onlyActive"===this.props.prefValues[A.kTabsAutoMuting])a=a.filter(e=>e.page.active&&e.page===t.page);else if("prioritizeActive"===this.props.prefValues[A.kTabsAutoMuting]){const e=u.c.unsafeGetActivePage();if(l.a.hasMediaState(e.id,"playing"))return[];a.length>1&&(a=a.filter(e=>e.page===t.page))}return a}),L(this,"_isUnread",e=>!!(this.props.prefValues[A.kTabsUnread]&&e&&e.page)&&u.c.isUnread(e.page)),L(this,"_isInStackFolder",e=>{var t;return e&&("stack"===e.type||"tab"===e.type&&"stack"===(null===(t=this._getNodeById(e.parentId))||void 0===t?void 0:t.type))}),L(this,"_isInTrashFolder",e=>e&&(Boolean(e.closed)||Boolean(e.trash))),L(this,"_isInPinnedFolder",e=>e&&("pinned"===e.id||e.page&&Boolean(e.page.pinned))),L(this,"_isWithinFolder",(e,t)=>this._isFolder(e)?"on"===t||e.isExpanded&&"below"===t:void 0!==e.parentId),L(this,"_getStackFolderByNode",e=>{let t=e;return"tab"===e.type&&(t=this._getNodeById(e.parentId)),t&&"stack"===t.type?t:void 0}),L(this,"_getPageByNode",e=>"stack"===e.type?e.children.length>0?e.children[0].page:void 0:"tab"===e.type?e.page:void 0),L(this,"_getPageIdByNode",e=>{const t=this._getPageByNode(e);return null==t?void 0:t.id}),L(this,"_getNodeById",e=>{const t=a=>{for(let n=0;n<a.length;n++){let i=a[n];if(i.id===e)return i;if(i.children&&(i=t(i.children),i))return i}};return"root"===e?{id:"root",index:0,children:this.state.nodes}:t(this.state.nodes)}),L(this,"_getNodeByParentAndIndex",(e,t)=>{const a=this._getNodeById(e);return a&&a.children&&a.children.length>0?(t<0?t=0:t>=a.children.length&&(t=a.children.length-1),a.children[t]):a}),L(this,"_indexExceedsChildCount",(e,t)=>{const a=this._getNodeById(e);return Boolean(a&&t>=a.children.length)}),L(this,"_hasChildren",e=>!!e.children&&e.children.length>0),L(this,"_isFolder",e=>!!e.children),L(this,"expandAll",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAll()}),L(this,"_onNodeClick",(e,t)=>{w.a.isNoModifierPressed(e)&&e.button===w.a.kLeft&&this.props.prefValues[A.kPanelsWindowSingleClickOpens]&&this._onNodesActivated(e,[t])}),L(this,"_onNodeMouseDown",(e,t)=>{w.a.isNoModifierPressed(t)&&t.button===w.a.kCenter&&(this.centerDownId=e.id)}),L(this,"_onNodeMouseUp",(e,t)=>{w.a.isNoModifierPressed(t)&&t.button===w.a.kCenter&&this.centerDownId===e.id&&!e.page.pinned&&this._closeWithId(e.id),this.centerDownId=""}),L(this,"_onNodeDoubleClick",(e,t)=>{e.button!==w.a.kLeft||this.props.prefValues[A.kPanelsWindowSingleClickOpens]||this._onNodesActivated(e,[t])}),L(this,"_onNodesActivated",(e,t)=>{const a=t[0];if(a.closed)a.tab?p.a.undeleteTab(a.tab):a.window&&p.a.undeleteWindow(a.window);else if(a.page)c.a.activateTab(a.page.id,this.context.vivaldiWindowId);else if(this._isPinnedFolder(a)){let e=this._getNodeById(this.lastActivePinnedId);!e&&a.children&&a.children.length>0&&(e=a.children[0]),e&&c.a.activateTab(e.page.id,this.context.vivaldiWindowId)}}),L(this,"_closeByIds",e=>{let t=e.map(e=>this._getNodeById(e)).filter(Boolean);const a=t.filter(e=>"stack"===e.type),n=a.map(e=>e.children).reduce((e,t)=>e.concat(t),[]);return t=t.filter(e=>"stack"!==e.type).filter(e=>-1===n.findIndex(t=>t.id===e.id)),a.forEach(e=>{const t=this._getPageIdByNode(e);"number"==typeof t&&c.a.closeTabStack(t)}),c.a.closePage(Object(k.List)(t.map(e=>e.page))),Promise.resolve([])}),L(this,"_getPagesByIds",e=>{const t=[];return e.map(e=>this._getNodeById(e)).filter(Boolean).forEach(e=>{e.children?"window"===e.type?Array.prototype.push.apply(t,[e].filter(e=>!e.closed).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.page).filter(Boolean)):Array.prototype.push.apply(t,e.children.map(e=>e.page).filter(Boolean)):e.page&&t.push(e.page)}),t}),L(this,"_saveBookmarkByIds",e=>{0===e.length?i.a.bookmarkAllOpenPages(this.context.vivaldiWindowId,s.b.getRootNode().id):i.a.bookmarkPages(Object(k.List)(this._getPagesByIds(e)),this.context.vivaldiWindowId,!1,s.b.getRootNode().id)}),L(this,"_saveSessionByIds",e=>{if(0===e.length)o.a.showSaveSession({mode:"all"});else{const t=this._getPagesByIds(e).map(e=>e.id);t.length>0&&o.a.showSaveSession({mode:"selected",ids:t})}}),L(this,"_handleExpandClick",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.toggleSelectedExpansion(e)}),L(this,"_validateForDrag",e=>e.filter(e=>"window1"!==e&&"trash"!==e&&"pinned"!==e)),L(this,"_getDragData",(e,t)=>{const a=t.map(e=>this._getNodeById(e)).filter(Boolean);if("text/plain"===e){return a.map(e=>this._isFolder(e)?e.title:e.url).join("\r\n")}if("text/uri-list"===e){return a.filter(e=>e.url).map(e=>e.url).join("\r\n")}return""}),L(this,"_setCustomDragData",(e,t)=>{const a=t.map(e=>this._getNodeById(e)).filter(Boolean),n=a.map(e=>e.closed);n.filter(e=>!0===e).length>0&&e.setData("vivaldi/x-tab-closed",JSON.stringify(n)),a.map(e=>e.page&&e.page.pinned).filter(e=>!0===e).length>0&&e.setData("vivaldi/x-tab-pinned",JSON.stringify(n))}),L(this,"_getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!0};if(-1!==t.dataTransfer.types.findIndex(e=>"vivaldi/x-tab-closed"===e))return a.available=!this._isInTrashFolder(e),a.onto=a.available&&this._canDropOnto(e,t),a;if(-1!==t.dataTransfer.types.findIndex(e=>"vivaldi/x-tab-pinned"===e)){if(!this.props.prefValues[A.kPanelsWindowShowPinnedGroup])return a.available=e.page&&Boolean(e.page.pinned),a.onto=a.available&&this._canDropOnto(e,t),a;if(this._isInTrashFolder(e))return a}return(t.dataTransfer.types.includes("text/plain")||t.dataTransfer.types.includes("text/uri-list"))&&(t.dataTransfer.types.includes(R)?a.available=!0:a.available=!this._isInTrashFolder(e),a.onto=a.available&&this._canDropOnto(e,t)),a}),L(this,"_canDropOnto",(e,t)=>!!this._isFolder(e)||!(t.dataTransfer.types.includes(R)&&(!this.props.prefValues[A.kPanelsWindowDragToStack]||this._isInPinnedFolder(e)||this._isInStackFolder(e)))&&!this._isInTrashFolder(e)),L(this,"_getDropIndexByNode",(e,t)=>{let a=0;const n=u.c.getTabs(this.context.vivaldiWindowId,!0).toArray();if(e.page)a=n.findIndex(t=>t.page.id===e.page.id),"below"===t&&(a+=1);else if(this._isFolder(e)&&e.children.length>0){if("above"===t||"below"===t){const t=e.children[0];t.page&&(a=n.findIndex(e=>e.page.id===t.page.id))}"below"===t&&(a+=1)}return a}),L(this,"_onDrop",(e,t,a)=>{const n=e.dataTransfer.getData("text/uri-list").split("\n").map(e=>e);if(n.length>0)if("on"!==a||this._isFolder(t)){const e=this._getTargetSpec(t,a),i=this._getDropIndexByNode(t,a),s=this._getStackFolderByNode(t);c.a.newTab(this.context.vivaldiWindowId,n[0],i).then(n=>{var i;const r=u.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===n);if(this._isWithinFolder(t,a))if(this._isInPinnedFolder(t))r&&c.a.setPinned(k.List.of(r),!0),r&&c.a.moveToIndex(r,e.pageIndex);else if(this._isInStackFolder(t)){const a=this._getPageByNode(t);if(a&&s){const t=s.children.map(e=>e.page);t.splice(e.index,0,r),c.a.createTabStack(Object(k.List)(t),Number(s.pageIndex),a.getIn(["extData","group"]))}}null===(i=this.refTreeList.current)||void 0===i||i.selectById(n.toString())}).catch(e=>{console.warn(e)})}else c.a.openURL(n[0],{inCurrent:!0,inSpecificPageId:t.page.id});return Promise.resolve([])}),L(this,"_onMove",(e,t,a,n)=>{const i=this._getNodeById(t);if(!i)return Promise.resolve([]);"stack"===i.type&&"on"===n&&(n="below",a=i.children.length);let s=this._getNodeByParentAndIndex(t,a);if(!s)return Promise.resolve([]);if("trash"===s.type&&"above"===n){const e=this._getNodeById("window1");if(!e)return Promise.resolve([]);(a=e.children.length)>0&&(s=e.children[a-1])}const r=e.map(e=>this._getNodeById(e)).filter(Boolean).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>this._getPageByNode(e)).filter(Boolean),o=e.filter(e=>u.c.isGroup(e,this.context.vivaldiWindowId)),l=this._indexExceedsChildCount(t,a);let m=this._getPageByNode(s);if(!m)if(this._isInPinnedFolder(i)){const e=u.c.getTabs(this.context.vivaldiWindowId,!1).toArray().filter(e=>e.page.pinned);m=e.length>0?e[0].page:null}else{const e=u.c.getTabs(this.context.vivaldiWindowId,!1).toArray().filter(e=>!e.page.pinned);m=e.length>0?e[0].page:null}const d=this._getNodeById(e[0]);if(!d)return Promise.resolve([]);if(this._isInTrashFolder(s))return this._closeByIds(e),Promise.resolve([]);if(d.closed){return e.map(e=>this._getNodeById(e)).filter(Boolean).filter(e=>e.closed).forEach(e=>{e.tab?p.a.undeleteTab(e.tab):e.window&&p.a.undeleteWindow(e.window)}),Promise.resolve([])}const h=m?m.getIn(["extData","group"]):"";if("stack"===i.type&&u.c.isGroup(h,this.context.vivaldiWindowId))c.a.treeMove({pages:r,groups:o,targetPage:m,after:l,area:"stack",group:h,windowId:this.context.vivaldiWindowId});else if(this.props.prefValues[A.kPanelsWindowShowPinnedGroup]&&this._isInPinnedFolder(i))c.a.treeMove({pages:r,groups:o,targetPage:m,after:l,area:"pinned",windowId:this.context.vivaldiWindowId});else if("on"===n&&this.props.prefValues[A.kPanelsWindowDragToStack]){if(m){var b;const e=m.id,t=r.filter(t=>t.id!==e);let a=m.index,n=0;for(let e=0;e<t.length;e++){a>t[e].index&&n++}a-=n,t.splice(0,0,m);const i=u.c.getNewGroupId();c.a.createTabStack(Object(k.List)(t),a,i),null===(b=this.refTreeList.current)||void 0===b||b.selectById(i)}}else c.a.treeMove({pages:r,groups:o,targetPage:m,after:l,area:"regular",windowId:this.context.vivaldiWindowId});return Promise.resolve([])}),L(this,"_onCopy",(e,t)=>{const a=e.clipboardData;if(a){const e=t.map(e=>this._getNodeById(e)).filter(Boolean).map(e=>P.p.getHoverUrl(e.url)).join("\n");a.setData("text/plain",e),a.setData("text/uri-list",e)}e.preventDefault()}),L(this,"_isValidForClipboard",e=>!!e.url),L(this,"_isValidToDelete",e=>e.map(e=>this._getNodeById(e)).filter(Boolean).filter(e=>"window"!==e.type).filter(e=>!this._isInPinnedFolder(e)).filter(e=>!this._isInTrashFolder(e)).map(e=>e.id)),L(this,"_getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:void 0,pageIndex:0};return this._isFolder(e)&&("on"===t||e.isExpanded&&"below"===t)?(a.parentId=e.id,a.pageIndex=e.pageIndex):e.parentId?(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0),a.pageIndex=e.pageIndex,"below"===t&&(this._isFolder(e)&&!e.isExpanded&&e.children.length>0?a.pageIndex=e.children[e.children.length-1].pageIndex:a.pageIndex+=1)):(a.parentId=e.id,a.index=0),a}),L(this,"_reload",()=>{const e=this.getSelectedItems().filter(e=>"window"===e.type&&!e.closed).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]),t=this.getSelectedItems().filter(e=>"stack"===e.type||"pinned_group"===e.type).filter(t=>-1===e.findIndex(e=>e===t.id)).map(e=>e.children).reduce((e,t)=>e.concat(t),[]),a=this.getSelectedItems().filter(e=>"tab"===e.type&&!e.closed).filter(t=>-1===e.findIndex(e=>e===t.id)).filter(e=>-1===t.findIndex(t=>t===e.id));[e,t,a].forEach(e=>{const t=e.map(e=>e.page.id).filter(Boolean);c.a.reloadPage(Object(k.List)(t))})}),L(this,"_tile",()=>{const e=this._getTileableSelectedNodes();e.length>1&&c.a.tilePages(Object(k.List)(e.map(e=>e.page).filter(Boolean)),"row")}),L(this,"_removeTile",()=>{this._getSelectedTiledIds().forEach(e=>{c.a.untileTileGroup(e,this.context.vivaldiWindowId)})}),L(this,"_setMediaState",(e,t)=>{if("playing"===e){const e=this._getPlayableNodesFrom("selection",t).map(e=>e.page);c.a.setMuting("selection","unmute",Object(k.List)(e))}else if("muting"===e){const e=this._getMuteableNodesFrom("selection").map(e=>e.page);c.a.setMuting("selection","mute",Object(k.List)(e))}}),L(this,"newTab",()=>{c.a.newTab(this.context.vivaldiWindowId,"").then(e=>{var t,a;null===(t=this.refTreeList.current)||void 0===t||t.expandToId(e.toString()),null===(a=this.refTreeList.current)||void 0===a||a.selectById(e.toString())}).catch(e=>{console.warn(e)})}),L(this,"_newTabAfter",e=>{const t=this._getNodeById(e);if(!t)return;const a=this._getTargetSpec(t,"below"),n=this._getDropIndexByNode(t,"below");this.blockPageStoreChange=!0,c.a.newTab(this.context.vivaldiWindowId,"",n).then(e=>{var n,i;if(this._isWithinFolder(t,"below")){const n=u.c.getPages(this.context.vivaldiWindowId).find(t=>t.id===e);if(this._isInPinnedFolder(t))n&&(c.a.setPinned(k.List.of(n),!0),c.a.moveToIndex(n,t.pageIndex));else if(this._isInStackFolder(t)){const e=this._getPageByNode(t),i=this._getStackFolderByNode(t);if(e&&i){const t=i.children.map(e=>e.page);t.splice(a.index,0,n),c.a.createTabStack(Object(k.List)(t),Number(i.pageIndex),e.getIn(["extData","group"]))}}}this.blockPageStoreChange=!1,this._onPageStoreChanged(),null===(n=this.refTreeList.current)||void 0===n||n.expandToId(e.toString()),null===(i=this.refTreeList.current)||void 0===i||i.selectById(e.toString())}).catch(e=>{console.warn(e)})}),L(this,"_cloneTab",()=>{const e=this.getSelectedItems().map(e=>e.page).filter(Boolean);c.a.clonePages(Object(k.List)(e))}),L(this,"_pinTab",()=>{const e=this.getSelectedItems().filter(e=>!this._isInStackFolder(e)).map(e=>e.page).filter(Boolean).filter(e=>!e.pinned);c.a.setPinned(Object(k.List)(e),!0)}),L(this,"_unpinTab",()=>{const e=this.getSelectedItems().map(e=>e.page).filter(Boolean).filter(e=>e.pinned);c.a.setPinned(Object(k.List)(e),!1)}),L(this,"_closeWithId",(e,t)=>{t&&Object(O.a)(t);const a=this._getNodeById(e);var n;if(a)if("tab"===a.type)null===(n=this.refTreeList.current)||void 0===n||n.onDeleteItems([a.id]);else if("stack"===a.type){const e=this._getPageIdByNode(a);"number"==typeof e&&c.a.closeTabStack(e)}}),L(this,"_close",()=>{const e=this.getSelectedItems().filter(e=>"stack"===e.type),t=e.map(e=>e.children).reduce((e,t)=>e.concat(t),[]),a=this.getSelectedItems().filter(e=>!e.closed).filter(e=>-1===t.findIndex(t=>t===e.id));this.blockPageStoreChange=!0;let n=e.map(e=>this._getPageByNode(e)).filter(Boolean);n.forEach(e=>{c.a.closeTabStack(e.id)}),n=a.map(e=>e.page).filter(Boolean).filter(e=>!e.pinned),c.a.closePage(Object(k.List)(n)),this.blockPageStoreChange=!1,this._onPageStoreChanged()}),L(this,"_reopen",()=>{const e=this.getSelectedItems().filter(e=>e.closed),t=e.filter(e=>"window"===e.type),a=t.map(e=>e.children).reduce((e,t)=>e.concat(t),[]),n=e.filter(e=>-1===a.findIndex(t=>t===e.id)).map(e=>e.tab).filter(Boolean);t.forEach(e=>{p.a.undeleteWindow({sessionId:e.id,...e})}),n.forEach(e=>{p.a.undeleteTab(e)})}),L(this,"_createTabStack",()=>{this._createTabStackWithNodes(this._getStackableSelectedNodes())}),L(this,"_createTabStackForHost",(e,t)=>{const a=this._createTabStackWithNodes(t);a&&e&&Object(y.a)(a,e)}),L(this,"_createTabStackWithNodes",e=>{var t;if(e.length<2)return;let a=-1;for(let t=0;t<e.length;t++){let n=e[t];if(this._isInStackFolder(n)&&(n=this._getNodeById(n.parentId),!n))return;(-1===a||a>n.pageIndex)&&(a=n.pageIndex)}const n=u.c.getNewGroupId();return c.a.createTabStack(Object(k.List)(e.map(e=>e.page)),-1===a?0:a,n),null===(t=this.refTreeList.current)||void 0===t||t.selectById(n),n}),L(this,"_disolveTabStack",()=>{const e=this.getSelectedItems(),t=e.filter(e=>"stack"===e.type),a=t.map(e=>this._getPageByNode(e)).filter(Boolean);var n;(a.forEach(e=>{c.a.expandTabStack(e.getIn(["extData","group"]))}),a.length>0&&e.length===t.length)&&(null===(n=this.refTreeList.current)||void 0===n||n.selectById(a[0].id.toString()))}),L(this,"_hibernate",()=>{this._getDiscardablePages().forEach(e=>{c.a.discardPage(e)})}),L(this,"_reopenLastClosedTab",()=>{p.a.undeletePreviousTab()}),L(this,"_validateForEdit",e=>u.c.isGroup(e,this.context.vivaldiWindowId)),L(this,"_getTitle",e=>{const t=this._getNodeById(e);return t?t.title:""}),L(this,"_getMenuCapability",async(e,t,a)=>{const n=null==a?void 0:a.page,i="tab"===(null==a?void 0:a.type),s=i||"stack"===(null==a?void 0:a.type),r=s||"window"===(null==a?void 0:a.type),o={hostname:n?Object(I.b)(n):"",selectedCount:this._getStackableSelectedNodes().length};switch(e.action){case"CONTEXT_NEW":return{handler:()=>{a?this._newTabAfter(a.id):this.newTab()},visible:!a||!this._isInTrashFolder(a),...t(e,o)};case"CONTEXT_NEW_STACK":return{handler:()=>{this._createTabStack()},visible:s&&o.selectedCount>1,...t(e,o)};case"CONTEXT_NEW_STACK_FOR_HOST":const l=this._getNodeById(a.id),c=null==l?void 0:l.hostname,u=this._getStackableNodesForHost(l,c);return{handler:()=>this._createTabStackForHost(c,u),visible:i&&c&&1===this.getSelectedItems().length&&u.length>1,...t(e,o)};case"CONTEXT_TABSTACK_UNGROUP":return{handler:()=>{this._disolveTabStack()},visible:"stack"===(null==a?void 0:a.type),...t(e,o)};case"CONTEXT_CLONE":return{handler:()=>{this._cloneTab()},visible:i&&!this._isInTrashFolder(a),...t(e,o)};case"CONTEXT_RELOAD":return{handler:()=>{this._reload()},visible:r&&!this._isInTrashFolder(a),...t(e,o)};case"CONTEXT_HIBERNATE_TAB":return{handler:()=>{this._hibernate()},visible:r&&!this._isInTrashFolder(a)&&this._getDiscardablePages().length>0,...t(e,o)};case"CONTEXT_PIN":return{handler:()=>{this._pinTab()},visible:Boolean(n&&!n.pinned&&!this._isInTrashFolder(a)&&!n.getIn(["extData","group"])),...t(e,o)};case"CONTEXT_UNPIN":return{handler:()=>{this._unpinTab()},visible:Boolean(null==n?void 0:n.pinned)&&!this._isInTrashFolder(a),...t(e,o)};case"CONTEXT_TILE_TABS":return{handler:()=>{this._tile()},visible:s&&this._getTileableSelectedNodes().length>1,...t(e,o)};case"CONTEXT_UNTILE_TABS":return{handler:()=>{this._removeTile()},visible:s&&this._getSelectedTiledIds().length>0,...t(e,o)};case"CONTEXT_MUTE":return{handler:()=>{this._setMediaState("muting",a)},visible:r&&!this._isInTrashFolder(a)&&this._getMuteableNodesFrom("selection").length>0,...t(e,o)};case"CONTEXT_MUTE_OTHER":{const n=a&&"window"===a.type&&"window1"!==a.id;return{handler:()=>{this._muteOthers(a)},visible:(s||n)&&this._getMuteableNodesFrom("all").filter(e=>e.id!==a.id).length>0,...t(e,o)}}case"CONTEXT_UNMUTE":return{handler:()=>{this._setMediaState("playing",a)},visible:r&&this._getPlayableNodesFrom("selection",a).length>0,...t(e,o)};case"CONTEXT_EMPTY_TRASH":return{handler:()=>{p.a.emptyTrash()},visible:this._isTrashCan(a)&&Boolean(b.a.getTrash().length),...t(e,o)};case"CONTEXT_REOPEN":return{handler:()=>{a?this._reopen():this._reopenLastClosedTab()},visible:!(this._isTrashCan(a)||a&&!0!==a.closed),...t(e,o)};default:return{...t(e,{})}}}),L(this,"_getMenuVisibility",(e,t)=>{if(t)if(this._isTrashCan(t))switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}else{const a=this._isValidToDelete([t.id]).length>0,n=!this._isInTrashFolder(t)&&!_.a.isGuestSession(this.context.vivaldiWindowId);switch(e.action){case"CONTEXT_RENAME":return this._validateForEdit(t.id)&&1===this.getSelectedItems().length;case"CONTEXT_COPY":return Boolean(t.url);case"CONTEXT_SAVE":case"CONTEXT_SAVE_ALL":case"CONTEXT_EXPORT_ALL":return n;case"CONTEXT_EXPORT":return n&&this.getSelectedItems().length>0;case"CONTEXT_DELETE":return a;case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}}else switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return!0;default:return!1}}),L(this,"onContextMenu",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.onContextMenu(e)}),L(this,"_handleMouseEnter",e=>{e&&h.a.setStatus(P.p.getHoverUrl(e))}),L(this,"_handleMouseLeave",()=>{h.a.clearStatus()}),L(this,"getRowComponentProps",e=>({...e,showBadge:this.props.prefValues[A.kPanelsShowFolderBadge]})),L(this,"rowComponent",e=>{const t=e.node,a=16*(t.level+1)+"px",i=16*t.level+"px",s=this._isInPinnedFolder(t)&&!this.props.prefValues[A.kPanelsWindowShowPinnedGroup],r=this._isUnread(t),o=t.page&&t.page.discarded&&this.props.prefValues[A.kTabsDimHibernated],c=this.props.prefValues[A.kTabsShowCloseButton]&&!this._isInPinnedFolder(t)&&!this._isInTrashFolder(t)&&"window"!==t.type,m=getComputedStyle(document.body).getPropertyValue("--colorFg"),h=t.page&&l.a.getState().get(t.page.id)||Object(k.Set)(),p=0===h.size||o;let b=0;return this._hasChildren(t)&&(b="window1"===t.id?u.c.getPages(this.context.vivaldiWindowId).size:t.children.length),[d.a.createElement("label",{key:"window__panel__"+t.id,onMouseEnter:this._handleMouseEnter.bind(this,t.url),onMouseLeave:this._handleMouseLeave,title:t.url,__source:{fileName:x,lineNumber:1813,columnNumber:7}},this._isFolder(t)&&this._hasChildren(t)&&d.a.createElement("span",{className:"expand-icon",style:{marginLeft:i},onMouseDown:O.a,onMouseUp:()=>this._handleExpandClick(t.id),dangerouslySetInnerHTML:{__html:D.rb},__source:{fileName:x,lineNumber:1819,columnNumber:11}}),!p&&!this._isFolder(t)&&d.a.createElement("span",{className:"tab-audio",style:this._isFolder(t)?null:{marginLeft:i},onClick:this._setMediaState.bind(this,h.has("muting")?"playing":"muting",t),__source:{fileName:x,lineNumber:1827,columnNumber:11}},h.has("capturing")?d.a.createElement("span",{className:"audioicon",dangerouslySetInnerHTML:{__html:D.Md},__source:{fileName:x,lineNumber:1839,columnNumber:17}}):d.a.createElement(n.a,{animated:this.props.prefValues[A.kThemeUseAnimation],mediaState:h,color:m,__source:{fileName:x,lineNumber:1842,columnNumber:17}})),this._isFolder(t)&&d.a.createElement(f.a,{trash:this._isTrashCan(t),stack:"stack"===t.type,pinnedFolder:this._isPinnedFolder(t),leftMargin:this._hasChildren(t)?0:a,__source:{fileName:x,lineNumber:1852,columnNumber:11}}),!this._isFolder(t)&&!s&&d.a.createElement(d.a.Fragment,null,t.faviconUrl.startsWith("<svg")?d.a.createElement("span",{className:"svg-icon",style:p?{marginLeft:a}:null,dangerouslySetInnerHTML:{__html:t.faviconUrl},__source:{fileName:x,lineNumber:1862,columnNumber:17}}):d.a.createElement("img",{src:t.faviconUrl,className:C()({discarded:o}),style:p?{marginLeft:a}:null,width:"16",height:"16",alt:"",__source:{fileName:x,lineNumber:1869,columnNumber:17}})),s&&d.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"pinned-icon",style:p?{marginLeft:a}:null,__source:{fileName:x,lineNumber:1884,columnNumber:11}},d.a.createElement("g",{transform:"translate(2, 2)",__source:{fileName:x,lineNumber:1889,columnNumber:13}},d.a.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:x,lineNumber:1890,columnNumber:15}}),d.a.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:x,lineNumber:1891,columnNumber:15}}))),void 0!==e.inlineEditText&&d.a.createElement("input",{type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:x,lineNumber:1897,columnNumber:11}}),void 0===e.inlineEditText&&d.a.createElement("span",{className:C()({title:!0,active:t.active,unread:r}),__source:{fileName:x,lineNumber:1907,columnNumber:11}},t.title),e.showBadge&&this._hasChildren(t)&&d.a.createElement("span",{className:"item-count",__source:{fileName:x,lineNumber:1919,columnNumber:11}},b),c&&d.a.createElement("span",{className:"close",title:Object(v.a)("Close"),tabIndex:"-1",onClick:this._closeWithId.bind(this,t.id),dangerouslySetInnerHTML:{__html:D.kb},__source:{fileName:x,lineNumber:1925,columnNumber:11}}))]})}componentDidMount(){u.c.addChangeListener(this._onPageStoreChanged),b.a.addChangeListener(this._onTrashStoreChanged),this._onFilterChange(this.props.filter,M.default)}componentWillUnmount(){u.c.removeChangeListener(this._onPageStoreChanged),b.a.removeChangeListener(this._onTrashStoreChanged)}componentDidUpdate(t){if(this.props.filter!==t.filter){const a=this.props.filter.length,n=t.filter.length;0===n&&a>0&&this.refTreeList.current&&(this.expandModel=this.refTreeList.current.getExpandModel()),this._onFilterChange(this.props.filter,t=>{a>0?e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandAllExcept(t)}):n>0&&0===a&&e.nextTick(()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.expandWithModel(this.expandModel)})})}else(this.props.prefValues[A.kThemeUseAnimation]!==t.prefValues[A.kThemeUseAnimation]||this.props.prefValues[A.kTabsStackingMode]!==t.prefValues[A.kTabsStackingMode]||this.props.prefValues[A.kTabsUnread]!==t.prefValues[A.kTabsUnread]||this.props.prefValues[A.kTabsStackingNameMap]!==t.prefValues[A.kTabsStackingNameMap]||this.props.prefValues[A.kPanelsWindowShowPinnedGroup]!==t.prefValues[A.kPanelsWindowShowPinnedGroup]||this.props.sorting!==t.sorting&&"manually"===this.props.sorting.sortField)&&e.nextTick(()=>{const e="off"===this.props.prefValues[A.kTabsStackingMode];this.setState({nodes:this._getNodes(e)})})}render(){const e=this.state.nodes[0];if(!e||!e.children.find(e=>"tab"===e.type||"stack"===e.type||"pinned_group"===e.type&&e.children.length>0))return this.props.filter?d.a.createElement("p",{__source:{fileName:x,lineNumber:1947,columnNumber:34}},Object(v.a)("Nothing found")):null;const t={name:"windowlist",getCapability:this._getMenuCapability,getVisibility:this._getMenuVisibility};return(d.a.createElement(g.a,{ref:this.refTreeList,settings:"WINDOWS_PANEL",rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.state.nodes,defaultFolderExpansion:"fallback",hasChildren:this._hasChildren,isFolder:this._isFolder,supportsInlineEdit:!0,isValidToEdit:this._validateForEdit,getTitle:this._getTitle,saveTitle:y.a,onItemClick:this._onNodeClick,onItemDoubleClick:this._onNodeDoubleClick,onItemMouseDown:this._onNodeMouseDown,onItemMouseUp:this._onNodeMouseUp,onItemsActivated:this._onNodesActivated,delete:this._closeByIds,onExport:this._saveSessionByIds,onSave:this._saveBookmarkByIds,onDrop:this._onDrop,onMove:this._onMove,onCopy:this._onCopy,isValidForClipboard:this._isValidForClipboard,validateForDeletion:this._isValidToDelete,menu:t,mimeType:R,validateForDrag:this._validateForDrag,getDropSupport:this._getDropSupport,getTargetSpec:this._getTargetSpec,getDragData:this._getDragData,setCustomDragData:this._setCustomDragData,supportsDeepCopy:!1,sorting:this.props.sorting,__source:{fileName:x,lineNumber:1957,columnNumber:7}}))}}L(B,"contextType",N.a),t.a=Object(r.a)(B,j)}).call(this,a(82))},function(e,t,a){"use strict";var n=a(0),i=a(20),s=a.n(i),r="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\WindowIcon.jsx";class o extends n.Component{render(){const e=s()({"folder-icon":!this.props.trash,"folder-trash":this.props.trash});return(n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:this.props.leftMargin?{marginLeft:this.props.leftMargin}:null,__source:{fileName:r,lineNumber:21,columnNumber:7}},this.props.trash&&n.createElement("g",{__source:{fileName:r,lineNumber:27,columnNumber:11}},n.createElement("path",{d:"M1 1.5h3.5v-1h7v1h-8H15",__source:{fileName:r,lineNumber:28,columnNumber:13}}),n.createElement("path",{d:"M3.5 3.5v11h9v-11zm3 8v-4zm3 0v-4z",__source:{fileName:r,lineNumber:29,columnNumber:13}})),this.props.stack&&n.createElement("g",{__source:{fileName:r,lineNumber:34,columnNumber:11}},n.createElement("path",{d:"M1.5,1.5 L1.5,9.5",__source:{fileName:r,lineNumber:35,columnNumber:13}}),n.createElement("path",{d:"M9.5,1.5 L9.5,9.5",__source:{fileName:r,lineNumber:36,columnNumber:13}}),n.createElement("path",{d:"M1.5,9.5 L9.5,9.5",__source:{fileName:r,lineNumber:37,columnNumber:13}}),n.createElement("path",{d:"M1.5,1.5 L9.5,1.5",__source:{fileName:r,lineNumber:38,columnNumber:13}}),n.createElement("path",{d:"M3.5,9.5 L3.5,11.5",__source:{fileName:r,lineNumber:39,columnNumber:13}}),n.createElement("path",{d:"M11.5,3.5 L11.5,11.5",__source:{fileName:r,lineNumber:40,columnNumber:13}}),n.createElement("path",{d:"M3.5,11.5 L11.5,11.5",__source:{fileName:r,lineNumber:41,columnNumber:13}}),n.createElement("path",{d:"M9.5,3.5 L11.5,3.5",__source:{fileName:r,lineNumber:42,columnNumber:13}}),n.createElement("path",{d:"M5.5,11.5 L5.5,13.5",__source:{fileName:r,lineNumber:43,columnNumber:13}}),n.createElement("path",{d:"M13.5,5.5 L13.5,13.5",__source:{fileName:r,lineNumber:44,columnNumber:13}}),n.createElement("path",{d:"M5.5,13.5 L13.5,13.5",__source:{fileName:r,lineNumber:45,columnNumber:13}}),n.createElement("path",{d:"M11.5,5.5 L13.5,5.5",__source:{fileName:r,lineNumber:46,columnNumber:13}})),this.props.pinnedFolder&&n.createElement("g",{transform:"translate(3, 2)",__source:{fileName:r,lineNumber:51,columnNumber:11}},n.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:r,lineNumber:52,columnNumber:13}}),n.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:r,lineNumber:53,columnNumber:13}})),!this.props.pinnedFolder&&!this.props.stack&&!this.props.trash&&n.createElement("g",{transform:"translate(-1, 1)",__source:{fileName:r,lineNumber:59,columnNumber:11}},n.createElement("polygon",{points:"16.5 3.5 16.5 0.5 1.5 0.5 1.5 3.5",__source:{fileName:r,lineNumber:60,columnNumber:13}}),n.createElement("path",{d:"M1.5,3.5 L1.5,12.5",__source:{fileName:r,lineNumber:61,columnNumber:13}}),n.createElement("path",{d:"M16.5,3.5 L16.5,12.5",__source:{fileName:r,lineNumber:62,columnNumber:13}}),n.createElement("path",{d:"M1.5,12.5 L16.5,12.5",__source:{fileName:r,lineNumber:63,columnNumber:13}}),n.createElement("path",{d:"M4.5,0.5 L4.5,3.5",__source:{fileName:r,lineNumber:64,columnNumber:13}}),n.createElement("path",{d:"M7.5,0.5 L7.5,3.5",__source:{fileName:r,lineNumber:65,columnNumber:13}}),this.props.activeWindow&&n.createElement("polygon",{points:"4.5 6.5 4.5 8.5 7.5 6.5",strokeWidth:"2",__source:{fileName:r,lineNumber:68,columnNumber:15}}))))}}t.a=o},,function(e,t,a){"use strict";var n=a(0),i=a(792),s=a(20),r=a.n(s),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Arrow.jsx";t.a=function({isActive:e,orientation:t="right",onClick:a,style:s,title:l}){const c=["left","up"].includes(t)?"expanded":"closed";return(n.createElement("div",{className:r()("tab-position","accordion-toggle-arrow",c,{active:e}),style:s,onClick:a,title:l,__source:{fileName:o,lineNumber:18,columnNumber:5}},n.createElement(i.a,{type:"folder-arrow",className:t,__source:{fileName:o,lineNumber:29,columnNumber:7}})))}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(22),r=a(2),o=a(9);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.a.PureComponent{constructor(...e){super(...e),l(this,"_isHorizontal",()=>"top"===this.props.tabPosition||"bottom"===this.props.tabPosition),l(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":if(this._isHorizontal()?"ArrowLeft"===e.key||"ArrowRight"===e.key:"ArrowUp"===e.key||"ArrowDown"===e.key){const t="ArrowLeft"===e.key||"ArrowUp"===e.key?"left":"right";this.props.onMoveFocus(this.props.id,t,!1)}break;case"Escape":this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()})}render(){return i.a.createElement(s.a,{style:this.props.style,className:"newtab",onKeyDown:this._handleKeyDown,onClick:this.props.onCreateTab,tooltip:Object(r.a)("Open a New Tab"),image:o.Qd.large,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\NewTab.jsx",lineNumber:64,columnNumber:7}})}}t.a=c},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(507),s=a(50),r=a(28),o=a(91),l=a(1373),c=a(36),u=a(162),m=a(31),d=a(152),h=a(53),p=a(14),b=a(13),g=a(454),N=a(279),f=a(11),_=a(471),v=a(40),E=a.n(v),C=a(1374),w=a(840),O=a(359),y=a(253),S=(a(95),a(25)),T=a(17),k=a(2),A=a(10),I=a(20),D=a.n(I),M=a(78),P=a(4),x=a(715),L=a(303),j=a(74),R=a(439),B=a(7),F=a(841),U=a(26),H=a(1),V=a(842),W=a(398),z=a(188),G=a(555),K=a(306),Y=a(23),$=a(46),X=a(9),Z="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Tab.jsx";function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,J(e,t,"set"),a),a}function J(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const ee=Object(V.a)();function te(e,t,a){if(a)return 1;switch((d.a.getNavigationInfo(e)||{}).trigger){case"start":return 0;case"stop":return 1;case"commit":case"content":{const t=_.a.getProgressInfo(e);return t?Math.min(Math.max(t.progress,0),1):1}}return 1}var ae=new WeakMap;class ne extends n.PureComponent{constructor(t){super(t),Q(this,"_intervalId",null),ae.set(this,{writable:!0,value:!1}),Q(this,"refTab",n.createRef()),Q(this,"refFavicon",n.createRef()),Q(this,"_alarmsChanged",e=>{if(!e)return;const t=e.find(e=>(null==e?void 0:e.id)===this.props.extId);if(t)switch(t.type){case"RELOAD":if(this.props.extId===t.id){const e=b.c.getPageByReloadId(t.id);e&&p.a.reloadPage(e.id)}break;case"TIME_CHANGED":this.setState({timeLeft:t.remainingTime})}else this.state.timeLeft&&this.setState({timeLeft:null})}),Q(this,"_onProgressStateStoreChanged",()=>{this.setState({loadingProgress:te(this.props.pageId,this.props.url,this.props.isInternalPage)})}),Q(this,"_onMediaStateStoreChanged",()=>{this.setState({mediaState:u.a.getState().get(this.props.pageId)||Object(U.Set)()})}),Q(this,"clearFadedDiscardedTabs",()=>{var e;(function(e,t){return t.get?t.get.call(e):t.value})(e=this,J(e,ae,"get"))&&this.setState({fadeDiscardedTabs:!1})}),Q(this,"discardPages",e=>{e.forEach(p.a.discardPage)}),Q(this,"cloneTab",e=>{p.a.clonePages(U.List.of(e))}),Q(this,"cloneTabs",e=>{p.a.clonePages(e)}),Q(this,"reloadTab",e=>{p.a.clearSelection(this.context.vivaldiWindowId),p.a.reloadPage(e)}),Q(this,"heartbeat",()=>{const{alarm:e}=this;if(!e)return;const{scheduledTime:t,periodInMinutes:a}=e;if(t&&a&&a){const e=(t-Date.now())/6e4/a;this.setState({timeLeft:e})}}),Q(this,"_clearAlarmInterval",()=>{this.alarm&&(clearInterval(this._intervalId),this._intervalId=null)}),Q(this,"renameTabStack",()=>{const e=this.props.groupId;e&&this.setState({awaitingEdit:e})}),Q(this,"toggleMediaRemoting",()=>{const e=this.props.prefValues[H.kMediaRouterMediaRemotingEnabled];f.a.set(H.kMediaRouterMediaRemotingEnabled,!e)}),Q(this,"setPinned",(e,t)=>{p.a.clearSelection(this.context.vivaldiWindowId),p.a.setPinned(e,t)}),Q(this,"bookmarkAllOpenPages",()=>{p.a.clearSelection(this.context.vivaldiWindowId),s.a.bookmarkAllOpenPages(this.context.vivaldiWindowId,r.b.getRootNode().id)}),Q(this,"bookmarkTab",(e,t)=>{p.a.clearSelection(this.context.vivaldiWindowId),s.a.bookmarkPages(e,this.context.vivaldiWindowId,t,r.b.getRootNode().id)}),Q(this,"handleClose",e=>{const t=b.c.getPageById(this.props.pageId);t&&e.button===j.a.kLeft&&(e.altKey?this.closeAllButTab(t):e.shiftKey||e.ctrlKey||e.metaKey||this.props.closePage(t),e.preventDefault())}),Q(this,"closeToLeft",(e,t)=>{p.a.closeToLeft(e,t)}),Q(this,"closeToRight",(e,t)=>{p.a.closeToRight(e,t)}),Q(this,"closeTabStack",()=>{p.a.closeTabStack(this.props.pageId)}),Q(this,"handleMedia",()=>{if(this.state.mediaState.has("pip"))p.a.exitPictureInPicture(this.props.pageId);else{const e=b.c.getPageById(this.props.pageId);e&&this.togglePagesMuted(U.List.of(e))}}),Q(this,"togglePagesMuted",e=>{p.a.toggleMuting(e)}),Q(this,"closeAllButTab",(e,t)=>{const a=!t;p.a.closeOther(e,a)}),Q(this,"blockEvent",e=>{e.stopPropagation(),e.preventDefault()}),Q(this,"containEvent",e=>{e.stopPropagation()}),Q(this,"reopenClosedTab",()=>{this.props.reopenClosedTab()}),Q(this,"customize",()=>{c.a.showSettings("tabs")}),Q(this,"disolveTabStack",()=>{p.a.clearSelection(this.context.vivaldiWindowId),p.a.expandTabStack(this.props.groupId)}),Q(this,"removeFromTabStack",()=>{const e=this.props.pageSelection.flatMap(e=>{const t=b.c.getPageById(e);return t?[t]:[]}).toList();e.isEmpty()||p.a.removeFromTabStack(e)}),Q(this,"isTabstackingEnabled",()=>"off"!==this.props.prefValues[H.kTabsStackingMode]),Q(this,"isTabStack",e=>{const t=Object(h.c)(e);return!!t&&b.c.isGroup(t,this.context.vivaldiWindowId)}),Q(this,"isPinned",e=>e.get("pinned")),Q(this,"tileTabStack",()=>{const e=this.props.groupId;p.a.tileTabStack(e,this.context.vivaldiWindowId),p.a.clearSelection(this.context.vivaldiWindowId)}),Q(this,"isPageTiledWithType",e=>{const t=b.c.getPageById(this.props.pageId);return Boolean(t&&Object(K.d)(t)&&this.props.tilingType===e)}),Q(this,"tileSelection",e=>{const t=e.count()<4?"row":"grid";p.a.tilePages(e.toList(),t),p.a.clearSelection(this.context.vivaldiWindowId)}),Q(this,"untilePages",()=>{const e=this.props.tilingId;p.a.untileTileGroup(e,this.context.vivaldiWindowId),p.a.clearSelection(this.context.vivaldiWindowId)}),Q(this,"mouseEnterHandler",()=>{this.props.clearForceHover()}),Q(this,"indicatorOnDragStart",e=>{this.props.setPageIdsHiddenForDrag(Object(U.Set)(e.map(e=>e.id)))}),Q(this,"indicatorOnDragEnd",()=>{this.props.setPageIdsHiddenForDrag(Object(U.Set)())}),Q(this,"onTabIndicatorPress",(e,t,a)=>{a.preventDefault(),a.stopPropagation(),this.props.prefValues[H.kTabsStackingAllowDnd]&&this.onTabIndicatorDragOut(e,t,a)}),Q(this,"onTabIndicatorClick",(e,t)=>{t.preventDefault(),t.stopPropagation();const{prefValues:a}=this.props;if(t.button===j.a.kLeft){const n=T.a.isActive(this.context.vivaldiWindowId);Object(G.b)(t,a[H.kTabsSelectionEnabled],n)?p.a.setSelection(e,!1,!1):Object(G.a)(t,a[H.kTabsSelectionEnabled],n)?p.a.setSelection(e,!0,!1):Object(L.a)(t)||this.props.onActivate(e)}else t.button,j.a.kCenter}),Q(this,"onTabIndicatorDragOut",(e,t,a)=>{const{isSelecting:n,pageSelection:i}=this.props,s=n&&i.has(e.id)?this.props.pageSelection.reduce((e,t)=>{const a=b.c.getPages(this.context.vivaldiWindowId).find(e=>e.id===t);return a?e.push(a):e},Object(U.List)()).sortBy(e=>e.index).toArray():[e];Object(F.a)(s,a,{offsetLeft:2,offsetTop:3,offsetHeight:-6,offsetWidth:-2,onDragStart:this.indicatorOnDragStart,onDragEnd:this.indicatorOnDragEnd,element:this.indicators[t]})}),Q(this,"renderTabGroupIndicator",()=>n.createElement("div",{className:"tab-group-indicator",__source:{fileName:Z,lineNumber:685,columnNumber:7}},this.props.stack.map(e=>{const t=D()({"tab-indicator":!0,active:this.props.highlightId===e.id,marked:this.props.isSelecting&&this.props.pageSelection.contains(e.id),unread:this.props.prefValues[H.kTabsUnread]&&this.props.isUnread&&e.id!==this.props.highlightId}),a={visibility:this.props.isHiddenForDrag?"hidden":"visible"},i=`stack-${e.id}`;return(n.createElement("div",{key:i,ref:e=>{e&&(this.indicators[i]=e)},className:t,style:a,title:Y.p.getDisplayTitle(e),onContextMenu:this.onContextMenu.bind(this,!0),onClick:this.onTabIndicatorClick.bind(this,e),onMouseDown:this.onTabIndicatorPress.bind(this,e,i),__source:{fileName:Z,lineNumber:702,columnNumber:13}},this.props.isSelecting&&this.props.pageSelection.contains(e.id)&&n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"3px",className:"svg-tab-selection",__source:{fileName:Z,lineNumber:717,columnNumber:17}},n.createElement("line",{className:"inner",x1:"0",y1:"0",x2:"100%",y2:"0",__source:{fileName:Z,lineNumber:722,columnNumber:19}}),n.createElement("line",{className:"outer",x1:"0",y1:"0",x2:"100%",y2:"0",__source:{fileName:Z,lineNumber:723,columnNumber:19}}))))}))),Q(this,"keyDown",t=>{const{prefValues:a}=this.props,n=a[H.kTabsSelectionEnabled];if(!this.state.awaitingEdit){switch(t.key){case"Enter":case" ":const i=b.c.getPageById(this.props.pageId);i&&this.props.onActivate(i);break;case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":const s=this.isHorizontal();if(Object(z.d)(t)&&n){const e=b.c.getPageById(this.props.pageId);e&&(("ArrowLeft"===t.key&&s||"ArrowUp"===t.key&&!s)&&p.a.expandSelectionPrevious(e),("ArrowRight"===t.key&&s||"ArrowDown"===t.key&&!s)&&p.a.expandSelectionNext(e))}if(Object(z.a)(t)){const i="dotted"===a[H.kTabsStackingMode];if(s){if("ArrowLeft"===t.key||"ArrowRight"===t.key){const a=b.c.getPageById(this.props.pageId);a&&(p.a.stepPage(a,"ArrowRight"===t.key,i,this.context.vivaldiWindowId),n&&e.nextTick(()=>{p.a.setSelection(a,!1,!1,!0)}))}}else if("ArrowUp"===t.key||"ArrowDown"===t.key){const a=b.c.getPageById(this.props.pageId);a&&(p.a.stepPage(a,"ArrowDown"===t.key,i,this.context.vivaldiWindowId),n&&e.nextTick(()=>{p.a.setSelection(a,!1,!1,!0)}))}}if(Object(z.c)(t)){if(s?"ArrowLeft"===t.key||"ArrowRight"===t.key:"ArrowUp"===t.key||"ArrowDown"===t.key){const a="ArrowLeft"===t.key||"ArrowUp"===t.key?"left":"right";p.a.clearSelection(this.context.vivaldiWindowId),e.nextTick(()=>this.props.onMoveFocus(this.props.id,a,!1))}else if(this.props.isStack){const e=E.a.findDOMNode(this.refTab.current);e instanceof Element&&this.props.onStackMenu(this.props.pageId,e)}}break;case"Escape":p.a.clearSelection(this.context.vivaldiWindowId),this.props.onLeaveBar();break;default:return}t.preventDefault(),t.stopPropagation()}}),Q(this,"createGroup",(e,t)=>{const a=e.sort((e,t)=>e.index-t.index),n=t.index-a.findIndex(e=>e===t);p.a.createTabStack(a,n,Object(h.c)(t))}),Q(this,"createGroupByHost",(e,t)=>{const a=b.c.getNewGroupId();Object(R.a)(a,t),p.a.createTabStack(e,void 0,a)}),Q(this,"getGroupsForHosts",()=>{const e=b.c.getPages(this.context.vivaldiWindowId).filter(e=>!this.isTabStack(e)).filter(e=>!e.pinned);let t=Object(U.List)();return e.forEach(a=>{let n=!1;if(t.forEach(e=>{if(n=e.contains(a),n)return!1}),!n){const n=Object(W.b)(a),i=e.filter(e=>Object(W.b)(e)===n);i.size>1&&(t=t.push(i))}}),t}),Q(this,"createGroupByHosts",()=>{this.getGroupsForHosts().forEach(e=>{this.createGroupByHost(e,Object(W.b)(e.first()))})}),Q(this,"isHorizontal",()=>{const{tabPosition:e}=this.props;return"top"===e||"bottom"===e}),Q(this,"onContextMenu",(e,t)=>(t.persist(),t.preventDefault(),t.stopPropagation(),this.getContextMenuItemsPromise("tab",e,t).then(e=>{Object(M.a)(this.context.vivaldiWindowId,e)(t)}),!1)),Q(this,"getContextMenuItemsPromise",(e,t,a)=>{const n=b.c.getPageById(this.props.pageId);if(!n)return Promise.reject("Tab.jsx: Expected page not found");const i=this.context.vivaldiWindowId,{isStack:s,groupId:r}=this.props,l=this.props.isSelecting&&this.props.pageSelection.has(n.id)&&this.props.pageSelection.count()>1,d=b.c.getSelectedPages(i),h=d.filter(e=>b.c.canClosePage(e)),N=b.c.getPages(i).filter(e=>!d.find(t=>t.id===e.id)),f=T.a.isGuestSession(i),[_,v]=Object(W.a)(n,b.c.getTabs(i,!this.isTabstackingEnabled())),E=!n.active&&!n.discarded&&!n.isInspected&&n.url!==b.c.getDefaultStartpage(),C=s&&b.c.getGroup(r,this.context.vivaldiWindowId).some(e=>!e.active&&!e.discarded&&!e.isInspected&&e.url!==b.c.getDefaultStartpage()),w=b.c.getDiscardablePages(i),O=b.c.getPages(i).count(),S=b.c.isGroup(r,this.context.vivaldiWindowId),k=t||!S?O>=2:O-b.c.getGroup(r,this.context.vivaldiWindowId).count()>=1;let I;I=l?d:!t&&s?b.c.getGroup(r,this.context.vivaldiWindowId):U.List.of(n);const D={isMultiSelect:l,count:d.count(),closableCount:h.count(),unSelectedCount:N.count(),unpinned:d.filter(e=>!this.isPinned(e)).count(),pinned:d.filter(this.isPinned).count(),playing:d.filter(e=>u.a.hasMediaState(e.id,"playing")||u.a.hasMediaState(e.id,"muting")).count(),canHibernateCount:d.filter(e=>!e.active&&!e.isInspected).count(),hostname:_,hostnameCount:v.count(),horizontal:this.isHorizontal(),someIncognito:d.some(e=>n.incognito),canCloneCount:d.filter(e=>!Object(Y.l)(e)).count()},M=o.a.getOptionFunction(e),x=this.props.extId,L=()=>new Promise(e=>{A.a.windows.getAll({populate:!0,windowTypes:["normal"]},t=>{t=t.filter(e=>e.id!==this.context.vivaldiWindowId).filter(e=>!e.extData||"settings"!==JSON.parse(e.extData).windowType),Promise.all(t.map(e=>new Promise(t=>{e.id?B.a.runtimePrivate.isGuestSession(e.id,a=>{t({w:e,isGuest:a})}):t({w:e,isGuest:!1})}))).then(t=>{const i=t.filter(e=>T.a.isGuestSession()?e.isGuest:T.a.isIncognito()?e.w.incognito&&!e.isGuest:!e.isGuest&&!e.w.incognito).map(e=>e.w);let o=[];i.length>0&&(o=o.concat(m.a.separatorItem,i.map((e,t)=>{const a=e.tabs||[],i=a.find(e=>e.active),o=i&&i.url?Y.p.getDisplayTitleByUrl(i.url,i.title||i.url):t+1;return{handler:()=>{const t=l?d:s?b.c.getGroup(r,this.context.vivaldiWindowId):U.List.of(n);t.count()===b.c.getPages(this.context.vivaldiWindowId).count()&&document.querySelectorAll("webview").forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)}),e.id&&p.a.moveToWindow(t,e.id)},...Object(P.a)("Window with $1 Active Tab ($2)","Window with $1 Active Tabs ($2)",[a.length,o])}}))),T.a.isGuestSession()||T.a.isIncognito()||(o.push(m.a.separatorItem),o.push({handler:()=>{I.count()===b.c.getPages(this.context.vivaldiWindowId).count()&&document.querySelectorAll("webview").forEach(e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.removeChild(e)}),p.a.detachPage(I,a.screenX,a.screenY)},...Object(P.a)("To New Window")})),e(o)})})});return o.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_NEW":return{handler:()=>this.props.createTab(!l&&S&&r?r:void 0),...M(e,D)};case"CONTEXT_RELOAD":return{handler:l?this.reloadTab.bind(this,d.map(e=>e.id)):this.reloadTab.bind(this,n.id),...M(e,D)};case"CONTEXT_CLONE":return{visible:l?!d.every(Y.l):!Object(Y.l)(n),handler:l?()=>p.a.clonePages(d):()=>p.a.clonePages(U.List.of(n)),...M(e,D)};case"CONTEXT_PIN":return{handler:l?()=>{this.setPinned(d,!0)}:()=>{this.setPinned(U.List.of(n),!0)},visible:l?!d.some(this.isTabStack)&&d.some(e=>!this.isPinned(e)):!s&&!n.pinned,...M(e,D)};case"CONTEXT_UNPIN":return{handler:l?()=>{this.setPinned(d,!1)}:()=>{this.setPinned(U.List.of(n),!1)},visible:l?!d.some(this.isTabStack)&&d.some(this.isPinned):!s&&n.pinned,...M(e,D)};case"CONTEXT_MUTE":return{handler:l?()=>this.togglePagesMuted(d):()=>this.togglePagesMuted(U.List.of(n)),visible:!l||d.some(e=>u.a.hasMediaState(e.id,"playing")||u.a.hasMediaState(e.id,"muting")),checked:l?d.every(e=>u.a.hasMediaState(e.id,"muting")):n.getIn(["extData","vivaldi_tab_muted"]),...M(e,D)};case"CONTEXT_CONTAINER_PERIODIC_TIMER":return{items:g.a.getMenu(x,"tab"),visible:!this.props.isInternalPage,...M(e,D)};case"CONTEXT_MUTE_OTHER":return{handler:p.a.muteAllExcept.bind(this,[n]),visible:!l&&b.c.getPages(this.context.vivaldiWindowId).some(e=>e.id!==n.id&&u.a.hasMediaState(e.id,"playing")),...M(e,D)};case"CONTEXT_OPTIMIZE_FS_VIDEOS":return{handler:this.toggleMediaRemoting,type:"checkbox",checked:this.props.prefValues[H.kMediaRouterMediaRemotingEnabled],visible:this.state.mediaState.has("capturing"),...M(e,D)};case"CONTEXT_BOOKMARK":return{handler:l?this.bookmarkTab.bind(this,d,!1):this.bookmarkTab.bind(this,n,!1),visible:!f,...M(e,D)};case"CONTEXT_BOOKMARK_STACK":return{handler:this.bookmarkTab.bind(this,this.props.stack,!0),visible:s&&!f,...M(e,D)};case"CONTEXT_BOOKMARK_ALL":return{handler:this.bookmarkAllOpenPages,visible:!f,...M(e,D)};case"CONTEXT_SAVE_SESSION":return{handler:d.count()>0?c.a.showSaveSession.bind(this,{mode:"selected",ids:d.map(e=>e.id).toArray()}):c.a.showSaveSession.bind(this,{mode:"all"}),visible:!f,...M(e,D)};case"CONTEXT_TABSTACK_BY_SELECTION":{const t=d.filter(e=>!this.isPinned(e));return{handler:()=>this.createGroup(t,n),visible:l&&this.isTabstackingEnabled()&&this.props.isSelecting&&t.count()>1,...M(e,D)}}case"CONTEXT_TABSTACK_BY_HOST":return{handler:this.createGroupByHost.bind(this,v,_),visible:this.isTabstackingEnabled()&&!s&&v.count()>1,...M(e,D)};case"CONTEXT_TABSTACK_BY_HOSTS":return{handler:()=>this.createGroupByHosts(),visible:this.isTabstackingEnabled()&&!this.getGroupsForHosts().isEmpty(),...M(e,D)};case"CONTEXT_TABSTACK_RENAME":return{handler:this.renameTabStack,visible:s&&!this.props.isSubstrip&&!this.props.isInsideAccordion,...M(e,D)};case"CONTEXT_TABSTACK_REMOVE_FROM":return{handler:this.removeFromTabStack,visible:t,...M(e,D)};case"CONTEXT_TABSTACK_UNGROUP":return{handler:this.disolveTabStack,visible:s,...M(e,D)};case"CONTEXT_TILE_TABSTACK":return{handler:this.tileTabStack,visible:s&&!this.isPageTiledWithType("group")&&!this.isPageTiledWithType("selection"),...M(e,D)};case"CONTEXT_UNTILE_TABSTACK":return{handler:this.untilePages,visible:s&&(this.isPageTiledWithType("group")||this.isPageTiledWithType("selection")),...M(e,D)};case"CONTEXT_TILE_TABS":return{handler:this.tileSelection.bind(this,d),visible:l&&!this.isPageTiledWithType("selection")&&this.props.isSelecting&&d.count()>1,...M(e,D)};case"CONTEXT_UNTILE_SELECTION":return{handler:this.untilePages,visible:this.isPageTiledWithType("selection")&&!s,...M(e,D)};case"CONTEXT_HIBERNATE_TAB":return{handler:this.discardPages.bind(this,U.List.of(n)),visible:!l&&E&&(this.props.isSubstrip||!s),...M(e,D)};case"CONTEXT_HIBERNATE_SELECTED_BACKGROUND_TABS":return{handler:this.discardPages.bind(this,d.filter(e=>!e.active)),visible:Boolean(d.filter(e=>w.find(t=>t.id===e.id)).count()),...M(e,D)};case"CONTEXT_HIBERNATE_TABSTACK":return{handler:this.discardPages.bind(this,b.c.getGroup(r,this.context.vivaldiWindowId).filter(e=>!e.active)),visible:C,...M(e,D)};case"CONTEXT_HIBERNATE_BACKGROUND":const a=w.filter(e=>!Object(K.e)(e));return{handler:this.discardPages.bind(this,a),visible:a.count()>0,...M(e,D)};case"CONTEXT_CLOSE":return{handler:l?()=>this.props.closePage(h):()=>this.props.closePage(n),visible:b.c.canClosePage(n),...M(e,D)};case"CONTEXT_CLOSE_TABSTACK":return{handler:this.closeTabStack,visible:s,...M(e,D)};case"CONTEXT_CLOSE_OTHER":return{handler:l&&N.count()>0?this.closeAllButTab.bind(this,d,t):this.closeAllButTab.bind(this,n,t),visible:l&&N.count()>0||!l&&k,...M(e,D)};case"CONTEXT_CLOSE_LEFT":return{handler:()=>this.closeToLeft(n,t),visible:!l&&k&&b.c.getPages(this.context.vivaldiWindowId).takeUntil(e=>e.id===n.id).count()>0,...M(e,D)};case"CONTEXT_CLOSE_RIGHT":return{handler:()=>this.closeToRight(n,t),visible:!l&&k&&b.c.getPages(this.context.vivaldiWindowId).skipUntil(e=>e.id===n.id).skip(1).count()>0,...M(e,D)};case"CONTEXT_REOPEN":return{handler:this.reopenClosedTab,visible:Boolean(y.a.getTrash().length),...M(e,D)};case"CONTEXT_CONTAINER_PWA":return{visible:n.active,container:{content:"pwa"},...M(e,D)};case"CONTEXT_CUSTOMIZE":return{handler:this.customize,visible:!f,...M(e,D)};case"CONTEXT_MOVE":return{visible:l&&!d.some(e=>n.incognito)||!l&&(t||!s),...M(e,D)};case"CONTEXT_TABSTACK_MOVE":return{visible:!l&&!t&&s,...M(e,D)};case"CONTEXT_MOVE_LEFT":return{handler:()=>p.a.stepPage(n,!1,!1,i),visible:!l,...M(e,D)};case"CONTEXT_MOVE_RIGHT":return{handler:()=>p.a.stepPage(n,!0,!1,i),visible:!l,...M(e,D)};case"CONTEXT_MOVE_STACK_LEFT":return{handler:()=>p.a.stepPage(n,!1,!0,i),visible:!l,...M(e,D)};case"CONTEXT_MOVE_STACK_RIGHT":return{handler:()=>p.a.stepPage(n,!0,!0,i),visible:!l,...M(e,D)};case"CONTEXT_CONTAINER_MOVE_TO_WINDOW":return{items:await L(),...M(e,D)};default:return{...M(e,D)}}})}),Q(this,"isKnownDropMimeType",e=>e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e||"text/uri-list"===e||"text/plain"===e)),Q(this,"onDragEnterHandler",e=>{const{groupId:t,prefValues:a,isInsideAccordion:n,handleExpandAccordion:i}=this.props;t&&"accordion"===a[H.kTabsStackingMode]&&!n&&i&&(clearTimeout(this.accordionExpandTimeout),this.accordionExpandTimeout=setTimeout(()=>i(t),1e3)),this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation())}),Q(this,"onDragLeaveHandler",e=>{e.persist(),this.props.groupId&&"accordion"===this.props.prefValues[H.kTabsStackingMode]&&!this.props.isInsideAccordion&&clearTimeout(this.accordionExpandTimeout),this.props.onDragLeave(e)}),Q(this,"onDragOverHandler",e=>{if(this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation()),e.dataTransfer.types.includes("vivaldi/x-button-toolbar"))return;const t=this.props.handleTabPosition;if(t&&this.props.isExpectingDrop&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)){const{pageX:a,pageY:n}=e,i=this.getDropSide(a,n);t(this.props.pageId,i)}else{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.dataTransfer.dropEffect="copy");const t=b.c.getPageById(this.props.pageId);t&&ee(e.screenX,e.screenY,250,()=>this.props.onActivate(t))}}),Q(this,"getDropSide",(e,t)=>{if(!(this.refTab.current instanceof Element))return"before";const{pinned:a,prefValues:n,direction:i,isSubstrip:s,isInsideAccordion:r}=this.props,o=!a&&n[H.kTabsStackingAllowDnd]&&"off"!==n[H.kTabsStackingMode]&&!s&&!r,l=this.refTab.current.getBoundingClientRect(),[c,u]=[e-l.left,t-l.top];return"row"===i?o?c<.15*l.width?"before":c>.85*l.width?"after":"over":c<l.width/2?"before":"after":"column"===i?o?u<.15*l.height?"before":u>.85*l.height?"after":"over":u<l.height/2?"before":"after":"before"}),Q(this,"onDropHandler",e=>{this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation());const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),a=e.dataTransfer.getData("text/uri-list"),n=e.dataTransfer.getData("text/plain");t?this.props.droppedTabHandler(t):a?a.split("\n").forEach((e,t)=>p.a.openURL(e,{incognito:this.props.incognito,inCurrent:0===t,inSpecificPageId:0===t?this.props.pageId:void 0,inBackground:0!==t})):n&&Object($.o)(n)&&p.a.openURL(n,{inCurrent:!0,inSpecificPageId:this.props.pageId,incognito:this.props.incognito})}),Q(this,"onFocusHandler",e=>{if(this.state.awaitingEdit)return;const t=b.c.getPageById(this.props.pageId);t&&!this.props.pageSelection.contains(t.id)&&p.a.setSelection(t,!1,!1,!0)}),Q(this,"renderCustomTabStackTitle",e=>{const t=this.props.groupId,a=b.c.getTitleByGroupId(t,e),i=()=>{this.isIMEOpen=!0},s=()=>{this.isIMEOpen=!1},r=e=>{"Enter"!==e.key||this.isIMEOpen?"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),this.setState({awaitingEdit:null})):(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLInputElement&&c(e.target.value))},o=e=>{e&&document.activeElement!==e&&e.select()},l=e=>{c(e.target.value)},c=e=>{Object(R.a)(t,e),this.setState({awaitingEdit:null})},{awaitingEdit:u}=this.state;return t&&t===u?n.createElement("input",{className:"tab-title-edit",defaultValue:a,ref:o,onBlur:l,onKeyDown:r,onMouseDown:this.containEvent,onCompositionStart:i,onCompositionUpdate:i,onCompositionEnd:s,__source:{fileName:Z,lineNumber:1642,columnNumber:9}}):a}),Q(this,"renderStackFrame",(e,t)=>{const{prefValues:a,isHiddenForDrag:i,accordionSize:s}=this.props,r=this.isHorizontal(),o="accordion"===a[H.kTabsStackingMode],l=t||this.props.isInsideAccordion&&this.props.isFirstInGroup;let c,u,m=null;if(l){if(s>0)r?c=`${s}px`:u=`${s}px`;else{const e=o&&!i?16:0;r?c=`calc(var(--Width) + ${e}px)`:u=`calc(var(--Height) + ${e}px)`}m={width:c,height:u}}return(n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t&&!r?"100%":null,height:t&&r?"100%":null,style:m,className:D()({"svg-tab-selection":e,"svg-tab-stack":l}),__source:{fileName:Z,lineNumber:1694,columnNumber:12}},l&&n.createElement("rect",{className:"stack-frame",width:"100%",height:"100%",__source:{fileName:Z,lineNumber:1703,columnNumber:25}}),e&&n.createElement("rect",{className:"inner",width:"100%",height:"100%",__source:{fileName:Z,lineNumber:1704,columnNumber:19}}),e&&n.createElement("rect",{className:"outer",width:"100%",height:"100%",__source:{fileName:Z,lineNumber:1705,columnNumber:19}})))}),this.indicators={},this.isIMEOpen=!1;const a=Y.p.getDisplayTitleByUrl(t.url,t.title),i=Object(x.a)(a,t.url,9),l=t.isStack&&!t.isSubstrip?Object(k.a)("Tab stack with $1 tab","Tab stack with $1 tabs",[this.props.stack.size]):a,d=!t.isStack&&t.isHiddenForDrag,N=t.isStack&&!t.stack.every(e=>this.props.pageIdsHiddenForDrag.has(e.id));this.state={dragOver:"none",awaitingEdit:null,fadeDiscardedTabs:this.props.prefValues[H.kTabsDimHibernated],loadingProgress:te(this.props.pageId,this.props.url,this.props.isInternalPage),mediaState:u.a.getState().get(this.props.pageId)||Object(U.Set)(),timeLeft:void 0,displayTitle:a,titleNumber:i,tabTitle:l,isHidden:d||N}}componentDidMount(){this._mediaStateStoreToken=u.a.addListener(this._onMediaStateStoreChanged),_.a.addChangeListener(this._onProgressStateStoreChanged),N.a.addChangeListener(this._alarmsChanged),q(this,ae,!0)}componentWillUnmount(){_.a.removeChangeListener(this._onProgressStateStoreChanged),this._mediaStateStoreToken.remove(),this._clearAlarmInterval(),q(this,ae,!1),N.a.removeChangeListener(this._alarmsChanged)}componentDidUpdate(e){!0===e.active&&!1===this.props.active&&null!==this.state.awaitingEdit&&this.setState({awaitingEdit:null}),!1===e.discarded&&!0===this.props.discarded&&(this.discardedFadeInTimeId&&(clearTimeout(this.discardedFadeInTimeId),delete this.discardedFadeInTimeId),this.props.prefValues[H.kTabsDimHibernated]||(this.discardedFadeInTimeId=setTimeout(this.clearFadedDiscardedTabs,2e3)),this.setState({fadeDiscardedTabs:!0}));const t=e.stack!==this.props.stack;if(e.url!==this.props.url||e.title!==this.props.title){const e=Y.p.getDisplayTitleByUrl(this.props.url,this.props.title),a=Object(x.a)(e,this.props.url,9);if(this.setState({displayTitle:e,titleNumber:a}),t){const t=this.props.isStack&&!this.props.isSubstrip?Object(k.a)("Tab stack with $1 tab","Tab stack with $1 tabs",[this.props.stack.size]):e;this.setState({tabTitle:t})}}if(t||e.isStack!==this.props.isStack||e.isHiddenForDrag!==this.props.isHiddenForDrag||e.pageIdsHiddenForDrag!==this.props.pageIdsHiddenForDrag){const e=!this.props.isStack&&this.props.isHiddenForDrag,t=this.props.isStack&&this.props.stack.every(e=>this.props.pageIdsHiddenForDrag.has(e.id));this.setState({isHidden:e||t})}}render(){const{pageId:e,discarded:t,prefValues:a,faviconUrl:s,isInternalPage:r,isStack:o,pinned:c,isUnread:u,shouldShowCloseButton:m}=this.props,{loadingProgress:d,mediaState:h,timeLeft:p,displayTitle:b,titleNumber:g,isHidden:N,tabTitle:f}=this.state,_=this.props.active,v=Boolean(this.props.smallTab),E=0===h.size||t,y=!N&&this.props.isSelecting&&this.props.pageSelection.contains(e),S=a[H.kTabsStackingMode],T=o&&!this.props.isSubstrip&&"off"!==S&&("dotted"===S||a[H.kTabsStackingPreferDotted]),k=D()({tab:!0,"tab-acceptsdrop":this.props.acceptsDrop,marked:y,pinned:c,active:_,uifocusstop:_,highlighted:this.props.highlighted&&!a[H.kTabsSelectionEnabled],"tab-small":v&&!c,"tab-mini":this.props.miniTab&&!c,"tab-accordion":this.props.isStack&&"accordion"===S,"tab-in-accordion":this.props.isInsideAccordion,"tab-first-in-group":this.props.isFirstInGroup,"tab-last-in-group":this.props.isLastInGroup,"force-hover":this.props.forceHover,"tab-group":T,"audio-on":h.has("playing")||h.has("pip"),"audio-muted":h.has("muting"),"tab-captured":h.has("capturing"),"button-off":!m,unread:a[H.kTabsUnread]&&u&&!_&&!o&&!r,isdiscarded:this.state.fadeDiscardedTabs&&t,insubstrip:this.props.isSubstrip}),A="progress_bar"===a[H.kTabsPageLoadInfo]&&!r&&(_&&!this.props.addressBarVisible||_&&!a[H.kAddressBarShowProgress]||!_),I=v||c?"#111":"",M=p||A,P=p||d,x=o&&!this.props.isSubstrip&&!a[H.kTabsStackingPreferDotted]&&!this.props.isInsideAccordion&&("substrip"===S||"accordion"===S),L=_?a[H.kKeyboardTabToAll]:"-1";return n.createElement(n.Fragment,null,n.createElement("div",{id:this.props.id,className:k,ref:this.refTab,"data-id":this.props.id,title:a[H.kTabsTooltip]?null:f,onContextMenu:e=>this.onContextMenu(this.props.isSubstrip||this.props.isInsideAccordion,e),onMouseEnter:this.mouseEnterHandler,onMouseDown:e=>e.preventDefault(),onDragEnter:this.onDragEnterHandler,onDragOver:this.onDragOverHandler,onDragLeave:this.onDragLeaveHandler,onDrop:this.onDropHandler,onKeyDown:this.keyDown,onFocus:a[H.kTabsSelectionEnabled]?this.onFocusHandler:null,tabIndex:L,__source:{fileName:Z,lineNumber:1799,columnNumber:7}},n.createElement("div",{className:"tab-header",style:this.props.isExpectingDrop?{pointerEvents:"none"}:null,__source:{fileName:Z,lineNumber:1818,columnNumber:9}},M&&n.createElement(w.a,{progress:P,__source:{fileName:Z,lineNumber:1824,columnNumber:13}}),n.createElement(l.a,{refFavicon:this.refFavicon,faviconUrl:s,progress:this.state.loadingProgress,progressType:"progress_icon"===a[H.kTabsPageLoadInfo]||"spinner"===a[H.kTabsPageLoadInfo]?a[H.kTabsPageLoadInfo]:void 0,__source:{fileName:Z,lineNumber:1827,columnNumber:11}}),n.createElement("span",{className:"title",onDoubleClick:a[H.kTabsMinimize]||a[H.kTabsDoubleClickClose]?null:this.renameTabStack,__source:{fileName:Z,lineNumber:1838,columnNumber:11}},!o||this.props.isSubstrip||this.props.isInsideAccordion?b:this.renderCustomTabStackTitle(b)),x&&n.createElement("div",{className:"stack-counter",__source:{fileName:Z,lineNumber:1851,columnNumber:13}},this.props.stack.count()),m&&n.createElement(C.a,{onClick:this.handleClose,onMouseDown:this.blockEvent,__source:{fileName:Z,lineNumber:1857,columnNumber:13}}),!E&&n.createElement("span",{className:"tab-audio",onClick:this.handleMedia,onAuxClick:this.handleClose,onMouseDown:this.blockEvent,__source:{fileName:Z,lineNumber:1864,columnNumber:13}},h.has("capturing")?n.createElement("span",{className:"audioicon",width:"16",height:"16",dangerouslySetInnerHTML:{__html:X.Md},__source:{fileName:Z,lineNumber:1871,columnNumber:17}}):n.createElement(i.a,{color:I,animated:a[H.kThemeUseAnimation],mediaState:h,active:_,__source:{fileName:Z,lineNumber:1874,columnNumber:17}})),a[H.kTabsCounterDetection]&&g&&n.createElement("span",{className:"button-badge",__source:{fileName:Z,lineNumber:1885,columnNumber:13}},g)),a[H.kTabsThumbnails]&&n.createElement(O.a,{src:this.props.thumbnail,__source:{fileName:Z,lineNumber:1890,columnNumber:11}}),(y||(o||this.props.isInsideAccordion&&this.props.isFirstInGroup)&&!this.props.isSubstrip&&!T)&&this.renderStackFrame(y,o)),T&&this.renderTabGroupIndicator())}}Q(ne,"contextType",S.a),t.a=ne}).call(this,a(82))},function(e,t,a){"use strict";var n=a(111),i=a(0),s=a.n(i),r=a(9),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\LoadingFavicon.jsx";class l extends s.a.PureComponent{render(){const{faviconUrl:e,progress:t,progressType:a}=this.props,i=Math.round(100*t),l=t<1,c=e.startsWith("<svg");return l&&"spinner"===a?s.a.createElement("span",{className:"favicon spinner",dangerouslySetInnerHTML:{__html:r.le},__source:{fileName:o,lineNumber:21,columnNumber:14}}):l&&"progress_icon"===a?s.a.createElement("span",{className:"favicon progress",style:{"--progressInPercent":i+"%"},__source:{fileName:o,lineNumber:27,columnNumber:14}}):s.a.createElement("span",{className:`favicon jstest-favicon-image ${c?"svg":""}`,__source:{fileName:o,lineNumber:33,columnNumber:7}},s.a.createElement(n.a,{refFavicon:this.props.refFavicon,url:e,avoidCache:!0,__source:{fileName:o,lineNumber:34,columnNumber:9}}))}}t.a=l},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a.n(n),s=a(2),r=a(9);function o({onClick:e,onMouseDown:t}){const a=Object(s.a)("Close Tab")+"\n"+Object(s.a)("$1 click to close other tabs except this one",[Object(s.a)("key","Alt")]);return(i.a.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:r.Nd},onClick:e,onAuxClick:e,onMouseDown:t,title:a,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabCloseButton.jsx",lineNumber:26,columnNumber:5}}))}},function(e,t,a){"use strict";(function(e){var n=a(0),i=a(40),s=a.n(i),r=a(444),o=a(558),l=a(25),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tooltip\\Tooltip.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,d(e,t,"set"),a),a}function d(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function h(){let e=document.getElementById("vivaldi-tooltip");if(!e){const t=document.getElementById("app");e=document.createElement("div"),e.id="vivaldi-tooltip",t&&t.appendChild(e)}return e}o.a.addListener(()=>{o.a.allHidden()&&s.a.unmountComponentAtNode(h())});var p=new WeakMap;class b extends n.PureComponent{constructor(...e){super(...e),u(this,"state",{show:o.a.getShowTooltip(this.props.id),isDraggingOver:!1}),p.set(this,{writable:!0,value:void 0}),u(this,"_onStoreChange",()=>{this.setState({show:o.a.getShowTooltip(this.props.id)})}),u(this,"onDragEnter",()=>{r.a.hideTooltip(0),this.setState({isDraggingOver:!0})}),u(this,"onDragLeave",()=>{this.setState({isDraggingOver:!1})}),u(this,"onMouseEnter",()=>{if(!this.props.disabled&&!this.state.isDraggingOver){const e=o.a.allHidden()?this.props.appearDelay:0;r.a.showTooltip(this.props.id,e)}}),u(this,"onMouseLeave",()=>{this.props.disabled||r.a.hideTooltip(this.props.disappearDelay)}),u(this,"onClick",()=>{r.a.hideTooltip(0)}),u(this,"tooltipIsOpen",()=>{const e=h().firstChild;return Boolean(e instanceof Element&&e.classList.contains("tooltip"))}),u(this,"getPosition",(e,t)=>{const a=s.a.findDOMNode(this);let n,i;if(!(a&&a.firstChild instanceof Element))return{left:n,top:i};const r=a.firstChild.getBoundingClientRect(),o=this.props.noPadding?0:4;if("above"===this.props.placement){n=r.left+r.width/2-e/2,i=r.top-t-o}else if("after"===this.props.placement)n=r.left+r.width+o,i=r.top;else if("before"===this.props.placement)n=r.left-e-o,i=r.top;else{n=r.left+r.width/2-e/2,i=r.top+r.height+o}return n<0&&(n=0),i<0&&(i=0),n+e>this.context.innerWidth&&(n-=n+e-this.context.innerWidth),i+t>this.context.innerHeight&&(i-=i+t-this.context.innerHeight),{left:n,top:i}}),u(this,"renderToolTip",()=>{if(!this.state.show)return;const{width:e,height:t,content:a}=this.props.content(this.props.id),{left:i,top:r=0}=this.getPosition(e,t),o=r+t>=this.context.innerHeight,l=o?"flex-end":"flex-start",u=this.props.noPadding?0:4,m=0===r?u:0,d=o?u:0,p=this.props.pointerEvents,b=["after","before"].includes(this.props.placement)?`top ${this.props.transitionSpeed}ms`:`left ${this.props.transitionSpeed}ms`;s.a.render(n.createElement("div",{className:"tooltip",style:{top:r,left:i,pointerEvents:p,height:t,width:e,paddingTop:m,paddingBottom:d,alignItems:l,transition:b},onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:c,lineNumber:201,columnNumber:7}},a),h())})}componentWillUnmount(){var t,a;(t=this,a=p,function(e,t){return t.get?t.get.call(e):t.value}(t,d(t,a,"get"))).remove(),e.nextTick(r.a.hideTooltip)}componentDidMount(){m(this,p,o.a.addListener(this._onStoreChange)),this.props.disabled||this.renderToolTip()}componentDidUpdate(e){this.props.disabled||this.renderToolTip()}render(){const e=n.Children.only(this.props.children);return(n.createElement("span",{onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:c,lineNumber:225,columnNumber:7}},e))}}u(b,"contextType",l.a),t.a=b}).call(this,a(82))},,function(e,t,a){"use strict";var n=a(0),i=a(140),s=a(44),r=a(91),o=a(14),l=a(13),c=a(22),u=a(201),m=a(253),d=a(25),h=a(2),p=a(26),b=a(9),g=a(169),N=a(23);function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends n.PureComponent{constructor(...e){super(...e),f(this,"trashButton",n.createRef()),f(this,"state",{trash:m.a.getTrash()}),f(this,"onTrashStoreChange",()=>{this.setState({trash:m.a.getTrash()})}),f(this,"emptyTrash",()=>{u.a.emptyTrash()}),f(this,"undeleteTab",e=>{u.a.undeleteTab(e)}),f(this,"undeleteWindow",e=>{u.a.undeleteWindow(e)}),f(this,"undo",()=>{if(this.state.trash.length>0){const e=this.state.trash[0];e.tab?this.undeleteTab(e.tab):e.window&&this.undeleteWindow(e.window)}}),f(this,"trimTitle",e=>(e.length>70&&(e=e.substring(0,70)+"..."),e)),f(this,"_tabToTitle",e=>this.trimTitle(N.p.getDisplayTitle(e))),f(this,"_onCommandSpy",()=>{this.trashButton.current&&this.trashButton.current.showMenu()}),f(this,"_getContextMenuPromise",e=>()=>{const t=r.a.getOptionFunction(e);return r.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_CONTAINER_CLOSED_TAB":return{items:s.default.getClosedTabContainer(),...t(e,{})};default:return{...t(e,{})}}})}),f(this,"onDrop",e=>{const t=e.dataTransfer.getData("vivaldi/x-tab-entries");if(t){e.preventDefault(),e.stopPropagation();const a=JSON.parse(t).ids.map(e=>parseInt(e)).map(e=>l.c.getPages(this.context.vivaldiWindowId).find(t=>t.id===e)).filter(Boolean);o.a.closePage(Object(p.List)(a))}})}componentDidMount(){m.a.addChangeListener(this.onTrashStoreChange),i.a.addListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}componentWillUnmount(){m.a.removeChangeListener(this.onTrashStoreChange),i.a.removeListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}render(){return n.createElement(c.a,{ref:this.trashButton,className:"toggle-trash",onDrop:this.onDrop,onDragEnter:g.default,image:b.Wd.large,onMiddleClick:this.undo,menuPromise:this._getContextMenuPromise("closedtab"),menuOrigin:"bottomLeft",mimeType:"vivaldi/x-tab-entries",edgeAmount:0,tooltip:Object(h.a)("Show Closed Tabs")+"\n"+Object(h.a)("$1 click to reopen last closed tab",[Object(h.a)("key","Control")]),__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Trash.jsx",lineNumber:136,columnNumber:12}})}}f(_,"contextType",d.a),t.a=_},function(e,t,a){"use strict";(function(e){var n=a(150),i=a(44),s=a(31),r=a(1379),o=a(843),l=a(844),c=a(6),u=a(0),m=a.n(u),d=a(40),h=a.n(d),p=a(20),b=a.n(p),g=a(97),N=a(1),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubar.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,E(e,t,"set"),a),a}function E(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var C=new WeakMap;class w extends m.a.PureComponent{constructor(t){super(t),_(this,"acceptEnterId",-1),_(this,"timer",null),_(this,"hasMenu",!1),C.set(this,{writable:!0,value:!1}),_(this,"_getMenuItems",e=>i.default.getNamedMenu("menubar",e).filter(e=>"function"!=typeof e.testVisibility||e.testVisibility())),_(this,"_onPrefsChange",()=>{this._setupShortcuts(this.state.items)}),_(this,"_onCommandStoreChange",e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0;const e=this._getMenuItems(!1);this.setState({items:e,shortcuts:s.a.getShortcutsForSubMenus(e)});break;case"shortcut":this._setupShortcuts(this.state.items)}}),_(this,"_handleItemActivated",e=>{l.a.show(e,this._getSiblings(),"bottom",this._onMenuVisibilityChanged)}),_(this,"_handleItemEnter",e=>{-1!==this.acceptEnterId&&this.acceptEnterId!==e||(Object(g.a)(h.a.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))}),_(this,"_handleItemLeave",e=>{-1===this.state.openMenuId&&this.setState({highlightedId:-1})}),_(this,"_handleItemBlur",t=>{e.nextTick(()=>{Object(g.a)(h.a.findDOMNode(this))||this.setState({highlightedId:-1})})}),_(this,"_handleLeaveBar",()=>{this.setState({highlightedId:-1}),n.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),_(this,"_handleDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),_(this,"_changeFocus",()=>{Object(g.a)(h.a.findDOMNode(this))?this._handleLeaveBar():this._moveFocus(this.state.highlightedId,"current",!0)}),_(this,"_moveFocus",(e,t,a)=>{if(!0===a||Object(g.a)(h.a.findDOMNode(this))){const a=this.state.items.map((e,t)=>this.state.shortcuts[t]?t:-1).filter(e=>-1!==e);if(0===a.length)return;if("current"===t){const t=e<0?0:a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let n=a.indexOf(e);n="right"===t?n+1>=a.length?0:n+1:n<=0?a.length-1:n-1,e=a[n]}const n=document.querySelector(`button.menubarItem.menubar[data-id="${e}"]`);n&&n instanceof HTMLButtonElement&&this.setState({highlightedId:e},()=>n.focus())}}),_(this,"_handleItemHighlightMissing",e=>{this.setState({highlightedId:e})}),_(this,"_onMenuVisibilityChanged",e=>{var t;(function(e,t){return t.get?t.get.call(e):t.value})(t=this,E(t,C,"get"))&&(-1===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout(()=>{this.acceptEnterId=-1,this.timer=null},100),Object(g.a)(h.a.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:-1})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e}),this._showAccessKeys(!1))}),_(this,"_showAccessKeys",e=>{this.setState({underlineAccessKeys:e})}),_(this,"_setupShortcuts",e=>{this.setState({shortcuts:s.a.getShortcutsForSubMenus(e)})}),_(this,"_activateByAccessKey",e=>{for(let t=0;t<this.state.items.length;t++)if(this.state.shortcuts[t]&&this.state.shortcuts[t].key===e)return this._handleItemActivated(t),!0;return!1}),_(this,"_getSiblings",()=>{const e=this._getMenuItems(!0);return Array.from(document.querySelectorAll("button.menubarItem.menubar")).map((t,a)=>{const n=t.getBoundingClientRect();return{id:parseInt(t.dataset.id),rect:{x:parseInt(n.left),y:parseInt(n.top),width:parseInt(n.width),height:parseInt(n.height)},menu:{items:e[a].items||[],expandId:"",preferred:[]}}})}),_(this,"renderAll",()=>this.state.items.map((e,t)=>{if(!this.state.shortcuts[t])return null;const a=0===t?this.props.keyAccess:-1,n=t.toString();return m.a.createElement(r.a,{key:n,id:t,keyAccess:a,item:e,shortcut:this.state.shortcuts[t],underlineAccessKeys:this.state.underlineAccessKeys,openMenuId:this.state.openMenuId,highlighted:this.state.highlightedId===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onAccessKey:this._activateByAccessKey,onLeaveBar:this._handleLeaveBar,__source:{fileName:f,lineNumber:301,columnNumber:11}})})),this.hasMenu=i.default.isNamedMenuAvailable("menubar");const a=this._getMenuItems(!1);this.state={items:a,shortcuts:s.a.getShortcutsForSubMenus(a),openMenuId:-1,highlightedId:-1,underlineAccessKeys:!1}}componentDidMount(){c.a.addListener(N.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),i.default.addChangeListener(this._onCommandStoreChange),this._requestMenu(),v(this,C,!0)}componentWillUnmount(){this.timer&&clearTimeout(this.timer),c.a.removeListener(N.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),i.default.removeChangeListener(this._onCommandStoreChange),v(this,C,!1)}_requestMenu(){this.hasMenu||n.default.requestNamedMenu("menubar")}render(){return m.a.createElement(m.a.Fragment,{__source:{fileName:f,lineNumber:324,columnNumber:7}},m.a.createElement(o.a,{changeFocus:this._changeFocus,showAccessKeys:this._showAccessKeys,__source:{fileName:f,lineNumber:325,columnNumber:9}}),m.a.createElement("div",{className:b()({menubar:!0,horizontal:this.props.horizontal}),onDoubleClick:this._handleDoubleClick,tabIndex:"-1",__source:{fileName:f,lineNumber:329,columnNumber:9}},this.renderAll()))}}t.a=w}).call(this,a(82))},function(e,t,a){"use strict";var n=a(85),i=a(31),s=a(0),r=a.n(s),o=a(20),l=a.n(o),c=a(74),u=a(188),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubaritem.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends r.a.PureComponent{constructor(...e){super(...e),d(this,"_handleShortcutChange",(e,t)=>{e&&(t?n.a.bind(e,this._handleMenuShortcut):n.a.unbind(e,this._handleMenuShortcut))}),d(this,"_getDisplayName",()=>{const e=i.a.getMenuBarString(this.props.item,this.props.shortcut);if(this.props.underlineAccessKeys&&-1!==e.offset){const t=e.offset;return(r.a.createElement("span",{__source:{fileName:m,lineNumber:70,columnNumber:9}},t>0?e.name.substring(0,t):"",r.a.createElement("span",{className:"underlined",__source:{fileName:m,lineNumber:72,columnNumber:11}},e.name.substring(t,t+1)),e.name.substring(t+1)))}return r.a.createElement("span",{__source:{fileName:m,lineNumber:66,columnNumber:15}},e.name)}),d(this,"_handleMenuShortcut",()=>{this.props.onItemActivated(this.props.id)}),d(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(-1!==this.props.openMenuId)return;this.props.onLeaveBar();break;default:if(Object(u.c)(e)&&this.props.onAccessKey(e.key))break;return}e.preventDefault(),e.stopPropagation()}),d(this,"_handleMouseDown",e=>{e.button===c.a.kLeft&&c.a.isNoModifierPressed(e)&&this.props.onItemActivated(this.props.id),e.preventDefault(),e.stopPropagation()}),d(this,"_handleMouseEnter",e=>{this.props.onItemEnter(this.props.id)}),d(this,"_handleMouseLeave",e=>{this.props.onItemLeave(this.props.id)}),d(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.id)}),d(this,"_handleFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)})}componentDidMount(){this._handleShortcutChange(this.props.shortcut.shortcut,!0)}componentWillUnmount(){this._handleShortcutChange(this.props.shortcut.shortcut,!1)}UNSAFE_componentWillReceiveProps(e){e.shortcut!==this.props.shortcut&&(this._handleShortcutChange(this.props.shortcut.shortcut,!1),this._handleShortcutChange(e.shortcut.shortcut,!0))}render(){return r.a.createElement("button",{"data-id":this.props.id,"data-offset":0,tabIndex:this.props.keyAccess,className:l()({menubarItem:!0,uifocusstop:0===this.props.id,highlighted:this.props.highlighted,menubar:!0}),onBlur:this._handleBlur,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseDown:this._handleMouseDown,__source:{fileName:m,lineNumber:145,columnNumber:7}},this._getDisplayName())}}t.a=h},,function(e,t,a){"use strict";var n=a(6),i=a(87),s=a(12),r=a(35),o=a(7),l=a(1);const c=["TABCOLOR_BEHIND_TABS"],u=[l.kThemeTransparentTabBar,l.kSystemHasDesktopWallpaperProtocol,l.kThemeBackgroundData,l.kThemeBackgroundPosition,l.kThemeBackgroundUserColor,l.kThemeBackgroundUserImage,l.kThemePrivateWindow];async function m(e){const t=await new Promise(e=>o.a.windowPrivate.getCurrentId(e)),a=await i.e.createImageBackground(t);s.a.dispatch({actionType:"THEME_SET_WINDOWSTYLE",style:a})}async function d(e,t,a){switch(a){case l.kSystemHasDesktopWallpaperProtocol:case l.kThemeTransparentTabBar:case l.kThemeBackgroundData:case l.kThemeBackgroundPosition:case l.kThemeBackgroundUserColor:case l.kThemeBackgroundUserImage:case l.kThemePrivateWindow:const e=await new Promise(e=>o.a.windowPrivate.getCurrentId(e)),t=await i.e.createImageBackground(e);s.a.dispatch({actionType:"THEME_SET_WINDOWSTYLE",style:t})}}t.a={loadPromise:async function(){const e=await new Promise(e=>o.a.windowPrivate.getCurrentId(e)),t=await i.e.createImageBackground(e);s.a.dispatch({actionType:"THEME_SET_WINDOWSTYLE",style:t}),n.a.addListener(u,d),r.a.addMultiListener(c,m)}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(12),i=a(7);class s{static init(){i.a.autoUpdate.onDidAbortWithError.addListener((e,t)=>{e&&console.warn(e,t),n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidAbortWithError",message:t})}),i.a.autoUpdate.onDidFindValidUpdate.addListener((e,t)=>{n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidFindValidUpdate",version:t,releaseNotesUrl:e})}),i.a.autoUpdate.onWillDownloadUpdate.addListener(e=>{n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onWillDownloadUpdate",version:e})}),i.a.autoUpdate.onDidDownloadUpdate.addListener(e=>{n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onDidDownloadUpdate",version:e})}),i.a.autoUpdate.onWillInstallUpdateOnQuit.addListener(e=>{n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onWillInstallUpdateOnQuit",version:e})}),i.a.autoUpdate.onUpdaterDidRelaunchApplication.addListener(()=>{n.a.dispatch({actionType:"VIVALDI_AUTOUPDATE_SET_STATUS",status:"onUpdaterDidRelaunchApplication"})})}}},,function(e,t,a){"use strict";function n(){0}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";var n=a(28),i=a(7);const s=function(){if("function"==typeof i.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist){var e=n.b.getSpeeddialFolders();if(e&&0!==e.length&&e[0].children){var t=e[0].children.filter(e=>e.url).map(e=>({title:e.title,url:e.url}));i.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist(t)}}};const r={start:function(){"function"==typeof i.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&(s(),n.b.addChangeListener(s))},stop:function(){"function"==typeof i.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&n.b.removeChangeListener(s)}};t.a=r},,,,,function(e,t,a){"use strict";var n=a(130),i=a(79),s=a(50),r=a(28),o=a(773),l=a(90),c=a(13),u=a(0),m=a.n(u),d=a(2),h=a(9),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\BookmarkDialog.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends m.a.PureComponent{constructor(...e){super(...e),b(this,"state",{title:"",url:"",description:"",nickname:"",thumbnail:"",isFolder:!1,parentId:""}),b(this,"_parentId",""),b(this,"_index",0),b(this,"onCancel",()=>{this.props.onClose()}),b(this,"onSave",()=>{if("edit"===this.props.mode){const e={id:this.props.id,title:this.state.title,url:this.state.url,thumbnail:this.state.thumbnail,nickname:this.state.nickname,description:this.state.description};i.a.verifyNode(e,this.state.isFolder).then(e=>{if(e){const t=r.b.getItemById(e.id);t&&t.parentId!==this.state.parentId?s.a.move([t.id],this.state.parentId,0).then(()=>{s.a.update(e.id,e).then(()=>this.props.onClose())}):s.a.update(e.id,e).then(()=>this.props.onClose())}})}else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){const e={parentId:this.state.parentId,index:this.state.parentId===this._parentId?this._index:0,title:this.state.title,url:this.state.url,nickname:this.state.nickname,description:this.state.description};i.a.verifyNode(e,this.state.isFolder).then(e=>{e&&s.a.create(e).then(()=>this.props.onClose())})}else this.props.onClose()}),b(this,"changeValue",(e,t)=>{const a={};a[e]=t.target.value,this.setState(a)})}componentWillMount(){const e=r.b.getItemById(this.props.id);if("edit"===this.props.mode)e&&this.setState({title:e.title,url:e.url,thumbnail:e.thumbnail,description:e.description,nickname:e.nickname,isFolder:r.b.isFolder(e),parentId:e.parentId});else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){e&&r.b.isFolder(e)?(this._parentId=e.id,this._index=0):(this._parentId=e.parentId,this._index=e.index+1);const t={};if("addbookmark"===this.props.mode){const e=c.c.unsafeGetActivePage();e&&(t.title=e.title,t.url=e.url,t.thumbnail=e.getIn(["extData","thumbnail"]))}t.isFolder="addfolder"===this.props.mode,t.parentId=this._parentId,this.setState(t)}}render(){let e;switch(this.props.mode){case"edit":e=this.state.isFolder?Object(d.a)("Edit Folder"):Object(d.a)("Edit Bookmark");break;case"addbookmark":e=Object(d.a)("New Bookmark");break;case"addfolder":e=Object(d.a)("title","New Folder")}if(void 0===e)return null;const t=this.state.isFolder?Object(d.a)("Folder Name"):Object(d.a)("Bookmark Name");return(m.a.createElement(l.a,{onRequestClose:this.onCancel,__source:{fileName:p,lineNumber:167,columnNumber:7}},m.a.createElement("div",{className:"edit-bookmark",__source:{fileName:p,lineNumber:168,columnNumber:9}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:p,lineNumber:169,columnNumber:11}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:p,lineNumber:170,columnNumber:13}},e)),m.a.createElement("form",{onSubmit:this.onSave,__source:{fileName:p,lineNumber:172,columnNumber:11}},!1,m.a.createElement("div",{className:"dialog-content",__source:{fileName:p,lineNumber:188,columnNumber:15}},m.a.createElement("input",{className:"title",type:"text",value:this.state.title,onChange:this.changeValue.bind(this,"title"),title:t,placeholder:t,autoFocus:!0,__source:{fileName:p,lineNumber:189,columnNumber:17}}),!1===this.state.isFolder&&m.a.createElement("input",{className:"address",type:"text",value:this.state.url,onChange:this.changeValue.bind(this,"url"),title:Object(d.a)("Address"),placeholder:Object(d.a)("Address"),__source:{fileName:p,lineNumber:200,columnNumber:17}}),void 0!==this.state.parentId&&m.a.createElement(o.a,{selectedItemID:this.state.parentId,title:Object(d.a)("Folder"),onChange:this.changeValue.bind(this,"parentId"),__source:{fileName:p,lineNumber:211,columnNumber:17}}),!1===this.state.isFolder&&m.a.createElement("input",{className:"nickname",type:"text",value:this.state.nickname,onChange:this.changeValue.bind(this,"nickname"),title:Object(d.a)("Nickname"),placeholder:Object(d.a)("Nickname"),__source:{fileName:p,lineNumber:219,columnNumber:17}}),!1===this.state.isFolder&&m.a.createElement("textarea",{className:"description",type:"text",value:this.state.description,onChange:this.changeValue.bind(this,"description"),title:Object(d.a)("Description"),placeholder:Object(d.a)("Description"),__source:{fileName:p,lineNumber:230,columnNumber:17}})),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:p,lineNumber:242,columnNumber:13}},m.a.createElement("input",{type:"submit",className:"primary",value:Object(d.a)("Save"),__source:{fileName:p,lineNumber:243,columnNumber:15}}),m.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(d.a)("Cancel"),__source:{fileName:p,lineNumber:246,columnNumber:15}}))))))}}var N=g,f=a(1273),_=a(492),v=a(356),E=a(311),C=a(151),w=a(57),O=a.n(w),y=a(12),S=a(16);class T extends O.a{constructor(){super(),y.a.register(e=>{switch(e.actionType){case S.a.WEBVIEW_SET_UTILITY_VIEW:this._utilityWebView=e.webview,this.emit("change")}})}getUtilityWebView(){return this._utilityWebView}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}}var k=new T,A=a(161),I=a(10),D=a(523);var M=new class{clearBrowsingData(e,t){const a=k.getUtilityWebView();a&&a.clearData({since:t},Object(D.a)(e,["downloads","formData","history","serverBoundCertificates","serviceWorkers","siteUsageData","pluginData","passwords","typedHistory","siteSettings","discardUserData"]),()=>{I.a.runtime.lastError&&console.warn("Error clearing data: "+I.a.runtime.lastError.message),I.a.browsingData.remove({since:t},Object(D.a)(e,["typedHistory","sessionCookies","persistentCookies","discardUserData"]),()=>{I.a.runtime.lastError&&console.warn("Error clearing data: "+I.a.runtime.lastError.message),e.history&&E.a.removeLocalHistory(t),e.discardUserData&&(s.a.emptyTrash(),C.a.emptyTrash(),A.a.emptyTrash()),y.a.dispatch({actionType:S.a.BROWSING_DATA_REMOVED,dataTypes:e,since:t})})})}};const P=new class extends O.a{emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};y.a.register(e=>{switch(e.actionType){case S.a.BROWSING_DATA_REMOVED:!function(e){P.emitChangeParam("browsingDataRemoved",e)}(e);break;default:return!0}});var x=P,L=a(11),j=a(6),R=a(25),B=a(17),F=a(218),U=a(15),H=a.n(U),V=a(1),W="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\ClearBrowsingHistory.jsx";function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const G=[{text:Object(d.a)("Past Hour"),value:"past_hour",format:"h",difference:-1},{text:Object(d.a)("Past Day"),value:"past_day",format:"d",difference:-1},{text:Object(d.a)("Past Week"),value:"past_week",format:"d",difference:-7},{text:Object(d.a)("Past 4 Weeks"),value:"past_4_weeks",format:"d",difference:-28},{text:Object(d.a)("All Time"),value:"everything",format:"",difference:0}],K=[{value:"history",category:"history",text:Object(d.a)("Browsing History")},{value:"typedHistory",category:"history",text:Object(d.a)("Typed History")},{value:"siteUsageData",category:"history",text:Object(d.a)("Site Usage Data")},{value:"downloads",category:"downloads",text:Object(d.a)("Downloads")},{value:"cookies",category:"sitedata",text:Object(d.a)("Cookies")},{value:"sessionCookies",category:"sitedata",text:Object(d.a)("Cookies")},{value:"persistentCookies",category:"sitedata",text:Object(d.a)("Cookies")},{value:"pluginData",category:"sitedata",text:Object(d.a)("Plugin Data")},{value:"localStorage",category:"storage",text:Object(d.a)("Storage (including Extension Storage)")},{value:"fileSystems",category:"storage",text:Object(d.a)("File Systems")},{value:"webSQL",category:"storage",text:Object(d.a)("Web SQL")},{value:"serverBoundCertificates",category:"storage",text:Object(d.a)("Server Bound Certificates")},{value:"indexedDB",category:"storage",text:Object(d.a)("Indexed DB")},{value:"serviceWorkers",category:"storage",text:Object(d.a)("Service Workers")},{value:"cache",category:"caches",text:Object(d.a)("Cache")},{value:"cacheStorage",category:"caches",text:Object(d.a)("Cache Storage")},{value:"discardUserData",category:"caches",text:Object(d.a)("Discard User Data")},{value:"passwords",category:"passwords",text:Object(d.a)("Passwords (including your Sync login password)")},{value:"formData",category:"forms",text:Object(d.a)("Form Autofill Data")},{value:"appcache",category:"appcache",text:Object(d.a)("Applications Cache")},{value:"siteSettings",category:"sitesettings",text:Object(d.a)("Site Settings")}];class Y extends m.a.PureComponent{constructor(e){super(e),z(this,"_onBrowsingDataStoreChange",()=>{this.props.onYes&&this.props.onYes()}),z(this,"selectChanged",e=>{this.updateClearDownloadsCounters({deleteHistoryFrom:e.target.value}),this.updateClearBrowsingHistoryCounters({deleteHistoryFrom:e.target.value}),this.setState({deleteHistoryFrom:e.target.value})}),z(this,"_onYes",e=>{L.a.set(V.kClearPrivateDataEntries,this.state.dataToRemove),L.a.set(V.kClearPrivateDataRange,this.state.deleteHistoryFrom),this.setState({inProgress:!0}),e={deleteHistoryFrom:this.state.deleteHistoryFrom,...e};const t=G.find(e=>this.state.deleteHistoryFrom===e.value),a=t&&"everything"!==this.state.deleteHistoryFrom?H()().add(t.difference,t.format).startOf(t.format).valueOf():0;M.clearBrowsingData({...this.state.dataToRemove},a)}),z(this,"_onNo",()=>{this.props.onNo&&this.props.onNo()}),z(this,"updateClearDownloadsCounters",e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,downloads:this.state.dataToRemove.downloads,...e}).deleteHistoryFrom)I.a.downloads.search({},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,downloads:e.length}}))});else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);I.a.downloads.search({},e=>{const a=e.filter(e=>H()(e.startTime).valueOf()>t);this.setState(e=>({dataToRemoveCounters:{...e.dataToRemoveCounters,downloads:a.length}}))})}}),z(this,"getSelectedStartTime",e=>{const t=G.find(t=>e===t.value);let a;return a=t?H()().add(t.difference,t.format).startOf(t.format).valueOf():H()().add(-1,"h").startOf("h").valueOf(),a}),z(this,"updateClearBrowsingHistoryCounters",e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,history:this.state.dataToRemove.history,...e}).deleteHistoryFrom)I.a.history.search({text:"",startTime:0,maxResults:1e6},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}}))});else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);I.a.history.search({text:"",maxResults:1e6,startTime:t},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}}))})}}),z(this,"toggleAll",()=>{this.setState(e=>{const t=!e.all,a={};return Object.keys(e.dataToRemove).forEach(e=>{a[e]=t}),{all:t,dataToRemove:a}})}),z(this,"clearDataChange",(e,t)=>{"history"===e&&this.updateClearBrowsingHistoryCounters({history:t.target.checked}),"downloads"===e&&this.updateClearDownloadsCounters({downloads:t.target.checked});const a=K.reduce((a,n)=>(n.category===e&&(a[n.value]=t.target.checked),a),{});this.setState(e=>{const t={...e.dataToRemove,...a};return{dataToRemove:t,all:Boolean(!Object.keys(t).find(e=>!1===t[e]))}})});const t=K.reduce((e,t)=>(e[t.value]=!1,e),{}),a=j.a.get(V.kClearPrivateDataEntries);a&&Object.entries(a).forEach(([e,n])=>{void 0===t[e]&&delete a[e]}),Object.assign(t,a);const n={};let i=!0;Object.keys(t).forEach(e=>{n[e]=0,t[e]||(i=!1)}),this.state={all:i,inProgress:!1,deleteHistoryFrom:j.a.get(V.kClearPrivateDataRange),dataToRemove:t,dataToRemoveCounters:n}}componentDidMount(){x.addChangeListener(this._onBrowsingDataStoreChange),this.updateClearDownloadsCounters(),this.updateClearBrowsingHistoryCounters()}componentWillUnmount(){x.removeChangeListener(this._onBrowsingDataStoreChange)}render(){if(B.a.isGuestSession(this.context.vivaldiWindowId))return m.a.createElement("header",{className:"dialog-header",__source:{fileName:W,lineNumber:324,columnNumber:15}},m.a.createElement("p",{className:"error",__source:{fileName:W,lineNumber:325,columnNumber:9}},Object(d.a)("Delete Browsing Data not available from guest windows.")));const e=G.map(e=>m.a.createElement("option",{key:e.value,value:e.value,__source:{fileName:W,lineNumber:330,columnNumber:15}},e.text)),t=Boolean(!Object.keys(this.state.dataToRemove).find(e=>!0===this.state.dataToRemove[e])),a=K.map((e,t,a)=>{if(!a[t-1]||e.category!==a[t-1].category)return m.a.createElement("li",{key:e.value,style:{paddingLeft:"18px"},__source:{fileName:W,lineNumber:342,columnNumber:9}},m.a.createElement("label",{__source:{fileName:W,lineNumber:343,columnNumber:11}},m.a.createElement("input",{type:"checkbox",checked:this.state.dataToRemove[e.value],onChange:this.clearDataChange.bind(this,e.category),__source:{fileName:W,lineNumber:344,columnNumber:13}}),m.a.createElement("span",{__source:{fileName:W,lineNumber:347,columnNumber:13}},e.text),this.state.dataToRemoveCounters[e.value]>0&&this.state.dataToRemove[e.value]&&m.a.createElement("span",{className:"item-count",__source:{fileName:W,lineNumber:350,columnNumber:15}},this.state.dataToRemoveCounters[e.value])))});var n=m.a.createElement("div",{className:"dialog-clear-data",__source:{fileName:W,lineNumber:360,columnNumber:7}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:W,lineNumber:361,columnNumber:9}},m.a.createElement("h1",{__source:{fileName:W,lineNumber:362,columnNumber:11}},Object(d.a)("Delete Browsing Data"))),m.a.createElement("form",{className:"dialog-clear-data",onSubmit:this._onYes,__source:{fileName:W,lineNumber:365,columnNumber:9}},m.a.createElement("div",{className:"dialog-content",__source:{fileName:W,lineNumber:366,columnNumber:11}},m.a.createElement("div",{className:"setting-single",__source:{fileName:W,lineNumber:367,columnNumber:13}},m.a.createElement("label",{__source:{fileName:W,lineNumber:368,columnNumber:15}},m.a.createElement("span",{__source:{fileName:W,lineNumber:369,columnNumber:17}},Object(d.a)("Delete Data for:")),m.a.createElement("select",{onChange:this.selectChanged,value:this.state.deleteHistoryFrom,autoFocus:!0,__source:{fileName:W,lineNumber:370,columnNumber:17}},e))),m.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:W,lineNumber:378,columnNumber:13}},m.a.createElement("ul",{__source:{fileName:W,lineNumber:379,columnNumber:15}},m.a.createElement("li",{style:{paddingBottom:"6px"},__source:{fileName:W,lineNumber:380,columnNumber:17}},m.a.createElement("label",{__source:{fileName:W,lineNumber:381,columnNumber:19}},m.a.createElement("input",{type:"checkbox",checked:this.state.all,onChange:this.toggleAll,__source:{fileName:W,lineNumber:382,columnNumber:21}}),m.a.createElement("span",{__source:{fileName:W,lineNumber:385,columnNumber:21}},Object(d.a)("browser","All")))),a))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:W,lineNumber:393,columnNumber:11}},m.a.createElement("input",{type:"submit",disabled:this.state.inProgress||t,value:Object(d.a)("title","Delete"),__source:{fileName:W,lineNumber:394,columnNumber:13}}),m.a.createElement("input",{type:"button",onClick:this._onNo,disabled:this.state.inProgress,value:Object(d.a)("Cancel"),__source:{fileName:W,lineNumber:398,columnNumber:13}}),this.state.inProgress&&m.a.createElement("p",{className:"in-progress",__source:{fileName:W,lineNumber:403,columnNumber:15}}))));return Object(F.a)(n,this.props.filter)}}z(Y,"contextType",R.a);var $=Y;function X(e){return m.a.createElement(l.a,{onRequestClose:e.onClose,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ClearBrowsingHistoryDialog.jsx",lineNumber:12,columnNumber:5}},m.a.createElement($,{onNo:e.onClose,onYes:e.onClose,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ClearBrowsingHistoryDialog.jsx",lineNumber:13,columnNumber:7}}))}var Z=a(150),Q=a(44),q=a(14),J="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ConfirmOpenMultipleLinksDialog.jsx";function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class te extends m.a.Component{constructor(...e){super(...e),ee(this,"state",{doNotShowAgain:!1}),ee(this,"_onNo",()=>{this.props.onRequestClose()}),ee(this,"_onYes",()=>{L.a.set(V.kBookmarksConfirmOpening,!this.state.doNotShowAgain),this.props.onRequestClose(),q.a.openUrls(this.props.urls,{...this.props.openOptions})}),ee(this,"_toggleDoNotShowAgain",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))})}render(){return m.a.createElement(l.a,{onRequestClose:this._onNo,__source:{fileName:J,lineNumber:43,columnNumber:7}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:J,lineNumber:44,columnNumber:9}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:J,lineNumber:45,columnNumber:11}},Object(d.a)("Open Multiple Links"))),m.a.createElement("form",{onSubmit:this._onYes,__source:{fileName:J,lineNumber:48,columnNumber:9}},m.a.createElement("div",{className:"dialog-content",__source:{fileName:J,lineNumber:49,columnNumber:11}},m.a.createElement("p",{__source:{fileName:J,lineNumber:50,columnNumber:13}},Object(d.a)("Do you want to open $1 link?","Do you want to open $1 links?",[this.props.urls.length])),m.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:J,lineNumber:55,columnNumber:13}},m.a.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._toggleDoNotShowAgain,__source:{fileName:J,lineNumber:56,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:J,lineNumber:59,columnNumber:17}},Object(d.a)("Do not ask again")))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:J,lineNumber:63,columnNumber:11}},m.a.createElement("input",{type:"submit",onClick:this._onYes,value:Object(d.a)("Open All Links"),autoFocus:!0,__source:{fileName:J,lineNumber:64,columnNumber:13}}),m.a.createElement("input",{type:"button",onClick:this._onNo,value:Object(d.a)("Cancel"),__source:{fileName:J,lineNumber:68,columnNumber:13}}))))}}var ae=a(607),ne=a(200),ie=a(91),se=a(168),re=a(87);var oe={setThemeBackgroundFromUrl:function(e){const t=new XMLHttpRequest,a=new FileReader;t.open("GET",e,!0),t.responseType="blob",t.addEventListener("load",()=>{200===t.status&&(a.onload=()=>{L.a.set(V.kThemeBackgroundUserImage,a.result),this.enableUserDefinedThemeBackground()},a.readAsDataURL(t.response))},!1),t.send()},enableUserDefinedThemeBackground:function(){L.a.set(V.kThemeBackgroundData,re.d)}},le=a(199),ce=a(36),ue=a(31),me=a(41),de=a(454),he=a(764),pe=a(86),be=a(157),ge=a(159),Ne=a(35),fe=a(78),_e=a(4),ve=a(18);const Ee=e=>{let t=e;return t&&(t=t.replace(/^data\:([^\;]+)\;base64,/gim,"")),t},Ce=(e,t,a=9,n)=>{const i=Ee(t.faviconUrl);return{handler:()=>{ge.a.setSearchEngine(t),he.a.withTextAndEngine(e,t.id)},emphasized:t.id===(null==n?void 0:n.id),iconPNG:i,iconPNGWhite:i,...ue.a.makeNumberMnemonic(t.name,a)}},we=(e,t)=>{if(0===e.length)return[];const a=ge.a.getSearchEngine(t,!0);return pe.a.getList().map((t,n)=>Ce(e,t,n,a))},Oe=e=>[{commandName:"DOCUMENT_DIRECTION_DEFAULT",type:"checkbox",...Object(_e.a)("command","Default")},{commandName:"DOCUMENT_DIRECTION_LTR",type:"checkbox",...Object(_e.a)("Left to Right")},{commandName:"DOCUMENT_DIRECTION_RTL",type:"checkbox",...Object(_e.a)("Right to Left")}],ye=e=>[{commandName:"DOCUMENT_LOOP",type:"checkbox",...Object(_e.a)("context","Loop")},{commandName:"DOCUMENT_SHOW_CONTROLS",type:"checkbox",...Object(_e.a)("Show Controls")},ue.a.separatorItem,{commandName:"DOCUMENT_OPEN_AV_NEW_TAB",...e.support.audio?Object(_e.a)("Open Audio in New Tab"):Object(_e.a)("Open Video in New Tab")},{commandName:"DOCUMENT_SAVE_AV",ellipsis:!0,...e.support.audio?Object(_e.a)("Save Audio As"):Object(_e.a)("Save Video As")},{commandName:"DOCUMENT_COPY_AV_ADDRESS",ellipsis:!0,...e.support.audio?Object(_e.a)("Copy Audio Address"):Object(_e.a)("Copy Video Address")},{commandName:"DOCUMENT_CAST",ellipsis:!0,...Object(_e.a)("Cast")},ue.a.separatorItem,{commandName:"DOCUMENT_PICTURE_IN_PICTURE",visible:e.support.video&&e.support.pictureinpicture,...Object(_e.a)("Picture in Picture")}],Se=async(e,t,a,n,i)=>{switch(n.action){case"DOCUMENT_CONTAINER_DEVELOPER_TOOLS":return{visible:!a&&!t.isdevtools,items:await Te(e,t,a,i),...i(n,t)};case"DOCUMENT_VALIDATE_URL":return{visible:!t.iswebpanel&&!t.isimage&&!t.isdevtools,handler:()=>{const e=Ne.a.getSync("VALIDATION_URL");q.a.openURL(e.replace("%s",t.pageurl),{inCurrent:!1})},...i(n,t)};case"DOCUMENT_VIEW_SOURCE":return{visible:!(t.isimage&&t.pageurl===t.srcurl)&&!t.isdevtools,commandName:"DOCUMENT_VIEW_SOURCE",...i(n,t)};case"DOCUMENT_VIEW_FRAME_SOURCE":return{visible:t.isframe&&!t.isdevtools,commandName:"DOCUMENT_VIEW_FRAME_SOURCE",...i(n,t)};case"DOCUMENT_RELOAD_FRAME":return{visible:t.isframe&&!t.isdevtools,commandName:"DOCUMENT_RELOAD_FRAME",...i(n,t)};case"DOCUMENT_INSPECT":return{commandName:"DOCUMENT_INSPECT",visible:!t.isdevtools,...i(n,t)};default:return Promise.resolve({...i(n,t)})}},Te=async(e,t,a,n)=>Promise.all(["DOCUMENT_VALIDATE_URL","DOCUMENT_VIEW_SOURCE","DOCUMENT_VIEW_FRAME_SOURCE","DOCUMENT_RELOAD_FRAME","DOCUMENT_INSPECT"].map(i=>Se(e,t,a,{id:"",type:"command",action:i},n))),ke=e=>[{commandName:"DOCUMENT_LANGUAGE_SETTINGS",...Object(_e.a)("Language Settings")}],Ae=async(e,t,a,n,i)=>{switch(n.action){case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0&&!a,...i(n,t)};case"DOCUMENT_COPY":case"DOCUMENT_PRINT":return{...i(n,t)};case"DOCUMENT_GOTO_URL":return{handler:()=>{q.a.openURL(t.selectionurl,{inCurrent:!1,inBackground:j.a.get(V.kTabsOpenNewInBackground)})},visible:t.selectionurl.length>0,...i(n,t)};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const a=ge.a.getSearchEngine(e.isIncognito,"DOCUMENT_SEARCH_LAST_USED"===n.action);return{...Ce(t.selection,a),mnemonic:!0,...i(n,t)}}case"DOCUMENT_CONTAINER_SEARCH_WITH":return{items:we(t.selection,e.isIncognito),...i(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!a,container:{content:"extensions"},...i(n,t)};case"DOCUMENT_SEND_BY_MAIL":return{handler:()=>{le.a.createDraft({subject:t.pageurl,body:t.selection})},visible:!j.a.get(V.kMailIsTurnedOff),...i(n,t)};case"DOCUMENT_ADD_TO_CALENDAR":return{handler:()=>{ce.a.showAddEvent(t.selection,t.pageurl)},visible:!e.isGuest&&!j.a.get(V.kMailIsTurnedOff),...i(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...i(n,t)};case"COMMAND_FULLSCREEN":return{visible:!a,...i(n,t)};default:return se.a.actions().includes(n.action)?Se(e,t,a,n,i):Promise.resolve({...i(n,t)})}},Ie=async(e,t,a,n,i)=>{switch(n.action){case"DOCUMENT_OPEN_IMAGE_IN_NEW_BACKGROUND_TAB":return{visible:!j.a.get(V.kTabsOpenNewInBackground),...i(n,t)};case"DOCUMENT_OPEN_IMAGE_IN_NEW_WINDOW":return{visible:!e.isIncognito||e.isGuest,...i(n,t)};case"DOCUMENT_OPEN_IMAGE_IN_PRIVATE_WINDOW":return{visible:!e.isGuest,...i(n,t)};case"DOCUMENT_CONTAINER_OPEN_IMAGE_IN_PROFILE":return{container:{content:"imageinprofile"},...i(n,t)};case"DOCUMENT_SEARCH_FOR IMAGE":{const e=Ee(ve.f);return{iconPNG:e,iconPNGWhite:e,...i(n,t)}}case"DOCUMENT_SHOW_IMAGE_PROPERTIES":return{handler:async()=>{const e=c.c.getActivePage();if(e){const a=e.windowId;if(c.c.isDisplayingImage(e.id))q.a.setImageInspector(e.id,a,!0);else{await q.a.openURL(t.srcurl,{inCurrent:!1,transition:be.a.AUTO_TOPLEVEL}),await new Promise(e=>c.c.once(c.a,e));const e=c.c.getPages(a).last();q.a.setImageInspector(e.id,a,!0)}}},enabled:t.isimage,...i(n,t)};case"DOCUMENT_USE_IMAGE_AS_STARTPAGE_BACKGROUND":return{handler:()=>{0===t.srcurl.indexOf("file")?oe.enableUserDefinedThemeBackground():oe.setThemeBackgroundFromUrl(t.srcurl)},...i(n,t)};case"DOCUMENT_QR_CODE":return{visible:t.support.qrcode,...i(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!a,container:{content:"extensions"},...i(n,t)};case"COMMAND_FULLSCREEN":return{visible:!a,...i(n,t)};default:return se.a.actions().includes(n.action)?Se(e,t,a,n,i):Promise.resolve({...i(n,t)})}},De=async(e,t,a,n,i)=>{switch(n.action){case"DOCUMENT_CONTAINER_AV":return{items:ye(t),...i(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions&&!a,container:{content:"extensions"},...i(n,t)};default:return se.a.actions().includes(n.action)?Se(e,t,!1,n,i):Promise.resolve({...i(n,t)})}},Me=(e,t,a)=>{const n=ie.a.getOptionFunction("image");return ie.a.getNamedMenu("image",async i=>Ie(e,t,a,i,n))},Pe=(e,t,a)=>{const n=ie.a.getOptionFunction("selection");return ie.a.getNamedMenu("selection",async i=>Ae(e,t,a,i,n))};var xe={show:(e,t,a)=>{const n=(e,t,a)=>{Object(fe.a)(e,a,void 0,"pointer",void 0,t)()},i={id:e,isGuest:B.a.isGuestSession(e),isIncognito:B.a.isIncognito(e),isMac:!1};a.iseditable?"regular"===a.textfield?((e,t)=>{const a=ie.a.getOptionFunction("uiedit");return ie.a.getNamedMenu("uiedit",async n=>{switch(n.action){case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...a(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...a(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...a(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},...a(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:ke(),...a(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...a(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Oe(),...a(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...a(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":return{visible:!e.isGuest&&t.selection.length>0,...a(n,t),handler:()=>{C.a.createNote({content:t.selection,url:""})}};default:return Promise.resolve({...a(n,t)})}})})(i,a).then(a=>{n(e,t,a)}):["addressfield","searchfield"].includes(a.textfield)?((e,t)=>{const a=ie.a.getOptionFunction("urledit");return ie.a.getNamedMenu("urledit",async n=>{switch(n.action){case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...a(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...a(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...a(n,t)};case"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO":return{enabled:t.support.paste,...a(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},...a(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:ke(),...a(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...a(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Oe(),...a(n,t)};case"DOCUMENT_CUSTOMIZE":return{visible:!e.isGuest,handler:()=>{ce.a.showSettings("search")},...a(n,t)};case"DOCUMENT_SHOW_FULL_ADDRESS":const i=j.a.get(V.kAddressBarShowFullUrl);return{enabled:!e.isGuest,checked:i,visible:"addressfield"===t.textfield,handler:()=>{L.a.set(V.kAddressBarShowFullUrl,!i)},...a(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...a(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":return{visible:!e.isGuest&&t.selection.length>0,...a(n,t),handler:()=>{C.a.createNote({content:t.selection,url:""})}};default:return Promise.resolve({...a(n,t)})}})})(i,a).then(a=>{n(e,t,a)}):((e,t)=>{const a=ie.a.getOptionFunction("docedit");return ie.a.getNamedMenu("docedit",async n=>{switch(n.action){case"DOCUMENT_SUGGEST_PASSWORD":return{visible:t.support.passwordgeneration,...a(n,t)};case"DOCUMENT_SHOW_PASSWORDS":return{visible:t.support.passwordshowall,handler:()=>ce.a.showSettings("privacy"),...a(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK":return{container:{content:"spellcheck"},...a(n,t)};case"DOCUMENT_LOOK_UP":return{visible:e.isMac&&t.printableselection.length>0,...a(n,t)};case"DOCUMENT_EMOJI":return{visible:t.support.emoji,...a(n,t)};case"DOCUMENT_PASTE_AS_PLAIN_TEXT":return{visible:t.support.editoptions,...a(n,t)};case"DOCUMENT_ADD_AS_SEARCH_ENGINE":return{visible:!e.isGuest&&t.keywordurl.length>0,...a(n,t)};case"DOCUMENT_CONTAINER_NOTES":return{container:{content:"notes"},...a(n,t)};case"DOCUMENT_CONTAINER_SPELLCHECK_OPTIONS":return e.isMac?{visible:t.support.editoptions,items:ke(),...a(n,t)}:{visible:t.support.editoptions,container:{content:"spellcheckoptions"},...a(n,t)};case"DOCUMENT_CONTAINER_WRITING_DIRECTION":return{visible:t.support.editoptions,items:Oe(),...a(n,t)};case"DOCUMENT_SEARCH":case"DOCUMENT_SEARCH_LAST_USED":{const i=ge.a.getSearchEngine(e.isIncognito,"DOCUMENT_SEARCH_LAST_USED"===n.action);return{...Ce(t.selection,i),mnemonic:!0,visible:t.selection.length>0,...a(n,t)}}case"DOCUMENT_CONTAINER_SEARCH_WITH":return{items:we(t.selection,e.isIncognito),visible:t.selection.length>0,...a(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...a(n,t)};case"DOCUMENT_CONTAINER_SPEECH":return{visible:e.isMac,container:{content:"speech"},...a(n,t)};case"DOCUMENT_GOTO_URL":return{handler:()=>{q.a.openURL(t.selectionurl,{inCurrent:!1,inBackground:j.a.get(V.kTabsOpenNewInBackground)})},visible:t.selectionurl.length>0,...a(n,t)};case"COMMAND_COPY_SELECTION_TO_NOTE":{const{url:i}=c.c.unsafeGetActivePage();return{visible:!e.isGuest&&t.selection.length>0,...a(n,t),handler:()=>{C.a.createNote({content:t.selection,url:i})}}}default:return se.a.actions().includes(n.action)?Se(e,t,!1,n,a):Promise.resolve({...a(n,t)})}})})(i,a).then(a=>{n(e,t,a)}):a.linkurl.length>0?((e,t)=>{const a=ie.a.getOptionFunction("link"),n=ie.a.getActionList("image")(),i=ie.a.getActionList("selection")(),o=ie.a.getActionList("audiovideo")();return ie.a.getNamedMenu("link",async l=>{switch(l.action){case"DOCUMENT_OPEN_IN_NEW_TAB":case"DOCUMENT_OPEN_IN_TAB":return{visible:!t.ismailto,...a(l,t)};case"DOCUMENT_OPEN_IN_NEW_WINDOW":return{visible:!t.ismailto&&(!e.isIncognito||e.isGuest),...a(l,t)};case"DOCUMENT_OPEN_IN_NEW_BACKGROUND_TAB":return{visible:!t.ismailto&&!j.a.get(V.kTabsOpenNewInBackground),...a(l,t)};case"DOCUMENT_OPEN_IN_PRIVATE_WINDOW":return{visible:!t.ismailto&&!e.isGuest,...a(l,t)};case"DOCUMENT_CONTAINER_OPEN_IN_PWA":return{visible:!t.ismailto,container:{content:"linkinpwa"},...a(l,t)};case"DOCUMENT_CONTAINER_OPEN_IN_PROFILE":return{visible:!t.ismailto,container:{content:"linkinprofile"},...a(l,t)};case"DOCUMENT_ADD_LINK_TO_BOOKMARKS":return{handler:()=>{s.a.create({parentId:r.b.getRootNode().id,title:t.linktitle,url:t.linkurl})},visible:!t.ismailto&&!t.iswebpanel&&!e.isGuest,...a(l,t)};case"DOCUMENT_ADD_LINK_TO_WEBPANEL":return{handler:()=>{A.a.addByUrl(t.linkurl)},visible:!t.ismailto&&!t.iswebpanel&&!e.isGuest,...a(l,t)};case"DOCUMENT_SEND_LINK_BY_MAIL":return{handler:()=>{le.a.createDraft({subject:t.linktitle||t.linkurl,body:t.linkurl})},visible:!j.a.get(V.kMailIsTurnedOff),...a(l,t)};case"DOCUMENT_SAVE_LINK":return{visible:!t.ismailto,...a(l,t)};case"DOCUMENT_COPY_LINK_TEXT":return{visible:!t.isimage&&t.linktitle.length>0,...a(l,t)};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return{visible:!t.iswebpanel&&t.support.sendlinktodevices,container:{content:"sendlinktodevices"},...a(l,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...a(l,t)};case"DOCUMENT_CONTAINER_LINK_SELECTION":return t.selection.length>0&&!t.isimage&&!t.support.canvas?{items:await Pe(e,t,!0),...a(l,t)}:{items:[],visible:!1,...a(l,t)};case"DOCUMENT_CONTAINER_LINKED_IMAGE":return t.isimage||t.support.canvas?{items:await Me(e,t,!0),...a(l,t)}:{items:[],visible:!1,...a(l,t)};default:return se.a.actions().includes(l.action)?Se(e,t,!1,l,a):i.includes(l.action)?t.selection.length>0&&!t.isimage&&!t.support.canvas?Ae(e,t,!1,l,a):{visible:!1,...a(l,t)}:n.includes(l.action)?t.isimage||t.support.canvas?Ie(e,t,!1,l,a):{visible:!1,...a(l,t)}:o.includes(l.action)?t.support.audio||t.support.video?De(e,t,!1,l,a):{visible:!1,...a(l,t)}:Promise.resolve({...a(l,t)})}})})(i,a).then(a=>{n(e,t,a)}):a.isimage||a.support.canvas?Me(i,a,!1).then(a=>{n(e,t,a)}):a.support.audio||a.support.video?((e,t)=>{const a=ie.a.getOptionFunction("audiovideo");return ie.a.getNamedMenu("audiovideo",async n=>De(e,t,!1,n,a))})(i,a).then(a=>{n(e,t,a)}):a.selection.length>0?Pe(i,a,!1).then(a=>{n(e,t,a)}):((e,t)=>{const a=ie.a.getOptionFunction("page");return ie.a.getNamedMenu("page",async n=>{switch(n.action){case"COMMAND_ADD_BOOKMARK":return{visible:!t.iswebpanel&&!e.isGuest,...a(n,t)};case"DOCUMENT_ADD_TO_WEBPANEL":return{handler:()=>{A.a.addByUrl(t.pageurl)},visible:!t.iswebpanel&&!e.isGuest,...a(n,t)};case"DOCUMENT_SEND_BY_MAIL":return{handler:()=>{le.a.createDraft({subject:t.pagetitle||t.pageurl,body:t.pageurl})},visible:!j.a.get(V.kMailIsTurnedOff),...a(n,t)};case"DOCUMENT_COPY_ADDRESS":return{handler:()=>{ne.a.copyUrlToClipboard(t.pageurl)},...a(n,t)};case"DOCUMENT_SAVE":case"DOCUMENT_CAST":return{visible:!t.iswebpanel,...a(n,t)};case"DOCUMENT_QR_CODE":return{visible:t.support.qrcode,...a(n,t)};case"DOCUMENT_CONTAINER_SEND_TO_DEVICES":return{visible:!t.iswebpanel&&t.support.sendpagetodevices,container:{content:"sendpagetodevices"},...a(n,t)};case"DOCUMENT_CONTAINER_EXTENSIONS":return{visible:!t.iswebpanel&&t.support.extensions,container:{content:"extensions"},...a(n,t)};case"DOCUMENT_CONTAINER_PLUGIN_ROTATION":{const e=!t.iswebpanel&&t.support.plugin;return{visible:e,items:e?[{commandName:"DOCUMENT_ROTATE_CLOCKWISE",...Object(_e.a)("Rotate Clockwise")},{commandName:"DOCUMENT_ROTATE_COUNTERCLOCKWISE",...Object(_e.a)("Rotate Counterclockwise")}]:[],...a(n,t)}}case"CONTAINER_PERIODIC_RELOAD":if(t.iswebpanel){const e=me.d.getSelectedWebPanelIndex();if(-1===e)return{visible:!1,...a(n,t)};{const i=me.d.getWebPanels()[e];return{...a(n,t),items:de.a.getMenu(i.id,"panel")}}}return{...a(n,t)};default:return se.a.actions().includes(n.action)?Se(e,t,!1,n,a):Promise.resolve({...a(n,t)})}})})(i,a).then(a=>{n(e,t,a)})}},Le=a(21),je=a(169),Re="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformFFMPEGDialog.jsx";function Be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Fe=[V.kStartupShowFfmpegInformation];class Ue extends u.Component{constructor(e){super(e),Be(this,"_onClose",()=>{L.a.set(V.kStartupShowFfmpegInformation,!this.state.doNotShowAgain),this.props.onClose()}),Be(this,"_onInformation",()=>{q.a.openURL("https://help.vivaldi.com/article/html5-proprietary-media-on-linux/"),this._onClose()}),Be(this,"_onCheckChanged",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))}),this.state={doNotShowAgain:!1}}render(){return u.createElement(l.a,{onRequestClose:je.default,dialogWidth:400,viewMode:"slide",__source:{fileName:Re,lineNumber:54,columnNumber:7}},u.createElement("header",{className:"dialog-header",__source:{fileName:Re,lineNumber:59,columnNumber:9}},u.createElement("h1",{className:"dialog-title",__source:{fileName:Re,lineNumber:60,columnNumber:11}},Object(d.a)("Media support"))),u.createElement("div",{className:"dialog-content",__source:{fileName:Re,lineNumber:63,columnNumber:9}},u.createElement("p",{__source:{fileName:Re,lineNumber:64,columnNumber:11}},Object(d.a)("Vivaldi lacks a suitable component to play HTML5 'proprietary' media (H.264/AAC)")),u.createElement("label",{className:"dialog-checkbox",__source:{fileName:Re,lineNumber:68,columnNumber:11}},u.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:Re,lineNumber:69,columnNumber:13}}),u.createElement("span",{__source:{fileName:Re,lineNumber:72,columnNumber:13}},Object(d.a)("Do not show again")))),u.createElement("footer",{className:"dialog-footer",__source:{fileName:Re,lineNumber:76,columnNumber:9}},u.createElement("input",{type:"submit",value:Object(d.a)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:Re,lineNumber:77,columnNumber:11}}),u.createElement("input",{type:"button",value:Object(d.a)("Cancel"),onClick:this._onClose,__source:{fileName:Re,lineNumber:82,columnNumber:11}})))}}var He=Object(Le.a)(Ue,Fe),Ve="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformMediaAvailableDialog.jsx";function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ze=[V.kStartupShowMediaAvailableInformation];class Ge extends u.Component{constructor(e){super(e),We(this,"_onClose",()=>{L.a.set(V.kStartupShowMediaAvailableInformation,!this.state.doNotShowAgain),this.props.onClose()}),We(this,"_onInformation",()=>{q.a.openURL("https://www.microsoft.com/en-us/software-download/mediafeaturepack"),this._onClose()}),We(this,"_onCheckChanged",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))}),this.state={doNotShowAgain:!1}}render(){return u.createElement(l.a,{onRequestClose:je.default,dialogWidth:400,viewMode:"slide",__source:{fileName:Ve,lineNumber:55,columnNumber:7}},u.createElement("header",{className:"dialog-header",__source:{fileName:Ve,lineNumber:60,columnNumber:9}},u.createElement("h1",{className:"dialog-title",__source:{fileName:Ve,lineNumber:61,columnNumber:11}},Object(d.a)("Media support"))),u.createElement("div",{className:"dialog-content",__source:{fileName:Ve,lineNumber:64,columnNumber:9}},u.createElement("p",{__source:{fileName:Ve,lineNumber:65,columnNumber:11}},Object(d.a)("This Windows N edition lacks the media package to play HTML5 'proprietary' media (H.264/AAC).")),u.createElement("label",{className:"dialog-checkbox",__source:{fileName:Ve,lineNumber:69,columnNumber:11}},u.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:Ve,lineNumber:70,columnNumber:13}}),u.createElement("span",{__source:{fileName:Ve,lineNumber:73,columnNumber:13}},Object(d.a)("Do not show again")))),u.createElement("footer",{className:"dialog-footer",__source:{fileName:Ve,lineNumber:77,columnNumber:9}},u.createElement("input",{type:"submit",value:Object(d.a)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:Ve,lineNumber:78,columnNumber:11}}),u.createElement("input",{type:"button",value:Object(d.a)("Cancel"),onClick:this._onClose,__source:{fileName:Ve,lineNumber:83,columnNumber:11}})))}}var Ke=Object(Le.a)(Ge,ze),Ye=a(45),$e=a.n(Ye),Xe=a(173),Ze=a(781),Qe=a(154),qe=a(152),Je=a(703),et=a(112),tt=a.n(et),at=a(511),nt=a(7),it=a(84),st=a.n(it),rt=a(23);function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ct(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,mt(e,t,"get"))}function ut(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,mt(e,t,"set"),a),a}function mt(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const dt=[],ht=[],pt=[V.kThemeBlurEnable,V.kThemeColorAccentSaturationLimit,V.kThemeContrast,V.kThemeDimBlurred,V.kHueBridgeIp,V.kHueEnabled,V.kHueLights,V.kHueUsername,V.kThemePrivateWindow,V.kThemeTransparency,V.kThemeSimpleScrollbar],bt=["USE_TABCOLOR","BORDER_RADIUS","BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"];let gt;const Nt=tt()(2)((e,t,a)=>{const n=parseFloat(t[V.kThemeColorAccentSaturationLimit]),i=re.e.getTheme(t[V.kThemePrivateWindow]),s=a?$e()(i.colors.baseBg):$e()(e.BROWSER_COLOR_BG),r=a?$e()(i.colors.baseFg):$e()(e.BROWSER_COLOR_FG),o=a?$e()(i.colors.highlightBg):$e()(e.BROWSER_COLOR_HIGHLIGHT_BG),l=Number(a?i.settings.borderRadius:e.BORDER_RADIUS);let c=a?$e()(i.colors.accentBg):$e()(e.BROWSER_COLOR_ACCENT_BG);return n<1&&c.get("hsl.s")>n&&(c=c.set("hsl.s",n)),{...Xe.d.all(r,s,o,c),...Object(Ze.a)(l,t[V.kThemeSimpleScrollbar])}}),ft=tt()(2)((e,t,a)=>t&&a?{...e,...Xe.d.accentOnly($e()(t),e.colorFg,e.colorBg)}:e);function _t(e){var t=new WeakMap;class a extends u.PureComponent{constructor(...e){super(...e),t.set(this,{writable:!0,value:!1}),lt(this,"_unclaimedMeta",{}),lt(this,"_failUrlOnLoad",""),lt(this,"state",{isPrivateWindow:B.a.isIncognito(this.context.vivaldiWindowId),accentColor:"",vars:{}}),lt(this,"_getCacheObject",(e,t)=>{if(!(e&&rt.p.isExtensionProtocol(e)||c.c.useDefaultIcon(c.c.unsafeGetActivePage()))){for(const a of dt){if(e&&e===a.favIcon)return a;if(!e&&t&&t===a.hostname)return a}if(t&&e){const a={favIcon:e,hostname:t};return dt.push(a),a}}}),lt(this,"_onNavigationStoreChanged",()=>{const e=c.c.unsafeGetActivePage(),t=qe.a.getNavigationInfo(e.id),a=t&&t.webviewUrl,n=t&&t.trigger;"start"!==n&&"stop"!==n||(this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),"start"===n&&(this._failUrlOnLoad=a),"stop"===n&&a===this._failUrlOnLoad&&(this._fallbackTimer=setTimeout(this._setFallbackAccentColor,1e3)))}),lt(this,"_onThemeColorChanged",(e,t)=>{if(t&&"#000000"!==t){const a=c.c.unsafeGetActivePage();if(a.get("id")===e){const e=a.get("favIconUrl"),n=qe.a.getNavigationInfo(a.id),i=n&&n.webviewUrl;if(void 0===i)console.error("onThemeColorChanged. Url is not defined");else{const a=Object(it.parse)(Object(at.a)(i)).hostname,n=this._getCacheObject(e,a);n?(n.metaColor=t,this._setBestColor(n)):this._unclaimedMeta={color:t,url:i}}}}}),lt(this,"_setAccentColor",()=>{const e=c.c.unsafeGetActivePage();if(null==e?void 0:e.url){const a=e.get("url");if(ct(this,t)&&rt.p.isInternalPage(e))return void this.setState({accentColor:""});const n=e.get("favIconUrl"),i=Object(it.parse)(Object(at.a)(a)).hostname,s=this._getCacheObject(n,i);s&&a===this._unclaimedMeta.url&&(s.metaColor=this._unclaimedMeta.color,this._unclaimedMeta={},this._setBestColor(s)),s?s.colorPalette?(this._failUrlOnLoad="",this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),this._setBestColor(s)):!s.colorPalette&&s.favIcon&&(this._failUrlOnLoad="",this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),this._setFavIconPalette(s)):ct(this,t)&&ht.indexOf(a)>-1&&(this._failUrlOnLoad="",this.setState({accentColor:""}),this._fallbackTimer&&clearTimeout(this._fallbackTimer))}}),lt(this,"_setFallbackAccentColor",()=>{this._fallbackTimer&&clearTimeout(this._fallbackTimer),this._failUrlOnLoad="",this._unclaimedMeta={},ht.push(c.c.unsafeGetActivePage().get("url")),this.setState({accentColor:""})}),lt(this,"_setFavIconPalette",e=>{const t=new Image;t.crossOrigin="Anonymous",t.onload=()=>{t.height=16,t.width=16,e.colorPalette=re.e.getPalette(t,16),this._setBestColor(e)},t.src=e.favIcon}),lt(this,"_setBestColor",e=>{const a=parseFloat(this.props.prefValues[V.kThemeColorAccentSaturationLimit]),n=[];if(e.metaColor&&n.push({color:$e()(e.metaColor),multiplier:3}),e.colorPalette)for(let t=0;t<e.colorPalette.length;t++){let a=1;0===t?a=2.25:1===t?a=1.5:2===t&&(a=1.25),n.push({color:$e()(e.colorPalette[t]),multiplier:a})}if(n.length>2&&n[0].color.get("lch.c")<1)for(let e=1;e<n.length;e++)if(n[e].color.get("lch.c")>1){n[e].multiplier=2;break}n.sort((e,t)=>{const a=this._rateColor(e.color)*e.multiplier;return this._rateColor(t.color)*t.multiplier-a}),ct(this,t)&&n[0]&&(a<1&&n[0].color.get("hsl.s")>a&&(n[0].color=n[0].color.set("hsl.s",a)),this.setState({accentColor:n[0].color.toString()}))}),lt(this,"getHueLights",e=>{const t=this.props.prefValues[V.kHueBridgeIp],a=this.props.prefValues[V.kHueUsername];gt?e(gt):fetch(`http://${t}/api/${a}/lights`).then(a=>{a.ok?a.json().then(t=>{gt=t,e(gt)}):console.warn(`Unable to retrieve lights from bridge at ${t}`)})}),lt(this,"colorToXy",e=>{let t=e.get("rgb.r"),a=e.get("rgb.g"),n=e.get("rgb.b");t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/13.02,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;const i=.664511*t+.154324*a+.162028*n,s=.283881*t+.668433*a+.047685*n,r=88e-6*t+.07231*a+.986039*n;return[i/(i+s+r),s/(i+s+r)]}),lt(this,"setHue",e=>{const t=this.props.prefValues[V.kHueBridgeIp],a=this.props.prefValues[V.kHueUsername],n=this.props.prefValues[V.kHueLights],i=this.colorToXy(e);this.getHueLights(e=>{Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];r&&n.some(e=>r.uniqueid===e)&&fetch(`http://${t}/api/${a}/lights/${s}/state/`,{method:"put",body:JSON.stringify({transitiontime:10,xy:i})}).catch(e=>{console.warn(`Unable to set Hue light ${r.name}`,e)})})})}),lt(this,"_rateColor",e=>{const t=parseFloat(this.props.prefValues[V.kThemeContrast]),a=this.props.vivaldiSettings.BROWSER_COLOR_BG,n=$e.a.contrast(e,a)>t?50:0,i=e.get("lch.l")>5&&e.get("lch.l")<95?50:0;let s=e.get("lch.c")>10?50:0;return(e.get("lch.l")<20||e.get("lch.l")>75)&&(s=e.get("lch.c")>50?s:0),n+i+s}),lt(this,"applyTheme",e=>{const t=this.context.document.documentElement;Object.keys(this.state.vars).forEach(e=>{const a=this.state.vars[e];null==t||t.style.setProperty(`--${e}`,a.toString())}),Object.keys(e).forEach(e=>{this.state.vars[e]||null==t||t.style.removeProperty(e)})})}static getDerivedStateFromProps(e,t){const a=Nt(e.vivaldiSettings,e.prefValues,t.isPrivateWindow),n=t.isPrivateWindow?re.e.getTheme(e.prefValues[V.kThemePrivateWindow]).settings.accentFromPage:e.vivaldiSettings.USE_TABCOLOR;return{vars:ft(a,t.accentColor,n)}}componentDidMount(){this.state.vars.colorAccentBg&&(Je.a.setColor(this.state.vars.colorAccentBg),this.props.prefValues[V.kHueEnabled]&&this.props.prefValues[V.kHueUsername]&&this.setHue(this.state.vars.colorAccentBg)),qe.a.addChangeListener(this._onNavigationStoreChanged),c.c.addChangeListener(this._setAccentColor),nt.a.tabsPrivate.onThemeColorChanged.addListener(this._onThemeColorChanged),ut(this,t,!0)}componentDidUpdate(e,t){if(t.vars!==this.state.vars){this.applyTheme(t.vars);const e=t.vars.colorAccentBg,a=this.state.vars.colorAccentBg;a&&e.css()!==a.css()&&(Je.a.setColor(a),this.props.prefValues[V.kHueEnabled]&&this.props.prefValues[V.kHueUsername]&&this.setHue(a))}[V.kThemeBlurEnable,V.kThemeColorAccentSaturationLimit,V.kThemeContrast,V.kHueEnabled,V.kHueUsername,V.kHueLights,V.kHueBridgeIp].some(t=>e.prefValues[t]!==this.props.prefValues[t])&&this._setAccentColor()}componentWillUnmount(){ut(this,t,!1),qe.a.removeChangeListener(this._onNavigationStoreChanged),c.c.removeChangeListener(this._setAccentColor),nt.a.tabsPrivate.onThemeColorChanged.removeListener(this._onThemeColorChanged)}render(){ct(this,t)||this.applyTheme({});const{vars:a}=this.state,n=!a.colorBg||a.colorBg.luminance()<=Xe.b?"theme-dark":"theme-light",i=!a.colorHighlightBg||a.colorHighlightBg.luminance()<=Xe.b?"hi-dark":"hi-light",s=!a.colorAccentBg||a.colorAccentBg.luminance()<=Xe.b?"acc-dark":"acc-light";return u.createElement(e,ot({},this.props,{themeBg:n,accentBg:s,accent:a.colorAccentBg||void 0,highlightBg:i,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themes\\InsertTheme.jsx",lineNumber:577,columnNumber:9}}))}}return lt(a,"contextType",R.a),Object(Le.a)(Object(Qe.a)(a,bt),pt)}const vt=_t(()=>null);var Et=_t,Ct=a(271),wt=a(466),Ot=a(442),yt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailBar.jsx";const St=[V.kAddressBarPosition,V.kToolbarsMail,V.kToolbarsMailComposer,V.kToolbarsMailMessage];class Tt extends u.PureComponent{render(){const{prefValues:e,url:t}=this.props,a="top"===e[V.kAddressBarPosition]?"bottomLeft":"topLeft",n="top"===e[V.kAddressBarPosition]?"below":"above";return u.createElement(Ct.a,{focusName:"focus_mailbar",className:"toolbar toolbar-mainbar toolbar-mailbar",__source:{fileName:yt,lineNumber:43,columnNumber:7}},!t&&u.createElement(wt.a,{className:"toolbar-mainbar",menuOrigin:a,popupPosition:n,size:"large",__source:{fileName:yt,lineNumber:47,columnNumber:11}}),!Object(Ot.a)(t)&&!Object(Ot.b)(t)&&u.createElement(wt.a,{name:V.kToolbarsMail,className:"toolbar-mainbar",menuOrigin:a,popupPosition:n,size:"large",__source:{fileName:yt,lineNumber:55,columnNumber:11}}),Object(Ot.b)(t)&&u.createElement(wt.a,{name:V.kToolbarsMailMessage,className:"toolbar-mainbar message",menuOrigin:a,popupPosition:n,size:"large",__source:{fileName:yt,lineNumber:64,columnNumber:11}}),Object(Ot.a)(t)&&u.createElement(wt.a,{name:V.kToolbarsMailComposer,className:"toolbar-mainbar composer",menuOrigin:a,popupPosition:n,size:"large",__source:{fileName:yt,lineNumber:73,columnNumber:11}}))}}var kt=Object(Le.a)(Tt,St),At=a(53),It=a(790),Dt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\MainBar.jsx";function Mt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pt(e){return{url:e.url,id:e.id,originUrl:e.originUrl,active:e.active,incognito:e.incognito,thumbnailUrl:e.getIn(["extData","thumbnail"]),favIconUrl:e.favIconUrl,isMailPage:e.isMailPage&&!j.a.get(V.kMailIsTurnedOff)}}class xt extends m.a.PureComponent{constructor(...e){super(...e),Mt(this,"state",{...Pt(c.c.getActivePage()||new At.b)}),Mt(this,"extensionAnchor",m.a.createRef()),Mt(this,"pageStoreChanged",()=>{const e=c.c.getActivePage();e&&this.setState(Pt(e))})}componentDidMount(){c.c.addChangeListener(this.pageStoreChanged)}componentWillUnmount(){c.c.removeChangeListener(this.pageStoreChanged)}render(){return this.state.isMailPage?m.a.createElement(kt,{url:this.state.url,__source:{fileName:Dt,lineNumber:58,columnNumber:9}}):m.a.createElement(m.a.Fragment,{__source:{fileName:Dt,lineNumber:60,columnNumber:7}},m.a.createElement(It.a,{extensionAnchor:this.extensionAnchor,readonly:!1,showNavigationButtons:!0,url:this.state.url,id:this.state.id,size:this.props.size,originUrl:this.state.originUrl,active:this.state.active,incognito:this.state.incognito,thumbnailUrl:this.state.thumbnailUrl,favIconUrl:this.state.favIconUrl,__source:{fileName:Dt,lineNumber:61,columnNumber:9}}),m.a.createElement("div",{ref:this.extensionAnchor,__source:{fileName:Dt,lineNumber:74,columnNumber:9}}))}}var Lt=xt,jt=a(851),Rt=a(313),Bt=a(811),Ft="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\rss\\AddFeedDialog.jsx";function Ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ht extends u.PureComponent{constructor(e){super(e),Ut(this,"mapFeeds",e=>e.map(e=>({url:e.url||"",path:e.path||"",title:e.title||"",refreshInterval:e.refreshInterval?e.refreshInterval:1440,offline:!1,lastChecked:0}))),Ut(this,"addFeed",()=>{const{feeds:e}=this.state;Rt.a.add(e),this.onDismiss()}),Ut(this,"onDismiss",()=>{this.props.onClose()}),Ut(this,"onChange",e=>{const{name:t,value:a,id:n}=e.target;this.setState(e=>{let i=0;return{feeds:e.feeds.map(e=>(i++,"fid"+i===n?{...e,[t]:a}:e))}})}),Ut(this,"feeds",()=>{let e=0;return this.state.feeds.map(t=>{e++;const a="fid"+e;return(u.createElement("div",{key:a,className:"feed-list-item",__source:{fileName:Ft,lineNumber:67,columnNumber:14}},u.createElement("input",{type:"text",placeholder:Object(d.a)("Title"),onChange:this.onChange,title:Object(d.a)("Title"),value:t.title,name:"title",id:a,__source:{fileName:Ft,lineNumber:68,columnNumber:9}}),u.createElement("input",{type:"text",placeholder:Object(d.a)("Address"),onChange:this.onChange,title:Object(d.a)("Address"),value:t.url,name:"url",id:a,__source:{fileName:Ft,lineNumber:77,columnNumber:9}}),u.createElement("select",{onChange:this.onChange,value:t.refreshInterval,name:"refreshInterval",id:a,__source:{fileName:Ft,lineNumber:86,columnNumber:9}},Object(Bt.a)())))})}),Ut(this,"render",()=>u.createElement("div",{className:"dialog-add-feed",__source:{fileName:Ft,lineNumber:98,columnNumber:5}},u.createElement("header",{className:"dialog-header",__source:{fileName:Ft,lineNumber:99,columnNumber:7}},u.createElement("h1",{__source:{fileName:Ft,lineNumber:100,columnNumber:9}},Object(d.a)("browser","Add Feed"))),u.createElement("div",{className:"dialog-content",__source:{fileName:Ft,lineNumber:102,columnNumber:7}},this.feeds()),u.createElement("footer",{className:"dialog-footer",__source:{fileName:Ft,lineNumber:105,columnNumber:7}},u.createElement("input",{type:"button",value:Object(d.a)("Add Feed","Add Feeds",[this.state.feeds.length]),className:"primary",onClick:this.addFeed,__source:{fileName:Ft,lineNumber:106,columnNumber:9}}),u.createElement("input",{type:"button",onClick:this.onDismiss,value:Object(d.a)("Cancel"),__source:{fileName:Ft,lineNumber:110,columnNumber:9}})))),this.state={feeds:this.mapFeeds(this.props.options)}}}var Vt=Ht,Wt=a(806),zt=a(20),Gt=a.n(zt),Kt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ShowCalendarTipsAndTricks.jsx";const Yt=["editor","density","help"];function $t(){const[e,t]=u.useState(j.a.get(V.kCalendarEditMode));return u.createElement(u.Fragment,null,u.createElement("h3",{__source:{fileName:Kt,lineNumber:33,columnNumber:5}},Object(d.a)("Calendar Settings")),u.createElement("h1",{__source:{fileName:Kt,lineNumber:34,columnNumber:5}},Object(d.a)("Adding Events")),u.createElement("p",{__source:{fileName:Kt,lineNumber:35,columnNumber:5}},Object(d.a)("We’re all about choice. By default, we add and edit events inline, right inside the calendar without any popups.")),u.createElement("div",{className:"ShowCalendarTipsAndTricks-Selectbox",__source:{fileName:Kt,lineNumber:36,columnNumber:5}},u.createElement("button",{className:Gt()("selectbox",{"selectbox-selected":"inline"===e}),onClick:function(){t("inline"),L.a.set(V.kCalendarEditMode,"inline")},type:"button",__source:{fileName:Kt,lineNumber:37,columnNumber:7}},u.createElement("div",{className:"selectbox-image",__source:{fileName:Kt,lineNumber:44,columnNumber:9}},u.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:a(1777)},__source:{fileName:Kt,lineNumber:45,columnNumber:9}}),u.createElement("div",{dangerouslySetInnerHTML:{__html:h.b},__source:{fileName:Kt,lineNumber:50,columnNumber:11}})),u.createElement("div",{className:"selectbox-title",__source:{fileName:Kt,lineNumber:52,columnNumber:9}},Object(d.a)("Inline Editor"))),u.createElement("button",{className:Gt()("selectbox",{"selectbox-selected":"popup"===e}),onClick:function(){t("popup"),L.a.set(V.kCalendarEditMode,"popup")},type:"button",__source:{fileName:Kt,lineNumber:56,columnNumber:7}},u.createElement("div",{className:"selectbox-image",__source:{fileName:Kt,lineNumber:63,columnNumber:9}},u.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:a(1778)},__source:{fileName:Kt,lineNumber:64,columnNumber:9}}),u.createElement("div",{dangerouslySetInnerHTML:{__html:h.b},__source:{fileName:Kt,lineNumber:69,columnNumber:11}})),u.createElement("div",{className:"selectbox-title",__source:{fileName:Kt,lineNumber:71,columnNumber:9}},Object(d.a)("Dialog Editor")))))}function Xt(){const[e,t]=u.useState(j.a.get(V.kCalendarDisplayDensity));return u.createElement(u.Fragment,null,u.createElement("h3",{__source:{fileName:Kt,lineNumber:90,columnNumber:5}},Object(d.a)("Calendar Settings")),u.createElement("h1",{__source:{fileName:Kt,lineNumber:91,columnNumber:5}},Object(d.a)("Calendar Density")),u.createElement("p",{__source:{fileName:Kt,lineNumber:92,columnNumber:5}},Object(d.a)("We can show you all the details from an event right in the calendar, or just the title. It’s up to you.")),u.createElement("div",{className:"ShowCalendarTipsAndTricks-Selectbox",__source:{fileName:Kt,lineNumber:93,columnNumber:5}},u.createElement("button",{className:Gt()("selectbox",{"selectbox-selected":"full"===e}),onClick:function(){t("full"),L.a.set(V.kCalendarDisplayDensity,"full")},type:"button",__source:{fileName:Kt,lineNumber:94,columnNumber:7}},u.createElement("div",{className:"selectbox-image",__source:{fileName:Kt,lineNumber:101,columnNumber:9}},u.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:a(1779)},__source:{fileName:Kt,lineNumber:102,columnNumber:9}}),u.createElement("div",{dangerouslySetInnerHTML:{__html:h.b},__source:{fileName:Kt,lineNumber:107,columnNumber:11}})),u.createElement("div",{className:"selectbox-title",__source:{fileName:Kt,lineNumber:109,columnNumber:9}},Object(d.a)("Full Details"))),u.createElement("button",{className:Gt()("selectbox",{"selectbox-selected":"minimal"===e}),onClick:function(){t("minimal"),L.a.set(V.kCalendarDisplayDensity,"minimal")},type:"button",__source:{fileName:Kt,lineNumber:113,columnNumber:7}},u.createElement("div",{className:"selectbox-image",__source:{fileName:Kt,lineNumber:120,columnNumber:9}},u.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:a(1780)},__source:{fileName:Kt,lineNumber:121,columnNumber:9}}),u.createElement("div",{dangerouslySetInnerHTML:{__html:h.b},__source:{fileName:Kt,lineNumber:126,columnNumber:11}})),u.createElement("div",{className:"selectbox-title",__source:{fileName:Kt,lineNumber:128,columnNumber:9}},Object(d.a)("Title Only")))))}function Zt(){return u.createElement(u.Fragment,null,u.createElement("h3",{__source:{fileName:Kt,lineNumber:138,columnNumber:5}},Object(d.a)("Calendar Help")),u.createElement("h1",{__source:{fileName:Kt,lineNumber:139,columnNumber:5}},Object(d.a)("Get All the Help You Need")),u.createElement("div",{className:"ShowCalendarTipsAndTricks-WithImage",__source:{fileName:Kt,lineNumber:140,columnNumber:5}},u.createElement("span",{className:"onboarding-iillustration",dangerouslySetInnerHTML:{__html:h.de},__source:{fileName:Kt,lineNumber:141,columnNumber:7}}),u.createElement("div",{className:"ShowCalendarTipsAndTricks-TextBlock",__source:{fileName:Kt,lineNumber:144,columnNumber:7}},u.createElement("p",{__source:{fileName:Kt,lineNumber:145,columnNumber:9}},Object(d.a)("Want more tips and tricks? Our Help pages contain all the documentation you need.")),u.createElement("p",{__source:{fileName:Kt,lineNumber:146,columnNumber:9}},u.createElement("a",{onClick:()=>q.a.openURL("https://help.vivaldi.com/calendar/"),__source:{fileName:Kt,lineNumber:146,columnNumber:12}},Object(d.a)("Visit our Help pages for Calendar."))))))}function Qt(e){const[t,a]=u.useState(Yt[0]);const n=t===Yt[Yt.length-1];return(u.createElement("div",{className:"ShowCalendarTipsAndTricks",__source:{fileName:Kt,lineNumber:167,columnNumber:5}},u.createElement("form",{className:"detail",onSubmit:function(){a(Yt[Yt.indexOf(t)+1])},__source:{fileName:Kt,lineNumber:168,columnNumber:7}},u.createElement("div",{className:"detail-content",__source:{fileName:Kt,lineNumber:169,columnNumber:9}},"editor"===t&&u.createElement($t,{__source:{fileName:Kt,lineNumber:170,columnNumber:33}}),"density"===t&&u.createElement(Xt,{__source:{fileName:Kt,lineNumber:171,columnNumber:34}}),"help"===t&&u.createElement(Zt,{__source:{fileName:Kt,lineNumber:172,columnNumber:31}})),u.createElement("div",{className:"detail-toolbar",__source:{fileName:Kt,lineNumber:175,columnNumber:9}},!n&&u.createElement("input",{type:"submit",value:Object(d.a)("Next tip"),__source:{fileName:Kt,lineNumber:177,columnNumber:13}}),u.createElement("input",{type:n?"submit":"button",value:Object(d.a)("Open Vivaldi Calendar"),onClick:()=>{q.a.openURL("vivaldi://calendar"),e.onClose()},__source:{fileName:Kt,lineNumber:182,columnNumber:11}})))))}var qt=a(852),Jt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\CalendarAccountSheet.jsx";function ea(e){const[t,a]=u.useState(!1);return(u.createElement("div",{className:"CalendarAccountSheet",__source:{fileName:Jt,lineNumber:18,columnNumber:5}},u.createElement("button",{className:"CalendarAccountSheet-Exit",onClick:e.onClose,__source:{fileName:Jt,lineNumber:19,columnNumber:7}},u.createElement("span",{dangerouslySetInnerHTML:{__html:h.kb},__source:{fileName:Jt,lineNumber:20,columnNumber:9}})),!t&&u.createElement("div",{className:"setting-section",__source:{fileName:Jt,lineNumber:24,columnNumber:9}},u.createElement(Wt.a,{searchableStrings:qt.b,filter:"",showTips:()=>a(!0),done:e.onClose,onboarding:!0,__source:{fileName:Jt,lineNumber:25,columnNumber:11}})),t&&u.createElement(Qt,{onClose:e.onClose,__source:{fileName:Jt,lineNumber:35,columnNumber:9}})))}var ta=a(24),aa=a(186),na=a(816),ia=a(109),sa=a(126),ra=a(599),oa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarEditEventDialog.jsx";function la(e){e&&e.target.addEventListener("click",sa.a,{once:!0})}var ca=function(e){const{document:t}=m.a.useContext(R.a),{editor:a}=e,{eventDraft:n}=Object(ra.a)(a.pageId),i=m.a.useRef(!1);if(m.a.useEffect(()=>()=>{if(!i.current){"cancel"===j.a.get(V.kCalendarClickOutside)?ta.a.cancelEventEdit(a):ta.a.saveEventEdit(a)}},[a]),!n)return null;function s(){requestAnimationFrame(()=>{const e=t.getElementsByClassName("calendar-grid")[0];e instanceof HTMLElement&&e.focus()})}async function r(t){i.current=!0,la(t),await ta.a.saveEventEdit(a)&&e.onClose().then(s)}function o(t){i.current=!0,la(t),ta.a.cancelEventEdit(a),e.onClose().then(s)}return m.a.createElement(aa.a.Provider,{value:{displayDensity:"full",editor:a,isActivePage:!1,isPanel:!1},__source:{fileName:oa,lineNumber:95,columnNumber:5}},m.a.createElement("div",{className:"dialog-add-event",onKeyDown:function(e){const t=ia.a[e.keyCode];"Enter"!==t||e.shiftKey?"Escape"===t&&o():(e.preventDefault(),e.stopPropagation(),r())},__source:{fileName:oa,lineNumber:101,columnNumber:7}},m.a.createElement("div",{className:"dialog-content",__source:{fileName:oa,lineNumber:102,columnNumber:9}},m.a.createElement(na.a,{event:n,__source:{fileName:oa,lineNumber:103,columnNumber:11}})),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:oa,lineNumber:105,columnNumber:9}},m.a.createElement("input",{type:"button",className:"primary",value:n.id?Object(d.a)("calendar","Done"):n.task?Object(d.a)("Add Task"):Object(d.a)("Add Event"),onClick:r,__source:{fileName:oa,lineNumber:106,columnNumber:11}}),m.a.createElement("input",{type:"button",value:Object(d.a)("Cancel"),onClick:o,__source:{fileName:oa,lineNumber:113,columnNumber:11}}),!!n.id&&m.a.createElement("input",{type:"button",value:Object(d.a)("verb","Delete"),onClick:function(t){i.current=!0,la(t),ta.a.trashEvent(a,n.id),e.onClose().then(s)},__source:{fileName:oa,lineNumber:118,columnNumber:13}}))))},ua="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarModal.jsx";var ma=function(e){const{document:t}=u.useContext(R.a),{modal:a,resolve:n=(e=>{})}=e;return u.createElement(l.a,{viewMode:"calendar-dialog slide",onRequestClose:()=>n({action:a.cancelAction.action}),__source:{fileName:ua,lineNumber:37,columnNumber:5}},u.createElement("header",{className:"dialog-header",__source:{fileName:ua,lineNumber:41,columnNumber:7}},u.createElement("h1",{className:"dialog-title",__source:{fileName:ua,lineNumber:42,columnNumber:9}},a.title)),u.createElement("div",{className:"dialog-content",__source:{fileName:ua,lineNumber:46,columnNumber:7}},a.body,a.inputs&&u.createElement("div",{className:"dialog-inputs",__source:{fileName:ua,lineNumber:49,columnNumber:11}},a.inputs.map((e,t)=>u.createElement(u.Fragment,{key:t,__source:{fileName:ua,lineNumber:51,columnNumber:15}},u.createElement("label",{htmlFor:e.name,__source:{fileName:ua,lineNumber:52,columnNumber:17}},e.label),u.createElement("textarea",{name:e.name,__source:{fileName:ua,lineNumber:53,columnNumber:17}})))),a.checks&&u.createElement("div",{className:"dialog-inputs",__source:{fileName:ua,lineNumber:59,columnNumber:11}},a.checks.map((e,t)=>u.createElement("label",{key:t,__source:{fileName:ua,lineNumber:61,columnNumber:15}},u.createElement("input",{type:"checkbox",name:e.name,__source:{fileName:ua,lineNumber:62,columnNumber:17}}),u.createElement("span",{__source:{fileName:ua,lineNumber:63,columnNumber:17}},e.label))))),u.createElement("footer",{className:"dialog-footer",__source:{fileName:ua,lineNumber:69,columnNumber:7}},a.actions.concat([a.cancelAction]).map(i=>u.createElement("input",{autoFocus:i.default,key:i.title,onClick:()=>{!function(e){var i,s;const r=null===(i=a.checks)||void 0===i?void 0:i.reduce((e,{name:a})=>{const n=t.querySelector(`input[name="${a}"]`);return n instanceof HTMLInputElement&&(e[a]=Boolean(n.checked)),e},{}),o=null===(s=a.inputs)||void 0===s?void 0:s.reduce((e,{name:a})=>{const n=t.querySelector(`textarea[name="${a}"]`);return n instanceof HTMLTextAreaElement&&(e[a]=n.value),e},{});n({action:e,checks:r,inputs:o})}(i.action),e.onClose()},type:"button",value:i.title,__source:{fileName:ua,lineNumber:71,columnNumber:11}}))))},da=a(32),ha=a(293);var pa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\WipeScreen.jsx";var ba=function(e){const t=u.useRef(),a=u.useRef({}),[n,i]=u.useState(!1),[s,r]=u.useState(!1),o=u.useContext(R.a),l=o.innerWidth,c=o.innerHeight,{children:m,effect:d,showDialog:h}=e,p=u.useCallback(e=>{switch(e){case"showDialog":h();break;case"done":0===u.Children.count(m)&&h(),r(!0)}},[m,h]);return u.useEffect(()=>{if(!n){const e={posX:0,posY:0,width:l,height:c,saveToDisk:!1};nt.a.thumbnails.captureUI(e,(e,n)=>{e?("melt"===d?a.current=function(e,t,a,n,i){const s=200,r=.04,o=1e3,l=Math.round(a/s),c=a/l,u=Math.round(n*r),m=4*u;let d="initial";const h=[];let p,b=0;const g=document.createElement("canvas");g.width=a,g.height=n;const N=g.getContext("2d"),f=new Image(a,n);return f.onload=()=>N.drawImage(f,0,0,a,n),f.src=t,{effect:function t(s){if(!e.current)return;if(0===h.length){for(let e=0;e<c;e++)h[e]=0===e?-Math.floor(Math.random()*m):h[e-1]+(Math.floor(Math.random()*u)-u/2),h[e]>0?h[e]=0:h[e]<-m&&(h[e]=-m);b=s}if(b===s)return void(p=requestAnimationFrame(t));const r=e.current.getContext("2d");let N=!0,f=0,_=n;const v=n*(s-b)/o;b=s,r.clearRect(0,0,a,n);for(let e=0;e<c;e++)h[e]+=v,h[e]<0?(N=!1,f=0):h[e]<n?(N=!1,f=h[e]):f=n,_=Math.min(f,_),r.drawImage(g,e*l,0,l,n,e*l,f,l,n);"showDialog"!==d&&_>n/2&&!N&&(d="showDialog",i(d)),N?i("done"):p=requestAnimationFrame(t)},cleanUp:function(){p&&cancelAnimationFrame(p)}}}(t,n,l,c,p):"burn"===d&&(a.current=function(e,t,a,n,i){const s=320,r=82,o=2,l=4.25,c=1600,u=1600;let m;const d=document.createElement("canvas");d.width=s,d.height=r;const h=d.getContext("2d"),p=h.getImageData(0,0,s,r),b=p.data,g=[];for(let e=0;e<256;e++)g[e]=$e.a.hsl(Math.round(e/3),1,Math.min(1,e/192)).rgb();const N=[...Array(r).keys()].map(e=>Array(s));for(let e=0;e<r;++e)for(let t=0;t<s;++t)N[e][t]=0;let f,_=o,v=l,E=0,C="initial";return{effect:function t(l){const w=e.current;if(!w)return;if(f=f||l,E===l)return void(m=requestAnimationFrame(t));const O=l-E;E=l;for(let e=0;e<s;e++)N[r-1][e]=Math.random()>.5?255:0;let y=0;for(let e=0;e<r-1;++e)for(let t=0;t<s;++t){let a=N[(e+1)%r][(t-1+s)%s]+N[(e+1)%r][t]+N[(e+1)%r][(t+1)%s]+N[(e+2)%r][t];a/=v,N[e][t]=Math.floor(a)}for(let e=0;e<r;++e)for(let t=0;t<s;++t){let a=e*s*4+4*t;y=N[e][t];const[n,i,r]=g[y],o=Math.min(255,2*(n+i+r));b[a]=n,b[++a]=i,b[++a]=r,b[++a]=o}h.putImageData(p,0,0);const S=w.getContext("2d");S.clearRect(0,0,a,n),S.drawImage(d,0,0,s,r-_,0,0,a,n);const T=l-f;if(T>c){"showDialog"!==C&&(C="showDialog",i(C));const e=T-c;v+=O/u*3,_=Math.round(o+10*e/u)}T>c+u?i("done"):m=requestAnimationFrame(t)},cleanUp:function(){m&&cancelAnimationFrame(m)}}}(t,0,l,c,p)),i(!0),requestAnimationFrame(a.current.effect)):(console.warn("Failed to capture UI for wipe effect"),i(!0),r(!0),h())})}return()=>{a.current.cleanUp}},[c,l,p,d,h,n]),u.createElement(u.Fragment,null,n&&u.Children.count(e.children)&&u.createElement("div",{className:"wipe-container",onClick:e.showDialog,__source:{fileName:pa,lineNumber:78,columnNumber:9}},e.children),n&&!s&&u.createElement("canvas",{width:l,height:c,ref:t,__source:{fileName:pa,lineNumber:83,columnNumber:9}}))},ga="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarNotification.jsx";function Na(e){const[t,a]=u.useState(5),n=da.a.getEvent(e.notification.event_id||"");if(!n)return null;return u.createElement("div",{className:Gt()("CalendarNotification",{"CalendarNotification--FadeUp":"up"===e.fade,"CalendarNotification--FadeDown":"down"===e.fade}),__source:{fileName:ga,lineNumber:54,columnNumber:5}},u.createElement("header",{className:"dialog-header CalendarNotification-Header",__source:{fileName:ga,lineNumber:63,columnNumber:7}},u.createElement("span",{className:"CalendarNotification-Icon",dangerouslySetInnerHTML:{__html:h.k.medium},__source:{fileName:ga,lineNumber:64,columnNumber:9}}),u.createElement("span",{className:"CalendarNotification-Title",__source:{fileName:ga,lineNumber:68,columnNumber:9}},Object(d.a)("Notification:"))),u.createElement("div",{className:"dialog-content CalendarNotification-Content",__source:{fileName:ga,lineNumber:70,columnNumber:7}},u.createElement("span",{className:"CalendarNotification-Time",__source:{fileName:ga,lineNumber:71,columnNumber:9}},H()(n.start).format("LT")),u.createElement("span",{className:"CalendarNotification-Text",__source:{fileName:ga,lineNumber:74,columnNumber:9}},n.title)),u.createElement("footer",{className:"dialog-footer CalendarNotification-Footer",__source:{fileName:ga,lineNumber:78,columnNumber:7}},u.createElement("input",{className:"CalendarNotification-Button primary",type:"button",value:Object(d.a)("Dismiss"),onClick:e.onClose,__source:{fileName:ga,lineNumber:79,columnNumber:9}}),u.createElement("span",{className:"CalendarNotification-Separator",__source:{fileName:ga,lineNumber:87,columnNumber:9}},Object(d.a)("or")),u.createElement("input",{className:"CalendarNotification-Button",type:"button",value:Object(d.a)("Snooze"),onClick:()=>{ha.b.snooze(e.notification,n,t),e.onClose()},__source:{fileName:ga,lineNumber:88,columnNumber:9}}),u.createElement("input",{className:"CalendarNotification-Input",type:"number",value:t,onChange:e=>{const t=parseInt(e.target.value);t&&a(t)},__source:{fileName:ga,lineNumber:95,columnNumber:9}}),Object(d.a)("minutes")))}var fa=function(e){const t=j.a.get(V.kCalendarNotificationType),[a,n]=u.useState(!("melt"===t||"burn"===t)),i=u.useCallback(()=>{n(!0)},[]);return u.useEffect(()=>{let e;return"melt"!==t&&"burn"!==t||(e=setTimeout(i,8e3)),()=>{e&&clearTimeout(e)}},[t,i]),u.createElement(u.Fragment,null,("melt"===t||"burn"===t)&&u.createElement(ba,{effect:t,showDialog:i,__source:{fileName:ga,lineNumber:132,columnNumber:9}},a&&u.createElement(Na,{notification:e.options.notification,onClose:e.onClose,fade:"melt"===t?"down":"up",__source:{fileName:ga,lineNumber:134,columnNumber:13}})),"dialog"===t&&u.createElement(Na,{notification:e.options.notification,onClose:e.onClose,fade:"none",__source:{fileName:ga,lineNumber:143,columnNumber:9}}))},_a=a(432),va=a(107),Ea=a(222),Ca=a(38),wa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CreateCalendarDialog.jsx";var Oa=function(e){const t=da.a.getAccounts(),[a,n]=Object(u.useState)(""),[i,s]=Object(u.useState)(""),[r,o]=Object(u.useState)(""),[l,c]=Object(u.useState)(!1),[h,p]=Object(u.useState)(da.a.getDefaultAccountId());function b(e){o(e)}return m.a.createElement("div",{className:"dialog-add-calendar",__source:{fileName:wa,lineNumber:79,columnNumber:5}},m.a.createElement("div",{className:"dialog-header",__source:{fileName:wa,lineNumber:80,columnNumber:7}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:wa,lineNumber:81,columnNumber:9}},Object(d.a)("Add a New Calendar"))),0===t.length?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"dialog-content",__source:{fileName:wa,lineNumber:84,columnNumber:9}},Object(d.a)("You have no calendar Account set up. Create one in Settings.")),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:wa,lineNumber:87,columnNumber:9}},m.a.createElement("input",{type:"button",className:"primary",value:Object(d.a)("Open Calendar Settings"),onClick:function(t){ce.a.showSettings("calendar"),e.onClose()},__source:{fileName:wa,lineNumber:88,columnNumber:11}}),m.a.createElement("input",{type:"button",value:Object(d.a)("Cancel"),onClick:e.onClose,__source:{fileName:wa,lineNumber:94,columnNumber:11}}))):m.a.createElement("form",{onSubmit:async function(){if(""===h)return void b(Object(d.a)("No Calendar Account exists."));c(!0);const t={name:a,accountId:h,description:a,color:i,supportedCalendarComponent:{vevent:!0,vtodo:!1,vjournal:!1}};ta.a.setDefaultAccountId(t.accountId);const{result:n}=await ta.a.createCalendar(t,!0);n.status?e.onClose():b(n.message)},__source:{fileName:wa,lineNumber:101,columnNumber:9}},m.a.createElement("div",{className:"dialog-content",__source:{fileName:wa,lineNumber:102,columnNumber:11}},t.length>1&&m.a.createElement("label",{__source:{fileName:wa,lineNumber:104,columnNumber:15}},m.a.createElement("select",{onChange:function(e){p(e.target.value)},value:h,__source:{fileName:wa,lineNumber:105,columnNumber:17}},t.map(e=>m.a.createElement("option",{key:e.id,value:e.id,__source:{fileName:wa,lineNumber:107,columnNumber:21}},e.name)))),m.a.createElement(va.a,{type:"text",onChange:function(e){n(e.target.value)},label:Object(d.a)("Calendar Name"),value:a,autoFocus:!0,__source:{fileName:wa,lineNumber:115,columnNumber:13}}),m.a.createElement(_a.a,{label:Object(d.a)("Calendar color","Color"),colorKey:"color",colorValue:i||Ca.w[0].value,setColor:function(e,t,a=!1){s(e.hex())},predefinedColors:Ca.w,__source:{fileName:wa,lineNumber:123,columnNumber:13}}),r&&m.a.createElement(Ea.a,{type:"warning",__source:{fileName:wa,lineNumber:131,columnNumber:25}},r)),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:wa,lineNumber:134,columnNumber:11}},m.a.createElement("input",{type:"submit",value:Object(d.a)("Add Calendar"),disabled:!a.length||l,__source:{fileName:wa,lineNumber:135,columnNumber:13}}),m.a.createElement("input",{type:"button",value:Object(d.a)("Cancel"),onClick:e.onClose,__source:{fileName:wa,lineNumber:140,columnNumber:13}}))))},ya=a(502),Sa=a(503),Ta=(a(649),"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ImportCalendar.jsx");function ka(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Aa extends u.PureComponent{constructor(...e){super(...e),ka(this,"displayName","ImportEvent"),ka(this,"onNameChange",e=>{const{importOption:t}=this.props,a="CREATE_CALENDAR"===e.target.value?{createNew:!0}:{calendarId:e.target.value,createNew:!1};this.props.calendarChange(t.importId,{...t,...a})}),ka(this,"setCreateNewName",e=>{const{importOption:t}=this.props;this.props.calendarChange(t.importId,{...t,newCalendarName:e.target.value})}),ka(this,"renderProgress",()=>{const{importedEventsCount:e,eventsToImportCount:t}=this.props.importStatus,a=e.reduce((e,t)=>e+t,0),n=Math.round(a/t*100);return u.createElement(u.Fragment,null,t>0&&n<100&&u.createElement("span",{className:"spinner",dangerouslySetInnerHTML:{__html:h.le},__source:{fileName:Ta,lineNumber:54,columnNumber:9}}),t>0&&100===n&&u.createElement("span",{dangerouslySetInnerHTML:{__html:h.s},__source:{fileName:Ta,lineNumber:57,columnNumber:9}}))})}render(){var e;const{importOption:t}=this.props,{importId:a,createNew:n,calendarId:i,newCalendarName:s}=t,r=(null===(e=this.props.importStatus)||void 0===e?void 0:e.eventsToImportCount)||!1;return u.createElement(u.Fragment,null,u.createElement("div",{className:"import-calendar-target",__source:{fileName:Ta,lineNumber:69,columnNumber:9}},u.createElement("div",{className:"import-calendar-icon",__source:{fileName:Ta,lineNumber:71,columnNumber:11}},this.props.importStatus&&this.renderProgress()),u.createElement("label",{__source:{fileName:Ta,lineNumber:75,columnNumber:11}},u.createElement("span",{__source:{fileName:Ta,lineNumber:76,columnNumber:13}},"url"===a?Object(d.a)("Import to:"):Object(d.a)("$1 to:",[a])),u.createElement("select",{disabled:r,onChange:this.onNameChange,name:"calendarId",value:n?"CREATE_CALENDAR":i,__source:{fileName:Ta,lineNumber:83,columnNumber:13}},this.props.calendars.map(e=>u.createElement("option",{key:e.id,value:e.id,__source:{fileName:Ta,lineNumber:93,columnNumber:17}},e.description||e.name)),u.createElement("option",{value:"CREATE_CALENDAR",__source:{fileName:Ta,lineNumber:97,columnNumber:15}},n?s:Object(d.a)("New Calendar...")))),this.props.importStatus&&u.createElement("p",{__source:{fileName:Ta,lineNumber:107,columnNumber:13}},Ca.b[this.props.importStatus.importEventState])),n&&u.createElement("label",{className:"import-calendar-target-create",__source:{fileName:Ta,lineNumber:114,columnNumber:11}},u.createElement("span",{__source:{fileName:Ta,lineNumber:115,columnNumber:13}},Object(d.a)("New calendar name:")),u.createElement("input",{value:s,onChange:this.setCreateNewName,disabled:r,__source:{fileName:Ta,lineNumber:118,columnNumber:13}})))}}var Ia=Aa,Da=a(22),Ma=a(252),Pa=a(46),xa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\ImportCalendarDialog.jsx";function La(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ja=["STARTING_PARSING_EVENTS","PARSING_FINISHED","IMPORTING","IMPORT_FINISHED","IMPORT_ERROR"];class Ra extends u.PureComponent{constructor(...e){super(...e),La(this,"displayName","ImportCalendarDialog"),La(this,"state",{importOptions:{},importStatus:{},url:"",fileEntries:[],calendarId:da.a.getDefaultCalendarId(),calendarName:"",importType:"file"}),La(this,"_onStoreChange",e=>{if("importCount"===e){const e={};Object.keys(this.state.importOptions).forEach(t=>e[t]=da.a.getImportStatus(t)),this.setState({importStatus:e})}}),La(this,"connect",()=>{const{url:e,importOptions:t}=this.state,a=t.url;e&&Object(Pa.n)(e)&&function(e,t){fetch(e).then(e=>{if(200!==e.status)throw`Fetch remote calendar. Status code: ${e.status}`;return e.text().then(e=>{Object(Ma.f)(e,t)}).catch(e=>{console.warn("Error fetching calendar: %o",e)})})}(e,a)}),La(this,"onDismiss",()=>{ta.a.clearImportCache(),this.props.onClose()}),La(this,"onUrlChange",e=>{this.setState({importStatus:{},url:e.target.value})}),La(this,"onCalendarNameChange",e=>{this.setState({calendarName:e.target.value})}),La(this,"loadImport",()=>{ta.a.startParseForImport(e=>{const t={};e.forEach(e=>{t[e.name]={createNew:0===da.a.getCalendars().length,calendarId:da.a.getDefaultCalendarId(),newCalendarName:e.name,importId:e.name}}),this.setState({fileEntries:e,importOptions:t,importStatus:{}}),this.props.preventClosingByDelay()})}),La(this,"onSubmit",()=>{Object(Pa.n)(this.state.url)?this.connect():ta.a.loadFileEntry(this.state.importOptions)}),La(this,"onCalendarChange",(e,t)=>{this.setState(a=>({importOptions:{...a.importOptions,[e]:t}}))}),La(this,"renderFileImport",()=>u.createElement(u.Fragment,null,u.createElement("div",{className:"import-calendar-file",__source:{fileName:xa,lineNumber:141,columnNumber:7}},u.createElement("input",{autoFocus:!0,type:"button",title:Object(d.a)("Select ICS File to Import"),value:Object(d.a)("Choose Files..."),onClick:this.loadImport,__source:{fileName:xa,lineNumber:142,columnNumber:9}})),this.state.fileEntries.length>0&&u.createElement("div",{className:"import-calendar-targets",__source:{fileName:xa,lineNumber:151,columnNumber:9}},this.state.fileEntries.map(e=>u.createElement(Ia,{key:e.name,calendarChange:this.onCalendarChange,importOption:this.state.importOptions[e.name],importStatus:this.state.importStatus[e.name],calendars:this.props.calendars,__source:{fileName:xa,lineNumber:153,columnNumber:13}}))))),La(this,"setImportType",e=>{"file"===e?this.setState({importType:e,fileEntries:[]}):"url"===e&&this.setState({importType:e,importOptions:{url:{createNew:0===da.a.getCalendars().length,calendarId:da.a.getDefaultCalendarId(),newCalendarName:Object(d.a)("My Calendar"),importId:"url"}}})})}componentDidMount(){da.a.addChangeListener(this._onStoreChange)}componentWillUnmount(){da.a.removeChangeListener(this._onStoreChange)}renderNetImport(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"import-calendar-file",__source:{fileName:xa,lineNumber:168,columnNumber:7}},u.createElement(va.a,{type:"text",onChange:this.onUrlChange,label:Object(d.a)("Remote ICS Address"),value:this.state.url,__source:{fileName:xa,lineNumber:169,columnNumber:9}})),u.createElement("div",{className:"import-calendar-targets",__source:{fileName:xa,lineNumber:177,columnNumber:7}},u.createElement(Ia,{calendarChange:this.onCalendarChange,importOption:this.state.importOptions.url,importStatus:this.state.importStatus.url,calendars:this.props.calendars,__source:{fileName:xa,lineNumber:178,columnNumber:9}})))}disableImport(){const{fileEntries:e,url:t,importType:a,importStatus:n}=this.state,i="url"===a&&!Object(Pa.n)(t)||"file"===a&&0===e.length,s=Object.keys(n).some(e=>ja.includes(n[e].importEventState));return i||s||0===this.props.calendars.length}render(){return u.createElement("form",{className:"import-calendar",onSubmit:this.onSubmit,__source:{fileName:xa,lineNumber:221,columnNumber:7}},u.createElement("header",{className:"dialog-header",__source:{fileName:xa,lineNumber:222,columnNumber:9}},u.createElement("h1",{__source:{fileName:xa,lineNumber:223,columnNumber:11}},Object(d.a)("Import Calendar Events"))),u.createElement("div",{className:"dialog-content",__source:{fileName:xa,lineNumber:225,columnNumber:9}},u.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:xa,lineNumber:227,columnNumber:11}},u.createElement("div",{className:"toolbar-group",__source:{fileName:xa,lineNumber:228,columnNumber:13}},u.createElement(Da.a,{title:Object(d.a)("Local File"),isPressed:"file"===this.state.importType,onClick:()=>this.setImportType("file"),__source:{fileName:xa,lineNumber:229,columnNumber:15}}),u.createElement(Da.a,{title:Object(d.a)("Remote iCal"),isPressed:"url"===this.state.importType,onClick:()=>this.setImportType("url"),__source:{fileName:xa,lineNumber:234,columnNumber:15}}))),"file"===this.state.importType&&this.renderFileImport(),"url"===this.state.importType&&this.renderNetImport()),u.createElement("footer",{className:"dialog-footer",__source:{fileName:xa,lineNumber:244,columnNumber:9}},u.createElement("input",{type:"submit",disabled:this.disableImport(),value:Object(d.a)("Start Import"),__source:{fileName:xa,lineNumber:245,columnNumber:11}}),u.createElement("input",{type:"button",onClick:this.onDismiss,value:Object(d.a)("Close"),__source:{fileName:xa,lineNumber:250,columnNumber:11}})))}}var Ba=Object(Sa.a)(Ra),Fa=a(166),Ua=a(526),Ha=a(625),Va=a(810),Wa=a(206),za="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\MailAccountSheet.jsx";function Ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ka extends m.a.PureComponent{constructor(e){super(e),Ga(this,"_isMounted",!1),Ga(this,"loadAccountsAndCapabilities",async e=>{const t=await Wa.a.loadAllAccounts();let a=this.state.currentAccount;if(t.length<this.state.accounts.length)a=void 0,this.setState({accounts:t,currentAccount:a});else{let n;e&&t.length>this.state.accounts.length&&(a=t.find(e=>!this.state.accounts.some(t=>t.MAIL_EMAIL===e.MAIL_EMAIL)),n="signature");const i=await Fa.a.getCapabilities();this._isMounted&&(n?this.setState({accounts:t,capabilities:i,setupStep:n,currentAccount:a}):this.setState({accounts:t,capabilities:i,currentAccount:a}))}}),Ga(this,"showTips",()=>{this.setState({setupStep:"tips"})}),Ga(this,"onCreateItem",()=>{this.setState({setupStep:"setup"})}),this.state={accounts:[],currentAccount:void 0,capabilities:{},setupStep:"setup"}}componentDidMount(){this._isMounted=!0,this.loadAccountsAndCapabilities()}componentDidUpdate(e){if(e.prefValues[V.kMailAccounts]!==this.props.prefValues[V.kMailAccounts]){const e=!0;this.loadAccountsAndCapabilities(e)}}render(){var e;if("tips"===this.state.setupStep)return m.a.createElement("div",{className:"MailAccountSheet",__source:{fileName:za,lineNumber:102,columnNumber:9}},m.a.createElement("button",{className:"MailAccountSheet-exit",onClick:this.props.onClose,__source:{fileName:za,lineNumber:103,columnNumber:11}},m.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.kb},__source:{fileName:za,lineNumber:106,columnNumber:13}})),m.a.createElement(Va.a,{onClose:this.props.onClose,onCreateItem:this.onCreateItem,__source:{fileName:za,lineNumber:108,columnNumber:11}}));const t=this.state.capabilities[(null===(e=this.state.currentAccount)||void 0===e?void 0:e.MAIL_EMAIL)||""]||[];return(m.a.createElement("div",{className:"MailAccountSheet",__source:{fileName:za,lineNumber:117,columnNumber:7}},m.a.createElement("button",{className:"MailAccountSheet-exit",onClick:this.props.onClose,__source:{fileName:za,lineNumber:118,columnNumber:9}},m.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.kb},__source:{fileName:za,lineNumber:121,columnNumber:11}})),m.a.createElement("div",{className:"setting-section",__source:{fileName:za,lineNumber:123,columnNumber:9}},"setup"===this.state.setupStep&&m.a.createElement(Ua.a,{key:"create",onClose:this.props.onClose,focusInput:!0,emptyAccounts:0===this.state.accounts.length,searchableStrings:Ua.b,__source:{fileName:za,lineNumber:125,columnNumber:13}}),"signature"===this.state.setupStep&&this.state.currentAccount&&m.a.createElement(Ha.a,{accountSettings:this.state.currentAccount,capability:t,searchableStrings:Ha.b,showTips:"signature"===this.state.setupStep?()=>this.showTips():void 0,__source:{fileName:za,lineNumber:133,columnNumber:13}}))))}}var Ya=Object(Le.a)(Ka,[V.kMailAccounts]),$a=a(175),Xa=a(257),Za="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailAuthenticationDialog.jsx";function Qa(e){const[t,a]=m.a.useState(e.options.account.MAIL_USER||""),[n,i]=m.a.useState(e.options.account.MAIL_PASSWORD||""),[s,r]=m.a.useState(!1);return m.a.createElement("form",{onSubmit:function(a){a.preventDefault();const i={...e.options.account,MAIL_USER:t,MAIL_PASSWORD:n};Object(Xa.a)(i,e.options.account),$a.a.connectIMAPClient(i),e.onClose()},__source:{fileName:Za,lineNumber:61,columnNumber:5}},m.a.createElement("header",{className:"dialog-double-header",__source:{fileName:Za,lineNumber:62,columnNumber:7}},m.a.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:h.Zd.large},__source:{fileName:Za,lineNumber:63,columnNumber:9}}),m.a.createElement("h1",{className:"dialog-title",__source:{fileName:Za,lineNumber:66,columnNumber:9}},Object(d.a)("Authentication Error")),m.a.createElement("p",{className:"info",__source:{fileName:Za,lineNumber:69,columnNumber:9}},Object(d.a)("Enter credentials for $1",[e.options.account.MAIL_EMAIL]))),m.a.createElement("div",{className:"dialog-content",__source:{fileName:Za,lineNumber:73,columnNumber:7}},m.a.createElement("h4",{__source:{fileName:Za,lineNumber:74,columnNumber:9}},Object(d.a)("IMAP Username")),m.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Za,lineNumber:77,columnNumber:9}},m.a.createElement("input",{type:"text",placeholder:"user@vivaldi.net",value:t,onChange:function(e){a(e.target.value)},__source:{fileName:Za,lineNumber:78,columnNumber:11}})),m.a.createElement("h4",{__source:{fileName:Za,lineNumber:85,columnNumber:9}},Object(d.a)("IMAP Password")),m.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Za,lineNumber:88,columnNumber:9}},m.a.createElement("input",{autoFocus:!0,type:s?"text":"password",placeholder:Object(d.a)("My long safe password"),value:n,onChange:function(e){i(e.target.value)},__source:{fileName:Za,lineNumber:89,columnNumber:11}}),m.a.createElement(Da.a,{tooltip:Object(d.a)("tooltip","Show password"),image:h.Oc,isPressed:s,onClick:function(){r(!s)},__source:{fileName:Za,lineNumber:99,columnNumber:11}}))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Za,lineNumber:108,columnNumber:7}},m.a.createElement("input",{type:"submit",value:Object(d.a)("mail","Save"),autoFocus:!0,__source:{fileName:Za,lineNumber:109,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:e.onClose,value:Object(d.a)("Cancel"),__source:{fileName:Za,lineNumber:110,columnNumber:9}})))}var qa=a(68),Ja=a(29),en=a(69),tn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailDeleteDialog.jsx";function an(e,t){return t?m.a.createElement("h1",{__source:{fileName:tn,lineNumber:24,columnNumber:12}},Object(d.a)("Permanently Delete Message","Permanently Delete Messages",[e])):m.a.createElement("h1",{__source:{fileName:tn,lineNumber:26,columnNumber:10}},Object(d.a)("Delete Message","Delete Messages",[e]))}var nn=function(e){const{options:t,onClose:a}=e,{entries:n,deletePermanently:i}=t,[s,r]=m.a.useState(()=>{const e=new Map;return n.forEach(t=>{t.sources.forEach((t,a)=>{if(!t.deleted){const t=Ja.a.get(a);e.set(t.accountId,!0)}})}),e});return m.a.createElement("form",{onSubmit:function(e){e.preventDefault(),qa.a.delete(n,i,{accountIds:s}),a()},__source:{fileName:tn,lineNumber:224,columnNumber:5}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:tn,lineNumber:225,columnNumber:7}},an(n.length,i),m.a.createElement("p",{__source:{fileName:tn,lineNumber:227,columnNumber:9}},Object(d.a)("From which folders would you like to delete the message?","From which folders would you like to delete the messages?",[n.length]))),m.a.createElement("div",{className:"dialog-content label-list",__source:{fileName:tn,lineNumber:233,columnNumber:7}},[...s.entries()].map((e,t)=>{const[a,n]=e;return(m.a.createElement("label",{key:a,__source:{fileName:tn,lineNumber:237,columnNumber:13}},m.a.createElement("input",{type:"checkbox",autoFocus:0===t,checked:n,onChange:()=>{s.set(a,!n),r(new Map([...s.entries()]))},__source:{fileName:tn,lineNumber:238,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:247,columnNumber:15}},a)))})),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:tn,lineNumber:252,columnNumber:7}},m.a.createElement("input",{type:"submit",value:Object(d.a)("mail","Delete"),__source:{fileName:tn,lineNumber:253,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:a,value:Object(d.a)("Cancel"),__source:{fileName:tn,lineNumber:254,columnNumber:9}})))},sn=function(e){const{options:t,onClose:a}=e,{entries:n,deletePermanently:i}=t,s=new Set;n.forEach(e=>{e.sources.forEach((e,t)=>{e.deleted||s.add(t)})});const r=Ja.a.getByIds([...s]);return m.a.createElement("form",{onSubmit:function(e){e.preventDefault(),qa.a.delete(n,i,{setting:"accounts"}),a()},__source:{fileName:tn,lineNumber:108,columnNumber:5}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:tn,lineNumber:109,columnNumber:7}},an(n.length,i),m.a.createElement("p",{__source:{fileName:tn,lineNumber:111,columnNumber:9}},Object(d.a)("Are you sure you want to delete the message from the following folders?","Are you sure you want to delete the messages from the following folders?",[n.length]))),m.a.createElement("div",{className:"dialog-content label-list",__source:{fileName:tn,lineNumber:117,columnNumber:7}},m.a.createElement("ul",{__source:{fileName:tn,lineNumber:118,columnNumber:9}},r.map(e=>{const{id:t,accountId:a,path:n}=e;return(m.a.createElement("li",{key:t,__source:{fileName:tn,lineNumber:121,columnNumber:20}},m.a.createElement("span",{__source:{fileName:tn,lineNumber:122,columnNumber:15}},a),m.a.createElement("span",{className:"folder-path",__source:{fileName:tn,lineNumber:123,columnNumber:15}},n)))}))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:tn,lineNumber:127,columnNumber:7}},m.a.createElement("input",{type:"submit",className:"danger",value:Object(d.a)("mail","Delete"),autoFocus:!0,__source:{fileName:tn,lineNumber:128,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:a,value:Object(d.a)("Cancel"),__source:{fileName:tn,lineNumber:129,columnNumber:9}})))},rn=function(e){const{options:t,onClose:a}=e,{entries:n,deletePermanently:i}=t,[s,r]=m.a.useState(()=>{const e=new Map;return n.forEach(t=>{t.sources.forEach((t,a)=>{t.deleted||e.set(a,!0)})}),e}),o=Ja.a.getByIds([...s.keys()]);return m.a.createElement("form",{onSubmit:function(e){e.preventDefault(),qa.a.delete(n,i,{sourceFilterIds:s}),a()},__source:{fileName:tn,lineNumber:162,columnNumber:5}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:tn,lineNumber:163,columnNumber:7}},an(n.length,i),m.a.createElement("p",{__source:{fileName:tn,lineNumber:165,columnNumber:9}},Object(d.a)("From which folders would you like to delete the message?","From which folders would you like to delete the messages?",[n.length]))),m.a.createElement("div",{className:"dialog-content label-list",__source:{fileName:tn,lineNumber:171,columnNumber:7}},o.map((e,t)=>{const{id:a,accountId:n,path:i}=e,o=s.get(a);return m.a.createElement("label",{key:a,__source:{fileName:tn,lineNumber:176,columnNumber:13}},m.a.createElement("input",{type:"checkbox",autoFocus:0===t,checked:o,onChange:()=>{s.set(a,!o),r(new Map([...s.entries()]))},__source:{fileName:tn,lineNumber:177,columnNumber:15}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:184,columnNumber:15}},n," ",i))})),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:tn,lineNumber:189,columnNumber:7}},m.a.createElement("input",{type:"submit",value:Object(d.a)("mail","Delete"),__source:{fileName:tn,lineNumber:190,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:a,value:Object(d.a)("Cancel"),__source:{fileName:tn,lineNumber:191,columnNumber:9}})))},on=function(e){const{options:t,onClose:a}=e,{entries:n,deletePermanently:i}=t;let s="folders",r=!1;return m.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),qa.a.delete(n,i,{setting:s}),r){const e=i?V.kMailDeleteInOtherLocations:V.kMailMarkDeleteInOtherLocations;L.a.set(e,s)}a()},__source:{fileName:tn,lineNumber:47,columnNumber:5}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:tn,lineNumber:48,columnNumber:7}},an(n.length,i)),m.a.createElement(en.a,{className:"dialog-content label-list",name:"mail_delete_dialog_setting",value:s,onChange:e=>s=e.target.value,__source:{fileName:tn,lineNumber:51,columnNumber:7}},i&&m.a.createElement("label",{__source:{fileName:tn,lineNumber:57,columnNumber:9}},m.a.createElement("input",{type:"radio",value:"selected",autoFocus:!0,__source:{fileName:tn,lineNumber:58,columnNumber:11}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:59,columnNumber:11}},Object(d.a)("From the Current Folder Only"))),m.a.createElement("label",{__source:{fileName:tn,lineNumber:61,columnNumber:9}},m.a.createElement("input",{type:"radio",value:"folders",__source:{fileName:tn,lineNumber:62,columnNumber:11}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:63,columnNumber:11}},Object(d.a)("From All Folders on Current Account"))),m.a.createElement("label",{__source:{fileName:tn,lineNumber:65,columnNumber:9}},m.a.createElement("input",{type:"radio",value:"accounts",__source:{fileName:tn,lineNumber:66,columnNumber:11}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:67,columnNumber:11}},Object(d.a)("From All Accounts and Folders")))),m.a.createElement("footer",{className:"dialog-footer label-list",__source:{fileName:tn,lineNumber:70,columnNumber:7}},m.a.createElement("label",{__source:{fileName:tn,lineNumber:71,columnNumber:9}},m.a.createElement("input",{type:"checkbox",value:r,onChange:e=>r=e.target.value,__source:{fileName:tn,lineNumber:72,columnNumber:11}}),m.a.createElement("span",{__source:{fileName:tn,lineNumber:77,columnNumber:11}},Object(d.a)("Don’t Ask Again"))),m.a.createElement("input",{type:"submit",value:Object(d.a)("mail","Delete"),__source:{fileName:tn,lineNumber:79,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:a,value:Object(d.a)("Cancel"),__source:{fileName:tn,lineNumber:80,columnNumber:9}})))},ln=a(47),cn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\MailUnsubscribeDialog.jsx";function un(e){const[t,a]=Object(u.useState)(!1),{accountId:n,path:i}=e.options;return m.a.createElement("form",{onSubmit:function(a){a.preventDefault(),ln.a.unsubscribeMailbox(n,i,t),e.onClose()},__source:{fileName:cn,lineNumber:33,columnNumber:5}},m.a.createElement("header",{className:"dialog-double-header",__source:{fileName:cn,lineNumber:34,columnNumber:7}},m.a.createElement("div",{className:"header-icon",dangerouslySetInnerHTML:{__html:h.Zd.large},__source:{fileName:cn,lineNumber:35,columnNumber:9}}),m.a.createElement("h1",{className:"dialog-title",__source:{fileName:cn,lineNumber:38,columnNumber:9}},Object(d.a)("Unsubscribe from IMAP folder $1",[i]))),m.a.createElement("div",{className:"dialog-content",__source:{fileName:cn,lineNumber:43,columnNumber:7}},m.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:cn,lineNumber:44,columnNumber:9}},m.a.createElement("input",{autoFocus:!0,type:"checkbox",checked:t,onChange:function(){a(!t)},__source:{fileName:cn,lineNumber:45,columnNumber:11}}),m.a.createElement("span",{__source:{fileName:cn,lineNumber:51,columnNumber:11}},Object(d.a)("Remove messages from this device"))),m.a.createElement("p",{className:"info",__source:{fileName:cn,lineNumber:53,columnNumber:9}},Object(d.a)("If checked, all message files for $1 on $2 will be deleted. Otherwise they will remain on disk.",[i,n]))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:cn,lineNumber:60,columnNumber:7}},m.a.createElement("input",{type:"submit",className:"danger",value:Object(d.a)("mail","Unsubscribe"),autoFocus:!0,__source:{fileName:cn,lineNumber:61,columnNumber:9}}),m.a.createElement("input",{type:"button",onClick:e.onClose,value:Object(d.a)("Cancel"),__source:{fileName:cn,lineNumber:62,columnNumber:9}})))}var mn=a(85),dn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\PageAccessKeys.jsx";function hn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pn extends m.a.PureComponent{constructor(...e){super(...e),hn(this,"state",{accessKeys:[],shown:!1,page:null}),hn(this,"bindKeystrokes",()=>{const{accessKeys:e}=this.state;e.forEach(e=>{mn.a.bind(e.access_key,this.pressKey),mn.a.bind("shift+alt+"+e.access_key,this.pressKey)})}),hn(this,"unbindKeystrokes",()=>{const{accessKeys:e}=this.state;e.forEach(e=>{mn.a.unbind(e.access_key,this.pressKey),mn.a.unbind("shift+alt+"+e.access_key,this.pressKey)})}),hn(this,"onClose",()=>{this.state.shown&&(this.setState({shown:!1}),this.props.onClose())}),hn(this,"getLink",e=>{const t=this.state.page?st.a.parse(this.state.page.url):null;if(t){if(e.startsWith("#")&&t.href)return t.href.split("#")[0]+e;if(e.startsWith("/")&&t.protocol&&t.host)return t.protocol+"//"+t.host+e}return e}),hn(this,"pressKey",e=>{e&&e.key&&this.triggerKey(e.key)}),hn(this,"triggerKey",e=>{nt.a.accessKeys.action(c.c.unsafeGetActivePage().id,e),this.onClose()})}componentDidMount(){nt.a.accessKeys.getAccessKeysForPage(c.c.unsafeGetActivePage().id,e=>{this.setState({accessKeys:e,shown:!0,page:c.c.unsafeGetActivePage()},()=>this.bindKeystrokes())})}componentWillUnmount(){this.unbindKeystrokes()}render(){if(!this.state.shown)return null;const{accessKeys:e,page:t}=this.state;return(m.a.createElement("div",{className:"dialog-access-keys",__source:{fileName:dn,lineNumber:104,columnNumber:7}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:dn,lineNumber:105,columnNumber:9}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:dn,lineNumber:106,columnNumber:11}},Object(d.a)("Access Key Shortcuts"),t&&m.a.createElement("span",{className:"info",__source:{fileName:dn,lineNumber:109,columnNumber:15}},Object(d.a)("for $1",[t.title||t.href])))),m.a.createElement("div",{className:"dialog-content",__source:{fileName:dn,lineNumber:117,columnNumber:9}},0===e.length&&Object(d.a)("This page doesn’t seem to contain access key shortcuts."),e.length>0&&e.map((e,t)=>m.a.createElement("label",{key:t,className:"keycombo",title:e.href,__source:{fileName:dn,lineNumber:127,columnNumber:17}},m.a.createElement("input",{type:"button",className:"item",onClick:this.triggerKey.bind(null,e.access_key),value:e.access_key,__source:{fileName:dn,lineNumber:130,columnNumber:19}}),m.a.createElement("span",{__source:{fileName:dn,lineNumber:135,columnNumber:19}},e.title.replace(/\[.*?\]/g,"")||e.textContent.trim()||e.href)))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:dn,lineNumber:146,columnNumber:9}},m.a.createElement("p",{className:"info",__source:{fileName:dn,lineNumber:147,columnNumber:11}},j.a.get(V.kWebpagesAccessKeys)?Object(d.a)("Access key shortcuts are allowed in keyboard settings."):Object(d.a)("Access key shortcuts are disabled in keyboard settings.")," ",Object(d.a)("Run shortcuts on page with $1 modifier keys.",["Shift+Alt"])),m.a.createElement("input",{type:"button",onClick:this.onClose,value:Object(d.a)("Close"),className:"primary",autoFocus:!0,__source:{fileName:dn,lineNumber:158,columnNumber:11}}))))}}var bn=pn,gn=a(1350),Nn=a(548),fn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\showKeyboardShortcuts.jsx";function _n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const vn=[V.kKeyboardShortcutsEnable,V.kKeyboardShortcutsEnableSingleKey];class En extends m.a.Component{constructor(...e){super(...e),_n(this,"state",{filter:""}),_n(this,"onSettingsFilter",e=>{const t=e.target.value.toLowerCase().replace(/⌘/g,"meta").replace(/⌥/g,"alt").replace(/⇧/g,"shift").replace(/⌃/g,"ctrl");this.setState({filter:t})}),_n(this,"onKeyDown",e=>{"Escape"===e.nativeEvent.code&&0===this.refs.comboFilter.value.length&&(this.props.onClose(),e.stopPropagation(),e.preventDefault())})}componentDidMount(){this.refs.comboFilter.focus()}render(){let e="keystrokes";return this.props.prefValues[V.kKeyboardShortcutsEnable]?this.props.prefValues[V.kKeyboardShortcutsEnableSingleKey]||(e+=" singlekeydisabled"):e+=" shortcutsdisabled",m.a.createElement("div",{className:"keyboardShortcutsWrapper",tabIndex:"0",onKeyDown:this.onKeyDown,__source:{fileName:fn,lineNumber:60,columnNumber:7}},m.a.createElement("header",{__source:{fileName:fn,lineNumber:64,columnNumber:9}},m.a.createElement("h1",{__source:{fileName:fn,lineNumber:65,columnNumber:11}},Object(d.a)("Keyboard Cheat Sheet")),m.a.createElement("input",{className:"search",ref:"comboFilter",type:"search",placeholder:Object(d.a)("Filter Commands"),onChange:this.onSettingsFilter,__source:{fileName:fn,lineNumber:66,columnNumber:11}}),m.a.createElement("button",{className:"close",onClick:this.props.onClose,dangerouslySetInnerHTML:{__html:h.Nd},__source:{fileName:fn,lineNumber:71,columnNumber:11}})),m.a.createElement("div",{className:e,__source:{fileName:fn,lineNumber:76,columnNumber:9}},m.a.createElement(Nn.a,{filter:this.state.filter,view:"read-only",__source:{fileName:fn,lineNumber:77,columnNumber:11}})))}}var Cn=Object(Le.a)(En,vn),wn=a(111),On=a(507),yn=a(162),Sn=a(26),Tn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\VisualTabSwitcher\\VisualTabItem.jsx";function kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const An=[V.kThemeUseAnimation];class In extends m.a.Component{constructor(...e){super(...e),kn(this,"state",{mediaState:yn.a.getState().get(this.props.page.id)||Object(Sn.Set)()}),kn(this,"_onMediaStateStoreChanged",()=>{this.setState({mediaState:yn.a.getState().get(this.props.page.id)||Object(Sn.Set)()})}),kn(this,"onClickAudio",(e,t,a)=>{if(e.preventDefault(),e.stopPropagation(),a.has("pip"))q.a.exitPictureInPicture(this.props.page.id);else{const e=a.has("muting")?"unmute":"mute";q.a.setMuting("selection",e,Sn.List.of(t))}}),kn(this,"cancelEvent",e=>{e.stopPropagation(),e.preventDefault()}),kn(this,"_renderMediaIcon",(e,t)=>{const{active:a,discarded:n}=t,i=Ne.a.getSync("BROWSER_COLOR_FG");return!(0===e.size||n)&&m.a.createElement("span",{className:"tab-audio",onMouseDown:a=>this.onClickAudio(a,t,e),__source:{fileName:Tn,lineNumber:93,columnNumber:7}},e.has("capturing")?m.a.createElement("span",{className:"audioicon",width:"16",height:"16",dangerouslySetInnerHTML:{__html:h.Md},__source:{fileName:Tn,lineNumber:98,columnNumber:13}}):m.a.createElement(On.a,{animated:j.a.get(V.kThemeUseAnimation),mediaState:e,active:a,color:i,__source:{fileName:Tn,lineNumber:102,columnNumber:11}}))})}componentDidMount(){this._mediaStateStoreToken=yn.a.addListener(this._onMediaStateStoreChanged)}componentDidUpdate(e,t){e.page.id!==this.props.page.id&&this._onMediaStateStoreChanged()}componentWillUnmount(){this._mediaStateStoreToken.remove()}render(){const{page:e,selected:t,selectPage:a,listType:n}=this.props,{active:i}=e,{mediaState:s}=this.state;return m.a.createElement(m.a.Fragment,null,"minimal"===n&&m.a.createElement("li",{onContextMenu:this.cancelEvent,onMouseDown:()=>a&&a(e),className:Gt()({"visual-list":!0,selected:t,"active-page":i}),__source:{fileName:Tn,lineNumber:122,columnNumber:11}},m.a.createElement(wn.a,{className:"visual-tab-list-favicon",url:rt.p.getFavicon(e.url,e.url),__source:{fileName:Tn,lineNumber:130,columnNumber:13}}),this._renderMediaIcon(s,e),rt.p.getDisplayTitle(e)),"visual"===n&&m.a.createElement("div",{className:"visual-tab-switcher-title",__source:{fileName:Tn,lineNumber:139,columnNumber:13}},this._renderMediaIcon(s,e),rt.p.getDisplayTitle(e)))}}var Dn=Object(Le.a)(In,An),Mn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\VisualTabSwitcher\\VisualTabSwitcher.jsx";function Pn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xn extends m.a.PureComponent{constructor(e,t){super(e),Pn(this,"state",{selected:c.c.unsafeGetActivePage(),offset:1}),Pn(this,"getMaxAllowedWidth",()=>this.context.innerWidth-212),Pn(this,"getNumberOfPreviews",()=>{const{pages:e}=this;if(212*e.size<this.getMaxAllowedWidth())return e.size;let t=1;for(;212*(t+1)+24<this.getMaxAllowedWidth()&&t<e.size;)t++;return t}),Pn(this,"getPagesInOrder",e=>{const t=c.c.getPages(e),a=c.c.getPageHistory(e);return j.a.get(V.kTabsCycleByRecentOrder)?a.map(e=>t.find(t=>t.get("id")===e)).filter(Boolean).reverse():t}),Pn(this,"getSelectedPageWithOffset",e=>{const{pages:t}=this,{selected:a}=this.state;let n=t.indexOf(a)+e;return n=(n%t.size+t.size)%t.size,t.get(n)}),Pn(this,"cancelEvent",e=>{e.stopPropagation(),e.preventDefault()}),Pn(this,"navigateWithOffset",e=>{this.setState({selected:this.getSelectedPageWithOffset(e),offset:e},()=>{const e=document.querySelector(".visual-list.selected");e&&e.scrollIntoViewIfNeeded()})}),Pn(this,"selectBack",()=>{this.navigateWithOffset(-1)}),Pn(this,"selectForward",()=>{this.navigateWithOffset(1)}),Pn(this,"selectByUid",e=>{const t=this.workingPageSet.find(t=>t.uid===e);t&&this.selectPage(t.page)}),Pn(this,"selectPage",e=>{this.setState({selected:e})}),Pn(this,"renderMinimalList",()=>{const{pages:e}=this,{selected:t}=this.state;return m.a.createElement("div",{className:"tabswitcher list",__source:{fileName:Mn,lineNumber:146,columnNumber:7}},m.a.createElement("img",{className:Gt()({"visual-list-preview":!0,"active-page":t.active}),src:t.getIn(["extData","thumbnail"]),onContextMenu:this.cancelEvent,onMouseDown:()=>this.selectPage(t),title:rt.p.getDisplayUrl(t.url)||rt.p.getDisplayTitle(t),alt:"",__source:{fileName:Mn,lineNumber:147,columnNumber:9}}),m.a.createElement("ul",{className:"listed-tabs",__source:{fileName:Mn,lineNumber:158,columnNumber:9}},e.map(e=>{const a=e.id===t.id;return(m.a.createElement(Dn,{key:"visual-tab-list-"+e.id,selectPage:this.selectPage,listType:"minimal",page:e,selected:a,__source:{fileName:Mn,lineNumber:162,columnNumber:15}}))})))}),Pn(this,"renderVisualList",()=>{const{pages:e,workingPageSet:t}=this,{selected:a,offset:n}=this.state,i=this.getNumberOfPreviews(),s=212*i+24,r=e.indexOf(this.state.selected);let o=t;if(t.size>i){const e=Math.min(Math.max(r-Math.floor(i/2)+(-1!==n||i%2?0:1),0),t.size-i);o=t.reduce((t,a,n)=>(n>=e&&n<e+i&&t.push(a),t),[])}return(m.a.createElement("div",{className:"tabswitcher",tabIndex:"1",style:{width:s},onContextMenu:this.cancelEvent,__source:{fileName:Mn,lineNumber:203,columnNumber:7}},m.a.createElement("div",{className:"visual-tabs",__source:{fileName:Mn,lineNumber:208,columnNumber:9}},o.map(e=>{const{page:t,uid:n}=e,{active:i,id:s,url:r}=t;return m.a.createElement("div",{key:n,onMouseDown:this.selectByUid.bind(this,n),style:{backgroundImage:`url('${t.getIn(["extData","thumbnail"])}')`},title:rt.p.getDisplayTitle(t),className:Gt()({"visual-tab":!0,selected:s===a.id,"active-page":i}),__source:{fileName:Mn,lineNumber:213,columnNumber:13}},m.a.createElement("div",{className:"visual-tab-favicon-container",__source:{fileName:Mn,lineNumber:225,columnNumber:15}},m.a.createElement(wn.a,{className:"visual-tab-favicon",url:rt.p.getFavicon(r,r),__source:{fileName:Mn,lineNumber:226,columnNumber:17}})))})),m.a.createElement(Dn,{page:a,listType:"visual",__source:{fileName:Mn,lineNumber:234,columnNumber:11}})))}),this.pages=this.getPagesInOrder(t.vivaldiWindowId),this.workingPageSet=this.pages.map(e=>({uid:Math.ceil(Math.random()*Math.pow(10,12)),page:e}))}render(){return j.a.get(V.kTabsVisualSwitchListLayout)?this.renderMinimalList():this.renderVisualList()}}Pn(xn,"contextType",R.a);var Ln=xn,jn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\mainDialog.jsx";function Rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Bn=!1;class Fn extends m.a.Component{constructor(...e){super(...e),Rn(this,"preventClosingByDelay",()=>{Bn=!0;setTimeout(()=>{Bn=!1},500)}),Rn(this,"handleClose",e=>{const{dialog:t,onClose:a}=this.props;return Bn?Promise.resolve():e!==t?Promise.resolve():a()})}render(){const{dialog:e,options:t}=this.props;let a="float";switch(e){case S.a.MAIN_SHOW_VISUAL_TAB_SWITCHER:a="modal-tabswitcher";break;case S.a.MAIN_SHOW_QUICKCOMMANDS:a="qc-modal float top";break;case S.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:a="show-keyboard-shortcuts-modal-top float top";break;case S.a.MAIN_SHOW_PAGE_ACCESS_KEYS:a="page-access-keys";break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":a="onboarding";break;case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CREATE_CALENDAR_DIALOG":a="calendar-modal calendar-new float";break;case"MAIN_SHOW_ACCOUNT_SHEET":a="slide";break;case"MAIN_SHOW_CALENDAR_ALARM":a=t.fullscreen?"calendar-alarm":"float"}return(m.a.createElement(ya.a,{__source:{fileName:jn,lineNumber:94,columnNumber:7}},m.a.createElement(l.a,{onRequestClose:this.handleClose.bind(this,e),viewMode:a,__source:{fileName:jn,lineNumber:95,columnNumber:9}},e===S.a.MAIN_SHOW_QUICKCOMMANDS&&m.a.createElement(gn.a,{key:S.a.MAIN_SHOW_QUICKCOMMANDS,onClose:this.handleClose.bind(this,e),quickCommandValue:this.props.quickCommandValue,storeQuickCommandValue:this.props.storeQuickCommandSearch,__source:{fileName:jn,lineNumber:100,columnNumber:13}}),e===S.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS&&m.a.createElement(Cn,{key:S.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS,onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:108,columnNumber:13}}),e===S.a.MAIN_SHOW_PAGE_ACCESS_KEYS&&m.a.createElement(bn,{key:S.a.MAIN_SHOW_PAGE_ACCESS_KEYS,onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:113,columnNumber:13}}),e===S.a.MAIN_SHOW_VISUAL_TAB_SWITCHER&&m.a.createElement(Ln,{ref:"visualTabSwitcher",key:S.a.MAIN_SHOW_VISUAL_TAB_SWITCHER,__source:{fileName:jn,lineNumber:118,columnNumber:13}}),"MAIN_SHOW_CALENDAR_ALARM"===e&&m.a.createElement(fa,{key:"MAIN_SHOW_CALENDAR_ALARM",onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:123,columnNumber:13}}),"MAIN_SHOW_CALENDAR_EDIT_EVENT"===e&&m.a.createElement(ca,{onClose:this.handleClose.bind(this,e),editor:t.editor,__source:{fileName:jn,lineNumber:129,columnNumber:13}}),"MAIN_SHOW_CREATE_CALENDAR_DIALOG"===e&&m.a.createElement(Oa,{onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:135,columnNumber:13}}),"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG"===e&&m.a.createElement(Qa,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:139,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS"===e&&m.a.createElement(nn,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:144,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL"===e&&m.a.createElement(sn,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:149,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS"===e&&m.a.createElement(rn,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:154,columnNumber:13}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING"===e&&m.a.createElement(on,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:159,columnNumber:13}}),"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG"===e&&m.a.createElement(un,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:164,columnNumber:13}}),"MAIN_SHOW_CALENDAR_MODAL_DIALOG"===e&&m.a.createElement(ma,{onClose:this.handleClose.bind(this,e),modal:t.modal,resolve:t.resolve,__source:{fileName:jn,lineNumber:169,columnNumber:13}}),e===S.a.MAIN_SHOW_IMPORT_CALENDAR&&m.a.createElement(Ba,{pageId:-2,preventClosingByDelay:this.preventClosingByDelay,key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:175,columnNumber:13}}),e===S.a.MAIN_SHOW_ADD_FEED&&m.a.createElement(Vt,{key:e,onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:182,columnNumber:13}}),"MAIN_SHOW_ACCOUNT_SHEET"===e&&m.a.createElement(jt.a,{key:e,onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:jn,lineNumber:188,columnNumber:13}}),"MAIN_SHOW_MAIL_ACCOUNT_DIALOG"===e&&m.a.createElement(Ya,{key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:195,columnNumber:13}}),"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG"===e&&m.a.createElement(ea,{key:e,onClose:this.handleClose.bind(this,e),__source:{fileName:jn,lineNumber:200,columnNumber:13}}))))}}Rn(Fn,"contextType",R.a);var Un=Fn,Hn=a(626),Vn=a(103),Wn=a(185),zn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\sessions\\SessionTree.jsx";function Gn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Kn=[V.kCalendarRelativeDates],Yn={lastWeek:Vn.a.getWeekdayFormat("LL")+" LT",sameElse:Vn.a.getWeekdayFormat("LL")+" LT"};class $n extends m.a.PureComponent{constructor(...e){super(...e),Gn(this,"refTreeList",m.a.createRef()),Gn(this,"state",{sessionSorting:[]}),Gn(this,"isFolder",e=>!1),Gn(this,"hasChildren",e=>!1),Gn(this,"isValidForClipboard",e=>!1),Gn(this,"getContextMenuItems",e=>[]),Gn(this,"getSelectedSessions",()=>{var e;const t=(null===(e=this.refTreeList.current)||void 0===e?void 0:e.selectionModel.selectedIds.map(e=>e.id))||[],a=[];return t.forEach(e=>{var t;const n=null===(t=this.refTreeList.current)||void 0===t?void 0:t.findTreeItem(e);n&&a.push(n)}),a}),Gn(this,"onKeyDown",e=>{"Enter"===ia.a[e.keyCode]&&this.props.onOpenSessions(),("Escape"===ia.a[e.keyCode]||"."===ia.a[e.keyCode]&&e.metaKey)&&this.props.onClose(),"Up"!==ia.a[e.keyCode]&&"Down"!==ia.a[e.keyCode]||this.props.onUpdateSelection(!0)}),Gn(this,"getRowComponentProps",e=>({...e,columns:this.props.columns})),Gn(this,"rowComponent",e=>{const t=e.node,a=this.props.prefValues[V.kCalendarRelativeDates]?H()(t.createDateJS).calendar(null,Yn):H()(t.createDateJS).format(Yn.sameElse),n=Object(d.a)("$1 tab","$1 tabs",[t.tabs]),i=Object(d.a)("$1 window","$1 windows",[t.windows]),s=Object(d.a)("$1 in $2",[n,i]);return this.props.columns?this.props.columns.map(e=>{switch(e.id){case"name":return m.a.createElement("label",{key:"0",__source:{fileName:zn,lineNumber:108,columnNumber:13}},m.a.createElement("span",{__source:{fileName:zn,lineNumber:109,columnNumber:15}},t.name));case"createDateJS":return m.a.createElement("label",{key:"1",__source:{fileName:zn,lineNumber:114,columnNumber:13}},m.a.createElement("span",{__source:{fileName:zn,lineNumber:115,columnNumber:15}},a));case"tabs":return m.a.createElement("label",{key:"2",__source:{fileName:zn,lineNumber:120,columnNumber:13}},m.a.createElement("span",{__source:{fileName:zn,lineNumber:121,columnNumber:15}},s));default:console.warn("Unknown sorting field:",e.id)}}):null})}componentDidMount(){this.refTreeList.current&&this.refTreeList.current.focusTree()}render(){return m.a.createElement(Wn.a,{ref:this.refTreeList,rowComponent:this.rowComponent,getRowComponentProps:this.getRowComponentProps,nodes:this.props.nodes,onItemMouseDown:this.props.onUpdateSelection,onItemDoubleClick:this.props.onOpenSessions,onKeyDown:this.onKeyDown,isFolder:this.isFolder,hasChildren:this.hasChildren,isValidForClipboard:this.isValidForClipboard,sorting:this.props.sessionSorting,columns:this.props.columns,multiSelect:!0,__source:{fileName:zn,lineNumber:133,columnNumber:7}})}}var Xn=Object(Le.a)($n,Kn),Zn=a(204),Qn=a(51),qn=a(153),Jn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\openSessionDialog.jsx";function ei(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ti=[{text:Object(d.a)("title","Name"),value:"name",fullScreenTitle:Object(d.a)("Sort by Name"),width:350,visible:!0,key:!0},{text:Object(d.a)("Creation Date"),value:"createDateJS",fullScreenTitle:Object(d.a)("Sort by Creation Date"),width:260,visible:!0},{text:Object(d.a)("Info"),value:"tabs",fullScreenTitle:Object(d.a)("Sort by Info"),width:150,visible:!0}];class ai extends m.a.Component{constructor(...e){super(...e),ei(this,"sortComparator",(e,t)=>{const{sortOrder:a,sortField:n}=this.state.sessionSorting;return Qn.a.getDefaultComparator(a,n)(e,t)}),ei(this,"refreshSessionList",()=>{nt.a.sessionsPrivate.getAll(e=>{if(Array.isArray(e)){let t=1;e.forEach(e=>{e.id=t++}),this.setState({sessions:e})}})}),ei(this,"updateSelectedSessions",e=>{if(this.refs.sessionTree){var t=!1;this.refs.sessionTree.getSelectedSessions().length>=1&&(t=!0),this.setState({disabled:void 0!==e?!e:!t})}}),ei(this,"onDelete",()=>{const e=this.refs.sessionTree.getSelectedSessions();for(var t=0;t<e.length;t++)nt.a.sessionsPrivate.delete(e[t].name,e=>{e&&console.warn("Error deleting session '"+this.state.sessions[t].name+"', error: "+e)});this.refreshSessionList()}),ei(this,"onOpenSessions",()=>{const e={openInNewWindow:this.state.openInNewWindow},t=this.refs.sessionTree.getSelectedSessions();for(var a=0;a<t.length;a++)nt.a.sessionsPrivate.open(t[a].name,e,e=>{e&&console.warn("Error opening session '"+t[a].value+"', error: "+e)});this.props.onClose()}),ei(this,"onSortChange",(e,t)=>{this.setState({sessionSorting:{sortOrder:e,sortField:t}})}),ei(this,"onUpdateRow",e=>{this.setState({columns:e})}),ei(this,"onSaveRow",()=>{Object(qn.b)(this.state.columns,"sessions")}),ei(this,"_toggleOpenInNewWindow",()=>{this.setState(e=>({openInNewWindow:!e.openInNewWindow}))}),ei(this,"state",{sessions:[],columns:Object(qn.e)().sessions||Object(qn.d)(ti),disabled:!0,openInNewWindow:!0,sessionSorting:{sortOrder:Qn.a.DESCENDING_SORT,sortField:"createDateJS",comparator:this.sortComparator}})}componentDidMount(){this.refreshSessionList(),this.updateSelectedSessions()}render(){return m.a.createElement(l.a,{onRequestClose:this.props.onClose,dialogWidth:800,__source:{fileName:Jn,lineNumber:148,columnNumber:7}},m.a.createElement("div",{className:"open-session",__source:{fileName:Jn,lineNumber:149,columnNumber:9}},m.a.createElement("form",{className:"dialog-session",onSubmit:this.onOpenSessions,__source:{fileName:Jn,lineNumber:150,columnNumber:11}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:Jn,lineNumber:151,columnNumber:13}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:Jn,lineNumber:152,columnNumber:15}},Object(d.a)("Open Session"))),m.a.createElement("div",{className:"dialog-content",__source:{fileName:Jn,lineNumber:154,columnNumber:13}},this.state.sessions.length>0?m.a.createElement("div",{className:"session-list",__source:{fileName:Jn,lineNumber:156,columnNumber:19}},m.a.createElement(Zn.a,{fields:ti,fullsize:!0,onSortChange:this.onSortChange,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sessionSorting.sortField,sortOrder:this.state.sessionSorting.sortOrder,keyAccess:this.props.keyAccess,manualSorting:!1,__source:{fileName:Jn,lineNumber:157,columnNumber:19}}),m.a.createElement(Xn,{ref:"sessionTree",sessionSorting:this.state.sessionSorting,onOpenSessions:this.onOpenSessions,onUpdateSelection:this.updateSelectedSessions,onClose:this.props.onClose,columns:this.state.columns,nodes:this.state.sessions,__source:{fileName:Jn,lineNumber:169,columnNumber:19}})):m.a.createElement("div",{__source:{fileName:Jn,lineNumber:178,columnNumber:19}},Object(d.a)("No saved session."))),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Jn,lineNumber:181,columnNumber:13}},m.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:Jn,lineNumber:182,columnNumber:15}},m.a.createElement("input",{type:"checkbox",checked:this.state.openInNewWindow,onChange:this._toggleOpenInNewWindow,disabled:0===this.state.sessions.length,__source:{fileName:Jn,lineNumber:183,columnNumber:17}}),m.a.createElement("span",{__source:{fileName:Jn,lineNumber:187,columnNumber:19}},Object(d.a)("Open Session in a New Window"))),m.a.createElement("input",{type:"submit",disabled:this.state.disabled,value:Object(d.a)("session","Open"),__source:{fileName:Jn,lineNumber:189,columnNumber:15}}),m.a.createElement("input",{type:"button",onClick:this.onDelete,className:"danger",disabled:this.state.disabled,value:Object(d.a)("session","Delete"),__source:{fileName:Jn,lineNumber:193,columnNumber:15}}),m.a.createElement("input",{type:"button",onClick:this.props.onClose,value:Object(d.a)("session","Cancel"),__source:{fileName:Jn,lineNumber:199,columnNumber:15}})))))}}var ni=ai,ii=a(40),si=a.n(ii),ri=a(1357),oi=a(377),li=a(114),ci=a(108),ui=a(234),mi=a(97),di="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\addWebPanelButton.jsx";function hi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const pi=ri.sites;class bi extends m.a.PureComponent{constructor(...e){super(...e),hi(this,"dropMode",{support:!1,copy:!1}),hi(this,"state",{drawerOpen:!1,suggestions:[],url:"",autocompleteValue:"",editUrl:void 0}),hi(this,"_onUrlbarStoreChanged",()=>{const{editUrl:e,autocompleteValue:t}=ci.a.getUrlfieldStateFromId("AddWebPanel");this.setState({autocompleteValue:t,editUrl:e})}),hi(this,"onDragEnter",e=>{this.dropMode=this.supportDropForEvent(e)}),hi(this,"onDragOver",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move":e.dataTransfer.dropEffect="none"}),hi(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&i.a.getUrlsFromEventPromise(e,!0).then(e=>{e.forEach(e=>{this.props.addNew(e.url)})})}),hi(this,"supportDropForEvent",e=>{const t={};return e.dataTransfer.types.some(e=>e===this.props.rejectMimeType)||(t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e),t.copy=t.support&&!e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)),t}),hi(this,"handleClickOutside",()=>{this.state.drawerOpen&&this.closeDrawer()}),hi(this,"handleKeyDown",(e,t,a)=>{if("start"===e){switch(a.key){case"ArrowUp":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowDown":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":this.props.leaveBar();break;default:return}a.preventDefault(),a.stopPropagation()}else if("suggestion"===e){switch(a.key){case"ArrowLeft":this.moveFocus(t,"left",!1);break;case"ArrowRight":this.moveFocus(t,"right",!1);break;case"ArrowUp":this.moveFocus(t,"up",!1);break;case"ArrowDown":this.moveFocus(t,"down",!1);break;default:return}a.preventDefault(),a.stopPropagation()}}),hi(this,"moveFocus",(e,t,a)=>{const n=si.a.findDOMNode(this);if(n instanceof HTMLElement&&(!0===a||Object(mi.a)(n))){const a=Array.from(n.querySelectorAll("button.webpanel-suggestion")),i=a.map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===i.length||i.length!==a.length)return!1;let s,r=0,o=-1;switch(a.forEach(e=>{const t=e.getBoundingClientRect();o<t.left&&(r++,o=t.left)}),t){case"current":if(""===e||"first"===e?e=i[0]:"last"===e&&(e=i[0===this.props.keyAccess?i.length-1:0]),s=i.indexOf(e),-1===s)return!1;break;case"right":case"left":if(1===i.length)return!1;if(s=i.indexOf(e),-1===s)return!1;if("right"===t){if((s+1)%r==0)return!1;if(s+=1,s>=i.length)return!1}else{if(s%r==0)return!1;if(s-=1,s>=i.length)return!1}break;case"up":case"down":if(1===i.length)return!1;if(s=i.indexOf(e),-1===s)return!1;if("up"===t){if(s-=r,s<0)return!1;e=i[s]}else if(s+=r,s>=i.length)return!1;break;default:return!1}e=i[s];const l=n.querySelector(`button.webpanel-suggestion[data-id="${e}"]`);if(l)return l.focus(),!0}return!1}),hi(this,"onToggleCallout",()=>{if(this.state.drawerOpen)this.closeDrawer();else{this.updateSuggestedSites();const e=document.getElementById("panels");e&&e.classList.add("leak");const t=c.c.unsafeGetActivePage().get("url"),a={drawerOpen:!0,url:rt.p.getDisplayUrl(t)};li.a.setUrlfieldState("AddWebPanel",{selectionStart:0,selectionEnd:t.length,editUrl:void 0,autocompleteValue:""}),this.setState(a),mn.a.bind("esc",this.closeDrawer)}}),hi(this,"onAddWebpanel",()=>{let e=(this.state.autocompleteValue||this.state.editUrl||this.state.url||"").trim();0!==e.length&&(e=Object(Pa.c)(e),this.props.addNew(e),this.closeDrawer())}),hi(this,"onClickSuggested",e=>{0!==e.length&&(e=Object(Pa.c)(e),this.props.addNew(e),this.closeDrawer())}),hi(this,"onUrlChange",e=>{this.setState({url:e||""})}),hi(this,"closeDrawer",()=>{const e=document.getElementById("panels");e&&e.classList.remove("leak"),mn.a.unbind("esc",this.closeDrawer),this.setState({drawerOpen:!1,url:"",editUrl:void 0,autocompleteValue:""})}),hi(this,"preventContextMenu",e=>{e.stopPropagation()})}componentDidMount(){ci.a.addChangeListener(this._onUrlbarStoreChanged)}updateSuggestedSites(){B.a.isIncognitoOrGuest(this.context.vivaldiWindowId)||I.a.topSites.get(e=>{const t=this.props.webPanels.map(e=>e.contentUrl)||[];let a=e.filter(e=>-1===t.indexOf(e.url));const n=pi.filter(e=>-1===t.indexOf(e.url));if(a.length+n.length<6)a=[];else{const e=12;n.length>e&&(n.splice(e),a=[]);let t=e-n.length;for(;t>0;){if(a.length>=t){a.splice(t);break}t-=6}}this.setState({suggestions:a.concat(n)})})}componentWillUnmount(){ci.a.removeChangeListener(this._onUrlbarStoreChanged)}render(){const e=Gt()({addwebpanelcallout:!0,hidden:!this.state.drawerOpen}),t=Gt()({uifocusstop:this.props.uiFocus,addwebpanel:!0,panelbtn:!0});return m.a.createElement("div",{className:"addwebpanel-wrapper",__source:{fileName:di,lineNumber:406,columnNumber:7}},m.a.createElement("button",{title:Object(d.a)("Add Web Panel"),"data-id":this.props.id,className:t,tabIndex:this.props.keyAccess,onKeyDown:this.handleKeyDown.bind(this,"start","-1"),onClick:this.onToggleCallout,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:di,lineNumber:407,columnNumber:7}},m.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.i.small},__source:{fileName:di,lineNumber:418,columnNumber:9}})),this.state.drawerOpen&&m.a.createElement(Ct.a,{focusName:"focus-webpanel-suggestions",forceTrap:!0,style:{display:"contents"},__source:{fileName:di,lineNumber:422,columnNumber:11}},m.a.createElement("div",{className:e,onContextMenu:this.preventContextMenu,__source:{fileName:di,lineNumber:426,columnNumber:13}},m.a.createElement("form",{__source:{fileName:di,lineNumber:428,columnNumber:15}},m.a.createElement("header",{__source:{fileName:di,lineNumber:429,columnNumber:17}},m.a.createElement("h1",{__source:{fileName:di,lineNumber:430,columnNumber:19}},Object(d.a)("Add Web Panel"))),m.a.createElement("div",{className:"webpanel-input",__source:{fileName:di,lineNumber:432,columnNumber:17}},m.a.createElement(oi.a,{ref:"input",className:"address",title:Object(d.a)("Enter webpage address"),placeholder:"vivaldi.net",displayUrl:this.state.url,editUrl:this.state.editUrl,autocompletionEnabled:!0,onChange:this.onUrlChange,pageId:"AddWebPanel",autoFocus:!0,__source:{fileName:di,lineNumber:433,columnNumber:19}}),m.a.createElement("button",{className:"add",tabIndex:"0",onClick:this.onAddWebpanel,dangerouslySetInnerHTML:{__html:h.h.medium},tooltip:Object(d.a)("Add Web Panel"),__source:{fileName:di,lineNumber:443,columnNumber:19}})),this.state.suggestions&&this.state.suggestions.length>0&&m.a.createElement("div",{className:"webpanel-suggestions",__source:{fileName:di,lineNumber:450,columnNumber:17}},m.a.createElement("div",{className:"suggestions-list",key:"list",__source:{fileName:di,lineNumber:451,columnNumber:19}},this.state.suggestions.map((e,t)=>{const a=e.faviconURL?e.faviconURL:"chrome://favicon/size/16@2x/"+e.url,n=t.toString();return m.a.createElement("button",{key:t,className:"webpanel-suggestion",tabIndex:0===t?"0":this.props.keyAccess,"data-id":n,title:e.title+"\n"+e.url,onKeyDown:this.handleKeyDown.bind(this,"suggestion",n),onClick:()=>this.onClickSuggested(e.url),__source:{fileName:di,lineNumber:458,columnNumber:27}},m.a.createElement("img",{src:a,alt:"",__source:{fileName:di,lineNumber:467,columnNumber:31}}))})))))))}}hi(bi,"contextType",R.a);var gi=Object(ui.a)(bi),Ni=a(1358),fi=a(711),_i=a(42),vi=a(854),Ei=a(217),Ci="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarPanel.jsx";const wi=[V.kCalendarDisplayDensity],Oi=da.a.getPanelResourceKey(),yi=Symbol("CalendarPanel");let Si=!1;const Ti=()=>ta.a.viewPreviousPeriod(Oi),ki=()=>ta.a.viewNextPeriod(Oi);function Ai(e){ta.a.selectDate(Oi,e)}const Ii=(e,t)=>{ta.a.updateCalendarUI(Oi,t.merge({displayMode:e,anchorDate:t.selectedDate}))};function Di(e,t){const{calendarFilter:a,editor:n,events:i,eventDraft:s,selectedEvent:r}=Object(ra.a)(Oi),o=Object(Ei.a)(wi),l=u.useMemo(()=>({editor:{pageId:Oi,uid:n.uid},displayDensity:o[V.kCalendarDisplayDensity],isActivePage:!1,isPanel:!0}),[n.uid,o]);if(!e.open)return Si=!1,null;!1===Si&&e.open&&(ta.a.pollAllCalDAVAccounts(!0),Si=!0);const{displayMode:c}=a,{anchorDate:m}=a,p=_i.a.getDisplayRange(m,c);return u.createElement("div",{ref:t,className:"panel",id:"calendar_panel",__source:{fileName:Ci,lineNumber:86,columnNumber:5}},u.createElement("header",{__source:{fileName:Ci,lineNumber:87,columnNumber:7}},u.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Ci,lineNumber:88,columnNumber:9}},u.createElement(vi.a,{initialPeriod:m,setPeriod:Ai,startDate:p.start,endDate:p.end,displayMode:c,__source:{fileName:Ci,lineNumber:89,columnNumber:11}})),u.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:Ci,lineNumber:97,columnNumber:9}},u.createElement(Da.a,{onClick:()=>ta.a.selectDate(Oi,H()()),style:{marginRight:"auto"},title:Object(d.a)("Today"),__source:{fileName:Ci,lineNumber:98,columnNumber:11}}),u.createElement("div",{className:"toolbar-group",__source:{fileName:Ci,lineNumber:104,columnNumber:11}},u.createElement(Da.a,{className:"button-narrow",onClick:Ti,tooltip:Object(d.a)("Previous"),image:h.hc.medium,__source:{fileName:Ci,lineNumber:105,columnNumber:13}}),u.createElement(Da.a,{className:"button-narrow",onClick:ki,tooltip:Object(d.a)("Next"),image:h.jc.medium,__source:{fileName:Ci,lineNumber:112,columnNumber:13}})),u.createElement("div",{className:"toolbar-group",__source:{fileName:Ci,lineNumber:120,columnNumber:11}},u.createElement(Da.a,{onClick:()=>Ii("day",a),title:Object(d.a)("Day"),isPressed:"day"===c,__source:{fileName:Ci,lineNumber:121,columnNumber:13}}),u.createElement(Da.a,{onClick:()=>Ii("week",a),title:Object(d.a)("Week"),isPressed:"week"===c,__source:{fileName:Ci,lineNumber:127,columnNumber:13}}),u.createElement(Da.a,{onClick:()=>Ii("agenda",a),title:Object(d.a)("Agenda"),isPressed:"agenda"===c,__source:{fileName:Ci,lineNumber:133,columnNumber:13}})))),u.createElement(aa.a.Provider,{value:l,__source:{fileName:Ci,lineNumber:142,columnNumber:7}},u.createElement(fi.a,{filter:a,events:i,editingEvent:s,editorUid:yi,selectedEvent:r,displayModes:["day","week","agenda"],__source:{fileName:Ci,lineNumber:143,columnNumber:9}})))}var Mi=u.memo(u.forwardRef(Di)),Pi=a(193),xi=a(973),Li="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\chat\\ChatPanel.jsx";function ji(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ri extends m.a.Component{constructor(...e){super(...e),ji(this,"state",{to:""}),ji(this,"_chatStoreListener",()=>{const e=Pi.a.getActiveConversation();this.setState({to:e})})}componentDidMount(){this._chatStoreToken=Pi.a.addListener(this._chatStoreListener)}componentWillUnmount(){this._chatStoreToken.remove()}render(){return this.props.open?m.a.createElement("div",{className:"panel",id:"chat",__source:{fileName:Li,lineNumber:37,columnNumber:7}},m.a.createElement(xi.a,{isPanel:!0,initialTo:this.state.to,__source:{fileName:Li,lineNumber:38,columnNumber:9}})):null}}var Bi=Ri,Fi=a(140),Ui=a(1359),Hi=a(1362),Vi=a(237),Wi=a(828),zi=a(295),Gi=a(829),Ki=a(556),Yi=a(517),$i=a(605),Xi=(a(399),"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryPanel.jsx");function Zi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Qi=[{text:Object(d.a)("Date"),value:"visitTime",fullScreenTitle:Object(d.a)("Sort by Date")},{text:Object(d.a)("Title"),value:"title",fullScreenTitle:Object(d.a)("Sort by Title")},{text:Object(d.a)("Address"),value:"address",fullScreenTitle:Object(d.a)("Sort by Address")},{text:Object(d.a)("Views"),value:"visitCount",fullScreenTitle:Object(d.a)("Sort by Page Views")}];class qi extends m.a.PureComponent{constructor(...e){super(...e),Zi(this,"hasLoadedData",!1),Zi(this,"onSearch",e=>{const t=zi.a.getPanelResourceKey();E.a.saveStateFromSearchQuery(t,e),E.a.searchHistory(t,e)}),Zi(this,"onSearchDomain",e=>{e=Object(Yi.a)(e);const{historyFilter:t}=this.props,a=Object($i.a)(e),n=t.merge({text:e,parsedFilter:a,searchURL:!0});this.onSearch(n)}),Zi(this,"onContextMenu",e=>{e.nativeEvent.buttons>0&&this.refs.tree.unSelectAll(),this.refs.tree.onContextMenu(e)}),Zi(this,"onSortChange",(e,t)=>{const{historyFilter:a}=this.props,n=a.merge({sortOrder:e,sortField:t});this.onSearch(n)}),Zi(this,"focusTree",()=>{const e=si.a.findDOMNode(this.refs.tree),{HTMLElement:t}=this.context;e instanceof t&&e.focus()})}componentDidUpdate(e){!e.open&&this.props.open&&this.refs.searchField&&this.refs.searchField.focusField(),this.props.open&&!this.hasLoadedData&&(this.hasLoadedData=!0,E.a.loadAll())}render(){if(!this.props.open)return null;const e=this.props.historyItems,t=this.props.historyFilter;return m.a.createElement("div",{className:"panel",id:"history-panel",__source:{fileName:Xi,lineNumber:102,columnNumber:7}},m.a.createElement("header",{__source:{fileName:Xi,lineNumber:103,columnNumber:9}},m.a.createElement("h1",{__source:{fileName:Xi,lineNumber:104,columnNumber:11}},this.props.title),m.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:Xi,lineNumber:105,columnNumber:11}},m.a.createElement(Wi.a,{ref:"searchField",showPicker:!0,search:this.onSearch,historyFilter:t,minDate:this.props.oldestHistoryDate,__source:{fileName:Xi,lineNumber:106,columnNumber:13}}))),e.length>0&&m.a.createElement(Zn.a,{fields:Qi,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:t.sortField,sortOrder:t.sortOrder,fullsize:!1,manualSorting:!1,__source:{fileName:Xi,lineNumber:115,columnNumber:11}}),e.length>0?m.a.createElement("section",{className:"outerScrollbar",onContextMenu:this.onContextMenu,__source:{fileName:Xi,lineNumber:125,columnNumber:11}},m.a.createElement(Ki.a,{ref:"tree",fullView:!1,inManager:!1,nodes:e,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:Xi,lineNumber:127,columnNumber:13}})):m.a.createElement("section",{__source:{fileName:Xi,lineNumber:135,columnNumber:11}},m.a.createElement("p",{__source:{fileName:Xi,lineNumber:136,columnNumber:13}},Object(d.a)("No browsing history data for selected period."))))}}Zi(qi,"contextType",R.a);var Ji=Object(Gi.a)(qi),es=a(989),ts=a(785),as=a(1365),ns=a(67),is=a(221),ss=a(279),rs=a(65),os=a(228),ls=a(259),cs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\webPanel.jsx";function us(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ms={contentload:"handleContentLoad",dialog:"handleDialog",loadabort:"handleAbort",loadstop:"handleLoadStop",newwindow:"handleNewWindow",permissionrequest:"handleOnPermissionRequest",targeturlchanged:"handleTargetURLChanged"},ds=`(function() {\n  var title = document.getElementsByTagName('title')[0];\n  if (title) {\n    title.addEventListener('DOMSubtreeModified', function (e) {\n      chrome.runtime.sendMessage({\n        action: '${ls.d}',\n        panelUrl: document.URL,\n        title: document.title\n      });\n    }, false);\n  }\n})()`;class hs extends m.a.PureComponent{constructor(...e){super(...e),us(this,"state",{title:Object(d.a)("Loading..."),tooltip:void 0,canGoBack:!1,canGoForward:!1,canReload:!1}),us(this,"_lookupFavicon",!0),us(this,"attachWebViewEventHandlers",e=>{Object.keys(ms).forEach(t=>{e.addEventListener(t,this[ms[t]])})}),us(this,"removeWebViewEventHandlers",e=>{Object.keys(ms).forEach(t=>{e.removeEventListener(t,this[ms[t]])})}),us(this,"_alarmsChanged",e=>{(null==e?void 0:e.find(e=>e&&"RELOAD"===e.type&&this.props.webPanel.id.endsWith(e.id)))&&this.reload()}),us(this,"onPanelStoreChange",e=>{this.props.isVisible&&"setFocus"===e&&document.activeElement&&!Object(mi.a)(si.a.findDOMNode(this))&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())}),us(this,"getMobileUAString",()=>{var e=navigator.userAgent,t=e.indexOf("("),a=e.indexOf(")",t);return t>=0&&a>t&&(e=e.substr(0,t+1)+"Linux; Android 8.0.0; SM-G965F Build/R16NW"+e.substr(a)),e=e.replace("Safari","Mobile Safari")}),us(this,"handleNewWindow",e=>{switch(e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";0");break;case"new_window":e.preventDefault(),q.a.openWindow(e.targetUrl);break;case"off_the_record":e.preventDefault(),q.a.openWindow(e.targetUrl,{incognito:!0});break;case"new_popup":e.preventDefault()}}),us(this,"handleDialog",e=>{"confirm"===e.messageType||"prompt"===e.messageType?e.dialog.cancel():"alert"===e.messageType&&e.dialog.ok("")}),us(this,"handleTargetURLChanged",({newUrl:e})=>{const t=Object(os.a)(e);rs.a.setStatus(t)}),us(this,"getFaviconHost",()=>{var e=st.a.parse(this.refs.webpanelwebview.src);return e.protocol&&e.host?e.protocol+"//"+e.host+"/":""}),us(this,"handleLoadStop",e=>{var t=this.refs.webpanelwebview;this.setState({canGoBack:t.canGoBack(),canGoForward:t.canGoForward(),canReload:!0}),this.props.setWebPanelValue(this.props.webPanel.id,"activeUrl",this.refs.webpanelwebview.src),this._lookupFavicon&&(setTimeout(this.onSetFaviconUrl.bind(this),1e3),this._lookupFavicon=!1),t.setZoomMode("per-view"),t.setZoom(1)}),us(this,"handleContentLoad",e=>{this.refs.webpanelwebview.executeScript({code:"document.title"},e=>{this.setState({title:e[0],tooltip:void 0}),this.props.setWebPanelValue(this.props.webPanel.id,"title",e[0])}),this.refs.webpanelwebview.executeScript({code:ds},e=>{I.a.runtime.lastError&&console.warn("listenForTitleChange:",I.a.runtime.lastError)}),this.refs.webpanelwebview.executeScript({file:"inject-all-bundle.js"})}),us(this,"handleAbort",e=>{const t=Object(d.a)("Aborted"),a=Object(d.a)("Loading aborted with reason $1",[e.reason]);this.setState({title:t,tooltip:a})}),us(this,"onSetFaviconUrl",()=>{this.props.setWebPanelValue(this.props.webPanel.id,"faviconUrl",this.refs.webpanelwebview.src)}),us(this,"reload",()=>{this.setState({title:Object(d.a)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.reload()}),us(this,"home",()=>{this.setState({title:Object(d.a)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.src=this.props.webPanel.url}),us(this,"back",()=>{this.refs.webpanelwebview.back()}),us(this,"forward",()=>{this.refs.webpanelwebview.forward()}),us(this,"setTitle",e=>{this.setState({title:e})}),us(this,"onContextMenu",e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.props.menuPromise(this.props.webPanel.id).then(t=>{Object(fe.a)(this.context.vivaldiWindowId,t)(e)})}),us(this,"handleOnPermissionRequest",e=>{switch(e.preventDefault(),e.permission){case"download":j.a.get(V.kDownloadsStartAutomatically)?(e.request.allow(),j.a.get(V.kDownloadsOpenPanelOnNew)&&me.d.canAutoOpen("downloads")&&ns.a.toggleContent("downloads")):(e.dialogtype=e.permission,this.showDialog(e))}}),us(this,"showDialog",e=>{var t=this.refs.webpanelwebview;e.webview=t,ce.a.showDialog(e)})}componentDidMount(){var e=this.refs.webpanelwebview;this.props.webPanel.mobileMode&&e.setUserAgentOverride(this.getMobileUAString()),this.attachWebViewEventHandlers(e),e.src=this.props.webPanel.url,me.d.addChangeListener(this.onPanelStoreChange),ss.a.addChangeListener(this._alarmsChanged)}componentWillUnmount(){var e=this.refs.webpanelwebview;this.removeWebViewEventHandlers(e),me.d.removeChangeListener(this.onPanelStoreChange),ss.a.removeChangeListener(this._alarmsChanged)}componentDidUpdate(){this.props.focusContent&&document.activeElement&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())}UNSAFE_componentWillReceiveProps(e){var t=this.refs.webpanelwebview;e.webPanel.mobileMode!==t.isUserAgentOverridden()&&(e.webPanel.mobileMode?t.setUserAgentOverride(this.getMobileUAString()):t.setUserAgentOverride(navigator.userAgent),this.reload())}render(){const e=Gt()({panel:!0,webpanel:!0,visible:this.props.isVisible});return m.a.createElement("div",{className:e,__source:{fileName:cs,lineNumber:392,columnNumber:5}},this.props.isVisible&&this.props.panelUI.showToolbar&&m.a.createElement("header",{className:"webpanel-header",onContextMenu:this.onContextMenu,__source:{fileName:cs,lineNumber:394,columnNumber:9}},m.a.createElement("h1",{className:"webpanel-title",title:this.state.tooltip||this.state.title,__source:{fileName:cs,lineNumber:396,columnNumber:11}},this.state.title),m.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:cs,lineNumber:400,columnNumber:11}},this.props.panelUI.allControls?m.a.createElement("div",{className:"button-toolbar",__source:{fileName:cs,lineNumber:402,columnNumber:15}},m.a.createElement("button",{className:"button-toolbar back",title:Object(d.a)("navigation","Back"),onClick:this.back,disabled:!this.state.canGoBack,dangerouslySetInnerHTML:{__html:h.hc.medium},__source:{fileName:cs,lineNumber:403,columnNumber:17}})):null,this.props.panelUI.allControls?m.a.createElement("div",{className:"button-toolbar",__source:{fileName:cs,lineNumber:411,columnNumber:15}},m.a.createElement("button",{className:"button-toolbar forward",title:Object(d.a)("navigation","Forward"),onClick:this.forward,disabled:!this.state.canGoForward,dangerouslySetInnerHTML:{__html:h.jc.medium},__source:{fileName:cs,lineNumber:412,columnNumber:17}})):null,this.props.panelUI.allControls?m.a.createElement("div",{className:"button-toolbar",__source:{fileName:cs,lineNumber:420,columnNumber:15}},m.a.createElement("button",{className:"button-toolbar reload",title:Object(d.a)("Reload"),onClick:this.reload,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:h.lc.medium},__source:{fileName:cs,lineNumber:421,columnNumber:17}})):null,m.a.createElement("div",{className:"button-toolbar",__source:{fileName:cs,lineNumber:428,columnNumber:13}},m.a.createElement("button",{className:"button-toolbar home",title:Object(d.a)("Home"),onClick:this.home,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:h.kc.medium},__source:{fileName:cs,lineNumber:429,columnNumber:15}})))),m.a.createElement("section",{className:"webpanel-content",__source:{fileName:cs,lineNumber:439,columnNumber:7}},m.a.createElement("webview",{ref:"webpanelwebview",name:"vivaldi-webpanel",__source:{fileName:cs,lineNumber:440,columnNumber:9}})))}}us(hs,"contextType",R.a);var ps=hs,bs=a(1366),gs=a(715),Ns=a(74),fs=a(37),_s=a(1369),vs=a(188),Es=a(236),Cs=a(840),ws="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\panel.jsx";function Os(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ys="vivaldi/x-panel-item-reg",Ss="vivaldi/x-panel-item-web";function Ts(){return{selectedPanel:me.d.getSelectedPanel(),panelWidth:me.d.getPanelWidth(),panelButtonsVisible:me.d.getPanelButtonsVisible(),panelContentVisible:me.d.getPanelContentVisible(),focusContent:me.d.getFocusContent(),isMailWindow:me.d.getIsMailWindow(),regPanels:me.d.getRegPanels(),webPanels:me.d.getWebPanels(),regPanelOrder:me.d.getRegPanelOrder(),webPanelOrder:me.d.getWebPanelOrder()}}function ks(e,t){const a=e.faviconUrl?e.faviconUrl:e.url;return{id:e.id,title:e.title,faviconUrl:a,faviconUrlValid:!1!==e.faviconUrlValid,hasBeenActive:t}}function As(){const e=Ts(),t=Is(e),a=[];return e.webPanels.forEach(n=>{const i=n.id===e.selectedPanel&&!t;a.push(ks(n,i))}),e.webPanelData=a,e}function Is(e){const t=(e.panelToggleVisible?me.c:0)+(e.panelButtonsVisible?me.b:0);return e.panelWidth<=t}const Ds=[V.kKeyboardTabToAll,V.kPanelsAsOverlayAutoClose,V.kPanelsAsOverlayEnabled,V.kPanelsLazyLoad,V.kPanelsWindowShowUnread,V.kTabsCounterDetection,V.kTabsBarPosition,V.kThemeUseAnimation,V.kPanelsWebRemovedItems,V.kPanelsWebToolbar];class Ms extends m.a.PureComponent{constructor(...e){super(...e),Os(this,"state",{remainingTimers:new Map,isResizing:!1,chatItems:0,downloadItems:0,downloadProgress:0,dropId:"",dropPosition:"",panelToggleVisible:B.a.getVisibleUI(this.context.vivaldiWindowId).panelToggle,unreadPages:0,webPanelData:[],minimized:me.d.getPanelButtonsVisible()&&!me.d.getPanelContentVisible()?"buttons":"auto",...As()}),Os(this,"alarmIntervalId",null),Os(this,"alarms",[]),Os(this,"blockNextBlur",!1),Os(this,"delayTimeout",-1),Os(this,"dndTimerId",-1),Os(this,"dropMode",{support:!1,copy:!1}),Os(this,"panelResource",{bookmarks:{title:Object(d.a)("Bookmarks"),panel:Ni.a,available:!B.a.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://bookmarks",icon:h.C,iconFilled:h.E,...Object(_e.a)("Bookmarks")},mail:{title:Object(d.a)("Mail (beta)"),panel:es.a,available:()=>!B.a.isGuestSession(this.context.vivaldiWindowId)&&!j.a.get(V.kMailIsTurnedOff),url:"",icon:h.Hb,iconFilled:h.Lb,...Object(_e.a)("Mail (beta)")},feeds:{title:Object(d.a)("Feeds (beta)"),panel:es.a,available:()=>!B.a.isGuestSession(this.context.vivaldiWindowId)&&!j.a.get(V.kMailIsTurnedOff),url:"",icon:h.Rc,iconFilled:h.Tc,...Object(_e.a)("Feeds (beta)")},contacts:{title:Object(d.a)("Contacts (beta)"),panel:Ui.a,available:()=>!B.a.isGuestSession(this.context.vivaldiWindowId)&&!j.a.get(V.kMailIsTurnedOff),url:"",icon:h.Bc,iconFilled:h.Cc,...Object(_e.a)("Contacts (beta)")},downloads:{title:Object(d.a)("Downloads"),panel:Hi.a,available:!0,url:"",icon:h.fb,iconFilled:h.gb,...Object(_e.a)("Downloads")},notes:{title:Object(d.a)("Notes"),panel:as.a,available:!B.a.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://notes",icon:h.qc,iconFilled:h.sc,...Object(_e.a)("Notes")},history:{title:Object(d.a)("History"),panel:Ji,available:!B.a.isGuestSession(this.context.vivaldiWindowId),url:"vivaldi://history",icon:h.yb,iconFilled:h.zb,...Object(_e.a)("History")},tabs:{title:Object(d.a)("title","Window"),panel:bs.a,available:!0,url:"",icon:h.be,iconFilled:h.ce,...Object(_e.a)("title","Window")},calendar:{title:Object(d.a)("Calendar (beta)"),panel:Mi,available:()=>!B.a.isGuestSession(this.context.vivaldiWindowId)&&!j.a.get(V.kMailIsTurnedOff),url:"vivaldi://calendar",icon:h.H,iconFilled:h.J,...Object(_e.a)("Calendar (beta)")},chat:{title:Object(d.a)("Chat"),panel:Bi,available:!B.a.isGuestSession(this.context.vivaldiWindowId),url:"",icon:h.Q,iconFilled:h.R,...Object(_e.a)("Chat")}}),Os(this,"_onStoreChange",()=>{let e=Ts();const t=e.webPanels.length===this.state.webPanelData.length&&this.state.selectedPanel===e.selectedPanel&&Is(this.state)===Is(e)?void 0:e.selectedPanel;this.setupWebPanelData(e.webPanels,t),e.panelWidth<=me.c&&!e.panelContentVisible?e={...e,minimized:"auto"}:e.panelWidth<=me.b+me.c&&!e.panelContentVisible&&(e={...e,minimized:"buttons"}),this.setState(e)}),Os(this,"_onPageStoreChange",()=>{this.setState({unreadPages:c.c.getUnreadCount(this.context.vivaldiWindowId)})}),Os(this,"_onMessageReceived",(e,t,a)=>{if(e&&t.id===I.a.runtime.id&&e.action===ls.d){const t=this.getWebPanelDataByUrl(e.panelUrl);t&&(this.setWebPanelValue(t.id,"title",e.title),this.refs[t.id].setTitle(e.title))}}),Os(this,"_onDownloadStoreChange",()=>{this.setState({downloadItems:Vi.a.getTotalNumberOfDownloads(),downloadProgress:Vi.a.getTotalProgress()})}),Os(this,"_onChatReceived",()=>{const e=Pi.a.getUnreadCount();this.setState({chatItems:e})}),Os(this,"_onWindowStoreChanged",()=>{const e=B.a.getVisibleUI(this.context.vivaldiWindowId).panelToggle;this.state.panelToggleVisible!==e&&this.setState({panelToggleVisible:e,panelWidth:me.d.getPanelWidth()})}),Os(this,"_alarmsChanged",e=>{const t=new Map(null==e?void 0:e.filter(e=>"panel"===(null==e?void 0:e.from)).map(e=>{if((null==e?void 0:e.id)&&(null==e?void 0:e.remainingTime))return[e.id,e.remainingTime]}).filter(Boolean));t&&this.setState({remainingTimers:t})}),Os(this,"onCommandSpy",()=>{Object(mi.a)(si.a.findDOMNode(this))||this.moveFocus("-1","current",!0)}),Os(this,"setSelected",e=>{ns.a.toggleContent(e)}),Os(this,"isWebPanelSelected",()=>this.isWebPanel(this.state.selectedPanel)),Os(this,"isWebPanel",e=>e&&me.d.getIsWebPanel(e)),Os(this,"handleDoubleClick",()=>{this.props.prefValues[V.kPanelsAsOverlayEnabled]&&this.props.prefValues[V.kPanelsAsOverlayAutoClose]||this.handlePanelSwitch()}),Os(this,"getPanelUrl",e=>{let t="";if(this.isWebPanel(e))t=A.a.getUrlById(e);else if("format"!==e){t=this.panelResource[e].url}return t}),Os(this,"openInTab",(e,t,a)=>{const n=this.getPanelUrl(e);n&&q.a.openURL(n,{inCurrent:t,inBackground:a})}),Os(this,"openInWindow",(e,t)=>{const a=this.getPanelUrl(e);a&&q.a.openURL(a,{inNewWindow:!0,incognito:t})}),Os(this,"copyUrl",e=>{const t=this.getPanelUrl(e);t&&ne.a.copyUrlToClipboard(t)}),Os(this,"setMobileMode",(e,t)=>{this.isWebPanel(e)&&A.a.setMobileMode(e,t)}),Os(this,"getIsMobileMode",e=>{if(this.isWebPanel(e)){const t=this.state.webPanels;for(let a=0;a<t.length;a++)if(t[a].id===e)return Boolean(t[a].mobileMode)}return!1}),Os(this,"handleClickOutside",()=>{if(!this.state.panelContentVisible)return;this.autoClosePanel(0);const e=this.refs.focusContainer,{document:t}=this.context;e instanceof Element&&e.contains(t.activeElement)&&ns.a.removeFocus()}),Os(this,"onSlidebarPosition",Object(Es.default)((e,t)=>{const a=si.a.findDOMNode(this.refs.panelsContainer);if(!(a instanceof Element))return;const n=a.getBoundingClientRect();let i;switch(this.props.position){case"left":i=Math.round(e-n.left);break;case"right":i=Math.round(n.right-e);break;default:throw new Error("Unknown tabbar position")}this.setState({panelWidth:this.limitPanelWidth(i)})},64)),Os(this,"limitPanelWidth",e=>{const t=me.a,a=.618*this.context.innerWidth;return Math.min(Math.max(e,t),a)||t}),Os(this,"handlePanelSwitch",()=>{ns.a.togglePanel()}),Os(this,"autoClosePanel",(e=600)=>{this.props.prefValues[V.kPanelsAsOverlayEnabled]&&this.props.prefValues[V.kPanelsAsOverlayAutoClose]&&this.state.selectedPanel&&(this.cancelTimeout(),this.delayTimeout=setTimeout(()=>{this.state.panelContentVisible&&("buttons"===this.state.minimized?ns.a.toggleContent(this.state.selectedPanel):ns.a.togglePanel())},e))}),Os(this,"cancelTimeout",()=>{this.delayTimeout>0&&(clearTimeout(this.delayTimeout),this.delayTimeout=0)}),Os(this,"onDialogOpen",()=>{this.props.prefValues[V.kPanelsAsOverlayEnabled]&&this.props.prefValues[V.kPanelsAsOverlayAutoClose]&&this.state.panelContentVisible&&(this.blockNextBlur=!0)}),Os(this,"handleBlur",e=>{this.blockNextBlur||e.target instanceof Element&&e.target.classList.contains("home")?(this.blockNextBlur=!1,this.cancelTimeout()):this.autoClosePanel()}),Os(this,"showPanelSettings",()=>{ce.a.showSettings()}),Os(this,"getWebPanelDataById",e=>this.state.webPanelData.find(t=>t.id===e)),Os(this,"getWebPanelDataByUrl",e=>this.state.webPanelData.find(t=>t.activeUrl===e)),Os(this,"setupWebPanelData",(e,t)=>{if(this.state.webPanelData.length!==e.length||void 0!==t){const a=[];e.forEach(e=>{const n=this.getWebPanelDataById(e.id);if(n)!0!==n.hasBeenActive&&e.id===t&&(n.hasBeenActive=!0),a.push(n);else{const n=e.id===t;a.push(ks(e,n))}}),this.setState({webPanelData:a})}}),Os(this,"isPanelOpen",e=>this.state.panelContentVisible&&this.state.selectedPanel===e),Os(this,"isPanelAvailable",e=>{let t=this.state.regPanels;for(let a=0;a<t.length;a++)if(t[a].id===e)return!1!==t[a].available;t=this.state.webPanels;for(let a=0;a<t.length;a++)if(t[a].id===e)return!1!==t[a].available;return!1}),Os(this,"setWebPanelValue",(e,t,a)=>{this.setupWebPanelData(this.state.webPanels,void 0);let n=-1;for(let i=0;i<this.state.webPanelData.length;i++){const s=this.state.webPanelData[i];if(s.id===e){"title"===t&&s.title!==a?n=i:"faviconUrl"!==t||s.faviconUrl===a&&!0===s.faviconUrlValid?"activeUrl"===t&&s.activeUrl!==a&&(n=i):n=i;break}}if(-1!==n){const i=[];for(let e=0;e<this.state.webPanelData.length;e++){const s=this.state.webPanelData[e];e===n&&("title"===t?s.title=a:"faviconUrl"===t?(s.faviconUrl=a,s.faviconUrlValid=!0):"activeUrl"===t&&(s.activeUrl=a)),i.push(s)}this.setState({webPanelData:i}),"title"===t?A.a.setTitle(e,a):"faviconUrl"===t?A.a.setFaviconUrl(e,a):"activeUrl"===t&&A.a.setActiveUrl(e,a)}}),Os(this,"_getPanelInstanceById",e=>{const t="panel-"+e;return this.refs[t]}),Os(this,"clearDndTimer",()=>{-1!==this.dndTimerId&&(clearTimeout(this.dndTimerId),this.dndTimerId=-1)}),Os(this,"onDragEnterBar",e=>{if(e.preventDefault(),e.stopPropagation(),B.a.isGuestSession(this.context.vivaldiWindowId))this.dropMode={support:!1,copy:!1};else{const t={};t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===ys||e===Ss),t.copy=t.support&&!e.dataTransfer.types.some(e=>e===Ss)&&!e.dataTransfer.types.some(e=>e===ys)&&!e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e),this.dropMode=t}}),Os(this,"onDragOverBar",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?(this.clearDndTimer(),this.dropMode.copy||e.dataTransfer.types.some(e=>e===Ss)?this.state.webPanelOrder.length>0&&this.setState(e=>({dropId:e.webPanelOrder[e.webPanelOrder.length-1],dropPosition:"below"})):e.dataTransfer.types.some(e=>e===ys)&&this.state.regPanelOrder.length>0&&0===this.state.webPanelOrder.length&&this.setState(e=>({dropId:e.regPanelOrder[e.regPanelOrder.length-1],dropPosition:"below"})),e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move"):e.dataTransfer.dropEffect="none"}),Os(this,"onDropBar",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=e.dataTransfer.getData(Ss);t?ns.a.move(t,this.state.dropId,this.state.dropPosition):i.a.getUrlsFromEventPromise(e,!0).then(e=>{e.forEach(e=>{A.a.addByUrl(e.url)})})}this.setState({dropId:"",dropPosition:""})}),Os(this,"onDragStartButton",(e,t)=>{if(t.dataTransfer.effectAllowed="all",this.isWebPanel(e)){t.dataTransfer.setData(Ss,[e]);const a=A.a.getUrlById(e);a&&(t.dataTransfer.setData("text/uri-list",[a]),t.dataTransfer.setData("text/plain",[a]))}else t.dataTransfer.setData(ys,[e])}),Os(this,"onDragEnterButton",(e,t)=>{t.preventDefault(),t.stopPropagation();let a={};if(this.isWebPanel(e))a.support=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===Ss),a.copy=a.support&&!t.dataTransfer.types.some(e=>e===Ss||"vivaldi/x-tab-entries"===e);else{const n=this._getPanelInstanceById(e);n&&"function"==typeof n.onDragEnterPanelButton&&(a=n.onDragEnterPanelButton(t)),a.support||(a.support=t.dataTransfer.types.some(e=>e===ys))}this.dropMode=a}),Os(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout(()=>{this.dndTimerId=-1,this.setState({dropId:"",dropPosition:""})},fs.g)}),Os(this,"onDragOverButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),!1===this.dropMode.support)t.dataTransfer.dropEffect="none",this.setState({dropId:"",dropPosition:""});else{if(this.dropMode.onButton)return void(t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move");this.clearDndTimer(),t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move";const a=t.currentTarget;if(!(a instanceof Element))return;const n=a.getBoundingClientRect(),i=me.b,s=(t.clientY-n.top)/i;let r="";!1?r=s<=.25?"above":s>.75?"below":"on":s<=.5?r="above":s>.5&&(r="below"),this.state.dropId===e&&this.state.dropPosition===r||this.setState({dropId:e,dropPosition:r})}}),Os(this,"onDropButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropMode.support)if(this.dropMode.onButton){const a=this._getPanelInstanceById(e);a&&"function"==typeof a.onDropPanelButton&&a.onDropPanelButton(t)}else{const a=this.isWebPanel(e)?t.dataTransfer.getData(Ss):t.dataTransfer.getData(ys);if(a)ns.a.move(a,this.state.dropId,this.state.dropPosition);else{const a=this.state.dropPosition;i.a.getUrlsFromEventPromise(t,!0).then(t=>{if("on"===a)t.length>0&&A.a.setUrl(e,t[0].url);else{let n=this.state.webPanelOrder.findIndex(t=>t===e);-1!==n&&"below"===a&&n++,A.a.addByUrls(t.map(e=>e.url),n)}})}}this.setState({dropId:"",dropPosition:""})}),Os(this,"onDragButtonEnd",e=>{this.setState({dropId:"",dropPosition:""})}),Os(this,"getRemovedWebPanelsMenuItems",()=>{const e=this.props.prefValues[V.kPanelsWebRemovedItems].map((e,t)=>({mnemonic:!1,handler:()=>A.a.recoverWebPanel(t),...ue.a.makeLabelPair(e.title||e.url||Object(d.a)("Unknown Web Panel"))}));return e.length&&(e.push(ue.a.separatorItem),e.push({handler:A.a.emptyTrash,...Object(_e.a)("panel","Clear All")})),e}),Os(this,"getPanelSelectorMenu",e=>{const t=[];if("reg"===e&&this.state.regPanelOrder.forEach(e=>{if(me.d.canRenderInWindow(e)&&me.d.shouldShowPanel(e)){const a=this.panelResource[e];("function"==typeof a.available?a.available():a.available)&&t.push({handler:this.handlePanelSelector.bind(this,e),type:"checkbox",checked:this.isPanelAvailable(e),label:a.label,labelEnglish:a.labelEnglish})}}),"web"===e){const e=this.state.webPanels;e&&e.length>0&&this.state.webPanelOrder.forEach((a,n)=>{const i=e.filter(e=>e.id===a)[0];t.push({...ue.a.makeNumberMnemonic(i.title||i.url||Object(d.a)("Unknown Web Panel"),n),handler:this.handlePanelSelector.bind(this,i.id),type:"checkbox",checked:this.isPanelAvailable(i.id)})})}return t}),Os(this,"getWebPanelContentMenu",()=>{const e=this.props.prefValues[V.kPanelsWebToolbar];return[{handler:A.a.setUIContent.bind(A.a,{showToolbar:!0}),visible:!(!0===e.showToolbar),...Object(_e.a)("Show")},{handler:A.a.setUIContent.bind(A.a,{showToolbar:!1}),visible:Boolean(!0===e.showToolbar),...Object(_e.a)("other","Hide")},{handler:A.a.setUIContent.bind(A.a,{allControls:!e.allControls,showToolbar:e.showToolbar||!e.allControls}),type:"checkbox",checked:e.allControls,visible:Boolean(!0===e.showToolbar),...Object(_e.a)("Display All Controls")}]}),Os(this,"handlePanelSelector",e=>{this.isPanelAvailable(e)?(this.isPanelOpen(e)&&(me.d.getAvailablePanelCount()>1?me.d.getLastAvailablePanel()===e?ns.a.showNextPanel("previous"):ns.a.showNextPanel("next"):ns.a.setContentVisible(!1)),ns.a.setAvailable(e,!1)):(ns.a.setAvailable(e,!0),ns.a.toggleContent(e))}),Os(this,"handlePanelButtonDown",e=>{Object(vs.d)(e)||e.preventDefault()}),Os(this,"handlePanelButtonUp",(e,t)=>{t.button!==Ns.a.kCenter||0!==t.buttons||Object(vs.d)(t)||this.handlePanelButtonClick(e,t)}),Os(this,"handlePanelButtonClick",(e,t)=>{if(t.button===Ns.a.kCenter||t.button===Ns.a.kLeft&&Object(vs.a)(t))if(this.isWebPanel(e))A.a.openInTab(e,!1,!0);else switch(e){case"bookmarks":ce.a.showBookmarks();break;case"history":ce.a.showHistory();break;case"notes":ce.a.showNotes();break;case"calendar":ce.a.showCalendar();break;case"mail":this.setSelected(e),ce.a.showMail()}else Object(vs.d)(t)||this.setSelected(e);ce.a.setPaneFocus(!1)}),Os(this,"handleSliderDown",()=>{this.setState({isResizing:!0})}),Os(this,"handleSliderUp",()=>{this.setState({isResizing:!1}),ns.a.setWidth(this.state.selectedPanel,this.state.panelWidth)}),Os(this,"handlePanelButtonKeyDown",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"left",!1);break;case"ArrowDown":this.moveFocus(e,"right",!1);break;case"Escape":this.leaveBar();break;default:return}t.preventDefault(),t.stopPropagation()}),Os(this,"moveFocus",(e,t,a)=>{if(!0===a||Object(mi.a)(si.a.findDOMNode(this))){const{document:a}=this.context,n=Array.from(a.querySelectorAll("button.panelbtn")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:n.indexOf(e);if(-1===t)return;e=n[t]}else if("left"===t||"right"===t){if(1===n.length)return;let a=n.indexOf(e);a="right"===t?a+1>=n.length?0:a+1:a<=0?n.length-1:a-1,e=n[a]}const i=a.querySelector(`button.panelbtn[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&i.focus()}}),Os(this,"leaveBar",()=>{ce.a.setPaneFocus(!1),Z.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),Os(this,"getPanelButtonTitleById",(e,t)=>"downloads"===e&&this.state.downloadItems>0?Object(d.a)("Downloads")+" "+Object(d.a)("($1 active transfer)","($1 active transfers)",[this.state.downloadItems]):t),Os(this,"getPanelButtonClassById",(e,t,a)=>{const{downloadItems:n,dropId:i,dropPosition:s,panelContentVisible:r,selectedPanel:o}=this.state,l=e===i;return Gt()({panelbtn:!0,uifocusstop:a,webviewbtn:t,[e.toString()]:!t,loading:!t&&"downloads"===e&&n>0,active:o===e&&r,dragoverAbove:l&&"above"===s,dragoverBelow:l&&"below"===s,dragoverInside:l&&"on"===s})}),Os(this,"getPanelButtonTabIndexById",e=>this.state.selectedPanel===e?this.props.prefValues[V.kKeyboardTabToAll]:-1),Os(this,"getButtonContextMenuItemsPromise",(e,t)=>{const a=ie.a.getOptionFunction(e),n=this.isWebPanel(t);return ie.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTAINER_PERIODIC_RELOAD":case"CONTEXT_CONTAINER_PERIODIC_TIMER":return{...a(e,{}),items:de.a.getMenu(t,"panel"),visible:n};case"CONTEXT_MENU_OPEN":return{visible:this.getPanelUrl(t).length>0,...a(e,{})};case"CONTEXT_OPEN_IN_TAB":case"CONTEXT_OPEN_IN_NEW_TAB":return{handler:()=>this.openInTab(t,"CONTEXT_OPEN_IN_TAB"===e.action,!1),visible:this.getPanelUrl(t).length>0,...a(e,{})};case"CONTEXT_OPEN_IN_NEW_BACKGROUND_TAB":return{handler:()=>this.openInTab(t,!1,!0),visible:this.getPanelUrl(t).length>0&&!j.a.get(V.kTabsOpenNewInBackground),...a(e,{})};case"CONTEXT_OPEN_IN_NEW_WINDOW":case"CONTEXT_OPEN_IN_PRIVATE_WINDOW":{const n=B.a.isGuestSession(),i="CONTEXT_OPEN_IN_NEW_WINDOW"===e.action;return{handler:this.openInWindow.bind(this,t,!i),visible:this.getPanelUrl(t).length>0&&!(i&&n),...a(e,{})}}case"CONTEXT_COPY_ADDRESS":return{handler:this.copyUrl.bind(this,t),visible:this.getPanelUrl(t).length>0,...a(e,{})};case"CONTEXT_DESKTOP_VERSION":return{handler:this.setMobileMode.bind(this,t,!1),visible:n&&this.getIsMobileMode(t),...a(e,{})};case"CONTEXT_MOBILE_VERSION":return{handler:this.setMobileMode.bind(this,t,!0),visible:n&&!this.getIsMobileMode(t),...a(e,{})};case"CONTEXT_SEPARATE_WIDTH":return{handler:ns.a.setPanelResizable.bind(ns.a,t,!me.d.getResizableByPanel(t)),checked:!0===me.d.getResizableByPanel(t),...a(e,{})};case"CONTEXT_CONTAINER_TOOLBAR":return{items:this.getWebPanelContentMenu(),visible:n,...a(e,{})};case"CONTEXT_REMOVE_WEB_PANEL":return{handler:A.a.removeById.bind(this,t),visible:n,...a(e,{})};case"CONTEXT_CONTAINER_REG_PANELS":return{items:this.getPanelSelectorMenu("reg"),...a(e,{})};case"CONTEXT_CONTAINER_WEB_PANELS":return{items:this.getPanelSelectorMenu("web"),...a(e,{})};case"CONTEXT_CONTAINER_REMOVED_PANELS":{const t=this.getRemovedWebPanelsMenuItems();return{items:t,visible:t.length>0,...a(e,{})}}default:return{...a(e,{})}}})}),Os(this,"onButtonContextMenu",(e,t)=>{t.persist(),t.preventDefault(),t.stopPropagation(),this.getButtonContextMenuItemsPromise("panelbaritem",e).then(e=>{Object(fe.a)(this.context.vivaldiWindowId,e)(t)})}),Os(this,"onBarContextMenu",(e,t)=>{const a=ie.a.getOptionFunction(e);t.persist(),t.preventDefault(),t.stopPropagation(),ie.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_CONTAINER_REG_PANELS":return{items:this.getPanelSelectorMenu("reg"),...a(e,{})};case"CONTEXT_CONTAINER_WEB_PANELS":return{items:this.getPanelSelectorMenu("web"),...a(e,{})};case"CONTEXT_CONTAINER_REMOVED_PANELS":{const t=this.getRemovedWebPanelsMenuItems();return{items:t,visible:t.length>0,...a(e,{})}}default:return{...a(e,{})}}}).then(e=>{Object(fe.a)(this.context.vivaldiWindowId,e)(t)})}),Os(this,"renderPanelButtonById",e=>{if(this.isPanelAvailable(e)&&me.d.canRenderInWindow(e)&&me.d.shouldShowPanel(e)&&"format"!==e){const t=this.panelResource[e],a=this.state.selectedPanel===e&&this.state.panelButtonsVisible,n=this.state.selectedPanel===e&&this.state.panelContentVisible?t.iconFilled.small:t.icon.small;return m.a.createElement("button",{key:"button_"+e,"data-id":e,title:this.getPanelButtonTitleById(e,t.title),className:this.getPanelButtonClassById(e,!1,a),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:this.onButtonContextMenu.bind(this,e),onMouseDown:this.handlePanelButtonDown,onMouseUp:this.handlePanelButtonUp.bind(this,e),onKeyDown:this.handlePanelButtonKeyDown.bind(this,e),onClick:this.handlePanelButtonClick.bind(this,e),onDrop:this.onDropButton.bind(this,e),onDragEnter:this.onDragEnterButton.bind(this,e),onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,e),onDragStart:this.onDragStartButton.bind(this,e),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:ws,lineNumber:1448,columnNumber:9}},m.a.createElement("span",{dangerouslySetInnerHTML:{__html:n},__source:{fileName:ws,lineNumber:1467,columnNumber:11}}),this.renderPanelButtonOverlayById(e))}return null}),Os(this,"renderPanelButtonOverlayById",e=>{if("mail"===e)return m.a.createElement(ts.a,{__source:{fileName:ws,lineNumber:1477,columnNumber:14}});if("downloads"===e)return m.a.createElement("div",{className:"progress",__source:{fileName:ws,lineNumber:1480,columnNumber:9}},m.a.createElement("div",{className:"loaded",style:{width:`${100*this.state.downloadProgress}%`},__source:{fileName:ws,lineNumber:1481,columnNumber:11}}));if("tabs"===e){if(this.props.prefValues[V.kPanelsWindowShowUnread]&&this.state.unreadPages>0)return m.a.createElement("span",{className:"button-badge",__source:{fileName:ws,lineNumber:1490,columnNumber:11}},this.state.unreadPages)}else if("chat"===e&&this.state.chatItems>0)return m.a.createElement("span",{className:"button-badge",__source:{fileName:ws,lineNumber:1498,columnNumber:11}},this.state.chatItems);return null}),Os(this,"renderAllPanelButtons",()=>[...this.state.regPanelOrder.map(this.renderPanelButtonById),...this.state.webPanelOrder.map(this.renderWebPanelButtonById)]),Os(this,"renderAllPanels",()=>{const e=[];this.state.regPanelOrder.forEach(t=>{if(this.isPanelAvailable(t)&&me.d.canRenderInWindow(t)){const a=this.panelResource[t];a.panel&&e.push(m.a.createElement(ya.a,{key:"panel-"+t,__source:{fileName:ws,lineNumber:1522,columnNumber:13}},m.a.createElement(a.panel,{ref:"panel-"+t,keyAccess:this.props.prefValues[V.kKeyboardTabToAll],title:a.title,panelId:t,open:this.isPanelOpen(t),onOpenDialog:this.onDialogOpen,__source:{fileName:ws,lineNumber:1523,columnNumber:15}})))}});const t=this.state.webPanels;if(this.state.webPanelData.length===t.length){const a=[];this.state.webPanelOrder.forEach(e=>{const n=this.getWebPanelDataById(e),{prefValues:i}=this.props;if(!i[V.kPanelsLazyLoad]||(null==n?void 0:n.hasBeenActive)){const n=t.find(t=>t.id===e&&t.available);n&&a.push(this.renderWebPanelById(n.id))}}),e.push(m.a.createElement("div",{key:"webpanelwrapper",className:this.isWebPanelSelected()?"webpanel-stack":"webpanel-stack hidden",__source:{fileName:ws,lineNumber:1557,columnNumber:9}},a))}return e}),Os(this,"renderWebPanelById",e=>{const t=this.state.webPanels.filter(t=>t.id===e)[0],a=this.state.panelContentVisible&&this.state.selectedPanel===e;return m.a.createElement(ps,{key:e,ref:e,isVisible:a,focusContent:this.state.focusContent&&a,panelUI:this.props.prefValues[V.kPanelsWebToolbar],setWebPanelValue:this.setWebPanelValue,menuPromise:this.getButtonContextMenuItemsPromise.bind(this,"panelbaritem"),webPanel:t,__source:{fileName:ws,lineNumber:1575,columnNumber:7}})}),Os(this,"renderWebPanelButtonById",e=>{if(!this.isPanelAvailable(e))return null;const t=this.state.webPanels.find(t=>t.id===e),a=this.getWebPanelDataById(e),n=(null==a?void 0:a.title)?`${a.title}\n${t.url}`:t.url,i=(null==a?void 0:a.faviconUrlValid)?a.faviconUrl:"",s=Object(gs.a)(n,t.activeUrl,9),r=this.state.selectedPanel===e&&this.state.panelButtonsVisible,o=this.state.remainingTimers.get(e);return m.a.createElement("button",{key:e,"data-id":e,title:n,className:this.getPanelButtonClassById(e,!0,r),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:t=>this.onButtonContextMenu(e,t),onMouseUp:t=>this.handlePanelButtonUp(e,t),onMouseDown:this.handlePanelButtonDown,onClick:t=>this.handlePanelButtonClick(e,t),onKeyDown:t=>this.handlePanelButtonKeyDown(e,t),onDrop:t=>this.onDropButton(e,t),onDragEnter:t=>this.onDragEnterButton(e,t),onDragLeave:this.onDragLeave,onDragOver:t=>this.onDragOverButton(e,t),onDragStart:t=>this.onDragStartButton(e,t),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:ws,lineNumber:1615,columnNumber:7}},m.a.createElement("span",{__source:{fileName:ws,lineNumber:1633,columnNumber:9}},m.a.createElement(wn.a,{url:i,__source:{fileName:ws,lineNumber:1634,columnNumber:11}})),this.props.prefValues[V.kTabsCounterDetection]&&s&&m.a.createElement("span",{className:"button-badge",__source:{fileName:ws,lineNumber:1637,columnNumber:11}},s),o&&m.a.createElement(Cs.a,{progress:o,__source:{fileName:ws,lineNumber:1641,columnNumber:27}}))})}componentDidMount(){Vi.a.addChangeListener(this._onDownloadStoreChange),me.d.addChangeListener(this._onStoreChange),c.c.addChangeListener(this._onPageStoreChange),this.chatStoreToken=Pi.a.addListener(this._onChatReceived),this.windowStoreToken=B.a.addListener(this._onWindowStoreChanged),I.a.runtime.onMessage.addListener(this._onMessageReceived),Fi.a.addListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy),ss.a.addChangeListener(this._alarmsChanged)}componentWillUnmount(){Vi.a.removeChangeListener(this._onDownloadStoreChange),me.d.removeChangeListener(this._onStoreChange),c.c.removeChangeListener(this._onPageStoreChange),this.chatStoreToken.remove(),this.windowStoreToken.remove(),ss.a.removeChangeListener(this._alarmsChanged),I.a.runtime.onMessage.removeListener(this._onMessageReceived),Fi.a.removeListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy),this.clearDndTimer()}render(){const{panelButtonsVisible:e,panelContentVisible:t,panelWidth:a,isResizing:n}=this.state,i=this.props.prefValues,{position:s}=this.props,r=B.a.isGuestSession(this.context.vivaldiWindowId),o=(this.state.panelToggleVisible?me.c:0)+(e?me.b:0),l=Is(this.state),c=i[V.kPanelsAsOverlayEnabled],u=Gt()({[s]:!0,button:this.state.panelToggleVisible,switcher:a<=me.c,icons:e&&l,overlay:c,minimized:c&&"buttons"===this.state.minimized,resizing:n}),p="right"===s&&e||"left"===s&&!e?"0 0 0 8 4 4":"4 0 4 8 0 4",b=t?128:64,g=a-o,N=c&&i[V.kPanelsAsOverlayAutoClose]&&t,f=n?100:"left"===s?2:3,_="left"===s?a-f:-(a-o+f),v=Gt()({preferences:!0,panelbtn:!0}),E=this.renderAllPanelButtons().filter(e=>null!==e);return m.a.createElement(_s.VelocityComponent,{animation:{width:c?a-g:a},duration:i[V.kThemeUseAnimation]&&!n?b:0,begin:e=>e[0].style.removeProperty("display"),__source:{fileName:ws,lineNumber:1699,columnNumber:7}},m.a.createElement(Ct.a,{focusName:"focus_panel",id:"panels-container",ref:"panelsContainer",className:u,__source:{fileName:ws,lineNumber:1705,columnNumber:9}},m.a.createElement("div",{id:"panels",ref:"focusContainer",onBlur:N?this.handleBlur:null,onFocus:N?this.cancelTimeout:null,__source:{fileName:ws,lineNumber:1711,columnNumber:11}},this.state.panelToggleVisible&&m.a.createElement("div",{id:"panel_switch",title:e?Object(d.a)("Hide Panel"):Object(d.a)("verb","Show Panel"),onClick:this.handlePanelSwitch,__source:{fileName:ws,lineNumber:1716,columnNumber:15}},m.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"4px",height:"8px",viewBox:"0 0 4 8",__source:{fileName:ws,lineNumber:1722,columnNumber:17}},m.a.createElement("polygon",{points:p,__source:{fileName:ws,lineNumber:1728,columnNumber:19}}))),m.a.createElement("div",{id:"switch",onContextMenu:this.onBarContextMenu.bind(this,"panelbar"),onDragEnter:this.onDragEnterBar,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverBar,onDrop:this.onDropBar,__source:{fileName:ws,lineNumber:1732,columnNumber:13}},E,!r&&m.a.createElement(gi,{id:"addwebpanel",webPanels:this.state.webPanels,uiFocus:0===E.length,addNew:A.a.addByUrl,moveFocus:this.moveFocus,leaveBar:this.leaveBar,rejectMimeType:Ss,keyAccess:this.getPanelButtonTabIndexById(),__source:{fileName:ws,lineNumber:1743,columnNumber:17}}),!r&&m.a.createElement("button",{className:v,title:Object(d.a)("Settings"),"data-id":"preferences",tabIndex:i[V.kKeyboardTabToAll],onMouseDown:this.handlePanelButtonDown,onKeyDown:this.handlePanelButtonKeyDown.bind(this,"preferences"),onClick:this.showPanelSettings,__source:{fileName:ws,lineNumber:1754,columnNumber:17}},m.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.vd.small},__source:{fileName:ws,lineNumber:1764,columnNumber:19}}))),this.state.selectedPanel&&m.a.createElement("div",{className:"panel-group",style:c?{width:l?0:a-o,[s]:o}:null,__source:{fileName:ws,lineNumber:1770,columnNumber:15}},m.a.createElement("div",{className:"panel-collapse-guard",style:{minWidth:n?"unset":g,maxWidth:n?"unset":g},__source:{fileName:ws,lineNumber:1776,columnNumber:17}},this.renderAllPanels()))),!l&&m.a.createElement(is.a,{style:c?{left:_}:void 0,onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.handleDoubleClick,offset:1,position:s,__source:{fileName:ws,lineNumber:1787,columnNumber:13}})))}}Os(Ms,"contextType",R.a);var Ps,xs,Ls,js=Object(Le.a)(Object(ui.a)(Ms),Ds),Rs=a(544),Bs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\popupcontents\\PopupContents.jsx";class Fs extends m.a.Component{render(){const e=c.c.getActivePage(this.context.vivaldiWindowId);return e?m.a.createElement("div",{ref:"webpageview",className:"inner",__source:{fileName:Bs,lineNumber:19,columnNumber:7}},m.a.createElement(Rs.a,{key:`page-component-${e.id}`,id:e.id,url:e.url,target:e.target,extData:e.extData,showImageInspector:e.showImageInspector,discarded:e.discarded,processexitstate:e.processexitstate,isVisible:!0,contentWidth:0,contentHeight:0,isActive:e.active,windowId:e.windowId,supportsReaderMode:e.supportsReaderMode,__source:{fileName:Bs,lineNumber:20,columnNumber:9}})):null}}Ps=Fs,xs="contextType",Ls=R.a,xs in Ps?Object.defineProperty(Ps,xs,{value:Ls,enumerable:!0,configurable:!0,writable:!0}):Ps[xs]=Ls;var Us=Fs,Hs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\PopupWindow.jsx";function Vs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ws extends m.a.PureComponent{constructor(e){super(),Vs(this,"onPagestoreChanged",e=>{const t=c.c.unsafeGetActivePage(this.context.vivaldiWindowId);this.setState(this.getPageState(t));const a=Object(rt.d)(t.url,t.title);this.updateWindowTitle(a)}),Vs(this,"onNavigationStoreChanged",e=>{this.setState(e=>{const t=qe.a.getNavigationInfo(e.id);if(t)return{url:t.webviewUrl}})}),Vs(this,"getPageState",e=>({url:e.url,id:e.id,originUrl:e.originUrl,active:e.active,incognito:e.incognito,thumbnailUrl:e.getIn(["extData","thumbnail"]),favIconUrl:e.favIconUrl})),Vs(this,"updateWindowTitle",e=>{this.context.document.title!==e&&(this.context.document.title=e)});const t=c.c.unsafeGetActivePage(e.vivaldiWindowId);this.state=this.getPageState(t)}componentDidMount(){qe.a.addChangeListener(this.onNavigationStoreChanged),c.c.addChangeListener(this.onPagestoreChanged);const e=c.c.unsafeGetActivePage(this.context.vivaldiWindowId),t=Object(rt.d)(e.url,e.title);this.updateWindowTitle(t)}componentWillUnmount(){qe.a.removeChangeListener(this.onNavigationStoreChanged),c.c.removeChangeListener(this.onPagestoreChanged)}render(){return m.a.createElement("div",{id:"main",__source:{fileName:Hs,lineNumber:83,columnNumber:9}},m.a.createElement(It.a,{showNavigationButtons:!1,readonly:!0,url:this.state.url,id:this.state.id,originUrl:this.state.originUrl,active:this.state.active,incognito:this.state.incognito,thumbnailUrl:this.state.thumbnailUrl,favIconUrl:this.state.favIconUrl,__source:{fileName:Hs,lineNumber:84,columnNumber:11}}),m.a.createElement("div",{className:"inner",__source:{fileName:Hs,lineNumber:95,columnNumber:11}},m.a.createElement(Us,{__source:{fileName:Hs,lineNumber:96,columnNumber:13}})))}}Vs(Ws,"contextType",R.a);var zs=Ws,Gs=a(143),Ks=a.n(Gs),Ys=a(99);class $s extends Ks.a{constructor(){super(y.a)}getInitialState(){return[]}reduce(e,t){switch(t.actionType){case"POPUPWINDOW_OPENED":return[...e,t.popupWindow];case"POPUPWINDOW_CLOSED":return Object(Ys.c)(e,e=>{const{componentId:a}=t;e.splice(e.findIndex(e=>e.identifier===a),1)});default:return e}}}var Xs=new $s,Zs="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\RazerChromaInfoDialog.jsx";function Qs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const qs=[V.kRazerChromaHasShownPromotion];class Js extends u.Component{constructor(e){super(e),Qs(this,"onClose",()=>{L.a.set(V.kRazerChromaHasShownPromotion,!0),this.props.onClose()}),Qs(this,"openSettings",()=>{ce.a.showSettings("themes"),this.onClose()})}render(){return u.createElement(l.a,{onRequestClose:je.default,dialogWidth:400,viewMode:"slide",__source:{fileName:Zs,lineNumber:42,columnNumber:7}},u.createElement("header",{className:"dialog-header",__source:{fileName:Zs,lineNumber:47,columnNumber:9}},u.createElement("h1",{className:"dialog-title",__source:{fileName:Zs,lineNumber:48,columnNumber:11}},Object(d.a)("Razer Chroma device detected."))),u.createElement("div",{className:"dialog-content",__source:{fileName:Zs,lineNumber:51,columnNumber:9}},u.createElement("p",{__source:{fileName:Zs,lineNumber:52,columnNumber:11}},Object(d.a)("Vivaldi supports connected Razer Chroma devices. You can enable them with Vivaldi from the Themes section in settings."))),u.createElement("footer",{className:"dialog-footer",__source:{fileName:Zs,lineNumber:57,columnNumber:9}},u.createElement("input",{type:"submit",value:Object(d.a)("Go to Theme Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:Zs,lineNumber:58,columnNumber:11}}),u.createElement("input",{type:"button",value:Object(d.a)("Close"),onClick:this.onClose,__source:{fileName:Zs,lineNumber:63,columnNumber:11}})))}}var er=Object(Le.a)(Js,qs),tr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\saveSessionDialog.jsx";function ar(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nr extends m.a.Component{constructor(...e){super(...e),ar(this,"state",{shown:!0,name:"",invalidInput:!1,errorSaving:!1,saveOnlyCurrentWindow:!1}),ar(this,"_getSaveSelected",()=>!!("selected"===this.props.options.mode&&this.props.options.ids&&this.props.options.ids.length>0)),ar(this,"_close",()=>{this.state.shown&&this.setState(e=>({shown:!1}),()=>this.props.onClose())}),ar(this,"onSaveSession",()=>{const e={saveOnlyWindowId:0};this._getSaveSelected()?(e.saveOnlyWindowId=this.context.vivaldiWindowId,e.ids=this.props.options.ids):!0===this.state.saveOnlyCurrentWindow&&(e.saveOnlyWindowId=this.context.vivaldiWindowId),nt.a.sessionsPrivate.saveOpenTabs(this.state.name,e,e=>{0===e?this.props.onClose():this.setState({errorSaving:!0})})}),ar(this,"isValidName",e=>/^[^\\/:\*\?"<>\|]+$/.test(e)&&!/^\./.test(e)&&!/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i.test(e)),ar(this,"nameChange",e=>{""===e.target.value||this.isValidName(e.target.value)?this.setState({name:e.target.value,invalidInput:!1}):this.setState({invalidInput:!0})}),ar(this,"_toggleSaveOnlyCurrentWindow",()=>{this.setState(e=>({saveOnlyCurrentWindow:!e.saveOnlyCurrentWindow}))})}render(){var e="";!0===this.state.invalidInput?e=Object(d.a)("Invalid character in the session name."):this.state.errorSaving&&(e=Object(d.a)("Error saving the session."));const t=this._getSaveSelected()?Object(d.a)("session","Save Selected Tabs as Session"):Object(d.a)("session","Save Open Tabs as Session");return(m.a.createElement(l.a,{onRequestClose:this._close,__source:{fileName:tr,lineNumber:113,columnNumber:7}},m.a.createElement("div",{className:"save-session",__source:{fileName:tr,lineNumber:114,columnNumber:9}},m.a.createElement("header",{className:"dialog-header",__source:{fileName:tr,lineNumber:115,columnNumber:11}},m.a.createElement("h1",{className:"dialog-title",__source:{fileName:tr,lineNumber:116,columnNumber:13}},t)),m.a.createElement("form",{__source:{fileName:tr,lineNumber:118,columnNumber:11}},m.a.createElement("div",{className:"dialog-content session-dialog",__source:{fileName:tr,lineNumber:119,columnNumber:13}},m.a.createElement("input",{type:"text",ref:"inputName",placeholder:Object(d.a)("Session Name"),onChange:this.nameChange,spellCheck:"false",autoFocus:!0,__source:{fileName:tr,lineNumber:120,columnNumber:15}}),!this._getSaveSelected()&&m.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:tr,lineNumber:129,columnNumber:17}},m.a.createElement("input",{type:"checkbox",checked:this.state.saveOnlyCurrentWindow,onChange:this._toggleSaveOnlyCurrentWindow,__source:{fileName:tr,lineNumber:130,columnNumber:19}}),m.a.createElement("span",{__source:{fileName:tr,lineNumber:133,columnNumber:19}},Object(d.a)("Save Only Tabs In Current Window"))),""!==e&&m.a.createElement("div",{className:"error-validation",__source:{fileName:tr,lineNumber:137,columnNumber:17}},e)),m.a.createElement("footer",{className:"dialog-footer",__source:{fileName:tr,lineNumber:142,columnNumber:13}},m.a.createElement("input",{type:"submit",className:"primary",onClick:this.onSaveSession,value:Object(d.a)("Save"),disabled:!0===this.state.invalidInput||""===this.state.name,__source:{fileName:tr,lineNumber:143,columnNumber:15}}),m.a.createElement("input",{type:"button",onClick:this._close,value:Object(d.a)("Cancel"),__source:{fileName:tr,lineNumber:151,columnNumber:15}}))))))}}ar(nr,"contextType",R.a);var ir=nr,sr=a(813),rr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultBrowserDlg.jsx";class or extends m.a.Component{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handleClick",()=>{this.props.onClose()})}render(){return m.a.createElement(l.a,{onRequestClose:je.default,viewMode:"default-browser",__source:{fileName:rr,lineNumber:18,columnNumber:7}},m.a.createElement(sr.a,{onClose:this.handleClick,__source:{fileName:rr,lineNumber:19,columnNumber:9}}))}}var lr=or,cr=a(716),ur=a(788),mr=a(347),dr=a(155),hr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\SyncWarningDialog.jsx";function pr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class br extends u.Component{constructor(...e){super(...e),pr(this,"state",{visible:!1}),pr(this,"onSharedDataChanged",(e,t)=>{"syncErrorReport"===e&&"reported"===t&&this.setState({visible:!1})}),pr(this,"onStoreChange",()=>{const e=Object(dr.b)(dr.a.getState()),t=mr.a.getState().engineData;(t.isFirstSetupComplete||"disable_sync_on_client"===t.protocolErrorClientAction)&&("credentialsMissing"===e||"loginFailed"===e||t.needsDecryptionPassword||"failed"===t.engineState||"disable_sync_on_client"===t.protocolErrorClientAction?nt.a.utilities.getSharedData({key:"syncErrorReport",value:"canReport"},e=>{"canReport"===e&&this.setState({visible:!0})}):"loggedIn"!==e||"started"!==t.engineState||t.needsDecryptionPassword||nt.a.utilities.setSharedData({key:"syncErrorReport",value:"canReport"}))}),pr(this,"onClose",()=>{nt.a.utilities.setSharedData({key:"syncErrorReport",value:"reported"})}),pr(this,"openSettings",()=>{ce.a.showSettings("sync"),this.onClose()})}componentDidMount(){this.syncStoreToken=mr.a.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=dr.a.addListener(this.onStoreChange),nt.a.utilities.onSharedDataUpdated.addListener(this.onSharedDataChanged),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return this.state.visible?u.createElement(l.a,{onRequestClose:this.onClose,dialogWidth:400,viewMode:"slide",__source:{fileName:hr,lineNumber:88,columnNumber:7}},u.createElement("header",{className:"dialog-header",__source:{fileName:hr,lineNumber:93,columnNumber:9}},u.createElement("h1",{className:"dialog-title",__source:{fileName:hr,lineNumber:94,columnNumber:11}},Object(d.a)("Sync Disabled"))),u.createElement("div",{className:"dialog-content",__source:{fileName:hr,lineNumber:97,columnNumber:9}},u.createElement("p",{__source:{fileName:hr,lineNumber:98,columnNumber:11}},Object(d.a)("An issue caused Vivaldi Sync to stop working. You can find more details in the Sync Settings."))),u.createElement("footer",{className:"dialog-footer",__source:{fileName:hr,lineNumber:103,columnNumber:9}},u.createElement("input",{type:"submit",value:Object(d.a)("Go to Sync Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:hr,lineNumber:104,columnNumber:11}}),u.createElement("input",{type:"button",value:Object(d.a)("Close"),onClick:this.onClose,__source:{fileName:hr,lineNumber:109,columnNumber:11}}))):null}}var gr=br,Nr=a(723),fr=a(405),_r=a(261);function vr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Er=[V.kThemeScheduleEnabled,V.kThemeScheduleTimeline];class Cr extends m.a.Component{constructor(e){if(super(e),vr(this,"_scheduledChange",void 0),vr(this,"onResume",()=>{switch(this.setTheme(),this.props.prefValues[V.kThemeScheduleEnabled]){case"system":this.clearSchedule(),re.e.setSystemThemeSchedule();break;case"timeline":re.e.revokeSystemThemeSchedule(),this.scheduleThemeChange();break;case"off":default:this.clearSchedule(),re.e.revokeSystemThemeSchedule()}}),vr(this,"clearSchedule",()=>{this._scheduledChange&&clearTimeout(this._scheduledChange)}),vr(this,"scheduleThemeChange",()=>{const e=new Date,t=re.e.getTimerByDate(e,fr.b);if(t){const a=1e3*(60*(t.minutes+60*t.hours-60*e.getHours()-e.getMinutes())-e.getSeconds());this.clearSchedule(),"timeline"===this.props.prefValues[V.kThemeScheduleEnabled]&&(this._scheduledChange=setTimeout(()=>{this.setTheme(),this.scheduleThemeChange()},a))}}),"timeline"===this.props.prefValues[V.kThemeScheduleEnabled]){const e=re.e.getTimerByDate(new Date,fr.a);e&&re.e.setTheme(re.e.getTheme(e.themeName))}}componentDidMount(){nt.a.utilities.onSuspend.addListener(this.clearSchedule),nt.a.utilities.onResume.addListener(this.onResume),this.onResume()}componentWillUnmount(){this.clearSchedule(),re.e.revokeSystemThemeSchedule(),nt.a.utilities.onSuspend.removeListener(this.clearSchedule),nt.a.utilities.onResume.removeListener(this.onResume)}componentDidUpdate(e){e.prefValues[V.kThemeScheduleEnabled]!==this.props.prefValues[V.kThemeScheduleEnabled]?this.onResume():"timeline"!==e.prefValues[V.kThemeScheduleEnabled]||Object(_r.default)(e.prefValues[V.kThemeScheduleTimeline],this.props.prefValues[V.kThemeScheduleTimeline])||this.scheduleThemeChange()}setTheme(){const e=re.e.getTimerByDate(new Date,fr.a);e&&"timeline"===this.props.prefValues[V.kThemeScheduleEnabled]&&re.e.setTheme(re.e.getTheme(e.themeName))}render(){return null}}var wr=Object(Le.a)(Cr,Er);class Or extends Ks.a{getInitialState(){return{style:{}}}reduce(e,t){switch(t.actionType){case"THEME_SET_WINDOWSTYLE":return{style:t.style}}return e}}var yr=new Or(y.a),Sr=a(843),Tr=a(844),kr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\VivaldiMenuButton.jsx";function Ar(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ir=[V.kKeyboardShortcutsAltOpensMenu,V.kMenuIconType];class Dr extends m.a.PureComponent{constructor(...e){super(...e),Ar(this,"shortcuts",[]),Ar(this,"hasMenu",!1),Ar(this,"_onPrefsChange",()=>{this._setupShortcuts(!1)}),Ar(this,"_onCommandStoreChange",e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0,this._setupShortcuts(!1);break;case"shortcut":this._setupShortcuts(!1)}}),Ar(this,"_changeFocus",()=>{this._showMenu(-1)}),Ar(this,"_getMenuItems",e=>Q.default.getNamedMenu("vivaldi",e)),Ar(this,"_setupShortcuts",e=>{this.shortcuts.forEach(e=>{e.shortcut&&mn.a.unbind(e.shortcut,this._showSubMenu)}),this.shortcuts=[],this.props.prefValues[V.kKeyboardShortcutsAltOpensMenu]?(this.shortcuts=ue.a.getShortcutsForSubMenus(this._getMenuItems(!1)),this.shortcuts.forEach(e=>{e.shortcut&&mn.a.bind(e.shortcut,this._showSubMenu)})):e&&this._getMenuItems(!1)}),Ar(this,"_showMenu",(e,t)=>{const a=this.refs.button.getBoundingClientRect(),n=this._getMenuItems(!0),i=e<0?"":n[e].id||"",s={id:0,rect:{x:parseInt(a.left),y:parseInt(a.top),width:parseInt(a.width),height:parseInt(a.height)},menu:{items:n,expandId:i,preferred:this.shortcuts}};Tr.a.show(s.id,[s],"bottom")}),Ar(this,"_showSubMenu",e=>{this.shortcuts.forEach(t=>{t.shortcut&&t.key===e.key&&this._showMenu(t.index,e)})}),Ar(this,"_handleDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),Ar(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowDown":case"Enter":this._showMenu(-1);break;case"Escape":Z.default.executeActions("COMMAND_FOCUS_WEBVIEW");break;default:return}e.preventDefault(),e.stopPropagation()})}componentDidMount(){j.a.addListener(V.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),Q.default.addChangeListener(this._onCommandStoreChange),this.hasMenu=Q.default.isNamedMenuAvailable("vivaldi"),this.hasMenu?this._setupShortcuts(!0):this._requestMenu()}componentWillUnmount(){j.a.removeListener(V.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),Q.default.removeChangeListener(this._onCommandStoreChange),this.shortcuts.forEach(e=>{e.shortcut&&mn.a.unbind(e.shortcut,this._showSubMenu)})}_requestMenu(){this.hasMenu||Z.default.requestNamedMenu("vivaldi")}render(){return m.a.createElement(m.a.Fragment,{__source:{fileName:kr,lineNumber:175,columnNumber:7}},m.a.createElement(Sr.a,{changeFocus:this._changeFocus,__source:{fileName:kr,lineNumber:176,columnNumber:9}}),m.a.createElement("button",{ref:"button",className:"vivaldi",style:{boxShadow:"none"},onMouseDown:this._showMenu.bind(this,-1),onKeyDown:this._handleKeyDown,onDoubleClick:this._handleDoubleClick,tabIndex:this.props.keyAccess,title:Object(d.a)("Menu"),__source:{fileName:kr,lineNumber:179,columnNumber:9}},"icon"===this.props.prefValues[V.kMenuIconType]&&m.a.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:a(731)},__source:{fileName:kr,lineNumber:189,columnNumber:13}}),"burger"===this.props.prefValues[V.kMenuIconType]&&m.a.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:a(1248)},__source:{fileName:kr,lineNumber:196,columnNumber:13}})))}}var Mr=Object(Le.a)(Dr,Ir),Pr=a(158),xr="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\titlebar.jsx";function Lr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jr=[V.kMenuDisplay];class Rr extends m.a.PureComponent{constructor(e,t){super(e),Lr(this,"_getPageStoreState",e=>{if(B.a.isSettings(e))return{activeTitle:"",activeUrl:""};const t=c.c.unsafeGetActivePage(e);return{activeTitle:t.title,activeUrl:t.url}}),Lr(this,"_onPageStoreChange",()=>{this.setState(this._getPageStoreState(this.context.vivaldiWindowId))}),Lr(this,"close",e=>{e.stopPropagation(),Pr.a.close(this.context.vivaldiWindowId)}),Lr(this,"minimize",e=>{Pr.a.minimize(this.context.vivaldiWindowId)}),Lr(this,"maximize",e=>{e.persist(),B.a.isMaximized(this.context.vivaldiWindowId)||B.a.isFullscreen(this.context.vivaldiWindowId)?Pr.a.restore(this.context.vivaldiWindowId):Pr.a.maximize(this.context.vivaldiWindowId)}),Lr(this,"skipFocusOnSystemButtonMouseDown",e=>{e.preventDefault()}),Lr(this,"keyDownListener",e=>{e.altKey&&this.setState({altHover:!0})}),Lr(this,"keyUpListener",e=>{"Alt"===e.key&&this.setState({altHover:!1})}),Lr(this,"handleMouseEnter",e=>{e.altKey&&this.setState({altHover:!0}),document.addEventListener("keydown",this.keyDownListener),document.addEventListener("keyup",this.keyUpListener)}),Lr(this,"handleMouseLeave",e=>{this.setState({altHover:!1}),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("keyup",this.keyUpListener)}),this.state={altHover:!1,...this._getPageStoreState(t.vivaldiWindowId)}}componentDidMount(){B.a.isSettings(this.context.vivaldiWindowId)||c.c.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){B.a.isSettings(this.context.vivaldiWindowId)||c.c.removeChangeListener(this._onPageStoreChange)}render(){const e=rt.p.getDisplayTitleByUrl(this.state.activeUrl,this.state.activeTitle)||"Vivaldi",t="top"!==this.props.tabPosition?"tabless":null,n=B.a.isFullscreen(this.context.vivaldiWindowId);let i,s,r;switch(navigator.appVersion.indexOf("Windows NT 10")>0?"win10":"win32"){case"linux":case"win32":i=a(1789),r=a(1790),s=a(1791);break;case"win10":i=a(1792),r=a(1793),s=a(1794);break;case"darwin":i=a(1795),r=a(1796),s=a(1797)}const o=6===this.props.prefValues[V.kSystemMacAquaColorVariant],l=!this.props.isPopupWindow&&"vivaldi"===this.props.prefValues[V.kMenuDisplay];return this.props.isHidden?l?m.a.createElement(Mr,{keyAccess:this.props.keyAccess,__source:{fileName:xr,lineNumber:200,columnNumber:11}}):null:m.a.createElement("div",{id:"titlebar",className:t,__source:{fileName:xr,lineNumber:205,columnNumber:7}},l&&m.a.createElement(Mr,{keyAccess:this.props.keyAccess,__source:{fileName:xr,lineNumber:207,columnNumber:11}}),m.a.createElement("div",{className:Gt()({"window-buttongroup":!0,"alt-hover":this.state.altHover&&!n,graphite:o}),onMouseEnter:null,onMouseLeave:null,__source:{fileName:xr,lineNumber:209,columnNumber:9}},m.a.createElement("button",{tabIndex:"-1",className:"window-minimize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.minimize,dangerouslySetInnerHTML:{__html:r},__source:{fileName:xr,lineNumber:220,columnNumber:11}}),m.a.createElement("button",{tabIndex:"-1",className:"window-maximize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.maximize,dangerouslySetInnerHTML:{__html:s},__source:{fileName:xr,lineNumber:227,columnNumber:11}}),m.a.createElement("button",{tabIndex:"-1",className:"window-close",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.close,dangerouslySetInnerHTML:{__html:i},__source:{fileName:xr,lineNumber:234,columnNumber:11}})),"top"!==this.props.tabPosition&&("vivaldi"===this.props.prefValues[V.kMenuDisplay]||this.props.isPopupWindow||!1)&&m.a.createElement("div",{id:"pagetitle",__source:{fileName:xr,lineNumber:247,columnNumber:16}},e))}}Lr(Rr,"contextType",R.a);var Br=Object(Le.a)(Rr,jr),Fr=a(1378),Ur="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\TopMenu.jsx";function Hr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Vr=[V.kKeyboardTabToAll,V.kMenuIconType];class Wr extends m.a.PureComponent{constructor(...e){super(...e),Hr(this,"state",{activePage:c.c.unsafeGetActivePage()}),Hr(this,"_onPageStoreChange",()=>{this.setState({activePage:c.c.unsafeGetActivePage()})}),Hr(this,"close",e=>{e.stopPropagation(),Pr.a.close(this.context.vivaldiWindowId)})}componentDidMount(){c.c.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){c.c.removeChangeListener(this._onPageStoreChange)}render(){return m.a.createElement("div",{className:"topmenu",__source:{fileName:Ur,lineNumber:64,columnNumber:7}},"icon"===this.props.prefValues[V.kMenuIconType]&&m.a.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:Object(d.a)("Double Click to Close"),tabIndex:"-1",__source:{fileName:Ur,lineNumber:66,columnNumber:11}},m.a.createElement("span",{className:"application-icon",dangerouslySetInnerHTML:{__html:h.fc},__source:{fileName:Ur,lineNumber:71,columnNumber:14}}),m.a.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:a(731)},__source:{fileName:Ur,lineNumber:74,columnNumber:14}})),"burger"===this.props.prefValues[V.kMenuIconType]&&m.a.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:Object(d.a)("Double Click to Close"),tabIndex:"-1",__source:{fileName:Ur,lineNumber:80,columnNumber:11}},m.a.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:a(1248)},__source:{fileName:Ur,lineNumber:85,columnNumber:14}})),m.a.createElement(Fr.a,{horizontal:!0,keyAccess:this.props.prefValues[V.kKeyboardTabToAll],__source:{fileName:Ur,lineNumber:90,columnNumber:9}}),m.a.createElement("div",{className:"horizontal-menu-pagetitle",__source:{fileName:Ur,lineNumber:93,columnNumber:9}},rt.p.getDisplayTitle(this.state.activePage)))}}Hr(Wr,"contextType",R.a);var zr=Object(Le.a)(Wr,Vr),Gr=a(712),Kr=a(272);var Yr=a(489),$r=a(284),Xr=a(747);const Zr=Object($r.a)(Yr.a,500);class Qr extends Ks.a{constructor(){super(y.a)}areEqual(e,t){return e===t||(Zr(window.vivaldiWindowId,{tiles:t}),!1)}getInitialState(){return{}}reduce(e,t){switch(t.actionType){case S.a.TILES_INITIALIZED:return t.tilesState;case S.a.TILE_SET_LAYOUT:{const{id:a,mosaicLayout:n}=t;return{...e,[a]:n}}case"PAGE_TILE_PAGES":{const{pages:a,id:n}=t;return e=qr(e,a),n||(e=eo(e,a)),e}case"CHROME_TABS_CREATE":const a=c.c.getPageById(t.page.id);return a?Jr(e,Sn.List.of(a)):e;case"PAGE_TABSTACK_REMOVE_FROM":case"PAGE_CLOSE":{const{pages:a}=t;return qr(e,a)}case"PAGE_TABSTACK_CREATE":{y.a.waitFor([c.c.dispatchToken]);const{pages:a}=t;return Jr(e,a)}default:return e}}}function qr(e,t){return t.reduce((t,a,n)=>{const i=a.getIn(["extData","tiling","id"]);if(!i||!e[i])return t;const s=t[i],r=function e(t,a){if("object"!=typeof t)return t;if(t.first===a)return"object"==typeof t.second?{...t.second}:t.second;if(t.second===a)return"object"==typeof t.first?{...t.first}:t.first;const n=e(t.first,a),i=e(t.second,a);return t.first!==n||t.second!==i?{...t,first:n,second:i}:t}(s,c.c.getTiles(i,a.windowId).findIndex(e=>e.id===a.id));if(s===r)return t;if("object"==typeof r)return function(e){(function e(t,a){"object"==typeof t.first?e(t.first,a):t.first=a.count++,"object"==typeof t.second?e(t.second,a):t.second=a.count++})(e,{count:0})}(r),{...t,[i]:r};const o={...t};return delete o[i],o},e)}function Jr(e,t){return eo(e,t)}function eo(e,t){return t.map(e=>e.getIn(["extData","tiling","id"])).forEach(t=>{e[t]&&delete(e={...e})[t]}),e}function to(e,t){if(e<2)return;const a=t||(e<4?"row":"grid");switch(a){case"grid":const t=3===e?2:Math.floor(Math.sqrt(e));return function e(t,a){if(t.length<=a)return ao(t,"column");const n=t.slice(0,a),i=t.slice(a),s=n.length/t.length*100;return{direction:"row",first:ao(n,"column"),second:e(i,a),...50===s?null:{splitPercentage:s}}}(Object(Xr.a)(e),t);case"vertically":return ao(Object(Xr.a)(e),"row");case"horizontally":return ao(Object(Xr.a)(e),"column");default:return ao(Object(Xr.a)(e),a)}}function ao(e,t){if(1===e.length)return e[0];const a=Math.floor(e.length/2),n=e.slice(0,a),i=e.slice(a),s=n.length/e.length*100;return{direction:t,first:ao(n,t),second:ao(i,t),...50===s?null:{splitPercentage:s}}}var no=new Qr,io=a(95),so=a(1380),ro=a(299),oo=a(306),lo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageCollection.jsx";function co(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const uo=Object(Gr.a)(so.MosaicWithoutDragDropContext),mo=function(e){return{activePageId:c.c.unsafeGetActivePage(e).id,pages:c.c.getPages(e)}};class ho extends u.PureComponent{constructor(e,t){super(e),co(this,"_onPageStoreChange",()=>{const e=mo(this.context.vivaldiWindowId);this.setState(e)}),co(this,"_onTilingStoreChange",()=>{this.setState({tiles:no.getState()})}),co(this,"onResize",e=>{const t=e[0].target;let a,n;if(t&&t.clientWidth&&t.clientHeight)a=t.clientWidth,n=t.clientHeight;else{const e=Object(ro.default)(j.a.get(V.kPanelsState),["width"],0);a=this.context.innerWidth-e,n=this.context.innerHeight}this.setState({contentWidth:a,contentHeight:n})}),co(this,"handleFocus",e=>{e&&e.nativeEvent&&e.nativeEvent.relatedTarget&&"WEBVIEW"===e.nativeEvent.relatedTarget.tagName&&!0===this.props.cycleFocus&&io.a.doAction("focusWebView")}),co(this,"onMosaicLayoutChange",e=>{const t=c.c.getPageById(this.state.activePageId);if(t){const a=t.getIn(["extData","tiling","id"]);(class{static setTileLayout(e,t){y.a.dispatch({actionType:S.a.TILE_SET_LAYOUT,mosaicLayout:e,id:t})}}).setTileLayout(e,a)}}),co(this,"renderTileSet",e=>{const t=e.map(e=>e.getIn(["extData","tiling","id"])).toSet(),a=c.c.getPageById(this.state.activePageId);return t.map(e=>{const t=c.c.getTiles(e,this.context.vivaldiWindowId,this.state.pages).sortBy(e=>e.index).map(e=>this.renderPage(e));let n;if(this.state.tiles[e])n=this.state.tiles[e];else if(a){const e=a.getIn(["extData","tiling","layout"]);n=to(t.size,e)}const i=!!a&&e===a.getIn(["extData","tiling","id"]);return(u.createElement(uo,{key:e,className:i?"visible":"hidden",renderTile:e=>t.get(e),value:n,onChange:this.onMosaicLayoutChange,__source:{fileName:lo,lineNumber:143,columnNumber:9}}))})}),co(this,"renderPage",e=>{const t=Object(oo.e)(e);return(u.createElement(Rs.a,{key:`page-component-${e.id}`,id:e.id,url:e.url,target:e.target,extData:e.extData,showImageInspector:e.showImageInspector,discarded:e.discarded,processexitstate:e.processexitstate,contentWidth:this.state.contentWidth,contentHeight:this.state.contentHeight,isVisible:t,isActive:e.active,supportsReaderMode:e.supportsReaderMode,windowId:e.windowId,__source:{fileName:lo,lineNumber:157,columnNumber:7}}))});const a=Object(ro.default)(j.a.get(V.kPanelsState),["width"],0);this.state={...mo(t.vivaldiWindowId),contentWidth:t.innerWidth-a,contentHeight:t.innerHeight,tiles:no.getState()}}componentDidMount(){c.c.addChangeListener(this._onPageStoreChange),this._tilingStoreToken=no.addListener(this._onTilingStoreChange)}componentWillUnmount(){c.c.removeChangeListener(this._onPageStoreChange),this._tilingStoreToken.remove()}render(){const e=u.Fragment,t=this.props.cycleFocus?"0":"-1",a=this.state.pages.filter(e=>!e.getIn(["extData","tiling","id"])||c.c.getTiles(e.getIn(["extData","tiling","id"]),this.context.vivaldiWindowId,this.state.pages).size<=1).sortBy(e=>e.id).map(e=>this.renderPage(e)),n=this.state.pages.filter(e=>e.getIn(["extData","tiling","id"])&&c.c.getTiles(e.getIn(["extData","tiling","id"]),this.context.vivaldiWindowId,this.state.pages).size>1);return u.createElement(e,{key:"webpage__collection",__source:{fileName:lo,lineNumber:204,columnNumber:7}},u.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:lo,lineNumber:205,columnNumber:9}}),u.createElement(Kr.a,{id:"webpage-stack",onResize:this.onResize,__source:{fileName:lo,lineNumber:206,columnNumber:9}},n.size>0&&this.renderTileSet(n),a.size>0&&a),u.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:lo,lineNumber:212,columnNumber:9}}))}}co(ho,"contextType",R.a);var po=Object(Gr.a)(ho);function bo(e,t){const{body:a}=e;if(!a)return;const n=getComputedStyle(t.srcElement).getPropertyValue("user-select");if(!t.srcElement.matches("a[href], area[href], input:not([disabled]), select:not([disabled]), option:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")&&"text"!==n&&"all"!==n){let n=t.target;for(;n!==a&&null!==n;){if(n.draggable){const t=e.activeElement,i=function(n){this.removeEventListener("mouseup",i),this.removeEventListener("dragend",i),e.activeElement===a&&t.focus()};return n.addEventListener("mouseup",i),void n.addEventListener("dragend",i)}n=n.parentElement}t.preventDefault()}}function go(e){const{body:t}=e;if(!t)return je.default;const a=bo.bind(null,e);return t.addEventListener("mousedown",a),function(){t.removeEventListener("mousedown",a)}}var No="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\WindowPortal.jsx";function fo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _o extends u.PureComponent{constructor(...e){super(...e),fo(this,"state",{appElm:void 0,contentWindow:void 0,windowState:void 0,popupTabId:-1}),fo(this,"windowClosed",e=>{const{contentWindow:t}=this.state;t&&e===t.vivaldiWindowId&&(this.props.closeWindowCallback&&this.props.closeWindowCallback(t),"popup"===this.props.windowType&&y.a.dispatch({actionType:"POPUPWINDOW_CLOSED",componentId:this.props.componentIdentifier}),y.a.dispatch({actionType:"WINDOW_CLOSED",windowId:e}))}),fo(this,"onNewAppWindowCreated",({windowId:e,contentWindow:t})=>{if(-1===e||!t)return void console.error("WindowPortal onNewAppWindowCreated failed");t.vivaldiWindowId=e,this.props.acceptOrBlockCallback&&this.props.acceptOrBlockCallback(e);const a={active:!0,fullScreen:!1,fullscreenMenubarShown:!1,guest:B.a.isGuestSession(this.context.vivaldiWindowId),html5FullScreen:!1,incognito:B.a.isIncognito(this.context.vivaldiWindowId),minimized:!1,maximized:!1,minimalUI:!1,nativeDecorations:j.a.get(V.kWindowsUseNativeDecoration),type:this.props.windowType,visibleUI:B.a.getUIFromPrefs(),restoreState:"normal"};y.a.dispatch({actionType:"WINDOW_SET_STATE",windowState:a,windowId:e}),t.onload=()=>{const e=t.document;if(!e.body)return;const n=e.body.appendChild(e.createElement("div"));n.id="app",this.detachFocusableEvents=go(e),this.setState({appElm:n,contentWindow:t,windowState:a})}}),fo(this,"onWindowWebContentsDidStartLoading",e=>{this.state.contentWindow&&this.context.vivaldiWindowId===e&&Pr.a.close(this.state.contentWindow.vivaldiWindowId)}),fo(this,"_onWindowStoreChanged",()=>{if(!this.state.contentWindow)return;const e=this.state.contentWindow.vivaldiWindowId,t=B.a.getState().get(e);this.state.windowState!==t&&this.setState({windowState:t})})}componentDidMount(){const e={bounds:this.props.getWindowBounds(),focused:!0,incognito:B.a.isIncognitoOrGuest(this.context.vivaldiWindowId)};q.a.openWindowNew("window.html",e,this.props.windowType).then(this.onNewAppWindowCreated),nt.a.windowPrivate.onWindowClosed.addListener(this.windowClosed),nt.a.windowPrivate.onWebContentsDidStartNavigation.addListener(this.onWindowWebContentsDidStartLoading),this.windowStoreToken=B.a.addListener(this._onWindowStoreChanged)}componentWillUnmount(){this.detachFocusableEvents(),this.windowStoreToken.remove(),nt.a.windowPrivate.onWindowClosed.removeListener(this.windowClosed),nt.a.windowPrivate.onWebContentsDidStartNavigation.removeListener(this.onWindowWebContentsDidStartLoading),this.state.contentWindow&&this.state.contentWindow.close()}render(){const{appElm:e,contentWindow:t,windowState:a}=this.state;if(!e||!t||!a)return null;const n=u.createElement(R.a.Provider,{value:t,__source:{fileName:No,lineNumber:199,columnNumber:7}},u.createElement(vt,{__source:{fileName:No,lineNumber:200,columnNumber:9}}),u.createElement("div",{id:"browser",className:this.props.getBrowserClasses(t.vivaldiWindowId,a),__source:{fileName:No,lineNumber:201,columnNumber:9}},u.createElement("div",{id:"header",__source:{fileName:No,lineNumber:207,columnNumber:11}},u.createElement(Br,{isHidden:!1,tabPosition:"none",isPopupWindow:!0,keyAccess:this.props.keyAccess,__source:{fileName:No,lineNumber:208,columnNumber:13}})),u.createElement("div",{id:"main",__source:{fileName:No,lineNumber:216,columnNumber:11}},u.createElement(ya.a,{__source:{fileName:No,lineNumber:217,columnNumber:13}},this.props.children))));return(si.a.createPortal(n,e))}}fo(_o,"contextType",R.a);var vo=_o,Eo=a(550),Co=a(837),wo=(a(1256),a(1423)),Oo=a(620),yo=a(522);let So="";nt.a.utilities.onScroll.addListener(e=>{1===e?So="mouse":2===e?So="trackpad":3===e&&(So="inertial")});let To="";function ko(e){e===B.a.getId()&&function(){To="";const e=Oo.a.getState().status;e&&nt.a.utilities.isUrlValid(e).then(({urlValid:t,schemeValid:a})=>{t&&a&&(To=e)})}()}function Ao(e,t,a,n){if(e!==B.a.getId())return;const i=Q.default.getCommandsGestures();let s=void 0;if(To&&(s=i["e"+n]),!s){if(s=i[n],!s)return;const r=Lo(e,t,a);if(r){const[t]=r;t.active||q.a.activateTab(t.id,e)}}s.function(null,To),To="",rs.a.setStatus(Object(d.a)("Gesture: $1",[s.label]),3e3)}function Io(e,t,a,n,i){if(e!==B.a.getId())return;const s=document.elementFromPoint(Math.round(n),Math.round(i));if(s&&"WEBVIEW"===s.tagName){t&&s.focus();const e=new MouseEvent(t?"mousedown":"mouseup",{button:a,clientX:n,clientY:i,bubbles:!0});s.dispatchEvent(e)}}let Do=null;function Mo(){Do=setTimeout(()=>{Do=null},100)}function Po(e,t,a,i){if(e!==B.a.getId()||null!==Do||"inertial"===So)return;let s;const r=oo.a(e);if(r.count()>=2){const t=Lo(e,a,i,r);if(!t)return;const[n,o]=t;if(n.active||q.a.activateTab(n.id,e),rt.p.isInternalPage(n))return;if("WEBVIEW"!==o.tagName)return void console.error("An external page has "+o.tagName+" tag when WEBVIEW was expected");s=o}else{const e=n.a.getActiveWebView();if(!e)return;s=e}Mo();const o=.1*t;s.getZoom(e=>{let t=Math.round(10*e)/10+o;t=Math.min(Math.max(t,.2),5),s.setZoom(t),"overlay"!==j.a.get(V.kStatusBarDisplay)&&j.a.get(V.kToolbarsStatus).includes("Zoom")||rs.a.setStatus(Object(d.a)("Page Zoom $1%",[Math.round(100*t)]),2e3)})}function xo(e){const t=e.target;if(t.classList.contains("UrlBar-UrlField")&&t.scrollWidth>=t.clientWidth&&t!==document.activeElement)return void e.preventDefault();if(!j.a.get(V.kMouseWheelTabSwitch))return;let a=!1;if(t.closest("div#tabs-tabbar-container")&&(a=!0),2===e.buttons||function(e){return!0===e.altKey&&!1===e.ctrlKey&&!1===e.shiftKey&&!1===e.metaKey}(e)||a){if(e.preventDefault(),"inertial"===So)return;const t=e.wheelDelta;let a;if(t>0)a=1;else{if(!(t<0))return;a=-1}const n=!1,i=n?"COMMAND_TAB_SWITCH_BACK_SETTING":"COMMAND_TAB_SWITCH_FORWARD_SETTING",s=n?"COMMAND_TAB_SWITCH_BACK_ORDER":"COMMAND_TAB_SWITCH_FORWARD_ORDER",r=n?"COMMAND_TAB_SWITCH_FORWARD_SETTING":"COMMAND_TAB_SWITCH_BACK_SETTING",o=n?"COMMAND_TAB_SWITCH_FORWARD_ORDER":"COMMAND_TAB_SWITCH_BACK_ORDER";let l;if("trackpad"===So){if(null!==Do)return;Mo(),l=a<0?2===e.buttons||e.altKey?i:s:2===e.buttons||e.altKey?r:o}else l=a<0?2===e.buttons||e.altKey?i:s:2===e.buttons||e.altKey?r:o;for(const t of yo.a)if(t.name===l){t.action(null,e);break}}}function Lo(e,t,a,n){n=n||oo.a(e);for(const e of n){const n=document.getElementById(String(e.id));if(!n)continue;const i=n.getBoundingClientRect();if(i.left<=t&&t<i.right&&i.top<=a&&a<i.bottom)return[e,n]}return null}var jo=a(576);let Ro=!1;var Bo=a(190),Fo="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\main.jsx";function Uo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ho(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}(e,t,"get"))}const Vo=[V.kAddressBarPosition,V.kAppearanceHudEnabled,V.kBookmarksBarDisplay,V.kBookmarksBarPosition,V.kKeyboardTabToAll,V.kKeyboardTabToAllUsesSystemDefault,V.kMenuDisplay,V.kPanelsPosition,V.kPanelsAsOverlayEnabled,V.kRazerChromaHasShownPromotion,V.kStartupShowMediaAvailableInformation,V.kStartupShowFfmpegInformation,V.kStatusBarDisplay,V.kTabsAtEdge,V.kTabsBarPosition,V.kTabsBarWidth,V.kTabsCloseButtonLeft,V.kTabsStackingMode,V.kThemeDimBlurred,V.kThemeSimpleScrollbar,V.kThemeTransparentTabBar,V.kThemeUseAnimation,V.kWindowsLinuxAltControls,V.kThemePrivateWindow],Wo=Object(Eo.a)();const zo=Object($r.a)(e=>e?Bo.a.switchTabForwardByHistory():Bo.a.switchTabForwardByOrder(),0),Go=Object($r.a)(e=>e?Bo.a.switchTabBackByHistory():Bo.a.switchTabBackByOrder(),0);var Ko=new WeakMap;class Yo extends m.a.PureComponent{constructor(e,t){super(e),Uo(this,"onBreakModeStoreChanged",()=>{const e=v.a.getState().isActive;this.setState({isBreakModeActive:e})}),Ko.set(this,{writable:!0,value:()=>{const e=yr.getState().style;this.setState({windowStyle:e})}}),Uo(this,"onDragStart",e=>{e.dataTransfer.getData("vivaldi/x-button-toolbar")&&this.setState({isDraggingButton:!0})}),Uo(this,"onDragEnd",e=>{this.state.isDraggingButton&&this.setState({isDraggingButton:!1})}),Uo(this,"createStartupDialogQueue",()=>{let e=!1;const t=this.context.vivaldiWindowId,a=new Map;nt.a.utilities.getSharedData({key:fs.c,value:!1},n=>{if(!n){j.a.get(V.kStartupCheckIsDefault)&&!B.a.isGuestSession(t)&&B.a.isActive(t)&&nt.a.utilities.isVivaldiDefaultBrowser(t=>{!1===t&&I.a.history.search({startTime:Date.now()-2592e5,endTime:Date.now(),text:""},t=>{t.length>=10&&(a.set(fs.c,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:a}),nt.a.utilities.setSharedData({key:fs.c,value:!0}))})})}}),B.a.isIncognitoOrGuest(t)||nt.a.utilities.isRazerChromaAvailable(t=>{t&&!this.props.prefValues[V.kRazerChromaHasShownPromotion]&&nt.a.utilities.getSharedData({key:fs.f,value:!1},t=>{t||(a.set(fs.f,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:a}),nt.a.utilities.setSharedData({key:fs.f,value:!0}))})}),"linux"===Object(Eo.a)()&&this.props.prefValues[V.kStartupShowFfmpegInformation]&&nt.a.utilities.getFFMPEGState(t=>{!0===t&&nt.a.utilities.getSharedData({key:fs.d,value:!1},t=>{t||(a.set(fs.d,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:a}),nt.a.utilities.setSharedData({key:fs.d,value:!0}))})}),"win"===Object(Eo.a)()&&this.props.prefValues[V.kStartupShowMediaAvailableInformation]&&nt.a.utilities.getMediaAvailableState(t=>{!1===t&&nt.a.utilities.getSharedData({key:fs.e,value:!1},t=>{t||(a.set(fs.e,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:a}),nt.a.utilities.setSharedData({key:fs.e,value:!0}))})})}),Uo(this,"storeQuickCommandSearch",e=>{this.setState({quickCommandValue:e})}),Uo(this,"closeStartupDialog",e=>{const t=this.state.startupDialogQueue;t.get(e)&&t.delete(e);for(const[e]of t){const a=t.get(e);if(a){a.active=!0;break}}this.setState((e,a)=>({startupDialogQueue:t})),this.forceUpdate()}),Uo(this,"shouldShowStartupDialog",e=>{const t=this.state.startupDialogQueue.get(e);return t&&t.active}),Uo(this,"_onActiveTabStatusText",(e,t)=>{e===this.context.vivaldiWindowId&&rs.a.setStatus(t)}),Uo(this,"_updateKeyUIMode",()=>{const e=this.props.prefValues;if(e[V.kKeyboardTabToAllUsesSystemDefault]){const t=this.props.prefValues[V.kSystemMacKeyboardUiMode];2===t&&0!==e[V.kKeyboardTabToAll]?L.a.set(V.kKeyboardTabToAll,0):0===t&&-1!==e[V.kKeyboardTabToAll]&&L.a.set(V.kKeyboardTabToAll,-1)}}),Uo(this,"_onPopupWindowStoreChanged",()=>{this.setState({popupWindows:Xs.getState()})}),Uo(this,"_onMainStoreChanged",e=>{switch(e.action){case"confirmOpenBookmarks":this.showConfirmOpenBookmarksDialog(e.options);break;case"showClearBrowsingHistory":this.showClearBrowsingHistoryDialog(e.options)}switch(e.type){case S.a.MAIN_SHOW_BOOKMARK_DIALOG:this.showBookmarkDialog(e.options);break;case S.a.MAIN_SHOW_SAVE_SESSION:this.showSaveSession(e.options);break;case S.a.MAIN_SHOW_OPEN_SESSION:this.showOpenSession();break;case S.a.MAIN_SHOW_IMPORT_DATA:this.showDialog({dialogtype:"import"});break;case S.a.MAIN_SHOW_PAGE_ACCESS_KEYS:Object(Pa.j)(c.c.unsafeGetActivePage().url)||this.toggleMainDialog(e.type);break;case"MAIN_SHOW_MAIL_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ACCOUNT_DIALOG":case"MAIN_SHOW_CALENDAR_ALARM":case S.a.MAIN_SHOW_IMPORT_CALENDAR:case S.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CREATE_CALENDAR_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case S.a.MAIN_SHOW_QUICKCOMMANDS:case S.a.MAIN_SHOW_ADD_FEED:case"MAIN_SHOW_ACCOUNT_SHEET":case"MAIN_SHOW_CALENDAR_MODAL_DIALOG":this.toggleMainDialog(e.type,e.options);break;case"MAIN_SHOW_SETTINGSWINDOW":this.setState({showSettings:!0,settingsCategory:e.options},()=>{for(const[e]of B.a.getState())if(B.a.isSettings(e)){I.a.windows.update(e,{focused:!0});break}});break;case"MAIN_SELECTING_TOOLBAR":this.setPaneSelection(e.options.enable);break;case"MAIN_SHOW_DIALOG":this.showDialog(e.options)}}),Uo(this,"_onPanelStoreChanged",()=>{this.setState({panelWidth:me.d.getPanelWidth()+6})}),Uo(this,"onCloseMainDialog",()=>new Promise(e=>{this.setState({mainDialogType:null,mainDialogOptions:null},e)})),Uo(this,"setPaneSelection",e=>{this.setState({paneSelection:e})}),Uo(this,"toggleMainDialog",(e,t)=>{this.state.mainDialogType===e?this.onCloseMainDialog():this.setState({mainDialogType:e,mainDialogOptions:t})}),Uo(this,"handleTabSwitcherActivation",e=>{if(!e&&this.mainDialog){const e=this.mainDialog.state.selected;q.a.activateTab(e.id,this.context.vivaldiWindowId)}this.onCloseMainDialog()}),Uo(this,"switchTabVisualTabSwitcher",(e,t,a)=>{if(!a&&"wheel"!==(null==e?void 0:e.type))return void(e=>{const t=j.a.get(V.kTabsCycleByRecentOrder);e?zo(t):Go(t)})(t);const{mainDialogType:n}=this.state,{MAIN_SHOW_VISUAL_TAB_SWITCHER:i}=S.a;var s,r;c.c.getPages(this.context.vivaldiWindowId).size>1&&(n!==i&&(this.toggleMainDialog(i),function(e,t,a){function n(e){Ro=!1,a.removeEventListener("mouseup",r),a.removeEventListener("mousedown",r),nt.a.tabsPrivate.onKeyboardChanged.removeListener(i),nt.a.tabsPrivate.onTabSwitchEnd.removeListener(s),t(e)}function i(e,t,a,i){!0===t?27===i&&n(!0):!1===t&&(17!==i&&18!==i&&13!==i||n(!1))}function s(){n(!1)}function r(e){if(e.target){const t=e.target.classList;if("mousedown"===e.type&&0===e.button&&t&&["visual-tab","visual-list","visual-list-preview"].includes(t)||"audioicon"===e.target.className)return}(2===e.button||e.button<=1&&e.buttons<=2)&&(e.preventDefault(),e.stopPropagation(),n(!1))}!0!==Ro&&(Ro=!0,a.addEventListener("mouseup",r),a.addEventListener("mousedown",r),nt.a.tabsPrivate.onKeyboardChanged.addListener(i),nt.a.tabsPrivate.onTabSwitchEnd.addListener(s))}(0,this.handleTabSwitcherActivation,this.context.document)),t?null===(s=this.mainDialog)||void 0===s||s.selectForward():null===(r=this.mainDialog)||void 0===r||r.selectBack())}),Uo(this,"maybeFocusLastActiveElement",()=>{if(!this._lastActiveElement)return;var e;if(!["BODY","WEBVIEW"].includes(this._lastActiveElement.tagName))return null===(e=this._lastActiveElement)||void 0===e||e.focus(),void(this._lastActiveElement=null);const t=c.c.getActivePage();if(t&&"content"===Object(Co.a)({pageId:t.id,url:t.url,activeElement:this.context.document.activeElement})){const e=n.a.getActiveWebView();null==e||e.focus()}}),Uo(this,"_onWindowStoreChanged",()=>{const e=this.context.vivaldiWindowId,t=B.a.getState().get(e);t&&this.state.windowState!==t&&(this.state.windowState.active!==t.active&&(t.active?this._onWindowFocus():this._onWindowBlur()),this.setState({windowState:t}))}),Uo(this,"_onWindowFocus",()=>{0}),Uo(this,"_onWindowBlur",()=>{const{document:e}=this.context;this._lastActiveElement=e.activeElement}),Uo(this,"onMessageReceived",(e,t)=>{if(e&&e.dispatchAction&&t.id===I.a.runtime.id)switch(e.dispatchAction){case ls.c:this.clearAppRegion();break;case ls.a:this.restoreAppRegion();break;case ls.b:Pr.a.minimize(this.context.vivaldiWindowId)}}),Uo(this,"_onMacMenuAction",(e,t,a)=>{if(e===this.context.vivaldiWindowId&&!B.a.isMinimized(this.context.vivaldiWindowId)){const e=Q.default.getHandlerByAction(t,a);e?e():Z.default.executeActions(t)}}),Uo(this,"_onDocumentMenu",(e,t,a)=>{for(const[n]of B.a.getState())n===e&&xe.show(e,t,a)}),Uo(this,"clearAppRegion",()=>{this.setState({preventAppRegionDrag:!0})}),Uo(this,"restoreAppRegion",()=>{this.setState({preventAppRegionDrag:!1})}),Uo(this,"handleDoubleClick",()=>{"top"===this.props.prefValues[V.kTabsBarPosition]&&this.state.windowState.nativeDecorations?q.a.openURL():B.a.isMaximized(this.context.vivaldiWindowId)||(B.a.isFullscreen(this.context.vivaldiWindowId),0)?Pr.a.restore(this.context.vivaldiWindowId):Pr.a.maximize(this.context.vivaldiWindowId)}),Uo(this,"closeConfirmOpenBookmarksDialog",()=>{this.setState({confirmOpenBookmarksOptions:null})}),Uo(this,"showConfirmOpenBookmarksDialog",e=>{this.setState({confirmOpenBookmarksOptions:e})}),Uo(this,"showClearBrowsingHistoryDialog",e=>{B.a.isIncognitoOrGuest(this.context.vivaldiWindowId)||this.setState({clearBrowsingHistoryDialog:e})}),Uo(this,"closeClearBrowsingHistoryDialog",()=>{this.setState({clearBrowsingHistoryDialog:null})}),Uo(this,"closeImportContacts",()=>{this.setState({importData:this.refs.webpageview})}),Uo(this,"showBookmarkDialog",e=>{this.setState({bookmarkDialogParent:this.refs.webpageview,bookmarkDialogOptions:e})}),Uo(this,"closeBookmarkDialog",()=>{this.setState({bookmarkDialogParent:!1})}),Uo(this,"closeSaveSession",()=>{this.setState({saveSession:!1})}),Uo(this,"showSaveSession",e=>{this.setState({saveSession:this.refs.webpageview,saveSessionOptions:e})}),Uo(this,"closeOpenSession",()=>{this.setState({openSession:!1})}),Uo(this,"showOpenSession",()=>{this.setState({openSession:this.refs.webpageview})}),Uo(this,"closeSettingsWindow",e=>{this.setState({showSettings:!1}),0===e.outerWidth&&0===e.outerHeight&&0===e.screenLeft&&0===e.screenTop||(L.a.set(V.kSettingsSizeWidth,e.outerWidth),L.a.set(V.kSettingsSizeHeight,e.outerHeight),L.a.set(V.kSettingsSizeLeft,e.screenLeft),L.a.set(V.kSettingsSizeTop,e.screenTop))}),Uo(this,"showDialog",e=>{this.setState({dialogCustomData:e})}),Uo(this,"handleOnCloseDialog",()=>{this.setState({dialogCustomData:null})}),Uo(this,"hasHorizontalMenu",()=>Boolean("top"===this.props.prefValues[V.kMenuDisplay]&&!0)),Uo(this,"getBrowserClasses",(e,t)=>{const a=B.a.isIncognitoOrGuest(e),n=this.props.prefValues[V.kTabsBarPosition],i=Object(B.b)(t),s="settings"===t.type,r="normal"===t.type,o="popup"===t.type,l=re.e.getTheme(this.props.prefValues[V.kThemePrivateWindow]),c=a?l.settings.accentOnWindow:this.props.vivaldiSettings.TABCOLOR_BEHIND_TABS,u=a?l.settings.tabsTransparent:this.props.vivaldiSettings.USE_TAB_TRANSPARENT_TABS,m="substrip"===this.props.prefValues[V.kTabsStackingMode],d="accordion"===this.props.prefValues[V.kTabsStackingMode],h={[this.props.themeBg]:!0,[this.props.highlightBg]:!0,[this.props.accentBg]:!0,"color-behind-tabs-on":c,"color-behind-tabs-off":!c,"ui-transparent-tabs":u};return Gt()({[Wo]:!0,[i]:!0,win10:navigator.appVersion.indexOf("Windows NT 10")>0,"minimal-ui":B.a.isMinimalUI(e),...h,hasfocus:t.active,isblurred:!t.active,native:t.nativeDecorations,"mac-fullscreen-hover":t.fullscreenMenubarShown&&t.active,popup:o,"is-settingspage":s,"horizontal-menu":this.hasHorizontalMenu(),"tabs-at-edge":this.props.prefValues[V.kTabsAtEdge]&&("bottom"===n||"top"===n)&&(!!t.maximized||t.fullScreen),"animation-off":!this.props.prefValues[V.kThemeUseAnimation],"dim-blurred":this.props.prefValues[V.kThemeDimBlurred],alt:this.props.prefValues[V.kWindowsLinuxAltControls]&&!1,"alt-tabs":this.props.prefValues[V.kTabsCloseButtonLeft],"substrip-tabs-on":m,"accordion-tabs-on":d,"full-key-access":0===this.props.prefValues[V.kKeyboardTabToAll],"break-mode":this.state.isBreakModeActive,["stacks-"+this.props.prefValues[V.kTabsStackingMode]]:!0,["address-"+this.props.prefValues[V.kAddressBarPosition]+(t.visibleUI.addressBar?"":"-off")]:!0,["bookmark-bar-"+(t.visibleUI.bookmarksBar?this.props.prefValues[V.kBookmarksBarPosition]:"off")]:!0,["tabs-"+(t.visibleUI.tabs&&r?n:"off")]:!0,"is-dragging-button":this.state.isDraggingButton,"no-app-dragging":this.state.preventAppRegionDrag,"active-pane-selection":this.state.paneSelection,"bgimage-dark":"white"===this.state.windowStyle["--colorImageFg"],"bgimage-light":"black"===this.state.windowStyle["--colorImageFg"],"transparent-tabbar":this.props.prefValues[V.kThemeTransparentTabBar],"simple-scrollbar":this.props.prefValues[V.kThemeSimpleScrollbar]||!1})}),Uo(this,"getSettingsWindowBounds",()=>{const{screen:e}=this.context,t=j.a.get(V.kSettingsSizeWidth),a=j.a.get(V.kSettingsSizeHeight),n=j.a.get(V.kSettingsSizeLeft),i=j.a.get(V.kSettingsSizeTop),s=a<=e.height?a:e.height;let r=n>=0?n:e.availLeft+t/2,o=i>=0?i:e.availTop+(e.height-a)/2;return o<0&&(o=0),r+t>e.availLeft+e.width&&(r=e.availLeft+(e.width-t),r<0&&(r=0)),{left:Math.round(r),top:Math.round(o),width:Math.round(t),height:Math.round(s)}}),Uo(this,"renderPopups",()=>this.state.popupWindows.map(e=>m.a.createElement(vo,{getBrowserClasses:this.getBrowserClasses,getWindowBounds:e.getWindowBounds,keyAccess:this.props.prefValues[V.kKeyboardTabToAll],windowType:e.windowType,acceptOrBlockCallback:e.acceptOrBlockCallback,key:e.identifier,componentIdentifier:e.identifier,__source:{fileName:Fo,lineNumber:1062,columnNumber:11}},m.a.createElement(zs,{__source:{fileName:Fo,lineNumber:1071,columnNumber:13}}))));const a=B.a.getState().get(t.vivaldiWindowId);if(!a)throw new Error("MainWindow constructor: Expected windowState");this.state={bookmarkDialogParent:!1,bookmarkDialogOptions:null,clearBrowsingHistoryDialog:null,confirmOpenBookmarksOptions:null,dialogCustomData:null,importData:!1,isBreakModeActive:v.a.getState().isActive,isDraggingButton:!1,panelWidth:me.d.getPanelWidth()+6,mainDialogOptions:null,mainDialogType:null,openSession:!1,paneSelection:!1,preventAppRegionDrag:!1,quickCommandValue:"",saveSession:!1,saveSessionOptions:null,settingsCategory:"general",windowStyle:yr.getState().style,windowState:a,startupDialogQueue:new Map,showSettings:!1,popupWindows:Xs.getState()},this._updateKeyUIMode()}componentDidMount(){nt.a.tabsPrivate.onMouseGestureDetection.addListener(ko),nt.a.tabsPrivate.onMouseGesture.addListener(Ao),nt.a.tabsPrivate.onWebviewClickCheck.addListener(Io),nt.a.tabsPrivate.onPageZoom.addListener(Po),document.addEventListener("wheel",xo,{passive:!1}),Hn.a.addChangeListener(this._onMainStoreChanged),me.d.addChangeListener(this._onPanelStoreChanged),this.breakModeStoreToken=v.a.addListener(this.onBreakModeStoreChanged),this.themeStoreToken=yr.addListener(Ho(this,Ko)),this.windowStoreToken=B.a.addListener(this._onWindowStoreChanged),nt.a.contextMenu.onDocumentMenu.addListener(this._onDocumentMenu),I.a.runtime.onMessage.addListener(this.onMessageReceived),this.detachFocusableEvents=go(this.context.document),I.a.contextMenus.removeAll(),this.createStartupDialogQueue(),nt.a.windowPrivate.onActiveTabStatusText.addListener(this._onActiveTabStatusText),this._popupWindowStoreToken=Xs.addListener(this._onPopupWindowStoreChanged)}componentDidUpdate(e,t){!t.windowState.active&&this.state.windowState.active&&this.maybeFocusLastActiveElement()}componentWillUnmount(){nt.a.tabsPrivate.onMouseGestureDetection.removeListener(ko),nt.a.tabsPrivate.onMouseGesture.removeListener(Ao),nt.a.tabsPrivate.onWebviewClickCheck.removeListener(Io),nt.a.tabsPrivate.onPageZoom.removeListener(Po),document.removeEventListener("wheel",xo,{passive:!1}),this.detachFocusableEvents(),Hn.a.removeChangeListener(this._onMainStoreChanged),me.d.removeChangeListener(this._onPanelStoreChanged),this.breakModeStoreToken.remove(),this.windowStoreToken.remove(),this.themeStoreToken.remove(),nt.a.contextMenu.onDocumentMenu.removeListener(this._onDocumentMenu),I.a.runtime.onMessage.removeListener(this.onMessageReceived),this._popupWindowStoreToken.remove()}render(){const e=this.props.prefValues,{settingsCategory:t}=this.state,n=e[V.kTabsBarPosition],{html5FullScreen:i,fullScreen:s,visibleUI:r}=this.state.windowState,o="left"===n||"right"===n?{[`padding${Object(jo.a)(n)}`]:e[V.kTabsBarWidth]}:void 0,l=s&&!(r.tabs&&"top"===n);return m.a.createElement("div",{id:"browser",lang:I.a.i18n.getUILanguage(),className:this.getBrowserClasses(this.context.vivaldiWindowId,this.state.windowState),style:this.state.windowStyle,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDragEnd,__source:{fileName:Fo,lineNumber:1090,columnNumber:7}},m.a.createElement(wr,{__source:{fileName:Fo,lineNumber:1102,columnNumber:9}}),m.a.createElement("div",{id:"header",onDoubleClick:this.handleDoubleClick,__source:{fileName:Fo,lineNumber:1104,columnNumber:9}},m.a.createElement(Br,{isHidden:l,isPopupWindow:!1,tabPosition:r.tabs?n:"none",keyAccess:e[V.kKeyboardTabToAll],__source:{fileName:Fo,lineNumber:1105,columnNumber:11}}),this.hasHorizontalMenu()&&m.a.createElement(zr,{__source:{fileName:Fo,lineNumber:1112,columnNumber:40}}),("top"===n||!r.tabs)&&m.a.createElement(Nr.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:n,visible:r.tabs,__source:{fileName:Fo,lineNumber:1115,columnNumber:13}})),m.a.createElement("div",{id:"main",className:e[V.kPanelsPosition],__source:{fileName:Fo,lineNumber:1124,columnNumber:9}},m.a.createElement(Lt,{size:"large",__source:{fileName:Fo,lineNumber:1125,columnNumber:11}}),r.bookmarksBar&&m.a.createElement(f.a,{display:e[V.kBookmarksBarDisplay],statusOff:"off"===r.statusBar,keyAccess:e[V.kKeyboardTabToAll],__source:{fileName:Fo,lineNumber:1130,columnNumber:13}}),this.shouldShowStartupDialog(fs.c)&&m.a.createElement(lr,{onClose:this.closeStartupDialog.bind(this,fs.c),__source:{fileName:Fo,lineNumber:1137,columnNumber:13}}),m.a.createElement("div",{className:"inner",__source:{fileName:Fo,lineNumber:1141,columnNumber:11}},this.state.dialogCustomData&&m.a.createElement(ae.a,{customData:this.state.dialogCustomData,closeDialog:this.handleOnCloseDialog,__source:{fileName:Fo,lineNumber:1144,columnNumber:15}}),this.state.confirmOpenBookmarksOptions&&m.a.createElement(te,{urls:this.state.confirmOpenBookmarksOptions.urls,openOptions:this.state.confirmOpenBookmarksOptions.openOptions,onRequestClose:this.closeConfirmOpenBookmarksDialog,__source:{fileName:Fo,lineNumber:1150,columnNumber:15}}),this.state.clearBrowsingHistoryDialog&&m.a.createElement(X,{onClose:this.closeClearBrowsingHistoryDialog,__source:{fileName:Fo,lineNumber:1157,columnNumber:15}}),this.state.bookmarkDialogParent&&this.state.bookmarkDialogOptions&&m.a.createElement(N,{onClose:this.closeBookmarkDialog,mode:this.state.bookmarkDialogOptions.mode,id:this.state.bookmarkDialogOptions.id,index:this.state.bookmarkDialogOptions.index,__source:{fileName:Fo,lineNumber:1163,columnNumber:15}}),this.state.saveSession&&this.state.saveSessionOptions&&m.a.createElement(ir,{onClose:this.closeSaveSession,options:this.state.saveSessionOptions,__source:{fileName:Fo,lineNumber:1171,columnNumber:15}}),!B.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&m.a.createElement(gr,{__source:{fileName:Fo,lineNumber:1177,columnNumber:15}}),this.shouldShowStartupDialog(fs.f)&&m.a.createElement(er,{onClose:this.closeStartupDialog.bind(this,fs.f),__source:{fileName:Fo,lineNumber:1180,columnNumber:15}}),this.shouldShowStartupDialog(fs.d)&&m.a.createElement(He,{onClose:this.closeStartupDialog.bind(this,fs.d),__source:{fileName:Fo,lineNumber:1185,columnNumber:15}}),this.shouldShowStartupDialog(fs.e)&&m.a.createElement(Ke,{onClose:this.closeStartupDialog.bind(this,fs.e),__source:{fileName:Fo,lineNumber:1190,columnNumber:15}}),this.state.openSession&&m.a.createElement(ni,{dialogParentElement:this.state.openSession,keyAccess:e[V.kKeyboardTabToAll],onClose:this.closeOpenSession,__source:{fileName:Fo,lineNumber:1195,columnNumber:15}}),m.a.createElement(js,{key:"panel",position:e[V.kPanelsPosition],outsideClickIgnoreClass:"panel-clickoutside-ignore",__source:{fileName:Fo,lineNumber:1201,columnNumber:13}}),"left"===n&&m.a.createElement(Nr.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:n,visible:r.tabs,__source:{fileName:Fo,lineNumber:1207,columnNumber:15}}),m.a.createElement("div",{ref:"webpageview",id:"webview-container",__source:{fileName:Fo,lineNumber:1215,columnNumber:13}},m.a.createElement(po,{cycleFocus:j.a.get(V.kWebpagesFocusTrap),__source:{fileName:Fo,lineNumber:1216,columnNumber:15}})),"overlay"===r.statusBar&&!i&&m.a.createElement(ur.a,{style:{[e[V.kPanelsPosition]]:this.state.panelWidth,...o},__source:{fileName:Fo,lineNumber:1222,columnNumber:15}}),"right"===n&&m.a.createElement(Nr.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:n,visible:r.tabs,__source:{fileName:Fo,lineNumber:1230,columnNumber:15}}))),m.a.createElement("footer",{__source:{fileName:Fo,lineNumber:1240,columnNumber:9}},"bottom"===n&&r.tabs&&m.a.createElement(Nr.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,mainDialogType:this.state.mainDialogType,tabPosition:n,visible:!0,__source:{fileName:Fo,lineNumber:1242,columnNumber:13}}),"on"===r.statusBar&&m.a.createElement(wt.a,{name:V.kToolbarsStatus,menuOrigin:"bottomLeft",className:"toolbar-statusbar",popupPosition:"above",size:"medium",__source:{fileName:Fo,lineNumber:1251,columnNumber:13}})),this.state.mainDialogType&&m.a.createElement(Un,{ref:e=>this.mainDialog=e?e.refs.visualTabSwitcher:null,onClose:this.onCloseMainDialog,dialog:this.state.mainDialogType,options:this.state.mainDialogOptions,quickCommandValue:this.state.quickCommandValue,storeQuickCommandSearch:this.storeQuickCommandSearch,__source:{fileName:Fo,lineNumber:1262,columnNumber:11}}),this.props.prefValues[V.kAppearanceHudEnabled]&&m.a.createElement(wo.a,{classNames:"HUD",in:this.state.isBreakModeActive,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:500,exit:100},__source:{fileName:Fo,lineNumber:1275,columnNumber:11}},m.a.createElement("button",{className:"HUD",onClick:_.a.toggleBreakMode,dangerouslySetInnerHTML:{__html:h.G.large},__source:{fileName:Fo,lineNumber:1285,columnNumber:13}})),m.a.createElement("svg",{version:"1.1",width:"0",height:"0",dangerouslySetInnerHTML:{__html:a(1818)},__source:{fileName:Fo,lineNumber:1295,columnNumber:9}}),this.state.showSettings&&m.a.createElement(vo,{closeWindowCallback:this.closeSettingsWindow,getBrowserClasses:this.getBrowserClasses,getWindowBounds:this.getSettingsWindowBounds,keyAccess:this.props.prefValues[V.kKeyboardTabToAll],windowType:"settings",componentIdentifier:"settingswindow",__source:{fileName:Fo,lineNumber:1305,columnNumber:9}},m.a.createElement("div",{className:"webpageview",__source:{fileName:Fo,lineNumber:1312,columnNumber:11}},m.a.createElement(cr.b,{url:cr.a+t,__source:{fileName:Fo,lineNumber:1313,columnNumber:13}}))),this.renderPopups())}}Uo(Yo,"contextType",R.a);t.a=Et(Object(Le.a)(Object(Qe.a)(Yo,["TABCOLOR_BEHIND_TABS","USE_TAB_TRANSPARENT_TABS"]),Vo))},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(57),r=a.n(s),o=a(12),l=a(16);let c=[];const u=new class extends r.a{getAction(){for(;c.length>500;)c.shift();return c.join("\r\n")}clear(){c=[],this.emitChange()}emitChange(){this.emit("change")}addChangeListener(e){0===this.listeners("change").length&&(this.dispatchToken=o.a.register(e=>{const t=(new Date).toLocaleString("is")+": ";let a;switch(e.actionType){case"STATUS_SET_STATUS":a=e.status;break;case"MAIL_SELECT_FOLDER":a=JSON.stringify(e.folder.accountId)+", "+JSON.stringify(e.folder.path);break;case"MAIL_SEARCH_SET_OPTIONS":a=JSON.stringify(e.options);break;case"MAIL_FILTERS_INIT":break;case l.a.CONTACT_SAVE_CONTACT:case l.a.CONTACT_SELECT_CONTACT:a=JSON.stringify(e.contact);break;case l.a.CONTACT_DELETE_CONTACTS:c.push(t+" "+e.actionType+": "+JSON.stringify(e.ids));break;case l.a.CONTACT_ADD_CONTACTS:a=e.contacts.length+" contacts";break;case"MAIL_IS_DISCONNECTED":a=e.accountId+", "+e.isDisconnected.toString()+", "+(e.errorMessage||"");break;case"MAIL_IS_CONNECTING":a=e.accountId+", "+e.isConnecting.toString();break;case"URLFIELD_SET_STATE":a=Object.getOwnPropertyNames(e.state).map(t=>`${t}: ${e.state[t]}`).join(", ");break;case"MAIL_INDEX_UPDATE":const n=e.updates;a="",n.addedSles&&(a+="Added: "+JSON.stringify(n.addedSles)),n.removedSles&&(a+="Removed: "+JSON.stringify(n.removedSles)),n.sleUpdates&&(a+="Updated: "+JSON.stringify(n.sleUpdates));break;default:a=""}const n=a?": "+a:"";c.push(t+e.actionType+n),u.emitChange()})),this.on("change",e)}removeChangeListener(e){1===this.listeners("change").length&&o.a.unregister(this.dispatchToken),this.removeListener("change",e)}};var m=u,d=a(25),h=a(78),p=a(4),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\actionlog\\ActionLog.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends n.Component{constructor(...e){super(...e),g(this,"state",{actionLog:""}),g(this,"_actionLoggerChanged",()=>{this.setState({actionLog:m.getAction()})}),g(this,"getContextMenuItems",()=>[{handler:m.clear.bind(m),...Object(p.a)("Clear")}]),g(this,"onContextMenu",e=>{Object(h.a)(this.context.vivaldiWindowId,this.getContextMenuItems())(e)})}UNSAFE_componentWillMount(){m.addChangeListener(this._actionLoggerChanged)}componentWillUnmount(){m.removeChangeListener(this._actionLoggerChanged)}render(){return n.createElement("div",{className:"actionlog",id:"action_logger",tabIndex:"0",onContextMenu:this.onContextMenu,__source:{fileName:b,lineNumber:50,columnNumber:7}},n.createElement("textarea",{className:"actionlogs",readOnly:!0,value:this.state.actionLog,__source:{fileName:b,lineNumber:52,columnNumber:9}}))}}g(N,"contextType",d.a);var f=N,_=(a(973),"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\ExperimentItem.jsx");function v({enabled:e,locked:t,fullName:a,description:n,onValueChange:s}){return i.a.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:15,columnNumber:5}},i.a.createElement("label",{__source:{fileName:_,lineNumber:16,columnNumber:7}},i.a.createElement("input",{type:"checkbox",checked:e,disabled:t,onChange:({currentTarget:e})=>s(e.checked),__source:{fileName:_,lineNumber:17,columnNumber:9}}),i.a.createElement("span",{__source:{fileName:_,lineNumber:23,columnNumber:9}},a)),i.a.createElement("p",{className:"info",__source:{fileName:_,lineNumber:25,columnNumber:7}},n))}var E=a(385),C=a(2),w="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\Experiments.jsx";function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(){return i.a.createElement("div",{className:"Experiments-Caution",__source:{fileName:w,lineNumber:12,columnNumber:5}},Object(C.a)("These experimental features may change, break, disappear, not work as intended or at all."),i.a.createElement("br",{__source:{fileName:w,lineNumber:14,columnNumber:7}}),Object(C.a)("Please proceed with caution."))}class S extends i.a.PureComponent{constructor(...e){super(...e),O(this,"state",{experiments:E.a.getFlags()}),O(this,"_handleChange",(e,t)=>{E.a.enableFeature(e,t).then(()=>this.setState({experiments:E.a.getFlags()}))})}render(){return i.a.createElement("div",{className:"Experiments vivaldi-settings",tabIndex:"0",__source:{fileName:w,lineNumber:39,columnNumber:7}},i.a.createElement("h2",{className:"Experiments-Header",__source:{fileName:w,lineNumber:40,columnNumber:9}},Object(C.a)("Experimental features")),i.a.createElement(y,{__source:{fileName:w,lineNumber:42,columnNumber:9}}),i.a.createElement("div",{className:"setting-subgroup",__source:{fileName:w,lineNumber:44,columnNumber:9}},this.state.experiments.map(e=>i.a.createElement(v,{key:e.name,fullName:e.friendlyName,description:e.description,locked:e.locked,enabled:e.value,onValueChange:this._handleChange.bind(null,e.name),__source:{fileName:w,lineNumber:46,columnNumber:13}}))))}}var T=a(708),k=a(1295),A=a(804),I=a(805),D=a(29),M="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailMessage.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends i.a.PureComponent{constructor(...e){super(...e),P(this,"state",{listEntry:void 0}),P(this,"onMailFilterStoreChange",e=>{"finishIndexProgress"===e.target&&(this.getListEntry(),D.a.removeChangeListener(this.onMailFilterStoreChange))})}componentDidMount(){D.a.isInitialized()?this.getListEntry():D.a.addChangeListener(this.onMailFilterStoreChange)}componentWillUnmount(){D.a.removeChangeListener(this.onMailFilterStoreChange)}getListEntry(){const e=D.a.getListEntryBySearchListId(this.props.id);this.setState({listEntry:e})}render(){return i.a.createElement("div",{id:"mail_view",className:"top",__source:{fileName:M,lineNumber:47,columnNumber:7}},i.a.createElement(I.a,{hasNoListEntries:!0,listEntry:this.state.listEntry,pageIsActive:this.props.isActive,__source:{fileName:M,lineNumber:48,columnNumber:9}}))}}var L=x,j=a(1304),R=a(6),B=a(45),F=a.n(B),U=a(173),H=a(21),V=a(14),W=a(11),z=a(229),G=a(86),K=a(87),Y=a(1),$="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\private-intro\\PrivateWindowIntro.jsx";function X(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,function(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}(e,t,"get"))}const Z=[Y.kIncognitoShowIntro,Y.kThemePrivateWindow],Q=W.a.getEventHandler;var q=new WeakMap,J=new WeakMap,ee=new WeakMap;class te extends i.a.Component{constructor(...e){var t,a,n;super(...e),t=this,a="state",n={searchEngines:G.a.getList(),theme:{}},a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,q.set(this,{writable:!0,value:()=>{this.setState({searchEngines:G.a.getList()})}}),J.set(this,{writable:!0,value:e=>{e.preventDefault(),V.a.openURL("https://vvld.in/privacy-and-security",{inCurrent:!1,inBackground:!1})}}),ee.set(this,{writable:!0,value:e=>{z.a.setDefault(e.currentTarget.value,!0)}})}static getDerivedStateFromProps(e){const t=e.prefValues[Y.kThemePrivateWindow],a=K.e.getTheme(t),{accentBg:n,highlightBg:i,baseFg:s,baseBg:r}=a.colors,o=U.d.all(F()(s),F()(r),F()(i),F()(n)),l={};return Object.entries(o).forEach(([e,t])=>{l[`--${e}`]=t}),l}componentDidMount(){G.a.addChangeListener(X(this,q))}componentWillUnmount(){G.a.removeChangeListener(X(this,q))}render(){const e=G.a.getDefault(!0);return(i.a.createElement("div",{className:"private-intro",style:this.state.theme,__source:{fileName:$,lineNumber:97,columnNumber:7}},i.a.createElement("svg",{className:"private-window-background",viewBox:"0 0 1244 860",__source:{fileName:$,lineNumber:101,columnNumber:9}},i.a.createElement("defs",{__source:{fileName:$,lineNumber:103,columnNumber:11}},i.a.createElement("linearGradient",{x1:"0.15",y1:"0.3",x2:"0.3",y2:"0.5",id:"private-intro-bg-gradient",__source:{fileName:$,lineNumber:104,columnNumber:13}},i.a.createElement("stop",{offset:"0",stopColor:"var(--colorFg)",stopOpacity:"0.03",__source:{fileName:$,lineNumber:105,columnNumber:15}}),i.a.createElement("stop",{offset:"1",stopColor:"var(--colorFg)",stopOpacity:"0.003",__source:{fileName:$,lineNumber:106,columnNumber:15}})),i.a.createElement("linearGradient",{x1:"1",y1:"0",x2:"0",y2:"1",id:"private-intro-accent-gradient",__source:{fileName:$,lineNumber:109,columnNumber:13}},i.a.createElement("stop",{offset:"0",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:$,lineNumber:110,columnNumber:15}}),i.a.createElement("stop",{offset:"0.5",stopColor:"var(--colorAccentBg)",stopOpacity:"1",__source:{fileName:$,lineNumber:111,columnNumber:15}}),i.a.createElement("stop",{offset:"1",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:$,lineNumber:112,columnNumber:15}}))),i.a.createElement("path",{fill:"url(#private-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:$,lineNumber:116,columnNumber:11}}),i.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",strokeWidth:"2",d:"M854 839.979L1103.98 407",__source:{fileName:$,lineNumber:117,columnNumber:11}}),i.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M951 649.979L1200.98 217",__source:{fileName:$,lineNumber:118,columnNumber:11}}),i.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M969 628.452L1126.86 356",__source:{fileName:$,lineNumber:119,columnNumber:11}}),i.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M802 686.452L959.86 414",__source:{fileName:$,lineNumber:120,columnNumber:11}}),i.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",opacity:".5",d:"M735 790.452L892.86 518",__source:{fileName:$,lineNumber:121,columnNumber:11}})),i.a.createElement("div",{className:"private-intro-content",__source:{fileName:$,lineNumber:124,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:$,lineNumber:125,columnNumber:11}},Object(C.a)("title","Private Window")),i.a.createElement("span",{className:"private-intro-ghost",dangerouslySetInnerHTML:{__html:a(1673)},__source:{fileName:$,lineNumber:126,columnNumber:11}}),i.a.createElement("p",{__source:{fileName:$,lineNumber:129,columnNumber:11}},Object(C.a)("Browsing in a Private Window means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),i.a.createElement("p",{__source:{fileName:$,lineNumber:130,columnNumber:11}},i.a.createElement("a",{tabIndex:0,href:"https://vvld.in/privacy-and-security",onClick:X(this,J),__source:{fileName:$,lineNumber:131,columnNumber:13}},Object(C.a)("Learn more about Privacy & Security"))),i.a.createElement("h2",{__source:{fileName:$,lineNumber:139,columnNumber:11}},Object(C.a)("Default Search")),i.a.createElement("p",{className:"private-intro-blurb",__source:{fileName:$,lineNumber:140,columnNumber:11}},i.a.createElement("span",{__source:{fileName:$,lineNumber:141,columnNumber:13}},Object(C.a)("While in a Private Window, Vivaldi will use $1 to answer your searches.",[e.name])),i.a.createElement("span",{__source:{fileName:$,lineNumber:144,columnNumber:13}},"DuckDuckGo"===e.name&&" "+Object(C.a)("DuckDuckGo is a search engine that does not track your search history, enabling you to search privately."))),i.a.createElement("h3",{__source:{fileName:$,lineNumber:152,columnNumber:11}},Object(C.a)("Search with")),i.a.createElement("label",{className:"private-intro-select-searchengine",__source:{fileName:$,lineNumber:153,columnNumber:11}},i.a.createElement("img",{className:"private-intro-favicon",src:e.faviconUrl,__source:{fileName:$,lineNumber:154,columnNumber:13}}),i.a.createElement("select",{value:e.id,onChange:X(this,ee),__source:{fileName:$,lineNumber:155,columnNumber:13}},this.state.searchEngines.map(e=>i.a.createElement("option",{key:e.id,value:e.id,__source:{fileName:$,lineNumber:157,columnNumber:17}},e.name)))),i.a.createElement("label",{className:"private-intro-disable",__source:{fileName:$,lineNumber:164,columnNumber:11}},i.a.createElement("input",{type:"checkbox",checked:!this.props.prefValues[Y.kIncognitoShowIntro],onChange:Q(Y.kIncognitoShowIntro,"inverse"),__source:{fileName:$,lineNumber:165,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:$,lineNumber:168,columnNumber:13}},Object(C.a)("Do Not Show Introduction Again"))))))}}var ae=Object(H.a)(te,Z),ne=a(40),ie=a.n(ne),se=a(37),re=function(){return i.a.createElement("webview",{src:`${se.o}/saga/saga.html`,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\saga\\SagaPage.jsx",lineNumber:10,columnNumber:10}})};var oe={SpeedDial:"startpage",Bookmarks:"bookmarks",History:"history",Calendar:"calendar",NotesManager:"notes"},le=a(716),ce=a(524),ue=a(644),me=a(28),de=a(814),he=a(815),pe=a(36),be=a(204),ge=a(281),Ne=a(22),fe=a(51),_e=a(10),ve=a(153),Ee=a(9),Ce="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks-manager\\BookmarksManager.jsx";function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Oe=[{text:Object(C.a)("Title"),value:"title",fullScreenTitle:Object(C.a)("Sort by title"),width:300,visible:!0,key:!0},{text:Object(C.a)("Address"),value:"url",icon:Ee.w,fullScreenTitle:Object(C.a)("Sort by address"),width:300,visible:!0},{text:Object(C.a)("Nickname"),value:"nickname",icon:Ee.xb.small,fullScreenTitle:Object(C.a)("Sort by nickname"),width:100,visible:!0},{text:Object(C.a)("Description"),value:"description",icon:Ee.ld,fullScreenTitle:Object(C.a)("Sort by description"),width:200,visible:!0},{text:Object(C.a)("Date Created"),value:"dateAdded",icon:Ee.y,fullScreenTitle:Object(C.a)("Sort by creation date"),width:150,visible:!1}];class ye extends i.a.PureComponent{constructor(...e){super(...e),we(this,"refEditor",i.a.createRef()),we(this,"refTree",i.a.createRef()),we(this,"state",{filter:"",sorting:{sortOrder:fe.a.NO_SORTING,sortField:"manually",comparator:this.sortComparator},columns:Object(ve.e)().bookmarks||Object(ve.d)(Oe)}),we(this,"onSortChange",(e,t)=>{const a={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:a});const n={sortOrder:e,sortField:t};W.a.set(Y.kBookmarksManagerSorting,n)}),we(this,"sortComparator",(e,t)=>me.b.treeSortComparator(e,t,this.state.sorting)),we(this,"importData",()=>{pe.a.showImportData()}),we(this,"focusTree",()=>{var e,t;null===(e=this.refTree.current)||void 0===e||null===(t=e.refTreeList.current)||void 0===t||t.focusTree()}),we(this,"onSelect",e=>{var t;null===(t=this.refEditor.current)||void 0===t||t.setItem(e)}),we(this,"onCreate",e=>{var t;e&&(null===(t=this.refEditor.current)||void 0===t||t.setIsCreating(!0))}),we(this,"onEditorCanceled",(e,t)=>{const a=this.refTree.current;var n;a&&t&&e?null===(n=a.deleteSelectedItems())||void 0===n||n.then(()=>{_e.a.bookmarks.remove(e),this.focusTree()}):this.focusTree()}),we(this,"onUpdateRow",e=>{this.setState({columns:e})}),we(this,"onSaveRow",()=>{Object(ve.b)(this.state.columns,"bookmarks")}),we(this,"getSelectedItem",()=>{var e;return null===(e=this.refTree.current)||void 0===e?void 0:e.getSelectedItem()}),we(this,"deleteItem",()=>{var e;null===(e=this.refTree.current)||void 0===e||e.deleteSelectedItems()}),we(this,"_updateThumbnails",()=>{var e;const t=[],a=null===(e=this.refTree.current)||void 0===e?void 0:e.getSelectedBookmarks();if(a)for(const e of me.b.iterateTrees(a,!0))me.b.isFolder(e)||t.push(e);ge.a.updateBookmarks(t)}),we(this,"onSearchChange",e=>{this.setState({filter:e.target.value})}),we(this,"createBookmark",()=>{var e;null===(e=this.refTree.current)||void 0===e||e.onAdd(!1)}),we(this,"createFolder",()=>{var e;null===(e=this.refTree.current)||void 0===e||e.onAdd(!0)}),we(this,"onContextMenu",e=>{var t,a;e.nativeEvent.buttons>0&&(null===(a=this.refTree.current)||void 0===a||a.unSelectAll());null===(t=this.refTree.current)||void 0===t||t.onContextMenu(e)})}UNSAFE_componentWillMount(){const e=R.a.get(Y.kBookmarksManagerSorting);this.onSortChange(e.sortOrder,e.sortField)}render(){return i.a.createElement("div",{className:"bookmark manager",__source:{fileName:Ce,lineNumber:218,columnNumber:7}},i.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:Ce,lineNumber:220,columnNumber:9}},i.a.createElement("input",{value:this.state.filter,onChange:this.onSearchChange,type:"search",tabIndex:"0",placeholder:Object(C.a)("verb","Search"),__source:{fileName:Ce,lineNumber:221,columnNumber:11}}),i.a.createElement("div",{className:"toolbar-group",__source:{fileName:Ce,lineNumber:228,columnNumber:11}},i.a.createElement(Ne.a,{onClick:this.createBookmark,image:Ee.h.medium,tooltip:Object(C.a)("New Bookmark"),__source:{fileName:Ce,lineNumber:229,columnNumber:13}}),i.a.createElement(Ne.a,{onClick:this.deleteItem,image:Ee.pd.medium,tooltip:Object(C.a)("other","Delete"),__source:{fileName:Ce,lineNumber:234,columnNumber:13}})),i.a.createElement(Ne.a,{onClick:this.createFolder,image:Ee.pb.medium,title:Object(C.a)("command","New Folder"),__source:{fileName:Ce,lineNumber:240,columnNumber:11}}),i.a.createElement("div",{className:"toolbar-group",style:{marginLeft:"auto"},__source:{fileName:Ce,lineNumber:246,columnNumber:11}},i.a.createElement(Ne.a,{onClick:this.importData,image:Ee.B.medium,title:Object(C.a)("Import..."),__source:{fileName:Ce,lineNumber:247,columnNumber:13}}),i.a.createElement(Ne.a,{onClick:this._updateThumbnails,image:Ee.lc.medium,title:Object(C.a)("Update Thumbnails"),__source:{fileName:Ce,lineNumber:252,columnNumber:13}}))),i.a.createElement("div",{className:"manager-content",__source:{fileName:Ce,lineNumber:260,columnNumber:9}},i.a.createElement("div",{className:"manager-treeview",__source:{fileName:Ce,lineNumber:261,columnNumber:11}},i.a.createElement(be.a,{fields:Oe,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:R.a.get(Y.kKeyboardTabToAll),__source:{fileName:Ce,lineNumber:263,columnNumber:13}}),i.a.createElement("div",{className:"vivaldi-tree-container",onContextMenu:this.onContextMenu,__source:{fileName:Ce,lineNumber:275,columnNumber:13}},i.a.createElement(he.a,{filter:this.state.filter,ref:this.refTree,fullView:!0,inManager:!0,onEdit:this.onSelect,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,columns:this.state.columns,__source:{fileName:Ce,lineNumber:278,columnNumber:15}}))),i.a.createElement(de.a,{ref:this.refEditor,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:Ce,lineNumber:292,columnNumber:11}})))}}var Se=ye,Te=a(1318),ke=a(91),Ae=a(784),Ie=a(311),De=a(111),Me=a(15),Pe=a.n(Me),xe=a(1865),Le=a(1870),je=a(1873),Re=a(1876),Be=a(1875),Fe=a(1866),Ue=a(1871),He=a(749),Ve="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryMoreInfo.jsx";function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ze extends i.a.PureComponent{constructor(...e){super(...e),We(this,"state",{externalMutations:void 0}),We(this,"getDiff",()=>{const{data:e}=this.props;if(e.length>2){const t=[e[0].id,e[e.length-1].id];return Pe()(t[0]).diff(Pe()(t[1]),"days")}return e.length}),We(this,"formatTick",(e,t)=>{let a;switch(!0){case t<6:a="H:00",0===Pe()(e).hour()&&(a="ddd D");break;case t<20:a="H:00",0===Pe()(e).hour()&&(a="ddd D"),1===Pe()(e).date()&&(a="MMM",0===Pe()(e).month()&&(a="MMM YYYY"));break;case t<80:a="ddd D",1===Pe()(e).date()&&(a="MMM D",0===Pe()(e).month()&&(a="MMM YYYY"));break;default:a="MMM",0===Pe()(e).month()&&(a="YYYY")}return Pe()(e).format(a)}),We(this,"formatTotalLabel",({datum:e},t)=>{if(!e)return null;const a=this.formatTick(new Date(Math.round(e.unixDate)),t);return e.visits<1?a:Object(C.a)("$1\nViews: $2\nPages: $3",[a,Math.round(e.visits),Math.round(e.pages)])}),We(this,"formatPieLabel",(e,t)=>{const a=e.slice.data;if(Number.isInteger(a.count)){const e=Object(He.a)(a.count/t*100,0);if(e>0)return`${a.print}\n${e} %`}}),We(this,"removeMutation",()=>{this.setState({externalMutations:void 0})}),We(this,"toggleLabel",(e,t)=>{this.setState({externalMutations:[{target:"labels",eventKey:"all",mutation:()=>({active:!1}),callback:()=>this.removeMutation()},{target:"data",eventKey:"all",mutation:()=>({style:void 0}),callback:()=>this.removeMutation()},{target:"labels",eventKey:String(e),mutation:()=>({active:t}),callback:()=>this.removeMutation()},{target:"data",eventKey:String(e),mutation:()=>t?{style:{opacity:.5,fill:this.props.groupedHistoryData.linkTypeColors[e],stroke:"var(--colorBg)",strokeWidth:2}}:{style:void 0},callback:()=>this.removeMutation()}]})})}render(){const{title:e,data:t,max:a,scaleY:n,groupedHistoryData:s,chartData:r}=this.props;if(0===Object.keys(s).length)return null;const o=0===t.length,{linkTypeColors:l,linkTypeTotal:c,linkTypes:u,combinedTopPages:m,pageCount:d,pageViewsCount:h,siteCount:p}=s,b=this.getDiff(),g=b<2,N={y:g?[0,a/2]:[0,a]},f={x:"time",y:n},_={duration:400,onLoad:{duration:0}},v=[l[0],l[3]];return i.a.createElement("div",{className:"manager-editor more-info",__source:{fileName:Ve,lineNumber:199,columnNumber:7}},i.a.createElement("div",{className:"header",__source:{fileName:Ve,lineNumber:200,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:Ve,lineNumber:201,columnNumber:11}},e)),i.a.createElement("div",{className:"moreinfo-stats",__source:{fileName:Ve,lineNumber:204,columnNumber:9}},i.a.createElement("h2",{__source:{fileName:Ve,lineNumber:205,columnNumber:11}},Object(C.a)("Browsing Activity")),i.a.createElement("div",{className:"moreinfo-activity",__source:{fileName:Ve,lineNumber:206,columnNumber:11}},!1===o&&i.a.createElement(xe.a,{containerComponent:i.a.createElement(Le.a,{mouseFollowTooltips:!0,voronoiDimension:"x",__source:{fileName:Ve,lineNumber:210,columnNumber:17}}),width:245,height:200,padding:{top:6,right:12,bottom:40,left:30},domain:N,scale:f,__source:{fileName:Ve,lineNumber:208,columnNumber:13}},i.a.createElement(je.a,{tickCount:g?13:void 0,tickFormat:e=>this.formatTick(e,b),standalone:!1,style:{axis:{stroke:"var(--colorFg)"},axisLabel:{fontSize:12,padding:20},grid:{stroke:"var(--colorFgAlpha)"},tickLabels:{angle:-45,textAnchor:"end",fontSize:11,padding:5,fontWeight:600,fontFamily:"inherit"}},__source:{fileName:Ve,lineNumber:221,columnNumber:15}}),i.a.createElement(je.a,{dependentAxis:!0,standalone:!1,style:{axis:{stroke:"var(--colorFg)"},axisLabel:{fontSize:12,padding:20},grid:{stroke:"var(--colorFgAlpha)"},ticks:{stroke:"var(--colorFg)"},tickLabels:{fontSize:11,padding:5,fontFamily:"inherit"}},__source:{fileName:Ve,lineNumber:235,columnNumber:15}}),i.a.createElement(Re.a,{animate:_,standalone:!0,responsive:!1,colorScale:v,style:{labels:{fontSize:13,padding:0,fontFamily:"inherit"}},labels:e=>this.formatTotalLabel(e,b),labelComponent:i.a.createElement(Be.a,{constrainToVisibleArea:!0,pointerLength:0,flyoutStyle:{stroke:"var(--colorBorder)",fill:"var(--colorBg)"},__source:{fileName:Ve,lineNumber:258,columnNumber:19}}),__source:{fileName:Ve,lineNumber:248,columnNumber:15}},i.a.createElement(Fe.a,{data:r,interpolation:"linear",standalone:!1,x:e=>Pe()(e.unixDate).toDate(),y:"pages",__source:{fileName:Ve,lineNumber:268,columnNumber:17}}),i.a.createElement(Fe.a,{data:r,interpolation:"linear",standalone:!1,x:e=>Pe()(e.unixDate).toDate(),y:e=>e.visits-e.pages,__source:{fileName:Ve,lineNumber:276,columnNumber:17}})))),i.a.createElement("ul",{className:"moreinfo-activity-labels",__source:{fileName:Ve,lineNumber:289,columnNumber:11}},i.a.createElement("li",{className:"visits",__source:{fileName:Ve,lineNumber:290,columnNumber:13}},i.a.createElement("span",{style:{backgroundColor:v[1]},__source:{fileName:Ve,lineNumber:291,columnNumber:15}}),Object(C.a)("Page Views: $1",[h])),i.a.createElement("li",{className:"pages",__source:{fileName:Ve,lineNumber:294,columnNumber:13}},i.a.createElement("span",{style:{backgroundColor:v[0]},__source:{fileName:Ve,lineNumber:295,columnNumber:15}}),Object(C.a)("Pages: $1",[d]))),i.a.createElement("h2",{__source:{fileName:Ve,lineNumber:300,columnNumber:11}},Object(C.a)("Link Transition Type")),i.a.createElement("div",{className:"moreinfo-link-types",__source:{fileName:Ve,lineNumber:301,columnNumber:11}},!1===o&&i.a.createElement(Ue.a,{externalEventMutations:this.state.externalMutations,data:u,x:"type",y:"count",width:160,height:160,innerRadius:40,padding:10,colorScale:l,animate:_,style:{labels:{fontSize:13,padding:0,fontFamily:"inherit"}},labels:e=>this.formatPieLabel(e,c),labelComponent:i.a.createElement(Be.a,{center:{x:80,y:80},pointerWidth:0,pointerLength:0,cornerRadius:0,flyoutStyle:{stroke:"none",fill:"transparent"},__source:{fileName:Ve,lineNumber:319,columnNumber:19}}),events:[{target:"data",eventHandlers:{onMouseEnter:()=>[{target:"labels",mutation:()=>({active:!0})},{target:"data",mutation:e=>({style:{...e.style,fill:l[e.index],opacity:.5,stroke:"var(--colorBg)",strokeWidth:2}})}],onMouseOut:()=>[{target:"labels",mutation:()=>({active:!1})},{target:"data",mutation:()=>({style:void 0})}]}}],__source:{fileName:Ve,lineNumber:303,columnNumber:15}}),!1===o&&i.a.createElement("ul",{className:"moreinfo-link-labels",__source:{fileName:Ve,lineNumber:359,columnNumber:15}},u.map((e,t)=>i.a.createElement("li",{key:e.type,onMouseEnter:()=>this.toggleLabel(t,!0),onMouseOut:()=>this.toggleLabel(t,!1),title:e.print.length>7?e.print:null,className:0===e.count?"disabled":null,__source:{fileName:Ve,lineNumber:362,columnNumber:21}},i.a.createElement("span",{style:{backgroundColor:e.color},__source:{fileName:Ve,lineNumber:368,columnNumber:23}}),e.print)))),i.a.createElement("h2",{__source:{fileName:Ve,lineNumber:377,columnNumber:11}},Object(C.a)("Top Domains of $1 Total",[p])),m.length>0&&i.a.createElement("ul",{className:"moreinfo-top-domains",__source:{fileName:Ve,lineNumber:379,columnNumber:13}},m.map((e,t)=>{if(t<5)return i.a.createElement("li",{key:"top_domain_"+t,onClick:this.props.onOpenDomain.bind(this,e.url),onContextMenu:this.props.onDomainContextMenu.bind(this,e.url),__source:{fileName:Ve,lineNumber:383,columnNumber:21}},i.a.createElement(De.a,{url:e.url,__source:{fileName:Ve,lineNumber:387,columnNumber:23}}),i.a.createElement("span",{className:"title link",__source:{fileName:Ve,lineNumber:388,columnNumber:23}},e.url?e.url:"localhost"),i.a.createElement("span",{className:"item-count",__source:{fileName:Ve,lineNumber:391,columnNumber:23}},e.visitCount))}))))}}var Ge=ze,Ke=a(828),Ye=a(829),$e=a(556),Xe=a(475),Ze=a(103),Qe=a(20),qe=a.n(Qe),Je=a(517),et=a(35);var tt=function(e,t){if(!e||0===e.length)return{combinedTopPages:[],linkTypes:[],linkTypeColors:[],linkTypeTotal:0,pageCount:0,pageViewsCount:0,siteCount:0};const a={},n={},i=et.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),s=F()(i).get("hsl.h"),r=F()(i).get("hsl.s"),o=F.a.scale([i,F()(i).set("hsl.h",s+50).desaturate(r),F()(i).set("hsl.h",s+130).desaturate(r),F()(i).set("hsl.h",s+180).desaturate(r),F()(i).set("hsl.h",s+230).desaturate(r),F()(i).set("hsl.h",s-50).desaturate(r)]).mode("lab").colors(6);let l=[{type:"auto_toplevel",count:0,color:o[0],print:Object(C.a)("linktype","Direct")},{type:"typed",count:0,color:o[1],print:Object(C.a)("linktype","Typed")},{type:"link",count:0,color:o[2],print:Object(C.a)("linktype","Link")},{type:"reload",count:0,color:o[3],print:Object(C.a)("linktype","Reload")},{type:"form_submit",count:0,color:o[4],print:Object(C.a)("linktype","Form")},{type:"other",count:0,color:o[5],print:Object(C.a)("linktype","Other")}],c=[];e.forEach(e=>{c=c.concat(t[e.id]?t[e.id].mostVisited:[]),l=e.children.map(e=>e.transition_type).reduce((e,t)=>{const a=e.find(e=>e.type===t);if(a)a.count=a.count+1;else{const t=e.find(e=>"other"===e.type);t&&(t.count=t.count+1)}return e},l)});const u=l.map(e=>e.color),m=l.reduce((e,t)=>e+t.count,0);e.forEach(e=>{e.children.forEach(e=>{a[e.address]=a[e.address]?e.visitCount+a[e.address]||0:e.visitCount,n[e.url]=n[e.url]?e.visitCount+n[e.url]||0:e.visitCount})});const d=Object.keys(n).length,h=Object.keys(a).length,p=Object.values(n).reduce((e,t)=>e+parseInt(t),0);return{linkTypeColors:u,linkTypeTotal:m,combinedTopPages:Object.keys(a).map(e=>({url:e,visitCount:a[e]})).sort((e,t)=>t.visitCount-e.visitCount),linkTypes:l,pageCount:d,pageViewsCount:p,siteCount:h}},at=a(605),nt=a(46),it=a(375),st=a(319),rt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryManager.jsx";function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const lt=[Y.kStartpageNavigation],ct=[{text:Object(C.a)("Date"),fullScreenTitle:Object(C.a)("Sort by visit time"),value:"visitTime",icon:Ee.y,width:100,visible:!0},{text:Object(C.a)("Title"),fullScreenTitle:Object(C.a)("Sort by page title"),value:"title",width:300,visible:!0,key:!0},{text:Object(C.a)("Address"),fullScreenTitle:Object(C.a)("Sort by page address"),value:"address",icon:Ee.w,width:300,visible:!0},{text:Object(C.a)("Views"),fullScreenTitle:Object(C.a)("Sort by number of page views"),value:"visitCount",icon:Ee.z,width:100,visible:!0}],ut=Object(it.extendMoment)(Pe.a);class mt extends i.a.PureComponent{constructor(...e){super(...e),ot(this,"state",{columns:Object(ve.e)().history||Object(ve.d)(ct)}),ot(this,"_locale",{weekdays:Ze.a.getWeekdays("long"),weekdaysShort:Ze.a.getWeekdays("short"),monthsShort:Ze.a.getMonths("short"),weekStartsOn:ut.localeData().firstDayOfWeek()}),ot(this,"_selecting",!1),ot(this,"_selectionHighlight",!1),ot(this,"_anchorDate",ut()),ot(this,"_shortDayFormat",Ze.a.getWeekdayFormat(Ze.a.getShortDateFormat())),ot(this,"_searchHasFocus",!1),ot(this,"_tree",null),ot(this,"_saveStateByFilter",(e,t)=>{const a={displayMode:t.displayMode,startTime:t.startTime.valueOf(),endTime:t.endTime.valueOf(),dayPickerVisible:t.dayPickerVisible,moreInfoVisible:t.moreInfoVisible,monthEntriesVisible:t.monthEntriesVisible};V.a.setHistoryManagerState(e,a),Ie.a.saveStateFromSearchQuery(e,t)}),ot(this,"_setRange",(e,t,a=null,n=!1)=>{const{historyFilter:i}=this.props,s=ut.range(ut(e).startOf("day"),ut(t).endOf("day")),r=i.merge({startTime:s.start,endTime:s.end,displayMode:a||i.displayMode,range:s});this._selectionHighlight=n,this.onSearch(r)}),ot(this,"_setDayPickRange",(e,t)=>{const{historyFilter:a}=this.props,n=ut.range(a.startTime,a.endTime),i=ut.range(ut(e).startOf("day"),ut(t).endOf("day"));if(ut(e).within(n)&&ut(t).within(n)){const e=a.merge({range:i});this.onSearch(e),this._selectionHighlight=!0}else if(i.overlaps(n)){const e=i.add(n);this._setRange(e.start,e.end,null,!1)}else this._setRange(ut(t).startOf(a.displayMode),ut(t).endOf(a.displayMode),null,!1)}),ot(this,"toggleDayPicker",()=>{const e="dayPickerVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)}),ot(this,"toggleMoreInfo",()=>{const e="moreInfoVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)}),ot(this,"_setView",e=>{const t=e.target.value,a=this.props.historyFilter,n=a.merge({[t]:!a[t]});this.onSearch(n)}),ot(this,"onSortChange",(e,t)=>{const{historyFilter:a}=this.props,n=a.merge({sortOrder:e,sortField:t});this.onSearch(n)}),ot(this,"onUpdateRow",e=>{this.setState({columns:e})}),ot(this,"onSaveRow",()=>{Object(ve.b)(this.state.columns,"history")}),ot(this,"onSelectAll",()=>{const e=ut(),t=this.props.oldestHistoryDate,a=this.props.historyFilter.merge({startTime:t.toDate(),endTime:e.endOf("day").toDate()});this.onSearch(a),this._setRange(t,e.endOf("day"),"range",!1)}),ot(this,"onIncludeUrlChange",()=>{const e=!this.props.historyFilter.searchURL,t=this.props.historyFilter.merge({searchURL:e});this.onSearch(t)}),ot(this,"onClearBrowsingData",()=>{pe.a.showClearBrowsingHistoryDialog({})}),ot(this,"onCalendarSelect",(e,t)=>{if(!0===this._selecting)return void(this._selecting=!1);const a=t?t.nativeEvent?t.nativeEvent.shiftKey:t.shiftKey:0,n=ut(e);if(a){const e=this.expandRange(n);this._setRange(e.start,e.end)}else ut(e).within(this.props.historyFilter.range)||(this._selectionHighlight=!0,this._anchorDate=n,this._setRange(n,n,null,!0))}),ot(this,"expandRange",e=>{const t=this.props.historyFilter.range,a=ut.range(e,e);return t.contains(a)?t:e.unix()>t.start.unix()?ut.range(t.start,a.end.endOf("day")):ut.range(a.start.startOf("day"),t.end)}),ot(this,"handleMouseDown",(e,t)=>{const a=t.nativeEvent?t.nativeEvent.button:t.button,n=(t.nativeEvent?t.nativeEvent.ctrlKey:t.ctrlKey,t.nativeEvent?t.nativeEvent.shiftKey:t.shiftKey);if(a&&0!==a)return;const i=ut(e);let s;n?(s=this.expandRange(i),this._setDayPickRange(s.start,s.end)):this._setDayPickRange(i,i),this._selecting=!0,this._anchorDate=ut(e)}),ot(this,"handleMouseUp",(e,t)=>{this._selecting&&this.props.historyFilter.range&&(this._selecting=!1)}),ot(this,"handleMouseEnter",(e,t)=>{if(!this._selecting||!this.props.historyFilter.range)return;const a=this.expandRange(ut(e));this._setDayPickRange(a.start,a.end)}),ot(this,"onSearch",e=>{const t=this.props.pageId;if(t){const a=this.props.historyFilter.merge(e);this._saveStateByFilter(t,a),Ie.a.searchHistory(t,a)}}),ot(this,"onSearchDomain",e=>{e=Object(Je.a)(e);const{historyFilter:t}=this.props,a=Object(at.a)(e),n=t.merge({text:e,parsedFilter:a,searchURL:!0});this.onSearch(n)}),ot(this,"onOpenDomain",e=>{V.a.openURL(Object(nt.c)(e))}),ot(this,"handleDisplayModeChange",(e="day")=>{if("range"===e)this._anchorDate=ut(),this._setRange(this.props.oldestHistoryDate,ut(),e,!1);else{const t=this._anchorDate||ut();this._setRange(ut(t).startOf(e),ut(t).endOf(e),e,!1)}}),ot(this,"restoreSelection",()=>{this._selectionHighlight=!1;const{displayMode:e}=this.props.historyFilter;this.handleDisplayModeChange(e)}),ot(this,"viewCurrent",()=>{const{displayMode:e}=this.props.historyFilter;this._setRange(ut().startOf(e),ut().endOf(e))}),ot(this,"viewPrevious",e=>{const{startTime:t,displayMode:a}=this.props.historyFilter,n="range"===a?"day":a,i=ut(t).subtract(1,n).startOf(n),s=ut(i).endOf(n);this._setRange(i,s)}),ot(this,"viewNext",()=>{const{startTime:e,displayMode:t}=this.props.historyFilter,a="range"===t?"day":t,n=ut(e).add(1,a).startOf(a),i=ut(n).endOf(a);this._setRange(n,i)}),ot(this,"getNumWeeksForMonth",(e,t)=>{let a=new Date(e,t-1,1).getDay()-this._locale.weekStartsOn;a<0&&(a+=7);const n=new Date(e,t,0).getDate();return Math.ceil((n+a)/7)}),ot(this,"getDomainMenuItems",e=>[{handler:()=>this.onSearchDomain(e),...Object(p.a)("Filter by “$1”",[e])},{handler:()=>this.onOpenDomain(e),...Object(p.a)("Go to “$1”",[e])}]),ot(this,"onDomainContextMenu",(e,t)=>{Object(h.a)(this.context.vivaldiWindowId,this.getDomainMenuItems(e))(t)}),ot(this,"getActivityLevel",(e,t,a)=>e>=t-t/10?"max":e>=a&&e<t-t/10?"high":e>=a/2&&e<a?"mid":e>0&&e<a/2?"low":"min"),ot(this,"renderMonthDay",(e,t,a,n,s)=>{s=ut(s);const{historyStatistics:r,historyFilter:o}=this.props,l=r[Object(Ze.c)(s)];if(!l)return i.a.createElement("div",{className:s.within(o.range)?"selected":null,__source:{fileName:rt,lineNumber:492,columnNumber:9}},i.a.createElement("span",{className:"Cal__Day__day",__source:{fileName:rt,lineNumber:493,columnNumber:11}},s.date()));const c=r[Object(Ze.c)(s)].visits||0,u=this.getActivityLevel(c,e,t),m=Math.max(Math.floor((a-72)/15),1);let d=[];o.text.length>0?d=l.mostVisited.map(e=>e.url):(d=l.mostVisited.map(e=>Object(Je.a)(e.url)),d=Object(st.a)(d));const h=d.map((e,t)=>{if(t<m)return i.a.createElement("li",{title:e,key:s.unix()+"_"+t,onContextMenu:this.onDomainContextMenu.bind(this,e),__source:{fileName:rt,lineNumber:522,columnNumber:11}},e)});return(i.a.createElement("div",{className:s.within(o.range)?"selected":null,__source:{fileName:rt,lineNumber:532,columnNumber:7}},i.a.createElement("span",{className:"Cal__Day__day",__source:{fileName:rt,lineNumber:533,columnNumber:9}},s.date()),i.a.createElement("h4",{className:qe()({heat:!0,[`${u}`]:!0}),__source:{fileName:rt,lineNumber:534,columnNumber:9}},i.a.createElement("span",{className:"visits",__source:{fileName:rt,lineNumber:538,columnNumber:11}},i.a.createElement("strong",{__source:{fileName:rt,lineNumber:539,columnNumber:13}},l.visits),Object(C.a)("view","views",[l.visits])),i.a.createElement("span",{className:"pages",__source:{fileName:rt,lineNumber:542,columnNumber:11}},i.a.createElement("strong",{__source:{fileName:rt,lineNumber:543,columnNumber:13}},l.pages),Object(C.a)("page","pages",[l.pages]))),i.a.createElement("ul",{className:"top-links",__source:{fileName:rt,lineNumber:548,columnNumber:9}},h)))}),ot(this,"renderCalWeek",()=>{const{historyItems:e,historyFilter:t}=this.props,{range:a}=this.props.historyFilter;let n=Array.from(a.by("days"));if(ut(n[0]).day()!==this._locale.weekStartsOn||n.length<7){const e=ut(n[0]).startOf("week"),t=ut(n[0]).endOf("week");n=Array.from(ut.range(e,t).by("days"))}else n.length>7&&(n=n.slice(0,6));return(i.a.createElement("div",{className:"week-container",__source:{fileName:rt,lineNumber:570,columnNumber:7}},n.map(n=>{const s=ut(n).within(a),r=e.find(e=>e.id===Object(Ze.c)(n)),o=ut(n).within(ut.range(this.props.oldestHistoryDate,ut()));return i.a.createElement("div",{className:"week-day",key:"week_"+Object(Ze.c)(n),__source:{fileName:rt,lineNumber:580,columnNumber:13}},i.a.createElement("header",{onClick:o?this._setDayPickRange.bind(this,n,n):null,className:qe()({selected:s,disabled:!o}),__source:{fileName:rt,lineNumber:581,columnNumber:15}},n.format(this._shortDayFormat)),i.a.createElement("div",{className:"tree",__source:{fileName:rt,lineNumber:590,columnNumber:15}},r&&i.a.createElement($e.a,{key:"week_"+n.id,ref:e=>this._tree=e,fullView:!1,inManager:!0,nodes:r.children,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:rt,lineNumber:592,columnNumber:17}})))})))}),ot(this,"renderCalDay",(e,t,a)=>{a=ut(a);const{historyStatistics:n,historyFilter:s}=this.props,r=ut(this.props.oldestHistoryDate).within(s.range)&&ut().within(s.range);let o,l="min";return n[Object(Ze.c)(a)]?(o=n[Object(Ze.c)(a)].visits||0,l=this.getActivityLevel(o,e,t)):o=0,i.a.createElement("span",{title:Object(C.a)("$1 visit","$1 visits",[o]),className:qe()({heat:!0,selected:!r&&a.within(s.range),[`${l}`]:!0}),key:a.unix()+"_"+a,__source:{fileName:rt,lineNumber:626,columnNumber:7}})}),ot(this,"padStats",e=>{const{historyStatistics:t,historyFilter:a,historyItems:n}=this.props;let i=e.start.clone(),s=e.end.clone();n.length===e.duration("days")&&(i=i.startOf(a.displayMode),s=s.endOf(a.displayMode));const r=ut.range(i,s),o=new Map;for(const[e,a]of Object.entries(t)){const t=ut(e,"YYYY-MM-DD");t.within(r)&&o.set(e,{hour:0,pages:a&&"number"==typeof a.pages?a.pages:0,visits:a&&"number"==typeof a.visits?a.visits:0,unixDate:t.valueOf()})}for(;i.diff(s)<=0;){const e=Object(Ze.c)(i);o.has(e)||o.set(e,{hour:0,pages:0,visits:0,unixDate:i.valueOf()}),i.add(1,"d")}return[...o.values()].sort((e,t)=>e.unixDate>t.unixDate?1:t.unixDate>e.unixDate?-1:0)})}componentDidMount(){Ie.a.loadAll()}render(){const{historyFilter:e,historyStatistics:t}=this.props,a=e.range,n=this.props.historyItems.filter(e=>e.id>=Object(Ze.c)(a.start)&&e.id<=Object(Ze.c)(a.end));let s=[];if(!n||"number"!=typeof this.props.maxHeight)return null;const r=e.text.length>1||e.moreInfoVisible?tt(n,t):{combinedTopPages:[],linkTypeColors:[],linkTypeTotal:0,linkTypes:[],pageCount:0,pageViewsCount:0,siteCount:0};e.moreInfoVisible&&(s=Object.keys(t).length>0&&1===n.length&&n[0].id&&t[n[0].id]?t[n[0].id].timeArr:this.padStats(a));const o=ut(e.startTime),l=this.getNumWeeksForMonth(o.year(),o.month()+1),c=Object(Ze.c)(a.start)===Object(Ze.c)(ut(this.props.oldestHistoryDate))&&Object(Ze.c)(a.end)===Object(Ze.c)(ut());let u,m,d,h=[],p="";switch(n.length>1&&(h=[ut(n[0].visitTime).format("l"),ut(n[n.length-1].visitTime).format("l")],p="visitTime"===e.sortField&&2===e.sortOrder?h[0]+" – "+h[1]:h[1]+" – "+h[0]),u="month"===e.displayMode?Object(C.a)("$1 $2",[ut(o).format("MMMM"),ut(o).format("YYYY")]):"week"===e.displayMode?Object(C.a)("Week $1, $2",[ut(o).week(),ut(o).year()]):n.length>1?p:ut(e.startTime).format("LL"),m=n.length>1?p:1===n.length?ut(n[0].visitTime).format("LL"):ut(e.startTime).format("LL"),e.displayMode){case"month":d=Object(C.a)("This Month");break;case"week":d=Object(C.a)("This Week");break;default:d=Object(C.a)("Today")}const b=ut(Object.keys(t).sort()[0]).startOf("month"),g=ut(),N=ut(this.props.oldestHistoryDate).isBefore(g.subtract(2,"m"))?ut(this.props.oldestHistoryDate):g.subtract(2,"m"),f=Object.keys(t).map(e=>t[e].visits),_=Math.max(Math.max.apply(Math,f),10);f.sort((e,t)=>e-t);const v=(f[Math.floor((f.length-1)/2)]+f[Math.ceil((f.length-1)/2)])/2,E="on"===this.props.prefValues[Y.kStartpageNavigation]?51:0,w=e.text.length>1?40:0,O=this.props.maxHeight-(E+w+40+21),y=O/l;return i.a.createElement("div",{className:"history manager",__source:{fileName:rt,lineNumber:809,columnNumber:7}},i.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:rt,lineNumber:810,columnNumber:9}},i.a.createElement(Ne.a,{onClick:this.toggleDayPicker,tooltip:Object(C.a)("Day picker calendar"),isPressed:e.dayPickerVisible,image:Ee.Cd,__source:{fileName:rt,lineNumber:811,columnNumber:11}}),i.a.createElement(Ke.a,{ref:"searchField",search:this.onSearch,onFocus:()=>{this._searchHasFocus=!0},onBlur:()=>{this._searchHasFocus=!1},historyFilter:e,minDate:this.props.oldestHistoryDate,__source:{fileName:rt,lineNumber:818,columnNumber:11}}),i.a.createElement("h1",{onClick:this.restoreSelection,style:{marginLeft:"auto",marginRight:"auto",flexShrink:5},__source:{fileName:rt,lineNumber:826,columnNumber:11}},u),i.a.createElement(Ne.a,{onClick:this.viewCurrent,title:d,__source:{fileName:rt,lineNumber:837,columnNumber:11}}),i.a.createElement("div",{className:"toolbar-group",__source:{fileName:rt,lineNumber:842,columnNumber:11}},i.a.createElement(Ne.a,{onClick:this.viewPrevious.bind(this,b),tooltip:Object(C.a)("Previous"),className:"button-narrow",disabled:ut(this.props.oldestHistoryDate).within(a),image:Ee.hc.medium,__source:{fileName:rt,lineNumber:843,columnNumber:13}}),i.a.createElement(Ne.a,{onClick:this.viewNext,className:"button-narrow",tooltip:Object(C.a)("Next"),disabled:g.within(a),image:Ee.jc.medium,__source:{fileName:rt,lineNumber:850,columnNumber:13}})),i.a.createElement("div",{className:"toolbar-group",__source:{fileName:rt,lineNumber:859,columnNumber:11}},i.a.createElement(Ne.a,{title:Object(C.a)("List"),isPressed:"range"===e.displayMode,onClick:()=>this.handleDisplayModeChange("range"),__source:{fileName:rt,lineNumber:860,columnNumber:13}}),i.a.createElement(Ne.a,{title:Object(C.a)("Day"),isPressed:"day"===e.displayMode,onClick:()=>this.handleDisplayModeChange("day"),__source:{fileName:rt,lineNumber:865,columnNumber:13}}),i.a.createElement(Ne.a,{title:Object(C.a)("Week"),isPressed:"week"===e.displayMode,onClick:()=>this.handleDisplayModeChange("week"),__source:{fileName:rt,lineNumber:870,columnNumber:13}}),i.a.createElement(Ne.a,{title:Object(C.a)("Month"),isPressed:"month"===e.displayMode,onClick:()=>this.handleDisplayModeChange("month"),__source:{fileName:rt,lineNumber:875,columnNumber:13}})),i.a.createElement(Ne.a,{onClick:this.onClearBrowsingData,tooltip:Object(C.a)("title","Clear browsing data"),image:Ee.V.medium,__source:{fileName:rt,lineNumber:882,columnNumber:11}}),i.a.createElement(Ne.a,{onClick:this.toggleMoreInfo,tooltip:e.moreInfoVisible?Object(C.a)("Hide info"):Object(C.a)("More info"),image:Ee.Ed,isPressed:e.moreInfoVisible,__source:{fileName:rt,lineNumber:887,columnNumber:11}})),e.text.length>1&&i.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium search-options",__source:{fileName:rt,lineNumber:897,columnNumber:11}},i.a.createElement(Ne.a,{onClick:this.onSelectAll,title:Object(C.a)("Search All History"),disabled:c,__source:{fileName:rt,lineNumber:898,columnNumber:13}}),i.a.createElement("label",{__source:{fileName:rt,lineNumber:903,columnNumber:13}},i.a.createElement("input",{type:"checkbox",checked:e.searchURL,onChange:this.onIncludeUrlChange,__source:{fileName:rt,lineNumber:904,columnNumber:15}}),Object(C.a)("Include Address in Search Results")),i.a.createElement("div",{className:"filtered-entries",__source:{fileName:rt,lineNumber:909,columnNumber:13}},Object(C.a)("$1 Entry","$1 Entries",[r.pageViewsCount]))),i.a.createElement("div",{className:qe()({"history-view":!0,selecting:this._selectionHighlight}),__source:{fileName:rt,lineNumber:915,columnNumber:9}},e.dayPickerVisible&&i.a.createElement("div",{className:"manager-editor",__source:{fileName:rt,lineNumber:920,columnNumber:13}},i.a.createElement("div",{className:"timeline",onMouseLeave:this.handleMouseUp,__source:{fileName:rt,lineNumber:921,columnNumber:15}},i.a.createElement(Xe.b,{Component:Object(Xe.c)(Object(Xe.d)(Xe.a)),width:270,height:O,rowHeight:50,selected:a.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,min:b.toDate(),max:g.toDate(),minDate:N.toDate(),maxDate:g.toDate(),displayOptions:{showHeader:!1,showOverlay:!0,showTodayHelper:!1,overscanMonthCount:6},locale:this._locale,autoFocus:!1,tabIndex:0,renderMonthDay:this.renderCalDay.bind(this,_,v),__source:{fileName:rt,lineNumber:922,columnNumber:17}}))),i.a.createElement("div",{className:"manager-content history-calendar-container",__source:{fileName:rt,lineNumber:951,columnNumber:11}},"range"===e.displayMode&&i.a.createElement("div",{className:"view range",__source:{fileName:rt,lineNumber:954,columnNumber:13}},i.a.createElement(be.a,{fields:ct,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:rt,lineNumber:955,columnNumber:15}}),n.length>0?i.a.createElement("div",{className:"history-tree",__source:{fileName:rt,lineNumber:969,columnNumber:19}},i.a.createElement($e.a,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:n,onSearchDomain:this.onSearchDomain,historyFilter:e,__source:{fileName:rt,lineNumber:970,columnNumber:21}})):i.a.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:rt,lineNumber:979,columnNumber:19}},Object(C.a)("No browsing history data for selected period."))),"day"===e.displayMode&&i.a.createElement("div",{className:"view day",__source:{fileName:rt,lineNumber:987,columnNumber:13}},i.a.createElement(be.a,{fields:ct,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:rt,lineNumber:988,columnNumber:15}}),n.length>0?i.a.createElement("div",{className:"history-tree",__source:{fileName:rt,lineNumber:1002,columnNumber:19}},i.a.createElement($e.a,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:n,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:rt,lineNumber:1003,columnNumber:21}})):i.a.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:rt,lineNumber:1012,columnNumber:19}},Object(C.a)("No browsing history data for selected period."))),"week"===e.displayMode&&i.a.createElement("div",{className:"view week",__source:{fileName:rt,lineNumber:1020,columnNumber:13}},this.renderCalWeek()),"month"===e.displayMode&&i.a.createElement("div",{className:"view month",__source:{fileName:rt,lineNumber:1026,columnNumber:13}},i.a.createElement("div",{className:"month-calendar",__source:{fileName:rt,lineNumber:1027,columnNumber:15}},i.a.createElement(Xe.b,{Component:Object(Xe.c)(Object(Xe.d)(Xe.a)),width:"100%",height:O,rowHeight:y>100?y:100,selected:a.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,longWeekdays:!0,min:ut(o.startOf("month")).toDate(),max:ut(o.endOf("month")).toDate(),minDate:ut(o.startOf("month")).toDate(),maxDate:ut(o.endOf("month")).toDate(),displayOptions:{showHeader:!1,showOverlay:!1,showTodayHelper:!1,overscanMonthCount:0},locale:this._locale,autoFocus:!this._searchHasFocus,tabIndex:0,renderMonthDay:this.renderMonthDay.bind(this,_,v,y,Math.floor(this.props.maxWidth/7)),__source:{fileName:rt,lineNumber:1028,columnNumber:17}})),e.monthEntriesVisible&&i.a.createElement("div",{className:"month-links",__source:{fileName:rt,lineNumber:1058,columnNumber:17}},i.a.createElement("ul",{className:"Cal__Weekdays__root",__source:{fileName:rt,lineNumber:1059,columnNumber:19}},i.a.createElement("li",{className:"Cal__Weekdays__day",__source:{fileName:rt,lineNumber:1060,columnNumber:21}},Object(C.a)("Entries"))),i.a.createElement($e.a,{ref:"tree",fullView:!1,inManager:!0,nodes:n,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:rt,lineNumber:1064,columnNumber:19}})),i.a.createElement("button",{className:"toggle-month-entries",title:e.monthEntriesVisible?Object(C.a)("Hide entries"):Object(C.a)("Show entries"),onClick:this._setView,value:"monthEntriesVisible",tabIndex:this.props.keyAccess,__source:{fileName:rt,lineNumber:1074,columnNumber:15}},e.monthEntriesVisible?">":"<"))),e.moreInfoVisible&&i.a.createElement(Ge,{title:m,data:n,groupedHistoryData:r,onOpenDomain:this.onOpenDomain,chartData:s,max:_,scaleY:"sqrt",onDomainContextMenu:this.onDomainContextMenu,__source:{fileName:rt,lineNumber:1089,columnNumber:11}})))}}ot(mt,"contextType",d.a);var dt=Object(H.a)(Object(Ye.a)(mt),lt),ht=a(85),pt=a(1342),bt=a(272),gt=a(271),Nt=a(17),ft=a(97),_t="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialSuggestSection.jsx";function vt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Et extends i.a.Component{constructor(e){super(e),vt(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),vt(this,"mouseBlockHandler",e=>{e.preventDefault()}),vt(this,"moveFocus",(e,t,a)=>{const n=ie.a.findDOMNode(this);if(n instanceof HTMLElement&&(!0===a||Object(ft.a)(n))){const a=Array.from(n.querySelectorAll("button.dial")),i=a.map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===i.length||i.length!==a.length)return!1;let s,r=0,o=-1;switch(a.forEach(e=>{const t=e.getBoundingClientRect();o<t.left&&(r++,o=t.left)}),t){case"current":if(""===e||"first"===e?e=i[0]:"last"===e&&(e=i[0===this.props.keyAccess?i.length-1:0]),s=i.indexOf(e),-1===s)return!1;break;case"left":case"right":if(1===i.length)return!1;if(s=i.indexOf(e),-1===s)return!1;if("right"===t){if((s+1)%r==0)return!1;if(s+=1,s>=i.length)return!1}else{if(s%r==0)return!1;if(s-=1,s>=i.length)return!1}break;case"up":case"down":if(1===i.length)return!1;if(s=i.indexOf(e),-1===s)return!1;if("up"===t){if(s-=r,s<0)return!1}else if(s+=r,s>=i.length)return!1;break;default:return!1}e=i[s];const l=n.querySelector(`button.dial[data-id="${e}"]`);if(l)return l.focus(),!0}return!1}),vt(this,"closeDrawer",()=>{this.props.onSpeedDialDrawerDone()}),this.state={suggestions:[]}}componentDidMount(){this.updateSuggestions()}updateSuggestions(){if(!Nt.a.isIncognitoOrGuest(this.context.vivaldiWindowId)){const e=me.b.getSpeeddialFolders()[0].children,t=[];e.forEach(e=>{e.url?t.push(e.url):e.children.forEach(e=>{t.push(e.url)})}),_e.a.topSites.get(e=>{const a=e.filter(e=>!t.includes(e.url));this.setState({suggestions:a})})}}addSpeedDial(e,t){if(this.props.node){const a={parentId:this.props.node.id,title:e,url:Object(nt.c)(t)};this.props.onSpeedDialDrawerDone(a)}else this.props.onSpeedDialDrawerDone()}render(){const e=2*Math.floor((this.props.width-36)/90),t=Nt.a.isIncognito(this.context.vivaldiWindowId),{suggestions:a}=this.state;return i.a.createElement("section",{className:"drawer-suggestions",__source:{fileName:_t,lineNumber:228,columnNumber:7}},i.a.createElement("header",{__source:{fileName:_t,lineNumber:230,columnNumber:9}},i.a.createElement("h2",{__source:{fileName:_t,lineNumber:231,columnNumber:11}},Object(C.a)("Suggestions")),i.a.createElement("button",{className:"close",tabIndex:"-1",dangerouslySetInnerHTML:{__html:Ee.Nd},onClick:this.closeDrawer,__source:{fileName:_t,lineNumber:232,columnNumber:11}})),t&&i.a.createElement("p",{__source:{fileName:_t,lineNumber:239,columnNumber:11}},Object(C.a)("Suggestions are not available in private window.")),!t&&i.a.createElement("div",{className:"dials dial-suggestions",style:a.length>0?{display:"grid",gridTemplateColumns:"repeat(auto-fit, 90px)",gridTemplateRows:"repeat(2, 64px)"}:null,__source:{fileName:_t,lineNumber:242,columnNumber:11}},a.length>0?a.slice(0,e).map((e,t)=>{const a=t.toString();return(i.a.createElement("button",{key:t,className:"dial",tabIndex:0===t?"0":this.props.keyAccess,"data-id":a,title:e.title+"\n"+e.url,onMouseDown:this.mouseBlockHandler,onMouseUp:this.mouseBlockHandler,onKeyDown:this.keyDownHandler.bind(this,a),onClick:this.addSpeedDial.bind(this,e.title,e.url),"data-dialurl":e.url,__source:{fileName:_t,lineNumber:253,columnNumber:19}},i.a.createElement("div",{className:"dial-image suggest-thumbnail-image",__source:{fileName:_t,lineNumber:263,columnNumber:21}},i.a.createElement(De.a,{url:e.url,size:32,__source:{fileName:_t,lineNumber:264,columnNumber:23}})),i.a.createElement("div",{className:"dial-title",__source:{fileName:_t,lineNumber:266,columnNumber:21}},e.title)))}):i.a.createElement("p",{__source:{fileName:_t,lineNumber:270,columnNumber:17}},Object(C.a)("No history to choose from yet."))))}}vt(Et,"contextType",d.a);var Ct=Et,wt=a(377),Ot=a(114),yt=a(108),St="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialDrawer.jsx";function Tt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kt(e){const t=e.trim();return!!Object(nt.o)(Object(nt.c)(t))||!Object(nt.g)(t)}class At extends i.a.Component{constructor(e){super(e),Tt(this,"_onUrlbarStoreChanged",()=>{const{isActive:e,isOmniDropdownOpen:t,selectionEnd:a,selectionStart:n,...i}=yt.a.getUrlfieldStateFromId("speed_Dial_Drawer");this.setState(i)}),Tt(this,"addSpeedDialFolder",()=>{if(this.props.node){const e={parentId:this.props.node.id,title:Object(C.a)("title","New Folder")};this.props.onSpeedDialDrawerDone(e)}}),Tt(this,"drawerSubmitHandler",e=>{e.stopPropagation(),e.preventDefault();let t=(this.state.autocompleteValue||this.state.editUrl||"").trim();if(0===t.length)return;t=Object(nt.c)(t);const a=t;this.addSpeedDial(a,t)}),Tt(this,"onUrlFieldChanged",()=>{const e=this.state.autocompleteValue||this.state.editUrl||"";this.setState({isSpeedDialURLValid:kt(e)})}),Tt(this,"focusUrlField",()=>{this.refs.urlField.focus()}),this.state={addSpeedDialTitle:"",editUrl:"",autocompleteValue:"",isSpeedDialURLValid:!1}}componentDidMount(){yt.a.addChangeListener(this._onUrlbarStoreChanged)}componentWillUnmount(){yt.a.removeChangeListener(this._onUrlbarStoreChanged)}addSpeedDial(e,t){if(this.props.node&&this.props.node.id){const a={parentId:this.props.node.id,title:e,url:Object(nt.c)(t),thumbnail:void 0};Ot.a.clearUrlfieldState("speed_Dial_Drawer"),this.props.onSpeedDialDrawerDone(a)}}render(){return i.a.createElement(gt.a,{focusName:"focus-startpage-drawer",forceTrap:!0,style:{display:"contents"},__source:{fileName:St,lineNumber:124,columnNumber:7}},i.a.createElement("aside",{key:"drawer",className:"startpage-drawer",__source:{fileName:St,lineNumber:128,columnNumber:9}},i.a.createElement("section",{className:"drawer-adddial",style:{width:400},__source:{fileName:St,lineNumber:129,columnNumber:11}},i.a.createElement("header",{__source:{fileName:St,lineNumber:131,columnNumber:13}},i.a.createElement("h2",{__source:{fileName:St,lineNumber:132,columnNumber:15}},Object(C.a)("Add Bookmark to Speed Dial"))),i.a.createElement("form",{className:"drawer-addform",onSubmit:this.drawerSubmitHandler,__source:{fileName:St,lineNumber:134,columnNumber:13}},i.a.createElement(wt.a,{ref:"urlField",pageId:"speed_Dial_Drawer",autoFocus:!0,autocompletionEnabled:!0,className:"address",displayUrl:"",editUrl:this.state.editUrl||"",onChange:this.onUrlFieldChanged,handleDrop:!0,title:Object(C.a)("Enter page address"),placeholder:"https://vivaldi.com",__source:{fileName:St,lineNumber:136,columnNumber:15}}),i.a.createElement("input",{className:"add-dial-submit primary",type:"submit",disabled:!this.state.isSpeedDialURLValid,value:Object(C.a)("Add"),__source:{fileName:St,lineNumber:147,columnNumber:17}})),i.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:St,lineNumber:153,columnNumber:13}},i.a.createElement(Ne.a,{tabIndex:0,onClick:this.addSpeedDialFolder,image:Ee.pb.medium,title:Object(C.a)("command","New Folder"),__source:{fileName:St,lineNumber:154,columnNumber:15}}))),i.a.createElement(Ct,{width:this.props.maxWidth-400,onSpeedDialDrawerDone:this.props.onSpeedDialDrawerDone,onHandoverFocus:this.focusUrlField,keyAccess:this.props.keyAccess,node:this.props.node,__source:{fileName:St,lineNumber:162,columnNumber:11}})))}}var It=At,Dt=a(1392),Mt=a(589),Pt=a(1346),xt=a(74),Lt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialAddButton.jsx";function jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Rt=[Y.kStartpageSpeedDialFaviconVisible,Y.kStartpageSpeedDialTitlesVisible];class Bt extends i.a.Component{constructor(...e){super(...e),jt(this,"_hasClipboardListener",!1),jt(this,"_enableClipboardListener",e=>{if(this._hasClipboardListener!==e){this._hasClipboardListener=e,this.props.onSetClipboardListener(this._hasClipboardListener);const{document:t}=this.context;this._hasClipboardListener?t.addEventListener("paste",this.onPaste):t.removeEventListener("paste",this.onPaste)}}),jt(this,"onPaste",e=>{this.props.onPaste(e)}),jt(this,"keyDownHandler",e=>{if(" "===e.key||"Enter"===e.key)this.props.addItem();else switch(e.key){case"ArrowLeft":this.props.moveFocus("add","left",!1);break;case"ArrowRight":this.props.moveFocus("add","right",!1);break;case"ArrowUp":this.props.moveFocus("add","up",!1);break;case"ArrowDown":this.props.moveFocus("add","down",!1);break;default:return}e.preventDefault(),e.stopPropagation()}),jt(this,"_handleItemMouseDown",e=>{e.button!==xt.a.kLeft&&e.preventDefault()})}componentWillUnmount(){this._enableClipboardListener(!1)}render(){const{prefValues:e}=this.props,t=e[Y.kStartpageSpeedDialFaviconVisible],a=qe()("dial","add",{active:this.props.drawerIsOpen,"SpeedDial-Dial--Favicon":t,"SpeedDial-Dial--Title":"never"!==e[Y.kStartpageSpeedDialTitlesVisible]}),n=t?{}:{textAlign:"center"};return i.a.createElement("div",{className:a,"data-id":"add",style:this.props.style,onBlur:()=>this._enableClipboardListener(!1),onFocus:()=>this._enableClipboardListener(!0),onMouseDown:this._handleItemMouseDown,tabIndex:this.props.keyAccess,onKeyDown:this.keyDownHandler,__source:{fileName:Lt,lineNumber:116,columnNumber:7}},i.a.createElement("button",{ref:"openAddSpeedDial",className:"thumbnail-image",title:this.props.title,style:{height:this.props.thumbnailHeight},tabIndex:this.props.keyAccess,onClick:this.props.addItem,dangerouslySetInnerHTML:{__html:Ee.xd},__source:{fileName:Lt,lineNumber:125,columnNumber:9}}),i.a.createElement("div",{className:"thumbnail-title",__source:{fileName:Lt,lineNumber:135,columnNumber:9}},t&&i.a.createElement(De.a,{className:"favicon SpeedDialAddButton-Favicon",url:Ee.yd,__source:{fileName:Lt,lineNumber:137,columnNumber:11}}),"never"!==e[Y.kStartpageSpeedDialTitlesVisible]&&i.a.createElement("span",{className:"button-title",style:n,__source:{fileName:Lt,lineNumber:143,columnNumber:11}},Object(C.a)("Add New Speed Dial"))))}}jt(Bt,"contextType",d.a);var Ft=Object(H.a)(Bt,Rt),Ut=a(180),Ht=a(7),Vt=a(631),Wt=a(355),zt=a(169),Gt=a(79),Kt="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialView.jsx";function Yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $t=[Y.kAddressBarSearchSuggestEnabled,Y.kThemeUseAnimation,Y.kStartpageSpeedDialAddButtonVisible,Y.kStartpageSpeedDialAllowDnd,Y.kStartpageSpeedDialColumns,Y.kStartpageSpeedDialControlsVisible,Y.kStartpageSpeedDialDeleteVisible,Y.kStartpageSpeedDialFaviconVisible,Y.kStartpageSpeedDialTitlesVisible,Y.kStartpageSpeedDialWidth,Y.kTabsOpenNewInBackground,Y.kStartpageSpeedDialDisplaySearch],Xt={stiffness:400,damping:32,precision:.1};class Zt extends n.PureComponent{constructor(...e){super(...e),Yt(this,"animate",!1),Yt(this,"dragStartX",0),Yt(this,"dragStartY",0),Yt(this,"dragDialStartPos",[0,0]),Yt(this,"state",{dialNodes:[],pressed:"none",lastPress:null,dragDialXY:[0,0],dragOrder:null,transitionType:"down",dialId:null,highlightParentButton:!1}),Yt(this,"setSpeeddialRef",e=>{this.speeddialRef=e}),Yt(this,"_onWebpageViewStoreChanged",e=>{"PAGE_RELOAD"===e.type&&this._handlePageReload()}),Yt(this,"onSearch",(e,t,a={})=>{if(t&&t.url){const n={...a,useSearchEngine:t,post:!0===t.post};Ot.a.goSearchURL(e,n)}}),Yt(this,"handleSpeedDialPointerDown",(e,t)=>{"none"!==this.state.pressed&&this.finishPointerClick(!1,t),0!==t.button&&1!==t.button||!this.props.prefValues[Y.kStartpageSpeedDialAllowDnd]||document.activeElement&&"sd-title-editor"===document.activeElement.className||(this.setState({pressed:"pressed",lastPress:e.id}),this.dragStartX=t.pageX,this.dragStartY=t.pageY)}),Yt(this,"onPointerMove",e=>{const{pressed:t}=this.state;if("none"===t||!this.props.prefValues[Y.kStartpageSpeedDialAllowDnd])return;if(0===e.buttons)return void this.finishPointerClick(!1,e);if(!(1&e.buttons))return;const{lastPress:a}=this.state;if(null===a||"dragcancel"===t)return;this.setState({highlightParentButton:this.isPointerOverParentButton(e)});const n=e.pageX-this.dragStartX,i=e.pageY-this.dragStartY;if("pressed"===t&&Math.abs(n)<=5&&Math.abs(i)<=5)return;const s=this.getSpeedDialGeometry(),r=this.getLastPressPosition();"pressed"===t&&(this.setDialDragListeners(!0),this.dragDialStartPos=this.computeLayout(s,r),this.setState({pressed:"dragging"}));let[o,l]=this.dragDialStartPos;o+=n,l+=i,this.setState({dragDialXY:[o,l]});const{cols:c,rows:u,dialWidth:m,dialHeight:d,thumbnailWidth:h,backgroundHeight:p}=this.getSpeedDialGeometry(),b=this.state.dialNodes.length,g=o+Math.ceil(h/3.5),N=l+Math.ceil(p/3.5),f=n<0?Math.round:Math.floor,_=i<0?Math.round:Math.floor,v=Object(Wt.default)(f(g/m),0,c-1),E=Object(Wt.default)(_(N/d),0,u-1),C=Math.min(E*c+v,b-1);r!==C&&this.moveDial(C,r)}),Yt(this,"moveDial",(e,t)=>this.setState(a=>{const n=(a.dragOrder||a.dialNodes.map(e=>e.id)).slice(0),i=n.splice(t,1)[0];return n.splice(e,0,i),{dragOrder:n}})),Yt(this,"onPointerPressEnd",e=>{const{pressed:t}=this.state;"dragging"!==t&&"dragcancel"!==t||(e.stopPropagation(),e.preventDefault()),this.finishPointerClick(!0,e)}),Yt(this,"onDragEscapeKey",()=>{this.setState({pressed:"dragcancel",dragOrder:null})}),Yt(this,"isPointerOverParentButton",e=>!(!e||!this.parentButtonRect)&&(e.pageX>this.parentButtonRect.x&&e.pageX<this.parentButtonRect.x+this.parentButtonRect.width&&e.pageY>this.parentButtonRect.y&&e.pageY<this.parentButtonRect.y+this.parentButtonRect.height)),Yt(this,"getDraggedNode",()=>{const{dialNodes:e,dragOrder:t}=this.state,a=this.getLastPressPosition();return t?e.find(e=>e.id===t[a]):this.state.dialNodes[a]}),Yt(this,"onSDPointerUp",async e=>{const{pressed:t}=this.state,a=e.currentTarget.getAttribute("data-id");if(!a||"dragging"!==t)return;const n=e.currentTarget.classList.contains("folder"),i=this.getDraggedNode();if(i&&i.id!==a){if(e.stopPropagation(),e.preventDefault(),n)await this.props.bookmarkActions.move([i.id],a,0);else if(function(e){return!!e&&!e.url}(i))await this.props.bookmarkActions.move([a],i.id,0);else{const e=me.b.getItemById(a),t=await this.props.bookmarkActions.mergeWithPromise(i,e,Object(C.a)("title","New Folder"));this.props.setSpeedDialAwaitingEdit(t)}this.onBookmarksMoved(),this.setState({pressed:"dragcancel"})}else this.finishPointerClick(!0,e)}),Yt(this,"onBookmarksMoved",()=>{_e.a.runtime.lastError&&(this.setState({dragOrder:null}),console.warn("Error moving bookmark: ",_e.a.runtime.lastError))}),Yt(this,"onDragOverHandler",e=>{e.preventDefault(),e.stopPropagation()}),Yt(this,"openParentNode",()=>{this.props.speedDialNode&&this.props.speedDialNode.parentId&&_e.a.bookmarks.getSubTree(this.props.speedDialNode.parentId,e=>{if(_e.a.runtime.lastError)return;const t=e[0];t&&this.props.openSpeedDialNode(t)})}),Yt(this,"isTopLevel",()=>!this.props.speedDialNode||!this.props.speedDialSetNode||this.props.speedDialNode.id===this.props.speedDialSetNode.id),Yt(this,"_handlePageReload",()=>{!this.props.incognito&&this.props.speedDialNode&&_e.a.bookmarks.getChildren(this.props.speedDialNode.id,e=>{if(!e)return;const t=[];e.forEach((e,a,n)=>{Ht.a.bookmarksPrivate.isCustomThumbnail(e.id,i=>{!1===i&&t.push(e),a===n.length-1&&ge.a.updateBookmarks(t)})})})}),Yt(this,"onDragUrlOver",e=>{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===Gt.c)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),Yt(this,"onDropUrlOn",e=>{const t=this.props.speedDialNode;if(t){const a=t.children?t.children.length:0,n={disableMove:!0};this.props.bookmarkActions.onDropEvent(e,t.id,a,n)}}),Yt(this,"onKeyDown",e=>{const t=e.key.toLowerCase();if(e.ctrlKey)switch(t){case"z":e.shiftKey?this.props.bookmarkActions.redo():this.props.bookmarkActions.undo();break;case"y":this.props.bookmarkActions.redo()}}),Yt(this,"onPaste",e=>{this.props.speedDialNode&&this.props.bookmarkActions.paste(e,this.props.speedDialNode.id,!0),e.stopPropagation(),e.preventDefault()}),Yt(this,"getNextFocusable",e=>{const t=ie.a.findDOMNode(this.speeddialRef);if(t instanceof HTMLElement){const a=Array.from(t.querySelectorAll("div.dial")).map(e=>e.getAttribute("data-id")).filter(Boolean);let n=a.indexOf(e);return-1===n?"":(n=n>0?n-1:n+1,n>=a.length?"":a[n])}return""}),Yt(this,"moveFocus",(e,t,a)=>{const n=ie.a.findDOMNode(this.speeddialRef);if(n instanceof HTMLElement){const a=Array.from(n.querySelectorAll("div.dial")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===a.length)return!1;let i;const s=this.getSpeedDialGeometry();switch(t){case"current":if(""===e&&(e=a[0]),i=a.indexOf(e),-1===i)return!1;break;case"left":case"right":if(1===a.length)return!1;if(i=a.indexOf(e),-1===i)return!1;if("right"===t){if((i+1)%s.cols==0)return!1;if(i+=1,i>=a.length)return!1}else{if(i%s.cols==0)return!1;if(i-=1,i>=a.length)return!1}break;case"up":case"down":if(1===a.length)return!1;if(i=a.indexOf(e),-1===i)return!1;if("up"===t){if(i-=s.cols,i<0){const e=n.getElementsByClassName("button-startpage up-level")[0];return!!e&&(e.focus(),!0)}}else if(i+=s.cols,i>=a.length)return!1;break;default:return!1}e=a[i];const r=n.querySelector(`div.dial[data-id="${e}"]`);if(r)return r.focus(),!0}return!1}),Yt(this,"renderNavigation",()=>this.isTopLevel()?null:n.createElement("nav",{className:"startpage-folder-navigation",__source:{fileName:Kt,lineNumber:873,columnNumber:9}},n.createElement("button",{ref:e=>{this.parentFolderButtonRef=e},onClick:this.openParentNode,title:Object(C.a)("Show Parent Folder"),"data-name":"up-button",className:qe()("button-startpage","up-level",{highlight:this.state.highlightParentButton}),__source:{fileName:Kt,lineNumber:874,columnNumber:11}},n.createElement("span",{dangerouslySetInnerHTML:{__html:Ee.T},__source:{fileName:Kt,lineNumber:884,columnNumber:13}}),this.props.speedDialNode?this.props.speedDialNode.title:"")))}static getDerivedStateFromProps(e,t){const a=t.dialId,n=e.speedDialNode,i=n&&n.id,s=(n&&n.children||[]).filter(e=>!me.b.isSeparator(e));if(a===i){let{lastPress:e,dragOrder:a}=t;if(null===e||a||s.every(t=>t.id!==e)&&(e=null),null===e)a=null;else if(a){const e=t.dialNodes;e.length===s.length&&e.every((e,t)=>e.id===s[t].id)||(a=null)}return{...t,dialNodes:s,lastPress:e,dragOrder:a}}let r="down";if(n&&a&&a!==n.parentId)if(s.find(e=>e.id===a))r="up";else{const t=e.speedDialSet;if(t){const e=t.findIndex(e=>e.id===a),n=t.findIndex(e=>e.id===i);-1!==n&&-1!==e&&(n<e?r="right":n>e&&(r="left"))}}return{...t,dialNodes:s,lastPress:null,dragOrder:null,transitionType:r,dialId:i}}getLastPressPosition(){const{dialNodes:e,lastPress:t,dragOrder:a}=this.state;return a?a.findIndex(e=>e===t):e.findIndex(e=>e.id===t)}componentDidMount(){Ut.a.addChangeListener(this._onWebpageViewStoreChanged),this.animate=!0}componentDidUpdate(e,t){const a=ie.a.findDOMNode(this.parentFolderButtonRef);if(a){const e=a instanceof HTMLElement&&a.getBoundingClientRect();e instanceof DOMRect&&(this.parentButtonRect=e)}}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout),Ut.a.removeChangeListener(this._onWebpageViewStoreChanged),this.finishPointerClick(!1)}maybeSpring(e,t){return this.animate&&this.props.prefValues[Y.kThemeUseAnimation]?Object(Vt.spring)(e,t):e}setDialDragListeners(e){if(!this.props.prefValues[Y.kStartpageSpeedDialAllowDnd])return;const t=this.context;e?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerPressEnd,!1),t.addEventListener("pointercancel",this.onPointerPressEnd,!0),t.addEventListener("pointerdown",this.onPointerPressEnd,!0),ht.a.bind("esc",this.onDragEscapeKey)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerPressEnd,!1),t.removeEventListener("pointercancel",this.onPointerPressEnd,!0),t.removeEventListener("pointerdown",this.onPointerPressEnd,!0),ht.a.unbind("esc",this.onDragEscapeKey));const a=document.getElementById("browser");a&&(a.style.pointerEvents=e?"none":"auto")}async finishPointerClick(e,t){const{pressed:a}=this.state;if("none"!==a){if("dragging"===a||"dragcancel"===a){this.setDialDragListeners(!1);let n=!1;const{dragOrder:i}=this.state,s=this.getDraggedNode();if("dragging"===a&&e&&this.isPointerOverParentButton(t)){const e=this.props.speedDialNode&&this.props.speedDialNode.parentId;s&&e&&(await this.props.bookmarkActions.move([s.id],e,0),n=!0)}else if("dragging"===a&&e&&i){const e=this.getLastPressPosition();if(!s)return;if(("number"==typeof s.index?s.index:e)!==e){const e=s.parentId||"";await this.props.bookmarkActions.reorder(i,e),n=!0}}n?this.onBookmarksMoved():this.setState({dragOrder:null})}this.setState({pressed:"dragcancel",highlightParentButton:!1})}}getSpeedDialGeometry(){const{prefValues:e}=this.props;let t=e[Y.kStartpageSpeedDialWidth];const a="always"===e[Y.kStartpageSpeedDialTitlesVisible];if(-1===t){const e=Math.round(this.props.maxWidth/(1.4*this.props.prefValues[Y.kStartpageSpeedDialColumns]));t=Math.max(Math.min(e,320),120)}const n=Math.round(t/1.22),i=Math.round(t/12);let s=this.state.dialNodes.length;e[Y.kStartpageSpeedDialAddButtonVisible]&&s++;const r=6*i,o=e[Y.kStartpageSpeedDialColumns];let l=n;a&&(l=n+33);const c=t+2*i,u=l+2*i;let m=Math.max(1,Math.min(Math.floor((this.props.maxWidth-r)/c),o));return this.props.maxWidth<c*m+r&&(m=1),{backgroundHeight:l,count:s,cols:m,rows:Math.ceil(s/m),dialWidth:c,dialHeight:u,thumbnailWidth:t,thumbnailHeight:n,dialSpace:i}}computeLayout(e,t){const a=Math.floor(t/Number(e.cols)),n=t%Number(e.cols);return[Number(e.dialWidth)*n,Number(e.dialHeight)*a]}render(){const{open:e,maxWidth:t,speedDialSet:a,prefValues:i}=this.props;if(!1===e||!t)return null;const s=i[Y.kStartpageSpeedDialAllowDnd],{pressed:r,dialId:o}=this.state,l=qe()({dials:!0,speeddial:!0,"sd-titles-onhover":"hover"===i[Y.kStartpageSpeedDialTitlesVisible]}),c=a.length>0,u=this.getSpeedDialGeometry(),{backgroundHeight:m,count:d,cols:h,rows:p,dialWidth:b,dialHeight:g,thumbnailWidth:N,thumbnailHeight:f,dialSpace:_}=u,v=h*b-2*_,E=Math.round(N/20);return n.createElement(n.Fragment,null,this.props.prefValues[Y.kStartpageSpeedDialDisplaySearch]&&n.createElement(Mt.a,{className:"SpeedDialView-SearchField",useFavicon:!0,key:"speed_dial_search",origin:"speed_dial_view",onSearch:this.onSearch,suggestEnabled:i[Y.kAddressBarSearchSuggestEnabled],__source:{fileName:Kt,lineNumber:924,columnNumber:9}}),n.createElement(Dt.a,{className:qe()({"dials-wrapper":!0,dragging:"dragging"===r,"dragging-disabled":!s}),transitionName:this.state.transitionType,transitionEnterTimeout:300,transitionLeaveTimeout:300,overflowHidden:!1,__source:{fileName:Kt,lineNumber:933,columnNumber:7}},n.createElement("div",{onDragOver:this.onDragUrlOver,onDrop:this.onDropUrlOn,onKeyDown:this.onKeyDown,key:"node__"+(o||"unset"),ref:this.setSpeeddialRef,className:l,__source:{fileName:Kt,lineNumber:943,columnNumber:9}},this.renderNavigation(),n.createElement("div",{className:"dial-columns",onPointerMove:"pressed"===r&&s?this.onPointerMove:null,onPointerUp:this.onPointerPressEnd,onPointerCancel:this.onPointerPressEnd,style:{width:v,height:p*g,marginLeft:_,marginRight:_},__source:{fileName:Kt,lineNumber:952,columnNumber:9}},function(e,t){const a=Array(e);for(let n=0;n<e;n++)a[n]=t(n);return a}(d,e=>{const{dialNodes:t}=this.state;let a=null;if(e<t.length){const{dragOrder:n}=this.state;a=n?t.find(t=>t.id===n[e]):t[e]}const s=!!a&&a.id===this.state.lastPress,o=s&&"dragging"===r;let l;if(o){const[e,t]=this.state.dragDialXY;l={translateX:e,translateY:t,opacity:this.maybeSpring(.95,Xt),boxShadowV:(e-(v-b)/2)/50,boxShadowH:8,boxShadowBlur:16,boxShadowOpacity:.1}}else if(a){const[t,a]=this.computeLayout(u,e);l={translateX:this.maybeSpring(t,Xt),translateY:this.maybeSpring(a,Xt),opacity:this.maybeSpring(1,Xt),boxShadowV:(t-(v-b)/2)/120,boxShadowH:3,boxShadowBlur:3,boxShadowOpacity:.12}}else{const[t,a]=this.computeLayout(u,e);l={translateX:this.maybeSpring(t,Xt),translateY:this.maybeSpring(a,Xt),opacity:1,boxShadowV:(t-(v-b)/2)/120,boxShadowH:3,boxShadowBlur:3,boxShadowOpacity:.12}}return(n.createElement(Vt.Motion,{key:a?"node_"+a.id:"add_button",style:l,children:zt.default,__source:{fileName:Kt,lineNumber:1016,columnNumber:15}},({translateX:t,translateY:l,opacity:u})=>{const d="dragging"===r;return a?n.createElement(Pt.a,{incognito:this.props.incognito,onPointerDown:this.handleSpeedDialPointerDown,dragging:o,style:{transform:`translate3d(${t}px, ${l}px, 0)`,zIndex:s?999:e,opacity:u,pointerEvents:o?"none":"auto"},isCut:this.props.cutIds.includes(a.id),backgroundHeight:m,thumbnailHeight:f,thumbnailWidth:N,highlight:d,onPointerUp:this.onSDPointerUp,titleMargin:E,node:a,bookmarkActions:this.props.bookmarkActions,keyAccess:0===e?0:-1,prefValues:i,moveFocus:this.moveFocus,getNextFocusable:this.getNextFocusable,openSpeedDialNode:this.props.openSpeedDialNode,awaitingInitialEditId:this.props.awaitingInitialEditId,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,__source:{fileName:Kt,lineNumber:1028,columnNumber:21}}):n.createElement(Ft,{style:{transform:`translate3d(${t}px, ${l}px, 0)`,zIndex:0,height:m,width:N},id:null===(h=this.props.speedDialNode)||void 0===h?void 0:h.id,thumbnailHeight:f,drawerIsOpen:this.props.drawerIsOpen,title:c?Object(C.a)("title","Add bookmark to Speed Dial"):Object(C.a)("First add a new Speed Dial folder"),keyAccess:0===e?0:-1,moveFocus:this.moveFocus,onPaste:this.onPaste,onSetClipboardListener:this.props.onSetClipboardListener,addItem:this.props.toggleStartpageDrawer,__source:{fileName:Kt,lineNumber:1060,columnNumber:21}});var h}))})))))}}Yt(Zt,"contextType",d.a);var Qt=Object(H.a)(Zt,$t),qt=a(836),Jt=a(23),ea="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\startpage-topmenu.jsx";function ta(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const aa=[Y.kMailIsTurnedOff,Y.kStartpageSpeedDialAddButtonVisible];class na extends i.a.Component{constructor(...e){super(...e),ta(this,"openMenuItem",(e,t,a)=>{this.props.openMenuItem(e,t,a)}),ta(this,"openSection",(e,t,a)=>{this.props.section!==e&&V.a.openURL(Jt.p.internals[e],{inCurrent:!0}),e===oe.SpeedDial&&this.props.openMenuItem(oe.SpeedDial,t,a)}),ta(this,"createSpeedDialSet",()=>{this.props.section!==oe.SpeedDial&&V.a.openURL(Jt.p.internals[oe.SpeedDial],{inCurrent:!0}),this.props.createSpeedDialSet()}),ta(this,"getContextMenuItems",e=>{const t=ke.a.getOptionFunction("startpagebar");return ke.a.getNamedMenu("startpagebar",async a=>{switch(a.action){case"CONTEXT_RENAME":return{visible:e.length>0,handler:()=>this.handleRename(e),...t(a,{})};case"CONTEXT_REMOVE":return{visible:e.length>0,handler:()=>this.handleRemove(e),...t(a,{})};default:return{...t(a,{})}}})}),ta(this,"onContextMenu",e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getContextMenuItems("").then(t=>{Object(h.a)(this.context.vivaldiWindowId,t)(e)})}),ta(this,"handleRename",e=>{this.refs[e].enableEditing()}),ta(this,"handleRemove",e=>{this.refs[e].removeSpeedDial()}),ta(this,"handleMouseDown",e=>{e.preventDefault()}),ta(this,"handleKeyDown",(e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),ta(this,"moveFocus",(e,t,a)=>{const n=ie.a.findDOMNode(this);if(n instanceof HTMLElement&&(!0===a||Object(ft.a)(n))){const a=Array.from(n.querySelectorAll("button.button-startpage")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){if(""===e){const t=document.getElementsByClassName("div.button-startpage active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let n=a.indexOf(e);if(-1===n)return;n="right"===t?n+1>=a.length?0:n+1:n<=0?a.length-1:n-1,e=a[n]}const i=n.querySelector(`button.button-startpage[data-id="${e}"]`);i&&i.focus()}})}render(){let e=-1===this.props.keyAccess;const t=t=>{let a=-1;return!e&&t&&(e=!0,a=0),a};return(i.a.createElement("nav",{className:"startpage-navigation",onContextMenu:this.onContextMenu,__source:{fileName:ea,lineNumber:211,columnNumber:7}},i.a.createElement("div",{className:"startpage-navigation-group",__source:{fileName:ea,lineNumber:213,columnNumber:9}},this.props.speedDialSet.map((function(e,a){const n=this.props.section===oe.SpeedDial&&this.props.speedDialSetNode&&this.props.speedDialSetNode.id===e.id,s="title"+a;return i.a.createElement(qt.a,{className:qe()({active:n,"button-startpage":!0,"no-page-focus":!0}),ref:s,key:e.id,bookmark:e,howToEdit:"doubleClick",getContextMenuItemsPromise:this.getContextMenuItems.bind(this,s),keyAccess:t(n),onSelect:this.openSection.bind(this,oe.SpeedDial,e),onKeyDown:this.handleKeyDown,needsInitialEdit:this.props.initialEditSpeedDialSet===e.id,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,__source:{fileName:ea,lineNumber:222,columnNumber:15}})}),this),this.props.prefValues[Y.kStartpageSpeedDialAddButtonVisible]&&i.a.createElement("button",{onClick:this.createSpeedDialSet,"data-id":"add",className:"button-startpage add-set no-page-focus",title:Object(C.a)("Add new Speed Dial folder"),tabIndex:t(!0),onKeyDown:this.handleKeyDown.bind(this,"add"),dangerouslySetInnerHTML:{__html:Ee.h.medium},__source:{fileName:ea,lineNumber:246,columnNumber:17}})),i.a.createElement("div",{className:"startpage-navigation-group",__source:{fileName:ea,lineNumber:258,columnNumber:9}},i.a.createElement("button",{onClick:this.openSection.bind(this,oe.Bookmarks,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,oe.Bookmarks),title:Object(C.a)("Bookmarks"),"data-id":oe.Bookmarks,tabIndex:t(!0),className:qe()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===oe.Bookmarks}),dangerouslySetInnerHTML:{__html:Ee.C.medium+Object(C.a)("Bookmarks")},__source:{fileName:ea,lineNumber:259,columnNumber:11}}),i.a.createElement("button",{onClick:this.openSection.bind(this,oe.History,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,oe.History),title:Object(C.a)("History"),"data-id":oe.History,tabIndex:t(!0),className:qe()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===oe.History}),dangerouslySetInnerHTML:{__html:Ee.yb.medium+Object(C.a)("History")},__source:{fileName:ea,lineNumber:272,columnNumber:11}}),i.a.createElement("button",{onClick:this.openSection.bind(this,oe.NotesManager,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,oe.NotesManager),title:Object(C.a)("Notes"),"data-id":oe.NotesManager,tabIndex:t(!0),className:qe()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===oe.NotesManager}),dangerouslySetInnerHTML:{__html:Ee.qc.large+Object(C.a)("Notes")},__source:{fileName:ea,lineNumber:285,columnNumber:11}}),this.props.prefValues[Y.kMailIsTurnedOff]?null:i.a.createElement("button",{onClick:this.openSection.bind(this,oe.Calendar,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,oe.Calendar),title:Object(C.a)("Calendar"),"data-id":oe.Calendar,tabIndex:t(!0),className:qe()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===oe.Calendar}),dangerouslySetInnerHTML:{__html:Ee.H.medium+Object(C.a)("Calendar")},__source:{fileName:ea,lineNumber:299,columnNumber:15}}))))}}ta(na,"contextType",d.a);var ia=Object(H.a)(na,aa),sa=a(157),ra=a(125),oa=a.n(ra),la=a(1867),ca=a(1423),ua=a(41),ma="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\StartPage.jsx";function da(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ha=[Y.kBookmarksConfirmOpening,Y.kBookmarksConfirmOpeningThreshold,Y.kKeyboardTabToAll,Y.kStartpageNavigation,Y.kStartpageSpeedDialAddButtonVisible,Y.kStartpageSpeedDialGameButtonShow,Y.kTabsBarPosition,Y.kTabsBarWidth];class pa extends i.a.PureComponent{constructor(e,t){super(e),da(this,"bookmarkActions",new ue.a),da(this,"_hasClipboardListener",!1),da(this,"_onStoreChange",()=>{const e=me.b.getSpeeddialFolders();let t,a=e[0],n=a;for(t of e)this.getUpdatedNode(t,this.state.currentSpeeddial)&&(n=this.getUpdatedNode(t,this.state.currentSpeeddial)),this.getUpdatedNode(t,this.state.menuSpeeddial)&&(a=this.getUpdatedNode(t,this.state.menuSpeeddial));this.setState({bookmarksAvailable:!0,speeddialFolders:e,menuSpeeddial:a,currentSpeeddial:n,cutIds:me.b.getCutIds()})}),da(this,"_onTaskStoreChange",()=>{this.forceUpdate()}),da(this,"jumpToTop",()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&(e.scrollTop=0)}),da(this,"scrollToBottom",()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&e.scrollTo({top:e.scrollHeight,left:0,behavior:"smooth"})}),da(this,"onResize",e=>{const t=e[0].contentRect;(this.state.viewHeight!==t.height||this.state.viewWidth!==t.width)&&this.setState({viewWidth:t.width,viewHeight:t.height})}),da(this,"getUpdatedNode",(e,t)=>{if(e&&e.id&&t&&t.id){if(e.id===t.id)return e;if(e.children){for(var a=0;a<e.children.length;a++){var n=this.getUpdatedNode(e.children[a],t);if(n&&n.id===t.id)return n}return null}return null}return null}),da(this,"showStartpageDrawer",(e,t)=>{this.setState({drawerIsOpen:e},()=>{!1===e&&""===this.state.awaitingInitialEditId&&this._speeddialview.moveFocus(t||"add","current",!1)})}),da(this,"closeStartpageDrawer",()=>{this.showStartpageDrawer(!1,"")}),da(this,"toggleStartpageDrawer",()=>{0===this.state.speeddialFolders.length?this.createSpeedDialSet():this.showStartpageDrawer(!this.state.drawerIsOpen)}),da(this,"handleDoubleClick",()=>{this.state.section!==oe.SpeedDial||this.props.prefValues[Y.kStartpageSpeedDialAddButtonVisible]||this.toggleStartpageDrawer()}),da(this,"onSetClipboardListener",e=>{this._hasClipboardListener=e}),da(this,"handlePaste",()=>{const e=this._hasClipboardListener;e||document.addEventListener("paste",this.onPaste),document.execCommand("paste"),e||document.removeEventListener("paste",this.onPaste)}),da(this,"onPaste",e=>{this.state.currentSpeeddial&&(this.bookmarkActions.paste(e,this.state.currentSpeeddial.id,!0),e.stopPropagation(),e.preventDefault())}),da(this,"createSpeedDialSet",async()=>{const e=await this.bookmarkActions.create({parentId:me.b.getRootId(),title:me.b.getDefaultFolderName()});e&&this.bookmarkActions.update(e.id,{speeddial:!0}).then(e=>{this.setState({initialEditSpeedDialSet:e.id})})}),da(this,"openMenuItem",(e,t,a)=>{this.props.updatePageThumbnailWithActiveWebview(1e3);const n=t&&t.id&&t;this.jumpToTop(),this.setState({section:e,menuSpeeddial:n,currentSpeeddial:n})}),da(this,"isFolder",e=>!e.url),da(this,"openFolder",(e,t)=>{if(!0===(t=t||{}).openInBackground){if(this.props.prefValues[Y.kBookmarksConfirmOpening]&&e.children&&e.children.length>this.props.prefValues[Y.kBookmarksConfirmOpeningThreshold]){const a={bookmarks:e.children,inBackground:t.openInBackground,newTab:t.openInNewTab};return void pe.a.showConfirmOpenBookmarkDialog(a)}_e.a.bookmarks.getChildren(e.id,e=>{e.forEach(e=>{V.a.openURL(e.url,{inCurrent:!1,inBackground:!0})})})}else this.jumpToTop(),this.setState({currentSpeeddial:e},()=>{this._speeddialview.moveFocus("","current",!1),this.bookmarkActions.clearUndoStack()})}),da(this,"openSpeedDialNode",(e,t)=>{t=t||{},this.isFolder(e)?this.openFolder(e,t):t.openInNewWindow?V.a.openWindow(e.url,{incognito:t.incognito,transition:sa.a.AUTO_BOOKMARK}):e.url&&V.a.openURL(e.url,{inCurrent:!t.openInNewTab,inBackground:t.openInBackground,bookmarkId:e.id,addOpenerTabId:!0,inSpecificPageId:t.openInNewTab?void 0:this.props.pageId,transition:sa.a.AUTO_BOOKMARK})}),da(this,"setSpeedDialAwaitingEdit",e=>{this.setState({awaitingInitialEditId:e})}),da(this,"onSpeedDialDrawerDone",async e=>{if(!e)return void this.closeStartpageDrawer();const t=await this.bookmarkActions.create(e);t?(t.url?Nt.a.isIncognito(this.context.vivaldiWindowId)||ge.a.updateBookmark(t):this.setSpeedDialAwaitingEdit(t.id),this.showStartpageDrawer(!1,t.id)):this.closeStartpageDrawer()}),da(this,"customize",()=>{pe.a.showSettings("startpage")}),da(this,"renderSection",e=>{if(this.state.section===oe.Bookmarks)return i.a.createElement(Se,{__source:{fileName:ma,lineNumber:430,columnNumber:14}});if(this.state.section===oe.History)return i.a.createElement(dt,{pageId:this.props.pageId,keyAccess:this.props.prefValues[Y.kKeyboardTabToAll],maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,__source:{fileName:ma,lineNumber:433,columnNumber:9}});if(this.state.section===oe.SpeedDial)return this.state.bookmarksAvailable?i.a.createElement(Qt,{ref:e=>this._speeddialview=e,bookmarkActions:this.bookmarkActions,open:!0,cutIds:this.state.cutIds,speedDialNode:this.state.currentSpeeddial,speedDialSetNode:this.state.menuSpeeddial,speedDialSet:this.state.speeddialFolders,keyAccess:this.props.prefValues[Y.kKeyboardTabToAll],drawerIsOpen:this.state.drawerIsOpen,maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,openSpeedDialNode:this.openSpeedDialNode,toggleStartpageDrawer:this.toggleStartpageDrawer,onSetClipboardListener:this.onSetClipboardListener,incognito:e,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,awaitingInitialEditId:this.state.awaitingInitialEditId,__source:{fileName:ma,lineNumber:444,columnNumber:9}}):null;if(this.state.section===oe.Calendar)return i.a.createElement(Te.a,{pageId:this.props.pageId,url:this.props.url,__source:{fileName:ma,lineNumber:466,columnNumber:9}});if(this.state.section===oe.NotesManager){const e=new URL(this.props.url).searchParams.get("path")||"-1";return(i.a.createElement(pt.a,{key:`notes-manager-${this.props.pageId}`,id:e,pageId:this.props.pageId,isActive:this.props.isActive,__source:{fileName:ma,lineNumber:471,columnNumber:9}}))}return console.warn("Unknown Startpage Section: ",this.state.section),null}),da(this,"getContextMenuItems",e=>{const t=!1===this.state.drawerIsOpen&&Boolean(this.state.currentSpeeddial)&&!1===Nt.a.isGuestSession(this.context.vivaldiWindowId),a=!1===this.state.drawerIsOpen&&!this.state.currentSpeeddial&&!1===Nt.a.isGuestSession(this.context.vivaldiWindowId),n=ke.a.getOptionFunction(e);return ke.a.getNamedMenu(e,async e=>{switch(e.action){case"CONTEXT_ADD_BOOKMARK_TO_SPEEDDIAL":return{handler:this.toggleStartpageDrawer,visible:t,...n(e,{})};case"CONTEXT_ADD_FOLDER_TO_SPEEDDIAL":return{handler:this.createSpeedDialSet,visible:a,...n(e,{})};case"CONTEXT_PASTE":return{handler:this.handlePaste,...n(e,{})};case"CONTEXT_CUSTOMIZE":return{handler:this.customize,visible:!Nt.a.isGuestSession(this.context.vivaldiWindowId),...n(e,{})};default:return Promise.resolve({...n(e,{})})}})}),da(this,"onContextMenu",e=>{e.persist(),e.preventDefault(),e.stopPropagation(),this.getContextMenuItems("startpage").then(t=>{Object(h.a)(this.context.vivaldiWindowId,t)(e)})});const a=me.b.getSpeeddialFolders(),n=a[0],s=Object(ua.e)(),r=this.props.prefValues[Y.kTabsBarWidth],o=this.props.prefValues[Y.kTabsBarPosition],l="left"===o||"right"===o?r:0;this.state={section:e.view,bookmarksAvailable:me.b.hasBeenInitialized(),speeddialFolders:a,menuSpeeddial:n,currentSpeeddial:n,drawerIsOpen:!1,awaitingInitialEditId:"",initialEditSpeedDialSet:"",viewWidth:t.innerWidth-s-l,viewHeight:t.innerHeight,wallpaperId:oa()(),cutIds:me.b.getCutIds()}}componentDidMount(){me.b.addChangeListener(this._onStoreChange),ce.a.addChangeListener(this._onTaskStoreChange)}componentWillUnmount(){me.b.removeChangeListener(this._onStoreChange),ce.a.removeChangeListener(this._onTaskStoreChange),ht.a.unbind("esc",this.closeStartpageDrawer)}componentDidUpdate(e,t){t.drawerIsOpen!==this.state.drawerIsOpen&&(this.state.drawerIsOpen?ht.a.bind("esc",this.closeStartpageDrawer):ht.a.unbind("esc",this.closeStartpageDrawer))}UNSAFE_componentWillReceiveProps(e){if(e.view!==this.props.view){let t;t="bookmarks"===e.view?oe.Bookmarks:"history"===e.view?oe.History:"calendar"===e.view?oe.Calendar:"notes"===e.view?oe.NotesManager:oe.SpeedDial,this.setState({section:t})}}render(){if(!this.props.open)return null;const e=Nt.a.isIncognito(this.context.vivaldiWindowId);return(i.a.createElement(bt.a,{ref:"startpage",className:"startpage",onResize:this.onResize,__source:{fileName:ma,lineNumber:545,columnNumber:7}},("on"===this.props.prefValues[Y.kStartpageNavigation]||"speed_dial_only"===this.props.prefValues[Y.kStartpageNavigation]&&this.state.section===oe.SpeedDial)&&i.a.createElement(ia,{openMenuItem:this.openMenuItem,section:this.state.section,speedDialSet:this.state.speeddialFolders,speedDialSetNode:this.state.menuSpeeddial,createSpeedDialSet:this.createSpeedDialSet,initialEditSpeedDialSet:this.state.initialEditSpeedDialSet,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,keyAccess:this.props.prefValues[Y.kKeyboardTabToAll],__source:{fileName:ma,lineNumber:553,columnNumber:11}}),i.a.createElement("div",{className:"startpage-content",onContextMenu:this.state.section===oe.SpeedDial?this.onContextMenu:null,onDoubleClick:this.handleDoubleClick,__source:{fileName:ma,lineNumber:564,columnNumber:9}},i.a.createElement("div",{className:"sdwrapper",ref:"sdWrapper",__source:{fileName:ma,lineNumber:570,columnNumber:11}},this.renderSection(e)),this.state.section===oe.SpeedDial&&this.props.prefValues[Y.kStartpageSpeedDialGameButtonShow]&&i.a.createElement("div",{className:"StartPage-GameButton",__source:{fileName:ma,lineNumber:578,columnNumber:13}},i.a.createElement(Ae.a,{isStartPage:!0,__source:{fileName:ma,lineNumber:579,columnNumber:15}}))),i.a.createElement(la.a,{className:"startpage-drawer-wrapper",__source:{fileName:ma,lineNumber:584,columnNumber:9}},this.state.section===oe.SpeedDial&&this.state.drawerIsOpen&&i.a.createElement(ca.a,{classNames:"startpage-drawer-transition",timeout:{enter:500,exit:200},__source:{fileName:ma,lineNumber:587,columnNumber:11}},i.a.createElement(It,{node:this.state.currentSpeeddial,keyAccess:this.props.prefValues[Y.kKeyboardTabToAll],maxWidth:this.state.viewWidth,onSpeedDialDrawerDone:this.onSpeedDialDrawerDone,__source:{fileName:ma,lineNumber:590,columnNumber:13}})))))}}da(pa,"contextType",d.a);var ba=Object(H.a)(pa,ha),ga=a(781),Na=a(154),fa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themecolors\\ToolbarDemo.jsx";const _a=[Ee.hc,Ee.mc,Ee.kc,Ee.C,Ee.H,Ee.Q,Ee.fb,Ee.yb,Ee.Hb,Ee.qc,Ee.Bc,Ee.vd,Ee.be,Ee.gb,Ee.sc,Ee.zb,Ee.Lb,Ee.Cc,Ee.E,Ee.J,Ee.R,Ee.ce],va={small:"toolbar toolbar-statusbar",medium:"toolbar toolbar-default",large:"toolbar toolbar-mainbar"};class Ea extends i.a.PureComponent{render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{__source:{fileName:fa,lineNumber:86,columnNumber:7}},Object(C.a)("Toolbar Test Page")),i.a.createElement("div",{__source:{fileName:fa,lineNumber:90,columnNumber:7}},Object.keys(va).map(e=>i.a.createElement("div",{key:e,className:va[e],__source:{fileName:fa,lineNumber:93,columnNumber:9}},_a.map((t,a)=>i.a.createElement(Ne.a,{key:a,tooltip:"Test for icon",image:t[e],__source:{fileName:fa,lineNumber:95,columnNumber:13}}))))))}}var Ca=Object(H.a)(Ea,[]),wa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themecolors\\ThemeColors.jsx";const Oa=[Y.kThemeColorAccentSaturationLimit,Y.kThemeContrast,Y.kThemeSimpleScrollbar],ya={colorBg:Object(C.a)("Background"),colorFg:Object(C.a)("Foreground"),colorAccent:Object(C.a)("Accent"),colorHighlight:Object(C.a)("Highlight"),colorBorder:Object(C.a)("Border")};class Sa extends i.a.PureComponent{render(){const e=this.props.vivaldiSettings,t=Object.entries(Object(ga.a)(e.BORDER_RADIUS,this.props.prefValues[Y.kThemeSimpleScrollbar])),a=["colorSuccessBg","colorSuccessBgAlpha","colorSuccessFg","colorWarningBg","colorWarningBgAlpha","colorWarningFg","colorErrorBg","colorErrorBgAlpha","colorErrorFg"],n=U.d.all(F()(e.BROWSER_COLOR_FG),F()(e.BROWSER_COLOR_BG),F()(e.BROWSER_COLOR_HIGHLIGHT_BG),F()(e.BROWSER_COLOR_ACCENT_BG));return i.a.createElement("div",{className:"theme-test",tabIndex:"0",__source:{fileName:wa,lineNumber:64,columnNumber:7}},i.a.createElement(Ca,{__source:{fileName:wa,lineNumber:65,columnNumber:9}}),i.a.createElement("h1",{__source:{fileName:wa,lineNumber:66,columnNumber:9}},Object(C.a)("Theme Color Test Page")),i.a.createElement("p",{__source:{fileName:wa,lineNumber:69,columnNumber:9}},Object(C.a)("$1 color and $2 radius variables created",[Object.entries(n).length,t.length])),i.a.createElement("div",{__source:{fileName:wa,lineNumber:76,columnNumber:9}},i.a.createElement("h2",{__source:{fileName:wa,lineNumber:77,columnNumber:11}},`${Object(C.a)("Info Colors")} (${a.length})`),i.a.createElement("div",{className:"list",__source:{fileName:wa,lineNumber:78,columnNumber:11}},a.map(e=>i.a.createElement("div",{key:e,style:{backgroundColor:n[e]},__source:{fileName:wa,lineNumber:80,columnNumber:15}},i.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:wa,lineNumber:83,columnNumber:15}}),i.a.createElement("input",{type:"text",value:n[e],readOnly:!0,__source:{fileName:wa,lineNumber:84,columnNumber:15}}))))),Object.entries(ya).map(([e,t])=>{const a=Object.entries(Object.keys(n).filter(t=>t.includes(e)).reduce((e,t)=>(e[t]=n[t],e),{}));return(i.a.createElement("div",{key:e,__source:{fileName:wa,lineNumber:99,columnNumber:13}},i.a.createElement("h2",{__source:{fileName:wa,lineNumber:100,columnNumber:15}},`${String(t)} (${a.length})`),i.a.createElement("div",{className:"list",__source:{fileName:wa,lineNumber:101,columnNumber:15}},a.map(([e,t])=>i.a.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:wa,lineNumber:103,columnNumber:19}},i.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:wa,lineNumber:106,columnNumber:21}}),i.a.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:wa,lineNumber:107,columnNumber:21}}))))))}),i.a.createElement("div",{__source:{fileName:wa,lineNumber:115,columnNumber:9}},i.a.createElement("h2",{__source:{fileName:wa,lineNumber:116,columnNumber:9}},`${Object(C.a)("Radius")} (${t.length})`),i.a.createElement("div",{className:"list",__source:{fileName:wa,lineNumber:117,columnNumber:11}},t.map(([e,t])=>i.a.createElement("div",{key:e,style:{borderRadius:t},__source:{fileName:wa,lineNumber:119,columnNumber:15}},i.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:wa,lineNumber:122,columnNumber:17}}),i.a.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:wa,lineNumber:123,columnNumber:17}}))))))}}var Ta=Object(H.a)(Object(Na.a)(Sa,["BORDER_RADIUS","BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),Oa),ka=a(13),Aa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomeCard.jsx";class Ia extends n.Component{render(){const e=this.props.style||{};return this.props.backgroundImage&&(e.backgroundImage=`url(${this.props.backgroundImage})`),n.createElement("button",{className:qe()({"welcome-card":!0,"card-has-background":this.props.backgroundImage,"card-has-image-zoom":this.props.hasImageZoom,"card-is-done":this.props.done,"card-is-selected":this.props.selected}),disabled:this.props.done,onClick:this.props.onClick,title:this.props.tooltip?this.props.title+"\n"+this.props.tooltip:this.props.title,style:e,__source:{fileName:Aa,lineNumber:30,columnNumber:7}},n.createElement("div",{className:"card-outline",__source:{fileName:Aa,lineNumber:46,columnNumber:9}}),this.props.image&&n.createElement("div",{className:"card-image",__source:{fileName:Aa,lineNumber:49,columnNumber:11}},n.createElement("img",{src:this.props.image,height:"78",width:"78",__source:{fileName:Aa,lineNumber:50,columnNumber:13}})),this.props.svg&&n.createElement("div",{className:"card-image",dangerouslySetInnerHTML:{__html:this.props.svg},__source:{fileName:Aa,lineNumber:56,columnNumber:11}}),this.props.renderContent&&this.props.renderContent(),n.createElement("div",{className:"card-text",__source:{fileName:Aa,lineNumber:64,columnNumber:9}},this.props.title))}}var Da=Ia,Ma="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageImport.jsx";function Pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const xa=[{names:["chrome"],imageName:"welcomepage-chrome.svg"},{names:["chromium"],imageName:"welcomepage-chromium.svg"},{names:["firefox"],imageName:"welcomepage-firefox.svg"},{names:["opera 12"],imageName:"welcomepage-opera-12.svg"},{names:["opera"],imageName:"welcomepage-opera.svg"},{names:["safari"],imageName:"welcomepage-safari.svg"},{names:["edge legacy"],imageName:"welcomepage-edge.svg"},{names:["explorer"],imageName:"welcomepage-explorer.svg"},{names:["vivaldi"],imageName:"welcomepage-vivaldi.svg"},{names:["brave"],imageName:"welcomepage-brave.svg"},{names:["edge"],imageName:"welcomepage-edge-chromium.svg"},{names:["yandex","яндекс"],imageName:"welcomepage-yandex.svg"}],La=["safari","edge","explorer"];class ja extends i.a.Component{constructor(e){super(e),Pa(this,"toggleImport",e=>{const{toImport:t}=this.state;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({toImport:t})}),Pa(this,"importSelected",()=>{this.startImport(this.state.toImport[0]),this.toggleImport(this.state.toImport[0])}),Pa(this,"onImportEnded",e=>{const t=this.state.profileStatus.concat([]);for(let a=0;a<this.state.profileStatus.length;a++)"STARTED"===t[a]&&(t[a]=0===e?"COMPLETED":"FAILED");0===e?this.setState({error:null,profileStatus:t}):this.setState({error:Object(C.a)("An error occurred during import"),profileStatus:t}),this.state.toImport.length>0&&this.importSelected()}),this.state={error:null,profileStatus:[],profiles:[],toImport:[]}}componentDidMount(){Ht.a.importData.getProfiles(e=>{this.setState({profileStatus:e.map(()=>"IDLE"),profiles:e})}),Ht.a.importData.onImportEnded.addListener(this.onImportEnded)}componentWillUnmount(){Ht.a.importData.onImportEnded.removeListener(this.onImportEnded)}startImport(e){const t=this.state.profiles[e];let a="";t.UserProfiles&&t.UserProfiles[0]&&t.UserProfiles[0].profileName&&(a=t.UserProfiles[0].profileName),this.setState(t=>{const a=t.profileStatus.concat([]);return a[e]="STARTED",{profileStatus:a}},()=>{Ht.a.importData.startImport([e.toString(),t.history.toString(),t.favorites.toString(),t.passwords.toString(),t.search.toString(),t.notes.toString(),(!0).toString(),a.toString(),t.speeddial.toString()],"",zt.default)})}render(){return i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Ma,lineNumber:153,columnNumber:7}},i.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Ma,lineNumber:154,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:Ma,lineNumber:155,columnNumber:11}},this.props.title),i.a.createElement("p",{__source:{fileName:Ma,lineNumber:158,columnNumber:11}},Object(C.a)("To import data from another browser, select it below and press Import.")),i.a.createElement("p",{__source:{fileName:Ma,lineNumber:159,columnNumber:11}},Object(C.a)("For more choices see Import in the File menu or Quick Commands.")),i.a.createElement("div",{className:"cards-container",__source:{fileName:Ma,lineNumber:161,columnNumber:11}},this.state.profiles.map((e,t)=>{const{name:a,imageName:n}=function(e){const t=e.toLowerCase();for(let e=0;e<xa.length;e++)for(let a=0;a<xa[e].names.length;a++)if(t.includes(xa[e].names[a]))return{name:xa[e].names[a],imageName:xa[e].imageName};return{name:e,imageName:""}}(e.name),s=this.state.profileStatus[t];return e.hasDefaultInstall||La.includes(a)?i.a.createElement(Da,{key:t,done:"COMPLETED"===s,onClick:()=>this.toggleImport(t),selected:this.state.toImport.includes(t),title:"COMPLETED"===s?Object(C.a)("Imported"):e.name,image:`resources/${n}`,__source:{fileName:Ma,lineNumber:171,columnNumber:17}}):null})),i.a.createElement("p",{className:"pad-top",__source:{fileName:Ma,lineNumber:185,columnNumber:11}},i.a.createElement("input",{type:"submit",className:"welcome-button",onClick:this.importSelected,disabled:0===this.state.toImport.length,value:Object(C.a)("Import"),__source:{fileName:Ma,lineNumber:186,columnNumber:13}}),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary pad-left",onClick:this.props.continue,__source:{fileName:Ma,lineNumber:193,columnNumber:13}},this.props.continueText)),this.state.error&&i.a.createElement("p",{__source:{fileName:Ma,lineNumber:202,columnNumber:13}},this.state.error)))}}var Ra=ja,Ba=a(802);const Fa={welcome_four:Object(C.a)("How much Vivaldi do you want?"),import_data:Object(C.a)("title","Import from Applications or Files"),tracker_and_ad:Object(C.a)("browser","Tracker and Ad Blocking"),personalize:Object(C.a)("Pick a Theme"),tabs:Object(C.a)("Position Your Tabs"),touch:Object(C.a)("Three Things to Try Right Away")},Ua={getUnseenPageKeys:()=>Object.keys(Fa).filter(e=>!R.a.get(Y.kWelcomeSeenPages).includes(e)),hasUnseenPages:()=>Ua.getUnseenPageKeys().length>0,getUnreadPageKeys:()=>Object.keys(Fa).filter(e=>!R.a.get(Y.kWelcomeReadPages).includes(e)),hasUnreadPages:()=>Ua.getUnreadPageKeys().length>0,markAllAsSeen:()=>{const e=R.a.get(Y.kWelcomeSeenPages),t=Ua.getUnseenPageKeys();W.a.set(Y.kWelcomeSeenPages,e.concat(t))},getImageForTheme:e=>{switch(e.name){case"Vivaldi":return"../resources/4-0-wallpaper-light.jpg";case"Dark":return"../resources/4-0-wallpaper-dark.jpg";case"Human":return"../resources/bg_alt_7.jpg";case"Hot Pink":return"../resources/bg_alt_1.jpg";case"Subtle":return"../resources/bg_subtle.svg";case"Blueprint":return"../resources/bg_alt_6.webp";case"Beach":return"../resources/bg_alt_4.webp";case"Purple Rain":return"../resources/bg_geometric_1.svg";default:return""}},getTransparentTabBarState:e=>{switch(e.name){case"Hot Pink":case"Blueprint":case"Purple Rain":return!0;case"Beach":case"Human":case"Vivaldi":case"Dark":case"Subtle":default:return!1}}};var Ha=Ua,Va="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePagePersonalize.jsx";function Wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const za=[Y.kThemeScheduleEnabled];class Ga extends i.a.Component{constructor(...e){super(...e),Wa(this,"setTheme",(e,t,a)=>{K.e.setTheme(e),W.a.set(Y.kThemeBackgroundData,t),W.a.set(Y.kThemeTransparentTabBar,a)}),Wa(this,"toggleOSSchedule",()=>{const e="system"===this.props.prefValues[Y.kThemeScheduleEnabled]?"off":"system";W.a.set(Y.kThemeScheduleEnabled,e)})}render(){const{prefValues:e}=this.props;return(i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Va,lineNumber:61,columnNumber:7}},i.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Va,lineNumber:63,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:Va,lineNumber:65,columnNumber:11}},this.props.title),i.a.createElement("p",{__source:{fileName:Va,lineNumber:66,columnNumber:11}},Object(C.a)("Vivaldi will by default change colors with the operating system. For more themes, to create your own and more fine-grained control head over to Settings.")),i.a.createElement("label",{className:"welcome-pref-checkbox",__source:{fileName:Va,lineNumber:70,columnNumber:11}},i.a.createElement(Ba.a,{value:"system",checked:"system"===e[Y.kThemeScheduleEnabled],onChange:this.toggleOSSchedule,__source:{fileName:Va,lineNumber:71,columnNumber:13}}),i.a.createElement("span",{__source:{fileName:Va,lineNumber:76,columnNumber:13}},Object(C.a)("Use Operating System Theme"))),i.a.createElement("div",{className:"cards-container",__source:{fileName:Va,lineNumber:79,columnNumber:11}},et.a.getSync("THEMES_SYSTEM").slice(0,8).map(e=>i.a.createElement(Da,{key:e.name,onClick:()=>this.setTheme(e,Ha.getImageForTheme(e),Ha.getTransparentTabBarState(e)),selected:e.name===this.props.vivaldiSettings.THEME_CURRENT,backgroundImage:Ha.getImageForTheme(e),title:e.name,renderContent:()=>i.a.createElement("div",{className:"card-theme-colors",__source:{fileName:Va,lineNumber:92,columnNumber:19}},Object.keys(e.colors).map(t=>i.a.createElement("div",{key:t,className:"themecolor",style:{backgroundColor:e.colors[t]},__source:{fileName:Va,lineNumber:94,columnNumber:23}}))),__source:{fileName:Va,lineNumber:81,columnNumber:15}}))),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Va,lineNumber:104,columnNumber:11}},this.props.continueText))))}}var Ka=Object(H.a)(Object(Na.a)(Ga,["THEME_CURRENT"]),za),Ya="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTabs.jsx";const $a=[Y.kTabsBarPosition],Xa={top:{title:Object(C.a)("Top"),image:a(1770)},left:{title:Object(C.a)("Left"),image:a(1771)},bottom:{title:Object(C.a)("Bottom"),image:a(1772)},right:{title:Object(C.a)("Right"),image:a(1773)}};class Za extends i.a.Component{constructor(...e){var t,a,n;super(...e),n=e=>{W.a.set(Y.kTabsBarPosition,e)},(a="setPosition")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Ya,lineNumber:51,columnNumber:7}},i.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Ya,lineNumber:52,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:Ya,lineNumber:53,columnNumber:11}},this.props.title),i.a.createElement("p",{__source:{fileName:Ya,lineNumber:56,columnNumber:11}},Object(C.a)("Where would you like your Tab Bar? Experiment with the options below to find a layout that fits.")),i.a.createElement("div",{className:"cards-container",__source:{fileName:Ya,lineNumber:60,columnNumber:11}},Object.keys(Xa).map(e=>i.a.createElement(Da,{key:e,onClick:this.setPosition.bind(this,e),title:Xa[e].title,selected:e===this.props.prefValues[Y.kTabsBarPosition],svg:Xa[e].image,__source:{fileName:Ya,lineNumber:62,columnNumber:15}}))),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Ya,lineNumber:71,columnNumber:11}},this.props.continueText)))}}var Qa=Object(H.a)(Za,$a),qa="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTouch.jsx";class Ja extends i.a.Component{render(){return i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:qa,lineNumber:18,columnNumber:7}},i.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:qa,lineNumber:19,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:qa,lineNumber:20,columnNumber:11}},this.props.title),i.a.createElement("p",{__source:{fileName:qa,lineNumber:23,columnNumber:11}},Object(C.a)("Want to get the most out of your new browser? Here are three popular features you can try right away. To see other helpful features, head over to vivaldi.com")),i.a.createElement("div",{className:"cards-container welcome-intouch",__source:{fileName:qa,lineNumber:27,columnNumber:13}},i.a.createElement(Da,{onClick:()=>{V.a.openURL("http://vvld.in/welcomepage-notes")},svg:a(1774),title:Object(C.a)("Notes"),__source:{fileName:qa,lineNumber:29,columnNumber:15}}),i.a.createElement(Da,{onClick:()=>{V.a.openURL("http://vvld.in/welcomepage-webpanels")},svg:a(1775),title:Object(C.a)("Web Panels"),__source:{fileName:qa,lineNumber:36,columnNumber:15}}),i.a.createElement(Da,{onClick:()=>{V.a.openURL("http://vvld.in/welcomepage-tabtiling")},svg:a(1776),title:Object(C.a)("Tab Tiling"),__source:{fileName:qa,lineNumber:43,columnNumber:15}})),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:qa,lineNumber:52,columnNumber:11}},this.props.continueText)))}}var en=Ja,tn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTrackerAndAd.jsx";function an(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nn extends i.a.Component{constructor(...e){super(...e),an(this,"state",{trackerBlockingEnabled:!1,adBlockingEnabled:!1}),an(this,"updateRules",()=>{["ad_blocking","tracking"].forEach(e=>{Ht.a.contentBlocking.getActiveExceptionsList(e,t=>{const a="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";this.setState({[a]:"exempt_list"===t})})})}),an(this,"setNoBlocking",()=>{Ht.a.contentBlocking.setActiveExceptionsList("tracking","process_list"),Ht.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()}),an(this,"setTrackerBlocking",()=>{Ht.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),Ht.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()}),an(this,"setTrackerAndAdBlocking",()=>{Ht.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),Ht.a.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list"),this.updateRules()}),an(this,"getBlockLevel",()=>{let e=0;return this.state.trackerBlockingEnabled&&(e=1),this.state.trackerBlockingEnabled&&this.state.adBlockingEnabled&&(e=2),e})}componentDidMount(){this.updateRules(),Ht.a.contentBlocking.onStateChanged.addListener(this.updateRules)}componentWillUnmount(){Ht.a.contentBlocking.onStateChanged.removeListener(this.updateRules)}render(){const e=this.getBlockLevel();return(i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:tn,lineNumber:85,columnNumber:7}},i.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:tn,lineNumber:86,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:tn,lineNumber:87,columnNumber:11}},this.props.title),i.a.createElement("p",{__source:{fileName:tn,lineNumber:90,columnNumber:11}},Object(C.a)("Vivaldi has a built-in Tracker and Ad blocker to protect your privacy."),i.a.createElement("br",{__source:{fileName:tn,lineNumber:92,columnNumber:13}}),Object(C.a)("Select default level of protection.")),i.a.createElement("div",{className:"cards-container",__source:{fileName:tn,lineNumber:96,columnNumber:11}},i.a.createElement(Da,{onClick:this.setNoBlocking,title:Object(C.a)("No Blocking"),hasImageZoom:!0,tooltip:Object(C.a)("No content blocking will be applied to any site by default."),selected:0===e,svg:Ee.c,style:{"--shieldOpacity":0,"--shieldInnerOpacity":0},__source:{fileName:tn,lineNumber:97,columnNumber:13}}),i.a.createElement(Da,{onClick:this.setTrackerBlocking,title:Object(C.a)("Block Trackers"),hasImageZoom:!0,tooltip:Object(C.a)("Online trackers collect personal information and browsing habits across multiple sites."),selected:1===e,svg:Ee.c,style:{"--shieldOpacity":0,"--shieldInnerOpacity":.65},__source:{fileName:tn,lineNumber:109,columnNumber:13}}),i.a.createElement(Da,{onClick:this.setTrackerAndAdBlocking,title:Object(C.a)("Block Trackers and Ads"),hasImageZoom:!0,tooltip:Object(C.a)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),selected:2===e,svg:Ee.c,style:{"--shieldOpacity":.65,"--shieldInnerOpacity":0},__source:{fileName:tn,lineNumber:121,columnNumber:13}})),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:tn,lineNumber:135,columnNumber:11}},this.props.continueText))))}}var sn=nn,rn=a(67),on="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomeFeatureCard.jsx";const ln={tracking:Object(C.a)("Does not track you"),adblock:Object(C.a)("Ad and Tracker Blocker"),translations:Object(C.a)("Translations"),panels:Object(C.a)("Panels"),statusbar:Object(C.a)("Status bar"),fastforward:Object(C.a)("Fast Forward / Rewind"),mail:Object(C.a)("Mail"),calendar:Object(C.a)("Calendar"),feeds:Object(C.a)("Feeds")};var cn=({featureList:e,image:t,onClick:a,selected:i,title:s,style:r})=>n.createElement("button",{onClick:a,className:qe()("welcome-feature-card",{"feature-card-is-selected":i}),style:r,__source:{fileName:on,lineNumber:31,columnNumber:3}},n.createElement("div",{className:"card-outline",__source:{fileName:on,lineNumber:38,columnNumber:5}}),n.createElement("img",{className:"card-image",src:t,height:"280",width:"210",__source:{fileName:on,lineNumber:39,columnNumber:5}}),n.createElement("h2",{__source:{fileName:on,lineNumber:40,columnNumber:5}},s),n.createElement("ul",{__source:{fileName:on,lineNumber:43,columnNumber:5}},Object.keys(ln).map(t=>n.createElement("li",{key:t,className:qe()("welcome-feature-card-feature",{"welcome-feature-card-feature-enabled":e.includes(t)}),__source:{fileName:on,lineNumber:45,columnNumber:9}},ln[t])))),un=a(261),mn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageWelcome.jsx";function dn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const hn=["Rewind","FastForward"],pn={essentials:Object(C.a)("Want to get away from your current browser, but not ready to learn a lot of new stuff? Essentials is for you. We hide a lot of the Vivaldi functionality. It’s there if you need it, but not visible. You still get Ad and Tracker Blocking as well as translations... and a browser that does not track you."),classic:Object(C.a)("Looking for some new things to play with? Get Classic. The Status Bar and Panel give you easy access to a bunch of new functionality like Capture, Notes, Tab Tiling and Web Panels."),fullyLoaded:Object(C.a)("Fully Loaded includes everything from Essentials & Classic, as well as a built-in Mail client, Calendar and Feeds.")},bn={essentials:["tracking","adblock","translations"],classic:["tracking","adblock","translations","panels","statusbar","fastforward"],fullyLoaded:["tracking","adblock","translations","panels","statusbar","fastforward","mail","calendar","feeds"]},gn={essentials:"/resources/illustration-essentials-light@2x.png",classic:"/resources/illustration-creative-light@2x.png",fullyLoaded:"/resources/illustration-fully-loaded-light@2x.png"},Nn={essentials:"/resources/illustration-essentials-dark@2x.png",classic:"/resources/illustration-creative-dark@2x.png",fullyLoaded:"/resources/illustration-fully-loaded-dark@2x.png"},fn=[Y.kThemeContrast,Y.kAddressBarSearchDisplay,Y.kMailIsTurnedOff,Y.kPanelsState,Y.kStatusBarDisplay,Y.kToolbarsNavigation];function _n(e,t,a){const n=U.d.fgBgHighlight(e,t,a),i={};return Object.keys(n).forEach(e=>{i[`--${e}`]=n[e]}),i}class vn extends i.a.Component{constructor(e){super(e),dn(this,"revertUI",()=>{W.a.set(Y.kToolbarsNavigation,this.prevToolbarsNavigation),W.a.set(Y.kMailIsTurnedOff,this.prevMailIsTurnedOff),W.a.set(Y.kAddressBarSearchDisplay,this.prevAddressBarSearchDisplay),W.a.set(Y.kStatusBarDisplay,this.prevStatusBarDisplay),"hidden"===this.prevPanelVisibility&&ua.d.getPanelButtonsVisible()?o.a.dispatch({actionType:l.a.PANEL_TOGGLE_PANEL}):"switcher"===this.prevPanelVisibility?(rn.a.showContent(ua.d.getDefaultPanel()),rn.a.setContentVisible(!1)):setTimeout(()=>{"hidden"!==this.prevPanelVisibility&&"switcher"!==this.prevPanelVisibility&&rn.a.showContent(this.prevPanelVisibility)},32)}),dn(this,"getIsUIUnchanged",()=>{const e=this.props.prefValues;let t=ua.d.getSelectedPanel();return t||(t=ua.d.getPanelButtonsVisible()?"switcher":"hidden"),e[Y.kMailIsTurnedOff]===this.prevMailIsTurnedOff&&Object(un.default)(e[Y.kToolbarsNavigation],this.prevToolbarsNavigation)&&e[Y.kAddressBarSearchDisplay]===this.prevAddressBarSearchDisplay&&e[Y.kStatusBarDisplay]===this.prevStatusBarDisplay&&t===this.prevPanelVisibility}),dn(this,"getUIMode",()=>{const e=this.props.prefValues[Y.kAddressBarSearchDisplay],t=this.props.prefValues[Y.kStatusBarDisplay],a=this.props.prefValues[Y.kToolbarsNavigation],n=this.props.prefValues[Y.kMailIsTurnedOff],i=this.props.prefValues[Y.kPanelsState].barVisible;return"disabled"!==e||"off"!==t||a.includes("FastForward")||a.includes("Rewind")||i||!n?"field"===e&&"on"===t&&a.includes("FastForward")&&a.includes("Rewind")&&i&&n?"classic":"field"===e&&"on"===t&&a.includes("FastForward")&&a.includes("Rewind")&&i&&!n?"fullyLoaded":void 0:"essentials"}),dn(this,"setEssentials",()=>{const e=R.a.getDefault(Y.kToolbarsNavigation).filter(e=>!hn.includes(e));W.a.set(Y.kToolbarsNavigation,e),W.a.set(Y.kAddressBarSearchDisplay,"disabled"),W.a.set(Y.kStatusBarDisplay,"off"),W.a.set(Y.kMailIsTurnedOff,!0),ua.d.getPanelButtonsVisible()&&o.a.dispatch({actionType:l.a.PANEL_TOGGLE_PANEL})}),dn(this,"setClassic",()=>{const e=R.a.getDefault(Y.kToolbarsNavigation);W.a.set(Y.kToolbarsNavigation,e),W.a.set(Y.kMailIsTurnedOff,!0),W.a.set(Y.kAddressBarSearchDisplay,"field"),W.a.set(Y.kStatusBarDisplay,"on"),rn.a.showContent(ua.d.getDefaultPanel()),rn.a.setContentVisible(!1)}),dn(this,"setFullyLoaded",()=>{const e=R.a.getDefault(Y.kToolbarsNavigation);W.a.set(Y.kToolbarsNavigation,e),W.a.set(Y.kMailIsTurnedOff,!1),W.a.set(Y.kAddressBarSearchDisplay,"field"),W.a.set(Y.kStatusBarDisplay,"on"),setTimeout(()=>rn.a.showContent("mail"),32)});let t=ua.d.getSelectedPanel();t||(t=ua.d.getPanelButtonsVisible()?"switcher":"hidden"),this.prevAddressBarSearchDisplay=e.prefValues[Y.kAddressBarSearchDisplay],this.prevMailIsTurnedOff=e.prefValues[Y.kMailIsTurnedOff],this.prevToolbarsNavigation=e.prefValues[Y.kToolbarsNavigation],this.prevPanelVisibility=t,this.prevStatusBarDisplay=e.prefValues[Y.kStatusBarDisplay]}render(){const e=this.getUIMode(),t=F()(this.props.vivaldiSettings.BROWSER_COLOR_FG),a=F()(this.props.vivaldiSettings.BROWSER_COLOR_BG),n=t.luminance()>U.b?Nn:gn;return i.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:mn,lineNumber:256,columnNumber:7}},i.a.createElement("div",{className:qe()({"welcome-content-inner":!0,"welcome-center-horizontal":!0,"welcome-center-vertical":!0}),__source:{fileName:mn,lineNumber:257,columnNumber:9}},i.a.createElement("h1",{__source:{fileName:mn,lineNumber:263,columnNumber:11}},this.props.title),i.a.createElement("p",{style:{maxWidth:"75ch",minHeight:"5em",opacity:.75},__source:{fileName:mn,lineNumber:266,columnNumber:11}},e?pn[e]:Object(C.a)("From a focused, minimalist experience to a full-on browsing powerhouse – take your pick below to get started.")),i.a.createElement("div",{className:"feature-cards-container",__source:{fileName:mn,lineNumber:277,columnNumber:11}},i.a.createElement(cn,{onClick:this.setEssentials,title:Object(C.a)("Essentials"),featureList:bn.essentials,selected:"essentials"===e,image:n.essentials,style:_n(t,a,F()("#4c70f0")),__source:{fileName:mn,lineNumber:278,columnNumber:13}}),i.a.createElement(cn,{onClick:this.setClassic,title:Object(C.a)("Classic"),featureList:bn.classic,selected:"classic"===e,image:n.classic,style:_n(t,a,F()("#43c774")),__source:{fileName:mn,lineNumber:286,columnNumber:13}}),i.a.createElement(cn,{onClick:this.setFullyLoaded,title:Object(C.a)("Fully Loaded"),featureList:bn.fullyLoaded,selected:"fullyLoaded"===e,image:n.fullyLoaded,style:_n(t,a,F()("#EF3939")),__source:{fileName:mn,lineNumber:294,columnNumber:13}})),i.a.createElement("button",{tabIndex:0,disabled:this.getIsUIUnchanged(),className:"welcome-button",onClick:this.revertUI,__source:{fileName:mn,lineNumber:306,columnNumber:11}},Object(C.a)("Revert")),i.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:mn,lineNumber:314,columnNumber:11}},this.props.continueText)))}}var En=Object(H.a)(Object(Na.a)(vn,["BROWSER_COLOR_BG","BROWSER_COLOR_FG"]),fn),Cn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\welcome.jsx";function wn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const On=[Y.kWelcomeReadPages];class yn extends i.a.Component{constructor(e){super(e),wn(this,"setPage",e=>()=>{this.scrollToTop(),this.setState({currentPageKey:e})}),wn(this,"getNextUnread",e=>{const t=Object.keys(Fa),a=this.props.prefValues[Y.kWelcomeReadPages],n=e?t.indexOf(e):-1;for(let e=-1;e<t.length;e++){const i=e+1;if(t[i]&&!a.includes(t[i])&&i>n)return t[i]}return Ha.getUnreadPageKeys()[0]}),wn(this,"getNextPageKey",()=>{const e=Object.keys(Fa);return e.find((t,a)=>this.state.currentPageKey===e[a-1])}),wn(this,"setCurrentPageRead",()=>{const e=this.props.prefValues[Y.kWelcomeReadPages],t=this.state.currentPageKey;e.includes(t)||W.a.set(Y.kWelcomeReadPages,e.concat([t]))}),wn(this,"setAllPagesRead",()=>{const e=Ha.getUnreadPageKeys(),t=this.props.prefValues[Y.kWelcomeReadPages];W.a.set(Y.kWelcomeReadPages,t.concat(e)),V.a.openURL(ka.c.getDefaultStartpage(),{inCurrent:!0})}),wn(this,"continue",()=>{this.setCurrentPageRead(),Ha.getUnreadPageKeys().length>0?(this.scrollToTop(),this.setState(e=>({currentPageKey:this.getNextUnread(e.currentPageKey)}))):V.a.openURL(ka.c.getDefaultStartpage(),{inCurrent:!0})}),wn(this,"nextPage",()=>{this.scrollToTop(),this.setState({currentPageKey:this.getNextPageKey()})}),wn(this,"getContinueText",()=>{const e=Ha.getUnreadPageKeys(),t=e.length,a=!e.includes(this.state.currentPageKey);return t===Object.keys(Fa).length-1&&this.state.currentPageKey===Object.keys(Fa)[0]?Object(C.a)("Let’s Go"):t>1||1===t&&a?Object(C.a)("Continue"):Object(C.a)("Finish")}),wn(this,"scrollToTop",()=>{const e=this.refs.contentArea&&ie.a.findDOMNode(this.refs.contentArea);e&&e.scrollTo({behavior:"smooth",top:0})});const t=this.getNextUnread(),a=Object.keys(Fa);this.state={currentPageKey:t||a[a.length-1]},Ha.markAllAsSeen()}render(){const e=this.getContinueText(),t="personalize"===this.state.currentPageKey,{prefValues:a}=this.props,n={enter:1e3,exit:1e3};return i.a.createElement("div",{className:qe()("welcome-wrapper",{"welcome-soft-background":!t}),__source:{fileName:Cn,lineNumber:156,columnNumber:7}},i.a.createElement(la.a,{className:"welcome-content",ref:"contentArea",__source:{fileName:Cn,lineNumber:160,columnNumber:9}},"welcome_four"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:165,columnNumber:13}},i.a.createElement(En,{continue:this.continue,continueText:e,setAllPagesRead:this.setAllPagesRead,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:166,columnNumber:15}})),"tracker_and_ad"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:175,columnNumber:13}},i.a.createElement(sn,{continue:this.continue,continueText:e,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:176,columnNumber:15}})),"import_data"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:184,columnNumber:13}},i.a.createElement(Ra,{continue:this.continue,continueText:e,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:185,columnNumber:15}})),"personalize"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:193,columnNumber:13}},i.a.createElement(Ka,{continue:this.continue,continueText:e,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:194,columnNumber:15}})),"tabs"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:202,columnNumber:13}},i.a.createElement(Qa,{continue:this.continue,continueText:e,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:203,columnNumber:15}})),"touch"===this.state.currentPageKey&&i.a.createElement(ca.a,{classNames:"welcome-page",timeout:n,__source:{fileName:Cn,lineNumber:211,columnNumber:13}},i.a.createElement(en,{continue:this.continue,continueText:e,title:Fa[this.state.currentPageKey],__source:{fileName:Cn,lineNumber:212,columnNumber:15}}))),i.a.createElement("div",{className:"welcome-navigation",__source:{fileName:Cn,lineNumber:221,columnNumber:9}},Object.keys(Fa).map(e=>i.a.createElement("button",{key:e,onClick:this.setPage(e),title:Fa[e],tabIndex:-1,className:qe()("nav-page",{"nav-page-current":e===this.state.currentPageKey,"nav-page-completed":e!==this.state.currentPageKey&&a[Y.kWelcomeReadPages].includes(e)}),__source:{fileName:Cn,lineNumber:223,columnNumber:13}}))))}}var Sn=Object(H.a)(yn,On),Tn="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\InternalPage.jsx";function kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class An extends i.a.PureComponent{constructor(...e){super(...e),kn(this,"refComponent",i.a.createRef()),kn(this,"focus",()=>{const e=ie.a.findDOMNode(this.refComponent.current);if(!(e instanceof this.context.HTMLDivElement))return;if(e.contains(this.context.document.activeElement))return;const t=e.querySelector('[tabindex="0"]:not(.no-page-focus)');null==t||t.focus()})}render(){const{url:e}=this.props,t=[],a=this.props.isVisible,n=Jt.p.isStartPage(e),s=Jt.p.matchInternal("bookmarks",e),r=Jt.p.matchInternal("history",e),o=Jt.p.matchInternal("calendar",e),l=Jt.p.matchInternal("notes",e),c=Boolean(Jt.p.matchInternal("chat",e)),u=Boolean(Jt.p.matchInternal("welcome",e)),m=Boolean(Jt.p.matchInternal("themecolors",e)),d=Boolean(Jt.p.matchInternal("experiments",e)),h=Boolean(Jt.p.matchInternal("actionlog",e)),p=Boolean(Jt.p.matchInternal("private-intro",e)),b=Boolean(Jt.p.matchInternal("guest-intro",e)),g=Boolean(Jt.p.matchInternal("saga",e));let N;if(N=s?oe.Bookmarks:r?oe.History:o?oe.Calendar:l?oe.NotesManager:oe.SpeedDial,u||t.push(i.a.createElement(ba,{open:a&&n||N&&N!==oe.SpeedDial,pageId:this.props.pageId,url:e,view:N,updatePageThumbnailWithActiveWebview:this.props.updatePageThumbnailWithActiveWebview,key:"startpage",isActive:this.props.isActive,__source:{fileName:Tn,lineNumber:104,columnNumber:9}})),u&&t.push(i.a.createElement(Sn,{key:"welcome",__source:{fileName:Tn,lineNumber:119,columnNumber:9}})),m&&t.push(i.a.createElement(Ta,{key:"welcome",__source:{fileName:Tn,lineNumber:126,columnNumber:9}})),Jt.p.matchInternal("settings",e)&&t.push(i.a.createElement(le.b,{url:e,key:"settings",__source:{fileName:Tn,lineNumber:133,columnNumber:9}})),d&&t.push(i.a.createElement(S,{key:"experiments",__source:{fileName:Tn,lineNumber:140,columnNumber:9}})),b&&t.push(i.a.createElement(T.b,{key:"guest-intro",__source:{fileName:Tn,lineNumber:146,columnNumber:9}})),p&&t.push(i.a.createElement(ae,{key:"private-intro",__source:{fileName:Tn,lineNumber:153,columnNumber:9}})),h&&t.push(i.a.createElement(f,{key:"actionlog",__source:{fileName:Tn,lineNumber:160,columnNumber:9}})),g)return i.a.createElement("div",{className:"internal-page",ref:this.refComponent,__source:{fileName:Tn,lineNumber:165,columnNumber:14}},i.a.createElement(re,{__source:{fileName:Tn,lineNumber:166,columnNumber:9}}));if(Jt.p.matchInternal("mailpage",e))if(R.a.get(Y.kMailIsTurnedOff))t.push(i.a.createElement(A.a,{__source:{fileName:Tn,lineNumber:174,columnNumber:25}}));else if(Jt.p.matchUrl(Jt.p.internalUrl("mailpage","composer"),e)){const a=Object(nt.f)(e);let n;if(a.query)try{const e=JSON.parse(a.query);"object"==typeof e&&(n=e.id)}catch(e){console.warn(e)}t.push(i.a.createElement(k.a,{key:"mail",id:n,mailto:a.mailto,url:e,isActive:this.props.isActive,__source:{fileName:Tn,lineNumber:193,columnNumber:11}}))}else if(Jt.p.matchUrl(Jt.p.internalUrl("mailpage","message"),e)){let a=-1;const n=Object(nt.f)(e);if(n.path){const e=n.path.split("/");2===e.length&&(a=parseInt(e[1]))}const s=a>-1;t.push(s?i.a.createElement(L,{id:a,isActive:this.props.isActive,key:"mailmessage",__source:{fileName:Tn,lineNumber:214,columnNumber:11}}):i.a.createElement("div",{key:"mailmessage",__source:{fileName:Tn,lineNumber:218,columnNumber:11}}))}else Jt.p.matchInternal("mailpage",e)&&(Boolean(window.isMailWindow)&&!Nt.a.isIncognitoOrGuest()?t.push(i.a.createElement(j.a,{id:this.props.pageId,isActive:this.props.isActive,key:"mailview",__source:{fileName:Tn,lineNumber:226,columnNumber:13}})):t.push(i.a.createElement("div",{className:"mail-onboarding-wrapper",key:"mailview",__source:{fileName:Tn,lineNumber:234,columnNumber:13}},i.a.createElement("div",{className:"mail-onboarding",__source:{fileName:Tn,lineNumber:235,columnNumber:15}},i.a.createElement("h1",{__source:{fileName:Tn,lineNumber:236,columnNumber:17}},Object(C.a)("Mail is in Another Window")),i.a.createElement("p",{__source:{fileName:Tn,lineNumber:237,columnNumber:17}},Object(C.a)("The Vivaldi email client runs in a single window at a time."))))));else if(c){const a=new URL(e).searchParams.get("path");a&&a.includes("@");t.push(i.a.createElement("div",{key:"chat",__source:{fileName:Tn,lineNumber:252,columnNumber:52}}))}return(i.a.createElement("div",{className:"internal-page",ref:this.refComponent,__source:{fileName:Tn,lineNumber:261,columnNumber:12}},t))}}kn(An,"contextType",d.a);t.a=An},,,function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(65),r=a(2),o=a(20),l=a.n(o),c=a(312),u=a(15),m=a.n(u),d=a(606),h=a(749),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadProgressbar.jsx";const b="in_progress",g="complete",N="interrupted";function f({item:e}){const t=e.state===b,a=e.paused||e.state===N,n=e.bytesReceived,s=e.totalBytes&&e.state!==g?(n/e.totalBytes*100).toFixed(2):"100",o=Math.min(e.totalBytes/100,500);return i.a.createElement("div",{className:l()("DownloadItem-ProgressBar",{"unknown-filesize":!e.totalBytes,visible:t,loading:!a}),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":s,"aria-valuetext":Object(r.a)("Download in progress"),"aria-hidden":!t,__source:{fileName:p,lineNumber:30,columnNumber:5}},i.a.createElement("div",{className:"value",style:{width:s+"%",transition:"0.00"===s?"none":`width ${o}ms linear`},__source:{fileName:p,lineNumber:41,columnNumber:7}}))}const _="in_progress",v="complete",E="interrupted";function C({item:e}){const t=(new Date).getTime()+2e3,a=new Date(e.estimatedEndTime).getTime(),n=e.state===_,s=e.bytesReceived,{currentHumanized:o,endHumanized:l}=function(e,t){let a=Object(c.a)(e);const n=Object(c.a)(t||e);return a.split(" ")[1]===n.split(" ")[1]&&(a=a.split(" ")[0]),{currentHumanized:a,endHumanized:n}}(s,e.totalBytes),u=function(e,t,a){return e&&t>a?m()(t).fromNow():e&&t<=a?Object(r.a)("about a second"):""}(n,a,t),h=Object(r.a)("$1/s",[Object(c.a)(Object(d.a)(e))]),p=e.paused||e.state===E;return i.a.createElement("div",{className:"DownloadItem-FileSize",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadSize.jsx",lineNumber:60,columnNumber:5}},e.state===v?l:p?Object(r.a)("$1 of $2 - stopped",[o,l]):Object(r.a)("$1 of $2 at $3",[o,l,h]),u&&` (${u})`)}var w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadActionButtons.jsx";function y({onClick:e}){return i.a.createElement("button",{onClick:e,title:Object(r.a)("verb","Pause"),className:"DownloadItem-ActionButton circular",tabIndex:"-1",dangerouslySetInnerHTML:{__html:w.Ec.small},__source:{fileName:O,lineNumber:19,columnNumber:5}})}function S({onClick:e}){return i.a.createElement("button",{onClick:e,title:Object(r.a)("Resume Download"),className:"DownloadItem-ActionButton circular resume",tabIndex:"-1",dangerouslySetInnerHTML:{__html:w.rd.small},__source:{fileName:O,lineNumber:29,columnNumber:5}})}function T({onClick:e}){return i.a.createElement("button",{onClick:e,title:Object(r.a)("Show in File Manager"),className:"DownloadItem-ActionButton circular reveal",tabIndex:"-1",dangerouslySetInnerHTML:{__html:w.td.small},__source:{fileName:O,lineNumber:39,columnNumber:5}})}function k({onClick:e}){return i.a.createElement("button",{onClick:e,title:Object(r.a)("verb","Remove"),className:"DownloadItem-ActionButton circular remove",tabIndex:"-1",dangerouslySetInnerHTML:{__html:w.pd.small},__source:{fileName:O,lineNumber:51,columnNumber:5}})}var A=a(10);function I(e){return new Promise((t,a)=>{A.a.downloads.getFileIcon(e,{size:32},e=>{t(e)})})}var D="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadItem.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P="in_progress",x="complete";function L(e){const t=e.state===P,a=e.bytesReceived,n=Object(r.a)("$1/s",[Object(c.a)(Object(d.a)(e))]);return e.url+"\n• "+Object(r.a)("Added: $1",[m()(e.startTime).format("l, LT")])+(t&&e.totalBytes?"\n• "+Object(r.a)("Downloading: $1% $2",[Object(h.a)(a/e.totalBytes*100,0),e.paused?Object(r.a)("(stopped)"):""]):"")+(e.endTime?"\n• "+Object(r.a)("Complete: $1",[m()(e.endTime).format("l, LT")]):"")+"\n• "+Object(r.a)("Speed: $1",[n])}class j extends i.a.PureComponent{constructor(e){super(e),M(this,"handleMouseEnter",()=>{s.a.setStatus(this.props.item.url)}),M(this,"handleMouseLeave",()=>{s.a.clearStatus()}),M(this,"renderDownloadButton",()=>{const{item:e,onPause:t,onResume:a,onShow:n,onErase:s}=this.props;return e.state!==P||e.paused?e.canResume?i.a.createElement(S,{onClick:a.bind(null,e.id),__source:{fileName:D,lineNumber:87,columnNumber:14}}):e.state===x&&e.exists?i.a.createElement(T,{onClick:n.bind(null,e.id),__source:{fileName:D,lineNumber:91,columnNumber:14}}):i.a.createElement(k,{onClick:s.bind(null,e.id),__source:{fileName:D,lineNumber:94,columnNumber:12}}):i.a.createElement(y,{onClick:t.bind(null,e.id),__source:{fileName:D,lineNumber:83,columnNumber:14}})}),M(this,"state",{icon:void 0}),m.a.relativeTimeThreshold("ss",2)}componentDidMount(){I(this.props.item.id).then(e=>{this.setState({icon:e})})}componentDidUpdate(e,t){this.state.icon||e.item.state===this.props.item.state||I(this.props.item.id).then(e=>{this.setState({icon:e})})}render(){const{item:e}=this.props,t=(e.filename||e.finalUrl).split("\\").pop().split("/").pop(),{icon:a}=this.state;return i.a.createElement("div",{className:l()("DownloadItem",{"DownloadItem--Unavailable":!1===e.exists}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,title:L(e),__source:{fileName:D,lineNumber:125,columnNumber:7}},a&&i.a.createElement("img",{src:a,className:"DownloadItem-Icon",__source:{fileName:D,lineNumber:133,columnNumber:18}}),i.a.createElement("div",{className:"DownloadItem-FileName",__source:{fileName:D,lineNumber:135,columnNumber:9}},t),i.a.createElement(f,{item:e,__source:{fileName:D,lineNumber:139,columnNumber:9}}),i.a.createElement(C,{item:e,__source:{fileName:D,lineNumber:140,columnNumber:9}}),this.renderDownloadButton())}}var R=j,B=a(204),F=a(51),U=a(185),H="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadTree.jsx";function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const W=[{text:Object(r.a)("title","Name"),value:"filename",fullScreenTitle:Object(r.a)("Sort by Name")},{text:Object(r.a)("Type"),value:"extension",fullScreenTitle:Object(r.a)("Sort by Type")},{text:Object(r.a)("Size"),value:"bytesReceived",fullScreenTitle:Object(r.a)("Sort by Size")},{text:Object(r.a)("Added"),value:"startTime",fullScreenTitle:Object(r.a)("Sort by Date Added")},{text:Object(r.a)("Finished"),value:"endTime",fullScreenTitle:Object(r.a)("Sort by Date Finished")},{text:Object(r.a)("Address"),value:"url",fullScreenTitle:Object(r.a)("Sort by Address")}];class z extends i.a.PureComponent{constructor(...e){super(...e),V(this,"refTreeList",i.a.createRef()),V(this,"getExtension",e=>{const t=e?e.lastIndexOf("."):-1;return-1!==t?e.substring(t+1):""}),V(this,"sortForExtension",(e,t)=>{const{sortOrder:a}=this.props;if(a<=F.a.NO_SORTING)return 0;const n=e,i=t;let s=this.getExtension(n.filename),r=this.getExtension(i.filename);if(!s&&!r)return 0;if(!s)return a===F.a.ASCENDING_SORT?1:-1;if(!r)return a===F.a.ASCENDING_SORT?-1:1;if("number"==typeof s&&"number"==typeof r)return a===F.a.ASCENDING_SORT?s-r:r-s;if(s=s.toString().toLowerCase(),r=r.toString().toLowerCase(),s>r)return a===F.a.ASCENDING_SORT?1:-1;if(s<r)return a===F.a.ASCENDING_SORT?-1:1;return F.a.getDefaultComparator(a,"filename")(e,t)}),V(this,"returnFalse",()=>!1),V(this,"selectByIds",e=>{e.forEach(e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.selectById(e,{ctrlKey:!0,metaKey:!0})})}),V(this,"selectByNode",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.selectByNode(e)}),V(this,"selectByIndex",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.selectByIndex(e)}),V(this,"scrollToId",e=>{var t;null===(t=this.refTreeList.current)||void 0===t||t.scrollToId(e)}),V(this,"isSelected",e=>{var t;return null===(t=this.refTreeList.current)||void 0===t?void 0:t.isItemSelected(e)}),V(this,"getSelectedNodes",()=>{var e;return(null===(e=this.refTreeList.current)||void 0===e?void 0:e.selectionModel.selectedIds)||[]}),V(this,"getSelectedNode",()=>{var e;return null===(e=this.refTreeList.current)||void 0===e?void 0:e.getSelectedItem()}),V(this,"onNodeMouseDown",()=>{var e;null===(e=this.refTreeList.current)||void 0===e||e.focusTree()}),V(this,"onNodeSelected",e=>{e?this.props.onSelected(parseInt(e.id)<0?void 0:e):this.props.onSelected(void 0)}),V(this,"onNodeDoubleClick",(e,t)=>{this.props.onOpen(t.id)}),V(this,"onNodesActivated",(e,t)=>{t.forEach(e=>{this.props.onOpen(e.id)})}),V(this,"handleErase",e=>(this.props.nodes.filter(t=>e.includes(t.id)).forEach(({id:e})=>this.props.onErase(e)),Promise.resolve())),V(this,"rowComponent",e=>{const t=e.node;return(i.a.createElement(R,{key:t.id,item:t,onErase:this.props.onErase,onShow:this.props.onShow,onPause:this.props.onPause,onResume:this.props.onResume,__source:{fileName:H,lineNumber:167,columnNumber:7}}))})}render(){const e="extension"===this.props.sortField?{sortOrder:this.props.sortOrder,sortField:this.props.sortField,comparator:this.sortForExtension}:void 0;return(i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,{fields:W,manualSorting:!1,onSortChange:this.props.onSortChange,keyAccess:this.props.keyAccess,sortField:this.props.sortField,sortOrder:this.props.sortOrder,__source:{fileName:H,lineNumber:186,columnNumber:7}}),i.a.createElement("section",{className:"outerScrollbar",__source:{fileName:H,lineNumber:193,columnNumber:7}},i.a.createElement(U.a,{ref:this.refTreeList,settings:"DOWNLOADS_TREE",rowComponent:this.rowComponent,nodes:this.props.nodes,menu:this.props.menu,isFolder:this.returnFalse,hasChildren:this.returnFalse,delete:this.handleErase,onSelect:this.onNodeSelected,enableDragAndDrop:!1,onItemMouseDown:this.onNodeMouseDown,onItemDoubleClick:this.onNodeDoubleClick,onItemsActivated:this.onNodesActivated,rowHeight:52,sorting:e,__source:{fileName:H,lineNumber:194,columnNumber:9}}))))}}t.a=z},function(e,t,a){"use strict";var n=a(21),i=a(47),s=a(29),r=a(0),o=a.n(r),l=a(166),c=a(68),u=a(131),m=a(85),d=a(786),h=a(546),p=a(56),b=a(2),g=a(172),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\VerticalMailEntry.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends r.PureComponent{constructor(...e){super(...e),f(this,"renderTopEntryLine",()=>r.createElement(r.Fragment,null,this.props.isParent&&r.createElement("div",{className:"status-indicators",__source:{fileName:N,lineNumber:41,columnNumber:11}},r.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:a(447)},__source:{fileName:N,lineNumber:42,columnNumber:13}})),r.createElement("div",{className:"subject",__source:{fileName:N,lineNumber:48,columnNumber:9}},this.props.queued&&r.createElement("span",{className:"mail-queued",dangerouslySetInnerHTML:{__html:a(1223)},__source:{fileName:N,lineNumber:50,columnNumber:13}}),r.createElement("div",{className:"subject-title",__source:{fileName:N,lineNumber:54,columnNumber:11}},this.props.variables.subject)),r.createElement(h.a,{className:"labels",flags:this.props.flags,__source:{fileName:N,lineNumber:58,columnNumber:9}}))),f(this,"renderLowerEntryLine",()=>{const e=void 0!==this.props.level&&this.props.level>0,t=this.props.variables,n=e&&!this.props.isParent?16:0;let i=0;return"number"==typeof this.props.level&&(i=16*(this.props.level-1)),r.createElement(r.Fragment,null,r.createElement("div",{className:"status-indicators",__source:{fileName:N,lineNumber:79,columnNumber:9}},this.props.renderStatusIndicator(t,"vertical")),r.createElement("div",{className:"from",style:{paddingLeft:this.props.level?`${i+n}px`:0,minWidth:this.props.level?`${50+i+n}px`:0},__source:{fileName:N,lineNumber:83,columnNumber:9}},this.props.isParent&&e&&r.createElement("div",{className:"status-indicators",__source:{fileName:N,lineNumber:95,columnNumber:13}},r.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:a(447)},__source:{fileName:N,lineNumber:96,columnNumber:15}})),r.createElement("div",{className:"mail-contact-name",__source:{fileName:N,lineNumber:103,columnNumber:11}},t.contactString),0!==this.props.attachment&&r.createElement("span",{className:"mail-status-indicator mail-attachment-indicator",title:Object(b.a)("Attachment"),dangerouslySetInnerHTML:{__html:a(728)},__source:{fileName:N,lineNumber:107,columnNumber:13}})),e&&r.createElement(h.a,{className:"labels",flags:this.props.flags,__source:{fileName:N,lineNumber:114,columnNumber:11}}),r.createElement("div",{className:"maildate",__source:{fileName:N,lineNumber:119,columnNumber:9}},r.createElement("div",{className:"mailDateInfo",__source:{fileName:N,lineNumber:120,columnNumber:11}},t.datetime)))}),f(this,"getTitle",()=>{const e=p.a.getSelectedFolder(),t=e&&s.a.getByFolder(e.accountId,e.path),a=this.props.variables,n=Object(g.a)(this.props.sources,t)?"":` (${this.props.unseen?Object(b.a)("Unseen"):Object(b.a)("Unread")})`;return`${a.subject}${n}\n`+Object(b.a)("From: $1",[a.contactString])+"\n"+Object(b.a)("Sent: $1",[a.datetime])})}render(){const e=0===this.props.level,t=0!==this.props.level;return r.createElement("div",{className:this.props.variables.classes,"data-id":this.props.id,title:this.getTitle(),__source:{fileName:N,lineNumber:148,columnNumber:7}},e&&r.createElement(r.Fragment,null,r.createElement("div",{className:"mail_entry_row",__source:{fileName:N,lineNumber:154,columnNumber:11}},this.renderTopEntryLine()),r.createElement("div",{className:"mail_entry_row",__source:{fileName:N,lineNumber:155,columnNumber:11}},this.renderLowerEntryLine())),t&&r.createElement("div",{className:"mail_entry_row",__source:{fileName:N,lineNumber:159,columnNumber:11}},this.renderLowerEntryLine()))}}var v=_,E=a(20),C=a.n(E),w=a(276),O=a(302),y=a(207),S=a(15),T=a.n(S),k=a(3),A=a(1),I=a(66),D=a(9),M="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailEntry.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x=[A.kCalendarRelativeDates],L={sameDay:Object(b.a)("[Today] $1",["LT"]),lastDay:Object(b.a)("[Yesterday] $1",["LT"]),nextDay:Object(b.a)("[Tomorrow]",["LT"]),nextWeek:Object(b.a)("[Next] $1",["dddd"]),lastWeek:"dddd LT",sameElse:"LL LT"},j={...L,lastWeek:"dddd LT",sameElse:"ll LT"},R={...L,lastWeek:"ddd LT",sameElse:"L LT"},B=[145,170,205];class F extends r.Component{constructor(...e){super(...e),P(this,"renderStatusIndicator",(e,t)=>{const n=r.createElement("span",{className:"mail-status-indicator",__source:{fileName:M,lineNumber:83,columnNumber:26}}),{selectedFilter:i,sources:s}=this.props,o=Object(O.a)(s),l=i?Object(w.a)(s,i):Object(w.a)(s),c=Object(g.a)(s,i),u=this.props.isParent&&this.props.unreadInThread&&c;return o?r.createElement("span",{className:"mail-status-indicator read-status spam",dangerouslySetInnerHTML:{__html:D.ac.small},__source:{fileName:M,lineNumber:95,columnNumber:9}}):l?r.createElement("span",{className:"mail-status-indicator read-status trash",dangerouslySetInnerHTML:{__html:D.Wd.small},__source:{fileName:M,lineNumber:102,columnNumber:9}}):e.messageIsFlagged&&"vertical"===t?this.renderFlags(this.props,e,"small"):Object(I.q)(this.props)?r.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:D.Pb.small},__source:{fileName:M,lineNumber:111,columnNumber:11}}):Object(I.r)(this.props)?r.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:D.Xb.small},__source:{fileName:M,lineNumber:117,columnNumber:9}}):!c||u?r.createElement("span",{className:"mail-status-indicator read-status",dangerouslySetInnerHTML:{__html:a(u?1671:1672)},__source:{fileName:M,lineNumber:122,columnNumber:15}}):n}),P(this,"renderFlags",(e,t,a)=>r.createElement("span",{className:`mail-status-indicator ${t.flagColor}`,dangerouslySetInnerHTML:{__html:D.nb[a]},__source:{fileName:M,lineNumber:135,columnNumber:7}})),P(this,"renderMailEntryHorizontal",e=>{const{columns:t}=this.props;if(!t)return null;const n=this.props.level&&!this.props.isParent?16:0;let i=0;"number"==typeof this.props.level&&(i=16*this.props.level);const s=T()(this.props.sentDate).format("LT"),o=T()().isSame(this.props.sentDate,"day");return r.createElement("div",{className:e.classes,"data-id":this.props.id,__source:{fileName:M,lineNumber:156,columnNumber:7}},t.map(l=>{switch(l.id){case"unread":return r.createElement("label",{key:l.id,__source:{fileName:M,lineNumber:163,columnNumber:17}},this.renderStatusIndicator(e,"horizontal"));case"contact":return r.createElement("label",{key:l.id,className:"from",__source:{fileName:M,lineNumber:169,columnNumber:17}},r.createElement("span",{__source:{fileName:M,lineNumber:170,columnNumber:19}},e.contactString));case"subject":return r.createElement("label",{key:l.id,className:"subject",style:{width:t?"var(--subjectWidth)":null,marginLeft:this.props.level?`${i+n}px`:0},__source:{fileName:M,lineNumber:175,columnNumber:17}},this.props.isParent&&r.createElement("span",{className:"expand-icon",onClick:this.props.handleExpandClick,dangerouslySetInnerHTML:{__html:a(447)},__source:{fileName:M,lineNumber:185,columnNumber:21}}),this.props.queued&&r.createElement("span",{className:"mail-queued",dangerouslySetInnerHTML:{__html:a(1223)},__source:{fileName:M,lineNumber:191,columnNumber:21}}),r.createElement("span",{__source:{fileName:M,lineNumber:195,columnNumber:19}},e.subject));case"label":return r.createElement("label",{key:l.id,className:"labels",__source:{fileName:M,lineNumber:200,columnNumber:17}},r.createElement("div",{className:"adjustment-mail-labels",__source:{fileName:M,lineNumber:201,columnNumber:19}},r.createElement(h.a,{flags:this.props.flags,style:{paddingLeft:"unset"},__source:{fileName:M,lineNumber:202,columnNumber:21}})));case"flag":return r.createElement("label",{key:l.id,__source:{fileName:M,lineNumber:211,columnNumber:17}},e.messageIsFlagged&&this.renderFlags(this.props,e,"small"));case"attachment":return r.createElement("label",{key:l.id,className:"mail-status-indicator",__source:{fileName:M,lineNumber:218,columnNumber:17}},this.props.attachment>0&&2048!==this.props.attachment&&r.createElement("span",{__source:{fileName:M,lineNumber:220,columnNumber:21}},Object(b.a)("$1 item","$1 items",[this.props.attachment])),2048===this.props.attachment&&r.createElement("span",{__source:{fileName:M,lineNumber:224,columnNumber:21}},Object(b.a)("1+ items")));case"size":return r.createElement("label",{key:l.id,__source:{fileName:M,lineNumber:230,columnNumber:17}},r.createElement("span",{__source:{fileName:M,lineNumber:231,columnNumber:19}}));case"sentDate":return r.createElement("label",{key:l.id,className:"maildate",__source:{fileName:M,lineNumber:236,columnNumber:17}},o&&l.width<=B[0]?r.createElement("span",{__source:{fileName:M,lineNumber:238,columnNumber:23}},s):r.createElement(r.Fragment,null,r.createElement("span",{__source:{fileName:M,lineNumber:240,columnNumber:25}},e.datetime.split(s)[0]),l.width>B[0]&&r.createElement("span",{__source:{fileName:M,lineNumber:242,columnNumber:27}},s)));default:console.warn("Unknown sorting field:",l.id)}}))})}contactsToString(e){let t="";if(e&&e.length>0){y.a.get(e).forEach(e=>{t&&(t+=", "),t+=e.name?e.name:e.address})}return t}render(){const e={mail_entry:!0,"mail-parent":this.props.isParent,"mail-child":this.props.isChild},t={classes:C()(e,"loading"),contactString:"",contactColumnTitle:"",datetime:"",flagColor:"",messageIsFlagged:!1,subject:""};t.subject=this.props.subject||"(no subject)",t.messageIsFlagged=Object(I.p)(this.props),t.classes=C()(e,{unread:!Object(g.a)(this.props.sources,this.props.selectedFilter)&&!this.props.unseen,unseen:this.props.unseen});const a=p.a.getSelectedFolder(),n=a&&(a.type||a.path);[k.tb,k.l,k.hb].includes(n)?(t.contactString=this.contactsToString(this.props.toIds),t.contactColumnTitle=Object(b.a)("mail","To")):(t.contactString=this.contactsToString(this.props.fromIds),t.contactColumnTitle=Object(b.a)("mail","From")),t.messageIsFlagged&&(t.flagColor=`flag-color flag-${Object(I.j)(this.props.flags).toLowerCase()}`);const i=(this.props.columns||[]).find(e=>"sentDate"===e.id),s=i&&i.width>B[1]?i.width>B[2]?L:j:R;return t.datetime=this.props.prefValues[A.kCalendarRelativeDates]?T()(this.props.sentDate).calendar(null,s):T()(this.props.sentDate).format(s.sameElse),"horizontal"===this.props.direction||"vertical_wide"===this.props.direction?this.renderMailEntryHorizontal(t):r.createElement(v,{variables:t,handleExpandClick:this.props.handleExpandClick,unseen:this.props.unseen,id:this.props.id,queued:this.props.queued,flags:this.props.flags,sources:this.props.sources,isParent:this.props.isParent,level:this.props.level,attachment:this.props.attachment,renderStatusIndicator:this.renderStatusIndicator,__source:{fileName:M,lineNumber:328,columnNumber:14}})}}var U=Object(n.a)(F,x),H=a(542),V=a(199),W=a(31),z=a(6),G=a(758),K=a(407),Y=a(185),$=a(264),X=a.n($),Z=a(34);const Q=function(e){return!!e.isParent&&!e.isExpanded&&!!e.unreadInThread},q=function(e,t,a){for(let n=t+1;n<e.length;n++){const t=e[n];if(!Object(g.a)(t.sources,a)||Q(t))return n}return-1},J=function(e,t,a){for(let n=t-1;n>=0;n--){const t=e[n];if(!Object(g.a)(t.sources,a)||Q(t))return n}return-1};var ee=function(e,t,a,n,i="undefined"){if("undefined"===i){if(a){const a=q(e,t,n);return a>-1?a:J(e,t,n)}{const a=J(e,t,n);return a>-1?a:q(e,t,n)}}return"previous"===i?a?J(e,t,n):q(e,t,n):a?("next"!==i&&console.warn("Direction to look for unread mail is not correct"),q(e,t,n)):J(e,t,n)},te=a(787),ae=a(4),ne=a(386),ie=a(192),se=a(37),re=a(284),oe=a(402),le=a(58),ce="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchList.jsx";function ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class me extends r.PureComponent{constructor(...e){super(...e),ue(this,"refTree",r.createRef()),ue(this,"state",{list:s.a.getListEntries(),showCreateLabel:!1}),ue(this,"messageListChanged",e=>{switch(e.target){case"gotoUnread":return void this._gotoUnreadFiltered();case"gotoNextUnread":return void this._gotoNextUnread();case"gotoPreviousUnread":return void this._gotoPreviousUnread();case"listEntries":return void this.updateListEntriesDebounced(e)}}),ue(this,"updateListEntriesDebounced",Object(re.a)(e=>{const{isLoading:t,updateSelection:a,updateScrollPosition:n}=e,i=t?{isLoading:!0}:{isLoading:!1,list:s.a.getListEntries()};this.setState(i,()=>{a&&this.updateMessageSelection(n)})},100,{maxWait:200})),ue(this,"delete",(e,t)=>p.a.isTrashFolderSelected()||t?c.a.prepareDelete(!0):c.a.prepareDelete(!1)),ue(this,"isValidForClipboard",e=>!1),ue(this,"isValidAddTarget",e=>!1),ue(this,"hasChildren",e=>e.children&&e.children.length),ue(this,"isFolder",e=>this.hasChildren(e)),ue(this,"getSelectedNodes",()=>{const e=this.refTree.current;if(!e)return[];const t=e.selectionModel.selectedIds,a=e.state.renderedArray;return t.map(e=>a.find(t=>t.id===e.id)).filter(Boolean)}),ue(this,"getNumSelected",()=>this.refTree.current?this.refTree.current.selectionModel.selectedIds.length:0),ue(this,"_getComparator",()=>z.a.get(A.kMailSearchAscending)?oe.b:Object(oe.c)(oe.b)),ue(this,"_findIndex",(e,t,a)=>{if(-1===e)return 0===t.length||z.a.get(A.kMailSearchAscending)?-1:-t.length-1;if(z.a.get(A.kMailSearchThreading)&&!z.a.get(A.kMailSearchAscending)){const a=2*ie.a,n=(e,t)=>{const n=e.id.substr(0,a);return n<t?1:n===t?0:-1},i=e.substr(0,a);let s=X()(t,i,n);if(s>=0){for(;s>0&&e<t[s].id&&t[s-1].id.substr(0,a)===i;)s--;for(;s<t.length-1&&e>t[s].id&&t[s].id.substr(0,a)===i;)s++;e!==t[s].id&&(s=-s-1)}return s}return X()(t,{id:e},a)}),ue(this,"setMessageSelection",(e=[],t)=>{const a=this.refTree.current;if(!a)return;const n=t?t.id:-1;a.selectionModel.setSelectedIds(e),a.selectionModel.leadIndex=n,a.selectionModel.anchorIndex=n,a.updateSelectionState(),a.saveSelectionModel(),this.onSelect(t)}),ue(this,"updateMessageSelection",(e=!1)=>{const t=this.refTree.current;if(!t)return this.onSelect();const a=t.state.renderedArray;if(0===a.length)return this.setMessageSelection();const n=this._getComparator(),i=t.selectionModel.selectedIds.map(e=>e.id).filter(e=>this._findIndex(e,a,n)>=0);if(0===i.length){let e=t.selectionModel.leadIndex;if(-1===e&&(e=t.selectionModel.anchorIndex),-1===e)return this.setMessageSelection();let s=this._findIndex(e,a,n);s<0&&(s=-s-1);const r=Math.min(s,a.length-1),o=a[r];i.push(o.id)}const s=i[0],r=this._findIndex(s,a,n),o=a[r];this.setMessageSelection(i,o),e&&t.scrollIntoView(r)}),ue(this,"_markSelectedRead",()=>{c.a.markRead()}),ue(this,"_markSelectedThreadRead",()=>{z.a.get(A.kMailSearchThreading)?c.a.markThreadRead():c.a.markRead()}),ue(this,"_markSelectedUnread",()=>{c.a.markUnread()}),ue(this,"_markSelectedFlagged",()=>{c.a.markFlagged()}),ue(this,"_toggleSenderAsMailingList",()=>{this.getSelectedNodes().forEach(e=>{const t=y.a.get(e.fromIds);i.a.toggleSenderAsMailingList(t[0].address)})}),ue(this,"_markSelectedUnflagged",()=>{c.a.markUnflagged()}),ue(this,"_goToNext",()=>{const e=this.refTree.current;if(!e)return;const t=e.selectionModel.leadIndex,a=e.state.renderedArray;let n=this._findIndex(t,a,this._getComparator());if(n<0&&(n=-n-1),n<a.length-1){const t=a[n+1];t.isParent&&!t.isExpanded?(e.toggleExpandModel(t.id),this._goToNext()):t&&e.selectByNode(t)}}),ue(this,"_goToNextUnread",e=>{const t=this.refTree.current;if(!t)return;const a=t.selectionModel.leadIndex,n=t.state.renderedArray;let i=this._findIndex(a,n,this._getComparator());i<0&&(i=-i-1);const r=p.a.getSelectedFolder(),o=r&&s.a.getByFolder(r.accountId,r.path);if(!o)throw new Error("Filter not found");const l=ee(n,i,z.a.get(A.kMailSearchAscending),o,e);if(l>-1){const a=n[l];a.isParent&&!a.isExpanded?(t.toggleExpandModel(a.id),this._goToNextUnread(e)):t.selectByNode(a)}}),ue(this,"_markAndGotoNextUnread",K.a.throttleSync(()=>{this._markSelectedRead(),this._gotoUnreadFiltered("undefined")})),ue(this,"_gotoNextUnread",K.a.throttleSync(()=>{this._gotoUnreadFiltered("next")})),ue(this,"_gotoPreviousUnread",K.a.throttleSync(()=>{this._gotoUnreadFiltered("previous")})),ue(this,"_gotoUnreadFiltered",(e="undefined")=>{const t=p.a.getSelectedFolder();if(!t)return;const a=s.a.getByFolder(t.accountId,t.path);a&&Z.b.shouldExcludeFlag(a.filterValue,k.O.SEEN)||this._goToNextUnread(e)}),ue(this,"createCustomLabel",()=>{this.setState({showCreateLabel:!0})}),ue(this,"getLabelMenuItems",()=>{const e=u.a.getActiveListEntry(),t=e?Object(I.e)(e.flags):[],a=c.a.getCustomLabelsMenu(t);return a.push(W.a.separatorItem,{handler:this.createCustomLabel,ellipsis:!0,...Object(ae.a)("Add New Label")}),t.length>0&&a.push(W.a.separatorItem,{handler:c.a.clearAllLabels.bind(null,t),...Object(ae.a)("Clear All Labels")}),a}),ue(this,"_scrollOrMarkAndGotoNext",e=>{const t=document.querySelector("#mail_view .mail_body webview");t instanceof HTMLElement&&"function"==typeof t.executeScript&&t.executeScript({code:this._injectCode(e.shiftKey)},e=>{e&&!1===e[0]&&(this._markSelectedRead(),this._goToNext())})}),ue(this,"_injectCode",e=>e?"b__ = document.documentElement.querySelector('body');\n      if (b__.scrollTop !== 0) {\n        b__.scrollBy({\n          top: - b__.clientHeight - 30,\n          left: 0,\n          behavior: 'smooth'\n        });\n        true;\n      }":"b__ = document.documentElement.querySelector('body');\n      if (b__.scrollHeight - b__.scrollTop > b__.clientHeight) {\n        b__.scrollBy({\n          top: b__.clientHeight - 30,\n          left: 0,\n          behavior: 'smooth'\n        });\n        true;\n      } else {\n        false;\n      }"),ue(this,"_getTrashPath",e=>l.a.getFolderByType(e,k.xb).then(e=>e&&e.length?e[0].path:void 0)),ue(this,"_sendSelected",()=>{ne.a.sendSelected(this.getSelectedNodes())}),ue(this,"customFlagMenuData",()=>{const e=u.a.getActiveListEntry(),t=e?Object(I.j)(e.flags):"";return c.a.getStandardFlagsMenu(t)}),ue(this,"getMenuCapability",(e,t,a)=>{const n=!p.a.shouldDisableTrashButton()&&!p.a.shouldDisableSpamButton()&&p.a.isOptionAllowedAsDefault(k.vb),i=e=>{const t=p.a.getSelectedFolder(),a=t&&s.a.getByFolder(t.accountId,t.path);return Boolean(e)&&Object(g.a)(e.sources,a)},r=e=>{const t=p.a.getSelectedFolder();if(t&&s.a.getByFolder(t.accountId,t.path))return Object(O.a)(e.sources)},o=e=>z.a.get(A.kMailSearchThreading)&&1===this.getNumSelected()&&Boolean(e)&&Boolean(e.children),l=e=>1===this.getNumSelected()&&Boolean(e)&&e.fromIds.length>0?y.a.get(e.fromIds)[0].address:"",u=()=>s.a.getByIds(a.sourceFilterIds).some(e=>e.accountId===k.c&&e.path===k.gb),m=()=>{const e=p.a.getSelectedFolder();return!!e&&le.a.getFolderType(e.accountId,e.path)===k.yb};switch(e.action){case"COMMAND_MAIL_COMPOSE_NEW_MESSAGE":return Promise.resolve({handler:V.a.createDraft.bind(null,void 0),...t(e,{})});case"CONTEXT_SEND":return Promise.resolve({handler:this._sendSelected,visible:Boolean(a)&&u(),...t(e,{})});case"COMMAND_MAIL_REPLY":return Promise.resolve({visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.rb),...t(e,{})});case"COMMAND_MAIL_REPLY_ALL":return Promise.resolve({handler:c.a.replyAll,visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.rb),...t(e,{})});case"COMMAND_MAIL_FORWARD":return Promise.resolve({visible:Boolean(a)&&!u(),...t(e,{})});case"COMMAND_MAIL_MARK_READ":return Promise.resolve({visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.Ab)&&!i(a),...t(e,{})});case"COMMAND_MAIL_MARK_UNREAD":return Promise.resolve({visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.Ab)&&i(a),...t(e,{})});case"CONTEXT_GOTO":return Promise.resolve({visible:Boolean(a),...t(e,{})});case"COMMAND_MAIL_GOTO_NEXT_UNREAD":case"COMMAND_MAIL_GOTO_PREVIOUS_UNREAD":return Promise.resolve({visible:Boolean(a)&&!m(),...t(e,{})});case"COMMAND_MAIL_MARK_READ_AND_GOTO_NEXT_UNREAD":return Promise.resolve({visible:Boolean(a),...t(e,{})});case"CONTEXT_CONTAINER_MOVE":return Promise.resolve({items:c.a.getMoveToFolderMenu(),visible:Boolean(a),...t(e,{})});case"CONTEXT_ADD_FLAG":return Promise.resolve({handler:this._markSelectedFlagged,visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.P)&&!Object(I.p)(a),...t(e,{})});case"CONTEXT_REMOVE_FLAG":return Promise.resolve({handler:this._markSelectedUnflagged,visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.P)&&Object(I.p)(a),...t(e,{})});case"CONTEXT_CONTAINER_FLAGS":return Promise.resolve({items:this.customFlagMenuData(),visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.P),...t(e,{})});case"CONTEXT_CONTAINER_LABELS":return Promise.resolve({items:this.getLabelMenuItems(),visible:Boolean(a)&&p.a.isOptionAllowedAsDefault(k.R),...t(e,{})});case"CONTEXT_EDIT":return Promise.resolve({handler:c.a.openMessage,visible:Boolean(a)&&p.a.isFolderAnEditMailFolder(),...t(e,{})});case"CONTEXT_MARK_AS_SPAM":return Promise.resolve({handler:c.a.markAsJunk,visible:Boolean(a)&&n&&!1===r(a),...t(e,{})});case"CONTEXT_NOT_SPAM":return Promise.resolve({handler:c.a.markAsNotJunk,visible:Boolean(a)&&n&&!0===r(a),...t(e,{})});case"CONTEXT_CONTAINER_TRASH":const d=(e=>{const t=p.a.getSelectedFolder(),a=t&&s.a.getByFolder(t.accountId,t.path);if(Boolean(e)&&a)return Object(w.a)(e.sources,a)})(a);return Promise.resolve({items:null==d||p.a.shouldDisableTrashButton()?[]:Object(te.a)(d,k.S.list),visible:Boolean(a)&&void 0!==d,...t(e,{})});case"CONTEXT_SENDER":return Promise.resolve({visible:Boolean(a),...t(e,{})});case"COMMAND_MAIL_ENABLE_SENDER_VIEW":{const n=l(a);return Promise.resolve({visible:Boolean(a)&&1===this.getNumSelected()&&n.length>0,...t(e,{})})}case"CONTEXT_SENDER_IS_MAILING_LIST":{const n=l(a);return Promise.resolve({handler:this._toggleSenderAsMailingList,checked:s.a.isSenderMailingList(n),visible:Boolean(a)&&1===this.getNumSelected()&&n.length>0,...t(e,{})})}case"CONTEXT_THREAD":return Promise.resolve({visible:Boolean(a),...t(e,{})});case"COMMAND_MAIL_ENABLE_THREADED_VIEW":return Promise.resolve({visible:Boolean(a)&&1===this.getNumSelected(),...t(e,{})});case"COMMAND_MAIL_MARK_THREAD_READ":return Promise.resolve({visible:Boolean(a)&&o(a)&&!i(a),...t(e,{})});case"COMMAND_MAIL_MARK_THREAD_UNREAD":return Promise.resolve({visible:Boolean(a)&&o(a)&&i(a),...t(e,{})});default:return Promise.resolve({...t(e,{})})}}),ue(this,"getMenuVisibility",(e,t)=>{switch(e.action){case"CONTEXT_EXPAND_ALL":case"CONTEXT_COLLAPSE_ALL":return z.a.get(A.kMailSearchThreading);default:return!1}}),ue(this,"handleExpandClick",()=>{this.refTree.current&&this.refTree.current.toggleSelectedExpansion()}),ue(this,"onItemDoubleClick",e=>{c.a.openMessage()}),ue(this,"onItemMouseDown",(e,t)=>{1===t.button&&(t.preventDefault(),t.stopPropagation())}),ue(this,"onItemMouseUp",(e,t)=>{1===t.button&&(t.preventDefault(),t.stopPropagation())}),ue(this,"getRowComponentProps",e=>{const t=e.node,a=p.a.getSelectedFolder();let n;if(a){const{accountId:e,path:t}=a;n=s.a.getByFolder(e,t)}else console.warn("No folder selected");return{...t,direction:"horizontal"===this.props.position||"vertical_wide"===this.props.position?"horizontal":"vertical",handleExpandClick:this.handleExpandClick,selectedFilter:n,columns:this.props.columns}}),ue(this,"getHeight",({index:e})=>"vertical"===this.props.position?z.a.get(A.kMailSearchThreading)&&this.refTree.current&&this.refTree.current.state.renderedArray[e].isChild?24:48:24),ue(this,"onSelect",e=>{this.props.onSelect(e)}),ue(this,"onEmptyTrash",()=>{console.error("not implemented")}),ue(this,"onFocus",()=>{m.a.bind("enter",c.a.openMessage)}),ue(this,"_unbind",()=>{m.a.unbind("enter",c.a.openMessage)}),ue(this,"onBlur",()=>{this._unbind()}),ue(this,"onCustomLabelDlgClose",(e,t)=>{if(e){const e=u.a.getActiveListEntry(),a=e?Object(I.e)(e.flags):[];c.a.toggleLabel(t,a)(),i.a.addLabelsFilter(t)}this.setState({showCreateLabel:!1})}),ue(this,"onKeyDown",e=>{const t=!!e.ctrlKey;switch(e.key){case"z":!t||e.shiftKey||e.altKey||(i.a.undo(),e.preventDefault(),e.stopPropagation());break;case" ":e.preventDefault(),e.repeat||this._scrollOrMarkAndGotoNext(e)}})}componentDidMount(){s.a.addChangeListener(this.messageListChanged)}componentWillUnmount(){this._unbind(),s.a.removeChangeListener(this.messageListChanged)}render(){const e=p.a.getSelectedFolder(),t=z.a.get(A.kMailSearchThreading)?G.b.getThreadsAsTree(this.state.list.slice(),z.a.get(A.kMailSearchAscending)):this.state.list;let a,n=!1;e&&(a="MAIL_SEARCH_"+e.accountId+e.path,H.a.isSubscribable(e)&&(n=!e.subscribed));const s="vertical"===z.a.get(A.kMailViewLayout)?this.getHeight:24,o={name:"mailsearchlist",getCapability:this.getMenuCapability,getVisibility:this.getMenuVisibility};return r.createElement("div",{className:"list-wrapper",onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,__source:{fileName:ce,lineNumber:918,columnNumber:7}},!n&&this.state.isLoading&&r.createElement("span",{className:"mail-loading",__source:{fileName:ce,lineNumber:923,columnNumber:9}},Object(b.a)("Loading selected view...")),!n&&!this.state.isLoading&&this.state.list.length>0&&r.createElement(Y.a,{ref:this.refTree,rowComponent:U,getRowComponentProps:this.getRowComponentProps,nodes:t,onSelect:this.onSelect,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,delete:this.delete,disableSelectAfterDelete:!0,isFolder:this.isFolder,menu:o,hasChildren:this.hasChildren,settings:a,rootId:0,isValidAddTarget:this.isValidAddTarget,isValidForClipboard:this.isValidForClipboard,rowHeight:s,expandedByDefault:!0,selectionStoreKey:se.m,columns:this.props.columns,__source:{fileName:ce,lineNumber:928,columnNumber:11}}),this.state.showCreateLabel&&r.createElement(d.a,{onClose:this.onCustomLabelDlgClose,viewMode:"float",__source:{fileName:ce,lineNumber:953,columnNumber:11}}),!n&&!this.state.isLoading&&0===this.state.list.length&&r.createElement("span",{className:"mail-loading",__source:{fileName:ce,lineNumber:958,columnNumber:11}},Object(b.a)("No messages in selected view")),e&&n&&r.createElement("div",{className:"mail-folder-subscribe",__source:{fileName:ce,lineNumber:963,columnNumber:11}},r.createElement("h2",{__source:{fileName:ce,lineNumber:964,columnNumber:13}},Object(b.a)("Subscribe to Folder")),r.createElement("p",{__source:{fileName:ce,lineNumber:965,columnNumber:13}},Object(b.a)("You are currently not subscribed to the folder $2 of $1.",[e.accountId,e.path])),r.createElement("input",{type:"button",className:"primary",value:Object(b.a)("Subscribe"),onClick:i.a.subscribeMailbox.bind(this,e.accountId,e.path),__source:{fileName:ce,lineNumber:968,columnNumber:13}})))}}var de=me,he=a(282),pe=a(22),be="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearchOptions.jsx";function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ne=[A.kKeyboardTabToAll];class fe extends r.Component{constructor(...e){super(...e),ge(this,"_isMounted",!1),ge(this,"state",{allMessages:Boolean(!!he.a.getOptions()&&he.a.getOptions().allMessages),numFound:s.a.getListEntries().length,queryFound:s.a.getQueryNumFound()}),ge(this,"shouldSearchAllMessages",e=>{const t={...he.a.getOptions(),allMessages:e};i.a.setSearchOptions(t),i.a.updateQueryResults(s.a.getQuery())}),ge(this,"updateSearchOptions",()=>{const e=he.a.getOptions(),t=Boolean(e&&e.allMessages);this._isMounted&&this.setState({allMessages:t})}),ge(this,"updateResults",()=>{this._isMounted&&this.setState({numFound:s.a.getListEntries().length,queryFound:s.a.getQueryNumFound()})}),ge(this,"removeFilter",()=>{const e=s.a.getByFolder(this.props.currentAccountId,this.props.currentPath);e&&i.a.removeFilter(e.id)})}UNSAFE_componentWillMount(){he.a.addChangeListener(this.updateSearchOptions),s.a.addChangeListener(this.updateResults)}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1,he.a.removeChangeListener(this.updateSearchOptions),s.a.removeChangeListener(this.updateResults)}render(){const e=this.state.allMessages,t=s.a.getByFolder(this.props.currentAccountId,this.props.currentPath);let a=Object(b.a)("Selected");const n=this.props.currentAccountId===k.M;return t&&("string"==typeof t.selectedAccountId&&"string"==typeof t.selectedName?a=Object(b.a)(t.selectedAccountId)+"/"+Object(b.a)(t.selectedName):n||(a=Object(b.a)(this.props.currentAccountId)+"/"+Object(b.a)(this.props.currentName))),r.createElement("div",{className:"toolbar toolbar-default mail-search",__source:{fileName:be,lineNumber:124,columnNumber:7}},r.createElement("span",{__source:{fileName:be,lineNumber:126,columnNumber:9}},Object(b.a)("Search in")),r.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:be,lineNumber:128,columnNumber:9}},r.createElement(pe.a,{isPressed:!e,onClick:this.shouldSearchAllMessages.bind(null,!1),title:a,__source:{fileName:be,lineNumber:129,columnNumber:11}}),r.createElement(pe.a,{ref:e=>this._allButton=e,isPressed:e,onClick:this.shouldSearchAllMessages.bind(null,!0),title:Object(b.a)("mail","All"),__source:{fileName:be,lineNumber:134,columnNumber:11}})),r.createElement("span",{title:e?Object(b.a)("Found in all folders: $1",[this.state.queryFound]):Object(b.a)("Found in all folders: $1. Found in current folder: $2",[this.state.queryFound,this.state.numFound]),__source:{fileName:be,lineNumber:142,columnNumber:9}},Object(b.a)("Found: $1",[this.state.numFound])),r.createElement(pe.a,{style:{marginLeft:"auto"},onClick:n?this.removeFilter:this.props.saveSearch,title:n?Object(b.a)("mail_filter","Delete"):Object(b.a)("Save"),tooltip:n?Object(b.a)("mail_filter","Delete Filter"):Object(b.a)("Save search as Filter"),__source:{fileName:be,lineNumber:152,columnNumber:9}}))}}var _e=Object(n.a)(fe,Ne),ve=a(11),Ee=a(221),Ce=a(204),we=a(51),Oe=a(153),ye="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailSearch.jsx";function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Te=[A.kKeyboardTabToAll,A.kMailSearchAscending,A.kMailViewLayout];class ke extends o.a.Component{constructor(e){super(e),Se(this,"setSlideBarStyle",()=>{s.a.hasNoListEntries()?this.setState({slideBarStyle:{backgroundColor:"unset"}}):this.setState({slideBarStyle:{}})}),Se(this,"getMailSortFields",e=>{const t=this.props.selectedFolder&&[k.tb,k.l,k.hb].includes(le.a.getFolderType(this.props.selectedFolder.accountId,this.props.selectedFolder.path));return[{value:"unread",text:Object(b.a)("Unread"),icon:D.U.small,fullScreenTitle:Object(b.a)("Sort by Unread"),width:Oe.a,visible:"vertical"!==e},{value:"flag",text:Object(b.a)("Flag"),icon:D.nb.small,fullScreenTitle:Object(b.a)("Sort by Flags"),width:Oe.a,visible:"vertical"!==e},{value:"contact",text:t?Object(b.a)("Recipient"):Object(b.a)("Sender"),icon:D.ab,fullScreenTitle:t?Object(b.a)("Sort by Message Recipient"):Object(b.a)("Sort by Message Sender"),width:150,visible:"vertical"!==e},{value:"subject",text:Object(b.a)("Subject"),fullScreenTitle:Object(b.a)("Sort by Subject"),width:300,visible:"vertical"!==e,key:!0},{value:"label",text:Object(b.a)("Labels"),icon:D.Db.small,fullScreenTitle:Object(b.a)("Sort by Labels"),width:"vertical_wide"===e?Oe.a:140,visible:"vertical"!==e},{value:"attachment",text:Object(b.a)("Attachment"),icon:D.r,fullScreenTitle:Object(b.a)("Sort by Attachments"),width:Oe.a,visible:"vertical"!==e},{value:"size",text:Object(b.a)("Size"),icon:D.x,fullScreenTitle:Object(b.a)("Sort by Size"),width:100,visible:"horizontal"===e},{value:"sentDate",text:Object(b.a)("Date"),icon:D.y,fullScreenTitle:t?Object(b.a)("Sort by Date Sent"):Object(b.a)("Sort by Date Received"),width:150,visible:"vertical"!==e}]}),Se(this,"onSortChange",(e,t)=>{"sentDate"===t&&ve.a.set(A.kMailSearchAscending,!this.props.prefValues[A.kMailSearchAscending])}),Se(this,"saveSearch",e=>{const t=s.a.getByFolder(this.props.selectedFolder.accountId,this.props.selectedFolder.path)||{},a=s.a.getQuery(),n={...t.filterValue,query:a},r={name:a,accountId:k.M,path:Math.random().toString(36).substring(2),filterValue:{...n},selectedAccountId:this.props.selectedFolder.accountId,selectedName:t.name};i.a.addFilter(r)}),Se(this,"onUpdateRow",e=>{this.setState({columns:e})}),Se(this,"onSaveRow",()=>{Object(Oe.b)(this.state.columns,"vertical_wide"===this.props.prefValues[A.kMailViewLayout]?"mail_vertical":"mail_horizontal")}),this.state={columns:Object(Oe.e)()["vertical_wide"===this.props.prefValues[A.kMailViewLayout]?"mail_vertical":"mail_horizontal"]||Object(Oe.d)(this.getMailSortFields(e.prefValues[A.kMailViewLayout])),slideBarStyle:s.a.hasNoListEntries()?{backgroundColor:"unset"}:{}}}UNSAFE_componentWillReceiveProps(e){this.props.prefValues[A.kMailSearchAscending]!==e.prefValues[A.kMailSearchAscending]&&i.a.applyFilter(),this.props.prefValues[A.kMailViewLayout]!==e.prefValues[A.kMailViewLayout]&&this.setState({columns:Object(Oe.e)()["vertical_wide"===e.prefValues[A.kMailViewLayout]?"mail_vertical":"mail_horizontal"]||Object(Oe.d)(this.getMailSortFields(e.prefValues[A.kMailViewLayout]))})}componentDidUpdate(e){this.props.hasNoListEntries!==e.hasNoListEntries&&this.setSlideBarStyle()}render(){const e=this.getMailSortFields(this.props.prefValues[A.kMailViewLayout]),t=this.props.selectedFolder,a="horizontal"===this.props.position?"top":"left";return o.a.createElement("div",{id:"mail_search",style:this.props.style,__source:{fileName:ye,lineNumber:256,columnNumber:7}},(this.props.queryString||t&&t.accountId===k.M)&&o.a.createElement(_e,{saveSearch:this.saveSearch,currentPath:this.props.selectedFolder.path,currentName:this.props.selectedFolder.name,currentAccountId:this.props.selectedFolder.accountId,__source:{fileName:ye,lineNumber:259,columnNumber:11}}),t&&t.accountId===k.i&&o.a.createElement("div",{className:"toolbar toolbar-default mail-search",__source:{fileName:ye,lineNumber:267,columnNumber:11}},o.a.createElement("span",{className:"mail-search-toolbar-label",__source:{fileName:ye,lineNumber:268,columnNumber:13}},Object(b.a)("Displaying mails to and from $1",[t.name]))),t&&t.accountId===k.ub&&o.a.createElement("div",{className:"toolbar toolbar-default mail-search",__source:{fileName:ye,lineNumber:274,columnNumber:11}},o.a.createElement("span",{className:"mail-search-toolbar-label",__source:{fileName:ye,lineNumber:275,columnNumber:13}},Object(b.a)("Displaying a single thread"))),o.a.createElement(Ce.a,{key:this.state.columns.flatMap(e=>e.id).join()||"sortfield",fields:e,columns:this.state.columns,onSortChange:this.onSortChange,sortField:"sentDate",sortOrder:this.props.prefValues[A.kMailSearchAscending]?we.a.ASCENDING_SORT:we.a.DESCENDING_SORT,manualSorting:!1,keyAccess:this.props.prefValues[A.kKeyboardTabToAll],fullsize:"horizontal"===this.props.prefValues[A.kMailViewLayout]||"vertical_wide"===this.props.prefValues[A.kMailViewLayout],onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,style:this.state.slideBarStyle,__source:{fileName:ye,lineNumber:280,columnNumber:9}}),o.a.createElement(de,{position:this.props.position,onSelect:this.props.onSelect,columns:this.state.columns,__source:{fileName:ye,lineNumber:297,columnNumber:9}}),o.a.createElement(Ee.a,{onSlidebarPosition:this.props.onSlidebarPosition,position:a,__source:{fileName:ye,lineNumber:302,columnNumber:9}}))}}t.a=Object(n.a)(ke,Te)},function(e,t,a){"use strict";var n=a(0),i=a(769),s=a(971),r=(a(720),a(260)),o=a(216),l=a(68),c=a(131),u=a(24),m=a(32),d=a(42),h=a(445),p=a(8);function b(e,t){return p.a.messages.update(e,{rsvpState:t})}var g=a(7),N=a(70);function f(e="Undefined"){const t=(m.a.getEvents()||[]).find(t=>t.uid===e&&!t.trash);if(!t)throw new Error(`Event with uid "${e}" not found.`);return t}var _=new class{async replyToInvite(e,t,a){if("DECLINECOUNTER"===a)return void console.error("Can not reply to invite with method",a);let n,i=!1,s=!1;try{n=f(e.uid)}catch(e){}if(n&&n.invites?n.invites.forEach(e=>{if(e.address===t){e.partstat=a,i=!0;const{event_id:t,...n}=e;g.a.calendar.updateInvite(n)}}):e.invites&&e.invites.forEach(e=>{e.address===t&&(e.partstat=a,i=!0,"ACCEPTED"!==a&&"TENTATIVE"!==a||(s=!0))}),!i)return void console.warn("Attendee not found. Not replying to event invite");let r=n;s&&(r=await this.addEventToCalendar(e)),r||(r=function(e){const t=(e.invites||[]).map(e=>({...e,event_id:"",id:""})),a=(e.notifications||[]).map(e=>({...e,id:""})),{is_template:n,...i}=e;return{...i,id:"",start:e.start||0,end:e.end||0,notifications:a,invites:t,attachment:d.a.stringToAttachments(e.attachment)}}(e));const o=(r.invites||[]).find(e=>e.address===t);if(!o)throw new Error("Attendee email address not found");{r.invites=[o],await h.a.sendReplyMails(r,t,a);const e=c.a.getActiveMessage();e&&(e.rsvpState=a,b(e.id,e.rsvpState),l.a.setActiveMessage(e))}}async declineCounter(e,t){let a;try{a=f(e.uid)}catch(t){return void console.error("Error finding existing event to decline counter for",e)}await h.a.sendReplyMails(a,t,"DECLINECOUNTER");const n=c.a.getActiveMessage();if(n){const e={...n,rsvpState:"DECLINECOUNTER"};b(e.id,e.rsvpState),l.a.setActiveMessage(e)}}addEventToCalendar(e){const{recurrence:t,...a}=e;return t&&(a.rrule=N.a.optionsToString({...t.origOptions,count:0===t.origOptions.count?1:t.origOptions.count})),u.a.createEvent(a)}updateEventInCalendar(e,t){const{is_template:a,...n}=e,i=t.invites||[],s=n.invites||[],r=i.map(e=>{const t=s.find(t=>t.address===e.address);if(t)return e.partstat=t.partstat,e.name=t.name,e}).filter(Boolean);s.forEach(e=>{i.find(t=>t.address===e.address)||r.push({...e,event_id:t.id,id:""})});const o={...n,id:t.id,start:n.start||t.start,end:n.end||t.end,notifications:t.notifications,invites:r,attachment:d.a.stringToAttachments(n.attachment)};u.a.updateEvent(o)}handleCancellation(e){const t=f(e.uid),a={pageId:m.a.getMailResourceKey()};u.a.trashEvent(a,t.id)}handleReply(e){const t=f(e.uid);if(!t.invites)throw new Error("Target event missing invites data.");if(!e.invites)throw new Error("Incoming event missing invites data.");const a=e.invites[0];let n=!1;t.invites.forEach(e=>{e.address===a.address&&(g.a.calendar.updateInvite({id:e.id,partstat:a.partstat}),n=!0)}),n&&u.a.loadPromise()}},v=a(56),E=a(36),C=a(6),w=a(2),O=a(235),y=a(15),S=a.n(y),T=a(393);var k=function(){const[e,t]=n.useState(m.a.getEvents());return n.useEffect(()=>{const e=e=>{"calendarDataReady"===e&&t(m.a.getEvents())};return m.a.addChangeListener(e),()=>{m.a.removeChangeListener(e)}},[]),e},A=a(3),I=a(252),D=a(545),M=a(396),P=a(261),x=a(1),L=a(349);const j=new TextDecoder("utf-8",{fatal:!0}),R={ACCEPTED:{existing:Object(w.a)("You have accepted the invite"),update:Object(w.a)("You accepted the previous invite")},DECLINED:{existing:Object(w.a)("You have declined the invite"),update:Object(w.a)("You declined the previous invite")},TENTATIVE:{existing:Object(w.a)("You have tentatively accepted the invite"),update:Object(w.a)("You tentatively accepted the previous invite")},"NEEDS-ACTION":{existing:Object(w.a)("You still have to reply to the invite"),update:Object(w.a)("You did not reply to the previous invite")},DECLINECOUNTER:{existing:Object(w.a)("You have declined the counter proposal"),update:""},DELEGATED:{existing:Object(w.a)("You delegated invite to another person"),update:Object(w.a)("You delegated previous invite to another person")}};function B(e){return Object(L.d)(Object(O.a)(e).replace(/\n/g,"<br />"),{attachments:{}}).sanitized}function F(e,t,a){const n=[],{url:i,location:s,organizer:r,invites:o,recurrence:l}=t,c=S()(t.start),u=S()(t.end);t.allDay?c.isSame(u,"day")?(n.push([Object(w.a)("Date"),c.format("LL"),""]),n.push(["","",""])):(n.push([Object(w.a)("Starts"),c.format("LL"),""]),n.push([Object(w.a)("Ends"),u.format("LL"),""])):(n.push([Object(w.a)("Starts"),c.format("LLLL"),""]),n.push([Object(w.a)("Ends"),u.format("LLLL"),""])),n.push([" ",l?Object(M.b)(l):"",""]),n.push([Object(w.a)("Organizer"),r||"",""]),n.push([Object(w.a)("Attendees"),o&&o.map(e=>`<p>${e.address}</p>`).join("\r\n"),""]),n.push([Object(w.a)("Location"),s,""]),n.push([Object(w.a)("URL"),i?`<a href="${i}">${i}</a>`:"",""]),n.push([Object(w.a)("Description"),B(t.description||""),""]);const m=parseInt(null==a?void 0:a.sequence)||0,d=parseInt(t.sequence)||0,h=a&&("REQUEST"===e&&m<d||"COUNTER"===e&&m===d);if(h&&a){const e=S()(a.start),c=S()(a.end);if(a.allDay!==t.allDay)a.allDay?(n[0][2]=`<p>${e.format("LL")}</p>`,e.isSame(c,"day")||(n[1][2]=`<p>${c.format("LL")}</p>`)):(n[0][2]=`<p>${e.format("LLLL")}</p>`,n[1][2]=`<p>${c.format("LLLL")}</p>`);else{const i=t.allDay?"LL":"LLLL";a.start!==t.start&&(n[0][2]=`<p>${e.format(i)}</p>`),a.end!==t.end&&(n[1][2]=`<p>${c.format(i)}</p>`)}if(Object(P.default)(a.recurrence,l)||(n[2][2]=`<p>${Object(M.b)(a.recurrence)}</p>`),a.organizer!==r&&(n[3][2]=`<p>${a.organizer||"&nbsp"}</p>`),Object(P.default)((a.invites||[]).map(e=>e.address),(o||[]).map(e=>e.address))||(n[4][2]=a.invites&&a.invites.map(e=>{var a;return`<p ${(null===(a=t.invites)||void 0===a?void 0:a.some(t=>t.address===e.address))?'class=" Event-Attendee--Exists"':""}>${e.address}</p>`}).join("\r\n")||"&nbsp"),s&&a.location!==s&&(n[5][2]=`<p>${a.location||"&nbsp"}</p>`),i&&a.url!==i){const e=a.url;n[6][2]=e?`<p><a href="${e}">${e}</a></p>`:"&nbsp"}t.description&&a.description!==t.description&&(n[7][2]=`<p>${B(a.description||"")}</p>`||"&nbsp")}const p=n.filter(e=>e[1]||e[2]),b=`<h1 class="Event-Title">${t.title}</h1>`;if(h&&a){return`\n      <dl class="Event-Props Event-Props--Diff">\n        <dt />\n        <dd>${b}</dd>\n        <dd>${`<h2 class="${t.title===a.title?"Event-Title--Previous":"Event-Title--Previous Event-Title--Changed"}">${a.title}</h2>`}</dd>\n      ${p.map(([e,t,a])=>`\n        <dt>${e}</dt>\n        <dd>${t||""}</dd>\n        <dd class="Event-Prop--Previous">${a||""}</dd>`).join("\r\n")}\n      </dl>\n    `}return`\n    ${b}\n    <dl class="Event-Props">\n    ${p.map(([e,t])=>`\n      <dt>${e}</dt>\n      <dd>${t||""}</dd>`).join("\r\n")}\n    </dl>\n  `}function U(){const e=Object(D.a)();return`\n  .Event {\n    --colorFg: ${e.colorFg};\n    --colorBg: ${e.colorBg};\n    --colorBgDark: ${e.colorBgDark};\n    --colorBorder: ${e.colorBorder};\n    --colorHighlight: ${e.colorHighlight};\n    color: var(--colorFg);\n    font-family: 'SF', '.SFNSDisplay', HelveticaNeue, LucidaGrande, system-ui, sans-serif;\n    font-size: 13px;\n    font-weight: 400;\n    border: 1px solid var(--colorBorder);\n    margin-bottom: 12px;\n  }\n  .Event-Message {\n    padding: 12px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    border-bottom: 1px solid var(--colorBorder);\n    align-items: start;\n  }\n  .Event-Rsvp {\n    margin-bottom: 12px;\n    padding: 12px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    background-color: var(--colorBgDark);\n    border-bottom: 1px solid var(--colorBorder);\n  }\n  .Event-Title {\n    font-size: 16px;\n    margin: 12px;\n  }\n  .Event-Title--Previous {\n    font-size: 16px;\n    margin: 0;\n    font-weight: normal;\n  }\n  .Event-Title--Changed {\n    text-decoration: line-through;\n  }\n  .Event-Props {\n    display: grid;\n    grid-template-columns: max-content 1fr;\n    gap: 6px 18px;\n    margin: 12px;\n  }\n  .Event-Props--Diff {\n    grid-template-columns: max-content 1fr 1fr;\n  }\n  .Event-Props--Diff .Event-Title {\n    margin: 0;\n  }\n  .Event-Prop--Previous p {\n    text-decoration: line-through;\n  }\n  .Event-Prop--Previous p.Event-Attendee--Exists {\n    text-decoration: none;\n  }\n  span {\n    flex: 1 1 auto;\n  }\n  input[type=button] {\n    padding: 6px 24px;\n    margin-left: 12px;\n  }\n  dd, dt, p {\n    margin: 0 0 3px 0;\n    padding: 0;\n    word-break: break-word;\n  }\n  p:last-child {\n    margin: 0;\n  }\n  dt {\n    font-weight: 600;\n  }\n  `}const H=(e,t=!1)=>{const a=t?Object(w.a)("Can not determine email address to reply from. Which one should be used to send your reply?"):Object(w.a)("More than one of your email addresses are invited. Which one should be used to send your reply?");return{title:Object(w.a)("Select Reply Mail"),body:a,actions:e.map((e,t)=>({title:e,action:e,default:0===t})),cancelAction:{title:Object(w.a)("Cancel"),action:"cancel"}}};function V(e,t,a){const i=k(),[s,r]=n.useState();return n.useMemo(()=>{t&&!a?t.parseCalendar().then(t=>{let a;if(t){let n="";n="string"==typeof t.content?t.content:j.decode(t.content),a=function(e,t,a){var n,i;const s=Object(T.a)(t),r=s.METHOD;let o=s.VEVENT[0];1===(null===(n=o.EXCEPTIONS)||void 0===n?void 0:n.length)&&1===Object.keys(o).length&&(o=o.EXCEPTIONS[0]);const l=Object(I.b)(o),c=null===(i=s.VEVENT[0].ATTENDEE)||void 0===i?void 0:i.some(e=>"GROUP"===e.params.CUTYPE),u=C.a.get(x.kMailAccounts),m=v.a.getSelectedFolder(),d=l.invites||[],h=d.map(e=>e.address);let p=u.filter(e=>h.includes(e.MAIL_EMAIL)).map(e=>e.MAIL_EMAIL);const{accountId:b,path:g}=m||{};p.includes(b)?p=[b]:g&&b===A.j&&(p=[g.split("/")[0]]);const N=(null==e?void 0:e.rsvpState)||"NEEDS-ACTION",f=a.find(e=>e.uid===l.uid&&!e.trash),O=f&&f.invites||[],y=`\n    <input type="button" value="${Object(w.a)("Accept")}" onclick="console.log('Accept')" />\n    <input type="button" value="${Object(w.a)("Maybe")}" onclick="console.log('Maybe')" />\n    <input type="button" value="${Object(w.a)("Decline")}" onclick="console.log('Decline')" />\n  `,S=`\n    <input type="button" value="${Object(w.a)("Accept")}" onclick="console.log('AcceptCounter')" />\n    <input type="button" value="${Object(w.a)("Decline")}" onclick="console.log('DeclineCounter')" />\n  `;let k="",D="",M="";switch(r){case"PUBLISH":k=Object(w.a)("This message contains event data published for your information. No reply is expected of you"),D=`<input type="button" value="${Object(w.a)("Add To Calendar")}" onclick="console.log('Add')" />`;break;case"REQUEST":if(M=`<span>${Object(w.a)("RSVP")}</span>`,0===p.length&&!f){k=Object(w.a)("This message contains a calendar event invite. No matching email account was found for event invitees. Check the attendee list below to make sure this invite is intended for you."),D=`<input type="button" value="${Object(w.a)("Add To Calendar")}" onclick="console.log('Add')" />`,c&&u.length>0?M+=y:M+=`<p>${Object(w.a)("Will not be sent since no matching attendee record was found.")}</p>`;break}f?(f.sequence||0)<(l.sequence||0)?(k=Object(w.a)("This message contains an update to a calendar event.")+R[N].update,D=`<input type="button" value="${Object(w.a)("Update in Calendar")}" onclick="console.log('Update')" />`,M+=`\n          ${"NEEDS-ACTION"===N?y:R[N].existing}\n        `):0!==p.length||c?"NEEDS-ACTION"===N?(k=Object(w.a)("This message contains an invitation to an event you have in your calendar. You have not responded to the invitation."),M+=y):(k=Object(w.a)("This message contains an existing event you have in your calendar."),M+=R[N].existing):(k=Object(w.a)("This message contains an invitation to an event you have in your calendar."),M=""):(D=`<input type="button" value="${Object(w.a)("Add To Calendar")}" onclick="console.log('Add')" />`,"NEEDS-ACTION"===N?(k=Object(w.a)("This message contains a calendar event invite."),M+=y):(k=Object(w.a)("This message contains a calendar event invite you have responded to."),M+=R[N].existing));break;case"CANCEL":f?(k=Object(w.a)("This message contains an event cancellation."),D=`<input type="button" value="${Object(w.a)("Remove from Calendar")}" onclick="console.log('Delete')" />`):k=Object(w.a)("This message contains cancellation of an event you don’t have in your calendar.");break;case"REPLY":if(!f){k=Object(w.a)("This message contains an invite reply for an event you do not have in your calendar.");break}const e=O.map(e=>e.address);if(d&&1===d.length)if(e.includes(d[0].address)){const{partstat:e,address:t}=d[0],a=O.find(e=>e.address===t);switch(a&&a.partstat!==e?(k=Object(w.a)("This message contains an event invite reply."),D=`<input type="button" value="${Object(w.a)("Update Event in Calendar")}" onclick="console.log('Partstat')" />`):k=Object(w.a)("This message contains an event invite reply which is already processed."),e){case"ACCEPTED":k+=Object(w.a)(" $1 has accepted your event invitation.",[t]);break;case"TENTATIVE":k+=Object(w.a)(" $1 has tentatively accepted your event invitation.",[t]);break;case"DECLINED":k+=Object(w.a)(" $1 has declined your event invitation.",[t])}}else k=Object(w.a)("Fraudulent event invite reply found.");else k=Object(w.a)("Invalid event invite reply found.");break;case"COUNTER":f?(f.sequence||0)===(l.sequence||0)?(k=Object(w.a)("This message contains a counter proposal for the following event."),"DECLINECOUNTER"===N?k+=R[N].existing:D=S):k=Object(w.a)("This message contains an outdated counter proposal. It will be ignored."):k=Object(w.a)("This message contains a counter proposal for an event which was not found. It will be ignored.");break;case void 0:f?k=Object(w.a)("This message contains an existing event you have in your calendar."):(k=Object(w.a)("This message contains an attached calendar event."),D=`<input type="button" value="${Object(w.a)("Add To Calendar")}" onclick="console.log('Add')" />`);break;default:k=Object(w.a)("Unsupported method parameter “$1”.",[r])}return{markup:`\n    <div class="Event">\n      <div class="Event-Message"><span>${k}</span>${D}</div>\n      ${M?`<div class="Event-Rsvp">${M}</div>`:""}\n      ${F(r,l,f)}\n    </div>\n      `,style:U(),prepend:!0,messageHandler:async t=>{const{message:a}=t;let n="";if("DeclineCounter"===a)n=(null==e?void 0:e.from[0].address)||"";else if(["Accept","Maybe","Decline","AcceptCounter"].includes(a)||"DeclineCounter"===a&&!n){if(1===p.length)n=p[0];else if(0===p.length){if(1===u.length)n=u[0].MAIL_EMAIL;else if(m){const{accountId:e,path:t}=m;u.some(t=>t.MAIL_EMAIL===e)?n=e:t&&e===A.j&&(n=t.split("/")[0])}if(!n){const{action:e}=await E.a.showCalendarModal({modal:H(u.map(e=>e.MAIL_EMAIL),!0)});n=e}}else{const{action:e}=await E.a.showCalendarModal({modal:H(p)});n=e}if("cancel"===n)return}switch(a){case"Accept":_.replyToInvite(l,n,"ACCEPTED");break;case"Maybe":_.replyToInvite(l,n,"TENTATIVE");break;case"Decline":_.replyToInvite(l,n,"DECLINED");break;case"Add":_.addEventToCalendar(l);break;case"Update":case"AcceptCounter":f&&_.updateEventInCalendar(l,f);break;case"DeclineCounter":_.declineCounter(l,n);break;case"Delete":_.handleCancellation(l);break;case"Partstat":_.handleReply(l)}}}}(e,n,i)}r(a)}):r()},[t,a,i,e]),s}const W={type:"text",content:""};t.a=n.forwardRef((function(e,t){const{backgroundColor:a,color:l,fromAddress:c,isRss:u,isSenderTrusted:m,linkColor:d,message:h,onUnblockExternalContent:p,raw:b,showRaw:g}=e,N=function(e,t,a){const[s,o]=n.useState([]);return n.useMemo(()=>{if(e)if(a)if(t)t.getByteString().then(e=>o([{type:"text",content:e}]));else if(e.bodyParts&&"string"==typeof e.bodyParts[0].content){const t=e.bodyParts[0].content,a=Object(r.b)(e.bodyParts);i.a.build(e,t,a).then(e=>o([{type:"text",content:e}]))}else o([]);else e.bodyParts?o(e.bodyParts):t&&t.parseMainPart().then(o);else o([])},[e,t,a]),s}(h,b,g),f=function(e,t){const[a,i]=n.useState();return n.useEffect(()=>{const a=[];return!e||t?i():((async()=>{const t=Object(o.d)(e.mimeTree).filter(e=>e.mimeType&&e.mimeType.startsWith("image/"));for(const n of t){const t=await e.parse(n.mimeTree);if(1===t.length&&"attachment"===t[0].type){const{content:e,mimeType:n}=t[0],i=new Blob([e],{type:"string"==typeof n?n:""}),s=URL.createObjectURL(i);a.push(s)}}if(a.length>0){const e={markup:a.map(e=>`<img src="${e}" />`).join(""),style:"img {\n            margin-top: 12px;\n            display: inline-block;\n            vertical-align: top;\n            max-width: 100%;\n            height: auto;\n          }",prepend:!1};i(e)}else i()})(),()=>{a.forEach(e=>URL.revokeObjectURL(e))})},[e,t]),a}(b,g),_=V(h,b,g);let v;N.length>0&&(v=_||f);const E=[];let C;if(h&&(C=N.find(e=>"html"===e.type),C||(C=N.find(e=>"text"===e.type))),C||(C=W),"html"===C.type||"text"===C.type){const e=!!h&&!h.trusted&&!m;E.push(n.createElement(s.a,{backgroundColor:a,blockHTTPLeaks:e,bodyParts:"html"===C.type?N:void 0,color:l,fromAddress:c,inject:v,isRss:u,linkColor:d,onUnblockExternalContent:p,ref:t,textOrHtml:C,showRaw:g,key:"mainBody",__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageBodyPart.jsx",lineNumber:149,columnNumber:21}}))}return E}))},function(e,t,a){"use strict";var n=a(50),i=a(1279),s=a(28),r=a(0),o=a.n(r),l=a(2),c=a(20),u=a.n(c),m="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\Dialog.jsx";function d({children:e,className:t,height:a}){const n={"--Height":a||48};return(r.createElement("footer",{style:n,className:u()("DialogFooter",t),__source:{fileName:m,lineNumber:32,columnNumber:5}},e))}function h(e){const{children:t,className:a,height:n}=e,i={"--Height":n||48};return r.createElement("div",{style:i,className:u()("DialogContent",a),__source:{fileName:m,lineNumber:48,columnNumber:10}},t)}var p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkPopup\\BookmarkPopup.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g({value:e,title:t,onChange:a,autoFocus:n}){return o.a.createElement("label",{className:"BookmarkInputField",__source:{fileName:p,lineNumber:22,columnNumber:10}},o.a.createElement("span",{className:"BookmarkInputField-Title",__source:{fileName:p,lineNumber:23,columnNumber:5}},t),o.a.createElement("input",{className:"BookmarkInputField-Input",type:"text",value:e,onChange:a,autoFocus:n,__source:{fileName:p,lineNumber:24,columnNumber:5}}))}class N extends o.a.PureComponent{constructor(...e){super(...e),b(this,"refLocationSelector",o.a.createRef()),b(this,"scrollToId",async e=>{var t;await(null===(t=this.refLocationSelector.current)||void 0===t?void 0:t.scrollToId(e))})}render(){const{title:e,onTitleChange:t,autoFocus:a,url:n,onUrlChange:r,nickname:c,onNicknameChange:u,description:m,onDescriptionChange:b,onParentIdChange:N,parentId:f,onFolderTitleChange:_,locationSelectMode:v,onDeleteBookmarkClick:E,onClosePopupClick:C,onLocationSelectModeChange:w}=this.props,O=function(e){const t=s.b.getItemById(e);return null==t?void 0:t.title}(f);return o.a.createElement("form",{className:"BookmarkPopup",onSubmit:C,__source:{fileName:p,lineNumber:91,columnNumber:12}},o.a.createElement("header",{className:"DialogHeader BookmarkPopup-Header",__source:{fileName:p,lineNumber:92,columnNumber:7}},o.a.createElement("h1",{className:"DialogHeader-HeaderText",__source:{fileName:p,lineNumber:93,columnNumber:9}},Object(l.a)("Added Bookmark")),O&&o.a.createElement("p",{__source:{fileName:p,lineNumber:97,columnNumber:23}},Object(l.a)("to $1",[O]))),o.a.createElement(h,{className:"BookmarkPopup-Content",__source:{fileName:p,lineNumber:100,columnNumber:7}},o.a.createElement("div",{className:"BookmarkPopup-TextInputWrapper",__source:{fileName:p,lineNumber:101,columnNumber:9}},o.a.createElement(g,{title:Object(l.a)("bookmarkeditor","Name"),value:e,onChange:({currentTarget:e})=>{t(e.value)},autoFocus:"title"===a,__source:{fileName:p,lineNumber:102,columnNumber:11}}),o.a.createElement(g,{title:Object(l.a)("URL"),value:n,onChange:({currentTarget:e})=>r(e.value),autoFocus:"url"===a,__source:{fileName:p,lineNumber:110,columnNumber:11}}),o.a.createElement(g,{title:Object(l.a)("Nickname"),value:c,onChange:({currentTarget:e})=>u(e.value),autoFocus:"nickname"===a,__source:{fileName:p,lineNumber:117,columnNumber:11}}),o.a.createElement(g,{title:Object(l.a)("Description"),value:m,onChange:({currentTarget:e})=>b(e.value),autoFocus:"description"===a,__source:{fileName:p,lineNumber:124,columnNumber:11}})),o.a.createElement(i.a,{ref:this.refLocationSelector,className:"BookmarkPopup-LocationSelector",onParentIdChange:N,parentId:f,onFolderTitleChange:_,mode:v,onModeChange:w,__source:{fileName:p,lineNumber:133,columnNumber:9}})),o.a.createElement(d,{className:"BookmarkPopup-Footer",__source:{fileName:p,lineNumber:144,columnNumber:7}},o.a.createElement("input",{type:"submit",value:Object(l.a)("bookmarkeditor","Done"),__source:{fileName:p,lineNumber:145,columnNumber:9}}),o.a.createElement("input",{type:"button",className:"danger",onClick:E,value:Object(l.a)("bookmarkeditor","Remove"),__source:{fileName:p,lineNumber:149,columnNumber:9}})))}}var f=a(13),_=a(11),v=a(6),E=a(22),C=a(180),w=a(10),O=a(121);let y;function S({type:e,data:t}){if("bookmarkData"===e){const{title:e,url:a,description:n,image:i}=t;y&&y({title:e,url:a,description:n,thumbnail:i}),w.a.runtime.onMessage.removeListener(S)}}var T=async function(e){const t=new Promise(e=>{y=e});w.a.runtime.onMessage.addListener(S);try{await Object(O.k)(e,{action:"fetchBookmarkMetadata"})}catch(e){return console.error(e),null}return t},k=a(23),A=a(1),I=a(9);a.d(t,"a",(function(){return j}));var D="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\BookmarkButton\\BookmarkButton.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function P(e,t){return n.a.update(e,t)}function x(e){return v.a.get(A.kBookmarksFetchPageMetadata)&&!Object(k.n)(e)}function L(e){const t=(null==e?void 0:e.getIn(["extData","thumbnail"]))||"";return{url:(null==e?void 0:e.url)||"",title:e?Object(k.d)(e.url,e.title):"",description:"",thumbnail:t}}class j extends o.a.PureComponent{constructor(...e){var t,a,i,r,l,c;super(...e),M(this,"state",{status:"standby",isBookmarkPopupOpen:!1,title:(null===(t=this.props.bookmarkData)||void 0===t?void 0:t.title)||"",url:(null===(a=this.props.bookmarkData)||void 0===a?void 0:a.url)||"",description:(null===(i=this.props.bookmarkData)||void 0===i?void 0:i.description)||"",thumbnail:(null===(r=this.props.bookmarkData)||void 0===r?void 0:r.thumbnail)||"",nickname:(null===(l=this.props.bookmarkData)||void 0===l?void 0:l.nickname)||"",parentId:(null===(c=this.props.bookmarkData)||void 0===c?void 0:c.parentId)||"",popupLocationSelectMode:"bookmarks"}),M(this,"onWebpageviewStoreChanged",async e=>{if("WEBPAGEVIEW_ACTIONS"!==e.type||"addBookmark"!==e.action)return;const t=f.c.getPageById(e.pageId);if(!t)return;const a=e.pageId;if(s.b.findByUrl(t.url))return void this.setState({isBookmarkPopupOpen:!0});const n=x(t.url)&&await T(a)||L(t);await this.bookmarkPage(n),v.a.get(A.kBookmarksConfirmAdding)&&this.setState({isBookmarkPopupOpen:!0})}),M(this,"bookmarkPage",async e=>{var t;let a=v.a.get(A.kBookmarksSaveFolder);s.b.getItemById(a)||(a=s.a);const n=await this.props.setBookmarked({...e,parentId:a});n.parentId&&(null===(t=this.refBookmarkPopup.current)||void 0===t||t.scrollToId(n.parentId))}),M(this,"onDeleteBookmarkClick",async()=>{this.setState({status:"standby"}),this.props.bookmarkData&&(await n.a.remove([this.props.bookmarkData.id]),this.setState({isBookmarkPopupOpen:!1}))}),M(this,"onBookmarkButtonClicked",async()=>{if(this.setState(e=>({isBookmarkPopupOpen:!e.isBookmarkPopupOpen})),!this.props.bookmarkData){const e=f.c.getPageById(this.props.pageId);if(!e)return;const t=x(e.url)&&await T(this.props.pageId)||L(e);await this.bookmarkPage(t)}}),M(this,"handleParentIdChange",async e=>{this.props.bookmarkData&&(await n.a.move([this.props.bookmarkData.id],e),_.a.set(A.kBookmarksSaveFolder,e),this.setState({parentId:e}))}),M(this,"handleTitleChange",e=>{this.setState({title:e})}),M(this,"handleUrlChange",e=>{this.setState({url:e})}),M(this,"handleNicknameChange",e=>{this.setState({nickname:e})}),M(this,"handleDescriptionChange",e=>{this.setState({description:e})}),M(this,"handleFolderTitleChange",(e,t)=>{P(e,{title:t})}),M(this,"refBookmarkPopup",o.a.createRef())}componentDidMount(){C.a.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){C.a.removeChangeListener(this.onWebpageviewStoreChanged)}componentDidUpdate(e,t){if(t.isBookmarkPopupOpen&&!this.state.isBookmarkPopupOpen&&this.props.bookmarkData){const{title:e,url:t,description:a,nickname:n}=this.state;P(this.props.bookmarkData.id,{title:e,url:t,description:a,nickname:n})}else this.props.bookmarkData?e.bookmarkData||this.setState({title:this.props.bookmarkData.title,url:this.props.bookmarkData.url,description:this.props.bookmarkData.description,thumbnail:this.props.bookmarkData.thumbnail,nickname:this.props.bookmarkData.nickname,parentId:this.props.bookmarkData.parentId,status:"bookmarked"}):this.setState({title:"",url:"",description:"",thumbnail:"",nickname:"",parentId:""}),"bookmarked"===this.state.status&&setTimeout(()=>{this.setState({status:"standby"})},4e3)}render(){const{title:e,url:t,nickname:a,description:n,thumbnail:i,parentId:s}=this.state,r="bookmarked"===this.state.status||this.state.isBookmarkPopupOpen,c="bookmarked"===this.state.status?Object(l.a)("Added bookmark"):"";return o.a.createElement("div",{className:u()("BookmarkButton",{"BookmarkButton--Active":r}),__source:{fileName:D,lineNumber:252,columnNumber:12}},o.a.createElement(E.a,{onClick:this.onBookmarkButtonClicked,tooltip:Object(l.a)("Bookmark Page"),image:I.D,hidePopup:()=>this.setState({isBookmarkPopupOpen:!1}),popupPosition:this.props.popupPosition,isPopupVisible:this.state.isBookmarkPopupOpen,popupWidth:356,className:"BookmarkButton-Button",isOn:Boolean(this.props.bookmarkData),title:c,popupAnchor:"right",__source:{fileName:D,lineNumber:255,columnNumber:9}},o.a.createElement(N,{ref:this.refBookmarkPopup,onDeleteBookmarkClick:this.onDeleteBookmarkClick,onClosePopupClick:()=>this.setState({isBookmarkPopupOpen:!1}),onParentIdChange:this.handleParentIdChange,onTitleChange:this.handleTitleChange,onUrlChange:this.handleUrlChange,onNicknameChange:this.handleNicknameChange,onDescriptionChange:this.handleDescriptionChange,onFolderTitleChange:this.handleFolderTitleChange,title:e,url:t,nickname:a,description:n,image:i,parentId:s,autoFocus:"title",locationSelectMode:this.state.popupLocationSelectMode,onLocationSelectModeChange:e=>this.setState({popupLocationSelectMode:e}),__source:{fileName:D,lineNumber:268,columnNumber:11}})))}}},function(e,t,a){"use strict";var n=a(189),i=a(14),s=a(0),r=a.n(s),o=a(2),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\OkChangeButton.jsx";var c=({onDialogClosed:e,onChange:t})=>r.a.createElement("section",{__source:{fileName:l,lineNumber:11,columnNumber:3}},r.a.createElement("input",{type:"button",className:"primary",onClick:e,value:Object(o.a)("OK"),autoFocus:!0,__source:{fileName:l,lineNumber:12,columnNumber:5}}),r.a.createElement("input",{type:"button",onClick:t,value:Object(o.a)("Change"),__source:{fileName:l,lineNumber:17,columnNumber:5}})),u=a(234),m=a(775),d="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionPopup.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=Object(m.a)("input");class b extends s.PureComponent{constructor(...e){super(...e),h(this,"handleClickOutside",()=>{this.props.onDialogClosed()}),h(this,"allow",()=>{this.props.onPermissionClicked(!1)}),h(this,"deny",()=>{this.props.onPermissionClicked(!0)}),h(this,"renderAllowDenyQuery",()=>{const e=this.props.renderNotice?this.props.renderNotice():null;return(s.createElement("section",{__source:{fileName:d,lineNumber:38,columnNumber:7}},e,s.createElement(p,{type:"button",onClick:this.allow,value:Object(o.a)("command","Allow"),__source:{fileName:d,lineNumber:40,columnNumber:9}}),s.createElement("input",{type:"button",className:"primary",onClick:this.deny,value:Object(o.a)("Deny"),autoFocus:!0,__source:{fileName:d,lineNumber:44,columnNumber:9}})))})}render(){return s.createElement("section",{className:"addressfield-popup",__source:{fileName:d,lineNumber:56,columnNumber:7}},s.createElement("header",{className:"addressfield-popup-header",__source:{fileName:d,lineNumber:57,columnNumber:9}},this.props.image&&s.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:d,lineNumber:59,columnNumber:13}}),s.createElement("h1",{__source:{fileName:d,lineNumber:61,columnNumber:11}},this.props.message)),s.createElement("section",{className:"addressfield-popup-content",__source:{fileName:d,lineNumber:63,columnNumber:9}},!1===this.props.isDecided?this.renderAllowDenyQuery():s.createElement(c,{onDialogClosed:this.props.onDialogClosed,onChange:this.props.onSettingsClicked,__source:{fileName:d,lineNumber:66,columnNumber:15}})))}}var g=Object(u.a)(b),N=a(22),f=a(20),_=a.n(f),v=a(9),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionNotificator.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){switch(e){case"camera":case"microphone_and_camera":case"videocapture":return v.Fc[t];case"flash":return v.Hc[t];case"location":case"geolocation":return v.Ic[t];case"audiocapture":case"microphone":return v.Jc[t];case"sensors":return v.Nc[t];case"midi-sysex":return v.Kc[t];case"notifications":default:return v.Lc[t]}}class O extends r.a.PureComponent{constructor(...e){super(...e),C(this,"state",{isDialogOpen:"undecided"===this.props.permission.state,iconTypeSmall:w(this.props.permissionType,"small"),iconTypeMedium:w(this.props.permissionType,"medium")}),C(this,"onNotificatorClicked",()=>{this.setState(e=>({isDialogOpen:!e.isDialogOpen}))}),C(this,"onDialogClosed",()=>{this.setState({isDialogOpen:!1})}),C(this,"onPermissionClicked",e=>{const t=this.props.permission.requestEvent;if(t){!1===e?t.allow():t.deny();const a=this.props.permissionType;a&&n.a.setPermission(this.props.pageId,this.props.origin,a,t,e?"blocked":"allowed")}this.onDialogClosed()}),C(this,"onSettingsClicked",()=>{i.a.openURL(this.getSettingsURL())}),C(this,"getSettingsURL",()=>{switch(this.props.permissionType){case"flash":return"chrome://settings/content/flash";case"location":case"geolocation":return"chrome://settings/content/location";case"notifications":return"chrome://settings/content/notifications";case"camera":case"videocapture":return"chrome://settings/content/camera";case"audiocapture":case"microphone":return"chrome://settings/content/microphone";case"microphone_and_camera":return"chrome://settings/content#media-stream-mic";case"sensors":return"chrome://settings/content/sensors";case"midi-sysex":return"chrome://settings/content/midiDevices";default:console.warn("unknown permissiontype")}}),C(this,"getMessageText",()=>{const e="blocked"===this.props.permission.state,t="undecided"!==this.props.permission.state,a=this.props.origin,n=this.props.permissionType;if(!n)return"";if(t)if(e)switch(n){case"flash":return Object(o.a)("Website “$1” has been denied to run Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” has been denied location access.",[a]);case"notifications":return Object(o.a)("Website “$1” has been denied showing notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” has been denied access to your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” has been denied access to your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” has been denied access to your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” has been denied access to motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” has been denied access to MIDI devices.",[a])}else switch(n){case"flash":return Object(o.a)("Website “$1” is running Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” is accessing your location.",[a]);case"notifications":return Object(o.a)("Website “$1” is authorized to show notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” is using your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” is recording with your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” is using your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” is using your motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” is using your MIDI devices.",[a])}else switch(n){case"flash":return Object(o.a)("Website “$1” would like to run Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” would like to access your location.",[a]);case"notifications":return Object(o.a)("Website “$1” would like to show notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” would like to use your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” would like to use your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” would like to use your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” would like to use motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” would like to use MIDI devices.",[a])}return console.warn("Unknown permissiontype: "+n),n}),C(this,"renderNotice",()=>"geolocation"===this.props.permissionType?r.a.createElement("div",{className:"geo-notice",__source:{fileName:E,lineNumber:225,columnNumber:11}},r.a.createElement("a",{href:"",title:Object(o.a)("Vivaldi Browser Privacy Policy"),onClick:this._privacyNotice,__source:{fileName:E,lineNumber:226,columnNumber:13}},Object(o.a)("Privacy Notice"))):null)}_privacyNotice(){i.a.openURL("https://vivaldi.com/privacy/browser/")}render(){const e="blocked"===this.props.permission.state,t="undecided"!==this.props.permission.state,a={"button-addressfield":!0,"permission-popup":!0,"is-allowing":!e&&t,"is-dialog-open":this.state.isDialogOpen};return r.a.createElement("div",{className:"button-toolbar",__source:{fileName:E,lineNumber:250,columnNumber:7}},r.a.createElement(N.a,{tooltip:this.getMessageText(),onClick:this.onNotificatorClicked,image:this.state.iconTypeSmall,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:_()(a),popupClassName:"addressfield-popup-container",popupWidth:400,__source:{fileName:E,lineNumber:251,columnNumber:9}},r.a.createElement(g,{onPermissionClicked:this.onPermissionClicked,isDecided:t,onDialogClosed:this.onDialogClosed,onSettingsClicked:this.onSettingsClicked,settingsUrl:"",image:this.state.iconTypeMedium,renderNotice:this.renderNotice,message:this.getMessageText(),__source:{fileName:E,lineNumber:261,columnNumber:11}})))}}var y=O;a.d(t,"a",(function(){return T}));var S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionsToolbar.jsx";class T extends r.a.PureComponent{constructor(...e){var t,a,n;super(...e),n=e=>!e.requestEvent&&"undecided"!==e.state,(a="_isPermissionUsage")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}mergeSortMicCamPermissions(e){const t=(e=e.sortBy((e,t)=>t)).get("microphone"),a=e.get("camera"),n=e.get("microphone_and_camera");return t&&a&&this._isPermissionUsage(t)&&this._isPermissionUsage(a)&&!n?e=(e=(e=e.delete("microphone")).delete("camera")).set("microphone_and_camera",t):n&&this._isPermissionUsage(n)&&(t&&this._isPermissionUsage(t)&&(e=e.delete("microphone")),a&&this._isPermissionUsage(a)&&(e=e.delete("camera"))),e}render(){if(!this.props.pagePermissions.size)return null;const e=[];return this.props.pagePermissions.forEach((t,a)=>{this.mergeSortMicCamPermissions(t).forEach((t,n)=>{e.push(r.a.createElement(y,{pageId:this.props.pageId,key:n,permission:t,origin:a,permissionType:n,popupPosition:this.props.popupPosition,__source:{fileName:S,lineNumber:73,columnNumber:9}}))})}),r.a.createElement("div",{className:"button-toolbar",__source:{fileName:S,lineNumber:85,columnNumber:7}},e)}}},function(e,t,a){"use strict";var n=a(45),i=a.n(n),s=a(173);const r={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},o={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},l={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u={ColorSpace:{0:"Unknown",1:"sRGB",65535:"Adobe RGB / ProPhoto RGB"},ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function m(e){return!!e.exifdata}function d(e,t){function a(a){var n=function(e){var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,n=e.byteLength;for(;a<n;){if(255!==t.getUint8(a))return!1;if(225===t.getUint8(a+1))return f(t,a+4,t.getUint16(a+2));a+=2+t.getUint16(a+2)}}(a),i=function(e){var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,n=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;a<n;){if(i(t,a)){var s=t.getUint8(a+7);s%2!=0&&(s+=1),0===s&&(s=4);var r=a+8+s,o=t.getUint16(a+6+s);return p(e,r,o)}a++}}(a),s=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,n=e.byteLength,i=new DOMParser;for(;a<n-4;){if("http"===N(t,a,4)){var s=a-1,r=t.getUint16(a-2)-1,o=N(t,s,r),l=o.indexOf("xmpmeta>")+8,c=(o=o.substring(o.indexOf("<x:xmpmeta"),l)).indexOf("x:xmpmeta")+10;return o=o.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+o.slice(c),v(i.parseFromString(o,"text/xml"))}a++}}(a);e.exifdata=n||{},e.iptcdata=i||{},e.xmpdata=s||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))a(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),s=new Uint8Array(i),r=0;r<n;r++)s[r]=a.charCodeAt(r);return i}(e.src));else if(/^blob\:/i.test(e.src)){const t=new FileReader;t.onload=function(e){a(e.target.result)},function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!==this.status&&0!==this.status||t(this.response)},a.send()}(e.src,e=>{t.readAsArrayBuffer(e)})}else{var n=new XMLHttpRequest;n.onload=function(){if(200!==this.status&&0!==this.status)throw"Could not load image";a(n.response),n=null},n.open("GET",e.src,!0),n.responseType="arraybuffer",n.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){const t=new FileReader;t.onload=function(e){a(e.target.result)},t.readAsArrayBuffer(e)}}const h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function p(e,t,a){for(var n,i,s,r,o=new DataView(e),l={},c=t;c<t+a;)28===o.getUint8(c)&&2===o.getUint8(c+1)&&(r=o.getUint8(c+2))in h&&(s=o.getInt16(c+3),i=h[r],n=N(o,c+5,s),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(n):l[i]=[l[i],n]:l[i]=n),c++;return l}function b(e,t,a,n,i){var s,r=e.getUint16(a,!i),o={};for(let l=0;l<r;l++)s=a+12*l+2,o[n[e.getUint16(s,!i)]]=g(e,s,t,a,i);return o}function g(e,t,a,n,i){var s,r,o,l,c,u,m=e.getUint16(t+2,!i),d=e.getUint32(t+4,!i),h=e.getUint32(t+8,!i)+a;switch(m){case 1:case 7:if(1===d)return e.getUint8(t+8,!i);s=d>4?h:t+8,r=[];for(let t=0;t<d;t++)r[t]=e.getUint8(s+t);return r;case 2:return N(e,s=d>4?h:t+8,d-1);case 3:if(1===d)return e.getUint16(t+8,!i);s=d>2?h:t+8,r=[];for(let t=0;t<d;t++)r[t]=e.getUint16(s+2*t,!i);return r;case 4:if(1===d)return e.getUint32(t+8,!i);for(r=[],l=0;l<d;l++)r[l]=e.getUint32(h+4*l,!i);return r;case 5:if(1===d)return c=e.getUint32(h,!i),u=e.getUint32(h+4,!i),(o=new Number(c/u)).numerator=c,o.denominator=u,o;r=[];for(let t=0;t<d;t++)c=e.getUint32(h+8*t,!i),u=e.getUint32(h+4+8*t,!i),r[t]=new Number(c/u),r[t].numerator=c,r[t].denominator=u;return r;case 9:if(1===d)return e.getInt32(t+8,!i);r=[];for(let t=0;t<d;t++)r[t]=e.getInt32(h+4*t,!i);return r;case 10:if(1===d)return e.getInt32(h,!i)/e.getInt32(h+4,!i);r=[];for(let t=0;t<d;t++)r[t]=e.getInt32(h+8*t,!i)/e.getInt32(h+4+8*t,!i);return r}}function N(e,t,a){var n="";for(let i=t;i<t+a;i++)n+=String.fromCharCode(e.getUint8(i));return n}function f(e,t){if("Exif"!==N(e,t,4))return!1;var a,n,i,s,m,d=t+6;if(18761===e.getUint16(d))a=!1;else{if(19789!==e.getUint16(d))return!1;a=!0}if(42!==e.getUint16(d+2,!a))return!1;var h=e.getUint32(d+4,!a);if(h<8)return!1;if((n=b(e,d,d+h,o,a)).ExifIFDPointer)for(i in s=b(e,d,d+n.ExifIFDPointer,r,a)){switch(i){case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"ColorSpace":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=u[i][s[i]];break;case"LightSource":const e={1:5500,2:3500,3:2700,4:5e3,9:6e3,10:6e3,11:6500,12:7100,13:5400,14:4500,15:3700};n.kelvin=e[s[i]],s[i]=u[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=u.Components[s[i][0]]+u.Components[s[i][1]]+u.Components[s[i][2]]+u.Components[s[i][3]]}n[i]=s[i]}if(n.GPSInfoIFDPointer)for(i in m=b(e,d,d+n.GPSInfoIFDPointer,l,a)){switch(i){case"GPSVersionID":m[i]=m[i][0]+"."+m[i][1]+"."+m[i][2]+"."+m[i][3]}n[i]=m[i]}return n.thumbnail=function(e,t,a,n){var i=function(e,t,a){var n=e.getUint16(t,!a);return e.getUint32(t+2+12*n,!a)}(e,t+a,n);if(!i)return{};if(i>e.byteLength)return{};var s=b(e,t,t+i,c,n);if(s.Compression)switch(s.Compression){case 6:if(s.JpegIFOffset&&s.JpegIFByteCount){var r=t+s.JpegIFOffset,o=s.JpegIFByteCount;s.blob=new Blob([new Uint8Array(e.buffer,r,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",s.Compression)}else 2===s.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return s}(e,d,h,a),n}function _(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var n=e.attributes.item(a);t["@attributes"][n.nodeName]=n.nodeValue}}}else if(3===e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes.item(i),r=s.nodeName;if(t[r]){if(!t[r].push){var o=t[r];t[r]=[],t[r].push(o)}t[r].push(_(s))}else t[r]=_(s)}return t}function v(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var n=e.children.item(a),i=n.attributes;for(var s in i){var r=i[s],o=r.nodeName,l=r.nodeValue;void 0!==o&&(t[o]=l)}var c=n.nodeName;if(void 0===t[c])t[c]=_(n);else{if(void 0===t[c].push){var u=t[c];t[c]=[],t[c].push(u)}t[c].push(_(n))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}var E={getData:function(e,t){return!1!==e.complete&&(m(e)?t&&t.call(e):d(e,t),!0)},getTag:function(e,t){if(m(e))return e.exifdata[t]},getAllTags:function(e){if(!m(e))return{};var t,a=e.exifdata,n={};for(t in a)a.hasOwnProperty(t)&&(n[t]=a[t]);return n},pretty:function(e){if(!m(e))return"";var t,a=e.exifdata,n="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?n+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":n+=t+" : ["+a[t].length+" values]\r\n":n+=t+" : "+a[t]+"\r\n");return n}},C=a(14),w=a(0),O=a.n(w),y=a(2),S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GPSCoordinates.jsx";function T(e){C.a.openURL(e)}function k(e){return`${e[0]}° ${e[1]}' ${e[2]}"`}var A=function({GPSLatitude:e,GPSLatitudeRef:t,GPSLongitude:a,GPSLongitudeRef:n}){const i="http://tools.wmflabs.org/geohack/geohack.php?language=en&params="+`${e.join("_")}_${t}_${a&&a.join("_")}_${n}_`,s=`${k(e)} ${t},\n            ${k(a)} ${n}`;return(O.a.createElement("div",{className:"image-metadata-generic",__source:{fileName:S,lineNumber:36,columnNumber:5}},O.a.createElement("h3",{__source:{fileName:S,lineNumber:37,columnNumber:7}},Object(y.a)("Location")),O.a.createElement("div",{__source:{fileName:S,lineNumber:38,columnNumber:7}},O.a.createElement("a",{onClick:T.bind(null,i),href:i,title:Object(y.a)("Open in GeoHack"),__source:{fileName:S,lineNumber:39,columnNumber:9}},s))))},I="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GenericMetadata.jsx";var D=function({value:e,name:t}){return O.a.createElement("div",{className:"image-metadata-generic",__source:{fileName:I,lineNumber:10,columnNumber:5}},O.a.createElement("h3",{__source:{fileName:I,lineNumber:11,columnNumber:7}},t),O.a.createElement("div",{__source:{fileName:I,lineNumber:12,columnNumber:7}},e))},M=a(21),P=a(154),x=a(312),L=a(261),j=a(1),R=a(9),B="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\ImageInspector.jsx";function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=[j.kKeyboardTabToAll,j.kThemeContrast],H=["0°",Object(y.a)("Vertical Mirror"),"180°",Object(y.a)("Horizontal Mirror"),Object(y.a)("90° Horizontal Mirror"),"270°",Object(y.a)("270° Vertical Mirror"),"90°"],V=document.createElement("canvas"),W=V.getContext("2d"),z=document.createElement("canvas"),G=z.getContext("2d");class K extends O.a.Component{constructor(e){super(e),F(this,"refButtonForTests",O.a.createRef()),F(this,"updateTheme",()=>{const e=i()(this.props.vivaldiSettings.BROWSER_COLOR_ACCENT_BG),t=i()(this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG),a=i()("#bbb"),n=i()("#272727"),r=s.d.all(a,n,t,e);Object.keys(r).forEach(e=>{this.refs.imageinspector.style.setProperty(`--${e}`,r[e])})}),F(this,"loadPhoto",()=>{this.props.url?this.setState({status:1},()=>{const e=this.props.url,t=document.createElement("img"),a=[{fill:i()("#f00"),data:[]},{fill:i()("#0f0"),data:[]},{fill:i()("#00f"),data:[]},{fill:i()("#999"),data:[]}],n=a[0],s=a[1],r=a[2],o=a[3];let l,c=0;t.onload=()=>E.getData(t,()=>{l&&URL.revokeObjectURL(l);const e=t.width/t.height;let i=V.width,u=i/e,m=0,d=0;u>V.height?(u=V.height,i=u*e,m=(V.width-i)/2):d=(V.height-u)/2,W.clearRect(0,0,V.width,V.height),W.drawImage(t,m,d,i,u);const h=W.getImageData(0,0,V.width,V.height);for(let e=0;e<256;e+=1)n.data[e]=0,s.data[e]=0,r.data[e]=0,o.data[e]=0;const p=h.data.length/256;for(let e=0,t=h.data.length;e<t;e+=4)if(h.data[e+3]>0){const t=h.data[e],a=h.data[e+1],i=h.data[e+2];n.data[t]+=1/p,s.data[a]+=1/p,r.data[i]+=1/p}for(let e=0;e<256;e+=1)o.data[e]=.2126*n.data[e]+.7152*s.data[e]+.0722*r.data[e];this.setState({data:E.getAllTags(t),histogramChannels:a,height:t.naturalHeight,width:t.naturalWidth,size:c,status:2},this.updateHistogram)}),fetch(e).then(e=>e.blob()).then(e=>{c=e.size,l=URL.createObjectURL(e),t.src=l}).catch(e=>{this.setState({status:3})})}):this.setState({status:0})}),F(this,"_createClipboardData",()=>this.props.url+"\n\n"+this.state.width+" x "+this.state.height+"\n"+Object(x.a)(this.state.size)+"\n\n"+JSON.stringify(this.state.data,null,2)),F(this,"copyToClipboard",e=>{if(!(this.state.size&&this.state.width&&this.state.height))return;const t=this._createClipboardData();navigator.clipboard.writeText(t)}),this.state={histogramChannels:[],histogramStyle:3,histogramImage:null,height:0,width:0,size:0,data:{},status:0},z.width=768,z.height=300,G.globalCompositeOperation="lighter",G.lineWidth=1.5,V.width=600,V.height=400}componentDidMount(){this.updateTheme(),this.props.open&&this.loadPhoto()}componentDidUpdate(e){this.props.open&&0===this.state.status&&this.loadPhoto(),Object(L.default)(this.props.vivaldiSettings,e.vivaldiSettings)&&Object(L.default)(this.props.prefValues,e.prefValues)||this.updateTheme()}updateHistogram(){let e=[];switch(this.state.histogramStyle){case 0:e=[this.state.histogramChannels[0]];break;case 1:e=[this.state.histogramChannels[1]];break;case 2:e=[this.state.histogramChannels[2]];break;case 4:e=[this.state.histogramChannels[3]];break;case 3:e=[this.state.histogramChannels[0],this.state.histogramChannels[1],this.state.histogramChannels[2]]}G.clearRect(0,0,z.width,z.height),e.forEach(e=>{G.beginPath(),G.moveTo(0,z.height);for(let t=0;t<e.data.length+1;t+=1){const a=Math.round(e.data[t]*z.height);G.lineTo(3*t,z.height-a)}G.lineTo(z.width,z.height),G.strokeStyle=e.fill.css(),G.fillStyle=e.fill.alpha(.3).css(),G.fill(),G.stroke(),G.closePath()}),this.setState({histogramImage:z.toDataURL()})}setHistogramStyle(e){this.setState({histogramStyle:e},this.updateHistogram)}render(){if(!this.props.open)return O.a.createElement("div",{ref:"imageinspector",__source:{fileName:B,lineNumber:366,columnNumber:14}});const e=this.state.data,t=Object.keys(e).length>0&&e.DateTimeOriginal,a=decodeURI(this.props.url.split("/").pop().split("#")[0].split("?")[0].toString()),n=e.ExposureTime?e.ExposureTime.valueOf():void 0;return O.a.createElement("div",{className:"image-inspector",ref:"imageinspector",__source:{fileName:B,lineNumber:378,columnNumber:7}},O.a.createElement("header",{__source:{fileName:B,lineNumber:379,columnNumber:9}},O.a.createElement("h1",{__source:{fileName:B,lineNumber:380,columnNumber:11}},a),O.a.createElement("button",{className:"close no-stroke",title:Object(y.a)("Close inspector"),onClick:this.props.toggleImageInspector,dangerouslySetInnerHTML:{__html:R.Nd},__source:{fileName:B,lineNumber:381,columnNumber:11}})),O.a.createElement("div",{className:"image-inspector-container",__source:{fileName:B,lineNumber:387,columnNumber:9}},1===this.state.status&&O.a.createElement("p",{className:"in-progress",__source:{fileName:B,lineNumber:389,columnNumber:11}},Object(y.a)("Analyzing image...")),3===this.state.status&&O.a.createElement("p",{__source:{fileName:B,lineNumber:394,columnNumber:11}},Object(y.a)("Unable to analyze image.")),2===this.state.status&&O.a.createElement("div",{className:"image-inspector-metadata",__source:{fileName:B,lineNumber:400,columnNumber:11}},O.a.createElement("div",{className:"image-histogram",__source:{fileName:B,lineNumber:402,columnNumber:13}},O.a.createElement("img",{className:"histogram",title:Object(y.a)("Histogram"),src:this.state.histogramImage,__source:{fileName:B,lineNumber:403,columnNumber:15}}),O.a.createElement("div",{className:"toolbar text",__source:{fileName:B,lineNumber:408,columnNumber:15}},O.a.createElement("button",{tabIndex:this.props.prefValues[j.kKeyboardTabToAll],className:`button-toolbar ${4===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,4),__source:{fileName:B,lineNumber:409,columnNumber:17}},Object(y.a)("Brightness")),O.a.createElement("button",{tabIndex:this.props.prefValues[j.kKeyboardTabToAll],className:`button-toolbar ${3===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,3),__source:{fileName:B,lineNumber:418,columnNumber:17}},"RGB"),O.a.createElement("button",{tabIndex:this.props.prefValues[j.kKeyboardTabToAll],className:`button-toolbar ${0===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,0),__source:{fileName:B,lineNumber:426,columnNumber:17}},"R"),O.a.createElement("button",{tabIndex:this.props.prefValues[j.kKeyboardTabToAll],className:`button-toolbar ${1===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,1),__source:{fileName:B,lineNumber:434,columnNumber:17}},"G"),O.a.createElement("button",{tabIndex:this.props.prefValues[j.kKeyboardTabToAll],className:`button-toolbar ${2===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,2),__source:{fileName:B,lineNumber:443,columnNumber:17}},"B"))),t&&O.a.createElement("div",{className:"image-metadata-device",__source:{fileName:B,lineNumber:456,columnNumber:15}},O.a.createElement("span",{className:"image-camera",dangerouslySetInnerHTML:{__html:R.O},__source:{fileName:B,lineNumber:457,columnNumber:17}}),O.a.createElement("h3",{__source:{fileName:B,lineNumber:461,columnNumber:17}},"Canon"===e.Make?"":e.Make," ",e.Model)),t&&O.a.createElement("div",{className:"image-metadata-core",__source:{fileName:B,lineNumber:466,columnNumber:15}},O.a.createElement("div",{title:Object(y.a)("Aperture"),__source:{fileName:B,lineNumber:467,columnNumber:17}},O.a.createElement("span",{dangerouslySetInnerHTML:{__html:R.l},__source:{fileName:B,lineNumber:468,columnNumber:19}}),e.FNumber&&`f/${e.FNumber.valueOf()}`),O.a.createElement("div",{title:Object(y.a)("ISO Speed"),__source:{fileName:B,lineNumber:471,columnNumber:17}},O.a.createElement("span",{dangerouslySetInnerHTML:{__html:R.Ab},__source:{fileName:B,lineNumber:472,columnNumber:19}}),e.ISOSpeedRatings&&e.ISOSpeedRatings),O.a.createElement("div",{title:Object(y.a)("Exposure time"),__source:{fileName:B,lineNumber:475,columnNumber:17}},O.a.createElement("span",{dangerouslySetInnerHTML:{__html:R.wd},__source:{fileName:B,lineNumber:476,columnNumber:19}}),n&&n<1&&Object(y.a)("1/$1 second","1/$1 seconds",[Math.round(1/n*100)/100]),n&&n>=1&&Object(y.a)("$1 second","$1 seconds",[n])),O.a.createElement("div",{title:Object(y.a)("Focal length"),__source:{fileName:B,lineNumber:485,columnNumber:17}},O.a.createElement("span",{dangerouslySetInnerHTML:{__html:R.ob},__source:{fileName:B,lineNumber:486,columnNumber:19}}),e.FocalLengthIn35mmFilm||e.FocalLength&&`${e.FocalLengthIn35mmFilm?e.FocalLengthIn35mmFilm.valueOf():e.FocalLength.valueOf()} mm`)),e.WhiteBalance&&O.a.createElement("div",{className:"image-white-balance",__source:{fileName:B,lineNumber:497,columnNumber:15}},O.a.createElement("h3",{__source:{fileName:B,lineNumber:498,columnNumber:17}},Object(y.a)("White Balance")),e.LightSource&&"Unknown"!==e.LightSource?e.LightSource:e.WhiteBalance,e.kelvin&&O.a.createElement("div",{className:"image-kelvinscale",__source:{fileName:B,lineNumber:503,columnNumber:19}},O.a.createElement("span",{className:"kelvin-indicator",style:{left:`${(e.kelvin-2e3)/70}%`},__source:{fileName:B,lineNumber:504,columnNumber:21}},e.kelvin,"K"))),this.state.width&&this.state.height&&O.a.createElement(D,{value:this.state.width+" x "+this.state.height+" ("+Math.round(this.state.height*this.state.width/1e5)/10+"MP)",name:Object(y.a)("Dimensions"),__source:{fileName:B,lineNumber:515,columnNumber:15}}),this.state.size&&O.a.createElement(D,{value:Object(x.a)(this.state.size),name:Object(y.a)("Size"),__source:{fileName:B,lineNumber:525,columnNumber:15}}),e.ColorSpace&&O.a.createElement(D,{value:`${e.ColorSpace}`,name:Object(y.a)("Color Space"),__source:{fileName:B,lineNumber:528,columnNumber:15}}),e.GPSLatitude&&e.GPSLatitudeRef&&e.GPSLongitude&&e.GPSLongitudeRef&&O.a.createElement(A,{GPSLatitude:e.GPSLatitude,GPSLatitudeRef:e.GPSLatitudeRef,GPSLongitude:e.GPSLongitude,GPSLongitudeRef:e.GPSLongitudeRef,__source:{fileName:B,lineNumber:533,columnNumber:15}}),e.Copyright&&""!==e.Copyright.trim()&&O.a.createElement(D,{value:e.Copyright,name:Object(y.a)("Copyright"),__source:{fileName:B,lineNumber:539,columnNumber:15}}),e.DateTimeOriginal&&O.a.createElement(D,{value:e.DateTimeOriginal,name:Object(y.a)("Captured at"),__source:{fileName:B,lineNumber:543,columnNumber:15}}),e.Orientation&&O.a.createElement(D,{value:H[e.Orientation-1],name:Object(y.a)("Orientation"),__source:{fileName:B,lineNumber:547,columnNumber:15}}),e.Software&&O.a.createElement(D,{value:e.Software,name:Object(y.a)("Software"),__source:{fileName:B,lineNumber:553,columnNumber:15}}),O.a.createElement("div",{className:"toolbar text alldata-toolbar",__source:{fileName:B,lineNumber:555,columnNumber:13}},O.a.createElement("button",{ref:this.refButtonForTests,className:"button-toolbar",tabIndex:this.props.prefValues[j.kKeyboardTabToAll],onClick:this.copyToClipboard,__source:{fileName:B,lineNumber:556,columnNumber:15}},Object(y.a)("Copy Data to Clipboard"))))))}}t.a=Object(M.a)(Object(P.a)(K,["BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),U)},function(e,t,a){"use strict";var n=a(0),i=a(31),s=a(347),r=a(12),o=a(16),l=a(17),c=a(10),u=a(7);const m=new class{openSyncedTab(e){c.a.sessions.restore(e.sessionId,t=>{c.a.runtime.lastError&&console.warn("Error restoring tab: ",e,c.a.runtime.lastError)})}openSyncedWindow(e){c.a.sessions.restore(e.sessionId,t=>{c.a.runtime.lastError&&console.warn("Error restoring page: ",e,c.a.runtime.lastError.message)})}load(){l.a.isIncognitoOrGuest()||c.a.sessions.getDevices(e=>{r.a.dispatch({actionType:o.a.CHROME_SET_DEVICES,devices:e})})}};u.a.sync.onCycleCompleted.addListener(m.load);var d=m,h=a(57),p=a.n(h);let b=[];const g=new class extends p.a{getSyncedTabs(){return b}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};r.a.register(e=>{switch(e.actionType){case o.a.CHROME_SET_DEVICES:t=e.devices,b=t,g.emitChange()}var t});var N=g,f=a(22),_=a(2),v=a(4),E=a(9);function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends n.PureComponent{constructor(...e){super(...e),C(this,"state",{visible:!1,syncedTabs:N.getSyncedTabs()}),C(this,"onSyncedTabsStoreChange",()=>{this.setState({syncedTabs:N.getSyncedTabs()})}),C(this,"onSyncStoreChange",()=>{this.setState({visible:"started"===s.a.getState().engineData.engineState})}),C(this,"openSyncedTab",e=>{d.openSyncedTab(e)}),C(this,"openSyncedWindow",e=>{d.openSyncedWindow(e)}),C(this,"trimTitle",e=>(e.length>70&&(e=e.substring(0,70)+"..."),e)),C(this,"getContextMenuItems",()=>{const e=this.state.syncedTabs.reduce((e,t)=>e.concat(t.sessions.map(e=>{const a=e.window;if(!a)return;const n=a.tabs||[];return{items:n.map(e=>({mnemonic:!1,url:e.url,handler:this.openSyncedTab.bind(this,e),...i.a.makeLabelPair(this.trimTitle(e.title||""))})).concat([i.a.separatorItem,{handler:this.openSyncedWindow.bind(this,a),...Object(v.a)("Open All")}]),...Object(v.a)("Window with $1 Tab on $2","Window with $1 Tabs on $2",[n.length,t.deviceName])}})),[]).filter(Boolean);return Promise.resolve(e)})}componentDidMount(){N.addChangeListener(this.onSyncedTabsStoreChange),this.onSyncedTabsStoreChange(),this.syncStoreToken=s.a.addListener(this.onSyncStoreChange),this.onSyncStoreChange()}componentWillUnmount(){N.removeChangeListener(this.onSyncedTabsStoreChange),this.syncStoreToken.remove()}render(){return this.state.syncedTabs&&this.state.visible?n.createElement(f.a,{className:"synced-tabs-button",menuPromise:this.getContextMenuItems,menuOrigin:"bottomLeft",disabled:0===this.state.syncedTabs.length,tooltip:Object(_.a)("Synced Tabs"),image:E.Id.large,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\SyncedTabs.jsx",lineNumber:107,columnNumber:12}}):null}}t.a=w},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(22),r=a(14),o=a(2),l=a(7),c=a(143),u=a.n(c),m=a(12),d=a(99);const h={onDidAbortWithError:Object(o.a)("Update Error"),onDidFindValidUpdate:Object(o.a)("Update Available"),onWillDownloadUpdate:Object(o.a)("Downloading Update"),onDidDownloadUpdate:Object(o.a)("Update Downloaded"),onWillInstallUpdateOnQuit:Object(o.a)("Update Ready"),onUpdaterDidRelaunchApplication:Object(o.a)("Vivaldi was Updated")},p={onDidAbortWithError:Object(o.a)("Unable to check for update."),onDidFindValidUpdate:Object(o.a)("Update to Vivaldi available."),onWillDownloadUpdate:Object(o.a)("Downloading update to Vivaldi."),onDidDownloadUpdate:Object(o.a)("Update downloaded."),onWillInstallUpdateOnQuit:Object(o.a)("Restart Vivaldi to complete the update."),onUpdaterDidRelaunchApplication:Object(o.a)("Vivaldi was updated.")};class b extends u.a{getInitialState(){return{message:void 0,status:void 0,version:void 0,releaseNotesUrl:void 0}}reduce(e,t){switch(t.actionType){case"VIVALDI_AUTOUPDATE_SET_STATUS":return Object(d.a)(e,e=>{e.message=t.message,e.status=t.status,e.version=t.version,e.version=t.releaseNotesUrl})}return e}}var g=new b(m.a),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UpdatePopup.jsx";function f(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,_(e,t,"set"),a),a}function _(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var v=new WeakMap;class E extends i.a.Component{constructor(...e){var t,a,n;super(...e),v.set(this,{writable:!0,value:!1}),n={currentVersion:""},(a="state")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentDidMount(){f(this,v,!0),l.a.utilities.getVersion().then(({vivaldiVersion:e})=>{var t;(function(e,t){return t.get?t.get.call(e):t.value})(t=this,_(t,v,"get"))&&this.setState({currentVersion:e})})}componentWillUnmount(){f(this,v,!1)}render(){const{message:e,status:t,version:a,releaseNotesUrl:n}=this.props.updateState;return t?i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{__source:{fileName:N,lineNumber:49,columnNumber:7}},h[t]),i.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:N,lineNumber:52,columnNumber:7}},"onWillInstallUpdateOnQuit"===t&&a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"popup-infotext",__source:{fileName:N,lineNumber:55,columnNumber:13}},'_("$1 is ready to be installed.", [version])'),i.a.createElement("br",{__source:{fileName:N,lineNumber:58,columnNumber:13}})),i.a.createElement("p",{className:"popup-infotext",__source:{fileName:N,lineNumber:61,columnNumber:9}},p[t]),e&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",{__source:{fileName:N,lineNumber:66,columnNumber:13}}),i.a.createElement("p",{className:"popup-infotext",__source:{fileName:N,lineNumber:67,columnNumber:13}},e))),i.a.createElement("footer",{className:"dialog-footer",__source:{fileName:N,lineNumber:74,columnNumber:7}},n&&i.a.createElement("input",{type:"submit",className:"primary",onClick:()=>{n&&r.a.openURL(n),this.props.hidePopup()},value:Object(o.a)("Show Release Notes"),__source:{fileName:N,lineNumber:76,columnNumber:11}}),"onWillInstallUpdateOnQuit"===t&&i.a.createElement("input",{type:"submit",className:"danger",onClick:()=>l.a.autoUpdate.installUpdateAndRestart(),value:Object(o.a)("browser","Restart"),__source:{fileName:N,lineNumber:87,columnNumber:11}}))):null}}var C=E,w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UpdateButton.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,k(e,t,"get"))}function T(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,k(e,t,"set"),a),a}function k(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var A=new WeakMap,I=new WeakMap;class D extends i.a.PureComponent{constructor(){super(),A.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:()=>{this.setState({updateState:g.getState()})}}),y(this,"togglePopup",()=>{this.setState(e=>({popupVisible:!e.popupVisible}))}),y(this,"hidePopup",()=>{this.setState({popupVisible:!1})}),this.state={popupVisible:!1,updateState:g.getState()}}componentDidMount(){T(this,A,g.addListener(S(this,I)))}componentWillUnmount(){S(this,A).remove()}render(){const{status:e}=this.state.updateState;if(!e)return null;const t=this.props.size||"large";return(i.a.createElement(s.a,{image:w.Xd[t],title:h[e],onClick:this.togglePopup,popupClassName:"UpdatePopup ToolbarButtonPopup-DefaultStyles",popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,size:t,__source:{fileName:O,lineNumber:73,columnNumber:12}},i.a.createElement(C,{hidePopup:this.hidePopup,updateState:this.state.updateState,__source:{fileName:O,lineNumber:83,columnNumber:7}})))}}t.a=D},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(167),r=a(2),o=a(20),l=a.n(o),c=a(250),u=a.n(c),m=a(234),d=a(255),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactPhotoPicker.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=["../resources/contact-person.png","../resources/contact-company.png"];class g extends i.a.PureComponent{constructor(...e){super(...e),p(this,"state",{drawerOpen:!1,isDropTarget:!1,initialPhoto:"",id:""}),p(this,"onToggleOverlay",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))}),p(this,"handleClickOutside",()=>{this.setState({drawerOpen:!1})}),p(this,"photoChange",()=>{this.refs.photoPicker.click()}),p(this,"setContactPhoto",e=>{if(e.target.files&&e.target.files.length>0){var t=e.target.files[0],a=new FileReader;a.onloadend=()=>{this.setState({drawerOpen:!1,isDropTarget:!1}),"string"==typeof a.result&&this.props.attributeChange(a.result)},a.readAsDataURL(t)}}),p(this,"photoDragOver",e=>{e.preventDefault()}),p(this,"photoDragEnter",()=>{this.setState({isDropTarget:!0})}),p(this,"photoDragLeave",()=>{this.setState({isDropTarget:!1})}),p(this,"photoDrop",e=>{const t=e.dataTransfer.files[0];if(this.setState({isDropTarget:!1}),t&&t.type.match("image.*")){const e=new FileReader;e.onloadend=()=>{"string"==typeof e.result&&this.setPhoto(e.result)},e.readAsDataURL(t)}}),p(this,"getGravatar",()=>{const e=u()(this.props.emailAddress);fetch(`https://secure.gravatar.com/avatar/${e}?s=512&d=404`).then(e=>{e.ok&&e.blob().then(e=>{const t=new FileReader;t.addEventListener("loadend",()=>{"string"==typeof t.result&&this.setPhoto(t.result),this.setState({drawerOpen:!1,isDropTarget:!1})}),t.readAsDataURL(e)})})}),p(this,"setPhoto",e=>{if(!e)return this.props.attributeChange(""),void this.setState({drawerOpen:!1,isDropTarget:!1});const t=document.createElement("canvas"),a=t.getContext("2d"),n=document.createElement("img");let i=0,s=0;t.width=256,t.height=256,n.onload=()=>{n.height>n.width?(n.height*=256/n.width,n.width=256,s=.5*-(n.height-256)):(n.width*=256/n.height,n.height=256,i=.5*-(n.width-256)),a.drawImage(n,i,s,n.width,n.height),this.props.attributeChange(t.toDataURL("image/jpeg",.9)),this.setState({drawerOpen:!1})},n.src=e})}UNSAFE_componentWillReceiveProps(e){const t=e.id;t&&t!==this.props.id&&this.setState({initialPhoto:e.photo,id:t})}componentDidUpdate(e,t){!0===t.drawerOpen&&!1===this.state.drawerOpen?this.props.disableOnClickOutside():!1===t.drawerOpen&&!0===this.state.drawerOpen&&this.props.enableOnClickOutside()}render(){const e=this.props.photo,t=l()({"contact-photo-is-droptarget":this.state.isDropTarget,"contact-photo":!0});return i.a.createElement("span",{className:"contact-photo-picker",__source:{fileName:h,lineNumber:213,columnNumber:7}},i.a.createElement("button",{className:t,ref:"photo",onDrop:this.photoDrop,onDragEnter:this.photoDragEnter,onDragLeave:this.photoDragLeave,onDragOver:this.photoDragOver,style:e?{backgroundImage:`url(${e})`}:{backgroundImage:`url(${d.b})`},disabled:-1===this.props.id,onClick:this.onToggleOverlay,__source:{fileName:h,lineNumber:214,columnNumber:9}}),i.a.createElement("input",{type:"file",tabIndex:"-1",accept:"image/*",ref:"photoPicker",disabled:-1===this.props.id,onChange:this.setContactPhoto,style:{position:"absolute",visibility:"hidden",height:0,width:0},__source:{fileName:h,lineNumber:227,columnNumber:9}}),this.state.drawerOpen&&i.a.createElement("div",{className:"contact-photo-picker-overlay",__source:{fileName:h,lineNumber:236,columnNumber:11}},i.a.createElement("div",{className:"photo-picker-suggestions",__source:{fileName:h,lineNumber:237,columnNumber:13}},i.a.createElement("button",{className:"photo-picker-suggestion",onClick:this.props.disabled?void 0:this.setPhoto.bind(this,this.state.initialPhoto),style:{backgroundImage:this.state.initialPhoto?`url(${this.state.initialPhoto})`:`url(${d.b})`},__source:{fileName:h,lineNumber:238,columnNumber:15}}),b.map((e,t)=>i.a.createElement("button",{className:"photo-picker-suggestion",key:`photo-picker-suggestion-${t}`,onClick:this.setPhoto.bind(this,b[t]),style:{backgroundImage:`url(${e})`},__source:{fileName:h,lineNumber:251,columnNumber:24}}))),i.a.createElement("input",{type:"button",onClick:this.getGravatar,value:Object(r.a)("Get Gravatar"),__source:{fileName:h,lineNumber:260,columnNumber:13}}),i.a.createElement("input",{type:"button",className:"primary",onClick:this.photoChange,value:Object(r.a)("Browse..."),__source:{fileName:h,lineNumber:265,columnNumber:13}})))}}var N=Object(m.a)(g),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactPropertyListInput.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends i.a.PureComponent{constructor(...e){super(...e),_(this,"isIMEOpen",!1),_(this,"state",{values:this.props.values}),_(this,"_handleChange",(e,t)=>{if(this.isIMEOpen)return!1;const a=t.target.value,n=t.target.name;this.setState(t=>{const i=[...t.values];return i[e]={...t.values[e],[n]:a},{values:i}})}),_(this,"_handleAdd",e=>{0===e.button&&this._handleChange(this.props.values.length,e)}),_(this,"_handleRemove",(e,t)=>{0===t.button&&(e?this.props.onRemove(e):this.resetValues())}),_(this,"_handleSubmit",()=>{this.props.onChange(this.state.values)}),_(this,"_handleFormSubmit",e=>{e.preventDefault(),this._handleSubmit()}),_(this,"_handleInputKeyDown",e=>{switch(e.key){case"Escape":return void this.resetValues();case"Enter":return void this._handleSubmit()}}),_(this,"onCompositionUpdate",()=>{this.isIMEOpen=!0}),_(this,"onCompositionEnd",(e,t)=>{this.isIMEOpen=!1,this._handleChange(e,t)}),_(this,"renderTypes",(e,t)=>i.a.createElement("select",{className:"contact-type-picker",name:"type",onChange:this._handleChange.bind(this,t),onBlur:this._handleFormSubmit,value:e,__source:{fileName:f,lineNumber:121,columnNumber:7}},i.a.createElement("option",{value:"",__source:{fileName:f,lineNumber:127,columnNumber:9}},Object(r.a)("contact type","default")),i.a.createElement("option",{value:"home",__source:{fileName:f,lineNumber:128,columnNumber:9}},Object(r.a)("home")),i.a.createElement("option",{value:"work",__source:{fileName:f,lineNumber:129,columnNumber:9}},Object(r.a)("work"))))}resetValues(){this.setState({values:this.props.values})}renderSimpleForm(e,t){return i.a.createElement("form",{__source:{fileName:f,lineNumber:98,columnNumber:12}},this.renderTypes(e,0),this.props.label&&i.a.createElement("input",{className:"contact-field",type:e,defaultValue:this.props.values[0],placeholder:t,title:t,name:"value",onChange:e=>this._handleChange(0,e),onKeyDown:this._handleInputKeyDown,onBlur:this._handleFormSubmit,onCompositionStart:this.onCompositionUpdate,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:e=>this.onCompositionEnd(0,e),__source:{fileName:f,lineNumber:101,columnNumber:9}}))}render(){const{values:e}=this.state,{inputType:t="text",label:a}=this.props;return 0===e.length?this.renderSimpleForm(t,a):i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this._handleFormSubmit,__source:{fileName:f,lineNumber:143,columnNumber:7}},e.map((n,s)=>i.a.createElement(i.a.Fragment,{key:n.id+"_"+s,__source:{fileName:f,lineNumber:145,columnNumber:18}},this.renderTypes(n.type||"",s),i.a.createElement("span",{className:"contact-field",__source:{fileName:f,lineNumber:149,columnNumber:13}},this.props.label&&i.a.createElement("input",{type:t,name:"value",defaultValue:n.value||"",placeholder:a,title:a,onChange:this._handleChange.bind(this,s),onBlur:this._handleFormSubmit,onKeyDown:this._handleInputKeyDown,onCompositionStart:this.onCompositionUpdate,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:this.onCompositionEnd,autoFocus:s===e.length-1,__source:{fileName:f,lineNumber:151,columnNumber:17}}),i.a.createElement("button",{type:"button",className:"remove",title:Object(r.a)("verb","Remove"),onMouseUp:this._handleRemove.bind(this,n.id),onClick:this._handleRemove.bind(this,n.id),__source:{fileName:f,lineNumber:166,columnNumber:15}},"–")),s===e.length-1&&i.a.createElement("input",{type:"button",value:this.props.actionLabel,className:"add",onMouseUp:this._handleAdd,onClick:this._handleAdd,__source:{fileName:f,lineNumber:177,columnNumber:15}})))))}}var E=a(277),C=a(199),w=a(14),O=a(15),y=a.n(O),S=a(261),T=a(9),k="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\contacts\\ContactView.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends n.Component{constructor(...e){super(...e),A(this,"state",{contact:this.props.contact,editMode:!1}),A(this,"focus",()=>{this.refs.name&&this.refs.name.focus()}),A(this,"changeProperty",(e,t)=>{const{contact:a}=this.state;let n=t.target.value;"birthday"===e&&(n=y()(n).valueOf()),a[e]!==n&&(a[e]=n,this.setState({contact:a}))}),A(this,"updateCheckboxProperty",(e,t)=>{const{contact:a}=this.state;-1!==a.id&&s.a.update(a.id,{[e]:t.target.checked})}),A(this,"updateAvatar",e=>{const{contact:t}=this.state;s.a.update(t.id,{avatarUrl:e}),this.setState(t=>({contact:{...t.contact,avatarUrl:e}}))}),A(this,"update",e=>{const{contact:t}=this.state;switch(e){case"name":return s.a.update(t.id,{name:t.name});case"birthday":return s.a.update(t.id,{birthday:t.birthday});case"note":return s.a.update(t.id,{note:t.note})}}),A(this,"_handleEmailsChanged",e=>{const{contact:t}=this.state;e.forEach(e=>{const a=e.id,n=t.emailAddresses.find(e=>e.id===a);n?Object(S.default)(n,e)||s.a.updateEmailAddress(a,{contactId:t.id,emailAddress:e.value,type:e.type}):s.a.addEmailAddress({contactId:t.id,emailAddress:e.value,type:e.type})})}),A(this,"_handleEmailsRemoved",e=>{s.a.removeEmailAddress({contactId:this.props.contact.id,emailAddressId:e})}),A(this,"_handlePropertyValueChanged",({propertyName:e,propertyCollectionName:t,values:a})=>{if(0===a.length)return;const{contact:n}=this.state,i=n.id;a.forEach(a=>{const r=a.id,o=n[t].find(e=>e.id===r);o?a.value!==o[e]&&s.a.updatePropertyItem({contactId:i,propertyName:e,propertyId:r,type:a.type,propertyValue:a.value}):s.a.addPropertyItem({contactId:i,propertyName:e,type:a.type||"",propertyValue:a.value})})}),A(this,"_handlePhoneNumbersChanged",e=>{this._handlePropertyValueChanged({values:e,propertyName:"phoneNumber",propertyCollectionName:"phoneNumbers"})}),A(this,"_handlePhoneNumbersRemoved",e=>{s.a.removePropertyItem({propertyName:"phoneNumber",contactId:this.state.contact.id,propertyId:e})}),A(this,"_handlePostalAddressesChanged",e=>{this._handlePropertyValueChanged({values:e,propertyName:"postalAddress",propertyCollectionName:"postalAddresses"})}),A(this,"_handlePostalAddressesRemoved",e=>{s.a.removePropertyItem({propertyName:"postalAddress",contactId:this.state.contact.id,propertyId:e})}),A(this,"onKeyDown",(e,t)=>{switch(t.key){case"Enter":return void this.update(e)}}),A(this,"call",(e="",t)=>{const a=e.replace(/[^\d]/g,"");a&&(t.stopPropagation(),w.a.openURL(`tel:+${a}`))}),A(this,"compose",(e="",t)=>{e&&(t.stopPropagation(),C.a.createDraft({to:e}))}),A(this,"showMap",(e="",t)=>{e&&(t.stopPropagation(),w.a.openURL(`map:+${e}`))}),A(this,"enableEditMode",()=>{this.setState({editMode:!0},()=>this.focus())}),A(this,"toggleEditMode",()=>{this.setState(e=>({editMode:!e.editMode}))}),A(this,"addSpaces",e=>e.split("").reverse().join("").replace(/(.{3})/g,"$1 ").split("").reverse().join("").replace("+ ","+")),A(this,"renderDisplayMode",()=>{const{contact:e}=this.state;return(n.createElement("div",{className:"contact-view cardview",onClick:this.props.onEdit,__source:{fileName:k,lineNumber:272,columnNumber:7}},n.createElement("div",{className:"contact-header",__source:{fileName:k,lineNumber:275,columnNumber:9}},n.createElement(N,{ref:this.props.passRef,id:e.id,disabled:!0,attributeChange:this.updateAvatar,photo:e.avatarUrl||"",emailAddress:e.emailAddresses.length>0?e.emailAddresses[0].emailAddress:"",__source:{fileName:k,lineNumber:276,columnNumber:11}}),n.createElement("div",{className:l()({"contact-name":!0,selectable:e.name,disabled:!e.name}),__source:{fileName:k,lineNumber:285,columnNumber:11}},e.name||Object(r.a)("noun","Name"))),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:294,columnNumber:9}}),e.emailAddresses.map(e=>{if(e.emailAddress)return n.createElement(n.Fragment,{key:e.id,__source:{fileName:k,lineNumber:297,columnNumber:20}},n.createElement("div",{className:"contact-field-type",__source:{fileName:k,lineNumber:298,columnNumber:15}},n.createElement("span",{className:"info",__source:{fileName:k,lineNumber:299,columnNumber:17}},e.type),n.createElement("span",{dangerouslySetInnerHTML:{__html:T.ab},className:"contact-action-button",onClick:this.compose.bind(null,e.emailAddress),title:Object(r.a)("Compose new mail"),__source:{fileName:k,lineNumber:302,columnNumber:17}})),n.createElement("p",{className:"contact-email selectable",__source:{fileName:k,lineNumber:309,columnNumber:15}},e.emailAddress))}),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:316,columnNumber:9}}),e.phoneNumbers.map(e=>{if(e.phoneNumber)return n.createElement(n.Fragment,{key:e.id,__source:{fileName:k,lineNumber:319,columnNumber:20}},n.createElement("div",{className:"contact-field-type",__source:{fileName:k,lineNumber:320,columnNumber:15}},n.createElement("span",{className:"info",__source:{fileName:k,lineNumber:321,columnNumber:17}},e.type),n.createElement("span",{dangerouslySetInnerHTML:{__html:T.bb},className:"contact-action-button",onClick:this.call.bind(null,e.phoneNumber),title:Object(r.a)("Call"),__source:{fileName:k,lineNumber:324,columnNumber:17}})),n.createElement("p",{className:"contact-phone selectable",__source:{fileName:k,lineNumber:331,columnNumber:15}},this.addSpaces(e.phoneNumber)))}),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:338,columnNumber:9}}),e.postalAddresses.map(e=>{if(e.postalAddress)return n.createElement(n.Fragment,{key:e.id,__source:{fileName:k,lineNumber:341,columnNumber:20}},n.createElement("div",{className:"contact-field-type",__source:{fileName:k,lineNumber:342,columnNumber:15}},n.createElement("span",{className:"info",__source:{fileName:k,lineNumber:343,columnNumber:17}},e.type),n.createElement("span",{dangerouslySetInnerHTML:{__html:T.Z},className:"contact-action-button",onClick:this.showMap.bind(null,e.postalAddress),title:Object(r.a)("Open map"),__source:{fileName:k,lineNumber:346,columnNumber:17}})),n.createElement("p",{className:"contact-phone selectable",__source:{fileName:k,lineNumber:353,columnNumber:15}},e.postalAddress))}),0!==e.birthday&&n.createElement(n.Fragment,null,n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:361,columnNumber:11}}),n.createElement("span",{dangerouslySetInnerHTML:{__html:T.H.small},className:"contact-field-type contact-action-button",__source:{fileName:k,lineNumber:362,columnNumber:11}}),n.createElement("p",{className:"contact-birthday selectable",__source:{fileName:k,lineNumber:366,columnNumber:11}},y()(e.birthday).format("LL"))),e.note&&n.createElement(n.Fragment,null,n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:372,columnNumber:11}}),n.createElement("span",{dangerouslySetInnerHTML:{__html:T.ib.small},className:"contact-field-type contact-action-button",onClick:this.toggleEditMode,title:Object(r.a)("Edit note"),__source:{fileName:k,lineNumber:373,columnNumber:11}}),n.createElement("p",{className:"contact-note selectable",__source:{fileName:k,lineNumber:379,columnNumber:11}},e.note))))})}static getDerivedStateFromProps(e,t){return{contact:e.contact}}render(){const{contact:e}=this.state,t=e.emailAddresses[0]&&e.emailAddresses[0].emailAddress;return this.state.editMode?n.createElement("div",{className:"contact-view cardview",__source:{fileName:k,lineNumber:399,columnNumber:7}},n.createElement("div",{className:"contact-header",__source:{fileName:k,lineNumber:400,columnNumber:9}},n.createElement(N,{id:e.id,attributeChange:this.updateAvatar,photo:e.avatarUrl||"",emailAddress:t,__source:{fileName:k,lineNumber:401,columnNumber:11}}),n.createElement("span",{className:"contact-name",__source:{fileName:k,lineNumber:407,columnNumber:11}},n.createElement("input",{ref:"name",type:"text",value:e.name||"",placeholder:Object(r.a)("other","Name"),onChange:this.changeProperty.bind(this,"name"),onKeyDown:this.onKeyDown.bind(this,"name"),onBlur:this.update.bind(this,"name"),__source:{fileName:k,lineNumber:408,columnNumber:13}}))),n.createElement(v,{values:e.emailAddresses.map(({emailAddress:e,id:t,type:a})=>({value:e,id:t,type:a})),label:Object(r.a)("Email"),actionLabel:Object(r.a)("Add another Email"),inputType:"email",onChange:this._handleEmailsChanged,onRemove:this._handleEmailsRemoved,key:`emailAddresses-${Math.max(e.emailAddresses.length,1)}`,__source:{fileName:k,lineNumber:426,columnNumber:9}}),n.createElement("label",{className:"contact-trusted",__source:{fileName:k,lineNumber:439,columnNumber:9}},n.createElement("input",{type:"checkbox",checked:e.trusted||!1,onChange:this.updateCheckboxProperty.bind(this,"trusted"),__source:{fileName:k,lineNumber:440,columnNumber:11}}),n.createElement("span",{__source:{fileName:k,lineNumber:445,columnNumber:11}},Object(r.a)("Always allow external content in emails"))),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:448,columnNumber:9}}),n.createElement(v,{values:e.phoneNumbers.map(({phoneNumber:e,id:t,type:a})=>({value:e,id:t,type:a})),label:Object(r.a)("Phone Number"),actionLabel:Object(r.a)("Add another Phone Number"),inputType:"tel",onChange:this._handlePhoneNumbersChanged,onRemove:this._handlePhoneNumbersRemoved,key:`phoneNumbers-${e.phoneNumbers.length}`,__source:{fileName:k,lineNumber:449,columnNumber:9}}),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:462,columnNumber:9}}),n.createElement(v,{values:e.postalAddresses.map(({postalAddress:e,id:t,type:a})=>({value:e,id:t,type:a})),label:Object(r.a)("Postal Address"),actionLabel:Object(r.a)("Add another Postal Address"),inputType:"text",onChange:this._handlePostalAddressesChanged,onRemove:this._handlePostalAddressesRemoved,key:`postalAddresses-${e.postalAddresses.length}`,__source:{fileName:k,lineNumber:463,columnNumber:9}}),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:476,columnNumber:9}}),n.createElement("span",{className:"contact-field",__source:{fileName:k,lineNumber:477,columnNumber:9}},n.createElement(E.a,{className:"contact-bday",value:e.birthday?y()(e.birthday).format("YYYY-MM-DD"):"",title:Object(r.a)("title","Birthday"),onChange:this.changeProperty.bind(this,"birthday"),onKeyDown:this.onKeyDown.bind(this,"birthday"),onBlur:this.update.bind(this,"birthday"),placeholder:Object(r.a)("title","Birthday"),__source:{fileName:k,lineNumber:478,columnNumber:11}}),n.createElement("button",{type:"button",className:"remove",title:Object(r.a)("Remove Birthday"),onMouseUp:this.changeProperty.bind({target:{value:0}},"birthday"),__source:{fileName:k,lineNumber:490,columnNumber:11}},"–")),n.createElement("span",{className:"spacer",__source:{fileName:k,lineNumber:499,columnNumber:9}}),n.createElement("textarea",{className:"contact-edit-note",type:"text",value:e.note||"",title:e.note||"",onChange:this.changeProperty.bind(this,"note"),onKeyDown:this.onKeyDown.bind(this,"note"),onBlur:this.update.bind(this,"note"),placeholder:Object(r.a)("Note"),__source:{fileName:k,lineNumber:500,columnNumber:9}})):this.renderDisplayMode()}}t.a=I},function(e,t,a){"use strict";var n,i,s,r=a(0),o=a.n(r),l=a(9),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelPathField.jsx";class u extends o.a.Component{constructor(e){super(e)}render(){return o.a.createElement("div",{className:"panel-pathfield",__source:{fileName:c,lineNumber:23,columnNumber:7}},o.a.createElement("button",{className:"meta-icon url",title:this.props.buttonTitle,disabled:this.props.disabled,tabIndex:this.props.tabIndex,onClick:this.props.openFile,dangerouslySetInnerHTML:{__html:l.td.small},__source:{fileName:c,lineNumber:24,columnNumber:9}}),o.a.createElement("input",{className:"cardview path",style:{opacity:this.props.disabled?.5:1},value:this.props.path,tabIndex:this.props.tabIndex,readOnly:this.props.readOnly,type:"text",placeholder:this.props.placeholder,__source:{fileName:c,lineNumber:30,columnNumber:9}}))}}s={buttonTitle:"",editTitle:"",placeholder:"",tabIndex:"-1",disabled:!1,readOnly:!1,path:""},(i="defaultProps")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s;var m=u,d=a(14),h=a(46),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelUrlField.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends o.a.Component{constructor(e){super(e),b(this,"_openUrl",()=>{this.props.url&&d.a.openURL(Object(h.e)(this.props.url))}),this.state={editUrl:void 0}}render(){return o.a.createElement("div",{className:"panel-urlfield",__source:{fileName:p,lineNumber:34,columnNumber:7}},o.a.createElement("button",{className:"meta-icon url",title:this.props.buttonTitle,disabled:this.props.disabled,tabIndex:this.props.tabIndex,onClick:this._openUrl,dangerouslySetInnerHTML:{__html:l.qd.small},__source:{fileName:p,lineNumber:35,columnNumber:9}}),o.a.createElement("input",{type:"text",className:"cardview url",tabIndex:this.props.tabIndex,title:this.props.editTitle,placeholder:this.props.placeholder,disabled:this.props.disabled,value:this.props.url,readOnly:this.props.readOnly,__source:{fileName:p,lineNumber:41,columnNumber:9}}))}}b(g,"defaultProps",{buttonTitle:"",editTitle:"",placeholder:"",tabIndex:"-1",disabled:!1,readOnly:!1,url:""});var N=g,f=a(2),_=a(20),v=a.n(_),E=a(312),C=a(15),w=a.n(C),O=a(606),y="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadEditor.jsx";class S extends o.a.Component{render(){const e=this.props.downloadItem,t=e?e.filename:"",a=t.split("\\").pop().split("/").pop(),n=e?e.url:"",i=e?"complete"===e.state?e.totalBytes:e.bytesReceived:0,s=e?Object(E.a)(i):"",r=e?Object(E.a)(Object(O.a)(e))+"/s":"",c=Object(f.a)("Show in File Manager"),u=e?parseFloat(e.bytesReceived/e.fileSize*100).toFixed(0):"",d=e&&new Date(e.startTime).toDateString()===new Date(e.endTime).toDateString();return o.a.createElement("div",{className:v()({data:!0,"downloads-cardwrapper":!0,cardview:!0,disabled:!e}),__source:{fileName:y,lineNumber:52,columnNumber:7}},o.a.createElement("input",{className:"cardview title",placeholder:Object(f.a)("File Name"),value:a,readOnly:!0,type:"text",disabled:!e,__source:{fileName:y,lineNumber:58,columnNumber:9}}),o.a.createElement("div",{className:"panel-pathfield",__source:{fileName:y,lineNumber:66,columnNumber:9}},o.a.createElement("span",{className:"meta-icon speed",tabIndex:this.props.keyAccess,dangerouslySetInnerHTML:{__html:l.hb},__source:{fileName:y,lineNumber:67,columnNumber:11}}),o.a.createElement("span",{className:"cardview",__source:{fileName:y,lineNumber:70,columnNumber:11}},r?Object(f.a)("$1 ($2)",[s,r]):Object(f.a)("Download Speed"))),o.a.createElement(N,{buttonTitle:Object(f.a)("command","Restart"),readOnly:!0,disabled:!e,tabIndex:this.props.keyAccess,url:n,placeholder:Object(f.a)("File URL"),__source:{fileName:y,lineNumber:78,columnNumber:9}}),o.a.createElement(m,{buttonTitle:c,readOnly:!0,disabled:!e||!e.exists,tabIndex:this.props.keyAccess,path:t,openFile:this.props.onShow,placeholder:Object(f.a)("Local Path"),__source:{fileName:y,lineNumber:86,columnNumber:9}}),o.a.createElement("div",{className:"panel-timefield",__source:{fileName:y,lineNumber:95,columnNumber:9}},o.a.createElement("span",{className:"meta-icon date",dangerouslySetInnerHTML:{__html:l.y},__source:{fileName:y,lineNumber:96,columnNumber:11}}),o.a.createElement("span",{__source:{fileName:y,lineNumber:98,columnNumber:13}},e&&Object(f.a)("Started: $1",[w()(e.startTime).format("l, LT")]),e&&o.a.createElement("br",{__source:{fileName:y,lineNumber:102,columnNumber:23}}),e?e.endTime?Object(f.a)("Finished: $1",[w()(e.endTime).format(d?"LT":"l, LT")]):!isNaN(parseInt(u))&&Object(f.a)("Completed $1 %",[u]):Object(f.a)("Download Time"))))}}t.a=S},function(e,t,a){"use strict";var n=a(831),i=a(832),s=a(453),r=a(14),o=a(6),l=a(0),c=a.n(l),u=a(25),m=a(20),d=a.n(m),h=a(149),p=a(250),b=a.n(p),g=a(1),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\MarkdownRender.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _(e){if(0!==e.button)return;const t=e.target;if(t instanceof HTMLAnchorElement&&t.href){const a=t.getAttribute("href");if(!a||a&&a.startsWith("#"))return;const{metaKey:n,shiftKey:i,ctrlKey:s,altKey:l,button:c}=e,{allowOverride:u,...m}=Object(h.b)({metaKey:n,shiftKey:i,ctrlKey:s,altKey:l,button:c});r.a.openURL(t.href,{...m,inCurrent:!1,inBackground:u?o.a.get(g.kTabsOpenNewInBackground):m.inBackground})}}class v extends c.a.PureComponent{constructor(...e){super(...e),f(this,"markdownFormatter",new s.a),f(this,"refRender",c.a.createRef()),f(this,"state",{markup:this.props.body}),f(this,"onScroll",({currentTarget:e})=>{this.props.onScrollValueChange&&this.props.onScrollValueChange(e.scrollTop)}),f(this,"selectAll",e=>{const{document:t,getSelection:a}=this.context;e.focus();const n=a();n&&n.removeAllRanges();const i=t.createRange();i.selectNodeContents(e),n&&n.addRange(i)}),f(this,"onKeyDown",e=>{const{getSelection:t}=this.context;switch(e.key){case"a":return void(e.ctrlKey&&(e.preventDefault(),this.selectAll(e.currentTarget)));case"Escape":{const e=t();return void(e&&e.removeAllRanges())}}})}componentDidMount(){const e=this.props.attachments.map(({content:e})=>fetch(e).then(e=>e.blob()).then(t=>{const a=URL.createObjectURL(t);return{content:e,objectURL:a}}));Promise.all(e).then(e=>{this.objectURLs=e.map(e=>e.objectURL);const t=e.map(({content:e,objectURL:t})=>`[${b()(e)}]: ${t}`).join("\n"),a=`${this.props.body}\n\n${t}\n`;this.setState({markup:a})}),this.refRender.current&&(this.refRender.current.scrollTop=this.props.initialScrollPosition||0)}componentWillUnmount(){this.objectURLs&&this.objectURLs.forEach(URL.revokeObjectURL)}render(){const{className:e}=this.props,t=this.markdownFormatter.getRawMarkup(this.state.markup);return c.a.createElement("div",{ref:this.refRender,onMouseUp:_,onKeyDown:this.onKeyDown,className:d()("MarkdownRender",e),tabIndex:"0",onScroll:this.onScroll,__source:{fileName:N,lineNumber:143,columnNumber:13}},c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t},__source:{fileName:N,lineNumber:151,columnNumber:7}}))}}f(v,"contextType",u.a);var E=v,C=a(151),w=a(89),O=a(2),y=a(284);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends c.a.PureComponent{constructor(...e){super(...e),S(this,"_isIMEOpen",!1),S(this,"state",{content:this.props.content}),S(this,"refContent",c.a.createRef()),S(this,"focus",()=>{this.refContent.current&&this.refContent.current.focus()}),S(this,"reset",Object(y.a)(()=>{this.setState({content:this.props.content})},w.a,{leading:!1,trailing:!0})),S(this,"_save",Object(y.a)(()=>{this.waitForCompositionEnd.then(()=>{this.props.onSave(this.state.content)})},w.a,{leading:!1,trailing:!0})),S(this,"handleContentChange",({currentTarget:e})=>{this.props.onChange(e.value),this.setState({content:e.value},this._save)}),S(this,"waitForCompositionEnd",Promise.resolve()),S(this,"resolveComposition",()=>{}),S(this,"_handleCompositionStart",()=>{this._isIMEOpen=!0,this.waitForCompositionEnd=(()=>new Promise(e=>{this.resolveComposition=e}))()}),S(this,"_handleCompositionEnd",()=>{this._isIMEOpen=!1,this.resolveComposition()}),S(this,"handleKeyDown",e=>{(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),this.props.onSave(this.state.content)),"Escape"===e.key&&this._isIMEOpen&&(e.preventDefault(),e.stopPropagation())}),S(this,"handleFocus",e=>{e.persist(),e.currentTarget.selectionStart=this.props.content.length,e.currentTarget.selectionEnd=this.props.content.length})}render(){const{disabled:e,className:t}=this.props,{content:a}=this.state;return c.a.createElement("textarea",{ref:this.refContent,className:t,placeholder:Object(O.a)("Note"),title:Object(O.a)("Write a note"),value:a,disabled:e,onFocus:this.handleFocus,onChange:this.handleContentChange,onCompositionStart:this._handleCompositionStart,onCompositionEnd:this._handleCompositionEnd,onKeyDown:this.handleKeyDown,onBlur:this.props.onBlur,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesTextEditor.jsx",lineNumber:100,columnNumber:7}})}}var k=a(67),A=a(40),I=a.n(A),D=a(377),M=a(114),P=a(108),x=a(10),L=a(15),j=a.n(L),R=a(7),B=a(97),F=a(571),U=a(751),H=a(46),V=a(9),W=(a(23),"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesEditor.jsx");function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G({disabled:e,onToggleMarkDown:t,onTakeScreenshot:a,onTakeCaptureArea:i,onOpenDialog:s,keyAccess:r,viewMarkdown:o,noteId:l}){return c.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:W,lineNumber:75,columnNumber:5}},c.a.createElement("div",{className:"toolbar-group",__source:{fileName:W,lineNumber:76,columnNumber:7}},c.a.createElement("div",{className:"button-toolbar",__source:{fileName:W,lineNumber:77,columnNumber:9}},c.a.createElement("button",{disabled:e,onClick:a,title:Object(O.a)("Add screenshot"),tabIndex:r,dangerouslySetInnerHTML:{__html:V.rc},__source:{fileName:W,lineNumber:78,columnNumber:11}})),c.a.createElement("div",{className:"button-toolbar",__source:{fileName:W,lineNumber:85,columnNumber:11}},c.a.createElement("button",{disabled:e,onClick:i,title:Object(O.a)("Add capture of selected area..."),tabIndex:r,dangerouslySetInnerHTML:{__html:V.wc},__source:{fileName:W,lineNumber:86,columnNumber:13}})),c.a.createElement(n.a,{onOpenDialog:s,disabled:e,keyAccess:r,noteId:l,__source:{fileName:W,lineNumber:93,columnNumber:11}}),c.a.createElement("div",{className:"button-toolbar",__source:{fileName:W,lineNumber:99,columnNumber:11}},c.a.createElement("button",{className:"button-toolbar"+(o?" button-pressed":""),disabled:e,onClick:t,title:o?Object(O.a)("Switch to Editor"):Object(O.a)("Switch Markdown View"),tabIndex:r,dangerouslySetInnerHTML:{__html:V.Fd},__source:{fileName:W,lineNumber:100,columnNumber:13}}))),c.a.createElement("div",{className:"button-toolbar",style:{marginLeft:"auto",marginRight:0},__source:{fileName:W,lineNumber:114,columnNumber:9}},!1))}function K(){return new Promise(e=>{o.a.get(g.kPanelsAsOverlayEnabled)&&k.a.toggleContent("notes"),setTimeout(()=>e(),200)})}async function Y(e,t){return function(e,t){return new Promise((a,n)=>{R.a.notes.update(e,t,e=>{x.a.runtime.lastError&&n(x.a.runtime.lastError),a(e)})})}(e,t)}function $(e,{title:t,content:a,url:n}){return Y(e,Object(F.a)({url:"string"==typeof n?Object(H.c)(n.trim()):void 0,title:t,content:a},U.a))}class X extends c.a.Component{constructor(...e){super(...e),z(this,"refFolderName",c.a.createRef()),z(this,"refContainer",c.a.createRef()),z(this,"refTextEditor",c.a.createRef()),z(this,"state",{url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0}),z(this,"isEmpty",()=>{const{note:e}=this.props;return![this.state.title,this.state.url,e&&e.content,e&&e.attachments&&e.attachments.length].some(Boolean)}),z(this,"updateState",Object(y.a)(()=>{if(Object(B.a)(I.a.findDOMNode(this.refTextEditor.current)))return;const e={url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0};this.setState(e,()=>this.refTextEditor.current&&this.refTextEditor.current.reset())},w.a,{trailing:!0,leading:!1})),z(this,"focusPrimaryInput",()=>{if(!this.props.note)return;w.b.isFolder(this.props.note)?this.refFolderName.current&&this.refFolderName.current.focus():this.refTextEditor.current&&this.refTextEditor.current.focus()}),z(this,"_captureScreenshot",()=>{if(!this.props.note)return;const e=this.props.note.id;K().then(()=>C.a.addScreenshot(e))}),z(this,"_takeAreaCapture",async()=>{this.props.note&&(await C.a.addAreaCapture(this.props.note.id),K())}),z(this,"_openUrl",e=>{if(2===e.button)return;if(!this.props.note||!this.props.note.url)return;const t=Object(H.e)(this.props.note.url);if(!t)return;const{metaKey:a,shiftKey:n,ctrlKey:i,altKey:s,button:o}=e,{allowOverride:l,...c}=Object(h.b)({metaKey:a,shiftKey:n,ctrlKey:i,altKey:s,button:o});r.a.openURL(t,c)}),z(this,"_toggleMarkdown",()=>{this._save(),this.props.toggleMarkdown()}),z(this,"_save",async()=>{const{note:e}=this.props;if(!e||e.trash)return Promise.resolve();M.a.setUrlfieldState("NotesEditor",{editUrl:void 0});const{title:t,url:a,content:n}=this.state;return await $(e.id,{title:t,url:a,content:n})}),z(this,"_onUrlbarStoreChanged",()=>{const e=P.a.getUrlfieldStateFromId("NotesEditor");this.setState({url:e.editUrl})}),z(this,"handleTitleChange",({currentTarget:e})=>{const{note:t}=this.props;if(!t)return;const a=e.value;this.setState({title:a},()=>{$(t.id,{title:a})})}),z(this,"onBlur",()=>{this._save()}),z(this,"deleteAttachment",e=>{this.props.note&&C.a.removeAttachment(this.props.note.id,e)}),z(this,"handleSaveContent",e=>{const{note:t}=this.props;t&&$(t.id,{content:e})})}componentDidMount(){P.a.addChangeListener(this._onUrlbarStoreChanged)}componentDidUpdate(e,t){this.props.note&&this.props.note.content!==t.content&&this.updateState()}componentWillUnmount(){if(P.a.removeChangeListener(this._onUrlbarStoreChanged),!this.props.note)return;const{content:e}=this.state;$(this.props.note.id,{content:e})}render(){const{note:e}=this.props,t=e&&!w.b.isFolder(e),a=e&&w.b.isFolder(e),n=!e,s=e?j()(e.dateAdded).format("LLL"):"",r=Boolean(!e||w.b.isSeparator(e)||a);return c.a.createElement("div",{className:d()("NotesEditor","cardview",{"NotesEditor--HasAttachments":e&&e.attachments&&e.attachments.length>0}),ref:this.refContainer,onKeyDown:this.props.onKeyDown,__source:{fileName:W,lineNumber:359,columnNumber:13}},c.a.createElement(G,{disabled:r,onToggleMarkDown:this._toggleMarkdown,onTakeScreenshot:this._captureScreenshot,onTakeCaptureArea:this._takeAreaCapture,keyAccess:this.props.keyAccess,viewMarkdown:this.props.viewMarkdown,noteId:e?e.id:"-1",onOpenDialog:this.props.onOpenDialog,__source:{fileName:W,lineNumber:372,columnNumber:7}}),t&&!this.props.viewMarkdown&&e&&c.a.createElement("span",{className:"NotesEditor-Editor-Background",__source:{fileName:W,lineNumber:384,columnNumber:9}},c.a.createElement(T,{ref:this.refTextEditor,key:e.id,onBlur:this.onBlur,className:"NotesEditor-Editor",disabled:r,content:e.content||"",onChange:e=>this.setState({content:e}),onSave:this.handleSaveContent,__source:{fileName:W,lineNumber:385,columnNumber:11}})),t&&this.props.viewMarkdown&&e&&c.a.createElement(E,{key:e.content?e.content.length:"-1",body:e.content||"",attachments:[],__source:{fileName:W,lineNumber:399,columnNumber:9}}),a&&e&&c.a.createElement("div",{className:"folder",__source:{fileName:W,lineNumber:407,columnNumber:9}},c.a.createElement("input",{ref:this.refFolderName,type:"text",placeholder:Object(O.a)("Folder"),title:Object(O.a)("Edit folder name"),value:this.state.title,disabled:e.trash,onFocus:e=>e.target.select(),onChange:this.handleTitleChange,__source:{fileName:W,lineNumber:408,columnNumber:11}})),n&&c.a.createElement("div",{className:"NotesEditor-EmptyPlaceholder ",onClick:this.props.onAdd,__source:{fileName:W,lineNumber:422,columnNumber:9}},Object(O.a)("Start here to add a new note")),e&&c.a.createElement(i.a,{className:"NotesEditor-Attachments",attachments:e.attachments||[],onRemoveAttachment:this.deleteAttachment,__source:{fileName:W,lineNumber:427,columnNumber:16}}),c.a.createElement("div",{className:d()("NotesEditor-Metadata",{disabled:r}),__source:{fileName:W,lineNumber:433,columnNumber:7}},c.a.createElement("button",{className:"NotesEditor-MetaIcon NotesEditor-MetaIcon--Url",title:Object(O.a)("Go to address"),disabled:r,tabIndex:this.props.keyAccess,onClick:this._openUrl,onAuxClick:this._openUrl,dangerouslySetInnerHTML:{__html:V.w},__source:{fileName:W,lineNumber:434,columnNumber:9}}),c.a.createElement(D.a,{onBlur:this.onBlur,autoFocus:!1,title:Object(O.a)("Enter webpage address"),className:"cardview address",disabled:r,displayUrl:e&&e.url?e.url:"",editUrl:this.state.url,autocompletionEnabled:!0,pageId:"NotesEditor",placeholder:e?Object(O.a)("Address"):null,__source:{fileName:W,lineNumber:442,columnNumber:9}}),c.a.createElement("div",{className:"NotesEditor-Created dateCreated",title:Object(O.a)("Date created"),__source:{fileName:W,lineNumber:455,columnNumber:9}},c.a.createElement("div",{className:"NotesEditor-MetaIcon fieldset",dangerouslySetInnerHTML:{__html:V.y},__source:{fileName:W,lineNumber:456,columnNumber:11}}),c.a.createElement("span",{__source:{fileName:W,lineNumber:459,columnNumber:11}},s))))}}t.a=X},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(68),r=a(131),o=a(774),l=a(21),c=a(47),u=a(29),m=a(56),d=a(31),h=a(167),p=a(127),b=a(14),g=a(67),N=a(25),f=a(78),_=a(4),v=a(1),E=a(255),C=a(23),w=a(9),O="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeaderButtonWithDropdown.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class S extends i.a.Component{constructor(...e){super(...e),y(this,"state",{activeItemIndex:-1,openDropdownMenu:!1,contact:this.props.mailAddress?p.a.getContactsWithAddress(this.props.mailAddress.address):void 0,status:""}),y(this,"contactChanged",()=>{if(this.props.mailAddress){const e=this.props.mailAddress;if(this.state.contact){const t=p.a.getNodeById(this.state.contact.id);if(t&&t.emailAddresses.includes(e.address))return void this.setState({contact:t})}this.setState({contact:p.a.getContactsWithAddress(this.props.mailAddress.address)})}}),y(this,"onClickDropdown",()=>{this.setState(e=>({openDropdownMenu:!e.openDropdownMenu}))}),y(this,"openMenu",()=>{this.setState({openDropdownMenu:!0})}),y(this,"closeMenu",()=>{this.setState({activeItemIndex:-1,openDropdownMenu:!1})}),y(this,"handleKeyDown",e=>{switch(e.key){case"Escape":case"Tab":this.closeMenu();break;case"Enter":case"Space":if(e.stopPropagation(),e.preventDefault(),this.state.activeItemIndex>-1){const e=this.getDropdownMenuItems()[this.state.activeItemIndex];e.onSuccessText?e.handler().then(()=>this.onMenuItemClicked(e.onSuccessText),()=>this.onMenuItemClicked(e.onErrorText)):(e.handler(),this.closeMenu())}else this.props.onClick();break;case"ArrowUp":this.setState(e=>{const t=e.activeItemIndex-1;if(t>-1)return{activeItemIndex:t}});break;case"ArrowDown":this.setState(e=>{const t=e.activeItemIndex+1;if(t<this.getDropdownMenuItems().length)return{openDropdownMenu:!0,activeItemIndex:t}})}}),y(this,"onMenuItemClicked",e=>{this.statusTimeout&&clearTimeout(this.statusTimeout);this.setState({status:e}),this.closeMenu(),this.statusTimeout=setTimeout(()=>this.setState({status:""}),1e3)}),y(this,"contactOrAddressString",()=>this.props.mailAddress&&this.state.contact?this.state.contact.name?this.state.contact.name+" <"+this.props.mailAddress.address+">":this.props.mailAddress.address:this.props.buttonTitle),y(this,"onEditContact",e=>{e&&(g.a.showContent("contacts",{setFocus:!0,selectId:e.id,reason:"edit"}),c.a.selectContact(e.emailAddresses[0].emailAddress),b.a.openURL(C.p.internals.mailpage,{singleton:!0}))}),y(this,"onAddContact",e=>{g.a.showContent("contacts"),h.a.newContactFromMailAddress(e,!0),c.a.selectContact(e.address),b.a.openURL(C.p.internals.mailpage,{singleton:!0})}),y(this,"getDropdownMenuItems",()=>{if(this.props.mailAddress){const e=this.props.mailAddress;return this.state.contact?[...this.props.dropdownMenuItems,{...Object(_.a)("Edit contact"),handler:this.onEditContact.bind(this,this.state.contact)}]:[...this.props.dropdownMenuItems,{...Object(_.a)("Add to contacts"),handler:this.onAddContact.bind(this,e)}]}return this.props.dropdownMenuItems}),y(this,"onContextMenu",e=>{Object(f.a)(this.context.vivaldiWindowId,this.getDropdownMenuItems())(e)})}componentDidMount(){this.props.mailAddress&&p.a.addChangeListener(this.contactChanged)}componentWillUnmount(){this.props.mailAddress&&p.a.removeChangeListener(this.contactChanged)}render(){return i.a.createElement("div",{className:"button-with-dropdown-wrapper",__source:{fileName:O,lineNumber:226,columnNumber:7}},i.a.createElement("div",{className:"button-with-dropdown-container",onMouseLeave:this.closeMenu,title:this.contactOrAddressString(),onContextMenu:this.onContextMenu,__source:{fileName:O,lineNumber:227,columnNumber:9}},i.a.createElement("button",{onKeyDown:this.handleKeyDown,tabIndex:this.props.prefValues[v.kKeyboardTabToAll],onClick:this.props.onClick,__source:{fileName:O,lineNumber:232,columnNumber:11}},this.state.contact&&i.a.createElement("img",{src:this.state.contact.avatarUrl||E.b,__source:{fileName:O,lineNumber:237,columnNumber:36}}),i.a.createElement("span",{__source:{fileName:O,lineNumber:238,columnNumber:13}},this.contactOrAddressString())),i.a.createElement("button",{tabIndex:-1,onMouseDown:this.onClickDropdown,dangerouslySetInnerHTML:{__html:w.n.medium},__source:{fileName:O,lineNumber:240,columnNumber:11}}),this.state.openDropdownMenu&&i.a.createElement("ul",{className:"dropdown-menu",__source:{fileName:O,lineNumber:246,columnNumber:13}},this.getDropdownMenuItems().map((e,t)=>i.a.createElement("li",{key:e.label,onMouseUp:e.onSuccessText?()=>e.handler().then(()=>this.onMenuItemClicked(e.onSuccessText),()=>this.onMenuItemClicked(e.onErrorText)):()=>{e.handler&&e.handler(),this.closeMenu()},className:this.state.activeItemIndex===t?"active":void 0,__source:{fileName:O,lineNumber:248,columnNumber:17}},e.label))),this.state.status&&i.a.createElement("div",{className:"status",__source:{fileName:O,lineNumber:266,columnNumber:33}},this.state.status)))}}y(S,"contextType",N.a);var T=S,k=a(2),A=a(98),I="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeaderAddressField.jsx";function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class M extends i.a.PureComponent{constructor(...e){super(...e),D(this,"state",{maxShown:5}),D(this,"onClickAddress",e=>{e.address&&s.a.enableSenderView(e.address)})}render(){const e=this.state.maxShown,t=this.props.mailAddresses;return i.a.createElement("span",{key:"detail",className:"detail",__source:{fileName:I,lineNumber:39,columnNumber:7}},t.slice(0,e).map((e,t)=>{const a=Object(A.f)(e),n=[{...Object(_.a)("Copy address"),handler:()=>navigator.clipboard.writeText(a),onSuccessText:Object(k.a)("Copied to clipboard",[a]),onErrorText:Object(k.a)("Failed to copy address")},{...Object(_.a)("See messages to and from address"),handler:this.onClickAddress.bind(this,e)}];return i.a.createElement(T,{key:a+String(t),prefValues:this.props.prefValues,onClick:this.onClickAddress.bind(this,e),mailAddress:e,buttonTitle:a,dropdownMenuItems:n,__source:{fileName:I,lineNumber:56,columnNumber:15}})}),t.length>this.state.maxShown&&i.a.createElement("a",{key:"more",tabIndex:this.props.prefValues[v.kKeyboardTabToAll],onClick:()=>this.setState({maxShown:t.length}),__source:{fileName:I,lineNumber:68,columnNumber:11}},Object(k.a)("... $1 more","... $1 more",[t.length-this.state.maxShown,t.length-this.state.maxShown])))}}var P=M,x=a(41),L=a(95),j=a(10),R=a(20),B=a.n(R),F=a(276),U=a(172),H=a(207),V=a(15),W=a.n(V),z=a(3),G=a(468),K=a(66),Y=a(261),$=a(546),X="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MessageHeader.jsx";function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Q=[v.kDownloadsNotifyOnComplete,v.kDownloadsOpenPanelOnNew,v.kDownloadsStartAutomatically,v.kKeyboardTabToAll];function q(e){return e?W()(e).format("LLL"):""}class J extends n.PureComponent{constructor(e){let t;super(e),Z(this,"activeMessageStoreChanged",()=>{if(r.a.getActiveListEntry()===this.props.listEntry){const e=r.a.getAttachments(),t=r.a.getRaw();this.setState({attachments:e,raw:t})}}),Z(this,"onClickSubject",()=>{s.a.enableThreadedView()}),Z(this,"_toggleSenderAsMailingList",()=>{this.props.fromAddress&&c.a.toggleSenderAsMailingList(this.props.fromAddress)}),Z(this,"_copyHeader",()=>{const{from:e,listEntry:t,message:a}=this.props,{sentDate:n,subject:i}=t,s=a?a.to:H.a.get(t.toIds),{cc:r=[],bcc:o=[]}=a||{},l=[[Object(k.a)("mail","From"),e],[Object(k.a)("To"),s],[Object(k.a)("Cc"),r],[Object(k.a)("Bcc"),o]];let c=i+"\n"+q(n);for(const[e,t]of l)t.length>0&&(c+="\n"+`${e}: ${Object(A.e)(t)}`);c+="\n",navigator.clipboard.writeText(c)}),Z(this,"getContextMenuItems",e=>{const{subject:t}=this.props.listEntry,a=[{handler:L.a.back,visible:m.a.canGoBack(),...Object(_.a)("navigation","Back")},{handler:L.a.forward,visible:m.a.canGoForward(),...Object(_.a)("navigation","Forward")},d.a.separatorItem,{handler:this._copyHeader,...Object(_.a)("win_linux","Copy")}];return"subject"===e&&a.push({handler:()=>navigator.clipboard.writeText(t),...Object(_.a)("Copy subject")}),a.push(d.a.separatorItem,{handler:this.props.toggleRaw,visible:!this.props.showRaw,...Object(_.a)("Show raw message")},{handler:this.props.toggleRaw,visible:this.props.showRaw,...Object(_.a)("Hide raw message")}),this.props.fromAddress&&a.push({type:"checkbox",checked:u.a.isSenderMailingList(this.props.fromAddress),handler:this._toggleSenderAsMailingList,...Object(_.a)("Treat Sender as a Mailing List")},d.a.separatorItem,{handler:s.a.enableThreadedView,...Object(_.a)("Show message thread")},{handler:()=>s.a.enableSenderView(),...Object(_.a)("Show messages from sender")}),a}),Z(this,"handleOnCloseDialog",()=>{this.setState({dialogParentElement:null})}),Z(this,"showDialog",e=>{e.webview=this.refs.webview,this.setState({dialogParentElement:this.refs.webpagecontainer,customData:e})}),Z(this,"onHeaderContextMenu",e=>{Object(f.a)(this.context.vivaldiWindowId,this.getContextMenuItems())(e)}),Z(this,"onAttachmentContextMenu",(e,t)=>{Object(f.a)(this.context.vivaldiWindowId,e)(t)}),Z(this,"renderAttachmentButtons",(e,t)=>e.slice(0,t).map((e,t)=>{const a=[{...Object(_.a)("Save"),handler:()=>this.onClickAttachmentDropdown(e)},{...Object(_.a)("Save As"),handler:()=>this.onClickAttachmentDropdown(e,"saveas")}];return(n.createElement("button",{className:"attachment-button",key:e.filename+String(t),onClick:this.onClickAttachment.bind(this,e),title:e.filename,tabIndex:this.props.prefValues[v.kKeyboardTabToAll],onContextMenu:this.onAttachmentContextMenu.bind(this,a),__source:{fileName:X,lineNumber:364,columnNumber:9}},e.filename))})),Z(this,"renderSubjectButton",e=>n.createElement(T,{prefValues:this.props.prefValues,onClick:this.onClickSubject,buttonTitle:e,dropdownMenuItems:[{...Object(_.a)("Copy subject"),handler:()=>navigator.clipboard.writeText(e),onSuccessText:Object(k.a)("Copied to clipboard"),onErrorText:Object(k.a)("Failed to copy subject")},{...Object(_.a)("See message thread"),handler:this.onClickSubject}],__source:{fileName:X,lineNumber:380,columnNumber:7}})),Z(this,"shouldWarnUser",()=>{const{from:e,message:t}=this.props;return!!(t&&t.replyTo[0]&&e[0]&&(t.replyTo.length>1||e.length>1||e[0].address!==t.replyTo[0].address))}),Z(this,"toggleToolTip",()=>{this.setState(e=>({isToolTipOpen:!e.isToolTipOpen}))});let a=[];r.a.getActiveListEntry()===e.listEntry&&(a=r.a.getAttachments(),t=r.a.getRaw()),this.state={attachments:a,dialogParentElement:null,customData:null,maxShownAttachments:5,isToolTipOpen:!1,raw:t}}componentDidMount(){r.a.addChangeListener(this.activeMessageStoreChanged)}componentWillUnmount(){r.a.removeChangeListener(this.activeMessageStoreChanged)}async maybeParse(e){if("attachment"===e.type)return e;if(this.state.raw){const[t]=await this.state.raw.parse(e.mimeTree);if(t&&"attachment"===t.type)return t}}async onClickAttachment(e){const t=await this.maybeParse(e);t&&(this.props.prefValues[v.kDownloadsStartAutomatically]?(Object(G.a)(t),this.props.prefValues[v.kDownloadsOpenPanelOnNew]&&x.d.canAutoOpen("downloads")&&g.a.toggleContent("downloads")):this.showDialog(Object(G.c)(t)))}async onClickAttachmentDropdown(e,t){const a=await this.maybeParse(e);a&&(Object(G.a)(a,t),this.props.prefValues[v.kDownloadsOpenPanelOnNew]&&x.d.canAutoOpen("downloads")&&g.a.toggleContent("downloads"))}async onClickDownloadAll(){if(!this.state.raw)return;(await this.state.raw.parseAttachments()).forEach(e=>Object(G.a)(e))}onClickSaveAll(){const{raw:e}=this.state;e&&j.a.fileSystem.chooseEntry({type:"openDirectory"},t=>{const a=j.a.runtime.lastError;a?"User cancelled"!==a.message&&console.error("Error saving attachments",a.message||a):t?j.a.fileSystem.getWritableEntry(t,a=>{const n={create:!0};e.parseAttachments().then(e=>{for(const t of e){const e=Object(G.b)(t);a.getFile(Object(G.d)(t.filename),n,t=>{t.createWriter(t=>{t.write(e)})})}if(this.props.prefValues[v.kDownloadsNotifyOnComplete]){const e=new Notification(this.props.fromAddress,{body:Object(k.a)("Attachments have been saved to $1",t.name),icon:"resources/mail_notification_icon.png"});setTimeout(()=>e.close(),z.T)}})}):console.error("Error saving attachments, directory entry missing")})}render(){const{listEntry:e,message:t}=this.props,{sentDate:i,sources:s,subject:r}=e,{cc:l=[],bcc:c=[],replyTo:m=[]}=t||{},d=t?t.to:H.a.get(e.toIds),h=Object(K.j)(e.flags).toLowerCase(),p=this.shouldWarnUser(),b=Object(k.a)("Does not match the 'From' address. Therefore make sure you trust this address before sending."),g=[],N=[];return u.a.getByIds([...s.keys()]).forEach(e=>{const{accountId:t,path:a}=e;g.push(t),N.push(a)}),n.createElement("header",{onContextMenu:this.onHeaderContextMenu,className:B()({"mail-detail-header":!0,"is-unread":Object(U.a)(s)}),__source:{fileName:X,lineNumber:439,columnNumber:7}},this.state.dialogParentElement&&this.state.customData&&n.createElement(o.a,{customData:this.state.customData,onClose:this.handleOnCloseDialog,__source:{fileName:X,lineNumber:447,columnNumber:11}}),r&&n.createElement("h1",{className:"subject",ref:"Subject",__source:{fileName:X,lineNumber:454,columnNumber:11}},this.renderSubjectButton(r)),n.createElement("div",{className:"mail-indicators",__source:{fileName:X,lineNumber:461,columnNumber:9}},Object(F.a)(s)&&n.createElement("span",{className:"mail-status-indicator read-status trash",style:{display:"flex"},dangerouslySetInnerHTML:{__html:w.Wd.small},__source:{fileName:X,lineNumber:463,columnNumber:11}}),Object(K.q)(this.props.listEntry)&&n.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:w.Pb.small},__source:{fileName:X,lineNumber:471,columnNumber:11}}),Object(K.r)(this.props.listEntry)&&n.createElement("span",{className:"mail-status-indicator",dangerouslySetInnerHTML:{__html:w.Xb.small},__source:{fileName:X,lineNumber:478,columnNumber:11}}),h&&n.createElement("span",{className:`flag-color flag-${h}`,title:Object(k.a)("Flagged"),dangerouslySetInnerHTML:{__html:w.nb.small},__source:{fileName:X,lineNumber:485,columnNumber:11}})),n.createElement("div",{ref:"webpageview",className:"mail-details",__source:{fileName:X,lineNumber:493,columnNumber:9}},n.createElement("div",{ref:"webpagecontainer",className:"mail-detail-main",__source:{fileName:X,lineNumber:494,columnNumber:11}},this.props.from.length>0&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:497,columnNumber:15}},Object(k.a)("mail","From")),n.createElement(P,{ref:"From",prefValues:this.props.prefValues,mailAddresses:this.props.from,__source:{fileName:X,lineNumber:498,columnNumber:15}})),m.length>0&&!Object(Y.default)(this.props.from,m)&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:506,columnNumber:13}},Object(k.a)("Reply To"),p&&n.createElement("span",{className:"reply-to-warning",onClick:this.toggleToolTip,title:b,__source:{fileName:X,lineNumber:510,columnNumber:19}},"i",this.state.isToolTipOpen&&n.createElement("div",{className:"reply-to-warning-tooltip",__source:{fileName:X,lineNumber:517,columnNumber:21}},b))),n.createElement(P,{prefValues:this.props.prefValues,mailAddresses:m,__source:{fileName:X,lineNumber:523,columnNumber:15}})),d.length>0&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:531,columnNumber:13}},Object(k.a)("To")),n.createElement(P,{ref:"To",prefValues:this.props.prefValues,mailAddresses:d,__source:{fileName:X,lineNumber:532,columnNumber:13}})),l.length>0&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:540,columnNumber:15}},Object(k.a)("Cc")),n.createElement(P,{prefValues:this.props.prefValues,mailAddresses:l,__source:{fileName:X,lineNumber:541,columnNumber:15}})),c.length>0&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:548,columnNumber:15}},Object(k.a)("Bcc")),n.createElement(P,{prefValues:this.props.prefValues,mailAddresses:c,__source:{fileName:X,lineNumber:549,columnNumber:15}})),(e.attachment>0||this.state.attachments.length>0)&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",title:Object(k.a)("Attachment"),dangerouslySetInnerHTML:{__html:a(728)},__source:{fileName:X,lineNumber:556,columnNumber:15}}),n.createElement("span",{className:"detail attachments",__source:{fileName:X,lineNumber:561,columnNumber:15}},this.renderAttachmentButtons(this.state.attachments,this.state.maxShownAttachments),this.state.attachments.length>this.state.maxShownAttachments&&n.createElement("a",{tabIndex:this.props.prefValues[v.kKeyboardTabToAll],onClick:()=>this.setState(e=>({maxShownAttachments:e.attachments.length})),__source:{fileName:X,lineNumber:565,columnNumber:19}},Object(k.a)("... $1 more","... $1 more",[this.state.attachments.length-this.state.maxShownAttachments,this.state.attachments.length-this.state.maxShownAttachments])),this.state.attachments.length>1&&n.createElement("button",{className:"attachment-button",href:"#",onClick:this.onClickSaveAll.bind(this),__source:{fileName:X,lineNumber:577,columnNumber:19}},Object(k.a)("attachments","Save All")),this.state.attachments.length>1&&n.createElement("button",{className:"attachment-button",href:"#",onClick:this.onClickDownloadAll.bind(this),__source:{fileName:X,lineNumber:585,columnNumber:19}},Object(k.a)("attachments","Download All")))),Object(K.l)(e.flags)&&n.createElement(n.Fragment,null,n.createElement("span",{className:"label",__source:{fileName:X,lineNumber:597,columnNumber:15}},Object(k.a)("Label")),n.createElement("div",{className:"adjustment-mail-labels",__source:{fileName:X,lineNumber:598,columnNumber:15}},n.createElement($.a,{flags:e.flags,__source:{fileName:X,lineNumber:599,columnNumber:17}})))),n.createElement("div",{className:"mail-detail-side",__source:{fileName:X,lineNumber:605,columnNumber:11}},!g.some(e=>e===z.n)&&n.createElement("div",{className:"mail-detail-item",__source:{fileName:X,lineNumber:607,columnNumber:15}},N.join(", ")),n.createElement("div",{className:"mail-detail-item",ref:"Date",__source:{fileName:X,lineNumber:611,columnNumber:13}},q(i)))))}}Z(J,"contextType",N.a);t.a=Object(l.a)(J,Q)},function(e,t,a){"use strict";var n=a(167),i=a(580),s=a(47),r=a(14),o=a(65),l=a(37);const c={contact:n.a,mail:s.a,page:r.a,status:o.a};function u(e){if(e.origin!==l.o||!e.data||!e.data.actions)return;const{actionType:t,action:a,args:n}=e.data.actions,s=c[t];if(!s)throw new Error("Action creator not found for action type "+t);if("function"!=typeof s[a])throw new Error("Action "+s+"."+a+" not found");"status"===t&&"setStatus"===a&&(n[0]=Object(i.a)(n[0])),s[a](...n)}var m=a(119),d=a(175),h=a(199),p=a(36),b=a(67),g=a(41),N=a(283),f=a(6),_=a(35),v=a(2),E=a(10),C=a(60),w=a(386),O=a(3),y=a(1),S=a(409),T=a(717);const k=new BroadcastChannel("actions");function A(){const e=f.a.get(y.kMailCheckInterval);"one_minute"===e?(d.a.setCheckInterval(!0,1),N.a.setCheckInterval(!0,1)):"fifteen_minutes"===e?(d.a.setCheckInterval(!0,15),N.a.setCheckInterval(!0,15)):(d.a.setCheckInterval(!1),N.a.setCheckInterval(!1))}function I(){s.a.orderIndex(!1)}function D(){s.a.orderIndex(!0)}async function M(){if(!g.d.getIsMailWindow()||f.a.get(y.kMailIsTurnedOff))return;const e=f.a.get(y.kMailAccounts),t=f.a.get(y.kRssSettings);if(0===e.length&&0===t.length)return;o.a.setPersistentStatus("MAIL_STARTUP",Object(v.a)("Mail client starting...")),f.a.addListener(y.kMailSearchThreading,D),f.a.addListener(y.kMailSearchAscending,I),f.a.addListener(y.kMailCheckInterval,A),k.addEventListener("message",u,!1),window.addEventListener("online",L,!1),window.addEventListener("offline",j,!1);try{await s.a.start(),await m.a.start(),await Object(T.b)()}catch(e){return console.error(e),P(),void o.a.setStatus(Object(v.a)("Mail client startup failed, error has been logged to console"),O.T)}finally{o.a.clearPersistentStatus("MAIL_STARTUP")}const a=_.a.getSync("FOLDER_SELECTION");s.a.selectFolder(a),C.a.filter(),m.a.updateFlags(),w.a.sendAll(!1),d.a.connectIMAPClients(),N.a.checkForMail(),m.a.flushBuffer(),A(),m.a.updateThreads(),n.a.initializeContactStore(),o.a.setStatus(Object(v.a)("Mail client started"),O.T)}async function P(){h.a.closeMailPages(),f.a.removeListener(y.kMailSearchThreading,D),f.a.removeListener(y.kMailSearchAscending,I),f.a.removeListener(y.kMailCheckInterval,A),k.removeEventListener("message",u,!1),window.removeEventListener("online",L,!1),window.removeEventListener("offline",j,!1),d.a.setCheckInterval(!1),N.a.setCheckInterval(!1),await d.a.disconnectIMAPClients(),s.a.stop(),m.a.stop()}const x={start:async function(){await M(),Object(S.c)(),E.a.runtime.onMessage.addListener(async e=>{e&&(e.changedMailClientWindow&&e.windowId===window.vivaldiWindowId?(b.a.setMailWindow(),await M(),Object(S.c)()):e.addFeed&&e.feeds?p.a.showAddFeed(e.feeds):g.d.getIsMailWindow()&&e.refreshRSS&&Object(S.a)())}),f.a.addListener(y.kMailIsTurnedOff,async()=>{f.a.get(y.kMailIsTurnedOff)?(Object(S.d)(),await P()):(await M(),Object(S.c)())}),f.a.addListener([y.kMailAccounts,y.kRssSettings],async(e,t,a)=>{const n=f.a.get(y.kMailAccounts),i=f.a.get(y.kRssSettings);if(1===e.length&&0===t.length&&0===n.length&&0===i.length?(m.a.flushBuffer(),await P()):0!==e.length||1!==t.length||0!==n.length&&0!==i.length||await M(),a===y.kRssSettings)if(1===e.length&&0===t.length)Object(S.d)();else if(0===e.length&&1===t.length)Object(S.c)();else if(e.length<t.length){const a=t.filter(t=>!e.some(e=>e.url===t.url));Object(S.b)(a)}})}};async function L(e){await Promise.all([d.a.connectIMAPClients,N.a.checkForMail]),m.a.flushBuffer()}function j(e){d.a.disconnectIMAPClients()}t.a=x},,function(e,t,a){"use strict";var n=a(21),i=a(36),s=a(0),r=a.n(s),o=a(2),l=a(20),c=a.n(l),u=a(698),m=a(7),d=a(1),h=a(9),p="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountPopup.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=[d.kKeyboardTabToAll];class N extends r.a.Component{constructor(e){super(e),b(this,"attachListeners",()=>{m.a.windowPrivate.onWindowCreated.addListener(this.onWindowUpdated),m.a.windowPrivate.onWindowClosed.addListener(this.onWindowUpdated)}),b(this,"detachListeners",()=>{m.a.windowPrivate.onWindowCreated.removeListener(this.onWindowUpdated),m.a.windowPrivate.onWindowClosed.removeListener(this.onWindowUpdated)}),b(this,"onWindowUpdated",()=>{m.a.runtimePrivate.hasGuestSession(e=>{this.state&&this.setState({hasGuestSession:e})})}),b(this,"getAllProfileImages",()=>{m.a.runtimePrivate.getUserProfileImages(e=>{this.setState({profileImages:e})})}),b(this,"openNamedProfile",e=>{m.a.runtimePrivate.openNamedProfile(e,t=>{t||console.warn("Failed to open profile: "+e),this.props.hidePopup()})}),b(this,"getProfileImage",e=>e.customAvatar?e.customAvatar:e.image),b(this,"toggleGuestProfile",()=>{this.state.hasGuestSession?i.a.closeGuestSession():i.a.openGuestWindow(),this.props.hidePopup()}),b(this,"managePeople",()=>{this.setState({accountState:"list"})}),b(this,"manageUser",()=>{this.props.isLoggedIn?i.a.showSettings("sync"):this.setState({accountState:"edit"})}),b(this,"exitUser",()=>{i.a.closeActiveProfile()}),b(this,"getFormattedName_",()=>this.props.accountInfo.username&&this.props.isLoggedIn?r.a.createElement("div",{className:"profile-name",__source:{fileName:p,lineNumber:165,columnNumber:14}},r.a.createElement("div",{className:"active-sync-item-label",__source:{fileName:p,lineNumber:166,columnNumber:7}},Object(o.a)("Logged in as"),r.a.createElement("br",{__source:{fileName:p,lineNumber:167,columnNumber:28}})),r.a.createElement("div",{__source:{fileName:p,lineNumber:169,columnNumber:7}},this.props.accountInfo.username)):this.props.activeProfile.name),b(this,"selectActiveProfileImage",(e,t)=>{this.setState({activeImageIndex:e,activeImageUrl:t})}),b(this,"selectCustomProfileImage",()=>{m.a.utilities.selectLocalImage({title:Object(o.a)("Select Custom Image"),setPathInPrefs:!0,preferencePath:"vivaldi.profile_image_path"},e=>{})}),b(this,"goBack",()=>{let e="none";"info"===this.state.accountState&&(e="list"),this.state&&this.setState({accountState:e,editedName:this.props.activeProfile.name,activeImageIndex:this.props.activeProfile.imageIndex,canRemoveActive:!1})}),b(this,"onSave",()=>{let e=!0;if("edit"===this.state.accountState){if(this.state.editedName.length){const t=Object(u.a)(this.state.editedName).trim();if(!t.length)return;const a=this.state.hasDesktopShortcut!==this.state.createDesktopShortcut||this.state.activeImageIndex!==this.props.activeProfile.imageIndex;m.a.runtimePrivate.updateActiveProfile(t,this.state.activeImageIndex,a?this.state.createDesktopShortcut:void 0,t=>{e=t})}}else if("new"===this.state.accountState&&this.state.suggestedName.length){const t=Object(u.a)(this.state.suggestedName).trim();if(!t.length)return;m.a.runtimePrivate.createProfile(t,this.state.activeImageIndex,this.state.createDesktopShortcut,t=>{e=t})}this.props.hidePopup&&e&&this.props.hidePopup()}),b(this,"onCancel",()=>{this.goBack()}),b(this,"onSignin",()=>{i.a.showSettings("sync"),this.props.hidePopup&&this.props.hidePopup()}),b(this,"createProfile",()=>{this.setState({accountState:"new",activeImageIndex:0})}),b(this,"showProfileInfo",(e,t)=>{this.setState({accountState:"info",selectedProfilePath:e}),t.preventDefault(),t.stopPropagation(),m.a.runtimePrivate.getProfileStatistics(e,e=>{e.map(e=>{switch(e.category){case"Autofill":e.category=Object(o.a)("Autofill");break;case"Bookmarks":e.category=Object(o.a)("Bookmarks");break;case"Passwords":e.category=Object(o.a)("Passwords");break;case"BrowsingHistory":e.category=Object(o.a)("Browsing History")}}),this.setState({profileStats:e})})}),b(this,"confirmRemoval",()=>{this.setState({canRemoveActive:!0})}),b(this,"removeProfile",()=>{m.a.runtimePrivate.deleteProfile(this.state.selectedProfilePath,e=>{e&&this.goBack()})}),b(this,"handleNameInput",e=>{"new"===this.state.accountState?this.setState({suggestedName:e.target.value}):this.setState({editedName:e.target.value})}),b(this,"changeDesktopShortcut",e=>{this.setState({createDesktopShortcut:e.currentTarget.checked})}),b(this,"handleFocus",e=>{e.currentTarget.select()}),b(this,"renderNavigationBack",()=>{const e=Object(o.a)("profiles","Back");return(r.a.createElement("button",{key:"back",type:"button",title:e,className:"nav-back",onClick:this.goBack,dangerouslySetInnerHTML:{__html:h.hc.medium+e},__source:{fileName:p,lineNumber:322,columnNumber:7}}))}),b(this,"renderDialogHeader",()=>{let e;switch(this.state.accountState){case"new":e=Object(o.a)("Create New Person");break;case"info":break;default:e=Object(o.a)("Edit Person")}return e?r.a.createElement("div",{className:"profile-section-header",__source:{fileName:p,lineNumber:347,columnNumber:14}},e):null}),b(this,"renderNameEdit",()=>{const e="new"===this.state.accountState?this.state.suggestedName:this.state.editedName;return(r.a.createElement("label",{className:"section",__source:{fileName:p,lineNumber:355,columnNumber:12}},r.a.createElement("input",{type:"text",key:"profilename",name:"name",placeholder:Object(o.a)("profiles","Name"),onChange:this.handleNameInput,value:e,onFocus:this.handleFocus,autoFocus:!0,__source:{fileName:p,lineNumber:356,columnNumber:9}})))}),b(this,"renderSaveCancel",()=>r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:p,lineNumber:369,columnNumber:12}},r.a.createElement("input",{type:"submit",className:"primary",value:"new"===this.state.accountState?Object(o.a)("Add Person"):Object(o.a)("Save"),__source:{fileName:p,lineNumber:370,columnNumber:7}}),r.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:p,lineNumber:374,columnNumber:7}}))),b(this,"renderProfileInfo",()=>{const e=[],t=this.props.allProfiles.filter(e=>e.path===this.state.selectedProfilePath);if(t&&t[0]){const a=this.getProfileImage(t[0]);e.push(r.a.createElement("div",{className:"profile-details",key:"apv_details",__source:{fileName:p,lineNumber:387,columnNumber:9}},r.a.createElement("div",{className:"profile-image",style:{backgroundImage:`url(${a})`},__source:{fileName:p,lineNumber:388,columnNumber:11}}),r.a.createElement("div",{className:"profile-name",__source:{fileName:p,lineNumber:391,columnNumber:11}},t[0].name)))}return this.state.profileStats.forEach((t,a)=>{e.push(r.a.createElement("div",{key:t.category,className:"profile-stat-row",key:"apv_profiles_"+a,__source:{fileName:p,lineNumber:399,columnNumber:9}},r.a.createElement("div",{className:"profile-category",__source:{fileName:p,lineNumber:402,columnNumber:11}},t.category),r.a.createElement("div",{className:"profile-count",__source:{fileName:p,lineNumber:405,columnNumber:11}},t.count)))}),this.state.canRemoveActive&&e.push(r.a.createElement("p",{className:"alert",key:"apv_alert",__source:{fileName:p,lineNumber:413,columnNumber:9}},Object(o.a)("You are about to remove the active person. All profile data will be deleted and cannot be restored. Do you still want to proceed?"))),e.push(r.a.createElement("input",{type:"button",key:"apv_button",className:"danger remove-person-button",onClick:t[0].active&&!this.state.canRemoveActive?this.confirmRemoval:this.removeProfile,value:Object(o.a)("Remove Person"),__source:{fileName:p,lineNumber:419,columnNumber:7}})),e}),b(this,"renderSelectableProfileImages",()=>{const e=[];e.push(r.a.createElement("button",{key:"custom-image",title:Object(o.a)("Select custom avatar image"),type:"button",className:"avatarbox avatarbox-custom",onClick:this.selectCustomProfileImage.bind(this),dangerouslySetInnerHTML:{__html:h.db},__source:{fileName:p,lineNumber:437,columnNumber:7}}));let t=this.state.profileImages.map(e=>{const t=c()({"avatarbox-image":!0,"avatarbox-selected":this.state.activeImageIndex===e.index});return(r.a.createElement("button",{key:e.index,title:e.name,type:"button",className:"avatarbox",onClick:this.selectActiveProfileImage.bind(this,e.index,e.image),__source:{fileName:p,lineNumber:452,columnNumber:9}},r.a.createElement("div",{className:t,style:{backgroundImage:`url(${e.image})`},__source:{fileName:p,lineNumber:459,columnNumber:11}})))});return t=e.concat(t),r.a.createElement("div",{className:"avatarlist",__source:{fileName:p,lineNumber:466,columnNumber:12}},t)}),b(this,"renderCreateProfileShortcut",()=>this.state.canCreateDesktopShortcut?r.a.createElement("label",{__source:{fileName:p,lineNumber:472,columnNumber:9}},r.a.createElement("input",{className:"dialog-checkbox",checked:this.state.createDesktopShortcut,onChange:this.changeDesktopShortcut,type:"checkbox",__source:{fileName:p,lineNumber:473,columnNumber:11}}),r.a.createElement("span",{__source:{fileName:p,lineNumber:477,columnNumber:11}},Object(o.a)("Create Desktop Shortcut"))):null),b(this,"renderAllProfiles",()=>{const e=[];return this.props.allProfiles.forEach(t=>{const a=this.getProfileImage(t);e.push(r.a.createElement("button",{className:"account-item-large",key:t.path,title:t.name,onClick:this.showProfileInfo.bind(this,t.path),tabIndex:this.props.prefValues[d.kKeyboardTabToAll],autoFocus:-1!==this.props.prefValues[d.kKeyboardTabToAll],__source:{fileName:p,lineNumber:489,columnNumber:9}},r.a.createElement("img",{src:a,__source:{fileName:p,lineNumber:497,columnNumber:11}}),r.a.createElement("span",{className:"profile-name",__source:{fileName:p,lineNumber:498,columnNumber:11}},t.name)))}),e}),b(this,"renderActiveProfileHeader",()=>{let e=this.props.accountInfo.pictureUrl;e&&this.props.isLoggedIn||(e=this.getProfileImage(this.props.activeProfile));const t=[];return t.push(r.a.createElement("div",{className:"account-item active-profile",key:"active",onClick:this.manageUser,__source:{fileName:p,lineNumber:512,columnNumber:19}},r.a.createElement("img",{src:e,__source:{fileName:p,lineNumber:514,columnNumber:7}}),r.a.createElement("div",{className:"profile-name",__source:{fileName:p,lineNumber:515,columnNumber:7}},this.getFormattedName_()),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.jc.medium},__source:{fileName:p,lineNumber:516,columnNumber:7}}))),this.props.isLoggedIn||t.push(r.a.createElement("input",{type:"button",key:"signin",onClick:this.onSignin,value:Object(o.a)("Sign in to Sync"),autoFocus:!0,__source:{fileName:p,lineNumber:521,columnNumber:9}})),t}),b(this,"renderInActiveProfiles",()=>{const e=this.props.allProfiles.filter(e=>!e.active),t=[];return e.forEach(e=>{const a=this.getProfileImage(e);t.push(r.a.createElement("button",{className:"account-item",key:e.path,title:e.name,onClick:this.openNamedProfile.bind(this,e.path),__source:{fileName:p,lineNumber:539,columnNumber:9}},r.a.createElement("img",{src:a,__source:{fileName:p,lineNumber:545,columnNumber:11}}),r.a.createElement("span",{className:"profile-name",__source:{fileName:p,lineNumber:546,columnNumber:11}},e.name)))}),t}),b(this,"renderGuestEntry",()=>{const e=this.state.hasGuestSession?Object(o.a)("Exit Guest Session"):Object(o.a)("Open Guest Window");return(r.a.createElement("button",{className:"account-item",key:"guest",onClick:this.toggleGuestProfile,title:e,dangerouslySetInnerHTML:{__html:h.Bc.medium+e},__source:{fileName:p,lineNumber:558,columnNumber:12}}))}),b(this,"renderManagePeople",()=>{const e=Object(o.a)("Manage People");return(r.a.createElement("button",{className:"account-item",key:"manage",onClick:this.managePeople,title:e,dangerouslySetInnerHTML:{__html:h.Bc.medium+e},__source:{fileName:p,lineNumber:570,columnNumber:12}}))}),b(this,"renderExitUser",()=>{const e=Object(o.a)("Exit $1",[this.props.activeProfile.name]);return(r.a.createElement("button",{className:"account-item",key:"exit",onClick:this.exitUser,title:e,dangerouslySetInnerHTML:{__html:h.Nd+e},__source:{fileName:p,lineNumber:583,columnNumber:12}}))}),this.state={hasGuestSession:!1,accountState:"none",editedName:e.activeProfile.name,suggestedName:"",activeImageIndex:e.activeProfile.imageIndex,activeImageUrl:this.getProfileImage(e.activeProfile),profileImages:[],profileStats:[],selectedProfilePath:"",hasDesktopShortcut:!1,createDesktopShortcut:!1,canCreateDesktopShortcut:!0,canRemoveActive:!1}}componentDidMount(){this.attachListeners(),this.onWindowUpdated(),this.getAllProfileImages(),m.a.runtimePrivate.getProfileDefaults(e=>{this.setState({suggestedName:e})}),m.a.runtimePrivate.hasDesktopShortcut((e,t)=>{this.setState({hasDesktopShortcut:e,createDesktopShortcut:e,canCreateDesktopShortcut:t})})}componentWillUnmount(){this.detachListeners()}render(){return"edit"===this.state.accountState||"new"===this.state.accountState?r.a.createElement("form",{className:"account-dialog",onSubmit:this.onSave,__source:{fileName:p,lineNumber:598,columnNumber:14}},this.renderNavigationBack(),this.renderDialogHeader(),this.renderNameEdit(),this.renderSelectableProfileImages(),this.renderCreateProfileShortcut(),this.renderSaveCancel()):"list"===this.state.accountState?r.a.createElement("div",{className:"account-dialog",__source:{fileName:p,lineNumber:609,columnNumber:14}},this.renderNavigationBack(),r.a.createElement("div",{className:"account-listing-large",__source:{fileName:p,lineNumber:611,columnNumber:9}},this.renderAllProfiles()),r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:p,lineNumber:614,columnNumber:9}},r.a.createElement("input",{type:"submit",className:"primary",onClick:this.createProfile,value:Object(o.a)("Add Person"),__source:{fileName:p,lineNumber:615,columnNumber:11}}))):"info"===this.state.accountState?r.a.createElement("div",{className:"account-dialog",__source:{fileName:p,lineNumber:624,columnNumber:14}},this.renderNavigationBack(),this.renderDialogHeader(),r.a.createElement("div",{className:"profile-stat",__source:{fileName:p,lineNumber:627,columnNumber:9}},this.renderProfileInfo())):this.props.activeProfile.guest?r.a.createElement("div",{className:"account-dialog",__source:{fileName:p,lineNumber:634,columnNumber:14}},this.renderInActiveProfiles(),this.renderGuestEntry()):r.a.createElement("div",{className:"account-dialog",__source:{fileName:p,lineNumber:640,columnNumber:12}},r.a.createElement("header",{__source:{fileName:p,lineNumber:641,columnNumber:7}},this.renderActiveProfileHeader()),r.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:p,lineNumber:644,columnNumber:7}},this.renderInActiveProfiles(),this.renderGuestEntry(),this.renderManagePeople(),this.renderExitUser()))}}var f=Object(n.a)(N,g),_=a(22),v=a(155),E="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountButton.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends r.a.PureComponent{constructor(...e){super(...e),C(this,"state",{popupVisible:!1,activeProfile:void 0,allProfiles:[],isLoggedIn:v.a.getState().hasToken,accountInfo:v.a.getState().accountInfo}),C(this,"profilesUpdated",()=>{m.a.runtimePrivate.getUserProfiles(e=>{const t=e.find(e=>!0===e.active);this.setState({allProfiles:e}),t&&this.setState({activeProfile:t})})}),C(this,"onVivaldiAccountChange",()=>{const e=v.a.getState();this.setState({isLoggedIn:e.hasToken&&e.isReady,accountInfo:e.accountInfo})}),C(this,"togglePopup",()=>{this.setState(e=>({popupVisible:!e.popupVisible}))}),C(this,"hidePopup",()=>{this.setState({popupVisible:!1})})}componentDidMount(){m.a.runtimePrivate.onProfilesUpdated.addListener(this.profilesUpdated),this.profilesUpdated(),this.vivaldiAccountStoreToken=v.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange()}componentWillUnmount(){m.a.runtimePrivate.onProfilesUpdated.removeListener(this.profilesUpdated)}render(){let e=this.state.accountInfo.username,t=this.state.accountInfo.pictureUrl;const a=this.state.activeProfile;return a?(a.guest?(a.image=t="/resources/contact-person.png",a.name=e=Object(o.a)("Guest User")):this.state.isLoggedIn||(e=a.name,t=a.customAvatar?a.customAvatar:a.image),t||(t="/resources/contact-person.png"),r.a.createElement(_.a,{imagePath:t,tooltip:e,onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,className:"button-circularimage button-cropimage profile-popup",popupClassName:"ToolbarButtonPopup-DefaultStyles",popupWidth:240,size:this.props.size,__source:{fileName:E,lineNumber:100,columnNumber:14}},r.a.createElement(f,{activeProfile:a,allProfiles:this.state.allProfiles,hidePopup:this.hidePopup,isLoggedIn:this.state.isLoggedIn,accountInfo:this.state.accountInfo,__source:{fileName:E,lineNumber:112,columnNumber:9}}))):null}}t.a=w},function(e,t,a){"use strict";var n=a(130),i=a(36),s=a(189),r=a(0),o=a.n(r),l=a(2),c=a(234),u=a(7),m=a(26),d=a(9),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentPopup.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends o.a.PureComponent{constructor(...e){super(...e),p(this,"handleClickOutside",e=>{this.props.onPopupClosed(e)}),p(this,"loadBlockedContent",()=>{const e=n.a.getActiveWebView();e&&e.allowBlockedInsecureContent(),s.a.resetPageHasBlockedContent(this.props.pageId)}),p(this,"allowCookiesContent",()=>{const e=new URL(this.props.url).origin;u.a.utilities.setContentSettings({type:"cookies",primaryPattern:e+"/*",secondaryPattern:"",value:"allow",incognito:!1}),s.a.resetPageHasBlockedContent(this.props.pageId)}),p(this,"openManageCookies",()=>{i.a.showSettings("privacy")})}render(){return o.a.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:h,lineNumber:103,columnNumber:7}},o.a.createElement("header",{className:"addressfield-popup-header blocked-content",__source:{fileName:h,lineNumber:104,columnNumber:9}},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:d.Gc.small},__source:{fileName:h,lineNumber:105,columnNumber:11}}),o.a.createElement("h1",{__source:{fileName:h,lineNumber:108,columnNumber:11}},Object(l.a)("Blocked Content"))),o.a.createElement("div",{className:"addressfield-popup-content blocked-content",__source:{fileName:h,lineNumber:111,columnNumber:9}},(()=>{let e=Object(m.Map)();this.props.blockedPageContent.map(t=>{let a=e.get(t);e=a?e.set(t,++a):e.set(t,1)});const t=[];for(const[a,n]of e)switch(a){case"ads":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:h,lineNumber:64,columnNumber:15}},Object(l.a)("Advertisements on this page are flagged as abusive and blocked.")));break;case"cookies":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:h,lineNumber:71,columnNumber:15}},Object(l.a)("$1 cookie is blocked","$1 cookies are blocked",[n]),o.a.createElement("div",{className:"clickable",onClick:this.allowCookiesContent,__source:{fileName:h,lineNumber:73,columnNumber:17}},Object(l.a)("Allow cookies for this site"))));break;case"mixed-script":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:h,lineNumber:81,columnNumber:15}},Object(l.a)("$1 unsafe resource is blocked","$1 unsafe resources are blocked",[n]),o.a.createElement("div",{className:"clickable",onClick:this.loadBlockedContent,__source:{fileName:h,lineNumber:87,columnNumber:17}},Object(l.a)("Load the unsafe resource","Load the unsafe resources",[n]))));break;default:console.warn("Unhandled blocked content $1",a)}return t})()),o.a.createElement("footer",{className:"dialog-footer",__source:{fileName:h,lineNumber:115,columnNumber:9}},this.props.blockedPageContent.contains("cookies")&&o.a.createElement("input",{type:"button",onClick:this.openManageCookies,value:Object(l.a)("Manage Cookies"),__source:{fileName:h,lineNumber:117,columnNumber:13}}),o.a.createElement("input",{type:"button",onClick:this.props.onPopupClosed,value:Object(l.a)("Close"),__source:{fileName:h,lineNumber:123,columnNumber:11}})))}}var g=Object(c.a)(b),N=a(22),f="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentNotificator.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends o.a.Component{constructor(...e){super(...e),_(this,"state",{popupVisible:!1}),_(this,"onTogglePopupOpen",e=>{e.preventDefault(),this.setState(e=>({popupVisible:!e.popupVisible}))}),_(this,"onClosePopup",()=>{this.setState({popupVisible:!1})})}render(){return o.a.createElement("div",{className:"button-toolbar",__source:{fileName:f,lineNumber:45,columnNumber:7}},o.a.createElement(N.a,{image:d.Gc.small,tooltip:Object(l.a)("Content has been blocked."),onClick:this.onTogglePopupOpen,popupPosition:this.props.position,className:"button-addressfield permission-popup is-blocking",hidePopup:this.onClosePopup,isPopupVisible:this.state.popupVisible,popupClassName:"addressfield-popup-container",popupWidth:240,__source:{fileName:f,lineNumber:46,columnNumber:9}},o.a.createElement(g,{pageId:this.props.pageId,url:this.props.url,onPopupClosed:this.onClosePopup,blockedPageContent:this.props.blockedPageContent,__source:{fileName:f,lineNumber:56,columnNumber:11}})))}}t.a=v},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(45),r=a.n(s),o=a(21),l=a(85),c=a(40),u=a.n(c),m=a(25),d=a(20),h=a.n(d),p=a(234),b=a(7),g=a(1);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=[g.kAddressBarPosition];class _ extends i.a.Component{constructor(...e){super(...e),N(this,"state",{width:25,height:25,hasLoadedOnce:!1}),N(this,"popupContainer",i.a.createRef()),N(this,"webviewelm",null),N(this,"attachListeners",()=>{var e,t,a,n;null===(e=this.webviewelm)||void 0===e||e.addEventListener("sizechanged",this.onSizeChanged),null===(t=this.webviewelm)||void 0===t||t.addEventListener("close",this.onClose),null===(a=this.webviewelm)||void 0===a||a.addEventListener("newwindow",this.onNewWindow),null===(n=this.webviewelm)||void 0===n||n.addEventListener("loadstop",this.onLoadStop),l.a.bind("esc",this.onCloseWithKeyboard)}),N(this,"focusPopup",()=>{var e,t,a;const n=this.popupContainer.current,i=null==n?void 0:null===(e=n.parentElement)||void 0===e?void 0:null===(t=e.parentElement)||void 0===t?void 0:null===(a=t.parentElement)||void 0===a?void 0:a.querySelector(".focus-popup-area");i&&i.focus()}),N(this,"detachListeners",()=>{var e,t,a,n;null===(e=this.webviewelm)||void 0===e||e.removeEventListener("sizechanged",this.onSizeChanged),null===(t=this.webviewelm)||void 0===t||t.removeEventListener("close",this.onClose),null===(a=this.webviewelm)||void 0===a||a.removeEventListener("newwindow",this.onNewWindow),null===(n=this.webviewelm)||void 0===n||n.removeEventListener("loadstop",this.onLoadStop),l.a.unbind("esc",this.onCloseWithKeyboard)}),N(this,"handleClickOutside",e=>{this.props.popupWantsToClose()}),N(this,"recreateWebView",()=>{var e;(this.detachListeners(),this.webviewelm)&&(null===(e=this.webviewelm.parentNode)||void 0===e||e.removeChild(this.webviewelm),this.webviewelm=null);b.a.zoom.getVivaldiUIZoom(e=>{var t;const a=this.popupContainer.current;if(!a)return;(null===(t=this.props.extensionAnchor)||void 0===t?void 0:t.current)&&this.props.extensionAnchor.current.appendChild(a);let n=800,i=600;e>=1&&(n=Math.round(800*e),i=Math.round(600*e));const s=document.createElement("webview"),{extensionId:r,popupPage:o}=this.props;var l;r&&o&&(s.setAttribute("autosize","on"),s.setAttribute("minwidth",String(25)),s.setAttribute("minheight",String(25)),s.setAttribute("maxwidth",String(n)),s.setAttribute("maxheight",String(i)),s.setAttribute("partition","persist:"+r),s.setAttribute("class","ignore-react-onclickoutside"),s.setAttribute("vivaldi_view_type","extension_popup"),s.setAttribute("src",o),null===(l=u.a.findDOMNode(a))||void 0===l||l.appendChild(s),this.webviewelm=s,this.attachListeners())})}),N(this,"onSizeChanged",e=>{this.setState({width:e.newWidth,height:e.newHeight})}),N(this,"onLoadStop",e=>{this.setState({hasLoadedOnce:!0}),setTimeout(e=>{this.webviewelm&&this.webviewelm.focus()},50)}),N(this,"onNewWindow",e=>{e.window.accept(this.context.vivaldiWindowId+";1")}),N(this,"onCloseWithKeyboard",()=>{this.setState({hasLoadedOnce:!1}),this.props.popupWantsToClose(),this.focusPopup()}),N(this,"onClose",()=>{this.setState({hasLoadedOnce:!1}),this.props.popupWantsToClose()})}componentWillUnmount(){this.detachListeners(),this.webviewelm=null}UNSAFE_componentWillReceiveProps(e){!0===this.props.popupVisible&&!1===e.popupVisible&&this.setState({hasLoadedOnce:!1})}UNSAFE_componentWillUpdate(e,t){!0===e.popupVisible?this.props.enableOnClickOutside():!1===e.popupVisible&&(this.props.disableOnClickOutside(),this.detachListeners())}render(){let e=0,t=0;if(this.props.popupRect){const a=this.props.popupRect;e="bottom"===this.props.prefValues[g.kAddressBarPosition]?a.top-parseInt(this.state.height,10)-10+6:a.bottom+10-6,t=a.left-this.state.width+a.width/2+17}const a=this.state.hasLoadedOnce&&this.props.popupVisible;return(i.a.createElement("div",{className:h()({"extension-popup":!0,"address-bar-visible":this.props.isAddressBarVisible,bottom:"bottom"===this.props.prefValues[g.kAddressBarPosition],top:"top"===this.props.prefValues[g.kAddressBarPosition]}),style:{height:this.state.height,width:this.state.width,position:"fixed",left:t,top:e,visibility:a?"visible":"hidden"},ref:this.popupContainer,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionPopup.jsx",lineNumber:211,columnNumber:12}}))}}N(_,"contextType",m.a);var v=Object(o.a)(Object(p.a)(_),f),E=a(154),C=a(36),w=a(31),O=a(14),y=a(22),S=a(35),T=a(17),k=a(2),A=a(10),I=a(78),D=a(4),M=a(117),P=a(9),x="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionToolbar.jsx";function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const R=[g.kAddressBarPosition,g.kAddressBarVisible],B=["mousedown","pointerdown","touchstart"],F="vivaldi/x-button-extension";class U extends n.PureComponent{constructor(...e){super(...e),j(this,"state",{extensions:[],popupId:null,popupPage:null,popupVisible:!1,popupRect:void 0,extensionPopup:!1,shouldToggleHiddenExtensionsOnly:!1,shouldExpandHiddenExtensions:!0,shouldRenderHiddenExtensionsOnToolbar:!1,shouldRenderAllExtensionsOnToolbar:!1,toggleArrowIcon:P.o.large,isToggleArrowPointingRight:!0}),j(this,"_extensionActionShortcuts",[]),j(this,"_removedIdToIndex",{}),j(this,"_shortcutCallbacks",[]),j(this,"_toolbarButtons",[]),j(this,"refWrapper",n.createRef()),j(this,"extensionActionPopupRef",n.createRef()),j(this,"extensionSubscriber",e=>{const t=this._toolbarButtons.find(t=>(null==t?void 0:t.props.mimeContent)===e),a=this.props.prefValues[g.kAddressBarVisible];this.state.popupId!==e&&this.setState({popupVisible:!1,popupPage:null,popupRect:void 0,popupId:null});const n=t&&a?t.getRect():(()=>{const e=document.getElementById("webview-container");if(!e)return;const{right:t,top:a,bottom:n}=e.getBoundingClientRect();return{top:n,left:t-25,bottom:a,width:0,height:0,right:0}})();this.onExtensionActionClicked(e,n)}),j(this,"getExtensionIndex",e=>this.state.extensions.findIndex(t=>t.id===e)),j(this,"onIconLoaded",({badgeIcon:e,id:t})=>{const a=this.getExtensionIndex(t);-1!==a&&this.setState(t=>{const n=t.extensions.slice();return n[a]&&(n[a].badgeIcon=e),{extensions:n}})}),j(this,"assignShortcut",(e,t,a)=>{t&&(this._extensionActionShortcuts[a]=t,this._shortcutCallbacks[a]=()=>{const t=this._toolbarButtons[a],n=null==t?void 0:t.getRect();var i;if(n&&0!==n.left)t&&this.onExtensionActionClicked(e,t.getRect());else if(null===(i=this.props.extensionAnchor)||void 0===i?void 0:i.current){const t=this.props.extensionAnchor.current.getBoundingClientRect(),a={top:0,bottom:t.top,left:t.right-34-20,right:t.right-20,width:34,height:34};this.onExtensionActionClicked(e,a)}},l.a.bind(t.toLowerCase(),this._shortcutCallbacks[a]))}),j(this,"removeShortcut",(e,t)=>{e&&(l.a.unbind(e.toLowerCase(),this._shortcutCallbacks[t]),this._extensionActionShortcuts[t]="",delete this._shortcutCallbacks[t])}),j(this,"updateShortcut",(e,t,a)=>{(t||this._extensionActionShortcuts[a])&&(t&&!this._extensionActionShortcuts[a]?this.assignShortcut(e,t,a):!t&&this._extensionActionShortcuts[a]?this.removeShortcut(t,a):t!==this._extensionActionShortcuts[a]&&(this.removeShortcut(t,a),this.assignShortcut(e,t,a)))}),j(this,"onActionChanged",(e,t)=>{if(t&&t===T.a.getId()){const t=this.getExtensionIndex(e.id);-1!==t&&this.setState(a=>{const n=a.extensions.slice();return n[t]=e,{extensions:n}},this.updateShortcut.bind(this,e.id,e.keyboardShortcut,t))}}),j(this,"onActionAdded",e=>{this.setState(t=>{const a=this._removedIdToIndex[e.id];delete this._removedIdToIndex[e.id];const n=t.extensions.slice();return"number"==typeof a&&a<t.extensions.length?n.splice(a,0,e):n.push(e),{extensions:n}},this.saveBrowserOrder)}),j(this,"onActionRemoved",e=>{const t=this.getExtensionIndex(e.id);-1!==t&&this.setState(a=>{this._removedIdToIndex[e.id]=t;const n=a.extensions.slice();return n.splice(t,1),{extensions:n}},this.saveBrowserOrder)}),j(this,"onCommandAdded",(e,t)=>{const a=this.getExtensionIndex(e);this.assignShortcut(e,t,a)}),j(this,"onCommandRemoved",(e,t)=>{const a=this.getExtensionIndex(e);this.removeShortcut(t,a)}),j(this,"onExtensionActionClicked",(e,t,a)=>{const n=this.getExtensionIndex(e),i=this.state.extensions[n];if(i&&!i.visible){let e;a&&a.target instanceof HTMLElement&&(e=a.target);const t="top"===this.props.prefValues[g.kAddressBarPosition]?"bottomLeft":"topRight";return void this.getContextMenu(i).then(a=>{Object(I.a)(this.context.vivaldiWindowId,a,void 0,t,e)()})}b.a.extensionActionUtils.executeExtensionAction(e,this.context.vivaldiWindowId,a=>{a&&(this.setState(n=>({popupVisible:!n.popupVisible,popupPage:a,popupRect:t,popupId:e})),this.state.popupVisible&&this.extensionActionPopupRef.current&&this.extensionActionPopupRef.current.recreateWebView())})}),j(this,"popupWantsToClose",()=>{this.setState({popupVisible:!1})}),j(this,"onDrop",(e,t,a)=>{if(!this._dragOverId)return;let n=this.getExtensionIndex(this._dragOverId);if(this._dragOverId=null,-1===n)return;const i=e.dataTransfer.getData(F);if(!i)return;const s=this.getExtensionIndex(i);if(-1===s||s===n)return;if("right"===t&&n++,s===n)return;const r=this.state.extensions[s],o=this.state.extensions.slice();o.splice(s,1),s<n&&n--,o.splice(n,0,r),this.setState(e=>({extensions:o}),this.saveBrowserOrder)}),j(this,"onDragStart",e=>{}),j(this,"onDragEnter",(e,t)=>{this._dragOverId=t}),j(this,"executeExtensionAction",(e,t)=>{this.state.popupVisible?this.setState({popupVisible:!1}):t.target instanceof HTMLElement&&(this.state.popupId!==e&&this.setState({popupVisible:!1,popupPage:null,popupRect:void 0,popupId:null}),this.onExtensionActionClicked(e,t.target.getBoundingClientRect(),t))}),j(this,"removeExtension",e=>{b.a.extensionActionUtils.removeExtension(e,this.context.vivaldiWindowId)}),j(this,"showOptionsPage",e=>{b.a.extensionActionUtils.showExtensionOptions(e,this.context.vivaldiWindowId)}),j(this,"toggleVisiblity",e=>{this.state.extensionPopup&&this.hideHiddenExtensionsPopup(),b.a.extensionActionUtils.toggleBrowserActionVisibility(e)}),j(this,"isExtensionAvailable",e=>!(T.a.isIncognito(this.context.vivaldiWindowId)&&!e.allowInIncognito)),j(this,"getHiddenExtensions",()=>this.state.extensions.filter(e=>e.actionIsHidden)),j(this,"hasHiddenExtensions",()=>this.state.extensions.some(e=>e.actionIsHidden)),j(this,"toggleHiddenExtensionsPopup",()=>{this.setState(e=>({extensionPopup:!e.extensionPopup}))}),j(this,"hideHiddenExtensionsPopup",()=>{this.setState({extensionPopup:!1})}),j(this,"onCustomMenuSelected",(e,t)=>{b.a.extensionActionUtils.executeMenuAction(e,this.context.vivaldiWindowId,t,e=>{A.a.runtime.lastError&&A.a.runtime.lastError.message&&console.warn("Error invoking menu item action: "+A.a.runtime.lastError.message)})}),j(this,"getContextMenu",e=>new Promise((t,a)=>{const n=e.homepage||"https://chrome.google.com/webstore/detail/"+e.id,i=this.props.showHiddenExtensionsButton;b.a.extensionActionUtils.getExtensionMenu(e.id,s=>{A.a.runtime.lastError&&a(A.a.runtime.lastError);const r=s.map(t=>{const a={handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked,...w.a.makeLabelPair(t.name)};return t.submenu&&(a.items=t.submenu.map(t=>({handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked,...w.a.makeLabelPair(t.name)}))),a}),o=[{handler:()=>O.a.openURL(n),...w.a.makeLabelPair(e.name||"")},...r.length>0?[w.a.separatorItem,...r,w.a.separatorItem]:[],{handler:this.showOptionsPage.bind(this,e.id),visible:void 0!==e.optionspage&&""!==e.optionspage,...Object(D.a)("Options")},{handler:this.removeExtension.bind(this,e.id),visible:"componentAction"!==e.extensionType,ellipsis:!0,...Object(D.a)("Remove Extension")},{handler:this.toggleVisiblity.bind(this,e.id),visible:i&&!this.props.showToggleButton&&e.actionIsHidden,...Object(D.a)("Show Button")},{handler:this.toggleVisiblity.bind(this,e.id),visible:i&&!this.props.showToggleButton&&!e.actionIsHidden,...Object(D.a)("Hide Button")},w.a.separatorItem,{handler:C.a.showExtensions,...Object(D.a)("Manage Extensions")}];return t(o)})})),j(this,"toggleSwitcherOnToolbar",e=>{e?this.setState(e=>({shouldRenderAllExtensionsOnToolbar:!e.shouldRenderAllExtensionsOnToolbar})):this.setState(e=>({shouldRenderHiddenExtensionsOnToolbar:!e.shouldRenderHiddenExtensionsOnToolbar}))}),j(this,"switchToggleButton",()=>{this.props.showAllExtensionsButton?this.toggleSwitcherOnToolbar(!0):this.toggleSwitcherOnToolbar(!1),this.state.isToggleArrowPointingRight&&this.setState({toggleArrowIcon:P.p.large}),this.state.isToggleArrowPointingRight||this.setState({toggleArrowIcon:P.o.large}),this.setState(e=>({isToggleArrowPointingRight:!e.isToggleArrowPointingRight}))}),j(this,"renderExtensionToggleButton",()=>{const e=this.state.toggleArrowIcon,t=this.props.showAllExtensionsButton;return(this.hasHiddenExtensions()||t)&&(this.props.showToggleButton||this.state.extensions.length>0)?n.createElement(y.a,{tooltip:Object(k.a)("Toggle extensions"),onClick:()=>{this.switchToggleButton()},image:e,hidePopup:this.hideHiddenExtensionsPopup,__source:{fileName:x,lineNumber:628,columnNumber:7}}):null}),j(this,"renderHiddenExtensionInPopup",()=>{const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,a=this.state.extensions.filter(a=>e?this.isExtensionAvailable:t?a.actionIsHidden&&this.isExtensionAvailable(a):void 0);return n.createElement(y.a,{image:P.n.large,tooltip:Object(k.a)("Show hidden extensions"),onClick:this.toggleHiddenExtensionsPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideHiddenExtensionsPopup,isPopupVisible:this.state.extensionPopup,popupWidth:Math.min(34*a.length,442),className:"extensionPopupIcons",popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",hasLightArrow:!0,size:this.props.size,__source:{fileName:x,lineNumber:650,columnNumber:7}},n.createElement("div",{ref:this.refWrapper,className:"toolbar toolbar-mainbar toolbar-wrap",tabIndex:"-1",__source:{fileName:x,lineNumber:664,columnNumber:9}},a.map((e,t)=>{const a=this.getExtensionIndex(e.id);return(n.createElement(y.a,{className:"ExtensionDropdownIcon extensionId",key:e.id,badgeText:e.badgeText,tooltip:e.name,tabIndex:0,imagePath:e.badgeIcon,ref:e=>{this._toolbarButtons[a]=e},onClick:this.executeExtensionAction.bind(this,e.id),menuPromise:this.getContextMenu.bind(this,e),dragImage:e.badgeIcon,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:F,mimeContent:e.id,onDrop:this.onDrop,__source:{fileName:x,lineNumber:671,columnNumber:22}}))})))})}componentDidMount(){b.a.extensionActionUtils.onAdded.addListener(this.onActionAdded),b.a.extensionActionUtils.onRemoved.addListener(this.onActionRemoved),b.a.extensionActionUtils.onUpdated.addListener(this.onActionChanged),b.a.extensionActionUtils.onCommandAdded.addListener(this.onCommandAdded),b.a.extensionActionUtils.onCommandRemoved.addListener(this.onCommandRemoved),b.a.extensionActionUtils.onIconLoaded.addListener(this.onIconLoaded),b.a.extensionActionUtils.getToolbarExtensions(e=>{const t=S.a.getSync("EXTENSION_BUTTON_ORDER_BROWSER");e.sort((e,a)=>t.indexOf(e.id)-t.indexOf(a.id)),this.setState({extensions:e})}),M.a.addChangeListener(this.extensionSubscriber)}componentDidUpdate(e,t){!t.extensionPopup&&this.state.extensionPopup&&this.refWrapper.current&&this.refWrapper.current.focus()}componentWillUnmount(){b.a.extensionActionUtils.onAdded.removeListener(this.onActionAdded),b.a.extensionActionUtils.onRemoved.removeListener(this.onActionRemoved),b.a.extensionActionUtils.onUpdated.removeListener(this.onActionChanged),b.a.extensionActionUtils.onIconLoaded.removeListener(this.onIconLoaded),b.a.extensionActionUtils.onCommandAdded.removeListener(this.onCommandAdded),b.a.extensionActionUtils.onCommandRemoved.removeListener(this.onCommandRemoved),M.a.removeChangeListener(this.extensionSubscriber)}saveBrowserOrder(){S.a.set({EXTENSION_BUTTON_ORDER_BROWSER:this.state.extensions.map(e=>e.id)})}render(){const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,a=this.state.shouldRenderAllExtensionsOnToolbar&&!this.props.renderInDropdown,i=this.state.shouldRenderHiddenExtensionsOnToolbar&&!this.props.renderInDropdown,s=this.state.extensions.filter(e=>!(T.a.isIncognito(this.context.vivaldiWindowId)&&!e.allowInIncognito));return 0===s.length?null:n.createElement("div",{className:h()("toolbar",{"toolbar-mainbar":!0,"toolbar-extensions":!0,"toolbar-large":!0}),__source:{fileName:x,lineNumber:713,columnNumber:7}},s.filter(n=>t&&i||t&&!n.actionIsHidden||e&&a).map((e,a)=>{const i=e.badgeIcon?e.badgeIcon:"data:image/svg+xml;utf8,"+P.eb,s={dragImage:i,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:F,mimeContent:e.id,onDrop:this.onDrop},o=this.getExtensionIndex(e.id);let l,c=r()(e.badgeBackgroundColor||this.props.vivaldiSettings.BROWSER_COLOR_FG);return c.alpha()<1&&(c=r()(this.props.vivaldiSettings.BROWSER_COLOR_FG)),l=e.badgeIcon?e.badgeText:e.name?e.name.charAt(0).toUpperCase():"",n.createElement(y.a,L({key:e.id,badgeColor:c,badgeText:l,onClick:this.executeExtensionAction.bind(this,e.id),menuPromise:this.getContextMenu.bind(this,e),tooltip:e.badgeTooltip||e.name||Object(k.a)("Extension"),popupClassName:"extensionIconPopupMenu ToolbarButtonPopup-DefaultStyles",size:this.props.size,className:h()(e.id,"ExtensionIcon","extensionId",{"ExtensionIcon--Hidden":t&&e.actionIsHidden}),menuOrigin:"bottomLeft",imagePath:i,ref:e=>{this._toolbarButtons[o]=e}},s,{__source:{fileName:x,lineNumber:754,columnNumber:20}}))}),s.length>0&&!this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.props.showHiddenExtensionsButton)&&this.renderExtensionToggleButton(),s.length>0&&this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.hasHiddenExtensions()&&this.props.showHiddenExtensionsButton)&&this.renderHiddenExtensionInPopup(),this.state.popupId&&n.createElement("div",{__source:{fileName:x,lineNumber:798,columnNumber:9}},n.createElement(v,{ref:this.extensionActionPopupRef,extensionAnchor:this.props.extensionAnchor,isAddressBarVisible:this.props.isAddressBarVisible,eventTypes:B,outsideClickIgnoreClass:"extensionId",popupVisible:this.state.popupVisible,popupPage:this.state.popupPage,popupRect:this.state.popupRect,extensionId:this.state.popupId,popupWantsToClose:this.popupWantsToClose,__source:{fileName:x,lineNumber:799,columnNumber:11}})))}}j(U,"contextType",m.a);t.a=Object(E.a)(Object(o.a)(U,R),["BROWSER_COLOR_FG"])},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(234),o="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerDialog.jsx";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends i.a.Component{constructor(...e){super(...e),l(this,"handleClickOutside",()=>{this.props.onDialogClosed()}),l(this,"onBlockedPopupUrlClicked",(e,t)=>{t.preventDefault(),this.props.onPopupAllowed(e)}),l(this,"renderItem",e=>i.a.createElement("a",{className:"popupblocker-blocked-page",onClick:this.onBlockedPopupUrlClicked.bind(this,e),key:e.targetUrl+e.timeStamp,title:e.targetUrl,href:e.targetUrl,__source:{fileName:o,lineNumber:29,columnNumber:7}},e.targetUrl)),l(this,"renderItems",e=>i.a.createElement("div",{className:"popupblocker-blocked-pages",__source:{fileName:o,lineNumber:41,columnNumber:7}},e.map(e=>this.renderItem(e)))),l(this,"onShouldBlockClicked",e=>{this.props.onShouldBlockClicked(e)}),l(this,"renderAlwaysBlockQuery",()=>i.a.createElement("section",{className:"dialog-footer",__source:{fileName:o,lineNumber:53,columnNumber:7}},i.a.createElement("label",{__source:{fileName:o,lineNumber:54,columnNumber:9}},i.a.createElement("input",{type:"radio",name:"blocked",value:"false",defaultChecked:!1!==this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!0),__source:{fileName:o,lineNumber:55,columnNumber:11}}),Object(s.a)("Block Popups")),i.a.createElement("label",{__source:{fileName:o,lineNumber:60,columnNumber:9}},i.a.createElement("input",{type:"radio",name:"blocked",value:"true",defaultChecked:!1===this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!1),__source:{fileName:o,lineNumber:61,columnNumber:11}}),Object(s.a)("Always Allow"))))}render(){return this.props.blockedPopups.size>0?i.a.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:o,lineNumber:73,columnNumber:9}},i.a.createElement("header",{className:"addressfield-popup-header",__source:{fileName:o,lineNumber:75,columnNumber:11}},this.props.image&&i.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:o,lineNumber:77,columnNumber:15}}),i.a.createElement("h1",{__source:{fileName:o,lineNumber:79,columnNumber:13}},Object(s.a)("Blocked Popup Pages"))),i.a.createElement("div",{className:"addressfield-popup-content",__source:{fileName:o,lineNumber:81,columnNumber:11}},this.renderItems(this.props.blockedPopups)),this.renderAlwaysBlockQuery()):null}}var u=Object(r.a)(c),m=a(22),d=a(10),h=a(20),p=a.n(h),b=a(7),g=a(9),N="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerNotificator.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends i.a.Component{constructor(...e){super(...e),f(this,"state",{isDialogOpen:!1,shouldBlockPopups:!0}),f(this,"onNotificatorClicked",()=>{this.setState(e=>({isDialogOpen:!e.isDialogOpen}))}),f(this,"onDialogClosed",()=>{this.setState({isDialogOpen:!1})}),f(this,"onShouldBlockClicked",e=>{const t={primary_pattern:this.props.url,secondary_pattern:this.props.url,type:"popups",setting:e?"block":"allow"};b.a.settings.setContentSetting(t),this.setState({shouldBlockPopups:e})})}componentDidMount(){this.props.url&&d.a.contentSettings.popups.get({primaryUrl:this.props.url},e=>{d.a.runtime.lastError&&d.a.runtime.lastError.message&&console.warn("ERROR getting content settings for popups. Original message:\n"+d.a.runtime.lastError.message)})}render(){var e={"button-addressfield":!0,"permission-popup":!0,"is-blocking":!0===this.state.shouldBlockPopups,"is-allowing":!1===this.state.shouldBlockPopups,"is-dialog-open":this.state.isDialogOpen};return(i.a.createElement("div",{className:"button-toolbar",__source:{fileName:N,lineNumber:84,columnNumber:7}},i.a.createElement(m.a,{tooltip:Object(s.a)("Blocked Popup Pages"),onClick:this.onNotificatorClicked,image:g.Mc.small,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:p()(e),popupClassName:"addressfield-popup-container",popupWidth:300,__source:{fileName:N,lineNumber:85,columnNumber:9}},i.a.createElement(u,{image:g.Mc.medium,shouldBlockPopups:this.state.shouldBlockPopups,onShouldBlockClicked:this.onShouldBlockClicked,blockedPopups:this.props.blockedPopups,onPopupAllowed:this.props.onPopupAllowed,onDialogClosed:this.onDialogClosed,__source:{fileName:N,lineNumber:95,columnNumber:11}}))))}}t.a=_},function(e,t,a){"use strict";var n=a(285),i=a(0),s=a.n(i),r=a(22),o=a(222),l=a(21),c=a(90),u=a(14),m=a(13),d=a(11),h=a(436),p=a(25),b=a(2),g=a(20),N=a.n(g),f=a(78),_=a(4),v=a(7),E=a(1),C=a(9),w="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\TranslatePopup.jsx";function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y=[E.kTranslateEnabled];class S extends s.a.Component{constructor(e,t){super(e),O(this,"shouldShowAlwaysTranslateShortcut",()=>{if(!this.state.sourceLang||this.state.settings.shouldShowNeverTranslateShortcut)return!1;const e=m.c.getPageById(this.props.tabId);return Boolean(e&&!e.incognito)}),O(this,"shouldShowNeverTranslateShortcut",()=>!(!this.state.sourceLang||this.state.settings.isLanguagePairOnAlwaysTranslateList)&&this.state.settings.shouldShowNeverTranslateShortcut),O(this,"isTranslationInProgress",()=>"translating"===this.props.translateStep),O(this,"onCancel",()=>{this.props.hidePopup()}),O(this,"onAskForLanguageSupport",()=>{!this.state.isLanguageSupported&&this.state.sourceLang&&this.ReportLanguageRequest(),this.onCancel()}),O(this,"onTranslate",()=>{const e=n.a.getTranslationCode(this.state.targetLang),t=this.state.sourceLang?n.a.getTranslationCode(this.state.sourceLang):"auto";console.log("Translate from '"+t+"' to '"+e+"'"),v.a.tabsPrivate.translatePage(this.props.tabId,t,e,e=>{}),this.setActionPerformed()}),O(this,"onRevert",()=>{v.a.tabsPrivate.revertTranslatePage(this.props.tabId,e=>{}),this.setActionPerformed()}),O(this,"onTargetLanguageSelected",e=>{const{value:t}=e.currentTarget;t!==this.state.targetLang&&this.setState({targetLang:t})}),O(this,"setAlwaysTranslate",e=>{v.a.prefs.setLanguagePairToAlwaysTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,t=>{t&&(this.updateLanguageTranslateSettings(),e&&!this.props.isTranslated&&this.onTranslate())}),this.setActionPerformed()}),O(this,"setNeverTranslate",e=>{v.a.prefs.setLanguageToNeverTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,e=>{e&&this.updateLanguageTranslateSettings()}),this.setActionPerformed()}),O(this,"setNeverTranslateSite",e=>{v.a.prefs.setSiteToNeverTranslate(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,t=>{t&&(this.updateLanguageTranslateSettings(),e&&this.props.isTranslated&&this.onRevert())}),this.setActionPerformed()}),O(this,"toggleOfferToTranslate",()=>{d.a.set(E.kTranslateEnabled,!this.props.prefValues[E.kTranslateEnabled]),this.setActionPerformed()}),O(this,"_onAlwaysTranslate",e=>{const t=e.target.checked;this.setAlwaysTranslate(t),this.setActionPerformed()}),O(this,"_onNeverTranslate",e=>{const t=e.target.checked;this.setNeverTranslate(t),this.setActionPerformed()}),O(this,"openTranslatePage",()=>{u.a.openURL("https://www.vivaldi.com/translate/")}),O(this,"isError",()=>this.props.error&&"no_error"!==this.props.error),O(this,"handleCloseClick",e=>{this.reportDialogClosing(!0),this.onCancel()}),O(this,"handleMenuClick",e=>{const t=[];t.push({...Object(_.a)("Always Translate $1",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang)]),type:"checkbox",handler:this.setAlwaysTranslate.bind(this,!this.state.settings.isLanguagePairOnAlwaysTranslateList),visible:!0,checked:this.state.settings.isLanguagePairOnAlwaysTranslateList}),t.push({...Object(_.a)("Never Translate $1",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang)]),type:"checkbox",handler:this.setNeverTranslate.bind(this,!this.state.settings.isLanguageInNeverTranslateList),visible:!0,checked:this.state.settings.isLanguageInNeverTranslateList}),t.push({...Object(_.a)("Never Translate This Site"),handler:this.setNeverTranslateSite.bind(this,!this.state.settings.isSiteOnNeverTranslateList),type:"checkbox",visible:!0,checked:this.state.settings.isSiteOnNeverTranslateList}),t.push({...Object(_.a)("Offer to Translate Pages"),type:"checkbox",handler:this.toggleOfferToTranslate.bind(this),visible:!0,checked:this.props.prefValues[E.kTranslateEnabled]}),Object(f.a)(this.context.vivaldiWindowId,t)(e),e.preventDefault(),e.stopPropagation()}),O(this,"renderDialogHeader",()=>s.a.createElement("div",{className:"TranslatePopup-Header",__source:{fileName:w,lineNumber:356,columnNumber:7}},s.a.createElement("h3",{__source:{fileName:w,lineNumber:357,columnNumber:9}},Object(b.a)("browser","Translate Page")),this.state.isLanguageSupported&&s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:N()({"TranslatePopup-Header-CloseButton":!0}),title:Object(b.a)("Close Dialog"),dangerouslySetInnerHTML:{__html:C.kb},onClick:this.handleCloseClick,__source:{fileName:w,lineNumber:360,columnNumber:11}})))),O(this,"renderContent",()=>{if(this.isTranslationInProgress())return null;if(!1===this.state.isLanguageSupported)return s.a.createElement("div",{className:"dialog-content",__source:{fileName:w,lineNumber:380,columnNumber:9}},Object(b.a)("Vivaldi Translate does not currently support $1 ($2).",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang),this.state.sourceLang]));if(this.state.languages&&this.state.languages.length>0&&!this.props.isTranslated){const e=this.state.languages.map(e=>e.id===this.state.targetLang?s.a.createElement("option",{key:e.id,value:e.id,defaultValue:!0,__source:{fileName:w,lineNumber:394,columnNumber:13}},e.name):e.id!==this.state.sourceLang?s.a.createElement("option",{key:e.id,value:e.id,__source:{fileName:w,lineNumber:401,columnNumber:13}},e.name):void 0);return(s.a.createElement("div",{className:"dialog-content",__source:{fileName:w,lineNumber:408,columnNumber:9}},s.a.createElement("label",{className:"TranslatePopup-SelectLabel",key:"select",__source:{fileName:w,lineNumber:409,columnNumber:11}},Object(b.a)("To:")),s.a.createElement("select",{onChange:this.onTargetLanguageSelected,disabled:!1,value:this.state.targetLang,__source:{fileName:w,lineNumber:412,columnNumber:11}},e)))}return null}),O(this,"renderButtons",()=>{const e=[];if(this.state.isLanguageSupported){const t=this.isTranslationInProgress();this.isError()?e.push(s.a.createElement(o.a,{type:"error",key:"error",__source:{fileName:w,lineNumber:430,columnNumber:11}},Object(b.a)("Error translating page."))):t&&e.push(s.a.createElement("label",{key:"progress",className:"TranslatePopup-Status",__source:{fileName:w,lineNumber:436,columnNumber:11}},Object(b.a)("Translating..."))),this.props.isTranslated&&!t?(e.push(s.a.createElement("label",{key:"status",className:"TranslatePopup-Status",__source:{fileName:w,lineNumber:443,columnNumber:11}},Object(b.a)("This page has been translated to $1 ($2).",[n.a.getHumanReadableLanguageFromCode(this.state.targetLang),this.state.targetLang]))),e.push(s.a.createElement("div",{className:"TranslatePopup-Buttons",key:"translate-buttons",__source:{fileName:w,lineNumber:450,columnNumber:11}},s.a.createElement("input",{type:"button",key:"translate-revert",className:"TranslatePopup-Buttons-Revert",onClick:this.onRevert,disabled:!1,autoFocus:!0,value:Object(b.a)("Revert to $1",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang)]),__source:{fileName:w,lineNumber:451,columnNumber:13}})))):t||(this.shouldShowAlwaysTranslateShortcut()&&e.push(s.a.createElement("label",{className:"TranslatePopup-Checkbox",key:"alwaysTranslate",__source:{fileName:w,lineNumber:465,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:this.state.settings.isLanguagePairOnAlwaysTranslateList,onChange:this._onAlwaysTranslate,__source:{fileName:w,lineNumber:466,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:w,lineNumber:470,columnNumber:15}},Object(b.a)("Always translate $1",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang)])))),this.shouldShowNeverTranslateShortcut()&&e.push(s.a.createElement("label",{className:"TranslatePopup-Checkbox",key:"neverTranslate",__source:{fileName:w,lineNumber:479,columnNumber:13}},s.a.createElement("input",{type:"checkbox",checked:this.state.settings.isLanguageInNeverTranslateList,onChange:this._onNeverTranslate,__source:{fileName:w,lineNumber:480,columnNumber:15}}),s.a.createElement("span",{__source:{fileName:w,lineNumber:484,columnNumber:15}},Object(b.a)("Never translate $1",[n.a.getHumanReadableLanguageFromCode(this.state.sourceLang)])))),e.push(s.a.createElement("div",{className:"TranslatePopup-Buttons",key:"translate-buttons",__source:{fileName:w,lineNumber:492,columnNumber:11}},s.a.createElement("input",{type:"button",key:"translate-button",className:"TranslatePopup-Buttons-Translate primary",onClick:this.onTranslate,disabled:!1,value:Object(b.a)("verb","Translate"),autoFocus:!0,__source:{fileName:w,lineNumber:493,columnNumber:13}}),s.a.createElement("button",{className:"TranslatePopup-Buttons-MenuButton",onClick:this.handleMenuClick,__source:{fileName:w,lineNumber:499,columnNumber:13}},s.a.createElement("span",{className:"TranslatePopup-Buttons-MenuButton-Span",key:"translate-menu",value:"options",dangerouslySetInnerHTML:{__html:C.vd.small},__source:{fileName:w,lineNumber:502,columnNumber:15}}),s.a.createElement("label",{className:"TranslatePopup-Buttons-MenuButton-Label",__source:{fileName:w,lineNumber:507,columnNumber:15}},Object(b.a)("Options"))))))}else 0;return e}),O(this,"renderFooter",()=>s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:w,lineNumber:530,columnNumber:7}},s.a.createElement("div",{className:"TranslatePopup-FooterText",__source:{fileName:w,lineNumber:531,columnNumber:9}},Object(b.a)("Powered by Lingvanex, hosted by Vivaldi."),s.a.createElement("a",{href:"",className:"TranslatePopup-ReadMoreLink",onClick:this.openTranslatePage,title:Object(b.a)("Read more about Vivaldi Translate"),__source:{fileName:w,lineNumber:533,columnNumber:11}},Object(b.a)("Learn More"))))),this.state={languages:[],sourceLang:n.a.getTranslationCode(this.props.pageLanguage),targetLang:n.a.getTranslationCode(this.props.targetLang),serverLanguages:h.a.getState().serverLanguages,settings:{isLanguagePairOnAlwaysTranslateList:!1,isLanguageInNeverTranslateList:!1,isSiteOnNeverTranslateList:!1,shouldShowNeverTranslateShortcut:!1,shouldShowAlwaysTranslateShortcut:!0},isLanguageSupported:!1};const a=n.a.getTranslationLocales().map(e=>({id:n.a.getTranslationCode(e.key),name:e.local}));this.state.languages=a,this.state.isLanguageSupported=this.state.serverLanguages.includes(this.state.sourceLang)}componentDidMount(){this.actionPerformed_=!1,this.updateLanguageTranslateSettings()}componentDidUpdate(e){e.translateStep!==this.props.translateStep&&"after_translate"===this.props.translateStep&&this.onCancel()}componentWillUnmount(){}reportDialogClosing(e){this.state.isLanguageSupported&&!this.props.isTranslated&&!1===this.actionPerformed_&&(v.a.prefs.setTranslationDeclined(this.props.tabId,e,this.state.sourceLang,this.state.targetLang,()=>{}),this.setActionPerformed())}setActionPerformed(){this.actionPerformed_=!0}updateLanguageTranslateSettings(){this.state.sourceLang&&this.state.targetLang&&v.a.prefs.getTranslateSettings(this.props.tabId,this.state.sourceLang,this.state.targetLang,e=>{this.setState({settings:e})})}async ReportLanguageRequest(){try{const e="https://mimir.vivaldi.com/request-support?lang="+this.state.sourceLang;!function(e){if(!(e.status>=200&&e.status<300))throw new Error(e.statusText)}(await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json"}}))}catch(e){console.log("Error contacting server: "+e)}}render(){return s.a.createElement(c.a,{dialogWidth:300,onRequestClose:this.onCancel,__source:{fileName:w,lineNumber:546,columnNumber:7}},s.a.createElement("div",{className:"TranslatePopup",__source:{fileName:w,lineNumber:547,columnNumber:9}},this.renderDialogHeader(),this.renderContent(),this.renderButtons(),this.renderFooter()))}}O(S,"contextType",p.a);var T=Object(l.a)(S,y),k=a(484),A="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\TranslateButton.jsx";function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D extends s.a.PureComponent{constructor(e){super(e),I(this,"getStateFromStore",()=>{const e=h.a.getPageState(this.props.tabId);if(e){return{pageLanguage:e.pageLanguage?e.pageLanguage:"",isTranslated:Boolean(e.isTranslated),error:e.error,translateStep:e.translateStep,autoTranslate:e.autoTranslate}}return{pageLanguage:"",isTranslated:!1,error:"no_error",translateStep:"idle",autoTranslate:!1}}),I(this,"_onTranslationStateStoreChanged",()=>{const e=this.getStateFromStore();"translating"!==e.translateStep&&"before_translate"!==e.translateStep||this.state.popupVisible||e.autoTranslate?"idle"===e.translateStep&&this.showPopup(!1):this.showPopup(!0),this.setState(e)}),I(this,"showPopup",e=>{this.setState(t=>({popupVisible:e}))}),I(this,"togglePopup",()=>{this.setState(e=>({popupVisible:!e.popupVisible}))});const t=this.getStateFromStore();let a=Object(k.a)();a=a.substring(0,2),this.state={popupVisible:!1,pageLanguage:t.pageLanguage,isTranslated:t.isTranslated,translateStep:t.translateStep,error:"no_error",targetLang:n.a.getTranslationCode(a),autoTranslate:!1}}componentDidMount(){this._translationStateStoreToken=h.a.addListener(this._onTranslationStateStoreChanged)}componentWillUnmount(){this._translationStateStoreToken.remove()}static getDerivedStateFromProps(e){const{tabId:t}=e,a=h.a.getPageState(t);if(a){const e=a.pageLanguage?a.pageLanguage:"",t=Boolean(a.isTranslated),n={pageLanguage:e,isTranslated:t,error:a.error,translateStep:a.translateStep,autoTranslate:a.autoTranslate};return t&&(n.targetLang=a.translatedLang,a.originalLang&&(n.pageLanguage=a.originalLang)),n}return null}render(){if(!this.state.pageLanguage||this.state.targetLang===this.state.pageLanguage)return null;const e=this.state.isTranslated;return(s.a.createElement(r.a,{isPressed:e,isOn:e,image:C.Vd,tooltip:e?Object(b.a)("Revert Page Translation"):Object(b.a)("title","Translate Page"),onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.showPopup.bind(this,!1),isPopupVisible:this.state.popupVisible,size:this.props.size,popupClassName:"ToolbarButtonPopup-DefaultStyles",__source:{fileName:A,lineNumber:154,columnNumber:12}},s.a.createElement(T,{hidePopup:this.showPopup.bind(this,!1),tabId:this.props.tabId,isTranslated:this.state.isTranslated,pageLanguage:this.state.pageLanguage,error:this.state.error,targetLang:this.state.targetLang,translateStep:this.state.translateStep,__source:{fileName:A,lineNumber:167,columnNumber:7}})))}}t.a=D},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(2),r=a(7),o=a(9),l="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBar.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends i.a.PureComponent{constructor(e){super(e),c(this,"onCloseClicked",()=>{r.a.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,"dismiss")}),c(this,"onActionClicked",(e,t)=>{t.stopPropagation(),t.preventDefault(),r.a.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,e)})}render(){return i.a.createElement("div",{className:"page-confirm-info-bar",__source:{fileName:l,lineNumber:35,columnNumber:7}},i.a.createElement("label",{__source:{fileName:l,lineNumber:36,columnNumber:9}},this.props.infoBar.messageText),i.a.createElement("div",{className:"infobar-controls",__source:{fileName:l,lineNumber:37,columnNumber:9}},this.props.infoBar.buttons.map(e=>i.a.createElement("input",{type:"button",value:e.text,key:e.action,title:Object(s.a)("Select action"),onClick:this.onActionClicked.bind(this,e.action),__source:{fileName:l,lineNumber:39,columnNumber:21}})),i.a.createElement("span",{className:"infobar-close",value:"close",title:Object(s.a)("Cancel infobar"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:o.kb},__source:{fileName:l,lineNumber:45,columnNumber:11}})))}}var m=u,d=a(26);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.a.PureComponent{constructor(e){super(e),h(this,"_onInfobarCreated",e=>{this.props.tabId===e.tabId&&this.setState(t=>({infoBars:t.infoBars.insert(0,e)}))}),h(this,"_onInfobarRemoved",(e,t)=>{this.props.tabId===e&&this.setState(e=>({infoBars:e.infoBars.filter(e=>{e.identifier})}))}),this.state={infoBars:Object(d.List)()}}componentDidMount(){r.a.infobars.onInfobarCreated.addListener(this._onInfobarCreated),r.a.infobars.onInfobarRemoved.addListener(this._onInfobarRemoved)}componentWillUnmount(){r.a.infobars.onInfobarRemoved.removeListener(this._onInfobarRemoved),r.a.infobars.onInfobarCreated.removeListener(this._onInfobarCreated)}render(){return i.a.createElement(i.a.Fragment,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBarCollection.jsx",lineNumber:57,columnNumber:7}},this.state.infoBars.map(e=>i.a.createElement(m,{key:e.identifier,infoBar:e,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBarCollection.jsx",lineNumber:59,columnNumber:11}})))}}t.a=p},function(e,t,a){"use strict";var n=a(323),i=a(242),s=a(21),r=a(29),o=a(57),l=a.n(o),c=a(227),u=a(12),m=a(58),d=a(3);const h={_indicators:{}},p=new class extends l.a{emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}getIndicators(e,t){return e&&t?h[e]&&h[e][t]?a(h[e][t]):{}:e?h[e]?a(h[e]):{}:a(h);function a(e){const t={...e._indicators},n=Object.keys(e).filter(e=>"_indicators"!==e).map(t=>e[t]);for(const e of n){const n=a(e);for(const e in n){const a=t[e],i=n[e];a?(a.current+=i.current,a.total+=i.total):t[e]=i}}return t}}reset(){const e=Object.keys(h).filter(e=>"_indicators"!==e);for(const t of e)delete h[t]}};var b=p;u.a.register(e=>{switch(e.actionType){case"MAIL_INDICATOR_ADD_ACCOUNT":{const{accountId:t,indicator:a,current:n,total:i}=e;_(t,"",a,n,i);break}case"MAIL_INDICATOR_ADD_PATH":{const{accountId:t,path:a,indicator:n,current:i,total:s}=e;_(t,a,n,i,s);break}case"MAIL_INDICATOR_REMOVE_ACCOUNT":{const{accountId:t,indicator:a}=e;v(t,"",a);break}case"MAIL_INDICATOR_REMOVE_PATH":{const{accountId:t,path:a,indicator:n}=e;v(t,a,n);break}case"MAIL_INDICATOR_REMOVE_ALL":!function(e){if(!e||!h[e])return;const t=Object.keys(h[e]).filter(e=>"_indicators"!==e);for(const a of t)Object.keys(h[e][a]._indicators).length>0&&(h[e][a]={_indicators:{}},f(e,a));p.emitChange()}(e.accountId)}});const g={All:d.pb,Flagged:d.pb,Inbox:d.pb,Other:d.pb,Junk:d.pb,Sent:d.sb,Trash:d.wb,Drafts:d.k},N={};for(const e in g){const t=g[e];N[t]?N[t].push(e):N[t]=[e]}function f(e,t){if(!e||!t)return;const a=c.a.getAll();if(!a||!a[e])return;const n=m.a.getFolderType(e,t),i=g[n],s=function(e=[]){const t={};for(const a of e)if(h[a.accountId]&&h[a.accountId][a.path]){const e=h[a.accountId][a.path]._indicators;for(const a of Object.keys(e)){const n={...e[a]};if(t[a]){const e=t[a];e.current+=n.current,e.total+=n.total}else t[a]=n}}return t}(function(e,t=[]){let a=[];for(const n of Object.keys(e)){const i=e[n].folders;for(const e of Object.keys(i))if(t.includes(e)){const t=i[e];a=a.concat(t.map(e=>({accountId:n,path:e.path})))}}return a}(a,N[i]));h[d.c]||(h[d.c]={_indicators:{}}),h[d.c][i]={_indicators:s}}function _(e,t,a,n,i){const s={current:n,total:i};e?(h[e]||(h[e]={_indicators:{}}),t?(h[e][t]||(h[e][t]={_indicators:{}}),h[e][t]._indicators[a]=s,f(e,t)):h[e]._indicators[a]=s):h._indicators[a]=s,p.emitChange()}function v(e,t,a){e?h[e]&&(t?h[e][t]&&(delete h[e][t]._indicators[a],f(e,t)):delete h[e]._indicators[a]):delete h._indicators[a],p.emitChange()}var E=a(36),C=a(0),w=a.n(C),O=a(2),y=a(20),S=a.n(y),T=a(838),k=a(206),A=a(280),I=a(126),D=a(9),M=a(1),P=a(171),x="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailPanelNode.jsx";function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j=[M.kMailCountersPanelDraftsEnabled,M.kMailCountersPanelTrashEnabled,M.kMailCountersPanelUnseenEnabled,M.kMailPanelActivityIndicatorsEnabled];class R extends w.a.Component{constructor(...e){super(...e),L(this,"_isMounted",!1),L(this,"state",{unread:0,unseen:0,total:0}),L(this,"onCountersChanged",e=>{"counters"===e.target&&this._updateCounters()}),L(this,"onConnectionChanged",()=>{this.props.isImap&&this.setStateIfNeeded({disconnected:i.a.isDisconnected(this.props.name),isConnecting:i.a.isConnecting(this.props.name)})}),L(this,"onIndicatorsChanged",()=>{let e;const t=b.getIndicators(this.props.accountId,this.props.path);for(const a in t)t[a]&&(e?(e.text=this.getIndicatorText(d.w),e.current+=t[a].current,e.total+=t[a].total):e={text:this.getIndicatorText(a),current:t[a].current,total:t[a].total});const a={};if(e){const{text:t,current:n,total:i}=e;a.indicator=i>0?`${t} ${Math.round(n/i*100)} %`:t}else a.indicator=!1;this.setStateIfNeeded(a)}),L(this,"_updateCounters",(e=this.props)=>{const{accountId:t,path:a}=e;if(this._isMounted){const e=r.a.getCounters(t,a);this.setStateIfNeeded({unread:e&&e.unread||0,unseen:e&&e.unseen||0,total:e&&e.total||0})}}),L(this,"setStateIfNeeded",e=>{Object.getOwnPropertyNames(e).some(t=>e[t]!==this.state[t])&&this.setState(e)}),L(this,"getIndicatorText",e=>{switch(e){case d.w:return Object(O.a)("Busy");case d.B:return Object(O.a)("Threading");case d.z:return Object(O.a)("Flushing");case d.x:return Object(O.a)("Connecting");case d.y:return Object(O.a)("Fetching");case d.A:return Object(O.a)("Prefetching");default:return""}}),L(this,"isDrafts",()=>this.props.path===d.k||this.props.type===d.l),L(this,"isOutbox",()=>this.props.path===d.gb||this.props.type===d.hb),L(this,"isTrash",()=>this.props.path===d.wb||this.props.type===d.xb),L(this,"isUnread",()=>this.props.path===d.yb),L(this,"isSent",()=>this.props.path===d.sb||this.props.type===d.tb),L(this,"isJunk",()=>this.props.path===d.C||this.props.type===d.D),L(this,"isFeeds",()=>this.props.accountId===d.n),L(this,"isLabels",()=>this.props.accountId===d.E),L(this,"isFilters",()=>this.props.accountId===d.M),L(this,"isFlags",()=>this.props.accountId===d.q),L(this,"isReceived",()=>this.props.path===d.pb||this.props.type===d.v),L(this,"isMailingList",()=>this.props.accountId===d.F&&A.a.isMailingListPath(this.props.path)),L(this,"getImageSet",()=>this.props.isAccount?D.g:this.isSent()?D.Zb:this.isJunk()?D.ac:this.isFeeds()?D.Rc:this.isUnread()?D.ec:this.isReceived()?D.Ub:this.isDrafts()?D.Jb:this.isFilters()?D.Ob:this.isLabels()?D.Db:this.isFlags()?D.nb:this.isMailingList()?D.Rb:void 0),L(this,"_onError",e=>{const t=i.a.getErrorMessage(this.props.name);t&&t.toLowerCase().indexOf("authentication")>=0?E.a.showMailAuthenticationDialog({account:e}):E.a.showSettings("mail")}),L(this,"_handleStatusIconClick",async()=>{if(this.state.disconnected&&!i.a.isConnecting(this.props.name)){const e=i.a.getErrorMessage(this.props.name)||"",t=await k.a.loadAccount(this.props.name);Object(P.a)({title:Object(O.a)("Error connecting to $1",[this.props.name]),body:e,onClick:this._onError.bind(this,t)})}})}componentDidMount(){this._isMounted=!0,this._updateCounters(),r.a.addChangeListener(this.onCountersChanged),i.a.addChangeListener(this.onConnectionChanged),b.addChangeListener(this.onIndicatorsChanged)}componentWillUnmount(){this._isMounted=!1,r.a.removeChangeListener(this.onCountersChanged),i.a.removeChangeListener(this.onConnectionChanged),b.removeChangeListener(this.onIndicatorsChanged)}render(){const e=this.props.prefValues[M.kMailPanelActivityIndicatorsEnabled]&&this.state.indicator&&!this.props.isExpanded,t=this.state.unread>0&&!(this.isDrafts()||this.isOutbox()||this.isTrash()),a=t&&this.state.unseen>0&&this.props.prefValues[M.kMailCountersPanelUnseenEnabled],i=this.state.total>0&&this.isOutbox(),s=this.state.total>0&&this.props.prefValues[M.kMailCountersPanelTrashEnabled]&&this.isTrash(),r=this.state.total>0&&this.props.prefValues[M.kMailCountersPanelDraftsEnabled]&&this.isDrafts();let o;if(this.props.accountId===d.M)o="";else{const{unseen:e,unread:t,total:a}=this.state;o=this.props.label+" "+Object(T.a)({unseen:e,unread:t,total:a})}let l=0,c=0;return l=16*this.props.level,c=this.props.hasChildren?0:this.props.level>1?l+16:l,w.a.createElement("label",{className:S()("mail_panel_node",{disabled:this.props.subscribable}),title:o,onClick:this.props.onClick,__source:{fileName:x,lineNumber:331,columnNumber:7}},this.props.hasChildren&&0!==this.props.level&&w.a.createElement("span",{className:"expand-icon",style:{marginLeft:l},onMouseDown:I.a,onMouseUp:()=>this.props.handleExpandClick(this.props.id),dangerouslySetInnerHTML:{__html:D.rb},__source:{fileName:x,lineNumber:339,columnNumber:11}}),w.a.createElement(n.a,{imageSet:this.getImageSet(),open:this.props.isExpanded,trash:this.isTrash(),disconnected:this.state.disconnected,isConnecting:this.state.isConnecting,leftMargin:c,onClickStatusIcon:this._handleStatusIconClick,__source:{fileName:x,lineNumber:346,columnNumber:9}}),void 0!==this.props.inlineEditText&&w.a.createElement("input",{ref:"input",type:"text",value:this.props.inlineEditText,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,autoFocus:!0,__source:{fileName:x,lineNumber:356,columnNumber:11}}),void 0===this.props.inlineEditText&&w.a.createElement(w.a.Fragment,{__source:{fileName:x,lineNumber:367,columnNumber:11}},w.a.createElement("span",{className:"title",__source:{fileName:x,lineNumber:368,columnNumber:13}},this.props.label),e&&w.a.createElement("span",{className:"item-count counter-indicator",__source:{fileName:x,lineNumber:371,columnNumber:15}},this.state.indicator),a&&w.a.createElement("span",{className:"item-count counter-unseen",__source:{fileName:x,lineNumber:377,columnNumber:15}},this.state.unseen),t&&w.a.createElement("span",{className:"item-count counter-unread",__source:{fileName:x,lineNumber:383,columnNumber:15}},this.state.unread),(i||s||r)&&w.a.createElement("span",{className:"item-count counter-total",__source:{fileName:x,lineNumber:389,columnNumber:15}},this.state.total)))}}t.a=Object(s.a)(R,j)},function(e,t,a){"use strict";var n=a(0),i=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends i.a.PureComponent{constructor(...e){super(...e),s(this,"state",{selectionStart:-1,selectionEnd:-1}),s(this,"inputField",i.a.createRef()),s(this,"focus",()=>{this.inputField.current&&this.inputField.current.focus()}),s(this,"select",()=>{this.inputField.current&&this.inputField.current.select()}),s(this,"blur",()=>{this.inputField.current&&this.inputField.current.blur()}),s(this,"onKeyPress",e=>{this.props.onKeyPress(e),this.props.typedValue+e.key===e.currentTarget.value&&this.props.onValueChange(e.currentTarget.value)}),s(this,"onChange",({currentTarget:e})=>{this.props.onValueChange(e.value||"")})}static getDerivedStateFromProps(e){const{typedValue:t,autocompleteValue:a}=e,{selectionStart:n,selectionEnd:i}=function(e,t){if(!e||!t)return{selectionStart:-1,selectionEnd:-1};if(!e.toLowerCase().startsWith(t.toLowerCase()))return{selectionStart:-1,selectionEnd:-1};const a=t.length,n=e.length;return a===n?{selectionStart:-1,selectionEnd:-1}:{selectionStart:a,selectionEnd:n}}(a,t);return{selectionStart:n,selectionEnd:i}}componentDidUpdate(e,t){const a=this.inputField.current;if(a){if(t.selectionStart!==this.state.selectionEnd){const e=this.state.selectionStart;if(-1===e)return;a.selectionStart!==e&&(a.selectionStart=e)}if(t.selectionEnd!==this.state.selectionEnd){const e=this.state.selectionEnd;if(-1===e)return;a.selectionEnd!==e&&(a.selectionEnd=e)}this.props.typedValue!==this.props.autocompleteValue&&(a.selectionDirection="backward")}}render(){return i.a.createElement("input",{ref:this.inputField,value:this.props.autocompleteValue,autoComplete:"off",spellCheck:"false",type:"text",autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onCompositionStart:this.props.onCompositionStart,onCompositionUpdate:this.props.onCompositionUpdate,onCompositionEnd:this.props.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onKeyDown:this.props.onKeyDown,onCut:this.props.onCut,onCopy:this.props.onCopy,onPaste:this.props.onPaste,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\InputElement.jsx",lineNumber:163,columnNumber:7}})}}var o=a(6),l=a(593),c=a(1);a.d(t,"a",(function(){return _}));function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,h(e,t,"set"),a),a}function d(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,h(e,t,"get"))}function h(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function p(e,t){if(!e)return t;if("OMNI_RESULT_BOOKMARK_TITLE_EXACT"===e.type){return t+(e.title?e.title.substr(t.length):"")}if("OMNI_RESULT_BOOKMARK_NICKNAME"===e.type)return t+e.nickname.substring(t.length);e.url||"about:blank"!==e.title||(e.url="about:blank");const{url:a}=e,n=a.includes("://")?a.indexOf("://")+3:0,i=a.startsWith(t)?0:a.substr(n).toLowerCase().indexOf(t.toLowerCase())+n;return(a.substr(0,i)+t+a.substr(i+t.length)).substr(i)}function b(e){return{typedValue:"",autocompleteValue:"",shouldAutocompleteValue:!0,autocompleteItem:void 0,url:e.url||"",hasFocus:!1,typedValueSetByInputEvent:!1}}var g=new WeakMap,N=new WeakMap,f=new WeakMap;class _ extends i.a.PureComponent{constructor(...e){super(...e),g.set(this,{writable:!0,value:!1}),N.set(this,{writable:!0,value:!1}),f.set(this,{writable:!0,value:""}),u(this,"refUrlInput",i.a.createRef()),u(this,"focus",()=>{var e;null===(e=this.refUrlInput.current)||void 0===e||e.focus()}),u(this,"blur",()=>{var e;null===(e=this.refUrlInput.current)||void 0===e||e.blur()}),u(this,"select",()=>{var e;null===(e=this.refUrlInput.current)||void 0===e||e.select()}),u(this,"state",b(this.props)),u(this,"_makeSubmit",e=>{const t={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey},{typedValue:a}=this.state,n=this.state.autocompleteItem?this.state.autocompleteItem.url:this.state.autocompleteValue;this.props.onSubmit({autocompletedValue:n,typedValue:a},t)}),u(this,"onKeyDown",e=>{if(this.props.onKeyDown(e),"Escape"===e.key&&this.setState({shouldAutocompleteValue:!1,typedValue:"",autocompleteValue:this.props.url},()=>{this.select()}),"Enter"===e.key&&(e.altKey||e.ctrlKey||e.metaKey))return this._makeSubmit(e),void this.setState({shouldAutocompleteValue:!1});"Backspace"===e.key&&d(this,N)&&m(this,g,!0)}),u(this,"onKeyPress",e=>{this.props.onKeyPress(e),"Enter"!==e.key&&13!==e.which||e.altKey||e.ctrlKey||this._makeSubmit(e)}),u(this,"onValueChange",e=>{const t=this.state.autocompleteValue;this.state.typedValue===e?this.setState({autocompleteValue:e,typedValue:e,autocompleteItem:void 0,shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}):this.setState(a=>({typedValue:e,typedValueSetByInputEvent:!0,shouldAutocompleteValue:!d(this,N)&&(e.length>=a.typedValue.length||t===d(this,f))})),this.props.onValueChange(e)}),u(this,"onSelect",e=>{const{selectionStart:t,selectionEnd:a,value:n}=e.currentTarget;t===a&&this.setState({typedValue:n}),this.props.onSelect(e),m(this,f,n.substring(t,a))}),u(this,"onFocus",e=>{this.setState({hasFocus:!0}),this.props.onFocus(e)}),u(this,"onBlur",e=>{this.setState({hasFocus:!1}),this.state.autocompleteValue&&this.state.typedValue&&this.state.typedValue!==this.state.autocompleteValue&&this.props.onValueChange(this.state.autocompleteValue),this.props.onBlur(e)}),u(this,"onCompositionStart",()=>{m(this,N,!0)}),u(this,"onCompositionUpdate",()=>{m(this,N,!0)}),u(this,"onCompositionEnd",e=>{const t=e.currentTarget.value;this.setState(e=>{const a=!d(this,g)&&t.length>=e.typedValue.length;return m(this,g,!1),{typedValue:t,shouldAutocompleteValue:a}}),m(this,N,!1)}),u(this,"onCut",e=>{this.setState({shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}),this.props.onCut(e)}),u(this,"onPaste",e=>{this.setState({shouldAutocompleteValue:!1,typedValueSetByInputEvent:!0}),this.props.onPaste(e)})}get isIMEOpen(){return d(this,N)}static getDerivedStateFromProps(e,t){if(e.url!==t.url)return{url:e.url,shouldAutocompleteValue:!1};if(!t.shouldAutocompleteValue||!e.value)return t.hasFocus&&!t.typedValueSetByInputEvent?{typedValueSetByInputEvent:!1}:{autocompleteItem:void 0,autocompleteValue:e.value,shouldAutocompleteValue:!1};const a={autocompleteOnTitle:e.autocompleteOnTitle},{autocompleteValue:n,autocompleteItem:i}=function(e,t,{autocompleteOnTitle:a}){if(0===e.length)return{autocompleteItem:void 0,autocompleteValue:t};const n=Object(l.c)(t,e,{preferBookmarks:o.a.get(c.kAddressBarAutocompletePreferBookmarks),autocompleteOnTitle:a});return n?{autocompleteItem:n,autocompleteValue:p(n,t)}:{autocompleteItem:void 0,autocompleteValue:t}}(e.autocompleteData,e.value,a);return{typedValue:e.value,autocompleteItem:i,autocompleteValue:n,typedValueSetByInputEvent:e.value===n&&t.hasFocus&&t.typedValueSetByInputEvent}}componentDidUpdate(e,t){t.autocompleteValue!==this.state.autocompleteValue&&this.props.onAutocompleteValueChange(this.state.autocompleteValue),this.props.stateResetKey!==e.stateResetKey&&this.setState(b(this.props))}render(){return i.a.createElement(r,{ref:this.refUrlInput,autocompleteValue:this.state.autocompleteValue,typedValue:this.state.typedValue,autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onBlur:this.onBlur,onFocus:this.onFocus,onSelect:this.onSelect,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:this.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onCut:this.onCut,onCopy:this.props.onCopy,onPaste:this.onPaste,onKeyDown:this.onKeyDown,onValueChange:this.onValueChange,onKeyPress:this.onKeyPress,__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\AutocompleteInput.jsx",lineNumber:394,columnNumber:7}})}}},function(e,t,a){"use strict";var n=a(28),i=a(395);var s=function(e,t){return 0===(t=t.replace(/^https?\:\/\/(www+\.)?/,"")).indexOf(e)},r=a(23),o=a(593);function l({nickname:e,children:t,url:a,title:n,description:r},o){const l=o.join(" ");let c=[];return o[0].startsWith("data:")||(c=o.map(e=>new RegExp(Object(i.a)(e),"i"))),function(e,t){return!(!t||!e)&&!!t.toLowerCase().startsWith(e.toLowerCase())}(l,e)?"OMNI_RESULT_BOOKMARK_NICKNAME":t||"string"!=typeof a?void 0:s(l,a)?"OMNI_RESULT_BOOKMARK_URL_HOST":n&&n.toLowerCase().startsWith(l.toLowerCase())?"OMNI_RESULT_BOOKMARK_TITLE_EXACT":a&&c.every(e=>a.match(e))?a.endsWith("/")?"OMNI_RESULT_BOOKMARK_PROMOTED":"OMNI_RESULT_BOOKMARK_URL":n&&c.every(e=>n.match(e))?"OMNI_RESULT_BOOKMARK_TITLE":r&&c.every(e=>r.match(e))?"OMNI_RESULT_BOOKMARK_DESCRIPTION":void 0}a.d(t,"a",(function(){return c}));class c{constructor(){var e,t,a;a=e=>{if(!e)return Promise.resolve([]);const t=e.startsWith("data:")?[]:e.replace(/\s+/g," ").split(" ");return 0===t.length?Promise.resolve([]):function(e){const t=[];for(const a of n.b.iterateTree()){const n=l(a,e);if(!n)continue;const{id:i,title:s,nickname:c,children:u}=a,m=Object(o.a)(n);if(u){const e=a.children.filter(e=>!e.children);t.push({id:i,title:s,type:n,nickname:c,score:m,urls:e})}else if(a.url){const e=r.p.getDisplayUrl(a.url);t.push({id:i,title:s,type:n,nickname:c,score:m,url:e})}}return Promise.resolve(t)}(t)},(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";var n=a(0),i=a(65),s=a(20),r=a.n(s),o=a(228),l=a(516),c="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\HostFragment.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.Component{constructor(...e){super(...e),u(this,"refComponent",n.createRef()),u(this,"componentWillUnmount",()=>{var e;this.props.onBaseDomainObscured(!1),null===(e=this._intersectionObserver)||void 0===e||e.disconnect()}),u(this,"onIntersectionChange",e=>{const t=e<1;this.props.onBaseDomainObscured(t)})}componentDidMount(){if(!this.refComponent.current)return;this._intersectionObserver=new IntersectionObserver(([e])=>{this.onIntersectionChange(e.intersectionRatio)},{threshold:1}),this._intersectionObserver.observe(this.refComponent.current)}render(){const{urlFragment:e,onGoToPath:t,tld:a,basedomain:i,subdomain:s,port:r,scheme:o}=this.props,l=(o?`${o}://`:"")+(e||"")+(r?`:${r}`:"");return i?n.createElement(p,{url:l,onGoToPath:t,__source:{fileName:c,lineNumber:81,columnNumber:12}},n.createElement("span",{ref:this.refComponent,__source:{fileName:c,lineNumber:82,columnNumber:7}},s&&n.createElement("span",{className:"UrlFragment--Lowlight UrlFragment-HostFragment-Subdomain",__source:{fileName:c,lineNumber:84,columnNumber:11}},s,"."),n.createElement("span",{className:"UrlFragment--Highlight UrlFragment-HostFragment-Basedomain",__source:{fileName:c,lineNumber:88,columnNumber:9}},i),a&&n.createElement("span",{className:"UrlFragment--Highlight UrlFragment-HostFragment-TLD",__source:{fileName:c,lineNumber:92,columnNumber:11}},".",a),r&&n.createElement("span",{className:"UrlFragment--Lowlight UrlFragment-HostFragment-Port",__source:{fileName:c,lineNumber:97,columnNumber:11}},":",r))):n.createElement(p,{url:l,onGoToPath:t,__source:{fileName:c,lineNumber:64,columnNumber:14}},n.createElement("span",{ref:this.refComponent,__source:{fileName:c,lineNumber:65,columnNumber:9}},n.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:c,lineNumber:66,columnNumber:11}},e),r&&n.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:c,lineNumber:74,columnNumber:20}},":",r)))}}var d=a(37);a.d(t,"a",(function(){return p}));var h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlFragments.jsx";function p({url:e,className:t,children:a,onGoToPath:s}){return n.createElement("span",{className:r()("UrlFragment-Link",t),onClick:()=>s(e),onMouseOver:()=>i.a.setStatus(e),onMouseOut:()=>i.a.clearStatus(),__source:{fileName:h,lineNumber:35,columnNumber:10}},a)}function b({urlFragment:e,onGoToPath:t,host:a,scheme:i,port:s}){return e?e.split("/").slice(1).map(e=>`/${e}`).map((e,r,o)=>{const l=(i?`${i}://`:"")+(a||"")+(s?`:${s}`:"")+o.slice(0,r+1).join("");return(n.createElement(p,{key:l,className:"UrlFragment--Lowlight",onGoToPath:t,url:l,__source:{fileName:h,lineNumber:73,columnNumber:15}},e))}):null}function g({urlFragment:e}){return n.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:h,lineNumber:86,columnNumber:10}},e)}function N({urlFragment:e}){return n.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:h,lineNumber:91,columnNumber:10}},e,"://")}function f({urlFragment:e}){return e?n.createElement(n.Fragment,null,n.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:h,lineNumber:107,columnNumber:5}},"data:"),n.createElement("span",{className:"UrlFragment--Lowlight",__source:{fileName:h,lineNumber:110,columnNumber:5}},e.substring("data:".length,d.j))):null}t.b=function({url:e,shouldShowFullUrl:t,onGoToPath:a,isClickable:i,shouldHighlightBaseDomain:s,onBaseDomainObscured:c,urlFragments:u}){if(!e)return null;const p=Object(o.a)(e);if(!p)return null;if(!["http","https","ftp","data"].includes(e.substring(0,e.indexOf(":"))))return n.createElement("div",{className:"UrlFragment-Wrapper",__source:{fileName:h,lineNumber:150,columnNumber:12}},n.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:h,lineNumber:151,columnNumber:7}},p.substring(0,d.j)));const{schema:_}=Object(l.b)(p);if("data:"===_)return n.createElement("div",{className:r()("UrlFragment-Wrapper",{"UrlFragment-Wrapper--ShouldHighlight":s}),__source:{fileName:h,lineNumber:160,columnNumber:12}},n.createElement(f,{urlFragment:e,__source:{fileName:h,lineNumber:165,columnNumber:7}}),";");if(function(e){var t,a,n,i,s,r,o,l,c;return((null===(t=e.scheme)||void 0===t?void 0:t.length)||0)+((null===(a=e.username)||void 0===a?void 0:a.length)||0)+((null===(n=e.password)||void 0===n?void 0:n.length)||0)+((null===(i=e.host)||void 0===i?void 0:i.length)||0)+((null===(s=e.path)||void 0===s?void 0:s.length)||0)+((null===(r=e.ref)||void 0===r?void 0:r.length)||0)+((null===(o=e.query)||void 0===o?void 0:o.length)||0)+((null===(l=e.port)||void 0===l?void 0:l.length)||0)+((null===(c=e.tld)||void 0===c?void 0:c.length)||0)>=d.j}(u))return n.createElement("div",{className:"UrlFragment-Wrapper",__source:{fileName:h,lineNumber:173,columnNumber:12}},n.createElement("span",{className:"UrlFragment--Highlight",__source:{fileName:h,lineNumber:174,columnNumber:7}},p.substring(0,d.j)));const{scheme:v,host:E}=u,C=function(e){return""+(null!==e.query?`?${e.query}`:"")+(null!==e.ref?`#${e.ref}`:"")}(u),w=u.path||!u.ref&&!u.query?u.path:"/",{subdomain:O,basedomain:y}=Object(o.g)(u.host,u.tld)||{subdomain:"",basedomain:""};return n.createElement("div",{className:r()("UrlFragment-Wrapper",{"UrlFragment-Wrapper--Clickable":i,"UrlFragment-Wrapper--ShouldHighlight":s}),__source:{fileName:h,lineNumber:195,columnNumber:5}},t&&v&&n.createElement(N,{urlFragment:v,__source:{fileName:h,lineNumber:201,columnNumber:40}}),n.createElement("span",{className:"UrlFragment-LinkWrapper",__source:{fileName:h,lineNumber:202,columnNumber:7}},n.createElement(m,{urlFragment:u.host,scheme:v||"",tld:u.tld,port:u.port,basedomain:y,subdomain:O,onGoToPath:a,onBaseDomainObscured:e=>c&&c(e),__source:{fileName:h,lineNumber:203,columnNumber:9}}),(t||!t&&"/"!==w)&&n.createElement(b,{urlFragment:w,onGoToPath:a,host:E,port:u.port,scheme:v||"",__source:{fileName:h,lineNumber:218,columnNumber:11}})),t&&C&&n.createElement(g,{urlFragment:C,__source:{fileName:h,lineNumber:228,columnNumber:41}}))}},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(627),o=a(32),l=a(42),c=a(15),u=a.n(c),m=a(20),d=a.n(m),h="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\MonthDayPicker.jsx";var p=function(e){const t=e.date.clone(),a=new Date,s=a.getFullYear(),r=a.getMonth(),o=a.getDate(),l=e.date.year(),c=e.date.month(),u=e.date.week(),m=e.date.date();t.startOf("month").subtract(1,"week").startOf("week");const p=[];for(;p.length<7;){const e=t.format("dd");p.push(n.createElement("div",{key:e,className:"MonthDayPicker-DayOfWeek",__source:{fileName:h,lineNumber:29,columnNumber:7}},e)),t.add(1,"day")}const b=e.date.clone().endOf("month");for(;t.isSameOrBefore(b)||0!==t.weekday();){const a=t.date()===o&&t.month()===r&&t.year()===s,b=t.date()===m&&t.month()===c&&t.year()===l,g=t.week()===u&&t.year()===l;p.push(n.createElement("div",{className:d()("MonthDayPicker-Day",{"MonthDayPicker-Day--Current":a,"MonthDayPicker-Day--Selected":b,"MonthDayPicker-Day--SelectedWeek":g&&!b&&!a,"MonthDayPicker-Day--OtherMonth":t.month()!==r}),key:t.format("M-D"),onClick:i.a.selectDate.bind(null,e.pageId,t.clone()),__source:{fileName:h,lineNumber:42,columnNumber:7}},t.date())),t.add(1,"day")}return(n.createElement("div",{className:"MonthDayPicker",__source:{fileName:h,lineNumber:60,columnNumber:5}},n.createElement("header",{className:"MonthDayPicker-Header",__source:{fileName:h,lineNumber:61,columnNumber:7}},n.createElement("h2",{className:"MonthDayPicker-Month",__source:{fileName:h,lineNumber:62,columnNumber:9}},e.date.format("MMMM"))),p))},b=a(109),g=a(112),N=a.n(g),f=a(126),_=a(819),v=a(217),E=a(230),C=a(38),w=a(375),O=a(1),y=a(554),S="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarDaysGrid.jsx";function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const k=Object(w.extendMoment)(u.a),A=[O.kCalendarClickOutside,O.kCalendarDisplayWeekNumber],I=N()(2)((function(e,t,a){const n=l.a.getDisplayRange(t,a),i=[],s=n.start.clone(),r="week"===a?2:7;for(;s<n.end;){const t=l.a.filterEventsByPeriod(e,s,"day",r).map(e=>e.start<s.valueOf()?{...e,id:`${e.id}-${s.dayOfYear()}`}:e);i.push(Object(y.a)(t,s,r)),s.add(r,"day")}return{grids:i,displayRange:n}}));function D(e,t){const a=null==e?void 0:e.querySelectorAll(".calendar-drop-target");if(a){const e=!t.initialTime,s=t.currentX||1e5,r=t.currentY||1e5,o=[...a].find(e=>{const t=e.getBoundingClientRect();return t.bottom>r&&t.right>s});var n;if(o&&e)t.initialTime=parseInt(o.dataset.date),t.initialStartRow=parseInt(o.style.gridRowStart),t.initialEndRow=t.initialStartRow+parseInt(null===(n=o.style.gridRowEnd.match(/\d/))||void 0===n?void 0:n[0]),t.initialLeftCol=parseInt(o.style.gridColumnStart),t.initialRightCol=t.initialLeftCol+1;if(o){const e=t.initialLeftCol,a=t.initialStartRow,n=parseInt(o.style.gridColumnStart),s=parseInt(o.style.gridRowStart);let r,l,c,u,m=!0;var i;if(a<s)r=e,l=parseInt(o.style.gridColumnStart)+1,c=a,u=parseInt(o.style.gridRowStart)+parseInt(null===(i=o.style.gridRowEnd.match(/\d/))||void 0===i?void 0:i[0]);else a>s?(r=n,l=t.initialRightCol,c=s,u=t.initialEndRow,m=!1):(c=a,u=t.initialEndRow,e<=n?(r=e,l=parseInt(o.style.gridColumnStart)+1):(r=parseInt(o.style.gridColumnStart),l=t.initialRightCol,m=!1));let d,h;return m?(d=t.initialTime,h=parseInt(o.dataset.date)):(d=parseInt(o.dataset.date),h=t.initialTime),{startCol:r,endCol:l,startRow:c,endRow:u,startTime:d,endTime:h,isAllDay:!0}}}}function M(e){const t=Object(v.a)(A);if(!e.overlay)return null;const{startRow:a,endRow:i,startCol:s,endCol:r,startTime:o,endTime:l}=e.overlay,c="week"===e.displayMode?1:2,u=t[O.kCalendarDisplayWeekNumber]&&"week"!==e.displayMode?2:1,m="week"===e.displayMode?2:7;return e.grids.reduce(([e,t],c)=>{const h=c.rows+2,p=t===a,b=t+h===i,g=d()("calendar-drag-overlay",{left:p,right:b});if(p){const i={gridRowStart:a,gridRowEnd:t+h,gridColumnStart:s,gridColumnEnd:b?r:u+m};e.push(n.createElement("div",{key:t,className:g,style:i,__source:{fileName:S,lineNumber:225,columnNumber:9}},n.createElement("div",{className:"start-time",__source:{fileName:S,lineNumber:226,columnNumber:11}},p&&n.createElement(n.Fragment,null,k(o).format("L"))),n.createElement("div",{className:"end-time",__source:{fileName:S,lineNumber:229,columnNumber:11}},b&&n.createElement(n.Fragment,null,k(l).format("L")))))}else if(t>a&&t<i){const a={gridRowStart:t,gridRowEnd:t+h,gridColumnStart:u,gridColumnEnd:b?r:u+m};e.push(n.createElement("div",{key:t,className:g,style:a,__source:{fileName:S,lineNumber:241,columnNumber:9}},n.createElement("div",{className:"start-time",__source:{fileName:S,lineNumber:242,columnNumber:11}},p&&n.createElement("span",{__source:{fileName:S,lineNumber:243,columnNumber:25}},k(o).format("L"))),n.createElement("div",{className:"end-time",__source:{fileName:S,lineNumber:245,columnNumber:11}},b&&n.createElement("span",{__source:{fileName:S,lineNumber:246,columnNumber:23}},k(l).format("L")))))}return[e,t+h]},[[],c])}function P(e){const t=e.showWeekNumber?2:1,a=k().startOf("week");return[...Array(7).keys()].map(e=>{const i=n.createElement(n.Fragment,{key:e,__source:{fileName:S,lineNumber:260,columnNumber:7}},n.createElement("header",{style:{gridColumnStart:e+t},className:"calendar-header-date",__source:{fileName:S,lineNumber:261,columnNumber:9}},a.format("dddd")));return a.add(1,"days"),i})}function x(e){const[t,a]=n.useState(""),s=Object(v.a)(A),r=e.displayRange.start.valueOf(),l=s[O.kCalendarDisplayWeekNumber]&&"week"!==e.displayMode,c=[...n.useMemo(()=>{const c=e=>{e.dataTransfer.types.some(e=>e===E.b)&&(e.preventDefault(),e.stopPropagation())},u=k(r),m=l?2:1,h=e.filter.anchorDate.month(),p=(new Date).getMonth(),b=(new Date).getDate(),g="week"===e.displayMode?2:7;let N="week"===e.displayMode?2:3;return e.grids.flatMap((r,f)=>{const _=[];return l&&_.push(n.createElement(n.Fragment,{key:f,__source:{fileName:S,lineNumber:375,columnNumber:11}},n.createElement("div",{className:"week-number",style:{gridRowStart:N-1,gridRowEnd:`span ${r.rows+2}`},__source:{fileName:S,lineNumber:376,columnNumber:13}},n.createElement("span",{className:"week-number-value",__source:{fileName:S,lineNumber:383,columnNumber:15}},u.week())))),[...Array(g).keys()].forEach(l=>{if("week"===e.displayMode&&3===f&&1===l)return;const g=`${f}-${l}`,v=u.valueOf(),w=u.month()===h,y=Number(u.format("E"))>5,T="week"!==e.displayMode&&(0===f&&0===l||1===u.date()),A=u.date()===b&&u.month()===p,I=t=>((t,a)=>{"click"===t.type&&t.stopPropagation();const n=a+(new Date).getHours()*C.f;if(i.a.selectDate(e.editor.pageId,k(n),!0),o.a.getEditState().eventDraft){switch(s[O.kCalendarClickOutside]){case"cancel":i.a.cancelEventEdit(e.editor);break;case"save_and_close":i.a.saveEventEdit(e.editor);break;case"save_and_new":"contextmenu"===t.type?(i.a.saveEventEdit(e.editor),i.a.selectDate(e.editor.pageId,k(n),!0)):i.a.editEvent(e.editor,null,{start:n})}}else"contextmenu"===t.type?i.a.selectDate(e.editor.pageId,k(n),!0):i.a.editEvent(e.editor,null,{start:n})})(t,v);_.push(n.createElement(n.Fragment,{key:g,__source:{fileName:S,lineNumber:405,columnNumber:11}},n.createElement("div",{className:d()("calendar-drop-target",{current:A,"dragged-over":g===t,"out-of-view":"month"===e.displayMode&&!w,weekend:y}),"data-date":v,style:{gridRowStart:N-1,gridRowEnd:`span ${r.rows+2}`,gridColumnStart:l+m},onDragEnter:e=>((e,t)=>{e.dataTransfer.types.some(e=>e===E.b)&&(e.preventDefault(),e.stopPropagation(),a(t))})(e,g),onDragOver:c,onDragLeave:e=>((e,t)=>{e.dataTransfer.types.some(e=>e===E.b)&&(e.preventDefault(),e.stopPropagation(),a(e=>e===t?"":t))})(e,g),onDrop:t=>((t,n)=>{const s=t.dataTransfer;if(s.types.some(e=>e===E.b)){t.preventDefault(),t.stopPropagation();const r=JSON.parse(s.getData(E.b)).id.split("-")[0];e.events.find(e=>e.id===r)&&(i.a.moveEvent(e.editor,r,{start:n,byDateOnly:!0}),a(""))}})(t,v),onClick:I,onContextMenu:I,__source:{fileName:S,lineNumber:406,columnNumber:13}},A?n.createElement("span",{className:A?"current-day":"",__source:{fileName:S,lineNumber:428,columnNumber:19}},u.format("D")):n.createElement("span",{className:"day",__source:{fileName:S,lineNumber:431,columnNumber:19}},u.format("D")),"week"===e.displayMode&&n.createElement("span",{__source:{fileName:S,lineNumber:434,columnNumber:17}},u.format("ddd")),T&&n.createElement("span",{className:"month",__source:{fileName:S,lineNumber:437,columnNumber:17}},u.format("MMM"))))),u.add(1,"day")}),N+=r.rows+2,_})},[t,r,e.displayMode,e.filter.anchorDate,e.grids,s,e.editor,e.events,l])];if(!e.editingEvent){const t="week"===e.displayMode?2:7,a=e.filter.selectedDate.valueOf()-r,i=Math.floor(a/(t*C.c)),s=e.grids.slice(0,i+1).reduce((e,t)=>e+t.rows+2,0)+("week"===e.displayMode?0:1),o=Math.floor(a/C.c)%t+(l?2:1),u=!e.selectedEvent&&!e.editingEvent;c.push(n.createElement("div",{key:"add-event-button",className:d()("calendar-add-event-button","selected","bottom",{active:u}),style:{gridRowStart:s,gridRowEnd:"span 1",gridColumnStart:o},ref:e=>{e&&requestAnimationFrame(()=>{e.scrollIntoView({block:"nearest",inline:"nearest"})})},__source:{fileName:S,lineNumber:466,columnNumber:7}},"+"))}if("week"===e.displayMode){const t=7+e.grids[0].rows+e.grids[1].rows+e.grids[2].rows;c.push(n.createElement("div",{className:"calendar-day-picker",key:"pickerCell",style:{gridRowStart:t,gridRowEnd:`span ${e.grids[3].rows+2}`,gridColumnStart:2},__source:{fileName:S,lineNumber:494,columnNumber:7}},n.createElement(p,{date:e.filter.selectedDate,pageId:e.editor.pageId,__source:{fileName:S,lineNumber:503,columnNumber:9}})))}return c}function L(e){const t=Object(v.a)(A),{displayMode:a,editingEvent:i,grids:s,filter:o,selectedEvent:c}=e,u=Boolean(e.filter.filterText),m=n.useMemo(()=>({displayStyle:"transparent",editingEvent:e.editingEvent,editor:e.editor,eventKeyDown:e.eventKeyDown,isActiveEditor:e.isActiveEditor,isDragging:e.isDragging,isFiltering:u,selectedEvent:e.selectedEvent,setIsDragging:e.setIsDragging}),[e.editor,e.editingEvent,e.eventKeyDown,e.selectedEvent,e.isActiveEditor,e.isDragging,u,e.setIsDragging]);let h=[],p="week"===a?2:3;const b=t[O.kCalendarDisplayWeekNumber]&&"week"!==a?1:0;return s.forEach(e=>{h=h.concat(e.items.map(e=>n.createElement(r.a,T({key:l.a.generateKey(e.event),event:e.event,position:{gridRowStart:e.startRow+p,gridColumnStart:e.startCol+b+1,gridColumnEnd:e.endCol+b+1}},m,{__source:{fileName:S,lineNumber:554,columnNumber:9}})))),h=h.concat(e.multiEventItems.map(t=>{const a=i&&t.events.some(e=>e.id===i.id),s=new Date(t.date),u=s.getDate()===o.selectedDate.date()&&s.getMonth()===o.selectedDate.month(),h=u&&!c&&!i,g=s.toDateString();return n.createElement("div",{key:`${g}-${p}`,className:d()("event-container",{selected:a}),style:{gridRowStart:t.startRow+p,gridRowEnd:e.rows+p,gridColumnStart:t.startCol+b+1,gridColumnEnd:t.endCol+b+1},__source:{fileName:S,lineNumber:576,columnNumber:9}},t.events.map(e=>n.createElement(r.a,T({key:l.a.generateKey(e),event:e},m,{__source:{fileName:S,lineNumber:589,columnNumber:13}}))),u&&n.createElement("div",{className:d()("calendar-add-event-button top",{active:h,selected:u}),id:g,__source:{fileName:S,lineNumber:596,columnNumber:13}}))})),p+=e.rows+2}),h}t.a=function(e){const t=Object(v.a)(A),a=n.useContext(s.a),r=n.useRef(null),[o,c]=n.useState([]),[u,m]=n.useState(k.range()),[h,p]=n.useState(!1),g=n.useMemo(()=>({pageId:a.editor.pageId,uid:e.editorUid}),[a.editor.pageId,e.editorUid]),{gridFrozen:N,handlers:E,overlay:C}=Object(_.a)(r.current,D,g),w=n.useRef({initialFocusTaken:!1,wasEditing:!!e.editingEvent&&a.editor.uid===g.uid,selectedEventCache:new Map,lastSelectedEvent:null,navigationPending:!1,updateCreateOverlay:()=>{}}),{events:y,filter:j,displayMode:R}=e;n.useMemo(()=>{const e=I(y,j.anchorDate,R);c(e.grids),m(e.displayRange)},[R,y,j.anchorDate]),n.useEffect(()=>{w.current.wasEditing=!!e.editingEvent&&a.editor.uid===g.uid});const B=(t,a,n)=>{w.current.navigationPending=!1;const s=e.filter.selectedDate,r=t||w.current.lastSelectedEvent,o=r?document.getElementById(r.id):document.getElementById(s.toDate().toDateString()),l=s.clone();if("Left"===n?l.subtract(1,"day"):l.add(1,"day"),!o)return w.current.selectedEventCache.clear(),void i.a.selectDate(g.pageId,l,!0);const c=a.map(e=>{const t=document.getElementById(e.id);return{event:e,element:t,bounds:t?t.getBoundingClientRect():{top:0,bottom:0}}}).filter(e=>Boolean(e.element)),u=o.getBoundingClientRect(),m=c.filter(e=>e.bounds.bottom>u.top&&e.bounds.top<u.bottom).sort((e,t)=>{const a=(u.top+u.bottom)/2,n=(e.bounds.top+e.bounds.bottom)/2,i=(t.bounds.top+t.bounds.bottom)/2;return Math.abs(n-a)-Math.abs(i-a)});if(m.length){const e=m[0];F(e.event,l)}else i.a.selectDate(g.pageId,l,!0)},F=(e,t)=>{if(e){const t=k(e.start).format("YYYY-MM-DD");w.current.selectedEventCache.set(t,e),w.current.lastSelectedEvent=e}else w.current.selectedEventCache=new Map,w.current.lastSelectedEvent=null;i.a.selectEvent(g,{event:e,date:t,allDay:!0})};let U={};if(N)U=N;else{const t="week"===e.displayMode?"":"max-content ";U.gridTemplateRows=o.reduce((e,t)=>`${e} 1.9em ${"max-content ".repeat(Math.max(t.rows-1,0))} ${t.rows?"min-content ":""} minmax(20px, 1fr) `,t)}const H=t[O.kCalendarDisplayWeekNumber]&&"week"!==R;return(n.createElement("div",T({className:d()("calendar-grid calendar-grid-days",`calendar-grid-${e.displayMode}`,{"is-dragging":h,"show-weeknumber":H}),onKeyDown:t=>{const a=o.reduce((e,t)=>e=(e=e.concat(t.items.map(e=>e.event))).concat(t.multiEventItems.reduce((e,t)=>e.concat(t.events),[])),[]),n=t.altKey;if(!e.editingEvent){const s="week"===e.displayMode?2:7,r=a.find(t=>t.id===e.selectedEvent),o=e.filter.selectedDate,c=o.weekday();let u,m,d,h,p;switch(b.a[t.keyCode]){case"Left":if(w.current.navigationPending||c%s==0)break;if(m=o.clone().subtract(1,"day"),d=m.format("YYYY-MM-DD"),h=w.current.selectedEventCache.get(d),h){F(h,m);break}r||w.current.lastSelectedEvent?(u=l.a.filterEventsByPeriod(a,m,"day"),requestAnimationFrame(B.bind(this,r,u,"Left")),w.current.navigationPending=!0):i.a.selectDate(g.pageId,m,!0);break;case"Right":if(w.current.navigationPending||c%s==s-1||6===c)break;if(m=o.clone().add(1,"day"),d=m.format("YYYY-MM-DD"),h=w.current.selectedEventCache.get(d),h){F(h,m);break}r||w.current.lastSelectedEvent?(u=l.a.filterEventsByPeriod(a,m,"day"),requestAnimationFrame(B.bind(this,r,u,"Right")),w.current.navigationPending=!0):i.a.selectDate(g.pageId,m,!0);break;case"Up":if(w.current.selectedEventCache=new Map,w.current.lastSelectedEvent=null,u=l.a.filterEventsByPeriod(a,o,"day"),p=u.findIndex(t=>t.id===e.selectedEvent),-1===p&&u.length&&!n)F(u[u.length-1],o);else if(0===p||!u.length||n){let t=s;"week"===e.displayMode&&c<2&&(t=0===c?1:3),i.a.selectDate(g.pageId,o.clone().subtract(t,"day"),!0)}else F(u[p-1],o);break;case"Down":w.current.selectedEventCache=new Map,w.current.lastSelectedEvent=null,u=l.a.filterEventsByPeriod(a,o,"day"),p=u.findIndex(t=>t.id===e.selectedEvent);let b=s;if("week"===e.displayMode&&c>=5&&(b=5===c?3:1),n){const e=o.clone().add(b,"day");i.a.selectDate(g.pageId,e,!0)}else if(-1===p){const e=o.clone().add(b,"day");u=l.a.filterEventsByPeriod(a,e,"day"),u.length?F(u[0],e):i.a.selectDate(g.pageId,e,!0)}else p===u.length-1?F(null):F(u[p+1],o);break;case"Enter":if(Object(f.a)(t),e.selectedEvent){const t=a.find(t=>t.id===e.selectedEvent);i.a.editEvent(g,t)}else{const e=o.clone().hours((new Date).getHours()).valueOf();i.a.editEvent(g,null,{start:e})}break;case"Escape":Object(f.a)(t),e.selectedEvent&&F(null)}}},draggable:!0},E,{style:U,tabIndex:"0",ref:t=>{t&&(!e.editingEvent&&w.current.wasEditing||!w.current.initialFocusTaken)&&(t.focus(),w.current.initialFocusTaken=!0),r.current=t},__source:{fileName:S,lineNumber:870,columnNumber:5}}),"week"!==e.displayMode&&n.createElement(P,{showWeekNumber:H,__source:{fileName:S,lineNumber:893,columnNumber:9}}),n.createElement(x,{displayRange:u,displayMode:R,editingEvent:e.editingEvent,editor:g,events:y,filter:j,grids:o,selectedEvent:e.selectedEvent,__source:{fileName:S,lineNumber:898,columnNumber:7}}),n.createElement(L,{grids:o,displayMode:R,editor:g,editingEvent:e.editingEvent,selectedEvent:e.selectedEvent,filter:j,eventKeyDown:e.eventKeyDown,isActiveEditor:a.editor.uid===g.uid,isDragging:h,setIsDragging:p,__source:{fileName:S,lineNumber:909,columnNumber:7}}),n.createElement(M,{overlay:C,displayMode:R,grids:o,__source:{fileName:S,lineNumber:922,columnNumber:7}})))}},function(e,t,a){"use strict";var n=a(0),i=a(24),s=a(186),r=a(627),o=a(32),l=a(42),c=a(103),u=a(20),m=a.n(u),d=a(109),h=a(112),p=a.n(h),b=a(15),g=a.n(b),N=a(819),f=a(217),_=a(230),v=a(38),E=a(1),C=a(554);function w(e){return"time"in e}function O(e,t,a,n){let i,s,r;const o=a||t;let l;const c=n[8];switch(e){case"Left":l=o.isAllDay?o:t,i=e=>e.navigation.right<o.navigation.right&&e.navigation.top<l.navigation.bottom&&e.navigation.bottom>l.navigation.top,s=(e,t)=>t.navigation.right-e.navigation.right,r=(e,t)=>e.navigation.top-t.navigation.top;break;case"Right":l=o.isAllDay?o:t,i=e=>e.navigation.right>o.navigation.right&&e.navigation.left>=o.navigation.left&&e.navigation.top<l.navigation.bottom&&e.navigation.bottom>l.navigation.top,s=(e,t)=>e.navigation.left-t.navigation.left,r=(e,t)=>e.navigation.top-t.navigation.top;break;case"Up":{const e=c.display.bottom-c.display.top-1;l=o.isAllDay?t:o,i=e=>e.navigation.bottom<=o.navigation.top&&e.navigation.left<l.navigation.right&&e.navigation.right>l.navigation.left,s=(t,a)=>{const n=w(t)||t.isAllDay?t.navigation.bottom:t.navigation.bottom+e;return(w(a)||a.isAllDay?a.navigation.bottom:a.navigation.bottom+e)-n},r=(e,t)=>e.navigation.left-t.navigation.left;break}case"Down":{const e=c.display.bottom-c.display.top-1;l=o.isAllDay?t:o,i=e=>e.navigation.top>=o.navigation.bottom&&e.navigation.left<l.navigation.right&&e.navigation.right>l.navigation.left,s=(t,a)=>(!w(t)||t.isAllDay?t.navigation.top-e:t.navigation.top)-(!w(a)||a.isAllDay?a.navigation.top-e:a.navigation.top),r=(e,t)=>e.navigation.left-t.navigation.left;break}default:return}const u=n.filter(i).sort((e,t)=>{const a=s(e,t);return 0!==a?a:w(e)!==w(t)?w(e)?1:-1:r(e,t)});return u.length?u[0]:null}var y=a(748),S=a(509),T=a(481),k="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarHoursGrid.jsx";function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const I=[E.kCalendarCollapseHours,E.kCalendarClickOutside,E.kCalendarDayEnds,E.kCalendarDayStarts,E.kCalendarOnlyHourlyKeynav,E.kCalendarTimeIncrements],D={day:{row:1,column:2},week:{row:2,column:2},year:{row:1,column:2}},M={adjacent:[],stacking:0,stackSize:0,canExpand:!1,startRow:0,endRow:1,startCol:0,endCol:1};function P(e,t,a){const n=g()();if(e.isSame(n,t)){const e=Object(C.c)(n.valueOf())+D[t].row,i=Math.round(n.minutes()%15/15*100);let s=0,r=a[0]+1;if("week"===t){const e=n.weekday();s=Object(y.a)(a.slice(0,e))+e,r=a[e]+1}return{row:e,percentage:i,column:s,columnSpan:r}}}function x(e,t,a,n){const i=n?Object(y.a)(n.slice(0,a.startCol)):a.startCol,s=n?Object(y.a)(n.slice(0,a.endCol)):a.endCol;return{left:t+i,top:e+a.startRow,right:t+s,bottom:e+a.endRow}}const L=p()(2)((function(e,t,a,n,i,s){const[r,o]=Object(S.a)(e,l.a.isAllDayEvent);r.sort((e,t)=>{if(e.start!==t.start)return e.start-t.start;const a=(e.task?e.due:e.end)||0,n=(t.task?t.due:t.end)||0;return a!==n?a-n:(parseInt(e.id)||1/0)-(parseInt(t.id)||1/0)});const[c,u,m]=function(e,t,a,n){const i=[];if("day"===n)i.push(Object(C.b)(e,a));else if("week"===n){const t=a.clone().startOf("week");[...Array(7).keys()].forEach(a=>{const n=l.a.filterEventsByPeriod(e,t,"day");i.push(Object(C.b)(n,t)),t.add(1,"days")})}let s;s="day"===n?{maxStackSize:1,rows:t.length,items:[],multiEventItems:t.length?[{...M,date:a.valueOf(),events:t}]:[]}:Object(C.a)(t,a.clone().startOf("week"),7);const r=i.map(e=>e.columns);return[i,s,r]}(o,r,t,a),{timeCells:d,eventCells:h}=function(e,t,a,n,i,s,r,o){function l(e){return 60*e.hour()+e.minute()}const c=g()(e).startOf(t),u=i.map(e=>e+1),m=n?n.rows+1:1;let d,h,p=[],b=D[t].row,N=[];b=D[t].row,d=D[t].column,n&&(N=N.concat(n.items.map(e=>{const t=x(b,d,e,u);return{display:t,navigation:t,isAllDay:!0,event:e.event}})),N=N.concat(n.multiEventItems.map(e=>{const t=x(b,d,e,u);return{display:t,navigation:t,isAllDay:!0,events:e.events}}))),b+=m,d=D[t].column,N=N.concat(a.flatMap(e=>{const t=e.items.map(e=>({display:{...x(b,d,e)},navigation:{...x(b,d,e)},isAllDay:!1,event:e.event}));return d+=e.columns+1,t})),b=D[t].row,d=D[t].column,h=c.clone(),p=p.concat(u.map(e=>{const t=h.valueOf();h.add(1,"day");const a=h.valueOf(),n=d,i=b,s=d+e,r=b+m,o=N.filter(e=>e.navigation.left<s&&e.navigation.right>n&&e.navigation.top<r&&e.navigation.bottom>i).reduce((e,t)=>Math.max(e,t.navigation.bottom),i);return d+=e,{display:{left:n,top:i,right:s,bottom:r},navigation:{left:n,top:o,right:s,bottom:r},isAllDay:!0,time:{start:t,end:a}}})),b+=m,d=D[t].column,h=c.clone();const f=Math.max(60*s-o,0),_=60*r;return h.add(f,"minute"),p=p.concat(u.flatMap((e,t)=>{const a=[];for(;h.diff(c,"day")===t;){const t=d,n=l(h)===f?b:b+l(h)/15,i=d+e,s=h.valueOf();h.add(o,"minute");const r=l(h),c=r>_||0===r?b+96:b+l(h)/15,u=h.valueOf(),m=N.filter(e=>e.navigation.left<i&&e.navigation.right>t&&e.navigation.top<c&&e.navigation.bottom>n).reduce((e,t)=>Math.max(e,t.navigation.right),t),p={display:{left:t,top:n,right:i,bottom:c},navigation:{left:m,top:n,right:i,bottom:c},isAllDay:!1,time:{start:s,end:u}};l(h)>_&&(h.add(1,"day").startOf("day"),p.time.end=h.valueOf(),h.add(f,"minute")),a.push(p)}return d+=e,a})),{timeCells:p,eventCells:N}}(t,a,c,u,m,n,i,s);return{grids:c,gridColumns:m,allDayGrid:u,timeCells:d,eventCells:h}}));function j(e,t,a){const n=null==e?void 0:e.querySelectorAll(".quarter"),i=null==e?void 0:e.querySelectorAll(".calendar-background-day");if(n&&i){let e=!1;const s=[...n].find((t,n)=>{const i=t.getBoundingClientRect(),s=i.bottom>a;return s&&0===n&&a<i.top&&(e=!0),s}),r=[...i].find(e=>e.getBoundingClientRect().right>t);if(s&&r)return{currentRow:s,currentCol:r,isAllDayRow:e}}return{}}function R(e,t,a){const n=t.currentX||1e5,i=t.currentY||1e5;let{currentRow:s,currentCol:r,isAllDayRow:o}=j(e,n,i);if(s&&r){const e=!t.initialTime,n=e?o:(null==a?void 0:a.isAllDay)||!1;if(e&&(t.initialTime=parseInt(r.dataset.date)+parseInt(s.dataset.starttime),t.initialEndTime=parseInt(r.dataset.date)+parseInt(s.dataset.endtime),t.initialStartRow=parseInt(s.style.gridRowStart),t.initialEndRow=parseInt(s.style.gridRowEnd),t.initialLeftCol=parseInt(r.style.gridColumnStart),t.initialRightCol=parseInt(r.style.gridColumnEnd)),n&&(s=r),s&&r){const e=t.initialLeftCol,a=t.initialStartRow,i=parseInt(r.style.gridColumnStart),o=parseInt(s.style.gridRowStart);let l,c,u,m,d,h,p=!0;return e<i?(l=e,c=parseInt(r.style.gridColumnEnd),n?(u=parseInt(s.style.gridRowStart),m=a):(u=a,m=parseInt(s.style.gridRowEnd))):e>i?(l=parseInt(r.style.gridColumnStart),c=t.initialRightCol,u=parseInt(s.style.gridRowStart),m=t.initialEndRow,p=!1):(l=e,c=t.initialRightCol,a<=o?(u=a,m=parseInt(s.style.gridRowEnd)):(u=parseInt(s.style.gridRowStart),m=t.initialEndRow,p=!1)),p?(d=t.initialTime,h=n?parseInt(r.dataset.date):parseInt(r.dataset.date)+parseInt(s.dataset.endtime)):(d=n?parseInt(r.dataset.date):parseInt(r.dataset.date)+parseInt(s.dataset.starttime),h=t.initialEndTime),{startCol:l,endCol:c,startRow:u,endRow:m,isAllDay:n,startTime:d,endTime:h}}}}function B(e){if(!e.overlay)return null;const{startRow:t,endRow:a,startCol:i,endCol:s,startTime:r,endTime:o}=e.overlay;if(e.overlay.isAllDay){const e={gridRowStart:t,gridRowEnd:a,gridColumnStart:i,gridColumnEnd:s};return n.createElement("div",{className:"calendar-drag-overlay start end",style:e,__source:{fileName:k,lineNumber:517,columnNumber:7}},n.createElement("div",{className:"start-time",__source:{fileName:k,lineNumber:518,columnNumber:9}},g()(r).format("L")),n.createElement("div",{className:"end-time",__source:{fileName:k,lineNumber:521,columnNumber:9}},g()(o).format("L")))}{const[l]=e.columnSizes.reduce(([l,c],u)=>{const d=u+1,h=c===i,p=c+d===s,b=m()("calendar-drag-overlay",{start:h,end:p});if(h){const s=i,m=c+u,d={gridRowStart:t,gridRowEnd:p?a:e.rowOffset+96,gridColumnStart:s,gridColumnEnd:m};l.push(n.createElement("div",{key:c,className:b,style:d,__source:{fileName:k,lineNumber:542,columnNumber:11}},n.createElement("div",{className:"start-time",__source:{fileName:k,lineNumber:543,columnNumber:13}},h&&n.createElement(n.Fragment,null,g()(r).format("LT"))),n.createElement("div",{className:"end-time",__source:{fileName:k,lineNumber:546,columnNumber:13}},p&&n.createElement(n.Fragment,null,g()(o).format("LT")))))}else if(c>i&&c<s){const t=c,i=c+u,s={gridRowStart:e.rowOffset,gridRowEnd:p?a:e.rowOffset+96,gridColumnStart:t,gridColumnEnd:i};l.push(n.createElement("div",{key:c,className:b,style:s,__source:{fileName:k,lineNumber:558,columnNumber:11}},n.createElement("div",{className:"start-time",__source:{fileName:k,lineNumber:559,columnNumber:13}},h&&n.createElement("span",{__source:{fileName:k,lineNumber:560,columnNumber:27}},g()(r).format("LT"))),n.createElement("div",{className:"end-time",__source:{fileName:k,lineNumber:562,columnNumber:13}},p&&n.createElement("span",{__source:{fileName:k,lineNumber:563,columnNumber:25}},g()(o).format("LT")))))}return[l,c+d]},[[],e.colOffset]);return l}}function F(e){const t=Object(f.a)([E.kCalendarCollapseHours,E.kCalendarDayEnds,E.kCalendarDayStarts,E.kCalendarTimeIncrements,E.kCalendarOnlyHourlyDivider]),{anchorDate:a,displayMode:i,allDayGrid:s}=e;return n.useMemo((function(){const e=t[E.kCalendarCollapseHours],r=e?t[E.kCalendarDayStarts]:0,o=e&&t[E.kCalendarDayEnds]||24,l=a.clone().startOf("day").hour(r),c=parseInt(t[E.kCalendarTimeIncrements]);let u=D[i].row;s&&(u+=s.rows+1);const m=Object(T.a)(r,o);let d=[];return d=15===c?[{rowOffset:0,span:1,startOffset:0,endOffset:9e5},{rowOffset:1,span:1,startOffset:9e5,endOffset:18e5},{rowOffset:2,span:1,startOffset:18e5,endOffset:27e5},{rowOffset:3,span:1,startOffset:27e5,endOffset:36e5}]:30===c?[{rowOffset:0,span:2,startOffset:0,endOffset:18e5},{rowOffset:2,span:2,startOffset:18e5,endOffset:36e5}]:[{rowOffset:0,span:4,startOffset:0,endOffset:36e5}],n.createElement(n.Fragment,null,n.createElement("div",{className:"hour-track",style:{gridRowEnd:96+u},__source:{fileName:k,lineNumber:618,columnNumber:9}}),r>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:"hour",style:{gridRowStart:u},__source:{fileName:k,lineNumber:620,columnNumber:11}},n.createElement("div",{className:"hour-value",__source:{fileName:k,lineNumber:621,columnNumber:13}},"0:00")),n.createElement("div",{className:"quarter collapsed morning","data-starttime":r*v.f-c*v.g,"data-endtime":r*v.f,style:{gridRowStart:u,gridRowEnd:u+4*r},__source:{fileName:k,lineNumber:623,columnNumber:11}}),n.createElement("div",{className:"hour-line",style:{gridRowStart:u},__source:{fileName:k,lineNumber:632,columnNumber:11}})),m.map((e,a)=>{const i=u+4*e,s=n.createElement(n.Fragment,{key:`fr${a}`,__source:{fileName:k,lineNumber:637,columnNumber:13}},n.createElement("div",{className:"hour",style:{gridRowStart:i},__source:{fileName:k,lineNumber:638,columnNumber:15}},n.createElement("div",{className:"hour-value",__source:{fileName:k,lineNumber:642,columnNumber:17}},l.format("H:mm"))),d.map((a,s)=>n.createElement(n.Fragment,{key:a.rowOffset,__source:{fileName:k,lineNumber:644,columnNumber:54}},n.createElement("div",{className:"quarter",style:{gridRowStart:i+a.rowOffset,gridRowEnd:i+a.rowOffset+a.span},"data-starttime":e*v.f+a.startOffset,"data-endtime":e*v.f+a.endOffset,__source:{fileName:k,lineNumber:645,columnNumber:17}}),0!==s&&!t[E.kCalendarOnlyHourlyDivider]&&n.createElement("div",{className:"quarter-line",style:{gridRowStart:i+a.rowOffset},__source:{fileName:k,lineNumber:655,columnNumber:19}}))),n.createElement("div",{className:"hour-line",style:{gridRowStart:i},__source:{fileName:k,lineNumber:658,columnNumber:15}}));return l.add(1,"hour"),s}),o<24&&n.createElement(n.Fragment,null,n.createElement("div",{className:"hour-line",style:{gridRowStart:u+4*o},__source:{fileName:k,lineNumber:665,columnNumber:11}}),n.createElement("div",{className:"hour",style:{gridRowStart:u+4*o},__source:{fileName:k,lineNumber:666,columnNumber:11}},n.createElement("div",{className:"hour-value",__source:{fileName:k,lineNumber:670,columnNumber:13}},l.format("H:mm"))),n.createElement("div",{className:"quarter collapsed evening","data-starttime":o*v.f,"data-endtime":o*v.f+c*v.g,style:{gridRowStart:u+4*o,gridRowEnd:u+96},__source:{fileName:k,lineNumber:672,columnNumber:11}})),n.createElement("div",{className:"hour hour-last",style:{gridRowStart:u+96-1},__source:{fileName:k,lineNumber:682,columnNumber:9}},n.createElement("div",{className:"hour-value",__source:{fileName:k,lineNumber:686,columnNumber:11}},"0:00")))}),[t,s,a,i])}function U(e){const{anchorDate:t,displayMode:a,gridColumns:i}=e;return n.useMemo((function(){const e=[];if("week"===a){const a=t.clone().startOf("week");let s=2;i.forEach((t,i)=>{const r=a.format(c.a.getWeekdayFormat(c.a.getShortDateFormat()));e.push(n.createElement(n.Fragment,{key:i,__source:{fileName:k,lineNumber:708,columnNumber:11}},n.createElement("header",{style:{gridRowStart:1,gridColumnStart:s,gridColumnEnd:s+t+1},className:"calendar-header-date",__source:{fileName:k,lineNumber:709,columnNumber:13}},r),n.createElement("div",{style:{gridRowStart:2,gridRowEnd:"grid-bottom",gridColumnStart:s,gridColumnEnd:s+t+1},className:m()("calendar-background-day",{weekend:a.day()%6==0}),"data-date":a.valueOf(),__source:{fileName:k,lineNumber:719,columnNumber:13}}))),s+=t+1,a.add(1,"days")})}else e.push(n.createElement("div",{key:"day",style:{gridRowStart:1,gridRowEnd:"grid-bottom",gridColumnStart:2,gridColumnEnd:i[0]+3},className:m()("calendar-background-day",{weekend:t.day()%6==0}),"data-date":t.clone().startOf("day").valueOf(),__source:{fileName:k,lineNumber:738,columnNumber:9}}));return e}),[t,a,i])}function H(e){return e.marker?[n.createElement("div",{key:"marker",className:"current-time",style:{gridRowStart:e.marker.row,gridColumnStart:e.marker.column+2,gridColumnEnd:`span ${e.marker.columnSpan}`},__source:{fileName:k,lineNumber:760,columnNumber:8}},n.createElement("span",{className:"marker",style:{top:`${e.marker.percentage}%`},__source:{fileName:k,lineNumber:767,columnNumber:9}}))]:null}function V(e){const{cells:t,selectedEvent:a,editingEvent:i,allDaySelected:s,selectedDate:r}=e;return n.useMemo((function(){return t.map((e,t)=>{const{display:o,isAllDay:l,navigation:c,time:u}=e;if(!u)return null;const d=r.valueOf(),h=s===l&&u.start<=d&&u.end>d;if(!h)return null;const p=h&&!a&&!i;return(n.createElement(n.Fragment,{key:`sel${t}`,__source:{fileName:k,lineNumber:809,columnNumber:9}},h&&n.createElement("div",{className:m()("calendar-add-event-button",{active:p,selected:h,"with-event":c.left!==o.left}),style:{pointerEvents:"none",gridRowStart:c.top,gridRowEnd:c.bottom,gridColumnStart:c.left,gridColumnEnd:c.right},ref:e=>e&&requestAnimationFrame(()=>{e.scrollIntoView({block:"nearest",inline:"nearest"})}),__source:{fileName:k,lineNumber:811,columnNumber:13}},"+")))})}),[s,t,i,r,a])}function W(e){const t=Boolean(e.filter.filterText),a=n.useMemo(()=>({displayStyle:"solid",editingEvent:e.editingEvent,editor:e.editor,eventKeyDown:e.eventKeyDown,isFiltering:t,isActiveEditor:e.isActiveEditor,isDragging:e.isDragging,selectedEvent:e.selectedEvent,setIsDragging:e.setIsDragging}),[e.editor,e.editingEvent,e.eventKeyDown,e.selectedEvent,e.isActiveEditor,e.isDragging,t,e.setIsDragging]);return n.useMemo(()=>e.cells.map((t,i)=>{if(t.event){const e=t.event;return e?n.createElement(r.a,A({key:e.id,event:e,position:{gridRowStart:t.display.top,gridRowEnd:t.display.bottom,gridColumnStart:t.display.left,gridColumnEnd:t.display.right}},a,{__source:{fileName:k,lineNumber:879,columnNumber:16}})):null}if(t.events){const i=t.events;return i.length?n.createElement("div",{key:l.a.generateKey(i[0]),className:m()("event-container",{"calendar-day-allday":t.isAllDay&&"day"===e.displayMode}),style:{gridRowStart:t.display.top,gridRowEnd:t.display.bottom,gridColumnStart:t.display.left,gridColumnEnd:t.display.right},__source:{fileName:k,lineNumber:896,columnNumber:11}},i.map(e=>n.createElement(r.a,A({key:e.id,event:e},a,{__source:{fileName:k,lineNumber:908,columnNumber:34}})))):null}}),[e.cells,e.displayMode,a])}t.a=function(e){const t=n.useContext(s.a),a=n.useRef(null),[r,l]=n.useState(null),[c,u]=n.useState([]),[h,p]=n.useState([]),[b,v]=n.useState([]),[C,w]=n.useState(!1),[y,S]=n.useState(null),[T,M]=n.useState(null),x=Object(f.a)(I),z=n.useRef({updateTimer:null,initialFocusTaken:!1,wasEditing:!!e.editingEvent&&t.editor.uid===e.editorUid,updateCreateOverlay:()=>{},dragCreate:{dragging:!1,cancelled:!1,currentX:null,currentY:null,initialTime:0,initialEndTime:0,initialStartRow:0,initialEndRow:0,initialLeftCol:0,initialRightCol:0},hover:{x:0,y:0}});n.useEffect(()=>{z.current.updateTimer||(z.current.updateTimer=setInterval(()=>{S(P(e.anchorDate,e.displayMode,c))},6e4));const{editor:a}=t;return z.current.wasEditing=!!e.editingEvent&&a.uid===e.editorUid,()=>{z.current.updateTimer&&clearInterval(z.current.updateTimer)}});const{anchorDate:G,displayMode:K,events:Y}=e,$=x[E.kCalendarCollapseHours],X=$?x[E.kCalendarDayStarts]:0,Z=$&&x[E.kCalendarDayEnds]||24,Q=x[E.kCalendarOnlyHourlyKeynav]?60:x[E.kCalendarTimeIncrements];n.useMemo(()=>{const e=L(Y,G,K,X,Z,Q);u(e.gridColumns),l(e.allDayGrid),p(e.timeCells),v(e.eventCells)},[G,K,X,Z,Y,Q]),n.useMemo(()=>{const e=P(G,K,c);e&&r&&(e.row=e.row+r.rows+1),S(e)},[G,K,r,c]);const q=n.useMemo(()=>({pageId:t.editor.pageId,uid:e.editorUid}),[t.editor.pageId,e.editorUid]),{gridFrozen:J,handlers:ee,overlay:te}=Object(N.a)(a.current,R,q),ae=()=>{if(z.current.hover.x&&z.current.hover.y){const{currentRow:e,currentCol:t,isAllDayRow:n}=j(a.current,z.current.hover.x,z.current.hover.y);M({gridColumnStart:parseInt(t.style.gridColumnStart),gridRowStart:n?2:parseInt(e.style.gridRowStart),gridColumnEnd:parseInt(t.style.gridColumnEnd),gridRowEnd:n?parseInt(e.style.gridRowStart):parseInt(e.style.gridRowEnd)||parseInt(e.style.gridRowStart)+1})}else M(null)},ne={...ee};ne.onDragOver=e=>{e.dataTransfer.types.some(e=>e===_.b)?(z.current.hover.x=e.clientX,z.current.hover.y=e.clientY,requestAnimationFrame(ae),e.preventDefault(),e.stopPropagation()):ee.onDragOver(e)},ne.onDrop=e=>{const t=e.dataTransfer;if(t.types.some(e=>e===_.b)){e.preventDefault(),e.stopPropagation();const{currentRow:n,currentCol:s,isAllDayRow:r}=j(a.current,e.clientX,e.clientY);if(n&&s){const e=parseInt(s.dataset.date)+parseInt(n.dataset.starttime),a=JSON.parse(t.getData(_.b)).id;i.a.moveEvent(q,a,{start:e,allDay:r})}}else ee.onDrop(e)};const ie=n.useCallback(t=>{if(t.shiftKey||t.ctrlKey||t.metaKey)return;const{selectedDate:a,allDaySelected:n}=e.filter;if(!e.editingEvent){const s=d.a[t.keyCode],r=t.altKey;switch(s){case"Up":case"Down":case"Left":case"Right":t.preventDefault();const o=r?[]:b,[l,c,u]=function(e,t,a,n,i,s=!1){const r=n.valueOf(),o=t.find(e=>e.isAllDay===s&&e.time.start<=r&&e.time.end>r);if(!o)return[null,null,!1];const l=a.find(e=>e.event&&e.event.id===i||e.events&&e.events.some(e=>e.id===i)),c=l||o;if(c.events&&("Up"===e||"Down"===e)){const t=c.events.findIndex(e=>e.id===i);if("Up"===e&&t>0||"Down"===e&&t<c.events.length-1){const a="Up"===e?-1:1,n=c.events[t+a];return[o.time&&o.time.start,n,o.isAllDay]}}let u;switch(e){case"Up":case"Down":case"Left":case"Right":u=O(e,o,l,[...t,...a])}if(u){let a;if(u.time)return[u.time.start,null,u.isAllDay];if(u.event)a=u.event;else if(u.events){const t="Up"===e?u.events.length-1:0;a=u.events[t]}if(a){if(function(e,t){return e.time.start<(t.end||1/0)&&e.time.end>t.start}(o,a))return[o.time&&o.time.start,a,u.isAllDay];let n;if(n=c.isAllDay?function(e,t,a){let n;switch(a){case"Left":n=t=>t.navigation.right===e.navigation.right;break;default:n=t=>t.navigation.left===e.navigation.left}const i=t.filter(n).sort((e,t)=>e.navigation.top-t.navigation.top);return i.length?i[0]:null}(u,[...t],e):O(e,o,null,[...t]),n&&n.time)return[n.time.start,a,u.isAllDay]}}return[null,null,!1]}(s,h,o,a,e.selectedEvent,n);if(!l)return void function(e,t,a,n){let s;switch(e){case"Left":s=t.clone().subtract(1,"day");break;case"Right":s=t.clone().add(1,"day")}s&&i.a.selectDate(n.pageId,s,a)}(s,a,n,q);(c||e.selectedEvent)&&i.a.selectEvent(q,{event:c,date:g()(l),allDay:u}),c||i.a.selectDate(q.pageId,g()(l),u);break;case"Enter":if(t.preventDefault(),e.selectedEvent){const t=Y.find(t=>t.id===e.selectedEvent);i.a.editEvent(q,t)}else{const t=e.filter.selectedDate.valueOf();i.a.editEvent(q,null,{start:t,allDay:e.filter.allDaySelected})}break;case"Escape":t.preventDefault(),e.selectedEvent&&i.a.selectEvent(q,{event:null})}M(null)}},[q,b,h,e.selectedEvent,e.editingEvent,e.filter,Y]);let se={};if(J)se=J;else{const t="auto ",a=c.reduce((e,a)=>`${e} ${t.repeat(a)} 16px`,"var(--calendar-hour-column-width) ");se.gridTemplateColumns=a+" [grid-right]";let n="";D[e.displayMode].row-1&&(n="max-content ");const i=x[E.kCalendarCollapseHours],s=i?x[E.kCalendarDayStarts]:0,o=i&&x[E.kCalendarDayEnds]||24;let l=s>0?`repeat(${4*s}, min-content) `:"";l+=`repeat(${4*(24-s-(24-o))}, auto) `,l+=o<24?`repeat(${4*(24-o)}, min-content) `:"",(null==r?void 0:r.rows)&&(n+=`repeat(${r.rows}, auto) `),n+=`1.5em ${l} [grid-bottom]`,se.gridTemplateRows=n}return(n.createElement("div",A({className:m()("calendar-grid calendar-grid-hours",`calendar-grid-${e.displayMode}`,{"is-dragging":C}),onKeyDown:ie,style:se,tabIndex:"0",draggable:!0},ne,{onMouseMove:e=>{e.target===a.current?(z.current.hover.x=e.clientX,z.current.hover.y=e.clientY):(z.current.hover.x=0,z.current.hover.y=0),requestAnimationFrame(ae)},onClick:e=>{if(e.target!==e.currentTarget)return;const{currentRow:t,currentCol:n,isAllDayRow:s}=j(a.current,e.clientX,e.clientY);if(t&&n){const a=parseInt(n.dataset.date)+parseInt(t.dataset.starttime);if(o.a.getEditState().eventDraft){switch(x[E.kCalendarClickOutside]){case"cancel":i.a.cancelEventEdit(q),i.a.selectDate(q.pageId,g()(a),s);break;case"save_and_close":i.a.saveEventEdit(q),i.a.selectDate(q.pageId,g()(a),s);break;case"save_and_new":"contextmenu"===e.type?(i.a.saveEventEdit(q),i.a.selectDate(q.pageId,g()(a),s)):i.a.editEvent(q,null,{start:a,allDay:s})}}else"contextmenu"===e.type?i.a.selectDate(q.pageId,g()(a),s):i.a.editEvent(q,null,{start:a,allDay:s});M(null)}},ref:t=>{t&&(!e.editingEvent&&z.current.wasEditing||!z.current.initialFocusTaken)&&(t.focus(),z.current.initialFocusTaken=!0),a.current=t},__source:{fileName:k,lineNumber:1206,columnNumber:5}}),n.createElement(U,{anchorDate:G,displayMode:K,gridColumns:c,__source:{fileName:k,lineNumber:1230,columnNumber:7}}),n.createElement(F,{allDayGrid:r,anchorDate:G,displayMode:K,__source:{fileName:k,lineNumber:1236,columnNumber:7}}),T&&n.createElement("div",{className:"calendar-grid-hover",style:T,__source:{fileName:k,lineNumber:1243,columnNumber:9}}),n.createElement(V,{cells:h,editingEvent:e.editingEvent,editor:q,allDaySelected:e.filter.allDaySelected,selectedDate:e.filter.selectedDate,selectedEvent:e.selectedEvent,setIsDragging:w,__source:{fileName:k,lineNumber:1246,columnNumber:7}}),n.createElement(H,{marker:y,__source:{fileName:k,lineNumber:1256,columnNumber:7}}),n.createElement(W,{cells:b,editingEvent:e.editingEvent,editor:q,eventKeyDown:e.eventKeyDown,filter:e.filter,isDragging:C,isActiveEditor:t.editor.uid===e.editorUid,selectedEvent:e.selectedEvent,setIsDragging:w,displayMode:e.filter.displayMode,__source:{fileName:k,lineNumber:1258,columnNumber:7}}),n.createElement(B,{overlay:te,rowOffset:D[e.displayMode].row+(r&&r.rows+1||0),colOffset:D[e.displayMode].column,columnSizes:c,__source:{fileName:k,lineNumber:1271,columnNumber:7}})))}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(45),r=a.n(s),o=a(595),l=a(2),c=a(9),u="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposerToolbar.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=[[{command:"bold",text:Object(l.a)("Bold"),icon:c.Uc},{command:"italic",text:Object(l.a)("Italic"),icon:c.ad},{command:"underline",text:Object(l.a)("Underline"),icon:c.jd},{command:"strikeThrough",text:Object(l.a)("Strike through"),icon:c.id}],[{command:"justifyLeft",text:Object(l.a)("Left align"),icon:c.dd},{command:"justifyCenter",text:Object(l.a)("Center align"),icon:c.bd},{command:"justifyRight",text:Object(l.a)("Right align"),icon:c.ed},{command:"justifyFull",text:Object(l.a)("Justify"),icon:c.cd}],[{command:"insertOrderedList",text:Object(l.a)("Numbered list"),icon:c.Yc},{command:"insertUnorderedList",text:Object(l.a)("Bullet list"),icon:c.Zc}],[{command:"outdent",text:Object(l.a)("Remove indentation"),icon:c.fd},{command:"indent",text:Object(l.a)("Indent"),icon:c.Wc}],[{command:"createLink",text:Object(l.a)("Create Link"),icon:c.Vc},{command:"insertImage",text:Object(l.a)("Insert Image"),icon:c.Xc}],[{command:"undo",text:Object(l.a)("win_linux","Undo"),icon:c.kd},{command:"redo",text:Object(l.a)("win_linux","Redo"),icon:c.gd}],[{command:"removeFormat",text:Object(l.a)("Remove formatting"),icon:c.hd}]];class h extends n.Component{constructor(...e){super(...e),m(this,"state",{anchor:"",link:"",buttonState:[],createLinkModalOpen:!1,formatBlock:"p",fontName:"sans-serif",fontSize:"2",foreColor:"#111111",backColor:"#f6f6f6"}),m(this,"updateButtonState",e=>{const t=d.flat().map(e=>e.command).indexOf("createLink"),a=e&&e[0]||[];a[t]=Boolean(this.state.link||this.state.anchor),this.setState({buttonState:a})}),m(this,"updateDropdownAndColorState",e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])){const[t,a,n,i,s]=e[0];this.setState({formatBlock:""===t||"div"===t?"p":t,fontName:a.startsWith('"')&&a.endsWith('"')?a.substring(1,a.length-1):a,fontSize:n,foreColor:"rgb(0, 0, 0)"===i?"#111111":r()(i).hex(),backColor:"rgba(0, 0, 0, 0)"===s?"#f6f6f6":r()(s).hex()})}}),m(this,"updateLinkState",e=>{this.setState(t=>{if(t.anchor!==e)return{anchor:e}})}),m(this,"onCreateLink",e=>{this.setState({createLinkModalOpen:!1}),this.props.onCreateLink(e)}),m(this,"onCancelCreateLink",()=>{this.setState({createLinkModalOpen:!1}),this.props.onCancelCreateLink()}),m(this,"showCreateLinkModal",()=>this.setState({createLinkModalOpen:!0}))}render(){let e=0;return(n.createElement("div",{className:"editor-html-toolbar",__source:{fileName:u,lineNumber:232,columnNumber:7}},this.state.createLinkModalOpen&&n.createElement(o.a,{onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,link:this.state.link||this.state.anchor,__source:{fileName:u,lineNumber:234,columnNumber:11}}),n.createElement("select",{onChange:e=>this.props.onChange("formatBlock",e),value:this.state.formatBlock,title:Object(l.a)("Paragraph Format"),tabIndex:"-1",__source:{fileName:u,lineNumber:240,columnNumber:9}},n.createElement("option",{value:"h1",__source:{fileName:u,lineNumber:246,columnNumber:11}},Object(l.a)("Heading 1")),n.createElement("option",{value:"h2",__source:{fileName:u,lineNumber:247,columnNumber:11}},Object(l.a)("Heading 2")),n.createElement("option",{value:"h3",__source:{fileName:u,lineNumber:248,columnNumber:11}},Object(l.a)("Heading 3")),n.createElement("option",{value:"h4",__source:{fileName:u,lineNumber:249,columnNumber:11}},Object(l.a)("Heading 4")),n.createElement("option",{value:"p",__source:{fileName:u,lineNumber:250,columnNumber:11}},Object(l.a)("Paragraph")),n.createElement("option",{value:"pre",__source:{fileName:u,lineNumber:251,columnNumber:11}},Object(l.a)("Preformatted")),n.createElement("option",{value:"blockquote",__source:{fileName:u,lineNumber:252,columnNumber:11}},Object(l.a)("Quote"))),n.createElement("select",{onChange:e=>this.props.onChange("fontName",e),value:this.state.fontName,title:Object(l.a)("Font"),tabIndex:"-1",__source:{fileName:u,lineNumber:254,columnNumber:9}},n.createElement("option",{value:"serif",__source:{fileName:u,lineNumber:260,columnNumber:11}},Object(l.a)("Serif")),n.createElement("option",{value:"sans-serif",__source:{fileName:u,lineNumber:261,columnNumber:11}},Object(l.a)("Sans-Serif")),n.createElement("option",{value:"monospace",__source:{fileName:u,lineNumber:262,columnNumber:11}},Object(l.a)("Fixed Width"))),n.createElement("select",{onChange:e=>this.props.onChange("fontSize",e),value:this.state.fontSize,title:Object(l.a)("Font Size"),tabIndex:"-1",__source:{fileName:u,lineNumber:264,columnNumber:9}},n.createElement("option",{value:"1",__source:{fileName:u,lineNumber:270,columnNumber:11}},Object(l.a)("Extra Small")),n.createElement("option",{value:"2",__source:{fileName:u,lineNumber:271,columnNumber:11}},Object(l.a)("mail","Small")),n.createElement("option",{value:"3",__source:{fileName:u,lineNumber:272,columnNumber:11}},Object(l.a)("Normal")),n.createElement("option",{value:"4",__source:{fileName:u,lineNumber:273,columnNumber:11}},Object(l.a)("mail","Large")),n.createElement("option",{value:"5",__source:{fileName:u,lineNumber:274,columnNumber:11}},Object(l.a)("Larger")),n.createElement("option",{value:"6",__source:{fileName:u,lineNumber:275,columnNumber:11}},Object(l.a)("Extra Large"))),n.createElement("input",{type:"color",tabIndex:"-1",className:"text-color",title:Object(l.a)("Text Color"),value:this.state.foreColor,onChange:e=>this.props.onChangeColor("foreColor",e),onFocus:()=>this.props.onFocuscolorPickerButton("foreColor"),__source:{fileName:u,lineNumber:277,columnNumber:9}}),n.createElement("input",{type:"color",tabIndex:"-1",className:"text-bg-color",title:Object(l.a)("Text Background Color"),value:this.state.backColor,onChange:e=>this.props.onChangeColor("backColor",e),onFocus:()=>this.props.onFocuscolorPickerButton("backColor"),__source:{fileName:u,lineNumber:286,columnNumber:9}}),d.map((t,a)=>(a>0&&(e+=d[a-1].length),n.createElement("span",{key:a,className:"editor-button-group",__source:{fileName:u,lineNumber:301,columnNumber:13}},t.map((t,a)=>n.createElement("button",{key:t.command,tabIndex:"-1",onClick:()=>this.props.onClick(t.command),title:t.text,className:this.state.buttonState[e+a]?"active":null,dangerouslySetInnerHTML:{__html:t.icon},__source:{fileName:u,lineNumber:303,columnNumber:17}})))))))}}var p=a(687),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\mail\\MailComposerEditor.jsx";const g=Object(n.forwardRef)((e,t)=>{const a=Object(n.useRef)(),s=Object(n.useRef)(),r=Object(n.useRef)("");function o(){const e=a.current&&a.current.webview;e&&e.executeScript({code:"['formatBlock', 'fontName', 'fontSize', 'foreColor', 'backColor'].map(\n         command => document.queryCommandValue(command));"},e=>{s.current&&s.current.updateDropdownAndColorState(e)})}return Object(n.useImperativeHandle)(t,()=>({focus:()=>{a.current&&a.current.focus()},getContentAsBodyParts:()=>{if(!a.current)throw new Error("MailComposer: Building body parts after body is gone");return a.current.getContentAsBodyParts()},setContent:(e,t)=>{var n;null===(n=a.current)||void 0===n||n.setContent(e,t)}}),[]),i.a.createElement("div",{className:"editor-html",__source:{fileName:b,lineNumber:170,columnNumber:5}},i.a.createElement(h,{ref:s,onClick:function(e){a.current&&a.current.onClick(e)},onCreateLink:function(e){const t=a.current;t&&(""===e?t.execCommand("unlink"):"https://"!==e&&t.execCommand("createLink",e),t.focus())},onCancelCreateLink:function(){a.current&&a.current.focus()},onChange:function(e,t){a.current&&a.current.execCommand(e,t.currentTarget.value),o()},onChangeColor:function(e,t){{const n=a.current;n&&(n.webview&&n.webview.focus(),n.execCommand(e,t.currentTarget.value))}},onFocuscolorPickerButton:function(e){const t=a.current;r.current&&t&&(t.focus(),t.execCommand(e,r.current),r.current="")},__source:{fileName:b,lineNumber:171,columnNumber:7}}),i.a.createElement(p.a,{ref:a,onChange:e.onBodyChange,onContentLoad:e.onContentLoad,focusPreviousElement:e.focusPreviousElement,updateDropdownAndColorState:o,updateButtonState:function(){const e=a.current&&a.current.webview,t='"'+d.flat().map(e=>e.command).join('","')+'"';e&&e.executeScript({code:`[${t}].map(command => document.queryCommandState(command));`},e=>{s.current&&s.current.updateButtonState(e)})},handleLinkEvent:function(e,t){const n=s.current;if(!n)return;const{link:i,anchor:r}=n.state;switch(e){case"linkupdate":n.updateLinkState(t||"");break;case"createLink":case"editLink":n.showCreateLinkModal();break;case"copyLink":break;case"unlink":(i||r)&&a.current&&a.current.unlink();break;case"createLinkClicked":(i||r)&&a.current&&a.current.selectSurrounding(),n.showCreateLinkModal()}},__source:{fileName:b,lineNumber:180,columnNumber:7}}))});t.a=g},function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(24),r=a(32),o=a(42),l=a(36),c=a(65),u=a(25),m=a(2),d=a(20),h=a.n(d),p=a(9),b="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarPicker.jsx";const{setStatus:g}=c.a,{isRemoteCalendar:N,getPollResultText:f}=o.a,_=e=>{s.a.toggleCalendarVisibility(e)},v=e=>{const{key:t}=e;" "!==t&&"Enter"!==t||e.target.dispatchEvent(new Event("click",{bubbles:!0}))};var E=function(e){const t=n.useRef(),a=n.useRef(),i=n.useRef(),c=n.useRef(!1),d=n.useRef(),E=n.useContext(u.a),{document:C}=E,[w,O]=n.useState(!1);n.useEffect(()=>(t.current&&t.current.focus(),()=>{d.current&&clearTimeout(d.current)}),[]);const y=e=>{s.a.setDefaultCalendarId(e),t.current&&t.current.focus()},S=e=>{e.currentTarget.focus();const t=e.currentTarget.classList.contains("CalendarPicker-Item--Submenu")||e.currentTarget.closest(".CalendarPicker-Item--Submenu");t?w?d.current&&(d.current=clearTimeout(d.current)):O(!0):!t&&w&&(d.current=setTimeout(()=>{O(!1),d.current=null},500))},T=e=>{t.current&&t.current.focus()},k=r.a.getDefaultCalendarId(),A=c.current;c.current=!1;const I=e.calendars.some(e=>N(e.id));return(n.createElement("div",{className:"CalendarPicker",onKeyDown:e=>{const n=C.activeElement,{key:s}=e;if(n&&n.classList.contains("CalendarPicker-Item")){if(n){const e=((e,t)=>{const a=e.parentElement&&e.parentElement.children;return a&&a.length?[...a].filter(e=>e.classList.contains(t)):[]})(n,"CalendarPicker-Item"),a=e.indexOf(n);if(0===e.length||-1===a)return;if("ArrowDown"===s)e[(a+1)%e.length].focus();else if("ArrowUp"===s)e[(a-1+e.length)%e.length].focus();else if("ArrowLeft"===s){if(w&&t.current){const e=t.current.querySelector(".CalendarPicker-Item--Submenu");e&&e.focus(),O(!1)}}else if("ArrowRight"===s&&n.classList.contains("CalendarPicker-Item--Submenu"))if(w){const e=n.querySelectorAll(".CalendarPicker-Item");e.length&&e[0].focus()}else O(!0),c.current=!0}}else"ArrowUp"===s?i.current&&i.current.focus():"ArrowDown"===s&&(a.current?a.current.focus():i.current&&i.current.focus())},ref:t,tabIndex:0,__source:{fileName:b,lineNumber:176,columnNumber:5}},e.calendars.length>0&&n.createElement(n.Fragment,null,e.calendars.map((e,t)=>{const i=o.a.createCalendarIcon(e,16,!e.hidden);return(n.createElement("button",{onMouseEnter:S,onMouseLeave:T,className:"CalendarPicker-Item",key:e.id,onClick:_.bind(null,e.id),ref:0===t?a:null,__source:{fileName:b,lineNumber:188,columnNumber:13}},n.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:i},__source:{fileName:b,lineNumber:196,columnNumber:15}}),n.createElement("span",{className:h()("CalendarPicker-Title",{"CalendarPicker-Title--Default":e.id===k}),__source:{fileName:b,lineNumber:200,columnNumber:15}},e.description||e.name)))}),n.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:b,lineNumber:211,columnNumber:9}}),n.createElement("div",{className:"CalendarPicker-Item CalendarPicker-Item--Submenu",onClick:()=>O(!w),onMouseEnter:S,onMouseLeave:T,onKeyUp:v,tabIndex:0,__source:{fileName:b,lineNumber:212,columnNumber:11}},n.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:b,lineNumber:220,columnNumber:13}},Object(m.a)("Default Calendar")),n.createElement("span",{className:"CalendarPicker-SubmenuIcon",dangerouslySetInnerHTML:{__html:p.rb},__source:{fileName:b,lineNumber:223,columnNumber:13}}),w&&n.createElement("div",{className:"CalendarPicker-Submenu",__source:{fileName:b,lineNumber:228,columnNumber:15}},e.calendars.map((e,t)=>{const a=k===e.id,i=o.a.createCalendarIcon(e,16,a);return n.createElement("button",{className:"CalendarPicker-Item",key:e.id,onClick:y.bind(null,e.id),onMouseEnter:S,onMouseLeave:T,autoFocus:0===t&&A,__source:{fileName:b,lineNumber:236,columnNumber:21}},n.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:i},__source:{fileName:b,lineNumber:244,columnNumber:23}}),n.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:b,lineNumber:248,columnNumber:23}},e.description||e.name))}))),n.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:b,lineNumber:258,columnNumber:11}})),n.createElement("button",{className:"CalendarPicker-Item",onClick:()=>{s.a.addCalendarCommand(),e.requestClose&&e.requestClose()},onMouseEnter:S,onMouseLeave:T,__source:{fileName:b,lineNumber:262,columnNumber:7}},n.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:p.h.medium},__source:{fileName:b,lineNumber:268,columnNumber:9}}),n.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:b,lineNumber:272,columnNumber:9}},Object(m.a)("New Calendar"))),I&&n.createElement(n.Fragment,null,n.createElement("button",{className:"CalendarPicker-Item",onClick:async()=>{e.requestClose&&e.requestClose();const t=await s.a.pollAllCalDAVAccounts();g(f(t),6e3)},onMouseEnter:S,onMouseLeave:T,__source:{fileName:b,lineNumber:278,columnNumber:9}},n.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:p.lc.medium},__source:{fileName:b,lineNumber:284,columnNumber:11}}),n.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:b,lineNumber:288,columnNumber:11}},Object(m.a)("Refresh"))),n.createElement("div",{className:"CalendarPicker-Separator",__source:{fileName:b,lineNumber:292,columnNumber:9}})),n.createElement("button",{className:"CalendarPicker-Item",onClick:()=>{l.a.showSettings("calendar"),e.requestClose&&e.requestClose()},onMouseEnter:S,onMouseLeave:T,ref:i,__source:{fileName:b,lineNumber:296,columnNumber:7}},n.createElement("span",{className:"CalendarPicker-Icon",dangerouslySetInnerHTML:{__html:p.vd.medium},__source:{fileName:b,lineNumber:303,columnNumber:9}}),n.createElement("span",{className:"CalendarPicker-Title",__source:{fileName:b,lineNumber:307,columnNumber:9}},Object(m.a)("Calendar Settings")))))},C=a(90),w=a(22),O=a(126),y="D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\calendar\\CalendarVisibilityButtons.jsx";t.a=function(e){const[t,a]=i.a.useState(!1);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"toolbar-dropdown-container",__source:{fileName:y,lineNumber:33,columnNumber:7}},i.a.createElement(w.a,{image:p.H.medium,isPressed:t,onClick:()=>a(!t),popupPosition:"below",hidePopup:()=>{},title:Object(m.a)("Calendars"),__source:{fileName:y,lineNumber:34,columnNumber:9}}),t&&i.a.createElement(C.a,{dialogWidth:"auto",viewMode:"calendar-picker",onRequestClose:e=>{e&&e.target.addEventListener("click",O.a,{once:!0}),a(!1)},__source:{fileName:y,lineNumber:43,columnNumber:11}},i.a.createElement(E,{calendars:e.calendars,requestClose:()=>a(!1),__source:{fileName:y,lineNumber:48,columnNumber:13}}))))}},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(1438)},function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=(a(1257),a(50)),i=a(492),s=a(24),r=a(150),o=a(210),l=a(57),c=a.n(l),u=a(352),m=a(311),d=a(103),h=(a(1256),a(1406)),p=a(1390),b=a(151),g=a(14),N=a(67),f=a(262),_=a(6),v=a(703),E=a(40),C=a.n(E),w=a(229),O=a(404),y=a(345),S=a(1381),T=a(435),k=a(201),A=a(1382),I=a(114),D=a(520),M=a(385),P=a(35),x=a(158),L=a(10),j=(a(26),a(15)),R=a.n(j),B=a(1383),F=a.n(B),U=a(1384),H=a(1385),V=a(7),W=a(99),z=a(104);function G(e,t){return e.displayName=t,F.a.log(e)()}console.time("JS init startup"),Object(W.b)();const K=()=>{0};c.a.EventEmitter.defaultMaxListeners=100,Object(U.a)(),u.a.initFastForward();try{!async function(){await G(_.a.loadPromise,"PrefsCache"),Object(z.b)(),await G(x.a.loadPromise,"WindowActions"),await G(P.a.loadPromise,"vivaldiSettings"),await G(M.a.loadPromise,"VivaldiFeatureFlags"),await Promise.all([G(S.a.loadPromise,"ThemeActions"),G(i.a.loadPromise,"BreakModeActions"),G(N.a.loadPromise,"PanelActions"),G(w.a.loadPromise,"SearchEngineActions"),G(g.a.loadPromise,"PageActions")]),await new Promise((e,a)=>{try{V.a.utilities.getSystemDateFormat(n=>{n.longDateFormat&&R.a.defineLocale(d.a.fixMomentLocale(L.a.i18n.getUILanguage())+"-viv",d.a.getLocale(n));const i=document.getElementById("app");i?C.a.render(t.createElement(p.a,{__source:{fileName:"D:\\builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\app.js",lineNumber:88,columnNumber:13}}),i,e):a()})}catch(e){a(e)}}),K(),await Promise.all([G(D.a.loadPromise,"VivaldiAccountActions"),G(y.a.loadPromise,"SyncActions"),G(r.default.loadPromise,"CommandActions"),G(n.a.loadPromise,"BookmarkActions"),G(b.a.loadPromise,"NoteActions"),G(k.a.loadPromise,"TrashActions")]),await G(m.a.loadPromise,"HistoryActions"),await Promise.all([O.a.load(),I.a.migrateTypedHistory(),f.a.load(),T.a.init()]),await G(o.a.loadPromise,"DownloadActions"),H.a.start(),A.a.init(),console.time("Mail Startup time"),h.a.start(),s.a.init(),v.a.init(),console.timeEnd("JS init startup")}()}catch(e){console.log("Startup Process Failure: "+e),K()}}.call(this,a(82))},,,,function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.329 5a.75.75 0 00-.747.825l.35 3.5A.75.75 0 007.68 10h.642a.75.75 0 00.747-.675l.35-3.5A.75.75 0 008.67 5H7.33zm.421 6a.75.75 0 00-.75.75v.5c0 .414.336.75.75.75h.5a.75.75 0 00.75-.75v-.5a.75.75 0 00-.75-.75h-.5z"/>\n  <path fill-rule="evenodd" d="M6.689 2.33a1.5 1.5 0 012.622 0l-.437.243.437-.242 5.8 10.44A1.5 1.5 0 0113.802 15H2.2a1.5 1.5 0 01-1.312-2.228l5.8-10.441zm1.748.486a.5.5 0 00-.874 0l-5.8 10.441A.5.5 0 002.2 14h11.6a.5.5 0 00.438-.743l-5.8-10.44z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path d="M7.13381 2.50139L1.36522 12.5003C0.980609 13.1669 1.46175 14 2.23141 14H13.7686C14.5382 14 15.0194 13.1669 14.6348 12.5003L8.86619 2.50139C8.48136 1.83435 7.51864 1.83435 7.13381 2.50139Z" fill-opacity="0.2"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.32878 5.00012C6.88506 5.00012 6.53835 5.38324 6.5825 5.82475L6.9325 9.32475C6.97084 9.70815 7.29346 10.0001 7.67878 10.0001H8.3213C8.70661 10.0001 9.02923 9.70815 9.06757 9.32475L9.41757 5.82475C9.46173 5.38324 9.11501 5.00012 8.6713 5.00012H7.32878ZM7.75001 11C7.33579 11 7.00001 11.3358 7.00001 11.75V12.25C7.00001 12.6642 7.33579 13 7.75001 13H8.25001C8.66422 13 9.00001 12.6642 9.00001 12.25V11.75C9.00001 11.3358 8.66422 11 8.25001 11H7.75001Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.256 4.73144L2.67246 20.0209C1.924 21.3541 2.88751 23 4.41643 23H21.5836C23.1125 23 24.076 21.3541 23.3275 20.0209L14.744 4.73144C13.9798 3.3702 12.0202 3.3702 11.256 4.73144Z" fill-opacity="0.2"/>\n<path d="M11.9059 10.4231C11.5644 10.4231 11.2975 10.7153 11.3314 11.0521L11.7933 15.6284C11.8228 15.9208 12.0712 16.1435 12.3678 16.1435H13.6322C13.9288 16.1435 14.1772 15.9208 14.2067 15.6284L14.6686 11.0521C14.7026 10.7153 14.4357 10.4231 14.0941 10.4231H11.9059Z" />\n<path d="M12.4227 17.2876C12.1038 17.2876 11.8453 17.5437 11.8453 17.8596V19.0037C11.8453 19.3197 12.1038 19.5758 12.4227 19.5758H13.5774C13.8962 19.5758 14.1547 19.3197 14.1547 19.0037V17.8596C14.1547 17.5437 13.8962 17.2876 13.5774 17.2876H12.4227Z" />\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.354 13.354a.5.5 0 01-.708 0l-5-5L4.293 8l.353-.354 5-5a.5.5 0 01.708.708L5.707 8l4.647 4.646a.5.5 0 010 .708z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.2071 4.20711C10.5977 3.81658 10.5977 3.18342 10.2071 2.79289C9.81661 2.40237 9.18345 2.40237 8.79292 2.79289L3.58582 8L8.79292 13.2071C9.18345 13.5976 9.81661 13.5976 10.2071 13.2071C10.5977 12.8166 10.5977 12.1834 10.2071 11.7929L6.41424 8L10.2071 4.20711Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M15.2929 20.7071C15.6834 21.0976 16.3166 21.0976 16.7071 20.7071C17.0976 20.3166 17.0976 19.6834 16.7071 19.2929L10.4142 13L16.7071 6.70711C17.0976 6.31658 17.0976 5.68342 16.7071 5.29289C16.3166 4.90237 15.6834 4.90237 15.2929 5.29289L7.58575 13L15.2929 20.7071Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.646 2.646a.5.5 0 01.708 0l5 5 .353.354-.353.354-5 5a.5.5 0 01-.708-.708L10.293 8 5.646 3.354a.5.5 0 010-.708z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.79286 11.7929C5.40234 12.1834 5.40234 12.8166 5.79286 13.2071C6.18339 13.5976 6.81655 13.5976 7.20708 13.2071L12.4142 8L7.20708 2.79289C6.81655 2.40237 6.18339 2.40237 5.79287 2.79289C5.40234 3.18342 5.40234 3.81658 5.79287 4.20711L9.58576 8L5.79286 11.7929Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.29289 19.2929C8.90237 19.6834 8.90237 20.3166 9.29289 20.7071C9.68342 21.0976 10.3166 21.0976 10.7071 20.7071L18.4142 13L10.7071 5.29289C10.3166 4.90237 9.68342 4.90237 9.29289 5.29289C8.90237 5.68342 8.90237 6.31658 9.29289 6.70711L15.5858 13L9.29289 19.2929Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 4.2a.5.5 0 00-1 0v3.3L5.854 3.854A.5.5 0 005 4.207v7.586a.5.5 0 00.854.354L9.5 8.5v3.3a.5.5 0 101 0V4.2zM8.586 8L6 10.586V5.414L8.586 8z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10 13C9.44772 13 9 12.5523 9 12L9 9L5.70711 12.2929C5.07714 12.9229 4 12.4767 4 11.5858L4 4.41421C4 3.52331 5.07714 3.07714 5.70711 3.70711L9 7L9 4C9 3.44771 9.44772 3 10 3C10.5523 3 11 3.44771 11 4L11 12C11 12.5523 10.5523 13 10 13Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M17 18C17 18.5523 16.5523 19 16 19C15.4477 19 15 18.5523 15 18L15 14L10.7071 18.2929C10.0771 18.9229 9 18.4767 9 17.5858L9 8.41421C9 7.52331 10.0771 7.07714 10.7071 7.70711L15 12L15 8C15 7.44772 15.4477 7 16 7C16.5523 7 17 7.44771 17 8L17 18Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 11.8a.5.5 0 001 0V8.5l3.646 3.646a.5.5 0 00.854-.353V4.207a.5.5 0 00-.854-.353L6.5 7.5V4.2a.5.5 0 00-1 0v7.6zM7.414 8L10 5.414v5.172L7.414 8z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 3C6.55228 3 7 3.44772 7 4V7L10.2929 3.70711C10.9229 3.07714 12 3.52331 12 4.41421V11.5858C12 12.4767 10.9229 12.9229 10.2929 12.2929L7 9V12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12V4C5 3.44772 5.44772 3 6 3Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 8C9 7.44772 9.44772 7 10 7C10.5523 7 11 7.44772 11 8V12L15.2929 7.70711C15.9229 7.07714 17 7.52331 17 8.41421V17.5858C17 18.4767 15.9229 18.9229 15.2929 18.2929L11 14V18C11 18.5523 10.5523 19 10 19C9.44772 19 9 18.5523 9 18V8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 13V7.414l-5-5-5 5V13h3v-2-.052c-.001-.294-.003-.855.206-1.342.126-.294.339-.595.683-.812C7.227 8.581 7.612 8.5 8 8.5s.773.081 1.11.294c.345.217.558.518.684.812.209.487.207 1.048.206 1.342V13h3zm1 0V7.414a1 1 0 00-.293-.707l-5-5a1 1 0 00-1.414 0l-5 5A1 1 0 002 7.414V13a1 1 0 001 1h3a1 1 0 001-1v-2c0-.667 0-1.5 1-1.5s1 .833 1 1.5v2a1 1 0 001 1h3a1 1 0 001-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M8 10.5C8.85199 10.5 8.97809 11.1049 8.99676 11.6963C9 11.799 9 11.9013 9 12V14C9 14.5523 9.44772 15 10 15H14C14.5523 15 15 14.5523 15 14V8.41421C15 8.149 14.8946 7.89464 14.7071 7.70711L8.70711 1.70711C8.31658 1.31658 7.68342 1.31658 7.29289 1.70711L1.29289 7.70711C1.10536 7.89464 1 8.149 1 8.41421V14C1 14.5523 1.44772 15 2 15H6C6.55228 15 7 14.5523 7 14V12C7 11.9013 7 11.799 7.00324 11.6963C7.02191 11.1049 7.14801 10.5 8 10.5ZM13 13V8.82843L8 3.82843L3 8.82843V13H5V12L4.99965 11.9448C4.99723 11.6655 4.9906 10.9031 5.28671 10.2122C5.47659 9.76911 5.8086 9.29298 6.35625 8.94816C6.89191 8.61089 7.47399 8.5 8 8.5C8.52601 8.5 9.10809 8.61089 9.64375 8.94816C10.1914 9.29298 10.5234 9.76911 10.7133 10.2122C11.0094 10.9031 11.0028 11.6655 11.0003 11.9448L11 12V13H13ZM6.99038 11.645C6.98978 11.6405 6.98933 11.6384 6.98933 11.6384L6.98953 11.6401C6.98953 11.6401 6.98997 11.6428 6.99038 11.645Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14.0607 5.14645C13.4749 4.56066 12.5251 4.56066 11.9393 5.14645L5.43934 11.6464C5.15804 11.9278 5 12.3093 5 12.7071V19.5C5 20.3284 5.67157 21 6.5 21H10.5C11.3284 21 12 20.3284 12 19.5V16.073C12.0032 16.0667 12.0072 16.0593 12.012 16.0508C12.0486 15.9868 12.1157 15.898 12.216 15.8084C12.4164 15.6296 12.6873 15.5 13 15.5C13.3127 15.5 13.5836 15.6296 13.784 15.8084C13.8843 15.898 13.9514 15.9868 13.988 16.0508C13.9928 16.0593 13.9968 16.0667 14 16.073V19.5C14 20.3284 14.6716 21 15.5 21H19.5C20.3284 21 21 20.3284 21 19.5V12.7071C21 12.3093 20.842 11.9278 20.5607 11.6464L14.0607 5.14645ZM7 12.9142L13 6.91421L19 12.9142V19H16V16C16 15.6363 15.8655 15.3053 15.7245 15.0586C15.5736 14.7944 15.3657 14.5395 15.116 14.3166C14.6164 13.8704 13.8873 13.5 13 13.5C12.1127 13.5 11.3836 13.8704 10.884 14.3166C10.6343 14.5395 10.4264 14.7944 10.2755 15.0586C10.1345 15.3053 10 15.6363 10 16V19H7V12.9142Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.5 3.5a4.5 4.5 0 104.032 6.5h1.093A5.502 5.502 0 012 8a5.5 5.5 0 019.39-3.89l1.256-1.256a.5.5 0 01.854.353V7H9.707a.5.5 0 01-.353-.854l1.328-1.328A4.486 4.486 0 007.5 3.5z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14 2.20711C14 1.76166 13.4614 1.53857 13.1464 1.85356L11.7246 3.27543C11.3372 2.96859 10.911 2.7088 10.4541 2.50391C9.21538 1.94834 7.82481 1.82932 6.50965 2.16629C5.19448 2.50327 4.03248 3.27631 3.2135 4.35912C2.39451 5.44193 1.96697 6.77049 2.00073 8.12771C2.03448 9.48494 2.52754 10.7906 3.39933 11.8314C4.27113 12.8721 5.47012 13.5864 6.80041 13.8576C8.1307 14.1288 9.51363 13.9408 10.7233 13.3244C11.4465 12.9557 12.0823 12.447 12.5968 11.8333C12.6276 11.7965 12.6581 11.7593 12.688 11.7218C12.7896 11.5946 12.886 11.4632 12.9771 11.3278C13.2826 10.8737 13.0562 10.2799 12.558 10.0533C12.1616 9.87286 11.7138 9.98233 11.3753 10.2501C11.3189 10.2948 11.2654 10.3439 11.2158 10.3968C11.1891 10.4252 11.1635 10.4548 11.1391 10.4853C10.7843 10.9298 10.3368 11.2969 9.82334 11.5585C9.01328 11.9714 8.08715 12.0973 7.19628 11.9157C6.30542 11.734 5.50247 11.2557 4.91865 10.5587C4.33482 9.86172 4.00463 8.98735 3.98203 8.07844C3.95942 7.16953 4.24574 6.27982 4.7942 5.55468C5.34265 4.82955 6.12082 4.31185 7.00156 4.08619C7.88231 3.86052 8.81354 3.94023 9.64312 4.31228C9.87802 4.41763 10.1008 4.54465 10.309 4.69096L8.85356 6.14645C8.53857 6.46143 8.76166 7 9.20711 7H14V2.20711Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M20 6.20711C20 5.76166 19.4614 5.53857 19.1464 5.85355L17.2797 7.72031C16.9669 7.46165 16.632 7.22741 16.2774 7.02069C14.7393 6.12402 12.9324 5.80372 11.1799 6.1171C9.4273 6.43048 7.84336 7.35709 6.71134 8.73121C5.57932 10.1053 4.97303 11.8373 5.00092 13.6175C5.02881 15.3976 5.68905 17.1098 6.86356 18.4478C8.03807 19.7858 9.65025 20.6623 11.4118 20.9206C13.1733 21.179 14.9693 20.8022 16.4785 19.8578C17.5598 19.1812 18.4434 18.2447 19.0553 17.1439C19.0803 17.099 19.1048 17.0538 19.1288 17.0084C19.1844 16.9033 19.2376 16.7968 19.2883 16.689C19.5213 16.193 19.2261 15.6315 18.7038 15.466C18.2666 15.3274 17.81 15.5117 17.5224 15.8594C17.4823 15.9079 17.4455 15.9596 17.4125 16.014C17.3994 16.0356 17.3869 16.0576 17.375 16.0801C16.9237 16.9329 16.2535 17.6577 15.4259 18.1757C14.3159 18.8702 12.9951 19.1473 11.6997 18.9573C10.4042 18.7673 9.21861 18.1227 8.35485 17.1387C7.49109 16.1547 7.00554 14.8955 6.98503 13.5864C6.96452 12.2772 7.41039 11.0035 8.24291 9.99293C9.07542 8.98238 10.2403 8.30093 11.5291 8.07047C12.818 7.84001 14.1468 8.07556 15.278 8.73499C15.4839 8.85508 15.6809 8.9878 15.868 9.13202L13.8536 11.1464C13.5386 11.4614 13.7617 12 14.2071 12H20V6.20711Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M8.70711 7.29289C8.31658 6.90237 7.68342 6.90237 7.29289 7.29289C6.90237 7.68342 6.90237 8.31658 7.29289 8.70711L11.5858 13L7.29289 17.2929C6.90237 17.6834 6.90237 18.3166 7.29289 18.7071C7.68342 19.0976 8.31658 19.0976 8.70711 18.7071L13 14.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L14.4142 13L18.7071 8.70711C19.0976 8.31658 19.0976 7.68342 18.7071 7.29289C18.3166 6.90237 17.6834 6.90237 17.2929 7.29289L13 11.5858L8.70711 7.29289Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7.486 11.143a1 1 0 011.029 0L12 13.232V1.024A.261.261 0 0011.996 1H4.024A.287.287 0 004 1.003V13.234l3.486-2.091zM4 14.4L3 15V1c0-1 1-1 1-1h8c1 0 1 1 1 1v14l-1-.6L8 12l-4 2.4zm8.054-13.396h.002zM4.004.946V.945z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 2C4.44772 2 4 2.44772 4 3V13.5858C4 14.4767 5.07714 14.9229 5.70711 14.2929L8 12L10.2929 14.2929C10.9229 14.9229 12 14.4767 12 13.5858V3C12 2.44772 11.5523 2 11 2H5ZM6 4H10V11.5L8.70711 10.2071C8.31658 9.81658 7.68342 9.81658 7.29289 10.2071L6 11.5V4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M16.2929 20.2929L13 17L9.70711 20.2929C9.07714 20.9229 8 20.4767 8 19.5858V6C8 5.44772 8.44772 5 9 5H17C17.5523 5 18 5.44772 18 6V19.5858C18 20.4767 16.9229 20.9229 16.2929 20.2929ZM14.4142 15.5858C14.0391 15.2107 13.5304 15 13 15C12.4696 15 11.9609 15.2107 11.5858 15.5858L10 17.1716V7H16V17.1716L14.4142 15.5858Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 6C11.8954 6 11 6.89543 11 8V14H8L13 19L18 14H15V8C15 6.89543 14.1046 6 13 6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 5H4v2h2V5zm0 3H4v2h2V8zm1-3h2v2H7V5zm2 3H7v2h2V8zm1-3h2v2h-2V5zm2 3h-2v2h2V8z"/>\n  <path fill-rule="evenodd" d="M4 1a1 1 0 012 0h1a1 1 0 012 0h1a1 1 0 112 0h.5A2.5 2.5 0 0115 3.5v8a2.5 2.5 0 01-2.5 2.5h-9A2.5 2.5 0 011 11.5v-8A2.5 2.5 0 013.5 1H4zM2 4v7.5A1.5 1.5 0 003.5 13h9a1.5 1.5 0 001.5-1.5V4a1 1 0 00-1-1H3a1 1 0 00-1 1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 8V6H6V8H4Z"/>\n  <path d="M7 6V8H9V6H7Z"/>\n  <path d="M12 8V6H10V8H12Z"/>\n  <path d="M6 11V9H4V11H6Z"/>\n  <path d="M7 9V11H9V9H7Z"/>\n  <path d="M12 11V9H10V11H12Z"/>\n  <path fill-rule="evenodd" d="M4 1C3.44772 1 3 1.44772 3 2C1.89543 2 1 2.89543 1 4V12C1 13.1046 1.89543 14 3 14H13C14.1046 14 15 13.1046 15 12V4C15 2.89543 14.1046 2 13 2C13 1.44772 12.5523 1 12 1C11.4477 1 11 1.44772 11 2L9 2C9 1.44772 8.55228 1 8 1C7.44772 1 7 1.44772 7 2L5 2C5 1.44772 4.55228 1 4 1ZM13 5V12H3L3 5H13Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M21 9C21 7.89543 20.1046 7 19 7H18V6C18 5.44772 17.5523 5 17 5C16.4477 5 16 5.44772 16 6V7H14V6C14 5.44772 13.5523 5 13 5C12.4477 5 12 5.44772 12 6V7H10V6C10 5.44772 9.55228 5 9 5C8.44772 5 8 5.44772 8 6V7H7C5.89543 7 5 7.89543 5 9V19C5 20.1046 5.89543 21 7 21H19C20.1046 21 21 20.1046 21 19V9ZM19 18C19 18.5523 18.5523 19 18 19H8C7.44772 19 7 18.5523 7 18V11C7 10.4477 7.44772 10 8 10H18C18.5523 10 19 10.4477 19 11V18Z" />\n  <path d="M9 12H11V14H9V12ZM12 12H14V14H12V12ZM9 15H11V17H9V15ZM12 15H14V17H12V15ZM15 12H17V14H15V12ZM15 15H17V17H15V15Z" />\n</svg>\n'},function(e,t){e.exports='<svg class="ClockIcon ClockIcon--small" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="7.5" y="3" width="1" height="5.5" rx="0.5"/>\n<rect class="ClockIcon-TimeHour" x="7.5" y="7.5" width="3.5" height="1" rx="0.5"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z"/>\n<path class="ClockIcon-AlarmBell" d="M1.00001 0.99996C-0.114362 2.11433 -0.114362 3.92107 1.00001 5.03544L5.03549 0.99996C3.92112 -0.114407 2.11437 -0.114407 1.00001 0.99996Z"/>\n<path class="ClockIcon-AlarmBell" d="M15.0355 0.99996C16.1499 2.11433 16.1499 3.92107 15.0355 5.03544L11 0.99996C12.1144 -0.114407 13.9211 -0.114407 15.0355 0.99996Z"/>\n<circle class="ClockIcon-CountdownHour" cx="8" cy="8" r="3"/>\n<circle class="ClockIcon-CountdownMinute" cx="8" cy="8" r="3"/>\n</svg>'},function(e,t){e.exports='<svg class="ClockIcon ClockIcon--medium" viewBox="0 0 16 16"xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="7" y="4" width="2" height="5" rx="1" />\n<rect class="ClockIcon-TimeHour" x="7" y="7" width="4" height="2" rx="1" />\n<path fill-rule="evenodd" d="M8 13.4C10.9823 13.4 13.4 10.9823 13.4 8C13.4 5.01766 10.9823 2.6 8 2.6C5.01766 2.6 2.6 5.01766 2.6 8C2.6 10.9823 5.01766 13.4 8 13.4ZM8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z" />\n<path class="ClockIcon-AlarmBell" d="M1.00001 0.99996C-0.114362 2.11433 -0.114362 3.92107 1.00001 5.03544L5.03549 0.99996C3.92112 -0.114407 2.11437 -0.114407 1.00001 0.99996Z"/>\n<path class="ClockIcon-AlarmBell" d="M15.0355 0.99996C16.1499 2.11433 16.1499 3.92107 15.0355 5.03544L11 0.99996C12.1144 -0.114407 13.9211 -0.114407 15.0355 0.99996Z"/>\n<circle class="ClockIcon-CountdownHour" cx="8" cy="8" r="3"/>\n<circle class="ClockIcon-CountdownMinute" cx="8" cy="8" r="3"/>\n</svg>'},function(e,t){e.exports='<svg class="ClockIcon ClockIcon--large" viewBox="0 0 26 26"xmlns="http://www.w3.org/2000/svg">\n<rect class="ClockIcon-TimeMinute" x="12" y="7" width="2" height="7" rx="1"/>\n<rect class="ClockIcon-TimeHour" x="12" y="12" width="5" height="2" rx="1"/>\n<path fill-rule="evenodd" d="M13 20.3C17.0317 20.3 20.3 17.0317 20.3 13C20.3 8.96832 17.0317 5.7 13 5.7C8.96832 5.7 5.7 8.96832 5.7 13C5.7 17.0317 8.96832 20.3 13 20.3ZM13 22C17.9706 22 22 17.9706 22 13C22 8.02944 17.9706 4 13 4C8.02944 4 4 8.02944 4 13C4 17.9706 8.02944 22 13 22Z"/>\n<path class="ClockIcon-AlarmBell" d="M4.05328 3.05322C2.67257 4.43393 2.67257 6.67251 4.05328 8.05322L9.05328 3.05322C7.67257 1.67251 5.434 1.67251 4.05328 3.05322Z"/>\n<path class="ClockIcon-AlarmBell" d="M22 3.05322C23.3807 4.43393 23.3807 6.67251 22 8.05322L17 3.05322C18.3807 1.67251 20.6193 1.67251 22 3.05322Z"/>\n<circle class="ClockIcon-CountdownHour" cx="13" cy="13" r="4"/>\n<circle class="ClockIcon-CountdownMinute" cx="13" cy="13" r="4"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 3.869c0-.557-.461-.869-1.111-.869h-14.889l3.282 3.2 9.35-1.6-7.709 4v6.4l10.667-10.4c.186-.178.41-.473.41-.731z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M22 8.086c0-.696-.547-1.086-1.319-1.086h-17.681l3.897 4 11.103-2-9.154 5v8l12.667-13c.221-.223.487-.591.487-.914z"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 2h4a4 4 0 014 4v4a4 4 0 01-4 4H6a4 4 0 01-4-4V6a4 4 0 014-4zM1 6a5 5 0 015-5h4a5 5 0 015 5v4a5 5 0 01-5 5H6a5 5 0 01-5-5V6zm6-2h1v4h2v1H7V4z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 5.5C7 5.22386 7.22386 5 7.5 5H8.5C8.77614 5 9 5.22386 9 5.5V8.70711L10.2289 9.70014C10.4366 9.86798 10.4758 10.1694 10.3179 10.3847L9.80837 11.0795C9.6402 11.3088 9.31488 11.3519 9.09282 11.1743L7 9.5V5.5Z"/>\n  <path fill-rule="evenodd" d="M1 8C1 6.13872 1 5.20808 1.24472 4.45492C1.73931 2.93273 2.93273 1.73931 4.45492 1.24472C5.20808 1 6.13872 1 8 1C9.86128 1 10.7919 1 11.5451 1.24472C13.0673 1.73931 14.2607 2.93273 14.7553 4.45492C15 5.20808 15 6.13872 15 8C15 9.86128 15 10.7919 14.7553 11.5451C14.2607 13.0673 13.0673 14.2607 11.5451 14.7553C10.7919 15 9.86128 15 8 15C6.13872 15 5.20808 15 4.45492 14.7553C2.93273 14.2607 1.73931 13.0673 1.24472 11.5451C1 10.7919 1 9.86128 1 8ZM8 13C5.98305 13 5.44891 12.9753 5.07295 12.8532C4.15964 12.5564 3.44358 11.8404 3.14683 10.9271C3.02467 10.5511 3 10.0169 3 8C3 5.98305 3.02467 5.44891 3.14683 5.07295C3.44358 4.15964 4.15964 3.44358 5.07295 3.14683C5.44891 3.02467 5.98305 3 8 3C10.0169 3 10.5511 3.02467 10.9271 3.14683C11.8404 3.44358 12.5564 4.15964 12.8532 5.07295C12.9753 5.44891 13 5.98305 13 8C13 10.0169 12.9753 10.5511 12.8532 10.9271C12.5564 11.8404 11.8404 12.5564 10.9271 12.8532C10.5511 12.9753 10.0169 13 8 13Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<rect x="12" y="8.5" width="2" height="5" rx="1" ry="1"\n\t  style="transform-origin: center; transform: var(--timeHourRotation, rotate(130deg))"\n\t/>\n\t<rect x="12" y="8" width="2" height="6" rx="1" ry="1"\n\t  style="transform-origin: center; transform: var(--timeMinuteRotation, rotate(0deg))"\n\t/>\n\t<path fill-rule="evenodd" d="M5 13C5 11.1401 5 10.2101 5.20445 9.44709C5.75925 7.37653 7.37653 5.75925 9.44709 5.20445C10.2101 5 11.1401 5 13 5C14.8599 5 15.7899 5 16.5529 5.20445C18.6235 5.75925 20.2408 7.37653 20.7956 9.44709C21 10.2101 21 11.1401 21 13C21 14.8599 21 15.7899 20.7956 16.5529C20.2408 18.6235 18.6235 20.2408 16.5529 20.7956C15.7899 21 14.8599 21 13 21C11.1401 21 10.2101 21 9.44709 20.7956C7.37653 20.2408 5.75925 18.6235 5.20445 16.5529C5 15.7899 5 14.8599 5 13ZM13 19C11.0113 19 10.4093 18.9828 9.96472 18.8637C8.58436 18.4938 7.50617 17.4156 7.1363 16.0353C7.01718 15.5907 7 14.9887 7 13C7 11.0113 7.01718 10.4093 7.1363 9.96472C7.50617 8.58436 8.58436 7.50617 9.96472 7.1363C10.4093 7.01718 11.0113 7 13 7C14.9887 7 15.5907 7.01718 16.0353 7.1363C17.4156 7.50617 18.4938 8.58436 18.8637 9.96472C18.9828 10.4093 19 11.0113 19 13C19 14.9887 18.9828 15.5907 18.8637 16.0353C18.4938 17.4156 17.4156 18.4938 16.0353 18.8637C15.5907 18.9828 14.9887 19 13 19Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 3h12a1 1 0 01.96.721L8 7.433 1.04 3.721A1 1 0 012 3zM1 4.833V12a1 1 0 001 1h12a1 1 0 001-1V4.833L8.235 8.441 8 8.567l-.235-.126L1 4.833zM0 4a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V4z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1.64645 2.64645C1.84171 2.45118 2.15829 2.45118 2.35355 2.64645L7.64645 7.93934C7.84171 8.1346 8.15829 8.1346 8.35355 7.93934L13.6464 2.64645C13.8417 2.45118 14.1583 2.45118 14.3536 2.64645C14.5488 2.84171 14.5488 3.15829 14.3536 3.35355L9.06066 8.64645C8.47487 9.23223 7.52513 9.23223 6.93934 8.64645L1.64645 3.35355C1.45118 3.15829 1.45118 2.84171 1.64645 2.64645Z"/>\n  <path fill-rule="evenodd" d="M14 4H2V11H14V4ZM2 2C0.895431 2 0 2.89543 0 4V11C0 12.1046 0.895431 13 2 13H14C15.1046 13 16 12.1046 16 11V4C16 2.89543 15.1046 2 14 2H2Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="m6.64645 7.64645c.19526-.19527.51184-.19527.7071 0l5.29285 5.29285c.1953.1953.5119.1953.7072 0l5.2928-5.29285c.1953-.19527.5119-.19527.7072 0 .1952.19526.1952.51184 0 .7071l-5.2929 5.29285c-.5858.5858-1.5356.5858-2.1214 0l-5.29285-5.29285c-.19527-.19526-.19527-.51184 0-.7071z"/><path d="m19 9h-12v7h12zm-12-2c-1.10457 0-2 .89543-2 2v7c0 1.1046.89543 2 2 2h12c1.1046 0 2-.8954 2-2v-7c0-1.10457-.8954-2-2-2z"/></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.414.5c-.398 0-.779.158-1.061.439l-1.061 1.061 2.707 2.707 1-1c.32-.32.5-.754.5-1.207 0-.453-.18-.887-.5-1.207l-.354-.354c-.281-.281-.663-.439-1.061-.439h-.172zm-.353 1.146c.094-.094.221-.146.353-.146h.172c.133 0 .26.053.353.146l.354.354c.133.133.207.312.207.5s-.075.367-.207.5l-.293.293-1.293-1.293.354-.354zM10.5 2.793l-5.5 5.5v2.707h2.707l5.5-5.5-2.707-2.707zm-4.5 7.207v-1.293l4.5-4.5 1.293 1.293-4.5 4.5h-1.293z"/><path d="M4 3h4l-1 1h-3c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h5c.552 0 1-.448 1-1v-1l1-1v2c0 1.105-.895 2-2 2h-5c-1.105 0-2-.895-2-2v-7c0-1 .895-2 2-2z"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.05 1.28a.96.96 0 00-1.35 0l-.68.67 2.03 2.01.67-.67a.95.95 0 000-1.34l-.67-.67zM13.37 4.63l-2.02-2.01L5 8.99V11h2.02l6.35-6.37z"/>\n  <path fill-rule="evenodd" d="M4 2a3 3 0 00-3 3v7a3 3 0 003 3h5a3 3 0 003-3V8l-1 1-1 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5a1 1 0 011-1h4l1-1 .87-.87A3 3 0 009 2H4z"/>\n</svg>'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9 16h2.53l7-7.03-2.54-2.4L9 13.46V16zm11.8-9.33a.64.64 0 000-.94L19.27 4.2a.64.64 0 00-.94 0l-1.2 1.2 2.54 2.53 1.13-1.26z"/>\n  <path fill-rule="evenodd" d="M8 6a3 3 0 00-3 3v8a3 3 0 003 3h6a3 3 0 003-3v-4l-2 2v2a1 1 0 01-1 1H8a1 1 0 01-1-1V9a1 1 0 011-1h4l1-1 1-1H8z"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6.32251 9.83154L7.19854 9.13994C7.79551 8.66865 8.18182 7.93438 8.18182 7.15653V6.41832C8.18182 5.10311 7.23661 4.06267 6.1298 4.00275C4.89183 3.94068 3.81818 4.95267 3.81818 6.23377V7.15653C3.81818 7.93438 4.20449 8.66865 4.80146 9.13994L5.67749 9.83154L4.89418 10.6266L2.62145 12.9335C2.38143 13.1772 2.24309 13.3243 2.14494 13.4903C2.07175 13.6141 2.0124 13.7656 2.00172 14H9.98007C9.97658 13.9875 9.97247 13.9736 9.96766 13.9582C9.93608 13.8575 9.88589 13.7325 9.81884 13.5964C9.67866 13.3118 9.50782 13.0648 9.37855 12.9335L7.10582 10.6266L6.32251 9.83154ZM6.18182 3.0041C7.90909 3.09638 9.18182 4.66507 9.18182 6.41832V7.15653C9.18182 7.98554 8.87609 8.76283 8.37907 9.37224C8.21222 9.57682 8.02382 9.76248 7.81818 9.92482L8.52329 10.6405L10.0909 12.2317C10.5455 12.6931 11 13.6159 11 14.0772C11 14.6309 10.6364 15 10.0909 15H1.90909C1.36364 15 1 14.6309 1 14.0772C1 13.1545 1.45455 12.6931 1.90909 12.2317L3.47671 10.6405L4.18182 9.92482C3.97618 9.76248 3.78778 9.57682 3.62093 9.37224C3.12391 8.76283 2.81818 7.98554 2.81818 7.15653V6.23377C2.81818 4.38824 4.36364 2.91183 6.18182 3.0041Z"/>\n  <path opacity="0.5" d="M10.1383 9.15699C10.4859 8.42321 10.6899 7.6266 10.6899 6.82998V6.11244C10.6899 4.5643 10.0335 3.16461 9 2.22087C9.42021 1.42507 9.86201 1 11.1209 1C12.4139 1 13.2759 2.166 13.2759 3.2423V4.13922C13.2759 5.03612 12.845 5.48456 12.414 5.93301L14.138 7.72688C14.569 8.17534 15 8.6238 15 9.07226C15 9.52072 14.569 9.96918 14.138 10H10.9485L10.1383 9.15699Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.4243 7.42417L14.4243 3.42417C14.6586 3.18985 14.6586 2.80995 14.4243 2.57564C14.1899 2.34132 13.8101 2.34132 13.5757 2.57564L10 6.15137L8.42426 4.57564C8.18995 4.34132 7.81005 4.34132 7.57574 4.57564C7.34142 4.80995 7.34142 5.18985 7.57574 5.42417L9.57574 7.42417L10 7.84843L10.4243 7.42417ZM3 5.9999V3.9999H5V5.9999H3ZM2 3.4999C2 3.22376 2.22386 2.9999 2.5 2.9999H5.5C5.77614 2.9999 6 3.22376 6 3.4999V6.4999C6 6.77604 5.77614 6.9999 5.5 6.9999H2.5C2.22386 6.9999 2 6.77604 2 6.4999V3.4999ZM3 11.9999V9.9999H5V11.9999H3ZM2 9.4999C2 9.22376 2.22386 8.9999 2.5 8.9999H5.5C5.77614 8.9999 6 9.22376 6 9.4999V12.4999C6 12.776 5.77614 12.9999 5.5 12.9999H2.5C2.22386 12.9999 2 12.776 2 12.4999V9.4999ZM9 9.9999V11.9999H11V9.9999H9ZM8.5 8.9999C8.22386 8.9999 8 9.22376 8 9.4999V12.4999C8 12.776 8.22386 12.9999 8.5 12.9999H11.5C11.7761 12.9999 12 12.776 12 12.4999V9.4999C12 9.22376 11.7761 8.9999 11.5 8.9999H8.5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 1C1.44772 1 1 1.44772 1 2V6C1 6.55228 1.44772 7 2 7H6C6.55228 7 7 6.55228 7 6V2C7 1.44772 6.55228 1 6 1H2ZM3 3V5H5V3H3Z"/>\n  <path fill-rule="evenodd" d="M2 9C1.44772 9 1 9.44772 1 10V14C1 14.5523 1.44772 15 2 15H6C6.55228 15 7 14.5523 7 14V10C7 9.44772 6.55228 9 6 9H2ZM3 11V13H5V11H3Z"/>\n  <path fill-rule="evenodd" d="M9 10C9 9.44772 9.44772 9 10 9H14C14.5523 9 15 9.44772 15 10V14C15 14.5523 14.5523 15 14 15H10C9.44772 15 9 14.5523 9 14V10ZM11 13V11H13V13H11Z"/>\n  <path d="M11.0009 6.99992H11.0559C11.1963 6.9923 11.3336 6.95513 11.4587 6.89086C11.5838 6.82659 11.6939 6.73665 11.7819 6.62692L15.7819 1.62692C15.9479 1.41978 16.0249 1.15518 15.9958 0.891317C15.9667 0.627453 15.834 0.385944 15.6269 0.219918C15.5243 0.137711 15.4066 0.0765093 15.2804 0.0398084C15.1542 0.0031075 15.022 -0.00837419 14.8913 0.00601889C14.6274 0.035087 14.3859 0.167784 14.2199 0.374918L10.9179 4.49992L9.70791 3.28992C9.61487 3.19707 9.50445 3.12346 9.38296 3.07329C9.26147 3.02312 9.13129 2.99737 8.99985 2.99751C8.73439 2.99779 8.47992 3.10351 8.29241 3.29142C8.1049 3.47932 7.99972 3.73402 8 3.99948C8.00028 4.26494 8.106 4.51941 8.29391 4.70692L10.2939 6.70692C10.4814 6.89447 10.7357 6.99986 11.0009 6.99992Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C6.44772 6 6 6.44772 6 7V11C6 11.5523 6.44772 12 7 12H11C11.5523 12 12 11.5523 12 11V7C12 6.44772 11.5523 6 11 6H7ZM8 8V10H10V8H8Z"/>\n  <path fill-rule="evenodd" d="M7 14C6.44772 14 6 14.4477 6 15V19C6 19.5523 6.44772 20 7 20H11C11.5523 20 12 19.5523 12 19V15C12 14.4477 11.5523 14 11 14H7ZM8 16V18H10V16H8Z"/>\n  <path fill-rule="evenodd" d="M14 15C14 14.4477 14.4477 14 15 14H19C19.5523 14 20 14.4477 20 15V19C20 19.5523 19.5523 20 19 20H15C14.4477 20 14 19.5523 14 19V15ZM16 18V16H18V18H16Z"/>\n  <path d="M16.0009 11.9999H16.0559C16.1963 11.9923 16.3336 11.9551 16.4587 11.8909C16.5838 11.8266 16.6939 11.7366 16.7819 11.6269L20.7819 6.62692C20.9479 6.41978 21.0249 6.15518 20.9958 5.89132C20.9667 5.62745 20.834 5.38594 20.6269 5.21992C20.5243 5.13771 20.4066 5.07651 20.2804 5.03981C20.1542 5.00311 20.022 4.99163 19.8913 5.00602C19.6274 5.03509 19.3859 5.16778 19.2199 5.37492L15.9179 9.49992L14.7079 8.28992C14.6149 8.19707 14.5045 8.12346 14.383 8.07329C14.2615 8.02312 14.1313 7.99737 13.9998 7.99751C13.7344 7.99779 13.4799 8.10351 13.2924 8.29142C13.1049 8.47932 12.9997 8.73402 13 8.99948C13.0003 9.26494 13.106 9.51941 13.2939 9.70692L15.2939 11.7069C15.4814 11.8945 15.7357 11.9999 16.0009 11.9999Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m9 3.5c0-.27614-.22386-.5-.5-.5h-8c-.276142 0-.5.22386-.5.5s.223858.5.5.5h8c.27614 0 .5-.22386.5-.5z"/><path d="m5 5c-.55228 0-1 .44772-1 1v6c0 .5523.44771 1 1 1h10c.5523 0 1-.4477 1-1v-6c0-.55228-.4477-1-1-1zm5 4.29289-3.29289-3.29289h6.58579zm-5-3.29289h.29289l4.70711 4.7071 4.7071-4.7071h.2929v6h-10z"/><path d="m0 5.5c0-.27614.223858-.5.5-.5h2c.27614 0 .5.22386.5.5s-.22386.5-.5.5h-2c-.276142 0-.5-.22386-.5-.5z"/><path d="m3 7.5c0-.27614-.22386-.5-.5-.5h-2c-.276142 0-.5.22386-.5.5s.223858.5.5.5h2c.27614 0 .5-.22386.5-.5z"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2 4.5a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5zm2 3a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zM6.5 10a.5.5 0 000 1h3a.5.5 0 000-1h-3z"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1 3.5a.5.5 0 01.5-.5h13a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-13a.5.5 0 01-.5-.5v-1zm2 4a.5.5 0 01.5-.5h9a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-1zM5.5 11a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-5z"/>\n</svg>'},function(e,t){e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.5 6a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h17a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-17zm2 4a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h13a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-13zM8 14.5a.5.5 0 01.5-.5h9a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-9a.5.5 0 01-.5-.5v-1zm2.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h5a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-5z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2h14.546c.359 0 .715.09.992.31.292.231.461.579.461.991 0 .25-.098.471-.189.625-.095.162-.213.304-.319.411l-10.492 10.664v-8l-5-5zm2.5.95l2.5 2.55 7-1.5-6 3.5.003 5 8.863-8.848.176-.225.054-.125c0-.117-.038-.183-.101-.232-.077-.061-.223-.119-.45-.119h-12.046z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 3.869c0-.557-.461-.869-1.111-.869h-14.889l3.282 3.2 9.35-1.6-7.709 4v6.4l10.667-10.4c.186-.178.41-.473.41-.731z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M22 8.086c0-.696-.547-1.086-1.319-1.086h-17.681l3.897 4 11.103-2-9.154 5v8l12.667-13c.221-.223.487-.591.487-.914z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.915 6.939h3.389l-.001-3.389c0-.315-.381-.473-.604-.25l-1.164 1.164c-.905-.905-2.155-1.464-3.536-1.464-2.419 0-4.437 1.718-4.9 4h1.026c.444-1.725 2.01-3 3.874-3 1.105 0 2.105.448 2.828 1.172l-1.164 1.164c-.223.223-.065.603.25.604zm-3.829 2.122h-3.389v3.389c0 .315.381.473.603.25l1.164-1.164c.905.905 2.155 1.464 3.536 1.464 2.419 0 4.437-1.718 4.9-4h-1.026c-.444 1.725-2.01 3-3.874 3-1.105 0-2.105-.448-2.828-1.171l1.164-1.164c.223-.223.065-.603-.25-.603z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10.065 7.082l4.292.227-.227-4.292c-.021-.399-.514-.624-.781-.357l-1.118 1.118c-1.092-1.088-2.601-1.762-4.269-1.762-3.038 0-5.551 2.235-5.969 5.143h2.032c.395-1.792 2.001-3.143 3.938-3.143 1.118 0 2.126.45 2.854 1.176l-1.109 1.109c-.267.267-.042.76.357.781zM5.922 8.949l-4.292-.227.227 4.292c.021.399.514.624.781.357l1.088-1.088c1.089 1.071 2.586 1.732 4.238 1.732 3.038 0 5.551-2.235 5.969-5.143h-2.032c-.395 1.791-2.001 3.143-3.938 3.143-1.103 0-2.098-.438-2.824-1.146l1.14-1.14c.267-.267.042-.76-.357-.781z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.929 12h.071v-4.793c0-.445-.539-.669-.854-.354l-1.197 1.197c-1.267-1.267-3.017-2.05-4.95-2.05-3.526 0-6.444 2.608-6.929 6h2.029c.463-2.282 2.481-4 4.9-4 1.381 0 2.631.56 3.535 1.464l-1.682 1.682c-.315.315-.092.854.354.854h4.7219999999999995zm-9.136 2h-4.793v4.793c0 .445.539.669.854.354l1.197-1.197c1.267 1.267 3.017 2.05 4.95 2.05 3.526 0 6.444-2.608 6.929-6h-2.029c-.463 2.282-2.481 4-4.9 4-1.381 0-2.631-.56-3.536-1.465l1.682-1.682c.315-.315.092-.854-.354-.854z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 2h10v1H3V2zM2 2a1 1 0 011-1h10a1 1 0 011 1v2h-1.09l-.73 7.6c-.08.8-.66 1.4-1.36 1.4H5.18c-.7 0-1.28-.6-1.36-1.4L3.09 4H2V2zm2 2l.72 7.49c.03.26.22.46.46.46h5.64c.24 0 .43-.2.46-.46L12 4H4zm6.5 1.86l-.61-.6-1.82 1.8-1.82-1.8-.6.6 1.81 1.8-1.82 1.79.6.6 1.83-1.8 1.82 1.8.6-.6-1.82-1.8 1.82-1.8z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M13 3v2H3V3h10zM2.12 6H2a1 1 0 01-1-1V3c0-1.1.78-2 1.75-2h10.5c.97 0 1.75.9 1.75 2v2a1 1 0 01-1 1h-.12l-.74 7.3c0 .94-.76 1.7-1.71 1.7H4.57a1.7 1.7 0 01-1.71-1.7L2.12 6zm1.72 0l.73 6.46c0 .47.39.85.86.85h5.14c.47 0 .86-.38.86-.85L12.16 6H3.84zm6.65 1.86l-.6-.6-1.82 1.8-1.82-1.8-.6.6 1.81 1.8-1.82 1.79.6.6 1.83-1.8 1.82 1.8.6-.6-1.82-1.8 1.82-1.8z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path fill-rule="evenodd" d="M19 9V7H7v2h12zm2 0a1 1 0 01-1 1h-.1l-.9 9a2 2 0 01-2 2H9a2 2 0 01-2-2l-.9-9H6a1 1 0 01-1-1V7c0-1.1.9-2 2-2h12a2 2 0 012 2v2zM8.11 10L9 18a1 1 0 001 1h6a1 1 0 001-1l.89-8H8.1zm7.8 2.38l-.71-.7-2.12 2.11-2.12-2.12-.71.7 2.12 2.13-2.12 2.12.7.7 2.13-2.11 2.12 2.12.7-.7-2.12-2.13 2.13-2.12z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.5h.5v-2.754c0-.13.108-.246.255-.246.08 0 .149.034.196.088l.038.043.043.031 3.922 3.987c.191.195.191.507 0 .701l-3.922 3.987-.043.031-.038.043c-.047.054-.116.088-.196.088-.147 0-.255-.116-.255-.246v-2.754h-4.5c-.276 0-.5-.224-.5-.5v-2c0-.276.224-.5.5-.5h4z" stroke="#3B3B3B"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.006 3.839l-.006-.093c0-.412.338-.746.755-.746.229 0 .434.101.573.26l.052.044 3.93 3.995c.383.389.383 1.013 0 1.403l-3.93 3.995-.052.044c-.138.159-.344.26-.573.26-.417 0-.755-.334-.755-.746l.006-.093-.006.006v-8.333l.006.006z"/><rect x="3" y="6" width="8" height="4" rx="1"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M12.007 8.007l-.007-.112c0-.494.394-.895.881-.895.267 0 .507.121.668.312l.061.053 4.729 4.944c.37.387.37.996 0 1.382l-4.729 4.944-.061.053c-.162.191-.401.311-.668.311-.487 0-.881-.401-.881-.895l.007-.112-.007.007v-10l.007.007z"/><rect x="7" y="11" width="8" height="4" rx="1"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 6.001l.001.499h.499c3.097 0 5.5 2.018 5.5 5 0 .08-.017.213-.051.363-1.023-1.43-2.698-2.363-4.592-2.363h-1.357v2.754c0 .13-.108.246-.255.246-.08 0-.149-.034-.196-.088l-.038-.043-.043-.031-3.922-3.987c-.191-.195-.191-.507 0-.701l3.922-3.987.043-.031.038-.043c.047-.054.116-.088.196-.088.084 0 .135.028.168.063s.081.114.081.276v.001l.006 2.161z" stroke="#3B3B3B"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.994 3.839l.006-.093c0-.412-.338-.746-.755-.746-.229 0-.434.101-.573.26l-.052.044-3.93 3.995c-.383.389-.383 1.013 0 1.403l3.93 3.995.052.044c.138.159.344.26.573.26.417 0 .755-.334.755-.746l-.006-.094.006.006v-8.333l-.006.006zM14 11.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.993 8.007l.007-.112c0-.494-.395-.895-.881-.895-.267 0-.507.121-.668.312l-.061.053-4.729 4.944c-.37.387-.37.996 0 1.382l4.729 4.944.061.053c.161.191.401.311.668.311.486 0 .881-.401.881-.895l-.007-.112.007.007v-10l-.007.007z"/><path d="M20 16.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 6.001l.001.499h.499c3.097 0 5.5 2.018 5.5 5 0 .08-.017.213-.051.363-1.023-1.43-2.698-2.363-4.592-2.363h-1.357v2.754c0 .13-.108.246-.255.246-.08 0-.149-.034-.196-.088l-.038-.043-.043-.031-3.922-3.987c-.191-.195-.191-.507 0-.701l3.922-3.987.043-.031.038-.043c.047-.054.116-.088.196-.088.084 0 .135.028.168.063s.081.114.081.276v.001l.006 2.161z" stroke="#3B3B3B"/><path d="M1.287 7.299l3.93-3.995.052-.044c.138-.159.344-.26.573-.26.417 0 .749.304.749.839v.569l-1 1v-1.059l-3.592 3.651 3.597 3.657v-.657l-.001-.404 1.001 1.001v.657c0 .412-.338.746-.755.746-.229 0-.434-.101-.573-.26l-.052-.044-3.93-3.995c-.383-.389-.383-1.013 0-1.403z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.203 3.914c0 .192-.058.37-.158.516l-.045.07-2.833 2.756c-.395.411-.395 1.078 0 1.489l2.833 2.756-.001.007c.182.164.297.406.297.676 0 .494-.385.895-.861.895-.261 0-.495-.121-.653-.312l-.06-.053-3.157-3.254c-.754-.815-.754-2.103 0-2.918l3.064-3.157.06-.053c.158-.191.392-.312.653-.312.475 0 .861.401.861.895zM15 11.5c0-3.314-2.686-5.5-6-5.5h-1v4h1.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379zM9.994 3.839l.006-.093c0-.412-.338-.746-.755-.746-.229 0-.434.101-.573.26l-.052.044-3.93 3.995c-.383.389-.383 1.013 0 1.403l3.93 3.995.052.044c.138.159.344.26.573.26.417 0 .755-.334.755-.746l-.006-.094.006.006v-8.333l-.006.006z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 7.895c0 .192-.058.37-.158.516l-.045.07-3.631 3.775c-.395.411-.395 1.078 0 1.489l3.538 3.678-.001.007c.182.164.297.406.297.676 0 .494-.385.895-.861.895-.261 0-.495-.121-.653-.311l-.06-.053-3.862-4.176c-.754-.815-.754-2.103 0-2.918l3.862-4.176.06-.053c.158-.191.392-.312.653-.312.475 0 .861.401.861.895zm3.119 11.105c.486 0 .881-.401.881-.895v-3.105h.857c2.028 0 3.782 1.174 4.619 2.879.312-.169.524-1 .524-1.379 0-3.314-2.686-5.5-6-5.5v-3.105c0-.494-.395-.895-.881-.895-.267 0-.507.121-.668.312l-.061.053-4.729 4.944c-.37.387-.37.996 0 1.382l4.729 4.944.061.053c.161.191.401.311.668.311z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.256 13h-2.256c-1.105 0-2-1-2-2v-7c0-1.105.895-2 2-2h5c1.105 0 2 .895 2 2v3.027c-.164-.018-.331-.027-.5-.027-.169 0-.336.009-.5.027v-3.027c0-.552-.448-1-1-1h-5c-.5 0-1 .5-1 1v7c0 .5.5 1 1 1h2.028c.038.347.116.682.229 1zm-2.256-9h5v1h-5v-1zm0 2h5v1h-5v-1zm2 2h-2v1h2v-1zm8 3.5c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5zm-6 0c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 7.091v-3.646c0-.544-.448-.985-1-.985h-6c-.5 0-1 .493-1 .985v8.093c0 .493.5.985 1 .985h2.5c.002.512.074 1.008.207 1.478h-3.207c-1.105 0-2-.882-2-1.97v-9.078c0-1.088.895-1.97 2-1.97h7c1.105 0 2 .882 2 1.97v4.048l-.054.018-.446-.018c-.341 0-.676.031-1 .091zM5 4h5v1h-5v-1zM10 6h-5v1h5v-1zM5 8h3v1h-3v-1z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 12.5c0 1.933-1.567 3.5-3.5 3.5s-3.5-1.567-3.5-3.5 1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5zm-6 0c0-.276.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5z"/></svg>'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M5 6c0-1.1.9-2 2-2h10a2 2 0 012 2v7.02a6.62 6.62 0 00-2 .15V6H7v12h5.17a6.52 6.52 0 00-.15 2H7a2 2 0 01-2-2V6zm4 3h6v1H9V9zm0 2h6v1H9v-1zm3 2H9v1h3v-1z"/>\n  <path fill-rule="evenodd" d="M23 19.5a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm-2.5-1h-4a1 1 0 100 2h4a1 1 0 100-2z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1v1c0 .552.448 1 1 1v6c0 .552.448 1 1 1h2c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1h-2v-3h2c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1h-2v-2c.552 0 1-.448 1-1v-1zm-1 0h-1v1h1v-1zm4 4h-1v1h1v-1zm-1 4h1v1h-1v-1z"/><path d="M7 4.5c0-.276.224-.5.5-.5h6c.276 0 .5.224.5.5s-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5zM14 8.5c0-.276-.224-.5-.5-.5h-2c-.276 0-.5.224-.5.5s.224.5.5.5h2c.276 0 .5-.224.5-.5zM11 12.5c0-.276.224-.5.5-.5h2c.276 0 .5.224.5.5s-.224.5-.5.5h-2c-.276 0-.5-.224-.5-.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6c1.105 0 2 .895 2 2 0 .932-.637 1.714-1.499 1.937l-.001 2.563h1.563c.222-.863 1.005-1.5 1.937-1.5 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.714-.637-1.937-1.499l-1.564-.001v3.006l.008.111c.058.497.48.883.993.883l.563-.001c.222-.862 1.005-1.499 1.937-1.499 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.715-.637-1.937-1.5h-.563c-1.105 0-2-.895-2-2v-6.563c-.863-.222-1.5-1.005-1.5-1.937 0-1.105.895-2 2-2zm4 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm7.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-3c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h3zm-7.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm7.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-3c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h3zm-11.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm11.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6c1.105 0 2 .895 2 2 0 .932-.637 1.714-1.499 1.937l-.001 2.563h1.563c.222-.863 1.005-1.5 1.937-1.5 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.714-.637-1.937-1.499l-1.564-.001v3.006l.008.111c.058.497.48.883.993.883l.563-.001c.222-.862 1.005-1.499 1.937-1.499 1.105 0 2 .895 2 2s-.895 2-2 2c-.932 0-1.715-.637-1.937-1.5h-.563c-1.105 0-2-.895-2-2v-6.563c-.863-.222-1.5-1.005-1.5-1.937 0-1.105.895-2 2-2zm4 11c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm8.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h4zm-8.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm8.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-4c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h4zm-12.5-5c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm12.5 0c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-8c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h8z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4c0-.552.448-1 1-1h1c.552 0 1 .448 1 1v1c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1v-1zm1 0h1v1h-1v-1zM3 8c0-.552.448-1 1-1h1c.552 0 1 .448 1 1v1c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1v-1zm1 0h1v1h-1v-1zM6 12c0-.552-.448-1-1-1h-1c-.552 0-1 .448-1 1v1c0 .552.448 1 1 1h1c.552 0 1-.448 1-1v-1zm-1 0h-1v1h1v-1z"/><path d="M13 4.5c0-.276-.224-.5-.5-.5h-5c-.276 0-.5.224-.5.5s.224.5.5.5h5c.276 0 .5-.224.5-.5zM7 8.5c0-.276.224-.5.5-.5h5c.276 0 .5.224.5.5s-.224.5-.5.5h-5c-.276 0-.5-.224-.5-.5zM13 12.5c0-.276-.224-.5-.5-.5h-5c-.276 0-.5.224-.5.5s.224.5.5.5h5c.276 0 .5-.224.5-.5z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm10.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-6c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h6zm-10.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 16c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1zm0-6c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm11.5 1c.276 0 .5.224.5.5v1c0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5v-1c0-.276.224-.5.5-.5h7zm-11.5 0c-.552 0-1 .448-1 1s.448 1 1 1 1-.448 1-1-.448-1-1-1z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="m7.29386.706223c.39053-.390524 1.02175-.390524 1.41228 0l4.70996 4.709977c.3751.37507.5839.88188.5839 1.41231v5.17159c0 .2652-.1054.5196-.2929.7071s-.4419.2929-.7071.2929h-10c-.26522 0-.51957-.1054-.70711-.2929-.18753-.1875-.29289-.4419-.29289-.7071v-5.17159c0-.53043.20882-1.03724.58389-1.41231zm-2.7332 4.147417 3.43934-3.43934 3.4393 3.43934-3.08575 3.08579c-.19526.19526-.51184.19526-.7071 0zm-.70711.70711-.56255.56255c-.18653.18653-.291.43857-.291.70521v5.17159h10v-5.17159c0-.26664-.1045-.51868-.291-.7052l-.5626-.56256-3.08574 3.08578c-.58579.58579-1.53553.58579-2.12132 0z" fill-rule="evenodd"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.293 7.293l6-6c.391-.391 1.024-.391 1.414 0l6 6c.188.188.293.442.293.707v6c0 .552-.448 1-1 1h-12c-.552 0-1-.448-1-1v-6c0-.265.105-.52.293-.707zm1.707 5.707v-4.586l.811-.811 4.189 4.189 4.189-4.189.811.811v4.586h-10zm8.482-6.104l-3.482-3.482-3.482 3.482 3.482 3.482 3.482-3.482z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.414 5c-.781-.781-2.047-.781-2.828 0l-6 6c-.375.375-.586.884-.586 1.414v6.586c0 1.105.895 2 2 2h12c1.105 0 2-.895 2-2v-6.586c0-.53-.211-1.039-.586-1.414l-6-6zm-6.354 6.354l4.939-4.939 4.939 4.939-4.939 4.939-4.939-4.939zm-.707.707l-.354.354v6.586h12v-6.586l-.354-.354-5.646 5.646-5.646-5.646z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 5c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14 11v-5c-.351 0-.687-.06-1-.171v5.171h-10v-6h.293l4.707 4.707 4.262-4.262c-.498-.355-.883-.858-1.091-1.445h-8.171c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1h10c.552 0 1-.448 1-1zm-6-2.707l3.293-3.293h-6.586l3.293 3.293z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 5c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM15 12v-5.126c-.32.082-.655.126-1 .126s-.68-.044-1-.126v4.126h-10v-6h.793l4.207 4.207 3.277-3.277c-.245-.228-.462-.487-.644-.77l-2.633 2.633-2.793-2.793h5.328c-.34-.588-.535-1.271-.535-2h-8c-.552 0-1 .448-1 1v8c0 .552.448 1 1 1h12c.552 0 1-.448 1-1z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.5 10c1.381 0 2.5-1.119 2.5-2.5s-1.119-2.5-2.5-2.5-2.5 1.119-2.5 2.5 1.119 2.5 2.5 2.5zm-14.5-2h10.027c.081.734.339 1.416.73 2h-.051l-4.354 4.354-.354.354-.354-.354-4.353-4.354h-1.293v7h12v-5.758c.584.391 1.266.649 2 .73v5.027c0 1.105-.895 2-2 2h-12c-1.105 0-2-.895-2-2v-7c0-1.105.895-2 2-2zm2.707 2l3.293 3.293 3.293-3.293h-6.586z"/></svg>'},function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6.777 16.002c-1.32-1.32-1.362-3.48-.09-4.753l5.198-5.2c.932-.932 2.488-.902 3.456.067.97.968 1.146 2.67.214 3.602l-5.1 5.1c-.594.593-1.69.428-2.307-.188s-.745-1.677-.152-2.27l4.98-4.98.644.642-4.98 4.98c-.256.255-.122.728.142.992.265.264.756.417 1.01.163l5.1-5.1c.594-.595.43-1.69-.186-2.308-.617-.616-1.567-.634-2.16-.04l-5.2 5.198c-.932.932-.902 2.487.067 3.456.968.97 2.524.998 3.456.066l3.815-3.636.57.57-3.726 3.726c-1.272 1.272-3.432 1.23-4.753-.09z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.5 1.28a1.04 1.04 0 00-1.42 0l-.7.67 2.12 2.01.7-.67c.4-.37.4-.97 0-1.34l-.7-.67zM13.79 4.63l-2.12-2.01L5 8.99V11h2.12l6.67-6.37z"/>\n  <path fill-rule="evenodd" d="M4 2a3 3 0 00-3 3v7a3 3 0 003 3h4a3 3 0 003-3v-2h-1l-1 1v1a1 1 0 01-1 1H4a1 1 0 01-1-1V5a1 1 0 011-1h3l1-1V2H4z"/>\n</svg>'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.25 21.4a6.25 6.25 0 01-4.42-10.67l4.42-4.42a4.5 4.5 0 016.36 6.37l-4.07 4.07a2.76 2.76 0 01-3.89 0 2.76 2.76 0 010-3.89l3-3a1 1 0 111.41 1.41l-2.99 3a.75.75 0 000 1.06c.29.29.77.29 1.06 0l4.06-4.06c.47-.47.73-1.1.73-1.77 0-.67-.26-1.3-.73-1.77a2.57 2.57 0 00-3.54 0l-4.41 4.42a4.25 4.25 0 106.01 6.01l4.06-4.07a1 1 0 111.41 1.41l-4.06 4.07a6.2 6.2 0 01-4.41 1.83z"/>\n</svg>'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M2.357 3.36A1.238 1.238 0 002 4.213v7.575a1.183 1.183 0 00.339.87 1.159 1.159 0 00.861.342h9.6c.317-.005.619-.134.843-.36.224-.227.352-.532.357-.852V6c0-.5-.5-1-1-1H8L6.8 3H3.2a1.214 1.214 0 00-.843.36zM3 11.823L3 11.805V4.223a.238.238 0 01.068-.159A.214.214 0 013.212 4h3.034L7.5 6h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064H3.165a.15.15 0 01-.115-.046.173.173 0 01-.05-.131z"/>\n\t<path fill-rule="evenodd" d="M3 11.822V4.223a.238.238 0 01.068-.159A.214.214 0 013.212 4h3.034L7.5 6h5.3c.11 0 .2.088.2.198v5.578a.238.238 0 01-.068.159.215.215 0 01-.144.064H3.165a.15.15 0 01-.115-.046.173.173 0 01-.05-.131z" fill-opacity=".1"/>\n\t<path d="M9.354 6.646a.5.5 0 10-.708.708L9.793 8.5H6a.5.5 0 000 1h3.793l-1.147 1.146a.5.5 0 00.708.708L11.707 9 9.354 6.646z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M8 4.958L6.8 3H3.2C2.54 3 2 3.563 2 4.25v7.5c0 .688.54 1.25 1.2 1.25h9.6c.66 0 1.2-.563 1.2-1.25V5.9c0-.688-.54-.942-1.2-.942H8zM12 9L9 6v2H5.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5H9v2l3-3z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n\t<path fill-rule="evenodd" d="M11.293 6.293l1.414 1.414a1 1 0 00.707.293H18a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h2.586a1 1 0 01.707.293zM18 13l-3-3v2h-3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5H15v2l3-3z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13 3H3v11h10V3zM2 2a1 1 0 011-1h10a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V2zm3 3h6v1H5V5zm0 3h6v1H5V8zm0 3h6v1H5v-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.154C1 1.964 1.964 1 3.154 1h9.692C14.036 1 15 1.964 15 3.154v9.692c0 1.19-.964 2.154-2.154 2.154H3.154A2.154 2.154 0 011 12.846V3.154zm2.154-1.077h9.692c.595 0 1.077.482 1.077 1.077v9.692c0 .595-.482 1.077-1.077 1.077H3.154a1.077 1.077 0 01-1.077-1.077V3.154c0-.595.482-1.077 1.077-1.077z"/>\n  <path class="small-icon-outline" d="M12.5 12.5v-1a8 8 0 00-8-8h-1v1.4h1a6.6 6.6 0 016.6 6.6v1h1.4z"/>\n  <path class="small-icon-outline" d="M6.5 11a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/>\n  <path class="small-icon-outline" d="M9.5 11.5v1H8.1v-1a3.6 3.6 0 00-3.6-3.6h-1V6.5h1a5 5 0 015 5z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M19 12C19 12.0568 18.9988 12.1133 18.9965 12.1695C20.1635 12.5803 21 13.6925 21 15C21 16.6569 19.6569 18 18 18H8C6.34315 18 5 16.6569 5 15C5 13.6462 5.89669 12.5019 7.12853 12.1285C7.50189 10.8967 8.64623 10 10 10C10.4917 10 10.9557 10.1183 11.3652 10.3279C11.9984 8.9538 13.3878 8 15 8C17.2091 8 19 9.79086 19 12Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M15.2222 7C13.3064 7 11.6041 8.03226 10.7673 9.58975C10.4836 9.53088 10.1896 9.5 9.88889 9.5C8.33443 9.5 6.94973 10.3278 6.25133 11.5896C4.93963 12.2253 4 13.5297 4 15.0833C4 17.3063 5.90238 19 8.11111 19H17.8889C20.0976 19 22 17.3063 22 15.0833C22 13.7239 21.2795 12.5539 20.221 11.8576C20.2218 11.8218 20.2222 11.7859 20.2222 11.75C20.2222 9.06683 17.9219 7 15.2222 7ZM12.3078 11.0947C12.6187 9.92977 13.7733 9 15.2222 9C16.9409 9 18.2222 10.291 18.2222 11.75C18.2222 11.9148 18.2065 12.0754 18.1766 12.231L18.0233 13.0279L18.7717 13.3419C19.5266 13.6587 20 14.3421 20 15.0833C20 16.0821 19.1166 17 17.8889 17H8.11111C6.8834 17 6 16.0821 6 15.0833C6 14.3101 6.51675 13.5977 7.32859 13.3027L7.74278 13.1522L7.91117 12.745C8.20096 12.0441 8.95509 11.5 9.88889 11.5C10.2579 11.5 10.6004 11.5855 10.8973 11.7327L11.9926 12.2759L12.3078 11.0947Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.2132 18H18.6296C20.491 18 22 16.4965 22 14.6418C22 13.2753 21.1809 12.0994 20.0051 11.5751C20.0504 11.3248 20.0741 11.0671 20.0741 10.8038C20.0741 10.0367 19.8733 9.3163 19.5212 8.69196L10.2132 18Z"/>\n  <path d="M18.3595 7.02522C17.5821 6.38468 16.586 6 15.5 6C13.3927 6 11.6237 7.44854 11.1344 9.40423C10.6465 9.14615 10.0903 9 9.5 9C8.01292 9 6.74245 9.92742 6.23543 11.2354C4.92742 11.7425 4 13.0129 4 14.5C4 16.395 5.50607 17.9383 7.38657 17.9982L18.3595 7.02522Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11 15C11 15.5523 10.5523 16 10 16C9.44772 16 9 15.5523 9 15C9 14.4477 9.44772 14 10 14C10.5523 14 11 14.4477 11 15Z"/>\n  <path d="M14 15C14 15.5523 13.5523 16 13 16C12.4477 16 12 15.5523 12 15C12 14.4477 12.4477 14 13 14C13.5523 14 14 14.4477 14 15Z"/>\n  <path d="M17 15C17 15.5523 16.5523 16 16 16C15.4477 16 15 15.5523 15 15C15 14.4477 15.4477 14 16 14C16.5523 14 17 14.4477 17 15Z"/>\n  <path fill-rule="evenodd" d="M15.2222 7C13.3064 7 11.6041 8.03226 10.7673 9.58975C10.4836 9.53088 10.1896 9.5 9.88889 9.5C8.33443 9.5 6.94973 10.3278 6.25133 11.5896C4.93963 12.2253 4 13.5297 4 15.0833C4 17.3063 5.90238 19 8.11111 19H17.8889C20.0976 19 22 17.3063 22 15.0833C22 13.7239 21.2795 12.5539 20.221 11.8576C20.2218 11.8218 20.2222 11.7859 20.2222 11.75C20.2222 9.06683 17.9219 7 15.2222 7ZM12.3078 11.0947C12.6187 9.92977 13.7733 9 15.2222 9C16.9409 9 18.2222 10.291 18.2222 11.75C18.2222 11.9148 18.2065 12.0754 18.1766 12.231L18.0233 13.0279L18.7717 13.3419C19.5266 13.6587 20 14.3421 20 15.0833C20 16.0821 19.1166 17 17.8889 17H8.11111C6.8834 17 6 16.0821 6 15.0833C6 14.3101 6.51675 13.5977 7.32859 13.3027L7.74278 13.1522L7.91117 12.745C8.20096 12.0441 8.95509 11.5 9.88889 11.5C10.2579 11.5 10.6004 11.5855 10.8973 11.7327L11.9926 12.2759L12.3078 11.0947Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path class="progress-bar-container" fill-rule="evenodd" clip-rule="evenodd" d="M1 14.857V12h1v2.841a.505.505 0 00.037.157l.04.002h11.822a.323.323 0 00.089-.024.447.447 0 00.012-.119v-2.856L15 12v2.857C15 16 13.923 16 13.923 16H2.077C1 16 1 14.857 1 14.857zm12.984.131a.017.017 0 01-.002.003l.002-.003z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H6v6H2l6 5 6-5h-4V0zM7 7V1h2v6h2.238L8 9.698 4.762 7H7z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M2 9.99988H0V14.9998C0 15.5521 0.447715 15.9998 1 15.9998H15C15.5523 15.9998 16 15.5521 16 14.9998V9.99988H14V13.9998H2V9.99988Z"/>\n  <path d="M10 1C10 0.447715 9.55228 0 9 0H7C6.44772 0 6 0.447715 6 1V5.99995H3L8 10.9999L13 5.99995H10V1Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11 6C11 5.44772 11.4477 5 12 5H14C14.5523 5 15 5.44772 15 6V10H19L13 16L7 10H11V6Z"/>\n  <path d="M6 20C6 19.4477 6.44772 19 7 19H19C19.5523 19 20 19.4477 20 20C20 20.5523 19.5523 21 19 21H7C6.44772 21 6 20.5523 6 20Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.01415 3.98943C4.43062 4.42386 3.9526 4.97755 3.60883 5.60883L2 4V8H6L4.47786 6.47786C4.74354 5.86311 5.16683 5.32572 5.70868 4.92232C6.3855 4.41843 7.20954 4.15169 8.05325 4.16341C8.89697 4.17512 9.71329 4.46462 10.3759 4.9871C11.0384 5.50958 11.5103 6.2359 11.7184 7.05362C11.9265 7.87134 11.8593 8.73487 11.5271 9.51053C11.1949 10.2862 10.6163 10.9307 9.88088 11.3443C9.14542 11.758 8.29413 11.9176 7.45877 11.7986C6.62397 11.6797 5.85162 11.289 5.26111 10.6871L5.25992 10.6859L4.42936 11.5001C4.66585 11.7413 4.92474 11.9566 5.20151 12.1435C5.82559 12.565 6.5406 12.8426 7.29472 12.95C8.38328 13.1051 9.49262 12.8971 10.451 12.358C11.4094 11.819 12.1634 10.9792 12.5962 9.96839C13.0291 8.95762 13.1167 7.83235 12.8455 6.76676C12.5743 5.70117 11.9594 4.7547 11.096 4.07385C10.2326 3.393 9.16885 3.01574 8.0694 3.00048C6.96994 2.98522 5.89612 3.3328 5.01415 3.98943Z"/>\n  <path d="M8 6C7.44772 6 7 6.44772 7 7V9C7 9.55229 7.44772 10 8 10C8.55228 10 9 9.55229 9 9V7C9 6.44772 8.55228 6 8 6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.60744 11.9857C6.6858 11.895 5.82411 11.4876 5.16904 10.833L5.16806 10.832L5.17 10.8301C5.00333 10.6634 4.40001 10.6 4.00001 11C3.60003 11.4 3.59334 12.0733 3.75998 12.24L3.75736 12.2427C3.99548 12.4807 4.25234 12.6975 4.5238 12.8904C5.37123 13.4928 6.36578 13.8681 7.4119 13.9711C8.79334 14.1072 10.1792 13.76 11.3334 12.9888C12.4876 12.2176 13.3387 11.0701 13.7416 9.74172C14.1446 8.41336 14.0745 6.98638 13.5433 5.70391C13.0121 4.42144 12.0526 3.36284 10.8284 2.70848C9.60416 2.05412 8.19092 1.84449 6.82946 2.1153C5.468 2.38611 4.24256 3.12061 3.36194 4.19365C3.3366 4.22452 3.3116 4.25561 3.28693 4.28693L1.85355 2.85355C1.53857 2.53857 1 2.76165 1 3.20711V8H5.79289C6.23835 8 6.46143 7.46143 6.14645 7.14645L4.71252 5.71252C4.77282 5.62587 4.83671 5.54137 4.90409 5.45926C5.49191 4.74301 6.30989 4.25273 7.21866 4.07196C8.12744 3.8912 9.07078 4.03113 9.88795 4.46791C10.7051 4.9047 11.3456 5.61132 11.7001 6.46736C12.0547 7.32341 12.1015 8.27592 11.8325 9.1626C11.5636 10.0493 10.9955 10.8153 10.2251 11.33C9.45464 11.8448 8.52956 12.0765 7.60744 11.9857Z"/>\n  <path d="M8 6.00001C7.44772 6.00001 7 6.44772 7 7.00001V9.00001C7 9.55229 7.44772 10 8 10C8.55228 10 9 9.55229 9 9.00001V7.00001C9 6.44772 8.55228 6.00001 8 6.00001Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n      <path d="M13 6c-3.866 0-7 3.133-7 7h2c0-2.758 2.243-5 5-5s5 2.242 5 5c0 2.757-2.243 5-5 5-1.61 0-3.03-.78-3.946-1.966H6.7C7.83 18.378 10.222 20 13 20c3.866 0 7-3.135 7-7 0-3.867-3.134-7-7-7"/>\n      <path d="M13 13H6V6l7 7z"/>\n    <path d="M12 11h2v4h-2z"/>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <polygon points="6,5 10,8.5 6,12"></polygon>\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.2929 7.29289C10.6834 7.68342 10.6834 8.31658 10.2929 8.70711L7.70711 11.2929C7.07714 11.9229 6 11.4767 6 10.5858L6 5.41421C6 4.52331 7.07714 4.07714 7.70711 4.70711L10.2929 7.29289Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n    <path d="M16 13l-6 5V8l6 5z" />\n</svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9 9v8h3v-8zM14 9v8h3v-8z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 5C6.34314 5 5 6.34314 5 8V18C5 19.6569 6.34314 21 8 21H18C19.6569 21 21 19.6569 21 18V8C21 6.34314 19.6569 5 18 5H8ZM8 14H12V18H14V14H18V12H14V8H12V12H8V14Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13.1429 11H2.85714V12H13.1429V11ZM2.85714 10C2.38376 10 2 10.4477 2 11V12C2 12.5523 2.38376 13 2.85714 13H13.1429C13.6162 13 14 12.5523 14 12V11C14 10.4477 13.6162 10 13.1429 10H2.85714Z"/>\n  <path fill-rule="evenodd" d="M10.5 2.80208C9.56227 2.80208 8.80208 3.56227 8.80208 4.5C8.80208 5.43773 9.56227 6.19792 10.5 6.19792C11.4377 6.19792 12.1979 5.43773 12.1979 4.5C12.1979 3.56227 11.4377 2.80208 10.5 2.80208ZM7.95312 4.5C7.95312 3.0934 9.0934 1.95312 10.5 1.95312C11.9066 1.95312 13.0469 3.0934 13.0469 4.5C13.0469 5.9066 11.9066 7.04688 10.5 7.04688C9.0934 7.04688 7.95312 5.9066 7.95312 4.5Z"/>\n  <rect x="4" y="9" width="3" height="2" rx="0.5"/>\n  <rect x="10" y="7" width="1" height="4"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <rect x="2" y="10" width="12" height="4" rx="1" />\n  <rect x="9" y="6" width="2" height="5" />\n  <circle cx="10" cy="4" r="3" />\n  <rect x="3" y="9" width="3" height="2" rx="0.5" />\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <rect x="6" y="17" width="15" height="4" rx="1"/>\n  <rect x="15" y="10" width="2" height="8"/>\n  <circle cx="16" cy="9" r="4"/>\n  <rect x="7" y="16" width="5" height="4" rx="0.5"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 4C8.22386 4 8 4.22386 8 4.5V8H4.5C4.22386 8 4 8.22386 4 8.5C4 8.77614 4.22386 9 4.5 9H8V12.5C8 12.7761 8.22386 13 8.5 13C8.77614 13 9 12.7761 9 12.5V9H12.5C12.7761 9 13 8.77614 13 8.5C13 8.22386 12.7761 8 12.5 8H9V4.5C9 4.22386 8.77614 4 8.5 4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7 7V5C7 4.44772 7.44772 4 8 4C8.55228 4 9 4.44772 9 5V7H11C11.5523 7 12 7.44772 12 8C12 8.55228 11.5523 9 11 9H9V11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11V9H5C4.44772 9 4 8.55228 4 8C4 7.44772 4.44772 7 5 7H7Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 14H9C8.44772 14 8 13.5523 8 13V13C8 12.4477 8.44772 12 9 12H12V9C12 8.44772 12.4477 8 13 8V8C13.5523 8 14 8.44772 14 9V12H17C17.5523 12 18 12.4477 18 13V13C18 13.5523 17.5523 14 17 14H14V17C14 17.5523 13.5523 18 13 18V18C12.4477 18 12 17.5523 12 17V14Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <rect x="4" y="8" width="8" height="1" rx="0.5"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 8C4 8.55228 4.44772 9 5 9H11C11.5523 9 12 8.55228 12 8C12 7.44772 11.5523 7 11 7H5C4.44772 7 4 7.44772 4 8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 13a1 1 0 001 1h8a1 1 0 100-2H9a1 1 0 00-1 1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M11.1464 3.06066C11.3417 2.8654 11.6583 2.8654 11.8535 3.06066L12.9393 4.14645C13.1346 4.34171 13.1346 4.65829 12.9393 4.85356L12 5.7929L10.2071 4L11.1464 3.06066ZM12.5607 2.35356C11.9749 1.76777 11.0251 1.76777 10.4393 2.35355L9.14644 3.64645L8.79289 4L9.14644 4.35356L11.6464 6.85356L12 7.20711L12.3535 6.85356L13.6464 5.56066C14.2322 4.97488 14.2322 4.02513 13.6464 3.43934L12.5607 2.35356ZM2.42215 10.3707L2.25491 10.538L2.27811 10.7733L2.50241 13.049L2.54265 13.4573L2.95095 13.4976L5.22666 13.7219L5.46202 13.7451L5.62925 13.5778L10.9629 8.24418L11.3165 7.89063L10.9629 7.53707L8.46292 5.03707L8.10937 4.68352L7.75582 5.03707L2.42215 10.3707ZM3.45734 12.5427L3.29649 10.9106L8.10937 6.09773L9.90226 7.89063L5.08938 12.7035L3.45734 12.5427Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\r\n  <rect x="2" y="14" width="12" height="1" rx="0.5"/>\r\n  <path d="M3 10.5L9.5 4L12 6.5L5.5 13L3 13L3 10.5Z"/>\r\n  <path d="M10.7929 2.70711L10 3.5L12.5 6L13.2929 5.20711C13.6834 4.81658 13.6834 4.18342 13.2929 3.79289L12.2071 2.70711C11.8166 2.31658 11.1834 2.31658 10.7929 2.70711Z"/>\r\n</svg>\r\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M16 6.12132L16.7071 5.41422C17.4882 4.63317 18.7545 4.63317 19.5355 5.41422C20.3166 6.19527 20.3166 7.4616 19.5355 8.24264L18.8284 8.94975L16 6.12132Z"/>\n  <path d="M7.00424 15.1758L15.4895 6.69052L18.3179 9.51894L9.83267 18.0042H7.00424V15.1758Z"/>\n  <path d="M7 19C6.44772 19 6 19.4477 6 20C6 20.5523 6.44772 21 7 21H19C19.5523 21 20 20.5523 20 20C20 19.4477 19.5523 19 19 19H7Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.455 1.207a.5.5 0 00-.91-.414L6.2 5.95l-.592-.222a.999.999 0 00-1.065.236C2.704 7.848 1.214 9.586 1.021 14a.968.968 0 00.98 1h8.116c.886 0 1.319-1.053.73-1.716-1.285-1.448-2.497-3.27-2.152-5.277.097-.564-.146-1.176-.682-1.377l-.874-.328 2.316-5.095zM6.382 14H5.4a.601.601 0 00-.02-.155l-.8-3a.6.6 0 10-1.16.31L4.18 14H2.022c.095-2.072.489-3.45 1.032-4.51.553-1.078 1.292-1.892 2.204-2.825l2.403.9v.001a.133.133 0 01.024.038c.025.054.04.14.025.234-.43 2.503 1.09 4.647 2.39 6.11.009.01.012.017.014.02a.033.033 0 01.003.01.05.05 0 01-.003.022H7.6a.601.601 0 00-.018-.146l-.5-2a.6.6 0 10-1.164.292L6.382 14z"/>\n  <path opacity=".35" fill-rule="evenodd" clip-rule="evenodd" d="M14.985 7H11V6h3.985v1zm0 2H11V8h3.985v1zM12 11h3v-1h-3v1z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2.35717 3.36075C2.13323 3.58693 2.00515 3.89221 2 4.21203V11.7872C1.99441 11.9479 2.02163 12.1081 2.07996 12.2577C2.13828 12.4073 2.22648 12.5431 2.33904 12.6568C2.4516 12.7705 2.58613 12.8596 2.73425 12.9185C2.88237 12.9774 3.04091 13.0049 3.2 12.9993H12.8C13.1167 12.9941 13.4189 12.8647 13.6428 12.6385C13.8668 12.4123 13.9948 12.1071 14 11.7872L14 6C14 5.5 13.5 5 13 5H8L6.8 3H3.2C2.88334 3.0052 2.5811 3.13457 2.35717 3.36075ZM2.99939 11.822L3 11.8046V4.22318C3.00223 4.16171 3.02741 4.10511 3.06779 4.06432C3.10773 4.02398 3.15929 4.00208 3.21161 4H6.24589L7.5 6H12.8C12.9105 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8923 11.9753 12.8407 11.9972 12.7884 11.9993H3.18227L3.16455 11.9999C3.14406 12.0006 3.12343 11.9971 3.10383 11.9893C3.08421 11.9815 3.06567 11.9694 3.04966 11.9533C3.03364 11.9371 3.02051 11.9171 3.01165 11.8944C3.00278 11.8717 2.99853 11.847 2.99939 11.822Z"/>\n  <path fill-rule="evenodd" d="M2.99939 11.822L3 11.8046V4.22318C3.00223 4.16171 3.02741 4.10511 3.06779 4.06432C3.10773 4.02398 3.15929 4.00208 3.21161 4H6.24589L7.5 6H12.8C12.9105 6 13 6.08796 13 6.19842C13 7.13107 13 11.0636 13 11.7761C12.9978 11.8376 12.9726 11.8942 12.9322 11.935C12.8923 11.9753 12.8407 11.9972 12.7884 11.9993H3.18227L3.16455 11.9999C3.14406 12.0006 3.12343 11.9971 3.10383 11.9893C3.08421 11.9815 3.06567 11.9694 3.04967 11.9533C3.03364 11.9371 3.02051 11.9171 3.01165 11.8944C3.00278 11.8717 2.99853 11.847 2.99939 11.822Z" fill-opacity="0.1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M9.47244 10.3917C8.9108 10.7755 8.23162 11 7.5 11C5.567 11 4 9.433 4 7.5C4 5.567 5.567 4 7.5 4C9.433 4 11 5.567 11 7.5C11 8.23162 10.7755 8.9108 10.3917 9.47244L12.4596 11.5404C12.7135 11.7942 12.7135 12.2058 12.4596 12.4596C12.2058 12.7135 11.7942 12.7135 11.5404 12.4596L9.47244 10.3917ZM9.9 7.5C9.9 8.82548 8.82548 9.9 7.5 9.9C6.17452 9.9 5.1 8.82548 5.1 7.5C5.1 6.17452 6.17452 5.1 7.5 5.1C8.82548 5.1 9.9 6.17452 9.9 7.5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.75739 10.1716C7.96696 10.6951 7.01908 11 6 11C3.23858 11 1 8.76142 1 6C1 3.23858 3.23858 1 6 1C8.76142 1 11 3.23858 11 6C11 7.01908 10.6951 7.96696 10.1716 8.75739L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L8.75739 10.1716ZM9 6C9 7.65685 7.65685 9 6 9C4.34315 9 3 7.65685 3 6C3 4.34315 4.34315 3 6 3C7.65685 3 9 4.34315 9 6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M13.76 15.17a5 5 0 111.41-1.41l3.54 3.53a1 1 0 01-1.42 1.42l-3.53-3.54zM14 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n</svg>'},function(e,t){e.exports='<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\r\n    <path fill-rule="evenodd" d="M12.5 16L8.86568 12.3657C8.36171 11.8617 8.71865 11 9.43137 11L15.5686 11C16.2814 11 16.6383 11.8617 16.1343 12.3657L12.5 16Z"/>\r\n</svg>\r\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 13l3.634-3.634c.504-.504 1.366-.147 1.366.566v6.137c0 .713-.862 1.07-1.366.566l-3.634-3.634z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M16 13l-3.634 3.634c-.504.504-1.366.147-1.366-.566v-6.137c0-.713.862-1.07 1.366-.566l3.634 3.634z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="10" height="5" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" fill-rule="evenodd" d="M8 6C6.34315 6 5 7.34315 5 9V17C5 18.6569 6.34315 20 8 20H18C19.6569 20 21 18.6569 21 17V9C21 7.34315 19.6569 6 18 6H8ZM7 9C7 8.44772 7.44772 8 8 8H18C18.5523 8 19 8.44772 19 9V17C19 17.5523 18.5523 18 18 18H8C7.44772 18 7 17.5523 7 17V9Z"/>\n  <rect x="8" y="9" width="5" height="8" rx="1"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 1c1.55 0 2.9.28 3.84.7.46.2.78.42.96.62.1.1.15.19.18.25a.79.79 0 01-.15.2c-.19.17-.5.38-.97.57-.94.4-2.3.66-3.86.66s-2.92-.26-3.86-.66a3.1 3.1 0 01-.97-.58.78.78 0 01-.15-.2.8.8 0 01.18-.24c.18-.2.5-.42.96-.63C5.1 1.3 6.45 1 8 1zm6 1.58V2.5C14 1.12 11.31 0 8 0S2 1.12 2 2.5v8.83C2 12.81 4.69 14 8 14s6-1.2 6-2.67V2.67v-.09zm-1 3.38V3.88C11.93 4.56 10.09 5 8 5s-3.93-.44-5-1.12v2.08c.23.22.57.45 1.03.65.98.44 2.38.72 3.97.72 1.59 0 2.99-.28 3.97-.72.46-.2.8-.43 1.03-.65zM3 6.8C4.07 7.53 5.91 8 8 8s3.93-.47 5-1.2v2.01c-.23.22-.57.45-1.03.65-.98.44-2.38.72-3.97.72-1.59 0-2.99-.28-3.97-.72-.46-.2-.8-.43-1.03-.65v-2zm0 4.52V9.66c1.07.72 2.91 1.2 5 1.2s3.93-.48 5-1.2v1.67c0 .05-.02.16-.2.35-.18.2-.5.42-.96.63-.93.4-2.29.69-3.84.69-1.55 0-2.9-.28-3.84-.7-.46-.2-.78-.42-.96-.62-.18-.19-.2-.3-.2-.35z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 2c1.72 0 3.2.3 4.15.73.23.1.41.2.55.28-.14.08-.31.18-.54.27C11.2 3.7 9.73 4 8 4s-3.2-.3-4.16-.72c-.23-.1-.4-.19-.54-.27.14-.09.32-.18.55-.28C4.8 2.3 6.28 2 8 2zm7 1.02V3c0-1.66-3.13-3-7-3S1 1.34 1 3v9.95C1 14.64 4.13 16 8 16s7-1.36 7-3.05V3.02zm-2 6.91v-1.9c-1.27.57-3.04.92-5 .92s-3.73-.35-5-.92v1.9l.37.18c1.14.5 2.78.83 4.63.83a12.02 12.02 0 005-1zm-10 .85c1.27.57 3.04.92 5 .92s3.73-.35 5-.92v1.98a2.9 2.9 0 01-.85.51C11.2 13.7 9.72 14 8 14c-1.72 0-3.2-.3-4.15-.73a2.9 2.9 0 01-.85-.5v-1.99zm9.63-3.42a6 6 0 00.37-.18V5.1c-1.27.56-3.04.9-5 .9a12.9 12.9 0 01-5-.9v2.08l.37.18c1.14.5 2.78.83 4.63.83s3.49-.33 4.63-.83z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 21">\n  <path fill-rule="evenodd" d="M14.6 3c-1.4-.6-3.3-1-5.6-1s-4.2.4-5.6 1l-1.2.8L2 4l7-2-7 2 .2.2 1.2.8c1.4.6 3.3 1 5.6 1s4.2-.4 5.6-1l1.2-.8.2-.2-.2-.2-1.2-.8zM9 0C4 0 0 1.8 0 4v13c0 2.2 4 4 9 4s9-1.8 9-4V4c0-2.2-4-4-9-4zM2 13.3v-2.8c1.6 1 4.2 1.5 7 1.5s5.3-.6 7-1.5v2.8l-1 .6c-1.5.7-3.6 1.1-6 1.1s-4.5-.4-6-1l-1-.7zM15 10l1-.6V6.5C14.3 7.5 11.8 8 9 8s-5.4-.6-7-1.5v2.8l1 .6c1.5.7 3.6 1.1 6 1.1s4.5-.4 6-1zM2 14.5c1.6 1 4.2 1.5 7 1.5s5.3-.6 7-1.5V17l-.2.2-1.2.8c-1.4.6-3.3 1-5.6 1s-4.2-.4-5.6-1l-1.2-.8A.8.8 0 012 17v-2.5zM16 4zm0 13zM2 17zM2 4zm2 4.5a.5.5 0 11-1 0 .5.5 0 011 0zm0 4a.5.5 0 11-1 0 .5.5 0 011 0zm0 4a.5.5 0 11-1 0 .5.5 0 011 0z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M7.4 1.7C7.8.7 6.4.2 5.6 0c.2 0 .5.4.5 1.2.1 1.1-1.7 1.7-1.6 3 0 1.1 1.6 1.8 2.3 2l-1-1c-.9-.9 1.1-2.3 1.6-3.5zM9.6 4.2c.2-.6-.5-1-.8-1 0 0 .2.1.2.7s-.9 1-.8 1.9c0 .6.8 1 1.2 1.2l-.6-.7c-.4-.5.6-1.4.8-2.1z"/>\n  <path fill-rule="evenodd" d="M12.7 8.1a13 13 0 00.1-1L3.2 7a8.4 8.4 0 000 1c0 1.2.3 2.8 1 4a3.3 3.3 0 001 1H3c0 .5.3 1 1.5 1h6.6c.6 0 1.6-.6 1.6-1h-2.1l.8-.8h.4c.3.2.7 0 .9 0l.6-.3c.4-.3.9-.7 1-1.4a2 2 0 00-.3-1.6 2 2 0 00-1.1-.7h-.3zm-2.5 4l-1.3.9h-2l-1.1-.8c-.6-.4-1-1.3-1.3-2.5L4.2 8h7.6l-.4 2c-.3 1.1-.8 1.9-1.2 2.2zm3.3-1.8c-.2.7-1 1-1.4 1a3.6 3.6 0 00.6-1.5v-.6c.5 0 .9.4.8 1.1z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M7.4 1.7C7.8.7 6.4.2 5.6 0c.2 0 .5.4.5 1.2.1 1.1-1.7 1.7-1.6 3 0 1.1 1.6 1.8 2.3 2l-1-1c-.9-.9 1.1-2.3 1.6-3.5zM9.6 4.2c.2-.6-.5-1-.8-1 0 0 .2.1.2.7s-.9 1-.8 1.9c0 .6.8 1 1.2 1.2l-.6-.7c-.4-.5.6-1.4.8-2.1z"/>\n  <path fill-rule="evenodd" d="M2.7 7c0 1.1.3 3.6 2.3 5H2.7c0 .5.4 2 1.7 2h7.3c.6 0 1.6-1 1.6-2H11l.7-.5c1.6 0 2.8-.7 2.8-2 0-1-.8-1.4-1.2-1.4v-.8V7H2.7zm10.5 1.7A4.4 4.4 0 0112 11c.4 0 1.8-.4 2-1.1 0-.7-.4-1.1-.8-1.2z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M13 4.2c.4-1.2-1.5-2-2.5-2.2.2 0 .7.5.7 1.6C11.3 5 9 5.7 9 7.4c.1 1.4 2.1 2.3 3.1 2.6l-1.4-1.4c-1-1 1.6-2.9 2.2-4.4zM16 7.4c.2-.8-.7-1.3-1.2-1.4 0 0 .3.3.3 1 0 .8-1.2 1.3-1.1 2.4 0 .9 1 1.4 1.6 1.6l-.8-.8c-.5-.7.9-1.9 1.2-2.8z"/>\n  <path fill-rule="evenodd" d="M6.2 12c0 1.5.4 5.2 3.2 7H6.2c0 .7.6 2 2.4 2h8.8c.8-.1 2.3-.6 2.2-2h-3.4l1.2-1c2.8-.3 4-1.2 4-3a2 2 0 00-1.8-2v-.8-.2H6.3zm13.3 1.8a8.2 8.2 0 01-1.2 3.1c.5.2 2-.5 2.2-1.4.3-1-.4-1.5-1-1.7z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 3h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zM1 4c0-1.1.9-2 2-2h10a2 2 0 012 2v8a2 2 0 01-2 2H3a2 2 0 01-2-2zm5.4 1c-.2 0-.4 0-.4.5v5c0 .5.2.5.4.5a3.6 3.6 0 01.2 0c.2 0 .4 0 .4-.5v-5C7 5 6.8 5 6.6 5a4.2 4.2 0 01-.2 0zm3 0c-.2 0-.4 0-.4.5v5c0 .5.2.5.4.5a3.6 3.6 0 01.2 0c.2 0 .4 0 .4-.5v-5c0-.5-.2-.5-.4-.5a4.2 4.2 0 01-.2 0z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 2a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V5a3 3 0 00-3-3zM2 5a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H3a1 1 0 01-1-1z"/>\n  <path d="M5 6a1 1 0 012 0v4a1 1 0 11-2 0zm4 0a1 1 0 012 0v4a1 1 0 11-2 0z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M10 11a1 1 0 112 0v4a1 1 0 11-2 0zm4 0a1 1 0 112 0v4a1 1 0 11-2 0z"/>\n  <path fill-rule="evenodd" d="M7 6a3 3 0 00-3 3v8a3 3 0 003 3h12a3 3 0 003-3V9a3 3 0 00-3-3zM6 9a1 1 0 011-1h12a1 1 0 011 1v8a1 1 0 01-1 1H7a1 1 0 01-1-1z" />\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M3 3h10a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1zM1 4c0-1.1.9-2 2-2h10a2 2 0 012 2v8a2 2 0 01-2 2H3a2 2 0 01-2-2zm6.3 1L11 8l-3.7 3a.8.8 0 01-1.3-.7V5.7A.8.8 0 017.3 5zM7 6l2.4 2L7 10z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M11 8l-3.7 3a.8.8 0 01-1.3-.7V5.7A.8.8 0 017.3 5z" fill-rule="evenodd"/>\n  <path d="M3 2a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V5a3 3 0 00-3-3zM2 5a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H3a1 1 0 01-1-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M16 13l-3.7 3a.8.8 0 01-1.3-.7v-4.6a.8.8 0 011.3-.7z" fill-rule="evenodd"/>\n  <path d="M7 6a3 3 0 00-3 3v8a3 3 0 003 3h12a3 3 0 003-3V9a3 3 0 00-3-3zM6 9a1 1 0 011-1h12a1 1 0 011 1v8a1 1 0 01-1 1H7a1 1 0 01-1-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.992 3.823l-.208-1.823h-1.571l-.213 1.823-.558.219c-.397.156-.765.37-1.095.633l-.469.374-1.687-.728-.786 1.361 1.475 1.092-.088.594c-.031.206-.046.417-.046.632 0 .224.017.444.05.658l.088.57-1.439 1.159.727 1.259 1.706-.698.46.369c.338.271.717.491 1.127.649l.539.208.284 1.825h1.454l.248-1.825.549-.214c.405-.158.78-.376 1.115-.645l.46-.369 1.706.698.727-1.259-1.439-1.159.088-.57c.033-.214.05-.434.05-.658 0-.215-.016-.426-.046-.632l-.088-.594 1.475-1.092-.786-1.361-1.687.728-.469-.374c-.329-.262-.696-.476-1.093-.632l-.559-.22zm-5.948-.654c-.171-.099-.354.021-.402.106l-1.418 2.457c-.098.169-.061.303.11.401l1.471 1.088c-.038.254-.057.514-.057.779 0 .276.021.547.062.811l-1.423 1.147c-.171.099-.207.232-.11.401l1.342 2.325c.049.085.232.204.402.106l1.692-.693c.417.334.886.607 1.393.802l.281 1.805c0 .197.098.296.293.296h2.684c.098 0 .293-.099.293-.296l.246-1.811c.501-.195.965-.466 1.378-.797l1.693.693c.171.099.354-.021.402-.106l1.342-2.325c.098-.169.061-.303-.11-.401l-1.423-1.147c.041-.264.062-.535.062-.811 0-.265-.02-.525-.057-.779l1.471-1.088c.171-.099.207-.232.11-.401l-1.418-2.457c-.049-.084-.232-.204-.402-.106l-1.68.725c-.405-.324-.86-.588-1.35-.781l-.207-1.817c0-.197-.098-.296-.293-.296h-2.837c-.098 0-.293.099-.293.296l-.212 1.816c-.491.193-.946.458-1.352.782l-1.68-.725zM8 9c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm0 1c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.711 1.296l.207 1.817c.491.193.945.458 1.35.781l1.68-.725c.171-.099.354.021.402.106l1.418 2.457c.098.169.061.303-.11.401l-1.471 1.088c.038.254.057.514.057.779 0 .276-.021.547-.062.811l1.423 1.147c.171.099.207.232.11.401l-1.342 2.325c-.049.085-.232.204-.402.106l-1.693-.693c-.413.331-.877.601-1.378.797l-.246 1.811c0 .197-.195.296-.293.296h-2.684c-.195 0-.293-.099-.293-.296l-.281-1.805c-.507-.196-.976-.468-1.393-.802l-1.692.693c-.171.099-.354-.021-.402-.106l-1.342-2.325c-.098-.169-.061-.303.11-.401l1.423-1.147c-.041-.264-.062-.535-.062-.811 0-.265.02-.525.057-.779l-1.471-1.088c-.171-.099-.207-.232-.11-.401l1.418-2.457c.049-.084.232-.204.402-.106l1.68.725c.406-.324.861-.589 1.352-.782l.212-1.816c0-.197.195-.296.293-.296h2.837c.195 0 .293.099.293.296zm-1.715 8.704c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M14.714 6.296l.207 1.817c.491.193.945.458 1.35.781l1.68-.725c.171-.099.354.021.402.106l1.418 2.457c.098.169.061.303-.11.401l-1.471 1.088c.038.254.057.514.057.779 0 .276-.021.547-.062.811l1.423 1.147c.171.099.207.232.11.401l-1.342 2.325c-.049.084-.232.204-.402.105l-1.692-.693c-.413.331-.877.601-1.378.797l-.246 1.811c0 .197-.195.296-.293.296h-2.684c-.195 0-.293-.099-.293-.296l-.281-1.805c-.507-.196-.976-.468-1.392-.802l-1.692.693c-.171.099-.354-.021-.402-.105l-1.342-2.325c-.098-.169-.061-.303.11-.401l1.423-1.147c-.041-.264-.062-.535-.062-.811 0-.265.02-.525.057-.779l-1.471-1.088c-.171-.099-.207-.232-.11-.401l1.418-2.457c.049-.084.232-.204.402-.106l1.68.725c.406-.324.861-.589 1.352-.782l.212-1.816c0-.197.195-.296.293-.296h2.837c.195 0 .293.099.293.296zm-1.714 8.704c1.105 0 2-.895 2-2 0-1.104-.895-2-2-2s-2 .896-2 2c0 1.105.895 2 2 2z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.581 3h-3.581l-.117.007c-.497.058-.883.48-.883.993v8.5c0 .276.224.5.5.5s.5-.223.5-.5l.006-3.617c.058-.497.392-.883.993-.883.602 0 .865.207 1.03.534l.658 1.05c.16.222.409.376.695.41h2.733c.497-.058.883-.48.883-.993v-4h-1.117c-.368 0-.69-.199-.863-.496l-.699-1.138-.094-.096c-.166-.156-.385-.255-.627-.269l-.02-.002z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h4.697l.02.002c.242.014.461.113.627.269l.094.096.699 1.138c.174.297.495.496.863.496h2v5c0 .513-.386.935-.883.993l-3.117.007-.117-.007c-.286-.033-.535-.187-.695-.41l-.658-1.05c-.165-.327-.503-.551-.894-.551l-.636.017c-.513 0-.936.386-.993.883l-.007.117v3c0 .552-.448 1-1 1-.513 0-.936-.386-.993-.883l-.007-.117v-9c0-.513.386-.936.883-.993l.117-.007z"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M8 7h5.697l.02.002c.242.014.461.113.627.269l.094.096.699 1.138c.174.297.495.496.863.496h3v6c0 .513-.386.935-.883.993l-4.117.007-.117-.007c-.286-.033-.535-.187-.695-.41l-.658-1.05c-.165-.327-.503-.551-.894-.551l-1.636.017c-.513 0-.936.386-.993.883l-.007.117v4c0 .552-.448 1-1 1-.513 0-.936-.386-.993-.883l-.007-.117v-11c0-.513.386-.936.883-.993l.117-.007z"/></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4 3h3.586l5 5L8 12.586l-5-5V4a1 1 0 011-1zm3.586-1a1 1 0 01.707.293L14 8l-6 6-5.707-5.707A1 1 0 012 7.586V4a2 2 0 012-2h3.586zM7 6a1 1 0 11-2 0 1 1 0 012 0zm1 0a2 2 0 11-4 0 2 2 0 014 0z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M7.146 1.146A.5.5 0 006.793 1H1v5.793a.5.5 0 00.146.353l7.147 7.147a1 1 0 001.414 0l4.586-4.586a1 1 0 000-1.414L7.146 1.146zM4.93 6.4a1.48 1.48 0 11-.02-2.96 1.48 1.48 0 01.02 2.96z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M12.004 5.146A.5.5 0 0011.65 5H5v6.65a.5.5 0 00.146.354l7.583 7.582a2 2 0 002.828 0l4.029-4.029a2 2 0 000-2.828l-7.582-7.583zM9.49 11.171a1.691 1.691 0 11-.023-3.381 1.691 1.691 0 01.023 3.381z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14 3H2a1 1 0 00-1 1v2h14V4a1 1 0 00-1-1zM1 12V7h14v5a1 1 0 01-1 1H2a1 1 0 01-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2zm4 2H2v1h4V4z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1 4C1 2.89543 1.89543 2 3 2H13C14.1046 2 15 2.89543 15 4V12C15 13.1046 14.1046 14 13 14H3C1.89543 14 1 13.1046 1 12V4ZM9 4H13V6H9V4ZM8 4H6V6H8V4ZM5 4H3V6H5V4ZM3 7L3 12H13V7H3Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M21 8C21 6.89543 20.1046 6 19 6H7C5.89543 6 5 6.89543 5 8V18C5 19.1046 5.89543 20 7 20H19C20.1046 20 21 19.1046 21 18V8ZM10 8H12V10H10V8ZM9 8H7V10H9V8ZM19 11V18H7V11H19ZM13 10H19V8H13V10Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n\t<g style="display: var(--displayImagesCached)">\n\t\t<path opacity="0.3" d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.4167L12.4431 15.9167Z"/>\n\t\t<path d="M18 23C20.7614 23 23 20.7614 23 18C23 15.2386 20.7614 13 18 13C15.2386 13 13 15.2386 13 18C13 20.7614 15.2386 23 18 23Z" fill="var(--colorWarningBg)" />\n\t\t<path d="M17 16H18V18H20V19H17V16Z" fill="var(--colorWarningFg)" />\n\t</g>\n\t<g style="display: var(--displayImagesAll)">\n\t\t<path d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.4167L12.4431 15.9167Z"/>\n\t</g>\n\t<g style="display: var(--displayImagesNever)">\n\t\t<path opacity="0.3" d="M23 8C23 6.89543 22.1046 6 21 6H6C4.89543 6 4 6.89543 4 8V18C4 19.1046 4.89543 20 6 20H21C22.1046 20 23 19.1046 23 18V8ZM12.4431 15.9167L16.5 10.5L21 18H6L9.5 12.5L12.4431 15.9167Z"/>\n\t\t<path d="M18 23C20.7614 23 23 20.7614 23 18C23 15.2386 20.7614 13 18 13C15.2386 13 13 15.2386 13 18C13 20.7614 15.2386 23 18 23Z" fill="var(--colorErrorBg)" />\n\t\t<path d="M21 17H15V19H21V17Z" fill="var(--colorErrorFg)" />\n\t</g>\n\t<g style="display: var(--displayAnimationNever)">\n\t\t<path d="M9 13C11.7614 13 14 10.7614 14 8C14 5.23858 11.7614 3 9 3C6.23858 3 4 5.23858 4 8C4 10.7614 6.23858 13 9 13Z" fill="var(--colorErrorBg)" />\n\t\t<g>\n\t\t\t<path d="M6.5 5.5H8.375V10.5H6.5V5.5Z" fill="var(--colorErrorFg)" />\n\t\t\t<path d="M9.625 5.5H11.5V10.5H9.625V5.5Z" fill="var(--colorErrorFg)" />\n\t\t</g>\n\t</g>\n\t<g style="display: var(--displayAnimationOnce)">\n\t\t<path d="M9 13C11.7614 13 14 10.7614 14 8C14 5.23858 11.7614 3 9 3C6.23858 3 4 5.23858 4 8C4 10.7614 6.23858 13 9 13Z" fill="var(--colorWarningBg)"/>\n\t\t<path d="M7.75 4.25V11.75L11.5 8L7.75 4.25Z" fill="var(--colorWarningFg)" />\n\t</g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13 16C14.1046 16 15 15.1046 15 14C15 12.8954 14.1046 12 13 12C11.8954 12 11 12.8954 11 14C11 15.1046 11.8954 16 13 16Z"/>\n  <path fill-rule="evenodd" d="M10.5 6C9.11929 6 8 7.11929 8 8.5C8 8.77614 7.77614 9 7.5 9H7C5.34315 9 4 10.3431 4 12V17C4 18.6569 5.34315 20 7 20H19C20.6569 20 22 18.6569 22 17V12C22 10.3431 20.6569 9 19 9H18.5C18.2239 9 18 8.77614 18 8.5C18 7.11929 16.8807 6 15.5 6H10.5ZM10 8.5C10 8.22386 10.2239 8 10.5 8H15.5C15.7761 8 16 8.22386 16 8.5C16 9.88071 17.1193 11 18.5 11H19C19.5523 11 20 11.4477 20 12V17C20 17.5523 19.5523 18 19 18H7C6.44772 18 6 17.5523 6 17V12C6 11.4477 6.44772 11 7 11H7.5C8.88071 11 10 9.88071 10 8.5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C5.34315 6 4 7.34315 4 9V17C4 18.6569 5.34315 20 7 20H19C20.6569 20 22 18.6569 22 17V9C22 7.34315 20.6569 6 19 6H7ZM6 9C6 8.44772 6.44772 8 7 8H19C19.5523 8 20 8.44772 20 9V17C20 17.5523 19.5523 18 19 18H7C6.44772 18 6 17.5523 6 17V9Z"/>\n  <rect style="display: var(--displayTileRow)" opacity="0.5" x="12" y="8" width="2" height="10"/>\n  <rect style="display: var(--displayTileColumn)" opacity="0.5" x="6" y="12" width="14" height="2"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M7 6C5.89543 6 5 6.89543 5 8V18C5 19.1046 5.89543 20 7 20H19C20.1046 20 21 19.1046 21 18V8C21 6.89543 20.1046 6 19 6H7ZM8 8C7.44772 8 7 8.44772 7 9V17C7 17.5523 7.44772 18 8 18H12V8H8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n  <path d="M9.79289 5.79285L4.08578 11.5L9.79289 17.2071L11.2071 15.7928L6.91421 11.5L11.2071 7.20706L9.79289 5.79285Z"/>\n  <path d="M14.7929 10.2071L19.0858 14.5L14.7929 18.7928L16.2071 20.2071L21.9142 14.5L16.2071 8.79285L14.7929 10.2071Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle cx="8" cy="8" r="3" />\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3H13C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 4V11.5C4 12.3284 4.67157 13 5.5 13H10.5C11.3284 13 12 12.3284 12 11.5V4H11V11.5C11 11.7761 10.7762 12 10.5 12H5.5C5.22385 12 5 11.7761 5 11.5V4H4Z"/>\n  <path opacity="0.3" d="M6 4V11H10V4H6Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path opacity="0.35" d="M7 5V12H9V5H7Z"/>\n  <path d="M10.5 2C10.2239 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H6.5C6.22386 1 6 1.22386 6 1.5C6 1.77614 5.77614 2 5.5 2H4C3.44772 2 3 2.44772 3 3C3 3.55228 3.44772 4 4 4H12C12.5523 4 13 3.55228 13 3C13 2.44772 12.5523 2 12 2H10.5Z"/>\n  <path d="M4 5V12C4 13.6569 5.34315 15 7 15H9C10.6569 15 12 13.6569 12 12V5H10V12C10 12.5523 9.55228 13 9 13H7C6.44772 13 6 12.5523 6 12V5H4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">\n<path class="trashicon-lid" d="M15.5 7c-.276 0-.5-.224-.5-.5l-.001-1.03c-.016-.262-.233-.47-.499-.47h-4c-.267 0-.485.209-.499.473l-.001 1.027c0 .276-.224.5-.5.5h-2.5c-.552 0-1 .448-1 1s.448 1 1 1h11c.552 0 1-.448 1-1s-.448-1-1-1h-2.5z"/>\n<path class="trashicon-bin" d="M17 10c.552 0 1 .448 1 1v8c0 1.105-.895 2-2 2h-7c-1.105 0-2-.895-2-2v-8l.007-.117c.058-.497.48-.883.993-.883s.936.386.993.883l.007.117v7c0 .552.448 1 1 1h5c.552 0 1-.448 1-1v-7l.007-.117c.058-.497.481-.883.993-.883z"/>\n<path class="trashicon-content" opacity=".3" d="M10 10v8h1v-8h-1zM12 10v8h1v-8h-1zM14 18v-8h1v8h-1z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <mask id="pcams" fill="#fff">\n    <path d="M3 4c-.552 0-1 .448-1 1v5c0 .552.448 1 1 1h7c.552 0 1-.448 1-1v-1.625l2.171 1.899c.323.283.829.053.829-.376v-4.796c0-.43-.506-.659-.829-.376l-2.171 1.899v-1.625c0-.552-.448-1-1-1h-7z"/>\n  </mask>\n  <path class="permission-icon" mask="url(#pcams)" d="M11 8.375l.659-.753-1.659-1.451v2.204h1zm2.171 1.899l.659-.753-.659.753zm0-5.549l.659.753-.659-.753zm-2.171 1.899h-1v2.204l1.659-1.451-.659-.753zm-8-1.625v-2c-1.105 0-2 .895-2 2h2zm0 5v-5h-2v5h2zm0 0h-2c0 1.105.895 2 2 2v-2zm7 0h-7v2h7v-2zm0 0v2c1.105 0 2-.895 2-2h-2zm0-1.625v1.625h2v-1.625h-2zm.341.753l2.171 1.899 1.317-1.505-2.171-1.899-1.317 1.505zm2.171 1.899c.97.849 2.488.16 2.488-1.129h-2c0-.43.506-.659.829-.376l-1.317 1.505zm2.488-1.129v-4.796h-2v4.796h2zm0-4.796c0-1.289-1.518-1.978-2.488-1.129l1.317 1.505c-.323.283-.829.053-.829-.376h2zm-2.488-1.129l-2.171 1.899 1.317 1.505 2.171-1.899-1.317-1.505zm-2.512 1.027v1.625h2v-1.625h-2zm0 0h2c0-1.105-.895-2-2-2v2zm-7 0h7v-2h-7v2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M5.854 2.354c.195-.195.195-.512 0-.707-.195-.195-.512-.195-.707 0l-2.288 2.288-.106.131c-.151.086-.252.248-.252.434s.102.348.252.434l.106.131 2.288 2.288c.195.195.512.195.707 0 .195-.195.195-.512 0-.707l-1.646-1.646h6.793c.276 0 .5-.224.5-.5s-.224-.5-.5-.5h-6.793l1.646-1.646zM9.646 11.646c-.195.195-.195.512 0 .707.195.195.512.195.707 0l2.288-2.288.106-.131c.151-.086.252-.248.252-.434s-.102-.348-.252-.434l-.106-.131-2.288-2.288c-.195-.195-.512-.195-.707 0-.195.195-.195.512 0 .707l1.646 1.646h-6.793c-.276 0-.5.224-.5.5s.224.5.5.5h6.793l-1.646 1.646z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M9.271 2.787c.999-1.078 2.333-1.796 4.231-1.787l.498.002v3.58h-.5c-.653 0-1.206.189-1.683.562-.337.264-.648.63-.926 1.112h2.109v3.489h-3.735c-.658 1.382-1.366 2.661-2.355 3.607-1.082 1.035-2.471 1.648-4.41 1.648h-.5v-3.5h.5c1.246 0 2.079-.555 2.762-1.449.64-.838 1.12-1.935 1.643-3.129l.169-.386c.576-1.308 1.222-2.697 2.197-3.749zm-6.271 9.687v1.509c1.424-.094 2.423-.594 3.219-1.355.909-.87 1.58-2.107 2.276-3.596l.135-.288h3.37v-1.489h-2.67l.296-.696c.402-.943.92-1.69 1.574-2.203.531-.416 1.135-.664 1.8-.745v-1.594c-1.329.104-2.262.657-2.995 1.449-.846.913-1.434 2.152-2.016 3.473l-.173.395c-.511 1.17-1.041 2.384-1.76 3.324-.738.965-1.698 1.677-3.056 1.816z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M8 2.5c-1.933 0-3.5 1.567-3.5 3.5 0 .763.244 1.468.659 2.044l.015.021 2.393 4.173c.192.335.675.335.868 0l2.393-4.173.015-.021c.414-.574.658-1.28.658-2.044 0-1.933-1.567-3.5-3.5-3.5zm-4.5 3.5c0-2.485 2.015-4.5 4.5-4.5s4.5 2.015 4.5 4.5c0 .971-.308 1.871-.832 2.607l-2.367 4.129c-.576 1.005-2.026 1.005-2.603 0l-2.367-4.129c-.523-.736-.832-1.636-.832-2.607zm2.4 0c0-1.16.94-2.1 2.1-2.1 1.16 0 2.1.94 2.1 2.1 0 1.16-.94 2.1-2.1 2.1-1.16 0-2.1-.94-2.1-2.1zm2.1-1.1c-.608 0-1.1.492-1.1 1.1 0 .608.492 1.1 1.1 1.1.608 0 1.1-.492 1.1-1.1 0-.608-.492-1.1-1.1-1.1z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <g class="permission-icon">\n    <path d="M3.021 5.5c.276 0 .5.224.5.5 0 .967.148 2.365.786 3.506.616 1.1 1.704 1.994 3.714 1.994s3.098-.894 3.714-1.994c.639-1.14.786-2.539.786-3.506 0-.276.224-.5.5-.5s.5.224.5.5c0 1.033-.152 2.635-.914 3.994-.728 1.299-1.997 2.345-4.086 2.489v1.517c0 .276-.224.5-.5.5s-.5-.224-.5-.5v-1.517c-2.09-.144-3.359-1.19-4.086-2.489-.761-1.36-.914-2.961-.914-3.994 0-.276.224-.5.5-.5z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M8 1c-1.105 0-2 .895-2 2v4c0 1.105.895 2 2 2s2-.895 2-2v-4c0-1.105-.895-2-2-2zm0-1c-1.657 0-3 1.343-3 3v4c0 1.657 1.343 3 3 3s3-1.343 3-3v-4c0-1.657-1.343-3-3-3z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M4 2c-.552 0-1 .448-1 1v9c0 .552.448 1 1 1h8c.552 0 1-.448 1-1v-9c0-.552-.448-1-1-1h-8zm1 3h-1v6.5c0 .276.224.5.5.5h.9c.331 0 .6-.269.6-.6v-3.4h-1v-3zm2 0h2v6.5c0 .276-.224.5-.5.5h-1c-.276 0-.5-.224-.5-.5v-6.5zm3 3v3.5c0 .276.224.5.5.5h1c.276 0 .5-.224.5-.5v-6.5h-1v3h-1z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n  <path class="permission-icon" d="M8 4.099v-.002l-.767.184c-1.262.302-2.192 1.45-2.233 2.734v2.778c0 .398-.158.779-.439 1.061l-.148.148h7.175l-.148-.148c-.281-.281-.439-.663-.439-1.061v-2.793c0-1.251-.932-2.411-2.231-2.719l-.769-.182zm-4 2.901c.047-1.742 1.294-3.284 3-3.692v-.308c0-.598.518-1 1-1 .514 0 1 .402 1 1v.308c1.722.408 3 1.95 3 3.692v2.793c0 .133.053.26.146.354l.707.707c.094.094.146.221.146.354v.295c0 .276-.224.5-.5.5h-9c-.276 0-.5-.224-.5-.5v-.295c0-.133.053-.26.146-.354l.707-.707c.094-.094.146-.221.146-.354v-2.793zm2.585 6.002c-.055.156-.085.323-.085.498s.03.344.085.5c.206.583.762 1 1.415 1s1.209-.417 1.415-1c.055-.156.085-.325.085-.5s-.03-.342-.085-.498l-.001-.002h-2.829l-.001.002z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <g class="permission-icon">\n    <path opacity=".5" d="M4 10.5c0 .276-.224.5-.5.5s-.5-.224-.5-.5v-7.5c0-.552.448-1 1-1h7.5c.276 0 .5.224.5.5s-.224.5-.5.5h-7c-.276 0-.5.224-.5.5v7z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6 5v6h6v-6h-6zm-.5-1c-.276 0-.5.224-.5.5v7c0 .276.224.5.5.5h7c.276 0 .5-.224.5-.5v-7c0-.276-.224-.5-.5-.5h-7z"/>\n  </g>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M13.3 2c.126 0 .241.047.329.124l.027.029c3.047 3.047 3.122 7.94.226 11.078l-.193.202c-.092.114-.232.187-.39.187-.276 0-.5-.224-.5-.5 0-.141.058-.268.151-.358l-.002-.002c2.734-2.734 2.734-7.166 0-9.899-.092-.093-.15-.22-.15-.36 0-.276.224-.5.5-.5zm-10.6 0c.276 0 .5.224.5.5 0 .141-.058.268-.15.36-2.672 2.672-2.732 6.965-.182 9.711l.182.189c.092.093.15.22.15.36 0 .276-.224.5-.5.5-.126 0-.242-.047-.33-.124l-.254-.265c-2.833-3.07-2.822-7.819.032-10.877l.222-.23c.088-.077.203-.124.33-.124zm8.5 2.145c.097 0 .188.028.264.075l.071.054c1.893 1.893 1.951 4.928.172 6.89l-.186.193c-.087.073-.199.118-.322.118-.276 0-.5-.224-.5-.5 0-.097.027-.187.075-.263l.053-.073c1.562-1.562 1.562-4.095 0-5.657-.079-.089-.128-.207-.128-.337 0-.276.224-.5.5-.5zm-6.4 0c.276 0 .5.224.5.5 0 .129-.049.247-.128.337-1.51 1.51-1.56 3.927-.151 5.498l.151.159.054.073c.047.076.075.167.075.263 0 .276-.224.5-.5.5-.092 0-.178-.025-.252-.068l-.07-.049-.186-.193c-1.725-1.903-1.723-4.814.005-6.715l.167-.175.071-.054c.077-.048.167-.075.264-.075zm3.2 1.665c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"/>\n  <g class="permission-denied">\n    <circle fill="#c30000" cx="4" cy="12" r="4"/>\n    <path d="M2 11h4v2h-4v-2z" fill="#fff"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M10.74 4.14L8.95 5.93a.5.5 0 01-.85-.36V3.31a4.59 4.59 0 00-3.25 7.86 4.6 4.6 0 005.8.57l.7.74A5.6 5.6 0 118.1 2.3v-1.1a.5.5 0 01.85-.36l2.54 2.54-.04.04-.71.71zm1.07 6.5c.58-.79.88-1.72.89-2.66l1-.12a5.58 5.58 0 01-1.2 3.51l-.7-.73zm1.73-4.04l-1 .12c-.13-.5-.36-1-.67-1.44l.72-.72c.46.62.78 1.32.95 2.04z" clip-rule="evenodd"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path d="M10.31 4.55L8.87 5.98a.5.5 0 01-.85-.35V3.87a4.2 4.2 0 00-2.98 7.2 4.22 4.22 0 005.19.62l1.4 1.47a6.22 6.22 0 11-3.6-11.29V.5a.5.5 0 01.84-.35l2.92 2.91-.04.05-1.44 1.44zm1.2 5.91a4.2 4.2 0 00.73-2.18l2-.25a6.2 6.2 0 01-1.33 3.9l-1.4-1.47zm2.56-3.83l-2 .25a4.2 4.2 0 00-.5-1.08L13 4.37c.52.69.88 1.46 1.07 2.26z" clip-rule="evenodd"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n  <path d="M17.03 7.4l-3.18 3.18a.5.5 0 01-.85-.35v-3.3a6.15 6.15 0 00-2.36 11.83c.45.19.78.62.75 1.11-.04.63-.63 1.07-1.22.86A8.15 8.15 0 0113 4.93V2.76a.5.5 0 01.85-.35l4.09 4.08-.88.88a.7.7 0 01-.03.03zm1.38 2.76c.18.32.54.5.9.42l.23-.06c.59-.15.92-.78.63-1.31-.3-.55-1.04-.62-1.48-.18l-.16.17a.81.81 0 00-.12.96zm.73 3.23c.03-.5.34-.96.83-1.08.6-.15 1.19.25 1.18.86a8.2 8.2 0 01-.18 1.6c-.13.62-.82.88-1.37.57a1.15 1.15 0 01-.54-1.22c.04-.24.07-.48.08-.73zm-1.8 4.04a.79.79 0 01.94-.16l.22.13c.54.3.7 1 .26 1.44a8.11 8.11 0 01-3.96 2.19c-.6.14-1.13-.38-1.1-1 .04-.5.42-.88.9-1 1-.28 1.96-.8 2.75-1.6z" clip-rule="evenodd"/>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,,,function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M8,6.5c0.8,0,1.5,0.7,1.5,1.5S8.8,9.5,8,9.5S6.5,8.8,6.5,8S7.2,6.5,8,6.5 M8,5C6.3,5,5,6.3,5,8s1.3,3,3,3s3-1.3,3-3\n\t\tS9.7,5,8,5L8,5z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <circle strokeWidth="2" cx="8" cy="8" r="3"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 80">\n  <path d="M35.002 0c-.772 0-1.549.028-2.33.083-8.999.87-17.366 5.457-23.425 12.843C3.188 20.312-.113 29.951.003 39.91v33.27c-.001.482.084.96.252 1.406.167.446.414.851.724 1.192.31.34.679.61 1.084.792a3.045 3.045 0 002.535-.01 3.25 3.25 0 001.061-.797c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.094 1.413l2.563 2.825c.82.905 1.933 1.413 3.093 1.413s2.273-.508 3.094-1.413l2.562-2.825c.82-.905 1.933-1.413 3.094-1.413 1.16 0 2.273.508 3.093 1.413l2.563 2.825C32.728 79.492 33.84 80 35 80s2.273-.508 3.094-1.413l2.563-2.825c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.093 1.413l2.563 2.825c.82.905 1.933 1.413 3.094 1.413 1.16 0 2.273-.508 3.093-1.413l2.563-2.825c.82-.905 1.933-1.413 3.093-1.413s2.273.508 3.094 1.413c.302.34.662.611 1.06.796a3.042 3.042 0 002.535.01 3.305 3.305 0 001.085-.791c.31-.34.557-.746.724-1.192.168-.445.253-.924.252-1.406V38.587c0-10.234-3.688-20.048-10.251-27.285C53.185 4.066 44.284 0 35 0zm-8.75 36.176c0 1.43-.385 2.83-1.106 4.02-.721 1.189-1.746 2.116-2.945 2.664-1.2.547-2.519.69-3.792.412-1.272-.28-2.442-.969-3.36-1.98-.917-1.012-1.542-2.302-1.795-3.705a7.927 7.927 0 01.373-4.18c.497-1.322 1.338-2.452 2.417-3.247a6.137 6.137 0 013.646-1.22c1.74 0 3.41.763 4.64 2.12 1.23 1.356 1.922 3.197 1.922 5.116zm30.624 0c0 1.43-.385 2.83-1.106 4.02-.722 1.189-1.746 2.116-2.945 2.664-1.2.547-2.519.69-3.792.412-1.273-.28-2.442-.969-3.36-1.98-.918-1.012-1.543-2.302-1.796-3.705a7.928 7.928 0 01.374-4.18c.496-1.322 1.337-2.452 2.417-3.247a6.137 6.137 0 013.645-1.22c1.74 0 3.41.763 4.64 2.12 1.231 1.356 1.923 3.197 1.923 5.116z" fill="url(#private-ghost-gradient)"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zM51.16 20.21c2.79 0 5.05 2.26 5.05 5.05v25.27c0 2.79-2.26 5.05-5.05 5.05H20.84a5.05 5.05 0 01-5.05-5.05V25.26c0-2.79 2.26-5.05 5.05-5.05h2.53v-2.53a2.53 2.53 0 015.05 0v2.53h5.05v-2.53a2.53 2.53 0 015.06 0v2.53h5.05v-2.53a2.53 2.53 0 015.05 0v2.53h2.53zm-2.53 30.32c1.4 0 2.53-1.13 2.53-2.53V30.32c0-1.4-1.13-2.53-2.53-2.53H23.37a2.53 2.53 0 00-2.53 2.53V48c0 1.4 1.13 2.53 2.53 2.53h25.26zM30.95 32.84h-5.06v5.05h5.06v-5.05zm7.58 5.05v-5.05h-5.06v5.05h5.06zm-7.58 2.53h-5.06v5.05h5.06v-5.05zm7.58 5.05v-5.05h-5.06v5.05h5.06zm7.58-12.63h-5.06v5.05h5.06v-5.05zm0 7.58h-5.06v5.05h5.06v-5.05z" opacity=".3"/>\n  <path fill-rule="evenodd" d="M24.9 31.84h7.05v7.05h-7.06v-7.05zm14.63 0v7.05h-7.06v-7.05h7.06zm-14.64 7.58h7.06v7.05h-7.06v-7.05zm14.64 0v7.05h-7.06v-7.05h7.06zm.52-7.58h7.06v7.05h-7.06v-7.05zm0 7.58h7.06v7.05h-7.06v-7.05zM54.76 70.3c4.76-.7 8.15-2.07 10.8-4.73 2.66-2.65 4.04-6.04 4.73-10.8.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zm-3.6-51.08a6.05 6.05 0 016.05 6.05v25.27a6.05 6.05 0 01-6.05 6.05H20.84a6.05 6.05 0 01-6.05-6.05V25.26a6.05 6.05 0 016.05-6.05h1.53v-1.53a3.53 3.53 0 017.05 0v1.53h3.05v-1.53a3.53 3.53 0 017.06 0v1.53h3.05v-1.53a3.53 3.53 0 017.05 0v1.53h1.53zm-2.53 30.32c.84 0 1.53-.69 1.53-1.53V30.32c0-.85-.69-1.53-1.53-1.53H23.37c-.84 0-1.53.68-1.53 1.53V48c0 .84.69 1.53 1.53 1.53h25.26zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72zm20.21-46.74a5.05 5.05 0 00-5.05-5.05h-2.53v-2.53a2.53 2.53 0 00-5.05 0v2.53h-5.05v-2.53a2.53 2.53 0 00-5.06 0v2.53h-5.05v-2.53a2.53 2.53 0 00-5.05 0v2.53h-2.53a5.05 5.05 0 00-5.05 5.05v25.27c0 2.79 2.26 5.05 5.05 5.05h30.32c2.79 0 5.05-2.26 5.05-5.05V25.26zM51.16 48c0 1.4-1.13 2.53-2.53 2.53H23.37A2.53 2.53 0 0120.84 48V30.32c0-1.4 1.13-2.53 2.53-2.53h25.26c1.4 0 2.53 1.13 2.53 2.53V48zM30.95 32.84v5.05h-5.06v-5.05h5.06zm7.58 5.05h-5.06v-5.05h5.06v5.05zm-7.58 2.53v5.05h-5.06v-5.05h5.06zm7.58 5.05h-5.06v-5.05h5.06v5.05zm7.58-12.63v5.05h-5.06v-5.05h5.06zm0 7.58v5.05h-5.06v-5.05h5.06z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-opacity=".3" fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zm-7.6-13.73H13.19a3.8 3.8 0 01-3.79-3.79V27.57l26.22 14.9 26.84-15.41v21.7a3.8 3.8 0 01-3.8 3.78zM13.19 19.07a3.8 3.8 0 00-3.66 2.82L35.61 36.7l26.57-15.26a3.8 3.8 0 00-3.51-2.38H13.19z"/>\n  <path fill-rule="evenodd" d="M8.4 25.85l27.22 15.47 27.84-16v23.43a4.8 4.8 0 01-4.8 4.8H13.2a4.8 4.8 0 01-4.79-4.8v-22.9zm27.22 16.62L9.4 27.57v21.18a3.8 3.8 0 003.8 3.8h45.47a3.8 3.8 0 003.79-3.8v-21.7L35.62 42.48zM8.37 22.37l.2-.74a4.8 4.8 0 014.62-3.56h45.48a4.8 4.8 0 014.44 3l.33.81L35.6 37.87 8.37 22.37zM54.76 70.3c4.76-.7 8.15-2.07 10.8-4.73 2.66-2.65 4.04-6.04 4.73-10.8.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zM35.61 36.71L9.53 21.9a3.8 3.8 0 013.66-2.82h45.48a3.8 3.8 0 013.51 2.38L35.61 36.7zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72">\n  <path fill-rule="evenodd" d="M66.27 66.27C60.55 72 51.77 72 36 72c-15.78 0-24.55 0-30.27-5.73C0 60.54 0 51.77 0 36S0 11.46 5.73 5.73C11.45 0 20.23 0 36 0c15.78 0 24.55 0 30.27 5.73C72 11.46 72 20.23 72 36s0 24.54-5.73 30.27zM52.71 54.32a2.8 2.8 0 002.86-2.97A38.63 38.63 0 0020.02 15.8a2.8 2.8 0 00-2.97 2.86v.3a3.2 3.2 0 002.97 3.1A32.38 32.38 0 0149.3 51.36a3.2 3.2 0 003.1 2.97h.31zm-23.77-5.95a5.94 5.94 0 11-11.89 0 5.94 5.94 0 0111.89 0zm14.7 2.98c.18 1.63-1.17 2.97-2.81 2.97h-.25c-1.64 0-2.95-1.34-3.19-2.97a20.55 20.55 0 00-17.38-17.37c-1.62-.24-2.96-1.55-2.96-3.19v-.25c0-1.64 1.34-2.99 2.97-2.8a26.74 26.74 0 0123.61 23.61z" opacity=".3"/>\n  <path fill-rule="evenodd" d="M54.76 70.3c4.76-.7 8.15-2.08 10.8-4.73 2.66-2.66 4.04-6.05 4.73-10.81.7-4.8.71-10.84.71-18.76 0-7.92 0-13.97-.7-18.76-.7-4.76-2.08-8.15-4.73-10.8C62.9 3.78 59.52 2.4 54.76 1.7 49.96 1 43.92 1 36 1c-7.92 0-13.97 0-18.76.7-4.76.7-8.15 2.08-10.8 4.74-2.66 2.65-4.04 6.04-4.73 10.8C1 22.04 1 28.08 1 36c0 7.92 0 13.97.7 18.76.7 4.76 2.08 8.15 4.73 10.8 2.66 2.66 6.05 4.04 10.81 4.73 4.8.7 10.84.71 18.76.71 7.92 0 13.97 0 18.76-.7zm1.8-19.03a3.8 3.8 0 01-3.85 4.05h-.3a4.2 4.2 0 01-4.1-3.88 31.38 31.38 0 00-28.38-28.38 4.2 4.2 0 01-3.88-4.1v-.3a3.8 3.8 0 014.05-3.86 39.63 39.63 0 0136.47 36.47zm-26.62-2.9a6.94 6.94 0 11-13.89 0 6.94 6.94 0 0113.89 0zm14.69 2.87c.25 2.3-1.64 4.08-3.8 4.08h-.25c-2.22 0-3.88-1.8-4.18-3.82a19.55 19.55 0 00-16.53-16.53c-2.03-.3-3.82-1.96-3.82-4.18v-.25c0-2.16 1.78-4.05 4.08-3.8a27.75 27.75 0 0124.5 24.5zM36 72c15.78 0 24.55 0 30.27-5.73C72 60.54 72 51.77 72 36s0-24.54-5.73-30.27C60.55 0 51.77 0 36 0 20.22 0 11.45 0 5.73 5.73 0 11.46 0 20.23 0 36s0 24.54 5.73 30.27C11.45 72 20.23 72 36 72zm19.57-20.65a2.8 2.8 0 01-2.86 2.97h-.3a3.2 3.2 0 01-3.1-2.97 32.38 32.38 0 00-29.29-29.28 3.2 3.2 0 01-2.97-3.11v-.3a2.8 2.8 0 012.97-2.86 38.63 38.63 0 0135.55 35.55zM23 54.32a5.94 5.94 0 100-11.9 5.94 5.94 0 000 11.9zm17.83 0c1.64 0 2.99-1.34 2.8-2.97a26.75 26.75 0 00-23.61-23.61c-1.63-.19-2.97 1.16-2.97 2.8v.25c0 1.64 1.34 2.95 2.96 3.19A20.55 20.55 0 0137.4 51.35c.24 1.63 1.55 2.97 3.19 2.97h.25z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <path class="border" d="M2 .5h192a1.5 1.5 0 011.5 1.5v28a1.5 1.5 0 01-1.5 1.5H2A1.5 1.5 0 01.5 30V2A1.5 1.5 0 012 .5z"/>\n  <path d="M1 24h12v1H1z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M0 25V7h10v18H0zM1 8h8v16H1V8zM100 11v10h10V11h-10zm9 1h-8v8h8v-8z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13 8h80v17h102v-1h-17V7H96v17h-2V7H12v18h1V8zm84 16h80V8H97v16z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M16 11v10h10V11H16zm9 1h-8v8h8v-8z"/>\n  <path fill="var(--colorBg)" d="M166 6a2 2 0 012-2h11a2 2 0 012 2v11a2 2 0 01-2 2h-11a2 2 0 01-2-2V6z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M179 5h-11a1 1 0 00-1 1v11a1 1 0 001 1h11a1 1 0 001-1V6a1 1 0 00-1-1zm-11-1a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V6a2 2 0 00-2-2h-11z"/>\n  <path class="highlight" d="M170 7h8v8l-8-8z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <rect x=".5" y=".5" width="195" height="31" rx="1.5" class="border"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 9h8v16H1V9zM0 26V8h10v18H0zM177 9H97v16h80V9zM96 8v18h82V8H96zm13 5h-8v8h8v-8zm-9-1v10h10V12h-10z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M25 13h-8v8h8v-8zm-9-1v10h10V12H16z"/>\n  <path class="highlight" fill-rule="evenodd" clip-rule="evenodd" d="M13 9h80v17h1V8H12v18h1V9z"/>\n  <path class="highlight" d="M94 25h101v1H94zM1 25h11v1H1zM13 5h26v3H13zM40 5h26v2H40zM67 5h26v2H67z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="196" height="48" xmlns="http://www.w3.org/2000/svg">\n  <path class="border" d="M2 .5h192a1.5 1.5 0 011.5 1.5v44a1.5 1.5 0 01-1.5 1.5H2A1.5 1.5 0 01.5 46V2A1.5 1.5 0 012 .5z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M4 28h80v16H4V28zM3 45V27h82v18H3zm5-13h8v8H8v-8zm-1 9V31h10v10H7zm161-13H88v16h80V28zm-81-1v18h82V27H87zm5 5h8v8h-8v-8zm-1 9V31h10v10H91zm93-9h-8v8h8v-8zm-9-1v10h10V31h-10zm-4-4h24v1h-23v16h23v1h-24V27z" class="highlight"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9 8H1v16h8V8zM0 7v18h10V7H0z"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M25 12h-8v8h8v-8zm-9-1v10h10V11H16z" class="highlight"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M97 8h80v16H97V8zm-1 17V7h82v18H96zm5-13h8v8h-8v-8zm-1 9V11h10v10h-10z"/>\n  <path class="highlight" d="M93 24h103v1H93z"/>\n  <path class="highlight" d="M1 24h12v1H1z"/>\n  <g class="default-style">\n    <path fill-rule="evenodd" clip-rule="evenodd" class="highlight" d="M92 9H14v14h78V9zM14 7a2 2 0 00-2 2v14a2 2 0 002 2h78a2 2 0 002-2V9a2 2 0 00-2-2H14z"/>\n    <path opacity=".25" d="M90 11H80v10h10V11z" class="highlight"/>\n  </g>\n  <g class="dotted-style">\n    <path d="M39 4H13V7H12V25H13V8H93V25H94V7H39V4Z" class="highlight"/>\n    <path d="M66 4H40V6H66V4Z" class="highlight"/>\n    <path d="M67 4H93V6H67V4Z" class="highlight"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="196" height="32" xmlns="http://www.w3.org/2000/svg">\n  <rect class="border" x=".5" y=".5" width="195" height="31" rx="1.5" />\n  <path class="highlight" fill-rule="evenodd" d="M109 13h-8v8h8v-8zm-9-1v10h10V12h-10z"/>\n  <path fill-rule="evenodd" d="M9 9H1v16h8V9zM0 8v18h10V8H0z" class="border"/>\n  <path class="highlight" d="M12 25V6h1v19z"/>\n  <path class="highlight" fill-rule="evenodd" d="M177 25V7H12V6h173v19h10v1H93V9H15v17H1v-1h13V8h80v17h2V8h80v17h1zM97 9h78v16H97V9zm-79 4h8v8h-8v-8zm-1 9V12h10v10H17zm165-8.598L179 16l3 2.598v-5.196z"/>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M0 0h220v26H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 6h69v14H6z"/>\n    <path fill="#FFFFFF" d="M76 6h68v14H76zM145 6h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M0 0h81v156H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 6h69v14H6z"/>\n    <path fill="#FFFFFF" d="M6 21h69v14H6zM6 36h69v14H6z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M0 0h220v156H0z"/>\n    <path fill="#E3E3E3" d="M0 130h220v26H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 136h69v14H6z"/>\n    <path fill="#FFFFFF" d="M76 136h68v14H76zM145 136h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M139 0h81v156h-81z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M145 6h69v14h-69z"/>\n    <path fill="#FFFFFF" d="M145 21h69v14h-69zM145 36h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path d="M10 41.787a8 8 0 012.928-10.928L52.024 8.287a8 8 0 0110.928 2.928l2.497 4.324-52.953 30.572L10 41.787z" fill-opacity=".25"/>\r\n  <rect x="31.931" y="60.45" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 31.931 60.45)"/>\r\n  <rect x="27.743" y="53.195" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 27.743 53.195)"/>\r\n  <rect x="36.135" y="67.731" width="34.781" height="3.821" rx="1.911" transform="rotate(-30 36.135 67.73)"/>\r\n  <rect x="40.339" y="75.012" width="41.272" height="3.821" rx="1.911" transform="rotate(-30 40.339 75.012)"/>\r\n  <rect x="44.542" y="82.293" width="33.095" height="3.821" rx="1.911" transform="rotate(-30 44.542 82.293)"/>\r\n  <rect x="48.746" y="89.573" width="29.043" height="3.821" rx="1.911" transform="rotate(-30 48.746 89.573)"/>\r\n  <path d="M13.82 45.347l50.305-29.044.764 1.325L14.585 46.67z"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M85.048 53.428L64.36 17.92l-1.728 1.006 21.18 36.355 1.236-1.853zm9.61 16.493l-1.793.897 3.77 6.472.007.011c.71 1.184 1.222 2.481 1.171 3.694-.047 1.13-.587 2.346-2.343 3.444-3.18 1.987-25.291 14.808-36.966 21.48a1 1 0 10.992 1.736c11.658-6.662 33.813-19.507 37.034-21.52 2.243-1.402 3.204-3.186 3.281-5.056.075-1.785-.662-3.486-1.45-4.8l-3.704-6.358z" fill="#000"/>\r\n  <path opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M54.367 10.29a1 1 0 01-.37 1.364 7943.31 7943.31 0 01-24.024 13.68c-7.909 4.491-14.478 8.222-15.459 8.81-.726.436-1.342 1.31-1.605 2.391-.26 1.069-.148 2.243.448 3.237l.006.01.005.009 2 3.5.496.868-1.736.992-.496-.868-1.995-3.491c-.899-1.504-1.036-3.225-.671-4.728.362-1.493 1.246-2.87 2.52-3.635.995-.597 7.632-4.367 15.595-8.89 8.121-4.612 17.621-10.007 23.922-13.62a1 1 0 011.364.37z" fill="#fff"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.928 32.59L53.024 10.02a6 6 0 018.196 2.196l23.81 41.24 1.237-1.856-23.315-40.384a8 8 0 00-10.928-2.928L12.928 30.859A8 8 0 0010 41.787l37.858 65.572a8 8 0 0010.928 2.928l39.096-22.572a8 8 0 002.928-10.928l-4.454-7.715-1.792.896 4.514 7.819a6 6 0 01-2.196 8.196l-39.096 22.572a6 6 0 01-8.196-2.196L11.732 40.787a6 6 0 012.196-8.196z"/>\r\n  <path opacity=".8" d="M105.515 21.267l5.957 3.44-22.546 39.051-5.958-3.44z"/>\r\n  <path d="M111.472 24.706l5.957 3.44-22.546 39.051-5.957-3.44z"/>\r\n  <path opacity=".2" d="M94.882 67.198l-11.914-6.88.989 12.045 10.925-5.165z"/>\r\n  <path d="M83.78 69.613l.177 2.75 2.47-1.222-2.647-1.528z"/>\r\n  <path opacity=".8" d="M109.365 14.598a3 3 0 014.098-1.098l3.359 1.94-4.586 7.943-5.957-3.44 3.086-5.345z"/>\r\n  <path d="M116.822 15.44l3.359 1.939a3 3 0 011.098 4.098l-3.086 5.345-5.957-3.44 4.586-7.943z"/>\r\n</svg>\r\n'},function(e,t){e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11a9 9 0 019-9h104a9 9 0 019 9v98a9 9 0 01-9 9H11a9 9 0 01-9-9V11zm9-7a7 7 0 00-7 7v98a7 7 0 007 7h104a7 7 0 007-7V11a7 7 0 00-7-7H11z"/>\r\n  <path d="M4 10a6 6 0 016-6h106a6 6 0 016 6v8H4v-8z" fill-opacity=".25"/>\r\n  <rect x="16" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="54" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="92" y="9" width="25" height="5" rx="2.5"/>\r\n  <rect x="9" y="9" width="5" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="47" y="9" width="5" height="5" rx="2.5"/>\r\n  <rect opacity=".5" x="85" y="9" width="5" height="5" rx="2.5"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M122 18H4v2h37v96h2V20h79v-2z"/>\r\n  <path d="M4 19h37v97H10a6 6 0 01-6-6V19z" fill-opacity=".25"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.394 25.643a3.697 3.697 0 00-3.697 3.695 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.695zm0 13.3a3.697 3.697 0 00-3.697 3.694 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.694zM5.697 55.936a3.697 3.697 0 017.394 0 3.697 3.697 0 01-7.394 0zm3.697 9.605a3.697 3.697 0 00-3.697 3.695 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.695zM5.697 82.535a3.697 3.697 0 017.394 0 3.697 3.697 0 01-7.394 0zm3.697 9.605a3.697 3.697 0 00-3.697 3.694 3.697 3.697 0 007.394 0 3.697 3.697 0 00-3.697-3.694zM30.097 25.643H16.048v1.478h14.049v-1.478zm0 13.3H16.048v1.477h14.049v-1.477zM16.048 52.242h14.049v1.478H16.048v-1.478zm14.049 13.3H16.048v1.477h14.049v-1.478zM16.048 78.84h14.049v1.478H16.048V78.84zm14.049 13.3H16.048v1.477h14.049V92.14zM16.048 28.598H38.23v1.477H16.048V28.6zm22.182 13.3H16.048v1.477H38.23v-1.478zM16.048 55.196H38.23v1.478H16.048v-1.478zm22.182 13.3H16.048v1.478H38.23v-1.478zm-22.182 13.3H38.23v1.477H16.048v-1.478zM38.23 95.095H16.048v1.477H38.23v-1.477zM16.048 31.553h18.485v1.478H16.048v-1.478zm18.485 13.3H16.048v1.477h18.485v-1.478zM16.048 58.152h18.485v1.478H16.048v-1.478zm18.485 13.3H16.048v1.477h18.485v-1.478zM16.048 84.751h18.485v1.477H16.048v-1.477zM34.533 98.05H16.048v1.478h18.485V98.05z"/>\r\n  <path opacity=".1" d="M115 6a1 1 0 000-2v2zM6 17v-6H4v6h2zm0-6c0-.84.26-2.122 1.012-3.166C7.726 6.842 8.926 6 11 6V4C8.274 4 6.474 5.158 5.388 6.666 4.34 8.122 4 9.84 4 11h2zm5-5H115V4H11v2z" fill="#fff"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M121 11a1 1 0 011 1V108.5c0 2.21-.694 4.095-1.96 5.437-1.27 1.344-3.043 2.063-5.04 2.063H11a1 1 0 010-2h104c1.503 0 2.73-.531 3.585-1.437.859-.908 1.415-2.273 1.415-4.063V12a1 1 0 011-1z" fill="#000"/>\r\n</svg>\r\n'},function(e,t){e.exports='<svg width="126" height="120" xmlns="http://www.w3.org/2000/svg">\r\n  <path d="M4 10a6 6 0 016-6h106a6 6 0 016 6v7H4v-7z" fill-opacity=".2"/>\r\n  <path d="M63 4h2v112h-2zM65 59h57v2H65z"/>\r\n  <path d="M4 17h118v2H4z"/>\r\n  <rect x="16.788" y="8.915" width="25.139" height="4.436" rx="2.218"/>\r\n  <rect x="77.418" y="8.915" width="25.139" height="4.436" rx="2.218"/>\r\n  <rect x="9.394" y="8.915" width="4.436" height="4.436" rx="2.218"/>\r\n  <rect x="70.024" y="8.915" width="4.436" height="4.436" rx="2.218"/>\r\n  <rect opacity=".2" x="9" y="37" width="47" height="20" rx="2"/>\r\n  <rect x="9" y="26" width="37" height="6" rx="3"/>\r\n  <rect x="9" y="61" width="23.661" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="91" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="75" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="105" width="24" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="68" width="16" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="98" width="16" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="9" y="82" width="36" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="61" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="91" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="75" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="35" y="105" width="21" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="27" y="68" width="29" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="27" y="98" width="29" height="4" rx="2" fill-opacity=".2"/>\r\n  <rect x="47" y="82" width="9" height="4" rx="2" fill-opacity=".2"/>\r\n  <path d="M64 61h58v49a6 6 0 01-6 6H64V61z" fill-opacity=".25"/>\r\n  <rect x="71.503" y="89.988" width="41.406" height="14.788" rx="2"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M72 71h25v2H72v-2zm41 4H87v2h26v-2zm-24 8H72v2h17v-2zm15-4H72v2h32v-2zm-32-4h13v2H72v-2zm41-4H99v2h14v-2zm-7 8h7v2h-7v-2zm7 4H91v2h22v-2z"/>\r\n  <path opacity=".1" d="M115 6a1 1 0 000-2v2zM6 17v-6H4v6h2zm0-6c0-.84.26-2.122 1.012-3.166C7.726 6.842 8.926 6 11 6V4C8.274 4 6.474 5.158 5.388 6.666 4.34 8.122 4 9.84 4 11h2zm5-5H115V4H11v2z" fill="#fff"/>\r\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2 11a9 9 0 019-9h104a9 9 0 019 9v98a9 9 0 01-9 9H11a9 9 0 01-9-9V11zm9-7a7 7 0 00-7 7v98a7 7 0 007 7h104a7 7 0 007-7V11a7 7 0 00-7-7H11z"/>\r\n  <path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M121 12a1 1 0 011 1V108.5c0 2.21-.694 4.095-1.96 5.437-1.27 1.344-3.043 2.063-5.04 2.063H11a1 1 0 010-2h104c1.503 0 2.73-.531 3.585-1.437.859-.908 1.415-2.273 1.415-4.063V13a1 1 0 011-1z" fill="#000"/>\r\n</svg>\r\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <g clip-path="url(#clip-calendar-inline-editor)">\n    <rect class="bg-fill" width="220" height="164" rx="3"/>\n    <rect class="highlight-stroke" x="62" y="40" width="97" height="83" rx="3" stroke-width="2"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M53.5 0v164"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M166.5 0v164"/>\n    <path class="highlight-fill" opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M-49 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm113 0a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H64zm0 112a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H64zM174 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 54.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 67.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 80.5h83"/>\n    <path class="highlight-stroke" stroke-opacity=".25" d="M69 93.5h83"/>\n    <rect class="highlight-fill" x="69" y="102" width="41" height="14" rx="2"/>\n    <rect class="highlight-stroke" opacity=".5" x="117" y="103" width="34" height="12" rx="1" stroke-width="2"/>\n  </g>\n  <defs>\n    <clipPath id="clip-calendar-inline-editor">\n      <path class="bg-fill" d="M0 0h220v164H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <rect class="bg-fill" width="220" height="164" rx="3"/>\n  <g clip-path="url(#clip-calendar-popup-editor)">\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M52.5 0v164"/>\n    <path class="highlight-stroke" opacity=".32" stroke-opacity=".25" d="M165.5 0v164"/>\n    <path class="highlight-fill" opacity=".1" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm113 0a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zm0 112a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zM173 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm223 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n  </g>\n  <path class="bg-fill" fill-rule="evenodd" clip-rule="evenodd" d="M32 25a3 3 0 00-3 3v102a3 3 0 003 3h74l4.5 4.5 4.5-4.5h74a3 3 0 003-3V28a3 3 0 00-3-3H32z"/>\n  <path class="highlight-fill" d="M106 133l.7-.7-.29-.3H106v1zm4.5 4.5l-.7.7.7.71.7-.7-.7-.71zm4.5-4.5v-1h-.41l-.3.3.71.7zM30 28c0-1.1.9-2 2-2v-2a4 4 0 00-4 4h2zm0 102V28h-2v102h2zm2 2a2 2 0 01-2-2h-2a4 4 0 004 4v-2zm74 0H32v2h74v-2zm5.2 4.8l-4.5-4.5-1.4 1.4 4.5 4.5 1.4-1.4zm3.1-4.5l-4.5 4.5 1.4 1.4 4.5-4.5-1.4-1.4zm74.7-.3h-74v2h74v-2zm2-2a2 2 0 01-2 2v2a4 4 0 004-4h-2zm0-102v102h2V28h-2zm-2-2a2 2 0 012 2h2a4 4 0 00-4-4v2zM32 26h157v-2H32v2z"/>\n  <rect class="highlight-fill" x="41" y="108" width="46" height="14" rx="2"/>\n  <rect class="highlight-stroke" opacity=".5" x="94" y="109" width="44" height="12" rx="1" stroke-width="2"/>\n  <path class="highlight-fill" fill-rule="evenodd" clip-rule="evenodd" d="M41 46h134v-1H41v1zm0 14h134v-1H41v1zm134 14H41v-1h134v1zM41 88h134v-1H41v1z" fill-opacity=".25"/>\n  <defs>\n    <clipPath id="clip-calendar-popup-editor">\n      <path class="bg-fill" d="M0 0h220v164H0z"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <g clip-path="url(#clip-0-calendar-density)">\n    <rect class="bg-fill" width="220" height="164" rx="3"/>\n    <g clip-path="url(#clip-1-calendar-density)" class="highlight-fill">\n      <path opacity=".32" fill-rule="evenodd" clip-rule="evenodd" d="M52 0v164h1V0h-1zm113 0v164h1V0h-1z" fill-opacity=".25"/>\n      <path opacity=".3" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v62a3 3 0 003 3h93a3 3 0 003-3V22a3 3 0 00-3-3h-93zm223 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zM60 78a3 3 0 013-3h93a3 3 0 013 3v62a3 3 0 01-3 3H63a3 3 0 01-3-3V78zm113-28a3 3 0 013-3h93a3 3 0 013 3v34a3 3 0 01-3 3h-93a3 3 0 01-3-3V50zm3 53a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-229 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n      <rect x="60" y="19" width="99" height="40" rx="3"/>\n    </g>\n  </g>\n  <defs>\n    <clipPath id="clip-0-calendar-density">\n      <rect class="bg-fill" width="220" height="164" rx="3"/>\n    </clipPath>\n    <clipPath id="clip-1-calendar-density">\n      <path class="bg-fill" d="M0 0h220v164H0z" rx="3"/>\n    </clipPath>\n  </defs>\n</svg>\n'},function(e,t){e.exports='<svg class="onboarding-illustration" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 164">\n  <rect width="220" height="164" rx="3" class="bg-fill"/>\n  <g clip-path="url(#clip-0-calendar-density)" class="highlight-fill">\n    <path opacity=".32" fill-rule="evenodd" clip-rule="evenodd" d="M52 0v164h1V0h-1zm113 0v164h1V0h-1z" fill-opacity=".25"/>\n    <path opacity=".3" fill-rule="evenodd" clip-rule="evenodd" d="M-50 19a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm110 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3H63a3 3 0 01-3-3v-6zm0 84a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3H63a3 3 0 01-3-3v-6zm3 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3H63zM173 22a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm0 28a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm-223-3a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-3 31a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93zm-229 3a3 3 0 013-3h93a3 3 0 013 3v6a3 3 0 01-3 3h-93a3 3 0 01-3-3v-6zm229 25a3 3 0 00-3 3v6a3 3 0 003 3h93a3 3 0 003-3v-6a3 3 0 00-3-3h-93z"/>\n    <rect x="60" y="75" width="99" height="12" rx="3"/>\n  </g>\n  <defs>\n    <clipPath id="clip-0-calendar-density">\n      <path class="bg-fill" d="M0 0h220v164H0z" rx="3"/>\n    </clipPath>\n  </defs>\n</svg>\n'},,,,,,,,,function(e,t){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1 1h2v1H1V1zm1 1h2v1H2V2zm4 0h2v1H6V2zm1-1h2v1H7V1zM3 3h4v1H3V3zm1 1h2v1H4V4zM3 5h4v1H3V5zM2 6h2v1H2V6zm4 0h2v1H6V6zm1 1h2v1H7V7zM1 7h2v1H1V7z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n    <path d="M1 7h8v2H1z"/>\n</svg>'},function(e,t){e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M1 2h8v1H1V2zM0 1h10v1H0V1zm0 7h10v1H0V8zm0-6h1v6H0V2zm9 0h1v6H9V2z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M1 3h6v1H1V3zM0 2h8v1H0V2zm1 7h6v1H1V9zM0 3h1v7H0V3zm7 0h1v7H7V3zM2 0h8v1H2V0zm7 1h1v7H9V1z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n  <path d="M10.2.5l-.7-.7L5 4.3.5-.2l-.7.7L4.3 5-.2 9.5l.7.7L5 5.7l4.5 4.5.7-.7L5.7 5"/>\n</svg>\n'},function(e,t){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n  <path d="M0 5H10V6H0V5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M9 1v8H1V1h8m1-1H0v10h10V0z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M3 0H2v2H0v8h8V8h2V0H3zm4 9H1V3h6v6zm2-2H8V2H3V1h6v6z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-close-glyph dpi-standard">\n    <path fill="#93120F" d="M8 7v-2h1v-2h-2v1h-2v-1h-2v2h1v2h-1v2h2v-1h2v1h2v-2h-1z" />\n    <path fill="#7E0200" d="M5 5h2v2h-2v-2zm-1-1h1v1h-1v-1zm-1-1h1v1h-1v-1zm5 0h1v1h-1v-1zm-1 1h1v1h-1v-1zm-3 3h1v1h-1v-1zm-1 1h1v1h-1v-1zm4-1h1v1h-1v-1zm1 1h1v1h-1v-1z" />\n  </g>\n  <g class="window-close-glyph dpi-high">\n    <polygon fill="#4c0102" points="9 3 8.29 3 6 5.29 3.71 3 3 3 3 3.71 5.29 6 3 8.29 3 9 3.71 9 6 6.71 8.29 9 9 9 9 8.29 6.71 6 9 3.71 9 3" />\n  </g>\n\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-minimize-glyph dpi-standard">\n    <rect x="3" y="5" width="6" height="2" fill="#965612"/>\n    <rect x="9" y="5" width="1" height="2" fill="#ab6e1c" class="semi" />\n    <rect x="2" y="5" width="1" height="2" fill="#ab6e1c" class="semi"/>\n  </g>\n  <g class="window-minimize-glyph dpi-high">\n    <rect x="2.5" y="5.5" width="7" height="1" fill="#965612"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n  </g>\n\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-zoom-glyph dpi-standard">\n    <polygon points="9 5 7 5 7 3 5 3 5 5 3 5 3 7 5 7 5 9 7 9 7 7 9 7 9 5" fill="#0a630c"/>\n    <rect x="5" y="2" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="5" y="9" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="9" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n    <rect x="2" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n  </g>\n  <g class="window-zoom-glyph dpi-high">\n    <polygon points="9.5 5.5 6.5 5.5 6.5 2.5 5.5 2.5 5.5 5.5 2.5 5.5 2.5 6.5 5.5 6.5 5.5 9.5 6.5 9.5 6.5 6.5 9.5 6.5 9.5 5.5" fill="#0a630c"/>\n    <rect x="5.5" y="2" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="5.5" y="9.5" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n  </g>\n\n  <g class="window-fullscreen-glyph dpi-standard">\n    <polygon points="9 7.6 4.4 3 8.38 3.1 8.9 3.63" fill="#0a630c"/>\n    <polygon points="3 4.5 7.5 9 3.63 8.9 3.1 8.38" fill="#0a630c"/>\n  </g>\n  <g class="window-fullscreen-glyph dpi-high">\n    <polygon points="3 4.5 7.5 9 3.63 9 3 8.38 3 4.5" fill="#0a630c"/>\n    <polygon points="9 7.5 4.5 3 8.38 3 9 3.63 9 7.5" fill="#0a630c"/>\n  </g>\n\n  <g class="window-restore-glyph dpi-standard">\n    <polygon points="6 10 2 6 6 6 6 10" fill="#0a630c"/>\n    <polygon points="6 2 10 6 6 6 6 2" fill="#0a630c"/>\n  </g>\n  <g class="window-restore-glyph dpi-high">\n    <polygon points="6 1.5 10.5 6 6.50 6 6 5.50 6 1.5" fill="#0a630c"/>\n    <polygon points="6 10.5 1.5 6 5.50 6 6 6.50 6 10.5" fill="#0a630c"/>\n  </g>\n</svg>\n'},,,,,,,,,,,,,,,,function(e,t){e.exports={OptionalBlueprint:{getClasses:()=>"",getIconClass:()=>"",Icon:()=>null}}},,,,,function(e,t){e.exports='\x3c!--  Mask definitions for SVG icons --\x3e\n<defs>\n  \x3c!-- shared paths --\x3e\n  <path id="folder-shape"\n    d="M0 3 1 2 7 2 8 3 8 4 15 4 16 5 16 13 15 14 1 14 0 13 Z"\n    stroke="#fff"\n    stroke-width="2"\n    stroke-opacity="1" />\n\n  <path id="sync-cloud"\n    d="M13.996 7.172C15.164 7.585 16 8.697 16 10c0 1.657-1.337 3-3.01 3H3.01C1.346 13 0 11.653 0 10c0-1.314.84-2.43 2.022-2.836C2.187 5.942 3.232 5 4.5 5c.667 0 1.272.26 1.72.686C6.765 4.123 8.25 3 10 3c2.21 0 4 1.79 4 4 0 .058 0 .115-.004.172z"/>\n\n  <g id="sd-group">\n    <path fill="#000" d="M8 8h8v8h-8z"/>\n    <path fill="#fff" d="M13 9h3v3h-3z"/>\n    <path fill="#fff" d="M13 13h3v3h-3z"/>\n    <path fill="#fff" d="M9 9h3v3h-3z"/>\n    <path fill="#fff" d="M9 13h3v3h-3z"/>\n  </g>\n\n  <path id="sd-bookmark"\n    d="M44 29v34l11-5.667 11 5.667v-34h-22zm11 24.5l-8 4.41v-25.91h16v26l-8-4.5z"/>\n\n  <filter id="sd-bookmark-filter" x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox">\n    <feOffset dx="1" dy="1" in="SourceAlpha" result="shadowOffset"/>\n    <feGaussianBlur stdDeviation=".5" in="shadowOffset" result="shadowBlur"/>\n    <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0" in="shadowBlur"/>\n  </filter>\n\n  \x3c!-- gradients --\x3e\n  <linearGradient id="border-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0.3" offset="0"/>\n    <stop stop-color="#fff" stop-opacity="0.6" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="icon-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0" offset="0.3"/>\n    <stop stop-color="#fff" stop-opacity="0.2" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="sd-bookmark-gradient" x1="0" y1="1" x2="1" y2="1">\n    <stop stop-color="#000" stop-opacity="0" offset="0.5"/>\n    <stop stop-color="#000" stop-opacity="1" offset="0.5"/>\n  </linearGradient>\n\n  <linearGradient id="sd-folder-gradient" x1="20%" y1="111%" x2="90%" y2="80%">\n    <stop stop-color="var(--colorBgLight)" offset="0%"/>\n    <stop stop-color="var(--colorBgLight)" offset="82%"/>\n    <stop stop-color="var(--colorBg)" offset="83%"/>\n    <stop stop-color="var(--colorBg)" offset="100%"/>\n  </linearGradient>\n\n  <linearGradient id="bookmark-graphic-gradient" x1="0%" y1="0%" x2="100%" y2="100%">\n    <stop stop-color="rgba(0,0,0, 0.1)" offset="0%"/>\n    <stop stop-color="transparent" offset="70%"/>\n  </linearGradient>\n\n  <linearGradient x1="0.15" y1="0.3" x2="0.3" y2="0.5" id="guest-intro-bg-gradient">\n    <stop offset="0" stop-color="var(--colorFg)" stop-opacity="0.03" />\n    <stop offset="1" stop-color="var(--colorFg)" stop-opacity="0.003" />\n  </linearGradient>\n\n  <linearGradient x1="1" y1="0" x2="0" y2="1" id="guest-intro-accent-gradient">\n    <stop offset="0" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n    <stop offset="0.5" stop-color="var(--colorAccentBg)" stop-opacity="1" />\n    <stop offset="1" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n  </linearGradient>\n\n  <linearGradient id="private-ghost-gradient" x1="35" y1="0" x2="35" y2="80" gradientUnits="userSpaceOnUse">\n    <stop stop-color="var(--colorFg)" stop-opacity=".8"/>\n    <stop stop-color="var(--colorFg)" offset="1" stop-opacity=".2"/>\n  </linearGradient>\n\n\n  \x3c!-- masks --\x3e\n  <mask id="trash-folder-mask">\n    <path d="M11 1v-1h-6v1h-4v1h14v-1h-4z" fill="#fff" />\n    <path d="M3 3h10v12h-10v-12z" fill="#000"\n      stroke="#fff" stroke-width="2" stroke-opacity="1" />\n    <path d="M6 6h1v6h-1z" fill="#fff" />\n    <path d="M9 6h1v6h-1z" fill="#fff" />\n  </mask>\n\n  <mask id="icon-mask">\n    <path d="M4 14v-12h7v12l-3.5-2.8-3.5 2.8z"\n      stroke="url(#border-gradient)"\n      stroke-width="2"\n      stroke-opacity="1"/>\n  </mask>\n\n  <mask id="mail-mask-unseen">\n    <circle cx="8" cy="8" r="4" fill="#fff" />\n    <circle cx="8" cy="8" r="2" fill="#000" />\n  </mask>\n\n  <mask id="sync-cloud-mask" x="0" y="0" width="16" height="10" fill="#fff">\n    <use xlink:href="#sync-cloud" />\n    <use mask="url(#sync-cloud-mask)"\n      xlink:href="#sync-cloud" />\n  </mask>\n\n  \x3c!-- patterns --\x3e\n  <pattern id="diagonalLinePattern" x="4" y="4" width="8" height="8" patternUnits="userSpaceOnUse" patternTransform="rotate(45)">\n    <rect x="0" y="0" width="4" height="8" style="stroke: none; fill: var(--colorHighlightBg)" />\n  </pattern>\n\n</defs>\n'}]);