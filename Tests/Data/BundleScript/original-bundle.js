!function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);h.length;)h.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={2:0},n=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;n.push([1056,0,9]),a()}([,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(2);function s(e,t,a){const s=Array.from(arguments);s[0]="Ð"+s[0];let n=Object(i.a)(...s);return n.startsWith("Ð")&&(n=n.substr(1)),{label:Object(i.a)(...arguments),labelEnglish:n}}},,,function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return xe}));var i=a(103),s=a(58),n=a.n(s),r=a(106),o=a(12),l=a(10),c=a(296),d=a(85),u=a(11),h=a(27),m=a(87),p=a(16),g=a(277),b=a(7),f=a(84),_=a.n(f),N=a(169),v=a(109),E=a.n(v),w=a(501),S=a(5),C=a(31),k=a(21),y=a(197),O=a(183),A=a(279),T=a(36),I=a(1),D=a(125),P=a(570),x=a(20);function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L=`${x.a.internals.startpage}?section=Speed-dials&activeSpeedDialIndex=0`;let j=Object(k.List)(),B=Object(k.List)(),R=!1,F=Object(k.Set)(),U=Object(k.Map)(),W=Object(k.Map)(),H=Object(k.Map)(),V=0;class G extends(Object(k.Record)({type:"tab",id:"",page:new r.b})){}class K extends(Object(k.Record)({type:"group",id:"",page:new r.b,pages:Object(k.List)()})){}function z(e){if(e.pinned&&"on"!==l.a.get(I.kTabsClosePinned))return!1;return!(l.a.get(I.kTabsNeverCloseLast)&&e.url===Y.getDefaultStartpage()&&Y.isLastPage())}const Y=new class extends n.a{constructor(...e){super(...e),M(this,"canClosePage",z),M(this,"emitChange",Object(O.a)(()=>Y.emit("change"),1,{leading:!0})),M(this,"delayedEmitChange",Object(O.a)(()=>Y.emit("change"),50,{leading:!0})),M(this,"nextTickHandler",!1)}getPages(){return j}getTabs(e,t=j){return $(e,t)}getPageById(e){return j.find(t=>t.id===e)}getPageHistory(){return B}getActivePage(e=j){return Q(e)}isIncognito(e=j){return Q(e).incognito}isActivePage(e){return this.getActivePage().get("id")===e}isUnread(e){return e.unread&&!e.discarded}getGroup(e,t=j){return Z(t,e)}isGroup(e){return q(j,e)}getGroupHighlightId(e){return X(j,e)}getTiles(e,t=j){return J(t,e)}isSelecting(){return R}getSelection(){return F}getSelectedPages(){const e=F.reduce((e,t)=>{const a=Y.getPages().find(e=>e.id===t);return a?[...e,a]:e},[]);return Object(k.List)(e).sortBy(e=>e.index)}getDiscardablePages(){return j.filter(e=>!e.discarded&&!e.active&&!e.isInspected&&e.url!==Y.getDefaultStartpage())}getNewGroupName(){return _()()}getTitleByGroupName(e,t){if(l.a.get(I.kTabsStackingAllowRename)){return(l.a.get(I.kTabsStackingNameMap)||{})[e]||t}return t}getUnreadCount(){let e=0;return Y.getPages().forEach(t=>{Y.isUnread(t)&&e++}),e}getHistoryManagerState(e){const t={},a=Y.getPages().find(t=>t.id===e);if(a){const e=a.getIn(["extData","historyManagerState"]);e&&e.forEach((e,a)=>{t[a]=e})}return t}getStepInfo(e,t){const a=Y.getTabs(!0),i="off"!==l.a.get(I.kTabsStackingMode);let s=a.findIndex(t=>t.id===e.id),n=Object(k.List)();if(-1!==s){const e=a.get(s).page,r=i?e.getIn(["extData","group"]):"";if(n=Y.getGroup(r),n.size>0){if(s=a.findIndex(e=>e.id===n.first().id),t)for(let e=s+1;e<a.size;e++)if(a.get(e).page.getIn(["extData","group"])!==r){s=e-1;break}}else n=Object(k.List)([e]);if(t&&s<a.size-1){const e=i?a.get(s+1).page.getIn(["extData","group"]):"";if(e)for(let t=s+2;t<a.size;t++)if(a.get(t).page.getIn(["extData","group"])!==e){s=t-2;break}}else if(!t&&s>0){const e=i?a.get(s-1).page.getIn(["extData","group"]):"";if(e)for(let t=0;t<s;t++)if(a.get(t).page.getIn(["extData","group"])===e){s=t+1;break}}}return-1!==s&&(s=t?s+1:s-1),{index:s,pages:n}}isLastPage(){return ee(j)}isActiveInternal(){const e=Q(j).get("url");return x.a.isInternalUrl(e)}isActiveExternal(){const e=Q(j).get("url");return!x.a.isInternalUrl(e)}getStartpage(){const e=h.a.getSync("BROWSER_COLOR_BG");return L+"&background-color="+e}hasExtensionOverride(){const e=l.a.get(I.kExtensionURLOverrides);return Array.isArray(e.newtab)&&e.newtab.some(e=>e.active)}getDefaultStartpage(){if(p.a.isGuestSession())return x.a.internals["guest-intro"];let e=l.a.get(I.kTabsNewPageLink);if(e===C.k.EXTENSION){this.hasExtensionOverride()||(e=C.k.STARTPAGE)}switch(e){case C.k.EXTENSION:return C.a;case C.k.BLANKPAGE:return x.a.internals.blankpage;case C.k.HOMEPAGE:const e=l.a.get(I.kHomepage);return e===C.l?this.getStartpage():e;case C.k.CUSTOM:const t=l.a.get(I.kTabsNewPageCustomUrl);return Object(T.k)(t)||Object(T.g)(t)?x.a.getUrl(t):x.a.internals.blankpage;case C.k.STARTPAGE:default:return this.getStartpage()}}isClosingWindow(e){return V===e}setIsClosingWindow(e,t){t?V=e:V===e&&(V=0)}canUseForMenu(e){const t=Y.getPages();return t.size===e.size&&!e.some((e,a)=>{const i=t.get(a);return e!==i&&(e.title!==i.title||e.url!==i.url)})}isUrlInAnyWindowPromise(e){return new Promise(t=>{b.default.windows.getAll({populate:!0},a=>{const i=a&&a.some(t=>t.tabs&&t.tabs.some(t=>t.url&&t.url===e||t.pendingUrl&&t.pendingUrl===e));t(i)})})}useDefaultIcon(e){return Boolean(e.getIn(["extData","useDefaultIcon"]))}emitChangeDelayed(){Y.delayedEmitChange()}emitChangeImmediately(){Y.emit("change")}emitChangeInNextTick(){!1===Y.nextTickHandler&&(Y.nextTickHandler,e.nextTick(()=>{Y.nextTickHandler=!1,Y.emit("change")}))}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}},$=E()(1)((e,t)=>e?t.map(e=>new G({page:e,id:e.id})):t.groupBy(e=>e.getIn(["extData","group"])||e.id).map((e,a,i)=>e.count()>=2?new K({id:a,pages:e,page:t.find(e=>e.id===X(t,a))}):new G({page:e.first(),id:e.first().id})).toList()),Q=E()(1)(e=>e.find(e=>e.active)||new r.b),Z=E()(10)((e,t)=>t?e.filter(e=>e.getIn(["extData","group"])===t):Object(k.List)()),q=E()(10)((e,t)=>!("off"===l.a.get(I.kTabsStackingMode)||!t)&&e.filter(e=>e.getIn(["extData","group"])===t).count()>1),X=E()(10)((e,t)=>{const a=Z(e,t).map(e=>e.id);return B.reverse().find(e=>a.contains(e))||a.first()}),J=E()(10)((e,t)=>t?e.filter(e=>e.getIn(["extData","tiling","id"])===t):Object(k.List)());const ee=E()(1)(e=>e.filter(e=>!e.isRemoved).count()<2);function te(e){return!e.favIconUrl||e.favIconUrl.startsWith("file://")?"chrome://favicon/size/16@2x/"+(e.url||""):(e.favIconUrl&&x.a.isExtensionProtocol(e.favIconUrl)&&x.a.isOurExtension(e.favIconUrl),e.favIconUrl)}function ae(e){return!e.favIconUrl&&!x.a.isInternalUrl(e.url||"")}const ie=Object(O.a)(()=>b.default.tabs.query({windowId:window.vivaldiWindowId},e=>e.forEach(e=>{const t=Y.getPages().find(t=>t.id===e.id);if(t){let a;try{a=JSON.parse(e.extData||"{}")}catch(e){a={}}const i=Object(k.Map)(a);Object(k.is)(i,t.extData)||b.default.tabs.update(t.id,{extData:JSON.stringify(t.extData.toJS())},()=>{b.default.runtime.lastError})}})),16);function se(e,t){j=j.map(a=>a.id===e?a.mergeIn(["extData"],t):a),ie()}function ne(e,t){U=U.set(e.getIn(["extData","ext_id"]),t)}function re(e,t,a,i){return oe(e,t,e=>e.set(a,i))}function oe(e,t,a){return e.map(e=>e.id===t?a(e):e)}function le(e,t){const a=e.map(e=>e.set("unread",e.id!==t&&e.unread).set("active",e.id===t).set("extData",e.id===t?e.extData.set("read",!0):e.extData).set("mediaResponseState","auto"));return ie(),a}function ce(e){if(!e||0===e.count())return;j=j.map(e=>e.getIn(["extData","ext_id"])?e:e.setIn(["extData","ext_id"],_()())),ie();const t=e.reduce((e,t)=>{const a=Y.getPages().find(e=>e.id===t);return a&&e?(e.push(a.getIn(["extData","ext_id"])),e):e},[]);Object(g.a)(window.vivaldiWindowId,{historystack:t})}function de(e,t=[]){e&&(j=Object(k.List)(e.map(e=>{e.favIconUrl||(e.favIconUrl=te(e));const t=i.a.tabToPage(e);return t.hasIn(["extData","useDefaultIcon"])?t:t.setIn(["extData","useDefaultIcon"],!1)})),e.forEach(P.b),j=j.map(e=>e.hasIn(["extData","ext_id"])?e:e.setIn(["extData","ext_id"],_()())),ie(),B=function(e,t){let a=Object(k.List)(t.reduce((t,a)=>{const i=e.find(e=>e.getIn(["extData","ext_id"])===a);return i&&t.push(i.id),t},[]));a=e.filter(e=>!a||!a.includes(e.id)).map(e=>e.id).concat(a);const i=j.find(e=>e.active);return i&&(a=Object(y.b)(a,i.id)),a}(j,t),Ae(),Y.emitChange())}function ue(e,t){let a=e.index;const i=l.a.get(I.kTabsNewPlacement);if(function(e){return U.get(e.getIn(["extData","ext_id"]))}(e))ne(e,!1),a=e.index;else if("directrightofcurrent"===i){const e=Y.getActivePage();if(e.pinned){const e=Y.getPages().find(e=>!e.pinned);a=e?e.index:a}else a=e.index+1}else if("rightofcurrent"===i&&e.openerTabId){const i=Y.getPages().find(t=>t.id===e.openerTabId);if(i&&i.pinned)a=e.index;else{const i=t=>t.id!==e.openerTabId&&t.openerTabId!==e.openerTabId,s=t.skipWhile(i).takeUntil(i).last();s&&(a=s.index+1)}}else if("alwayslast"===i&&!e.pinned){const e=t.last();e&&(a=e.index+1)}return a}function he(e){j=j.filter(t=>t.id!==e).map((e,t)=>e.set("index",t)),B=B.filter(e=>j.some(t=>t.id===e)),ce(B),Ae()}function me(e,t,a){let s=!1;const n=j.map(n=>n.id===e?(t.url&&(t.title=a.title,t.favIconUrl=te(a),s=!0,n=n.remove("pendingUrl")),(n=i.a.updatePage(n,t)).setIn(["extData","useDefaultIcon"],ae(a))):n);Object(k.is)(n,j)||(j=n,s?Y.emitChangeImmediately():Y.emitChangeDelayed())}function pe(e,t=!1,a=0,i=""){W=W.delete(e),H=H.delete(e);let s=0;H.forEach(e=>{e.index<=a&&s++}),a-=s;let n=new r.b({id:e,discarded:t});i&&(n=n.setIn(["extData","group"],i),ie());const o=j.splice(a,0,n).map((e,t)=>e.set("index",t));j=o,Object(w.a)(b.default.tabs.get)(e).then(t=>{Object(P.b)(t),me(e,t,t)}),Ae(),Y.emitChangeDelayed()}function ge(e){const t=le(j,e);Object(k.is)(t,j)||(j=t,Ae(),b.default.tabs.update(e,{active:!0},()=>{b.default.runtime.lastError}),B=Object(y.b)(B,e),ce(B),Y.emitChange())}let be=null,fe=null;function _e(e){const t=l.a.get(I.kTabsActivationPreferRelated),a=l.a.get(I.kTabsActivationOnClose);let i;if(t){if(i=function(e,t=!0){let a;if(e.openerTabId){const i=()=>j.takeUntil(t=>t.id===e.id).filter(t=>t.openerTabId===e.openerTabId).reverse(),s=()=>j.slice(e.index+1).filter(t=>t.openerTabId===e.openerTabId);a=t?s().first()||i().first():i().first()||s().first(),a||(a=j.find(t=>t.id===e.openerTabId))}return a||(a=j.skipUntil(t=>t.id===e.id).skip(1).find(t=>t.openerTabId===e.id)),a}(e,"left"!==a),i)return i}switch(a){case"left":const t=e.index-1;i=t<0?j.find(t=>t.id!==e.id):j.get(t);break;case"right":i=j.get(e.index+1),i||(i=j.reverse().find(t=>t.id!==e.id));break;case"activation_order":i=void 0;break;default:0,i=void 0}if(!i){const t=B.filter(e=>j.some(t=>t.id===e)).filter(t=>t!==e.id).last();i=j.find(e=>e.id===t)}return i===e&&(i=null),i}function Ne(e){if(1===j.size&&!z(e.first()))return;let t=e.filter(e=>j.find(t=>e.id===t.id));if(!t.count())return;const a=l.a.get(I.kTabsClosePinned);if("off"===a?t=e.filter(e=>!e.pinned):"bury"===a&&(t=e.filter(e=>!e.pinned),B=e.filter(e=>e.pinned).reduce((e,t)=>Object(y.c)(e,t.id),B)),j.count()===t.count()){if(l.a.get(I.kTabsNeverCloseLast)&&!p.a.isSettings()){const e=p.a.getId();Y.isClosingWindow(e)||b.default.tabs.create({url:Y.getDefaultStartpage(),windowId:e,active:!1,transition:d.a.AUTO_TOPLEVEL},()=>{})}}const i=t.some(e=>e.active),s=j.find(e=>e.active)||j.first(),n="bury"===a&&s&&s.pinned&&e.some(e=>e.id===s.id);if(i){let e=_e(s);e||(e=j.count()>=1?j.first():null),e&&ge(e.id)}const r=p.a.getId();t.map(e=>e.id).forEach(e=>{p.a.isHTML5Fullscreen(r)&&m.a.toggleFullscreen(r),b.default.tabs.remove(e,()=>{b.default.runtime.lastError})}),i||(n?ge(B.last()):Ae())}function ve(e,t,a,i="",s=""){const n=e.id;j=oe(j,n,e=>function(e,t,a,i,s){e=e.set("pendingUrl",t);const n=new r.a({url:t,post:a,headers:i,transition:s});return e.set("target",n)}(e,t,a,i,s)),j=re(j,n,"mimeType",""),Y.emitChange()}function Ee(e,t,a){if(e.some(e=>e.pinned))return void console.warn("Can't group pinned pages.");const i=(e=e.map(e=>j.find(t=>t.id===e.id)||e).toOrderedSet().toList()).find(e=>"group"===e.getIn(["extData","tiling","type"]));let s=i&&i.getIn(["extData","tiling"])||"";const n=e.first().getIn(["extData","tiling","id"]);let r;if(!s&&n&&e.every(e=>"selection"===e.getIn(["extData","tiling","type"])&&e.getIn(["extData","tiling","id"])===n)&&(s=e.first().getIn(["extData","tiling"]).set("type","group")),a)r=a;else{const t=e.findIndex(e=>e.getIn(["extData","group"]));r=-1!==t?e.getIn([t,"extData","group"]):_()()}const o=e.filter(e=>e.windowId!==window.vivaldiWindowId);e=e.filter(e=>e.windowId===window.vivaldiWindowId);const l="number"==typeof t?t:-1;r=r||_()(),function(e,t,a){e.forEach(e=>{const i=H.get(e.id);H=i?H.set(e.id,{windowId:i.windowId,index:t,groupName:a}):H.set(e.id,{windowId:window.vivaldiWindowId,index:t,groupName:a})})}(o,l,r);const c=(e=e.map(e=>e.mergeIn(["extData"],{group:r,tiling:s}))).filter(e=>e.windowId===window.vivaldiWindowId).sortBy(e=>e.index).first(),d="number"!=typeof t?c.index:t;j=j.filterNot(t=>e.some(e=>e.id===t.id)).splice(d,0,...e),Ae(),ie(),b.default.tabs.move(e.map(e=>e.id).toArray(),{windowId:window.vivaldiWindowId,index:d}),b.default.tabs.move(o.map(e=>e.id).toArray(),{windowId:window.vivaldiWindowId,index:d}),Y.emitChangeDelayed()}function we(e,t){j=j.map(a=>e.some(e=>e.id===a.id)?a.set("mediaResponseState",t):a),Y.emitChangeDelayed()}function Se(e,t,a=!1){if(a&&Y.isGroup(t.getIn(["extData","group"]))){const a=Y.getGroup(t.getIn(["extData","group"])).map(e=>e.id);return e.union(a)}return e.add(t.id)}function Ce(e,t,a=!1){return e.contains(t.id)?function(e,t,a=!1){if(a&&Y.isGroup(t.getIn(["extData","group"]))){const a=Y.getGroup(t.getIn(["extData","group"])).map(e=>e.id);return e.subtract(a)}return e.remove(t.id)}(e,t,a):Se(e,t,a)}function ke(e,t){let a=e.toList();a=a.filter(e=>e!==t.id),a=a.map(e=>{const t=Y.getPages().find(t=>t.id===e);return t?t.index:-1}),0!==a.count&&(a=a.insert(0,t.index),b.default.tabs.highlight({tabs:a.toArray()}))}let ye=null,Oe=null;function Ae(e=!1){R=!1,ye=Oe=Y.getActivePage();const t=!e&&l.a.get(I.kTabsSelectionIncludeActive);F=t&&ye?Se(Object(k.Set)(),Oe,!0):Object(k.Set)()}function Te(e,t,a=!0){if(R){const e=F.map(e=>{const t=j.find(t=>t.id===e);return t&&"number"==typeof t.index?t.index:-1}).filter(e=>e>-1).sort(),i="next"===t,s=i?e.last():e.first(),n=i?s+1:s-1;if(Oe&&ye){const t=n<0||n>=j.size?j.get(s).id:j.get(n).id,r=F.size>1&&!(ye.id<=Oe.id&&Oe.id<=t&&i||ye.id>=Oe.id&&Oe.id>=t&&!i);if(!r&&(n<0||n>j.size))return;if(r){const t=j.get(i?e.first():e.last());t&&Ie(t,!1,a)}else{const e=j.get(n);e&&Ie(e,!1,a)}}}else{const i=Y.isGroup(e.getIn(["extData","group"]));if(i&&l.a.get(I.kTabsSelectionIncludeActive))Ie(e,!1,a);else if(i){const i=Y.getGroup(e.getIn(["extData","group"])).map(e=>e.id),s="next"===t?i.last()+1:i.first()-1,n=j.find(e=>e.id===s);n&&Ie(n,!1,a)}else{const i="next"===t?e.index+1:e.index-1;if(i>=0&&i<j.size){const e=j.get(i);e&&Ie(e,!1,a)}}}}function Ie(e,t,a,i=!1){R||Ae(i),t?function(e){const t=e;if(ye&&Oe){const e=ye.index,a=Oe.index,i=!l.a.get(I.kTabsSelectionIncludeActive);F=F.subtract(j.filter(t=>t.index>=Math.min(e,a)&&t.index<=Math.max(e,a)).flatMap(e=>{const t=e.getIn(["extData","group"]);return Y.isGroup(t)?Y.getGroup(t):[e]}).map(e=>e.id)).union(j.filter(a=>a.index>=Math.min(e,t.index)&&a.index<=Math.max(e,t.index)&&!(i&&a.active)).flatMap(e=>{const t=e.getIn(["extData","group"]);return Y.isGroup(t)?Y.getGroup(t):[e]}).map(e=>e.id)),Oe=t,ke(F,Y.getActivePage()),R=!0,Y.emitChangeDelayed()}}(e):function(e,t){Oe=e,!1===R&&(ye=e);F=!1===R&&e.active?Se(F,e,t):Ce(F,e,t);ke(F,Y.getActivePage()),R=!0,Y.emitChangeDelayed()}(e,a)}const De=function(){let e,t;return function(a,i=!1){Object(N.a)(a)?(e?e=Object(y.a)(B,e):(e=B,t=B.last()),e=Object(y.d)(e,!1===i),ge(e.last()),Object(D.e)(a,()=>{const a=t,i=e&&e.last();a&&i&&(B=B.filter(e=>e!==a&&e!==i).push(a),a!==i&&(B=B.push(i))),ce(B),e=t=null})):(B=Object(y.d)(B,!1===i),ce(B),ge(B.last()))}}(),Pe=function(){let e,t;return function(a,i=!1){const s=Y.getPages(),n=s.findIndex(e=>e.active);e?e=Object(y.a)(B,e):(e=B,t=s.getIn([n,"id"]));const r=((n+(i?-1:1))%s.size+s.size)%s.size,o=s.getIn([r,"id"]);o&&ge(o),Object(D.e)(a,()=>{const a=t,i=s.getIn([r,"id"]);e&&a&&i&&(B=Object(y.a)(B,e.filter(e=>e!==a&&e!==i).push(a).push(i))),ce(B),e=t=null})}}();Y.dispatchToken=u.a.register(t=>{switch(t.actionType){case"PAGE_CLEAR":j=Object(k.List)(),B=Object(k.List)(),R=!1,F=Object(k.Set)(),U=Object(k.Map)();break;case"CHROME_TABS_INIT":de(t.tabs,t.historystack);break;case"CHROME_TABS_CREATED":const[d]=t.args;!function(t){let a=i.a.tabToPage(t),s=!1;const n=ue(a,j),r=n!==a.index;let c;if(r&&b.default.tabs.move(a.id,{index:n}),b.default.windows.update(window.vivaldiWindowId,{focused:!0,drawAttention:!0}),a.openerTabId){const e=Y.getActivePage();e&&(c=e.imageLoading)}else c=l.a.get(I.kPageImageLoading);if(c&&t.id&&S.a.tabsPrivate.update(t.id,{showImages:"never"!==c,loadFromCacheOnly:"cache"===c}),l.a.get(I.kTabsStackingOpenInCurrent)&&void 0!==a.openerTabId){const t=Y.getPages().find(e=>e.id===a.openerTabId);if(t){const i=t.getIn(["extData","group"]),n=l.a.get(I.kTabsNewPlacement);if(Y.isGroup(i)){a=a.setIn(["extData","group"],i);const e=t.getIn(["extData","tiling"]);e&&(a=a.setIn(["extData","tiling"],e)),ie()}else"openintabstackwithrelated"!==n||x.a.isInternalUrl(t.url)||t.pinned||(s=!0,e.nextTick(()=>{o.a.createTabStack(Object(k.List)([t,a]))}))}}a.getIn(["extData","ext_id"])&&(a=a.setIn(["extData","ext_id"],_()()),ie());const d=ae(t);d!==Y.useDefaultIcon(a)&&(a=a.setIn(["extData","useDefaultIcon"],d),ie()),B=t.active?Object(y.b)(B,a.id):Object(y.c)(B,a.id),ce(B),j=j.map(e=>e.index>=t.index?e.set("index",e.index+1):e),j=j.splice(t.index,0,a),t.active&&(j=le(j,t.id)),Ae(),r||s||Y.emitChange()}(d);break;case"CHROME_TABS_REMOVED":const[h]=t.args;he(h),Y.emitChangeImmediately();break;case"CHROME_TABS_UPDATED":const[m,g,f]=t.args;me(m,g,f);break;case"CHROME_TABS_MOVED":const[N,v]=t.args;!function(e,t){const a=j.find(t=>t.id===e);if(a){const e=function(e,t,a){const i=e.findIndex(e=>e.id===t.id);return a===i&&t.index===a?e:e.delete(i).splice(a,0,t).map((e,t)=>e.set("index",t))}(j,a,t.toIndex);Ae(),Object(k.is)(j,e)||(j=e,Y.emitChangeDelayed())}}(N,v);break;case"CHROME_TABS_ACTIVATED":const[E]=t.args;!function(e){const t=Y.getActivePage();if(e.tabId===t.id)return;const a=le(j,e.tabId),i=B.last();Object(k.is)(a,j)&&i===e.tabId||(j=a,B=Object(y.b)(B,e.tabId),ce(B),Ae(),Y.emitChange())}(E);break;case"CHROME_TABS_DETACHED":const[w,C]=t.args;!function(e,t){const a=j.find(t=>t.id===e);if(a){if(Object(P.a)(e,a.url),he(e),Ae(),a.active){const e=_e(a);e&&ge(e.id)}Y.emitChangeDelayed()}}(w);break;case"CHROME_TABS_ATTACHED":const[O,T]=t.args;!function(e,t){const a=W.get(e);if(t.discarded)pe(e,!0,t.newPosition);else if(void 0!==a)a!==window.vivaldiWindowId&&pe(e,!1,t.newPosition);else{const a=H.get(e),i=a?a.groupName:"";H=H.set(e,{windowId:t.newWindowId,index:t.newPosition,groupName:i})}}(O,T);break;case"CHROME_TABS_REPLACED":break;case"PAGE_CLOSE":Ne(t.pages);break;case"PAGE_OPEN_URL":ve(t.page,t.url,t.post,t.headers,t.transition);break;case"PAGE_OPEN":ge(t.pageId);break;case"PAGE_MINIMIZE":be&&Object(k.is)(fe,B)||(be=B,fe=B),be=Object(y.d)(be,!0),ge(be.last()),fe=B;break;case"PAGE_CLONE":t.pages.forEach(e=>b.default.tabs.duplicate(e.id,t=>{if(t&&t.id){l.a.get(I.kTabsStackingOpenInCurrent)&&Y.isGroup(e.getIn(["extData","group"]))&&se(t.id,{group:e.getIn(["extData","group"])});const a=l.a.get(I.kTabsActivationOnClone);let i="alwayslast"===a?-1:t.index;if(t.pinned&&"alwayslast"===a){const e=Y.getPages().find(e=>!e.pinned);i=e?e.index-1:i}t.id&&b.default.tabs.move(t.id,{index:i})}}));break;case"PAGE_SET_IS_INSPECTED":n=t.pageId,r=t.inspected,j=j.map(e=>e.id===n?e.set("isInspected",r):e);break;case"PAGE_SET_IS_RESTORED":ne(t.page,t.restored);break;case"PAGE_TABSTACK_CREATE":Ee(t.pages,t.targetIndex,t.groupName);break;case"PAGE_CLOSE_OTHER":!function(e,t){let a;a=t?e.flatMap(e=>Y.isGroup(e.getIn(["extData","group"]))?Y.getGroup(e.getIn(["extData","group"])):k.List.of(e)):e,Ne(j.filterNot(e=>a.some(t=>t.id===e.id)))}(t.pages,t.includeGroup);break;case"PAGE_TABSTACK_CLOSE":!function(e,t=!1){if(t){Ne(j.filter(t=>t.getIn(["extData","group"])===e.getIn(["extData","group"])))}else{const t=["extData","group"],a=j.filter(a=>a.getIn(t)===e.getIn(t)).map(e=>e.id),i=B.reverse().find(e=>a.contains(e));Ne(j.filter(e=>e.id===i))}}(t.page,t.closeAll);break;case"PAGE_TABSTACK_REMOVE_FROM":u.a.waitFor([c.b.getDispatchToken()]),s=t.pages,j=j.map(e=>s.some(t=>t.id===e.id)?e.mergeIn(["extData"],{group:"",tiling:""}):e),ie(),Y.emitChangeDelayed();break;case"PAGE_TABSTACK_EXPAND":a=t.groupName,j=j.map(e=>e.getIn(["extData","group"])===a?e.mergeIn(["extData"],{group:"",tiling:""}):e),ie(),Y.emitChangeDelayed();break;case"PAGE_TILE_PAGES":u.a.waitFor([c.b.getDispatchToken()]),function(e,t){j=j.map(a=>e.some(e=>e.id===a.id)?a.mergeIn(["extData"],{tiling:t}):a),ie(),Y.emitChangeDelayed()}(t.pages,{type:t.type,id:t.id,layout:t.layout});break;case"PAGE_TOGGLE_PINNED":!function(e,t,a){let i=!!t||!a&&void 0;if(void 0===i){const t=e.reduce((e,t)=>e+(t.pinned?1:0),0);i=t!==e.size&&(0===t||void 0)}void 0!==i&&(e=e.sort((e,t)=>e.index<t.index?!0===i?-1:1:e.index>t.index?!0===i?1:-1:0)),e.forEach(e=>{j=j.map(i=>{if(i.id===e.id){let e;return e=!!t||!a&&!i.pinned,b.default.tabs.update(i.id,{pinned:e}),i.set("pinned",e)}return i})}),Y.emitChangeDelayed()}(t.pages,t.forcePin,t.forceUnpin);break;case"PAGE_SET_HISTORY_MANAGER_STATE":!function(e,t){j=j.map(a=>a.set("extData",a.id===e?a.extData.set("historyManagerState",Object(k.Map)(t)):a.extData)),ie()}(t.pageId,t.state);break;case"PAGE_SET_READER_MODE":!function(e,t){j=j.map(a=>a.id===e?t?a.setIn(["extData","readerMode"],t):a.deleteIn(["extData","readerMode"]):a),ie(),Y.emitChangeDelayed()}(t.pageId,t.readerstate);break;case"PAGE_SET_ORIGIN":!function(e,t){if(t&&t.length>0)j=re(j,e,"originUrl",t),Y.emitChangeDelayed();else{const t=Y.getPages().find(t=>t.id===e);t&&t.originUrl.length>0&&(j=re(j,e,"originUrl",""),Y.emitChangeDelayed())}}(t.pageId,t.url);break;case"PAGE_SET_PROCESSEXITSTATE":!function(e,t){j=re(j,e,"processexitstate",t),Y.emitChangeDelayed()}(t.pageId,t.processexitstate);break;case"PAGE_SET_THUMBNAIL":!function(e,t){j=t?j.map(a=>a.id===e?a.mergeIn(["extData"],{urlForThumbnail:a.url,thumbnail:t}):a):j.map(t=>t.id===e?t.deleteIn(["extData","urlForThumbnail"]).deleteIn(["extData","thumbnail"]):t),Y.emitChangeDelayed()}(t.pageId,t.thumbnail);break;case"PAGE_SET_TITLE":!function(e,t){j=re(j,e,"title",t),Y.emitChangeDelayed()}(t.pageId,t.title);break;case"PAGE_SET_OVERRIDE_URL":!function(e,t){j=re(j,e,"url",t),j=re(j,e,"pendingUrl",""),Y.emitChangeDelayed()}(t.pageId,t.url);break;case"PAGE_SET_UNREAD":!function(e){j=re(j,e,"unread",!0),Y.emitChangeDelayed()}(t.pageId);break;case"PAGE_SET_IMAGE_INSPECTOR":!function(e,t){j=re(j,e,"showImageInspector",t),Y.emitChangeDelayed()}(t.pageId,t.showImageInspector);break;case"PAGE_SET_MEDIARESPONSE_STATE":we(t.pages,t.mediaResponseState);break;case"VIVALDI_TABS_ATTACHED":!function(e,t){W=W.delete(e)}(t.tabId,t.fromWindowId);break;case"VIVALDI_TABS_DETACHED":!function(e,t){if(t===window.vivaldiWindowId){if(void 0===H.get(e))return}const a=H.get(e);void 0!==a&&a.windowId===window.vivaldiWindowId?pe(e,!1,a.index,a.groupName):W=W.set(e,t)}(t.tabId,t.toWindowId);break;case"VIVALDI_TABS_UPDATED":!function(e,t){let a;a=!0===t.loadFromCacheOnly?"cache":!0===t.showImages?"always":"never",t.mimeType&&(j=re(j,e,"mimeType",t.mimeType)),j=re(j,e,"muted",t.muteTab),j=re(j,e,"imageLoading",a),Y.emitChangeDelayed()}(t.pageId,t.tabInfo);break;case"PAGE_SELECTION_SET":Ie(t.page,t.multiSelect,t.addGroup,t.excludeActive);break;case"PAGE_SELECTION_TOGGLE_RELATED":!function(e){if(R||Ae(),Oe=e,Y.isGroup(e.getIn(["extData","group"])))F=Se(F,e,!0);else{const t=Y.getTabs(),[,a]=Object(A.a)(e,t);F=a.reduce((e,t)=>e.add(t.id),F),R=!0}Y.emitChangeDelayed()}(t.page);break;case"PAGE_SELECTION_EXPAND_PREVIOUS":Te(t.page,"previous");break;case"PAGE_SELECTION_EXPAND_NEXT":Te(t.page,"next");break;case"PAGE_SELECTION_CLEAR":Ae(),Y.emitChangeDelayed();break;case"PAGE_TREE_MOVE":!function(e,t,a,i,s,n){const r=e.toArray(),o=t.toArray();let l=(a?a.index:0)+(i?1:0);for(let e=0;e<r.length;e++){const t=r[e];if(0===e?l>t.index&&l--:e>0&&l<t.index&&l++,"regular"===s){if(t.pinned&&(j=j.map(e=>{if(r.some(t=>t.id===e.id)){const t=!1;return b.default.tabs.update(e.id,{pinned:t}),e.set("pinned",t)}return e})),Y.isGroup(t.getIn(["extData","group"]))){const e=t.getIn(["extData","group"]);-1===o.findIndex(t=>e)&&(j=j.map(e=>r.some(t=>t.id===e.id)?e.mergeIn(["extData"],{group:"",tiling:""}):e)),ie()}}else if("pinned"===s)t.pinned||(j=j.map(e=>{if(r.some(t=>t.id===e.id)){const t=!0;return b.default.tabs.update(e.id,{pinned:t}),e.set("pinned",t)}return e})),Y.isGroup(t.getIn(["extData","group"]))&&(j=j.map(e=>r.some(t=>t.id===e.id)?e.mergeIn(["extData"],{group:"",tiling:""}):e),ie());else if("stack"===s){t.pinned&&(j=j.map(e=>{if(r.some(t=>t.id===e.id)){const t=!1;return b.default.tabs.update(e.id,{pinned:t}),e.set("pinned",t)}return e})),t.getIn(["extData","group"])!==n&&(j=j.map(e=>r.some(t=>t.id===e.id)?e.mergeIn(["extData"],{group:n,tiling:""}):e),ie())}b.default.tabs.move(t.id,{windowId:window.vivaldiWindowId,index:l}),Y.emitChangeDelayed()}}(t.pages,t.groups,t.beforePage,t.after,t.area,t.group);break;case"PAGE_PREVENT_UNDELETE":!function(e,t,a){se(e,{preventUndelete:t,historyCount:a}),Y.emitChangeDelayed()}(t.pageId,t.preventUndelete,t.historyCount);break;case"PAGE_CYCLE_BY_HISTORY":De(t.maybeEvent,t.goBack);break;case"PAGE_CYCLE_BY_ORDER":Pe(t.maybeEvent,t.goBack);break;case"PAGE_TABSTRIP_EMPTY":t.windowId===window.vivaldiWindowId&&(j=j.map(e=>e.set("isRemoved",!0)),Y.emitChange());break;case"PAGE_SET_TAB_FALLBACK_COLOR":!function(e,t){j=re(j,e,"tabFallbackColor",t),Y.emitChangeDelayed()}(t.pageId,t.color);break;case"WINDOW_ACTIVATED":{const{activated:e,windowId:a}=t;if(p.a.getState().has(a)&&e){we(Y.getPages().filter(e=>"user"!==e.mediaResponseState),"auto")}break}}var a,s,n,r}),t.a=Y;const{getActivePage:xe}=Y}).call(this,a(64))},,,function(e,t,a){"use strict";(function(e){var i=a(384),s=a(52),n=a(946),r=a(79),o=a(110),l=a(9),c=a(8),d=a(10),u=a(85),h=a(11),m=a(4),p=(a(27),a(53)),g=a(87),b=a(16),f=a(7),_=a(947),N=a(84),v=a.n(N),E=a(438),w=a(948),S=a(949),C=a(5),k=a(31),y=a(21),O=a(1),A=a(20);let T=Object(y.Map)();const I={onKeyboardShortcut:"handleKeyboardShortcut",onMediaStateChanged:"handleOnMediaStateChanged",onPermissionAccessed:"setPermission",onRockerGesture:"handleRockerGesture",onTabIsAttached:"handleTabAttach",onTabIsDetached:"handleTabDetach",onTabUpdated:"handleTabUpdated"},D={onBeforeUnloadDialogOpened:"handleBeforeUnloadDialogOpened",onWindowCloseCancelled:"handleWindowCloseCancelled"},P=new class{openURL(e="",t,a){return new Promise((s,n)=>{const r={bookmarkId:"",inBackground:!1,inCurrent:!1,inSpecificPageId:void 0,incognito:!1,transition:u.a.AUTO_TOPLEVEL,index:void 0,post:!1,singleton:!1,...t};if(b.a.isGuestSession()&&A.a.isBannedFromGuestMode(e))return void n(new Error("Illegal URL for Guest mode!"));(e=A.a.getUrl(e))&&"_blank"!==e||(e=l.a.getDefaultStartpage()),e===A.a.internals.welcome&&C.a.utilities.setSharedData({key:"has_shown_welcome_page",value:!0});let o,c=l.a.getActivePage();if(r.inSpecificPageId){const e=l.a.getPageById(r.inSpecificPageId);e&&(c=e)}if(r.inNewWindow)return void P.openWindow(e,{incognito:r.incognito,transition:r.transition});let d="";r.post&&([e,o]=Object(S.a)(e),d="Content-Type: application/x-www-form-urlencoded\r\n\r\n");const m=A.a.isSettingsUrl(e);let p=!1;if(r.singleton){if(A.a.internalKeyFromUrl(e)){const t=l.a.getPages().find(t=>A.a.equalUrl(e,t.url,!!r.skipParams));t&&(m&&h.a.dispatch({actionType:"PAGE_OPEN_URL",page:t,url:e}),h.a.dispatch({actionType:"PAGE_OPEN",pageId:t.id}),p=!0)}}else(r.inCurrent||r.inSpecificPageId)&&(c&&c.url||m&&e)&&(r.bookmarkId&&c&&i.a.add(c.id,r.bookmarkId,e),h.a.dispatch({actionType:"PAGE_OPEN_URL",page:c,url:e,post:o,headers:d,transition:r.transition}),p=!0);p||f.default.windows.getLastFocused({populate:!1,windowTypes:["normal"]},t=>{const u=Object(_.a)(e);let m=window.vivaldiWindowId;const p=b.a.isSettings()||b.a.isPopup();p&&t.id&&(m=t.id);const g={url:u,windowId:m,index:r.index,active:!0!==r.inBackground,transition:r.transition,openerTabId:!0===r.addOpenerTabId&&c?c.id:void 0};f.default.tabs.create(g,t=>{if(f.default.runtime.lastError&&f.default.runtime.lastError.message)console.warn("ERROR while creating new tab. Original message:\n"+f.default.runtime.lastError.message),n(f.default.runtime.lastError);else{if(t.id&&r.bookmarkId&&i.a.add(t.id,r.bookmarkId,e),r.post){const a=l.a.getPages().find(e=>e.id===t.id);a&&h.a.dispatch({actionType:"PAGE_OPEN_URL",page:a,url:e,post:o,headers:d,transition:r.transition})}p&&f.default.windows.update(m,{focused:!0}),a&&a(t),s(t)}})})}).catch(alert)}openUrls(e,t){if(t.inNewWindow)P.openWindow(e,{incognito:t.incognito});else{const a=e.length>0?e[e.length-1]:void 0;e.forEach(e=>{if(!1===t.inCurrent)if(!0===t.inBackground)P.openURL(e,t);else{const i=t;i.inBackground=e!==a,P.openURL(e,i)}else P.openURL(e,t),t.inCurrent=!1})}}closeUrl(e){const t=l.a.getPages().filter(t=>A.a.equalUrl(e,t.url));this.closePage(t)}setTitle(e,t){h.a.dispatch({actionType:"PAGE_SET_TITLE",pageId:e,title:t})}setOverrideUrl(e,t){h.a.dispatch({actionType:"PAGE_SET_OVERRIDE_URL",pageId:e,url:t})}openWindowNew(e=l.a.getDefaultStartpage(),t,a,i="normal"){"string"==typeof e&&(e=A.a.getUrl(e)),"string"==typeof t.tabUrl&&(t.tabUrl=A.a.getUrl(t.tabUrl));const s=d.a.get(O.kWindowsSizeCache);"normal"!==i||(s.width=window.innerWidth,s.height=window.innerHeight,c.a.set(O.kWindowsSizeCache,s)),C.a.zoom.getVivaldiUIZoom(n=>{const r={width:Math.round(s.width*n),height:Math.round(s.height*n),minWidth:500,minHeight:300,...t.bounds?t.bounds:null},o={incognito:!1,focused:!0,...t};o.bounds=r;const l={ext_id:v()(),windowType:i,...t.extData?JSON.parse(t.extData):null};o.extData=JSON.stringify(l),C.a.windowPrivate.create(e,o,i,"function"==typeof a?a:void 0)})}openWindow(e,t={},a,i="normal"){const s=t.hasOwnProperty("left"),n=d.a.get(O.kWindowsSizeCache);b.a.isPopup()||b.a.isSettings()||(n.width=window.innerWidth,n.height=window.innerHeight,c.a.set(O.kWindowsSizeCache,n)),C.a.zoom.getVivaldiUIZoom(r=>{const o=b.a.isMaximized()&&!s?{state:"maximized"}:{width:Math.round(n.width*r),height:Math.round(n.height*r)};"string"==typeof e&&(e=A.a.getUrl(e));const c={url:e,incognito:!1,transition:u.a.AUTO_TOPLEVEL,...o,...t},h={ext_id:v()(),windowType:i,...t.extData?JSON.parse(t.extData):null};if(c.extData=JSON.stringify(h),void 0===c.url){const e=d.a.get(O.kIncognitoShowIntro);c.url=c.incognito&&e?A.a.internals["private-intro"]:l.a.getDefaultStartpage()}f.default.windows.create(c,a)})}openIncognitoWindow(e){P.openWindow(e,{incognito:!0})}openPage(e){h.a.dispatch({actionType:"PAGE_OPEN",pageId:e})}openPageN(e){const t=e-1,a="off"===d.a.get(O.kTabsStackingMode),i=l.a.getTabs(a).get(t);i&&P.openPage(i.page.id)}openLastPage(){const e="off"===d.a.get(O.kTabsStackingMode),t=l.a.getTabs(e).last();t&&P.openPage(t.page.id)}minimizePage(){h.a.dispatch({actionType:"PAGE_MINIMIZE"})}discardPage(e){e.isInspected||f.default.tabs.discard(e.id)}setPageInspected(e,t){h.a.dispatch({actionType:"PAGE_SET_IS_INSPECTED",pageId:e,inspected:t})}clonePages(e){h.a.dispatch({actionType:"PAGE_CLONE",pages:e})}showHomepage(e){let t=d.a.get(O.kHomepage);const a=l.a.getDefaultStartpage();if(t){t===k.l&&a===k.a&&(t=a);let i={inCurrent:!0};e&&(i=e),P.openURL(t,i)}}close(){if(l.a.isSelecting()){const e=l.a.getSelection().map(e=>l.a.getPages().find(t=>t.id===e)).filter(Boolean).toList();P.closePage(e)}else{const e=l.a.getActivePage();P.closePage(e)}}closePage(e){if(b.a.isPopup()||b.a.isSettings())return void f.default.windows.getLastFocused(e=>{e.id&&g.a.close(e.id)});const t=e instanceof y.List?e:y.List.of(e);h.a.dispatch({actionType:"PAGE_CLOSE",pages:t}),"prioritizeActive"===d.a.get(O.kTabsAutoMuting)&&P.setMuting("other","unmute","auto")}reloadPage(e){(e instanceof y.List?e:y.List.of(e)).forEach(e=>f.default.tabs.reload(e))}closeToRight(e,t=!0){let a=l.a.getPages().skipUntil(t=>t.id===e.id).skip(1);if(t&&l.a.isGroup(e.getIn(["extData","group"]))){const t=["extData","group"];a=a.filter(a=>a.getIn(t)!==e.getIn(t))}a.count()&&P.closePage(a)}closeToLeft(e,t=!0){let a=l.a.getPages().takeUntil(t=>t.id===e.id);if(t&&l.a.isGroup(e.getIn(["extData","group"]))){const t=["extData","group"];a=a.filter(a=>a.getIn(t)!==e.getIn(t))}a.count()&&P.closePage(a)}setMuting(t,a,i,s){let n=y.List.of(l.a.getActivePage());"other"===t?n=l.a.getPages().filter(e=>e.id!==l.a.getActivePage().id):"all"===t?n=l.a.getPages():s&&"selection"===t&&(n=s),"auto"===i&&(n=n.filter(e=>!0!==e.muted)),"user"===i?(n.forEach(e=>{C.a.tabsPrivate.update(e.id,{muteTab:"mute"===a})}),P.setMediaResponseState(n,"user")):"other"!==t&&"all"!==t||"auto"!==i?(n.forEach(e=>{f.default.tabs.update(e.id,{muted:"mute"===a})}),e.nextTick(()=>{P.setMediaResponseState(n,i)})):"mute"===a&&(n.forEach(e=>{f.default.tabs.update(e.id,{muted:!0})}),e.nextTick(()=>{P.setMediaResponseState(n,i)}))}muteAllExcept(e){const t=l.a.getPages().filter(t=>-1===e.findIndex(e=>e.id===t.id));P.setMuting("selection","mute","user",t)}toggleMuting(e){const t=e instanceof y.List?e:y.List.of(e),a=t.filter(e=>!e.muted||r.a.hasMediaState(e.id,"playing")),i=t.filter(e=>e.muted||r.a.hasMediaState(e.id,"muting"));P.setMuting("selection","mute","user",a),P.setMuting("selection","unmute","user",i)}exitPictureInPicture(e){f.default.tabs.executeScript(e,{code:"if (document.pictureInPictureElement) { document.exitPictureInPicture() }"},()=>{f.default.runtime.lastError})}movePage(e,t,a=!0,i){const s=["extData","group"];a&&(e=e.flatMap(e=>l.a.isGroup(e.getIn(s))?l.a.getGroup(e.getIn(s)):y.List.of(e))),a&&(t=t.flatMap(e=>l.a.isGroup(e.getIn(s))?l.a.getGroup(e.getIn(s)):y.List.of(e)));var n=e.first().index>t.first().index?t.first().index:t.last().index;P.moveToIndex(e,n,i)}moveToIndex(e,t,a){const i=e instanceof y.List?Object(y.Set)(e):y.Set.of(e);f.default.tabs.move(i.map(e=>e.id).toArray().sort((e,t)=>e-t),{windowId:window.vivaldiWindowId,index:t},e=>{f.default.runtime.lastError&&console.warn("Error moving tabs: ",e,f.default.runtime.lastError.message),"function"==typeof a&&a(e)})}moveToWindow(e,t,a=!0){a?e=e.flatMap(e=>{const t=e.getIn(["extData","group"]);return l.a.isGroup(t)?l.a.getGroup(t):y.List.of(e)}):P.removeFromTabStack(e),f.default.tabs.move(e.map(e=>e.id).toJS(),{windowId:t,index:-1},a=>{f.default.runtime.lastError&&console.warn("Error moving tabs: ",a,f.default.runtime.lastError.message),f.default.windows.update(t,{focused:!0},()=>{const t=e.find(e=>e.active)||e.first();f.default.tabs.update(t.id,{active:!0})})})}stepActivePage(e){P.stepPage(l.a.getActivePage(),e)}stepPage(e,t){const a=l.a.getStepInfo(e,t);-1!==a.index&&a.pages.forEach((e,t)=>{t>0&&a.index<e.index&&a.index++,P.moveToIndex(e,a.index)})}detachPage(e,t,a){const i=e instanceof y.List?e:y.List.of(e),s=i.first(),n=i.rest();P.openWindow([],{tabId:s.id,left:t,top:a,extData:JSON.stringify({isDropped:!0})},e=>{e&&e.id&&n.count()&&P.moveToWindow(n,e.id,!1)})}createTabStack(e,t=null,a=null){h.a.dispatch({actionType:"PAGE_TABSTACK_CREATE",pages:e,targetIndex:t,groupName:a})}expandTabStack(e){h.a.dispatch({actionType:"PAGE_TABSTACK_EXPAND",groupName:e})}closeTabStack(e,t=!1){const a=d.a.get(O.kTabsNeverCloseLast),i=l.a.getPageById(e);if(i){if(t&&a){const e=l.a.getPages(),a=l.a.getGroup(i.getIn(["extData","group"]));if(e.count()===a.count())return void P.openURL("",void 0,()=>{h.a.dispatch({actionType:"PAGE_TABSTACK_CLOSE",page:i,closeAll:t})})}h.a.dispatch({actionType:"PAGE_TABSTACK_CLOSE",page:i,closeAll:t})}}removeFromTabStack(e){const t=e instanceof y.List?e:y.List.of(e);h.a.dispatch({actionType:"PAGE_TABSTACK_REMOVE_FROM",pages:t})}closeOther(e,t){const a=e instanceof y.List?e:y.List.of(e);h.a.dispatch({actionType:"PAGE_CLOSE_OTHER",pages:a,includeGroup:t})}treeMove(e,t,a,i,s,n){const r=y.List.isList(t)||Array.isArray(t)?Object(y.List)(t):y.List.of(t);h.a.dispatch({actionType:"PAGE_TREE_MOVE",pages:Object(y.List)(e),groups:r,beforePage:a,after:i,area:s,group:n})}togglePinned(e,t=!1,a=!1){let i;i=e?e instanceof y.List?e:y.List.of(e):l.a.isSelecting()?l.a.getSelection().map(e=>l.a.getPages().find(t=>t.id===e)).filter(Boolean).toList():y.List.of(l.a.getActivePage()),h.a.dispatch({actionType:"PAGE_TOGGLE_PINNED",pages:i,forcePin:t,forceUnpin:a})}setMediaResponseState(e=l.a.getActivePage(),t="auto"){const a=e instanceof y.List?e:y.List.of(e);h.a.dispatch({actionType:"PAGE_SET_MEDIARESPONSE_STATE",pages:a,mediaResponseState:t})}setImageLoading(e,t=l.a.getActivePage()){if(!t)return;let a,i;"always"===e?(a=!0,i=!1):"cache"===e?(a=!0,i=!0):"never"===e&&(a=!1,i=!1),C.a.tabsPrivate.update(t.get("id"),{showImages:a,loadFromCacheOnly:i,enablePlugins:a})}toggleImageLoading(e=l.a.getActivePage()){if(e){const t=e.get("imageLoading");"always"===t?P.setImageLoading("never"):"never"===t?P.setImageLoading("cache"):P.setImageLoading("always")}}tilePages(e,t,a="selection"){const i=t||(e.count()<4?"row":"grid");h.a.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,type:a,id:v()(),layout:i})}tileTabStack(e,t){const a=l.a.getGroup(e),i=t||(a.count()<4?"row":"grid");P.tilePages(a,i,"group")}untileTileGroup(e){const t=l.a.getTiles(e);t&&P.untilePages(t)}untilePages(e){h.a.dispatch({actionType:"PAGE_TILE_PAGES",pages:e,type:"",id:"",layout:""})}setImageInspector(e,t){h.a.dispatch({actionType:"PAGE_SET_IMAGE_INSPECTOR",pageId:e,showImageInspector:t})}setReaderState(e,t){h.a.dispatch({actionType:"PAGE_SET_READER_MODE",pageId:e,readerstate:t})}setUnread(e){h.a.dispatch({actionType:"PAGE_SET_UNREAD",pageId:e})}handleTabUpdated(e,t){h.a.dispatch({actionType:"VIVALDI_TABS_UPDATED",pageId:e,tabInfo:t})}handleKeyboardShortcut(e,t){s.a.handleShortcut(e,t,b.a.isSettings())}handleRockerGesture(e,t){e===b.a.getId()&&(t?p.a.back():p.a.forward())}handleOnMediaStateChanged(e,t,a){n.a.setMediaState(e,a);const i=r.a.hasMediaState(e,"playing"),s=d.a.get(O.kTabsAutoMuting);if("off"===s)return;const o=l.a.getPageById(e);if(o&&("user"===o.mediaResponseState||"ignore"===o.mediaResponseState))return;const c=b.a.isActive();if(t!==window.vivaldiWindowId&&!c){const e=l.a.getPages();return void(i&&P.setMuting("selection","mute","ignore",e))}const u=l.a.getActivePage(),h=u&&r.a.hasMediaState(u.id,"playing");if(r.a.hasMediaState(e,"muting")&&e===u.id)P.setMuting("selection","unmute","auto",y.List.of(u));else if("onlyActive"===s&&c){if(!l.a.isActivePage(e)&&i){const t=l.a.getPages().find(t=>t.id===e);return void(t&&P.setMuting("selection","mute","auto",y.List.of(t)))}}else if("prioritizeActive"===s&&c)if(i){if(l.a.isActivePage(e)){const t=l.a.getPages().filter(t=>t.id!==e);P.setMuting("selection","mute","auto",t)}else if(h)return void P.setMuting("selection","mute","auto",y.List.of(u))}else if((r.a.hasMediaState(e,"empty")||r.a.hasMediaState(e,"muting"))&&l.a.isActivePage(e)&&c){let e;const t=l.a.getPages(),a=l.a.getPageHistory();d.a.get(O.kTabsCycleByRecentOrder)?a.forEach(a=>{const i=t.find(e=>e.get("id")===a);i&&r.a.hasMediaState(i.id,"muting")&&i.id!==u.id&&(e=i)}):e=t.first(),e&&P.setMuting("selection","unmute","auto",y.List.of(e))}}handleTabAttach(e,t,a){h.a.dispatch({actionType:"VIVALDI_TABS_ATTACHED",tabId:e,fromWindowId:t}),P.handleOnMediaStateChanged(e,window.vivaldiWindowId,a)}handleTabDetach(e,t){h.a.dispatch({actionType:"VIVALDI_TABS_DETACHED",tabId:e,toWindowId:t})}handleWindowCloseCancelled(e){l.a.isClosingWindow(e)&&l.a.setIsClosingWindow(e,!1)}handleBeforeUnloadDialogOpened(e,t){if(e!==b.a.getId())return;t!==l.a.getActivePage().id&&P.openPage(t)}setPermission(e,t,a,i){let s=null;switch(i){case"allow":s=!1;break;case"ask":s=null;break;case"block":s=!0;break;case"default":default:s=null}let n=null;try{n=new URL(a)}catch(e){return}o.a.setPermission(e,n.origin,t,null,s)}setProcessExitState(e,t){h.a.dispatch({actionType:"PAGE_SET_PROCESSEXITSTATE",pageId:e,processexitstate:t})}setOrigin(e,t){let a=T.get(e);a&&clearTimeout(a.id),t&&t.length>0?(a={},a.url=t,a.id=setTimeout(()=>{a=T.get(e),h.a.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,url:a.url})},1e3),T=T.set(e,a)):(a&&(T=T.delete(e)),h.a.dispatch({actionType:"PAGE_SET_ORIGIN",pageId:e,url:""}))}setThumbnail(e,t){h.a.dispatch({actionType:"PAGE_SET_THUMBNAIL",pageId:e,thumbnail:t})}toggleRelatedSelection(e){h.a.dispatch({actionType:"PAGE_SELECTION_TOGGLE_RELATED",page:e})}setSelection(e,t=!1,a=!0,i=!1){h.a.dispatch({actionType:"PAGE_SELECTION_SET",page:e,multiSelect:t,addGroup:a,excludeActive:i})}expandSelectionPrevious(e,t=!0){h.a.dispatch({actionType:"PAGE_SELECTION_EXPAND_PREVIOUS",page:e,addGroup:t})}expandSelectionNext(e,t=!0){h.a.dispatch({actionType:"PAGE_SELECTION_EXPAND_NEXT",page:e,addGroup:t})}clearSelection(){h.a.dispatch({actionType:"PAGE_SELECTION_CLEAR"})}cycleByHistory(e,t={goBack:!1}){h.a.dispatch({actionType:"PAGE_CYCLE_BY_HISTORY",maybeEvent:e,goBack:t.goBack})}cycleByOrder(e,t={goBack:!1}){h.a.dispatch({actionType:"PAGE_CYCLE_BY_ORDER",maybeEvent:e,goBack:t.goBack})}setIsRestored(e,t){h.a.dispatch({actionType:"PAGE_SET_IS_RESTORED",page:e,restored:t})}setHistoryManagerState(e,t){h.a.dispatch({actionType:"PAGE_SET_HISTORY_MANAGER_STATE",pageId:e,state:t})}markPageForUndelete(e,t){t&&t.getPageHistory&&t.getPageHistory((t,a)=>{a&&h.a.dispatch({actionType:"PAGE_PREVENT_UNDELETE",pageId:e,preventUndelete:a.every(e=>A.a.isInternalUrl(e.url)),historyCount:a.filter(e=>!A.a.isInternalUrl(e.url)).length})})}setFindResults(e,t){h.a.dispatch({actionType:m.a.FIND_IN_PAGE_RESULT_ACTION,page:e,searchText:t.searchText,numberOfMatches:t.numberOfMatches,activeMatchOrdinal:t.activeMatchOrdinal,selectionRect:t.selectionRect,...t})}moveDroppedTabs(e,t,a,i){1===e.size&&e.first().getIn(["extData","group"])&&P.removeFromTabStack(e.first()),P.moveToIndex(e,a,()=>{(t?e.find(e=>e.id===parseInt(t)):e.first())&&P.openPage(t),setTimeout(()=>"function"==typeof i&&i(),100),e.some(e=>e.pinned)&&P.togglePinned(e.filter(e=>e.pinned).map(e=>e.set("pinned",!1)),!0)})}setBackgroundColorFallback(e,t){h.a.dispatch({actionType:"PAGE_SET_TAB_FALLBACK_COLOR",pageId:e,color:t})}_attachTabPrivateHandlers(){Object.keys(I).forEach(e=>C.a.tabsPrivate[e].addListener(P[I[e]]))}_attachWindowPrivateHandlers(){Object.keys(D).forEach(e=>C.a.windowPrivate[e].addListener(P[D[e]]))}clear(){h.a.dispatch({actionType:"PAGE_CLEAR"})}_registerChromeTabsEvents(){const e={onCreated:"CHROME_TABS_CREATED",onRemoved:"CHROME_TABS_REMOVED",onUpdated:"CHROME_TABS_UPDATED",onMoved:"CHROME_TABS_MOVED",onActivated:"CHROME_TABS_ACTIVATED",onDetached:"CHROME_TABS_DETACHED",onAttached:"CHROME_TABS_ATTACHED",onReplaced:"CHROME_TABS_REPLACED"},t=function(e,t,...a){const i=Object(w.a)(e,a);if(!(i&&l.a.isClosingWindow(i)||i!==window.vivaldiWindowId))switch(t){case"CHROME_TABS_CREATED":{const e={actionType:t,args:[a[0]]};h.a.dispatch(e);break}case"CHROME_TABS_UPDATED":{const e={actionType:t,args:[a[0],a[1],a[2]]};h.a.dispatch(e);break}case"CHROME_TABS_ACTIVATED":{const e={actionType:t,args:[a[0]]};h.a.dispatch(e);break}case"CHROME_TABS_ATTACHED":case"CHROME_TABS_DETACHED":case"CHROME_TABS_MOVED":case"CHROME_TABS_REMOVED":{const e={actionType:t,args:[a[0],a[1]]};h.a.dispatch(e);break}case"CHROME_TABS_REPLACED":{const e={actionType:t,args:[a[0]]};h.a.dispatch(e);break}}};Object.keys(e).forEach(a=>f.default.tabs[a].addListener(t.bind(null,a,e[a])))}loadPromise(){return new Promise((t,a)=>{f.default.windows.get(window.vivaldiWindowId,{populate:!0},a=>e.nextTick(()=>{let e={};if(a&&a.extData)try{e=JSON.parse(a.extData)}catch(e){0}const i=a&&a.tabs?a.tabs:[],s=e.historystack;h.a.dispatch({actionType:"CHROME_TABS_INIT",tabs:i,historystack:s}),P._registerChromeTabsEvents(),P._attachTabPrivateHandlers(),P._attachWindowPrivateHandlers(),d.a.addListener(O.kTabsSelectionIncludeActive,P.clearSelection),l.a.isUrlInAnyWindowPromise(A.a.internals.welcome).then(e=>{var a;a=e,b.a.isSettings()||b.a.isPopup()||b.a.isIncognitoOrGuest()||C.a.utilities.canShowWhatsNewPage(e=>{e&&C.a.utilities.getVersion((e,t)=>{const i="https://vivaldi.com/newfeatures?hl="+Object(E.a)()+"&version="+e+"&os=W";P.openURL(i,{inCurrent:!1,inBackground:a})})}),t()})}))})}};t.a=P}).call(this,a(64))},,,,function(e,t,a){"use strict";a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return b}));var i=a(42),s=a(10),n=a(168),r=a.n(n),o=a(11),l=a(4),c=a(277),d=a(21),u=a(1);function h(e){return!!e.minimalUI||!!e.fullScreen}class m extends r.a{getInitialState(){return Object(d.Map)()}_updateUIState(e,t){const a=this.isMinimalUI(e),i=h(t);return a&&!i?{...t,visibleUI:this.getUIFromPrefs()}:!a&&i?{...t,visibleUI:{bookmarksBar:!1,addressBar:!1,panelToggle:!1,tabs:!1,statusBar:"overlay"}}:t}reduce(e,t){switch(t.actionType){case l.a.WINDOW_SET_STATE:return e.set(t.windowId,t.windowState);case"WINDOW_CLOSED":return e.filter((e,a)=>a!==t.windowId);case l.a.WINDOW_UPDATE_FROM_PREFS:if(!this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:this.getUIFromPrefs()});break;case"WINDOW_ACTIVATED":{const{activated:a,windowId:i}=t;if(!this.getState().has(i))break;return e.set(i,{...e.get(i),active:a})}case"WINDOW_FULL_SCREEN":{o.a.waitFor([i.a.dispatchToken]);const{fullScreen:a,windowId:s}=t;if(!this.getState().has(s))break;const n={...e.get(s),fullScreen:a};return a||(n.html5FullScreen=!1),e.set(s,this._updateUIState(s,n))}case"WINDOW_FULL_SCREEN_MENU_BAR":{const{windowId:a,shown:i}=t;if(!this.getState().has(a))break;return e.set(a,{...e.get(a),fullscreenMenubarShown:i})}case l.a.WINDOW_HTML5_FULL_SCREEN:return e.set(t.windowId,{...e.get(t.windowId),html5FullScreen:t.html5FullScreen});case"WINDOW_MAXIMIZED":{const{maximized:a,windowId:i}=t;if(!this.getState().has(i))break;return e.set(i,{...e.get(i),maximized:a})}case"WINDOW_MINIMIZED":{const{minimized:a,windowId:i}=t;if(!this.getState().has(i))break;return e.set(i,{...e.get(i),minimized:a})}case l.a.WINDOW_MINIMAL_UI:return o.a.waitFor([i.a.dispatchToken]),e.set(t.windowId,this._updateUIState(t.windowId,{...e.get(t.windowId),minimalUI:t.minimalUI}));case l.a.WINDOW_TOGGLE_BOOKMARKS_BAR:if(this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:{...e.get(t.windowId).visibleUI,bookmarksBar:!e.get(t.windowId).visibleUI.bookmarksBar}});console.warn("Attempting to toggle toolbars for a window without minimal UI");break;case l.a.WINDOW_TOGGLE_ADDRESS_BAR:if(this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:{...e.get(t.windowId).visibleUI,addressBar:!e.get(t.windowId).visibleUI.addressBar}});console.warn("Attempting to toggle toolbars for a window without minimal UI");break;case l.a.WINDOW_TOGGLE_TABS:if(this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:{...e.get(t.windowId).visibleUI,tabs:!e.get(t.windowId).visibleUI.tabs}});console.warn("Attempting to toggle toolbars for a window without minimal UI");break;case l.a.WINDOW_TOGGLE_PANEL_TOGGLE:if(this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:{...e.get(t.windowId).visibleUI,panelToggle:!e.get(t.windowId).visibleUI.panelToggle}});console.warn("Attempting to toggle toolbars for a window without minimal UI");break;case l.a.WINDOW_TOGGLE_STATUS_BAR:if(this.isMinimalUI(t.windowId))return e.set(t.windowId,{...e.get(t.windowId),visibleUI:{...e.get(t.windowId).visibleUI,statusBar:"on"!==e.get(t.windowId).visibleUI.statusBar?"on":"off"}});console.warn("Attempting to toggle toolbars for a window without minimal UI")}return e}getId(){let e=-1;for(const[t,a]of this.getState()){if(a.active)return t;e=t}return e}isFullscreen(e=this.getId()){return this.getState().get(e).fullScreen}isHTML5Fullscreen(e=this.getId()){return this.getState().get(e).html5FullScreen}isIncognito(e=this.getId()){return this.getState().get(e).incognito}isMaximized(e=this.getId()){return this.getState().get(e).maximized}isMinimized(e=this.getId()){return this.getState().get(e).minimized}isActive(e=this.getId()){return!!this.getState().get(e)&&this.getState().get(e).active}isPopup(e=this.getId()){return!!this.getState().get(e)&&"popup"===this.getState().get(e).type}isSettings(e=this.getId()){return!!this.getState().get(e)&&"settings"===this.getState().get(e).type}isMinimalUI(e=this.getId()){return h(this.getState().get(e))}isGuestSession(e=this.getId()){return!this.getState().get(e)||this.getState().get(e).guest}getVisibleUI(e=this.getId()){return this.getState().get(e).visibleUI}isIncognitoOrGuest(e=this.getId()){return this.isIncognito(e)||this.isGuestSession(e)}getUIFromPrefs(){return{bookmarksBar:s.a.get(u.kBookmarksBarVisible),addressBar:s.a.get(u.kAddressBarVisible),panelToggle:s.a.get(u.kPanelsShowToggle),tabs:s.a.get(u.kTabsVisible),statusBar:s.a.get(u.kStatusBarDisplay)}}}const p=new m(o.a),g={_oldState:p.getState(),recordState(){const e=this._oldState,t=p.getState();this._oldState=t;for(const[a,i]of t){const t=e.get(a);t&&i.visibleUI&&h(t)===h(i)&&t.fullScreen===i.fullScreen&&t.visibleUI===i.visibleUI||Object(c.a)(a,{minimalUI:i.minimalUI,fullScreen:i.fullScreen,visibleUI:i.visibleUI})}}};function b(e){return e.html5FullScreen?"fullscreen inner":e.fullScreen?"fullscreen":e.maximized?"maximized":"normal"}p.addListener(g.recordState.bind(g)),t.a=p},,,function(e,t,a){"use strict";var i=a(0),s=a(10);var n=function(e){const[t,a]=i.useState(s.a.getList(e));return i.useEffect(()=>{function t(e,t,i){a(e=>({...e,[i]:t}))}return e.forEach(e=>s.a.addListener(e,t)),()=>{e.forEach(e=>s.a.removeListener(e,t))}},[e]),t};function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.a=function(e,t){return i.forwardRef((a,s)=>{const o=n(t);return i.createElement(e,r({},a,{ref:s,prefValues:o,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertPrefsCache.jsx",lineNumber:18}}))})}},,,,,,function(e,t,a){"use strict";var i=a(0);HTMLElement;const s=Object(i.createContext)(window);t.a=s},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(18),n=a.n(s),r=a(19),o=a(50),l=a(954),c=a(27),d=a(25),u=a(17),h=a.n(u),m=a(60),p=a(84),g=a.n(p),b=a(44),f=a(129),_=a(1),N="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButton.jsx";function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E=["mousedown","pointerdown","touchstart"],w=a(576),S=[_.kKeyboardTabToAll];class C extends i.PureComponent{constructor(...t){super(...t),v(this,"dragImage",new Image),v(this,"uuid",g()()),v(this,"buttonRef",i.createRef()),v(this,"menuIsVisible",!1),v(this,"refPopup",i.createRef()),v(this,"state",{isDragging:!1,isDragOver:!1,horizontalPosition:null,verticalPosition:null}),v(this,"updateDragImage",()=>{if(!this.props.dragImage&&!this.props.image)return void(this.dragImage.src="");const e=document.createElement("canvas"),t=new Image;t.onload=()=>{const a=e.getContext("2d");if(a.fillStyle=c.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),a.fillRect(0,0,32,32),this.props.dragImage)a.drawImage(t,4,4,24,24);else{const e=n()(a.fillStyle).luminance()<.4;e&&(a.fillStyle="white",a.globalCompositeOperation="difference",a.fillRect(0,0,32,32)),a.globalCompositeOperation="multiply",a.drawImage(t,4,4,24,24),e&&(a.globalCompositeOperation="difference",a.fillRect(0,0,32,32))}a.beginPath(),a.moveTo(16,0),a.bezierCurveTo(0,0,0,0,0,16),a.bezierCurveTo(0,32,0,32,16,32),a.bezierCurveTo(32,32,32,32,32,16),a.bezierCurveTo(32,0,32,0,16,0),a.rect(0,0,32,32),a.closePath(),a.clip(),a.clearRect(0,0,32,32),this.dragImage.src=e.toDataURL()},this.props.dragImage?t.src=this.props.dragImage:this.props.image&&(t.src="data:image/svg+xml;charset=utf-8,"+this.props.image)}),v(this,"setFocus",()=>{this.buttonRef.current&&this.buttonRef.current.focus()}),v(this,"updateLeftPopupOffset",e=>{const t=(this.props.popupWidth||200)/2,a=e.getClientRects()[0];if(!a)return;const i=this.context.innerWidth-a.right,s=a.left,n=a.width/2-4;let r=0;s<i&&s<t?r=t-s-n:i<t-n&&(r=n+i-t),this.setState({popupLeftOffset:r})}),v(this,"getContextMenuHandler",e=>this.hasMenu()||Boolean(this.props.customizeMenu)?this.showCustomizeMenu(e,e.target):null),v(this,"showMenu",e=>{if(this.state.isDragging)return;let t=[];const a=e||this.buttonRef.current;this.props.menu&&(t=t.concat(this.props.menu)),this.props.customizeMenu&&(t=t.concat(this.props.customizeMenu)),this.props.menuPromise?this.props.menuPromise().then(e=>{t=e.concat(t),this.props.menuOrigin&&(this.context.removeEventListener("pointerup",this.pointerUp,!0),Object(m.a)(this.context.vivaldiWindowId,t,this.menuVisibilityChanged,this.props.menuOrigin,a||void 0)())}):this.props.menu&&this.props.menuOrigin&&(this.context.removeEventListener("pointerup",this.pointerUp,!0),Object(m.a)(this.context.vivaldiWindowId,t,this.menuVisibilityChanged,this.props.menuOrigin,a||void 0)())}),v(this,"showCustomizeMenu",(e,t)=>{const a=!this.props.disabled,i=a?(this.props.menu||[]).concat(this.props.customizeMenu||[]):this.props.customizeMenu||[];e.persist(),e.preventDefault(),e.stopPropagation(),a&&this.props.menuPromise?this.props.menuPromise().then(t=>{Object(m.a)(this.context.vivaldiWindowId,t.concat(i),this.menuVisibilityChanged)(e)}):Object(m.a)(this.context.vivaldiWindowId,i,this.menuVisibilityChanged)(e)}),v(this,"getRect",()=>this.buttonRef.current?this.buttonRef.current.getBoundingClientRect():null),v(this,"onBlur",e=>{this.props.onBlur&&this.props.onBlur(e)}),v(this,"onFocus",e=>{this.props.onFocus&&this.props.onFocus(e)}),v(this,"onDragStart",e=>{e.persist(),e.shiftKey?(clearTimeout(this.menuTimer),e.dataTransfer.dropEffect="move",this.dragImage.src&&e.dataTransfer.setDragImage(this.dragImage,0,0),this.props.mimeType&&this.props.mimeContent&&(e.dataTransfer.setData(this.props.mimeType,this.props.mimeContent),e.dataTransfer.setData("text/plain","")),this.setState({isDragging:!0},()=>{this.props.onDragStart&&this.props.onDragStart(e)})):e.preventDefault()}),v(this,"onDragEnter",e=>{this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)&&(e.persist(),this.setState({isDragOver:!0},()=>{this.props.onDragEnter&&this.props.mimeContent?this.props.onDragEnter(e,this.props.mimeContent):this.props.onDragEnter&&this.props.onDragEnter(e)}))}),v(this,"onDragLeave",e=>{this.setState({verticalPosition:null,horizontalPosition:null,isDragOver:!1})}),v(this,"onDragOver",e=>{if(this.props.mimeType&&e.dataTransfer.types.includes(this.props.mimeType)){let t=.5;void 0!==this.props.edgeAmount&&this.props.edgeAmount>=0&&this.props.edgeAmount<=.5&&(t=this.props.edgeAmount);const a=e.currentTarget.getBoundingClientRect(),i=e.clientX-a.x,s=e.clientY-a.y,n=i<a.width*t,r=i>a.width*(1-t),o=s<a.height*t,l=s>a.height*(1-t);e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.setState({isDragOver:!0,verticalPosition:o?"top":l?"bottom":"center",horizontalPosition:n?"left":r?"right":"center"})}}),v(this,"onDrop",e=>{const t=this.state.verticalPosition||"center",a=this.state.horizontalPosition||"center";this.setState({verticalPosition:null,horizontalPosition:null,isDragging:!1,isDragOver:!1}),e.persist(),this.props.onDrop&&this.props.onDrop(e,a,t)}),v(this,"onDragEnd",e=>{e.persist(),this.setState({isDragging:!1},()=>{this.props.onDragEnd&&this.props.onDragEnd(e)})}),v(this,"pointerLeave",e=>{clearTimeout(this.menuTimer)}),v(this,"limitToDrag",e=>{e.shiftKey||e.preventDefault()}),v(this,"menuVisibilityChanged",t=>{t?this.menuIsVisible=!0:e.nextTick(()=>{this.menuIsVisible=!1})}),v(this,"onMenuIndicator",e=>{const{parentElement:t}=e.target;t instanceof HTMLElement&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),this.showMenu(t))}),v(this,"pointerDown",e=>{e.persist();const t=e.shiftKey;if(t||e.button!==b.a.kLeft||"function"!=typeof this.props.onPointerDown){if(!t){const t=e.currentTarget;let a=!0;e.preventDefault(),this.updateLeftPopupOffset(t),e.button===b.a.kLeft&&this.hasMenu()?this.props.onClick?(e.stopPropagation(),this.menuTimer=setTimeout(()=>this.showMenu(t),650)):this.menuIsVisible&&(a=!1):e.button===b.a.kRight&&(this.hasMenu()||this.props.customizeMenu)&&(e.stopPropagation(),a=!1),a&&(this.pointerTimestamp=Date.now(),this.context.addEventListener("pointerup",this.pointerUp,!0))}}else this.props.onPointerDown(e)}),v(this,"pointerUp",e=>{this.context.removeEventListener("pointerup",this.pointerUp,!0),clearTimeout(this.menuTimer);const t=this.buttonRef.current;if(t&&(e.target===t||e.target===t.parentElement)){const t=e.ctrlKey;if(e.button===b.a.kCenter||t)e.preventDefault(),e.stopPropagation(),this.props.onMiddleClick&&this.props.onMiddleClick(e);else if(e.button===b.a.kLeft){const t=Date.now()-this.pointerTimestamp;this.props.onClick&&("mouse"===e.pointerType||t<650)?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLElement&&this.showMenu(e.target))}}}),v(this,"keyDown",e=>{if(clearTimeout(this.menuTimer),this.hasMenu()){const t=e.keyCode;t===o.a.KEY_DOWN&&"bottom"===this.props.menuOrigin?(this.showMenu(e.currentTarget),e.preventDefault(),e.stopPropagation()):t===o.a.KEY_UP&&"top"===this.props.menuOrigin&&(this.showMenu(e.currentTarget),e.preventDefault(),e.stopPropagation())}else this.props.onKeyDown&&this.props.onKeyDown(e)}),v(this,"keyUp",e=>{const t=e.keyCode;t!==o.a.KEY_SPACE&&t!==o.a.KEY_ENTER&&t!==o.a.KEY_RETURN||(this.props.onClick?this.props.onClick(e):this.hasMenu()&&(e.preventDefault(),e.stopPropagation(),this.showMenu(e.currentTarget)))}),v(this,"onDoubleClick",e=>{e.stopPropagation()}),v(this,"focusPopup",()=>{this.refPopup.current&&this.refPopup.current.focusPopup()})}componentDidMount(){c.a.addListener("BROWSER_COLOR_HIGHLIGHT_BG",this.updateDragImage),this.updateDragImage(),e.nextTick(()=>{this.buttonRef.current&&this.updateLeftPopupOffset(this.buttonRef.current)})}componentWillUnmount(){c.a.removeListener("BROWSER_COLOR_HIGHLIGHT_BG",this.updateDragImage),this.context.removeEventListener("pointerup",this.pointerUp,!0)}componentDidUpdate(e,t){const a=this.props.dragImage||void 0,i=this.props.image||void 0;a===e.dragImage&&i===e.image||this.updateDragImage()}hasMenu(){return Boolean(this.props.menu)||Boolean(this.props.menuPromise)}render(){const e=this.props.disabled,t="number"==typeof this.props.tabIndex?this.props.tabIndex:this.props.prefValues[_.kKeyboardTabToAll],a=this.props.image||null,s=this.props.imagePath||null,n=this.props.title||null,r=this.props.badgeText||null,o=this.props.isMenuIndicatorVisible||!1,c=this.props.isPopupVisible||!1,d=!(!this.props.onDragStart||!this.props.mimeType),u=!(!this.props.onDrop||!this.props.onDragEnter),m=this.props.children||null,p=h()({"button-on":this.props.isOn,"button-textonly":!a&&!s,"button-pressed":this.props.isPressed||c,"button-dragged":this.state.isDragging,"button-dragover":this.state.isDragOver,"button-dragover-top":"top"===this.state.verticalPosition,"button-dragover-bottom":"bottom"===this.state.verticalPosition,"button-dragover-center":"center"===this.state.verticalPosition&&"center"===this.state.horizontalPosition,"button-dragover-left":"left"===this.state.horizontalPosition,"button-dragover-right":"right"===this.state.horizontalPosition});return n||this.props.tooltip?i.createElement("div",{className:h()("button-toolbar",this.props.className,{[this.uuid]:m,"button-menu":this.props.isMenuIndicatorVisible}),onContextMenu:e?this.getContextMenuHandler:null,style:this.props.style,draggable:e&&d||null,onPointerDown:e&&d?this.limitToDrag:null,onDragStart:e&&d?this.onDragStart:null,onDragEnd:d?this.onDragEnd:null,onDragEnter:u?this.onDragEnter:null,onDragOver:u?this.onDragOver:null,onDragLeave:u?this.onDragLeave:null,onDrop:u?this.onDrop:null,title:e?this.props.tooltip||n:null,__source:{fileName:N,lineNumber:630}},i.createElement("button",{name:this.props.name,ref:this.buttonRef,disabled:e,draggable:!e&&d||null,onDragStart:d?this.onDragStart:null,tabIndex:0!==t?t:null,onKeyDown:this.keyDown,onKeyUp:this.keyUp,onPointerDown:this.pointerDown,autoFocus:this.props.autoFocus,onPointerLeave:this.pointerLeave,onDoubleClick:this.onDoubleClick,onContextMenu:this.getContextMenuHandler,onBlur:this.onBlur,onFocus:this.onFocus,style:this.props.buttonStyle||null,title:e?null:this.props.tooltip||n,type:"button",className:p||null,__source:{fileName:N,lineNumber:647}},a&&i.createElement("span",{dangerouslySetInnerHTML:{__html:a},__source:{fileName:N,lineNumber:667}}),s&&i.createElement("img",{src:s,alt:"",__source:{fileName:N,lineNumber:668}}),(a||s)&&r&&i.createElement("span",{className:"button-badge",style:this.props.badgeColor?Object(f.f)(this.props.badgeColor):{},__source:{fileName:N,lineNumber:670}},r),n&&i.createElement("span",{className:"button-title",__source:{fileName:N,lineNumber:680}},n),o&&i.createElement("span",{className:"button-toolbar-menu-indicator",onPointerDown:this.onMenuIndicator,dangerouslySetInnerHTML:{__html:w},__source:{fileName:N,lineNumber:682}}),!a&&!s&&r&&i.createElement("span",{className:"button-badge",style:this.props.badgeColor?Object(f.f)(this.props.badgeColor):{},__source:{fileName:N,lineNumber:689}},r)),m&&this.props.hidePopup&&this.props.popupPosition&&i.createElement(l.a,{eventTypes:E,outsideClickIgnoreClass:this.uuid,disableOnClickOutside:!c,hasLightArrow:this.props.hasLightArrow,hidePopup:this.props.hidePopup,isVisible:c,position:this.props.popupPosition,className:this.props.className,leftOffset:this.state.popupLeftOffset||0,width:this.props.popupWidth||200,topOffset:this.props.topOffset,popupClassName:this.props.popupClassName,size:this.props.size,ref:this.refPopup,__source:{fileName:N,lineNumber:701}},m)):(console.warn("Button hidden due to missing title and tooltip"),null)}}v(C,"contextType",d.a),t.a=Object(r.a)(C,S)}).call(this,a(64))},,,,,,,function(e,t,a){"use strict";var i=a(0),s=a(130);class n extends i.PureComponent{render(){const{children:e,filter:t}=this.props;return t?Array.isArray(e)?e.map((e,a)=>i.createElement(i.Fragment,{key:a,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategoryChild.jsx",lineNumber:18}},Object(s.a)(e,t))):Object(s.a)(e,t):e}}t.a=n},,,function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"l",(function(){return h})),a.d(t,"m",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"j",(function(){return f})),a.d(t,"h",(function(){return _})),a.d(t,"g",(function(){return N})),a.d(t,"i",(function(){return v})),a.d(t,"d",(function(){return E})),a.d(t,"k",(function(){return w})),a.d(t,"n",(function(){return S})),a.d(t,"f",(function(){return C})),a.d(t,"c",(function(){return k}));var i=a(61),s=a.n(i),n=a(31),r=a(439);const o=["vivaldi:","chrome:","chrome-extension:"],l=[...o,"about:","data:","javascript:","view-source:"],c=[...l,"file://","ftp://","http://","https://"],d=[...o,"ftp://","http://","https://"];function u(e){if(!e.trim())return"";if(Object(r.b)(e))return s.a.format({host:Object(r.a)(e),protocol:"file"});const t=s.a.parse(e);if(!t.protocol){const t=s.a.format({host:e,protocol:"http"});return s.a.parse(t).format()}if(!t.slashes&&!c.includes(t.protocol)){const t=s.a.format({host:e,protocol:"http"});return s.a.parse(t).format()}return t.format()}function h(e){const t=s.a.parse(e),a=parseInt(t.port);return!!(t.protocol&&t.host&&t.slashes&&(null===t.port||a>=0&&a<=65535))}const m=new RegExp(`^(//|${c.join("|")})`,"g");function p(e){return e.replace(m,"")}const g=u;function b(e){return e=e.toLowerCase(),!c.some(t=>e.startsWith(t))}function f(e){return e=e.toLowerCase(),l.some(t=>e.startsWith(t))}function _(e){return e=e.toLowerCase(),["file:","localhost:"].some(t=>e.startsWith(t))}function N(e){const t=s.a.parse(e);return o.some(e=>!!t.protocol&&-1!==e.indexOf(t.protocol))}function v(e){return e.startsWith("/resources/")}function E(e){if(e.includes(n.m)){const t=n.m+"/browser.html#";e=e.includes(t)?e.substr(t.length-1,e.length):"http://"+e.substr(n.m.length+1,e.length)}else e.match(/^[a-zA-Z]+:\/\//)||(e="http://"+e);return e}function w(e){if(0===e.length)return!1;const t=e.endsWith("."),a=/^localhost/.test(e),i=!e.includes(" ")&&e.indexOf(".")>0,s=!b(e)&&""!==p(e),n=u(e),r=d.find(e=>n.startsWith(e))||"a^";if(RegExp(`(${r}).+:`).test(n)){const e=n.lastIndexOf(":")+1,t=parseInt(n.substring(e,n.length));return t>=0&&t<=65535}return!t&&(a||i||s)}function S(e){return"/"===e[e.length-1]?e.substring(0,e.length-1):e}function C(e){return y.test(e)}function k(e,t){return e.includes(".")?e:`${e}.${t}`}const y=/^(([^/<>()\[\]\.,;:\s@\"]+(\.[^/<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^/<>()[\]\.,;:\s@\"]{2,})$/i},function(e,t,a){"use strict";var i=a(39),s=a(385),n=a(8),r=a(10),o=a(27),l=a(7),c=a(5),d=a(1);const u="[bookmark update]",h=function(e){return new Promise(t=>{c.a.bookmarksPrivate.updatePartners(e,(e,a)=>{l.default.runtime.lastError&&(console.warn(u,"failed to call vivaldi.bookmarksPrivate.updatePartners:",l.default.runtime.lastError.message),e=!1,a=!1),t([e,a])})})},m=function(e){const t=function(e,a){for(let i=0;i<e.length;i++){const s=e[i];s.url&&(s.partner?console.warn(u,"partner id in bookmark tree without version:",s.partner,s.url):a.set(s.url,s.id)),s.children&&t(s.children,a)}};return Promise.all([new Promise(e=>{l.default.bookmarks.getTree(t=>{l.default.runtime.lastError&&console.warn(u,"failed to call chrome.bookmarks.getTree:",l.default.runtime.lastError.message),e(t)})}).then(e=>{const a=new Map;return e&&t(e,a),a}),fetch("./default-bookmarks/fallback-partner-ids.json",{method:"GET"}).then(e=>e.json()).then(t=>{let a=t[e];return a||(a=t[o.a.getFallbackLocale()]),a})]).then(([e,t])=>{const a={numMatch:0,size:0};return t?Promise.all(function*(e,t,a){const i=Object.keys(t);e:for(const s of i){const i=t[s];a.size+=1;for(const t of i){const i=e.get(t);if(i){console.warn(u,"Match",s,t),a.numMatch+=1,yield new Promise(e=>{l.default.bookmarks.update(i,{partner:s},()=>{l.default.runtime.lastError&&console.warn(u,"failed to update partner:",s,l.default.runtime.lastError.message),e()})});continue e}}console.warn(u,"No match for",s,i.join(" "))}}(e,t,a)).then(()=>a):a}).then(e=>{console.warn(u,"Urls matched",e.numMatch,"of",e.size)})};var p={init(){const e=function(){let e=r.a.get(d.kBookmarksLanguage);const t="be,de,de-AT,de-CH,dk-DK,en-AU,en-CA,en-GB,en-IE,en-IN,en-NZ,en-US,es,es-AR,es-CL,es-CO,es-MX,es-PE,es-VE,fr,id-ID,is,it,ja,mk-SG,my-MY,nb,nn,ph-PH,pl,pt-BR,pt-PT,ru,sv,tr,uk,vi-VI,zh-HK,zh-TW".split(",");if(e){if(t.includes(e))return e;console.error(u,"unsupported locale",e)}return e=o.a.getBestLocaleMatch(t),n.a.set(d.kBookmarksLanguage,e),e}();return h(e).then(([t,a])=>a?m(e).then(()=>(n.a.set(d.kBookmarksVersion,"0"),h(e).then(([e])=>e))):t).catch(e=>(console.warn(u,"error while updating bookmarks:",e),!1)).then(e=>(e||console.warn(u,"failed to update bookmarks, current version:",r.a.get(d.kBookmarksVersion)),e))}},g=a(22),b=(a(106),a(9)),f=a(11),_=a(2),N=a(140),v=a(254),E=a(15),w=a.n(E),S=a(21),C=a(232),k=a(20);let y=!0,O=!0;var A=new Map;const T=function(){y=!0},I=function(){y=!1,x()},D=function(){f.a.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!0})},P=function(){f.a.dispatch({actionType:"BOOKMARKS_SET_BATCH_MODE",edit:!1})},x=function(e){const t=new Promise((e,t)=>{l.default.bookmarks.getTree(t=>{e(t)})}),a=fetch("./default-bookmarks/partners.json").then(e=>e.json());return Promise.all([t,a]).then(([t,a])=>{f.a.dispatch({actionType:"BOOKMARKS_INIT",bookmarks:t,upgraded:e,partnerDB:a})})},M=function(e,t){y||f.a.dispatch({actionType:"BOOKMARKS_ADD_ITEM",id:e,changes:t})},L=function(e,t){y||f.a.dispatch({actionType:"BOOKMARKS_CHANGE_ITEM",id:e,changes:t})},j=function(e,t){y||f.a.dispatch({actionType:"BOOKMARKS_MOVE_ITEM",id:e,changes:t})},B=function(e){f.a.dispatch({actionType:"BOOKMARKS_REMOVE_ITEM",id:e})},R=function(e,t){y||x()},F=function(e){L(e,{favicon:!0})},U=function(e,t){L(e,t)},W=function(){!1===O&&(O=!0,c.a.bookmarksPrivate.onFaviconChanged.removeListener(F))},H=function(){!0===O&&(O=!1,c.a.bookmarksPrivate.onFaviconChanged.addListener(F))},V=function(e){"Escape"===e.key&&K.setCutIds([])},G=function(e,t){if("BookmarkCutIds"===e){const e=t.length>0?t.split(","):[];e.length>0?window.addEventListener("keydown",V,!0):window.removeEventListener("keydown",V,!0),f.a.dispatch({actionType:"BOOKMARKS_SET_CUT_IDS",ids:e})}},K=new class{loadPromise(){return p.init().then(e=>x(e)).then(()=>{y=!1,O=!1,l.default.bookmarks.onImportBegan.addListener(T),l.default.bookmarks.onImportEnded.addListener(I),l.default.bookmarks.onChanged.addListener(L),l.default.bookmarks.onCreated.addListener(M),l.default.bookmarks.onRemoved.addListener(B),l.default.bookmarks.onMoved.addListener(j),l.default.bookmarks.onChildrenReordered.addListener(R),c.a.bookmarkContextMenu.onOpen.addListener(W),c.a.bookmarkContextMenu.onClose.addListener(H),c.a.menubarMenu.onOpen.addListener(W),c.a.menubarMenu.onClose.addListener(H),c.a.bookmarksPrivate.onFaviconChanged.addListener(F),c.a.bookmarksPrivate.onMetaInfoChanged.addListener(U),c.a.utilities.onSharedDataUpdated.addListener(G),c.a.utilities.getSharedData({key:"BookmarkCutIds",value:""},e=>{e&&G("BookmarkCutIds",e)})})}setBookmarkBarFolderAndToggleVisibility(e){const t=g.a.getBookmarkBarFolderId()!==e||!r.a.get(d.kBookmarksBarVisible);K.setBookmarkBarFolder(e).then(e=>{e&&n.a.set(d.kBookmarksBarVisible,t)})}setBookmarkBarFolderAndShow(e){K.setBookmarkBarFolder(e).then(e=>{e&&n.a.set(d.kBookmarksBarVisible,!0)})}setBookmarkBarFolder(e){const t=function(e,t){return new Promise(a=>{e===g.a.getRootId()?a():l.default.bookmarks.update(e,{bookmarkbar:t},a)})},a=g.a.getItemById(e);return a&&g.a.isFolder(a)?new Promise(a=>{const i=g.a.getBookmarkBarFolderId();i!==e?(D(),t(i,!1).then(()=>t(e,!0)).then(()=>{P(),a(!0)})):a(!0)}):Promise.resolve(!1)}toggleSpeeddialFolder(e){const t=g.a.getItemById(e);t&&g.a.isFolder(t)&&l.default.bookmarks.update(t.id,{speeddial:!t.speeddial})}setCutIds(e){c.a.utilities.setSharedData({key:"BookmarkCutIds",value:e.length>0?e.join():""})}moveWithPromise(e,t,a){return e=g.a.validateForDrag(e),D(),Promise.all(e.map(e=>new Promise(i=>{const s=g.a.getItemById(e),n={parentId:t,index:a};l.default.bookmarks.move(e,n,e=>{i(e.id)}),void 0!==a&&(s.parentId!==t||s.index>a)&&a++}))).then(e=>(P(),e))}duplicateWithPromise(e,t,a){const i=Object(N.a)(e.map(e=>g.a.getItemById(e)).filter(e=>e&&!e.trash));return D(),((e,t,a)=>Promise.all(e.map(e=>new Promise((i,s)=>{l.default.bookmarks.create({parentId:t,index:a++,title:e.title,...Object(v.a)(e.url?{url:e.url}:null),...Object(v.a)(e.description?{description:e.description}:null),...Object(v.a)(e.nickname?{nickname:e.nickname}:null)},t=>{if(t)if((e=>!!(e.children&&e.children.length>0))(e)){const a=e.children.map(e=>e.id);this.duplicateWithPromise(a,t.id,0).then(()=>{i(t.id)})}else i(t.id);else s("Bookmark was not created")})}))))(i,t,a).then(e=>(P(),e))}createWithPromise(e,t,a){return D(),((e,t,a)=>Promise.all(e.map(e=>new Promise((i,s)=>{!0===e.separator?this.createSeparator(t,void 0===a?void 0:a++,e=>{e?i(e):s("Bookmark was not created")}):this.createBookmark(e.title,e.url||(e.children?null:C.a),t,e.description||null,e.nickname||null,void 0===a?void 0:a++,t=>{t?(e=>!!(e.children&&e.children.length>0))(e)?this.createWithPromise(e.children,t.id,0).then(()=>{i(t)}):i(t):s("Bookmark was not created")})}))))(e,t,a).then(e=>(P(),e))}createBookmark(e,t,a,i,s,n,r){l.default.bookmarks.create({title:e,url:t,parentId:a,description:i,nickname:s,index:n},e=>{l.default.runtime.lastError&&console.warn("chrome.bookmarks.create failed: %o",l.default.runtime.lastError),r&&r(e)})}createSeparator(e,t,a){l.default.bookmarks.create({title:"---",url:C.a,parentId:e,description:"separator",nickname:"",index:t},e=>{l.default.runtime.lastError&&console.warn("chrome.bookmarks.create failed: %o",l.default.runtime.lastError),a&&a(e)})}createBookmarks(e,t,a){return D(),Promise.all(e.map(e=>new Promise(i=>{const s={parentId:t,url:e.url,title:e.title,index:void 0===a?void 0:a++};l.default.bookmarks.create(s,()=>{i()})}))).then(()=>{P()})}removeWithPromise(e=[]){return D(),Promise.all(e.map(e=>{if(A.get(e))return A.get(e);const t=new Promise(t=>{const a=g.a.getItemById(e);g.a.isFolder(a)?(l.default.bookmarks.removeTree(e,()=>{l.default.runtime.lastError&&console.warn(`Error removing bookmark tree: ${e}`),A.delete(e)}),t()):(l.default.bookmarks.remove(e,()=>{l.default.runtime.lastError&&console.warn(`Error removing bookmark: ${e}`),A.delete(e)}),t())});return A.set(e,t),t})).then(()=>{P()})}update(e,t,a){l.default.bookmarks.update(e,g.a.sanitizeForUpdate(t),e=>{l.default.runtime.lastError&&console.warn("chrome.bookmarks.update",`${Object(s.a)(l.default.runtime.lastError.message)} ${Object(_.a)("Changes not saved.")}`),a&&a(e)})}create(e,t){l.default.bookmarks.create(g.a.sanitizeForUpdate(e),e=>{l.default.runtime.lastError&&console.warn("chrome.bookmarks.create",`${Object(s.a)(l.default.runtime.lastError.message)} ${Object(_.a)("Creation failed.")}`),t&&t(e)})}emptyTrash(){c.a.bookmarksPrivate.emptyTrash(e=>{!1===e&&console.warn("Empty trash failed.")})}bookmarkAllOpenPages(e,t){const a={pages:b.a.getPages(),parentId:e,index:t,isStack:!1,isSelection:!1,forceFolder:!0};return new Promise(e=>{this._bookmarkPages(a,t=>{e(t)})})}bookmarkPages(e,t,a,i){const s={pages:e instanceof S.List?e:S.List.of(e),parentId:a,index:i,isStack:t,isSelection:!0,forceFolder:e instanceof S.List};return new Promise(e=>{this._bookmarkPages(s,t=>{e(t)})})}bookmarkPageInFolder(e,t,a){return new Promise(i=>{const s=e.get("url");if(g.a.canBookmarkUrl(s)){const n=void 0===t?g.a.getRootNode().id:t;l.default.bookmarks.create({parentId:n,..."number"==typeof a?{index:a}:null,url:s,title:k.a.getDisplayTitle(e)},e=>{i(e.id)})}else i()})}_bookmarkPages(e,t){const a=b.a.getTabs(!1,e.pages).map(e=>({page:e.pages?void 0:e.page,url:e.pages?void 0:e.page.get("url"),title:e.pages?b.a.getTitleByGroupName(e.id,Object(_.a)("Stack")):k.a.getDisplayTitle(e.page),children:e.pages?e.pages.map(e=>({page:e,url:e.get("url"),title:k.a.getDisplayTitle(e)})).filter(e=>g.a.canBookmarkUrl(e.url)).toArray():void 0})).filter(e=>e.children||g.a.canBookmarkUrl(e.url)).toArray();if(1!==a.length||e.forceFolder){if(a.length>=1)if(e.isStack)Promise.all(a.map(t=>{const{children:a}=t;return new Promise(i=>{if(a&&a.length>0){const s={parentId:e.parentId,title:t.title};l.default.bookmarks.create(s,e=>{K.createBookmarks(a,e.id,0).then(()=>{i(e.id)})})}else i(void 0)})})).then(e=>{const a=e.filter(Boolean);t(a.length>0?a[0]:void 0)});else{const i={parentId:e.parentId,..."number"==typeof e.index?{index:e.index}:null,title:e.isSelection?Object(_.a)("Saved Tab Selection ($1)",[""]):Object(_.a)("Saved Tabs ($1)",[""])};l.default.bookmarks.create(i,i=>{const s=w()(i.dateAdded).format("YYYY-MM-DD, HH:mm:ss"),n=e.isSelection?Object(_.a)("Saved Tab Selection ($1)",[s]):Object(_.a)("Saved Tabs ($1)",[s]);l.default.bookmarks.update(i.id,{title:n},()=>{Promise.all(a.map(e=>{const{children:t}=e;return new Promise(a=>{if(t&&t.length>0){const s={parentId:i.id,title:e.title};l.default.bookmarks.create(s,e=>{K.createBookmarks(t,e.id,0).then(()=>{a()})})}else{const t={parentId:i.id,title:e.title,url:e.url};l.default.bookmarks.create(t,()=>{a()})}})})).then(()=>{t(i.id)})})})}}else{const{children:i,title:s,page:n}=a[0];if(i&&i.length>0){const a={parentId:e.parentId,title:s,..."number"==typeof e.index?{index:e.index}:null};l.default.bookmarks.create(a,e=>{K.createBookmarks(i,e.id,0).then(()=>{t(e.id)})})}else n&&!i?K.bookmarkPageInFolder(n,e.parentId,e.index).then(e=>{t(e)}):t(void 0)}}_setClipboard({clipboardData:e},t,a){e&&(t=g.a.validateForClipboard(t),e.setData("vivaldi/x-cut",a),e.setData(i.b,JSON.stringify(t)),e.setData("text/plain",g.a.getDragData("text/plain",t)))}cut(e,t){K._setClipboard(e,t,"true"),K.setCutIds(t),e.stopPropagation(),e.preventDefault()}copy(e,t){K._setClipboard(e,t,"false"),e.stopPropagation(),e.preventDefault()}pasteWithPromise({clipboardData:e},t,a){const s=g.a.getItemById(t);if(!s||!e)return Promise.resolve({isCut:!1,ids:[]});let n,r;g.a.isFolder(s)?(n=s.id,r=!0===a&&s.children?s.children.length:0,r>0&&s.children[r-1].trash&&r--):(n=s.parentId,r=s.index+1);const o=-1!==e.types.findIndex(e=>e===i.b)?JSON.parse(e.getData(i.b)):[];return 0===o.length?Promise.resolve({isCut:!1,ids:[]}):g.a.getCutIds().length>0&&"true"===e.getData("vivaldi/x-cut")?K.moveWithPromise(o,n,r).then(e=>(K.setCutIds([]),{isCut:!0,ids:e})):K.duplicateWithPromise(o,n,r).then(e=>({isCut:!1,ids:e}))}onDropEvent(e,t,a,s){if(e.dataTransfer.types.includes(i.b)){const n=JSON.parse(e.nativeEvent.dataTransfer.getData(i.b));i.a.isCopyModifierPressed(e)||s&&s.disableMove?K.duplicateWithPromise(n,t,a):K.moveWithPromise(n,t,a)}else i.a.getUrlsFromEventPromise(e,!0).then(e=>K.createBookmarks(e,t,a))}};t.a=K},,function(e,t,a){"use strict";a.d(t,"b",(function(){return g}));var i=a(7),s=a(22),n=a(40),r=a(12),o=a(10),l=a(85),c=a(181),d=a(5),u=a(36),h=a(1),m=a(20),p=a(160);const g="vivaldi/x-bookmarks",b={open:function(e,t){if(t&&o.a.get(h.kBookmarksConfirmOpening)&&e.bookmarks.length>=o.a.get(h.kBookmarksConfirmOpeningThreshold))n.a.showConfirmOpenBookmarkDialog(e);else{let t=!1===e.inCurrent;const a=!0===e.inNewWindow,i=!0===e.inBackground,n=!0===e.incognito;if(!1===t&&!1===a&&!1===i&&!0===e.allowOverride&&(!0===o.a.get(h.kBookmarksOpenInNewTab)&&(t=!0),1===e.bookmarks.length&&e.bookmarks[0].url.startsWith("javascript:")&&(t=!1)),!0===a){0;const t=e.bookmarks.map(e=>e.url).filter(e=>s.a.filterUrl(e).length>0);r.a.openWindow(t,{incognito:n,transition:l.a.AUTO_BOOKMARK})}else{const a=e.bookmarks.filter(e=>s.a.filterUrl(e.url).length>0),n=a.length>0?a[a.length-1]:void 0;a.forEach(e=>{!0===t?!0===i?this.openInNewTab(e,!0):this.openInNewTab(e,e!==n):(this.openInCurrentTab(e),t=!0)})}}},openInNewTab:function(e,t){r.a.openURL(e.url,{bookmarkId:e.id,inCurrent:!1,inBackground:t,transition:l.a.AUTO_BOOKMARK})},openInCurrentTab:function(e){r.a.openURL(e.url,{bookmarkId:e.id,inCurrent:!0,transition:l.a.AUTO_BOOKMARK})},openInNewWindow:function(e,t,a){r.a.openURL(e.url,{bookmarkId:e.id,inNewWindow:!0,inBackground:t,incognito:a,transition:l.a.AUTO_BOOKMARK})},getBookmarksByNode:function(e){let t=[];return e.children?t=t.concat(e.children.filter(e=>e.url)):e.url&&t.push(e),t},getBookmark:function(e,t){"function"==typeof t&&i.default.bookmarks.get(e,e=>{t(e[0])})},getOpenOptionsFromModifierKeys:p.b,getOpenOptionsFromDisposition:function(e,t,a){switch(e){case"setting":return Object(p.b)(a);case"current":return{inCurrent:!0};case"new-tab":return{inCurrent:!1,inBackground:t};case"new-window":return{inNewWindow:!0,inBackground:t};case"new-private-window":return{inNewWindow:!0,inBackground:t,incognito:!0}}return{}},isCopyModifierPressed:function(e){return e.ctrlKey},makeEventFlagsFromApiResponse:function(e){const t={};return e.left?t.button=0:e.right?t.button=2:e.center&&(t.button=1),e.ctrl&&(t.ctrlKey=!0),e.alt&&(t.altKey=!0),e.shift&&(t.shiftKey=!0),e.command&&(t.metaKey=!0),t},verifyNode(e,t){const a={...e};return a.url&&(a.url=a.url.trim()),a.title&&(a.title=a.title.trim()),a.nickname&&(a.nickname=a.nickname.trim()),a.description&&(a.description=a.description.trim()),t?(a.url="",Promise.resolve(a)):new Promise(e=>{d.a.utilities.isUrlValid(a.url,t=>{t.urlValid&&t.schemeValid||a.url.length>0&&(a.url=Object(u.b)(a.url)),e(a.url.length>0?a:null)})})},extractTitleFromEvent:function(e){var t=e.nativeEvent.dataTransfer.getData("vivaldi/x-title");if(""===t){const i=e.nativeEvent.dataTransfer.getData("text/html");if(""!==i){var a=document.createElement("div");a.innerHTML=i;const e=a.getElementsByTagName("a");if(e&&e[0]){const a=e[0].textContent;""!==a&&(t=a)}}}return t},getUrlsFromEventPromise:(e,t)=>new Promise((a,s)=>{const n=e.dataTransfer.getData("vivaldi/x-tab-entries"),r=e.dataTransfer.getData("text/uri-list");if(n){const e=JSON.parse(n).ids.map(e=>parseInt(e)).sort((e,t)=>e-t);i.default.tabs.query({},t=>a(t.filter(t=>e.some(e=>t.id===e)).filter(({url:e})=>!m.a.isInternalUrl(e)).map(({title:e,url:t},a)=>({title:e||Object(c.a)(t),url:t}))))}else{if(r.length>0){const t=b.extractTitleFromEvent(e);return a(r.split("\n").map((e,a)=>({url:e,title:0===a&&""!==t?t:Object(c.a)(e)})))}if(!0!==t)return s();{let t=e.dataTransfer.getData("text/plain");if(t.length>0){if(Object(u.l)(t))return a([{url:t,title:Object(c.a)(t)}]);if(t=t.trim(),t.length>0&&!/\s/.test(t)){const e=t.indexOf(".");if(e>0&&e<t.length-1&&(t=Object(u.b)(t),Object(u.l)(t)))return a([{url:t,title:Object(c.a)(t)}])}return s()}}}})};t.a=b},function(e,t,a){"use strict";var i=a(15),s=a.n(i),n=a(21);class r extends(Object(n.Record)({displayMode:"month",filterText:"",anchorDate:(new s.a).startOf("hour"),selectedDate:(new s.a).startOf("hour"),allDaySelected:!1,showSearchResults:!1})){}var o=r,l=a(58),c=a.n(l);class d extends(Object(n.Record)({eventsToImportCount:0,importedEventsCount:new n.List,importEventState:"INIT"})){}var u=d,h=a(10),m=a(11),p=a(248),g=a.n(p),b=a(109),f=a.n(b),_=a(272),N=a(74),v=a(2),E=a(13);Object(v.a)("Idle"),Object(v.a)("Import Started"),Object(v.a)("Events Parsed"),Object(v.a)("Importing..."),Object(v.a)("Import Finished"),Object(v.a)("Import Error");const w={local:Object(v.a)("data storage","Local"),google:Object(v.a)("Google Calendar"),vivaldi:Object(v.a)("Vivaldi.net"),caldav:Object(v.a)("CalDAV"),ical:Object(v.a)("Web Calendar")};Object(v.a)("calendar","Red"),Object(v.a)("calendar","Orange"),Object(v.a)("calendar","Gray"),Object(v.a)("calendar","Green"),Object(v.a)("calendar","Blue"),Object(v.a)("calendar","Purple"),Object(v.a)("calendar","Brown"),E.x.small,E.O.small,E.rc.small,E.Pb.small;function S(e,t){t&&"X-VIVALDI-FLOATING"!==t||(t=g.a.tz.guess());const a=g.a.tz(e,t);return new Date(Date.UTC(a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second()))}function C(e,t){return t&&"X-VIVALDI-FLOATING"!==t||(t=g.a.tz.guess()),g.a.tz([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],t).toDate()}var k=a(473);const y=Object(_.extendMoment)(g.a);var O=f()(2)((e,t,a)=>{const i=ae.getDisplayRange(t,a);let s=[];const[n,r]=Object(k.a)(e,ae.isRecurringEvent);let o=[];return n.forEach(e=>{if(e.trash&&!y.range(e.start,e.end).overlaps(i))o=o.concat(e);else if(!e.trash){const{recurrence:t}=e;if(!t)return;const{start:a,end:n}=i,r=function(e,t,a,i){return e.between(S(t,i),S(a,i),!0).map(e=>C(e,i))}(t,a.toDate(),n.toDate(),e.timezone),[l,c]=((e,t)=>{const a=[],i=[];return t.forEach(t=>{const s={...e},n=(e.recurrenceExceptions||[]).filter(e=>t.valueOf()===e.date),r=n.length>0;if(n.forEach(e=>{const{cancelled:t,parent_event_id:s,exception_event_id:n}=e;if(!t&&s&&n){i.push(n);const e=V.getEvent(s),t=V.getEvent(n);if(e&&t){const i={...t};i.id=`${e.id}:${i.start}`,i.recurrence=e.recurrence,a.push(i)}}}),!r){const i=(e.end||e.start)-e.start;s.start=t.valueOf(),s.end=t.valueOf()+i,s.is_recurring=!0,s.id=`${e.id}:${t.valueOf()}`,s.uid=e.uid?`${e.uid}:${t.valueOf()}`:e.uid,a.push(s)}}),[a,i]})(e,r);o=o.concat(l),s=s.concat(c)}}),r.filter(e=>!s.includes(e.id)&&y.range(e.start,e.end||e.start).overlaps(i,{adjacent:!0})).concat(o)}),A=a(1);let T,I=[],D=[],P=[],x=[],M=[],L={editor:{pageId:NaN,uid:Symbol("CalendarStore")},eventDraft:null,selectedEvent:"",initialEventDraft:null,confirmSave:!1,operation:""},j=[],B=new Map;const R=new Map,F=f()(1)(e=>e.filter(e=>!e.hidden)),U=f()(1)((e,t)=>t.filter(t=>e.find(e=>e.id===t.calendarId))),W=f()(2)(e=>Object(k.a)(e,e=>!e.trash)),H=new class extends c.a{getPanelResourceKey(){return-999}getMailResourceKey(){return-998}getImportStatus(e){if(!e)return new u;const t=R.get(e);return t||new u}getAllImportStates(){return R}getDefaultCalendarId(){const e=h.a.get(A.kCalendarDefaultCalendarId);return D.find(t=>t.id===e)?e:D.length>0?D[0].id:""}getEditState(){return L}getPendingEvent(){return T}getEventsPerCalendar(e){return j.filter(t=>t.calendarId===e)}getEvent(e){return j.find(t=>t.id===e)}getEvents(){return j}getAccounts(){return I}getAccountForCalendar(e){const t=H.getAccounts(),a=H.getCalendars().find(t=>t.id===e);if(!a)return;const{accountId:i}=a;return t.find(e=>e.id===i)}getCalendars(){return D}getEventTypes(){return P}getCalendarState(e,t){const a=this.getFilter(e,t),i=this.getEditState(),n=F(D),r=U(n,j);a.anchorDate.localeData()!==s.a.localeData()&&(a.anchorDate.locale(s.a.locale()),a.selectedDate.locale(s.a.locale()));let[o,l]=W(r),c=O(o,a.anchorDate,a.displayMode);if(""!==a.filterText){const e=a.filterText.toLowerCase();c=["agenda","year"].includes(a.displayMode)?c.filter(t=>ae.eventSearchPredicate(t,e)):c.map(t=>({...t,filteredOut:!ae.eventSearchPredicate(t,e)}))}return o=((e,t,a)=>{const{initialEventDraft:i}=e,{anchorDate:n,displayMode:r}=t;return i&&!i.id&&s.a.range(i.start,i.end).overlaps(ae.getDisplayRange(n,r))?a.concat([i]):a})(i,a,c),{eventTypes:P,eventDraft:i.eventDraft,initialEventDraft:i.initialEventDraft,selectedEvent:i.selectedEvent,editor:i.editor,confirmRecurringSave:i.confirmSave,events:o,eventTemplates:x,trashedEvents:l,calendarFilter:a,accounts:I,calendars:D,alarms:M,defaultCalendarId:this.getDefaultCalendarId()}}getEventAlarms(e){return M.reduce((t,a)=>{if(a.name.split(":")[0]===e){const[e,i]=a.name.split(":");t.push({eventId:e,minutes:parseInt(i),name:a.name})}return t},[])}getFilter(e,t){if(!e)return new o;let a=B.get(e);if(!a){const i=e===H.getPanelResourceKey()?A.kCalendarPanelDisplayMode:A.kCalendarDisplayMode;a=new o;const s={displayMode:h.a.get(i),...t};a=a.merge(s),B=B.set(e,a)}return a}emitChange(){this.emit("change")}emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};m.a.register(e=>{switch(e.actionType){case"CALENDAR_INIT":!function(e){const{accounts:t,calendars:a,events:i,eventTemplates:s,eventTypes:n}=e;I=t,D=a,j=i,x=s,P=n,H.emitChangeParam("calendarDataReady")}(e);break;case"CALENDAR_EVENTS_INIT":o=e.events,j=o,H.emitChangeParam("calendarDataReady");break;case"CALENDAR_EVENT_EDIT":!function(e,t){const a=L.eventDraft;if(a&&t&&a.id!==t.id)return;const i=!t,n=!a||i,r={editor:e,eventDraft:t,selectedEvent:i&&a?a.id:"",initialEventDraft:n?t?{...t}:void 0:L.initialEventDraft,confirmSave:!1,operation:""};L=r,T=null;const o=H.getFilter(e.pageId);if(t){if(!ae.getEventRange(t).contains(o.selectedDate)){const a=o.merge({selectedDate:s()(t.start)});B=B.set(e.pageId,a)}}H.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.eventDraft);break;case"CALENDAR_EVENT_SELECT":!function(e,t,a){const i={...L,selectedEvent:t?t.id:"",editor:e};L=i;const n=H.getFilter(e.pageId);if(t){let i;if(a)i=a;else{ae.getEventRange(t).contains(n.selectedDate,{exclusive:!0})||(i=s()(t.start))}if(i){const a=n.merge({selectedDate:i,allDaySelected:ae.isAllDayEvent(t)});B=B.set(e.pageId,a)}}H.emitChangeParam("calendarDataReady",e.pageId)}(e.editor,e.event,e.date);break;case"CALENDAR_EVENT_CONFIRM_CHANGE":!function(e,t,a){const i={...H.getEditState()};i.confirmSave&&!isNaN(i.editor.pageId)&&i.editor.pageId!==e.pageId||(i.editor={...e},i.confirmSave=!0,i.operation=t,a&&(T=a),L=i,H.emitChangeParam("calendarDataReady"))}(e.editor,e.operation,e.event);break;case"CALENDAR_EVENT_TYPES_INIT":r=e.eventTypes,P=r,H.emitChangeParam("calendarDataReady");break;case"CALENDAR_EVENT_TEMPLATES_INIT":n=e.templates,x=n,H.emitChangeParam("calendarDataReady");break;case"CALENDAR_ACCOUNTS_INIT":i=e.accounts,I=i,H.emitChangeParam("calendarDataReady");break;case"CALENDAR_CALENDARS_INIT":a=e.calendars,D=a,H.emitChangeParam("calendarDataReady");break;case"CALENDAR_UPDATE_UI":!function(e,t){const a=H.getFilter(e),i=a.merge(t);if(B=B.set(e,i),a.selectedDate!==i.selectedDate&&L&&L.editor.pageId===e){const e={...L,selectedEvent:""};L=e}H.emitChangeParam("calendarDataReady",e)}(e.pageId,e.calendarUI);break;case"CALENDAR_SET_IMPORTED_COUNT":!function(e){const{importId:t,importedEventsCount:a}=e,i=H.getImportStatus(t),s=i.importedEventsCount,n=s.set(s.size,a),r=i.merge({importedEventsCount:n});R.set(t,r),H.emitChangeParam("importCount")}(e.importedEventsCount);break;case"CALENDAR_TO_IMPORT_COUNT":!function(e){const{eventsToImportCount:t,importId:a}=e,i=H.getImportStatus(a).merge({eventsToImportCount:t,importedEventsCount:[]});R.set(a,i),H.emitChangeParam("importCount")}(e.eventsToImportCount);break;case"CALENDAR_SET_IMPORT_STATE":!function(e){const{importId:t,importEventState:a}=e,i=H.getImportStatus(t).merge({importEventState:a});R.set(t,i),H.emitChangeParam("importCount")}(e.importEventState);break;case"CALENDAR_SET_DEFAULT":e.defaultCalendarId,H.emitChangeParam("defaultCalendarChange");break;case"CALENDAR_ALARMS_INIT":t=e.alarms,M=t,H.emitChangeParam("calendarDataReady");break;case"VIVALDI_CALENDAR_CLEAR_IMPORT_STATUS":R.clear();break;default:return}var t,a,i,n,r,o});var V=H,G=a(18),K=a.n(G),z=a(27),Y=a(5),$=a(129),Q=a(114);const Z=z.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),q=z.a.getSync("BROWSER_COLOR_FG"),X=Object(_.extendMoment)(g.a);function J(e){return`${e<0?"+":"-"}${Math.floor(e/60).toString().padStart(2,"0")}${(e%60).toString().padStart(2,"0")}`}function ee(e,t,a){const i=X.tz.zone(e);if(!i)return"";const s=`BEGIN:VTIMEZONE\nTZID:${e}`;let n="";const{untils:r=[],offsets:o=[],abbrs:l=[]}=i;let c=r.findIndex(e=>e>t);c=Math.max(c,1);do{const t=c%2==0?"STANDARD":"DAYLIGHT";n+=`BEGIN:${t}\nDTSTART:${X.tz(r[c-1],e).format("YYYYMMDDTHHmmss")}\nTZOFFSETFROM:${J(o[c-1])}\nTZOFFSETTO:${J(o[c])}\nTZNAME:${l[c]}\nEND:${t}\n`,c++}while(c<r.length-1&&r[c]<a);return`${s}\n${n}END:VTIMEZONE\n`}const te={getCalendarColors:e=>function(e){const t=($.b+$.d)/2,a=($.a+$.c)/2,i=$.a+10;let s=K()(e);s.get("lab.l")<t?s=s.set("lab.l",t):s.get("lab.l")>a&&(s=s.set("lab.l",a));const n=K()(s).set("lab.l",s.get("lab.l")<i?`+${i}`:`-${i}`);return{"--colorCalendarBg":s.css(),"--colorCalendarBgAlpha":s.alpha(.3).css(),"--colorCalendarFg":n.css()}}(e&&e.color?e.color:z.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG")),createCalendarIcon:(e,t,a=!1)=>`<svg width="${t}" height="${t}" viewBox="0 0 32 32">\n      <circle cx="16" cy="16" r="16" fill="${e.color||Z}" />\n      ${a?`<path d="M 8 17 l 7 7 l 11 -11 l -3 -3 l -8 8 l -4 -4  z" fill="${q}" />`:""}\n    </svg>`,createEventNotificationString:(e,t,a)=>`X-VIVALDI-EVENT-REMINDER=${e}:${t}${a?`:${a}`:""}`,parseEventNotificationString:e=>{let t={notificationId:""};if(!e.startsWith("X-VIVALDI-EVENT-REMINDER"))return t;let a="";if(e.indexOf("=")>-1)if(a=e.split("=")[1],a.indexOf(":")>-1){const e=a.split(":");t={...t,notificationId:e[0],eventId:e[1]},e[2]&&(t={...t,recurringStart:parseInt(e[2])})}else t={...t,notificationId:a};return t},shouldSaveEvent:(e,t=[])=>{const a=!e.id,i=["id","uid","calendarId","start","end","allDay"],s=Object.entries(e).every(([e,t])=>!t||i.includes(e));if(a)return s?"DELETE":"SAVE";{const a=t.find(t=>t.id===e.id);return a&&Object(Q.a)(a,e)?"IGNORE":s?"DELETE":"SAVE"}},shouldIncrementSequence:(e,t=[])=>{const a=e=>[e.address,e.partstat],i=t.find(t=>t.id===e.id);if(!i)return!1;const s=(i.invites||[]).map(a),n=(e.invites||[]).map(a);return i.start!==e.start||i.end!==e.end||i.allDay!==e.allDay||!Object(Q.a)(i.rrule,e.rrule)||!Object(Q.a)(s,n)||!Object(Q.a)(i.recurrenceExceptions||[],e.recurrenceExceptions||[])},getDisplayRange:(e,t)=>{let a,i;switch(t){case"agenda":a=X(e).startOf("day"),i=X(e).add(1,"month").endOf("day");break;case"month":a=X(e).startOf("month").weekday(0),i=X(e).endOf("month").weekday(6);break;case"multiweek":a=X(e).subtract(1,"week").startOf("week"),i=X(e).add(1,"week").endOf("week");break;default:a=e.clone().startOf(t),i=e.clone().endOf(t)}return X.range(a,i)},getEventRange:e=>X.range(e.start,e.end),isAllDayEvent:e=>{if(e.allDay)return!0;const t=X(e.start),a=X(e.end);return!t.isSame(e.end,"day")&&!(a.diff(t,"day",!0)<1&&a.isSame(a.clone().startOf("day")))},isRecurringEvent:e=>Boolean(e.recurrence&&e.recurrence instanceof N.a),isGeneratedRecurringEvent:e=>-1!==("string"==typeof e?e:e.id).indexOf(":"),getGeneratedSourceEvent:e=>{const[t]=e.id.split("-")[0].split(":");if(t){const a=V.getEventsPerCalendar(e.calendarId).find(e=>e.id===t);if(a)return a}return null},generateKey:e=>{const{calendarId:t,id:a,uid:i,sequence:s}=e;let n=`${t}-${a}`;return i&&(n=`${n} '-' ${i}`),s&&(n=`${n} '-' ${s}`),n},eventSearchPredicate:(e,t)=>["title","description","location","url"].some(a=>(e[a]||"").toLowerCase().indexOf(t)>=0&&!e.trash),searchEvents:(e,t)=>e.filter(e=>te.eventSearchPredicate(e,t)).sort((e,t)=>t.start-e.start),filterEventsByPeriod:(e,t,a,i=1)=>{const s=t.clone();let n,r;"allday"===a?(n=s.startOf("day").valueOf(),r=s.add(i-1,"day").endOf("day").valueOf()):(n=s.startOf(a).valueOf(),r=s.add(i-1,a).endOf(a).valueOf());const o=t.dayOfYear(),l=e.filter(e=>e.id.indexOf("-")>0).map(e=>e.id.split("-")).filter(([e,t])=>parseInt(t)<=o).reduce((e,[t,a])=>(e[t]=Math.max(e[t]||0,parseInt(a)),e),{}),c=e.filter(e=>e.start<r&&(e.end||e.start)>n||e.start<r&&e.start>=n).filter(e=>{const[t,a]=e.id.split("-");return!a||l[t]===parseInt(a)});return"hour"===a?c.filter(e=>!te.isAllDayEvent(e)):"allday"===a?c.filter(e=>te.isAllDayEvent(e)):c},getFocusableChildren:e=>e.querySelectorAll("a[href]:not([tabindex='-1']),\n      button:not([disabled]):not([tabindex='-1']),\n      input:not([disabled]):not([tabindex='-1']),\n      select:not([disabled]):not([tabindex='-1']),\n      textarea:not([disabled]):not([tabindex='-1']),\n      [contenteditable]:not([tabindex='-1']),\n      [tabindex]:not([disabled]):not([tabindex='-1'])"),eventsToICalendar:function(e,t={}){let{method:a,includeRecurrenceId:i}=t;const s=X().format("YYYYMMDDTHHmmss"),n=["BEGIN:VCALENDAR","PRODID:-Vivaldi Calendar V1.0//EN","VERSION:2.0","DTSTAMP;VALUE=DATE-TIME:"+s];a&&n.push(`METHOD:${a}`),n.push("");let r=n.join("\r\n");const o=X.tz.guess()||"utc",l=e.reduce((e,t)=>{if(t.recurrence||t.timezone){const a=t.timezone||o,i=t.start||1/0;let s=t.end||-1/0;t.recurrence&&(s=t.recurrence.options.until?t.recurrence.options.until.valueOf():t.recurrence.options.count?t.recurrence.all().pop().valueOf():1/0),e[a]?e[a]={firstOccurrence:Math.min(i,e[a].firstOccurrence),lastOccurrence:Math.max(s,e[a].lastOccurrence)}:e[a]={firstOccurrence:i,lastOccurrence:s}}return e},{});for(const e in l)"X-VIVALDI-FLOATING"!==e&&(r+=ee(e,l[e].firstOccurrence,l[e].lastOccurrence));return e.map(e=>{const{recurrence:t}=e;let a="";if(t){const{dtstart:e,...i}=t.origOptions;a=N.a.optionsToString(i)}let n=[];e.organizer&&(n=n.concat([`ORGANIZER:mailto:${e.organizer}`])),e.invites&&e.invites.length&&(n=n.concat(e.invites.filter(t=>t.address!==e.organizer).map(e=>`ATTENDEE;RSVP=TRUE${e.partstat?`;PARTSTAT=${e.partstat}`:""}:mailto:${e.address}`)));const[r,o]=(e.uid||"").split(":");i=Boolean(o&&i);let l="",c="",d="",u="";return e.allDay?(u=";VALUE=DATE",l=`${X.tz(e.start,"utc").format("YYYYMMDD")}`,c=e.end&&X.tz(e.end,"utc").format("YYYYMMDD"),d=i&&X(o).format("YYYYMMDD")):"X-VIVALDI-FLOATING"===e.timezone?(l=X(e.start).format("YYYYMMDDTHHmmss"),c=e.end&&X(e.end).format("YYYYMMDDTHHmmss"),d=i&&X(o).format("YYYYMMDDTHHmmss")):e.timezone?(u=`;TZID=${e.timezone}`,l=X.tz(e.start,e.timezone).format("YYYYMMDDTHHmmss"),c=e.end&&X.tz(e.end,e.timezone).format("YYYYMMDDTHHmmss"),d=i&&X.tz(o,e.timezone).format("YYYYMMDDTHHmmss")):(l=X.tz(e.start,"utc").format("YYYYMMDDTHHmmss[Z]"),c=e.end&&X.tz(e.end,"utc").format("YYYYMMDDTHHmmss[Z]"),d=i&&X.tz(o,e.timezone).format("YYYYMMDDTHHmmss")),["BEGIN:VEVENT",r?`UID:${r}`:"","DTSTAMP;VALUE=DATE-TIME:"+s,e.description?`DESCRIPTION:'${e.description}`:"",`DTSTART${u}:${l}`,c?`DTEND${u}:${c}`:"",d?`RECURRENCE-ID${u}:${d}`:"",`SUMMARY:${e.title}`,a,n.length?n.join("\r\n"):"",e.sequence?`SEQUENCE:${e.sequence}`:"","END:VEVENT\r\n"].filter(Boolean).join("\r\n")}).forEach(e=>{r+=e}),r+"END:VCALENDAR"},constructUrl:e=>e.map(e=>("/"===e.charAt(0)&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),e)).join("/"),generateGUID:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),isRemoteCalendar:e=>{const t=V.getAccounts(),a=V.getCalendars().find(t=>t.id===e);if(!a)return!1;const{accountId:i}=a,s=t.find(e=>e.id===i);return!!(a&&s&&s.url&&a.active)},isCalDAV:e=>"vivaldi"===e||"caldav"===e||"google"===e,ensureAccountType:e=>Object.keys(w).find(t=>t===e)||"local",savePassword:(e,t,a,i)=>Y.a.utilities.isUrlValid(e||"",s=>{s.urlValid?(Y.a.savedpasswords.add(!0,{username:t||"",password:a||"",signon_realm:"calendar",origin:e||""}),i&&i({result:!0,message:""})):i&&i({result:!1,message:Object(v.a)("Invalid URL")})}),getPassword:(e,t)=>new Promise(a=>Y.a.savedpasswords.get({signon_realm:"calendar",origin:e||"",username:t||""},(e,t)=>a({found:e,password:t}))),deletePassword:(e,t)=>Y.a.savedpasswords.delete(!0,{signon_realm:"calendar",origin:e||"",username:t||""}),doesCalendarsExistsAndShowWarning:()=>0!==V.getCalendars().length||(re.showCalendarModal({modal:{title:Object(v.a)("No Calendar Defined"),body:Object(v.a)("At least one calendar is required to add an event."),actions:[{title:Object(v.a)("Open Calendar Settings"),action:()=>{re.showSettings("calendar")},default:!0}],cancelAction:{title:Object(v.a)("Cancel"),action:()=>{}}}}),!1)};var ae=te,ie=a(12),se=a(4);const ne=new class{openGuestWindow(){Y.a.runtimePrivate.switchToGuestSession(e=>{e||console.warn("Guest mode is disabled.")})}closeGuestSession(){Y.a.runtimePrivate.closeGuestSession(e=>{e||console.warn("Guest mode is disabled.")})}managePeople(){Y.a.runtimePrivate.openProfileSelectionWindow(e=>{e||console.warn("Failed to open profile window.")})}closeActiveProfile(){Y.a.runtimePrivate.closeActiveProfile(e=>{e||console.warn("Failed to open profile window.")})}showAddFeed(e){m.a.dispatch({actionType:se.a.MAIN_SHOW_ADD_FEED,options:e})}showQuickCommand(){m.a.dispatch({actionType:se.a.MAIN_SHOW_QUICKCOMMANDS})}showCalendar(){ie.a.openURL("vivaldi://calendar",{singleton:!0})}showCalendarNotification(e,t=!1){m.a.dispatch({actionType:se.a.MAIN_SHOW_CALENDAR_ALARM,options:{notification:e,fullscreen:t}})}showAddEvent(e,t){ae.doesCalendarsExistsAndShowWarning()&&m.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_ADD_EVENT",options:{text:e,url:t}})}showEditEvent(e){m.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_EDIT_EVENT",options:e})}showKeyboardShortcuts(){m.a.dispatch({actionType:se.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS})}showPageAccessKeys(){m.a.dispatch({actionType:se.a.MAIN_SHOW_PAGE_ACCESS_KEYS})}showConfirmOpenBookmarkDialog(e){m.a.dispatch({actionType:se.a.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG,options:e})}showClearBrowsingHistoryDialog(e){m.a.dispatch({actionType:se.a.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG,options:e})}showClearPrivateData(){ne.showClearBrowsingHistoryDialog({})}showImportCalendar(){m.a.dispatch({actionType:se.a.MAIN_SHOW_IMPORT_CALENDAR})}showCalendarModal(e){m.a.dispatch({actionType:"MAIN_SHOW_CALENDAR_MODAL_DIALOG",options:e})}showImportData(){m.a.dispatch({actionType:se.a.MAIN_SHOW_IMPORT_DATA})}showBookmarkDialog(e){m.a.dispatch({actionType:se.a.MAIN_SHOW_BOOKMARK_DIALOG,options:e})}showMailUnsubscribeDialog(e){const t={actionType:"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG",options:e};m.a.dispatch(t)}showMailAuthenticationDialog(e){const t={actionType:"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG",options:e};m.a.dispatch(t)}showMailDeleteDialogSetting(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING",options:e};m.a.dispatch(t)}showMailDeleteDialogFolders(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS",options:e};m.a.dispatch(t)}showMailDeleteDialogAccounts(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS",options:e};m.a.dispatch(t)}showMailDeleteDialogConfirmAll(e){const t={actionType:"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL",options:e};m.a.dispatch(t)}showSaveSession(e){m.a.dispatch({actionType:se.a.MAIN_SHOW_SAVE_SESSION,options:e})}showOpenSession(){m.a.dispatch({actionType:se.a.MAIN_SHOW_OPEN_SESSION})}showExtensions(){ie.a.openURL("vivaldi://extensions",{singleton:!0})}showHistory(){ie.a.openURL("vivaldi://history",{singleton:!0})}showNotes(){ie.a.openURL("vivaldi://notes",{singleton:!0})}showBookmarks(){ie.a.openURL("vivaldi://bookmarks",{singleton:!0})}showWelcome(){ie.a.openURL("vivaldi://welcome")}showMail(){ie.a.openURL("vivaldi://mail",{singleton:!0})}showSettings(e="general"){h.a.get(A.kSettingsInTab)?ie.a.openURL(`vivaldi://settings/${e}/`,{singleton:!0,skipParams:!0}):m.a.dispatch({actionType:"MAIN_SHOW_SETTINGSWINDOW",options:e})}showPopupWindow(e,t){ie.a.openWindow("about:blank",{width:e.bounds.width,height:e.bounds.height,left:e.bounds.left,top:e.bounds.top,incognito:e.incognito,type:"popup"},t,"popup")}startCasting(){Y.a.utilities.startChromecast()}stepFocus(e){ie.a.clearSelection();const t=function(e,t){return Array.from(document.querySelectorAll(e)).map(e=>{const t=e.getBoundingClientRect(),a=function(e){let t=0,a=0;for(;e instanceof HTMLElement&&(t+=e.offsetTop,a+=e.offsetLeft,e.offsetParent);)e=e.offsetParent;return{left:a,top:t}}(e);return{elm:e,rect:{left:a.left,top:a.top,width:t.width,height:t.height}}}).sort((e,a)=>t?e.rect.left<a.rect.left?-1:e.rect.left>a.rect.left?1:e.rect.top<a.rect.top?-1:e.rect.top>a.rect.top?1:0:e.rect.top<a.rect.top?-1:e.rect.top>a.rect.top?1:e.rect.left<a.rect.left?-1:e.rect.left>a.rect.left?1:0)},i=function(e,t){const a=t.children;let s=!1;for(let t=0;t<a.length;t++){if(a[t]===e)return!0;if(i(e,a[t])){s=!0;break}}return s},s=t(".pagefocusstop",!0),n=t(".uifocusstop",!1).concat(s);if(n.length>0){let t=-1;const r=document.activeElement;for(let e=0;e<n.length;e++)if(n[e].elm===r||i(r,n[e].elm)){t=e;break}if(t=-1===t?e?0:n.length-1:e?t+1<n.length?t+1:0:0===t?n.length-1:t-1,-1!==s.findIndex(e=>e===n[t])){const e=parseInt(n[t].elm.getAttribute("data-id"));ie.a.openPage(e),a(88).default.executeActions("COMMAND_FOCUS_WEBVIEW")}else n[t].elm.focus()}}};var re=t.a=ne},,function(e,t,a){"use strict";a.d(t,"b",(function(){return B}));var i=a(58),s=a.n(i),n=a(8),r=a(10),o=a(11),l=a(4),c=a(66),d=a(16),u=a(277),h=a(238),m=a(1);const p=["downloads","tabs"],g=["calendar","contacts","mail"];let b,f=!1,_=!1,N=!1,v=0,E=!1,w="",S=[],C=[],k=[],y=[],O=null;function A(){const e={};e.barVisible=_,e.selectedPanel=b,e.width=v,e.panelVisible=f,n.a.set(m.kPanelsState,e),Object(u.a)(window.vivaldiWindowId,{SHOW_PANEL:e.barVisible,SELECTED_PANEL:e.selectedPanel,PANEL_WIDTH:e.width,SHOW_PANEL_CONTENT:e.panelVisible})}function T(e){return!!j.getPanelAvailable(e)&&!!("mail"!==e&&"contacts"!==e||j.getIsMailWindow())}function I(e){const t=c.a.getIndexByShortcut(e);-1!==t&&void 0!==S&&t>=1&&S.length>=t&&(e=S[t-1].id),T(e)&&(_=!0,v=0===v?290:v,e===b?(f?O&&O.focus():O=document.activeElement,f=!f):(e||(O=document.activeElement),b=e,f=!0),f&&(E=M),A())}function D(){!1===f?_?(b=void 0,_=!1):(_=!0,b&&I(b)):(O&&O.focus(),v=0===v?290:v,_=!_,f=!f),A(),j.emitChange("")}function P(e,t){if(!d.a.getState().has(e))return;const a=d.a.getState().get(e),i=Object(d.c)(a),s=Object(d.c)({...a,...t});i&&!s&&j.getPanelButtonsVisible()!==N&&D(),!i&&s&&(N=j.getPanelButtonsVisible(),N&&D())}function x(e){e?(_=!0,f=!0,b||(b=j.getDefaultPanel())):f=!1,A()}function M(){!1===f?(E=!0,x(!0),j.emitChange("")):j.emitChange("setFocus")}function L(e,t,a){if(e===m.kPanelsWebList){const e=j.getSelectedWebPanelIndex(),i=S,s=i.length;if(S=Object(h.a)(t),y=S.map(e=>e.id),S.length>s){if(!a&&d.a.isActive()){let e=S.length-1;for(let t=0;t<i.length;t++)if(i[t].id!==S[t].id){e=t;break}I(S[e].id)}}else if(S.length<s&&void 0!==e){let t=void 0;j.getAvailablePanelCount()>0&&(t=void 0===j.getSelectedWebPanelIndex()?e>=S.length?0===S.length?j.getLastAvailablePanel():S[S.length-1].id:S[e].id:S[j.getSelectedWebPanelIndex()].id),void 0===t?(b=void 0,x(!1)):t!==b&&(f?I(t):b=t)}}else e===m.kPanelsList&&(t.length>0&&("format"!==t[0].id||6!==parseInt(t[0].format))?(C=Object(h.a)(function(e){const t=Object(h.a)(e),a=[];for(let e=0;e<C.length;e++){const i=C[e];if(e>0)for(let e=0;e<t.length;e++){const a=t[e];if(i.id===a.id){void 0!==a.available&&(i.available=a.available),void 0!==a.forMailOnly&&(i.forMailOnly=a.forMailOnly),void 0!==a.width&&(i.width=a.width),void 0!==a.resizable&&(i.resizable=a.resizable),t.splice(e,1);break}}a.push(i)}return a}(t)),n.a.set(m.kPanelsList,C)):C=Object(h.a)(t),k=(i=C,d.a.isGuestSession()?i.filter(e=>"format"!==e.id).filter(e=>p.includes(e.id)):i.filter(e=>"format"!==e.id).filter(e=>!g.includes(e.id))).map(e=>e.id),!b||j.getIsWebPanel(b)||j.getPanelAvailable(b)||(b=void 0,x(!1)));var i}const j=new class extends s.a{getRegPanelOrder(){return k}getWebPanelOrder(){return y}canRenderInWindow(e){return!!j.getIsWebPanel(e)||(!!j.getIsMailWindow()||!("mail"===e||"contacts"===e))}shouldShowPanel(e){return!g.includes(e)}canAutoOpen(e){const t=j.getSelectedPanel(),a=j.getPanelWidth();return!(e===t&&a>50)}getResizableByPanel(e){for(let t=0;t<C.length;t++)if(C[t].id===e)return C[t].resizable;for(let t=0;t<S.length;t++)if(S[t].id===e)return S[t].resizable;return!1}getWidthByPanel(e){for(let t=0;t<C.length;t++)if(C[t].id===e)return C[t].width;for(let t=0;t<S.length;t++)if(S[t].id===e)return S[t].width;return-1}getPanelAvailable(e){for(let t=0;t<C.length;t++)if(C[t].id===e)return!1!==C[t].available;for(let t=0;t<S.length;t++)if(S[t].id===e)return!1!==S[t].available;return!1}getAvailablePanelCount(){let e=0;for(let t=0;t<C.length;t++)!1!==C[t].available&&e++;for(let t=0;t<S.length;t++)!1!==S[t].available&&e++;return e}getFirstAvailablePanel(){for(let e=0;e<C.length;e++)if(!1!==C[e].available){if(!0===C[e].forMailOnly&&!this.getIsMailWindow())continue;return C[e].id}for(let e=0;e<S.length;e++)if(!1!==S[e].available)return S[e].id}getLastAvailablePanel(){for(let e=S.length-1;e>=0;e--)if(!1!==S[e].available)return S[e].id;for(let e=C.length-1;e>=0;e--)if(!1!==C[e].available){if(!0===C[e].forMailOnly&&!this.getIsMailWindow())continue;return C[e].id}}getRegPanels(){return C}getWebPanels(){return S}getIsWebPanel(e){const t=c.a.getPanelPrefix();return e.substr(0,t.length)===t}getPanelButtonsVisible(){return _}getPanelContentVisible(){return f}getSelectedPanel(){return b}getIsPanelVisible(e){return f&&b===e}getIsWebPanelSelected(){let e;if(b){const t=c.a.getPanelPrefix();e=b.substr(0,t.length)===t}return e}getSelectedWebPanelIndex(){let e;if(this.getIsWebPanelSelected())for(let t=0;t<S.length;t++){if(S[t].id===b){e=t;break}}return e}getFocusContent(){return E}getSelectId(){return w}getPanelWidth(){const e=d.a.getVisibleUI(window.vivaldiWindowId).panelToggle;if(!0===e&&!1===_&&!1===f)return 10;if(!0===e&&!0===_&&!1===f)return 44;if(!0===_&&!1===f)return 34;if(!0===_&&!0===f){let e=v;if(!0===j.getResizableByPanel(b)){const t=j.getWidthByPanel(b);t>0&&(e=t)}return e<=0?290:e}return 0}getDefaultPanel(){return"bookmarks"}getIsMailWindow(){return Boolean(window.isMailWindow)&&!d.a.isIncognitoOrGuest()}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};j.dispatchToken=o.a.register(e=>{switch(e.actionType){case l.a.PANEL_INIT:!function(e){e.isMail&&(window.isMailWindow=!0);const t=e.regPanelList.length>0?e.regPanelList:r.a.getDefault(m.kPanelsList);L(m.kPanelsList,t,!0),e.webPanelList.length>0&&L(m.kPanelsWebList,e.webPanelList,!0),_=e.showButtons,f=e.showContent,v=e.width>=290?e.width:0,b=e.selectedPanel,T(b)||(b=j.getFirstAvailablePanel(),b||(f=!1))}(e.state),j.emitChange("");break;case l.a.PANEL_SET_AVAILABLE:!function(e,t){if(j.getIsWebPanel(e)){c.a.setAvailable(e,t);for(let a=0;a<S.length;a++){const i=S[a];if(i.id===e&&i.available!==t){i.available=t,n.a.set(m.kPanelsWebList,S),j.emitChange("");break}}}else for(let a=0;a<C.length;a++){const i=C[a];if(i.id===e&&i.available!==t){i.available=t,n.a.set(m.kPanelsList,C),j.emitChange("");break}}}(e.panel,e.available);break;case l.a.PANEL_SET_CONTENT_VISIBLE:x(e.visible),j.emitChange("");break;case l.a.PANEL_SET_FOCUS:M();break;case l.a.PANEL_TOGGLE_FLOATING:n.a.toggle(m.kPanelsAsOverlayEnabled,!0,!1);break;case l.a.PANEL_SET_MAIL_WINDOW:window.isMailWindow=!0;break;case l.a.PANEL_SET_RESIZABLE:!function(e,t){if(j.getIsWebPanel(e))for(let a=0;a<S.length;a++){const i=S[a];if(i.id===e&&i.resizable!==t){i.resizable=t,i.width=-1,n.a.set(m.kPanelsWebList,S),j.emitChange("");break}}else for(let a=0;a<C.length;a++){const i=C[a];if(i.id===e&&i.resizable!==t){i.resizable=t,i.resizable||(i.width=-1),n.a.set(m.kPanelsList,C),j.emitChange("");break}}}(e.panel,e.resizable);break;case l.a.PANEL_SET_PANELS:L(e.key,e.value,null===e.oldValue),j.emitChange("");break;case l.a.PANEL_SET_WIDTH:!function(e,t){if(j.getIsWebPanel(e)){const a=S.find(t=>t.id===e);a&&a.width!==t&&(a.width=t,n.a.set(m.kPanelsWebList,S))}else{const a=C.find(t=>t.id===e);a&&a.width!==t&&(a.width=t,n.a.set(m.kPanelsList,C))}!0!==j.getResizableByPanel(e)&&(v=t),A()}(e.panel,e.width),j.emitChange("");break;case l.a.PANEL_SHOW_NEXT:!function(e){if(!1===f)M();else{const t=j.getRegPanels().map(e=>e.id).filter(e=>j.getPanelAvailable(e)&&j.canRenderInWindow(e)),a=j.getWebPanels();if(void 0!==a&&a.forEach(e=>{e.available&&t.push(e.id)}),b){for(let a=0;a<t.length;a++)if(t[a]===b){a+="next"===e?1:-1,a<0?a=t.length-1:a>=t.length&&(a=0),b!==t[a]&&I(t[a]);break}}else{void 0!==j.getFirstAvailablePanel()&&I(j.getDefaultPanel())}j.emitChange("")}}(e.DIRECTION);break;case"PANEL_SHOW_CONTENT":!function(e){const{setFocus:t,selectId:a}=e;let{panel:i}=e;const s=c.a.getIndexByShortcut(i);-1!==s&&void 0!==S&&s>=1&&S.length>=s&&(i=S[s-1].id),f&&b===i&&a===w||T(i)&&(_=!0,f=!0,v=0===v?290:v,b=i,E=t,w=a,A(),j.emitChange("display"))}(e);break;case l.a.PANEL_TOGGLE_CONTENT:I(e.panel),j.emitChange("");break;case l.a.PANEL_MOVE:!function(e,t,a){if(j.getIsWebPanel(e)){if(j.getIsWebPanel(t)){const i=y.findIndex(t=>t===e);let s=y.findIndex(e=>e===t);"below"===a&&s++,s>i&&s--,y=Object(h.a)(y),y.splice(s,0,y.splice(i,1)[0]);const r=[];y.forEach(e=>{const t=S.filter(t=>t.id===e)[0];r.push(t)}),S=r,n.a.set(m.kPanelsWebList,S)}}else if(!j.getIsWebPanel(t)){const i=k.findIndex(t=>t===e);let s=k.findIndex(e=>e===t);"below"===a&&s++,s>i&&s--,k=Object(h.a)(k),k.splice(s,0,k.splice(i,1)[0]);const r=[];r.push(C[0]),k.forEach(e=>{const t=C.filter(t=>t.id===e)[0];r.push(t)}),C=r,n.a.set(m.kPanelsList,C)}}(e.from,e.to,e.position),j.emitChange("");break;case l.a.PANEL_CLEAR_SELECTION:w="",j.emitChange("");break;case l.a.PANEL_TOGGLE_PANEL:D();break;case"WINDOW_FULL_SCREEN":{const{fullScreen:t,windowId:a}=e;P(a,{fullScreen:t});break}case l.a.WINDOW_MINIMAL_UI:{const{minimalUI:t,windowId:a}=e;P(a,{minimalUI:t});break}}}),t.a=j;const{getPanelWidth:B,getSelectedPanel:R}=j},,function(e,t,a){"use strict";const i={kNone:-1,kLeft:0,kCenter:1,kRight:2,kBack:3,kForward:4,isContextMenuButton:e=>2===e,isNavigationButton:e=>3===e||4===e,isNoModifierPressed:e=>!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey),setWebviewPointerEvents:(e,t)=>{const a=e?"":"none";for(const e of t.getElementsByTagName("WEBVIEW"))e.style.pointerEvents=a}};t.a=i},,function(e,t,a){"use strict";a.d(t,"b",(function(){return h}));var i=a(58),s=a.n(i),n=a(11),r=a(4),o=a(27),l=a(84),c=a.n(l),d=a(140),u=a(5);const h="vivaldi/x-search-engine";let m,p,g,b,f,_,N,v,E=[],w=[],S=!1,C=void 0,k=p,y=!0;function O(e){v=parseInt(e.nextHistoryId);const t=v;isNaN(v)&&(v=1),m=e.version;const a=Object(d.a)(e.engines).map(e=>T(e)),i=a.filter(e=>e.removed),s=[];i.forEach(e=>{-1===s.findIndex(t=>t.id===e.id)&&s.push(e)});const n=a.filter(e=>!e.removed);E=n.concat(s),w=n,p=w.find(t=>t.id===e.default),g=w.find(t=>t.id===e.defaultPrivate),b=w.find(t=>t.id===e.current),f=w.find(t=>t.id===e.currentSD),_=w.find(t=>t.id===e.currentPrivate),N=w.find(t=>t.id===e.context),S=e.defaultChanged,C=e.customOrder,v!==t&&D()}function A(e){return{id:e.id,historyId:e.historyId,name:e.name?e.name.trim():"",url:e.url?e.url.trim():"",suggestUrl:e.suggestUrl?e.suggestUrl.trim():"",faviconUrl:e.faviconUrl?e.faviconUrl.trim():"",keyword:e.keyword?e.keyword.trim().toLowerCase():"",post:Boolean(e.post),removed:Boolean(e.removed),custom:Boolean(e.custom)}}function T(e){const t=A(e);return t.historyId||(t.historyId=v++),t}function I(e,t,a){switch(t){case"defaultPrivate":g=w.find(t=>t.id===e);break;case"current":b=w.find(t=>t.id===e);break;case"currentSD":f=w.find(t=>t.id===e);break;case"currentPrivate":_=w.find(t=>t.id===e);break;case"context":N=w.find(t=>t.id===e);break;case"default":default:const t=w.find(t=>t.id===e);void 0!==t&&(p=t,S=!0)}a&&D()}function D(){if(void 0!==m){const e={version:m,nextHistoryId:v,engines:E,default:p?p.id:void 0,defaultPrivate:g?g.id:void 0,current:b?b.id:void 0,currentSD:f?f.id:void 0,currentPrivate:_?_.id:void 0,context:N?N.id:void 0,defaultChanged:S,customOrder:C};o.a.set({SEARCH_ENGINE_COLLECTION:e})}}const P=new class extends s.a{setPopupEngine(e){k=e,y=!1}getFirstLaunch(){return y}getCurrentPopupEngine(){return k}get(){return{list:w,defaultEngine:p}}getList(){return w}getDefault(e){return e&&g?g:p}getCurrent(e){return e&&_?_:b}getCurrentSD(e){return e&&g?g:f}getContext(){return N}isDefault(e,t){const a=P.getDefault(t);return a&&a.id===e}getHasCustomOrder(){return!0===C}getByQuery(e){return w.find(t=>e.toLowerCase().startsWith(t.keyword+" "))}getByKeyword(e){const t=e.toLowerCase();return w.find(e=>e.keyword.length>0&&e.keyword===t)}getByHistoryId(e){return w.find(t=>t.historyId===e)}hasKeyword(e){return void 0!==P.getByKeyword(e)}getById(e){return w.find(t=>t.id===e)}getIndexById(e){return w.findIndex(t=>t.id===e)}getNewEngine(){return{id:c()(),name:"",keyword:"",url:"",custom:!0,post:!1,faviconUrl:"",suggestUrl:""}}emitChangeParam(e){this.emit(r.a.CHANGED,e)}addChangeListener(e){this.on(r.a.CHANGED,e)}removeChangeListener(e){this.removeListener(r.a.CHANGED,e)}};n.a.register(e=>{switch(e.actionType){case r.a.SEARCH_ENGINES_INIT:O(e.collection);break;case r.a.SEARCH_ENGINES_SET_COLLECTION:t=e.collection,a=e.writeToSettings,O(t),a&&D();break;case r.a.SEARCH_ENGINES_ADD:!function(e,t){if(e.id){const a=T(e);-1===P.getIndexById(a.id)&&(E.push(a),w.push(a),t&&I(a.id,"default",!1),D())}}(e.engine,e.makeDefault);break;case r.a.SEARCH_ENGINES_REMOVE:!function(e){const t=E.findIndex(t=>t.id===e);if(-1!==t){const a=E.splice(t,1);if(a[0].removed=!0,E.push(a[0]),w=E.filter(e=>!e.removed),p.id===e){const e=o.a.getDefaultSearchEngines();p=P.getById(e.default),void 0===p&&(p=w[0]),S=!0}g&&g.id===e&&(g=p),b&&b.id===e&&(b=void 0),f&&f.id===e&&(f=void 0),_&&_.id===e&&(_=void 0),N&&N.id===e&&(N=void 0),D(),u.a.historyPrivate.deleteAllSearchTermsForKeyword(a[0].historyId)}}(e.id);break;case r.a.SEARCH_ENGINES_MODIFY:!function(e,t){const a=T(e);if(E.find(e=>e.id===a.id)){const e=o.a.getDefaultSearchEngines().engines.find(e=>e.id===a.id),i=e?A(e):void 0;void 0!==i&&(i.name===a.name&&i.url===a.url&&i.suggestUrl===a.suggestUrl&&i.keyword===a.keyword&&Boolean(i.post)===Boolean(a.post)?a.custom=!1:a.custom=!0);let s=E.findIndex(e=>e.id===a.id);E.splice(s,1,a),s=P.getIndexById(a.id),w.splice(s,1,a),t?I(a.id,"default",!0):D()}}(e.engine,e.makeDefault);break;case r.a.SEARCH_ENGINES_REORDER:!function(e,t){const a=E.filter(e=>!e.removed),i=a.findIndex(t=>t.id===e);if(-1!==i&&t<a.length){const e=a.splice(i,1);a.splice(t,0,e[0]),E=a.concat(E.filter(e=>e.removed)),w=a,C=!0,D()}}(e.id,e.index);break;case r.a.SEARCH_ENGINES_SET_DEFAULT:I(e.id,e.type,e.writeToSettings);break;case r.a.SEARCH_ENGINES_RESTORE:!function(e){const t={...o.a.getDefaultSearchEngines()};if(t.engines=Object(d.a)(t.engines),t.engines.forEach(e=>{e.post=Boolean(e.post),e.custom=!1,e.faviconUrl=e.faviconUrl?e.faviconUrl:"",e.suggestUrl=e.suggestUrl?e.suggestUrl:""}),t.customOrder=!1,e){const e=E.filter(e=>!e.removed&&e.custom);Array.prototype.push.apply(t.engines,e)}O(t),D()}(e.keepCustomSearches);break;default:return}var t,a;P.emitChangeParam(e)}),t.a=P},,function(e,t,a){"use strict";var i=a(0),s=a(12),n=a(2),r=a(130),o=a(100),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\SettingsSearchCategory.jsx";function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u="https://vivaldi.com/privacy/";function h(e){return"string"!=typeof e.type}class m extends i.Component{constructor(e){super(e),d(this,"hiddenWhenFilter",""),d(this,"hiddenChildComponents",{}),d(this,"unfilteredChildren",e=>i.Children.map(e.children,e=>e&&h(e)?i.cloneElement(e,{filter:""}):e)),d(this,"filteredChildren",e=>i.Children.map(e.children,(t,a)=>!t||h(t)?t:Object(r.a)(t,e.filter))),d(this,"searchChildren",e=>{let t=[];if(e.filter){t=e.categoryTitle&&-1!==e.categoryTitle.toLowerCase().indexOf(e.filter)?this.unfilteredChildren(e):this.filteredChildren(e)}else t=i.Children.map(e.children,(e,t)=>e);return t}),d(this,"shouldSearchHiddenComponent",(e,t)=>!t||e.length>=t.length||e!==t.slice(0,e.length)),d(this,"hideCategoryIfEmpty",()=>{this.root&&(1===this.root.children.length||!0===this.props.displayPrivacyLink&&2===this.root.children.length?(this.root.style.display="none",this.hiddenWhenFilter=this.props.filter):(this.root.style.removeProperty("display"),this.hiddenWhenFilter=""))}),d(this,"openPrivacyPage",e=>{s.a.openURL(u),e.preventDefault()}),this.state={children:this.searchChildren(this.props)}}componentDidMount(){this.hideCategoryIfEmpty()}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter?this.hiddenWhenFilter?this.shouldSearchHiddenComponent(this.hiddenWhenFilter,e.filter)&&this.setState({children:this.searchChildren(e)}):this.setState({children:this.searchChildren(e)}):this.props.children!==e.children&&this.setState({children:this.searchChildren(e)})}componentDidUpdate(){this.hideCategoryIfEmpty()}render(){const e=this.props.categoryTitle&&i.createElement("h2",{__source:{fileName:l,lineNumber:133}},this.props.categoryTitle),t=Object(r.a)(e,this.props.filter)||e,a=Object(o.a)(this.props,["filter","categoryTitle","displayPrivacyLink"]);return i.createElement("div",c({ref:e=>e?this.root=e:null},a,{__source:{fileName:l,lineNumber:143}}),t,e&&!0===this.props.displayPrivacyLink&&i.createElement("div",{className:"privacy-link",__source:{fileName:l,lineNumber:146}},i.createElement("a",{href:u,title:u,onClick:this.openPrivacyPage,__source:{fileName:l,lineNumber:147}},Object(n.a)("Learn more about Privacy in Vivaldi"))),this.state.children)}}d(m,"defaultProps",{displayPrivacyLink:!1}),t.a=m},function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c}));var i=a(58),s=a.n(i),n=a(11),r=a(145);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l="vivaldi/x-notes",c=500,d={children:[],content:"",dateAdded:0,id:"1",index:0,parentId:"0",separator:!1,title:"Notes",trash:!1};let u=d,h={id:-1},m=[];const p=new class extends s.a{constructor(...e){super(...e),o(this,"_resolveReady",r.default),o(this,"ready",(()=>new Promise(e=>{this._resolveReady=e}))()),o(this,"init",e=>{u=e[0]?e[0]:d,h=function e(t){if(!t.children)return;for(let a=0;a<t.children.length;a++){const i=t.children[a];if(i.trash)return i;if(i.children){const t=e(i);if(void 0!==t)return t}}return}(u)||{id:-1},p.emitChange("init",""),this._resolveReady()})}getRootNode(){return u}getLastTopNode(){const e=this.getRootNode(),t=e&&e.children?e.children:[];if(t.length>1)return t[t.length-2]}hasNotes(){const e=this.getRootNode();if(e&&e.children){if(e.children.length>1)return!0;const t=e.children[0];if(t&&t.trash)return Boolean(t.children&&t.children.length>0)}return!1}isFolder(e){return Boolean(e.children)}isSeparator(e){return Boolean(e.separator)}isNodeEmpty(e){const t=p.getNodeById(e);return t&&!t.title&&!t.content&&(!t.children||0===t.children.length)}hasChildren(e){return e.children&&e.children.length>0}getNodeById(e){const t=function(a){if(a)for(let i=0;i<a.length;i++){const s=a[i];if(s.id===e)return s;if(s.children){const e=t(s.children);if(e)return e}}};return t(u.children)}getDragData(e,t){const a=t.map(e=>p.getNodeById(e)).filter(Boolean);switch(e){case"text/plain":case"vivaldi/x-title":{const e=[];return a.forEach(t=>{e.push(p.isFolder(t)?t.title:t.content)}),e.join("\r\n")}case"text/html":{const e=a&&1===a.length?a[0]:void 0;return e&&e.url&&e.title?"<a href="+e.url+">"+e.title+"</a>":""}case"text/uri-list":return a.filter(e=>!!e.url).join("\r\n");default:return""}}getFilteredTree(e,t){const a=function(e,t,i,s,n){if(!e)return;let r=!1;return e.forEach(e=>{let o=!1;if(e.children){const l={...e,children:[]};a(e.children,l.children,i,s,n)&&(t.push(l),r=!0,o=!0)}if(!o&&p._matchNode(e,s,n)){const a={...e};t.push(a),e.children&&i.push(e.id),r=!0}}),r},i=this.getRootNode().children,s=[],n=[];return a(i,s,n,e,t),{nodes:s,collapsed:n}}getFilteredFlat(e,t){const a=(e,t,i,s)=>{e&&e.forEach(e=>{!s.inTrash&&e.trash||(p._matchNode(e,i,s)&&(e.children?t.push({...e,children:[],isExpanded:!1}):t.push({...e})),e.children&&a(e.children,t,i,s))})},i=this.getRootNode().children,s=[];return a(i,s,e.toLowerCase(),t),s}_matchNode(e,t,a){let i=!1;return e.title&&(i=e.title.toLowerCase().includes(t)),!i&&e.content&&!1!==a.content&&(i=e.content.toLowerCase().includes(t)),!i&&e.url&&!1!==a.url&&(i=e.url.toLowerCase().includes(t)),i}validateForDrag(e){return e.filter(e=>e!==h.id)}validateForDeletion(e){return e.filter(e=>e!==h.id)}validateForEdit(e){return e!==h.id}getTitle(e){const t=p.getNodeById(e);return t&&(t.title||t.content)||""}getCutIds(){return m}emitChange(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};function g(e,t){const a=u.children;if(u!==d&&a){!0===function e(t,a,i){if(t.id===i.parentId){const e=i||{level:a,treeIndex:i.index};return t.children&&t.children.splice(i.index||0,0,e),_(t),!0}if(t.children)for(let s=0;s<t.children.length;s++){const n=t.children[s],r=n.children;if(r){if(!0===e(n,a+1,i))return n.children=[...r],!0}}return!1}(u,0,e)&&(u.children=[...a],p.emitChange(t,e.id))}}function b(e,t){const a=u.children;if(u!==d&&a){!0===function e(t,a,i){if(!t.children)return!1;for(let s=0;s<t.children.length;s++){const n=t.children[s];if(n.id===a&&(n.content!==i.content||n.url!==i.url)){const e={...t.children[s],...i};return t.children.splice(s,1,e),!0}if(n.children){const t=n.children;if(!0===e(n,a,i))return n.children=[...t],!0}}return!1}(u,e,t)&&(u.children=[...a],p.emitChange("changed",e))}}function f(e,t){const a=u.children;if(u!==d&&a){!0===function e(t,a){if(!t.children)return!1;for(let i=0;i<t.children.length;i++){const s=t.children[i];if(s.id===a)return t.children.splice(i,1),_(t),!0;if(s.children){const t=s.children;if(!0===e(s,a))return s.children=[...t],0===s.children.length&&(s.isExpanded=!1),!0}}return!1}(u,e)&&(u.children=[...a],!0!==t&&p.emitChange("removed",e))}}function _(e){if(e.children)for(let t=0;t<e.children.length;t++){const a=e.children[t];a.index=t,a.treeIndex=t}}n.a.register(e=>{switch(e.actionType){case"NOTES_INIT":p.init(e.notes);break;case"NOTES_ADD_ITEM":g(e.item,"added");break;case"NOTES_CHANGE_ITEM":b(e.id,e.changes);break;case"NOTES_MOVE_ITEM":!function(e,t,a){if(u!==d&&u.children){const i=p.getNodeById(e);if(void 0!==i){f(e,!0);const s=i.index||0;i.parentId===t&&a>s&&a--,i.parentId=t,i.index=a,g(i,"moved")}}}(e.id,e.targetFolder,e.targetIndex);break;case"NOTES_REMOVE_ITEM":f(e.id,!1);break;case"NOTES_SET_CUT_IDS":m=e.ids,p.emitChange("cutids","")}}),t.b=p},function(e,t,a){"use strict";const i=Object.freeze({KEY_CANCEL:3,KEY_HELP:6,KEY_BACK_SPACE:8,KEY_TAB:9,KEY_CLEAR:12,KEY_RETURN:13,KEY_ENTER:14,KEY_SHIFT:16,KEY_CONTROL:17,KEY_ALT:18,KEY_PAUSE:19,KEY_CAPS_LOCK:20,KEY_ESCAPE:27,KEY_SPACE:32,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_PRINTSCREEN:44,KEY_INSERT:45,KEY_DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_SEMICOLON:59,KEY_EQUALS:61,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,KEY_META:91,KEY_CONTEXT_MENU:93,KEY_NUMPAD0:96,KEY_NUMPAD1:97,KEY_NUMPAD2:98,KEY_NUMPAD3:99,KEY_NUMPAD4:100,KEY_NUMPAD5:101,KEY_NUMPAD6:102,KEY_NUMPAD7:103,KEY_NUMPAD8:104,KEY_NUMPAD9:105,KEY_MULTIPLY:106,KEY_ADD:107,KEY_SEPARATOR:108,KEY_SUBTRACT:109,KEY_DECIMAL:110,KEY_DIVIDE:111,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123,KEY_F13:124,KEY_F14:125,KEY_F15:126,KEY_F16:127,KEY_F17:128,KEY_F18:129,KEY_F19:130,KEY_F20:131,KEY_F21:132,KEY_F22:133,KEY_F23:134,KEY_F24:135,KEY_NUM_LOCK:144,KEY_SCROLL_LOCK:145,KEY_COMMA:188,KEY_PERIOD:190,KEY_SLASH:191,KEY_BACK_QUOTE:192,KEY_OPEN_BRACKET:219,KEY_BACK_SLASH:220,KEY_CLOSE_BRACKET:221,KEY_QUOTE:222});t.a=i},,function(e,t,a){"use strict";var i=a(10),s=a(16),n=a(7),r=a(253),o=a(1);var l=["f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","f13","f14","f15","f16","f17","f18","f19"],c=["ctrl+t","ctrl+n","ctrl+w"],d={delete:"del",option:"alt",command:"meta",return:"enter",escape:"esc",comma:",",period:".",del:"del",mod:"ctrl"},u=["left","right","shift+left","shift+right","shift+up","shift+down","enter","shift+enter"];u=u.concat(["ctrl+a","ctrl+z","ctrl+y","ctrl+u","ctrl+left","ctrl+right","ctrl+backspace","ctrl+delete","ctrl+home","ctrl+end","ctrl+shift+left","ctrl+shift+right","shift+home","shift+end"]);const h={};function m(e){var t=e.split("+");t=t.map(e=>d[e]||e);var a="";function i(e){t.indexOf(e)>-1&&(a+=e+"+",t.splice(t.indexOf(e),1))}return i("ctrl"),i("alt"),i("shift"),i("meta"),t.sort(),t.forEach((e,i)=>{a+=e,i+1<t.length&&(a+="+")}),a.toLowerCase()}function p(e){return{ctrlKey:-1!==e.indexOf("ctrl"),altKey:-1!==e.indexOf("alt"),metaKey:-1!==e.indexOf("meta"),shiftKey:-1!==e.indexOf("shift"),key:e.split("+").pop()}}function g(e,t){t(e)}function b(e){return 1===e.length||e.startsWith("numpad")}function f(e){var t=p(e),a=e.split("+").pop();if(-1!==u.indexOf(e))return!1;if("esc"===a||"down"===a||"up"===a||"home"===a||"end"===a||"pagedown"===a||"pageup"===a)return!0;if(l.indexOf(a)>-1)return!0;if(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey){if("backspace"===a||"del"===a)return!0;if(t.ctrlKey||t.metaKey||t.altKey)return!0}return!1}const _=["INPUT","FRAME","IFRAME","SELECT","TEXTAREA"],N=["submit","button","reset","radio","checkbox"];let v=!1;const E=["f2","ctrl+f","ctrl+o","ctrl+p","ctrl+shift+d","ctrl+shift+m"];var w={bind:function(e,t,a,i){return[].concat(e).filter(Boolean).map(e=>e.trim()).forEach(e=>function(e,t,a,i){if(i&&e){const s=m(e),n=h[s]||[];n.push({callback:i,onAutoRepeat:Boolean(t),isMailShortcut:Boolean(a)}),h[s]=n}}(e,a,i,t)),this},unbind:function(e,t){return[].concat(e).forEach(e=>function(e,t){if(e){const a=m(e);h[a]&&(t?h[a]=h[a].filter(e=>e.callback!==t):delete h[a])}}(e,t)),this},keyComboFromEvent:function(e){if(!(["Alt","Shift","Control","Meta","CapsLock","NumLock","AltGraph"].indexOf(e.key)>-1)&&"keydown"===e.type){const t=function(e){if(e.code.startsWith("Numpad")){var t=r.a[e.keyCode].substr(6);if(t>="0"&&t<="9")return e.code}return r.a[e.keyCode]}(e);if("None"===t)return"";{let a=function(e){var t="";return e.metaKey&&(t+="meta+"),e.altKey&&(t+="alt+"),e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),t}(e);return a+=t,m(a.toLowerCase())}}return""},shortcutAllowedInText:f,isSingleKeyShortcut:b,setDevToolsConflicts:function(e){v=e},handleShortcut:function(e,t,r){let l=e.toLowerCase().replace(" ","");l.endsWith("arrow")&&(l=l.substring(0,l.length-5)),l=m(l);const d=function(e){const t=h[e];return t&&t.length?t[t.length-1]:void 0}(l);if(d){if(!0===t&&!1===d.onAutoRepeat)return;n.default.windows.getCurrent({},e=>{if(e.id===s.a.getId()){const e=p(l);!function(e,t,s,n,r){const l=document.activeElement;if(b(t))if(r){if(!i.a.get(o.kKeyboardShortcutsEnableSingleKeyForMail)||v)return}else if(!i.a.get(o.kKeyboardShortcutsEnableSingleKey)||v)return;if(n){if(!1===a(62).default.isCommandWhitelisted(t))return}if(!i.a.get(o.kKeyboardShortcutsEnable)){const e=a(62).default.getAllCommands().find(e=>"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS"===e.name);if(!e||!Array.isArray(e.shortcut)||!e.shortcut.some(e=>e===t))return}if(v&&E.includes(t))return;const d=l?l.tagName:"",u=l instanceof HTMLInputElement?l.type:"",h=!!l&&l.isContentEditable;_.includes(d)&&!N.includes(u)||h?f(t)&&g(s,e):l&&"WEBVIEW"===d?l.getFocusedElementInfo((a,i,n,r)=>{if(!n||f(t)){const n="OBJECT"===a,o="SELECT"===a,l="SPAN"===a&&"spinbutton"===r,d=("EMBED"===a||n)&&"application/x-shockwave-flash"===i;(!d&&!o&&!l||d&&c.indexOf(t)>-1||o&&f(t))&&g(s,e)}}):g(s,e)}(d.callback,l,e,r,d.isMailShortcut)}})}}};t.a=w},function(e,t,a){"use strict";var i=a(76),s=(a(51),a(106),a(9)),n=a(11),r=a(4),o=a(108);a(20);const l=new class{doAction(e,t){n.a.dispatch({actionType:r.a.WEBPAGEVIEW_ACTIONS,action:e,pageId:s.a.getActivePage().id,...t?{payload:t}:null})}findInPage(e,t,a){const s=i.a.getActiveWebView(),n={findNext:!1,matchCase:a||!1};s&&s.find(t,n,this._findCallback.bind(this,e,t,a))}findNextInPage(e,t,a,s){const n=i.a.getActiveWebView(),r={backward:a||!1,findNext:!0,matchCase:s||!1};n&&n.find(t,r,this._findCallback.bind(this,e,t,s))}_findCallback(e,t,a,i){!0!==i.canceled&&n.a.dispatch({actionType:r.a.FIND_IN_PAGE_RESULT_ACTION,matchCase:a,pageId:e,searchText:t,...i})}showFindInPageToolbar(e){n.a.dispatch({actionType:r.a.SHOW_FIND_IN_PAGE_ACTION,pageId:e})}closeFindInPageToolbar(e){return!0===o.a.isFindInPageOpen(e)&&(n.a.dispatch({actionType:r.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e}),!0)}go(e){n.a.dispatch({actionType:r.a.PAGE_GO,index:e||0})}back(){n.a.dispatch({actionType:r.a.PAGE_BACK})}forward(){n.a.dispatch({actionType:r.a.PAGE_FORWARD})}getPageHistory(e){n.a.dispatch({actionType:r.a.PAGE_GET_HISTORY,callback:e})}stop(){n.a.dispatch({actionType:r.a.PAGE_STOP})}reload(e=!1){n.a.dispatch({actionType:r.a.PAGE_RELOAD,bypassCache:e})}updated(e){n.a.dispatch({actionType:r.a.PAGE_UPDATED,pageId:e.id})}};t.a=l},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"k",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"l",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return m})),a.d(t,"m",(function(){return p})),a.d(t,"n",(function(){return g})),a.d(t,"o",(function(){return b})),a.d(t,"p",(function(){return f})),a.d(t,"h",(function(){return _}));const i="bookmarkNick",s="bookmarkFolder",n="bookmark",r="closedTab",o="noteAdd",l="commandKeyword",c="note",d="command",u="calculator",h="history",m="keywordSearch",p="openTab",g="search",b="title",f="url",_="contentScript"},,,function(e,t,a){"use strict";(function(e){var i=a(10),s=a(11),n=a(4),r=a(7),o=a(1);const l=new class{loadPromise(){return new Promise((e,t)=>{const{vivaldiWindowId:a}=window;r.default.windows.get(a,t=>{const a=t&&t.extData?JSON.parse(t.extData):{},s=i.a.get(o.kPanelsState),n={};n.showButtons=s.barVisible,n.showContent=s.panelVisible,n.width=s.width,n.selectedPanel=s.selectedPanel,a.hasOwnProperty("SHOW_PANEL_CONTENT")&&(n.showContent=a.SHOW_PANEL_CONTENT),a.hasOwnProperty("SHOW_PANEL")&&(n.showButtons=a.SHOW_PANEL),a.hasOwnProperty("PANEL_WIDTH")&&(n.width=a.PANEL_WIDTH),a.hasOwnProperty("SELECTED_PANEL")&&(n.selectedPanel=a.SELECTED_PANEL),e(n)})}).then(e=>{i.a.addListener(o.kPanelsList,l.setPanels),i.a.addListener(o.kPanelsWebList,l.setPanels),e.regPanelList=i.a.get(o.kPanelsList),e.webPanelList=i.a.get(o.kPanelsWebList),s.a.dispatch({actionType:n.a.PANEL_INIT,state:e})})}setFocus(){s.a.dispatch({actionType:n.a.PANEL_SET_FOCUS})}toggleFloating(){s.a.dispatch({actionType:n.a.PANEL_TOGGLE_FLOATING})}showNextPanel(e){s.a.dispatch({actionType:n.a.PANEL_SHOW_NEXT,DIRECTION:e})}setContentVisible(e){s.a.dispatch({actionType:n.a.PANEL_SET_CONTENT_VISIBLE,visible:e})}togglePanel(){s.a.dispatch({actionType:n.a.PANEL_TOGGLE_PANEL})}toggleContent(e){s.a.dispatch({actionType:n.a.PANEL_TOGGLE_CONTENT,panel:e})}move(e,t,a){s.a.dispatch({actionType:n.a.PANEL_MOVE,from:e,to:t,position:a})}showContent(e,t={selectId:""}){const{setFocus:a=!1,selectId:i}=t;s.a.dispatch({actionType:"PANEL_SHOW_CONTENT",panel:e,setFocus:a,selectId:i})}setAvailable(e,t){s.a.dispatch({actionType:n.a.PANEL_SET_AVAILABLE,panel:e,available:t})}setWidth(e,t){s.a.dispatch({actionType:n.a.PANEL_SET_WIDTH,panel:e,width:t})}setPanelResizable(e,t){s.a.dispatch({actionType:n.a.PANEL_SET_RESIZABLE,panel:e,resizable:t})}setPanels(t,a,i){e.nextTick(()=>s.a.dispatch({actionType:n.a.PANEL_SET_PANELS,key:i,value:a,oldValue:t}))}setMailWindow(){s.a.dispatch({actionType:n.a.PANEL_SET_MAIL_WINDOW})}clearSelection(){s.a.dispatch({actionType:n.a.PANEL_CLEAR_SELECTION})}};t.a=l}).call(this,a(64))},,function(e,t,a){"use strict";var i=a(0),s=a(29),n=a.n(s);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends i.Component{constructor(...e){super(...e),r(this,"setCheckedDisabledRadio",e=>{this.getRadios().forEach(t=>{t.value===e.value.toString()&&(t.checked=!0),t.disabled=Boolean(e.disabled)})}),r(this,"getRadios",()=>n.a.findDOMNode(this).querySelectorAll('input[type="radio"]'))}componentDidMount(){this.getRadios().forEach(e=>{e.name=this.props.name,e.addEventListener("change",this.props.onChange)}),this.setCheckedDisabledRadio(this.props)}componentDidUpdate(e){e.value===this.props.value&&e.disabled===this.props.disabled||this.setCheckedDisabledRadio(this.props)}componentWillUnmount(){this.getRadios().forEach(e=>{e.removeEventListener("change",this.props.onChange)})}render(){return i.createElement("div",{className:this.props.className,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RadioGroup.jsx",lineNumber:62}},this.props.children)}}t.a=o},function(e,t,a){"use strict";var i=a(39),s=a(137),n=a(52),r=a(142),o=a(10),l=a(213),c=a(7),d=a(280),u=a(5),h=a(155),m=a(1);let p={x:0,y:0,width:0,height:0},g="topLeft",b="none",f=null;t.a=function(e,t,a,_="pointer",N){let v=0;const E=new Map,w=o.a.get(m.kKeyboardShortcutsEnable),S=o.a.get(m.kKeyboardShortcutsEnableSingleKey),C=(o.a.get(m.kKeyboardShortcutsEnableSingleKeyForMail),function(e){const t=E.get(e.id);if(e.id>=0&&t){const a=i.a.makeEventFlagsFromApiResponse(e.state);t.call(this,a)}}),k=function(){b="shown","function"==typeof a&&a(!0)},y=function(){"function"==typeof a&&a(!1)},O=function(e){return e.filter(e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible).map(e=>{let t;e.url?t=d.a:e.iconPNG&&(t=e.iconPNG);const a=e.nameWithMnemonic?e.nameWithMnemonic:e.name,i=v++;e.handler&&(a||e.url)&&E.set(i,e.handler);let s=w?e.shortcut:void 0;return s&&!1===S&&n.a.isSingleKeyShortcut(s)&&(s=void 0),{id:i,name:a||"",items:e.items?O(e.items):void 0,type:e.type?e.type:"normal",radiogroup:e.radiogroup?e.radiogroup:-1,checked:!(!e.checked||e.statestrings)&&e.checked,shortcut:Object(h.a)(s),url:e.url,expand:e.expand?e.expand:void 0,icon:t,index:e.index}})},A=function(a){if("none"!==b)return void("shown"===b?f=A.bind(null,a):console.error("Attempt to show another context menu while one is initializing"));b="initializing";const i="function"==typeof t?t():t;r.a.installMnemonics(i,[]),u.a.menubarMenu.onOpen.addListener(k),u.a.menubarMenu.onClose.addListener(y),u.a.menubarMenu.onHover.addListener(s.a.onHover),u.a.menubarMenu.onAction.addListener(C),u.a.contextMenu.show({windowId:e,rect:p,origin:g,items:O(i)},()=>{const e=c.default.runtime.lastError;e&&console.error(e.message),b="none",s.a.onHover(""),u.a.menubarMenu.onOpen.removeListener(k),u.a.menubarMenu.onClose.addListener(y),u.a.menubarMenu.onHover.removeListener(s.a.onHover),u.a.menubarMenu.onAction.removeListener(C);const t=f;t&&(f=null,e||t())})};return function(e){l.a.clearTooltip(),e&&(e.persist(),e.preventDefault(),e.stopPropagation());if(p={x:0,y:0,width:0,height:0},g=_,"pointer"===_)p.x=e?e.clientX:0,p.y=e?e.clientY:0;else{let t=N?N.getBoundingClientRect():null;!t&&e&&(t=e.nativeEvent.srcElement.getBoundingClientRect()),t&&(p.x=t.left+1,p.y=t.top,p.width=t.width,p.height=t.height)}A(e)}}},,function(e,t,a){"use strict";a.r(t);var i=a(51),s=a(37),n=a(22),r=a(185),o=a(86),l=a(58),c=a.n(l),d=a(202),u=a(52),h=a(40),m=a(92),p=a(12),g=a(9),b=a(57),f=a(42),_=a(8),N=a(10),v=a(234),E=a(440),w=a(50);function S(e,t){return e*(1+t)}function C(e,t,a){var i=Number.MAX_VALUE;for(let s=0;s<e.length;s++){const n=e[s],r=k(n,t),o=S(n.w,r);r<=a&&o<i&&(i=o)}var s=[];for(let n=0;n<e.length;n++){const r=e[n],o=k(r,t),l=S(r.w,o);o<=a&&l===i&&s.push(r)}return s}function k(e,t){let a;return a=180===t&&e.d&&e.d<0?t+e.d:Math.abs((e.d||0)-t),a}function y(e,t){var a=e.filter(e=>e.d===t);return a.length?a[0]:(a=function(e,t){var a=Number.MAX_VALUE;for(let i=0;i<e.length;i++){const s=k(e[i],t);s<a&&(a=s)}var i=[];for(let s=0;s<e.length;s++){const n=e[s];k(n,t)===a&&i.push(n)}return{pts:i,dev:a}}(e,t).pts).reduce((e,a)=>{const i=e.d||NaN,s=a.d||NaN;return 180===t&&i>s?e:180===t&&s>i?a:i<s?e:a})}function O(e,t){e.forEach(e=>{var a;e.d=function(e,t){var a=e.x-e.sx,i=e.y-e.sy;if(0===a&&0===i)return t;var s=Math.atan2(i,a);return s*=180/Math.PI,Math.round(s)}(e,t),e.w=(a=e,Math.round(Math.pow(a.x-a.sx,2)+Math.pow(a.y-a.sy,2)))});var a,i=C(e,t,90),s=C(e,t,45),n=s.length?s:i;return 0===n.length?console.log("No point in this direction. Should wrap!"):a=1===n.length?n[0]:y(n,t),a}function A(e,t){Array.isArray(e.below)?e.below.push(t):e.below=[t]}function T(e,t){Array.isArray(e.above)?e.above.push(t):e.above=[t]}function I(e,t){Array.isArray(e.toRight)?e.toRight.push(t):e.toRight=[t]}function D(e,t){Array.isArray(e.toLeft)?e.toLeft.push(t):e.toLeft=[t]}function P(e,t){return e>=t.left&&e<=t.right}function x(e,t){return e>=t.top&&e<=t.bottom}function M(e){return e.left+(e.right-e.left)/2}function L(e,t){const a=M(e),i=M(t);return P(a,t)?(e.quality=1,a):P(i,e)?(e.quality=1,i):P(e.left,t)?(e.quality=2,e.left):P(e.right,t)?(e.quality=2,e.right):P(t.left,e)?(e.quality=2,t.left):P(t.right,e)?(e.quality=2,t.right):e.left>t.right?(e.quality=2,e.left):e.right<t.left?(e.quality=2,e.right):(e.quality=1,a)}function j(e){return e.top+(e.bottom-e.top)/2}function B(e,t){const a=j(e),i=j(t);return x(a,t)?(e.quality=1,a):x(i,e)?(e.quality=1,i):x(e.top,t)?(e.quality=2,e.top):x(e.bottom,t)?(e.quality=2,e.bottom):x(t.top,e)?(e.quality=2,t.top):x(t.bottom,e)?(e.quality=2,t.bottom):e.top>t.bottom?(e.quality=2,e.top):e.bottom<t.top?(e.quality=2,e.bottom):(e.quality=1,a)}function R(e){const t=e.filter(e=>1===e.quality),a=e.filter(e=>2===e.quality);return t.length>0?t:a}function F(e,t){return e.left>=t.left&&e.top>=t.top&&e.right<=t.right&&e.bottom<=t.bottom}function U(e,t){return e.bottom>=t.top&&e.bottom<=t.bottom&&e.right>=t.left&&e.right<=t.right||e.top<=t.bottom&&e.top>=t.top&&e.left>=t.left&&e.left<=t.right}var W={buildPoints:function(e){var t=0;return e.map(a=>{var i=a;return i.id=++t,function(e,t){for(var a=0;a<t.length;a++){const i=t[a];i.id!==e.id&&(U(e,i)?(i.left<e.left&&D(e,i),i.right>e.right&&I(e,i),i.top<e.top&&T(e,i),i.bottom>e.bottom&&A(e,i)):(i.top>e.top?A(e,i):i.bottom<=e.top&&T(e,i),i.left>e.left?I(e,i):i.right<=e.left&&D(e,i)))}return e}(i,e)})},buildPointsDeprecated:function(e){var t=0;return e.map(a=>{var i=a[0];return i.id=++t,i.data=a[1],function(e,t){for(var a=0;a<t.length;a++){const i=t[a][0];i.id!==e.id&&(U(e,i)?(i.left<e.left&&D(e,i),i.right>e.right&&I(e,i),i.top<e.top&&T(e,i),i.bottom>e.bottom&&A(e,i)):(i.top>e.top?A(e,i):i.bottom<=e.top&&T(e,i),i.left>e.left?I(e,i):i.right<=e.left&&D(e,i)))}return e}(i,e)})},nextUp:function(e){if(!e.above)return;var t=O(R(e.above.map((t,a)=>{var i=L(e,t);return{sx:i,sy:U(t,e)?Math.min(e.bottom,t.bottom):e.top,x:t.right<i?t.right:t.left>i?t.left:i,y:t.bottom,i:a,w:1,quality:e.quality}})),-90);return t&&e?e.above&&e.above[t.i]:void 0},nextDown:function(e){if(!e.below)return;var t=O(R(e.below.map((t,a)=>{var i=L(e,t);return{sx:i,sy:F(t,e)?e.top:U(t,e)?Math.max(e.top,t.top):e.bottom,x:t.right<i?t.right:t.left>i?t.left:i,y:t.top,i:a,w:1,quality:e.quality}})),90);return t&&e?e.below&&e.below[t.i]:void 0},nextRight:function(e){if(!e.toRight)return;var t=O(R(e.toRight.map((t,a)=>{var i=F(t,e)?e.left:U(t,e)?Math.max(e.left,t.left):e.right,s=B(e,t);return{sx:i,sy:s,x:t.left,y:t.bottom<s?t.bottom:t.top>s?t.top:s,i:a,w:1,quality:e.quality}})),0);return t&&e?e.toRight&&e.toRight[t.i]:void 0},nextLeft:function(e){if(!e.toLeft)return;var t=O(R(e.toLeft.map((t,a)=>{var i=B(e,t);return{sx:U(t,e)?Math.min(e.right,t.right):e.left,sy:i,x:t.right,y:t.bottom<i?t.bottom:t.top>i?t.top:i,i:a,w:1,quality:e.quality}})),180);return t&&e?e.toLeft&&e.toLeft[t.i]:void 0}},H=a(5),V=a(1);function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let K,z,Y,$,Q,Z=[],q=-1,X="",J=!0,ee="";function te(){H.a.tabsPrivate.onWebviewClickCheck.addListener(de),H.a.tabsPrivate.onKeyboardChanged.addListener(ne),u.a.bind("ctrl+enter",oe),u.a.bind("shift+enter",le),u.a.bind("ctrl+shift+enter",ce)}function ae(e){const t=document.activeElement;t&&H.a.zoom.getVivaldiUIZoom(a=>{const i=t.getBoundingClientRect(),s=i.top,n=i.left;z.style.left=n+e.left/a+"px",z.style.top=s+e.top/a+"px",z.style.width=e.width/a+"px",z.style.height=e.height/a+"px","visible"!==z.style.visibility&&(z.style.visibility="visible",te())})}function ie(){z.style.visibility="hidden",H.a.tabsPrivate.onWebviewClickCheck.removeListener(de),H.a.tabsPrivate.onKeyboardChanged.removeListener(ne),u.a.unbind("ctrl+enter",oe),u.a.unbind("shift+enter",le),u.a.unbind("ctrl+shift+enter",ce)}function se(e){return"up"===e?function(){let e=Z[0];return Z.forEach((function(t){t.top>e.top&&(e=t)})),e}():"left"===e?function(){let e=Z[0];return Z.forEach((function(t){t.left>e.left&&(e=t)})),e}():"down"===e||"right"===e?function(){let e=Z[0];return Z.forEach((function(t){e.left+e.top>t.left+t.top&&(e=t)})),e}():void 0}function ne(e,t,a,i){i===w.a.KEY_ESCAPE&&0===a?ie():i!==w.a.KEY_RETURN&&i!==w.a.KEY_ENTER||0!==a?"WEBVIEW"!==document.activeElement.tagName&&ie():re(0)}function re(e){ie();const t=document.activeElement,a=parseInt(t.getAttribute("tab_id"));Y&&H.a.tabsPrivate.activateElementFromPoint(a,Math.round(Y.left+Y.width/2),Math.round(Y.top+Y.height/2),e),J=!0}function oe(){re(2)}function le(){re(1)}function ce(){re(3)}function de(e,t,a,i,s){ie()}function ue(e){const t=document.activeElement,a=parseInt(t.getAttribute("tab_id"));!N.a.get(V.kWebpagesSpatialNavigationEnabled)&&a||(H.a.tabsPrivate.getScrollPosition(a,(function(e,t){$===e&&Q===t||(J=!0),$=e,Q=t})),a!==q&&(q=a,J=!0),H.a.tabsPrivate.getSpatialNavigationRects(a,(function(i){if(J&&(Z=W.buildPoints(i),Y=se(e),J=!1),K=document.getElementById("app"),z)if("visible"!==z.style.visibility)ae(Y);else{let i;if(i=Y?function(e,t){switch(t){case"left":return W.nextLeft(e);case"up":return W.nextUp(e);case"right":return W.nextRight(e);case"down":return W.nextDown(e)}}(Y,e):se(e),i)ae(i),Y=i;else{const i=t.getBoundingClientRect(),s="up"===e||"down"===e?i.height/2:i.width/2;!function(e,t,a){ee=Y.path;const i=Math.round(a);H.a.tabsPrivate.scrollPage(e,t,i,()=>{H.a.tabsPrivate.getSpatialNavigationRects(e,(function(e){Z=W.buildPoints(e),Y=Z.find(e=>e.path===ee),ee="",ae(Y),J=!1}))}),H.a.tabsPrivate.getScrollPosition(e,(function(e,t){$=e,Q=t}))}(a,e,s)}}else z=document.createElement("div"),z.id="spatnav-indicator",z.style.position="absolute",z.style.boxShadow="0 0 10px 4px rgba(255,122,0,0.70), 0 0 0 2px #FF7A00",z.style.borderRadius="2px",z.style.backgroundColor="transparent",z.style.zIndex="0","visible"!==z.style.visibility&&(z.style.visibility="visible",te()),K.appendChild(z),Y=se(e),ae(Y)})))}g.a.addChangeListener((function(){const e=g.a.getActivePage().url;X?X!==e&&(z&&"visible"===z.style.visibility&&ie(),X=e,J=!0):X=e}));var he=function(e,t){ue(e)};var me=new class{constructor(){G(this,"left",he.bind(this,"left")),G(this,"up",he.bind(this,"up")),G(this,"right",he.bind(this,"right")),G(this,"down",he.bind(this,"down"))}},pe=a(292),ge=a(11),be=a(4),fe=a(2),_e=a(200);var Ne=new class{newBackgroundTab(e,t){ge.a.dispatch({actionType:be.a.TAB_NEW_BACKGROUND_TAB,url:e,addOpenerTabId:t})}switchTabBackBySetting(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_BACK_SETTING,maybeEvent:t})}switchTabForwardBySetting(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_FORWARD_SETTING,maybeEvent:t})}switchTabBackByHistory(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_BACK_HISTORY,maybeEvent:t})}switchTabForwardByHistory(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_FORWARD_HISTORY,maybeEvent:t})}switchTabBackByOrder(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_BACK_ORDER,maybeEvent:t})}switchTabForwardByOrder(e,t){ge.a.dispatch({actionType:be.a.TAB_SWITCH_FORWARD_ORDER,maybeEvent:t})}closeAllButActiveTab(){ge.a.dispatch({actionType:be.a.TAB_CLOSE_ALL_BUT_ACTIVE_TAB})}stackUntile(){ge.a.dispatch({actionType:be.a.TAB_STACK_UNTILE})}stackCreate(){ge.a.dispatch({actionType:be.a.TAB_STACK_CREATE})}stackDissolve(){ge.a.dispatch({actionType:be.a.TAB_STACK_DISSOLVE})}stackRemove(){ge.a.dispatch({actionType:be.a.TAB_STACK_REMOVE})}stackTileGrid(){ge.a.dispatch({actionType:be.a.TAB_STACK_TILE_GRID})}stackTileHorizontal(){ge.a.dispatch({actionType:be.a.TAB_STACK_TILE_HORIZONTAL})}stackTileVertical(){ge.a.dispatch({actionType:be.a.TAB_STACK_TILE_VERTICAL})}viewPageSource(){ge.a.dispatch({actionType:be.a.TAB_VIEW_PAGE_SOURCE})}toggleTabThumbnail(){ge.a.dispatch({actionType:be.a.TAB_TOGGLE_THUMBNAIL})}capturePage(e){const t=g.a.getActivePage(),a=t?t.id:0;if(a){const t=N.a.get(V.kWebpagesCaptureCompressionFormat);pe.a.captureFullpage(a,t,e,t=>{"clipboard"===e&&Object(_e.a)({title:Object(fe.a)("Page Captured"),body:Object(fe.a)("Image stored in the clipboard.")})})}}captureArea(e){const t=N.a.get(V.kWebpagesCaptureCompressionFormat);pe.a.captureAreaCommand(t,e)}},ve=a(116),Ee=a(126),we=a(32),Se=a(27),Ce=a(53),ke=a(87),ye=a(16),Oe=a(186),Ae=a(7),Te=a(140),Ie=a(6),De=a(77),Pe=a(21),xe=a(49);const Me=()=>{const e=xe.b.getFilteredFlat("",{inTrash:!1});Le(t=>{t?e.forEach(e=>{const{content:a="",url:i="",dateAdded:s=0}=e,n=new Date(s).toString(),r=new Blob([`${a}\n${n}\n${i||""}`]),o=`${a.substring(0,4)}_ ${e.id}.txt`;Ae.default.fileSystem.getWritableEntry(t,e=>{e.getFile(o,{create:!0},e=>{e.createWriter(e=>{let t=!1;e.onwriteend=function(e){if(!t)return t=!0,void this.truncate(r.size)},e.onerror=function(e){console.warn("Error Exporting Notes: "+e.toString())},e.write(r)})})})}):console.warn("Error exporting notes, directory missing")})},Le=e=>{Ae.default.fileSystem.chooseEntry({type:"openDirectory"},t=>{const a=Ae.default.runtime.lastError;a?console.error(a.message):e(t)})},je=()=>{Le(e=>{if(!e)return void console.warn("Error importing notes, directory missing");const t=e.createReader(),a=()=>{t.readEntries((function(e){e.length>0&&(e.forEach(e=>{e.file((function(e){const t=new FileReader;t.onloadend=function(){const e=this.result;e&&H.a.notes.create({content:e})},t.readAsText(e)}),e=>{console.warn("Error reading file "+e)})}),a())}))};a()})};var Be=a(145),Re=a(76);a(117);function Fe(e){return e.replace(/[\\\/:*<>|\"?]+/g," ").replace(/\. *$/,"")}var Ue=a(103),We=a(69);var He=a(20);let Ve=!1;const Ge={name:"",items:[],tokens:[],installed:!1,radioCounter:1,radioGroup:{},hasBookmarkContainer:!1,bookmarkExtrasEdge:"below"},Ke=[{name:"CONTAINER_WEBPANEL",hideInSettings:!1},{name:"CONTAINER_TAB",hideInSettings:!1},{name:"CONTAINER_PINNED_TAB",hideInSettings:!1},{name:"CONTAINER_BOOKMARK",hideInSettings:!1},{name:"CONTAINER_MAC_SERVICES",hideInSettings:!0}];let ze=[];const Ye={},$e=["COMMAND_CLOSE_TAB","COMMAND_CLOSE_WINDOW","COMMAND_EXIT","COMMAND_QUIT_MAC_MAYBE_WARN","COMMAND_NEW_WINDOW","COMMAND_NEW_PRIVATE_WINDOW","COMMAND_SHOW_HELP"],Qe=[{name:"COMMAND_NEW_WINDOW",action:()=>p.a.openWindow(),isEnabled:()=>!ye.a.isGuestSession(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("command","New Window")},{name:"COMMAND_NEW_PRIVATE_WINDOW",action:p.a.openIncognitoWindow,withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("New Private Window")},{name:"COMMAND_NEW_GUEST_WINDOW",action:h.a.openGuestWindow,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("New Guest Window")},{name:"COMMAND_MANAGE_PEOPLE",action:h.a.managePeople,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Manage Profiles")},{name:"COMMAND_CLOSE_WINDOW",action:()=>ke.a.close(window.vivaldiWindowId),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("command","Close Window")},{name:"COMMAND_SHOW_QUICK_COMMANDS",action:h.a.showQuickCommand,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Quick Commands")},{name:"COMMAND_FULLSCREEN",action:()=>ke.a.toggleFullscreen(window.vivaldiWindowId),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Fullscreen Mode")},{name:"COMMAND_TASK_MANAGER",action:()=>H.a.utilities.openTaskManager(Be.default),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Task Manager")},{name:"COMMAND_SHOW_SETTINGS",action:h.a.showSettings,isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Settings")},{name:"COMMAND_SHOW_EXTENSIONS",action:h.a.showExtensions,withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Extensions")},{name:"COMMAND_SHOW_HISTORY",action:h.a.showHistory,withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("History")},{name:"COMMAND_SHOW_NOTES",action:h.a.showNotes,withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Notes")},{name:"COMMAND_SHOW_BOOKMARKS",action:h.a.showBookmarks,withNoWindow:!0,isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Bookmarks")},{name:"COMMAND_SHOW_WELCOME",action:h.a.showWelcome,isEnabled:()=>!ye.a.isGuestSession(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Welcome Page")},{name:"COMMAND_SHOW_CLEAR_PRIVATE_DATA",action:h.a.showClearPrivateData,isEnabled:()=>!ye.a.isIncognitoOrGuest(),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Delete Browsing Data")},{name:"COMMAND_SHOW_BOOKMARK_BAR",action:()=>ke.a.toggleBookmarksBar(window.vivaldiWindowId),behavior:"checkbox",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Bookmarks Bar")},{name:"COMMAND_TOGGLE_APPLE_EVENTS",action:_.a.toggle.bind(_.a,V.kAllowJavascriptAppleEvents,!0,!1),inMenu:!1,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Apple Events")},{name:"COMMAND_TOGGLE_MENU_POSITION",action:_.a.toggle.bind(_.a,V.kMenuDisplay,"vivaldi","top"),hideInSettings:!1,inMenu:!0,behavior:"checkbox",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("command","Menu Position")},{name:"COMMAND_TOGGLE_FOOTER",action:()=>ke.a.toggleStatusBar(window.vivaldiWindowId),behavior:"checkbox",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("other","Status Bar")},{name:"COMMAND_TOGGLE_INTERFACE_COLOR",action:function(){const e=Se.a.getKeysSync(["THEMES_SYSTEM","THEMES_USER","THEME_CURRENT"]),t=e.THEMES_SYSTEM.concat(e.THEMES_USER);for(let a=0;a<t.length;a++){if(t[a].name===e.THEME_CURRENT){const e=t[a+1]?t[a+1]:t[0];We.a.setTheme(e);break}}},category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Next Theme")},{name:"COMMAND_EXIT",action:()=>{H.a.runtimePrivate.exit()},hideInSettings:!1,inMenu:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("verb","Exit")},{name:"COMMAND_QUIT_MAC_MAYBE_WARN",action:()=>{},inMenu:!1,category:be.a.CATEGORY_COMMAND_APPLICATION,withNoWindow:!0,...Object(Ie.a)("Quit $1",["Vivaldi"])},{name:"COMMAND_SHOW_HELP",action:()=>p.a.openURL("https://help.vivaldi.com/"),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("browser","Help")},{name:"COMMAND_SHOW_KEYBOARDSHORTCUTS",action:h.a.showKeyboardShortcuts,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Keyboard Cheat Sheet")},{name:"COMMAND_REPORT_BUG",action:()=>p.a.openURL("https://vivaldi.com/bugreport/"),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Report a Bug")},{name:"COMMAND_SHOW_PAGE_ACCESS_KEYS",action:h.a.showPageAccessKeys,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Show Webpage Access Key Shortcuts")},{name:"COMMAND_START_CHROMECAST",action:h.a.startCasting,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Cast")},{name:"COMMAND_MAIN_TOGGLE_TAB_BAR",action:()=>ke.a.toggleTabs(window.vivaldiWindowId),behavior:"checkbox",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Tab Bar")},{name:"COMMAND_MAIN_TOGGLE_PANEL_TOGGLE",action:()=>ke.a.togglePanelToggle(window.vivaldiWindowId),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Panel Toggle")},{name:"COMMAND_MAIN_TOGGLE_ADDRESS_BAR",action:()=>ke.a.toggleAddressBar(window.vivaldiWindowId),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("other","Address Bar")},{name:"COMMAND_MAIN_TOGGLE_UI",action:()=>ke.a.toggleMinimalUI(window.vivaldiWindowId),behavior:"checkbox",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Toggle UI")},{name:"COMMAND_CAPTURE_AREA_TO_DISK",action:Ne.captureArea.bind(null,"disk"),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Capture Area to File")},{name:"COMMAND_CAPTURE_AREA_TO_CLIPBOARD",action:Ne.captureArea.bind(null,"clipboard"),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Capture Area to Clipboard")},{name:"COMMAND_FOCUS_NEXT",action:h.a.stepFocus.bind(null,!0),repeat:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Focus Next Pane")},{name:"COMMAND_FOCUS_PREVIOUS",action:h.a.stepFocus.bind(null,!1),repeat:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Focus Previous Pane")},{name:"COMMAND_NEW_TAB",action:()=>p.a.openURL(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("command","New Tab")},{name:"COMMAND_NEW_BACKGROUND_TAB",action:()=>Ne.newBackgroundTab(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("New Background Tab")},{name:"COMMAND_CLONE_TAB",action:()=>{g.a.isSelecting()?p.a.clonePages(g.a.getSelectedPages()):p.a.clonePages(Pe.List.of(g.a.getActivePage()))},category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Clone Selected Tabs")},{name:"COMMAND_MOVE_TAB_TO_NEW_WINDOW",action:()=>p.a.detachPage(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Move Tab to New Window")},{name:"COMMAND_PIN_TAB",action:e=>p.a.togglePinned(),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Pin / Unpin Tab")},{name:"COMMAND_CLOSE_TAB",action:p.a.close,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Close Tab")},{name:"COMMAND_CLOSE_TAB_TO_LEFT",action:()=>p.a.closeToLeft(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Close Tabs to the Left")},{name:"COMMAND_CLOSE_TAB_TO_RIGHT",action:()=>p.a.closeToRight(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Close Tabs to the Right")},{name:"COMMAND_CLOSE_ALL_BUT_ACTIVE_TAB",action:Ne.closeAllButActiveTab,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Close Other Tabs")},{name:"COMMAND_TAB_THUMBNAIL",action:Ne.toggleTabThumbnail,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tab Thumbnail")},{name:"COMMAND_SHOW_ABOUT",action:()=>p.a.openURL(He.a.internals.about),category:be.a.CATEGORY_COMMAND_APPLICATION,withNoWindow:!0,...Object(Ie.a)("About")},{name:"COMMAND_CHECK_FOR_UPDATES",action:()=>H.a.autoUpdate.checkForUpdates(!0),isEnabled:()=>!ye.a.isGuestSession(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Check for Updates")},{name:"COMMAND_SHOW_COMMUNITY",action:()=>p.a.openURL("https://vivaldi.net"),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Community")},{name:"COMMAND_TAB_SWITCH_BACK_SETTING",action:Ne.switchTabBackBySetting,inMenu:!1,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tab Cycler Back")},{name:"COMMAND_TAB_SWITCH_FORWARD_SETTING",action:Ne.switchTabForwardBySetting,inMenu:!1,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tab Cycler Forward")},{name:"COMMAND_TAB_SWITCH_BACK_ORDER",action:Ne.switchTabBackByOrder,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Previous Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_ORDER",action:Ne.switchTabForwardByOrder,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Next Tab (by Order)")},{name:"COMMAND_TAB_SWITCH_FORWARD_HISTORY",action:Ne.switchTabForwardByHistory,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Previous Tab (Recent)")},{name:"COMMAND_TAB_SWITCH_BACK_HISTORY",action:Ne.switchTabBackByHistory,repeat:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Next Tab (Recent)")},{name:"COMMAND_TAB_MOVE_BACKWARD",action:p.a.stepActivePage.bind(null,!1),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Move Active Tab Backward")},{name:"COMMAND_TAB_MOVE_FORWARD",action:p.a.stepActivePage.bind(null,!0),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Move Active Tab Forward")},{name:"COMMAND_PAGE_SELECTION_EXPAND_PREVIOUS",action:()=>p.a.expandSelectionPrevious(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Select Previous Tab")},{name:"COMMAND_PAGE_SELECTION_EXPAND_NEXT",action:()=>p.a.expandSelectionNext(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Select Next Tab")},{name:"COMMAND_PAGE_SELECTION_TOGGLE_RELATED",action:()=>p.a.toggleRelatedSelection(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Select Related Tabs")},{name:"COMMAND_PAGE_SELECTION_CLEAR",action:p.a.clearSelection,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Deselect Tabs")},{name:"COMMAND_TAB_SWITCH_1",action:p.a.openPageN.bind(null,1),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 1")},{name:"COMMAND_TAB_SWITCH_2",action:p.a.openPageN.bind(null,2),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 2")},{name:"COMMAND_TAB_SWITCH_3",action:p.a.openPageN.bind(null,3),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 3")},{name:"COMMAND_TAB_SWITCH_4",action:p.a.openPageN.bind(null,4),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 4")},{name:"COMMAND_TAB_SWITCH_5",action:p.a.openPageN.bind(null,5),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 5")},{name:"COMMAND_TAB_SWITCH_6",action:p.a.openPageN.bind(null,6),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 6")},{name:"COMMAND_TAB_SWITCH_7",action:p.a.openPageN.bind(null,7),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 7")},{name:"COMMAND_TAB_SWITCH_8",action:p.a.openPageN.bind(null,8),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 8")},{name:"COMMAND_TAB_SWITCH_9",action:p.a.openPageN.bind(null,9),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to Tab 9")},{name:"COMMAND_TAB_SWITCH_LAST",action:p.a.openLastPage,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Switch to the Last Tab")},{name:"COMMAND_SHOW_CLOSED_TABS",action:o.a.onCommand.bind(o.a,"COMMAND_SHOW_CLOSED_TABS"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Show Closed Tabs")},{name:"COMMAND_TAB_REOPEN_RECENTLY_CLOSED",action:ve.a.undeletePreviousTab,tweakedShortcut:"ctrl+z",withNoWindow:!0,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Reopen Closed Tab")},{name:"COMMAND_TAB_STACK_TILE_VERTICAL",action:Ne.stackTileVertical,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tile Vertically")},{name:"COMMAND_TAB_STACK_TILE_HORIZONTAL",action:Ne.stackTileHorizontal,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tile Horizontally")},{name:"COMMAND_TAB_STACK_TILE_GRID",action:Ne.stackTileGrid,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Tile to Grid")},{name:"COMMAND_TAB_STACK_UNTILE",action:Ne.stackUntile,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Untile Tabs")},{name:"COMMAND_TAB_STACK_CREATE",action:Ne.stackCreate,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Create Tab Stack")},{name:"COMMAND_TAB_STACK_DISSOLVE",action:Ne.stackDissolve,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Ungroup Tab Stack")},{name:"COMMAND_TAB_STACK_REMOVE",action:Ne.stackRemove,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Remove from Tab Stack")},{name:"COMMAND_TOGGLE_IMAGES",action:p.a.toggleImageLoading,category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Load Images")},{name:"COMMAND_SET_LOAD_IMAGES_ALWAYS",action:p.a.setImageLoading.bind(null,"always"),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Images On")},{name:"COMMAND_SET_LOAD_IMAGES_NEVER",action:p.a.setImageLoading.bind(null,"never"),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Images Off")},{name:"COMMAND_SET_LOAD_IMAGES_CACHE",action:p.a.setImageLoading.bind(null,"cache"),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Load Images From Cache")},{name:"COMMAND_SET_ANIMATIONS_LOOP",action:()=>Ae.default.accessibilityFeatures.animationPolicy.set({value:"allowed"}),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Loop Animations")},{name:"COMMAND_SET_ANIMATIONS_NEVER",action:()=>Ae.default.accessibilityFeatures.animationPolicy.set({value:"none"}),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","No Animations")},{name:"COMMAND_SET_ANIMATIONS_ONCE",action:()=>Ae.default.accessibilityFeatures.animationPolicy.set({value:"once"}),behavior:"radio",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("other","Play Animations Once")},{name:"COMMAND_PAGE_TOGGLE_MUTE",action:()=>p.a.toggleMuting(g.a.getActivePage()),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Mute / Unmute Tab")},{name:"COMMAND_PAGE_MUTE_OTHER",action:()=>p.a.setMuting("other","mute","user"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Mute Other Tabs")},{name:"COMMAND_PAGE_MUTE_ALL",action:()=>p.a.setMuting("all","mute","user"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Mute All Tabs")},{name:"COMMAND_PAGE_UNMUTE_OTHER",action:()=>p.a.setMuting("other","unmute","user"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Unmute Other Tabs")},{name:"COMMAND_PAGE_UNMUTE_ALL",action:()=>p.a.setMuting("all","unmute","user"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Unmute All Tabs")},{name:"COMMAND_CAPTURE_PAGE_TO_DISK",showInQC:g.a.isActiveExternal,action:Ne.capturePage.bind(null,"disk"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Capture Page to File")},{name:"COMMAND_CAPTURE_PAGE_TO_CLIPBOARD",showInQC:g.a.isActiveExternal,action:Ne.capturePage.bind(null,"clipboard"),category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Capture Page to Clipboard")},{name:"COMMAND_IMPORT_DATA",action:h.a.showImportData,isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Import Bookmarks and Settings")},{name:"COMMAND_EXPORT_DATA",action:()=>Ae.default.bookmarks.export(),isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Export Bookmarks")},{name:"COMMAND_EXPORT_NOTES",action:()=>Me(),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Export Notes")},{name:"COMMAND_IMPORT_NOTES",action:()=>je(),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Import Notes")},{name:"COMMAND_NEW_TAB_LINK",action:(e,t,a)=>p.a.openURL(a,{addOpenerTabId:!0}),overLink:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Open Link in New Tab (Over a Link)")},{name:"COMMAND_NEW_BACKGROUND_TAB_LINK",action:(e,t,a)=>Ne.newBackgroundTab(a,!0),overLink:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Open Link in Background Tab (Over a Link)")},{name:"COMMAND_READERVIEW_TOGGLE",action:v.a.readerableToggle,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Toggle Reader View")},{name:"COMMAND_BOOKMARK_SELECTED_TABS",action:o.a.onCommand.bind(o.a,"COMMAND_BOOKMARK_SELECTED_TABS"),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Bookmark Selected Tabs")},{name:"COMMAND_SAVE_SESSION",action:h.a.showSaveSession.bind(h.a,{mode:"all"}),isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("command","Save Open Tabs as Session")},{name:"COMMAND_SAVE_SELECTED_SESSION",action:o.a.onCommand.bind(o.a,"COMMAND_SAVE_SELECTED_SESSION"),isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("command","Save Selected Tabs as Session")},{name:"COMMAND_OPEN_SESSION",action:h.a.showOpenSession,isEnabled:()=>!ye.a.isGuestSession(),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Open Saved Session")},{name:"COMMAND_ADD_BOOKMARK",action:Ce.a.doAction,isEnabled:()=>!ye.a.isGuestSession(),param:"addBookmark",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Create Bookmark")},{name:"COMMAND_FOCUS_ADDRESSFIELD",action:Ce.a.doAction,param:"focusAddressField",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Focus Address Field")},{name:"COMMAND_PAGE_REFRESH",action:Ce.a.reload,param:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Reload Page")},{name:"COMMAND_PAGE_RELOAD_NOCACHE",action:Ce.a.reload,param:!0,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Force Page Reload")},{name:"COMMAND_PAGE_SCROLL_UP",action:Ce.a.doAction,repeat:!0,param:"pageScrollUp",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Page Up")},{name:"COMMAND_PAGE_SCROLL_DOWN",action:Ce.a.doAction,repeat:!0,param:"pageScrollDown",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Page Down")},{name:"COMMAND_PAGE_SCROLL_TOP",action:Ce.a.doAction,param:"pageScrollTop",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Scroll Page to Top")},{name:"COMMAND_PAGE_SCROLL_BOTTOM",action:Ce.a.doAction,param:"pageScrollBottom",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Scroll Page to Bottom")},{name:"COMMAND_FOCUS_WEBVIEW",action:Ce.a.doAction,param:"focusWebView",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Focus Page")},{name:"COMMAND_PAGE_DISABLE_KEYBOARD_SHORTCUTS",action:_.a.toggle.bind(_.a,V.kKeyboardShortcutsEnable,!0,!1),category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Disable Keyboard Shortcuts")},{name:"COMMAND_FOCUS_SEARCHFIELD",action:Ce.a.doAction,param:"focusSearchField",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Focus Search Field")},{name:"COMMAND_FIND_IN_PAGE",action:Ce.a.doAction,param:"findInPage",category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Find in Page")},{name:"COMMAND_FIND_NEXT_IN_PAGE",action:Ce.a.doAction,param:"findNextInPage",repeat:!0,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Find Next in Page")},{name:"COMMAND_FIND_PREVIOUS_IN_PAGE",action:Ce.a.doAction,param:"findPreviousInPage",repeat:!0,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Find Previous in Page")},{name:"COMMAND_PAGE_BACK",action:Ce.a.back,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("History Back")},{name:"COMMAND_PAGE_FORWARD",action:Ce.a.forward,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("History Forward")},{name:"COMMAND_PAGE_REWIND",action:d.a.navigateRewind,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("History Rewind")},{name:"COMMAND_PAGE_FAST_FORWARD",action:d.a.navigateFastforward,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Fast Forward")},{name:"COMMAND_PRINT_PAGE",action:Ce.a.doAction,param:"print",category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Print")},{name:"COMMAND_STOP_PAGE",action:Ce.a.stop,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Stop Loading")},{name:"COMMAND_OPEN_PAGE",action:()=>H.a.utilities.openPage(),withNoWindow:!0,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("a file","Open File")},{name:"COMMAND_SAVE_PAGE",action:function(){const e=!1;if(e){const t=i.a.getActiveListEntry(),a=t?Fe(t.subject):"message";e.saveAs(a+".eml")}else Re.a.getActiveWebView()&&H.a.utilities.savePage()},category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Save Page As")},{name:"COMMAND_SEARCH_WITH_SELECTION",action:E.a.withPageSelection,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Search with Selection")},{name:"COMMAND_MAIN_ZOOM",action:Oe.a.setPageZoomPercentage,category:be.a.CATEGORY_COMMAND_APPEARANCE,keyword:{type:"number",defaultValue:100*De.a,min:100*De.h,max:100*De.g},...Object(Ie.a)("Page Zoom")},{name:"COMMAND_MAIN_ZOOM_IN",action:Oe.a.pageZoomIn,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Page Zoom In")},{name:"COMMAND_MAIN_ZOOM_OUT",action:Oe.a.pageZoomOut,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Page Zoom Out")},{name:"COMMAND_MAIN_ZOOM_HALF",action:Oe.a.pageZoomHalf,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Page Zoom Out Half")},{name:"COMMAND_MAIN_ZOOM_DOUBLE",action:Oe.a.pageZoomDouble,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Page Zoom In Double")},{name:"COMMAND_MAIN_ZOOM_RESET",action:Oe.a.pageZoomReset,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Page Zoom Reset")},{name:"COMMAND_MAIN_UI_ZOOM",action:Oe.a.setUIZoomPercentage,category:be.a.CATEGORY_COMMAND_APPEARANCE,keyword:{type:"number",defaultValue:100*De.a,min:100*De.l,max:100*De.k},...Object(Ie.a)("UI Zoom")},{name:"COMMAND_MAIN_UI_ZOOM_IN",action:Oe.a.uiZoomIn,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("UI Zoom In")},{name:"COMMAND_MAIN_UI_ZOOM_OUT",action:Oe.a.uiZoomOut,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("UI Zoom Out")},{name:"COMMAND_MAIN_UI_ZOOM_RESET",action:Oe.a.setUIZoomPercentage.bind(void 0,100),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("UI Zoom Reset")},{name:"COMMAND_TAB_VIEW_PAGE_SOURCE",action:Ne.viewPageSource,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("View Page Source")},{name:"COMMAND_DEVELOPER_TOOLS",action:()=>H.a.devtoolsPrivate.toggleDevtools("default"),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Developer Tools")},{name:"COMMAND_DEVTOOLS_INSPECTOR",action:()=>H.a.devtoolsPrivate.toggleDevtools("inspect"),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Developer Tools Element Inspector")},{name:"COMMAND_DEVTOOLS_CONSOLE",action:()=>H.a.devtoolsPrivate.toggleDevtools("console"),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Developer Tools Console")},{name:"COMMAND_EXPORT_SETTINGS",action:Ce.a.doAction,param:"exportSettings",category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Export Settings")},{name:"COMMAND_SHOW_HOMEPAGE",action:p.a.showHomepage,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Home")},{name:"COMMAND_DISCARD_PAGE",action:Ce.a.doAction,param:"discardPage",category:be.a.CATEGORY_COMMAND_TAB_ACTION,...Object(Ie.a)("Discard Page")},{name:"COMMAND_TOGGLE_PANEL",action:b.a.togglePanel,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("command","Panel")},{name:"COMMAND_FOCUS_PANEL",action:b.a.setFocus,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Focus Panel")},{name:"COMMAND_FOCUS_MAINMENU",action:o.a.onCommand.bind(o.a,"COMMAND_FOCUS_MAINMENU"),hideInSettings:!1,inMenu:!0,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Focus Main Menu")},{name:"COMMAND_FOCUS_BOOKMARKBAR",action:o.a.onCommand.bind(o.a,"COMMAND_FOCUS_BOOKMARKBAR"),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Focus Bookmarks Bar")},{name:"COMMAND_FOCUS_TABBAR",action:o.a.onCommand.bind(o.a,"COMMAND_FOCUS_TABBAR"),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Focus Tab Bar")},{name:"COMMAND_FOCUS_PANELBAR",action:o.a.onCommand.bind(o.a,"COMMAND_FOCUS_PANELBAR"),category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Focus Panel Bar")},{name:"COMMAND_TOGGLE_FLOATING_PANEL",action:b.a.toggleFloating,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Toggle Floating Panel")},{name:"COMMAND_SHOW_NEXT_PANEL",action:b.a.showNextPanel,param:"next",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Open Next Panel")},{name:"COMMAND_SHOW_PREVIOUS_PANEL",action:b.a.showNextPanel,param:"previous",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Open Previous Panel")},{name:"COMMAND_SHOW_BOOKMARK_PANEL",action:b.a.toggleContent,param:"bookmarks",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Bookmarks Panel")},{name:"COMMAND_SHOW_MAIL_PANEL",action:b.a.toggleContent,param:"mail",showInQC:f.a.getIsMailWindow,isEnabled:()=>!1,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Mail Panel")},{name:"COMMAND_SHOW_CONTACTS_PANEL",action:b.a.toggleContent,param:"contacts",showInQC:f.a.getIsMailWindow,isEnabled:()=>!1,category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Contacts Panel")},{name:"COMMAND_SHOW_DOWNLOADS_PANEL",action:b.a.toggleContent,param:"downloads",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Downloads Panel")},{name:"COMMAND_SHOW_NOTES_PANEL",action:b.a.toggleContent,param:"notes",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Notes Panel")},{name:"COMMAND_SHOW_HISTORY_PANEL",action:b.a.toggleContent,param:"history",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","History Panel")},{name:"COMMAND_SHOW_WINDOW_PANEL",action:b.a.toggleContent,param:"tabs",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("title","Window Panel")},{name:"COMMAND_SHOW_WEB_PANEL_1",action:b.a.toggleContent,param:"webpanel 1",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 1")},{name:"COMMAND_SHOW_WEB_PANEL_2",action:b.a.toggleContent,param:"webpanel 2",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 2")},{name:"COMMAND_SHOW_WEB_PANEL_3",action:b.a.toggleContent,param:"webpanel 3",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 3")},{name:"COMMAND_SHOW_WEB_PANEL_4",action:b.a.toggleContent,param:"webpanel 4",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 4")},{name:"COMMAND_SHOW_WEB_PANEL_5",action:b.a.toggleContent,param:"webpanel 5",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 5")},{name:"COMMAND_SHOW_WEB_PANEL_6",action:b.a.toggleContent,param:"webpanel 6",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 6")},{name:"COMMAND_SHOW_WEB_PANEL_7",action:b.a.toggleContent,param:"webpanel 7",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 7")},{name:"COMMAND_SHOW_WEB_PANEL_8",action:b.a.toggleContent,param:"webpanel 8",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 8")},{name:"COMMAND_SHOW_WEB_PANEL_9",action:b.a.toggleContent,param:"webpanel 9",category:be.a.CATEGORY_COMMAND_APPEARANCE,...Object(Ie.a)("Web Panel 9")},{name:"COMMAND_COPY_SELECTION_TO_NOTE",action:()=>{const{id:e,url:t}=g.a.getActivePage();H.a.utilities.getSelectedText(e,e=>{m.a.createNote({content:e,url:t})})},category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Copy Selected Text to Note")},{name:"COMMAND_SPATNAV_LEFT",action:me.left,repeat:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Spatial Navigation Left")},{name:"COMMAND_SPATNAV_UP",action:me.up,repeat:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Spatial Navigation Up")},{name:"COMMAND_SPATNAV_RIGHT",action:me.right,repeat:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Spatial Navigation Right")},{name:"COMMAND_SPATNAV_DOWN",action:me.down,repeat:!0,inMenu:!1,category:be.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION,...Object(Ie.a)("Spatial Navigation Down")},{name:"COMMAND_CLIPBOARD_UNDO",action:r.a.undo,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Undo")},{name:"COMMAND_CLIPBOARD_REDO",action:r.a.redo,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Redo")},{name:"COMMAND_CLIPBOARD_CUT",action:r.a.cut,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Cut")},{name:"COMMAND_CLIPBOARD_COPY",action:r.a.copy,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Copy")},{name:"COMMAND_CLIPBOARD_PASTE",action:r.a.paste,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Paste")},{name:"COMMAND_CLIPBOARD_SELECT_ALL",action:r.a.selectAll,readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("win_linux","Select All")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT",action:r.a.pasteAsPlainText,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Paste as Plain Text")},{name:"COMMAND_CLIPBOARD_PASTE_AS_PLAIN_TEXT_OR_PASTE_AND_GO",action:r.a.pasteAsPlainTextOrPasteAndGo,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Paste and Go")},{name:"COMMAND_CLIPBOARD_PASTE_AS_NOTE",action:r.a.createNoteFromSelection,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Paste to New Note")},{name:"COMMAND_WINDOW_MINIMIZE",action:()=>ke.a.minimize(window.vivaldiWindowId),category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Minimize")},{name:"COMMAND_HIDE_OTHERS",action:()=>{},readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Hide Others")},{name:"COMMAND_HIDE_VIVALDI",action:()=>{},readonly:!0,category:be.a.CATEGORY_COMMAND_APPLICATION,...Object(Ie.a)("Hide $1",["Vivaldi"])}];const Ze={MENU_FILE:{...Object(Ie.a)("win_linux","File")},MENU_EDIT:{...Object(Ie.a)("win_linux","Edit")},MENU_VIEW:{...Object(Ie.a)("win_linux","View")},MENU_BOOKMARKS:{...Object(Ie.a)("win_linux","Bookmarks")},MENU_TOOLS:{...Object(Ie.a)("win_linux","Tools")},MENU_WINDOW:{...Object(Ie.a)("win_linux","Window")},MENU_HELP:{...Object(Ie.a)("win_linux","Help")},MENU_IMAGES_AND_ANIMATION:{...Object(Ie.a)("win_linux","Images and Animations")},MENU_CAPTURE:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADCSURBVHgB1ZHBEcIgEEXB5JBjSsASvDFwoRMtQSvQDqwhlXiCqyXEDsydYfDvIRlEUK/5h7Cz87O8zzK2evFSU2s94hBpL8b4cM5t2S8ZY4RSaiwMfUopRd5v6YMfDpzzK8reez+hPuZGEJyaprlhkCAaeC7W2mFBLk3/RklEKV7MTURFJoqDc88+I8UlQklAPIcQdl3XMcS6ozWUfBtWVz8XyDzVTFWC+dFwe1961DfVVlRTuuo2vY1W9M+A2qpXqhfDA07BmbR5ZAAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAGRJREFUeNq9j8EVwCAIQx2FzeqmvcTnGBmBEegBq/hKjy3ckk+Mpfw5IMy3MbFPWTK0S7BahcKgOIJCWONQwI0PmVAHLGbNu+UsAOwy71JAu2xl7fkEY9kb0LeSI8s/lWzI+nQuBXxjN95EoeQAAAAASUVORK5CYII=",...Object(Ie.a)("win_linux","Capture")},COMMAND_OPEN_PAGE:{ellipsis:!0},COMMAND_FOCUS_ADDRESSFIELD:{ellipsis:!0,...Object(Ie.a)("Open Location")},COMMAND_SAVE_PAGE:{ellipsis:!0},COMMAND_PRINT_PAGE:{ellipsis:!0},COMMAND_START_CHROMECAST:{ellipsis:!0},COMMAND_IMPORT_CALENDAR:{testVisibility:()=>!ye.a.isGuestSession()&&!1,inMenu:!1},COMMAND_EXPORT_DATA:{testVisibility:()=>!ye.a.isGuestSession(),ellipsis:!0},COMMAND_OPEN_SESSION:{testVisibility:()=>!ye.a.isGuestSession(),ellipsis:!0},COMMAND_SAVE_SESSION:{testVisibility:()=>!ye.a.isGuestSession(),ellipsis:!0},COMMAND_FIND_IN_PAGE:{ellipsis:!0},COMMAND_TOGGLE_MENU_POSITION:{pref:V.kMenuDisplay,...Object(Ie.a)("Horizontal Main Menu")},COMMAND_MAIN_TOGGLE_TAB_BAR:{windowState:"tabs",...Object(Ie.a)("Show Tab Bar")},COMMAND_SHOW_BOOKMARK_BAR:{windowState:"bookmarksBar",...Object(Ie.a)("command","Show Bookmarks Bar"),testVisibility:()=>!ye.a.isGuestSession()},COMMAND_TOGGLE_FOOTER:{windowState:"statusBar",...Object(Ie.a)("command","Show Status Bar")},COMMAND_TOGGLE_PANEL:{panelState:"SHOW_PANEL",...Object(Ie.a)("command","Show Panel")},COMMAND_SHOW_BOOKMARK_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACJSURBVHgB7ZKxCoAgEIavaG3wBcJGt2ZdnHurXiR6itY2X6Pew8HOUAgREaWtH0Tvzv87Dg6gUk2YEEKceNHYZ2PMpZQaISUEmCDV+xOpQQuV+gFfA6SUlDE2FAGsWWt9EEL2FKRLmXHzNhs7yJwN8GZc28XGnPMHArkjvM1W7r1CjrDbVFIr1g1wAzRdx1+LFgAAAABJRU5ErkJggg==",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAXNSR0IArs4c6QAAAE9JREFUeNpjYCAWHLl/5D8CHr2PqeA/hP7PC4Iw3jBVsF/hmjYeBfsVjtw/+hCkBKsCsHT90XqQEqwKQNIgFkgJVgUQaYgSLAqOGuDm4QUAABBqP/s39jMAAAAASUVORK5CYII="},COMMAND_SHOW_MAIL_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7ZHRDYAgDETBMAhuoL8wBZOyBb+6gWyCVyOmQSAMwCWkTem7tKkQUzIn1toLQY9AKaUYQlgpV6yu8bEjejyHhpNDxphNSunR4xCPXF940ws5MiGgBpfGqhyPGgBkE/fs2YB/E9Qm6cFNA27Sg6srVEy64gYRp0xiQHRGMfXpBmxdTd/71HkZAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAATklEQVR42s3PsQ3AMAgEwB+J/ev/ORiFFAhjKxTuEqiAkwDgJ0FnvFPeIGRyWdUyuoyxAaBJjrO7gSI1HkASrlUDAGR9yQiO3+L+zY/jAaekW1uCzRxFAAAAAElFTkSuQmCC",testVisibility:f.a.canRenderInWindow.bind(void 0,"mail"),inMenu:!1},COMMAND_SHOW_CONTACTS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF0SURBVHgBtVM7boNAEOVnic72BSwiX8DpIn8UcgIfIeEEzg1QTuA6nW8Q5wZE4lcmXTrb0KTcBgnxzRuLtQhQIEUeabXLm3lvZ98IQfhniH2KFovFnSiK93TO89z3PO+D56Q+AmVZakVRqLQgpCNGPKfUCymRZdkzCJsK2g0Ggxfse+AbEiAwjmMSYK0O0jTdgjwE6QbrFtAYmGlZVozWv7q6E+u3o/jgOM64iZFgFEUa9jUu+IEHry0PqC0kWV0dN9M3S5JkKMvyOYddrXvQy0QKPOFMgg/k0yMXuQj4vn+Ew8JyudQ5Np/PZ+hKcF33pCiKxnESQcdrOv+ZAgQMEN5WqxXtjM6SJBlV6wzEeu2oJYDQiQjjPlVVpamQyAz43rZti2xp1Atyrd0nmj9ueaDnINh0On3H27eTyYSFYdg5RpmTsZmczJNcBPhO07RTEATfTQGpek+LzAOjJHMN5M2uDi4ewKQDfpquGvoXaB2Fa8QvffXhZBpebQgAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAvklEQVR42pWQMQ7CMAxFMzLmBvgIjGx0ZOzIVjbGjh3bG/QIcBNL2EkkFo7gI+QIILeiTSMqgS1FSfzy429j/g/eU0ONP6wC7uRaTbTJJVrqOHLkHi1uqFEgQCp7HUrAN+6N8ccMQMtx3qF97FzrL8n7AE4mLXHbAK6lOukhB1QhQ1ioGBzsFPXl6CNUE0AFx3s5rnoaAV/PQOckAAILdd9Gc9by4AJYuFotfxD9Jh2SLGam/TwzgF/LnE3/EG8smIVnSsnf6AAAAABJRU5ErkJggg==",testVisibility:f.a.canRenderInWindow.bind(void 0,"contacts"),inMenu:!1},COMMAND_SHOW_DOWNLOADS_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADPSURBVHgBxZLBDYIwFIZblTtMAIYpBA51BKfwzAS6gUePzuAGvUC4OoFNF5B7k9a/Rkw1QCQQ/ZKmf1/7+t5rHyEjoV0baZpeMUVWG2NEWZZLMgRcYNr0JzMykv9fsGgEY8xXSt26Drrv4HlewDmv3zKwBkrpGlJorfOiKF4/9NQ5Ro091jhb5m4UKaWI4/iMbzuGYRhgza09y7I9bFs4r6qqurg+rX2AciKUc4LTIxIy85H2xo38FUmS7FD7gfyEvm7rOztdHwA+IAtOpuIO/nhVS2EDB78AAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAb0lEQVR42mNgIAUcuX/k/5H/R+/jVvAfQdJbwX4BkONAEKIAAvcLICk57HDk/rECuEkFR94fs0c3ReHI/cMNYMUNR+8fV8Digv0KR/YfXX90/ZH9KIajgqP1R/oZyADYfY4kSljBfpjfUeB+oqwHAI1/WdoNOXPUAAAAAElFTkSuQmCC"},COMMAND_SHOW_NOTES_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACgSURBVHgB7VLBDYQgENw1FnAlWAeEGrSEK+GugrsOtAU70CKgDkuwAnBMNFHCRhM/PpwPsDPsLuwQXQRvD0qpNzPX2L5S4hDCAP5vrW3XWLbLxvyTLi98gaXZxvJIU6BK5ZzrUwmMMaX3viMJWutAB4g1GV1EfqbKCnwen0qQEj4dyIjHOMLOpSSGkarZzmIHIL+wa4MnJN0GF47gP3QrTBi9PG385uw1AAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAASklEQVR42mNgIA4cTTjy/sh/BDx6/0g8ioIj95GlwfA9qoL/R/2R+Yf8j/xHU4BuKTkKkF0wRE14jxZQAUfvo8cFamC/R4sLCgAAKuF43sJZFFMAAAAASUVORK5CYII="},COMMAND_SHOW_HISTORY_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD8SURBVHgB3VJLDoIwEG1BYMsR8Aa647fgKHAC4gn0BsQTKCfwCOCChB3eQI9QtxDAmYQmTW2NOxMnadKZad983iPk10blQJIk3jAMJ7hu4LhCis3zXE/TtGvb9sGDhuJzhw8ty1o3TUP5QZ9SejVNs/N93yMqC8PwEgRBLsXukr+PoqhSdgAVEsdxSinmib5t28dlvHcAnLmua0Y+2JJ3dQBK0878JUBpGEalA5EBGDAhUkeAgRS3DyAF+kue6QBufd/nchUEgeVleAeaU6SZ51biQ+A6Qx0AlU9g4ywvNI7jA3zOQUxbHlMqEbookFIiKRE7HMcxE5X4B/YCuLpojZ4/JTwAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAf0lEQVR42rWQ3RWAIAiFHcER2jA3sFHawBF46GJjNAIj2Kn879RT4QMIH4hXqc+MBhAE4TzCbh36srAlHW8aBtIg7PwYoy16C6oASOpGyFOkBsJb1KXT20/AzNuFtEDe4UTcfQdiW31aKwVzYI0O3hQdlqnT4UDYFSVBXflP2wFyclxBF22/4AAAAABJRU5ErkJggg=="},COMMAND_SHOW_WINDOW_PANEL:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABYSURBVHgB7ZLdCcAgDIQvpYO0c2T+ZI26SWofCgriDwqC+L3kOMiFkACzoV8w8+PLVdNkZk5V78j0AVbSKe9AJ5SblENEKDJaAoausAOAM9Cu9hLfJ2IdXuDHHKAeH9NrAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAALElEQVR42mNgoAo4cv/If0x49D5CwX90EpVFjALskAGLWmSXDTUFhEKStgAAWEdiK3NU7WoAAAAASUVORK5CYII=",testVisibility:f.a.canRenderInWindow.bind(void 0,"tabs")},CONTAINER_WEBPANEL:{...Object(Ie.a)("Web Panels"),settingsName:Object(fe.a)("[All Web Panels]")},COMMAND_SET_LOAD_IMAGES_ALWAYS:{imageLoadingPref:"always"},COMMAND_SET_LOAD_IMAGES_NEVER:{imageLoadingPref:"never"},COMMAND_SET_LOAD_IMAGES_CACHE:{imageLoadingPref:"cache",...Object(Ie.a)("Load Images from Cache")},COMMAND_SET_ANIMATIONS_LOOP:{animationPref:"allowed"},COMMAND_SET_ANIMATIONS_NEVER:{animationPref:"none"},COMMAND_SET_ANIMATIONS_ONCE:{animationPref:"once"},COMMAND_MAIN_ZOOM_IN:{persistent:!0},COMMAND_MAIN_ZOOM_OUT:{persistent:!0},CONTAINER_BOOKMARK:{labelIndex:0,settingsName:Object(fe.a)("[All Bookmarks]")},COMMAND_SHOW_SETTINGS:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF1SURBVHgBrVLLbcJAEF2bz9lUAOkAbnwVdwA5cAYqIKkgpIJABTYVhFSAL/7cTCqwbz7is795E3mtRbIVpGSk1czuvH37ZnYY+6NJdYnJZHKGUynO8/xkWdZTFU5m9aZEUTRI0/QBcZ/9pmA6ne6yLOsiPMiyvMarK9M0O6qqKnEcX7HXG43GJzBzrC/btvelAoB6ALxiXSRJ+oDPW60WvcwMwwiL2MdFDSkfmC0Ri/VqtNidRtjxeKyVCsB4JCFUBgcBsAbwCu/Br8RSoUKlkm5YZ7PZoug8f8ULgiCnRUTCuTsajR75vskDMIZwisCp4EzMcQuhuMSJTaQGnQTCl+Vy6WPRhZ1wbsDth8Nhjwmy3nlT7jEqleN/SsA3HTA056JBW7x4SJJEdxzHLxQq2NOczJGn/+8j3lBOElif4bokEQQLxGsQdyiHQfLgdOSONAM0CxjttxuCCpkuVG1AQt+sYSoHVbgmq7dLu912KRCb++/2DQTs0kfSGMmdAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAVFBMVEX////ExMTFxcXExMS/v7/FxcXExMTDw8PExMTFxcXHx8e/v7/ExMTExMTFxcXFxcXDw8PGxsbKysrFxcXCwsLDw8PFxcXExMTGxsbGxsbExMTExMQtledLAAAAG3RSTlMA79+fEJ/PgN9/ICCPvzBgkG8wr1BAT18/cHDxOv8OAAAAdUlEQVR4AQXBhQHDIAAAsOBQnRv//7kEAABgn/MOAOptiQBaOS5BnuWRvrDOa98y6wgjZqQEQCp49sYZ4psWP/DY6QTqBzwrgcj+grUPzh7ejLhgKwDsBWtsoS3kS7yGBX7bK82cw3akAaDejgoA0px3AADAH03KBE7hRjloAAAAAElFTkSuQmCC",ellipsis:!0,testVisibility:()=>!ye.a.isGuestSession()},COMMAND_SHOW_QUICK_COMMANDS:{ellipsis:!0},COMMAND_SHOW_BOOKMARKS:{testVisibility:()=>!ye.a.isGuestSession()},COMMAND_SHOW_HISTORY:{testVisibility:()=>!ye.a.isGuestSession()},COMMAND_SHOW_NOTES:{testVisibility:()=>!ye.a.isGuestSession()},COMMAND_SHOW_CALENDAR:{testVisibility:()=>!ye.a.isGuestSession()&&!1,inMenu:!1},COMMAND_SHOW_EXTENSIONS:{testVisibility:()=>!ye.a.isGuestSession()},COMMAND_CAPTURE_PAGE_TO_DISK:{...Object(Ie.a)("Page to File")},COMMAND_CAPTURE_PAGE_TO_CLIPBOARD:{...Object(Ie.a)("Page to Clipboard")},COMMAND_CAPTURE_AREA_TO_DISK:{...Object(Ie.a)("Area to File")},COMMAND_CAPTURE_AREA_TO_CLIPBOARD:{...Object(Ie.a)("Area to Clipboard")},COMMAND_SHOW_CLEAR_PRIVATE_DATA:{ellipsis:!0,testVisibility:()=>!ye.a.isIncognitoOrGuest()},COMMAND_FULLSCREEN:{...Object(Ie.a)("Fullscreen")},COMMAND_MAIN_TOGGLE_UI:{...Object(Ie.a)("Hide UI")},CONTAINER_PINNED_TAB:{...Object(Ie.a)("title","Pinned Tabs"),settingsName:Object(fe.a)("[All Pinned Tabs]")},CONTAINER_CLOSED_TAB:{...Object(Ie.a)("title","Closed Tabs"),settingsName:Object(fe.a)("[All Closed Tabs]")},CONTAINER_TAB:{...Object(Ie.a)("title","Tabs"),settingsName:Object(fe.a)("[All Tabs]")},COMMAND_SHOW_WELCOME:{testVisibility:()=>!ye.a.isGuestSession()},COMMAND_CHECK_FOR_UPDATES:{ellipsis:!0,testVisibility:()=>!0},COMMAND_SHOW_ABOUT:{iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgBzVLLTcQwEHU+yjkN5EMHHPM75MgROqADditIOHKDClg6gAowUn43tgQraYAjRErCG5FFjjd7hifZ4xm9eTNjm7G/hkFbkiS54zivruv6Xde9nCLHcUycned5Wtu2nGI6bdM0ZTPnOgzDzVoyiqQwqcL/EQD4b0DXszRNbVXANM09zMfs7hcCmqbdSly77/sbVYBzTsmCzsMwXC0EiqLgaOv5EITgJggCnx3DBm/XNI1YCBAsy9pKLdqGYTzKo9BFw/jjOMrdMk12oijKUD0/+KgmaF7EfNhz+HlVVQsBXXbQxYPUBY3iY13OyQLVn5gCQ3aEEJ945y8cL1Qi3Utd129HcbYCfJh3qiqPgtbP1rj6WhDVtoqfsxMw1oL4pgKj0AsEWPdlWd6xf4tvaZVsnjSI7BsAAAAASUVORK5CYII=",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAjUlEQVR42q1QSRGAMAysBCQgBSdYwAE4qAQkICEPtvBEAhIqYZm2FAIDvEhe2dlrYswPM3Yg+isGAccuHww7NUpSJUyxQXgpMkEKeBDLje9aFbGAc3mcbkgeJ4TV6VZSRktCUkyorfTRo91jVjcEex2nazHTbvqY2pwE1I8PC9ZJ//bR6lMfPSwIa36eDUlAgXmKiZFsAAAAAElFTkSuQmCC"}};Object(Ie.a)("mac","Vivaldi"),Object(Ie.a)("mac","File"),Object(Ie.a)("mac","Edit"),Object(Ie.a)("mac","View"),Object(Ie.a)("mac","Bookmarks"),Object(Ie.a)("mac","Tools"),Object(Ie.a)("mac","Window"),Object(Ie.a)("mac","Help"),Object(Ie.a)("Preferences"),ye.a.isGuestSession(),Object(Ie.a)("mac","Services"),Object(Ie.a)("mac","Show All"),Object(Ie.a)("text_mac","Delete"),Object(Ie.a)("Show Tab Bar"),Object(Ie.a)("Hide Tab Bar"),Object(Ie.a)("Show Bookmarks Bar"),Object(Ie.a)("Hide Bookmarks Bar"),Object(Ie.a)("mac","Show Status Bar"),Object(Ie.a)("mac","Hide Status Bar"),Object(Ie.a)("mac","Show Panel"),Object(Ie.a)("mac","Hide Panel"),Object(Ie.a)("Show Bookmarks Panel"),Object(Ie.a)("Hide Bookmarks Panel"),Object(Ie.a)("Show Mail Panel"),Object(Ie.a)("Hide Mail Panel"),f.a.canRenderInWindow.bind(void 0,"mail"),Object(Ie.a)("Show Contacts Panel"),Object(Ie.a)("Hide Contacts Panel"),f.a.canRenderInWindow.bind(void 0,"contacts"),Object(Ie.a)("Show Downloads Panel"),Object(Ie.a)("Hide Downloads Panel"),Object(Ie.a)("Show Notes Panel"),Object(Ie.a)("Hide Notes Panel"),Object(Ie.a)("Show History Panel"),Object(Ie.a)("Hide History Panel"),Object(Ie.a)("Show Window Panel"),Object(Ie.a)("Hide Window Panel"),f.a.canRenderInWindow.bind(void 0,"tabs"),Object(Ie.a)("Load Images From Cache"),Object(Ie.a)("mac","Enter Full Screen"),Object(Ie.a)("mac","Exit Full Screen"),Object(Ie.a)("verb","Capture"),V.kAllowJavascriptAppleEvents,Object(Ie.a)("Allow JavaScript from Apple Events"),Object(Ie.a)("Disable JavaScript from Apple Events"),Object(Ie.a)("mac","Zoom"),Object(Ie.a)("mac","Bring All to Front");function qe(e){return Ze[e]}function Xe(){ze.forEach(e=>{u.a.unbind(e.key,e.func)}),ze=[];const e=ct.getCommandShortcuts();Object.keys(e).forEach(t=>{const a=e[t].function,i=e[t].onAutoRepeat,s=e[t].name.startsWith("COMMAND_MAIL");u.a.bind(t,a,i,s),ze.push({key:t,func:a})})}function Je(e,t){Ye[e]=t,Ge.installed&&function e(t,a,i){for(let s=i.length-1;s>=0;s--)if(i[s].items)e(t,a,i[s].items);else if(i[s].commandName===t){a&&a.shortcut?(i[s].shortcut=a.shortcut[0],i[s].shortcuts=a.shortcut):(delete i[s].shortcut,delete i[s].shortcuts);break}}(e,t,Ge.items)}function et(e){return e.hasOwnProperty("param")?e.action.bind(null,e.param):e.action.bind(null,void 0)}function tt(e,t){const a={};for(const i in Ye){const s=Ye[i];void 0!==s&&Qe.forEach(n=>{if(n.name===i&&(!0===t||!0!==n.readonly)&&("function"!=typeof n.isEnabled||n.isEnabled())&&s.hasOwnProperty(e)){const t=s[e];t&&t.forEach(e=>{a[e]={function:et(n),label:n.gestureLabel||n.label,name:n.name,onAutoRepeat:n.repeat}})}})}return a}function at(e,t){let a={};if("folder"===e.type)a={id:e.id,commandName:e.action,items:[],type:e.type,...qe(e.action),withNoWindow:!0},e.children&&e.children.forEach(e=>{const i=at(e,t);Object.keys(i).length>0&&a.items&&a.items.push(i)});else if("command"===e.type)a={id:e.id,commandName:e.action,type:e.type,...qe(e.action)};else if("checkbox"===e.type)a={id:e.id,commandName:e.action,type:e.type,...qe(e.action)};else if("radio"===e.type&&e.radiogroup){let t=Ge.radioGroup[e.radiogroup];void 0===t&&(Ge.radioGroup[e.radiogroup]=Ge.radioCounter++,t=Ge.radioGroup[e.radiogroup]),a={id:e.id,commandName:e.action,type:"radiobutton",group:e.radiogroup,radiogroup:t,...qe(e.action)}}else"container"===e.type?-1!==Ke.findIndex(t=>t.name===e.action)&&(a={id:e.id,container:e.action,type:e.type,mode:e.containermode,edge:e.containeredge,...qe(e.action),withNoWindow:!0},t&&"CONTAINER_BOOKMARK"===e.action&&(Ge.hasBookmarkContainer=!0,Ge.bookmarkExtrasEdge=e.containeredge)):"separator"===e.type&&(a={id:e.id,name:"---",type:"separator",shortcut:"",shortcuts:[],label:"",labelEnglish:"",ellipsis:!1,settingsName:"",custom:!1,inMenu:!0});void 0!==e.title&&(a.label=a.labelEnglish=e.title,a.settingsName&&delete a.settingsName,a.ellipsis=!1),void 0!==e.custom&&(a.custom=e.custom);const i=Ye[e.action];return i&&i.shortcut&&(a.shortcut=i.shortcut[0],a.shortcuts=i.shortcut),!1===a.inMenu?{}:a}function it(e,t){Ge.installed&&(!function e(t){t.forEach(t=>{t.items?e(t.items):t.stateCB&&(t.setting?Se.a.removeListener(t.setting,t.stateCB):t.pref?N.a.removeListener(t.pref,t.stateCB):t.imageLoadingPref?g.a.removeChangeListener(t.stateCB):t.animationPref?Ae.default.accessibilityFeatures.animationPolicy.onChange.removeListener(t.stateCB):t.panelState?f.a.removeChangeListener(t.stateCB):t.storeToken&&t.storeToken.remove())})}(Ge.items),Ge.tokens.forEach(e=>{e.remove()})),Ge.name=e,Ge.radioCounter=1,Ge.radioGroup={},Ge.items=[],Ge.tokens=[],Ge.hasBookmarkContainer=!1,Ge.bookmarkExtrasEdge="below",t?t.forEach(e=>{const t=at(e,!0);Object.keys(t).length>0&&Ge.items.push(t)}):console.error("No entries in menu:",e),function e(t,a){const i=e=>!0===e||"top"===e||"on"===e,s=(e,t)=>{e.statestrings&&(e.label=e.statestrings[t?1:0].label,e.labelEnglish=e.statestrings[t?1:0].labelEnglish),e.checked=t};t.forEach(t=>{if(t.items)e(t.items,a);else if(t.setting){const e=Se.a.getSync(t.setting);s(t,i(e)),t.stateCB=function(e,t){s(this,i(t)),ct.emitChange("menuState")}.bind(t),Se.a.addListener(t.setting,t.stateCB)}else if(t.pref)s(t,i(N.a.get(t.pref))),t.stateCB=function(e,t,a){s(this,i(t)),ct.emitChange("menuState")}.bind(t),N.a.addListener(t.pref,t.stateCB);else if(t.imageLoadingPref)s(t,t.imageLoadingPref===N.a.get(V.kPageImageLoading)),t.stateCB=function(){const e=N.a.get(V.kPageImageLoading)===this.imageLoadingPref;e!==this.checked&&(s(this,e),ct.emitChange("menuState"))}.bind(t),g.a.addChangeListener(t.stateCB);else if(t.animationPref)t.stateCB=function(){Ae.default.accessibilityFeatures.animationPolicy.get({},({value:e})=>{const t=e===this.animationPref;t!==this.checked&&(s(this,t),ct.emitChange("menuState"))})}.bind(t),t.stateCB(),Ae.default.accessibilityFeatures.animationPolicy.onChange.addListener(t.stateCB);else if(t.panelState)switch(t.panelState){case"SHOW_PANEL":s(t,f.a.getPanelButtonsVisible()),t.stateCB=function(){const e=f.a.getPanelButtonsVisible();this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),f.a.addChangeListener(t.stateCB);break;case"SHOW_CONTENT":s(t,f.a.getIsPanelVisible(t.param)),t.stateCB=function(){const e=f.a.getIsPanelVisible(this.param);this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),f.a.addChangeListener(t.stateCB)}else if(t.windowState)switch(t.windowState){case"tabs":s(t,ye.a.getVisibleUI().tabs),t.stateCB=function(){const e=ye.a.getVisibleUI().tabs;this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),a.push(ye.a.addListener(t.stateCB));break;case"bookmarksBar":s(t,ye.a.getVisibleUI().bookmarksBar),t.stateCB=function(){const e=ye.a.getVisibleUI().bookmarksBar;this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),a.push(ye.a.addListener(t.stateCB));break;case"statusBar":s(t,"on"===ye.a.getVisibleUI().statusBar),t.stateCB=function(){const e="on"===ye.a.getVisibleUI().statusBar;this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),a.push(ye.a.addListener(t.stateCB));break;case"fullScreen":s(t,ye.a.isFullscreen()),t.stateCB=function(){const e=ye.a.isFullscreen();this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),a.push(ye.a.addListener(t.stateCB));break;case"minimalUI":s(t,ye.a.isMinimalUI()),t.stateCB=function(){const e=ye.a.isMinimalUI();this.checked!==e&&(s(this,e),ct.emitChange("menuState"))}.bind(t),a.push(ye.a.addListener(t.stateCB))}})}(Ge.items,Ge.tokens),Ge.installed=!0}function st(e,t){const a=e=>{for(let i=0;i<e.length;i++){const s=e[i];if(s.commandName){for(let e=0;e<Qe.length;e++){const t=Qe[e];if(t.name===s.commandName){s.handler=et(t),s.withNoWindow=t.withNoWindow,s.name||(s.name=void 0!==s.label?s.label:t.label),s.englishName||(s.englishName=void 0!==s.labelEnglish?s.labelEnglish:t.labelEnglish);break}}s.name||(s.name=s.label),!s.englishName&&s.labelEnglish&&(s.englishName=s.labelEnglish)}else s.name||(s.name=s.label),!s.englishName&&s.labelEnglish&&(s.englishName=s.labelEnglish);if(s.name||(s.name=Object(fe.a)("No name")),s.englishName||(s.englishName=Object(fe.a)("No name")),s.items)a(s.items);else if(s.container&&t)if("CONTAINER_BOOKMARK"===s.container){s.containerType=H.a.menubarMenu.ContainerType.BOOKMARKS,s.containerId=n.a.getRootId(),s.containerOffset=0;const e=N.a.get(V.kBookmarksManagerSorting),t=we.a.toMenuSorting(e.sortOrder,e.sortField);s.containerSortOrder=t.order,s.containerSortField=t.field,s.containerGroupFolders=e.sortOrder!==we.a.NO_SORTING}else{let t=[],a=void 0,n=void 0,r=!1;"CONTAINER_WEBPANEL"===s.container?t=nt():"CONTAINER_PINNED_TAB"===s.container?(t=ot(),a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD5SURBVHgBtVHBDYJAEOTQvz59WoJvIPFKwA6kEqES7UCtAPwQflqCDwrgSUIAZ8iRXIAE0DjJZfcuO3O7s4bxIxZziqWU6w2QpmnWvpkzyNuiKJ6maYaWZe1mC4B8ruv6gvSAc2U3kwUcx/EZ4zgO0IHLPM/zRkAMFMuqqvbtXQixxs8uiB7iiW9lWXpJkryZL7sCJIMkURzxjkjDAsRmBHah1/cEgDsKj4wofvEBpvHnW5dM9DxQpMYo3W3ViTEqQA9U2hMZFeCuOSs8CHURejJJgLtGoEiGs2rHoaHYwmNIQGit+2pNkb6mSWDrtm3Xyu3vMGbW3/ABNRKFPPHD6XUAAAAASUVORK5CYII=",n="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///+/v7/Hx8e/v7/ExMTFxcXFxcXExMTFxcXDw8PDw8PExMTFxcXExMTExMTGxsbQpf+eAAAAEHRSTlMAECAg398wv3+AQI9g7/8/FKJcHQAAAFFJREFUeAFjQAWMClCGSRiUUZEqAKY5C6aC5FZ0bF1eBOK3d/R4gCVSEzg2gBlsYRwNYMay1Awwg9k3LRzMYH/6IWMBiDEPqBUs8wJmYQKaAwANFhLITP6v6wAAAABJRU5ErkJggg=="):"CONTAINER_CLOSED_TAB"===s.container?t=rt():"CONTAINER_TAB"===s.container?t=lt():"CONTAINER_MAC_SERVICES"===s.container&&(r=!0),"folder"===s.mode||r?(s.items=t,s.iconPNG=a,s.iconPNGWhite=n):(e.splice(i,1,...t),i+=t.length-1)}}},i=Object(Te.a)(e);return a(i),i}function nt(){return f.a.getWebPanelOrder().map((e,t)=>{const a=f.a.getWebPanels().filter(t=>t.id===e)[0],i=t<9,s=function(e,t,a){return(a?"&"+(t+1)+" ":"")+e}(a.title||a.contentUrl||Object(fe.a)("Unknown Web Panel"),t,i),n=Ye["COMMAND_SHOW_WEB_PANEL_"+(t+1)],r=n&&n.shortcut?n.shortcut:[];return{name:s,commandName:"JS_LOCAL_TOGGLE_WEBPANEL",parameter:e,mnemonic:i,handler:b.a.toggleContent.bind(this,e),url:a.activeUrl,shortcuts:r,shortcut:r[0]}})}function rt(){const e=(e,t,a)=>(a?"&"+(t+1)+" ":"")+e,t=e=>{const t=Object(Ue.b)(e);return(a=He.a.getDisplayTitle(t)).length>70&&(a=a.substring(0,70)+"..."),a;var a};return Ee.a.getTrash().map((a,i)=>{const s=i<9;if(a.tab){const n=a.tab;return{mnemonic:s,name:e(t(n),i,s),url:n.url,handler:ve.a.undeleteTab.bind(n)}}if(a.window){const e=a.window;if(e.tabs){const a=e.tabs;return{items:a.map((e,a)=>({mnemonic:a<9,name:t(e),url:e.url,handler:ve.a.undeleteTab.bind(e)})).concat([{name:"---"},{handler:ve.a.undeleteWindow.bind(e),...Object(Ie.a)("Restore All")}]),...Object(Ie.a)("Window with $1 Tab","Window with $1 Tabs",[a.length])}}}})}function ot(){const e=function(e,t,a){return(a?"&"+(t+1)+" ":"")+e};return g.a.getTabs(!1).toArray().filter(e=>"tab"===e.type&&e.page.pinned).map((t,a)=>{const i=t.page,s=a<9;return{handler:p.a.openPage.bind(null,i.id),name:e(He.a.getDisplayTitle(i),a,s),commandName:"JS_LOCAL_ACTIVATE_TAB",url:i.get("url"),parameter:i.get("id").toString(),emphasized:i.get("active"),mnemonic:s}})}function lt(){const e=function(e,t,a){return(a?"&"+(t+1)+" ":"")+e};return g.a.getTabs("off"===N.a.get(V.kTabsStackingMode)).toArray().filter(e=>"tab"===e.type&&!e.page.pinned||"group"===e.type).map((t,a)=>{if("tab"===t.type){const i=t.page,s=a<9;return{handler:p.a.openPage.bind(null,i.id),name:e(He.a.getDisplayTitle(i),a,s),commandName:"JS_LOCAL_ACTIVATE_TAB",url:i.get("url"),parameter:i.get("id").toString(),emphasized:i.get("active"),mnemonic:s}}if("group"===t.type){const i=a<9;return{name:e(g.a.getTitleByGroupName(t.id,t.page.get("title")),a,i),mnemonic:i,iconPNG:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBvZJLCsAgDERj8SD2Gnp+vYbeJDXQRQlNiB98C7NweAwkAIs4elJKtY8ghRCxlVJu0dIFCAra/wVGSBJjrNOCnLPrhGmB1GRYwJsMCzjLAv/Opq2K7gAsWO/hm/Msc7bJX4O9TY7wAFQ4MpFfIoDNAAAAAElFTkSuQmCC",iconPNGWhite:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAPElEQVR42mNgIAyO3D/yHxkevY+u4D9+PhYFaKZgMwFFDLsCJFNwmQAXp4ICLOFApEMJhCYRAUZqnJAJALGlehnFYWcIAAAAAElFTkSuQmCC",items:t.pages.toArray().map((t,a)=>{const i=a<9;return{handler:p.a.openPage.bind(null,t.id),name:e(He.a.getDisplayTitle(t),a,i),commandName:"JS_LOCAL_ACTIVATE_TAB",url:t.get("url"),parameter:t.get("id").toString(),emphasized:t.get("active"),mnemonic:i}})}}})}const ct=new class extends c.a{getIsInitialized(){return Ve}getCommandShortcuts(){return tt("shortcut",!1)}getCommandsGestures(){return tt("gestures",!0)}getCommands(){return Qe}getQuickCommands(){return Qe.filter(e=>{if("function"==typeof e.isEnabled&&!e.isEnabled())return!1;if("function"==typeof e.showInQC&&!e.showInQC())return!1;for(var t in Ye)if(void 0!==Ye[t]){var a=Ye[t];if(e.name===t)return a.hasOwnProperty("shortcut")&&(e.shortcut=a.shortcut),!0===a.showInQC}return!1})}getAllCommands(){return Qe.filter(e=>{if("function"==typeof e.isEnabled&&!e.isEnabled())return!1;for(var t in Ye)if(void 0!==Ye[t]){var a=Ye[t];if(e.name===t)return a.hasOwnProperty("shortcut")&&(e.shortcut=a.shortcut),a.hasOwnProperty("gestures")&&(e.gestures=a.gestures),a.hasOwnProperty("showInQC")&&(e.showInQC=a.showInQC),!0}})}isCommandWhitelisted(e){for(const t in Ye)if(void 0!==Ye[t]){const a=Ye[t];if(a.shortcut&&a.shortcut.includes(e))return $e.includes(t)}return!1}isActionWhitelistedForSettings(e){return $e.includes(e)}isNamedMenuAvailable(e){return Ge.name===e}getNamedMenu(e,t){return this.isNamedMenuAvailable(e)?st(Ge.items,t):[]}getBookmarkExtrasEdge(){return Ge.bookmarkExtrasEdge}makeMenuWithContent(e){const t=[];return e&&e.forEach(e=>{const a=at(e,!1);Object.keys(a).length>0&&t.push(a)}),st(t,!1)}getHandlerByAction(e,t){let a;switch(e){case"JS_LOCAL_ACTIVATE_TAB":{const e=parseInt(t),i=g.a.getPages().find(t=>t.get("id")===e);i&&(a=()=>p.a.openPage(i.id));break}case"JS_LOCAL_ADD_ACTIVE_TAB_TO_BOOKMARKS":{const e=t,i=g.a.getActivePage();i&&e&&(a=()=>s.a.bookmarkPageInFolder(i,e));break}case"JS_LOCAL_TOGGLE_WEBPANEL":const e=t;b.a.toggleContent(e)}return a}emitChange(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}getUserEditableCommands(){return this.getAllCommands()}getMenuCommands(){const e=Qe.filter(e=>void 0===e.inMenu||e.inMenu);return e.push.apply(e,Ke.filter(e=>!(e=>!!(e.hideInSettings||"CONTAINER_BOOKMARK"===e.name&&Ge.hasBookmarkContainer))(e)).map(e=>({name:e.name,behavior:"container",...qe(e.name)}))),e}};ge.a.register(e=>{switch(e.actionType){case be.a.COMMAND_INITIALIZE:e.commands.forEach(e=>{Je(e.command,e.value)}),Xe(),Ve=!0,ct.emitChange("init");break;case be.a.COMMAND_SET_NAMED_MENU:it(e.name,e.content),ct.emitChange("menu");break;case be.a.COMMAND_UPDATE_COMMAND:Je(e.commandKey,e.commandValue),Xe(),ct.emitChange("shortcut");break;default:return}});t.default=ct},function(e,t,a){"use strict";var i=a(190),s=a(52),n=a(0),r=a.n(n),o=a(25),l=a(119),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\Modal.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.Component{constructor(e,t){super(e),d(this,"closeModalHandler",e=>{this.props.onRequestClose(e)}),d(this,"handleClickOutside",e=>{this.props.ignoreClick&&!e.target.closest(".window-close")||this.closeModalHandler(e)}),d(this,"keyDownModal",e=>{"Escape"!==e.key||this.props.ignoreEscape||(e.preventDefault(),this.closeModalHandler(e.nativeEvent))}),this._lastFocused=t.document.activeElement}componentDidMount(){this.props.ignoreEscape||s.a.bind("meta+.",this.closeModalHandler)}componentWillUnmount(){this.props.ignoreEscape||s.a.unbind("meta+.",this.closeModalHandler),this._lastFocused&&this._lastFocused.focus()}render(){return r.a.createElement(i.a,{focusName:"focus_modal",forceTrap:!0,id:"modal-bg",className:this.props.viewMode?this.props.viewMode:"slide",style:{width:this.props.dialogWidth},__source:{fileName:c,lineNumber:66}},r.a.createElement("div",{onKeyDown:this.keyDownModal,__source:{fileName:c,lineNumber:72}},this.props.children))}}d(u,"contextType",o.a),t.a=Object(l.a)(u)},,,function(e,t,a){"use strict";var i=a(12),s=a(8),n=a(10),r=a(84),o=a.n(r),l=a(1);const c={addByUrl:function(e){c.addByUrls([e],-1)},addByUrls:function(e,t){const a=n.a.get(l.kPanelsWebList);e.forEach(e=>{const i={id:"webview-"+o()(),contentUrl:e,mobileMode:!0,title:"",faviconUrl:"",faviconUrlValid:!1,available:!0};void 0===t||-1===t||t>=a.length?a.push(i):(a.splice(t,0,i),t++)}),s.a.set(l.kPanelsWebList,a)},removeById:function(e){const t=n.a.get(l.kPanelsWebList);if(t.length>0){const a=t.filter(t=>t.id===e)[0],i=t.filter(t=>t.id!==e);if(s.a.set(l.kPanelsWebList,i),a){const e=n.a.get(l.kPanelsWebRemovedList);e.push(a),s.a.set(l.kPanelsWebRemovedList,e)}}},setMobileMode:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.mobileMode=t),i.push(n)}s.a.set(l.kPanelsWebList,i)}},setAvailable:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.available=t),i.push(n)}s.a.set(l.kPanelsWebList,i)}},setTitle:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.title=t),i.push(n)}s.a.set(l.kPanelsWebList,i)}},setActiveUrl:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.activeUrl=t),i.push(n)}s.a.set(l.kPanelsWebList,i)}},setContentUrl:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.contentUrl=t),i.push(n)}s.a.set(l.kPanelsWebList,i)}},setFaviconUrl:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0){const i=[];for(let s=0;s<a.length;s++){const n=a[s];n.id===e&&(n.faviconUrl=t,n.faviconUrlValid=!0),i.push(n)}s.a.set(l.kPanelsWebList,i)}},recoverWebPanel:function(e){const t=n.a.get(l.kPanelsWebRemovedList);if(t.length>0&&e<t.length){c.addByUrl(t[e].contentUrl);const a=t.slice();a.splice(e,1),s.a.set(l.kPanelsWebRemovedList,a)}},emptyTrash:function(){s.a.set(l.kPanelsWebRemovedList,[])},copyWebPanelAdress:function(e){const t=n.a.get(l.kPanelsWebList);if(t.length>0)for(let a=0;a<t.length;a++){const i=t[a];if(i.id===e){const e=function(e){e.clipboardData.setData("text/plain",i.activeUrl),e.preventDefault()};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e);break}}},getUrlById:function(e){const t=n.a.get(l.kPanelsWebList);if(t.length>0){const a=t.filter(t=>e===t.id).map(e=>e.activeUrl);if(a.length>0)return a[0]}return""},openInTab:function(e,t,a){const s=n.a.get(l.kPanelsWebList);if(s.length>0)for(let n=0;n<s.length;n++){const r=s[n];if(r.id===e){i.a.openURL(r.activeUrl,{inCurrent:t,inBackground:a});break}}},openInWindow:function(e,t){const a=n.a.get(l.kPanelsWebList);if(a.length>0)for(let s=0;s<a.length;s++){const n=a[s];if(n.id===e){i.a.openURL(n.activeUrl,{inNewWindow:!0,incognito:t});break}}},getIndexByShortcut:function(e){const t="webpanel".length,a=e.substr(0,t),i=e.substr(t).trim();return"webpanel"===a&&i>=1&&i<=9?i:-1},setUIContent:function(e){const t=n.a.get(l.kPanelsWebToolbar);t.showToolbar=e.showToolbar,t.allControls=e.allControls,s.a.set(l.kPanelsWebToolbar,t)},getPanelPrefix:function(){return"webview-"},getFaviconPrefix:function(){return"chrome://favicon/"}};t.a=c},,function(e,t,a){"use strict";function i(e){return!!e&&e.contains(document.activeElement)}a.d(t,"a",(function(){return i}))},function(e,t,a){"use strict";var i=a(18),s=a.n(i),n=a(129),r=a(8),o=a(10),l=a(27),c=a(212),d=a(163),u=a(114),h=a(1);const m=matchMedia("(prefers-color-scheme: dark)"),p={getDocumentColors:()=>{const e=s()(l.a.getSync("BROWSER_COLOR_FG")),t=s()(l.a.getSync("BROWSER_COLOR_BG")),a=s()(l.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG")),i=n.e.fgBgHighlight(e,t,a);return{color:i.colorFg.css(),backgroundColor:i.colorBgLightIntense.css(),linkColor:i.colorHighlightBg.css()}},createImageBackground:e=>{if(o.a.get(h.kThemeWindowBackgroundImageEnabled)){const t=o.a.get(h.kThemeWindowBackgroundImageUrl),a=o.a.get(h.kThemeWindowBackgroundImageScaling),i=document.createElement("img"),n=o.a.get(h.kThemeWindowBackgroundAccentColorBlend);i.onload=()=>{const r=p.getPalette(i,20),o={backgroundImage:`url("${t}")`};let c,d;if("scale"===a)o.backgroundSize="cover",o.backgroundPosition="50% 0";else{const e=i.naturalHeight,t=i.naturalWidth;o.backgroundSize=`${t}px ${e}px`}if(n){const e=l.a.getSync("TABCOLOR_BEHIND_TABS"),t=s()(l.a.getSync("BROWSER_COLOR_ACCENT_BG")),a=s()(l.a.getSync("BROWSER_COLOR_BG")),i=s.a.blend(r[0],e?t:a,"multiply").luminance();c=i>.4?"black":"white",d=i>.4?"white":"black",o.backgroundBlendMode="multiply"}else{const e=s()(r[0]).luminance();c=e>.4?"black":"white",d=e>.4?"white":"black"}o["--colorImageForeground"]=c,o["--colorImageBackgroundAlpha"]=s()(d).alpha(.6).css(),o["--colorImageBackgroundAlphaHeavy"]=s()(d).alpha(.3).css(),e(o)},i.src=t}else e({})},getPalette:(e,t)=>{const a=document.createElement("canvas"),i=t||16,s=a.getContext("2d"),n=[],r=[];a.width=i,a.height=i,s.imageSmoothingEnabled=!1,s.drawImage(e,0,0,i,i);const o=s.getImageData(0,0,i,i).data;for(let e=0;e<o.length/4;e++){const t=4*e,a=o[t],i=o[t+1],s=o[t+2];let r=void 0;if(!(0===o[t+3]||a>240&&s>240&&i>240)){for(let e=0;e<n.length;e++)if(a===n[e][0]&&i===n[e][1]&&s===n[e][2]){r=e;break}void 0===r?n.push([a,i,s,1]):n[r][3]++}}n.sort((e,t)=>t[3]-e[3]);for(let e=0;e<Math.min(10,n.length);e++)r.push([n[e][0],n[e][1],n[e][2]]);return r},getSchedules:()=>{const e=l.a.getSync("THEMES_SYSTEM").concat(l.a.getSync("THEMES_USER")),t=Object(d.a)(o.a.get(h.kThemeScheduleTimeline));return t.map(t=>e.some(e=>e.name===t.themeName)?t:Object.assign(t,{themeName:e[e.length-1].name})),t},setTheme:e=>{if(e&&.1===e.version){switch(o.a.get(h.kThemeScheduleEnabled)){case"off":break;case"system":const t=o.a.get(h.kThemeScheduleOS),a=m.matches;r.a.set(h.kThemeScheduleOS,{...t,[a?"dark":"light"]:e.name});break;case"timeline":const i=p.getSchedules(),s=p.getTimerByDate(new Date,c.a);if(s){const t=i.findIndex(e=>e.id===s.id);i[t].themeName=e.name,r.a.set(h.kThemeScheduleTimeline,i)}else console.error("Unable to get the currently scheduled theme.");break;default:console.error("Invalid theme schedule type.")}l.a.set({THEME_CURRENT:e.name,BROWSER_COLOR_BG:e.colors.baseBg,BROWSER_COLOR_FG:e.colors.baseFg,BROWSER_COLOR_HIGHLIGHT_BG:e.colors.highlightBg,BROWSER_COLOR_ACCENT_BG:e.colors.accentBg,TABCOLOR_BEHIND_TABS:e.settings.accentOnWindow,USE_TABCOLOR:e.settings.accentFromPage,USE_TAB_TRANSPARENT_TABS:e.settings.tabsTransparent,BORDER_RADIUS:e.settings.borderRadius})}},switchThemeBySystem:e=>{const t=e.matches?p.getTheme(o.a.get(h.kThemeScheduleOS).dark):p.getTheme(o.a.get(h.kThemeScheduleOS).light);p.setTheme(t)},setSystemThemeSchedule:()=>{p.switchThemeBySystem(m),m.addEventListener("change",p.switchThemeBySystem)},revokeSystemThemeSchedule:()=>{m.removeEventListener("change",p.switchThemeBySystem)},getTheme:(e,t=!1)=>{const a=l.a.getSync("THEMES_SYSTEM").concat(l.a.getSync("THEMES_USER")),i=Object(d.a)(a.find(t=>t.name===e));return i||Object(d.a)(a[0])},isSystemTheme:e=>l.a.getSync("THEMES_SYSTEM").some(t=>Object(u.a)(t,e)),isCurrentTheme:e=>e.name===l.a.getSync("THEMES_CURRENT"),getTimerByDate:(e,t)=>{let a=p.getSchedules();const i=60*e.getHours()+e.getMinutes(),s=Object(d.a)(a),n=Object(d.a)(a);for(let e=0;e<a.length;e++)s[e].hours-=24,n[e].hours+=24;if(a=a.concat(s,n),t===c.a){a.sort((e,t)=>60*t.hours+t.minutes-(60*e.hours+e.minutes));for(let e=0;e<a.length;e++){if(60*a[e].hours+a[e].minutes<i+1)return a[e]}}else if(t===c.b){a.sort((e,t)=>60*e.hours+e.minutes-(60*t.hours+t.minutes));for(let e=0;e<a.length;e++){if(60*a[e].hours+a[e].minutes>i)return a[e]}}}};t.a=p},,,function(e,t,a){"use strict";(function(e){a(106);var i=a(12),s=a(10),n=a(46),r=a(217),o=a(85),l=a(80),c=a(11),d=a(4),u=a(27),h=a(16),m=a(7),p=a(945),g=a(504),b=a.n(g),f=a(5),_=a(36),N=a(439),v=a(1);const E=[];function w({url:e,options:t}){const{addTypedSearchHistory:a,enableSearch:s,allowOverride:n,useSearchEngine:r,...o}=t;i.a.openURL(e.replace(/ /g,"%20"),{inCurrent:!t.hasOwnProperty("inBackground"),...o})}function S(e,t,a,i){i?r.a.addTypedSearchHistory(t):E.push({url:e,keywordId:a,searchTerms:t})}function C({url:t}){if(e.nextTick(()=>{c.a.dispatch({actionType:d.a.URLFIELD_TYPED_HISTORY_UPDATE})}),void 0===t)return;const a=E.findIndex(e=>e.url===t);if(-1!==a){const e=E.splice(a,1);f.a.historyPrivate.setKeywordSearchTermsForURL(t,e[0].keywordId,e[0].searchTerms)}}function k(e,t){return e.replace(/%s/g,encodeURIComponent(t).replace("'","%27")).replace(/%S/g,t)}function y(e,t={}){const a=e,i=t.addTypedSearchHistory;if(t.useSearchEngine){const e=t.useSearchEngine.historyId,s=k(t.useSearchEngine.url,a);return S(s,a,e,i),{url:s,options:{...t}}}const s=n.a.getByQuery(a);if(s){const e=a.substr(s.keyword.length+1),n=k(s.url,e);return S(n,e,s.historyId,i),{url:n,options:{...t,post:s.post,transition:o.a.KEYWORD}}}const r=n.a.getDefault(h.a.isIncognito());if(r){const e=k(r.url,a);return S(e,a,r.historyId,i),{url:e,options:{...t,post:r.post,transition:o.a.GENERATED}}}return{url:e,options:{...t}}}async function O(e,t){if(function(e){const t=e.split(" ");return t.length>=2&&n.a.hasKeyword(t[0])}(e)){const{url:a,options:i}=y(e,t);return Promise.resolve({url:a,options:i})}const{urlValid:a,schemeValid:i,schemeParsed:s,externalHandler:r,normalizedUrl:o}=await(l=e,new Promise(e=>{f.a.utilities.isUrlValid(l,e)}));var l;if(Object(N.b)(e)){const a=Object(_.b)(e);return Promise.resolve({url:a,options:t})}const c=!i&&s&&!r,d=a&&i&&("http"===s||"https"===s)||!s||s&&!o,u=/\.(.{2,})(\/)/.test(e.split(" ")[0]),h=/^([a-zA-Z0-9\-\._~!$&'()\*+,;=%]*(:[a-zA-Z0-9\-\._~!$&'()\*+,;=%]*)?)?@\S*/.test(e),m=function(e){if(!e.includes(":"))return!1;if(e.includes(" ")&&e.indexOf(" ")<e.indexOf(":"))return!1;try{const t=parseInt(e.split(":")[1].split("/")[0]);return t>=0&&t<=65535}catch(e){return!1}}(e);if(t.enableSearch&&!h&&!u&&(c||d&&e.includes(" "))&&!m){const{url:a,options:i}=y(e,t);return Promise.resolve({url:a,options:i})}if(a&&(i||r))return Promise.resolve({url:e,options:t});const g=e.startsWith("?");if(g||Object(_.f)(e)||Object(p.a)(e)){const{url:a,options:i}=y(g?e.substr(1):e,t);return Promise.resolve({url:a,options:i})}const v=Object(_.b)(e),E=b()(Object(_.n)(v)),w=/[a-z]+\/$/.test(e);if(!E&&!w&&t.enableSearch){const{url:a,options:i}=y(e,t);return Promise.resolve({url:a,options:i})}try{return new URL(v),Promise.resolve({url:v,options:t})}catch(a){if(t.enableSearch){const{url:a,options:i}=y(e,t);return Promise.resolve({url:a,options:i})}return Promise.resolve({url:"vivaldi://network-error/-300",options:t})}}function A(){c.a.dispatch({actionType:d.a.URLFIELD_TYPED_HISTORY_SHOW})}function T(){c.a.dispatch({actionType:d.a.URLFIELD_TYPED_HISTORY_HIDE})}m.default.history.onVisitRemoved.addListener((function(e){c.a.dispatch({actionType:d.a.URLFIELD_TYPED_HISTORY_UPDATE}),e&&e.allHistory&&c.a.dispatch({actionType:d.a.NAVIGATION_HISTORY_ALL_DELETED})})),t.a={clearUrlfieldState:function(e){c.a.dispatch({actionType:d.a.URLFIELD_CLEAR_STATE,pageId:e})},setUrlfieldState:function(e,t){c.a.dispatch({actionType:d.a.URLFIELD_SET_STATE,pageId:e,state:t})},clearSelection:function(e){c.a.dispatch({actionType:d.a.URLFIELD_SET_STATE,pageId:e,state:{selectionStart:-1,selectionEnd:-1}})},goSearchURL:function(e,t){const{url:a,options:i}=y(e,t);w({url:a,options:i})},toggleTypedHistory:function(){!0===l.a.showTypedHistory()?T():A()},deleteHistory:function(e){c.a.dispatch({actionType:d.a.URLFIELD_HISTORY_DELETE,url:e})},load:function(){e.nextTick(()=>{let e=void 0;try{e=JSON.parse(u.a.getSync("TYPED_HISTORY"))}catch(e){return}if(!e||!e.h)return;const t=o.a.TYPED,a=s.a.get(v.kAddressBarInlineSearchEnabled);e.h.forEach(e=>O(e.u,{enableSearch:a,transition:t}).then(({url:a,options:i})=>{f.a.historyPrivate.migrateOldTypedUrl(a,e.w,i.transition||t)})),u.a.remove("TYPED_HISTORY")}),m.default.history.onVisited.addListener(C),c.a.dispatch({actionType:d.a.URLFIELD_TYPED_HISTORY_UPDATE})},copyUrlfieldState:function(e,t){c.a.dispatch({actionType:d.a.URLFIELD_COPY_STATE,pageId:e.get("id"),state:t})},showTypedHistory:A,hideTypedHistory:T,go:async function(e,t){return Promise.all(e.map((a,i)=>{if(!a)return Promise.resolve();const s={...t};return e.length>1&&(s.inBackground=i!==e.length-1),O(a,s).then(w)}))},processSearchUrl:y}}).call(this,a(64))},,,,function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(0),r=a.n(n),o=a(11),l=a(4);let c=r.a.createRef();const d=new class extends s.a{getActiveWebView(){return c.current&&c.current.webview}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};d.dispatchToken=o.a.register(e=>{switch(e.actionType){case l.a.WEBVIEW_CLEAR_IF_ACTIVE:c.current===e.component&&(c=r.a.createRef(),d.emitChange());break;case l.a.WEBVIEW_SET_ACTIVE:c=e.ref,d.emitChange()}}),t.a=d},function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"l",(function(){return s})),a.d(t,"k",(function(){return n})),a.d(t,"n",(function(){return r})),a.d(t,"m",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return g})),a.d(t,"a",(function(){return b}));const i=1,s=.5,n=4,r=.25,o=.05,l=1,c=.2,d=5,u=.1,h=1,m=.5,p=2,g=.05,b=1},,function(e,t,a){"use strict";a(106);var i=a(168),s=a.n(i),n=a(11),r=a(21);class o extends s.a{getInitialState(){return new r.Map}reduce(e,t){switch(t.actionType){case"PAGE_SET_MEDIASTATE":let{tabId:a,mediastate:i}=t;return Array.isArray(i)||(i=[i]),function(e,t,a){if(t!==e.get(a))return e.set(a,t);return e}(e,i,a);case"PAGE_CLOSE":return function(e,t){let a=e;return t.forEach(e=>{a.has(e.id)&&(a=a.remove(e.id))}),a}(e,t.pages);default:return e}}getMediaStateByTabId(e){const t=this.getState().get(e);return t&&t[0]?t[0]:""}hasMediaState(e,t){const a=this.getState().get(e);return!!(a&&a.indexOf(t)>-1)}}t.a=new o(n.a)},function(e,t,a){"use strict";var i=a(115),s=a(58),n=a.n(s),r=a(9),o=a(8),l=a(10),c=a(11),d=a(4),u=a(27),h=a(7),m=a(944),p=a.n(m),g=a(181),b=a(503),f=a(5),_=a(31),N=a(203),v=a(1);const E=p()("urlbarstore"),w={};let S=!1,C=[],k=!1;const y={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,isReaderable:!1,isReaderableActive:!1,selectionEnd:-1,selectionStart:-1},O=new class extends n.a{getUrlfieldStateFromId(e){return{...y,...w[e.toString()]}}showTypedHistory(){return!0===S}getTypedHistory(){return C}getThemeColors(){return I()}getDisplayURL(e,t,a={}){const{focused:i,showFullURL:s}=a;if(e||t){const a=e&&e.length>0?e:t;let n=Object(g.a)(a);if(n.length>_.j&&(n=n.substr(0,_.j)+"..."),""!==n){if(!0===s)return n;{if(!a.match(/^https*:/))return n;const e=n.replace(/^(.*?:\/\/\/*)(.*)$/,"$2");return!0!==i?e.replace(/(.*?)\/*[#?].*/,"$1"):e}}}return""}emitChange(e){this.emit(d.a.CHANGED,e)}addChangeListener(e){this.on(d.a.CHANGED,e)}removeChangeListener(e){this.removeListener(d.a.CHANGED,e)}};function A(e,t){const a=(e||"").toString();if(e){const i=w[a]||{};return w[a]={...i,...t},E("set state",e,"next",t,"old",i,"now",w[a]),!0}return!1}function T(e){const t=e+"";w[t]?w[t]={isReaderable:w[t].isReaderable,isReaderableActive:w[t].isReaderableActive,autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,selectionEnd:0,selectionStart:0}:w[t]={autocompleteValue:void 0,editUrl:void 0,isActive:!1,isOmniDropdownOpen:!1,isReaderable:!1,isReaderableActive:!1,selectionEnd:0,selectionStart:0}}function I(){const e=l.a.get(v.kWebpagesReaderStyle).themeStyle;return"theme"===e?u.a.getKeysSync(["BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_HIGHLIGHT_BG"]):"dark"===e?{BROWSER_COLOR_BG:"#111111",BROWSER_COLOR_FG:"#f6f6f6",BROWSER_COLOR_HIGHLIGHT_BG:"#0080ff"}:{BROWSER_COLOR_BG:"#f6f6f6",BROWSER_COLOR_FG:"#111111",BROWSER_COLOR_HIGHLIGHT_BG:"#0000ee"}}function D(){const e={...l.a.get(v.kWebpagesReaderStyle),...I()},t=parseInt(r.a.getActivePage().id);i.a.isReaderModeActive(t)&&h.default.tabs.sendMessage(t,{readerStyle:e})}c.a.register(e=>{switch(e.actionType){case d.a.URLFIELD_SET_STATE:A(e.pageId,e.state)&&O.emitChange();break;case d.a.NAVIGATION_SET_STATE:if(!e.navigationState.isLoading&&(k=!1,"abort"===e.navigationState.trigger)){const t=e.pageId+"";w[t]&&!w[t].editUrl&&T(t),O.emitChange()}break;case"CHROME_TABS_CREATED":k=!0;break;case"CHROME_TABS_UPDATED":"loading"===e.args[1].status&&r.a&&"function"==typeof r.a.isActivePage&&!r.a.isActivePage(e.args[0])&&T(e.args[0]);break;case d.a.PAGE_RELOAD:T(r.a.getActivePage().get("id")),O.emitChange();break;case"PAGE_OPEN":O.emitChange();break;case"PAGE_CLOSE":!function(e){for(const{id:t}of e.values())delete w[t+""]}(e.pages),O.emitChange();break;case d.a.URLFIELD_TYPED_HISTORY_SHOW:!0!==S&&(S=!0,O.emitChange());break;case d.a.URLFIELD_HISTORY_DELETE:t=e.url,h.default.history.deleteUrl({url:t},()=>O.emitChange());break;case"READERMODE":const{isReaderable:a,pageId:i}=e;w[i+""]&&a!==w[i+""].isReaderable&&(A(i,{isReaderable:a}),O.emitChange());break;case"READERMODE_RESET":o.a.reset(v.kWebpagesReaderStyle),D(),O.emitChange("readermode");break;case"READERMODE_SET_STYLE":D();break;case"CONTENT_SCRIPT_PAGE_ADD":e.script===N.a&&(A(e.pageId,{isReaderableActive:!0}),O.emitChange("readermode"));break;case"CONTENT_SCRIPT_PAGE_REMOVE":e.script===N.a&&(A(e.pageId,{isReaderableActive:!1}),O.emitChange("readermode"));break;case d.a.URLFIELD_CLEAR_STATE:!1===k&&(T(e.pageId),O.emitChange());break;case d.a.URLFIELD_TYPED_HISTORY_UPDATE:f.a.historyPrivate.getTypedHistory("",-1,50,e=>{C=Object(b.a)(e),O.emitChange(d.a.URLFIELD_TYPED_HISTORY_UPDATE)});break;case d.a.URLFIELD_TYPED_HISTORY_HIDE:!1!==S&&(S=!1,O.emitChange());break;case d.a.URLFIELD_COPY_STATE:A(e.pageId,e.state),O.emitChange()}var t}),t.a=O},,,function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(7);let r;const o=new class{setStatus(e,t){clearTimeout(r),i.a.dispatch({actionType:s.a.STATUS_SET_STATUS,status:e}),t&&(r=setTimeout(o.clearStatus,t))}clearStatus(){clearTimeout(r),i.a.dispatch({actionType:s.a.STATUS_SET_STATUS,status:""})}};n.default.runtime.onMessage.addListener((e,t)=>{if(n.default.runtime.id!==t.id||"object"!=typeof e||null==e)return;const{action:a,status:i}=e;"setStatus"===a&&"string"==typeof i&&o.setStatus(i)}),t.a=o},,function(e,t,a){"use strict";t.a={LINK:"link",TYPED:"typed",AUTO_BOOKMARK:"auto_bookmark",AUTO_SUBFRAME:"auto_subframe",MANUAL_SUBFRAME:"manual_subframe",GENERATED:"generated",AUTO_TOPLEVEL:"auto_toplevel",FORM_SUBMIT:"form_submit",RELOAD:"reload",KEYWORD:"keyword",KEYWORD_GENERATED:"keyword_generated"}},function(e,t,a){"use strict";(function(e){const a=Array();const i={onCommand:function(t){e.nextTick(()=>{a.forEach(e=>{e.command===t&&e.callback(t)})})},addListener:function(e,t){-1===a.findIndex(a=>a.command===e&&a.callback===t)&&a.push({command:e,callback:t})},removeListener:function(e,t){const i=a.findIndex(a=>a.command===e&&a.callback===t);-1!==i&&a.splice(i,1)}};t.a=i}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(76),s=a(9),n=a(8),r=a(10),o=a(83),l=a(11),c=a(4),d=a(16),u=a(2),h=a(7),m=a(243),p=a(5),g=a(157),b=a(1);function f(e,t){l.a.dispatch({actionType:"WINDOW_FULL_SCREEN",windowId:e,fullScreen:t})}function _(e,t){l.a.dispatch({actionType:"WINDOW_MAXIMIZED",windowId:e,maximized:t})}function N(e,t){l.a.dispatch({actionType:"WINDOW_MINIMIZED",windowId:e,minimized:t})}function v(e,t){l.a.dispatch({actionType:"WINDOW_ACTIVATED",windowId:e,activated:t})}function E(e){l.a.dispatch({actionType:"PAGE_TABSTRIP_EMPTY",windowId:e})}function w(e,t,a,i){d.a.isMinimalUI(e)||l.a.dispatch({windowId:e,actionType:c.a.WINDOW_UPDATE_FROM_PREFS})}const S=new class{constructor(){p.a.windowPrivate.onFullscreen.addListener(f),p.a.windowPrivate.onMaximized.addListener(_),p.a.windowPrivate.onMinimized.addListener(N),p.a.windowPrivate.onActivated.addListener(v),p.a.windowPrivate.onCloseAllTabsDone.addListener(E)}minimize(e){p.a.windowPrivate.setState(e,"minimized")}minimizeAll(){h.default.runtime.sendMessage({dispatchAction:g.b})}maximize(e){p.a.windowPrivate.setState(e,"maximized")}restore(e){p.a.windowPrivate.setState(e,"normal")}setFullscreen(e){p.a.windowPrivate.setState(e,"fullscreen")}toggleFullscreen(e){if(d.a.isFullscreen(e)){const t=!d.a.isHTML5Fullscreen(e),a=i.a.getActiveWebView();a&&a.setIsFullscreen(!1,!0),t&&S.restore(e)}else S.setFullscreen(e)}close(e){s.a.setIsClosingWindow(e,!0),e===window.vivaldiWindowId?d.a.getState().forEach((e,t)=>h.default.windows.remove(t)):h.default.windows.remove(e)}onHTML5FullScreen(e,t){l.a.dispatch({actionType:c.a.WINDOW_HTML5_FULL_SCREEN,windowId:t,html5FullScreen:e})}toggleMinimalUI(e){l.a.dispatch({actionType:c.a.WINDOW_MINIMAL_UI,windowId:e,minimalUI:!d.a.isMinimalUI(e)})}toggleBookmarksBar(e){d.a.isMinimalUI(e)?l.a.dispatch({windowId:e,actionType:c.a.WINDOW_TOGGLE_BOOKMARKS_BAR}):d.a.isGuestSession(e)||n.a.toggle(b.kBookmarksBarVisible,!0,!1)}toggleAddressBar(e){d.a.isMinimalUI(e)?l.a.dispatch({windowId:e,actionType:c.a.WINDOW_TOGGLE_ADDRESS_BAR}):n.a.toggle(b.kAddressBarVisible,!0,!1)}toggleTabs(e){d.a.isMinimalUI(e)?l.a.dispatch({windowId:e,actionType:c.a.WINDOW_TOGGLE_TABS}):n.a.toggle(b.kTabsVisible,!0,!1)}togglePanelToggle(e){d.a.isMinimalUI(e)?l.a.dispatch({windowId:e,actionType:c.a.WINDOW_TOGGLE_PANEL_TOGGLE}):n.a.toggle(b.kPanelsShowToggle,!0,!1)}toggleStatusBar(t){d.a.isMinimalUI(t)?l.a.dispatch({windowId:t,actionType:c.a.WINDOW_TOGGLE_STATUS_BAR}):(n.a.toggle(b.kStatusBarDisplay,"on",r.a.get(b.kStatusBarMinimized)),e.nextTick(()=>{"overlay"===r.a.get(b.kStatusBarDisplay)&&o.a.setStatus(Object(u.a)("Status Info set to Overlay"),2e3)}))}__initForTests(){l.a.dispatch({actionType:c.a.WINDOW_SET_STATE,windowState:{type:"normal",fullScreen:!1,minimalUI:!1,incognito:!1,guest:!0,maximized:!0,active:!0,visibleUI:{tabs:!0}},windowId:42})}loadPromise(){return new Promise(e=>{return t=t=>{const a=Object(m.a)(t.extData);window.vivaldiWindowId=t.id;const i=a.visibleUI?a.visibleUI:d.a.getUIFromPrefs(),s=a.fullScreen&&r.a.get(b.kStartupRememberFullScreen);s&&"number"==typeof t.id&&p.a.windowPrivate.setState(t.id,"fullscreen"),p.a.runtimePrivate.isGuestSession(n=>{const o={active:t.focused,fullScreen:s,fullscreenMenubarShown:!1,guest:n,html5FullScreen:!1,incognito:t.incognito&&!n,maximized:"maximized"===t.state,minimalUI:a.minimalUI,minimized:!1,nativeDecorations:r.a.get(b.kWindowsUseNativeDecoration),type:a.windowType,visibleUI:i};l.a.dispatch({actionType:c.a.WINDOW_SET_STATE,windowState:o,windowId:t.id}),"object"==typeof a.tiles&&l.a.dispatch({actionType:c.a.TILES_INITIALIZED,tilesState:a.tiles}),r.a.addListener([b.kAddressBarVisible,b.kBookmarksBarVisible,b.kPanelsShowToggle,b.kStatusBarDisplay,b.kTabsVisible],w.bind(null,window.vivaldiWindowId)),e()})},void p.a.windowPrivate.getCurrentId(e=>{h.default.windows.get(e,t)});var t})}};t.a=S}).call(this,a(64))},function(e,t,a){"use strict";a.r(t);var i=a(62),s=a(11),n=a(4),r=a(27),o=a(5);const l=function(e){i.default.isNamedMenuAvailable(e)&&o.a.menuContent.get(e,(t,a,i)=>{s.a.dispatch({actionType:n.a.COMMAND_SET_NAMED_MENU,name:e,content:i})})},c=new class{loadPromise(){const e=[];i.default.getCommands().forEach(t=>{t.readonly||r.a.addListener(t.name,c.commandChanged),e.push(t.name)});const t=r.a.getKeysSync(e),a=[];return e.forEach(e=>{const i=t[e];i&&a.push({command:e,value:i})}),s.a.dispatch({actionType:n.a.COMMAND_INITIALIZE,commands:a}),o.a.menuContent.onChanged.addListener(l),Promise.resolve()}requestNamedMenu(e){i.default.getIsInitialized()&&!i.default.isNamedMenuAvailable(e)&&o.a.menuContent.get(e,(t,a,i)=>{s.a.dispatch({actionType:n.a.COMMAND_SET_NAMED_MENU,name:e,content:i})})}restoreCommandShortcutKeys(){i.default.getUserEditableCommands().forEach(e=>{const t=r.a.getDefault(e.name);if(t){const a={shortcut:t.shortcut?t.shortcut:null,gestures:e.gestures,showInQC:t.showInQC};r.a.set({[e.name]:a})}})}restoreCommandGestures(){i.default.getUserEditableCommands().forEach(e=>{const t=r.a.getDefault(e.name);if(t){const a={shortcut:e.shortcut,gestures:t.gestures?t.gestures:null,showInQC:t.showInQC};r.a.set({[e.name]:a})}})}commandChanged(e,t,a){s.a.dispatch({actionType:n.a.COMMAND_UPDATE_COMMAND,commandKey:a,commandValue:t})}executeActions(e,t){const a=i.default.getCommands().find(t=>t.name===e);var s,n;a&&(s=a.action,n=a.param?[a.param]:[t],function(){s.apply(null,n)})()}};t.default=c},,,,function(e,t,a){"use strict";var i=a(76),s=a(292),n=a(49),r=a(9),o=a(57),l=a(42),c=a(10),d=a(11),u=a(16),h=a(2),m=a(7),p=a(5),g=a(1),b=a(200),f=a(20);let _=!0;const N=function(){_=!0},v=function(){_=!1,E()};async function E(){const e=await new Promise(e=>p.a.notes.getTree(e));d.a.dispatch({actionType:"NOTES_INIT",notes:e})}function w(e,t){if(_)return;if(d.a.dispatch({actionType:"NOTES_ADD_ITEM",id:e,item:t}),!u.a.isActive())return;const a=c.a.get(g.kNotesCreationShowPanel),i=r.a.getActivePage(),s=f.a.getDisplayUrl(i.url).startsWith("vivaldi://notes");!a||s?c.a.get(g.kNotesCreationNotify)&&!l.a.getIsPanelVisible("notes")&&!s&&Object(b.a)({title:Object(h.a)("New Note Created"),onClick:()=>o.a.showContent("notes",{setFocus:!0,selectId:e})}):o.a.showContent("notes")}const S=function(e,t){_||d.a.dispatch({actionType:"NOTES_MOVE_ITEM",id:e,targetFolder:t.parentId,targetIndex:t.index})},C=function(e,t){_||d.a.dispatch({actionType:"NOTES_CHANGE_ITEM",id:e,changes:t})},k=function(e){_||d.a.dispatch({actionType:"NOTES_REMOVE_ITEM",id:e})},y={scale:1,width:0,height:0};function O({id:e,url:t,content:a}){if(!a)return Promise.reject();const i=n.b.getNodeById(e);if(!i)return Promise.reject();const s={attachments:[...i.attachments||[],{content:a}],...!i.url&&t?{url:t}:null};return new Promise(t=>{p.a.notes.update(e,s,t)})}function A(e){"Escape"===e.key&&P([])}function T(e,t){if("NotesCutIds"!==e||"string"!=typeof t)return;const a=t.length>0?t.split(","):[];a.length>0?window.addEventListener("keydown",A,!0):window.removeEventListener("keydown",A,!0),d.a.dispatch({actionType:"NOTES_SET_CUT_IDS",ids:a})}function I({clipboardData:e},t,a){e&&(e.setData("vivaldi/x-cut",a?"true":"false"),e.setData(n.c,JSON.stringify(t)),e.setData("text/plain",n.b.getDragData("text/plain",t)))}function D(e){return new Promise(t=>{p.a.notes.create(e,t)})}function P(e){p.a.utilities.setSharedData({key:"NotesCutIds",value:e.length>0?e.join():""})}async function x(e){const t=i.a.getActiveWebView();if(t)return O({id:e,url:["richtexteditor","markdowneditor"].includes(t.name)?"":t.src,content:await function(e,t=y){return new Promise((a,i)=>{e.getThumbnail(t,e=>{m.default.runtime.lastError&&i(m.default.runtime.lastError.message),a(e)})})}(t)})}t.a={loadPromise:async function(){await E(),_=!1,p.a.notes.onImportBegan.addListener(N),p.a.notes.onImportEnded.addListener(v),p.a.notes.onCreated.addListener(w),p.a.notes.onMoved.addListener(S),p.a.notes.onChanged.addListener(C),p.a.notes.onRemoved.addListener(k),p.a.utilities.onSharedDataUpdated.addListener(T),p.a.utilities.getSharedData({key:"NotesCutIds",value:""},e=>{e&&T("NotesCutIds",e)})},emptyTrash:function(){return new Promise((e,t)=>{p.a.notes.emptyTrash(a=>{!1===a&&(console.warn("Empty trash failed."),t("Empty trash failed.")),e()})})},addScreenshot:x,addAreaCapture:async function(e){const t=i.a.getActiveWebView(),a=!t||f.a.isInternalUrl(t.src),n=!t||a?void 0:t.src;try{return O({id:e,url:n,content:await s.a.captureArea("png","",!0)})}catch(e){}},addImageFile:async function(e,t){return O({id:e,content:await function(e){return new Promise((t,a)=>{const i=new FileReader;i.onloadend=({target:e})=>{t(e.result)},i.onerror=()=>{i.abort(),a()},i.readAsDataURL(e)})}(t)})},removeAttachment:function(e,t){const a=n.b.getNodeById(e);if(!a||!a.attachments)return Promise.resolve();const i=a.attachments.filter(e=>e.checksum!==t.checksum);return new Promise(t=>{p.a.notes.update(e,{attachments:i},()=>t())})},createNotesFromTreeNodes:function e(t,a,i,s){return Promise.all(t.map(async(t,r)=>{const o=void 0===i?void 0:i+r;if(t.separator)return void D({index:o,parentId:`${a}`,type:"separator"});const l=await D({parentId:`${a}`,index:o,type:n.b.isFolder(t)?"folder":"note",attachments:t.attachments,content:t.content,title:t.title,url:t.url});return t.children?await e(t.children,l.id,0,s):void 0})).then(()=>{})},createNote:async function(e){const{content:t,url:a}=e,i=await D({type:"note",content:t,url:a});return a&&c.a.get(g.kNotesCreationAddScreenshot)?x(i.id):i},cut:function(e,t){I(e,t,!0),P(t),e.stopPropagation(),e.preventDefault()},copy:function(e,t){I(e,t,!1),e.stopPropagation(),e.preventDefault()},setCutIds:P}},,,,function(e,t,a){"use strict";var i=a(0),s=a(27),n="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertVivaldiSettings.jsx";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e,t){class a extends i.Component{constructor(...e){super(...e),o(this,"state",{vivaldiSettings:s.a.getKeysSync(t)}),o(this,"settingsChangeHandler",e=>{this.setState(t=>({vivaldiSettings:{...t.vivaldiSettings,...e}}))})}componentDidMount(){s.a.addMultiListener(t,this.settingsChangeHandler)}componentWillUnmount(){s.a.removeMultiListener(t,this.settingsChangeHandler)}render(){const{forwardedRef:t,...a}=this.props;return i.createElement(e,r({},a,{ref:t,vivaldiSettings:this.state.vivaldiSettings,__source:{fileName:n,lineNumber:53}}))}}return i.forwardRef((e,t)=>i.createElement(a,r({},e,{forwardedRef:t,__source:{fileName:n,lineNumber:62}})))}},function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(11),r=a(4),o=a(21),l=a(123);let c=Object(o.Map)();const d={},u={},h={},m={},p=["audiocapture","backgroundsync","camera","durablestorage","flash","geolocation","media","microphone_and_camera","microphone","midi","midisysex","notifications","protectedmediaidentifier","pushmessaging","videocapture"],g=new class extends s.a{constructor(...e){var t,a,i;super(...e),t=this,a="emitChange",i=Object(l.a)(e=>{this.emit("change",e)},250),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}getNavigationInfo(e){return d[e]}getSSLInfo(e){return u[e]}getBlockedPopups(e){return h[e]||Object(o.List)()}getBlockedPopupsById(e){return h[e]||Object(o.List)()}getPermissionInfoForUrl(e){let t=null;try{t=new URL(e)}catch(e){return Object(o.Map)()}return c.get(t.origin,Object(o.Map)())}getPermissionInfo(e){return this.getPermissionInfoForUrl(e)}getblockedPageContents(e){return m[e]||Object(o.List)()}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};n.a.register(e=>{switch(e.actionType){case r.a.NAVIGATION_SET_STATE:t=e.pageId,a=e.navigationState,d[t]=a,g.emitChange();break;case r.a.PAGE_SET_SSL_STATE:!function(e,t,a){u[e]={state:t,issuer:a},g.emitChange()}(e.pageId,e.state,e.issuer);break;case r.a.NAVIGATION_ADD_POPUP:!function(e,t){let a=h[e]||Object(o.List)();a=a.push(t),h[e]=a,g.emitChange()}(e.pageId,e.popupEvent);break;case r.a.NAVIGATION_REMOVE_POPUP:!function(e,t){const a=h[e];a&&(h[e]=a.filter(e=>e!==t),g.emitChange())}(e.pageId,e.popupEvent);break;case r.a.NAVIGATION_SET_PERMISSION:!function(e,t,a,i,s){let n=c.get(t,Object(o.Map)()),r=n.get(a)&&n.get(a).tabId||Object(o.Set)();switch(a){case"audiocapture":a="microphone";break;case"videocapture":a="camera"}const l=["microphone","camera"],d=l.includes(a);if((!i||!1===s)&&d){const t=n.get("microphone_and_camera");if(t&&t.tabId.has(e)&&d)return;if(d)for(const t of l){const i=t===a;n.get(t)&&!i&&(r=r.delete(e),0===r.size&&(n=n.delete(t)),a="microphone_and_camera")}}r=r.add(e);const u={permissionType:a,requestEvent:i,blocked:s,tabId:r};n=n.set(a,u),c=c.set(t,n),g.emitChange("setPermissionInfo")}(e.pageId,e.origin,e.permission,e.requestEvent,e.blocked);break;case r.a.NAVIGATION_DELETE_PERMISSIONS:!function(e,t){const a=c.get(t,Object(o.Map)());p.forEach(i=>{const s=a.get(i);if(s){const a=s.requestEvent,n=s.blocked,r=s.tabId.delete(e);let l=Object(o.Map)();const d={permissionType:i,requestEvent:a,blocked:n,tabId:r};l=l.set(i,d),c=c.set(t,l)}}),g.emitChange()}(e.pageId,e.origin);break;case r.a.NAVIGATION_SET_BLOCKED_CONTENT:!function(e,t){let a=m[e]||Object(o.List)();a=a.push(t),m[e]=a,g.emitChange()}(e.pageId,e.content_type);break;case r.a.NAVIGATION_RESET_BLOCKED_CONTENT:!function(e){m[e]=Object(o.List)(),g.emitChange()}(e.pageId)}var t,a}),t.a=g},,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var i=a(168),s=a.n(i),n=a(11),r=a(4);function o(e){return e.hasToken?"loggedIn":"invalid_credentials"===e.lastTokenFetchError.errorType?"loginFailed":0!==e.tokenRequestTime?"loggingIn":e.accountInfo.accountId?"credentialsMissing":"loggedOut"}class l extends s.a{getInitialState(){return{accountInfo:{accountId:"",username:"",pictureUrl:""},hasSavedPassword:!1,hasToken:!1,accessToken:"",hasEncryptedToken:!1,tokenRequestTime:0,nextTokenRequestTime:0,lastTokenFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},lastAccountInfoFetchError:{errorType:"no_error",serverMessage:"",errorCode:0},isReady:!1}}reduce(e,t){switch(t.actionType){case r.a.VIVALDI_ACCOUNT_STATE_UPDATED:return t.state}return e}}t.a=new l(n.a)},,function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var i=a(106),s=a(21),n=a(20);const r=["id","index","windowId","openerTabId","active","pinned","audible","url","pendingUrl","title","favIconUrl","incognito","sessionId","discarded"];function o(e){return l(new i.b,e)}function l(e,...t){return t.map(e=>{if(e.url&&e.url.startsWith("vivaldi://")){const t=n.a.getExtensionUrlFromInternalProtocolUrl(e.url);return{...e,url:t}}return e}).reduce((e,t)=>{const a=Object.keys(t).reduce((e,a)=>-1!==r.indexOf(a)?e.set(a,t[a]):e,e);let i={};if(t.extData)try{i=JSON.parse(t.extData)}catch(e){i={}}return a.set("extData",(a.extData||Object(s.Map)()).merge(i)).set("unread",!a.active&&a.unread)},e.asMutable()).asImmutable()}const c={tabToPage:o,updatePage:l};t.a=c},,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c}));var i=a(8),s=a(10),n=a(1);const r=(e,t)=>{const a={...s.a.get(n.kAppearanceTreeColumnsEntries),[t]:e};i.a.set(n.kAppearanceTreeColumnsEntries,a)},o=()=>s.a.get(n.kAppearanceTreeColumnsEntries),l=e=>e.filter(e=>e.visible).reduce((e,t)=>(e.push({id:t.value,width:t.width||100,key:t.key}),e),[]),c=e=>e.map(e=>e.key?`minmax(${Math.min(e.width/2,100)}px, 1fr)`:`minmax(36px, ${e.width}px)`).join(" ")},,,function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=(a(106),a(11)),r=a(4);const o={},l={};let c="";const d=new class extends s.a{emitChangeParam(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}isFindInPageOpen(e){return!0===o[e]}getFindResultsForPage(e){let t=l[e];return void 0===t&&(t={activeMatchOrdinal:0,numberOfMatches:0,searchText:c,canceled:!1,matchCase:!1,isFindInPageToolbarOpen:!1,selectionRect:{left:0,top:0,width:0,height:0}}),t.isFindInPageToolbarOpen=!0===o[e]||!1,t}};n.a.register(e=>{switch(e.actionType){case r.a.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?o[e.pageId]=!0:"findNextInPage"===e.action||"findPreviousInPage"===e.action?!0!==o[e.pageId]&&(o[e.pageId]=!0,d.emitChangeParam({type:r.a.WEBPAGEVIEW_ACTIONS,action:"findInPage",pageId:e.pageId})):"focusWebView"!==e.action&&"focusSearchField"!==e.action||d.emitChangeParam({type:r.a.URLFIELD_BLUR}),d.emitChangeParam({type:"WEBPAGEVIEW_ACTIONS",action:e.action,pageId:e.pageId,payload:e.payload});break;case r.a.NAVIGATION_SET_STATE:if(e.navigationState&&"start"!==e.navigationState.trigger||!1===o[e.pageId])return;!0===o[e.pageId]&&(o[e.pageId]=!1,d.emitChangeParam({type:r.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.FIND_IN_PAGE_RESULT_ACTION:o[e.pageId]&&(l[e.pageId]=e,c=e.searchText,d.emitChangeParam({type:r.a.FIND_IN_PAGE_RESULT_ACTION,pageId:e.pageId,...e.results}));break;case r.a.SHOW_FIND_IN_PAGE_ACTION:o[e.pageId]?d.emitChangeParam({type:r.a.FIND_IN_PAGE_FOCUS,pageId:e.pageId}):(o[e.pageId]=!0,d.emitChangeParam({type:r.a.SHOW_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.CLOSE_FIND_IN_PAGE_ACTION:o[e.pageId]&&(o[e.pageId]=!1,d.emitChangeParam({type:r.a.CLOSE_FIND_IN_PAGE_ACTION,pageId:e.pageId}));break;case r.a.PAGE_GO:d.emitChangeParam({type:r.a.PAGE_GO,index:e.index});break;case r.a.PAGE_UPDATED:d.emitChangeParam({type:e.actionType,pageId:e.pageId});break;case r.a.PAGE_RELOAD:d.emitChangeParam({type:r.a.PAGE_RELOAD,bypassCache:e.bypassCache});break;case r.a.PAGE_STOP:case r.a.PAGE_BACK:case r.a.PAGE_FORWARD:d.emitChangeParam({type:e.actionType});break;case r.a.PAGE_GET_HISTORY:d.emitChangeParam({type:e.actionType,callback:e.callback});break;case r.a.MAIN_SHOW_QUICKCOMMANDS:case r.a.PANEL_SET_FOCUS:d.emitChangeParam({type:r.a.URLFIELD_BLUR})}}),t.a=d},,function(e,t,a){"use strict";var i=a(11),s=a(4);const n=new class{setNavigationState(e,t){i.a.dispatch({actionType:s.a.NAVIGATION_SET_STATE,pageId:e,navigationState:t})}setSSLState(e,t,a){i.a.dispatch({actionType:s.a.PAGE_SET_SSL_STATE,pageId:e,state:t,issuer:a})}addBlockedPopupEvent(e,t){i.a.dispatch({actionType:s.a.NAVIGATION_ADD_POPUP,pageId:e,popupEvent:t})}removeBlockedPopupEvent(e,t){i.a.dispatch({actionType:s.a.NAVIGATION_REMOVE_POPUP,pageId:e,popupEvent:t})}setPermission(e,t,a,n,r){i.a.dispatch({actionType:s.a.NAVIGATION_SET_PERMISSION,pageId:e,origin:t,permission:a,requestEvent:n,blocked:r})}deletePermissions(e,t){i.a.dispatch({actionType:s.a.NAVIGATION_DELETE_PERMISSIONS,pageId:e,origin:t})}setPageHasBlockedContent(e,t){i.a.dispatch({actionType:s.a.NAVIGATION_SET_BLOCKED_CONTENT,content_type:t,pageId:e})}resetPageHasBlockedContent(e){i.a.dispatch({actionType:s.a.NAVIGATION_RESET_BLOCKED_CONTENT,pageId:e})}};t.a=n},function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(11),r=a(4),o=a(16);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a{constructor(){super(),l(this,"_downloadItems",[]),l(this,"_totalNumberOfDownloads",0),l(this,"_totalProgress",0),l(this,"_filter",""),l(this,"_itemIds",new Set),l(this,"addChangeListener",e=>{this.on("change",e)}),l(this,"removeChangeListener",e=>{this.removeListener("change",e)}),n.a.register(e=>{switch(e.actionType){case r.a.DOWNLOAD_PANEL_UPDATED:return this._downloadItems=e.downloadItems,void this._emitChange("download_panel_updated");case r.a.DOWNLOAD_COMPLETED:return void this._emitChange("download_completed",e.downloadItem);case r.a.DOWNLOAD_STARTED:return void this._emitChange("download_started",e.downloadItem);case r.a.DOWNLOAD_SET_TOTAL_PROGRESS:return this._totalProgress=e.totalProgress,this._totalNumberOfDownloads=e.totalNumberOfDownloads,void this._emitChange("download_total_progress_changed");case r.a.DOWNLOAD_SET_FILTER:return this._filter=e.filter,this._downloadItems=e.downloadItems,void this._emitChange("download_panel_updated");case r.a.DOWNLOAD_SET_ORDER_BY:return this._orderBy=e.orderBy,this._downloadItems=e.downloadItems,void this._emitChange("download_panel_updated");case r.a.DOWNLOAD_ADD_OPEN_AFTER_COMPLETION:return void this._itemIds.add(e.downloadId);case r.a.DOWNLOAD_REMOVE_OPEN_AFTER_COMPLETION:return void this._itemIds.delete(e.downloadId)}})}_emitChange(e,t){this.emit("change",{reason:e,...t?{downloadItem:t}:null})}getTotalNumberOfDownloads(){return this._totalNumberOfDownloads}getTotalProgress(){return this._totalProgress}getFilter(){return this._filter}getOrderBy(){return this._orderBy}getItemIds(){return this._itemIds}getItems(){const e=o.a.isIncognito();return this._downloadItems.filter(t=>!(!e&&t.downloadItem.incognito)).filter(e=>!("interrupted"===e.downloadItem.state&&""===e.downloadItem.filename))}}t.a=new c},,,,function(e,t,a){"use strict";(function(e){var i=a(58),s=a.n(i),n=a(12),r=a(11),o=a(4),l=a(21),c=a(203);let d,u;const h={},m=new class extends s.a{getContentScripts(){return u||(u=Object(c.b)().then(e=>(e.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),d=Object(l.fromJS)(e),d))),u}getPageScripts(e){return h[e]||Object(l.Map)()}isReaderModeActive(e){return!0===m.getPageScripts(e).get(c.a)}emitChange(){this.emit(o.a.CHANGED)}addChangeListener(e){this.on(o.a.CHANGED,e)}removeChangeListener(e){this.removeListener(o.a.CHANGED,e)}};function p(t,a){const i=h[t]||Object(l.Map)();h[t]=i.set(a,!0),a===c.a&&e.nextTick(()=>n.a.setReaderState(t,!0))}function g(t,a){h[t]&&(h[t]=h[t].delete(a),a===c.a&&e.nextTick(()=>n.a.setReaderState(t,!1)))}r.a.register(e=>{switch(e.actionType){case"CONTENT_SCRIPT_PAGE_ADD":p(e.pageId,e.script),m.emitChange();break;case"CONTENT_SCRIPT_PAGE_REMOVE":g(e.pageId,e.script),m.emitChange();break;case"CONTENT_SCRIPT_PAGE_TOGGLE":!function(e,t){if(h[e]){h[e].get(t)?g(e,t):p(e,t)}else p(e,t)}(e.pageId,e.script),m.emitChange()}}),t.a=m}).call(this,a(64))},function(e,t,a){"use strict";var i=a(12),s=a(126),n=a(11),r=a(4),o=a(7),l=a(243),c=a(5),d=a(103);const u=new class{emptyTrash(){c.a.utilities.clearAllRecentlyClosedSessions()}undeleteTab(e){i.a.setIsRestored(Object(d.b)(e),!0),o.default.sessions.restore(e.sessionId,t=>{o.default.runtime.lastError&&console.warn("Error restoring tab: ",e,o.default.runtime.lastError)})}undeletePreviousTab(){const e=s.a.getTrash().find(e=>e.tab);e&&u.undeleteTab(e.tab)}undeleteWindow(e){o.default.sessions.restore(e.sessionId,t=>{o.default.runtime.lastError&&console.warn("Error restoring page: ",e,o.default.runtime.lastError.message)})}loadPromise(){return new Promise((e,t)=>o.default.sessions.getRecentlyClosed(t=>{o.default.windows.getAll({},a=>{const i=t.filter(e=>{let t=!0;if(e.tab)return t;const i=Object(l.a)(e.window.extData);for(let e=0;e<a.length;e++){if(t=Object(l.a)(a[e].extData).ext_id!==i.ext_id,!t)break}return t});n.a.dispatch({actionType:r.a.CHROME_SET_SESSION,session:i}),e()})}))}};o.default.sessions.onChanged.addListener(u.loadPromise),t.a=u},function(e,t,a){"use strict";var i=a(111),s=a(11),n=a(4),r=a(7),o=a(84),l=a.n(o),c=a(254),d=a(5);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e){return new Promise(t=>{r.default.downloads.search(e,t)})}t.a=new class{constructor(){u(this,"_isPolling",!1),u(this,"_dispatchUpdate",e=>{s.a.dispatch({actionType:n.a.DOWNLOAD_PANEL_UPDATED,downloadItems:e})}),u(this,"_wrapDownloadItems",e=>e.map(e=>{const t=i.a.getItems().find(t=>t.downloadItem.id===e.id);return t?{id:t.id,downloadItem:e}:{id:l()(),downloadItem:e}})),u(this,"_wrapDownloadItemsAndDispatch",e=>{const t=this._wrapDownloadItems(e);this._dispatchUpdate(t)}),u(this,"_replaceDownloadItem",(e,t)=>{const a=i.a.getItems(),s=a.find(t=>t.downloadItem.id===e.id);if(!s)return;const n=a.indexOf(s),r=[...a.slice(0,n),{id:s.id,downloadItem:t},...a.slice(n+1)];this._dispatchUpdate(r)}),u(this,"_startPolling",()=>{this._isPolling||(this._intervalId=setInterval(this._pollInProgressDownloads,500),this._isPolling=!0)}),u(this,"_stopPolling",()=>{this._isPolling=!1,clearInterval(this._intervalId)}),u(this,"_handleNewDownloadItem",e=>{const t=i.a.getFilter(),a=i.a.getOrderBy(),o={...Object(c.a)(t?{query:t.split(" ")}:null),...Object(c.a)(a?{orderBy:[a]}:null)};r.default.downloads.search(o,t=>{this._wrapDownloadItemsAndDispatch(t);const a=i.a.getItems().find(t=>t.downloadItem.id===e);s.a.dispatch({actionType:n.a.DOWNLOAD_STARTED,downloadItem:a})})}),u(this,"_updateState",e=>{const t=i.a.getItems(),a=t.findIndex(t=>t.downloadItem.id===e.id);if(-1===a)return void this._handleNewDownloadItem(e.id);const s=[...t.slice(0,a),{id:t[a].id,downloadItem:e},...t.slice(a+1)];this._dispatchUpdate(s)}),u(this,"_updateStateForDownloadItems",e=>{e.forEach(this._updateState)}),u(this,"_handleInProgressSearch",e=>{e.filter(e=>!e.paused).length||this._stopPolling(),this._setTotalProgress(e),this._updateStateForDownloadItems(e)}),u(this,"_handleFileDeleted",(e,t)=>{this._pollInProgressDownloads(),e?r.default.downloads.search({id:e,limit:1},a=>{if(!a||!Array.isArray(a))return void console.warn(`DownloadActions: _handleFileDeleted: Failed to search downloads for ID ${e} (${t})`);const i=a[0];i&&this._updateState(i)}):console.warn(`DownloadActions: _handleFileDeleted: Invalid download ID ${e} (${t})`)}),u(this,"_pollInProgressDownloads",()=>{r.default.downloads.search({state:"in_progress"},this._handleInProgressSearch)}),u(this,"_setTotalProgress",e=>{const t=e.filter(e=>!e.paused),a=t.length,i=function(e){return e.length?e.map(e=>e.bytesReceived/e.totalBytes).reduce((e,t)=>e*t):0}(t);s.a.dispatch({actionType:n.a.DOWNLOAD_SET_TOTAL_PROGRESS,totalNumberOfDownloads:a,totalProgress:i})}),u(this,"_addOpenOnTransferComplete",e=>{const t=i.a.getItemIds();t.add(e),s.a.dispatch({actionType:n.a.DOWNLOAD_ADD_OPEN_AFTER_COMPLETION,itemIds:t})}),u(this,"_handleDangerousFileDownload",e=>{r.default.windows.getLastFocused(t=>{t.id===window.vivaldiWindowId&&r.default.downloads.acceptDanger(e,()=>{r.default.runtime.lastError,0})})}),u(this,"_onTransferChanged",e=>{e.paused&&e.paused.previous&&!e.paused.current?this._onTransferCreated():(e.filename&&this._handleNewDownloadItem(e.id),e.danger&&e.danger.current!==e.danger.previous&&this._handleDangerousFileDownload(e.id),e.exists&&!e.exists.current&&this._handleFileDeleted(e.id,"Deleted from disk"),e.state&&("interrupted"===e.state.current&&this._handleFileDeleted(e.id,"Interrupted"),"complete"===e.state.current&&(r.default.downloads.search({id:e.id,limit:1},([t])=>{this._updateState(t),this._pollInProgressDownloads(),r.default.downloads.getFileIcon(e.id,{size:32},t=>{const a=i.a.getItems().find(t=>t.downloadItem.id===e.id);s.a.dispatch({actionType:n.a.DOWNLOAD_COMPLETED,downloadItem:{...a,icon:t}})})}),i.a.getItemIds().has(e.id)&&(r.default.downloads.open(e.id),s.a.dispatch({actionType:n.a.DOWNLOAD_REMOVE_OPEN_AFTER_COMPLETION,downloadId:e.id})))))}),u(this,"_onTransferErased",e=>{const t=i.a.getItems(),a=t.findIndex(t=>t.downloadItem.id===e);if(-1===a)return;const s=[...t.slice(0,a),...t.slice(a+1)];this._dispatchUpdate(s)}),u(this,"_onTransferCreated",()=>{this._startPolling()}),u(this,"_showDownload",e=>{r.default.downloads.show(e)}),u(this,"_openDownload",e=>{r.default.downloads.open(e)}),u(this,"_pauseDownload",e=>{r.default.downloads.pause(e)}),u(this,"_resumeDownload",e=>{r.default.downloads.resume(e)}),u(this,"_eraseDownload",e=>{r.default.downloads.erase({id:e})}),u(this,"_restartDownload",e=>h({id:e}).then(([t])=>{return(a={url:t.url},new Promise(e=>{r.default.downloads.download(a,e)})).then(e=>h({id:e})).then(([e])=>this._replaceDownloadItem(t,e)).then(()=>{return t={id:e},new Promise(e=>{r.default.downloads.erase(t,e)});var t});var a})),u(this,"forceUpdate",()=>{const e=i.a.getFilter(),t=i.a.getOrderBy();this._searchDownloads({filter:e,orderBy:t}).then(e=>{const a=this._wrapDownloadItems(e);s.a.dispatch({actionType:n.a.DOWNLOAD_SET_ORDER_BY,downloadItems:a,orderBy:t})})}),u(this,"ready",(()=>{let e,t,a;return Promise.race([function t(a=0){return new Promise(i=>{d.a.utilities.isDownloadManagerReady(s=>{if(s)return i();a++,e=setTimeout(()=>t(a),1e3*a)})})}(),new Promise(e=>{a=()=>{e()},d.a.utilities.onDownloadManagerReady.addListener(a)}),new Promise(e=>{t=setTimeout(e,2e4)})]).then(()=>{clearTimeout(e),clearTimeout(t),d.a.utilities.onDownloadManagerReady.removeListener(a)})})()),u(this,"addOpenAfterDownload",e=>{this.ready.then(()=>{this._addOpenOnTransferComplete(e)})}),u(this,"setSearchFilter",e=>this.ready.then(()=>this._setSearchFilter(e))),u(this,"setOrderBy",e=>this.ready.then(()=>this._setOrderBy(e))),u(this,"showDownload",e=>{this.ready.then(()=>{this._showDownload(e)})}),u(this,"eraseDownload",e=>{this.ready.then(()=>{this._eraseDownload(e)})}),u(this,"openDownload",e=>{this.ready.then(()=>{this._openDownload(e)})}),u(this,"pauseDownload",e=>{this.ready.then(()=>{this._pauseDownload(e)})}),u(this,"resumeDownload",e=>{this.ready.then(()=>{this._resumeDownload(e)})}),u(this,"restartDownload",e=>this.ready.then(()=>this._restartDownload(e))),u(this,"loadPromise",()=>(r.default.downloads.setShelfEnabled(!1),r.default.downloads.onChanged.addListener(this._onTransferChanged),r.default.downloads.onCreated.addListener(this._onTransferCreated),r.default.downloads.onErased.addListener(this._onTransferErased),this.ready.then(this._startPolling),Promise.resolve()))}_searchDownloads({filter:e,orderBy:t}){return new Promise(a=>{const i={...Object(c.a)(e?{query:e.split(" ")}:null),...Object(c.a)(t?{orderBy:[t]}:null)};r.default.downloads.search(i,e=>{a(e)})})}_setSearchFilter(e){if(e===i.a.getFilter())return Promise.resolve();const t=i.a.getOrderBy();return this._searchDownloads({filter:e,orderBy:t}).then(t=>{const a=this._wrapDownloadItems(t);s.a.dispatch({actionType:n.a.DOWNLOAD_SET_FILTER,downloadItems:a,filter:e})})}_setOrderBy(e){if(e===i.a.getOrderBy())return Promise.resolve();const t=i.a.getFilter();return this._searchDownloads({filter:t,orderBy:e}).then(t=>{const a=this._wrapDownloadItems(t);s.a.dispatch({actionType:n.a.DOWNLOAD_SET_ORDER_BY,downloadItems:a,orderBy:e})})}}},,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(25);const r=["mousedown","touchstart"];var o=a(29);a.d(t,"a",(function(){return c}));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){return Object(i.forwardRef)((function(t,a){if("function"==typeof a)throw Error("Callback refs not supported");const[c,d]=Object(i.useState)(!1),u=Object(i.useCallback)(()=>d(!1),[]),h=Object(i.useCallback)(()=>d(!0),[]),m=Object(i.useRef)(null),p=a||m,g=Object(i.useCallback)(()=>p.current?Object(o.findDOMNode)(p.current):null,[p]),b=Object(i.useCallback)(()=>p.current?p.current.handleClickOutside:null,[p]),{disableOnClickOutside:f,eventTypes:_,outsideClickIgnoreClass:N,...v}=t;return function(e,t,a="ignore-react-onclickoutside",s=!1,o=r){const{document:l,Element:c}=Object(i.useContext)(n.a);Object(i.useEffect)(()=>{if(!s)return o.forEach(e=>l.addEventListener(e,i)),()=>{o.forEach(e=>l.removeEventListener(e,i))};function i(i){const s=e(),n=t();if(!s||!n)return;let r=i.target;for(;r instanceof c;){const e=r;if(Array.isArray(a)){if(a.some(t=>e.classList.contains(t)))return}else if(e.classList.contains(a))return;r=r.parentNode}i.target instanceof c&&!s.contains(i.target)&&n(i)}},[c,s,l,t,e,a,o])}(g,b,N,f||c,_),s.a.createElement(e,l({},v,{ref:p,enableOnClickOutside:u,disableOnClickOutside:h,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\InsertClickOutside.jsx",lineNumber:54}}))}))}},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(36);const r=["/resources","chrome://favicon","data:"];class o extends s.a.PureComponent{constructor(...e){var t,a,i;super(...e),t=this,a="state",i={url:this.props.url},a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}static getDerivedStateFromProps(e){return{url:e.url}}render(){const{size:e,alt:t="",avoidCache:a,className:i,style:o}=this.props,{url:l}=this.state,c="number"==typeof e?e:16,d=r.some(e=>l.startsWith(e)),u=Object(n.b)(l),h=d||a?l:`chrome://favicon/size/${c}@1x/${u} 1x,`+`chrome://favicon/size/${c}@2x/${u} 2x`;return s.a.createElement("img",{className:i,width:c,height:c,alt:t,srcSet:h,style:o,onError:()=>this.setState({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABiUlEQVR42u2XK08DURBG6U/D80eQeMIjqGJAocCA6hqqUBASakCBAYUqSbvb92u3j6VZZjYcQ3q3hWlSRJucfF8yt3PPlbuxtb2zUtYC/1dAfge/ZHOlAkgsXSBJkn0B9ki6nvE87z5Twi7g5vtM4pCwC0yn0yPZn6KdBATcEnaBfBzHx4p0EvIIuCTMAnLhqXCiaCcBgSwJk8B4PD6Ti1K0k3QE5kn8WWA0Gl24mEwm5wjMk7AIXA6Hw6tZ6EzO7GZhFpCLChBFkUfSyVmEYVgwC8gF14PBoKhoJwGY/ThflB2HJoF+v38jL0mRTi5MLpezCchLbnu9HtyRdFLRsyTdLNDtdkvykgdFOgkl0oVZoNPpPMqip0Vot9tkiv7XLNBqtZ5l2YuinVTkAtLJMgTeMngl6STdLNBsNt+h0WiQdNI5NwvIonK9XnfxQToomwVkiV+r1YJZ6IwEYGYWCIKgbcEs4Pt+JIQOIpJO0s0ClUrls1qtQkwqOiM5R9JNAktk9QLrb0MXX53cKptKU4a6AAAAAElFTkSuQmCC"}),__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Favicon.jsx",lineNumber:51}})}}t.a=o},,,,,function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c}));var i=a(169),s=a(5);function n(e){return!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey)}function r(e){return e.altKey&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey}function o(e){return!e.altKey&&e.shiftKey&&!e.ctrlKey&&!e.metaKey}function l(e){return!e.altKey&&!e.shiftKey&&e.ctrlKey&&!e.metaKey}const c=(d=!1,function(e,t,a){a=a||null,Object(i.a)(e)?!0!==d&&(d=!0,s.a.tabsPrivate.onKeyboardChanged.addListener((function i(n,r,o,l){var c,u,h;!r&&(c=e.key,u=l,h={ctrlKey:[17],altKey:[18],metaKey:[91,93]},Object.keys(h).filter(e=>c).filter(e=>-1!==h[e].indexOf(u)).some(Boolean))&&(d=!1,t.call(a),s.a.tabsPrivate.onKeyboardChanged.removeListener(i))}))):t.call(a)});var d},function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(109),r=a.n(n),o=a(58),l=a(103);let c=[];const d=new class extends o.EventEmitter{getTrash(e=c){return u(c)}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}},u=r()(1)(e=>e.filter(e=>{if(e.tab){return!Object(l.b)(e.tab).getIn(["extData","preventUndelete"])}if(e.window)return"settings"!==(e.window.extData?JSON.parse(e.window.extData):{}).windowType}));i.a.register(e=>{switch(e.actionType){case s.a.CHROME_SET_SESSION:t=e.session,c=t,d.emitChange();break;default:return!0}var t}),t.a=d},function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(27),r=a(84),o=a.n(r),l=a(140);function c(e,t){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_SET_COLLECTION,collection:t,writeToSettings:!1})}const d=new class{loadPromise(){return new Promise((e,t)=>{const a=n.a.getSync("SEARCH_ENGINE_COLLECTION"),r=n.a.getDefaultSearchEngines();if(a.version!==r.version){const e={...a};e.version=r.version,e.engines=Object(l.a)(e.engines),r.engines.forEach(t=>{const a=e.engines.find(e=>e.id===t.id);if(a){if(!0!==a.removed)if(a.custom)if(a.url===(t.url||"")&&a.suggestUrl===(t.suggestUrl||"")&&a.name===(t.name||"")&&a.post===Boolean(t.post)){const i={...t};i.custom=!0,i.keyword=a.keyword;const s=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(s,1,i)}else{const i={...a};i.id=o()(),e.engines.push(i),e.default===a.id&&(e.default=i.id),e.defaultPrivate===a.id&&(e.defaultPrivate=i.id);const s=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(s,1,t)}else{const i={historyId:a.historyId,...t};i.post=Boolean(t.post);const s=e.engines.findIndex(e=>e.id===t.id);e.engines.splice(s,1,i)}}else e.engines.push(t)}),e.engines=e.engines.map(t=>(-1!==r.engines.findIndex(e=>e.id===t.id)||!1!==Boolean(t.custom)||e.default!==t.id&&e.defaultPrivate!==t.id||(t.custom=!0),t)).filter(t=>-1!==r.engines.findIndex(e=>e.id===t.id)||!1!==Boolean(t.custom)||(e.default===t.id&&(e.default=r.default,e.defaultChanged=!1),e.current===t.id&&(e.current=void 0),!1)),e.default!==r.default&&!0!==e.defaultChanged&&(e.default=r.default);const t=[];e.engines.forEach((a,i)=>{!0!==a.removed&&!0===a.custom&&a.keyword&&(-1===t.findIndex(e=>e===a.keyword)?t.push(a.keyword):e.engines[i].keyword="")}),e.engines.forEach((a,i)=>{!0!==a.removed&&!0!==a.custom&&a.keyword&&(-1===t.findIndex(e=>e===a.keyword)?t.push(a.keyword):e.engines[i].keyword="")}),n.a.set({SEARCH_ENGINE_COLLECTION:e}),i.a.dispatch({actionType:s.a.SEARCH_ENGINES_INIT,collection:e})}else i.a.dispatch({actionType:s.a.SEARCH_ENGINES_INIT,collection:a});n.a.addListener("SEARCH_ENGINE_COLLECTION",c),e()})}add(e,t){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_ADD,engine:e,makeDefault:t})}remove(e){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_REMOVE,id:e})}modify(e,t){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_MODIFY,engine:e,makeDefault:t})}reorder(e,t){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_REORDER,id:e,index:t})}setDefault(e,t,a=!0){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"defaultPrivate":"default",writeToSettings:a})}setDefaultForSearchField(e,t,a=!0){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:!0===t?"currentPrivate":"current",writeToSettings:a})}setDefaultForSpeedDial(e,t){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"currentSD",writeToSettings:!t})}setDefaultForContextMenu(e,t=!0){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_SET_DEFAULT,id:e,type:"context",writeToSettings:t})}restore(e){i.a.dispatch({actionType:s.a.SEARCH_ENGINES_RESTORE,keepCustomSearches:e})}};t.a=d},,function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return v}));var i=a(18),s=a.n(i),n=a(10),r=a(109),o=a.n(r),l=a(1);const c=95,d=60,u=20,h=5;function m(e,t,a){return s.a.contrast(e,t)>=a}function p(e,t,a=1){const i=parseFloat(n.a.get(l.kThemeContrastMinimum))*a;let r=s()(e);if(!m(e,t,i))if(e.luminance()>t.luminance()){do{if(r=r.brighten(.1),"#ffffff"===r.hex())return s()("#f6f6f6")}while(!m(r,t,i))}else do{if(r=r.darken(.1),"#000000"===r.hex())return s()("#111111")}while(!m(r,t,i));return r}function g(e){const t=e.get("lab.l");let a,i,n;return t>40?(e=e.set("lab.l",Math.min(t,99)),a=s()(e).brighten(.75),i=s()(e).darken(.75),n=s()(e).darken(1.5)):(e=e.set("lab.l",Math.max(t,1)),a=s()(e).darken(.75),i=s()(e).brighten(.75),n=s()(e).brighten(1.5)),{colorFg:e,colorFgAlpha:s()(e).alpha(.1).css(),colorFgIntense:a,colorFgFaded:i,colorFgFadedMore:n}}function b(e){const t=e.get("lab.l");let a,i,n,r,o,l,d,m,p,g;return t>c?(e=e.set("lab.l",Math.min(t,99.5)),a=s()(e).darken(.2),i=s()(e).darken(.4),n=s()(e).brighten(.1),r=s()(e).brighten(.4),o=s()(e).brighten(.2),l=s()(e).brighten(.1),d=s()(e).brighten(.35),m=s()(e).darken(.1),p=s()(e).darken(.3),g=s()(e).darken(.2)):t>40?(a=s()(e).darken(.1),i=s()(e).darken(.3),n=s()(e).brighten(.35),r=s()(e).brighten(1),o=s()(e).brighten(.35),l=s()(e).brighten(.5),d=s()(e).brighten(1),m=s()(e).darken(.1),p=s()(e).darken(.3),g=s()(e).darken(.2)):t>u?(a=s()(e).darken(.15),i=s()(e).darken(.3),n=s()(e).brighten(.1),r=s()(e).brighten(.5),o=s()(e).brighten(.2),l=s()(e).darken(.3),d=s()(e).darken(.5),m=s()(e).brighten(.1),p=s()(e).brighten(.4),g=s()(e).brighten(.2)):t>h?(a=s()(e).darken(.1),i=s()(e).darken(.3),n=s()(e).brighten(.15),r=s()(e).brighten(.3),o=s()(e).brighten(.15),l=s()(e).darken(.2),d=s()(e).darken(.4),m=s()(e).brighten(.1),p=s()(e).brighten(.3),g=s()(e).brighten(.3)):(e=e.set("lab.l",Math.max(t,1)),a=s()(e).darken(.15),i=s()(e).darken(.3),n=s()(e).brighten(.2),r=s()(e).brighten(.4),o=s()(e).brighten(.2),l=s()(e).darken(.15),d=s()(e).darken(.3),m=s()(e).brighten(.2),p=s()(e).brighten(.4),g=s()(e).brighten(.2)),{colorBg:e,colorBgAlpha:s()(e).alpha(.8).css(),colorBgAlphaHeavy:s()(l).alpha(.6).css(),colorBgAlphaHeavier:s()(d).alpha(.2).css(),colorBgDark:a,colorBgDarker:i,colorBgLight:n,colorBgLighter:r,colorBgLightIntense:o,colorBgIntense:l,colorBgIntenser:d,colorBgInverse:m,colorBgInverser:p,colorBgFaded:g}}function f(e){const t=e.get("lab.l");let a,i;return t>70?(e=e.set("lab.l",Math.min(t,99)),a=s()(e).darken(.5),i=s()("#111111")):(e=e.set("lab.l",Math.min(t,99)),a=s()(e).darken(.5),i=s()("#f6f6f6")),{colorHighlightBg:e,colorHighlightBgAlpha:s()(e).alpha(.25).css(),colorHighlightBgDark:a,colorHighlightFg:i,colorHighlightFgAlpha:s()(i).alpha(.5).css(),colorHighlightFgAlphaHeavy:s()(i).alpha(.25).css()}}function _(e){const t=e.get("lab.l");let a,i,n,r,o,l,u,h,m;return t>c&&(t>=99&&(e=e.luminance(.7)),n=s()(e).darken(.3),r=s()(e).darken(.5),o=s()(e).darken(1.2),a=s()(e).darken(.4),i=s()(e).darken(1),l=s()("#111111"),u=s.a.mix(e,"#111111"),h=s()(e).darken(.25),m=s()(a).darken(.25)),t>d+10?(n=s()(e).brighten(.3),r=s()(e).brighten(.5),o=s()(e).brighten(1.2),a=s()(e).darken(.4),i=s()(e).darken(1),l=s()("#111111"),u=s.a.mix(e,"#111111"),h=s()(e).darken(.25),m=s()(a).darken(.25)):(n=s()(e).brighten(.3),r=s()(e).brighten(.5),o=s()(e).brighten(1.2),a=s()(e).darken(.4),i=s()(e).darken(1),l=s()("#f6f6f6"),u=s.a.mix(e,"#f6f6f6"),h=s()(e).darken(.25),m=s()(a).darken(.25)),{colorAccentBg:e,colorAccentBgAlpha:s()(o).alpha(.4).css(),colorAccentBgAlphaHeavy:s()(o).alpha(.25).css(),colorAccentBgDark:a,colorAccentBgDarker:i,colorAccentBgFaded:n,colorAccentBgFadedMore:r,colorAccentBgFadedMost:o,colorAccentBorder:p(h,e,.3),colorAccentBorderDark:p(m,e,.3),colorAccentFg:l,colorAccentFgFaded:u,colorAccentFgAlpha:s()(l).alpha(.25).css()}}function N(e,t){let a=s()(e);const i=a.get("lab.l");let n,r,o;return i>c&&(a=s()(a).darken(.25),a=p(a,e,.3),n=s.a.mix(a,t,.8),r=s()(a).brighten(.2),o=s()(a).darken(.3)),i>u&&(a=s()(a).darken(.3),a=p(a,e,.3),n=s.a.mix(a,t,.8),r=s()(a).brighten(.2),o=s()(a).darken(.4)),i>h?(a=s()(a).darken(.25),a=p(a,e,.3),n=s.a.mix(a,t,.8),r=s()(a).brighten(.1),o=s()(a).darken(.4)):(a=a.set("lab.l",Math.max(i,15)),a=s()(a).brighten(.2),a=p(a,e,.4),n=s.a.mix(a,t,.8),r=s()(a).darken(.2),o=s()(a).brighten(.3)),{colorBorder:a,colorBorderHighlight:n,colorBorderDisabled:r,colorBorderIntense:o}}const v=o()(2)(e=>{const t={};if(e){let a;try{a=f(s()(e))}catch(e){return t}Object.keys(a).forEach(e=>{t[`--${e}`]=a[e].toString()})}return t}),E={all:function(e,t,a,i){return e=p(e,t),t=p(t,a),a=p(a,t),i=p(i,t),{...b(t),...g(e),...f(a),..._(i),...N(t,a)}},accentOnly:function(e,t){return _(p(e,t))},fgBgHighlight:function(e,t,a){return e=p(e,t),t=p(t,a),a=p(a,t),{...b(t),...g(e),...f(a)}}};t.e=E},function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var i=a(0),s=a(141),n="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keywordFound.js";const r=function(e,t){if("string"==typeof e){const a=o(e,t);return[a,a?c(e,t):e]}if(!e||"input"!==e.type&&"textarea"!==e.type||"string"!=typeof e.props.value&&"string"!=typeof e.props.defaultValue||"radio"===e.props.type||"checkbox"===e.props.type||"password"===e.props.type){if(e&&"select"===e.type){let a=!1;return i.Children.forEach(e.props.children,e=>{e&&e.props.children&&"string"==typeof e.props.children&&e.props.children.toLowerCase().includes(t)&&(a=!0)}),[a,a?l(e,t):e]}if(e&&e.props&&e.props.children){let a=!1;const s=i.cloneElement(e,e.props,i.Children.map(e.props.children,e=>{const[i,s]=r(e,t);return a=a||i,[a,s]}));return[a,s]}return[!1,e]}{const a=o("string"==typeof e.props.value?e.props.value:e.props.defaultValue,t);return[a,a?l(e,t):e]}};function o(e,t){return e.toLowerCase().includes(t)}const l=(e,t)=>i.createElement("div",{className:"settings-text-bubble-highlight-wrapper",__source:{fileName:n,lineNumber:55}},e,i.createElement("mark",{className:"settings-text-bubble-highlight",__source:{fileName:n,lineNumber:57}},t)),c=(e,t)=>{if(!t||!e)return e;if("string"!=typeof e)return e;const a=new RegExp(Object(s.a)(t),"gi"),r=e.match(a)||[],o=e.split(a).reduce((e,t,a)=>{let s=e;return a&&(s=s.concat([i.createElement("mark",{key:a,__source:{fileName:n,lineNumber:74}},r[a-1])])),s=s.concat([t]),s},[]);return i.createElement("span",{__source:{fileName:n,lineNumber:79}},o)};t.a=function(e,t){if(!t)return e;const[a,i]=r(e,t);return a?i:null}},function(e,t,a){"use strict";(function(e){var i=a(0),s=a.n(i),n=a(29),r=a.n(n),o=a(170),l=a(32),c=a(25),d=a(2),u=a(17),h=a.n(u),m=a(60),p=a(105),g=a(13),b="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortingSelector.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _="vivaldi/x-sortfield";class N extends s.a.PureComponent{constructor(t){super(t),f(this,"getWidth",e=>{const{HTMLElement:t}=this.context,a=r.a.findDOMNode(this),i=a instanceof t?a.getBoundingClientRect():null;i&&i.width&&this.setState({maxWidth:i.width,dataKey:e})}),f(this,"saveColumnsToSettings",()=>{this.dragged="",this.props.onSaveRow&&this.props.onSaveRow()}),f(this,"resizeRow",(e,t,a)=>{const{dataKey:i}=this.state;this.setState(t=>{const s=t.columns?[...t.columns]:[],n=s.flatMap(e=>e.id).indexOf(i),r=a.currentTarget.parentElement,o=Math.round(e-r.getClientRects()[0].left),l=n+1,c=r.nextSibling,d=Math.round(r.clientWidth+c.clientWidth)-o;return o<0||d<0?{columns:s}:(s[l].key||0===n&&!s[n].key?s[n]={...s[n],width:o}:s[l]={...s[l],width:d},this.props.onUpdateRow&&this.props.onUpdateRow(s),{columns:s})})}),f(this,"updateField",e=>{const t=e.target.value;let a;a="manually"===t?l.a.NO_SORTING:this.props.sortOrder===l.a.NO_SORTING?l.a.ASCENDING_SORT:this.props.sortOrder,this.props.onSortChange(a,t)}),f(this,"updateSort",(e,t)=>{let a;if(t.preventDefault(),e===this.props.sortField)switch(this.props.sortOrder){case l.a.ASCENDING_SORT:a=l.a.DESCENDING_SORT;break;case l.a.DESCENDING_SORT:a=!1!==this.props.manualSorting?l.a.NO_SORTING:l.a.ASCENDING_SORT;break;case l.a.NO_SORTING:a=l.a.ASCENDING_SORT}else a=l.a.ASCENDING_SORT;a&&this.props.onSortChange(a,e)}),f(this,"updateOrder",()=>{const e=this.props.sortOrder===l.a.DESCENDING_SORT?l.a.ASCENDING_SORT:l.a.DESCENDING_SORT;this.props.onSortChange(e,this.props.sortField)}),f(this,"onDragStart",(e,t)=>{this.dragged=e,t.dataTransfer.setData(_,!0),t.stopPropagation()}),f(this,"onDragOver",(e,t)=>{const{HTMLElement:a}=this.context;if(t.dataTransfer&&!t.dataTransfer.types.includes(_))return;if(t.preventDefault(),t.stopPropagation(),e===this.dragged||!(t.currentTarget instanceof a))return;const i=t.currentTarget.getBoundingClientRect(),s=(t.clientX-i.left)/i.width<=.5?"left":"right";this.setState({dragOverField:{id:e,position:s}})}),f(this,"onDrop",t=>{if(this.state.columns&&void 0!==this.state.dragOverField&&this.state.columns.length>1&&t.dataTransfer.getData(_)){const{columns:a,dragOverField:i}=this.state,s=a.findIndex(e=>e.id===this.dragged),n=Math.max(0,a.findIndex(e=>e.id===i.id)+("right"===i.position?1:0)),r=s-n;if(0===r||!this.state.columns)return;t.preventDefault(),t.stopPropagation(),this.setState(e=>{if(e.columns){const t=[...e.columns];return t.splice(Math.max(0,n-(r<0?1:0)),0,t.splice(s,1)[0]),this.resetDragOverField(),this.props.onUpdateRow&&this.props.onUpdateRow(t),{columns:t}}}),e.nextTick(()=>this.saveColumnsToSettings())}}),f(this,"resetDragOverField",()=>{this.setState({dragOverField:void 0})}),f(this,"resetColumns",()=>{const e=Object(p.c)(this.props.fields);e&&(this.setState({columns:e}),this.props.onUpdateRow&&this.props.onUpdateRow(e))}),f(this,"onContextMenu",e=>{if(!this.state.columns)return;const t=this.state.columns.flatMap(e=>e.id),a=this.props.fields.filter(e=>!e.key).map(e=>({handler:this.toggleColumn.bind(this,e.value),name:e.text,type:"checkbox",checked:t.includes(e.value)}),[]);this.props.columns&&(a.push({name:"---"}),a.push({handler:this.resetColumns,name:Object(d.a)("Reset Columns")})),Object(m.a)(this.context.vivaldiWindowId,a)(e)}),f(this,"toggleColumn",t=>{if(!this.state.columns)return;const a=this.state.columns.flatMap(e=>e.id);a.includes(t)?this.setState(e=>{const i=e.columns||[];if(i){const e=a.indexOf(t),s=[...i.slice(0,e),...i.slice(e+1)];return this.props.onUpdateRow&&this.props.onUpdateRow(s),{columns:s}}}):this.setState(e=>{const a=e.columns||[],i=this.props.fields.find(e=>e.value===t);if(i&&a.length>0){const e=this.props.fields.indexOf(i),s=[...a.slice(0,e),{id:t,width:i.width||20},...a.slice(e)];return this.props.onUpdateRow&&this.props.onUpdateRow(s),{columns:s}}}),e.nextTick(()=>this.saveColumnsToSettings())}),f(this,"_getSortLabel",e=>{const t=e.text,a=e.value,i=this.props.sortField===a,n=e.fullScreenTitle,{dragOverField:r}=this.state,c=r&&r.id===e.value,u=r&&r.position||"",m=h()({"sortselector-button":!0,"sortselector-button-active":i&&this.props.sortOrder!==l.a.NO_SORTING,"direction-ascending":i&&this.props.sortOrder===l.a.ASCENDING_SORT,"direction-descending":i&&this.props.sortOrder===l.a.DESCENDING_SORT,"over-left":c&&"left"===u,"over-right":c&&"right"===u,"drag-over":c}),{columns:p}=this.state,f=p.findIndex(e=>e.id===a),_=p[f];return s.a.createElement("div",{key:"key_"+a+t+n,onContextMenu:this.onContextMenu,__source:{fileName:b,lineNumber:361}},s.a.createElement("button",{draggable:1!==this.props.fields.length,onDragStart:this.onDragStart.bind(this,a),onDragOver:this.onDragOver.bind(this,a),onDragLeave:this.resetDragOverField,onDrop:this.onDrop,className:m,onClick:this.updateSort.bind(this,a),title:n||Object(d.a)("Toggle Sort Order"),disabled:!a,tabIndex:this.props.keyAccess,__source:{fileName:b,lineNumber:364}},_&&_.width<80?s.a.createElement("span",{className:"column-icon",dangerouslySetInnerHTML:{__html:e.icon?e.icon:g.J.small},__source:{fileName:b,lineNumber:376}}):s.a.createElement("span",{className:"column-label",__source:{fileName:b,lineNumber:381}},t),s.a.createElement("span",{className:"column-sort-order",dangerouslySetInnerHTML:{__html:g.y},__source:{fileName:b,lineNumber:383}})),p&&f>-1&&f<p.length-1&&s.a.createElement(o.a,{onSlidebarPosition:this.resizeRow,onStart:()=>this.getWidth(a),onStop:this.saveColumnsToSettings,position:"right",__source:{fileName:b,lineNumber:389}}))}),this.state={columns:t.columns||[],maxWidth:0,dataKey:"",dragOverField:void 0}}render(){const e=h()({"sortselector-button":!0,"direction-ascending":this.props.sortOrder===l.a.ASCENDING_SORT,"direction-descending":this.props.sortOrder===l.a.DESCENDING_SORT});let t=this.state.columns&&this.state.columns.length>0?this.state.columns.map(e=>{const t=this.props.fields.find(t=>t.value===e.id);if(t)return this._getSortLabel(t)}):this.props.fields.map(e=>this._getSortLabel(e));if(!0===this.props.fullsize){const e=this.props.columns&&Object(p.b)(this.props.columns);return s.a.createElement("div",{className:h()("sortselector","sortselector-tableheader",{"tableheader-add-scrollbar-spacing":!!this.props.alignHeaderWithScrollbar}),style:{gridTemplateColumns:e},__source:{fileName:b,lineNumber:420}},t)}return 1===this.props.fields.length?s.a.createElement("div",{className:"sortselector sortselector-tableheader single",__source:{fileName:b,lineNumber:432}},t):(t=this.props.fields.map(e=>s.a.createElement("option",{key:e.value,value:e.value,__source:{fileName:b,lineNumber:440}},e.fullScreenTitle)),!1!==this.props.manualSorting&&t.unshift(s.a.createElement("option",{key:"manually",value:"manually",__source:{fileName:b,lineNumber:448}},Object(d.a)("Sort Manually"))),s.a.createElement("div",{className:"sortselector sortselector-compact",__source:{fileName:b,lineNumber:455}},s.a.createElement("div",{className:"sortselector-area",__source:{fileName:b,lineNumber:456}},s.a.createElement("select",{className:"sortselector-dropdown",title:Object(d.a)("Sort by..."),value:this.props.sortField,tabIndex:this.props.keyAccess,onChange:this.updateField,__source:{fileName:b,lineNumber:457}},t)),s.a.createElement("button",{className:e,onClick:this.updateOrder,title:this.props.sortOrder===l.a.ASCENDING_SORT?Object(d.a)("Sort Descending"):Object(d.a)("Sort Ascending"),tabIndex:this.props.keyAccess,disabled:this.props.sortOrder===l.a.NO_SORTING&&"disabled",dangerouslySetInnerHTML:{__html:g.y},__source:{fileName:b,lineNumber:466}})))}}f(N,"contextType",c.a),t.a=N}).call(this,a(64))},function(e,t,a){"use strict";a(597),a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(617),a(618),a(619),a(620),a(621),a(622),a(623),a(624),a(625),a(626),a(627),a(628),a(629),a(630),a(631),a(632),a(633),a(634),a(635),a(636),a(637),a(638),a(639);var i=a(10),s=a(2),n=a(7),r=a(15),o=a.n(r);const l=new RegExp(/'.*?'/g),c=new RegExp(/(\]?([^\]])*\[)|(\]\w+$)/g),d=e=>`[${e.replace(/'/g,"")}]`,u=e=>e.replace(/y/g,"Y").replace(/d/g,"D"),h=e=>e.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace("DDDD","dddd");var m=a(1);const p=n.default.i18n.getUILanguage().toLowerCase();function g(e){if("hy"===(e=e.toLowerCase()))return"hy-am";if("sr"===e)return"sr-cyrl";const t=o()().locale(e);return t.locale()===e?e:"-"===e[2]&&(e=e.substring(0,2),t.locale(e),t.locale()===e)?e:"en"}function b(e){const t=o()().locale(g(p));if(t.localeData)return"short"===e?t.localeData().weekdaysShort():t.localeData().weekdays();const a=new Date,i=new Date(a.setDate(a.getDate()-a.getDay())),s=[];let n=0;for(;n<7;)s.push(i.toLocaleString(p,{weekday:e})),i.setDate(i.getDate()+1),n++;return s}function f(e="long"){const t=o()().locale(g(p));if(t.localeData)return"short"===e?t.localeData().monthsShort():t.localeData().months();const a=[];let i=0;for(;i<12;){const t=new Date(2e3,i,1);a.push(t.toLocaleString(p,{month:e})),i++}return a}const _={getWeekdays:b,getMonths:f,getLocale:function(e){const t=g(p),a=o()().locale(t);if(e&&"language"!==i.a.get(m.kCalendarDateFormat)){const a=(e=(e=>{if(e.timeFormat=e.timeFormat.replace(/tt/,"A").replace(/t/,"A"),e.shortDateFormat.includes("'")?e.shortDateFormat=e.shortDateFormat.replace(l,d).replace(c,e=>u(e)):e.shortDateFormat=u(e.shortDateFormat),e.longDateFormat.includes("'")){const t=e.longDateFormat.replace(l,d).replace(c,e=>h(e));e.longDateFormat=t+" "+e.timeFormat}else e.longDateFormat=h(e.longDateFormat)+" "+e.timeFormat;return e})(e)).timeFormat,i=a.replace(":ss",""),s=e.longDateFormat,n=s.replace(/.?dddd.?/,"").trim(),r=n.replace(/\s?(h+.m+.s+)\s?a?/gi,"").trim(),o=e.shortDateFormat;return{name:t+"-viv",parentLocale:t,months:f("long"),monthsShort:f("short"),weekdays:b("long"),weekdaysShort:b("short"),week:{dow:e.firstDayOfWeek},longDateFormat:{LT:i,LTS:a,L:o,LL:r,LLL:n,LLLL:s}}}return a.localeData?{name:t+"-viv",parentLocale:t,months:f("long"),monthsShort:f("short"),weekdays:b("long"),weekdaysShort:b("short"),week:a.localeData()._week,longDateFormat:a.localeData()._longDateFormat}:o.a.localeData()},getWeekdayFormat:function(e="LL"){return Object(s.a)("$1, $2",["dddd",e])},getShortDateFormat:function(){return o.a.localeData().longDateFormat("ll").replace("MMMM","MMM").replace(/([^MD]*)?Y+([^MD]*)?$/g,"").replace(/^Y+([^MD]*)?/,"").trim().replace(/(^,)|(,$)/g,"")},fixMomentLocale:g};t.a=_},,,,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(39),r=a(52),o=a(29),l=a.n(o),c=a(207);var d=class{constructor(e=!0){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1,this.multiSelect_=e}isSelected(e){for(const t of this.selectedIds_)if(t.id===e)return t.selected;return!1}get length(){return this.selectedIds_.length}get isSingleItemSelected(){return 1===this.selectedIds_.length}get FirstSingleItemSelected(){return this.isSingleItemSelected?this.selectedIds_[0].id:-1}get selectedIds(){return this.selectedIds_}resetSelectionModel(){this.selectedIds_=[],this.anchorIndex_=-1,this.leadIndex_=-1}getData(){return{selectedIds_:this.selectedIds_,anchorIndex_:this.anchorIndex_,leadIndex_:this.leadIndex_}}setData(e){this.anchorIndex_=e.anchorIndex_,this.leadIndex_=e.leadIndex_,this.selectedIds_=e.selectedIds_}unSelectAll(){this.selectedIds_=[]}selectAll(e){this.multiSelect&&(e.forEach(e=>{this.selectedIds_.push({id:e,selected:!0})}),e.length>0&&(-1===this.anchorIndex_&&(this.anchorIndex_=e[0]),-1===this.leadIndex_&&(this.leadIndex_=e[0])))}setSelectedIds(e){this.multiSelect?this.selectedIds_=e.map(e=>({id:e,selected:!0})):this.setIndexSelected(this.leadIndex,!0)}setLeadIndex(e){this.leadIndex=e}setIndexSelected(e,t){var a=this.selectedIds_.map(e=>e.id).indexOf(e),i=this.selectedIds_[a];if(!i||i.selected!==t)if(this.multiSelect||this.resetSelectionModel(),this.leadIndex=e,this.anchorIndex=e,t)this.selectedIds_.push({id:e,selected:t});else{var s=this.selectedIds_.map(e=>e.id).indexOf(e);-1!==s&&this.selectedIds_.splice(s,1)}}get leadIndex(){return this.leadIndex_}set leadIndex(e){this.leadIndex_=e}get anchorIndex(){return this.anchorIndex_}set anchorIndex(e){this.anchorIndex_=e}get multiSelect(){return this.multiSelect_}set multiSelect(e){this.multiSelect_=e}};var u=new Map,h=a(320),m=a(44),p=a(25),g=a(17),b=a.n(g),f="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TreeItem.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends s.a.PureComponent{constructor(...e){super(...e),_(this,"dropSupport",{}),_(this,"isFolder",()=>this.props.isFolder(this.props.treeItem)),_(this,"hasChildren",()=>this.props.hasChildren(this.props.treeItem)),_(this,"onClick",e=>{this.props.onItemClick(this.props.treeItem,e),e.stopPropagation()}),_(this,"onDoubleClick",e=>{void 0===this.props.inlineEditText&&(this.isFolder()&&this.onExpandClick(e),this.props.onItemDoubleClick(this.props.treeItem,e))}),_(this,"onDragStart",e=>{let t=this.props.getAllSelectedItems().map(e=>e.id);t=this.props.validateForDrag?this.props.validateForDrag(t):[],t.length>0&&void 0===this.props.inlineEditText&&(this.props.onDragStart(),this.props.mimeType&&e.dataTransfer.setData(this.props.mimeType,JSON.stringify(t)),e.dataTransfer.setData("text/uri-list",this.props.getDragData("text/uri-list",t)),e.dataTransfer.setData("text/plain",this.props.getDragData("text/plain",t)),e.dataTransfer.setData("vivaldi/x-title",this.props.getDragData("vivaldi/x-title",t)),this.props.setCustomDragData&&this.props.setCustomDragData(e.dataTransfer,t),e.dataTransfer.effectAllowed="all",this.setState({dragging:!0}),m.a.setWebviewPointerEvents(!1,this.context.document))}),_(this,"onDragEnd",e=>{this.setState({dragging:!1}),m.a.setWebviewPointerEvents(!0,this.context.document),this.props.onDragEnd()}),_(this,"onDragEnter",e=>{this.dropSupport=this.props.supportDrop(this.props.treeItem,e)}),_(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),!0===this.dropSupport.available&&this.props.onDrop(this.props.treeItem,this.dropSupport,e)}),_(this,"onDragOver",e=>{e.stopPropagation(),!0===this.dropSupport.available&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",this.props.onDragOver(this.props.treeItem,this.dropSupport,e))}),_(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),!0===this.dropSupport.available&&this.props.onDragLeave(this.props.treeItem,e)}),_(this,"onMouseDown",e=>{const t=!this.props.isDraggable&&void 0===this.props.inlineEditText;this.props.onMouseDown(this.props.treeItem,t,e)}),_(this,"onMouseUp",e=>{this.props.onMouseUp(this.props.treeItem,e),0===e.buttons&&this.state&&this.state.dragging&&this.onDragEnd(e)}),_(this,"onExpandClick",e=>{this.props.treeItem.children&&this.props.treeItem.children.length>0&&(this.props.toggle(this.props.treeItem.id),e.preventDefault(),e.stopPropagation())}),_(this,"onEditChanged",e=>{this.props.setInlineEditText(e.target.value)}),_(this,"onEditFocus",e=>{e.target.select()}),_(this,"onEditBlur",e=>{this.props.onInlineEditBlur()})}render(){const e=!!this.props.isSeparator&&this.props.isSeparator(this.props.treeItem),t=this.props.selected,a=this.props.dragOverObj.id===this.props.treeItem.id,i=this.props.dragOverObj.position,n={node:this.props.treeItem,isSelected:t,inlineEditText:this.props.inlineEditText,onChange:this.onEditChanged,onFocus:this.onEditFocus,onBlur:this.onEditBlur};return s.a.createElement("div",{style:this.props.style,"data-id":this.props.treeItem.id,className:"tree-item","data-selected":t?"":null,"data-lead":this.props.lead?"":null,"data-cut":this.props.isCut?"":null,"data-expanded":this.props.isExpanded?"":null,onDragEnter:this.props.enableDragAndDrop?this.onDragEnter:null,onDragOver:this.props.enableDragAndDrop?this.onDragOver:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeave:null,onDrop:this.props.enableDragAndDrop?this.onDrop:null,onContextMenu:this.props.onContextMenu,__source:{fileName:f,lineNumber:151}},s.a.createElement("div",{className:b()({folder:this.isFolder(),"tree-row":!0,dragging:this.props.dragging,dragover:a&&"on"===i,dragoverAbove:a&&"above"===i,dragoverBelow:a&&"below"===i,"speeddial-folder":this.isFolder()&&this.props.treeItem.speeddial}),"data-separator":e?"":null,"data-selected":t?"":null,"data-nofocus":t&&!this.props.hasFocus?"":null,onClick:this.onClick,onDoubleClick:this.onDoubleClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,draggable:this.props.isDraggable,onDragStart:this.props.enableDragAndDrop?this.onDragStart:null,onDragEnd:this.props.enableDragAndDrop?this.onDragEnd:null,__source:{fileName:f,lineNumber:164}},this.props.renderItemContent(n)))}}_(N,"contextType",p.a);var v=N,E=a(32),w=a(27),S=a(87),C=a(60),k=a(140),y=a(6),O=a(169),A=a(105),T=a(555),I=a(183),D=a(125),P="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiTreeList.jsx";function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M={id:-1,position:""};class L extends i.PureComponent{constructor(e){super(e),x(this,"_dropSupport",{available:!1,onto:!1,edge:!1}),x(this,"inlineEditTimeoutId",-1),x(this,"expandTimer",void 0),x(this,"_leftMouseTimeStamp",0),x(this,"expandId",-1),x(this,"_isMounted",!1),x(this,"_hasCutCopyPasteListeners",!1),x(this,"_isComposing",!1),x(this,"_scrollTopNeedsUpdate",!1),x(this,"_canCutCopyPaste",!1),x(this,"resetSelectionModel",()=>{this.selectionModel.resetSelectionModel(),this.updateSelectionState()}),x(this,"updateSelectionState",e=>{this.forceUpdate(e)}),x(this,"SelectionMixinSelectAll",()=>{this.selectionModel.selectAll(this.getAllIds()),this.updateSelectionState()}),x(this,"SelectionMixinSetLead",e=>{this.selectionModel.setLeadIndex(e),this.updateSelectionState()}),x(this,"SelectionMixinSelectItem",(e,t,a,i,s)=>{this.selectionModel.setLeadIndex(e);const n=t;let r=this.selectionModel.isSelected(e);if(n||a)r=s||!r;else{if(s&&this.selectionModel.length>1)return;this.selectionModel.unSelectAll(),r=!0}if(a&&-1!==this.selectionModel.anchorIndex){const t=this.getSelectedIdsFromIdToAnchor(e);this.selectionModel.setSelectedIds(t)}else this.selectionModel.setIndexSelected(e,r);this.updateSelectionState()}),x(this,"getSelectedIdsFromIdToAnchor",e=>{const t=this.selectionModel.anchorIndex;return this.getIdsBetween(t,e)}),x(this,"_initializeSettings",e=>{if(!e.settings)return;this._expandSettings="EXPAND_"+e.settings,this._scrollTopSettings="SCROLL_TOP_"+e.settings,this._scrollTopNeedsUpdate=!0,this._searchStyleSettings="SEARCH_STYLE_"+e.settings,this._onRowsRenderedOptions="ON_ROWS_RENDERED_OPTIONS_"+e.settings;let t={};"always"===e.defaultFolderExpansion?t=this.getAllFoldersExpandedModel(e.nodes):(t=w.a.getSync("EXPAND_"+e.settings),t||"fallback"!==e.defaultFolderExpansion||(t=this.getAllFoldersExpandedModel(e.nodes)),t||(t={})),this.prepareDataForRender(e.nodes,t,e.sorting)}),x(this,"_updateSelectionStateIfNeeded",e=>{if(e.settings){this._selectionSettings="SELECTION_"+e.settings;const t=w.a.getSync(this._selectionSettings);if(t){const e=this.getSelectedItem();this.selectionModel.setData(t),this.updateSelectionState(()=>{const{onSelect:t}=this.props;if(t){const a=this.getSelectedItem();!a||e&&a.id===e.id||t(a,"other")}})}else this.resetSelectionModel()}}),x(this,"focusTree",()=>{if(this.refs.treeListEntries){const e=l.a.findDOMNode(this.refs.treeListEntries);e instanceof HTMLElement&&e.focus()}}),x(this,"prepareNodesForRender",(e,t)=>{const a=e=>{this.props.hasChildren(e)&&e.children.forEach(i=>{i.level=e.level+1,e.isExpanded=void 0===t[e.id]?Boolean(this.props.expandedByDefault):t[e.id],a(i)})};for(const t of e)t.level=0,a(t)}),x(this,"prepareDataForRender",(e,t,a)=>{this.prepareNodesForRender(e,t);const i=this.getRenderedItems(e,t,a);this.setState({renderedArray:i,expandModel:t}),"function"==typeof this.props.rowHeight&&this.rerenderVisibleTreeItems()}),x(this,"setCutIds",e=>{this.props.setCutIds&&this.props.setCutIds(e)}),x(this,"onCut",e=>{e.preventDefault();const{isValidForClipboard:t}=this.props;if(!this._canCutCopyPaste||!t)return;const a=this.getAllSelectedItems().filter(e=>t(e)).map(e=>e.id);this.props.onCut?this.props.onCut(e,a):(this.setCutIds(a),this.setClipboard(e,!0))}),x(this,"onCopy",e=>{const{isValidForClipboard:t,onCopy:a}=this.props;if(this._canCutCopyPaste&&t)if(a){a(e,this.getAllSelectedItems().filter(e=>t(e)).map(e=>e.id))}else this.setClipboard(e,!1)}),x(this,"toggleSelectedExpansion",()=>{this.stopInlineEditTimer();const e=this.selectionModel.leadIndex;if(-1===e)return;if(this.state.inlineEditId===e)return;const t=this.findTreeItem(e);t&&this.props.isFolder(t)&&this.toggleExpandModel(t.id)}),x(this,"toggleExpandModel",e=>{this.state.expandModel[e]=void 0===this.state.expandModel[e]?!this.props.expandedByDefault:!this.state.expandModel[e],this.state.expandModel[e]===Boolean(this.props.expandedByDefault)&&delete this.state.expandModel[e],this.saveExpandModel(this.state.expandModel),this.prepareDataForRender(this.props.nodes,this.state.expandModel,this.props.sorting)}),x(this,"saveExpandModel",e=>{if(this.props.settings&&"always"!==this.props.defaultFolderExpansion){const t={};t[this._expandSettings]=e,w.a.set(t)}}),x(this,"saveSelectionModel",()=>{if(this.props.settings){const e={};e[this._selectionSettings]=this.selectionModel.getData(),w.a.set(e)}}),x(this,"_findTreeIndex",e=>this.state.renderedArray.findIndex(t=>t.id===e)),x(this,"_scrollLeadNodeIntoView",()=>{const e=this._findTreeIndex(this.selectionModel.leadIndex);this.scrollIntoView(e)}),x(this,"getAllFoldersCollapsedModel",e=>{const t={};if(this.props.expandedByDefault){const a=e=>{this.props.isFolder(e)&&(t[e.id]=!1),this.props.hasChildren(e)&&e.children.forEach(a)};e.forEach(a)}return t}),x(this,"collapseAll",()=>{const e=this.getAllFoldersCollapsedModel(this.props.nodes);this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()}),x(this,"getAllFoldersExpandedModel",e=>{const t={};if(!this.props.expandedByDefault){const a=e=>{this.props.isFolder(e)&&(t[e.id]=!0),this.props.hasChildren(e)&&e.children.forEach(a)};e.forEach(a)}return t}),x(this,"getExpandModel",()=>this.state.expandModel),x(this,"expandWithModel",e=>{this.saveExpandModel(e),this.prepareDataForRender(this.props.nodes,e,this.props.sorting),this._scrollLeadNodeIntoView()}),x(this,"expandAll",()=>{this.expandAllExcept([])}),x(this,"expandAllExcept",e=>{const t=this.getAllFoldersExpandedModel(this.props.nodes);e.forEach(e=>{this.props.expandedByDefault?t[e]=!1:delete t[e]}),this.saveExpandModel(t),this.prepareDataForRender(this.props.nodes,t,this.props.sorting),this._scrollLeadNodeIntoView()}),x(this,"onImport",()=>{this.props.onImport&&this.props.onImport()}),x(this,"setClipboard",(e,t)=>{const{isValidForClipboard:a,getDragData:i,mimeType:s}=this.props;if(!s||!a||!i)return;const n=this.getAllSelectedItems().filter(e=>a(e)).map(e=>e.id);e.clipboardData.setData("vivaldi/x-cut",t),e.clipboardData.setData(s,JSON.stringify(n)),e.clipboardData.setData("text/plain",i("text/plain",n)),e.clipboardData.setData("text/html",i("text/html",[this.selectionModel.leadIndex])),e.stopPropagation(),e.preventDefault()}),x(this,"contextMenuSpy",e=>{this._canCutCopyPaste=!1;const t=l.a.findDOMNode(this);let a=e.target;for(;a;){if(a===t){this._canCutCopyPaste=!0;break}a=a.parentNode}}),x(this,"keyDownSpy",e=>{this._canCutCopyPaste=!0}),x(this,"onPaste",e=>{if(e.preventDefault(),!this._canCutCopyPaste)return;const{mimeType:t}=this.props;if(!t)return;const a=-1!==e.clipboardData.types.findIndex(e=>e===t)?JSON.parse(e.clipboardData.getData(t)):[];if(0===a.length)return;const i=this.getTargetFromSelection();if("true"===e.clipboardData.getData("vivaldi/x-cut")){if(!(this.props.cutIds&&this.props.cutIds.length>0)||!this.props.onMove)return;this.props.onMove(a,i.parentId,i.index,"on").then(e=>{this.setCutIds([]),this.selectionModel.setSelectedIds(e);const{onSelect:t}=this.props;if(e.length>0&&t){const a=this.findTreeItem(e[0]);a&&t(a,"other")}this.rerenderVisibleTreeItems()})}else{const e=Object(k.a)(a.map(e=>this.findTreeItem(e)));this.props.onCreate&&this.props.onCreate(e,i.parentId,i.index,!1).then(e=>{const t=Array.isArray(e)?e:e.items;Boolean(t)&&t.length>0&&(this.selectionModel.setSelectedIds(t.map(e=>e.id)),this.SelectionMixinSetLead(t[0].id),this.rerenderVisibleTreeItems())})}}),x(this,"moveNode",(e,t)=>{this.props.onMove&&this.canMoveUpDown(e,t)&&(t?this.props.onMove([e.id],e.parentId,e.index-1,"above"):this.props.onMove([e.id],e.parentId,e.index+2,"below"))}),x(this,"canMoveUpDown",(e,t)=>{if(!0===t&&0===e.index)return!1;if(!1===t){let t=0;if(e.parentId===this.props.rootId)t=this.props.nodes.length,t>0&&this.props.nodes[t-1].trash&&t--;else{const a=this.findTreeItem(e.parentId);a&&a.children&&(t=a.children.length)}if(e.index+1>=t)return!1}const a=!!this.props.sorting&&this.props.sorting.sortOrder!==E.a.NO_SORTING,i=!this.props.supportsUpDownMove||this.props.supportsUpDownMove(e,t);return!a&&i}),x(this,"getKeyEventMap",()=>({esc:this.onKeyEscUp,up:this.onKeyArrowUp,down:this.onKeyArrowDown,"alt+up":this.onKeyArrowUp,"alt+down":this.onKeyArrowDown,left:this._collapseFolderOrSelectParent,right:this._expandFolder,del:this.onKeyDelete,home:this.onKeyHome,end:this.onKeyEnd,pageup:this.onKeyPageUp,pagedown:this.onKeyPageDown,"shift+del":this.onKeyShiftDelete,"shift+up":this.onKeyArrowUp,"shift+down":this.onKeyArrowDown,"shift+home":this.onKeyHome,"shift+end":this.onKeyEnd,"shift+pageup":this.onKeyPageUp,"shift+pagedown":this.onKeyPageDown,"ctrl+a":this.onKeySelectAll,"ctrl+left":this._collapseFolderOrSelectParent,"ctrl+right":this._expandFolder,"ctrl+space":this.onKeyCtrlSpace,"ctrl+up":this.onKeyCtrlUp,"ctrl+down":this.onKeyCtrlDown})),x(this,"enableCutCopyPasteListeners",e=>{if(this._canCutCopyPaste=e,this._hasCutCopyPasteListeners!==e){this._hasCutCopyPasteListeners=e;const{document:t}=this.context;this._hasCutCopyPasteListeners?(t.addEventListener("cut",this.onCut),t.addEventListener("copy",this.onCopy),t.addEventListener("paste",this.onPaste),t.addEventListener("contextmenu",this.contextMenuSpy),t.addEventListener("keydown",this.keyDownSpy)):(t.removeEventListener("cut",this.onCut),t.removeEventListener("copy",this.onCopy),t.removeEventListener("paste",this.onPaste),t.removeEventListener("contextmenu",this.contextMenuSpy),t.removeEventListener("keydown",this.keyDownSpy))}}),x(this,"onLostFocus",()=>{this.stopInlineEditTimer(),this.enableCutCopyPasteListeners(!1),this.setState({hasFocus:!1})}),x(this,"onGotFocus",()=>{if(-1===this.state.inlineEditId){let e=this.getSelectedItem();e&&-1===this._findTreeIndex(e.id)&&(e=void 0),this.enableCutCopyPasteListeners(!0),this.setState({hasFocus:!0})}}),x(this,"scrollIntoView",e=>{this.refs.treeListEntries&&this.refs.treeListEntries.scrollToRow(e)}),x(this,"selectByIndex",e=>{this.state.renderedArray.length>e&&this.selectById(this.state.renderedArray[e].id)}),x(this,"selectById",(e,t,a,i)=>{const s=this.findTreeItem(e);this.props.onSelect&&(s&&this.selectionModel.FirstSingleItemSelected===s.id||this.props.onSelect(s,i||"other")),a||(a=this._findTreeIndex(e)),-1!==a&&this.scrollIntoView(a),t?this.SelectionMixinSelectItem(e,t.ctrlKey,t.shiftKey,t.metaKey,"contextmenu"===t.type):this.SelectionMixinSelectItem(e),this.saveSelectionModel()}),x(this,"scrollToId",e=>{this.scrollIntoView(this._findTreeIndex(e))}),x(this,"onItemClick",(e,t)=>{t.stopPropagation(),this.props.onItemClick&&this.props.onItemClick(t,e)}),x(this,"onItemDoubleClick",(e,t)=>{this.stopInlineEditTimer(),this.props.onItemDoubleClick&&(this.props.canDoubleClick&&this.props.canDoubleClick(e)||!this.props.isFolder(e))&&this.props.onItemDoubleClick(t,e)}),x(this,"onItemMouseDown",(e,t,a)=>{if(m.a.isNavigationButton(a.button))return;const i=this.selectionModel.selectedIds;let s=!1;for(const t of i)if(t.id===e.id){s=!0;break}this.state.hasFocus&&s&&1===i.length&&a.button===m.a.kLeft&&!Object(O.a)(a)&&a.target instanceof HTMLElement&&"title"===a.target.className&&a.timeStamp-this._leftMouseTimeStamp>300?this.startInlineEditTimerForId(e.id):this.stopInlineEditTimer();const n=a.ctrlKey;s&&!n||(s&&n&&1===i.length?this.unSelectAll():this.selectById(e.id,a,void 0,"mouse")),"function"==typeof this.props.onItemMouseDown&&this.props.onItemMouseDown(e,a),a.button===m.a.kLeft&&(this._leftMouseTimeStamp=a.timeStamp),t&&this.focusTree()}),x(this,"onItemMouseUp",(e,t)=>{if(m.a.isNavigationButton(t.button))return;const a=this.selectionModel.selectedIds,i=t.ctrlKey;a.length>1&&t.button!==m.a.kRight&&!i&&this.selectById(e.id,t,void 0,"mouse"),"function"==typeof this.props.onItemMouseUp&&this.props.onItemMouseUp(e,t)}),x(this,"onContextMenuOpen",(e,t)=>{t&&this.scrollIntoView(this._findTreeIndex(t.id))}),x(this,"rerenderVisibleTreeItems",()=>{this.refs.treeListEntries&&this.refs.treeListEntries.recomputeRowHeights()}),x(this,"getParentAndIndex",(e,t)=>{let a,i=void 0;if(e)if(this.props.isFolder(e))a=e.id,!e.isExpanded&&t&&this.toggleExpandModel(e.id);else{a=e.parentId;const{id:t}=e;if(a===this.props.rootId)this.props.nodes&&(i=this.props.nodes.findIndex(e=>e.id===t)+1);else{const e=this.findTreeItem(a);e&&e.children&&(i=e.children.findIndex(e=>e.id===t)+1)}}else a=this.props.rootId;return{parentId:a,index:i}}),x(this,"getTargetFromSelection",()=>{const e=this.selectionModel.FirstSingleItemSelected;let t;return e&&-1!==e&&(t=this.findTreeItem(e),this.props.isValidAddTarget&&!this.props.isValidAddTarget(t)&&(t=void 0)),this.getParentAndIndex(t,!0)}),x(this,"onAdd",(e,t)=>{const a={children:e?[]:void 0,isNew:!0};t&&(a.title=t.title,a.content=t.content,a.url=t.url,a.separator=t.separator);const i=this.getTargetFromSelection();this.props.onCreate&&this.props.onCreate([a],i.parentId,i.index,!0).then(e=>{if(e){const t=Array.isArray(e)?e:e.items,a=!Array.isArray(e)&&e.props.edit;Boolean(t)&&1===t.length&&(this.getSelected()!==t[0].id&&this.selectById(t[0].id),a&&this.startInlineEdit(t[0].id))}})}),x(this,"onSave",()=>{const{onSave:e}=this.props;e&&e(this.getAllSelectedItems().map(e=>e.id))}),x(this,"onSaveAll",()=>{this.props.onSave&&this.props.onSave([])}),x(this,"onExport",()=>{const{onExport:e}=this.props;e&&e(this.getAllSelectedItems().map(e=>e.id))}),x(this,"onExportAll",()=>{this.props.onExport&&this.props.onExport([])}),x(this,"onDelete",e=>{let t=this.getAllSelectedItems().map(e=>e.id);return this.props.validateForDeletion&&(t=this.props.validateForDeletion(t)),this.setState({isDeleting:!0}),this.onDeleteItems(t,e)}),x(this,"onDeleteItems",(e,t)=>{if(e&&e.length>0){let a=-1;const i=this.selectionModel.selectedIds;for(const e of i){const t=this._findTreeIndex(e.id);(-1===a||t<a)&&(a=t)}a<0&&(a=0);const s=this.state.renderedArray[a];if(!this.props.delete)return Promise.resolve();let n=void 0!==s.parentId?this.findTreeItem(s.parentId):void 0;return this.props.delete(e,t).then(()=>{if(this.props.disableSelectAfterDelete)return;const t=this.state.renderedArray.filter(t=>!e.includes(t.id));if(0===t.length)this.selectById(-1);else if(n)if(this.props.hasChildren(n)&&(n={...n},n.children=n.children.filter(t=>!e.includes(t.id)),n.children=this.sortItems(n.children,this.props.sorting)),this.props.hasChildren(n)){const e=n.children;if(1===e.length)this.selectById(e[0].id);else{const i=e[0],s=e[e.length-1],n=this._findTreeIndex(i.id),r=this._findTreeIndex(s.id);if(a<=n)this.selectById(i.id);else if(a>=r)this.selectById(s.id);else{let i=0;if(r-n+1>e.length){const e=a-n;for(let a=0;a<e;a++){const e=t[n+a];this.props.hasChildren(e)&&e.isExpanded&&(i-=e.children.length)}}const s=e[a-n+i];this.selectById(s.id)}}}else this.selectById(n.id);else{let e=this.state.renderedArray.filter(e=>e.parentId===this.props.rootId||!0===e.trash);const i=e.findIndex(e=>e.id===s.id);if(i>=0){e=t.filter(e=>e.parentId===this.props.rootId||!0===e.trash);const a=e.length-1,s=e[Math.min(i,a)];this.selectById(s.id)}else{const e=t.length-1,i=t[Math.min(a,e)];this.selectById(i.id)}}}).catch(()=>{})}return Promise.resolve()}),x(this,"onKeyCtrlUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(0===a)return;const i=-1===a?this.state.renderedArray.length-1:a-1;if(i<0)return;const s=this.state.renderedArray[i];this.SelectionMixinSetLead(s.id),this.scrollIntoView(i)})),x(this,"onKeyCtrlDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(a===this.state.renderedArray.length-1)return;const i=a+1,s=this.state.renderedArray[i];this.SelectionMixinSetLead(s.id),this.scrollIntoView(i)})),x(this,"onKeyArrowDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(a!==this.state.renderedArray.length-1){if(!0===e.altKey)this.moveNode(this.state.renderedArray[a],!1);else{const t=a+1,i=this.state.renderedArray[t];this.selectById(i.id,e,t,"keyboard")}e.preventDefault(),e.stopPropagation()}})),x(this,"onKeyArrowUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(0!==a){if(!0===e.altKey)this.moveNode(this.state.renderedArray[a],!0);else{const t=-1===a?this.state.renderedArray.length-1:a-1;if(t<0)return;const i=this.state.renderedArray[t];this.selectById(i.id,e,t,"keyboard")}e.preventDefault(),e.stopPropagation()}})),x(this,"onKeyEscUp",e=>{this.selectionModel.setSelectedIds([])}),x(this,"onKeyHome",e=>{const t=this.state.renderedArray[0];this.selectById(t.id,e,0,"keyboard"),e.preventDefault(),e.stopPropagation()}),x(this,"onKeyEnd",e=>{const t=this.state.renderedArray.length,a=this.state.renderedArray[t-1];this.selectById(a.id,e,t-1,"keyboard"),e.preventDefault(),e.stopPropagation()}),x(this,"onKeyPageDown",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t),i=this.state.renderedArray.length;if(a===i-1)return;const s="function"==typeof this.props.rowHeight?this.props.rowHeight({index:a}):this.props.rowHeight||24;let n=s>0?Math.floor(this.state.height/s):0;n<1&&(n=1);let r=a+n;r>=i&&(r=i-1);const o=this.state.renderedArray[r];this.selectById(o.id,e,r,"keyboard"),e.preventDefault(),e.stopPropagation()})),x(this,"onKeyPageUp",h.a.throttleSync(e=>{const t=this.selectionModel.leadIndex,a=this._findTreeIndex(t);if(0===a)return;const i="function"==typeof this.props.rowHeight?this.props.rowHeight({index:a}):this.props.rowHeight||24;let s=i>0?Math.floor(this.state.height/i):0;s<1&&(s=1);let n=-1===a?this.state.renderedArray.length-1:a-s;n<0&&(n=0);const r=this.state.renderedArray[n];this.selectById(r.id,e,n,"keyboard"),e.preventDefault(),e.stopPropagation()})),x(this,"onKeyShiftDelete",e=>{this.onKeyDelete(e,!0)}),x(this,"onKeyDelete",(e,t=!1)=>{this.onDelete(t),e.preventDefault(),e.stopPropagation()}),x(this,"onKeySelectAll",()=>{this.SelectionMixinSelectAll(),this.saveSelectionModel()}),x(this,"onKeyCtrlSpace",e=>{const t=this.selectionModel.leadIndex;this.SelectionMixinSelectItem(t,e.ctrlKey,e.shiftKey,e.metaKey,"contextmenu"===e.type)}),x(this,"_setExpandState",(e,t)=>{if(this.state.expandModel&&this.selectionModel.isSingleItemSelected){const e=this.findTreeItem(this.selectionModel.leadIndex);e&&(e.isExpanded&&!t||!e.isExpanded&&t)&&this.toggleExpandModel(this.selectionModel.FirstSingleItemSelected)}e.preventDefault(),e.stopPropagation()}),x(this,"_collapseFolderOrSelectParent",e=>{const t=this.getSelectedItem();if(t&&!0===this.isfolderAndHasItems(t)&&t.isExpanded)this._setExpandState(e,!1);else{const e=this.selectionModel.leadIndex;if(e){const t=this._findTreeIndex(e);if(t){const e=this.state.renderedArray[t].level;for(let a=t-1;a>=0;a--){const t=this.state.renderedArray[a];if(t.level<e){this.selectById(t.id);break}}}}}}),x(this,"expandToId",e=>{let t=this.findTreeItem(e);for(;t;)t=this.findTreeItem(t.parentId),t&&this.isFolder(t)&&!t.isExpanded&&this.toggleExpandModel(t.id)}),x(this,"_expandFolder",e=>{const t=this.getSelectedItem();t&&!0===this.isfolderAndHasItems(t)&&this._setExpandState(e,!0)}),x(this,"unSelectAll",()=>{this.selectById(-1,void 0,void 0,"mouse")}),x(this,"isItemLead",e=>e===this.selectionModel.leadIndex),x(this,"isItemSelected",e=>this.selectionModel.isSelected(e)),x(this,"supportDropForItem",(e,t)=>this.props.getDropSupport?this.props.getDropSupport(e,t):{available:!1,onto:!1,edge:!1}),x(this,"onDragLeaveItem",(e,t)=>{this.cancelDragOverObject(),this.resetAutoExpandTimer()}),x(this,"onDragOverItem",(e,t,a)=>{const i=a.currentTarget;if(!this.supportDropForItem(e,a).available)return;const s=i.getBoundingClientRect(),n="function"==typeof this.props.rowHeight?this.props.rowHeight({index:e.treeIndex}):this.props.rowHeight||24,r=(a.clientY-s.top)/n;let o="";!0===t.onto?o=r<=.25?t.edge?"above":"on":r>.75&&t.edge?"below":"on":t.edge&&(r<=.5?o="above":r>.5&&(o="below")),(this.state.dragOverObj.id!==e.id||this.state.dragOverObj.id===e.id&&this.state.dragOverObj.position!==o)&&this.setState({dragOverObj:{id:e.id,position:o}},this.initAutoExpandTimer(e,o))}),x(this,"initAutoExpandTimer",(e,t)=>{e.isExpanded||!this.props.isFolder(e)||"on"!==t?this.resetAutoExpandTimer():this.expandId!==e.id&&(this.resetAutoExpandTimer(),this.expandId=e.id,this.expandTimer=setTimeout(this.onAutoExpandTimer,1200))}),x(this,"resetAutoExpandTimer",()=>{this.expandTimer&&(clearTimeout(this.expandTimer),this.expandTimer=void 0,this.expandId=-1)}),x(this,"onAutoExpandTimer",()=>{-1!==this.expandId&&(this.state.dragOverObj.id===this.expandId&&"on"===this.state.dragOverObj.position&&this.toggleExpandModel(this.expandId),this.resetAutoExpandTimer())}),x(this,"onDragEmptyArea",e=>{if(this.state.renderedArray.length>0){const t=this.state.renderedArray[this.state.renderedArray.length-1];this._dropSupport=this.supportDropForItem(t,e),this._dropSupport.available&&this._dropSupport.edge&&(e.preventDefault(),e.nativeEvent.dataTransfer.dropEffect="move",this.state.dragOverObj.id!==t.id&&"below"!==this.state.dragOverObj.position&&this.setState({dragOverObj:{id:t.id,position:"below"}}))}e.stopPropagation()}),x(this,"onDropEmptyArea",e=>{if(this.resetAutoExpandTimer(),this.state.renderedArray.length>0&&this._dropSupport.available){const t=this.state.renderedArray[this.state.renderedArray.length-1];this.onDrop(t,this._dropSupport,e),this._dropSupport={available:!1,onto:!1,edge:!1}}e.preventDefault(),e.stopPropagation()}),x(this,"onDrop",(e,t,a)=>{this.resetAutoExpandTimer();const i=n.a.isCopyModifierPressed(a),s=this.state.dragOverObj.position,{mimeType:r}=this.props;switch(s){case"above":case"below":if(!1===t.edge)return void this.cancelDragOverObject();break;case"on":if(!1===t.onto)return void this.cancelDragOverObject();break;default:return void this.cancelDragOverObject()}let o;if(r&&a.dataTransfer&&-1!==a.dataTransfer.types.findIndex(e=>e===r)?o=JSON.parse(a.dataTransfer.getData(r)):this.props.onDrop&&this.props.onDrop(a,e,s).then(e=>{this.cancelDragOverObject(),e&&e.length>0&&this.selectById(e[0].id)}),!o||o.length<=0)return void this.cancelDragOverObject();const l=this.props.isFolder(e);let c=!1,d={id:e.id,index:0,parentId:void 0};this.props.getTargetSpec?d=this.props.getTargetSpec(e,s):"above"===s?(d.index=parseInt(e.index),d.parentId=e.parentId):"on"===s?d.parentId=l?e.id:e.parentId:"below"===s&&(e.isExpanded?d.parentId=e.id:(d.index=parseInt(e.index)+1,d.parentId=e.parentId));const u=o.map(t=>{if(t===e.id)return void(c=!0);const a=this.findTreeItem(t);if(i||!this.props.isFolder(a)||!a||!this.findItemInFolder(a,e.id))return a;c=!0}).filter(e=>null!==e);if(c||u.length<=0)this.cancelDragOverObject();else if(i){const e=Object(k.a)(u);this.props.onCreate&&this.props.onCreate(e,d.parentId,d.index,!1).then(this.cancelDragOverObject())}else{const e=u.map(e=>e.id);this.props.onMove&&this.props.onMove(e,d.parentId,d.index,s).then(()=>{this.cancelDragOverObject()})}}),x(this,"cancelDragOverObject",()=>{this.setState({dragOverObj:M})}),x(this,"onDragEndItem",()=>{this.cancelDragOverObject()}),x(this,"onCompositionStart",()=>{this._isComposing=!0}),x(this,"onCompositionEnd",()=>{this._isComposing=!1}),x(this,"onKeyDown",e=>{const t=Object(D.c)(e);if(this.stopInlineEditTimer(),-1!==this.state.inlineEditId)return void("Escape"===e.key&&t?(e.preventDefault(),this.cancelInlineEdit(()=>this.focusTree())):"Enter"!==e.key||this._isComposing?"F2"===e.key&&e.preventDefault():(e.preventDefault(),this.saveInlineEdit(()=>this.focusTree())));if("Escape"===e.key&&t)this.setCutIds([]),e.preventDefault();else if(this.props.supportsInlineEdit&&"F2"===e.key){const t=!0===this.props.supportsInlineEdit?this.getSelectedItem():void 0;if(t){return void(this.startInlineEdit(t.id)&&e.preventDefault())}}let a=!1;if(this.props.onItemsActivated&&"Enter"===e.key){if(!1===e.repeat){const t=this.getAllSelectedItems();t&&this.props.onItemsActivated&&this.props.onItemsActivated(e,t)}a=!0,e.preventDefault()}var i=r.a.keyComboFromEvent(e.nativeEvent),s=this.getKeyEventMap()[i];s&&s(e.nativeEvent),!a&&this.props.onKeyDown&&this.props.onKeyDown(e)}),x(this,"startInlineEditTimerForId",e=>{this.stopInlineEditTimer(),!0===this.props.supportsInlineEdit&&(this.inlineEditTimeoutId=setTimeout(this.startInlineEdit.bind(this,e),700))}),x(this,"stopInlineEditTimer",()=>{-1!==this.inlineEditTimeoutId&&(clearTimeout(this.inlineEditTimeoutId),this.inlineEditTimeoutId=-1)}),x(this,"startInlineEditForSelectedItem",()=>{const e=this.selectionModel.FirstSingleItemSelected;-1!==e&&this.startInlineEdit(e)}),x(this,"startInlineEdit",e=>{const t=this.selectionModel.selectedIds;if(1===t.length&&t[0].id===e){const t=this.state.renderedArray.filter(t=>t.id===e);if(1===t.length&&this.props.isValidToEdit&&this.props.isValidToEdit(t[0].id))return this.setState({inlineEditId:e,inlineEditText:this.props.getTitle?this.props.getTitle(e):""}),!0}return!1}),x(this,"getInlineEditId",()=>-1===this.state.inlineEditId?void 0:this.state.inlineEditId),x(this,"setInlineEditText",e=>{this.setState({inlineEditText:e})}),x(this,"cancelInlineEdit",e=>{this.setState({inlineEditId:-1,inlineEditText:""},e)}),x(this,"saveInlineEdit",e=>{-1!==this.state.inlineEditId&&this.props.saveTitle&&(this.props.saveTitle(this.state.inlineEditId,this.state.inlineEditText),this.setState({inlineEditId:-1,inlineEditText:""},e))}),x(this,"onRowsRendered",e=>{this.props.onRowsRendered&&(this.props.onRowsRendered(e),w.a.set({[this._onRowsRenderedOptions]:e})),this.updateScrollTop()}),x(this,"updateScrollTop",()=>{if(this._scrollTopNeedsUpdate){this._scrollTopNeedsUpdate=!1;const e=w.a.getSync(this._scrollTopSettings);this.refs.treeListEntries.scrollToPosition(e)}}),x(this,"onScroll",Object(I.a)(e=>{const{scrollTop:t}=e;this._scrollTopSettings&&w.a.set({[this._scrollTopSettings]:t})},500)),x(this,"getSelectedItem",()=>this.findTreeItem(this.selectionModel.leadIndex)),x(this,"isFolder",e=>e&&this.props.isFolder(e)),x(this,"isfolderAndHasItems",e=>e.children&&e.children.length>0),x(this,"getSelected",()=>this.selectionModel.FirstSingleItemSelected),x(this,"getRenderedItems",(e,t,a)=>{const i=[];if(!e||0===e.length)return i;e=this.sortItems(e,a);const s=a&&a.sortOrder!==E.a.NO_SORTING,n=e=>{s&&this.props.isSeparator&&this.props.isSeparator(e)||(i.push(e),e.children&&("0"===e.id||(t&&this.props.expandedByDefault?!1!==t[e.id]:t[e.id]))&&e.children.forEach(n))};return e.forEach(n),i}),x(this,"canSort",e=>e&&e.sortOrder&&e.sortOrder!==E.a.NO_SORTING),x(this,"sortItems",(e,t)=>{if(!t||!this.canSort(t))return e;!1!==this.props.supportsDeepCopy&&(e=Object(k.a)(e));const a=t.comparator||E.a.getDefaultComparator(t.sortOrder,t.sortField);return E.a.treeSort(e,a),e}),x(this,"getSelectedFromTree",()=>{const e=[],t=function(a,i){for(let s=0;s<i.length;s++){const n=i[s];a.selectionModel.isSelected(n.id)?e.push(n):n.children&&t(a,n.children)}};return t(this,this.props.nodes),e}),x(this,"getAllSelectedItems",()=>{const e=this.selectionModel.selectedIds;if(0===e.length)return e;if(e.length>1&&!this.canSort(this.props.sorting))return this.getSelectedFromTree();const t=function(e,a){for(let i=0;i<e.length;i++){let s=e[i];if(s.id===a)return s;if(s.children&&(s=t(s.children,a),s))return s}},a=e.map(e=>t(this.props.nodes,e.id)).filter(e=>void 0!==e);return this.sortItems(a,this.props.sorting)}),x(this,"findTreeItem",e=>{let t=null;const a=i=>{if(i.id===e)return t=i;i.children&&i.children.forEach(a)};return this.props.nodes.forEach(a),t}),x(this,"findItemInFolder",(e,t)=>{let a=null;const i=e=>{if(e.id===t)return a=e;e.children&&e.children.forEach(i)};return e.children.forEach(i),a}),x(this,"getIdsBetween",(e,t)=>{const a=this._findTreeIndex(e),i=this._findTreeIndex(t);let s=[];return s=a>i?this.state.renderedArray.slice(i,a+1):this.state.renderedArray.slice(a,i+1),s.map(e=>e.id)}),x(this,"getAllIds",()=>this.state.renderedArray.map((e,t)=>e.id||t)),x(this,"getSearchStyle",()=>{let e=w.a.getSync(this._searchStyleSettings);return void 0===e&&(e="tree"),e}),x(this,"setSearchStyle",e=>{const t={};t[this._searchStyleSettings]=e,w.a.set(t,()=>{this.props.onSearchStyleChanged&&this.props.onSearchStyleChanged(e)})}),x(this,"getContextMenuItemsPromise",e=>this.props.getContextMenuItemsPromise?this.props.getContextMenuItemsPromise(e).then(t=>this.appendStandardMenuItems(e,t)):Promise.resolve([])),x(this,"getContextMenuItems",e=>{const t=this.props.getContextMenuItems?this.props.getContextMenuItems(e):[];return this.appendStandardMenuItems(e,t)}),x(this,"appendStandardMenuItems",(e,t)=>{const a=this.props.getContextMenuItemProps?this.props.getContextMenuItemProps(e):{},i=()=>{t.length>0&&(t=t.concat([{name:"---"}]))};if((a.showNewItem||a.showNewFolder||a.showNewSeparator||a.showEdit||a.showMoveUp||a.showMoveDown||a.showRename)&&(i(),a.showNewItem&&t.push({handler:()=>{this.onAdd(!1)},testVisibility:()=>a.showNewItem,...this.props.getContextMenuNewItemString?this.props.getContextMenuNewItemString():{label:"",labelEnglish:""}}),a.showNewFolder&&t.push({handler:()=>{this.onAdd(!0)},testVisibility:()=>a.showNewFolder,...Object(y.a)("command","New Folder")}),a.showNewSeparator&&t.push({handler:()=>{this.onAdd(!1,{separator:!0})},testVisibility:()=>a.showNewSeparator,...Object(y.a)("New Separator")}),(a.showEdit||a.showRename)&&i(),a.showEdit&&t.push({handler:()=>{this.props.onEdit&&this.props.onEdit()},testVisibility:()=>a.showEdit,...Object(y.a)("verb","Edit")}),a.showRename&&t.push({handler:()=>this.startInlineEditForSelectedItem(),testVisibility:()=>a.showRename,...Object(y.a)("Rename")}),(a.showMoveUp||a.showMoveDown)&&(i(),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!0)},testVisibility:()=>a.showMoveUp,...Object(y.a)("Move Up")}),t.push({handler:()=>{const e=this.getSelectedItem();e&&this.moveNode(e,!1)},testVisibility:()=>a.showMoveDown,...Object(y.a)("Move Down")}))),a.showCut||a.showCopy||a.showPaste){i();const{document:e}=this.context;t=t.concat([{handler:()=>{e.execCommand("cut")},visible:!0===a.showCut,...Object(y.a)("verb","Cut")},{handler:()=>{e.execCommand("copy")},visible:!0===a.showCopy,...this.props.getContextMenuCopyString?this.props.getContextMenuCopyString():Object(y.a)("verb","Copy")},{handler:()=>{e.execCommand("paste")},visible:!0===a.showPaste,...Object(y.a)("verb","Paste")}])}if((a.showSave||a.showSaveAll)&&(i(),a.showSave&&(t=t.concat([{handler:()=>{this.onSave()},...this.props.getContextMenuSaveString?this.props.getContextMenuSaveString():Object(y.a)("verb","Save")}])),a.showSaveAll&&(t=t.concat([{handler:()=>{this.onSaveAll()},...this.props.getContextMenuSaveAllString?this.props.getContextMenuSaveAllString():Object(y.a)("verb","Save All")}]))),(a.showExport||a.showExportAll)&&(i(),a.showExport&&(t=t.concat([{handler:()=>{this.onExport()},...this.props.getContextMenuExportString?this.props.getContextMenuExportString():Object(y.a)("verb","Export")}])),a.showExportAll&&(t=t.concat([{handler:()=>{this.onExportAll()},...this.props.getContextMenuExportAllString?this.props.getContextMenuExportAllString():Object(y.a)("verb","Export All")}]))),a.showDelete&&(i(),t.push({handler:()=>{this.onDelete(!1)},...this.props.getContextMenuDeleteString?this.props.getContextMenuDeleteString():Object(y.a)("verb","Delete")})),a.showExpandCollapse&&(i(),t=t.concat([{handler:this.expandAll,...Object(y.a)("Expand All Folders")},{handler:this.collapseAll,...Object(y.a)("Collapse All Folders")}])),a.showImport&&(i(),t.push({handler:this.onImport,ellipsis:!0,...this.props.getContextMenuImportString?this.props.getContextMenuImportString():Object(y.a)("Import")})),a.showSettings){i();const e=this.getSearchStyle();t=t.concat([{items:[{type:"checkbox",checked:"flat"===e,handler:this.setSearchStyle.bind(this,"flat"),...Object(y.a)("Flat Search")},{type:"checkbox",checked:"tree"===e,handler:this.setSearchStyle.bind(this,"tree"),...Object(y.a)("Tree Search")}],...Object(y.a)("Settings")}])}return a.showCustomSettings&&(i(),this.props.addCustomSettingMenu&&(t=t.concat([this.props.addCustomSettingMenu()]))),a.showFullscreen&&(i(),t=t.concat([{handler:()=>S.a.toggleFullscreen(this.context.vivaldiWindowId),...Object(y.a)("Fullscreen")}])),t}),x(this,"onResize",e=>{const t=e[0].contentRect;this.updateTreeSize(t.width,t.height)}),x(this,"updateTreeSize",(e,t)=>{this._isMounted&&this.setState({width:e,height:t})}),x(this,"onContextMenu",async e=>{const t=this.getSelectedItem();let a;e.preventDefault(),e.stopPropagation(),this.props.getContextMenuItemsPromise?(e.persist(),a=await this.getContextMenuItemsPromise(t)):a=this.getContextMenuItems(t),Object(C.a)(this.context.vivaldiWindowId,a,this.onContextMenuOpen(e,t))(e)}),x(this,"renderTreeItem",e=>{const{key:t,index:a,style:s}=e,n=this.state.renderedArray[a];n.treeIndex=a,void 0===n.id&&(n.id=a);const r=this.selectionModel.isSelected(n.id),o=this.selectionModel.leadIndex===n.id,l=this.props.cutIds&&this.props.cutIds.indexOf(n.id)>-1;let c=!1;!0===r&&(c=this.state.hasFocus||n.id===this.state.inlineEditId);let d=this.props.enableDragAndDrop&&this.state.inlineEditId!==n.id;return d&&this.props.isValidDragSource&&(d=this.props.isValidDragSource(n)),i.createElement(v,{key:t,index:a,treeItem:n,style:s,isExpanded:n.isExpanded,isSeparator:this.props.isSeparator,childCount:n.children?n.children.length:0,toggle:this.toggleExpandModel,onContextMenu:this.onContextMenu,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,selected:r,hasFocus:c,lead:o,isCut:l,validateForDrag:this.props.validateForDrag,onDragStart:this.stopInlineEditTimer,supportDrop:this.props.enableDragAndDrop?this.supportDropForItem:null,onDragLeave:this.props.enableDragAndDrop?this.onDragLeaveItem:null,onDragOver:this.props.enableDragAndDrop?this.onDragOverItem:null,onDragEnd:this.onDragEndItem,onDrop:this.onDrop,mimeType:this.props.mimeType,getDragData:this.props.getDragData,setCustomDragData:this.props.setCustomDragData,dragover:this.state.dragOverObj.id===n.id,dragOverObj:this.state.dragOverObj,inlineEditText:this.state.inlineEditId===n.id?this.state.inlineEditText:void 0,setInlineEditText:this.setInlineEditText,onInlineEditBlur:this.saveInlineEdit,getAllSelectedItems:this.getAllSelectedItems,isFolder:this.props.isFolder,isDraggable:d,hasChildren:this.props.hasChildren,renderItemContent:this.props.renderItemContent,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,enableDragAndDrop:this.props.enableDragAndDrop,__source:{fileName:P,lineNumber:2549}})});let t={};"always"===e.defaultFolderExpansion?t=this.getAllFoldersExpandedModel(e.nodes):(e.settings&&(t=w.a.getSync("EXPAND_"+e.settings),t||"fallback"!==e.defaultFolderExpansion||(t=this.getAllFoldersExpandedModel(e.nodes)),t||(t={})),this.prepareNodesForRender(e.nodes,t));const{multiSelect:a}=e;this.selectionModel=new d(a),this.state={dragOverObj:M,hasFocus:!1,expandModel:t,renderedArray:this.getRenderedItems(e.nodes,t,e.sorting),inlineEditId:-1,inlineEditText:"",width:0,height:("number"==typeof e.rowHeight?e.rowHeight:24)*e.nodes.length,isDeleting:!1}}UNSAFE_componentWillMount(){this._updateSelectionStateIfNeeded(this.props)}componentDidMount(){const{selectionStoreKey:e}=this.props;if(e){if(u.has(e))throw new Error(`Key ${e} has already been set in\n          SelectionStore. VivaldiTreeList expects instances using\n          selectionStoreKey props to be singleton.`);u.set(e,this.selectionModel)}this._initializeSettings(this.props),this._isMounted=!0;const t=l.a.findDOMNode(this);if(t){t.addEventListener("focus",this.onGotFocus,!0);const e=t.parentElement;e&&this.updateTreeSize(e.clientWidth,e.clientHeight)}}UNSAFE_componentWillReceiveProps(e){if(this.props.multiSelect!==e.multiSelect&&(this.selectionModel.multiSelect=Boolean(e.multiSelect)),e.settings!==this.props.settings)this._initializeSettings(e),this._updateSelectionStateIfNeeded(e),this.updateScrollTop();else{let t={};if(Object.keys(this.state.expandModel).length>0&&"always"===this.props.defaultFolderExpansion&&!this.state.isDeleting){const a=this.getAllFoldersExpandedModel(e.nodes);t=Object.assign(a,this.state.expandModel)}else t=this.state.expandModel;!0===this.state.isDeleting&&this.setState({isDeleting:!1}),this.prepareDataForRender(e.nodes,t,e.sorting)}}componentDidUpdate(e,t){if(this.state.renderedArray.length===t.renderedArray.length)this.rerenderVisibleTreeItems();else if(e.columns!==this.props.columns){(e.columns&&e.columns.flatMap(e=>e.id).join())!==(this.props.columns&&this.props.columns.flatMap(e=>e.id).join())&&this.rerenderVisibleTreeItems()}}componentWillUnmount(){this.enableCutCopyPasteListeners(!1),this.stopInlineEditTimer(),this.resetAutoExpandTimer(),this._isMounted=!1;const e=l.a.findDOMNode(this);e&&e.removeEventListener("focus",this.onGotFocus,!0);const{selectionStoreKey:t}=this.props;t&&u.get(t)===this.selectionModel&&u.delete(t)}render(){const e=this.props.columns&&Object(A.b)(this.props.columns),t=b()(this.props.className,{"vivaldi-tree":!this.props.className,"no-selection":-1===this.selectionModel.anchorIndex});return i.createElement(c.a,{style:{"--gridColumns":e},className:t,onBlur:this.onLostFocus,onKeyDown:this.onKeyDown,onDragOver:this.props.enableDragAndDrop?this.onDragEmptyArea:null,onDragLeave:this.props.enableDragAndDrop?this.cancelDragOverObject:null,onDrop:this.props.enableDragAndDrop?this.onDropEmptyArea:null,onClick:this.unSelectAll,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,onContextMenu:this.onContextMenu,onResize:this.onResize,__source:{fileName:P,lineNumber:2619}},i.createElement(T.a,{ref:"treeListEntries",onRowsRendered:this.onRowsRendered,onScroll:this.onScroll,width:this.state.width,height:this.state.height,rowHeight:this.props.rowHeight||24,rowRenderer:this.renderTreeItem,rowCount:this.state.renderedArray.length,overscanRowCount:this.props.overscanRowCount||10,onScrollbarPresenceChange:this.props.onScrollbarPresenceChange,__source:{fileName:P,lineNumber:2634}}))}}x(L,"contextType",p.a),x(L,"defaultProps",{enableDragAndDrop:!0,rowHeight:24});t.a=L},function(e,t,a){"use strict";var i=a(39),s=a(37),n=a(22),r=a(40),o=a(9),l=a(83),c=a(20);const d={onAction:function(e){const t=function(e,t){s.a.copy(t,[e])},a=function(e,t){s.a.cut(t,[e])},i=function(e,t){s.a.pasteWithPromise(t,e,!0)},l=n.a.getItemById(e.id);if(l)switch(e.command){case"addactivetab":n.a.isFolder(l)?s.a.bookmarkPageInFolder(o.a.getActivePage(),l.id):s.a.bookmarkPageInFolder(o.a.getActivePage(),l.parentId,l.index+1);break;case"edit":r.a.showBookmarkDialog({mode:e.command,id:e.id,index:-1});break;case"addfolder":case"addbookmark":r.a.showBookmarkDialog({mode:e.command,id:e.id,index:l.index+1});break;case"cut":const c=a.bind(null,e.id);document.addEventListener("cut",c),document.execCommand("cut"),document.removeEventListener("cut",c);break;case"copy":const d=t.bind(null,e.id);document.addEventListener("copy",d),document.execCommand("copy"),document.removeEventListener("copy",d);break;case"paste":const u=i.bind(null,e.id);document.addEventListener("paste",u),document.execCommand("paste"),document.removeEventListener("paste",u)}},onHover:function(e){l.a.setStatus(c.a.getHoverUrl(n.a.filterUrl(e)))},onOpen:function(e){const t=n.a.getItemById(e.id);if(t){const a=i.a.getOpenOptionsFromDisposition(e.disposition,e.background,i.a.makeEventFlagsFromApiResponse(e.state));a.bookmarks=i.a.getBookmarksByNode(t),i.a.open(a,!0)}}};t.a=d},,,,function(e,t,a){"use strict";t.a=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},function(e,t,a){"use strict";var i=a(62),s=a(10),n=a(2),r=a(7),o=a(1);let l=void 0;const c={preferCamelCaseMnemonic:()=>0===r.default.i18n.getUILanguage().indexOf("en"),appendMnemonic:()=>(void 0===l&&(l=["ja","zh-CN","zh-TW","ja","ko"].indexOf(r.default.i18n.getUILanguage())>-1),l),ellipsisString:()=>Object(n.a)("..."),getShortcutsForMenuItems(e){const t=Object.keys(i.default.getCommandShortcuts()).filter(e=>e.includes("alt+")&&5===e.length),a=!s.a.get(o.kKeyboardShortcutsAltOpensMenu),n=[],r=[];let l,c;for(let t=0;t<e.length;t++){const a=e[t];if(void 0!==a.name&&"---"!==a.name&&!1!==a.mnemonic){const e=a.name.indexOf("&");-1!==e&&e+1<a.name.length&&(l=a.name.toUpperCase().charCodeAt(e+1),-1===n.indexOf(l)&&n.push(l))}}for(let i=0;i<e.length;i++){const s=e[i],o=this.appendMnemonic()?s.englishName:s.name;if(void 0===o||"---"===s.name||!1===s.mnemonic||!0===a){r.push({index:i});continue}let d="";if(n.length>0){const e=o.indexOf("&");if(-1!==e&&e+1<o.length){l=o.toUpperCase().charCodeAt(e+1),c=String.fromCharCode(l).toLowerCase(),d="alt+"+c,t.includes(d)?r.push({index:i,keyCode:l,key:c,mnemonicOffset:e}):(r.push({index:i,shortcut:d,keyCode:l,key:c,mnemonicOffset:e}),t.push(d));continue}}let u=!1,h=0;for(;!u;)if(l=o.toUpperCase().charCodeAt(h),-1===n.indexOf(l))if(c=String.fromCharCode(l).toLowerCase(),d="alt+"+c,t.includes(d)){if(o.length===h+1)break;h+=1}else u=!0;else{if(o.length===h+1)break;h+=1}u?(r.push({index:i,shortcut:d,keyCode:l,key:c,mnemonicOffset:h}),t.push(d)):r.push({index:i})}return r},findNextFreeCharacter(e,t,a,i,s){let n=0;for(;-1!==n;){const s=t.charAt(n),r=s.toUpperCase();if(-1!==i.indexOf(s)&&-1===e.indexOf(r)&&(0!==n&&!0!==a||s===r))return n;n=t.indexOf(" ",n+1),-1!==n&&n++}for(let a=0;a<t.length;a++){const s=t.charAt(a);if(-1!==i.indexOf(s)&&-1===e.indexOf(s.toUpperCase()))return a}if(!s)return this.findNextFreeCharacter("",t,a,i,!0)},installEllipsis(e){return e.forEach(e=>{e.items?this.installEllipsis(e.items):e.ellipsis&&(e.name+=this.ellipsisString())}),e},installMnemonics(e,t){const a=Object(n.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefhiklmnorstuvwxz"),i=this.preferCamelCaseMnemonic(),s=this.appendMnemonic();var r="";for(let a=0;a<e.length;a++){const i=e[a];if(void 0===i.name&&(i.name=i.label,i.englishName=i.labelEnglish),void 0!==i.name)if(i.ellipsis&&(i.name+=this.ellipsisString()),"---"!==i.name&&!1!==i.mnemonic)if(t&&t.length>a){const e=s?i.englishName:i.name;let n=t[a].mnemonicOffset;void 0!==n&&n+1<=i.name.length?("&"===i.name[n]?i.nameWithMnemonic=i.name:i.nameWithMnemonic=s?i.name+" (&"+e.charAt(n).toUpperCase()+")":i.name.slice(0,n)+"&"+i.name.slice(n),r+=i.name.charAt(n+1).toUpperCase()):(n=i.name.indexOf("&"),i.nameWithMnemonic=-1!==n?i.name:void 0)}else{const e=i.name.indexOf("&");-1!==e&&e+1<i.name.length?(i.nameWithMnemonic=i.name,r+=i.name.charAt(e+1).toUpperCase()):i.nameWithMnemonic=void 0}else if(!1===i.mnemonic){-1!==i.name.indexOf("&")&&(i.nameWithMnemonic=i.name.replace(/\&/g,"&&"))}}for(let t=0;t<e.length;t++){const n=e[t],o=s?n.englishName:n.name;if(void 0!==o&&"---"!==n.name&&!1!==n.mnemonic&&void 0===n.nameWithMnemonic){const e=this.findNextFreeCharacter(r,o,i,a,!1);e>=0&&(r+=o.charAt(e).toUpperCase(),n.nameWithMnemonic=s?n.name+" (&"+o.charAt(e).toUpperCase()+")":n.name.slice(0,e)+"&"+n.name.slice(e))}n.items&&this.installMnemonics(n.items,null)}},getMenuBarString(e,t){let a=this.appendMnemonic()?e.englishName:e.name,i=void 0===t.mnemonicOffset?-1:t.mnemonicOffset;return!a&&this.appendMnemonic()&&(a=e.name,i=-1),this.appendMnemonic()&&(-1!==i?(a=e.name+" ("+a.charAt(i).toUpperCase()+")",i=a.length-2):a=e.name),{name:a,offset:i}}};t.a=c},function(e,t,a){"use strict";var i=a(5),s=a(304);const n=e=>[e.name,e.value];let r=[];const o={};async function l(){const e=await new Promise(e=>{i.a.runtimePrivate.getAllFeatureFlags(t=>{r=t,e(Object(s.a)(t.map(n)))})});Object.assign(o,e)}t.a={loadPromise:l,isEnabled:function(e){return!!o.hasOwnProperty(e)&&"true"===o[e]},enableFeature:function(e,t){return o.hasOwnProperty(e)?function(e,t){return new Promise((a,s)=>{i.a.runtimePrivate.setFeatureEnabled(e,t,t=>{t?a():s(`Enabling feature failed: ${e}`)})})}(e,t).then(l):Promise.reject()},getFlags:function(){return r}}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));const i=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=(e=e.replace(/left/g,"←").replace(/right/g,"→").replace(/up/g,"↑").replace(/down/g,"↓")).replace(/(^|\+)(\w)/g,e=>e.toUpperCase())),e),s=e=>(e&&e.constructor===Array&&(e=e.join(", ")),e&&(e=e.replace(/(^|\+)(\w)/g,e=>e.toUpperCase())),e)},,function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return r}));const i="vivaldiStartDragging",s="vivaldiEndDragging",n="vivaldiMinimizeWindow",r="webPanelTitleChanged"},function(e,t,a){"use strict";var i=a(11),s=a(4);var n=new class{setBackgroundTasks(e){i.a.dispatch({actionType:s.a.BACKGROUND_TASKS_SET,tasks:e})}},r=function(e,t,a,i,s,n){this.id=e,this.title=a,this.description=s,this.menuItems=n,this.progress=0,this.text=t},o=a(2);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=new class{constructor(){l(this,"pendingEntries",[]),l(this,"activeEntries",[]),l(this,"tasks",[]),l(this,"add",(e,t,a)=>{this.pendingEntries.push({id:e,url:t,callback:a})}),l(this,"run",()=>{for(;;){if(this.activeEntries.length>=1)return;if(0===this.pendingEntries.length)return void(0===this.activeEntries.length&&(this.removeFromArrayById("thumbnailCapture",this.tasks),n.setBackgroundTasks(this.tasks)));const e=this.pendingEntries.shift();this.activeEntries.push(e);let t=this.getFromArrayById("thumbnailCapture",this.tasks);t||(t=new r("thumbnailCapture","","Thumbnail Capture","",[{name:Object(o.a)("Cancel"),handler:function(){this.pendingEntries=[]}.bind(this)}]),this.tasks.push(t)),t.title=Object(o.a)("Updating thumbnail for $1",[e.url]),t.description=Object(o.a)("$1 bookmark waiting for update.","$1 bookmarks waiting for update.",[this.pendingEntries.length]),t.text=this.pendingEntries.length+this.activeEntries.length,n.setBackgroundTasks(this.tasks),e.callback.call(null,e.id,e.url)}}),l(this,"onLoaded",e=>{this.removeFromArrayById(e,this.activeEntries),this.run()}),l(this,"contains",e=>this.isInArrayById(e,this.pendingEntries)||this.isInArrayById(e,this.activeEntries)),l(this,"getFromArrayById",(e,t)=>t.find(t=>t.id===e)),l(this,"isInArrayById",(e,t)=>t.length&&void 0!==this.getFromArrayById(e,t)),l(this,"removeFromArrayById",(e,t)=>{const a=t.findIndex(t=>t.id===e);-1!==a&&t.splice(a,1)})}},d=a(7),u=a(5),h=a(20);let m=0;const p=new Map,g={getPageThumbnail(e,t,a){m>4||(m++,e.getThumbnail(b(t),e=>{m--,d.default.runtime.lastError?a(void 0):a(e||void 0)}))},updateBookmark(e){this.updateBookmarks([e])},updateBookmarks(e){for(const t of e){const e=t.url;e&&!c.contains(t.id)&&(c.add(t.id,h.a.getUrl(e),f),_(t.id))}c.run()},linkAndQueryUpdatingBookmark:(e,t)=>t?(p.set(e,t),c.contains(t)):(p.delete(e),!1),unlinkBookmarkComponent(e){p.delete(e)}},b=e=>e.compact?{width:330,height:270}:{width:440,height:360},f=(e,t)=>{const a={bookmarkId:e,url:t,width:1024,height:838,scaledWidth:440,scaledHeight:360};u.a.thumbnails.captureUrl(a,t=>{c.onLoaded(e),_(e)})};function _(e){for(const[t,a]of p)a===e&&t.forceUpdate()}t.a=g},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}));var i=a(16);const s={openInBackgroundTab:{inCurrent:!1,inBackground:!0,inNewWindow:!1,allowOverride:!1,incognito:!1}};function n(e){const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},a=t.ctrl,s=!t.shift&&!a&&!t.alt,n={inCurrent:!0,inBackground:!1,inNewWindow:!1,allowOverride:!1,incognito:!1};return t.shift&&a&&t.alt?(n.inNewWindow=!0,n.incognito=!0):t.shift&&a&&!t.alt?(n.inNewWindow=!0,n.incognito=i.a.isIncognito()):!t.shift||a||t.alt?t.shift||!a||t.alt?s&&1===e.button?(n.inCurrent=!1,n.inBackground=!0):s&&2===e.button?n.inCurrent=!1:s&&(n.allowOverride=!0):(n.inCurrent=!1,n.inBackground=!0):n.inCurrent=!1,n}},function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));a(106);var i=a(9),s=a(21);function n(e){const t=i.a.getPageById(e);return!!t&&r(t)}function r(e){const t=e.getIn(["extData","tiling","id"]);if(!t)return!1;if(i.a.getPages().filter(e=>e.getIn(["extData","tiling","id"])===t).count()<2)return!1;const a=i.a.getActivePage().getIn(["extData","tiling","id"]);return t&&a&&t===a}function o(e){if(!e)return!1;if(e.active)return!0;const t=c(e);return!!t&&t.some(e=>e.active)}function l(){const e=i.a.getActivePage();return e?c(e)||s.List.of(e):Object(s.List)()}function c(e){return r(e)?i.a.getTiles(e.getIn(["extData","tiling","id"])):null}function d(e){return!!e&&i.a.isGroup(e.getIn(["extData","group"]))}},function(e,t,a){"use strict";(function(e){var i=a(15),s=a.n(i),n=a(9),r=a(11),o=a(4),l=a(27),c=a(58),d=a(250),u=a(100),h=a(193),m=a(306),p=a(272),g=a(32),b=a(255),f=a(21),_=a(441);const N=Object(p.extendMoment)(s.a);let v=null,E=new f.Map,w=new f.Map({today:[],other:[]});const S={};let C=g.a.DESCENDING_SORT,k="";const y=new class extends c.EventEmitter{getPanelResourceKey(){return"PANEL"}isPanel(e){return"PANEL"===e}getHistorySearchResults(e){let t=[];const a=this.getFilter(e);if(a.sortOrder!==C||a.sortField!==k){const{sortOrder:e,sortField:t}=a;w=w.set("today",this.sortHistory(e,t,w.get("today"))),w=w.set("other",this.sortHistory(e,t,w.get("other"))),C=a.sortOrder,k=a.sortField}if(t=a.sortOrder===g.a.DESCENDING_SORT?w.get("today").concat(w.get("other")):w.get("other").concat(w.get("today")),t=t.filter(e=>e.visitTime>=a.startTime.valueOf()&&e.visitTime<=a.endTime.valueOf()),a.parsedFilter.query||a.parsedFilter.title||a.parsedFilter.url){const e=a.parsedFilter.query.toLowerCase(),i=a.parsedFilter.title.toLowerCase(),s=a.parsedFilter.url.toLowerCase();t=Object(_.b)(t,e,i,s,a.searchURL)}return{data:t,filter:a,oldestHistoryDate:v||N()}}getFilteredHistory(e){let t=w.get("today").concat(w.get("other"));t=Object(_.b)(t,e,"","",!0);const a=(e,t)=>{e.forEach(e=>{e.url&&t.push(e),Array.isArray(e.children)&&a(e.children,t)})},i=[];a(t,i);const s={};i.forEach(e=>{s[e.url]={visitCount:s[e.url]?s[e.url].visitCount+e.visitCount:e.visitCount,visitTime:s[e.url]?Math.max(s[e.url].visitTime,e.visitTime):e.visitTime,title:e.title,id:e.id}});const n=[];return Object(d.a)(s,(e,t)=>{n.push({url:t,...e})}),n}sortHistory(e,t,a){const i=g.a.getDefaultComparator(e,t);return g.a.treeSort(a,i),a}getStatistics(e){const t={...w.get("todaysStats",{}),...w.get("olderStats",{})},a=E.get(e,new b.a);return this.filterStatistics(t,a.parsedFilter.query.toLowerCase())}filterStatistics(e,t){const a={};return Object.keys(e).forEach(i=>{const s=e[i].mostVisited.filter(e=>-1!==e.url.indexOf(t));s.length&&(a[i]={mostVisited:s,timeArr:e[i].timeArr,hour:e[i].hour,pages:s.length,visits:s.reduce((e,t)=>e+t.visitCount,0)})}),a}getFilter(e){let t=E.get(e);if("PANEL"===e){t||(t=new b.a({range:N.range(N().startOf("day"),N().endOf("day"))}));const e=this.getTimeByRange({rangePicker:t.rangePicker});t=t.merge({endTime:e.endTime?e.endTime:t.endTime,startTime:e.startTime?e.startTime:t.startTime})}else if(!t){t=new b.a({range:N.range(N().startOf("day"),N().endOf("day"))});let a={...n.a.getHistoryManagerState(e)};0===Object.getOwnPropertyNames(a).length?(a={...l.a.getSync("HISTORY_MANAGER_STATE")},a.endTime=N(),"range"===a.displayMode?(a.startTime?a.startTime=N(a.startTime):v?a.startTime=v:N().startOf("month"),a.range=N.range(a.startTime,a.endTime)):(a.startTime=N().startOf(a.displayMode),a.range=N.range(N(a.startTime).startOf(a.displayMode),N(a.endTime).endOf(a.displayMode)))):(a.startTime=a.startTime?N(a.startTime):N(),a.endTime=a.endTime?N(a.endTime):N(),a.range=N.range(N(a.startTime).startOf("day"),N(a.endTime).endOf("day"))),t=t.merge(a)}return E=E.set(e,t),t}getTimeByRange(e,t){return isNaN(parseInt(e.rangePicker))?"today"===e.rangePicker?(e.startTime=N().startOf("day"),e.endTime=N().endOf("day")):"yesterday"===e.rangePicker?(e.startTime=N().subtract(1,"day").startOf("day"),e.endTime=N().subtract(1,"day").endOf("day")):"last_month"===e.rangePicker?(e.startTime=N().subtract(1,"month").startOf("month"),e.endTime=N().subtract(1,"month").endOf("month")):"all"===e.rangePicker?(t&&(e.startTime=t.startOf("day")),e.endTime=N().endOf("day")):"date_range"===e.rangePicker||console.warn("Unknown date range",e.rangePicker):(e.startTime=N().subtract(parseInt(e.rangePicker),"day").startOf("day"),e.endTime=N().endOf("day")),e}emitChange(e){this.emit("change",e)}emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};function O(e){if("start"===e)S.id||(S.id=setInterval(O,6e5,"tick"),S.date=N());else if("stop"===e)S.id&&(clearInterval(S.id),S.id=void 0);else if("tick"===e){const e=N();S.date.date()!==e.date()&&(S.date=e,y.emitChangeParam("searchResultsReady"))}}function A(e){e.items.forEach(e=>{e.isFolder?function(e){const t=N(e.at).startOf("day"),a=N(e.at).endOf("day"),i=t.format("YYYY-MM-DD");let s="other",n="olderStats";N().isBetween(t,a)&&(s="today",n="todaysStats");w.get(s).forEach((e,t)=>{if(e.id===i){const e=w.get(s),a=w.get(n);w=w.set(n,Object(u.a)(a,i)),e.splice(t,1),w=w.set(s,e)}})}(e):function(e){const t=N(e.at).startOf("day"),a=N(e.at).endOf("day"),i=t.format("YYYY-MM-DD");let s="other",n="olderStats";N().isBetween(t,a)&&(s="today",n="todaysStats");const r=[];w.get(s).forEach(t=>{if(t.id===i){const a=w.get(n);a[i].mostVisited.forEach((t,s)=>{t.url===e.url&&a[i].mostVisited.splice(s,1)});const s=t.children.filter(t=>t.url!==e.url);s.length>0&&(s.length!==t.children.length?r.push({...t,children:s}):r.push(t))}else r.push(t)}),w=w.set(s,r)}(e)}),y.emitChange("searchResultsReady")}function T(e,t){const a={};return Object(d.a)(e,(e,i)=>{const s={},n=Object(h.a)(e,"hour");Object(d.a)(n,(e,t)=>{const a=Object(m.a)(e,"url");s[t]={pages:a.length,visits:e.reduce((e,t)=>e+t.visitCount,0)}});const r=[];for(let e=0;e<=24;e++)r.push({hour:e,pages:s[e]?s[e].pages:0,visits:s[e]?s[e].visits:0,unixDate:N(i+"T"+(e<10?"0":"")+e).valueOf()});a[e[0].dateKey]={mostVisited:t[e[0].dateKey],timeArr:r}}),a}function I(e){return Object(h.a)(e,"dateKey")}function D(e){const t=[];return Object(d.a)(e,(e,a)=>{const i=Object(h.a)(e,"url"),s=[];Object(d.a)(i,(e,t)=>{const a=e[0],i=e.reduce((e,t)=>e.visitTime>t.visitTime?e:t).visitTime,n=e.reduce((e,t)=>e+t.visitCount,0);s.push({address:a.address,isBookmarked:a.isBookmarked,protocol:a.protocol,title:a.title,hour:a.hour,transition_type:a.transition_type,url:t,id:a.id+"_"+i,visitCount:n,visitTime:i})}),t.push({children:s,id:e[0].dateKey,pages:Object.keys(i).length,visitCount:s.reduce((e,t)=>e+t.visitCount,0),visitTime:N(e[0].dateKey).valueOf()})}),t}function P(e){const t={};return e.forEach(e=>{const a=e.children.slice().sort((e,t)=>{e.visitCount,t.visitCount});t[e.id]=a.map(e=>({url:e.url,visitCount:e.visitCount}))}),t}r.a.register(t=>{switch(t.actionType){case o.a.CHROME_HISTORY_SEARCH:!function(t){const a=E.get(t.tab_id);E=E.set(t.tab_id,t.historyQuery),a.text!==t.historyQuery.text&&y.emitChangeParam("filterChange",t.tab_id),e.nextTick(()=>{y.emitChangeParam("searchResultsReady",t.tab_id)})}(t);break;case"CHROME_TABS_REMOVED":const[a]=t.args;!function(e){E=E.delete(e)}(a);break;case o.a.VIVALDI_HISTORY_DELETE_VISITS:A(t);break;case o.a.VIVALDI_HISTORY_INIT:O("start");break;case o.a.VIVALDI_HISTORY_INIT_FILTER:!function(e){const t=y.getTimeByRange({rangePicker:e.setting.rangePicker,startTime:N(e.setting.startTime),endTime:N(e.setting.endTime)}),a=E.get(e.tab_id,new b.a);E=E.set(e.tab_id,a.merge(t)),y.emitChangeParam("filterChange",e.tab_id)}(t);break;case o.a.VIVALDI_HISTORY_LOAD_TODAY:!function(e){const t=w.get("today");if(t.length>0){if(N(t[0].visitTime).endOf("day")<N().startOf("day")){w=w.set("other",t.concat(w.get("other")));const e=w.get("todaysStats"),a=w.get("olderStats"),i=Object.assign(e,a);w=w.set("olderStats",i)}}const a=I(e.historyItems),i=D(a);if(C===g.a.ASCENDING_SORT){const e=g.a.getDefaultComparator(C,"visitTime");g.a.treeSort(i,e)}w=w.set("today",i);const s=T(a,P(i));w=w.set("todaysStats",s),y.emitChangeParam("searchResultsReady",e.tab_id)}(t);break;case o.a.VIVALDI_HISTORY_DISPLAY_MODE_CHANGE:!function(e){const t=E.get(e.tab_id,new b.a).merge({displayMode:e.displayMode});E=E.set(e.tab_id,t),y.emitChangeParam("filterChange",e.tab_id)}(t);break;case o.a.VIVALDI_HISTORY_LOAD_YESTERDAY_AND_OLDER:!function(e){const t=I(e.historyItems),a=D(t),i=P(a);w=w.set("other",w.get("other").concat(a)),v=N(w.get("other").reduce((e,t)=>e<t.id?e:t.id,N().valueOf()));const s=T(t,i);w=w.set("olderStats",{...w.get("olderStats"),...s}),y.emitChangeParam("searchResultsReady",e.tab_id)}(t);break;case o.a.VIVALDI_HISTORY_REMOVE_AFTER:!function(e){const t=e.since;if(0===t)w=new f.Map({today:[],other:[]}),w=w.set("todaysStats",{}),w=w.set("olderStats",{}),y.emitChangeParam("searchResultsReady");else{const e=N();let a="today",i="todaysStats";t<e.startOf("d").valueOf()&&(a="other",i="olderStats",w=w.set("today",[])),w=w.set("todaysStats",{});let s=!1;const n=[],r=w.get(a);r.forEach(e=>{const a=e.children.slice().filter(e=>e.visitTime<=t);s=s||a.length!==e.children.length,a.length>0&&(a.length!==e.children.length?n.push({...e,children:a}):n.push(e))}),w=w.set(a,s?n:r);const o=w.get(i,{}),l=new N(t);Object.keys(o).forEach(e=>{N(e).startOf("day")>=l.startOf("day")&&delete o[e]}),w=w.set(i,o),y.emitChangeParam("searchResultsReady")}}(t);break;default:return!0}}),t.a=y}).call(this,a(64))},,,,,,,function(e,t,a){"use strict";t.a=e=>Boolean(e&&["ctrlKey","altKey","metaKey","shiftKey"].some(t=>!0===e[t]))},function(e,t,a){"use strict";var i=a(44),s=a(0),n=a.n(s),r=a(29),o=a.n(r),l=a(25),c=a(17),d=a.n(c);function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends n.a.Component{constructor(...e){super(...e),u(this,"componentDidMount",()=>{const e=o.a.findDOMNode(this);e&&(e.addEventListener("pointerdown",this.handlePointerDown,!0),e.addEventListener("pointerup",this.handlePointerUp,!0),e.addEventListener("pointercancel",this.handleStop,!0))}),u(this,"componentWillUnmount",()=>{const e=o.a.findDOMNode(this);e&&(e.removeEventListener("pointerdown",this.handlePointerDown,!0),e.removeEventListener("pointerup",this.handlePointerUp,!0),e.removeEventListener("pointercancel",this.handleStop,!0))}),u(this,"handleDoubleClick",e=>{this.props.onDoubleClick&&(this.props.onDoubleClick(),e.stopPropagation())}),u(this,"handlePointerDown",e=>{const{HTMLElement:t}=this.context;if(e.preventDefault(),0!==e.button)return;const{target:a}=e;a instanceof t&&(a.setPointerCapture(e.pointerId),i.a.setWebviewPointerEvents(!1,this.context.document),a.addEventListener("pointermove",this.handlePointerMove,!0),"function"==typeof this.props.onStart&&this.props.onStart(),this.setParentWillChange())}),u(this,"handlePointerUp",e=>{1===e.button?this.handleDoubleClick(e):this.handleStop(e)}),u(this,"handlePointerMove",e=>{if(e.buttons){const{offset:t}=this.props;this.props.returnOffset?this.props.onSlidebarPosition(e.movementX,e.movementY,e):this.props.onSlidebarPosition(e.pageX+t,e.pageY+t,e)}else this.handleStop(e)}),u(this,"handleStop",e=>{const{target:t}=e,{HTMLElement:a}=this.context;t instanceof a&&(t.releasePointerCapture(e.pointerId),i.a.setWebviewPointerEvents(!0,this.context.document),t.removeEventListener("pointermove",this.handlePointerMove,!0)),"function"==typeof this.props.onStop&&this.props.onStop(),this.removeParentWillChange()}),u(this,"setParentWillChange",()=>{[].forEach.call(this.context.document.querySelectorAll(".fullwidth, .fullheight"),e=>{e.parentNode.style.setProperty("will-change","width, height"),e.parentNode.style.setProperty("transition-duration","0ms")})}),u(this,"removeParentWillChange",()=>{[].forEach.call(this.context.document.querySelectorAll(".fullwidth, .fullheight"),e=>{e.parentNode.style.removeProperty("will-change"),e.parentNode.style.removeProperty("transition-duration")})})}render(){const{position:e}=this.props,t="left"===e||"right"===e?"fullheight":"fullwidth";return n.a.createElement("button",{tabIndex:"-1",type:"button",style:this.props.style,onDoubleClick:this.handleDoubleClick,className:d()({[t]:!0,alternate:"right"===e||"bottom"===e}),__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SlideBar.jsx",lineNumber:151}})}}u(h,"contextType",l.a),u(h,"defaultProps",{offset:0}),t.a=h},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(2);const s=[Object(i.a)("bytes"),Object(i.a)("KB"),Object(i.a)("MB"),Object(i.a)("GB"),Object(i.a)("TB"),Object(i.a)("PB")];function n(e,t){if(isNaN(e))return e?e.toString():"";if(e<=0)return Object(i.a)("0 bytes");void 0===t&&(t=e<1024?0:2);let a=s.length-1;for(var n=0;n<s.length;n++)if(e<Math.pow(1024,n+1)){a=n;break}let r=(e/Math.pow(1024,a)).toLocaleString(void 0,{maximumFractionDigits:t});if(t>0){const e="."+"0".repeat(t);r.endsWith(e)&&(r=r.substring(0,r.length-e.length))}return r+(s[a]?" "+s[a]:"")}},,,,,,,function(e,t,a){"use strict";var i=a(502);var s=function(e){if(!e)return"";try{return decodeURI(Object(i.a)(e))}catch(t){return e}},n=a(61),r=a(20);function o(e){if(!e)return"";const t=Object(n.parse)(e);"view-source:"!==t.protocol&&("mailto:"!==t.protocol&&(t.auth=""),e=Object(n.format)(t));const a=r.a.removeTrailingSlashWhenNoPath(r.a.getDisplayUrl(e));return s(a)}a.d(t,"a",(function(){return o}))},function(e,t,a){"use strict";var i=a(162),s=a(11),n=a(4),r=a(27),o=a(7),l=a(15),c=a.n(l),d=a(5);let u=!1;const h=[];function m(){const e=c()().startOf("date"),t=c()().endOf("date");return new Promise(a=>{d.a.historyPrivate.visitSearch({startTime:e.valueOf(),endTime:t.valueOf()},e=>{s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_LOAD_TODAY,historyItems:e}),a()})})}function p(e){for(;e.timeRemaining()>0&&h.length>0;){const e=h.pop();e.length>0&&s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_LOAD_YESTERDAY_AND_OLDER,historyItems:e}),h.length>0&&requestIdleCallback(p)}}const g=new class{loadPromise(){return m().then(()=>{s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_INIT});const e="HISTORY_"+i.a.getPanelResourceKey(),t=r.a.getSync(e);t&&s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_INIT_FILTER,tab_id:i.a.getPanelResourceKey(),setting:t}),o.default.history.onVisited.addListener(m)})}loadAll(){if(!u){u=!0;const e="month",t=c()().subtract(1,"d").endOf("d"),a=36,i=[],s=c()().subtract(a+1,e).endOf(e),n=c()("1970-01-01");i.push({e:s.valueOf(),s:n.valueOf()});for(let s=a;s>=0;s--){const a=c()(t).subtract(s,e).endOf(0===s?"d":e),n=c()(a).startOf(e);i.push({e:a.valueOf(),s:n.valueOf()})}i.forEach(e=>{d.a.historyPrivate.visitSearch({startTime:e.s.valueOf(),endTime:e.e.valueOf()},e=>{e.length>0&&(h.push(e),requestIdleCallback(p))})})}}deleteHistoryPromise(e){return s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_DELETE_VISITS,items:e}),Promise.all(e.map(e=>new Promise(t=>{const a=new c.a(e.at);let i={startTime:new c.a(a.startOf("day")).valueOf(),endTime:new c.a(a.endOf("day")).valueOf()};e.isFolder?o.default.history.deleteRange(i,()=>{t()}):(i={...i,url:e.url},d.a.historyPrivate.deleteVisits(i,()=>{t()}))})))}removeLocalHistory(e){c()(e).isSame(c()(),"day")?m():s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_REMOVE_AFTER,since:e})}searchHistory(e,t){s.a.dispatch({actionType:n.a.CHROME_HISTORY_SEARCH,historyQuery:t,tab_id:e})}setDisplayMode(e,t){s.a.dispatch({actionType:n.a.VIVALDI_HISTORY_DISPLAY_MODE_CHANGE,tab_id:e,displayMode:t})}saveStateFromSearchQuery(e,t){const a=t.toJS();i.a.isPanel(e)?r.a.set({["HISTORY_"+e]:{rangePicker:a.rangePicker,startTime:a.startTime.valueOf(),endTime:a.endTime.valueOf()}}):r.a.set({HISTORY_MANAGER_STATE:{displayMode:a.displayMode,startTime:a.startTime.valueOf(),endTime:a.endTime.valueOf(),dayPickerVisible:a.dayPickerVisible,moreInfoVisible:a.moreInfoVisible,monthEntriesVisible:a.monthEntriesVisible}})}};t.a=g},,function(e,t,a){"use strict";var i=a(168),s=a.n(i),n=a(11),r=a(77);class o extends s.a{constructor(){super(n.a)}getInitialState(){return{zoom:r.f,defaultPageZoom:r.f,uiZoom:r.j,notesZoom:r.f}}reduce(e,t){switch(t.actionType){case"ZOOM_PAGE":return{...e,zoom:t.zoomData};case"ZOOM_NOTES":return{...e,notesZoom:t.zoomData};case"ZOOM_SET_UI":return{...e,uiZoom:t.zoomData};case"ZOOM_PAGE_DEFAULT":return{...e,defaultPageZoom:t.zoomData}}return e}}t.a=new o},function(e,t,a){"use strict";var i=a(92),s=a(9),n=a(53),r=a(7),o=a(5);const l=["INPUT","FRAME","IFRAME","OBJECT","SELECT","TEXTAREA","EMBED"];function c(){let e;const t=function(t){t.clipboardData.types.indexOf("text/plain")>-1&&(e=t.clipboardData.getData("text/plain"),t.preventDefault())};return document.addEventListener("paste",t),document.execCommand("paste"),document.removeEventListener("paste",t),e}const d=new class{undo(){r.default.editcommand.execute("undo")}redo(){r.default.editcommand.execute("redo")}cut(){r.default.editcommand.execute("cut")}copy(){r.default.editcommand.execute("copy")}paste(){r.default.editcommand.execute("paste")}selectAll(){r.default.editcommand.execute("selectAll")}set(e){if("string"==typeof e&&""!==e){const t=document.createElement("input");t.style.position="absolute",t.style.zIndex="-1",t.value=e,document.body.appendChild(t),t.select(),"unsuccessful"===document.execCommand("copy")&&console.error("Failed to copy text."),document.body.removeChild(t)}}pasteAsPlainText(){r.default.editcommand.execute("pasteAndMatchStyle")}pasteAsPlainTextOrPasteAndGo(){const e=c();document.activeElement.classList.contains("url")?n.a.doAction("urlPasteAndGo",{clipboardText:e}):document.activeElement.classList.contains("vivaldi-searchfield")?n.a.doAction("searchPasteAndGo",{clipboardText:e}):l.indexOf(document.activeElement.tagName)>-1||document.activeElement.isContentEditable?r.default.editcommand.execute("pasteAndMatchStyle"):"WEBVIEW"===document.activeElement.tagName?document.activeElement.getFocusedElementInfo((t,a,i)=>{i?r.default.editcommand.execute("pasteAndMatchStyle"):n.a.doAction("urlPasteAndGo",{clipboardText:e})}):n.a.doAction("urlPasteAndGo",{clipboardText:e})}createNoteFromSelection(){const e=s.a.getActivePage().get("id"),t=s.a.getActivePage().get("url"),a=c();o.a.utilities.getSelectedText(e,e=>{i.a.createNote({content:a,url:e===a?t:void 0})})}};t.a=d},function(e,t,a){"use strict";(function(e){var i=a(76),s=a(9),n=a(10),r=a(83),o=a(11),l=a(184),c=a(2),d=a(5),u=a(77),h=a(1),m=a(20);const p=new class{setUIZoomPercentage(e){p.setUIZoom(e/100)}setUIZoom(e){const t=Math.min(Math.max(e,u.l),u.k);d.a.zoom.setVivaldiUIZoom(t)}setPageZoomPercentage(e){p.setPageZoom(e/100)}setPageZoom(t){e.nextTick(()=>{const e=Math.min(Math.max(t,u.h),u.g);s.a.getActivePage().url.startsWith(m.a.internals.notes)?o.a.dispatch({actionType:"ZOOM_NOTES",zoomData:e}):o.a.dispatch({actionType:"ZOOM_PAGE",zoomData:e});const a=i.a.getActiveWebView();a&&(a.setZoom(e),"overlay"!==n.a.get(h.kStatusBarDisplay)&&n.a.get(h.kToolbarsStatus).includes("Zoom")||r.a.setStatus(Object(c.a)("Page Zoom $1%",[Math.round(100*e)]),2e3))})}uiZoomIn(){const{uiZoom:e}=l.a.getState(),t=parseFloat(e+u.n);p.setUIZoom(t)}uiZoomOut(){const{uiZoom:e}=l.a.getState(),t=parseFloat(e-u.n);p.setUIZoom(t)}pageZoomIn(){p.getActiveZoom().then(e=>{p.setPageZoom(parseFloat((e+u.i).toFixed(2)))})}pageZoomOut(){p.getActiveZoom().then(e=>{p.setPageZoom(parseFloat((e-u.i).toFixed(2)))})}pageZoomHalf(){p.getActiveZoom().then(e=>{p.setPageZoom(parseFloat((e/2).toFixed(2)))})}pageZoomReset(){d.a.zoom.getDefaultZoom(e=>p.setPageZoom(e))}pageZoomDouble(){p.getActiveZoom().then(e=>{p.setPageZoom(parseFloat((2*e).toFixed(2)))})}getActiveZoom(){return new Promise(e=>{const t=i.a.getActiveWebView();t?t.getZoom(t=>{e(t)}):e(u.f)}).then(e=>e)}};function g(e){o.a.dispatch({actionType:"ZOOM_PAGE_DEFAULT",zoomData:e})}d.a.zoom.getVivaldiUIZoom(e=>{o.a.dispatch({actionType:"ZOOM_SET_UI",zoomData:e})}),d.a.zoom.onUIZoomChanged.addListener(e=>{o.a.dispatch({actionType:"ZOOM_SET_UI",zoomData:e})}),d.a.zoom.getDefaultZoom(g),d.a.zoom.onDefaultZoomChanged.addListener(g),t.a=p}).call(this,a(64))},,,,function(e,t,a){"use strict";var i=a(0),s=a(10),n=a(29),r=a.n(n),o=a(25),l=a(1),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FocusTrap.jsx";function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.PureComponent{constructor(...e){super(...e),u(this,"_getFocusable",()=>{const{HTMLElement:e}=this.context,t=r.a.findDOMNode(this);let a=void 0;t instanceof e&&(a=t.querySelectorAll(`a[href]:not([tabindex='-1']),\n        button:not([disabled]):not([tabindex='-1']),\n        input:not([disabled]):not([tabindex='-1']),\n        select:not([disabled]):not([tabindex='-1']),\n        textarea:not([disabled]):not([tabindex='-1']),\n        p[contenteditable]:not([tabindex='-1']),\n        [tabindex]:not([tabindex='-1']):not(.${this.props.focusName})`)),this._focusable=a}),u(this,"isSiblingAfter",(e,t)=>{if(e&&t){let a=t;for(;a;){if(a===e)return!0;a=a.nextSibling}}return!1}),u(this,"focus",()=>{if(this._focusable&&this._focusable.length>0){const e=this._focusable[0];e&&e.focus()}}),u(this,"handleTopFocus",e=>{if(this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,a=this._focusable[0],i=this._focusable[this._focusable.length-1];if(!a||!i)return;e.relatedTarget instanceof t&&this.isSiblingAfter(a,e.relatedTarget)?i.focus():a.focus()}}),u(this,"handleBottomFocus",e=>{if(this._focusable&&this._focusable.length>0){const{HTMLElement:t}=this.context,a=this._focusable[0],i=this._focusable[this._focusable.length-1];if(!a||!i)return;e.relatedTarget instanceof t&&this.isSiblingAfter(e.relatedTarget,i)?a.focus():i.focus()}})}componentDidMount(){this._getFocusable()}componentDidUpdate(e){e.children!==this.props.children&&this._getFocusable()}componentWillUnmount(){delete this._focusable}render(){const{children:e,component:t,focusName:a,forceTrap:n,...r}=this.props,o=t||"div",u=this._focusable&&this._focusable.length>0;return n||!0===s.a.get(l.kWebpagesFocusTrap)?i.createElement(o,d({},r,{__source:{fileName:c,lineNumber:127}}),i.createElement("span",{tabIndex:"0",className:a,onFocus:this.handleTopFocus,__source:{fileName:c,lineNumber:128}}),e,!1===u&&i.createElement("span",{className:"focus-anchor",tabIndex:"0",__source:{fileName:c,lineNumber:132}}),i.createElement("span",{tabIndex:"0",className:a,onFocus:this.handleBottomFocus,__source:{fileName:c,lineNumber:133}})):i.createElement(o,d({},r,{__source:{fileName:c,lineNumber:140}}),e)}}u(h,"contextType",o.a),t.a=h},,,,function(e,t,a){"use strict";var i=a(11),s=a(16),n=a(5);function r(e){i.a.dispatch({actionType:"SYNC_ENGINE_STATE_CHANGED",engineData:e})}function o(e){i.a.dispatch({actionType:"SYNC_CYCLE_COMPLETED",cycleData:e})}const l=new class{start(){n.a.sync.start()}stop(){n.a.sync.stop()}clearData(){n.a.sync.clearData()}setEncryptionPassword(e,t){n.a.sync.setEncryptionPassword(e,e=>t(e))}loadPromise(){if(s.a.isIncognitoOrGuest())return Promise.resolve([]);const e=new Promise(e=>n.a.sync.getEngineState(t=>{r(t),n.a.sync.onEngineStateChanged.addListener(e=>r(e)),e()})),t=new Promise(e=>n.a.sync.getLastCycleState(t=>{o(t),n.a.sync.onCycleCompleted.addListener(e=>o(e)),e()}));return Promise.all([e,t])}};t.a=l},function(e,t,a){"use strict";var i=a(943),s=a.n(i);t.a=function(e){try{e=function(e){return s()(e)}(e)}catch(e){}return e}},function(e,t,a){"use strict";var i=a(168),s=a.n(i),n=a(11);class r extends s.a{getInitialState(){return{engineData:{engineState:"stopped",disableReasons:[],protocolErrorType:"success",protocolErrorDescription:"",protocolErrorClientAction:"unknown",usesEncryptionPassword:!1,needsDecryptionPassword:!1,isEncryptingEverything:!1,isSetupInProgress:!1,isFirstSetupComplete:!1,syncEverything:!0,dataTypes:[],isReady:!1},cycleData:{cycleStartTime:0,downloadUpdatesStatus:"not_synced",commitStatus:"not_synced",nextRetryTime:0,isReady:!1}}}reduce(e,t){switch(t.actionType){case"SYNC_ENGINE_STATE_CHANGED":return{engineData:t.engineData,cycleData:e.cycleData};case"SYNC_CYCLE_COMPLETED":return{engineData:e.engineData,cycleData:t.cycleData}}return e}}t.a=new r(n.a)},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return r}));a(21);function i(e,t){const a=e.indexOf(t);return(-1===a?e:e.delete(a)).push(t)}function s(e,t){const a=e.indexOf(t);return(-1===a?e:e.delete(a)).unshift(t)}function n(e,t=!1){return!0===t?e.pop().unshift(e.last()):e.shift().push(e.first())}function r(e,t){let a=t.asMutable();return a=e.reduce((e,t)=>e.contains(t)?e:e.push(t),a),a=a.reduce((t,a)=>e.contains(a)?t:t.filter(e=>e!==a),a),a.asImmutable()}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));function i(e){const t=new Notification(e.title,{body:e.body,icon:e.icon?e.icon:"/resources/icon_notifications.png",silent:Boolean(e.silent),requireInteraction:Boolean(e.requireInteraction)});t.onclick=()=>{e.onClick&&e.onClick(),t.close()},e.requireInteraction||setTimeout(()=>t.close(),e.timeout||5e3)}},,function(e,t,a){"use strict";var i=a(239),s=a(9),n=a(10),r=a(11),o=a(4),l=a(53),c=a(7),d=a(61),u=a.n(d),h=a(1);const m=new class{setFastForwardUrl(e,t,a){r.a.dispatch({actionType:o.a.FAST_FORWARD_SET_FORWARD_URL,pageId:e,forwardUrl:t})}_updateRewindInfo(e,t,a,i){r.a.dispatch({actionType:o.a.FAST_FORWARD_SET_REWIND_INFO,pageId:e,history:i,currentHostname:t,currentIndex:a})}setRewindInfo(e,t){const a=u.a.parse(t.get("url")).hostname;e.getPageHistory(this._updateRewindInfo.bind(this,t.get("id"),a))}copyFastForwardState(e,t){r.a.dispatch({actionType:o.a.FAST_FORWARD_COPY_STATE,pageId:e.get("id"),fastForwardState:t})}navigateRewind(e){e&&e.has("id")||(e=s.a.getActivePage());const t=i.a.getRewindRelativeIndex(e.get("id"));l.a.go(-1*t)}navigateFastforward(e){e&&e.has("id")||(e=s.a.getActivePage()),c.default.tabs.sendMessage(e.get("id"),{navigateFastforward:!0})}isFFWEnabled(){return n.a.get(h.kKeyboardShortcutsSpaceFastForwards)}sendMessage(e,t,a={}){c.default.tabs.sendMessage(e,{...a,action:t,pageId:e})}onIsFFWEnabled(e){this.isFFWEnabled()&&m.sendMessage(e,"ffwGoForward")}initTab(e){const t=this.isFFWEnabled();m.sendMessage(e,"fastForwardInit",{enabled:t})}initFastForward(){c.default.runtime.onMessage.addListener((e,t)=>{const{action:a,pageId:i}=e;(function(e,t){return c.default.runtime.id===t.id&&0===t.frameId})(e.pageId,t)&&("fastforwardUrlChanged"===a?m.setFastForwardUrl(e.pageId,e.nextUrl,t.url):"canFFWGoForward"===a&&m.onIsFFWEnabled(i))})}};t.a=m},function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));var i=a(7),s=a(6),n=a(501);const r=Object(s.a)("Reader View"),o=r.label,l=[Object(s.a)("Transitions Forced"),Object(s.a)("Filter Obscure"),Object(s.a)("Filter Grayscale"),Object(s.a)("Filter Black and White"),Object(s.a)("Fonts Monospace"),Object(s.a)("Transform 3D"),Object(s.a)("Highlight Hover"),r,Object(s.a)("CSS Debugger"),Object(s.a)("Filter Sepia"),Object(s.a)("Filter Intensify"),Object(s.a)("Skewed Images"),Object(s.a)("Highlight Focus"),Object(s.a)("Transitions Removed"),Object(s.a)("Filter Invert"),Object(s.a)("Inline Access Keys"),Object(s.a)("Page Minimap")];async function c(){const e=(await Object(n.a)(i.default.runtime.getPackageDirectoryEntry)()).createReader(),t=(await new Promise(t=>e.readEntries(t))).find(e=>"user_files"===e.name&&e.isDirectory);if(!t)return[];const a=t.createReader(),s=await new Promise(e=>a.readEntries(e));return(await Promise.all(s.map(e=>{let t=e.name;const a=t.lastIndexOf(".");return t=t.substr(0,a).replace(/_/g," "),0===t.length?Promise.resolve():new Promise(i=>e.file(s=>{const n=new FileReader;n.onerror=()=>i(),n.onload=s=>{const n=l.findIndex(e=>e.labelEnglish===t);i({code:s.target.result,name:-1===n?t:l[n].label,type:-1!==a&&"js"===e.name.substr(a+1)?"script":"style"})},n.readAsText(s)}))}))).filter(Boolean)}},,,,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(29),r=a.n(n),o=a(25),l=a(100);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends s.a.PureComponent{constructor(...e){super(...e),d(this,"componentDidMount",()=>{this._attachObserver()}),d(this,"componentWillUnmount",()=>{this._detachObserver()}),d(this,"_attachObserver",()=>{const{Element:e,ResizeObserver:t}=this.context,a=r.a.findDOMNode(this);if(a instanceof e)try{this._observer=new t(this.props.onResize),this._observer.observe(a)}catch(e){console.warn(e)}}),d(this,"_detachObserver",()=>{const{Element:e}=this.context,t=r.a.findDOMNode(this);t instanceof e&&this._observer.unobserve(t)})}render(){const e=this.props.component,t=Object(l.a)(this.props,["onResize","component","children"]);return s.a.createElement(e,c({},t,{__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\vivaldi\\NativeResizeObserver.js",lineNumber:66}}),this.props.children)}}d(u,"contextType",o.a),d(u,"defaultProps",{className:"resize",component:"div",children:null}),t.a=u},,,,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(13),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\thumbnail\\Thumbnail.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends s.a.PureComponent{constructor(...e){super(...e),o(this,"_imageElementKey",0),o(this,"_reloadRetryCount",0),o(this,"onImageError",()=>{if(void 0!==this._reloadRetryTimer)return;if(this._reloadRetryCount>=4)return void(4===this._reloadRetryCount&&(this._reloadRetryCount=5,this.props.onImageLoadError&&this.props.onImageLoadError(this.props.src)));this._reloadRetryCount++;const e=1e3*Math.pow(2,this._reloadRetryCount);this._reloadRetryTimer=setTimeout(this.onTryReload,e)}),o(this,"onTryReload",()=>{this._reloadRetryTimer=void 0,this._imageElementKey++,this.forceUpdate()})}componentDidUpdate(e){e.src!==this.props.src&&this.finishErrorRecovery()}componentWillUnmount(){this.finishErrorRecovery()}finishErrorRecovery(){this._reloadRetryCount=0,void 0!==this._reloadRetryTimer&&(clearTimeout(this._reloadRetryTimer),this._reloadRetryTimer=void 0)}render(){const e=this.props.className||"thumbnail-image";return this.props.src?s.a.createElement("div",{className:e,style:this.props.style,onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,__source:{fileName:r,lineNumber:82}},s.a.createElement("img",{ref:"thumbnail",width:"100%",height:"auto",src:this.props.src,onError:this.onImageError,key:this._imageElementKey,__source:{fileName:r,lineNumber:89}})):s.a.createElement("div",{className:e,style:this.props.style,onPointerEnter:this.props.onPointerEnter,onPointerLeave:this.props.onPointerLeave,onPointerDown:this.props.onPointerDown,onPointerUp:this.props.onPointerUp,dangerouslySetInnerHTML:this.props.isFolder?{__html:n.Wb}:{__html:n.c},__source:{fileName:r,lineNumber:101}})}}t.a=l},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));const i=0,s=1},function(e,t,a){"use strict";var i=a(11),s=a(4);const n=(e,t)=>t?setTimeout(e,t):e();let r={};const o=new class{clearTooltip(){o._clearAllTooltipTimeouts(),i.a.dispatch({actionType:s.a.TOOLTIP_CLEAR})}showTooltip(e,t=0){o._clearTooltipTimeout(e),r[e]=n(()=>i.a.dispatch({actionType:s.a.TOOLTIP_SHOW,id:e}),t)}hideTooltip(e,t=0){o._clearTooltipTimeout(e),r[e]=n(()=>i.a.dispatch({actionType:s.a.TOOLTIP_HIDE,id:e}),t)}_clearAllTooltipTimeouts(){Object.values(r).filter(Boolean).forEach(clearTimeout),r={}}_clearTooltipTimeout(e){r[e]&&(r[e]=clearTimeout(r[e]))}};t.a=o},,,,function(e,t,a){"use strict";(function(e){var i=a(9),s=a(10),n=a(11),r=a(4),o=a(27),l=a(1);const{SEARCH_FIELD_SET_STATE:c,SEARCH_FIELD_ADD_TYPED_HISTORY:d,SEARCH_FIELD_DELETE_TYPED_HISTORY:u,SEARCH_FIELD_INIT_TYPED_HISTORY:h,SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:m,SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:p}=r.a,g=new class{setState(e){const t=i.a.getActivePage();n.a.dispatch({actionType:c,state:e,page:t})}addTypedSearchHistory(t){const a=s.a.get(l.kAddressBarSearchTypedHistoryEnabled),r=!1!==i.a.getActivePage().get("incognito");a&&!r&&e.nextTick(()=>{n.a.dispatch({actionType:d,query:t})})}deleteTypedSearchHistory(e){n.a.dispatch({actionType:u,query:e})}load(){const e=o.a.getSync("TYPED_SEARCH_HISTORY");n.a.dispatch({actionType:h,typedHistory:e})}};s.a.addListener(l.kHistoryDaysToKeepVisits,(e,t)=>{0===t?n.a.dispatch({actionType:m}):0===e&&t>0&&n.a.dispatch({actionType:p})}),t.a=g}).call(this,a(64))},,function(e,t,a){"use strict";a(675),a(676);var i=a(11),s=a(4);const n=new class{setActiveWebView(e){i.a.dispatch({actionType:s.a.WEBVIEW_SET_ACTIVE,ref:e})}clearIfActive(e){i.a.dispatch({actionType:s.a.WEBVIEW_CLEAR_IF_ACTIVE,component:e})}};t.a=n},,,,,,,,,,,function(e,t,a){"use strict";(function(e){var i=a(1044),s=a(39),n=a(37),r=a(1045),o=a(22),l=a(88),c=a(120),d=a(962),u=a(19),h=a(50),m=a(452),p=a(10),g=a(0),b=a.n(g),f=a(29),_=a.n(f),N=a(963),v=a(512),E=a(293),w=a(85),S=a(964),C=a(61),k=a.n(C),y=a(72),O=a(80),A=a(4),T=a(25),I=a(2),D=a(160),P=a(169),x=a(444),M=a(5),L=a(31),j=a(519),B=a(36),R=a(1),F=a(251),U=a(123),W=a(360),H=a(20),V="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlField.jsx";function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const K="./%?=-#@&;,$\"'()[]<>^~`{}+".split(""),z=[R.kAddressBarAutocompleteSuffixExpansionValue,R.kAddressBarAutocompleteSuffixExpansionEnabled,R.kAddressBarInlineSearchEnabled,R.kAddressBarInlineSearchSuggestEnabled,R.kAddressBarInlineSearchSuggestOnNickname,R.kAddressBarOmniboxCutcopyEncoded,R.kAddressBarOmniboxEnabled,R.kAddressBarOmniboxShowBookmarks,R.kAddressBarOmniboxShowTopSites,R.kAddressBarOmniboxShowTypedHistory,R.kAddressBarSelectOnClick,R.kAddressBarTypedHistoryEnabled,R.kAddressBarUrlOpenShortcut,R.kAddressBarOmniboxNumberOfBookmarkResults,R.kAddressBarOmniboxNumberOfHistoryResults,R.kAddressBarOmniboxNumberOfTypedHistoryResults,R.kAddressBarOmniboxNumberOfSearchSuggestions];let Y=[],$=0;class Q extends b.a.PureComponent{constructor(...t){super(...t),G(this,"_isMounted",!1),G(this,"_ignoreNextSelectEvent",!1),G(this,"_isFocused",!1),G(this,"_nav",new j.a(this)),G(this,"_suppressReplace",!1),G(this,"autocompletedValue",""),G(this,"_omniDropdownElement",b.a.createRef()),G(this,"_urlInput",b.a.createRef()),G(this,"state",{typedUrl:"",isOmniDropdownOpen:!1,bookmarkResults:[],historyResults:[],typedHistoryResults:[],nicknameResults:[],suggestResults:[],dropdownSelectionIndex:-1,selectedItem:void 0,autocompletedItem:void 0,value:"",autocompleteData:[]}),G(this,"bookmarkSearch",new r.a),G(this,"historySearch",new N.a({provider:new d.a})),G(this,"typedHistorySearch",new S.a),G(this,"setUrlfieldState",e=>{y.a.setUrlfieldState(this.props.pageId,e)}),G(this,"_isSuggestEnabled",()=>{const{prefValues:e}=this.props,t=Boolean(this.props.typedSearchEngine);return!!e[R.kAddressBarInlineSearchSuggestEnabled]&&e[R.kAddressBarOmniboxEnabled]&&(!e[R.kAddressBarInlineSearchSuggestOnNickname]||t)}),G(this,"_onSearchSuggestionsChanged",({suggestions:e})=>{this.searchDoneSuggest(e)}),G(this,"_onUrlbarStoreChanged",e=>{e===A.a.URLFIELD_TYPED_HISTORY_UPDATE&&this.state.isOmniDropdownOpen&&this.typedHistorySearch.search(this.state.typedUrl,{count:p.a.get(R.kAddressBarOmniboxNumberOfTypedHistoryResults)}).then(this.searchDoneTypedHistory)}),G(this,"getTypedURL",()=>this.state.typedUrl),G(this,"_getInputWasIncrementedOrDecremented",(e,t)=>{let a,i;return t?(a=e.startsWith(t)||!(this.props.editUrl||"").startsWith(e),i=(t||"").startsWith(e)&&e.length<t.length):(a=e.startsWith(this.props.editUrl||"")||null==this.props.editUrl||null==this.props.displayUrl,i=(this.props.displayUrl||"").startsWith(e)),i&&a&&(a=!1),{inputWasIncremented:a,inputWasDecremented:i}}),G(this,"searchDoneBookmarks",e=>{const t=Object(F.a)(e.filter(e=>e.type.startsWith("OMNI_RESULT_BOOKMARK")&&!e.type.includes("OMNI_RESULT_BOOKMARK_NICKNAME")),p.a.get(R.kAddressBarOmniboxNumberOfBookmarkResults)),a=Object(F.a)(e.filter(e=>e.type.startsWith("OMNI_RESULT_BOOKMARK_NICKNAME")||e.type.startsWith("OMNI_RESULT_FOLDER_NICKNAME")),p.a.get(R.kAddressBarOmniboxNumberOfBookmarkResults));this.setState({nicknameResults:a,bookmarkResults:t})}),G(this,"searchDoneHistory",e=>{this._isMounted&&this.setState({historyResults:e})}),G(this,"searchDoneTypedHistory",e=>{if(!this._isMounted)return;const t=this.props.prefValues[R.kAddressBarTypedHistoryEnabled]?e:[];this.setState({typedHistoryResults:t})}),G(this,"_maybePrefixWithKeyword",e=>this.props.typedSearchEngine&&this.props.typedSearchEngine.keyword&&!e.startsWith(this.props.typedSearchEngine.keyword+" ")?this.props.typedSearchEngine.keyword+" "+e:e),G(this,"searchDoneSuggest",e=>{const t=p.a.get(R.kAddressBarOmniboxNumberOfSearchSuggestions),a=Object(F.a)(e,t).map(e=>{const t=this._maybePrefixWithKeyword(e),a=this.props.typedSearchEngine||this.props.defaultSearchEngine;return{id:e,type:"OMNI_RESULT_SUGGEST",disableDelete:!0,url:t,favicon:b.a.createElement("img",{src:a&&a.faviconUrl,__source:{fileName:V,lineNumber:439}})}});this.setState({suggestResults:a})}),G(this,"_throttledSearchSuggest",Object(U.a)((e,t)=>{const a=v.a.suggest(e,t);Y=Object(W.a)(Y.concat(a),10)},500,{leading:!1})),G(this,"onClick",t=>{const{ctrlKey:a,metaKey:i}=t,s=t.currentTarget,n=s.selectionStart===s.selectionEnd,r=0===s.selectionStart&&s.selectionEnd===s.value.length;if(!(0===t.button&&$&&Date.now()-$<350))if($=Date.now(),a&&n){let e=0;for(let t=s.selectionStart;t<s.value.length;t++)if(K.some(e=>"."!==e&&s.value[t]===e)){e=t;break}if(e>0){const t=s.value.substr(0,e);this._urlFieldGo(t)}}else if(!1!==this.props.prefValues[R.kAddressBarSelectOnClick]&&(s.selectionStart===s.selectionEnd||r))if(this._focusedOnMouseDown!==this._getInputDomElement()){if(this._lastSelectionStart=s.selectionStart,this._lastSelectionEnd=s.selectionEnd,!t.hasOwnProperty("button"))return;0===t.button?e.nextTick(()=>s.select()):s.select(),this._focusedOnMouseDown=null}else this.handleInputSelect(s)}),G(this,"onMouseDown",()=>{this._focusedOnMouseDown=document.activeElement}),G(this,"onValueChange",e=>{this.setUrlfieldState({editUrl:e}),this.setState({typedUrl:e,selectedItem:void 0},()=>{e?this.performSearch(e):this.hideDropdown()})}),G(this,"onAutocompleteValueChange",t=>{this.autocompletedValue=t,this.props.onChange&&this.props.onChange(t),e.nextTick(()=>{this.props.editUrl&&this.setUrlfieldState({autocompleteValue:t})})}),G(this,"handleInputSelect",e=>{!0!==this._ignoreNextSelectEvent?""!==e.value.trim()&&"none"===e.selectionDirection&&(e.selectionDirection="forward"):this._ignoreNextSelectEvent=!1}),G(this,"onSelected",e=>{const{currentTarget:t}=e;"mouseup"!==e.nativeEvent.type&&this.handleInputSelect(t)}),G(this,"_handleUndo",e=>{const t=e.currentTarget,{value:a}=this.state;if(this.state.value.length<t.value.length){e.preventDefault();const t=e.currentTarget.selectionStart-1;t>0?this.setUrlfieldState({editUrl:a.substring(0,t)}):(this.setUrlfieldState({editUrl:""}),this.hideDropdown())}""===a&&(e.preventDefault(),this.revertUrl())}),G(this,"_cleanupState",()=>{this._suppressReplace=!1}),G(this,"_constructSearchSuggestion",()=>{const{typedSearchEngine:e,defaultSearchEngine:t}=this.props,a=e||t;if(!a)return;if(!(this._isSuggestEnabled()&&(e&&e.suggestUrl||!e&&t&&t.suggestUrl)))return;const i=e&&function(e,t){return t&&e.startsWith(t.keyword+" ")?e.substr(t.keyword.length+1):e}(this.state.typedUrl,this.props.typedSearchEngine)||this.state.typedUrl;return i.trim()?this._throttledSearchSuggest(i.trim(),a):void 0}),G(this,"_updateAutocompleteItem",e=>{this._isMounted&&this.setState({autocompleteData:e})}),G(this,"_throttledSearch",Object(U.a)((e,t)=>{if(!this._isMounted||this.props.pageId!==e||this._hasLeftPage)return Promise.resolve();this._cleanupState(),this._constructSearchSuggestion();const a=this.historySearch.search(t,{count:p.a.get(R.kAddressBarOmniboxNumberOfHistoryResults)}).catch(()=>[]);a.then(this.searchDoneHistory);const i=this.typedHistorySearch.search(t,{count:p.a.get(R.kAddressBarOmniboxNumberOfTypedHistoryResults)});i.then(this.searchDoneTypedHistory);const s=this.bookmarkSearch.search(t);return s.then(this.searchDoneBookmarks),this.updateDropdown(),this.props.autocompletionEnabled?s.then(e=>(p.a.get(R.kAddressBarAutocompletePreferBookmarks)&&0!==e.length&&this._updateAutocompleteItem(e),Promise.all([e,a,i]).then(([e,t,a])=>{this._updateAutocompleteItem([...e,...t,...a])}))):Promise.all([a,i,s]).then(()=>{})},200)),G(this,"performSearch",e=>{if(""===e.trim())return;const{inputWasIncremented:t,inputWasDecremented:a}=this._getInputWasIncrementedOrDecremented(e,this.state.typedUrl);(a||!t&&!a)&&this.setState({autocompletedItem:void 0}),this._hasLeftPage=!1,this._throttledSearch(this.props.pageId,e)}),G(this,"isUrlRevertable",()=>this.state.value!==this.props.pageUrl&&this.state.value!==this.props.displayUrl),G(this,"revertUrl",()=>this.isUrlRevertable()?new Promise(e=>{this.setUrlfieldState({editUrl:void 0,autocompleteValue:void 0}),this.setState({typedUrl:"",value:""},()=>e())}):Promise.resolve()),G(this,"_openOmniDropDown",()=>{this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen||!0!==this.props.prefValues[R.kAddressBarTypedHistoryEnabled]||y.a.showTypedHistory()}),G(this,"_onEscPressed",()=>{if(!(this._urlInput.current&&this._urlInput.current.isIMEOpen||(this.hideDropdown(),this.props.isTypedHistoryOpen))){this.state.value!==this.props.pageUrl&&this.state.value!==this.props.displayUrl?this.revertUrl().then(()=>this._urlInput.current&&this._urlInput.current.select()):(this.blur(),l.default.executeActions("COMMAND_FOCUS_WEBVIEW"))}}),G(this,"hideDropdown",()=>{if(this.state.isOmniDropdownOpen){if(this.state.selectedItem&&this.state.selectedItem.url){const t=this.state.selectedItem.url;e.nextTick(()=>{this.setUrlfieldState({editUrl:t})})}this.setState(e=>({isOmniDropdownOpen:!1,dropdownSelectionIndex:-1,selectedItem:void 0}))}this.props.isTypedHistoryOpen&&this.setState(t=>(e.nextTick(()=>{y.a.hideTypedHistory()}),{dropdownSelectionIndex:-1,selectedItem:void 0}))}),G(this,"getDropdown",()=>this._omniDropdownElement.current&&this._omniDropdownElement.current),G(this,"onPaste",e=>{const{clipboardData:t}=e;"text/plain"===t.types[0]&&(t.getData("text/plain").trim()||e.preventDefault())}),G(this,"onClipboardEvent",e=>{const{clipboardData:t,type:a,currentTarget:i}=e;if(!(i instanceof HTMLInputElement&&t))return;if(0!==i.selectionStart)return;let s=i.value;if(i.selectionEnd&&i.selectionEnd!==i.value.length&&(s=i.value.substring(0,i.selectionEnd)),this.props.prefValues[R.kAddressBarOmniboxCutcopyEncoded]&&(s=encodeURI(s).replace(/%25/g,"%")),s.length>=L.j&&s.endsWith("...")&&void 0!==this.props.pageUrl&&this.props.pageUrl.startsWith(s.substring(0,L.j))&&(s=this.props.pageUrl),Object(B.e)(s)&&s.match(/[\.\/]/)&&this.state.value===this.props.displayUrl){const e=k.a.parse(H.a.getDisplayUrl(this.props.pageUrl||""));e&&e.protocol&&(s=e.protocol+(e.slashes?"//":"")+s)}if(t.setData("text",s),"cut"===a){const e=i.value.substr(i.selectionEnd);this.setUrlfieldState({editUrl:e}),i.setSelectionRange(0,0),this.setState({selectedItem:void 0,typedUrl:e})}e.preventDefault()}),G(this,"_saveStateOnKeyEvent",({currentTarget:e})=>{const t=e.value?e.value:"";e.selectionStart===e.selectionEnd&&e.selectionStart===t.length&&this.setState({typedUrl:t})}),G(this,"_shortcutListener",(e,t,a,i)=>{if(t)switch(i){case h.a.KEY_ESCAPE:this._onEscPressed();break;case h.a.KEY_BACK_SPACE:case h.a.KEY_DELETE:1===a&&this.state.selectedItem&&this.onOmniDropdownItemDelete(this.state.selectedItem)}}),G(this,"_setUpComponentEventListeners",()=>{document.addEventListener("cut",this.onClipboardEvent,!1),M.a.tabsPrivate.onKeyboardChanged.addListener(this._shortcutListener)}),G(this,"_tearDownComponentEventListeners",()=>{document.removeEventListener("cut",this.onClipboardEvent,!1),M.a.tabsPrivate.onKeyboardChanged.removeListener(this._shortcutListener)}),G(this,"onFocus",()=>{this._isFocused=!0,this.props.onFocus&&this.props.onFocus(),this.props.showDropdown&&this._setUpComponentEventListeners()}),G(this,"onBlur",e=>{const{getSelection:t}=this.context;this._isFocused=!1;const a=t();a&&a.focusNode instanceof Element&&"UrlField"===a.focusNode.className&&a.removeAllRanges(),this.props.onBlur&&this.props.onBlur(),this.props.showDropdown&&this._tearDownComponentEventListeners(),this.hideDropdown()}),G(this,"_handleSelectedItemChanged",()=>{if(!this.props.onChange)return;const e=this.state.selectedItem&&this.state.selectedItem.url?this.state.selectedItem.url:"";this.props.onChange(e)}),G(this,"onKeyDown",e=>{const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1};if((this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen)&&(!this._urlInput.current||!this._urlInput.current.isIMEOpen)){const a=!t.ctrl&&t.alt&&!t.shift&&!t.command,i=!t.ctrl&&!t.alt&&t.shift&&!t.command,s=!(t.ctrl||t.alt||t.shift||t.command);switch(e.key){case"Escape":e.preventDefault(),e.stopPropagation();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),a?this._nav.sectionUp().then(this._handleSelectedItemChanged):this._nav.up().then(this._handleSelectedItemChanged);break;case"Tab":s?(e.preventDefault(),e.stopPropagation(),this._nav.down().then(this._handleSelectedItemChanged)):i&&(e.preventDefault(),e.stopPropagation(),this._nav.up().then(this._handleSelectedItemChanged));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),a?this._nav.sectionDown().then(this._handleSelectedItemChanged):this._nav.down().then(this._handleSelectedItemChanged);break;case"PageUp":this._nav.pageUp().then(this._handleSelectedItemChanged);break;case"PageDown":this._nav.pageDown().then(this._handleSelectedItemChanged)}}const a="z"===e.key&&!e.shiftKey&&e.ctrlKey;if(Object(P.a)(e)||"ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&"End"!==e.key&&"Home"!==e.key)if(a)this._handleUndo(e);else if("ArrowDown"!==e.key)if("ArrowUp"!==e.key);else{0===e.currentTarget.selectionStart&&(e.preventDefault(),this._openOmniDropDown())}else this._openOmniDropDown();else this._saveStateOnKeyEvent(e)}),G(this,"_urlFieldGo",(t,a)=>{this.props.onSubmit&&(this.props.onSubmit({url:t,...a?{options:a}:null}),this.revertUrl(),this.hideDropdown(),this.setState({autocompleteData:[]}),this._hasLeftPage=!0,e.nextTick(()=>this.blur()))}),G(this,"onKeyPress",e=>{this.props.onKeyPress&&this.props.onKeyPress(e)}),G(this,"onDragStart",e=>{this._suppressReplace=!0}),G(this,"onDragEnd",e=>{this._suppressReplace=!1}),G(this,"onDragEnter",e=>{if(e.stopPropagation(),!this._suppressReplace&&(e.preventDefault(),this.isDropAllowed(e))){const t=e.target;t instanceof HTMLInputElement&&t.classList.add("pseudo-selected")}}),G(this,"onDragOver",e=>{this.isDropAllowed(e)&&e.preventDefault()}),G(this,"onDragLeave",e=>{if(this._suppressReplace)return;const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")}),G(this,"onDrop",e=>{const t=e.target;if(t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected"),"function"==typeof this.props.onDrop)this._suppressReplace||(this.props.onDrop(e),e.stopPropagation(),e.preventDefault());else if(!0===this.props.handleDrop){e.stopPropagation(),e.preventDefault();let t="";const a=e.dataTransfer?e.dataTransfer.getData("text/uri-list"):"";if(a.length>0){const e=a.split("\n");e.length>0&&(t=e[0])}else t=e.dataTransfer?e.dataTransfer.getData("text/plain"):"";this.setUrlfieldState({editUrl:t}),this.focus()}}),G(this,"isDropAllowed",e=>{if(!e||!e.dataTransfer)return!1;const t=[s.b,"text/uri-list","text/plain"],a=e.dataTransfer;return!(1===a.types.length&&a.types.includes("text/plain")&&""===a.getData("text/plain"))&&a.types.some(e=>t.includes(e))}),G(this,"setDropdownSelectionIndex",e=>{this.setState({dropdownSelectionIndex:e,autocompleteData:[]})}),G(this,"setAutocompleteHighlight",this.setDropdownSelectionIndex),G(this,"onOmniDropdownItemClicked",(e,t)=>{this.revertUrl(),this.blur(),Array.isArray(e.urls)?y.a.go(e.urls,{...t,inCurrent:!1}):e.url&&y.a.go([e.url],{...t,enableSearch:!0}),this.hideDropdown()}),G(this,"_deleteBookmarkItem",e=>{const{id:t}=e;n.a.removeWithPromise([t]),this.setState(e=>({bookmarkResults:e.bookmarkResults.filter(e=>e.id!==t),selectedItem:void 0,dropdownSelectionIndex:-1}))}),G(this,"_deleteHistoryItem",e=>{y.a.deleteHistory(e.url),this.setState(t=>({historyResults:t.historyResults.filter(t=>t.url!==e.url),typedHistoryResults:t.typedHistoryResults.filter(t=>t.url!==e.url),selectedItem:void 0,dropdownSelectionIndex:-1}))}),G(this,"onOmniDropdownItemDelete",e=>{if(function(e){return Boolean(e.type)&&e.type.startsWith("OMNI_RESULT_BOOKMARK")}(e)){const t=e;return void this._deleteBookmarkItem(t)}const t=e;this._deleteHistoryItem(t)}),G(this,"_getInputDomElement",()=>{if(this._urlInput.current)return _.a.findDOMNode(this._urlInput.current)}),G(this,"getSearchEngine",()=>{if(!this.props.prefValues[R.kAddressBarInlineSearchEnabled]&&!this.props.typedSearchEngine)return;const e=this.props.typedSearchEngine||this.props.defaultSearchEngine,t="OMNI_TYPE_SEARCH";if(!e)return;const a=this.state.typedUrl;return{title:Object(I.a)("Search $1",[e.name]),type:t,items:[{id:e.id,type:t,displayText:this.props.typedSearchEngine?a.substring(e.keyword.length+1):a,text:a,url:a,disableDelete:!0,disablePatternHighlight:!0,favicon:b.a.createElement("img",{src:e.faviconUrl,__source:{fileName:V,lineNumber:1360}})}]}}),G(this,"_getFormattedOmniDropdownItems",()=>{const e=this.getSearchEngine(),t=this.props.topSites?Object(F.a)(this.props.topSites.filter(e=>e.title.includes(this.state.typedUrl)||e.url.includes(this.state.typedUrl)).map(e=>({...e,id:e.url,type:"OMNI_RESULT_TOPSITE"})),5):[];return[...e?[e]:[],{title:Object(I.a)("Nickname"),type:"OMNI_RESULT_BOOKMARK_NICKNAME",items:this.state.nicknameResults.map(e=>({...e,disableDelete:!0,favicon:e.url?b.a.createElement(c.a,{url:e.url,__source:{fileName:V,lineNumber:1390}}):b.a.createElement("img",{src:"/resources/folder@2x.png",__source:{fileName:V,lineNumber:1391}})}))},{title:Object(I.a)("Frequently Visited Pages"),type:"OMNI_RESULT_TOPSITE",items:this.props.prefValues[R.kAddressBarOmniboxShowTopSites]?t.map(e=>({...e,favicon:b.a.createElement(c.a,{url:e.url,__source:{fileName:V,lineNumber:1400}})})):[]},{title:Object(I.a)("Typed"),type:"OMNI_RESULT_TYPED_HISTORY",items:this.props.prefValues[R.kAddressBarOmniboxShowTypedHistory]&&this.props.prefValues[R.kAddressBarTypedHistoryEnabled]?this.state.typedHistoryResults.map(e=>({...e,favicon:b.a.createElement(c.a,{url:e.url,__source:{fileName:V,lineNumber:1412}})})):[]},{title:Object(I.a)("Suggestions"),type:"OMNI_RESULT_SUGGEST",items:this.state.suggestResults},{title:Object(I.a)("Bookmarks"),type:"OMNI_RESULT_BOOKMARK_UNKNOWN",items:this.props.prefValues[R.kAddressBarOmniboxShowBookmarks]?this.state.bookmarkResults.map(e=>({...e,disableDelete:!0,favicon:b.a.createElement(c.a,{url:e.url,__source:{fileName:V,lineNumber:1428}})})):[]},{title:Object(I.a)("History"),type:"OMNI_RESULT_HISTORY_UNKNOWN",items:this.state.historyResults.map(e=>({...e,favicon:b.a.createElement(c.a,{url:e.url,__source:{fileName:V,lineNumber:1437}})}))}]}),G(this,"_getFormattedTypedHistoryItems",()=>{const e=this.props.typedHistory?this.props.typedHistory.map(({url:e,text:t})=>({displayText:t||e,url:e,favicon:b.a.createElement(c.a,{url:e,__source:{fileName:V,lineNumber:1448}})})):[];return[{type:"OMNI_RESULT_TYPED_HISTORY",title:Object(I.a)("Typed History"),items:e}]}),G(this,"onTypedHistoryItemDelete",e=>{y.a.deleteHistory(e.url)}),G(this,"renderDropdown",({typedHistoryItems:e,omniDropdownItems:t})=>this.props.isTypedHistoryOpen?b.a.createElement(m.a,{ref:this._omniDropdownElement,onSelectedItemChanged:e=>this.setState({selectedItem:e}),onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:e,selectionIndex:this.state.dropdownSelectionIndex,onDeleteItem:this.onTypedHistoryItemDelete,onClickOutside:this.hideDropdown,__source:{fileName:V,lineNumber:1476}}):this.props.prefValues[R.kAddressBarOmniboxEnabled]&&this.state.isOmniDropdownOpen?b.a.createElement(m.a,{ref:this._omniDropdownElement,onSelectedItemChanged:e=>this.setState({selectedItem:e}),onNumberOfSelectableItemsChanged:this._nav.setNumberOfSelectableItems,onLinkItemClicked:this.onOmniDropdownItemClicked,items:t,selectionIndex:this.state.dropdownSelectionIndex,typedSearchEngine:this.props.typedSearchEngine,defaultSearchEngine:this.props.defaultSearchEngine,onClickOutside:this.hideDropdown,onDeleteItem:this.onOmniDropdownItemDelete,pattern:this.state.typedUrl,setAutocompleteHighlight:this.setDropdownSelectionIndex,__source:{fileName:V,lineNumber:1496}}):null),G(this,"handleSubmit",({autocompletedValue:e,typedValue:t},a)=>{if(a.ctrlKey&&this.props.prefValues[R.kAddressBarAutocompleteSuffixExpansionEnabled]&&this.props.prefValues[R.kAddressBarAutocompleteSuffixExpansionValue])return void this._urlFieldGo(Object(B.c)(t,this.props.prefValues[R.kAddressBarAutocompleteSuffixExpansionValue]));const i=e,n=a.shiftKey&&"shift"===this.props.prefValues[R.kAddressBarUrlOpenShortcut]||a.altKey&&"alt"===this.props.prefValues[R.kAddressBarUrlOpenShortcut]||!1,r=n&&a.ctrlKey,l={...Object(D.b)({ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey}),inCurrent:!n,inBackground:r,transition:w.a.TYPED},{selectedItem:c}=this.state;if(c)return"OMNI_RESULT_FOLDER_NICKNAME"===c.type?void y.a.go(c.urls,{...l,inCurrent:!1}):void this._urlFieldGo(c.url,l);if(o.a.hasNickname(i)){const{transition:e,...t}=l;return s.a.open({bookmarks:o.a.getNicknamed(i),...t},!0),this.revertUrl(),this.blur(),this.hideDropdown(),this.setState({autocompleteData:[]}),void(this._hasLeftPage=!0)}this._urlFieldGo(i,l)}),G(this,"onMouseUp",e=>{const{getSelection:t}=this.context;e.currentTarget.selectionStart})}componentDidMount(){this._isMounted=!0,E.a.addChangeListener(this._onSearchSuggestionsChanged),O.a.addChangeListener(this._onUrlbarStoreChanged)}componentWillUnmount(){this._isMounted=!1,E.a.removeChangeListener(this._onSearchSuggestionsChanged),O.a.removeChangeListener(this._onUrlbarStoreChanged),this._tearDownComponentEventListeners()}static getDerivedStateFromProps(e,t){return-1===t.dropdownSelectionIndex&&Object(x.a)(e.displayUrl)!==t.typedUrl?{value:"string"==typeof e.editUrl?e.editUrl:e.displayUrl}:t.selectedItem?{value:t.selectedItem.text||t.selectedItem.url||""}:{value:e.editUrl||t.typedUrl}}focus(){this._urlInput.current&&this._urlInput.current.focus()}blur(){this._urlInput.current&&this._urlInput.current.blur()}select(){this._urlInput.current&&this._urlInput.current.select()}updateDropdown(){if(!this._hasLeftPage&&this.props.showDropdown){if(!1===this.props.prefValues[R.kAddressBarOmniboxEnabled])return;if(!this._isFocused)return;this.state.isOmniDropdownOpen||this.props.isTypedHistoryOpen&&this.hideDropdown(),this._ignoreNextSelectEvent=!0,this.setState({isOmniDropdownOpen:!0,dropdownSelectionIndex:-1})}}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex),this.props.isTypedHistoryOpen&&!e.isTypedHistoryOpen&&this.focus(),this.props.pageId!==e.pageId&&this._cleanupState()}render(){const e={typedHistoryItems:this._getFormattedTypedHistoryItems(),omniDropdownItems:this._getFormattedOmniDropdownItems()};return b.a.createElement("div",{className:"UrlField",__source:{fileName:V,lineNumber:1615}},b.a.createElement(i.a,{ref:this._urlInput,autoFocus:this.props.autoFocus,className:this.props.className||"",autocompleteOnTitle:Boolean(this.props.autocompleteOnTitle),onSubmit:this.handleSubmit,autocompleteData:this.state.autocompleteData,value:this.state.value,onValueChange:this.onValueChange,onAutocompleteValueChange:this.onAutocompleteValueChange,disabled:this.props.disabled?this.props.disabled:void 0,placeholder:this.props.placeholder?this.props.placeholder:void 0,title:this.props.title?this.props.title:void 0,readOnly:this.props.readonly,onBlur:this.onBlur,onFocus:this.onFocus,onSelect:this.onSelected,onClick:this.onClick,onContextMenu:this.onClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onKeyPress:this.onKeyPress,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onKeyDown:this.onKeyDown,onCut:this.onClipboardEvent,onCopy:this.onClipboardEvent,onPaste:this.onPaste,__source:{fileName:V,lineNumber:1616}}),this.renderDropdown(e))}}G(Q,"contextType",T.a),t.a=Object(u.a)(Q,z)}).call(this,a(64))},,,function(e,t,a){"use strict";var i=a(11);const s=new class{addContentScript(e,t){i.a.dispatch({actionType:"CONTENT_SCRIPT_PAGE_ADD",pageId:e,script:t})}removeContentScript(e,t){i.a.dispatch({actionType:"CONTENT_SCRIPT_PAGE_REMOVE",pageId:e,script:t})}toggleContentScript(e,t){i.a.dispatch({actionType:"CONTENT_SCRIPT_PAGE_TOGGLE",pageId:e,script:t})}};t.a=s},function(e,t,a){"use strict";var i=a(233),s=a(115),n=a(9),r=a(11),o=a(53),l=a(7),c=a(504),d=a.n(c),u=a(203);const h=new class{setReaderModeStyle(){r.a.dispatch({actionType:"READERMODE_SET_STYLE"})}resetReaderModeStyle(){r.a.dispatch({actionType:"READERMODE_RESET"})}readerableActive(e){i.a.addContentScript(e,u.a)}readerableInactive(e){i.a.removeContentScript(e,u.a)}readerableToggle(e=n.a.getActivePage()){d()(e.url)&&(s.a.isReaderModeActive(e.id)?h.readerableInactive(e.id):h.readerableActive(e.id),o.a.doAction("focusWebView"))}};l.default.runtime.onMessage.addListener((function(e){if(e&&e.type)switch(e.type){case"SET_RM":if(!e.payload||"boolean"!=typeof e.payload.isReaderable||"number"!=typeof e.payload.pageId)return;r.a.dispatch({actionType:"READERMODE",isReaderable:e.payload.isReaderable,pageId:e.payload.pageId});break;case"SET_RM_STYLE":h.setReaderModeStyle()}})),t.a=h},function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r}));a(20);function i(e){return!(e.attachments&&0!==e.attachments.length||e.content||e.title||e.url||e.children&&0!==e.children.length)}function s(e,t){if(e.title)return e.title;if(!e.content)return t||"";return e.content.split("\n")[0].trim().replace(/ {2,}/g," ").replace(/^#+ /g,"").trim()}function n({content:e}){return e?e.replace(/\n+/g,"").length:0}function r({content:e}){return e?e.trim().split(/\s+/g).length:0}},,,,function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(61),r=a.n(n),o=a(58);const l={},c={};function d(e,t){return r.a.parse(e).hostname===r.a.parse(t).hostname}function u(e,t,a,i){e.rewindHistory||(e.rewindHistory=[],e.rewindIndexes=[]);const s=e.prev&&e.prev.url&&d(e.prev.url,t.url);return a!==i.length-1&&(e.prev&&!s&&a<i.length-1?(i.length-1-a>1&&(e.rewindHistory.length>0&&d(e.rewindHistory[e.rewindHistory.length-1].url,e.prev.url)&&e.rewindHistory[e.rewindHistory.length-1].url!==e.prev.url?(e.rewindHistory.push(e.prev),e.rewindIndexes.push(i.length-a-2)):d(i[i.length-1].url,e.prev.url)&&i[i.length-1].url!==e.prev.url&&(e.rewindHistory.push(e.prev),e.rewindIndexes.push(i.length-a-2))),e.rewindHistory.push(t),e.rewindIndexes.push(i.length-a-1)):0===a&&i.length>0&&(e.rewindHistory.push(t),e.rewindIndexes.push(i.length-a-1))),e.prev=t,e}const h=new class extends o.EventEmitter{getState(e){return l[e.get("id")]}setState(e,t){l[e]=t}getFastForwardUrl(e){return(l[e]||c).forwardUrl||""}getRewindRelativeIndex(e){if(l[e]){const{rewindIndexes:t}=l[e];if(Array.isArray(t)&&t.length>0)return t[0]}return 0}getRewindHistory(e){return(l[e.get("id")]||c).rewindHistory}getRewindIndexes(e){return(l[e.get("id")]||c).rewindIndexes}emitChange(){this.emit(s.a.CHANGED)}addChangeListener(e){this.on(s.a.CHANGED,e)}removeChangeListener(e){this.removeListener(s.a.CHANGED,e)}setFastForwardUrl(e){"number"==typeof e.pageId&&(l[e.pageId]={...l[e.pageId],forwardUrl:e.forwardUrl},h.emitChange())}_pageHistoryToRewindHistory(e,t,a){return(a=a.slice(0,t+1)).reduceRight(u,{})}setRewindInfo(e){const{rewindHistory:t,rewindIndexes:a}=this._pageHistoryToRewindHistory(e.currentHostname,e.currentIndex,e.history);l[e.pageId]={...l[e.pageId],rewindHistory:t,rewindIndexes:a},h.emitChange()}};i.a.register(e=>{switch(e.actionType){case s.a.FAST_FORWARD_SET_FORWARD_URL:h.setFastForwardUrl(e);break;case"CHROME_TABS_UPDATED":"loading"===e.args[1].status&&h.setFastForwardUrl({pageId:e.args[2].id,forwardUrl:""});break;case s.a.FAST_FORWARD_SET_REWIND_INFO:h.setRewindInfo(e);break;case s.a.FAST_FORWARD_COPY_STATE:h.setState(e.pageId,e.fastForwardState),h.emitChange();break;default:return!0}return!0}),t.a=h},function(e,t,a){"use strict";a.d(t,"a",(function(){return ve}));var i=a(2),s=a(401),n=a.n(s),r=a(402),o=a(436),l=a(147),c=a(47),d=a.n(c),u=a(403),h=a.n(u),m=a(404),p=a.n(m),g=a(405),b=a.n(g),f=a(406),_=a.n(f),N=a(407),v=a.n(N),E=a(408),w=a.n(E),S=a(409),C=a.n(S),k=a(410),y=a.n(k),O=a(411),A=a.n(O),T=a(412),I=a.n(T),D=a(413),P=a.n(D),x=a(414),M=a.n(x),L=a(415),j=a.n(L),B=a(416),R=a.n(B),F=a(417),U=a.n(F),W=a(418),H=a.n(W),V=a(419),G=a.n(V),K=a(420),z=a.n(K),Y=a(421),$=a.n(Y),Q=a(422),Z=a.n(Q),q=a(423),X=a.n(q),J=a(424),ee=a.n(J),te=a(425),ae=a.n(te),ie=a(426),se=a.n(ie),ne=a(427),re=a.n(ne),oe=a(428),le=a.n(oe),ce=a(429),de=a.n(ce),ue=a(430),he=a.n(ue),me=a(431),pe=a.n(me),ge=a(432),be=a.n(ge),fe=a(433),_e=a.n(fe);const Ne={FORBID_TAGS:["style"],ALLOW_UNKNOWN_PROTOCOLS:!0};class ve{constructor(){d.a.registerLanguage("apache",h.a),d.a.registerLanguage("applescript",p.a),d.a.registerLanguage("bash",b.a),d.a.registerLanguage("basic",_.a),d.a.registerLanguage("coffeescript",v.a),d.a.registerLanguage("cpp",w.a),d.a.registerLanguage("css",C.a),d.a.registerLanguage("diff",y.a),d.a.registerLanguage("django",A.a),d.a.registerLanguage("dockerfile",I.a),d.a.registerLanguage("dos",P.a),d.a.registerLanguage("ini",M.a),d.a.registerLanguage("java",j.a),d.a.registerLanguage("javascript",R.a),d.a.registerLanguage("json",U.a),d.a.registerLanguage("less",H.a),d.a.registerLanguage("markdown",G.a),d.a.registerLanguage("mathematica",z.a),d.a.registerLanguage("matlab",$.a),d.a.registerLanguage("nginx",Z.a),d.a.registerLanguage("objectivec",X.a),d.a.registerLanguage("perl",ee.a),d.a.registerLanguage("python",ae.a),d.a.registerLanguage("ruby",se.a),d.a.registerLanguage("scss",re.a),d.a.registerLanguage("shell",le.a),d.a.registerLanguage("sql",de.a),d.a.registerLanguage("swift",he.a),d.a.registerLanguage("typescript",pe.a),d.a.registerLanguage("vim",be.a),d.a.registerLanguage("xml",_e.a),this.remarkable=new r.a("commonmark",{html:!0,breaks:!0,typographer:!1,quotes:Object(i.a)("“”‘’"),highlight:(e,t)=>{if(t&&d.a.getLanguage(t))try{return d.a.highlight(t,e).value}catch(e){}return""}}),this.remarkable.use(n.a),this.remarkable.use(o.a);const e=this.remarkable.inline.validateLink,t=/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,a=/^\s*blob:chrome-extension:\/\/[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i;this.remarkable.inline.validateLink=i=>e(i)||i.match(t)||i.match(a),this.remarkable.inline.ruler.enable(["del","mark","sub","sup"]),this.remarkable.block.ruler.enable(["table"])}getRawMarkup(e){return Object(l.sanitize)(this.remarkable.render(e),Ne)}}},,,,,,,,,function(e,t,a){"use strict";t.a=function(){return"win"}},,,,function(e,t,a){"use strict";t.a={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Capslock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"None",60:"<",61:"=",63:"ß",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",92:"None",93:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"*",107:"+",108:",",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"Scrolllock",160:"^",161:"!",163:"#",164:"$",165:"None",166:"BrowserBack",167:"BrowserForward",169:")",170:"*",171:"+",173:"None",174:"None",175:"None",176:"Next",177:"Previous",178:"Stop",179:"None",180:"None",181:"None",182:"None",183:"None",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"None",193:"None",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"Meta",225:"AltGraph",226:"None",230:"None",233:"None",234:"None",255:"None"}},function(e,t,a){"use strict";function i(e){return null===e?{}:e}a.d(t,"a",(function(){return i}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var i=a(32),s=a(15),n=a.n(s),r=a(21);class o extends(Object(r.Record)({title:"",url:"",query:""})){}class l extends(Object(r.Record)({text:"",startTime:n()().startOf("day"),endTime:n()().endOf("day"),rangePicker:"today",displayMode:"day",parsedFilter:new o,dayPickerVisible:!1,moreInfoVisible:!0,monthEntriesVisible:!0,searchURL:!0,searchTitle:!0,range:null,sortOrder:i.a.DESCENDING_SORT,sortField:"visitTime"})){}},function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=(a(106),a(11)),r=a(21),o=a(123);let l=new r.Map;const c=new class extends s.a{constructor(...e){var t,a,i;super(...e),t=this,a="emitChange",i=Object(o.a)(e=>{this.emit("change",e)},250),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}getProgressInfo(e){const t=l.get(e);if(t)return t}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};c.dispatchToken=n.a.register(e=>{switch(e.actionType){case"PAGE_SET_PROGRESS":{const{pageId:t,progressState:a}=e;!function(e,t){const a=l.get(t);e!==a&&(a&&a.progress>e.progress&&(e.progress=a.progress),l=l.set(t,e),c.emitChange())}(a,t);break}case"PAGE_CLOSE":e.pages.forEach(e=>{l.has(e.id)&&(l=l.remove(e.id),c.emitChange())})}}),t.a=c},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var i=a(7);t.a=function(e,t){i.default.windows.get(e,a=>{const s=a.extData&&JSON.parse(a.extData)||{},n=JSON.stringify(Object.assign(s,t));i.default.windows.update(e,{extData:n})})}},,function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var i=a(195),s=a(61),n=a.n(s),r=a(20);const o=function(e){if(r.a.isInternalUrl(e.get("url"))){if(Object.keys(r.a.internals).find(t=>e.get("url").startsWith(r.a.internals[t])))return r.a.getDisplayTitle(e)}return n.a.parse(Object(i.a)(e.get("url"))).hostname},l=function(e,t){const a=o(e);return[a,t.filter(e=>"tab"===e.type).filter(e=>!e.getIn(["page","pinned"])).filter(e=>o(e.get("page"))===a)]}},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAyUlEQVR42q3TvQrCMBDAcV+ro7vvURx9AXVyaUGwuzinfsw66OYD+AJ2K21DUlooDaXEXOGki7mCDfy4G5L/lslsvvjLuAFz1j9MBwe01queped5F8dxthAZGti0bfvFGHsIISRGyEDTNDsjAEqpAALanH7EGqjr+tDnuu4+DMM78H3/DHesgaqqjhYnMlCW5bUoihuAHSciA+bBM8/zDuw4cScDUsqXDRngnL9RlmURTtzJQJIkPE3TDuw4ERmI41jZkIEhRv2NH2DDzUU+EiSYAAAAAElFTkSuQmCC"},,function(e,t,a){"use strict";var i=a(0),s=a(12),n=a(2),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ErrorBoundary.jsx";class o extends i.Component{constructor(...e){var t,a,i;super(...e),t=this,a="state",i={hasError:!1,stack:"",existingChildren:this.props.children},a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}static getDerivedStateFromProps(e,t){return e.children!==t.existingChildren?{hasError:!1,existingChildren:e.children}:null}static getDerivedStateFromError(e){return{hasError:!0,stack:e.stack}}componentDidCatch(e,t){return null}openBugReport(){s.a.openURL("https://vivaldi.com/bugreport/")}render(){return this.state.hasError?i.createElement("div",{className:"error-boundary",__source:{fileName:r,lineNumber:59}},i.createElement("h1",{__source:{fileName:r,lineNumber:60}},Object(n.a)("An error occurred")),i.createElement("pre",{__source:{fileName:r,lineNumber:61}},this.state.stack),i.createElement("p",{__source:{fileName:r,lineNumber:62}},Object(n.a)("Please consider reporting the issue to help us fix it")),i.createElement("input",{type:"button",onClick:this.openBugReport,value:Object(n.a)("Report issue"),__source:{fileName:r,lineNumber:65}})):this.props.children}}t.a=o},,,function(e,t,a){"use strict";(function(e){var i=a(0),s=a(52),n=a(29),r=a.n(n),o=a(25),l=a(2),c=a(17),d=a.n(c),u=a(31),h=a(130),m=a(155),p=a(13),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\SortableList.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends i.Component{constructor(t){super(t),b(this,"dropSupport",!1),b(this,"moveUpCombo",Object(m.b)("alt+up")),b(this,"moveDownCombo",Object(m.b)("alt+down")),b(this,"setSelected",(e,t)=>{void 0!==t&&(this.setState({isCreating:this.props.onCancelCreate&&t}),t&&this.props.onCreateItem?this.props.onCreateItem():!t&&this.props.onCancelCreate&&this.props.onCancelCreate()),this.setState({selectedIndex:e}),"function"==typeof this.props.onSelectItem&&this.props.onSelectItem(e)}),b(this,"loadItemAt",t=>{const{HTMLElement:a}=this.context;this.setSelected(t),e.nextTick(()=>{const e=r.a.findDOMNode(this.refs.items);if(e instanceof a){const t=e.querySelector(".item-selected");t&&t.focus()}})}),b(this,"setIsCreating",t=>{const{HTMLElement:a}=this.context;this.setSelected(this.props.items.length,!0),e.nextTick(()=>{const e=r.a.findDOMNode(this.refs.items);e instanceof a&&(e.scrollTop=e.scrollHeight)})}),b(this,"removeItem",e=>{e>=this.props.items.length?("function"==typeof this.props.onCancelCreate&&this.props.onCancelCreate(),this.setSelected(this.props.items.length-1,!1)):"function"==typeof this.props.considerRemovingItem?this.props.considerRemovingItem():"function"==typeof this.props.onRemove&&this.props.onRemove(this.state.selectedIndex)}),b(this,"moveDown",()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex+1<this.props.items.length&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex+1),this.loadItemAt(this.state.selectedIndex+1))}),b(this,"moveUp",()=>{this.props.moveItem&&this.props.items&&this.props.items.length>1&&this.state.selectedIndex>0&&(this.props.moveItem(this.state.selectedIndex,this.state.selectedIndex-1),this.loadItemAt(this.state.selectedIndex-1))}),b(this,"focusItem",(e,t)=>{const{HTMLElement:a}=this.context;if(this.state.isCreating)return;this.state.selectedIndex!==e&&this.loadItemAt(e);const i=r.a.findDOMNode(this.refs.items);i instanceof a&&i.focus(),t&&t.stopPropagation()}),b(this,"onDoubleClick",(e,t)=>{this.props.onActivate&&this.props.onActivate(e),t.stopPropagation()}),b(this,"clearDndTimer",()=>{this.dndTimerId&&(clearTimeout(this.dndTimerId),delete this.dndTimerId)}),b(this,"onDragStartButton",(e,t)=>{this.props.supportDragAndDrop&&this.props.mimeType&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(this.props.mimeType,e))}),b(this,"onDragEnter",e=>{this.props.supportDragAndDrop&&this.props.mimeType&&(e.preventDefault(),e.stopPropagation(),this.dropSupport=e.dataTransfer.types.some(e=>e===this.props.mimeType),e.dataTransfer.dropEffect=this.dropSupport?"move":"none")}),b(this,"onDragLeave",e=>{this.props.supportDragAndDrop&&(e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout(()=>{delete this.dndTimerId,this.setState({dropIndex:-1,dropPosition:""})},u.f))}),b(this,"getDropPosition",e=>{let t=0;const a=e.currentTarget.getBoundingClientRect(),i=a.height;return t=(e.clientY-a.top)/i,t<=.5?"above":"below"}),b(this,"onDragOverButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport){t.dataTransfer.dropEffect="move",this.clearDndTimer();const a=this.getDropPosition(t);this.state.dropIndex===e&&this.state.dropPosition===a||this.setState({dropIndex:e,dropPosition:a})}}),b(this,"onDragOver",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport){e.dataTransfer.dropEffect="move",this.clearDndTimer();const t=this.props.items.length>0?this.props.items.length-1:0,a="below";this.state.dropIndex===t&&this.state.dropPosition===a||this.setState({dropIndex:t,dropPosition:a})}}),b(this,"onDropButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropSupport&&this.props.mimeType){const a=t.dataTransfer.getData(this.props.mimeType);if(void 0!==a){let i=e+("below"===this.getDropPosition(t)?1:0);a<i&&(i-=1),this.props.moveItem&&(this.props.moveItem(a,i),this.loadItemAt(i))}}this.setState({dropIndex:-1,dropPosition:""})}),b(this,"onDrop",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropSupport&&this.props.mimeType){const t=e.dataTransfer.getData(this.props.mimeType);if(void 0!==t){let e=this.props.items.length;t<e&&(e-=1),this.props.moveItem&&(this.props.moveItem(t,e),this.loadItemAt(e))}}this.setState({dropIndex:-1,dropPosition:""})}),b(this,"onDragEnd",()=>{this.setState({dropIndex:-1,dropPosition:""})}),b(this,"onKeyDown",e=>{const t=s.a.keyComboFromEvent(e.nativeEvent);if("tab"!==t&&this.props.items&&this.props.items.length>0){let a=!0;const i=this.props.items.length;switch(t){case"up":this.loadItemAt(this.state.selectedIndex<=0?i-1:this.state.selectedIndex-1);break;case"down":this.loadItemAt(this.state.selectedIndex+1>=i?0:this.state.selectedIndex+1);break;case"del":case"backspace":this.removeItem(this.state.selectedIndex);break;case"home":this.loadItemAt(0);break;case"end":this.loadItemAt(i-1);break;case"alt+up":this.moveUp();break;case"alt+down":this.moveDown();break;case"enter":case"space":this.props.onActivate&&this.props.onActivate(this.state.selectedIndex);break;case"pageup":case"pagedown":default:a=!1}a&&e.preventDefault()}}),b(this,"getButtonClassByIndex",e=>d()({item:!0,"item-default":this.props.items[e].isDefault,"item-selected":e===this.state.selectedIndex&&!this.state.isCreating,dragoverAbove:e===this.state.dropIndex&&"above"===this.state.dropPosition,dragoverBelow:e===this.state.dropIndex&&"below"===this.state.dropPosition})),this.state={selectedIndex:this.props.selectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,dropIndex:-1,dropPosition:""}}componentWillUnmount(){this.clearDndTimer()}componentDidUpdate(e){if(e.items.length!==this.props.items.length){let t=-1;if(this.props.items.length>0)if(0===e.items.length)t=0;else if(this.props.items.length>e.items.length){const a=this.props.items.filter(({key:t})=>!e.items.some(({key:e})=>e===t));t=this.props.items.indexOf(a[0])}else-1!==this.state.selectedIndex&&(t=Math.min(this.state.selectedIndex,this.props.items.length-1),t===this.props.items.length-1&&this.focusItem(t));this.setSelected(t,!1)}}render(){const{items:e,filter:t}=this.props,{selectedIndex:a}=this.state,s=!!(null!=a&&e[a])&&e[a].isDefault;return i.createElement(i.Fragment,null,i.createElement("div",{ref:"items",className:"master-items",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop,onKeyDown:this.onKeyDown,__source:{fileName:g,lineNumber:462}},0===e.length&&!this.state.isCreating&&this.props.renderEmptyList&&this.props.renderEmptyList(),e.map((e,a)=>i.createElement("button",{title:e.name,className:this.getButtonClassByIndex(a),key:a,tabIndex:-1,draggable:this.props.supportDragAndDrop,onContextMenu:this.props.onContextMenu?this.props.onContextMenu.bind(this,a):null,onDragStart:this.onDragStartButton.bind(this,a),onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,a),onDrop:this.onDropButton.bind(this,a),onDragEnd:this.onDragEnd,onMouseDown:this.focusItem.bind(this,a),onDoubleClick:this.onDoubleClick.bind(this,a),__source:{fileName:g,lineNumber:474}},this.props.renderListItem({...e,name:Object(h.b)(e.name,t)}))),"function"==typeof this.props.renderCreateListItem&&this.state.isCreating&&this.props.renderCreateListItem()&&i.createElement("button",{className:"item item-selected",__source:{fileName:g,lineNumber:504}},this.props.renderCreateListItem())),(this.props.optionsList||this.props.onRemove||this.props.moveItem)&&i.createElement("div",{className:"master-toolbar",__source:{fileName:g,lineNumber:514}},this.props.optionsList&&i.createElement("select",{className:"button-toolbar sortable-list-options",onChange:this.props.onCreateItem,title:this.props.addTipString,defaultValue:null,__source:{fileName:g,lineNumber:516}},this.props.optionsList&&this.props.optionsList.map(e=>i.createElement("option",{key:e.key,value:e.key,__source:{fileName:g,lineNumber:524}},e.value,""!==e.key&&` [${e.key}]`))),i.createElement("button",{className:"button-toolbar",style:this.props.optionsList?{pointerEvents:"none"}:null,tabIndex:this.props.optionsList?-1:null,title:this.props.addTipString,onClick:this.setIsCreating,disabled:this.props.onCancelCreate&&this.state.isCreating,dangerouslySetInnerHTML:{__html:p.f.medium},__source:{fileName:g,lineNumber:533}}),i.createElement("button",{className:"button-toolbar",title:this.props.deleteTipString,onClick:this.removeItem.bind(this,this.state.selectedIndex),disabled:!this.state.isCreating&&e.length<1||s,dangerouslySetInnerHTML:{__html:p.Lb.medium},__source:{fileName:g,lineNumber:544}}),this.props.moveItem&&i.createElement(i.Fragment,null,i.createElement("button",{className:"button-toolbar button-move-up",title:Object(l.a)("Move Up ($1)",[this.moveUpCombo]),onClick:this.moveUp,dangerouslySetInnerHTML:{__html:p.m.medium},__source:{fileName:g,lineNumber:556}}),i.createElement("button",{className:"button-toolbar button-move-down",title:Object(l.a)("Move Down ($1)",[this.moveDownCombo]),onClick:this.moveDown,dangerouslySetInnerHTML:{__html:p.j.medium},__source:{fileName:g,lineNumber:562}}))))}}b(f,"contextType",o.a),t.a=f}).call(this,a(64))},,,,,,,function(e,t,a){"use strict";var i=a(50),s=a(10),n=a(2),r=a(5),o=a(13),l=a(1),c=a(200);var d={x1:0,y1:0,x2:0,y2:0,captureRectElm:null,captureAreaElm:null,captureButtonElm:null,callback_:null,captureUIFormat_:"png",dragInProgress_:!1,saveToClipboard_:!1,captureToBase64_:!1,captureFullpage(e,t,a,i){const n={encodeFormat:t,encodeQuality:85,fullPage:!0,height:3e4,saveToDisk:"clipboard"!==a,showFileInPath:!0,copyToClipboard:"clipboard"===a,saveFilePattern:s.a.get(l.kWebpagesCaptureSaveFilePattern)};r.a.thumbnails.captureTab(e,n,e=>{i(e)})},setupCaptureOverlay_:function(){var e=document.getElementById("app");this.captureAreaElm=document.getElementById("capture-area"),this.captureAreaElm||(this.captureAreaElm=document.createElement("div"),this.captureAreaElm.id="capture-area",this.captureAreaElm.style.touchAction="none",e&&e.appendChild(this.captureAreaElm)),this.captureRectElm=document.getElementById("capture-rect"),this.captureRectElm||(this.captureRectElm=document.createElement("div"),this.captureRectElm.id="capture-rect",e&&e.appendChild(this.captureRectElm)),this.captureButtonElm=document.getElementById("capture-button"),this.captureButtonElm||(this.captureButtonElm=document.createElement("button"),this.captureButtonElm.id="webpage-capture-button",this.captureButtonElm.className="webpage-button",this.captureButtonElm.type="button",this.captureButtonElm.title=Object(n.a)("Capture Selection"),this.captureButtonElm.style.zIndex=1002,this.captureButtonElm.style.position="absolute",this.captureButtonElm.style.cursor="default",this.captureButtonElm.style.display="none",this.captureButtonElm.addEventListener("click",this.onButtonClick.bind(this)),this.captureButtonElm.innerHTML=o.x.medium,e&&e.appendChild(this.captureButtonElm)),this.captureAreaElm.hidden=0,this._installEventListeners()},_cleanupDrag:function(){var e=document.getElementById("app");e&&(this.captureAreaElm&&e.removeChild(this.captureAreaElm),this.captureRectElm&&e.removeChild(this.captureRectElm),this.captureButtonElm&&e.removeChild(this.captureButtonElm)),this._removeEventListeners(),this.x1=this.x2=this.y1=this.y2=0,this.captureAreaElm=this.captureRectElm=this.captureButtonElm=null,this.dragInProgress_=!1},captureArea:function(e,t,a,i){return new Promise((s,n)=>{this.callback_=(e,t)=>{i&&i(e,t),e&&n("Capture cancelled"),s(t)},this.captureUIFormat_=e,this.saveToClipboard_="clipboard"===t,this.captureToBase64_=a,this.setupCaptureOverlay_()})},captureAreaCommand:function(e,t){d.captureArea(e,t,!1,e=>{"clipboard"!==t||e||Object(c.a)({title:Object(n.a)("Area Captured"),body:Object(n.a)("Image stored in the clipboard.")})})},_updateCaptureButton:function(e,t,a,i,s){this.captureButtonElm.style.display=!0===e?"block":"none",e&&(this.captureButtonElm.style.left=t+i-30-3+"px",this.captureButtonElm.style.top=a+s-28-3+"px",this.captureButtonElm.style.width="30px",this.captureButtonElm.style.height="28px")},_calculateRectSize:function(){return{x3:Math.min(this.x1,this.x2),x4:Math.max(this.x1,this.x2),y3:Math.min(this.y1,this.y2),y4:Math.max(this.y1,this.y2)}},_reCalc:function(){const{x3:e,x4:t,y3:a,y4:i}=this._calculateRectSize();var s=document.body.clientWidth,n=document.body.clientHeight;this.captureRectElm.style.left=e+"px",this.captureRectElm.style.top=a+"px",this.captureRectElm.style.width=t-e+"px",this.captureRectElm.style.height=i-a+"px",this.captureAreaElm.style.backgroundColor="transparent",this.captureAreaElm.style.borderWidth=a+"px "+(s-t)+"px "+(n-i)+"px "+e+"px"},_keyEventListener:function(e,t,a,s){t&&s===i.a.KEY_ESCAPE&&d._cancelCapture()},handlePointerDown:function(e){e.target===this.captureButtonElm||(this._updateCaptureButton(!1),this.x1=this.x2=e.clientX,this.y1=this.y2=e.clientY,this._reCalc(),this.captureRectElm.hidden=0,this.dragInProgress_=!0,e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString()))},handlePointerUp:function(e){if(this.dragInProgress_){const t=Math.min(this.x1,this.x2),a=Math.min(this.y1,this.y2),i=Math.max(this.x2,this.x1)-Math.min(this.x1,this.x2),s=Math.max(this.y2,this.y1)-Math.min(this.y2,this.y1);this.dragInProgress_=!1,e.target!==this.captureButtonElm&&this._updateCaptureButton(!0,t,a,i,s),e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString())}},handlePointerMove:function(e){this.dragInProgress_&&(this.x2=e.clientX,this.y2=e.clientY,this.x2>this.x1?document.body.clientWidth-this.x2<10&&(this.x2=document.body.clientWidth):this.x2<10&&(this.x2=0),this.y2>this.y1?document.body.clientHeight-this.y2<10&&(this.y2=document.body.clientHeight):this.y2<10&&(this.y2=0),this._reCalc())},onButtonClick:function(e){const t=Math.min(this.x1,this.x2),a=Math.min(this.y1,this.y2),i=Math.max(this.x2,this.x1)-Math.min(this.x1,this.x2),n=Math.max(this.y2,this.y1)-Math.min(this.y2,this.y1);this._finishCapture(()=>{r.a.thumbnails.captureUI({posX:t,posY:a,width:i,height:n,encodeFormat:this.captureUIFormat_,encodeQuality:85,saveToDisk:!0!==this.captureToBase64_,showFileInPath:!0!==this.captureToBase64_,copyToClipboard:this.saveToClipboard_,saveFilePattern:s.a.get(l.kWebpagesCaptureSaveFilePattern)},(e,t)=>{this.callback_&&this.callback_(!e,t)})})},handleEvent:function(e){switch(e.type){case"pointerdown":this.handlePointerDown(e);break;case"pointerup":this.handlePointerUp(e);break;case"pointermove":this.handlePointerMove(e)}},_installEventListeners:function(){r.a.tabsPrivate.onKeyboardChanged.addListener(this._keyEventListener),this.captureAreaElm.addEventListener("pointerdown",this),this.captureAreaElm.addEventListener("pointerup",this),this.captureAreaElm.addEventListener("pointermove",this)},_removeEventListeners:function(){r.a.tabsPrivate.onKeyboardChanged.removeListener(this._keyEventListener),this.captureAreaElm.removeEventListener("pointerdown",this),this.captureAreaElm.removeEventListener("pointerup",this),this.captureAreaElm.removeEventListener("pointermove",this)},_animationEnded:function(e,t){t.target===this.captureAreaElm&&(this._cleanupDrag(),e(),t.stopPropagation(),t.preventDefault())},_finishCapture:function(e){this.captureButtonElm.style.display="none",this.captureRectElm.style.display="none",this.captureAreaElm.classList.add("capture-fade-out"),this.captureAreaElm.style.borderColor="rgba(0, 0, 0, 0)",this.captureAreaElm.addEventListener("transitionend",this._animationEnded.bind(this,e),!0)},_cancelCapture:function(){this._cleanupDrag(),this.callback_&&this.callback_(!0)}};t.a=d;const{captureAreaCommand:u}=d},function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(58);const r=new class extends n.EventEmitter{emitChange(){this.emit(s.a.CHANGED)}emitChangeParam(e){this.emit(s.a.CHANGED,e)}getSearchSuggestURL(e,t=""){return t.replace(/\%s/gi,encodeURIComponent(e))}addChangeListener(e){this.on(s.a.CHANGED,e)}removeChangeListener(e){this.removeListener(s.a.CHANGED,e)}};i.a.register(e=>{switch(e.actionType){case s.a.SEARCH_SUGGEST_RESULT:const t=JSON.parse(e.json)[1].filter(e=>"string"==typeof e);r.emitChangeParam({query:e.query,suggestions:t,uid:e.uid})}}),t.a=r},function(e,t,a){"use strict";var i=a(61),s=a.n(i);t.a=function(e){if(!e)return"";const{hostname:t}=s.a.parse(e);return t&&(e=t),0===e.indexOf("www.")&&(e=e.split("www.")[1]),e.includes("/")&&(e=e.split("/")[0]),e}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a(106);var i=a(9),s=a(168),n=a.n(s),r=a(11),o=a(4),l=a(277),c=a(21),d=a(183);const u=Object(d.a)(l.a,500);class h extends n.a{constructor(){super(r.a)}areEqual(e,t){return e===t||(u(window.vivaldiWindowId,{tiles:t}),!1)}getInitialState(){return{}}reduce(e,t){switch(t.actionType){case o.a.TILES_INITIALIZED:return t.tilesState;case o.a.TILE_SET_LAYOUT:{const{id:a,mosaicLayout:i}=t;return{...e,[a]:i}}case"PAGE_TILE_PAGES":{const{pages:a,id:i}=t;return e=m(e,a),i||(e=g(e,a)),e}case"CHROME_TABS_CREATED":r.a.waitFor([i.a.dispatchToken]);const[a]=t.args,s=i.a.getPages().find(e=>e.id===a.id);return s?p(e,c.List.of(s)):e;case"PAGE_TABSTACK_REMOVE_FROM":case"PAGE_CLOSE":{const{pages:a}=t;return m(e,a)}case"PAGE_TABSTACK_CREATE":{r.a.waitFor([i.a.dispatchToken]);const{pages:a}=t;return p(e,a)}default:return e}}}function m(e,t){return t.map(e=>e.getIn(["extData","tiling","id"])).filter(e=>e).toSet().forEach(a=>{e[a]&&t.forEach(t=>{const s=e[a],n=function e(t,a){if("object"!=typeof t)return t;if(t.first===a)return"object"==typeof t.second?{...t.second}:t.second;if(t.second===a)return"object"==typeof t.first?{...t.first}:t.first;const i=e(t.first,a),s=e(t.second,a);return t.first!==i||t.second!==s?{...t,first:i,second:s}:t}(s,i.a.getTiles(a).findIndex(e=>e.id===t.id));s!==n&&(e={...e},"object"==typeof n?(!function e(t,a){"object"==typeof t.first?e(t.first,a):t.first=a.count++,"object"==typeof t.second?e(t.second,a):t.second=a.count++}(n,{count:0}),e[a]=n):delete e[a])})}),e}function p(e,t){return g(e,t)}function g(e,t){return t.map(e=>e.getIn(["extData","tiling","id"])).forEach(t=>{e[t]&&delete(e={...e})[t]}),e}function b(e,t){if(e<2)return null;const a=new Array(e);for(let t=0;t<e;t++)a[t]=t;const i=t||(e<4?"row":"grid");if("grid"===i){return function e(t,a){if(t.length<=a)return f(t,"column");const i=t.slice(0,a),s=t.slice(a),n=i.length/t.length*100;return{direction:"row",first:f(i,"column"),second:e(s,a),...50===n?null:{splitPercentage:n}}}(a,3===a.length?2:Math.floor(Math.sqrt(a.length)))}{let e;switch(i){case"vertically":e="row";break;case"horizontally":e="column";break;default:e=i}return f(a,e)}}function f(e,t){if(1===e.length)return e[0];const a=Math.floor(e.length/2),i=e.slice(0,a),s=e.slice(a),n=i.length/e.length*100;return{direction:t,first:f(i,t),second:f(s,t),...50===n?null:{splitPercentage:n}}}t.b=new h},function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(11),r=a(4),o=a(21);let l=Object(o.List)();const c=new class extends s.a{getBackgroundTasks(){return l}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};n.a.register(e=>{switch(e.actionType){case r.a.BACKGROUND_TASKS_SET:t=e.tasks,l=Object(o.List)(t),c.emitChange()}var t}),t.a=c},,function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(11),r=a(4);let o={};const l=new class extends s.a{allHidden(){return 0===Object.keys(o).filter(e=>Boolean(o[e])).length}getShowTooltip(e){return Boolean(o[e])}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};function c(){o={},l.emitChange()}function d(e,t){o[e]=t,l.emitChange()}n.a.register(e=>{switch(e.actionType){case"PAGE_CLOSE":case r.a.TOOLTIP_CLEAR:case r.a.URLFIELD_SET_STATE:c();break;case r.a.WEBPAGEVIEW_ACTIONS:!function(e){["focusSearchField","focusAddressField"].indexOf(e.action)>-1&&c()}(e.action);break;case r.a.TOOLTIP_SHOW:d(e.id,!0);break;case r.a.TOOLTIP_HIDE:d(e.id,!1)}}),t.a=l},,,,,,,,,,,function(e,t,a){"use strict";var i=a(0),s=a(17),n=a.n(s),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FolderIcon.jsx";class o extends i.Component{render(){const e=n()({"folder-icon":!this.props.trash,"folder-trash":this.props.trash,sd:this.props.speeddial});return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:this.props.leftMargin?{marginLeft:this.props.leftMargin}:null,__source:{fileName:r,lineNumber:25}},this.props.icon?this.props.icon:this.props.trash?i.createElement("g",{__source:{fileName:r,lineNumber:33}},i.createElement("path",{d:"M1 1.5h3.5v-1h7v1h-8H15",__source:{fileName:r,lineNumber:34}}),i.createElement("path",{d:"M3.5 3.5v11h9v-11zm3 8v-4zm3 0v-4z",__source:{fileName:r,lineNumber:35}})):this.props.speeddial?i.createElement("g",{__source:{fileName:r,lineNumber:39}},i.createElement("path",{fillOpacity:"0",d:"M15.5,7V5.8c0-0.6-0.5-1.2-1.1-1.3H7.8l-1.6-2H1.6C1,2.5,0.5,3,0.5,3.6v8.8c0,0.6,0.5,1.1,1.1,1.1H8",__source:{fileName:r,lineNumber:41}}),i.createElement("path",{strokeOpacity:"0",fillOpacity:this.props.open?0:1,d:"M8,8h7.5V5.7c0-0.6-0.5-1.2-1.1-1.2H7.8l-1.6-2H1.6C1,2.5,0.5,3,0.5,3.6v8.8c0,0.6,0.5,1.1,1.1,1.1H8V7z",__source:{fileName:r,lineNumber:44}}),this.props.open&&i.createElement("path",{d:"M1,7.5h14.5",__source:{fileName:r,lineNumber:50}}),this.props.open&&i.createElement("rect",{strokeOpacity:"0",x:"1",y:"7",width:"7",height:"6",__source:{fileName:r,lineNumber:53}}),i.createElement("rect",{strokeWidth:"2",x:"10",y:"10",width:"1",height:"1",__source:{fileName:r,lineNumber:55}}),i.createElement("rect",{strokeWidth:"2",x:"10",y:"14",width:"1",height:"1",__source:{fileName:r,lineNumber:56}}),i.createElement("rect",{strokeWidth:"2",x:"14",y:"10",width:"1",height:"1",__source:{fileName:r,lineNumber:57}}),i.createElement("rect",{strokeWidth:"2",x:"14",y:"14",width:"1",height:"1",__source:{fileName:r,lineNumber:58}})):i.createElement("g",{__source:{fileName:r,lineNumber:61}},i.createElement("path",{fillOpacity:this.props.open?0:1,d:"M6.16,2.5H1.6A1.12,1.12,0,0,0,.5,3.63v8.75A1.12,1.12,0,0,0,1.6,13.5H14.4a1.12,1.12,0,0,0,1.1-1.12V5.76a1.19,1.19,0,0,0-1.1-1.23H7.76Z",__source:{fileName:r,lineNumber:62}}),this.props.open&&i.createElement("path",{d:"M.5,12.38A1.12,1.12,0,0,0,1.6,13.5H14.4a1.12,1.12,0,0,0,1.1-1.12V7.5H.5v5",__source:{fileName:r,lineNumber:66}})),(this.props.isConnecting||this.props.disconnected)&&i.createElement("g",{className:this.props.isConnecting?"folder-evaluating":"folder-error",onClick:this.props.onClickStatusIcon,__source:{fileName:r,lineNumber:71}},i.createElement("circle",{cx:"10.5",cy:"10.5",r:"5",__source:{fileName:r,lineNumber:73}}),this.props.isConnecting?i.createElement("text",{x:"7.5",y:"14",fontSize:"10px",__source:{fileName:r,lineNumber:75}},"~"):i.createElement("text",{x:"9.5",y:"14",fontSize:"10px",__source:{fileName:r,lineNumber:76}},"!")))}}t.a=o},function(e,t,a){"use strict";var i=a(9),s=a(10),n=a(80),r=a(108),o=a(181),l=a(195),c=a(1),d=a(20);t.a=function(e,t,a,u){if(!e||!a)return"";if(!0===(u&&"quick-command-search"===u.className))return"quickCommands";let h=!1;try{h=!0===r.a.getFindResultsForPage(e).isFindInPageToolbarOpen}catch(e){console.warn(e)}if(!0===h)return"findInPage";const m=[Object(l.a)(i.a.getDefaultStartpage()),Object(l.a)(s.a.get(c.kHomepage)),Object(l.a)(d.a.internals["private-intro"])],p=s.a.get(c.kTabsFocusWebview),g=n.a.getUrlfieldStateFromId(e);let b=!p&&m.includes(Object(l.a)(t));if(b||t!==d.a.internals["private-intro"]&&t!==d.a.internals["guest-intro"]||(b=!0),b)return"urlFieldSelected";const f=Object(o.a)(t);return Object(l.a)(t)===d.a.internals.blankpage||!p&&(!f||g.selectionStart&&g.selectionStart>-1||g.selectionEnd&&g.selectionEnd>-1)?"urlField":"content"}},function(e,t,a){"use strict";var i=a(103),s=a(8),n=a(10),r=a(7),o=a(21),l=a(1),c=a(307);t.a=function(e,t){n.a.get(l.kTabsStackingAllowRename)&&r.default.tabs.query({},a=>{const r=Object(o.Set)(a.map(i.a.tabToPage).map(e=>e.getIn(["extData","group"])).filter(Boolean)),d=n.a.get(l.kTabsStackingNameMap)||{},u=Object(c.a)(d,(e,t)=>r.includes(t));t?u[e]=t:delete u[e],s.a.set(l.kTabsStackingNameMap,u)})}},,,,,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(17),r=a.n(n),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\FloatingLabel.jsx";function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class c extends s.a.PureComponent{constructor(...e){var t,a,i;super(...e),t=this,a="inputRef",i=s.a.createRef(),a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}componentDidMount(){if(this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}componentDidUpdate(e){if(!e.focusInput&&this.props.focusInput&&this.inputRef.current){const e=this.inputRef.current;e.focus(),e.setSelectionRange(0,e.value.length)}}render(){const{placeholder:e="",label:t,labelImportant:a,style:i,isVerified:n,focusInput:c,...d}=this.props,u=r()({"floating-label":!0,verified:n&&!this.props.disabled});let h;return t&&(h=a?s.a.createElement("strong",{__source:{fileName:o,lineNumber:64}},t):s.a.createElement("span",{__source:{fileName:o,lineNumber:64}},t)),s.a.createElement("label",{className:u,style:i,__source:{fileName:o,lineNumber:68}},h,"textarea"!==d.type?s.a.createElement("input",l({},d,{ref:this.inputRef,className:"floating-input",type:this.props.type,placeholder:e,__source:{fileName:o,lineNumber:71}})):s.a.createElement("textarea",l({},d,{ref:this.inputRef,className:"floating-input",placeholder:e,__source:{fileName:o,lineNumber:79}})))}}t.a=c},function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));const i=(e,t,a=!0)=>Boolean(t&&e.ctrlKey),s=(e,t,a=!0)=>Boolean(t&&e.shiftKey)},function(e,t,a){"use strict";var i=a(39),s=a(37),n=a(22),r=a(182),o=a(132),l=a(0),c=a.n(l),d=a(15),u=a.n(d),h=a(13),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryFolder.jsx";class p extends c.a.PureComponent{constructor(...e){var t,a,i;super(...e),i=e=>{e.preventDefault(),e.altKey?this.props.historyItem.isExpanded?this.props.collapseAll():this.props.expandAll():this.props.toggle()},(a="handleClick")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const e=this.props.historyItem,t=e.children.reduce((e,t)=>e+t.visitCount,0),a=o.a.getWeekdayFormat("LL"),i=u()(e.visitTime).format(a);return c.a.createElement("label",{"data-parent":e.id,onClick:this.props.fullView?this.handleClick:null,__source:{fileName:m,lineNumber:27}},!this.props.fullView&&c.a.createElement("span",{className:"expand-icon",onClick:this.handleClick,dangerouslySetInnerHTML:{__html:h.R},__source:{fileName:m,lineNumber:30}}),c.a.createElement("span",{className:"url",__source:{fileName:m,lineNumber:34}},i),c.a.createElement("span",{className:"item-count",__source:{fileName:m,lineNumber:37}},t))}}var g=p,b=a(120),f=a(83),_=a(2),N=a(355),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryItem.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends c.a.PureComponent{constructor(...e){super(...e),E(this,"onDragStart",e=>{const t=this.props.historyItem;var a=document.createElement("img");a.srcset="chrome://favicon/size/16@1x/"+t.url+" 1x,chrome://favicon/size/16@2x/"+t.url+" 2x",e.dataTransfer.setDragImage(a,a.width-a.width/3,a.height-a.height/3),a.remove(),Object(N.a)(e,t.url,t.title)}),E(this,"handleMouseEnter",e=>{f.a.setStatus(e)}),E(this,"handleMouseLeave",()=>{f.a.clearStatus()})}render(){const e=this.props.historyItem,t=u()(e.visitTime),a=e.url.split("\\").pop().split("/").pop()||e.url,i=o.a.getWeekdayFormat("LL");return this.props.fullView?this.props.columns?c.a.createElement(c.a.Fragment,null,this.props.columns.map(s=>{switch(s.id){case"visitTime":return c.a.createElement("label",{key:s.id,className:"date",title:t.format(i),draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:46}},c.a.createElement("span",{__source:{fileName:v,lineNumber:52}},t.format("LTS")));case"title":return c.a.createElement("label",{key:s.id,className:"title",title:e.title?e.title:a,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:57}},c.a.createElement(b.a,{url:e.url,__source:{fileName:v,lineNumber:63}}),c.a.createElement("span",{__source:{fileName:v,lineNumber:64}},e.title?e.title:a));case"address":return c.a.createElement("label",{key:s.id,className:"url",title:e.url,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:69}},e.isBookmarked&&c.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:v,lineNumber:76}},c.a.createElement("path",{d:"M4.5,13.5v-12h7v12L8,10.7L4.5,13.5z",__source:{fileName:v,lineNumber:78}})),c.a.createElement("span",{__source:{fileName:v,lineNumber:81}},e.url));case"visitCount":return c.a.createElement("label",{key:s.id,className:"visits",draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:86}},e.visitCount>1&&c.a.createElement("span",{className:"item-count",__source:{fileName:v,lineNumber:92}},e.visitCount));default:console.warn("Unknown sorting field:",s.id)}})):null:c.a.createElement("label",{title:t.format("LTS")+"\n"+t.format(i)+"\n• "+(e.title?Object(_.a)("Title: $1",[e.title])+"\n• ":"")+Object(_.a)("Address: $1",[e.url]),onMouseEnter:this.handleMouseEnter.bind(this,e.url),onMouseLeave:this.handleMouseLeave,draggable:"true",onDragStart:this.onDragStart,__source:{fileName:v,lineNumber:108}},c.a.createElement(b.a,{url:e.url,__source:{fileName:v,lineNumber:117}}),c.a.createElement("span",{className:"title",__source:{fileName:v,lineNumber:118}},c.a.createElement("span",{className:"time",__source:{fileName:v,lineNumber:119}},t.format("LT")),e.title?e.title:e.url),e.visitCount>1&&c.a.createElement("span",{className:"item-count",__source:{fileName:v,lineNumber:125}},e.visitCount))}}var S=w,C=a(136),k=a(6),y=a(44),O=a(267),A="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryTree.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends c.a.PureComponent{constructor(...e){super(...e),T(this,"mapObject",(e,t)=>Object.keys(e).map(a=>t(a,e[a]))),T(this,"hasChildren",e=>!!e.children&&e.children.length>0),T(this,"isFolder",e=>!!e&&!!e.children),T(this,"selectById",e=>{this.refs.treeList.selectById(e)}),T(this,"unSelectAll",()=>{this.refs.treeList.unSelectAll()}),T(this,"getSelectedItems",()=>{const e=this.refs.treeList.getAllSelectedItems().map(e=>e.id);return this.getItemsByIds(e,!0)}),T(this,"getSelectedItem",()=>this.refs.treeList.getSelectedItem()),T(this,"getItemById",e=>{const t=function(a){for(let i=0;i<a.length;i++){let s=a[i];if(s.id===e)return s;if(s.children&&(s=t(s.children),s))return s}};return t(this.props.nodes)}),T(this,"getItemsByIds",(e,t)=>{const a=[];return e.forEach(e=>{const i=this.getItemById(e);i&&(i.children&&t?Array.prototype.push.apply(a,i.children):a.push(i))}),a}),T(this,"openSelectedInTab",(e,t)=>{const a={bookmarks:Object(O.a)(this.getSelectedItems().map(e=>e.url)).map(e=>({url:e})),inCurrent:e,inBackground:t};i.a.open(a,!0)}),T(this,"openSelectedInWindow",e=>{const t={inNewWindow:!0,incognito:e,bookmarks:Object(O.a)(this.getSelectedItems().map(e=>e.url)).map(e=>({url:e}))};i.a.open(t,!0)}),T(this,"copy",(e,t)=>{const a=this.getItemsByIds(t,!0).map(e=>e.url);e.clipboardData.setData("text/plain",a.join("\n")),e.clipboardData.setData("text/uri-list",a),e.preventDefault()}),T(this,"delete",e=>{const t=[];return this.getItemsByIds(e,this.props.historyFilter&&this.props.historyFilter.text.length>0).forEach(e=>{this.isFolder(e)?t.push({isFolder:!0,at:u()(e.id).valueOf()}):t.push({isFolder:!1,url:e.url,at:e.visitTime})}),r.a.deleteHistoryPromise(t)}),T(this,"_saveBookmarks",e=>{const t=this.getItemsByIds(e,!0).map(e=>({url:e.url,title:e.title}));s.a.createBookmarks(t,n.a.getRootNode().id)}),T(this,"handleExpandClick",()=>{this.refs.treeList.toggleSelectedExpansion()}),T(this,"expandAll",()=>{this.refs.treeList.expandAll()}),T(this,"collapseAll",()=>{this.refs.treeList.collapseAll()}),T(this,"getContextMenuItems",e=>e?this._getNodeMenuItems(e):[]),T(this,"_getNodeMenuItems",e=>[{handler:this.openSelectedInTab.bind(this,!1,!1),...Object(k.a)("Open in New Tab")},{handler:this.openSelectedInTab.bind(this,!1,!0),...Object(k.a)("Open in Background Tab")},{handler:this.openSelectedInTab.bind(this,!0,!1),...Object(k.a)("Open")},{name:"---"},{handler:this.openSelectedInWindow.bind(this,!1),...Object(k.a)("Open in New Window")},{handler:this.openSelectedInWindow.bind(this,!0),...Object(k.a)("Open in Private Window")},{name:"---"},{name:Object(_.a)("Filter by “$1”",[e.address]),handler:this.props.onSearchDomain.bind(null,e.address),visible:!this.isFolder(e)}]),T(this,"getContextMenuItemProps",e=>({showEdit:!1,showRename:!1,showNewItem:!1,showNewFolder:!1,showCut:!1,showCopy:Boolean(e),showPaste:!1,showSave:Boolean(e),showDelete:Boolean(e),showExpandCollapse:!0})),T(this,"getContextMenuCopyString",()=>Object(k.a)("Copy Address")),T(this,"_getContextMenuSaveString",()=>Object(k.a)("Save as Bookmarks")),T(this,"onContextMenu",(e,t)=>{this.refs.treeList.onContextMenu(e,t)}),T(this,"onItemMouseDown",(e,t)=>{t.button===y.a.kCenter&&(t.preventDefault(),t.stopPropagation())}),T(this,"onItemMouseUp",(e,t)=>{t.button===y.a.kCenter&&(this.openSelectedInTab(!1,!0),t.preventDefault(),t.stopPropagation())}),T(this,"onItemDoubleClick",e=>{e.button!==y.a.kCenter&&this.onItemsActivated(e,this.getSelectedItems())}),T(this,"onItemsActivated",(e,t)=>{const a=i.a.getOpenOptionsFromModifierKeys(e);a.bookmarks=this.getItemsByIds(t.map(e=>e.id),!0).map(e=>({url:e.url})),i.a.open(a,!0)}),T(this,"isValidForClipboard",()=>!0),T(this,"validateForDeletion",e=>e),T(this,"renderItemContent",e=>{const t=e.node,a=[];return this.isFolder(t)?a.push(c.a.createElement(g,{key:"history_tree_folder_"+t.id+"_"+t.visitTime,historyItem:t,toggle:this.handleExpandClick,expandAll:this.expandAll,collapseAll:this.collapseAll,fullView:this.props.fullView,__source:{fileName:A,lineNumber:237}})):a.push(c.a.createElement(S,{columns:this.props.columns,key:"history_tree_item_"+t.id+"_"+t.visitTime,historyItem:t,fullView:this.props.fullView,__source:{fileName:A,lineNumber:247}})),a})}render(){return this.props.nodes?c.a.createElement(C.a,{settings:this.props.inManager?"HISTORY_MANAGER":"HISTORY_PANEL",ref:"treeList",nodes:this.props.nodes,columns:this.props.columns,defaultFolderExpansion:"always",hasChildren:this.hasChildren,isFolder:this.isFolder,renderItemContent:this.renderItemContent,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onItemsActivated,onCopy:this.copy,onSave:this._saveBookmarks,getContextMenuItems:this.getContextMenuItems,getContextMenuItemProps:this.getContextMenuItemProps,getContextMenuCopyString:this.getContextMenuCopyString,getContextMenuSaveString:this._getContextMenuSaveString,delete:this.delete,disableSelectAfterDelete:!1,enableDragAndDrop:!1,isValidForClipboard:this.isValidForClipboard,validateForDeletion:this.validateForDeletion,allFoldersExpandedOnLoad:!0,__source:{fileName:A,lineNumber:263}}):null}}t.a=I},function(e,t,a){"use strict";(function(e){const a={throttleSync:function(t,a={}){return function(){if(!a.isRunning){a.isRunning=!0;try{t.apply(this,arguments)}finally{e.nextTick(()=>{a.isRunning=!1})}}}}};t.a=a}).call(this,a(64))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAqUlEQVR4AWP4z4gfElbAYMNQw9AAhSkMzBgKgNIiDOxQGMXgg6mgQYVdBSgJwgx8DLkMtUiwgsEXqKCBBwGTeKP5ENBbkKEBpEAAAftBGEKC+WAFlaK4IVhBjhQCFkiCMAKCFYTKIWCELAhHyMbJgXCcHFiBk7KTsicYI6CLEgi7KIEV6KnrqauDMAJARIAQpKCWz1RQBzvkMgWGBYMjkGjADoEyjpTHJgCRpZrxxM2tswAAAABJRU5ErkJggg=="},function(e,t,a){"use strict";var i=a(22),s=a(0),n=a.n(s),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksfoldersflatlist.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(){return i.a.hasBeenInitialized()?{nodes:i.a.getFoldersWithin(i.a.getRootNode(),0),bookmarksBarFolderId:i.a.getBookmarkBarFolderId()}:{nodes:null,bookmarksBarFolderId:void 0}}class c extends n.a.Component{constructor(...e){super(...e),o(this,"state",l()),o(this,"_onStoreChange",()=>{this.setState(l())}),o(this,"getFolderId",e=>{if(this.props.selectedItemID){const t=e.find(e=>e.id===this.props.selectedItemID);if(t)return t.id;console.warn("Bookmark folder not found")}return this.state.bookmarksBarFolderId})}UNSAFE_componentWillMount(){i.a.addChangeListener(this._onStoreChange)}componentWillUnmount(){i.a.removeChangeListener(this._onStoreChange)}render(){if(!this.state.nodes)return null;const e=this.getFolderId(this.state.nodes),t=this.state.nodes.find(t=>t.id===e).title,a=this.state.nodes.map(e=>n.a.createElement("option",{key:"dir_"+e.id,value:e.id,__source:{fileName:r,lineNumber:53}}," ".repeat(3*e.level),e.title));return n.a.createElement("span",{className:"bookmark-folder-picker",__source:{fileName:r,lineNumber:60}},n.a.createElement("input",{type:"text",value:t,tabIndex:"-1",readOnly:!0,__source:{fileName:r,lineNumber:61}}),n.a.createElement("select",{className:"bookmark-folders",value:e,onChange:this.props.onChange,__source:{fileName:r,lineNumber:62}},a))}}t.a=c},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=(e,t,a)=>(e.dataTransfer.setData("text/uri-list",t),e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("vivaldi/x-title",a),e)},function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var i=a(0),s=a(18),n=a.n(s),r=a(129),o=a(509),l=a(19),c=a(96),d=a(97),u=a(9),h=a(442),m=a(69),p=a(25),g=a(16),b=a(109),f=a.n(b),_=a(195),N=a(5),v=a(1),E=a(61),w=a(20);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const k=[],y=[],O=[v.kThemeColorAccentSaturationLimit,v.kThemeContrastMinimum,v.kThemeDimBlurred,v.kHueBridgeIp,v.kHueEnabled,v.kHueLights,v.kHueUsername],A=["USE_TABCOLOR","TABCOLOR_BEHIND_TABS","BORDER_RADIUS","BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"];let T;const I=f()(2)((e,t)=>{const a=parseFloat(t[v.kThemeColorAccentSaturationLimit]),i=n()(e.BROWSER_COLOR_BG),s=n()(e.BROWSER_COLOR_FG),l=n()(e.BROWSER_COLOR_HIGHLIGHT_BG),c=Number(e.BORDER_RADIUS);let d=n()(e.BROWSER_COLOR_ACCENT_BG);return a<1&&d.get("hsl.s")>a&&(d=d.set("hsl.s",a)),{...r.e.all(s,i,l,d),...Object(o.a)(c)}}),D=f()(2)((e,t,a)=>t&&a?{...e,...r.e.accentOnly(n()(t),n()(e.colorBg))}:e),P=f()(2)((e,t,a)=>!t&&a?{...e,colorBg:e.colorBg.desaturate(.2),colorBgDark:e.colorBgDark.desaturate(.2),colorAccentBg:e.colorAccentBg.desaturate(1),colorAccentBgFaded:e.colorAccentBgFaded.desaturate(1),colorAccentBgFadedMore:e.colorAccentBgFadedMore.desaturate(1),colorAccentBgFadedMost:e.colorAccentBgFadedMost.desaturate(1),colorAccentBgDark:e.colorAccentBgDark.desaturate(1)}:e);function x(e){class t extends i.PureComponent{constructor(e,t){super(e),C(this,"_unclaimedMeta",{}),C(this,"_failUrlOnLoad",""),C(this,"_onWindowStoreChanged",()=>{this.setState({hasFocus:g.a.isActive(this.context.vivaldiWindowId)})}),C(this,"_getCacheObject",(e,t)=>{if(!(e&&w.a.isExtensionProtocol(e)||u.a.useDefaultIcon(u.a.getActivePage()))){for(const a of k){if(e&&e===a.favIcon)return a;if(!e&&t&&t===a.hostname)return a}if(t&&e){const a={favIcon:e,hostname:t};return k.push(a),a}}}),C(this,"_onNavigationStoreChanged",()=>{const e=u.a.getActivePage(),t=d.a.getNavigationInfo(e.id),a=t&&t.webviewUrl,i=t&&t.trigger;"start"!==i&&"stop"!==i||(this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),"start"===i&&(this._failUrlOnLoad=a),"stop"===i&&a===this._failUrlOnLoad&&(this._fallbackTimer=setTimeout(this._setFallbackAccentColor,1e3)))}),C(this,"_onThemeColorChanged",(e,t)=>{if(t&&"#000000"!==t){const a=u.a.getActivePage();if(a.get("id")===e){const e=a.get("favIconUrl"),i=d.a.getNavigationInfo(a.id),s=i&&i.webviewUrl;if(void 0===s)console.error("onThemeColorChanged. Url is not defined");else{const a=Object(E.parse)(Object(_.a)(s)).hostname,i=this._getCacheObject(e,a);i?(i.metaColor=t,this._setBestColor(i)):this._unclaimedMeta={color:t,url:s}}}}}),C(this,"_setAccentColor",(e=u.a.getActivePage())=>{if(e&&e.get("url")){const t=e.get("url");if(this._isMounted&&w.a.isInternalPage(e))return void this.setState({accentColor:""});const a=e.get("favIconUrl"),i=Object(E.parse)(Object(_.a)(t)).hostname,s=this._getCacheObject(a,i);s&&t===this._unclaimedMeta.url&&(s.metaColor=this._unclaimedMeta.color,this._unclaimedMeta={},this._setBestColor(s)),s?s.colorPalette?(this._failUrlOnLoad="",this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),this._setBestColor(s)):!s.colorPalette&&s.favIcon&&(this._failUrlOnLoad="",this._fallbackTimer&&(clearTimeout(this._fallbackTimer),delete this._fallbackTimer),this._setFavIconPalette(s)):this._isMounted&&y.indexOf(t)>-1&&(this._failUrlOnLoad="",this.setState({accentColor:""}),this._fallbackTimer&&clearTimeout(this._fallbackTimer))}}),C(this,"_setFallbackAccentColor",()=>{this._fallbackTimer&&clearTimeout(this._fallbackTimer),this._failUrlOnLoad="",this._unclaimedMeta={},y.push(u.a.getActivePage().get("url")),this.setState({accentColor:""})}),C(this,"_setFavIconPalette",e=>{const t=new Image;t.crossOrigin="Anonymous",t.onload=()=>{t.height=16,t.width=16,e.colorPalette=m.a.getPalette(t,16),this._setBestColor(e)},t.src=e.favIcon}),C(this,"_setBestColor",e=>{const t=parseFloat(this.props.prefValues[v.kThemeColorAccentSaturationLimit]),a=[];if(e.metaColor&&a.push(n()(e.metaColor)),e.colorPalette)for(let t=0;t<e.colorPalette.length;t++)a.push(n()(e.colorPalette[t]));if(a[0]&&(a[0].multiplier=e.metaColor?3:2),a[1]&&(a[1].multiplier=1.5),a[2]&&(a[2].multiplier=1.25),a.length>2&&a[0].get("lch.c")<1)for(let e=1;e<a.length;e++)if(a[e].get("lch.c")>1){a[e].multiplier=2;break}a.sort((e,t)=>this._rateColor(t)-this._rateColor(e)),this._isMounted&&a[0]&&(t<1&&a[0].get("hsl.s")>t&&(a[0]=a[0].set("hsl.s",t)),this.setState({accentColor:a[0]}))}),C(this,"getHueLights",e=>{const t=this.props.prefValues[v.kHueBridgeIp],a=this.props.prefValues[v.kHueUsername];T?e(T):fetch(`http://${t}/api/${a}/lights`).then(a=>{a.ok?a.json().then(t=>{T=t,e(T)}):console.warn(`Unable to retrieve lights from bridge at ${t}`)})}),C(this,"colorToXy",e=>{let t=e.get("rgb.r"),a=e.get("rgb.g"),i=e.get("rgb.b");t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/13.02,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;const s=.664511*t+.154324*a+.162028*i,n=.283881*t+.668433*a+.047685*i,r=88e-6*t+.07231*a+.986039*i;return[s/(s+n+r),n/(s+n+r)]}),C(this,"setHue",e=>{const t=this.props.prefValues[v.kHueBridgeIp],a=this.props.prefValues[v.kHueUsername],i=this.props.prefValues[v.kHueLights],s=this.colorToXy(e);this.getHueLights(e=>{Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];r&&i.some(e=>r.uniqueid===e)&&fetch(`http://${t}/api/${a}/lights/${n}/state/`,{method:"put",body:JSON.stringify({transitiontime:10,xy:s})}).catch(e=>{console.warn(`Unable to set Hue light ${r.name}`,e)})})})}),C(this,"_rateColor",e=>{const t=parseFloat(this.props.prefValues[v.kThemeContrastMinimum]),a=this.props.vivaldiSettings.BROWSER_COLOR_BG,i=n.a.contrast(e,a)>t?50:0,s=e.get("lch.l")>5&&e.get("lch.l")<95?50:0;let r=e.get("lch.c")>10?50:0;(e.get("lch.l")<20||e.get("lch.l")>75)&&(r=e.get("lch.c")>50?r:0);let o=i+s+r;return"number"==typeof e.multiplier&&(o*=e.multiplier),o}),C(this,"applyTheme",e=>{const{body:t}=this.context.document;t&&(Object.keys(this.state.vars).forEach(e=>{const a=this.state.vars[e];t.style.setProperty(`--${e}`,a.toString())}),Object.keys(e).forEach(e=>{this.state.vars[e]||t.style.removeProperty(e)}))}),this.state={hasFocus:g.a.isActive(t.vivaldiWindowId),accentColor:"",vars:{}}}static getDerivedStateFromProps(e,t){let a=I(e.vivaldiSettings,e.prefValues);return a=D(a,t.accentColor,e.vivaldiSettings.USE_TABCOLOR),a=P(a,t.hasFocus,e.prefValues[v.kThemeDimBlurred]),{vars:a}}componentDidMount(){this.applyTheme({}),this.state.vars.colorAccentBg&&(h.a.setColor(this.state.vars.colorAccentBg),this.props.prefValues[v.kHueEnabled]&&this.props.prefValues[v.kHueUsername]&&this.setHue(this.state.vars.colorAccentBg)),d.a.addChangeListener(this._onNavigationStoreChanged),u.a.addChangeListener(this._setAccentColor),N.a.tabsPrivate.onThemeColorChanged.addListener(this._onThemeColorChanged),this._windowStoreToken=g.a.addListener(this._onWindowStoreChanged),this._isMounted=!0}componentDidUpdate(e,t){t.vars!==this.state.vars&&this.applyTheme(t.vars);const a=t.vars.colorAccentBg,i=this.state.vars.colorAccentBg;i&&a.css()!==i.css()&&(h.a.setColor(i),this.props.prefValues[v.kHueEnabled]&&this.props.prefValues[v.kHueUsername]&&this.setHue(i)),[v.kThemeColorAccentSaturationLimit,v.kThemeContrastMinimum,v.kHueEnabled,v.kHueUsername,v.kHueLights,v.kHueBridgeIp].some(t=>e.prefValues[t]!==this.props.prefValues[t])&&this._setAccentColor()}componentWillUnmount(){this._isMounted=!1,d.a.removeChangeListener(this._onNavigationStoreChanged),u.a.removeChangeListener(this._setAccentColor),N.a.tabsPrivate.onThemeColorChanged.removeListener(this._onThemeColorChanged),this._windowStoreToken.remove()}render(){const{vars:t}=this.state,a=!t.colorBg||t.colorBg.luminance()<=.4?"theme-dark":"theme-light",s=!t.colorHighlightBg||t.colorHighlightBg.luminance()<=.4?"hi-dark":"hi-light",n=!t.colorAccentBg||t.colorAccentBg.luminance()<=.4?"acc-dark":"acc-light";return i.createElement(e,S({},this.props,{themeBg:a,accentBg:n,highlightBg:s,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themes\\InsertTheme.jsx",lineNumber:568}}))}}return C(t,"contextType",p.a),Object(l.a)(Object(c.a)(t,A),O)}const M=x(()=>null);t.b=x},function(e,t,a){"use strict";(function(e){var i=a(19),s=a(50),n=a(452),r=a(8),o=a(0),l=a.n(o),c=a(127),d=a(958),u=a(46),h=a(217),m=a(453),p=a(512),g=a(293),b=a(170),f=a(4),_=a(53),N=a(108),v=a(25),E=a(16),w=a(2),S=a(160),C=a(169),k=a(5),y=a(519),O=a(1),A=a(13),T=a(123),I=a(360),D="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchField.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let x=[];const M=Object(T.a)((e,t)=>{const a=p.a.suggest(e,t);x=Object(I.a)(x.concat(a),10)},500,{leading:!1}),L=[O.kAddressBarSearchFieldWidth,O.kAddressBarSearchInNewTab,O.kAddressBarSearchTypedHistoryEnabled,O.kAddressBarSearchKeepSelected,O.kKeyboardTabToAll];function j({disabled:e,tabIndex:t,onMouseDown:a,onClick:i}){return l.a.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:D,lineNumber:116}},l.a.createElement("div",{className:"button-toolbar",__source:{fileName:D,lineNumber:117}},l.a.createElement("button",{disabled:e,tabIndex:t,title:Object(w.a)("Show search history"),onMouseDown:a,onClick:i,dangerouslySetInnerHTML:{__html:A.tc},__source:{fileName:D,lineNumber:118}})))}function B({onClick:e,tabIndex:t}){return l.a.createElement("div",{className:"toolbar toolbar-insideinput",__source:{fileName:D,lineNumber:133}},l.a.createElement("div",{className:"button-toolbar",__source:{fileName:D,lineNumber:134}},l.a.createElement("button",{onMouseDown:e=>e.preventDefault(),tabIndex:t,title:Object(w.a)("verb","Search"),className:"SearchField-ExecuteSearchButton",onClick:e,dangerouslySetInnerHTML:{__html:A.tc},__source:{fileName:D,lineNumber:135}})))}class R extends l.a.PureComponent{constructor(...t){super(...t),P(this,"_isPasting",!1),P(this,"_nav",new y.a(this)),P(this,"_isIMEOpen",!1),P(this,"_justClosedIME",!1),P(this,"_isOnSpeedDial","speed_dial_view"===this.props.origin),P(this,"_omniDropdownRef",l.a.createRef()),P(this,"_suppressReplace",!1),P(this,"state",{dropdownSelectionIndex:-1,editText:"",typedValue:"",filteredTypedHistoryStore:[],isOmniDropdownOpen:!1,searchSuggestionStore:[],showAll:!1,searchEngineSelectItems:[],typedHistoryStore:[],currentSearchEngine:void 0,selectedItem:void 0,numberOfSelectableItems:0,isSearchEngineSelectOpen:!1,firstLaunch:u.a.getFirstLaunch(),previousSelectedEngine:u.a.getCurrentPopupEngine()}),P(this,"_onWebpageviewStoreChanged",t=>{if(t.type===f.a.WEBPAGEVIEW_ACTIONS)if("searchPasteAndGo"===t.action&&t.payload){const a=t.payload;e.nextTick(()=>this._pasteAndGo(a))}else"focusSearchField"===t.action&&e.nextTick(this.focusField)}),P(this,"_pasteAndGo",({openOptions:e,clipboardText:t})=>{this._search({value:t,openOptions:e})}),P(this,"_onSearchSuggestionsChanged",({suggestions:e,query:t,uid:a})=>{const{document:i}=this.context;if(i.activeElement!==this._refSearch||!x.includes(a))return;const s=e.map(e=>({id:e,url:e,type:"OMNI_RESULT_SUGGEST"}));this.state.editText&&t&&(this.state.editText.startsWith(t)||t.startsWith(this.state.editText))&&this.setState({searchSuggestionStore:s},()=>this._showDropdown())}),P(this,"_onSearchEngineStoreChanged",e=>{if(e.actionType===f.a.SEARCH_ENGINES_SET_COLLECTION&&E.a.isActive(this.context.vivaldiWindowId)||this._isOnSpeedDial&&("current"===e.type||"currentPrivate"===e.type)||!this._isOnSpeedDial&&"currentSD"===e.type)return;const t=this.props.prefValues[O.kAddressBarSearchKeepSelected],a=E.a.isIncognito(this.context.vivaldiWindowId),i=this._isOnSpeedDial?u.a.getCurrentSD(a):u.a.getCurrent(a),s=u.a.getDefault(a);let n=i;i&&(e.type&&!e.type.startsWith("default")||t||!this.state.firstLaunch&&"field"!==this.props.shouldRenderAs)||(n=s);const r=u.a.getList().map(e=>({name:e.name,icon:e.faviconUrl,shortcut:e.keyword,noPrettifying:!0,id:e.id,url:e.url}));if(!u.a.getHasCustomOrder()){[s,i].forEach(e=>{if(e){const t=r.findIndex(t=>t.id===e.id);r.unshift(r.splice(t,1)[0])}})}u.a.setPopupEngine(n),this.setState({currentSearchEngine:n,searchEngineSelectItems:r})}),P(this,"_onSearchFieldStoreChanged",()=>{const{document:e}=this.context,t=m.a.getTypedSearchHistory().map(e=>({...e,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"})),a={};if(a.typedHistoryStore=t,e.activeElement===this._refSearch){const e=m.a.getSearchText(),i=e.trim()&&t.filter(t=>t.url.toLowerCase().startsWith(e.toLowerCase()))||[];a.editText=e,a.filteredTypedHistoryStore=i}this.setState(a)}),P(this,"_onCompositionStart",()=>{this._isIMEOpen=!0}),P(this,"_onCompositionEnd",()=>{this._isIMEOpen=!1,this._justClosedIME=!0}),P(this,"_search",({value:e,openOptions:t})=>{const{document:a}=this.context;M.cancel&&M.cancel(),this._refSearch&&a.activeElement===this._refSearch&&this._refSearch.blur(),x=[],this.setState({editText:e}),h.a.setState({editText:e});let i=!t||!1!==t.inCurrent;this.props.prefValues[O.kAddressBarSearchInNewTab]&&(this._isOnSpeedDial||(i=!1));const s=e.indexOf(" "),n=e.split(" ")[0],r=u.a.getByKeyword(n);if(e=r?e.substring(s,e.length):e,r){const e=E.a.isIncognitoOrGuest(this.context.vivaldiWindowId);this._isOnSpeedDial?c.a.setDefaultForSpeedDial(r.id,e):c.a.setDefaultForSearchField(r.id,e)}const o={...t,inCurrent:i,addTypedSearchHistory:!0};e.length>0&&this.props.onEnterPressed(e,this.state.currentSearchEngine,o)}),P(this,"onKeyDowned",t=>{this._justClosedIME=!1;const a=t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey,i=!Object(C.a)(t),{isOmniDropdownOpen:s}=this.state;switch(t.key){case"ArrowUp":return void(s&&(t.preventDefault(),t.stopPropagation()));case"ArrowDown":return void(a&&this.onKeyPressed(t));case"Tab":if(!s)return;return i&&(t.preventDefault(),t.stopPropagation(),e.nextTick(this._nav.down)),void(a&&(t.preventDefault(),t.stopPropagation(),e.nextTick(this._nav.up)));case"Escape":return void("button"!==this.props.shouldRenderAs?(t.stopPropagation(),t.preventDefault(),this.setState(e=>({editText:e.typedValue}))):this.state.isOmniDropdownOpen&&(t.stopPropagation(),t.preventDefault(),this.setState({isOmniDropdownOpen:!1})));case"Enter":return i||this.onKeyPressed(t),void(void 0!==this.props.onSearch&&this.props.onSearch())}}),P(this,"onExecuteSearchButtonClick",e=>{const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},a=Object(S.b)(t),i=this.state.selectedItem?this.state.selectedItem.url:this.state.typedValue;this._search({value:i,openOptions:a}),void 0!==this.props.onSearch&&this.props.onSearch()}),P(this,"onKeyPressed",e=>{const{key:t,shiftKey:a,currentTarget:i}=e;switch(t){case"Enter":{this._justClosedIME=!1,M.cancel&&M.cancel();const t={ctrlKey:e.ctrlKey,altKey:!1,shiftKey:e.shiftKey||e.altKey,metaKey:e.metaKey},a=Object(S.b)(t);return void this._search({value:i.value,openOptions:a})}case"ArrowDown":if(!a)return;return void(this.state.typedHistoryStore.length>0&&this.props.prefValues[O.kAddressBarSearchTypedHistoryEnabled]&&this._showDropdown({showAll:!0}));case"Tab":return void this._hideDropdown()}}),P(this,"onSearchEngineChanged",e=>{const t=this._refSearch?this._refSearch.value:"";if(this._refSearch&&""===t&&this._refSearch.focus(),t.length>0){const a=u.a.getById(e),i={addTypedSearchHistory:!0,inCurrent:this._isOnSpeedDial||!0!==this.props.prefValues[O.kAddressBarSearchInNewTab]};this.props.onEnterPressed(t,a,i)}const a=E.a.isIncognito(this.context.vivaldiWindowId);this._isOnSpeedDial?c.a.setDefaultForSpeedDial(e,a):c.a.setDefaultForSearchField(e,a),this.setState({searchSuggestionStore:[],isSearchEngineSelectOpen:!1}),this.props.onSearch&&""!==this.state.editText&&this.props.onSearch()}),P(this,"onTypedSearchHistoryClicked",e=>{h.a.setState({editText:e}),this.props.onEnterPressed(e,this.state.currentSearchEngine)}),P(this,"onTypedSearchHistoryDeleted",e=>{const{url:t}=e;h.a.deleteTypedSearchHistory(t)}),P(this,"_showDropdown",(e={})=>{if(!0===this._isPasting)return;const{document:t}=this.context;let{showAll:a}=e;"boolean"!=typeof a&&(a=!1),this.setState({showAll:a}),!0!==this.state.isOmniDropdownOpen&&(this._refSearch&&t.activeElement!==this._refSearch&&this._refSearch.focus(),this.setState({isOmniDropdownOpen:!0}))}),P(this,"_hideDropdown",()=>{this.state.isOmniDropdownOpen&&this.setState({selectedItem:void 0,isOmniDropdownOpen:!1,showAll:!1,searchSuggestionStore:[]})}),P(this,"getDropdown",()=>this._omniDropdownRef.current),P(this,"setAutocompleteHighlight",(e,t)=>{this.setState({dropdownSelectionIndex:e}),t&&this.setState(e=>({editText:e.selectedItem&&e.selectedItem.url||e.editText}))}),P(this,"_esc",()=>{this._isIMEOpen||this._justClosedIME?this._justClosedIME=!1:(!0===this.state.isOmniDropdownOpen?this._hideDropdown():this.state.editText?(this.setState({typedValue:""}),h.a.setState({editText:""})):_.a.doAction("focusWebView"),this._justClosedIME=!1)}),P(this,"_onDelete",()=>{this.state.selectedItem&&this.onTypedSearchHistoryDeleted(this.state.selectedItem)}),P(this,"_onKeyboardChanged",(e,t,a,i)=>{if(t&&0===a)switch(i){case s.a.KEY_DOWN:if(this._isIMEOpen)return;!0===this.state.isOmniDropdownOpen?this._nav.down():this.setState({isSearchEngineSelectOpen:!0});break;case s.a.KEY_UP:this._isIMEOpen||this._nav.up();break;case s.a.KEY_END:this.setAutocompleteHighlight(this.state.numberOfSelectableItems-1,!0);break;case s.a.KEY_ESCAPE:"button"!==this.props.shouldRenderAs&&this._esc();break;case s.a.KEY_HOME:this.setAutocompleteHighlight(0,!0);break;case s.a.KEY_PAGE_DOWN:this._nav.pageDown();break;case s.a.KEY_PAGE_UP:this._nav.pageUp();break;case s.a.KEY_DELETE:this._onDelete()}}),P(this,"onFocus",()=>{k.a.tabsPrivate.onKeyboardChanged.addListener(this._onKeyboardChanged)}),P(this,"onBlur",e=>{const{getSelection:t}=this.context;this._hideDropdown();const a=t();a&&a.empty(),k.a.tabsPrivate.onKeyboardChanged.removeListener(this._onKeyboardChanged)}),P(this,"onMouseDown",e=>{const{document:t}=this.context;this._focusedOnMouseDown=t.activeElement}),P(this,"onMouseUp",({currentTarget:e})=>{const{document:t}=this.context;t.activeElement===e&&(this._focusedOnMouseDown!==this._refSearch&&e.selectionStart===e.selectionEnd&&e.select(),this._focusedOnMouseDown=void 0)}),P(this,"onDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),P(this,"onPaste",e=>{this._isPasting=!0,setTimeout(()=>this._isPasting=!1,5)}),P(this,"onChange",({currentTarget:{value:e}})=>{h.a.setState({editText:e});const t=e.length>0&&e.indexOf(" ")>=1?u.a.getByQuery(e):null;t&&this.setState({currentSearchEngine:t}),this.props.suggestEnabled&&e.trim()&&e.length>1?this.state.currentSearchEngine&&M(e,this.state.currentSearchEngine):this.setState({searchSuggestionStore:[]}),this.setState({dropdownSelectionIndex:-1,typedValue:e})}),P(this,"onDragStart",e=>{this._suppressReplace=!0}),P(this,"onDragOver",e=>{e.stopPropagation()}),P(this,"onDragEnter",e=>{if(e.stopPropagation(),this._suppressReplace)return;e.preventDefault();const t=e.target;t instanceof HTMLInputElement&&""!==t.value&&t.classList.add("pseudo-selected")}),P(this,"onDragLeave",e=>{if(!this._suppressReplace){const t=e.target;t instanceof HTMLInputElement&&t.classList.remove("pseudo-selected")}}),P(this,"onDropped",e=>{if(this._suppressReplace)this._suppressReplace=!1;else{const t=e.dataTransfer.getData("text/plain");e.dataTransfer.types.length>1&&""!==t&&(e.preventDefault(),this.setState({editText:t}),h.a.setState({editText:t}));const a=e.target;a instanceof HTMLInputElement&&a.classList.remove("pseudo-selected")}}),P(this,"onToggleDropdownClicked",e=>{if(e.preventDefault(),"click"!==e.type||0===e.clientX||0===e.clientY)return this.state.isOmniDropdownOpen?void this._hideDropdown():(this._onSearchFieldStoreChanged(),void this._showDropdown({showAll:!0}))}),P(this,"onSlidebarPosition",(e,t)=>{if(this._refSearchField){const t=this._refSearchField.getBoundingClientRect();r.a.set(O.kAddressBarSearchFieldWidth,Math.floor(t.right-e))}}),P(this,"getWidth",()=>{let e=this.props.prefValues[O.kAddressBarSearchFieldWidth];return e?e<175?e=175:e>800&&(e=800):e=175,e}),P(this,"focusField",()=>{const e=Boolean("field"===this.props.shouldRenderAs&&E.a.getVisibleUI(this.context.vivaldiWindowId).addressBar);this._refSearch&&this._isOnSpeedDial!==e&&this._refSearch.select()}),P(this,"setFocusInSearchField",()=>{this._refSearch&&this._refSearch.select()}),P(this,"onOmniDropdownItemClicked",(e,t)=>{this._search({value:e.url,openOptions:t}),this.props.onSearch&&this.props.onSearch()}),P(this,"onContextMenu",e=>{e.stopPropagation()}),P(this,"onOmniDropdownSelectedItemChange",e=>{this.setState({selectedItem:e})}),P(this,"renderDropdown",()=>{const e=[{items:this.state.showAll?this.state.typedHistoryStore:this.state.filteredTypedHistoryStore,type:"OMNI_RESULT_TYPED_HISTORY_SEARCH"},{items:this.props.suggestEnabled?this.state.searchSuggestionStore.map(e=>({...e,disableDelete:!0})):[],type:"OMNI_RESULT_SUGGEST"}];return 0===e.length?null:l.a.createElement(n.a,{hideIcons:!0,onSelectedItemChanged:this.onOmniDropdownSelectedItemChange,defaultSearchEngine:this.state.currentSearchEngine,onDeleteItem:this.onTypedSearchHistoryDeleted,onLinkItemClicked:this.onOmniDropdownItemClicked,pattern:this.state.editText,ref:this._omniDropdownRef,selectionIndex:this.state.dropdownSelectionIndex,setAutocompleteHighlight:this.setAutocompleteHighlight,items:e,__source:{fileName:D,lineNumber:926}})}),P(this,"toggleSearchEngineSelectOpen",()=>{this.setState(e=>({isSearchEngineSelectOpen:!e.isSearchEngineSelectOpen}))}),P(this,"closeSearchEngineSelect",()=>{this.setState({isSearchEngineSelectOpen:!1})})}componentDidMount(){this._onSearchEngineStoreChanged({type:"default"}),this._onSearchFieldStoreChanged(),u.a.addChangeListener(this._onSearchEngineStoreChanged),m.a.addChangeListener(this._onSearchFieldStoreChanged),g.a.addChangeListener(this._onSearchSuggestionsChanged),N.a.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){u.a.removeChangeListener(this._onSearchEngineStoreChanged),m.a.removeChangeListener(this._onSearchFieldStoreChanged),g.a.removeChangeListener(this._onSearchSuggestionsChanged),N.a.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){t.dropdownSelectionIndex!==this.state.dropdownSelectionIndex&&this._nav.setSelectionIndex(this.state.dropdownSelectionIndex);const a=(this.state.showAll?this.state.typedHistoryStore.length:this.state.filteredTypedHistoryStore.length)+this.state.searchSuggestionStore.length;this._nav.setNumberOfSelectableItems(a)}render(){const e=this.state.currentSearchEngine?Object(w.a)("Search $1",[this.state.currentSearchEngine.name]):"",t=0===this.state.typedHistoryStore.length,a=Boolean(this.state.typedValue),i=!a&&this.props.prefValues[O.kAddressBarSearchTypedHistoryEnabled];return l.a.createElement("div",{ref:e=>this._refSearchField=e,className:"iconmenu-container searchfield",onContextMenu:this.onContextMenu,style:{flexBasis:this.getWidth()+"px"},__source:{fileName:D,lineNumber:962}},"button"!==this.props.shouldRenderAs&&l.a.createElement(b.a,{onSlidebarPosition:this.onSlidebarPosition,offset:2,position:"right",__source:{fileName:D,lineNumber:969}}),l.a.createElement(d.a,{minWidth:"button"===this.props.shouldRenderAs?0:this.getWidth()-2,onItemClicked:this.onSearchEngineChanged,items:this.state.searchEngineSelectItems,isOpen:this.state.isSearchEngineSelectOpen,onClose:this.closeSearchEngineSelect,toggleOpen:this.toggleSearchEngineSelectOpen,icon:this.state.currentSearchEngine?this.state.currentSearchEngine.faviconUrl:"",useFavicon:this.props.useFavicon,outsideClickIgnoreClass:"menu",__source:{fileName:D,lineNumber:975}}),l.a.createElement("input",{ref:e=>this._refSearch=e,className:"vivaldi-searchfield searchfield-input",onBlur:this.onBlur,onChange:this.onChange,autoFocus:"button"===this.props.shouldRenderAs,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDropped,onFocus:this.onFocus,onKeyDown:this.onKeyDowned,onKeyPress:this.onKeyPressed,onCompositionStart:this._onCompositionStart,onCompositionUpdate:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onPaste:this.onPaste,placeholder:e,tabIndex:this._isOnSpeedDial?0:null,type:"search",value:this.state.editText,__source:{fileName:D,lineNumber:990}}),this.state.isOmniDropdownOpen&&this.renderDropdown(),a&&l.a.createElement(B,{onClick:this.onExecuteSearchButtonClick,tabIndex:this.props.prefValues[O.kKeyboardTabToAll],__source:{fileName:D,lineNumber:1020}}),i&&l.a.createElement(j,{disabled:t,tabIndex:this.props.prefValues[O.kKeyboardTabToAll],onMouseDown:this.onToggleDropdownClicked,onClick:this.onToggleDropdownClicked,__source:{fileName:D,lineNumber:1027}}))}}P(R,"contextType",v.a),t.a=Object(i.a)(R,L)}).call(this,a(64))},,,,function(e,t,a){"use strict";var i=a(76),s=a(19),n=a(50),r=a(0),o=a.n(r),l=a(26),c=a(25),d=a(2),u=a(17),h=a.n(u),m=a(60),p=a(1),g=a(13),b="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\ZoomIndicator.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=[p.kAppearanceRangeButtons,p.kKeyboardTabToAll];class N extends o.a.PureComponent{constructor(...e){super(...e),f(this,"state",{editing:!1}),f(this,"setZoomLevel",(e,t,a)=>{this.props.onZoomUpdated(e,a),this.refs.editZoom&&(this.refs.editZoom.value=Math.round(100*e))}),f(this,"resetZoom",()=>{this.setZoomLevel(this.props.defaultZoomLevel)}),f(this,"updateZoomLevel",()=>{const e=parseFloat(this.props.zoom);this.setZoomLevel(e,this.props.delay)}),f(this,"zoomInStep",()=>{this.setZoomLevel(parseFloat((this.props.zoom+this.props.step).toFixed(2)))}),f(this,"zoomOutStep",()=>{this.setZoomLevel(parseFloat((this.props.zoom-this.props.step).toFixed(2)))}),f(this,"zoomHalf",()=>{this.setZoomLevel(parseFloat((this.props.zoom/2).toFixed(2)))}),f(this,"zoomDouble",()=>{this.setZoomLevel(parseFloat((2*this.props.zoom).toFixed(2)))}),f(this,"handleKeyDown",e=>{e.keyCode===n.a.KEY_LEFT?(this.zoomOutStep(),e.preventDefault()):e.keyCode===n.a.KEY_RIGHT&&(this.zoomInStep(),e.preventDefault())}),f(this,"rangeChanged",e=>{const{value:t}=e.target;this.setZoomLevel(parseFloat(t),this.state.editing,this.props.delay)}),f(this,"_onEditKeyDown",e=>{const{step:t,zoom:a}=this.props;if(e.keyCode===n.a.KEY_ESCAPE)this.setState({editing:!1});else if(e.keyCode===n.a.KEY_SUBTRACT)this.setZoomLevel(a-t,!0),e.preventDefault();else if(e.keyCode===n.a.KEY_ADD)this.setZoomLevel(a+t,!0),e.preventDefault();else if(e.keyCode===n.a.KEY_RETURN){let e=this.refs.editZoom.value/100;0!==e&&e===parseFloat(e)||(e=1),this.setZoomLevel(e)}}),f(this,"toggleEditZoom",()=>{this.props.disabled||this.setState(e=>({editing:!e.editing}),()=>{this.refs.editZoom.select()})}),f(this,"_onEditZoomBlur",()=>{this.setState({editing:!1})}),f(this,"onMouseEnter",()=>{!1!==this.props.scrolling&&document.addEventListener("wheel",this.onMouseWheel,!0)}),f(this,"onMouseLeave",()=>{!1!==this.props.scrolling&&document.removeEventListener("wheel",this.onMouseWheel,!0)}),f(this,"onMouseDown",()=>{this._activeElement=document.activeElement}),f(this,"onMouseUp",()=>{this.props.delay&&this.updateZoomLevel(),this._activeElement&&(this._activeElement.focus(),delete this._activeElement)}),f(this,"onMouseWheel",e=>{e.deltaX<0?this.zoomOutStep():e.deltaX>0?this.zoomInStep():e.deltaY>0?this.zoomOutStep():e.deltaY<0&&this.zoomInStep()}),f(this,"incrementCount",()=>{this.setZoomLevel(this.props.zoom+this.props.step)}),f(this,"decrementCount",()=>{this.setZoomLevel(this.props.zoom-this.props.step)}),f(this,"onPageZoomUpdated",e=>{const t=i.a.getActiveWebView();t&&t.setZoom(e)}),f(this,"showCustomizeMenu",(e,t)=>{const a=this.props.customizeMenu;a&&(e.persist(),e.preventDefault(),e.stopPropagation(),Object(m.a)(this.context.vivaldiWindowId,a)(e))})}render(){const e=o.a.Fragment,{customizeMenu:t,zoom:a}=this.props,i=this.props.prefValues[p.kAppearanceRangeButtons],s=this.props.disabled||(this.props.defaultZoomLevel?this.props.defaultZoomLevel===a:1===a),n=this.state.editing?o.a.createElement("input",{className:"zoom-percent",type:"number",ref:"editZoom",defaultValue:Math.round(100*a),onKeyDown:this._onEditKeyDown,onBlur:this._onEditZoomBlur,step:"1",disabled:this.props.disabled,__source:{fileName:b,lineNumber:233}}):o.a.createElement("span",{className:h()({"zoom-percent":!0,disabled:this.props.disabled}),onClick:this.toggleEditZoom,__source:{fileName:b,lineNumber:242}},`${Math.round(100*a)} %`),r=this.props.inFooter?this.props.prefValues[p.kKeyboardTabToAll]:0;return o.a.createElement("div",{onContextMenu:t?this.showCustomizeMenu:null,className:"page-zoom-controls",__source:{fileName:b,lineNumber:254}},o.a.createElement(l.a,{className:"reset-zoom",onClick:this.resetZoom,tooltip:Object(d.a)("Reset Zoom"),disabled:s,title:Object(d.a)("Reset"),tabIndex:r,__source:{fileName:b,lineNumber:256}}),!i&&o.a.createElement(e,{__source:{fileName:b,lineNumber:266}},o.a.createElement("input",{type:"range",min:this.props.minLevel,max:this.props.maxLevel,step:this.props.step,onChange:this.rangeChanged,onKeyDown:this.handleKeyDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:-1===r?this.onMouseDown:null,onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp,value:a,disabled:this.props.disabled,tabIndex:r,__source:{fileName:b,lineNumber:267}}),n),i&&o.a.createElement(e,{__source:{fileName:b,lineNumber:288}},o.a.createElement(l.a,{onClick:this.decrementCount,tooltip:Object(d.a)("Zoom Out"),disabled:this.props.disabled,image:g.Lb.medium,tabIndex:r,__source:{fileName:b,lineNumber:289}}),n,o.a.createElement(l.a,{onClick:this.incrementCount,tooltip:Object(d.a)("Zoom In"),disabled:this.props.disabled,image:g.f.medium,tabIndex:r,__source:{fileName:b,lineNumber:297}})))}}f(N,"contextType",c.a),f(N,"defaultProps",{disabled:!1}),t.a=Object(s.a)(N,_)},function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var i=a(141),s=a(195),n=a(36);function r(e,t){if(!e)return!0;if(e.score&&t.score&&t.score!==e.score)return t.score>e.score;return Object(n.m)(t.url).length<Object(n.m)(e.url).length}function o(e,t){let a=t.url.indexOf("://")+1;a>0&&(a+=2);const i=function(e,t){let a=t.url.indexOf("://")+1;a>0&&(a+=2);let i=t.url.toLowerCase().indexOf(e.toLowerCase());return 0!==i&&(i=t.url.substr(a).toLowerCase().indexOf(e.toLowerCase()),i>-1&&(i+=a)),i}(e,t);return 0===i||i===a||i===a+4&&"www."===t.url.substr(a,4)}function l({preferBookmarks:e,firstBookmarkItem:t,firstBookmarkNicknameItem:a,firstHistoryItem:i,firstTypedHistoryItem:n,firstBookmarkTitleItem:r}){const o=(e?[t,a,r,n,i]:[i,n,t]).find(e=>!!e);return n&&i&&o===n&&(l=n.url,c=i.url,Object(s.a)(l).startsWith(Object(s.a)(c)))?i:o;var l,c}function c(e,t,a){if(0===t.length)return;const{autocompleteOnTitle:s,preferBookmarks:n}=a,{firstBookmarkIndex:c,firstBookmarkTitleIndex:d,firstHistoryIndex:u,firstTypedHistoryIndex:h,firstBookmarkNicknameIndex:m}=function({items:e,value:t,autocompleteOnTitle:a}){let s=-1,n=-1,l=-1,c=-1,d=-1;for(let a=0;a<e.length;a++){const m=e[a];if("OMNI_RESULT_FOLDER_NICKNAME"!==m.type&&(m.url&&(u=t,h=m.url,!/\w{1,}\.[a-z]{2}/g.test(u)||!new RegExp(Object(i.a)(u)+"/").test(h)))){if(m.nickname&&t.toLowerCase()===m.nickname.toLowerCase())return{firstBookmarkIndex:a,firstBookmarkTitleIndex:n,firstHistoryIndex:l,firstTypedHistoryIndex:c,firstBookmarkNicknameIndex:d};if(o(t,m))switch(m.type){case"OMNI_RESULT_HISTORY_PROMOTED":case"OMNI_RESULT_HISTORY_URL":r(e[l],m)&&(l=a);break;case"OMNI_RESULT_INTERNAL":t.includes(":")&&-1!==l&&(l=a);break;case"OMNI_RESULT_BOOKMARK_PROMOTED":case"OMNI_RESULT_BOOKMARK_DESCRIPTION":case"OMNI_RESULT_BOOKMARK_NICKNAME":case"OMNI_RESULT_BOOKMARK_TITLE":case"OMNI_RESULT_BOOKMARK_TITLE_EXACT":case"OMNI_RESULT_BOOKMARK_UNKNOWN":case"OMNI_RESULT_BOOKMARK_URL":case"OMNI_RESULT_BOOKMARK_URL_HOST":r(e[s],m)&&(s=a);break;case"OMNI_RESULT_TYPED_HISTORY":case"OMNI_RESULT_TYPED_HISTORY_SEARCH":r(e[c],m)&&(c=a)}if(m.type.startsWith("OMNI_RESULT_BOOKMARK")){if(m.title.toLowerCase().startsWith(t.toLowerCase())){-1===n?n=a:e[n].title.length<m.title.length&&(n=a);continue}if(m.nickname&&m.nickname.toLowerCase().startsWith(t.toLowerCase())&&-1===d){d=a;continue}}}}var u,h;return{firstBookmarkIndex:s,firstBookmarkTitleIndex:n,firstHistoryIndex:l,firstTypedHistoryIndex:c,firstBookmarkNicknameIndex:d}}({items:t,value:e,autocompleteOnTitle:s});return l({preferBookmarks:n,firstBookmarkItem:t[c],firstBookmarkNicknameItem:t[m],firstHistoryItem:t[u],firstTypedHistoryItem:t[h],firstBookmarkTitleItem:s?t[d]:void 0})}function d(e){switch(e){case"OMNI_RESULT_BOOKMARK_URL_HOST":return 200;case"OMNI_RESULT_BOOKMARK_PROMOTED":return 100;default:return 0}}function u(e,t){return t.visitCount+("OMNI_RESULT_HISTORY_PROMOTED"===e?200:0)-100*(((t.url||"").match(/\//g)||[]).length-3)}},function(e,t,a){"use strict";function i(e){let t=0;if(e){const a="complete"===e.state?e.totalBytes:e.bytesReceived;if(e.startTime&&a){t=a/((e.endTime?new Date(e.endTime).getTime():Date.now())-new Date(e.startTime).getTime())*1e3}}return t}a.d(t,"a",(function(){return i}))},,function(e,t,a){"use strict";var i=a(255);t.a=function(e){if(""===e||void 0===e)return new i.b;const t=["title","url"],a={},s=e.match(/(\S+:\s*'.*')|(\S+:\s*".*")|(\S+:\s*\S+)|(\S+)/g);let n="";for(let e=0;e<s.length;e++){const i=s[e].trim();if(i.length>0){let e=!1;for(let s=0;s<t.length;s++){const r=i.toLowerCase().indexOf(t[s]+":"),o=t[s].length+1;r>-1&&(e=!0,void 0===a[t[s]]?(n=t[s],a[t[s]]=i.slice(r+o).trim()):a[t[s]]+=" "+i.slice(r+o).trim())}e||(n?a[n]=a[n]+" "+i:void 0===a.query?a.query=i:a.query+=" "+i)}}return new i.b({title:a.title||"",url:a.url||"",query:a.query||""})}},function(e,t,a){"use strict";var i=a(18),s=a.n(i),n=a(96),r=a(0),o=a.n(r),l=a(2);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends o.a.PureComponent{constructor(...e){super(...e),c(this,"refCanvas",o.a.createRef()),c(this,"getInheritedColor",()=>{if(!this._isMounted)return;let e="#111111";this.props.color?e=this.props.color:this.refCanvas.current&&(e=getComputedStyle(this.refCanvas.current).getPropertyValue("color")),this._color!==e&&(this._color=e)}),c(this,"renderIcon",e=>{if(!this.refCanvas.current)return;const t=this.refCanvas.current.getContext("2d");this.getInheritedColor();let a=0;function i(e,t){return e+a*(t-e)}const n=()=>{t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},r=()=>{t.beginPath(),t.moveTo(2,27),t.lineTo(5,30),t.lineTo(28,7),t.lineTo(25,4),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,8),t.lineTo(6,20),t.lineTo(4,20),t.moveTo(14,24),t.lineTo(18,20),t.lineTo(18,28),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},o=()=>{t.beginPath(),t.moveTo(6,25),t.lineTo(4,23),t.lineTo(4,8),t.lineTo(6,6),t.lineTo(26,6),t.lineTo(28,8),t.lineTo(28,23),t.lineTo(26,25),t.moveTo(26,23),t.lineTo(26,14),t.lineTo(14,14),t.lineTo(14,23),t.closePath(),t.lineWidth=0,t.fillStyle=this._color,t.fill()},l=()=>{if(!t)return;t.clearRect(18,0,32,32),a=a>1?0:Math.ceil(100*(a+.05))/100,t.beginPath(),t.moveTo(4,12),t.lineTo(10,12),t.lineTo(18,4),t.lineTo(18,28),t.lineTo(10,20),t.lineTo(4,20),t.moveTo(i(14,22),i(12,4)),t.quadraticCurveTo(i(18,32),16,i(14,22),i(20,28)),t.lineTo(i(16,24),i(22,30)),t.quadraticCurveTo(i(20,34),16,i(16,24),i(10,2)),t.closePath(),t.lineWidth=0;const e=a<.7?1:parseFloat((1-a)/.3).toFixed(2);t.fillStyle=s()(this._color).alpha(e).css(),t.fill(),"playing"===this.props.mode&&this.props.animated?this._isMounted&&(this.getInheritedColor(),this._timeoutId=setTimeout(l,64)):c(this.props.mode)},c=e=>{t.globalCompositeOperation&&(this._timeoutId&&clearTimeout(this._timeoutId),t.clearRect(0,0,32,32),"playing"===e?this.props.animated?l():n():"muting"===e?r():"pip"===e?o():n())};c(e)})}componentDidMount(){this._isMounted=!0,this.renderIcon(this.props.mode)}componentDidUpdate(e){const{mode:t,color:a,animated:i,active:s,vivaldiSettings:n}=this.props;!this._isMounted||e.mode===t&&e.color===a&&e.animated===i&&e.active===s&&e.vivaldiSettings.BROWSER_COLOR_BG===n.BROWSER_COLOR_BG||this.renderIcon(this.props.mode)}componentWillUnmount(){this._isMounted=!1,this._timeoutId&&clearTimeout(this._timeoutId)}render(){let e="";return"playing"===this.props.mode?e=Object(l.a)("Mute tab audio"):"muting"===this.props.mode?e=Object(l.a)("Unmute tab audio"):"pip"===this.props.mode&&(e=Object(l.a)("Exit Picture in Picture")),o.a.createElement("canvas",{ref:this.refCanvas,className:"audioicon",width:32,height:32,title:e,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\AudioIcon.jsx",lineNumber:216}})}}t.a=Object(n.a)(d,["BROWSER_COLOR_BG"])},,,,,,,,function(e,t,a){"use strict";var i=a(63),s=a(0),n=a.n(s),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ConfirmationDlg.jsx";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends n.a.Component{constructor(...e){super(...e),o(this,"onClose",()=>{this.props.onClose(!1)}),o(this,"onConfirmed",()=>{this.props.onClose(!0)})}render(){return n.a.createElement(i.a,{viewMode:"slide",dialogWidth:this.props.dialogWidth||400,onRequestClose:this.onClose,__source:{fileName:r,lineNumber:26}},n.a.createElement("header",{className:"dialog-header",__source:{fileName:r,lineNumber:30}},n.a.createElement("h1",{className:"dialog-title",__source:{fileName:r,lineNumber:31}},this.props.title)),n.a.createElement("div",{className:"dialog-content",__source:{fileName:r,lineNumber:33}},this.props.prompt),n.a.createElement("footer",{className:"dialog-footer",__source:{fileName:r,lineNumber:34}},n.a.createElement("input",{type:"button",className:"primary",value:this.props.positive,onClick:this.onConfirmed,autoFocus:!0,__source:{fileName:r,lineNumber:35}}),!this.props.hideNegative&&n.a.createElement("input",{type:"button",value:this.props.negative,onClick:this.onClose,__source:{fileName:r,lineNumber:37}})))}}t.a=l},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(145);function s(e,t){const{body:a}=e;if(!a)return;const i=getComputedStyle(t.srcElement).getPropertyValue("user-select");if(!t.srcElement.matches("a[href], area[href], input:not([disabled]), select:not([disabled]), option:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")&&"text"!==i&&"all"!==i){let i=t.target;for(;i!==a;){if(i.draggable){const t=e.activeElement,s=function(i){this.removeEventListener("mouseup",s),this.removeEventListener("dragend",s),e.activeElement===a&&t.focus()};return i.addEventListener("mouseup",s),void i.addEventListener("dragend",s)}i=i.parentElement}t.preventDefault()}}function n(e){const{body:t}=e;if(!t)return i.default;const a=s.bind(null,e);return t.addEventListener("mousedown",a),function(){t.removeEventListener("mousedown",a)}}},,,,function(e,t,a){"use strict";var i=a(19),s=a(9),n=a(0),r=a.n(n),o=a(88),l=a(62),c=a(52),d=a(550),u=a(142),h=a(551),m=a(10),p=a(2),g=a(13),b=a(1),f="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\VivaldiMenuButton.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=[b.kKeyboardShortcutsAltOpensMenu,b.kMenuIconType];class v extends r.a.PureComponent{constructor(...e){super(...e),_(this,"activeShortcuts",[]),_(this,"hasMenu",!1),_(this,"_onPrefsChange",()=>{this._setupShortcuts(!1)}),_(this,"_onCommandStoreChange",e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0,this._setupShortcuts(!1);break;case"shortcut":this._setupShortcuts(!1)}}),_(this,"_changeFocus",()=>{this._showMenu(-1)}),_(this,"_getMenuItems",e=>l.default.getNamedMenu("vivaldi",e)),_(this,"_setupShortcuts",e=>{this.activeShortcuts.forEach(e=>{e.shortcut&&c.a.unbind(e.shortcut,this._showSubMenu)}),this.activeShortcuts=[],this.props.prefValues[b.kKeyboardShortcutsAltOpensMenu]?(this.activeShortcuts=u.a.getShortcutsForMenuItems(this._getMenuItems(!1)),this.activeShortcuts.forEach(e=>{e.shortcut&&c.a.bind(e.shortcut,this._showSubMenu)})):e&&this._getMenuItems(!1)}),_(this,"_showMenu",(e,t)=>{const a=this.refs.button.getBoundingClientRect(),i=this._getMenuItems(!0),s=e<0?-1:i[e].id,n={id:0,rect:{x:parseInt(a.left),y:parseInt(a.top),width:parseInt(a.width),height:parseInt(a.height)},menu:{items:i,expandId:s,preferred:this.activeShortcuts}};h.a.show(n.id,[n],"bottom")}),_(this,"_showSubMenu",e=>{this.activeShortcuts.forEach(t=>{t.shortcut&&t.key===e.key&&this._showMenu(t.index,e)})}),_(this,"_handleDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),_(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowDown":case"Enter":this._showMenu(-1);break;case"Escape":o.default.executeActions("COMMAND_FOCUS_WEBVIEW");break;default:return}e.preventDefault(),e.stopPropagation()})}componentDidMount(){m.a.addListener(b.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),l.default.addChangeListener(this._onCommandStoreChange),this.hasMenu=l.default.isNamedMenuAvailable("vivaldi"),this.hasMenu?this._setupShortcuts(!0):this._requestMenu()}componentWillUnmount(){m.a.removeListener(b.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),l.default.removeChangeListener(this._onCommandStoreChange),this.activeShortcuts.forEach(e=>{e.shortcut&&c.a.unbind(e.shortcut,this._showSubMenu)})}_requestMenu(){this.hasMenu||o.default.requestNamedMenu("vivaldi")}render(){return r.a.createElement(r.a.Fragment,{__source:{fileName:f,lineNumber:172}},r.a.createElement(d.a,{changeFocus:this._changeFocus,__source:{fileName:f,lineNumber:173}}),r.a.createElement("button",{ref:"button",className:"vivaldi",style:{boxShadow:"none"},onMouseDown:this._showMenu.bind(this,-1),onKeyDown:this._handleKeyDown,onDoubleClick:this._handleDoubleClick,tabIndex:this.props.keyAccess,title:Object(p.a)("Menu"),__source:{fileName:f,lineNumber:176}},"icon"===this.props.prefValues[b.kMenuIconType]&&r.a.createElement("span",{className:"application-icon",dangerouslySetInnerHTML:{__html:g.ab},__source:{fileName:f,lineNumber:186}}),"icon"===this.props.prefValues[b.kMenuIconType]&&r.a.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:a(906)},__source:{fileName:f,lineNumber:191}}),"burger"===this.props.prefValues[b.kMenuIconType]&&r.a.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:a(907)},__source:{fileName:f,lineNumber:198}})))}}var E=Object(i.a)(v,N),w=a(87),S=a(25),C=a(16),k=a(17),y=a.n(k),O=(a(44),a(20)),A="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\titlebar\\titlebar.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const I=[b.kMenuDisplay];class D extends r.a.PureComponent{constructor(e){super(e),T(this,"_getPageStoreState",()=>{const e=s.a.getActivePage();return{activeTitle:e.title,activeUrl:e.url}}),T(this,"_onPageStoreChange",()=>{this.setState(this._getPageStoreState())}),T(this,"close",e=>{e.stopPropagation(),w.a.close(this.context.vivaldiWindowId)}),T(this,"minimize",e=>{w.a.minimize(this.context.vivaldiWindowId)}),T(this,"maximize",e=>{e.persist(),C.a.isMaximized(this.context.vivaldiWindowId)||C.a.isFullscreen(this.context.vivaldiWindowId)?w.a.restore(this.context.vivaldiWindowId):w.a.maximize(this.context.vivaldiWindowId)}),T(this,"skipFocusOnSystemButtonMouseDown",e=>{e.preventDefault()}),T(this,"keyDownListener",e=>{e.altKey&&this.setState({altHover:!0})}),T(this,"keyUpListener",e=>{"Alt"===e.key&&this.setState({altHover:!1})}),T(this,"handleMouseEnter",e=>{e.altKey&&this.setState({altHover:!0}),document.addEventListener("keydown",this.keyDownListener),document.addEventListener("keyup",this.keyUpListener)}),T(this,"handleMouseLeave",e=>{this.setState({altHover:!1}),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("keyup",this.keyUpListener)}),this.state={altHover:!1,...this._getPageStoreState()}}componentDidMount(){s.a.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){s.a.removeChangeListener(this._onPageStoreChange)}render(){const e=O.a.getDisplayTitleByUrl(this.state.activeUrl,this.state.activeTitle)||"Vivaldi",t="top"!==this.props.tabPosition?"tabless":null,i=C.a.isFullscreen(this.context.vivaldiWindowId);let s,n,o;switch(navigator.appVersion.indexOf("Windows NT 10")>0?"win10":"win32"){case"linux":case"win32":s=a(1270),o=a(1271),n=a(1272);break;case"win10":s=a(1273),o=a(1274),n=a(1275);break;case"darwin":s=a(1276),o=a(1277),n=a(1278)}const l=6===this.props.prefValues[b.kSystemMacAquaColorVariant];return r.a.createElement("div",{id:"titlebar",className:t,__source:{fileName:A,lineNumber:183}},!this.props.isPopupWindow&&"vivaldi"===this.props.prefValues[b.kMenuDisplay]&&r.a.createElement(E,{keyAccess:this.props.keyAccess,__source:{fileName:A,lineNumber:187}}),r.a.createElement("div",{className:y()({"window-buttongroup":!0,"alt-hover":this.state.altHover&&!i,graphite:l}),onMouseEnter:null,onMouseLeave:null,__source:{fileName:A,lineNumber:189}},r.a.createElement("button",{tabIndex:"-1",className:"window-minimize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.minimize,dangerouslySetInnerHTML:{__html:o},__source:{fileName:A,lineNumber:200}}),r.a.createElement("button",{tabIndex:"-1",className:"window-maximize",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.maximize,dangerouslySetInnerHTML:{__html:n},__source:{fileName:A,lineNumber:207}}),r.a.createElement("button",{tabIndex:"-1",className:"window-close",onMouseDown:this.skipFocusOnSystemButtonMouseDown,onClick:this.close,dangerouslySetInnerHTML:{__html:s},__source:{fileName:A,lineNumber:214}})),"top"!==this.props.tabPosition&&("vivaldi"===this.props.prefValues[b.kMenuDisplay]||this.props.isPopupWindow||!1)&&r.a.createElement("div",{id:"pagetitle",__source:{fileName:A,lineNumber:227}},e))}}T(D,"contextType",S.a);t.a=Object(i.a)(D,I)},,,,,function(e,t,a){"use strict";var i=a(500),s=a(11),n=a(4);const r=new class{add(e,t,a){s.a.dispatch({actionType:n.a.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM,pageId:e,id:t,url:a})}update(e,t,a){const r=i.a.getQueue(e);r&&0!==r.get("id")&&r.get("url")===t&&s.a.dispatch({actionType:n.a.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM,pageId:e,id:r.get("id"),url:a})}remove(e,t){s.a.dispatch({actionType:n.a.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM,pageId:e,id:t})}};t.a=r},function(e,t,a){"use strict";var i=a(2);const s={"Invalid URL.":Object(i.a)("Invalid URL."),"Nickname exists.":Object(i.a)("Nickname exists.")};t.a=function(e){return e in s?s[e]:e}},,,function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(11),r=a(4);const o=new class extends s.a{emitChangeParam(e){this.emit("change",e)}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};n.a.register(e=>{switch(e.actionType){case r.a.TAB_NEW_TAB:o.emitChangeParam({action:"newTab",url:e.url});break;case r.a.TAB_NEW_BACKGROUND_TAB:o.emitChangeParam({action:"newBackgroundTab",url:e.url,addOpenerTabId:e.addOpenerTabId});break;case r.a.TAB_CLOSE_ALL_BUT_ACTIVE_TAB:o.emitChangeParam({action:"closeAllButActiveTab"});break;case r.a.TAB_SWITCH_BACK_SETTING:o.emitChangeParam({action:"switchTabBackBySetting",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_SETTING:o.emitChangeParam({action:"switchTabForwardBySetting",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_BACK_HISTORY:o.emitChangeParam({action:"switchTabBackByHistory",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_HISTORY:o.emitChangeParam({action:"switchTabForwardByHistory",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_BACK_ORDER:o.emitChangeParam({action:"switchTabBackByOrder",maybeEvent:e.maybeEvent});break;case r.a.TAB_SWITCH_FORWARD_ORDER:o.emitChangeParam({action:"switchTabForwardByOrder",maybeEvent:e.maybeEvent});break;case r.a.TAB_UNDO_RECENTLY_CLOSED:o.emitChangeParam({action:"reopenRecentlyClosed"});break;case r.a.TAB_VIEW_PAGE_SOURCE:o.emitChangeParam({action:"viewPageSource"});break;case r.a.TAB_STACK_CREATE:o.emitChangeParam({action:"stackCreate"});break;case r.a.TAB_STACK_DISSOLVE:o.emitChangeParam({action:"stackDissolve"});break;case r.a.TAB_STACK_REMOVE:o.emitChangeParam({action:"stackRemove"});break;case r.a.TAB_STACK_UNTILE:o.emitChangeParam({action:"stackUntile"});break;case r.a.TAB_STACK_TILE_GRID:o.emitChangeParam({action:"stackTileGrid"});break;case r.a.TAB_STACK_TILE_HORIZONTAL:o.emitChangeParam({action:"stackTileHorizontal"});break;case r.a.TAB_STACK_TILE_VERTICAL:o.emitChangeParam({action:"stackTileVertical"});break;case r.a.TAB_TOGGLE_THUMBNAIL:o.emitChangeParam({action:"tabThumbnail"})}}),t.a=o},function(e,t,a){"use strict";var i=a(168),s=a.n(i),n=a(11),r=a(4);class o extends s.a{constructor(){super(n.a)}getInitialState(){return""}reduce(e,t){switch(t.actionType){case r.a.STATUS_SET_STATUS:return t.status;case"CHROME_TABS_ACTIVATED":return""}return e}}t.a=new o},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u}));var i=a(18),s=a.n(i),n=a(10),r=a(27),o=a(1);function l(){const e=r.a.getSync("BROWSER_COLOR_FG");return`html, body {\n      overflow: initial;\n    }\n    body {\n      margin: 12px 24px 24px;\n      font-size: 13px;\n      font-family: sans-serif;\n      line-height: 1.3;\n      ${"inherit_themes"===n.a.get(o.kMailComposerColors)?`color: rgb(${s()(e).rgb()});`:""}\n      ${"black_on_white"===n.a.get(o.kMailComposerColors)?"background: white;":""}\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    blockquote {\n      padding-inline-start: 18px;\n      border-left: 3px solid inherit;\n      margin: 0;\n      opacity: 0.85;\n    }\n    pre {\n      white-space: pre-wrap;\n    }\n    ${d()}`}function c(){const e=r.a.getSync("BROWSER_COLOR_FG"),t=r.a.getSync("BROWSER_COLOR_BG"),a=r.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG");return{colorFg:`rgb(${s()(e).rgb()})`,colorBg:`rgb(${s()(t).rgb()})`,colorBgDark:`rgb(${s()(t).darken(.1).rgb()})`,colorBorder:`rgb(${s()(e).luminance(.5).rgb()})`,colorHighlight:`rgb(${s()(a).rgb()})`}}function d(){const e=c();return`\n    .tooltip {\n      --colorFg: ${e.colorFg};\n      --colorBg: ${e.colorBg};\n      --colorBgDark: ${e.colorBgDark};\n      --colorBorder: ${e.colorBorder};\n      --colorHighlight: ${e.colorHighlight};\n      --TipWidth: 480px;\n      position: relative;\n    }\n    .tooltip .tooltip-text * {\n      user-select: none;\n    }\n    .tooltip-text input {\n      margin-left: 3px;\n      border: 1px solid var(--colorBorder);\n      border-radius: 2px;\n      font-size: 11.5px;\n      opacity: 0.8;\n      color: var(--colorFg);\n      background-color: var(--colorBg);\n    }\n    .tooltip-text input:active {\n      background-color: var(--colorBgDark);\n    }\n    .tooltip-text input:first-of-type {\n      margin-left: 12px;\n    }\n    .tooltip-text a {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--colorFg);\n    }\n    .tooltip .tooltip-text {\n      cursor: default;\n      position: absolute;\n      z-index: 1;\n      display: flex;\n      top: 100%;\n      left: -6px;\n      max-width: var(--TipWidth);\n      padding: 6px 6px 6px 12px;\n      color:var(--colorFg);\n      background-color: var(--colorBg);\n      border: 1px solid var(--colorBgDark);\n      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 3px 10px rgba(0, 0, 0, 0.3);\n      border-radius: 3px;\n      font-size: 13px;\n    }\n  `}function u(){return`${function(){const e=c();return`\n    html, body, iframe {\n      background-color: transparent;\n      padding: 0;\n      margin: 0;\n      font-size: 14px;\n      font-family: sans-serif;\n      line-height: 1.3;\n      overflow: initial;\n    }\n    body[contenteditable="plaintext-only"] {\n      font-family: monospace;\n    }\n    body {\n      --colorFg: ${e.colorFg};\n      --colorBg: ${e.colorBg};\n      --colorBgDark: ${e.colorBgDark};\n      --colorBorder: ${e.colorBorder};\n      --colorHighlight: ${e.colorHighlight};\n      --EditorPadding: 12px;\n      --MaxWidth: 700px;\n      margin-left: var(--EditorPadding);\n      padding-left: calc(calc(50% - calc(var(--MaxWidth) / 2) - var(--EditorPadding))) !important;\n      padding-right: calc(50% - calc(var(--MaxWidth) / 2)) !important;\n      padding-top: var(--EditorPadding);\n      padding-bottom: calc(var(--EditorPadding) * 3);\n      color: var(--colorFg);\n      cursor: text;\n    }\n    img {\n      display: inline-block;\n      vertical-align: top;\n      max-width: 100%;\n      height: auto;\n    }\n    a:-webkit-any-link {\n      color: var(--colorHighlight);\n      cursor: pointer;\n    }\n  `}()}\n    html, body, iframe {\n      font-size: 16px;\n      font-family: sans-serif;\n    }\n    body {\n      overflow: overlay;\n    }\n    input[type=checkbox] {\n      appearance: none;\n      position: relative;\n      width: 16px;\n      height: 16px;\n      min-width: 16px;\n      min-height: 16px;\n      vertical-align: middle;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n      margin: unset;\n      border-width: 1px;\n      border-style: solid;\n      border-color: rgba(0,0,0,0.2);\n      background-color: var(--colorBgDark);\n    }\n    input[type='checkbox']:disabled {\n      opacity: 1;\n      filter: grayscale(1);\n    }\n    input[type=checkbox]:before,\n    input[type=checkbox]:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: var(--colorHighlight);\n      transform-origin: 0 0;\n    }\n    input[type=checkbox]:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:before {\n      transform: rotate(-45deg) translateY(45%) translateX(-30%) scaleX(0.25) scaleY(0.4);\n    }\n    input[type=checkbox]:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(0);\n    }\n    input[type=checkbox]:checked:after {\n      transform: rotate(225deg) translateY(-30%) translateX(-95%) scaleX(0.25) scaleY(1.2);\n    }\n    ${d()}\n  `}},function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return _}));var i=a(161),s=a(76),n=a(62),r=(a(106),a(12)),o=a(10),l=a(83),c=a(389),d=a(16),u=a(2),h=a(5),m=(a(21),a(1)),p=a(20);let g="";h.a.utilities.onScroll.addListener(e=>{1===e?g="mouse":2===e?g="trackpad":3===e&&(g="inertial")});let b="";function f(){h.a.tabsPrivate.onMouseGestureDetection.addListener(N),h.a.tabsPrivate.onMouseGesture.addListener(v),h.a.tabsPrivate.onWebviewClickCheck.addListener(E),h.a.tabsPrivate.onPageZoom.addListener(C),document.addEventListener("wheel",k,{passive:!1})}function _(){h.a.tabsPrivate.onMouseGestureDetection.removeListener(N),h.a.tabsPrivate.onMouseGesture.removeListener(v),h.a.tabsPrivate.onWebviewClickCheck.removeListener(E),h.a.tabsPrivate.onPageZoom.removeListener(C),document.removeEventListener("wheel",k,{passive:!1})}function N(e){e===d.a.getId()&&function(){b="";const e=c.a.getState();e&&h.a.utilities.isUrlValid(e,t=>{t.urlValid&&t.schemeValid&&(b=e)})}()}function v(e,t,a,i){if(e!==d.a.getId())return;const s=n.default.getCommandsGestures();let o=void 0;if(b&&(o=s["e"+i]),!o){if(o=s[i],!o)return;const e=y(t,a);if(e){const[t]=e;t.active||r.a.openPage(t.id)}}o.function(null,b),b="",l.a.setStatus(Object(u.a)("Gesture: $1",[o.label]),3e3)}function E(e,t,a,i,s){if(e!==d.a.getId())return;const n=document.elementFromPoint(Math.round(i),Math.round(s));if(n&&"WEBVIEW"===n.tagName){t&&n.focus();const e=new MouseEvent(t?"mousedown":"mouseup",{button:a,clientX:i,clientY:s,bubbles:!0});n.dispatchEvent(e)}}let w=null;function S(){w=setTimeout(()=>{w=null},100)}function C(e,t,a,n){if(e!==d.a.getId()||null!==w||"inertial"===g)return;let c;const h=i.a();if(h.count()>=2){const e=y(a,n,h);if(!e)return;const[t,i]=e;if(t.active||r.a.openPage(t.id),p.a.isInternalPage(t))return;if("WEBVIEW"!==i.tagName)return void console.error("An external page has "+i.tagName+" tag when WEBVIEW was expected");c=i}else{const e=s.a.getActiveWebView();if(!e)return;c=e}S();const b=.1*t;c.getZoom(e=>{let t=Math.round(10*e)/10+b;t=Math.min(Math.max(t,.2),5),c.setZoom(t),"overlay"!==o.a.get(m.kStatusBarDisplay)&&o.a.get(m.kToolbarsStatus).includes("Zoom")||l.a.setStatus(Object(u.a)("Page Zoom $1%",[Math.round(100*t)]),2e3)})}function k(e){const t=e.target;if(t.classList.contains("UrlBar-UrlField")&&t.scrollWidth>=t.clientWidth&&t!==document.activeElement)return void e.preventDefault();if(!o.a.get(m.kMouseWheelTabSwitch))return;let a=!1;if(t.closest("div#tabs-container")&&(a=!0),2===e.buttons||function(e){return!0===e.altKey&&!1===e.ctrlKey&&!1===e.shiftKey&&!1===e.metaKey}(e)||a){if(e.preventDefault(),"inertial"===g)return;const t=e.wheelDelta;let a;if(t>0)a=1;else{if(!(t<0))return;a=-1}const i=!1,s=i?"COMMAND_TAB_SWITCH_BACK_SETTING":"COMMAND_TAB_SWITCH_FORWARD_SETTING",r=i?"COMMAND_TAB_SWITCH_BACK_ORDER":"COMMAND_TAB_SWITCH_FORWARD_ORDER",o=i?"COMMAND_TAB_SWITCH_FORWARD_SETTING":"COMMAND_TAB_SWITCH_BACK_SETTING",l=i?"COMMAND_TAB_SWITCH_FORWARD_ORDER":"COMMAND_TAB_SWITCH_BACK_ORDER";let c;if("trackpad"===g){if(null!==w)return;S(),c=a<0?2===e.buttons||e.altKey?s:r:2===e.buttons||e.altKey?o:l}else c=a<0?2===e.buttons||e.altKey?s:r:2===e.buttons||e.altKey?o:l;const d=n.default.getCommands();for(const t of d)if(t.name===c){t.action(null,e);break}}}function y(e,t,a){a=a||i.a();for(const i of a){const a=document.getElementById(String(i.id));if(!a)continue;const s=a.getBoundingClientRect();if(s.left<=e&&e<s.right&&s.top<=t&&t<s.bottom)return[i,a]}return null}},,,,,,,,,,function(e,t){let a=!1;const i=(e,t)=>{const a=e[t].level-1;for(let i=t-1;i>=0;i--)if(e[i].level===a)return i;return-1};e.exports=(e,t)=>{t&&(a=!0===t.enabled),e.block.ruler.after("list","todo",(e,t,a)=>{const i=((e,t)=>{const a=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(a,i-a)})(e,t);return"list"===e.parentType&&("[ ]"===i.substring(0,3)||"[x]"===i.substring(0,3).toLowerCase())&&(e.tokens.push({type:"todo",content:i,block:!0,lines:[t],level:e.level}),e.line=t+1,!0)},{}),e.renderer.rules.todo=(e,t,s)=>((e,t,s)=>{const n=e[t],r=e[t-1],o=e[i(e,t-1)];let l=n.content;if(r&&"list_item_open"===r.type&&o&&"bullet_list_open"===o.type){const e=1===l.toLowerCase().indexOf("x");return l=l.slice(3).trim(),'<input type="checkbox"'+(e?" checked":"")+(a?"":" disabled")+(s.xhtmlOut?"/>":">")+l}return l})(e,t,s);const s=e.renderer.rules.list_item_open;e.renderer.rules.list_item_open=(e,t,a,n)=>{const r=e[t+1],o=e[i(e,t)];return o&&"bullet_list_open"===o.type&&r&&"todo"===r.type?'<li class="todo">':s(e,t,a,n)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));var i=a(249),s=a(677),n=a.n(s);function r(e){return"win"===Object(i.a)()?function(e){return 1===e.indexOf(":")&&e.match(/^[a-z]/gi)||0===e.indexOf("/")||0===e.indexOf("\\")}(e):function(e){return 0===e.indexOf("/")}(e)}function o(e){return"win"===Object(i.a)()?function(e){let t=n.a.resolve(e).replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI(t)}(e):function(e){return encodeURI(n.a.resolve(e))}(e)}},function(e,t,a){"use strict";var i=a(9),s=a(10),n=a(46),r=a(72),o=a(16),l=a(5),c=a(1);const d={withPageSelection:function(){const e=i.a.getActivePage().get("id");l.a.utilities.getSelectedText(e,e=>{d.withTextAndDefaltEngine(e)})},withTextAndDefaltEngine:function(e){d.withTextAndEngine(e,n.a.getDefault(o.a.isIncognito()).id)},withTextAndEngine:function(e,t){const a=n.a.getById(t);if(e&&a){const t=s.a.get(c.kPageSearchInBackground);r.a.goSearchURL(e,{inCurrent:!1,inBackground:t,useSearchEngine:a})}}};t.a=d},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n}));var i=a(141);const s=(e,t,a,i,s)=>{const r=i||a||t,o=[];let l=!1;const c=n(r);return e.forEach(e=>{const t=e.children.slice().filter(e=>i?-1!==e.url.indexOf(r):a||!s?e.title.toLowerCase().match(c):-1!==e.url.indexOf(r)||e.title.toLowerCase().match(c));l=l||t.length!==e.children.length,t.length>0&&(t.length!==e.children.length?o.push({...e,children:t}):o.push(e))}),l?o:e},n=e=>{let t=new RegExp(Object(i.a)(e),"i");if(e&&e.indexOf(" ")){let a="";e.split(" ").forEach(e=>{a+=`(?=.*?(${Object(i.a)(e)}))`}),t=new RegExp(a,"i")}return t}},function(e,t,a){"use strict";var i=a(18),s=a.n(i),n=a(10),r=a(5),o=a(1);let l=!1;const c=s()("black");let d,u=c,h=c;const m={_onPrefsCacheChanged:function(e,t,a){a===o.kRazerChromaEnabled&&!0===t&&m.init()},isInitialized:function(){return l},setInitCallback:function(e){d=e},onChromaReady:function(){l||(l=!0,h!==c&&(m.setColor(h),h=c),d&&d(),r.a.utilities.onRazerChromaReady.removeListener(this.onChromaReady))},init:function(){l=!1,n.a.addListener([o.kRazerChromaEnabled],this._onPrefsCacheChanged),r.a.utilities.onRazerChromaReady.addListener(this.onChromaReady),r.a.utilities.isRazerChromaReady(e=>{e&&this.onChromaReady()})},setColor:function(e){if(l){if(u.css()!==e.css()){const[,,t]=s()(e).hsl();t<.1&&(e=s()(e).brighten(1));const a=[],i=s.a.bezier([u,e]);for(let e=1;e<11;e++){const[t,s,n]=i(e/10).rgb();a.push({red:t,green:s,blue:n})}r.a.utilities.setRazerChromaColor(a,e=>{e||console.warn("Error setting Razer Chroma color")}),u=e}}else h=e}};t.a=m},function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(16),r=a(5);function o(e){i.a.dispatch({actionType:s.a.VIVALDI_ACCOUNT_STATE_UPDATED,state:e})}const l=new class{login(e,t,a){r.a.vivaldiAccount.login(e,t,a),r.a.sync.start()}logout(){r.a.sync.stop(),r.a.vivaldiAccount.logout()}loadPromise(){return n.a.isIncognitoOrGuest()?Promise.resolve():new Promise(e=>r.a.vivaldiAccount.getState(t=>{o(t),r.a.vivaldiAccount.onAccountStateChanged.addListener(o),e()}))}};t.a=l},function(e,t,a){"use strict";var i=a(502);t.a=function(e){if(!e)return"";try{return decodeURIComponent(Object(i.a)(e))}catch(t){return e}}},,,function(e,t,a){"use strict";a.d(t,"b",(function(){return g}));var i=a(317),s=a(0),n=a.n(s),r=a(127),o=a(46),l=a(2),c=a(163),d=a(114),u=a(36),h=a(130),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\EditSearchEngine.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g={title:Object(l.a)("title","Name"),Nickname:Object(l.a)("Nickname"),"Nickname in use by $1":Object(l.a)("Nickname in use by $1",[""]),URL:Object(l.a)("URL"),"Substitute search keyword in address with %s or %S":Object(l.a)("Substitute search keyword in address with %s or %S"),"Suggest URL":Object(l.a)("Suggest URL"),"Use POST method":Object(l.a)("Use POST method"),"Set as Default Search":Object(l.a)("Set as Default Search"),"Set as Private Search":Object(l.a)("Set as Private Search"),Save:Object(l.a)("Save")};function b(e){const t=o.a.getById(e);return t?{id:e,name:t.name?t.name.trim():"",url:t.url?t.url.trim():"",suggestUrl:t.suggestUrl?t.suggestUrl.trim():"",faviconUrl:t.faviconUrl?t.faviconUrl.trim():"",keyword:t.keyword?t.keyword.trim().toLowerCase():"",post:Boolean(t.post),default:o.a.isDefault(e,!1),defaultFixed:o.a.isDefault(e,!1),private:o.a.isDefault(e,!0),nicknameTaken:!1}:{id:e,name:"",url:"",suggestUrl:"",faviconUrl:"",keyword:"",post:!1,default:!1,defaultFixed:!1,private:!1,nicknameTaken:!1}}class f extends n.a.Component{constructor(e){super(e),p(this,"urlHasChanged",!1),p(this,"handleKeyDown",e=>{"Enter"===e.key&&this.save()}),p(this,"handleBlur",()=>{this.props.id===this.state.id&&this.save()}),p(this,"getDataUri",(e,t)=>{const a=new Image;a.onload=function(){const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight,a.getContext("2d").drawImage(this,0,0),t(a.toDataURL(e))},a.src=e}),p(this,"constructFavicon",e=>{if(e&&!this.state.faviconUrl){const t=Object(u.b)(e.trim()),a=document.createElement("a");a.href=t;const i=a.protocol+"//"+a.host+"/favicon.ico";this.getDataUri(i,e=>{this.urlHasChanged&&this.setState({faviconUrl:e},()=>this.save())})}}),p(this,"canSave",e=>e.id&&!e.nicknameTaken),p(this,"save",(e=this.state,t=!0)=>{if(this.canSave(e)){const a=e.url.trim(),i=o.a.getById(e.id);if(i){const s=Object(c.a)(i);i.name=e.name,i.keyword=e.keyword,i.url=a?a.includes(":")?a:Object(u.b)(a):"",i.suggestUrl=""!==e.suggestUrl.trim()?Object(u.b)(e.suggestUrl):"",this.urlHasChanged&&(i.faviconUrl=e.faviconUrl),i.post=e.post;const n=o.a.getDefault(!1).id,l=o.a.getDefault(!0).id;Object(d.a)(s,i)&&e.default===(n===this.state.id)&&e.private===(l===this.state.id)||(r.a.modify(i,e.default),e.private?r.a.setDefault(i.id,!0):l===i.id&&r.a.setDefault(n,!0)),t&&this.setState(e=>({defaultFixed:e.default}))}}}),p(this,"nameChange",e=>{this.setState({name:e.target.value})}),p(this,"nicknameChange",e=>{const t=e.target.value.trim();let a=t.length>0&&o.a.hasKeyword(t);if(a&&this.props.id){const e=o.a.getById(this.props.id);e&&e.keyword===t&&(a=!1)}this.setState({keyword:t,nicknameTaken:a})}),p(this,"urlChange",e=>{const t=e.target.value;Object(u.k)(t)&&this.constructFavicon(t),this.setState({url:t}),this.urlHasChanged=!0}),p(this,"suggestUrlChange",e=>{this.setState({suggestUrl:e.target.value})}),p(this,"defaultChange",e=>{this.setState({default:e.target.checked},()=>this.save())}),p(this,"privateChange",e=>{this.setState({private:e.target.checked},()=>this.save())}),p(this,"postChange",e=>{this.setState({post:e.target.checked},()=>this.save())}),this.state=b(e.id)}static getDerivedStateFromProps(e,t){return e.id!==t.id?b(e.id):null}componentDidUpdate(e,t){e.id!==this.props.id&&(this.save(t,!1),this.urlHasChanged=!1)}render(){const e=this.state.nicknameTaken?o.a.getByKeyword(this.state.keyword):null,t=e?e.name:"";return n.a.createElement("div",{className:"detail",__source:{fileName:m,lineNumber:244}},n.a.createElement("div",{className:"detail-content",__source:{fileName:m,lineNumber:245}},n.a.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:247}},n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:248}},n.a.createElement(i.a,{type:"text",focusInput:this.props.focusNameInput,label:this.props.searchableStrings.title,value:this.state.name,onBlur:this.handleBlur,onChange:this.nameChange,onKeyDown:this.handleKeyDown,__source:{fileName:m,lineNumber:249}}))),n.a.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:260}},n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:261}},n.a.createElement(i.a,{type:"text",label:this.props.searchableStrings.Nickname,value:this.state.keyword,onBlur:this.handleBlur,onChange:this.nicknameChange,onKeyDown:this.handleKeyDown,__source:{fileName:m,lineNumber:262}})),this.state.nicknameTaken&&n.a.createElement("span",{className:"info dropfade",__source:{fileName:m,lineNumber:271}},Object(h.b)(Object(l.a)("Nickname in use by $1",[t]),this.props.filter))),n.a.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:280}},n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:281}},n.a.createElement(i.a,{type:"text",label:this.props.searchableStrings.URL,value:this.state.url,onBlur:this.handleBlur,onChange:this.urlChange,onKeyDown:this.handleKeyDown,__source:{fileName:m,lineNumber:282}})),n.a.createElement("p",{className:"info",__source:{fileName:m,lineNumber:290}},this.props.searchableStrings["Substitute search keyword in address with %s or %S"])),n.a.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:295}},n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:296}},n.a.createElement(i.a,{type:"text",label:this.props.searchableStrings["Suggest URL"],value:this.state.suggestUrl,onBlur:this.handleBlur,onChange:this.suggestUrlChange,onKeyDown:this.handleKeyDown,__source:{fileName:m,lineNumber:297}}))),n.a.createElement("div",{className:"setting-group",__source:{fileName:m,lineNumber:307}},n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:308}},n.a.createElement("label",{__source:{fileName:m,lineNumber:309}},n.a.createElement("input",{type:"checkbox",checked:this.state.post,onChange:this.postChange,__source:{fileName:m,lineNumber:310}}),n.a.createElement("span",{__source:{fileName:m,lineNumber:313}},this.props.searchableStrings["Use POST method"]))),n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:316}},n.a.createElement("label",{__source:{fileName:m,lineNumber:317}},n.a.createElement("input",{type:"checkbox",checked:this.state.default,disabled:this.state.default,onChange:this.defaultChange,__source:{fileName:m,lineNumber:318}}),n.a.createElement("span",{__source:{fileName:m,lineNumber:322}},this.props.searchableStrings["Set as Default Search"]))),n.a.createElement("div",{className:"setting-single",__source:{fileName:m,lineNumber:325}},n.a.createElement("label",{__source:{fileName:m,lineNumber:326}},n.a.createElement("input",{type:"checkbox",checked:this.state.private,disabled:this.state.default&&this.state.private,onChange:this.privateChange,__source:{fileName:m,lineNumber:327}}),n.a.createElement("span",{__source:{fileName:m,lineNumber:331}},this.props.searchableStrings["Set as Private Search"]))))))}}t.a=f},function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return d}));var i=a(12),s=a(0),n=a.n(s),r=a(2),o=a(13),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\guest-intro\\GuestIntro.jsx";const c="https://vvld.in/guest";function d(e){e.preventDefault(),i.a.openURL(c,{inCurrent:!1,inBackground:!1})}class u extends n.a.Component{render(){return n.a.createElement("div",{className:"guest-intro",__source:{fileName:l,lineNumber:28}},n.a.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:l,lineNumber:30}},n.a.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:l,lineNumber:31}})),n.a.createElement("div",{className:"guest-intro-content",__source:{fileName:l,lineNumber:34}},n.a.createElement("h1",{__source:{fileName:l,lineNumber:35}},Object(r.a)("title","Guest Profile")),n.a.createElement("span",{className:"guest-intro-icon",dangerouslySetInnerHTML:{__html:o.tb.medium},__source:{fileName:l,lineNumber:36}}),n.a.createElement("p",{__source:{fileName:l,lineNumber:43}},Object(r.a)("Browsing with a Guest profile means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),n.a.createElement("p",{__source:{fileName:l,lineNumber:44}},n.a.createElement("a",{tabIndex:0,href:c,onClick:d,__source:{fileName:l,lineNumber:45}},Object(r.a)("Learn more about Guest Profiles")))))}}t.b=u},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return d}));var i=a(147),s=a.n(i);const n="type",r="name";let o=[],l={};function c(e){if("string"==typeof e.src&&e.src.startsWith("blob:")){let t=e.getAttribute("lang");t?(o.push(t),e.removeAttribute("lang"),e.setAttribute("src",t)):(t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(),l[e.src]={cid:t,mimeType:e.getAttribute(n),filename:e.getAttribute(r)},e.setAttribute("src","cid:"+t),e.removeAttribute(n),e.removeAttribute(r))}}function d(e){s.a.addHook("afterSanitizeAttributes",c);const t={blobFreeHTML:s.a.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!0}),cidsInUse:o,newImages:l};return s.a.removeHooks("afterSanitizeAttributes"),o=[],l={},t}},,function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(8),r=a(33),o=a(2),l=a(1),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarDropdown.jsx";const d=n.a.getEventHandler;class u extends s.a.Component{render(){const e=this.props.prefValues;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:c,lineNumber:25}},s.a.createElement("div",{className:"setting-group",__source:{fileName:c,lineNumber:26}},s.a.createElement("h3",{__source:{fileName:c,lineNumber:27}},Object(o.a)("Address Field Drop-Down Menu")),s.a.createElement("div",{className:"setting-single",__source:{fileName:c,lineNumber:28}},s.a.createElement("label",{__source:{fileName:c,lineNumber:29}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarOmniboxEnabled],onChange:d(l.kAddressBarOmniboxEnabled),__source:{fileName:c,lineNumber:30}}),s.a.createElement("span",{__source:{fileName:c,lineNumber:35}},Object(o.a)("Show Drop-Down when Typing")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:c,lineNumber:39}},s.a.createElement("label",{__source:{fileName:c,lineNumber:40}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowBookmarks],onChange:d(l.kAddressBarOmniboxShowBookmarks),__source:{fileName:c,lineNumber:41}}),s.a.createElement("span",{__source:{fileName:c,lineNumber:47}},Object(o.a)("Include Bookmarks")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:c,lineNumber:50}},s.a.createElement("label",{__source:{fileName:c,lineNumber:51}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowTypedHistory],onChange:d(l.kAddressBarOmniboxShowTypedHistory),__source:{fileName:c,lineNumber:52}}),s.a.createElement("span",{__source:{fileName:c,lineNumber:58}},Object(o.a)("Include Typed History")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:c,lineNumber:61}},s.a.createElement("label",{__source:{fileName:c,lineNumber:62}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kAddressBarOmniboxEnabled],checked:e[l.kAddressBarOmniboxShowTopSites],onChange:d(l.kAddressBarOmniboxShowTopSites),__source:{fileName:c,lineNumber:63}}),s.a.createElement("span",{__source:{fileName:c,lineNumber:69}},Object(o.a)("Include Frequently Visited Pages"))))))}}var h=u,m=a(59),p="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBarShortcuts.jsx";const g=n.a.getEventHandler;class b extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:p,lineNumber:19}},s.a.createElement("div",{className:"setting-group",__source:{fileName:p,lineNumber:20}},s.a.createElement("h3",{__source:{fileName:p,lineNumber:21}},Object(o.a)("Open Address in New Tab")),s.a.createElement(m.a,{name:"urlfieldShortcut",className:"setting-single",value:this.props.value,onChange:g(l.kAddressBarUrlOpenShortcut),__source:{fileName:p,lineNumber:22}},s.a.createElement("div",{className:"setting-single",__source:{fileName:p,lineNumber:26}},s.a.createElement("label",{__source:{fileName:p,lineNumber:27}},s.a.createElement("input",{type:"radio",value:"alt",__source:{fileName:p,lineNumber:28}}),s.a.createElement("span",{__source:{fileName:p,lineNumber:29}},"Alt + Enter"))),s.a.createElement("div",{className:"setting-single",__source:{fileName:p,lineNumber:36}},s.a.createElement("label",{__source:{fileName:p,lineNumber:37}},s.a.createElement("input",{type:"radio",value:"shift",__source:{fileName:p,lineNumber:38}}),s.a.createElement("span",{__source:{fileName:p,lineNumber:39}},"Shift + Enter"))))))}}var f=b,_=a(19),N=a(40),v=a(48),E="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\addressbar\\AddressBar.jsx";const w=[l.kAddressBarAutocompleteSuffixExpansionEnabled,l.kAddressBarAutocompleteSuffixExpansionValue,l.kAddressBarAutocompleteEnabled,l.kAddressBarAutocompletePreferBookmarks,l.kAddressBarExtensionsShowAllToggle,l.kAddressBarExtensionsShowHiddenToggle,l.kAddressBarExtensionsRenderInDropdown,l.kAddressBarOmniboxCutcopyEncoded,l.kAddressBarOmniboxEnabled,l.kAddressBarOmniboxShowBookmarks,l.kAddressBarOmniboxShowTopSites,l.kAddressBarOmniboxShowTypedHistory,l.kAddressBarPosition,l.kAddressBarSelectOnClick,l.kAddressBarShowFullUrl,l.kAddressBarShowProfile,l.kAddressBarShowProgress,l.kAddressBarUrlOpenShortcut,l.kAddressBarVisible],S=n.a.getEventHandler;class C extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=()=>{N.a.managePeople()},(a="managePeople")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}changeExtensionToggleAll(e){const t=e.target.checked;!1===t&&(n.a.set(l.kAddressBarExtensionsShowAllToggle,!0),n.a.set(l.kAddressBarExtensionsShowHiddenToggle,!1)),n.a.set(l.kAddressBarExtensionsShowHiddenToggle,!1),n.a.set(l.kAddressBarExtensionsShowAllToggle,t)}changeExtensionToggleHidden(e){const t=e.target.checked;!1===t&&(n.a.set(l.kAddressBarExtensionsShowHiddenToggle,!0),n.a.set(l.kAddressBarExtensionsShowAllToggle,!1)),n.a.set(l.kAddressBarExtensionsShowHiddenToggle,t),n.a.set(l.kAddressBarExtensionsShowAllToggle,!1)}enableExtensionRenderInDropdown(e){const t=e.target.checked;!1===t&&n.a.set(l.kAddressBarExtensionsRenderInDropdown,!0),!0===t&&n.a.set(l.kAddressBarExtensionsRenderInDropdown,!1),n.a.set(l.kAddressBarExtensionsRenderInDropdown,t)}renderShowAddressBar(){return s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:E,lineNumber:111}},s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:112}},s.a.createElement("label",{__source:{fileName:E,lineNumber:113}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarVisible],onChange:S(l.kAddressBarVisible),__source:{fileName:E,lineNumber:114}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:117}},Object(o.a)("Show Address Bar")))))}renderAddressBarPosition(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:126}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:127}},Object(o.a)("Address Bar Position")),s.a.createElement(m.a,{name:"addressbar-position",value:this.props.prefValues[l.kAddressBarPosition],onChange:S(l.kAddressBarPosition),className:"group",__source:{fileName:E,lineNumber:128}},s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:132}},s.a.createElement("label",{__source:{fileName:E,lineNumber:133}},s.a.createElement("input",{type:"radio",value:"top",__source:{fileName:E,lineNumber:134}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:135}},Object(o.a)("Top")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:138}},s.a.createElement("label",{__source:{fileName:E,lineNumber:139}},s.a.createElement("input",{type:"radio",value:"bottom",__source:{fileName:E,lineNumber:140}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:141}},Object(o.a)("Bottom"))))))}renderAddressBarOptions(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:151}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:152}},Object(o.a)("Address Bar Options")),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:153}},s.a.createElement("label",{__source:{fileName:E,lineNumber:154}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowFullUrl],onChange:S(l.kAddressBarShowFullUrl),__source:{fileName:E,lineNumber:155}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:158}},Object(o.a)("Show Full Address")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:161}},s.a.createElement("label",{__source:{fileName:E,lineNumber:162}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarSelectOnClick],onChange:S(l.kAddressBarSelectOnClick),__source:{fileName:E,lineNumber:163}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:166}},Object(o.a)("Select Address on Activation")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:169}},s.a.createElement("label",{__source:{fileName:E,lineNumber:170}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarOmniboxCutcopyEncoded],onChange:S(l.kAddressBarOmniboxCutcopyEncoded),__source:{fileName:E,lineNumber:171}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:174}},Object(o.a)("Copy and Cut Encoded Address")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:177}},s.a.createElement("label",{__source:{fileName:E,lineNumber:178}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowProgress],onChange:S(l.kAddressBarShowProgress),__source:{fileName:E,lineNumber:179}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:182}},Object(o.a)("Page Load Progress Bar")))))}renderAddressBarAutoComplete(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:191}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:192}},Object(o.a)("Address Auto-Complete")),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:193}},s.a.createElement("label",{__source:{fileName:E,lineNumber:194}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompleteEnabled],onChange:S(l.kAddressBarAutocompleteEnabled),__source:{fileName:E,lineNumber:195}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:200}},Object(o.a)("radio","Enabled")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:E,lineNumber:203}},s.a.createElement("label",{__source:{fileName:E,lineNumber:204}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompletePreferBookmarks],disabled:!this.props.prefValues[l.kAddressBarAutocompleteEnabled],onChange:S(l.kAddressBarAutocompletePreferBookmarks),__source:{fileName:E,lineNumber:205}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:212}},Object(o.a)("Always Prefer Bookmarks")))))}renderDomainExpansion(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:222}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:223}},Object(o.a)("Domain Expansion")),s.a.createElement("p",{className:"info pad-top",__source:{fileName:E,lineNumber:224}},Object(o.a)("Expand top level domains with Ctrl + Enter. This shortcut takes precedence over tab opening modifiers")),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:227}},s.a.createElement("label",{__source:{fileName:E,lineNumber:228}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionEnabled],onChange:S(l.kAddressBarAutocompleteSuffixExpansionEnabled),__source:{fileName:E,lineNumber:229}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:233}},Object(o.a)("radio","Enabled")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:E,lineNumber:236}},s.a.createElement("label",{__source:{fileName:E,lineNumber:237}},s.a.createElement("input",{disabled:!this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionEnabled],type:"text",defaultValue:this.props.prefValues[l.kAddressBarAutocompleteSuffixExpansionValue],maxLength:"256",onChange:S(l.kAddressBarAutocompleteSuffixExpansionValue),__source:{fileName:E,lineNumber:238}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:244}},Object(o.a)("Suffix")))))}renderExtensions(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:253}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:254}},Object(o.a)("Extension Visibility")),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:255}},s.a.createElement("label",{title:Object(o.a)("Show and hide only hidden extensions"),__source:{fileName:E,lineNumber:256}},s.a.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[l.kAddressBarExtensionsShowHiddenToggle],onChange:this.changeExtensionToggleHidden,__source:{fileName:E,lineNumber:259}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:265}},Object(o.a)("Toggle Only Hidden Extensions")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:269}},s.a.createElement("label",{title:Object(o.a)("Show and hide all extensions"),__source:{fileName:E,lineNumber:270}},s.a.createElement("input",{type:"radio",name:"toggleSelection",checked:this.props.prefValues[l.kAddressBarExtensionsShowAllToggle],onChange:this.changeExtensionToggleAll,__source:{fileName:E,lineNumber:273}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:279}},Object(o.a)("Toggle All Extensions")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:283}},s.a.createElement("label",{title:Object(o.a)("Enable the drop-down menu for hidden extensions"),__source:{fileName:E,lineNumber:284}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarExtensionsRenderInDropdown],onChange:this.enableExtensionRenderInDropdown,__source:{fileName:E,lineNumber:286}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:291}},Object(o.a)("Expand Hidden Extensions to Drop-Down Menu")))))}renderProfileManagement(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:300}},s.a.createElement("h3",{__source:{fileName:E,lineNumber:301}},Object(o.a)("Profile Management")),s.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:302}},s.a.createElement("label",{__source:{fileName:E,lineNumber:303}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAddressBarShowProfile],onChange:S(l.kAddressBarShowProfile),__source:{fileName:E,lineNumber:304}}),s.a.createElement("span",{__source:{fileName:E,lineNumber:307}},Object(o.a)("Show Profile Button"))),s.a.createElement("input",{type:"button",onClick:this.managePeople,value:Object(o.a)("Manage Profiles"),__source:{fileName:E,lineNumber:309}})))}render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("title","Address Bar"),filter:this.props.filter,__source:{fileName:E,lineNumber:321}},this.renderShowAddressBar(),this.renderAddressBarPosition(),this.renderAddressBarOptions(),s.a.createElement(f,{value:this.props.prefValues[l.kAddressBarUrlOpenShortcut],filter:this.props.filter,__source:{fileName:E,lineNumber:326}}),this.renderAddressBarAutoComplete(),s.a.createElement(h,{prefValues:this.props.prefValues,filter:this.props.filter,__source:{fileName:E,lineNumber:333}}),this.renderDomainExpansion(),this.renderProfileManagement(),this.renderExtensions())}}var k=Object(_.a)(C,w),y=a(29),O=a.n(y),A=a(83),T=a(980),I=a(143),D=a(5),P="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\WindowBackgroundImage.jsx";function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=[l.kThemeWindowBackgroundImageEnabled,l.kThemeWindowBackgroundImageScaling,l.kThemeWindowBackgroundImageUrl,l.kThemeWindowBackgroundAccentColorBlend],L=n.a.getEventHandler;class j extends s.a.Component{constructor(...e){super(...e),x(this,"selectWindowBackgroundImage",e=>{e.preventDefault(),D.a.utilities.selectLocalImage({title:Object(o.a)("Select Window Background Image"),preferencePath:l.kThemeWindowBackgroundImageUrl})}),x(this,"resetWindowBackground",()=>{n.a.reset(l.kThemeWindowBackgroundImageUrl)})}render(){const{filter:e,prefValues:t}=this.props;return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Window Background Image"),filter:e,__source:{fileName:P,lineNumber:47}},s.a.createElement("div",{className:"setting-group",__source:{fileName:P,lineNumber:50}},s.a.createElement("div",{className:"setting-single",__source:{fileName:P,lineNumber:51}},s.a.createElement("h3",{__source:{fileName:P,lineNumber:52}},Object(o.a)("title","Window Background Image")),s.a.createElement("label",{__source:{fileName:P,lineNumber:53}},s.a.createElement("input",{type:"checkbox",checked:t[l.kThemeWindowBackgroundImageEnabled],onChange:L(l.kThemeWindowBackgroundImageEnabled),__source:{fileName:P,lineNumber:54}}),s.a.createElement("span",{__source:{fileName:P,lineNumber:57}},Object(o.a)("Show Window Background Image"))),s.a.createElement("input",{type:"file",className:"window-preview-box",onClick:this.selectWindowBackgroundImage,title:Object(o.a)("Select Image..."),style:{backgroundImage:`url('${t[l.kThemeWindowBackgroundImageUrl]}')`,backgroundSize:"repeat"===t[l.kThemeWindowBackgroundImageScaling]?"auto":"cover",backgroundRepeat:"repeat"===t[l.kThemeWindowBackgroundImageScaling]?"repeat":"no-repeat"},__source:{fileName:P,lineNumber:59}}),s.a.createElement("input",{type:"button",onClick:this.resetWindowBackground,value:Object(o.a)("Reset"),__source:{fileName:P,lineNumber:71}}))),s.a.createElement("div",{className:"setting-group",__source:{fileName:P,lineNumber:77}},s.a.createElement("h3",{__source:{fileName:P,lineNumber:78}},Object(o.a)("Background Image Options")),s.a.createElement(m.a,{name:"windowImageScaling",value:t[l.kThemeWindowBackgroundImageScaling],disabled:!t[l.kThemeWindowBackgroundImageEnabled],onChange:L(l.kThemeWindowBackgroundImageScaling),__source:{fileName:P,lineNumber:79}},s.a.createElement("div",{className:"setting-single",__source:{fileName:P,lineNumber:84}},s.a.createElement("label",{__source:{fileName:P,lineNumber:85}},s.a.createElement("input",{type:"radio",value:"scale",__source:{fileName:P,lineNumber:86}}),s.a.createElement("span",{__source:{fileName:P,lineNumber:87}},Object(o.a)("Scale to Fit")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:P,lineNumber:90}},s.a.createElement("label",{__source:{fileName:P,lineNumber:91}},s.a.createElement("input",{type:"radio",value:"repeat",__source:{fileName:P,lineNumber:92}}),s.a.createElement("span",{__source:{fileName:P,lineNumber:93}},Object(o.a)("radio","Repeat"))))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:P,lineNumber:97}},s.a.createElement("label",{__source:{fileName:P,lineNumber:98}},s.a.createElement("input",{type:"checkbox",checked:t[l.kThemeWindowBackgroundAccentColorBlend],onChange:L(l.kThemeWindowBackgroundAccentColorBlend),__source:{fileName:P,lineNumber:99}}),s.a.createElement("span",{__source:{fileName:P,lineNumber:102}},Object(o.a)("Blend Window Accent Color with Image"))))))}}var B=Object(_.a)(j,M),R=a(25),F=a(7),U="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\Appearance.jsx";function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const H=[l.kAppearanceCssUiModsDirectory,l.kAppearanceRangeButtons,l.kPopupsShowInTab,l.kSettingsInTab,l.kStatusBarDisplay,l.kStatusBarMinimized,l.kThemeColorAccentSaturationLimit,l.kThemeContrastMinimum,l.kThemeDimBlurred,l.kThemeUseAnimation,l.kWindowsLinuxAltControls,l.kWindowsUseNativeDecoration],V=n.a.getEventHandler,G=[{key:l.kToolbarsNavigation,name:Object(o.a)("Reset Address Bar")},{key:l.kToolbarsStatus,name:Object(o.a)("Reset Status Bar")}];class K extends s.a.Component{constructor(...e){super(...e),W(this,"state",{modFolder:this.props.prefValues[l.kAppearanceCssUiModsDirectory]}),W(this,"reportStatusBar",e=>{const{value:t}=e.target;n.a.set(l.kStatusBarDisplay,t),"on"!==t&&(n.a.set(l.kStatusBarMinimized,t),"overlay"===t&&A.a.setStatus(Object(o.a)("Status Info set to Overlay"),2e3))}),W(this,"handleResetToolbarClick",e=>{n.a.reset(e)}),W(this,"uiZoomUpdate",()=>{const e=O.a.findDOMNode(this.refs.ui_zoom_setting),{Element:t}=this.context;e instanceof t&&e.scrollIntoViewIfNeeded()}),W(this,"selectCSSFolder",()=>{D.a.utilities.selectFile(Object(o.a)("Select Folder for CSS UI Mods"),"folder",e=>{!F.default.runtime.lastError&&e&&(this.setState({modFolder:e}),n.a.set(l.kAppearanceCssUiModsDirectory,e))})}),W(this,"onChangeCSSModFolder",e=>{this.setState({modFolder:e.target.value}),n.a.set(l.kAppearanceCssUiModsDirectory,e.target.value)})}renderUseNativeWindow(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:94}},s.a.createElement("label",{__source:{fileName:U,lineNumber:95}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWindowsUseNativeDecoration],onChange:V(l.kWindowsUseNativeDecoration),__source:{fileName:U,lineNumber:96}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:99}},Object(o.a)("Use Native Window"))),s.a.createElement("p",{className:"info",__source:{fileName:U,lineNumber:101}},Object(o.a)("This setting requires a restart to take full effect.")))}renderOpenInTabs(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:110}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:111}},s.a.createElement("label",{__source:{fileName:U,lineNumber:112}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kSettingsInTab],onChange:V(l.kSettingsInTab),__source:{fileName:U,lineNumber:113}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:117}},Object(o.a)("Open Settings in a Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:120}},s.a.createElement("label",{__source:{fileName:U,lineNumber:121}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPopupsShowInTab],onChange:V(l.kPopupsShowInTab),__source:{fileName:U,lineNumber:122}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:125}},Object(o.a)("Open Popups in Tabs")))))}renderShowUI(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:134}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:135}},s.a.createElement("label",{__source:{fileName:U,lineNumber:136}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeUseAnimation],onChange:V(l.kThemeUseAnimation),__source:{fileName:U,lineNumber:137}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:140}},Object(o.a)("Use Animation")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:144}},s.a.createElement("label",{__source:{fileName:U,lineNumber:145}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kAppearanceRangeButtons],onChange:V(l.kAppearanceRangeButtons),__source:{fileName:U,lineNumber:146}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:149}},Object(o.a)("Use Buttons in Range Controls")))))}renderWindowsControlPosition(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:158}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:159}},Object(o.a)("Window Controls Position")),s.a.createElement(m.a,{className:"linuxAltControls",name:"linuxAltControls",value:this.props.prefValues[l.kWindowsLinuxAltControls],onChange:V(l.kWindowsLinuxAltControls,"convert"),__source:{fileName:U,lineNumber:160}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:164}},s.a.createElement("label",{__source:{fileName:U,lineNumber:165}},s.a.createElement("input",{type:"radio",value:"false",__source:{fileName:U,lineNumber:166}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:167}},Object(o.a)("Right Side")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:170}},s.a.createElement("label",{__source:{fileName:U,lineNumber:171}},s.a.createElement("input",{type:"radio",value:"true",__source:{fileName:U,lineNumber:172}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:173}},Object(o.a)("Left Side"))))))}renderStatusBar(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:183}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:184}},Object(o.a)("title","Status Bar")),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:185}},s.a.createElement(m.a,{name:"StatusBar",className:"group",value:this.props.prefValues[l.kStatusBarDisplay],onChange:this.reportStatusBar,__source:{fileName:U,lineNumber:186}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:190}},s.a.createElement("label",{__source:{fileName:U,lineNumber:191}},s.a.createElement("input",{type:"radio",value:"on",__source:{fileName:U,lineNumber:192}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:193}},Object(o.a)("verb","Show Status Bar")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:196}},s.a.createElement("label",{__source:{fileName:U,lineNumber:197}},s.a.createElement("input",{type:"radio",value:"overlay",__source:{fileName:U,lineNumber:198}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:199}},Object(o.a)("Status Info Overlay")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:202}},s.a.createElement("label",{__source:{fileName:U,lineNumber:203}},s.a.createElement("input",{type:"radio",value:"off",__source:{fileName:U,lineNumber:204}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:205}},Object(o.a)("verb","Hide Status Bar")))))))}renderToolbarCustomizations(){const e=G.map(e=>s.a.createElement("div",{className:"setting-single",key:e.key,__source:{fileName:U,lineNumber:217}},s.a.createElement("input",{type:"button",onClick:this.handleResetToolbarClick.bind(this,e.key),value:e.name,__source:{fileName:U,lineNumber:218}})));return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:225}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:226}},Object(o.a)("Toolbar Customization")),e)}renderUserInterfaceZoom(){return s.a.createElement("div",{className:"setting-group unlimited",ref:"ui_zoom_setting",__source:{fileName:U,lineNumber:243}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:244}},Object(o.a)("User Interface Zoom")),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:245}},s.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:U,lineNumber:246}},s.a.createElement(T.a,{onUIZoomUpdate:this.uiZoomUpdate,__source:{fileName:U,lineNumber:247}}))))}renderContrastAdjustment(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:256}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:257}},Object(o.a)("Contrast Adjustment")),s.a.createElement("p",{className:"info",__source:{fileName:U,lineNumber:258}},Object(o.a)("Rebalances the color palette. May cause\n          dramatic color shifts.")),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:260}},s.a.createElement(m.a,{name:"contrastMinimum",className:"group",value:this.props.prefValues[l.kThemeContrastMinimum],onChange:V(l.kThemeContrastMinimum),__source:{fileName:U,lineNumber:261}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:266}},s.a.createElement("label",{__source:{fileName:U,lineNumber:267}},s.a.createElement("input",{type:"radio",value:"0",__source:{fileName:U,lineNumber:268}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:269}},Object(o.a)("No Modifications")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:272}},s.a.createElement("label",{__source:{fileName:U,lineNumber:273}},s.a.createElement("input",{type:"radio",value:"4.5",__source:{fileName:U,lineNumber:274}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:275}},Object(o.a)("Medium (WCAG AA)")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:278}},s.a.createElement("label",{__source:{fileName:U,lineNumber:279}},s.a.createElement("input",{type:"radio",value:"7",__source:{fileName:U,lineNumber:280}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:281}},Object(o.a)("High (WCAG AAA)")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:284}},s.a.createElement("label",{__source:{fileName:U,lineNumber:285}},s.a.createElement("input",{type:"radio",value:"12",__source:{fileName:U,lineNumber:286}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:287}},Object(o.a)("Maximum")))))))}renderAccentSaturationAdjustment(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:298}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:299}},Object(o.a)("Limit Accent Color Saturation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:300}},s.a.createElement("input",{type:"range",min:.1,max:1,step:.05,onChange:V(l.kThemeColorAccentSaturationLimit),value:this.props.prefValues[l.kThemeColorAccentSaturationLimit],__source:{fileName:U,lineNumber:301}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:307}}," ",`${Math.floor(100*this.props.prefValues[l.kThemeColorAccentSaturationLimit])} %`)))}renderBackgroundWindowBehaviour(){return s.a.createElement("div",{className:"setting-group",__source:{fileName:U,lineNumber:317}},s.a.createElement("h3",{__source:{fileName:U,lineNumber:318}},Object(o.a)("Background Window Behavior")),s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:320}},s.a.createElement("label",{__source:{fileName:U,lineNumber:321}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kThemeDimBlurred],onChange:V(l.kThemeDimBlurred),__source:{fileName:U,lineNumber:322}}),s.a.createElement("span",{__source:{fileName:U,lineNumber:325}},Object(o.a)("Fade Foreground Colors")))))}renderCustomStylingOptions(){return I.a.isEnabled("css_mods")?s.a.createElement("div",{className:"setting-subgroup",__source:{fileName:U,lineNumber:349}},s.a.createElement("div",{className:"setting-single",__source:{fileName:U,lineNumber:350}},s.a.createElement("div",{className:"setting-single folder-selection",__source:{fileName:U,lineNumber:351}},s.a.createElement("input",{type:"text",value:this.state.modFolder,title:Object(o.a)("Enter Custom UI Modifications Path"),onChange:this.onChangeCSSModFolder,__source:{fileName:U,lineNumber:352}}),s.a.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectCSSFolder,__source:{fileName:U,lineNumber:356}})),s.a.createElement("p",{className:"info",__source:{fileName:U,lineNumber:360}},Object(o.a)("Directory for custom CSS UI modification files."),s.a.createElement("br",{__source:{fileName:U,lineNumber:361}}),Object(o.a)("They must have a .css extension to be included."),s.a.createElement("br",{__source:{fileName:U,lineNumber:362}}),Object(o.a)("No guarantees are made that these will work in new versions of Vivaldi."),s.a.createElement("br",{__source:{fileName:U,lineNumber:363}}),Object(o.a)("This requires a restart to apply.")))):null}render(){return s.a.createElement("div",{__source:{fileName:U,lineNumber:376}},s.a.createElement(v.a,{categoryTitle:Object(o.a)("Window Appearance"),filter:this.props.filter,__source:{fileName:U,lineNumber:377}},this.renderOpenInTabs(),this.renderShowUI(),this.renderUseNativeWindow(),!1,this.renderStatusBar(),this.renderToolbarCustomizations(),this.renderUserInterfaceZoom()),s.a.createElement(B,{filter:this.props.filter,__source:{fileName:U,lineNumber:390}}),s.a.createElement(v.a,{categoryTitle:Object(o.a)("noun","Color"),filter:this.props.filter,__source:{fileName:U,lineNumber:392}},this.renderContrastAdjustment(),this.renderBackgroundWindowBehaviour(),this.renderAccentSaturationAdjustment()),s.a.createElement(v.a,{categoryTitle:Object(o.a)("Custom UI Modifications"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:U,lineNumber:399}},this.renderCustomStylingOptions()))}}W(K,"contextType",R.a);var z=Object(_.a)(K,H),Y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\updates\\Autoupdate.jsx";function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Q extends s.a.Component{constructor(...e){super(...e),$(this,"state",{updateNotifierEnabled:!1,autoInstallUpdate:!0}),$(this,"refreshUpdateNotifierEnabled",()=>{D.a.autoUpdate.isUpdateNotifierEnabled(e=>{this.setState({updateNotifierEnabled:e})})}),$(this,"refreshAutoInstallUpdates",()=>{D.a.autoUpdate.getAutoInstallUpdates(e=>{this.setState({autoInstallUpdate:e})})}),$(this,"componentDidMount",()=>{this.refreshUpdateNotifierEnabled()}),$(this,"toggleUpdateNotifier",e=>{e.target.checked?D.a.autoUpdate.enableUpdateNotifier():D.a.autoUpdate.disableUpdateNotifier(),this.refreshUpdateNotifierEnabled()}),$(this,"toggleAutoInstallUpdate",e=>{const t=e.target.checked;D.a.autoUpdate.setAutoInstallUpdates(t),this.refreshAutoInstallUpdates()})}render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Updates"),filter:this.props.filter,__source:{fileName:Y,lineNumber:64}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Y,lineNumber:65}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Y,lineNumber:67}},s.a.createElement("label",{__source:{fileName:Y,lineNumber:68}},s.a.createElement("input",{type:"checkbox",checked:this.state.updateNotifierEnabled,onChange:this.toggleUpdateNotifier,__source:{fileName:Y,lineNumber:69}}),s.a.createElement("span",{__source:{fileName:Y,lineNumber:72}},Object(o.a)("Notify About Updates")))),!1))}}var Z=Q,q="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\biscuit\\BiscuitMode.jsx";const X=[l.kBiscuitLoadBookmarks,l.kBiscuitVersion],J=n.a.getEventHandler;class ee extends s.a.Component{render(){return"🐶"!==this.props.filter?null:s.a.createElement("span",{__source:{fileName:q,lineNumber:30}},s.a.createElement("h2",{__source:{fileName:q,lineNumber:31}},"Biscuit Area 🐶"),s.a.createElement("div",{className:"setting-group",__source:{fileName:q,lineNumber:32}},s.a.createElement("h3",{__source:{fileName:q,lineNumber:33}},"Biscuit Mode"),s.a.createElement("div",{className:"setting-single",__source:{fileName:q,lineNumber:34}},s.a.createElement("label",{__source:{fileName:q,lineNumber:35}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBiscuitVersion],onChange:J(l.kBiscuitVersion),__source:{fileName:q,lineNumber:36}}),s.a.createElement("span",{__source:{fileName:q,lineNumber:39}},"Show Browser Version on Status Bar"))),s.a.createElement("div",{className:"setting-single",__source:{fileName:q,lineNumber:42}},s.a.createElement("label",{__source:{fileName:q,lineNumber:43}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBiscuitLoadBookmarks],onChange:J(l.kBiscuitLoadBookmarks),__source:{fileName:q,lineNumber:44}}),s.a.createElement("span",{__source:{fileName:q,lineNumber:47}},"Upgrade Bookmarks Every Startup")))))}}var te=Object(_.a)(ee,X),ae=a(37),ie=a(354),se="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkBar.jsx";const ne=[l.kBookmarksBarDisplay,l.kBookmarksBarPosition,l.kBookmarksBarVisible],re=n.a.getEventHandler;class oe extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{ae.a.setBookmarkBarFolder(e.target.value)},(a="onFolderChange")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Bookmark Bar"),filter:this.props.filter,__source:{fileName:se,lineNumber:35}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:se,lineNumber:36}},s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:37}},s.a.createElement("label",{__source:{fileName:se,lineNumber:38}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksBarVisible],onChange:re(l.kBookmarksBarVisible),__source:{fileName:se,lineNumber:39}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:42}},Object(o.a)("Show Bookmark Bar"))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:se,lineNumber:47}},s.a.createElement("h3",{__source:{fileName:se,lineNumber:48}},Object(o.a)("Select Bookmark Bar Folder")),s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:49}},s.a.createElement(ie.a,{onChange:this.onFolderChange,__source:{fileName:se,lineNumber:50}}))),s.a.createElement("div",{className:"setting-group",__source:{fileName:se,lineNumber:55}},s.a.createElement("h3",{__source:{fileName:se,lineNumber:56}},Object(o.a)("Bookmark Bar Position")),s.a.createElement(m.a,{name:"bookmark-position",value:this.props.prefValues[l.kBookmarksBarPosition],onChange:re(l.kBookmarksBarPosition),__source:{fileName:se,lineNumber:57}},s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:60}},s.a.createElement("label",{__source:{fileName:se,lineNumber:61}},s.a.createElement("input",{type:"radio",value:"top",__source:{fileName:se,lineNumber:62}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:63}},Object(o.a)("Top")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:66}},s.a.createElement("label",{__source:{fileName:se,lineNumber:67}},s.a.createElement("input",{type:"radio",value:"bottom",__source:{fileName:se,lineNumber:68}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:69}},Object(o.a)("Bottom")))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:se,lineNumber:75}},s.a.createElement("h3",{__source:{fileName:se,lineNumber:76}},Object(o.a)("Bookmark Bar Display")),s.a.createElement(m.a,{name:"bookmark_bar_display",value:this.props.prefValues[l.kBookmarksBarDisplay],onChange:re(l.kBookmarksBarDisplay),__source:{fileName:se,lineNumber:78}},s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:81}},s.a.createElement("label",{__source:{fileName:se,lineNumber:82}},s.a.createElement("input",{type:"radio",value:"default",__source:{fileName:se,lineNumber:83}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:84}},Object(o.a)("Text and Icon")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:87}},s.a.createElement("label",{__source:{fileName:se,lineNumber:88}},s.a.createElement("input",{type:"radio",value:"text",__source:{fileName:se,lineNumber:89}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:90}},Object(o.a)("Text Only")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:93}},s.a.createElement("label",{__source:{fileName:se,lineNumber:94}},s.a.createElement("input",{type:"radio",value:"icon",__source:{fileName:se,lineNumber:95}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:96}},Object(o.a)("Icon Only")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:se,lineNumber:99}},s.a.createElement("label",{__source:{fileName:se,lineNumber:100}},s.a.createElement("input",{type:"radio",value:"iconexceptfolders",__source:{fileName:se,lineNumber:101}}),s.a.createElement("span",{__source:{fileName:se,lineNumber:102}},Object(o.a)("Bookmark Icon Only")))))))}}var le=Object(_.a)(oe,ne),ce="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\bookmarks\\BookmarkSettings.jsx";function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ue=[l.kBookmarksConfirmOpening,l.kBookmarksConfirmOpeningThreshold,l.kBookmarksOpenInNewTab,l.kBookmarksSingleClickOpens,l.kBookmarksUnderlineMenuLetter],he=n.a.getEventHandler;class me extends i.Component{constructor(...e){super(...e),de(this,"minThreshold",1),de(this,"maxThreshold",99)}render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Bookmarks"),filter:this.props.filter,__source:{fileName:ce,lineNumber:35}},i.createElement("div",{className:"setting-group unlimited",__source:{fileName:ce,lineNumber:36}},i.createElement("div",{className:"setting-single",__source:{fileName:ce,lineNumber:37}},i.createElement("label",{__source:{fileName:ce,lineNumber:38}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksOpenInNewTab],onChange:he(l.kBookmarksOpenInNewTab),__source:{fileName:ce,lineNumber:39}}),i.createElement("span",{__source:{fileName:ce,lineNumber:44}},Object(o.a)("Open Bookmarks in New Tab")))),i.createElement("div",{className:"setting-single",__source:{fileName:ce,lineNumber:47}},i.createElement("label",{__source:{fileName:ce,lineNumber:48}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksSingleClickOpens],onChange:he(l.kBookmarksSingleClickOpens),__source:{fileName:ce,lineNumber:49}}),i.createElement("span",{__source:{fileName:ce,lineNumber:52}},Object(o.a)("Open Bookmark Panel Items with Single Click")))),i.createElement("div",{className:"setting-single",__source:{fileName:ce,lineNumber:56}},i.createElement("label",{__source:{fileName:ce,lineNumber:57}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksUnderlineMenuLetter],onChange:he(l.kBookmarksUnderlineMenuLetter),__source:{fileName:ce,lineNumber:58}}),i.createElement("span",{__source:{fileName:ce,lineNumber:62}},Object(o.a)("Use '&' in Title to Underline Next Letter in Menus")))),i.createElement("div",{className:"setting-single max-bookmarks",__source:{fileName:ce,lineNumber:66}},i.createElement("label",{__source:{fileName:ce,lineNumber:67}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kBookmarksConfirmOpening],onChange:he(l.kBookmarksConfirmOpening),__source:{fileName:ce,lineNumber:68}}),i.createElement("span",{__source:{fileName:ce,lineNumber:73}},Object(o.a)("Confirm Opening Bookmarks over Maximum of")),i.createElement("input",{type:"number",size:"2",disabled:!this.props.prefValues[l.kBookmarksConfirmOpening],value:this.props.prefValues[l.kBookmarksConfirmOpeningThreshold],onChange:he(l.kBookmarksConfirmOpeningThreshold),min:this.minThreshold,max:this.maxThreshold,__source:{fileName:ce,lineNumber:74}})))))}}var pe=Object(_.a)(me,ue),ge=(a(51),a(15)),be=a.n(ge),fe=a(480),_e="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Capture.jsx";function Ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ve=[l.kWebpagesCaptureDirectory,l.kWebpagesCaptureSaveFilePattern],Ee=n.a.getEventHandler,we=new Date,Se="139cea89-3ed1-4ccd-bd3c-7a6a36f824d5",Ce=[{tag:"$timestamp",title:Object(o.a)("Long date"),format:"YYYY-MM-DD HH.mm.ss"},{tag:"$year",title:Object(o.a)("Year"),format:"YYYY"},{tag:"$month",title:Object(o.a)("Month"),format:"MM"},{tag:"$day",title:Object(o.a)("Day"),format:"DD"},{tag:"$hour",title:Object(o.a)("Hour"),format:"HH"},{tag:"$minute",title:Object(o.a)("Minute"),format:"mm"},{tag:"$second",title:Object(o.a)("time","Second"),format:"ss"},{tag:"$ms",title:Object(o.a)("Millisecond"),format:"SSS"},{tag:"$longid",title:Object(o.a)("Unique ID"),value:Se},{tag:"$shortid",title:Object(o.a)("Short unique ID"),value:Se.substring(24)},{tag:"$host",title:Object(o.a)("Active tab host name"),value:"example.com"},{tag:"$title",title:Object(o.a)("Active tab title"),value:Object(o.a)("Example Page Title")}];class ke extends i.Component{constructor(...e){super(...e),Ne(this,"handleDragEnter",e=>{const{dataTransfer:t,target:a}=e;a&&t.types.includes("text/plain")&&(a.setSelectionRange(a.value.length,a.value.length),a.focus())}),Ne(this,"setDragData",e=>{const{dataTransfer:t,target:a}=e;t.setData("text/plain",a.innerText),t.dropEffect="none",t.effectAllowed="copyMove",t.setDragImage(a,0,0)}),Ne(this,"handleDoubleClick",e=>{const{HTMLInputElement:t}=this.context,{target:a}=e;let i=a.innerText;if(this._inputRef instanceof t){const e=this._inputRef.selectionStart,t=this._inputRef.value||"";i=" "+i+" ";let a=e>0?t.substr(0,e)+i+t.substr(e):t+i;a=a.replace(/ {2}/g," ").trim(),n.a.set(l.kWebpagesCaptureSaveFilePattern,a),this._inputRef&&this._inputRef.focus()}}),Ne(this,"resetSetting",()=>{n.a.reset(l.kWebpagesCaptureSaveFilePattern)}),Ne(this,"parseFileName",()=>{let e=this.props.prefValues[l.kWebpagesCaptureSaveFilePattern];return Ce.forEach(t=>{const a=new RegExp(Object(fe.a)(t.tag),"gi"),i=t.format?be()(we).format(t.format):t.value;e=e.replace(a,i)}),(e||Se)+".png"}),Ne(this,"selectCaptureFolder",()=>{D.a.utilities.selectFile(Object(o.a)("Select Capture Folder"),"folder",e=>{!F.default.runtime.lastError&&e&&n.a.set(l.kWebpagesCaptureDirectory,e)})}),Ne(this,"renderTags",()=>Ce.map((e,t)=>i.createElement("span",{draggable:"true",key:t,onDoubleClick:this.handleDoubleClick,onDragStart:this.setDragData,title:e.title+(e.format?" ("+e.format+")":""),__source:{fileName:_e,lineNumber:122}},e.tag)))}render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Image Capture"),filter:this.props.filter,__source:{fileName:_e,lineNumber:136}},i.createElement("div",{className:"setting-group",__source:{fileName:_e,lineNumber:139}},i.createElement("div",{className:"setting-single",__source:{fileName:_e,lineNumber:140}},i.createElement("h3",{__source:{fileName:_e,lineNumber:141}},Object(o.a)("Capture Storage Folder")),i.createElement("div",{className:"setting-single folder-selection",__source:{fileName:_e,lineNumber:142}},i.createElement("input",{type:"text",value:this.props.prefValues[l.kWebpagesCaptureDirectory],title:Object(o.a)("Enter capture storage folder"),spellCheck:"false",onChange:Ee(l.kWebpagesCaptureDirectory),__source:{fileName:_e,lineNumber:143}}),i.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectCaptureFolder,__source:{fileName:_e,lineNumber:148}})))),i.createElement("div",{className:"setting-group",__source:{fileName:_e,lineNumber:154}},i.createElement("div",{className:"setting-single capture-name-template",__source:{fileName:_e,lineNumber:155}},i.createElement("h3",{__source:{fileName:_e,lineNumber:156}},Object(o.a)("Capture File Name Template")),i.createElement("input",{type:"text",ref:e=>this._inputRef=e,onDragEnter:this.handleDragEnter,value:this.props.prefValues[l.kWebpagesCaptureSaveFilePattern],title:Object(o.a)("Modify file name template"),spellCheck:"false",onChange:Ee(l.kWebpagesCaptureSaveFilePattern),__source:{fileName:_e,lineNumber:157}}),i.createElement("p",{className:"info",__source:{fileName:_e,lineNumber:164}},this.parseFileName()),i.createElement("p",{className:"info",__source:{fileName:_e,lineNumber:167}},this.renderTags()),i.createElement("input",{type:"button",value:Object(o.a)("Restore Default"),onClick:this.resetSetting,__source:{fileName:_e,lineNumber:170}}))))}}Ne(ke,"contextType",R.a);var ye=Object(_.a)(ke,ve),Oe=a(88),Ae=a(62),Te=a(185),Ie=a(63),De=a(285),Pe=a(60),xe=a(6);const Me="https://downloads.vivaldi.com/",Le={[Me+"ddg/tds-v2-current.json"]:"DuckDuckGo Tracker Radar",[Me+"easylist/easyprivacy-current.txt"]:"EasyPrivacy",[Me+"easylist/easylist-current.txt"]:"EasyList","https://easylist-downloads.adblockplus.org/Liste_AR.txt":Object(o.a)("Arabic ($1)",["Liste AR"]),"http://stanev.org/abp/adblock_bg.txt":Object(o.a)("Bulgarian ($1)",["Bulgarian List"]),"https://easylist-downloads.adblockplus.org/easylistchina.txt":Object(o.a)("Chinese ($1)",["EasyList China"]),"https://raw.githubusercontent.com/cjx82630/cjxlist/master/cjx-annoyance.txt":Object(o.a)("Chinese ($1)",["CJX’s Annoyance List"]),"https://raw.githubusercontent.com/yecarrillo/adblock-colombia/master/adblock_co.txt":Object(o.a)("Colombian ($1)",["Colombian List by Yecarrillo"]),"http://adblock.dajbych.net/adblock.txt":Object(o.a)("Czech ($1)",["Czech List"]),"https://raw.githubusercontent.com/tomasko126/easylistczechandslovak/master/filters.txt":Object(o.a)("Czech and Slovak ($1)",["Czech and Slovak filter list"]),"https://easylist-downloads.adblockplus.org/easylistdutch.txt":Object(o.a)("Dutch ($1)",["EasyList Dutch"]),"https://pgl.yoyo.org/adservers/serverlist.php?hostformat=adblockplus&mimetype=plaintext":Object(o.a)("English ($1)",["Peter Lowe’s List"]),"https://www.squidblacklist.org/downloads/sbl-adblock.acl":Object(o.a)("English ($1)",["Squidblacklist.org Ad Servers"]),"https://adblock.ee/list.php":Object(o.a)("Estonian ($1)",["Eesti saitidele kohandatud filter"]),"https://gurud.ee/ab.txt":Object(o.a)("Estonian ($1)",["Filters by Gurud.ee"]),"https://cdn.rawgit.com/SlashArash/adblockfa/master/adblockfa.txt":Object(o.a)("Farsi ($1)",["AdBlock Farsi"]),"https://raw.githubusercontent.com/finnish-easylist-addition/finnish-easylist-addition/master/Finland_adb.txt":Object(o.a)("Finnish ($1)",["EasyList Finland"]),"https://easylist-downloads.adblockplus.org/liste_fr.txt":Object(o.a)("French ($1)",["Liste FR"]),"https://easylist.to/easylistgermany/easylistgermany.txt":Object(o.a)("German ($1)",["EasyList Germany"]),"https://www.void.gr/kargig/void-gr-filters.txt":Object(o.a)("Greek ($1)",["void.gr"]),"https://raw.githubusercontent.com/easylist/EasyListHebrew/master/EasyListHebrew.txt":Object(o.a)("Hebrew ($1)",["EasyList Hebrew"]),"https://raw.githubusercontent.com/hufilter/hufilter/master/hufilter.txt":Object(o.a)("Hungarian ($1)",["hufilter"]),"https://adblock.gardar.net/is.abp.txt":Object(o.a)("Icelandic ($1)",["Icelandic ABP List"]),"https://easylist-downloads.adblockplus.org/indianlist.txt":Object(o.a)("Indian ($1)",["Indian List"]),"https://raw.githubusercontent.com/heradhis/indonesianadblockrules/master/subscriptions/abpindo.txt":Object(o.a)("Indonesian ($1)",["ABPindo"]),"https://raw.githubusercontent.com/gioxx/xfiles/master/filtri.txt":Object(o.a)("Italian ($1)",["X Files"]),"https://easylist-downloads.adblockplus.org/easylistitaly.txt":Object(o.a)("Italian ($1)",["EasyList Italy"]),"https://280blocker.net/files/280blocker_adblock.txt":Object(o.a)("Japanese ($1)",["280blocker for japanese mobile site"]),"https://raw.githubusercontent.com/k2jp/abp-japanese-filters/master/abpjf.txt":Object(o.a)("Japanese ($1)",["ABP Japanese filters"]),"https://easylist-downloads.adblockplus.org/koreanlist.txt":Object(o.a)("Korean ($1)",["Korean List"]),"https://raw.githubusercontent.com/yous/YousList/master/youslist.txt":Object(o.a)("Korean ($1)",["YousList"]),"https://notabug.org/latvian-list/adblock-latvian/raw/master/lists/latvian-list.txt":Object(o.a)("Latvian ($1)",["Latvian List"]),"http://margevicius.lt/easylistlithuania.txt":Object(o.a)("Lithuanian ($1)",["EasyList Lithuania"]),"https://raw.githubusercontent.com/DandelionSprout/adfilt/master/NorwegianExperimentalList%20alternate%20versions/NordicFiltersABP.txt":Object(o.a)("Nordic ($1)",["Dandelion Sprout’s Nordic Filters"]),"https://easylist-downloads.adblockplus.org/easylistpolish.txt":Object(o.a)("Polish ($1)",["EasyList Polish"]),"https://easylist-downloads.adblockplus.org/easylistportuguese.txt":Object(o.a)("Portuguese ($1)",["EasyList Portuguese"]),"https://www.zoso.ro/pages/rolist.txt":Object(o.a)("Romanian ($1)",["ROLIST"]),"https://easylist-downloads.adblockplus.org/advblock.txt":Object(o.a)("Russian ($1)",["RU AdList"]),"https://easylist-downloads.adblockplus.org/easylistspanish.txt":Object(o.a)("Spanish ($1)",["EasyList Spanish"]),"http://abp.mozilla-hispano.org/nauscopio/filtros.txt":Object(o.a)("Spanish ($1)",["Filtros Nauscopicos"]),"https://raw.githubusercontent.com/abpvn/abpvn/master/filter/abpvn.txt":Object(o.a)("Vietnamese ($1)",["ABPVN List"])};function je(e){return Le[e]||e}var Be=a(13),Re=a(145),Fe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerSources.jsx";function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const We={success:Object(o.a)("Fetched successfully"),download_failed:Object(o.a)("Failed to download"),file_not_found:Object(o.a)("File cannot be located"),file_read_error:Object(o.a)("File cannot be read"),file_unsupported:Object(o.a)("Invalid format"),failed_saving_parsed_rules:Object(o.a)("Cannot save to the profile"),unknown:Object(o.a)("Fetch not completed")};class He extends i.PureComponent{constructor(...e){super(...e),Ue(this,"fileInput",i.createRef()),Ue(this,"state",{blockerSources:[],sortedList:[],cachedSource:void 0,newSource:"",showEditor:0,importError:""}),Ue(this,"updateSources",()=>{D.a.contentBlocking.getRuleSources(this.props.ruleGroup,e=>{this.setState({blockerSources:e,sortedList:this.remapSources(e)})}),this.state.cachedSource&&D.a.contentBlocking.getRuleSource(this.props.ruleGroup,this.state.cachedSource.id,e=>{"success"===e.last_fetch_result?this.setState({cachedSource:e,showEditor:3,importError:""}):this.setState({showEditor:1,importError:We[e.last_fetch_result]})})}),Ue(this,"remapSources",e=>{if(e){return e.map((e,t)=>{const a=e.unsafe_adblock_metadata,i=e.is_from_url?e.source_url:e.source_file,s=a.title&&je(i)===i?a.title:je(i);return{key:e.id.toString(),name:s,isDefault:e.source_url.startsWith(Me),enabled:e.loaded,id:e.id}}).sort((e,t)=>e.name<t.name?-1:1).sort((e,t)=>e.isDefault&&!t.isDefault?-1:1)}return[]}),Ue(this,"updateNewSource",e=>{const{value:t}=e.currentTarget;this.setState({newSource:t})}),Ue(this,"onImportFromFile",e=>{D.a.utilities.selectFile([{ext:"txt"}],Object(o.a)("Select a Blocker List Text File"),"file",e=>{!F.default.runtime.lastError&&e?this.importFromFile(e):this.closeDialog()})}),Ue(this,"importFromFile",e=>{D.a.contentBlocking.addKnownSourceFromFile(this.props.ruleGroup,e,e=>this.finishImport(e))}),Ue(this,"importFromUrl",()=>{this.state.newSource.includes(Me)?this.setState({importError:Object(o.a)("Failed to add internal list")}):D.a.contentBlocking.addKnownSourceFromURL(this.props.ruleGroup,this.state.newSource,e=>this.finishImport(e))}),Ue(this,"finishImport",e=>{F.default.runtime.lastError?(console.warn(Object.values(F.default.runtime.lastError)),this.setState({cachedSource:void 0,importError:Object(o.a)("Failed to add list")})):D.a.contentBlocking.getRuleSource(this.props.ruleGroup,e,e=>{this.setState({cachedSource:e,showEditor:2,importError:""})})}),Ue(this,"onToggleStatus",e=>{this.state.sortedList[e]&&this.toggleStatus(this.state.sortedList[e].id)}),Ue(this,"toggleStatus",e=>{const t=this.state.blockerSources.find(t=>t.id===e);t&&(t.loaded?D.a.contentBlocking.disableSource(this.props.ruleGroup,e):D.a.contentBlocking.enableSource(this.props.ruleGroup,e))}),Ue(this,"copySource",e=>{const t=this.state.blockerSources.find(t=>e===t.id);if(t){const e=t.is_from_url?t.source_url:t.source_file;Te.a.set(e)}}),Ue(this,"onRemoveSource",e=>{this.state.sortedList[e]&&this.removeSource(this.state.sortedList[e].id)}),Ue(this,"removeSource",e=>{D.a.contentBlocking.deleteKnownSource(this.props.ruleGroup,e)}),Ue(this,"restoreSources",()=>{D.a.contentBlocking.resetPresetSources(this.props.ruleGroup),this.updateSources()}),Ue(this,"onContextMenu",(e,t)=>{const a=this.state.sortedList[e];if(!a)return;const i=[{handler:this.copySource.bind(null,a.id),...Object(xe.a)("Copy List Origin")},{handler:this.toggleStatus.bind(null,a.id),visible:!a.enabled,...Object(xe.a)("Enable List")},{handler:this.toggleStatus.bind(null,a.id),visible:a.enabled,...Object(xe.a)("Disable List")},{name:"---",visible:!a.isDefault||"ad_blocking"===this.props.ruleGroup},{handler:this.removeSource.bind(null,a.id),visible:!a.isDefault,...Object(xe.a)("Remove List")},{handler:this.restoreSources,visible:"ad_blocking"===this.props.ruleGroup,...Object(xe.a)("Restore Built-In Lists")}];Object(Pe.a)(this.context.vivaldiWindowId,i)(t)}),Ue(this,"showDialog",()=>{this.setState({showEditor:1})}),Ue(this,"onCancel",()=>{this.state.cachedSource&&this.removeSource(this.state.cachedSource.id),this.closeDialog()}),Ue(this,"closeDialog",()=>{this.setState({cachedSource:void 0,newSource:"",importError:"",showEditor:0})}),Ue(this,"renderDialog",()=>{const{cachedSource:e,showEditor:t}=this.state,a=e?e.unsafe_adblock_metadata:void 0;return i.createElement(Ie.a,{dialogWidth:500,onRequestClose:this.state.showEditor<2?this.onCancel:Re.default,__source:{fileName:Fe,lineNumber:297}},i.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:Fe,lineNumber:300}},i.createElement("header",{className:"dialog-header",__source:{fileName:Fe,lineNumber:301}},i.createElement("h1",{className:"dialog-title",__source:{fileName:Fe,lineNumber:302}},Object(o.a)("Import New Blocker List"))),1===t&&i.createElement("div",{className:"dialog-content",__source:{fileName:Fe,lineNumber:308}},i.createElement("p",{className:"info",__source:{fileName:Fe,lineNumber:309}},Object(o.a)("Enter URL to import blocker rules")),i.createElement("div",{className:"dialog-row",__source:{fileName:Fe,lineNumber:312}},i.createElement("input",{type:"text",value:this.state.newSource,onChange:this.updateNewSource,autoFocus:!0,__source:{fileName:Fe,lineNumber:313}}),i.createElement("label",{__source:{fileName:Fe,lineNumber:319}},i.createElement("button",{type:"button",title:Object(o.a)("Import from a file..."),dangerouslySetInnerHTML:{__html:Be.Q.medium},onClick:this.onImportFromFile,__source:{fileName:Fe,lineNumber:320}})))),e&&2===t&&i.createElement("div",{className:"dialog-content",__source:{fileName:Fe,lineNumber:332}},i.createElement("h3",{__source:{fileName:Fe,lineNumber:333}},Object(o.a)("Loading..."))),e&&3===t&&i.createElement("div",{className:"dialog-content",__source:{fileName:Fe,lineNumber:338}},i.createElement("h3",{__source:{fileName:Fe,lineNumber:339}},a?a.title:e.source_url),a&&i.createElement("p",{className:"info",__source:{fileName:Fe,lineNumber:341}},e.source_url),i.createElement("p",{__source:{fileName:Fe,lineNumber:343}},Object(o.a)("Valid rules: $1",[e.rules_info.valid_rules]),i.createElement("br",{__source:{fileName:Fe,lineNumber:344}}),Object(o.a)("Invalid rules: $1",[e.rules_info.invalid_rules]),i.createElement("br",{__source:{fileName:Fe,lineNumber:345}}),Object(o.a)("Unsupported rules: $1",[e.rules_info.unsupported_rules]))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:Fe,lineNumber:351}},this.state.importError&&i.createElement("p",{className:"info",__source:{fileName:Fe,lineNumber:353}},this.state.importError),(1===t||2===t)&&i.createElement("input",{type:"submit",className:"primary",onClick:this.importFromUrl,value:Object(o.a)("Import..."),__source:{fileName:Fe,lineNumber:356}}),3===t&&i.createElement("input",{type:"submit",className:"primary",onClick:this.closeDialog,value:Object(o.a)("Done"),autoFocus:!0,__source:{fileName:Fe,lineNumber:364}}),i.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:Fe,lineNumber:372}}))))}),Ue(this,"renderItem",e=>{const t=this.state.blockerSources.find(t=>e.id===t.id);return t?i.createElement("div",{className:"ContentBlocker-SourceItem",__source:{fileName:Fe,lineNumber:384}},i.createElement("input",{type:"checkbox",onMouseDown:e=>e.stopPropagation(),checked:e.enabled,onChange:this.toggleStatus.bind(null,t.id),__source:{fileName:Fe,lineNumber:385}}),i.createElement("span",{className:"title",__source:{fileName:Fe,lineNumber:391}},e.name),i.createElement("p",{className:"info",__source:{fileName:Fe,lineNumber:394}},""!==t.rules_list_checksum?Object(o.a)("Updated on $1",[be()(t.last_update).format("lll")]):t.loaded?Object(o.a)("Not fetched"):Object(o.a)("Disabled"),t.is_fetching?" "+Object(o.a)("(Fetching...)"):"")):null})}componentDidMount(){this.updateSources(),D.a.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),D.a.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),D.a.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources)}componentWillUnmount(){D.a.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),D.a.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),D.a.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources)}render(){const{sortedList:e}=this.state,t=Math.min(44*e.length+22,200);return i.createElement(r.a,{filter:this.props.filter,__source:{fileName:Fe,lineNumber:409}},0!==this.state.showEditor&&this.renderDialog(),i.createElement("h3",{__source:{fileName:Fe,lineNumber:411}},this.props.title),i.createElement("div",{className:"ContentBlocker-Sources master-detail sortable-list",style:{minHeight:t},__source:{fileName:Fe,lineNumber:412}},i.createElement(De.a,{items:e,renderListItem:this.renderItem,filter:this.props.filter,onActivate:this.onToggleStatus,onContextMenu:this.onContextMenu,onCreateItem:this.showDialog,onRemove:this.onRemoveSource,addTipString:Object(o.a)("Add List"),deleteTipString:Object(o.a)("Remove List"),supportDragAndDrop:!1,__source:{fileName:Fe,lineNumber:415}})))}}Ue(He,"contextType",R.a);var Ve=He,Ge=a(17),Ke=a.n(Ge),ze=a(267),Ye="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\ContentBlockerRules.jsx";function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qe extends i.PureComponent{constructor(...e){super(...e),$e(this,"state",{exceptionRules:void 0,exceptionList:[],trackerBlockingEnabled:!1,adBlockingEnabled:!1,blockerSources:[],newException:{name:"",level:"2"},addExceptionDialog:!1,showSources:!1}),$e(this,"getRules",()=>["ad_blocking","tracking"].forEach(e=>{this.getRule(e)})),$e(this,"getRule",e=>D.a.contentBlocking.getActiveExceptionsList(e,t=>{const a="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";this.setState({[a]:"exempt_list"===t},()=>this.updateExceptions())})),$e(this,"updateExceptions",()=>D.a.contentBlocking.getAllExceptionLists(e=>{const t=Object.values(e).reduce((e,t)=>e=e.concat(t.exempt_list).concat(t.process_list),[]),a=this.remapExceptions(Object(ze.a)(t).sort());this.setState({exceptionRules:e,exceptionList:a})})),$e(this,"setDefaultBlocking",e=>{const{value:t}=e.target;switch(t){case"0":D.a.contentBlocking.setActiveExceptionsList("tracking","process_list"),D.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"1":D.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),D.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list");break;case"2":D.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),D.a.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list")}this.getRules()}),$e(this,"deleteException",e=>{if("number"==typeof e&&this.state.exceptionList){const t=this.state.exceptionList[e].key;["tracking","ad_blocking"].forEach(e=>["process_list","exempt_list"].forEach(a=>D.a.contentBlocking.removeExceptionForDomain(e,a,t))),this.updateExceptions()}}),$e(this,"deleteAllExceptions",()=>{["tracking","ad_blocking"].forEach(e=>["process_list","exempt_list"].forEach(t=>D.a.contentBlocking.removeAllExceptions(e,t))),this.updateExceptions()}),$e(this,"addException",(e,t,a)=>{D.a.contentBlocking.addExceptionForDomain(t,a,e),this.updateExceptions()}),$e(this,"removeException",(e,t,a)=>{D.a.contentBlocking.removeExceptionForDomain(t,a,e),this.updateExceptions()}),$e(this,"remapExceptions",e=>e?e.map(e=>({key:e,name:e})):[]),$e(this,"onContextMenu",(e,t)=>{const a=[{handler:this.deleteException.bind(null,e),...Object(xe.a)("Remove Site")},{handler:this.deleteAllExceptions,...Object(xe.a)("Remove All Sites from List")}];Object(Pe.a)(this.context.vivaldiWindowId,a)(t)}),$e(this,"updateNewException",e=>{const t=e.currentTarget;"name"===t.name?this.setState(e=>({newException:{...e.newException,name:t.value}})):this.setState(e=>({newException:{...e.newException,level:t.value}}))}),$e(this,"onAddNewException",()=>this.setState({addExceptionDialog:!0})),$e(this,"onClose",()=>this.setState(e=>({newException:{...e.newException,name:""},addExceptionDialog:!1}))),$e(this,"toggleSources",()=>this.setState(e=>({showSources:!e.showSources}))),$e(this,"saveException",()=>{const{newException:e}=this.state;e.name&&this.setPageBlocking(e.name,e.level),this.onClose()}),$e(this,"getPageBlockingLevel",e=>{const{exceptionRules:t}=this.state;if(!t)return;let a=0;return!t.tracking.process_list.includes(e)&&t.tracking.exempt_list.includes(e)||a++,!t.ad_blocking.process_list.includes(e)&&t.ad_blocking.exempt_list.includes(e)||a++,a}),$e(this,"changePageBlocking",e=>{const{name:t,value:a}=e.target;this.setPageBlocking(t,a)}),$e(this,"setPageBlocking",(e,t)=>{const a={tracking:{process:!1,exempt:!1},ad_blocking:{process:!1,exempt:!1}};switch(t){case"0":a.tracking.exempt=!0,a.ad_blocking.exempt=!0;break;case"1":a.ad_blocking.exempt=!0,a.tracking.process=!0;break;case"2":a.tracking.process=!0,a.ad_blocking.process=!0}Object.keys(a).forEach(t=>{a[t].process?this.addException(e,t,"process_list"):this.removeException(e,t,"process_list"),a[t].exempt?this.addException(e,t,"exempt_list"):this.removeException(e,t,"exempt_list")})}),$e(this,"renderModal",()=>i.createElement(Ie.a,{dialogWidth:500,onRequestClose:this.onClose,__source:{fileName:Ye,lineNumber:292}},i.createElement("form",{className:"ContentBlocker-Exception",__source:{fileName:Ye,lineNumber:293}},i.createElement("header",{className:"dialog-header",__source:{fileName:Ye,lineNumber:294}},i.createElement("h1",{className:"dialog-title",__source:{fileName:Ye,lineNumber:295}},Object(o.a)("Add a New Site to Exception List"))),i.createElement("div",{className:"dialog-content",__source:{fileName:Ye,lineNumber:299}},i.createElement("input",{type:"text",name:"name",placeholder:Object(o.a)("e.g. example.com"),value:this.state.newException.name,onChange:this.updateNewException,autoFocus:!0,__source:{fileName:Ye,lineNumber:300}}),i.createElement("select",{value:this.state.newException.level,onChange:this.updateNewException,name:"level",__source:{fileName:Ye,lineNumber:308}},i.createElement("option",{value:"0",__source:{fileName:Ye,lineNumber:312}},Object(o.a)("No Blocking")),i.createElement("option",{value:"1",__source:{fileName:Ye,lineNumber:313}},Object(o.a)("Block Trackers")),i.createElement("option",{value:"2",__source:{fileName:Ye,lineNumber:314}},Object(o.a)("Block Trackers and Ads")))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:Ye,lineNumber:317}},i.createElement("input",{type:"submit",className:"primary",onClick:this.saveException,value:Object(o.a)("other","Add Site"),__source:{fileName:Ye,lineNumber:318}}),i.createElement("input",{type:"button",onClick:this.onClose,value:Object(o.a)("Cancel"),__source:{fileName:Ye,lineNumber:324}}))))),$e(this,"renderItem",e=>{if(!e)return null;const t=this.getPageBlockingLevel(e.key);return i.createElement(i.Fragment,null,i.createElement("span",{__source:{fileName:Ye,lineNumber:337}},e.name),i.createElement("select",{value:t,name:e.name,onMouseDown:e=>e.stopPropagation(),onChange:this.changePageBlocking,__source:{fileName:Ye,lineNumber:338}},i.createElement("option",{value:"0",__source:{fileName:Ye,lineNumber:343}},Object(o.a)("No Blocking")),i.createElement("option",{value:"1",__source:{fileName:Ye,lineNumber:344}},Object(o.a)("Block Trackers")),i.createElement("option",{value:"2",__source:{fileName:Ye,lineNumber:345}},Object(o.a)("Block Trackers and Ads"))))})}componentDidMount(){this.getRules(),this.updateExceptions(),D.a.contentBlocking.onExceptionsChanged.addListener(this.updateExceptions),D.a.contentBlocking.onStateChanged.addListener(this.getRules)}componentWillUnmount(){D.a.contentBlocking.onExceptionsChanged.removeListener(this.updateExceptions),D.a.contentBlocking.onStateChanged.removeListener(this.getRules)}render(){const e=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0);return i.createElement(v.a,{categoryTitle:Object(o.a)("Tracker and Ad Blocking"),"data-anchor":"tracker_and_ad_blocking",filter:this.props.filter,__source:{fileName:Ye,lineNumber:357}},this.state.addExceptionDialog&&this.renderModal(),i.createElement("div",{className:"ContentBlocker",__source:{fileName:Ye,lineNumber:364}},i.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ye,lineNumber:366}},i.createElement("h3",{__source:{fileName:Ye,lineNumber:367}},Object(o.a)("Blocking Level")),i.createElement("p",{className:"info",__source:{fileName:Ye,lineNumber:368}},Object(o.a)("Select default level of protection.")),i.createElement("label",{className:Ke()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":0===e}),__source:{fileName:Ye,lineNumber:372}},i.createElement("button",{value:"0",title:Object(o.a)("No content blocking will be applied to any site by default."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",dangerouslySetInnerHTML:{__html:Be.r},__source:{fileName:Ye,lineNumber:377}}),i.createElement("span",{className:"keep-ea-words",__source:{fileName:Ye,lineNumber:384}},Object(o.a)("No Blocking"))),i.createElement("label",{className:Ke()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":1===e}),__source:{fileName:Ye,lineNumber:388}},i.createElement("button",{value:"1",title:Object(o.a)("Online trackers collect personal information and browsing habits across multiple sites."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:Be.r},__source:{fileName:Ye,lineNumber:393}}),i.createElement("span",{className:"keep-ea-words",__source:{fileName:Ye,lineNumber:401}},Object(o.a)("Block Trackers"))),i.createElement("label",{className:Ke()({"ContentBlocker-Setting":!0,"ContentBlocker-Setting--Active":2===e}),__source:{fileName:Ye,lineNumber:405}},i.createElement("button",{value:"2",title:Object(o.a)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),onClick:this.setDefaultBlocking,className:"ContentBlocker-Control",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:Be.r},__source:{fileName:Ye,lineNumber:410}}),i.createElement("span",{className:"keep-ea-words",__source:{fileName:Ye,lineNumber:418}},Object(o.a)("Block Trackers and Ads")))),i.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ye,lineNumber:423}},i.createElement("h3",{__source:{fileName:Ye,lineNumber:424}},Object(o.a)("Exceptions")),i.createElement("p",{className:"info",__source:{fileName:Ye,lineNumber:425}},Object(o.a)("Manage blocking level per site")),this.state.exceptionList&&i.createElement("div",{className:"ContentBlocker-Exceptions master-detail sortable-list",__source:{fileName:Ye,lineNumber:427}},i.createElement(De.a,{items:this.state.exceptionList,renderListItem:this.renderItem,filter:this.props.filter,onContextMenu:this.onContextMenu,onCreateItem:this.onAddNewException,onRemove:this.deleteException,addTipString:Object(o.a)("Add Site Exception"),deleteTipString:Object(o.a)("Remove Site Exception"),supportDragAndDrop:!1,__source:{fileName:Ye,lineNumber:428}})),i.createElement("input",{type:"button",value:this.state.showSources?Object(o.a)("Hide Sources"):Object(o.a)("Manage Sources"),onClick:this.toggleSources,__source:{fileName:Ye,lineNumber:441}})),this.state.showSources&&i.createElement(i.Fragment,null,i.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ye,lineNumber:452}},i.createElement("div",{className:"setting-single",__source:{fileName:Ye,lineNumber:453}},i.createElement(Ve,{filter:this.props.filter,ruleGroup:"tracking",title:Object(o.a)("Tracker Blocking Sources"),__source:{fileName:Ye,lineNumber:454}}))),i.createElement("div",{className:"setting-group setting-group-double",__source:{fileName:Ye,lineNumber:462}},i.createElement("div",{className:"setting-single",__source:{fileName:Ye,lineNumber:463}},i.createElement(Ve,{filter:this.props.filter,ruleGroup:"ad_blocking",title:Object(o.a)("Ad Blocking Sources"),__source:{fileName:Ye,lineNumber:464}}))))))}}$e(Qe,"contextType",R.a);var Ze=Qe,qe=a(120),Xe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieItem.jsx";function Je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class et extends i.Component{constructor(...e){super(...e),Je(this,"state",{viewInfo:null,viewCookies:!1}),Je(this,"deleteCookie",e=>{this.state.viewInfo?(this.removeChromeEntry(this.state.viewInfo),this.setState({viewCookies:Boolean(this.props.count>1),viewInfo:null})):(this.props.items.map(e=>this.removeChromeEntry(e)),this.setState({viewCookies:!1,viewInfo:null})),e.stopPropagation()}),Je(this,"removeChromeEntry",e=>{const t={url:"http"+(e.secure?"s":"")+"://"+e.domain+e.path,name:e.name};F.default.cookies.remove(t,e=>{this.props.onCookieDelete(e)})}),Je(this,"showDetail",()=>{this.setState(e=>({viewCookies:!e.viewCookies,viewInfo:!0===e.viewCookies?null:e.viewInfo}))}),Je(this,"showInfo",e=>{this.setState({viewInfo:e})}),Je(this,"renderCookies",()=>this.props.items.map((e,t)=>i.createElement("a",{tabIndex:"0",key:"cookie-"+e.name.toLowerCase(),onFocus:this.showInfo.bind(this,e),__source:{fileName:Xe,lineNumber:82}},e.name))),Je(this,"renderInfo",()=>i.createElement("dl",{__source:{fileName:Xe,lineNumber:92}},i.createElement("dt",{__source:{fileName:Xe,lineNumber:93}},Object(o.a)("Expires:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:94}},this.state.viewInfo&&be()(this.state.viewInfo.expirationDate).format("l LT")),i.createElement("dt",{__source:{fileName:Xe,lineNumber:98}},Object(o.a)("Path:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:99}},this.state.viewInfo&&this.state.viewInfo.path),i.createElement("dt",{__source:{fileName:Xe,lineNumber:100}},Object(o.a)("Host Only:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:101}},this.state.viewInfo&&this.state.viewInfo.hostOnly.toString()),i.createElement("dt",{__source:{fileName:Xe,lineNumber:102}},Object(o.a)("HTTP Only:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:103}},this.state.viewInfo&&this.state.viewInfo.httpOnly.toString()),i.createElement("dt",{__source:{fileName:Xe,lineNumber:104}},Object(o.a)("Session:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:105}},this.state.viewInfo&&this.state.viewInfo.session.toString()),i.createElement("dt",{__source:{fileName:Xe,lineNumber:106}},Object(o.a)("Secure:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:107}},this.state.viewInfo&&this.state.viewInfo.secure.toString()),i.createElement("dt",{__source:{fileName:Xe,lineNumber:108}},Object(o.a)("Value:")),i.createElement("dd",{__source:{fileName:Xe,lineNumber:109}},this.state.viewInfo&&this.state.viewInfo.value)))}render(){const{domain:e}=this.props,t=e.replace("/^./g","");return i.createElement("li",{__source:{fileName:Xe,lineNumber:119}},i.createElement("div",{className:"overview",onClick:this.showDetail,__source:{fileName:Xe,lineNumber:120}},i.createElement(qe.a,{className:"site-icon",url:t,__source:{fileName:Xe,lineNumber:121}}),e,!this.state.viewCookies&&i.createElement("span",{className:"count",__source:{fileName:Xe,lineNumber:124}},this.props.count),i.createElement("span",{className:"controls",__source:{fileName:Xe,lineNumber:126}},i.createElement("input",{type:"button",className:"circular clearkey",title:this.state.viewInfo?Object(o.a)("Delete selected cookie"):Object(o.a)("Delete cookies"),onClick:this.deleteCookie,__source:{fileName:Xe,lineNumber:127}}))),this.state.viewCookies&&i.createElement("div",{className:"detail",__source:{fileName:Xe,lineNumber:135}},this.renderCookies(),this.state.viewInfo&&i.createElement("div",{className:"info",__source:{fileName:Xe,lineNumber:138}},this.renderInfo())))}}var tt=et,at="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieManager.jsx";function it(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class st extends i.PureComponent{constructor(...e){super(...e),it(this,"state",{cookieData:{},cookieFilter:"",confirmation:!1,showCookies:!1}),it(this,"getAllCookies",()=>{F.default.cookies.getAll({},e=>{this.setState({cookieData:e.reduce((e,t)=>{var a=e[t.domain]||[];return a.push(t),e[t.domain]=a,e},{})})})}),it(this,"deleteFilteredCookies",()=>{F.default.cookies.getAll({},e=>{for(var t=0;t<e.length;t++)-1!==e[t].domain.indexOf(this.state.cookieFilter)&&F.default.cookies.remove({url:this.getCookieUrl(e[t]),name:e[t].name});this.getAllCookies()})}),it(this,"deleteAllCookies",()=>{var e=0;F.default.cookies.getAll({},a=>{e=a.length;for(var i=0;i<a.length;i++)F.default.cookies.remove({url:this.getCookieUrl(a[i]),name:a[i].name},t)});var t=t=>{0===--e&&this.setState({cookieData:{},confirmation:!1,showCookies:!1})}}),it(this,"getCookieUrl",e=>"http"+(e.secure?"s":"")+"://"+e.domain+e.path),it(this,"deleteCookie",()=>{this.getAllCookies()}),it(this,"onSettingsFilter",e=>{this.setState({cookieFilter:e.target.value})}),it(this,"onAskToDelete",()=>{this.setState({confirmation:!0})}),it(this,"onCancel",()=>{this.setState({confirmation:!1})}),it(this,"renderModal",()=>i.createElement(Ie.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:at,lineNumber:113}},i.createElement("div",{className:"dialog-delete-cookies",__source:{fileName:at,lineNumber:116}},i.createElement("header",{className:"dialog-header",__source:{fileName:at,lineNumber:117}},i.createElement("h1",{className:"dialog-title",__source:{fileName:at,lineNumber:118}},Object(o.a)("Delete All Cookies?"))),i.createElement("div",{className:"dialog-content",__source:{fileName:at,lineNumber:122}},i.createElement("p",{__source:{fileName:at,lineNumber:123}},Object(o.a)("All cookies will be removed."))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:at,lineNumber:127}},i.createElement("input",{type:"button",className:"primary",onClick:this.deleteAllCookies,value:Object(o.a)("other","Delete"),autoFocus:!0,__source:{fileName:at,lineNumber:128}}),i.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:at,lineNumber:133}}))))),it(this,"showCookieList",()=>{this.setState(e=>({showCookies:!e.showCookies}))})}componentDidMount(){this.getAllCookies()}render(){if(!this.state.cookieData)return i.createElement("div",{className:"saved-passwords",__source:{fileName:at,lineNumber:153}},i.createElement("p",{__source:{fileName:at,lineNumber:154}},Object(o.a)("No cookies found.")));const{cookieData:e,cookieFilter:t}=this.state,a=t.toLowerCase(),s=Object.keys(e).length,n=Object.keys(e).reduce((t,a)=>t+e[a].length,0);return i.createElement(r.a,{filter:this.props.filter,__source:{fileName:at,lineNumber:166}},i.createElement("div",{className:"setting-group setting-cookies unlimited",__source:{fileName:at,lineNumber:167}},this.state.confirmation&&this.renderModal(),i.createElement("h3",{__source:{fileName:at,lineNumber:169}},Object(o.a)("Saved Cookies")),i.createElement("p",{__source:{fileName:at,lineNumber:171}},Object(o.a)("Vivaldi currently stores $1 from $2.",[Object(o.a)("$1 cookie entry","$1 cookie entries",[n]),Object(o.a)("$1 domain","$1 domains",[s])])),this.state.showCookies&&i.createElement("div",{__source:{fileName:at,lineNumber:182}},i.createElement("div",{className:"setting-single",__source:{fileName:at,lineNumber:183}},i.createElement("input",{type:"search",placeholder:Object(o.a)("Filter by domain"),value:t,onChange:this.onSettingsFilter,__source:{fileName:at,lineNumber:184}})),i.createElement("div",{className:"setting-single",__source:{fileName:at,lineNumber:190}},i.createElement("ul",{__source:{fileName:at,lineNumber:191}},Object.keys(e).filter(e=>e.includes(a)).map(t=>i.createElement(tt,{key:"domain-"+t,domain:t,count:e[t].length,items:e[t],onCookieDelete:this.deleteCookie,__source:{fileName:at,lineNumber:195}})),0===Object.keys(e).filter(e=>e.includes(a)).length&&t&&i.createElement("li",{style:{margin:"6px"},__source:{fileName:at,lineNumber:205}},Object(o.a)("Query “$1” matches no result.",[t]))))),i.createElement("div",{className:"setting-single",__source:{fileName:at,lineNumber:214}},i.createElement("input",{type:"button",value:this.state.showCookies?Object(o.a)("Hide Saved Cookies"):Object(o.a)("Display Saved Cookies"),disabled:0===n,onClick:this.showCookieList,__source:{fileName:at,lineNumber:215}}),i.createElement("input",{type:"button",className:"danger",onClick:this.onAskToDelete,disabled:0===n,value:Object(o.a)("Delete All Cookies"),__source:{fileName:at,lineNumber:221}}),t&&i.createElement("input",{type:"button",onClick:this.deleteFilteredCookies,value:Object(o.a)("Delete Filtered Cookies"),__source:{fileName:at,lineNumber:228}}))))}}var nt=st,rt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\CookieSettings.jsx";function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lt extends i.Component{constructor(...e){super(...e),ot(this,"state",{cookieSetting:"",blockThirdParty:null}),ot(this,"checkChange",e=>{const t=e.target.checked;D.a.utilities.setBlockThirdPartyCookies(t,e=>{}),this.setState({blockThirdParty:t})}),ot(this,"handleChange",e=>{const t=e.target.value;this.setState({cookieSetting:t}),D.a.utilities.setDefaultContentSettings("cookies",t,Re.default)})}UNSAFE_componentWillMount(){D.a.utilities.getDefaultContentSettings("cookies",e=>{this.setState({cookieSetting:e})}),D.a.utilities.getBlockThirdPartyCookies(e=>{this.setState({blockThirdParty:e})})}render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Cookies"),filter:this.props.filter,__source:{fileName:rt,lineNumber:54}},i.createElement("div",{className:"setting-group",__source:{fileName:rt,lineNumber:55}},i.createElement("h3",{__source:{fileName:rt,lineNumber:56}},Object(o.a)("Accept Cookies")),i.createElement(m.a,{className:"cookieSelection",name:"cookieSelGroup",value:this.state.cookieSetting,onChange:this.handleChange,__source:{fileName:rt,lineNumber:58}},i.createElement("div",{className:"setting-single",__source:{fileName:rt,lineNumber:62}},i.createElement("label",{__source:{fileName:rt,lineNumber:63}},i.createElement("input",{type:"radio",value:"allow",__source:{fileName:rt,lineNumber:64}}),i.createElement("span",{__source:{fileName:rt,lineNumber:65}},Object(o.a)("radio","All")))),i.createElement("div",{className:"setting-single",__source:{fileName:rt,lineNumber:68}},i.createElement("label",{__source:{fileName:rt,lineNumber:69}},i.createElement("input",{type:"radio",value:"session_only",__source:{fileName:rt,lineNumber:70}}),i.createElement("span",{__source:{fileName:rt,lineNumber:71}},Object(o.a)("title","Session Only")))),i.createElement("div",{className:"setting-single",__source:{fileName:rt,lineNumber:74}},i.createElement("label",{__source:{fileName:rt,lineNumber:75}},i.createElement("input",{type:"radio",value:"block",__source:{fileName:rt,lineNumber:76}}),i.createElement("span",{__source:{fileName:rt,lineNumber:77}},Object(o.a)("other","Never")))))),i.createElement("div",{className:"setting-group",__source:{fileName:rt,lineNumber:83}},i.createElement("h3",{__source:{fileName:rt,lineNumber:84}},Object(o.a)("Third-Party Cookies")),i.createElement("div",{className:"setting-single",__source:{fileName:rt,lineNumber:86}},i.createElement("label",{__source:{fileName:rt,lineNumber:87}},null!==this.state.blockThirdParty&&i.createElement("input",{type:"checkbox",checked:this.state.blockThirdParty,onChange:this.checkChange,__source:{fileName:rt,lineNumber:89}}),i.createElement("span",{__source:{fileName:rt,lineNumber:93}},Object(o.a)("Block Third-Party Cookies"))))),i.createElement(nt,{filter:this.props.filter,__source:{fileName:rt,lineNumber:97}}))}}var ct=lt,dt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\downloads\\Downloads.jsx";const ut=[l.kDownloadDefaultDirectory,l.kDownloadsNotifyOnComplete,l.kDownloadsOpenPanelOnNew,l.kDownloadsStartAutomatically,l.kDownloadsUpdateDefaultDownloadWhenSavingAs],ht=n.a.getEventHandler;class mt extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=()=>{D.a.utilities.selectFile(Object(o.a)("Select Download Folder"),"folder",e=>{!F.default.runtime.lastError&&e&&n.a.set(l.kDownloadDefaultDirectory,e)})},(a="selectDownloadFolder")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Downloads"),filter:this.props.filter,className:"setting-group unlimited",__source:{fileName:dt,lineNumber:43}},s.a.createElement("div",{className:"setting-subgroup",__source:{fileName:dt,lineNumber:46}},s.a.createElement("h3",{__source:{fileName:dt,lineNumber:47}},Object(o.a)("Download Location")),s.a.createElement("div",{className:"setting-single",__source:{fileName:dt,lineNumber:48}},s.a.createElement("div",{className:"setting-single folder-selection",__source:{fileName:dt,lineNumber:49}},s.a.createElement("input",{type:"text",value:this.props.prefValues[l.kDownloadDefaultDirectory],title:Object(o.a)("Enter Default Download Directory Path"),onChange:ht(l.kDownloadDefaultDirectory),__source:{fileName:dt,lineNumber:50}}),s.a.createElement("input",{type:"button",value:Object(o.a)("Select Folder..."),onClick:this.selectDownloadFolder,__source:{fileName:dt,lineNumber:54}}))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:dt,lineNumber:59}},s.a.createElement("label",{__source:{fileName:dt,lineNumber:60}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsStartAutomatically],onChange:ht(l.kDownloadsStartAutomatically),__source:{fileName:dt,lineNumber:61}}),s.a.createElement("span",{__source:{fileName:dt,lineNumber:64}},Object(o.a)("Save Files to Default Location Without Asking")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:dt,lineNumber:67}},s.a.createElement("label",{__source:{fileName:dt,lineNumber:68}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsUpdateDefaultDownloadWhenSavingAs],onChange:ht(l.kDownloadsUpdateDefaultDownloadWhenSavingAs),__source:{fileName:dt,lineNumber:69}}),s.a.createElement("span",{__source:{fileName:dt,lineNumber:72}},Object(o.a)("Update Default Location When Choosing Save as Location")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:dt,lineNumber:75}},s.a.createElement("label",{__source:{fileName:dt,lineNumber:76}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsOpenPanelOnNew],onChange:ht(l.kDownloadsOpenPanelOnNew),__source:{fileName:dt,lineNumber:77}}),s.a.createElement("span",{__source:{fileName:dt,lineNumber:80}},Object(o.a)("Open Download Panel Automatically")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:dt,lineNumber:83}},s.a.createElement("label",{__source:{fileName:dt,lineNumber:84}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kDownloadsNotifyOnComplete],onChange:ht(l.kDownloadsNotifyOnComplete),__source:{fileName:dt,lineNumber:85}}),s.a.createElement("span",{__source:{fileName:dt,lineNumber:88}},Object(o.a)("Notify on Completed Downloads"))))))}}var pt=Object(_.a)(mt,ut),gt=a(190),bt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fonts.jsx";function ft(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _t={standard:{localizedFamily:Object(o.a)("Standard")},sansserif:{localizedFamily:Object(o.a)("Sans-serif")},serif:{localizedFamily:Object(o.a)("Serif")},fixed:{localizedFamily:Object(o.a)("Monospaced")},cursive:{localizedFamily:Object(o.a)("Cursive")},fantasy:{localizedFamily:Object(o.a)("Fantasy")}},Nt=[l.kWebKitMinimumFontSize];class vt extends i.Component{constructor(...e){super(...e),ft(this,"state",{fontList:[],fonts:{}}),ft(this,"_getFonts",e=>{this.setState(t=>({fonts:{...t.fonts,[e.genericFamily]:{font:e.fontId,localizedFamily:_t[e.genericFamily].localizedFamily}}}))}),ft(this,"mapObject",(e,t)=>Object.keys(e).map(a=>t(a,e[a]))),ft(this,"handleFontSizeSetting",e=>{e.target.checked?n.a.set(l.kWebKitMinimumFontSize,9):n.a.reset(l.kWebKitMinimumFontSize)}),ft(this,"handleFontSizeChanged",e=>{const t=parseInt(e.target.value);"number"==typeof t&&t>=2&&t<=99&&n.a.set(l.kWebKitMinimumFontSize,t)}),ft(this,"changeHandler",(e,t)=>{let a=l.kWebKitStandardFontFamily;switch(e){case"standard":a=l.kWebKitStandardFontFamily;break;case"fantasy":a=l.kWebKitFantasyFontFamily;break;case"fixed":a=l.kWebKitFixedFontFamily;break;case"sansserif":a=l.kWebKitSansSerifFontFamily;break;case"serif":a=l.kWebKitSerifFontFamily;break;case"cursive":a=l.kWebKitCursiveFontFamily}n.a.set(a,t.target.value)}),ft(this,"renderOptions",()=>{const e=parseInt(this.props.prefValues[l.kWebKitMinimumFontSize]);let t=[9,10,11,12,14,16,18,24];return-1===t.indexOf(e)&&(t.push(e),t=t.sort((e,t)=>e-t)),t.map(e=>i.createElement("option",{key:e,__source:{fileName:bt,lineNumber:177}},e))})}componentDidMount(){F.default.fontSettings.onFontChanged.addListener(this._getFonts),F.default.fontSettings.getFontList(e=>{this.setState({fontList:e})}),this.mapObject(_t,(e,t)=>{F.default.fontSettings.getFont({genericFamily:e},a=>{this.setState(i=>({fonts:{...i.fonts,[e]:{font:a.fontId,localizedFamily:t.localizedFamily}}}))})})}componentWillUnmount(){F.default.fontSettings.onFontChanged.removeListener(this._getFonts)}render(){const e=this.props.prefValues[l.kWebKitMinimumFontSize],t=this.state.fontList.map(e=>i.createElement("option",{key:e.fontId,value:e.fontId,__source:{fileName:bt,lineNumber:183}},e.displayName));return i.createElement(v.a,{categoryTitle:Object(o.a)("Fonts"),filter:this.props.filter,className:"setting-group unlimited font-slider",__source:{fileName:bt,lineNumber:187}},i.createElement("div",{className:"setting-group-double",__source:{fileName:bt,lineNumber:188}},i.createElement("label",{__source:{fileName:bt,lineNumber:189}},i.createElement("input",{type:"checkbox",onChange:this.handleFontSizeSetting,checked:0!==e,__source:{fileName:bt,lineNumber:190}}),i.createElement("span",{__source:{fileName:bt,lineNumber:194}},Object(o.a)("Minimum Font Size in Pixels")),i.createElement("span",{className:"fake-dataset",__source:{fileName:bt,lineNumber:195}},i.createElement("input",{type:"text",value:0===e?9:e,onChange:this.handleFontSizeChanged,disabled:0===e,__source:{fileName:bt,lineNumber:196}}),i.createElement("select",{value:e,onChange:this.handleFontSizeChanged,disabled:0===e,__source:{fileName:bt,lineNumber:201}},this.renderOptions())))),i.createElement("div",{className:"setting-group-double pad-top font-face-list",__source:{fileName:bt,lineNumber:210}},i.createElement("h3",{__source:{fileName:bt,lineNumber:211}},Object(o.a)("Default Fonts")),this.mapObject(this.state.fonts,(e,a)=>i.createElement("label",{key:e,className:"setting-single",__source:{fileName:bt,lineNumber:214}},i.createElement("span",{__source:{fileName:bt,lineNumber:215}},a.localizedFamily),i.createElement("select",{onChange:this.changeHandler.bind(this,e),value:a.font,__source:{fileName:bt,lineNumber:216}},t)))))}}var Et=Object(_.a)(vt,Nt),wt=a(317),St=a(10),Ct="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\HueIntegration.jsx";function kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const yt=[l.kHueBridgeIp,l.kHueEnabled,l.kHueLights,l.kHueUsername];class Ot extends s.a.Component{constructor(...e){super(...e),kt(this,"initialState",()=>({groups:[],lights:[],validBridge:!1,validUsername:!1,waitingForButtonPress:!1,givenUp:!1,manualIp:""})),kt(this,"_isMounted",!1),kt(this,"state",this.initialState()),kt(this,"verifyBridge",()=>{const e=St.a.get(l.kHueBridgeIp);e?fetch(`http://${e}/description.xml`).then(e=>{e.ok?this.setState({validBridge:!0},this.verifyUsername):this.getBridge()}).catch(e=>{this.getBridge()}):this.getBridge()}),kt(this,"getBridge",()=>{fetch("https://discovery.meethue.com/").then(e=>{e.ok?e.json().then(e=>{e&&e[0]&&e[0].internalipaddress?(n.a.set(l.kHueBridgeIp,e[0].internalipaddress),this.verifyBridge()):this.setState({givenUp:!0})}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})})}),kt(this,"setBridge",()=>{n.a.set(l.kHueBridgeIp,this.state.manualIp),this.verifyBridge()}),kt(this,"verifyUsername",()=>{const e=St.a.get(l.kHueBridgeIp),t=St.a.get(l.kHueUsername);t?fetch(`http://${e}/api/${t}/`).then(e=>{e.ok?e.json().then(e=>{if(e[0]&&e[0].error)n.a.set(l.kHueUsername,""),this.getUsername();else if(e&&e.config){const t=[];Object.keys(e.lights).map(e=>parseInt(e)).filter(e=>!isNaN(e)).forEach(a=>{const i=e.lights[a];t[a]=i});const a=Object.keys(e.groups).map(t=>e.groups[t]).filter(e=>{if("Room"===e.type&&e.lights.length>0){if(e.lights.map(e=>{const a=parseInt(e);return t[a]}).filter(e=>e).length>0)return e}});this.setState({groups:a,lights:t,validUsername:!0,waitingForButtonPress:!1})}}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})}):this.getUsername()}),kt(this,"getUsername",()=>{const e=St.a.get(l.kHueBridgeIp);e&&fetch(`http://${e}/api`,{method:"POST",body:JSON.stringify({devicetype:"vivaldi_browser#desktop_hue"})}).then(e=>{e.ok?e.json().then(e=>{e[0]&&e[0].success&&e[0].success.username?(n.a.set(l.kHueUsername,e[0].success.username),this.verifyUsername()):e&&e[0]&&e[0].error&&101===e[0].error.type&&(this.setState({waitingForButtonPress:!0}),setTimeout(()=>{this._isMounted&&this.getUsername()},1e3))}):this.setState({givenUp:!0})}).catch(e=>{this.setState({givenUp:!0})})}),kt(this,"toggleLight",(e,t)=>{const a=St.a.get(l.kHueBridgeIp),i=St.a.get(l.kHueUsername),s=!St.a.get(l.kHueLights).includes(t),r=St.a.get(l.kHueLights).filter(e=>e!==t);s&&r.push(t),fetch(`http://${a}/api/${i}/lights/${e}/state`,{method:"put",body:JSON.stringify({alert:"select"})}),n.a.set(l.kHueLights,r)}),kt(this,"resetBridge",()=>{n.a.reset(l.kHueBridgeIp),n.a.reset(l.kHueUsername),this.setState(this.initialState())}),kt(this,"changeManualIp",e=>{this.setState({manualIp:e.currentTarget.value})})}componentDidMount(){this._isMounted=!0,this.props.prefValues[l.kHueEnabled]&&this.props.prefValues[l.kHueBridgeIp]&&this.verifyBridge()}componentWillUnmount(){this._isMounted=!1}render(){const e=this.props.prefValues[l.kHueEnabled],t=this.props.prefValues[l.kHueLights],{waitingForButtonPress:a,validBridge:i,validUsername:r,groups:c,lights:d}=this.state;return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Philips Hue Theme Integration"),filter:this.props.filter,__source:{fileName:Ct,lineNumber:289}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ct,lineNumber:294}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Ct,lineNumber:295}},s.a.createElement("label",{__source:{fileName:Ct,lineNumber:296}},s.a.createElement("input",{type:"checkbox",checked:e,onChange:n.a.getEventHandler(l.kHueEnabled),__source:{fileName:Ct,lineNumber:297}}),s.a.createElement("span",{__source:{fileName:Ct,lineNumber:301}},Object(o.a)("Enable Hue"))),e&&i&&!a?s.a.createElement("p",{className:"info",__source:{fileName:Ct,lineNumber:304}},Object(o.a)("Connected to Hue Bridge at $1.",[this.props.prefValues[l.kHueBridgeIp]])):s.a.createElement("p",{className:"info",__source:{fileName:Ct,lineNumber:309}},Object(o.a)("Requires a Philips Hue lighting system on the local network.")))),e&&i&&s.a.createElement("div",{className:"setting-group",__source:{fileName:Ct,lineNumber:317}},s.a.createElement("input",{type:"button",className:"danger",value:Object(o.a)("Reset Bridge Connection"),onClick:this.resetBridge,__source:{fileName:Ct,lineNumber:318}})),e&&(!i||a)&&s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ct,lineNumber:326}},s.a.createElement("h3",{__source:{fileName:Ct,lineNumber:327}},Object(o.a)("Bridge Discovery")),!a&&s.a.createElement("div",{className:"setting-group",__source:{fileName:Ct,lineNumber:329}},s.a.createElement(wt.a,{type:"text",onChange:this.changeManualIp,label:Object(o.a)("Bridge IP (Leave blank to autodiscover)"),placeholder:"127.0.0.1",value:this.state.manualIp,__source:{fileName:Ct,lineNumber:330}}),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ct,lineNumber:337}},s.a.createElement("input",{type:"button",className:"primary",value:this.state.manualIp?Object(o.a)("Connect"):Object(o.a)("Find Bridge"),onClick:this.state.manualIp?this.setBridge:this.getBridge,__source:{fileName:Ct,lineNumber:338}}))),a&&s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ct,lineNumber:352}},s.a.createElement("p",{className:"info",__source:{fileName:Ct,lineNumber:353}},Object(o.a)("Found Bridge at $1. Waiting for button press...",[this.props.prefValues[l.kHueBridgeIp]])),s.a.createElement("div",{className:"hue-press-button",dangerouslySetInnerHTML:{__html:`${Be.e}${Object(o.a)("Press the button on your Bridge")}`},__source:{fileName:Ct,lineNumber:358}}))),e&&r&&c.length>0&&d.length>0&&s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Ct,lineNumber:368}},c.map((e,a)=>s.a.createElement("div",{className:"setting-group",key:a,__source:{fileName:Ct,lineNumber:371}},s.a.createElement("h3",{__source:{fileName:Ct,lineNumber:372}},e.name),e.lights.map(e=>{const a=parseInt(e),i=d[a];if(!i)return null;const n=i.state.reachable?"":` (${Object(o.a)("Unreachable")})`,r=t&&t.some(e=>e===i.uniqueid),l=i.type.toLowerCase().includes("color light");return s.a.createElement("div",{className:"setting-single",key:i.uniqueid,__source:{fileName:Ct,lineNumber:389}},s.a.createElement("label",{__source:{fileName:Ct,lineNumber:390}},s.a.createElement("input",{type:"checkbox",checked:r,disabled:!l,onChange:this.toggleLight.bind(this,a,i.uniqueid),__source:{fileName:Ct,lineNumber:391}}),s.a.createElement("span",{__source:{fileName:Ct,lineNumber:397}},`${i.name}${n}`)))})))))}}var At=Object(_.a)(Ot,yt),Tt=a(557),It="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\AcceptLanguage.jsx";function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Pt extends s.a.PureComponent{constructor(...e){super(...e),Dt(this,"state",{language:F.default.i18n.getUILanguage(),acceptLangs:[],acceptLangsList:[]}),Dt(this,"updateAcceptedList",()=>{F.default.i18n.getAcceptLanguages(e=>{F.default.runtime.lastError?(console.error(F.default.runtime.lastError.message),this.setState({acceptLangs:[]})):this.setState({acceptLangs:e})})}),Dt(this,"onContextMenu",(e,t)=>{const a=[];e>=0&&e<this.state.acceptLangs.length&&(a.push({...Object(xe.a)("Move to Top"),handler:this.moveItemToTop.bind(this,e),visible:0!==e}),a.push({...Object(xe.a)("Move Up"),handler:this.moveItem.bind(this,e,e-1),visible:e>1}),a.push({...Object(xe.a)("Move Down"),handler:this.moveItem.bind(this,e,e+1),visible:e!==this.state.acceptLangs.length-1}),a.push({...Object(xe.a)("verb","Remove"),handler:this.removeItem.bind(this,e),visible:this.state.acceptLangs[e]!==this.state.language})),Object(Pe.a)(this.context.vivaldiWindowId,a)(t)}),Dt(this,"addItem",e=>{if(e&&e.target){const t=e.target.value;F.default.languageSettingsPrivate.enableLanguage(t),this.updateAcceptedList()}}),Dt(this,"moveItem",(e,t)=>{const a=t<e?"UP":"DOWN";F.default.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],a),this.updateAcceptedList()}),Dt(this,"moveItemToTop",e=>{F.default.languageSettingsPrivate.moveLanguage(this.state.acceptLangs[e],"TOP"),this.updateAcceptedList()}),Dt(this,"removeItem",e=>{F.default.languageSettingsPrivate.disableLanguage(this.state.acceptLangs[e]),this.updateAcceptedList()}),Dt(this,"remapLangs",()=>this.state.acceptLangs.map(e=>({key:e,name:e,isDefault:e===this.state.language}))),Dt(this,"renderItem",e=>s.a.createElement("span",{__source:{fileName:It,lineNumber:136}},e.name))}componentDidMount(){F.default.languageSettingsPrivate.getLanguageList(e=>{F.default.runtime.lastError?console.error(F.default.runtime.lastError.message):this.setState({acceptLangsList:e.sort((e,t)=>e.code.localeCompare(t.code)).map(e=>({key:e.code,value:e.nativeDisplayName}))})}),this.updateAcceptedList()}render(){const e=this.state.acceptLangsList.filter(e=>!this.state.acceptLangs.includes(e.key));return e.unshift({key:"",value:Object(o.a)("Select Language")}),s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:It,lineNumber:149}},s.a.createElement("div",{className:"setting-group accept-language-list",__source:{fileName:It,lineNumber:150}},s.a.createElement("div",{className:"setting-single",__source:{fileName:It,lineNumber:151}},s.a.createElement("h3",{__source:{fileName:It,lineNumber:152}},Object(o.a)("Accept Languages")),s.a.createElement("p",{className:"info",__source:{fileName:It,lineNumber:153}},Object(o.a)("Preferred languages, accepted by compatible websites in given order")),this.state.acceptLangsList.length>0?s.a.createElement("div",{className:"master-detail sortable-list",__source:{fileName:It,lineNumber:157}},s.a.createElement(De.a,{items:this.remapLangs(),filter:this.props.filter,onCreateItem:this.addItem,moveItem:this.moveItem,onRemove:this.removeItem,onContextMenu:this.onContextMenu,renderListItem:this.renderItem,optionsList:e,addTipString:Object(o.a)("Add Language"),deleteTipString:Object(o.a)("Remove Language"),supportDragAndDrop:!1,__source:{fileName:It,lineNumber:158}})):s.a.createElement("p",{__source:{fileName:It,lineNumber:173}},Object(o.a)("Language list retrieval for “$1” failed",[this.state.language])))))}}Dt(Pt,"contextType",R.a);var xt=a(132),Mt=a(31),Lt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\LanguageSetting.jsx";function jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Bt=[l.kCalendarDateFormat];class Rt extends s.a.Component{constructor(...e){super(...e),jt(this,"locales",Mt.i.sort((e,t)=>e.local.localeCompare(t.local))),jt(this,"state",{initialLanguage:"",language:"",confirmation:!1,localMoment:xt.a.getLocale()}),jt(this,"langChanged",e=>{const t=e.currentTarget.selectedOptions[0].dataset.lang;this.setState({language:t})}),jt(this,"saveLanguage",()=>{D.a.utilities.setLanguage(this.state.language,()=>{this.setState(e=>({initialLanguage:e.language,confirmation:!1}))})}),jt(this,"saveDateFormat",e=>{const t=e.target.value;n.a.set(l.kCalendarDateFormat,t)}),jt(this,"updateFormatPreview",()=>{D.a.utilities.getSystemDateFormat(e=>{this.setState({localMoment:xt.a.getLocale(e)})})}),jt(this,"confirmLanguageChange",()=>{this.setState({confirmation:!0})}),jt(this,"onCancel",()=>{this.setState(e=>({language:e.initialLanguage,confirmation:!1}))}),jt(this,"renderModal",()=>{const e=this.locales.find(e=>e.key===this.state.language);return e?s.a.createElement(Ie.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:Lt,lineNumber:111}},s.a.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:Lt,lineNumber:114}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:Lt,lineNumber:115}},s.a.createElement("h1",{className:"dialog-title",__source:{fileName:Lt,lineNumber:116}},Object(o.a)("Save New Language?"))),s.a.createElement("div",{className:"dialog-content",__source:{fileName:Lt,lineNumber:120}},s.a.createElement("p",{__source:{fileName:Lt,lineNumber:121}},Object(o.a)("Vivaldi user interface language will be set to:")),s.a.createElement("p",{__source:{fileName:Lt,lineNumber:122}},s.a.createElement("strong",{__source:{fileName:Lt,lineNumber:122}},e.local+(e.value!==e.local?" – "+e.value:""))),s.a.createElement("p",{__source:{fileName:Lt,lineNumber:126}},Object(o.a)("Browser restart is required for new setting to take effect."))),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Lt,lineNumber:128}},s.a.createElement("input",{type:"button",className:"danger",onClick:this.saveLanguage,value:Object(o.a)("Save Language"),__source:{fileName:Lt,lineNumber:129}}),s.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),autoFocus:!0,__source:{fileName:Lt,lineNumber:133}})))):null})}componentDidMount(){D.a.utilities.getLanguage(e=>{this.setState({language:e,initialLanguage:e})}),this.updateFormatPreview()}componentDidUpdate(e,t){this.props.prefValues[l.kCalendarDateFormat]!==e.prefValues[l.kCalendarDateFormat]&&this.updateFormatPreview()}render(){const e=new Date,{longDateFormat:t,week:a,weekdays:i}=this.state.localMoment;return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Language"),filter:this.props.filter,__source:{fileName:Lt,lineNumber:148}},this.state.confirmation&&this.renderModal(),s.a.createElement("p",{className:"info",__source:{fileName:Lt,lineNumber:153}},Object(o.a)("These settings require a restart to take full effect.")),s.a.createElement("form",{className:"setting-group",onSubmit:this.confirmLanguageChange,__source:{fileName:Lt,lineNumber:157}},s.a.createElement("h3",{__source:{fileName:Lt,lineNumber:158}},Object(o.a)("User Interface Language")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Lt,lineNumber:159}},s.a.createElement("select",{onChange:this.langChanged,value:this.state.language.toLowerCase(),__source:{fileName:Lt,lineNumber:160}},this.locales.map(e=>s.a.createElement("option",{key:e.key,value:e.key.toLowerCase(),"data-lang":e.key,__source:{fileName:Lt,lineNumber:165}},e.local+(e.value!==e.local?" – "+e.value:"")))),s.a.createElement("input",{type:"submit",className:"primary",disabled:this.state.language===this.state.initialLanguage,value:Object(o.a)("Save Language"),__source:{fileName:Lt,lineNumber:171}}))),s.a.createElement("div",{className:"setting-group",__source:{fileName:Lt,lineNumber:178}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Lt,lineNumber:179}},s.a.createElement("h3",{__source:{fileName:Lt,lineNumber:180}},Object(o.a)("Preferred Date & Time Format")),s.a.createElement("p",{className:"info",__source:{fileName:Lt,lineNumber:181}},Object(o.a)("Affects beginning day of week, time and date display format.")),s.a.createElement("select",{value:this.props.prefValues[l.kCalendarDateFormat],onChange:this.saveDateFormat,__source:{fileName:Lt,lineNumber:184}},s.a.createElement("option",{value:"system",__source:{fileName:Lt,lineNumber:187}},Object(o.a)("Inherit from Operating System")),s.a.createElement("option",{value:"language",__source:{fileName:Lt,lineNumber:188}},Object(o.a)("Same as Selected Language")))),s.a.createElement("dl",{className:"info",style:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"2px 8px",marginBottom:"12px"},__source:{fileName:Lt,lineNumber:192}},s.a.createElement("dt",{__source:{fileName:Lt,lineNumber:201}},Object(o.a)("Time Format")),s.a.createElement("dd",{__source:{fileName:Lt,lineNumber:202}},be()(e).format(t.LT)),s.a.createElement("dt",{__source:{fileName:Lt,lineNumber:203}},Object(o.a)("Short Date")),s.a.createElement("dd",{__source:{fileName:Lt,lineNumber:204}},be()(e).format(t.L)),s.a.createElement("dt",{__source:{fileName:Lt,lineNumber:205}},Object(o.a)("Long Date")),s.a.createElement("dd",{__source:{fileName:Lt,lineNumber:206}},be()(e).format(t.LLLL)),s.a.createElement("dt",{__source:{fileName:Lt,lineNumber:207}},Object(o.a)("Start of Week")),s.a.createElement("dd",{__source:{fileName:Lt,lineNumber:208}},i[a.dow]))),!1)}}var Ft=Object(_.a)(Rt,Bt),Ut=a(142),Wt=a(136),Ht=a(125);var Vt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\CommandList.jsx";function Gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Kt extends s.a.Component{constructor(e){super(e),Gt(this,"_searchKey",""),Gt(this,"_appendToSearch",!1),Gt(this,"_onCommandStoreChanged",e=>{if("menu"===e){const e=this.state.searchFilter;this.setState(this._getStateWithSearchFilter(e))}}),Gt(this,"_getStateWithSearchFilter",e=>{const t=e.toLowerCase(),a=Ae.default.getMenuCommands().filter(e=>-1!==(e.settingsName?e.settingsName:e.label).toLowerCase().indexOf(t)).map(e=>{switch(e.behavior){case"checkbox":return{id:e.name,action:e.name,type:"checkbox"};case"radio":return{id:e.name,action:e.name,type:"radio"};case"container":return{id:e.name,action:e.name,type:"container"};default:return{id:e.name,action:e.name,type:"command"}}});return a.splice(0,0,{id:"separator",action:"",type:"separator"}),{searchFilter:e,commandItems:Ae.default.makeMenuWithContent(a).sort((e,t)=>"container"===e.type&&"container"===t.type?e.name<t.name?-1:e.name>t.name?1:0:e.name<t.name||"separator"===e.id||"container"===e.type&&"separator"!==t.type?-1:e.name>t.name||"separator"===t.id||"container"===t.type?1:0)}}),Gt(this,"_hasChildren",e=>!1),Gt(this,"_isFolder",e=>!1),Gt(this,"_isSeparator",e=>"separator"===e.type),Gt(this,"_isValidDragSource",e=>!0),Gt(this,"_validateForDrag",e=>e),Gt(this,"_getDragData",(e,t)=>""),Gt(this,"_getMimeData",e=>{let t="";const a=[];return e.forEach(e=>{const i=this.state.commandItems.find(t=>t.id===e);i&&(t="folder"===i.type?""===t||"vivaldi/x-commandfolder"===t?"vivaldi/x-commandfolder":"vivaldi/x-commandmixed":""===t||"vivaldi/x-commanditem"===t?"vivaldi/x-commanditem":"vivaldi/x-commandmixed",a.push({id:"",type:i.type,action:i.id}))}),{mimeType:t,payload:JSON.stringify(a)}}),Gt(this,"_setDragData",(e,t)=>{const a=this._getMimeData(t);e.setData(a.mimeType,a.payload)}),Gt(this,"_onKeyDown",e=>{const t=(e,t)=>{for(let a=t;a<this.state.commandItems.length;a++){const t=this.state.commandItems[a];if(t.name&&t.name.toUpperCase().startsWith(e))return t}};switch(e.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:if(Object(Ht.c)(e)){const a=this.refs.treeList.getSelectedItem(),i=this._searchKey.length;let s;if("ArrowLeft"===e.key||"ArrowRight"===e.key){if(0===i)break;s=a?a.treeIndex+1:0}else if(this._appendToSearch&&!1===e.repeat){const t=e.key.toUpperCase();1===i&&this._searchKey[0]===t?s=a?a.treeIndex+1:0:(this._searchKey+=t,s=a?a.treeIndex:0)}else this._searchKey=e.key.toUpperCase(),s=a?a.treeIndex+1:0;let n=t(this._searchKey,s);n||0===s||(n=t(this._searchKey,0)),n&&(this.refs.treeList.selectById(n.id),e.preventDefault()),clearTimeout(this._timeout),this._appendToSearch=!0,this._timeout=setTimeout(()=>{this._appendToSearch=!1},400)}}}),Gt(this,"_onSearchFilterChange",e=>{this.setState(this._getStateWithSearchFilter(e.target.value))}),Gt(this,"_getContextMenuItems",e=>e?[{testVisibility:()=>this.props.canAddToTree(),handler:()=>{const t=this._getMimeData([e.id]);this.props.addToTree(t.mimeType,t.payload)},...Object(xe.a)("Add to Content")}]:[]),Gt(this,"_renderItem",e=>{const t=e.node;if(this._isSeparator(t))return s.a.createElement("label",{key:"0",__source:{fileName:Vt,lineNumber:254}},s.a.createElement("hr",{className:"separator-left",__source:{fileName:Vt,lineNumber:255}}),Object(o.a)("Menu Separator"),s.a.createElement("hr",{className:"separator-right",__source:{fileName:Vt,lineNumber:257}}));let a=t.name;return t.ellipsis&&(a+=Ut.a.ellipsisString()),"container"===t.type&&t.settingsName&&(a=t.settingsName),s.a.createElement("label",{key:"0",__source:{fileName:Vt,lineNumber:274}},s.a.createElement("span",{className:"title",__source:{fileName:Vt,lineNumber:275}},a))}),this.state=this._getStateWithSearchFilter("")}componentDidMount(){this.state.commandItems.length>0&&this.refs.treeList.selectById(this.state.commandItems[0].id),Ae.default.addChangeListener(this._onCommandStoreChanged)}componentWillUnmount(){clearTimeout(this._timeout),Ae.default.removeChangeListener(this._onCommandStoreChanged)}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Wt.a,{ref:"treeList",nodes:this.state.commandItems,enableDragAndDrop:!0,validateForDrag:this._validateForDrag,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,mimeType:"vivaldi/x-commanditem",hasChildren:this._hasChildren,isFolder:this._isFolder,getContextMenuItems:this._getContextMenuItems,onKeyDown:this._onKeyDown,renderItemContent:this._renderItem,__source:{fileName:Vt,lineNumber:283}}),s.a.createElement("div",{className:"setting-single",__source:{fileName:Vt,lineNumber:298}},s.a.createElement("input",{type:"search",className:"menu-search",value:this.state.searchFilter,placeholder:Object(o.a)("Filter Commands"),onChange:this._onSearchFilterChange,__source:{fileName:Vt,lineNumber:299}})))}}var zt=Kt,Yt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\MenuTree.jsx";function $t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qt extends s.a.Component{constructor(...e){super(...e),$t(this,"_isMounted",!1),$t(this,"_isMac",!1),$t(this,"getSelectedItem",()=>this.refs.treeList.getSelectedItem()),$t(this,"add",(e,t)=>{this._addAtPosition(e,t,this._isFolder(e)?"on":"below").then(e=>{if(e&&e.length>0){const t=e[0].id;this.refs.treeList.expandToId(t),this.refs.treeList.selectById(t)}})}),$t(this,"_onMenuChanged",(e,t,a,i)=>{e===this.props.menuName&&this._setMenu(e,t,a,this.state.role,i,!1)}),$t(this,"_loadMenu",()=>{D.a.menuContent.get(this.props.menuName,(e,t,a)=>{this._setMenu(this.props.menuName,e,"",t,a,!0)})}),$t(this,"_setMenu",(e,t,a,i,s,n)=>{const r=(e,t,a)=>{e.index=a,e.parentId=t,e.items&&(e.children=e.items,e.children.forEach((t,a)=>{r(t,e.id,a)}))},o=Ae.default.makeMenuWithContent(s);o.forEach((e,a)=>{r(e,t,a)}),this._isMounted&&this.setState({rootId:t,role:i,menuItems:o},()=>{if(!0===n&&this.state.menuItems.length>0)this.refs.treeList.selectById(this.state.menuItems[0].id);else{const e=this._getNodeById(a);e&&this.refs.treeList.selectById(e.id)}})}),$t(this,"_getNodeById",e=>{const t=a=>{if(a)for(let i=0;i<a.length;i++){const s=a[i];if(s.id===e)return s;if(s.children){const e=t(s.children);if(e)return e}}};return t(this.state.menuItems)}),$t(this,"_hasChildren",e=>Boolean(e.children)&&e.children.length>0),$t(this,"_isFolder",e=>Boolean(e.children)),$t(this,"_isContainer",e=>"container"===e.type),$t(this,"_isBookmarkContainer",e=>"CONTAINER_BOOKMARK"===e.container),$t(this,"_isSeparator",e=>"separator"===e.type),$t(this,"_isDefaultTopFolder",e=>!!this._isMac&&["MENU_APPLE_APP","MENU_FILE","MENU_EDIT","MENU_VIEW","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName)),$t(this,"_isPersistent",e=>!!this._isMac&&["MENU_APPLE_APP","MENU_BOOKMARKS","MENU_WINDOW","MENU_HELP"].includes(e.commandName)),$t(this,"_canDeleteNode",e=>!this._isMac||!this._isPersistent(e)&&!this._isBookmarkContainer(e)),$t(this,"_isValidDragSource",e=>!this._isMac||!["MENU_APPLE_APP"].includes(e.commandName)),$t(this,"_validateForDrag",e=>e.map(this._getNodeById).filter(Boolean).filter(this._isValidDragSource).map(e=>e.id)),$t(this,"_validateForDeletion",e=>e.map(this._getNodeById).filter(Boolean).filter(this._canDeleteNode).map(e=>e.id)),$t(this,"_validateForEdit",e=>{const t=this._getNodeById(e);return!!t&&(!this._isSeparator(t)&&!this._isBookmarkContainer(t))}),$t(this,"_reset",e=>{D.a.menuContent.reset(this.props.menuName,[e],Re.default)}),$t(this,"_setContainerMode",(e,t)=>{D.a.menuContent.update(this.props.menuName,e,{containerMode:t},Re.default)}),$t(this,"_setContainerEdge",(e,t)=>{D.a.menuContent.update(this.props.menuName,e,{containerEdge:t},Re.default)}),$t(this,"_getTitle",e=>{const t=this._getNodeById(e);if(t){let e=t.name;return t.ellipsis&&(e+=Ut.a.ellipsisString()),e}return""}),$t(this,"_saveTitle",(e,t)=>{D.a.menuContent.update(this.props.menuName,e,{title:t},Re.default)}),$t(this,"_isMenubarMenu",()=>"mac"===this.state.role||"horizontal"===this.state.role),$t(this,"_getDragData",(e,t)=>""),$t(this,"_setDragData",(e,t)=>{let a="",i=!1,s=!1;t.forEach(e=>{const t=this._getNodeById(e);t&&(this._isFolder(t)?(this._isDefaultTopFolder(t)&&(i=!0),a=""===a||"vivaldi/x-menufolder"===a?"vivaldi/x-menufolder":"vivaldi/x-menumixed"):(this._isBookmarkContainer(t)&&(s=!0),a=""===a||"vivaldi/x-menuitem"===a?"vivaldi/x-menuitem":"vivaldi/x-menumixed"))}),e.setData(a,JSON.stringify(t)),i&&e.setData("vivaldi/x-menudefaulttopfolder",JSON.stringify(t)),s&&e.setData("vivaldi/x-bookmarkcontainer",JSON.stringify(t))}),$t(this,"_getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!1};return a.available=t.dataTransfer.types.some(e=>"vivaldi/x-menuitem"===e||"vivaldi/x-menufolder"===e||"vivaldi/x-menumixed"===e||"vivaldi/x-commanditem"===e||"vivaldi/x-commandfolder"===e||"vivaldi/x-commandmixed"===e),a.available&&(a.onto=this._canDropOnto(e,t),a.edge=this._canDropOnEdge(e,t)),a}),$t(this,"_canDropOnto",(e,t)=>{if(this._isFolder(e)){if(this._isMac){if(t.dataTransfer.types.some(e=>"vivaldi/x-bookmarkcontainer"===e))return!1;if(t.dataTransfer.types.some(e=>"vivaldi/x-menufolder"===e)&&t.dataTransfer.types.some(e=>"vivaldi/x-menudefaulttopfolder"===e))return!1}return!0}return!1}),$t(this,"_canDropOnEdge",(e,t)=>0!==e.level||!this._isMenubarMenu()||(!this._isMac||0!==e.index)&&t.dataTransfer.types.some(e=>"vivaldi/x-menufolder"===e||"vivaldi/x-menumixed"===e||"vivaldi/x-commandfolder"===e||"vivaldi/x-commandmixed"===e)),$t(this,"_getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:""};return this._isFolder(e)&&"on"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0)),a}),$t(this,"_canAddToTopLevel",e=>{let t=!0;return this._isMenubarMenu()&&e.forEach(e=>{"folder"!==e.type&&(t=!1)}),t}),$t(this,"_onDrop",(e,t,a)=>{const i=e.dataTransfer.getData("vivaldi/x-commanditem");return this._addAtPosition(t,i,a).then(e=>{if(e&&e.length>0){const t=e[0].id;this.refs.treeList.expandToId(t),this.refs.treeList.selectById(t)}return e})}),$t(this,"_addAtPosition",(e,t,a)=>new Promise(i=>{const s=this._getTargetSpec(e,a),n=JSON.parse(t);0!==e.level||"on"===a||this._canAddToTopLevel(n)?D.a.menuContent.create(this.props.menuName,s.parentId,s.index,n,(e,t)=>{const a=t.map(e=>({id:e}));i(a)}):i([])})),$t(this,"_supportsUpDownMove",(e,t)=>!!this._isValidDragSource(e)&&!(0===e.level&&!0===t&&e.index<=1)),$t(this,"_onMove",(e,t,a)=>new Promise(i=>{D.a.menuContent.move(this.props.menuName,e,t,a,t=>{i(e)})})),$t(this,"_onCreate",(e,t,a,i)=>new Promise(i=>{const s=[];let n=!1;e.forEach((e,t)=>{e.children?(n=0===t,s.push({id:"",type:"folder",action:"",title:Object(o.a)("command","New Folder")})):e.separator&&s.push({id:"",type:"separator",action:""})}),D.a.menuContent.create(this.props.menuName,t,void 0===a?-1:a,s,(e,t)=>{const a={items:t.map(e=>({id:e})),props:{edit:n}};i(a)})})),$t(this,"_onRemove",e=>new Promise(t=>{D.a.menuContent.remove(this.props.menuName,e,e=>{t(e)})})),$t(this,"_handleExpandClick",()=>{this.refs.treeList.toggleSelectedExpansion()}),$t(this,"_getContextMenuItemProps",e=>e?{showMoveUp:this.refs.treeList.canMoveUpDown(e,!0),showMoveDown:this.refs.treeList.canMoveUpDown(e,!1),showRename:this._validateForEdit(e.id),showDelete:this._canDeleteNode(e),showNewSeparator:!0,showNewFolder:!0}:{showNewSeparator:!this._isMenubarMenu(),showNewFolder:!0}),$t(this,"_getNodeMenuItems",e=>[{handler:this._reset.bind(this,e.id),testVisibility:()=>this._isFolder(e)&&!e.custom,...Object(xe.a)("Restore Default Folder")},{testVisibility:()=>this._isContainer(e)&&!this._isBookmarkContainer(e),...Object(xe.a)("Show List in Folder"),type:"checkbox",checked:"folder"===e.mode,handler:this._setContainerMode.bind(this,e.id,"folder"===e.mode?"inline":"folder")},{testVisibility:()=>this._isBookmarkContainer(e),...Object(xe.a)("Show 'Add Active Tab'"),items:[{type:"radiobutton",checked:"above"===e.edge,radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"above"),...Object(xe.a)("Above List")},{type:"radiobutton",checked:"below"===e.edge,radiogroup:2,handler:this._setContainerEdge.bind(this,e.id,"below"),...Object(xe.a)("Below List")},{name:"---"},{type:"radiobutton",checked:"off"===e.edge,handler:this._setContainerEdge.bind(this,e.id,"off"),radiogroup:2,...Object(xe.a)("Hide")}]}]),$t(this,"_getContextMenuItems",e=>e?this._getNodeMenuItems(e):[]),$t(this,"_renderItem",e=>{const t=e.node,a=16*t.level+"px",i=16*(t.level+1)+"px";if(this._isSeparator(t))return s.a.createElement("label",{key:"0",__source:{fileName:Yt,lineNumber:582}},s.a.createElement("hr",{style:{marginLeft:i},className:"separator",__source:{fileName:Yt,lineNumber:583}}));let n=t.name;t.ellipsis&&(n+=Ut.a.ellipsisString()),"container"===t.type&&t.settingsName&&(n="inline"===t.mode||this._isBookmarkContainer(t)?t.settingsName:Object(o.a)("$1 (In Folder)",[t.settingsName]));const r=this._isFolder(t)&&this._hasChildren(t);return s.a.createElement("label",{key:"0",__source:{fileName:Yt,lineNumber:604}},r&&s.a.createElement("span",{className:"expand-icon",style:{marginLeft:a},onClick:this._handleExpandClick,dangerouslySetInnerHTML:{__html:Be.R},__source:{fileName:Yt,lineNumber:607}}),!r&&s.a.createElement("span",{style:{marginLeft:i},__source:{fileName:Yt,lineNumber:613}}),void 0!==e.inlineEditText&&s.a.createElement("input",{type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:Yt,lineNumber:617}}),void 0===e.inlineEditText&&s.a.createElement("span",{className:"title",__source:{fileName:Yt,lineNumber:627}},n))})}componentDidMount(){this._isMounted=!0,D.a.menuContent.onChanged.addListener(this._onMenuChanged),this._loadMenu()}componentWillUnmount(){this._isMounted=!1,D.a.menuContent.onChanged.removeListener(this._onMenuChanged)}componentDidUpdate(e,t){this.props.menuName!==e.menuName&&this._loadMenu()}render(){return this.state?s.a.createElement(s.a.Fragment,null,s.a.createElement(Wt.a,{ref:"treeList",nodes:this.state.menuItems,rootId:this.state.rootId,mimeType:"vivaldi/x-menuitem",enableDragAndDrop:!0,validateForDrag:this._validateForDrag,validateForDeletion:this._validateForDeletion,isValidDragSource:this._isValidDragSource,getDragData:this._getDragData,setCustomDragData:this._setDragData,getDropSupport:this._getDropSupport,onDrop:this._onDrop,onMove:this._onMove,onCreate:this._onCreate,delete:this._onRemove,hasChildren:this._hasChildren,isFolder:this._isFolder,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,getTitle:this._getTitle,saveTitle:this._saveTitle,supportsInlineEdit:!0,supportsUpDownMove:this._supportsUpDownMove,isValidToEdit:this._validateForEdit,renderItemContent:this._renderItem,__source:{fileName:Yt,lineNumber:642}}),s.a.createElement("div",{className:"setting-single",__source:{fileName:Yt,lineNumber:669}},s.a.createElement("input",{type:"button",onClick:this.props.confirmReset,value:Object(o.a)("Restore Default Menu"),__source:{fileName:Yt,lineNumber:670}}))):null}}var Zt=Qt,qt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\menu\\Menu.jsx";function Xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Jt=[l.kMenuDisplay];class ea extends s.a.Component{constructor(e){super(e),Xt(this,"_onMenuChange",e=>{this.setState({menuName:e.target.value})}),Xt(this,"_handleResetMenu",()=>{D.a.menuContent.reset(this.state.menuName,void 0,()=>{}),this.closeConfirmation()}),Xt(this,"_canAddToTree",()=>!!this.refs.menuTree.getSelectedItem()),Xt(this,"_addToTree",(e,t)=>{const a=this.refs.menuTree.getSelectedItem();a&&this.refs.menuTree.add(a,t)}),Xt(this,"confirmReset",()=>this.setState({confirmation:!0})),Xt(this,"closeConfirmation",()=>this.setState({confirmation:!1})),Xt(this,"getMenuName",e=>(e||(e=this.state.menuName),"vivaldi"===e?Object(o.a)("Vivaldi Button Menu"):"menubar"===e?Object(o.a)("Horizontal Menu"):void 0)),Xt(this,"renderModal",()=>{const e=this.getMenuName();return s.a.createElement(Ie.a,{dialogWidth:400,onRequestClose:this.closeConfirmation,__source:{fileName:qt,lineNumber:83}},s.a.createElement("div",{className:"dialog-reset-menu",__source:{fileName:qt,lineNumber:86}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:qt,lineNumber:87}},s.a.createElement("h1",{className:"dialog-title",__source:{fileName:qt,lineNumber:88}},Object(o.a)("Reset $1?",[e]))),s.a.createElement("div",{className:"dialog-content",__source:{fileName:qt,lineNumber:92}},s.a.createElement("p",{__source:{fileName:qt,lineNumber:93}},Object(o.a)("$1 will be reset to its default state.",[e]))),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:qt,lineNumber:97}},s.a.createElement("input",{type:"button",className:"primary",onClick:this._handleResetMenu,value:Object(o.a)("Reset to Default"),autoFocus:!0,__source:{fileName:qt,lineNumber:98}}),s.a.createElement("input",{type:"button",onClick:this.closeConfirmation,value:Object(o.a)("Cancel"),__source:{fileName:qt,lineNumber:103}}))))});const t="top"===this.props.prefValues[l.kMenuDisplay]?"menubar":"vivaldi";this.state={menuName:t,confirmation:!1}}render(){const e=["vivaldi","menubar"].map(e=>s.a.createElement("option",{key:e,value:e,__source:{fileName:qt,lineNumber:114}},this.getMenuName(e)));return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:qt,lineNumber:120}},this.state.confirmation&&this.renderModal(),s.a.createElement("div",{className:"setting-single",__source:{fileName:qt,lineNumber:125}},s.a.createElement("h3",{__source:{fileName:qt,lineNumber:126}},Object(o.a)("Menu Customization")),s.a.createElement("select",{className:"menu-list",value:this.state.menuName,onChange:this._onMenuChange,__source:{fileName:qt,lineNumber:127}},e)),s.a.createElement("div",{className:"menu-lists",__source:{fileName:qt,lineNumber:136}},s.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:qt,lineNumber:137}},s.a.createElement("h3",{__source:{fileName:qt,lineNumber:138}},Object(o.a)("Content"))),s.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:qt,lineNumber:140}},s.a.createElement("h3",{__source:{fileName:qt,lineNumber:141}},Object(o.a)("Commands"))),s.a.createElement("div",{className:"setting-single menu-items",__source:{fileName:qt,lineNumber:143}},s.a.createElement(Zt,{ref:"menuTree",menuName:this.state.menuName,confirmReset:this.confirmReset,filter:this.props.filter,__source:{fileName:qt,lineNumber:144}})),s.a.createElement("div",{className:"setting-single menu-commands",__source:{fileName:qt,lineNumber:151}},s.a.createElement(zt,{canAddToTree:this._canAddToTree,addToTree:this._addToTree,filter:this.props.filter,__source:{fileName:qt,lineNumber:152}}))))}}var ta=Object(_.a)(ea,Jt),aa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\appearance\\MenuType.jsx";const ia=[l.kMenuDisplay,l.kMenuIconType],sa=n.a.getEventHandler;class na extends s.a.PureComponent{render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Menu"),filter:this.props.filter,__source:{fileName:aa,lineNumber:28}},s.a.createElement("div",{className:"setting-group",__source:{fileName:aa,lineNumber:30}},s.a.createElement("h3",{__source:{fileName:aa,lineNumber:31}},Object(o.a)("title","Menu Position")),s.a.createElement(m.a,{name:"menuPosition",value:this.props.prefValues[l.kMenuDisplay],onChange:sa(l.kMenuDisplay),className:"group",__source:{fileName:aa,lineNumber:32}},s.a.createElement("div",{className:"setting-single",__source:{fileName:aa,lineNumber:36}},s.a.createElement("label",{__source:{fileName:aa,lineNumber:37}},s.a.createElement("input",{type:"radio",value:"vivaldi",__source:{fileName:aa,lineNumber:38}}),s.a.createElement("span",{__source:{fileName:aa,lineNumber:39}},Object(o.a)("menu","Vivaldi Button")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:aa,lineNumber:42}},s.a.createElement("label",{__source:{fileName:aa,lineNumber:43}},s.a.createElement("input",{type:"radio",value:"top",__source:{fileName:aa,lineNumber:44}}),s.a.createElement("span",{__source:{fileName:aa,lineNumber:45}},Object(o.a)("menu","Horizontal")))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:aa,lineNumber:52}},s.a.createElement("h3",{__source:{fileName:aa,lineNumber:53}},Object(o.a)("Menu Icon Style")),s.a.createElement(m.a,{name:"menuStyle",value:this.props.prefValues[l.kMenuIconType],onChange:sa(l.kMenuIconType),className:"group",__source:{fileName:aa,lineNumber:54}},s.a.createElement("div",{className:"setting-single",__source:{fileName:aa,lineNumber:58}},s.a.createElement("label",{__source:{fileName:aa,lineNumber:59}},s.a.createElement("input",{type:"radio",value:"icon",__source:{fileName:aa,lineNumber:60}}),s.a.createElement("span",{__source:{fileName:aa,lineNumber:61}},Object(o.a)("Vivaldi Icon")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:aa,lineNumber:64}},s.a.createElement("label",{__source:{fileName:aa,lineNumber:65}},s.a.createElement("input",{type:"radio",value:"burger",__source:{fileName:aa,lineNumber:66}}),s.a.createElement("span",{__source:{fileName:aa,lineNumber:67}},Object(o.a)("Menu Icon")))))),s.a.createElement(ta,{filter:this.props.filter,__source:{fileName:aa,lineNumber:73}}))}}var ra=Object(_.a)(na,ia),oa=a(981),la="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\network\\NetworkSettings.jsx";class ca extends i.Component{constructor(...e){var t,a,i;super(...e),i=()=>{D.a.utilities.launchNetworkSettings(e=>{})},(a="onClick")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Network"),filter:this.props.filter,__source:{fileName:la,lineNumber:18}},i.createElement("div",{className:"setting-group",__source:{fileName:la,lineNumber:19}},i.createElement("h3",{__source:{fileName:la,lineNumber:20}},Object(o.a)("Proxies")),i.createElement("div",{className:"setting-single",__source:{fileName:la,lineNumber:22}},i.createElement("label",{__source:{fileName:la,lineNumber:23}},i.createElement("input",{type:"button",value:Object(o.a)("Proxy Settings"),onClick:this.onClick,__source:{fileName:la,lineNumber:24}})))))}}var da=ca,ua=a(12),ha="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\panel\\Panel.jsx";const ma=[l.kMailContactDefaultAction,l.kMailSingleClickTabs,l.kNotesCreationAddScreenshot,l.kNotesCreationNotify,l.kNotesCreationShowPanel,l.kPanelsAsOverlayAutoClose,l.kPanelsAsOverlayEnabled,l.kPanelsPosition,l.kPanelsShowToggle,l.kPanelsWindowDragToStack,l.kPanelsWindowShowPinnedGroup,l.kPanelsWindowSingleClickOpens,l.kPanelsWindowShowUnread,l.kTabsCounterDetection],pa=n.a.getEventHandler;class ga extends i.Component{render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Panels"),filter:this.props.filter,__source:{fileName:ha,lineNumber:51}},i.createElement("div",{className:"setting-group",__source:{fileName:ha,lineNumber:52}},i.createElement("h3",{__source:{fileName:ha,lineNumber:53}},Object(o.a)("Panel Position")),i.createElement(m.a,{name:"panelPosition",value:this.props.prefValues[l.kPanelsPosition],onChange:pa(l.kPanelsPosition),className:"group",__source:{fileName:ha,lineNumber:54}},i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:58}},i.createElement("label",{__source:{fileName:ha,lineNumber:59}},i.createElement("input",{type:"radio",value:"left",__source:{fileName:ha,lineNumber:60}}),i.createElement("span",{__source:{fileName:ha,lineNumber:61}},Object(o.a)("Left Side")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:65}},i.createElement("label",{__source:{fileName:ha,lineNumber:66}},i.createElement("input",{type:"radio",value:"right",__source:{fileName:ha,lineNumber:67}}),i.createElement("span",{__source:{fileName:ha,lineNumber:68}},Object(o.a)("Right Side")))))),i.createElement("div",{className:"setting-group",__source:{fileName:ha,lineNumber:75}},i.createElement("h3",{__source:{fileName:ha,lineNumber:76}},Object(o.a)("Panel Options")),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:77}},i.createElement("label",{title:Object(o.a)("Display a panel toggle button along the side"),__source:{fileName:ha,lineNumber:78}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsShowToggle],onChange:pa(l.kPanelsShowToggle),__source:{fileName:ha,lineNumber:79}}),i.createElement("span",{__source:{fileName:ha,lineNumber:82}},Object(o.a)("Show Panel Toggle")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:85}},i.createElement("label",{title:Object(o.a)("Overlay panel over browser content"),__source:{fileName:ha,lineNumber:86}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsAsOverlayEnabled],onChange:pa(l.kPanelsAsOverlayEnabled),__source:{fileName:ha,lineNumber:87}}),i.createElement("span",{__source:{fileName:ha,lineNumber:90}},Object(o.a)("Floating Panel")))),i.createElement("div",{className:"setting-single pad-left",__source:{fileName:ha,lineNumber:93}},i.createElement("label",{title:Object(o.a)("Automatically collapse panel upon losing focus"),__source:{fileName:ha,lineNumber:94}},i.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kPanelsAsOverlayEnabled],checked:this.props.prefValues[l.kPanelsAsOverlayAutoClose],onChange:pa(l.kPanelsAsOverlayAutoClose),__source:{fileName:ha,lineNumber:95}}),i.createElement("span",{__source:{fileName:ha,lineNumber:99}},Object(o.a)("Auto-Close Inactive Panel"))))),i.createElement("div",{className:"setting-group",__source:{fileName:ha,lineNumber:104}},i.createElement("h3",{__source:{fileName:ha,lineNumber:105}},Object(o.a)("Web Panels")),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:106}},i.createElement("label",{title:Object(o.a)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:ha,lineNumber:107}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsCounterDetection],onChange:pa(l.kTabsCounterDetection),__source:{fileName:ha,lineNumber:108}}),i.createElement("span",{__source:{fileName:ha,lineNumber:111}},Object(o.a)("Detect Page Title Notifications"))))),i.createElement("div",{className:"setting-group",__source:{fileName:ha,lineNumber:116}},i.createElement("h3",{__source:{fileName:ha,lineNumber:117}},Object(o.a)("title","Notes Panel")),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:118}},i.createElement("label",{title:Object(o.a)("Show panel content when adding a note from a page"),__source:{fileName:ha,lineNumber:119}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationShowPanel],onChange:pa(l.kNotesCreationShowPanel),__source:{fileName:ha,lineNumber:120}}),i.createElement("span",{__source:{fileName:ha,lineNumber:123}},Object(o.a)("Open Panel Automatically")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:127}},i.createElement("label",{__source:{fileName:ha,lineNumber:128}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationNotify],onChange:pa(l.kNotesCreationNotify),__source:{fileName:ha,lineNumber:129}}),i.createElement("span",{__source:{fileName:ha,lineNumber:132}},Object(o.a)("Notify on Adding New Note")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:136}},i.createElement("label",{title:Object(o.a)("Add a screenshot when adding a note from a page"),__source:{fileName:ha,lineNumber:137}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kNotesCreationAddScreenshot],onChange:pa(l.kNotesCreationAddScreenshot),__source:{fileName:ha,lineNumber:138}}),i.createElement("span",{__source:{fileName:ha,lineNumber:141}},Object(o.a)("Fetch Screenshot for New Notes"))))),i.createElement("div",{className:"setting-group",__source:{fileName:ha,lineNumber:147}},i.createElement("h3",{__source:{fileName:ha,lineNumber:148}},Object(o.a)("title","Window Panel")),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:149}},i.createElement("label",{__source:{fileName:ha,lineNumber:150}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowSingleClickOpens],onChange:pa(l.kPanelsWindowSingleClickOpens),__source:{fileName:ha,lineNumber:151}}),i.createElement("span",{__source:{fileName:ha,lineNumber:154}},Object(o.a)("Activate with Single Click")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:158}},i.createElement("label",{__source:{fileName:ha,lineNumber:159}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowShowPinnedGroup],onChange:pa(l.kPanelsWindowShowPinnedGroup),__source:{fileName:ha,lineNumber:160}}),i.createElement("span",{__source:{fileName:ha,lineNumber:163}},Object(o.a)("Pinned Folder")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:167}},i.createElement("label",{__source:{fileName:ha,lineNumber:168}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowDragToStack],onChange:pa(l.kPanelsWindowDragToStack),__source:{fileName:ha,lineNumber:169}}),i.createElement("span",{__source:{fileName:ha,lineNumber:172}},Object(o.a)("Make Tab Stack with Mouse Drag")))),i.createElement("div",{className:"setting-single",__source:{fileName:ha,lineNumber:176}},i.createElement("label",{__source:{fileName:ha,lineNumber:177}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPanelsWindowShowUnread],onChange:pa(l.kPanelsWindowShowUnread),__source:{fileName:ha,lineNumber:178}}),i.createElement("span",{__source:{fileName:ha,lineNumber:181}},Object(o.a)("Show Unread Tabs Badge"))))),!1)}}var ba=Object(_.a)(ga,ma),fa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\HistorySetting.jsx";const _a=[l.kHistoryDaysToKeepVisits],Na=n.a.getEventHandler;class va extends s.a.Component{render(){const e=this.props.prefValues[l.kHistoryDaysToKeepVisits],t=[0,1,7,31,91,182,365,3650].includes(e);return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:fa,lineNumber:26}},s.a.createElement("div",{className:"setting-group",__source:{fileName:fa,lineNumber:27}},s.a.createElement("h3",{__source:{fileName:fa,lineNumber:28}},Object(o.a)("other","Save Browsing History")),s.a.createElement("div",{className:"setting-single",__source:{fileName:fa,lineNumber:29}},s.a.createElement("select",{onChange:Na(l.kHistoryDaysToKeepVisits),value:e,__source:{fileName:fa,lineNumber:30}},s.a.createElement("option",{value:"0",__source:{fileName:fa,lineNumber:33}},Object(o.a)("command","Session Only")),s.a.createElement("option",{value:"1",__source:{fileName:fa,lineNumber:34}},Object(o.a)("One Day")),s.a.createElement("option",{value:"7",__source:{fileName:fa,lineNumber:35}},Object(o.a)("One Week")),s.a.createElement("option",{value:"31",__source:{fileName:fa,lineNumber:36}},Object(o.a)("One Month")),s.a.createElement("option",{value:"91",__source:{fileName:fa,lineNumber:37}},Object(o.a)("Three Months")),s.a.createElement("option",{value:"182",__source:{fileName:fa,lineNumber:38}},Object(o.a)("Six Months")),s.a.createElement("option",{value:"365",__source:{fileName:fa,lineNumber:39}},Object(o.a)("One Year")),s.a.createElement("option",{value:"3650",__source:{fileName:fa,lineNumber:40}},Object(o.a)("Forever")),!t&&s.a.createElement("option",{value:e,__source:{fileName:fa,lineNumber:42}},Object(o.a)("Other ($1 Days)",[e])))),s.a.createElement("p",{className:"info",__source:{fileName:fa,lineNumber:48}},Object(o.a)("Browser restart is required for new setting to take effect."))))}}var Ea=Object(_.a)(va,_a),wa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\Privacy.jsx";function Sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ca=[l.kAddressBarInlineSearchEnabled,l.kAddressBarInlineSearchSuggestEnabled,l.kAddressBarSearchSuggestEnabled,l.kAddressBarSearchTypedHistoryEnabled,l.kAddressBarTypedHistoryEnabled,l.kAlternateErrorPagesEnabled,l.kEnableDoNotTrack,l.kPrivacyAdverseAdBlockEnabled,l.kPrivacyAutofillServerAssist,l.kSafeBrowsingEnabled,l.kIncognitoShowIntro,l.kWebRTCIPHandlingPolicy];const ka=n.a.getEventHandler;class ya extends s.a.Component{constructor(...e){super(...e),Sa(this,"toggleChromePrivacyWebRTCChange",()=>{const e=this.webRTCAnnouncesIPs()?"disable_non_proxied_udp":"default";n.a.set(l.kWebRTCIPHandlingPolicy,e)}),Sa(this,"webRTCAnnouncesIPs",()=>["default","default_public_interface_only","default_public_and_private_interfaces"].some(e=>this.props.prefValues[l.kWebRTCIPHandlingPolicy]===e))}render(){const e=this.props.prefValues;return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Privacy"),displayPrivacyLink:!0,filter:this.props.filter,__source:{fileName:wa,lineNumber:71}},s.a.createElement("div",{className:"setting-group",__source:{fileName:wa,lineNumber:76}},s.a.createElement("h3",{__source:{fileName:wa,lineNumber:77}},Object(o.a)("Third Party Services")),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:78}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:79}},s.a.createElement("input",{type:"checkbox",checked:e[l.kSafeBrowsingEnabled],onChange:ka(l.kSafeBrowsingEnabled),__source:{fileName:wa,lineNumber:80}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:83}},Object(o.a)("Google Phishing and Malware Protection")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:87}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:88}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAlternateErrorPagesEnabled],onChange:ka(l.kAlternateErrorPagesEnabled),__source:{fileName:wa,lineNumber:89}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:92}},Object(o.a)("Use a Google DNS Service to Help Resolve Navigation Errors")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:98}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:99}},s.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyAutofillServerAssist],onChange:ka(l.kPrivacyAutofillServerAssist),__source:{fileName:wa,lineNumber:100}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:103}},Object(o.a)("Use a Google Service to Assist in Form Autofill"))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:wa,lineNumber:110}},s.a.createElement("h3",{__source:{fileName:wa,lineNumber:111}},Object(o.a)("noun","Search")),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:112}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:113}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarInlineSearchEnabled],onChange:ka(l.kAddressBarInlineSearchEnabled),__source:{fileName:wa,lineNumber:114}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:117}},Object(o.a)("Search in Address Field")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:121}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:122}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarInlineSearchSuggestEnabled],onChange:ka(l.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:wa,lineNumber:123}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:126}},Object(o.a)("Suggestions in Address Field")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:130}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:131}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarSearchSuggestEnabled],onChange:ka(l.kAddressBarSearchSuggestEnabled),__source:{fileName:wa,lineNumber:132}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:135}},Object(o.a)("Suggestions in Search Field"))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:wa,lineNumber:140}},s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:141}},s.a.createElement("h3",{__source:{fileName:wa,lineNumber:142}},Object(o.a)("Do Not Track")),s.a.createElement("label",{title:Object(o.a)("Send “Do Not Track” directive to supporting websites"),__source:{fileName:wa,lineNumber:143}},s.a.createElement("input",{type:"checkbox",checked:e[l.kEnableDoNotTrack],onChange:ka(l.kEnableDoNotTrack),__source:{fileName:wa,lineNumber:144}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:147}},Object(o.a)("Ask Websites Not to Track Me")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:150}},s.a.createElement("label",{title:"Reject advertisement on websites listed by Google as privacy offenders",__source:{fileName:wa,lineNumber:151}},s.a.createElement("input",{type:"checkbox",checked:e[l.kPrivacyAdverseAdBlockEnabled],onChange:ka(l.kPrivacyAdverseAdBlockEnabled),__source:{fileName:wa,lineNumber:152}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:155}},Object(o.a)("Block Ads on Abusive Sites")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:158}},s.a.createElement("label",{title:Object(o.a)("Web Real-Time Communication broadcast may leak IP address to services"),__source:{fileName:wa,lineNumber:159}},s.a.createElement("input",{type:"checkbox",checked:this.webRTCAnnouncesIPs(),onChange:this.toggleChromePrivacyWebRTCChange,__source:{fileName:wa,lineNumber:160}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:164}},Object(o.a)("Broadcast IP for Best WebRTC Performance"))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:wa,lineNumber:169}},s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:170}},s.a.createElement("h3",{__source:{fileName:wa,lineNumber:171}},Object(o.a)("Show Typed History")),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:172}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:173}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarTypedHistoryEnabled],onChange:ka(l.kAddressBarTypedHistoryEnabled),__source:{fileName:wa,lineNumber:174}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:178}},Object(o.a)("radio","In Address Field")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:181}},s.a.createElement("label",{__source:{fileName:wa,lineNumber:182}},s.a.createElement("input",{type:"checkbox",checked:e[l.kAddressBarSearchTypedHistoryEnabled],onChange:ka(l.kAddressBarSearchTypedHistoryEnabled),__source:{fileName:wa,lineNumber:183}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:188}},Object(o.a)("radio","In Search Field")))))),s.a.createElement(Ea,{filter:this.props.filter,__source:{fileName:wa,lineNumber:194}}),s.a.createElement("div",{className:"setting-group",__source:{fileName:wa,lineNumber:196}},s.a.createElement("div",{className:"setting-single",__source:{fileName:wa,lineNumber:197}},s.a.createElement("h3",{__source:{fileName:wa,lineNumber:198}},Object(o.a)("Private Windows")),s.a.createElement("label",{__source:{fileName:wa,lineNumber:199}},s.a.createElement("input",{type:"checkbox",checked:e[l.kIncognitoShowIntro],onChange:ka(l.kIncognitoShowIntro),__source:{fileName:wa,lineNumber:200}}),s.a.createElement("span",{__source:{fileName:wa,lineNumber:203}},Object(o.a)("Show Introduction"))))),!1)}}var Oa=Object(_.a)(ya,Ca),Aa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\quickcommands\\QuickCommands.jsx";const Ta=[l.kQuickCommandsKeepValue,l.kQuickCommandsOpenUrlInNewTab,l.kQuickCommandsSearchEnglish,l.kQuickCommandsMatchNickname,l.kQuickCommandsShowBookmarks,l.kQuickCommandsShowCalculator,l.kQuickCommandsShowHistory,l.kQuickCommandsShowNotes,l.kQuickCommandsShowPageActions,l.kQuickCommandsLimitResults],Ia=n.a.getEventHandler;class Da extends s.a.Component{render(){const e=this.props.prefValues;return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Quick Commands"),filter:this.props.filter,__source:{fileName:Aa,lineNumber:45}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Aa,lineNumber:47}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:48}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:49}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsOpenUrlInNewTab],onChange:Ia(l.kQuickCommandsOpenUrlInNewTab),__source:{fileName:Aa,lineNumber:50}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:54}},Object(o.a)("Open Pages in New Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:57}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:58}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsLimitResults],onChange:Ia(l.kQuickCommandsLimitResults),__source:{fileName:Aa,lineNumber:59}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:62}},Object(o.a)("Limit Number of Visible Results")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:65}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:66}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsSearchEnglish],onChange:Ia(l.kQuickCommandsSearchEnglish),__source:{fileName:Aa,lineNumber:67}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:70}},Object(o.a)("Include English Search Terms")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:73}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:74}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsKeepValue],onChange:Ia(l.kQuickCommandsKeepValue),__source:{fileName:Aa,lineNumber:75}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:78}},Object(o.a)("Keep Last Entered Value"))))),s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Aa,lineNumber:83}},s.a.createElement("h3",{__source:{fileName:Aa,lineNumber:84}},Object(o.a)("Include in Search Results")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:85}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:86}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsShowBookmarks],onChange:Ia(l.kQuickCommandsShowBookmarks),__source:{fileName:Aa,lineNumber:87}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:90}},Object(o.a)("Bookmarks")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Aa,lineNumber:93}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:94}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsMatchNickname],onChange:Ia(l.kQuickCommandsMatchNickname),disabled:!1===e[l.kQuickCommandsShowBookmarks],__source:{fileName:Aa,lineNumber:95}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:100}},Object(o.a)("Open on Nickname Match")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:103}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:104}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsShowNotes],onChange:Ia(l.kQuickCommandsShowNotes),__source:{fileName:Aa,lineNumber:105}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:108}},Object(o.a)("Notes")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:111}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:112}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsShowPageActions],onChange:Ia(l.kQuickCommandsShowPageActions),__source:{fileName:Aa,lineNumber:113}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:116}},Object(o.a)("Page Actions")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:119}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:120}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsShowHistory],onChange:Ia(l.kQuickCommandsShowHistory),__source:{fileName:Aa,lineNumber:121}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:124}},Object(o.a)("History Entries")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Aa,lineNumber:127}},s.a.createElement("label",{__source:{fileName:Aa,lineNumber:128}},s.a.createElement("input",{type:"checkbox",checked:e[l.kQuickCommandsShowCalculator],onChange:Ia(l.kQuickCommandsShowCalculator),__source:{fileName:Aa,lineNumber:129}}),s.a.createElement("span",{__source:{fileName:Aa,lineNumber:132}},Object(o.a)("Calculator"))))))}}var Pa=Object(_.a)(Da,Ta),xa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\RazerChromaIntegration.jsx";function Ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const La=["keyboard","mouse","chromalink","mousemat","headset"],ja=[l.kRazerChromaDevices,l.kRazerChromaEnabled],Ba=[{device:"keyboard",text:Object(o.a)("Keyboard")},{device:"mouse",text:Object(o.a)("Mouse")},{device:"mousemat",text:Object(o.a)("Mouse Mat")},{device:"headset",text:Object(o.a)("Headset")},{device:"chromalink",text:Object(o.a)("Chroma Link")}];class Ra extends i.Component{constructor(e){super(e),Ma(this,"isDeviceEnabled",(e,t)=>e.findIndex(e=>e===t)>-1),Ma(this,"onChromaEnabled",e=>{const t=e.target.checked;n.a.set(l.kRazerChromaEnabled,t)}),Ma(this,"onDeviceChecked",(e,t)=>{const a=t.target.checked,i=this.props.prefValues[l.kRazerChromaDevices],s=La.filter(t=>e===t?a:this.isDeviceEnabled(i,t));n.a.set(l.kRazerChromaDevices,s)})}renderDeviceList(){const e=this.props.prefValues[l.kRazerChromaDevices];return Ba.map(t=>i.createElement("div",{key:t.device,className:"setting-single pad-left",__source:{fileName:xa,lineNumber:66}},i.createElement("label",{__source:{fileName:xa,lineNumber:67}},i.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kRazerChromaEnabled],checked:Boolean(this.isDeviceEnabled(e,t.device)),onChange:this.onDeviceChecked.bind(this,t.device),__source:{fileName:xa,lineNumber:68}}),i.createElement("span",{__source:{fileName:xa,lineNumber:73}},t.text))))}render(){return i.createElement(v.a,{categoryTitle:Object(o.a)("Razer Chroma Theme Integration"),filter:this.props.filter,__source:{fileName:xa,lineNumber:85}},i.createElement("div",{className:"setting-group",__source:{fileName:xa,lineNumber:88}},i.createElement("div",{className:"setting-single",__source:{fileName:xa,lineNumber:89}},i.createElement("label",{__source:{fileName:xa,lineNumber:90}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kRazerChromaEnabled],onChange:this.onChromaEnabled,__source:{fileName:xa,lineNumber:91}}),i.createElement("span",{__source:{fileName:xa,lineNumber:95}},Object(o.a)("Enable Razer Chroma Integration"))),i.createElement("p",{className:"info",__source:{fileName:xa,lineNumber:97}},Object(o.a)("Requires Razer Chroma enabled devices connected to the local machine."))),this.renderDeviceList()))}}var Fa=Object(_.a)(Ra,ja),Ua=a(545),Wa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordItem.jsx";class Ha extends i.Component{render(){const{origin:e,username:t,password:a}=this.props.savedPassword,{columns:s}=this.props;return s.length<1?null:s.map(s=>{switch(s.id){case"origin":return i.createElement("label",{key:s.id,__source:{fileName:Wa,lineNumber:34}},i.createElement("span",{className:"site-icon",onDoubleClick:this.props.openLink.bind(null,e),title:Object(o.a)("Double-click to visit $1",[e]),__source:{fileName:Wa,lineNumber:35}},i.createElement(qe.a,{url:e,__source:{fileName:Wa,lineNumber:39}})),i.createElement("span",{__source:{fileName:Wa,lineNumber:41}},e));case"username":return i.createElement("label",{key:s.id,__source:{fileName:Wa,lineNumber:47}},i.createElement("input",{type:"text",value:t,tabIndex:-1,readOnly:!0,__source:{fileName:Wa,lineNumber:48}}));case"password":return i.createElement("div",{key:s.id,__source:{fileName:Wa,lineNumber:54}},i.createElement("label",{__source:{fileName:Wa,lineNumber:55}},this.props.showPassword?i.createElement("input",{type:"text",value:a,tabIndex:-1,readOnly:!0,__source:{fileName:Wa,lineNumber:57}}):i.createElement("span",{__source:{fileName:Wa,lineNumber:58}},"•••••••")),i.createElement("button",{type:"button",className:"listcontrol",title:this.props.showPassword?Object(o.a)("Hide password"):Object(o.a)("Show password"),tabIndex:-1,onClick:this.props.togglePassword.bind(null,this.props.savedPassword.index),dangerouslySetInnerHTML:{__html:Be.Fb},__source:{fileName:Wa,lineNumber:61}}));default:return null}})}}var Va=Ha,Ga=a(36),Ka=a(263),za="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswordsTree.jsx";function Ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $a extends s.a.PureComponent{constructor(...e){super(...e),Ya(this,"_passwordTree",s.a.createRef()),Ya(this,"state",{visiblePasswords:[]}),Ya(this,"togglePassword",e=>{D.a.savedpasswords.authenticate(t=>{t&&this.onShowPassword(e)})}),Ya(this,"onShowPassword",e=>{this.setState(t=>{const a=t.visiblePasswords.slice(0);return a.includes(e)?a.splice(a.indexOf(e),1):a.push(e),{visiblePasswords:a}})}),Ya(this,"onPasswordDeleted",e=>{this.state.visiblePasswords.includes(e)&&this.setState(t=>{const a=t.visiblePasswords.slice(0);return a.splice(a.indexOf(e),1),{visiblePasswords:a}})}),Ya(this,"openLink",e=>{ua.a.openURL(e)}),Ya(this,"copyPassword",e=>{D.a.savedpasswords.authenticate(t=>{t&&Te.a.set(e)})}),Ya(this,"getContextMenuItems",e=>{const t=this.state.visiblePasswords.includes(e.index);return[{handler:this.onShowPassword.bind(null,e.index),visible:t,...Object(xe.a)("Hide Password")},{handler:this.togglePassword.bind(null,e.index),visible:!t,...Object(xe.a)("Show Password")},{name:"---"},{handler:this.copyPassword.bind(null,e.password),...Object(xe.a)("Copy Password")},{handler:Te.a.set.bind(null,e.username),...Object(xe.a)("Copy Account Name")},{handler:this.openLink.bind(null,e.origin),visible:Object(Ga.b)(e.origin).startsWith("http"),...Object(xe.a)("Visit Page")},{name:"---"},{handler:this.props.onDelete.bind(null,e),...Object(xe.a)("Delete Password")}]}),Ya(this,"onKeyDown",e=>{if(!this._passwordTree.current)return;const t=this._passwordTree.current.getSelectedItem();if(t)switch(e.key){case"Delete":case"Backspace":this.props.onDelete(t);break;case"Enter":this.openLink(t.origin)}}),Ya(this,"onMouseDown",()=>{this._passwordTree.current&&this._passwordTree.current.focusTree()}),Ya(this,"renderItemContent",e=>0!==this.props.columns.length&&e.node?s.a.createElement(Va,{columns:this.props.columns,savedPassword:e.node,showPassword:this.state.visiblePasswords.includes(e.node.index),togglePassword:this.togglePassword,openLink:this.openLink,__source:{fileName:za,lineNumber:147}}):null)}componentDidMount(){this._passwordTree.current&&this._passwordTree.current.focusTree()}render(){return s.a.createElement(Wt.a,{ref:this._passwordTree,nodes:this.props.nodes,enableDragAndDrop:!1,onItemMouseDown:this.onMouseDown,onItemDoubleClick:Re.default,onKeyDown:this.onKeyDown,getContextMenuItems:this.getContextMenuItems,isFolder:Ka.a,isValidForClipboard:Ka.a,hasChildren:Ka.a,renderItemContent:this.renderItemContent,sorting:this.props.sorting,columns:this.props.columns,multiSelect:!1,__source:{fileName:za,lineNumber:159}})}}var Qa=$a,Za=a(131),qa=a(61),Xa=a.n(qa),Ja=a(105),ei="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\privacy\\SavedPasswords.jsx";function ti(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ai=[l.kCredentialsEnableService],ii=n.a.getEventHandler,si=[{text:Object(o.a)("Website"),value:"origin",fullScreenTitle:Object(o.a)("Sort by website"),width:300,visible:!0,key:!0},{text:Object(o.a)("title","Account Name"),value:"username",fullScreenTitle:Object(o.a)("Sort by account name"),width:160,visible:!0},{text:Object(o.a)("Password"),value:"password",fullScreenTitle:Object(o.a)("Sort by password"),width:160,visible:!0}];class ni extends i.Component{constructor(e){super(e),ti(this,"passwordTree",i.createRef()),ti(this,"sortComparator",(e,t)=>e.index<t.index?1:-1),ti(this,"onSortChange",(e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}})}),ti(this,"onUpdateRow",e=>this.setState({columns:e})),ti(this,"onSaveRow",()=>Object(Ja.a)(this.state.columns,"passwords")),ti(this,"getSavedPassords",()=>D.a.savedpasswords.getList(e=>{this.setState({savedPasswordsData:e})})),ti(this,"deleteSavedPassword",()=>{const e=this.state.toRemove;e&&(D.a.savedpasswords.remove(e.index,()=>{this.passwordTree.current&&this.passwordTree.current.onPasswordDeleted(e.index),this.getSavedPassords()}),this.setState({confirmation:!1,toRemove:null}))}),ti(this,"onAskToDelete",e=>this.setState({confirmation:!0,toRemove:e})),ti(this,"onCancel",()=>this.setState({confirmation:!1,toRemove:null})),ti(this,"togglePasswordList",()=>this.setState(e=>({passwordsVisible:!e.passwordsVisible,siteFilter:""}))),ti(this,"filterEntries",e=>this.setState({siteFilter:e.target.value})),ti(this,"renderDeleteConfirmationModal",()=>{const e=this.state.toRemove;if(!e)return null;const t=Xa.a.parse(e.origin).hostname;return i.createElement(Ie.a,{onRequestClose:this.onCancel,dialogWidth:400,__source:{fileName:ei,lineNumber:165}},i.createElement("div",{className:"dialog-delete=password",__source:{fileName:ei,lineNumber:166}},i.createElement("header",{className:"dialog-header",__source:{fileName:ei,lineNumber:167}},i.createElement("h1",{className:"dialog-title",__source:{fileName:ei,lineNumber:168}},Object(o.a)("Delete password for $1?",[t||e.origin]))),i.createElement("div",{className:"dialog-content",__source:{fileName:ei,lineNumber:172}},i.createElement("p",{__source:{fileName:ei,lineNumber:173}},Object(o.a)("Password for user “$1” on page “$2” will be removed.",[e.username,e.origin]))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:ei,lineNumber:179}},i.createElement("input",{type:"button",className:"primary",onClick:this.deleteSavedPassword,value:Object(o.a)("other","Delete"),autoFocus:!0,__source:{fileName:ei,lineNumber:180}}),i.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:ei,lineNumber:185}}))))});const t=Object(Ja.d)().passwords;this.state={savedPasswordsData:[],confirmation:!1,toRemove:null,siteFilter:"",passwordsVisible:!1,columns:t||Object(Ja.c)(si),sorting:{sortOrder:1,sortField:"manually",comparator:this.sortComparator}}}componentDidMount(){this.getSavedPassords()}render(){const{siteFilter:e}=this.state,t=e.toLowerCase(),a=this.state.savedPasswordsData.filter(e=>e.username.toLowerCase().includes(t)||e.origin.toLowerCase().includes(t));return i.createElement(v.a,{categoryTitle:Object(o.a)("Passwords"),filter:this.props.filter,className:"saved-passwords setting-group unlimited",__source:{fileName:ei,lineNumber:204}},this.state.confirmation&&this.renderDeleteConfirmationModal(),i.createElement("div",{className:"setting-group unlimited",__source:{fileName:ei,lineNumber:209}},i.createElement("div",{className:"setting-single",__source:{fileName:ei,lineNumber:210}},i.createElement("label",{__source:{fileName:ei,lineNumber:211}},i.createElement("input",{type:"checkbox",onChange:ii(l.kCredentialsEnableService),checked:this.props.prefValues[l.kCredentialsEnableService],__source:{fileName:ei,lineNumber:212}}),i.createElement("span",{__source:{fileName:ei,lineNumber:216}},Object(o.a)("Save Webpage Passwords")))),this.state.passwordsVisible&&i.createElement("div",{className:"setting-single",__source:{fileName:ei,lineNumber:221}},i.createElement("input",{type:"search",defaultValue:"",placeholder:Object(o.a)("Filter Passwords"),onChange:this.filterEntries,__source:{fileName:ei,lineNumber:222}})),this.state.passwordsVisible&&i.createElement("div",{className:"saved-passwords-tree",__source:{fileName:ei,lineNumber:232}},i.createElement(Za.a,{fields:si,fullsize:!0,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,keyAccess:0,manualSorting:!1,__source:{fileName:ei,lineNumber:233}}),i.createElement(Qa,{ref:this.passwordTree,sorting:this.state.sorting,columns:this.state.columns,onDelete:this.onAskToDelete,nodes:a,__source:{fileName:ei,lineNumber:244}})),0===a.length&&i.createElement("div",{className:"saved-passwords",__source:{fileName:ei,lineNumber:254}},e?Object(o.a)("Query “$1” matches no result.",[e]):Object(o.a)("No saved passwords found.")),a.length>0&&i.createElement("div",{className:"setting-single",__source:{fileName:ei,lineNumber:263}},i.createElement("input",{type:"button",onClick:this.togglePasswordList,value:this.state.passwordsVisible?Object(o.a)("Hide Passwords"):Object(o.a)("Show Saved Passwords"),__source:{fileName:ei,lineNumber:264}}))))}}var ri=Object(_.a)(ni,ai),oi=a(984),li=a(18),ci=a.n(li),di=a(119),ui=a(114),hi="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorPicker.jsx";function mi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pi extends i.Component{constructor(e){super(e),mi(this,"handleClickOutside",e=>{this.props.hide(this.props.name,e)}),mi(this,"_abort",()=>{this.props.setColor(ci()(this.state.originalColor),this.props.name),this.props.hide(this.props.name)}),mi(this,"getColorFromPlot",e=>{const t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top,s=(t.height-i)/t.height,n=a/t.width;n>1||n<0||s>1||s<0?this.setState({dragging:!1}):this.setState({s:n,v:s},()=>{const e=ci.a.hsv(this.state.h,n,s);this.props.setColor(e,this.props.name,!0)})}),mi(this,"startPlotMove",e=>{this.getColorFromPlot(e),this.setState({dragging:!0})}),mi(this,"plotMove",e=>{this.state.dragging&&this.getColorFromPlot(e)}),mi(this,"stopPlotMove",()=>{this.setState({dragging:!1})}),mi(this,"onPlotRecticleKeyDown",e=>{if("Enter"===e.key||"Tab"===e.key&&e.shiftKey)return this.props.hide(this.props.name),void e.preventDefault();if("Escape"===e.key)return e.preventDefault(),void this._abort();if("ArrowUp"===e.key||"ArrowRight"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key){e.preventDefault();const t=e.shiftKey?10:1;let a=this.state.s,i=this.state.v;if("ArrowUp"===e.key?i+=.01*t:"ArrowDown"===e.key?i-=.01*t:"ArrowRight"===e.key?a+=.01*t:"ArrowLeft"===e.key&&(a-=.01*t),a>1||a<0||i>1||i<0)return;this.setState({s:a,v:i},()=>{const e=ci.a.hsv(this.state.h,a,i);this.props.setColor(e,this.props.name)})}}),mi(this,"onHueSliderChange",e=>{this.setState({h:e.currentTarget.value},()=>{const e=ci.a.hsv(this.state.h,this.state.s,this.state.v);this.props.setColor(e,this.props.name)})}),mi(this,"onSystemPickerChange",e=>{const t=ci()(e.currentTarget.value);this.setState({h:t.get("hsv.h"),s:t.get("hsv.s"),v:t.get("hsv.v")},()=>{this.props.setColor(t,this.props.name,!0)})}),mi(this,"onSystemPickerKeyDown",e=>{"Escape"===e.key?(e.preventDefault(),this._abort()):"Tab"!==e.key||e.shiftKey||this.props.hide(this.props.name)});const t=ci()(this.props.color),a=t.get("hsv.h");this.state={dragging:!1,originalColor:this.props.color,h:Number.isNaN(a)?0:a,s:t.get("hsv.s"),v:t.get("hsv.v")}}componentDidMount(){this.context.addEventListener("mouseup",this.stopPlotMove),this.refs.reticle.focus()}shouldComponentUpdate(e,t){if(!Object(ui.a)(this.state,t))return!0;if(this.props.name!==e.name)return!0;if(this.props.color!==e.color){const t=ci.a.hsv(this.state.h,this.state.s,this.state.v);if(!Object(ui.a)(t.hex(),e.color))return!0}return!1}componentWillUnmount(){this.context.removeEventListener("mouseup",this.stopPlotMove)}render(){if(!this.props.name||!this.props.color)return null;const e=ci.a.hsv(this.state.h,this.state.s,this.state.v),t=128-128*this.state.v,a=`translateX(${128*this.state.s}px)`+`translateY(${t}px)`;return i.createElement("div",{className:`colorpicker ignore-onclickoutside-${this.props.name}`,__source:{fileName:hi,lineNumber:208}},i.createElement("div",{className:"colorpicker-plot",onMouseDown:this.startPlotMove,onMouseMove:this.plotMove,style:{backgroundColor:ci.a.hsv(this.state.h,1,1).hex()},__source:{fileName:hi,lineNumber:209}},i.createElement("button",{ref:"reticle",className:"colorpicker-plot-reticle",onKeyDown:this.onPlotRecticleKeyDown,style:{transform:a},__source:{fileName:hi,lineNumber:213}})),i.createElement("input",{type:"range",className:"rangeHue",min:0,max:359,value:this.state.h,onMouseDown:this.onHueSliderChange,onChange:this.onHueSliderChange,__source:{fileName:hi,lineNumber:219}}),i.createElement("input",{type:"color",title:Object(o.a)("Show system color picker"),className:"colorpicker-system",value:e.hex(),onKeyDown:this.onSystemPickerKeyDown,onChange:this.onSystemPickerChange,__source:{fileName:hi,lineNumber:227}}))}}mi(pi,"contextType",R.a);var gi=Object(di.a)(pi),bi=a(568),fi=a(35),_i=a(331),Ni="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\VivaldiDropdown.jsx";function vi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ei extends i.Component{constructor(...e){super(...e),vi(this,"state",{isExpanded:!0===this.props.isExpanded||!1}),vi(this,"handleClickOutside",e=>{this.setState({isExpanded:!1})}),vi(this,"onItemClicked",e=>{this.props.onItemClicked(e.id),this.setState({isExpanded:!1})}),vi(this,"collapse",()=>{this.state.isExpanded&&("function"==typeof this.props.onClose&&this.props.onClose(),this.setState({isExpanded:!1}))}),vi(this,"expand",e=>{e&&(e.preventDefault(),this.setState(e=>({isExpanded:!e.isExpanded})))}),vi(this,"isExpanded",()=>this.state.isExpanded),vi(this,"renderDefaultValue",()=>{let e;const{items:t,itemField:a,value:s}=this.props;Object(fi.default)(t)&&t.length>0&&(e=Object(_i.a)(t,e=>{if(e[a]===s)return e}));let n=i.createElement("a",{tabIndex:"0",onFocusout:"",onClick:this.expand,__source:{fileName:Ni,lineNumber:92}},Object(o.a)("Select"));return e&&(n=i.createElement("a",{tabIndex:"0",onFocusout:"",onClick:this.expand,__source:{fileName:Ni,lineNumber:98}},e[this.props.displayField])),i.createElement("div",{className:"iconmenu-header",key:"iconmenu",__source:{fileName:Ni,lineNumber:105}},n)})}shouldComponentUpdate(e,t){return!Object(ui.a)(this.state,t)||!Object(ui.a)(this.props,e)}render(){const e="search"===this.props.type,t=e?Be.ib:Be.tc;return i.createElement(i.Fragment,null,this.props.hideTrigger&&this.renderDefaultValue(),i.createElement("button",{disabled:this.props.disabled,onClick:this.expand,tooltip:this.props.tooltip?this.props.tooltip:e?Object(o.a)("Change search engine"):Object(o.a)("Show search history"),dangerouslySetInnerHTML:{__html:t},ref:this.props.buttonRef,tabIndex:this.props.tabIndex,__source:{fileName:Ni,lineNumber:120}}),this.state.isExpanded&&i.createElement(bi.a,{key:"menu",items:this.props.items,minWidth:this.props.minWidth,onClosed:this.collapse,onItemActivated:this.onItemClicked,__source:{fileName:Ni,lineNumber:133}}))}}var wi=Object(di.a)(Ei),Si=a(183),Ci="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\ColorEditor.jsx";function ki(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const yi=/^([0-9a-f]{3}){1,2}$/i;class Oi extends s.a.Component{constructor(e){super(e),ki(this,"createColorIcon",e=>`<svg width="16" height="16" viewBox="0 0 16 16">\n      <rect x="0" y="0" width="16" height="16" rx="2" ry="2" fill="#${e}" />\n    </svg>`),ki(this,"hexInputEvents",e=>{let t=e.currentTarget.value;if("#"===t.charAt(0)&&(t=t.substring(1)),t.length>6&&(t=t.substring(0,6)),this.setState({color:t}),6===t.length){const e=ci()(t);e&&this.props.setColor(e,this.props.colorKey)}}),ki(this,"toggleColorPicker",()=>{this.setState(e=>({isPickerVisible:!e.isPickerVisible}))}),ki(this,"hideColorPicker",(e,t)=>{t.target!==this.refs.colorToggle&&(t.stopPropagation(),this.setState({isPickerVisible:!1}),this.refs.colorToggle.focus())}),ki(this,"onColorPicked",(e,t,a=!1)=>{this.setState({color:e.hex().substring(1)}),a?this.debouncedSetColor(e,t):this.props.setColor(e,t)}),ki(this,"onDropdownColorSelected",e=>{const t=ci()(e);t&&(this.setState({color:t.hex().substring(1)}),this.props.setColor(t,this.props.colorKey))}),this.state={isPickerVisible:!1,color:e.colorValue.substring(1)},this.debouncedSetColor=Object(Si.a)(this.props.setColor,100,{leading:!1}),e.predefinedColors&&(this.dropdownColors=e.predefinedColors.map(e=>({type:"Normal",name:e.name,iconSVG:this.createColorIcon(e.value),noPrettifying:!0,id:e.value})))}render(){const e=this.props.colorKey,t=this.props.predefinedColors&&this.props.predefinedColors.length>0;let{color:a}=this.state;return yi.test(a)||(a=this.props.colorValue.replace("#","")),s.a.createElement("div",{className:Ke()({"color-editor":!0,"with-dropdown":t}),__source:{fileName:Ci,lineNumber:130}},this.props.label&&s.a.createElement("label",{htmlFor:e,className:"color-name",__source:{fileName:Ci,lineNumber:135}},this.props.label),s.a.createElement("div",{className:"color-picker-container",__source:{fileName:Ci,lineNumber:140}},s.a.createElement("button",{className:"color-preview",disabled:this.props.disabled,tabIndex:0,ref:"colorToggle",onClick:this.toggleColorPicker,style:{backgroundColor:`#${a}`},__source:{fileName:Ci,lineNumber:141}}),this.state.isPickerVisible&&s.a.createElement(gi,{key:e,name:e,color:`#${a}`,setColor:this.onColorPicked,hide:this.hideColorPicker,__source:{fileName:Ci,lineNumber:150}}),t&&s.a.createElement(wi,{disabled:this.props.disabled,items:this.dropdownColors,onItemClicked:this.onDropdownColorSelected,outsideClickIgnoreClass:"menu",tooltip:Object(o.a)("Choose a Color"),value:a,__source:{fileName:Ci,lineNumber:159}})),s.a.createElement("input",{type:"text",id:e,disabled:this.props.disabled,value:this.state.color,spellCheck:"false",className:"color-hex",onChange:this.hexInputEvents,__source:{fileName:Ci,lineNumber:169}}))}}var Ai=Oi,Ti=a(546),Ii="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startpage\\StartPageBackground.jsx";function Di(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Pi=[l.kSystemHasDesktopWallpaperProtocol,l.kStartpageBackgroundColor,l.kStartpageBackgroundColorCustom,l.kStartpageImageEnable,l.kStartpageImagePath,l.kStartpageImagePathCustom],xi={"#EDEEF2":Object(o.a)("background","Light"),"#212121":Object(o.a)("background","Dark"),"#BBDFEF":Object(o.a)("background","Blue"),"#fce370":Object(o.a)("background","Yellow"),"#a4edd9":Object(o.a)("background","Green"),"#ffb6c9":Object(o.a)("background","Pink")},Mi={"aurora_light.webp":Object(o.a)("Aurora Light"),"aurora_dark.jpg":Object(o.a)("Aurora Dark"),"bg.webp":Object(o.a)("Vivaldi")},Li={"bg_alt_4.webp":Object(o.a)("Beach"),"bg_alt_3.webp":Object(o.a)("Flowers"),"bg_water.webp":Object(o.a)("Water")},ji={"bg_soft_lights.webp":Object(o.a)("Soft Lights"),"bg_abstract_blue_clouds.webp":Object(o.a)("Blue clouds"),"bg_alt_7.jpg":Object(o.a)("Human"),"bg_alt_1.jpg":Object(o.a)("Pink Cloud"),"bg_alt_5.jpg":Object(o.a)("Subtle"),"bg_alt_6.webp":Object(o.a)("Blueprint")},Bi={"bg_animals_bird_1.webp":Object(o.a)("Bird"),"bg_animals_cat_1.webp":Object(o.a)("Cat"),"bg_animals_dog_1.webp":Object(o.a)("Dog"),"bg_animals_fish_1.webp":Object(o.a)("Fish"),"bg_animals_lizard_1.webp":Object(o.a)("Lizard")},Ri={...xi,...Mi,...Li,...ji,...Bi,"Custom Background Image":Object(o.a)("Custom Background Image"),"Custom Background Color":Object(o.a)("Custom Background Color")},Fi=[{key:"colors",name:Object(o.a)("Colors"),content:xi},{key:"vivaldi",name:Object(o.a)("Vivaldi"),content:Mi},{key:"nature",name:Object(o.a)("Nature"),content:Li},{key:"abstract",name:Object(o.a)("Abstract"),content:ji},{key:"animals",name:Object(o.a)("Animals"),content:Bi},{key:"custom",name:Object(o.a)("Custom")}];class Ui extends s.a.PureComponent{constructor(e){super(e),Di(this,"initialListIndex",0),Di(this,"setBackgroundImage",e=>{n.a.set(l.kStartpageImageEnable,!0),["user_defined","desktop_image"].includes(e)?n.a.set(l.kStartpageImagePath,e):n.a.set(l.kStartpageImagePath,`../resources/${e}`)}),Di(this,"selectLocalBackgroundImage",e=>{D.a.utilities.selectLocalImage({title:Object(o.a)("Select Background Image"),preferencePath:l.kStartpageImagePathCustom},()=>{this.setBackgroundImage("user_defined")})}),Di(this,"setBackgroundColor",e=>{n.a.set(l.kStartpageBackgroundColor,e),n.a.set(l.kStartpageImageEnable,!1)}),Di(this,"setBackgroundColorCustom",e=>{n.a.set(l.kStartpageBackgroundColorCustom,e),n.a.set(l.kStartpageBackgroundColor,"user_defined"),n.a.set(l.kStartpageImageEnable,!1)}),Di(this,"handleColorClick",()=>{this.refs.bgColorPicker.click()}),Di(this,"handleImageClick",()=>{this.refs.bgImagePicker.click()}),Di(this,"toggleColorPicker",()=>{this.setState(e=>({isPickerVisible:!e.isPickerVisible}))}),Di(this,"hideColorPicker",(e,t)=>{t.target!==this.refs.colorToggle&&(t.stopPropagation(),this.setState({isPickerVisible:!1}),this.refs.colorToggle.focus())}),Di(this,"renderBackgroundListItem",e=>s.a.createElement("div",{className:"item-title",__source:{fileName:Ii,lineNumber:219}},e.name)),Di(this,"renderImageContent",(e,t)=>s.a.createElement(s.a.Fragment,null,Object.keys(e).map(e=>{const a=`../resources/${e}`;return s.a.createElement("button",{key:e,title:t[e],className:Ke()("selectbox",{"selectbox-selected":a===this.props.prefValues[l.kStartpageImagePath]}),onClick:()=>this.setBackgroundImage(e),__source:{fileName:Ii,lineNumber:229}},s.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${a})`},__source:{fileName:Ii,lineNumber:237}},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Ii,lineNumber:240}},s.a.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Ii,lineNumber:242}}))),s.a.createElement("div",{className:"selectbox-title",__source:{fileName:Ii,lineNumber:245}},t[e]))}))),Di(this,"renderColorContent",(e,t)=>s.a.createElement(s.a.Fragment,null,Object.keys(e).map(e=>s.a.createElement("button",{key:e,title:t[e],className:Ke()("selectbox",{"selectbox-selected":this.props.prefValues[l.kStartpageBackgroundColor].toLowerCase()===e.toLowerCase()}),onClick:this.setBackgroundColor.bind(this,e),__source:{fileName:Ii,lineNumber:256}},s.a.createElement("div",{className:"selectbox-image",style:{backgroundColor:e},__source:{fileName:Ii,lineNumber:264}},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Ii,lineNumber:266}},s.a.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Ii,lineNumber:268}}))),s.a.createElement("div",{className:"selectbox-title",__source:{fileName:Ii,lineNumber:271}},t[e]))))),Di(this,"renderCustomContent",e=>{const t=this.props.prefValues[l.kStartpageImagePath],a=this.props.prefValues[l.kStartpageImagePathCustom],i=this.props.prefValues[l.kStartpageImageEnable],n=this.props.prefValues[l.kStartpageBackgroundColor],r=this.props.prefValues[l.kStartpageBackgroundColorCustom];return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:Ii,lineNumber:288}},s.a.createElement("h3",{__source:{fileName:Ii,lineNumber:290}},Object(o.a)("Custom Color")),s.a.createElement("button",{title:e["Custom Background Color"],className:Ke()("selectbox",{"selectbox-selected":"user_defined"===n&&!i}),onClick:()=>this.setBackgroundColorCustom(r),__source:{fileName:Ii,lineNumber:291}},s.a.createElement("div",{className:"selectbox-image",style:{backgroundColor:r},__source:{fileName:Ii,lineNumber:298}},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Ii,lineNumber:300}},s.a.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Ii,lineNumber:302}})))),s.a.createElement(Ai,{colorKey:"Background Color",colorValue:r,setColor:e=>this.setBackgroundColorCustom(e.hex()),__source:{fileName:Ii,lineNumber:307}})),s.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:Ii,lineNumber:314}},s.a.createElement("h3",{__source:{fileName:Ii,lineNumber:315}},Object(o.a)("Custom Image")),s.a.createElement("button",{title:e["Custom Background Image"],className:Ke()("selectbox",{"selectbox-selected":"user_defined"===t&&i}),onClick:()=>this.setBackgroundImage("user_defined"),__source:{fileName:Ii,lineNumber:316}},s.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:`url(${a})`},__source:{fileName:Ii,lineNumber:324}},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Ii,lineNumber:326}},s.a.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Ii,lineNumber:328}})))),s.a.createElement("label",{__source:{fileName:Ii,lineNumber:333}},s.a.createElement("input",{title:Object(o.a)("Locate an image to use as background"),value:Object(o.a)("Open Image..."),type:"button",onClick:this.handleImageClick,__source:{fileName:Ii,lineNumber:334}}))),this.props.prefValues[l.kSystemHasDesktopWallpaperProtocol]&&s.a.createElement("div",{className:"settings-startpage-custom",__source:{fileName:Ii,lineNumber:343}},s.a.createElement("h3",{__source:{fileName:Ii,lineNumber:344}},Object(o.a)("Desktop Wallpaper")),s.a.createElement("button",{title:Object(o.a)("Use the operating system wallpaper as background"),className:Ke()("selectbox",{"selectbox-selected":"desktop_image"===t&&i}),onClick:()=>this.setBackgroundImage("desktop_image"),__source:{fileName:Ii,lineNumber:345}},s.a.createElement("div",{className:"selectbox-image",style:{backgroundImage:"url(chrome://vivaldi-data/desktop-image/0)"},__source:{fileName:Ii,lineNumber:353}},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Ii,lineNumber:357}},s.a.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Ii,lineNumber:359}}))))))}),Di(this,"renderBackgroundContent",(e,t)=>{const a=Fi[e],i=a&&a.content,n=a&&a.key;return i?"colors"===n?s.a.createElement("div",{className:"detail",__source:{fileName:Ii,lineNumber:375}},s.a.createElement("div",{className:"detail-content",__source:{fileName:Ii,lineNumber:376}},this.renderColorContent(i,t))):s.a.createElement("div",{className:"detail",__source:{fileName:Ii,lineNumber:381}},s.a.createElement("div",{className:"detail-content",__source:{fileName:Ii,lineNumber:382}},this.renderImageContent(i,t))):s.a.createElement("div",{className:"detail",__source:{fileName:Ii,lineNumber:388}},s.a.createElement("div",{className:"detail-content",__source:{fileName:Ii,lineNumber:389}},this.renderCustomContent(t)))});let t=this.props.prefValues[l.kStartpageImagePath];t=["user_defined","desktop_image"].includes(t)?t:t.substr(13);const a=this.props.prefValues[l.kStartpageImageEnable],i=this.props.prefValues[l.kStartpageBackgroundColor],r=this.props.prefValues[l.kStartpageBackgroundColorCustom];a&&["user_defined","desktop_image"].includes(t)||!a&&i===r?this.initialListIndex=Fi.findIndex(e=>"custom"===e.key):this.initialListIndex=a?Fi.findIndex(e=>e.content&&Object.keys(e.content).includes(t)):Fi.findIndex(e=>"colors"===e.key),this.state={isPickerVisible:!1}}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ii,lineNumber:399}},s.a.createElement("div",{className:"settings-startpage settings-group unlimited",__source:{fileName:Ii,lineNumber:400}},s.a.createElement(Ti.a,{style:{height:300},items:Fi.map(e=>({key:e.key,name:e.name})),masterLayout:1,initialSelectedIndex:this.initialListIndex,renderListItem:this.renderBackgroundListItem,renderContent:this.renderBackgroundContent,contentStrings:Ri,filter:this.props.filter,subtitle:Object(o.a)("Start Page Background"),__source:{fileName:Ii,lineNumber:401}}),s.a.createElement("input",{title:Object(o.a)("Select File..."),ref:"bgImagePicker",style:{position:"absolute",visibility:"hidden"},onClick:this.selectLocalBackgroundImage.bind(this),__source:{fileName:Ii,lineNumber:417}})))}}var Wi=Object(_.a)(Ui,Pi),Hi="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startpage\\StartPage.jsx";function Vi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gi=[l.kStartpageNavigation,l.kSystemHasDesktopWallpaperProtocol,l.kStartpageBackgroundColor,l.kStartpageBackgroundColorCustom,l.kStartpageImageEnable,l.kStartpageImagePath,l.kStartpageImagePathCustom,l.kStartpageImageRepeat,l.kStartpageImageStretch,l.kStartpageSpeedDialAddButtonVisible,l.kStartpageSpeedDialAllowDnd,l.kStartpageSpeedDialColumns,l.kStartpageSpeedDialControlsVisible,l.kStartpageSpeedDialDeleteVisible,l.kStartpageSpeedDialTitlesVisible,l.kStartpageSpeedDialWidth],Ki=n.a.getEventHandler;class zi extends s.a.PureComponent{constructor(...e){super(...e),Vi(this,"setStartpageImageStretch",e=>{const t=e.target.checked;n.a.set(l.kStartpageImageStretch,t),n.a.set(l.kStartpageImageRepeat,!t&&this.props.prefValues[l.kStartpageImageRepeat])}),Vi(this,"setStartpageImageRepeat",e=>{const t=e.target.checked;n.a.set(l.kStartpageImageRepeat,t),n.a.set(l.kStartpageImageStretch,!t&&this.props.prefValues[l.kStartpageImageStretch])})}render(){const{prefValues:e}=this.props;return s.a.createElement("div",{__source:{fileName:Hi,lineNumber:77}},s.a.createElement(v.a,{categoryTitle:Object(o.a)("verb","Start Page"),filter:this.props.filter,__source:{fileName:Hi,lineNumber:78}},s.a.createElement(Wi,{filter:this.props.filter,__source:{fileName:Hi,lineNumber:82}}),s.a.createElement("div",{className:"setting-group unlimited pad-top",__source:{fileName:Hi,lineNumber:84}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Hi,lineNumber:86}},s.a.createElement("h3",{__source:{fileName:Hi,lineNumber:87}},Object(o.a)("Background Image Options")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:88}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:89}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kStartpageImageEnable],checked:e[l.kStartpageImageStretch],onChange:this.setStartpageImageStretch,__source:{fileName:Hi,lineNumber:90}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:94}},Object(o.a)("Scale to Fit")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:97}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:98}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kStartpageImageEnable],checked:e[l.kStartpageImageRepeat],onChange:this.setStartpageImageRepeat,__source:{fileName:Hi,lineNumber:99}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:103}},Object(o.a)("radio","Repeat"))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:Hi,lineNumber:108}},s.a.createElement("h3",{__source:{fileName:Hi,lineNumber:109}},Object(o.a)("Start Page Navigation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:110}},s.a.createElement(m.a,{name:"StartPageNavigation",value:this.props.prefValues[l.kStartpageNavigation],onChange:Ki(l.kStartpageNavigation),__source:{fileName:Hi,lineNumber:111}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:115}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:116}},s.a.createElement("input",{type:"radio",value:"on",__source:{fileName:Hi,lineNumber:117}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:118}},Object(o.a)("Show on Internal Pages")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:121}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:122}},s.a.createElement("input",{type:"radio",value:"speed_dial_only",__source:{fileName:Hi,lineNumber:123}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:124}},Object(o.a)("Show on Speed Dial Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:127}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:128}},s.a.createElement("input",{type:"radio",value:"off",__source:{fileName:Hi,lineNumber:129}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:130}},Object(o.a)("Hide"))))))))),s.a.createElement(v.a,{categoryTitle:Object(o.a)("Speed Dial"),filter:this.props.filter,__source:{fileName:Hi,lineNumber:139}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Hi,lineNumber:140}},s.a.createElement("h3",{__source:{fileName:Hi,lineNumber:141}},Object(o.a)("Speed Dial Appearance")),s.a.createElement(m.a,{name:"SpeedDialTitles",value:this.props.prefValues[l.kStartpageSpeedDialTitlesVisible],onChange:Ki(l.kStartpageSpeedDialTitlesVisible),__source:{fileName:Hi,lineNumber:143}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:147}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:148}},s.a.createElement("input",{type:"radio",value:"always",__source:{fileName:Hi,lineNumber:149}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:150}},Object(o.a)("Always Show Title")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:153}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:154}},s.a.createElement("input",{type:"radio",value:"hover",__source:{fileName:Hi,lineNumber:155}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:156}},Object(o.a)("Show Title when Needed")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:159}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:160}},s.a.createElement("input",{type:"radio",value:"never",__source:{fileName:Hi,lineNumber:161}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:162}},Object(o.a)("Hide Title"))))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Hi,lineNumber:167}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:168}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kStartpageSpeedDialDeleteVisible],onChange:Ki(l.kStartpageSpeedDialDeleteVisible),__source:{fileName:Hi,lineNumber:169}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:172}},Object(o.a)("Show Delete Button")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:175}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:176}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kStartpageSpeedDialControlsVisible],onChange:Ki(l.kStartpageSpeedDialControlsVisible),__source:{fileName:Hi,lineNumber:177}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:180}},Object(o.a)("Show Thumbnail Control Buttons")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:183}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:184}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kStartpageSpeedDialAddButtonVisible],onChange:Ki(l.kStartpageSpeedDialAddButtonVisible),__source:{fileName:Hi,lineNumber:185}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:188}},Object(o.a)("Show “Add” button"))),s.a.createElement("p",{className:"info",__source:{fileName:Hi,lineNumber:190}},Object(o.a)("When disabled, new bookmarks can be added by double-clicking the Speed Dial background.")))),s.a.createElement("div",{className:"setting-group",__source:{fileName:Hi,lineNumber:194}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Hi,lineNumber:195}},s.a.createElement("h3",{__source:{fileName:Hi,lineNumber:196}},Object(o.a)("Maximum Columns")),s.a.createElement("select",{className:"max-columns",value:this.props.prefValues[l.kStartpageSpeedDialColumns],onChange:Ki(l.kStartpageSpeedDialColumns),title:Object(o.a)("Maximum number of Speed Dial columns"),__source:{fileName:Hi,lineNumber:197}},s.a.createElement("option",{value:1,__source:{fileName:Hi,lineNumber:201}},"1"),s.a.createElement("option",{value:2,__source:{fileName:Hi,lineNumber:202}},"2"),s.a.createElement("option",{value:3,__source:{fileName:Hi,lineNumber:203}},"3"),s.a.createElement("option",{value:4,__source:{fileName:Hi,lineNumber:204}},"4"),s.a.createElement("option",{value:5,__source:{fileName:Hi,lineNumber:205}},"5"),s.a.createElement("option",{value:6,__source:{fileName:Hi,lineNumber:206}},"6"),s.a.createElement("option",{value:7,__source:{fileName:Hi,lineNumber:207}},"7"),s.a.createElement("option",{value:8,__source:{fileName:Hi,lineNumber:208}},"8"),s.a.createElement("option",{value:10,__source:{fileName:Hi,lineNumber:209}},"10"),s.a.createElement("option",{value:12,__source:{fileName:Hi,lineNumber:210}},"12"),s.a.createElement("option",{value:99,__source:{fileName:Hi,lineNumber:212}},Object(o.a)("Unlimited")))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Hi,lineNumber:216}},s.a.createElement("h3",{__source:{fileName:Hi,lineNumber:217}},Object(o.a)("Speed Dial Thumbnail Size")),s.a.createElement("select",{className:"max-columns",value:this.props.prefValues[l.kStartpageSpeedDialWidth],onChange:Ki(l.kStartpageSpeedDialWidth),__source:{fileName:Hi,lineNumber:218}},s.a.createElement("option",{value:120,__source:{fileName:Hi,lineNumber:221}},Object(o.a)("Tiny")),s.a.createElement("option",{value:170,__source:{fileName:Hi,lineNumber:222}},Object(o.a)("Small")),s.a.createElement("option",{value:220,__source:{fileName:Hi,lineNumber:223}},Object(o.a)("other","Default")),s.a.createElement("option",{value:270,__source:{fileName:Hi,lineNumber:224}},Object(o.a)("Large")),s.a.createElement("option",{value:320,__source:{fileName:Hi,lineNumber:225}},Object(o.a)("Huge")),s.a.createElement("option",{value:-1,__source:{fileName:Hi,lineNumber:227}},Object(o.a)("Scale to Fit Columns")))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Hi,lineNumber:231}},s.a.createElement("label",{__source:{fileName:Hi,lineNumber:232}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kStartpageSpeedDialAllowDnd],onChange:Ki(l.kStartpageSpeedDialAllowDnd),__source:{fileName:Hi,lineNumber:233}}),s.a.createElement("span",{__source:{fileName:Hi,lineNumber:236}},Object(o.a)("Allow Drag and Drop Reordering")))))))}}var Yi=Object(_.a)(zi,Gi),$i="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\CloseWindowConfirmation.jsx";const Qi=n.a.getEventHandler,Zi=[l.kWindowsShowWindowCloseConfirmationDialog];class qi extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:$i,lineNumber:25}},s.a.createElement("div",{className:"setting-group",__source:{fileName:$i,lineNumber:26}},s.a.createElement("h3",{__source:{fileName:$i,lineNumber:27}},Object(o.a)("Close Window Confirmation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:$i,lineNumber:28}},s.a.createElement("label",{__source:{fileName:$i,lineNumber:29}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWindowsShowWindowCloseConfirmationDialog],onChange:Qi(l.kWindowsShowWindowCloseConfirmationDialog),__source:{fileName:$i,lineNumber:30}}),s.a.createElement("span",{__source:{fileName:$i,lineNumber:35}},Object(o.a)("Show Close Window Confirmation Dialog"))))))}}var Xi=Object(_.a)(qi,Zi),Ji="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\ExitConfirmation.jsx";const es=n.a.getEventHandler,ts=[l.kSystemShowExitConfirmationDialog];class as extends s.a.Component{renderMacQuitConfirmation(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ji,lineNumber:31}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ji,lineNumber:32}},s.a.createElement("h3",{__source:{fileName:Ji,lineNumber:33}},Object(o.a)("Quit Confirmation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ji,lineNumber:34}},s.a.createElement("label",{__source:{fileName:Ji,lineNumber:35}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kConfirmToQuitEnabled],onChange:es(l.kConfirmToQuitEnabled),__source:{fileName:Ji,lineNumber:36}}),s.a.createElement("span",{__source:{fileName:Ji,lineNumber:41}},Object(o.a)("Show Quit Confirmation Dialog"))))))}renderExitConfirmation(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ji,lineNumber:51}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ji,lineNumber:52}},s.a.createElement("h3",{__source:{fileName:Ji,lineNumber:53}},Object(o.a)("Exit Confirmation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ji,lineNumber:54}},s.a.createElement("label",{__source:{fileName:Ji,lineNumber:55}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kSystemShowExitConfirmationDialog],onChange:es(l.kSystemShowExitConfirmationDialog),__source:{fileName:Ji,lineNumber:56}}),s.a.createElement("span",{__source:{fileName:Ji,lineNumber:61}},Object(o.a)("Show Exit Confirmation Dialog"))))))}render(){return this.renderExitConfirmation()}}var is=Object(_.a)(as,ts),ss="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\HomePageSetting.jsx";function ns(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const rs=[l.kHomepage,l.kHomepageCache];class os extends s.a.Component{constructor(...e){super(...e),ns(this,"state",{customHomepage:this.props.prefValues[l.kHomepageCache]}),ns(this,"saveHomePage",({currentTarget:e})=>{this.setState({customHomepage:e.value});const t=""!==e.value?Object(Ga.a)(e.value):e.value;n.a.set(l.kHomepage,t||"about:blank"),t!==Mt.l&&n.a.set(l.kHomepageCache,t)})}render(){const e=("about:blank"===this.props.prefValues[l.kHomepage]?"":this.props.prefValues[l.kHomepage])===Mt.l;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:ss,lineNumber:56}},s.a.createElement("div",{className:"setting-group homepage",__source:{fileName:ss,lineNumber:57}},s.a.createElement("h3",{__source:{fileName:ss,lineNumber:58}},Object(o.a)("noun","Homepage")),s.a.createElement("div",{className:"setting-single",__source:{fileName:ss,lineNumber:60}},s.a.createElement("label",{__source:{fileName:ss,lineNumber:61}},s.a.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:e,value:Mt.l,__source:{fileName:ss,lineNumber:62}}),s.a.createElement("span",{__source:{fileName:ss,lineNumber:68}},Object(o.a)("other","Start Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:ss,lineNumber:72}},s.a.createElement("label",{__source:{fileName:ss,lineNumber:73}},s.a.createElement("input",{type:"radio",name:"startpage_url",onChange:this.saveHomePage,checked:!e,value:this.props.prefValues[l.kHomepageCache],__source:{fileName:ss,lineNumber:74}}),s.a.createElement("span",{__source:{fileName:ss,lineNumber:80}},Object(o.a)("Specific Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:ss,lineNumber:84}},s.a.createElement("input",{type:"text",placeholder:Object(o.a)("Address"),disabled:e,onChange:this.saveHomePage,value:this.state.customHomepage,__source:{fileName:ss,lineNumber:85}}))))}}var ls=Object(_.a)(os,rs),cs=a(103),ds=a(50),us="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSessionItem.jsx";class hs extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{var t=this.props.urlItem;t.url=e.target.value,this.props.onSave(t)},(a="handleUrlChange")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:us,lineNumber:24}},s.a.createElement("div",{className:"setting-single",__source:{fileName:us,lineNumber:25}},s.a.createElement("input",{className:"edit",type:"text",value:this.props.urlItem.url,onChange:this.handleUrlChange,__source:{fileName:us,lineNumber:26}}),s.a.createElement("input",{type:"button",tabIndex:"-1",className:"circular clearkey",onClick:this.props.onDelete,title:Object(o.a)("Remove page"),__source:{fileName:us,lineNumber:29}})))}}var ms=hs,ps=a(20),gs="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SpecificSession.jsx";function bs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class fs extends s.a.Component{constructor(...e){super(...e),bs(this,"state",{STARTUP_SESSION_URLS:[],hasUrlInInput:!1}),bs(this,"handleInputChange",e=>{if(e.target.value.length>2?this.setState({hasUrlInInput:!0}):this.setState({hasUrlInInput:!1}),e.keyCode===ds.a.KEY_ESCAPE)e.target.value="",this.setState({hasUrlInInput:!1});else{if(e.keyCode!==ds.a.KEY_RETURN&&e.keyCode!==ds.a.KEY_ENTER)return;e.target.value.length>2&&this.addUrl()}}),bs(this,"saveChanges",()=>{for(var e=[],t=this.state.STARTUP_SESSION_URLS,a=0;a<t.length;a++)e.push(t[a].url);n.a.set(l.kURLsToRestoreOnStartup,e)}),bs(this,"addUrl",()=>{var e=this.refs.createUrlField.value.trim();-1===e.indexOf("://")&&(e="http://"+e),this.refs.createUrlField.value="",this.setState({hasUrlInInput:!1});var t=0;this.state.STARTUP_SESSION_URLS.length>0&&(t=Math.max.apply(Math,this.state.STARTUP_SESSION_URLS.map(e=>e.id?e.id:0))),this.state.STARTUP_SESSION_URLS.push({url:e,id:t+1}),this.saveChanges()}),bs(this,"save",e=>{this.setState(t=>{for(var a=t.STARTUP_SESSION_URLS,i=0;i<a.length;i++)if(a[i].id===e.id){var s=e.url;-1===s.indexOf(":")&&(s="http://"+s),a[i].url=s;break}return{STARTUP_SESSION_URLS:a}},()=>{this.saveChanges()})}),bs(this,"deleteUrl",e=>{this.setState(t=>{for(var a=t.STARTUP_SESSION_URLS,i=0;i<a.length;i++)if(a[i].url===e.url){a.splice(i,1);break}return{STARTUP_SESSION_URLS:a}},()=>{this.saveChanges()})}),bs(this,"useCurrentPages",()=>{F.default.tabs.query({windowType:"normal"},e=>{const t=e.map(e=>cs.a.tabToPage(e)).filter(e=>!ps.a.isInternalPage(e)).map((e,t)=>({id:t+1,url:e.get("url")}));this.setState({STARTUP_SESSION_URLS:t}),this.saveChanges()})})}UNSAFE_componentWillMount(){var e=St.a.get(l.kURLsToRestoreOnStartup).map((e,t)=>({url:e,id:t}));this.setState({STARTUP_SESSION_URLS:e})}render(){var e=this.state.STARTUP_SESSION_URLS.map(e=>s.a.createElement(ms,{urlItem:e,key:e.id,onDelete:this.deleteUrl.bind(this,e),onSave:this.save,filter:this.props.filter,__source:{fileName:gs,lineNumber:153}}));return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:gs,lineNumber:163}},s.a.createElement("div",{className:"setting-group setting-startup-specific-pages",__source:{fileName:gs,lineNumber:164}},s.a.createElement("h3",{__source:{fileName:gs,lineNumber:165}},Object(o.a)("Startup Pages")),e,s.a.createElement("div",{className:"setting-flexgroup",__source:{fileName:gs,lineNumber:168}},s.a.createElement("input",{type:"text",className:"setting-single-flex",ref:"createUrlField",value:this.props.url,onChange:this.handleInputChange,placeholder:Object(o.a)("Enter page URL"),__source:{fileName:gs,lineNumber:169}}),s.a.createElement("input",{type:"button",className:"setting-single-noflex",onClick:this.addUrl,disabled:!this.state.hasUrlInInput,value:Object(o.a)("Add"),__source:{fileName:gs,lineNumber:176}})),s.a.createElement("input",{type:"button",onClick:this.useCurrentPages,value:Object(o.a)("Use Current Pages"),__source:{fileName:gs,lineNumber:183}})))}}var _s=fs,Ns="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettings.jsx";function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function Es(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ws=[l.kTabsAlwaysLoadPinnedAfterRestore,l.kTabsDeferLoadingAfterRestore],Ss=n.a.getEventHandler;class Cs extends s.a.PureComponent{constructor(...e){super(...e),Es(this,"state",{STARTUP_OPTIONS:"last"}),Es(this,"saveStartup",e=>{const t=e.target.value,a=St.a.get(l.kURLsToRestoreOnStartup);D.a.utilities.setStartupAction(t,a,e=>{this.setState({STARTUP_OPTIONS:e})})})}UNSAFE_componentWillMount(){D.a.utilities.getStartupAction(e=>{this.setState({STARTUP_OPTIONS:e})})}render(){var e="urls"===this.state.STARTUP_OPTIONS?s.a.createElement(_s,vs({},this.props,{__source:{fileName:Ns,lineNumber:59}})):null;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ns,lineNumber:62}},s.a.createElement("span",{__source:{fileName:Ns,lineNumber:63}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ns,lineNumber:64}},s.a.createElement("h3",{__source:{fileName:Ns,lineNumber:65}},Object(o.a)("Startup with")),s.a.createElement(m.a,{name:"startupSettings",value:this.state.STARTUP_OPTIONS,onChange:this.saveStartup,__source:{fileName:Ns,lineNumber:67}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Ns,lineNumber:70}},s.a.createElement("label",{__source:{fileName:Ns,lineNumber:71}},s.a.createElement("input",{type:"radio",value:"last",__source:{fileName:Ns,lineNumber:72}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:73}},Object(o.a)("Last Session")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ns,lineNumber:76}},s.a.createElement("label",{__source:{fileName:Ns,lineNumber:77}},s.a.createElement("input",{type:"radio",value:"homepage",__source:{fileName:Ns,lineNumber:78}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:79}},Object(o.a)("radio","Homepage")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ns,lineNumber:82}},s.a.createElement("label",{__source:{fileName:Ns,lineNumber:83}},s.a.createElement("input",{type:"radio",value:"speeddial",__source:{fileName:Ns,lineNumber:84}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:85}},Object(o.a)("radio","Start Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ns,lineNumber:88}},s.a.createElement("label",{__source:{fileName:Ns,lineNumber:89}},s.a.createElement("input",{type:"radio",value:"urls",__source:{fileName:Ns,lineNumber:90}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:91}},Object(o.a)("Specific Pages"))))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Ns,lineNumber:97}},s.a.createElement("label",{title:Object(o.a)("Wait to load restored session content until tab is activated."),__source:{fileName:Ns,lineNumber:98}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsDeferLoadingAfterRestore],onChange:Ss(l.kTabsDeferLoadingAfterRestore),__source:{fileName:Ns,lineNumber:100}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:104}},Object(o.a)("Lazy Load Restored Tabs")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Ns,lineNumber:108}},s.a.createElement("label",{title:Object(o.a)("Load pinned tabs before they are activated."),__source:{fileName:Ns,lineNumber:109}},s.a.createElement("input",{type:"checkbox",disabled:!this.props.prefValues[l.kTabsDeferLoadingAfterRestore],checked:this.props.prefValues[l.kTabsAlwaysLoadPinnedAfterRestore],onChange:Ss(l.kTabsAlwaysLoadPinnedAfterRestore),__source:{fileName:Ns,lineNumber:111}}),s.a.createElement("span",{__source:{fileName:Ns,lineNumber:118}},Object(o.a)("Always Load Pinned Tabs"))))),e))}}var ks=Object(_.a)(Cs,ws),ys="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupWelcome.jsx";const Os=[l.kWelcomeReadPages,l.kWelcomeSeenPages];class As extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=()=>{n.a.set(l.kWelcomeReadPages,[]),n.a.set(l.kWelcomeSeenPages,[])},(a="resetSeen")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const e=this.props.prefValues[l.kWelcomeReadPages].length>0,t=this.props.prefValues[l.kWelcomeSeenPages].length>0;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:ys,lineNumber:35}},s.a.createElement("div",{className:"setting-group",__source:{fileName:ys,lineNumber:36}},s.a.createElement("h3",{__source:{fileName:ys,lineNumber:37}},Object(o.a)("Welcome Page")),s.a.createElement("div",{className:"setting-single",__source:{fileName:ys,lineNumber:39}},s.a.createElement("label",{__source:{fileName:ys,lineNumber:40}},s.a.createElement("input",{type:"button",disabled:e+t===0,value:Object(o.a)("Reset Welcome Page"),onClick:this.resetSeen,__source:{fileName:ys,lineNumber:41}})))))}}Object(_.a)(As,Os);var Ts=a(544),Is="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\StartupSettingsSection.jsx";function Ds(){return(Ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class Ps extends i.Component{render(){return i.createElement(i.Fragment,null,i.createElement(v.a,{categoryTitle:Object(o.a)("Startup"),filter:this.props.filter,__source:{fileName:Is,lineNumber:19}},i.createElement(Ts.a,Ds({},this.props,{__source:{fileName:Is,lineNumber:22}})),i.createElement(ls,Ds({},this.props,{__source:{fileName:Is,lineNumber:23}})),i.createElement(ks,Ds({},this.props,{__source:{fileName:Is,lineNumber:24}})),!1),i.createElement(v.a,{key:"2",categoryTitle:Object(o.a)("title","Close and Exit"),filter:this.props.filter,__source:{fileName:Is,lineNumber:27}},i.createElement(is,Ds({},this.props,{__source:{fileName:Is,lineNumber:33}})),i.createElement(Xi,Ds({},this.props,{__source:{fileName:Is,lineNumber:35}}))))}}var xs=Ps,Ms=a(985),Ls="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabActivation.jsx";const js=n.a.getEventHandler,Bs=[l.kTabsActivationOnClose,l.kTabsActivationPreferRelated,l.kTabsAlignNext,l.kTabsDoubleClickClose,l.kTabsFocusWebview,l.kTabsBarPosition,l.kTabsNeverCloseLast];class Rs extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=()=>{const e=this.props.prefValues[l.kTabsBarPosition];return"top"===e||"bottom"===e},(a="isHorizontal")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const{prefValues:e}=this.props;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ls,lineNumber:43}},s.a.createElement("span",{__source:{fileName:Ls,lineNumber:44}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ls,lineNumber:45}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:46}},s.a.createElement("h3",{__source:{fileName:Ls,lineNumber:47}},Object(o.a)("Close Tab Activation")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:49}},s.a.createElement("label",{title:Object(o.a)("Activate tabs related by origin first"),__source:{fileName:Ls,lineNumber:50}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsActivationPreferRelated],onChange:js(l.kTabsActivationPreferRelated),__source:{fileName:Ls,lineNumber:51}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:55}},Object(o.a)("Always Activate Related Tab")))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Ls,lineNumber:59}},s.a.createElement(m.a,{name:"tabActivate",value:e[l.kTabsActivationOnClose],onChange:js(l.kTabsActivationOnClose),__source:{fileName:Ls,lineNumber:60}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:65}},s.a.createElement("label",{__source:{fileName:Ls,lineNumber:66}},s.a.createElement("input",{type:"radio",value:"activation_order",__source:{fileName:Ls,lineNumber:67}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:68}},Object(o.a)("Activate in Recently Used Order")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:72}},s.a.createElement("label",{__source:{fileName:Ls,lineNumber:73}},s.a.createElement("input",{type:"radio",value:"left",__source:{fileName:Ls,lineNumber:74}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:75}},this.isHorizontal()?Object(o.a)("Activate Left in Tab Order"):Object(o.a)("Activate Above in Tab Order")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:81}},s.a.createElement("label",{__source:{fileName:Ls,lineNumber:82}},s.a.createElement("input",{type:"radio",value:"right",__source:{fileName:Ls,lineNumber:83}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:84}},this.isHorizontal()?Object(o.a)("Activate Right in Tab Order"):Object(o.a)("Activate Below in Tab Order")))))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:Ls,lineNumber:94}},s.a.createElement("h3",{__source:{fileName:Ls,lineNumber:95}},Object(o.a)("Tab Handling")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:96}},s.a.createElement("label",{title:Object(o.a)("Align the close buttons to easily close multiple tabs"),__source:{fileName:Ls,lineNumber:97}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsAlignNext],onChange:js(l.kTabsAlignNext),__source:{fileName:Ls,lineNumber:99}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:103}},Object(o.a)("Align Next Close Button")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:107}},s.a.createElement("label",{__source:{fileName:Ls,lineNumber:108}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsDoubleClickClose],onChange:js(l.kTabsDoubleClickClose),__source:{fileName:Ls,lineNumber:109}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:113}},Object(o.a)("Close Tab on Double Click")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:117}},s.a.createElement("label",{title:Object(o.a)("Prevents window closing along with last tab."),__source:{fileName:Ls,lineNumber:118}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsNeverCloseLast],onChange:js(l.kTabsNeverCloseLast),__source:{fileName:Ls,lineNumber:119}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:122}},Object(o.a)("Don’t Close Window with Last Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ls,lineNumber:126}},s.a.createElement("label",{title:Object(o.a)("Focus page content instead of addressfield"),__source:{fileName:Ls,lineNumber:127}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsFocusWebview],onChange:js(l.kTabsFocusWebview),__source:{fileName:Ls,lineNumber:128}}),s.a.createElement("span",{__source:{fileName:Ls,lineNumber:131}},Object(o.a)("Focus Page Content on New Tab")))))))}}var Fs=Object(_.a)(Rs,Bs),Us="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabCycling.jsx";const Ws=n.a.getEventHandler,Hs=[l.kMouseWheelTabSwitch,l.kTabsCycleByRecentOrder,l.kTabsMinimize,l.kTabsVisualSwitchEnable,l.kTabsVisualSwitchListLayout];class Vs extends s.a.Component{render(){const e=this.props.prefValues;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Us,lineNumber:35}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Us,lineNumber:36}},s.a.createElement("h3",{htmlFor:"tabSelection",__source:{fileName:Us,lineNumber:37}},Object(o.a)("Tab Cycling")),s.a.createElement(m.a,{name:"tabCyclingOrder",value:this.props.prefValues[l.kTabsCycleByRecentOrder],onChange:Ws(l.kTabsCycleByRecentOrder,"convert"),__source:{fileName:Us,lineNumber:39}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Us,lineNumber:42}},s.a.createElement("label",{__source:{fileName:Us,lineNumber:43}},s.a.createElement("input",{type:"radio",value:"true",__source:{fileName:Us,lineNumber:44}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:45}},Object(o.a)("Cycle in Recently Used Order")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Us,lineNumber:48}},s.a.createElement("label",{__source:{fileName:Us,lineNumber:49}},s.a.createElement("input",{type:"radio",value:"false",__source:{fileName:Us,lineNumber:50}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:51}},Object(o.a)("Cycle in Tab Order"))))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:Us,lineNumber:56}},s.a.createElement("label",{__source:{fileName:Us,lineNumber:57}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsVisualSwitchEnable],onChange:Ws(l.kTabsVisualSwitchEnable),__source:{fileName:Us,lineNumber:58}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:61}},Object(o.a)("Show Tab Cycler")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:Us,lineNumber:65}},s.a.createElement("label",{__source:{fileName:Us,lineNumber:66}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsVisualSwitchListLayout],disabled:!this.props.prefValues[l.kTabsVisualSwitchEnable],onChange:Ws(l.kTabsVisualSwitchListLayout),__source:{fileName:Us,lineNumber:67}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:71}},Object(o.a)("Display Tab Cycler as List")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Us,lineNumber:75}},s.a.createElement("label",{title:Object(o.a)("Scroll over Tab Bar to switch tabs by order, or scroll anywhere else while holding Alt key to switch tabs per Tab Cycling setting."),__source:{fileName:Us,lineNumber:76}},s.a.createElement("input",{type:"checkbox",checked:e[l.kMouseWheelTabSwitch],onChange:Ws(l.kMouseWheelTabSwitch),__source:{fileName:Us,lineNumber:79}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:82}},Object(o.a)("Switch Tabs by Scrolling")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Us,lineNumber:86}},s.a.createElement("label",{__source:{fileName:Us,lineNumber:87}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsMinimize],onChange:Ws(l.kTabsMinimize),__source:{fileName:Us,lineNumber:88}}),s.a.createElement("span",{__source:{fileName:Us,lineNumber:91}},Object(o.a)("Minimize Active Tab"))),s.a.createElement("p",{className:"info",__source:{fileName:Us,lineNumber:93}},Object(o.a)("Click current tab to switch to last active tab.")))))}}var Gs=Object(_.a)(Vs,Hs),Ks="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabMuting.jsx";const zs=n.a.getEventHandler,Ys=[l.kTabsAutoMuting];class $s extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Ks,lineNumber:23}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Ks,lineNumber:24}},s.a.createElement("h3",{__source:{fileName:Ks,lineNumber:25}},Object(o.a)("Mute Tab Audio")),s.a.createElement(m.a,{name:"mutableTabs",value:this.props.prefValues[l.kTabsAutoMuting],onChange:zs(l.kTabsAutoMuting),__source:{fileName:Ks,lineNumber:26}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Ks,lineNumber:29}},s.a.createElement("label",{__source:{fileName:Ks,lineNumber:30}},s.a.createElement("input",{type:"radio",value:"off",__source:{fileName:Ks,lineNumber:31}}),s.a.createElement("span",{__source:{fileName:Ks,lineNumber:32}},Object(o.a)("Play All Audio")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ks,lineNumber:35}},s.a.createElement("label",{__source:{fileName:Ks,lineNumber:36}},s.a.createElement("input",{type:"radio",value:"onlyActive",__source:{fileName:Ks,lineNumber:37}}),s.a.createElement("span",{__source:{fileName:Ks,lineNumber:38}},Object(o.a)("Play Only in Active Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Ks,lineNumber:41}},s.a.createElement("label",{__source:{fileName:Ks,lineNumber:42}},s.a.createElement("input",{type:"radio",value:"prioritizeActive",__source:{fileName:Ks,lineNumber:43}}),s.a.createElement("span",{__source:{fileName:Ks,lineNumber:44}},Object(o.a)("Prioritize Active Tab")))))))}}var Qs=Object(_.a)($s,Ys),Zs="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOpen.jsx";const qs=n.a.getEventHandler,Xs=[l.kTabsActivationOnClone,l.kTabsNewPlacement];class Js extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Zs,lineNumber:27}},s.a.createElement("span",{__source:{fileName:Zs,lineNumber:28}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Zs,lineNumber:29}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:30}},s.a.createElement("h3",{__source:{fileName:Zs,lineNumber:31}},Object(o.a)("New Tab Position")),s.a.createElement(m.a,{name:"tabOpen",value:this.props.prefValues[l.kTabsNewPlacement],onChange:qs(l.kTabsNewPlacement),__source:{fileName:Zs,lineNumber:32}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:35}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:36}},s.a.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:Zs,lineNumber:37}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:38}},Object(o.a)("After Related Tabs")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:41}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:42}},s.a.createElement("input",{type:"radio",value:"directrightofcurrent",__source:{fileName:Zs,lineNumber:43}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:44}},Object(o.a)("After Active Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:47}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:48}},s.a.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:Zs,lineNumber:49}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:50}},Object(o.a)("As Last Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:53}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:54}},s.a.createElement("input",{type:"radio",value:"openintabstackwithrelated",__source:{fileName:Zs,lineNumber:55}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:56}},Object(o.a)("As Tab Stack with Related Tab"))))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:Zs,lineNumber:63}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:64}},s.a.createElement("h3",{__source:{fileName:Zs,lineNumber:65}},Object(o.a)("Cloned Tab Position")),s.a.createElement(m.a,{name:"tabClone",value:this.props.prefValues[l.kTabsActivationOnClone],onChange:qs(l.kTabsActivationOnClone),__source:{fileName:Zs,lineNumber:66}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:69}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:70}},s.a.createElement("input",{type:"radio",value:"rightofcurrent",__source:{fileName:Zs,lineNumber:71}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:72}},Object(o.a)("Next to Original Tab")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Zs,lineNumber:75}},s.a.createElement("label",{__source:{fileName:Zs,lineNumber:76}},s.a.createElement("input",{type:"radio",value:"alwayslast",__source:{fileName:Zs,lineNumber:77}}),s.a.createElement("span",{__source:{fileName:Zs,lineNumber:78}},Object(o.a)("As Last Tab")))))))))}}var en=Object(_.a)(Js,Xs),tn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabOptions.jsx";const an=n.a.getEventHandler,sn=[l.kTabsActiveMinSize,l.kTabsAtEdge,l.kTabsCloseButtonLeft,l.kTabsCounterDetection,l.kTabsDimHibernated,l.kTabsPageLoadInfo,l.kTabsBarPosition,l.kTabsShowCloseButton,l.kTabsThumbnails,l.kTabsTooltip,l.kTabsUnread];class nn extends s.a.Component{render(){const{prefValues:e}=this.props;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:tn,lineNumber:51}},s.a.createElement("div",{className:"setting-group",__source:{fileName:tn,lineNumber:52}},s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:53}},s.a.createElement("h3",{__source:{fileName:tn,lineNumber:54}},Object(o.a)("Tab Options")),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:56}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:57}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsTooltip],onChange:an(l.kTabsTooltip),__source:{fileName:tn,lineNumber:58}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:61}},Object(o.a)("Show Popup Thumbnails")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:65}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:66}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsThumbnails],onChange:an(l.kTabsThumbnails),__source:{fileName:tn,lineNumber:67}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:70}},Object(o.a)("Show Tab Thumbnails")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:74}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:75}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsShowCloseButton],onChange:an(l.kTabsShowCloseButton),__source:{fileName:tn,lineNumber:76}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:79}},Object(o.a)("Display Close Button")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:tn,lineNumber:83}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:84}},s.a.createElement("input",{type:"checkbox",disabled:!e[l.kTabsShowCloseButton],checked:e[l.kTabsCloseButtonLeft],onChange:an(l.kTabsCloseButtonLeft),__source:{fileName:tn,lineNumber:85}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:89}},Object(o.a)("On Left Side")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:93}},s.a.createElement("label",{title:Object(o.a)("Detect and display numeric notification from page title in Tabs and Web Panels"),__source:{fileName:tn,lineNumber:94}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsCounterDetection],onChange:an(l.kTabsCounterDetection),__source:{fileName:tn,lineNumber:95}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:98}},Object(o.a)("Detect Page Title Notifications")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:102}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:103}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsAtEdge],onChange:an(l.kTabsAtEdge),disabled:"left"===e[l.kTabsBarPosition]||"right"===e[l.kTabsBarPosition],__source:{fileName:tn,lineNumber:104}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:110}},Object(o.a)("Remove Tab Spacing in Maximized Windows")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:118}},s.a.createElement("label",{title:Object(o.a)("Display a triangle symbol for unread Tabs"),__source:{fileName:tn,lineNumber:119}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsUnread],onChange:an(l.kTabsUnread),__source:{fileName:tn,lineNumber:120}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:123}},Object(o.a)("Use Unread Indicators"))),s.a.createElement("div",{className:e[l.kTabsUnread]?"img-setting":"img-setting disabled",__source:{fileName:tn,lineNumber:125}},s.a.createElement("span",{className:"image",dangerouslySetInnerHTML:{__html:a(1263)},__source:{fileName:tn,lineNumber:127}}))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:135}},s.a.createElement("label",{__source:{fileName:tn,lineNumber:136}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsDimHibernated],onChange:an(l.kTabsDimHibernated),__source:{fileName:tn,lineNumber:137}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:140}},Object(o.a)("Dim Icon when Hibernated")))))),s.a.createElement("div",{className:"setting-group tab-min-width",__source:{fileName:tn,lineNumber:146}},s.a.createElement("h3",{__source:{fileName:tn,lineNumber:147}},Object(o.a)("Active Tab Minimum Width")),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:148}},s.a.createElement("label",{title:Object(o.a)("Minimum width of horizontally scaled active tab"),__source:{fileName:tn,lineNumber:149}},s.a.createElement("input",{type:"range",value:e[l.kTabsActiveMinSize],min:30,max:180,step:30,onChange:an(l.kTabsActiveMinSize),__source:{fileName:tn,lineNumber:151}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:158}},Object(o.a)("$1 pixel","$1 pixels",[parseInt(e[l.kTabsActiveMinSize])]))))),s.a.createElement("div",{className:"setting-group",__source:{fileName:tn,lineNumber:163}},s.a.createElement("h3",{__source:{fileName:tn,lineNumber:164}},Object(o.a)("Page Load Progress")),s.a.createElement(m.a,{name:"tabPageLoadInfo",value:this.props.prefValues[l.kTabsPageLoadInfo],onChange:an(l.kTabsPageLoadInfo),__source:{fileName:tn,lineNumber:165}},s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:168}},s.a.createElement("label",{title:Object(o.a)("Display tab progress bar while page is loading"),__source:{fileName:tn,lineNumber:169}},s.a.createElement("input",{type:"radio",value:"progress_bar",__source:{fileName:tn,lineNumber:170}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:171}},Object(o.a)("Progress Bar")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:174}},s.a.createElement("label",{title:Object(o.a)("Display circular progress in place of favicon while page is loading"),__source:{fileName:tn,lineNumber:175}},s.a.createElement("input",{type:"radio",value:"progress_icon",__source:{fileName:tn,lineNumber:176}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:177}},Object(o.a)("Favicon Progress")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:180}},s.a.createElement("label",{title:Object(o.a)("Display spinner in place of favicon while page is loading"),__source:{fileName:tn,lineNumber:181}},s.a.createElement("input",{type:"radio",value:"spinner",__source:{fileName:tn,lineNumber:182}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:183}},Object(o.a)("Favicon Spinner")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:tn,lineNumber:186}},s.a.createElement("label",{title:Object(o.a)("Don’t display page loading progress"),__source:{fileName:tn,lineNumber:187}},s.a.createElement("input",{type:"radio",value:"none",__source:{fileName:tn,lineNumber:188}}),s.a.createElement("span",{__source:{fileName:tn,lineNumber:189}},Object(o.a)("None")))))))}}var rn=Object(_.a)(nn,sn),on="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPage.jsx";function ln(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const cn=n.a.getEventHandler,dn=[l.kExtensionURLOverrides,l.kTabsNewPageLink];class un extends s.a.Component{constructor(...e){super(...e),ln(this,"state",{customUrl:St.a.get(l.kTabsNewPageCustomUrl)}),ln(this,"_handleCustomUrlChange",({currentTarget:e})=>{const t=e.value;this.setState({customUrl:t}),this._saveCustomUrl(t)}),ln(this,"_saveCustomUrl",e=>{const t=Object(Ga.b)(e);n.a.set(l.kTabsNewPageCustomUrl,t),this.props.prefValues[l.kTabsNewPageLink]!==Mt.k.CUSTOM&&n.a.set(l.kTabsNewPageLink,Mt.k.CUSTOM)}),ln(this,"focusCustomUrlInput",()=>{this._customPageRef&&this._customPageRef.focus()})}render(){const e=this.props.prefValues,t=e[l.kExtensionURLOverrides],a=Array.isArray(t.newtab)&&t.newtab.some(e=>e.active),i=e[l.kTabsNewPageLink]===Mt.k.EXTENSION;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:on,lineNumber:68}},s.a.createElement("div",{className:"setting-group new-tab-page",__source:{fileName:on,lineNumber:69}},s.a.createElement("h3",{__source:{fileName:on,lineNumber:70}},Object(o.a)("title","New Tab Page")),s.a.createElement(m.a,{name:"tabPageSettings",value:e[l.kTabsNewPageLink],onChange:cn(l.kTabsNewPageLink),__source:{fileName:on,lineNumber:71}},s.a.createElement("div",{className:"setting-single",__source:{fileName:on,lineNumber:74}},s.a.createElement("label",{__source:{fileName:on,lineNumber:75}},s.a.createElement("input",{type:"radio",value:Mt.k.STARTPAGE,checked:e[l.kTabsNewPageLink]===Mt.k.STARTPAGE||e[l.kTabsNewPageLink]===Mt.k.EXTENSION,onChange:cn(l.kTabsNewPageLink),__source:{fileName:on,lineNumber:76}}),s.a.createElement("span",{__source:{fileName:on,lineNumber:83}},Object(o.a)("noun","Start Page")))),s.a.createElement("div",{className:"setting-single pad-left",__source:{fileName:on,lineNumber:86}},s.a.createElement("label",{title:Object(o.a)("Allow installed third-party extensions to control the Start Page"),__source:{fileName:on,lineNumber:87}},s.a.createElement("input",{type:"checkbox",disabled:!a,checked:i,onChange:cn(l.kTabsNewPageLink),value:i?Mt.k.STARTPAGE:Mt.k.EXTENSION,__source:{fileName:on,lineNumber:89}}),s.a.createElement("span",{__source:{fileName:on,lineNumber:97}},Object(o.a)("Controlled by Extension")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:on,lineNumber:100}},s.a.createElement("label",{__source:{fileName:on,lineNumber:101}},s.a.createElement("input",{type:"radio",value:Mt.k.HOMEPAGE,__source:{fileName:on,lineNumber:102}}),s.a.createElement("span",{__source:{fileName:on,lineNumber:103}},Object(o.a)("other","Homepage")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:on,lineNumber:106}},s.a.createElement("label",{__source:{fileName:on,lineNumber:107}},s.a.createElement("input",{type:"radio",value:Mt.k.BLANKPAGE,__source:{fileName:on,lineNumber:108}}),s.a.createElement("span",{__source:{fileName:on,lineNumber:109}},Object(o.a)("other","Blank Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:on,lineNumber:112}},s.a.createElement("label",{__source:{fileName:on,lineNumber:113}},s.a.createElement("input",{type:"radio",className:"pad-top",onMouseUp:this.focusCustomUrlInput,value:Mt.k.CUSTOM,__source:{fileName:on,lineNumber:114}}),s.a.createElement("span",{__source:{fileName:on,lineNumber:118}},s.a.createElement("input",{type:"text",ref:e=>this._customPageRef=e,placeholder:Object(o.a)("Specific Page"),onChange:this._handleCustomUrlChange,value:this.state.customUrl,tabIndex:e[l.kTabsNewPageLink]===Mt.k.CUSTOM?0:-1,__source:{fileName:on,lineNumber:119}})))))))}}var hn=Object(_.a)(un,dn),mn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPinning.jsx";const pn=[l.kTabsClosePinned],gn=n.a.getEventHandler;class bn extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:mn,lineNumber:23}},s.a.createElement("div",{className:"setting-group",__source:{fileName:mn,lineNumber:24}},s.a.createElement("h3",{__source:{fileName:mn,lineNumber:25}},Object(o.a)("Pinned Tabs")),s.a.createElement(m.a,{name:"closablePinnedTabs",value:this.props.prefValues[l.kTabsClosePinned],onChange:gn(l.kTabsClosePinned),__source:{fileName:mn,lineNumber:26}},s.a.createElement("div",{className:"setting-single",__source:{fileName:mn,lineNumber:29}},s.a.createElement("label",{__source:{fileName:mn,lineNumber:30}},s.a.createElement("input",{type:"radio",value:"off",__source:{fileName:mn,lineNumber:31}}),s.a.createElement("span",{__source:{fileName:mn,lineNumber:32}},Object(o.a)("Don’t Close Pinned Tabs")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:mn,lineNumber:35}},s.a.createElement("label",{__source:{fileName:mn,lineNumber:36}},s.a.createElement("input",{type:"radio",value:"bury",__source:{fileName:mn,lineNumber:37}}),s.a.createElement("span",{__source:{fileName:mn,lineNumber:38}},Object(o.a)("Minimize Instead of Close")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:mn,lineNumber:41}},s.a.createElement("label",{__source:{fileName:mn,lineNumber:42}},s.a.createElement("input",{type:"radio",value:"on",__source:{fileName:mn,lineNumber:43}}),s.a.createElement("span",{__source:{fileName:mn,lineNumber:44}},Object(o.a)("Close as Other Tabs")))))))}}var fn=Object(_.a)(bn,pn),_n=a(100),Nn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TabPositionPreview.jsx";function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}const En={top:Object(o.a)("Top"),right:Object(o.a)("title","Right"),bottom:Object(o.a)("Bottom"),left:Object(o.a)("title","Left")};class wn extends i.Component{render(){if(!this.props.position)return null;const e=this.props.position,t=En[this.props.position],a=Ke()({selectbox:!0,"selectbox-selected":this.props.selected}),s=Object(_n.a)(this.props,["position","vivaldiSettings"]);return i.createElement("button",vn({className:a,title:t},s,{__source:{fileName:Nn,lineNumber:36}}),i.createElement("div",{className:"selectbox-image",__source:{fileName:Nn,lineNumber:41}},i.createElement("svg",{viewBox:"0 0 96 76",xmlns:"http://www.w3.org/2000/svg",className:"tab-preview",__source:{fileName:Nn,lineNumber:42}},"top"===e&&i.createElement("g",{__source:{fileName:Nn,lineNumber:46}},i.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:Nn,lineNumber:47}}),i.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h96v12H0z",__source:{fileName:Nn,lineNumber:48}}),i.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 2h30v8H33zM64 2h30v8H64z",__source:{fileName:Nn,lineNumber:49}}),i.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:Nn,lineNumber:50}})),"right"===e&&i.createElement("g",{__source:{fileName:Nn,lineNumber:54}},i.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:Nn,lineNumber:55}}),i.createElement("path",{className:"thumb-preview-colorBgDark",d:"M62 0h34v76H62z",__source:{fileName:Nn,lineNumber:56}}),i.createElement("path",{className:"thumb-preview-non-active-tab",d:"M64 11h30v8H64zM64 20h30v8H64z",__source:{fileName:Nn,lineNumber:57}}),i.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M64 2h30v8H64z",__source:{fileName:Nn,lineNumber:58}})),"bottom"===e&&i.createElement("g",{__source:{fileName:Nn,lineNumber:62}},i.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:Nn,lineNumber:63}}),i.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 64h96v12H0z",__source:{fileName:Nn,lineNumber:64}}),i.createElement("path",{className:"thumb-preview-non-active-tab",d:"M33 66h30v8H33zM64 66h30v8H64z",__source:{fileName:Nn,lineNumber:65}}),i.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 66h30v8H2z",__source:{fileName:Nn,lineNumber:66}})),"left"===e&&i.createElement("g",{__source:{fileName:Nn,lineNumber:70}},i.createElement("path",{className:"thumb-preview-colorBg",d:"M0 0h96v76H0z",__source:{fileName:Nn,lineNumber:71}}),i.createElement("path",{className:"thumb-preview-colorBgDark",d:"M0 0h34v76H0z",__source:{fileName:Nn,lineNumber:72}}),i.createElement("path",{className:"thumb-preview-non-active-tab",d:"M2 11h30v8H2zM2 20h30v8H2z",__source:{fileName:Nn,lineNumber:73}}),i.createElement("path",{className:"thumb-preview-colorAccentBg",d:"M2 2h30v8H2z",__source:{fileName:Nn,lineNumber:74}}))),i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:Nn,lineNumber:78}},i.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:Nn,lineNumber:81}}))),i.createElement("div",{className:"selectbox-title",__source:{fileName:Nn,lineNumber:85}},t))}}var Sn=wn,Cn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabPosition.jsx";const kn=[l.kKeyboardTabToAll,l.kTabsBarPosition,l.kTabsVisible],yn=n.a.getEventHandler;class On extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{n.a.set(l.kTabsBarPosition,e)},(a="setTabPosition")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const e=this.props.prefValues,t=e[l.kTabsBarPosition];return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Cn,lineNumber:42}},s.a.createElement("div",{style:{display:"inline"},__source:{fileName:Cn,lineNumber:43}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Cn,lineNumber:44}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Cn,lineNumber:45}},s.a.createElement("label",{__source:{fileName:Cn,lineNumber:46}},s.a.createElement("input",{type:"checkbox",checked:e[l.kTabsVisible],onChange:yn(l.kTabsVisible),__source:{fileName:Cn,lineNumber:47}}),s.a.createElement("span",{__source:{fileName:Cn,lineNumber:50}},Object(o.a)("Show Tab Bar"))))),s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Cn,lineNumber:54}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Cn,lineNumber:55}},s.a.createElement("h3",{__source:{fileName:Cn,lineNumber:56}},Object(o.a)("Tab Bar Position")),s.a.createElement(Sn,{position:"top",selected:"top"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"top"),__source:{fileName:Cn,lineNumber:58}}),s.a.createElement(Sn,{position:"left",selected:"left"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"left"),__source:{fileName:Cn,lineNumber:63}}),s.a.createElement(Sn,{position:"right",selected:"right"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"right"),__source:{fileName:Cn,lineNumber:68}}),s.a.createElement(Sn,{position:"bottom",selected:"bottom"===t,tabIndex:this.props.prefValues[l.kKeyboardTabToAll],onClick:this.setTabPosition.bind(this,"bottom"),__source:{fileName:Cn,lineNumber:73}})))))}}var An=Object(_.a)(On,kn),Tn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabSelection.jsx";const In=n.a.getEventHandler,Dn=[l.kTabsSelectionEnabled,l.kTabsSelectionIncludeActive];class Pn extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Tn,lineNumber:26}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Tn,lineNumber:27}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Tn,lineNumber:28}},s.a.createElement("h3",{__source:{fileName:Tn,lineNumber:29}},Object(o.a)("Tab Selection")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Tn,lineNumber:31}},s.a.createElement("label",{title:Object(o.a)("Select multiple tabs with Ctrl and Shift"),__source:{fileName:Tn,lineNumber:32}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsSelectionEnabled],onChange:In(l.kTabsSelectionEnabled),__source:{fileName:Tn,lineNumber:36}}),s.a.createElement("span",{__source:{fileName:Tn,lineNumber:40}},Object(o.a)("Enable Tab Selection")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Tn,lineNumber:44}},s.a.createElement("label",{title:Object(o.a)("The active tab will always be part of the initial tab selection"),__source:{fileName:Tn,lineNumber:45}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsSelectionIncludeActive],onChange:In(l.kTabsSelectionIncludeActive),__source:{fileName:Tn,lineNumber:49}}),s.a.createElement("span",{__source:{fileName:Tn,lineNumber:53}},Object(o.a)("Include Active Tab in Initial Selection")))))))}}var xn=Object(_.a)(Pn,Dn),Mn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabStacking.jsx";const Ln=n.a.getEventHandler,jn=[l.kTabsStackingAllowDnd,l.kTabsStackingAllowRename,l.kTabsStackingDndDelay,l.kTabsStackingMode,l.kTabsStackingOpenInCurrent];class Bn extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{n.a.set(l.kTabsStackingMode,e.target.checked?"on":"off")},(a="handleChange")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Mn,lineNumber:38}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Mn,lineNumber:39}},s.a.createElement("h3",{__source:{fileName:Mn,lineNumber:40}},Object(o.a)("Tab Stacking")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Mn,lineNumber:42}},s.a.createElement("label",{__source:{fileName:Mn,lineNumber:43}},s.a.createElement("input",{type:"checkbox",checked:"on"===this.props.prefValues[l.kTabsStackingMode],onChange:this.handleChange,__source:{fileName:Mn,lineNumber:44}}),s.a.createElement("span",{__source:{fileName:Mn,lineNumber:47}},Object(o.a)("Enable Tab Stacking")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Mn,lineNumber:51}},s.a.createElement("label",{__source:{fileName:Mn,lineNumber:52}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsStackingOpenInCurrent],onChange:Ln(l.kTabsStackingOpenInCurrent),__source:{fileName:Mn,lineNumber:53}}),s.a.createElement("span",{__source:{fileName:Mn,lineNumber:56}},Object(o.a)("Open Tabs in Current Tab Stack")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Mn,lineNumber:60}},s.a.createElement("label",{__source:{fileName:Mn,lineNumber:61}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsStackingAllowRename],onChange:Ln(l.kTabsStackingAllowRename),__source:{fileName:Mn,lineNumber:62}}),s.a.createElement("span",{__source:{fileName:Mn,lineNumber:65}},Object(o.a)("Allow Tab Stack Renaming")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Mn,lineNumber:69}},s.a.createElement("label",{__source:{fileName:Mn,lineNumber:70}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kTabsStackingAllowDnd],onChange:Ln(l.kTabsStackingAllowDnd),__source:{fileName:Mn,lineNumber:71}}),s.a.createElement("span",{__source:{fileName:Mn,lineNumber:75}},Object(o.a)("Allow Stacking by Drag and Drop")))),s.a.createElement("div",{className:"setting-single stacking-delay pad-left",__source:{fileName:Mn,lineNumber:79}},s.a.createElement("label",{htmlFor:"stacking-delay",title:Object(o.a)("Adjust tab stack drop detection delay when moving a tab over another one."),__source:{fileName:Mn,lineNumber:80}},Object(o.a)("Stacking Drop Delay")),s.a.createElement("input",{type:"range",id:"stacking-delay",value:this.props.prefValues[l.kTabsStackingDndDelay],min:50,max:850,step:200,disabled:!this.props.prefValues[l.kTabsStackingAllowDnd],onChange:Ln(l.kTabsStackingDndDelay),__source:{fileName:Mn,lineNumber:85}}),s.a.createElement("p",{className:"info stack-speed",__source:{fileName:Mn,lineNumber:94}},s.a.createElement("span",{__source:{fileName:Mn,lineNumber:95}},Object(o.a)("Short")),s.a.createElement("span",{__source:{fileName:Mn,lineNumber:96}},Object(o.a)("Long"))))))}}var Rn=Object(_.a)(Bn,jn),Fn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\tabs\\TabsSettingSection.jsx";function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class Wn extends i.Component{render(){return i.createElement("span",{__source:{fileName:Fn,lineNumber:23}},i.createElement(v.a,{categoryTitle:Object(o.a)("Tabs"),filter:this.props.filter,__source:{fileName:Fn,lineNumber:24}},i.createElement(An,Un({},this.props,{__source:{fileName:Fn,lineNumber:25}})),i.createElement(hn,Un({},this.props,{__source:{fileName:Fn,lineNumber:26}})),i.createElement(en,Un({},this.props,{__source:{fileName:Fn,lineNumber:27}})),i.createElement(Fs,Un({},this.props,{__source:{fileName:Fn,lineNumber:28}}))),i.createElement(v.a,{categoryTitle:Object(o.a)("Tab Display"),filter:this.props.filter,__source:{fileName:Fn,lineNumber:31}},i.createElement(rn,Un({},this.props,{__source:{fileName:Fn,lineNumber:32}}))),i.createElement(v.a,{categoryTitle:Object(o.a)("Tab Features"),filter:this.props.filter,__source:{fileName:Fn,lineNumber:35}},i.createElement(Gs,Un({},this.props,{__source:{fileName:Fn,lineNumber:36}})),i.createElement(xn,Un({},this.props,{__source:{fileName:Fn,lineNumber:37}})),i.createElement(Rn,Un({},this.props,{__source:{fileName:Fn,lineNumber:38}})),i.createElement(fn,Un({},this.props,{__source:{fileName:Fn,lineNumber:39}})),i.createElement(Qs,Un({},this.props,{__source:{fileName:Fn,lineNumber:40}}))))}}var Hn=Wn,Vn=a(990),Gn=a(96),Kn=a(27),zn=a(163),Yn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeColorEditor.jsx";const $n={baseBg:"BROWSER_COLOR_BG",baseFg:"BROWSER_COLOR_FG",highlightBg:"BROWSER_COLOR_HIGHLIGHT_BG",accentBg:"BROWSER_COLOR_ACCENT_BG"},Qn={baseBg:Object(o.a)("Background"),baseFg:Object(o.a)("Foreground"),highlightBg:Object(o.a)("Highlight"),accentBg:Object(o.a)("Accent")};class Zn extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=(e,t,a=!1)=>{const i=e.hex(),s=Object(zn.a)(this.props.vivaldiSettings.THEMES_USER),n=this.props.theme;for(let e=0;e<s.length;e++)s[e].name.toLowerCase()===n.name.toLowerCase()&&(s[e].colors[t]=i);Kn.a.set({[$n[t]]:i,THEMES_USER:s})},(a="setColor")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){const e=this.props.colorKey;return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Yn,lineNumber:65}},s.a.createElement(Ai,{label:Qn[e],colorKey:e,colorValue:this.props.color,setColor:this.setColor,__source:{fileName:Yn,lineNumber:66}}))}}var qn=Object(Gn.a)(Zn,["THEMES_USER"]),Xn="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeEditor.jsx";function Jn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const er={baseBg:"BROWSER_COLOR_BG",baseFg:"BROWSER_COLOR_FG",highlightBg:"BROWSER_COLOR_HIGHLIGHT_BG",accentBg:"BROWSER_COLOR_ACCENT_BG"},tr={accentFromPage:"USE_TABCOLOR",accentOnWindow:"TABCOLOR_BEHIND_TABS",borderRadius:"BORDER_RADIUS",tabsTransparent:"USE_TAB_TRANSPARENT_TABS"};class ar extends s.a.Component{constructor(...e){super(...e),Jn(this,"state",{baseBgShowPicker:!1,baseFgShowPicker:!1,highlightBgShowPicker:!1,accentBgShowPicker:!1}),Jn(this,"saveThemeSetting",(e,t,a)=>{const i=Object(zn.a)(this.props.vivaldiSettings.THEMES_USER),s=this.props.theme,n=a.target[t];for(let t=0;t<i.length;t++)i[t].name.toLowerCase()===s.name.toLowerCase()&&(i[t].settings[e]=n);Kn.a.set({[tr[e]]:n,THEMES_USER:i})}),Jn(this,"renameTheme",e=>{const t=this.props.vivaldiSettings.THEMES_SYSTEM.concat(this.props.vivaldiSettings.THEMES_USER),a=Object(zn.a)(this.props.vivaldiSettings.THEMES_USER),i=this.props.theme,s=e.target.value,r=Object(zn.a)(St.a.get(l.kThemeScheduleTimeline));if(s.length<1)e.target.value=i.name;else{for(let a=0;a<t.length;a++)if(t[a].name.toLowerCase()===s.toLowerCase())return void(e.target.value=i.name);Object.keys(a).map(e=>{a[e].name.toLowerCase()===i.name.toLowerCase()&&(Object.keys(r).map(e=>{r[e].themeName===i.name&&(r[e].themeName=s)}),a[e].name=s)}),n.a.set(l.kThemeScheduleTimeline,r),Kn.a.set({THEMES_USER:a,THEME_CURRENT:s})}})}UNSAFE_componentWillReceiveProps(e){this.refs.themeNameInput&&this.props.theme&&this.props.theme.name&&e.theme&&e.theme.name&&e.theme.name!==this.props.theme.name&&(this.refs.themeNameInput.value=e.theme.name)}render(){const e=this.props.theme;if(!e)return null;const t=Number(e.settings.borderRadius);let a;return a=t<0?Object(o.a)("Disabled"):0===t?Object(o.a)("command","Default"):`${t}px`,s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Xn,lineNumber:148}},s.a.createElement("div",{className:"themes-edit",__source:{fileName:Xn,lineNumber:149}},s.a.createElement("div",{className:"setting-group unlimited theme-metadata",__source:{fileName:Xn,lineNumber:151}},s.a.createElement("input",{className:"theme-name",type:"text",ref:"themeNameInput",onChange:this.renameTheme,defaultValue:e.name,__source:{fileName:Xn,lineNumber:152}})),s.a.createElement("div",{className:"setting-group unlimited theme-colors",__source:{fileName:Xn,lineNumber:160}},Object.keys(er).map(t=>{const a=e.colors[t];return s.a.createElement(qn,{key:e.name+"_"+t,colorKey:t,color:a,theme:e,filter:this.props.filter,__source:{fileName:Xn,lineNumber:164}})})),s.a.createElement("div",{className:"setting-group unlimited theme-settings",__source:{fileName:Xn,lineNumber:175}},s.a.createElement("div",{className:"setting-group pad-top",__source:{fileName:Xn,lineNumber:177}},s.a.createElement("h3",{__source:{fileName:Xn,lineNumber:178}},Object(o.a)("Theme Preferences")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Xn,lineNumber:179}},s.a.createElement("label",{__source:{fileName:Xn,lineNumber:180}},s.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"accentFromPage","checked"),checked:e.settings.accentFromPage,__source:{fileName:Xn,lineNumber:181}}),s.a.createElement("span",{__source:{fileName:Xn,lineNumber:186}},Object(o.a)("Accent Color from Active Page")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Xn,lineNumber:190}},s.a.createElement("label",{__source:{fileName:Xn,lineNumber:191}},s.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"accentOnWindow","checked"),checked:e.settings.accentOnWindow,__source:{fileName:Xn,lineNumber:192}}),s.a.createElement("span",{__source:{fileName:Xn,lineNumber:197}},Object(o.a)("Apply Accent Color to Window")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Xn,lineNumber:201}},s.a.createElement("label",{__source:{fileName:Xn,lineNumber:202}},s.a.createElement("input",{type:"checkbox",tabIndex:this.props.keyAccess,onChange:this.saveThemeSetting.bind(this,"tabsTransparent","checked"),checked:e.settings.tabsTransparent,__source:{fileName:Xn,lineNumber:203}}),s.a.createElement("span",{__source:{fileName:Xn,lineNumber:208}},Object(o.a)("Transparent Tabs"))))),s.a.createElement("div",{className:"setting-group pad-top",__source:{fileName:Xn,lineNumber:213}},s.a.createElement("h3",{__source:{fileName:Xn,lineNumber:214}},Object(o.a)("Corner Rounding")),s.a.createElement("div",{className:"setting-single border-radius",__source:{fileName:Xn,lineNumber:215}},s.a.createElement("label",{__source:{fileName:Xn,lineNumber:216}},s.a.createElement("input",{type:"range",title:Object(o.a)("Adjust interface corner rounding"),min:-1,max:14,value:t,onChange:this.saveThemeSetting.bind(this,"borderRadius","value"),tabIndex:this.props.keyAccess,__source:{fileName:Xn,lineNumber:217}}),s.a.createElement("span",{__source:{fileName:Xn,lineNumber:224}},a)))))))}}var ir=Object(Gn.a)(ar,["THEMES_SYSTEM","THEMES_USER"]),sr=a(129),nr=a(69),rr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themes\\ThemePreview.jsx";function or(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lr extends i.Component{constructor(...e){super(...e),or(this,"_setTheme",()=>{nr.a.setTheme(this.props.theme)}),or(this,"_deleteTheme",()=>{this.props.deleteTheme&&!nr.a.isSystemTheme(this.props.theme)&&this.props.deleteTheme(this.props.theme.name)}),or(this,"_isSystemTheme",()=>nr.a.isSystemTheme(this.props.theme)),or(this,"handleKeyDown",e=>{e.keyCode!==ds.a.KEY_BACK_SPACE&&e.keyCode!==ds.a.KEY_DELETE||this._deleteTheme()}),or(this,"onContextMenu",e=>{const t=[{name:Object(o.a)("Apply $1",[this.props.theme.name]),visible:!this.props.iscurrent,handler:this._setTheme},{name:Object(o.a)("Delete $1",[this.props.theme.name]),visible:!this._isSystemTheme(),handler:this._deleteTheme}];Object(Pe.a)(this.context.vivaldiWindowId,t)(e)})}shouldComponentUpdate(e){return!Object(ui.a)(this.props,e)}componentDidMount(){this.updateStyleFrom(this.props.theme)}componentDidUpdate(e){Object(ui.a)(this.props.theme,e.theme)||this.updateStyleFrom(this.props.theme)}updateStyleFrom(e){const t=ci()(e.colors.baseFg),a=ci()(e.colors.baseBg),i=ci()(e.colors.highlightBg),s=ci()(e.colors.accentBg),n=sr.e.all(t,a,i,s);Object.keys(n).forEach(e=>{if(this.refs.themePreview){const t=`--${e}`;this.refs.themePreview.style.removeProperty(t),this.refs.themePreview.style.setProperty(t,n[e])}})}render(){const e=this.props.theme.settings.accentOnWindow,t=e?"var(--colorAccentBg)":"var(--colorBg)",a=e?"var(--colorBg)":"var(--colorAccentBg)",s=e?"var(--colorAccentBgFaded)":"var(--colorBgLight)",n=Ke()({selectbox:!0,"selectbox-selected":this.props.iscurrent});return i.createElement("button",{tabIndex:this.props.tabIndex?this.props.tabIndex:0,className:n,onKeyDown:this.handleKeyDown,onContextMenu:this.onContextMenu,onClick:this.props.iscurrent?null:this._setTheme,__source:{fileName:rr,lineNumber:116}},i.createElement("div",{className:"selectbox-image",__source:{fileName:rr,lineNumber:124}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"theme-preview",ref:"themePreview",width:"96",height:"76",viewBox:"0 0 96 76",__source:{fileName:rr,lineNumber:125}},i.createElement("rect",{fill:"var(--colorBgDarker)",x:"0",y:"16",width:"96",height:"57",__source:{fileName:rr,lineNumber:131}}),i.createElement("rect",{fill:t,width:"96",height:"10",__source:{fileName:rr,lineNumber:132}}),i.createElement("path",{fill:a,d:"M0 10h96v6H0v-6zm0-6h30v6H0V4z",__source:{fileName:rr,lineNumber:133}}),i.createElement("rect",{fill:"var(--colorBgDark)",y:"16",width:"6",height:"57",__source:{fileName:rr,lineNumber:134}}),i.createElement("rect",{fill:"var(--colorBgLightIntense)",x:"6",y:"16",width:"18",height:"57",__source:{fileName:rr,lineNumber:135}}),i.createElement("rect",{fill:s,x:"31",y:"4",width:"30",height:"6",__source:{fileName:rr,lineNumber:136}}),i.createElement("rect",{fill:"var(--colorBg)",y:"73",width:"96",height:"3",__source:{fileName:rr,lineNumber:137}}),i.createElement("rect",{fill:"var(--colorFg)",x:"8",y:"69",width:"6",height:"2",__source:{fileName:rr,lineNumber:138}}),i.createElement("rect",{fill:"var(--colorHighlightBg)",x:"16",y:"69",width:"6",height:"2",__source:{fileName:rr,lineNumber:139}})),i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"selectbox-checkmark",viewBox:"0 0 16 16",__source:{fileName:rr,lineNumber:141}},i.createElement("path",{d:"M5.3 13.3L1.5 9.5 3 8l2.3 2.5L13 2.7 14.6 4l-8 8z",__source:{fileName:rr,lineNumber:144}}))),i.createElement("div",{className:"selectbox-title",__source:{fileName:rr,lineNumber:148}},this.props.theme.name))}}or(lr,"contextType",R.a);var cr=lr,dr=a(26),ur="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\Themes.jsx";function hr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class mr extends s.a.PureComponent{constructor(e){super(e),hr(this,"_addTheme",()=>{const e=this.props.vivaldiSettings,t=Object(zn.a)(e.THEMES_USER),a=Object(o.a)("New Theme");let i=1;for(;this._isUserThemeNameInUse(`${a} ${i}`);)i+=1;t.push({version:.1,name:`${a} ${i}`,colors:{baseBg:Kn.a.getSync("BROWSER_COLOR_BG"),baseFg:Kn.a.getSync("BROWSER_COLOR_FG"),highlightBg:Kn.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),accentBg:Kn.a.getSync("BROWSER_COLOR_ACCENT_BG")},settings:{accentOnWindow:Kn.a.getSync("TABCOLOR_BEHIND_TABS"),accentFromPage:Kn.a.getSync("USE_TABCOLOR"),tabsTransparent:Kn.a.getSync("USE_TAB_TRANSPARENT_TABS"),borderRadius:Kn.a.getSync("BORDER_RADIUS")}}),Kn.a.set({THEMES_USER:t,THEME_CURRENT:`${a} ${i}`},()=>{this.state.editTheme||this.setState({editTheme:!0})})}),hr(this,"_deleteTheme",(e=this.props.vivaldiSettings.THEME_CURRENT)=>{const t=this.props.vivaldiSettings,a=t.THEMES_SYSTEM,i=Object(zn.a)(t.THEMES_USER),s=nr.a.getSchedules();for(let t=0;t<i.length;t++){let r;if(i[t].name===e){i.splice(t,1);for(let t=0;t<s.length;t++)s[t].undeletable||s[t].themeName.toLowerCase()!==e.toLowerCase()||s.splice(t,1);if(e===this.props.vivaldiSettings.THEME_CURRENT){i[t]?r=t:i[t-1]&&(r=t-1);const e=i.length>0?i[r]:a[a.length-1];n.a.set(l.kThemeScheduleTimeline,s),Kn.a.set({THEME_CURRENT:e.name,THEMES_USER:i,BROWSER_COLOR_BG:e.colors.baseBg,BROWSER_COLOR_FG:e.colors.baseFg,BROWSER_COLOR_HIGHLIGHT_BG:e.colors.highlightBg,BROWSER_COLOR_ACCENT_BG:e.colors.accentBg,TABCOLOR_BEHIND_TABS:e.settings.accentOnWindow,USE_TABCOLOR:e.settings.accentFromPage,USE_TAB_TRANSPARENT_TABS:e.settings.tabsTransparent,BORDER_RADIUS:e.settings.borderRadius})}else n.a.set(l.kThemeScheduleTimeline,s),Kn.a.set({THEMES_USER:i})}}}),hr(this,"_toggleEdit",()=>{this.setState(e=>({editTheme:!e.editTheme}))}),hr(this,"_isUserThemeNameInUse",e=>{const t=this.props.vivaldiSettings.THEMES_USER;for(let a=0;a<t.length;a++)if(t[a].name===e)return!0;return!1}),this.state={editTheme:!1}}UNSAFE_componentWillReceiveProps(e){const t=e.vivaldiSettings.THEMES_SYSTEM,a=e.vivaldiSettings.THEME_CURRENT;for(let e=0;e<t.length;e++)t[e]&&t[e].name===a&&this.setState({editTheme:!1})}render(){const e=this.props.vivaldiSettings,t=e.THEMES_SYSTEM.concat(e.THEMES_USER),a=nr.a.getTheme(Kn.a.getSync("THEME_CURRENT")),i=nr.a.isSystemTheme(a);return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Themes"),filter:this.props.filter,__source:{fileName:ur,lineNumber:188}},s.a.createElement("p",{className:"info",__source:{fileName:ur,lineNumber:189}},Object(o.a)("Select one of the pre-defined themes. You may change it to your\n            liking, or create a new theme using the tools below.")),s.a.createElement("div",{className:"setting-group unlimited pad-top",__source:{fileName:ur,lineNumber:194}},t.map(e=>s.a.createElement(cr,{filter:this.props.filter,key:e.name,theme:e,deleteTheme:this._deleteTheme,iscurrent:a.name===e.name,__source:{fileName:ur,lineNumber:197}})),s.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:ur,lineNumber:206}},s.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:ur,lineNumber:207}},s.a.createElement(dr.a,{tooltip:Object(o.a)("Add Theme"),onClick:this._addTheme,image:Be.f.medium,tabIndex:0,__source:{fileName:ur,lineNumber:208}}),s.a.createElement("hr",{__source:{fileName:ur,lineNumber:214}}),s.a.createElement(dr.a,{tooltip:Object(o.a)("Remove Theme"),disabled:i,onClick:this._deleteTheme.bind(this,void 0),image:Be.Lb.medium,tabIndex:0,__source:{fileName:ur,lineNumber:215}})),s.a.createElement(dr.a,{title:Object(o.a)("Edit Theme"),isPressed:this.state.editTheme,onClick:i?this._addTheme:this._toggleEdit,image:Be.J.medium,tabIndex:0,__source:{fileName:ur,lineNumber:223}})),this.state.editTheme&&s.a.createElement(ir,{theme:a,__source:{fileName:ur,lineNumber:234}})))}}var pr=Object(Gn.a)(mr,["THEMES_SYSTEM","THEMES_USER","THEME_CURRENT"]),gr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesPlugins.jsx";function br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fr=[l.kPluginsAlwaysOpenPdfExternally,l.kPluginsWidevineEnabled],_r=n.a.getEventHandler;class Nr extends s.a.Component{constructor(e){super(e),br(this,"state",{flashEnabled:!1}),br(this,"_onToggleFlashSetting",()=>{const e=this.state.flashEnabled?"block":"allow",t=this.state.flashEnabled;F.default.contentSettings.plugins.set({primaryPattern:"<all_urls>",resourceIdentifier:{id:"adobe-flash-player"},setting:e}),this.setState({flashEnabled:!t})}),F.default.contentSettings.plugins.get({primaryUrl:"http://*",resourceIdentifier:{id:"adobe-flash-player"}},e=>{this.setState({flashEnabled:"allow"===e.setting})})}render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Plugins"),filter:this.props.filter,__source:{fileName:gr,lineNumber:59}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:gr,lineNumber:60}},s.a.createElement("div",{className:"setting-single",__source:{fileName:gr,lineNumber:61}},s.a.createElement("label",{__source:{fileName:gr,lineNumber:62}},s.a.createElement("input",{type:"checkbox",checked:!this.props.prefValues[l.kPluginsAlwaysOpenPdfExternally],onChange:_r(l.kPluginsAlwaysOpenPdfExternally,"inverse"),__source:{fileName:gr,lineNumber:63}}),s.a.createElement("span",{__source:{fileName:gr,lineNumber:68}},Object(o.a)("Enable Internal PDF Viewer")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:gr,lineNumber:71}},s.a.createElement("label",{__source:{fileName:gr,lineNumber:72}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kPluginsWidevineEnabled],onChange:_r(l.kPluginsWidevineEnabled),__source:{fileName:gr,lineNumber:73}}),s.a.createElement("span",{__source:{fileName:gr,lineNumber:76}},Object(o.a)("Enable Widevine Plugin")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:gr,lineNumber:79}},s.a.createElement("label",{__source:{fileName:gr,lineNumber:80}},s.a.createElement("input",{type:"checkbox",checked:this.state.flashEnabled,onChange:this._onToggleFlashSetting,__source:{fileName:gr,lineNumber:81}}),s.a.createElement("span",{__source:{fileName:gr,lineNumber:84}},Object(o.a)("Enable Flash Plugin"))))))}}var vr=Object(_.a)(Nr,fr),Er=a(361),wr=a(77);function Sr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Cr extends s.a.PureComponent{constructor(...e){super(...e),Sr(this,"state",{zoom:1}),Sr(this,"rangeCheck",e=>Math.min(Math.max(e,wr.d),wr.c)),Sr(this,"_onDefaultZoomChanged",e=>{this.setState({zoom:this.rangeCheck(e)})}),Sr(this,"setZoomLevel",e=>{const t=this.rangeCheck(e);D.a.zoom.setDefaultZoom(t)})}componentDidMount(){D.a.zoom.onDefaultZoomChanged.addListener(this._onDefaultZoomChanged),D.a.zoom.getDefaultZoom(this._onDefaultZoomChanged)}componentWillUnmount(){D.a.zoom.onDefaultZoomChanged.removeListener(this._onDefaultZoomChanged)}render(){const{zoom:e}=this.state;return s.a.createElement(Er.a,{zoom:e,defaultZoomLevel:wr.b,key:"zoomslider",scrolling:!0,inFooter:!1,maxLevel:wr.c,minLevel:wr.d,step:wr.e,disabled:!1,onZoomUpdated:this.setZoomLevel,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\DefaultPageZoomIndicator.jsx",lineNumber:51}})}}var kr=Cr,yr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\DefaultGlobalZoom.jsx";function Or(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ar=[l.kMouseWheelPageZoom,l.kWebpagesTabZoomEnabled],Tr=n.a.getEventHandler;class Ir extends s.a.Component{constructor(...e){super(...e),Or(this,"state",{defaultGlobalZoom:1}),Or(this,"updateLocalState",e=>{this.setState({defaultGlobalZoom:e})}),Or(this,"handleZoomUpdated",e=>{D.a.zoom.setDefaultZoom(e)})}UNSAFE_componentWillMount(){D.a.zoom.getDefaultZoom(e=>{this.setState({defaultGlobalZoom:e})}),D.a.zoom.onDefaultZoomChanged.addListener(this.updateLocalState)}componentWillUnmount(){D.a.zoom.onDefaultZoomChanged.removeListener(this.updateLocalState)}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:yr,lineNumber:60}},s.a.createElement("div",{className:"setting-group",__source:{fileName:yr,lineNumber:61}},s.a.createElement("div",{className:"setting-single",__source:{fileName:yr,lineNumber:62}},s.a.createElement("h3",{__source:{fileName:yr,lineNumber:63}},Object(o.a)("Default Webpage Zoom")),s.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:yr,lineNumber:64}},s.a.createElement(kr,{__source:{fileName:yr,lineNumber:65}}))),s.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:yr,lineNumber:68}},s.a.createElement("label",{__source:{fileName:yr,lineNumber:69}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kMouseWheelPageZoom],onChange:Tr(l.kMouseWheelPageZoom),__source:{fileName:yr,lineNumber:70}}),s.a.createElement("span",{__source:{fileName:yr,lineNumber:73}},Object(o.a)("Use $1+Scroll to Zoom Page",["Ctrl"])))),s.a.createElement("div",{className:"setting-single",__source:{fileName:yr,lineNumber:77}},s.a.createElement("label",{__source:{fileName:yr,lineNumber:78}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesTabZoomEnabled],onChange:Tr(l.kWebpagesTabZoomEnabled),__source:{fileName:yr,lineNumber:79}}),s.a.createElement("span",{__source:{fileName:yr,lineNumber:82}},Object(o.a)("Use Tab Zoom"))),s.a.createElement("p",{className:"info",__source:{fileName:yr,lineNumber:84}},Object(o.a)("Retain zoom level when navigating between websites")))))}}var Dr=Object(_.a)(Ir,Ar),Pr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Fullscreen.jsx";const xr=[l.kWebpagesFullScreenShowBubble];xr.push(l.kWebpagesFullScreenHideMouse);const Mr=n.a.getEventHandler;class Lr extends s.a.Component{render(){const e=s.a.createElement("div",{className:"setting-single",__source:{fileName:Pr,lineNumber:30}},s.a.createElement("label",{__source:{fileName:Pr,lineNumber:31}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesFullScreenShowBubble],onChange:Mr(l.kWebpagesFullScreenShowBubble),__source:{fileName:Pr,lineNumber:32}}),s.a.createElement("span",{__source:{fileName:Pr,lineNumber:36}},Object(o.a)("Show Fullscreen Reminder")))),t=s.a.createElement("div",{className:"setting-single",__source:{fileName:Pr,lineNumber:43}},s.a.createElement("label",{__source:{fileName:Pr,lineNumber:44}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesFullScreenHideMouse],onChange:Mr(l.kWebpagesFullScreenHideMouse),__source:{fileName:Pr,lineNumber:45}}),s.a.createElement("span",{__source:{fileName:Pr,lineNumber:49}},Object(o.a)("Hide the Mouse Cursor for Page-initiated Fullscreen"))));return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Pr,lineNumber:55}},s.a.createElement("span",{__source:{fileName:Pr,lineNumber:56}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Pr,lineNumber:57}},s.a.createElement("h3",{__source:{fileName:Pr,lineNumber:58}},Object(o.a)("Fullscreen Mode")),e,t)))}}var jr=Object(_.a)(Lr,xr),Br="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\GlobalPermissions.jsx";function Rr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Fr={sound:Object(o.a)("Sound"),notifications:Object(o.a)("Notifications"),location:Object(o.a)("Geolocation"),"media-stream-camera":Object(o.a)("Camera"),"media-stream-mic":Object(o.a)("Microphone"),sensors:Object(o.a)("Motion Sensors"),"bluetooth-scanning":Object(o.a)("Bluetooth Devices"),"midi-sysex":Object(o.a)("MIDI Devices"),popups:Object(o.a)("Popups")},Ur=["sound"];class Wr extends s.a.PureComponent{constructor(...e){super(...e),Rr(this,"initPermissionState",()=>{Object.keys(Fr).forEach(e=>{D.a.utilities.getDefaultContentSettings(e,t=>{this.setState({[e]:t})})})}),Rr(this,"changePermission",e=>{const{name:t,value:a}=e.target;D.a.utilities.setDefaultContentSettings(t,a,()=>this.setState({[t]:a}))}),Rr(this,"resetToDefaults",()=>{Object.keys(Fr).forEach(e=>{D.a.utilities.setDefaultContentSettings(e,"default",Re.default)}),this.initPermissionState()})}componentDidMount(){this.initPermissionState()}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Br,lineNumber:72}},s.a.createElement("div",{className:"setting-group global-permissions",__source:{fileName:Br,lineNumber:73}},s.a.createElement("h3",{__source:{fileName:Br,lineNumber:74}},Object(o.a)("Default Permissions")),s.a.createElement("p",{className:"info",__source:{fileName:Br,lineNumber:75}},Object(o.a)("Certain website permissions can be controlled globally.")),s.a.createElement("div",{className:"setting-single",__source:{fileName:Br,lineNumber:76}},this.state&&Object.keys(this.state).map(e=>s.a.createElement("label",{key:e,__source:{fileName:Br,lineNumber:79}},s.a.createElement("span",{__source:{fileName:Br,lineNumber:80}},Fr[e]),s.a.createElement("select",{value:this.state[e],onChange:this.changePermission,name:e,__source:{fileName:Br,lineNumber:81}},s.a.createElement("option",{value:"allow",__source:{fileName:Br,lineNumber:85}},Object(o.a)("other","Allow")),!Ur.includes(e)&&s.a.createElement("option",{value:"ask",__source:{fileName:Br,lineNumber:87}},Object(o.a)("Ask")),s.a.createElement("option",{value:"block",__source:{fileName:Br,lineNumber:89}},Object(o.a)("Block")))))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Br,lineNumber:95}},s.a.createElement("input",{type:"button",value:Object(o.a)("Reset to Defaults"),onClick:this.resetToDefaults,__source:{fileName:Br,lineNumber:96}}))))}}var Hr=Wr,Vr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\HardwareAcceleration.jsx";const Gr=[l.kHardwareAccelerationModeEnabled],Kr=n.a.getEventHandler;class zr extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Vr,lineNumber:23}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:Vr,lineNumber:24}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Vr,lineNumber:25}},s.a.createElement("label",{__source:{fileName:Vr,lineNumber:26}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kHardwareAccelerationModeEnabled],onChange:Kr(l.kHardwareAccelerationModeEnabled),__source:{fileName:Vr,lineNumber:27}}),s.a.createElement("span",{__source:{fileName:Vr,lineNumber:31}},Object(o.a)("Use Hardware Acceleration When Available"))),s.a.createElement("p",{className:"info",__source:{fileName:Vr,lineNumber:33}},Object(o.a)("This setting requires a restart to take full effect.")))))}}var Yr=Object(_.a)(zr,Gr),$r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageAnimation.jsx";function Qr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zr extends s.a.Component{constructor(...e){super(...e),Qr(this,"state",{animationPolicy:"allowed"}),Qr(this,"_onAnimationPolicyChanged",()=>{F.default.accessibilityFeatures.animationPolicy.get({},({value:e})=>{this.setState({animationPolicy:e})})}),Qr(this,"onSelected",e=>{const t=e.target.value;this.setState({animationPolicy:t},()=>{F.default.accessibilityFeatures.animationPolicy.set({value:t})})})}componentDidMount(){F.default.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){F.default.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:$r,lineNumber:55}},s.a.createElement("div",{className:"setting-group",__source:{fileName:$r,lineNumber:56}},s.a.createElement("div",{className:"setting-single",__source:{fileName:$r,lineNumber:57}},s.a.createElement("h3",{__source:{fileName:$r,lineNumber:58}},Object(o.a)("Play Image Animation")),s.a.createElement(m.a,{name:"animationPolicy",value:this.state.animationPolicy,onChange:this.onSelected,__source:{fileName:$r,lineNumber:59}},s.a.createElement("div",{className:"setting-single",__source:{fileName:$r,lineNumber:63}},s.a.createElement("label",{__source:{fileName:$r,lineNumber:64}},s.a.createElement("input",{type:"radio",value:"allowed",__source:{fileName:$r,lineNumber:65}}),s.a.createElement("span",{__source:{fileName:$r,lineNumber:66}},Object(o.a)("Loop")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:$r,lineNumber:69}},s.a.createElement("label",{__source:{fileName:$r,lineNumber:70}},s.a.createElement("input",{type:"radio",value:"once",__source:{fileName:$r,lineNumber:71}}),s.a.createElement("span",{__source:{fileName:$r,lineNumber:72}},Object(o.a)("Once")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:$r,lineNumber:75}},s.a.createElement("label",{__source:{fileName:$r,lineNumber:76}},s.a.createElement("input",{type:"radio",value:"none",__source:{fileName:$r,lineNumber:77}}),s.a.createElement("span",{__source:{fileName:$r,lineNumber:78}},Object(o.a)("radio","Never"))))))))}}var qr=Zr,Xr="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\ImageLoading.jsx";function Jr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class eo extends s.a.Component{constructor(...e){super(...e),Jr(this,"state",{imageLoading:"always"}),Jr(this,"_initState",()=>{const e=St.a.get(l.kPageImageLoading);e&&this.setState({imageLoading:e})}),Jr(this,"_onSettingsChanged",(e,t)=>{this.setState({imageLoading:t})}),Jr(this,"onSelected",e=>{const t=e.currentTarget.value;this.setState({imageLoading:t},()=>{n.a.set(l.kPageImageLoading,t)})})}componentDidMount(){this._initState(),St.a.addListener(l.kPageImageLoading,this._onSettingsChanged)}componentWillUnmount(){St.a.removeListener(l.kPageImageLoading,this._onSettingsChanged)}render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:Xr,lineNumber:58}},s.a.createElement("div",{className:"setting-group",__source:{fileName:Xr,lineNumber:59}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Xr,lineNumber:60}},s.a.createElement("h3",{__source:{fileName:Xr,lineNumber:61}},Object(o.a)("page settings","Load Images")),s.a.createElement("p",{className:"info",__source:{fileName:Xr,lineNumber:62}},Object(o.a)("Image loading setting for new tabs. Tabs opened from links will not use this setting, but will inherit the setting from the parent tab.")),s.a.createElement(m.a,{name:"imageLoadingPolicy",value:this.state.imageLoading,onChange:this.onSelected,__source:{fileName:Xr,lineNumber:65}},s.a.createElement("div",{className:"setting-single",__source:{fileName:Xr,lineNumber:69}},s.a.createElement("label",{__source:{fileName:Xr,lineNumber:70}},s.a.createElement("input",{type:"radio",value:"always",__source:{fileName:Xr,lineNumber:71}}),s.a.createElement("span",{__source:{fileName:Xr,lineNumber:72}},Object(o.a)("radio","Always")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Xr,lineNumber:75}},s.a.createElement("label",{__source:{fileName:Xr,lineNumber:76}},s.a.createElement("input",{type:"radio",value:"never",__source:{fileName:Xr,lineNumber:77}}),s.a.createElement("span",{__source:{fileName:Xr,lineNumber:78}},Object(o.a)("radio","Never")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:Xr,lineNumber:81}},s.a.createElement("label",{__source:{fileName:Xr,lineNumber:82}},s.a.createElement("input",{type:"radio",value:"cache",__source:{fileName:Xr,lineNumber:83}}),s.a.createElement("span",{__source:{fileName:Xr,lineNumber:84}},Object(o.a)("radio","Cached"))))))))}}var to=eo,ao="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\PictureInPicture.jsx";const io=[l.kWebpagesPictureInPictureButtonEnabled],so=n.a.getEventHandler;class no extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:ao,lineNumber:22}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:ao,lineNumber:23}},s.a.createElement("div",{className:"setting-single",__source:{fileName:ao,lineNumber:24}},s.a.createElement("label",{__source:{fileName:ao,lineNumber:25}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesPictureInPictureButtonEnabled],onChange:so(l.kWebpagesPictureInPictureButtonEnabled),__source:{fileName:ao,lineNumber:26}}),s.a.createElement("span",{__source:{fileName:ao,lineNumber:30}},Object(o.a)("Picture-in-Picture Button On Videos"))),s.a.createElement("p",{className:"info",__source:{fileName:ao,lineNumber:32}},Object(o.a)("This setting requires a restart to take effect.")))))}}var ro=Object(_.a)(no,io),oo="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SelectTextInLink.jsx";const lo=[l.kWebpagesAllowSelectionInLinks],co=n.a.getEventHandler;class uo extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:oo,lineNumber:22}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:oo,lineNumber:23}},s.a.createElement("div",{className:"setting-single",__source:{fileName:oo,lineNumber:24}},s.a.createElement("label",{__source:{fileName:oo,lineNumber:25}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesAllowSelectionInLinks],onChange:co(l.kWebpagesAllowSelectionInLinks),__source:{fileName:oo,lineNumber:26}}),s.a.createElement("span",{__source:{fileName:oo,lineNumber:30}},Object(o.a)("Allow Text Selection in Links"))))))}}var ho=Object(_.a)(uo,lo),mo="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\Smoothscrolling.jsx";const po=[l.kWebpagesSmoothScrollingEnabled],go=n.a.getEventHandler;class bo extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:mo,lineNumber:22}},s.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:mo,lineNumber:23}},s.a.createElement("div",{className:"setting-single",__source:{fileName:mo,lineNumber:24}},s.a.createElement("label",{__source:{fileName:mo,lineNumber:25}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesSmoothScrollingEnabled],onChange:go(l.kWebpagesSmoothScrollingEnabled),__source:{fileName:mo,lineNumber:26}}),s.a.createElement("span",{__source:{fileName:mo,lineNumber:29}},Object(o.a)("Smooth Scrolling"))),s.a.createElement("p",{className:"info",__source:{fileName:mo,lineNumber:31}},Object(o.a)("This setting requires a restart to take full effect.")))))}}var fo=Object(_.a)(bo,po),_o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\SpatialNavigation.jsx";const No=[l.kWebpagesSpatialNavigationEnabled],vo=n.a.getEventHandler;class Eo extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:_o,lineNumber:22}},s.a.createElement("div",{className:"setting-group",__source:{fileName:_o,lineNumber:23}},s.a.createElement("div",{className:"setting-single",__source:{fileName:_o,lineNumber:24}},s.a.createElement("h3",{__source:{fileName:_o,lineNumber:25}},Object(o.a)("Spatial Navigation")),s.a.createElement("p",{className:"info",__source:{fileName:_o,lineNumber:26}},Object(o.a)("Navigate between links and elements by holding shift and pressing the arrow keys.")),s.a.createElement("label",{__source:{fileName:_o,lineNumber:29}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[l.kWebpagesSpatialNavigationEnabled],onChange:vo(l.kWebpagesSpatialNavigationEnabled),__source:{fileName:_o,lineNumber:30}}),s.a.createElement("span",{__source:{fileName:_o,lineNumber:33}},Object(o.a)("spatial navigation","Enabled"))))))}}var wo=Object(_.a)(Eo,No),So="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\TabToFocus.jsx";const Co=n.a.getEventHandler,ko=[l.kWebpagesTabFocusesLinks];class yo extends s.a.Component{render(){return s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:So,lineNumber:23}},s.a.createElement("div",{className:"setting-group",__source:{fileName:So,lineNumber:24}},s.a.createElement("div",{className:"setting-single",__source:{fileName:So,lineNumber:25}},s.a.createElement("h3",{__source:{fileName:So,lineNumber:26}},Object(o.a)("Webpage Focus")),s.a.createElement("p",{className:"info",__source:{fileName:So,lineNumber:27}},Object(o.a)("This setting takes effect in new tabs or windows only.")),s.a.createElement(m.a,{name:"tabToFocusSetting",className:"setting-single",value:this.props.prefValues[l.kWebpagesTabFocusesLinks],onChange:Co(l.kWebpagesTabFocusesLinks,"convert"),__source:{fileName:So,lineNumber:30}},s.a.createElement("div",{className:"setting-single",__source:{fileName:So,lineNumber:34}},s.a.createElement("label",{__source:{fileName:So,lineNumber:35}},s.a.createElement("input",{type:"radio",value:"false",__source:{fileName:So,lineNumber:36}}),s.a.createElement("span",{__source:{fileName:So,lineNumber:37}},Object(o.a)("Focus Forms Only")))),s.a.createElement("div",{className:"setting-single",__source:{fileName:So,lineNumber:40}},s.a.createElement("label",{className:"setting-single",__source:{fileName:So,lineNumber:41}},s.a.createElement("input",{type:"radio",value:"true",__source:{fileName:So,lineNumber:42}}),s.a.createElement("span",{__source:{fileName:So,lineNumber:43}},Object(o.a)("Focus All Controls and Links"))))))))}}var Oo=Object(_.a)(yo,ko),Ao="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\webpages\\WebpagesSettingSection.jsx";function To(){return(To=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class Io extends s.a.Component{render(){return s.a.createElement(v.a,{categoryTitle:Object(o.a)("Webpages"),filter:this.props.filter,__source:{fileName:Ao,lineNumber:24}},s.a.createElement(fo,To({},this.props,{__source:{fileName:Ao,lineNumber:25}})),s.a.createElement(Yr,To({},this.props,{__source:{fileName:Ao,lineNumber:26}})),s.a.createElement(ro,To({},this.props,{__source:{fileName:Ao,lineNumber:27}})),s.a.createElement(ho,To({},this.props,{__source:{fileName:Ao,lineNumber:28}})),s.a.createElement(Oo,To({},this.props,{__source:{fileName:Ao,lineNumber:29}})),s.a.createElement(wo,To({},this.props,{__source:{fileName:Ao,lineNumber:30}})),s.a.createElement(jr,To({},this.props,{__source:{fileName:Ao,lineNumber:31}})),s.a.createElement(Hr,To({},this.props,{__source:{fileName:Ao,lineNumber:32}})),s.a.createElement(qr,To({},this.props,{__source:{fileName:Ao,lineNumber:33}})),s.a.createElement(to,To({},this.props,{__source:{fileName:Ao,lineNumber:34}})),s.a.createElement(Dr,To({},this.props,{__source:{fileName:Ao,lineNumber:35}})))}}var Do=Io,Po=a(16),xo=a(448);a.d(t,"a",(function(){return Bo}));var Mo="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\Settings.jsx";function Lo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const jo=ps.a.settingCategories,Bo="http://example.com/?path=";function Ro(e){const t=ps.a.getUrlParams(e),a=t.query,i=a?"all":t.path,s=i&&i.split("/");let n;if(!a&&s&&s.length>0&&jo[s[0]]&&(n=jo[s[0]],s.length>1)){const e=s.join("_");n=jo[e]}return n||(a?jo.all:jo.general)}function Fo(){return i.createElement("div",{className:"guest-intro",__source:{fileName:Mo,lineNumber:119}},i.createElement("svg",{className:"guest-intro-background",viewBox:"0 0 1244 860",__source:{fileName:Mo,lineNumber:120}},i.createElement("path",{fill:"url(#guest-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:Mo,lineNumber:121}})),i.createElement("div",{className:"guest-intro-content",__source:{fileName:Mo,lineNumber:123}},i.createElement("h1",{__source:{fileName:Mo,lineNumber:124}},Object(o.a)("Settings Unavailable")),i.createElement("p",{__source:{fileName:Mo,lineNumber:125}},Object(o.a)("Settings are not available in guest windows.")),i.createElement("p",{__source:{fileName:Mo,lineNumber:128}},i.createElement("a",{tabIndex:0,href:xo.a,onClick:xo.c,__source:{fileName:Mo,lineNumber:129}},Object(o.a)("Learn more about Guest Profiles")))))}class Uo extends i.Component{constructor(...e){super(...e),Lo(this,"refFilter",i.createRef()),Lo(this,"refContent",i.createRef()),Lo(this,"state",{category:Ro(this.props.url),filter:""}),Lo(this,"focusFilterInput",()=>{this.refFilter.current&&this.refFilter.current.focus()}),Lo(this,"scrollToAnchor",e=>{const{HTMLElement:t}=this.context,a=function(e){const t=ps.a.getUrlParams(e);return t.scroll?t.scroll:""}(e);if(!a)return;const i=O.a.findDOMNode(this);if(!(i instanceof t))return;const s=i.querySelector(`[data-anchor='${a}']`);s&&s.scrollIntoView()}),Lo(this,"onMacMenuAction",(e,t,a)=>{this.context.vivaldiWindowId===e&&Ae.default.isActionWhitelistedForSettings(t)&&Oe.default.executeActions(t)}),Lo(this,"getWindowTitle",()=>this.state.category?Object(o.a)("Vivaldi Settings: $1",[this.state.category.title]):Object(o.a)("Vivaldi Settings")),Lo(this,"show",e=>{const t=this.state.category&&this.state.category===jo.all,a=this.state.category&&this.state.category===e;return t||a}),Lo(this,"onSettingsFilter",({currentTarget:e})=>{const t=e.value;this.setState({filter:t}),this.state.category!==jo.all&&this._setCategory("all")}),Lo(this,"selectNode",(e,t)=>{this.setState({filter:""}),this._setCategory(t.key)}),Lo(this,"scrollTop",()=>{this.refContent.current&&(this.refContent.current.scrollTop=0)}),Lo(this,"_activateRow",(e,t)=>{this._setCategory(t[0].key)}),Lo(this,"_setCategory",e=>{Po.a.isSettings(this.context.vivaldiWindowId)?this.setState({category:jo[e]}):ua.a.openURL(ps.a.internalUrl("settings",e),{inCurrent:!0})}),Lo(this,"renderNavigationItem",({node:e})=>{const t=this.state.category.title===e.title,a=e.section&&e.section!==e.key&&e.section===this.state.category.section;return i.createElement("div",{key:e.id,onMouseDown:e=>e.preventDefault(),className:Ke()({"button-category":!0,"category-selected":t,section:a}),__source:{fileName:Mo,lineNumber:302}},!a&&i.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon},__source:{fileName:Mo,lineNumber:311}}),e.title)})}static getDerivedStateFromProps(e,t){return e.url.startsWith(Bo)?null:{category:Ro(e.url)}}componentDidMount(){const{document:e,vivaldiWindowId:t}=this.context;Po.a.isSettings(t)&&(e.title=this.getWindowTitle()),this.scrollToAnchor(this.props.url),this.focusFilterInput()}componentWillUnmount(){0}componentDidUpdate(e,t){const{document:a,vivaldiWindowId:i}=this.context;Po.a.isSettings(i)&&t.category!==this.state.category&&(a.title=this.getWindowTitle()),t.category!==this.state.category&&this.scrollTop()}render(){if(Po.a.isGuestSession(this.context.vivaldiWindowId))return i.createElement(Fo,{__source:{fileName:Mo,lineNumber:322}});const e=(t=this.state.category,Object.keys(jo).filter(e=>!("calendar"===e||"mail"===e||"rss"===e)).filter(e=>{const a=jo[e].section,i=!a||a===e,s=!!t&&a===t.section;return i||s}).map(e=>({...jo[e],key:e})));var t;const a=this.state.filter&&this.state.filter.toLowerCase(),s=a.length>=2?a:"";return i.createElement(gt.a,{focusName:"focus_settings",className:"vivaldi-settings",__source:{fileName:Mo,lineNumber:335}},i.createElement("header",{className:"settings-header",__source:{fileName:Mo,lineNumber:339}},i.createElement("h1",{__source:{fileName:Mo,lineNumber:340}},this.getWindowTitle())),i.createElement("div",{className:"settings-sidebar",__source:{fileName:Mo,lineNumber:343}},i.createElement("header",{className:"settings-navigation-header",__source:{fileName:Mo,lineNumber:344}},i.createElement("input",{className:"settings-search",ref:this.refFilter,type:"search",placeholder:Object(o.a)("verb","Search"),value:this.state.filter,onChange:this.onSettingsFilter,autoFocus:Po.a.isSettings(this.context.vivaldiWindowId),tabIndex:"0",__source:{fileName:Mo,lineNumber:345}})),i.createElement(Wt.a,{ref:"treeList",nodes:e,className:"settings-navigation",settings:"SETTINGS_TREE",onItemClick:this.selectNode,onItemsActivated:this._activateRow,enableDragAndDrop:!1,rowHeight:28,isFolder:Ka.a,hasChildren:Ka.a,renderItemContent:this.renderNavigationItem,__source:{fileName:Mo,lineNumber:354}})),this.state.category&&i.createElement("div",{className:"settings-content",ref:this.refContent,__source:{fileName:Mo,lineNumber:371}},this.show(jo.general)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:375}},i.createElement(xs,{filter:s,__source:{fileName:Mo,lineNumber:376}})),this.show(jo.general)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:381}},i.createElement(Z,{filter:s,__source:{fileName:Mo,lineNumber:382}})),this.show(jo.general)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:386}},i.createElement(Ft,{filter:s,__source:{fileName:Mo,lineNumber:387}})),this.show(jo.appearance)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:391}},i.createElement(z,{filter:s,__source:{fileName:Mo,lineNumber:392}})),this.show(jo.appearance)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:396}},i.createElement(ra,{filter:s,__source:{fileName:Mo,lineNumber:397}})),this.show(jo.themes)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:401}},i.createElement(pr,{filter:s,__source:{fileName:Mo,lineNumber:402}})),this.show(jo.themes)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:406}},i.createElement(Vn.a,{filter:s,__source:{fileName:Mo,lineNumber:407}})),this.show(jo.themes)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:411}},i.createElement(Fa,{filter:s,__source:{fileName:Mo,lineNumber:412}}),i.createElement(At,{filter:s,__source:{fileName:Mo,lineNumber:413}})),this.show(jo.startpage)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:418}},i.createElement(Yi,{filter:s,__source:{fileName:Mo,lineNumber:419}})),this.show(jo.tabs)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:424}},i.createElement(Hn,{filter:s,__source:{fileName:Mo,lineNumber:425}})),this.show(jo.panel)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:430}},i.createElement(ba,{filter:s,__source:{fileName:Mo,lineNumber:431}})),this.show(jo.addressbar)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:436}},i.createElement(k,{filter:s,__source:{fileName:Mo,lineNumber:437}})),this.show(jo.bookmarks)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:442}},i.createElement(pe,{filter:s,__source:{fileName:Mo,lineNumber:443}}),i.createElement(le,{filter:s,__source:{fileName:Mo,lineNumber:444}})),this.show(jo.qc)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:448}},i.createElement(Pa,{filter:s,__source:{fileName:Mo,lineNumber:449}})),this.show(jo.keyboard)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:453}},i.createElement(Tt.a,{filter:s,view:"editable",__source:{fileName:Mo,lineNumber:454}})),this.show(jo.mouse)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:458}},i.createElement(oa.a,{filter:s,category:this.state.category,__source:{fileName:Mo,lineNumber:459}})),this.show(jo.search)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:464}},i.createElement(oi.a,{filter:s,__source:{fileName:Mo,lineNumber:465}})),this.show(jo.privacy)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:469}},i.createElement(Oa,{filter:s,__source:{fileName:Mo,lineNumber:470}})),this.show(jo.privacy)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:474}},i.createElement(Ze,{filter:s,__source:{fileName:Mo,lineNumber:475}})),this.show(jo.privacy)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:479}},i.createElement(ri,{filter:s,__source:{fileName:Mo,lineNumber:480}})),this.show(jo.privacy)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:484}},i.createElement(ct,{filter:s,__source:{fileName:Mo,lineNumber:485}})),this.show(jo.downloads)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:489}},i.createElement(pt,{filter:s,__source:{fileName:Mo,lineNumber:490}})),this.show(jo.sync)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:495}},i.createElement(Ms.a,{category:this.state.category,filter:s,__source:{fileName:Mo,lineNumber:496}})),this.show(jo.webpages)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:503}},i.createElement(Do,{filter:s,__source:{fileName:Mo,lineNumber:504}})),this.show(jo.webpages)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:508}},i.createElement(vr,{filter:s,__source:{fileName:Mo,lineNumber:509}})),this.show(jo.webpages)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:513}},i.createElement(Ua.a,{prefs:!0,filter:s,__source:{fileName:Mo,lineNumber:514}})),this.show(jo.webpages)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:518}},i.createElement(ye,{filter:s,__source:{fileName:Mo,lineNumber:519}})),this.show(jo.webpages)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:523}},i.createElement(Et,{filter:s,__source:{fileName:Mo,lineNumber:524}})),this.show(jo.network)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:530}},i.createElement(da,{filter:s,__source:{fileName:Mo,lineNumber:531}})),!1,!1,!1,!1,this.show(jo.biscuit)&&i.createElement("section",{className:"setting-section",__source:{fileName:Mo,lineNumber:573}},i.createElement(te,{filter:s,__source:{fileName:Mo,lineNumber:574}}))))}}Lo(Uo,"contextType",R.a);t.b=Uo},function(e,t,a){"use strict";var i=a(0),s=a(2),n=a(160),r=a(119),o=a(17),l=a.n(o),c=a(141);var d=function(e="",t="",a){if(t.startsWith("data:"))return t;const s=e.toLowerCase().split(" "),n=new RegExp("("+s.map(e=>Object(c.a)(e.toLowerCase())).filter(e=>e.trim().length>0).join("|")+")","i"),r=t.toLowerCase().split(n);let o=0;return Object(i.createElement)("span",{className:a},r.reduce((e,a,s)=>{const r=o,l=a.match(n);return o+=a.length,l?e.concat(Object(i.createElement)("b",{key:s},t.substr(r,a.length))):e.concat(Object(i.createElement)("span",{key:s},t.substr(r,a.length)))},[]))},u=a(13),h="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniLinkItem.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.PureComponent{constructor(...e){super(...e),m(this,"domElement",i.createRef()),m(this,"handleMouseUp",e=>{1===e.button&&this.props.onMiddleClick()}),m(this,"handleDelete",e=>{this.props.onDelete&&(this.props.onDelete(),e.stopPropagation())})}componentDidUpdate(e){!e.isHighlighted&&this.props.isHighlighted&&this.domElement.current&&this.domElement.current.scrollIntoViewIfNeeded()}render(){const{displayText:e,index:t,isHighlighted:a,linkItem:n,onClick:r,onMouseOver:o,pattern:c,favicon:m}=this.props,p=l()({"omni-clickable":!0,OmniLinkItem:!0,"OmniLinkItem--Highlighted":a,"OmniLinkItem--SingleValue":!this.props.details});return i.createElement("div",{"data-index":t,"data-url":n.nickname||n.url||"",ref:this.domElement,className:p,onClick:r,onMouseUp:this.handleMouseUp,onMouseOver:o,__source:{fileName:h,lineNumber:72}},m&&i.createElement("div",{className:"OmniLinkItem-Favicon",__source:{fileName:h,lineNumber:85}},m),i.createElement("span",{className:"OmniLinkItem-Url",__source:{fileName:h,lineNumber:88}},c?d(c,e,"OmniLinkItem-Url"):e),this.props.details&&i.createElement("span",{className:"OmniLinkItem-Details",__source:{fileName:h,lineNumber:95}},c&&d(c,this.props.details||"","OmniLinkItem-Details")||this.props.details,"OMNI_RESULT_FOLDER_NICKNAME"===n.type&&" – "+Object(s.a)("Open all bookmarks in folder ($1)",[n.urls&&n.urls.length||0])),this.props.onDelete&&i.createElement("span",{className:"OmniLinkItem-EraseButton",title:Object(s.a)("Delete history item"),onClick:this.handleDelete,dangerouslySetInnerHTML:{__html:u.hc},__source:{fileName:h,lineNumber:108}}))}}var g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\OmniDropdown.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends i.PureComponent{constructor(...e){super(...e),b(this,"state",{searchEngineKeyword:"",searchEngineName:""}),b(this,"getNumberOfItems",()=>this.props.items.reduce((e,{items:t})=>e+t.length,0)),b(this,"handleClickOutside",()=>{this.props.onClickOutside&&this.props.onClickOutside()}),b(this,"onLinkItemClicked",(e,t)=>{const a={ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,button:t.button};this.props.onLinkItemClicked(e,Object(n.b)(a))}),b(this,"onDeleteItem",e=>{this.props.onDeleteItem(e)}),b(this,"getFaviconUrl",()=>this.props.typedSearchEngine?this.props.typedSearchEngine.faviconUrl:this.props.defaultSearchEngine?this.props.defaultSearchEngine.faviconUrl:""),b(this,"onLinkItemMiddleClicked",e=>{const t=n.a.openInBackgroundTab;this.props.onLinkItemClicked(e,t)}),b(this,"renderLinkItem",(e,t)=>{const a=this._linkItemCount===this.props.selectionIndex,s=function(e){return e.displayText?e.displayText:e.url?e.url:e.title?e.title:e.text?e.text:""}(e);return this._linkItemCount++,i.createElement(p,{key:e.type+"-"+e.id+t,displayText:s,index:t,isHighlighted:a,linkItem:e,details:e.nickname||e.title||void 0,onClick:this.onLinkItemClicked.bind(null,e),onMiddleClick:this.onLinkItemMiddleClicked.bind(null,e),onDelete:e.disableDelete?void 0:this.onDeleteItem.bind(null,e),pattern:e.disablePatternHighlight?void 0:this.props.pattern,favicon:!this.props.hideIcons&&(e.favicon?e.favicon:void 0),__source:{fileName:g,lineNumber:154}})}),b(this,"renderCollection",({items:e,title:t,type:a})=>{if(!e||0===e.length)return null;const n=`${a}-${t||""}`;return i.createElement("section",{key:n,className:"OmniDropdown-Collection",__source:{fileName:g,lineNumber:183}},t&&i.createElement("label",{className:"OmniDropdown-Label",__source:{fileName:g,lineNumber:184}},Object(s.a)(t)),e.map(this.renderLinkItem))})}static getDerivedStateFromProps(e){const t=(e.typedSearchEngine||e.defaultSearchEngine||{name:""}).name;return{searchEngineKeyword:!e.typedSearchEngine&&e.defaultSearchEngine&&e.defaultSearchEngine.keyword&&e.defaultSearchEngine.keyword+" "||"",searchEngineName:t}}componentDidUpdate(e,t){if(this.props.selectionIndex!==e.selectionIndex){const e=this.getCurrentValue(this.props.selectionIndex);this.props.onSelectedItemChanged&&e&&this.props.onSelectedItemChanged(e)}const a=this.getNumberOfItems();this.props.onNumberOfSelectableItemsChanged&&this.props.onNumberOfSelectableItemsChanged(a)}getCurrentValue(e){return this.props.items.reduce((e,t)=>[...e,...t.items],[])[e]}render(){const{items:e}=this.props;return this._linkItemCount=0,i.createElement("div",{className:"ignore-react-onclickoutside OmniDropdown",__source:{fileName:g,lineNumber:198}},e.map(this.renderCollection))}}t.a=Object(r.a)(f)},function(e,t,a){"use strict";var i=a(9),s=a(10),n=a(11),r=a(4),o=a(27),l=a(58),c=a(251),d=a(358),u=a(145),h=a(100),m=a(214),p=a(1);const g={};let b=[];const f=[],_=new class extends l.EventEmitter{emitChange(){this.emit(r.a.CHANGED)}getSearchText(){const e=i.a.getActivePage(),t=g[e.get("id")];return t&&t.editText||""}getTypedSearchHistory(){return b||[]}addChangeListener(e){this.on(r.a.CHANGED,e)}removeChangeListener(e){this.removeListener(r.a.CHANGED,e)}};function N(e,t=u.default){let a=f;try{e&&(a=JSON.parse(e))}catch(e){console.warn("Unable to parse typed history JSON. TODO: fix!",e)}a&&t(function(e=[]){if(!Array.isArray(e))throw TypeError("typedhistory must be an array");return Object(d.a)(e.map(e=>"string"==typeof e?{id:e,url:e,when:Date.now()}:e&&["id","url","when"].every(t=>e.hasOwnProperty(t))?e:null))}(a))}function v(e){!function(e){if("function"!=typeof e)throw TypeError("loadTypedHistory: callback required");if(s.a.get(p.kHistoryDaysToKeepVisits)>0){N(o.a.getSync("TYPED_SEARCH_HISTORY"),e)}else N(JSON.stringify(b),e)}(t=>{let a=(i=t,n=e.query,r=i||f,i&&Array.isArray(i)&&i.length>=30&&(r=Object(c.a)(i,30)),r&&n&&(r=r.filter(({url:e})=>e!==n)),r);var i,n,r;a=[{id:e.query,url:e.query,when:Date.now()}].concat(a),s.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(a)}),b=a,_.emitChange()})}function E(){o.a.remove("TYPED_SEARCH_HISTORY")}n.a.register(e=>{switch(e.actionType){case r.a.SEARCH_FIELD_SET_STATE:!function(e){const t=e.page.get("id");g[t]=Object.assign(g[t]||{},Object(h.a)(e.state,"searchEngine")),_.emitChange()}(e);break;case r.a.SEARCH_FIELD_ADD_TYPED_HISTORY:v(e);break;case"CHROME_TABS_REMOVED":!function(e){g[e.tabId]=void 0}(e);break;case r.a.SEARCH_FIELD_DELETE_TYPED_HISTORY:!function(e){const t=b.filter(({url:t})=>e!==t);s.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(t)}),b=t,_.emitChange()}(e.query);break;case r.a.SEARCH_FIELD_DELETE_TYPED_HISTORY_FROM_DATABASE:E();break;case r.a.NAVIGATION_HISTORY_ALL_DELETED:E(),b=[],_.emitChange();break;case r.a.SEARCH_FIELD_TYPED_HISTORY_WRITE_TO_DATABASE:o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(b)});break;case r.a.SEARCH_FIELD_INIT_TYPED_HISTORY:N(e.typedHistory,e=>{b=e,_.emitChange()});break;case r.a.BROWSING_DATA_REMOVED:!0===Object(m.a)(e,"dataTypes.typedHistory")&&function({since:e,dataTypes:{typedHistory:t}}){if(null==t)throw TypeError("Typed history must be true or false");const a=b.filter(({when:t})=>e-t>0);s.a.get(p.kHistoryDaysToKeepVisits)>0&&o.a.set({TYPED_SEARCH_HISTORY:JSON.stringify(a)}),b=a,_.emitChange()}(e)}}),t.a=_},function(e,t,a){"use strict";(function(e){var i=a(366),s=a(37),n=a(22),r=a(86),o=a(19),l=a(96),c=a(40),d=a(79),u=(a(106),a(12)),h=a(9),m=a(8),p=a(0),g=a.n(p),b=a(29),f=a.n(b),_=a(207),N=a(170),v=a(1036),E=a(388),w=a(991),S=a(211),C=a(213),k=a(999),y=a(116),O=a(126),A=(a(53),a(25)),T=a(16),I=a(17),D=a.n(I),P=a(60),x=a(6),M=a(312),L=a(548),j=a(21),B=a(536),R=a(279),F=a(161),U=a(36),W=a(1),H=a(13),V=a(123),G=a(20),K="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabBar.jsx";function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Y=[W.kAddressBarShowProgress,W.kKeyboardTabToAll,W.kMediaRouterMediaRemotingEnabled,W.kMouseWheelTabSwitch,W.kPanelsPosition,W.kTabsActiveMinSize,W.kTabsAlignNext,W.kTabsAtEdge,W.kTabsBarWidth,W.kTabsClosePinned,W.kTabsCounterDetection,W.kTabsCycleByRecentOrder,W.kTabsDimHibernated,W.kTabsDoubleClickClose,W.kTabsBarHeight,W.kTabsMinimize,W.kTabsPageLoadInfo,W.kTabsNeverCloseLast,W.kTabsSelectionEnabled,W.kTabsShowCloseButton,W.kTabsStackingAllowDnd,W.kTabsStackingAllowRename,W.kTabsStackingDndDelay,W.kTabsStackingMode,W.kTabsStackingNameMap,W.kTabsThumbnails,W.kTabsTooltip,W.kTabsUnread,W.kTabsVisualSwitchEnable,W.kThemeUseAnimation],$=function(e,t=!1){return{tabs:h.a.getTabs(t),pages:h.a.getPages(),activePageId:e.id,activePageTitle:e.title,url:e.pendingUrl||e.url,incognito:e.incognito,tilingId:e.getIn(["extData","tiling","id"]),groupName:e.getIn(["extData","group"]),pinned:e.pinned,isSelecting:h.a.isSelecting(),pageSelection:h.a.getSelection(),pageHistory:h.a.getPageHistory()}};class Q extends g.a.PureComponent{constructor(t){super(t),z(this,"rerenderKey","0"),z(this,"visibleOnMount",this.props.visible),z(this,"updateDocumentTitleById",e=>{const t=h.a.getPageById(e);t&&this.updateDocumentTitle(t)}),z(this,"updateDocumentTitle",e=>{const t=G.a.getDisplayTitle(e);t!==document.title&&(document.title=t)}),z(this,"onWindowResize",()=>{clearTimeout(this._resizingTimeout),this.setState({isResizing:!0}),this._resizingTimeout=setTimeout(()=>{this.setState({isResizing:!1})},1e3)}),z(this,"setTabBarWidth",(e,t=!0)=>{this.setState({tabBarWidth:e},()=>t&&m.a.set(W.kTabsBarWidth,e))}),z(this,"setTabBarHeight",(e,t=!0)=>{this.setState({tabBarHeight:e},()=>t&&m.a.set(W.kTabsBarHeight,e))}),z(this,"_onPageStoreChange",()=>{const e=h.a.getActivePage();this.updateDocumentTitle(e);const t="off"===this.props.prefValues[W.kTabsStackingMode];this.setState($(e,t))}),z(this,"_onMediaStateStoreChanged",()=>{const e=h.a.getActivePage(),t=d.a.getMediaStateByTabId(e.id);this.setState({mediaState:t})}),z(this,"isSelecting",()=>Boolean(this.props.prefValues[W.kTabsSelectionEnabled]&&this.state.isSelecting&&this.state.pageSelection.count())),z(this,"getSelectedPages",()=>this.isSelecting()?this.state.pageSelection.reduce((e,t)=>{const a=h.a.getPages().find(e=>e.id===t);return a?e.push(a):e},Object(j.List)()).sortBy(e=>e.index):Object(j.List)()),z(this,"_onCommandSpy",e=>{switch(e){case"COMMAND_BOOKMARK_SELECTED_TABS":s.a.bookmarkPages(this.getSelectedPages(),!1,n.a.getRootNode().id);break;case"COMMAND_SAVE_SELECTED_SESSION":const e=this.getSelectedPages().map(e=>e.id).toArray();e.length>0&&c.a.showSaveSession({mode:"selected",ids:e})}}),z(this,"onTabStoreChange",t=>{const{action:a,url:i,maybeEvent:s,addOpenerTabId:n}=t,r="off"===this.props.prefValues[W.kTabsStackingMode];if("newBackgroundTab"===a)e.nextTick(()=>u.a.openURL(i,{inBackground:!0,addOpenerTabId:n}));else if("closeAllButActiveTab"===a)e.nextTick(()=>this.closeAllButActiveTab());else if("switchTabBackBySetting"===a)this.switchBackBySetting(s);else if("switchTabForwardBySetting"===a)this.switchForwardBySetting(s);else if("switchTabBackByHistory"===a)this.switchBackByHistory(s);else if("switchTabForwardByHistory"===a)this.switchForwardByHistory(s);else if("switchTabBackByOrder"===a)this.switchBackByOrder(s);else if("switchTabForwardByOrder"===a)this.switchForwardByOrder(s);else if("viewPageSource"===a)this.state.url.startsWith("view-source:")||e.nextTick(()=>u.a.openURL(`view-source:${this.state.url}`,{incognito:this.state.incognito}));else if("stackUntile"===a)e.nextTick(()=>{this.isSelecting()?this.getSelectedPages().map(e=>e.getIn(["extData","tiling","id"])).filter(Boolean).toSet().forEach(u.a.untileTileGroup):e.nextTick(()=>u.a.untileTileGroup(this.state.tilingId))});else if("stackCreate"!==a||r)if("stackDissolve"!==a||r)if("stackRemove"!==a||r)"stackTileGrid"===a?e.nextTick(()=>{this.isSelecting()?u.a.tilePages(this.getSelectedPages(),"grid"):u.a.tileTabStack(this.state.groupName,"grid")}):"stackTileHorizontal"===a?e.nextTick(()=>{this.isSelecting()?u.a.tilePages(this.getSelectedPages(),"column"):u.a.tileTabStack(this.state.groupName,"column")}):"stackTileVertical"===a?e.nextTick(()=>{this.isSelecting()?u.a.tilePages(this.getSelectedPages(),"row"):u.a.tileTabStack(this.state.groupName,"row")}):"tabThumbnail"===a&&this.switchTabViewAndEnablePreview();else{const t=h.a.getPageById(this.state.activePageId);t&&e.nextTick(()=>u.a.removeFromTabStack(t))}else e.nextTick(()=>u.a.expandTabStack(this.state.groupName));else e.nextTick(()=>{if(this.isSelecting())u.a.createTabStack(this.getSelectedPages());else{const e=h.a.getPages().filter(e=>!e.getIn(["extData","group"])&&!1===e.pinned);if(e.count()>1){const[t,a]=Object(R.a)(h.a.getPageById(this.state.activePageId),h.a.getTabs(r));if(a.count()>1){const e=h.a.getNewGroupName();Object(M.a)(e,t),u.a.createTabStack(a,null,e)}else u.a.createTabStack(e)}}})}),z(this,"onSelectTab",(e,t)=>{C.a.clearTooltip(),e.active?u.a.clearSelection():(t.stopPropagation(),u.a.openPage(e.id))}),z(this,"createTab",()=>{u.a.openURL()}),z(this,"closeAllButActiveTab",()=>{u.a.closeOther(h.a.getActivePage(),!1)}),z(this,"removeFromTabStack",e=>{u.a.removeFromTabStack(e)}),z(this,"muteTab",(e,t)=>{t&&t.stopPropagation(),u.a.toggleMuting(e)}),z(this,"closeSingleTab",e=>{u.a.closePage(e)}),z(this,"switchBackBySetting",t=>{this.props.prefValues[W.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(t,!1):this.props.prefValues[W.kTabsCycleByRecentOrder]?e.nextTick(()=>u.a.cycleByHistory(t,{goBack:!0})):e.nextTick(()=>u.a.cycleByOrder(t,{goBack:!0}))}),z(this,"switchForwardBySetting",t=>{this.props.prefValues[W.kTabsVisualSwitchEnable]?this.props.switchTabVisualTabSwitcher(t,!0):this.props.prefValues[W.kTabsCycleByRecentOrder]?e.nextTick(()=>u.a.cycleByHistory(t,{goBack:!1})):e.nextTick(()=>u.a.cycleByOrder(t,{goBack:!1}))}),z(this,"switchBackByHistory",t=>{e.nextTick(()=>u.a.cycleByHistory(t,{goBack:!0}))}),z(this,"switchForwardByHistory",t=>{e.nextTick(()=>u.a.cycleByHistory(t,{goBack:!1}))}),z(this,"switchBackByOrder",t=>{e.nextTick(()=>u.a.cycleByOrder(t,{goBack:!0}))}),z(this,"switchForwardByOrder",t=>{e.nextTick(()=>u.a.cycleByOrder(t,{goBack:!1}))}),z(this,"reopenClosedTab",()=>{y.a.undeletePreviousTab()}),z(this,"switchTabViewAndEnablePreview",()=>{const e=this.props.prefValues[W.kTabsThumbnails],t=this.props.tabPosition,{tabBarWidth:a}=this.state,i="left"===t||"right"===t;e?i?m.a.set(W.kTabsThumbnails,!1):this.switchTabView():(m.a.set(W.kTabsThumbnails,!0),i&&30===a&&this.switchTabView())}),z(this,"switchTabView",()=>{const e=this.props.tabPosition,{tabBarWidth:t,tabBarHeight:a}=this.state;if("top"===e||"bottom"===e){const e=a<75?150:30;this.setTabBarHeight(e)}else{if("left"!==e&&"right"!==e)throw new Error("Unknown tab position "+e);{const e=181!==t?181:30;this.setTabBarWidth(e)}}}),z(this,"onSlidebarPosition",Object(V.a)((e,t)=>{const a=f.a.findDOMNode(this.resizeObserver);if(!(a instanceof Element))return;const i=a.getBoundingClientRect();switch(this.props.tabPosition){case"top":this.setTabBarHeight(Math.round(t-i.top),!1);break;case"bottom":this.setTabBarHeight(Math.round(i.bottom-t),!1);break;case"left":this.setTabBarWidth(Math.round(e-i.left),!1);break;case"right":this.setTabBarWidth(Math.round(i.right-e),!1);break;default:throw new Error("Unknown tabbar position")}},64)),z(this,"handleSliderDown",()=>{this.setState({isResizing:!0})}),z(this,"handleSliderUp",()=>{this.setState({isResizing:!1}),"top"===this.props.tabPosition||"bottom"===this.props.tabPosition?(m.a.set(W.kTabsBarHeight,this.state.tabBarHeight),this.snapToEdge()):m.a.set(W.kTabsBarWidth,this.state.tabBarWidth)}),z(this,"snapToEdge",()=>{const e=f.a.findDOMNode(this.tabsContainer);if(!(e instanceof HTMLElement))return;let t=parseInt(e.style.height);t>30&&t<50?t=30:t<150&&t>130&&(t=150),this.setTabBarHeight(t)}),z(this,"getGroupHighlightId",e=>h.a.getGroupHighlightId(e)),z(this,"getTabTooltipContextMenu",e=>[{handler:this.closeSingleTab.bind(this,e),...Object(x.a)("Close Tab")},{name:"---"},{handler:this.removeFromTabStack.bind(this,e),visible:Object(F.b)(e),...Object(x.a)("Remove from Tab Stack")}]),z(this,"getTabBarContextMenu",()=>[{handler:this.createTab,...Object(x.a)("command","New Tab")},{name:"---"},{handler:s.a.bookmarkAllOpenPages.bind(s.a,n.a.getRootNode().id),...Object(x.a)("Bookmark All Tabs")},{handler:c.a.showSaveSession.bind(this,{mode:"all"}),...Object(x.a)("Save All Tabs as Session")},{name:"---"},{handler:this.reopenClosedTab,visible:Boolean(O.a.getTrash().length),...Object(x.a)("Reopen Closed Tab")}]),z(this,"onMouseDown",e=>{e.button}),z(this,"onMouseUp",e=>{1===e.button&&0===e.buttons&&this.createTab()}),z(this,"onDoubleClick",e=>{0===e.button&&"top"!==this.props.tabPosition&&this.createTab()}),z(this,"getTooltipPlacement",()=>({top:"below",bottom:"above",left:"after",right:"before"}[this.props.tabPosition])),z(this,"getTooltipMediaState",e=>{let t;return t=this.state.activePageId===e?this.state.mediaState:d.a.getMediaStateByTabId(e),t}),z(this,"getTooltipContent",e=>{const t=h.a.getPageById(e);if(!t)return{width:0,height:0,content:null};const{prefValues:a,vivaldiSettings:s}=this.props;let n,r;const o=Object(F.b)(t);if("on"===a[W.kTabsStackingMode]&&o){const e=t.getIn(["extData","group"]);n=h.a.getGroup(e),r=this.getGroupHighlightId(e)}else n=j.List.of(t),r=null;const l=!o&&(Object(F.d)(t)&&Object(F.e)(t)||t.active),c=g.a.createElement("div",{className:D()({"tab-group":o,"tab-solo":!o}),__source:{fileName:K,lineNumber:757}},n.map(e=>g.a.createElement("div",{key:n.count()>1?e.id:"tabbar_tooltip",className:D()({active:e.active,"tooltip-item":!0,"last-active":r&&r===e.id}),onMouseDown:L.a.bind(this,[e]),onContextMenu:this.onTooltipContextMenu.bind(this,e),onClick:this.onSelectTab.bind(this,e),__source:{fileName:K,lineNumber:764}},!l&&g.a.createElement(S.a,{src:e.getIn(["extData","thumbnail"]),__source:{fileName:K,lineNumber:776}}),g.a.createElement("div",{className:"thumbnail-caption",__source:{fileName:K,lineNumber:777}},g.a.createElement("span",{className:"thumbnail-text",__source:{fileName:K,lineNumber:778}},G.a.getDisplayTitle(e).length>245?G.a.getDisplayTitle(e).substring(0,240)+"...":G.a.getDisplayTitle(e)),("playing"===this.getTooltipMediaState(e.id)||"muting"===this.getTooltipMediaState(e.id))&&g.a.createElement("button",{className:"tooltip-audio-button",tabIndex:a[W.kKeyboardTabToAll],onClick:this.muteTab.bind(this,e),__source:{fileName:K,lineNumber:786}},g.a.createElement(i.a,{color:s.BROWSER_COLOR_FG,animated:a[W.kThemeUseAnimation],mode:this.getTooltipMediaState(e.id),__source:{fileName:K,lineNumber:791}})),g.a.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:H.hc},tabIndex:a[W.kKeyboardTabToAll],onClick:this.closeSingleTab.bind(this,e),__source:{fileName:K,lineNumber:798}}))))),d=l?30:210,u=this.context.innerWidth-("left"===this.props.tabPosition||"right"===this.props.tabPosition?this.getWidth():0);let m=224*n.count(),p=d+1;if(m>u){const e=Math.floor(u/224);m=224*e,p=(2+d)*Math.ceil(n.count()/e)}return{width:m,height:p,content:c}}),z(this,"getTabDirection",()=>{const e=this.props.tabPosition;return"left"===e||"right"===e?"column":"row"}),z(this,"setOverflowClass",e=>{this.setState({tabStripOverflow:e})}),z(this,"onResize",e=>{const t=e[0].target;this._isMounted&&this.setState({tabStripWidth:t.clientWidth,tabStripHeight:t.clientHeight})}),z(this,"onDragOver",e=>{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||"vivaldi/x-tab-entries"===e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.dataTransfer.dropEffect="copy"))}),z(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation()}),z(this,"onDrop",e=>{if(!e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||"vivaldi/x-tab-entries"===e))return;e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("text/uri-list");if(t.length>0){const e=t.split("\n");for(let t=0;t<e.length;t++)u.a.openURL(e[t],{inCurrent:!1,inBackground:t>0})}else{const t=e.dataTransfer.getData("text/plain");t.length>0&&Object(U.l)(t)&&u.a.openURL(t,{inCurrent:!1})}}),z(this,"getWidth",()=>{const{tabBarWidth:e}=this.state,t=30+(this.state.tabStripOverflow?16:0);return Math.min(Math.max(e,t),260)||t}),z(this,"getHeight",()=>{if(!this.props.prefValues[W.kTabsThumbnails])return 30;const{tabBarHeight:e}=this.state;return Math.min(Math.max(e,30),150)||30}),z(this,"clearDisplay",e=>{const t=e[0];t instanceof HTMLElement&&"none"===t.style.display&&t.style.removeProperty("display")}),z(this,"onContextMenu",e=>{Object(P.a)(this.context.vivaldiWindowId,this.getTabBarContextMenu())(e)}),z(this,"onTooltipContextMenu",(e,t)=>{Object(P.a)(this.context.vivaldiWindowId,this.getTabTooltipContextMenu.bind(this,e))(t)});const a="off"===t.prefValues[W.kTabsStackingMode];this.state={tabStripWidth:0,tabStripHeight:0,isResizing:!1,tabStripOverflow:!1,tabBarHeight:this.props.prefValues[W.kTabsBarHeight],tabBarWidth:this.props.prefValues[W.kTabsBarWidth],...$(h.a.getActivePage(),a),mediaState:""}}componentDidUpdate(e,t){"top"!==this.props.tabPosition&&"bottom"!==this.props.tabPosition||!0!==this.props.prefValues[W.kTabsThumbnails]||!1!==e.prefValues[W.kTabsThumbnails]||this.setTabBarHeight(150),e.prefValues[W.kTabsStackingMode]!==this.props.prefValues[W.kTabsStackingMode]&&this._onPageStoreChange()}componentDidMount(){h.a.addChangeListener(this._onPageStoreChange),E.a.addChangeListener(this.onTabStoreChange),r.a.addListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),r.a.addListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),this.updateDocumentTitleById(this.state.activePageId),this._isMounted=!0,this.context.addEventListener("resize",this.onWindowResize,!1),this._mediaStateStoreToken=d.a.addListener(this._onMediaStateStoreChanged)}componentWillUnmount(){this._mediaStateStoreToken.remove(),h.a.removeChangeListener(this._onPageStoreChange),E.a.removeChangeListener(this.onTabStoreChange),r.a.removeListener("COMMAND_SAVE_SELECTED_SESSION",this._onCommandSpy),r.a.removeListener("COMMAND_BOOKMARK_SELECTED_TABS",this._onCommandSpy),this._isMounted=!1,this.context.removeEventListener("resize",this.onWindowResize,!1),clearTimeout(this._resizingTimeout)}render(){const e=this.props.vivaldiSettings,t=this.props.prefValues,a=this.props.tabPosition,i="off"!==t[W.kTabsStackingMode],s=this.getTabDirection(),n="row"===s?this.state.tabStripWidth-32:this.state.tabStripWidth,r="column"===s?this.state.tabStripHeight-32:this.state.tabStripHeight,o=this.isSelecting()?this.state.pageSelection:Object(j.Set)(),l=t[W.kTabsThumbnails]&&("top"===a||"bottom"===a)||"left"===a||"right"===a;return g.a.createElement(B.VelocityComponent,{key:this.rerenderKey,animation:"top"===a||"bottom"===a?{height:this.getHeight()}:{width:this.getWidth()},duration:t[W.kThemeUseAnimation]&&!this.state.isResizing?100:0,complete:this.clearDisplay,begin:this.clearDisplay,__source:{fileName:K,lineNumber:980}},g.a.createElement("div",{id:"tabs-container",ref:e=>this.tabsContainer=e,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onContextMenu:this.onContextMenu,className:D()({"tab-group-open":i&&Object(F.b)(h.a.getActivePage()),[t[W.kTabsThumbnails]?"view-thumbs":"no-thumbs"]:!0,overflow:this.state.tabStripOverflow,[this.props.visible?this.props.tabPosition:"none"]:!0}),onDragOver:this.onDragOver,onDragEnter:this.onDragEnter,onDrop:this.onDrop,__source:{fileName:K,lineNumber:993}},g.a.createElement(_.a,{ref:e=>this.resizeObserver=e,className:"resize",onResize:this.onResize,__source:{fileName:K,lineNumber:1015}},g.a.createElement(w.a,{maxWidth:n,maxHeight:r,direction:s,onSelectTab:this.onSelectTab,getTooltipContent:this.getTooltipContent,getGroupHighlightId:this.getGroupHighlightId,setOverflowClass:this.setOverflowClass,settings:e,prefValues:t,reopenClosedTab:this.reopenClosedTab,tabPosition:this.props.tabPosition,isSelecting:this.isSelecting(),isResizing:this.state.isResizing,pageSelection:o,pages:this.state.pages,tabs:this.state.tabs,switchByScroll:t[W.kMouseWheelTabSwitch],__source:{fileName:K,lineNumber:1020}})),g.a.createElement("div",{className:"toolbar toolbar-tabbar toolbar-noflex sync-and-trash-container",__source:{fileName:K,lineNumber:1041}},!T.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&g.a.createElement(v.a,{__source:{fileName:K,lineNumber:1043}}),g.a.createElement(k.a,{__source:{fileName:K,lineNumber:1044}})),l&&g.a.createElement(N.a,{onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.switchTabView,offset:1,position:this.props.tabPosition,__source:{fileName:K,lineNumber:1047}})))}}z(Q,"contextType",A.a),t.a=Object(o.a)(Object(l.a)(Q,["BROWSER_COLOR_FG"]),Y)}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a(553),n=a(567),r=a(92),o=a(530),l=a(569),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentPopup.jsx";function d({noteId:e,attachments:t,onRemoveAttachment:a,onInsertMarkdown:s,dragFormat:n}){return i.createElement("div",{className:"NotesAttachmentPopup",__source:{fileName:c,lineNumber:19}},i.createElement(l.a,{noteId:e,attachments:t,onRemoveAttachment:a,onInsertMarkdown:s,dragFormat:n,__source:{fileName:c,lineNumber:20}}),i.createElement(o.a,{noteId:e,disabled:!1,keyAccess:-1,text:"Add attachment",__source:{fileName:c,lineNumber:28}}))}var u=a(26),h=a(53),m=a(25),p=a(2),g=a(13);a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return N}));var b="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerToolbar.jsx";function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=[{bold:Object(p.a)("Bold"),italic:Object(p.a)("Italic"),strikeThrough:Object(p.a)("Strike through")},{insertOrderedList:Object(p.a)("Numbered list"),insertUnorderedList:Object(p.a)("Bullet list")},{outdent:Object(p.a)("Remove indentation"),indent:Object(p.a)("Indent")},{createLink:Object(p.a)("Create Link")},{undo:Object(p.a)("win_linux","Undo"),redo:Object(p.a)("win_linux","Redo")}];class N extends i.Component{constructor(...e){super(...e),f(this,"state",{anchor:"",buttonState:[],createLinkModalOpen:!1,formatBlock:"p",link:"",isAttachmentPopupOpen:!1}),f(this,"updateButtonState",(e,t)=>{this.setState(a=>({buttonState:e||a.buttonState,formatBlock:t||a.formatBlock}))}),f(this,"updateLinkState",e=>{this.setState(t=>{if(t.anchor!==e)return{anchor:e}})}),f(this,"onCreateLink",e=>{this.setState({createLinkModalOpen:!1}),this.props.onCreateLink(e)}),f(this,"onCancelCreateLink",()=>{this.setState({createLinkModalOpen:!1}),this.props.onCancelCreateLink()}),f(this,"showCreateLinkModal",()=>this.setState({createLinkModalOpen:!0})),f(this,"cacheFocus",()=>{const{document:e}=this.context;e.activeElement?this._focusCache=e.activeElement:this._focusCache=void 0}),f(this,"restoreFocus",()=>{this._focusCache&&this._focusCache.focus()})}render(){const{noteId:e}=this.props;let t=0;return i.createElement("div",{className:"NotesManager-Toolbar",__source:{fileName:b,lineNumber:143}},this.state.createLinkModalOpen&&i.createElement(s.a,{onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,link:this.state.link||this.state.anchor,__source:{fileName:b,lineNumber:145}}),i.createElement("div",{className:"NotesManager-Buttons",__source:{fileName:b,lineNumber:151}},i.createElement("div",{className:"NotesManager-ViewButton",__source:{fileName:b,lineNumber:152}},i.createElement(u.a,{className:"NotesManager-RenderMarkdownButton",tooltip:this.props.inFullView?Object(p.a)("Enter Full View"):Object(p.a)("Exit Full View"),onClick:this.props.toggleFullEditor,image:this.props.inFullView?g.K.medium:g.F.medium,__source:{fileName:b,lineNumber:153}})),i.createElement("div",{className:"NotesManager-Stylingbuttons toolbar-default",__source:{fileName:b,lineNumber:169}},i.createElement("select",{onChange:e=>{this.props.onParagraphFormatChange("formatBlock",e),this.restoreFocus()},onMouseDown:this.cacheFocus,value:this.state.formatBlock,title:Object(p.a)("Paragraph Format"),tabIndex:"-1",disabled:this.props.disabled,__source:{fileName:b,lineNumber:170}},i.createElement("option",{value:"h1",__source:{fileName:b,lineNumber:182}},Object(p.a)("Heading 1")),i.createElement("option",{value:"h2",__source:{fileName:b,lineNumber:183}},Object(p.a)("Heading 2")),i.createElement("option",{value:"h3",__source:{fileName:b,lineNumber:184}},Object(p.a)("Heading 3")),i.createElement("option",{value:"h4",__source:{fileName:b,lineNumber:185}},Object(p.a)("Heading 4")),i.createElement("option",{value:"p",__source:{fileName:b,lineNumber:186}},Object(p.a)("Paragraph")),i.createElement("option",{value:"pre",__source:{fileName:b,lineNumber:187}},Object(p.a)("Preformatted"))),_.map((e,s)=>{const n=Object.keys(e).map((s,n)=>i.createElement(u.a,{key:s,tooltip:e[s],image:a(1345)(`./rte-${s}.svg`),onClick:()=>this.props.onStylingButtonClicked(s),tabIndex:-1,disabled:this.props.disabled,isPressed:!0===this.state.buttonState[t+n],__source:{fileName:b,lineNumber:191}}));return t+=n.length,i.createElement("span",{key:s,className:"toolbar toolbar-group",__source:{fileName:b,lineNumber:203}},n)})),i.createElement("div",{className:"NotesManager-MetaButtons",__source:{fileName:b,lineNumber:210}},i.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:b,lineNumber:211}},i.createElement(u.a,{title:Object(p.a)("$1 Attachment","$1 Attachments",[this.props.attachments.length]),onClick:()=>this.setState(e=>({isAttachmentPopupOpen:!e.isAttachmentPopupOpen})),isPopupVisible:this.state.isAttachmentPopupOpen,hidePopup:()=>this.setState({isAttachmentPopupOpen:!1}),popupWidth:222,popupPosition:"below",image:g.n,disabled:this.props.disabled,__source:{fileName:b,lineNumber:212}},e&&i.createElement(d,{attachments:this.props.attachments,noteId:e,onRemoveAttachment:t=>{r.a.removeAttachment(e,t)},onInsertMarkdown:this.props.handleAttachmentMarkdown,dragFormat:this.props.visualMode?"html":"url",__source:{fileName:b,lineNumber:231}})),i.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:b,lineNumber:243}},i.createElement(u.a,{title:Object(p.a)("Text"),onClick:()=>this.props.setVisualMode(!1),isPressed:!this.props.visualMode,disabled:this.props.disabled,__source:{fileName:b,lineNumber:244}}),i.createElement(u.a,{title:Object(p.a)("Visual"),onClick:()=>this.props.setVisualMode(!0),isPressed:this.props.visualMode,disabled:this.props.disabled,__source:{fileName:b,lineNumber:250}}))))),i.createElement("div",{className:"NotesManager-FindToolbar",__source:{fileName:b,lineNumber:260}},i.createElement(n.a,{pageId:this.props.pageId,onFindInPage:(e,t)=>h.a.findInPage(this.props.pageId,e,t),onFindNextInPage:(e,t,a)=>h.a.findNextInPage(this.props.pageId,e,t,a),__source:{fileName:b,lineNumber:261}})))}}f(N,"contextType",m.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var i=a(58),s=a.n(i),n=a(21),r=a.n(n),o=a(11),l=a(4);const c={},d=new class extends s.a{getQueue(e){return c[e]||r.a.Map()}emitChange(){this.emit(l.a.CHANGED)}addChangeListener(e){this.on(l.a.CHANGED,e)}removeChangeListener(e){this.removeListener(l.a.CHANGED,e)}};function u(e){c[e]&&(c[e]=void 0)}o.a.register(e=>{switch(e.actionType){case l.a.BOOKMARK_THUMBNAIL_QUEUE_ADD_ITEM:t=e.pageId,a=e.id,i=e.url,c[t]=r.a.Map({id:a,url:i}),d.emitChange();break;case l.a.BOOKMARK_THUMBNAIL_QUEUE_UPDATE_ITEM:!function(e,t,a){c[e]&&(c[e]=r.a.Map({id:t,url:a}))}(e.pageId,e.id,e.url),d.emitChange();break;case l.a.BOOKMARK_THUMBNAIL_QUEUE_REMOVE_ITEM:u(e.pageId,e.id),d.emitChange();break;case"CHROME_TABS_REMOVED":u(e.tabId),d.emitChange()}var t,a,i;return!0}),t.a=d},function(e,t,a){"use strict";var i=a(7);t.a=e=>function(...t){return new Promise((a,s)=>{e(...t,e=>{i.default.runtime.lastError?s(i.default.runtime.lastError):a(e)})})}},function(e,t,a){"use strict";t.a=function(e=""){return e.replace(/%25/g,"%2525").replace(/%(?![0-9a-fA-F]{2})/g,"%25").replace(/%09/g,"%2509")}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(46);function s(e){return e.map(({keywordId:e,terms:t,url:a,title:s})=>{let n;if(-1!==e){const a=i.a.getByHistoryId(e);n=a?`${a.keyword} ${t}`:`? ${t}`}return{...n?{text:n}:null,url:a,title:s,type:"OMNI_RESULT_TYPED_HISTORY",id:a}})}},,function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAZElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/X+IKHgPCyhs3vxzn+FXwq/7yIGDAt//SqA8MgF9hfa1XsQ+LgAAAABJRU5ErkJggg=="},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiAxMIBBzsKlp7AAAA6klEQVQoz42RP04CURDGf8MObmyk8QSElhtQYGdBYSgJhhvABTCEI+AFJJGaUEDiRewojKEBJWGzBXlRGQoWeKsJOJN5k5l8b/59YsJJyXBGhBJlNIlmPNnmN6TNNWGiNSomaVW0EMOUAlMY05C29/mLV4V69pDYvPedN/QqmLQUDhMARSJyQESOCGyCgjtWYJHY/gWF2AOofYuav4PC3GsR2I+MeoDcNUePQF5hmYUQR5iALAMQXexurPCp4AhxKcCb7rzwcPUSrP2uR3bc5fpWuKFEkLptFYAhVYwP+cumDAA6993nf7G5BYxPRUIY3xtuAAAAAElFTkSuQmCC"},function(e,t,a){"use strict";t.a="iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAbElEQVR42mNgoBj8if/9/vd/MHz/ux6Lgl/3//j+NwbBP76/n/2u/y+ApuD3f4g0VMlmqGlg+Of+n3gUBejwj+/v93gV/Df+/Z90BRi+wFQAcSCcpoKC97CAwuGGXwm/7iMHDoYJDFicTZICAK40+w1CznHyAAAAAElFTkSuQmCC"},function(e,t,a){"use strict";var i=a(0),s=a(63),n=a(2),r=a(5),o=a(21),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\importBookmarks.jsx";class c extends i.PureComponent{constructor(){super(),this.handleClick=this.handleClick.bind(this),this.onHandleClick=this.onHandleClick.bind(this),this.handlePasswordChange=this.handlePasswordChange.bind(this),this.handleProfileChange=this.handleProfileChange.bind(this),this.handleUserProfileChange=this.handleUserProfileChange.bind(this),this.onImportStarted=this.onImportStarted.bind(this),this.onImportItemStarted=this.onImportItemStarted.bind(this),this.onImportItemEnded=this.onImportItemEnded.bind(this),this.onImportItemFailed=this.onImportItemFailed.bind(this),this.onImportEnded=this.onImportEnded.bind(this),this.state={importState:"IDLE",useDefaultLocation:!0,profilesArray:[],shown:!0,modalShown:!1,selectedIndex:0,importOptions:[],selectedProfile:"",masterPassword:"",importItemStatus:Object(o.List)()}}componentDidMount(){r.a.importData.onImportStarted.addListener(this.onImportStarted),r.a.importData.onImportItemStarted.addListener(this.onImportItemStarted),r.a.importData.onImportItemEnded.addListener(this.onImportItemEnded),r.a.importData.onImportItemFailed.addListener(this.onImportItemFailed),r.a.importData.onImportEnded.addListener(this.onImportEnded)}componentWillUnmount(){r.a.importData.onImportStarted.removeListener(this.onImportStarted),r.a.importData.onImportItemStarted.removeListener(this.onImportItemStarted),r.a.importData.onImportItemEnded.removeListener(this.onImportItemEnded),r.a.importData.onImportItemFailed.removeListener(this.onImportItemFailed),r.a.importData.onImportEnded.removeListener(this.onImportEnded)}UNSAFE_componentWillMount(){r.a.importData.getProfiles(e=>{this.setState({profilesArray:e,importOptions:JSON.parse(JSON.stringify(e))})})}handleClick(){const e=this.state.shown;this.setState(e=>({shown:!e.shown})),e&&this.props.onClose()}getStatusItems(){return this.state.importItemStatus}onHandleClick(){this.startImport()}onImportStarted(){this.setState({importState:"IMPORT_STARTED"})}onImportItemStarted(e){this.setItemState(e,"IMPORT_STARTED")}onImportItemEnded(e){this.setItemState(e,"IMPORT_COMPLETED")}onImportItemFailed(e,t){this.setItemState(e,"IMPORT_FAILED",t)}onImportEnded(e){this.setState({importState:0===e?"IMPORT_COMPLETED":"IMPORT_FAILED"})}setItemState(e,t,a){let i=this.getStatusItems();const s=i.filter(t=>t.itemName===e).first(),n={itemName:e,state:t,errorMsg:a};i=s?i.map(t=>t.itemName===e?"IMPORT_FAILED"===t.state?t:{...n}:t):i.push(n),this.setState({importItemStatus:i})}startImport(){var e=this.state.selectedIndex,t=this.state.profilesArray,a=t[e].history,i=t[e].favorites,s=t[e].passwords,n=t[e].search,o=t[e].notes,l=t[e].speeddial,c=this.state.useDefaultLocation,d="";this.refs.userProfile&&(d=""===this.state.selectedProfile?this.refs.userProfile.value:this.state.selectedProfile);var u=Array(e.toString(),a.toString(),i.toString(),s.toString(),n.toString(),o.toString(),c.toString(),d.toString(),l.toString());r.a.importData.startImport(u,this.state.masterPassword,e=>{"Cancel"===e?this.setState({importState:"IDLE"}):this.setState({importState:"IMPORT_STARTED"})})}handlePasswordChange(e){e.target instanceof HTMLInputElement&&this.setState({masterPassword:e.target.value.toString()})}handleProfileChange(e){if(e.target instanceof HTMLSelectElement){var t=parseInt(e.target.value,10),a=this.state.importOptions[t].hasDefaultInstall;this.setState({selectedIndex:t,useDefaultLocation:a})}}handleUserProfileChange(e){e.target instanceof HTMLSelectElement&&this.setState({selectedProfile:e.target.value})}_toggleDefault(e){this.setState(e=>({useDefaultLocation:!e.useDefaultLocation}))}__changeSelection(e,t){this.setState(a=>{var i=[...a.profilesArray];return i[e][t]=!i[e][t],{profilesArray:i}})}_getImportButtonText(e,t){const a=e.willShowDialogType;return this.state.useDefaultLocation||"none"===a?Object(n.a)("Start Import"):"file"===a&&"Safari"!==t?Object(n.a)("Choose a File..."):"folder"===a?Object(n.a)("Choose a Folder..."):""}_getImportItemStatus(e){const t=this.getStatusItems().filter(t=>t.itemName===e).first();if(t){if("IMPORT_FAILED"===t.state)return i.createElement("div",{className:"import-result",__source:{fileName:l,lineNumber:236}},i.createElement("div",{className:"import-failed",title:t.errorMsg,__source:{fileName:l,lineNumber:237}},Object(n.a)("ERROR")));if("IMPORT_COMPLETED"===t.state)return i.createElement("div",{className:"import-result",__source:{fileName:l,lineNumber:244}},i.createElement("div",{className:"import-success",__source:{fileName:l,lineNumber:245}},Object(n.a)("Done")))}return""}_getImportItemMarkup(e,t,a,s,n,r){return i.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:257}},i.createElement("div",{className:"import-setting",__source:{fileName:l,lineNumber:258}},i.createElement("input",{id:t,type:"checkbox",checked:n,onChange:this.__changeSelection.bind(this,a,e),disabled:r,__source:{fileName:l,lineNumber:259}}),i.createElement("label",{htmlFor:t,__source:{fileName:l,lineNumber:264}},s)),this._getImportItemStatus(e))}render(){var e=this.state.profilesArray.map(e=>i.createElement("option",{key:e.index,value:e.index,__source:{fileName:l,lineNumber:275}},e.name)),t=this.state.selectedIndex,a=this.state.profilesArray[t],r=this.state.importOptions[t];if(r&&r.UserProfiles&&r.UserProfiles.length>0)var o=r.UserProfiles.map(e=>i.createElement("option",{key:e.profileName,value:e.profileName,__source:{fileName:l,lineNumber:289}},e.profileDisplayName));if(r){var c=Boolean(!(r.passwords||r.history||r.notes||r.search||r.speeddial));return i.createElement(s.a,{onRequestClose:this.handleClick,__source:{fileName:l,lineNumber:307}},function(){const s="IMPORT_COMPLETED"===this.state.importState||"IMPORT_FAILED"===this.state.importState,d="IMPORT_STARTED"===this.state.importState;return i.createElement("div",{className:"import-data",__source:{fileName:l,lineNumber:335}},i.createElement("header",{className:"dialog-header",__source:{fileName:l,lineNumber:336}},i.createElement("h1",{className:"dialog-title",__source:{fileName:l,lineNumber:337}},Object(n.a)("Import Bookmarks and Settings"))),i.createElement("div",{className:"dialog-content",__source:{fileName:l,lineNumber:340}},i.createElement("fieldset",{__source:{fileName:l,lineNumber:341}},i.createElement("label",{htmlFor:"browserSel",className:"from",__source:{fileName:l,lineNumber:342}},Object(n.a)("import","From")),i.createElement("select",{id:"browserSel",onChange:this.handleProfileChange,value:this.state.selectedIndex,disabled:d||s,autoFocus:!0,__source:{fileName:l,lineNumber:346}},e)),i.createElement("fieldset",{__source:{fileName:l,lineNumber:354}},o&&i.createElement("div",{className:"profile",__source:{fileName:l,lineNumber:356}},i.createElement("label",{htmlFor:"userProfile",__source:{fileName:l,lineNumber:357}},Object(n.a)("Chrome User Profile")),i.createElement("select",{ref:"userProfile",id:"userProfile",onChange:this.handleUserProfileChange,disabled:d,value:this.state.selectedProfile,__source:{fileName:l,lineNumber:358}},o)),r&&r.favorites&&this._getImportItemMarkup("favorites","f-favorites",t,Object(n.a)("Bookmarks"),!!a&&a.favorites,c||d),r.passwords&&this._getImportItemMarkup("passwords","f-passwords",t,Object(n.a)("Passwords"),!!a&&a.passwords,d),r.supportsMasterPassword&&i.createElement("div",{className:"setting-single import-masterpassword",__source:{fileName:l,lineNumber:386}},i.createElement("label",{htmlFor:"f-masterpassword",__source:{fileName:l,lineNumber:387}},Object(n.a)("Master password, if needed:")),i.createElement("input",{id:"f_masterpassword",type:"password",onChange:this.handlePasswordChange,__source:{fileName:l,lineNumber:390}})),r.history&&this._getImportItemMarkup("history","f-history",t,Object(n.a)("History"),!!a&&a.history,d),r.notes&&this._getImportItemMarkup("notes","f-notes",t,Object(n.a)("Notes"),!!a&&a.notes,d),r.search&&this._getImportItemMarkup("search","f-search",t,Object(n.a)("Search Engines"),!!a&&a.search,d),r.speeddial&&this._getImportItemMarkup("speeddial","f-speeddial",t,Object(n.a)("Speed Dial"),!!a&&a.speeddial,d),r&&r.supportsStandaloneImport&&i.createElement("div",{__source:{fileName:l,lineNumber:431}},i.createElement("div",{className:"setting-single",__source:{fileName:l,lineNumber:432}},i.createElement("input",{id:"f-location",type:"checkbox",checked:this.state.useDefaultLocation&&r.hasDefaultInstall,onChange:this._toggleDefault.bind(this,r),disabled:!1===r.hasDefaultInstall||d,__source:{fileName:l,lineNumber:433}}),i.createElement("label",{htmlFor:"f-location",__source:{fileName:l,lineNumber:438}},Object(n.a)("Use Default Profile Location"))))),r&&r.hasDefaultInstall&&r.profilePath.length>0&&i.createElement("div",{className:"import-pathname",__source:{fileName:l,lineNumber:448}},Object(n.a)("Detected Profile Path:"),i.createElement("br",{__source:{fileName:l,lineNumber:449}}),i.createElement("input",{type:"text",value:r.profilePath,readOnly:!0,__source:{fileName:l,lineNumber:450}}))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:l,lineNumber:456}},!0===d&&i.createElement("div",{__source:{fileName:l,lineNumber:458}},i.createElement("p",{className:"in-progress",__source:{fileName:l,lineNumber:459}},Object(n.a)("Import in progress...."))),!1===s&&!1===d&&i.createElement("div",{__source:{fileName:l,lineNumber:463}},i.createElement("input",{type:"button",className:"primary",onClick:this.onHandleClick,disabled:d,value:this._getImportButtonText(r),__source:{fileName:l,lineNumber:464}}),i.createElement("input",{type:"button",onClick:this.handleClick,disabled:d,value:Object(n.a)("Cancel"),__source:{fileName:l,lineNumber:469}})),!0===s&&i.createElement("div",{className:"cardview",__source:{fileName:l,lineNumber:476}},i.createElement("input",{type:"button",className:"primary",onClick:this.handleClick,value:Object(n.a)("Close"),__source:{fileName:l,lineNumber:477}}))))}.bind(this)())}return null}}t.a=c},function(e,t,a){"use strict";t.a=e=>({radiusRound:e>-1?"100px":0,radiusRounded:e>-1?"2px":0,radiusRoundedLess:e>0?"2px":0,radius:`${e}px`,radiusHalf:"calc(var(--radius) * 0.5)"})},function(e,t,a){"use strict";(function(e){var i=a(1040),s=a(1041),n=a(22),r=a(955),o=a(956),l=a(1042),c=a(190),d=a(19),u=a(40),h=a(110),m=a(97),p=a(12),g=a(9),b=a(957),f=a(1034),_=a(1043),N=a(8),v=a(51),E=a(0),w=a.n(E),S=a(29),C=a.n(S),k=a(234),y=a(207),O=a(571),A=a(46),T=a(357),I=a(959),D=a(960),P=a(388),x=a(556),M=a(26),L=a(85),j=a(230),B=a(61),R=a.n(B),F=a(72),U=a(80),W=a(4),H=a(108),V=a(25),G=a(16),K=a(2),z=a(7),Y=a(294),$=a(181),Q=a(6),Z=a(311),q=a(5),X=a(21),J=a(183),ee=a(78),te=a(36),ae=a(1),ie=a(13),se=a(355),ne=a(20),re="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\UrlBar.jsx";function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const le=[ae.kAddressBarAutocompleteEnabled,ae.kAddressBarExtensionsVisible,ae.kAddressBarExtensionsRenderInDropdown,ae.kAddressBarExtensionsShowAllToggle,ae.kAddressBarExtensionsShowHiddenToggle,ae.kAddressBarInlineSearchEnabled,ae.kAddressBarPosition,ae.kAddressBarSearchDisplay,ae.kAddressBarSearchSuggestEnabled,ae.kAddressBarShowFullUrl,ae.kAddressBarShowProfile,ae.kAddressBarTypedHistoryEnabled,ae.kPopupsShowInTab,ae.kKeyboardTabToAll,ae.kAddressBarSearchShowFavicon];function ce(e){return{isTypedHistoryOpen:U.a.showTypedHistory(),typedHistory:U.a.getTypedHistory(),...U.a.getUrlfieldStateFromId(e)}}function de(e,t){return{blockedPageContent:m.a.getblockedPageContents(e),blockedPopups:m.a.getBlockedPopupsById(e),permissionInfo:m.a.getPermissionInfoForUrl(t),sslInfo:m.a.getSSLInfo(e)}}function ue(){q.a.utilities.showPasswordDialog()}function he(e){if(!e)return;const t=A.a.getByQuery(e);return t&&t.keyword&&e.substring(t.keyword.length)?t:void 0}function me(e){e.preventDefault(),F.a.toggleTypedHistory()}function pe(e){e.preventDefault(),N.a.toggle(ae.kAddressBarExtensionsVisible,!0,!1)}class ge extends w.a.PureComponent{constructor(t,a){super(t),oe(this,"passwordElm",w.a.createRef()),oe(this,"siteInfoElm",w.a.createRef()),oe(this,"getReaderContextMenu",()=>[{handler:()=>u.a.showSettings("webpages"),visible:!1===G.a.isGuestSession(this.context.vivaldiWindowId),...Object(Q.a)("Configure Reader View")}]),oe(this,"_setBookmarkedState",Object(J.a)(e=>{if(!this._isMounted)return;if(!e)return void this.setState({isBookmarked:!1});const t=Boolean(n.a.findByUrl(e));this.setState({isBookmarked:t})},100)),oe(this,"_onUrlbarStoreChanged",()=>{const e=ce(this.props.id);this.setState({editUrl:e.editUrl,isReaderable:e.isReaderable,isReaderableActive:e.isReaderableActive,isTypedHistoryOpen:e.isTypedHistoryOpen,typedHistory:e.typedHistory})}),oe(this,"_onNavigationStoreChanged",e=>{const t=()=>{const e=de(this.props.id,this.props.url);this.setState({blockedPageContent:e.blockedPageContent,blockedPopups:e.blockedPopups,permissionInfo:e.permissionInfo,sslInfo:e.sslInfo})};"setPermissionInfo"===e?setTimeout(t,200):t()}),oe(this,"_onSearchEngineStoreChanged",()=>{this.setState({defaultSearchEngine:A.a.getDefault(G.a.isIncognito(this.context.vivaldiWindowId))})}),oe(this,"_onRssDetectStoreChanged",()=>{this.setState({feeds:O.a.getState()})}),oe(this,"selectAddressField",(t=!1)=>{if(this._isMounted){const a=C.a.findDOMNode(this.refs.urlField).querySelector("input");a&&""!==a.value&&(Object($.a)(this.props.url).endsWith(a.value)?(a.select(),a.selectionDirection="backward"):!0!==t&&e.nextTick(()=>this.selectAddressField(!0)))}}),oe(this,"focusAddressField",()=>{this._isMounted&&(this.setState({urlFieldFocused:!0}),this.refs.urlField&&this.refs.urlField.focus())}),oe(this,"blurAddressField",()=>{this._isMounted||(this.setState({urlFieldFocused:!1}),this.hideDropdown())}),oe(this,"getCurrentDisplayUrl",()=>{const{url:e,originUrl:t="",pendingUrl:a}=this.props,i=this.state.urlFieldFocused,s=this.props.prefValues[ae.kAddressBarShowFullUrl];return a&&!ne.a.isOurExtension(a)?U.a.getDisplayURL(a,t,{focused:i,showFullURL:s}):U.a.getDisplayURL(e,t,{focused:i,showFullURL:s})}),oe(this,"onSearch",(e,t,a={})=>{t&&t.url&&(F.a.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...a}),this.hideDropdown())}),oe(this,"onSearchAddTypedSearchHistory",Object(ee.a)(this.onSearch,{addTypedSearchHistory:!0})),oe(this,"_onBookmarkStoreChanged",()=>{this._setBookmarkedState(this.props.url)}),oe(this,"_onTabStoreChanged",e=>{"newTab"!==e.action&&"closeTab"!==e.action||this.hideDropdown()}),oe(this,"_onWebpageviewStoreChanged",t=>{if(t.type===W.a.WEBPAGEVIEW_ACTIONS){if("focusAddressField"===t.action){this.onCloseCreateBookmarkCallout(),this.focusAddressField(),this.refs.urlField.select(),this.props.prefValues[ae.kAddressBarShowFullUrl]||e.nextTick(()=>this.selectAddressField(!0))}else if("addBookmark"===t.action)this.onCreateBookmarkCallout();else if("urlPasteAndGo"===t.action&&t.payload){const e=t.payload;this.urlPasteAndGo(e)}"focusSearchField"===t.action&&(this.state.isAddressBarVisible||this.focusSearchField())}t.type===W.a.URLFIELD_BLUR&&e.nextTick(()=>this.hideDropdown())}),oe(this,"focusSearchField",()=>{void 0!==this.refs.searchField&&this.refs.searchField&&this.refs.searchField.setFocusInSearchField()}),oe(this,"updateFocus",()=>{if(!this.state.isAddressBarVisible)return;const e=this.props.pendingUrl||this.props.url;switch(Object(Z.a)(this.props.id,e,this.props.active||!1,this.context.document.activeElement)){case"urlField":this.focusAddressField();break;case"urlFieldSelected":this.focusAddressField(),this.selectAddressField();break;default:this.blurAddressField()}}),oe(this,"urlPasteAndGo",t=>{const{clipboardText:a}=t;if(!a)return;const i=this.state.urlFieldFocused,s=C.a.findDOMNode(this.refs.urlField).querySelector("input"),n=i?s.value.substring(0,s.selectionStart)+a.trim()+s.value.substring(s.selectionEnd):a.trim();this.blurAddressField(),e.nextTick(()=>{F.a.go([n],{transition:L.a.TYPED,addTypedSearchHistory:!1,enableSearch:!0,...t.openOptions})})}),oe(this,"onUrlFieldFocus",()=>{this.setState({urlFieldFocused:!0})}),oe(this,"onUrlFieldBlur",()=>{this.setState({urlFieldFocused:!1})}),oe(this,"onPasswordFocus",e=>{q.a.utilities.isDialogOpen("password",e=>{q.a.utilities.focusDialog("password",e=>{})})}),oe(this,"compareProtocol",e=>{if(Object(te.k)(e)&&Object(te.e)(e)&&this.props.url&&Object(Y.a)(e)===Object(Y.a)(this.props.url)){const t=R.a.parse(this.props.url).protocol,a=R.a.format({host:e,protocol:t});if(Object(te.l)(a))return a}return e}),oe(this,"handleUrlFieldSubmit",({url:e,options:t})=>{const a=he(this.state.editUrl),i=Boolean(a||this.props.prefValues[ae.kAddressBarInlineSearchEnabled]);a||(e=this.compareProtocol(e)),F.a.go([e.trim()],{...t,enableSearch:i,addTypedSearchHistory:!1})}),oe(this,"easterEggNavigation",()=>{const e=this.refs.urlField.autocompletedValue;e&&(this.hideDropdown(),F.a.go([ne.a.getUrl(e)],{enableSearch:!1,transition:L.a.TYPED,addTypedSearchHistory:!1}))}),oe(this,"initOriginUrl",()=>{this.props.id&&p.a.setOrigin(this.props.id,this.getCurrentDisplayUrl())}),oe(this,"onUrlFieldDrop",e=>{const t=e.dataTransfer;if(!t)return;const a=t.getData("text/uri-list");if(a.length>0){const e=a.split("\n");e.length>0&&(this.initOriginUrl(),F.a.go(e))}else{const e=t.getData("text/plain");e.length>0&&(Object(te.l)(e)?(this.initOriginUrl(),F.a.go([e])):(F.a.setUrlfieldState(this.props.id,{editUrl:e}),this.focusAddressField()))}}),oe(this,"togglePasswordIcon",(e,t)=>{e===this.context.vivaldiWindowId&&this.setState(e=>({showPasswordIcon:t}))}),oe(this,"setUrlDragEvent",e=>{const t=this.context.document.createElement("img");t.src=this.props.favIconUrl||"/resources/default_favicon_64.png",e.dataTransfer.setDragImage(t,Math.min(t.width-t.width/3,64),Math.min(t.height-t.height/3,64)),t.remove(),Object(se.a)(e,this.props.url,this.props.title),e.dataTransfer.effectAllowed="all"}),oe(this,"onReaderableClicked",()=>{!0===this.state.isReaderableActive?k.a.readerableInactive(this.props.id):k.a.readerableActive(this.props.id)}),oe(this,"onCreateBookmarkCallout",()=>{this.props.active&&this.props.url&&this.setState({createBookmarkCallout:!0})}),oe(this,"onCloseCreateBookmarkCallout",()=>{this.setState({createBookmarkCallout:!1})}),oe(this,"onPopupAllowed",e=>{h.a.removeBlockedPopupEvent(this.props.id,e),this.refs.popupBlockerNotificator.onDialogClosed(),this.openNewPopAsTabOrWindow(e)}),oe(this,"openNewPopAsTabOrWindow",e=>{if(this.props.prefValues[ae.kPopupsShowInTab])e.window.accept(this.context.vivaldiWindowId+";1");else{const t={left:e.initialLeft,top:e.initialTop,width:e.initialWidth,height:e.initialHeight},a=!1!==this.props.incognito,i={id:e.name,resizable:!0,bounds:t,incognito:a},s=function(t){e.window.accept(t.id+";1")};u.a.showPopupWindow(i,s)}}),oe(this,"_isEditingUrl",()=>{const{editUrl:e}=this.state;return void 0!==e&&(""===e||this.getCurrentDisplayUrl()!==e)}),oe(this,"hideDropdown",()=>{this.refs.urlField.hideDropdown()}),oe(this,"_storeDialogAnchorRect",(e,t)=>{const a="top"===this.props.prefValues[ae.kAddressBarPosition]?"down":"up";q.a.zoom.getVivaldiUIZoom(i=>{q.a.utilities.setDialogPosition(t,this.context.vivaldiWindowId,{left:Math.round(e.left*i),top:Math.round(e.top*i),width:Math.round(e.width*i),height:Math.round(e.height*i)},a)})}),oe(this,"_updateDialogPositions",()=>{const e=this.passwordElm.current;if(e){const t=e.getRect();t&&this._passwordPopupPos!==t&&(this._passwordPopupPos=t,this._storeDialogAnchorRect({left:t.left,top:t.top,width:t.width,height:t.height},"password"))}const t=this.siteInfoElm.current&&this.siteInfoElm.current.refs.siteInfoButton;if(t&&t instanceof Element){const e=t.getBoundingClientRect();this._permissionPopupPos!==e&&(this._permissionPopupPos=e,this._storeDialogAnchorRect({left:e.left,top:e.top,width:e.width,height:e.height},"permission"))}z.default.windows.get(this.context.vivaldiWindowId,{},e=>{let{left:t,top:a,width:i,height:s}=e;i=i||0,s=s||0,this._storeDialogAnchorRect({left:Math.round(t+i/2),top:Math.round(a+s/2),width:0,height:0},"chromecast")})}),oe(this,"_onWindowStoreChanged",()=>{const e=G.a.getVisibleUI(this.context.vivaldiWindowId).addressBar;this.state.isAddressBarVisible!==e&&this.setState({isAddressBarVisible:e})}),oe(this,"_onWindowPositionChanged",e=>{e===this.context.vivaldiWindowId&&this._sendBatchedUpdatedBounds()}),oe(this,"_sendBatchedUpdatedBounds",()=>{this._resizeDelayRunning||(this._resizeDelayRunning=!0,setTimeout(()=>{this._updateDialogPositions(),this._resizeDelayRunning=!1},500))}),oe(this,"onUrlbarResized",e=>{this._sendBatchedUpdatedBounds()});const i=ce(t.id),s=de(t.id,t.url);this.state={topSites:[],urlFieldFocused:!1,createBookmarkCallout:!1,hasFeed:!0,isBookmarked:!1,showPasswordIcon:!1,isAddressBarVisible:G.a.getVisibleUI(a.vivaldiWindowId).addressBar,defaultSearchEngine:A.a.getDefault(G.a.isIncognito(a.vivaldiWindowId)),feeds:O.a.getState(),editUrl:i.editUrl,isReaderable:i.isReaderable,isReaderableActive:i.isReaderableActive,isTypedHistoryOpen:i.isTypedHistoryOpen,typedHistory:i.typedHistory,blockedPageContent:s.blockedPageContent,blockedPopups:s.blockedPopups,permissionInfo:s.permissionInfo,sslInfo:s.sslInfo}}static getDerivedStateFromProps(e){const{id:t,url:a}=e,i=ce(t),s=de(t,a);return{editUrl:i.editUrl,isReaderable:i.isReaderable,isReaderableActive:i.isReaderableActive,isTypedHistoryOpen:i.isTypedHistoryOpen,typedHistory:i.typedHistory,blockedPageContent:s.blockedPageContent,blockedPopups:s.blockedPopups,permissionInfo:s.permissionInfo,sslInfo:s.sslInfo}}componentDidUpdate(t){let a=t.url!==this.props.url;const i=t.id!==this.props.id;if((i||a)&&this.updateFocus(),i&&this.hideDropdown(),a&&(this._setBookmarkedState(this.props.url),!this.props.url||!t.url)){const e=g.a.getDefaultStartpage();e!==this.props.url&&e!==t.url||(a=!1)}a&&!i&&e.nextTick(()=>F.a.clearUrlfieldState(this.props.id))}componentDidMount(){this._isMounted=!0,this.updateFocus(),this._setBookmarkedState(this.props.url),G.a.isGuestSession(this.context.vivaldiWindowId)||z.default.topSites.get(e=>{this.setState({topSites:e})}),n.a.addChangeListener(this._onBookmarkStoreChanged),H.a.addChangeListener(this._onWebpageviewStoreChanged),P.a.addChangeListener(this._onTabStoreChanged),U.a.addChangeListener(this._onUrlbarStoreChanged),m.a.addChangeListener(this._onNavigationStoreChanged),A.a.addChangeListener(this._onSearchEngineStoreChanged),q.a.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),q.a.utilities.onPasswordIconStatusChanged.addListener(this.togglePasswordIcon),this._windowStoreToken=G.a.addListener(this._onWindowStoreChanged),this._rssDetectStoreToken=O.a.addListener(this._onRssDetectStoreChanged)}componentWillUnmount(){this._isMounted=!1,n.a.removeChangeListener(this._onBookmarkStoreChanged),H.a.removeChangeListener(this._onWebpageviewStoreChanged),P.a.removeChangeListener(this._onTabStoreChanged),U.a.removeChangeListener(this._onUrlbarStoreChanged),m.a.removeChangeListener(this._onNavigationStoreChanged),A.a.removeChangeListener(this._onSearchEngineStoreChanged),q.a.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),q.a.utilities.onPasswordIconStatusChanged.removeListener(this.togglePasswordIcon),this._windowStoreToken.remove(),this._rssDetectStoreToken.remove()}render(){const{prefValues:e,url:t}=this.props,a=he(this.state.editUrl),n=ne.a.isInternalUrl(t)||t.startsWith("chrome://"),d=Object(te.k)(t)&&!(n||Object(te.j)(t)||Object(te.h)(t)),u=this.state.typedHistory.length>0?Object(K.a)("Show typed history"):Object(K.a)("Enter an address to activate typed history"),h=Object(K.a)("Save your password"),m=e[ae.kAddressBarTypedHistoryEnabled]&&!0!==this.props.readonly,p="top"===e[ae.kAddressBarPosition]?"bottomLeft":"topLeft",g="top"===e[ae.kAddressBarPosition]?"below":"above",N=this.state.feeds.get(this.props.id)||Object(X.List)(),E=N.size,S=this.getCurrentDisplayUrl();return w.a.createElement(c.a,{focusName:"focus_addressbar",className:"toolbar toolbar-addressbar toolbar-mainbar toolbar-large",__source:{fileName:re,lineNumber:916}},this.props.showNavigationButtons&&w.a.createElement(x.a,{name:ae.kToolbarsNavigation,className:"toolbar-mainbar toolbar-noflex",menuOrigin:p,popupPosition:g,size:"large",__source:{fileName:re,lineNumber:920}}),w.a.createElement("div",{className:"addressfield",__source:{fileName:re,lineNumber:929}},!0===G.a.isIncognito(this.context.vivaldiWindowId)&&w.a.createElement("div",{className:"private-window-indicator",title:Object(K.a)("Private Browsing"),__source:{fileName:re,lineNumber:931}},w.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:re,lineNumber:933}},w.a.createElement("path",{d:"M7 14h4v-1h-2v-1h2v-1h-2v-3h3v-5h-8v5h3v6zm-1-9h4v1h-4v-1z",__source:{fileName:re,lineNumber:934}}))),w.a.createElement("div",{className:"toolbar-insideinput",__source:{fileName:re,lineNumber:939}},w.a.createElement(r.a,{blockerVisible:d,position:g,tabIndex:e[ae.kKeyboardTabToAll],pageId:this.props.id,url:t,__source:{fileName:re,lineNumber:940}})),a?w.a.createElement("div",{className:"SiteInfoButton-SearchEngineFavicon",__source:{fileName:re,lineNumber:951}},w.a.createElement("img",{src:a.faviconUrl,__source:{fileName:re,lineNumber:952}})):w.a.createElement(D.a,{ref:this.siteInfoElm,draggable:!n,isEditingUrl:this._isEditingUrl(),isInternal:n,onDragStart:this.setUrlDragEvent,fieldGo:this.easterEggNavigation,sslIssuer:this.state.sslInfo&&this.state.sslInfo.issuer,sslState:this.state.sslInfo&&this.state.sslInfo.state,tabIndex:e[ae.kKeyboardTabToAll],__source:{fileName:re,lineNumber:954}}),w.a.createElement("div",{className:"UrlBar-UrlFieldWrapper",__source:{fileName:re,lineNumber:966}},w.a.createElement(y.a,{className:"observer",onResize:this.onUrlbarResized,__source:{fileName:re,lineNumber:967}},w.a.createElement(j.a,{key:n||!t?this.props.id:t,ref:"urlField",onSubmit:this.handleUrlFieldSubmit,className:"UrlBar-UrlField url vivaldi-addressfield uifocusstop",editUrl:this.state.editUrl,displayUrl:S,pageId:this.props.id,pageUrl:t,autoFocus:this.state.urlFieldFocused,autocompletionEnabled:e[ae.kAddressBarAutocompleteEnabled],isTypedHistoryOpen:this.state.isTypedHistoryOpen,onBlur:this.onUrlFieldBlur,onFocus:this.onUrlFieldFocus,onDrop:this.onUrlFieldDrop,placeholder:e[ae.kAddressBarInlineSearchEnabled]?Object(K.a)("Search or enter an address"):Object(K.a)("Enter an address"),showDropdown:!0,typedHistory:this.state.typedHistory,topSites:this.state.topSites,autocompleteOnTitle:!0,defaultSearchEngine:this.state.defaultSearchEngine,typedSearchEngine:a,readonly:!!this.props.readonly,__source:{fileName:re,lineNumber:971}}))),w.a.createElement("div",{className:"toolbar toolbar-small toolbar-insideinput",__source:{fileName:re,lineNumber:1011}},w.a.createElement(b.a,{pageId:this.props.id,ref:"webpageview_loadprogress",open:!n,__source:{fileName:re,lineNumber:1012}}),w.a.createElement(f.a,{pageId:this.props.id,url:t,permissions:this.state.permissionInfo,popupPosition:g,__source:{fileName:re,lineNumber:1017}}),this.state.blockedPopups.size>0&&w.a.createElement(_.a,{ref:"popupBlockerNotificator",url:t,blockedPopups:this.state.blockedPopups,onPopupAllowed:this.onPopupAllowed,popupPosition:g,__source:{fileName:re,lineNumber:1024}}),this.state.blockedPageContent.size>0&&w.a.createElement(s.a,{pageId:this.props.id,url:t,position:g,blockedPageContent:this.state.blockedPageContent,__source:{fileName:re,lineNumber:1033}}),E>0&&w.a.createElement(v.a,{feeds:N,__source:{fileName:re,lineNumber:1040}}),this.state.showPasswordIcon&&w.a.createElement(M.a,{ref:this.passwordElm,className:"password-icon",tooltip:h,onClick:ue,image:ie.ub,tabIndex:0,onFocus:this.onPasswordFocus,__source:{fileName:re,lineNumber:1044}}),this.state.isReaderable&&w.a.createElement(M.a,{menu:this.getReaderContextMenu(),menuOrigin:"topLeft",isPressed:this.state.isReaderableActive,image:ie.Ib,onClick:this.onReaderableClicked,tooltip:Object(K.a)("Reader View"),__source:{fileName:re,lineNumber:1056}}),this.props.id&&w.a.createElement(o.a,{open:this.state.createBookmarkCallout,onOpen:this.onCreateBookmarkCallout,onClose:this.onCloseCreateBookmarkCallout,popupPosition:g,title:this.props.title,url:t,isBookmarked:this.state.isBookmarked,thumbnail:this.props.thumbnailUrl,__source:{fileName:re,lineNumber:1066}}),m&&w.a.createElement("div",{className:"button-toolbar",__source:{fileName:re,lineNumber:1078}},w.a.createElement("button",{title:u,tabIndex:e[ae.kKeyboardTabToAll],disabled:0===this.state.typedHistory.length,onMouseDown:me,dangerouslySetInnerHTML:{__html:ie.tc},__source:{fileName:re,lineNumber:1079}})))),"button"===e[ae.kAddressBarSearchDisplay]&&this.state.isAddressBarVisible&&w.a.createElement(I.a,{shouldRenderAs:e[ae.kAddressBarSearchDisplay],popupPosition:g,popupWidth:210,prefValues:this.props.prefValues,size:this.props.size,iconSize:"small",__source:{fileName:re,lineNumber:1096}}),("field"===e[ae.kAddressBarSearchDisplay]||!this.state.isAddressBarVisible)&&w.a.createElement(T.a,{onEnterPressed:this.onSearchAddTypedSearchHistory,shouldRenderAs:e[ae.kAddressBarSearchDisplay],ref:"searchField",useFavicon:e[ae.kAddressBarSearchShowFavicon],suggestEnabled:e[ae.kAddressBarSearchSuggestEnabled],__source:{fileName:re,lineNumber:1107}}),(e[ae.kAddressBarShowProfile]&&this.state.isAddressBarVisible&&!G.a.isPopup(this.context.vivaldiWindowId)&&!G.a.isIncognito(this.context.vivaldiWindowId)||G.a.isGuestSession(this.context.vivaldiWindowId))&&w.a.createElement(i.a,{popupPosition:g,size:this.props.size,__source:{fileName:re,lineNumber:1121}}),this.state.isAddressBarVisible&&w.a.createElement(l.a,{showToolbar:e[ae.kAddressBarExtensionsVisible],showAllExtensionsButton:e[ae.kAddressBarExtensionsShowAllToggle],showHiddenExtensionsButton:e[ae.kAddressBarExtensionsShowHiddenToggle],renderInDropdown:e[ae.kAddressBarExtensionsRenderInDropdown],toggleExtensionToolbar:pe,popupPosition:g,size:this.props.size,__source:{fileName:re,lineNumber:1127}}))}}oe(ge,"contextType",V.a),t.a=Object(d.a)(ge,le)}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a.n(i);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){return class extends s.a.Component{constructor(...e){super(...e),r(this,"state",{disabled:!0}),r(this,"enable",()=>this.setState({disabled:this.props.disabled||!1}))}componentDidMount(){this.timeout=setTimeout(this.enable,500)}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{disabled:t,...a}=this.props,i=e||"input";return s.a.createElement(i,n({},a,{disabled:this.state.disabled,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\withDelay.jsx",lineNumber:31}}))}}}},function(e,t,a){"use strict";var i=a(9),s=a(293),n=a(11),r=a(4),o=a(84),l=a.n(o),c=a(145),d=a(229);const u={abort:c.default,responseText:""};let h={...u},m="";function p(e,t){if(h&&h.readyState===XMLHttpRequest.DONE&&200===h.status)try{const t=h.responseText,a={actionType:r.a.SEARCH_SUGGEST_RESULT,query:m,json:t,uid:e};n.a.dispatch(a)}finally{h={...u},m=""}}t.a={suggest:(e,t)=>{if(e.length<2)return void n.a.dispatch({actionType:r.a.SEARCH_SUGGEST_RESULT,query:"",json:'["", []]',cuid:l()});if(i.a.getActivePage().get("incognito"))return;if(!t.suggestUrl)return;const a=s.a.getSearchSuggestURL(e,t.suggestUrl);h&&(h.abort(),m="",h={...u});const o=l()();return m=e,h=new XMLHttpRequest,h.onreadystatechange=Object(d.a)(p,o,a),h.open("GET",a,!0),h.send(),o}}},,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var i=a(29),s=a.n(i);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(t){n(this,"_numberOfSelectableItems",0),n(this,"_selectionIndex",-1),n(this,"setNumberOfSelectableItems",e=>{this._numberOfSelectableItems=e}),n(this,"getNumberOfSelectableItems",()=>this._numberOfSelectableItems),n(this,"setSelectionIndex",e=>{this._selectionIndex=e}),n(this,"getSelectionIndex",()=>this._selectionIndex),n(this,"_moveHighlight",(t,a)=>{const i=this._inputComponent.getDropdown(),n=s.a.findDOMNode(i);if(!(n instanceof HTMLElement))return Promise.reject();let r=-1;const o=Array.from(n.getElementsByClassName("omni-clickable")),l=this.getSelectionIndex(),c=this.getNumberOfSelectableItems();if(null==l||-1===l||null==o[l])r=t?0:c-1;else{const e=o[l],i=0===l||parseInt(n.scrollTop)+10>e.offsetTop;switch(a){case"page":if(t)i?r=o.findIndex(e=>e.offsetTop+e.offsetHeight>n.offsetHeight):(n.scrollTop=e.offsetTop,r=o.findIndex(e=>e.offsetTop>n.offsetHeight+n.scrollTop)),-1===r&&(r+=c);else if(i)n.scrollTop-=n.offsetHeight;else{let e=o.length-1;for(;e>0&&!(o[e].offsetTop-o[e].offsetHeight<n.scrollTop);e--);r=e}break;case"section":if(t){let e=this._getSectionIndex(!0,l+1,o);-1===e&&(e=this._getSectionIndex(!0,0,o)),-1!==e&&(r=e)}else{let e=this._getSectionIndex(!1,l-1,o);-1===e&&(e=this._getSectionIndex(!1,o.length-1,o)),-1!==e&&(r=e)}break;case"line":r=l+(t?1:-1),t?r>=c&&(r=-1):r<-1&&(r=c-1)}}return Number.isInteger(r)?(this._inputComponent.setAutocompleteHighlight(r,!0),new Promise(t=>{e.nextTick(t)})):Promise.reject()}),n(this,"_getSectionIndex",(e,t,a)=>{if(e)for(let e=t;e<a.length;e++){if("0"===a[e].dataset.index)return e}else for(let e=t;e>=0;e--){if("0"===a[e].dataset.index)return e}return-1}),n(this,"up",()=>this._moveHighlight(!1,"line")),n(this,"down",()=>this._moveHighlight(!0,"line")),n(this,"pageUp",()=>this._moveHighlight(!1,"page")),n(this,"pageDown",()=>this._moveHighlight(!0,"page")),n(this,"sectionUp",()=>this._moveHighlight(!1,"section")),n(this,"sectionDown",()=>this._moveHighlight(!0,"section")),this._inputComponent=t}}}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(389),r=a(17),o=a.n(r),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\StatusInfo.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.a.PureComponent{constructor(...e){super(...e),c(this,"state",{status:n.a.getState(),visible:!1}),c(this,"onStoreChange",()=>{clearTimeout(this._statusTimeout);const e=n.a.getState();e?this.setState({status:e,visible:!0}):this._statusTimeout=setTimeout(()=>this.setState({visible:!1}),200)})}componentDidMount(){this._statusStoreToken=n.a.addListener(this.onStoreChange)}componentWillUnmount(){clearTimeout(this._statusTimeout),this._statusStoreToken.remove()}render(){return s.a.createElement("p",{style:this.props.style,className:o()({StatusInfo:!0,"StatusInfo--Visible":this.state.visible}),__source:{fileName:l,lineNumber:55}},s.a.createElement("span",{className:"StatusInfo-Content",__source:{fileName:l,lineNumber:61}},this.state.status))}}t.a=d},function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(2);const s="▽",n="▼",r="△",o="▲",l="⭍",c={not_synced:Object(i.a)("Not synced"),success:Object(i.a)("Success"),in_progress:Object(i.a)("In progress..."),auth_error:Object(i.a)("Sync server refused your credentials"),server_error:Object(i.a)("Sync server encountered an error"),network_error:Object(i.a)("Network error"),client_error:Object(i.a)("Client error"),conflict:Object(i.a)("Conflict with another client’s data occurred"),throttled:Object(i.a)("Sync server throttled the connection"),other_error:Object(i.a)("Unexpected error")};function d(e,t){return function(e,t){switch(e){case"not_synced":case"in_progress":return t?s:r;case"success":return t?n:o;default:return l}}(e,t)+" "+(t?Object(i.a)("Download: $1",[c[e]]):Object(i.a)("Upload: $1",[c[e]]))}function u(e){return[d(e.downloadUpdatesStatus,!0),d(e.commitStatus,!1)]}},,,,,function(e,t,a){"use strict";(function(e){var i=a(39),s=a(37),n=a(22),r=a(19),o=a(0),l=a.n(o),c=a(211),d=a(158),u=a(230),h=a(72),m=a(80),p=a(2),g=a(7),b=a(17),f=a.n(b),_=a(15),N=a.n(_),v=a(5),E=a(232),w=a(1),S=a(13),C="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkEditor.jsx";function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y="BookmarkEditor",O=[w.kBookmarksBarVisible];class A extends l.a.Component{constructor(...e){super(...e),k(this,"refTitle",l.a.createRef()),k(this,"refUrlField",l.a.createRef()),k(this,"_isCreating",!1),k(this,"_disableSaveOnBlur",!1),k(this,"state",{id:"",title:"",url:"",nickname:"",description:"",thumbnail:"",speeddial:!1,isFolder:!1,isTrash:!1,isSeparator:!1,dateAdded:null,editUrl:null,dataChanged:!1,autocompleteValue:""}),k(this,"resetUrlField",()=>{h.a.setUrlfieldState(y,{editUrl:void 0,autocompleteValue:void 0})}),k(this,"setIsCreating",e=>{this._isCreating=e}),k(this,"getIsCreating",()=>this._isCreating),k(this,"_onUrlbarStoreChanged",()=>{const{isActive:e,isOmniDropdownOpen:t,isReaderable:a,isReaderableActive:i,selectionEnd:s,selectionStart:n,...r}=m.a.getUrlfieldStateFromId(y);this.setState(r)}),k(this,"onSubmit",()=>{this._save(),this.props.onFocusTree()}),k(this,"_save",()=>{if(this.state.isTrash||""===this.state.id||!1===this.state.dataChanged)return Promise.resolve();const e=this.state.autocompleteValue||this.state.editUrl||this.state.url||E.a,t={id:this.state.id,title:this.state.title,url:e,nickname:this.state.nickname,description:this.state.description,speeddial:this.state.speeddial};return this._updateStoreWithItem(t)}),k(this,"_saveOnBlur",()=>{!1===this._disableSaveOnBlur&&this._save().then(this.setIsCreating(!1))}),k(this,"_updateStoreWithItem",e=>new Promise(t=>{i.a.verifyNode(e,this.state.isFolder).then(e=>{e&&s.a.update(e.id,e,a=>{if(!g.default.runtime.lastError){const t={};e.id===this.state.id&&(t.url=n.a.filterUrl(e.url),t.description=a.description),this.setState(t),this.resetUrlField()}t()})})})),k(this,"_updateStateWithItem",(e={id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},t)=>{const a=n.a.isSeparator(e);this.setState({id:e.id,title:a?"":e.title,url:a?"":n.a.getUrlByNode(e),nickname:a?"":e.nickname,description:a?"":e.description,speeddial:!a&&e.speeddial,thumbnail:a?"":e.thumbnail,isFolder:!a&&!e.url,isTrash:!a&&n.a.isTrashed(e),isSeparator:a,dateAdded:e.dateAdded?new Date(e.dateAdded):null,dataChanged:!1},()=>{t&&t()})}),k(this,"handleKeyPress",e=>{if(e.stopPropagation(),"Escape"===e.key){e.preventDefault(),h.a.clearUrlfieldState(y);const t=this.state.id;this.getIsCreating()?(this.setIsCreating(!1),this._updateStateWithItem({id:"",title:"",nickname:"",description:"",thumbnail:"",partner:"",speeddial:!1,bookmarkbar:!1,trash:!1},()=>{this.props.onCancel(t,!0)})):this.props.onCancel(t,!1)}}),k(this,"focusUrlField",()=>{this.refUrlField.current&&this.refUrlField.current.focus()}),k(this,"focusTitleField",()=>{this.refTitle.current&&this.refTitle.current.focus()}),k(this,"handleFocus",()=>{this.props.updateLayout&&this.props.updateLayout()}),k(this,"handleUpdateThumbnail",e=>{if(e.stopPropagation(),this.state.isFolder)return void s.a.update(this.state.id,{thumbnail:""});const t={id:this.state.id,url:this.state.url};i.a.verifyNode(t,!1).then(e=>{e&&d.a.updateBookmark(e)})}),k(this,"onBookmarkStoreChange",()=>{const e=this.state.id;if(e){const t=n.a.getItemById(e);t.id===this.state.id&&this._updateStateWithItem(t)}}),k(this,"handleSetCustomThumbnail",e=>{e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),v.a.utilities.selectLocalImage({title:Object(p.a)("Select Custom Image"),thumbnailBookmarkId:this.state.id})}),k(this,"checkChangeSpeeddial",()=>{this.setState(e=>({speeddial:!e.speeddial,dataChanged:!0}),()=>{this._save()})}),k(this,"isBookmarkBarChecked",()=>n.a.getBookmarkBarFolderId()===this.state.id&&this.props.prefValues[w.kBookmarksBarVisible]),k(this,"checkChangeBookmarkBar",()=>{this.setState(e=>({dataChanged:!0}),()=>{s.a.setBookmarkBarFolderAndToggleVisibility(this.state.id)})}),k(this,"onInputChange",(e,t)=>{this.setState({[e]:t.target.value,dataChanged:!0})}),k(this,"onUrlChange",e=>{this.setState({url:e||"",dataChanged:!0})}),k(this,"setItem",e=>{h.a.clearUrlfieldState(y),this._updateStateWithItem(e,()=>{this.getIsCreating()&&(this._disableSaveOnBlur=!0,this.state.isFolder?this.focusTitleField():this.state.isTrash||this.focusUrlField(),this._disableSaveOnBlur=!1)})})}componentDidMount(){m.a.addChangeListener(this._onUrlbarStoreChanged),n.a.addChangeListener(this.onBookmarkStoreChange),e.nextTick(()=>{const e=this.props.getSelectedItem();e&&this.setItem(e)})}componentDidUpdate(e,t){t.id!==this.state.id&&this.resetUrlField()}componentWillUnmount(){m.a.removeChangeListener(this._onUrlbarStoreChanged),n.a.removeChangeListener(this.onBookmarkStoreChange),this._save(),e.nextTick(()=>h.a.clearUrlfieldState(y)),d.a.unlinkBookmarkComponent(this)}render(){const e=d.a.linkAndQueryUpdatingBookmark(this,this.state.id),{isFolder:t,isTrash:a}=this.state,i=N()(this.state.dateAdded).format("LLL"),s=!this.state.id||this.state.isSeparator||a;return l.a.createElement("div",{className:"manager-editor",onKeyDown:this.handleKeyPress,__source:{fileName:C,lineNumber:379}},l.a.createElement("form",{className:"addbookmark-cardwrapper cardview",onSubmit:this.onSubmit,__source:{fileName:C,lineNumber:380}},l.a.createElement("div",{className:"upper-half",__source:{fileName:C,lineNumber:383}},l.a.createElement("div",{className:"title-and-address",__source:{fileName:C,lineNumber:384}},l.a.createElement("div",{className:"fieldset",__source:{fileName:C,lineNumber:385}},l.a.createElement("input",{className:"cardview title",ref:this.refTitle,placeholder:Object(p.a)("Title"),onChange:this.onInputChange.bind(this,"title"),value:this.state.title,disabled:s,type:"text",onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:C,lineNumber:386}})),l.a.createElement("div",{className:t?"fieldset collapse":"fieldset",__source:{fileName:C,lineNumber:397}},l.a.createElement(u.a,{ref:this.refUrlField,key:this.state.id,pageId:y,autocompletionEnabled:!0,autoFocus:!1,className:"cardview address",disabled:s||t,displayUrl:this.state.url,editUrl:this.state.editUrl,handleDrop:!0,onBlur:this._saveOnBlur,onFocus:this.handleFocus,onKeyPress:this.handleKeyPress,onChange:this.onUrlChange,placeholder:Object(p.a)("Address"),title:Object(p.a)("Enter webpage address"),__source:{fileName:C,lineNumber:398}})),l.a.createElement("div",{className:"fieldset",__source:{fileName:C,lineNumber:419}},l.a.createElement("input",{className:"cardview nickname",placeholder:Object(p.a)("Nickname"),value:this.state.nickname,onChange:this.onInputChange.bind(this,"nickname"),type:"text",disabled:s,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:C,lineNumber:420}}))),l.a.createElement("div",{className:"preview",__source:{fileName:C,lineNumber:432}},l.a.createElement(c.a,{key:this.state.id,isFolder:t,src:this.state.thumbnail,__source:{fileName:C,lineNumber:433}}),!s&&l.a.createElement("div",{className:"thumb-controls",__source:{fileName:C,lineNumber:438}},l.a.createElement("button",{type:"button",tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:f()({circular:!0,"set-custom-thumbnail":!0}),title:Object(p.a)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:S.Ub},__source:{fileName:C,lineNumber:439}}),l.a.createElement("button",{type:"button",tabIndex:"-1",className:f()({circular:!0,"update-thumbnail":!0,updating:e}),title:Object(p.a)("Update thumbnail"),onClick:this.handleUpdateThumbnail,dangerouslySetInnerHTML:{__html:S.gb.large},__source:{fileName:C,lineNumber:449}})))),l.a.createElement("div",{className:"lower-half",__source:{fileName:C,lineNumber:464}},l.a.createElement("div",{className:"fieldset resizable",__source:{fileName:C,lineNumber:465}},l.a.createElement("textarea",{className:"description",placeholder:Object(p.a)("Description"),value:this.state.description,onChange:this.onInputChange.bind(this,"description"),type:"text",disabled:s,onFocus:this.handleFocus,onBlur:this._saveOnBlur,__source:{fileName:C,lineNumber:466}})),l.a.createElement("div",{className:"speeddial-bookmarksbar",__source:{fileName:C,lineNumber:476}},l.a.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:C,lineNumber:477}},l.a.createElement("label",{__source:{fileName:C,lineNumber:479}},l.a.createElement("input",{className:"cardview",disabled:s||!t||a,checked:this.state.speeddial,onChange:this.checkChangeSpeeddial,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:C,lineNumber:480}}),l.a.createElement("span",{__source:{fileName:C,lineNumber:487}},Object(p.a)("Speed Dial")))),l.a.createElement("div",{className:t?"fieldset center cardview":"fieldset center collapse",__source:{fileName:C,lineNumber:490}},l.a.createElement("label",{__source:{fileName:C,lineNumber:492}},l.a.createElement("input",{className:"cardview",disabled:s||!t||a,checked:this.isBookmarkBarChecked(),onChange:this.checkChangeBookmarkBar,onFocus:this.handleFocus,type:"checkbox",__source:{fileName:C,lineNumber:493}}),l.a.createElement("span",{__source:{fileName:C,lineNumber:500}},Object(p.a)("Bookmark Bar"))))),this.state.dateAdded&&l.a.createElement("div",{className:"fieldset",__source:{fileName:C,lineNumber:505}},l.a.createElement("div",{className:"meta-icon date fieldset",dangerouslySetInnerHTML:{__html:S.p},__source:{fileName:C,lineNumber:506}}),l.a.createElement("span",{className:"dateCreated bookmark",title:Object(p.a)("Date created"),__source:{fileName:C,lineNumber:508}},i))),l.a.createElement("input",{type:"submit",hidden:!0,__source:{fileName:C,lineNumber:516}})))}}t.a=Object(r.a)(A,O)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(39),s=a(37),n=a(22),r=a(120),o=a(310),l=a(40),c=a(9),d=a(10),u=a(0),h=a.n(u),m=a(83),p=a(32),g=a(136),b=a(2),f=a(7),_=a(6),N=a(15),v=a.n(N),E=a(44),w=a(232),S=a(1),C=a(13),k=a(145),y=a(20),O="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\BookmarkTree.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends h.a.PureComponent{constructor(...t){super(...t),A(this,"state",{bookmarkTreeNodeArray:[],nodes:[]}),A(this,"expandModel",{}),A(this,"_onStoreChange",()=>{this.onFilterChange(this.props.filter,k.default)}),A(this,"onFilterChange",(e,t)=>{if(e&&e.length>0){const a={bookmarks:!0,folders:!0};if("tree"===this.refs.treeList.getSearchStyle()){const i=n.a.getFilteredTree(e,a);this.setState({nodes:i.nodes,cutIds:n.a.getCutIds()},t(i.collapsed))}else{const i=n.a.getFilteredFlat(e,a);this.setState({nodes:i,cutIds:n.a.getCutIds()},t([]))}}else this.setState({nodes:n.a.getTopNodes(),cutIds:n.a.getCutIds()},t([]))}),A(this,"deleteSelectedItems",()=>this.refs.treeList.onDelete()),A(this,"expandAll",()=>{this.refs.treeList.expandAll()}),A(this,"collapseAll",()=>{this.refs.treeList.collapseAll()}),A(this,"setSearchStyle",e=>{this.refs.treeList.setSearchStyle(e)}),A(this,"onSearchStyleChanged",t=>{this.props.filter&&this.onFilterChange(this.props.filter,a=>{"tree"===t&&e.nextTick(()=>{this.refs.treeList.expandAllExcept(a)})})}),A(this,"scrollToId",e=>{this.refs.treeList.scrollToId(e)}),A(this,"onDrop",(e,t,a)=>{const s=this.getTargetSpec(t,a);return i.a.getUrlsFromEventPromise(e,!0).then(e=>this.onCreate(e,s.parentId,s.index,!1))}),A(this,"getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:void 0};if(this.isTrash(e)&&"on"!==t){const e=n.a.getLastTopNode();e?(a.parentId=e.parentId,a.index=e.index+1):a.parentId=n.a.getRootNode().id}else this.isFolder(e)&&"on"===t?a.parentId=e.id:e.isExpanded&&"below"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0));return a}),A(this,"isValidForClipboard",e=>!e.trash),A(this,"isValidAddTarget",e=>!this.isTrashed(e)),A(this,"isValidDragSource",e=>!e.trash),A(this,"hasChildren",e=>!!e.children&&e.children.length>0),A(this,"isTrashed",e=>!!e&&n.a.isTrashed(e)),A(this,"onAdd",e=>{const t=e?{title:Object(b.a)("title","New Folder")}:{};this.refs.treeList.onAdd(e,t)}),A(this,"resetBookmarkBar",()=>{s.a.setBookmarkBarFolderAndShow(n.a.getRootId())}),A(this,"moveBookmarkToBookmarkBarFolder",e=>{const t=e.id.toString();if(n.a.isFolder(e)){const e=n.a.getItemById(n.a.getBookmarkBarFolderId());if(!e||n.a.isDescendantOf(e,t))return}const a={parentId:n.a.getBookmarkBarFolderId()};f.default.bookmarks.move(t,a,()=>{f.default.runtime.lastError&&console.warn("chrome.bookmarks.move failed: %s %o",t,f.default.runtime.lastError.message)})}),A(this,"bookmarkActivePage",e=>{const t=this.refs.treeList.getParentAndIndex(e,!0),a=c.a.getActivePage();s.a.bookmarkPages(a,!1,t.parentId,t.index).then(e=>{void 0!==e&&this.refs.treeList.selectById(e)})}),A(this,"bookmarkAllOpenPages",e=>{const t=this.refs.treeList.getParentAndIndex(e,!0);s.a.bookmarkAllOpenPages(t.parentId,t.index).then(e=>{void 0!==e&&this.refs.treeList.selectById(e)})}),A(this,"onRootPasteContextMenu",e=>{this.clipboardItem=e,document.addEventListener("paste",this.onRootPaste),document.execCommand("paste"),document.removeEventListener("paste",this.onRootPaste)}),A(this,"onRootPaste",e=>{s.a.pasteWithPromise(e,n.a.getRootNode().id,!0)}),A(this,"isFolder",e=>!(!e||!e.children&&e.url)),A(this,"onNodesActivated",(e,t)=>{const a=[];t.forEach(e=>{Array.prototype.push.apply(a,i.a.getBookmarksByNode(e))});const s=i.a.getOpenOptionsFromModifierKeys(e);s.bookmarks=a,i.a.open(s,!0)}),A(this,"getSelectedBookmarks",()=>{const e=this.refs.treeList.getAllSelectedItems(),t=[];return e.forEach(e=>{Array.prototype.push.apply(t,i.a.getBookmarksByNode(e))}),t}),A(this,"getSelectedItem",()=>this.refs.treeList.getSelectedItem()),A(this,"isTrash",e=>!!e.trash),A(this,"_openInNewWindow",e=>{const t={bookmarks:this.getSelectedBookmarks(),inNewWindow:!0,incognito:e};i.a.open(t,!0)}),A(this,"_openInNewTab",e=>{const t={bookmarks:this.getSelectedBookmarks(),inCurrent:!1,inBackground:e};i.a.open(t,!0)}),A(this,"_openBookmark",()=>{const e={bookmarks:this.getSelectedBookmarks(),inCurrent:!0};i.a.open(e,!0)}),A(this,"canBeSpeedDialFolder",e=>!e.speeddial&&!this.isTrash(e)&&this.isFolder(e)&&n.a.validateForEdit(e.id)),A(this,"isSpeedDialFolder",e=>e.speeddial),A(this,"_supportSingleClick",()=>d.a.get(S.kBookmarksSingleClickOpens)&&!1===this.props.inManager),A(this,"getContextMenuItems",e=>e?this._getNodeMenuItems(e):this._getRootMenuItems()),A(this,"_getNodeMenuItems",e=>e.trash?[{handler:s.a.emptyTrash,...Object(_.a)("Empty Trash")}]:n.a.isSeparator(e)?[]:[{handler:this._openInNewTab.bind(this,!1),...Object(_.a)("Open in New Tab")},{handler:this._openInNewTab.bind(this,!0),...Object(_.a)("Open in Background Tab")},{handler:this._openBookmark,...Object(_.a)("Open")},{name:"---"},{handler:this._openInNewWindow.bind(this),...Object(_.a)("Open in New Window")},{handler:this._openInNewWindow.bind(this,!0),...Object(_.a)("Open in Private Window")},{name:"---"},{testVisibility:()=>this.canBeSpeedDialFolder(e)&&!this.isTrashed(e),handler:()=>{s.a.toggleSpeeddialFolder(e.id)},...Object(_.a)("Use as Speed Dial")},{testVisibility:()=>this.isSpeedDialFolder(e),handler:()=>{s.a.toggleSpeeddialFolder(e.id)},...Object(_.a)("Remove from Speed Dial")},{testVisibility:()=>this.isFolder(e)&&!this.isTrashed(e),handler:()=>{s.a.setBookmarkBarFolderAndToggleVisibility(e.id)},...Object(_.a)("Set as Bookmark Bar Folder")},{handler:()=>{this.moveBookmarkToBookmarkBarFolder(e)},...Object(_.a)("Move to Bookmark Bar Folder")},{name:"---"},{handler:()=>{this.bookmarkActivePage(e)},...Object(_.a)("Bookmark Active Page")},{handler:()=>{this.bookmarkAllOpenPages(e)},...Object(_.a)("Bookmark All Open Pages")}]),A(this,"_getRootMenuItems",()=>[{handler:this.bookmarkActivePage.bind(this,n.a.getRootNode()),...Object(_.a)("Bookmark Active Page")},{handler:this.bookmarkAllOpenPages.bind(this,n.a.getRootNode()),...Object(_.a)("Bookmark All Open Pages")},{name:"---"},{handler:this.resetBookmarkBar,...Object(_.a)("Set as Bookmark Bar Folder")},{name:"---"}]),A(this,"getContextMenuItemProps",e=>{if(e){const t=e.trash||n.a.isSeparator(e);return{showEdit:!1,showRename:n.a.validateForEdit(e.id),showNewItem:!t,showNewFolder:!t,showNewSeparator:!e.trash&&this.props.sorting.sortOrder===p.a.NO_SORTING,showCut:!t,showCopy:!t,showPaste:!t,showDelete:!e.trash,showExpandCollapse:!0,showImport:!1,showSettings:!0,showFullscreen:this.props.inManager}}return{showEdit:!1,showRename:!1,showNewItem:!0,showNewFolder:!0,showNewSeparator:this.props.sorting.sortOrder===p.a.NO_SORTING,showCut:!1,showCopy:!1,showPaste:!0,showDelete:!1,showExpandCollapse:!0,showImport:!0,showSettings:!0,showFullscreen:this.props.inManager}}),A(this,"getContextMenuNewItemString",()=>Object(_.a)("New Bookmark")),A(this,"getContextMenuImportString",()=>Object(_.a)("Import Bookmarks")),A(this,"onContextMenu",(e,t)=>{this.refs.treeList.onContextMenu(e,t)}),A(this,"getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!0};return a.available=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===i.b),a.available&&(a.onto=this.isFolder(e)),a}),A(this,"handleExpandClick",()=>{this.refs.treeList.toggleSelectedExpansion()}),A(this,"onItemClick",e=>{e.button!==E.a.kCenter&&this._supportSingleClick()&&void 0===this.refs.treeList.getInlineEditId()&&this.onOpenBookmarks(e)}),A(this,"onItemDoubleClick",e=>{e.button===E.a.kCenter||this._supportSingleClick()||this.onOpenBookmarks(e)}),A(this,"onItemMouseDown",(e,t)=>{t.button===E.a.kCenter&&(t.preventDefault(),t.stopPropagation())}),A(this,"onItemMouseUp",(e,t)=>{t.button===E.a.kCenter&&(this._openInNewTab(!0),t.preventDefault(),t.stopPropagation())}),A(this,"onOpenBookmarks",e=>{const t=i.a.getOpenOptionsFromModifierKeys(e);t.bookmarks=this.refs.treeList.selectionModel.selectedIds.map(e=>this.refs.treeList.findTreeItem(e.id)).filter(e=>!!e&&!!e.url),i.a.open(t,!0)}),A(this,"handleMouseEnter",e=>{m.a.setStatus(y.a.getHoverUrl(n.a.getUrlByNode(e)))}),A(this,"handleMouseLeave",()=>{m.a.clearStatus()}),A(this,"renderTitleRow",e=>{const t=e.node,a=16*(t.level+1)+"px",i=16*t.level+"px";return h.a.createElement("label",{key:"0","data-parent":t.parentId,onMouseEnter:this.handleMouseEnter.bind(this,t),onMouseLeave:this.handleMouseLeave,__source:{fileName:O,lineNumber:530}},this.isFolder(t)&&this.hasChildren(t)&&h.a.createElement("span",{className:"expand-icon",style:{marginLeft:i},onClick:this.handleExpandClick,dangerouslySetInnerHTML:{__html:C.R},__source:{fileName:O,lineNumber:537}}),this.isFolder(t)&&this.isTrash(t)&&h.a.createElement(o.a,{speeddial:t.speeddial,open:t.isExpanded,trash:!0,leftMargin:this.hasChildren(t)?0:a,__source:{fileName:O,lineNumber:544}}),this.isFolder(t)&&!this.isTrash(t)&&h.a.createElement(o.a,{speeddial:t.speeddial,open:t.isExpanded,trash:!1,leftMargin:this.hasChildren(t)?0:a,__source:{fileName:O,lineNumber:552}}),!this.isFolder(t)&&h.a.createElement(r.a,{url:t.faviconUrl?t.faviconUrl:t.url,style:{marginLeft:a},__source:{fileName:O,lineNumber:560}}),void 0!==e.inlineEditText&&h.a.createElement("input",{ref:"input",type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:O,lineNumber:565}}),void 0===e.inlineEditText&&h.a.createElement("span",{className:"title",__source:{fileName:O,lineNumber:576}},t.title?t.title:t.url===w.a||this.props.inManager?"":t.url),this.hasChildren(t)&&!this.props.fullView&&h.a.createElement("span",{className:"item-count",__source:{fileName:O,lineNumber:587}},t.children.filter(e=>!n.a.isSeparator(e)).length))}),A(this,"renderItemContent",e=>{const t=e.node,a=n.a.isSeparator(t),i=16*(t.level+1)+"px",{columns:s}=this.props,r=[];if(a){const e=0===(s?s.findIndex(e=>"title"===e.id):0)?i:0;r.push(h.a.createElement("label",{"data-parent":t.parentId,key:"0",__source:{fileName:O,lineNumber:607}},h.a.createElement("hr",{style:{marginLeft:e},className:"separator",__source:{fileName:O,lineNumber:608}})))}else this.props.fullView?s.map(a=>{switch(a.id){case"title":r.push(this.renderTitleRow(e));break;case"url":const i=y.a.getHoverUrl(n.a.getUrlByNode(t));r.push(h.a.createElement("label",{key:a.id,__source:{fileName:O,lineNumber:624}},this.hasChildren(t)&&this.props.fullView?h.a.createElement("span",{className:"secondary",__source:{fileName:O,lineNumber:626}},Object(b.a)("$1 item","$1 items",[t.children.length])):h.a.createElement("span",{__source:{fileName:O,lineNumber:631}},i)));break;case"nickname":r.push(h.a.createElement("label",{key:a.id,__source:{fileName:O,lineNumber:638}},h.a.createElement("span",{__source:{fileName:O,lineNumber:639}},t.nickname)));break;case"description":r.push(h.a.createElement("label",{key:a.id,__source:{fileName:O,lineNumber:645}},h.a.createElement("span",{__source:{fileName:O,lineNumber:646}},t.description)));break;case"dateAdded":r.push(h.a.createElement("label",{key:a.id,className:"right-aligned",__source:{fileName:O,lineNumber:652}},h.a.createElement("span",{__source:{fileName:O,lineNumber:653}},v()(t.dateAdded).format("ll"))))}}):r.push(this.renderTitleRow(e));return r}),A(this,"unSelectAll",()=>{this.refs.treeList.unSelectAll()}),A(this,"onSelect",e=>{if(!this.props.onSelect)return;if(!e)return void this.props.onSelect();const t=e.id;f.default.bookmarks.get(t.toString(),e=>{f.default.runtime.lastError&&console.warn("chrome.bookmarks.get failed: %s %o",t,f.default.runtime.lastError.message);var a=e&&1===e.length?e[0]:null;a&&this.props.onSelect(a)})}),A(this,"onCreate",(e,t,a,i)=>(e=Array.isArray(e)?e:[e],s.a.createWithPromise(e,t,a).then(e=>(1===e.length&&n.a.isSeparator(e[0])&&(i=!1),this.props.onCreate(i),e)))),A(this,"saveTitle",(e,t)=>{s.a.update(e,{title:t})})}UNSAFE_componentWillMount(){n.a.addChangeListener(this._onStoreChange)}componentDidMount(){this.onFilterChange(this.props.filter,()=>{const e=this.refs.treeList.getSelectedItem();e&&this.onSelect(e)})}UNSAFE_componentWillReceiveProps(t){if(this.props.filter!==t.filter){const a=t.filter.length,i=this.props.filter.length;0===i&&a>0&&(this.expandModel=this.refs.treeList.getExpandModel()),this.onFilterChange(t.filter,t=>{a>0?e.nextTick(()=>{this.refs.treeList.expandAllExcept(t)}):i>0&&0===a&&e.nextTick(()=>{this.refs.treeList.expandWithModel(this.expandModel)})})}}componentWillUnmount(){n.a.removeChangeListener(this._onStoreChange)}render(){return h.a.createElement(g.a,{ref:"treeList",nodes:this.state.nodes,cutIds:this.state.cutIds,onSelect:this.onSelect,onItemClick:this.onItemClick,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onNodesActivated,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:s.a.removeWithPromise,onMove:s.a.moveWithPromise,onEdit:this.props.onEdit,onCut:s.a.cut,onCopy:s.a.copy,onImport:l.a.showImportData,isFolder:this.isFolder,isSeparator:n.a.isSeparator,supportsInlineEdit:!0,mimeType:i.b,getDropSupport:this.getDropSupport,getDragData:n.a.getDragData,hasChildren:this.hasChildren,settings:this.props.inManager?"BOOKMARKS_MANAGER":"BOOKMARKS_PANEL",renderItemContent:this.renderItemContent,multiSelect:!this._supportSingleClick(),setCutIds:s.a.setCutIds,getContextMenuItems:this.getContextMenuItems,getContextMenuItemProps:this.getContextMenuItemProps,getContextMenuNewItemString:this.getContextMenuNewItemString,getContextMenuImportString:this.getContextMenuImportString,getTitle:n.a.getTitle,saveTitle:this.saveTitle,getTargetSpec:this.getTargetSpec,sorting:this.props.sorting,onDrop:this.onDrop,rootId:n.a.getRootId(),isValidAddTarget:this.isValidAddTarget,isValidDragSource:this.isValidDragSource,isValidForClipboard:this.isValidForClipboard,isValidToEdit:n.a.validateForEdit,validateForDrag:n.a.validateForDrag,validateForDeletion:n.a.validateForDeletion,columns:this.props.columns,__source:{fileName:O,lineNumber:710}})}}t.a=T}).call(this,a(64))},function(e,t,a){"use strict";var i=a(679),s=a(162),n=a(0),r=a.n(n),o=a(2),l=a(15),c=a.n(l),d=a(365),u="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistorySearch.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.Component{constructor(...e){super(...e),h(this,"search",e=>{const t=this.props.historyFilter.merge(e);this.props.search(t)}),h(this,"focusField",()=>{this.refs.search.focus()}),h(this,"onSearchChange",e=>{this.updateFilter(e.target.value)}),h(this,"updateFilter",e=>{const t=Object(d.a)(e.trim()),a={text:e,parsedFilter:t};this.search(a)}),h(this,"onStartTimeChange",e=>{const t=c()(e.target.value).startOf("day");t.isValid()&&this.search({startTime:t})}),h(this,"onEndTimeChange",e=>{const t=c()(e.target.value).endOf("day");this.search({endTime:t})}),h(this,"onSelectOption",()=>{const e=s.a.getTimeByRange({rangePicker:this.refs.datePicker.value},this.props.minDate.startOf("day"));this.search(e)}),h(this,"convertDate",e=>c()(e).format("YYYY-MM-DD"))}render(){const e=this.props.historyFilter,t=this.convertDate(new Date);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:"search",type:"search",tabIndex:"0",style:{flexShrink:2},value:e.text,onChange:this.onSearchChange,placeholder:Object(o.a)("verb","Search"),__source:{fileName:u,lineNumber:59}}),this.props.showPicker&&r.a.createElement("select",{ref:"datePicker",style:{flexShrink:2},value:this.props.historyFilter.rangePicker,onChange:this.onSelectOption,__source:{fileName:u,lineNumber:69}},r.a.createElement("option",{value:"today",__source:{fileName:u,lineNumber:74}},Object(o.a)("Today")),r.a.createElement("option",{value:"yesterday",__source:{fileName:u,lineNumber:75}},Object(o.a)("Yesterday")),r.a.createElement("option",{value:"7",__source:{fileName:u,lineNumber:76}},Object(o.a)("Last 7 Days")),r.a.createElement("option",{value:"30",__source:{fileName:u,lineNumber:77}},Object(o.a)("Last 30 Days")),r.a.createElement("option",{value:"date_range",__source:{fileName:u,lineNumber:78}},Object(o.a)("Date Range...")),r.a.createElement("option",{value:"all",__source:{fileName:u,lineNumber:79}},Object(o.a)("All History"))),this.props.showPicker&&"date_range"===this.props.historyFilter.rangePicker&&r.a.createElement("div",{className:"date-range",__source:{fileName:u,lineNumber:85}},r.a.createElement(i.a,{title:Object(o.a)("Start Date"),max:t,value:this.convertDate(e.startTime),onChange:this.onStartTimeChange,__source:{fileName:u,lineNumber:86}}),r.a.createElement(i.a,{title:Object(o.a)("End Date"),max:t,value:this.convertDate(e.endTime),onChange:this.onEndTimeChange,__source:{fileName:u,lineNumber:91}})))}}t.a=m},function(e,t,a){"use strict";var i=a(0),s=a(162);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){return class extends i.Component{constructor(e){super(e),r(this,"_onStoreChange",(e,t)=>{if(t===this.id||void 0===t)if("filterChange"===e){const e=s.a.getFilter(this.id);this.setState({historyFilter:e})}else"searchResultsReady"===e&&this.setState(this._getSearchStateById(this.id))}),r(this,"_getSearchStateById",e=>{const t=s.a.getHistorySearchResults(e);return{historyData:t.data,historyFilter:t.filter,historyStatistics:s.a.getStatistics(e),oldestHistoryDate:t.oldestHistoryDate}}),this.id=e.pageId||s.a.getPanelResourceKey(),this.state=this._getSearchStateById(this.id)}UNSAFE_componentWillMount(){s.a.addChangeListener(this._onStoreChange)}componentWillUnmount(){s.a.removeChangeListener(this._onStoreChange)}render(){return i.createElement(e,n({},this.props,this.state,{__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryStoreSubscription.jsx",lineNumber:67}}))}}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),s=a(92),n=a(2),r=a(13),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\AddAttachmentButton.jsx";function l({disabled:e,keyAccess:t,noteId:a,text:l}){const c=i.useRef(null);return i.createElement("label",{className:`button-toolbar ${e?"disabled":""}`,title:Object(n.a)("Attach new file..."),tabIndex:t,__source:{fileName:o,lineNumber:26}},i.createElement("input",{ref:c,type:"file",style:{display:"none"},accept:"image/*",disabled:e,onChange:e=>s.a.addImageFile(a,e.target.files[0]),__source:{fileName:o,lineNumber:31}}),i.createElement("button",{disabled:e,tabIndex:t,onClick:()=>{c.current&&c.current.click()},__source:{fileName:o,lineNumber:39}},i.createElement("div",{style:{display:"contents"},dangerouslySetInnerHTML:{__html:r.n},__source:{fileName:o,lineNumber:40}}),i.createElement("span",{__source:{fileName:o,lineNumber:41}},l)))}},,function(e,t,a){"use strict";(function(e){var i=a(0),s=a(39),n=a(310),r=a(92),o=a(49),l=a(12),c=a(9),d=a(32),u=a(143),h=a(136),m=a(2),p=a(6),g=a(15),b=a.n(g),f=a(44),_=a(5),N=a(36),v=a(235),E=a(13),w=a(145),S=a(20),C="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\notesTree.jsx";function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e){l.a.openURL(S.a.internalUrl("notes",e.id),{singleton:!0})}class O extends i.PureComponent{constructor(...t){super(...t),k(this,"state",{nodes:[],populated:!1,settings:"",cutIds:[]}),k(this,"expandModel",{}),k(this,"isEmpty",()=>this.state.populated&&0===this.state.nodes.length),k(this,"deleteSelectedItems",()=>this.refs.treeList.onDelete()),k(this,"delete",(e=[])=>Promise.all(e.map(e=>"string"!=typeof e?Promise.resolve():new Promise(t=>{_.a.notes.get(e,a=>{a&&a.length>0&&!a[0].trash?_.a.notes.remove(e,t):t()})})))),k(this,"isFolder",e=>o.b.isFolder(e)),k(this,"isTrash",e=>Boolean(e.trash)),k(this,"isEditable",()=>!1),k(this,"getUrlsByNodes",e=>e.map(e=>o.b.getNodeById(e.id)).filter(e=>!!e&&!!e.url).map(e=>Object(N.d)(e.url))),k(this,"onItemMouseDown",(e,t)=>{t.button===f.a.kCenter&&(t.preventDefault(),t.stopPropagation())}),k(this,"onItemMouseUp",(e,t)=>{if(t.button===f.a.kCenter){const a=this.getUrlsByNodes([e]);l.a.openUrls(a,s.a.getOpenOptionsFromModifierKeys(t)),t.preventDefault(),t.stopPropagation()}}),k(this,"onItemDoubleClick",(e,t)=>{const a=this.getUrlsByNodes([t]);a.length>0?l.a.openUrls(a,s.a.getOpenOptionsFromModifierKeys(e)):u.a.isEnabled("notes_manager")&&y(t)}),k(this,"onNodesActivated",(e,t)=>{const a=this.getUrlsByNodes(t);l.a.openUrls(a,s.a.getOpenOptionsFromModifierKeys(e))}),k(this,"onFilterChange",(e,t=w.default)=>{let a,i=[],s=[];const{pageId:n}=this.props;if(o.b.hasNotes())if(a=this.props.fullView?"NOTES_MANAGER_TREE"+(n?"_"+n:""):"NOTES_TREE",e.length>0){let t=e.toLowerCase();const a={};if(t.startsWith("url:")?(t=t.substring(4),a.url=t.length>0,a.content=!1):t.startsWith("content:")&&(t=t.substring(8),a.url=!1,a.content=t.length>0),"."===t&&(a.url=!1),"tree"===this.refs.treeList.getSearchStyle()){const e=o.b.getFilteredTree(t,a);i=e.nodes,s=e.collapsed}else i=o.b.getFilteredFlat(t,a)}else i=o.b.getRootNode().children;this.setState(e=>({settings:a||e.settings,nodes:i,populated:!0,cutIds:o.b.getCutIds()}),()=>t(s))}),k(this,"_onStoreChange",()=>{this.onFilterChange(this.props.filter)}),k(this,"hasChildren",e=>!!e.children&&e.children.length>0),k(this,"handleExpandClick",()=>{this.refs.treeList.toggleSelectedExpansion()}),k(this,"unSelectAll",()=>{this.refs.treeList.unSelectAll()}),k(this,"getSelectedItem",()=>this.refs.treeList.getSelectedItem()),k(this,"expandAll",()=>{this.refs.treeList.expandAll()}),k(this,"collapseAll",()=>{this.refs.treeList.collapseAll()}),k(this,"setSearchStyle",e=>{this.refs.treeList.setSearchStyle(e)}),k(this,"onSearchStyleChanged",t=>{this.props.filter&&this.onFilterChange(this.props.filter,a=>{"tree"===t&&e.nextTick(()=>{this.refs.treeList.expandAllExcept(a)})})}),k(this,"isValidForClipboard",e=>!e.trash),k(this,"isValidDragSource",e=>!e.trash),k(this,"isValidAddTarget",e=>!this.isTrashed(e)),k(this,"isTrashed",e=>!!e&&(!!e.trash||!!e.parentId&&this.isTrashed(this.refs.treeList.findTreeItem(e.parentId)))),k(this,"onAddFolder",()=>{const e={title:Object(m.a)("title","New Folder")};this.refs.treeList.onAdd(!0,e)}),k(this,"onAddNote",e=>this.refs.treeList.onAdd(!1,e)),k(this,"selectById",e=>{this.refs.treeList.selectById(e)}),k(this,"onDrop",(e,t,a)=>{const i=e.dataTransfer.getData("text/plain");if(i.length>0){const e=this.getTargetSpec(t,a),s={content:i};return this.onCreate([s],e.parentId,e.index,!0)}return Promise.resolve()}),k(this,"getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:void 0};if(this.isTrash(e)&&"on"!==t){const e=o.b.getLastTopNode();e?(a.parentId=e.parentId,a.index=e.index+1):a.parentId=o.b.getRootNode().id}else this.isFolder(e)&&"on"===t?a.parentId=e.id:e.isExpanded&&"below"===t?a.parentId=e.id:(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0));return a}),k(this,"onCreate",(e,t,a,i)=>r.a.createNotesFromTreeNodes(e,t,a,i).then(()=>this.props.onCreated())),k(this,"onMove",(e,t,a)=>(e=o.b.validateForDrag(e),Promise.all(e.map(e=>new Promise(i=>{const s={parentId:t,index:a},n=o.b.getNodeById(e);_.a.notes.move(e,s,()=>{i(e)}),void 0!==a&&n&&(n.parentId!==t||n.index>a)&&a++}))))),k(this,"getText",()=>new Promise(e=>{const t=c.a.getActivePage().get("id");_.a.utilities.getSelectedText(t,e)})),k(this,"getContextMenuItems",e=>e?this._getNodeMenuItems(e):this._getRootMenuItems()),k(this,"_getNodeMenuItems",e=>{if(e.trash)return Promise.resolve([{handler:r.a.emptyTrash,...Object(p.a)("Empty Trash")},{name:"---"}]);const t=c.a.getActivePage().get("url"),a=e.url;return this.getText().then(i=>[{handler:()=>y(e),...Object(p.a)(this.props.columns?"Open in New Tab":"Open in Note Editor")},{visible:!!a,handler:()=>!!a&&l.a.openUrls([a],{inNewWindow:!1,inCurrent:!1,inBackground:!1}),...Object(p.a)("Open Note Address")},{visible:!!this.props.columns,handler:this.props.editLink,...Object(p.a)("Edit Note Address")},{visible:!!i,handler:this.refs.treeList.onAdd.bind(null,!1,{content:i,url:t}),...Object(p.a)("Copy Selection to New Note")},{name:"---"}])}),k(this,"_getRootMenuItems",()=>this.getText().then(e=>[{visible:e.length>0,handler:this.refs.treeList.onAdd.bind(null,!1,{content:e}),...Object(p.a)("Copy Selection to New Note")}])),k(this,"getContextMenuItemProps",e=>{if(e){const t=e.trash||o.b.isSeparator(e),a=!e.trash;return{showEdit:!1,showRename:!t,showNewItem:!t,showNewFolder:!t,showNewSeparator:a&&this.props.sorting.sortOrder===d.a.NO_SORTING,showCut:!t,showCopy:!t,showPaste:!e||!t,showDelete:a,showExpandCollapse:!0,showSettings:!0}}return{showEdit:!1,showRename:!1,showNewItem:!0,showNewFolder:!0,showNewSeparator:this.props.sorting.sortOrder===d.a.NO_SORTING,showCut:!1,showCopy:!1,showPaste:!0,showDelete:!1,showExpandCollapse:!0,showSettings:!0}}),k(this,"getContextMenuNewItemString",()=>Object(p.a)("New Note")),k(this,"onContextMenu",(e,t)=>{this.refs.treeList.onContextMenu(e,t)}),k(this,"getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!0};return a.available=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===o.c),a.available&&(a.onto=this.isFolder(e)),a}),k(this,"saveTitle",(e,t)=>{_.a.notes.update(e,{title:t})}),k(this,"renderTitleRow",e=>{const t=e.node,a=16*(t.level+1)+"px",s=16*t.level+"px",r=this.isFolder(t);return i.createElement("label",{key:t.id,__source:{fileName:C,lineNumber:539}},r&&this.hasChildren(t)&&i.createElement("span",{className:"expand-icon",style:{marginLeft:s},onClick:this.handleExpandClick,dangerouslySetInnerHTML:{__html:E.R},__source:{fileName:C,lineNumber:542}}),r&&i.createElement(n.a,{trash:this.isTrash(t),open:t.isExpanded,leftMargin:this.hasChildren(t)?0:a,__source:{fileName:C,lineNumber:549}}),!r&&!t.url&&i.createElement("span",{style:{marginLeft:a},className:"tree-icon",dangerouslySetInnerHTML:{__html:E.pb},__source:{fileName:C,lineNumber:556}}),!r&&!!t.url&&i.createElement("span",{style:{marginLeft:a},className:"tree-icon",dangerouslySetInnerHTML:{__html:E.ob},__source:{fileName:C,lineNumber:562}}),void 0!==e.inlineEditText&&i.createElement("input",{ref:"input",type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:C,lineNumber:568}}),void 0===e.inlineEditText&&i.createElement("span",{className:"title",__source:{fileName:C,lineNumber:579}},Object(v.b)(t)),!this.props.fullView&&this.hasChildren(t)&&t.children&&i.createElement("span",{className:"item-count",__source:{fileName:C,lineNumber:583}},t.children.length))}),k(this,"renderItemContent",e=>{const t=e.node,a=o.b.isSeparator(t),s=this.isFolder(t),n=16*(t.level+1)+"px",{columns:r}=this.props,l=[];return a?l.push(i.createElement("label",{key:`${t.id}__separator__${l.length}`,"data-parent":t.parentId,__source:{fileName:C,lineNumber:601}},i.createElement("hr",{style:{marginLeft:n},className:"separator",__source:{fileName:C,lineNumber:604}}))):this.props.fullView?(r||[]).map(a=>{switch(a.id){case"title":l.push(this.renderTitleRow(e));break;case"url":l.push(i.createElement("label",{key:a.id,__source:{fileName:C,lineNumber:617}},i.createElement("span",{__source:{fileName:C,lineNumber:618}},t.url)));break;case"content":l.push(i.createElement("label",{key:a.id,__source:{fileName:C,lineNumber:624}},!s&&i.createElement("span",{__source:{fileName:C,lineNumber:626}},t.content),s&&t.children&&t.children.length>0&&i.createElement("span",{className:"secondary",__source:{fileName:C,lineNumber:629}},Object(m.a)("$1 item","$1 items",[t.children.length]))));break;case"attachments":l.push(i.createElement("label",{key:a.id,className:"right-aligned",__source:{fileName:C,lineNumber:638}},i.createElement("span",{__source:{fileName:C,lineNumber:639}},t.attachments&&t.attachments.length>0?t.attachments.length:"")));break;case"dateAdded":l.push(i.createElement("label",{key:a.id,className:"right-aligned",__source:{fileName:C,lineNumber:648}},!s&&i.createElement("span",{__source:{fileName:C,lineNumber:650}},b()(t.dateAdded).format("ll"))))}}):l.push(this.renderTitleRow(e)),l})}componentDidMount(){o.b.addChangeListener(this._onStoreChange),this.onFilterChange(this.props.filter)}componentWillUnmount(){o.b.removeChangeListener(this._onStoreChange)}UNSAFE_componentWillReceiveProps(t){if(this.props.filter!==t.filter){const a=t.filter.length,i=this.props.filter.length;0===i&&a>0&&(this.expandModel=this.refs.treeList.getExpandModel()),this.onFilterChange(t.filter,t=>{a>0?e.nextTick(()=>{this.refs.treeList.expandAllExcept(t)}):i>0&&0===a&&e.nextTick(()=>{this.refs.treeList.expandWithModel(this.expandModel)})})}}render(){if(!this.state.populated&&!this.props.filter)return null;const e=o.b.getRootNode().id;return i.createElement(h.a,{ref:"treeList",nodes:this.state.nodes,cutIds:this.state.cutIds,settings:this.state.settings,rootId:e,onSelect:this.props.onItemSelected,onItemDoubleClick:this.onItemDoubleClick,onItemMouseDown:this.onItemMouseDown,onItemMouseUp:this.onItemMouseUp,onItemsActivated:this.onNodesActivated,onCreate:this.onCreate,onSearchStyleChanged:this.onSearchStyleChanged,delete:this.delete,onMove:this.onMove,onDrop:this.onDrop,onCut:r.a.cut,onCopy:r.a.copy,supportsInlineEdit:!0,mimeType:o.c,getDropSupport:this.getDropSupport,getDragData:o.b.getDragData,isFolder:this.isFolder,isSeparator:o.b.isSeparator,hasChildren:this.hasChildren,renderItemContent:this.renderItemContent,getContextMenuItemsPromise:this.getContextMenuItems,getContextMenuItemProps:this.getContextMenuItemProps,getContextMenuNewItemString:this.getContextMenuNewItemString,setCutIds:r.a.setCutIds,getTitle:o.b.getTitle,saveTitle:this.saveTitle,getTargetSpec:this.getTargetSpec,isValidAddTarget:this.isValidAddTarget,isValidDragSource:this.isValidDragSource,isValidForClipboard:this.isValidForClipboard,isValidToEdit:o.b.validateForEdit,validateForDrag:o.b.validateForDrag,validateForDeletion:o.b.validateForDeletion,sorting:this.props.sorting,columns:this.props.columns,__source:{fileName:C,lineNumber:671}})}}t.a=O}).call(this,a(64))},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(0),s=a(2),n=a(13),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesWelcome.jsx";function o({onAddNote:e}){return i.createElement("div",{className:"notes-welcome",__source:{fileName:r,lineNumber:13}},i.createElement("div",{className:"happy-note",onClick:e,__source:{fileName:r,lineNumber:14}},i.createElement("span",{dangerouslySetInnerHTML:{__html:n.nb},__source:{fileName:r,lineNumber:15}}),i.createElement("h1",{__source:{fileName:r,lineNumber:16}},Object(s.a)("Write Your First Note")),i.createElement("p",{__source:{fileName:r,lineNumber:17}},Object(s.a)("Add a new note to begin, or select text on any webpage and create a note from contextual menu."))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),s=a(26),n=a(2),r=a(13),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanelToolbar.jsx";class l extends i.PureComponent{constructor(...e){var t,a,s;super(...e),t=this,a="refSearch",s=i.createRef(),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s}focusSearch(){this.refSearch.current&&this.refSearch.current.focus()}render(){const{editorLayout:e,filter:t,onFilterValueChange:a,onAddNote:l,onDeleteSelectedItems:c,onAddFolder:d,onSetLayout:u,isAddNoteDisabled:h,isDeleteDisabled:m}=this.props;return i.createElement("div",{className:"toolbar toolbar-default toolbar-medium toolbar-wrap",__source:{fileName:o,lineNumber:47}},i.createElement("input",{ref:this.refSearch,type:"search",className:"notesearch",placeholder:Object(n.a)("verb","Search"),value:t,title:Object(n.a)("Limit the search to address or content by $1 or $2",["URL:","CONTENT:"]),onChange:({currentTarget:e})=>a(e.value),__source:{fileName:o,lineNumber:48}}),i.createElement("div",{className:"toolbar toolbar-nowrap",__source:{fileName:o,lineNumber:59}},i.createElement("div",{className:"toolbar-group",__source:{fileName:o,lineNumber:60}},i.createElement(s.a,{onClick:l,tooltip:Object(n.a)("New Note"),image:r.f.small,disabled:h,__source:{fileName:o,lineNumber:61}}),i.createElement(s.a,{onClick:c,tooltip:Object(n.a)("other","Delete"),image:r.Lb.medium,disabled:m,__source:{fileName:o,lineNumber:67}})),i.createElement(s.a,{onClick:d,image:r.Q.medium,tooltip:Object(n.a)("command","New Folder"),__source:{fileName:o,lineNumber:74}}),e&&i.createElement(s.a,{style:{marginLeft:"auto"},onClick:u,image:"vertical"===e?r.nc.medium:r.mc.medium,tooltip:Object(n.a)("command","Toggle Layout"),__source:{fileName:o,lineNumber:81}})))}}},function(e,t,a){"use strict";const i=["mail.google.com"];t.a=function(e,t,a=999){let s="",n="",r=!1;if(!e||!t)return"";for(const e in i)-1!==t.indexOf(i[e])&&(r=!0);return s=r?e.match(/[\(\[\{](\d+)[\}\]\)]/):e.match(/^\((\d+)\D*?\)/),s&&s[1]&&s[1]>0&&(n=parseInt(s[1])),n>a&&(n="+"),n}},,,,,,,,,function(e,t,a){"use strict";var i=a(0),s=a(19),n=a(8),r=a(33),o=a(2),l=a(5),c=a(1),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultSettings.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=[c.kStartupCheckIsDefault],m=n.a.getEventHandler;class p extends i.Component{constructor(...e){super(...e),u(this,"_isMounted",!1),u(this,"state",{isVivaldiDefault:!0}),u(this,"getDefaultBrowserValue",()=>{l.a.utilities.isVivaldiDefaultBrowser(e=>{this.setState({isVivaldiDefault:!0===e})})}),u(this,"setVivaldiDefault",()=>{l.a.utilities.setVivaldiAsDefaultBrowser(e=>{this._isMounted&&this.setState({isVivaldiDefault:!0===e})}),this.props.onClose&&this.props.onClose()}),u(this,"renderCheckbox",()=>i.createElement("label",{title:Object(o.a)("Check if Vivaldi is your default browser upon every startup"),__source:{fileName:d,lineNumber:65}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kStartupCheckIsDefault],onChange:m(c.kStartupCheckIsDefault),__source:{fileName:d,lineNumber:67}}),i.createElement("span",{__source:{fileName:d,lineNumber:70}},Object(o.a)("Check on Startup"))))}componentDidMount(){this.getDefaultBrowserValue(),this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return this.props.onClose?i.createElement("form",{onSubmit:this.setVivaldiDefault,__source:{fileName:d,lineNumber:78}},i.createElement("header",{className:"dialog-header",__source:{fileName:d,lineNumber:79}},i.createElement("h1",{className:"dialog-title",__source:{fileName:d,lineNumber:80}},Object(o.a)("Default Browser"))),i.createElement("div",{className:"dialog-content",__source:{fileName:d,lineNumber:82}},i.createElement("p",{__source:{fileName:d,lineNumber:83}},Object(o.a)("Vivaldi isn’t your default browser.")),this.renderCheckbox()),i.createElement("footer",{className:"dialog-footer",__source:{fileName:d,lineNumber:86}},i.createElement("input",{type:"submit",value:Object(o.a)("browser","Set as Default"),autoFocus:!0,__source:{fileName:d,lineNumber:87}}),i.createElement("input",{type:"button",value:Object(o.a)("Cancel"),onClick:this.props.onClose,__source:{fileName:d,lineNumber:90}}))):i.createElement(r.a,{filter:this.props.filter,__source:{fileName:d,lineNumber:99}},i.createElement("div",{className:"setting-group",__source:{fileName:d,lineNumber:100}},!this.props.onClose&&i.createElement("h3",{__source:{fileName:d,lineNumber:102}},Object(o.a)("Default Browser")),i.createElement("div",{className:"setting-single",__source:{fileName:d,lineNumber:104}},this.state.isVivaldiDefault?i.createElement("p",{__source:{fileName:d,lineNumber:112}},Object(o.a)("Vivaldi is set as your default browser.")):i.createElement("div",{__source:{fileName:d,lineNumber:106}},i.createElement("p",{__source:{fileName:d,lineNumber:107}},Object(o.a)("Vivaldi isn’t your default browser.")),i.createElement("input",{type:"button",onClick:this.setVivaldiDefault,value:Object(o.a)("browser","Set as Default"),__source:{fileName:d,lineNumber:108}}))),i.createElement("div",{className:"setting-single pad-top",__source:{fileName:d,lineNumber:115}},this.renderCheckbox())))}}t.a=Object(s.a)(p,h)},function(e,t,a){"use strict";var i=a(19),s=a(96),n=a(8),r=a(0),o=a.n(r),l=a(234),c=a(26),d=a(80),u=a(2),h=a(130),m=a(146),p=a(13),g=a(1),b=a(123),f="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\readermode\\ReaderModeControls.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=n.a.getEventHandler,v=[g.kKeyboardTabToAll,g.kWebpagesReaderAllowVertical,g.kWebpagesReaderControls,g.kWebpagesReaderStyle],E=["ja","ja-KS","ko","zh-CN","zh-TW"].includes(navigator.language);class w extends o.a.Component{constructor(...e){super(...e),_(this,"state",{isOpen:!1}),_(this,"setTheme",e=>()=>{this.setStyle({themeStyle:e})}),_(this,"setFontFamily",e=>()=>{this.setStyle({fontFamily:e})}),_(this,"setLineHeight",e=>()=>{const t=(this.props.prefValues[g.kWebpagesReaderStyle].lineHeight+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({lineHeight:parseFloat(t)})}),_(this,"setFontSize",e=>()=>{const t=(this.props.prefValues[g.kWebpagesReaderStyle].fontSize+("increment"===e?.1:-.1)).toFixed(1);this.setStyle({fontSize:parseFloat(t)})}),_(this,"setWidth",e=>()=>{const t=this.props.prefValues[g.kWebpagesReaderStyle];this.setStyle({width:Math.round(t.width+("increment"===e?50:-50))})}),_(this,"setDirection",e=>()=>{this.setStyle({writingMode:e})}),_(this,"setStyle",Object(b.a)(e=>{n.a.set(g.kWebpagesReaderStyle,{...this.props.prefValues[g.kWebpagesReaderStyle],...e}),l.a.setReaderModeStyle()},300,{leading:!0,trailing:!0})),_(this,"allowVerticalReader",e=>{n.a.set(g.kWebpagesReaderAllowVertical,e.target.checked),e.target.checked||this.setDirection("unset")()}),_(this,"toggleControls",()=>{this.setState(e=>({isOpen:!e.isOpen}))}),_(this,"canFontGrow",()=>this.props.prefValues[g.kWebpagesReaderStyle].fontSize<2),_(this,"canFontShrink",()=>this.props.prefValues[g.kWebpagesReaderStyle].fontSize>.5),_(this,"canLineHeightGrow",()=>this.props.prefValues[g.kWebpagesReaderStyle].lineHeight<2),_(this,"canLineHeightShrink",()=>this.props.prefValues[g.kWebpagesReaderStyle].lineHeight>1),_(this,"canColumnGrow",()=>{const e=this.props.prefValues[g.kWebpagesReaderStyle],t=document.body?document.body.clientWidth:0,a=document.body?document.body.clientHeight:0,i=Math.max(t-80,2e3),s=Math.max(a-100,900),n="vertical-rl"===e.writingMode;return e.width<(n?s:i)}),_(this,"canColumnShrink",()=>this.props.prefValues[g.kWebpagesReaderStyle].width>300)}render(){const{BROWSER_COLOR_FG:e,BROWSER_COLOR_ACCENT_BG:t}=this.props.vivaldiSettings,a=this.props.prefValues[g.kWebpagesReaderAllowVertical],i=this.props.prefValues[g.kWebpagesReaderStyle],s=d.a.getThemeColors().BROWSER_COLOR_FG,n="vertical-rl"===i.writingMode;if(this.props.prefs){const s=o.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:f,lineNumber:184}},o.a.createElement("h2",{__source:{fileName:f,lineNumber:185}},Object(u.a)("Reader")),o.a.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:189}},o.a.createElement("label",{__source:{fileName:f,lineNumber:190}},o.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[g.kWebpagesReaderControls],onChange:N(g.kWebpagesReaderControls),__source:{fileName:f,lineNumber:191}}),o.a.createElement("span",{__source:{fileName:f,lineNumber:194}},Object(u.a)("Display Settings on Page in Reader")))),!E&&o.a.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:199}},o.a.createElement("label",{__source:{fileName:f,lineNumber:200}},o.a.createElement("input",{type:"checkbox",checked:a,onChange:N(g.kWebpagesReaderAllowVertical),__source:{fileName:f,lineNumber:201}}),o.a.createElement("span",{__source:{fileName:f,lineNumber:204}},Object(u.a)("Allow Vertical Text Direction")))),o.a.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:f,lineNumber:209}},o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:210}},Object(u.a)("Font Face")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:211}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:212}},o.a.createElement(c.a,{title:Object(u.a)("Sans-serif"),image:p.Ob.medium,isPressed:"sans-serif"===i.fontFamily,onClick:this.setFontFamily("sans-serif"),tabIndex:0,__source:{fileName:f,lineNumber:213}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:220}}),o.a.createElement(c.a,{title:Object(u.a)("Serif"),image:p.Qb.medium,isPressed:"serif"===i.fontFamily,onClick:this.setFontFamily("serif"),tabIndex:0,__source:{fileName:f,lineNumber:221}}))),o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:231}},Object(u.a)("Font Size")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:232}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:233}},o.a.createElement(c.a,{className:"decrease-font-size",tooltip:Object(u.a)("Decrease font size"),title:Object(u.a)("Decrease"),image:p.Ob.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),tabIndex:0,__source:{fileName:f,lineNumber:234}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:243}}),o.a.createElement(c.a,{className:"increase-font-size",tooltip:Object(u.a)("Increase font size"),title:Object(u.a)("Increase"),image:p.Ob.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),tabIndex:0,__source:{fileName:f,lineNumber:244}})),o.a.createElement("span",{__source:{fileName:f,lineNumber:254}},Math.round(100*i.fontSize)+" %")),o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:259}},Object(u.a)("Line Height")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:260}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:261}},o.a.createElement(c.a,{title:Object(u.a)("Tighten"),tooltip:Object(u.a)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:p.X,tabIndex:0,__source:{fileName:f,lineNumber:262}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:270}}),o.a.createElement(c.a,{title:Object(u.a)("Loosen"),tooltip:Object(u.a)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:p.Y,tabIndex:0,__source:{fileName:f,lineNumber:271}})),o.a.createElement("span",{__source:{fileName:f,lineNumber:280}},parseFloat(i.lineHeight).toFixed(1))),o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:285}},Object(u.a)("Column Width")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:286}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:287}},o.a.createElement(c.a,{title:Object(u.a)("Shrink"),tooltip:Object(u.a)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:p.E,tabIndex:0,__source:{fileName:f,lineNumber:288}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:296}}),o.a.createElement(c.a,{title:Object(u.a)("Grow"),tooltip:Object(u.a)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:p.D,tabIndex:0,__source:{fileName:f,lineNumber:297}})),o.a.createElement("span",{__source:{fileName:f,lineNumber:306}},i.width+" px")),(E||a)&&o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:312}},Object(u.a)("Text Direction")),(E||a)&&o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:315}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:316}},o.a.createElement(c.a,{tooltip:Object(u.a)("Horizontal Text"),title:Object(u.a)("title","Horizontal"),onClick:this.setDirection("unset"),isPressed:"vertical-rl"!==i.writingMode,image:p.Jb,tabIndex:0,__source:{fileName:f,lineNumber:317}}),o.a.createElement(c.a,{tooltip:Object(u.a)("Vertical Text"),title:Object(u.a)("title","Vertical"),isPressed:"vertical-rl"===i.writingMode,onClick:this.setDirection("vertical-rl"),image:p.Kb,tabIndex:0,__source:{fileName:f,lineNumber:325}}))),o.a.createElement("h3",{className:"pad-top",__source:{fileName:f,lineNumber:337}},Object(u.a)("Color Scheme")),o.a.createElement("div",{className:"toolbar toolbar-medium toolbar-default no-top-padding",__source:{fileName:f,lineNumber:338}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:339}},o.a.createElement(c.a,{title:Object(u.a)("other","Light"),image:p.A.medium,onClick:this.setTheme("light"),isPressed:"light"===i.themeStyle,buttonStyle:{"--kIconCircleFill":"#f6f6f6","--kIconCircleStroke":e},tabIndex:0,__source:{fileName:f,lineNumber:340}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:351}}),o.a.createElement(c.a,{title:Object(u.a)("other","Dark"),image:p.A.medium,onClick:this.setTheme("dark"),isPressed:"dark"===i.themeStyle,buttonStyle:{"--kIconCircleFill":"#111111","--kIconCircleStroke":e},tabIndex:0,__source:{fileName:f,lineNumber:352}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:363}}),o.a.createElement(c.a,{title:Object(u.a)("other","Theme"),image:p.A.medium,isPressed:"theme"===i.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":t,"--kIconCircleStroke":e},tabIndex:0,__source:{fileName:f,lineNumber:364}})))),o.a.createElement("div",{className:"setting-group unlimited",__source:{fileName:f,lineNumber:379}},o.a.createElement("input",{type:"button",value:Object(u.a)("Reset to Defaults"),onClick:l.a.resetReaderModeStyle,__source:{fileName:f,lineNumber:380}})));return Object(h.a)(s,this.props.filter)}return[o.a.createElement(m.CSSTransition,{key:"toolbar",classNames:"reader-toolbar",in:this.state.isOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:f,lineNumber:391}},o.a.createElement("div",{className:"toolbar reader-toolbar toolbar-default toolbar-medium",__source:{fileName:f,lineNumber:402}},o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:404}},o.a.createElement(c.a,{tooltip:Object(u.a)("Sans-serif"),image:p.Ob.medium,isPressed:"sans-serif"===i.fontFamily,onClick:this.setFontFamily("sans-serif"),__source:{fileName:f,lineNumber:405}}),o.a.createElement(c.a,{tooltip:Object(u.a)("Serif"),image:p.Qb.medium,buttonStyle:{fontFamily:"serif"},isPressed:"serif"===i.fontFamily,onClick:this.setFontFamily("serif"),__source:{fileName:f,lineNumber:411}})),o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:420}},o.a.createElement(c.a,{className:"decrease-font-size",tooltip:Object(u.a)("Decrease font size"),image:p.Ob.medium,disabled:!this.canFontShrink(),onClick:this.setFontSize("decrement"),__source:{fileName:f,lineNumber:421}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:428}}),o.a.createElement(c.a,{className:"increase-font-size",tooltip:Object(u.a)("Increase font size"),image:p.Ob.medium,disabled:!this.canFontGrow(),onClick:this.setFontSize("increment"),__source:{fileName:f,lineNumber:429}})),o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:438}},o.a.createElement(c.a,{className:n?"button-rotateimage":"",tooltip:Object(u.a)("Tighten line spacing"),disabled:!this.canLineHeightShrink(),onClick:this.setLineHeight("decrement"),image:p.X,__source:{fileName:f,lineNumber:439}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:446}}),o.a.createElement(c.a,{className:n?"button-rotateimage":"",tooltip:Object(u.a)("Loosen line spacing"),disabled:!this.canLineHeightGrow(),onClick:this.setLineHeight("increment"),image:p.Y,__source:{fileName:f,lineNumber:447}})),o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:456}},o.a.createElement(c.a,{className:n?"button-rotateimage":"",tooltip:Object(u.a)("Shrink column"),disabled:!this.canColumnShrink(),onClick:this.setWidth("decrement"),image:p.E,__source:{fileName:f,lineNumber:457}}),o.a.createElement("hr",{__source:{fileName:f,lineNumber:464}}),o.a.createElement(c.a,{className:n?"button-rotateimage":"",tooltip:Object(u.a)("Grow column"),disabled:!this.canColumnGrow(),onClick:this.setWidth("increment"),image:p.D,__source:{fileName:f,lineNumber:465}})),(E||a)&&o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:475}},o.a.createElement(c.a,{tooltip:Object(u.a)("Horizontal Text"),isPressed:"vertical-rl"!==i.writingMode,onClick:this.setDirection("unset"),image:p.Jb,__source:{fileName:f,lineNumber:476}}),o.a.createElement(c.a,{tooltip:Object(u.a)("Vertical Text"),isPressed:"vertical-rl"===i.writingMode,onClick:this.setDirection("vertical-rl"),image:p.Kb,__source:{fileName:f,lineNumber:482}})),o.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:f,lineNumber:491}},o.a.createElement(c.a,{tooltip:Object(u.a)("other","Light"),image:p.A.medium,onClick:this.setTheme("light"),isPressed:"light"===i.themeStyle,buttonStyle:{"--kIconCircleFill":"white","--kIconCircleStroke":e},__source:{fileName:f,lineNumber:492}}),o.a.createElement(c.a,{tooltip:Object(u.a)("other","Dark"),image:p.A.medium,onClick:this.setTheme("dark"),image:p.A.medium,isPressed:"dark"===i.themeStyle,buttonStyle:{"--kIconCircleFill":"black","--kIconCircleStroke":e},__source:{fileName:f,lineNumber:502}}),o.a.createElement(c.a,{tooltip:Object(u.a)("other","Inherit Theme"),image:p.A.medium,isPressed:"theme"===i.themeStyle,onClick:this.setTheme("theme"),buttonStyle:{"--kIconCircleFill":t,"--kIconCircleStroke":e},__source:{fileName:f,lineNumber:513}})))),o.a.createElement(c.a,{buttonStyle:this.state.isOpen?void 0:{fill:s},key:"reader-settings-toggle",className:"reader-settings-toggle",onClick:this.toggleControls,tooltip:Object(u.a)("Reader settings"),image:p.Rb.medium,__source:{fileName:f,lineNumber:528}})]}}t.a=Object(i.a)(Object(s.a)(w,["BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG"]),v)},function(e,t,a){"use strict";var i=a(0),s=a(63),n=a(285),r=a(2),o=a(17),l=a.n(o),c=a(130),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\MasterDetail.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.Component{constructor(e){super(e),u(this,"onSelectItem",e=>{this.setState({selectedIndex:e})}),u(this,"onCreateItem",e=>{this.setState({isCreating:!0}),"function"==typeof this.props.onCreateItem&&this.props.onCreateItem(e)}),u(this,"onCancelCreate",()=>{this.setState({isCreating:!1})}),u(this,"considerRemovingItem",()=>{this.setState({showDeleteConfirmation:!0})}),u(this,"cancelRemoval",()=>{this.setState({showDeleteConfirmation:!1})}),u(this,"renderContentElement",(e,t,a,i)=>{if(!e||t)return i(a);const s=e&&a&&function(e,t){let a=!1;const i={...t};for(const s of Object.keys(t)){const n=t[s];n.toLowerCase().includes(e)&&(i[s]=Object(c.b)(n,e),a=!0)}return a?i:null}(e,a);return e&&!s?null:i(s||a)}),this.state={selectedIndex:this.props.initialSelectedIndex||(this.props.items.length>0?0:-1),isCreating:!1,showDeleteConfirmation:!1}}componentDidUpdate(e){this.props.items.length!==e.items.length&&this.cancelRemoval()}render(){const{items:e,masterLayout:t}=this.props,a=this.state.selectedIndex,o=null!=a&&e[a];let u;const h=(this.props.title||this.props.subtitle||"").toLowerCase().includes(this.props.filter)?"":this.props.filter,m=!h||e.some(e=>"string"==typeof e.name&&e.name.toLowerCase().includes(h));return this.state.isCreating&&this.props.renderCreate?u=this.renderContentElement(h,m,this.props.createStrings?this.props.createStrings:this.props.contentStrings,this.props.renderCreate.bind(this)):o?u=this.renderContentElement(h,m,this.props.contentStrings,this.props.renderContent.bind(this,a)):this.props.renderEmpty&&(u=this.renderContentElement(h,m,this.props.emptyStrings?this.props.emptyStrings:this.props.contentStrings,this.props.renderEmpty.bind(this))),u||m?i.createElement("div",{__source:{fileName:d,lineNumber:165}},this.props.title&&i.createElement("h2",{__source:{fileName:d,lineNumber:167}},Object(c.b)(this.props.title,this.props.filter)),this.props.subtitle&&i.createElement("h3",{__source:{fileName:d,lineNumber:170}},Object(c.b)(this.props.subtitle,this.props.filter)),i.createElement("div",{className:this.props.className?this.props.className+" master-detail":"master-detail",style:this.props.style,__source:{fileName:d,lineNumber:172}},this.state.showDeleteConfirmation&&o&&this.props.deleteDialog&&i.createElement(s.a,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:d,lineNumber:180}},this.props.deleteDialog({account:o,onClose:this.cancelRemoval})),this.state.showDeleteConfirmation&&o&&this.props.deleteTitle&&i.createElement(s.a,{onRequestClose:this.cancelRemoval,viewMode:"slide",__source:{fileName:d,lineNumber:185}},i.createElement("header",{className:"dialog-header",__source:{fileName:d,lineNumber:186}},i.createElement("h1",{className:"dialog-title",__source:{fileName:d,lineNumber:187}},this.props.deleteTitle)),i.createElement("div",{className:"dialog-content",__source:{fileName:d,lineNumber:189}},i.createElement("p",{className:"error",__source:{fileName:d,lineNumber:190}},Object(r.a)("Are you sure you would like to delete “$1”?",[o.name]))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:d,lineNumber:194}},i.createElement("input",{type:"button",className:"danger",value:Object(r.a)("verb","Delete"),onClick:"function"==typeof this.props.onRemove?this.props.onRemove.bind(this,a):null,__source:{fileName:d,lineNumber:195}}),i.createElement("input",{type:"button",value:Object(r.a)("Cancel"),autoFocus:!0,onClick:this.cancelRemoval,__source:{fileName:d,lineNumber:203}}))),i.createElement("div",{className:l()({master:!0,"master-layout-double":0===t,"master-layout-single":1===t}),__source:{fileName:d,lineNumber:212}},i.createElement(n.a,{items:e,renderListItem:this.props.renderListItem,onSelectItem:this.onSelectItem,onCreateItem:this.onCreateItem,renderEmptyList:this.props.renderEmptyList,moveItem:this.props.moveItem,onRemove:this.props.onRemove||(()=>{}),filter:this.props.filter,selectedIndex:this.state.selectedIndex,onContextMenu:this.props.onContextMenu,onActivate:this.props.onActivate,onCancelCreate:this.onCancelCreate,addTipString:this.props.addTipString,considerRemovingItem:this.considerRemovingItem,deleteTipString:this.props.deleteTipString,supportDragAndDrop:this.props.supportDragAndDrop,mimeType:this.props.mimeType?this.props.mimeType.toString():void 0,renderCreateListItem:this.props.renderCreateListItem,__source:{fileName:d,lineNumber:218}})),u)):null}}t.a=h},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(15),o=a.n(r);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a.PureComponent{constructor(...e){super(...e),l(this,"state",{remaining:o.a.duration({})}),l(this,"componentDidMount",()=>{this.nextTick()}),l(this,"componentWillUnmount",()=>{clearTimeout(this.timer)}),l(this,"nextTick",()=>{this.timer=setTimeout(this.nextTick,1e3),this.props.end.isAfter(o()())?(this.setState({remaining:o.a.duration(this.props.end.diff(o()()))}),this.props.onElapsed(!1)):(this.setState({remaining:o.a.duration(this.props.end.diff(o()()))}),this.props.onElapsed(!0))})}render(){const e=this.state.remaining;return s.a.createElement("span",{__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Countdown.jsx",lineNumber:46}},Object(n.a)(this.props.label,[e.minutes().toString().padStart(2,"0")+":"+e.seconds().toString().padStart(2,"0")]))}}t.a=c},function(e,t,a){"use strict";a(106);var i=a(12),s=a(7),n=a(5),r=a(21),o=a(157);t.a=function(e,t,a){const l=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m)},c=(t,l,d,u)=>{n.a.tabsPrivate.onDragEnd.removeListener(c),s.default.runtime.sendMessage({dispatchAction:o.a}),!t&&l&&i.a.detachPage(Object(r.List)(e),d,u),a&&a.onDragEnd()},d=t.pageX,u=t.pageY,h=t=>{if(Math.abs(t.pageX-d)>5||Math.abs(t.pageY-u)>5){l();const i=(a?a.element:t.target).getBoundingClientRect(),r=a?a.offsetLeft:0,d=a?a.offsetTop:0,u=a?a.offsetHeight:0,h=a?a.offsetWidth:0;s.default.runtime.sendMessage({dispatchAction:o.c}),n.a.tabsPrivate.onDragEnd.addListener(c);const[m]=e;n.a.tabsPrivate.startDrag({mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:e.map(e=>e.id),active:(e.find(e=>e.active)||m).id}),url:m.url,title:m.title,posX:i.left+r,posY:i.top+d,width:i.width+h,height:i.height+u,cursorX:10,cursorY:10}),a&&a.onDragStart(e)}},m=()=>{l()};window.addEventListener("mousemove",h),window.addEventListener("mouseup",m)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=function(){let e,t,a,i,s;return function(n,r,o,l){const c=(new Date).getTime();n!==e||r!==t?(e=n,t=r,a=c):n===e&&r===t&&n!==i&&r!==s&&a&&c-a>o&&(l(),i=n,s=r,e=t=a=void 0)}}},function(e,t,a){"use strict";var i=a(86),s=a(50),n=a(10),r=a(0),o=a.n(r),l=a(25),c=a(16),d=a(5),u=a(1);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends o.a.PureComponent{constructor(...e){super(...e),h(this,"lastKeyWasAltDown",!1),h(this,"_onCommandSpy",()=>{c.a.isActive(this.context.vivaldiWindowId)&&this.props.changeFocus()}),h(this,"_onWindowStoreChanged",()=>{!c.a.isActive(this.context.vivaldiWindowId)&&this.props.showAccessKeys&&this.props.showAccessKeys(!1)}),h(this,"_onMouseChanged",e=>{!1===e&&(this.lastKeyWasAltDown=!1)}),h(this,"_onWindowPositionChanged",()=>{this.lastKeyWasAltDown=!1}),h(this,"_keyEventListener",(e,t,a,i,r)=>{if(c.a.isActive(e)){const e=i===s.a.KEY_ALT&&(t?4===a:0===a);e&&this.props.showAccessKeys&&this.props.showAccessKeys(t),!t&&i===s.a.KEY_ALT&&this.lastKeyWasAltDown&&!r&&n.a.get(u.kKeyboardShortcutsAltOpensMenu)&&this.props.changeFocus(),this.lastKeyWasAltDown=e&&t}})}componentDidMount(){d.a.tabsPrivate.onMouseChanged.addListener(this._onMouseChanged),d.a.tabsPrivate.onKeyboardChanged.addListener(this._keyEventListener),d.a.windowPrivate.onPositionChanged.addListener(this._onWindowPositionChanged),i.a.addListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken=c.a.addListener(this._onWindowStoreChanged)}componentWillUnmount(){d.a.tabsPrivate.onMouseChanged.removeListener(this._onMouseChanged),d.a.tabsPrivate.onKeyboardChanged.removeListener(this._keyEventListener),d.a.windowPrivate.onPositionChanged.removeListener(this._onWindowPositionChanged),i.a.removeListener("COMMAND_FOCUS_MAINMENU",this._onCommandSpy),this.windowStoreToken.remove()}render(){return null}}h(m,"contextType",l.a),t.a=m},function(e,t,a){"use strict";(function(e){var i=a(137),s=a(52),n=a(142),r=a(10),o=a(280),l=a(353),c=a(505),d=a(506),u=a(507),h=a(5),m=a(155),p=a(1);let g=0,b={},f=!1;const _=function(e,t,a){return e.filter(e=>"function"==typeof e.testVisibility?e.testVisibility():!1!==e.visible).map(e=>{const i=e.nameWithMnemonic?e.nameWithMnemonic:e.name,n=g++;(i||e.url)&&(b[n]=e.handler);let r=void 0;if(a.enabled&&e.shortcuts)for(let t=0;t<e.shortcuts.length;t++){const i=e.shortcuts[t];if((!1!==a.singleKey||!s.a.isSingleKeyShortcut(i))&&0!==i.length){r=i;break}}const o={};if(void 0!==e.containerType)o.container={id:e.containerId,type:e.containerType,offset:e.containerOffset,edge:e.edge,groupFolders:e.containerGroupFolders,sortField:e.containerSortField,sortOrder:e.containerSortOrder};else if("---"===e.name)o.separator={};else{const s=void 0!==e.id&&-1!==t&&e.id===t,l="radiobutton"===e.type||"checkbox"===e.type?e.type:void 0;o.item={id:n,label:i,selected:s,disabled:e.disabled,icons:[e.iconPNG||"",e.iconPNGWhite||""],type:l,checked:e.checked,group:e.radiogroup,persistent:e.persistent,emphasized:e.emphasized,shortcut:Object(m.a)(r),url:e.url,parameter:e.parameter,index:e.index},e.items&&(o.children=_(e.items,t,a))}return o})},N={show:function(t,a,s,m){g=0,b={};const N={enabled:r.a.get(p.kKeyboardShortcutsEnable),singleKey:r.a.get(p.kKeyboardShortcutsEnableSingleKey),mailSingleKey:r.a.get(p.kKeyboardShortcutsEnableSingleKeyForMail)},v=function(e){m&&m(e)},E=function(){m&&m(-1)},w=function(e){b[e.id].call(this,{},{})},S=function(e){console.warn(e)};!function(){if(!f){f=!0;const s=a.map(e=>{const t=e.menu.items?e.menu.items:[];return!0!==e.menu.hasAccessKeys&&(n.a.installMnemonics(t,e.menu.preferred),e.menu.hasAccessKeys=!0),{id:e.id,rect:e.rect,children:_(t,e.menu.expandId,N)}});(function(e){return new Promise(t=>{h.a.zoom.getVivaldiUIZoom(a=>{e.forEach(e=>{e.rect.x=parseInt((e.rect.x+1)*a),e.rect.y=parseInt((e.rect.y+0)*a),e.rect.width=parseInt(e.rect.width*a),e.rect.height=parseInt(e.rect.height*a)}),t()})})})(s).then(()=>{h.a.menubarMenu.onAction.addListener(w),h.a.menubarMenu.onOpenBookmark.addListener(i.a.onOpen),h.a.menubarMenu.onBookmarkAction.addListener(i.a.onAction),h.a.menubarMenu.onHover.addListener(i.a.onHover),h.a.menubarMenu.onOpen.addListener(v),h.a.menubarMenu.onClose.addListener(E),h.a.menubarMenu.onError.addListener(S),h.a.menubarMenu.show({id:t,siblings:s,icons:[o.a,l.a,c.a,d.a,u.a]},()=>{i.a.onHover(""),h.a.menubarMenu.onAction.removeListener(w),h.a.menubarMenu.onOpenBookmark.removeListener(i.a.onOpen),h.a.menubarMenu.onBookmarkAction.removeListener(i.a.onAction),h.a.menubarMenu.onHover.removeListener(i.a.onHover),h.a.menubarMenu.onOpen.removeListener(v),h.a.menubarMenu.onClose.removeListener(E),h.a.menubarMenu.onError.removeListener(S),e.nextTick(()=>{f=!1})})})}}()}};t.a=N}).call(this,a(64))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),s=a(63),n=a(2),r=a(36),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\CreateLinkModal.jsx";function l({onCreateLink:e,onCancelCreateLink:t,link:a,useAddress:l}){const c=i.useRef(),d=l?a?Object(n.a)("Edit Address"):Object(n.a)("Add Address"):a?Object(n.a)("Edit Link"):Object(n.a)("Create Link");return i.createElement(s.a,{dialogWidth:400,onRequestClose:t,__source:{fileName:o,lineNumber:37}},i.createElement("header",{className:"dialog-header",__source:{fileName:o,lineNumber:38}},i.createElement("h1",{className:"dialog-title",__source:{fileName:o,lineNumber:39}},d)),i.createElement("form",{onSubmit:()=>{e(c.current?Object(r.b)(c.current.value):"https://")},__source:{fileName:o,lineNumber:41}},i.createElement("div",{className:"dialog-content",__source:{fileName:o,lineNumber:42}},i.createElement("input",{ref:c,defaultValue:a||"https://",type:"text",autoFocus:!0,onFocus:e=>e.currentTarget.select(),__source:{fileName:o,lineNumber:43}})),i.createElement("footer",{className:"dialog-footer",__source:{fileName:o,lineNumber:51}},i.createElement("input",{type:"submit",className:"primary",value:Object(n.a)("Save Link"),__source:{fileName:o,lineNumber:52}}),i.createElement("input",{type:"button",onClick:t,value:Object(n.a)("Cancel"),__source:{fileName:o,lineNumber:53}}))))}},function(e,t,a){"use strict";var i=a(37),s=a(22),n=a(0),r=a.n(n),o=a(29),l=a.n(o),c=a(25),d=a(17),u=a.n(d),h=a(60),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialTitle.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends r.a.PureComponent{constructor(...e){super(...e),p(this,"state",{isEditing:!1,title:this.props.bookmark.title,fallbackTitle:this.props.bookmark.title}),p(this,"_documentClickHandler",e=>{const t=l.a.findDOMNode(this),a=e.target;t&&a instanceof HTMLElement&&!t.contains(a)?this.refs.input.blur():document.removeEventListener("click",this._documentClickHandler)}),p(this,"handleMouseDown",e=>{e.preventDefault()}),p(this,"handleClick",e=>{"click"!==this.props.howToEdit?this.props.onSelect&&this.props.onSelect(e):this.enableEditing()}),p(this,"handleDoubleClick",e=>{"doubleClick"===this.props.howToEdit&&this.enableEditing()}),p(this,"handleBlur",e=>{this.finishEdit("save")}),p(this,"handleChange",e=>{const t=e.target.value;this.setState({title:t})}),p(this,"handleKeyDown",e=>{switch(e.stopPropagation(),e.key){case"Enter":this.finishEdit("save");break;case"Escape":this.props.needsInitialEdit&&this.state.title===s.a.getDefaultFolderName()?this.finishEdit("delete"):this.finishEdit("undo")}}),p(this,"removeSpeedDial",()=>{i.a.update(this.props.bookmark.id,{speeddial:!1})}),p(this,"containEvent",e=>{e.stopPropagation()}),p(this,"onContextMenu",e=>{this.state.isEditing?e.stopPropagation():Object(h.a)(this.context.vivaldiWindowId,this.props.getContextMenuItems(this.props.bookmark))(e)})}componentDidUpdate(e,t){!1===e.needsInitialEdit&&!0===this.props.needsInitialEdit&&!1===this.state.isEditing&&this.enableEditing(),!1===t.isEditing&&!0===this.state.isEditing&&this.refs.input&&this.refs.input.value&&(this.refs.input.setSelectionRange(0,this.refs.input.value.length),this.refs.input.focus())}enableEditing(){!1===this.state.isEditing&&(document.addEventListener("click",this._documentClickHandler),this.setState({isEditing:!0}))}finishEdit(e){if(!1===this.state.isEditing)return;document.removeEventListener("click",this._documentClickHandler),this.props.needsInitialEdit&&this.props.setSpeedDialAwaitingEdit("");const t=this.props.bookmark.id;switch(e){case"save":this.setState({isEditing:!1},()=>{i.a.update(t,{title:this.state.title},()=>{this.props.onFinished&&this.props.onFinished(!1)})});break;case"undo":this.setState(e=>({title:e.fallbackTitle,isEditing:!1}),()=>{i.a.update(t,{title:this.state.title},()=>{this.props.onFinished&&this.props.onFinished(!1)})});break;case"delete":this.setState({isEditing:!1},()=>{this.props.onFinished&&this.props.onFinished(!0),i.a.removeWithPromise([t])})}}render(){const e=u()({"editable-title-container":!0,edit:this.state.isEditing});return r.a.createElement("span",{className:e,style:{marginTop:this.props.titleMargin},onContextMenu:this.onContextMenu,__source:{fileName:m,lineNumber:207}},r.a.createElement("button",{className:this.props.className,"data-id":this.props.bookmark.id,tabIndex:this.props.keyAccess,onClick:this.handleClick,title:this.props.bookmark.title,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this,this.props.bookmark.id):void 0,onMouseDown:this.handleMouseDown,onDoubleClick:this.handleDoubleClick,__source:{fileName:m,lineNumber:210}},this.props.bookmark.title),this.state.isEditing&&r.a.createElement("input",{type:"text",ref:"input",className:"sd-title-editor",value:this.state.title,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.containEvent,onChange:this.handleChange,autoFocus:!0,__source:{fileName:m,lineNumber:224}}))}}p(g,"contextType",c.a),t.a=g},,function(e,t,a){"use strict";var i=a(8),s=a(10),n=a(0),r=a.n(n),o=a(132),l=a(2),c=a(84),d=a.n(c),u=a(15),h=a.n(u),m=a(1),p=a(200);const g={getTimeFormat:()=>s.a.get(m.kClockShowSeconds)?"LTS":"LT",getDateFormat:()=>o.a.getShortDateFormat(),getTimeAndDateFormat:()=>g.getDateFormat()+"  "+g.getTimeFormat(),setTimer:(e,t)=>{const a=new Date;if(e.date<a){const t=new Date(e.date);t.setDate(t.getDate()+1),e.date=t.valueOf()}i.a.set(m.kClockTimers,[...s.a.get(m.kClockTimers),{...e,type:t,id:d()()}])},removeTimer:e=>{const t=s.a.get(m.kClockTimers).filter(t=>e!==t.id);i.a.set(m.kClockTimers,t)},completeTimer:e=>{const t=s.a.get(m.kClockNotificationSound),a={title:g.getName(e),silent:!1,requireInteraction:!0};if(t){new Audio(t).play()}Object(p.a)(a)},getName:e=>e.name||("alarm"===e.type?Object(l.a)("Alarm"):Object(l.a)("Countdown")),getActiveLabel:(e,t)=>{const a=h()(e.date),i=h.a.duration(a.diff(new Date)),s=i.hours(),n=i.minutes();let r;if(r="alarm"===e.type?a.format("LT"):s&&n?Object(l.a)("$1h $2m",[s,n]):s?Object(l.a)("$1h",[s]):n?Object(l.a)("$1m",[n]):Object(l.a)("Now"),t){return`${r} - ${g.getName(e)}`}return r},getAlarm:e=>s.a.get(m.kClockTimers).find(t=>t.id===e&&"alarm"===t.type),setAlarmWithPreset:e=>{const t=new Date;t.setSeconds(0),t.setHours(e.hour),t.setMinutes(e.minute);const a={name:e.name,date:t.valueOf()};g.setTimer(a,"alarm")},getAlarmPreset:e=>s.a.get(m.kClockAlarmPresets).find(t=>t.id===e),saveAlarmPreset:(e,t,a)=>{const n=d()();i.a.set(m.kClockAlarmPresets,[...s.a.get(m.kClockAlarmPresets),{name:e,hour:t,minute:a,id:n}])},removeAlarmPreset:e=>{const t=s.a.get(m.kClockAlarmPresets).filter(t=>t.id!==e);i.a.set(m.kClockAlarmPresets,t)},getCountdown:e=>s.a.get(m.kClockTimers).find(t=>t.id===e&&"countdown"===t.type),setCountdownWithPreset:e=>{const t=new Date,a={name:e.name,date:t.setSeconds(t.getSeconds()+e.seconds).valueOf()};g.setTimer(a,"countdown")},getCountdownPreset:e=>s.a.get(m.kClockCountdownPresets).find(t=>t.id===e),saveCountdownPreset:(e,t)=>{const a=d()();i.a.set(m.kClockCountdownPresets,[...s.a.get(m.kClockCountdownPresets),{name:e,seconds:t,id:a}])},removeCountdownPreset:e=>{const t=s.a.get(m.kClockCountdownPresets).filter(t=>t.id!==e);i.a.set(m.kClockCountdownPresets,t)}};var b=g,f=a(19),_=a(961),N=a(17),v=a.n(N),E=a(13),w="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupAlarm.jsx";function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=[m.kKeyboardTabToAll,m.kClockAlarmPresets,m.kClockTimers];class k extends r.a.PureComponent{constructor(...e){super(...e),S(this,"state",{selectedPresetId:null,name:""}),S(this,"isPresetSelected",e=>e.id===this.state.selectedPresetId&&e.name===this.state.name&&this.props.minute===e.minute&&this.props.hour===e.hour),S(this,"setAlarm",()=>{const e=this.state.name,t=new Date;t.setHours(this.props.hour),t.setMinutes(this.props.minute),t.setSeconds(0),this.setState({selectedPresetId:null,name:""},()=>{this.props.hidePopup({name:e,date:t.valueOf()},"alarm")})}),S(this,"setName",e=>{this.setState({name:e.currentTarget.value})}),S(this,"selectPreset",e=>{const t=e.name,a=e.id;this.props.setHour(e.hour),this.props.setMinute(e.minute),this.setState({name:t,selectedPresetId:a})}),S(this,"timeChange",e=>{const t=e.currentTarget.value.split(":"),a=parseInt(t[0]),i=parseInt(t[1]);this.props.setHour(a),this.props.setMinute(i)}),S(this,"savePreset",()=>{b.saveAlarmPreset(this.state.name,this.props.hour,this.props.minute)}),S(this,"setPreview",()=>{this.props.setMode("alarm")})}render(){const e=this.props.prefValues[m.kClockAlarmPresets],t=this.state.selectedPresetId&&b.getAlarmPreset(this.state.selectedPresetId),a=this.props.alarms,i=new Date;i.setHours(this.props.hour),i.setMinutes(this.props.minute);const s=[],n=[];return a.forEach(e=>{this.props.now.valueOf()<e.date?s.push(e):n.push(e)}),r.a.createElement("div",{className:"ClockPopup-Alarms",__source:{fileName:w,lineNumber:128}},r.a.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:w,lineNumber:129}},e.map(e=>{const a=t&&this.isPresetSelected(e);return r.a.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:w,lineNumber:132}},r.a.createElement("button",{className:v()("ClockPopup-Preset",{"ClockPopup-Preset--selected":a}),tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:w,lineNumber:133}},e.name),r.a.createElement("button",{className:v()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":a}),tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>b.removeAlarmPreset(e.id),dangerouslySetInnerHTML:{__html:E.hc},__source:{fileName:w,lineNumber:142}}))})),r.a.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setAlarm,__source:{fileName:w,lineNumber:154}},r.a.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:w,lineNumber:158}},r.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:w,lineNumber:159}},r.a.createElement("h3",{__source:{fileName:w,lineNumber:160}},Object(l.a)("Time")),r.a.createElement(_.a,{className:"ClockPopup-DateInputField",onChange:this.timeChange,step:"5",title:Object(l.a)("Alarm time"),onFocus:this.setPreview,value:h()(i).format("HH:mm"),__source:{fileName:w,lineNumber:161}})),r.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:w,lineNumber:170}},r.a.createElement("h3",{__source:{fileName:w,lineNumber:171}},Object(l.a)("Alarm preset","Name")),r.a.createElement("input",{className:"ClockPopup-Name",type:"text",onFocus:this.setPreview,placeholder:Object(l.a)("Alarm preset","Name"),onChange:this.setName,value:this.state.name,__source:{fileName:w,lineNumber:172}}))),r.a.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:w,lineNumber:183}},r.a.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:Object(l.a)("Save Preset"),__source:{fileName:w,lineNumber:184}}),r.a.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:Object(l.a)("Start"),__source:{fileName:w,lineNumber:194}}))))}}var y=Object(f.a)(k,C),O="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopupCountdown.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const T=[m.kKeyboardTabToAll,m.kClockCountdownPresets,m.kClockTimers];class I extends r.a.PureComponent{constructor(...e){super(...e),A(this,"state",{selectedPresetId:null,name:""}),A(this,"isPresetSelected",e=>{const t=60*this.props.minute+3600*this.props.hour;return e.id===this.state.selectedPresetId&&e.name===this.state.name&&t===e.seconds}),A(this,"setCountdown",()=>{const e=this.state.name,t=h()().add(this.props.hour,"hours").add(this.props.minute,"minutes").valueOf();this.setState({selectedPresetId:null,name:""},()=>{this.props.hidePopup({name:e,date:t},"countdown")})}),A(this,"setMinute",e=>{const{value:t}=e.currentTarget,a=Math.min(Math.max(parseInt(t),0),59);this.props.setMinute(a)}),A(this,"setHour",e=>{const{value:t}=e.currentTarget,a=Math.min(Math.max(parseInt(t),0),23);this.props.setHour(a)}),A(this,"decrementHour",()=>{this.props.setHour(this.props.hour-1)}),A(this,"incrementHour",()=>{this.props.setHour(this.props.hour+1)}),A(this,"decrementMinute",()=>{this.props.setMinute(this.props.minute-1)}),A(this,"incrementMinute",()=>{this.props.setMinute(this.props.minute+1)}),A(this,"setName",e=>{this.setState({name:e.currentTarget.value})}),A(this,"setPreview",()=>{this.props.setMode("countdown")}),A(this,"selectPreset",e=>{const t=h.a.duration(e.seconds,"seconds"),a=e.name,i=t.hours(),s=t.minutes();this.props.setHour(i),this.props.setMinute(s),this.setState({name:a,selectedPresetId:e.id})}),A(this,"savePreset",()=>{const e=60*this.props.hour*60+60*this.props.minute;b.saveCountdownPreset(this.state.name,e)})}render(){const e=this.props.prefValues[m.kClockCountdownPresets],t=this.state.selectedPresetId&&b.getCountdownPreset(this.state.selectedPresetId),a=this.props.countdowns,i=[],s=[];return a.forEach(e=>{this.props.now.valueOf()<e.date?i.push(e):s.push(e)}),r.a.createElement("div",{className:"ClockPopup-Countdowns",__source:{fileName:O,lineNumber:145}},r.a.createElement("div",{className:"ClockPopup-Presets",__source:{fileName:O,lineNumber:147}},e.map(e=>{const a=t&&this.isPresetSelected(e);return r.a.createElement("div",{key:e.id,className:"ClockPopup-PresetWrapper",__source:{fileName:O,lineNumber:150}},r.a.createElement("button",{className:v()("ClockPopup-Preset",{"ClockPopup-Preset--selected":a}),tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>this.selectPreset(e),__source:{fileName:O,lineNumber:151}},e.name),r.a.createElement("button",{className:v()("ClockPopup-Preset-Clear",{"ClockPopup-Preset-Clear--selected":a}),tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>b.removeCountdownPreset(e.id),dangerouslySetInnerHTML:{__html:E.hc},__source:{fileName:O,lineNumber:160}}))})),r.a.createElement("form",{className:"ClockPopup-Custom",onSubmit:this.setCountdown,__source:{fileName:O,lineNumber:172}},r.a.createElement("div",{className:"ClockPopup-Custom-Line",__source:{fileName:O,lineNumber:176}},r.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:O,lineNumber:177}},r.a.createElement("h3",{__source:{fileName:O,lineNumber:178}},Object(l.a)("Hours")),r.a.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"hour",step:1,min:0,max:23,onFocus:this.setPreview,placeholder:Object(l.a)("hh"),onChange:this.setHour,value:this.props.hour,__source:{fileName:O,lineNumber:179}}),r.a.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:O,lineNumber:191}},r.a.createElement("button",{tabIndex:this.props.prefValues[m.kKeyboardTabToAll],disabled:23===this.props.hour,onClick:this.incrementHour,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:O,lineNumber:192}}),r.a.createElement("button",{tabIndex:this.props.prefValues[m.kKeyboardTabToAll],disabled:0===this.props.hour,type:"button",onClick:this.decrementHour,className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:O,lineNumber:199}}))),r.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:O,lineNumber:209}},r.a.createElement("h3",{__source:{fileName:O,lineNumber:210}},Object(l.a)("Minutes")),r.a.createElement("input",{className:"ClockPopup-DateInputField",type:"number","data-type":"minute",step:1,min:0,max:59,placeholder:Object(l.a)("time","mm"),onChange:this.setMinute,onFocus:this.setPreview,value:this.props.minute,__source:{fileName:O,lineNumber:211}}),r.a.createElement("div",{className:"ClockPopup-Spinner-Wrapper",__source:{fileName:O,lineNumber:223}},r.a.createElement("button",{tabIndex:this.props.prefValues[m.kKeyboardTabToAll],disabled:59===this.props.minute,onClick:this.incrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--up",__source:{fileName:O,lineNumber:224}}),r.a.createElement("button",{tabIndex:this.props.prefValues[m.kKeyboardTabToAll],disabled:0===this.props.minute,onClick:this.decrementMinute,type:"button",className:"ClockPopup-Spinner ClockPopup-Spinner--down",__source:{fileName:O,lineNumber:231}}))),r.a.createElement("label",{className:"ClockPopup-TimeField",__source:{fileName:O,lineNumber:240}},r.a.createElement("h3",{__source:{fileName:O,lineNumber:241}},Object(l.a)("Countdown preset","Name")),r.a.createElement("input",{className:"ClockPopup-Name",type:"text",placeholder:Object(l.a)("Countdown preset","Name"),onChange:this.setName,onFocus:this.setPreview,value:this.state.name,__source:{fileName:O,lineNumber:242}}))),r.a.createElement("div",{className:"ClockPopup-Custom-Line ClockPopup-Custom-Line--wrap",__source:{fileName:O,lineNumber:253}},r.a.createElement("input",{disabled:this.state.name.length<2||t&&t.name===this.state.name,className:"ClockPopup-SavePreset",type:"button",onClick:this.savePreset,value:Object(l.a)("Save Preset"),__source:{fileName:O,lineNumber:254}}),r.a.createElement("input",{disabled:0===this.props.hour&&0===this.props.minute,className:"ClockPopup-Start",type:"submit",value:Object(l.a)("Start"),__source:{fileName:O,lineNumber:264}}))))}}var D=Object(f.a)(I,T),P=a(26),x="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockPopup.jsx";function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L=[m.kKeyboardTabToAll,m.kClockMode];class j extends r.a.PureComponent{constructor(e){super(e),M(this,"setAlarmHour",e=>{this.setState({alarmHour:e})}),M(this,"setAlarmMinute",e=>{this.setState({alarmMinute:e})}),M(this,"setCountdownHour",e=>{this.setState({countdownHour:e})}),M(this,"setCountdownMinute",e=>{this.setState({countdownMinute:e})}),M(this,"setMode",e=>{i.a.set(m.kClockMode,e),this.setState({previewMode:e})}),M(this,"setPreviewMode",e=>{this.setState({previewMode:e})}),M(this,"getClockStyle",()=>{const e=this.props.now.getHours(),t=this.props.now.getMinutes(),a=t/60,i={"--hourOffset":(e+a)%12*30-90+"deg","--minuteOffset":6*t-90+"deg"};if("countdown"===this.state.previewMode&&(i["--hourPercent"]=this.state.countdownHour<12?this.state.countdownHour/.12:100,i["--minutePercent"]=this.state.countdownMinute/.6),"alarm"===this.state.previewMode){const s=this.state.alarmHour>e?this.state.alarmHour-e:this.state.alarmHour-e+60,n=s>0?s-a:0,r=this.state.alarmMinute>t?this.state.alarmMinute-t:this.state.alarmMinute-t+60;i["--hourPercent"]=n<12?n/.12:100,i["--minutePercent"]=r/.6}return i}),M(this,"getInfoText",e=>{const t=e.filter(e=>"alarm"===e.type),a=e.filter(e=>"countdown"===e.type);return t.length>0&&a.length>0?Object(l.a)("$1 alarm","$1 alarms",[t.length])+", "+Object(l.a)("$1 countdown","$1 countdowns",[a.length]):t.length>0?Object(l.a)("$1 alarm","$1 alarms",[t.length]):a.length>0?Object(l.a)("$1 countdown","$1 countdowns",[a.length]):h()().format(b.getTimeAndDateFormat())}),this.state={alarmHour:13,alarmMinute:37,countdownHour:0,countdownMinute:0,previewMode:"alarm"===this.props.prefValues[m.kClockMode]?"alarm":"countdown"}}render(){const e=this.props.timers,t=e.filter(e=>this.props.now.valueOf()<e.date),a=e.filter(e=>this.props.now.valueOf()>e.date);return r.a.createElement("div",{__source:{fileName:x,lineNumber:145}},r.a.createElement("div",{className:"ClockPopup-Header",__source:{fileName:x,lineNumber:146}},r.a.createElement("h2",{__source:{fileName:x,lineNumber:147}},Object(l.a)("Clock")),r.a.createElement("div",{className:"info",__source:{fileName:x,lineNumber:150}},this.getInfoText(t))),r.a.createElement("div",{style:this.getClockStyle(),className:"ClockPopup-BigClock",dangerouslySetInnerHTML:{__html:E.d},__source:{fileName:x,lineNumber:156}}),r.a.createElement("div",{className:"ClockPopup-Active",__source:{fileName:x,lineNumber:161}},t.map((e,t)=>r.a.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Active",__source:{fileName:x,lineNumber:163}},r.a.createElement("button",{className:"ClockPopup-Timer-Name",__source:{fileName:x,lineNumber:164}},b.getActiveLabel(e,!0)),r.a.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>b.removeTimer(e.id),dangerouslySetInnerHTML:{__html:E.hc},__source:{fileName:x,lineNumber:167}})))),a.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{__source:{fileName:x,lineNumber:180}},Object(l.a)("Past Timers")),r.a.createElement("div",{className:"ClockPopup-Passed",__source:{fileName:x,lineNumber:183}},a.map(e=>r.a.createElement("div",{key:e.id,className:"ClockPopup-Timer ClockPopup-Timer--Passed",__source:{fileName:x,lineNumber:185}},r.a.createElement("button",{tabIndex:this.props.prefValues[m.kKeyboardTabToAll],className:"ClockPopup-Timer-Name",__source:{fileName:x,lineNumber:189}},b.getName(e)),r.a.createElement("button",{className:"ClockPopup-Timer-Clear",tabIndex:this.props.prefValues[m.kKeyboardTabToAll],onClick:()=>b.removeTimer(e.id),dangerouslySetInnerHTML:{__html:E.hc},__source:{fileName:x,lineNumber:195}}))))),r.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:x,lineNumber:207}},r.a.createElement("div",{className:"toolbar-group",__source:{fileName:x,lineNumber:208}},r.a.createElement(P.a,{title:Object(l.a)("Countdown"),isPressed:"countdown"===this.props.prefValues[m.kClockMode],onClick:()=>this.setMode("countdown"),__source:{fileName:x,lineNumber:209}}),r.a.createElement(P.a,{title:Object(l.a)("Alarm"),isPressed:"alarm"===this.props.prefValues[m.kClockMode],onClick:()=>this.setMode("alarm"),__source:{fileName:x,lineNumber:214}}))),"countdown"===this.props.prefValues[m.kClockMode]&&r.a.createElement(D,{now:this.props.now,hour:this.state.countdownHour,minute:this.state.countdownMinute,hidePopup:this.props.hidePopup,setHour:this.setCountdownHour,setMinute:this.setCountdownMinute,setMode:this.setPreviewMode,countdowns:e.filter(e=>"countdown"===e.type),__source:{fileName:x,lineNumber:222}}),"alarm"===this.props.prefValues[m.kClockMode]&&r.a.createElement(y,{now:this.props.now,alarms:e.filter(e=>"alarm"===e.type),hidePopup:this.props.hidePopup,hour:this.state.alarmHour,minute:this.state.alarmMinute,setHour:this.setAlarmHour,setMode:this.setPreviewMode,setMinute:this.setAlarmMinute,__source:{fileName:x,lineNumber:234}}))}}var B=Object(f.a)(j,L),R=a(6),F="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ClockButton.jsx";function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const W=[m.kClockButtonShowDate,m.kClockButtonShowName,m.kClockButtonStyle,m.kClockAlarmPresets,m.kClockCountdownPresets,m.kClockNotificationSound,m.kClockShowSeconds,m.kClockTimers],H={"":Object(l.a)("None"),"../../resources/notification_ding.opus":Object(l.a)("Ding"),"../../resources/notification_rooster.opus":Object(l.a)("Rooster"),"../../resources/notification_tada.opus":Object(l.a)("Tada")};class V extends r.a.PureComponent{constructor(e){super(e),U(this,"buttonRef",r.a.createRef()),U(this,"heartbeat",()=>{this.now=new Date;const e=this.now.getMinutes(),t=this.now.getHours();let a=!1;e!==this.state.minute&&t!==this.state.hour?(this.setState({hour:t,minute:e}),a=!0):e!==this.state.minute?(this.setState({minute:e}),a=!0):this.props.prefValues[m.kClockShowSeconds]&&(this.forceUpdate(),a=!0),this.props.prefValues[m.kClockTimers].forEach(e=>{Math.round(e.date/1e3)===Math.round(this.now.valueOf()/1e3)&&(a||this.forceUpdate(),b.completeTimer(e))})}),U(this,"getActiveTimers",()=>this.props.prefValues[m.kClockTimers].sort((e,t)=>e.date-t.date).filter(e=>this.now.valueOf()<e.date)),U(this,"getFirstTimer",()=>this.getActiveTimers()[0]),U(this,"getActiveMode",()=>{const e=this.getFirstTimer();return e?e.type:"time"}),U(this,"hidePopup",(e,t)=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1},()=>{e&&t&&setTimeout(()=>{b.setTimer(e,t)},120)})}),U(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),U(this,"getClockStyle",()=>{const e=this.getFirstTimer(),t=this.now.getSeconds(),a=this.now.getHours(),i=this.now.getMinutes(),s={"--hourDeg":`${30*(a+i/60)-90}deg`,"--minuteDeg":`${6*i+360*a}deg`,"--secondDeg":`${6*t+360*i+60*a*360}deg`};if(e&&"countdown"===e.type){const t=h()(e.date).diff(this.now,"seconds"),a=h.a.duration(t,"seconds"),i=a.hours();s["--countdownHourPercent"]=i%12/.12,s["--countdownMinutePercent"]=i>0?100:a.minutes()/.6}return s}),U(this,"getButtonText",()=>{const e="image"!==this.props.prefValues[m.kClockButtonStyle],t=this.props.prefValues[m.kClockButtonShowDate],a=this.props.prefValues[m.kClockButtonShowName],i=this.getFirstTimer();return e&&i&&"countdown"===i.type?b.getActiveLabel(i,a):e&&t?h()(this.now).format(b.getTimeAndDateFormat()):e?h()(this.now).format(b.getTimeFormat()):t?h()(this.now).format(b.getDateFormat()):void 0}),U(this,"getTooltip",()=>{const e=this.getActiveTimers();let t=h()(this.now).format(b.getTimeAndDateFormat());if(e.length>0){const a=e.filter(e=>"countdown"===e.type),i=e.filter(e=>"alarm"===e.type);a.length>0&&(t+="\n\n"+Object(l.a)("Countdowns"),a.forEach(e=>{t+="\n"+b.getActiveLabel(e,!0)})),i.length>0&&(t+="\n\n"+Object(l.a)("Alarms"),i.forEach(e=>{t+="\n"+b.getActiveLabel(e,!0)}))}return t}),this.now=new Date,this.state={isPopupOpen:!1,hour:this.now.getHours(),minute:this.now.getMinutes()}}componentDidMount(){this.intervalRef=setInterval(this.heartbeat,1e3)}componentWillUnmount(){clearInterval(this.intervalRef)}componentDidUpdate(e,t){const a=this.buttonRef.current;this.state.isPopupOpen&&a&&a.buttonRef.current&&a.updateLeftPopupOffset(a.buttonRef.current)}render(){const e=this.props.prefValues[m.kClockTimers].sort((e,t)=>e.date-t.date),t=this.getActiveMode(),a=this.getFirstTimer(),s=this.props.prefValues[m.kClockButtonStyle],n=[{name:Object(l.a)("New Countdown"),visible:this.props.prefValues[m.kClockCountdownPresets].length>0,items:this.props.prefValues[m.kClockCountdownPresets].map(e=>({handler:()=>b.setCountdownWithPreset(e),...Object(R.a)(e.name)}))},{name:Object(l.a)("New Alarm"),visible:this.props.prefValues[m.kClockAlarmPresets].length>0,items:this.props.prefValues[m.kClockAlarmPresets].map(e=>({handler:()=>b.setAlarmWithPreset(e),...Object(R.a)(e.name)}))},{name:Object(l.a)("Button Style"),items:[{type:"checkbox",checked:"imageandtext"===s,handler:()=>i.a.set(m.kClockButtonStyle,"imageandtext"),...Object(R.a)("Image and Text")},{type:"checkbox",checked:"image"===s,handler:()=>i.a.set(m.kClockButtonStyle,"image"),...Object(R.a)("Image only")},{type:"checkbox",checked:"text"===s,handler:()=>i.a.set(m.kClockButtonStyle,"text"),...Object(R.a)("Text only")}]},{name:Object(l.a)("Button Label"),items:[{type:"checkbox",checked:this.props.prefValues[m.kClockButtonShowName],handler:()=>i.a.set(m.kClockButtonShowName,!0),...Object(R.a)("Show Name")},{type:"checkbox",checked:!this.props.prefValues[m.kClockButtonShowName],handler:()=>i.a.set(m.kClockButtonShowName,!1),...Object(R.a)("Time Only")}]},{name:Object(l.a)("Notification Sound"),items:Object.keys(H).map(e=>{const t=H[e];return{type:"checkbox",checked:this.props.prefValues[m.kClockNotificationSound]===e,handler:()=>i.a.set(m.kClockNotificationSound,e),...Object(R.a)(t)}})},{name:Object(l.a)("Show Seconds"),type:"checkbox",checked:this.props.prefValues[m.kClockShowSeconds],handler:()=>i.a.set(m.kClockShowSeconds,!this.props.prefValues[m.kClockShowSeconds])},{name:Object(l.a)("Show Date"),type:"checkbox",checked:this.props.prefValues[m.kClockButtonShowDate],handler:()=>i.a.set(m.kClockButtonShowDate,!this.props.prefValues[m.kClockButtonShowDate])}];return r.a.createElement(P.a,{className:v()(`ClockButton ClockButton--${t}`,{"ClockButton--ShowSeconds":this.props.prefValues[m.kClockShowSeconds]}),isOn:"time"!==t,onClick:this.togglePopup,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,ref:this.buttonRef,tooltip:this.getTooltip(),title:this.getButtonText(),image:"text"!==s?E.C[this.props.size]:void 0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,popupClassName:"ClockPopup",isPopupVisible:this.state.isPopupOpen,menu:n,style:this.getClockStyle(),__source:{fileName:F,lineNumber:339}},r.a.createElement(B,{now:this.now,timers:e,firstTimer:a,hidePopup:this.hidePopup,__source:{fileName:F,lineNumber:367}}))}}var G=Object(f.a)(V,W),K=a(51),z=a(39),Y=a(202),$=a(239),Q=a(97),Z=a(12),q=a(9),X=a(85),J=a(53),ee=a(20),te=a(21),ae="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\NavButton.jsx";function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class se extends r.a.PureComponent{constructor(e){super(e),ie(this,"_isMounted",!1),ie(this,"fastForwardStoreChanged",()=>{this.setState(e=>this.getFastForwardStoreState(e.activePageId))}),ie(this,"getFastForwardStoreState",e=>({forwardUrl:$.a.getFastForwardUrl(e),rewindRelativeIndex:$.a.getRewindRelativeIndex(e)})),ie(this,"navigationStoreChanged",()=>{this.setState(e=>({navigationInfo:Q.a.getNavigationInfo(e.activePageId)}))}),ie(this,"pageStoreChanged",()=>{this._isMounted&&this.setState(e=>{const t=q.a.getActivePage(),a=ee.a.isInternalPage(t)&&!t.url.startsWith(ee.a.internals.startpage);return t.id!==e.activePageId?{activePageId:t.id,isInternalPage:a,navigationInfo:Q.a.getNavigationInfo(t.id),...this.getFastForwardStoreState(t.id)}:a!==e.isInternalPage?{isInternalPage:a}:null})}),ie(this,"reload",()=>{this.state.navigationInfo&&(this.state.navigationInfo.isLoading?J.a.stop():J.a.reload())}),ie(this,"cloneSelectedTabs",()=>{q.a.isSelecting()?Z.a.clonePages(q.a.getSelectedPages()):Z.a.clonePages(te.List.of(q.a.getActivePage()))}),ie(this,"back",e=>{J.a.back()}),ie(this,"backInBackground",()=>{this.openURLFromHistory(-1)}),ie(this,"forward",()=>{J.a.forward()}),ie(this,"forwardInBackground",()=>{this.openURLFromHistory(1)}),ie(this,"openURLFromHistory",e=>{J.a.getPageHistory((t,a)=>{const i=t+e;(i>=0||i<a.length)&&Z.a.openURL(a[i].url,{inCurrent:!1,inBackground:!0,transition:X.a.RELOAD})})}),ie(this,"fastForward",()=>{Y.a.navigateFastforward(q.a.getActivePage())}),ie(this,"rewind",()=>{J.a.go(-1*this.state.rewindRelativeIndex)}),ie(this,"rewindInBackground",()=>{if(this.state.rewindRelativeIndex>0){const e=q.a.getActivePage(),t=$.a.getRewindHistory(e);t.length>0&&Z.a.openURL(t[0].url,{inBackground:!0,transition:X.a.RELOAD})}}),ie(this,"goHome",()=>{Z.a.showHomepage()}),ie(this,"goHomeInBackground",()=>{Z.a.showHomepage({inBackground:!0})}),ie(this,"getHistory",()=>new Promise(e=>J.a.getPageHistory((t,a)=>this.setState({pageHistoryIndex:t},e(a))))),ie(this,"_onHistorySelection",(e,t,a)=>{const{ctrlKey:i,shiftKey:s,altKey:n,button:r,metaKey:o}=a;if(t&&(i||s||n||o||0!==r)){const e=z.a.getOpenOptionsFromModifierKeys(a);Z.a.openUrls([t],e)}else J.a.go(e-this.state.pageHistoryIndex)}),ie(this,"getHistoryMenuPromise",e=>()=>this.getHistory().then(t=>{const a="backward"===e?t.slice(0,this.state.pageHistoryIndex).reverse():t.slice(this.state.pageHistoryIndex+1),i="backward"===e?(e,t)=>e-t-1:(e,t)=>e+t+1;return a.map((e,t)=>({name:e.name,url:e.url,handler:this._onHistorySelection.bind(null,i(this.state.pageHistoryIndex,t),e.url),mnemonic:!1}))}));const t=q.a.getActivePage();this.state={activePageId:t.id,isInternalPage:ee.a.isInternalPage(t),navigationInfo:Q.a.getNavigationInfo(t.id),pageHistoryIndex:-1,...this.getFastForwardStoreState(t.id)}}componentDidMount(){this._isMounted=!0,Q.a.addChangeListener(this.navigationStoreChanged),q.a.addChangeListener(this.pageStoreChanged),$.a.addChangeListener(this.fastForwardStoreChanged)}componentWillUnmount(){this._isMounted=!1,$.a.removeChangeListener(this.fastForwardStoreChanged),Q.a.removeChangeListener(this.navigationStoreChanged),q.a.removeChangeListener(this.pageStoreChanged)}render(){const{isInternalPage:e,navigationInfo:t}=this.state,a="top"===s.a.get(m.kAddressBarPosition)?"bottomLeft":"topLeft";switch(this.props.name){case"Back":return r.a.createElement(P.a,{menuOrigin:a,disabled:!t||!t.canGoBack,onClick:this.back,onMiddleClick:this.backInBackground,tooltip:Object(l.a)("Go to previous page")+"\n"+Object(l.a)("Hold for history list"),menuPromise:this.getHistoryMenuPromise("backward"),customizeMenu:this.props.customizeMenu,image:E.cb[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:281}});case"Forward":return r.a.createElement(P.a,{menuOrigin:a,disabled:!t||!t.canGoForward,onClick:this.forward,onMiddleClick:this.forwardInBackground,tooltip:Object(l.a)("Go to next page")+"\n"+Object(l.a)("Hold for forward history list"),menuPromise:this.getHistoryMenuPromise("forward"),image:E.eb[this.props.size],customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:298}});case"Rewind":return r.a.createElement(P.a,{className:"button-narrow",disabled:!(Number.isInteger(this.state.rewindRelativeIndex)&&this.state.rewindRelativeIndex>0),onClick:this.rewind,onMiddleClick:this.rewindInBackground,tooltip:Object(l.a)("Rewind by visited domain")+"\n"+Object(l.a)("Hold for history domain list"),menuPromise:this.getHistoryMenuPromise("backward"),menuOrigin:a,customizeMenu:this.props.customizeMenu,image:E.hb[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:315}});case"FastForward":return r.a.createElement(P.a,{className:"button-narrow",menuOrigin:a,tooltip:this.state.forwardUrl?Object(l.a)("Fast Forward - $1",[this.state.forwardUrl]):Object(l.a)("Fast Forward"),menuOrigin:a,customizeMenu:this.props.customizeMenu,onClick:this.fastForward,disabled:!this.state.forwardUrl,image:E.db[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:337}});case"Reload":case"COMMAND_PAGE_REFRESH":const i=!!t&&t.isLoading;return r.a.createElement(P.a,{disabled:e,menuOrigin:a,customizeMenu:this.props.customizeMenu,tooltip:i&&!e?Object(l.a)("verb","Stop"):Object(l.a)("Reload current page"),onClick:this.reload,onMiddleClick:this.cloneSelectedTabs,image:i&&!e?E.jb[this.props.size]:E.gb[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:361}});case"Home":case"COMMAND_SHOW_HOMEPAGE":return r.a.createElement(P.a,{tooltip:Object(l.a)("Go to homepage"),menuOrigin:a,customizeMenu:this.props.customizeMenu,onClick:this.goHome,onMiddleClick:this.goHomeInBackground,image:E.fb[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:ae,lineNumber:385}});default:return null}}}var ne=se,re=a(25),oe=a(60);function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ce extends r.a.Component{constructor(...e){super(...e),le(this,"state",{taskInfo:this.props.taskInfo}),le(this,"onContextMenu",e=>{const{taskInfo:t}=this.props;Object(oe.a)(this.context.vivaldiWindowId,t.menuItems)})}render(){const{taskInfo:e}=this.props;return r.a.createElement("p",{className:"button-toolbar-small in-progress",id:e.id,title:e.title+"\n"+e.description,onContextMenu:this.onContextMenu,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatus.jsx",lineNumber:34}},this.state.taskInfo.text)}}le(ce,"contextType",re.a);var de=ce,ue=a(297);function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class me extends r.a.PureComponent{constructor(...e){super(...e),he(this,"state",{backgroundTasks:ue.a.getBackgroundTasks()}),he(this,"onBackgroundTaskStoreChange",()=>{this.setState({backgroundTasks:ue.a.getBackgroundTasks()})})}componentDidMount(){ue.a.addChangeListener(this.onBackgroundTaskStoreChange)}componentWillUnmount(){ue.a.removeChangeListener(this.onBackgroundTaskStoreChange)}render(){return r.a.createElement(r.a.Fragment,null,this.state.backgroundTasks.map(e=>r.a.createElement(de,{key:e.id,taskInfo:e,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\BackgroundTaskStatusList.jsx",lineNumber:41}})))}}var pe=me,ge=a(292),be=a(59),fe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\CaptureImages.jsx";function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ne=[m.kWebpagesCaptureCaptureMode,m.kWebpagesCaptureCompressionFormat,m.kWebpagesCaptureSaveLocation];class ve extends r.a.PureComponent{constructor(...e){super(...e),_e(this,"state",{isPopupOpen:!1,captureInProgress:!1}),_e(this,"togglePopup",()=>{this.setState(e=>({isPopupOpen:!e.isPopupOpen}))}),_e(this,"hidePopup",()=>{this.state.isPopupOpen&&this.setState({isPopupOpen:!1})}),_e(this,"onCaptureFullpage",()=>{const e=this.props.prefValues[m.kWebpagesCaptureSaveLocation],t=this.props.prefValues[m.kWebpagesCaptureCompressionFormat];this.setState({captureInProgress:!0},()=>{ge.a.captureFullpage(this.props.pageId,t,e,t=>{"clipboard"===e&&Object(p.a)({title:Object(l.a)("Page Captured"),body:Object(l.a)("Image stored in the clipboard.")}),this.setState({isPopupOpen:!1,captureInProgress:!1})})})}),_e(this,"onCaptureArea",()=>{const e=this.props.prefValues[m.kWebpagesCaptureSaveLocation],t=this.props.prefValues[m.kWebpagesCaptureCompressionFormat];this.setState({isPopupOpen:!1},()=>{ge.a.captureArea(t,e,!1,t=>{t?this.setState({isPopupOpen:!0}):"clipboard"===e&&Object(p.a)({title:Object(l.a)("Area Captured"),body:Object(l.a)("Image stored in the clipboard.")})})})}),_e(this,"setFormat",e=>{const t=e.currentTarget.value;"png"===t||"jpg"===t?(i.a.set(m.kWebpagesCaptureSaveLocation,"file"),i.a.set(m.kWebpagesCaptureCompressionFormat,t)):i.a.set(m.kWebpagesCaptureSaveLocation,"clipboard")}),_e(this,"setMode",e=>{const t=e.currentTarget.value;"area"===t?i.a.set(m.kWebpagesCaptureCaptureMode,"area"):"fullpage"===t&&i.a.set(m.kWebpagesCaptureCaptureMode,"fullpage")})}render(){const e=this.props.prefValues[m.kWebpagesCaptureSaveLocation],t="clipboard"===e?e:this.props.prefValues[m.kWebpagesCaptureCompressionFormat],a=this.props.isInternalPage?"area":this.props.prefValues[m.kWebpagesCaptureCaptureMode];return r.a.createElement(P.a,{tooltip:Object(l.a)("title","Capture Page"),onClick:this.togglePopup,disabled:this.props.disabled,image:E.x[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.isPopupOpen,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:fe,lineNumber:154}},r.a.createElement("h2",{__source:{fileName:fe,lineNumber:171}},Object(l.a)("title","Capture")),r.a.createElement(be.a,{name:"modePicker",disabled:this.props.isInternalPage,value:a,onChange:this.setMode,__source:{fileName:fe,lineNumber:174}},r.a.createElement("label",{title:Object(l.a)("Capture the full page, including non-visible parts."),__source:{fileName:fe,lineNumber:179}},r.a.createElement("input",{type:"radio",value:"fullpage",__source:{fileName:fe,lineNumber:181}}),Object(l.a)("Full Page")),r.a.createElement("label",{title:Object(l.a)("Capture a selection of a webpage or user interface."),__source:{fileName:fe,lineNumber:184}},r.a.createElement("input",{type:"radio",value:"area",__source:{fileName:fe,lineNumber:186}}),Object(l.a)("Selection"))),r.a.createElement("h2",{__source:{fileName:fe,lineNumber:191}},Object(l.a)("title","Format")),r.a.createElement(be.a,{name:"formatPicker",value:t,onChange:this.setFormat,__source:{fileName:fe,lineNumber:194}},r.a.createElement("label",{__source:{fileName:fe,lineNumber:198}},r.a.createElement("input",{type:"radio",value:"png",__source:{fileName:fe,lineNumber:199}}),Object(l.a)("Save as PNG")),r.a.createElement("label",{__source:{fileName:fe,lineNumber:202}},r.a.createElement("input",{type:"radio",value:"jpg",__source:{fileName:fe,lineNumber:203}}),Object(l.a)("Save as JPEG")),r.a.createElement("label",{__source:{fileName:fe,lineNumber:206}},r.a.createElement("input",{type:"radio",value:"clipboard",__source:{fileName:fe,lineNumber:207}}),Object(l.a)("Copy to Clipboard"))),!0===this.state.captureInProgress&&r.a.createElement("div",{className:"capture-progress",__source:{fileName:fe,lineNumber:213}},r.a.createElement("p",{className:"in-progress",__source:{fileName:fe,lineNumber:214}},Object(l.a)("Capture in progress..."))),r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:fe,lineNumber:219}},r.a.createElement("input",{type:"submit",onClick:"area"===a?this.onCaptureArea:this.onCaptureFullpage,disabled:this.state.captureInProgress,value:Object(l.a)("action","Capture"),autoFocus:!0,__source:{fileName:fe,lineNumber:220}})))}}var Ee=Object(f.a)(ve,Ne),we=a(233),Se=a(115),Ce=a(29),ke=a.n(Ce),ye=a(68),Oe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\page-actions\\PageActionChooser.jsx";function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Te extends r.a.PureComponent{constructor(...e){super(...e),Ae(this,"state",{pageactionFiles:[],drawerOpen:!1,currentTarget:null,pageScripts:Se.a.getPageScripts(this.props.pageId),contentScripts:Object(te.List)()}),Ae(this,"_onContentScriptStoreChange",()=>{Se.a.getContentScripts().then(e=>this.setState({contentScripts:e,pageScripts:Se.a.getPageScripts(this.props.pageId)}))}),Ae(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))}),Ae(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),Ae(this,"onItemClicked",(e,t)=>{this.isScriptEnabled(e)?we.a.removeContentScript(this.props.pageId,e):we.a.addContentScript(this.props.pageId,e)}),Ae(this,"isActive",()=>this.state.pageScripts!==Object(te.Map)()),Ae(this,"isScriptEnabled",e=>Boolean(this.state.pageScripts.get(e))),Ae(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),Ae(this,"moveFocus",(e,t,a)=>{const i=ke.a.findDOMNode(this);if(i instanceof HTMLElement&&(!0===a||Object(ye.a)(i))){const a=Array.from(i.querySelectorAll("input")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(console.log("ids",a),0===a.length)return;let s;switch(t){case"current":if(""===e&&(e=a[0]),s=a.indexOf(e),-1===s)return;break;case"up":case"down":if(1===a.length)return;if(s=a.indexOf(e),-1===s)return;if("up"===t){if(s--,s<0)return}else if(s++,s>=a.length)return;break;default:return}e=a[s];const n=i.querySelector(`input[data-id="${e}"]`);n&&n.focus()}})}componentDidMount(){Se.a.getContentScripts().then(e=>this.setState({contentScripts:e},()=>{Se.a.addChangeListener(this._onContentScriptStoreChange)}))}componentWillUnmount(){Se.a.removeChangeListener(this._onContentScriptStoreChange)}UNSAFE_componentWillReceiveProps(e){this.props.pageId!==e.pageId&&this.setState({pageScripts:Se.a.getPageScripts(e.pageId)})}render(){return r.a.createElement(P.a,{tooltip:Object(l.a)("Page Actions"),disabled:this.props.disabled,isPopupVisible:this.state.drawerOpen,isOn:this.isActive(),onClick:this.togglePopup,hidePopup:this.hidePopup,image:E.rb[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,hasLightArrow:"above"===this.props.popupPosition,popupWidth:225,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:Oe,lineNumber:193}},r.a.createElement("h2",{__source:{fileName:Oe,lineNumber:213}},Object(l.a)("Page Actions")),r.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:Oe,lineNumber:214}},this.state.contentScripts.map((e,t)=>{const a=t.toString();return r.a.createElement("label",{key:t,onKeyDown:this.keyDownHandler.bind(this,a),__source:{fileName:Oe,lineNumber:218}},r.a.createElement("input",{"data-id":a,autoFocus:0===t,type:"checkbox",onChange:this.onItemClicked.bind(this,e.get("name")),checked:this.isScriptEnabled(e.get("name")),__source:{fileName:Oe,lineNumber:220}}),r.a.createElement("span",{__source:{fileName:Oe,lineNumber:226}},e.get("name")))})))}}var Ie=Te,De=a(76),Pe=a(186),xe=a(361),Me=a(184),Le=a(7),je=a(5),Be=a(77);function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fe extends r.a.PureComponent{constructor(...e){super(...e),Re(this,"state",{disabled:!De.a.getActiveWebView(),defaultPageZoom:Me.a.getState().defaultPageZoom,zoom:Me.a.getState().zoom,notesZoom:Me.a.getState().notesZoom,isNoteWebView:!1}),Re(this,"_onActiveWebViewStoreChanged",()=>{const e=De.a.getActiveWebView();e&&e.getZoom(t=>{this._updateZoomState(this.rangeCheck(t),e.name)}),this.setState({disabled:!e})}),Re(this,"_onZoomStoreChanged",()=>{const{defaultPageZoom:e,zoom:t,notesZoom:a}=Me.a.getState();this.setState({defaultPageZoom:e,zoom:t,notesZoom:a})}),Re(this,"_onTabZoomChange",e=>{const t=De.a.getActiveWebView();t&&t.getZoom(a=>{a===e.oldZoomFactor&&e.tabId===this.props.pageId&&this._updateZoomState(e.newZoomFactor,t.name)})}),Re(this,"_onPageZoom",(e,t)=>{if(e!==this.context.vivaldiWindowId)return;const a=De.a.getActiveWebView();a&&a.getZoom(e=>{e+=.1*t,this._updateZoomState(e,a.name)})}),Re(this,"_updateZoomState",(e,t)=>{"markdowneditor"===t||"richtexteditor"===t?this.setState({notesZoom:e,isNoteWebView:!0}):this.setState({zoom:e,isNoteWebView:!1})}),Re(this,"setZoomLevel",e=>{Pe.a.setPageZoom(this.rangeCheck(e))}),Re(this,"rangeCheck",e=>Math.min(Math.max(e,Be.h),Be.g))}componentDidMount(){this._zoomDetectStoreToken=Me.a.addListener(this._onZoomStoreChanged),Le.default.tabs.onZoomChange.addListener(this._onTabZoomChange),je.a.tabsPrivate.onPageZoom.addListener(this._onPageZoom),De.a.addChangeListener(this._onActiveWebViewStoreChanged)}componentWillUnmount(){De.a.removeChangeListener(this._onActiveWebViewStoreChanged),Le.default.tabs.onZoomChange.removeListener(this._onTabZoomChange),je.a.tabsPrivate.onPageZoom.removeListener(this._onPageZoom),this._zoomDetectStoreToken.remove()}render(){const{disabled:e,zoom:t,notesZoom:a,isNoteWebView:i,defaultPageZoom:s}=this.state;return r.a.createElement(xe.a,{zoom:i?a:t,key:"zoomslider",scrolling:!0,inFooter:!0,defaultZoomLevel:s,maxLevel:Be.g,minLevel:Be.h,step:Be.i,disabled:e,customizeMenu:this.props.customizeMenu,onZoomUpdated:this.setZoomLevel,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\PageZoomIndicator.jsx",lineNumber:153}})}}Re(Fe,"contextType",re.a);var Ue=Fe,We=a(57),He=a(42),Ve=a(520),Ge=a(40),Ke=a(196),ze=a(101),Ye=a(521);function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qe extends n.Component{constructor(...e){super(...e),$e(this,"state",{statusText:Object(l.a)("Sync"),statusOverlay:"none",active:!1}),$e(this,"onStoreChange",()=>{const e=Object(ze.b)(ze.a.getState()),t=ze.a.getState().accountInfo.username,a=Ke.a.getState().engineData,i=Ke.a.getState().cycleData,s=a.isFirstSetupComplete&&"stopped"!==a.engineState;let n="none";"loggedOut"!==e&&(a.isFirstSetupComplete&&("credentialsMissing"===e||"loginFailed"===e||a.needsDecryptionPassword)||"failed"===a.engineState&&!a.disableReasons.includes("not_signed_in")||"disable_sync_on_client"===a.protocolErrorClientAction?n="failed":["started","stopped"].includes(a.engineState)&&0===parseInt(i.nextRetryTime)||(n="waiting"));let r=Object(l.a)("Sync");if("loggedOut"===e)r=Object(l.a)("Sync not connected");else if("failed"===n)r=Object(l.a)("Failed to start Sync for “$1”",[t]);else if("clearing_data"===a.engineState)r=Object(l.a)("Clearing Sync server data for “$1”",[t]);else if("configuration_pending"===a.engineState)r=Object(l.a)("Setting up Sync for “$1”",[t]);else if("started"===a.engineState){if(r=Object(l.a)("Connected to Sync as “$1”",[t]),"not_synced"!==i.downloadUpdatesStatus){const[e,t]=Object(Ye.a)(i);r+="\n"+Object(l.a)("Last sync: $1",[h()(i.cycleStartTime).format("l, LTS")])+"\n"+e+"\n"+t}}else r=Object(l.a)("Connecting to Sync as “$1”...",[t]);this.setState({active:s,statusOverlay:n,statusText:r})}),$e(this,"openSyncSettings",()=>{Ge.a.showSettings("sync")}),$e(this,"getImageForStatus",e=>{let t=E.fc;return"failed"===this.state.statusOverlay?t=E.ec:"waiting"===this.state.statusOverlay?t=E.dc:this.state.active&&(t=E.cc),t})}componentDidMount(){this.syncStoreToken=Ke.a.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=ze.a.addListener(this.onStoreChange),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return n.createElement(P.a,{onClick:this.openSyncSettings,image:this.getImageForStatus(status)[this.props.size],tooltip:this.state.statusText,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\SyncStatus.jsx",lineNumber:145}})}}var Ze=Qe,qe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleImages.jsx";function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Je=[{title:Object(l.a)("Always"),profile:"always"},{title:Object(l.a)("Cached"),profile:"cache"},{title:Object(l.a)("title","Never"),profile:"never"}],et=[{title:Object(l.a)("Loop"),profile:"allowed"},{title:Object(l.a)("Once"),profile:"once"},{title:Object(l.a)("title","Never"),profile:"none"}];class tt extends r.a.PureComponent{constructor(...e){super(...e),Xe(this,"_isMounted",!1),Xe(this,"state",{imageProfile:"always",animationProfile:"allowed",drawerOpen:!1}),Xe(this,"_onPageStoreChanged",()=>{this._isMounted&&this.setState({imageProfile:q.a.getActivePage().get("imageLoading")})}),Xe(this,"_onAnimationPolicyChanged",()=>{Le.default.accessibilityFeatures.animationPolicy.get({},({value:e})=>{this._isMounted&&this.setState({animationProfile:e})})}),Xe(this,"onImageProfileSelected",e=>{switch(e){case"never":this.updatePageImageState(!1,!1,!1);break;case"cache":this.updatePageImageState(!0,!0,!0);break;case"always":this.updatePageImageState(!0,!1,!0)}}),Xe(this,"onAnimationsProfileSelected",e=>{this.setState({animationProfile:e},()=>{Le.default.accessibilityFeatures.animationPolicy.set({value:e})})}),Xe(this,"updatePageImageState",(e,t,a)=>{je.a.tabsPrivate.update(q.a.getActivePage().get("id"),{showImages:e,loadFromCacheOnly:t,enablePlugins:a})}),Xe(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),Xe(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))})}componentDidMount(){this._isMounted=!0,q.a.addChangeListener(this._onPageStoreChanged),Le.default.accessibilityFeatures.animationPolicy.onChange.addListener(this._onAnimationPolicyChanged),this._onAnimationPolicyChanged()}componentWillUnmount(){this._isMounted=!1,q.a.removeChangeListener(this._onPageStoreChanged),Le.default.accessibilityFeatures.animationPolicy.onChange.removeListener(this._onAnimationPolicyChanged)}render(){const e=this.state.imageProfile,t=this.state.animationProfile,a=this.props.disabled;return r.a.createElement(P.a,{buttonStyle:{"--displayImagesAll":"always"===e?"block":"none","--displayImagesCached":"cache"!==e||a?"none":"block","--displayImagesNever":"never"!==e||a?"none":"block","--displayAnimationOnce":"once"===t?"block":"none","--displayAnimationNever":"none"===t?"block":"none"},tooltip:Object(l.a)("Toggle images and animation"),onClick:this.togglePopup,disabled:this.props.disabled,image:E.V[this.props.size],size:this.props.size,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,isPopupVisible:this.state.drawerOpen,onDragStart:this.props.onDragStart,hasLightArrow:"above"===this.props.popupPosition,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:qe,lineNumber:159}},r.a.createElement("form",{__source:{fileName:qe,lineNumber:184}},r.a.createElement("h2",{__source:{fileName:qe,lineNumber:185}},Object(l.a)("title","Load Images")),r.a.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:qe,lineNumber:186}},Je.map(({title:t,profile:a},i)=>r.a.createElement("label",{key:"imagePolicy-"+a,__source:{fileName:qe,lineNumber:188}},r.a.createElement("input",{autoFocus:e===a,type:"radio",name:"toggle-image-group",checked:e===a,onChange:this.onImageProfileSelected.bind(this,a),__source:{fileName:qe,lineNumber:189}}),t))),r.a.createElement("h2",{__source:{fileName:qe,lineNumber:201}},Object(l.a)("Play Image Animation")),r.a.createElement("div",{className:"ToggleImages-Selection",__source:{fileName:qe,lineNumber:202}},et.map(({title:e,profile:a})=>r.a.createElement("label",{key:"animationPolicy-"+a,__source:{fileName:qe,lineNumber:204}},r.a.createElement("input",{type:"radio",name:"toggle-animations-group",checked:t===a,onChange:this.onAnimationsProfileSelected.bind(this,a),__source:{fileName:qe,lineNumber:205}}),e)))))}}var at=tt,it=(a(106),"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\ToggleTiling.jsx");function st(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class nt extends r.a.PureComponent{constructor(...e){super(...e),st(this,"state",{drawerOpen:!1}),st(this,"togglePopup",()=>{this.setState(e=>({drawerOpen:!e.drawerOpen}))}),st(this,"hidePopup",()=>{this.state.drawerOpen&&this.setState({drawerOpen:!1})}),st(this,"setTiling",e=>{const t=e.currentTarget.value;if(this.props.pageSelection.count()>1){const e=this.props.pageSelection.map(e=>q.a.getPages().find(t=>t.get("id")===e)).filter(Boolean).toList();Z.a.tilePages(e,t),Z.a.clearSelection()}else if(this.props.tileId){const e=q.a.getPages().filter(e=>e.getIn(["extData","tiling","id"])===this.props.tileId);Z.a.tilePages(e,t)}else q.a.isGroup(this.props.groupName)&&Z.a.tileTabStack(this.props.groupName,t);this.hidePopup()}),st(this,"untile",()=>{const e=this.props.tileId;Z.a.untileTileGroup(e),this.hidePopup()}),st(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),st(this,"moveFocus",(e,t,a)=>{const i=ke.a.findDOMNode(this);if(i instanceof HTMLElement&&(!0===a||Object(ye.a)(i))){const a=Array.from(i.querySelectorAll("button.PageTiling-Button")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===a.length)return;let s;switch(t){case"current":if(""===e&&(e=a[0]),s=a.indexOf(e),-1===s)return;break;case"up":case"down":if(1===a.length)return;if(s=a.indexOf(e),-1===s)return;if("up"===t){if(s--,s<0)return}else if(s++,s>=a.length)return;break;default:return}e=a[s];const n=i.querySelector(`button.PageTiling-Button[data-id="${e}"]`);n&&n.focus()}})}componentDidUpdate(e){e.pageId!==this.props.pageId&&this.hidePopup()}render(){const e=this.props.tilePages.count()>1,t=this.props.isSelecting||e||this.props.groupPages.count()>1;return r.a.createElement(P.a,{customizeMenu:this.props.customizeMenu,disabled:!t,tooltip:Object(l.a)("Page tiling")+"\n"+Object(l.a)("Select multiple tabs or create tab stack to tile pages"),buttonStyle:{"--displayTileColumn":!e||"column"!==this.props.tileMode&&"grid"!==this.props.tileMode?"none":"unset","--displayTileRow":!e||"row"!==this.props.tileMode&&"grid"!==this.props.tileMode?"none":"unset"},popupWidth:"large"===this.props.size?40:32,className:`tilingtoggle ${this.props.size}`,image:E.ic[this.props.size],size:this.props.size,onPointerDown:this.togglePopup,isPopupVisible:this.state.drawerOpen,hidePopup:this.hidePopup,popupPosition:this.props.popupPosition,menuOrigin:this.props.menuOrigin,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,hasLightArrow:!0,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.mimeContent,__source:{fileName:it,lineNumber:195}},r.a.createElement("button",{className:v()("PageTiling-Button",{"button-on":"row"===this.props.tileMode}),"data-id":"row",title:Object(l.a)("Tile vertically"),autoFocus:"row"===this.props.tileMode,onKeyDown:this.keyDownHandler.bind(this,"row"),onMouseUp:this.setTiling,value:"row",dangerouslySetInnerHTML:{__html:E.ic[this.props.size]},style:{"--displayTileColumn":"none","--displayTileRow":"unset"},__source:{fileName:it,lineNumber:225}}),r.a.createElement("button",{className:v()("PageTiling-Button",{"button-on":"column"===this.props.tileMode}),"data-id":"column",title:Object(l.a)("Tile horizontally"),autoFocus:"column"===this.props.tileMode,onKeyDown:this.keyDownHandler.bind(this,"column"),onMouseUp:this.setTiling,value:"column",dangerouslySetInnerHTML:{__html:E.ic[this.props.size]},style:{"--displayTileColumn":"unset","--displayTileRow":"none"},__source:{fileName:it,lineNumber:241}}),r.a.createElement("button",{className:v()("PageTiling-Button",{"button-on":"grid"===this.props.tileMode}),"data-id":"grid",title:Object(l.a)("Tile to grid"),autoFocus:"grid"===this.props.tileMode,onKeyDown:this.keyDownHandler.bind(this,"grid"),onMouseUp:this.setTiling,value:"grid",dangerouslySetInnerHTML:{__html:E.ic[this.props.size]},style:{"--displayTileColumn":"unset","--displayTileRow":"unset"},__source:{fileName:it,lineNumber:257}}),r.a.createElement("button",{className:v()("PageTiling-Button",{"button-on":!this.props.tileMode}),"data-id":"none",value:"Test",title:Object(l.a)("Untile pages"),autoFocus:!this.props.tileMode,onKeyDown:this.keyDownHandler.bind(this,"none"),onMouseUp:this.untile,dangerouslySetInnerHTML:{__html:E.ic[this.props.size]},style:{"--displayTileColumn":"none","--displayTileRow":"none"},__source:{fileName:it,lineNumber:273}}))}}var rt=nt,ot=a(16),lt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\statusbar\\StatusButton.jsx";function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const dt=[m.kBiscuitVersion,m.kPanelsPosition],ut=Object(l.a)("$1 click to toggle panel floating",[Object(l.a)("key","Control")]),ht=function(){const e=q.a.getActivePage();return{activePageId:e.id,activePageUrl:e.url,isSelecting:q.a.isSelecting(),pageSelection:q.a.getSelection(),groupName:e.getIn(["extData","group"]),tileId:e.getIn(["extData","tiling","id"]),tileMode:e.getIn(["extData","tiling","layout"])}};class mt extends r.a.PureComponent{constructor(e,t){super(e),ct(this,"_isMounted",!1),ct(this,"_onPageStoreChange",()=>{this._isMounted&&this.setState(ht())}),ct(this,"_onPanelStoreChanged",()=>{this._isMounted&&this.setState({panelOpen:He.a.getPanelButtonsVisible()})}),ct(this,"_onWindowStoreChanged",()=>{const e=ot.a.getVisibleUI(this.context.vivaldiWindowId).statusBar;this._isMounted&&this.state.statusBarDisplay!==e&&this.setState({statusBarDisplay:e})}),this.state={biscuitUA:"",panelOpen:He.a.getPanelButtonsVisible(),statusBarDisplay:ot.a.getVisibleUI(t.vivaldiWindowId).statusBar,...ht()}}componentDidMount(){this._isMounted=!0,q.a.addChangeListener(this._onPageStoreChange),He.a.addChangeListener(this._onPanelStoreChanged),this._windowStoreToken=ot.a.addListener(this._onWindowStoreChanged),this.props.prefValues[m.kBiscuitVersion]&&je.a.utilities.getVersion((e,t)=>{this._isMounted&&this.setState({biscuitUA:`Vivaldi ${e} / Chrome ${t}`})})}componentWillUnmount(){this._isMounted=!1,He.a.removeChangeListener(this._onPanelStoreChanged),q.a.removeChangeListener(this._onPageStoreChange),this._windowStoreToken.remove()}render(){const e=!!this.state.activePageId&&ee.a.isInternalUrl(this.state.activePageUrl);switch(this.props.name){case"PanelToggle":return r.a.createElement(P.a,{className:"panel-clickoutside-ignore",tooltip:this.state.panelOpen?Object(l.a)("Hide Panel")+"\n"+ut:Object(l.a)("verb","Show Panel")+"\n"+ut,onClick:We.a.togglePanel,onMiddleClick:We.a.toggleFloating,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,style:{transform:"right"===this.props.prefValues[m.kPanelsPosition]?"scaleX(-1)":"unset"},image:E.sb[this.props.size],onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:172}});case"SyncStatus":return!ot.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&r.a.createElement(Ze,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:197}});case"StatusInfo":return"overlay"!==this.state.statusBarDisplay?r.a.createElement(Ve.a,{__source:{fileName:lt,lineNumber:211}}):null;case"TaskList":return r.a.createElement(pe,{customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,__source:{fileName:lt,lineNumber:214}});case"VersionInfo":return this.props.prefValues[m.kBiscuitVersion]?r.a.createElement("div",{className:"biscuit-setting-version",__source:{fileName:lt,lineNumber:221}},r.a.createElement("span",{className:"application-icon-biscuit",dangerouslySetInnerHTML:{__html:E.ab},__source:{fileName:lt,lineNumber:222}}),r.a.createElement("input",{className:"biscuit-string",type:"text",size:this.state.biscuitUA.length,value:this.state.biscuitUA,readOnly:!0,__source:{fileName:lt,lineNumber:225}})):null;case"CaptureImages":return r.a.createElement(Ee,{key:"capture-images",pageId:this.state.activePageId,isInternalPage:e,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:236}});case"TilingToggle":return this.state.activePageId?r.a.createElement(rt,{pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,groupPages:q.a.getGroup(this.state.groupName),groupName:this.state.groupName,tilePages:q.a.getTiles(this.state.tileId),tileId:this.state.tileId,tileMode:this.state.tileMode,isSelecting:this.state.isSelecting,disabled:!1,pageSelection:this.state.pageSelection,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:255}}):null;case"ImagesToggle":return r.a.createElement(at,{key:"toggle-images",disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:280}});case"PageActions":return r.a.createElement(Ie,{key:"pageaction-chooser",pageId:this.state.activePageId,disabled:!1,customizeMenu:this.props.customizeMenu,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,mimeContent:this.props.name,__source:{fileName:lt,lineNumber:296}});case"Zoom":return r.a.createElement(Ue,{key:"zoomslider",pageId:this.state.activePageId,customizeMenu:this.props.customizeMenu,__source:{fileName:lt,lineNumber:313}});default:return null}}}ct(mt,"contextType",re.a);var pt=Object(f.a)(mt,dt),gt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonSwitcher.jsx";class bt extends r.a.Component{render(){switch(this.props.name){case"Back":case"Forward":case"Rewind":case"FastForward":case"Reload":case"Home":return r.a.createElement(ne,{name:this.props.name,customizeMenu:this.props.customizeMenu,size:this.props.size,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:50}});case"Clock":return r.a.createElement(G,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:62}});case"MailStatus":return r.a.createElement(K.a,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:76}});case"PanelToggle":case"SyncStatus":case"StatusInfo":case"TaskList":case"VersionInfo":case"CaptureImages":case"TilingToggle":case"ImagesToggle":case"PageActions":case"Zoom":return r.a.createElement(pt,{name:this.props.name,menuOrigin:this.props.menuOrigin,customizeMenu:this.props.customizeMenu,size:this.props.size,popupPosition:this.props.popupPosition,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:99}});case"MailBack":case"MailForward":case"MailReload":case"MailViewLayout":case"MailViewThreading":return r.a.createElement(K.a,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,disabled:!1,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:117}});case"MailSearch":return r.a.createElement(K.a,{__source:{fileName:gt,lineNumber:131}});case"MailMsgReply":case"MailMsgReplyToAll":case"MailMsgForward":case"MailMsgStatusRead":case"MailMsgFlag":case"MailMsgLabel":case"MailMsgSend":case"MailMsgShowHeaders":case"MailMsgSpam":case"MailMsgDiscard":case"MailMsgAttach":case"MailMsgTrash":return r.a.createElement(K.a,{name:this.props.name,size:this.props.size,menuOrigin:this.props.menuOrigin,popupPosition:this.props.popupPosition,customizeMenu:this.props.customizeMenu,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,mimeType:this.props.mimeType,__source:{fileName:gt,lineNumber:146}});case"Spacer":return r.a.createElement("div",{className:"toolbar-spacer",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:gt,lineNumber:161}});case"FlexibleSpacer":return r.a.createElement("div",{className:"toolbar-spacer-flexible",onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragEnter:this.props.onDragEnter,__source:{fileName:gt,lineNumber:170}});default:return console.warn(`ToolbarButton “${this.props.name}” not found`),null}}}a.d(t,"a",(function(){return vt}));var ft="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\Toolbar.jsx";function _t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Nt=!1;class vt extends r.a.PureComponent{constructor(...e){super(...e),_t(this,"_dropOnSelf",!1),_t(this,"_dragIndex",null),_t(this,"state",{buttons:s.a.get(this.props.name)}),_t(this,"onPrefsChanged",(e,t)=>{this.setState({buttons:t})}),_t(this,"reset",()=>{i.a.reset(this.props.name)}),_t(this,"removeButton",e=>{const t=s.a.get(this.props.name);i.a.set(this.props.name,t.filter((t,a)=>e!==a))}),_t(this,"getButtonMenu",e=>[{name:"---"},{items:[{handler:this.removeButton.bind(this,e),...Object(R.a)("Remove From Toolbar")},{name:"---"},{handler:this.reset,...Object(R.a)("Reset Toolbar to Default")}],...Object(R.a)("command","Customize")}])}componentDidMount(){s.a.addListener(this.props.name,this.onPrefsChanged)}componentWillUnmount(){s.a.removeListener(this.props.name,this.onPrefsChanged)}render(){return r.a.createElement("div",{className:v()("toolbar","toolbar-droptarget",this.props.className,"toolbar-"+this.props.size),__source:{fileName:ft,lineNumber:96}},this.state.buttons.map((e,t)=>r.a.createElement(bt,{key:t,name:e,menuOrigin:this.props.menuOrigin,customizeMenu:this.getButtonMenu(t),popupPosition:this.props.popupPosition,size:this.props.size,onDragStart:e=>{Nt=!1,this._dropOnSelf=!1,e.dataTransfer.setData("vivaldi/x-button-index",t),e.dataTransfer.setData("vivaldi/x-toolbar-name",this.props.name)},onDragEnd:e=>{!this._dropOnSelf&&Nt&&this.removeButton(t),this._dropOnSelf=!1,this._dragIndex=null},onDrop:(e,t,a)=>{Nt=!0;const s=this.state.buttons.slice(),n="right"===t?1:0,r=this._dragIndex+n,o=e.dataTransfer.getData("vivaldi/x-button-toolbar"),l=e.dataTransfer.getData("vivaldi/x-button-index");this._dropOnSelf=this.props.name===e.dataTransfer.getData("vivaldi/x-toolbar-name"),this._dropOnSelf?(s[l]=null,s.splice(r,0,o),i.a.set(this.props.name,s.filter(e=>e))):(s.splice(r,0,o),i.a.set(this.props.name,s))},onDragEnter:()=>{this._dragIndex=t},mimeType:"vivaldi/x-button-toolbar",__source:{fileName:ft,lineNumber:104}})))}}},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(19),r=a(8),o=a(33),l=a(2),c=a(1),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\AccessKeys.jsx";const u=[c.kWebpagesAccessKeys],h=r.a.getEventHandler;class m extends s.a.Component{render(){return s.a.createElement(o.a,{filter:this.props.filter,__source:{fileName:d,lineNumber:22}},s.a.createElement("div",{className:"setting-group",__source:{fileName:d,lineNumber:23}},s.a.createElement("h3",{__source:{fileName:d,lineNumber:24}},Object(l.a)("Access Keys")),s.a.createElement("div",{className:"setting-single",__source:{fileName:d,lineNumber:25}},s.a.createElement("label",{__source:{fileName:d,lineNumber:26}},s.a.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kWebpagesAccessKeys],onChange:h(c.kWebpagesAccessKeys),__source:{fileName:d,lineNumber:27}}),s.a.createElement("span",{__source:{fileName:d,lineNumber:30}},Object(l.a)("Allow Access Keys"))),s.a.createElement("p",{className:"info",__source:{fileName:d,lineNumber:32}},Object(l.a)("Some websites may use this accessibility feature to register shortcuts for certain elements, using $1 modifier.",["Shift+Alt"])))))}}var p=Object(n.a)(m,u),g=a(4);var b=function(e){switch(e){case g.a.CATEGORY_COMMAND_APPLICATION:return Object(l.a)("win_linux","Window");case g.a.CATEGORY_COMMAND_APPEARANCE:return Object(l.a)("win_linux","View");case g.a.CATEGORY_COMMAND_TAB_ACTION:return Object(l.a)("Tab");case g.a.CATEGORY_COMMAND_WEBPAGE_NAVIGATION:return Object(l.a)("Page");case g.a.CATEGORY_COMMAND_MAIL:return Object(l.a)("Mail");default:return"Unknown"}},f=a(88),_=a(62),N="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\ConfigureSingleKeyShortcuts.jsx";const v=r.a.getEventHandler;class E extends i.Component{render(){return i.createElement(o.a,{filter:this.props.filter,__source:{fileName:N,lineNumber:23}},i.createElement("div",{className:"setting-group",__source:{fileName:N,lineNumber:24}},i.createElement("h3",{__source:{fileName:N,lineNumber:25}},Object(l.a)("Keyboard Shortcuts")),i.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:27}},i.createElement("label",{__source:{fileName:N,lineNumber:28}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsEnable],onChange:v(c.kKeyboardShortcutsEnable),__source:{fileName:N,lineNumber:29}}),i.createElement("span",{__source:{fileName:N,lineNumber:32}},Object(l.a)("Enable Keyboard Shortcuts")))),i.createElement("div",{className:"setting-single pad-left",__source:{fileName:N,lineNumber:35}},i.createElement("label",{__source:{fileName:N,lineNumber:36}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsEnableSingleKey],onChange:v(c.kKeyboardShortcutsEnableSingleKey),disabled:!this.props.prefValues[c.kKeyboardShortcutsEnable],__source:{fileName:N,lineNumber:37}}),i.createElement("span",{__source:{fileName:N,lineNumber:43}},Object(l.a)("Single Key Shortcuts"))),!1),i.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:58}},i.createElement("label",{__source:{fileName:N,lineNumber:59}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsSpaceFastForwards],onChange:v(c.kKeyboardShortcutsSpaceFastForwards),__source:{fileName:N,lineNumber:60}}),i.createElement("span",{__source:{fileName:N,lineNumber:64}},Object(l.a)("Space Key to Fast Forward")))),i.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:68}},i.createElement("label",{__source:{fileName:N,lineNumber:69}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[c.kKeyboardShortcutsAltOpensMenu],onChange:v(c.kKeyboardShortcutsAltOpensMenu),__source:{fileName:N,lineNumber:70}}),i.createElement("span",{__source:{fileName:N,lineNumber:74}},Object(l.a)("Alt Key for Main Menu"))))))}}var w=E,S=a(10),C=a(59),k="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\FullKeyAccess.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=[c.kKeyboardTabToAll,c.kKeyboardTabToAllUsesSystemDefault,c.kWebpagesFocusTrap],A=r.a.getEventHandler;class T extends s.a.Component{constructor(...e){super(...e),y(this,"handleDarwinKeyAccess",e=>{const t=S.a.get(c.kSystemMacKeyboardUiMode),a=e.target&&e.target.checked;a||-1===this.props.prefValues[c.kKeyboardTabToAll]?a&&2===t&&0!==this.props.prefValues[c.kKeyboardTabToAll]?r.a.set(c.kKeyboardTabToAll,0):a&&0===t&&-1!==this.props.prefValues[c.kKeyboardTabToAll]&&r.a.set(c.kKeyboardTabToAll,-1):r.a.set(c.kKeyboardTabToAll,-1),r.a.set(c.kKeyboardTabToAllUsesSystemDefault,a)}),y(this,"renderFullKeyboardAccess",()=>s.a.createElement("div",{className:"setting-group",__source:{fileName:k,lineNumber:50}},s.a.createElement("h3",{__source:{fileName:k,lineNumber:51}},Object(l.a)("Full Keyboard Access")),!1,s.a.createElement(C.a,{name:"keyAccessSetting",className:"setting-single",value:this.props.prefValues[c.kKeyboardTabToAll],onChange:A(c.kKeyboardTabToAll),__source:{fileName:k,lineNumber:65}},s.a.createElement("label",{__source:{fileName:k,lineNumber:69}},s.a.createElement("input",{type:"radio",value:"0",disabled:this.props.prefValues[c.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:k,lineNumber:70}}),s.a.createElement("span",{__source:{fileName:k,lineNumber:73}},Object(l.a)("Focus All Controls"))),s.a.createElement("p",{className:"info",__source:{fileName:k,lineNumber:75}},Object(l.a)("Press TAB key to focus all controls")),s.a.createElement("label",{__source:{fileName:k,lineNumber:79}},s.a.createElement("input",{type:"radio",value:"-1",disabled:this.props.prefValues[c.kKeyboardTabToAllUsesSystemDefault],__source:{fileName:k,lineNumber:80}}),s.a.createElement("span",{__source:{fileName:k,lineNumber:83}},Object(l.a)("Focus Input"))),s.a.createElement("p",{className:"info",__source:{fileName:k,lineNumber:85}},Object(l.a)("Press TAB key to focus text boxes and lists only"))))),y(this,"onFocusCyclingChanged",e=>{const t="1"===e.target.value;r.a.set(c.kWebpagesFocusTrap,t)}),y(this,"renderFocusCycling",()=>s.a.createElement("div",{className:"setting-group",__source:{fileName:k,lineNumber:100}},s.a.createElement("h3",{__source:{fileName:k,lineNumber:101}},Object(l.a)("Focus Cycling")),s.a.createElement(C.a,{name:"toolbarFocusCycling",className:"setting-single",value:this.props.prefValues[c.kWebpagesFocusTrap]?"1":"0",onChange:this.onFocusCyclingChanged,__source:{fileName:k,lineNumber:102}},s.a.createElement("label",{__source:{fileName:k,lineNumber:106}},s.a.createElement("input",{type:"radio",value:"1",__source:{fileName:k,lineNumber:107}}),s.a.createElement("span",{__source:{fileName:k,lineNumber:108}},Object(l.a)("Cycle in Component"))),s.a.createElement("p",{className:"info",__source:{fileName:k,lineNumber:110}},Object(l.a)("TAB key focus is bound to individual toolbars or webpage")),s.a.createElement("label",{__source:{fileName:k,lineNumber:113}},s.a.createElement("input",{type:"radio",value:"0",__source:{fileName:k,lineNumber:114}}),s.a.createElement("span",{__source:{fileName:k,lineNumber:115}},Object(l.a)("Cycle All"))),s.a.createElement("p",{className:"info",__source:{fileName:k,lineNumber:117}},Object(l.a)("TAB key focus cycles through whole application")))))}render(){return s.a.createElement(o.a,{filter:this.props.filter,__source:{fileName:k,lineNumber:127}},this.renderFocusCycling(),this.renderFullKeyboardAccess())}}var I=Object(n.a)(T,O),D=a(27),P=a(25),x=a(17),M=a.n(x),L=a(52),j=a(155),B="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\KeyboardShortcutEditSetting.jsx";function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const F=(e,t)=>L.a.isSingleKeyShortcut(e)?t?"singlemail":"single":"";class U extends i.Component{constructor(...e){super(...e),R(this,"state",{keyValue:this.props.command.shortcut,selectedCombo:"",active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),R(this,"findExistingShortcut",e=>this.props.commandArray.filter(e=>e.shortcut).find(t=>t.shortcut.includes(e))),R(this,"isTweakedShortcut",e=>(!this.props.command.shortcut||!this.props.command.shortcut.includes(e))&&(this.props.command.tweakedShortcut&&this.props.command.tweakedShortcut===e)),R(this,"restoreDefault",()=>{const e=D.a.getDefault(this.props.command.name);if(e.shortcut)for(let t=0;t<e.shortcut.length;t++){const a=this.findExistingShortcut(e.shortcut[t]);if(a&&this.props.command.name!==a.name&&!this.isTweakedShortcut(e.shortcut[t]))return void this.setState({duplicateCombo:{shortcut:Object(j.b)(e.shortcut[t]),label:a.label},systemReservedCombo:"",singleKeyWarning:!1})}this.setState({keyValue:e.shortcut||null},this.save)}),R(this,"onClearComboButton",()=>{const{selectedCombo:e}=this.state;if(!e)return void this.setState({keyValue:[]},this.save);const t=this.props.command.shortcut,a=[...t.slice(0,t.indexOf(e)),...t.slice(t.indexOf(e)+1)];this.setState({keyValue:a},this.save)}),R(this,"onClearComboButtonMouseDown",e=>{e.preventDefault()}),R(this,"handleKeyEvent",e=>{var t=L.a.keyComboFromEvent(e.nativeEvent);"tab"!==t&&"shift+tab"!==t&&e.preventDefault();const a=["shift+insert","ctrl+insert"];var i=this.findExistingShortcut(t);if("PageUp"!==e.nativeEvent.key&&"PageDown"!==e.nativeEvent.key||!e.nativeEvent.ctrlKey||e.preventDefault(),e.getModifierState("AltGraph"))return;const{selectedCombo:s}=this.state;if(t&&"backspace"===t||s&&"del"===t){let e=this.props.command.shortcut;s?e.splice(e.indexOf(s),1):e=e.slice(0,e.length-1),this.setState({keyValue:e||[],duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1},this.save),this.refs.comboInput.focus()}else!this.props.prefValues[c.kKeyboardShortcutsEnableSingleKey]&&t&&L.a.isSingleKeyShortcut(t)?this.setState({duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!0}):i&&!this.isTweakedShortcut(t)?this.setState({duplicateCombo:{shortcut:Object(j.b)(t),label:i.label},systemReservedCombo:"",singleKeyWarning:!1}):t&&-1!==a.indexOf(t)?this.setState({systemReservedCombo:Object(j.b)(t),duplicateCombo:null,singleKeyWarning:!1}):t&&-1===["shift+tab","tab","space","enter","left","right","up","down","pageup","pagedown","numlock","home","end","insert","del"].indexOf(t)?this.setState(e=>({keyValue:(e.keyValue||[]).slice().concat(t),duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save):this.navigateWithArrowKeys(e)}),R(this,"navigateWithArrowKeys",e=>{let t=null;if(!this.state.keyValue||0===this.state.keyValue.length)return;const a=L.a.keyComboFromEvent(e.nativeEvent),{document:i,HTMLElement:s}=this.context,n=i.activeElement;switch(a){case"left":n&&(t=n.previousElementSibling);break;case"right":n&&(t=n.nextElementSibling);break;case"up":n&&n.parentNode&&(t=n.parentNode.firstChild);break;case"down":n&&n.parentNode&&(t=n.parentNode.lastChild)}t instanceof s&&(e.preventDefault(),e.stopPropagation(),t.focus())}),R(this,"save",()=>{var e={name:this.props.command.name,shortcut:this.state.keyValue,gestures:this.props.command.gestures,showInQC:this.props.command.showInQC};D.a.set({[this.props.command.name]:e})}),R(this,"onTextFocus",()=>{this.setState({active:!0})}),R(this,"onTextBlur",e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()}),R(this,"onButtonFocus",()=>{this.setState({active:!0})}),R(this,"onButtonBlur",e=>{e.preventDefault(),e.stopPropagation(),this.setState({active:!1,duplicateCombo:null,systemReservedCombo:"",singleKeyWarning:!1}),this.save()}),R(this,"onComboFocus",e=>{this.setState({selectedCombo:e.currentTarget.dataset.raw,active:!0})}),R(this,"onComboBlur",()=>{this.setState({selectedCombo:"",active:!1})}),R(this,"renderCombos",()=>{if(this.props.command.shortcut&&this.props.command.shortcut.length>0){const e=this.props.command.name.startsWith("COMMAND_MAIL");return this.props.command.shortcut.map((t,a)=>i.createElement("button",{key:a,className:`multiinput-item\n              ${F(t,e)}`,"data-raw":t,onFocus:this.onComboFocus,onBlur:this.onComboBlur,onKeyDown:this.handleKeyEvent,__source:{fileName:B,lineNumber:324}},Object(j.b)(t)))}}),R(this,"renderKeyboardShortcutEditSetting",()=>i.createElement("div",{className:M()({controls:!0,active:this.state.active}),__source:{fileName:B,lineNumber:341}},i.createElement("div",{className:"multiinput",__source:{fileName:B,lineNumber:345}},i.createElement("div",{className:"multiinput-group",__source:{fileName:B,lineNumber:346}},this.renderCombos(),i.createElement("input",{type:"text",ref:"comboInput",id:this.props.id,defaultValue:"",onKeyDown:this.handleKeyEvent,onFocus:this.onTextFocus,onBlur:this.onTextBlur,__source:{fileName:B,lineNumber:348}}))),i.createElement("input",{type:"button",className:"circular restorekey",title:Object(l.a)("Restore default shortcut"),onClick:this.restoreDefault,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:B,lineNumber:358}}),i.createElement("input",{type:"button",className:"circular clearkey",title:Object(l.a)("Clear shortcut"),onMouseDown:this.onClearComboButtonMouseDown,onClick:this.onClearComboButton,onFocus:this.onButtonFocus,onBlur:this.onButtonBlur,__source:{fileName:B,lineNumber:365}}),this.state.duplicateCombo&&i.createElement("p",{className:"info",__source:{fileName:B,lineNumber:374}},Object(l.a)("Shortcut $1 is already assigned to “$2” command.",[this.state.duplicateCombo.shortcut.toUpperCase(),this.state.duplicateCombo&&this.state.duplicateCombo.label])),this.state.systemReservedCombo&&i.createElement("p",{className:"info",__source:{fileName:B,lineNumber:381}},Object(l.a)("Shortcut $1 is reserved by the system.",[this.state.systemReservedCombo.toUpperCase()])),this.state.singleKeyWarning&&i.createElement("p",{className:"info",__source:{fileName:B,lineNumber:387}},Object(l.a)("Single Key Shortcuts are currently disabled."))))}render(){return this.renderKeyboardShortcutEditSetting()}}R(U,"contextType",P.a);var W=U,H=a(63),V=a(48);var G=(e,t)=>{for(const a of e){let e=!1;for(const i of t)0!==i.indexOf(a)||(e=!0);if(!e)return!1}return!0},K=a(130),z="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\keyboard\\Keyboard.jsx";function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $=[c.kKeyboardShortcutsAltOpensMenu,c.kKeyboardShortcutsEnable,c.kKeyboardShortcutsEnableSingleKey,c.kKeyboardShortcutsEnableSingleKeyForMail,c.kKeyboardShortcutsSpaceFastForwards];class Q extends i.Component{constructor(...e){super(...e),Y(this,"state",{commandArray:_.default.getAllCommands().filter(e=>!e.keyword&&!e.overLink&&!e.hideInSettings),openCategories:["CATEGORY_COMMAND_APPLICATION"],confirmation:!1,hideFullKeyAccess:0,hideConfigureSingleKeyShortcut:0,shouldHideKeyboardShortcuts:!1,keyboardShortcutFilter:""}),Y(this,"_onStoreChange",()=>{this.setState({commandArray:_.default.getAllCommands().filter(e=>!e.keyword&&!e.overLink&&!e.hideInSettings)})}),Y(this,"switchCategory",e=>{this.setState(t=>{const a=t.openCategories;return a.indexOf(e)>-1?a.splice(a.indexOf(e),1):a.push(e),{openCategories:a}})}),Y(this,"confirmRestoreKeys",()=>{this.setState({confirmation:!0})}),Y(this,"restoreKeys",()=>{f.default.restoreCommandShortcutKeys(),this.setState({confirmation:!1})}),Y(this,"onCancel",()=>{this.setState({confirmation:!1})}),Y(this,"renderModal",()=>i.createElement(H.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:z,lineNumber:126}},i.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:z,lineNumber:129}},i.createElement("header",{className:"dialog-header",__source:{fileName:z,lineNumber:130}},i.createElement("h1",{className:"dialog-title",__source:{fileName:z,lineNumber:131}},Object(l.a)("Restore Keyboard Shortcuts?"))),i.createElement("div",{className:"dialog-content",__source:{fileName:z,lineNumber:135}},i.createElement("p",{__source:{fileName:z,lineNumber:136}},Object(l.a)("All keyboard shortcuts will be restored to default."))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:z,lineNumber:140}},i.createElement("input",{type:"button",className:"danger",onClick:this.restoreKeys,value:Object(l.a)("Restore"),__source:{fileName:z,lineNumber:141}}),i.createElement("input",{type:"button",onClick:this.onCancel,value:Object(l.a)("Cancel"),autoFocus:!0,__source:{fileName:z,lineNumber:146}}))))),Y(this,"renderKeyboardCommandCategories",(e,t)=>{const a=e.reduce((e,t)=>(e[t.category]=(e[t.category]||[]).concat(t),e),{}),s=Object.keys(a).map((e,i)=>this.renderKeyboardCommandCategory(e,a[e],t));return s.length>0?i.createElement("div",{className:"setting-single",__source:{fileName:z,lineNumber:172}},i.createElement("div",{className:"keystrokes",__source:{fileName:z,lineNumber:173}},s),!this.props.filter&&"read-only"!==this.props.view&&i.createElement("input",{type:"button",onClick:this.confirmRestoreKeys,value:Object(l.a)("Restore Default Keys"),__source:{fileName:z,lineNumber:177}})):null}),Y(this,"renderKeyboardCommandCategory",(e,t,a)=>{const s=b(e),n=a||this.state.openCategories.indexOf(e)>-1?"show":"hide";return i.createElement("div",{className:"category "+n,key:e,__source:{fileName:z,lineNumber:195}},i.createElement("button",{onClick:this.switchCategory.bind(this,e),__source:{fileName:z,lineNumber:196}},Object(K.b)(s,a)),i.createElement("div",{className:"list",__source:{fileName:z,lineNumber:199}},t.map((e,t)=>this.renderCommandKeys(e,t,a))))}),Y(this,"renderCommandKeys",(e,t,a)=>{const s=!this.props.prefValues[c.kKeyboardShortcutsEnable],n=!this.props.prefValues[c.kKeyboardShortcutsEnableSingleKey];if("read-only"===this.props.view)return i.createElement("div",{className:"keycombo",key:t,__source:{fileName:z,lineNumber:215}},i.createElement("label",{__source:{fileName:z,lineNumber:216}},Object(K.b)(e.label,a)),e.shortcut&&e.shortcut.map((e,t)=>[i.createElement("span",{key:t,title:s?Object(l.a)("Keyboard Shortcuts are disabled"):1===e.length&&n?Object(l.a)("Single Key Shortcuts are disabled"):"",__source:{fileName:z,lineNumber:218}},i.createElement("input",{type:"button",disabled:!0,className:e.length>1?"item regular":"item single",value:Object(j.b)(e),__source:{fileName:z,lineNumber:222}}))]));if(!e.readonly){const t=e.name.toLowerCase();return i.createElement("div",{className:"keycombo",key:t,__source:{fileName:z,lineNumber:235}},i.createElement("label",{htmlFor:"combo-"+t,__source:{fileName:z,lineNumber:236}},Object(K.b)(e.label,this.props.filter)),i.createElement(W,{prefValues:this.props.prefValues,id:"combo-"+t,key:t,commandArray:this.state.commandArray,command:e,__source:{fileName:z,lineNumber:239}}))}return null}),Y(this,"renderListOfKeyboardCommands",e=>{let t=[];if("read-only"===this.props.view){t=this.state.commandArray.filter(e=>Boolean(e.shortcut&&e.shortcut.length>0))}else t=this.state.commandArray;if(e){const a=this.tokenize(e);t=t.filter(t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1||(t.shortcut||[]).some(e=>{const t=this.tokenize(e);return G(a,t)}))}return t.length>0?i.createElement("div",{className:"keyboard-shortcut-list",__source:{fileName:z,lineNumber:280}},e&&i.createElement("header",{__source:{fileName:z,lineNumber:282}},i.createElement("h3",{__source:{fileName:z,lineNumber:283}},Object(l.a)("Showing all keyboard shortcut entries matching $1.",[e]))),this.renderKeyboardCommandCategories(t,e)):null}),Y(this,"tokenize",e=>new Set(e.match(/[^,\s\+]+/g)||[]))}UNSAFE_componentWillMount(){_.default.addChangeListener(this._onStoreChange)}componentWillUnmount(){_.default.removeChangeListener(this._onStoreChange)}UNSAFE_componentWillReceiveProps(e){this.props.filter!==e.filter&&this.setState({keyboardShortcutFilter:""})}render(){const e=this.state.keyboardShortcutFilter||this.props.filter;if("read-only"===this.props.view)return this.renderListOfKeyboardCommands(e);const{prefValues:t}=this.props;return i.createElement(V.a,{categoryTitle:Object(l.a)("Keyboard"),className:M()({"keyboard-shortcut-list":!0,singlekeydisabled:!t[c.kKeyboardShortcutsEnableSingleKey],singlekeydisabledmail:!t[c.kKeyboardShortcutsEnableSingleKeyForMail]}),filter:this.props.filter,__source:{fileName:z,lineNumber:308}},this.state.confirmation&&this.renderModal(),i.createElement(I,{filter:this.props.filter,__source:{fileName:z,lineNumber:319}}),i.createElement(p,{filter:this.props.filter,__source:{fileName:z,lineNumber:321}}),i.createElement(w,{filter:this.props.filter,prefValues:t,__source:{fileName:z,lineNumber:323}}),this.renderListOfKeyboardCommands(e))}}t.a=Object(n.a)(Q,$)},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(127),r=a(46),o=a(2),l=a(681),c=a(36),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngine.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends s.a.Component{constructor(e){super(e),u(this,"getDataUri",(e,t)=>{const a=new Image;a.onload=function(){const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight,a.getContext("2d").drawImage(this,0,0),t(a.toDataURL(e))},a.src=e}),u(this,"constructFavicon",e=>{if(e){const t=Object(c.b)(e.trim()),a=document.createElement("a");a.href=t;const i=a.protocol+"//"+a.host+"/favicon.ico";this.getDataUri(i,e=>{this.faviconUrl=e})}}),u(this,"updateFavicon",e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();if(t)return void this.constructFavicon(t)}this.faviconUrl=""}),u(this,"canCreate",()=>this.state.name.trim()&&this.state.url.trim()&&!1===this.state.nicknameTaken),u(this,"create",()=>{if(this.canCreate()){const e=r.a.getNewEngine();e.name=this.state.name,e.keyword=this.refs.newKeyword.value,e.url=Object(l.encode)(this.state.url),e.suggestUrl=this.refs.newSuggestUrl?Object(l.encode)(this.refs.newSuggestUrl.value):"",e.faviconUrl=this.faviconUrl,n.a.add(e,this.state.default),"function"==typeof this.props.onClose&&this.props.onClose()}}),u(this,"nameChange",e=>{"string"==typeof e.target.value&&this.setState({name:e.target.value})}),u(this,"defaultChange",e=>{"boolean"==typeof e.target.checked&&this.setState({default:e.target.checked})}),u(this,"urlChange",e=>{"string"==typeof e.target.value&&this.setState({url:e.target.value})}),u(this,"nicknameChange",e=>{if("string"==typeof e.target.value){const t=e.target.value.trim();this.setState({nicknameTaken:t.length>0&&r.a.hasKeyword(t)})}}),this.state={name:this.props.name?this.props.name:"",url:this.props.url?this.props.url.replace("{searchTerms}","%s"):"",nicknameTaken:!1,default:!1},this.faviconUrl=""}componentDidMount(){this.constructFavicon(this.props.url)}render(){const e=this.state.nicknameTaken?r.a.getByKeyword(this.refs.newKeyword.value.trim()):null,t=e?e.name:"";return s.a.createElement("form",{onSubmit:this.create,__source:{fileName:d,lineNumber:135}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:d,lineNumber:136}},s.a.createElement("h1",{className:"dialog-title",__source:{fileName:d,lineNumber:137}},Object(o.a)("Add Search Engine"))),s.a.createElement("div",{className:"dialog-content",__source:{fileName:d,lineNumber:140}},s.a.createElement("label",{className:"fieldset",__source:{fileName:d,lineNumber:141}},s.a.createElement("input",{className:"searchengine_url setting-single-flex",type:"text",placeholder:Object(o.a)("URL"),value:this.state.url,onChange:this.urlChange,onBlur:this.updateFavicon,__source:{fileName:d,lineNumber:142}})),s.a.createElement("label",{className:"fieldset",__source:{fileName:d,lineNumber:152}},s.a.createElement("input",{className:"setting-single-flex",type:"text",value:this.state.name,placeholder:Object(o.a)("Description"),onChange:this.nameChange,autoFocus:!0,__source:{fileName:d,lineNumber:153}}),s.a.createElement("input",{className:"searchengine_keyword setting-single-noflex",type:"text",ref:"newKeyword",placeholder:Object(o.a)("Nickname"),onChange:this.nicknameChange,__source:{fileName:d,lineNumber:162}})),this.state.nicknameTaken&&s.a.createElement("p",{className:"info",style:{textAlign:"right"},__source:{fileName:d,lineNumber:172}},Object(o.a)("Nickname in use by $1 search engine",[t])),s.a.createElement("label",{className:"fieldset",__source:{fileName:d,lineNumber:177}},s.a.createElement("input",{type:"checkbox",checked:this.state.default,onChange:this.defaultChange,__source:{fileName:d,lineNumber:178}}),s.a.createElement("span",{__source:{fileName:d,lineNumber:183}},Object(o.a)("Set as Default Search")))),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:d,lineNumber:187}},s.a.createElement("input",{type:"submit",onClick:this.create,disabled:!this.canCreate(),value:Object(o.a)("Add"),__source:{fileName:d,lineNumber:188}}),s.a.createElement("input",{type:"button",onClick:this.props.onClose,value:Object(o.a)("Cancel"),__source:{fileName:d,lineNumber:194}})))}}var m=h,p=a(63),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\CreateSearchEngineDlg.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends s.a.Component{constructor(...e){super(...e),b(this,"state",{msg:"",shown:!0,modalShown:!1}),b(this,"handleClose",()=>{this.state.shown&&this.props.onClose(),this.setState(e=>({shown:!e.shown}))})}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}render(){return this.state.shown?s.a.createElement(p.a,{onRequestClose:this.handleClose,__source:{fileName:g,lineNumber:41}},s.a.createElement("div",{className:"dialog-addsearch",__source:{fileName:g,lineNumber:42}},s.a.createElement(m,{onClose:this.handleClose,name:this.props.name,url:this.props.url,__source:{fileName:g,lineNumber:43}}))):null}}var _=f,N=a(88),v=a(8),E=a(10),w=a(174),S=a(61),C=a.n(S),k=a(511),y=a(1),O="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\downloadDialog.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const T=Object(k.a)("input");class I extends s.a.Component{constructor(...e){super(...e),A(this,"state",{shown:!0,modalShown:!1,askNextTime:!1}),A(this,"onOpen",()=>{this.props.customData.request.allow("open"),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&E.a.get(y.kDownloadsOpenPanelOnNew)&&N.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),A(this,"onSave",()=>{this.props.customData.request.allow(),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&E.a.get(y.kDownloadsOpenPanelOnNew)&&N.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),A(this,"onSaveAs",()=>{this.props.customData.request.allow("saveas"),this.setState(e=>({shown:!e.shown})),!document.querySelector("#panels-container .downloads.active")&&E.a.get(y.kDownloadsOpenPanelOnNew)&&N.default.executeActions("COMMAND_SHOW_DOWNLOADS_PANEL"),this.close()}),A(this,"onCancel",()=>{this.props.customData.request.deny(),this.setState(e=>({shown:!e.shown})),this.close()}),A(this,"close",()=>{v.a.set(y.kDownloadsStartAutomatically,this.state.askNextTime),this.props.onClose()}),A(this,"onAskDownloadChanged",({target:e})=>{this.setState({askNextTime:e.checked})})}componentDidMount(){this.refs.defaultAction.focus()}UNSAFE_componentWillReceiveProps(){this.setState({shown:!0})}render(){const e=this.props.customData.url.startsWith("data:");let t="",a="";this.props.customData.suggestedFilename&&e||({hostname:t,pathname:a}=C.a.parse(this.props.customData.url));const i=this.props.customData.suggestedFilename?this.props.customData.suggestedFilename:(a||"").split("/").pop(),n=e?Object(o.a)("Data URL"):t,r=-1===this.props.customData.fileSize?Object(o.a)("Unknown"):Object(w.a)(this.props.customData.fileSize);return s.a.createElement(p.a,{ignoreEscape:!1,onRequestClose:this.onCancel,__source:{fileName:O,lineNumber:121}},s.a.createElement("div",{className:"dialog-download",__source:{fileName:O,lineNumber:123}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:O,lineNumber:124}},s.a.createElement("h1",{className:"dialog-title",title:i,__source:{fileName:O,lineNumber:125}},Object(o.a)("Download “$1”?",[i]))),s.a.createElement("div",{className:"dialog-content",__source:{fileName:O,lineNumber:131}},s.a.createElement("p",{__source:{fileName:O,lineNumber:132}},s.a.createElement("span",{className:"label",title:i,__source:{fileName:O,lineNumber:133}},Object(o.a)("File Name:")),i),s.a.createElement("p",{__source:{fileName:O,lineNumber:136}},s.a.createElement("span",{className:"label",__source:{fileName:O,lineNumber:136}},Object(o.a)("File Size:")),r),s.a.createElement("p",{__source:{fileName:O,lineNumber:137}},s.a.createElement("span",{className:"label",__source:{fileName:O,lineNumber:137}},Object(o.a)("Host:")),n),s.a.createElement("label",{className:"autosave",__source:{fileName:O,lineNumber:138}},s.a.createElement("input",{type:"checkbox",onChange:this.onAskDownloadChanged,__source:{fileName:O,lineNumber:139}}),s.a.createElement("span",{__source:{fileName:O,lineNumber:142}},Object(o.a)("Always Save Files to Default Download Location")))),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:O,lineNumber:145}},s.a.createElement("input",{type:"button",className:"primary",onClick:this.onSave,ref:"defaultAction",value:Object(o.a)("Save"),__source:{fileName:O,lineNumber:146}}),s.a.createElement("input",{type:"button",onClick:this.onSaveAs,value:Object(o.a)("Save As..."),__source:{fileName:O,lineNumber:152}}),s.a.createElement(T,{type:"button",onClick:this.onOpen,value:Object(o.a)("Open"),__source:{fileName:O,lineNumber:156}}),s.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:O,lineNumber:160}}))))}}var D=I,P=a(17),x=a.n(P),M="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\overlayinfobubble.jsx";function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends s.a.Component{constructor(e){super(e),L(this,"startHover",e=>{this.setState({hover:!0})}),L(this,"endHover",e=>{this.setState({hover:!1})}),L(this,"showSelf",()=>{this._timeoutID&&clearTimeout(this._timeoutID),this.setState({show:!0}),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!0)}),L(this,"hideSelf",e=>{this._timeoutID&&clearTimeout(this._timeoutID),this._timeoutID=setTimeout(this.onClose,e)}),L(this,"onClose",()=>{this.setState({show:!1,hover:!1}),this.props.onClose&&this.props.onClose(),this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!1)}),L(this,"onContextMenu",e=>{this._timeoutID&&clearTimeout(this._timeoutID),this.props.onContextMenu&&this.props.onContextMenu(e)}),L(this,"show",()=>{this.showSelf(),this.hideSelf(4e3)}),this.state={hover:!1,show:!0}}componentDidMount(){this.hideSelf(4e3)}render(){var e=x()({overlayinfobubble:!0,show:this.state.hover||this.state.show});return s.a.createElement("div",{onMouseEnter:this.startHover,onMouseLeave:this.endHover,__source:{fileName:M,lineNumber:90}},s.a.createElement("div",{className:e,onContextMenu:this.onContextMenu,onClick:this.hideSelf.bind(this,0),__source:{fileName:M,lineNumber:93}},this.props.overlayText))}}var B=j,R=a(25),F=a(60);function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class W extends s.a.Component{constructor(e){super(e),U(this,"overlayRef",null),U(this,"overlayVisible",!0),U(this,"showSelf",()=>{this.setState({show:!0}),this.overlayRef&&this.overlayRef.show()}),U(this,"hideSelf",()=>{this.setState({show:!1,contextOpen:!1})}),U(this,"alwaysHide",()=>{v.a.set(y.kWebpagesFullScreenShowBubble,!1),this.hideSelf()}),U(this,"shouldShow",()=>!!E.a.get(y.kWebpagesFullScreenShowBubble)&&(this.state.contextOpen||this.state.show)),U(this,"onOverlayVisibilityChanged",e=>{this.overlayVisible=e}),U(this,"onContextMenu",e=>{const t=[{name:Object(o.a)("Hide Fullscreen Reminder"),handler:this.hideSelf.bind(this)},{name:Object(o.a)("Never Show Fullscreen Reminder"),handler:this.alwaysHide}];Object(F.a)(this.context.vivaldiWindowId,t,e=>this.setState({contextOpen:e}))(e)}),this.state={contextOpen:!1,show:!0}}render(){let e=null;if(this.shouldShow()){const t=Object(o.a)("Press Escape key to exit fullscreen.");e=s.a.createElement(B,{ref:e=>this.overlayRef=e,customData:this.props.customData,onClose:this.props.closeDialog,onContextMenu:this.onContextMenu,onVisibilityChanged:this.onOverlayVisibilityChanged,overlayText:t,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobubble\\fullscreeninfowrapper.jsx",lineNumber:87}})}return e}}U(W,"contextType",R.a);var H=W,V=a(508),G=a(479),K="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\javascriptDialog.jsx";function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Y extends s.a.Component{constructor(...e){super(...e),z(this,"_pendingAction",!0),z(this,"state",{promptValue:this.props.customData.defaultPromptText}),z(this,"handleLoadStart",e=>{e.isTopLevel&&this.onCancel()}),z(this,"onOk",e=>{this._pendingAction&&(e.preventDefault(),this._pendingAction=!1,this.props.customData.dialog.ok(this.state.promptValue)),this.props.onClose()}),z(this,"onCancel",()=>{this._pendingAction&&(this._pendingAction=!1,this.props.customData.dialog.cancel()),this.props.onClose()}),z(this,"handlePrompt",e=>{this.setState({promptValue:e.target.value})})}componentDidMount(){this.props.customData.webview.addEventListener("loadstart",this.handleLoadStart),"prompt"!==this.props.customData.messageType?Object(G.a)(()=>this.refs.okButton.focus(),80):Object(G.a)(()=>this.refs.promptInput.select(),80)}componentWillUnmount(){this._pendingAction&&this.props.customData.dialog.cancel(),this.props.customData.webview.removeEventListener("loadstart",this.handleLoadStart)}render(){const e=Object(S.parse)(this.props.customData.url).hostname,t=this.props.customData.messageType,a=e?Object(o.a)("JavaScript from “$1”",[e]):Object(o.a)("JavaScript from localhost");return s.a.createElement(p.a,{dialogWidth:400,onRequestClose:this.onCancel,ignoreClick:!0,viewMode:"dialog-javascript slide",__source:{fileName:K,lineNumber:85}},s.a.createElement("header",{className:"dialog-header",__source:{fileName:K,lineNumber:91}},s.a.createElement("h1",{className:"dialog-title",title:a,__source:{fileName:K,lineNumber:92}},a)),s.a.createElement("form",{onSubmit:this.onOk,__source:{fileName:K,lineNumber:94}},s.a.createElement("div",{className:"dialog-content",__source:{fileName:K,lineNumber:95}},s.a.createElement("p",{__source:{fileName:K,lineNumber:96}},this.props.customData.messageText),"prompt"===t&&s.a.createElement("input",{type:"text",ref:"promptInput",value:this.state.promptValue,onChange:this.handlePrompt,__source:{fileName:K,lineNumber:100}})),s.a.createElement("footer",{className:"dialog-footer",__source:{fileName:K,lineNumber:107}},s.a.createElement("input",{ref:"okButton",type:"submit",value:Object(o.a)("OK"),__source:{fileName:K,lineNumber:108}}),"alert"!==t&&s.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:K,lineNumber:114}}))))}}var $=Y,Q="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\dialogRenderWrapper.jsx";t.a=function({customData:e,closeDialog:t}){switch(e.dialogtype){case"download":return s.a.createElement(D,{customData:e,onClose:t,__source:{fileName:Q,lineNumber:37}});case"importbookmarks":return s.a.createElement(V.a,{onClose:t,__source:{fileName:Q,lineNumber:44}});case"createSearch":return s.a.createElement(_,{onClose:t,name:e.Name,url:e.Url,__source:{fileName:Q,lineNumber:50}});case"javascript":return s.a.createElement("div",{className:"modal-overlay",__source:{fileName:Q,lineNumber:59}},s.a.createElement($,{customData:e,onClose:t,__source:{fileName:Q,lineNumber:60}}));case"fullscreen":return s.a.createElement(H,{customData:e,closeDialog:t,__source:{fileName:Q,lineNumber:68}});case"pointerLock":{const a=Object(o.a)("Press Escape key to exit the pointer lock.");return s.a.createElement(B,{customData:e,onClose:t,overlayText:a,__source:{fileName:Q,lineNumber:76}})}default:return console.error("DialogRenderWrapper.render: unknown dialogtype:"+e.dialogtype),null}}},,,,function(e,t,a){"use strict";var i=a(0),s=a(674),n=a.n(s),r=a(327),o=Object(r.DragDropContext)(n.a),l=a(79),c=(a(106),a(12)),d=a(9),u=a(10),h=a(207),m=a(11),p=a(4);var g=a(296),b=a(1002),f=a(53),_=a(25),N=(a(21),a(1024)),v=a(214),E=a(161),w=a(1),S="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageCollection.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const k=o(N.MosaicWithoutDragDropContext),y=function(){const e=d.a.getActivePage();return{activePageId:e.id,tabFallbackColor:e.tabFallbackColor,pages:d.a.getPages()}};class O extends i.PureComponent{constructor(e,t){super(e),C(this,"_onPageStoreChange",()=>{const e=this.state.activePageId,t=y(),a=t.activePageId,i=this.state.tabFallbackColor;if(i&&(t.prevFallbackColor=i),this.setState(t),a!==e){const e=d.a.getActivePage();if(e&&"ignoreNext"!==e.mediaResponseState){const e=u.a.get(w.kTabsAutoMuting);"onlyActive"===e?(c.a.setMuting("other","mute","auto"),c.a.setMuting("active","unmute","auto")):"prioritizeActive"===e&&(l.a.hasMediaState(t.activePageId,"muting")||l.a.hasMediaState(t.activePageId,"playing"))&&(c.a.setMuting("other","mute","auto"),c.a.setMuting("active","unmute","auto"))}}}),C(this,"_onTilingStoreChange",()=>{this.setState({tiles:g.b.getState()})}),C(this,"onResize",e=>{const t=e[0].target;let a,i;if(t&&t.clientWidth&&t.clientHeight)a=t.clientWidth,i=t.clientHeight;else{const e=Object(v.a)(u.a.get(w.kPanelsState),["width"],0);a=this.context.innerWidth-e,i=this.context.innerHeight}this.setState({contentWidth:a,contentHeight:i})}),C(this,"handleFocus",e=>{e&&e.nativeEvent&&e.nativeEvent.relatedTarget&&"WEBVIEW"===e.nativeEvent.relatedTarget.tagName&&!0===this.props.cycleFocus&&f.a.doAction("focusWebView")}),C(this,"onMosaicLayoutChange",e=>{const t=d.a.getPageById(this.state.activePageId);if(t){const a=t.getIn(["extData","tiling","id"]);(class{static setTileLayout(e,t){m.a.dispatch({actionType:p.a.TILE_SET_LAYOUT,mosaicLayout:e,id:t})}}).setTileLayout(e,a)}}),C(this,"renderTileSet",e=>{const t=e.map(e=>e.getIn(["extData","tiling","id"])).toSet(),a=d.a.getPageById(this.state.activePageId);return t.map(e=>{const t=d.a.getTiles(e,this.state.pages).sortBy(e=>e.index).map(e=>this.renderPage(e));let s;if(this.state.tiles[e])s=this.state.tiles[e];else if(a){const e=a.getIn(["extData","tiling","layout"]);s=Object(g.a)(t.size,e)}const n=!!a&&e===a.getIn(["extData","tiling","id"]);return i.createElement(k,{key:e,className:n?"visible":"hidden",renderTile:e=>t.get(e),value:s,onChange:this.onMosaicLayoutChange,__source:{fileName:S,lineNumber:182}})})}),C(this,"renderPage",e=>{const t=e.url?e.url:e.pendingUrl;return i.createElement(b.a,{key:`page-component-${e.id}`,id:e.id,url:t,target:e.target,extData:e.extData,showImageInspector:e.showImageInspector,active:e.active,unread:e.unread,discarded:e.discarded,processexitstate:e.processexitstate,contentWidth:this.state.contentWidth,contentHeight:this.state.contentHeight,isVisible:Object(E.e)(e),staleContentBackgroundColor:this.state.prevFallbackColor,__source:{fileName:S,lineNumber:198}})});const a=Object(v.a)(u.a.get(w.kPanelsState),["width"],0);this.state={...y(),contentWidth:t.innerWidth-a,contentHeight:t.innerHeight,tiles:g.b.getState(),prevFallbackColor:u.a.get(w.kWebpagesFallbackBackgroundColor)}}componentDidMount(){d.a.addChangeListener(this._onPageStoreChange),this._tilingStoreToken=g.b.addListener(this._onTilingStoreChange)}componentWillUnmount(){d.a.removeChangeListener(this._onPageStoreChange),this._tilingStoreToken.remove()}render(){const e=i.Fragment,t=this.props.cycleFocus?"0":"-1",a=this.state.pages.filter(e=>!e.isRemoved&&!e.getIn(["extData","tiling","id"])||d.a.getTiles(e.getIn(["extData","tiling","id"]),this.state.pages).size<=1).sortBy(e=>e.id).map(e=>this.renderPage(e)),s=this.state.pages.filter(e=>!e.isRemoved&&e.getIn(["extData","tiling","id"])&&d.a.getTiles(e.getIn(["extData","tiling","id"]),this.state.pages).size>1);return i.createElement(e,{key:"webpage__collection",__source:{fileName:S,lineNumber:245}},i.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:S,lineNumber:246}}),i.createElement(h.a,{id:"webpage-stack",onResize:this.onResize,__source:{fileName:S,lineNumber:247}},s.size>0&&this.renderTileSet(s),a.size>0&&a),i.createElement("span",{tabIndex:t,onFocus:this.handleFocus,__source:{fileName:S,lineNumber:253}}))}}C(O,"contextType",_.a);t.a=o(O)},,,,,function(e,t,a){"use strict";var i=a(76),s=a(0),n=a.n(s),r=a(5),o=a(146),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPageHitEntry.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.a.PureComponent{constructor(e){super(e),c(this,"_getNewSelectionImage",(e,t)=>{if(e={left:e.left,top:e.top,width:e.width,height:e.height},!i.a.getActiveWebView())return!1;const a={fullPage:!1,rect:e};r.a.thumbnails.captureTab(t,a,(e,t)=>{e?this.setState({hitImage:t,justFound:!0}):this.resetJustFound()})}),c(this,"resetJustFound",()=>{this.setState({justFound:!1})}),this.state={hitImage:null,justFound:!1,uiZoom:1},r.a.zoom.getVivaldiUIZoom(e=>{this.setState({uiZoom:e})})}componentDidUpdate(e){(this.props.selectionRect.top!==e.selectionRect.top||this.props.selectionRect.left!==e.selectionRect.left||this.props.selectionRect.width!==e.selectionRect.width||this.props.selectionRect.height!==e.selectionRect.height)&&this.props.selectionRect.width&&this.props.selectionRect.height&&this._getNewSelectionImage(this.props.selectionRect,this.props.tabId)}render(){const e=i.a.getActiveWebView();if(!this.state.hitImage||!e)return null;const t={position:"absolute",top:parseInt(this.props.selectionRect.top/this.state.uiZoom)+this.props.hitOffset,left:parseInt(this.props.selectionRect.left/this.state.uiZoom),width:parseInt(this.props.selectionRect.width/this.state.uiZoom),height:parseInt(this.props.selectionRect.height/this.state.uiZoom)};return n.a.createElement(o.Transition,{in:this.state.justFound,appear:!0,enter:!0,exit:!0,unmountOnExit:!0,onEntered:(e,t)=>this.resetJustFound(),timeout:{appear:200,enter:200,exit:200},__source:{fileName:l,lineNumber:115}},e=>n.a.createElement("img",{src:this.state.hitImage,style:t,className:`fip-active-hit ${e}`,__source:{fileName:l,lineNumber:128}}))}}var u=d,h=a(10),m=a(26),p=a(4),g=a(143),b=a(53),f=a(108),_=a(25),N=a(2),v=a(7),E=a(17),w=a.n(E),S=a(9),C=a(125),k=a(13),y=a(1),O="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\find-in-page\\FindInPage.jsx";function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends n.a.PureComponent{constructor(e){super(e),A(this,"_isIMEOpen",!1),A(this,"onCompositionStart",()=>{this._isIMEOpen=!0}),A(this,"onCompositionEnd",()=>{this._isIMEOpen=!1,this.onFindInPageTextChanged()}),A(this,"onWebpageviewStoreChanged",e=>{if(!e.pageId||e.pageId===this.props.pageId&&i.a.getActiveWebView()){switch(e.type){case p.a.FIND_IN_PAGE_RESULT_ACTION:this.setState(this._getStateFromStores(!0));break;case p.a.WEBPAGEVIEW_ACTIONS:"findInPage"===e.action?this.setState(this._getStateFromStores(!1),this.populateWithPageSelection):"findNextInPage"===e.action?(this.focusFindInPageInput(),this.onNextClicked()):"findPreviousInPage"===e.action&&(this.focusFindInPageInput(),this.onPreviousClicked());break;case p.a.CLOSE_FIND_IN_PAGE_ACTION:this.setState(this._getStateFromStores(!1));break;case p.a.FIND_IN_PAGE_FOCUS:this.focusFindInPageInput()}if(this.refs.fipToolbar){const e=this.refs.fipToolbar.getBoundingClientRect();this.setState({hitOffset:e.height})}}}),A(this,"populateWithPageSelection",()=>{const e=Object(S.b)().id;r.a.utilities.getSelectedText(e,e=>{if(e.length>0){this.refs.inputText.value=e.substring(0,128),this.onFindInPageTextChanged()}this.focusFindInPageInput()})}),A(this,"scrollBy",e=>{const t=h.a.get(y.kWebpagesSmoothScrollingEnabled)?"smooth":"auto";v.default.tabs.executeScript({code:`window.scrollBy({ top: ${e}, behavior: '${t}' })`},()=>{v.default.runtime.lastError})}),A(this,"onKeyDown",e=>{if(!Object(C.d)(e)){const{innerHeight:t}=this.context;switch(e.key){case"PageDown":return void this.scrollBy(t);case"PageUp":return void this.scrollBy(-t)}}"m"===e.key&&Object(C.b)(e)&&this.onMatchCaseClicked(),"Enter"===e.key&&(Object(C.d)(e)?this.onPreviousClicked():Object(C.b)(e)?this.closeAndActivate():this.onNextClicked())}),A(this,"focusFindInPageInput",()=>{const e=this.refs.inputText;e&&(e.focus(),e.value&&e.select())}),A(this,"_getFindInPageText",()=>{const e=this.refs.inputText;return e?e.value:""}),A(this,"onMatchCaseClicked",()=>{this.props.onFindInPage(this._getFindInPageText(),!this.state.matchCase),this.setState(e=>({matchCase:!e.matchCase}))}),A(this,"onPreviousClicked",()=>{this.props.onFindNextInPage(this._getFindInPageText(),!0,this.state.matchCase)}),A(this,"onNextClicked",()=>{this.props.onFindNextInPage(this._getFindInPageText(),!1,this.state.matchCase)}),A(this,"onCloseClicked",()=>{b.a.closeFindInPageToolbar(this.props.pageId)}),A(this,"closeAndActivate",()=>{this.onCloseClicked();const e=i.a.getActiveWebView();e&&e.stopFinding("activate")}),A(this,"onFindInPageTextChanged",()=>{if(this._isIMEOpen)return;const e=this._getFindInPageText();this.state.findInPageText!==e&&(this.setState({findInPageText:e}),this.props.onFindInPage(e,this.state.matchCase))}),A(this,"_getStateFromStores",e=>{const t=f.a.getFindResultsForPage(this.props.pageId);let a={};return a=e?{...this.state,activeMatchOrdinal:t.activeMatchOrdinal,matchCase:t.matchCase||!1,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect}:{activeMatchOrdinal:t.activeMatchOrdinal,findInPageText:t.searchText,hitOffset:0,isFindInPageToolbarOpen:t.isFindInPageToolbarOpen,matchCase:t.matchCase,numberOfMatches:t.numberOfMatches,selectionRect:t.selectionRect},a}),this.state=this._getStateFromStores(!1)}componentDidMount(){f.a.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){f.a.removeChangeListener(this.onWebpageviewStoreChanged)}render(){if(g.a.isEnabled("glorified_find_in_page_results")){const e=i.a.getActiveWebView();e&&(0!==this.state.numberOfMatches&&this.state.isFindInPageToolbarOpen?(e.style.transition="filter 100ms",e.style.filter="brightness(95%)"):e.style.filter="brightness(100%)")}return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.CSSTransition,{classNames:"find-in-page",in:this.state.isFindInPageToolbarOpen,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:150},__source:{fileName:O,lineNumber:294}},n.a.createElement("div",{ref:"fipToolbar",onKeyDown:this.onKeyDown,className:w()("find-in-page","toolbar","toolbar-default",{"fip-nomatches":0===this.state.numberOfMatches&&this.state.findInPageText.length>0}),tabIndex:"-1",__source:{fileName:O,lineNumber:305}},n.a.createElement("span",{className:"fip-input-label",__source:{fileName:O,lineNumber:313}},Object(N.a)("Find in Page:")),n.a.createElement("div",{className:"fip-input-container toolbar toolbar-default",__source:{fileName:O,lineNumber:317}},n.a.createElement("input",{ref:"inputText",type:"search",onChange:this.onFindInPageTextChanged,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,defaultValue:this.state.findInPageText,__source:{fileName:O,lineNumber:318}}),n.a.createElement("span",{className:"fip-results",style:{display:this.state.findInPageText.length>0?"inline":"none"},__source:{fileName:O,lineNumber:326}},Object(N.a)("$1 of $2",[this.state.activeMatchOrdinal,this.state.numberOfMatches]))),n.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:O,lineNumber:338}},n.a.createElement(m.a,{className:"button-narrow",onClick:this.onPreviousClicked,image:k.N,tooltip:Object(N.a)("Previous match"),__source:{fileName:O,lineNumber:339}}),n.a.createElement(m.a,{className:"button-narrow",onClick:this.onNextClicked,image:k.M,tooltip:Object(N.a)("Next match"),__source:{fileName:O,lineNumber:345}})),n.a.createElement(m.a,{onClick:this.onCloseClicked,image:k.L,tooltip:Object(N.a)("Cancel search"),__source:{fileName:O,lineNumber:353}}),n.a.createElement("label",{className:"toolbar toolbar-group",__source:{fileName:O,lineNumber:359}},n.a.createElement("input",{type:"checkbox",checked:this.state.matchCase,onChange:this.onMatchCaseClicked,__source:{fileName:O,lineNumber:360}}),n.a.createElement("span",{className:"fip-checkbox-label",__source:{fileName:O,lineNumber:363}},Object(N.a)("Match Case"))))),g.a.isEnabled("glorified_find_in_page_results")&&0!==this.state.numberOfMatches&&n.a.createElement(u,{tabId:this.props.pageId,selectionRect:this.state.selectionRect,hitOffset:this.state.hitOffset,hitText:this.state.findInPageText,__source:{fileName:O,lineNumber:374}}))}}A(T,"contextType",_.a);t.a=T},function(e,t,a){"use strict";var i=a(0),s=a(29),n=a.n(s),r=a(17),o=a.n(r),l=a(44),c=a(155),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenuItem.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.PureComponent{constructor(...e){super(...e),u(this,"_handleMouseUp",e=>{e.button!==l.a.kLeft?e.stopPropagation():this.props.onItemActivated(this.props.item,e)}),u(this,"_killEvent",e=>{e.preventDefault(),e.stopPropagation()}),u(this,"_handleMouseOver",()=>{this.props.setSelected(this.props.index)}),u(this,"_getDisplayName",()=>i.createElement("span",{__source:{fileName:d,lineNumber:53}},this.props.item.name)),u(this,"_getDisplayShortcut",()=>{if(this.props.item.shortcut){const e=this.props.item.noPrettifying?this.props.item.shortcut:Object(c.b)(this.props.item.shortcut);return i.createElement("span",{className:"shortcut",__source:{fileName:d,lineNumber:61}},e)}return null}),u(this,"_getIcon",()=>{if(this.props.item.iconSVG)return this.props.item.iconSVG;{let e;return e=this.props.item.icon?this.props.item.icon:this.props.item.url?"chrome://favicon/origin/"+this.props.item.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","<img src='"+e+"'>"}}),u(this,"_renderItem",()=>{const e=this.props.item.type||"Normal";return i.createElement("li",{className:o()({selectedItem:this.props.isSelected}),onMouseOver:this._handleMouseOver,onMouseDown:this._killEvent,onMouseUp:this._handleMouseUp,__source:{fileName:d,lineNumber:91}},"Normal"===e&&i.createElement("a",{tabIndex:"0",__source:{fileName:d,lineNumber:98}},i.createElement("label",{className:"menu-icon",dangerouslySetInnerHTML:{__html:this._getIcon()},__source:{fileName:d,lineNumber:99}}),i.createElement("label",{className:"menu-label",__source:{fileName:d,lineNumber:101}},this._getDisplayName(),this._getDisplayShortcut())),"Checkbox"===e&&i.createElement("a",{tabIndx:"0",__source:{fileName:d,lineNumber:109}},i.createElement("label",{__source:{fileName:d,lineNumber:110}},i.createElement("span",{className:"menu-icon",__source:{fileName:d,lineNumber:111}},i.createElement("input",{type:"checkbox",checked:this.props.item.checked,readOnly:!0,__source:{fileName:d,lineNumber:112}})),i.createElement("span",{className:"menu-label",__source:{fileName:d,lineNumber:115}},this._getDisplayName()))),"Radio"===e&&i.createElement("a",{tabIndex:"0",__source:{fileName:d,lineNumber:121}},i.createElement("label",{__source:{fileName:d,lineNumber:122}},i.createElement("span",{className:"menu-icon",__source:{fileName:d,lineNumber:123}},i.createElement("input",{className:"menu-icon",type:"radio",name:"radiomenu",checked:this.props.item.checked,readOnly:!0,__source:{fileName:d,lineNumber:124}})),i.createElement("span",{className:"menu-label",__source:{fileName:d,lineNumber:127}},this._getDisplayName()))))}),u(this,"_renderDivider",()=>i.createElement("li",{className:"divider",__source:{fileName:d,lineNumber:136}}))}UNSAFE_componentWillReceiveProps(e){if(e.isSelected&&!this.props.isSelected){const e=n.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.scrollIntoViewIfNeeded(!1)}}render(){return"Separator"===this.props.item.type?this._renderDivider():this._renderItem()}}var m=h,p=a(50),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\dropdown\\DropdownMenu.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends i.PureComponent{constructor(e){super(e),b(this,"_takeFocus",e=>{e&&e.stopPropagation&&e.stopPropagation();const t=n.a.findDOMNode(this);if(t&&t instanceof HTMLElement){const e=t.querySelector(".menu .focusTrap");e&&e instanceof HTMLButtonElement&&e.focus()}}),b(this,"_onCancel",()=>{this._close()}),b(this,"_onKeyboardFocusIn",()=>{const e=n.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.addEventListener("keydown",this._handleKeyboardNavigation)}),b(this,"_onKeyboardFocusOut",()=>{const e=n.a.findDOMNode(this);e&&e instanceof HTMLElement&&e.removeEventListener("keydown",this._handleKeyboardNavigation)}),b(this,"_handleKeyboardNavigation",e=>{switch(e.preventDefault(),e.which){case p.a.KEY_RETURN:const t=this.state.selectedItemIndex;t>=0&&t<=this._getMaxMenuIndex()&&this._onItemActivated(this.props.items[t],e);break;case p.a.KEY_ESCAPE:this._onCancel();break;case p.a.KEY_UP:this._stepSelection(!1);break;case p.a.KEY_DOWN:this._stepSelection(!0);break;default:e.stopPropagation()}}),b(this,"_stepSelection",e=>{let t=this.state.selectedItemIndex;if(0!==this.props.items.filter(e=>"Separator"!==e.type).length){do{t+=e?1:-1,t=(t+this.props.items.length)%this.props.items.length}while("Separator"===this.props.items[t].type);this._setSelected(t)}}),b(this,"_getMaxMenuIndex",()=>this.props.items.length-1),b(this,"_setSelected",e=>{"Separator"!==this.props.items[e].type&&e<=this._getMaxMenuIndex()&&this.setState({selectedItemIndex:e})}),b(this,"_close",()=>{this.props.onClosed()}),b(this,"_onClicked",e=>{e.preventDefault(),e.stopPropagation();const t=e.nativeEvent.target;t&&t instanceof HTMLElement&&t.focus()}),b(this,"_onItemActivated",(e,t)=>{t.stopPropagation(),this.props.onItemActivated(e)}),b(this,"_renderMenu",()=>this.props.items.map((e,t)=>i.createElement(m,{key:t,index:t,item:e,isSelected:this.state.selectedItemIndex===t,setSelected:this._setSelected,onItemActivated:this._onItemActivated,__source:{fileName:g,lineNumber:140}}))),this.state={selectedItemIndex:-1}}render(){return i.createElement("nav",{className:o()({"platform-popups":!1,menu:!0,horizontal:!1,opensubmenu:!1,open:!0}),style:this.props.minWidth?{minWidth:this.props.minWidth}:{},onMouseOver:this._takeFocus,onMouseDown:this._onClicked,onMouseUp:this._onClicked,onBlur:this._onCancel,tabIndex:"-1",__source:{fileName:g,lineNumber:152}},i.createElement("input",{type:"text",className:"focusTrap",autoFocus:!0,onFocus:this._onKeyboardFocusIn,onBlur:this._onKeyboardFocusOut,__source:{fileName:g,lineNumber:165}}),i.createElement("ul",{__source:{fileName:g,lineNumber:171}},this._renderMenu()))}}t.a=f},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(17),o=a.n(r),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesImageAttachment.jsx";function c({onDelete:e,onContextMenu:t,item:a,onOpen:i,onDragStart:r,draggable:c}){return s.a.createElement("div",{className:"AttachmentItem",onDragStart:e=>r(e,a),draggable:c,__source:{fileName:l,lineNumber:18}},s.a.createElement("img",{className:"AttachmentItem-Image",src:a.content,__source:{fileName:l,lineNumber:23}}),s.a.createElement("button",{className:"AttachmentItem-DeleteButton",title:Object(n.a)("Remove attachment"),onClick:()=>e(),tabIndex:"-1",__source:{fileName:l,lineNumber:24}}),s.a.createElement("button",{className:o()({"AttachmentItem-ViewOverlayButton":!0,"dragging-enabled":c}),title:Object(n.a)("View attachment"),onContextMenu:t,onClick:i,__source:{fileName:l,lineNumber:28}}))}var d=a(39),u=a(12),h=a(25),m=a(60),p=a(6),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesAttachmentContainer.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e,t,a){const i={inCurrent:t,inBackground:a};u.a.openURL(e.content,i)}function _(e,t){const a={inNewWindow:!0,incognito:t};u.a.openURL(e.content,a)}function N(e,t){const a={...d.a.getOpenOptionsFromModifierKeys(t),bookmarks:[{url:e.content,id:void 0}]};d.a.open(a,!0)}class v extends s.a.Component{constructor(...e){super(...e),b(this,"onContextMenu",(e,t)=>{const a=[{items:[{handler:f.bind(null,e,!0,!1),...Object(p.a)("Current Tab")},{handler:f.bind(null,e,!1,!1),...Object(p.a)("open in","New Tab")},{handler:f.bind(null,e,!1,!0),...Object(p.a)("Background Tab")},{name:"---"},{handler:_.bind(null,e,!1),...Object(p.a)("open in","New Window")},{handler:_.bind(null,e,!0),...Object(p.a)("open in","Private Window")}],ellipsis:!0,...Object(p.a)("Open in")},{name:"---"},{handler:(e=>{e.checksum&&this.props.onInsertMarkdown(e.checksum)}).bind(null,e),...Object(p.a)("Insert Markdown"),visible:!!this.props.onInsertMarkdown},{handler:this.props.onRemoveAttachment.bind(null,e),...Object(p.a)("verb","Remove")}];Object(m.a)(this.context.vivaldiWindowId,a)(t)}),b(this,"onDragStart",(e,t)=>{if(!t.checksum||!this.props.noteId)return;const a=`${this.props.noteId}/${t.checksum}`;"html"===this.props.dragFormat?e.dataTransfer.setData("text/html",`<img src="chrome://vivaldi-data/notes-attachment/${a}" />`):e.dataTransfer.setData("text/plain",`attachment:${a}`)})}render(){const{attachments:e}=this.props;return s.a.createElement("div",{className:"NotesAttachments",__source:{fileName:g,lineNumber:106}},e.map((e,t)=>s.a.createElement(c,{key:e.checksum,item:e,onContextMenu:this.onContextMenu.bind(null,e),onOpen:N.bind(null,e),onDelete:this.props.onRemoveAttachment.bind(null,e),onDragStart:this.onDragStart,draggable:!!this.props.onInsertMarkdown,__source:{fileName:g,lineNumber:108}})))}}b(v,"contextType",h.a),b(v,"defaultProps",{onInsertMarkdown:()=>Promise.resolve(),dragFormat:"url"});t.a=v},function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return g}));var i=a(103),s=a(202),n=a(239),r=a(110),o=a(97),l=a(72),c=a(80),d=a(7),u=a(21),h=a(233),m=a(115);function p(e){e&&e.id?d.default.runtime.sendMessage({getNavigationState:{tabId:e.id}},t=>{if(void 0!==t){const a=i.a.tabToPage({id:e.id});s.a.copyFastForwardState(a,t.fastForwardState),r.a.setNavigationState(a.id,new u.Map(t.navigationState)),r.a.setSSLState(a,t.sslInfo.state,t.sslInfo.issuer),l.a.copyUrlfieldState(a,t.urlbarState);for(const[e,i]of Object.entries(t.pageScripts))i&&h.a.addContentScript(a.id,e);t.blockedPopups.forEach(e=>r.a.addBlockedPopupEvent(a,e))}}):console.warn("Need a tab to sync")}function g(e,t){const a=i.a.tabToPage({id:e});d.default.runtime.sendMessage({setNavigationState:{blockedPopups:o.a.getBlockedPopups(a),fastForwardState:n.a.getState(a),navigationState:o.a.getNavigationInfo(a.id),pageScripts:m.a.getPageScripts(a.id),sslInfo:o.a.getSSLInfo(a),tabId:e,urlbarState:c.a.getUrlfieldStateFromId(a.id)}})}},function(e,t,a){"use strict";var i=a(168),s=a.n(i),n=a(11),r=a(4),o=a(21);const l=Object(o.Record)({href:"",title:"",type:""});class c extends s.a{constructor(){super(n.a)}getInitialState(){return Object(o.Map)()}reduce(e,t){switch(t.actionType){case r.a.RSS_FEEDS_FOUND:{const{tabId:a,feeds:i}=t;return e.set(a,Object(o.List)(i).map(l))}case"PAGE_CLOSE":{const{pages:a}=t;return a.forEach(t=>{e=e.delete(t.id)}),e}case r.a.RSS_CLEAR_FEEDS:{const{tabId:a}=t;return e.delete(a)}default:return e}}}t.a=new c},function(e,t,a){"use strict";var i=a(18),s=a.n(i);t.a=function(e,t,a){t=t||"#006ed7",a=a||"#FFFFFF",this.points=[],this.points_buffer=[],this.stopped=!0,this.canvas=e,this.init_points=function(){this.points=[],this.points_buffer=[];var e={x:40,y:40};this.points.push(e);var t,a=function(e){var t,a=0,i=0,s=0,n=0,r=0,o=0;for(t=0;t<e.length;t++)"0"===e[t]?r+=1:"4"===e[t]&&(r-=1),r>a&&(a=r),r<i&&(i=r);for(t=0;t<e.length;t++)"2"===e[t]?o-=1:"6"===e[t]&&(o+=1),o>s&&(s=o),o<n&&(n=o);return i>0&&(i=0),n>0&&(n=0),120/Math.max(Math.abs(a-i),Math.abs(s-n))}(this.sequence);for(t=0;t<this.sequence.length;t++){var i={};"0"===this.sequence[t]?(i.x=this.points[t].x+a,i.y=this.points[t].y):"2"===this.sequence[t]?(i.x=this.points[t].x,i.y=this.points[t].y+a):"4"===this.sequence[t]?(i.x=this.points[t].x-a,i.y=this.points[t].y):"6"===this.sequence[t]&&(i.x=this.points[t].x,i.y=this.points[t].y-a),this.points.push(i)}var s=this.points[0].x,n=this.points[0].y,r=this.points[0].x,o=this.points[0].y;for(t=1;t<this.points.length;t++)this.points[t].x<s&&(s=this.points[t].x),this.points[t].x>r&&(r=this.points[t].x),this.points[t].y<n&&(n=this.points[t].y),this.points[t].y>o&&(o=this.points[t].y);if(s<40){for(t=0;t<this.points.length;t++)this.points[t].x+=-(s-40);r+=-(s-40)}if(n<40){for(t=0;t<this.points.length;t++)this.points[t].y+=-(n-40);o+=-(n-40)}for(t=0;t<this.points.length;t++)this.points[t].x+=(160-r)/2,this.points[t].y+=(160-o-8)/2;for(t=0;t<this.points.length;t++){var l={x:this.points[t].x,y:this.points[t].y};this.points_buffer.push(l)}},this.reset_points=function(){var e;for(e=0;e<this.points_buffer.length;e++)this.points[e].x=this.points_buffer[e].x,this.points[e].y=this.points_buffer[e].y},this.draw_point=function(e){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,8,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fillStyle=t,this.ctx.fill()},this.idx=0,this.timeout=0,this.draw_segment=function(){if(!this.stopped){if(this.idx>=this.points.length)return this.timeout>=50?(this.timeout=0,this.idx=0,this.reset_points(),void(this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))):(this.ctx.fillStyle=s()(a).alpha(.15).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.timeout++,void(this.requestId=requestAnimationFrame(this.draw_segment.bind(this))));this.timeout=0,this.ctx.fillStyle=s()(a).alpha(.1).css(),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.draw_point(this.points[this.idx]),!this.points[this.idx+1]||this.points[this.idx].x===this.points[this.idx+1].x&&this.points[this.idx].y===this.points[this.idx+1].y?(this.idx++,this.draw_segment()):(this.points[this.idx].x<this.points[this.idx+1].x?this.points[this.idx].x+=4:this.points[this.idx].x>this.points[this.idx+1].x&&(this.points[this.idx].x-=4),this.points[this.idx].y<this.points[this.idx+1].y?this.points[this.idx].y+=4:this.points[this.idx].y>this.points[this.idx+1].y&&(this.points[this.idx].y-=4),this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))}},this.clear_canvas=function(){this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},this.start=function(e){this.sequence=e,this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=3,this.clear_canvas(),this.init_points(),this.stopped&&(this.stopped=!1,this.requestId=requestAnimationFrame(this.draw_segment.bind(this)))},this.stop=function(){this.stopped=!0,this.current_point_index=0,this.timeout=0,this.idx=0,cancelAnimationFrame(this.requestId)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a(0),s=a(240),n=a(27),r=a(25),o=a(31),l=a(183),c=a(390),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\PlainTextEditor.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.Component{constructor(e){super(e),u(this,"handleContentLoad",()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(),this.props.onContentLoad&&this.props.onContentLoad())}),u(this,"getContentAsBodyParts",()=>{const e=this.webview;return e?new Promise((t,a)=>{e.executeScript({code:"document.body.innerText"},e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"text",content:e[0],charset:"UTF-8"}]):a("PlainTextEdit.getContentAsBodyParts: Couldn't get content from Webview")})}):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")}),u(this,"onClick",e=>{switch(e){case"createLink":this.props.handleLinkEvent(e);break;default:this.execCommand(e,""),this.props.updateButtonState&&this.props.updateButtonState()}}),u(this,"onChange",(e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownState&&this.props.updateDropdownState()}),u(this,"setContent",e=>{this.webview&&this.webview.executeScript&&this.webview.executeScript({code:`document.body.innerText = unescape('${escape(e)}');`},this.setStyle)}),u(this,"setStyle",()=>{this.webview&&this.webview.executeScript&&this.webview.executeScript({code:`document.head.innerHTML = unescape('<style>${escape(Object(c.c)())}</style>');`})}),u(this,"debouncedUpdateState",Object(l.a)(()=>{this.props.updateButtonState&&this.props.updateButtonState(),this.props.updateDropdownState&&this.props.updateDropdownState()},100)),u(this,"handleConsoleMessage",e=>{const[t,a]=e.message.split(" ",2);switch(t){case"caretState":this.onCaretStateEvent(a);break;case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"createLink":this.props.handleLinkEvent(t,a);break;default:throw new Error(e.message)}}),u(this,"setZoomLevel",e=>{const t=this.webview;t&&(t.setZoomMode("per-view"),t.setZoom(e))}),this.state={content:e.markDown||"",startOffsetOnNewline:0,createLinkModalOpen:!1,caretState:{bold:!1,italic:!1,strikeThrough:!1,formatBlock:"p",insertOrderedList:!1,insertUnorderedList:!1}},this.markdownFormatter=new s.a}componentDidMount(){this.webview&&this.webview.addEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.addEventListener("contentload",this.handleContentLoad),n.a.addListener("THEME_CURRENT",this.setStyle)}componentWillUnmount(){this.webview&&this.webview.removeEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.removeEventListener("contentload",this.handleContentLoad),n.a.removeListener("THEME_CURRENT",this.setStyle)}onCaretStateEvent(e){if(!e)return;let t;try{t=JSON.parse(e)}catch(e){return}this._updateCaretState(t)}_updateCaretState(e){this.setState(t=>({caretState:{...t.caretState,...e}}),()=>this.props.updateButtonState&&this.props.updateButtonState())}focus(){this.webview&&this.webview.focus()}hasFocus(){const{document:e}=this.context;return!!this.webview&&this.webview===e.activeElement}execCommand(e,t){this.webview&&this.webview.contentWindow&&this.webview.contentWindow.postMessage&&this.webview.contentWindow.postMessage({type:"BUTTON_CLICK",command:e,value:t},o.m)}render(){const{disabled:e,hidden:t}=this.props;return i.createElement("div",{className:"editor-html",__source:{fileName:d,lineNumber:248}},i.createElement("webview",{className:"editor-webview",partition:"persist:markdowneditor",name:"markdowneditor",ref:e=>this.webview=e,style:t||e?{display:"none"}:{},allowtransparency:"on",src:"components/notes/markdowneditor/markdowneditor.html",__source:{fileName:d,lineNumber:249}}))}}u(h,"contextType",r.a)},function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var i=a(0),s=a(18),n=a.n(s),r=a(50),o=a(12),l=a(27),c=a(7),d=a(5),u=a(449),h=a(31),m=a(183),p=a(390);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends i.Component{constructor(...e){super(...e),g(this,"theme",""),g(this,"getContentAsBodyParts",()=>{const e=this.webview;return e?new Promise((t,a)=>{e.executeScript({code:"document.body.innerHTML"},e=>{e&&Array.isArray(e)&&"string"==typeof e[0]?t([{type:"html",content:e[0],charset:"UTF-8"}]):a("RichTextEdit.getContentAsBodyParts: Couldn't get contet from Webview")})}):Promise.reject("RichTextEdit.getContentAsBodyParts: Webview doesn't exist")}),g(this,"postMessage",e=>{this.webview&&this.webview.contentWindow&&this.webview.contentWindow.postMessage&&this.webview.contentWindow.postMessage(e,h.m)}),g(this,"setContent",(e,t)=>{const a=t?"document.body.innerText":"document.body.innerHTML";this.webview&&this.webview.executeScript&&this.webview.executeScript({code:`${a} = unescape('${escape(e)}');`})}),g(this,"setStyle",e=>{if(""===this.theme||this.theme!==e){this.theme=e;const t=Object(p.a)();this.postMessage({type:"SET_STYLE",isDark:n()(t.colorBg).luminance()<=.4,isNote:this.props.isNote,css:this.getCSS()}),this.contentLoadHandled=!1}}),g(this,"debouncedUpdateState",Object(m.a)(()=>{this.props.updateButtonState(),this.props.updateDropdownAndColorState()},100)),g(this,"handleConsoleMessage",e=>{const[t,a=""]=e.message.split(" ",2);switch(t){case"selectionchange":this.debouncedUpdateState();break;case"input":this.debouncedUpdateState(),this.props.onChange(e);break;case"linkupdate":case"createLink":case"editLink":case"copyLink":case"unlink":this.props.handleLinkEvent(t,a);break;default:throw new Error(e.message)}}),g(this,"handleLinkClicked",e=>{e.targetUrl.startsWith("#")||(o.a.openURL(e.targetUrl),e.preventDefault())}),g(this,"handleContentLoad",()=>{this.contentLoadHandled||(this.contentLoadHandled=!0,this.setStyle(this.theme),this.props.onContentLoad&&this.props.onContentLoad())}),g(this,"keyEventListener",(e,t,a,i,s)=>{1===a&&t&&i===r.a.KEY_TAB&&document.activeElement===this.webview&&this.props.focusPreviousElement()}),g(this,"execCommand",(e,t)=>{this.webview&&this.webview.executeScript({code:`document.execCommand('${e}', false, '${t}');`}),setTimeout(()=>this.webview&&this.webview.focus(),0)}),g(this,"onChange",(e,t)=>{this.execCommand(e,t.currentTarget.value),this.props.updateDropdownAndColorState()}),g(this,"onClick",e=>{switch(e){case"createLink":this.props.handleLinkEvent("createLinkClicked");break;case"insertImage":this.insertImage();break;default:this.execCommand(e,""),this.props.updateButtonState()}}),g(this,"insertImage",()=>{c.default.fileSystem.chooseEntry({type:"openFile",accepts:[{mimeTypes:["image/*"]}]},e=>{!c.default.runtime.lastError&&e&&e.file(t=>{const a=URL.createObjectURL(t);this.execCommand("insertHTML",`<img src="${a}" ${u.b}="${t.type}" ${u.a}="${e.name}" />`)})})}),g(this,"unlink",()=>{this.execCommand("unlink",!1)}),g(this,"selectSurrounding",()=>{this.postMessage({type:"SELECT_SURROUNDING"})}),g(this,"getCSS",()=>this.props.isNote?Object(p.c)():Object(p.b)()),g(this,"setZoomLevel",e=>{const t=this.webview;t&&(t.setZoomMode("per-view"),t.setZoom(e))})}focus(){return this.webview&&this.webview.focus()}hasFocus(){return!!this.webview&&this.webview===document.activeElement}componentDidMount(){l.a.addListener("THEME_CURRENT",this.setStyle),this.webview&&this.webview.addEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.addEventListener("contentload",this.handleContentLoad),this.webview&&this.webview.addEventListener("newwindow",this.handleLinkClicked),d.a.tabsPrivate.onKeyboardChanged.addListener(this.keyEventListener)}componentWillUnmount(){l.a.removeListener("THEME_CURRENT",this.setStyle),this.webview&&this.webview.removeEventListener("consolemessage",this.handleConsoleMessage),this.webview&&this.webview.removeEventListener("contentload",this.handleContentLoad),this.webview&&this.webview.removeEventListener("newwindow",this.handleLinkClicked),d.a.tabsPrivate.onKeyboardChanged.removeListener(this.keyEventListener)}render(){return i.createElement("webview",{className:"editor-webview",name:"richtexteditor",ref:e=>this.webview=e,style:this.props.hidden||this.props.disabled?{display:"none"}:{},allowtransparency:"on",src:"components/notes/richtexteditor/richtexteditor.html",__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\RichTextEditor.jsx",lineNumber:260}})}}g(b,"defaultProps",{hidden:!1})},,,function(e,t,a){"use strict";(function(e){var i=a(0),s=a.n(i),n=a(2),r=a(68),o=a(15),l=a.n(o),c=a(13),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\DateInput.jsx";function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=function(e,t){return"0"!==e&&e.length<t?e.padStart(t,"0"):e.length>t?e.slice(e.length-t):e};class p extends s.a.PureComponent{constructor(t){super(t),h(this,"_focused",!1),h(this,"hidden",s.a.createRef()),h(this,"day",s.a.createRef()),h(this,"month",s.a.createRef()),h(this,"year",s.a.createRef()),h(this,"inputPosition",-1),h(this,"setCache",()=>{const[e="",t="",a=""]=this.props.value.split("-");this.setState({year:e,month:t,day:a})}),h(this,"getOrder",()=>{const e=this.getFormat().match(/(d+|m+|y+)/gi);if(!e)throw new Error("Incompatible date format found.");return e.map(e=>e.replace(/^d+/i,"day").replace(/^m+/i,"month").replace(/^y+/i,"year"))}),h(this,"getFormat",()=>this.props.format||l.a.localeData().longDateFormat("L")),h(this,"processChange",e=>{this.props.onChange(e)}),h(this,"select",e=>{this.inputPosition=-1,e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())}),h(this,"focus",()=>{const e=this[this._template[0]];e&&e.current.focus()}),h(this,"moveFocus",e=>{const{key:t,target:a}=e,i=a.dataset.type,s=this._template.indexOf(i);if(t&&("ArrowLeft"===t||"ArrowRight"===t||"ArrowDown"===t))switch(t){case"ArrowRight":e.preventDefault();const t=this[this._template[s+1]];return void(t&&t.current.select());case"ArrowLeft":e.preventDefault();const a=this[this._template[s-1]];return void(a&&a.current.select());case"ArrowDown":return void(e.altKey&&(e.preventDefault(),this.hidden.current&&this.hidden.current.focus()))}if(isNaN(Number(t)))setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()},16);else if(0!==this.inputPosition)-1===this.inputPosition?this.inputPosition="year"!==i?0:(this.getFormat().match(/y/gi)||"YYYY").length-2:this.inputPosition--;else{this.inputPosition=-1;const e=this._template[s+1]||i;setTimeout(()=>{this[e]&&this[e].current.select()},16)}}),h(this,"onFocus",t=>{if(t.persist(),t.preventDefault(),this._focused)return;const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onFocus&&a instanceof HTMLElement&&Object(r.a)(a)&&(this._focused=!0,this.props.onFocus(t))})}),h(this,"onBlur",t=>{t.preventDefault(),t.persist();const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onBlur&&a instanceof HTMLElement&&!Object(r.a)(a)&&(this._focused=!1,this.props.onBlur(t))})}),h(this,"keepFocusWithin",e=>{e.preventDefault(),Object(r.a)(e.target.nextElementSibling)||this.focus()}),h(this,"onChangeDate",e=>{const{type:t}=e.target.dataset;let a=e.target.value;const i=this.props.value.split("-"),s=e.nativeEvent.data,n="year"===t?9999:"month"===t?12:l()(this.props.value).daysInMonth();parseInt(a)>n?a=s?n:1:parseInt(a)<1&&"0"!==s&&(a=s?1:n);const r="year"!==t?2:(this.getFormat().match(/y/gi)||"YYYY").length;this.setState({[t]:m(a.toString(),r)}),i[["year","month","day"].indexOf(t)]=m(a.toString(),r);const o=l()(i.join("-"));if(o.isValid()){if(this.props.min&&o.isBefore(l()(this.props.min))||this.props.max&&o.isAfter(l()(this.props.max)))return;const e=this.hidden.current,t=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;e&&t&&(t.call(e,o.format("YYYY-MM-DD")),e.dispatchEvent(new Event("input",{bubbles:!0})))}}),h(this,"renderFields",()=>{let e=this.getFormat().match(/([^d+|m+|y+])/gi);e||(e=["/","/"]);const t=[this._template[0],e[0],this._template[1],e[1],this._template[2]],a={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.moveFocus,onChange:this.onChangeDate,disabled:this.props.disabled};return s.a.createElement("span",{className:"faux date",__source:{fileName:d,lineNumber:283}},t.map((e,t)=>{switch(e.toLowerCase()){case"day":return s.a.createElement("input",u({},a,{key:"dd_"+t,className:"dateInputDay",type:"number",ref:this.day,"data-type":"day",tabIndex:this.props.tabIndex,placeholder:Object(n.a)("dd"),value:this.state.day,__source:{fileName:d,lineNumber:288}}));case"month":return s.a.createElement("input",u({},a,{key:"mm_"+t,className:"dateInputMonth",type:"number",ref:this.month,"data-type":"month",tabIndex:this.props.tabIndex,placeholder:Object(n.a)("date","mm"),value:this.state.month,__source:{fileName:d,lineNumber:303}}));case"year":return s.a.createElement("input",u({},a,{key:"yy_"+t,className:"dateInputYear",type:"number",ref:this.year,"data-type":"year",tabIndex:this.props.tabIndex,placeholder:Object(n.a)("yyyy"),value:this.state.year,__source:{fileName:d,lineNumber:318}}));default:return s.a.createElement("span",{key:"separator_"+t,className:"dateInputSeparator",__source:{fileName:d,lineNumber:333}},e)}}))}),this._template=this.getOrder();const[a="",i="",o=""]=this.props.value.split("-");this.state={year:a,month:i,day:o}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}render(){const{format:e,onChange:t,tabIndex:a,onFocus:i,onBlur:n,...r}=this.props;return s.a.createElement("span",{className:"dateInput",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:d,lineNumber:347}},s.a.createElement("input",u({},r,{type:"date",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:d,lineNumber:352}})),this.renderFields(),s.a.createElement("span",{className:"arrowDown",dangerouslySetInnerHTML:{__html:c.j.medium},__source:{fileName:d,lineNumber:362}}))}}t.a=p}).call(this,a(64))},function(e,t,a){"use strict";t.a=(e,t)=>Math.max(0,Math.min(e.left+e.width,t.left+t.width)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.top+e.height,t.top+t.height)-Math.max(e.top,t.top))},,function(e,t,a){"use strict";var i=a(8),s=a(1);const n={setStartpageBackgroundFromUrl:function(e){var t=new XMLHttpRequest,a=new FileReader;t.open("GET",e,!0),t.responseType="blob",t.addEventListener("load",()=>{200===t.status&&(a.onload=e=>{i.a.set(s.kStartpageImagePathCustom,e.target.result),this.enableUserDefinedStartpageImage()},a.readAsDataURL(t.response))},!1),t.send()},enableUserDefinedStartpageImage:function(){i.a.set(s.kStartpageImagePath,"user_defined"),i.a.set(s.kStartpageImageEnable,!0)}};t.a=n},,function(e,t,a){"use strict";var i=a(11),s=a(4);const n=new class{setUtilityWebView(e){i.a.dispatch({actionType:s.a.WEBVIEW_SET_UTILITY_VIEW,webview:e})}};t.a=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='\x3c!-- Monochrome --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22">\n  <path d="M18.6 3.4C17.1 2 14.9 2 11 2S4.9 2 3.4 3.4C2 4.9 2 7.1 2 11s0 6.1 1.4 7.6C4.9 20 7.1 20 11 20s6.1 0 7.6-1.4C20 17.1 20 14.9 20 11s0-6.1-1.4-7.6zm-2.2 5.2l-4.2 7.2c-.3.4-.6.7-1.1.8-.6 0-1-.2-1.3-.7-.9-1.5-1.7-3-2.6-4.5-.5-.9-1.1-1.8-1.6-2.8-.6-.9 0-2 1.1-2.1.6 0 1 .2 1.3.7.4.7.8 1.3 1.2 2 .3.5.6 1 .8 1.5.4.7 1 1.1 1.8 1.1 1.2.1 2.2-.8 2.4-2v-.2c0-.4-.1-.7-.2-1-.4-.9 0-1.8 1-2 .8-.2 1.6.4 1.7 1.2 0 .2-.1.5-.3.8z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22">\n    <path d="M3 5h16v2H3zM3 10h16v2H3zM3 15h16v2H3z"/>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(88),a(62),a(9),a(10),a(16),a(52),a(142),a(280),a(353),a(1);a(5)},,,,,,,function(e,t,a){"use strict";t.a=function(e){const t=e.replace(/^.*?\:\/\//,"");return!!t.includes('"')&&(!t.includes("/")||t.indexOf('"')<t.indexOf("/"))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(11);class s{static setMediaState(e,t){i.a.dispatch({actionType:"PAGE_SET_MEDIASTATE",tabId:e,mediastate:t})}}},function(e,t,a){"use strict";(function(e){t.a=function(t){const a=t.match(/^(data:)(.*?)?(;charset=.*?)?(;base64)?,(.*)$/);if(!a)return t;const i=a[2],s=a[5],n=new e(s,"base64").toString("binary"),r=new Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);const o=new Uint8Array(r),l=new Blob([o],{type:i});return URL.createObjectURL(l)}}).call(this,a(886).Buffer)},function(e,t,a){"use strict";function i(e,t){switch(e){case"onCreated":case"onActivated":return t[0].windowId;case"onUpdated":return t[2].windowId;case"onRemoved":case"onMoved":return t[1].windowId;case"onDetached":return t[1].oldWindowId;case"onAttached":return t[1].newWindowId;default:return}}a.d(t,"a",(function(){return i}))},function(e,t,a){"use strict";var i=a(61);t.a=e=>{const t=Object(i.parse)(e,!1);return[t.href.replace(t.search,""),t.query]}},function(e,t,a){"use strict";(function(e){var i=a(39),s=a(37),n=a(951),r=a(952),o=a(22),l=a(953),c=a(88),d=a(86),u=a(50),h=a(40),m=a(9),p=a(8),g=a(10),b=a(0),f=a.n(b),_=a(29),N=a.n(_),v=a(207),E=a(32),w=a(25),S=a(2),C=a(68),k=a(60),y=a(140),O=a(6),A=a(1),T="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbar.jsx";function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D extends f.a.PureComponent{constructor(t,a){super(t),I(this,"acceptEnterId",""),I(this,"draggedId",""),I(this,"dropMode",{support:!1,copy:!1}),I(this,"timer",null),I(this,"_onStoreChange",()=>{const e=o.a.getBookmarksBarNodes();this.setState(t=>{const a=this._getRenderedItems(e,t.sorting,!0===t.newItemAdded?t.editId:"");return{nodes:e,renderedArray:a,cutIds:o.a.getCutIds()}})}),I(this,"_onCommandSpy",()=>{Object(C.a)(N.a.findDOMNode(this))||this.state.renderedArray.length>0&&this._moveFocus(this.state.renderedArray[0].id,"current",!0)}),I(this,"_getRenderedItems",(e,t,a)=>{const i=Object(y.a)(e);if(i.length>0&&t&&t.sortOrder>=E.a.ASCENDING_SORT&&(E.a.treeSort(i,E.a.getDefaultComparator(t.sortOrder,t.sortField)),""!==a)){const e=i.findIndex(e=>e.id===a);-1!==e&&i.splice(0,0,i.splice(e,1)[0])}return i}),I(this,"_handleKeyDown",e=>{e.keyCode===u.a.KEY_ESCAPE&&this._resetDragover()}),I(this,"_onButtonRendered",(e,t)=>{const a=this.state.renderedArray;for(let i=0;i<a.length;i++)if(a[i].id===e){a[i].buttonWidth!==t&&""===this.state.editId&&this.setState(e=>{const a=e.renderedArray.slice();return a[i].buttonWidth=t,{renderedArray:a}});break}}),I(this,"_onResize",e=>{const t=e[0].target;this.setState({maxWidth:Math.floor(t.clientWidth)})}),I(this,"_addActiveTab",()=>{s.a.bookmarkPageInFolder(m.a.getActivePage(),o.a.getBookmarkBarFolderId(),0)}),I(this,"_getItemInsertIndex",e=>{const t=this.state.renderedArray.length;return"number"!=typeof e||t<e?t:e}),I(this,"_createNewBookmark",()=>{h.a.showBookmarkDialog({mode:"addbookmark",id:o.a.getBookmarkBarFolderId(),index:0})}),I(this,"_createNewFolder",()=>{h.a.showBookmarkDialog({mode:"addfolder",id:o.a.getBookmarkBarFolderId(),index:0})}),I(this,"_createNewSeparator",e=>{s.a.createSeparator(o.a.getBookmarkBarFolderId(),this._getItemInsertIndex(e))}),I(this,"_resetDragover",()=>{this.setState({dragover:{id:"",position:"",index:0}})}),I(this,"_onEditChanged",e=>{""===e?this.setState(e=>({renderedArray:this._getRenderedItems(e.nodes,e.sorting,""),newItemAdded:!1,editId:""})):this.setState({editId:e})}),I(this,"_onDragEndBookmark",()=>{this.draggedId="",this._resetDragover()}),I(this,"_onDropBar",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=o.a.getBookmarkBarFolderId(),a=o.a.getBookmarksBarNodes().length;s.a.onDropEvent(e,t,a)}this._resetDragover()}),I(this,"_onDragEnter",e=>{this.dropMode=this._getDropModeForEvent(e)}),I(this,"_onDragOverBar",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move")}),I(this,"_onDragOver",(e,t)=>{if(e.id!==this.draggedId&&void 0!==e.index){var a="";if(this.state.sorting.sortOrder===E.a.NO_SORTING){const i=t.currentTarget.getBoundingClientRect(),s=(t.clientX-i.left)/i.width;a=o.a.isFolder(e)?s<=.33?"left":s>.66?"right":"on":s<=.5?"left":"right"}else o.a.isFolder(e)&&(a="on");(this.state.dragover.id!==e.id||this.state.dragover.id===e.id&&this.state.dragover.position!==a)&&this.setState({dragover:{id:e.id,position:a,index:e.index}})}}),I(this,"_onDragStart",e=>{this.draggedId=e}),I(this,"_getDropModeForEvent",e=>{const t={support:!1,copy:!1};return t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===i.b),t.support&&(e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)?t.copy=!1:t.copy=t.support&&(i.a.isCopyModifierPressed(e)||!e.dataTransfer.types.some(e=>e===i.b))),t}),I(this,"_onCut",e=>{s.a.cut(e,[this.clipboardItem.id]),e.stopPropagation(),e.preventDefault()}),I(this,"_onCopy",e=>{s.a.copy(e,[this.clipboardItem.id]),e.stopPropagation(),e.preventDefault()}),I(this,"_onPaste",e=>{const t=this.clipboardItem.id===o.a.getBookmarkBarFolderId();s.a.pasteWithPromise(e,this.clipboardItem.id,t)}),I(this,"_onCutContextMenu",e=>{this.clipboardItem=e;const{document:t}=this.context;t.addEventListener("cut",this._onCut),t.execCommand("cut"),t.removeEventListener("cut",this._onCut)}),I(this,"_onCopyContextMenu",e=>{this.clipboardItem=e;const{document:t}=this.context;t.addEventListener("copy",this._onCopy),t.execCommand("copy"),t.removeEventListener("copy",this._onCopy)}),I(this,"_onPasteContextMenu",e=>{this.clipboardItem=e;const{document:t}=this.context;t.addEventListener("paste",this._onPaste),t.execCommand("paste"),t.removeEventListener("paste",this._onPaste)}),I(this,"_onSortOrderChange",()=>{const e=this.state.sorting.sortOrder===E.a.DESCENDING_SORT?E.a.ASCENDING_SORT:E.a.DESCENDING_SORT;this._onSortChange(e,this.state.sorting.sortField)}),I(this,"_onTitleSortChange",e=>{let t=this.state.sorting.sortOrder;"manually"!==e&&t===E.a.NO_SORTING?t=E.a.ASCENDING_SORT:"manually"===e&&(t=E.a.NO_SORTING),this._onSortChange(t,e)}),I(this,"_onSortChange",(e,t)=>{this.setState({sorting:{sortOrder:e,sortField:t}});const a={sortOrder:e,sortField:t};p.a.set(A.kBookmarksBarSorting,a),this.setState(e=>({renderedArray:this._getRenderedItems(e.nodes,a,!0===e.newItemAdded?e.editId:"")}))}),I(this,"_getContextMenuItems",()=>{const e=o.a.getItemById(o.a.getBookmarkBarFolderId()),t=[{handler:this._onTitleSortChange.bind(this,"manually"),type:"checkbox",checked:"manually"===this.state.sorting.sortField,...Object(O.a)("Manually")},{handler:this._onTitleSortChange.bind(this,"title"),type:"checkbox",checked:"title"===this.state.sorting.sortField,...Object(O.a)("by Title")},{handler:this._onTitleSortChange.bind(this,"url"),type:"checkbox",checked:"url"===this.state.sorting.sortField,...Object(O.a)("by Address")},{handler:this._onTitleSortChange.bind(this,"nickname"),type:"checkbox",checked:"nickname"===this.state.sorting.sortField,...Object(O.a)("by Nickname")},{handler:this._onTitleSortChange.bind(this,"description"),type:"checkbox",checked:"description"===this.state.sorting.sortField,...Object(O.a)("by Description")},{handler:this._onTitleSortChange.bind(this,"dateAdded"),type:"checkbox",checked:"dateAdded"===this.state.sorting.sortField,...Object(O.a)("by Date Created")}],a=[{handler:this._addActiveTab,...Object(O.a)("Add Active Tab")},{name:"---"},{handler:this._createNewBookmark,...Object(O.a)("New Bookmark")},{handler:this._createNewFolder,...Object(O.a)("command","New Folder")},{name:"---"},{items:t,...Object(O.a)("Sort")},{name:"---"},{handler:this._onPasteContextMenu.bind(this,e),...Object(O.a)("win_linux","Paste")}];if(this.state.sorting.sortOrder!==E.a.NO_SORTING){const e=this.state.sorting.sortOrder===E.a.ASCENDING_SORT?Object(S.a)("Descending"):Object(S.a)("Ascending");t.push({name:"---"}),t.push({name:e,handler:this._onSortOrderChange})}else a.splice(4,0,{handler:()=>this._createNewSeparator(),...Object(O.a)("New Separator")});return a}),I(this,"_moveFocus",(e,t,a)=>{const{document:i}=this.context;if(!0===a||Object(C.a)(N.a.findDOMNode(this))){const a=Array.from(i.querySelectorAll("button.bookmarkbarItem")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let i=a.indexOf(e);i="right"===t?i+1>=a.length?0:i+1:i<=0?a.length-1:i-1,e=a[i]}const s=i.querySelector(`button.bookmarkbarItem[data-id="${e}"]`);s&&s instanceof HTMLButtonElement&&this.setState({highlightedId:e},()=>s.focus())}}),I(this,"_handleItemActivated",(e,t,a,s)=>{const n=o.a.getItemById(e);if(o.a.isFolder(n)&&a){const e=this._getMenuSorting(),t="top"===g.a.get(A.kBookmarksBarPosition)?"bottom":"top";r.a.show(n.id,this._getFolderSiblings(),e.field,e.order,t,this._onMenuVisibilityChanged)}else if(t&&s){const e=i.a.getOpenOptionsFromModifierKeys(s);e.bookmarks=i.a.getBookmarksByNode(n),i.a.open(e,!0)}}),I(this,"_handleItemEnter",e=>{""!==this.acceptEnterId&&this.acceptEnterId!==e||(Object(C.a)(N.a.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))}),I(this,"_handleItemLeave",e=>{""===this.state.openMenuId&&this.setState({highlightedId:""})}),I(this,"_handleItemBlur",t=>{e.nextTick(()=>{Object(C.a)(N.a.findDOMNode(this))||this.setState({highlightedId:""})})}),I(this,"_handleItemHighlightMissing",e=>{this.setState({highlightedId:e})}),I(this,"_handleLeaveBar",()=>{c.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),I(this,"_getMenuSorting",()=>E.a.toMenuSorting(this.state.sorting.sortOrder,this.state.sorting.sortField)),I(this,"_getFolderSiblings",()=>{const{document:e}=this.context;return Array.from(e.querySelectorAll("button.bookmarkbarItem")).filter(e=>e.classList.contains("folder")||e.classList.contains("chevron")).map(e=>{const t=e.getBoundingClientRect();return{id:e.dataset.id,offset:Number(e.dataset.offset),folderGroup:Boolean(e.classList.contains("folder")),rect:{x:parseInt(t.left),y:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height)}}})}),I(this,"_onMenuVisibilityChanged",e=>{""===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout(()=>{this.acceptEnterId="",this.timer=null},100),Object(C.a)(N.a.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:""})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e})}),I(this,"_isSorted",()=>"manually"!==this.state.sorting.sortField),I(this,"_onContextMenu",e=>{Object(k.a)(this.context.vivaldiWindowId,this._getContextMenuItems())(e)}),I(this,"_renderBookmarkBarButton",(e,t)=>f.a.createElement(l.a,{ref:e.id,key:e.id,node:e,editTitle:this.state.editId===e.id,isCut:-1!==this.state.cutIds.indexOf(e.id),menuOpen:this.state.openMenuId===e.id,display:this.props.display,statusOff:this.props.statusOff,dragover:this.state.dragover,highlighted:this.state.highlightedId===e.id,keyAccess:0===t?this.props.keyAccess:-1,uiFocus:0===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,onEditChanged:this._onEditChanged,onDragStart:this._onDragStart,onDragEnd:this._onDragEndBookmark,onDragOver:this._onDragOver,getDropModeForEvent:this._getDropModeForEvent,addActiveTab:this._addActiveTab,createNewBookmark:this._createNewBookmark,createNewFolder:this._createNewFolder,createNewSeparator:()=>this._createNewSeparator(t),isSorted:this._isSorted(),resetDragover:this._resetDragover,onButtonRendered:this._onButtonRendered,onCut:this._onCutContextMenu.bind(this,e),onCopy:this._onCopyContextMenu.bind(this,e),onPaste:this._onPasteContextMenu.bind(this,e),__source:{fileName:T,lineNumber:637}}));const{document:n}=a;this.state={nodes:o.a.getBookmarksBarNodes(),dragover:{id:"",position:"",index:0},maxWidth:n.documentElement?n.documentElement.clientWidth:0,sorting:{sortOrder:E.a.NO_SORTING,sortField:"manually"},cutIds:o.a.getCutIds(),editId:"",newItemAdded:!1,renderedArray:[],openMenuId:"",highlightedId:""}}componentDidMount(){const e=g.a.get(A.kBookmarksBarSorting);this._onSortChange(e.sortOrder,e.sortField),o.a.addChangeListener(this._onStoreChange),d.a.addListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}componentWillUnmount(){this.timer&&clearTimeout(this.timer),o.a.removeChangeListener(this._onStoreChange),d.a.removeListener("COMMAND_FOCUS_BOOKMARKBAR",this._onCommandSpy)}render(){let e=10;const t=[];let a=0,i="",s=0;for(let n=0;n<this.state.renderedArray.length;n++){const r=this.state.renderedArray[n];if(!this._isSorted()||!o.a.isSeparator(r)){const o=e+(r.buttonWidth?r.buttonWidth:0);if(o>this.state.maxWidth&&this.state.editId!==r.id){""===this.state.editId&&this.state.renderedArray[0].parentId&&(i=this.state.renderedArray[0].parentId),a=n;break}t.push(this._renderBookmarkBarButton(r,s)),s++,e=o}}const r=""!==i?f.a.createElement(n.a,{id:i,offset:a,keyAccess:-1,menuOpen:this.state.openMenuId===i,highlighted:this.state.highlightedId===i,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onLeaveBar:this._handleLeaveBar,__source:{fileName:T,lineNumber:703}}):null;return f.a.createElement("div",{className:`bookmark-bar ${this.props.display}`,onDragEnter:this._onDragEnter,onDragOver:this._onDragOverBar,onDragLeave:this._resetDragover,onDrop:this._onDropBar,onContextMenu:this._onContextMenu,__source:{fileName:T,lineNumber:719}},f.a.createElement(v.a,{className:"observer",onKeyDown:this._handleKeyDown,onResize:this._onResize,__source:{fileName:T,lineNumber:726}},t,r))}}I(D,"contextType",w.a),t.a=D}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(17),o=a.n(r),l=a(44),c=a(13);function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends s.a.PureComponent{constructor(...e){super(...e),d(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id,"Enter"===e.key,!0);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()}),d(this,"_handleMouseDown",e=>{e.preventDefault()}),d(this,"_handleItemMouseUp",e=>{e.button===l.a.kCenter&&e.preventDefault()}),d(this,"_handleClick",e=>{this.props.onItemActivated(this.props.id,!0,!0,e),e.preventDefault(),e.stopPropagation()}),d(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.id)}),d(this,"_handleFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)}),d(this,"_handleMouseEnter",e=>{this.props.onItemEnter(this.props.id)}),d(this,"_handleMouseLeave",e=>{this.props.onItemLeave(this.props.id)})}render(){return s.a.createElement("button",{className:o()({bookmarkbarItem:!0,chevron:!0,highlighted:this.props.highlighted}),"data-id":this.props.id,"data-offset":this.props.offset,tabIndex:this.props.keyAccess,title:Object(n.a)("More bookmarks"),dangerouslySetInnerHTML:{__html:c.z},onKeyDown:this._handleKeyDown,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseUp:this._handleItemMouseUp,onBlur:this._handleBlur,onFocus:this._handleFocus,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\BookmarkBarExtender.jsx",lineNumber:97}})}}t.a=u},function(e,t,a){"use strict";(function(e){var i=a(137),s=a(62),n=a(280),r=a(353),o=a(505),l=a(506),c=a(507),d=a(5);let u=!1;const h={show:function(t,a,h,m,p,g){const b=function(e){g(e)},f=function(){e.nextTick(()=>{g("")})};u||(u=!0,function(e){return new Promise(t=>{d.a.zoom.getVivaldiUIZoom(a=>{e.forEach(e=>{e.rect.x=parseInt((e.rect.x+1)*a),e.rect.y=parseInt((e.rect.y+0)*a),e.rect.width=parseInt(e.rect.width*a),e.rect.height=parseInt(e.rect.height*a)}),t()})})}(a).then(()=>{d.a.menubarMenu.onOpenBookmark.addListener(i.a.onOpen),d.a.menubarMenu.onBookmarkAction.addListener(i.a.onAction),d.a.menubarMenu.onHover.addListener(i.a.onHover),d.a.bookmarkContextMenu.onOpen.addListener(b),d.a.bookmarkContextMenu.onClose.addListener(f),d.a.bookmarkContextMenu.show({id:t,siblings:a,sortField:h,sortOrder:m,edge:s.default.getBookmarkExtrasEdge(),icons:[n.a,r.a,o.a,l.a,c.a]},()=>{u=!1,i.a.onHover(""),d.a.menubarMenu.onOpenBookmark.removeListener(i.a.onOpen),d.a.menubarMenu.onBookmarkAction.removeListener(i.a.onAction),d.a.menubarMenu.onHover.addListener(i.a.onHover),d.a.bookmarkContextMenu.onOpen.removeListener(b),d.a.bookmarkContextMenu.onClose.removeListener(f)})}))}};t.a=h}).call(this,a(64))},function(e,t,a){"use strict";var i=a(39),s=a(37),n=a(22),r=a(120),o=a(310),l=a(40),c=a(0),d=a.n(c),u=a(29),h=a.n(u),m=a(83),p=a(25),g=a(2),b=a(17),f=a.n(b),_=a(60),N=a(6),v=a(44),E=a(355),w=a(20),S="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarksbar\\bookmarksbarItem.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends d.a.Component{constructor(e){super(e),C(this,"dropMode",{support:!1,copy:!1}),C(this,"centerButtonPressed",!1),C(this,"regularWidth",-1),C(this,"canHandleClick",!0),C(this,"_edit",()=>{l.a.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})}),C(this,"_rename",()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged(this.props.node.id)}),C(this,"_handleEditChange",e=>{this.setState({title:e.target.value})}),C(this,"_handleEditKeyDown",e=>{switch(e.key){case"Enter":this._saveTitle(e.currentTarget.value),this.refs.input.blur();break;case"Escape":this._cancelEdit(),this.refs.input.blur()}}),C(this,"_killEvent",e=>{e.preventDefault(),e.stopPropagation()}),C(this,"_cancelEdit",()=>{this.setState({title:this.props.node.title}),this.props.onEditChanged("")}),C(this,"_saveTitle",e=>{s.a.update(this.props.node.id,{title:e})}),C(this,"_handleFocus",e=>{e.currentTarget.select()}),C(this,"_handleEditBlur",e=>{this.state.title||this._cancelEdit(),this.props.onEditChanged(""),this.props.onButtonRendered(this.props.node.id,this.regularWidth)}),C(this,"_delete",()=>{s.a.removeWithPromise([this.props.node.id])}),C(this,"_handleItemMouseDown",e=>{(e.button!==v.a.kLeft||e.button===v.a.kLeft&&!e.shiftKey)&&(this.centerButtonPressed=e.button===v.a.kCenter,e.preventDefault()),this.canHandleClick=!this.props.menuOpen}),C(this,"_handleItemMouseUp",e=>{e.button===v.a.kCenter&&(e.preventDefault(),!0===this.centerButtonPressed&&0===e.buttons&&this.props.onItemActivated(this.props.node.id,!0,!1,e))}),C(this,"_handleClick",e=>{this.canHandleClick&&this.props.onItemActivated(this.props.node.id,!0,!0,e),e.preventDefault(),e.stopPropagation()}),C(this,"_handleKeyDown",e=>{switch("Enter"===e.key&&!0===e.repeat&&e.preventDefault(),e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.node.id,"Enter"===e.key,!0,e);break;case"ArrowLeft":this.props.moveFocus(this.props.node.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.node.id,"right",!1);break;case"Escape":if(this.props.menuOpen)return;this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()}),C(this,"_handleDrop",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support&&""!==this.props.dragover.position){const t="on"===this.props.dragover.position?this.props.node.id:this.props.node.parentId,a="on"===this.props.dragover.position?0:this.props.dragover.index+("right"===this.props.dragover.position?1:0);t&&s.a.onDropEvent(e,t,a)}this.props.resetDragover()}),C(this,"_handleDragStart",e=>{this.props.onDragStart(this.props.node.id),this.setState({dragging:!0});const t=JSON.stringify([this.props.node.id.toString()]);e.dataTransfer.setData(i.b,t);const a=w.a.getHoverUrl(n.a.getUrlByNode(this.props.node));Object(E.a)(e,a,this.props.node.title),e.dataTransfer.effectAllowed="all"}),C(this,"_handleDragEnd",e=>{this.setState({dragging:!1}),this.props.onDragEnd()}),C(this,"_handleDragLeave",e=>{}),C(this,"_handleDragEnter",e=>{this.dropMode=this.props.getDropModeForEvent(e)}),C(this,"_handleDragOver",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&(e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move",this.props.onDragOver(this.props.node,e))}),C(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.node.id)}),C(this,"_handleMouseEnter",e=>{if(!this.props.statusOff){const e=n.a.getUrlByNode(this.props.node);m.a.setStatus(e||this.props.node.title)}this.props.onItemEnter(this.props.node.id)}),C(this,"_handleMouseLeave",e=>{this.props.statusOff||m.a.clearStatus(),this.centerButtonPressed=!1,this.props.onItemLeave(this.props.node.id)}),C(this,"_openInNewWindow",(e,t)=>{const a={bookmarks:i.a.getBookmarksByNode(e),inNewWindow:!0,incognito:t};i.a.open(a,!0)}),C(this,"_openInNewTab",(e,t)=>{const a={bookmarks:i.a.getBookmarksByNode(e),inCurrent:!1,inBackground:t};i.a.open(a,!0)}),C(this,"_open",e=>{const t={bookmarks:i.a.getBookmarksByNode(e),inCurrent:!0};i.a.open(t,!0)}),C(this,"_getContextMenuItems",e=>{if(n.a.isSeparator(e))return[{handler:this.props.createNewBookmark,...Object(N.a)("New Bookmark")},{handler:this.props.createNewFolder,...Object(N.a)("command","New Folder")},{handler:this.props.createNewSeparator,...Object(N.a)("New Separator")},{handler:this._delete,...Object(N.a)("other","Delete")}];const t=[{handler:this._openInNewTab.bind(this,e,!1),...Object(N.a)("Open in New Tab")},{handler:this._openInNewTab.bind(this,e,!0),...Object(N.a)("Open in Background Tab")},{handler:this._open.bind(this,e),...Object(N.a)("Open")},{name:"---"},{handler:this._openInNewWindow.bind(this,e,!1),...Object(N.a)("Open in New Window")},{handler:this._openInNewWindow.bind(this,e,!0),...Object(N.a)("Open in Private Window")},{name:"---"},{handler:this.props.addActiveTab,...Object(N.a)("Add Active Tab")},{name:"---"},{handler:this.props.createNewBookmark,...Object(N.a)("New Bookmark")},{handler:this.props.createNewFolder,...Object(N.a)("command","New Folder")},{name:"---"},{handler:this._edit,...Object(N.a)("command","Edit")},{handler:this._rename,...Object(N.a)("Rename")},{name:"---"},{handler:this.props.onCut,...Object(N.a)("win_linux","Cut")},{handler:this.props.onCopy,...Object(N.a)("win_linux","Copy")},{handler:this.props.onPaste,...Object(N.a)("win_linux","Paste")},{name:"---"},{handler:this._delete,...Object(N.a)("other","Delete")}];return this.props.isSorted||t.splice(11,0,{handler:this.props.createNewSeparator,...Object(N.a)("New Separator")}),t}),C(this,"_onContextMenu",e=>{this.props.editTitle?e.stopPropagation():Object(_.a)(this.context.vivaldiWindowId,this._getContextMenuItems(this.props.node))(e)}),C(this,"_onFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.node.id)}),this.state={dragging:!1,title:e.node.title}}componentDidUpdate(){const e=h.a.findDOMNode(this.refs.button);e instanceof HTMLElement&&(this.props.onButtonRendered(this.props.node.id,e.offsetWidth),this.props.editTitle||(this.regularWidth=e.offsetWidth))}componentDidMount(){const e=h.a.findDOMNode(this.refs.button);e instanceof HTMLElement&&this.props.onButtonRendered(this.props.node.id,e.offsetWidth)}render(){const e=this.props.node,t=n.a.getUrlByNode(e),a=n.a.isSeparator(e),i=n.a.isFolder(e);let s;i&&"icon"!==this.props.display?s=Object(g.a)("Show folder contents"):"icon"===this.props.display&&e.title?(s=e.title,t&&(s=s+"\n"+t)):t&&(s=t);let l=!1;"icon"!==this.props.display&&(l="iconexceptfolders"!==this.props.display||!t);const c=e.faviconUrl?e.faviconUrl:e.url;return d.a.createElement("button",{key:e.id,ref:"button","data-id":e.id,"data-offset":0,title:s,tabIndex:this.props.keyAccess,className:f()({uifocusstop:this.props.uiFocus,bookmarkbarItem:!0,highlighted:this.props.highlighted||this.props.menuOpen,folder:!a&&!e.url,"data-cut":this.props.isCut,dragging:this.state.dragging,dragover:this.props.dragover.id===e.id&&"on"===this.props.dragover.position,dragoverLeft:this.props.dragover.id===e.id&&"left"===this.props.dragover.position,dragoverRight:this.props.dragover.id===e.id&&"right"===this.props.dragover.position}),draggable:!this.props.editTitle,onDragStart:this._handleDragStart,onDragEnd:this._handleDragEnd,onDragEnter:this._handleDragEnter,onDragOver:this._handleDragOver,onDrop:this._handleDrop,onBlur:this._handleBlur,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onClick:this.props.editTitle?void 0:this._handleClick,onMouseDown:this.props.editTitle?void 0:this._handleItemMouseDown,onMouseUp:this.props.editTitle?void 0:this._handleItemMouseUp,onKeyDown:this.props.editTitle?void 0:this._handleKeyDown,onContextMenu:this._onContextMenu,onFocus:this._onFocus,onKeyUp:this._killEvent,__source:{fileName:S,lineNumber:447}},a&&d.a.createElement("span",{className:"separator",__source:{fileName:S,lineNumber:483}}),!a&&c&&"text"!==this.props.display&&d.a.createElement(r.a,{url:c,__source:{fileName:S,lineNumber:485}}),!a&&!e.url&&"text"!==this.props.display&&d.a.createElement(o.a,{speeddial:e.speeddial,__source:{fileName:S,lineNumber:489}}),!a&&!this.props.editTitle&&l&&e.title&&d.a.createElement("span",{__source:{fileName:S,lineNumber:493}},("text"===this.props.display&&i?"▾ ":"")+e.title),this.props.editTitle&&d.a.createElement("input",{ref:"input",type:"text",value:this.state.title,onFocus:this._handleFocus,onBlur:this._handleEditBlur,onClick:this._killEvent,onKeyDown:this._handleEditKeyDown,onChange:this._handleEditChange,autoFocus:!0,__source:{fileName:S,lineNumber:501}}))}}C(k,"contextType",p.a),t.a=k},function(e,t,a){"use strict";var i=a(0),s=a(190),n=a(50),r=a(17),o=a.n(r),l=a(119),c=a(146),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\toolbars\\ToolbarButtonPopup.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.PureComponent{constructor(...e){super(...e),u(this,"refComponent",i.createRef()),u(this,"refButton",i.createRef()),u(this,"handleClickOutside",e=>{this.props.hidePopup()}),u(this,"keyDown",e=>{e.keyCode===n.a.KEY_ESCAPE&&this.props.hidePopup()}),u(this,"getPopupPosition",()=>"large"===this.props.size?38:this.props.width&&this.props.topOffset?this.props.topOffset:null),u(this,"focusPopup",()=>{this.refComponent.current&&this.refComponent.current.focus()})}componentDidUpdate(e){!e.isVisible&&this.props.isVisible&&this.focusPopup()}render(){const{position:e,popupClassName:t,hasLightArrow:a}=this.props,n="below"===e?"top":"bottom",r=void 0!==this.props.width&&void 0!==this.props.leftOffset?{"--popupLeftOffset":this.props.leftOffset+"px","--popupWidth":this.props.width+"px",[n]:this.getPopupPosition()}:null;return i.createElement(c.CSSTransition,{classNames:"button-popup",in:this.props.isVisible,mountOnEnter:!0,unmountOnExit:!0,ref:this.refButton,timeout:{enter:300,exit:100},__source:{fileName:d,lineNumber:75}},i.createElement(s.a,{ref:this.refComponent,focusName:"focus-popup-area",forceTrap:!0,onKeyDown:this.keyDown,style:r,className:o()(t,"button-popup","button-popup-arrow",`button-popup-arrow--${a?"light":"dark"}`,`button-popup-arrow--${e}`),__source:{fileName:d,lineNumber:87}},i.createElement("div",{className:o()(t,"button-popup-wrapper"),__source:{fileName:d,lineNumber:100}},this.props.children)))}}t.a=Object(l.a)(h)},function(e,t,a){"use strict";var i=a(40),s=a(12),n=a(59),r=a(0),o=a.n(r),l=a(26),c=a(2),d=a(7),u=a(17),h=a.n(u),m=a(5),p=a(13),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\blocker\\ContentBlockerPopup.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f=Object(c.a)("(Default)"),_=["tracking","ad_blocking"];class N extends o.a.PureComponent{constructor(...e){super(...e),b(this,"state",{adBlockingEnabled:!1,trackerBlockingEnabled:!1,isBlockingAds:!1,isBlockingTrackers:!1,blockedTrackerList:void 0,blockedAdList:void 0,showBlockedTrackers:!1,showBlockedAds:!1,popupOpen:!1,ruleSourceReady:!1}),b(this,"getRules",()=>_.forEach(e=>this.getRule(e))),b(this,"getRule",e=>m.a.contentBlocking.getActiveExceptionsList(e,t=>{const a="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";this.setState({[a]:"exempt_list"===t},()=>this.updateException(e))})),b(this,"getHostname",e=>{let t="";try{t=new URL(e||this.props.url).hostname}catch(e){}return t}),b(this,"togglePopup",()=>this.setState(e=>({popupOpen:!e.popupOpen}))),b(this,"hidePopup",()=>this.setState({popupOpen:!1})),b(this,"showSettings",()=>{this.togglePopup(),i.a.showSettings("privacy&scroll=tracker_and_ad_blocking")}),b(this,"getActiveExceptionList",e=>{const t="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";return this.state[t]?"exempt_list":"process_list"}),b(this,"updateBlockingState",()=>{_.map(e=>this.updateException(e)),_.map(e=>this.updateBlocked(e,[this.props.pageId]))}),b(this,"updateException",e=>m.a.contentBlocking.isExemptOfFiltering(e,this.props.url,t=>{this._isMounted&&("tracking"===e?this.setState({isBlockingTrackers:!t}):this.setState({isBlockingAds:!t}))})),b(this,"updateSources",()=>_.forEach(e=>{m.a.contentBlocking.getRuleSources(e,e=>{e.find(e=>""!==e.rules_list_checksum)?this.setState({ruleSourceReady:!0}):this.setState({ruleSourceReady:!1})})})),b(this,"updateBlocked",(e,t)=>{const a="tracking"===e?"blockedTrackerList":"blockedAdList";t.includes(this.props.pageId)&&m.a.contentBlocking.getBlockedUrlsInfo(e,[this.props.pageId],e=>this.setState({[a]:e[0]}))}),b(this,"addException",(e,t)=>{const a=this.getHostname();t||(t=this.getActiveExceptionList(e)),m.a.contentBlocking.addExceptionForDomain(e,t,a),this.updateException(e)}),b(this,"removeException",(e,t)=>{const a=this.getHostname();t||(t=this.getActiveExceptionList(e)),m.a.contentBlocking.removeExceptionForDomain(e,t,a),this.updateException(e)}),b(this,"setPageBlocking",e=>{const t=e.target.value,a=0+(this.state.trackerBlockingEnabled?1:0)+(this.state.adBlockingEnabled?1:0),i={tracking:{process:!1,exempt:!1},ad_blocking:{process:!1,exempt:!1}};if(parseInt(t)!==a)switch(t){case"0":i.tracking.exempt=!0,i.ad_blocking.exempt=!0;break;case"1":i.tracking.process=!0,i.ad_blocking.exempt=!0;break;case"2":i.tracking.process=!0,i.ad_blocking.process=!0}Object.keys(i).forEach(e=>{i[e].process?this.addException(e,"process_list"):this.removeException(e,"process_list"),i[e].exempt?this.addException(e,"exempt_list"):this.removeException(e,"exempt_list")}),s.a.reloadPage(this.props.pageId)}),b(this,"handleExpandClick",(e,t)=>{t.preventDefault(),"tracking"===e?this.setState(e=>({showBlockedTrackers:!e.showBlockedTrackers})):this.setState(e=>({showBlockedAds:!e.showBlockedAds}))}),b(this,"renderBlocked",e=>{if(!this.props.blockerVisible)return null;const t="tracking"===e?this.state.blockedTrackerList:this.state.blockedAdList;if(!t)return null;const a=t.blocked_urls_info.slice(0).reduce((e,t)=>{const a=this.getHostname(t.url);return e[a]=(e[a]||0)+t.blocked_count,e},{});for(const e of t.blocked_trackers_info){const t=e.domain;a[t]=(a[t]||0)+e.blocked_count}const i=this.state.showBlockedTrackers&&"tracking"===e||this.state.showBlockedAds&&"ad_blocking"===e;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:h()({"ContentBlocker-Blocked-Arrow":!0,"ContentBlocker-Blocked-Arrow--Expanded":i}),onMouseDown:this.handleExpandClick.bind(null,e),tabIndex:this.props.tabIndex,__source:{fileName:g,lineNumber:286}},o.a.createElement("h3",{__source:{fileName:g,lineNumber:293}},"tracking"===e?Object(c.a)("$1 Tracker Blocked","$1 Trackers Blocked",[t.total_blocked_count]):Object(c.a)("$1 Ad Blocked","$1 Ads Blocked",[t.total_blocked_count])),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:p.R},__source:{fileName:g,lineNumber:300}})),i&&o.a.createElement("ul",{__source:{fileName:g,lineNumber:303}},Object.keys(a).sort((e,t)=>a[e]>a[t]?-1:1).map(e=>o.a.createElement("li",{key:e,__source:{fileName:g,lineNumber:307}},o.a.createElement("span",{__source:{fileName:g,lineNumber:308}},e),o.a.createElement("span",{__source:{fileName:g,lineNumber:309}},a[e])))))})}componentDidMount(){this._isMounted=!0,this.getRules(),this.updateSources(),this.updateBlockingState(),m.a.contentBlocking.onStateChanged.addListener(this.getRules),m.a.contentBlocking.onUrlsBlocked.addListener(this.updateBlocked),m.a.contentBlocking.onExceptionsChanged.addListener(this.getRules),m.a.contentBlocking.onRulesSourceUpdated.addListener(this.updateSources),m.a.contentBlocking.onRuleSourceEnabled.addListener(this.updateSources),m.a.contentBlocking.onRuleSourceDisabled.addListener(this.updateSources),d.default.webNavigation.onCommitted.addListener(this.updateBlockingState)}componentDidUpdate(e){this.props.url!==e.url&&this.updateBlockingState()}componentWillUnmount(){this._isMounted=!1,m.a.contentBlocking.onStateChanged.removeListener(this.getRules),m.a.contentBlocking.onUrlsBlocked.removeListener(this.updateBlocked),m.a.contentBlocking.onExceptionsChanged.removeListener(this.getRules),m.a.contentBlocking.onRulesSourceUpdated.removeListener(this.updateSources),m.a.contentBlocking.onRuleSourceEnabled.removeListener(this.updateSources),m.a.contentBlocking.onRuleSourceDisabled.removeListener(this.updateSources),d.default.webNavigation.onCommitted.removeListener(this.updateBlockingState)}render(){const{ruleSourceReady:e,trackerBlockingEnabled:t,isBlockingTrackers:a,blockedTrackerList:i,adBlockingEnabled:s,isBlockingAds:r,blockedAdList:d}=this.state,{blockerVisible:u,tabIndex:m}=this.props,b=0+(t?1:0)+(s?1:0),_=0+(a?1:0)+(r?1:0),N=i||d;return o.a.createElement(l.a,{buttonStyle:{"--trackers":!N&&u&&1===_?"1":"0","--ads":!N&&u&&2===_?"1":"0","--blocking":i&&a||d&&r?"1":"0"},tooltip:Object(c.a)("Content Blocker")+(e&&a?"\n• "+Object(c.a)("Tracker Blocking Active"):"")+(r&&e?"\n• "+Object(c.a)("Ad Blocking Active"):"")+(e?"":"\n• "+Object(c.a)("Blocking is inactive due to missing or disabled rule lists")),onClick:this.togglePopup,image:p.r,hidePopup:this.hidePopup,popupPosition:this.props.position,popupWidth:240,popupClassName:"ContentBlocker",className:"ContentBlocker-Control",isPopupVisible:this.state.popupOpen,__source:{fileName:g,lineNumber:337}},o.a.createElement("h2",{className:"ContentBlocker-Header",__source:{fileName:g,lineNumber:366}},Object(c.a)("Tracking Protection Level"),u&&o.a.createElement("span",{className:"info",__source:{fileName:g,lineNumber:369}},this.getHostname())),u&&o.a.createElement(n.a,{name:"contenBlockingPopup",value:_,onChange:this.setPageBlocking,className:"ContentBlocker-Field",__source:{fileName:g,lineNumber:374}},o.a.createElement("label",{tabIndex:m,className:h()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":0===_}),__source:{fileName:g,lineNumber:379}},o.a.createElement("input",{type:"radio",value:"0",tabIndex:"-1",__source:{fileName:g,lineNumber:385}}),o.a.createElement("span",{className:"ContentBlocker-Label-Icon",dangerouslySetInnerHTML:{__html:p.r},__source:{fileName:g,lineNumber:386}}),o.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:389}},Object(c.a)("No Blocking"),0===b&&o.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:392}},f))),o.a.createElement("label",{tabIndex:m,className:h()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":1===_}),__source:{fileName:g,lineNumber:397}},o.a.createElement("input",{type:"radio",value:"1",tabIndex:"-1",__source:{fileName:g,lineNumber:403}}),o.a.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--trackers":"1"},dangerouslySetInnerHTML:{__html:p.r},__source:{fileName:g,lineNumber:404}}),o.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:408}},Object(c.a)("Block Trackers"),1===b&&o.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:411}},f))),o.a.createElement("label",{tabIndex:m,className:h()({"ContentBlocker-Label":!0,"ContentBlocker-Label--Active":2===_}),__source:{fileName:g,lineNumber:416}},o.a.createElement("input",{type:"radio",value:"2",tabIndex:"-1",__source:{fileName:g,lineNumber:422}}),o.a.createElement("span",{className:"ContentBlocker-Label-Icon",style:{"--ads":"1"},dangerouslySetInnerHTML:{__html:p.r},__source:{fileName:g,lineNumber:423}}),o.a.createElement("span",{className:"ContentBlocker-Label-Text",__source:{fileName:g,lineNumber:427}},Object(c.a)("Block Trackers and Ads"),2===b&&o.a.createElement("span",{className:"keep-ea-words",__source:{fileName:g,lineNumber:430}},f)))),N&&o.a.createElement("div",{className:"ContentBlocker-Blocked",__source:{fileName:g,lineNumber:439}},i&&this.renderBlocked("tracking"),d&&this.renderBlocked("ad_blocking")),o.a.createElement("div",{className:"ContentBlocker-Field",__source:{fileName:g,lineNumber:449}},o.a.createElement("input",{type:"button",tabIndex:m,onClick:this.showSettings,value:Object(c.a)("Manage Default Settings"),__source:{fileName:g,lineNumber:450}})))}}t.a=N},function(e,t,a){"use strict";var i=a(39),s=a(385),n=a(37),r=a(22),o=a(354),l=a(8),c=a(10),d=a(0),u=a.n(d),h=a(26),m=a(25),p=a(2),g=a(7),b=a(444),f=a(1),_=a(13),N=a(20),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\createbookmark\\createbookmark.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=function(e){if(!r.a.hasBeenInitialized())return e;const t=r.a.getItemById(e);return void 0!==t&&r.a.isFolder(t)?e:r.a.getRootId()};class S extends u.a.PureComponent{constructor(...e){super(...e),E(this,"closed",!1),E(this,"state",{animated:!1,description:"",id:"",generalErrorKey:null,nickname:"",parentId:r.a.getRootId(),thumbnail:this.props.thumbnail,title:this.props.title,treeParentId:w(c.a.get(f.kBookmarksSaveFolder)),url:Object(b.a)(this.props.url)}),E(this,"onShowDialog",e=>{this.closed=!1;const t=r.a.findByUrl(e.url);t?this.setState({id:t.id,url:t.url,thumbnail:t.thumbnail,nickname:t.nickname,description:t.description,title:t.title,parentId:t.parentId,treeParentId:t.parentId,generalErrorKey:null}):this.setState({id:"",url:N.a.getDisplayUrl(e.url),thumbnail:e.thumbnail,nickname:"",description:"",title:N.a.getDisplayTitleByUrl(e.url,e.title),parentId:"",generalErrorKey:null})}),E(this,"_onBookmarkStoreChange",()=>{const e=w(this.state.treeParentId);e!==this.state.treeParentId&&this._setSaveFolder(e)}),E(this,"onSaveBookmark",()=>{if(!this.closed){if(""===this.state.url.trim())return void this.setState({generalErrorKey:Object(p.a)("Address cannot be empty.")});this.props.isBookmarked?(this.state.parentId!==this.state.treeParentId&&g.default.bookmarks.move(this.state.id,{parentId:this.state.treeParentId}),this.updateBookmark()):this.createBookmark()}}),E(this,"createBookmark",()=>{const e={title:this.state.title,url:this.state.url,thumbnail:this.state.thumbnail,nickname:this.state.nickname,description:this.state.description,parentId:this.state.treeParentId};i.a.verifyNode(e,!1).then(e=>{e&&n.a.create(e,e=>{g.default.runtime.lastError?this.setState({generalErrorKey:`${Object(s.a)(g.default.runtime.lastError.message)}\n                     ${Object(p.a)("Changes not saved.")}`}):(this.setState({id:e.id,animated:!0,generalErrorKey:void 0}),setTimeout(()=>{this.setState({animated:!1})},1e3),this.onClose())})})}),E(this,"updateBookmark",()=>{const e={title:this.state.title,url:this.state.url,thumbnail:this.state.thumbnail,nickname:this.state.nickname,description:this.state.description};i.a.verifyNode(e,!1).then(e=>{e&&n.a.update(this.state.id,e,e=>{g.default.runtime.lastError?this.setState({generalErrorKey:`${Object(s.a)(g.default.runtime.lastError.message)}\n                     ${Object(p.a)("Changes not saved.")}`}):(this.setState({generalErrorKey:null}),this.onClose())})})}),E(this,"onDeleteBookmark",()=>{g.default.bookmarks.remove(this.state.id,()=>{this.setState({animated:!1,description:"",generalErrorKey:null,id:"",nickname:"",parentId:r.a.getRootId(),thumbnail:this.props.thumbnail,title:this.props.title,treeParentId:w(c.a.get(f.kBookmarksSaveFolder)),url:Object(b.a)(this.props.url)}),this.onClose()})}),E(this,"onClose",()=>{this.closed||(this.closed=!0,this.setState({id:""}),this.props.onClose())}),E(this,"onFolderChange",e=>{const t=e.target.value;this._setSaveFolder(t)}),E(this,"_setSaveFolder",e=>{this.setState({treeParentId:e}),l.a.set(f.kBookmarksSaveFolder,e)}),E(this,"changeValue",(e,t)=>{const a={};a[e]=t.target.value,a.generalErrorKey=null,this.setState(a)})}componentDidUpdate(e){this.props.open&&!e.open&&this.onShowDialog(this.props)}componentDidMount(){r.a.addChangeListener(this._onBookmarkStoreChange)}componentWillUnmount(){r.a.removeChangeListener(this._onBookmarkStoreChange)}render(){return u.a.createElement(h.a,{className:"create-bookmark",isOn:this.props.isBookmarked,onClick:this.props.open?this.onClose:this.props.onOpen,hidePopup:this.onClose,popupPosition:this.props.popupPosition,isPopupVisible:this.props.open,tooltip:this.props.isBookmarked?Object(p.a)("title","Edit bookmark"):Object(p.a)("Add Bookmark"),popupWidth:310,image:_.u,hasLightArrow:!0,topOffset:this.props.topOffset,__source:{fileName:v,lineNumber:262}},u.a.createElement("form",{className:"dialog-add-bookmark",style:{maxHeight:this.context.innerHeight-125+"px"},onSubmit:this.onSaveBookmark,__source:{fileName:v,lineNumber:274}},u.a.createElement("div",{className:"addbookmark-cardwrapper",__source:{fileName:v,lineNumber:279}},u.a.createElement("div",{className:"thumbnail-image cb-image",__source:{fileName:v,lineNumber:280}},u.a.createElement("img",{src:this.state.thumbnail,__source:{fileName:v,lineNumber:281}})),u.a.createElement("div",{className:"dialog-content cardview",__source:{fileName:v,lineNumber:283}},u.a.createElement("div",{className:"cb-form-row",__source:{fileName:v,lineNumber:284}},u.a.createElement("input",{className:"cardview title",type:"text",value:this.state.title,onChange:this.changeValue.bind(this,"title"),title:Object(p.a)("Bookmark Name"),placeholder:Object(p.a)("Bookmark Name"),autoFocus:!0,__source:{fileName:v,lineNumber:285}})),u.a.createElement("div",{className:"cb-form-row",__source:{fileName:v,lineNumber:296}},u.a.createElement("input",{className:"cardview address",type:"text",value:this.state.url,onChange:this.changeValue.bind(this,"url"),title:Object(p.a)("Address"),placeholder:Object(p.a)("Address"),__source:{fileName:v,lineNumber:297}})),u.a.createElement("div",{className:"cb-form-row cardview",__source:{fileName:v,lineNumber:307}},u.a.createElement(o.a,{onChange:this.onFolderChange,selectedItemID:this.state.treeParentId,title:Object(p.a)("Bookmark Folder"),__source:{fileName:v,lineNumber:308}})),u.a.createElement("div",{className:"cb-form-row",__source:{fileName:v,lineNumber:315}},u.a.createElement("textarea",{className:"cardview description",type:"text",value:this.state.description,onChange:this.changeValue.bind(this,"description"),title:Object(p.a)("Description"),placeholder:Object(p.a)("Description"),__source:{fileName:v,lineNumber:316}})),u.a.createElement("div",{className:"cb-form-row",__source:{fileName:v,lineNumber:326}},u.a.createElement("input",{className:"cardview nickname",type:"text",value:this.state.nickname,onChange:this.changeValue.bind(this,"nickname"),title:Object(p.a)("Nickname"),placeholder:Object(p.a)("Nickname"),__source:{fileName:v,lineNumber:327}})))),this.state.generalErrorKey&&u.a.createElement("p",{className:"warning",__source:{fileName:v,lineNumber:340}},this.state.generalErrorKey),u.a.createElement("footer",{className:"dialog-footer cardview",__source:{fileName:v,lineNumber:342}},u.a.createElement("input",{type:"submit",className:"primary",value:Object(p.a)("Save"),__source:{fileName:v,lineNumber:343}}),u.a.createElement("input",{type:"button",value:Object(p.a)("other","Delete"),disabled:!this.props.isBookmarked,onClick:this.onDeleteBookmark,__source:{fileName:v,lineNumber:348}}))))}}E(S,"contextType",m.a),t.a=S},function(e,t,a){"use strict";var i=a(19),s=a(97),n=a(9),r=a(256),o=a(0),l=a.n(o),c=a(108),d=a(17),u=a.n(d),h=a(174),m=a(36),p=a(1),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\progress\\PageloadProgress.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f={bytes:0,bytesDisplayed:0,currentPageId:null,elLoaded:0,elLoadedDisplayed:0,elTotal:0,isProgressing:!1,isStarted:!1,progress:0,stopped:!1,pageloadTicker:""},_=[p.kAddressBarShowProgress,p.kThemeUseAnimation];class N extends l.a.PureComponent{constructor(...e){super(...e),b(this,"_isMounted",!1),b(this,"state",f),b(this,"_onUpdateProgressState",e=>{this.setState(e)}),b(this,"_onNavigationStoreChanged",()=>{this._onProgressStateStoreChanged()}),b(this,"_onProgressStateStoreChanged",()=>{const e=this.props.pageId,t=n.a.getPageById(e);if(t){const e=t.url||t.pendingUrl;if(Object(m.g)(e))return}const a=r.a.getProgressInfo(e),i=(s.a.getNavigationInfo(e)||{}).trigger,{progress:o=0,loadedBytes:l=0,loadedElements:c=0,totalElements:d=0}=a||{};"start"===i?this.setState({...f,currentPageId:e,isProgressing:!0,isStarted:!0}):"stop"===i?this.setState(e=>({isProgressing:!1,...e.stopped&&{}||{progress:1}})):"commit"!==i||this.state.stopped||(this.setState({bytes:l,elLoaded:c,elTotal:d,isProgressing:!0,isStarted:!0,progress:o}),this.updateCount())}),b(this,"_onWebpageviewStoreChanged",e=>{"PAGE_STOP"===e.type&&1!==this.state.progress&&this.setState({isProgressing:!1,stopped:!0})}),b(this,"getIncrement",(e,t)=>{const a=t-e;let i=0;return a>10?i=Math.floor(a/5):a>4?i=2:a>0&&(i=1),e+i}),b(this,"updateCount",()=>{if(clearTimeout(this._updateTimer),!this._isMounted)return;const e=this.state.bytes,t=this.state.bytesDisplayed,a=this.state.elLoadedDisplayed;let i=this.state.elLoaded;1===this.state.progress&&i<this.state.elTotal&&(i=this.state.elTotal);const s=this.getIncrement(t,e),n=this.getIncrement(a,i);!1===this.props.prefValues[p.kThemeUseAnimation]?this.setState({elLoadedDisplayed:i,bytesDisplayed:e}):(i>a&&this.setState({elLoadedDisplayed:n}),e>t&&this.setState({bytesDisplayed:s}),!this.state.stopped&&(i>n||e>s)&&(this._updateTimer=setTimeout(this.updateCount,80)));const r=e>1048576?1:0,o=Object(h.a)(e,r);this.setState({pageloadTicker:o})})}componentDidMount(){this._isMounted=!0,s.a.addChangeListener(this._onNavigationStoreChanged),r.a.addChangeListener(this._onProgressStateStoreChanged),c.a.addChangeListener(this._onWebpageviewStoreChanged)}componentWillUnmount(){clearTimeout(this._updateTimer),this._isMounted=!1,s.a.removeChangeListener(this._onNavigationStoreChanged),r.a.removeChangeListener(this._onProgressStateStoreChanged),c.a.removeChangeListener(this._onWebpageviewStoreChanged)}componentDidUpdate(e,t){const a=this.props.pageId;if(a!==t.currentPageId){const e=r.a.getProgressInfo(this.props.pageId),{progress:t=0,loadedBytes:i=0,loadedElements:s=0,totalElements:n=0}=e||{};let o={};o=0===t||1===t||void 0===t?{...f,currentPageId:a}:{...f,currentPageId:a,progress:t,bytes:i,elLoaded:s,elTotal:n},this._onUpdateProgressState(o)}}render(){if(!this.props.open||isNaN(this.state.progress))return null;const e=this.state.progress,t=this.state.elLoadedDisplayed,a=this.state.elTotal,i=this.state.isProgressing,s=this.state.isStarted,n=!0===this.state.stopped,r=u()({pageload:!0,unstarted:!s,progressing:i,"progress-done":1===e||n,stopped:n});return l.a.createElement("div",{className:r,__source:{fileName:g,lineNumber:261}},this.props.prefValues[p.kAddressBarShowProgress]&&l.a.createElement("progress",{className:"pageload-indicator",value:100*this.state.progress,max:100,__source:{fileName:g,lineNumber:263}}),l.a.createElement("div",{className:"pageload-ticker",__source:{fileName:g,lineNumber:268}},this.state.pageloadTicker),l.a.createElement("div",{className:"pageload-ticker",__source:{fileName:g,lineNumber:271}},t+"/"+a))}}t.a=Object(i.a)(N,_)},function(e,t,a){"use strict";var i=a(568),s=a(0),n=a.n(s),r=a(26),o=a(2),l=a(119),c=a(13),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchEngineSelect.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h({onClick:e,icon:t}){return n.a.createElement(r.a,{onClick:e,tooltip:Object(o.a)("Change search engine"),imagePath:t,__source:{fileName:d,lineNumber:30}})}function m({onClick:e}){return n.a.createElement(r.a,{onClick:e,tooltip:Object(o.a)("Change search engine"),image:c.ib,__source:{fileName:d,lineNumber:38}})}class p extends n.a.PureComponent{constructor(...e){super(...e),u(this,"handleClickOutside",this.props.onClose),u(this,"onItemClicked",({id:e})=>{this.props.onItemClicked(e)})}render(){return n.a.createElement(n.a.Fragment,{__source:{fileName:d,lineNumber:54}},n.a.createElement("div",{className:"toolbar-insideinput SearchEngineSelect-Icon",__source:{fileName:d,lineNumber:55}},this.props.useFavicon?n.a.createElement(h,{onClick:this.props.toggleOpen,icon:this.props.icon,__source:{fileName:d,lineNumber:57}}):n.a.createElement(m,{onClick:this.props.toggleOpen,__source:{fileName:d,lineNumber:61}})),this.props.isOpen&&n.a.createElement(i.a,{items:this.props.items,minWidth:this.props.minWidth,onClosed:this.props.onClose,onItemActivated:this.onItemClicked,__source:{fileName:d,lineNumber:68}}))}}t.a=Object(l.a)(p)},function(e,t,a){"use strict";var i=a(0),s=a(357),n=a(26),r=a(72),o=a(108),l=a(2),c=a(1),d=a(13),u=a(78),h="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\searchfield\\SearchFieldButton.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.PureComponent{constructor(...e){super(...e),m(this,"state",{showPopup:!1}),m(this,"onWebpageviewStoreChanged",({action:e})=>{"focusSearchField"===e&&this.toggleHiddenSearchFieldPopup()}),m(this,"hideSearchField",()=>{this.setState({showPopup:!1})}),m(this,"toggleHiddenSearchFieldPopup",()=>{this.setState(e=>({showPopup:!e.showPopup}))}),m(this,"onSearch",(e,t,a={})=>{t&&t.url&&r.a.goSearchURL(e.trim(),{useSearchEngine:t,post:Boolean(t.post),...a})}),m(this,"onSearchAddTypedSearchHistory",Object(u.a)(this.onSearch,{addTypedSearchHistory:!0}))}componentDidMount(){o.a.addChangeListener(this.onWebpageviewStoreChanged)}componentWillUnmount(){o.a.removeChangeListener(this.onWebpageviewStoreChanged)}render(){const{prefValues:e}=this.props;return i.createElement(n.a,{image:this.props.size?d.Pb[this.props.size]:void 0,tooltip:Object(l.a)("Show Search Field"),onClick:this.toggleHiddenSearchFieldPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideSearchField,isPopupVisible:this.state.showPopup,popupWidth:this.props.popupWidth,hasLightArrow:!0,size:this.props.size,popupClassName:"SearchField-Popup",__source:{fileName:h,lineNumber:77}},i.createElement(s.a,{onEnterPressed:this.onSearchAddTypedSearchHistory,useFavicon:e[c.kAddressBarSearchShowFavicon],suggestEnabled:e[c.kAddressBarSearchSuggestEnabled],shouldRenderAs:this.props.shouldRenderAs,onSearch:this.hideSearchField,__source:{fileName:h,lineNumber:89}}))}}t.a=p},function(e,t,a){"use strict";var i=a(76),s=a(0),n=a.n(s),r=a(25),o=a(2),l=a(7),c=a(5),d="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\SiteInfoButton.jsx";function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h({pageSecurity:e}){switch(e){case"web":case"warning":return n.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:d,lineNumber:31}},n.a.createElement("g",{__source:{fileName:d,lineNumber:32}},n.a.createElement("path",{d:"M7 8C7 7.44772 7.44772 7 8 7C8.55228 7 9 7.44772 9 8V11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11V8Z",__source:{fileName:d,lineNumber:33}}),n.a.createElement("path",{d:"M8 6C8.55228 6 9 5.55228 9 5C9 4.44772 8.55228 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z",__source:{fileName:d,lineNumber:34}}),n.a.createElement("path",{fillRule:"evenodd",d:"M15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z",__source:{fileName:d,lineNumber:35}})));case"secure":case"certified":return n.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:d,lineNumber:44}},n.a.createElement("path",{d:"M12.2 6.7C12.2 4 10.5 2 8 2 5.8 2 3.8 4 3.8 6.7V7H3v7h10V7h-.8v-.3zM10.7 8H5.3V6.7c0-1.7 1.4-3 2.8-3 1.7 0 2.8 1.3 2.8 3V8z",__source:{fileName:d,lineNumber:45}}));case"insecure":return n.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:d,lineNumber:52}},n.a.createElement("path",{d:"M5.4 7v-.7c0-1.4 1-2.6 2.4-2.6 1 0 1-1.7 0-1.7h-.2c-2 0-3.8 2-3.8 4.3V7H3v7h10V7H5.4z",__source:{fileName:d,lineNumber:53}}));case"internal":return n.a.createElement("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",__source:{fileName:d,lineNumber:60}},n.a.createElement("path",{d:"M10.4 5c-.4-.8 0-1.8 1-2 .7 0 1.5.4 1.6 1.2a1.4 1.4 0 0 1-.2 1l-4 7c-.3.5-.7.8-1.2.8-.6 0-1-.2-1.3-.7L3.8 7.8 2.2 5c-.5-.8 0-2 1-2 .7 0 1 .2 1.4.7l1 2 1 1.4a2 2 0 0 0 1.7 1.5 2.2 2.2 0 0 0 2.3-2V6c0-.3 0-.6-.2-1z",__source:{fileName:d,lineNumber:61}}));default:return null}}class m extends n.a.PureComponent{constructor(...e){super(...e),u(this,"doActionShowPageInfo",()=>{if(this.props.isEditingUrl)return this.props.fieldGo();i.a.getActiveWebView()&&l.default.windows.getCurrent({},e=>{c.a.zoom.getVivaldiUIZoom(t=>{const a=this.refs.siteInfoButton.getBoundingClientRect(),s=a.left*t+e.left-1,n=this.props.isInternal?60:360,{screen:r}=this.context,o=(r.availHeight-(a.bottom+e.top)*t>n?a.bottom+6:a.top-6)*t+e.top,l=i.a.getActiveWebView();l&&l.showPageInfo({top:Math.round(o),left:Math.round(s)})})})})}render(){let e="internal";return this.props.isEditingUrl||(e="security_error"===this.props.sslState?"insecure":"warning"===this.props.sslState?"warning":"secure_no_ev"===this.props.sslState?"secure":"secure_with_ev"===this.props.sslState?"certified":this.props.isInternal?"internal":"web"),n.a.createElement("button",{ref:"siteInfoButton",className:`button-addressfield SiteInfoButton ${e}`,title:this.props.isEditingUrl?Object(o.a)("Go to address"):Object(o.a)("Site info"),onClick:this.doActionShowPageInfo,draggable:this.props.draggable,onDragStart:this.props.onDragStart,tabIndex:this.props.tabIndex,__source:{fileName:d,lineNumber:129}},n.a.createElement("div",{className:"SiteInfoButton-SecurityBadge",__source:{fileName:d,lineNumber:142}},n.a.createElement(h,{pageSecurity:e,__source:{fileName:d,lineNumber:143}})),"certified"===e&&n.a.createElement("span",{className:"siteinfo-text",__source:{fileName:d,lineNumber:147}},this.props.sslIssuer),"warning"===e&&n.a.createElement("span",{className:"siteinfo-text",__source:{fileName:d,lineNumber:153}},Object(o.a)("Not Secure")))}}u(m,"contextType",r.a),t.a=m},function(e,t,a){"use strict";(function(e){var i=a(0),s=a.n(i),n=a(2),r=a(68),o=a(15),l=a.n(o),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\TimeInput.jsx";function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h=["hour","minute","meridiem"],m=function(e){return 1===e.length?`0${e}`:e.length>2?e.slice(e.length-2):e};class p extends s.a.PureComponent{constructor(t){super(t),u(this,"_focused",!1),u(this,"hidden",s.a.createRef()),u(this,"fieldRefs",{hour:s.a.createRef(),minute:s.a.createRef(),meridiem:s.a.createRef()}),u(this,"hr12",""),u(this,"getFormat",()=>this.props.format||l()().localeData().longDateFormat("LT")),u(this,"setCache",()=>{const[e="",t=""]=this.props.value.split(":");this.setState({hour:e,minute:t,dateCache:l()(`2010-10-20 ${this.props.value}`)})}),u(this,"processChange",e=>{this.props.onChange(e)}),u(this,"select",e=>{e.target instanceof HTMLInputElement&&(e.preventDefault(),e.target.select())}),u(this,"focus",()=>{this.fieldRefs.hour.current&&this.fieldRefs.hour.current.focus()}),u(this,"onKeyDown",t=>{const{key:a,target:i}=t,s=i.dataset.type;if(a){const e=h.indexOf(s);switch(a){case"ArrowRight":t.preventDefault();const a=e+1===h.length?e:e+1,i=this.fieldRefs[h.slice(a,a+1)[0]];return void(i.current&&i.current.select());case"ArrowLeft":t.preventDefault();const s=0===e?e:e-1,n=this.fieldRefs[h.slice(s,s+1)[0]];return void(n.current&&n.current.select())}}isNaN(Number(a))&&e.nextTick(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.select()})}),u(this,"switchMeridiem",e=>{const{target:t}=e,a=this.state.dateCache.set("minute",parseInt(this.state.minute)).add(12,"hour"),{type:i}=e.target.dataset;"meridiem"===i&&("ArrowUp"===e.key||"ArrowDown"===e.key||"wheel"===e.type&&t===document.activeElement||"string"==typeof e.key&&e.key.toLowerCase()===a.format("a")[0].toLowerCase())&&(e.preventDefault(),this.setInput(a),this.setState({dateCache:a})),this.onKeyDown(e)}),u(this,"onChangeTime",e=>{const{type:t}=e.target.dataset;let a=parseInt(e.target.value);const i=!e.nativeEvent.inputType,s=i&&this.props.step?parseInt(this.props.step):1;let n=!1;if(i&&"minute"===t&&a%s!=0){const e=parseInt(this.state.minute);n=!0,a<e?a=e-a%s:a-=a%s}const r="minute"===t?59:this.hr12?12:23,o="minute"!==t&&this.hr12?1:0,c="minute"===t?60:this.hr12?12:24;a>r?a=i?a%c:r:a<o&&(a=i?(a+c)%c:o);const d=m(a.toString());n&&e.target.setAttribute("value",d),!i&&10*a>r&&this.skipToNextField(t),this.setState({[t]:d},()=>{let{hour:e}=this.state;this.hr12&&parseInt(e)<12&&"pm"===this.state.dateCache.format(this.hr12).toLowerCase()&&(e=parseInt(e)+12);const t=l()(`${this.state.dateCache.format("YYYY-MM-DD")} ${e}:${this.state.minute}`);t.isValid()&&this.setInput(t)})}),u(this,"setInput",e=>{const t=this.hidden.current,a=(Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value")||{}).set;t&&a&&(a.call(t,e.format("HH:mm")),t.dispatchEvent(new Event("input",{bubbles:!0})))}),u(this,"onFocus",t=>{if(t.persist(),t.preventDefault(),this._focused)return;const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onFocus&&a instanceof HTMLElement&&Object(r.a)(a)&&(this._focused=!0,this.props.onFocus(t))})}),u(this,"onBlur",t=>{t.preventDefault(),t.persist();const a=t.target.closest(".dateInput");e.nextTick(()=>{this.props.onBlur&&a instanceof HTMLElement&&!Object(r.a)(a)&&(this._focused=!1,this.props.onBlur(t))})}),u(this,"keepFocusWithin",e=>{e.preventDefault(),Object(r.a)(e.target.nextElementSibling)||this.focus()}),u(this,"renderFields",()=>{const e=this.getFormat().replace(/[hma:]/gi,""),t={onFocus:this.select,onMouseDown:this.select,onMouseUp:e=>e.preventDefault(),onKeyDown:this.onKeyDown,onChange:this.onChangeTime,disabled:this.props.disabled},a=this.hr12?m(((parseInt(this.state.hour)+11)%12+1).toString()):this.state.hour;return s.a.createElement("span",{className:"faux time",__source:{fileName:c,lineNumber:299}},s.a.createElement("input",d({},t,{className:"dateInputHour",tabIndex:this.props.tabIndex,type:"number",ref:this.fieldRefs.hour,"data-type":"hour",placeholder:Object(n.a)("hh"),value:a,__source:{fileName:c,lineNumber:300}})),s.a.createElement("span",{className:"dateInputSeparator",__source:{fileName:c,lineNumber:311}},":"),s.a.createElement("input",d({},t,{className:"dateInputMinute",type:"number",ref:this.fieldRefs.minute,"data-type":"minute",tabIndex:this.props.tabIndex,step:this.props.step,placeholder:Object(n.a)("time","mm"),value:this.state.minute,__source:{fileName:c,lineNumber:312}})),this.hr12&&s.a.createElement("span",{__source:{fileName:c,lineNumber:324}},e),this.hr12&&s.a.createElement("input",d({},t,{type:"text",ref:this.fieldRefs.meridiem,"data-type":"meridiem",className:"dateInputAmPm",tabIndex:this.props.tabIndex,placeholder:"--",value:this.state.dateCache.format(this.hr12).trim(),onKeyDown:this.switchMeridiem,onWheel:this.switchMeridiem,onChange:this.select,__source:{fileName:c,lineNumber:326}})))});const a=this.getFormat().replace(/[hm:]/gi,"").trim();a&&(this.hr12=a);const[i="",o=""]=this.props.value.split(":");this.state={hour:i,minute:o,dateCache:l()(`2010-10-20 ${this.props.value}`)}}componentDidUpdate(e){e.value!==this.props.value&&this.setCache()}skipToNextField(t){const a=h.indexOf(t),i=a+1===h.length?a:a+1,s=h.slice(i,i+1)[0];e.nextTick(()=>{this.fieldRefs[s].current&&this.fieldRefs[s].current.select()})}render(){return s.a.createElement("span",{className:"dateInput time",title:this.props.title,onBlur:this.onBlur,onFocus:this.onFocus,__source:{fileName:c,lineNumber:345}},s.a.createElement("input",{type:"time",ref:this.hidden,tabIndex:"-1",className:"dateInputHidden",value:this.props.value,disabled:this.props.disabled,onMouseDown:this.keepFocusWithin,onChange:this.processChange,__source:{fileName:c,lineNumber:350}}),this.renderFields())}}t.a=p}).call(this,a(64))},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(141),s=a(5),n=a(362),r=a(20);const o=["http:","https:","file:","ftp:"];class l{constructor(){var e,t,a;a=(e,t)=>{if(!e)return Promise.resolve([]);const[a,...l]=e.replace(/\s+/g," ").trim().split(" ");return new Promise(e=>{s.a.historyPrivate.dbSearch({text:a,maxResults:1e3},a=>{e(a.filter(e=>{const t=e.url&&0!==e.lastVisitTime&&e.url.length<2048&&o.some(t=>(e.url||"").startsWith(t));return function(e,t){if(0===e.length)return!0;const{title:a,url:i}=t;return a&&e.every(e=>a.toLowerCase().includes(e.toLowerCase()))||i&&e.every(e=>i.toLowerCase().includes(e.toLowerCase()))}(l,e)&&t}).map(e=>{const t=function(e,t){const a=t.map(e=>new RegExp(Object(i.a)(e),"i")),{url:s,title:n}=e;return s&&a.every(e=>s.toLowerCase().match(e))?"/"===s.charAt(s.length-1)?"OMNI_RESULT_HISTORY_PROMOTED":"OMNI_RESULT_HISTORY_URL":n&&a.every(e=>n.toLowerCase().match(e))?"OMNI_RESULT_HISTORY_TITLE":"OMNI_RESULT_HISTORY_UNKNOWN"}(e,l);return{type:t,id:e.id,score:Object(n.b)(t,e),title:e.title||"",typed:Boolean(e.typedCount&&e.typedCount>0),url:r.a.getDisplayUrl(e.url||"")}}).sort((e,t)=>(t.score||0)-(e.score||0)).filter((e,a)=>a<t.count))})})},(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";t.a=class{constructor({provider:e}){this._searchProvider=e}search(e,t){const a=new Promise((i,s)=>this._searchProvider.search(e,t).then((...e)=>{a!==this._newestInstanceSearch&&s("A more recent search is in progress"),i(...e)}));return this._newestInstanceSearch=a,this._newestInstanceSearch}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(46),s=a(503),n=a(5);class r{constructor(){var e,t,a;a=(e,t)=>e?new Promise(a=>{const r=i.a.getByQuery(e),o=r?r.historyId:-1;n.a.historyPrivate.getTypedHistory(e,o,t.count,e=>a(Object(s.a)(e)))}):Promise.resolve([]),(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";(function(e){var i=a(39),s=a(22),n=a(103),r=a(88),o=a(62),l=a(233),c=a(115),d=a(162),u=a(19),h=a(92),m=a(49),p=a(12),g=a(9),b=a(57),f=a(1032),_=a(0),N=a.n(_),v=a(46),E=a(85),w=a(116),S=a(126),C=a(25),k=a(16),y=a(2),O=a(7),A=a(141),T=a(169),I=a(969),D=a(54),P=a(970),x=a(203),M=a(358),L=a(36),j=a(441),B=a(1),R=a(20),F="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandSearch.jsx";function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const W=Object(y.a)("Filter Quick Commands"),H="/resources/default_favicon_64.png",V=[B.kQuickCommandsKeepValue,B.kQuickCommandsOpenUrlInNewTab,B.kQuickCommandsSearchEnglish,B.kQuickCommandsMatchNickname,B.kQuickCommandsShowBookmarks,B.kQuickCommandsShowCalculator,B.kQuickCommandsShowHistory,B.kQuickCommandsShowNotes,B.kQuickCommandsShowPageActions,B.kQuickCommandsLimitResults],G={"⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9"};let K=0;class z extends N.a.PureComponent{constructor(...t){super(...t),U(this,"state",{quickCommandSearchValue:this.props.quickCommandValue||"",typeAheadHint:W,renderedArray:[],historyArr:[]}),U(this,"_isIMEOpen",!1),U(this,"_justClosedIME",!1),U(this,"expireTimeout",null),U(this,"contentScripts",[]),U(this,"openTabsInAllWindows",[]),U(this,"parser",new P.Parser),U(this,"_imeProcessSpace",!1),U(this,"onKeyDown",t=>{switch(this.qclist.setKeyedNavigation(!0),t.key){case"Process":this._isIMEOpen&&(this._imeProcessSpace=!0);break;case"Escape":this.onEscape(),t.preventDefault();break;case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":this.qclist.onKeyDown(t),t.preventDefault();break;case"Enter":{if(this._isIMEOpen||this.expireTimeout)break;const e=this.qclist.getSelectedIndex(),a=this.state.renderedArray[e];this.executeCommand(a,t);break}case"Tab":case"ArrowRight":if(Object(T.a)(t)||this._isIMEOpen)break;this.autoCompleteHint(),"Tab"===t.key&&t.preventDefault()}this._justClosedIME=!1,e.nextTick(()=>this.syncOffset())}),U(this,"onCompositionStart",()=>{this._isIMEOpen=!0}),U(this,"onCompositionEnd",()=>{this._isIMEOpen=!1,this._justClosedIME=!0,this.searchChange(this.state.quickCommandSearchValue,this.state.quickCommandSearchValue.length)}),U(this,"onEscape",()=>{this._isIMEOpen?this._justClosedIME=!1:(this.state.quickCommandSearchValue.length>0&&!this._justClosedIME&&!this._isIMEOpen?(this.props.storeQuickCommandValue(""),this.setState({quickCommandSearchValue:"",typeAheadHint:W},this.searchChange("",0))):this._justClosedIME||this.props.onClose(),this._justClosedIME=!1)}),U(this,"openBookmarkFolder",e=>{const t=[];O.default.bookmarks.getSubTree(e.command.id,e=>{e[0].children.forEach(e=>{e.url&&t.push(e)});const a={bookmarks:t,inCurrent:!this.props.prefValues[B.kQuickCommandsOpenUrlInNewTab]};i.a.open(a,!0)})}),U(this,"syncOffset",()=>{this.refs.quickCommand&&(this.refs.quickCommandHint.scrollLeft=this.refs.quickCommand.scrollLeft)}),U(this,"autoCompleteHint",()=>{const{quickCommandSearchValue:e,typeAheadHint:t}=this.state,{selectionStart:a,selectionEnd:i}=this.refs.quickCommand,s=this.qclist.getSelectedIndex(),n=this.state.renderedArray[s],{keyword:r}=n.command;if(n.command!==D.d)if(r){const{searchString:e}=n;this.setState({quickCommandSearchValue:e}),this.searchChange(e+" ",e.length),this.hintChange(e+" ")}else 0!==t.length&&e!==t&&e.length===a&&e.length===i&&(this.setState({quickCommandSearchValue:t}),this.searchChange(t,t.length))}),U(this,"executeCommand",(t,a)=>{const{id:s,value:n,name:o}=t,c=g.a.getActivePage().url.startsWith(R.a.internals.mailpage);if(t&&t.hasOwnProperty("type")){const e=this.props.prefValues[B.kQuickCommandsOpenUrlInNewTab];let d={inCurrent:!c};const u=a.ctrlKey&&!a.shiftKey&&!a.altKey,m=a.shiftKey&&!a.altKey&&!a.ctrlKey&&!a.metaKey;switch(u&&!e||u&&e?d={inBackground:!c,inCurrent:c}:m&&e?d={inCurrent:!c,inBackground:c}:(m&&!e||e)&&(d={inCurrent:!1}),t.type){case D.m:O.default.windows.update(t.command.get("windowId"),{focused:!0},()=>{O.default.tabs.update(t.command.get("id"),{active:!0})});break;case D.e:w.a.undeleteTab(t.command);break;case D.d:navigator.clipboard.writeText(o);break;case D.b:if(t.command.children)this.openBookmarkFolder(t);else{const e={bookmarks:[{url:t.command.url}],...d};i.a.open(e,!1)}break;case D.c:const e={bookmarks:[{url:t.command.url}],...d};i.a.open(e,!1);break;case D.a:this.openBookmarkFolder(t);break;case D.p:const a=o.trim();a.toLowerCase().startsWith("javascript:")?p.a.openURL(a,{...d,transition:E.a.TYPED}):p.a.openURL(Object(L.b)(a,{transition:E.a.TYPED}),d);break;case D.n:p.a.openURL(n,{transition:E.a.GENERATED,...d});break;case D.j:p.a.openURL(n,{transition:E.a.KEYWORD,...d});break;case D.g:case D.f:return void this.props.onClose().then(()=>{r.default.executeActions(s,n),this.props.storeQuickCommandValue("")});case D.i:p.a.openURL(t.command.url,d);break;case D.h:const c=g.a.getActivePage().get("id");l.a.toggleContentScript(c,o);break;case D.l:b.a.showContent("notes",{setFocus:!0,selectId:s});break;case D.k:h.a.createNote({content:n})}}this.setState({quickCommandSearchValue:""}),this.props.storeQuickCommandValue(""),e.nextTick(this.props.onClose)}),U(this,"onSearchChange",e=>{const t=e.target;this.searchChange(t.value,t.selectionStart)}),U(this,"cleanCurrentHistory",()=>{this.setState({historyArr:[]})}),U(this,"searchChange",(e,t)=>{const a=this.props.prefValues,s=[];t<=1&&this.cleanCurrentHistory();const n=this.getKeywordSearch(e);n.forEach(e=>s.push(e));const r=this.getCalculatorResult(e);void 0!==r&&s.push(r),this.getDefaultSearch(e).forEach(e=>s.push(e)),a[B.kQuickCommandsShowNotes]&&this.getCreateNote(e).forEach(e=>s.push(e)),this.getOpenTabs(e,this.openTabsInAllWindows).forEach(e=>s.push(e)),this.getCommands(e).forEach(e=>s.push(e));let o=[];if(a[B.kQuickCommandsShowBookmarks]&&(o=this.getBookmarkNicks(e),o.forEach(e=>s.push(e)),this.getBookmarkFolders(e).forEach((e,t)=>{(!a[B.kQuickCommandsLimitResults]||a[B.kQuickCommandsLimitResults]&&t<20)&&s.push(e)}),this.getBookmarks(e).forEach((e,t)=>{(!a[B.kQuickCommandsLimitResults]||a[B.kQuickCommandsLimitResults]&&t<20)&&s.push(e)})),a[B.kQuickCommandsShowNotes]&&this.getNotes(e).forEach((e,t)=>{(!a[B.kQuickCommandsLimitResults]||a[B.kQuickCommandsLimitResults]&&t<20)&&s.push(e)}),this.getClosedTabs(e).forEach(e=>s.push(e)),this.getUrl(e).forEach(e=>s.push(e)),a[B.kQuickCommandsShowPageActions]&&g.a.isActiveExternal()&&this.getContentScripts(e).forEach(e=>s.push(e)),a[B.kQuickCommandsShowHistory]){let i=[];t>1&&!this.state.historyArr.length&&(i=this.getHistory(e),this.setState({historyArr:i}));const n=this.filterOutHistory(e,i);this.addTitleToHistory(n).forEach((e,t)=>{(!a[B.kQuickCommandsLimitResults]||a[B.kQuickCommandsLimitResults]&&t<20)&&s.push(e)})}if(this.setState({quickCommandSearchValue:e,renderedArray:s},this.forceUpdate()),a[B.kQuickCommandsShowBookmarks]&&o.length){const e=s.findIndex(e=>e.type===D.b),t=s[e];if(this.selectByIndex(e),this.hintChange(t),t&&a[B.kQuickCommandsMatchNickname]){if(t.children)this.openBookmarkFolder(t);else{const e={bookmarks:[{url:t.url}],inCurrent:!1===a[B.kQuickCommandsOpenUrlInNewTab]};i.a.open(e,!1)}this.expireTimeout=setTimeout(()=>{this.setState({quickCommandSearchValue:""},()=>{this.props.onClose()})},200)}}else if(n.length)this.selectByIndex(0),this.hintChange(s[0]);else if(-1!==s.findIndex(e=>e.type===D.d)){const e=s.findIndex(e=>e.type===D.d);this.selectByIndex(e),this.hintChange(s[e])}else if(-1!==s.findIndex(e=>e.type===D.p)){const e=s.findIndex(e=>e.type===D.p);this.selectByIndex(e),this.hintChange(s[e])}else if(-1!==s.findIndex(e=>e.type===D.g&&e.value)){const e=s.findIndex(e=>e.type===D.g&&e.value);this.selectByIndex(e),this.hintChange(s[e])}else{let t=s.findIndex(t=>t.type!==D.k&&t.type!==D.o&&t.name.toLowerCase().startsWith(e.toLowerCase()));-1===t&&(t=s.findIndex(t=>(this.selectByIndex(0),t.type!==D.k&&t.type!==D.o&&-1!==t.name.toLowerCase().indexOf(e.toLowerCase())))),-1!==t&&this.selectByIndex(t),this.hintChange(s[t]),this.qclist.rerenderVisibleTreeItems()}}),U(this,"hintChange",e=>{if(e===W||""===e||e&&e.type===D.o)this.setState({typeAheadHint:W});else{const t=e,a=e,i=this.refs.quickCommand.value;if(a&&"string"!=typeof e&&-1!==t&&"search"!==a.type&&"url"!==a.type&&a.type!==D.k)if(""===i)this.setState({typeAheadHint:a.name});else{let e="";a.nickname&&0===a.nickname.toLowerCase().indexOf(i.toLowerCase())?e=a.nickname.substring(i.length,a.nickname.length)+": "+a.name:0===a.name.toLowerCase().indexOf(i.toLowerCase())?e=a.name.substring(i.length,a.name.length):-1!==a.name.toLowerCase().indexOf(i)?e=a.name.substring(a.name.toLowerCase().indexOf(i.toLowerCase())+i.length,a.name.length):a.url?e=a.url.substring(a.url.toLowerCase().indexOf(i.toLowerCase())+i.length,Math.min(i.length+250,a.url.length)):a.type===D.d&&(e=" = "+K),this.setState({typeAheadHint:i+e}),this.qclist.rerenderVisibleTreeItems()}else this.setState({typeAheadHint:""})}}),U(this,"getOpenTabs",(e,t)=>{const a=Object(M.a)(t.map(t=>{const a=t.command,i=R.a.getDisplayTitle(a)+a.get("url");let s=null;if(e&&(s=new RegExp(Object(A.a)(e),"i")),!s||i.match(s))return{id:a.get("id"),name:R.a.getDisplayTitle(a),url:R.a.isInternalUrl(a.get("url"))?"":a.get("url"),type:D.m,imageUrl:a.get("favIconUrl")||H,searchString:i,command:a}}));return a.length&&a.unshift({title:Object(y.a)("Tabs"),type:D.o,name:"title",id:"-7",url:"",count:a.length}),a}),U(this,"getKeywordSearch",e=>{const t=[],a=e.length>0&&e.indexOf(" ")>=1?v.a.getByQuery(e):null;if(a){const i=e.trim();let s=i.substring(i.indexOf(" "),i.length).trim();s=s.replace(/ +/g," "),t.push({id:a.name,name:Object(y.a)("Keyword Search “$1” on $2",[s.trim(),a.name]),url:"",nickname:a.keyword,type:D.j,imageUrl:a.faviconUrl,searchString:e,command:"fixed",value:a.url.replace(/%s/gi,s)})}return t}),U(this,"getDefaultSearch",e=>{const t=[],a=e.length>0?v.a.getDefault(k.a.isIncognito(this.context.vivaldiWindowId)):null;if(a){const i=encodeURIComponent(e.trim());t.push({id:a.name+"Default",name:Object(y.a)("Search “$1” on $2",[e.trim(),a.name]),type:D.n,imageUrl:a.faviconUrl,searchString:e,command:"fixed",value:a.url.replace(/%s/gi,i)})}return t}),U(this,"getCreateNote",e=>e.length<4?[]:[{id:"CreateNoteDefault",name:Object(y.a)("Create Note “$1”",[e.trim()]),type:D.k,searchString:e,command:"fixed",value:e}])}componentDidMount(){let e=[];O.default.tabs.query({windowType:"normal"},t=>{t.forEach(e=>{e.type="openTab",e.command=n.a.tabToPage(e)}),this.openTabsInAllWindows=t;const a=this.getOpenTabs("",this.openTabsInAllWindows),i=this.getCommands("");if(e=[...a,...i],this.setState({renderedArray:e}),this.selectByIndex(1),this.props.prefValues[B.kQuickCommandsKeepValue]){const e=this.state.quickCommandSearchValue;this.refs.quickCommand&&e.length&&(this.refs.quickCommand.setSelectionRange(0,e.length),this.searchChange(e,e.length))}}),c.a.getContentScripts().then(e=>this.contentScripts=e.toJS())}componentWillUnmount(){const e=this.state.quickCommandSearchValue;this.props.prefValues[B.kQuickCommandsKeepValue]&&e.length?this.props.storeQuickCommandValue(e):this.props.storeQuickCommandValue("")}componentDidUpdate(){this._imeProcessSpace&&this._isIMEOpen&&(this.cleanCurrentHistory(),this._imeProcessSpace=!1)}filterOutHistory(e,t){const a=Object(j.a)(e),i=(t=t.length?t:this.state.historyArr).filter(t=>-1!==t.url.indexOf(e)||t.name.toLowerCase().match(a));return i.sort((e,t)=>e.visitTime<t.visitTime?1:-1),t.length>=6e3&&this.setState({historyArr:i}),i}getCalculatorResult(e){if(this.props.prefValues[B.kQuickCommandsShowCalculator]){const t=e.trim().replace(/,/g,".").replace(/x/gi,"*").replace(/([^\s])([⁰¹²³⁴⁵⁶⁷⁸⁹]+)/gu,"$1 ^ $2 ").replace(/[⁰¹²³⁴⁵⁶⁷⁸⁹]/gu,e=>G[e]);if(t){let e=void 0;try{e=this.parser.evaluate(t)}catch(e){}if(!isNaN(e)){K=e.toLocaleString();const t=`${String.fromCharCode(8722)}0`,a=`${String.fromCharCode(45)}0`;return K!==t&&K!==a||(K="0",e=0),{name:K,command:D.d,value:e,id:"calculator",type:D.d}}}}}selectByIndex(e){this.qclist&&this.qclist.selectByIndex(e)}getCommands(e){const t=[];return o.default.getQuickCommands().filter(t=>Object(I.a)(e,t,this.props.prefValues[B.kQuickCommandsSearchEnglish])).forEach(e=>{const{name:a,label:i,shortcut:s}=e;let n,r=i;e.keyword&&(e.foundKeyword?(n=e.paramValue,r=Object(y.a)("Run $1",[i])):r=i+" #"),t.push({id:a,name:r,type:D.g,url:"",meta:s?s[0]:"",faviconurl:"",command:e,searchString:i,value:n})}),t.length&&t.unshift({title:Object(y.a)("Commands"),type:D.o,name:"title",id:"-90",url:""}),t}addTitleToHistory(e){const t=e.length;return t>0?(e.unshift({title:Object(y.a)("History"),type:D.o,name:D.o,id:"history",url:"",count:t}),e):[]}getHistory(e){const t=[];return d.a.getFilteredHistory(e).forEach(e=>{t.push({command:e,type:D.i,name:e.title,imageUrl:"chrome://favicon/"+e.url,url:e.url,...e})}),t}getBookmarkNicks(e){const t=[];return s.a.getNicknamed(e,!1,!1).forEach(e=>{t.push({command:e,type:D.b,name:e.title,url:e.url,nickname:e.nickname,imageUrl:e.children?"/resources/folder@2x.png":"chrome://favicon/"+e.url})}),t.length>0&&t.unshift({title:Object(y.a)("Nickname Match"),type:D.o,name:"",id:"bookmarksNick",url:""}),t}getBookmarkFolders(e){const t=e.toLowerCase(),a=[];if(e.length>0){const i=s.a.getFilteredFlat(e,{bookmarks:!1,folders:!0,inTrash:!1});i.length>0&&i.forEach(i=>{i.nickname.toLowerCase()!==t&&(0===i.nickname.toLowerCase().indexOf(t)||e.length>1)&&a.push(Object.assign(i,{command:i,type:D.a,name:i.title,nickname:i.nickname,imageUrl:"/resources/folder@2x.png"}))}),a.length>0&&a.unshift({title:Object(y.a)("Open All Bookmarks in Folder"),type:D.o,name:"",id:"bookmarkFolder",url:"",count:a.length})}return a}getBookmarks(e){const t=e.toLowerCase(),a=[];if(e.length>0){const i=s.a.getFilteredFlat(e,{bookmarks:!0,folders:!1,inTrash:!1});i.length>0&&i.forEach(i=>{i.nickname.toLowerCase()!==t&&(0===i.nickname.toLowerCase().indexOf(t)||e.length>1)&&a.push(Object.assign(i,{command:i,type:D.c,name:i.title,url:i.url,nickname:i.nickname,imageUrl:"chrome://favicon/"+i.url}))}),a.length>0&&a.unshift({title:Object(y.a)("Bookmarks"),type:"title",name:"",id:"bookmarks",url:"",count:a.length})}return a}getUrl(e){if(e&&(Object(L.k)(e)||Object(L.g)(e))){const t=Object(L.b)(e);return[{title:Object(y.a)("Go to Address"),type:"title",name:"",id:"gotourl"},{id:e,name:e.trim(),url:"",meta:"",type:D.p,imageUrl:"chrome://favicon/"+t,searchString:e,command:"fixed"}]}return[]}getContentScripts(e){const t=[];let a="";if(e&&e.indexOf(" ")){let t="";e.split(" ").forEach(e=>{t+=`(?=.*?(${Object(A.a)(e)}))`}),a=new RegExp(t,"gi")}return this.contentScripts.forEach(e=>{e.name.match(a)&&e.name!==x.a&&t.push({type:D.h,command:e.code,name:e.name,url:"",id:e.name+e.type,meta:""})}),t.length&&t.unshift({title:Object(y.a)("Page Actions"),type:D.o,name:"",id:"contentType"}),t}getNotes(e){const t=[];if(e.length>1){const a=m.b.getFilteredFlat(e,{inTrash:!1});a.length>0&&a.forEach(e=>{const a=e.attachments&&e.attachments.length>0;t.push({...e,command:e,type:D.l,name:e.title||e.content||"",url:e.url,nickname:e.title?e.content:"",imageUrl:a})}),t.length>0&&t.unshift({title:Object(y.a)("Notes"),type:D.o,name:"Notes",id:"note_id",url:"",count:t.length})}return t}getClosedTabs(e){const t=t=>{const a=t.title+" "+t.url;let i=null;if(e&&(i=new RegExp(Object(A.a)(e),"i")),!i||a.match(i))return{id:t.sessionId+"closed",name:t.title,url:R.a.isInternalUrl(t.url)?"":t.url,type:D.e,imageUrl:t.favIconUrl||H,searchString:a,command:t}};let a=[];return S.a.getTrash().forEach(e=>{e.window?e.window.tabs.forEach(e=>a.push(t(e))):a.push(t(e.tab))}),a=a.filter(e=>e),a.length&&a.unshift({title:Object(y.a)("Closed Tabs"),type:D.o,name:"title",id:"-8-closed-title",url:"",count:a.length}),a}render(){return N.a.createElement("div",{className:"quick-command-container",__source:{fileName:F,lineNumber:1190}},N.a.createElement("div",{className:"qc-entry",__source:{fileName:F,lineNumber:1191}},N.a.createElement("input",{tabIndex:"-1",readOnly:!0,ref:"quickCommandHint",className:"quick-command-search-hint",value:this.state.typeAheadHint,__source:{fileName:F,lineNumber:1192}}),N.a.createElement("input",{type:"search",autoFocus:!0,ref:"quickCommand",className:"quick-command-search",onKeyDown:this.onKeyDown,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd,value:this.state.quickCommandSearchValue,onChange:this.onSearchChange,__source:{fileName:F,lineNumber:1198}})),N.a.createElement(f.a,{ref:e=>this.qclist=e,renderedArray:this.state.renderedArray,onExecuteCommand:this.executeCommand,hintChange:this.hintChange,__source:{fileName:F,lineNumber:1209}}))}}U(z,"contextType",C.a),t.a=Object(u.a)(z,V)}).call(this,a(64))},,,,function(e,t,a){"use strict";var i=a(141),s=a(6);const n=Object(s.a)("keyword","default");t.a=function(e,t,a){const s=(e=e.trim()).trim().split(" ").filter(e=>e).map(e=>e.toLowerCase()),r=[t.label.toLowerCase(),...a?[t.labelEnglish.toLowerCase()]:[]],o=((e,t,a)=>{if(!e.keyword)return!1;const i=[];let s=0;if(t.find(t=>(i.push(t),s++,[e.label.split(" ").map(e=>e.toLowerCase()),...a?[e.labelEnglish.split(" ").map(e=>e.toLowerCase())]:[]].find(e=>e.reverse().join("")===i.join("")||(e.reverse().join("")===i.reverse().join("")||(e.join("")===i.join("")||e.join("")===i.reverse().join(""))))))){const{min:a,max:i,type:r,defaultValue:o}=e.keyword;let l=t.slice(s).join(" ");if(l===n.label.toLowerCase()||l===n.labelEnglish.toLowerCase())return Object.assign(e,{foundKeyword:!0},{paramValue:o});if("number"===r){if(l=parseInt(l),isNaN(l))return;l<a&&(l=a),l>i&&(l=i)}return Object.assign(e,{paramValue:l,foundKeyword:!0})}})(t,s,a);if(o)return o;if(l=e,r.find(e=>{let t="";if(l&&l.indexOf(" ")){let e="";l.split(" ").forEach(t=>{e+=`(?=.*?(${Object(i.a)(t)}))`}),t=new RegExp(e,"gi")}let a=e.match(t);return a||e.indexOf(" ")>0&&(a=e.replace(/\s/g,"").match(t)),a}))return Object.assign(t,{foundKeyword:!1});var l}},,function(e){e.exports=JSON.parse('{"sites":[{"title":"Vivaldi Browser Help Center","url":"https://help.vivaldi.com","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAKQ2lDQ1BJQ0MgcHJvZmlsZQAAeNqdU3dYk/cWPt/3ZQ9WQtjwsZdsgQAiI6wIyBBZohCSAGGEEBJAxYWIClYUFRGcSFXEgtUKSJ2I4qAouGdBiohai1VcOO4f3Ke1fXrv7e371/u855zn/M55zw+AERImkeaiagA5UoU8Otgfj09IxMm9gAIVSOAEIBDmy8JnBcUAAPADeXh+dLA//AGvbwACAHDVLiQSx+H/g7pQJlcAIJEA4CIS5wsBkFIAyC5UyBQAyBgAsFOzZAoAlAAAbHl8QiIAqg0A7PRJPgUA2KmT3BcA2KIcqQgAjQEAmShHJAJAuwBgVYFSLALAwgCgrEAiLgTArgGAWbYyRwKAvQUAdo5YkA9AYACAmUIszAAgOAIAQx4TzQMgTAOgMNK/4KlfcIW4SAEAwMuVzZdL0jMUuJXQGnfy8ODiIeLCbLFCYRcpEGYJ5CKcl5sjE0jnA0zODAAAGvnRwf44P5Dn5uTh5mbnbO/0xaL+a/BvIj4h8d/+vIwCBAAQTs/v2l/l5dYDcMcBsHW/a6lbANpWAGjf+V0z2wmgWgrQevmLeTj8QB6eoVDIPB0cCgsL7SViob0w44s+/zPhb+CLfvb8QB7+23rwAHGaQJmtwKOD/XFhbnauUo7nywRCMW735yP+x4V//Y4p0eI0sVwsFYrxWIm4UCJNx3m5UpFEIcmV4hLpfzLxH5b9CZN3DQCshk/ATrYHtctswH7uAQKLDljSdgBAfvMtjBoLkQAQZzQyefcAAJO/+Y9AKwEAzZek4wAAvOgYXKiUF0zGCAAARKCBKrBBBwzBFKzADpzBHbzAFwJhBkRADCTAPBBCBuSAHAqhGJZBGVTAOtgEtbADGqARmuEQtMExOA3n4BJcgetwFwZgGJ7CGLyGCQRByAgTYSE6iBFijtgizggXmY4EImFINJKApCDpiBRRIsXIcqQCqUJqkV1II/ItchQ5jVxA+pDbyCAyivyKvEcxlIGyUQPUAnVAuagfGorGoHPRdDQPXYCWomvRGrQePYC2oqfRS+h1dAB9io5jgNExDmaM2WFcjIdFYIlYGibHFmPlWDVWjzVjHVg3dhUbwJ5h7wgkAouAE+wIXoQQwmyCkJBHWExYQ6gl7CO0EroIVwmDhDHCJyKTqE+0JXoS+cR4YjqxkFhGrCbuIR4hniVeJw4TX5NIJA7JkuROCiElkDJJC0lrSNtILaRTpD7SEGmcTCbrkG3J3uQIsoCsIJeRt5APkE+S+8nD5LcUOsWI4kwJoiRSpJQSSjVlP+UEpZ8yQpmgqlHNqZ7UCKqIOp9aSW2gdlAvU4epEzR1miXNmxZDy6Qto9XQmmlnafdoL+l0ugndgx5Fl9CX0mvoB+nn6YP0dwwNhg2Dx0hiKBlrGXsZpxi3GS+ZTKYF05eZyFQw1zIbmWeYD5hvVVgq9ip8FZHKEpU6lVaVfpXnqlRVc1U/1XmqC1SrVQ+rXlZ9pkZVs1DjqQnUFqvVqR1Vu6k2rs5Sd1KPUM9RX6O+X/2C+mMNsoaFRqCGSKNUY7fGGY0hFsYyZfFYQtZyVgPrLGuYTWJbsvnsTHYF+xt2L3tMU0NzqmasZpFmneZxzQEOxrHg8DnZnErOIc4NznstAy0/LbHWaq1mrX6tN9p62r7aYu1y7Rbt69rvdXCdQJ0snfU6bTr3dQm6NrpRuoW623XP6j7TY+t56Qn1yvUO6d3RR/Vt9KP1F+rv1u/RHzcwNAg2kBlsMThj8MyQY+hrmGm40fCE4agRy2i6kcRoo9FJoye4Ju6HZ+M1eBc+ZqxvHGKsNN5l3Gs8YWJpMtukxKTF5L4pzZRrmma60bTTdMzMyCzcrNisyeyOOdWca55hvtm82/yNhaVFnMVKizaLx5balnzLBZZNlvesmFY+VnlW9VbXrEnWXOss623WV2xQG1ebDJs6m8u2qK2brcR2m23fFOIUjynSKfVTbtox7PzsCuya7AbtOfZh9iX2bfbPHcwcEh3WO3Q7fHJ0dcx2bHC866ThNMOpxKnD6VdnG2ehc53zNRemS5DLEpd2lxdTbaeKp26fesuV5RruutK10/Wjm7ub3K3ZbdTdzD3Ffav7TS6bG8ldwz3vQfTw91jicczjnaebp8LzkOcvXnZeWV77vR5Ps5wmntYwbcjbxFvgvct7YDo+PWX6zukDPsY+Ap96n4e+pr4i3z2+I37Wfpl+B/ye+zv6y/2P+L/hefIW8U4FYAHBAeUBvYEagbMDawMfBJkEpQc1BY0FuwYvDD4VQgwJDVkfcpNvwBfyG/ljM9xnLJrRFcoInRVaG/owzCZMHtYRjobPCN8Qfm+m+UzpzLYIiOBHbIi4H2kZmRf5fRQpKjKqLupRtFN0cXT3LNas5Fn7Z72O8Y+pjLk722q2cnZnrGpsUmxj7Ju4gLiquIF4h/hF8ZcSdBMkCe2J5MTYxD2J43MC52yaM5zkmlSWdGOu5dyiuRfm6c7Lnnc8WTVZkHw4hZgSl7I/5YMgQlAvGE/lp25NHRPyhJuFT0W+oo2iUbG3uEo8kuadVpX2ON07fUP6aIZPRnXGMwlPUit5kRmSuSPzTVZE1t6sz9lx2S05lJyUnKNSDWmWtCvXMLcot09mKyuTDeR55m3KG5OHyvfkI/lz89sVbIVM0aO0Uq5QDhZML6greFsYW3i4SL1IWtQz32b+6vkjC4IWfL2QsFC4sLPYuHhZ8eAiv0W7FiOLUxd3LjFdUrpkeGnw0n3LaMuylv1Q4lhSVfJqedzyjlKD0qWlQyuCVzSVqZTJy26u9Fq5YxVhlWRV72qX1VtWfyoXlV+scKyorviwRrjm4ldOX9V89Xlt2treSrfK7etI66Trbqz3Wb+vSr1qQdXQhvANrRvxjeUbX21K3nShemr1js20zcrNAzVhNe1bzLas2/KhNqP2ep1/XctW/a2rt77ZJtrWv913e/MOgx0VO97vlOy8tSt4V2u9RX31btLugt2PGmIbur/mft24R3dPxZ6Pe6V7B/ZF7+tqdG9s3K+/v7IJbVI2jR5IOnDlm4Bv2pvtmne1cFoqDsJB5cEn36Z8e+NQ6KHOw9zDzd+Zf7f1COtIeSvSOr91rC2jbaA9ob3v6IyjnR1eHUe+t/9+7zHjY3XHNY9XnqCdKD3x+eSCk+OnZKeenU4/PdSZ3Hn3TPyZa11RXb1nQ8+ePxd07ky3X/fJ897nj13wvHD0Ivdi2yW3S609rj1HfnD94UivW2/rZffL7Vc8rnT0Tes70e/Tf/pqwNVz1/jXLl2feb3vxuwbt24m3Ry4Jbr1+Hb27Rd3Cu5M3F16j3iv/L7a/eoH+g/qf7T+sWXAbeD4YMBgz8NZD+8OCYee/pT/04fh0kfMR9UjRiONj50fHxsNGr3yZM6T4aeypxPPyn5W/3nrc6vn3/3i+0vPWPzY8Av5i8+/rnmp83Lvq6mvOscjxx+8znk98ab8rc7bfe+477rfx70fmSj8QP5Q89H6Y8en0E/3Pud8/vwv94Tz+4A5JREAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADKGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNjMzMzk4REEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNjMzMzk4RUEzQ0UxMUU4OEQxNUUwM0EyM0ZDRkY5NyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MzMzOThCQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM2MzMzOThDQTNDRTExRTg4RDE1RTAzQTIzRkNGRjk3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CzB6ggAABmJJREFUeNrEV1loVGcU/u4yk0xWs5hJE2PERNCKcX9QhBZR1Iii9UERRNFaRdu+iBL3uiDigj5UQaQPFeuCiMQNKxTy4Ip7K6iYxKhxS2LWyTYz995+/507mTszd9rSFjxwQubOnf98/znn+/7zS4Zh4FOaKv60TpwY+zyJXk6fRB9Cz6f3o6fQ3XSFLjmsp9ED9B56O72B/oJ+l/4r/ZX95X43boQAxNh39Ap6wf+40W8scEfp31sgIxmw2U/0pQmXkbhplszo7obR1cV99oSeu92QUlIgeTzMjWK+42AiayvpX9DH0btiAXydMLgsE3MA+ps3MDQNckEB1KFDIeXmmqCMtjbo9fWmG3xPKSxksVgtTXNabRi9kj7VDsBF/9Fxx9yR/vKluZhr6lS4Z86EOm4clIEDQ8As09+/R/DRI/ivXIH/8mUYBKuUlITW0PXYladY/XUtDKDcary4dGuPH5sBPevWwT1lSsLqyPn5cAufNg3BpUvRtXcv/BcuQB08OFE2RMavhbcw2TH4kydIWrAAmdzRXwWPo9aIEcg4dgwpmzZBq6sDOjujsmXZBBO49aEktuba06dIWrgQaYcPc0X1X7V+ypo18OzYgWBtrVMGiuwAvJFeDdVcHT0aaYcO/Wf+paxahaRFi6A9fx5iSMR0O4DMvsd+Pwx66oEDfY/a791D9fr18LEf/s6C7e2o37kTTSdP9j1L3b0bsmBGS0scgHBuPeHaa69eIWnuXKhlZeYj38OHeDR9OnqamtDw8zGMvXsHSQXOGiUoWMMGbDh71iS9RjDeFSsgp6bCtXw5erdsgZKZGaUTso2GIbrQ3QQQNt/vfyDI4LmTJiHY0oyX235IuHudwtTNLGUMHw7V5YLv+vVIZefMQdDrhdzbG91uNpUyFU4ZNAjq+PF9L+SUz0DG2LHwv36NtM+Ho/GXk2i/dcsRgJKejqzycgSpASp3nbdkSeRwGTAAwZFl0JqbHQGYB4vh80EmADkrq+8FF9WumPUPvHsHxaXCRU6/3ro1YRbSJ0xAT2srcubPR/rkyVGB9JJS+BhDlaQ4ACFjCmUhrzGWO28esikwPdXVSC4tQXtVFZpOnHAE0HX7tnlcFmzeHPedKzsbvmAQOntAcgQQ1n0HKyafTS4TpIcyXM8A3dQKu3WSLW/370fR9u1wia6PFSiuHWDwTvaZYmUhOhpPNSOaKhEqjRwJ7+LF6Hn2zJRccTjVUCU/HDyIljNn8H7PHlRTLVOp//kbNzo3KVnhYuBuAghYTAjT0PwksXF00tCgdIr/Y62wogIt586ZrEgqKoL28SPecbeSlTWdtS86fjxhFgMvXkBNTjZLIEBk2TKghwFolE1xqjmZizsvoLwGamogsRyi65O5Y8/gEpNGWbNnI4OnpZNpzGzvgwdQ2QcuqxT2EgTCMmyQp/6LFxN2uXf1aqSOGYMAqSZzIbGA4e81+8O7bVvC3/kuXUKQGVDS0szfyDFNGBptiEphantPn4b+9q3zSgRZQBrqjY2QmEaJB5WfOp9NzntGjUoIoO3oUZPSssX5WBa0R7ot1dSDjoqKhItlzJiBzFmz0H3/PgIsmYvy6t2wIeH7Lfv2IUCGiBLaZFiyA2iMFIu1LS1F4Px5tNoOpLiG5KJpVEyFTVV45AiU/v2ddeHqVbTs2gW3mI6iJyPVzoK62IFE/MDHDu+mcHy2dm18QxYXo4SSrHd0QGYzOgavrETDypVQc3LMA8mwZgKRA+rAB3sGrkcTVodOyc3gONVJELU84fxiLnQaxRyC66RxMxvyw7Jl5vdKXl5f8DDlGPiOuVdxM+LFRMwDrfGiKMMgmHqOZgqPYFPfWftk0WxS/L0kwGYUKfedOoVeUtnFDUgO86DQgVRFmZNz82ZlGIB4Tq3FpqjzXaSagbrozRQfcPIV6XQPG4Yk9onKrhYiJARIUMxPoJqgJ98RuzZrHnNH0EJrPkuT5aEZvBnZAQirsi4OsLeqTACt7AVxkiuclnTeA8xBU9BQHCykpsxLiUw2mJcTi9JO9zYKVkeaopSxBHUZDlezL637wWp7FszZTqiXuJTwvBAdLwl3HIuiAxu2NdySVOWR5WUiuJ7gaibsW7qYRr+yRuchmmHkuWVZETfTHnGS/bN51CDANmavlgEfcAa4SAC/9el+OMOf+nr+pwADAAZ5culxNH/mAAAAAElFTkSuQmCC"},{"title":"WikiPedia","url":"https://www.wikipedia.org","faviconURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfhBAwKMAfiL115AAACxklEQVRIx6WVX2jVZRjHP7/T8c9pg2nhv2yDXWg4gqGsQGci68J/FRhq4IUohISpiQpeRoi48DJML0yCukpEiV0oIuaIqTSmUtREFCdhjTTFnTPP9Jz308X57efZ2aJ19vyu3ud9ns/zfX/P+ycKANN4mxZ2MH77gm7O8wgIhEzoClbxdYVMgDA3XKwq3WC4GOamaGHZ/5A+0pbRkmJx1ekAi6PghACkyUU11aebS0OWIhleAOAZQ2QYJEMagCcEppBnKmngCTKJPLVEQI4UNaQjTnGYQWYSUeAeb/Iph7jCS6R4Ro4NtPEZfzCNPJNZSyu7GaSOAaayk/chZPP2+KGIuNc7Fu33c1Piy54ya8FeV4jLvWzWor+6VFxjjwVDlpBVzbtWrPWaw7ZVnGlvPNrpfG8lc3t81b9US4BgUM9YJx4qudVuZ4j7VP3TBR5TS5EDtnkwjisD5HxXbPBxDNBPxDpvqvtsNZcATjrPO/EoAQT1WxGPJoE91op77LPe7xNvcIXbLA5v5nLAY5vFRQ4kGraI9ba5wacJ4Lr1/jRcvxwQ1HYx8rskuMuM+KJXE49ud/Xw+kcDbtsovmUh0bBRnG5vAvjdVzz3PN2QTZVtSxpZBXTxQzyGVuAhXwIRAF8zv/LwPlcQ1J+dJG52KO7MEueIc/xF1Uc2eby8/kgFAK/zDtDBb0TAV8gxaujnGwBOIB9UnqdyBUHtdIq4S+23yQ51vTjLG+pCj4ysP/InlgBDrhIb/NuDvmdBvWBaPOBZm73/X4CgnhbxIxf5o6Vzsk58zTfcX5k+NuCBzSJ+bDFu52kz4mzvjg+gh8V6byXdH3SluLd8A/1bF0rdX0MDm2jE2JNhI9NZH89WdmHUba8FO+wrq6b3PWF+dH2DhPaxEJViHUu+wdCe5tIYd+04PLFdStFNZ9W3eifdE35co4k+7/8AeaKDkPxRJzsAAAAASUVORK5CYII="}]}')},function(e,t,a){"use strict";(function(e){var i=a(526),s=a(22),n=a(527),r=a(19),o=a(42),l=a(8),c=a(10),d=a(0),u=a.n(d),h=a(29),m=a.n(h),p=a(170),g=a(131),b=a(26),f=a(32),_=a(2),N=a(7),v=a(68),E=a(31),w=a(1),S=a(13),C="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks\\BookmarksPanel.jsx";function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y=[w.kBookmarksPanelEditorHeight],O=[{text:Object(_.a)("Title"),value:"title",fullScreenTitle:Object(_.a)("Sort by Title")},{text:Object(_.a)("Address"),value:"url",fullScreenTitle:Object(_.a)("Sort by Address")},{text:Object(_.a)("Nickname"),value:"nickname",fullScreenTitle:Object(_.a)("Sort by Nickname")},{text:Object(_.a)("Description"),value:"description",fullScreenTitle:Object(_.a)("Sort by Description")},{text:Object(_.a)("Created"),value:"dateAdded",fullScreenTitle:Object(_.a)("Sort by Date Created")}];class A extends u.a.PureComponent{constructor(...t){super(...t),k(this,"refEditor",u.a.createRef()),k(this,"state",{filter:"",editorHeight:this.props.prefValues[w.kBookmarksPanelEditorHeight],upgraded:void 0,sorting:{sortOrder:f.a.NO_SORTING,sortField:"manually",comparator:this.sortComparator}}),k(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(v.a)(m.a.findDOMNode(this))&&this.focusTree()}),k(this,"onBookmarkStoreChange",()=>{this.setState({upgraded:s.a.getIsUpgraded()})}),k(this,"onSelect",e=>{this.refEditor.current&&this.refEditor.current.setItem(e)}),k(this,"addBookmark",()=>{this.onAdd(!1)}),k(this,"addFolder",()=>{this.onAdd(!0)}),k(this,"onAdd",t=>{this.setState({filter:""}),this.state.editorHeight>0&&this.refEditor.current?this.refEditor.current._save().then(e.nextTick(()=>this._tree.onAdd(t))):(this.setEditorVisible(),this._tree.onAdd(t))}),k(this,"onCreate",e=>{e&&(this.setEditorVisible(),this.refEditor.current&&this.refEditor.current.setIsCreating(!0))}),k(this,"onEditorCanceled",(e,t)=>{t&&e?this._tree.deleteSelectedItems().then(()=>{N.default.bookmarks.remove(e),this.focusTree()}):this.focusTree()}),k(this,"setEditorVisible",()=>{const e=this.state.editorHeight<230?this.props.prefValues[w.kBookmarksPanelEditorHeight]:this.state.editorHeight;this.updateEditorVisiblityWithHeight(e,!0)}),k(this,"focusTree",()=>{this._tree.refs.treeList.focusTree()}),k(this,"deleteSelectedItems",()=>{this._tree.deleteSelectedItems()}),k(this,"onSortChange",(e,t)=>{const a={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:a});const i={sortOrder:e,sortField:t};l.a.set(w.kBookmarksPanelSorting,i)}),k(this,"sortComparator",(e,t)=>s.a.treeSortComparator(e,t,this.state.sorting)),k(this,"collapseAll",()=>{this._tree.collapseAllFolders()}),k(this,"expandAll",()=>{this._tree.expandAllFolders()}),k(this,"getSelectedItem",()=>this._tree.getSelectedItem()),k(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();e.nativeEvent.buttons>0&&this._tree.unSelectAll(),this._tree.onContextMenu(e,t)}),k(this,"onSearchChange",e=>{this.setState({filter:e.target.value})}),k(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,600),0)}))}),k(this,"onSlideBarStop",()=>{this.updateEditorVisiblityWithHeight(this.state.editorHeight,!0)}),k(this,"onSlidebarToggle",()=>{const e=this.state.editorHeight>E.g?0:230;this.updateEditorVisiblityWithHeight(e,!0)}),k(this,"updateEditorVisiblityWithHeight",(e,t)=>{e<E.g?e=0:e>600&&(e=600),t&&l.a.set(w.kBookmarksPanelEditorHeight,e),this.setState({editorHeight:e})})}componentDidMount(){const e=c.a.get(w.kBookmarksPanelSorting);this.onSortChange(e.sortOrder,e.sortField),o.a.addChangeListener(this.onPanelStoreChange),s.a.addChangeListener(this.onBookmarkStoreChange)}componentWillUnmount(){o.a.removeChangeListener(this.onPanelStoreChange),s.a.addChangeListener(this.onBookmarkStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this.focusTree())}render(){if(!this.props.open)return null;const e=this.props.title+(!1===this.state.upgraded?" (needs upgrade)":"");return u.a.createElement("div",{className:"panel panel-bookmarks",__source:{fileName:C,lineNumber:273}},u.a.createElement("header",{__source:{fileName:C,lineNumber:274}},u.a.createElement("h1",{__source:{fileName:C,lineNumber:275}},e),u.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:C,lineNumber:277}},u.a.createElement("input",{type:"search",placeholder:Object(_.a)("verb","Search"),value:this.state.filter,onChange:this.onSearchChange,__source:{fileName:C,lineNumber:278}}),u.a.createElement("div",{className:"toolbar-nowrap",__source:{fileName:C,lineNumber:283}},u.a.createElement("div",{className:"toolbar-group",__source:{fileName:C,lineNumber:284}},u.a.createElement(b.a,{onClick:this.addBookmark,tooltip:Object(_.a)("New Bookmark"),image:S.f.medium,__source:{fileName:C,lineNumber:285}}),u.a.createElement(b.a,{onClick:this.deleteSelectedItems,tooltip:Object(_.a)("other","Delete"),image:S.Lb.medium,__source:{fileName:C,lineNumber:290}})),u.a.createElement(b.a,{onClick:this.addFolder,tooltip:Object(_.a)("command","New Folder"),image:S.Q.medium,__source:{fileName:C,lineNumber:296}})))),u.a.createElement(g.a,{fields:O,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:C,lineNumber:306}}),u.a.createElement("section",{onContextMenu:this.onContextMenu,__source:{fileName:C,lineNumber:313}},u.a.createElement(n.a,{ref:e=>this._tree=e,filter:this.state.filter,fullView:!1,inManager:!1,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,__source:{fileName:C,lineNumber:315}})),u.a.createElement("section",{className:"panel-bookmarks-edit limited",style:{flexBasis:this.state.editorHeight},__source:{fileName:C,lineNumber:324}},u.a.createElement(p.a,{onStop:this.onSlideBarStop,onSlidebarPosition:this.onSlidebarPosition,onDoubleClick:this.onSlidebarToggle,returnOffset:!0,position:"bottom",__source:{fileName:C,lineNumber:326}}),this.state.editorHeight>0&&u.a.createElement(i.a,{ref:this.refEditor,updateLayout:this.setEditorVisible,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:C,lineNumber:333}})))}}t.a=Object(r.a)(A,y)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(117),s=a(1037),n=a(1033),r=a(19),o=a(12),l=a(42),c=a(8),d=a(10),u=a(0),h=a.n(u),m=a(29),p=a.n(m),g=a(170),b=a(32),f=a(25),_=a(16),N=a(2),v=a(7),E=a(68),w=a(6),S=a(31),C=a(1),k=a(200),y=a(974),O=a(111),A="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanel.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e,t){if("extension"===e)return"startTime";if(t===b.a.ASCENDING_SORT)return e;switch(e){case"bytesReceived":return"-bytesReceived";case"endTime":return"-endTime";case"filename":return"-filename";case"startTime":return"-startTime";case"url":return"-url"}return"startTime"}const D=[C.kDownloadsPanelEditorHeight];function P(e){return"complete"===e.state&&e.mime.startsWith("image/")}class x extends h.a.PureComponent{constructor(...e){super(...e),T(this,"defaultHeight",d.a.getDefault(C.kDownloadsPanelEditorHeight)),T(this,"state",{downloadItems:[],hasActiveDownloadItemsSelected:!1,hasPausedDownloadItemsSelected:!1,hasCompletedDownloadItemsSelected:!1,hasCompletedDownloadItems:!1,selectedDownloadItem:void 0,filter:"",editorHeight:d.a.get(C.kDownloadsPanelEditorHeight),...d.a.get(C.kDownloadsPanelSorting)}),T(this,"fetchDownloadItemsAndUpdateState",()=>new Promise(e=>{const t=O.a.getItems();let a;this.state.selectedDownloadItem&&(a=t.find(e=>{if(this.state.selectedDownloadItem)return e.id===this.state.selectedDownloadItem.id}),this.updateActiveProgressState());const i=t;this.setState({selectedDownloadItem:a,downloadItems:i,hasCompletedDownloadItems:t.length>0},e)})),T(this,"scrollDownloadItemIntoView",e=>{this._tree&&this._tree.scrollToId(e.id)}),T(this,"selectDownloadItem",e=>{this._tree&&this._tree.selectById(e.id)}),T(this,"onDownloadStoreChange",({reason:e,downloadItem:t})=>{switch(e){case"download_completed":return void this.onTransferFinished(t);case"download_started":return void this.fetchDownloadItemsAndUpdateState().then(()=>{this.scrollDownloadItemIntoView(t),this.selectDownloadItem(t)});case"download_panel_updated":return void this.fetchDownloadItemsAndUpdateState()}}),T(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(E.a)(p.a.findDOMNode(this))&&this.focusTree()}),T(this,"_onWindowStoreChange",()=>{this.props.open&&_.a.isActive(this.context.vivaldiWindowId)&&i.a.forceUpdate()}),T(this,"onTransferFinished",({downloadItem:e})=>{v.default.windows.getLastFocused(t=>{if(t.id!==this.context.vivaldiWindowId)return;if(!d.a.get(C.kDownloadsNotifyOnComplete))return;if(!e)return;const a=e.filename.split("\\").pop().split("/").pop();const s=Object(N.a)("Download Complete"),n=i.a.showDownload.bind(null,e.id);v.default.downloads.getFileIcon(e.id,{size:32},e=>{Object(k.a)({body:a,icon:e,title:s,onClick:n})})}),this.updateActiveProgressState()}),T(this,"getOpenInMenu",()=>[{handler:this.openSelected,...Object(w.a)("the file","External Viewer")},{name:"---"},{handler:this.openSelectedInTab.bind(this,!1,!1),...Object(w.a)("open in","New Tab")},{handler:this.openSelectedInTab.bind(this,!1,!0),...Object(w.a)("Background Tab")},{handler:this.openSelectedInTab.bind(this,!0,!1),...Object(w.a)("Current Tab")},{name:"---"},{handler:this.openSelectedInWindow.bind(this,!1),...Object(w.a)("open in","New Window")},{handler:this.openSelectedInWindow.bind(this,!0),...Object(w.a)("open in","Private Window")}]),T(this,"getContextMenuItems",e=>{if(!e)return[];const t=this.updateActiveProgressState(),a=this.hasSelectedImages(),i=this.fileExists(),s=this.fileErrors();return[{handler:this.openSelected,visible:t.hasCompletedDownloadItemsSelected&&!a&&i,...Object(w.a)("the file","Open File")},{items:this.getOpenInMenu(),visible:a&&i,ellipsis:!0,...Object(w.a)("Open in")},{visible:i,handler:this.showSelectedInFilemanager,...Object(w.a)("Show in File Manager")},{handler:this.copySelectedAddress,...Object(w.a)("Copy Download Address")},{handler:this.copySelectedPath,visible:t.hasCompletedDownloadItemsSelected&&i,...Object(w.a)("Copy Local Path")},{name:"---",visible:t.hasCompletedDownloadItemsSelected},{handler:this.restartSelected,visible:t.hasCompletedDownloadItemsSelected||s,...Object(w.a)("Restart")},{name:"---",visible:t.hasActiveDownloadItemsSelected},{handler:this.stopSelected,visible:t.hasActiveDownloadItemsSelected,...Object(w.a)("other","Stop")},{handler:this.resumeSelected,visible:t.hasPausedDownloadItemsSelected,...Object(w.a)("Resume Download")},{name:"---"},{handler:this.removeSelected,...Object(w.a)("verb","Remove")},{handler:this.removeAllFinished,visible:t.hasCompletedDownloadItems,...Object(w.a)("Remove All Finished")}]}),T(this,"getSelectedDownloadItems",()=>{const e=this._tree?this._tree.getSelectedNodes().map(e=>e.id):[];return this.state.downloadItems.filter(t=>-1!==e.findIndex(e=>e===t.id)).map(e=>e.downloadItem)}),T(this,"hasSelectedImages",()=>this.getSelectedDownloadItems().filter(P).length>0),T(this,"fileExists",()=>{const e=this.getSelectedDownloadItems();if(1===e.length){const t=e[0];return t.exists&&!t.error}return!1}),T(this,"fileErrors",()=>{const e=this.getSelectedDownloadItems().map(e=>e.error);if(e.length)return!e.includes(void 0)}),T(this,"getActiveProgressStateForSelectedDownloadItems",()=>{const e=this.getSelectedDownloadItems(),t=this.state.downloadItems;let a=!1,i=!1,s=!1,n=!1;for(let t=0;t<e.length;t++){const r=e[t];if("in_progress"===r.state?r.paused?i=!0:a=!0:"complete"===r.state&&(s=n=!0),a&&i&&s)break}return n=n||!!t.find(e=>"complete"===e.downloadItem.state),{hasActiveDownloadItemsSelected:a,hasPausedDownloadItemsSelected:i,hasCompletedDownloadItemsSelected:s,hasCompletedDownloadItems:n}}),T(this,"updateActiveProgressState",()=>{const e=this.getActiveProgressStateForSelectedDownloadItems();return this.setState(e),e}),T(this,"canResumeSelected",()=>{const e=this.getSelectedDownloadItems();if(1===e.length){return e[0].canResume}return!1}),T(this,"stopSelected",()=>{this.getSelectedDownloadItems().filter(e=>!e.paused).forEach(({id:e})=>i.a.pauseDownload(e))}),T(this,"resumeSelected",()=>{this.getSelectedDownloadItems().filter(e=>e.canResume).forEach(({id:e})=>i.a.resumeDownload(e))}),T(this,"restartSelected",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>i.a.restartDownload(e))}),T(this,"showSelectedInFilemanager",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>i.a.showDownload(e))}),T(this,"onSortChange",(e,t)=>{c.a.set(C.kDownloadsPanelSorting,{sortOrder:e,sortField:t}),this.setState({sortField:t,sortOrder:e},()=>{const a=I(t,e);i.a.setOrderBy(a)})}),T(this,"openSelected",()=>{this.getSelectedDownloadItems().forEach(e=>{"complete"===e.state&&i.a.openDownload(e.id)})}),T(this,"openSelectedInTab",(e,t)=>{const a=this.getSelectedDownloadItems().filter(e=>"complete"===e.state&&e.mime.startsWith("image/")).map(e=>"file://"+e.filename);if(a.length>0){const i=a[a.length-1];a.forEach(a=>{const s={inCurrent:e,inBackground:t};!1===t&&(s.inBackground=a!==i),o.a.openURL(a,s),e=!1})}}),T(this,"openSelectedInWindow",e=>{const t=this.getSelectedDownloadItems().filter(e=>"complete"===e.state&&e.mime.startsWith("image/")).map(e=>"file://"+e.filename),a={inNewWindow:!0,incognito:e};t.forEach(e=>{o.a.openURL(e,a)})}),T(this,"onSelected",e=>{this.setState({selectedDownloadItem:e},()=>{i.a.forceUpdate(),this.updateActiveProgressState()})}),T(this,"removeAllFinished",()=>{this.state.downloadItems.filter(e=>"complete"===e.downloadItem.state).map(e=>e.downloadItem).forEach(({id:e})=>i.a.eraseDownload(e))}),T(this,"removeSelected",()=>{this.getSelectedDownloadItems().forEach(({id:e})=>i.a.eraseDownload(e))}),T(this,"copySelectedAddress",()=>{const e=this.getSelectedDownloadItems().map(e=>e.url);0!==e.length&&navigator.clipboard.writeText(e.join("\n"))}),T(this,"copySelectedPath",()=>{const e=this.getSelectedDownloadItems().filter(e=>"complete"===e.state).map(e=>e.filename);0!==e.length&&navigator.clipboard.writeText(e.join("\n"))}),T(this,"handleFilterChange",e=>{const t=e.target.value;this.setState({filter:t},()=>i.a.setSearchFilter(t))}),T(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,180),0)}))}),T(this,"onSlideBarStop",()=>{this.setState(e=>{let t=e.editorHeight;return t<=S.g&&(t=0,c.a.set(C.kDownloadsPanelEditorHeight,t)),{editorHeight:t}})}),T(this,"onSlidebarToggle",()=>{this.setState(e=>{let t=e.editorHeight;return t>S.g?(t=0,c.a.set(C.kDownloadsPanelEditorHeight,t)):(t=180,c.a.reset(C.kDownloadsPanelEditorHeight)),{editorHeight:t}})}),T(this,"focusTree",()=>{this._tree&&this._tree.refs.treeList.focusTree()}),T(this,"showSelectedDownloadItem",()=>{this.state.selectedDownloadItem&&i.a.showDownload(this.state.selectedDownloadItem.downloadItem.id)})}componentDidMount(){l.a.addChangeListener(this.onPanelStoreChange),O.a.addChangeListener(this.onDownloadStoreChange),i.a.setOrderBy(I(this.state.sortField,this.state.sortOrder)),i.a.setSearchFilter(this.state.filter),this.windowStoreToken=_.a.addListener(this._onWindowStoreChange),this.fetchDownloadItemsAndUpdateState()}componentDidUpdate(t,a){return a.filter!==this.state.filter?this.fetchDownloadItemsAndUpdateState():"extension"===this.state.sortField||a.sortField===this.state.sortField&&a.sortOrder===this.state.sortOrder?(a.selectedDownloadItem!==this.state.selectedDownloadItem&&this.updateActiveProgressState(),void(!t.open&&this.props.open&&e.nextTick(()=>{this.focusTree(),this._tree&&0===this._tree.getSelectedNodes().length&&this._tree.selectByIndex(0)}))):this.fetchDownloadItemsAndUpdateState()}componentWillUnmount(){O.a.removeChangeListener(this.onDownloadStoreChange),l.a.removeChangeListener(this.onPanelStoreChange),this.windowStoreToken.remove()}render(){if(!this.props.open)return null;const e=this.canResumeSelected();return h.a.createElement("div",{className:"panel",id:"downloads",__source:{fileName:A,lineNumber:633}},h.a.createElement(y.a,{title:this.props.title,filter:this.state.filter,onFilterChange:this.handleFilterChange,keyAccess:this.props.keyAccess,canResumeDownload:e,onDownloadResume:this.resumeSelected,hasPausedTransfersSelected:this.state.hasPausedDownloadItemsSelected,hasActiveTransfersSelected:this.state.hasActiveDownloadItemsSelected,hasCompletedTransfersSelected:this.state.hasCompletedDownloadItemsSelected,hasCompletedTransfers:this.state.hasCompletedDownloadItems,onStopSelectedDownload:this.stopSelected,onRestartSelectedDownload:this.restartSelected,downloadItem:this.state.selectedDownloadItem?this.state.selectedDownloadItem.downloadItem:void 0,onRemoveSelected:this.removeSelected,onRemoveAllFinished:this.removeAllFinished,__source:{fileName:A,lineNumber:634}}),h.a.createElement(n.a,{ref:e=>this._tree=e,keyAccess:this.props.keyAccess,getContextMenuItems:this.getContextMenuItems,nodes:this.state.downloadItems,onSelected:this.onSelected,onSortChange:this.onSortChange,sortField:this.state.sortField,sortOrder:this.state.sortOrder,onErase:i.a.eraseDownload,onResume:i.a.resumeDownload,onPause:i.a.pauseDownload,onShow:i.a.showDownload,onOpen:i.a.openDownload,__source:{fileName:A,lineNumber:655}}),h.a.createElement("section",{className:"download-editor",style:{flexBasis:this.state.editorHeight},__source:{fileName:A,lineNumber:671}},h.a.createElement(g.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlideBarStop,onDoubleClick:this.onSlidebarToggle,position:"bottom",returnOffset:!0,__source:{fileName:A,lineNumber:673}}),this.state.editorHeight>0&&h.a.createElement(s.a,{downloadItem:this.state.selectedDownloadItem?this.state.selectedDownloadItem.downloadItem:void 0,keyAccess:this.props.keyAccess,onShow:this.showSelectedDownloadItem,__source:{fileName:A,lineNumber:682}})))}}T(x,"contextType",f.a),t.a=Object(r.a)(x,D)}).call(this,a(64))},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a(0),s=a.n(i),n=a(26),r=a(2),o=a(13),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadPanelHeader.jsx";function c({downloadItem:e,canResumeDownload:t,filter:a,hasActiveTransfersSelected:i,hasCompletedTransfers:c,hasCompletedTransfersSelected:d,hasPausedTransfersSelected:u,keyAccess:h,onDownloadResume:m,onFilterChange:p,onRemoveAllFinished:g,onRemoveSelected:b,onRestartSelectedDownload:f,onStopSelectedDownload:_,title:N}){return s.a.createElement("header",{__source:{fileName:l,lineNumber:50}},s.a.createElement("h1",{__source:{fileName:l,lineNumber:51}},N),s.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium toolbar-wrap",__source:{fileName:l,lineNumber:52}},s.a.createElement("input",{type:"search",placeholder:Object(r.a)("verb","Search"),value:a,onChange:p,__source:{fileName:l,lineNumber:53}}),s.a.createElement("div",{className:"toolbar-nowrap",__source:{fileName:l,lineNumber:58}},s.a.createElement("div",{className:"toolbar-group",__source:{fileName:l,lineNumber:59}},u||t?s.a.createElement(n.a,{tooltip:Object(r.a)("Resume Download"),onClick:m,image:o.Nb.medium,__source:{fileName:l,lineNumber:61}}):s.a.createElement(n.a,{tooltip:Object(r.a)("verb","Pause"),onClick:_,disabled:!i,image:o.vb.medium,__source:{fileName:l,lineNumber:67}}),s.a.createElement(n.a,{tooltip:Object(r.a)("Restart"),disabled:!e,onClick:f,image:o.Mb.medium,__source:{fileName:l,lineNumber:75}}),s.a.createElement(n.a,{tooltip:Object(r.a)("verb","Remove"),disabled:!(d||u||e&&"interrupted"===e.state),onClick:b,image:o.Lb.medium,__source:{fileName:l,lineNumber:81}}),s.a.createElement(n.a,{tooltip:Object(r.a)("Remove all finished"),disabled:!c,onClick:g,image:o.B,__source:{fileName:l,lineNumber:93}})))))}},function(e,t,a){"use strict";(function(e){var i=a(19),s=a(92),n=a(49),r=a(1038),o=a(532),l=a(533),c=a(9),d=a(57),u=a(42),h=a(8),m=a(10),p=a(0),g=a.n(p),b=a(29),f=a.n(b),_=a(170),N=a(131),v=a(534),E=a(32),w=a(25),S=a(16),C=a(2),k=a(68),y=a(5),O=a(31),A=a(235),T=a(1),I="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesPanel.jsx";function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=[T.kKeyboardTabToAll,T.kNotesPanelEditorHeight,T.kNotesPanelShowMarkdown],x=[{text:Object(C.a)("Title"),value:"title",fullScreenTitle:Object(C.a)("Sort by Title")},{text:Object(C.a)("Address"),value:"url",fullScreenTitle:Object(C.a)("Sort by Address")},{text:Object(C.a)("Content"),value:"content",fullScreenTitle:Object(C.a)("Sort by Content")},{text:Object(C.a)("Created"),value:"dateAdded",fullScreenTitle:Object(C.a)("Sort by Date Created")}];function M(e){return new Promise(t=>y.a.notes.remove(e,t))}async function L(e){const{url:t}=c.a.getActivePage();if(function(e){const{id:t}=c.a.getActivePage();return new Promise(a=>{y.a.utilities.getSelectedText(t,t=>{a(t===e)})})}(e))return t}class j extends g.a.PureComponent{constructor(t){super(t),D(this,"_editor",null),D(this,"_tree",null),D(this,"cancelableId",""),D(this,"selectableId",""),D(this,"canDrop",!1),D(this,"refToolbar",g.a.createRef()),D(this,"_onPageStoreChange",()=>{const e=c.a.getActivePage(),t=e?e.url:"";this.setState({activePageUrl:t})}),D(this,"_onStoreChange",(t,a)=>{if("added"===t){const t=n.b.getNodeById(a);t&&!n.b.isSeparator(t)&&(this.cancelableId=a),e.nextTick(()=>{this.props.open&&S.a.isActive(this.context.vivaldiWindowId)&&this._tree&&this._tree.selectById(a)})}const i=this.state.selectedNote&&this.state.selectedNote.id===a;if("changed"===t&&i){const e=n.b.getNodeById(a);return void this.setState({selectedNote:e})}const s=n.b.hasNotes();!s&&this.state.hasNotes&&(this.setState({selectedNote:void 0}),this.focusSearch()),this.setState({hasNotes:s})}),D(this,"onDragEnterPanelButton",e=>{const t={};return t.support=e.dataTransfer.types.some(e=>"text/plain"===e),t.copy=t.support,t.onButton=t.support,t}),D(this,"onDropPanelButton",e=>{const t=e.dataTransfer.getData("text/plain");L(t).then(e=>{e?s.a.createNote({content:t,url:e}):s.a.createNote({content:t})})}),D(this,"applyStoreSelection",()=>{u.a.getSelectId()&&e.nextTick(()=>{this._tree&&this._tree.selectById(u.a.getSelectId()),d.a.clearSelection()})}),D(this,"_onPanelStoreChange",e=>{switch(e){case"setFocus":this.props.open&&!Object(k.a)(f.a.findDOMNode(this))&&this.focusTree();break;case"display":this.applyStoreSelection()}}),D(this,"onItemCreated",()=>{const e=this.getSelectedItem();this.selectableId=e?e.id:""}),D(this,"onItemSelected",e=>{e?(this.cancelableId!==e.id&&(this.cancelableId=""),this.setState({selectedNote:e},()=>{const e=document.activeElement;this.cancelableId&&this._editor&&e&&"NotesManager-Editor"!==e.className&&this._editor.focusPrimaryInput()})):this.setState({selectedNote:void 0})}),D(this,"unSelectAll",()=>{this._tree&&this._tree.unSelectAll(),this.setState({selectedNote:void 0})}),D(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{...a.sorting,sortOrder:e,sortField:t}})),h.a.set(T.kNotesPanelSorting,{sortOrder:e,sortField:t})}),D(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if(n.b.isFolder(e)&&!n.b.isFolder(t))return-1;if(n.b.isFolder(t)&&!n.b.isFolder(e))return 1;const{sortOrder:a,sortField:i}=this.state.sorting;return"title"===i?this.sortForTitle(e,t,a):E.a.getDefaultComparator(a,i)(e,t)}),D(this,"sortForTitle",(e,t,a)=>{if(a<=E.a.NO_SORTING)return 0;const i=e.title||e.content,s=t.title||t.content;return i||s?i?s?a===E.a.ASCENDING_SORT?i.toLowerCase().localeCompare(s.toLowerCase()):s.toLowerCase().localeCompare(i.toLowerCase()):a===E.a.ASCENDING_SORT?-1:1:a===E.a.ASCENDING_SORT?1:-1:0}),D(this,"getSelectedItem",()=>this._tree&&this._tree.getSelectedItem()),D(this,"onAddNote",()=>{this.props.prefValues[T.kNotesPanelShowMarkdown]&&this.toggleMarkdown(),0===this.state.editorHeight&&this.resizeToDefault(),this.setState({filter:""}),this._tree?this._tree.onAddNote():s.a.createNote({})}),D(this,"onAddFolder",()=>{this.setState({filter:""}),this._tree&&this._tree.onAddFolder()}),D(this,"deleteSelectedItems",()=>{this._tree&&this._tree.deleteSelectedItems()}),D(this,"handleFilterChange",e=>{this.setState({filter:e})}),D(this,"onSlidebarPosition",(e,t)=>{this.setState(e=>({editorHeight:Math.max(Math.min(e.editorHeight-t,900),0)}))}),D(this,"onSlidebarStop",()=>{this.setState(e=>{let t=e.editorHeight;return t<=O.g&&(t=0),h.a.set(T.kNotesPanelEditorHeight,t),{editorHeight:t}})}),D(this,"toggleMarkdown",()=>{h.a.toggle(T.kNotesPanelShowMarkdown,!0,!1)}),D(this,"resizeToDefault",()=>{this.setState(e=>{let t=e.editorHeight;return t>O.g?(t=0,h.a.set(T.kNotesPanelEditorHeight,t)):(t=300,h.a.reset(T.kNotesPanelEditorHeight)),{editorHeight:t}})}),D(this,"focusSearch",()=>{this.refToolbar.current&&this.refToolbar.current.focusSearch()}),D(this,"focusTree",()=>{this._tree&&this._tree.refs.treeList.focusTree()}),D(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();e.nativeEvent.buttons>0&&this.unSelectAll(),this._tree&&this._tree.onContextMenu(e,t)}),D(this,"onDragEnter",e=>{this.canDrop=-1!==e.dataTransfer.types.findIndex(e=>"text/plain"===e),e.preventDefault(),e.stopPropagation()}),D(this,"onDragOver",e=>{!0===this.canDrop&&(e.nativeEvent.dataTransfer.dropEffect="copy"),e.preventDefault(),e.stopPropagation()}),D(this,"onDrop",e=>{if(!0===this.canDrop){const t=e.dataTransfer.getData("text/plain");t.length>0&&this._tree&&this._tree.onAddNote({content:t})}e.preventDefault(),e.stopPropagation()}),D(this,"_onKeyDown",e=>{switch(e.key){case"Escape":return this.setState({selectedNote:void 0}),e.stopPropagation(),void e.preventDefault()}}),D(this,"onEditorBlur",({note:e})=>{this.state.selectedNote&&e.id!==this.state.selectedNote.id&&Object(A.c)(e)&&M(e.id).then(()=>M(e.id))});const a=m.a.get(T.kNotesPanelSorting),i=c.a.getActivePage(),r=i?i.url:"";this.state={hasNotes:n.b.hasNotes(),selectedNote:void 0,filter:"",editorHeight:this.props.prefValues[T.kNotesPanelEditorHeight],activePageUrl:r,sorting:{sortOrder:a.sortOrder,sortField:a.sortField,comparator:this.sortComparator}}}componentDidMount(){n.b.addChangeListener(this._onStoreChange),u.a.addChangeListener(this._onPanelStoreChange),c.a.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){n.b.removeChangeListener(this._onStoreChange),u.a.removeChangeListener(this._onPanelStoreChange),c.a.removeChangeListener(this._onPageStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&(this._tree&&!0===this.state.hasNotes?e.nextTick(()=>this.focusTree()):this.focusSearch())}render(){if(!this.props.open)return null;const e=this.state.editorHeight>0,t=Boolean(this.state.selectedNote&&Object(A.c)(this.state.selectedNote)),a=Boolean(this.state.selectedNote&&this.state.selectedNote.trash);return g.a.createElement("div",{className:"panel",id:"notes-panel",__source:{fileName:I,lineNumber:505}},g.a.createElement("header",{__source:{fileName:I,lineNumber:507}},g.a.createElement("h1",{__source:{fileName:I,lineNumber:508}},this.props.title),g.a.createElement(v.a,{ref:this.refToolbar,filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onDeleteSelectedItems:this.deleteSelectedItems,onAddFolder:this.onAddFolder,isAddNoteDisabled:t,isDeleteDisabled:a,__source:{fileName:I,lineNumber:509}})),g.a.createElement("section",{onClick:this.unSelectAll,onContextMenu:!0===this.state.hasNotes?this.onContextMenu:null,__source:{fileName:I,lineNumber:521}},!1===this.state.hasNotes&&g.a.createElement("div",{className:"no-notes",onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,__source:{fileName:I,lineNumber:527}},g.a.createElement(l.a,{onAddNote:this.onAddNote,__source:{fileName:I,lineNumber:531}})),!0===this.state.hasNotes&&g.a.createElement(N.a,{fields:x,onSortChange:this.onSortChange,keyAccess:this.props.prefValues[T.kKeyboardTabToAll],sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:I,lineNumber:536}}),g.a.createElement(o.a,{ref:e=>this._tree=e||null,filter:this.state.filter,sorting:this.state.sorting,onCreated:this.onItemCreated,onItemSelected:this.onItemSelected,__source:{fileName:I,lineNumber:544}})),g.a.createElement("div",{className:"notes-editor",onDragEnter:!0===this.state.hasNotes?null:this.onDragEnter,onDragOver:!0===this.state.hasNotes?null:this.onDragOver,onDrop:!0===this.state.hasNotes?null:this.onDrop,style:{height:this.state.editorHeight},__source:{fileName:I,lineNumber:553}},g.a.createElement(_.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.resizeToDefault,returnOffset:!0,position:"bottom",__source:{fileName:I,lineNumber:559}}),e&&g.a.createElement(r.a,{ref:e=>this._editor=e,key:this.state.selectedNote?this.state.selectedNote.id:-1,note:this.state.selectedNote,onAdd:this.onAddNote,onBlur:this.onEditorBlur,onOpenDialog:this.props.onOpenDialog,toggleMarkdown:this.toggleMarkdown,viewMarkdown:this.props.prefValues[T.kNotesPanelShowMarkdown],keyAccess:this.props.prefValues[T.kKeyboardTabToAll],onKeyDown:this._onKeyDown,__source:{fileName:I,lineNumber:568}})))}}D(j,"contextType",w.a),t.a=Object(i.a)(j,P)}).call(this,a(64))},,function(e,t,a){"use strict";(function(e){var i=a(19),s=a(79),n=a(12),r=a(42),o=a(8),l=a(0),c=a.n(l),d=a(29),u=a.n(d),h=a(131),m=a(26),p=a(32),g=a(978),b=a(2),f=a(68),_=a(13),N=a(1),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowPanel.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=[{text:"",value:"title",fullScreenTitle:Object(b.a)("Sort by Title")},{text:"",value:"hostname",fullScreenTitle:Object(b.a)("Sort by Host")},{text:"",value:"domain",fullScreenTitle:Object(b.a)("Sort by Domain")},{text:"",value:"sound",fullScreenTitle:Object(b.a)("Sort by Audio Status")}],S=[N.kKeyboardTabToAll,N.kPanelsWindowSorting];class C extends c.a.Component{constructor(e,t){super(e,t),E(this,"onPanelStoreChange",e=>{this.props.open&&"setFocus"===e&&!Object(f.a)(u.a.findDOMNode(this))&&this.focusTree()}),E(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{sortOrder:e,sortField:t,comparator:a.sorting.comparator}})),o.a.set(N.kPanelsWindowSorting,{sortOrder:e,sortField:t})}),E(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;if("pinned"===e.type)return-1;if("pinned"===t.type)return 1;if("stack"===e.type&&"stack"!==t.type)return-1;if("stack"===t.type&&"stack"!==e.type)return 1;const{sortOrder:a,sortField:i}=this.state.sorting;return"sound"===i?this.sortForSound(e,t,a):p.a.getDefaultComparator(a,i)(e,t)}),E(this,"sortForSound",(e,t,a)=>{if(a<=p.a.NO_SORTING)return 0;let i="";if(e.page){const t=s.a.getMediaStateByTabId(e.page.id);t&&!e.page.discarded&&("playing"!==t&&"muting"!==t||(i="playing"))}let n="";if(t.page){const e=s.a.getMediaStateByTabId(t.page.id);e&&!t.page.discarded&&("playing"!==e&&"muting"!==e||(n="playing"))}if("playing"===i)return-1;if("playing"===n)return 1;return p.a.getDefaultComparator(a,"title")(e,t)}),E(this,"focusTree",()=>{this._tree&&this._tree.refs.treeList.focusTree()}),E(this,"handleFilterChange",e=>{const t=e.target.value;this.setState({filter:t})}),E(this,"getSelectedItem",()=>this._tree.getSelectedItem()),E(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();this._tree.onContextMenu(e,t)}),E(this,"onAddTab",e=>{this._tree.newTab()}),E(this,"onAddWindow",e=>{n.a.openWindow()});const a=this.props.prefValues[N.kPanelsWindowSorting];this.state={filter:"",sorting:{sortOrder:a.sortOrder,sortField:a.sortField,comparator:this.sortComparator}}}componentDidMount(){r.a.addChangeListener(this.onPanelStoreChange)}componentWillUnmount(){r.a.removeChangeListener(this.onPanelStoreChange)}componentDidUpdate(t,a){!t.open&&this.props.open&&e.nextTick(()=>this.focusTree())}render(){return this.props.open?c.a.createElement("div",{className:"panel",id:"window-panel",__source:{fileName:v,lineNumber:196}},c.a.createElement("header",{__source:{fileName:v,lineNumber:198}},c.a.createElement("h1",{__source:{fileName:v,lineNumber:199}},this.props.title),c.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:v,lineNumber:201}},c.a.createElement("input",{ref:"refSearch",type:"search",className:"tabsearch",placeholder:Object(b.a)("verb","Search"),value:this.state.filter,onChange:this.handleFilterChange,__source:{fileName:v,lineNumber:202}}),c.a.createElement("div",{className:"toolbar-nowrap",__source:{fileName:v,lineNumber:209}},c.a.createElement("div",{className:"toolbar-group",__source:{fileName:v,lineNumber:210}},c.a.createElement(m.a,{tooltip:Object(b.a)("command","New Tab"),tabIndex:this.props.prefValues[N.kKeyboardTabToAll],onClick:this.onAddTab,image:_.f.medium,__source:{fileName:v,lineNumber:211}}),c.a.createElement(m.a,{tooltip:Object(b.a)("action","New Window"),tabIndex:this.props.prefValues[N.kKeyboardTabToAll],onClick:this.onAddWindow,image:_.rc.medium,__source:{fileName:v,lineNumber:217}}))))),c.a.createElement("section",{onContextMenu:this.onContextMenu,__source:{fileName:v,lineNumber:228}},c.a.createElement(h.a,{fields:w,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,__source:{fileName:v,lineNumber:230}}),c.a.createElement(g.a,{ref:e=>this._tree=e,sorting:this.state.sorting,filter:this.state.filter,__source:{fileName:v,lineNumber:236}}))):null}}t.a=Object(i.a)(C,S)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(366),s=a(37),n=a(22),r=a(19),o=a(40),l=a(79),c=a(12),d=a(9),u=a(0),h=a.n(u),m=a(83),p=a(116),g=a(126),b=a(136),f=a(25),_=a(979),N=a(16),v=a(2),E=a(17),w=a.n(E),S=a(6),C=a(44),k=a(312),y=a(61),O=a.n(y),A=a(21),T=a(279),I=a(13),D=a(1),P=a(145),x=a(103),M=a(20),L="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\WindowTree.jsx";function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B=[D.kPanelsWindowDragToStack,D.kPanelsWindowSingleClickOpens,D.kPanelsWindowShowPinnedGroup,D.kTabsAutoMuting,D.kTabsDimHibernated,D.kTabsShowCloseButton,D.kTabsStackingMode,D.kTabsStackingNameMap,D.kTabsStackingAllowRename,D.kTabsUnread,D.kThemeUseAnimation],R="vivaldi/x-window-item";class F extends h.a.PureComponent{constructor(...e){super(...e),j(this,"state",{nodes:[]}),j(this,"expandModel",{}),j(this,"blockPageStoreChange",!1),j(this,"lastActivePinnedId",void 0),j(this,"centerDownId",""),j(this,"_onPageStoreChanged",()=>{!1===this.blockPageStoreChange&&this._onFilterChange(this.props.filter,P.default);const e=d.a.getActivePage();e.pinned&&(this.lastActivePinnedId=e.id)}),j(this,"_onTrashStoreChanged",()=>{this._onFilterChange(this.props.filter,P.default)}),j(this,"_getFavicon",e=>M.a.getFavicon(e.url,e.favIconUrl)),j(this,"_getNodes",e=>{void 0===e&&(e="off"===this.props.prefValues[D.kTabsStackingMode]);const t=function(e){return e&&e.startsWith("www.")?e.substring(4):e};let a=0,i=d.a.getTabs(e).toArray(),s=[];if(this.props.prefValues[D.kPanelsWindowShowPinnedGroup]){const e=i.filter(e=>"tab"===e.type&&e.page.pinned);i=i.filter(e=>!(e.page&&e.page.pinned)),s=[{id:"pinned",type:"pinned_group",parentId:"window1",title:Object(v.a)("title","Pinned Tabs"),index:0,pageIndex:a,children:e.map((e,i)=>{const s=O.a.parse(e.page.url).hostname;return{id:e.id,type:"tab",parentId:"pinned",title:M.a.getDisplayTitle(e.page),url:e.page.url,hostname:s,domain:t(s),faviconUrl:this._getFavicon(e.page),useDefaultIcon:d.a.useDefaultIcon(e.page),active:d.a.isActivePage(e.id),page:e.page,index:i,pageIndex:a++}})}]}return{id:"root",index:0,children:[{id:"window1",type:"window",parentId:"root",title:Object(v.a)("title","Window")+" - "+M.a.getDisplayTitle(d.a.getActivePage()),index:0,pageIndex:a,children:s.concat(i.map((e,i)=>{if("tab"===e.type){const n=O.a.parse(e.page.url).hostname;return{id:e.id,type:"tab",parentId:"window1",title:M.a.getDisplayTitle(e.page),url:e.page.url,hostname:n,domain:t(n),faviconUrl:this._getFavicon(e.page),useDefaultIcon:d.a.useDefaultIcon(e.page),active:d.a.isActivePage(e.id),page:e.page,index:i+(s.length>0?1:0),pageIndex:a++}}if("group"===e.type)return{id:e.id,type:"stack",parentId:"window1",title:this.props.prefValues[D.kTabsStackingNameMap][e.id]||e.page.title,index:i+(s.length>0?1:0),page:e.page,pageIndex:a,children:e.pages.toArray().map((i,s)=>{const n=i.id,r=O.a.parse(i.url).hostname;return{id:n,type:"tab",parentId:e.id,title:M.a.getDisplayTitle(i),url:i.url,hostname:r,domain:t(r),faviconUrl:this._getFavicon(i),useDefaultIcon:d.a.useDefaultIcon(i),active:d.a.isActivePage(n),page:i,index:s,pageIndex:a++}})}}))},{id:"trash",type:"trash",parentId:"root",trash:!0,index:1,title:Object(v.a)("title","Closed Tabs"),children:g.a.getTrash().map((e,a)=>{if(e.tab){const i=e.tab,s=Object(x.b)(i),n=O.a.parse(i.url).hostname;return{id:i.sessionId,type:"tab",parentId:"trash",title:M.a.getDisplayTitle(s),url:i.url,hostname:n,domain:t(n),faviconUrl:this._getFavicon(i),useDefaultIcon:!1,closed:!0,tab:i,index:a}}if(e.window){const i=e.window.sessionId;return{id:i,type:"window",parentId:"trash",title:Object(v.a)("Window with $1 Tab","Window with $1 Tabs",[e.window.tabs.length]),closed:!0,window:e.window,index:a,children:e.window.tabs.map((e,a)=>{const s=Object(x.b)(e),n=O.a.parse(e.url).hostname;return{id:e.sessionId,type:"tab",parentId:i,title:M.a.getDisplayTitle(s),url:e.url,hostname:n,domain:t(n),faviconUrl:this._getFavicon(e),useDefaultIcon:!1,closed:!0,tab:e,index:a}})}}})}]}.children}),j(this,"_getPinnedNodesById",e=>{const t=function(e,a,i){const s=e._getNodeById(a);if(s.children){if(s.type===i)return s.children;for(let a=0;a<s.children.length;a++){const n=t(e,s.children[a].id,i);if(n)return n}}},a=this._getNodeById(e);return a.page&&a.page.pinned?[a]:t(this,e,"pinned")||[]}),j(this,"_getFilteredTree",(e,t)=>{const a=function(e,t,a){let i=!1;return e.url&&!1!==a.url&&(i=e.url.includes(t)),i||!1===a.title||(i=e.title.toLowerCase().includes(t)),i},i=function(e,t,s,n,r){let o=!1;for(let l=0;l<e.length;l++){const c=e[l];let d=!1;if(c.children){const e={...c,children:[]};i(c.children,e.children,s,n,r)&&(t.push(e),o=!0,d=!0)}if(!d&&a(c,n,r)){const e={...c};t.push(e),c.children&&s.push(c.id),o=!0}}return o},s=this._getNodes(),n=[],r=[];return i(s,n,r,e.toLowerCase(),t),{nodes:n,collapsed:r}}),j(this,"_onFilterChange",(e,t)=>{if(e&&e.length>0){const a={url:!0,title:!0},i=this._getFilteredTree(e,a);this.setState({nodes:i.nodes},t(i.collapsed))}else this.setState({nodes:this._getNodes()},t([]))}),j(this,"getSelectedItem",()=>this.refs.treeList.getSelectedItem()),j(this,"getSelectedItems",()=>this.refs.treeList.getAllSelectedItems()),j(this,"unSelectAll",()=>{this.refs.treeList.unSelectAll()}),j(this,"_isTrash",e=>e&&Boolean(e.trash)),j(this,"_isPinnedFolder",e=>e&&this._isFolder(e)&&Boolean("pinned"===e.id)),j(this,"_getSelectedBackgroundPages",()=>{const e=this.getSelectedItems(),t=e.filter(e=>"window"===e.type),a=d.a.getActivePage();let i=[];return i=t.length>0?d.a.getPages().filter(e=>e!==a).toArray():e.map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.page).filter(e=>e&&e!==a),i}),j(this,"_getDiscardablePages",()=>this._getSelectedBackgroundPages().filter(e=>!e.discarded&&!e.isInspected)),j(this,"_getStackableSelectedNodes",()=>{const e=this.getSelectedItems();return 1===e.length&&"stack"===e[0].type?[]:this.getSelectedItems().filter(e=>"tab"===e.type||"stack"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(e=>e.page&&!e.page.pinned)}),j(this,"_getStackableNodesForHost",e=>{const t=this._getNodeById(e);if(!t||!t.hostname||this._isInPinnedFolder(t)||this._isInStackFolder(t)||this._isInTrashFolder(t))return[];const a=t.hostname;return this.state.nodes.filter(e=>"window"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(e=>"tab"===e.type).filter(e=>!1===Boolean(e.page.pinned)).filter(e=>e.hostname===a)}),j(this,"_getTileableSelectedNodes",()=>this.getSelectedItems().filter(e=>"tab"===e.type||"stack"===e.type||"pinned"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(e=>e.page&&!e.page.getIn(["extData","tiling","id"]))),j(this,"_getSelectedTiledIds",()=>this.getSelectedItems().filter(e=>"tab"===e.type||"stack"===e.type||"pinned"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.page?e.page.getIn(["extData","tiling","id"]):"").filter(Boolean).filter((e,t,a)=>a.indexOf(e)===t)),j(this,"_getNodesWithMediaState",(e,t,a)=>{let i=[];return"selection"===t?i=this.getSelectedItems():"all"===t?i=this.state.nodes:"active"===t?i=this.state.nodes.filter(e=>e.page.active):"manual"===t&&(i=a||[]),i=i.filter(e=>"window"===e.type||"tab"===e.type||"stack"===e.type||"pinned"===e.type).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).filter(t=>t.page&&l.a.hasMediaState(t.page.id,e)&&!t.page.discarded),i}),j(this,"_getMuteableNodesFrom",(e,t)=>this._getNodesWithMediaState("playing",e)),j(this,"_muteOthers",e=>{if(e.page)c.a.muteAllExcept([e.page]);else{const t=e.children.map(e=>e.page).filter(Boolean);c.a.muteAllExcept(t)}}),j(this,"_getPlayableNodesFrom",(e,t)=>{let a=this._getNodesWithMediaState("muting",e);if("onlyActive"===this.props.prefValues[D.kTabsAutoMuting])a=a.filter(e=>e.page.active&&e.page===t.page),a=a.filter(e=>e.page===t.page);else if("prioritizeActive"===this.props.prefValues[D.kTabsAutoMuting]){const e=d.a.getActivePage();if(l.a.hasMediaState(e.id,"playing"))return[];a.length>1&&(a=a.filter(e=>e.page===t.page))}return a}),j(this,"_isUnread",e=>this.props.prefValues[D.kTabsUnread]&&e&&e.page&&d.a.isUnread(e.page)),j(this,"_isInStackFolder",e=>e&&("stack"===e.type||"tab"===e.type&&"stack"===this._getNodeById(e.parentId).type)),j(this,"_isInTrashFolder",e=>e&&(Boolean(e.closed)||Boolean(e.trash))),j(this,"_isInPinnedFolder",e=>e&&("pinned"===e.id||e.page&&Boolean(e.page.pinned))),j(this,"_isWithinFolder",(e,t)=>this._isFolder(e)?"on"===t||e.isExpanded&&"below"===t:void 0!==e.parentId),j(this,"_getStackFolderByNode",e=>{let t=e;return"tab"===e.type&&(t=this._getNodeById(e.parentId)),t&&"stack"===t.type?t:void 0}),j(this,"_getPageByNode",(e,t=0)=>"stack"===e.type?e.children.length>t?e.children[t].page:null:"tab"===e.type?e.page:null),j(this,"_getPageIdByNode",(e,t=0)=>this._getPageByNode(e,t).id),j(this,"_getNodeById",e=>{const t=a=>{for(let i=0;i<a.length;i++){let s=a[i];if(s.id===e)return s;if(s.children&&(s=t(s.children),s))return s}};return"root"===e?{id:"root",index:0,children:this.state.nodes}:t(this.state.nodes)}),j(this,"_getNodeByParentAndIndex",(e,t)=>{const a=this._getNodeById(e);return a&&a.children&&a.children.length>0?(t<0?t=0:t>=a.children.length&&(t=a.children.length-1),a.children[t]):a}),j(this,"_indexExceedsChildCount",(e,t)=>{const a=this._getNodeById(e);return Boolean(a&&t>=a.children.length)}),j(this,"_hasChildren",e=>!!e.children&&e.children.length>0),j(this,"_isFolder",e=>!!e.children),j(this,"expandAll",()=>{this.refs.treeList.expandAll()}),j(this,"_onNodeClick",(e,t)=>{C.a.isNoModifierPressed(e)&&e.button===C.a.kLeft&&this.props.prefValues[D.kPanelsWindowSingleClickOpens]&&this._onNodesActivated(e,[t])}),j(this,"_onNodeMouseDown",(e,t)=>{C.a.isNoModifierPressed(t)&&t.button===C.a.kCenter&&(this.centerDownId=e.id)}),j(this,"_onNodeMouseUp",(e,t)=>{C.a.isNoModifierPressed(t)&&t.button===C.a.kCenter&&this.centerDownId===e.id&&!e.page.pinned&&this._closeWithId(e.id),this.centerDownId=""}),j(this,"_onNodeDoubleClick",(e,t)=>{e.button!==C.a.kLeft||this.props.prefValues[D.kPanelsWindowSingleClickOpens]||this._onNodesActivated(e,[t])}),j(this,"_onNodesActivated",(e,t)=>{const a=t[0];if(a.closed)a.tab?p.a.undeleteTab(a.tab):a.window&&p.a.undeleteWindow(a.window);else if(a.page)c.a.openPage(a.page.id);else if(this._isPinnedFolder(a)){let e=this._getNodeById(this.lastActivePinnedId);!e&&a.children&&a.children.length>0&&(e=a.children[0]),e&&c.a.openPage(e.page.id)}}),j(this,"_closeByIds",(e=[])=>{let t=e.map(e=>this._getNodeById(e));const a=t.filter(e=>"stack"===e.type),i=a.map(e=>e.children).reduce((e,t)=>e.concat(t),[]);return t=t.filter(e=>"stack"!==e.type).filter(e=>-1===i.findIndex(t=>t.id===e.id)),a.forEach(e=>{c.a.closeTabStack(this._getPageIdByNode(e),!0)}),c.a.closePage(Object(A.List)(t.map(e=>e.page))),Promise.resolve([])}),j(this,"_getPagesByIds",e=>{const t=[];return e.forEach(e=>{const a=this._getNodeById(e);a.children?"window"===a.type?Array.prototype.push.apply(t,[a].filter(e=>!e.closed).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.page).filter(Boolean)):Array.prototype.push.apply(t,a.children.map(e=>e.page).filter(Boolean)):t.push(a.page)}),t}),j(this,"_saveBookmarkByIds",e=>{e&&0!==e.length?s.a.bookmarkPages(Object(A.List)(this._getPagesByIds(e)),!1,n.a.getRootNode().id):s.a.bookmarkAllOpenPages(n.a.getRootNode().id)}),j(this,"_saveSessionByIds",e=>{e&&0!==e.length?(e=this._getPagesByIds(e).map(e=>e.id)).length>0&&o.a.showSaveSession({mode:"selected",ids:e}):o.a.showSaveSession({mode:"all"})}),j(this,"_handleExpandClick",()=>{this.refs.treeList.toggleSelectedExpansion()}),j(this,"_validateForDrag",e=>e.filter(e=>"window1"!==e&&"trash"!==e&&"pinned"!==e)),j(this,"_getDragData",(e,t)=>{const a=t.map(e=>this._getNodeById(e));if("text/plain"===e){const e=[];return a.forEach(t=>{e.push(this._isFolder(t)?t.title:t.url)}),e.join("\r\n")}if("text/uri-list"===e){const e=[];return a.forEach(t=>{t.url&&e.push(t.url)}),e.join("\r\n")}return""}),j(this,"_setCustomDragData",(e,t)=>{const a=t.map(e=>this._getNodeById(e)),i=a.map(e=>e.closed);i.filter(e=>!0===e).length>0&&e.setData("vivaldi/x-tab-closed",JSON.stringify(i)),a.map(e=>e.page&&e.page.pinned).filter(e=>!0===e).length>0&&e.setData("vivaldi/x-tab-pinned",JSON.stringify(i))}),j(this,"_getDropSupport",(e,t)=>{const a={available:!1,onto:!1,edge:!0};if(-1!==t.dataTransfer.types.findIndex(e=>"vivaldi/x-tab-closed"===e))return a.available=!this._isInTrashFolder(e),a.onto=a.available&&this._canDropOnto(e,t),a;if(-1!==t.dataTransfer.types.findIndex(e=>"vivaldi/x-tab-pinned"===e)){if(!this.props.prefValues[D.kPanelsWindowShowPinnedGroup])return a.available=e.page&&Boolean(e.page.pinned),a.onto=a.available&&this._canDropOnto(e,t),a;if(this._isInTrashFolder(e))return a}return-1===t.dataTransfer.types.findIndex(e=>"text/plain"===e)&&-1===t.dataTransfer.types.findIndex(e=>"text/uri-list"===e)||(-1===t.dataTransfer.types.findIndex(e=>e===R)?a.available=this._isInTrashFolder(e):a.available=!0,a.onto=a.available&&this._canDropOnto(e,t)),a}),j(this,"_canDropOnto",(e,t)=>!!this._isFolder(e)||!(-1!==t.dataTransfer.types.findIndex(e=>e===R)&&(!this.props.prefValues[D.kPanelsWindowDragToStack]||this._isInPinnedFolder(e)||this._isInStackFolder(e)))&&!this._isInTrashFolder(e)),j(this,"_getDropIndexByNode",(e,t)=>{let a=0;const i=d.a.getTabs(!0).toArray();if(e.page)a=i.findIndex(t=>t.page.id===e.page.id),"below"===t&&(a+=1);else if(this._isFolder(e)&&e.children.length>0){if("above"===t||"below"===t){const t=e.children[0];t.page&&(a=i.findIndex(e=>e.page.id===t.page.id))}"below"===t&&(a+=1)}return a}),j(this,"_onDrop",(e,t,a)=>{const i=e.dataTransfer.getData("text/uri-list").split("\n").map(e=>e);if(i.length>0)if("on"!==a||this._isFolder(t)){const e=this._getTargetSpec(t,a),s=this._getDropIndexByNode(t,a),n=this._getStackFolderByNode(t);c.a.openURL(i[0],{index:s},i=>{const s=d.a.getPages().find(e=>e.id===i.id);if(this._isWithinFolder(t,a))if(this._isInPinnedFolder(t))c.a.togglePinned(s,!0,!1),c.a.moveToIndex(s,e.pageIndex);else if(this._isInStackFolder(t)){const a=this._getPageByNode(t),i=n.children.map(e=>e.page);i.splice(e.index,0,s),c.a.createTabStack(Object(A.List)(i),Number(n.pageIndex),a.getIn(["extData","group"]))}this.refs.treeList.selectById(i.id)})}else c.a.openURL(i[0],{inCurrent:!0,inSpecificPageId:t.page.id});return Promise.resolve([])}),j(this,"_onMove",(e,t,a,i)=>{const s=this._getNodeById(t);"stack"===s.type&&"on"===i&&(i="below",a=s.children.length);let n=this._getNodeByParentAndIndex(t,a);if("trash"===n.type&&"above"===i){const e=this._getNodeById("window1");(a=e.children.length)>0&&(n=e.children[a-1])}const r=e.map(e=>this._getNodeById(e)).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>this._getPageByNode(e)),o=e.filter(e=>d.a.isGroup(e)),l=this._indexExceedsChildCount(t,a);let u=this._getPageByNode(n);if(!u)if(this._isInPinnedFolder(s)){const e=d.a.getTabs(!1).toArray().filter(e=>e.page.pinned);u=e.length>0?e[0].page:null}else{const e=d.a.getTabs(!1).toArray().filter(e=>!e.page.pinned);u=e.length>0?e[0].page:null}const h=this._getNodeById(e[0]);if(this._isInTrashFolder(n))return this._closeByIds(e);if(h.closed){return e.map(e=>this._getNodeById(e)).filter(e=>e.closed).forEach(e=>{e.tab?p.a.undeleteTab(e.tab):e.window&&p.a.undeleteWindow(e.window)}),Promise.resolve([])}const m=u?u.getIn(["extData","group"]):"";if("stack"===s.type&&d.a.isGroup(m))c.a.treeMove(r,o,u,l,"stack",m);else if(this.props.prefValues[D.kPanelsWindowShowPinnedGroup]&&this._isInPinnedFolder(s))c.a.treeMove(r,o,u,l,"pinned");else if("on"===i&&this.props.prefValues[D.kPanelsWindowDragToStack]){const e=r.filter(e=>e.id!==u.id);let t=u.index,a=0;for(let i=0;i<e.length;i++){t>e[i].index&&a++}t-=a,e.splice(0,0,u);const i=d.a.getNewGroupName();c.a.createTabStack(Object(A.List)(e),t,i),this.refs.treeList.selectById(i)}else c.a.treeMove(r,o,u,l,"regular");return Promise.resolve([])}),j(this,"_onCopy",(e,t)=>{const a=t.map(e=>this._getNodeById(e)).map(e=>M.a.getHoverUrl(e.url));e.clipboardData.setData("text/plain",a.join("\n")),e.clipboardData.setData("text/uri-list",a),e.preventDefault()}),j(this,"_isValidForClipboard",e=>!!e.url),j(this,"_isValidToDelete",e=>e.map(e=>this._getNodeById(e)).filter(e=>"window"!==e.type).filter(e=>!this._isInPinnedFolder(e)).filter(e=>!this._isInTrashFolder(e)).map(e=>e.id)),j(this,"_getTargetSpec",(e,t)=>{const a={id:e.id,index:0,parentId:void 0,pageIndex:0};return this._isFolder(e)&&("on"===t||e.isExpanded&&"below"===t)?(a.parentId=e.id,a.pageIndex=e.pageIndex):e.parentId?(a.parentId=e.parentId,a.index=e.index+("below"===t?1:0),a.pageIndex=e.pageIndex,"below"===t&&(this._isFolder(e)&&!e.isExpanded&&e.children.length>0?a.pageIndex=e.children[e.children.length-1].pageIndex:a.pageIndex+=1)):(a.parentId=e.id,a.index=0),a}),j(this,"_reload",()=>{const e=this.getSelectedItems().filter(e=>"window"===e.type&&!e.closed).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]).map(e=>e.children||e).reduce((e,t)=>e.concat(t),[]),t=this.getSelectedItems().filter(e=>"stack"===e.type||"pinned_group"===e.type).filter(t=>-1===e.findIndex(e=>e===t.id)).map(e=>e.children).reduce((e,t)=>e.concat(t),[]),a=this.getSelectedItems().filter(e=>"tab"===e.type&&!e.closed).filter(t=>-1===e.findIndex(e=>e===t.id)).filter(e=>-1===t.findIndex(t=>t===e.id));[e,t,a].forEach(e=>{const t=e.map(e=>e.page.id).filter(Boolean);c.a.reloadPage(Object(A.List)(t))})}),j(this,"_tile",()=>{const e=this._getTileableSelectedNodes();e.length>1&&c.a.tilePages(Object(A.List)(e.map(e=>e.page)))}),j(this,"_removeTile",()=>{this._getSelectedTiledIds().forEach(e=>{c.a.untileTileGroup(e)})}),j(this,"_setMediaState",(e,t)=>{if("playing"===e){const e=this._getPlayableNodesFrom("selection",t).map(e=>e.page);c.a.setMuting("selection","unmute","user",e)}else if("muting"===e){const e=this._getMuteableNodesFrom("selection",t).map(e=>e.page);c.a.setMuting("selection","mute","user",e)}}),j(this,"newTab",()=>{c.a.openURL("",{},e=>{this.refs.treeList.expandToId(e.id),this.refs.treeList.selectById(e.id)})}),j(this,"_newTabAfter",e=>{const t=this._getNodeById(e),a=this._getTargetSpec(t,"below"),i=this._getDropIndexByNode(t,"below");this.blockPageStoreChange=!0,c.a.openURL("",{index:i},e=>{if(this._isWithinFolder(t,"below")){const i=d.a.getPages().find(t=>t.id===e.id);if(this._isInPinnedFolder(t))c.a.togglePinned(i,!0,!1),c.a.moveToIndex(i,t.pageIndex);else if(this._isInStackFolder(t)){const e=this._getPageByNode(t),s=this._getStackFolderByNode(t),n=s.children.map(e=>e.page);n.splice(a.index,0,i),c.a.createTabStack(Object(A.List)(n),Number(s.pageIndex),e.getIn(["extData","group"]))}}this.blockPageStoreChange=!1,this._onPageStoreChanged(),this.refs.treeList.expandToId(e.id),this.refs.treeList.selectById(e.id)})}),j(this,"_cloneTab",()=>{const e=this.getSelectedItems().map(e=>e.page).filter(Boolean);c.a.clonePages(Object(A.List)(e))}),j(this,"_pinTab",()=>{const e=this.getSelectedItems().filter(e=>!this._isInStackFolder(e)).map(e=>e.page).filter(Boolean).filter(e=>!e.pinned);c.a.togglePinned(Object(A.List)(e),!0,!1)}),j(this,"_unpinTab",()=>{const e=this.getSelectedItems().map(e=>e.page).filter(Boolean).filter(e=>e.pinned);c.a.togglePinned(Object(A.List)(e),!1,!1)}),j(this,"_closeWithId",(e,t)=>{t&&(t.stopPropagation(),t.preventDefault());const a=this._getNodeById(e);"tab"===a.type?this.refs.treeList.onDeleteItems([a.id]):"stack"===a.type&&c.a.closeTabStack(this._getPageIdByNode(a),!0)}),j(this,"_close",()=>{const e=this.getSelectedItems().filter(e=>"stack"===e.type),t=e.map(e=>e.children).reduce((e,t)=>e.concat(t),[]),a=this.getSelectedItems().filter(e=>!e.closed).filter(e=>-1===t.findIndex(t=>t===e.id));this.blockPageStoreChange=!0;let i=e.map(e=>this._getPageByNode(e)).filter(Boolean);i.forEach(e=>{c.a.closeTabStack(e.id,!0)}),i=a.map(e=>e.page).filter(Boolean).filter(e=>!e.pinned),c.a.closePage(Object(A.List)(i)),this.blockPageStoreChange=!1,this._onPageStoreChanged()}),j(this,"_reopen",()=>{const e=this.getSelectedItems().filter(e=>e.closed),t=e.filter(e=>"window"===e.type),a=t.map(e=>e.children).reduce((e,t)=>e.concat(t),[]),i=e.filter(e=>-1===a.findIndex(t=>t===e.id)).map(e=>e.tab).filter(Boolean);t.forEach(e=>{p.a.undeleteWindow({sessionId:e.id,...e})}),i.forEach(e=>{p.a.undeleteTab(e)})}),j(this,"_createTabStack",()=>{this._createTabStackWithNodes(this._getStackableSelectedNodes())}),j(this,"_createTabStackForHost",e=>{this._createTabStackWithNodes(this._getStackableNodesForHost(e))}),j(this,"_createTabStackWithNodes",e=>{if(e.length>1){let t=-1;e.forEach(e=>{this._isInStackFolder(e)&&(e=this._getNodeById(e.parentId)),(-1===t||t>e.pageIndex)&&(t=e.pageIndex)});const a=d.a.getNewGroupName();c.a.createTabStack(Object(A.List)(e.map(e=>e.page)),-1===t?0:t,a),this.refs.treeList.selectById(a)}}),j(this,"_disolveTabStack",()=>{const e=this.getSelectedItems(),t=e.filter(e=>"stack"===e.type),a=t.map(e=>this._getPageByNode(e)).filter(Boolean);a.forEach(e=>{c.a.expandTabStack(e.getIn(["extData","group"]))}),a.length>0&&e.length===t.length&&this.refs.treeList.selectById(a[0].id)}),j(this,"_hibernate",()=>{this._getDiscardablePages().forEach(e=>{c.a.discardPage(e)})}),j(this,"_reopenLastClosedTab",()=>{p.a.undeletePreviousTab()}),j(this,"_validateForEdit",e=>this.props.prefValues[D.kTabsStackingAllowRename]&&d.a.isGroup(e)),j(this,"_getTitle",e=>this._getNodeById(e).title),j(this,"_getContextMenuItemProps",e=>{const t=!!e.url,a=this._isValidToDelete([e.id]).length>0,i=!this._isInTrashFolder(e)&&!N.a.isGuestSession(this.context.vivaldiWindowId);return{showEdit:!1,showRename:this._validateForEdit(e.id)&&1===this.getSelectedItems().length,showNewItem:!1,showNewFolder:!1,showCut:!1,showCopy:t,showPaste:!1,showSave:i,showSaveAll:i,showExport:i&&this.getSelectedItems().length>0,showExportAll:i,showDelete:a,showExpandCollapse:!0,showSettings:!1,showFullscreen:!1}}),j(this,"_getContextMenuCopyString",()=>Object(S.a)("Copy Address")),j(this,"_getContextMenuDeleteString",()=>Object(S.a)("Close")),j(this,"_getContextMenuSaveString",()=>Object(S.a)("Save as Bookmarks")),j(this,"_getContextMenuSaveAllString",()=>Object(S.a)("Save All as Bookmarks")),j(this,"_getContextMenuExportString",()=>Object(S.a)("Save as Session")),j(this,"_getContextMenuExportAllString",()=>Object(S.a)("Save All as Session")),j(this,"onContextMenu",(e,t)=>{this.refs.treeList.onContextMenu(e,t)}),j(this,"_getContextMenuItems",e=>e?this._getNodeMenuItems(e):this._getRootMenuItems()),j(this,"_getNodeMenuItems",e=>"tab"===e.type?this._getTabMenuItems(e):"stack"===e.type?this._getStackMenuItems(e):this._getWindowMenuItems(e)),j(this,"_getTabMenuItems",e=>{if(e.closed)return[{handler:this._reopen,visible:Boolean(g.a.getTrash().length),...Object(S.a)("Reopen")}];{const t=e.page;return[{handler:this._newTabAfter.bind(this,e.id),...Object(S.a)("command","New Tab")},{handler:this._createTabStack,visible:this._getStackableSelectedNodes().length>1,...Object(S.a)("New Tab Stack")},{handler:this._createTabStackForHost.bind(this,e.id),visible:1===this.getSelectedItems().length&&this._getStackableNodesForHost(e.id).length>1,...Object(S.a)("New Tab Stack for Host ($1)",[Object(T.b)(t)])},{handler:this._cloneTab,...Object(S.a)("Clone")},{name:"---"},{handler:this._reload,...Object(S.a)("Reload")},{handler:this._hibernate,visible:this._getDiscardablePages().length>0,...Object(S.a)("Hibernate")},{name:"---"},{handler:this._pinTab,visible:t&&!t.pinned&&!t.getIn(["extData","group"]),...Object(S.a)("Pin")},{handler:this._unpinTab,visible:t&&t.pinned,...Object(S.a)("Unpin")},{handler:this._tile,visible:this._getTileableSelectedNodes().length>1,...Object(S.a)("Tile")},{handler:this._removeTile,visible:this._getSelectedTiledIds().length>0,...Object(S.a)("Untile")},{name:"---"},{handler:this._setMediaState.bind(this,"muting",e),visible:this._getMuteableNodesFrom("selection",e).length>0,...Object(S.a)("Mute")},{handler:this._muteOthers.bind(this,e),visible:this._getMuteableNodesFrom("all",e).filter(t=>t.id!==e.id).length>0,...Object(S.a)("Mute Others")},{handler:this._setMediaState.bind(this,"playing",e),visible:this._getPlayableNodesFrom("selection",e).length>0,...Object(S.a)("Unmute")}]}}),j(this,"_getStackMenuItems",e=>[{handler:this._newTabAfter.bind(this,e.id),...Object(S.a)("command","New Tab")},{handler:this._createTabStack,visible:this._getStackableSelectedNodes().length>1,...Object(S.a)("New Tab Stack")},{name:"---"},{handler:this._disolveTabStack,...Object(S.a)("Ungroup Tab Stack")},{name:"---"},{handler:this._reload,...Object(S.a)("Reload")},{handler:this._hibernate,visible:this._getDiscardablePages().length>0,...Object(S.a)("Hibernate")},{name:"---"},{handler:this._tile,visible:this._getTileableSelectedNodes().length>1,...Object(S.a)("Tile")},{handler:this._removeTile,visible:this._getSelectedTiledIds().length>0,...Object(S.a)("Untile")},{name:"---"},{handler:this._setMediaState.bind(this,"muting",e),visible:this._getMuteableNodesFrom("selection",e).length>0,...Object(S.a)("Mute")},{handler:this._muteOthers.bind(this,e),visible:this._getMuteableNodesFrom("all",e).filter(t=>t.id!==e.id).length>0,...Object(S.a)("Mute Others")},{handler:this._setMediaState.bind(this,"playing",e),visible:this._getPlayableNodesFrom("selection",e).length>0,...Object(S.a)("Unmute")}]),j(this,"_getWindowMenuItems",e=>"trash"===e.id?[{handler:p.a.emptyTrash,visible:Boolean(g.a.getTrash().length),...Object(S.a)("command","Clear All")}]:e.closed?[{handler:this._reopen,visible:Boolean(g.a.getTrash().length),...Object(S.a)("Reopen")}]:[{handler:this._newTabAfter.bind(this,e.id),...Object(S.a)("command","New Tab")},{name:"---"},{handler:this._reload,...Object(S.a)("Reload")},{handler:this._hibernate,visible:this._getDiscardablePages().length>0,...Object(S.a)("Hibernate")},{name:"---"},{handler:this._setMediaState.bind(this,"muting",e),visible:this._getMuteableNodesFrom("selection",e).length>0,...Object(S.a)("Mute")},{handler:this._muteOthers.bind(this,e),visible:"window1"!==e.id&&this._getMuteableNodesFrom("all",e).filter(t=>t.id!==e.id).length>0,...Object(S.a)("Mute Others")},{handler:this._setMediaState.bind(this,"playing",e),visible:this._getPlayableNodesFrom("selection",e).length>0,...Object(S.a)("Unmute")}]),j(this,"_getRootMenuItems",()=>[{handler:this.newTab,...Object(S.a)("command","New Tab")},{handler:this._reopenLastClosedTab,visible:Boolean(g.a.getTrash().length),...Object(S.a)("Reopen Last Closed")}]),j(this,"_handleMouseEnter",e=>{e&&m.a.setStatus(M.a.getHoverUrl(e))}),j(this,"_handleMouseLeave",()=>{m.a.clearStatus()}),j(this,"_renderNodeContent",e=>{const t=e.node,a=16*(t.level+1)+"px",s=16*t.level+"px",n=this._isInPinnedFolder(t)&&!this.props.prefValues[D.kPanelsWindowShowPinnedGroup],r=this._isUnread(t),o=t.page&&t.page.discarded&&this.props.prefValues[D.kTabsDimHibernated],c=this.props.prefValues[D.kTabsShowCloseButton]&&!this._isInPinnedFolder(t)&&!this._isInTrashFolder(t)&&"window"!==t.type,u=getComputedStyle(document.body).getPropertyValue("--colorFg");let m="idle";if(t.page&&!t.page.discarded){const e=l.a.getMediaStateByTabId(t.page.id);"playing"!==e&&"muting"!==e||(m=e)}let p=0;return this._hasChildren(t)&&(p="window1"===t.id?d.a.getPages().size:t.children.length),[h.a.createElement("label",{key:"window__panel__"+t.id,onMouseEnter:this._handleMouseEnter.bind(this,t.url),onMouseLeave:this._handleMouseLeave,title:t.url,__source:{fileName:L,lineNumber:1659}},this._isFolder(t)&&this._hasChildren(t)&&h.a.createElement("span",{className:"expand-icon",style:{marginLeft:s},onClick:this._handleExpandClick,dangerouslySetInnerHTML:{__html:I.R},__source:{fileName:L,lineNumber:1665}}),"idle"!==m&&!this._isFolder(t)&&h.a.createElement("span",{className:"tab-audio",style:this._isFolder(t)?null:{marginLeft:s},onClick:this._setMediaState.bind(this,"playing"===m?"muting":"playing",t),onMouseDown:this.blockEvent,__source:{fileName:L,lineNumber:1672}},"capturing"===m?h.a.createElement("span",{className:"audioicon",dangerouslySetInnerHTML:{__html:I.gc},__source:{fileName:L,lineNumber:1685}}):h.a.createElement(i.a,{animated:this.props.prefValues[D.kThemeUseAnimation],mode:m,color:u,__source:{fileName:L,lineNumber:1688}})),this._isFolder(t)&&h.a.createElement(_.a,{trash:this._isTrash(t),stack:"stack"===t.type,pinned:t.page&&t.page.pinned,pinnedFolder:this._isPinnedFolder(t),open:t.isExpanded,leftMargin:this._hasChildren(t)?0:a,__source:{fileName:L,lineNumber:1698}}),!this._isFolder(t)&&!n&&h.a.createElement("img",{src:t.faviconUrl,className:w()({discarded:o}),style:"idle"===m?{marginLeft:a}:null,width:"16",height:"16",alt:"",__source:{fileName:L,lineNumber:1708}}),n&&h.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"pinned-icon",style:"idle"===m?{marginLeft:a}:null,__source:{fileName:L,lineNumber:1720}},h.a.createElement("g",{transform:"translate(2, 2)",__source:{fileName:L,lineNumber:1725}},h.a.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:L,lineNumber:1726}}),h.a.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:L,lineNumber:1727}}))),void 0!==e.inlineEditText&&h.a.createElement("input",{ref:"input",type:"text",value:e.inlineEditText,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,autoFocus:!0,__source:{fileName:L,lineNumber:1733}}),void 0===e.inlineEditText&&h.a.createElement("span",{className:w()({title:!0,active:t.active,unread:r}),__source:{fileName:L,lineNumber:1744}},t.title),this._hasChildren(t)&&h.a.createElement("span",{className:"item-count",__source:{fileName:L,lineNumber:1755}},p),c&&h.a.createElement("span",{className:"close",title:Object(v.a)("Close"),tabIndex:"-1",onClick:this._closeWithId.bind(this,t.id),dangerouslySetInnerHTML:{__html:I.L},__source:{fileName:L,lineNumber:1761}}))]})}componentDidMount(){d.a.addChangeListener(this._onPageStoreChanged),g.a.addChangeListener(this._onTrashStoreChanged),this._onFilterChange(this.props.filter,P.default)}componentWillUnmount(){d.a.removeChangeListener(this._onPageStoreChanged),g.a.removeChangeListener(this._onTrashStoreChanged)}componentDidUpdate(t){if(this.props.filter!==t.filter){const a=this.props.filter.length,i=t.filter.length;0===i&&a>0&&(this.expandModel=this.refs.treeList.getExpandModel()),this._onFilterChange(this.props.filter,t=>{a>0?e.nextTick(()=>{this.refs.treeList.expandAllExcept(t)}):i>0&&0===a&&e.nextTick(()=>{this.refs.treeList.expandWithModel(this.expandModel)})})}else(this.props.prefValues[D.kThemeUseAnimation]!==t.prefValues[D.kThemeUseAnimation]||this.props.prefValues[D.kTabsStackingMode]!==t.prefValues[D.kTabsStackingMode]||this.props.prefValues[D.kTabsUnread]!==t.prefValues[D.kTabsUnread]||this.props.prefValues[D.kTabsStackingNameMap]!==t.prefValues[D.kTabsStackingNameMap]||this.props.prefValues[D.kPanelsWindowShowPinnedGroup]!==t.prefValues[D.kPanelsWindowShowPinnedGroup]||this.props.sorting!==t.sorting&&"manually"===this.props.sorting.sortField)&&e.nextTick(()=>{const e="off"===this.props.prefValues[D.kTabsStackingMode];this.setState({nodes:this._getNodes(e)})})}render(){const e=this.state.nodes[0];return e&&e.children.find(e=>"tab"===e.type||"stack"===e.type||"pinned_group"===e.type&&e.children.length>0)?h.a.createElement(b.a,{ref:"treeList",settings:"WINDOWS_PANEL",nodes:this.state.nodes,defaultFolderExpansion:"fallback",renderItemContent:this._renderNodeContent,hasChildren:this._hasChildren,isFolder:this._isFolder,isTrash:this._isTrash,supportsInlineEdit:!0,isValidToEdit:this._validateForEdit,getTitle:this._getTitle,saveTitle:k.a,onItemClick:this._onNodeClick,onItemDoubleClick:this._onNodeDoubleClick,onItemMouseDown:this._onNodeMouseDown,onItemMouseUp:this._onNodeMouseUp,onItemsActivated:this._onNodesActivated,delete:this._closeByIds,onExport:this._saveSessionByIds,onSave:this._saveBookmarkByIds,onDrop:this._onDrop,onMove:this._onMove,onCopy:this._onCopy,isValidForClipboard:this._isValidForClipboard,validateForDeletion:this._isValidToDelete,getContextMenuItems:this._getContextMenuItems,getContextMenuItemProps:this._getContextMenuItemProps,getContextMenuCopyString:this._getContextMenuCopyString,getContextMenuDeleteString:this._getContextMenuDeleteString,getContextMenuSaveString:this._getContextMenuSaveString,getContextMenuSaveAllString:this._getContextMenuSaveAllString,getContextMenuExportString:this._getContextMenuExportString,getContextMenuExportAllString:this._getContextMenuExportAllString,mimeType:R,validateForDrag:this._validateForDrag,getDropSupport:this._getDropSupport,getTargetSpec:this._getTargetSpec,getDragData:this._getDragData,setCustomDragData:this._setCustomDragData,supportsDeepCopy:!1,sorting:this.props.sorting,__source:{fileName:L,lineNumber:1787}}):this.props.filter?h.a.createElement("p",{__source:{fileName:L,lineNumber:1783}},Object(v.a)("Nothing found")):null}}j(F,"contextType",f.a),t.a=Object(r.a)(F,B)}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a(17),n=a.n(s),r="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\WindowIcon.jsx";class o extends i.Component{render(){const e=n()({"folder-icon":!this.props.trash,"folder-trash":this.props.trash});return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:e,style:this.props.leftMargin?{marginLeft:this.props.leftMargin}:null,__source:{fileName:r,lineNumber:21}},this.props.trash&&i.createElement("g",{__source:{fileName:r,lineNumber:27}},i.createElement("path",{d:"M1 1.5h3.5v-1h7v1h-8H15",__source:{fileName:r,lineNumber:28}}),i.createElement("path",{d:"M3.5 3.5v11h9v-11zm3 8v-4zm3 0v-4z",__source:{fileName:r,lineNumber:29}})),this.props.stack&&i.createElement("g",{__source:{fileName:r,lineNumber:34}},i.createElement("path",{d:"M1.5,1.5 L1.5,9.5",__source:{fileName:r,lineNumber:35}}),i.createElement("path",{d:"M9.5,1.5 L9.5,9.5",__source:{fileName:r,lineNumber:36}}),i.createElement("path",{d:"M1.5,9.5 L9.5,9.5",__source:{fileName:r,lineNumber:37}}),i.createElement("path",{d:"M1.5,1.5 L9.5,1.5",__source:{fileName:r,lineNumber:38}}),i.createElement("path",{d:"M3.5,9.5 L3.5,11.5",__source:{fileName:r,lineNumber:39}}),i.createElement("path",{d:"M11.5,3.5 L11.5,11.5",__source:{fileName:r,lineNumber:40}}),i.createElement("path",{d:"M3.5,11.5 L11.5,11.5",__source:{fileName:r,lineNumber:41}}),i.createElement("path",{d:"M9.5,3.5 L11.5,3.5",__source:{fileName:r,lineNumber:42}}),i.createElement("path",{d:"M5.5,11.5 L5.5,13.5",__source:{fileName:r,lineNumber:43}}),i.createElement("path",{d:"M13.5,5.5 L13.5,13.5",__source:{fileName:r,lineNumber:44}}),i.createElement("path",{d:"M5.5,13.5 L13.5,13.5",__source:{fileName:r,lineNumber:45}}),i.createElement("path",{d:"M11.5,5.5 L13.5,5.5",__source:{fileName:r,lineNumber:46}})),this.props.pinnedFolder&&i.createElement("g",{transform:"translate(3, 2)",__source:{fileName:r,lineNumber:51}},i.createElement("polygon",{points:"2.5 5.5 6.5 9.5 7.5 9.5 7.5 5.5 11.5 2.5 9.5 0.5 6.5 4.5 2.5 4.5",__source:{fileName:r,lineNumber:52}}),i.createElement("polygon",{points:"0 12 3 8 4 9",__source:{fileName:r,lineNumber:53}})),!this.props.pinnedFolder&&!this.props.stack&&!this.props.trash&&i.createElement("g",{transform:"translate(-1, 1)",__source:{fileName:r,lineNumber:59}},i.createElement("polygon",{points:"16.5 3.5 16.5 0.5 1.5 0.5 1.5 3.5",__source:{fileName:r,lineNumber:60}}),i.createElement("path",{d:"M1.5,3.5 L1.5,12.5",__source:{fileName:r,lineNumber:61}}),i.createElement("path",{d:"M16.5,3.5 L16.5,12.5",__source:{fileName:r,lineNumber:62}}),i.createElement("path",{d:"M1.5,12.5 L16.5,12.5",__source:{fileName:r,lineNumber:63}}),i.createElement("path",{d:"M4.5,0.5 L4.5,3.5",__source:{fileName:r,lineNumber:64}}),i.createElement("path",{d:"M7.5,0.5 L7.5,3.5",__source:{fileName:r,lineNumber:65}}),this.props.activeWindow&&i.createElement("polygon",{points:"4.5 6.5 4.5 8.5 7.5 6.5",strokeWidth:"2",__source:{fileName:r,lineNumber:68}})))}}t.a=o},function(e,t,a){"use strict";(function(e){var i=a(0),s=a.n(i),n=a(186),r=a(361),o=a(184),l=a(77);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.a.PureComponent{constructor(...t){super(...t),c(this,"state",{zoom:o.a.getState().uiZoom}),c(this,"_onZoomStoreChanged",()=>{this.setState({zoom:o.a.getState().uiZoom})}),c(this,"setZoomLevel",(t,a)=>{a?this.setState({zoom:t}):n.a.setUIZoom(t),e.nextTick(()=>{this.props.onUIZoomUpdate()})})}componentDidMount(){this._zoomDetectStoreToken=o.a.addListener(this._onZoomStoreChanged)}componentWillUnmount(){this._zoomDetectStoreToken.remove()}render(){const{zoom:e}=this.state;return s.a.createElement(r.a,{inFooter:!1,zoom:e,defaultZoomLevel:l.j,key:"zoomslider",scrolling:!1,maxLevel:l.k,minLevel:l.l,step:l.m,delay:!0,onZoomUpdated:this.setZoomLevel,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\zoom\\UIZoomIndicator.jsx",lineNumber:57}})}}t.a=d}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(88),n=a(62),r=a(19),o=a(96),l=a(63),c=a(572),d=a(8),u=a(48),h=a(26),m=a(143),p=a(982),g=a(27),b=a(2),f=a(13),_=a(1),N=a(20),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\mouse\\MouseGestures.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=N.a.settingCategories,S=[_.kMouseGesturesAltGesturesEnabled,_.kMouseGesturesDoubleClickMenuEnabled,_.kMouseGesturesEnabled,_.kMouseGesturesStrokeTolerance,_.kMouseGesturesRockerGesturesEnabled],C=d.a.getEventHandler;class k extends i.Component{constructor(t){super(t),E(this,"lastX",0),E(this,"lastY",0),E(this,"_onCommandStoreChange",()=>{this.setState({commandArray:n.default.getUserEditableCommands().filter(e=>!e.keyword&&!e.hideInSettings),assignedArray:n.default.getCommandsGestures(),addingGesture:0})}),E(this,"populateAngleMap",()=>{const e=2*Math.PI/4,t=2*Math.PI/100,a=[];for(let i=-e/2;i<=2*Math.PI-e/2;i+=t){const t=2*Math.floor((i+e/2)/e);a.push(t)}return a}),E(this,"_getCommandByGesture",e=>this.state.commandArray.find(t=>{if(t.gestures&&t.gestures[0]===e)return t})),E(this,"_getTopCommand",e=>e.find(e=>e.gestures)),E(this,"onGestureListChange",e=>{const t=this.state.selectedCommand;let a=e&&"focus"===e.type&&t&&t.gestures?t.gestures[0]:e.target.value;const i=e&&"focus"===e.type&&t?t:this._getCommandByGesture(a);a&&(this.animation&&!this.animation.stopped||(this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG)),0===a.indexOf("e")&&(a=a.substring(1,a.length)),this.animation.stop(),this.animation.start(a),this.setState({addingGesture:0,selectedCommand:i}))}),E(this,"addGesture",()=>{this.setState({addingGesture:1})}),E(this,"onCancelGesture",()=>{this.moves=[],this.clearAnimation();const e=this.state.commandArray;this.setState({addingGesture:0,gestureExists:!1,selectedCommand:this._getTopCommand(e)})}),E(this,"_findNextCommandGesture",()=>{const e=this.state.selectedCommand,t=this.state.commandArray.filter(e=>e.gestures);if(t&&e){const a=t.findIndex(t=>t.name===e.name);return a<t.length-1?t[a+1]:t[a-1]}}),E(this,"removeGesture",()=>{const e=this._findNextCommandGesture(),t=this.state.selectedCommand;if(!t)return;const a={gestures:null,shortcut:t.shortcut,showInQC:t.showInQC};g.a.set({[t.name]:a}),this.setState({selectedCommand:e}),this.animation&&e&&this.animation.start(e.gestures[0])}),E(this,"editGesture",()=>{const e=this.state.selectedCommand;e&&this.setState(t=>({addingGesture:2,selectedCommand:t.commandArray.find(t=>t.name===e.name)}))}),E(this,"restoreGestures",()=>{s.default.restoreCommandGestures(),this.setState({confirmation:!1})}),E(this,"confirmRestore",()=>{this.setState({confirmation:!0})}),E(this,"onCancel",()=>{this.setState({confirmation:!1})}),E(this,"consolidateCommands",()=>this.state.commandArray.filter(e=>!e.gestures&&e)),E(this,"save",()=>{if(!this.moves)return;let t=this.moves.join("");const a=this.state.selectedCommand;if(!a)return;a.overLink&&(t="e"+t);const i={gestures:[t],shortcut:a.shortcut,showInQC:a.showInQC};g.a.set({[a.name]:i}),this.moves=[],e.nextTick(()=>this.refs.gestureList&&this.refs.gestureList.focus())}),E(this,"addPoint",(e,t,a)=>{this.pointX.push(e),this.pointY.push(t),a&&this.pointDrag.push(a)}),E(this,"addMove",(e,t)=>{const a=2*Math.PI/4;let i=Math.atan2(t,e)+a/2;i<0&&(i+=2*Math.PI);const s=Math.floor(i/(2*Math.PI)*100);Array.isArray(this.moves)&&this.moves.push(this.state.angleMap[s])}),E(this,"redraw",()=>{const e=this.refs.gestureCanvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.strokeStyle=this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,e.lineJoin="round",e.lineWidth=16;for(let t=0;t<this.pointX.length;t++)e.beginPath(),this.pointDrag[t]&&t?e.moveTo(this.pointX[t-1],this.pointY[t-1]):e.moveTo(this.pointX[t]-1,this.pointY[t]),e.lineTo(this.pointX[t],this.pointY[t]),e.closePath(),e.stroke()}),E(this,"penDown",e=>{if(2!==this.state.addingGesture||e.button&&0!==e.button)return;e.touches&&(e=e.touches[0]),this.clearAnimation(),this.clearCanvas(),this.moves=[],this.paint=!0;const t=this.refs.gestureCanvas.getBoundingClientRect();this.addPoint(e.pageX-t.left,e.pageY-t.top),this.redraw()}),E(this,"penMove",e=>{if(2===this.state.addingGesture&&(e.touches&&(e=e.touches[0]),this.paint)){const t=this.refs.gestureCanvas.getBoundingClientRect();if(this.addPoint(e.pageX-t.left,e.pageY-t.top,!0),0===this.lastX)return this.lastX=e.pageX-t.left,void(this.lastY=e.pageY-t.top);const a=e.pageX-t.left-this.lastX,i=e.pageY-t.top-this.lastY,s=10;a*a+i*i>s*s&&(this.lastX=e.pageX-t.left,this.lastY=e.pageY-t.top,this.addMove(a,i)),this.redraw()}}),E(this,"penUp",()=>{if(this.paint=!1,2!==this.state.addingGesture||!this.moves||this.moves.length<3)return;this.moves.length&&(this.moves=this.moves.map((e,t,a)=>{if(e!==a[t-1]&&e===a[t+1])return e}).filter(e=>void 0!==e));let e=this.moves.join("");e.length>5&&(e=e.substring(e.length-5)),this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG),this.animation.start(e);const{assignedArray:t,selectedCommand:a}=this.state;let i;i=a&&a.overLink?t["e"+e]:t[e],this.setState({gestureExists:Boolean(i)})}),E(this,"penLeave",()=>{this.paint&&(this.paint=!1,this.moves=[],this.forceUpdate())}),E(this,"clearAnimation",()=>{if(void 0!==this.animation){this.animation.stop();const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)}}),E(this,"clearCanvas",()=>{this.paint=!1,this.pointX=[],this.pointY=[],this.pointDrag=[];const e=this.refs.gestureCanvas;e.getContext("2d").clearRect(0,0,e.width,e.height)}),E(this,"renderGesture",()=>i.createElement("canvas",{ref:"gestureCanvas",width:"200",height:"200",onTouchStart:this.penDown,onTouchMove:this.penMove,onTouchEnd:this.penUp,onTouchCancel:this.penLeave,onMouseDown:this.penDown,onMouseMove:this.penMove,onMouseUp:this.penUp,onMouseLeave:this.penLeave,__source:{fileName:v,lineNumber:495}})),E(this,"renderSearchableCommands",()=>{const e=this.consolidateCommands(),t=this.props.category!==w.all;return i.createElement(p.a,{placeholder:Object(b.a)("Filter commands..."),isClearable:!0,autoFocus:t,openMenuOnFocus:!0,isMulti:!1,setSelectedItem:this.setSelectedCommand,commands:e,__source:{fileName:v,lineNumber:515}})}),E(this,"setSelectedCommand",e=>{this.setState({selectedCommand:e})}),E(this,"renderCommands",()=>this.state.commandArray.map(e=>e.gestures?i.createElement("option",{key:`id-gesture-${e.label.split(" ").join("_")}`,value:e.gestures[0],__source:{fileName:v,lineNumber:535}},e.label):null)),E(this,"renderModal",()=>i.createElement(l.a,{dialogWidth:400,onRequestClose:this.onCancel,__source:{fileName:v,lineNumber:548}},i.createElement("div",{className:"dialog-restore-shortcuts",__source:{fileName:v,lineNumber:551}},i.createElement("header",{className:"dialog-header",__source:{fileName:v,lineNumber:552}},i.createElement("h1",{className:"dialog-title",__source:{fileName:v,lineNumber:553}},Object(b.a)("Restore Gestures?"))),i.createElement("div",{className:"dialog-content",__source:{fileName:v,lineNumber:557}},i.createElement("p",{__source:{fileName:v,lineNumber:558}},Object(b.a)("All command gestures will be restored to default settings."))),i.createElement("footer",{className:"dialog-footer",__source:{fileName:v,lineNumber:562}},i.createElement("input",{type:"button",className:"danger",onClick:this.restoreGestures,value:Object(b.a)("Restore"),__source:{fileName:v,lineNumber:563}}),i.createElement("input",{type:"button",onClick:this.onCancel,value:Object(b.a)("Cancel"),autoFocus:!0,__source:{fileName:v,lineNumber:568}})))));const a=n.default.getUserEditableCommands();this.state={commandArray:a.filter(e=>!e.keyword&&!e.hideInSettings),assignedArray:n.default.getCommandsGestures(),selectedCommand:this._getTopCommand(a),addingGesture:0,gestureExists:!1,angleMap:this.populateAngleMap(),confirmation:!1}}componentDidMount(){n.default.addChangeListener(this._onCommandStoreChange),this.props.category!==w.all&&e.nextTick(()=>this.refs.gestureList.focus())}componentWillUnmount(){void 0!==this.animation&&this.animation.stop(),n.default.removeChangeListener(this._onCommandStoreChange)}componentDidUpdate(e){!this.animation||this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG===e.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG&&this.props.vivaldiSettings.BROWSER_COLOR_BG===e.vivaldiSettings.BROWSER_COLOR_BG||(this.clearAnimation(),this.animation=new c.a(this.refs.gestureCanvas,this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG,this.props.vivaldiSettings.BROWSER_COLOR_BG),this.state.selectedCommand&&this.animation.start(this.state.selectedCommand.gestures[0]))}render(){const e=this.props.prefValues,t=this.state.selectedCommand,a=t&&t.gestures?t.gestures[0]:void 0,s=!this.moves||0===this.moves.length,n=this.state.gestureExists&&!s?this.state.commandArray.find(e=>e.gestures&&e.gestures.includes(this.moves.join(""))):void 0,r=" "+Object(b.a)("This setting requires a restart to take full effect.");return i.createElement(u.a,{categoryTitle:Object(b.a)("Mouse"),filter:this.props.filter,__source:{fileName:v,lineNumber:595}},this.state.confirmation&&this.renderModal(),i.createElement("div",{className:"setting-group unlimited",__source:{fileName:v,lineNumber:597}},i.createElement("h3",{__source:{fileName:v,lineNumber:598}},Object(b.a)("Gestures")),i.createElement("div",{className:"setting-single",__source:{fileName:v,lineNumber:600}},i.createElement("label",{__source:{fileName:v,lineNumber:601}},i.createElement("input",{type:"checkbox",checked:e[_.kMouseGesturesEnabled],onChange:C(_.kMouseGesturesEnabled),__source:{fileName:v,lineNumber:602}}),i.createElement("span",{__source:{fileName:v,lineNumber:605}},Object(b.a)("Allow Gestures"))),i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:607}},Object(b.a)("Hold down right mouse button and perform a gesture to issue related command.")+r)),i.createElement("div",{className:"setting-single",__source:{fileName:v,lineNumber:612}},i.createElement("label",{__source:{fileName:v,lineNumber:613}},i.createElement("input",{type:"checkbox",checked:e[_.kMouseGesturesAltGesturesEnabled],onChange:C(_.kMouseGesturesAltGesturesEnabled),__source:{fileName:v,lineNumber:614}}),i.createElement("span",{__source:{fileName:v,lineNumber:617}},Object(b.a)("Perform Gestures with Alt Key"))),i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:619}},Object(b.a)("Use gestures with trackpad or other input device.")))),i.createElement("div",{className:"setting-group unlimited gestures",__source:{fileName:v,lineNumber:624}},i.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:625}},i.createElement("h3",{__source:{fileName:v,lineNumber:626}},Object(b.a)("Gesture Mapping")),i.createElement("div",{className:"gesture-map setting-single",__source:{fileName:v,lineNumber:627}},i.createElement("select",{ref:"gestureList",className:"gesture-list",value:a,onChange:this.onGestureListChange,onFocus:this.onGestureListChange,onBlur:this.clearAnimation,size:"9",__source:{fileName:v,lineNumber:628}},this.renderCommands()),i.createElement("div",{className:2===this.state.addingGesture?"active gesture":"gesture",__source:{fileName:v,lineNumber:638}},this.renderGesture())),i.createElement("div",{className:"setting-single record-gesture",__source:{fileName:v,lineNumber:644}},0===this.state.addingGesture&&i.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:v,lineNumber:646}},i.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:v,lineNumber:647}},i.createElement(h.a,{tooltip:Object(b.a)("New gesture"),onClick:this.addGesture,image:f.f.medium,__source:{fileName:v,lineNumber:648}}),i.createElement("hr",{__source:{fileName:v,lineNumber:653}}),i.createElement(h.a,{tooltip:Object(b.a)("Remove gesture"),onClick:this.removeGesture,disabled:!t,image:f.Lb.medium,__source:{fileName:v,lineNumber:654}})),i.createElement(h.a,{tooltip:Object(b.a)("Edit gesture"),onClick:this.editGesture,disabled:!t,image:f.J.medium,__source:{fileName:v,lineNumber:661}}),i.createElement(h.a,{title:Object(b.a)("Restore Default Gestures"),onClick:this.confirmRestore,__source:{fileName:v,lineNumber:667}})),1===this.state.addingGesture&&i.createElement("form",{onSubmit:this.editGesture,__source:{fileName:v,lineNumber:674}},i.createElement("h3",{className:"pad-top",__source:{fileName:v,lineNumber:675}},Object(b.a)("Pick a Command")),i.createElement("div",{className:"toolbar",__source:{fileName:v,lineNumber:676}},this.renderSearchableCommands(),i.createElement("input",{type:"submit",disabled:!t,value:Object(b.a)("Next..."),__source:{fileName:v,lineNumber:678}}),i.createElement("input",{type:"button",onClick:this.onCancelGesture,value:Object(b.a)("Cancel"),__source:{fileName:v,lineNumber:681}}))),t&&2===this.state.addingGesture&&i.createElement(i.Fragment,null,i.createElement("h3",{className:"pad-top",__source:{fileName:v,lineNumber:690}},Object(b.a)("Recording “$1” Gesture",[t.label])),i.createElement("div",{className:"add-gesture",__source:{fileName:v,lineNumber:693}},i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:694}},Object(b.a)("Draw a new gesture in the highlighted area using the primary input. Gesture may consist of horizontal and vertical lines, limited to maximum of five strokes.")),i.createElement("div",{className:"save",__source:{fileName:v,lineNumber:695}},i.createElement("input",{type:"submit",value:Object(b.a)("Save Gesture"),onClick:this.save,disabled:s||this.state.gestureExists,__source:{fileName:v,lineNumber:696}}),i.createElement("input",{type:"button",onClick:this.onCancelGesture,value:Object(b.a)("Cancel"),__source:{fileName:v,lineNumber:700}}),n&&i.createElement("p",{className:"alert",__source:{fileName:v,lineNumber:704}},Object(b.a)("This gesture is already used by “$1” command.",[n.label])))))))),i.createElement("div",{className:"setting-group unlimited",__source:{fileName:v,lineNumber:715}},i.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:716}},i.createElement("h3",{__source:{fileName:v,lineNumber:717}},Object(b.a)("Gesture Sensitivity")),i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:718}},Object(b.a)("Set minimum stroke length to be recognized as a gesture move.")),i.createElement("div",{className:"setting-single tolerance",__source:{fileName:v,lineNumber:719}},i.createElement("div",{className:"gesture-preview",__source:{fileName:v,lineNumber:720}},i.createElement("span",{className:"meter-bg",__source:{fileName:v,lineNumber:721}}),i.createElement("span",{className:"meter",style:{width:e[_.kMouseGesturesStrokeTolerance]+"px"},__source:{fileName:v,lineNumber:722}}),i.createElement("span",{__source:{fileName:v,lineNumber:724}},Object(b.a)("$1 pixels",[e[_.kMouseGesturesStrokeTolerance]]))),i.createElement("input",{type:"range",min:5,max:100,step:5,onChange:C(_.kMouseGesturesStrokeTolerance),value:e[_.kMouseGesturesStrokeTolerance],__source:{fileName:v,lineNumber:726}}))),i.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:735}},i.createElement("h3",{__source:{fileName:v,lineNumber:736}},Object(b.a)("Rocker Gestures")),i.createElement("label",{__source:{fileName:v,lineNumber:737}},i.createElement("input",{type:"checkbox",checked:e[_.kMouseGesturesRockerGesturesEnabled],onChange:C(_.kMouseGesturesRockerGesturesEnabled),__source:{fileName:v,lineNumber:738}}),i.createElement("span",{__source:{fileName:v,lineNumber:741}},Object(b.a)("Allow Rocker Gestures"))),i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:743}},Object(b.a)("Press right mouse button followed by left mouse button click to go back in history. Press left mouse button followed by right click to advance forward in history.")+r)),m.a.isEnabled("double_click_menu")&&i.createElement("div",{className:"setting-single pad-top",__source:{fileName:v,lineNumber:749}},i.createElement("h3",{__source:{fileName:v,lineNumber:750}},Object(b.a)("Double Click Context Menu")),i.createElement("label",{__source:{fileName:v,lineNumber:751}},i.createElement("input",{type:"checkbox",checked:e[_.kMouseGesturesDoubleClickMenuEnabled],onChange:C(_.kMouseGesturesDoubleClickMenuEnabled),__source:{fileName:v,lineNumber:752}}),i.createElement("span",{__source:{fileName:v,lineNumber:757}},Object(b.a)("Allow Double Click to Show Context Menu"))),i.createElement("p",{className:"info",__source:{fileName:v,lineNumber:759}},Object(b.a)("Use a double click to show the context menu.")+r))))}}t.a=Object(r.a)(Object(o.a)(k,["BROWSER_COLOR_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),S)}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(1029),r=a(2);const o={clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:()=>({}),loadingIndicator:()=>({}),menu:()=>({}),menuList:()=>({}),menuPortal:()=>({}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessageCSS:()=>({}),option:()=>({}),placeholder:()=>({}),singleValue:()=>({}),valueContainer:()=>({})};class l extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{this.props.setSelectedItem(e)},(a="setSelected")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}componentDidMount(){this.props.setSelectedItem(this.props.commands[0])}render(){const{autoFocus:e,placeholder:t,commands:a,isClearable:i,openMenuOnFocus:l,isMulti:c,customStyles:d}=this.props,u={...o,...d};return s.a.createElement(n.a,{className:"VivaldiSelector",classNamePrefix:"Inner",autoFocus:e||!1,defaultValue:a[0],isClearable:i||!1,openMenuOnFocus:l||!1,isMulti:c||!1,onChange:e=>this.setSelected(e),styles:u,placeholder:t,options:a,loadingMessage:()=>Object(r.a)("Loading..."),noOptionsMessage:()=>Object(r.a)("No options"),__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\vivaldiselector\\VivaldiSelector.jsx",lineNumber:70}})}}t.a=l},,function(e,t,a){"use strict";(function(e){var i=a(0),s=a(447),n=a(19),r=a(546),o=a(63),l=a(8),c=a(59),d=a(127),u=a(46),h=a(48),m=a(25),p=a(2),g=a(60),b=a(6),f=a(1),_="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\search\\SearchEngines.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v=[f.kAddressBarInlineSearchEnabled,f.kAddressBarInlineSearchSuggestEnabled,f.kAddressBarInlineSearchSuggestOnNickname,f.kAddressBarSearchDisplay,f.kAddressBarSearchInNewTab,f.kAddressBarSearchKeepSelected,f.kAddressBarSearchShowFavicon,f.kAddressBarSearchSuggestEnabled,f.kPageSearchInBackground,f.kStartpageSpeedDialDisplaySearch],E=l.a.getEventHandler;class w extends i.Component{constructor(...t){super(...t),N(this,"_focusEditor",!1),N(this,"_editorKey",0),N(this,"state",{confirmation:!1,foundSearchEngine:!1,keepCustomEngines:!1,searchEngines:u.a.getList(),creatingId:""}),N(this,"_onSearchEngineStoreChanged",()=>{this.setState({searchEngines:u.a.getList()})}),N(this,"restoreSearchEngines",()=>{d.a.restore(this.state.keepCustomEngines),this.setState({confirmation:!1})}),N(this,"setDefault",(e,t)=>{d.a.setDefault(e,t),this._editorKey++}),N(this,"confirmRestoreDefaults",()=>{this.setState({confirmation:!0}),e.nextTick(()=>this._editorKey++)}),N(this,"onCancelConfirm",()=>{this.setState({confirmation:!1})}),N(this,"toggleKeepCustomEngines",()=>{this.setState(e=>({keepCustomEngines:!e.keepCustomEngines}))}),N(this,"renderModal",()=>{const e=this.state.keepCustomEngines?Object(p.a)("Search engines will be reset to default settings, but your custom search engines will be kept."):Object(p.a)("Search engines will be reset to default settings, which will also reset your custom search engines.");return i.createElement(o.a,{dialogWidth:400,onRequestClose:this.onCancelConfirm,__source:{fileName:_,lineNumber:142}},i.createElement("div",{className:"dialog-restore-search",__source:{fileName:_,lineNumber:145}},i.createElement("header",{className:"dialog-header",__source:{fileName:_,lineNumber:146}},i.createElement("h1",{className:"dialog-title",__source:{fileName:_,lineNumber:147}},Object(p.a)("Restore Default Search Engines?"))),i.createElement("div",{className:"dialog-content",__source:{fileName:_,lineNumber:151}},i.createElement("p",{__source:{fileName:_,lineNumber:152}},e)),i.createElement("footer",{className:"dialog-footer",__source:{fileName:_,lineNumber:156}},i.createElement("label",{__source:{fileName:_,lineNumber:157}},i.createElement("input",{type:"checkbox",checked:this.state.keepCustomEngines,onChange:this.toggleKeepCustomEngines,__source:{fileName:_,lineNumber:158}}),i.createElement("span",{__source:{fileName:_,lineNumber:161}},Object(p.a)("Keep Custom Searches"))),i.createElement("span",{__source:{fileName:_,lineNumber:163}},i.createElement("input",{type:"button",className:"danger",onClick:this.restoreSearchEngines,value:Object(p.a)("Restore"),__source:{fileName:_,lineNumber:164}}),i.createElement("input",{type:"button",onClick:this.onCancelConfirm,value:Object(p.a)("Cancel"),autoFocus:!0,__source:{fileName:_,lineNumber:169}})))))}),N(this,"removeAt",e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e],a=u.a.getDefault(!1);a&&a.id!==t.id&&d.a.remove(t.id)}}),N(this,"renderListItem",e=>this.renderEngine(u.a.getById(e.key),e.name)),N(this,"renderCreateListItem",()=>this.state.creatingId?this.renderEngine(u.a.getById(this.state.creatingId)):null),N(this,"renderEngine",(e,t)=>{const a=u.a.isDefault(e.id,!0),s=e.faviconUrl?e.faviconUrl:"/resources/default_favicon_64.png";return i.createElement(i.Fragment,null,i.createElement("img",{className:"item-icon",src:s,__source:{fileName:_,lineNumber:207}}),i.createElement("div",{className:"item-title",__source:{fileName:_,lineNumber:208}},t||e.name),a&&i.createElement("span",{className:"item-badge",__source:{fileName:_,lineNumber:212}},Object(p.a)("Private")),i.createElement("div",{className:"item-meta",__source:{fileName:_,lineNumber:214}},e.keyword))}),N(this,"onCreateEngine",()=>{const t=u.a.getNewEngine();t.name=Object(p.a)("New Engine"),d.a.add(t,!1),this._focusEditor=!0,this.setState({creatingId:t.id},e.nextTick(()=>this._focusEditor=!1))}),N(this,"renderContent",(e,t)=>{if(e>=0&&e<this.state.searchEngines.length){const a=this.state.searchEngines[e];return i.createElement(s.a,{key:this._editorKey,focusNameInput:this._focusEditor,searchableStrings:t,filter:this.props.filter,id:a.id,__source:{fileName:_,lineNumber:233}})}return null}),N(this,"onContextMenu",(e,t)=>{const a=[];if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];u.a.isDefault(t.id,!1)||a.push({handler:this.setDefault.bind(this,t.id,!1),...Object(b.a)("searchengine","Set as Default Search")}),u.a.isDefault(t.id,!0)||a.push({handler:this.setDefault.bind(this,t.id,!0),...Object(b.a)("searchengine","Set as Private Search")})}Object(g.a)(this.context.vivaldiWindowId,a)(t)}),N(this,"onActivate",e=>{if(e>=0&&e<this.state.searchEngines.length){const t=this.state.searchEngines[e];this.setDefault(t.id,!1)}}),N(this,"renderCreate",e=>i.createElement(s.a,{key:this._editorKey,searchableStrings:e,filter:this.props.filter,__source:{fileName:_,lineNumber:276}})),N(this,"renderEmpty",()=>i.createElement("div",{__source:{fileName:_,lineNumber:284}})),N(this,"moveEngine",(e,t)=>{if(e>=0&&e<this.state.searchEngines.length){const a=this.state.searchEngines[e];d.a.reorder(a.id,t)}})}componentDidMount(){u.a.addChangeListener(this._onSearchEngineStoreChanged)}componentWillUnmount(){u.a.removeChangeListener(this._onSearchEngineStoreChanged)}UNSAFE_componentWillReceiveProps(e){e.filter&&e.filter.length>0&&this.setState(t=>({foundSearchEngine:void 0!==t.searchEngines.find(t=>(t.keyword+t.url+t.name).toLowerCase().indexOf(e.filter.toLowerCase())>-1)}))}render(){if(!this.state.searchEngines)return null;const e=this.state.searchEngines.map(e=>({key:e.id,name:e.name,isDefault:u.a.isDefault(e.id,!1)}));return i.createElement(h.a,{categoryTitle:Object(p.a)("noun","Search"),filter:this.props.filter,__source:{fileName:_,lineNumber:309}},this.state.confirmation&&this.renderModal(),i.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:314}},i.createElement("h3",{__source:{fileName:_,lineNumber:315}},Object(p.a)("Search Field Display")),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:317}},i.createElement("label",{__source:{fileName:_,lineNumber:318}},i.createElement(c.a,{name:"renderSearchField",value:this.props.prefValues[f.kAddressBarSearchDisplay],onChange:E(f.kAddressBarSearchDisplay),__source:{fileName:_,lineNumber:319}},i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:323}},i.createElement("label",{__source:{fileName:_,lineNumber:324}},i.createElement("input",{type:"radio",value:"field",__source:{fileName:_,lineNumber:325}}),i.createElement("span",{__source:{fileName:_,lineNumber:329}},Object(p.a)("Show in Address Bar")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:332}},i.createElement("label",{__source:{fileName:_,lineNumber:333}},i.createElement("input",{type:"radio",value:"button",__source:{fileName:_,lineNumber:334}}),i.createElement("span",{__source:{fileName:_,lineNumber:338}},Object(p.a)("Show as a Button")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:341}},i.createElement("label",{__source:{fileName:_,lineNumber:342}},i.createElement("input",{type:"radio",value:"disabled",__source:{fileName:_,lineNumber:343}}),i.createElement("span",{__source:{fileName:_,lineNumber:347}},Object(p.a)("Disable"))))))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:354}},i.createElement("label",{__source:{fileName:_,lineNumber:355}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchInNewTab],disabled:"disabled"===this.props.prefValues[f.kAddressBarSearchDisplay],onChange:E(f.kAddressBarSearchInNewTab),__source:{fileName:_,lineNumber:356}}),i.createElement("span",{__source:{fileName:_,lineNumber:361}},Object(p.a)("Always Search in New Tab")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:365}},i.createElement("label",{__source:{fileName:_,lineNumber:366}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchShowFavicon],disabled:"disabled"===this.props.prefValues[f.kAddressBarSearchDisplay],onChange:E(f.kAddressBarSearchShowFavicon),__source:{fileName:_,lineNumber:367}}),i.createElement("span",{__source:{fileName:_,lineNumber:373}},Object(p.a)("Show Search Engine Icon"))))),i.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:378}},i.createElement("h3",{__source:{fileName:_,lineNumber:379}},Object(p.a)("Search Options")),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:380}},i.createElement("label",{__source:{fileName:_,lineNumber:381}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchEnabled],onChange:E(f.kAddressBarInlineSearchEnabled),__source:{fileName:_,lineNumber:382}}),i.createElement("span",{__source:{fileName:_,lineNumber:386}},Object(p.a)("Search in Address Field")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:390}},i.createElement("label",{__source:{fileName:_,lineNumber:391}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kStartpageSpeedDialDisplaySearch],onChange:E(f.kStartpageSpeedDialDisplaySearch),__source:{fileName:_,lineNumber:392}}),i.createElement("span",{__source:{fileName:_,lineNumber:395}},Object(p.a)("Show Search Field on Speed Dial")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:399}},i.createElement("label",{__source:{fileName:_,lineNumber:400}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchKeepSelected],onChange:E(f.kAddressBarSearchKeepSelected),__source:{fileName:_,lineNumber:401}}),i.createElement("span",{__source:{fileName:_,lineNumber:404}},Object(p.a)("Keep Last Selected Search Engine")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:408}},i.createElement("label",{__source:{fileName:_,lineNumber:409}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kPageSearchInBackground],onChange:E(f.kPageSearchInBackground),__source:{fileName:_,lineNumber:410}}),i.createElement("span",{__source:{fileName:_,lineNumber:413}},Object(p.a)("Page Selection Search in Background"))))),i.createElement("div",{className:"setting-group",__source:{fileName:_,lineNumber:418}},i.createElement("div",{id:"searchSuggest",className:"setting-group",__source:{fileName:_,lineNumber:419}},i.createElement("h3",{__source:{fileName:_,lineNumber:420}},Object(p.a)("Allow Search Suggestions")),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:421}},i.createElement("label",{__source:{fileName:_,lineNumber:422}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchSuggestEnabled],onChange:E(f.kAddressBarInlineSearchSuggestEnabled),__source:{fileName:_,lineNumber:423}}),i.createElement("span",{__source:{fileName:_,lineNumber:426}},Object(p.a)("searchengine","In Address Field")))),i.createElement("div",{className:"setting-single pad-left",__source:{fileName:_,lineNumber:429}},i.createElement("label",{__source:{fileName:_,lineNumber:430}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarInlineSearchSuggestOnNickname],disabled:!this.props.prefValues[f.kAddressBarInlineSearchSuggestEnabled],onChange:E(f.kAddressBarInlineSearchSuggestOnNickname),__source:{fileName:_,lineNumber:431}}),i.createElement("span",{__source:{fileName:_,lineNumber:435}},Object(p.a)("Only when Using Search Engine Nickname")))),i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:438}},i.createElement("label",{__source:{fileName:_,lineNumber:439}},i.createElement("input",{type:"checkbox",checked:this.props.prefValues[f.kAddressBarSearchSuggestEnabled],onChange:E(f.kAddressBarSearchSuggestEnabled),__source:{fileName:_,lineNumber:440}}),i.createElement("span",{__source:{fileName:_,lineNumber:445}},Object(p.a)("searchengine","In Search Field")))))),i.createElement(r.a,{className:"setting-search-engine",filter:this.props.filter,subtitle:Object(p.a)("Search Engines"),deleteTitle:Object(p.a)("title","Delete Search Engine"),addTipString:Object(p.a)("Add search engine"),deleteTipString:Object(p.a)("tooltip","Delete search engine"),items:e,supportDragAndDrop:!0,masterLayout:1,mimeType:u.b,renderListItem:this.renderListItem,renderCreateListItem:this.renderCreateListItem,renderContent:this.renderContent,contentStrings:s.b,renderCreate:this.renderCreate,renderEmpty:this.renderEmpty,emptyStrings:{},moveItem:this.moveEngine,onContextMenu:this.onContextMenu,onActivate:this.onActivate,onRemove:this.removeAt,onCreateItem:this.onCreateEngine,__source:{fileName:_,lineNumber:451}}),i.createElement("div",{className:"setting-group unlimited",__source:{fileName:_,lineNumber:475}},i.createElement("div",{className:"setting-single",__source:{fileName:_,lineNumber:476}},i.createElement("input",{type:"button",onClick:this.confirmRestoreDefaults,value:Object(p.a)("Restore Defaults"),__source:{fileName:_,lineNumber:477}}),i.createElement("div",{className:"setting-single pad-left",__source:{fileName:_,lineNumber:480}}))))}}N(w,"contextType",m.a),t.a=Object(n.a)(w,v)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(0),s=a.n(i),n=a(48),r=a(33),o=a(194),l=a(986),c=a(987),d=a(988),u=a(196),h=a(1046),m=a(101),p=a(989),g=a(25),b=a(16),f=a(2),_="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\Sync.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends s.a.Component{constructor(t){super(t),N(this,"onSyncStoreChange",()=>{this.setState({syncState:u.a.getState()})}),N(this,"onVivaldiAccountChange",()=>{this.setState({accountState:m.a.getState()})}),N(this,"restartSync",()=>{o.a.stop(),e.nextTick(()=>o.a.start())}),N(this,"startSync",()=>{o.a.start()}),N(this,"stopSync",()=>{o.a.stop()}),N(this,"getContent",()=>{const e=this.state.syncState.engineData;if(e.disableReasons.includes("platform_override"))return s.a.createElement("p",{__source:{fileName:_,lineNumber:85}},Object(f.a)("Sync is disabled by your operating system"));if(e.disableReasons.includes("enterprise_policy"))return s.a.createElement("p",{__source:{fileName:_,lineNumber:89}},Object(f.a)("Sync has been disabled by your administrator"));const t=e.engineState;if(!this.state.accountState.hasToken)return null;switch(t){case"stopped":return s.a.createElement("div",{className:"setting-group-double",__source:{fileName:_,lineNumber:99}},"disable_sync_on_client"===e.protocolErrorClientAction&&s.a.createElement("p",{__source:{fileName:_,lineNumber:102}},Object(f.a)("Sync was stopped following a request from the server: $1",["not_my_birthday"===e.protocolErrorType?Object(f.a)("Sync server data was reset"):e.protocolErrorDescription])),s.a.createElement("input",{type:"button",onClick:this.startSync,value:Object(f.a)("Start Sync"),__source:{fileName:_,lineNumber:109}}));case"failed":if(e.disableReasons.includes("not_signed_in"))return s.a.createElement("div",{className:"setting-group-double",__source:{fileName:_,lineNumber:117}},s.a.createElement("p",{className:"in-progress",__source:{fileName:_,lineNumber:118}},Object(f.a)("Waiting for account details")),s.a.createElement("input",{type:"button",onClick:this.stopSync,value:Object(f.a)("Cancel"),__source:{fileName:_,lineNumber:119}}));if(e.disableReasons.includes("flag"))return s.a.createElement("p",{__source:{fileName:_,lineNumber:127}},Object(f.a)("Sync was disabled from the command line"));let t=Object(f.a)("Unexpected error. You may need to restart Vivaldi.");if(e.disableReasons.includes("unrecoverable_error"))switch(e.protocolErrorClientAction){case"upgrade_client":return s.a.createElement("p",{__source:{fileName:_,lineNumber:135}},Object(f.a)("You must upgrade Vivaldi in order to use Sync"));default:t=Object(f.a)("Sync must be restarted: $1",[e.protocolErrorDescription])}return s.a.createElement("div",{className:"setting-group-double",__source:{fileName:_,lineNumber:142}},s.a.createElement("p",{__source:{fileName:_,lineNumber:143}},t),s.a.createElement("input",{type:"button",onClick:this.restartSync,value:Object(f.a)("Restart"),__source:{fileName:_,lineNumber:144}}));case"starting":return s.a.createElement("p",{className:"in-progress",__source:{fileName:_,lineNumber:151}},Object(f.a)("Initializing the Sync engine."));case"starting_server_error":return s.a.createElement("p",{className:"in-progress",__source:{fileName:_,lineNumber:156}},Object(f.a)("The sync server is experiencing issues. Retrying initialization soon."));case"clearing_data":return s.a.createElement("p",{className:"in-progress",__source:{fileName:_,lineNumber:161}},Object(f.a)("Clearing Sync data. Please wait."));case"configuration_pending":case"started":return e.needsDecryptionPassword?s.a.createElement(c.a,{category:this.props.category,filter:this.props.filter,__source:{fileName:_,lineNumber:167}}):e.usesEncryptionPassword?s.a.createElement(l.a,{filter:this.props.filter,category:this.props.category,syncState:this.state.syncState,__source:{fileName:_,lineNumber:177}}):s.a.createElement(d.a,{category:this.props.category,filter:this.props.filter,__source:{fileName:_,lineNumber:172}})}return null}),this.state={syncState:u.a.getState(),accountState:m.a.getState()}}componentDidMount(){this.syncStoreToken=u.a.addListener(this.onSyncStoreChange),this.vivaldiAccountStoreToken=m.a.addListener(this.onVivaldiAccountChange),this.onSyncStoreChange(),this.onVivaldiAccountChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){if(b.a.isIncognitoOrGuest(this.context.vivaldiWindowId))return s.a.createElement("p",{__source:{fileName:_,lineNumber:189}},Object(f.a)("Sync settings are unavailable in Private Windows."));if(!this.state.syncState.engineData.isReady||!this.state.syncState.cycleData.isReady||!this.state.accountState.isReady)return null;const e=this.getContent(),t=this.state.accountState.accountInfo.username;return s.a.createElement(n.a,{categoryTitle:Object(f.a)("Sync"),filter:this.props.filter,className:"sync-setup",__source:{fileName:_,lineNumber:202}},s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:_,lineNumber:203}},s.a.createElement(h.a,{filter:this.props.filter,__source:{fileName:_,lineNumber:204}})),e&&s.a.createElement(r.a,{filter:this.props.filter,__source:{fileName:_,lineNumber:207}},e),s.a.createElement(p.a,{username:t,filter:this.props.filter,__source:{fileName:_,lineNumber:210}}))}}N(v,"contextType",g.a),t.a=v}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a(374),n=a(547),r=a(19),o=a(59),l=a(33),c=a(194),d=a(2),u=a(15),h=a.n(u),m=a(5),p=a(521),g=a(1),b=a(20),f="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncConfigure.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=[g.kSyncIsUsingSeparateEncryptionPassword],v={bookmarks:Object(d.a)("Bookmarks and Speed Dials"),preferences:Object(d.a)("Settings (Partially)"),passwords:Object(d.a)("Passwords"),autofill:Object(d.a)("Autofill"),typed_urls:Object(d.a)("Typed History and Remote Sessions"),extensions:Object(d.a)("Extensions"),notes:Object(d.a)("Notes (Except Attachments)")};class E extends i.Component{constructor(e){super(e),_(this,"onCountDownElapsed",e=>{this.setState({countdownElapsed:e})}),_(this,"onSyncEverythingChange",e=>{m.a.sync.setTypes("true"===e.currentTarget.value,this.props.syncState.engineData.dataTypes)}),_(this,"onDataTypeChange",e=>{const t=e.target.name,a=e.target.checked;m.a.sync.setTypes(this.props.syncState.engineData.syncEverything,this.props.syncState.engineData.dataTypes.map(e=>t!==e.dataType?e:{dataType:e.dataType,enabled:a}))}),_(this,"onApplyChanges",()=>{m.a.sync.setupComplete()}),_(this,"onClearData",()=>{this.setState({showConfirmClearDataDialog:!0})}),_(this,"onConfirmClearDataDialog",e=>{this.setState({showConfirmClearDataDialog:!1}),e&&c.a.clearData()}),this.state={countdownElapsed:!1,showConfirmClearDataDialog:!1}}render(){const e=this.props.prefValues[g.kSyncIsUsingSeparateEncryptionPassword],t=this.props.syncState.engineData,a=this.props.syncState.cycleData,r="not_synced"!==this.props.syncState.cycleData.downloadUpdatesStatus?h()(this.props.syncState.cycleData.cycleStartTime).format("l, LTS"):"...",c=t.dataTypes.map(e=>i.createElement("li",{key:e.dataType,__source:{fileName:f,lineNumber:108}},i.createElement("label",{className:"setting-single",__source:{fileName:f,lineNumber:109}},i.createElement("input",{type:"checkbox",name:e.dataType,disabled:t.syncEverything,checked:e.enabled||t.syncEverything,onChange:this.onDataTypeChange,__source:{fileName:f,lineNumber:110}}),i.createElement("span",{__source:{fileName:f,lineNumber:115}},v[e.dataType])))),[u,m]=Object(p.a)(a);let _=null;if(0!==parseInt(a.nextRetryTime)){const e=h()(a.nextRetryTime);_=e.isBefore(h()())?i.createElement("p",{className:"in-progress",__source:{fileName:f,lineNumber:129}},"Retrying"):i.createElement(n.a,{label:"Retrying in $1",end:e,onElapsed:this.onCountDownElapsed,__source:{fileName:f,lineNumber:132}})}return i.createElement(l.a,{filter:this.props.filter,__source:{fileName:f,lineNumber:139}},i.createElement("div",{className:"setting-group-double",__source:{fileName:f,lineNumber:140}},"configuration_pending"===t.engineState&&i.createElement("div",{className:"sync-status detail",__source:{fileName:f,lineNumber:142}},i.createElement("span",{__source:{fileName:f,lineNumber:143}},Object(d.a)("Confirm Data Synchronization to complete the setup."))),"configuration_pending"!==t.engineState&&i.createElement("div",{className:"sync-status detail",__source:{fileName:f,lineNumber:147}},i.createElement("span",{className:"time",__source:{fileName:f,lineNumber:148}},Object(d.a)("Last synchronization time: $1",[r])),i.createElement("span",{className:"data-in",__source:{fileName:f,lineNumber:151}},u),i.createElement("span",{className:"data-out",__source:{fileName:f,lineNumber:154}},m),i.createElement("span",{__source:{fileName:f,lineNumber:157}},_)),t.isEncryptingEverything&&i.createElement("div",{__source:{fileName:f,lineNumber:164}},i.createElement("h3",{__source:{fileName:f,lineNumber:165}},Object(d.a)("Sync Encryption")),"unknown"!==e&&i.createElement("p",{className:"aye"===e?null:"alert",__source:{fileName:f,lineNumber:167}},"aye"===e?Object(d.a)("Data secured by encryption password."):Object(d.a)("Warning: Data encryption uses your login credentials, which greatly reduces security of your synced data online. You should consider setting up Sync again using a separate, strong encryption password."))),!t.isEncryptingEverything&&i.createElement("div",{__source:{fileName:f,lineNumber:183}},i.createElement("h3",{__source:{fileName:f,lineNumber:184}},Object(d.a)("Sync Encryption Error")),i.createElement("p",{className:"info",__source:{fileName:f,lineNumber:185}},Object(d.a)("Sync encryption failed. It is recommended that you clear Sync data on the server and then log in again. Sync will then restart with your current browser data."))),i.createElement("div",{className:"setting-single pad-top",__source:{fileName:f,lineNumber:191}},i.createElement("h3",{__source:{fileName:f,lineNumber:192}},Object(d.a)("Data Synchronization")),i.createElement(o.a,{name:"dataTypeSync",value:t.syncEverything,onChange:this.onSyncEverythingChange,__source:{fileName:f,lineNumber:193}},i.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:196}},i.createElement("label",{__source:{fileName:f,lineNumber:197}},i.createElement("input",{type:"radio",value:"true",__source:{fileName:f,lineNumber:198}}),i.createElement("span",{__source:{fileName:f,lineNumber:199}},Object(d.a)("Synchronize All Data"))),i.createElement("p",{className:"info",__source:{fileName:f,lineNumber:201}},Object(d.a)("Allow Vivaldi to synchronize all data, and to automatically enable synchronization of new data types."))),i.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:205}},i.createElement("label",{__source:{fileName:f,lineNumber:206}},i.createElement("input",{type:"radio",value:"false",__source:{fileName:f,lineNumber:207}}),i.createElement("span",{__source:{fileName:f,lineNumber:208}},Object(d.a)("Synchronize Selected Data"))))),i.createElement("form",{className:"setting-group unlimited",onSubmit:this.onApplyChanges,__source:{fileName:f,lineNumber:212}},i.createElement("ul",{className:"pad-left",__source:{fileName:f,lineNumber:214}},c),i.createElement("div",{className:"setting-single",__source:{fileName:f,lineNumber:217}},i.createElement("input",{type:"submit",disabled:!t.isSetupInProgress&&t.isFirstSetupComplete,value:t.isFirstSetupComplete?Object(d.a)("Apply Changes"):Object(d.a)("Start Syncing"),autoFocus:!t.isFirstSetupComplete&&this.props.category!==b.a.settingCategories.all,__source:{fileName:f,lineNumber:218}}),i.createElement("input",{type:"button",onClick:this.onClearData,value:Object(d.a)("Reset Remote Data"),__source:{fileName:f,lineNumber:229}})))),this.state.showConfirmClearDataDialog&&i.createElement(s.a,{title:Object(d.a)("Clearing Remote Synchronized Data"),prompt:Object(d.a)("This will remove all the synchronization data stored on the Sync server, reset your encryption password, and log you out. Are you sure?"),positive:Object(d.a)("Clear Sync Data"),negative:Object(d.a)("Cancel"),onClose:this.onConfirmClearDataDialog,__source:{fileName:f,lineNumber:239}})))}}t.a=Object(r.a)(E,N)},function(e,t,a){"use strict";var i=a(0),s=a(374),n=a(33),r=a(194),o=a(2),l=a(20),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptDecryptionPassword.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends i.Component{constructor(...e){super(...e),d(this,"state",{encryptionPassword:"",wrongPasswordEntered:!1,showConfirmClearDataDialog:!1}),d(this,"onEncryptionPasswordChange",e=>{this.setState({wrongPasswordEntered:!1,encryptionPassword:e.target.value})}),d(this,"onDecrypt",()=>{this.setState({wrongPasswordEntered:!1}),r.a.setEncryptionPassword(this.state.encryptionPassword,e=>{e||this.setState({wrongPasswordEntered:!0})})}),d(this,"onPasswordLost",()=>{this.setState({showConfirmClearDataDialog:!0})}),d(this,"onConfirmClearDataDialog",e=>{this.setState({showConfirmClearDataDialog:!1}),e&&r.a.clearData()})}render(){return i.createElement(n.a,{filter:this.props.filter,__source:{fileName:c,lineNumber:62}},i.createElement("form",{onSubmit:this.onDecrypt,__source:{fileName:c,lineNumber:63}},i.createElement("div",{className:"setting-group-double",__source:{fileName:c,lineNumber:64}},i.createElement("p",{__source:{fileName:c,lineNumber:65}},Object(o.a)("The data on your Sync account are encrypted. Please provide your encryption password to decrypt them.")),this.state.wrongPasswordEntered&&i.createElement("p",{__source:{fileName:c,lineNumber:67}},Object(o.a)("Wrong password entered.")),i.createElement("label",{className:"setting-single encryption",__source:{fileName:c,lineNumber:69}},i.createElement("span",{__source:{fileName:c,lineNumber:70}},Object(o.a)("Encryption Password")),i.createElement("input",{type:"password",value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,autoFocus:this.props.category!==l.a.settingCategories.all,__source:{fileName:c,lineNumber:71}})),i.createElement("div",{className:"login",__source:{fileName:c,lineNumber:76}},i.createElement("input",{type:"submit",value:Object(o.a)("Decrypt"),__source:{fileName:c,lineNumber:77}}),i.createElement("input",{type:"button",onClick:this.onPasswordLost,value:Object(o.a)("I Lost My Password"),__source:{fileName:c,lineNumber:78}}))),this.state.showConfirmClearDataDialog&&i.createElement(s.a,{title:Object(o.a)("Clear Remote Synchronized Data"),prompt:Object(o.a)("In order to regain access to your account, all the remote Sync data must be reset. You can then start new synchronization using your current browser data."),positive:Object(o.a)("Clear Sync Data"),negative:Object(o.a)("Cancel"),onClose:this.onConfirmClearDataDialog,__source:{fileName:c,lineNumber:85}})))}}t.a=u},function(e,t,a){"use strict";var i=a(0),s=a(374),n=a(33),r=a(194),o=a(101),l=a(25),c=a(2),d=a(20),u="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\SyncPromptEncryptionPassword.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends i.Component{constructor(...e){super(...e),h(this,"_input",null),h(this,"state",{encryptionPassword:"",showPassword:!1,hasSavedPassword:!1,shortPassword:!1,showConfirmNoEncryptionPasswordDialog:!1}),h(this,"componentDidMount",()=>{this.vivaldiAccountStoreToken=o.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange()}),h(this,"onVivaldiAccountChange",()=>{this.setState({hasSavedPassword:o.a.getState().hasSavedPassword})}),h(this,"onSetPassword",()=>{const{HTMLElement:e}=this.context;!this.state.encryptionPassword&&this.state.hasSavedPassword?this.setState({showConfirmNoEncryptionPasswordDialog:!0,shortPassword:!1}):this.state.encryptionPassword.length<12&&this._input instanceof e?(this._input.focus(),this.setState({shortPassword:!0})):this.doSetPassword(this.state.encryptionPassword)}),h(this,"doSetPassword",e=>{r.a.setEncryptionPassword(e,e=>{e&&this.setState({shortPassword:!1})})}),h(this,"onConfirmNoEncryptionPasswordDialog",e=>{this.setState({showConfirmNoEncryptionPasswordDialog:!1}),e&&this.state.hasSavedPassword&&this.doSetPassword()}),h(this,"onEncryptionPasswordChange",e=>{this.setState({encryptionPassword:e.target.value})}),h(this,"onShowPassword",()=>{this.setState(e=>({showPassword:!e.showPassword}))})}render(){return i.createElement(n.a,{filter:this.props.filter,__source:{fileName:u,lineNumber:102}},i.createElement("form",{onSubmit:this.onSetPassword,__source:{fileName:u,lineNumber:103}},i.createElement("div",{className:"setting-group-double pad-top",__source:{fileName:u,lineNumber:104}},i.createElement("h3",{__source:{fileName:u,lineNumber:105}},Object(c.a)("Sync Encryption")),i.createElement("div",{className:"setting-single",__source:{fileName:u,lineNumber:106}},i.createElement("p",{__source:{fileName:u,lineNumber:107}},Object(c.a)("To proceed, Sync requires a data encryption password.")),this.state.hasSavedPassword&&i.createElement("p",{className:"info",__source:{fileName:u,lineNumber:109}},Object(c.a)("If the password is not set up, your existing login password will be used to encrypt remote data instead. Your personal information can be exposed in case of compromised login credentials."))),i.createElement("div",{className:"setting-single",__source:{fileName:u,lineNumber:114}},this.state.shortPassword&&i.createElement("p",{className:"appear",__source:{fileName:u,lineNumber:116}},Object(c.a)("Minimum password length of $1 character is required.","Minimum password length of $1 characters is required.",[12])),i.createElement("span",{className:"encryption-password",__source:{fileName:u,lineNumber:122}},i.createElement("input",{ref:e=>this._input=e,title:Object(c.a)("Encryption Password"),type:this.state.showPassword?"text":"password",value:this.state.encryptionPassword,onChange:this.onEncryptionPasswordChange,__source:{fileName:u,lineNumber:123}}),i.createElement("label",{className:"show-password",__source:{fileName:u,lineNumber:129}},i.createElement("input",{type:"checkbox",onClick:this.onShowPassword,__source:{fileName:u,lineNumber:130}}),i.createElement("span",{__source:{fileName:u,lineNumber:132}},Object(c.a)("Show password")))))),i.createElement("div",{className:"setting-single",__source:{fileName:u,lineNumber:137}},i.createElement("input",{type:"submit",value:Object(c.a)("OK"),autoFocus:this.props.category!==d.a.settingCategories.all,__source:{fileName:u,lineNumber:138}}))),this.state.showConfirmNoEncryptionPasswordDialog&&i.createElement(s.a,{title:Object(c.a)("Encryption Password Not Specified"),prompt:Object(c.a)("Are you sure you want to use your login password for encryption? This greatly reduces security of your synced data online."),positive:Object(c.a)("Proceed Without a Separate Password"),negative:Object(c.a)("Cancel"),onClose:this.onConfirmNoEncryptionPasswordDialog,__source:{fileName:u,lineNumber:145}}))}}h(m,"contextType",l.a),t.a=m},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),s=a(12),n=a(33),r=a(2),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\VivaldiCommunityLinks.jsx";function l({username:e,filter:t}){const a=`https://${e}.vivaldi.net`,l="https://forum.vivaldi.net",c="https://imap.vivaldi.net/webmail",d="https://login.vivaldi.net/profile/samlsso";return i.createElement(n.a,{filter:t,__source:{fileName:o,lineNumber:20}},i.createElement("section",{__source:{fileName:o,lineNumber:21}},i.createElement("h2",{__source:{fileName:o,lineNumber:22}},"Vivaldi.net"),i.createElement("div",{__source:{fileName:o,lineNumber:24}},i.createElement("a",{href:a,onClick:()=>s.a.openURL(a),__source:{fileName:o,lineNumber:25}},Object(r.a)("Vivaldi Community Blog"))),i.createElement("div",{__source:{fileName:o,lineNumber:29}},i.createElement("a",{href:l,onClick:()=>s.a.openURL(l),__source:{fileName:o,lineNumber:30}},Object(r.a)("Vivaldi Forum"))),i.createElement("div",{__source:{fileName:o,lineNumber:34}},i.createElement("a",{href:c,onClick:()=>s.a.openURL(c),__source:{fileName:o,lineNumber:35}},Object(r.a)("Webmail"))),i.createElement("div",{__source:{fileName:o,lineNumber:39}},i.createElement("a",{href:d,onClick:()=>s.a.openURL(d),__source:{fileName:o,lineNumber:40}},Object(r.a)("Vivaldi Account Profile")))))}},function(e,t,a){"use strict";(function(e){var i=a(19),s=a(96),n=a(50),r=a(8),o=a(0),l=a.n(o),c=a(48),d=a(69),u=a(26),h=a(25),m=a(2),p=a(17),g=a.n(p),b=a(212),f=a(163),_=a(114),N=a(1),v=a(13),E="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\themes\\ThemeScheduling.jsx";function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=[N.kThemeScheduleEnabled,N.kThemeScheduleOS,N.kThemeScheduleTimeline],C=r.a.getEventHandler;class k extends l.a.PureComponent{constructor(t){super(t),w(this,"startMouseReschedule",(e,t)=>{t.persist(),t.preventDefault(),this.setState({dragging:!0,id:e},this.handleMouseReschedule.bind(this,t))}),w(this,"mouseReschedule",e=>{e.preventDefault(),this.state.dragging&&this.handleMouseReschedule(e)}),w(this,"stopMouseReschedule",()=>{if(this.state.dragging){this.setState({dragging:!1}),r.a.set(N.kThemeScheduleTimeline,this.state.schedules);const e=d.a.getTimerByDate(new Date,b.a);e&&d.a.setTheme(d.a.getTheme(e.themeName))}}),w(this,"handleMouseReschedule",e=>{const t=e.touches?e.touches[0]:e,a=this.refs.scheduleTimeline.getBoundingClientRect(),i=t.clientX-a.left,s=5*Math.floor(1439/a.width*i/5);s<0||s>1439||this.setState(e=>{const t=Object(f.a)(e.schedules);for(let a=0;a<t.length;a++){const i=t[a];if(i.id===e.id){i.hours=Math.floor(s/60),i.minutes=s-60*i.hours;break}}return{schedules:t}})}),w(this,"addSchedule",()=>{const e=Object(f.a)(this.state.schedules),t=[];let a=void 0;for(let a=0;a<e.length;a++)t.push(e[a].id);t.sort((e,t)=>e-t);for(let e=0;e<t.length;e++)if(!t.includes(e)){a=e;break}void 0===a&&(a=t[t.length-1]+1),e.push({id:a,minutes:0,hours:12,themeName:"Light",undeletable:!1}),r.a.set(N.kThemeScheduleTimeline,e),this.setState({id:a})}),w(this,"removeScheduleOnDelete",e=>{e.keyCode!==n.a.KEY_BACK_SPACE&&e.keyCode!==n.a.KEY_DELETE||this.removeSchedule()}),w(this,"handleKeyboardReschedule",(e,t)=>{if(t.keyCode===n.a.KEY_LEFT||t.keyCode===n.a.KEY_RIGHT){const a=Object(f.a)(this.state.schedules);for(let i=0;i<a.length;i++){const s=a[i];if(s.id===e){let i=60*s.hours+s.minutes;t.shiftKey?t.keyCode===n.a.KEY_LEFT&&i>29?i-=30:t.keyCode===n.a.KEY_RIGHT&&i<1409&&(i+=30):t.keyCode===n.a.KEY_LEFT&&i>4?i-=5:t.keyCode===n.a.KEY_RIGHT&&i<1434&&(i+=5),s.hours=Math.floor(i/60),s.minutes=i-60*s.hours,this.setState({id:e}),r.a.set(N.kThemeScheduleTimeline,a);const o=d.a.getTimerByDate(new Date,b.a);o&&d.a.setTheme(d.a.getTheme(o.themeName));break}}}else t.keyCode!==n.a.KEY_BACK_SPACE&&t.keyCode!==n.a.KEY_DELETE||this.removeSchedule()}),w(this,"updateScheduleName",(e,t)=>{const a=Object(f.a)(this.state.schedules);for(let i=0;i<a.length;i++){const s=a[i];if(s.id===e){s.themeName=t.target.value;break}}r.a.set(N.kThemeScheduleTimeline,a);const i=d.a.getTimerByDate(new Date,b.a);i&&d.a.setTheme(d.a.getTheme(i.themeName))}),w(this,"removeSchedule",()=>{const e=Object(f.a)(this.state.schedules),t=this.state.id;for(let a=0;a<e.length;a++){const i=e[a];if(!1===i.undeletable&&i.id===t){e.splice(a,1);break}}r.a.set(N.kThemeScheduleTimeline,e),this.setState({id:void 0})}),w(this,"updateOSTheme",t=>{const a=this.props.prefValues[N.kThemeScheduleOS];r.a.set(N.kThemeScheduleOS,{...a,[t.target.name]:t.target.value}),d.a.revokeSystemThemeSchedule(),e.nextTick(()=>d.a.setSystemThemeSchedule())}),w(this,"indicatorFocus",(e,t)=>{t.stopPropagation(),this.setState({id:e})}),w(this,"indicatorBlur",e=>{this.setState({id:void 0})}),this.state={dragging:!1,id:void 0,schedules:d.a.getSchedules()}}componentDidMount(){this.context.addEventListener("mouseup",this.stopMouseReschedule),this.context.addEventListener("touchend",this.stopMouseReschedule)}componentWillUnmount(){this.context.removeEventListener("mouseup",this.stopMouseReschedule),this.context.removeEventListener("touchend",this.stopMouseReschedule)}UNSAFE_componentWillReceiveProps(e){Object(_.a)(e,this.props)||this.setState({schedules:d.a.getSchedules()})}render(){const e=Object(f.a)(this.state.schedules),t=new Date,a=`${(t.getMinutes()+60*t.getHours())/14.4}%`,i=this.props.vivaldiSettings.THEMES_SYSTEM.concat(this.props.vivaldiSettings.THEMES_USER),{prefValues:s}=this.props,n="timeline"!==s[N.kThemeScheduleEnabled],r="system"!==s[N.kThemeScheduleEnabled];let o=!0;e.sort((e,t)=>60*e.hours+e.minutes-(60*t.hours+t.minutes)),e.unshift(Object(f.a)(e[e.length-1])),e[0].minutes=0,e[0].hours=0;for(let t=0;t<e.length;t++){const a=e[t],i=e[t+1];a.endMinutes=i?60*i.hours+i.minutes:1440,this.state.id===a.id&&a.undeletable&&(o=!1),a.renderId=t}return l.a.createElement(c.a,{categoryTitle:Object(m.a)("Scheduled Themes"),className:"setting-group unlimited",filter:this.props.filter,onMouseMove:this.mouseReschedule,onTouchMove:this.mouseReschedule,__source:{fileName:E,lineNumber:349}},l.a.createElement("div",{className:"setting-group-double",__source:{fileName:E,lineNumber:356}},l.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:358}},l.a.createElement("label",{__source:{fileName:E,lineNumber:359}},l.a.createElement("input",{type:"radio",value:"off",checked:"off"===s[N.kThemeScheduleEnabled],onChange:C(N.kThemeScheduleEnabled),__source:{fileName:E,lineNumber:360}}),l.a.createElement("span",{__source:{fileName:E,lineNumber:366}},Object(m.a)("No Schedule")))),l.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:370}},l.a.createElement("label",{__source:{fileName:E,lineNumber:371}},l.a.createElement("input",{type:"radio",value:"system",checked:"system"===s[N.kThemeScheduleEnabled],onChange:C(N.kThemeScheduleEnabled),__source:{fileName:E,lineNumber:372}}),l.a.createElement("span",{__source:{fileName:E,lineNumber:378}},Object(m.a)("Use Operating System Theme"))),l.a.createElement("p",{className:"info",__source:{fileName:E,lineNumber:380}},Object(m.a)("Follow operating system light or dark theme setting where available."))),l.a.createElement("div",{className:"setting-single",__source:{fileName:E,lineNumber:385}},l.a.createElement("label",{__source:{fileName:E,lineNumber:386}},l.a.createElement("span",{__source:{fileName:E,lineNumber:387}},Object(m.a)("Light Theme")),l.a.createElement("select",{name:"light",value:s[N.kThemeScheduleOS].light,disabled:r,onChange:this.updateOSTheme,__source:{fileName:E,lineNumber:388}},i.map(e=>l.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:E,lineNumber:394}},e.name)))),l.a.createElement("label",{__source:{fileName:E,lineNumber:401}},l.a.createElement("span",{__source:{fileName:E,lineNumber:402}},Object(m.a)("Dark Theme")),l.a.createElement("select",{name:"dark",value:s[N.kThemeScheduleOS].dark,disabled:r,onChange:this.updateOSTheme,__source:{fileName:E,lineNumber:403}},i.map(e=>l.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:E,lineNumber:409}},e.name))))),l.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:E,lineNumber:417}},l.a.createElement("label",{__source:{fileName:E,lineNumber:418}},l.a.createElement("input",{type:"radio",value:"timeline",checked:"timeline"===s[N.kThemeScheduleEnabled],onChange:C(N.kThemeScheduleEnabled),__source:{fileName:E,lineNumber:419}}),l.a.createElement("span",{__source:{fileName:E,lineNumber:425}},Object(m.a)("Schedule Theme to Change"))),l.a.createElement("p",{className:"info",__source:{fileName:E,lineNumber:427}},Object(m.a)("Drag the sliders below to adjust theme schedule time. Change the theme by selecting its name.")))),l.a.createElement("div",{className:"theme-schedule-timeline"+(n?" schedule-disabled":""),ref:"scheduleTimeline",__source:{fileName:E,lineNumber:433}},l.a.createElement("span",{className:"theme-schedule-now-indicator",style:{left:a},__source:{fileName:E,lineNumber:436}},Object(m.a)("Now")),e.map(t=>{const a=(60*t.hours+t.minutes)/14.4,s=d.a.getTheme(t.themeName);if(!t.endMinutes)return null;const r=t.hours>9?t.hours:`0${t.hours}`,o=t.minutes>9?t.minutes:`0${t.minutes}`,c=t.endMinutes;return l.a.createElement("div",{key:t.renderId,className:g()({"theme-schedule-timeslice":!0,"timeslice-selected":this.state.id===t.id}),style:{backgroundImage:`linear-gradient(0deg,\n                    ${s.colors.accentBg} 6px,${s.colors.baseBg} 6px)`,width:`${c/14.4-a}%`,left:`${a}%`},__source:{fileName:E,lineNumber:453}},t!==e[0]&&l.a.createElement("div",{title:t.themeName,className:"timeslice-bubble",onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur.bind(this,t.id),disabled:n,onMouseDown:this.startMouseReschedule.bind(this,t.id),onTouchStart:this.startMouseReschedule.bind(this,t.id),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:E,lineNumber:466}},l.a.createElement("div",{__source:{fileName:E,lineNumber:478}},`${r}:${o}`)),t!==e[0]&&l.a.createElement("div",{className:"theme-schedule-timeslice-indicator",__source:{fileName:E,lineNumber:482}},l.a.createElement("input",{type:"button",className:"theme-schedule-timeslice-draghandle",title:t.themeName,onFocus:this.indicatorFocus.bind(this,t.id),onBlur:this.indicatorBlur.bind(this,t.id),disabled:n,onMouseDown:this.startMouseReschedule.bind(this,t.id),onTouchStart:this.startMouseReschedule.bind(this,t.id),onKeyDown:this.handleKeyboardReschedule.bind(this,t.id),__source:{fileName:E,lineNumber:483}})),l.a.createElement("div",{className:"theme-schedule-timeslice-container",__source:{fileName:E,lineNumber:499}},l.a.createElement("div",{className:"theme-schedule-timeslice-text",style:{color:s.colors.baseFg},__source:{fileName:E,lineNumber:500}},t.themeName)),l.a.createElement("select",{disabled:n,value:t.themeName,onFocus:this.indicatorFocus.bind(this,t.id),onKeyDown:this.removeScheduleOnDelete,onChange:this.updateScheduleName.bind(this,t.id),__source:{fileName:E,lineNumber:506}},i.map(e=>l.a.createElement("option",{key:e.name,value:e.name,__source:{fileName:E,lineNumber:513}},e.name))))})),l.a.createElement("div",{className:"setting-group",__source:{fileName:E,lineNumber:523}},l.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:E,lineNumber:524}},l.a.createElement("div",{className:"toolbar-group",__source:{fileName:E,lineNumber:525}},l.a.createElement(u.a,{disabled:n,onClick:this.addSchedule,image:v.f.medium,tooltip:Object(m.a)("Add"),tabIndex:0,__source:{fileName:E,lineNumber:526}}),l.a.createElement("hr",{__source:{fileName:E,lineNumber:533}}),l.a.createElement(u.a,{disabled:n||!o||void 0===this.state.id,onClick:this.removeSchedule,image:v.Lb.medium,tooltip:Object(m.a)("other","Remove"),tabIndex:0,__source:{fileName:E,lineNumber:534}})))))}}w(k,"contextType",h.a),t.a=Object(i.a)(Object(s.a)(k,["THEMES_SYSTEM","THEMES_USER"]),S)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(88),n=a(86),r=a(52),o=a(44),l=a(992),c=(a(106),a(12)),d=a(9),u=a(29),h=a.n(u),m=a(993),p=a(997),g=(a(53),a(25)),b=a(16),f=a(7),_=a(998),N=a.n(_),v=a(68),E=a(60),w=a(169),S=a(109),C=a.n(S),k=a(680),y=a(5),O=a(21),A=a(157),T=a(298),I=a(434),D=a(95),P=a(368),x=a(549),M=a(318),L=a(36),j=a(1),B=a(103),R="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabStrip.jsx";function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=Object(x.a)(),W={stiffness:400,damping:32,precision:.1};class H extends i.PureComponent{constructor(...t){super(...t),F(this,"currentHoveredId",0),F(this,"state",{isScreenshotting:!1,isDragging:!1,isExpectingDrop:!1,mouse:[0,0],delta:[0,0],start:[0,0],draggedActive:null,draggedSet:Object(O.Set)(),enterSide:"none",hovered:-1,hoverPercent:0,isHiddenForDrag:Object(O.Set)(),isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,freeze:null,addressBarVisible:b.a.getVisibleUI(this.context.vivaldiWindowId).addressBar,animate:!1,highlightedId:""}),F(this,"setOverflowClass",()=>{if(this.refs.tabs&&("left"===this.props.tabPosition||"right"===this.props.tabPosition)){const e=h.a.findDOMNode(this.refs.tabs);if(e instanceof Element&&e.clientHeight<e.scrollHeight){if(this.props.setOverflowClass(!0),this.props.switchByScroll){const t=e.getElementsByClassName("tab active")[0];t&&"function"==typeof t.scrollIntoViewIfNeeded&&t.scrollIntoViewIfNeeded()}}else this.props.setOverflowClass(!1)}}),F(this,"maybeSpring",(e,t)=>this.state.animate&&this.props.prefValues[j.kThemeUseAnimation]&&!this.props.isResizing&&(this.state.isDragging||this.fitsInView())?Object(T.spring)(e,t):e),F(this,"onMessageReceived",(e,t)=>{if(f.default.runtime.id===t.id&&"object"==typeof e&&null!=e)switch(e.dispatchAction){case A.c:return void this.startExpectingDrop();case A.a:return void this.endExpectingDrop()}}),F(this,"onCommandSpy",()=>{Object(v.a)(h.a.findDOMNode(this))||this.moveFocus("","current",!0)}),F(this,"onWindowStoreChanged",()=>{this.setState({addressBarVisible:b.a.getVisibleUI(this.context.vivaldiWindowId).addressBar})}),F(this,"startExpectingDrop",()=>{this.setState({isExpectingDrop:!0})}),F(this,"endExpectingDrop",()=>{this.setState({isExpectingDrop:!1})}),F(this,"moveFocus",(e,t,a)=>{if(!0===a||Object(v.a)(h.a.findDOMNode(this))){let a=[];const i=h.a.findDOMNode(this.refs.tabs);if(i instanceof HTMLElement&&(a=Array.from(i.querySelectorAll("div.tab")).map(e=>e.getAttribute("data-id")).filter(Boolean)),0===a.length)return;if("current"===t){if(""===e&&i instanceof HTMLElement){const t=i.getElementsByClassName("tab active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let i=a.indexOf(e);if(-1===i)return;i="right"===t?i+1>=a.length?0:i+1:i<=0?a.length-1:i-1,e=a[i]}if(i instanceof HTMLElement){const t="newtab"===e?i.querySelector("div.toolbar-tabbar button"):i.querySelector(`div.tab[data-id="${e}"]`);t&&(t.focus(),this.setState({highlightedId:e}))}}}),F(this,"openStackMenu",(e,t)=>{if("off"!==this.props.prefValues[j.kTabsStackingMode]){const a=d.a.getPageById(e);if(a){const e=a.getIn(["extData","group"]);if(d.a.isGroup(e)){const a=function(e,t,a){return(a?"&"+(t+1)+" ":"")+e},i=d.a.getGroup(e).toArray().map((e,t)=>{const i=t<9;return{mnemonic:i,name:a(e.title,t,i),url:e.url,handler:c.a.openPage.bind(this,e.id)}}),s="top"===this.props.tabPosition||"bottom"===this.props.tabPosition?"bottomLeft":"left"===this.props.tabPosition?"topRight":"topLeft";Object(E.a)(this.context.vivaldiWindowId,i,null,s,t)()}}}}),F(this,"handleLeaveBar",()=>{this.setState({highlightedId:""}),s.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),F(this,"closeAndFreeze",e=>{e.pinned&&"on"!==this.props.prefValues[j.kTabsClosePinned]||(!e.pinned&&this.props.prefValues[j.kTabsAlignNext]&&this.freezeTabSize(e),c.a.closePage(e))}),F(this,"freezeTabSize",e=>{const t=()=>{this.setState({freeze:null}),this.context.removeEventListener("mousemove",a)},a=e=>{const a=h.a.findDOMNode(this.refs.tabs);if(a instanceof Element){const i=a.getBoundingClientRect();(i.left>e.clientX||i.left+i.width<e.clientX||i.top>e.clientY||i.top+i.height<e.clientY)&&t()}},i=e=>{const t=this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{isHiddenForDrag:this.state.isHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:"on"===this.props.prefValues[j.kTabsStackingMode],isThumb:this.props.prefValues[j.kTabsThumbnails]}),i=t.children.filter(e=>"tab"===e.type).findIndex(t=>t.tab.page.id===e),s=t.children[i];if(s){let e;e=s.tab.get("page").active?t.children[i+1]:s,this.setState({freeze:{width:e.layout.width,height:s.layout.height,nextId:e.tab.page.id}}),this.context.addEventListener("mousemove",a)}},s=this.props.tabs.getIn([-1,"page","id"]);e.id!==s?i(e.id):t()}),F(this,"handleTouchStart",(e,t,a,i)=>{this.startInternalDragging(i.touches[0],e,t,a)}),F(this,"handleTouchMove",e=>{e.preventDefault(),this.updateInternalDragging(e.touches[0])}),F(this,"handleMouseMove",e=>{e.preventDefault(),e.button===o.a.kLeft?this.updateInternalDragging(e):this.endInternalDragging()}),F(this,"handleMouseUp",e=>{this.endInternalDragging()}),F(this,"handleMouseDown",(e,t,a,i)=>{if(i.button===o.a.kLeft){i.preventDefault();b.a.isActive(this.context.vivaldiWindowId);Object(w.a)(i)||(this.props.onSelectTab(e,i),this.startInternalDragging(i,e,t,a))}else if(i.button===o.a.kCenter){const t=i.target;this.context.addEventListener("mouseup",a=>{t===a.target&&this.closeAndFreeze(e),a.preventDefault()},{capture:!0,once:!0})}}),F(this,"handleClick",(e,t)=>{const{prefValues:a}=this.props,i=b.a.isActive(this.context.vivaldiWindowId);Object(M.b)(t,a[j.kTabsSelectionEnabled],i)?c.a.setSelection(e,!1,!1):Object(M.a)(t,a[j.kTabsSelectionEnabled],i)&&c.a.setSelection(e,!0,!1)}),F(this,"handleDoubleClick",(e,t)=>{t.preventDefault(),t.stopPropagation();const{prefValues:a}=this.props,i=b.a.isActive(this.context.vivaldiWindowId);Object(M.b)(t,a[j.kTabsSelectionEnabled],i)?c.a.toggleRelatedSelection(e):a[j.kTabsDoubleClickClose]&&c.a.closePage(e)}),F(this,"handleTabClickMouseUp",(e,t)=>{t.button===o.a.kCenter&&(t.preventDefault(),t.stopPropagation())}),F(this,"onDragEnterHandler",e=>{if(e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&this.state.isExpectingDrop)return e.preventDefault(),void e.stopPropagation();e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),F(this,"onDragLeaveHandler",e=>{clearTimeout(this.removeYieldTimeoutId),this.removeYieldTimeoutId=setTimeout(()=>{this.setState({yieldAfter:null,yieldBefore:null,yieldOver:null}),clearTimeout(this.removeYieldAnimationTimeoutId),this.removeYieldAnimationTimeoutId=setTimeout(()=>{this.state.yieldBefore||this.state.yieldAfter||this.setState({isYielding:!1})},2e3)},200)}),F(this,"onDragOverHandler",e=>{if(clearTimeout(this.removeYieldTimeoutId),e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&this.state.isExpectingDrop){e.preventDefault(),e.stopPropagation();const t=300;this.removeYieldTimeoutId=setTimeout(()=>this.setState({yieldAfter:null,yieldBefore:null}),t)}else e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),F(this,"onDropHandler",e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),a=e.dataTransfer.getData("text/uri-list"),i=e.dataTransfer.getData("text/plain");this.state.isExpectingDrop&&t?this.droppedTabHandler(t):a?a.split("\n").forEach((e,t)=>c.a.openURL(e,{inCurrent:!1,inBackground:t>0})):i&&Object(L.l)(i)&&c.a.openURL(i,{inCurrent:!1})}),F(this,"droppedTabHandler",t=>{const{yieldOver:a}=this.state,i="off"!==this.props.prefValues[j.kTabsStackingMode],s=JSON.parse(t),n=s.ids.map(e=>parseInt(e)).sort((e,t)=>e-t),r=this.getYieldIndex(n[0]);f.default.tabs.query({},t=>{const o=Object(O.List)(t).filter(e=>n.some(t=>e.id===t)).map(B.b);(()=>{const t=a&&d.a.getPages().find(e=>e.id===a&&!e.pinned);if(t){let e=t.getIn(["extData","group"]);const a=i&&d.a.isGroup(e);let s,n=new O.List;if(a?(s=d.a.getGroup(e).first().index,n=d.a.getGroup(e).concat(o)):(s=t.index,n=n.push(t).concat(o),e=d.a.getNewGroupName()),t.windowId===o.first().windowId){let e=0;o.forEach(t=>{t.index<s&&e++}),s-=e}c.a.createTabStack(n,s,e),this.maybeResetDragging()}else{const t=()=>e.nextTick(this.maybeResetDragging),a=s.active;c.a.moveDroppedTabs(o,a,r,t)}f.default.windows.update(this.context.vivaldiWindowId,{focused:!0})})()})}),F(this,"handleTabPosition",(e,t)=>{clearTimeout(this.removeYieldTimeoutId),"before"===t?this.setState({isYielding:!0,yieldBefore:e,yieldAfter:null,yieldOver:null}):"after"===t?this.setState({isYielding:!0,yieldBefore:null,yieldAfter:e,yieldOver:null}):"over"===t?this.setState({yieldOver:e}):"none"===t&&(this.setState({yieldBefore:null,yieldAfter:null,yieldOver:null}),clearTimeout(this.expireYieldTimeoutId),this.expireYieldTimeoutId=setTimeout(()=>{const{yieldBefore:e,yieldAfter:t,yieldOver:a}=this.state;e||t||a||this.setState({isYielding:!1})},1e3))}),F(this,"setIsHiddenForDrag",e=>{this.setState({isHiddenForDrag:e})}),F(this,"windowDragEnterHandler",e=>{e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&(e.preventDefault(),e.stopPropagation(),this.windowDragOverHandler(e))}),F(this,"windowDragLeaveHandler",e=>{if(e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation(),0===e.pageX&&0===e.pageY&&this.handleTabPosition(-1,"none")}}),F(this,"windowDragOverHandler",e=>{if(e.dataTransfer&&e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation(),this.delayedActivateWindow(e);const{yieldBefore:t,yieldAfter:a,yieldOver:i}=this.state;if(!i&&!t&&!a){const e=this.state.isHiddenForDrag.first();if(!e||!this.props.pages.map(e=>e.id).some(t=>t===e)){const e=this.props.pages.getIn([-1,"id"]);e&&this.handleTabPosition(e,"after")}}}}),F(this,"windowDropHandler",e=>{const{dataTransfer:t}=e;if(t&&t.types.some(e=>"vivaldi/x-tab-entries"===e)){e.preventDefault(),e.stopPropagation();const a=t.getData("vivaldi/x-tab-entries"),i=JSON.parse(a),s=i.ids.map(e=>parseInt(e)).sort((e,t)=>e-t);f.default.tabs.query({},t=>{if(t.find(e=>s.includes(e.id)&&e.windowId!==this.context.vivaldiWindowId)){const e=Object(O.List)(t).filter(e=>s.some(t=>e.id===t)).map(B.b);(()=>{c.a.moveDroppedTabs(e,i.active,-1)})()}else{const t=s.map(e=>parseInt(e)).map(e=>d.a.getPages().find(t=>t.id===e)).filter(Boolean);if(t.length===d.a.getPages().count())return void this.maybeResetDragging();t.length?c.a.detachPage(Object(O.List)(t),e.screenX,e.screenY):(this.maybeResetDragging(),console.warn("Dropped Page(s) does not exist:",s))}})}}),F(this,"maybeResetDragging",()=>{const{isHiddenForDrag:e,isYielding:t,yieldOver:a}=this.state;(!e.isEmpty()||t||a)&&this.setState({isYielding:!1,yieldBefore:null,yieldAfter:null,yieldOver:null,isHiddenForDrag:Object(O.Set)(),hovered:-1})}),F(this,"handleEscKey",()=>{this.abortAndRevertDragging()}),F(this,"abortAndRevertDragging",()=>{this.state.draggedSet.forEach(e=>c.a.moveToIndex(e,e.index)),this.cleanupInternalDragging(),this.maybeResetDragging()}),F(this,"getYieldIndex",e=>{const{yieldBefore:t,yieldAfter:a,yieldOver:i}=this.state,s="off"!==this.props.prefValues[j.kTabsStackingMode];if(t){const a=d.a.getPages().find(e=>e.id===t);if(a){const t=a.getIn(["extData","group"]),i=s&&d.a.isGroup(t)?d.a.getGroup(t).first().id:a.id;return d.a.getPages().filter(t=>t.id!==e).findIndex(e=>e.id===i)}return-1}if(a){const t=d.a.getPages().find(e=>e.id===a);if(t){const a=t.getIn(["extData","group"]),i=s&&d.a.isGroup(a)?d.a.getGroup(a).first().id:t.id;return d.a.getPages().filter(t=>t.id!==e).findIndex(e=>e.id===i)+1}return-1}if(i){const e=d.a.getPages().find(e=>e.id===i);return e?e.index:-1}return-1}),F(this,"startInternalDragging",({pageX:e,pageY:t},a,i,s)=>{let n;this.context.addEventListener("touchmove",this.handleTouchMove,!0),this.context.addEventListener("mousemove",this.handleMouseMove,!0),this.context.addEventListener("touchend",this.handleMouseUp,!0),this.context.addEventListener("mouseup",this.handleMouseUp,!0),o.a.setWebviewPointerEvents(!1,this.context.document),r.a.bind("esc",this.handleEscKey);const{isSelecting:l,pageSelection:c}=this.props,u=a.getIn(["extData","group"]),h="off"!==this.props.prefValues[j.kTabsStackingMode]&&d.a.isGroup(u);n=l&&c.has(a.id)?c.reduce((e,t)=>{const a=d.a.getPages().find(e=>e.id===t);return a?e.add(a):e},Object(O.Set)()):h?Object(O.Set)(d.a.getGroup(u)):O.Set.of(a),this.setState({draggedActive:a,draggedSet:n,start:[e,t],delta:[e-i,t-s],mouse:[i,s],isScreenshotting:!1,yieldBefore:null,yieldAfter:null})}),F(this,"updateInternalDragging",({pageX:e,pageY:t})=>{const{draggedActive:a,start:i,delta:[s,n]}=this.state;let{isDragging:r}=this.state;const{tabs:o,direction:l,maxWidth:c,maxHeight:d,prefValues:u}=this.props,[h,m]=i;if(r){if(this.state.isScreenshotting)return}else{if(!(Math.abs(h-e)>5||Math.abs(m-t)>5))return;r=!0}const p=this.createFlexBoxLayout(o,l,c,d,{isHiddenForDrag:this.state.isHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:"on"===u[j.kTabsStackingMode],isThumb:u[j.kTabsThumbnails]}),g=o.find(e=>a&&a.id===e.page.id);if(!g)return;const b=p.children.find(e=>e.tab.id===g.id).layout;let[f,_]=[e-s,t-n];const N=p.children.filter(e=>"tab"===e.type),v=Object(I.a)(N).layout,E=Object(D.a)(N).layout;"column"===l&&(f+50<v.left||f-50>E.left)||"row"===l&&(_+50<v.top||_-50>E.top)?this.switchToHTMLDrag(g):(f="row"===l?f:b.left,_="column"===l?_:b.top,f=Object(P.a)(f,v.left-5,E.left+5),_=Object(P.a)(_,v.top-5,E.top+5),this.setState({mouse:[f,_],isDragging:r}),this.detectInternalOverlap(g,b,p,l,f,_))}),F(this,"_getPagesFromDraggedSet",()=>{const e=[];return this.state.draggedSet.forEach(t=>{const a=d.a.getPages().find(e=>e.id===t.id);a&&e.push(a)}),e}),F(this,"detectInternalOverlap",(e,t,a,i,s,n)=>{this.dragOverTimeoutId&&(clearTimeout(this.dragOverTimeoutId),delete this.dragOverTimeoutId);const r=a.children.filter(e=>"tab"===e.type).filter(t=>t.tab.get("id")!==e.get("id")).filter(e=>!this.state.draggedSet.find(t=>t.id===e.tab.id)).find(({layout:e})=>{if("row"===i){const a=t.width-e.width;return s+e.width/2>e.left-a&&s+e.width/2<e.left+e.width}return n+t.height/2>e.top&&n+t.height/2<e.top+e.height});if(r){const e=this._getPagesFromDraggedSet();c.a.movePage(Object(O.List)(e),O.List.of(r.tab.page))}else if("off"!==this.props.prefValues[j.kTabsStackingMode]&&this.props.prefValues[j.kTabsStackingAllowDnd]){const r={...t,left:s,top:n},o=a.children.filter(({type:e})=>"tab"===e).filter(({tab:t})=>t.get("id")!==e.get("id")).find(({layout:e})=>Object(k.a)(e,r));if(!o)return this.currentHoveredId=0,void this.setState({enterSide:"none",hovered:-1});const{left:l,width:c,top:d,height:u}=o.layout;let h;h="row"===i?s<l+c/2?"before":"after":n<d+u/2?"before":"after";const m=this.state.enterSide;this.currentHoveredId!==o.tab.page.id&&this.setState({enterSide:h}),this.currentHoveredId=o.tab.page.id;const p=Object(k.a)(o.layout,r)/(o.layout.width*o.layout.height)*100;if(m===h&&p<60&&p>10){const e=this.props.prefValues[j.kTabsStackingDndDelay];-1===this.state.hovered&&(clearTimeout(this.dragOverTimeoutId),this.dragOverTimeoutId=setTimeout(()=>{this.state.isDragging&&this.setState({hovered:o.tab.page.id,hoverPercent:p})},e))}else this.setState({hovered:-1,hoverPercent:0})}}),F(this,"switchToHTMLDrag",e=>{this.cleanupInternalDragging();const t="off"!==this.props.prefValues[j.kTabsStackingMode],a=this.state.draggedSet.toList(),i=a.find(e=>e.active)||a.first(),s=h.a.findDOMNode(this.refs.tabs);if(!(s instanceof Element))return;const n=s.querySelector(`#tab-${e.id}`);if(!(n instanceof Element))return;const r=n.getBoundingClientRect(),o=i.getIn(["extData","group"]),l=t&&d.a.isGroup(o)?4:0;this.setState({isScreenshotting:!0},()=>{f.default.runtime.sendMessage({dispatchAction:A.c}),this.setupDragEndHandler(a),y.a.tabsPrivate.startDrag({mimeType:"vivaldi/x-tab-entries",customData:JSON.stringify({ids:a.map(e=>e.id).toJS(),active:i.id}),url:i.url,title:i.title,posX:r.left,posY:r.top-l,width:r.width,height:r.height+l,cursorX:10,cursorY:10}),this.setState({isHiddenForDrag:a.toSet().map(e=>e.id)})})}),F(this,"endInternalDragging",()=>{const e=-1!==this.state.hovered&&d.a.getPages().find(e=>e.id===this.state.hovered);if(e){let t=this._getPagesFromDraggedSet().sort((e,t)=>e.index-t.index),a=[e];const i=e.getIn(["extData","group"]);if(d.a.isGroup(i)&&(a=d.a.getGroup(i).toArray().sort((e,t)=>e.index-t.index)),a.length>0&&t.length>0){let i=a[0].index,s=0;t.forEach(e=>{e.index<i&&s++}),i-=s,t=t[0].index<a[0].index?t.concat(a):a.concat(t),c.a.createTabStack(Object(O.List)(t),i,e.getIn(["extData","group"]))}}this.cleanupInternalDragging()}),F(this,"cleanupInternalDragging",()=>{this.context.removeEventListener("touchmove",this.handleTouchMove,!0),this.context.removeEventListener("mousemove",this.handleMouseMove,!0),this.context.removeEventListener("touchend",this.handleMouseUp,!0),this.context.removeEventListener("mouseup",this.handleMouseUp,!0),o.a.setWebviewPointerEvents(!0,this.context.document),r.a.unbind("esc",this.handleEscKey),!this.state.isDragging&&this.state.draggedActive&&this.state.draggedActive.active&&(this.state.draggedActive.pinned&&"bury"===this.props.prefValues[j.kTabsClosePinned]||this.props.prefValues[j.kTabsMinimize])&&c.a.minimizePage(),this.setState({isDragging:!1,start:[0,0],delta:[0,0],mouse:[0,0],hovered:-1,hoverPercent:0})}),F(this,"clearForceHover",()=>{this.setState(e=>e.freeze?{freeze:{...e.freeze,nextId:-1}}:null)}),F(this,"createFlexBoxLayout",C()(1)((e,t,a,i,s)=>{const n=parseInt(this.props.prefValues[j.kTabsActiveMinSize]),r="row"===t,o={style:{flexDirection:t,width:a,height:i},children:e.toArray().reduce((e,t)=>{const a=t.page.pinned,i=t.page.active,o=s.tabStackingEnabled&&"group"===t.type,l=this.getTabStyle(t,r,i,a,o,s.isThumb);s.freeze&&!a&&(l.width=l.maxWidth=l.minWidth=s.freeze.width,l.height=l.maxHeight=l.minHeight=s.freeze.height),i&&!a&&s.freeze&&s.freeze.width<n&&(l.width=l.maxWidth=l.minWidth=n);const{isDragging:c,draggedSet:d,draggedActive:u}=this.state;c&&u&&u.id!==t.page.id&&d.find(e=>e.id===t.page.id)&&(l.width=l.maxWidth=l.minWidth=0,l.height=l.maxHeight=l.minHeight=0);const h=!o&&s.isHiddenForDrag.has(t.page.id),m=o&&t.pages.every(e=>s.isHiddenForDrag.has(e.id));return(h||m)&&(l.width=l.maxWidth=l.minWidth=0,l.height=l.maxHeight=l.minHeight=0),s.yieldBefore===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,r,i,!1,o,s.isThumb)}}),e.push({type:"tab",tab:t,style:l}),s.yieldAfter===t.page.id&&e.push({type:"blank",style:{...this.getTabStyle(t,r,i,!1,o,s.isThumb)}}),e},[]).concat({type:"button",style:{width:30,height:30,alignSelf:r?"flex-end":"center"}})};return N()(o),o})),F(this,"getTabConfig",(e,t,a,i,s)=>{const{mouse:n,draggedActive:r,draggedSet:o,isDragging:l,hovered:c,yieldOver:d}=this.state,u=e.getIn(["page","id"]),h=r&&r.id===u,m=c===u||d===u,p=l&&h,g=l&&!p&&o.find(e=>e.id===u),b=e.id.toString(),f={type:"tab",tab:e,zIndex:e.get("page").active?2:1};if(p)return{key:b,data:{...f,tab:e,zIndex:this.state.draggedSet.count()+2},style:{x:n[0],y:n[1],width:t.width,height:t.height,brightness:1,contrast:1,opacity:.8}};if(g){const t=this.state.draggedSet.toList().sort((e,t)=>e.id===(r&&r.id)?-1:e.index<t.index?-1:1),a=t.findIndex(e=>e.id===u)-1,n=t.get(a).id,o=s&&s.find(e=>e.key===n);if(o&&o.style)return{...o,key:b,data:{...o.data,type:"tab",tab:e,zIndex:this.state.draggedSet.count()-a},style:{...o.style,x:this.maybeSpring(parseInt(o.style.x)+("row"===i?4:0),T.presets.wobbly),y:this.maybeSpring(parseInt(o.style.y)+("column"===i?4:0),T.presets.wobbly)}}}return{key:b,data:f,style:{x:this.maybeSpring(t.left,W),y:this.maybeSpring(t.top,W),width:t.width,height:t.height,brightness:m?.6:1,contrast:m?2:1,opacity:g?.8:1}}}),F(this,"getStyles",e=>this.createFlexBoxLayout(this.props.tabs,this.props.direction,this.props.maxWidth,this.props.maxHeight,{isHiddenForDrag:this.state.isHiddenForDrag,freeze:this.state.freeze,yieldBefore:this.state.yieldBefore,yieldAfter:this.state.yieldAfter,tabStackingEnabled:"on"===this.props.prefValues[j.kTabsStackingMode],isThumb:this.props.prefValues[j.kTabsThumbnails]}).children.map((t,a)=>{const{layout:i,tab:s}=t;if(isNaN(i.left)||isNaN(i.width)){0;const e=this.state.freeze?this.state.freeze.width:180,t="row"===this.props.direction;i.left=t?a*e:0,i.width=e,i.top=t?0:30*a,i.height=30}switch(t.type){case"tab":return this.getTabConfig(s,i,a,this.props.direction,e);case"blank":return{key:`space-${a}`,data:{type:"space",zIndex:0},style:{x:i.left,y:i.top,width:i.width,height:i.height}};case"button":return{key:"button",data:{type:"button",zIndex:0},style:{x:this.maybeSpring(i.left,W),y:this.maybeSpring(i.top,W),width:i.width,height:i.height}};default:console.warn("Unknown Element",t.type)}}).filter(Boolean))}componentDidMount(){this.setOverflowClass(),this.allowDelayedAnimation(),f.default.runtime.onMessage.addListener(this.onMessageReceived),this.windowStoreToken=b.a.addListener(this.onWindowStoreChanged),n.a.addListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.addEventListener("dragenter",this.windowDragEnterHandler),this.context.addEventListener("dragleave",this.windowDragLeaveHandler),this.context.addEventListener("dragover",this.windowDragOverHandler),this.context.addEventListener("drop",this.windowDropHandler)}componentWillUnmount(){this.animateTimeoutId&&clearTimeout(this.animateTimeoutId),f.default.runtime.onMessage.removeListener(this.onMessageReceived),this.windowStoreToken.remove(),n.a.removeListener("COMMAND_FOCUS_TABBAR",this.onCommandSpy),this.context.removeEventListener("dragenter",this.windowDragEnterHandler),this.context.removeEventListener("dragleave",this.windowDragLeaveHandler),this.context.removeEventListener("dragover",this.windowDragOverHandler),this.context.removeEventListener("drop",this.windowDropHandler)}UNSAFE_componentWillReceiveProps(e){Object(O.is)(e.pages,this.props.pages)||(this.maybeResetDragging(),e.pages.size>this.props.pages.size&&this.state.freeze&&this.setState({freeze:null}))}componentDidUpdate(e){this.props.tabs===e.tabs&&this.props.maxWidth===e.maxWidth&&this.props.maxHeight===e.maxHeight&&this.props.settings===e.settings||this.setOverflowClass()}fitsInView(){return"row"===this.props.direction?180*this.props.tabs.count()<this.props.maxWidth:150*this.props.tabs.count()<this.props.maxHeight}allowDelayedAnimation(){this.animateTimeoutId=setTimeout(()=>this.setState({animate:!0}),1e3)}createTab(e){e&&(e.stopPropagation(),e.preventDefault()),c.a.openURL()}delayedActivateWindow({screenX:e,screenY:t}){U(e,t,250,()=>f.default.windows.update(this.context.vivaldiWindowId,{focused:!0}))}setupDragEndHandler(e){const t=(a,i,s,n)=>{if(y.a.tabsPrivate.onDragEnd.removeListener(t),f.default.runtime.sendMessage({dispatchAction:A.a}),a)this.abortAndRevertDragging();else if(i){if(e.size===d.a.getPages().count())return void this.maybeResetDragging();e.size&&c.a.detachPage(e,s,n)}setTimeout(()=>this.maybeResetDragging(),100)};y.a.tabsPrivate.onDragEnd.addListener(t)}getTabStyle(e,t,a,i,s,n){const r={flex:1,zIndex:0};return t?(r.maxWidth=180,r.maxHeight=150,r.minHeight=150,a&&(r.minWidth=parseInt(this.props.prefValues[j.kTabsActiveMinSize])||31),i&&(r.minWidth=31,r.maxWidth=31,r.flex=0)):(r.maxWidth=260,r.maxHeight=30,r.minHeight=30,n&&(r.maxHeight=150),a&&(r.minHeight=30),i&&(r.minHeight=30,r.maxHeight=30,r.flex=0),s&&(r.minHeight=37)),r}render(){if(this.props.maxWidth<=0||this.props.maxHeight<=0)return null;const e=this.getStyles();return i.createElement(T.TransitionMotion,{ref:"tabs",styles:e,children:e=>i.createElement("div",{className:"tab-strip",onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,onDoubleClick:this.state.freeze?e=>e.stopPropagation():null,__source:{fileName:R,lineNumber:1867}},e.map(e=>{const{x:t,y:a,width:s,height:n}=e.style,r={transform:"translateZ(0)",left:t,top:a,width:s,height:n,zIndex:e.data?e.data.zIndex:0,filter:`brightness(${e.style.brightness}) `+`contrast(${e.style.contrast}) `+`opacity(${e.style.opacity})`};if(e.data&&"tab"===e.data.type){const s=e.data.tab,n=s.get("page"),l="on"===this.props.prefValues[j.kTabsStackingMode],c="group"===s.get("type"),u=Boolean(this.state.isDragging&&this.state.draggedActive&&this.state.draggedActive.id===n.id),h=Boolean(!this.props.prefValues[j.kTabsTooltip]||this.state.isDragging||!this.state.isHiddenForDrag.isEmpty()),g=this.props.prefValues[j.kTabsShowCloseButton]&&d.a.canClosePage(n);return i.createElement(p.a,{key:e.key,id:n.id,disabled:h,pointerEvents:l&&c?"auto":"none",placement:(o=this.props.tabPosition,{top:"below",bottom:"above",left:"after",right:"before"}[o]),appearDelay:200,disappearDelay:l?200:1,content:this.props.getTooltipContent,__source:{fileName:R,lineNumber:1912}},i.createElement("div",{className:"tab-position",style:r,onMouseDown:this.handleMouseDown.bind(this,n,t,a),onClick:this.handleClick.bind(this,n),onDoubleClick:this.handleDoubleClick.bind(this,n),onTouchStart:this.handleTouchStart.bind(this,n,t,a),onMouseUp:this.handleTabClickMouseUp.bind(this,n),__source:{fileName:R,lineNumber:1923}},i.createElement(m.a,{key:e.key,id:`tab-${e.key}`,pageId:n.id,url:n.pendingUrl||n.url,active:n.active,discarded:n.discarded,incognito:n.incognito,pinned:n.pinned,groupName:n.getIn(["extData","group"]),tilingType:n.getIn(["extData","tiling","type"]),tilingId:n.getIn(["extData","tiling","id"]),faviconUrl:n.favIconUrl,title:n.title,thumbnail:n.getIn(["extData","thumbnail"]),stack:"group"===s.get("type")?s.get("pages"):Object(O.List)(),isDragged:u,isExpectingDrop:this.state.isExpectingDrop,isSelecting:this.props.isSelecting,pageSelection:this.props.pageSelection,isHiddenForDrag:this.state.isHiddenForDrag,smallTab:e.style.width<=66,miniTab:e.style.width<30,highlightId:l?s.get("page").id:void 0,direction:this.props.direction,settings:this.props.settings,prefValues:this.props.prefValues,tabPosition:this.props.tabPosition,addressBarVisible:this.state.addressBarVisible,highlighted:this.state.highlightedId===`tab-${e.key}`,forceHover:Boolean(this.state.freeze&&this.state.freeze.nextId===n.id),clearForceHover:this.clearForceHover,onMoveFocus:this.moveFocus,onStackMenu:this.openStackMenu,onLeaveBar:this.handleLeaveBar,setIsHiddenForDrag:this.setIsHiddenForDrag,closePage:this.closeAndFreeze,onSelect:this.props.onSelectTab,onDragLeave:this.onDragLeaveHandler,droppedTabHandler:this.droppedTabHandler,handleTabPosition:this.handleTabPosition,reopenClosedTab:this.props.reopenClosedTab,shouldShowCloseButton:g,__source:{fileName:R,lineNumber:1938}})))}return e.data&&"space"===e.data.type?i.createElement("div",{key:e.key,className:"tab-yield-space tab-position",style:r,onDragEnter:this.onDragEnterHandler,onDragLeave:this.onDragLeaveHandler,onDragOver:this.onDragOverHandler,onDrop:this.onDropHandler,__source:{fileName:R,lineNumber:1994}}):e.data&&"button"===e.data.type?i.createElement("div",{key:e.key,className:"toolbar toolbar-tabbar toolbar-large",__source:{fileName:R,lineNumber:2006}},i.createElement(l.a,{id:"newtab",elementStyle:r,highlighted:"newtab"===this.state.highlightedId,tabPosition:this.props.tabPosition,onCreateTab:this.createTab,onMoveFocus:this.moveFocus,onLeaveBar:this.handleLeaveBar,__source:{fileName:R,lineNumber:2010}})):void 0;var o})),__source:{fileName:R,lineNumber:1863}})}}F(H,"contextType",g.a),t.a=H}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(26),r=a(2),o=a(13);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a.PureComponent{constructor(...e){super(...e),l(this,"_isHorizontal",()=>"top"===this.props.tabPosition||"bottom"===this.props.tabPosition),l(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":if(this._isHorizontal()?"ArrowLeft"===e.key||"ArrowRight"===e.key:"ArrowUp"===e.key||"ArrowDown"===e.key){const t="ArrowLeft"===e.key||"ArrowUp"===e.key?"left":"right";this.props.onMoveFocus(this.props.id,t,!1)}break;case"Escape":this.props.onLeaveBar();break;default:return}e.preventDefault(),e.stopPropagation()})}render(){return s.a.createElement(n.a,{style:this.props.elementStyle,className:"newtab",onKeyDown:this._handleKeyDown,onClick:this.props.onCreateTab,tooltip:Object(r.a)("Open a new tab"),image:o.kc.large,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\NewTab.jsx",lineNumber:60}})}}t.a=c},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(366),n=a(37),r=a(22),o=a(994),l=a(40),c=a(79),d=a(97),u=(a(106),a(12)),h=a(9),m=a(8),p=a(256),g=a(29),b=a.n(g),f=a(995),_=a(996),N=a(211),v=a(126),E=(a(53),a(25)),w=a(16),S=a(2),C=a(7),k=a(17),y=a.n(k),O=a(60),A=a(6),T=a(535),I=a(169),D=a(44),P=a(312),x=a(548),M=a(21),L=a(549),j=a(279),B=a(125),R=a(36),F=a(318),U=a(161),W=a(1),H=a(13),V=a(20),G="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Tab.jsx";function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const z=Object(L.a)();function Y(e,t){if(Object(R.g)(t))return 1;switch((d.a.getNavigationInfo(e)||{}).trigger){case"start":return 0;case"stop":return 1;case"commit":case"content":{const t=p.a.getProgressInfo(e);return t?Math.min(Math.max(t.progress,0),1):0}}return 1}class $ extends i.PureComponent{constructor(t){super(t),K(this,"state",{dragOver:"none",awaitingEdit:null,fadeDiscardedTabs:this.props.prefValues[W.kTabsDimHibernated],loadingProgress:Y(this.props.pageId,this.props.url),mediaState:c.a.getMediaStateByTabId(this.props.pageId)}),K(this,"_onProgressStateStoreChanged",()=>{this.setState({loadingProgress:Y(this.props.pageId,this.props.url)})}),K(this,"_onMediaStateStoreChanged",()=>{this.setState({mediaState:c.a.getMediaStateByTabId(this.props.pageId)})}),K(this,"clearFadedDiscardedTabs",()=>{this.setState({fadeDiscardedTabs:!1})}),K(this,"discardPages",e=>{e.forEach(u.a.discardPage)}),K(this,"cloneTab",e=>{u.a.clonePages(M.List.of(e))}),K(this,"cloneTabs",e=>{u.a.clonePages(e)}),K(this,"reloadTab",e=>{u.a.clearSelection(),u.a.reloadPage(e)}),K(this,"renameTabStack",()=>{const e=this.props.groupName;e&&this.setState({awaitingEdit:e})}),K(this,"toggleMediaRemoting",()=>{const e=this.props.prefValues[W.kMediaRouterMediaRemotingEnabled];m.a.set(W.kMediaRouterMediaRemotingEnabled,!e)}),K(this,"pinTab",(e,t,a)=>{u.a.clearSelection(),u.a.togglePinned(e,t,a)}),K(this,"bookmarkAllOpenPages",()=>{u.a.clearSelection(),n.a.bookmarkAllOpenPages(r.a.getRootNode().id)}),K(this,"bookmarkTab",(e,t)=>{u.a.clearSelection(),n.a.bookmarkPages(e,t,r.a.getRootNode().id)}),K(this,"handleClose",(e,t)=>{t.button!==D.a.kLeft&&t.button!==D.a.kCenter||(t.altKey?this.closeAllButTab(e):t.shiftKey||t.ctrlKey||t.metaKey||this.props.closePage(e,t),t.preventDefault())}),K(this,"closeToLeft",(e,t)=>{const a=!t;u.a.closeToLeft(e,a)}),K(this,"closeToRight",(e,t)=>{const a=!t;u.a.closeToRight(e,a)}),K(this,"closeTabStack",()=>{u.a.closeTabStack(this.props.pageId,!0)}),K(this,"handleMedia",e=>{"pip"===this.state.mediaState?u.a.exitPictureInPicture(e.id):this.muteTab(e)}),K(this,"muteTab",e=>{u.a.toggleMuting(e)}),K(this,"closeAllButTab",(e,t)=>{const a=!t;u.a.closeOther(e,a)}),K(this,"newTab",()=>{u.a.openURL()}),K(this,"createTab",e=>{u.a.openURL(e)}),K(this,"onClick",e=>{e.button===D.a.kCenter&&e.stopPropagation()}),K(this,"blockEvent",e=>{e.stopPropagation(),e.preventDefault()}),K(this,"containEvent",e=>{e.stopPropagation()}),K(this,"onSelect",(e,t)=>{this.props.onSelect(e,t)}),K(this,"reopenClosedTab",()=>{this.props.reopenClosedTab()}),K(this,"customize",()=>{l.a.showSettings("tabs")}),K(this,"disolveTabStack",()=>{u.a.clearSelection(),u.a.expandTabStack(this.props.groupName)}),K(this,"removeFromTabStack",()=>{const e=h.a.getPageById(this.props.pageId);e&&u.a.removeFromTabStack(e)}),K(this,"isTabstackingEnabled",()=>"on"===this.props.prefValues[W.kTabsStackingMode]),K(this,"isTabStack",e=>this.isTabstackingEnabled()&&Object(U.b)(e)),K(this,"isPinned",e=>e.get("pinned")),K(this,"tileTabStack",()=>{const e=this.props.groupName;u.a.tileTabStack(e),u.a.clearSelection()}),K(this,"isPageTiledWithType",e=>{const t=h.a.getPageById(this.props.pageId);return Boolean(t&&Object(U.d)(t)&&this.props.tilingType===e)}),K(this,"tileSelection",e=>{const t=e.count()<4?"row":"grid";u.a.tilePages(e.toList(),t),u.a.clearSelection()}),K(this,"untilePages",()=>{const e=this.props.tilingId;u.a.untileTileGroup(e),u.a.clearSelection()}),K(this,"mouseEnterHandler",()=>{this.props.clearForceHover()}),K(this,"indicatorOnDragStart",e=>{this.props.setIsHiddenForDrag(Object(M.Set)(e.map(e=>e.id)))}),K(this,"indicatorOnDragEnd",()=>{this.props.setIsHiddenForDrag(Object(M.Set)())}),K(this,"onTabIndicatorPress",(e,t,a)=>{a.preventDefault(),a.stopPropagation(),this.props.prefValues[W.kTabsStackingAllowDnd]&&this.onTabIndicatorDragOut(e,t,a)}),K(this,"onTabIndicatorClick",(e,t)=>{t.preventDefault(),t.stopPropagation();const{prefValues:a}=this.props;if(t.button===D.a.kLeft){const i=w.a.isActive(this.context.vivaldiWindowId);Object(F.b)(t,a[W.kTabsSelectionEnabled],i)?u.a.setSelection(e,!1,!1):Object(F.a)(t,a[W.kTabsSelectionEnabled],i)?u.a.setSelection(e,!0,!1):Object(I.a)(t)||this.props.onSelect(e,t)}else t.button,D.a.kCenter}),K(this,"onTabIndicatorDragOut",(e,t,a)=>{const{isSelecting:i,pageSelection:s}=this.props,n=i&&s.has(e.id)?this.props.pageSelection.reduce((e,t)=>{const a=h.a.getPages().find(e=>e.id===t);return a?e.push(a):e},Object(M.List)()).sortBy(e=>e.index).toArray():[e];Object(x.a)(n,a,{offsetLeft:2,offsetTop:3,offsetHeight:-6,offsetWidth:-2,onDragStart:this.indicatorOnDragStart,onDragEnd:this.indicatorOnDragEnd,element:this.indicators[t]})}),K(this,"renderTabGroupIndicator",()=>{const e=h.a.getPageById(this.props.pageId);return i.createElement("div",{className:"tab-group-indicator",__source:{fileName:G,lineNumber:528}},this.props.stack.map(t=>{const a=y()({"tab-indicator":!0,active:this.props.highlightId===t.id,marked:this.props.isSelecting&&this.props.pageSelection.contains(t.id),unread:this.props.prefValues[W.kTabsUnread]&&e&&h.a.isUnread(e)&&t.id!==this.props.highlightId}),s={visibility:this.props.isHiddenForDrag.has(t.id)?"hidden":"visible"},n=`stack-${t.id}`;return i.createElement("div",{key:n,ref:e=>{e&&(this.indicators[n]=e)},className:a,style:s,title:V.a.getDisplayTitle(t),onContextMenu:this.onContextMenu.bind(this,t,!0),onClick:this.onTabIndicatorClick.bind(this,t),onMouseDown:this.onTabIndicatorPress.bind(this,t,n),__source:{fileName:G,lineNumber:546}})}))}),K(this,"keyDown",t=>{const a=this.props.prefValues[W.kTabsSelectionEnabled];if(!this.state.awaitingEdit){switch(t.key){case"Enter":case" ":const i=h.a.getPageById(this.props.pageId);i&&this.props.onSelect(i,t);break;case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":const s=this.isHorizontal();if(Object(B.d)(t)&&a){const e=h.a.getPageById(this.props.pageId);e&&(("ArrowLeft"===t.key&&s||"ArrowUp"===t.key&&!s)&&u.a.expandSelectionPrevious(e),("ArrowRight"===t.key&&s||"ArrowDown"===t.key&&!s)&&u.a.expandSelectionNext(e))}if(Object(B.a)(t))if(s){if("ArrowLeft"===t.key||"ArrowRight"===t.key){const i=h.a.getPageById(this.props.pageId);i&&(u.a.stepPage(i,"ArrowRight"===t.key),a&&e.nextTick(()=>{u.a.setSelection(i,!1,!1,!0)}))}}else if("ArrowUp"===t.key||"ArrowDown"===t.key){const i=h.a.getPageById(this.props.pageId);i&&(u.a.stepPage(i,"ArrowDown"===t.key),a&&e.nextTick(()=>{u.a.setSelection(i,!1,!1,!0)}))}if(Object(B.c)(t)){if(s?"ArrowLeft"===t.key||"ArrowRight"===t.key:"ArrowUp"===t.key||"ArrowDown"===t.key){const a="ArrowLeft"===t.key||"ArrowUp"===t.key?"left":"right";u.a.clearSelection(),e.nextTick(()=>this.props.onMoveFocus(this.props.id,a,!1))}else{const e=h.a.getPageById(this.props.pageId);if(e&&this.isTabStack(e)){const t=b.a.findDOMNode(this.refs.tab);t instanceof Element&&this.props.onStackMenu(e.id,t)}}}break;case"Escape":u.a.clearSelection(),this.props.onLeaveBar();break;default:return}t.preventDefault(),t.stopPropagation()}}),K(this,"createGroup",(e,t)=>{const a=e.sort((e,t)=>e.index-t.index),i=t.index-a.findIndex(e=>e===t);u.a.createTabStack(a,i,t.getIn(["extData","group"]))}),K(this,"createGroupByHost",(e,t)=>{const a=h.a.getNewGroupName();Object(P.a)(a,t),u.a.createTabStack(e,null,a)}),K(this,"onContextMenu",(e,t,a)=>(a.persist(),a.preventDefault(),a.stopPropagation(),C.default.windows.getAll({populate:!0,windowTypes:["normal"]},i=>{const s=i.filter(e=>!e.extData||"settings"!==JSON.parse(e.extData).windowType).filter(e=>e.incognito===w.a.isIncognito()).filter(e=>e.id!==this.context.vivaldiWindowId);Object(O.a)(this.context.vivaldiWindowId,this.getContextMenuItems(e,s,a,t))(a)}),!1)),K(this,"isHorizontal",()=>{const{tabPosition:e}=this.props;return"top"===e||"bottom"===e}),K(this,"getContextMenuItems",(e,t,a,i)=>{const s=w.a.isGuestSession(this.context.vivaldiWindowId),n=this.props.isSelecting&&this.props.pageSelection.has(e.id)&&this.props.pageSelection.count()>1,r=h.a.getSelectedPages(),o=r.filter(e=>!Object(R.g)(e.url)),d=h.a.getPages().filter(e=>!r.find(t=>t.id===e.id));let m;m=n?r:!i&&this.isTabStack(e)?h.a.getGroup(e.getIn(["extData","group"])):M.List.of(e);let p=[{visible:!n&&this.isHorizontal(),handler:u.a.stepPage.bind(this,e,!1),...Object(A.a)("navigation","Left")},{visible:!n&&this.isHorizontal(),handler:u.a.stepPage.bind(this,e,!0),...Object(A.a)("navigation","Right")},{visible:!n&&!this.isHorizontal(),handler:u.a.stepPage.bind(this,e,!1),...Object(A.a)("Up")},{visible:!n&&!this.isHorizontal(),handler:u.a.stepPage.bind(this,e,!0),...Object(A.a)("Down")},{name:"---"},{visible:!0,handler:()=>{m.count()===h.a.getPages().count()&&document.querySelectorAll("webview").forEach(e=>e.parentElement.removeChild(e)),u.a.detachPage(m,a.screenX,a.screenY)},...Object(A.a)("To New Window")}];const g=!i||n;t.length>0&&(p=p.concat({name:"---"},t.map((t,a)=>{const i=t.tabs||[],s=i.find(e=>e.active),o=s&&s.url?V.a.getDisplayTitleByUrl(s.url,s.title||s.url):a+1;return{visible:!0,handler:()=>{const a=n?r:this.isTabStack(e)?h.a.getGroup(e.getIn(["extData","group"])):M.List.of(e);a.count()===h.a.getPages().count()&&document.querySelectorAll("webview").forEach(e=>e.parentElement.removeChild(e)),t.id&&u.a.moveToWindow(a,t.id,g)},...Object(A.a)("Window with $1 Active Tab ($2)","Window with $1 Active Tabs ($2)",[i.length,o])}})));const b=!e.active&&!e.discarded&&!e.isInspected&&e.url!==h.a.getDefaultStartpage(),f=this.isTabStack(e)&&h.a.getGroup(e.getIn(["extData","group"])).some(e=>!e.active&&!e.discarded&&!e.isInspected&&e.url!==h.a.getDefaultStartpage()),_=h.a.getDiscardablePages(),N=0!==_.count(),E=h.a.getPages().count(),S=e.getIn(["extData","group"]),C=h.a.isGroup(S);let k;k=i||!C?E>=2:E-h.a.getGroup(S).count()>=1;const[y,O]=Object(j.a)(e,h.a.getTabs(!this.isTabstackingEnabled()));return[{handler:this.newTab,...Object(A.a)("command","New Tab")},{name:"---"},{handler:this.reloadTab.bind(this,e.id),visible:!n,...Object(A.a)("Reload Tab")},{handler:this.reloadTab.bind(this,r.map(e=>e.id)),visible:n,...Object(A.a)("Reload $1 Tab","Reload $1 Tabs",[r.count()])},{handler:this.cloneTab.bind(this,e),visible:!n,...Object(A.a)("Clone Tab")},{handler:this.cloneTabs.bind(this,r),visible:n,...Object(A.a)("Clone $1 Tab","Clone $1 Tabs",[r.count()])},{handler:this.pinTab.bind(this,e,!0),visible:!n&&!this.isTabStack(e)&&!e.pinned,...Object(A.a)("Pin Tab")},{handler:this.pinTab.bind(this,r,!0),visible:n&&!r.some(this.isTabStack)&&r.some(e=>!this.isPinned(e)),...Object(A.a)("Pin $1 Tab","Pin $1 Tabs",[r.filter(e=>!this.isPinned(e)).count()])},{handler:this.pinTab.bind(this,e,!1),visible:!n&&!this.isTabStack(e)&&e.pinned,...Object(A.a)("Unpin Tab")},{handler:this.pinTab.bind(this,r,!1),visible:n&&!r.some(this.isTabStack)&&r.some(this.isPinned),...Object(A.a)("Unpin $1 Tab","Unpin $1 Tabs",[r.filter(this.isPinned).count()])},{items:p,visible:!n&&(i||!this.isTabStack(e)),...Object(A.a)("Move Tab")},{items:p,visible:n&&!r.some(t=>e.incognito),...Object(A.a)("Move $1 Tab","Move $1 Tabs",[r.count()])},{name:"---"},{handler:this.muteTab.bind(this,e),type:"checkbox",checked:e.muted,...Object(A.a)("Mute Tab")},{handler:u.a.muteAllExcept.bind(this,[e]),visible:!n&&h.a.getPages().some(t=>t.id!==e.id&&c.a.hasMediaState(t.id,"playing")),...Object(A.a)("Mute Other Tabs")},{handler:this.muteTab.bind(this,r),type:"checkbox",checked:r.every(e=>c.a.hasMediaState(e.id,"muting")),visible:n&&r.some(e=>c.a.hasMediaState(e.id,"playing")||c.a.hasMediaState(e.id,"muting")),...Object(A.a)("Mute $1 Tab","Mute $1 Tabs",[r.filter(e=>c.a.hasMediaState(e.id,"playing")||"muting"===this.state.mediaState).count()])},{name:"---"},{handler:this.toggleMediaRemoting,type:"checkbox",visible:"capturing"===c.a.getMediaStateByTabId(e.id),checked:this.props.prefValues[W.kMediaRouterMediaRemotingEnabled],...Object(A.a)("Optimize fullscreen videos")},{name:"---"},{handler:this.bookmarkTab.bind(this,e,!1),visible:!n&&!s,...Object(A.a)("Bookmark Tab")},{handler:this.bookmarkTab.bind(this,this.props.stack,!0),visible:this.isTabStack(e)&&!s,...Object(A.a)("Bookmark Tab Stack")},{handler:this.bookmarkTab.bind(this,r,!1),visible:n&&Boolean(o.count())&&!s,...Object(A.a)("Bookmark $1 Tab","Bookmark $1 Tabs",[o.count()])},{handler:this.bookmarkAllOpenPages,visible:!s,...Object(A.a)("Bookmark All Tabs")},{name:"---"},{handler:l.a.showSaveSession.bind(this,{mode:"all"}),visible:0===r.count()&&!s,...Object(A.a)("Save All Tabs as Session")},{handler:l.a.showSaveSession.bind(this,{mode:"selected",ids:r.map(e=>e.id).toArray()}),visible:r.count()>0&&!s,...Object(A.a)("Save $1 Selected Tab as Session","Save $1 Selected Tabs as Session",[r.count()])},{name:"---"},{handler:this.createGroup.bind(this,r,e),visible:n&&this.isTabstackingEnabled()&&this.props.isSelecting&&r.count()>1,...Object(A.a)("New Tab Stack with Selection ($1 Tab)","New Tab Stack with Selection ($1 Tabs)",[r.count()])},{handler:this.createGroupByHost.bind(this,O,y),visible:!n&&this.isTabstackingEnabled()&&!this.isTabStack(e)&&O.count()>1,...Object(A.a)("Stack Tabs by Host ($1 of $2)",[O.count(),y])},{handler:this.renameTabStack,visible:this.isTabStack(e)&&this.props.prefValues[W.kTabsStackingAllowRename],...Object(A.a)("Rename Tab Stack")},{items:p,visible:!n&&!i&&this.isTabStack(e),...Object(A.a)("Move Tab Stack")},{handler:this.removeFromTabStack,visible:this.isTabStack(e),...Object(A.a)("Remove from Tab Stack")},{handler:this.disolveTabStack,visible:this.isTabStack(e),...Object(A.a)("Ungroup Tab Stack")},{name:"---"},{handler:this.tileTabStack,visible:this.isTabStack(e)&&!this.isPageTiledWithType("group")&&!this.isPageTiledWithType("selection"),...Object(A.a)("Tile Tab Stack")},{handler:this.untilePages,visible:this.isTabStack(e)&&(this.isPageTiledWithType("group")||this.isPageTiledWithType("selection")),...Object(A.a)("Untile Tab Stack")},{handler:this.tileSelection.bind(this,r),visible:n&&!this.isPageTiledWithType("selection")&&this.props.isSelecting&&r.count()>1,...Object(A.a)("Tile $1 Tab","Tile $1 Tabs",[r.count()])},{handler:this.untilePages,visible:this.isPageTiledWithType("selection")&&!this.isTabStack(e),...Object(A.a)("Untile Selection")},{name:"---"},{handler:this.discardPages.bind(this,M.List.of(e)),visible:!n&&b&&!this.isTabStack(e),...Object(A.a)("Hibernate Tab")},{handler:this.discardPages.bind(this,r.filter(e=>!e.active)),visible:Boolean(n&&r.filter(e=>_.find(t=>t.id===e.id)).count()),...Object(A.a)("Hibernate $1 Background Tab","Hibernate $1 Background Tabs",[r.filter(e=>!e.active&&!e.isInspected).count()])},{handler:this.discardPages.bind(this,h.a.getGroup(e.getIn(["extData","group"])).filter(e=>!e.active)),visible:f,...Object(A.a)("Hibernate Tab Stack")},{handler:this.discardPages.bind(this,_),visible:N,...Object(A.a)("Hibernate Background Tabs")},{name:"---"},{handler:()=>u.a.closePage(e),visible:!n&&h.a.canClosePage(e),...Object(A.a)("Close Tab")},{handler:u.a.closePage.bind(null,r),visible:n,...Object(A.a)("Close $1 Tab","Close $1 Tabs",[r.count()])},{handler:this.closeTabStack,visible:this.isTabStack(e),...Object(A.a)("Close Tab Stack")},{handler:this.closeAllButTab.bind(this,e,i),visible:!n&&k,...Object(A.a)("Close Other Tabs")},{handler:this.closeAllButTab.bind(this,r,i),visible:n&&d.count()>0,...Object(A.a)("Close Other ($1 Unselected Tab)","Close Other ($1 Unselected Tabs)",[d.count()])},{handler:this.closeToLeft.bind(this,e,i),visible:!n&&k&&h.a.getPages().takeUntil(t=>t.id===e.id).count()>0,...this.isHorizontal()?Object(A.a)("Close Tabs to the Left"):Object(A.a)("Close the Tabs Above")},{handler:this.closeToRight.bind(this,e,i),visible:!n&&k&&h.a.getPages().skipUntil(t=>t.id===e.id).skip(1).count()>0,...this.isHorizontal()?Object(A.a)("Close Tabs to the Right"):Object(A.a)("Close the Tabs Below")},{name:"---"},{handler:this.reopenClosedTab,visible:Boolean(v.a.getTrash().length),...Object(A.a)("Reopen Closed Tab")},{name:"---"},{name:":::",visible:e.active,expand:"pwa"},{name:"---"},{handler:this.customize,visible:!s,...Object(A.a)("panel","Customize...")}]}),K(this,"isKnownDropMimeType",e=>e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e||"text/uri-list"===e||"text/plain"===e)),K(this,"onDragEnterHandler",e=>{this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation())}),K(this,"onDragOverHandler",e=>{if(this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation()),!e.dataTransfer.types.includes("vivaldi/x-button-toolbar"))if(e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)&&this.props.isExpectingDrop){const t=this.getDropSide(e)||"before";this.props.handleTabPosition(this.props.pageId,t)}else{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e)&&(e.dataTransfer.dropEffect="copy");const t=h.a.getPageById(this.props.pageId);t&&z(e.screenX,e.screenY,250,()=>this.props.onSelect(t,e))}}),K(this,"getDropSide",e=>{const{pinned:t,prefValues:a}=this.props,i="on"===a[W.kTabsStackingMode]&&!t,s=this.refs.tab.getBoundingClientRect(),[n,r]=[e.pageX-s.left,e.pageY-s.top];let o;return"row"===this.props.direction?o=i?n<.15*s.width?"before":n>.85*s.width?"after":"over":n<s.width/2?"before":"after":"column"===this.props.direction&&(o=i?7<.15*s.width?"before":r>.85*s.width?"after":"over":r<s.height/2?"before":"after"),o}),K(this,"onDropHandler",e=>{this.isKnownDropMimeType(e)&&(e.preventDefault(),e.stopPropagation());const t=e.dataTransfer.getData("vivaldi/x-tab-entries"),a=e.dataTransfer.getData("text/uri-list"),i=e.dataTransfer.getData("text/plain");t?this.props.droppedTabHandler(t):a?a.split("\n").forEach((e,t)=>u.a.openURL(e,{incognito:this.props.incognito,inCurrent:0===t,inSpecificPageId:0===t?this.props.pageId:void 0,inBackground:0!==t})):i&&Object(R.l)(i)&&u.a.openURL(i,{inCurrent:!0,inSpecificPageId:this.props.pageId,incognito:this.props.incognito})}),K(this,"onFocusHandler",e=>{const t=h.a.getPageById(this.props.pageId);t&&!this.props.pageSelection.contains(t.id)&&u.a.setSelection(t,!1,!1,!0)}),K(this,"renderCustomTabStackTitle",e=>{const t=this.props.groupName,a=this.props.prefValues[W.kTabsStackingNameMap]||{},s=a&&a[t]?a[t]:e,n=()=>{this.isIMEOpen=!0},r=()=>{this.isIMEOpen=!1},o=e=>{"Enter"!==e.key||this.isIMEOpen?"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),this.setState({awaitingEdit:null})):(e.preventDefault(),e.stopPropagation(),e.target instanceof HTMLInputElement&&d(e.target.value))},l=e=>{e&&document.activeElement!==e&&e.select()},c=e=>{d(e.target.value)},d=e=>{Object(P.a)(t,e),this.setState({awaitingEdit:null})},{awaitingEdit:u}=this.state;return t&&t===u?i.createElement("input",{className:"tab-title-edit",defaultValue:s,ref:l,onBlur:c,onKeyDown:o,onMouseDown:this.containEvent,onCompositionStart:n,onCompositionUpdate:n,onCompositionEnd:r,__source:{fileName:G,lineNumber:1341}}):s}),this.indicators={},this.isIMEOpen=!1}componentDidMount(){this._mediaStateStoreToken=c.a.addListener(this._onMediaStateStoreChanged),p.a.addChangeListener(this._onProgressStateStoreChanged)}componentWillUnmount(){p.a.removeChangeListener(this._onProgressStateStoreChanged),this._mediaStateStoreToken.remove()}UNSAFE_componentWillReceiveProps(e){!0===this.props.active&&!1===e.active&&null!==this.state.awaitingEdit&&this.setState({awaitingEdit:null}),!1===this.props.discarded&&!0===e.discarded&&(this.discardedFadeInTimeId&&(clearTimeout(this.discardedFadeInTimeId),delete this.discardedFadeInTimeId),this.props.prefValues[W.kTabsDimHibernated]||(this.discardedFadeInTimeId=setTimeout(this.clearFadedDiscardedTabs,2e3)),this.setState({fadeDiscardedTabs:!0}))}render(){const{pageId:e,discarded:t,prefValues:a,faviconUrl:n,url:r}=this.props,l=this.props.active,c=Boolean(this.props.smallTab),d=h.a.getPageById(e);if(!d)return null;let u=this.state.mediaState;u&&"empty"!==u&&!t||(u="idle");const{shouldShowCloseButton:m}=this.props,p=this.isTabStack(d),g=!p&&this.props.isHiddenForDrag.has(e),b=p&&this.props.stack.every(e=>this.props.isHiddenForDrag.has(e.id)),v=g||b,E=y()({tab:!0,marked:!v&&this.props.isSelecting&&this.props.pageSelection.contains(d.id),pinned:d.pinned,active:l,uifocusstop:l,highlighted:this.props.highlighted&&!a[W.kTabsSelectionEnabled],"tab-small":c&&!d.pinned,"tab-mini":this.props.miniTab&&!d.pinned,"force-hover":this.props.forceHover,"tab-group":h.a.isGroup(d.getIn(["extData","group"])),"audio-on":"playing"===u||"pip"===u,"audio-muted":"muting"===u,"tab-captured":"capturing"===u,"button-off":!m,unread:a[W.kTabsUnread]&&h.a.isUnread(d)&&!l&&!h.a.isGroup(d.getIn(["extData","group"]))&&!Object(R.g)(d.url),isdiscarded:this.state.fadeDiscardedTabs&&d.discarded}),w=V.a.getDisplayTitle(d),C=Object(T.a)(w,d.get("url"),9),k=p?Object(S.a)("Tab stack with $1 tab","Tab stack with $1 tabs",[this.props.stack.size]):w,O=this.isTabStack(d)&&a[W.kTabsStackingAllowRename],A="progress_bar"===a[W.kTabsPageLoadInfo]&&!Object(R.g)(d.url)&&(l&&!this.props.addressBarVisible||l&&!a[W.kAddressBarShowProgress]||!l),I=c||d.pinned?"#111":"",D=l?a[W.kKeyboardTabToAll]:"-1";return i.createElement("div",{id:this.props.id,className:E,ref:"tab","data-id":this.props.id,title:a[W.kTabsTooltip]?null:k,onClick:this.onClick,onContextMenu:this.onContextMenu.bind(this,d,!1),onMouseEnter:this.mouseEnterHandler,onDragEnter:this.onDragEnterHandler,onDragOver:this.onDragOverHandler,onDragLeave:this.props.onDragLeave,onDrop:this.onDropHandler,onKeyDown:this.keyDown,onFocus:a[W.kTabsSelectionEnabled]?this.onFocusHandler:null,tabIndex:D,__source:{fileName:G,lineNumber:1428}},i.createElement("div",{className:"tab-header",__source:{fileName:G,lineNumber:1444}},A&&i.createElement(_.a,{progress:this.state.loadingProgress,__source:{fileName:G,lineNumber:1447}}),i.createElement(o.a,{faviconUrl:V.a.getFavicon(r,n),progress:this.state.loadingProgress,progressType:"progress_icon"===a[W.kTabsPageLoadInfo]||"spinner"===a[W.kTabsPageLoadInfo]?a[W.kTabsPageLoadInfo]:void 0,__source:{fileName:G,lineNumber:1450}}),i.createElement("span",{className:"title",onDoubleClick:a[W.kTabsMinimize]?null:this.renameTabStack,__source:{fileName:G,lineNumber:1460}},O?this.renderCustomTabStackTitle(w):w),m&&i.createElement(f.a,{onClick:this.handleClose.bind(this,d),onMouseDown:this.blockEvent,__source:{fileName:G,lineNumber:1469}}),"idle"!==u&&i.createElement("span",{className:"tab-audio",onClick:this.handleMedia.bind(this,d),onAuxClick:this.handleClose.bind(this,d),onMouseDown:this.blockEvent,__source:{fileName:G,lineNumber:1476}},"capturing"===u?i.createElement("span",{className:"audioicon",width:"16",height:"16",dangerouslySetInnerHTML:{__html:H.gc},__source:{fileName:G,lineNumber:1483}}):i.createElement(s.a,{color:I,animated:a[W.kThemeUseAnimation],mode:u,active:l,__source:{fileName:G,lineNumber:1486}})),a[W.kTabsCounterDetection]&&C&&i.createElement("span",{className:"button-badge",__source:{fileName:G,lineNumber:1497}},C)),a[W.kTabsThumbnails]&&i.createElement(N.a,{src:this.props.thumbnail,__source:{fileName:G,lineNumber:1502}}),this.props.stack&&this.renderTabGroupIndicator())}}K($,"contextType",E.a),t.a=$}).call(this,a(64))},function(e,t,a){"use strict";var i=a(120),s=a(0),n=a.n(s),r=a(13),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\LoadingFavicon.jsx";class l extends n.a.PureComponent{render(){const{faviconUrl:e,progress:t,progressType:a}=this.props,s=Math.round(100*t),l=t<1;return l&&"spinner"===a?n.a.createElement("span",{className:"favicon spinner",dangerouslySetInnerHTML:{__html:r.sc},__source:{fileName:o,lineNumber:19}}):l&&"progress_icon"===a?n.a.createElement("span",{className:"favicon progress",style:{"--progressInPercent":s+"%"},__source:{fileName:o,lineNumber:25}}):n.a.createElement("span",{className:"favicon jstest-favicon-image",__source:{fileName:o,lineNumber:31}},n.a.createElement(i.a,{url:e,avoidCache:!0,__source:{fileName:o,lineNumber:32}}))}}t.a=l},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(0),s=a.n(i),n=a(2),r=a(13);function o({onClick:e,onMouseDown:t}){const a=Object(n.a)("Close Tab")+"\n"+Object(n.a)("$1 click to close other tabs except this one",[Object(n.a)("key","Alt")]);return s.a.createElement("button",{className:"close",dangerouslySetInnerHTML:{__html:r.hc},onClick:e,onAuxClick:e,onMouseDown:t,title:a,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabCloseButton.jsx",lineNumber:26}})}},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(17),r=a.n(n);class o extends s.a.Component{render(){const e=this.props.progress,t=r()({"progress-indicator":!0,"progress-done":1===e});return s.a.createElement("span",{className:t,style:{transform:`scaleX(${e})`},__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\TabProgressIndicator.jsx",lineNumber:18}})}}t.a=o},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(29),n=a.n(s),r=a(213),o=a(299),l=a(25),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tooltip\\Tooltip.jsx";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(){let e=document.getElementById("vivaldi-tooltip");if(!e){const t=document.getElementById("app");e=document.createElement("div"),e.id="vivaldi-tooltip",t&&t.appendChild(e)}return e}o.a.addChangeListener(()=>{o.a.allHidden()&&n.a.unmountComponentAtNode(u())});class h extends i.PureComponent{constructor(...e){super(...e),d(this,"state",{show:o.a.getShowTooltip(this.props.id),isDraggingOver:!1}),d(this,"_onStoreChange",()=>{this.setState({show:o.a.getShowTooltip(this.props.id)})}),d(this,"onDragEnter",()=>{r.a.hideTooltip(this.props.id,0),this.setState({isDraggingOver:!0})}),d(this,"onDragLeave",()=>{this.setState({isDraggingOver:!1})}),d(this,"onMouseEnter",()=>{if(!this.props.disabled&&!this.state.isDraggingOver){const e=o.a.allHidden()?this.props.appearDelay:0;r.a.showTooltip(this.props.id,e)}}),d(this,"onMouseLeave",()=>{this.props.disabled||r.a.hideTooltip(this.props.id,this.props.disappearDelay)}),d(this,"onClick",()=>{r.a.hideTooltip(this.props.id,0)}),d(this,"tooltipIsOpen",()=>{const e=u().firstChild;return Boolean(e instanceof Element&&e.classList.contains("tooltip"))}),d(this,"getPosition",(e,t)=>{const a=n.a.findDOMNode(this);let i,s;if(!(a&&a.firstChild instanceof Element))return{left:i,top:s};const r=a.firstChild.getBoundingClientRect();if("above"===this.props.placement){i=r.left+r.width/2-e/2,s=r.top-t-4}else if("after"===this.props.placement)i=r.left+r.width+4,s=r.top;else if("before"===this.props.placement)i=r.left-e-4,s=r.top;else{i=r.left+r.width/2-e/2,s=r.top+r.height+4}return i<0&&(i=0),s<0&&(s=0),i+e>this.context.innerWidth&&(i-=i+e-this.context.innerWidth),s+t>this.context.innerHeight&&(s-=s+t-this.context.innerHeight),{left:i,top:s}}),d(this,"renderToolTip",()=>{if(!this.state.show)return;const{width:e,height:t,content:a}=this.props.content(this.props.id),{left:s,top:r}=this.getPosition(e,t),o=this.props.pointerEvents,l=["after","before"].includes(this.props.placement)?"top 150ms":"left 150ms";n.a.render(i.createElement("div",{className:"tooltip",style:{top:r,left:s,pointerEvents:o,height:t,width:e,transition:l},onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:c,lineNumber:186}},a),u())})}componentWillUnmount(){o.a.removeChangeListener(this._onStoreChange),e.nextTick(r.a.hideTooltip.bind(r.a,this.props.id))}componentDidMount(){this.renderToolTip(),o.a.addChangeListener(this._onStoreChange)}componentDidUpdate(e){!e.disabled&&this.props.disabled?r.a.hideTooltip(this.props.id):this.renderToolTip()}render(){const e=i.Children.only(this.props.children);return i.createElement("span",{onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,__source:{fileName:c,lineNumber:199}},e)}}d(h,"contextType",l.a),t.a=h}).call(this,a(64))},,function(e,t,a){"use strict";var i=a(0),s=a(86),n=a(12),r=a(9),o=a(26),l=a(116),c=a(126),d=a(2),u=a(6),h=a(21),m=a(13),p=a(145),g=a(103),b=a(20);function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends i.PureComponent{constructor(...e){super(...e),f(this,"trashButton",i.createRef()),f(this,"state",{trash:c.a.getTrash()}),f(this,"onTrashStoreChange",()=>{this.setState({trash:c.a.getTrash()})}),f(this,"emptyTrash",()=>{l.a.emptyTrash()}),f(this,"undeleteTab",e=>{l.a.undeleteTab(e)}),f(this,"undeleteWindow",e=>{l.a.undeleteWindow(e)}),f(this,"undo",()=>{if(this.state.trash.length>0){const e=this.state.trash[0];e.tab?this.undeleteTab(e.tab):e.window&&this.undeleteWindow(e.window)}}),f(this,"trimTitle",e=>(e.length>70&&(e=e.substring(0,70)+"..."),e)),f(this,"_tabToTitle",e=>{const t=Object(g.b)(e);return this.trimTitle(b.a.getDisplayTitle(t))}),f(this,"_onCommandSpy",()=>{this.trashButton.current&&this.trashButton.current.showMenu()}),f(this,"getContextMenuItems",()=>this.state.trash.map((e,t)=>{if(e.tab){const t=e.tab;return{mnemonic:!1,name:this._tabToTitle(t),url:t.url,handler:this.undeleteTab.bind(this,t)}}if(e.window){const t=e.window;if(t.tabs){const e=t.tabs;return{items:e.map(e=>({mnemonic:!1,name:this._tabToTitle(e),url:e.url,handler:this.undeleteTab.bind(this,e)})).concat([{name:"---"},{handler:this.undeleteWindow.bind(this,t),...Object(u.a)("Restore All")}]),...Object(u.a)("Window with $1 Tab","Window with $1 Tabs",[e.length])}}}}).filter(Boolean).concat([{name:"---"},{handler:l.a.emptyTrash,...Object(u.a)("verb","Clear All")}])),f(this,"onDrop",e=>{const t=e.dataTransfer.getData("vivaldi/x-tab-entries");if(t){e.preventDefault(),e.stopPropagation();const a=JSON.parse(t).ids.map(e=>parseInt(e)).map(e=>r.a.getPages().find(t=>t.id===e)).filter(Boolean);n.a.closePage(Object(h.List)(a))}})}componentDidMount(){c.a.addChangeListener(this.onTrashStoreChange),s.a.addListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}componentWillUnmount(){c.a.removeChangeListener(this.onTrashStoreChange),s.a.removeListener("COMMAND_SHOW_CLOSED_TABS",this._onCommandSpy)}render(){return i.createElement(o.a,{ref:this.trashButton,className:"toggle-trash",onDrop:this.onDrop,onDragEnter:p.default,disabled:0===this.state.trash.length,image:m.oc.large,onMiddleClick:this.undo,menu:this.getContextMenuItems(),menuOrigin:"bottomLeft",mimeType:"vivaldi/x-tab-entries",edgeAmount:0,tooltip:Object(d.a)("Show Closed Tabs")+"\n"+Object(d.a)("$1 click to reopen last closed tab",[Object(d.a)("key","Control")]),__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\Trash.jsx",lineNumber:146}})}}t.a=_},function(e,t,a){"use strict";(function(e){var i=a(88),s=a(62),n=a(142),r=a(1001),o=a(550),l=a(551),c=a(10),d=a(0),u=a.n(d),h=a(29),m=a.n(h),p=a(17),g=a.n(p),b=a(68),f=a(1),_="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubar.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends u.a.PureComponent{constructor(t){super(t),N(this,"acceptEnterId",-1),N(this,"timer",null),N(this,"hasMenu",!1),N(this,"_getMenuItems",e=>s.default.getNamedMenu("menubar",e)),N(this,"_onPrefsChange",()=>{this._setupShortcuts(this.state.items)}),N(this,"_onCommandStoreChange",e=>{switch(e){case"init":this._requestMenu();break;case"menu":this.hasMenu=!0;const e=this._getMenuItems(!1);this.setState({items:e,shortcuts:n.a.getShortcutsForMenuItems(e)});break;case"shortcut":this._setupShortcuts(this.state.items)}}),N(this,"_handleItemActivated",e=>{l.a.show(e,this._getSiblings(),"bottom",this._onMenuVisibilityChanged)}),N(this,"_handleItemEnter",e=>{-1!==this.acceptEnterId&&this.acceptEnterId!==e||(Object(b.a)(m.a.findDOMNode(this))&&this._moveFocus(e,"current",!0),this.setState({highlightedId:e}))}),N(this,"_handleItemLeave",e=>{-1===this.state.openMenuId&&this.setState({highlightedId:-1})}),N(this,"_handleItemBlur",t=>{e.nextTick(()=>{Object(b.a)(m.a.findDOMNode(this))||this.setState({highlightedId:-1})})}),N(this,"_handleLeaveBar",()=>{this.setState({highlightedId:-1}),i.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),N(this,"_handleDoubleClick",e=>{e.preventDefault(),e.stopPropagation()}),N(this,"_changeFocus",()=>{Object(b.a)(m.a.findDOMNode(this))?this._handleLeaveBar():this._moveFocus(this.state.highlightedId,"current",!0)}),N(this,"_moveFocus",(e,t,a)=>{if(!0===a||Object(b.a)(m.a.findDOMNode(this))){const a=this.state.items.map((e,t)=>this.state.shortcuts[t]?t:-1).filter(e=>-1!==e);if(0===a.length)return;if("current"===t){const t=e<0?0:a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let i=a.indexOf(e);i="right"===t?i+1>=a.length?0:i+1:i<=0?a.length-1:i-1,e=a[i]}const i=document.querySelector(`button.menubarItem.menubar[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&this.setState({highlightedId:e},()=>i.focus())}}),N(this,"_handleItemHighlightMissing",e=>{this.setState({highlightedId:e})}),N(this,"_onMenuVisibilityChanged",e=>{-1===e?(this.acceptEnterId=this.state.openMenuId,this.timer=setTimeout(()=>{this.acceptEnterId=-1,this.timer=null},100),Object(b.a)(m.a.findDOMNode(this))?this._moveFocus(this.state.openMenuId,"current",!0):this.setState({highlightedId:-1})):(this.setState({highlightedId:e}),this._moveFocus(e,"current",!1)),this.setState({openMenuId:e}),this._showAccessKeys(!1)}),N(this,"_showAccessKeys",e=>{this.setState({underlineAccessKeys:e})}),N(this,"_setupShortcuts",e=>{this.setState({shortcuts:n.a.getShortcutsForMenuItems(e)})}),N(this,"_activateByAccessKey",e=>{for(let t=0;t<this.state.items.length;t++)if(this.state.shortcuts[t]&&this.state.shortcuts[t].key===e)return this._handleItemActivated(t),!0;return!1}),N(this,"_getSiblings",()=>{const e=this._getMenuItems(!0);return Array.from(document.querySelectorAll("button.menubarItem.menubar")).map((t,a)=>{const i=t.getBoundingClientRect();return{id:parseInt(t.dataset.id),rect:{x:parseInt(i.left),y:parseInt(i.top),width:parseInt(i.width),height:parseInt(i.height)},menu:e[a]}})}),N(this,"renderAll",()=>this.state.items.map((e,t)=>{if(!this.state.shortcuts[t])return null;const a=0===t?this.props.keyAccess:-1,i=t.toString();return u.a.createElement(r.a,{key:i,id:t,keyAccess:a,item:e,shortcut:this.state.shortcuts[t],underlineAccessKeys:this.state.underlineAccessKeys,openMenuId:this.state.openMenuId,highlighted:this.state.highlightedId===t,moveFocus:this._moveFocus,onItemActivated:this._handleItemActivated,onItemEnter:this._handleItemEnter,onItemLeave:this._handleItemLeave,onItemBlur:this._handleItemBlur,onItemHighlightMissing:this._handleItemHighlightMissing,onAccessKey:this._activateByAccessKey,onLeaveBar:this._handleLeaveBar,__source:{fileName:_,lineNumber:282}})})),this.hasMenu=s.default.isNamedMenuAvailable("menubar");const a=this._getMenuItems(!1);this.state={items:a,shortcuts:n.a.getShortcutsForMenuItems(a),openMenuId:-1,highlightedId:-1,underlineAccessKeys:!1}}componentDidMount(){c.a.addListener(f.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),s.default.addChangeListener(this._onCommandStoreChange),this._requestMenu()}componentWillUnmount(){this.timer&&clearTimeout(this.timer),c.a.removeListener(f.kKeyboardShortcutsAltOpensMenu,this._onPrefsChange),s.default.removeChangeListener(this._onCommandStoreChange)}_requestMenu(){this.hasMenu||i.default.requestNamedMenu("menubar")}render(){return u.a.createElement(u.a.Fragment,{__source:{fileName:_,lineNumber:305}},u.a.createElement(o.a,{changeFocus:this._changeFocus,showAccessKeys:this._showAccessKeys,__source:{fileName:_,lineNumber:306}}),u.a.createElement("div",{className:g()({menubar:!0,horizontal:this.props.horizontal}),onDoubleClick:this._handleDoubleClick,tabIndex:"-1",__source:{fileName:_,lineNumber:310}},this.renderAll()))}}t.a=v}).call(this,a(64))},function(e,t,a){"use strict";var i=a(52),s=a(142),n=a(0),r=a.n(n),o=a(17),l=a.n(o),c=a(44),d=a(125),u="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\Menubaritem.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends r.a.PureComponent{constructor(...e){super(...e),h(this,"_handleShortcutChange",(e,t)=>{e&&e.length>0&&(t?i.a.bind(e,this._handleMenuShortcut):i.a.unbind(e,this._handleMenuShortcut))}),h(this,"_getDisplayName",()=>{const e=s.a.getMenuBarString(this.props.item,this.props.shortcut);if(this.props.underlineAccessKeys&&-1!==e.offset){const t=e.offset;return r.a.createElement("span",{__source:{fileName:u,lineNumber:67}},t>0?e.name.substring(0,t):"",r.a.createElement("span",{className:"underlined",__source:{fileName:u,lineNumber:69}},e.name.substring(t,t+1)),e.name.substring(t+1))}return r.a.createElement("span",{__source:{fileName:u,lineNumber:63}},e.name)}),h(this,"_handleMenuShortcut",()=>{this.props.onItemActivated(this.props.id)}),h(this,"_handleKeyDown",e=>{switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":this.props.onItemActivated(this.props.id);break;case"ArrowLeft":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowRight":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":if(-1!==this.props.openMenuId)return;this.props.onLeaveBar();break;default:if(Object(d.c)(e)&&this.props.onAccessKey(e.key))break;return}e.preventDefault(),e.stopPropagation()}),h(this,"_handleMouseDown",e=>{e.button===c.a.kLeft&&c.a.isNoModifierPressed(e)&&this.props.onItemActivated(this.props.id),e.preventDefault(),e.stopPropagation()}),h(this,"_handleMouseEnter",e=>{this.props.onItemEnter(this.props.id)}),h(this,"_handleMouseLeave",e=>{this.props.onItemLeave(this.props.id)}),h(this,"_handleBlur",()=>{this.props.onItemBlur(this.props.id)}),h(this,"_handleFocus",()=>{this.props.highlighted||this.props.onItemHighlightMissing(this.props.id)})}componentDidMount(){this._handleShortcutChange(this.props.shortcut.shortcut,!0)}componentWillUnmount(){this._handleShortcutChange(this.props.shortcut.shortcut,!1)}UNSAFE_componentWillReceiveProps(e){e.shortcut!==this.props.shortcut&&(this._handleShortcutChange(this.props.shortcut.shortcut,!1),this._handleShortcutChange(e.shortcut.shortcut,!0))}render(){return r.a.createElement("button",{"data-id":this.props.id,"data-offset":0,tabIndex:this.props.keyAccess,className:l()({menubarItem:!0,uifocusstop:0===this.props.id,highlighted:this.props.highlighted,menubar:!0}),onBlur:this._handleBlur,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onMouseEnter:this._handleMouseEnter,onMouseLeave:this._handleMouseLeave,onMouseDown:this._handleMouseDown,__source:{fileName:u,lineNumber:142}},this._getDisplayName())}}t.a=m},function(e,t,a){"use strict";(function(e){var i=a(0),s=a(219),n=a(76),r=a(37),o=a(22),l=a(384),c=a(500),d=a(1047),u=a(115),h=a(1003),m=a(558),p=a(282),g=a(1004),b=a(202),f=a(567),_=a(682),N=a(1035),v=a(19),E=a(1031),w=a(52),S=(a(51),a(40)),C=a(79),k=a(110),y=a(97),O=a(92),A=a(12),T=a(9),I=a(57),D=a(42),P=a(10),x=a(1022),M=a(29),L=a.n(M),j=a(234),B=a(545),R=a(1023),F=a(83),U=a(158),W=a(85),H=a(72),V=a(80),G=a(684),K=a(4),z=a(27),Y=a(66),$=a(53),Q=a(108),Z=a(87),q=a(25),X=a(16),J=a(2),ee=a(7),te=a(17),ae=a.n(te),ie=a(84),se=a.n(ie),ne=a(181),re=a(311),oe=a(5),le=a(161),ce=a(36),de=a(1),ue=a(13),he=a(123),me=a(20),pe=a(160),ge="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\WebPageContent.jsx";function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fe={close:"handleOnClose",contentload:"handleContentLoad",contentscreated:"handleOnContentsCreated",createsearch:"handleOnCreateSearch",contentallowed:"handleContentAllowed",contentblocked:"handleContentBlocked",dialog:"handleOnJavascriptDialog",exit:"handleOnProcessExit",findupdate:"handleOnFindUpdate",fullscreen:"handleOnFullscreen",loadabort:"handleLoadAbort",loadcommit:"handleLoadCommit",loadprogress:"handleOnLoadProgress",loadredirect:"handleLoadRedirected",loadstart:"handleLoadStart",loadstop:"handleLoadStop",newwindow:"handleOnNewWindow",pasteandgo:"handleOnPasteAndGo",simpleAction:"handleOnSimpleAction",permissionrequest:"handleOnPermissionRequest",sslstatechanged:"handleOnSSLStateChanged",targeturlchanged:"handleOnTargetURLChanged"},_e=["image/jpeg","image/pjpeg","image/jpg","image/webp","image/png","image/gif","image/bmp","image/vnd.microsoft.icon","image/x-icon","image/x-xbitmap","image/x-png"],Ne=[de.kWebpagesReaderControls,de.kWebpagesReaderStyle];class ve extends i.PureComponent{constructor(t){super(t),be(this,"captureScheduled",!1),be(this,"_updateFocus",!1),be(this,"_localStatus",!1),be(this,"_pageScripts",u.a.getPageScripts(this.props.id)),be(this,"_devtoolsCloseTimerId",0),be(this,"_eventGuard",null),be(this,"_closingTab",!1),be(this,"_onContentScriptStoreChanged",()=>{const e=this._pageScripts;if(this._pageScripts=u.a.getPageScripts(this.props.id),this._pageScripts!==e){if(e.some((e,t)=>e&&!this._pageScripts.get(t)))return void(this.webview&&this.webview.reload());u.a.getContentScripts().then(t=>{const a=t.filter(t=>!e.get(t.get("name"))&&this._pageScripts.get(t.get("name")));this.injectUserContentScripts(a)})}}),be(this,"toggleImageInspector",()=>{A.a.setImageInspector(this.props.id,!this.props.showImageInspector)}),be(this,"checkProcessExitState",()=>{this.props.processexitstate&&"normal"!==this.props.processexitstate&&e.nextTick(()=>A.a.setProcessExitState(this.props.id,void 0))}),be(this,"updateViewUnchangedFlag",(e,t)=>{e.active===t.active&&e.extData.get("tiling")===t.extData.get("tiling")||(this.viewUnchangedFlags={})}),be(this,"isDevtoolsDockedAndActive",()=>"bottom"===this.state.dockingState||"left"===this.state.dockingState||"right"===this.state.dockingState),be(this,"updatePageThumbnailWithActiveWebview",e=>{var t=!1!==T.a.getActivePage().get("incognito");if(this.webview){const a=se()();this.viewUnchangedFlags[a]=!0===this.props.active,setTimeout(()=>{if(me.a.isVivaldiComponent(this.props.url))this.viewUnchangedFlags[a]&&this.webview&&U.a.getPageThumbnail(this.webview,{compact:!0},e=>{this.props.active&&this.viewUnchangedFlags[a]&&e&&A.a.setThumbnail(this.props.id,e)});else{const e={encodeFormat:"jpg",encodeQuality:80,fullPage:!1,width:330,height:270};oe.a.thumbnails.captureTab(this.props.id,e,(e,t)=>{!ee.default.runtime.lastError&&e&&A.a.setThumbnail(this.props.id,t)})}},e);const i=c.a.getQueue(this.props.id);if(!t&&i&&i.get("url")===this.props.url){const e=i.get("id");ee.default.bookmarks.get(e,t=>{if(ee.default.runtime.lastError)console.warn("chrome.bookmarks.get failed:",e,ee.default.runtime.lastError);else{const e=t&&1===t.length?t[0]:null;e&&!e.thumbnail&&this.webview&&U.a.getPageThumbnail(this.webview,{compact:!1},t=>{t&&(this.props.active&&e&&this.viewUnchangedFlags&&this.viewUnchangedFlags[a]?r.a.update(e.id,{thumbnail:t}):console.warn("Cannot update thumbnail as page was not active"))})}}),l.a.remove(this.props.id,e)}}}),be(this,"attachEventHandlers",()=>{Q.a.addChangeListener(this._onWebpageviewStoreChanged),u.a.addChangeListener(this._onContentScriptStoreChanged),oe.a.devtoolsPrivate.onDockingSizesChanged.addListener(this.onDockingSizesChanged),oe.a.devtoolsPrivate.onDockingStateChanged.addListener(this.onDockingStateChanged),oe.a.devtoolsPrivate.onClosed.addListener(this.onDevtoolsClosed),oe.a.devtoolsPrivate.onDevtoolsUndocked.addListener(this.onDevtoolsUndocked),oe.a.tabsPrivate.onTabIsAttached.addListener(this.onWebViewElementIsAttached),oe.a.tabsPrivate.onTabIsDetached.addListener(this.onWebViewElementIsDetached),oe.a.tabsPrivate.onBeforeUnloadDialogClosed.addListener(this.onBeforeUnloadDialogClosed)}),be(this,"removeEventHandlers",()=>{Q.a.removeChangeListener(this._onWebpageviewStoreChanged),u.a.removeChangeListener(this._onContentScriptStoreChanged),oe.a.devtoolsPrivate.onDockingSizesChanged.removeListener(this.onDockingSizesChanged),oe.a.devtoolsPrivate.onDockingStateChanged.removeListener(this.onDockingStateChanged),oe.a.devtoolsPrivate.onClosed.removeListener(this.onDevtoolsClosed),oe.a.devtoolsPrivate.onDevtoolsUndocked.removeListener(this.onDevtoolsUndocked),oe.a.tabsPrivate.onTabIsAttached.removeListener(this.onWebViewElementIsAttached),oe.a.tabsPrivate.onTabIsDetached.removeListener(this.onWebViewElementIsDetached),oe.a.tabsPrivate.onBeforeUnloadDialogClosed.removeListener(this.onBeforeUnloadDialogClosed)}),be(this,"attachWebviewHandlers",()=>{Object.keys(fe).forEach(e=>{this.webview&&this.webview.addEventListener(e,this[fe[e]])})}),be(this,"removeWebviewHandlers",()=>{Object.keys(fe).forEach(e=>{this.webview&&this.webview.removeEventListener(e,this[fe[e]])})}),be(this,"updateNavigationState",(e,t,a,i)=>{const s={canGoBack:!!this.webview&&this.webview.canGoBack(),canGoForward:!!this.webview&&this.webview.canGoForward(),webviewUrl:e,isLoading:t,reason:i,trigger:a};"start"!==a&&A.a.setOrigin(this.props.id,""),k.a.setNavigationState(this.props.id,s)}),be(this,"handleContentLoad",e=>{this.updateNavigationState(e.url,!1,"content"),this.webview&&this.webview.executeScript({code:"window.getComputedStyle(document.body,'')                    .getPropertyValue('background-color');"},e=>{const t=e&&"string"==typeof e[0]?e[0]:P.a.get(de.kWebpagesFallbackBackgroundColor);A.a.setBackgroundColorFallback(this.props.id,t)})}),be(this,"handleLoadCommit",t=>{if(t.isTopLevel){if(this.injectScripts(this.props.id),R.a.resetRssFeeds(this.props.id),me.a.isVivaldiComponent(t.url)&&b.a.setFastForwardUrl(this.props.id,""),this.webview){const t=T.a.getPageById(this.props.id);t&&e.nextTick(()=>b.a.setRewindInfo(this.webview,t))}this.updateNavigationState(t.url,!0,"commit"),this._updateFocus&&(H.a.clearSelection(this.props.id),this.updateFocus(this.props.id,t.url),this._updateFocus=!1)}}),be(this,"handleLoadStart",e=>{if(!e.isTopLevel)return;this.props.extData.get("urlForThumbnail")!==e.url&&A.a.setThumbnail(this.props.id,null);const t=e.url?new URL(e.url).origin:"";k.a.deletePermissions(this.props.id,t),this.updateNavigationState(e.url,!0,"start"),k.a.resetPageHasBlockedContent(this.props.id),this.setState({showStartPage:me.a.isStartPage(e.url)}),this.captureScheduled=!1,this._updateFocus=!0}),be(this,"handleLoadStop",e=>{this.updateNavigationState(e.target.src,!1,"stop"),this.props.extData.get("thumbnail")||this.updatePageThumbnailWithActiveWebview(0),!1===this.captureScheduled&&(this.captureScheduled=!0,this.updatePageThumbnailWithActiveWebview(5e3)),this.props.active||this.props.unread||A.a.setUnread(this.props.id)}),be(this,"handleLoadRedirected",e=>{if(e.isTopLevel){const t=e.newUrl,a=e.oldUrl;A.a.setThumbnail(this.props.id,null),this.captureScheduled=!1,l.a.update(this.props.id,a,t),A.a.setOverrideUrl(this.props.id,t)}}),be(this,"handleContentAllowed",e=>{if("midi-sysex"===e.allowedType||"location"===e.allowedType||"notifications"===e.allowedType){const t=this.props.url?new URL(this.props.url).origin:"";k.a.setPermission(this.props.id,t,e.allowedType,null,!1)}}),be(this,"handleContentBlocked",e=>{if("midi-sysex"===e.blockedType||"location"===e.blockedType){const t=this.props.url?new URL(this.props.url).origin:"";k.a.setPermission(this.props.id,t,e.blockedType,null,!0)}else k.a.setPageHasBlockedContent(this.props.id,e.blockedType)}),be(this,"handleLoadAbort",e=>{e.preventDefault(),e.isTopLevel&&this.updateNavigationState(e.url,!1,"abort",e.reason),this.setState({showStartPage:!0})}),be(this,"handleOnLoadProgress",e=>{if(me.a.isInternalUrl(e.url))return;const t={url:e.url,progress:e.progress,loadedBytes:e.loadedBytes,loadedElements:e.loadedElements,totalElements:e.totalElements};x.a.setProgressState(this.props.id,t)}),be(this,"handleOnFindUpdate",e=>{const t=T.a.getPageById(this.props.id);t&&A.a.setFindResults(t,e)}),be(this,"handleOnFullscreen",e=>{!1===C.a.hasMediaState(this.props.id,"capturing")&&Z.a.onHTML5FullScreen(e.enterFullscreen,e.windowId),this.setState({tabIsFullscreen:e.enterFullscreen})}),be(this,"handleOnClose",()=>{const e=T.a.getPageById(this.props.id);oe.a.tabsPrivate.hasBeforeUnloadOrUnload(this.props.id,t=>{!e||t&&!X.a.isPopup(this.context.vivaldiWindowId)?this._closingTab=!0:A.a.closePage(e)})}),be(this,"handleBlockedPopup",e=>{k.a.addBlockedPopupEvent(this.props.id,e)}),be(this,"injectScripts",Object(he.a)(e=>{this.webview&&this.webview.executeScript({allFrames:!0,code:`window.__vivaldiPageId = ${e};\n             window.__vivaldiContentScriptsInitialized;`,runAt:"document_start"},t=>{ee.default.runtime.lastError&&console.warn("Checking for inject-all-bundle failed: "+(ee.default.runtime.lastError.message||"")),t&&t.some(e=>!e)&&(this.webview&&this.webview.executeScript({file:"inject-root-bundle.js"},()=>{ee.default.runtime.lastError&&console.warn("Injecting inject-root-bundle failed: "+(ee.default.runtime.lastError.message||""))}),P.a.get(de.kWebpagesAllowSelectionInLinks)&&this.webview&&this.webview.executeScript({allFrames:!0,file:"inject-all-bundle.js"},()=>{b.a.initTab(e),ee.default.runtime.lastError&&console.warn("Injecting inject-all-bundle failed: "+(ee.default.runtime.lastError.message||""))}))}),this._pageScripts.isEmpty()||u.a.getContentScripts().then(e=>{const t=e.filter(e=>Boolean(this._pageScripts.get(e.get("name"))));this.injectUserContentScripts(t)})},400)),be(this,"injectUserContentScripts",e=>{(e=>{e.forEach(e=>{const t={code:e.get("code"),allFrames:"script"!==e.get("type"),runAt:"document_start"};"script"===e.get("type")?this.webview&&this.webview.executeScript(t,()=>{ee.default.runtime.lastError}):"style"===e.get("type")&&this.webview&&this.webview.insertCSS(t)})})(e)}),be(this,"openNewPopAsTabOrWindow",e=>{if(P.a.get(de.kPopupsShowInTab))e.window.accept(this.context.vivaldiWindowId+";1");else{const t={left:e.initialLeft,top:e.initialTop,width:e.initialWidth,height:e.initialHeight},a=!1!==T.a.getActivePage().get("incognito"),i={id:e.name,resizable:!0,bounds:t,incognito:a},s=function(t){e.window.accept(t.id+";1")};S.a.showPopupWindow(i,s)}}),be(this,"onNewPopup",e=>{e.targetUrl||(e.targetUrl="about:blank"),e.userGesture?this.openNewPopAsTabOrWindow(e):ee.default.contentSettings.popups.get({primaryUrl:this.props.url},t=>{if(ee.default.runtime.lastError)console.warn("ERROR getting content settings for popups. Original message:\n",ee.default.runtime.lastError.message);else{var a=!0;t&&(a="allow"!==t.setting),!0===a?this.handleBlockedPopup(e):this.openNewPopAsTabOrWindow(e)}})}),be(this,"handleOnNewWindow",e=>{const t=X.a.isPopup(this.context.vivaldiWindowId);let a=this.context.vivaldiWindowId;switch(t&&(a=0),e.windowOpenDisposition){case"current_tab":e.preventDefault(),e.window.accept(a+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(a+";0");break;case"new_foreground_tab":e.preventDefault(),e.window.accept(a+";1");break;case"new_window":e.preventDefault(),A.a.openWindow([],{},t=>{t&&t.id&&e.window.accept(t.id+";1")});break;case"off_the_record":e.preventDefault(),A.a.openWindow(e.targetUrl,{incognito:!0,transition:W.a.LINK},t=>{t&&t.id&&e.window.accept(t.id+";1;I")});break;case"new_popup":e.preventDefault(),this.onNewPopup(e)}}),be(this,"showDialog",e=>{e.webview=this.webview,this.setState({dialogParentElement:this.refs.webpagecontainer,customData:e})}),be(this,"handleOnCloseDialog",()=>{this.setState({dialogParentElement:null})}),be(this,"handleOnJavascriptDialog",e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)}),be(this,"handleOnPermissionRequest",e=>{e.preventDefault();const t=e.url?new URL(e.url).origin:"";switch(e.permission){case"geolocation":case"microphone":case"microphone_and_camera":case"camera":case"notifications":k.a.setPermission(this.props.id,t,e.permission,e.request,null);break;case"loadplugin":k.a.setPermission(this.props.id,t,"flash",e.request,null);break;case"pointerLock":e.request.allow(),e.dialogtype=e.permission,this.showDialog(e);break;case"download":P.a.get(de.kDownloadsStartAutomatically)?(e.request.allow(),P.a.get(de.kDownloadsOpenPanelOnNew)&&D.a.canAutoOpen("downloads")&&I.a.toggleContent("downloads")):(e.dialogtype=e.permission,this.showDialog(e));break;case"media":e.request.allow();break;default:e.dialogtype=e.permission,this.showDialog(e)}}),be(this,"handleOnProcessExit",e=>{A.a.setProcessExitState(this.props.id,e.reason)}),be(this,"handleOnSSLStateChanged",e=>{k.a.setSSLState(this.props.id,e.SSLState,e.issuerstring)}),be(this,"handleOnTargetURLChanged",e=>{const t=Object(ne.a)(e.newUrl);F.a.setStatus(t),this._localStatus=!0}),be(this,"handleOnCreateSearch",e=>{e.dialogtype="createSearch",this.showDialog(e)}),be(this,"handleOnPasteAndGo",e=>{e.preventDefault();const t={ctrlKey:e.modifiers.includes("ctrl"),shiftKey:e.modifiers.includes("shift"),altKey:e.modifiers.includes("alt"),metaKey:!1},a=e.clipBoardText,i=Object(pe.b)(t);"search"===e.pasteTarget&&$.a.doAction("searchPasteAndGo",{clipboardText:a,openOptions:i}),"url"===e.pasteTarget&&$.a.doAction("urlPasteAndGo",{clipboardText:a,openOptions:i})}),be(this,"handleOnSimpleAction",e=>{switch(e.command){case"copyToNote":O.a.createNote({content:e.text,url:e.url});break;case"addAsEvent":S.a.showAddEvent(e.text,e.url);break;case"addActivePageToBookmarks":$.a.doAction("addBookmark");break;case"addUrlToBookmarks":r.a.create({parentId:o.a.getRootNode().id,title:e.text,url:e.url});break;case"addUrlToWebPanel":Y.a.addByUrl(e.url);break;case"copyUrlToClipboard":const t=function(t){t.clipboardData.setData("text/plain",e.url),t.preventDefault()};this.context.document.addEventListener("copy",t),this.context.document.execCommand("copy"),this.context.document.removeEventListener("copy",t);break;case"inspectImageUrl":this._displaysImage()?A.a.setImageInspector(this.props.id,!0):A.a.openURL(e.url,{inCurrent:!1}).then(e=>e&&A.a.setImageInspector(e.id,!0));break;case"useImageAsBackground":_.a.setStartpageBackgroundFromUrl(e.url);break;case"useLocalImageAsBackground":_.a.enableUserDefinedStartpageImage();break;case"validateUrl":const a=z.a.getSync("VALIDATION_URL");A.a.openURL(a.replace("%s",e.url),{inCurrent:!1});break;case"fullscreen":Z.a.toggleFullscreen(this.context.vivaldiWindowId)}}),be(this,"handleOnContentsCreated",()=>{me.a.isVivaldiComponent(this.props.url)||this.injectScripts(this.props.id)}),be(this,"_onWebpageviewStoreChanged",e=>{if(this.props.active)if(e.type===K.a.CLOSE_FIND_IN_PAGE_ACTION)this.webview&&(this.webview.stopFinding("keep"),this.focusWebView(this.props.url));else if(e.type===K.a.PAGE_GO)this.webview&&this.webview.go(e.index);else if(e.type===K.a.PAGE_BACK)this.webview&&this.webview.back();else if(e.type===K.a.PAGE_FORWARD)this.webview&&this.webview.forward();else if(e.type===K.a.PAGE_GET_HISTORY)this.webview&&this.webview.getPageHistory(e.callback);else if(e.type===K.a.PAGE_STOP){const e=y.a.getNavigationInfo(this.props.id);this.webview&&(!e||e&&e.isLoading)&&this.webview.stop()}else if(e.type===K.a.PAGE_RELOAD)this.checkProcessExitState(),ee.default.tabs.reload(this.props.id,{bypassCache:e.bypassCache});else if(e.type===K.a.WEBPAGEVIEW_ACTIONS)switch(e.action){case"focusWebView":this.focusWebView(this.props.url);break;case"pageScrollUp":this.pageScrollUp();break;case"pageScrollDown":this.pageScrollDown();break;case"pageScrollTop":this.pageScrollTop();break;case"pageScrollBottom":this.pageScrollBottom();break;case"print":const e=n.a.getActiveWebView();e===this.webview?oe.a.utilities.print(this.props.id):e&&e.print()}}),be(this,"setFocus",e=>{switch(Object(re.a)(e,this.props.url,this.props.active,this.context.document.activeElement)){case"findInPage":this._displaysImage()||this.focusFindInPage();break;case"content":this.focusWebView(this.props.url)}}),be(this,"focusWebView",e=>{if(me.a.isVivaldiComponent(e)){const e=L.a.findDOMNode(this.refs.internal);if(e instanceof HTMLElement&&!e.contains(this.context.document.activeElement)){const t=e.querySelector('[tabindex="0"]:not(.no-page-focus)');t&&t.focus()}}else this.webview&&this.webview!==this.context.document.activeElement&&this.webview.focus()}),be(this,"pageScrollUp",()=>{oe.a.tabsPrivate.scrollPage(T.a.getActivePage().id,"pageup",0,()=>{ee.default.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(ee.default.runtime.lastError.message||""))})}),be(this,"pageScrollDown",()=>{oe.a.tabsPrivate.scrollPage(T.a.getActivePage().id,"pagedown",0,()=>{ee.default.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(ee.default.runtime.lastError.message||""))})}),be(this,"pageScrollTop",()=>{oe.a.tabsPrivate.scrollPage(T.a.getActivePage().id,"top",0,()=>{ee.default.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(ee.default.runtime.lastError.message||""))})}),be(this,"pageScrollBottom",()=>{oe.a.tabsPrivate.scrollPage(T.a.getActivePage().id,"bottom",0,()=>{ee.default.runtime.lastError&&console.warn("vivaldi.tabsPrivate.scrollPage failed: "+(ee.default.runtime.lastError.message||""))})}),be(this,"onKeyDown",e=>{"Escape"===e.key&&$.a.closeFindInPageToolbar(this.props.id)&&e.preventDefault()}),be(this,"onMouseDown",()=>{const e=T.a.getPageById(this.props.id);e&&!e.active&&A.a.openPage(e.id)}),be(this,"onMouseLeave",()=>{this._localStatus&&(this._localStatus=!1,F.a.clearStatus())}),be(this,"updateDockingSizes_",e=>{oe.a.devtoolsPrivate.getDockingStateSizes(e,e=>{const t=e.hideInspectedContents,a=e.inspectedHeight,i=e.inspectedLeft,s=e.inspectedTop,n=e.inspectedWidth;oe.a.zoom.getVivaldiUIZoom(e=>this.setState({hideInspectedContents:t,viewWidth:n/e,viewHeight:a/e,viewTop:s/e,viewLeft:i/e,disableWebviewEvents:!0},()=>{this._eventGuard&&clearTimeout(this._eventGuard),this._eventGuard=setTimeout(()=>{this.setState({disableWebviewEvents:!1})},300)}))})}),be(this,"onDockingSizesChanged",e=>{e===this.props.id&&this.updateDockingSizes_(e)}),be(this,"onDockingStateChanged",(e,t)=>{e===this.props.id&&this.state.dockingState!==t&&(this.setState({dockingState:t}),A.a.setPageInspected(e,"off"!==t))}),be(this,"onDevtoolsClosed",e=>{e===this.props.id&&(this.setState({dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0}),A.a.setPageInspected(e,!1))}),be(this,"onNewDevtoolsWindowCreated",(e,t)=>{t.contentWindow.vivaldiInspectTabId=e,t.contentWindow.vivaldiWindowId=this.context.vivaldiWindowId,this._devtoolsCloseTimerId&&(clearTimeout(this._devtoolsCloseTimerId),this._devtoolsCloseTimerId=0),t.onClosed.addListener(this.onDevtoolsWindowClosed.bind(this,e))}),be(this,"onDevtoolsWindowClosed",e=>{"undocked"===this.state.dockingState&&(this._devtoolsCloseTimerId=setTimeout(()=>{oe.a.devtoolsPrivate.closeDevtools(e,e=>{})},1e3),A.a.setPageInspected(e,!1))}),be(this,"onDevtoolsUndocked",(e,t,a)=>{if(e===this.props.id){const i={left:a.left,top:a.top,width:a.right-a.left,height:a.bottom-a.top},s={id:"DevToolsApp_"+e.toString(),resizable:!0,state:a.maximized?"maximized":"normal",hidden:!0!==t,alwaysOnTop:a.alwaysOnTop,outerBounds:i};ee.default.app.window.create("devtools.html",s,this.onNewDevtoolsWindowCreated.bind(this,e)),this.setState({dockingState:"undocked"})}}),be(this,"onWebViewElementIsAttached",(e,t)=>{const{id:a,active:i,url:n}=this.props;e===a&&this.refs.pagediv&&(this.webview=this.refs.pagediv.firstChild,this.attachWebviewHandlers(),i&&!me.a.isVivaldiComponent(n)&&s.a.setActiveWebView({current:this}))}),be(this,"onWebViewElementIsDetached",(e,t)=>{e===this.props.id&&(this.removeWebviewHandlers(),s.a.clearIfActive(this),this.webview=null)}),be(this,"onBeforeUnloadDialogClosed",(e,t,a)=>{if(e!==this.context.vivaldiWindowId)return;if(t!==this.props.id)return;!a&&this._closingTab&&(this._closingTab=!1);const i=T.a.getPageById(t);this._closingTab&&i&&A.a.closePage(i)}),be(this,"updateFocus",(e,t)=>{"content"===Object(re.a)(e,t,this.props.active,this.context.document.activeElement)&&this.focusWebView(t)}),be(this,"focusFindInPage",()=>{e.nextTick(()=>$.a.showFindInPageToolbar(this.props.id))}),be(this,"_displaysImage",()=>{const e=T.a.getPageById(this.props.id);if(e){const t=e.get("mimeType");return!!t&&_e.indexOf(t)>-1}return!1}),be(this,"_onFindInPage",(e,t)=>{$.a.findInPage(this.props.id,e,t)}),be(this,"_onFindNextInPage",(e,t,a)=>{$.a.findNextInPage(this.props.id,e,t,a)}),this.viewUnchangedFlags={},this.webview=null,this.state={dialogParentElement:null,draggedLength:null,customData:null,dockingState:"off",viewWidth:"auto",viewHeight:"auto",viewTop:0,viewLeft:0,hideInspectedContents:!1,disableWebviewEvents:!1,showStartPage:!0,tabIsFullscreen:!1}}componentDidMount(){this.props.extData.get("readerMode")&&(u.a.isReaderModeActive(this.props.id)||e.nextTick(()=>j.a.readerableActive(this.props.id))),this.props.discarded?this.props.isVisible&&e.nextTick(()=>{ee.default.tabs.reload(this.props.id)}):this.webview=this.refs.pagediv.firstChild,this.attachWebviewHandlers(),this.attachEventHandlers(),this.props.active&&(this.setFocus(this.props.id),e.nextTick(()=>G.a.setUtilityWebView(this.webview)))}componentDidUpdate(t,a){if(t.url&&this.props.url!==t.url&&Object(ce.l)(this.props.url)&&Object(ce.l)(t.url)){const a=new URL(t.url),i=new URL(this.props.url);a.origin!==i.origin&&e.nextTick(()=>{k.a.deletePermissions(t.id,a.origin),k.a.resetPageHasBlockedContent(t.id)})}if(t.discarded&&!this.props.discarded?(this.webview=this.refs.pagediv.firstChild,this.attachWebviewHandlers()):this.props.discarded&&(this.removeWebviewHandlers(),this.webview=null),this.props.discarded&&this.props.isVisible&&e.nextTick(()=>{ee.default.tabs.reload(this.props.id)}),t.active&&!this.props.active)this.activeElement=this.context.document.activeElement;else if(!t.active&&this.props.active){const e=L.a.findDOMNode(this);e instanceof Node&&e.contains(this.activeElement)?setTimeout(()=>{this.activeElement&&(this.activeElement.focus(),delete this.activeElement)}):this.setFocus(this.props.id)}if(this.webview){const a=t.discarded&&!this.props.discarded,i=(!t.active||a)&&this.props.active;if(i){e.nextTick(()=>G.a.setUtilityWebView(this.webview)),!this.props.extData.get("thumbnail")&&e.nextTick(()=>{this.updatePageThumbnailWithActiveWebview(0)})}const n=t.active&&!this.props.active,r=me.a.isVivaldiComponent(t.url),o=me.a.isVivaldiComponent(this.props.url),l=!r&&o;o||!i&&!r?(n||l)&&(e.nextTick(()=>s.a.clearIfActive(this)),!1===C.a.hasMediaState(this.props.id,"capturing")&&this.webview&&this.webview.setIsFullscreen(!1,!1)):e.nextTick(()=>s.a.setActiveWebView({current:this}))}if(this.props.prefValues[de.kWebpagesReaderStyle]!==t.prefValues[de.kWebpagesReaderStyle]&&u.a.isReaderModeActive(this.props.id)){const e={...this.props.prefValues[de.kWebpagesReaderStyle],...V.a.getThemeColors()};ee.default.tabs.sendMessage(this.props.id,{readerStyle:e})}if(this.updateViewUnchangedFlag(t,this.props),w.a.setDevToolsConflicts(this.isDevtoolsDockedAndActive()),this.props.target&&this.props.target!==t.target){this.checkProcessExitState();const e=this.props.target.get("url"),t=this.props.target.get("transition"),a=this.props.target.get("post"),i=this.props.target.get("headers");e&&this.webview&&this.webview.sendRequest(e,t||W.a.LINK,null!=a,a||"",i||"")}}componentWillUnmount(){this.removeEventHandlers(),oe.a.devtoolsPrivate.closeDevtools(this.props.id,e=>{}),this.removeWebviewHandlers(),this.webview&&(this.webview.setIsFullscreen(!1,!1),A.a.markPageForUndelete(this.props.id,this.webview),e.nextTick(()=>{s.a.clearIfActive(this)}))}render(){const{isReaderable:e}=V.a.getUrlfieldStateFromId(this.props.id),t=this.props.extData.get("readerMode")&&e,a=this._displaysImage(),s="off"!==this.state.dockingState,n="auto"===this.state.viewWidth||0===this.state.viewWidth?"100%":this.state.viewWidth+this.state.viewLeft,r=0!==this.state.viewWidth,o=0!==this.state.viewHeight,l=C.a.hasMediaState(this.props.id,"capturing"),c={visibility:l||this.props.isVisible?"visible":"hidden",zIndex:this.props.isVisible?"initial":"-1",backgroundColor:this.props.staleContentBackgroundColor};if(this.state.tabIsFullscreen&&l){const e=1920,t=1080,a=this.props.contentWidth/e;c.transform=`scale(${a})`,c.left=(this.props.contentWidth-e)/2,c.top=(this.props.contentHeight-t)/2,c.width=e,c.height=t,c.position="absolute"}const u=Number(this.props.id),b=T.a.getPageById(this.props.id);if(!b)return null;const _={active:this.props.active,internal:me.a.isVivaldiComponent(this.props.url),tiled:Object(le.c)(this.props.id),visible:this.props.isVisible,webpageview:!0,pagefocusstop:this.props.isVisible};return i.createElement(p.a,{__source:{fileName:ge,lineNumber:1676}},i.createElement("div",{className:ae()(_),ref:"webpageview",style:c,"data-id":this.props.id,tabIndex:"-1",onKeyDown:this.onKeyDown,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,__source:{fileName:ge,lineNumber:1677}},t&&this.props.prefValues[de.kWebpagesReaderControls]&&!(s&&"undocked"!==this.state.dockingState)&&i.createElement(B.a,{prefs:!1,filter:"",__source:{fileName:ge,lineNumber:1690}}),!a&&!me.a.isNotesManager(this.props.url)&&i.createElement(f.a,{pageId:this.props.id,onFindInPage:this._onFindInPage,onFindNextInPage:this._onFindNextInPage,__source:{fileName:ge,lineNumber:1694}}),i.createElement(d.a,{tabId:u,__source:{fileName:ge,lineNumber:1699}}),i.createElement(g.a,{url:this.props.url,__source:{fileName:ge,lineNumber:1701}}),i.createElement("div",{ref:"webpagecontainer",className:"row-wrapper",__source:{fileName:ge,lineNumber:1703}},i.createElement("div",{className:"devtools-container",__source:{fileName:ge,lineNumber:1705}},s&&i.createElement(h.a,{active:this.props.active,tabId:u,dockingState:this.state.dockingState,__source:{fileName:ge,lineNumber:1707}}),i.createElement("div",{ref:"pagediv",className:"webpage",style:s?{top:this.state.viewTop,left:this.state.viewLeft,width:r?this.state.viewWidth:"none",height:o?this.state.viewHeight:"none",pointerEvents:this.state.disableWebviewEvents?"none":null}:null,dangerouslySetInnerHTML:{__html:this.props.discarded?"":`<webview\n                    id="${u}"\n                    partition="persist:storage"\n                    tab_id=${u} />`},__source:{fileName:ge,lineNumber:1713}}),i.createElement(E.a,{ref:"internal",page:b,isVisible:this.props.isVisible&&this.state.showStartPage,updatePageThumbnailWithActiveWebview:this.updatePageThumbnailWithActiveWebview,__source:{fileName:ge,lineNumber:1731}}),a&&!this.props.showImageInspector&&i.createElement("button",{className:"inspector",title:Object(J.a)("Image Properties"),style:{left:n},onClick:this.toggleImageInspector,dangerouslySetInnerHTML:{__html:ue.ac},__source:{fileName:ge,lineNumber:1739}})),a&&i.createElement(N.a,{url:this.props.url,open:this.props.showImageInspector,toggleImageInspector:this.toggleImageInspector,__source:{fileName:ge,lineNumber:1749}}),this.props.active&&this.state.dialogParentElement&&this.state.customData&&i.createElement(m.a,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:ge,lineNumber:1759}}))))}}be(ve,"contextType",q.a),t.a=Object(v.a)(ve,Ne)}).call(this,a(64))},function(e,t,a){"use strict";var i=a(0),s=a(558),n="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\devtools\\devTools.jsx";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={dialog:"handleOnJavascriptDialog"};class l extends i.PureComponent{constructor(e){super(e),r(this,"handleOnJavascriptDialog",e=>{e.preventDefault(),e.dialogtype="javascript",this.showDialog(e)}),r(this,"showDialog",e=>{e.webview=this.webview,this.setState({dialogParentElement:this.refs.devTools,customData:e})}),r(this,"handleOnCloseDialog",()=>{this.setState({dialogParentElement:null})}),r(this,"attachWebviewHandlers",()=>{Object.keys(o).forEach(e=>{this.webview&&this.webview.addEventListener(e,this[o[e]])})}),r(this,"removeWebviewHandlers",()=>{Object.keys(o).forEach(e=>{this.webview&&this.webview.removeEventListener(e,this[o[e]])})}),this.webview=null,this.state={dialogParentElement:null,customData:null}}componentDidMount(){this.webview=this.refs.webviewdiv?this.refs.webviewdiv.firstChild:null,this.attachWebviewHandlers()}componentWillUnmount(){this.removeWebviewHandlers()}render(){return"off"!==this.props.dockingState?i.createElement("div",{__source:{fileName:n,lineNumber:89}},i.createElement("section",{ref:"devTools",className:"devtools-content",__source:{fileName:n,lineNumber:90}},i.createElement("div",{ref:"webviewdiv",dangerouslySetInnerHTML:{__html:`<webview name="${String("vivaldi-devtools-"+this.props.dockingState)}"\n                partition="persist:storage"\n                inspect_tab_id="${String(this.props.tabId)}" />`},__source:{fileName:n,lineNumber:93}})),this.props.active&&this.state.dialogParentElement&&this.state.customData&&i.createElement(s.a,{customData:this.state.customData,closeDialog:this.handleOnCloseDialog,__source:{fileName:n,lineNumber:104}})):null}}t.a=l},function(e,t,a){"use strict";var i=a(12),s=a(8),n=a(10),r=a(0),o=a.n(r),l=a(2),c=a(13),d=a(1),u="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionPageBanner.jsx";function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends o.a.PureComponent{constructor(e,t){super(e),h(this,"onGoClicked",()=>{i.a.openURL("https://vvld.in/chrome-web-store")}),h(this,"onCloseClicked",()=>{this.setState({show:!1}),s.a.set(d.kShowExtensionsBanner,!1)}),this.state={show:n.a.get(d.kShowExtensionsBanner)}}render(){return!this.state.show||this.props.url.indexOf("chrome://extensions")<0?null:o.a.createElement("div",{className:"vivaldi-extension-banner",__source:{fileName:u,lineNumber:46}},o.a.createElement("label",{__source:{fileName:u,lineNumber:47}},Object(l.a)("You can install any extension from the Chrome Web Store directly to Vivaldi. Just open the web store and click 'Add to Chrome' on your extension of choice.")),o.a.createElement("div",{className:"controls",__source:{fileName:u,lineNumber:48}},o.a.createElement("input",{type:"button",value:Object(l.a)("Chrome Web Store"),title:Object(l.a)("Open Chrome Web Store"),onClick:this.onGoClicked,__source:{fileName:u,lineNumber:49}}),o.a.createElement("span",{className:"close",value:"close",title:Object(l.a)("Close"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:c.L},__source:{fileName:u,lineNumber:52}})))}}t.a=m},,,,,,,,,,,,function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return x}));var i=a(0),s=a(553),n=a(49),r=a(1017),o=a(532),l=a(533),c=a(12),d=a(9),u=a(8),h=a(10),m=a(170),p=a(131),g=a(32),b=a(25),f=a(2),_=a(7),N=a(17),v=a.n(N),E=a(5),w=a(534),S=a(105),C=a(183),k=a(235),y=a(13),O=a(1),A="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManager.jsx";function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const I=[{text:Object(f.a)("Title"),value:"title",fullScreenTitle:Object(f.a)("Sort by title"),width:300,visible:!0,key:!0},{text:Object(f.a)("Content"),value:"content",icon:y.Ib,fullScreenTitle:Object(f.a)("Sort by content"),width:300,visible:!1},{text:Object(f.a)("Address"),value:"url",icon:y.o,fullScreenTitle:Object(f.a)("Sort by address"),width:300,visible:!0},{text:Object(f.a)("Date Created"),value:"dateAdded",icon:y.p,fullScreenTitle:Object(f.a)("Sort by creation date"),width:120,visible:!0},{text:Object(f.a)("Attachments"),value:"attachments",icon:y.n,fullScreenTitle:Object(f.a)("Sort by attachments"),width:60,visible:!0}],D=Object(C.a)(P,n.a,{trailing:!0,leading:!1});function P({id:e,changes:t}){return new Promise((a,i)=>{E.a.notes.update(e,t,()=>_.default.runtime.lastError?i(_.default.runtime.lastError):a())})}class x extends i.PureComponent{constructor(t){super(t),T(this,"refBody",i.createRef()),T(this,"_tree",i.createRef()),T(this,"_onPageStoreChange",()=>{d.a.getActivePage().id!==this.props.pageId?this.refBody.current&&e.nextTick(this.refBody.current.clearActiveWebViews):e.nextTick(()=>this.refBody.current&&this.refBody.current.setActiveWebView())}),T(this,"_onStoreChange",(t,a)=>{switch(t){case"added":{const t=n.b.getNodeById(a);return this.setState({note:t}),void(t&&!n.b.isSeparator(t)&&e.nextTick(()=>{this._tree.current&&this._tree.current.selectById(a)}))}case"changed":{if(!this.state.note||this.state.note.id!==a)return;const e=n.b.getNodeById(a),t=this.refBody.current;if(t&&t.state.visualMode&&t.hasFocus())return;return this.setState({note:e}),!t||t.state.visualMode||t.hasFocus()||t&&t.onMarkdownContentLoad(),void(t&&t.onRichContentLoad())}}}),T(this,"sortComparator",(e,t)=>{if(e.trash)return 1;if(t.trash)return-1;const{sortOrder:a,sortField:i}=this.state.sorting;return"title"===i?this.sortByTitle(e,t,a):g.a.getDefaultComparator(a,i)(e,t)}),T(this,"sortByTitle",(e,t,a)=>{if(a<=g.a.NO_SORTING)return 0;const i=e.title||e.content,s=t.title||t.content;return i||s?i?s?a===g.a.ASCENDING_SORT?i.toLowerCase().localeCompare(s.toLowerCase()):s.toLowerCase().localeCompare(i.toLowerCase()):a===g.a.ASCENDING_SORT?-1:1:a===g.a.ASCENDING_SORT?1:-1:0}),T(this,"onSortChange",(e,t)=>{this.setState(a=>({sorting:{...a.sorting,sortOrder:e,sortField:t}})),u.a.set(O.kNotesManagerSorting,{sortOrder:e,sortField:t})}),T(this,"onUpdateRow",e=>{this.setState({columns:e})}),T(this,"onSaveRow",()=>{Object(S.a)(this.state.columns,"horizontal"===this.state.editorLayout?"notes":"notes_vertical")}),T(this,"onItemCreated",()=>{const t=this.state.note&&n.b.isFolder(this.state.note);this.refBody.current&&!t&&this.refBody.current.focus(),t&&e.nextTick(()=>{this._tree.current&&this._tree.current.refs.treeList.startInlineEditForSelectedItem()})}),T(this,"onItemSelected",e=>{this.setState({note:e,markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0})}),T(this,"handleFilterChange",e=>{this.setState({filter:e})}),T(this,"onAddNote",()=>{h.a.get(O.kNotesManagerShowMarkdown)&&this.refBody.current&&this.refBody.current.setVisualMode(!1),this.setState({filter:""}),this._tree.current&&this._tree.current.onAddNote()}),T(this,"onAddFolder",()=>{this.setState({filter:""}),this._tree.current&&this._tree.current.onAddFolder()}),T(this,"onDeleteSelectedItems",()=>{this._tree.current&&this._tree.current.deleteSelectedItems()}),T(this,"toggleFullEditor",()=>{const{innerWidth:e,innerHeight:t}=this.context;this.setState(a=>{const i="vertical"===a.editorLayout?O.kNotesManagerTreeWidth:O.kNotesManagerTreeHeight,s=Math.round(0===a.treeViewSize?("vertical"===a.editorLayout?e:t)/3:0);return u.a.set(i,s),{treeViewSize:s}})}),T(this,"onSlidebarPosition",(e,t)=>{this.setState(a=>"vertical"===a.editorLayout?{treeViewSize:Math.max(a.treeViewSize+e,0)}:{treeViewSize:Math.max(a.treeViewSize+t,0)})}),T(this,"onSlidebarStop",()=>{this.setState(e=>{const t="horizontal"===e.editorLayout?O.kNotesManagerTreeHeight:O.kNotesManagerTreeWidth;let a=e.treeViewSize;return a<=60&&(a=0),u.a.set(t,a),{treeViewSize:a}})}),T(this,"updateNoteContent",(e,t)=>{this.setState(t=>t.note?{note:{...t.note,content:e}}:null,t),this.state.note&&D({id:this.state.note.id,changes:{content:e}})}),T(this,"onKeyUp",e=>{const t=e.key.toLowerCase();if(e.ctrlKey)switch(t){case"f":this.refBody.current&&this.refBody.current.focusFindInPage();break;default:return}else"f3"===t&&this.refBody.current&&this.refBody.current.focusFindInPage()}),T(this,"onSaveLink",e=>{const{note:t}=this.state;t&&P({id:t.id,changes:{url:e}}),this.setState({editLinkModal:!1})}),T(this,"onCancelEditLink",()=>this.setState({editLinkModal:!1})),T(this,"onEditLink",()=>this.setState({editLinkModal:!0})),T(this,"toggleManagerLayout",()=>this.setState(e=>{const t="horizontal"===e.editorLayout?"vertical":"horizontal",a="horizontal"===t?h.a.get(O.kNotesManagerTreeHeight):h.a.get(O.kNotesManagerTreeWidth),i="horizontal"===t?"notes":"notes_vertical";return u.a.set(O.kNotesManagerLayout,t),{editorLayout:t,treeViewSize:a,columns:Object(S.d)()[i]||Object(S.c)(I)}}));const a=h.a.get(O.kNotesManagerSorting),s=h.a.get(O.kNotesManagerLayout),r="horizontal"===s?"notes":"notes_vertical";this.state={filter:"",note:n.b.getNodeById(this.props.id),markdownScrollPosition:0,editorScrollPosition:0,isAttachmentPopupOpen:!1,editorCursorPosition:0,editorLayout:s,editLinkModal:!1,treeViewSize:"vertical"===s?h.a.get(O.kNotesManagerTreeWidth):h.a.get(O.kNotesManagerTreeHeight),sorting:{sortOrder:a.sortOrder,sortField:a.sortField,comparator:this.sortComparator},columns:Object(S.d)()[r]||Object(S.c)(I)}}componentDidMount(){d.a.addChangeListener(this._onPageStoreChange),n.b.addChangeListener(this._onStoreChange),this.props.id&&"-1"!==this.props.id&&e.nextTick(()=>{this._tree.current&&this._tree.current.selectById(this.props.id),this.refBody.current&&this.refBody.current.setActiveWebView()})}componentDidUpdate(t,a){e.nextTick(()=>{if(this.state.note){const e=Object(k.b)(this.state.note);c.a.setTitle(this.props.pageId,e),this.refBody.current&&this.refBody.current.setActiveWebView()}})}componentWillUnmount(){d.a.removeChangeListener(this._onPageStoreChange),n.b.removeChangeListener(this._onStoreChange)}render(){const{note:e,editorLayout:t}=this.state;return i.createElement("div",{className:v()({"NotesManager manager":!0,"NotesManager--Vertical":"vertical"===t}),onKeyUp:this.onKeyUp,__source:{fileName:A,lineNumber:469}},this.state.editLinkModal&&i.createElement(s.a,{onCreateLink:this.onSaveLink,onCancelCreateLink:this.onCancelEditLink,link:e?e.url:"",useAddress:!0,__source:{fileName:A,lineNumber:476}}),i.createElement("div",{className:v()({"NotesManager-Tree":!0,"NotesManager-Tree--Collapsed":0===this.state.treeViewSize}),style:{flexBasis:this.state.treeViewSize},__source:{fileName:A,lineNumber:483}},i.createElement(w.a,{filter:this.state.filter,onFilterValueChange:this.handleFilterChange,onAddNote:this.onAddNote,onAddFolder:this.onAddFolder,onDeleteSelectedItems:this.onDeleteSelectedItems,onSetLayout:this.toggleManagerLayout,editorLayout:t,isAddNoteDisabled:!1,isDeleteDisabled:!this.state.note,__source:{fileName:A,lineNumber:490}}),i.createElement("div",{className:"NotesManager-Tree-Container",__source:{fileName:A,lineNumber:502}},i.createElement(p.a,{key:this.state.editorLayout,fields:I,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:h.a.get(O.kKeyboardTabToAll),manualSorting:!0,__source:{fileName:A,lineNumber:503}}),i.createElement(o.a,{ref:this._tree,filter:this.state.filter,sorting:this.state.sorting,onItemSelected:Object(C.a)(this.onItemSelected,150),onCreated:this.onItemCreated,editLink:this.onEditLink,columns:this.state.columns,noteId:this.state.note?this.state.note.id:"-1",pageId:this.props.pageId,fullView:!0,__source:{fileName:A,lineNumber:516}}))),n.b.hasNotes()?i.createElement("div",{className:"NotesManager-Note",__source:{fileName:A,lineNumber:534}},i.createElement(m.a,{onSlidebarPosition:this.onSlidebarPosition,onStop:this.onSlidebarStop,onDoubleClick:this.toggleFullEditor,returnOffset:!0,position:"vertical"===t?"right":"bottom",__source:{fileName:A,lineNumber:535}}),i.createElement(r.a,{ref:this.refBody,inFullView:this.state.treeViewSize>0,note:this.state.note,pageId:this.props.pageId,isFolder:!!e&&n.b.isFolder(e),toggleFullEditor:this.toggleFullEditor,updateNoteContent:this.updateNoteContent,__source:{fileName:A,lineNumber:543}})):i.createElement(l.a,{onAddNote:this.onAddNote,__source:{fileName:A,lineNumber:532}}))}}T(x,"contextType",b.a)}).call(this,a(64))},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return w}));var i=a(0),s=a(1018),n=a(219),r=a(240),o=a(675),l=a(8),c=a(10),d=a(676),u=a(1019),h=a(53),m=a(2),p=a(455),g=a(235),b=a(1),f=a(449),_=a(435),N=a(184),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesManagerEditor.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends i.Component{constructor(...t){super(...t),E(this,"refMarkdownEditor",i.createRef()),E(this,"refVisualEditor",i.createRef()),E(this,"refToolbar",i.createRef()),E(this,"markdownFormatter",new r.a),E(this,"turndownService",Object(u.a)({headingStyle:"atx",codeBlockStyle:"fenced"})),E(this,"state",{visualMode:!c.a.get(b.kNotesManagerShowMarkdown)}),E(this,"focus",()=>{this.state.visualMode&&this.refVisualEditor.current&&this.refVisualEditor.current.webview?this.refVisualEditor.current.webview.focus():this.refMarkdownEditor.current&&this.refMarkdownEditor.current.focus()}),E(this,"hasFocus",()=>this.state.visualMode&&this.refVisualEditor.current?this.refVisualEditor.current.hasFocus():!!this.refMarkdownEditor.current&&this.refMarkdownEditor.current.hasFocus()),E(this,"handleAttachmentMarkdown",async e=>{this.refVisualEditor.current&&this.props.note&&this.refVisualEditor.current.execCommand("insertImage",`chrome://vivaldi-data/notes-attachment/${this.props.note.id}/${e}`)}),E(this,"onHtmlChange",()=>{if(!this.refVisualEditor.current)throw new Error("VisualEditor: Building body parts after body is gone");return this.refVisualEditor.current.getContentAsBodyParts().then(e=>{if("html"===e[0].type){const{blobFreeHTML:t}=Object(f.c)(e[0].content),a=this.turndownService.turndown(t);this.props.updateNoteContent(a,()=>{this.refMarkdownEditor&&this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setContent(a)})}})}),E(this,"onMarkDownChange",async()=>{if(!this.refMarkdownEditor.current)throw new Error("MarkdownEditor: Building body parts after body is gone");const e=await this.refMarkdownEditor.current.getContentAsBodyParts();if("text"!==e[0].type)return;const t=e[0].content;this.props.updateNoteContent(t,()=>{})}),E(this,"setZoomLevel",()=>{const e=N.a.getState().notesZoom;this.refVisualEditor.current&&this.refVisualEditor.current.setZoomLevel(e),this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setZoomLevel(e)}),E(this,"onRichContentLoad",()=>{const{note:t}=this.props;if(t&&t.content){const a=this.markdownFormatter.getRawMarkup(t.content||"");e.nextTick(()=>{this.refVisualEditor.current&&this.refVisualEditor.current.setContent(a,!1),this.setZoomLevel()})}}),E(this,"onMarkdownContentLoad",()=>{const{note:t}=this.props;t&&t.content&&e.nextTick(()=>{this.refMarkdownEditor.current&&this.refMarkdownEditor.current.setContent(t.content||""),this.setZoomLevel()})}),E(this,"onStylingButtonClicked",e=>{this.state.visualMode?this.refVisualEditor.current&&this.refVisualEditor.current.onClick(e):this.refMarkdownEditor.current&&this.refMarkdownEditor.current.onClick(e)}),E(this,"onParagraphFormatChange",(e,t)=>{this.state.visualMode?this.refVisualEditor.current&&this.refVisualEditor.current.onChange(e,t):this.refMarkdownEditor.current&&this.refMarkdownEditor.current.onChange(e,t)}),E(this,"onCreateLink",e=>{const t=this.state.visualMode?this.refVisualEditor.current:this.refMarkdownEditor.current;t&&(""===e?t.execCommand("unlink"):"https://"!==e&&t.execCommand("createLink",e),t.focus())}),E(this,"onCancelCreateLink",()=>{this.focus()}),E(this,"handleLinkEvent",(e,t)=>{const a=this.refToolbar.current;if(!a)return;const{link:i,anchor:s}=a.state;switch(e){case"linkupdate":a.updateLinkState(t||"");break;case"createLink":case"editLink":a.showCreateLinkModal();break;case"copyLink":break;case"unlink":(i||s)&&this.refVisualEditor.current&&this.refVisualEditor.current.unlink();break;case"createLinkClicked":(i||s)&&this.refVisualEditor.current&&this.refVisualEditor.current.selectSurrounding(),a.showCreateLinkModal()}}),E(this,"focusFindInPage",()=>{e.nextTick(()=>h.a.showFindInPageToolbar(this.props.pageId))}),E(this,"setActiveWebView",()=>{this.clearActiveWebViews(),this.state.visualMode&&this.refVisualEditor?n.a.setActiveWebView(this.refVisualEditor):this.refMarkdownEditor&&n.a.setActiveWebView(this.refMarkdownEditor)}),E(this,"clearActiveWebViews",()=>{this.refVisualEditor.current&&n.a.clearIfActive(this.refVisualEditor.current),this.refMarkdownEditor.current&&n.a.clearIfActive(this.refMarkdownEditor.current)}),E(this,"setVisualMode",e=>this.setState({visualMode:e},()=>{this.setActiveWebView(),this.onRichContentLoad(),l.a.set(b.kNotesManagerShowMarkdown,!this.state.visualMode)})),E(this,"updateDropdownAndColorState",()=>{const e=this.refVisualEditor.current&&this.refVisualEditor.current.webview;e&&this.state.visualMode&&e&&e.executeScript({code:"['formatBlock'].map(\n         command => document.queryCommandValue(command));"},e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])){const[t]=e[0],a=""===t||"div"===t?"p":t;this.refToolbar.current&&this.refToolbar.current.updateButtonState(void 0,a)}})}),E(this,"updateButtonState",()=>{const e=this.refToolbar.current;if(e)if(this.state.visualMode){const t=this.refVisualEditor.current&&this.refVisualEditor.current.webview;if(!t)return;const a='"'+p.b.reduce((e,t)=>e.concat(Object.keys(t)),[]).join('","')+'"';t&&t.executeScript({code:`[${a}].map(command => document.queryCommandState(command));`},t=>{const a=p.b.reduce((e,t)=>e.concat(Object.keys(t)),[]).indexOf("createLink"),i=t&&t[0]||[];i[a]=!!e.state.anchor,e.updateButtonState(i)})}else{const t=this.refMarkdownEditor?this.refMarkdownEditor.current:null;if(!t)return;const a=p.b.flatMap(e=>Object.keys(e)).map(e=>t.state.caretState[e]).filter(_.a),{formatBlock:i}=t.state.caretState;e.updateButtonState(a,i)}})}componentDidMount(){this.turndownService.use(s.a),this.turndownService.addRule("strikethrough",{filter:["del","s","strike"],replacement:e=>"~~"+e+"~~"}),this.turndownService.addRule("mark",{filter:["mark"],replacement:e=>"=="+e+"=="}),this.turndownService.addRule("sup",{filter:["sup"],replacement:e=>"^"+e+"^"}),this.turndownService.addRule("sub",{filter:["sub"],replacement:e=>"~"+e+"~"}),this.turndownService.addRule("preformatted",{filter:["pre"],replacement:function(e){return"\n```\n"+e+"\n```\n"}}),this.turndownService.addRule("listItem",{filter:"li",replacement:function(e,t,a){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");let i=a.bulletListMarker+" ",s=t.parentNode;if("OL"===s.nodeName){const e=s.getAttribute("start"),a=Array.prototype.indexOf.call(s.children,t);i=(e?Number(e)+a:a+1)+". "}let n=-1;for(;s&&("OL"===s.nodeName||"UL"===s.nodeName);)n+=1,s=s.parentNode;return"    ".repeat(n)+i+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),this.refVisualEditor.current&&this.refVisualEditor.current.focus(),this.onRichContentLoad()}render(){const{note:e}=this.props,t=e?e.id:"-1",a=e&&e.attachments?e.attachments:[];return i.createElement(i.Fragment,null,i.createElement(p.a,{ref:this.refToolbar,noteId:e?e.id:void 0,pageId:this.props.pageId,attachments:a,disabled:!e||this.props.isFolder,inFullView:this.props.inFullView,visualMode:this.state.visualMode,handleAttachmentMarkdown:this.handleAttachmentMarkdown,onCreateLink:this.onCreateLink,onCancelCreateLink:this.onCancelCreateLink,onParagraphFormatChange:this.onParagraphFormatChange,onStylingButtonClicked:this.onStylingButtonClicked,setVisualMode:this.setVisualMode,toggleFullEditor:this.props.toggleFullEditor,__source:{fileName:v,lineNumber:394}}),i.createElement("div",{className:"NotesManager-Editor",__source:{fileName:v,lineNumber:410}},i.createElement("div",{className:"editor-html",__source:{fileName:v,lineNumber:411}},i.createElement(d.a,{ref:this.refVisualEditor,key:t,onChange:this.onHtmlChange,onContentLoad:this.onRichContentLoad,focusPreviousElement:()=>{},isNote:!0,hidden:!this.state.visualMode,disabled:!e||this.props.isFolder,updateDropdownAndColorState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,__source:{fileName:v,lineNumber:412}})),i.createElement(o.a,{ref:this.refMarkdownEditor,key:`md${t}`,onChange:this.onMarkDownChange,onContentLoad:this.onMarkdownContentLoad,hidden:this.state.visualMode,disabled:this.state.visualMode||!e||this.props.isFolder,updateDropdownState:this.updateDropdownAndColorState,updateButtonState:this.updateButtonState,handleLinkEvent:this.handleLinkEvent,__source:{fileName:v,lineNumber:427}})),e&&i.createElement("footer",{className:"NotesManager-Footer",__source:{fileName:v,lineNumber:441}},i.createElement("div",{className:"NotesManager-WordCount",__source:{fileName:v,lineNumber:442}},Object(m.a)("$1 word","$1 words",[Object(g.d)(e)])+", "+Object(m.a)("$1 character","$1 characters",[Object(g.a)(e)]))))}}}).call(this,a(64))},,,,function(e,t,a){"use strict";(function(e){var i=a(0),s=a(39),n=a(37),r=a(22),o=a(40),l=a(12),c=a(554),d=a(83),u=a(211),h=a(158),m=a(85),p=a(25),g=a(2),b=a(17),f=a.n(b),_=a(60),N=a(6),v=a(44),E=a(5),w=a(36),S=a(13),C=a(1),k=a(20),y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDial.jsx";function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const A=new Set;class T extends i.PureComponent{constructor(t){super(t),O(this,"_customThumbnail",!1),O(this,"handleRemoveDial",()=>{n.a.removeWithPromise([this.props.node.id])}),O(this,"handleCutDial",()=>{const{document:e}=this.context;e.addEventListener("cut",this.onCut),e.execCommand("cut"),e.removeEventListener("cut",this.onCut)}),O(this,"handleCopyDial",()=>{const{document:e}=this.context;e.addEventListener("copy",this.onCopy),e.execCommand("copy"),e.removeEventListener("copy",this.onCopy)}),O(this,"handlePasteDial",()=>{const{document:e}=this.context;e.addEventListener("paste",this.onPaste),e.execCommand("paste"),e.removeEventListener("paste",this.onPaste)}),O(this,"handleRename",()=>{this.refs.title.enableEditing()}),O(this,"onRenameFinished",t=>{t?e.nextTick(()=>{this.props.moveFocus("add","current",!1)}):this.props.moveFocus(this.props.node.id,"current",!1)}),O(this,"handleEdit",()=>{o.a.showBookmarkDialog({mode:"edit",id:this.props.node.id,index:-1})}),O(this,"handleUpdateThumbnail",()=>{this.props.node.url&&h.a.updateBookmark(this.props.node)}),O(this,"handleSetCustomThumbnail",()=>{E.a.utilities.selectLocalImage({title:Object(g.a)("Select Custom Image"),thumbnailBookmarkId:this.props.node.id})}),O(this,"handleClearCustomThumbnail",()=>{n.a.update(this.props.node.id,{thumbnail:""})}),O(this,"onThumbnailImageLoadError",e=>{e&&!Object(w.i)(e)&&E.a.bookmarksPrivate.isCustomThumbnail(this.props.node.id,t=>{e===this.props.node.thumbnail&&(t||A.has(e)||(A.add(e),h.a.updateBookmark(this.props.node)))})}),O(this,"openSpeedDialNodeHandler",e=>{const t=e.ctrlKey;let a=!1,i=!1;if(e.shiftKey&&!e.altKey&&t)return void l.a.openWindow(this.props.node.url,{incognito:!1,transition:m.a.AUTO_BOOKMARK});const s="number"==typeof e.button?e.button:v.a.kNone;if(!e.shiftKey||e.altKey||t)if(e.shiftKey||e.altKey||!t){if(s===v.a.kCenter)a=!0,i=!0,e.preventDefault();else if(v.a.isContextMenuButton(s)||v.a.isNavigationButton(s))return}else a=!0,i=!0;else a=!0;this.openSpeedDialNode(this.props.node,{openInBackground:i,openInNewTab:a}),d.a.clearStatus()}),O(this,"openSpeedDialNode",(e,t)=>{this.props.openSpeedDialNode(e,t)}),O(this,"handlePointerEnter",()=>{const e=this.props.node.children?Object(g.a)("$1 Folder",[this.props.node.title]):k.a.getHoverUrl(r.a.getUrlByNode(this.props.node));d.a.setStatus(e)}),O(this,"handlePointerLeave",()=>{d.a.clearStatus()}),O(this,"dialPointerDownHandler",e=>{this.props.onPointerDown(this.props.node,e)}),O(this,"pointerDownHandler",e=>{e.button,v.a.kCenter,e.button!==v.a.kLeft&&e.preventDefault(),E.a.bookmarksPrivate.isCustomThumbnail(this.props.node.id,e=>{this._customThumbnail=e})}),O(this,"pointerUpHandler",e=>{this.openSpeedDialNodeHandler(e),this.focusedElement&&setTimeout(()=>{this.focusedElement&&this.focusedElement.focus(),this.focusedElement=null},1)}),O(this,"keyDownHandler",e=>{switch(e.key){case" ":case"Enter":this.openSpeedDialNodeHandler(e);break;case"F2":this.handleRename();break;case"ArrowLeft":if(!this.props.moveFocus(this.props.node.id,"left",!1))return;break;case"ArrowRight":if(!this.props.moveFocus(this.props.node.id,"right",!1))return;break;case"ArrowUp":if(!this.props.moveFocus(this.props.node.id,"up",!1))return;break;case"ArrowDown":if(!this.props.moveFocus(this.props.node.id,"down",!1))return;break;default:return}e.preventDefault(),e.stopPropagation()}),O(this,"cancelEvent",e=>{e.preventDefault(),e.stopPropagation()}),O(this,"getContextMenuItems",e=>[{handler:this.openSpeedDialNode.bind(this,e,{openInNewTab:!0}),visible:this.isBookmark(),...Object(N.a)("Open in New Tab")},{handler:this.openSpeedDialNode.bind(this,e,{openInNewTab:!0,openInBackground:!0}),visible:this.isBookmark(),...Object(N.a)("Open in Background Tab")},{handler:()=>this.openSpeedDialNode(e),visible:this.isBookmark(),...Object(N.a)("Open")},{name:"---"},{handler:this.openSpeedDialNode.bind(this,e,{openInNewWindow:!0}),visible:this.isBookmark(),...Object(N.a)("Open in New Window")},{handler:this.openSpeedDialNode.bind(this,e,{openInNewWindow:!0,incognito:!0}),visible:this.isBookmark(),...Object(N.a)("Open in Private Window")},{name:"---"},{handler:this.openSpeedDialNode.bind(this,e,{openInBackground:!0}),visible:this.isFolder(),...Object(N.a)("Open All Bookmarks")},{name:"---",visible:!this.props.incognito},{handler:this.handleSetCustomThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...Object(N.a)("Select Custom Thumbnail...")},{handler:this.handleClearCustomThumbnail,visible:this._customThumbnail,...Object(N.a)("Clear Custom Thumbnail")},{handler:this.handleUpdateThumbnail,visible:(this.isBookmark()||this.isFolder())&&!this.props.incognito,...Object(N.a)("Reload")},{name:"---"},{handler:this.handleEdit,...Object(N.a)("command","Edit")},{handler:this.handleRename,...Object(N.a)("Rename")},{name:"---"},{handler:this.handleCutDial,...Object(N.a)("win_linux","Cut")},{handler:this.handleCopyDial,...Object(N.a)("win_linux","Copy")},{handler:this.handlePasteDial,...Object(N.a)("win_linux","Paste")},{name:"---"},{handler:this.handleRemoveDial,...Object(N.a)("other","Delete")}]),O(this,"onContextMenu",(e,t)=>{Object(_.a)(this.context.vivaldiWindowId,this.getContextMenuItems(e))(t)}),O(this,"onDragOver",e=>{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===s.b)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=s.a.isCopyModifierPressed(e)?"copy":"move",this.setState({canDrop:!0}))}),O(this,"onDragLeave",e=>{this.state.canDrop&&this.setState({canDrop:!1})}),O(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),n.a.onDropEvent(e,this.props.node.id,0),this.setState({canDrop:!1})}),O(this,"onCut",e=>{n.a.cut(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()}),O(this,"onCopy",e=>{n.a.copy(e,[this.props.node.id]),e.stopPropagation(),e.preventDefault()}),O(this,"onPaste",e=>{n.a.pasteWithPromise(e,this.props.node.id),e.stopPropagation(),e.preventDefault()}),this.focusedElement=null,this.state={canDrop:!1}}componentWillUnmount(){h.a.unlinkBookmarkComponent(this)}isFolder(){return!this.props.node.url}isBookmark(){return!this.isFolder()}renderThumbnails(){const e=this.props.node;return e.children?e.thumbnail?i.createElement(u.a,{key:"thumb__folder__"+e.id,src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,className:"thumbnail-folder-image",__source:{fileName:y,lineNumber:475}}):e.children.map((t,a)=>{if(a<4)return i.createElement(u.a,{key:"thumb__"+e.id+"__"+a,src:t.thumbnail?t.thumbnail:"",onImageLoadError:this.onThumbnailImageLoadError,isFolder:!!t.children,__source:{fileName:y,lineNumber:485}})}):null}render(){const e=this.props.node,{children:t}=e,a=h.a.linkAndQueryUpdatingBookmark(this,e.id);return i.createElement("div",{tabIndex:this.props.keyAccess,onPointerDown:this.dialPointerDownHandler,className:f()({draggable:!0,dial:!0,dragging:this.props.dragging,folder:Boolean(t)}),style:this.props.style,"data-id":e.id,onContextMenu:this.onContextMenu.bind(this,e),onKeyDown:this.keyDownHandler,onDoubleClick:this.cancelEvent,__source:{fileName:y,lineNumber:501}},t?i.createElement("div",{className:f()({"thumbnail-image":!0,"dial-folder-icon":!0,"drop-hover":this.state.canDrop}),title:e.url,style:this.props.dialShadow,onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,onPointerCancel:this.pointerUpHandler,onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDrop.bind(this),key:e.id,__source:{fileName:y,lineNumber:526}},0===t.length&&!e.thumbnail&&i.createElement(u.a,{src:"",isFolder:!0,__source:{fileName:y,lineNumber:544}}),(t.length>0||e.thumbnail)&&i.createElement("span",{className:"folder-flap",dangerouslySetInnerHTML:{__html:S.Xb},__source:{fileName:y,lineNumber:547}}),t.length>0&&!e.thumbnail&&i.createElement("div",{className:"preview",__source:{fileName:y,lineNumber:554}},this.renderThumbnails()),e.thumbnail&&i.createElement(u.a,{src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,__source:{fileName:y,lineNumber:559}})):i.createElement(u.a,{onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerDown:this.pointerDownHandler,onPointerUp:this.pointerUpHandler,key:e.id,style:this.props.dialShadow,src:e.thumbnail,onImageLoadError:this.onThumbnailImageLoadError,__source:{fileName:y,lineNumber:516}}),e.url&&this.props.prefValues[C.kStartpageSpeedDialControlsVisible]&&i.createElement("div",{className:"thumb-controls",__source:{fileName:y,lineNumber:568}},i.createElement("button",{tabIndex:"-1",onClick:this.handleSetCustomThumbnail,className:f()({circular:!0,"set-custom-thumbnail":!0}),title:Object(g.a)("Select custom thumbnail"),dangerouslySetInnerHTML:{__html:S.Ub},__source:{fileName:y,lineNumber:569}}),i.createElement("button",{tabIndex:"-1",onClick:this.handleUpdateThumbnail,className:f()({circular:!0,"update-thumbnail":!0,updating:a}),disabled:a,title:Object(g.a)("Update thumbnail"),dangerouslySetInnerHTML:{__html:S.gb.large},__source:{fileName:y,lineNumber:578}})),this.props.prefValues[C.kStartpageSpeedDialDeleteVisible]&&i.createElement("button",{tabIndex:"-1",onClick:this.handleRemoveDial,title:Object(g.a)("other","Delete"),className:"close circular",dangerouslySetInnerHTML:{__html:S.Vb},__source:{fileName:y,lineNumber:593}}),"never"!==this.props.prefValues[C.kStartpageSpeedDialTitlesVisible]&&i.createElement(c.a,{ref:"title",bookmark:e,className:"button-title",getContextMenuItems:this.getContextMenuItems,howToEdit:"click",keyAccess:-1,needsInitialEdit:this.props.awaitingInitialEditId===e.id,onSelect:this.pointerUpHandler,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,onFinished:this.onRenameFinished,titleMargin:this.props.titleMargin,__source:{fileName:y,lineNumber:602}}))}}O(T,"contextType",p.a),t.a=T}).call(this,a(64))},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(11);class s{static setProgressState(e,t){i.a.dispatch({actionType:"PAGE_SET_PROGRESS",pageId:e,progressState:t})}}},function(e,t,a){"use strict";var i=a(11),s=a(4),n=a(7);const r=new class{foundRssFeeds(e,t){i.a.dispatch({actionType:s.a.RSS_FEEDS_FOUND,tabId:e,feeds:t})}resetRssFeeds(e){i.a.dispatch({actionType:s.a.RSS_CLEAR_FEEDS,tabId:e})}};n.default.runtime.onMessage.addListener((function(e,t,a){e&&(e.feeds?r.foundRssFeeds(e.tabId,e.feeds):t.tab&&"number"==typeof t.tab.id&&"remove_this_preview"===e.command?n.default.tabs.sendMessage(t.tab.id,{command:"remove_preview"}):t.tab&&"get_tab_url"===e.command&&a(t.tab.url))})),t.a=r},,,function(e,t,a){"use strict";(function(e){t.a=function(){if(e.env.ENABLE_LIVERELOAD){var t=a(7);(i=new WebSocket("ws://localhost:35729/livereload")).onerror=function(e){console.log("reload connection got error"+JSON.stringify(e))},i.onmessage=function(e){if(e.data){var a=JSON.parse(e.data);a&&a.path&&!a.path.match(/\.css$/)&&"reload"===a.command&&t.runtime.reload()}}}var i}}).call(this,a(64))},function(e,t,a){"use strict";var i=a(22),s=a(5);const n=function(){if("function"==typeof s.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist){var e=i.a.getSpeeddialFolders();if(e&&0!==e.length&&e[0].children){var t=e[0].children.filter(e=>e.url).map(e=>({title:e.title,url:e.url}));s.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist(t)}}};const r={start:function(){"function"==typeof s.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&(n(),i.a.addChangeListener(n))},stop:function(){"function"==typeof s.a.bookmarksPrivate.updateSpeedDialsForWindowsJumplist&&i.a.removeChangeListener(n)}};t.a=r},,,function(e,t,a){"use strict";var i=a(76),s=a(39),n=a(37),r=a(22),o=a(354),l=a(63),c=a(9),d=a(0),u=a.n(d),h=a(2),m=a(13),p="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\BookmarkDialog.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends u.a.PureComponent{constructor(...e){super(...e),g(this,"state",{title:"",url:"",description:"",nickname:"",thumbnail:"",isFolder:!1,parentId:""}),g(this,"_parentId",""),g(this,"_index",0),g(this,"onCancel",()=>{this.props.onClose()}),g(this,"onSave",()=>{if("edit"===this.props.mode){const e={id:this.props.id,title:this.state.title,url:this.state.url,thumbnail:this.state.thumbnail,nickname:this.state.nickname,description:this.state.description};s.a.verifyNode(e,this.state.isFolder).then(e=>{if(e){const t=r.a.getItemById(e.id);t&&t.parentId!==this.state.parentId?n.a.moveWithPromise([t.id],this.state.parentId,0).then(()=>{n.a.update(e.id,e,()=>this.props.onClose())}):n.a.update(e.id,e,()=>this.props.onClose())}})}else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){const e={parentId:this.state.parentId,index:this.state.parentId===this._parentId?this._index:0,title:this.state.title,url:this.state.url,nickname:this.state.nickname,description:this.state.description};s.a.verifyNode(e,this.state.isFolder).then(e=>{e&&n.a.create(e,()=>this.props.onClose())})}else this.props.onClose()}),g(this,"changeValue",(e,t)=>{const a={};a[e]=t.target.value,this.setState(a)})}componentWillMount(){const e=r.a.getItemById(this.props.id);if("edit"===this.props.mode)e&&this.setState({title:e.title,url:e.url,thumbnail:e.thumbnail,description:e.description,nickname:e.nickname,isFolder:r.a.isFolder(e),parentId:e.parentId});else if("addbookmark"===this.props.mode||"addfolder"===this.props.mode){r.a.isFolder(e)?(this._parentId=e.id,this._index=0):(this._parentId=e.parentId,this._index=e.index+1);const t={};if("addbookmark"===this.props.mode){const e=c.a.getActivePage();e&&(t.title=e.title,t.url=e.url,t.thumbnail=e.getIn(["extData","thumbnail"]))}t.isFolder="addfolder"===this.props.mode,t.parentId=this._parentId,this.setState(t)}}render(){let e;switch(this.props.mode){case"edit":e=this.state.isFolder?Object(h.a)("Edit Folder"):Object(h.a)("Edit Bookmark");break;case"addbookmark":e=Object(h.a)("New Bookmark");break;case"addfolder":e=Object(h.a)("title","New Folder")}if(void 0===e)return null;const t=this.state.isFolder?Object(h.a)("Folder Name"):Object(h.a)("Bookmark Name");return u.a.createElement(l.a,{onRequestClose:this.onCancel,__source:{fileName:p,lineNumber:164}},u.a.createElement("div",{className:"edit-bookmark",__source:{fileName:p,lineNumber:165}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:p,lineNumber:166}},u.a.createElement("h1",{className:"dialog-title",__source:{fileName:p,lineNumber:167}},e)),u.a.createElement("form",{onSubmit:this.onSave,__source:{fileName:p,lineNumber:169}},!1,u.a.createElement("div",{className:"dialog-content",__source:{fileName:p,lineNumber:185}},u.a.createElement("input",{className:"title",type:"text",value:this.state.title,onChange:this.changeValue.bind(this,"title"),title:t,placeholder:t,autoFocus:!0,__source:{fileName:p,lineNumber:186}}),!1===this.state.isFolder&&u.a.createElement("input",{className:"address",type:"text",value:this.state.url,onChange:this.changeValue.bind(this,"url"),title:Object(h.a)("Address"),placeholder:Object(h.a)("Address"),__source:{fileName:p,lineNumber:197}}),void 0!==this.state.parentId&&u.a.createElement(o.a,{selectedItemID:this.state.parentId,title:Object(h.a)("Folder"),onChange:this.changeValue.bind(this,"parentId"),__source:{fileName:p,lineNumber:208}}),!1===this.state.isFolder&&u.a.createElement("input",{className:"nickname",type:"text",value:this.state.nickname,onChange:this.changeValue.bind(this,"nickname"),title:Object(h.a)("Nickname"),placeholder:Object(h.a)("Nickname"),__source:{fileName:p,lineNumber:216}}),!1===this.state.isFolder&&u.a.createElement("textarea",{className:"description",type:"text",value:this.state.description,onChange:this.changeValue.bind(this,"description"),title:Object(h.a)("Description"),placeholder:Object(h.a)("Description"),__source:{fileName:p,lineNumber:227}})),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:p,lineNumber:239}},u.a.createElement("input",{type:"submit",className:"primary",value:Object(h.a)("Save"),__source:{fileName:p,lineNumber:240}}),u.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(h.a)("Cancel"),__source:{fileName:p,lineNumber:243}})))))}}var f=b,_=a(950),N=a(182),v=a(92),E=a(58),w=a.n(E),S=a(11),C=a(4);class k extends w.a{constructor(){super(),S.a.register(e=>{switch(e.actionType){case C.a.WEBVIEW_SET_UTILITY_VIEW:this._utilityWebView=e.webview,this.emit("change")}})}getUtilityWebView(){return this._utilityWebView}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}}var y=new k,O=a(66),A=a(7),T=a(100);var I=new class{clearBrowsingData(e,t){const a=y.getUtilityWebView();a&&a.clearData({since:t},Object(T.a)(e,["downloads","formData","history","serverBoundCertificates","serviceWorkers","siteUsageData","pluginData","passwords","typedHistory","siteSettings","discardUserData"]),()=>{A.default.runtime.lastError&&console.warn("Error clearing data: "+A.default.runtime.lastError.message),A.default.browsingData.remove({since:t},Object(T.a)(e,["typedHistory","sessionCookies","persistentCookies","discardUserData"]),()=>{A.default.runtime.lastError&&console.warn("Error clearing data: "+A.default.runtime.lastError.message),e.history&&N.a.removeLocalHistory(t),e.discardUserData&&(n.a.emptyTrash(),v.a.emptyTrash(),O.a.emptyTrash()),S.a.dispatch({actionType:C.a.BROWSING_DATA_REMOVED,dataTypes:e,since:t})})})}};const D=new class extends w.a{emitChangeParam(e,t){this.emit("change",e,t)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};S.a.register(e=>{switch(e.actionType){case C.a.BROWSING_DATA_REMOVED:!function(e){D.emitChangeParam("browsingDataRemoved",e)}(e);break;default:return!0}});var P=D,x=a(8),M=a(10),L=a(25),j=a(16),B=a(130),R=a(15),F=a.n(R),U=a(1),W="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\ClearBrowsingHistory.jsx";function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const V=[{text:Object(h.a)("Past Hour"),value:"past_hour",format:"h",difference:-1},{text:Object(h.a)("Past Day"),value:"past_day",format:"d",difference:-1},{text:Object(h.a)("Past Week"),value:"past_week",format:"d",difference:-7},{text:Object(h.a)("Past 4 Weeks"),value:"past_4_weeks",format:"d",difference:-28},{text:Object(h.a)("All Time"),value:"everything",format:"",difference:0}],G=[{value:"history",category:"history",text:Object(h.a)("Browsing History")},{value:"typedHistory",category:"history",text:Object(h.a)("Typed History")},{value:"siteUsageData",category:"history",text:Object(h.a)("Site Usage Data")},{value:"downloads",category:"downloads",text:Object(h.a)("Downloads")},{value:"cookies",category:"sitedata",text:Object(h.a)("Cookies")},{value:"sessionCookies",category:"sitedata",text:Object(h.a)("Cookies")},{value:"persistentCookies",category:"sitedata",text:Object(h.a)("Cookies")},{value:"pluginData",category:"sitedata",text:Object(h.a)("Plugin Data")},{value:"localStorage",category:"storage",text:Object(h.a)("Storage (including Extension Storage)")},{value:"fileSystems",category:"storage",text:Object(h.a)("File Systems")},{value:"webSQL",category:"storage",text:Object(h.a)("Web SQL")},{value:"serverBoundCertificates",category:"storage",text:Object(h.a)("Server Bound Certificates")},{value:"indexedDB",category:"storage",text:Object(h.a)("Indexed DB")},{value:"serviceWorkers",category:"storage",text:Object(h.a)("Service Workers")},{value:"cache",category:"caches",text:Object(h.a)("Cache")},{value:"cacheStorage",category:"caches",text:Object(h.a)("Cache Storage")},{value:"discardUserData",category:"caches",text:Object(h.a)("Discard User Data")},{value:"passwords",category:"passwords",text:Object(h.a)("Passwords (including your Sync login password)")},{value:"formData",category:"forms",text:Object(h.a)("Form Autofill Data")},{value:"appcache",category:"appcache",text:Object(h.a)("Applications Cache")},{value:"siteSettings",category:"sitesettings",text:Object(h.a)("Site Settings")}];class K extends u.a.PureComponent{constructor(e){super(e),H(this,"_onBrowsingDataStoreChange",()=>{this.props.onYes&&this.props.onYes()}),H(this,"selectChanged",e=>{this.updateClearDownloadsCounters({deleteHistoryFrom:e.target.value}),this.updateClearBrowsingHistoryCounters({deleteHistoryFrom:e.target.value}),this.setState({deleteHistoryFrom:e.target.value})}),H(this,"getCookieUrl",e=>"http"+(e.secure?"s":"")+"://"+e.domain+e.path),H(this,"_onYes",e=>{x.a.set(U.kClearPrivateDataEntries,this.state.dataToRemove),x.a.set(U.kClearPrivateDataRange,this.state.deleteHistoryFrom),this.setState({inProgress:!0}),e={deleteHistoryFrom:this.state.deleteHistoryFrom,...e};const t=V.find(e=>this.state.deleteHistoryFrom===e.value),a=t&&"everything"!==this.state.deleteHistoryFrom?F()().add(t.difference,t.format).startOf(t.format).valueOf():0;I.clearBrowsingData({...this.state.dataToRemove},a)}),H(this,"_onNo",()=>{this.props.onNo&&this.props.onNo()}),H(this,"updateClearDownloadsCounters",e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,downloads:this.state.dataToRemove.downloads,...e}).deleteHistoryFrom)A.default.downloads.search({},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,downloads:e.length}}))});else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);A.default.downloads.search({},e=>{const a=e.filter(e=>F()(e.startTime).valueOf()>t);this.setState(e=>({dataToRemoveCounters:{...e.dataToRemoveCounters,downloads:a.length}}))})}}),H(this,"getSelectedStartTime",e=>{const t=V.find(t=>e===t.value);return F()().add(t.difference,t.format).startOf(t.format).valueOf()}),H(this,"updateClearBrowsingHistoryCounters",e=>{if("everything"===(e={deleteHistoryFrom:this.state.deleteHistoryFrom,history:this.state.dataToRemove.history,...e}).deleteHistoryFrom)A.default.history.search({text:"",startTime:0,maxResults:1e6},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}}))});else{const t=this.getSelectedStartTime(e.deleteHistoryFrom);A.default.history.search({text:"",maxResults:1e6,startTime:t},e=>{this.setState(t=>({dataToRemoveCounters:{...t.dataToRemoveCounters,history:e.length}}))})}}),H(this,"toggleAll",()=>{this.setState(e=>{const t=!e.all,a={};return Object.keys(e.dataToRemove).forEach(e=>{a[e]=t}),{all:t,dataToRemove:a}})}),H(this,"clearDataChange",(e,t)=>{"history"===e&&this.updateClearBrowsingHistoryCounters({history:t.target.checked}),"downloads"===e&&this.updateClearDownloadsCounters({downloads:t.target.checked});const a=G.reduce((a,i)=>(i.category===e&&(a[i.value]=t.target.checked),a),{});this.setState(e=>{const t={...e.dataToRemove,...a};return{dataToRemove:t,all:Boolean(!Object.keys(t).find(e=>!1===t[e]))}})});const t=G.reduce((e,t)=>(e[t.value]=!1,e),{}),a=M.a.get(U.kClearPrivateDataEntries);a&&Object.entries(a).forEach(([e,i])=>{void 0===t[e]&&delete a[e]}),Object.assign(t,a);const i={};let s=!0;Object.keys(t).forEach(e=>{i[e]=0,t[e]||(s=!1)}),this.state={all:s,inProgress:!1,deleteHistoryFrom:M.a.get(U.kClearPrivateDataRange),dataToRemove:t,dataToRemoveCounters:i}}componentDidMount(){P.addChangeListener(this._onBrowsingDataStoreChange),this.updateClearDownloadsCounters(),this.updateClearBrowsingHistoryCounters()}componentWillUnmount(){P.removeChangeListener(this._onBrowsingDataStoreChange)}render(){if(j.a.isGuestSession(this.context.vivaldiWindowId))return u.a.createElement("header",{className:"dialog-header",__source:{fileName:W,lineNumber:296}},u.a.createElement("p",{className:"error",__source:{fileName:W,lineNumber:297}},Object(h.a)("Delete Browsing Data not available from guest windows.")));const e=V.map(e=>u.a.createElement("option",{key:e.value,value:e.value,__source:{fileName:W,lineNumber:302}},e.text)),t=Boolean(!Object.keys(this.state.dataToRemove).find(e=>!0===this.state.dataToRemove[e])),a=G.map((e,t,a)=>{if(!a[t-1]||e.category!==a[t-1].category)return u.a.createElement("li",{key:e.value,style:{paddingLeft:"18px"},__source:{fileName:W,lineNumber:314}},u.a.createElement("label",{__source:{fileName:W,lineNumber:315}},u.a.createElement("input",{type:"checkbox",checked:this.state.dataToRemove[e.value],onChange:this.clearDataChange.bind(this,e.category),__source:{fileName:W,lineNumber:316}}),u.a.createElement("span",{__source:{fileName:W,lineNumber:319}},e.text),this.state.dataToRemoveCounters[e.value]>0&&this.state.dataToRemove[e.value]&&u.a.createElement("span",{className:"item-count",__source:{fileName:W,lineNumber:322}},this.state.dataToRemoveCounters[e.value])))});var i=u.a.createElement("div",{className:"dialog-clear-data",__source:{fileName:W,lineNumber:332}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:W,lineNumber:333}},u.a.createElement("h1",{__source:{fileName:W,lineNumber:334}},Object(h.a)("Delete Browsing Data"))),u.a.createElement("form",{className:"dialog-clear-data",onSubmit:this._onYes,__source:{fileName:W,lineNumber:337}},u.a.createElement("div",{className:"dialog-content",__source:{fileName:W,lineNumber:338}},u.a.createElement("div",{className:"setting-single",__source:{fileName:W,lineNumber:339}},u.a.createElement("label",{__source:{fileName:W,lineNumber:340}},u.a.createElement("span",{__source:{fileName:W,lineNumber:341}},Object(h.a)("Delete Data for:")),u.a.createElement("select",{onChange:this.selectChanged,value:this.state.deleteHistoryFrom,autoFocus:!0,__source:{fileName:W,lineNumber:342}},e))),u.a.createElement("div",{className:"setting-single pad-top",__source:{fileName:W,lineNumber:350}},u.a.createElement("ul",{__source:{fileName:W,lineNumber:351}},u.a.createElement("li",{style:{paddingBottom:"6px"},__source:{fileName:W,lineNumber:352}},u.a.createElement("label",{__source:{fileName:W,lineNumber:353}},u.a.createElement("input",{type:"checkbox",checked:this.state.all,onChange:this.toggleAll,__source:{fileName:W,lineNumber:354}}),u.a.createElement("span",{__source:{fileName:W,lineNumber:357}},Object(h.a)("browser","All")))),a))),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:W,lineNumber:365}},u.a.createElement("input",{type:"submit",disabled:this.state.inProgress||t,value:Object(h.a)("title","Delete"),__source:{fileName:W,lineNumber:366}}),u.a.createElement("input",{type:"button",onClick:this._onNo,disabled:this.state.inProgress,value:Object(h.a)("Cancel"),__source:{fileName:W,lineNumber:370}}),this.state.inProgress&&u.a.createElement("p",{className:"in-progress",__source:{fileName:W,lineNumber:375}}))));return Object(B.a)(i,this.props.filter)}}H(K,"contextType",L.a);var z=K,Y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\ClearBrowsingHistoryDialog.jsx";function $(e){return u.a.createElement(l.a,{onRequestClose:e.onClose,__source:{fileName:Y,lineNumber:12}},u.a.createElement(z,{onNo:e.onClose,onYes:e.onClose,__source:{fileName:Y,lineNumber:13}}))}var Q=a(88),Z=a(62),q="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\confirmOpenBookmarksDialog.jsx";function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class J extends u.a.Component{constructor(...e){super(...e),X(this,"state",{doNotShowAgain:!1}),X(this,"_onNo",()=>{this.props.onClose()}),X(this,"_onYes",()=>{x.a.set(U.kBookmarksConfirmOpening,!this.state.doNotShowAgain),s.a.open(this.props.options),this.props.onClose()}),X(this,"_toggleDoNotShowAgain",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))})}render(){return u.a.createElement(l.a,{onRequestClose:this._onNo,__source:{fileName:q,lineNumber:44}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:q,lineNumber:45}},u.a.createElement("h1",{className:"dialog-title",__source:{fileName:q,lineNumber:46}},Object(h.a)("Open Multiple Links"))),u.a.createElement("form",{onSubmit:this._onYes,__source:{fileName:q,lineNumber:49}},u.a.createElement("div",{className:"dialog-content",__source:{fileName:q,lineNumber:50}},u.a.createElement("p",{__source:{fileName:q,lineNumber:51}},Object(h.a)("Do you want to open $1 link?","Do you want to open $1 links?",[this.props.options.bookmarks.length])),u.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:q,lineNumber:56}},u.a.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._toggleDoNotShowAgain,__source:{fileName:q,lineNumber:57}}),u.a.createElement("span",{__source:{fileName:q,lineNumber:60}},Object(h.a)("Do not ask again")))),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:q,lineNumber:64}},u.a.createElement("input",{type:"submit",onClick:this._onYes,value:Object(h.a)("Yes"),autoFocus:!0,__source:{fileName:q,lineNumber:65}}),u.a.createElement("input",{type:"button",onClick:this._onNo,value:Object(h.a)("No"),__source:{fileName:q,lineNumber:69}}))))}}var ee=J,te=a(508),ae=a(19),ie=a(12),se=a(145),ne="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformFFMPEGDialog.jsx";function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oe=[U.kStartupShowFfmpegInformation];class le extends d.Component{constructor(e){super(e),re(this,"_onClose",()=>{x.a.set(U.kStartupShowFfmpegInformation,!this.state.doNotShowAgain),this.props.onClose()}),re(this,"_onInformation",()=>{ie.a.openURL("https://help.vivaldi.com/article/html5-proprietary-media-on-linux/"),this._onClose()}),re(this,"_onCheckChanged",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))}),this.state={doNotShowAgain:!1}}render(){return d.createElement(l.a,{onRequestClose:se.default,dialogWidth:400,viewMode:"default-browser slide",__source:{fileName:ne,lineNumber:53}},d.createElement("header",{className:"dialog-header",__source:{fileName:ne,lineNumber:58}},d.createElement("h1",{className:"dialog-title",__source:{fileName:ne,lineNumber:59}},Object(h.a)("Media support"))),d.createElement("div",{className:"dialog-content",__source:{fileName:ne,lineNumber:62}},d.createElement("p",{__source:{fileName:ne,lineNumber:63}},Object(h.a)("Vivaldi lacks a suitable component to play HTML5 'proprietary' media (H.264/AAC)")),d.createElement("label",{className:"dialog-checkbox",__source:{fileName:ne,lineNumber:67}},d.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:ne,lineNumber:68}}),d.createElement("span",{__source:{fileName:ne,lineNumber:71}},Object(h.a)("Do not show again")))),d.createElement("footer",{className:"dialog-footer",__source:{fileName:ne,lineNumber:75}},d.createElement("input",{type:"submit",value:Object(h.a)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:ne,lineNumber:76}}),d.createElement("input",{type:"button",value:Object(h.a)("Cancel"),onClick:this._onClose,__source:{fileName:ne,lineNumber:81}})))}}var ce=Object(ae.a)(le,oe),de="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\InformMediaAvailableDialog.jsx";function ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const he=[U.kStartupShowMediaAvailableInformation];class me extends d.Component{constructor(e){super(e),ue(this,"_onClose",()=>{x.a.set(U.kStartupShowMediaAvailableInformation,!this.state.doNotShowAgain),this.props.onClose()}),ue(this,"_onInformation",()=>{ie.a.openURL("https://www.microsoft.com/en-us/software-download/mediafeaturepack"),this._onClose()}),ue(this,"_onCheckChanged",()=>{this.setState(e=>({doNotShowAgain:!e.doNotShowAgain}))}),this.state={doNotShowAgain:!1}}render(){return d.createElement(l.a,{onRequestClose:se.default,dialogWidth:400,viewMode:"default-browser slide",__source:{fileName:de,lineNumber:54}},d.createElement("header",{className:"dialog-header",__source:{fileName:de,lineNumber:59}},d.createElement("h1",{className:"dialog-title",__source:{fileName:de,lineNumber:60}},Object(h.a)("Media support"))),d.createElement("div",{className:"dialog-content",__source:{fileName:de,lineNumber:63}},d.createElement("p",{__source:{fileName:de,lineNumber:64}},Object(h.a)("This Windows N edition lacks the media package to play HTML5 'proprietary' media (H.264/AAC).")),d.createElement("label",{className:"dialog-checkbox",__source:{fileName:de,lineNumber:68}},d.createElement("input",{type:"checkbox",checked:this.state.doNotShowAgain,onChange:this._onCheckChanged,__source:{fileName:de,lineNumber:69}}),d.createElement("span",{__source:{fileName:de,lineNumber:72}},Object(h.a)("Do not show again")))),d.createElement("footer",{className:"dialog-footer",__source:{fileName:de,lineNumber:76}},d.createElement("input",{type:"submit",value:Object(h.a)("More Information"),onClick:this._onInformation,autoFocus:!0,__source:{fileName:de,lineNumber:77}}),d.createElement("input",{type:"button",value:Object(h.a)("Cancel"),onClick:this._onClose,__source:{fileName:de,lineNumber:82}})))}}var pe=Object(ae.a)(me,he),ge=a(356),be=a(96),fe=a(51),_e=a(510),Ne=a(20),ve="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\MainBar.jsx";function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class we extends u.a.PureComponent{constructor(e){super(e),Ee(this,"getMainBarStoreState",()=>{const e=c.a.getActivePage();return{url:e.url,id:e.id,originUrl:e.originUrl,active:e.active,incognito:e.incognito,pendingUrl:e.pendingUrl,thumbnailUrl:e.getIn(["extData","thumbnail"]),favIconUrl:e.favIconUrl,title:e.title}}),Ee(this,"pageStoreChanged",()=>{this.setState(this.getMainBarStoreState())}),this.state={...this.getMainBarStoreState()}}componentDidMount(){c.a.addChangeListener(this.pageStoreChanged)}componentWillUnmount(){c.a.removeChangeListener(this.pageStoreChanged)}render(){return Ne.a.isMailPage(this.state.url),u.a.createElement(_e.a,{readonly:!1,showNavigationButtons:!0,url:this.state.url,id:this.state.id,size:this.props.size,originUrl:this.state.originUrl,active:this.state.active,incognito:this.state.incognito,pendingUrl:this.state.pendingUrl,thumbnailUrl:this.state.thumbnailUrl,favIconUrl:this.state.favIconUrl,title:this.state.title,__source:{fileName:ve,lineNumber:58}})}}var Se=we,Ce=a(282),ke=a(52),ye=(a(106),a(61)),Oe=a.n(ye),Ae=a(5),Te="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\PageAccessKeys.jsx";function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class De extends u.a.PureComponent{constructor(...e){super(...e),Ie(this,"state",{accessKeys:[],shown:!1,page:null}),Ie(this,"bindKeystrokes",()=>{const{accessKeys:e}=this.state;e.forEach(e=>{ke.a.bind(e.access_key,this.pressKey),ke.a.bind("shift+alt+"+e.access_key,this.pressKey)})}),Ie(this,"unbindKeystrokes",()=>{const{accessKeys:e}=this.state;e.forEach(e=>{ke.a.unbind(e.access_key,this.pressKey),ke.a.unbind("shift+alt+"+e.access_key,this.pressKey)})}),Ie(this,"onClose",()=>{this.state.shown&&(this.setState({shown:!1}),this.props.onClose())}),Ie(this,"getLink",e=>{const t=this.state.page?Oe.a.parse(this.state.page.url):null;if(t){if(e.startsWith("#")&&t.href)return t.href.split("#")[0]+e;if(e.startsWith("/")&&t.protocol&&t.host)return t.protocol+"//"+t.host+e}return e}),Ie(this,"pressKey",e=>{e&&e.key&&this.triggerKey(e.key)}),Ie(this,"triggerKey",e=>{Ae.a.accessKeys.action(c.a.getActivePage().id,e),this.onClose()})}componentDidMount(){Ae.a.accessKeys.getAccessKeysForPage(c.a.getActivePage().id,e=>{this.setState({accessKeys:e,shown:!0,page:c.a.getActivePage()},()=>this.bindKeystrokes())})}componentWillUnmount(){this.unbindKeystrokes()}render(){if(!this.state.shown)return null;const{accessKeys:e,page:t}=this.state;return u.a.createElement("div",{className:"dialog-access-keys",__source:{fileName:Te,lineNumber:104}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:Te,lineNumber:105}},u.a.createElement("h1",{className:"dialog-title",__source:{fileName:Te,lineNumber:106}},Object(h.a)("Access Key Shortcuts"),t&&u.a.createElement("span",{className:"info",__source:{fileName:Te,lineNumber:109}},Object(h.a)("for $1",[t.title||t.href])))),u.a.createElement("div",{className:"dialog-content",__source:{fileName:Te,lineNumber:117}},0===e.length&&Object(h.a)("This page doesn’t seem to contain access key shortcuts."),e.length>0&&e.map((e,t)=>u.a.createElement("label",{key:t,className:"keycombo",title:e.href,__source:{fileName:Te,lineNumber:127}},u.a.createElement("input",{type:"button",className:"item",onClick:this.triggerKey.bind(null,e.access_key),value:e.access_key,__source:{fileName:Te,lineNumber:130}}),u.a.createElement("span",{__source:{fileName:Te,lineNumber:135}},e.title.replace(/\[.*?\]/g,"")||e.textContent.trim()||e.href)))),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Te,lineNumber:146}},u.a.createElement("p",{className:"info",__source:{fileName:Te,lineNumber:147}},M.a.get(U.kWebpagesAccessKeys)?Object(h.a)("Access key shortcuts are allowed in keyboard settings."):Object(h.a)("Access key shortcuts are disabled in keyboard settings.")," ",Object(h.a)("Run shortcuts on page with $1 modifier keys.",["Shift+Alt"])),u.a.createElement("input",{type:"button",onClick:this.onClose,value:Object(h.a)("Close"),className:"primary",autoFocus:!0,__source:{fileName:Te,lineNumber:158}})))}}var Pe=De,xe=a(965),Me=a(557),Le="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\showKeyboardShortcuts.jsx";function je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Be=[U.kKeyboardShortcutsEnable,U.kKeyboardShortcutsEnableSingleKey];class Re extends u.a.Component{constructor(...e){super(...e),je(this,"state",{filter:""}),je(this,"onSettingsFilter",e=>{const t=e.target.value.toLowerCase().replace(/⌘/g,"meta").replace(/⌥/g,"alt").replace(/⇧/g,"shift").replace(/⌃/g,"ctrl");this.setState({filter:t})}),je(this,"onKeyDown",e=>{"Escape"===e.nativeEvent.code&&0===this.refs.comboFilter.value.length&&(this.props.onClose(),e.stopPropagation(),e.preventDefault())})}componentDidMount(){this.refs.comboFilter.focus()}render(){let e="keystrokes";return this.props.prefValues[U.kKeyboardShortcutsEnable]?this.props.prefValues[U.kKeyboardShortcutsEnableSingleKey]||(e+=" singlekeydisabled"):e+=" shortcutsdisabled",u.a.createElement("div",{className:"keyboardShortcutsWrapper",tabIndex:"0",onKeyDown:this.onKeyDown,__source:{fileName:Le,lineNumber:60}},u.a.createElement("header",{__source:{fileName:Le,lineNumber:64}},u.a.createElement("h1",{__source:{fileName:Le,lineNumber:65}},Object(h.a)("Keyboard Cheat Sheet")),u.a.createElement("input",{className:"search",ref:"comboFilter",type:"search",placeholder:Object(h.a)("Filter Commands"),onChange:this.onSettingsFilter,__source:{fileName:Le,lineNumber:66}}),u.a.createElement("button",{className:"close",onClick:this.props.onClose,dangerouslySetInnerHTML:{__html:m.hc},__source:{fileName:Le,lineNumber:71}})),u.a.createElement("div",{className:e,__source:{fileName:Le,lineNumber:76}},u.a.createElement(Me.a,{filter:this.state.filter,view:"read-only",__source:{fileName:Le,lineNumber:77}})))}}var Fe=Object(ae.a)(Re,Be),Ue=a(17),We=a.n(Ue),He=(a(21),"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\VisualTabSwitcher.jsx");function Ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ge extends u.a.PureComponent{constructor(){super(),Ve(this,"state",{selected:c.a.getActivePage(),offset:1}),Ve(this,"getMaxAllowedWidth",()=>this.context.innerWidth-212),Ve(this,"getNumberOfPreviews",()=>{const{pages:e}=this;if(212*e.size<this.getMaxAllowedWidth())return e.size;let t=1;for(;212*(t+1)+24<this.getMaxAllowedWidth()&&t<e.size;)t++;return t}),Ve(this,"getPagesInOrder",()=>{const e=c.a.getPages(),t=c.a.getPageHistory();return M.a.get(U.kTabsCycleByRecentOrder)?t.map(t=>e.find(e=>e.get("id")===t)).filter(Boolean).reverse():e}),Ve(this,"getSelectedPageWithOffset",e=>{const{pages:t}=this,{selected:a}=this.state;let i=t.indexOf(a)+e;return i=(i%t.size+t.size)%t.size,t.get(i)}),Ve(this,"cancelEvent",e=>{e.stopPropagation(),e.preventDefault()}),Ve(this,"navigateWithOffset",e=>{this.setState({selected:this.getSelectedPageWithOffset(e),offset:e},()=>{const e=document.querySelector(".visual-list.selected");e&&e.scrollIntoViewIfNeeded()})}),Ve(this,"selectBack",()=>{this.navigateWithOffset(-1)}),Ve(this,"selectForward",()=>{this.navigateWithOffset(1)}),Ve(this,"selectByUid",e=>{const t=this.workingPageSet.find(t=>t.uid===e);t&&this.selectPage(t.page)}),Ve(this,"selectPage",e=>{this.setState({selected:e})}),Ve(this,"renderMinimalList",()=>{const{pages:e}=this,{selected:t}=this.state;return u.a.createElement("div",{className:"tabswitcher list",__source:{fileName:He,lineNumber:136}},u.a.createElement("img",{className:We()({"visual-list-preview":!0,"active-page":t.active}),src:t.getIn(["extData","thumbnail"]),onContextMenu:this.cancelEvent,onMouseDown:this.selectPage.bind(this,t),title:Ne.a.getDisplayUrl(t.url)||Ne.a.getDisplayTitle(t),alt:"",__source:{fileName:He,lineNumber:137}}),u.a.createElement("ul",{className:"listed-tabs",__source:{fileName:He,lineNumber:148}},e.map(e=>u.a.createElement("li",{key:"visual-tab-list-"+e.id,onContextMenu:this.cancelEvent,onMouseDown:this.selectPage.bind(this,e),className:We()({"visual-list":!0,selected:e.id===t.id,"active-page":e.active}),__source:{fileName:He,lineNumber:150}},u.a.createElement("img",{className:"visual-tab-list-favicon",src:e.get("favIconUrl")||"/resources/default_favicon_64.png",alt:"",__source:{fileName:He,lineNumber:158}}),Ne.a.getDisplayTitle(e)))))}),Ve(this,"renderVisualList",()=>{const{pages:e,workingPageSet:t}=this,{selected:a,offset:i}=this.state,s=this.getNumberOfPreviews(),n=212*s+24,r=e.indexOf(this.state.selected);let o=t;if(t.size>s){const e=Math.min(Math.max(r-Math.floor(s/2)+(-1!==i||s%2?0:1),0),t.size-s);o=t.reduce((t,a,i)=>(i>=e&&i<e+s&&t.push(a),t),[])}return u.a.createElement("div",{className:"tabswitcher",tabIndex:"1",style:{width:n},onContextMenu:this.cancelEvent,__source:{fileName:He,lineNumber:198}},u.a.createElement("div",{className:"visual-tabs",__source:{fileName:He,lineNumber:203}},o.map(e=>u.a.createElement("div",{key:"visual-tab-"+e.uid,onMouseDown:this.selectByUid.bind(this,e.uid),style:{backgroundImage:"url("+e.page.getIn(["extData","thumbnail"])+")"},title:Ne.a.getDisplayTitle(e.page),className:We()({"visual-tab":!0,selected:e.page.id===a.id,"active-page":e.page.active}),__source:{fileName:He,lineNumber:205}},u.a.createElement("div",{className:"visual-tab-favicon-container",__source:{fileName:He,lineNumber:217}},u.a.createElement("img",{className:"visual-tab-favicon",src:e.page.get("favIconUrl")||"/resources/default_favicon_64.png",alt:"",__source:{fileName:He,lineNumber:218}}))))),u.a.createElement("div",{className:"visual-tab-switcher-title",__source:{fileName:He,lineNumber:227}},Ne.a.getDisplayTitle(a)))}),this.pages=this.getPagesInOrder(),this.workingPageSet=this.pages.map(e=>({uid:Math.ceil(Math.random()*Math.pow(10,12)),page:e}))}render(){return M.a.get(U.kTabsVisualSwitchListLayout)?this.renderMinimalList():this.renderVisualList()}}Ve(Ge,"contextType",L.a);var Ke=Ge,ze="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\mainDialog.jsx";function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let $e=!1;class Qe extends u.a.Component{constructor(...e){super(...e),Ye(this,"preventClosingByDelay",()=>{$e=!0;setTimeout(()=>{$e=!1},500)}),Ye(this,"handleClose",e=>{const{dialog:t,onClose:a}=this.props;return $e?Promise.resolve():e!==t?Promise.resolve():a()})}render(){const{dialog:e,options:t}=this.props;let a="float";switch(e){case C.a.MAIN_SHOW_VISUAL_TAB_SWITCHER:a="modal-tabswitcher";break;case C.a.MAIN_SHOW_QUICKCOMMANDS:a="qc-modal float top";break;case C.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:a="show-keyboard-shortcuts-modal-top float top";break;case C.a.MAIN_SHOW_PAGE_ACCESS_KEYS:a="page-access-keys";break;case"MAIN_SHOW_CALENDAR_ADD_EVENT":case"MAIN_SHOW_CALENDAR_EDIT_EVENT":a="calendar-modal float";break;case C.a.MAIN_SHOW_CALENDAR_ALARM:a=t.fullscreen?"calendar-alarm":"float"}return u.a.createElement(Ce.a,{__source:{fileName:ze,lineNumber:79}},u.a.createElement(l.a,{onRequestClose:this.handleClose.bind(this,e),viewMode:a,__source:{fileName:ze,lineNumber:80}},e===C.a.MAIN_SHOW_QUICKCOMMANDS&&u.a.createElement(xe.a,{key:C.a.MAIN_SHOW_QUICKCOMMANDS,onClose:this.handleClose.bind(this,e),quickCommandValue:this.props.quickCommandValue,storeQuickCommandValue:this.props.storeQuickCommandSearch,__source:{fileName:ze,lineNumber:85}}),e===C.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS&&u.a.createElement(Fe,{key:C.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS,onClose:this.handleClose.bind(this,e),__source:{fileName:ze,lineNumber:93}}),e===C.a.MAIN_SHOW_PAGE_ACCESS_KEYS&&u.a.createElement(Pe,{key:C.a.MAIN_SHOW_PAGE_ACCESS_KEYS,onClose:this.handleClose.bind(this,e),__source:{fileName:ze,lineNumber:98}}),e===C.a.MAIN_SHOW_VISUAL_TAB_SWITCHER&&u.a.createElement(Ke,{ref:"visualTabSwitcher",key:C.a.MAIN_SHOW_VISUAL_TAB_SWITCHER,__source:{fileName:ze,lineNumber:103}}),e===C.a.MAIN_SHOW_CALENDAR_ALARM&&u.a.createElement(fe.a,{key:C.a.MAIN_SHOW_CALENDAR_ALARM,onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:108}}),"MAIN_SHOW_CALENDAR_ADD_EVENT"===e&&u.a.createElement(fe.a,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:114}}),"MAIN_SHOW_CALENDAR_EDIT_EVENT"===e&&u.a.createElement(fe.a,{onClose:this.handleClose.bind(this,e),editor:t,__source:{fileName:ze,lineNumber:119}}),"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG"===e&&u.a.createElement(fe.a,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:124}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS"===e&&u.a.createElement(fe.a.MailDeleteDialogAccounts,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:129}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL"===e&&u.a.createElement(fe.a.MailDeleteDialogConfirmAll,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:134}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS"===e&&u.a.createElement(fe.a.MailDeleteDialogFolders,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:139}}),"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING"===e&&u.a.createElement(fe.a.MailDeleteDialogSetting,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:144}}),"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG"===e&&u.a.createElement(fe.a,{onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:149}}),"MAIN_SHOW_CALENDAR_MODAL_DIALOG"===e&&u.a.createElement(fe.a,{onClose:this.handleClose.bind(this,e),modal:t.modal,__source:{fileName:ze,lineNumber:154}}),e===C.a.MAIN_SHOW_IMPORT_CALENDAR&&u.a.createElement(fe.a,{pageId:-2,preventClosingByDelay:this.preventClosingByDelay,key:C.a.MAIN_SHOW_IMPORT_CALENDAR,onClose:this.handleClose.bind(this,e),__source:{fileName:ze,lineNumber:159}}),e===C.a.MAIN_SHOW_ADD_FEED&&u.a.createElement(fe.a,{key:C.a.MAIN_SHOW_IMPORT_CALENDAR,onClose:this.handleClose.bind(this,e),options:t,__source:{fileName:ze,lineNumber:166}})))}}var Ze=Qe;const qe=new class extends w.a{emitChange(){this.emit("change")}emitChangeParam(e){this.emit("change",e)}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};S.a.register(e=>{switch(e.actionType){case C.a.MAIN_SHOW_CONFIRM_OPEN_BOOKMARKS_DIALOG:qe.emitChangeParam({action:"confirmOpenBookmarks",options:e.options});break;case C.a.MAIN_SHOW_CLEAR_BROWSING_DATA_DIALOG:qe.emitChangeParam({action:"showClearBrowsingHistory",options:e.options});break;case C.a.MAIN_SHOW_BOOKMARK_DIALOG:case C.a.MAIN_SHOW_SAVE_SESSION:case C.a.MAIN_SHOW_CALENDAR_ALARM:case C.a.MAIN_SHOW_ADD_FEED:case"MAIN_SHOW_CALENDAR_ADD_EVENT":case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CALENDAR_MODAL_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case"MAIN_SHOW_SETTINGSWINDOW":qe.emitChangeParam({type:e.actionType,options:e.options});break;case C.a.MAIN_SHOW_IMPORT_CALENDAR:case C.a.MAIN_SHOW_IMPORT_DATA:case C.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case C.a.MAIN_SHOW_PAGE_ACCESS_KEYS:case C.a.MAIN_SHOW_OPEN_SESSION:case C.a.MAIN_SHOW_QUICKCOMMANDS:qe.emitChangeParam({type:e.actionType})}});var Xe=qe,Je=a(79),et=a(132),tt=a(136),at=a(253),it="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\sessions\\SessionTree.jsx";function st(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const nt=[U.kCalendarRelativeDates],rt={lastWeek:et.a.getWeekdayFormat("LL")+" LT",sameElse:et.a.getWeekdayFormat("LL")+" LT"};class ot extends u.a.PureComponent{constructor(...e){super(...e),st(this,"state",{sessionSorting:[]}),st(this,"isFolder",e=>!1),st(this,"isTrash",e=>!1),st(this,"isEditable",()=>!1),st(this,"hasChildren",e=>!1),st(this,"isValidForClipboard",e=>!1),st(this,"getContextMenuItems",e=>[]),st(this,"getSelectedSessions",()=>{const e=this._sessionTree.selectionModel.selectedIds.map(e=>e.id),t=[];return e.forEach(e=>{const a=this._sessionTree.findTreeItem(e);a&&t.push(a)}),t}),st(this,"onKeyDown",e=>{"Enter"===at.a[e.keyCode]&&this.props.onOpenSessions(),("Escape"===at.a[e.keyCode]||"."===at.a[e.keyCode]&&e.metaKey)&&this.props.onClose(),"Up"!==at.a[e.keyCode]&&"Down"!==at.a[e.keyCode]||this.props.onUpdateSelection(!0)}),st(this,"renderItemContent",e=>{const t=e.node,a=this.props.prefValues[U.kCalendarRelativeDates]?F()(t.createDateJS).calendar(null,rt):F()(t.createDateJS).format(rt.sameElse),i=Object(h.a)("$1 tab","$1 tabs",[t.tabs]),s=Object(h.a)("$1 window","$1 windows",[t.windows]),n=Object(h.a)("$1 in $2",[i,s]);return this.props.columns?this.props.columns.map(e=>{switch(e.id){case"name":return u.a.createElement("label",{key:"0",__source:{fileName:it,lineNumber:95}},u.a.createElement("span",{__source:{fileName:it,lineNumber:96}},t.name));case"createDateJS":return u.a.createElement("label",{key:"1",__source:{fileName:it,lineNumber:101}},u.a.createElement("span",{__source:{fileName:it,lineNumber:102}},a));case"tabs":return u.a.createElement("label",{key:"2",__source:{fileName:it,lineNumber:107}},u.a.createElement("span",{__source:{fileName:it,lineNumber:108}},n));default:console.warn("Unknown sorting field:",e.id)}}):null})}componentDidMount(){this._sessionTree&&this._sessionTree.focusTree()}render(){return u.a.createElement(tt.a,{ref:e=>this._sessionTree=e,nodes:this.props.nodes,onItemMouseDown:this.props.onUpdateSelection,onItemDoubleClick:this.props.onOpenSessions,onKeyDown:this.onKeyDown,isFolder:this.isFolder,isTrash:this.isTrash,isEditable:this.isEditable,hasChildren:this.hasChildren,renderItemContent:this.renderItemContent,isValidForClipboard:this.isValidForClipboard,sorting:this.props.sessionSorting,columns:this.props.columns,multiSelect:"true",__source:{fileName:it,lineNumber:120}})}}var lt=Object(ae.a)(ot,nt),ct=a(131),dt=a(32),ut=a(105),ht="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\openSessionDialog.jsx";function mt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const pt=[{text:Object(h.a)("title","Name"),value:"name",fullScreenTitle:Object(h.a)("Sort by Name"),width:350,visible:!0,key:!0},{text:Object(h.a)("Creation Date"),value:"createDateJS",fullScreenTitle:Object(h.a)("Sort by Creation Date"),width:260,visible:!0},{text:Object(h.a)("Info"),value:"tabs",fullScreenTitle:Object(h.a)("Sort by Info"),width:150,visible:!0}];class gt extends u.a.Component{constructor(...e){super(...e),mt(this,"sortComparator",(e,t)=>{const{sortOrder:a,sortField:i}=this.state.sessionSorting;return dt.a.getDefaultComparator(a,i)(e,t)}),mt(this,"refreshSessionList",()=>{Ae.a.sessionsPrivate.getAll(e=>{if(Array.isArray(e)){let t=1;e.forEach(e=>{e.id=t++}),this.setState({sessions:e})}})}),mt(this,"updateSelectedSessions",e=>{if(this.refs.sessionTree){var t=!1;this.refs.sessionTree.getSelectedSessions().length>=1&&(t=!0),this.setState({disabled:void 0!==e?!e:!t})}}),mt(this,"onDelete",()=>{const e=this.refs.sessionTree.getSelectedSessions();for(var t=0;t<e.length;t++)Ae.a.sessionsPrivate.delete(e[t].name,e=>{e&&console.warn("Error deleting session '"+this.state.sessions[t].name+"', error: "+e)});this.refreshSessionList()}),mt(this,"onOpenSessions",()=>{const e={openInNewWindow:this.state.openInNewWindow},t=this.refs.sessionTree.getSelectedSessions();for(var a=0;a<t.length;a++)Ae.a.sessionsPrivate.open(t[a].name,e,e=>{e&&console.warn("Error opening session '"+t[a].value+"', error: "+e)});this.props.onClose()}),mt(this,"onSortChange",(e,t)=>{this.setState({sessionSorting:{sortOrder:e,sortField:t}})}),mt(this,"onUpdateRow",e=>{this.setState({columns:e})}),mt(this,"onSaveRow",()=>{Object(ut.a)(this.state.columns,"sessions")}),mt(this,"_toggleOpenInNewWindow",()=>{this.setState(e=>({openInNewWindow:!e.openInNewWindow}))}),mt(this,"state",{sessions:[],columns:Object(ut.d)().sessions||Object(ut.c)(pt),disabled:!0,openInNewWindow:!0,sessionSorting:{sortOrder:dt.a.DESCENDING_SORT,sortField:"createDateJS",comparator:this.sortComparator}})}componentDidMount(){this.refreshSessionList(),this.updateSelectedSessions()}render(){return u.a.createElement(l.a,{onRequestClose:this.props.onClose,dialogWidth:800,__source:{fileName:ht,lineNumber:148}},u.a.createElement("div",{className:"open-session",__source:{fileName:ht,lineNumber:149}},u.a.createElement("form",{className:"dialog-session",onSubmit:this.onOpenSessions,__source:{fileName:ht,lineNumber:150}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:ht,lineNumber:151}},u.a.createElement("h1",{className:"dialog-title",__source:{fileName:ht,lineNumber:152}},Object(h.a)("Open Session"))),u.a.createElement("div",{className:"dialog-content",__source:{fileName:ht,lineNumber:154}},this.state.sessions.length>0?u.a.createElement("div",{className:"session-list",__source:{fileName:ht,lineNumber:156}},u.a.createElement(ct.a,{fields:pt,fullsize:!0,onSortChange:this.onSortChange,onSortChange:this.onSortChange,onSaveRow:this.onSaveRow,onUpdateRow:this.onUpdateRow,columns:this.state.columns,sortField:this.state.sessionSorting.sortField,sortOrder:this.state.sessionSorting.sortOrder,keyAccess:this.props.keyAccess,manualSorting:!1,__source:{fileName:ht,lineNumber:157}}),u.a.createElement(lt,{ref:"sessionTree",sessionSorting:this.state.sessionSorting,onOpenSessions:this.onOpenSessions,onUpdateSelection:this.updateSelectedSessions,onClose:this.props.onClose,columns:this.state.columns,nodes:this.state.sessions,__source:{fileName:ht,lineNumber:169}})):u.a.createElement("div",{__source:{fileName:ht,lineNumber:178}},Object(h.a)("No saved session."))),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:ht,lineNumber:181}},u.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:ht,lineNumber:182}},u.a.createElement("input",{type:"checkbox",checked:this.state.openInNewWindow,onChange:this._toggleOpenInNewWindow,disabled:0===this.state.sessions.length,__source:{fileName:ht,lineNumber:183}}),u.a.createElement("span",{__source:{fileName:ht,lineNumber:187}},Object(h.a)("Open Session in a New Window"))),u.a.createElement("input",{type:"submit",disabled:this.state.disabled,value:Object(h.a)("session","Open"),__source:{fileName:ht,lineNumber:189}}),u.a.createElement("input",{type:"button",onClick:this.onDelete,className:"danger",disabled:this.state.disabled,value:Object(h.a)("session","Delete"),__source:{fileName:ht,lineNumber:193}}),u.a.createElement("input",{type:"button",onClick:this.props.onClose,value:Object(h.a)("session","Cancel"),__source:{fileName:ht,lineNumber:199}})))))}}var bt=gt,ft=a(190),_t=a(29),Nt=a.n(_t),vt=a(971),Et=a(230),wt=a(72),St=a(80),Ct=a(68),kt=a(119),yt=a(36),Ot="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\addWebPanelButton.jsx";function At(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Tt=vt.sites;class It extends u.a.PureComponent{constructor(...e){super(...e),At(this,"dropMode",{support:!1,copy:!1}),At(this,"state",{drawerOpen:!1,suggestions:[],url:"",autocompleteValue:"",editUrl:void 0}),At(this,"_onUrlbarStoreChanged",()=>{const{editUrl:e,autocompleteValue:t}=St.a.getUrlfieldStateFromId("AddWebPanel");this.setState({autocompleteValue:t,editUrl:e})}),At(this,"onDragEnter",e=>{this.dropMode=this.supportDropForEvent(e)}),At(this,"onDragOver",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move":e.dataTransfer.dropEffect="none"}),At(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support&&s.a.getUrlsFromEventPromise(e,!0).then(e=>{e.forEach(e=>{this.props.addNew(e.url)})})}),At(this,"supportDropForEvent",e=>{const t={};return e.dataTransfer.types.some(e=>e===this.props.rejectMimeType)||(t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e),t.copy=t.support&&!e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e)),t}),At(this,"handleClickOutside",()=>{this.closeDrawer()}),At(this,"handleKeyDown",(e,t,a)=>{if("start"===e){switch(a.key){case"ArrowUp":this.props.moveFocus(this.props.id,"left",!1);break;case"ArrowDown":this.props.moveFocus(this.props.id,"right",!1);break;case"Escape":this.props.leaveBar();break;default:return}a.preventDefault(),a.stopPropagation()}else if("suggestion"===e){switch(a.key){case"ArrowLeft":this.moveFocus(t,"left",!1);break;case"ArrowRight":this.moveFocus(t,"right",!1);break;case"ArrowUp":this.moveFocus(t,"up",!1);break;case"ArrowDown":this.moveFocus(t,"down",!1);break;default:return}a.preventDefault(),a.stopPropagation()}}),At(this,"moveFocus",(e,t,a)=>{const i=Nt.a.findDOMNode(this);if(i instanceof HTMLElement&&(!0===a||Object(Ct.a)(i))){const a=Array.from(i.querySelectorAll("button.webpanel-suggestion")),s=a.map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===s.length||s.length!==a.length)return!1;let n,r=0,o=-1;switch(a.forEach(e=>{const t=e.getBoundingClientRect();o<t.left&&(r++,o=t.left)}),t){case"current":if(""===e||"first"===e?e=s[0]:"last"===e&&(e=s[0===this.props.keyAccess?s.length-1:0]),n=s.indexOf(e),-1===n)return!1;break;case"right":case"left":if(1===s.length)return!1;if(n=s.indexOf(e),-1===n)return!1;if("right"===t){if((n+1)%r==0)return!1;if(n+=1,n>=s.length)return!1}else{if(n%r==0)return!1;if(n-=1,n>=s.length)return!1}break;case"up":case"down":if(1===s.length)return!1;if(n=s.indexOf(e),-1===n)return!1;if("up"===t){if(n-=r,n<0)return!1;e=s[n]}else if(n+=r,n>=s.length)return!1;break;default:return!1}e=s[n];const l=i.querySelector(`button.webpanel-suggestion[data-id="${e}"]`);if(l)return l.focus(),!0}return!1}),At(this,"onToggleCallout",()=>{if(this.state.drawerOpen)this.closeDrawer();else{this.updateSuggestedSites();const e=document.getElementById("panels");e&&e.classList.add("leak");const t=c.a.getActivePage().get("url"),a={drawerOpen:!0,url:Ne.a.getDisplayUrl(t)};wt.a.setUrlfieldState("AddWebPanel",{selectionStart:0,selectionEnd:t.length,editUrl:void 0,autocompleteValue:""}),this.setState(a),ke.a.bind("esc",this.closeDrawer)}}),At(this,"onAddWebpanel",()=>{let e=(this.state.autocompleteValue||this.state.editUrl||this.state.url||"").trim();0!==e.length&&(e=Object(yt.b)(e),this.props.addNew(e),this.closeDrawer())}),At(this,"onClickSuggested",e=>{0!==e.length&&(e=Object(yt.b)(e),this.props.addNew(e),this.closeDrawer())}),At(this,"onUrlChange",e=>{this.setState({url:e||""})}),At(this,"closeDrawer",()=>{const e=document.getElementById("panels");e&&e.classList.remove("leak"),ke.a.unbind("esc",this.closeDrawer),this.setState({drawerOpen:!1,url:"",editUrl:void 0,autocompleteValue:""})}),At(this,"preventContextMenu",e=>{e.stopPropagation()})}componentDidMount(){St.a.addChangeListener(this._onUrlbarStoreChanged)}updateSuggestedSites(){j.a.isIncognitoOrGuest(this.context.vivaldiWindowId)||A.default.topSites.get(e=>{const t=this.props.webPanels.map(e=>e.contentUrl)||[];let a=e.filter(e=>-1===t.indexOf(e.url));const i=Tt.filter(e=>-1===t.indexOf(e.url));if(a.length+i.length<6)a=[];else{const e=12;i.length>e&&(i.splice(e),a=[]);let t=e-i.length;for(;t>0;){if(a.length>=t){a.splice(t);break}t-=6}}this.setState({suggestions:a.concat(i)})})}componentWillUnmount(){St.a.removeChangeListener(this._onUrlbarStoreChanged)}render(){const e=We()({addwebpanelcallout:!0,hidden:!this.state.drawerOpen}),t=We()({uifocusstop:this.props.uiFocus,addwebpanel:!0,panelbtn:!0});return u.a.createElement("div",{className:"addwebpanel-wrapper",__source:{fileName:Ot,lineNumber:402}},u.a.createElement("button",{title:Object(h.a)("Add Web Panel"),"data-id":this.props.id,className:t,tabIndex:this.props.keyAccess,onKeyDown:this.handleKeyDown.bind(this,"start","-1"),onClick:this.onToggleCallout,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDrop:this.onDrop,dangerouslySetInnerHTML:{__html:m.f.large},__source:{fileName:Ot,lineNumber:403}}),this.state.drawerOpen&&u.a.createElement(ft.a,{focusName:"focus-webpanel-suggestions",forceTrap:!0,style:{display:"contents"},__source:{fileName:Ot,lineNumber:416}},u.a.createElement("div",{className:e,onContextMenu:this.preventContextMenu,__source:{fileName:Ot,lineNumber:420}},u.a.createElement("form",{__source:{fileName:Ot,lineNumber:422}},u.a.createElement("header",{__source:{fileName:Ot,lineNumber:423}},u.a.createElement("h1",{__source:{fileName:Ot,lineNumber:424}},Object(h.a)("Add Web Panel"))),u.a.createElement("div",{className:"webpanel-input",__source:{fileName:Ot,lineNumber:426}},u.a.createElement(Et.a,{ref:"input",className:"address",title:Object(h.a)("Enter webpage address"),placeholder:"vivaldi.net",displayUrl:this.state.url,editUrl:this.state.editUrl,autocompletionEnabled:!0,onChange:this.onUrlChange,pageId:"AddWebPanel",autoFocus:!0,__source:{fileName:Ot,lineNumber:427}}),u.a.createElement("button",{className:"add",tabIndex:"0",onClick:this.onAddWebpanel,dangerouslySetInnerHTML:{__html:m.f.medium},tooltip:Object(h.a)("Add Web Panel"),__source:{fileName:Ot,lineNumber:437}})),this.state.suggestions&&this.state.suggestions.length>0&&u.a.createElement("div",{className:"webpanel-suggestions",__source:{fileName:Ot,lineNumber:444}},u.a.createElement("div",{className:"suggestions-list",key:"list",__source:{fileName:Ot,lineNumber:445}},this.state.suggestions.map((e,t)=>{const a=e.faviconURL?e.faviconURL:"chrome://favicon/size/16@2x/"+e.url,i=t.toString();return u.a.createElement("button",{key:t,className:"webpanel-suggestion",tabIndex:0===t?"0":this.props.keyAccess,"data-id":i,title:e.title+"\n"+e.url,onKeyDown:this.handleKeyDown.bind(this,"suggestion",i),onClick:()=>this.onClickSuggested(e.url),__source:{fileName:Ot,lineNumber:452}},u.a.createElement("img",{src:a,alt:"",__source:{fileName:Ot,lineNumber:461}}))})))))))}}At(It,"contextType",L.a);var Dt=Object(kt.a)(It),Pt=a(972),xt=a(86),Mt=a(973),Lt=a(111),jt=a(528),Bt=a(162),Rt=a(529),Ft=a(319),Ut=a(294),Wt=a(365),Ht="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryPanel.jsx";function Vt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gt=[{text:Object(h.a)("Date"),value:"visitTime",fullScreenTitle:Object(h.a)("Sort by Date")},{text:Object(h.a)("Title"),value:"title",fullScreenTitle:Object(h.a)("Sort by Title")},{text:Object(h.a)("Address"),value:"address",fullScreenTitle:Object(h.a)("Sort by Address")},{text:Object(h.a)("Views"),value:"visitCount",fullScreenTitle:Object(h.a)("Sort by Page Views")}];class Kt extends u.a.PureComponent{constructor(...e){super(...e),Vt(this,"hasLoadedData",!1),Vt(this,"getSelectedItem",()=>this.refs.tree.getSelectedItem()),Vt(this,"onSearch",e=>{const t=Bt.a.getPanelResourceKey();N.a.saveStateFromSearchQuery(t,e),N.a.searchHistory(t,e)}),Vt(this,"onSearchDomain",e=>{e=Object(Ut.a)(e);const{historyFilter:t}=this.props,a=Object(Wt.a)(e),i=t.merge({text:e,parsedFilter:a,searchURL:!0});this.onSearch(i)}),Vt(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.getSelectedItem();e.nativeEvent.buttons>0&&this.refs.tree.unSelectAll(),this.refs.tree.onContextMenu(e,t)}),Vt(this,"onSortChange",(e,t)=>{const{historyFilter:a}=this.props,i=a.merge({sortOrder:e,sortField:t});this.onSearch(i)}),Vt(this,"focusTree",()=>{const e=Nt.a.findDOMNode(this.refs.tree),{HTMLElement:t}=this.context;e instanceof t&&e.focus()})}componentDidUpdate(e){!e.open&&this.props.open&&this.refs.searchField&&this.refs.searchField.focusField(),this.props.open&&!this.hasLoadedData&&(this.hasLoadedData=!0,N.a.loadAll())}render(){if(!this.props.open)return null;const e=this.props.historyData,t=this.props.historyFilter;return u.a.createElement("div",{className:"panel",id:"history-panel",__source:{fileName:Ht,lineNumber:108}},u.a.createElement("header",{__source:{fileName:Ht,lineNumber:109}},u.a.createElement("h1",{__source:{fileName:Ht,lineNumber:110}},this.props.title),u.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap",__source:{fileName:Ht,lineNumber:111}},u.a.createElement(jt.a,{ref:"searchField",showPicker:!0,search:this.onSearch,historyFilter:t,minDate:this.props.oldestHistoryDate,__source:{fileName:Ht,lineNumber:112}}))),e.length>0&&u.a.createElement(ct.a,{fields:Gt,onSortChange:this.onSortChange,keyAccess:this.props.keyAccess,sortField:t.sortField,sortOrder:t.sortOrder,fullsize:!1,manualSorting:!1,__source:{fileName:Ht,lineNumber:121}}),e.length>0?u.a.createElement("section",{onContextMenu:this.onContextMenu,__source:{fileName:Ht,lineNumber:131}},u.a.createElement(Ft.a,{ref:"tree",fullView:!1,inManager:!1,nodes:e,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:Ht,lineNumber:132}})):u.a.createElement("section",{__source:{fileName:Ht,lineNumber:140}},u.a.createElement("p",{__source:{fileName:Ht,lineNumber:141}},Object(h.a)("No browsing history data for this selected period."))))}}Vt(Kt,"contextType",L.a);var zt=Object(Rt.a)(Kt),Yt=a(40),$t=a(975),Qt=a(57),Zt=a(42),qt=a(170),Xt=a(83),Jt=a(60),ea=a(181),ta=a(157),aa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpanels\\webPanel.jsx";function ia(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const sa=`(function() {\n  var title = document.getElementsByTagName('title')[0];\n  if (title) {\n    title.addEventListener('DOMSubtreeModified', function (e) {\n      chrome.runtime.sendMessage({\n        action: '${ta.d}',\n        panelUrl: document.URL,\n        title: document.title\n      });\n    }, false);\n  }\n})()`;class na extends u.a.PureComponent{constructor(...e){super(...e),ia(this,"state",{title:Object(h.a)("Loading..."),tooltip:void 0,canGoBack:!1,canGoForward:!1,canReload:!1}),ia(this,"_lookupFavicon",!0),ia(this,"onPanelStoreChange",e=>{this.props.isVisible&&"setFocus"===e&&document.activeElement&&!Object(Ct.a)(Nt.a.findDOMNode(this))&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())}),ia(this,"getMobileUAString",()=>{var e=navigator.userAgent,t=e.indexOf("("),a=e.indexOf(")",t);return t>=0&&a>t&&(e=e.substr(0,t+1)+"Linux; Android 8.0.0; SM-G965F Build/R16NW"+e.substr(a)),e=e.replace("Safari","Mobile Safari")}),ia(this,"handleNewWindow",e=>{switch(e.windowOpenDisposition){case"current_tab":case"new_foreground_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";1");break;case"new_background_tab":e.preventDefault(),e.window.accept(this.context.vivaldiWindowId+";0");break;case"new_window":e.preventDefault(),ie.a.openWindow(e.targetUrl);break;case"off_the_record":e.preventDefault(),ie.a.openWindow(e.targetUrl,{incognito:!0});break;case"new_popup":e.preventDefault()}}),ia(this,"handleDialog",e=>{"confirm"===e.messageType||"prompt"===e.messageType?e.dialog.cancel():"alert"===e.messageType&&e.dialog.ok("")}),ia(this,"handleTargetURLChanged",({newUrl:e})=>{const t=Object(ea.a)(e);Xt.a.setStatus(t)}),ia(this,"getFaviconHost",()=>{var e=Oe.a.parse(this.refs.webpanelwebview.src);return e.protocol&&e.host?e.protocol+"//"+e.host+"/":""}),ia(this,"handleLoadStop",e=>{var t=this.refs.webpanelwebview;this.setState({canGoBack:t.canGoBack(),canGoForward:t.canGoForward(),canReload:!0}),this.props.setWebPanelValue(this.props.webPanel.id,"activeUrl",this.refs.webpanelwebview.src),this._lookupFavicon&&(setTimeout(this.onSetFaviconUrl.bind(this),1e3),this._lookupFavicon=!1),t.setZoomMode("per-view"),t.setZoom(1)}),ia(this,"handleContentLoad",e=>{this.refs.webpanelwebview.executeScript({code:"document.title"},e=>{this.setState({title:e[0],tooltip:void 0}),this.props.setWebPanelValue(this.props.webPanel.id,"title",e[0])}),this.refs.webpanelwebview.executeScript({code:sa},e=>{A.default.runtime.lastError&&console.warn("listenForTitleChange:",A.default.runtime.lastError)}),this.refs.webpanelwebview.executeScript({file:"inject-all-bundle.js"})}),ia(this,"handleAbort",e=>{const t=Object(h.a)("Aborted"),a=Object(h.a)("Loading aborted with reason $1",[e.reason]);this.setState({title:t,tooltip:a})}),ia(this,"onSetFaviconUrl",()=>{this.props.setWebPanelValue(this.props.webPanel.id,"faviconUrl",this.refs.webpanelwebview.src)}),ia(this,"reload",()=>{this.setState({title:Object(h.a)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.reload()}),ia(this,"home",()=>{this.setState({title:Object(h.a)("Loading..."),tooltip:void 0,canReload:!1}),this.refs.webpanelwebview.src=this.props.webPanel.contentUrl}),ia(this,"back",()=>{this.refs.webpanelwebview.back()}),ia(this,"forward",()=>{this.refs.webpanelwebview.forward()}),ia(this,"setTitle",e=>{this.setState({title:e})}),ia(this,"onContextMenu",e=>{Object(Jt.a)(this.context.vivaldiWindowId,this.props.getWebPanelButtonMenu(this.props.webPanel,!1))(e)})}componentDidMount(){var e=this.refs.webpanelwebview;this.props.webPanel.mobileMode&&e.setUserAgentOverride(this.getMobileUAString()),e.addEventListener("contentload",this.handleContentLoad),e.addEventListener("loadabort",this.handleAbort),e.addEventListener("loadstop",this.handleLoadStop),e.addEventListener("newwindow",this.handleNewWindow),e.addEventListener("dialog",this.handleDialog),e.addEventListener("targeturlchanged",this.handleTargetURLChanged),e.src=this.props.webPanel.contentUrl,Zt.a.addChangeListener(this.onPanelStoreChange)}componentWillUnmount(){var e=this.refs.webpanelwebview;e.removeEventListener("contentload",this.handleContentLoad),e.removeEventListener("loadabort",this.handleAbort),e.removeEventListener("loadstop",this.handleLoadStop),e.removeEventListener("newwindow",this.handleNewWindow),e.removeEventListener("dialog",this.handleDialog),e.removeEventListener("targeturlchanged",this.handleTargetURLChanged),Zt.a.removeChangeListener(this.onPanelStoreChange)}componentDidUpdate(){this.props.focusContent&&document.activeElement&&(document.activeElement.blur(),this.refs.webpanelwebview.focus())}UNSAFE_componentWillReceiveProps(e){var t=this.refs.webpanelwebview;e.webPanel.mobileMode!==t.isUserAgentOverridden()&&(e.webPanel.mobileMode?t.setUserAgentOverride(this.getMobileUAString()):t.setUserAgentOverride(navigator.userAgent),this.reload())}render(){const e=We()({panel:!0,webpanel:!0,visible:this.props.isVisible});return u.a.createElement("div",{className:e,__source:{fileName:aa,lineNumber:298}},this.props.isVisible&&this.props.panelUI.showToolbar&&u.a.createElement("header",{className:"webpanel-header",onContextMenu:this.onContextMenu,__source:{fileName:aa,lineNumber:300}},u.a.createElement("h1",{className:"webpanel-title",title:this.state.tooltip||this.state.title,__source:{fileName:aa,lineNumber:302}},this.state.title),u.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:aa,lineNumber:306}},this.props.panelUI.allControls?u.a.createElement("div",{className:"button-toolbar",__source:{fileName:aa,lineNumber:308}},u.a.createElement("button",{className:"button-toolbar back",title:Object(h.a)("navigation","Back"),onClick:this.back,disabled:!this.state.canGoBack,dangerouslySetInnerHTML:{__html:m.cb.medium},__source:{fileName:aa,lineNumber:309}})):null,this.props.panelUI.allControls?u.a.createElement("div",{className:"button-toolbar",__source:{fileName:aa,lineNumber:317}},u.a.createElement("button",{className:"button-toolbar forward",title:Object(h.a)("navigation","Forward"),onClick:this.forward,disabled:!this.state.canGoForward,dangerouslySetInnerHTML:{__html:m.eb.medium},__source:{fileName:aa,lineNumber:318}})):null,this.props.panelUI.allControls?u.a.createElement("div",{className:"button-toolbar",__source:{fileName:aa,lineNumber:326}},u.a.createElement("button",{className:"button-toolbar reload",title:Object(h.a)("Reload"),onClick:this.reload,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:m.gb.medium},__source:{fileName:aa,lineNumber:327}})):null,u.a.createElement("div",{className:"button-toolbar",__source:{fileName:aa,lineNumber:334}},u.a.createElement("button",{className:"button-toolbar home",title:Object(h.a)("Home"),onClick:this.home,disabled:!this.state.canReload,dangerouslySetInnerHTML:{__html:m.fb.medium},__source:{fileName:aa,lineNumber:335}})))),u.a.createElement("section",{className:"webpanel-content",__source:{fileName:aa,lineNumber:345}},u.a.createElement("webview",{ref:"webpanelwebview",name:"vivaldi-webpanel",__source:{fileName:aa,lineNumber:346}})))}}ia(na,"contextType",L.a);var ra=na,oa=a(977),la=a(6),ca=a(535),da=a(44),ua=a(31),ha=a(536),ma=a(125),pa=a(123),ga="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\panel.jsx";function ba(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const fa="vivaldi/x-panel-item-reg",_a="vivaldi/x-panel-item-web";function Na(){return{selectedPanel:Zt.a.getSelectedPanel(),panelWidth:Zt.a.getPanelWidth(),panelButtonsVisible:Zt.a.getPanelButtonsVisible(),panelContentVisible:Zt.a.getPanelContentVisible(),focusContent:Zt.a.getFocusContent(),isMailWindow:Zt.a.getIsMailWindow(),regPanels:Zt.a.getRegPanels(),webPanels:Zt.a.getWebPanels(),regPanelOrder:Zt.a.getRegPanelOrder(),webPanelOrder:Zt.a.getWebPanelOrder()}}function va(e,t){const a=e.faviconUrl?e.faviconUrl:e.contentUrl;return{id:e.id,title:"",faviconUrl:a,faviconUrlValid:!1!==e.faviconUrlValid,hasBeenActive:t}}function Ea(){const e=Na(),t=wa(e),a=[];return e.webPanels.forEach(i=>{const s=i.id===e.selectedPanel&&!1===t;a.push(va(i,s))}),e.webPanelData=a,e}function wa(e){const t=(e.panelToggleVisible?10:0)+(e.panelButtonsVisible?34:0);return e.panelWidth<=t}const Sa=[U.kKeyboardTabToAll,U.kPanelsAsOverlayAutoClose,U.kPanelsAsOverlayEnabled,U.kPanelsWindowShowUnread,U.kTabsCounterDetection,U.kTabsBarPosition,U.kThemeUseAnimation,U.kPanelsWebRemovedList,U.kPanelsWebToolbar];class Ca extends u.a.PureComponent{constructor(...e){super(...e),ba(this,"state",{isResizing:!1,downloadItems:0,downloadProgress:0,dropId:"",dropPosition:"",panelToggleVisible:j.a.getVisibleUI(this.context.vivaldiWindowId).panelToggle,unreadPages:0,webPanelData:[],minimized:Zt.a.getPanelButtonsVisible()&&!Zt.a.getPanelContentVisible()?"buttons":"auto",...Ea()}),ba(this,"blockNextBlur",!1),ba(this,"delayTimeout",-1),ba(this,"dndTimerId",-1),ba(this,"dropMode",{support:!1,copy:!1}),ba(this,"panelResource",[{id:"bookmarks",title:Object(h.a)("Bookmarks"),panel:Pt.a,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.t.large,...Object(la.a)("Bookmarks")},{id:"mail",title:Object(h.a)("Mail"),panel:fe.a,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.Z.large,...Object(la.a)("Mail")},{id:"contacts",title:Object(h.a)("Contacts"),panel:fe.a,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.tb.medium,...Object(la.a)("Contacts")},{id:"downloads",title:Object(h.a)("Downloads"),panel:Mt.a,available:!0,icon:m.H.large,...Object(la.a)("Downloads")},{id:"notes",title:Object(h.a)("Notes"),panel:$t.a,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.lb.small,...Object(la.a)("Notes")},{id:"history",title:Object(h.a)("History"),panel:zt,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.T.large,...Object(la.a)("History")},{id:"tabs",title:Object(h.a)("title","Window"),panel:oa.a,available:!0,icon:m.rc.large,...Object(la.a)("title","Window")},{id:"calendar",title:Object(h.a)("Calendar"),panel:fe.a,available:!j.a.isGuestSession(this.context.vivaldiWindowId),icon:m.v.large,...Object(la.a)("Calendar")}]),ba(this,"_onStoreChange",()=>{let e=Na();const t=e.webPanels.length===this.state.webPanelData.length&&this.state.selectedPanel===e.selectedPanel&&wa(this.state)===wa(e)?void 0:e.selectedPanel;this.setupWebPanelData(e.webPanels,t),e.panelWidth<=10&&!e.panelContentVisible?e={...e,minimized:"auto"}:e.panelWidth<=44&&!e.panelContentVisible&&(e={...e,minimized:"buttons"}),this.setState(e)}),ba(this,"_onPageStoreChange",()=>{this.setState({unreadPages:c.a.getUnreadCount()})}),ba(this,"_onMessageReceived",(e,t,a)=>{if(e&&t.id===A.default.runtime.id&&e.action===ta.d){const t=this.getWebPanelDataByUrl(e.panelUrl);t&&(this.setWebPanelValue(t.id,"title",e.title),this.refs[t.id].setTitle(e.title))}}),ba(this,"_onDownloadStoreChange",()=>{this.setState({downloadItems:Lt.a.getTotalNumberOfDownloads(),downloadProgress:Lt.a.getTotalProgress()})}),ba(this,"_onWindowStoreChanged",()=>{const e=j.a.getVisibleUI(this.context.vivaldiWindowId).panelToggle;this.state.panelToggleVisible!==e&&this.setState({panelToggleVisible:e,panelWidth:Zt.a.getPanelWidth()})}),ba(this,"onCommandSpy",()=>{Object(Ct.a)(Nt.a.findDOMNode(this))||this.moveFocus("-1","current",!0)}),ba(this,"setSelected",e=>{Qt.a.toggleContent(e)}),ba(this,"isWebPanelSelected",()=>this.isWebPanel(this.state.selectedPanel)),ba(this,"isWebPanel",e=>{const t=O.a.getPanelPrefix();return e&&e.substr(0,t.length)===t}),ba(this,"handleDoubleClick",()=>{this.props.prefValues[U.kPanelsAsOverlayEnabled]&&this.props.prefValues[U.kPanelsAsOverlayAutoClose]||this.handlePanelSwitch()}),ba(this,"handleClickOutside",()=>{this.props.prefValues[U.kPanelsAsOverlayEnabled]&&this.props.prefValues[U.kPanelsAsOverlayAutoClose]&&this.state.panelContentVisible&&("buttons"===this.state.minimized?Qt.a.toggleContent(this.state.selectedPanel):Qt.a.togglePanel())}),ba(this,"onSlidebarPosition",Object(pa.a)((e,t)=>{const a=Nt.a.findDOMNode(this.refs.panelsContainer);if(!(a instanceof Element))return;const i=a.getBoundingClientRect();let s;switch(this.props.position){case"left":s=Math.round(e-i.left);break;case"right":s=Math.round(i.right-e);break;default:throw new Error("Unknown tabbar position")}this.setState({panelWidth:this.limitPanelWidth(s)})},64)),ba(this,"limitPanelWidth",e=>{const t=.618*this.context.innerWidth;return Math.min(Math.max(e,260),t)||260}),ba(this,"handlePanelSwitch",()=>{Qt.a.togglePanel()}),ba(this,"autoClosePanel",()=>{this.cancelTimeout(),this.state.selectedPanel&&(this.delayTimeout=setTimeout(()=>{this.state.panelContentVisible&&("buttons"===this.state.minimized?Qt.a.toggleContent(this.state.selectedPanel):Qt.a.togglePanel())},600))}),ba(this,"cancelTimeout",()=>{this.delayTimeout>0&&(clearTimeout(this.delayTimeout),this.delayTimeout=0)}),ba(this,"onDialogOpen",()=>{this.props.prefValues[U.kPanelsAsOverlayEnabled]&&this.props.prefValues[U.kPanelsAsOverlayAutoClose]&&this.state.panelContentVisible&&(this.blockNextBlur=!0)}),ba(this,"handleBlur",e=>{this.blockNextBlur||e.target instanceof Element&&e.target.classList.contains("home")?(this.blockNextBlur=!1,this.cancelTimeout()):this.autoClosePanel()}),ba(this,"showPanelSettings",()=>{Yt.a.showSettings()}),ba(this,"getWebPanelDataById",e=>{for(let t=0;t<this.state.webPanelData.length;t++){const a=this.state.webPanelData[t];if(a.id===e)return a}return null}),ba(this,"getWebPanelDataByUrl",e=>{const t=this.state.webPanelData.findIndex(t=>t.activeUrl===e);return-1===t?null:this.state.webPanelData[t]}),ba(this,"setupWebPanelData",(e,t)=>{if(this.state.webPanelData.length!==e.length||void 0!==t){const a=[];e.forEach(e=>{const i=this.getWebPanelDataById(e.id);if(i)!0!==i.hasBeenActive&&e.id===t&&(i.hasBeenActive=!0),a.push(i);else{const i=e.id===t;a.push(va(e,i))}}),this.setState({webPanelData:a})}}),ba(this,"isPanelOpen",e=>this.state.panelContentVisible&&this.state.selectedPanel===e),ba(this,"isPanelAvailable",e=>{let t=this.state.regPanels;for(let a=0;a<t.length;a++)if(t[a].id===e)return!1!==t[a].available;t=this.state.webPanels;for(let a=0;a<t.length;a++)if(t[a].id===e)return!1!==t[a].available;return!1}),ba(this,"setWebPanelValue",(e,t,a)=>{this.setupWebPanelData(this.state.webPanels,void 0);let i=-1;for(let s=0;s<this.state.webPanelData.length;s++){const n=this.state.webPanelData[s];if(n.id===e){"title"===t&&n.title!==a?i=s:"faviconUrl"!==t||n.faviconUrl===a&&!0===n.faviconUrlValid?"activeUrl"===t&&n.activeUrl!==a&&(i=s):i=s;break}}if(-1!==i){const s=[];for(let e=0;e<this.state.webPanelData.length;e++){const n=this.state.webPanelData[e];e===i&&("title"===t?n.title=a:"faviconUrl"===t?(n.faviconUrl=a,n.faviconUrlValid=!0):"activeUrl"===t&&(n.activeUrl=a)),s.push(n)}this.setState({webPanelData:s}),"title"===t?O.a.setTitle(e,a):"faviconUrl"===t?O.a.setFaviconUrl(e,a):"activeUrl"===t&&O.a.setActiveUrl(e,a)}}),ba(this,"_getPanelInstanceById",e=>{const t="panel-"+e;return this.refs[t]}),ba(this,"clearDndTimer",()=>{-1!==this.dndTimerId&&(clearTimeout(this.dndTimerId),this.dndTimerId=-1)}),ba(this,"onDragEnterBar",e=>{e.preventDefault(),e.stopPropagation();const t={};t.support=e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===fa||e===_a),t.copy=t.support&&!e.dataTransfer.types.some(e=>e===_a)&&!e.dataTransfer.types.some(e=>e===fa)&&!e.dataTransfer.types.some(e=>"vivaldi/x-tab-entries"===e),this.dropMode=t}),ba(this,"onDragOverBar",e=>{e.preventDefault(),e.stopPropagation(),this.dropMode.support?(this.clearDndTimer(),this.dropMode.copy||e.dataTransfer.types.some(e=>e===_a)?this.state.webPanelOrder.length>0&&this.setState(e=>({dropId:e.webPanelOrder[e.webPanelOrder.length-1],dropPosition:"below"})):e.dataTransfer.types.some(e=>e===fa)&&this.state.regPanelOrder.length>0&&0===this.state.webPanelOrder.length&&this.setState(e=>({dropId:e.regPanelOrder[e.regPanelOrder.length-1],dropPosition:"below"})),e.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move"):e.dataTransfer.dropEffect="none"}),ba(this,"onDropBar",e=>{if(e.preventDefault(),e.stopPropagation(),this.dropMode.support){const t=e.dataTransfer.getData(_a);t?Qt.a.move(t,this.state.dropId,this.state.dropPosition):s.a.getUrlsFromEventPromise(e,!0).then(e=>{e.forEach(e=>{O.a.addByUrl(e.url)})})}this.setState({dropId:"",dropPosition:""})}),ba(this,"onDragStartButton",(e,t)=>{if(t.dataTransfer.effectAllowed="all",this.isWebPanel(e)){t.dataTransfer.setData(_a,[e]);const a=O.a.getUrlById(e);a&&(t.dataTransfer.setData("text/uri-list",[a]),t.dataTransfer.setData("text/plain",[a]))}else t.dataTransfer.setData(fa,[e])}),ba(this,"onDragEnterButton",(e,t)=>{t.preventDefault(),t.stopPropagation();let a={};if(this.isWebPanel(e))a.support=t.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===_a),a.copy=a.support&&!t.dataTransfer.types.some(e=>e===_a||"vivaldi/x-tab-entries"===e);else{const i=this._getPanelInstanceById(e);i&&"function"==typeof i.onDragEnterPanelButton&&(a=i.onDragEnterPanelButton(t)),a.support||(a.support=t.dataTransfer.types.some(e=>e===fa))}this.dropMode=a}),ba(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.clearDndTimer(),this.dndTimerId=setTimeout(()=>{this.dndTimerId=-1,this.setState({dropId:"",dropPosition:""})},ua.f)}),ba(this,"onDragOverButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),!1===this.dropMode.support)t.dataTransfer.dropEffect="none",this.setState({dropId:"",dropPosition:""});else{if(this.dropMode.onButton)return void(t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move");this.clearDndTimer(),t.dataTransfer.dropEffect=this.dropMode.copy?"copy":"move";const a=t.currentTarget;if(!(a instanceof Element))return;const i=a.getBoundingClientRect(),s=34,n=(t.clientY-i.top)/s;let r="";!1?r=n<=.25?"above":n>.75?"below":"on":n<=.5?r="above":n>.5&&(r="below"),this.state.dropId===e&&this.state.dropPosition===r||this.setState({dropId:e,dropPosition:r})}}),ba(this,"onDropButton",(e,t)=>{if(t.preventDefault(),t.stopPropagation(),this.dropMode.support)if(this.dropMode.onButton){const a=this._getPanelInstanceById(e);a&&"function"==typeof a.onDropPanelButton&&a.onDropPanelButton(t)}else{const a=this.isWebPanel(e)?t.dataTransfer.getData(_a):t.dataTransfer.getData(fa);if(a)Qt.a.move(a,this.state.dropId,this.state.dropPosition);else{const a=this.state.dropPosition;s.a.getUrlsFromEventPromise(t,!0).then(t=>{if("on"===a)t.length>0&&O.a.setContentUrl(e,t[0].url);else{let i=this.state.webPanelOrder.findIndex(t=>t===e);-1!==i&&"below"===a&&i++,O.a.addByUrls(t.map(e=>e.url),i)}})}}this.setState({dropId:"",dropPosition:""})}),ba(this,"onDragButtonEnd",e=>{this.setState({dropId:"",dropPosition:""})}),ba(this,"getPanelButtonMenu",e=>{const t=Zt.a.getResizableByPanel(e);return[{type:"checkbox",handler:Qt.a.setPanelResizable.bind(Qt.a,e,!t),checked:Boolean(t),...Object(la.a)("Separate Width")},{name:"---"},{items:this.getPanelSelectorMenu(),...Object(la.a)("Panels")}]}),ba(this,"getWebPanelButtonMenu",(e,t=!0)=>{const a=Zt.a.getResizableByPanel(e.id);return[{items:this.getOpenInPageMenu(e),...Object(la.a)("Open in")},{handler:O.a.copyWebPanelAdress.bind(O.a,e.id),...Object(la.a)("Copy Web Panel Address")},{name:"---"},{handler:O.a.setMobileMode.bind(O.a,e.id,!0),visible:!(!0===e.mobileMode),...Object(la.a)("Show Mobile Version")},{handler:O.a.setMobileMode.bind(O.a,e.id,!1),visible:Boolean(!0===e.mobileMode),...Object(la.a)("Show Desktop Version")},{type:"checkbox",handler:Qt.a.setPanelResizable.bind(Qt.a,e.id,!a),checked:Boolean(a),...Object(la.a)("Separate Width")},{items:this.getWebPanelContentMenu(e),...Object(la.a)("Toolbar")},{name:"---"},{handler:O.a.removeById.bind(O.a,e.id),...Object(la.a)("Remove Web Panel")},{name:"---",visible:t},{items:this.getPanelSelectorMenu(),visible:t,...Object(la.a)("Panels")}]}),ba(this,"getRemovedWebPanelsMenu",()=>{const e=[];return this.props.prefValues[U.kPanelsWebRemovedList].forEach((t,a)=>{e.push({name:t.title||t.url||Object(h.a)("Unknown Web Panel"),mnemonic:!1,handler:O.a.recoverWebPanel.bind(O.a,a)})}),e.length>0&&(e.push({name:"---"}),e.push({handler:O.a.emptyTrash,...Object(la.a)("panel","Clear All")})),e}),ba(this,"getPanelSelectorMenu",()=>{const e=[];this.state.regPanelOrder.forEach(t=>{if(Zt.a.canRenderInWindow(t)&&Zt.a.shouldShowPanel(t)){const a=this.panelResource.filter(e=>e.id===t)[0];a.available&&e.push({handler:this.handlePanelSelector.bind(this,a.id),type:"checkbox",checked:this.isPanelAvailable(a.id),label:a.label,labelEnglish:a.labelEnglish})}});const t=this.state.webPanels;t&&t.length>0&&(e.push({name:"---"}),this.state.webPanelOrder.forEach(a=>{const i=t.filter(e=>e.id===a)[0];e.push({name:i.title||i.contentUrl||Object(h.a)("Unknown Web Panel"),mnemonic:!1,handler:this.handlePanelSelector.bind(this,i.id),type:"checkbox",checked:this.isPanelAvailable(i.id)})}));const a=this.getRemovedWebPanelsMenu();return a.length>0&&(e.push({name:"---"}),e.push({items:a,...Object(la.a)("Removed Web Panels")})),e}),ba(this,"getOpenInPageMenu",e=>[{handler:O.a.openInTab.bind(O.a,e.id,!1,!1),...Object(la.a)("open in","New Tab")},{handler:O.a.openInTab.bind(O.a,e.id,!1,!0),...Object(la.a)("Background Tab")},{handler:O.a.openInTab.bind(O.a,e.id,!0,!1),...Object(la.a)("Current Tab")},{name:"---"},{handler:O.a.openInWindow.bind(O.a,e.id,!1),...Object(la.a)("open in","New Window")},{handler:O.a.openInWindow.bind(O.a,e.id,!0),...Object(la.a)("open in","Private Window")}]),ba(this,"getWebPanelContentMenu",e=>{const t=this.props.prefValues[U.kPanelsWebToolbar];return[{handler:O.a.setUIContent.bind(O.a,{showToolbar:!0}),visible:!(!0===t.showToolbar),...Object(la.a)("Show")},{handler:O.a.setUIContent.bind(O.a,{showToolbar:!1}),visible:Boolean(!0===t.showToolbar),...Object(la.a)("Hide")},{handler:O.a.setUIContent.bind(O.a,{allControls:!t.allControls,showToolbar:t.showToolbar||!t.allControls}),type:"checkbox",checked:t.allControls,visible:Boolean(!0===t.showToolbar),...Object(la.a)("Display All Controls")}]}),ba(this,"handlePanelSelector",e=>{this.isPanelAvailable(e)?(this.isPanelOpen(e)&&(Zt.a.getAvailablePanelCount()>1?Zt.a.getLastAvailablePanel()===e?Qt.a.showNextPanel("previous"):Qt.a.showNextPanel("next"):Qt.a.setContentVisible(!1)),Qt.a.setAvailable(e,!1)):(Qt.a.setAvailable(e,!0),Qt.a.toggleContent(e))}),ba(this,"handlePanelButtonDown",e=>{Object(ma.d)(e)||e.preventDefault()}),ba(this,"handlePanelButtonUp",(e,t)=>{t.button!==da.a.kCenter||0!==t.buttons||Object(ma.d)(t)||this.handlePanelButtonClick(e,t)}),ba(this,"handlePanelButtonClick",(e,t)=>{if(t.button===da.a.kCenter||t.button===da.a.kLeft&&Object(ma.a)(t))if(this.isWebPanel(e))O.a.openInTab(e,!1,!0);else switch(e){case"bookmarks":Yt.a.showBookmarks();break;case"history":Yt.a.showHistory();break;case"notes":Yt.a.showNotes();break;case"calendar":Yt.a.showCalendar();break;case"mail":this.setSelected(e),Yt.a.showMail()}else Object(ma.d)(t)||this.setSelected(e)}),ba(this,"handleSliderDown",()=>{this.setState({isResizing:!0})}),ba(this,"handleSliderUp",()=>{this.setState({isResizing:!1}),Qt.a.setWidth(this.state.selectedPanel,this.state.panelWidth)}),ba(this,"handlePanelButtonKeyDown",(e,t)=>{switch(t.key){case"ArrowUp":this.moveFocus(e,"left",!1);break;case"ArrowDown":this.moveFocus(e,"right",!1);break;case"Escape":this.leaveBar();break;default:return}t.preventDefault(),t.stopPropagation()}),ba(this,"moveFocus",(e,t,a)=>{if(!0===a||Object(Ct.a)(Nt.a.findDOMNode(this))){const a=Array.from(document.querySelectorAll("button.panelbtn")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){const t=parseInt(e)<0?0:a.indexOf(e);if(-1===t)return;e=a[t]}else if("left"===t||"right"===t){if(1===a.length)return;let i=a.indexOf(e);i="right"===t?i+1>=a.length?0:i+1:i<=0?a.length-1:i-1,e=a[i]}const i=document.querySelector(`button.panelbtn[data-id="${e}"]`);i&&i instanceof HTMLButtonElement&&i.focus()}}),ba(this,"leaveBar",()=>{Q.default.executeActions("COMMAND_FOCUS_WEBVIEW")}),ba(this,"getPanelButtonTitleById",(e,t)=>"downloads"===e&&this.state.downloadItems>0?Object(h.a)("Downloads")+" "+Object(h.a)("($1 active transfer)","($1 active transfers)",[this.state.downloadItems]):t),ba(this,"getPanelButtonClassById",(e,t,a)=>{const i={panelbtn:!0};return a&&(i.uifocusstop=!0),t?i.webviewbtn=!0:(i[e]=!0,"downloads"===e&&(i["in-progress"]=this.state.downloadItems>0)),i.active=this.state.selectedPanel===e&&!0===this.state.panelContentVisible,i.dragoverAbove=e===this.state.dropId&&"above"===this.state.dropPosition,i.dragoverBelow=e===this.state.dropId&&"below"===this.state.dropPosition,i.dragoverInside=e===this.state.dropId&&"on"===this.state.dropPosition,We()(i)}),ba(this,"getPanelButtonTabIndexById",e=>this.state.selectedPanel===e?this.props.prefValues[U.kKeyboardTabToAll]:-1),ba(this,"onRegButtonContextMenu",(e,t)=>{Object(Jt.a)(this.context.vivaldiWindowId,this.getPanelButtonMenu(e))(t)}),ba(this,"onWebButtonContextMenu",(e,t)=>{Object(Jt.a)(this.context.vivaldiWindowId,this.getWebPanelButtonMenu(e))(t)}),ba(this,"onBarContextMenu",e=>{Object(Jt.a)(this.context.vivaldiWindowId,this.getPanelSelectorMenu)(e)}),ba(this,"renderPanelButtonById",e=>{if(this.isPanelAvailable(e)&&Zt.a.canRenderInWindow(e)&&Zt.a.shouldShowPanel(e)){const t=this.panelResource.filter(t=>t.id===e),a=this.state.selectedPanel===e&&this.state.panelButtonsVisible;return u.a.createElement("button",{key:"button_"+e,"data-id":e,title:this.getPanelButtonTitleById(e,t[0].title),className:this.getPanelButtonClassById(e,!1,a),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:this.onRegButtonContextMenu.bind(this,e),onMouseDown:this.handlePanelButtonDown,onMouseUp:this.handlePanelButtonUp.bind(this,e),onKeyDown:this.handlePanelButtonKeyDown.bind(this,e),onClick:this.handlePanelButtonClick.bind(this,e),onDrop:this.onDropButton.bind(this,e),onDragEnter:this.onDragEnterButton.bind(this,e),onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,e),onDragStart:this.onDragStartButton.bind(this,e),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:ga,lineNumber:1172}},u.a.createElement("span",{dangerouslySetInnerHTML:{__html:t[0].icon},__source:{fileName:ga,lineNumber:1191}}),this.renderPanelButtonOverlayById(e))}return null}),ba(this,"renderPanelButtonOverlayById",e=>"mail"===e?u.a.createElement(fe.a,{__source:{fileName:ga,lineNumber:1201}}):"downloads"===e?u.a.createElement("div",{className:"progress",__source:{fileName:ga,lineNumber:1204}},u.a.createElement("div",{className:"loaded",style:{width:`${100*this.state.downloadProgress}%`},__source:{fileName:ga,lineNumber:1205}})):"tabs"===e&&this.props.prefValues[U.kPanelsWindowShowUnread]&&this.state.unreadPages>0?u.a.createElement("span",{className:"button-badge",__source:{fileName:ga,lineNumber:1214}},this.state.unreadPages):null),ba(this,"renderAllPanelButtons",()=>[...this.state.regPanelOrder.map(this.renderPanelButtonById),...this.state.webPanelOrder.map(this.renderWebPanelButtonById)]),ba(this,"renderAllPanels",()=>{const e=[];this.state.regPanelOrder.forEach(t=>{if(this.isPanelAvailable(t)&&Zt.a.canRenderInWindow(t)){const a=this.panelResource.filter(e=>e.id===t)[0];a.panel&&e.push(u.a.createElement(Ce.a,{key:"panel-"+t,__source:{fileName:ga,lineNumber:1238}},u.a.createElement(a.panel,{ref:"panel-"+t,keyAccess:this.props.prefValues[U.kKeyboardTabToAll],title:a.title,open:this.isPanelOpen(t),onOpenDialog:this.onDialogOpen,__source:{fileName:ga,lineNumber:1239}})))}});const t=this.state.webPanels;if(this.state.webPanelData.length===t.length){const a=[];this.state.webPanelOrder.forEach(e=>{const i=t.filter(t=>{if(t.id===e&&!1!==t.available){const t=this.getWebPanelDataById(e);return t&&!0===t.hasBeenActive}return!1});i.length>0&&a.push(this.renderWebPanelById(i[0].id))}),e.push(u.a.createElement("div",{key:"webpanelwrapper",className:this.isWebPanelSelected()?"webpanel-stack":"webpanel-stack hidden",__source:{fileName:ga,lineNumber:1272}},a))}return e}),ba(this,"renderWebPanelById",e=>{const t=this.state.webPanels.filter(t=>t.id===e)[0],a=this.state.panelContentVisible&&this.state.selectedPanel===e;return u.a.createElement(ra,{key:e,ref:e,isVisible:a,focusContent:this.state.focusContent&&a,panelUI:this.props.prefValues[U.kPanelsWebToolbar],setWebPanelValue:this.setWebPanelValue,getWebPanelButtonMenu:this.getWebPanelButtonMenu,webPanel:t,__source:{fileName:ga,lineNumber:1290}})}),ba(this,"renderWebPanelButtonById",e=>{if(this.isPanelAvailable(e)){let t,a=O.a.getFaviconPrefix();const i=this.state.webPanels.filter((i,s)=>{if(i.id===e){const i=this.getWebPanelDataById(e);return i&&(t=i.title,t.length>0&&(t+="\n"),i.faviconUrlValid&&(a+=i.faviconUrl)),!0}return!1});if(1===i.length){const s=i[0],n=Object(ca.a)(t,s.activeUrl,9);t+=s.contentUrl;const r=this.state.selectedPanel===e&&this.state.panelButtonsVisible;return u.a.createElement("button",{key:"button_"+e,"data-id":e,title:t,className:this.getPanelButtonClassById(e,!0,r),tabIndex:this.getPanelButtonTabIndexById(e),onContextMenu:this.onWebButtonContextMenu.bind(this,s),onMouseUp:this.handlePanelButtonUp.bind(this,e),onMouseDown:this.handlePanelButtonDown,onClick:this.handlePanelButtonClick.bind(this,e),onKeyDown:this.handlePanelButtonKeyDown.bind(this,e),onDrop:this.onDropButton.bind(this,e),onDragEnter:this.onDragEnterButton.bind(this,e),onDragLeave:this.onDragLeave,onDragOver:this.onDragOverButton.bind(this,e),onDragStart:this.onDragStartButton.bind(this,e),onDragEnd:this.onDragButtonEnd,draggable:"true",__source:{fileName:ga,lineNumber:1337}},this.props.prefValues[U.kTabsCounterDetection]&&n&&u.a.createElement("span",{className:"button-badge",__source:{fileName:ga,lineNumber:1357}},n),u.a.createElement("img",{src:a,alt:"",__source:{fileName:ga,lineNumber:1360}}))}}return null})}componentDidMount(){Lt.a.addChangeListener(this._onDownloadStoreChange),Zt.a.addChangeListener(this._onStoreChange),c.a.addChangeListener(this._onPageStoreChange),this.windowStoreToken=j.a.addListener(this._onWindowStoreChanged),A.default.runtime.onMessage.addListener(this._onMessageReceived),xt.a.addListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy)}componentWillUnmount(){Lt.a.removeChangeListener(this._onDownloadStoreChange),Zt.a.removeChangeListener(this._onStoreChange),c.a.removeChangeListener(this._onPageStoreChange),this.windowStoreToken.remove(),A.default.runtime.onMessage.removeListener(this._onMessageReceived),xt.a.removeListener("COMMAND_FOCUS_PANELBAR",this.onCommandSpy),this.clearDndTimer()}render(){const{panelButtonsVisible:e,panelContentVisible:t,panelWidth:a,isResizing:i}=this.state,s=this.props.prefValues,{position:n}=this.props,r=j.a.isGuestSession(this.context.vivaldiWindowId),o=(this.state.panelToggleVisible?10:0)+(e?34:0),l=wa(this.state),c=s[U.kPanelsAsOverlayEnabled],d=We()({[n]:!0,button:this.state.panelToggleVisible,switcher:a<=10,icons:e&&l,overlay:c,minimized:c&&"buttons"===this.state.minimized,resizing:i}),p="right"===n&&e||"left"===n&&!e?"0 0 0 8 4 4":"4 0 4 8 0 4",g=t?128:64,b=a-o,f=c&&s[U.kPanelsAsOverlayAutoClose]&&t,_=i?100:"left"===n?2:3,N="left"===n?a-_:-(a-o+_),v=We()({preferences:!0,panelbtn:!0}),E=this.renderAllPanelButtons().filter(e=>null!==e);return u.a.createElement(ha.VelocityComponent,{animation:{width:c?a-b:a},duration:s[U.kThemeUseAnimation]&&!i?g:0,begin:e=>e[0].style.removeProperty("display"),__source:{fileName:ga,lineNumber:1420}},u.a.createElement(ft.a,{focusName:"focus_panel",id:"panels-container",ref:"panelsContainer",className:d,__source:{fileName:ga,lineNumber:1426}},u.a.createElement("div",{id:"panels",onBlur:f?this.handleBlur:null,onFocus:f?this.cancelTimeout:null,__source:{fileName:ga,lineNumber:1432}},this.state.panelToggleVisible&&u.a.createElement("div",{id:"panel_switch",title:e?Object(h.a)("Hide Panel"):Object(h.a)("verb","Show Panel"),onClick:this.handlePanelSwitch,__source:{fileName:ga,lineNumber:1436}},u.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"4px",height:"8px",viewBox:"0 0 4 8",__source:{fileName:ga,lineNumber:1442}},u.a.createElement("polygon",{points:p,__source:{fileName:ga,lineNumber:1448}}))),u.a.createElement("div",{id:"switch",onContextMenu:this.onBarContextMenu,onDragEnter:this.onDragEnterBar,onDragLeave:this.onDragLeave,onDragOver:this.onDragOverBar,onDrop:this.onDropBar,__source:{fileName:ga,lineNumber:1452}},E,!r&&u.a.createElement(Dt,{id:"addwebpanel",webPanels:this.state.webPanels,uiFocus:0===E.length,addNew:O.a.addByUrl,moveFocus:this.moveFocus,leaveBar:this.leaveBar,rejectMimeType:_a,keyAccess:this.getPanelButtonTabIndexById(),__source:{fileName:ga,lineNumber:1463}}),!r&&u.a.createElement("button",{className:v,title:Object(h.a)("Settings"),"data-id":"preferences",tabIndex:s[U.kKeyboardTabToAll],onMouseDown:this.handlePanelButtonDown,onKeyDown:this.handlePanelButtonKeyDown.bind(this,"preferences"),onClick:this.showPanelSettings,dangerouslySetInnerHTML:{__html:m.Rb.large},__source:{fileName:ga,lineNumber:1474}})),this.state.selectedPanel&&u.a.createElement("div",{className:"panel-group",style:c?{width:l?0:a-o,[n]:o}:null,__source:{fileName:ga,lineNumber:1489}},u.a.createElement("div",{className:"panel-collapse-guard",style:{minWidth:i?"unset":b,maxWidth:i?"unset":b},__source:{fileName:ga,lineNumber:1495}},this.renderAllPanels()))),!l&&u.a.createElement(qt.a,{style:c?{left:N}:null,onSlidebarPosition:this.onSlidebarPosition,onStart:this.handleSliderDown,onStop:this.handleSliderUp,onDoubleClick:this.handleDoubleClick,offset:1,position:n,__source:{fileName:ga,lineNumber:1506}})))}}ba(Ca,"contextType",L.a);var ka=Object(ae.a)(Object(kt.a)(Ca),Sa),ya="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\RazerChromaInfoDialog.jsx";function Oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Aa=[U.kRazerChromaHasShownPromotion];class Ta extends d.Component{constructor(e){super(e),Oa(this,"onClose",()=>{x.a.set(U.kRazerChromaHasShownPromotion,!0),this.props.onClose()}),Oa(this,"openSettings",()=>{Yt.a.showSettings("themes"),this.onClose()})}render(){return d.createElement(l.a,{onRequestClose:se.default,dialogWidth:400,viewMode:"default-browser slide",__source:{fileName:ya,lineNumber:41}},d.createElement("header",{className:"dialog-header",__source:{fileName:ya,lineNumber:46}},d.createElement("h1",{className:"dialog-title",__source:{fileName:ya,lineNumber:47}},Object(h.a)("Razer Chroma device detected."))),d.createElement("div",{className:"dialog-content",__source:{fileName:ya,lineNumber:50}},d.createElement("p",{__source:{fileName:ya,lineNumber:51}},Object(h.a)("Vivaldi supports connected Razer Chroma devices. You can enable them with Vivaldi from the Themes section in settings."))),d.createElement("footer",{className:"dialog-footer",__source:{fileName:ya,lineNumber:56}},d.createElement("input",{type:"submit",value:Object(h.a)("Go to Theme Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:ya,lineNumber:57}}),d.createElement("input",{type:"button",value:Object(h.a)("Close"),onClick:this.onClose,__source:{fileName:ya,lineNumber:62}})))}}var Ia=Object(ae.a)(Ta,Aa),Da="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\saveSessionDialog.jsx";function Pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xa extends u.a.Component{constructor(...e){super(...e),Pa(this,"state",{shown:!0,name:"",invalidInput:!1,errorSaving:!1,saveOnlyCurrentWindow:!1}),Pa(this,"_getSaveSelected",()=>!!("selected"===this.props.options.mode&&this.props.options.ids&&this.props.options.ids.length>0)),Pa(this,"_close",()=>{this.state.shown&&this.setState(e=>({shown:!1}),()=>this.props.onClose())}),Pa(this,"onSaveSession",()=>{const e={saveOnlyWindowId:0};this._getSaveSelected()?(e.saveOnlyWindowId=this.context.vivaldiWindowId,e.ids=this.props.options.ids):!0===this.state.saveOnlyCurrentWindow&&(e.saveOnlyWindowId=this.context.vivaldiWindowId),Ae.a.sessionsPrivate.saveOpenTabs(this.state.name,e,e=>{0===e?this.props.onClose():this.setState({errorSaving:!0})})}),Pa(this,"isValidName",e=>/^[^\\/:\*\?"<>\|]+$/.test(e)&&!/^\./.test(e)&&!/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i.test(e)),Pa(this,"nameChange",e=>{""===e.target.value||this.isValidName(e.target.value)?this.setState({name:e.target.value,invalidInput:!1}):this.setState({invalidInput:!0})}),Pa(this,"_toggleSaveOnlyCurrentWindow",()=>{this.setState(e=>({saveOnlyCurrentWindow:!e.saveOnlyCurrentWindow}))})}componentDidMount(){this.refs.inputName.focus()}render(){var e="";!0===this.state.invalidInput?e=Object(h.a)("Invalid character in the session name."):this.state.errorSaving&&(e=Object(h.a)("Error saving the session."));const t=this._getSaveSelected()?Object(h.a)("session","Save Selected Tabs as Session"):Object(h.a)("session","Save Open Tabs as Session");return u.a.createElement(l.a,{onRequestClose:this._close,__source:{fileName:Da,lineNumber:117}},u.a.createElement("div",{className:"save-session",__source:{fileName:Da,lineNumber:118}},u.a.createElement("header",{className:"dialog-header",__source:{fileName:Da,lineNumber:119}},u.a.createElement("h1",{className:"dialog-title",__source:{fileName:Da,lineNumber:120}},t)),u.a.createElement("form",{__source:{fileName:Da,lineNumber:122}},u.a.createElement("div",{className:"dialog-content session-dialog",__source:{fileName:Da,lineNumber:123}},u.a.createElement("div",{__source:{fileName:Da,lineNumber:124}},u.a.createElement("input",{type:"text",ref:"inputName",placeholder:Object(h.a)("Session Name"),onChange:this.nameChange,spellCheck:"false",__source:{fileName:Da,lineNumber:125}})),!this._getSaveSelected()&&u.a.createElement("label",{className:"dialog-checkbox",__source:{fileName:Da,lineNumber:132}},u.a.createElement("input",{type:"checkbox",checked:this.state.saveOnlyCurrentWindow,onChange:this._toggleSaveOnlyCurrentWindow,__source:{fileName:Da,lineNumber:133}}),u.a.createElement("span",{__source:{fileName:Da,lineNumber:136}},Object(h.a)("Save Only Tabs In Current Window")))),""!==e&&u.a.createElement("div",{className:"error-validation",__source:{fileName:Da,lineNumber:141}},u.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:Da,lineNumber:142}})),u.a.createElement("footer",{className:"dialog-footer",__source:{fileName:Da,lineNumber:147}},u.a.createElement("input",{type:"submit",className:"primary",onClick:this.onSaveSession,value:Object(h.a)("Save"),disabled:!0===this.state.invalidInput,__source:{fileName:Da,lineNumber:148}}),u.a.createElement("input",{type:"button",onClick:this._close,value:Object(h.a)("Cancel"),__source:{fileName:Da,lineNumber:153}})))))}}Pa(xa,"contextType",L.a);var Ma=xa,La=a(440),ja=a(127),Ba=a(46),Ra=a(544),Fa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\startup\\SetVivaldiDefaultBrowserDlg.jsx";class Ua extends u.a.Component{constructor(...e){var t,a,i;super(...e),i=()=>{this.props.onClose()},(a="handleClick")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return u.a.createElement(l.a,{onRequestClose:this.handleClick,viewMode:"default-browser slide",__source:{fileName:Fa,lineNumber:17}},u.a.createElement(Ra.a,{onClose:this.handleClick,__source:{fileName:Fa,lineNumber:18}}))}}var Wa=Ua,Ha=a(451),Va=a(520),Ga=a(196),Ka=a(101),za="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\dialogs\\SyncWarningDialog.jsx";function Ya(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $a extends d.Component{constructor(...e){super(...e),Ya(this,"state",{visible:!1}),Ya(this,"onSharedDataChanged",(e,t)=>{"syncErrorReport"===e&&"reported"===t&&this.setState({visible:!1})}),Ya(this,"onStoreChange",()=>{const e=Object(Ka.b)(Ka.a.getState()),t=Ga.a.getState().engineData;(t.isFirstSetupComplete||"disable_sync_on_client"===t.protocolErrorClientAction)&&("credentialsMissing"===e||"loginFailed"===e||t.needsDecryptionPassword||"failed"===t.engineState||"disable_sync_on_client"===t.protocolErrorClientAction?Ae.a.utilities.getSharedData({key:"syncErrorReport",value:"canReport"},e=>{"canReport"===e&&this.setState({visible:!0})}):"loggedIn"!==e||"started"!==t.engineState||t.needsDecryptionPassword||Ae.a.utilities.setSharedData({key:"syncErrorReport",value:"canReport"}))}),Ya(this,"onClose",()=>{Ae.a.utilities.setSharedData({key:"syncErrorReport",value:"reported"})}),Ya(this,"openSettings",()=>{Yt.a.showSettings("sync"),this.onClose()})}componentDidMount(){this.syncStoreToken=Ga.a.addListener(this.onStoreChange),this.vivaldiAccountStoreToken=Ka.a.addListener(this.onStoreChange),Ae.a.utilities.onSharedDataUpdated.addListener(this.onSharedDataChanged),this.onStoreChange()}componentWillUnmount(){this.syncStoreToken.remove(),this.vivaldiAccountStoreToken.remove()}render(){return this.state.visible?d.createElement(l.a,{onRequestClose:this.onClose,dialogWidth:400,viewMode:"default-browser slide",__source:{fileName:za,lineNumber:88}},d.createElement("header",{className:"dialog-header",__source:{fileName:za,lineNumber:93}},d.createElement("h1",{className:"dialog-title",__source:{fileName:za,lineNumber:94}},Object(h.a)("Sync Disabled"))),d.createElement("div",{className:"dialog-content",__source:{fileName:za,lineNumber:97}},d.createElement("p",{__source:{fileName:za,lineNumber:98}},Object(h.a)("An issue caused Vivaldi Sync to stop working. You can find more details in the Sync Settings."))),d.createElement("footer",{className:"dialog-footer",__source:{fileName:za,lineNumber:103}},d.createElement("input",{type:"submit",value:Object(h.a)("Go to Sync Settings"),onClick:this.openSettings,autoFocus:!0,__source:{fileName:za,lineNumber:104}}),d.createElement("input",{type:"button",value:Object(h.a)("Close"),onClick:this.onClose,__source:{fileName:za,lineNumber:109}}))):null}}var Qa=$a,Za=a(454),qa=a(69),Xa=a(212);function Ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ei=[U.kThemeScheduleEnabled,U.kThemeScheduleTimeline];class ti extends u.a.Component{constructor(e){if(super(e),Ja(this,"_scheduledChange",void 0),Ja(this,"onResume",()=>{switch(this.setTheme(),this.props.prefValues[U.kThemeScheduleEnabled]){case"system":this.clearSchedule(),qa.a.setSystemThemeSchedule();break;case"timeline":qa.a.revokeSystemThemeSchedule(),this.scheduleThemeChange();break;case"off":default:this.clearSchedule(),qa.a.revokeSystemThemeSchedule()}}),Ja(this,"clearSchedule",()=>{this._scheduledChange&&clearTimeout(this._scheduledChange)}),Ja(this,"scheduleThemeChange",()=>{const e=new Date,t=qa.a.getTimerByDate(e,Xa.b);if(t){const a=1e3*(60*(t.minutes+60*t.hours-60*e.getHours()-e.getMinutes())-e.getSeconds());this.clearSchedule(),"timeline"===this.props.prefValues[U.kThemeScheduleEnabled]&&(this._scheduledChange=setTimeout(()=>{this.setTheme(),this.scheduleThemeChange()},a))}}),"timeline"===this.props.prefValues[U.kThemeScheduleEnabled]){const e=qa.a.getTimerByDate(new Date,Xa.a);e&&qa.a.setTheme(qa.a.getTheme(e.themeName))}}componentDidMount(){Ae.a.utilities.onSuspend.addListener(this.clearSchedule),Ae.a.utilities.onResume.addListener(this.onResume),this.onResume()}componentWillUnmount(){this.clearSchedule(),qa.a.revokeSystemThemeSchedule(),Ae.a.utilities.onSuspend.removeListener(this.clearSchedule),Ae.a.utilities.onResume.removeListener(this.onResume)}componentDidUpdate(e){e.prefValues[U.kThemeScheduleEnabled]!==this.props.prefValues[U.kThemeScheduleEnabled]&&this.onResume()}setTheme(){const e=qa.a.getTimerByDate(new Date,Xa.a);e&&"timeline"===this.props.prefValues[U.kThemeScheduleEnabled]&&qa.a.setTheme(qa.a.getTheme(e.themeName))}render(){return null}}var ai=Object(ae.a)(ti,ei),ii=a(379),si=a(556),ni=a(1e3),ri=a(87),oi="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\TopMenu.jsx";function li(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ci=[U.kKeyboardTabToAll,U.kMenuIconType];class di extends u.a.PureComponent{constructor(...e){super(...e),li(this,"state",{activePage:c.a.getActivePage()}),li(this,"_onPageStoreChange",()=>{this.setState({activePage:c.a.getActivePage()})}),li(this,"close",e=>{e.stopPropagation(),ri.a.close(this.context.vivaldiWindowId)})}componentDidMount(){c.a.addChangeListener(this._onPageStoreChange)}componentWillUnmount(){c.a.removeChangeListener(this._onPageStoreChange)}render(){return u.a.createElement("div",{className:"topmenu",__source:{fileName:oi,lineNumber:63}},"icon"===this.props.prefValues[U.kMenuIconType]&&u.a.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:Object(h.a)("Double Click to Close"),tabIndex:"-1",__source:{fileName:oi,lineNumber:65}},u.a.createElement("span",{className:"application-icon",dangerouslySetInnerHTML:{__html:m.ab},__source:{fileName:oi,lineNumber:70}}),u.a.createElement("span",{className:"vivaldi-v",dangerouslySetInnerHTML:{__html:a(906)},__source:{fileName:oi,lineNumber:73}})),"burger"===this.props.prefValues[U.kMenuIconType]&&u.a.createElement("button",{className:"vivaldi-horizontal-icon",onDoubleClick:this.close,title:Object(h.a)("Double Click to Close"),tabIndex:"-1",__source:{fileName:oi,lineNumber:79}},u.a.createElement("span",{className:"burger-icon",dangerouslySetInnerHTML:{__html:a(907)},__source:{fileName:oi,lineNumber:84}})),u.a.createElement(ni.a,{horizontal:!0,keyAccess:this.props.prefValues[U.kKeyboardTabToAll],__source:{fileName:oi,lineNumber:89}}),u.a.createElement("div",{className:"horizontal-menu-pagetitle",__source:{fileName:oi,lineNumber:92}},Ne.a.getDisplayTitle(this.state.activePage)))}}li(di,"contextType",L.a);var ui=Object(ae.a)(di,ci),hi=a(562),mi=a(375),pi="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\WindowPortal.jsx";function gi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bi extends d.PureComponent{constructor(...e){super(...e),gi(this,"state",{appElm:void 0,contentWindow:void 0,windowState:void 0}),gi(this,"windowClosed",e=>{const{contentWindow:t}=this.state;t&&e===t.vivaldiWindowId&&(this.props.closePopupCallback(t),S.a.dispatch({actionType:"WINDOW_CLOSED",windowId:e}))}),gi(this,"onNewAppWindowCreated",(e,t)=>{if(-1===e||!t)return void console.error("WindowPortal onNewAppWindowCreated failed");t.vivaldiWindowId=e;const a={active:!0,fullScreen:!1,fullscreenMenubarShown:!1,guest:!1,html5FullScreen:!1,incognito:!1,minimized:!1,maximized:!1,minimalUI:!1,nativeDecorations:M.a.get(U.kWindowsUseNativeDecoration),type:this.props.windowType,visibleUI:j.a.getUIFromPrefs()};S.a.dispatch({actionType:C.a.WINDOW_SET_STATE,windowState:a,windowId:e}),t.onload=()=>{const e=t.document;if(!e.body)return;const i=e.body.appendChild(e.createElement("div"));i.id="app",this.detachFocusableEvents=Object(mi.a)(e),this.setState({appElm:i,contentWindow:t,windowState:a})}}),gi(this,"_onWindowStoreChanged",()=>{if(!this.state.contentWindow)return;const e=this.state.contentWindow.vivaldiWindowId,t=j.a.getState().get(e);this.state.windowState!==t&&this.setState({windowState:t})})}componentDidMount(){const e={bounds:this.props.getWindowBounds(),focused:!0,incognito:j.a.isIncognito(this.context.vivaldiWindowId)};ie.a.openWindowNew("window.html",e,this.onNewAppWindowCreated,this.props.windowType),Ae.a.windowPrivate.onWindowClosed.addListener(this.windowClosed),this.windowStoreToken=j.a.addListener(this._onWindowStoreChanged)}componentWillUnmount(){this.detachFocusableEvents(),this.windowStoreToken.remove(),Ae.a.windowPrivate.onWindowClosed.removeListener(this.windowClosed),this.state.contentWindow&&this.state.contentWindow.close()}render(){const{appElm:e,contentWindow:t,windowState:a}=this.state;if(!e||!t||!a)return null;const i=d.createElement(L.a.Provider,{value:t,__source:{fileName:pi,lineNumber:160}},d.createElement(ge.a,{__source:{fileName:pi,lineNumber:161}}),d.createElement("div",{id:"browser",className:this.props.getBrowserClasses(t.vivaldiWindowId,a),__source:{fileName:pi,lineNumber:162}},d.createElement("div",{id:"header",__source:{fileName:pi,lineNumber:165}},d.createElement(ii.a,{tabPosition:"none",isPopupWindow:!0,keyAccess:this.props.keyAccess,__source:{fileName:pi,lineNumber:166}})),d.createElement("div",{id:"main",__source:{fileName:pi,lineNumber:173}},d.createElement(Ce.a,{__source:{fileName:pi,lineNumber:174}},this.props.children))));return Nt.a.createPortal(i,e)}}var fi=bi,_i=a(249),Ni=(a(938),a(311)),vi=a(391),Ei=a(183);let wi=!1;var Si="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\main.jsx";function Ci(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ki=[U.kThemeWindowBackgroundAccentColorBlend,U.kThemeWindowBackgroundImageEnabled,U.kThemeWindowBackgroundImageScaling,U.kThemeWindowBackgroundImageUrl],yi=[U.kAddressBarPosition,U.kBiscuitVersion,U.kBookmarksBarDisplay,U.kBookmarksBarPosition,U.kKeyboardTabToAll,U.kKeyboardTabToAllUsesSystemDefault,U.kMenuDisplay,U.kPanelsPosition,U.kPanelsAsOverlayEnabled,U.kRazerChromaHasShownPromotion,U.kStartupShowMediaAvailableInformation,U.kStartupShowFfmpegInformation,U.kStatusBarDisplay,U.kTabsAtEdge,U.kTabsBarPosition,U.kTabsBarWidth,U.kTabsCloseButtonLeft,U.kTabsStackingMode,U.kThemeUseAnimation,U.kWindowsLinuxAltControls],Oi=Object(_i.a)(),Ai=["mousedown","pointerdown","touchstart"];class Ti extends u.a.PureComponent{constructor(e,t){super(e),Ci(this,"onDragStart",e=>{e.dataTransfer.getData("vivaldi/x-button-toolbar")&&this.setState({isDraggingButton:!0})}),Ci(this,"onDragEnd",e=>{this.state.isDraggingButton&&this.setState({isDraggingButton:!1})}),Ci(this,"createStartupDialogQueue",()=>{let e=!1;const t=new Map;Ae.a.utilities.getSharedData({key:ua.b,value:!1},a=>{if(!a){M.a.get(U.kStartupCheckIsDefault)&&!j.a.isGuestSession(this.context.vivaldiWindowId)&&j.a.isActive(this.context.vivaldiWindowId)&&Ae.a.utilities.isVivaldiDefaultBrowser(a=>{!1===a&&(t.set(ua.b,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:t}),Ae.a.utilities.setSharedData({key:ua.b,value:!0}))})}}),j.a.isIncognitoOrGuest(this.context.vivaldiWindowId)||Ae.a.utilities.isRazerChromaAvailable(a=>{a&&!this.props.prefValues[U.kRazerChromaHasShownPromotion]&&Ae.a.utilities.getSharedData({key:ua.e,value:!1},a=>{a||(t.set(ua.e,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:t}),Ae.a.utilities.setSharedData({key:ua.e,value:!0}))})}),"linux"===Object(_i.a)()&&this.props.prefValues[U.kStartupShowFfmpegInformation]&&Ae.a.utilities.getFFMPEGState(a=>{!0===a&&Ae.a.utilities.getSharedData({key:ua.c,value:!1},a=>{a||(t.set(ua.c,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:t}),Ae.a.utilities.setSharedData({key:ua.c,value:!0}))})}),"win"===Object(_i.a)()&&this.props.prefValues[U.kStartupShowMediaAvailableInformation]&&Ae.a.utilities.getMediaAvailableState(a=>{!1===a&&Ae.a.utilities.getSharedData({key:ua.d,value:!1},a=>{a||(t.set(ua.d,{active:!e,anchor:this.refs.webpageview}),e=!0,this.setState({startupDialogQueue:t}),Ae.a.utilities.setSharedData({key:ua.d,value:!0}))})})}),Ci(this,"storeQuickCommandSearch",e=>{this.setState({quickCommandValue:e})}),Ci(this,"closeStartupDialog",e=>{const t=this.state.startupDialogQueue;t.get(e)&&t.delete(e);for(const[e]of t){const a=t.get(e);if(a){a.active=!0;break}}this.setState((e,a)=>({startupDialogQueue:t})),this.forceUpdate()}),Ci(this,"shouldShowStartupDialog",e=>{const t=this.state.startupDialogQueue.get(e);return t&&t.active}),Ci(this,"_onActiveTabStatusText",(e,t)=>{e===this.context.vivaldiWindowId&&Xt.a.setStatus(t)}),Ci(this,"_onPrefsCacheChanged",(e,t,a)=>{switch(a){case U.kThemeWindowBackgroundImageEnabled:case U.kThemeWindowBackgroundImageUrl:case U.kThemeWindowBackgroundImageScaling:case U.kThemeWindowBackgroundAccentColorBlend:qa.a.createImageBackground(e=>{this.setState({windowStyle:e})})}}),Ci(this,"_onSearchEngineStoreChanged",()=>{this.debouncedUpdateSearchMenu()}),Ci(this,"updateSearchMenu",e=>{function t(e,t){A.default.contextMenus.create({id:"selectSearchEngine",title:Object(h.a)("Search with"),contexts:["selection"]},()=>{A.default.runtime.lastError&&console.warn("contextMenus.create failed:",A.default.runtime.lastError.message),e.forEach(e=>{A.default.contextMenus.create({parentId:"selectSearchEngine",id:e.id,title:e.name,contexts:["selection"]},()=>{A.default.runtime.lastError&&console.warn("contextMenus.create failed",A.default.runtime.lastError.message)})})})}const a=Ba.a.getList();Ba.a.getDefault(j.a.isIncognito(this.context.vivaldiWindowId));e?t(a):A.default.contextMenus.remove("selectSearchEngine",()=>{t(a)})}),Ci(this,"_updateKeyUIMode",()=>{const e=this.props.prefValues;if(e[U.kKeyboardTabToAllUsesSystemDefault]){const t=this.props.prefValues[U.kSystemMacKeyboardUiMode];2===t&&0!==e[U.kKeyboardTabToAll]?x.a.set(U.kKeyboardTabToAll,0):0===t&&-1!==e[U.kKeyboardTabToAll]&&x.a.set(U.kKeyboardTabToAll,-1)}}),Ci(this,"_onMainStoreChanged",e=>{switch(e.action){case"confirmOpenBookmarks":this.showConfirmOpenBookmarksDialog(e.options);break;case"showClearBrowsingHistory":this.showClearBrowsingHistoryDialog(e.options)}switch(e.type){case C.a.MAIN_SHOW_BOOKMARK_DIALOG:this.showBookmarkDialog(e.options);break;case C.a.MAIN_SHOW_SAVE_SESSION:this.showSaveSession(e.options);break;case C.a.MAIN_SHOW_OPEN_SESSION:this.showOpenSession();break;case C.a.MAIN_SHOW_IMPORT_DATA:this.showImportData();break;case C.a.MAIN_SHOW_PAGE_ACCESS_KEYS:Object(yt.g)(c.a.getActivePage().url)||this.toggleMainDialog(e.type);break;case C.a.MAIN_SHOW_CALENDAR_ALARM:case C.a.MAIN_SHOW_IMPORT_CALENDAR:case C.a.MAIN_SHOW_KEYBOARDS_SHORTCUTS:case"MAIN_SHOW_CALENDAR_ADD_EVENT":case"MAIN_SHOW_CALENDAR_EDIT_EVENT":case"MAIN_SHOW_CALENDAR_MODAL_DIALOG":case"MAIN_SHOW_MAIL_AUTHENTICATION_DIALOG":case"MAIN_SHOW_MAIL_DELETE_DIALOG_ACCOUNTS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_CONFIRM_ALL":case"MAIN_SHOW_MAIL_DELETE_DIALOG_FOLDERS":case"MAIN_SHOW_MAIL_DELETE_DIALOG_SETTING":case"MAIN_SHOW_MAIL_UNSUBSCRIBE_DIALOG":case C.a.MAIN_SHOW_QUICKCOMMANDS:case C.a.MAIN_SHOW_ADD_FEED:this.toggleMainDialog(e.type,e.options);break;case"MAIN_SHOW_SETTINGSWINDOW":this.setState({showSettings:!0,settingsCategory:e.options},()=>{for(const[e]of j.a.getState())if(j.a.isSettings(e)){A.default.windows.update(e,{focused:!0});break}})}}),Ci(this,"_onPanelStoreChanged",()=>{this.setState({panelWidth:Zt.a.getPanelWidth()+6})}),Ci(this,"onCloseMainDialog",()=>new Promise(e=>{this.setState({mainDialogType:null,mainDialogOptions:null},e)})),Ci(this,"toggleMainDialog",(e,t)=>{this.state.mainDialogType===e?this.onCloseMainDialog():this.setState({mainDialogType:e,mainDialogOptions:t})}),Ci(this,"handleTabSwitcherActivation",e=>{if(!e&&this.mainDialog){const e=this.mainDialog.state.selected;ie.a.openPage(e.id)}this.onCloseMainDialog()}),Ci(this,"switchTabVisualTabSwitcher",(e,t)=>{c.a.getPages().size>1&&(this.state.mainDialogType!==C.a.MAIN_SHOW_VISUAL_TAB_SWITCHER&&(this.toggleMainDialog(C.a.MAIN_SHOW_VISUAL_TAB_SWITCHER),function(e,t,a){function i(e){wi=!1,a.removeEventListener("mouseup",r),a.removeEventListener("mousedown",r),Ae.a.tabsPrivate.onKeyboardChanged.removeListener(s),Ae.a.tabsPrivate.onTabSwitchEnd.removeListener(n),t(e)}function s(e,t,a,s){!0===t?27===s&&i(!0):!1===t&&(17!==s&&18!==s&&13!==s||i(!1))}function n(){i(!1)}function r(e){if(e.target){const t=e.target.classList;if("mousedown"===e.type&&0===e.button&&t&&["visual-tab","visual-list","visual-list-preview"].includes(t))return}(2===e.button||e.button<=1&&e.buttons<=2)&&(e.preventDefault(),e.stopPropagation(),i(!1))}!0!==wi&&(wi=!0,a.addEventListener("mouseup",r),a.addEventListener("mousedown",r),Ae.a.tabsPrivate.onKeyboardChanged.addListener(s),Ae.a.tabsPrivate.onTabSwitchEnd.addListener(n))}(0,this.handleTabSwitcherActivation,this.context.document)),this.mainDialog&&(t?this.mainDialog.selectForward():this.mainDialog.selectBack()))}),Ci(this,"maybeFocusLastActiveElement",()=>{if(this._lastActiveElement)if("BODY"===this._lastActiveElement.tagName||"WEBVIEW"===this._lastActiveElement.tagName){const e=i.a.getActiveWebView(),t=c.a.getActivePage(),a=t.pendingUrl||t.url;e&&"content"===Object(Ni.a)(t.id,a,!0,this.context.document.activeElement)&&e.focus()}else this._lastActiveElement.focus(),this._lastActiveElement=null}),Ci(this,"_onWindowStoreChanged",()=>{const e=this.context.vivaldiWindowId,t=j.a.getState().get(e);this.state.windowState!==t&&(this.state.windowState.active!==t.active&&(t.active?this._onWindowFocus():this._onWindowBlur()),this.setState({windowState:t}))}),Ci(this,"_onWindowFocus",()=>{const e=c.a.getActivePage();if(e&&"ignoreNext"!==e.mediaResponseState){const t=M.a.get(U.kTabsAutoMuting);"onlyActive"!==t&&"prioritizeActive"!==t||Je.a.hasMediaState(e.id,"muting")&&ie.a.setMuting("active","unmute","auto")}}),Ci(this,"_onWindowBlur",()=>{const{document:e}=this.context;this._lastActiveElement=e.activeElement}),Ci(this,"onMessageReceived",(e,t,a)=>{if(e&&e.action&&t.id===A.default.runtime.id)switch(e.action){case ta.c:this.clearAppRegion();break;case ta.a:this.restoreAppRegion();break;case ta.b:ri.a.minimize(this.context.vivaldiWindowId)}}),Ci(this,"_onMacMenuAction",(e,t,a)=>{if(e===this.context.vivaldiWindowId&&!j.a.isMinimized(this.context.vivaldiWindowId)){const e=Z.default.getHandlerByAction(t,a);e?e():Q.default.executeActions(t)}}),Ci(this,"clearAppRegion",()=>{this.setState({preventAppRegionDrag:!0})}),Ci(this,"restoreAppRegion",()=>{this.setState({preventAppRegionDrag:!1})}),Ci(this,"handleDoubleClick",()=>{"top"===this.props.prefValues[U.kTabsBarPosition]&&this.state.windowState.nativeDecorations?ie.a.openURL():j.a.isMaximized(this.context.vivaldiWindowId)||(j.a.isFullscreen(this.context.vivaldiWindowId),0)?ri.a.restore(this.context.vivaldiWindowId):ri.a.maximize(this.context.vivaldiWindowId)}),Ci(this,"closeConfirmOpenBookmarksDialog",()=>{this.setState({confirmOpenBookmarksOptions:null})}),Ci(this,"showConfirmOpenBookmarksDialog",e=>{this.setState({confirmOpenBookmarksOptions:e})}),Ci(this,"showClearBrowsingHistoryDialog",e=>{j.a.isIncognitoOrGuest(this.context.vivaldiWindowId)||this.setState({clearBrowsingHistoryDialog:e})}),Ci(this,"closeClearBrowsingHistoryDialog",e=>{this.setState({clearBrowsingHistoryDialog:null})}),Ci(this,"closeImportContacts",()=>{this.setState({importData:this.refs.webpageview})}),Ci(this,"closeImportData",()=>{this.setState({importData:!1})}),Ci(this,"showImportData",()=>{this.setState({importData:this.refs.webpageview})}),Ci(this,"showBookmarkDialog",e=>{this.setState({bookmarkDialogParent:this.refs.webpageview,bookmarkDialogOptions:e})}),Ci(this,"closeBookmarkDialog",()=>{this.setState({bookmarkDialogParent:!1})}),Ci(this,"closeSaveSession",()=>{this.setState({saveSession:!1})}),Ci(this,"showSaveSession",e=>{this.setState({saveSession:this.refs.webpageview,saveSessionOptions:e})}),Ci(this,"closeOpenSession",()=>{this.setState({openSession:!1})}),Ci(this,"showOpenSession",()=>{this.setState({openSession:this.refs.webpageview})}),Ci(this,"closeSettingsWindow",e=>{this.setState({showSettings:!1}),0===e.outerWidth&&0===e.outerHeight&&0===e.screenLeft&&0===e.screenTop||(x.a.set(U.kSettingsSizeWidth,e.outerWidth),x.a.set(U.kSettingsSizeHeight,e.outerHeight),x.a.set(U.kSettingsSizeLeft,e.screenLeft),x.a.set(U.kSettingsSizeTop,e.screenTop))}),Ci(this,"hasHorizontalMenu",()=>Boolean("top"===this.props.prefValues[U.kMenuDisplay]&&!0)),Ci(this,"getBrowserClasses",(e,t)=>{const{TABCOLOR_BEHIND_TABS:a}=this.props.vivaldiSettings,i=this.props.prefValues[U.kTabsBarPosition],s=Object(j.b)(t),n="settings"===t.type,r={"horizontal-menu":this.hasHorizontalMenu(),"tabs-at-edge":this.props.prefValues[U.kTabsAtEdge]&&("bottom"===i||"top"===i)&&(!!t.maximized||t.fullScreen),"ui-transparent-tabs":this.props.vivaldiSettings.USE_TAB_TRANSPARENT_TABS,"biscuit-mode":this.props.prefValues[U.kBiscuitVersion],"color-behind-tabs-on":a,"color-behind-tabs-off":!a,"animation-on":this.props.prefValues[U.kThemeUseAnimation],"animation-off":!this.props.prefValues[U.kThemeUseAnimation],"is-dragging-button":this.state.isDraggingButton,hasfocus:t.active,isblurred:!t.active,alt:this.props.prefValues[U.kWindowsLinuxAltControls],"alt-tabs":this.props.prefValues[U.kTabsCloseButtonLeft],"minimal-ui":j.a.isMinimalUI(e),native:t.nativeDecorations,[Oi]:!0,"mac-fullscreen-hover":t.fullscreenMenubarShown&&t.active,win10:navigator.appVersion.indexOf("Windows NT 10")>0,private:j.a.isIncognito(e),[this.props.themeBg]:!0,[this.props.highlightBg]:!0,[this.props.accentBg]:!0,"no-app-dragging":this.state.preventAppRegionDrag,popup:n,"is-settingspage":n};return r["address-"+this.props.prefValues[U.kAddressBarPosition]+(t.visibleUI.addressBar?"":"-off")]=!0,r["tabs-"+(t.visibleUI.tabs&&!n?i:"off")]=!0,r["stacks-"+this.props.prefValues[U.kTabsStackingMode]]=!0,r[s]=!0,r["bookmark-bar-"+(t.visibleUI.bookmarksBar?this.props.prefValues[U.kBookmarksBarPosition]:"off")]=!0,We()(r)}),Ci(this,"getSettingsWindowBounds",()=>{const{screen:e}=this.context,t=M.a.get(U.kSettingsSizeWidth),a=M.a.get(U.kSettingsSizeHeight),i=M.a.get(U.kSettingsSizeLeft),s=M.a.get(U.kSettingsSizeTop),n=a<=e.height?a:e.height;let r=i>=0?i:e.availLeft+t/2,o=s>=0?s:e.availTop+(e.height-a)/2;return o<0&&(o=0),r+t>e.availLeft+e.width&&(r=e.availLeft+(e.width-t),r<0&&(r=0)),{left:Math.round(r),top:Math.round(o),width:Math.round(t),height:Math.round(n)}}),this.state={bookmarkDialogParent:!1,bookmarkDialogOptions:null,clearBrowsingHistoryDialog:null,confirmOpenBookmarksOptions:null,importData:!1,isDraggingButton:!1,panelWidth:Zt.a.getPanelWidth()+6,mainDialogOptions:null,mainDialogType:null,openSession:!1,preventAppRegionDrag:!1,quickCommandValue:"",saveSession:!1,saveSessionOptions:null,settingsCategory:"general",windowStyle:{},windowState:j.a.getState().get(t.vivaldiWindowId),startupDialogQueue:new Map,showSettings:!1},this.debouncedUpdateSearchMenu=Object(Ei.a)(()=>this.updateSearchMenu(!1),50),this._updateKeyUIMode()}componentDidMount(){Object(vi.a)(),Xe.addChangeListener(this._onMainStoreChanged),Zt.a.addChangeListener(this._onPanelStoreChanged),Ba.a.addChangeListener(this._onSearchEngineStoreChanged),this.windowStoreToken=j.a.addListener(this._onWindowStoreChanged),A.default.runtime.onMessage.addListener(this.onMessageReceived),this.detachFocusableEvents=Object(mi.a)(this.context.document),M.a.addListener(ki,this._onPrefsCacheChanged),qa.a.createImageBackground(e=>{this.setState({windowStyle:e})}),A.default.contextMenus.removeAll(()=>{A.default.contextMenus.create({id:"searchWebFor",title:Object(h.a)("Search for “%s”"),contexts:["selection"]},()=>{A.default.runtime.lastError&&console.warn("contextMenus.create failed:",A.default.runtime.lastError)}),this.updateSearchMenu(!0),A.default.contextMenus.onClicked.addListener((e,t)=>{A.default.windows.getLastFocused({},a=>{if(this.context.vivaldiWindowId===a.id&&j.a.isActive(this.context.vivaldiWindowId)&&!j.a.isMinimized(this.context.vivaldiWindowId))switch(e.menuItemId){case"searchWebFor":La.a.withTextAndDefaltEngine(e.selectionText);break;default:if("selectSearchEngine"===e.parentMenuItemId){const t=Ba.a.getContext();void 0!==t&&t.id===e.menuItemId||ja.a.setDefaultForContextMenu(e.menuItemId),La.a.withTextAndEngine(e.selectionText,e.menuItemId)}else console.log("Unknown context menu item:",e,"in",t)}})})}),this.createStartupDialogQueue(),Ae.a.windowPrivate.onActiveTabStatusText.addListener(this._onActiveTabStatusText)}componentDidUpdate(e,t){const a=e.vivaldiSettings,i=this.props.vivaldiSettings;a.BROWSER_COLOR_BG===i.BROWSER_COLOR_BG&&a.BROWSER_COLOR_ACCENT_BG===i.BROWSER_COLOR_ACCENT_BG||qa.a.createImageBackground(e=>{this.setState({windowStyle:e})}),!t.windowState.active&&this.state.windowState.active&&this.maybeFocusLastActiveElement()}componentWillUnmount(){Object(vi.b)(),this.detachFocusableEvents(),M.a.removeListener(ki,this._onPrefsCacheChanged),Xe.removeChangeListener(this._onMainStoreChanged),Zt.a.removeChangeListener(this._onPanelStoreChanged),Ba.a.removeChangeListener(this._onSearchEngineStoreChanged),this.windowStoreToken.remove(),A.default.runtime.onMessage.removeListener(this.onMessageReceived)}render(){const e=this.props.prefValues,{settingsCategory:t}=this.state,i=e[U.kTabsBarPosition],{visibleUI:s}=this.state.windowState,n="left"===i||"right"===i?{[`padding-${i}`]:e[U.kTabsBarWidth]}:void 0;return u.a.createElement("div",{id:"browser",lang:A.default.i18n.getUILanguage(),className:this.getBrowserClasses(this.context.vivaldiWindowId,this.state.windowState),style:this.state.windowStyle,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDragEnd,__source:{fileName:Si,lineNumber:1082}},u.a.createElement(ai,{__source:{fileName:Si,lineNumber:1091}}),u.a.createElement("div",{id:"header",onDoubleClick:this.handleDoubleClick,__source:{fileName:Si,lineNumber:1092}},u.a.createElement(ii.a,{isPopupWindow:!1,tabPosition:s.tabs?i:"none",keyAccess:e[U.kKeyboardTabToAll],__source:{fileName:Si,lineNumber:1093}}),this.hasHorizontalMenu()&&u.a.createElement(ui,{__source:{fileName:Si,lineNumber:1099}}),("top"===i||!s.tabs)&&u.a.createElement(Za.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,tabPosition:i,visible:s.tabs,__source:{fileName:Si,lineNumber:1102}})),u.a.createElement("div",{id:"main",className:e[U.kPanelsPosition],__source:{fileName:Si,lineNumber:1110}},u.a.createElement(Se,{size:"large",__source:{fileName:Si,lineNumber:1111}}),s.bookmarksBar&&u.a.createElement(_.a,{display:e[U.kBookmarksBarDisplay],statusOff:"off"===s.statusBar,keyAccess:e[U.kKeyboardTabToAll],__source:{fileName:Si,lineNumber:1116}}),u.a.createElement("div",{className:"inner",__source:{fileName:Si,lineNumber:1122}},this.shouldShowStartupDialog(ua.b)&&u.a.createElement(Wa,{onClose:this.closeStartupDialog.bind(this,ua.b),__source:{fileName:Si,lineNumber:1124}}),this.state.confirmOpenBookmarksOptions&&u.a.createElement(ee,{options:this.state.confirmOpenBookmarksOptions,onClose:this.closeConfirmOpenBookmarksDialog,__source:{fileName:Si,lineNumber:1130}}),this.state.clearBrowsingHistoryDialog&&u.a.createElement($,{onClose:this.closeClearBrowsingHistoryDialog,__source:{fileName:Si,lineNumber:1136}}),this.state.importData&&u.a.createElement(te.a,{onClose:this.closeImportData,__source:{fileName:Si,lineNumber:1141}}),this.state.bookmarkDialogParent&&this.state.bookmarkDialogOptions&&u.a.createElement(f,{onClose:this.closeBookmarkDialog,mode:this.state.bookmarkDialogOptions.mode,id:this.state.bookmarkDialogOptions.id,index:this.state.bookmarkDialogOptions.index,__source:{fileName:Si,lineNumber:1147}}),this.state.saveSession&&this.state.saveSessionOptions&&u.a.createElement(Ma,{onClose:this.closeSaveSession,options:this.state.saveSessionOptions,__source:{fileName:Si,lineNumber:1155}}),!j.a.isIncognitoOrGuest(this.context.vivaldiWindowId)&&u.a.createElement(Qa,{__source:{fileName:Si,lineNumber:1161}}),this.shouldShowStartupDialog(ua.e)&&u.a.createElement(Ia,{onClose:this.closeStartupDialog.bind(this,ua.e),__source:{fileName:Si,lineNumber:1164}}),this.shouldShowStartupDialog(ua.c)&&u.a.createElement(ce,{onClose:this.closeStartupDialog.bind(this,ua.c),__source:{fileName:Si,lineNumber:1169}}),this.shouldShowStartupDialog(ua.d)&&u.a.createElement(pe,{onClose:this.closeStartupDialog.bind(this,ua.d),__source:{fileName:Si,lineNumber:1174}}),this.state.openSession&&u.a.createElement(bt,{dialogParentElement:this.state.openSession,keyAccess:e[U.kKeyboardTabToAll],onClose:this.closeOpenSession,__source:{fileName:Si,lineNumber:1179}}),u.a.createElement(ka,{key:"panel",eventTypes:Ai,position:e[U.kPanelsPosition],outsideClickIgnoreClass:"panel-clickoutside-ignore",__source:{fileName:Si,lineNumber:1185}}),"left"===i&&s.tabs&&u.a.createElement(Za.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,tabPosition:i,visible:!0,__source:{fileName:Si,lineNumber:1192}}),u.a.createElement("div",{ref:"webpageview",id:"webview-container",__source:{fileName:Si,lineNumber:1199}},u.a.createElement(hi.a,{cycleFocus:M.a.get(U.kWebpagesFocusTrap),__source:{fileName:Si,lineNumber:1200}})),"overlay"===s.statusBar&&u.a.createElement(Va.a,{style:{[e[U.kPanelsPosition]]:this.state.panelWidth,...n},__source:{fileName:Si,lineNumber:1206}}),"right"===i&&s.tabs&&u.a.createElement(Za.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,tabPosition:i,visible:!0,__source:{fileName:Si,lineNumber:1214}})),"bottom"===i&&s.tabs&&u.a.createElement(Za.a,{key:"tabbar",switchTabVisualTabSwitcher:this.switchTabVisualTabSwitcher,tabPosition:i,visible:!0,__source:{fileName:Si,lineNumber:1223}})),"on"===s.statusBar&&u.a.createElement(si.a,{name:U.kToolbarsStatus,menuOrigin:"bottomLeft",className:"toolbar-statusbar",popupPosition:"above",size:"medium",__source:{fileName:Si,lineNumber:1232}}),this.state.mainDialogType&&u.a.createElement(Ze,{ref:e=>this.mainDialog=e?e.refs.visualTabSwitcher:null,onClose:this.onCloseMainDialog,dialog:this.state.mainDialogType,options:this.state.mainDialogOptions,quickCommandValue:this.state.quickCommandValue,storeQuickCommandSearch:this.storeQuickCommandSearch,__source:{fileName:Si,lineNumber:1242}}),u.a.createElement("svg",{version:"1.1",width:"0",height:"0",dangerouslySetInnerHTML:{__html:a(1383)},__source:{fileName:Si,lineNumber:1254}}),this.state.showSettings&&u.a.createElement(fi,{closePopupCallback:this.closeSettingsWindow,getBrowserClasses:this.getBrowserClasses,getWindowBounds:this.getSettingsWindowBounds,keyAccess:this.props.prefValues[U.kKeyboardTabToAll],windowType:"settings",__source:{fileName:Si,lineNumber:1264}},u.a.createElement("div",{className:"webpageview",__source:{fileName:Si,lineNumber:1270}},u.a.createElement(Ha.b,{url:Ha.a+t,__source:{fileName:Si,lineNumber:1271}}))))}}Ci(Ti,"contextType",L.a);t.a=Object(ge.b)(Object(ae.a)(Object(be.a)(Ti,["BROWSER_COLOR_BG","BROWSER_COLOR_ACCENT_BG","TABCOLOR_BEHIND_TABS","USE_TAB_TRANSPARENT_TABS"]),yi))},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(58),r=a.n(n),o=a(11),l=a(4);let c=[];const d=new class extends r.a{getAction(){for(;c.length>500;)c.shift();return c.join("\r\n")}clear(){c=[],this.emitChange()}emitChange(){this.emit("change")}addChangeListener(e){0===this.listeners("change").length&&(this.dispatchToken=o.a.register(e=>{const t=(new Date).toLocaleString("is")+": ";let a;switch(e.actionType){case l.a.STATUS_SET_STATUS:a=e.status;break;case l.a.MAIL_ADD_MESSAGES:case l.a.MAIL_REMOVE_MESSAGES:a=e.accountId+", "+e.path;break;case l.a.MAIL_MARK_SEEN:a=e.sle.accountId+", "+e.sle.path;break;case"MAIL_SELECT_FOLDER":a=JSON.stringify(e.folder.accountId)+", "+JSON.stringify(e.folder.path);break;case"MAIL_SEARCH_SET_OPTIONS":a=JSON.stringify(e.options);break;case l.a.MAIL_FILTERS_INIT:a=e.filters.length+" filters";break;case l.a.MAIL_MESSAGES_INIT:a=e.messages.length+" messages";break;case l.a.CONTACT_SAVE_CONTACT:case l.a.CONTACT_SELECT_CONTACT:a=JSON.stringify(e.contact);break;case l.a.CONTACT_DELETE_CONTACTS:c.push(t+" "+e.actionType+": "+JSON.stringify(e.ids));break;case l.a.CONTACT_ADD_CONTACTS:a=e.contacts.length+" contacts";break;case"MAIL_IS_DISCONNECTED":a=e.accountId+", "+e.isDisconnected.toString()+", "+(e.error?e.error.toString():"");break;case"MAIL_IS_CONNECTING":a=e.accountId+", "+e.isConnecting.toString();break;case l.a.URLFIELD_SET_STATE:a=Object.getOwnPropertyNames(e.state).map(t=>`${t}: ${e.state[t]}`).join(", ");break;case l.a.CONTACT_ADD_EMAIL:c.push(t+e.actionType);break;default:a=""}const i=a?": "+a:"";c.push(t+e.actionType+i),d.emitChange()})),this.on("change",e)}removeChangeListener(e){1===this.listeners("change").length&&o.a.unregister(this.dispatchToken),this.removeListener("change",e)}};var u=d,h=a(25),m=a(60),p=a(6),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\actionlog\\ActionLog.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends i.Component{constructor(...e){super(...e),b(this,"state",{actionLog:""}),b(this,"_actionLoggerChanged",()=>{this.setState({actionLog:u.getAction()})}),b(this,"getContextMenuItems",()=>[{handler:u.clear.bind(u),...Object(p.a)("Clear")}]),b(this,"onContextMenu",e=>{Object(m.a)(this.context.vivaldiWindowId,this.getContextMenuItems())(e)})}UNSAFE_componentWillMount(){u.addChangeListener(this._actionLoggerChanged)}componentWillUnmount(){u.removeChangeListener(this._actionLoggerChanged)}render(){return i.createElement("div",{className:"actionlog",id:"action_logger",tabIndex:"0",onContextMenu:this.onContextMenu,__source:{fileName:g,lineNumber:50}},i.createElement("textarea",{className:"actionlogs",readOnly:!0,value:this.state.actionLog,__source:{fileName:g,lineNumber:52}}))}}b(f,"contextType",h.a);var _=f,N="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\ExperimentItem.jsx";function v({enabled:e,locked:t,fullName:a,description:i,onValueChange:n}){return s.a.createElement("div",{className:"setting-single",__source:{fileName:N,lineNumber:15}},s.a.createElement("label",{__source:{fileName:N,lineNumber:16}},s.a.createElement("input",{type:"checkbox",checked:e,disabled:t,onChange:({currentTarget:e})=>n(e.checked),__source:{fileName:N,lineNumber:17}}),s.a.createElement("span",{__source:{fileName:N,lineNumber:23}},a)),s.a.createElement("p",{className:"info",__source:{fileName:N,lineNumber:25}},i))}var E=a(143),w=a(2),S="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\experiments\\Experiments.jsx";function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k(){return s.a.createElement("div",{className:"Experiments-Caution",__source:{fileName:S,lineNumber:13}},Object(w.a)("These experimental features may change, break, disappear, not work as intended or at all."),s.a.createElement("br",{__source:{fileName:S,lineNumber:15}}),Object(w.a)("Please proceed with caution."))}class y extends s.a.PureComponent{constructor(...e){super(...e),C(this,"state",{experiments:E.a.getFlags()}),C(this,"_handleChange",(e,t)=>{E.a.enableFeature(e,t).then(()=>this.setState({experiments:E.a.getFlags()}))})}render(){return s.a.createElement("div",{className:"Experiments vivaldi-settings",tabIndex:"0",__source:{fileName:S,lineNumber:40}},s.a.createElement("h2",{className:"Experiments-Header",__source:{fileName:S,lineNumber:41}},Object(w.a)("Experimental features")),s.a.createElement(k,{__source:{fileName:S,lineNumber:43}}),s.a.createElement("div",{className:"setting-subgroup",__source:{fileName:S,lineNumber:45}},this.state.experiments.map(e=>s.a.createElement(v,{key:e.name,fullName:e.friendlyName,description:e.description,locked:e.locked,enabled:"true"===e.value,onValueChange:this._handleChange.bind(null,e.name),__source:{fileName:S,lineNumber:47}}))))}}var O=a(448),A=a(51),T=a(18),I=a.n(T),D=a(129),P=a(19),x=a(12),M=a(8),L=a(127),j=a(46),B=a(1),R="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\private-intro\\PrivateWindowIntro.jsx";function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=[B.kIncognitoShowIntro],W=M.a.getEventHandler;class H extends s.a.Component{constructor(e){super(e),F(this,"onSearchEngineStoreChanged",()=>{this.setState({searchEngines:j.a.getList()})}),F(this,"openFeaturePage",e=>{e.preventDefault(),x.a.openURL("https://vvld.in/privacy-and-security",{inCurrent:!1,inBackground:!1})}),F(this,"setPrivateSearch",e=>{L.a.setDefault(e.currentTarget.value,!0)});const t=I()("#0AC478"),a=I()("#0AC478"),i=I()("#fff"),s=I()("#202020"),n=D.e.all(i,s,a,t),r={};Object.entries(n).forEach(([e,t])=>{r[`--${e}`]=t}),this.state={searchEngines:j.a.getList(),theme:r}}componentDidMount(){j.a.addChangeListener(this.onSearchEngineStoreChanged)}componentWillUnmount(){j.a.removeChangeListener(this.onSearchEngineStoreChanged)}render(){const e=j.a.getDefault(!0);return s.a.createElement("div",{className:"private-intro",style:this.state.theme,__source:{fileName:R,lineNumber:85}},s.a.createElement("svg",{className:"private-window-background",viewBox:"0 0 1244 860",__source:{fileName:R,lineNumber:89}},s.a.createElement("defs",{__source:{fileName:R,lineNumber:91}},s.a.createElement("linearGradient",{x1:"0.15",y1:"0.3",x2:"0.3",y2:"0.5",id:"private-intro-bg-gradient",__source:{fileName:R,lineNumber:92}},s.a.createElement("stop",{offset:"0",stopColor:"var(--colorFg)",stopOpacity:"0.03",__source:{fileName:R,lineNumber:93}}),s.a.createElement("stop",{offset:"1",stopColor:"var(--colorFg)",stopOpacity:"0.003",__source:{fileName:R,lineNumber:94}})),s.a.createElement("linearGradient",{x1:"1",y1:"0",x2:"0",y2:"1",id:"private-intro-accent-gradient",__source:{fileName:R,lineNumber:97}},s.a.createElement("stop",{offset:"0",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:R,lineNumber:98}}),s.a.createElement("stop",{offset:"0.5",stopColor:"var(--colorAccentBg)",stopOpacity:"1",__source:{fileName:R,lineNumber:99}}),s.a.createElement("stop",{offset:"1",stopColor:"var(--colorAccentBg)",stopOpacity:"0",__source:{fileName:R,lineNumber:100}}))),s.a.createElement("path",{fill:"url(#private-intro-bg-gradient)",d:"M0 0h153.513c16.141 27.93 32.15 55.734 47.912 83.11 16.086 27.94 32.722 56.832 49.076 85.128 11.01 19.031 22.079 38.316 32.781 56.967 25.186 43.883 51.228 89.259 77.402 132.848 33.382 55.651 75.894 82.121 137.77 85.829 3.205.192 6.454.288 9.655.288 39.673 0 78.14-14.461 108.316-40.722 21.644-18.834 48.687-52.291 54.604-104.667.749-6.654 1.357-13.708 1.855-19.573-1.07-29.74-6.476-52.92-17.294-74.518C622.935 139.46 612.708 67.99 625.087 0h136.676C747.1 44.93 749.845 96.364 774.32 145.251c20.839 41.6 30.654 85.7 31.485 138.023-.568 6.192-1.472 18.273-2.83 30.356-17.572 155.524-149.172 263.318-294.866 263.318-5.816 0-11.67-.173-17.526-.521C382.84 569.97 301.9 518.174 246.822 426.358c-38.015-63.313-74.255-127.68-111.253-191.634C90.359 156.507 45.49 78.062 0 0zm1113.47 0H1244v140.1c-7.496 27.86-18.849 54.995-34.031 81.275a1299530.57 1299530.57 0 0 1-170.255 294.799A1223193.145 1223193.145 0 0 0 841.018 860.24H687.72c135.675-235.123 271.527-470.147 407.26-705.25 22.311-38.621 31.22-79.696 25.368-124.548A170.12 170.12 0 0 0 1113.471 0z",__source:{fileName:R,lineNumber:104}}),s.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",strokeWidth:"2",d:"M854 839.979L1103.98 407",__source:{fileName:R,lineNumber:105}}),s.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M951 649.979L1200.98 217",__source:{fileName:R,lineNumber:106}}),s.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M969 628.452L1126.86 356",__source:{fileName:R,lineNumber:107}}),s.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",d:"M802 686.452L959.86 414",__source:{fileName:R,lineNumber:108}}),s.a.createElement("path",{stroke:"url(#private-intro-accent-gradient)",opacity:".5",d:"M735 790.452L892.86 518",__source:{fileName:R,lineNumber:109}})),s.a.createElement("div",{className:"private-intro-content",__source:{fileName:R,lineNumber:112}},s.a.createElement("h1",{__source:{fileName:R,lineNumber:113}},Object(w.a)("title","Private Window")),s.a.createElement("span",{className:"private-intro-fingerprint",dangerouslySetInnerHTML:{__html:a(1321)},__source:{fileName:R,lineNumber:114}}),s.a.createElement("p",{__source:{fileName:R,lineNumber:117}},Object(w.a)("Browsing in a Private Window means that searches, sites visited, cookies, and temporary files won’t be stored by Vivaldi. It does not encrypt or otherwise modify your connection.")),s.a.createElement("p",{__source:{fileName:R,lineNumber:118}},s.a.createElement("a",{tabIndex:0,href:"https://vvld.in/privacy-and-security",onClick:this.openFeaturePage,__source:{fileName:R,lineNumber:119}},Object(w.a)("Learn more about Privacy & Security"))),s.a.createElement("h2",{__source:{fileName:R,lineNumber:127}},Object(w.a)("Default Search")),s.a.createElement("p",{className:"private-intro-blurb",__source:{fileName:R,lineNumber:128}},s.a.createElement("span",{__source:{fileName:R,lineNumber:129}},Object(w.a)("While in a Private Window, Vivaldi will use $1 to answer your searches.",[e.name])),s.a.createElement("span",{__source:{fileName:R,lineNumber:132}},"DuckDuckGo"===e.name&&" "+Object(w.a)("DuckDuckGo is a search engine that does not track your search history, enabling you to search privately."))),s.a.createElement("h3",{__source:{fileName:R,lineNumber:140}},Object(w.a)("Search with")),s.a.createElement("label",{className:"private-intro-select-searchengine",__source:{fileName:R,lineNumber:141}},s.a.createElement("img",{className:"private-intro-favicon",src:e.faviconUrl,__source:{fileName:R,lineNumber:142}}),s.a.createElement("select",{value:e.id,onChange:this.setPrivateSearch,__source:{fileName:R,lineNumber:143}},this.state.searchEngines.map(e=>s.a.createElement("option",{key:e.id,value:e.id,__source:{fileName:R,lineNumber:145}},e.name)))),s.a.createElement("label",{className:"private-intro-disable",__source:{fileName:R,lineNumber:152}},s.a.createElement("input",{type:"checkbox",checked:!this.props.prefValues[B.kIncognitoShowIntro],onChange:W(B.kIncognitoShowIntro,"inverse"),__source:{fileName:R,lineNumber:153}}),s.a.createElement("span",{__source:{fileName:R,lineNumber:156}},Object(w.a)("Do Not Show Introduction Again")))))}}var V=Object(P.a)(H,U);var G={SpeedDial:"startpage",Bookmarks:"bookmarks",History:"history",Calendar:"calendar",NotesManager:"notes"},K=a(451),z=a(297),Y=a(37),$=a(22),Q=a(526),Z=a(527),q=a(40),X=a(10),J=a(29),ee=a.n(J),te=a(131),ae=a(158),ie=a(26),se=a(32),ne=a(7),re=a(105),oe=a(13),le="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\bookmarks-manager\\BookmarksManager.jsx";function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const de=[{text:Object(w.a)("Title"),value:"title",fullScreenTitle:Object(w.a)("Sort by title"),width:300,visible:!0,key:!0},{text:Object(w.a)("Address"),value:"url",icon:oe.o,fullScreenTitle:Object(w.a)("Sort by address"),width:300,visible:!0},{text:Object(w.a)("Nickname"),value:"nickname",icon:oe.S.small,fullScreenTitle:Object(w.a)("Sort by nickname"),width:100,visible:!0},{text:Object(w.a)("Description"),value:"description",icon:oe.Ib,fullScreenTitle:Object(w.a)("Sort by description"),width:200,visible:!0},{text:Object(w.a)("Date Created"),value:"dateAdded",icon:oe.p,fullScreenTitle:Object(w.a)("Sort by creation date"),width:150,visible:!1}];class ue extends s.a.Component{constructor(...e){super(...e),ce(this,"state",{parentSelectedId:null,filter:this.props.filter,sorting:{sortOrder:se.a.NO_SORTING,sortField:"manually",comparator:this.sortComparator},columns:Object(re.d)().bookmarks||Object(re.c)(de)}),ce(this,"onSortChange",(e,t)=>{const a={sortOrder:e,sortField:t,comparator:this.sortComparator};this.setState({sorting:a});const i={sortOrder:e,sortField:t};M.a.set(B.kBookmarksManagerSorting,i)}),ce(this,"sortComparator",(e,t)=>$.a.treeSortComparator(e,t,this.state.sorting)),ce(this,"importData",()=>{q.a.showImportData()}),ce(this,"focusTree",()=>{ee.a.findDOMNode(this.refs.tree).focus()}),ce(this,"onSelect",e=>{this.refs.editor.setItem(e||{})}),ce(this,"onCreate",e=>{e&&this.refs.editor.setIsCreating(!0)}),ce(this,"onEditorCanceled",(e,t)=>{t&&e?this.refs.tree.deleteSelectedItems().then(()=>{ne.default.bookmarks.remove(e),this.focusTree()}):this.focusTree()}),ce(this,"onUpdateRow",e=>{this.setState({columns:e})}),ce(this,"onSaveRow",()=>{Object(re.a)(this.state.columns,"bookmarks")}),ce(this,"getSelectedItem",()=>this.refs.tree.getSelectedItem()),ce(this,"deleteItem",()=>{this.refs.tree.deleteSelectedItems()}),ce(this,"_updateThumbnails",()=>{const e=[],t=this.refs.tree.getSelectedBookmarks();for(const a of $.a.iterateTrees(t,!0))$.a.isFolder(a)||e.push(a);ae.a.updateBookmarks(e)}),ce(this,"onSearchChange",e=>{this.setState({filter:e.target.value}),this.props.onFilterChange&&this.props.onFilterChange(e.target.value)}),ce(this,"createBookmark",()=>{this.refs.tree.onAdd(!1)}),ce(this,"createFolder",()=>{this.refs.tree.onAdd(!0)}),ce(this,"onContextMenu",e=>{const t=e.nativeEvent.buttons>0?null:this.refs.tree.getSelectedItem();e.nativeEvent.buttons>0&&this.refs.tree.unSelectAll(),this.refs.tree.onContextMenu(e,t)})}UNSAFE_componentWillMount(){const e=X.a.get(B.kBookmarksManagerSorting);this.onSortChange(e.sortOrder,e.sortField)}render(){return this.props.open?s.a.createElement("div",{className:"bookmark manager",style:this.props.style,__source:{fileName:le,lineNumber:214}},s.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium",__source:{fileName:le,lineNumber:216}},s.a.createElement("input",{value:this.state.filter,onChange:this.onSearchChange,type:"search",tabIndex:"0",placeholder:Object(w.a)("verb","Search"),__source:{fileName:le,lineNumber:217}}),s.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:le,lineNumber:224}},s.a.createElement(ie.a,{onClick:this.createBookmark,image:oe.f.medium,tooltip:Object(w.a)("New Bookmark"),__source:{fileName:le,lineNumber:225}}),s.a.createElement(ie.a,{onClick:this.deleteItem,image:oe.Lb.medium,tooltip:Object(w.a)("other","Delete"),__source:{fileName:le,lineNumber:230}})),s.a.createElement(ie.a,{onClick:this.createFolder,image:oe.Q.medium,title:Object(w.a)("command","New Folder"),__source:{fileName:le,lineNumber:236}}),s.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:le,lineNumber:242}},s.a.createElement(ie.a,{onClick:this.importData,image:oe.s.medium,title:Object(w.a)("Import..."),style:{marginLeft:"auto"},__source:{fileName:le,lineNumber:243}}),s.a.createElement(ie.a,{onClick:this._updateThumbnails,image:oe.gb.medium,title:Object(w.a)("Update Thumbnails"),__source:{fileName:le,lineNumber:251}}))),s.a.createElement("div",{className:"manager-content",__source:{fileName:le,lineNumber:259}},s.a.createElement("div",{className:"manager-treeview",__source:{fileName:le,lineNumber:260}},s.a.createElement(te.a,{fields:de,onSortChange:this.onSortChange,fullsize:!0,sortField:this.state.sorting.sortField,sortOrder:this.state.sorting.sortOrder,columns:this.state.columns,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,keyAccess:X.a.get(B.kKeyboardTabToAll),__source:{fileName:le,lineNumber:262}}),s.a.createElement("div",{className:"vivaldi-tree-container",onContextMenu:this.onContextMenu,__source:{fileName:le,lineNumber:274}},s.a.createElement(Z.a,{filter:this.state.filter,ref:"tree",fullView:!0,inManager:!0,onEdit:this.onSelect,onSelect:this.onSelect,onCreate:this.onCreate,sorting:this.state.sorting,columns:this.state.columns,__source:{fileName:le,lineNumber:277}}))),s.a.createElement(Q.a,{ref:"editor",isVisible:!0,getSelectedItem:this.getSelectedItem,onCancel:this.onEditorCanceled,onFocusTree:this.focusTree,__source:{fileName:le,lineNumber:291}}))):null}}ce(ue,"defaultProps",{open:!0});var he=ue,me=a(182),pe=a(120),ge=a(15),be=a.n(ge),fe=a(300),_e=a(476),Ne="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryMoreInfo.jsx";function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee extends s.a.PureComponent{constructor(...e){super(...e),ve(this,"getDiff",()=>{const{data:e}=this.props;if(e.length>2){const t=[e[0].id,e[e.length-1].id];return be()(t[0]).diff(be()(t[1]),"days")}return e.length}),ve(this,"formatTick",e=>{const t=this.getDiff();let a;switch(!0){case t<6:a="H:00",0===be()(e).hour()&&(a="ddd D");break;case t<20:a="H:00",0===be()(e).hour()&&(a="ddd D"),1===be()(e).date()&&(a="MMM",0===be()(e).month()&&(a="MMM YYYY"));break;case t<80:a="ddd D",1===be()(e).date()&&(a="MMM D",0===be()(e).month()&&(a="MMM YYYY"));break;default:a="MMM",0===be()(e).month()&&(a="YYYY")}return be()(e).format(a)}),ve(this,"formatPieTick",(e,t)=>{if(Number.isInteger(e.count)){const a=Object(_e.a)(e.count/t*100,0);if(a>0)return a+(a>3?"%":"")}}),ve(this,"onContextMenu",(e,t)=>{this.props.onDomainContextMenu(e,t)})}render(){const{title:e,data:t,max:a,scaleY:i,groupedHistoryData:n,chartData:r}=this.props;if(0===Object.keys(n).length)return null;const o=0===t.length,{linkTypeColors:l,linkTypeTotal:c,linkTypes:d,combinedTopPages:u,pageCount:h,pageViewsCount:m,siteCount:p}=n,g=this.getDiff()<2,b={y:g?[0,a/2]:[0,a]},f={x:"time",y:i},_={duration:200,onLoad:{duration:100},onEnter:{duration:100,before:()=>({y:0})}},N=[l[0],l[3]];return s.a.createElement("div",{className:"manager-editor more-info",__source:{fileName:Ne,lineNumber:108}},s.a.createElement("div",{className:"header",__source:{fileName:Ne,lineNumber:109}},s.a.createElement("h1",{__source:{fileName:Ne,lineNumber:110}},e)),s.a.createElement("div",{className:"moreinfo-stats",__source:{fileName:Ne,lineNumber:113}},s.a.createElement("h2",{__source:{fileName:Ne,lineNumber:114}},Object(w.a)("Browsing Activity")),s.a.createElement("div",{className:"moreinfo-activity",__source:{fileName:Ne,lineNumber:115}},!1===o&&s.a.createElement(fe.c,{width:245,height:200,padding:{top:6,right:12,bottom:40,left:30},domain:b,scale:f,__source:{fileName:Ne,lineNumber:117}},s.a.createElement(fe.e,{standalone:!1,responsive:!0,colorScale:N,__source:{fileName:Ne,lineNumber:123}},s.a.createElement(fe.a,{animate:_,interpolation:"linear",standalone:!1,data:r,x:e=>be()(e.unixDate).toDate(),y:"pages",__source:{fileName:Ne,lineNumber:127}}),s.a.createElement(fe.a,{animate:_,interpolation:"linear",standalone:!1,data:r,x:e=>be()(e.unixDate).toDate(),y:e=>e.visits-e.pages,__source:{fileName:Ne,lineNumber:134}})),s.a.createElement(fe.b,{tickCount:g?13:void 0,tickFormat:e=>this.formatTick(e),standalone:!1,style:{axis:{stroke:"#756f6a"},axisLabel:{fontSize:12,padding:20},grid:{stroke:e=>be()(e).format("H")%6==0&&g?"rgba(0, 0, 0, 0.15)":"rgba(0, 0, 0, 0.05)"},ticks:{stroke:"rgba(0, 0, 0, 0.05)"},tickLabels:{angle:-45,textAnchor:"end",fontSize:11,padding:5,fontWeight:600,fontFamily:"inherit"}},__source:{fileName:Ne,lineNumber:142}}),s.a.createElement(fe.b,{dependentAxis:!0,standalone:!1,style:{axis:{stroke:"#756f6a"},axisLabel:{fontSize:12,padding:20},grid:{stroke:e=>e%100==0?"rgba(0, 0, 0, 0.15)":"rgba(0, 0, 0, 0.05)"},ticks:{stroke:"rgba(0, 0, 0, 0.05)"},tickLabels:{fontSize:11,padding:5,fontFamily:"inherit"}},__source:{fileName:Ne,lineNumber:159}}))),s.a.createElement("ul",{className:"moreinfo-activity-labels",__source:{fileName:Ne,lineNumber:176}},s.a.createElement("li",{className:"visits",__source:{fileName:Ne,lineNumber:177}},s.a.createElement("span",{style:{backgroundColor:N[1]},__source:{fileName:Ne,lineNumber:178}}),Object(w.a)("Page Views: $1",[m])),s.a.createElement("li",{className:"pages",__source:{fileName:Ne,lineNumber:181}},s.a.createElement("span",{style:{backgroundColor:N[0]},__source:{fileName:Ne,lineNumber:182}}),Object(w.a)("Pages: $1",[h]))),s.a.createElement("h2",{__source:{fileName:Ne,lineNumber:187}},Object(w.a)("Link Transition Type")),s.a.createElement("div",{className:"moreinfo-link-types",__source:{fileName:Ne,lineNumber:188}},!1===o&&s.a.createElement(fe.d,{data:d,x:"type",y:"count",width:160,height:160,innerRadius:30,padding:20,labels:e=>this.formatPieTick(e,c),colorScale:l,animate:{duration:400,onLoad:{duration:200}},style:{labels:{fontSize:10,padding:6,fontFamily:"inherit"}},__source:{fileName:Ne,lineNumber:190}}),!1===o&&s.a.createElement("ul",{className:"moreinfo-link-labels",__source:{fileName:Ne,lineNumber:209}},d.map(e=>s.a.createElement("li",{key:e.type,title:e.print.length>7?e.print:null,className:0===e.count?"disabled":null,__source:{fileName:Ne,lineNumber:212}},s.a.createElement("span",{style:{backgroundColor:e.color},__source:{fileName:Ne,lineNumber:216}}),e.print)))),s.a.createElement("h2",{__source:{fileName:Ne,lineNumber:225}},Object(w.a)("Top Domains of $1 Total",[p])),u.length>0&&s.a.createElement("ul",{className:"moreinfo-top-domains",__source:{fileName:Ne,lineNumber:227}},u.map((e,t)=>{if(t<5)return s.a.createElement("li",{key:"top_domain_"+t,onClick:this.props.onOpenDomain.bind(this,e.url),onContextMenu:this.onContextMenu.bind(this,e.url),__source:{fileName:Ne,lineNumber:231}},s.a.createElement(pe.a,{url:e.url,__source:{fileName:Ne,lineNumber:235}}),s.a.createElement("span",{className:"title link",__source:{fileName:Ne,lineNumber:236}},e.url?e.url:"localhost"),s.a.createElement("span",{className:"item-count",__source:{fileName:Ne,lineNumber:239}},e.visitCount))}))))}}var we=Ee,Se=a(528),Ce=a(529),ke=a(319),ye=a(257),Oe=a(132),Ae=a(17),Te=a.n(Ae),Ie=a(294),De=a(27);var Pe=function(e,t){if(!e||0===e.length)return{combinedTopPages:[],linkTypes:[],linkTypeColors:[],linkTypeTotal:0,pageCount:0,pageViewsCount:0,siteCount:0};const a={},i={},s=De.a.getSync("BROWSER_COLOR_HIGHLIGHT_BG"),n=I.a.bezier([s,I()(s).set("hsl.h",I()(s).get("hsl.h")+120).set("hsl.l",1-I()(s).luminance())]).scale().colors(6);let r=[{type:"auto_toplevel",count:0,color:n[0],print:Object(w.a)("linktype","Direct")},{type:"typed",count:0,color:n[1],print:Object(w.a)("linktype","Typed")},{type:"link",count:0,color:n[2],print:Object(w.a)("linktype","Link")},{type:"reload",count:0,color:n[3],print:Object(w.a)("linktype","Reload")},{type:"form_submit",count:0,color:n[4],print:Object(w.a)("linktype","Form")},{type:"other",count:0,color:n[5],print:Object(w.a)("linktype","Other")}],o=[];e.forEach(e=>{o=o.concat(t[e.id]?t[e.id].mostVisited:[]),r=e.children.map(e=>e.transition_type).reduce((e,t)=>{const a=e.find(e=>e.type===t);if(a)a.count=a.count+1;else{const t=e.find(e=>"other"===e.type);t.count=t.count+1}return e},r)});const l=r.map(e=>e.color),c=r.reduce((e,t)=>e+t.count,0);e.forEach(e=>{e.children.forEach(e=>{a[e.address]=a[e.address]?e.visitCount+a[e.address]||0:e.visitCount,i[e.url]=i[e.url]?e.visitCount+i[e.url]||0:e.visitCount})});const d=Object.keys(i).length,u=Object.keys(a).length,h=Object.values(i).reduce((e,t)=>e+t);return{linkTypeColors:l,linkTypeTotal:c,combinedTopPages:Object.keys(a).map(e=>({url:e,visitCount:a[e]})).sort((e,t)=>t.visitCount-e.visitCount),linkTypes:r,pageCount:d,pageViewsCount:h,siteCount:u}},xe=a(365),Me=a(36),Le=a(272),je=a(267),Be="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\history\\HistoryManager.jsx";function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Fe=[B.kStartpageSpeedDialDisplayNavigation],Ue="YYYY-MM-DD",We=[{text:Object(w.a)("Date"),fullScreenTitle:Object(w.a)("Sort by visit time"),value:"visitTime",icon:oe.p,width:100,visible:!0},{text:Object(w.a)("Title"),fullScreenTitle:Object(w.a)("Sort by page title"),value:"title",width:300,visible:!0,key:!0},{text:Object(w.a)("Address"),fullScreenTitle:Object(w.a)("Sort by page address"),value:"address",icon:oe.o,width:300,visible:!0},{text:Object(w.a)("Views"),fullScreenTitle:Object(w.a)("Sort by number of page views"),value:"visitCount",icon:oe.q,width:100,visible:!0}],He=Object(Le.extendMoment)(be.a);class Ve extends s.a.PureComponent{constructor(...e){super(...e),Re(this,"state",{dailyVisits:null,topLinks:null,columns:Object(re.d)().history||Object(re.c)(We)}),Re(this,"_locale",{weekdays:Oe.a.getWeekdays("long"),weekdaysShort:Oe.a.getWeekdays("short"),monthsShort:Oe.a.getMonths("short"),weekStartsOn:He.localeData().firstDayOfWeek()}),Re(this,"_selecting",!1),Re(this,"_selectionHighlight",!1),Re(this,"_anchorDate",He()),Re(this,"_shortDayFormat",Oe.a.getWeekdayFormat(Oe.a.getShortDateFormat())),Re(this,"_saveStateByFilter",(e,t)=>{const a={displayMode:t.displayMode,startTime:t.startTime.valueOf(),endTime:t.endTime.valueOf(),dayPickerVisible:t.dayPickerVisible,moreInfoVisible:t.moreInfoVisible,monthEntriesVisible:t.monthEntriesVisible};x.a.setHistoryManagerState(e,a),me.a.saveStateFromSearchQuery(e,t)}),Re(this,"_setRange",(e,t,a=null,i=!1)=>{const{historyFilter:s}=this.props,n=He.range(He(e).startOf("day"),He(t).endOf("day")),r=s.merge({startTime:n.start,endTime:n.end,displayMode:a||s.displayMode,range:n});this._selectionHighlight=i,this.onSearch(r)}),Re(this,"_setDayPickRange",(e,t)=>{const{historyFilter:a}=this.props,i=He.range(a.startTime.startOf("day"),a.endTime.endOf("day")),s=He.range(He(e).startOf("day"),He(t).endOf("day"));if(e.within(i)&&t.within(i))this.onSearch({range:s}),this._selectionHighlight=!0;else if(s.overlaps(i)){const e=s.add(i);this._setRange(e.start,e.end,null,!1)}else this._setRange(He(t).startOf(a.displayMode),He(t).endOf(a.displayMode),null,!1)}),Re(this,"toggleDayPicker",()=>{const e="dayPickerVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)}),Re(this,"toggleMoreInfo",()=>{const e="moreInfoVisible",t=this.props.historyFilter.merge({[e]:!this.props.historyFilter[e]});this.onSearch(t)}),Re(this,"_setView",e=>{const t=e.target.value,a=this.props.historyFilter,i=a.merge({[t]:!a[t]});this.onSearch(i)}),Re(this,"onSortChange",(e,t)=>{const{historyFilter:a}=this.props,i=a.merge({sortOrder:e,sortField:t});this.onSearch(i)}),Re(this,"onUpdateRow",e=>{this.setState({columns:e})}),Re(this,"onSaveRow",()=>{Object(re.a)(this.state.columns,"history")}),Re(this,"onSelectAll",()=>{const e=He(),t=this.props.oldestHistoryDate,a=this.props.historyFilter.merge({startTime:t.toDate(),endTime:e.endOf("day").toDate()});this.onSearch(a),this._setRange(t,e.endOf("day"),"range",!1)}),Re(this,"onIncludeUrlChange",()=>{const e=!this.props.historyFilter.searchURL,t=this.props.historyFilter.merge({searchURL:e});this.onSearch(t)}),Re(this,"onClearBrowsingData",()=>{q.a.showClearBrowsingHistoryDialog({})}),Re(this,"onCalendarSelect",(e,t)=>{if(!0===this._selecting)return void(this._selecting=!1);t=t&&t.nativeEvent?t.nativeEvent:t;const a=He(e);if(t&&t.shiftKey){const e=this.expandRange(a);this._setRange(e.start,e.end)}else He(e).within(this.props.historyFilter.range)||(this._selectionHighlight=!0,this._anchorDate=a,this._setRange(a,a,null,!0))}),Re(this,"expandRange",(e,t=this.props.historyFilter.range)=>{const a=He.range(e,e);return t.contains(a)?t:e.format("x")>t.start.format("x")?He.range(t.start,a.end.endOf("day")):He.range(a.start.startOf("day"),t.end)}),Re(this,"handleMouseDown",(e,t)=>{if((t=t.nativeEvent?t.nativeEvent:t).button&&0!==t.button)return;const a=He(e);let i;t.shiftKey?(i=this.expandRange(a),this._setDayPickRange(i.start,i.end)):this._setDayPickRange(a,a),this._selecting=!0,this._anchorDate=He(e)}),Re(this,"handleMouseUp",(e,t)=>{this._selecting&&this.props.historyFilter.range&&(this._selecting=!1)}),Re(this,"handleMouseEnter",(e,t)=>{if(!this._selecting||!this.props.historyFilter.range)return;const a=this.expandRange(He(e));this._setDayPickRange(a.start,a.end)}),Re(this,"onSearch",e=>{const t=this.props.historyFilter.merge(e);this._saveStateByFilter(this.props.pageId,t),me.a.searchHistory(this.props.pageId,t)}),Re(this,"onSearchChange",e=>{this.setState({range:He.range(He(e.startTime).startOf("day"),He(e.endTime).endOf("day"))}),this.onSearch(e)}),Re(this,"onSearchDomain",e=>{e=Object(Ie.a)(e);const{historyFilter:t}=this.props,a=Object(xe.a)(e),i=t.merge({text:e,parsedFilter:a,searchURL:!0});this.onSearch(i)}),Re(this,"onOpenDomain",e=>{x.a.openURL(Object(Me.b)(e))}),Re(this,"handleDisplayModeChange",(e="day")=>{if("range"===e)this._anchorDate=He(),this._setRange(this.props.oldestHistoryDate,He(),e,!1);else{const t=this._anchorDate.format(Ue)||He();this._setRange(He(t).startOf(e),He(t).endOf(e),e,!1)}}),Re(this,"restoreSelection",()=>{this._selectionHighlight=!1;const{displayMode:e}=this.props.historyFilter;this.handleDisplayModeChange(e)}),Re(this,"viewCurrent",()=>{const{displayMode:e}=this.props.historyFilter;this._setRange(He().startOf(e),He().endOf(e))}),Re(this,"viewPrevious",e=>{const{startTime:t,displayMode:a}=this.props.historyFilter,i="range"===a?"day":a,s=He(t).subtract(1,i).startOf(i),n=He(s).endOf(i);this._setRange(s,n)}),Re(this,"viewNext",()=>{const{startTime:e,displayMode:t}=this.props.historyFilter,a="range"===t?"day":t,i=He(e).add(1,a).startOf(a),s=He(i).endOf(a);this._setRange(i,s)}),Re(this,"getNumWeeksForMonth",(e,t)=>{let a=new Date(e,t-1,1).getDay()-this._locale.weekStartsOn;a<0&&(a+=7);const i=new Date(e,t,0).getDate();return Math.ceil((i+a)/7)}),Re(this,"getDomainMenuItem",e=>[{name:Object(w.a)("Filter by “$1”",[e]),handler:this.onSearchDomain.bind(this,e)},{name:Object(w.a)("Go to “$1”",[e]),handler:this.onOpenDomain.bind(this,e)}]),Re(this,"onContextMenu",e=>{this._tree&&Object(m.a)(this.context.vivaldiWindowId,this._tree.getRootContextMenuItems())(e)}),Re(this,"onDomainContextMenu",(e,t)=>{Object(m.a)(this.context.vivaldiWindowId,this.getDomainMenuItem(e))(t)}),Re(this,"getActivityLevel",(e,t,a)=>e>=t-t/10?"max":e>=a&&e<t-t/10?"high":e>=a/2&&e<a?"mid":e>0&&e<a/2?"low":"min"),Re(this,"renderMonthDay",(e,t,a,i,n)=>{n=He(n);const{historyStatistics:r,historyFilter:o}=this.props,l=r[n.format(Ue)];if(!l)return s.a.createElement("div",{className:n.within(o.range)?"selected":null,__source:{fileName:Be,lineNumber:454}},s.a.createElement("span",{className:"Cal__Day__day",__source:{fileName:Be,lineNumber:455}},n.date()));const c=r[n.format(Ue)].visits||0,d=this.getActivityLevel(c,e,t),u=Math.max(Math.floor((a-72)/15),1);let h=[];o.text.length>0?h=l.mostVisited.map(e=>e.url):(h=l.mostVisited.map(e=>Object(Ie.a)(e.url)),h=Object(je.a)(h));const m=h.map((e,t)=>{if(t<u)return s.a.createElement("li",{title:e,key:n.format("x")+"_"+t,onContextMenu:this.onDomainContextMenu.bind(this,e),__source:{fileName:Be,lineNumber:484}},e)});return s.a.createElement("div",{className:n.within(o.range)?"selected":null,__source:{fileName:Be,lineNumber:494}},s.a.createElement("span",{className:"Cal__Day__day",__source:{fileName:Be,lineNumber:495}},n.date()),s.a.createElement("h4",{className:Te()({heat:!0,[d]:!0}),__source:{fileName:Be,lineNumber:496}},s.a.createElement("span",{className:"visits",__source:{fileName:Be,lineNumber:500}},s.a.createElement("strong",{__source:{fileName:Be,lineNumber:501}},l.visits),Object(w.a)("view","views",[l.visits])),s.a.createElement("span",{className:"pages",__source:{fileName:Be,lineNumber:504}},s.a.createElement("strong",{__source:{fileName:Be,lineNumber:505}},l.pages),Object(w.a)("page","pages",[l.pages]))),s.a.createElement("ul",{className:"top-links",__source:{fileName:Be,lineNumber:510}},m))}),Re(this,"renderCalWeek",()=>{const{historyData:e,historyFilter:t}=this.props,{range:a}=this.props.historyFilter;let i=Array.from(a.by("days"));if(He(i[0]).day()!==this._locale.weekStartsOn||i.length<7){const e=He(i[0]).startOf("week"),t=He(i[0]).endOf("week");i=Array.from(He.range(e,t).by("days"))}else i.length>7&&(i=i.slice(0,6));return s.a.createElement("div",{className:"week-container",__source:{fileName:Be,lineNumber:532}},i.map(i=>{const n=He(i).within(a),r=e.find(e=>e.id===i.format(Ue)),o=He(i).within(He.range(this.props.oldestHistoryDate,He()));return s.a.createElement("div",{className:"week-day",key:"week_"+i.format(Ue),__source:{fileName:Be,lineNumber:542}},s.a.createElement("header",{onClick:o?this._setDayPickRange.bind(this,i,i):null,className:Te()({selected:n,disabled:!o}),__source:{fileName:Be,lineNumber:543}},i.format(this._shortDayFormat)),s.a.createElement("div",{className:"tree",__source:{fileName:Be,lineNumber:552}},r&&s.a.createElement(ke.a,{key:"week_"+i.id,ref:e=>this._tree=e,fullView:!1,inManager:!0,nodes:r.children,historyFilter:t,onSearchDomain:this.onSearchDomain,__source:{fileName:Be,lineNumber:554}})))}))}),Re(this,"renderCalDay",(e,t,a)=>{a=He(a);const{historyStatistics:i,historyFilter:n}=this.props,r=this.props.oldestHistoryDate.within(n.range)&&He().within(n.range);let o,l="min";return i[a.format(Ue)]?(o=i[a.format(Ue)].visits||0,l=this.getActivityLevel(o,e,t)):o=0,s.a.createElement("span",{title:Object(w.a)("$1 visit","$1 visits",[o]),className:Te()({heat:!0,selected:!r&&a.within(n.range),[l]:!0}),key:a.format("x")+"_"+a,__source:{fileName:Be,lineNumber:587}})}),Re(this,"padStats",e=>{const{historyStatistics:t,historyFilter:a}=this.props,i={};let s=e.start.clone(),n=e.end.clone();this.props.historyData.length===e.duration("days")&&(s=s.startOf(a.displayMode),n=n.endOf(a.displayMode));const r=He.range(s,n);for(const[e,a]of Object.entries(t)){const t=He(e,Ue);t.within(r)&&(i[e]={id:e,pages:a.pages,visits:a.visits,unixDate:t.valueOf()})}for(;s.diff(n)<=0;){const e=s.format(Ue);i[e]||(i[e]={id:e,pages:0,visits:0,unixDate:s.valueOf()}),s.add(1,"d")}return Object.values(i).sort((e,t)=>e.unixDate>t.unixDate?1:t.unixDate>e.unixDate?-1:0)})}componentDidMount(){me.a.loadAll()}render(){const{historyFilter:e,historyStatistics:t}=this.props,a=e.range,i=this.props.historyData.filter(e=>e.id>=a.start.format(Ue)&&e.id<=a.end.format(Ue));let n=[];if(!i||"number"!=typeof this.props.maxHeight)return null;const r="search"===document.activeElement.type;let o={};(e.text.length>1||e.moreInfoVisible)&&(o=Pe(i,t)),e.moreInfoVisible&&(n=Object.keys(t).length>0&&1===i.length&&i[0].id&&t[i[0].id]?t[i[0].id].timeArr:this.padStats(a));const l=He(e.startTime),c=this.getNumWeeksForMonth(l.format("YYYY"),l.format("M")),d=a.start.format(Ue)===He(this.props.oldestHistoryDate).format(Ue)&&a.end.format(Ue)===He().format(Ue);let u,h,m,p=[],g="";switch(i.length>1&&(p=[He(i[0].visitTime).format("l"),He(i[i.length-1].visitTime).format("l")],g="visitTime"===e.sortField&&2===e.sortOrder?p[0]+" – "+p[1]:p[1]+" – "+p[0]),u="month"===e.displayMode?Object(w.a)("$1 $2",[He(l).format("MMMM"),He(l).format("YYYY")]):"week"===e.displayMode?Object(w.a)("Week $1, $2",[He(l).week(),He(l).year()]):i.length>1?g:He(e.startTime).format("LL"),h=i.length>1?g:1===i.length?He(i[0].visitTime).format("LL"):He(e.startTime).format("LL"),e.displayMode){case"month":m=Object(w.a)("This Month");break;case"week":m=Object(w.a)("This Week");break;default:m=Object(w.a)("Today")}const b=He(Object.keys(t).sort()[0]).startOf("month"),f=He(),_=He(this.props.oldestHistoryDate).isBefore(f.subtract(2,"m"))?He(this.props.oldestHistoryDate):f.subtract(2,"m"),N=Object.keys(t).map(e=>t[e].visits),v=Math.max(Math.max.apply(Math,N),10);N.sort((e,t)=>e-t);const E=(N[Math.floor((N.length-1)/2)]+N[Math.ceil((N.length-1)/2)])/2,S=this.props.prefValues[B.kStartpageSpeedDialDisplayNavigation]?51:0,C=e.text.length>1?40:0,k=this.props.maxHeight-(S+C+40+21),y=k/c;return s.a.createElement("div",{className:"history manager",__source:{fileName:Be,lineNumber:760}},s.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:Be,lineNumber:761}},s.a.createElement(ie.a,{onClick:this.toggleDayPicker,tooltip:Object(w.a)("Day picker calendar"),isPressed:e.dayPickerVisible,image:oe.Zb,__source:{fileName:Be,lineNumber:762}}),s.a.createElement(Se.a,{ref:"searchField",search:this.onSearchChange,historyFilter:e,minDate:this.props.oldestHistoryDate,__source:{fileName:Be,lineNumber:769}}),s.a.createElement("h1",{onClick:this.restoreSelection,style:{marginLeft:"auto",marginRight:"auto",flexShrink:5},__source:{fileName:Be,lineNumber:775}},u),s.a.createElement(ie.a,{onClick:this.viewCurrent,title:m,__source:{fileName:Be,lineNumber:786}}),s.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:Be,lineNumber:791}},s.a.createElement(ie.a,{onClick:this.viewPrevious.bind(this,b),tooltip:Object(w.a)("Previous"),className:"button-narrow",disabled:He(this.props.oldestHistoryDate).within(a),image:oe.cb.medium,__source:{fileName:Be,lineNumber:792}}),s.a.createElement(ie.a,{onClick:this.viewNext,className:"button-narrow",tooltip:Object(w.a)("Next"),disabled:f.within(a),image:oe.eb.medium,__source:{fileName:Be,lineNumber:799}})),s.a.createElement("div",{className:"toolbar toolbar-group",__source:{fileName:Be,lineNumber:808}},s.a.createElement(ie.a,{title:Object(w.a)("List"),isPressed:"range"===e.displayMode,onClick:this.handleDisplayModeChange.bind(this,"range"),__source:{fileName:Be,lineNumber:809}}),s.a.createElement(ie.a,{title:Object(w.a)("Day"),isPressed:"day"===e.displayMode,onClick:this.handleDisplayModeChange.bind(this,"day"),__source:{fileName:Be,lineNumber:814}}),s.a.createElement(ie.a,{title:Object(w.a)("Week"),isPressed:"week"===e.displayMode,onClick:this.handleDisplayModeChange.bind(this,"week"),__source:{fileName:Be,lineNumber:819}}),s.a.createElement(ie.a,{title:Object(w.a)("Month"),isPressed:"month"===e.displayMode,onClick:this.handleDisplayModeChange.bind(this,"month"),__source:{fileName:Be,lineNumber:824}})),s.a.createElement(ie.a,{onClick:this.onClearBrowsingData,tooltip:Object(w.a)("title","Clear browsing data"),image:oe.B,__source:{fileName:Be,lineNumber:831}}),s.a.createElement(ie.a,{onClick:this.toggleMoreInfo,tooltip:e.moreInfoVisible?Object(w.a)("Hide info"):Object(w.a)("More info"),image:oe.ac,isPressed:e.moreInfoVisible,__source:{fileName:Be,lineNumber:836}})),e.text.length>1&&s.a.createElement("div",{className:"toolbar toolbar-default toolbar-medium search-options",__source:{fileName:Be,lineNumber:846}},s.a.createElement(ie.a,{onClick:this.onSelectAll,title:Object(w.a)("Search All History"),disabled:d,__source:{fileName:Be,lineNumber:847}}),s.a.createElement("label",{__source:{fileName:Be,lineNumber:852}},s.a.createElement("input",{type:"checkbox",checked:e.searchURL,onChange:this.onIncludeUrlChange,__source:{fileName:Be,lineNumber:853}}),Object(w.a)("Include Address in Search Results")),s.a.createElement("div",{className:"filtered-entries",__source:{fileName:Be,lineNumber:858}},Object(w.a)("$1 Entry","$1 Entries",[o.pageViewsCount]))),s.a.createElement("div",{className:Te()({"history-view":!0,selecting:this._selectionHighlight}),__source:{fileName:Be,lineNumber:864}},e.dayPickerVisible&&s.a.createElement("div",{className:"manager-editor",__source:{fileName:Be,lineNumber:869}},s.a.createElement("div",{className:"timeline",onMouseLeave:this.handleMouseUp,__source:{fileName:Be,lineNumber:870}},s.a.createElement(ye.b,{Component:Object(ye.c)(Object(ye.d)(ye.a)),width:270,height:k,rowHeight:50,selected:a.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,min:b.toDate(),max:f.toDate(),minDate:_.toDate(),maxDate:f.toDate(),displayOptions:{showHeader:!1,showOverlay:!0,showTodayHelper:!1,overscanMonthCount:6},locale:this._locale,autoFocus:!1,tabIndex:0,renderMonthDay:this.renderCalDay.bind(this,v,E),__source:{fileName:Be,lineNumber:871}}))),s.a.createElement("div",{className:"manager-content history-calendar-container",__source:{fileName:Be,lineNumber:900}},"range"===e.displayMode&&s.a.createElement("div",{className:"view range",onContextMenu:this.onContextMenu,__source:{fileName:Be,lineNumber:903}},s.a.createElement(te.a,{fields:We,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:Be,lineNumber:905}}),i.length>0?s.a.createElement("div",{className:"history-tree",__source:{fileName:Be,lineNumber:919}},s.a.createElement(ke.a,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:i,onSearchDomain:this.onSearchDomain,historyFilter:e,__source:{fileName:Be,lineNumber:920}})):s.a.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:Be,lineNumber:929}},Object(w.a)("No browsing history data for selected period."))),"day"===e.displayMode&&s.a.createElement("div",{className:"view day",onContextMenu:this.onContextMenu,__source:{fileName:Be,lineNumber:937}},s.a.createElement(te.a,{fields:We,columns:this.state.columns,fullsize:!0,manualSorting:!1,keyAccess:this.props.keyAccess,onUpdateRow:this.onUpdateRow,onSaveRow:this.onSaveRow,onSortChange:this.onSortChange,sortField:e.sortField,sortOrder:e.sortOrder,__source:{fileName:Be,lineNumber:939}}),i.length>0?s.a.createElement("div",{className:"history-tree",__source:{fileName:Be,lineNumber:953}},s.a.createElement(ke.a,{ref:"tree",fullView:!0,inManager:!0,columns:this.state.columns,nodes:i,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:Be,lineNumber:954}})):s.a.createElement("div",{className:"vivaldi-tree-empty",__source:{fileName:Be,lineNumber:963}},Object(w.a)("No browsing history data for selected period."))),"week"===e.displayMode&&s.a.createElement("div",{className:"view week",__source:{fileName:Be,lineNumber:971}},this.renderCalWeek()),"month"===e.displayMode&&s.a.createElement("div",{className:"view month",__source:{fileName:Be,lineNumber:977}},s.a.createElement("div",{className:"month-calendar",__source:{fileName:Be,lineNumber:978}},s.a.createElement(ye.b,{Component:Object(ye.c)(Object(ye.d)(ye.a)),width:"100%",height:k,rowHeight:y>100?y:100,selected:a.start.toDate(),onSelect:this.onCalendarSelect,onDayMouseDown:this.handleMouseDown,onDayMouseUp:this.handleMouseUp,onDayMouseEnter:this.handleMouseEnter,longWeekdays:!0,min:He(l.startOf("month")).toDate(),max:He(l.endOf("month")).toDate(),minDate:He(l.startOf("month")).toDate(),maxDate:He(l.endOf("month")).toDate(),displayOptions:{showHeader:!1,showOverlay:!1,showTodayHelper:!1,overscanMonthCount:0},locale:this._locale,autoFocus:!r,tabIndex:0,renderMonthDay:this.renderMonthDay.bind(this,v,E,y,Math.floor(this.props.maxWidth/7)),__source:{fileName:Be,lineNumber:979}})),e.monthEntriesVisible&&s.a.createElement("div",{className:"month-links",__source:{fileName:Be,lineNumber:1009}},s.a.createElement("ul",{className:"Cal__Weekdays__root",__source:{fileName:Be,lineNumber:1010}},s.a.createElement("li",{className:"Cal__Weekdays__day",__source:{fileName:Be,lineNumber:1011}},Object(w.a)("Entries"))),s.a.createElement(ke.a,{ref:"tree",fullView:!1,inManager:!0,nodes:i,historyFilter:e,onSearchDomain:this.onSearchDomain,__source:{fileName:Be,lineNumber:1015}})),s.a.createElement("button",{className:"toggle-month-entries",title:e.monthEntriesVisible?Object(w.a)("Hide entries"):Object(w.a)("Show entries"),onClick:this._setView,value:"monthEntriesVisible",tabIndex:this.props.keyAccess,__source:{fileName:Be,lineNumber:1025}},e.monthEntriesVisible?">":"<"))),e.moreInfoVisible&&s.a.createElement(we,{title:h,data:i,groupedHistoryData:o,historyStatistics:t,onOpenDomain:this.onOpenDomain,chartData:n,max:v,scaleY:"sqrt",onDomainContextMenu:this.onDomainContextMenu,__source:{fileName:Be,lineNumber:1040}})))}}Re(Ve,"contextType",h.a);var Ge=Object(P.a)(Object(Ce.a)(Ve),Fe),Ke=a(52),ze=a(1016),Ye=a(207),$e=a(190),Qe=a(16),Ze=a(68),qe="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialSuggestSection.jsx";function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Je extends s.a.Component{constructor(e){super(e),Xe(this,"keyDownHandler",(e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;case"ArrowUp":this.moveFocus(e,"up",!1);break;case"ArrowDown":this.moveFocus(e,"down",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),Xe(this,"mouseBlockHandler",e=>{e.preventDefault()}),Xe(this,"moveFocus",(e,t,a)=>{const i=ee.a.findDOMNode(this);if(i instanceof HTMLElement&&(!0===a||Object(Ze.a)(i))){const a=Array.from(i.querySelectorAll("button.dial")),s=a.map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===s.length||s.length!==a.length)return!1;let n,r=0,o=-1;switch(a.forEach(e=>{const t=e.getBoundingClientRect();o<t.left&&(r++,o=t.left)}),t){case"current":if(""===e||"first"===e?e=s[0]:"last"===e&&(e=s[0===this.props.keyAccess?s.length-1:0]),n=s.indexOf(e),-1===n)return!1;break;case"left":case"right":if(1===s.length)return!1;if(n=s.indexOf(e),-1===n)return!1;if("right"===t){if((n+1)%r==0)return!1;if(n+=1,n>=s.length)return!1}else{if(n%r==0)return!1;if(n-=1,n>=s.length)return!1}break;case"up":case"down":if(1===s.length)return!1;if(n=s.indexOf(e),-1===n)return!1;if("up"===t){if(n-=r,n<0)return!1}else if(n+=r,n>=s.length)return!1;break;default:return!1}e=s[n];const l=i.querySelector(`button.dial[data-id="${e}"]`);if(l)return l.focus(),!0}return!1}),Xe(this,"closeDrawer",()=>{this.props.onSpeedDialDrawerDone()}),this.state={suggestions:[]}}componentDidMount(){this.updateSuggestions()}updateSuggestions(){if(!Qe.a.isIncognitoOrGuest(this.context.vivaldiWindowId)){const e=$.a.getSpeeddialFolders()[0].children,t=[];e.forEach(e=>{e.url?t.push(e.url):e.children.forEach(e=>{t.push(e.url)})}),ne.default.topSites.get(e=>{const a=e.filter(e=>!t.includes(e.url));this.setState({suggestions:a})})}}addSpeedDial(e,t){if(this.props.node){const a={parentId:this.props.node.id,title:e,url:Object(Me.b)(t)};this.props.onSpeedDialDrawerDone(a)}else this.props.onSpeedDialDrawerDone()}render(){const e=2*Math.floor((this.props.width-36)/90),t=Qe.a.isIncognito(this.context.vivaldiWindowId),{suggestions:a}=this.state;return s.a.createElement("section",{className:"drawer-suggestions",__source:{fileName:qe,lineNumber:226}},s.a.createElement("header",{__source:{fileName:qe,lineNumber:228}},s.a.createElement("h2",{__source:{fileName:qe,lineNumber:229}},Object(w.a)("Suggestions")),s.a.createElement("button",{className:"close",tabIndex:"-1",dangerouslySetInnerHTML:{__html:oe.hc},onClick:this.closeDrawer,__source:{fileName:qe,lineNumber:230}})),t&&s.a.createElement("p",{__source:{fileName:qe,lineNumber:237}},Object(w.a)("Suggestions are not available in private window.")),!t&&s.a.createElement("div",{className:"dials dial-suggestions",style:a.length>0?{display:"grid",gridTemplateColumns:"repeat(auto-fit, 90px)",gridTemplateRows:"repeat(2, 64px)"}:null,__source:{fileName:qe,lineNumber:240}},a.length>0?a.slice(0,e).map((e,t)=>{const a=t.toString();return s.a.createElement("button",{key:t,className:"dial",tabIndex:0===t?"0":this.props.keyAccess,"data-id":a,title:e.title+"\n"+e.url,onMouseDown:this.mouseBlockHandler,onMouseUp:this.mouseBlockHandler,onKeyDown:this.keyDownHandler.bind(this,a),onClick:this.addSpeedDial.bind(this,e.title,e.url),"data-dialurl":e.url,__source:{fileName:qe,lineNumber:251}},s.a.createElement("div",{className:"dial-image suggest-thumbnail-image",__source:{fileName:qe,lineNumber:261}},s.a.createElement(pe.a,{url:e.url,size:32,__source:{fileName:qe,lineNumber:262}})),s.a.createElement("div",{className:"dial-title",__source:{fileName:qe,lineNumber:264}},e.title))}):s.a.createElement("p",{__source:{fileName:qe,lineNumber:268}},Object(w.a)("No history to choose from yet."))))}}Xe(Je,"contextType",h.a);var et=Je,tt=a(230),at=a(72),it=a(80),st="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialDrawer.jsx";function nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rt(e){const t=e.trim();return!!Object(Me.l)(Object(Me.b)(t))||!Object(Me.e)(t)}class ot extends s.a.Component{constructor(e){super(e),nt(this,"_onUrlbarStoreChanged",()=>{const{isActive:e,isOmniDropdownOpen:t,isReaderable:a,isReaderableActive:i,selectionEnd:s,selectionStart:n,...r}=it.a.getUrlfieldStateFromId("speed_Dial_Drawer");this.setState(r)}),nt(this,"addSpeedDialFolder",()=>{if(this.props.node){const e={parentId:this.props.node.id,title:Object(w.a)("title","New Folder")};this.props.onSpeedDialDrawerDone(e)}}),nt(this,"drawerSubmitHandler",e=>{e.stopPropagation(),e.preventDefault();let t=(this.state.autocompleteValue||this.state.editUrl||"").trim();if(0===t.length)return;t=Object(Me.b)(t);const a=t;this.addSpeedDial(a,t)}),nt(this,"onUrlFieldChanged",()=>{const e=this.state.autocompleteValue||this.state.editUrl||"";this.setState({isSpeedDialURLValid:rt(e)})}),nt(this,"focusUrlField",()=>{this.refs.urlField.focus()}),this.state={addSpeedDialTitle:"",editUrl:"",autocompleteValue:"",isSpeedDialURLValid:!1}}componentDidMount(){it.a.addChangeListener(this._onUrlbarStoreChanged)}componentWillUnmount(){it.a.removeChangeListener(this._onUrlbarStoreChanged)}addSpeedDial(e,t){if(this.props.node&&this.props.node.id){const a={parentId:this.props.node.id,title:e,url:Object(Me.b)(t),thumbnail:void 0};at.a.clearUrlfieldState("speed_Dial_Drawer"),this.props.onSpeedDialDrawerDone(a)}}render(){return s.a.createElement($e.a,{focusName:"focus-startpage-drawer",forceTrap:!0,style:{display:"contents"},__source:{fileName:st,lineNumber:124}},s.a.createElement("aside",{key:"drawer",className:"startpage-drawer",__source:{fileName:st,lineNumber:128}},s.a.createElement("section",{className:"drawer-adddial",style:{width:400},__source:{fileName:st,lineNumber:129}},s.a.createElement("header",{__source:{fileName:st,lineNumber:131}},s.a.createElement("h2",{__source:{fileName:st,lineNumber:132}},Object(w.a)("Add Bookmark to Speed Dial"))),s.a.createElement("form",{className:"drawer-addform",onSubmit:this.drawerSubmitHandler,__source:{fileName:st,lineNumber:134}},s.a.createElement(tt.a,{ref:"urlField",pageId:"speed_Dial_Drawer",autoFocus:!0,autocompletionEnabled:!0,className:"address",displayUrl:"",editUrl:this.state.editUrl||"",onChange:this.onUrlFieldChanged,handleDrop:!0,title:Object(w.a)("Enter page address"),placeholder:"https://vivaldi.com",__source:{fileName:st,lineNumber:136}}),s.a.createElement("input",{className:"add-dial-submit primary",type:"submit",disabled:!this.state.isSpeedDialURLValid,value:Object(w.a)("Add"),__source:{fileName:st,lineNumber:147}})),s.a.createElement("div",{className:"toolbar toolbar-default",__source:{fileName:st,lineNumber:153}},s.a.createElement(ie.a,{tabIndex:0,onClick:this.addSpeedDialFolder,image:oe.Q.medium,title:Object(w.a)("command","New Folder"),__source:{fileName:st,lineNumber:154}}))),s.a.createElement(et,{width:this.props.maxWidth-400,onSpeedDialDrawerDone:this.props.onSpeedDialDrawerDone,onHandoverFocus:this.focusUrlField,keyAccess:this.props.keyAccess,node:this.props.node,__source:{fileName:st,lineNumber:162}})))}}var lt=ot,ct=a(1020),dt=a.n(ct),ut=a(357),ht=a(1021),mt=a(44),pt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialAddButton.jsx";function gt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bt extends s.a.Component{constructor(...e){super(...e),gt(this,"keyDownHandler",e=>{if(" "===e.key||"Enter"===e.key)this.props.addItem();else switch(e.key){case"ArrowLeft":this.props.moveFocus("add","left",!1);break;case"ArrowRight":this.props.moveFocus("add","right",!1);break;case"ArrowUp":this.props.moveFocus("add","up",!1);break;case"ArrowDown":this.props.moveFocus("add","down",!1);break;default:return}e.preventDefault(),e.stopPropagation()}),gt(this,"_handleItemMouseDown",e=>{e.button!==mt.a.kLeft&&e.preventDefault()})}render(){const e=Te()({dial:!0,add:!0,active:this.props.drawerIsOpen});return s.a.createElement("div",{className:e,"data-id":"add",style:this.props.style,onMouseDown:this._handleItemMouseDown,tabIndex:this.props.keyAccess,onKeyDown:this.keyDownHandler,__source:{fileName:pt,lineNumber:65}},s.a.createElement("button",{ref:"openAddSpeedDial",className:"thumbnail-image",title:this.props.title,style:this.props.dialShadow,tabIndex:this.props.keyAccess,onClick:this.props.addItem,dangerouslySetInnerHTML:{__html:oe.Tb},__source:{fileName:pt,lineNumber:72}}))}}var ft=bt,_t=a(108),Nt=a(5),vt=a(298),Et=a(368),wt=a(177),St=a(145),Ct=a(39),kt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\speeddial\\SpeedDialView.jsx";function yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ot=[B.kAddressBarSearchSuggestEnabled,B.kThemeUseAnimation,B.kStartpageSpeedDialAddButtonVisible,B.kStartpageSpeedDialAllowDnd,B.kStartpageSpeedDialColumns,B.kStartpageSpeedDialControlsVisible,B.kStartpageSpeedDialDeleteVisible,B.kStartpageSpeedDialTitlesVisible,B.kStartpageSpeedDialWidth,B.kStartpageSpeedDialDisplaySearch],At={stiffness:400,damping:32,precision:.1};class Tt extends i.PureComponent{constructor(...e){super(...e),yt(this,"animate",!1),yt(this,"dragStartX",0),yt(this,"dragStartY",0),yt(this,"dragDialStartPos",[0,0]),yt(this,"speeddialRef",void 0),yt(this,"state",{dialNodes:[],pressed:"none",lastPress:null,dragDialXY:[0,0],dragOrder:null,transitionType:"down",dialId:null}),yt(this,"setSpeeddialRef",e=>{this.speeddialRef=e}),yt(this,"_onWebpageViewStoreChanged",e=>{"PAGE_RELOAD"===e.type&&this._handlePageReload()}),yt(this,"onSearch",(e,t,a={})=>{if(t&&t.url){const i={...a,useSearchEngine:t,post:!0===t.post};at.a.goSearchURL(e,i)}}),yt(this,"handleSpeedDialPointerDown",(e,t)=>{"none"!==this.state.pressed&&this.finishPointerClick(!1),0!==t.button&&1!==t.button||!this.props.prefValues[B.kStartpageSpeedDialAllowDnd]||document.activeElement&&"sd-title-editor"===document.activeElement.className||(this.setState({pressed:"pressed",lastPress:e.id}),this.dragStartX=t.pageX,this.dragStartY=t.pageY)}),yt(this,"onPointerMove",e=>{const{pressed:t}=this.state;if("none"===t||!this.props.prefValues[B.kStartpageSpeedDialAllowDnd])return;if(0===e.buttons)return void this.finishPointerClick(!1);if(!(1&e.buttons))return;const{lastPress:a}=this.state;if(null===a||"dragcancel"===t)return;const i=e.pageX-this.dragStartX,s=e.pageY-this.dragStartY;if("pressed"===t&&Math.abs(i)<=5&&Math.abs(s)<=5)return;const n=this.getSpeedDialGeometry(),r=this.getLastPressPosition();"pressed"===t&&(this.setDialDragListeners(!0),this.dragDialStartPos=this.computeLayout(n,r),this.setState({pressed:"dragging"}));let[o,l]=this.dragDialStartPos;o+=i,l+=s,this.setState({dragDialXY:[o,l]});const{cols:c,rows:d,dialWidth:u,dialHeight:h,thumbnailWidth:m,thumbnailHeight:p}=n,g=this.state.dialNodes.length,b=o+Math.ceil(m/2),f=l+Math.ceil(p/2),_=Object(Et.a)(Math.floor(b/u),0,c-1),N=Object(Et.a)(Math.floor(f/h),0,d-1),v=Math.min(N*c+_,g-1);r!==v&&this.setState(e=>{let t=e.dragOrder||Object(wt.a)(g);return t=function(e,t,a){const i=e.slice(0),s=i[t];return i.splice(t,1),i.splice(a,0,s),i}(t,r,v),{dragOrder:t}})}),yt(this,"onPointerPressEnd",e=>{const{pressed:t}=this.state;"dragging"!==t&&"dragcancel"!==t||(e.stopPropagation(),e.preventDefault()),this.finishPointerClick(!0)}),yt(this,"onDragEscapeKey",()=>{this.setState({pressed:"dragcancel",dragOrder:null})}),yt(this,"onBookmarksMoved",()=>{ne.default.runtime.lastError&&(this.setState({dragOrder:null}),console.warn("Error moving bookmark: ",ne.default.runtime.lastError))}),yt(this,"onDragOverHandler",e=>{e.preventDefault(),e.stopPropagation()}),yt(this,"openParentNode",()=>{this.props.speedDialNode&&this.props.speedDialNode.parentId&&ne.default.bookmarks.getSubTree(this.props.speedDialNode.parentId,e=>{if(ne.default.runtime.lastError)return;const t=e[0];t&&this.props.openSpeedDialNode(t)})}),yt(this,"isTopLevel",()=>!this.props.speedDialNode||!this.props.speedDialSetNode||this.props.speedDialNode.id===this.props.speedDialSetNode.id),yt(this,"_handlePageReload",()=>{!this.props.incognito&&this.props.speedDialNode&&ne.default.bookmarks.getChildren(this.props.speedDialNode.id,e=>{if(!e)return;const t=[];e.forEach((e,a,i)=>{Nt.a.bookmarksPrivate.isCustomThumbnail(e.id,s=>{!1===s&&t.push(e),a===i.length-1&&ae.a.updateBookmarks(t)})})})}),yt(this,"onDragUrlOver",e=>{e.dataTransfer.types.some(e=>"text/uri-list"===e||"text/plain"===e||e===Ct.b)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}),yt(this,"onDropUrlOn",e=>{const t=this.props.speedDialNode;if(t){const a=t.children?t.children.length:0,i={disableMove:!0};Y.a.onDropEvent(e,t.id,a,i)}}),yt(this,"moveFocus",(e,t,a)=>{const i=ee.a.findDOMNode(this.speeddialRef);if(i instanceof HTMLElement){const a=Array.from(i.querySelectorAll("div.dial")).map(e=>e.getAttribute("data-id")).filter(Boolean);if(0===a.length)return!1;let s;const n=this.getSpeedDialGeometry();switch(t){case"current":if(""===e&&(e=a[0]),s=a.indexOf(e),-1===s)return!1;break;case"left":case"right":if(1===a.length)return!1;if(s=a.indexOf(e),-1===s)return!1;if("right"===t){if((s+1)%n.cols==0)return!1;if(s+=1,s>=a.length)return!1}else{if(s%n.cols==0)return!1;if(s-=1,s>=a.length)return!1}break;case"up":case"down":if(1===a.length)return!1;if(s=a.indexOf(e),-1===s)return!1;if("up"===t){if(s-=n.cols,s<0){const e=i.getElementsByClassName("button-startpage up")[0];return!!e&&(e.focus(),!0)}}else if(s+=n.cols,s>=a.length)return!1;break;default:return!1}e=a[s];const r=i.querySelector(`div.dial[data-id="${e}"]`);if(r)return r.focus(),!0}return!1}),yt(this,"renderNavigation",()=>this.isTopLevel()?null:i.createElement("nav",{className:"startpage-folder-navigation",__source:{fileName:kt,lineNumber:695}},i.createElement("button",{onClick:this.openParentNode,title:Object(w.a)("Show Parent Folder"),"data-name":"up-button",className:"button-startpage up",__source:{fileName:kt,lineNumber:696}},i.createElement("span",{dangerouslySetInnerHTML:{__html:oe.z},__source:{fileName:kt,lineNumber:701}}),this.props.speedDialNode?this.props.speedDialNode.title:"")))}static getDerivedStateFromProps(e,t){const a=t.dialId,i=e.speedDialNode,s=i&&i.id,n=(i&&i.children||[]).filter(e=>!$.a.isSeparator(e));if(a===s){let{lastPress:e,dragOrder:a}=t;if(null===e||a||n.every(t=>t.id!==e)&&(e=null),null===e)a=null;else if(a){const e=t.dialNodes;e.length===n.length&&e.every((e,t)=>e.id===n[t].id)||(a=null)}return{...t,dialNodes:n,lastPress:e,dragOrder:a}}let r="down";if(i&&a&&a!==i.parentId)if(n.find(e=>e.id===a))r="up";else{const t=e.speedDialSet;if(t){const e=t.findIndex(e=>e.id===a),i=t.findIndex(e=>e.id===s);-1!==i&&-1!==e&&(i<e?r="right":i>e&&(r="left"))}}return{...t,dialNodes:n,lastPress:null,dragOrder:null,transitionType:r,dialId:s}}getLastPressPosition(){const{dialNodes:e,lastPress:t,dragOrder:a}=this.state;return a?a.findIndex(a=>e[a].id===t):e.findIndex(e=>e.id===t)}componentDidMount(){_t.a.addChangeListener(this._onWebpageViewStoreChanged),this.animate=!0}componentDidUpdate(e,t){t.dialId===this.state.dialId&&t.dialNodes.length+1===this.state.dialNodes.length&&this.props.onNodeAdded()}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout),_t.a.removeChangeListener(this._onWebpageViewStoreChanged),this.finishPointerClick(!1)}maybeSpring(e,t){return this.animate&&this.props.prefValues[B.kThemeUseAnimation]?Object(vt.spring)(e,t):e}setDialDragListeners(e){if(!this.props.prefValues[B.kStartpageSpeedDialAllowDnd])return;const t=this.context;e?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerPressEnd,!0),t.addEventListener("pointercancel",this.onPointerPressEnd,!0),t.addEventListener("pointerdown",this.onPointerPressEnd,!0),Ke.a.bind("esc",this.onDragEscapeKey)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerPressEnd,!0),t.removeEventListener("pointercancel",this.onPointerPressEnd,!0),t.removeEventListener("pointerdown",this.onPointerPressEnd,!0),Ke.a.unbind("esc",this.onDragEscapeKey));const a=document.getElementById("browser");a&&(a.style.pointerEvents=e?"none":"auto")}finishPointerClick(e){const{pressed:t}=this.state;if("none"!==t){if("dragging"===t||"dragcancel"===t){this.setDialDragListeners(!1);let a=!0;const{dragOrder:i}=this.state;if("dragging"===t&&e&&i){const e=this.getLastPressPosition(),t=this.state.dialNodes[i[e]];if("number"==typeof t.index&&t.index!==e){const i={index:e+(t.index<e?1:0)};ne.default.bookmarks.move(t.id,i,this.onBookmarksMoved),a=!1}}a&&this.setState({dragOrder:null})}this.setState({pressed:"none"})}}getSpeedDialGeometry(){let e=this.props.prefValues[B.kStartpageSpeedDialWidth];if(-1===e){const t=Math.round(this.props.maxWidth/(1.4*this.props.prefValues[B.kStartpageSpeedDialColumns]));e=Math.max(Math.min(t,320),120)}const t=Math.round(e/1.2222),a=Math.round(e/12);let i=this.state.dialNodes.length;this.props.prefValues[B.kStartpageSpeedDialAddButtonVisible]&&i++;const s=e+2*a;let n=t+2*a;"never"!==this.props.prefValues[B.kStartpageSpeedDialTitlesVisible]&&(n+=30);const r=6*a,o=this.props.prefValues[B.kStartpageSpeedDialColumns];let l=Math.max(1,Math.min(Math.floor((this.props.maxWidth-r)/s),o));return this.props.maxWidth<s*l+r&&(l=1),{count:i,cols:l,rows:Math.ceil(i/l),dialWidth:s,dialHeight:n,thumbnailWidth:e,thumbnailHeight:t,dialSpace:a}}computeLayout(e,t){const a=Math.floor(t/e.cols),i=t%e.cols;return[e.dialWidth*i,e.dialHeight*a]}render(){const{open:e,maxWidth:t,speedDialSet:a,prefValues:s}=this.props;if(!1===e||!t)return null;const n=s[B.kStartpageSpeedDialAllowDnd],{pressed:r,dialId:o}=this.state,l="dragging"===r||"dragcancel"===r,c=Te()({dials:!0,speeddial:!0,"sd-titles-onhover":"hover"===s[B.kStartpageSpeedDialTitlesVisible]}),d=a.length>0,u=this.getSpeedDialGeometry(),{count:h,cols:m,rows:p,dialWidth:g,dialHeight:b,thumbnailWidth:f,thumbnailHeight:_,dialSpace:N}=u,v=m*g-2*N,E=Math.round(f/20);return i.createElement(i.Fragment,null,this.props.prefValues[B.kStartpageSpeedDialDisplaySearch]&&i.createElement(ut.a,{useFavicon:!0,key:"speed_dial_search",origin:"speed_dial_view",onEnterPressed:this.onSearch,suggestEnabled:s[B.kAddressBarSearchSuggestEnabled],__source:{fileName:kt,lineNumber:741}}),i.createElement(dt.a,{className:Te()({"dials-wrapper":!0,dragging:l,"dragging-disabled":!n}),transitionName:this.state.transitionType,transitionEnterTimeout:300,transitionLeaveTimeout:300,overflowHidden:!1,__source:{fileName:kt,lineNumber:749}},i.createElement("div",{onDragOver:this.onDragUrlOver,onDrop:this.onDropUrlOn,key:"node__"+(o||"unset"),ref:this.setSpeeddialRef,className:c,__source:{fileName:kt,lineNumber:759}},this.renderNavigation(),i.createElement("div",{className:"dial-columns",onPointerMove:"pressed"===r&&n?this.onPointerMove:null,onPointerUp:this.onPointerPressEnd,onPointerCancel:this.onPointerPressEnd,style:{width:v,height:p*b,marginLeft:N,marginRight:N},__source:{fileName:kt,lineNumber:767}},function(e,t){const a=Array(e);for(let i=0;i<e;i++)a[i]=t(i);return a}(h,e=>{const{dialNodes:t}=this.state;let a=null;if(e<t.length){const{dragOrder:i}=this.state,s=i?i[e]:e;a=t[s]}const n=!!a&&a.id===this.state.lastPress,o=n&&"dragging"===r,[l,c]=o?this.state.dragDialXY:this.computeLayout(u,e);let h;return h=o?{width:f,height:_,translateX:l,translateY:c,opacity:this.maybeSpring(.95,At),boxShadowV:(l-(v-g)/2)/50,boxShadowH:8,boxShadowBlur:16,boxShadowOpacity:.1}:a?{width:f,height:_,translateX:this.maybeSpring(l,At),translateY:this.maybeSpring(c,At),opacity:this.maybeSpring(1,At),boxShadowV:(l-(v-g)/2)/120,boxShadowH:3,boxShadowBlur:3,boxShadowOpacity:.12}:{width:f,height:_,translateX:this.maybeSpring(l,At),translateY:this.maybeSpring(c,At),opacity:1,boxShadowV:(l-(v-g)/2)/120,boxShadowH:3,boxShadowBlur:3,boxShadowOpacity:.12},i.createElement(vt.Motion,{key:a?"node_"+a.id:"add_button",style:h,children:St.default,__source:{fileName:kt,lineNumber:835}},({translateX:t,translateY:r,opacity:l,boxShadowV:c,boxShadowH:u,boxShadowBlur:h,boxShadowOpacity:m,width:p,height:g})=>{const b={boxShadow:`0 0 0 1px rgba(0, 0, 0, 0.12),\n                  ${c}px ${u}px ${h}px\n                    rgba(0, 0, 0, ${m})`};return a?i.createElement(ht.a,{incognito:this.props.incognito,onPointerDown:this.handleSpeedDialPointerDown,dialShadow:b,dragging:o,style:{transform:`translate3d(${t}px, ${r}px, 0)`,zIndex:n?999:e,opacity:l,width:p,height:g},titleMargin:E,node:a,keyAccess:0===e?0:-1,prefValues:s,moveFocus:this.moveFocus,openSpeedDialNode:this.props.openSpeedDialNode,awaitingInitialEditId:this.props.awaitingInitialEditId,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,__source:{fileName:kt,lineNumber:857}}):i.createElement(ft,{style:{transform:`translate3d(${t}px, ${r}px, 0)`,zIndex:0,width:f,height:_},dialShadow:b,drawerIsOpen:this.props.drawerIsOpen,title:d?Object(w.a)("title","Add bookmark to Speed Dial"):Object(w.a)("First add a new Speed Dial folder"),keyAccess:0===e?0:-1,moveFocus:this.moveFocus,addItem:this.props.toggleStartpageDrawer,__source:{fileName:kt,lineNumber:883}})})})))))}}yt(Tt,"contextType",h.a);var It=Object(P.a)(Tt,Ot),Dt=a(554),Pt=a(20),xt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\startpage-topmenu.jsx";function Mt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Lt=[B.kStartpageSpeedDialAddButtonVisible];class jt extends s.a.Component{constructor(...e){super(...e),Mt(this,"openMenuItem",(e,t,a)=>{this.props.openMenuItem(e,t,a)}),Mt(this,"openSection",(e,t,a)=>{this.props.section!==e&&x.a.openURL(Pt.a.internals[e],{inCurrent:!0}),e===G.SpeedDial&&this.props.openMenuItem(G.SpeedDial,t,a)}),Mt(this,"createSpeedDialSet",()=>{this.props.section!==G.SpeedDial&&x.a.openURL(Pt.a.internals[G.SpeedDial],{inCurrent:!0}),this.props.createSpeedDialSet()}),Mt(this,"getContextMenuItems",(e,t)=>[{handler:this.handleRename.bind(this,e),...Object(p.a)("Rename")},{name:"---"},{handler:this.handleRemove.bind(this,e),...Object(p.a)("Remove from Speed Dial")}]),Mt(this,"handleRename",e=>{this.refs[e].enableEditing()}),Mt(this,"handleRemove",e=>{this.refs[e].removeSpeedDial()}),Mt(this,"handleMouseDown",e=>{e.preventDefault()}),Mt(this,"handleKeyDown",(e,t)=>{switch(t.key){case"ArrowLeft":this.moveFocus(e,"left",!1);break;case"ArrowRight":this.moveFocus(e,"right",!1);break;default:return}t.preventDefault(),t.stopPropagation()}),Mt(this,"moveFocus",(e,t,a)=>{const i=ee.a.findDOMNode(this);if(i instanceof HTMLElement&&(!0===a||Object(Ze.a)(i))){const a=Array.from(i.querySelectorAll("button.button-startpage")).map(e=>e.getAttribute("data-id")).filter(Boolean);if("current"===t){if(""===e){const t=document.getElementsByClassName("div.button-startpage active")[0];t instanceof HTMLElement&&(e=t.getAttribute("data-id"))}const t=a.indexOf(e);if(-1===t)return;e=a[t]}else if("right"===t||"left"===t){if(1===a.length)return;let i=a.indexOf(e);if(-1===i)return;i="right"===t?i+1>=a.length?0:i+1:i<=0?a.length-1:i-1,e=a[i]}const s=i.querySelector(`button.button-startpage[data-id="${e}"]`);s&&s.focus()}})}render(){let e=-1===this.props.keyAccess;const t=t=>{let a=-1;return!e&&t&&(e=!0,a=0),a};return s.a.createElement("nav",{className:"startpage-navigation",__source:{fileName:xt,lineNumber:177}},s.a.createElement("div",{className:"startpage-navigation-group",__source:{fileName:xt,lineNumber:178}},this.props.speedDialSet.map((function(e,a){const i=this.props.section===G.SpeedDial&&this.props.speedDialSetNode&&this.props.speedDialSetNode.id===e.id,n="title"+a;return s.a.createElement(Dt.a,{className:Te()({active:i,"button-startpage":!0,"no-page-focus":!0}),ref:n,key:e.id,bookmark:e,howToEdit:"doubleClick",getContextMenuItems:this.getContextMenuItems.bind(this,n),keyAccess:t(i),onSelect:this.openSection.bind(this,G.SpeedDial,e),onKeyDown:this.handleKeyDown,needsInitialEdit:this.props.initialEditSpeedDialSet===e.id,setSpeedDialAwaitingEdit:this.props.setSpeedDialAwaitingEdit,__source:{fileName:xt,lineNumber:187}})}),this),this.props.prefValues[B.kStartpageSpeedDialAddButtonVisible]&&s.a.createElement("button",{onClick:this.createSpeedDialSet,"data-id":"add",className:"button-startpage add-set no-page-focus",title:Object(w.a)("Add new Speed Dial folder"),tabIndex:t(!0),onKeyDown:this.handleKeyDown.bind(this,"add"),dangerouslySetInnerHTML:{__html:oe.f.medium},__source:{fileName:xt,lineNumber:210}})),s.a.createElement("div",{className:"startpage-navigation-group",__source:{fileName:xt,lineNumber:222}},s.a.createElement("button",{onClick:this.openSection.bind(this,G.Bookmarks,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,G.Bookmarks),title:Object(w.a)("Bookmarks"),"data-id":G.Bookmarks,tabIndex:t(!0),className:Te()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===G.Bookmarks}),dangerouslySetInnerHTML:{__html:oe.t.medium+Object(w.a)("Bookmarks")},__source:{fileName:xt,lineNumber:223}}),s.a.createElement("button",{onClick:this.openSection.bind(this,G.History,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,G.History),title:Object(w.a)("History"),"data-id":G.History,tabIndex:t(!0),className:Te()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===G.History}),dangerouslySetInnerHTML:{__html:oe.T.medium+Object(w.a)("History")},__source:{fileName:xt,lineNumber:236}}),E.a.isEnabled("notes_manager")?s.a.createElement("button",{onClick:this.openSection.bind(this,G.NotesManager,null),onMouseDown:this.handleMouseDown,onKeyDown:this.handleKeyDown.bind(this,G.NotesManager),title:Object(w.a)("Notes"),"data-id":G.NotesManager,tabIndex:t(!0),className:Te()({"button-startpage":!0,"no-page-focus":!0,active:this.props.section===G.NotesManager}),dangerouslySetInnerHTML:{__html:oe.lb.large+Object(w.a)("Notes")},__source:{fileName:xt,lineNumber:250}}):null,null))}}var Bt=Object(P.a)(jt,Lt),Rt=a(85),Ft=a(87),Ut=a(84),Wt=a.n(Ut),Ht=a(146),Vt=a(42),Gt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\startpage\\StartPage.jsx";function Kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zt=[B.kBookmarksConfirmOpening,B.kBookmarksConfirmOpeningThreshold,B.kKeyboardTabToAll,B.kStartpageBackgroundColor,B.kStartpageBackgroundColorCustom,B.kStartpageImageEnable,B.kStartpageImagePath,B.kStartpageImagePathCustom,B.kStartpageImageRepeat,B.kStartpageImageStretch,B.kStartpageNavigation,B.kStartpageSpeedDialAddButtonVisible,B.kTabsBarPosition,B.kTabsBarWidth];class Yt extends s.a.PureComponent{constructor(e,t){super(e),Kt(this,"bookmarkFilter",""),Kt(this,"_onStoreChange",()=>{const e=$.a.getSpeeddialFolders();let t,a=e[0],i=a;for(t of e)this.getUpdatedNode(t,this.state.currentSpeeddial)&&(i=this.getUpdatedNode(t,this.state.currentSpeeddial)),this.getUpdatedNode(t,this.state.menuSpeeddial)&&(a=this.getUpdatedNode(t,this.state.menuSpeeddial));this.setState({bookmarksAvailable:!0,speeddialFolders:e,menuSpeeddial:a,currentSpeeddial:i})}),Kt(this,"_onTaskStoreChange",()=>{this.forceUpdate()}),Kt(this,"jumpToTop",()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&(e.scrollTop=0)}),Kt(this,"scrollToBottom",()=>{const e=this.refs.sdWrapper;e instanceof HTMLElement&&e.scrollTo({top:e.scrollHeight,left:0,behavior:"smooth"})}),Kt(this,"onResize",e=>{const t=e[0].contentRect;(this.state.viewHeight!==t.height||this.state.viewWidth!==t.width)&&this.setState({viewWidth:t.width,viewHeight:t.height})}),Kt(this,"getUpdatedNode",(e,t)=>{if(e&&e.id&&t&&t.id){if(e.id===t.id)return e;if(e.children){for(var a=0;a<e.children.length;a++){var i=this.getUpdatedNode(e.children[a],t);if(i&&i.id===t.id)return i}return null}return null}return null}),Kt(this,"setBookmarkFilter",e=>{this.bookmarkFilter=e}),Kt(this,"showStartpageDrawer",(e,t)=>{this.setState({drawerIsOpen:e},()=>{!1===e&&""===this.state.awaitingInitialEditId&&this._speeddialview.moveFocus(t||"add","current",!1)})}),Kt(this,"closeStartpageDrawer",()=>{this.showStartpageDrawer(!1,"")}),Kt(this,"toggleStartpageDrawer",()=>{0===this.state.speeddialFolders.length?this.createSpeedDialSet():this.showStartpageDrawer(!this.state.drawerIsOpen)}),Kt(this,"handleDoubleClick",()=>{this.state.section!==G.SpeedDial||this.props.prefValues[B.kStartpageSpeedDialAddButtonVisible]||this.toggleStartpageDrawer()}),Kt(this,"handlePaste",()=>{document.addEventListener("paste",this.onPaste),document.execCommand("paste"),document.removeEventListener("paste",this.onPaste)}),Kt(this,"onPaste",e=>{this.state.currentSpeeddial&&(Y.a.pasteWithPromise(e,this.state.currentSpeeddial.id,!0),e.stopPropagation(),e.preventDefault())}),Kt(this,"createSpeedDialSet",()=>{Y.a.create({parentId:$.a.getRootId(),title:$.a.getDefaultFolderName()},e=>{Y.a.update(e.id,{speeddial:!0},e=>{this.setState({initialEditSpeedDialSet:e.id})})})}),Kt(this,"openMenuItem",(e,t,a)=>{this.props.updatePageThumbnailWithActiveWebview(1e3);const i=t&&t.id&&t;this.jumpToTop(),this.setState({section:e,menuSpeeddial:i,currentSpeeddial:i})}),Kt(this,"isFolder",e=>!e.url),Kt(this,"openFolder",(e,t)=>{if(!0===(t=t||{}).openInBackground){if(this.props.prefValues[B.kBookmarksConfirmOpening]&&e.children&&e.children.length>this.props.prefValues[B.kBookmarksConfirmOpeningThreshold]){const a={bookmarks:e.children,inBackground:t.openInBackground,newTab:t.openInNewTab};return void q.a.showConfirmOpenBookmarkDialog(a)}ne.default.bookmarks.getChildren(e.id,e=>{e.forEach(e=>{x.a.openURL(e.url,{inCurrent:!1,inBackground:!0})})})}else this.jumpToTop(),this.setState({currentSpeeddial:e},()=>{this._speeddialview.moveFocus("","current",!1)})}),Kt(this,"openSpeedDialNode",(e,t)=>{t=t||{},this.isFolder(e)?this.openFolder(e,t):t.openInNewWindow?x.a.openWindow(e.url,{incognito:t.incognito,transition:Rt.a.AUTO_BOOKMARK}):e.url&&x.a.openURL(e.url,{inCurrent:!t.openInNewTab,inBackground:t.openInBackground,bookmarkId:e.id,addOpenerTabId:!0,inSpecificPageId:t.openInNewTab?void 0:this.props.pageId,transition:Rt.a.AUTO_BOOKMARK})}),Kt(this,"setSpeedDialAwaitingEdit",e=>{this.setState({awaitingInitialEditId:e})}),Kt(this,"onSpeedDialDrawerDone",e=>{e&&Y.a.create(e,e=>{e.url?e&&!Qe.a.isIncognito(this.context.vivaldiWindowId)&&ae.a.updateBookmark(e):this.setSpeedDialAwaitingEdit(e.id),this.showStartpageDrawer(!1,e.id)}),this.closeStartpageDrawer()}),Kt(this,"customize",()=>{q.a.showSettings("startpage")}),Kt(this,"_setStartpageStyle",()=>{if(this.props&&this.props.open&&this.props.prefValues){const{prefValues:e}=this.props,t=ee.a.findDOMNode(this.refs.startpage),a=t instanceof HTMLElement?t.style:null,i=e[B.kStartpageImageStretch]?"cover":"auto",s="user_defined"===e[B.kStartpageBackgroundColor]?e[B.kStartpageBackgroundColorCustom]:e[B.kStartpageBackgroundColor];let n,r=e[B.kStartpageImageRepeat]?"repeat":"no-repeat";e[B.kStartpageImageEnable]?n="user_defined"===e[B.kStartpageImagePath]?"url("+e[B.kStartpageImagePathCustom]+")":"desktop_image"===e[B.kStartpageImagePath]?"url(chrome://vivaldi-data/desktop-image/"+this.state.wallpaperId+")":"url("+e[B.kStartpageImagePath]+")":(n="url(data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=)",r="no-repeat"),!a||a.backgroundColor===s&&a.backgroundImage===n&&a.backgroundSize===i&&a.backgroundRepeat===r||(a.backgroundColor=s,a.backgroundImage=n,a.backgroundSize=i,a.backgroundRepeat=r)}}),Kt(this,"renderSection",e=>{if(this.state.section===G.Bookmarks)return s.a.createElement(he,{filter:this.bookmarkFilter,onFilterChange:this.setBookmarkFilter,__source:{fileName:Gt,lineNumber:465}});if(this.state.section===G.History)return s.a.createElement(Ge,{pageId:this.props.pageId,keyAccess:this.props.prefValues[B.kKeyboardTabToAll],maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,__source:{fileName:Gt,lineNumber:470}});if(this.state.section===G.SpeedDial)return this.state.bookmarksAvailable?s.a.createElement(It,{ref:e=>this._speeddialview=e,open:!0,onNodeAdded:this.scrollToBottom,speedDialNode:this.state.currentSpeeddial,speedDialSetNode:this.state.menuSpeeddial,speedDialSet:this.state.speeddialFolders,keyAccess:this.props.prefValues[B.kKeyboardTabToAll],drawerIsOpen:this.state.drawerIsOpen,maxWidth:this.state.viewWidth,maxHeight:this.state.viewHeight,openSpeedDialNode:this.openSpeedDialNode,toggleStartpageDrawer:this.toggleStartpageDrawer,incognito:e,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,awaitingInitialEditId:this.state.awaitingInitialEditId,__source:{fileName:Gt,lineNumber:481}}):null;if(this.state.section===G.Calendar)return s.a.createElement(A.a,{pageId:this.props.pageId,__source:{fileName:Gt,lineNumber:501}});if(this.state.section===G.NotesManager){const e=new URL(this.props.url).searchParams.get("path")||"-1";return s.a.createElement(ze.a,{key:`notes-manager-${this.props.pageId}`,id:e,pageId:this.props.pageId,__source:{fileName:Gt,lineNumber:506}})}return console.warn("Unknown Startpage Section: ",this.state.section),null}),Kt(this,"getContextMenuItems",()=>{const e=!1===this.state.drawerIsOpen&&Boolean(this.state.currentSpeeddial)&&!1===Qe.a.isGuestSession(this.context.vivaldiWindowId),t=!1===this.state.drawerIsOpen&&!this.state.currentSpeeddial&&!1===Qe.a.isGuestSession(this.context.vivaldiWindowId);return[{handler:this.toggleStartpageDrawer,visible:e,...Object(p.a)("command","Add Bookmark to Speed Dial")},{handler:this.createSpeedDialSet,visible:t,...Object(p.a)("command","Add Speed Dial Folder")},{name:"---"},{handler:this.handlePaste,visible:e,...Object(p.a)("verb","Paste")},{name:"---"},{handler:()=>Ft.a.toggleFullscreen(this.context.vivaldiWindowId),...Object(p.a)("Fullscreen")},{name:"---"},{handler:this.customize,visible:!1===Qe.a.isGuestSession(this.context.vivaldiWindowId),...Object(p.a)("other","Customize...")}]}),Kt(this,"onContextMenu",e=>{Object(m.a)(this.context.vivaldiWindowId,this.getContextMenuItems())(e)});const a=$.a.getSpeeddialFolders(),i=a[0],n=Object(Vt.b)(),r=this.props.prefValues[B.kTabsBarWidth],o=this.props.prefValues[B.kTabsBarPosition],l="left"===o||"right"===o?r:0;this.state={section:e.view,bookmarksAvailable:$.a.hasBeenInitialized(),speeddialFolders:a,menuSpeeddial:i,currentSpeeddial:i,drawerIsOpen:!1,awaitingInitialEditId:"",initialEditSpeedDialSet:"",viewWidth:t.innerWidth-n-l,viewHeight:t.innerHeight,wallpaperId:Wt()()}}componentDidMount(){this._setStartpageStyle(),$.a.addChangeListener(this._onStoreChange),z.a.addChangeListener(this._onTaskStoreChange)}componentWillUnmount(){$.a.removeChangeListener(this._onStoreChange),z.a.removeChangeListener(this._onTaskStoreChange),Ke.a.unbind("esc",this.closeStartpageDrawer)}componentDidUpdate(e,t){t.drawerIsOpen!==this.state.drawerIsOpen&&(this.state.drawerIsOpen?Ke.a.bind("esc",this.closeStartpageDrawer):Ke.a.unbind("esc",this.closeStartpageDrawer)),this._setStartpageStyle()}UNSAFE_componentWillReceiveProps(e){if(e.view!==this.props.view){let t;t="bookmarks"===e.view?G.Bookmarks:"history"===e.view?G.History:"calendar"===e.view?G.Calendar:"notes"===e.view?G.NotesManager:G.SpeedDial,this.setState({section:t})}}render(){if(!this.props.open)return null;const e=Qe.a.isIncognito(this.context.vivaldiWindowId);return s.a.createElement(Ye.a,{ref:"startpage",className:"startpage",onResize:this.onResize,__source:{fileName:Gt,lineNumber:567}},("on"===this.props.prefValues[B.kStartpageNavigation]||"speed_dial_only"===this.props.prefValues[B.kStartpageNavigation]&&this.state.section===G.SpeedDial)&&s.a.createElement(Bt,{openMenuItem:this.openMenuItem,section:this.state.section,speedDialSet:this.state.speeddialFolders,speedDialSetNode:this.state.menuSpeeddial,createSpeedDialSet:this.createSpeedDialSet,initialEditSpeedDialSet:this.state.initialEditSpeedDialSet,setSpeedDialAwaitingEdit:this.setSpeedDialAwaitingEdit,keyAccess:this.props.prefValues[B.kKeyboardTabToAll],__source:{fileName:Gt,lineNumber:575}}),s.a.createElement("div",{className:"startpage-content",onContextMenu:this.state.section===G.SpeedDial?this.onContextMenu:null,onDoubleClick:this.handleDoubleClick,__source:{fileName:Gt,lineNumber:586}},s.a.createElement("div",{className:"sdwrapper",ref:"sdWrapper",__source:{fileName:Gt,lineNumber:592}},this.renderSection(e))),s.a.createElement(Ht.TransitionGroup,{className:"startpage-drawer-wrapper",__source:{fileName:Gt,lineNumber:599}},this.state.section===G.SpeedDial&&this.state.drawerIsOpen&&s.a.createElement(Ht.CSSTransition,{classNames:"startpage-drawer-transition",timeout:{enter:500,exit:200},__source:{fileName:Gt,lineNumber:602}},s.a.createElement(lt,{node:this.state.currentSpeeddial,keyAccess:this.props.prefValues[B.kKeyboardTabToAll],maxWidth:this.state.viewWidth,onSpeedDialDrawerDone:this.onSpeedDialDrawerDone,__source:{fileName:Gt,lineNumber:605}}))))}}Kt(Yt,"contextType",h.a);var $t=Object(P.a)(Yt,zt),Qt=a(509),Zt=a(96),qt="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\themecolors\\ThemeColors.jsx";const Xt={colorBg:Object(w.a)("Background"),colorFg:Object(w.a)("Foreground"),colorAccent:Object(w.a)("Accent"),colorHighlight:Object(w.a)("Highlight"),colorBorder:Object(w.a)("Border")};class Jt extends s.a.Component{render(){const e=this.props.vivaldiSettings,t=Object.entries(Object(Qt.a)(e.BORDER_RADIUS)),a=D.e.all(I()(e.BROWSER_COLOR_FG),I()(e.BROWSER_COLOR_BG),I()(e.BROWSER_COLOR_HIGHLIGHT_BG),I()(e.BROWSER_COLOR_ACCENT_BG));return s.a.createElement("div",{className:"theme-test",tabIndex:"0",__source:{fileName:qt,lineNumber:36}},s.a.createElement("h1",{__source:{fileName:qt,lineNumber:37}},Object(w.a)("Theme Color Test Page")),s.a.createElement("p",{__source:{fileName:qt,lineNumber:40}},Object(w.a)("$1 color and $2 radius variables created",[Object.entries(a).length,t.length])),Object.entries(Xt).map(([e,t])=>{const i=Object.entries(Object.keys(a).filter(t=>t.includes(e)).reduce((e,t)=>(e[t]=a[t],e),{}));return s.a.createElement("div",{key:e,__source:{fileName:qt,lineNumber:56}},s.a.createElement("h2",{__source:{fileName:qt,lineNumber:57}},`${t} (${i.length})`),s.a.createElement("div",{className:"list",__source:{fileName:qt,lineNumber:58}},i.map(([e,t])=>s.a.createElement("div",{key:e,style:{backgroundColor:t},__source:{fileName:qt,lineNumber:60}},s.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:qt,lineNumber:63}}),s.a.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:qt,lineNumber:64}})))))}),s.a.createElement("div",{__source:{fileName:qt,lineNumber:72}},s.a.createElement("h2",{__source:{fileName:qt,lineNumber:73}},`${Object(w.a)("Radius")} (${t.length})`),s.a.createElement("div",{className:"list",__source:{fileName:qt,lineNumber:74}},t.map(([e,t])=>s.a.createElement("div",{key:e,style:{borderRadius:t},__source:{fileName:qt,lineNumber:76}},s.a.createElement("input",{type:"text",value:e,readOnly:!0,__source:{fileName:qt,lineNumber:79}}),s.a.createElement("input",{type:"text",value:t,readOnly:!0,__source:{fileName:qt,lineNumber:80}}))))))}}var ea=Object(Zt.a)(Jt,["BORDER_RADIUS","BROWSER_COLOR_BG","BROWSER_COLOR_FG","BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),ta=a(9),aa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomeCard.jsx";class ia extends i.Component{render(){const e=this.props.style||{};return this.props.backgroundImage&&(e.backgroundImage=`url(${this.props.backgroundImage})`),i.createElement("button",{className:Te()({"welcome-card":!0,"card-has-background":this.props.backgroundImage,"card-has-image-zoom":this.props.hasImageZoom,"card-is-done":this.props.done,"card-is-selected":this.props.selected}),disabled:this.props.done,onClick:this.props.onClick,title:this.props.tooltip?this.props.title+"\n"+this.props.tooltip:this.props.title,style:e,__source:{fileName:aa,lineNumber:30}},i.createElement("div",{className:"card-outline",__source:{fileName:aa,lineNumber:46}}),this.props.image&&i.createElement("div",{className:"card-image",__source:{fileName:aa,lineNumber:49}},i.createElement("img",{src:this.props.image,height:"78",width:"78",__source:{fileName:aa,lineNumber:50}})),this.props.svg&&i.createElement("div",{className:"card-image",dangerouslySetInnerHTML:{__html:this.props.svg},__source:{fileName:aa,lineNumber:56}}),this.props.renderContent&&this.props.renderContent(),i.createElement("div",{className:"card-text",__source:{fileName:aa,lineNumber:64}},this.props.title))}}var sa=ia,na="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageImport.jsx";function ra(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const oa=[{names:["chrome"],imageName:"welcomepage-chrome.svg"},{names:["chromium"],imageName:"welcomepage-chromium.svg"},{names:["firefox"],imageName:"welcomepage-firefox.svg"},{names:["opera 12"],imageName:"welcomepage-opera-12.svg"},{names:["opera"],imageName:"welcomepage-opera.svg"},{names:["safari"],imageName:"welcomepage-safari.svg"},{names:["edge"],imageName:"welcomepage-edge.svg"},{names:["explorer"],imageName:"welcomepage-explorer.svg"},{names:["vivaldi"],imageName:"welcomepage-vivaldi.svg"},{names:["yandex","яндекс"],imageName:"welcomepage-yandex.svg"}],la=["safari","edge","explorer"];class ca extends s.a.Component{constructor(e){super(e),ra(this,"toggleImport",e=>{const{toImport:t}=this.state;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({toImport:t})}),ra(this,"importSelected",()=>{this.startImport(this.state.toImport[0]),this.toggleImport(this.state.toImport[0])}),ra(this,"onImportEnded",e=>{const t=this.state.profileStatus.concat([]);for(let a=0;a<this.state.profileStatus.length;a++)"STARTED"===t[a]&&(t[a]=0===e?"COMPLETED":"FAILED");0===e?this.setState({error:null,profileStatus:t}):this.setState({error:Object(w.a)("An error occurred during import"),profileStatus:t}),this.state.toImport.length>0&&this.importSelected()}),this.state={error:null,profileStatus:[],profiles:[],toImport:[]}}componentDidMount(){Nt.a.importData.getProfiles(e=>{this.setState({profileStatus:e.map(()=>"IDLE"),profiles:e})}),Nt.a.importData.onImportEnded.addListener(this.onImportEnded)}componentWillUnmount(){Nt.a.importData.onImportEnded.removeListener(this.onImportEnded)}startImport(e){const t=this.state.profiles[e];let a="";t.UserProfiles&&t.UserProfiles[0]&&t.UserProfiles[0].profileName&&(a=t.UserProfiles[0].profileName),this.setState(t=>{const a=t.profileStatus.concat([]);return a[e]="STARTED",{profileStatus:a}},()=>{Nt.a.importData.startImport([e.toString(),t.history.toString(),t.favorites.toString(),t.passwords.toString(),t.search.toString(),t.notes.toString(),(!0).toString(),a.toString(),t.speeddial.toString()],"",St.default)})}render(){return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:na,lineNumber:151}},s.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:na,lineNumber:152}},s.a.createElement("h1",{__source:{fileName:na,lineNumber:153}},this.props.title),s.a.createElement("p",{__source:{fileName:na,lineNumber:156}},Object(w.a)("To import data from another browser, select it below and press Import.")),s.a.createElement("p",{__source:{fileName:na,lineNumber:157}},Object(w.a)("For more choices see Import in the File menu or Quick Commands.")),s.a.createElement("div",{className:"cards-container",__source:{fileName:na,lineNumber:159}},this.state.profiles.map((e,t)=>{const{name:a,imageName:i}=function(e){const t=e.toLowerCase();for(let e=0;e<oa.length;e++)for(let a=0;a<oa[e].names.length;a++)if(t.includes(oa[e].names[a]))return{name:oa[e].names[a],imageName:oa[e].imageName};return{name:e,imageName:""}}(e.name),n=this.state.profileStatus[t];return e.hasDefaultInstall||la.includes(a)?s.a.createElement(sa,{key:t,done:"COMPLETED"===n,onClick:()=>this.toggleImport(t),selected:this.state.toImport.includes(t),title:"COMPLETED"===n?Object(w.a)("Imported"):e.name,image:`resources/${i}`,__source:{fileName:na,lineNumber:169}}):null})),s.a.createElement("p",{className:"pad-top",__source:{fileName:na,lineNumber:183}},s.a.createElement("input",{type:"submit",className:"welcome-button",onClick:this.importSelected,disabled:0===this.state.toImport.length,value:Object(w.a)("Import"),__source:{fileName:na,lineNumber:184}}),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary pad-left",onClick:this.props.continue,__source:{fileName:na,lineNumber:191}},this.props.continueText)),this.state.error&&s.a.createElement("p",{__source:{fileName:na,lineNumber:200}},this.state.error)))}}var da=ca,ua="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\common\\Switch.jsx";function ha(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ma extends i.PureComponent{constructor(...e){super(...e),ha(this,"state",{dragging:!1,position:this.props.checked?12:0}),ha(this,"updateButtonPosition",()=>{this.setState({position:this.props.checked?12:0})}),ha(this,"onChange",e=>{const t=e.target.checked?12:0;this.setState({position:t}),this.props.onChange&&this.props.onChange(e)}),ha(this,"onClick",e=>{this.state.dragging?(e.preventDefault(),this.setState({dragging:!1})):this.toggleSwitch()}),ha(this,"toggleSwitch",()=>{if(this._switchInput){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});this._switchInput.dispatchEvent(e)}}),ha(this,"cancelEvent",e=>{e.preventDefault()}),ha(this,"onPointerMove",e=>{if(1===e.buttons&&this._switchInput&&this._switchButton===document.activeElement){this.state.dragging||this.setState({dragging:!0});const t=this._switchInput.getBoundingClientRect(),a=Math.max(0,Math.min(e.clientX-t.left-6,12));this.setState({position:a}),e.target instanceof HTMLElement&&e.target.setPointerCapture(e.pointerId.toString())}}),ha(this,"onPointerUp",e=>{if(this.state.dragging){e.target instanceof HTMLElement&&e.target.releasePointerCapture(e.pointerId.toString());const{position:t}=this.state;t>=0&&t<=6?(this.setState({position:0}),this.props.checked&&this.toggleSwitch()):(this.setState({position:12}),this.props.checked||this.toggleSwitch())}})}componentDidUpdate(e){e.checked!==this.props.checked&&this.updateButtonPosition()}render(){const{position:e}=this.state;return i.createElement("div",{className:Te()("Switch",{"Switch--Disabled":this.props.disabled}),__source:{fileName:ua,lineNumber:111}},i.createElement("input",{ref:e=>this._switchInput=e,className:"Switch-Input",type:"checkbox",onChange:this.onChange,checked:this.props.checked,disabled:this.props.disabled,value:this.props.value,onPointerDown:this.cancelEvent,tabIndex:this.props.tabIndex,__source:{fileName:ua,lineNumber:116}}),i.createElement("button",{ref:e=>this._switchButton=e,className:Te()({"Switch-Button":!0,dragging:this.state.dragging}),style:{transform:`translateX(${e}px)`},onPointerMove:this.onPointerMove,onPointerUp:this.onPointerUp,onClick:this.onClick,tabIndex:"-1",__source:{fileName:ua,lineNumber:127}}))}}var pa=ma,ga=a(69);const ba={welcome:Object(w.a)("Welcome to Vivaldi"),import_data:Object(w.a)("Import Bookmarks & Settings"),tracker_and_ad:Object(w.a)("Tracker and Ad Blocking"),personalize:Object(w.a)("Pick a Theme"),tabs:Object(w.a)("Position Your Tabs"),touch:Object(w.a)("Get Going")},fa={getUnseenPageKeys:()=>Object.keys(ba).filter(e=>!X.a.get(B.kWelcomeSeenPages).includes(e)),hasUnseenPages:()=>fa.getUnseenPageKeys().length>0,getUnreadPageKeys:()=>Object.keys(ba).filter(e=>!X.a.get(B.kWelcomeReadPages).includes(e)),hasUnreadPages:()=>fa.getUnreadPageKeys().length>0,markAllAsSeen:()=>{const e=X.a.get(B.kWelcomeSeenPages),t=fa.getUnseenPageKeys();M.a.set(B.kWelcomeSeenPages,e.concat(t))},getImageForTheme:e=>{switch(e.name){case"Vivaldi":return"../resources/aurora_light.webp";case"Human":return"../resources/bg_alt_7.jpg";case"Hot Pink":return"../resources/bg_alt_1.jpg";case"Subtle":return"../resources/bg_alt_5.jpg";case"Dark":return"../resources/aurora_dark.jpg";case"Blueprint":return"../resources/bg_alt_6.webp";case"Beach":return"../resources/bg_alt_4.webp";case"Light":return"../resources/bg_alt_3.webp";default:return""}},getBgColorForThemeName:e=>{switch(e){case"Vivaldi":return"rgba(31, 44, 56, 0.6)";case"Human":return"rgba(88,41,0, 0.6)";case"Hot Pink":return"rgba(66,0,33, 0.6)";case"Subtle":return"rgba(0,0,0, 0.5)";case"Dark":return"rgba(100,100,100, 0.1)";case"Blueprint":return"rgba(15,28,39, 0.3)";case"Beach":return"rgba(68,59,48, 0.75)";case"Light":return"rgba(0,86,111, 0.6)";default:return"rgba(31, 44, 56, 0.6)"}}};var _a=fa,Na="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePagePersonalize.jsx";function va(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ea=[B.kThemeScheduleEnabled];class wa extends s.a.Component{constructor(...e){super(...e),va(this,"setTheme",(e,t)=>{X.a.get(B.kThemeWindowBackgroundImageEnabled)&&M.a.set(B.kThemeWindowBackgroundImageEnabled,!1),ga.a.setTheme(e),M.a.set(B.kStartpageImageEnable,!0),M.a.set(B.kStartpageImagePath,t)}),va(this,"toggleOSSchedule",()=>{const e="system"===this.props.prefValues[B.kThemeScheduleEnabled]?"off":"system";M.a.set(B.kThemeScheduleEnabled,e)})}render(){const{prefValues:e}=this.props;return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Na,lineNumber:65}},s.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Na,lineNumber:67}},s.a.createElement("h1",{__source:{fileName:Na,lineNumber:69}},this.props.title),s.a.createElement("p",{__source:{fileName:Na,lineNumber:70}},Object(w.a)("Vivaldi will by default change colors with the operating system. For more themes, to create your own and more fine-grained control head over to Settings.")),s.a.createElement("label",{className:"welcome-pref-checkbox",__source:{fileName:Na,lineNumber:74}},s.a.createElement(pa,{value:"system",checked:"system"===e[B.kThemeScheduleEnabled],onChange:this.toggleOSSchedule,__source:{fileName:Na,lineNumber:75}}),s.a.createElement("span",{__source:{fileName:Na,lineNumber:80}},Object(w.a)("Use Operating System Theme"))),s.a.createElement("div",{className:"cards-container",__source:{fileName:Na,lineNumber:83}},De.a.getSync("THEMES_SYSTEM").slice(0,8).map(e=>s.a.createElement(sa,{key:e.name,onClick:this.setTheme.bind(this,e,_a.getImageForTheme(e)),selected:e.name===this.props.vivaldiSettings.THEME_CURRENT,backgroundImage:_a.getImageForTheme(e),title:e.name,renderContent:()=>s.a.createElement("div",{className:"card-theme-colors",__source:{fileName:Na,lineNumber:94}},Object.keys(e.colors).map(t=>s.a.createElement("div",{key:t,className:"themecolor",style:{backgroundColor:e.colors[t]},__source:{fileName:Na,lineNumber:96}}))),__source:{fileName:Na,lineNumber:85}}))),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Na,lineNumber:106}},this.props.continueText)))}}var Sa=Object(P.a)(Object(Zt.a)(wa,["THEME_CURRENT"]),Ea),Ca="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTabs.jsx";const ka=[B.kTabsBarPosition],ya={top:{title:Object(w.a)("Top"),image:a(1366)},left:{title:Object(w.a)("title","Left"),image:a(1367)},bottom:{title:Object(w.a)("Bottom"),image:a(1368)},right:{title:Object(w.a)("title","Right"),image:a(1369)}};class Oa extends s.a.Component{constructor(...e){var t,a,i;super(...e),i=e=>{M.a.set(B.kTabsBarPosition,e)},(a="setPosition")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i}render(){return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Ca,lineNumber:50}},s.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Ca,lineNumber:51}},s.a.createElement("h1",{__source:{fileName:Ca,lineNumber:52}},this.props.title),s.a.createElement("p",{__source:{fileName:Ca,lineNumber:55}},Object(w.a)("Where would you like your Tab Bar? Experiment with the options below to find a layout that fits.")),s.a.createElement("div",{className:"cards-container",__source:{fileName:Ca,lineNumber:59}},Object.keys(ya).map(e=>s.a.createElement(sa,{key:e,onClick:this.setPosition.bind(this,e),title:ya[e].title,selected:e===this.props.prefValues[B.kTabsBarPosition],svg:ya[e].image,__source:{fileName:Ca,lineNumber:61}}))),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Ca,lineNumber:70}},this.props.continueText)))}}var Aa=Object(P.a)(Oa,ka),Ta="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTouch.jsx";class Ia extends s.a.Component{render(){return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Ta,lineNumber:18}},s.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Ta,lineNumber:19}},s.a.createElement("h1",{__source:{fileName:Ta,lineNumber:20}},this.props.title),s.a.createElement("p",{__source:{fileName:Ta,lineNumber:23}},Object(w.a)("Vivaldi is full of useful tools, and you can customize and tweak just about everything. Explore, try things out, and start creating a browser that’s uniquely yours!")),s.a.createElement("div",{className:"cards-container welcome-intouch",__source:{fileName:Ta,lineNumber:27}},s.a.createElement(sa,{onClick:x.a.openURL.bind(this,"http://vvld.in/v-tutorials",{inCurrent:!1,inBackground:!1}),svg:a(1370),title:Object(w.a)("Watch video tutorials"),__source:{fileName:Ta,lineNumber:29}}),s.a.createElement(sa,{onClick:x.a.openURL.bind(this,"http://vvld.in/v-community",{inCurrent:!1,inBackground:!1}),svg:a(1371),title:Object(w.a)("Join the Community"),__source:{fileName:Ta,lineNumber:37}}),s.a.createElement(sa,{onClick:x.a.openURL.bind(this,"http://vvld.in/v-social",{inCurrent:!1,inBackground:!1}),svg:a(1372),title:Object(w.a)("Follow us around the Web"),__source:{fileName:Ta,lineNumber:45}})),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Ta,lineNumber:55}},this.props.continueText)))}}var Da=Ia,Pa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageTrackerAndAd.jsx";function xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ma extends s.a.Component{constructor(...e){super(...e),xa(this,"state",{trackerBlockingEnabled:!1,adBlockingEnabled:!1}),xa(this,"updateRules",()=>{["ad_blocking","tracking"].forEach(e=>{Nt.a.contentBlocking.getActiveExceptionsList(e,t=>{const a="tracking"===e?"trackerBlockingEnabled":"adBlockingEnabled";this.setState({[a]:"exempt_list"===t})})})}),xa(this,"setNoBlocking",()=>{Nt.a.contentBlocking.setActiveExceptionsList("tracking","process_list"),Nt.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()}),xa(this,"setTrackerBlocking",()=>{Nt.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),Nt.a.contentBlocking.setActiveExceptionsList("ad_blocking","process_list"),this.updateRules()}),xa(this,"setTrackerAndAdBlocking",()=>{Nt.a.contentBlocking.setActiveExceptionsList("tracking","exempt_list"),Nt.a.contentBlocking.setActiveExceptionsList("ad_blocking","exempt_list"),this.updateRules()}),xa(this,"getBlockLevel",()=>{let e=0;return this.state.trackerBlockingEnabled&&(e=1),this.state.trackerBlockingEnabled&&this.state.adBlockingEnabled&&(e=2),e})}componentDidMount(){this.updateRules(),Nt.a.contentBlocking.onStateChanged.addListener(this.updateRules)}componentWillUnmount(){Nt.a.contentBlocking.onStateChanged.removeListener(this.updateRules)}render(){const e=this.getBlockLevel();return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:Pa,lineNumber:85}},s.a.createElement("div",{className:"welcome-content-inner welcome-center-horizontal",__source:{fileName:Pa,lineNumber:86}},s.a.createElement("h1",{__source:{fileName:Pa,lineNumber:87}},this.props.title),s.a.createElement("p",{__source:{fileName:Pa,lineNumber:90}},Object(w.a)("Vivaldi has a built-in Tracker and Ad blocker to protect your privacy."),s.a.createElement("br",{__source:{fileName:Pa,lineNumber:92}}),Object(w.a)("Select default level of protection.")),s.a.createElement("div",{className:"cards-container",__source:{fileName:Pa,lineNumber:96}},s.a.createElement(sa,{onClick:this.setNoBlocking,title:Object(w.a)("No Blocking"),hasImageZoom:!0,tooltip:Object(w.a)("No content blocking will be applied to any site by default."),selected:0===e,svg:oe.b,style:{"--shieldOpacity":0,"--shieldInnerOpacity":0},__source:{fileName:Pa,lineNumber:97}}),s.a.createElement(sa,{onClick:this.setTrackerBlocking,title:Object(w.a)("Block Trackers"),hasImageZoom:!0,tooltip:Object(w.a)("Online trackers collect personal information and browsing habits across multiple sites."),selected:1===e,svg:oe.b,style:{"--shieldOpacity":0,"--shieldInnerOpacity":.65},__source:{fileName:Pa,lineNumber:109}}),s.a.createElement(sa,{onClick:this.setTrackerAndAdBlocking,title:Object(w.a)("Block Trackers and Ads"),hasImageZoom:!0,tooltip:Object(w.a)("Web advertisement supports existence of many sites but can also be used to build a personal profile for monetization."),selected:2===e,svg:oe.b,style:{"--shieldOpacity":.65,"--shieldInnerOpacity":0},__source:{fileName:Pa,lineNumber:121}})),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:Pa,lineNumber:135}},this.props.continueText)))}}var La=Ma,ja="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\WelcomePageWelcome.jsx";class Ba extends s.a.Component{render(){return s.a.createElement("div",{className:"welcome-content-outer",__source:{fileName:ja,lineNumber:18}},s.a.createElement("div",{className:Te()({"welcome-content-inner":!0,"welcome-center-horizontal":!0,"welcome-center-vertical":!0}),__source:{fileName:ja,lineNumber:19}},s.a.createElement("img",{className:"vivaldi-intro-icon",src:"resources/welcomepage-vivaldi.svg",__source:{fileName:ja,lineNumber:25}}),s.a.createElement("h1",{__source:{fileName:ja,lineNumber:29}},this.props.title),s.a.createElement("p",{style:{maxWidth:"34em"},__source:{fileName:ja,lineNumber:32}},Object(w.a)("Take a moment to set up the basics and import any existing Bookmarks and Settings you’d like to bring along.")," ",Object(w.a)("If you are an existing Vivaldi user, sign into Sync to bring your data and settings with you.")),s.a.createElement("button",{tabIndex:0,className:"welcome-button primary",onClick:this.props.continue,__source:{fileName:ja,lineNumber:37}},this.props.continueText)))}}var Ra=Ba,Fa="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\welcome\\welcome.jsx";function Ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Wa=[B.kStartpageImagePath,B.kStartpageImagePathCustom,B.kWelcomeReadPages];class Ha extends s.a.Component{constructor(e){super(e),Ua(this,"setPage",e=>()=>{this.scrollToTop(),this.setState({currentPageKey:e})}),Ua(this,"getNextUnread",e=>{const t=Object.keys(ba),a=this.props.prefValues[B.kWelcomeReadPages],i=e?t.indexOf(e):-1;for(let e=-1;e<t.length;e++){const s=e+1;if(t[s]&&!a.includes(t[s])&&s>i)return t[s]}return _a.getUnreadPageKeys()[0]}),Ua(this,"getNextPageKey",()=>{const e=Object.keys(ba);return e.find((t,a)=>this.state.currentPageKey===e[a-1])}),Ua(this,"setCurrentPageRead",()=>{const e=this.props.prefValues[B.kWelcomeReadPages],t=this.state.currentPageKey;e.includes(t)||M.a.set(B.kWelcomeReadPages,e.concat([t]))}),Ua(this,"setAllPagesRead",()=>{const e=_a.getUnreadPageKeys(),t=this.props.prefValues[B.kWelcomeReadPages];M.a.set(B.kWelcomeReadPages,t.concat(e)),x.a.openURL(ta.a.getDefaultStartpage(),{inCurrent:!0})}),Ua(this,"continue",()=>{this.setCurrentPageRead(),_a.getUnreadPageKeys().length>0?(this.scrollToTop(),this.setState(e=>({currentPageKey:this.getNextUnread(e.currentPageKey)}))):x.a.openURL(ta.a.getDefaultStartpage(),{inCurrent:!0})}),Ua(this,"nextPage",()=>{this.scrollToTop(),this.setState({currentPageKey:this.getNextPageKey()})}),Ua(this,"getContinueText",()=>{const e=_a.getUnreadPageKeys(),t=e.length,a=!e.includes(this.state.currentPageKey);return t===Object.keys(ba).length-1&&this.state.currentPageKey===Object.keys(ba)[0]?Object(w.a)("Let’s Go"):t>1||1===t&&a?Object(w.a)("Continue"):Object(w.a)("Finish")}),Ua(this,"scrollToTop",()=>{const e=this.refs.contentArea&&ee.a.findDOMNode(this.refs.contentArea);e&&e.scrollTo({behavior:"smooth",top:0})});const t=this.getNextUnread(),a=Object.keys(ba);this.state={currentPageKey:t||a[a.length-1]},_a.markAllAsSeen()}render(){const e=this.getContinueText(),t=this.props.vivaldiSettings,{prefValues:a}=this.props,i="user_defined"===a[B.kStartpageImagePath]?a[B.kStartpageImagePathCustom]:a[B.kStartpageImagePath],n={enter:1e3,exit:1e3};return s.a.createElement("div",{className:"welcome-wrapper",style:{backgroundImage:`url(${i})`},__source:{fileName:Fa,lineNumber:170}},s.a.createElement("div",{className:"welcome-navigation",__source:{fileName:Fa,lineNumber:175}},s.a.createElement("div",{className:"navigation-main",__source:{fileName:Fa,lineNumber:176}},Object.keys(ba).map(e=>s.a.createElement("a",{key:e,onClick:this.setPage(e),className:Te()({"nav-page":!0,"nav-page-current":e===this.state.currentPageKey,"nav-page-complete":e!==this.state.currentPageKey&&a[B.kWelcomeReadPages].includes(e)}),__source:{fileName:Fa,lineNumber:178}},ba[e])))),s.a.createElement(Ht.TransitionGroup,{className:"welcome-content",ref:"contentArea",style:{backgroundColor:_a.getBgColorForThemeName(t.THEME_CURRENT)},__source:{fileName:Fa,lineNumber:192}},"welcome"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:201}},s.a.createElement(Ra,{continue:this.continue,continueText:e,setAllPagesRead:this.setAllPagesRead,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:202}})),"tracker_and_ad"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:211}},s.a.createElement(La,{continue:this.continue,continueText:e,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:212}})),"import_data"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:220}},s.a.createElement(da,{continue:this.continue,continueText:e,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:221}})),"personalize"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:229}},s.a.createElement(Sa,{continue:this.continue,continueText:e,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:230}})),"tabs"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:238}},s.a.createElement(Aa,{continue:this.continue,continueText:e,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:239}})),"touch"===this.state.currentPageKey&&s.a.createElement(Ht.CSSTransition,{classNames:"welcome-page",timeout:n,__source:{fileName:Fa,lineNumber:247}},s.a.createElement(Da,{continue:this.continue,continueText:e,title:ba[this.state.currentPageKey],__source:{fileName:Fa,lineNumber:248}}))))}}var Va=Object(Zt.a)(Object(P.a)(Ha,Wa),["THEME_CURRENT"]),Ga="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\webpage\\InternalPage.jsx";class Ka extends s.a.PureComponent{render(){const e=this.props.page,t=e.url?e.url:e.pendingUrl,a=[],i=this.props.isVisible,n=Pt.a.isStartPage(t),r=Pt.a.matchInternal("bookmarks",t),o=Pt.a.matchInternal("history",t),l=Pt.a.matchInternal("calendar",t),c=Pt.a.matchInternal("notes",t),d=Boolean(Pt.a.matchInternal("welcome",t)),u=Boolean(Pt.a.matchInternal("themecolors",t)),h=Boolean(Pt.a.matchInternal("experiments",t)),m=Boolean(Pt.a.matchInternal("actionlog",t)),p=Boolean(Pt.a.matchInternal("private-intro",t)),g=Boolean(Pt.a.matchInternal("guest-intro",t));let b;if(b=r?G.Bookmarks:o?G.History:l?G.Calendar:c?G.NotesManager:G.SpeedDial,d||a.push(s.a.createElement($t,{open:i&&n||b&&b!==G.SpeedDial,pageId:e.id,url:t,view:b,updatePageThumbnailWithActiveWebview:this.props.updatePageThumbnailWithActiveWebview,key:"startpage",__source:{fileName:Ga,lineNumber:65}})),d&&a.push(s.a.createElement(Va,{key:"welcome",__source:{fileName:Ga,lineNumber:78}})),u&&a.push(s.a.createElement(ea,{open:i,page:e,key:"welcome",__source:{fileName:Ga,lineNumber:85}})),Pt.a.matchInternal("settings",t)&&a.push(s.a.createElement(K.b,{url:t,key:"settings",__source:{fileName:Ga,lineNumber:95}})),h&&a.push(s.a.createElement(y,{key:"experiments",__source:{fileName:Ga,lineNumber:102}})),g&&a.push(s.a.createElement(O.b,{key:"guest-intro",__source:{fileName:Ga,lineNumber:108}})),p&&a.push(s.a.createElement(V,{key:"private-intro",__source:{fileName:Ga,lineNumber:115}})),m)a.push(s.a.createElement(_,{key:"actionlog",__source:{fileName:Ga,lineNumber:122}}));else if(Pt.a.matchUrl(Pt.a.internalUrl("mailpage","composer"),t)){const e=Pt.a.getUrlParams(t);let i;if(e.query)try{const t=JSON.parse(e.query);"object"==typeof t&&(i=t.id)}catch(e){console.warn(e)}a.push(s.a.createElement("div",{key:"mail",__source:{fileName:Ga,lineNumber:141}}))}else if(Pt.a.matchUrl(Pt.a.internalUrl("mailpage","message"),t)){let e=-1;const i=Pt.a.getUrlParams(t);if(i.path){const t=i.path.split("/");2===t.length&&(e=parseInt(t[1]))}a.push(s.a.createElement("div",{key:"mailmessage",__source:{fileName:Ga,lineNumber:163}}))}else Pt.a.matchInternal("mailpage",t)&&a.push(s.a.createElement("div",{key:"mailview",__source:{fileName:Ga,lineNumber:174}}));return s.a.createElement("div",{className:"internal-page",__source:{fileName:Ga,lineNumber:191}},a)}}t.a=Ka},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(13),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CalculatorItem.jsx";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a.PureComponent{constructor(...e){super(...e),l(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),l(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{name:e}=this.props.item;return s.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:o,lineNumber:34}},s.a.createElement("span",{className:"quick-command-favicon solid-icon",dangerouslySetInnerHTML:{__html:r.a},__source:{fileName:o,lineNumber:40}}),s.a.createElement("span",{className:"quick-command-title",__source:{fileName:o,lineNumber:42}},e),s.a.createElement("span",{className:"view quick-command-shortcut",__source:{fileName:o,lineNumber:45}},Object(n.a)("Press Enter to Copy")))}}var d=c,u=a(155),h="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\CommandItem.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends s.a.PureComponent{constructor(...e){super(...e),m(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),m(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{item:e,style:t}=this.props;return s.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:t,__source:{fileName:h,lineNumber:32}},e.imageUrl&&s.a.createElement("img",{className:"quick-command-favicon",src:e.imageUrl,alt:"",__source:{fileName:h,lineNumber:39}}),s.a.createElement("span",{className:"quick-command-title",__source:{fileName:h,lineNumber:41}},e.name),e.url&&s.a.createElement("span",{className:"view quick-command-url",__source:{fileName:h,lineNumber:45}},e.url),e.nickname&&s.a.createElement("span",{className:"view quick-command-nickname",__source:{fileName:h,lineNumber:50}},e.nickname),e.meta&&s.a.createElement("span",{className:"view quick-command-meta",__source:{fileName:h,lineNumber:55}},Object(u.b)(e.meta)))}}var g=p,b=a(15),f=a.n(b),_="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\HistoryItem.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends s.a.PureComponent{constructor(...e){super(...e),N(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),N(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{name:e,url:t,imageUrl:a,visitCount:i,visitTime:n}=this.props.item,r=f()(n).format("l, LT");return s.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:_,lineNumber:34}},s.a.createElement("img",{className:"quick-command-favicon",src:a,alt:"",__source:{fileName:_,lineNumber:40}}),s.a.createElement("span",{className:"quick-command-title",__source:{fileName:_,lineNumber:41}},e||t),s.a.createElement("span",{className:"quick-command-timestamp",__source:{fileName:_,lineNumber:44}},r),s.a.createElement("span",{className:"item-count",__source:{fileName:_,lineNumber:47}},i))}}var E=v,w="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QCNoteItem.jsx";function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends s.a.PureComponent{constructor(...e){super(...e),S(this,"onClick",e=>{this.props.onItemClick(this.props.item,e)}),S(this,"over",e=>{this.props.onMouseOver(e,this.props.item)})}render(){const{item:e}=this.props;return s.a.createElement("div",{"data-selected":this.props.selected?"":null,onMouseOver:this.over,onClick:this.onClick,className:"quick-command",style:this.props.style,__source:{fileName:w,lineNumber:36}},e.url?s.a.createElement("span",{className:"quick-command-favicon",dangerouslySetInnerHTML:{__html:r.ob},__source:{fileName:w,lineNumber:43}}):s.a.createElement("span",{className:"quick-command-favicon",dangerouslySetInnerHTML:{__html:r.pb},__source:{fileName:w,lineNumber:45}}),s.a.createElement("span",{className:"quick-command-title",__source:{fileName:w,lineNumber:48}},e.name),!e.nickname&&e.url&&s.a.createElement("span",{className:"quick-command-url",__source:{fileName:w,lineNumber:52}},e.url),e.nickname&&s.a.createElement("span",{className:"quick-command-url",__source:{fileName:w,lineNumber:57}},e.nickname.trim().substring(0,120)),e.imageUrl&&s.a.createElement("span",{className:"quick-command-attachment",dangerouslySetInnerHTML:{__html:r.n},__source:{fileName:w,lineNumber:62}}))}}var k=C,y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\TitleItem.jsx";class O extends s.a.PureComponent{render(){const{item:e,style:t,selected:a}=this.props,{title:i,count:n}=e;return s.a.createElement("div",{"data-selected":a?"":null,style:t,className:"quick-command-sectionheader",__source:{fileName:y,lineNumber:22}},i,n>0&&s.a.createElement("span",{className:"item-count",__source:{fileName:y,lineNumber:28}},n))}}var A=O,T=a(54),I=a(555),D="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\quickCommands\\QuickCommandList.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends s.a.PureComponent{constructor(...e){super(...e),P(this,"state",{selectedIndex:1}),P(this,"_keyedNavigation",!1),P(this,"_startIndex",0),P(this,"_stopIndex",0),P(this,"setKeyedNavigation",e=>{this._keyedNavigation=e}),P(this,"getSelectedIndex",()=>this.state.selectedIndex),P(this,"selectByIndex",e=>{const t=this.props.renderedArray[e];this.props.hintChange(t),this.setState({selectedIndex:e}),this.rerenderVisibleTreeItems()}),P(this,"onKeyDown",e=>{const t={ctrl:!!e.ctrlKey,alt:!!e.altKey,shift:!!e.shiftKey,command:!1},a=this.props.renderedArray;let i=this.getSelectedIndex(),s=i;if(!t.ctrl&&t.alt&&!t.shift&&!t.command)switch(e.key){case"ArrowUp":i>0&&"title"===a[i-1].type&&i--,s=0;for(let e=i-1;e>=0;e--)if("title"===a[e].type){s=e+1;break}e.preventDefault();break;case"ArrowDown":for(let e=i;e<a.length;e++)if("title"===a[e].type){s=e+1;break}e.preventDefault()}else if(!(t.ctrl||t.alt||t.shift||t.command)){const t=this._stopIndex-this._startIndex;switch(e.key){case"ArrowUp":s=Math.max(0,i-1),e.preventDefault();break;case"ArrowDown":s=Math.min(i+1,a.length-1),e.preventDefault();break;case"PageUp":s=Math.max(0,this._startIndex-t);break;case"PageDown":s=Math.min(this._stopIndex+t,a.length-1)}}s!==i&&("title"===a[s].type&&(s=s>i?++s:Math.max(0,--s)),this.selectByIndex(s))}),P(this,"_onMouseOver",(e,t)=>{this._keyedNavigation||this.selectByIndex(t.index)}),P(this,"_onMouseMove",()=>{this.setKeyedNavigation(!1)}),P(this,"rerenderVisibleTreeItems",()=>{this.refList&&this.refList.forceUpdateGrid()}),P(this,"_onIndexChanged",e=>{this._startIndex=e.startIndex,this._stopIndex=e.stopIndex}),P(this,"renderTreeItem",({index:e,style:t})=>{const a=this.props.renderedArray[e];a.index=e;const i=this.state.selectedIndex===e;switch(a.type){case T.o:return s.a.createElement(A,{key:a.id,selected:i,item:a,style:t,__source:{fileName:D,lineNumber:175}});case T.i:return s.a.createElement(E,{key:a.id,selected:i,item:a,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:D,lineNumber:186}});case T.d:return s.a.createElement(d,{key:a.id,selected:i,item:a,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:D,lineNumber:199}});case T.l:case T.k:return s.a.createElement(k,{key:a.id,selected:i,item:a,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:D,lineNumber:213}});default:return s.a.createElement(g,{selected:i,key:a.type+"__"+a.id,item:a,style:t,onItemClick:this.props.onExecuteCommand,onMouseOver:this._onMouseOver,__source:{fileName:D,lineNumber:226}})}})}render(){const e=28*this.props.renderedArray.length,t=e>280?280:e;return s.a.createElement("div",{className:"quick-commands",tabIndex:"1",onKeyDown:this.onKeyDown,onMouseMove:this._onMouseMove,__source:{fileName:D,lineNumber:244}},s.a.createElement(I.a,{ref:e=>this.refList=e,onRowsRendered:this._onIndexChanged,scrollToIndex:this.state.selectedIndex,height:t,rowHeight:28,width:520,rowRenderer:this.renderTreeItem,rowCount:this.props.renderedArray.length,__source:{fileName:D,lineNumber:249}}))}}t.a=x},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(83),r=a(2),o=a(17),l=a.n(o),c=a(174),d=a(15),u=a.n(d),h=a(363),m=a(476),p="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadProgressbar.jsx";const g="in_progress",b="complete",f="interrupted";function _({item:e}){const t=e.state===g,a=e.paused||e.state===f,i=e.bytesReceived,n=e.totalBytes&&e.state!==b?(i/e.totalBytes*100).toFixed(2):"100",o=Math.min(e.totalBytes/100,500);return s.a.createElement("div",{className:l()("DownloadItem-ProgressBar",{"unknown-filesize":!e.totalBytes,visible:t,loading:!a}),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":n,"aria-valuetext":Object(r.a)("Download in progress"),"aria-hidden":!t,__source:{fileName:p,lineNumber:30}},s.a.createElement("div",{className:"value",style:{width:n+"%",transition:"0.00"===n?"none":`width ${o}ms linear`},__source:{fileName:p,lineNumber:41}}))}const N="in_progress",v="complete",E="interrupted";function w({item:e}){const t=(new Date).getTime()+2e3,a=new Date(e.estimatedEndTime).getTime(),i=e.state===N,n=e.bytesReceived,{currentHumanized:o,endHumanized:l}=function(e,t){let a=Object(c.a)(e);const i=Object(c.a)(t||e);return a.split(" ")[1]===i.split(" ")[1]&&(a=a.split(" ")[0]),{currentHumanized:a,endHumanized:i}}(n,e.totalBytes),d=function(e,t,a){return e&&t>a?u()(t).fromNow():e&&t<=a?Object(r.a)("about a second"):""}(i,a,t),m=Object(r.a)("$1/s",[Object(c.a)(Object(h.a)(e))]),p=e.paused||e.state===E;return s.a.createElement("div",{className:"DownloadItem-FileSize",__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadSize.jsx",lineNumber:60}},e.state===v?l:p?Object(r.a)("$1 of $2 - stopped",[o,l]):Object(r.a)("$1 of $2 at $3",[o,l,m]),d&&` (${d})`)}var S=a(13),C="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadActionButtons.jsx";function k({onClick:e}){return s.a.createElement("button",{onClick:e,title:Object(r.a)("verb","Pause"),className:"DownloadItem-ActionButton circular",tabIndex:"-1",dangerouslySetInnerHTML:{__html:S.vb.small},__source:{fileName:C,lineNumber:19}})}function y({onClick:e}){return s.a.createElement("button",{onClick:e,title:Object(r.a)("Resume Download"),className:"DownloadItem-ActionButton circular resume",tabIndex:"-1",dangerouslySetInnerHTML:{__html:S.Nb.small},__source:{fileName:C,lineNumber:29}})}function O({onClick:e}){return s.a.createElement("button",{onClick:e,title:Object(r.a)("Show in File Manager"),className:"DownloadItem-ActionButton circular reveal",tabIndex:"-1",dangerouslySetInnerHTML:{__html:S.Pb.small},__source:{fileName:C,lineNumber:39}})}function A({onClick:e}){return s.a.createElement("button",{onClick:e,title:Object(r.a)("verb","Remove"),className:"DownloadItem-ActionButton circular remove",tabIndex:"-1",dangerouslySetInnerHTML:{__html:S.Lb.small},__source:{fileName:C,lineNumber:51}})}var T=a(7);function I(e){return new Promise((t,a)=>{T.default.downloads.getFileIcon(e,{size:32},e=>{t(e)})})}var D="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadItem.jsx";function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x="in_progress",M="complete";function L(e){const t=e.state===x,a=e.bytesReceived,i=Object(r.a)("$1/s",[Object(c.a)(Object(h.a)(e))]);return e.url+"\n• "+Object(r.a)("Added: $1",[u()(e.startTime).format("l, LT")])+(t&&e.totalBytes?"\n• "+Object(r.a)("Downloading: $1% $2",[Object(m.a)(a/e.totalBytes*100,0),e.paused?Object(r.a)("(stopped)"):""]):"")+(e.endTime?"\n• "+Object(r.a)("Complete: $1",[u()(e.endTime).format("l, LT")]):"")+"\n• "+Object(r.a)("Speed: $1",[i])}class j extends s.a.PureComponent{constructor(e){super(e),P(this,"handleMouseEnter",()=>{n.a.setStatus(this.props.item.url)}),P(this,"handleMouseLeave",()=>{n.a.clearStatus()}),P(this,"renderDownloadButton",()=>{const{item:e}=this.props;return e.state!==x||e.paused?e.canResume?s.a.createElement(y,{onClick:this.props.onResume,__source:{fileName:D,lineNumber:87}}):e.state===M&&e.exists?s.a.createElement(O,{onClick:this.props.onShow,__source:{fileName:D,lineNumber:91}}):s.a.createElement(A,{onClick:this.props.onErase,__source:{fileName:D,lineNumber:94}}):s.a.createElement(k,{onClick:this.props.onPause,__source:{fileName:D,lineNumber:83}})}),P(this,"state",{icon:void 0}),u.a.relativeTimeThreshold("ss",2)}componentDidMount(){I(this.props.item.id).then(e=>{this.setState({icon:e})})}componentDidUpdate(){I(this.props.item.id).then(e=>{this.setState({icon:e})})}render(){const{item:e}=this.props,t=(e.filename||e.finalUrl).split("\\").pop().split("/").pop(),{icon:a}=this.state;return s.a.createElement("div",{className:l()("DownloadItem",{"DownloadItem--Unavailable":!1===e.exists}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,title:L(e),__source:{fileName:D,lineNumber:123}},a&&s.a.createElement("img",{src:a,className:"DownloadItem-Icon",__source:{fileName:D,lineNumber:131}}),s.a.createElement("div",{className:"DownloadItem-FileName",__source:{fileName:D,lineNumber:133}},t),s.a.createElement(_,{item:e,__source:{fileName:D,lineNumber:137}}),s.a.createElement(w,{item:e,__source:{fileName:D,lineNumber:138}}),this.renderDownloadButton())}}var B=j,R=a(131),F=a(32),U=a(136),W="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadTree.jsx";function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const V=[{text:Object(r.a)("title","Name"),value:"filename",fullScreenTitle:Object(r.a)("Sort by Name")},{text:Object(r.a)("Type"),value:"extension",fullScreenTitle:Object(r.a)("Sort by Type")},{text:Object(r.a)("Size"),value:"bytesReceived",fullScreenTitle:Object(r.a)("Sort by Size")},{text:Object(r.a)("Added"),value:"startTime",fullScreenTitle:Object(r.a)("Sort by Date Added")},{text:Object(r.a)("Finished"),value:"endTime",fullScreenTitle:Object(r.a)("Sort by Date Finished")},{text:Object(r.a)("Address"),value:"url",fullScreenTitle:Object(r.a)("Sort by Address")}];class G extends s.a.PureComponent{constructor(...e){super(...e),H(this,"getExtension",e=>{const t=e?e.lastIndexOf("."):-1;return-1!==t?e.substring(t+1):""}),H(this,"sortForExtension",(e,t)=>{const{sortOrder:a}=this.props;if(a<=F.a.NO_SORTING)return 0;const i=e.downloadItem,s=t.downloadItem;let n=this.getExtension(i.filename),r=this.getExtension(s.filename);if(!n&&!r)return 0;if(!n)return a===F.a.ASCENDING_SORT?1:-1;if(!r)return a===F.a.ASCENDING_SORT?-1:1;if("number"==typeof n&&"number"==typeof r)return a===F.a.ASCENDING_SORT?n-r:r-n;if(n=n.toString().toLowerCase(),r=r.toString().toLowerCase(),n>r)return a===F.a.ASCENDING_SORT?1:-1;if(n<r)return a===F.a.ASCENDING_SORT?-1:1;return F.a.getDefaultComparator(a,"filename")(e,t)}),H(this,"returnFalse",()=>!1),H(this,"selectByIds",e=>{e.forEach(e=>{this.refs.treeList.selectById(e,{ctrlKey:!0,metaKey:!0})})}),H(this,"selectById",e=>{this.refs.treeList.selectById(e)}),H(this,"selectByIndex",e=>{this.refs.treeList.selectByIndex(e)}),H(this,"scrollToId",e=>{this.refs.treeList.scrollToId(e)}),H(this,"isSelected",e=>this.refs.treeList.isItemSelected(e)),H(this,"getSelectedNodes",()=>this.refs.treeList.selectionModel.selectedIds),H(this,"getSelectedNode",()=>this.refs.treeList.getSelectedItem()),H(this,"onNodeMouseDown",()=>{this.refs.treeList.focusTree()}),H(this,"onNodeSelected",e=>{e?this.props.onSelected(parseInt(e.id)<0?void 0:e):this.props.onSelected(void 0)}),H(this,"onNodeDoubleClick",(e,t)=>{this.props.onOpen(t.downloadItem.id)}),H(this,"onNodesActivated",(e,t)=>{t.forEach(e=>{this.props.onOpen(e.downloadItem.id)})}),H(this,"handleErase",e=>(this.props.nodes.filter(t=>e.includes(t.id)).map(e=>e.downloadItem).forEach(({id:e})=>this.props.onErase(e)),Promise.resolve())),H(this,"renderItemContent",e=>{const{downloadItem:t,id:a}=e.node;return s.a.createElement(B,{key:a,item:t,onErase:this.props.onErase.bind(this,t.id),onShow:this.props.onShow.bind(null,t.id),onPause:this.props.onPause.bind(null,t.id),onResume:this.props.onResume.bind(null,t.id),__source:{fileName:W,lineNumber:168}})})}render(){const e="extension"===this.props.sortField?{sortOrder:this.props.sortOrder,sortField:this.props.sortField,comparator:this.sortForExtension}:void 0;return s.a.createElement("section",{__source:{fileName:W,lineNumber:187}},s.a.createElement(R.a,{fields:V,manualSorting:!1,onSortChange:this.props.onSortChange,keyAccess:this.props.keyAccess,sortField:this.props.sortField,sortOrder:this.props.sortOrder,__source:{fileName:W,lineNumber:188}}),s.a.createElement(U.a,{ref:"treeList",settings:"DOWNLOADS_TREE",nodes:this.props.nodes,getContextMenuItems:this.props.getContextMenuItems,isFolder:this.returnFalse,hasChildren:this.returnFalse,delete:this.handleErase,onSelect:this.onNodeSelected,enableDragAndDrop:!1,onItemMouseDown:this.onNodeMouseDown,onItemDoubleClick:this.onNodeDoubleClick,onItemsActivated:this.onNodesActivated,renderItemContent:this.renderItemContent,rowHeight:52,sorting:e,__source:{fileName:W,lineNumber:195}}))}}t.a=G},function(e,t,a){"use strict";var i=a(110),s=a(12),n=a(0),r=a.n(n),o=a(2),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\OkChangeButton.jsx";var c=({onDialogClosed:e,onChange:t})=>r.a.createElement("section",{__source:{fileName:l,lineNumber:11}},r.a.createElement("input",{type:"button",className:"primary",onClick:e,value:Object(o.a)("OK"),autoFocus:!0,__source:{fileName:l,lineNumber:12}}),r.a.createElement("input",{type:"button",onClick:t,value:Object(o.a)("Change"),__source:{fileName:l,lineNumber:17}})),d=a(119),u=a(511),h="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionPopup.jsx";function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=Object(u.a)("input");class g extends n.PureComponent{constructor(...e){super(...e),m(this,"handleClickOutside",()=>{this.props.onDialogClosed()}),m(this,"allow",()=>{this.props.onPermissionClicked(!1)}),m(this,"deny",()=>{this.props.onPermissionClicked(!0)}),m(this,"renderAllowDenyQuery",()=>{const e=this.props.renderNotice?this.props.renderNotice():null;return n.createElement("section",{__source:{fileName:h,lineNumber:38}},e,n.createElement(p,{type:"button",onClick:this.allow,value:Object(o.a)("command","Allow"),__source:{fileName:h,lineNumber:40}}),n.createElement("input",{type:"button",className:"primary",onClick:this.deny,value:Object(o.a)("Deny"),autoFocus:!0,__source:{fileName:h,lineNumber:44}}))})}render(){return n.createElement("section",{className:"addressfield-popup",__source:{fileName:h,lineNumber:56}},n.createElement("header",{className:"addressfield-popup-header",__source:{fileName:h,lineNumber:57}},this.props.image&&n.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:h,lineNumber:59}}),n.createElement("h1",{__source:{fileName:h,lineNumber:61}},this.props.message)),n.createElement("section",{className:"addressfield-popup-content",__source:{fileName:h,lineNumber:63}},!1===this.props.isDecided?this.renderAllowDenyQuery():n.createElement(c,{onDialogClosed:this.props.onDialogClosed,onChange:this.props.onSettingsClicked,__source:{fileName:h,lineNumber:66}})))}}var b=Object(d.a)(g),f=a(26),_=a(17),N=a.n(_),v=a(13),E="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionNotificator.jsx";function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){switch(e){case"camera":case"microphone_and_camera":case"videocapture":return v.wb[t];case"flash":return v.yb[t];case"location":case"geolocation":return v.zb[t];case"audiocapture":case"microphone":return v.Ab[t];case"sensors":return v.Eb[t];case"midi-sysex":return v.Bb[t];case"notifications":default:return v.Cb[t]}}class C extends r.a.PureComponent{constructor(...e){super(...e),w(this,"state",{isDialogOpen:null===this.props.permission.blocked,iconTypeSmall:S(this.props.permission.permissionType,"small"),iconTypeMedium:S(this.props.permission.permissionType,"medium")}),w(this,"onNotificatorClicked",()=>{this.setState(e=>({isDialogOpen:!e.isDialogOpen}))}),w(this,"onDialogClosed",()=>{this.setState({isDialogOpen:!1})}),w(this,"onPermissionClicked",e=>{const t=this.props.permission.requestEvent;if(t){!1===e?t.allow():t.deny();const a=this.props.permission.permissionType;if(a){const s=new URL(this.props.url).origin;i.a.setPermission(this.props.pageId,s,a,t,e)}}this.onDialogClosed()}),w(this,"onSettingsClicked",()=>{s.a.openURL(this.getSettingsURL())}),w(this,"getSettingsURL",()=>{switch(this.props.permission.permissionType){case"flash":return"chrome://settings/content/flash";case"location":case"geolocation":return"chrome://settings/content/location";case"notifications":return"chrome://settings/content/notifications";case"camera":case"videocapture":return"chrome://settings/content/camera";case"audiocapture":case"microphone":return"chrome://settings/content/microphone";case"microphone_and_camera":return"chrome://settings/content#media-stream-mic";case"sensors":return"chrome://settings/content/sensors";case"midi-sysex":return"chrome://settings/content/midiDevices";default:console.warn("unknown permissiontype")}}),w(this,"getMessageText",()=>{const e=null===this.props.permission.blocked||this.props.permission.blocked,t=null!==this.props.permission.blocked,a=new URL(this.props.url).origin,i=this.props.permission.permissionType;if(!i)return"";if(t)if(e)switch(i){case"flash":return Object(o.a)("Website “$1” has been denied to run Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” has been denied location access.",[a]);case"notifications":return Object(o.a)("Website “$1” has been denied showing notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” has been denied access to your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” has been denied access to your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” has been denied access to your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” has been denied access to motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” has been denied access to MIDI devices.",[a])}else switch(i){case"flash":return Object(o.a)("Website “$1” is running Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” is accessing your location.",[a]);case"notifications":return Object(o.a)("Website “$1” is authorized to show notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” is using your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” is recording with your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” is using your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” is using your motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” is using your MIDI devices.",[a])}else switch(i){case"flash":return Object(o.a)("Website “$1” would like to run Flash.",[a]);case"location":case"geolocation":return Object(o.a)("Website “$1” would like to access your location.",[a]);case"notifications":return Object(o.a)("Website “$1” would like to show notifications.",[a]);case"camera":case"videocapture":return Object(o.a)("Website “$1” would like to use your camera.",[a]);case"audiocapture":case"microphone":return Object(o.a)("Website “$1” would like to use your microphone.",[a]);case"microphone_and_camera":return Object(o.a)("Website “$1” would like to use your microphone and camera.",[a]);case"sensors":return Object(o.a)("Website “$1” would like to use motion sensors.",[a]);case"midi-sysex":return Object(o.a)("Website “$1” would like to use MIDI devices.",[a])}return console.warn("Unknown permissiontype: "+i),i}),w(this,"renderNotice",()=>"geolocation"===this.props.permission.permissionType?r.a.createElement("div",{className:"geo-notice",__source:{fileName:E,lineNumber:223}},r.a.createElement("a",{href:"",title:Object(o.a)("Vivaldi Browser Privacy Policy"),onClick:this._privacyNotice,__source:{fileName:E,lineNumber:224}},Object(o.a)("Privacy Notice"))):null)}_privacyNotice(){s.a.openURL("https://vivaldi.com/privacy/browser/")}render(){const e={"button-addressfield":!0,"permission-popup":!0,"is-allowing":!(null===this.props.permission.blocked||this.props.permission.blocked),"is-dialog-open":this.state.isDialogOpen};return r.a.createElement("div",{className:"button-toolbar addressfield-popup-container",__source:{fileName:E,lineNumber:248}},r.a.createElement(f.a,{tooltip:this.getMessageText(),onClick:this.onNotificatorClicked,image:this.state.iconTypeSmall,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:N()(e),popupWidth:400,__source:{fileName:E,lineNumber:249}},r.a.createElement(b,{onPermissionClicked:this.onPermissionClicked,isDecided:null!==this.props.permission.blocked,onDialogClosed:this.onDialogClosed,onSettingsClicked:this.onSettingsClicked,settingsUrl:"",image:this.state.iconTypeMedium,renderNotice:this.renderNotice,message:this.getMessageText(),__source:{fileName:E,lineNumber:258}})))}}var k=C;a.d(t,"a",(function(){return O}));var y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\permissions\\PermissionsToolbar.jsx";class O extends r.a.PureComponent{render(){const e=this.props.pageId;return r.a.createElement("div",{className:"button-toolbar",__source:{fileName:y,lineNumber:21}},this.props.permissions.valueSeq().map(t=>t.tabId.has(e)&&r.a.createElement(k,{pageId:this.props.pageId,url:this.props.url,key:t.permissionType,permission:t,popupPosition:this.props.popupPosition,__source:{fileName:y,lineNumber:28}})))}}},function(e,t,a){"use strict";var i=a(18),s=a.n(i),n=a(129);const r={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},o={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},l={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},d={ColorSpace:{0:"Unknown",1:"sRGB",65535:"Adobe RGB / ProPhoto RGB"},ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function u(e){return!!e.exifdata}function h(e,t){function a(a){var i=function(e){var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,i=e.byteLength;for(;a<i;){if(255!==t.getUint8(a))return!1;if(225===t.getUint8(a+1))return _(t,a+4,t.getUint16(a+2));a+=2+t.getUint16(a+2)}}(a),s=function(e){var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,i=e.byteLength,s=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;a<i;){if(s(t,a)){var n=t.getUint8(a+7);n%2!=0&&(n+=1),0===n&&(n=4);var r=a+8+n,o=t.getUint16(a+6+n);return p(e,r,o)}a++}}(a),n=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);0;if(255!==t.getUint8(0)||216!==t.getUint8(1))return!1;var a=2,i=e.byteLength,s=new DOMParser;for(;a<i-4;){if("http"===f(t,a,4)){var n=a-1,r=t.getUint16(a-2)-1,o=f(t,n,r),l=o.indexOf("xmpmeta>")+8,c=(o=o.substring(o.indexOf("<x:xmpmeta"),l)).indexOf("x:xmpmeta")+10;return o=o.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+o.slice(c),v(s.parseFromString(o,"text/xml"))}a++}}(a);e.exifdata=i||{},e.iptcdata=s||{},e.xmpdata=n||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))a(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(e),i=a.length,s=new ArrayBuffer(i),n=new Uint8Array(s),r=0;r<i;r++)n[r]=a.charCodeAt(r);return s}(e.src));else if(/^blob\:/i.test(e.src)){const t=new FileReader;t.onload=function(e){a(e.target.result)},function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){200!==this.status&&0!==this.status||t(this.response)},a.send()}(e.src,e=>{t.readAsArrayBuffer(e)})}else{var i=new XMLHttpRequest;i.onload=function(){if(200!==this.status&&0!==this.status)throw"Could not load image";a(i.response),i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){const t=new FileReader;t.onload=function(e){a(e.target.result)},t.readAsArrayBuffer(e)}}const m={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function p(e,t,a){for(var i,s,n,r,o=new DataView(e),l={},c=t;c<t+a;)28===o.getUint8(c)&&2===o.getUint8(c+1)&&(r=o.getUint8(c+2))in m&&(n=o.getInt16(c+3),s=m[r],i=f(o,c+5,n),l.hasOwnProperty(s)?l[s]instanceof Array?l[s].push(i):l[s]=[l[s],i]:l[s]=i),c++;return l}function g(e,t,a,i,s){var n,r=e.getUint16(a,!s),o={};for(let l=0;l<r;l++)n=a+12*l+2,o[i[e.getUint16(n,!s)]]=b(e,n,t,a,s);return o}function b(e,t,a,i,s){var n,r,o,l,c,d,u=e.getUint16(t+2,!s),h=e.getUint32(t+4,!s),m=e.getUint32(t+8,!s)+a;switch(u){case 1:case 7:if(1===h)return e.getUint8(t+8,!s);n=h>4?m:t+8,r=[];for(let t=0;t<h;t++)r[t]=e.getUint8(n+t);return r;case 2:return f(e,n=h>4?m:t+8,h-1);case 3:if(1===h)return e.getUint16(t+8,!s);n=h>2?m:t+8,r=[];for(let t=0;t<h;t++)r[t]=e.getUint16(n+2*t,!s);return r;case 4:if(1===h)return e.getUint32(t+8,!s);for(r=[],l=0;l<h;l++)r[l]=e.getUint32(m+4*l,!s);return r;case 5:if(1===h)return c=e.getUint32(m,!s),d=e.getUint32(m+4,!s),(o=new Number(c/d)).numerator=c,o.denominator=d,o;r=[];for(let t=0;t<h;t++)c=e.getUint32(m+8*t,!s),d=e.getUint32(m+4+8*t,!s),r[t]=new Number(c/d),r[t].numerator=c,r[t].denominator=d;return r;case 9:if(1===h)return e.getInt32(t+8,!s);r=[];for(let t=0;t<h;t++)r[t]=e.getInt32(m+4*t,!s);return r;case 10:if(1===h)return e.getInt32(m,!s)/e.getInt32(m+4,!s);r=[];for(let t=0;t<h;t++)r[t]=e.getInt32(m+8*t,!s)/e.getInt32(m+4+8*t,!s);return r}}function f(e,t,a){var i="";for(let s=t;s<t+a;s++)i+=String.fromCharCode(e.getUint8(s));return i}function _(e,t){if("Exif"!==f(e,t,4))return!1;var a,i,s,n,u,h=t+6;if(18761===e.getUint16(h))a=!1;else{if(19789!==e.getUint16(h))return!1;a=!0}if(42!==e.getUint16(h+2,!a))return!1;var m=e.getUint32(h+4,!a);if(m<8)return!1;if((i=g(e,h,h+m,o,a)).ExifIFDPointer)for(s in n=g(e,h,h+i.ExifIFDPointer,r,a)){switch(s){case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"ColorSpace":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":n[s]=d[s][n[s]];break;case"LightSource":const e={1:5500,2:3500,3:2700,4:5e3,9:6e3,10:6e3,11:6500,12:7100,13:5400,14:4500,15:3700};i.kelvin=e[n[s]],n[s]=d[s][n[s]];break;case"ExifVersion":case"FlashpixVersion":n[s]=String.fromCharCode(n[s][0],n[s][1],n[s][2],n[s][3]);break;case"ComponentsConfiguration":n[s]=d.Components[n[s][0]]+d.Components[n[s][1]]+d.Components[n[s][2]]+d.Components[n[s][3]]}i[s]=n[s]}if(i.GPSInfoIFDPointer)for(s in u=g(e,h,h+i.GPSInfoIFDPointer,l,a)){switch(s){case"GPSVersionID":u[s]=u[s][0]+"."+u[s][1]+"."+u[s][2]+"."+u[s][3]}i[s]=u[s]}return i.thumbnail=function(e,t,a,i){var s=function(e,t,a){var i=e.getUint16(t,!a);return e.getUint32(t+2+12*i,!a)}(e,t+a,i);if(!s)return{};if(s>e.byteLength)return{};var n=g(e,t,t+s,c,i);if(n.Compression)switch(n.Compression){case 6:if(n.JpegIFOffset&&n.JpegIFByteCount){var r=t+n.JpegIFOffset,o=n.JpegIFByteCount;n.blob=new Blob([new Uint8Array(e.buffer,r,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",n.Compression)}else 2===n.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return n}(e,h,m,a),i}function N(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var i=e.attributes.item(a);t["@attributes"][i.nodeName]=i.nodeValue}}}else if(3===e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var s=0;s<e.childNodes.length;s++){var n=e.childNodes.item(s),r=n.nodeName;if(t[r]){if(!t[r].push){var o=t[r];t[r]=[],t[r].push(o)}t[r].push(N(n))}else t[r]=N(n)}return t}function v(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var i=e.children.item(a),s=i.attributes;for(var n in s){var r=s[n],o=r.nodeName,l=r.nodeValue;void 0!==o&&(t[o]=l)}var c=i.nodeName;if(void 0===t[c])t[c]=N(i);else{if(void 0===t[c].push){var d=t[c];t[c]=[],t[c].push(d)}t[c].push(N(i))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}var E={getData:function(e,t){return!1!==e.complete&&(u(e)?t&&t.call(e):h(e,t),!0)},getTag:function(e,t){if(u(e))return e.exifdata[t]},getAllTags:function(e){if(!u(e))return{};var t,a=e.exifdata,i={};for(t in a)a.hasOwnProperty(t)&&(i[t]=a[t]);return i},pretty:function(e){if(!u(e))return"";var t,a=e.exifdata,i="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?i+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":i+=t+" : ["+a[t].length+" values]\r\n":i+=t+" : "+a[t]+"\r\n");return i}},w=a(12),S=a(0),C=a.n(S),k=a(2),y="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GPSCoordinates.jsx";function O(e){w.a.openURL(e)}function A(e){return`${e[0]}° ${e[1]}' ${e[2]}"`}var T=function({GPSLatitude:e,GPSLatitudeRef:t,GPSLongitude:a,GPSLongitudeRef:i}){const s="http://tools.wmflabs.org/geohack/geohack.php?language=en&params="+`${e.join("_")}_${t}_${a&&a.join("_")}_${i}_`,n=`${A(e)} ${t},\n            ${A(a)} ${i}`;return C.a.createElement("div",{className:"image-metadata-generic",__source:{fileName:y,lineNumber:36}},C.a.createElement("h3",{__source:{fileName:y,lineNumber:37}},Object(k.a)("Location")),C.a.createElement("div",{__source:{fileName:y,lineNumber:38}},C.a.createElement("a",{onClick:O.bind(null,s),href:s,title:Object(k.a)("Open in GeoHack"),__source:{fileName:y,lineNumber:39}},n)))},I="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\GenericMetadata.jsx";var D=function({value:e,name:t}){return C.a.createElement("div",{className:"image-metadata-generic",__source:{fileName:I,lineNumber:10}},C.a.createElement("h3",{__source:{fileName:I,lineNumber:11}},t),C.a.createElement("div",{__source:{fileName:I,lineNumber:12}},e))},P=a(19),x=a(96),M=a(174),L=a(114),j=a(13),B=a(1),R="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\image-inspector\\ImageInspector.jsx";function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=[B.kKeyboardTabToAll,B.kThemeContrastMinimum],W=["0°",Object(k.a)("Vertical Mirror"),"180°",Object(k.a)("Horizontal Mirror"),Object(k.a)("90° Horizontal Mirror"),"270°",Object(k.a)("270° Vertical Mirror"),"90°"],H=document.createElement("canvas"),V=H.getContext("2d"),G=document.createElement("canvas"),K=G.getContext("2d");class z extends C.a.Component{constructor(e){super(e),F(this,"refButtonForTests",C.a.createRef()),F(this,"updateTheme",()=>{const e=s()(this.props.vivaldiSettings.BROWSER_COLOR_ACCENT_BG),t=s()(this.props.vivaldiSettings.BROWSER_COLOR_HIGHLIGHT_BG),a=s()("#bbb"),i=s()("#272727"),r=n.e.all(a,i,t,e);Object.keys(r).forEach(e=>{this.refs.imageinspector.style.setProperty(`--${e}`,r[e])})}),F(this,"loadPhoto",()=>{this.props.url?this.setState({status:1},()=>{const e=this.props.url,t=document.createElement("img"),a=[{fill:s()("#f00"),data:[]},{fill:s()("#0f0"),data:[]},{fill:s()("#00f"),data:[]},{fill:s()("#999"),data:[]}],i=a[0],n=a[1],r=a[2],o=a[3];let l,c=0;t.onload=()=>E.getData(t,()=>{l&&URL.revokeObjectURL(l);const e=t.width/t.height;let s=H.width,d=s/e,u=0,h=0;d>H.height?(d=H.height,s=d*e,u=(H.width-s)/2):h=(H.height-d)/2,V.clearRect(0,0,H.width,H.height),V.drawImage(t,u,h,s,d);const m=V.getImageData(0,0,H.width,H.height);for(let e=0;e<256;e+=1)i.data[e]=0,n.data[e]=0,r.data[e]=0,o.data[e]=0;const p=m.data.length/256;for(let e=0,t=m.data.length;e<t;e+=4)if(m.data[e+3]>0){const t=m.data[e],a=m.data[e+1],s=m.data[e+2];i.data[t]+=1/p,n.data[a]+=1/p,r.data[s]+=1/p}for(let e=0;e<256;e+=1)o.data[e]=.2126*i.data[e]+.7152*n.data[e]+.0722*r.data[e];this.setState({data:E.getAllTags(t),histogramChannels:a,height:t.naturalHeight,width:t.naturalWidth,size:c,status:2},this.updateHistogram)}),fetch(e).then(e=>e.blob()).then(e=>{c=e.size,l=URL.createObjectURL(e),t.src=l}).catch(e=>{this.setState({status:3})})}):this.setState({status:0})}),F(this,"_createClipboardData",()=>this.props.url+"\n\n"+this.state.width+" x "+this.state.height+"\n"+Object(M.a)(this.state.size)+"\n\n"+JSON.stringify(this.state.data,null,2)),F(this,"copyToClipboard",e=>{if(!(this.state.size&&this.state.width&&this.state.height))return;const t=this._createClipboardData();navigator.clipboard.writeText(t)}),this.state={histogramChannels:[],histogramStyle:3,histogramImage:null,height:0,width:0,size:0,data:{},status:0},G.width=768,G.height=300,K.globalCompositeOperation="lighter",K.lineWidth=1.5,H.width=600,H.height=400}componentDidMount(){this.updateTheme(),this.props.open&&this.loadPhoto()}componentDidUpdate(e){this.props.open&&0===this.state.status&&this.loadPhoto(),Object(L.a)(this.props.vivaldiSettings,e.vivaldiSettings)&&Object(L.a)(this.props.prefValues,e.prefValues)||this.updateTheme()}updateHistogram(){let e=[];switch(this.state.histogramStyle){case 0:e=[this.state.histogramChannels[0]];break;case 1:e=[this.state.histogramChannels[1]];break;case 2:e=[this.state.histogramChannels[2]];break;case 4:e=[this.state.histogramChannels[3]];break;case 3:e=[this.state.histogramChannels[0],this.state.histogramChannels[1],this.state.histogramChannels[2]]}K.clearRect(0,0,G.width,G.height),e.forEach(e=>{K.beginPath(),K.moveTo(0,G.height);for(let t=0;t<e.data.length+1;t+=1){const a=Math.round(e.data[t]*G.height);K.lineTo(3*t,G.height-a)}K.lineTo(G.width,G.height),K.strokeStyle=e.fill.css(),K.fillStyle=e.fill.alpha(.3).css(),K.fill(),K.stroke(),K.closePath()}),this.setState({histogramImage:G.toDataURL()})}setHistogramStyle(e){this.setState({histogramStyle:e},this.updateHistogram)}render(){if(!this.props.open)return C.a.createElement("div",{ref:"imageinspector",__source:{fileName:R,lineNumber:370}});const e=this.state.data,t=Object.keys(e).length>0&&e.DateTimeOriginal,a=decodeURI(this.props.url.split("/").pop().split("#")[0].split("?")[0].toString()),i=e.ExposureTime?e.ExposureTime.valueOf():void 0;return C.a.createElement("div",{className:"image-inspector",ref:"imageinspector",__source:{fileName:R,lineNumber:382}},C.a.createElement("header",{__source:{fileName:R,lineNumber:383}},C.a.createElement("h1",{__source:{fileName:R,lineNumber:384}},a),C.a.createElement("button",{className:"close no-stroke",title:Object(k.a)("Close inspector"),onClick:this.props.toggleImageInspector,dangerouslySetInnerHTML:{__html:j.hc},__source:{fileName:R,lineNumber:385}})),C.a.createElement("div",{className:"image-inspector-container",__source:{fileName:R,lineNumber:391}},1===this.state.status&&C.a.createElement("p",{className:"in-progress",__source:{fileName:R,lineNumber:393}},Object(k.a)("Analyzing image...")),3===this.state.status&&C.a.createElement("p",{__source:{fileName:R,lineNumber:398}},Object(k.a)("Unable to analyze image.")),2===this.state.status&&C.a.createElement("div",{className:"image-inspector-metadata",__source:{fileName:R,lineNumber:404}},C.a.createElement("div",{className:"image-histogram",__source:{fileName:R,lineNumber:406}},C.a.createElement("img",{className:"histogram",title:Object(k.a)("Histogram"),src:this.state.histogramImage,__source:{fileName:R,lineNumber:407}}),C.a.createElement("div",{className:"toolbar text",__source:{fileName:R,lineNumber:412}},C.a.createElement("button",{tabIndex:this.props.prefValues[B.kKeyboardTabToAll],className:`button-toolbar ${4===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,4),__source:{fileName:R,lineNumber:413}},Object(k.a)("Brightness")),C.a.createElement("button",{tabIndex:this.props.prefValues[B.kKeyboardTabToAll],className:`button-toolbar ${3===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,3),__source:{fileName:R,lineNumber:422}},"RGB"),C.a.createElement("button",{tabIndex:this.props.prefValues[B.kKeyboardTabToAll],className:`button-toolbar ${0===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,0),__source:{fileName:R,lineNumber:430}},"R"),C.a.createElement("button",{tabIndex:this.props.prefValues[B.kKeyboardTabToAll],className:`button-toolbar ${1===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,1),__source:{fileName:R,lineNumber:438}},"G"),C.a.createElement("button",{tabIndex:this.props.prefValues[B.kKeyboardTabToAll],className:`button-toolbar ${2===this.state.histogramStyle?"button-selected":""}`,onClick:this.setHistogramStyle.bind(this,2),__source:{fileName:R,lineNumber:447}},"B"))),t&&C.a.createElement("div",{className:"image-metadata-device",__source:{fileName:R,lineNumber:460}},C.a.createElement("span",{className:"image-camera",dangerouslySetInnerHTML:{__html:j.w},__source:{fileName:R,lineNumber:461}}),C.a.createElement("h3",{__source:{fileName:R,lineNumber:465}},"Canon"===e.Make?"":e.Make," ",e.Model)),t&&C.a.createElement("div",{className:"image-metadata-core",__source:{fileName:R,lineNumber:470}},C.a.createElement("div",{title:Object(k.a)("Aperture"),__source:{fileName:R,lineNumber:471}},C.a.createElement("span",{dangerouslySetInnerHTML:{__html:j.h},__source:{fileName:R,lineNumber:472}}),e.FNumber&&`f/${e.FNumber.valueOf()}`),C.a.createElement("div",{title:Object(k.a)("ISO Speed"),__source:{fileName:R,lineNumber:475}},C.a.createElement("span",{dangerouslySetInnerHTML:{__html:j.U},__source:{fileName:R,lineNumber:476}}),e.ISOSpeedRatings&&e.ISOSpeedRatings),C.a.createElement("div",{title:Object(k.a)("Exposure time"),__source:{fileName:R,lineNumber:479}},C.a.createElement("span",{dangerouslySetInnerHTML:{__html:j.Sb},__source:{fileName:R,lineNumber:480}}),i&&i<1&&Object(k.a)("1/$1 second","1/$1 seconds",[Math.round(1/i*100)/100]),i&&i>=1&&Object(k.a)("$1 second","$1 seconds",[i])),C.a.createElement("div",{title:Object(k.a)("Focal length"),__source:{fileName:R,lineNumber:489}},C.a.createElement("span",{dangerouslySetInnerHTML:{__html:j.P},__source:{fileName:R,lineNumber:490}}),e.FocalLengthIn35mmFilm||e.FocalLength&&`${e.FocalLengthIn35mmFilm?e.FocalLengthIn35mmFilm.valueOf():e.FocalLength.valueOf()} mm`)),e.WhiteBalance&&C.a.createElement("div",{className:"image-white-balance",__source:{fileName:R,lineNumber:501}},C.a.createElement("h3",{__source:{fileName:R,lineNumber:502}},Object(k.a)("White Balance")),e.LightSource&&"Unknown"!==e.LightSource?e.LightSource:e.WhiteBalance,e.kelvin&&C.a.createElement("div",{className:"image-kelvinscale",__source:{fileName:R,lineNumber:507}},C.a.createElement("span",{className:"kelvin-indicator",style:{left:`${(e.kelvin-2e3)/70}%`},__source:{fileName:R,lineNumber:508}},e.kelvin,"K"))),this.state.width&&this.state.height&&C.a.createElement(D,{value:this.state.width+" x "+this.state.height+" ("+Math.round(this.state.height*this.state.width/1e5)/10+"MP)",name:Object(k.a)("Dimensions"),__source:{fileName:R,lineNumber:519}}),this.state.size&&C.a.createElement(D,{value:Object(M.a)(this.state.size),name:Object(k.a)("Size"),__source:{fileName:R,lineNumber:529}}),e.ColorSpace&&C.a.createElement(D,{value:`${e.ColorSpace}`,name:Object(k.a)("Color Space"),__source:{fileName:R,lineNumber:532}}),e.GPSLatitude&&e.GPSLatitudeRef&&e.GPSLongitude&&e.GPSLongitudeRef&&C.a.createElement(T,{GPSLatitude:e.GPSLatitude,GPSLatitudeRef:e.GPSLatitudeRef,GPSLongitude:e.GPSLongitude,GPSLongitudeRef:e.GPSLongitudeRef,__source:{fileName:R,lineNumber:537}}),e.Copyright&&""!==e.Copyright.trim()&&C.a.createElement(D,{value:e.Copyright,name:Object(k.a)("Copyright"),__source:{fileName:R,lineNumber:543}}),e.DateTimeOriginal&&C.a.createElement(D,{value:e.DateTimeOriginal,name:Object(k.a)("Captured at"),__source:{fileName:R,lineNumber:547}}),e.Orientation&&C.a.createElement(D,{value:W[e.Orientation-1],name:Object(k.a)("Orientation"),__source:{fileName:R,lineNumber:551}}),e.Software&&C.a.createElement(D,{value:e.Software,name:Object(k.a)("Software"),__source:{fileName:R,lineNumber:557}}),C.a.createElement("div",{className:"toolbar text alldata-toolbar",__source:{fileName:R,lineNumber:559}},C.a.createElement("button",{ref:this.refButtonForTests,className:"button-toolbar",tabIndex:this.props.prefValues[B.kKeyboardTabToAll],onClick:this.copyToClipboard,__source:{fileName:R,lineNumber:560}},Object(k.a)("Copy Data to Clipboard"))))))}}t.a=Object(P.a)(Object(x.a)(z,["BROWSER_COLOR_ACCENT_BG","BROWSER_COLOR_HIGHLIGHT_BG"]),U)},function(e,t,a){"use strict";var i=a(0),s=a(196),n=a(11),r=a(4),o=a(16),l=a(7),c=a(5);const d=new class{openSyncedTab(e){l.default.sessions.restore(e.sessionId,t=>{l.default.runtime.lastError&&console.warn("Error restoring tab: ",e,l.default.runtime.lastError)})}openSyncedWindow(e){l.default.sessions.restore(e.sessionId,t=>{l.default.runtime.lastError&&console.warn("Error restoring page: ",e,l.default.runtime.lastError.message)})}load(){o.a.isIncognitoOrGuest()||l.default.sessions.getDevices(e=>{n.a.dispatch({actionType:r.a.CHROME_SET_DEVICES,devices:e})})}};c.a.sync.onCycleCompleted.addListener(d.load);var u=d,h=a(58),m=a.n(h);let p=[];const g=new class extends m.a{getSyncedTabs(){return p}emitChange(){this.emit("change")}addChangeListener(e){this.on("change",e)}removeChangeListener(e){this.removeListener("change",e)}};n.a.register(e=>{switch(e.actionType){case r.a.CHROME_SET_DEVICES:t=e.devices,p=t,g.emitChange()}var t});var b=g,f=a(26),_=a(2),N=a(6),v=a(13);function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends i.PureComponent{constructor(...e){super(...e),E(this,"state",{visible:!1,syncedTabs:b.getSyncedTabs()}),E(this,"onSyncedTabsStoreChange",()=>{this.setState({syncedTabs:b.getSyncedTabs()})}),E(this,"onSyncStoreChange",()=>{this.setState({visible:"started"===s.a.getState().engineData.engineState})}),E(this,"openSyncedTab",e=>{u.openSyncedTab(e)}),E(this,"openSyncedWindow",e=>{u.openSyncedWindow(e)}),E(this,"trimTitle",e=>(e.length>70&&(e=e.substring(0,70)+"..."),e)),E(this,"getContextMenuItems",()=>{const e=this.state.syncedTabs.reduce((e,t)=>e.concat(t.sessions.map(e=>{const a=e.window;if(!a)return;const i=a.tabs||[];return{items:i.map(e=>({mnemonic:!1,name:this.trimTitle(e.title||""),url:e.url,handler:this.openSyncedTab.bind(this,e)})).concat([{name:"---"},{handler:this.openSyncedWindow.bind(this,a),...Object(N.a)("Open All")}]),...Object(N.a)("Window with $1 Tab on $2","Window with $1 Tabs on $2",[i.length,t.deviceName])}})),[]).filter(Boolean);return Promise.resolve(e)})}componentDidMount(){b.addChangeListener(this.onSyncedTabsStoreChange),this.onSyncedTabsStoreChange(),this.syncStoreToken=s.a.addListener(this.onSyncStoreChange),this.onSyncStoreChange()}componentWillUnmount(){b.removeChangeListener(this.onSyncedTabsStoreChange),this.syncStoreToken.remove()}render(){return this.state.syncedTabs&&this.state.visible?i.createElement(f.a,{className:"synced-tabs-button",menuPromise:this.getContextMenuItems,menuOrigin:"bottomLeft",disabled:0===this.state.syncedTabs.length,tooltip:Object(_.a)("Synced Tabs"),image:v.cc.large,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\tabs\\SyncedTabs.jsx",lineNumber:105}}):null}}t.a=w},function(e,t,a){"use strict";var i,s,n,r=a(0),o=a.n(r),l=a(13),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelPathField.jsx";class d extends o.a.Component{constructor(e){super(e)}render(){return o.a.createElement("div",{className:"panel-pathfield",__source:{fileName:c,lineNumber:23}},o.a.createElement("button",{className:"meta-icon url",title:this.props.buttonTitle,disabled:this.props.disabled,tabIndex:this.props.tabIndex,onClick:this.props.openFile,dangerouslySetInnerHTML:{__html:l.Pb.small},__source:{fileName:c,lineNumber:24}}),o.a.createElement("input",{className:"cardview path",style:{opacity:this.props.disabled?.5:1},value:this.props.path,tabIndex:this.props.tabIndex,readOnly:this.props.readOnly,type:"text",placeholder:this.props.placeholder,__source:{fileName:c,lineNumber:30}}))}}n={buttonTitle:"",editTitle:"",placeholder:"",tabIndex:"-1",disabled:!1,readOnly:!1,path:""},(s="defaultProps")in(i=d)?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n;var u=d,h=a(12),m=a(36),p="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\panels\\PanelUrlField.jsx";function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends o.a.Component{constructor(e){super(e),g(this,"_openUrl",()=>{this.props.url&&h.a.openURL(Object(m.d)(this.props.url))}),this.state={editUrl:void 0}}render(){return o.a.createElement("div",{className:"panel-urlfield",__source:{fileName:p,lineNumber:34}},o.a.createElement("button",{className:"meta-icon url",title:this.props.buttonTitle,disabled:this.props.disabled,tabIndex:this.props.tabIndex,onClick:this._openUrl,dangerouslySetInnerHTML:{__html:l.Mb.small},__source:{fileName:p,lineNumber:35}}),o.a.createElement("input",{type:"text",className:"cardview url",tabIndex:this.props.tabIndex,title:this.props.editTitle,placeholder:this.props.placeholder,disabled:this.props.disabled,value:this.props.url,readOnly:this.props.readOnly,__source:{fileName:p,lineNumber:41}}))}}g(b,"defaultProps",{buttonTitle:"",editTitle:"",placeholder:"",tabIndex:"-1",disabled:!1,readOnly:!1,url:""});var f=b,_=a(2),N=a(17),v=a.n(N),E=a(174),w=a(15),S=a.n(w),C=a(363),k="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\downloads\\DownloadPanel\\DownloadEditor.jsx";class y extends o.a.Component{render(){const e=this.props.downloadItem,t=e?e.filename:"",a=t.split("\\").pop().split("/").pop(),i=e?e.url:"",s=e?"complete"===e.state?e.totalBytes:e.bytesReceived:0,n=e?Object(E.a)(s):"",r=e?Object(E.a)(Object(C.a)(e))+"/s":"",c=Object(_.a)("Show in File Manager"),d=e?parseFloat(e.bytesReceived/e.fileSize*100).toFixed(0):"",h=e&&new Date(e.startTime).toDateString()===new Date(e.endTime).toDateString();return o.a.createElement("div",{className:v()({data:!0,"downloads-cardwrapper":!0,cardview:!0,disabled:!e}),__source:{fileName:k,lineNumber:52}},o.a.createElement("input",{className:"cardview title",placeholder:Object(_.a)("File Name"),value:a,readOnly:!0,type:"text",disabled:!e,__source:{fileName:k,lineNumber:58}}),o.a.createElement("div",{className:"panel-pathfield",__source:{fileName:k,lineNumber:66}},o.a.createElement("span",{className:"meta-icon speed",tabIndex:this.props.keyAccess,dangerouslySetInnerHTML:{__html:l.I},__source:{fileName:k,lineNumber:67}}),o.a.createElement("span",{className:"cardview",__source:{fileName:k,lineNumber:70}},r?Object(_.a)("$1 ($2)",[n,r]):Object(_.a)("Download Speed"))),o.a.createElement(f,{buttonTitle:Object(_.a)("Restart"),readOnly:!0,disabled:!e,tabIndex:this.props.keyAccess,url:i,placeholder:Object(_.a)("File URL"),__source:{fileName:k,lineNumber:78}}),o.a.createElement(u,{buttonTitle:c,readOnly:!0,disabled:!e||!e.exists,tabIndex:this.props.keyAccess,path:t,openFile:this.props.onShow,placeholder:Object(_.a)("Local Path"),__source:{fileName:k,lineNumber:86}}),o.a.createElement("div",{className:"panel-timefield",__source:{fileName:k,lineNumber:95}},o.a.createElement("span",{className:"meta-icon date",dangerouslySetInnerHTML:{__html:l.p},__source:{fileName:k,lineNumber:96}}),o.a.createElement("span",{__source:{fileName:k,lineNumber:98}},e&&Object(_.a)("Started: $1",[S()(e.startTime).format("l, LT")]),e&&o.a.createElement("br",{__source:{fileName:k,lineNumber:102}}),e?e.endTime?Object(_.a)("Finished: $1",[S()(e.endTime).format(h?"LT":"l, LT")]):!isNaN(parseInt(d))&&Object(_.a)("Completed $1 %",[d]):Object(_.a)("Download Time"))))}}t.a=y},function(e,t,a){"use strict";var i=a(530),s=a(569),n=a(240),r=a(12),o=a(0),l=a.n(o),c=a(25),d=a(17),u=a.n(d),h=a(160),m=a(976),p=a.n(m),g="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\MarkdownRender.jsx";function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){if(0!==e.button)return;const t=e.target;if(t instanceof HTMLAnchorElement&&t.href){const a=t.getAttribute("href");if(!a||a&&a.startsWith("#"))return;const{metaKey:i,shiftKey:s,ctrlKey:n,altKey:o,button:l}=e,{allowOverride:c,enableSearch:d,...u}=Object(h.b)({metaKey:i,shiftKey:s,ctrlKey:n,altKey:o,button:l});r.a.openURL(t.href,{...u,inCurrent:!1})}}class _ extends l.a.PureComponent{constructor(...e){super(...e),b(this,"markdownFormatter",new n.a),b(this,"refRender",l.a.createRef()),b(this,"state",{markup:this.props.body}),b(this,"onScroll",({currentTarget:e})=>{this.props.onScrollValueChange&&this.props.onScrollValueChange(e.scrollTop)}),b(this,"selectAll",e=>{const{document:t,getSelection:a}=this.context;e.focus();const i=a();i&&i.removeAllRanges();const s=t.createRange();s.selectNodeContents(e),i&&i.addRange(s)}),b(this,"onKeyDown",e=>{const{getSelection:t}=this.context;switch(e.key){case"a":return void(e.ctrlKey&&(e.preventDefault(),this.selectAll(e.currentTarget)));case"Escape":{const e=t();return void(e&&e.removeAllRanges())}}})}componentDidMount(){const e=this.props.attachments.map(({content:e})=>fetch(e).then(e=>e.blob()).then(t=>{const a=URL.createObjectURL(t);return{content:e,objectURL:a}}));Promise.all(e).then(e=>{this.objectURLs=e.map(e=>e.objectURL);const t=e.map(({content:e,objectURL:t})=>`[${p()(e)}]: ${t}`).join("\n"),a=`${this.props.body}\n\n${t}\n`;this.setState({markup:a})}),this.refRender.current&&(this.refRender.current.scrollTop=this.props.initialScrollPosition||0)}componentWillUnmount(){this.objectURLs&&this.objectURLs.forEach(URL.revokeObjectURL)}render(){const{className:e}=this.props,t=this.markdownFormatter.getRawMarkup(this.state.markup);return l.a.createElement("div",{ref:this.refRender,onMouseUp:f,onKeyDown:this.onKeyDown,className:u()("MarkdownRender",e),tabIndex:"0",onScroll:this.onScroll,__source:{fileName:g,lineNumber:136}},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:t},__source:{fileName:g,lineNumber:144}}))}}b(_,"contextType",c.a);var N=_,v=a(92),E=a(49),w=a(2),S=a(183);function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends l.a.PureComponent{constructor(...e){super(...e),C(this,"_isIMEOpen",!1),C(this,"state",{content:this.props.content}),C(this,"refContent",l.a.createRef()),C(this,"focus",()=>{this.refContent.current&&this.refContent.current.focus()}),C(this,"reset",Object(S.a)(()=>{this.setState({content:this.props.content})},E.a,{leading:!1,trailing:!0})),C(this,"_save",Object(S.a)(()=>{this.waitForCompositionEnd.then(()=>{this.props.onSave(this.state.content)})},E.a,{leading:!1,trailing:!0})),C(this,"handleContentChange",({currentTarget:e})=>{this.props.onChange(e.value),this.setState({content:e.value},this._save)}),C(this,"waitForCompositionEnd",Promise.resolve()),C(this,"resolveComposition",()=>{}),C(this,"_handleCompositionStart",()=>{this._isIMEOpen=!0,this.waitForCompositionEnd=(()=>new Promise(e=>{this.resolveComposition=e}))()}),C(this,"_handleCompositionEnd",()=>{this._isIMEOpen=!1,this.resolveComposition()}),C(this,"handleKeyDown",e=>{(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),this.props.onSave(this.state.content)),"Escape"===e.key&&this._isIMEOpen&&(e.preventDefault(),e.stopPropagation())})}render(){const{disabled:e,className:t}=this.props,{content:a}=this.state;return l.a.createElement("textarea",{ref:this.refContent,className:t,placeholder:Object(w.a)("Note"),title:Object(w.a)("Write a note"),value:a,disabled:e,onChange:this.handleContentChange,onCompositionStart:this._handleCompositionStart,onCompositionEnd:this._handleCompositionEnd,onKeyDown:this.handleKeyDown,onBlur:this.props.onBlur,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesTextEditor.jsx",lineNumber:94}})}}var y=a(57),O=a(10),A=a(29),T=a.n(A),I=a(230),D=a(72),P=a(80),x=(a(143),a(7)),M=a(68),L=a(15),j=a.n(L),B=a(5),R=a(477),F=a(308),U=a(36),W=a(13),H=a(1),V=(a(20),"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\notes\\NotesEditor.jsx");function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K({disabled:e,onToggleMarkDown:t,onTakeScreenshot:a,onTakeCaptureArea:s,onAddImageFile:n,onAddAttachment:r,keyAccess:o,viewMarkdown:c,noteId:d}){return l.a.createElement("div",{className:"toolbar toolbar-default toolbar-wrap no-top-padding",__source:{fileName:V,lineNumber:81}},l.a.createElement("div",{className:"toolbar-group",__source:{fileName:V,lineNumber:82}},l.a.createElement("div",{className:"button-toolbar",__source:{fileName:V,lineNumber:83}},l.a.createElement("button",{disabled:e,onClick:a,title:Object(w.a)("Add screenshot"),tabIndex:o,dangerouslySetInnerHTML:{__html:W.mb},__source:{fileName:V,lineNumber:84}})),l.a.createElement("div",{className:"button-toolbar",__source:{fileName:V,lineNumber:91}},l.a.createElement("button",{disabled:e,onClick:s,title:Object(w.a)("Add capture of selected area..."),tabIndex:o,dangerouslySetInnerHTML:{__html:W.qb},__source:{fileName:V,lineNumber:92}})),l.a.createElement(i.a,{disabled:e,keyAccess:o,noteId:d,__source:{fileName:V,lineNumber:99}}),l.a.createElement("div",{className:"button-toolbar",__source:{fileName:V,lineNumber:104}},l.a.createElement("button",{className:"button-toolbar"+(c?" button-pressed":""),disabled:e,onClick:t,title:c?Object(w.a)("Switch to Editor"):Object(w.a)("Switch Markdown View"),tabIndex:o,dangerouslySetInnerHTML:{__html:W.bc},__source:{fileName:V,lineNumber:105}}))),l.a.createElement("div",{className:"button-toolbar",style:{marginLeft:"auto",marginRight:0},__source:{fileName:V,lineNumber:119}},!1))}function z(){return new Promise(e=>{O.a.get(H.kPanelsAsOverlayEnabled)&&y.a.toggleContent("notes"),setTimeout(()=>e(),200)})}async function Y(e,t){return function(e,t){return new Promise((a,i)=>{B.a.notes.update(e,t,e=>{x.default.runtime.lastError&&i(x.default.runtime.lastError),a(e)})})}(e,t)}function $(e,{title:t,content:a,url:i}){return Y(e,Object(R.a)({url:"string"==typeof i?Object(U.b)(i.trim()):void 0,title:t,content:a},F.a))}class Q extends l.a.Component{constructor(...e){super(...e),G(this,"refFolderName",l.a.createRef()),G(this,"refContainer",l.a.createRef()),G(this,"refTextEditor",l.a.createRef()),G(this,"state",{url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0}),G(this,"isEmpty",()=>{const{note:e}=this.props;return![this.state.title,this.state.url,e&&e.content,e&&e.attachments&&e.attachments.length].some(Boolean)}),G(this,"updateState",Object(S.a)(()=>{if(Object(M.a)(T.a.findDOMNode(this.refTextEditor.current)))return;const e={url:this.props.note?this.props.note.url:void 0,title:this.props.note?this.props.note.title:void 0,content:this.props.note?this.props.note.content:void 0};this.setState(e,()=>this.refTextEditor.current&&this.refTextEditor.current.reset())},E.a,{trailing:!0,leading:!1})),G(this,"focusPrimaryInput",()=>{if(!this.props.note)return;E.b.isFolder(this.props.note)?this.refFolderName.current&&this.refFolderName.current.focus():this.refTextEditor.current&&this.refTextEditor.current.focus()}),G(this,"_captureScreenshot",()=>{if(!this.props.note)return;const e=this.props.note.id;z().then(()=>v.a.addScreenshot(e))}),G(this,"_takeAreaCapture",()=>{this.props.note&&(v.a.addAreaCapture(this.props.note.id),z())}),G(this,"_addImageFile",e=>{this.props.note&&(v.a.addImageFile(this.props.note.id,e.target.files[0]),e.target.value="")}),G(this,"_openUrl",e=>{if(2===e.button)return;if(!this.props.note||!this.props.note.url)return;const t=Object(U.d)(this.props.note.url);if(!t)return;const{metaKey:a,shiftKey:i,ctrlKey:s,altKey:n,button:o}=e,{allowOverride:l,enableSearch:c,...d}=Object(h.b)({metaKey:a,shiftKey:i,ctrlKey:s,altKey:n,button:o});r.a.openURL(t,d)}),G(this,"_toggleMarkdown",()=>{this._save(),this.props.toggleMarkdown()}),G(this,"_save",async()=>{const{note:e}=this.props;if(!e||e.trash)return Promise.resolve();D.a.setUrlfieldState("NotesEditor",{editUrl:void 0});const{title:t,url:a,content:i}=this.state;return await $(e.id,{title:t,url:a,content:i})}),G(this,"_onUrlbarStoreChanged",()=>{const e=P.a.getUrlfieldStateFromId("NotesEditor");this.setState({url:e.editUrl})}),G(this,"handleTitleChange",({currentTarget:e})=>{const{note:t}=this.props;if(!t)return;const a=e.value;this.setState({title:a},()=>{$(t.id,{title:a})})}),G(this,"onBlur",()=>{this._save().then(e=>{e&&this.props.onBlur({note:e})})}),G(this,"deleteAttachment",e=>{this.props.note&&v.a.removeAttachment(this.props.note.id,e)}),G(this,"handleSaveContent",e=>{const{note:t}=this.props;t&&$(t.id,{content:e})})}componentDidMount(){P.a.addChangeListener(this._onUrlbarStoreChanged)}componentDidUpdate(e,t){this.props.note&&this.props.note.content!==t.content&&this.updateState()}componentWillUnmount(){if(P.a.removeChangeListener(this._onUrlbarStoreChanged),!this.props.note)return;const{content:e}=this.state;$(this.props.note.id,{content:e}).then(e=>this.props.onBlur({note:e}))}render(){const{note:e}=this.props,t=e&&!E.b.isFolder(e),a=e&&E.b.isFolder(e),i=!e,n=e?j()(e.dateAdded).format("LLL"):"",r=Boolean(!e||E.b.isSeparator(e)||a);return l.a.createElement("div",{className:u()("NotesEditor","cardview",{"NotesEditor--HasAttachments":e&&e.attachments&&e.attachments.length>0}),ref:this.refContainer,onKeyDown:this.props.onKeyDown,__source:{fileName:V,lineNumber:378}},l.a.createElement(K,{disabled:r,onToggleMarkDown:this._toggleMarkdown,onTakeScreenshot:this._captureScreenshot,onTakeCaptureArea:this._takeAreaCapture,onAddImageFile:this._addImageFile,onAddAttachment:this.props.onOpenDialog,keyAccess:this.props.keyAccess,viewMarkdown:this.props.viewMarkdown,noteId:e?e.id:"-1",__source:{fileName:V,lineNumber:391}}),t&&!this.props.viewMarkdown&&e&&l.a.createElement(k,{ref:this.refTextEditor,key:e.id,onBlur:this.onBlur,className:"NotesEditor-Editor",disabled:r,content:e.content||"",onChange:e=>this.setState({content:e}),onSave:this.handleSaveContent,__source:{fileName:V,lineNumber:404}}),t&&this.props.viewMarkdown&&e&&l.a.createElement(N,{key:e.content?e.content.length:"-1",body:e.content||"",attachments:[],__source:{fileName:V,lineNumber:417}}),a&&e&&l.a.createElement("div",{className:"folder",__source:{fileName:V,lineNumber:425}},l.a.createElement("input",{ref:this.refFolderName,type:"text",placeholder:Object(w.a)("Folder"),title:Object(w.a)("Edit folder name"),value:this.state.title,disabled:e.trash,onChange:this.handleTitleChange,__source:{fileName:V,lineNumber:426}})),i&&l.a.createElement("div",{className:"NotesEditor-EmptyPlaceholder ",onClick:this.props.onAdd,__source:{fileName:V,lineNumber:439}},Object(w.a)("Start here to add a new note")),e&&l.a.createElement(s.a,{className:"NotesEditor-Attachments",attachments:e.attachments||[],onRemoveAttachment:this.deleteAttachment,__source:{fileName:V,lineNumber:444}}),l.a.createElement("div",{className:u()("NotesEditor-Metadata",{disabled:r}),__source:{fileName:V,lineNumber:450}},l.a.createElement("button",{className:"NotesEditor-MetaIcon NotesEditor-MetaIcon--Url",title:Object(w.a)("Go to address"),disabled:r,tabIndex:this.props.keyAccess,onClick:this._openUrl,onAuxClick:this._openUrl,dangerouslySetInnerHTML:{__html:W.o},__source:{fileName:V,lineNumber:451}}),l.a.createElement(I.a,{onBlur:this.onBlur,autoFocus:!1,title:Object(w.a)("Enter webpage address"),className:"cardview address",disabled:r,displayUrl:e&&e.url?e.url:"",editUrl:this.state.url,autocompletionEnabled:!0,pageId:"NotesEditor",placeholder:e?Object(w.a)("Address"):null,__source:{fileName:V,lineNumber:459}}),l.a.createElement("div",{className:"NotesEditor-Created dateCreated",title:Object(w.a)("Date created"),__source:{fileName:V,lineNumber:472}},l.a.createElement("div",{className:"NotesEditor-MetaIcon fieldset",dangerouslySetInnerHTML:{__html:W.p},__source:{fileName:V,lineNumber:473}}),l.a.createElement("span",{__source:{fileName:V,lineNumber:476}},n))))}}t.a=Q},function(e,t,a){"use strict";var i=a(19),s=a(356),n=a(9),r=a(0),o=a.n(r),l=a(562),c="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\popupcontents\\PopupContents.jsx";class d extends o.a.PureComponent{render(){return o.a.createElement("div",{ref:"webpageview",className:"inner",__source:{fileName:c,lineNumber:13}},o.a.createElement(l.a,{hasFocus:this.props.hasFocus,__source:{fileName:c,lineNumber:14}}))}}var u=d,h=a(10),m=a(379),p=a(510),g=a(25),b=a(16),f=a(375),_=a(7),N=a(17),v=a.n(N),E=a(249),w=a(391),S=a(1),C=a(20),k="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\main\\popup.jsx";function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=[S.kThemeUseAnimation,S.kWindowsLinuxAltControls],A=Object(E.a)();class T extends o.a.PureComponent{constructor(e,t){super(e),y(this,"getActivePageState",()=>{const e=n.a.getActivePage();return{url:e.url,id:e.id,originUrl:e.originUrl,active:e.active,incognito:e.incognito,pendingUrl:e.pendingUrl,thumbnailUrl:e.getIn(["extData","thumbnail"]),favIconUrl:e.favIconUrl,title:e.title}}),y(this,"pageStoreChanged",()=>{this.setState(this.getActivePageState())}),y(this,"_onWindowStoreChanged",()=>{const e=this.context.vivaldiWindowId,t=b.a.getState().get(e);this.state.windowState!==t&&this.setState({windowState:t})}),y(this,"_onWindowLoaded",()=>{try{_.default.windows.get(this.context.vivaldiWindowId,e=>{e||console.warn("Couldn't find application window.")})}finally{this.context.removeEventListener("load",this._onWindowLoaded)}}),y(this,"updateDocumentTitle",(e,t)=>{const a=C.a.getDisplayTitleByUrl(e,t);a!==document.title&&(document.title=a)}),this.state={initialNativeView:h.a.get(S.kWindowsUseNativeDecoration),windowState:b.a.getState().get(t.vivaldiWindowId),...this.getActivePageState()}}componentDidMount(){this.windowStoreToken=b.a.addListener(this._onWindowStoreChanged),n.a.addChangeListener(this.pageStoreChanged),Object(w.a)(),this.context.addEventListener("load",this._onWindowLoaded),this.detachFocusableEvents=Object(f.a)(this.context.document)}componentWillUnmount(){this.detachFocusableEvents(),this.context.removeEventListener("load",this._onWindowLoaded),Object(w.b)(),n.a.removeChangeListener(this.pageStoreChanged),this.windowStoreToken.remove()}render(){const e=b.a.isPopup(this.context.vivaldiWindowId),{windowState:t}=this.state,a=Object(b.b)(t),i={popup:!0,"animation-on":this.props.prefValues[S.kThemeUseAnimation],"animation-off":!this.props.prefValues[S.kThemeUseAnimation],hasfocus:t.active,isblurred:!t.active,native:this.state.initialNativeView,alt:this.props.prefValues[S.kWindowsLinuxAltControls],win10:navigator.appVersion.includes("Windows NT 10"),"mac-fullscreen-hover":t.fullscreenMenubarShown&&b.a.isActive(this.context.vivaldiWindowId),[this.props.themeBg]:!0,[this.props.highlightBg]:!0,[this.props.accentBg]:!0,"address-top":!0,[A]:!0,[a]:!0};return this.updateDocumentTitle(this.state.url,this.state.title),o.a.createElement("div",{id:"browser",className:v()(i),lang:_.default.i18n.getUILanguage(),__source:{fileName:k,lineNumber:160}},o.a.createElement("div",{id:"header",__source:{fileName:k,lineNumber:165}},o.a.createElement(m.a,{tabPosition:"none",keyAccess:-1,isPopupWindow:e,__source:{fileName:k,lineNumber:166}})),e&&o.a.createElement("div",{id:"main",__source:{fileName:k,lineNumber:174}},o.a.createElement(p.a,{showNavigationButtons:!1,readonly:!0,url:this.state.url,id:this.state.id,originUrl:this.state.originUrl,active:this.state.active,incognito:this.state.incognito,pendingUrl:this.state.pendingUrl,thumbnailUrl:this.state.thumbnailUrl,favIconUrl:this.state.favIconUrl,title:this.state.title,__source:{fileName:k,lineNumber:175}}),o.a.createElement(u,{hasFocus:t.active,__source:{fileName:k,lineNumber:188}})))}}y(T,"contextType",g.a);t.a=Object(s.b)(Object(i.a)(T,O))},function(e,t,a){"use strict";var i=a(19),s=a(40),n=a(0),r=a.n(n),o=a(2),l=a(17),c=a.n(l),d=a(5),u=a(13),h=a(1),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountPopup.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends r.a.Component{constructor(e){super(e),p(this,"attachListeners",()=>{d.a.windowPrivate.onWindowCreated.addListener(this.onWindowUpdated),d.a.windowPrivate.onWindowClosed.addListener(this.onWindowUpdated)}),p(this,"detachListeners",()=>{d.a.windowPrivate.onWindowCreated.removeListener(this.onWindowUpdated),d.a.windowPrivate.onWindowClosed.removeListener(this.onWindowUpdated)}),p(this,"onWindowUpdated",()=>{d.a.runtimePrivate.hasGuestSession(e=>{this.state&&this.setState({hasGuestSession:e})})}),p(this,"getAllProfileImages",()=>{d.a.runtimePrivate.getUserProfileImages(e=>{this.setState({profileImages:e})})}),p(this,"openNamedProfile",e=>{d.a.runtimePrivate.openNamedProfile(e,t=>{t||console.warn("Failed to open profile: "+e),this.props.hidePopup()})}),p(this,"toggleGuestProfile",()=>{this.state.hasGuestSession?s.a.closeGuestSession():s.a.openGuestWindow(),this.props.hidePopup()}),p(this,"managePeople",()=>{this.setState({accountState:"list"})}),p(this,"manageUser",()=>{this.props.isLoggedIn?s.a.showSettings("sync"):this.setState({accountState:"edit"})}),p(this,"exitUser",()=>{s.a.closeActiveProfile()}),p(this,"getFormattedName_",()=>this.props.accountInfo.username&&this.props.isLoggedIn?r.a.createElement("div",{className:"profile-name",__source:{fileName:m,lineNumber:152}},r.a.createElement("div",{className:"active-sync-item-label",__source:{fileName:m,lineNumber:153}},Object(o.a)("Logged in as"),r.a.createElement("br",{__source:{fileName:m,lineNumber:154}})),r.a.createElement("div",{__source:{fileName:m,lineNumber:156}},this.props.accountInfo.username)):this.props.activeProfile.name),p(this,"selectActiveProfileImage",(e,t)=>{this.setState({activeImageIndex:e,activeImageUrl:t})}),p(this,"goBack",()=>{let e="none";"info"===this.state.accountState&&(e="list"),this.state&&this.setState({accountState:e,editedName:this.props.activeProfile.name,activeImageIndex:this.props.activeProfile.imageIndex,canRemoveActive:!1})}),p(this,"onSave",()=>{let e=!0;if("edit"===this.state.accountState){if(this.state.editedName.length){const t=this.state.hasDesktopShortcut!==this.state.createDesktopShortcut||this.state.activeImageIndex!==this.props.activeProfile.imageIndex;d.a.runtimePrivate.updateActiveProfile(this.state.editedName,this.state.activeImageIndex,t?this.state.createDesktopShortcut:void 0,t=>{e=t})}}else"new"===this.state.accountState&&this.state.suggestedName.length&&d.a.runtimePrivate.createProfile(this.state.suggestedName,this.state.activeImageUrl,this.state.createDesktopShortcut,t=>{e=t});this.props.hidePopup&&e&&this.props.hidePopup()}),p(this,"onCancel",()=>{this.goBack()}),p(this,"onSignin",()=>{s.a.showSettings("sync"),this.props.hidePopup&&this.props.hidePopup()}),p(this,"createProfile",()=>{this.setState({accountState:"new",activeImageIndex:0})}),p(this,"showProfileInfo",(e,t)=>{this.setState({accountState:"info",selectedProfilePath:e}),t.preventDefault(),t.stopPropagation(),d.a.runtimePrivate.getProfileStatistics(e,e=>{e.map(e=>{switch(e.category){case"Autofill":e.category=Object(o.a)("Autofill");break;case"Bookmarks":e.category=Object(o.a)("Bookmarks");break;case"Passwords":e.category=Object(o.a)("Passwords");break;case"BrowsingHistory":e.category=Object(o.a)("Browsing History")}}),this.setState({profileStats:e})})}),p(this,"confirmRemoval",()=>{this.setState({canRemoveActive:!0})}),p(this,"removeProfile",()=>{d.a.runtimePrivate.deleteProfile(this.state.selectedProfilePath,e=>{e&&this.goBack()})}),p(this,"handleNameInput",e=>{"new"===this.state.accountState?this.setState({suggestedName:e.target.value}):this.setState({editedName:e.target.value})}),p(this,"changeDesktopShortcut",e=>{this.setState({createDesktopShortcut:e.currentTarget.checked})}),p(this,"handleFocus",e=>{e.currentTarget.select()}),p(this,"renderNavigationBack",()=>{const e=Object(o.a)("profiles","Back");return r.a.createElement("button",{key:"back",type:"button",title:e,className:"nav-back",onClick:this.goBack,dangerouslySetInnerHTML:{__html:u.cb.medium+e},__source:{fileName:m,lineNumber:293}})}),p(this,"renderDialogHeader",()=>{let e;switch(this.state.accountState){case"new":e=Object(o.a)("Create New Person");break;case"info":break;default:e=Object(o.a)("Edit Person")}return e?r.a.createElement("div",{className:"profile-section-header",__source:{fileName:m,lineNumber:318}},e):null}),p(this,"renderNameEdit",()=>{const e="new"===this.state.accountState?this.state.suggestedName:this.state.editedName;return r.a.createElement("label",{className:"section",__source:{fileName:m,lineNumber:326}},r.a.createElement("input",{type:"text",key:"profilename",name:"name",placeholder:Object(o.a)("profiles","Name"),onChange:this.handleNameInput,value:e,onFocus:this.handleFocus,autoFocus:!0,__source:{fileName:m,lineNumber:327}}))}),p(this,"renderSaveCancel",()=>r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:m,lineNumber:340}},r.a.createElement("input",{type:"submit",className:"primary",value:"new"===this.state.accountState?Object(o.a)("Add Person"):Object(o.a)("Save"),__source:{fileName:m,lineNumber:341}}),r.a.createElement("input",{type:"button",onClick:this.onCancel,value:Object(o.a)("Cancel"),__source:{fileName:m,lineNumber:345}}))),p(this,"renderProfileInfo",()=>{const e=[],t=this.props.allProfiles.filter(e=>e.path===this.state.selectedProfilePath);return t&&t[0]&&e.push(r.a.createElement("div",{className:"profile-details",key:"apv_details",__source:{fileName:m,lineNumber:357}},r.a.createElement("div",{className:"profile-image",style:{backgroundImage:`url(${t[0].image})`},__source:{fileName:m,lineNumber:358}}),r.a.createElement("div",{className:"profile-name",__source:{fileName:m,lineNumber:361}},t[0].name))),this.state.profileStats.forEach((t,a)=>{e.push(r.a.createElement("div",{key:t.category,className:"profile-stat-row",key:"apv_profiles_"+a,__source:{fileName:m,lineNumber:369}},r.a.createElement("div",{className:"profile-category",__source:{fileName:m,lineNumber:372}},t.category),r.a.createElement("div",{className:"profile-count",__source:{fileName:m,lineNumber:375}},t.count)))}),this.state.canRemoveActive&&e.push(r.a.createElement("p",{className:"alert",key:"apv_alert",__source:{fileName:m,lineNumber:383}},Object(o.a)("You are about to remove the active person. All profile data will be deleted and cannot be restored. Do you still want to proceed?"))),e.push(r.a.createElement("input",{type:"button",key:"apv_button",className:"danger remove-person-button",onClick:t[0].active&&!this.state.canRemoveActive?this.confirmRemoval:this.removeProfile,value:Object(o.a)("Remove Person"),__source:{fileName:m,lineNumber:389}})),e}),p(this,"renderSelectableProfileImages",()=>{const e=this.state.profileImages.map(e=>{const t=c()({"avatarbox-image":!0,"avatarbox-selected":this.state.activeImageIndex===e.index});return r.a.createElement("button",{key:e.index,title:e.name,type:"button",className:"avatarbox",onClick:this.selectActiveProfileImage.bind(this,e.index,e.image),__source:{fileName:m,lineNumber:410}},r.a.createElement("div",{className:t,style:{backgroundImage:`url(${e.image})`},__source:{fileName:m,lineNumber:417}}))});return r.a.createElement("div",{className:"avatarlist",__source:{fileName:m,lineNumber:423}},e)}),p(this,"renderCreateProfileShortcut",()=>this.state.canCreateDesktopShortcut?r.a.createElement("label",{__source:{fileName:m,lineNumber:429}},r.a.createElement("input",{className:"dialog-checkbox",checked:this.state.createDesktopShortcut,onChange:this.changeDesktopShortcut,type:"checkbox",__source:{fileName:m,lineNumber:430}}),r.a.createElement("span",{__source:{fileName:m,lineNumber:434}},Object(o.a)("Create Desktop Shortcut"))):null),p(this,"renderAllProfiles",()=>{const e=[];return this.props.allProfiles.forEach(t=>{e.push(r.a.createElement("button",{className:"account-item-large",key:t.path,title:t.name,onClick:this.showProfileInfo.bind(this,t.path),tabIndex:this.props.prefValues[h.kKeyboardTabToAll],autoFocus:-1!==this.props.prefValues[h.kKeyboardTabToAll],__source:{fileName:m,lineNumber:445}},r.a.createElement("img",{src:t.image,__source:{fileName:m,lineNumber:453}}),r.a.createElement("span",{className:"profile-name",__source:{fileName:m,lineNumber:454}},t.name)))}),e}),p(this,"renderActiveProfileHeader",()=>{let e=this.props.accountInfo.pictureUrl;e&&this.props.isLoggedIn||(e=this.props.activeProfile.image);const t=[];return t.push(r.a.createElement("div",{className:"account-item active-profile",key:"active",onClick:this.manageUser,__source:{fileName:m,lineNumber:468}},r.a.createElement("img",{src:e,__source:{fileName:m,lineNumber:470}}),r.a.createElement("div",{className:"profile-name",__source:{fileName:m,lineNumber:471}},this.getFormattedName_()),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:u.eb.medium},__source:{fileName:m,lineNumber:472}}))),this.props.isLoggedIn||t.push(r.a.createElement("input",{type:"button",key:"signin",onClick:this.onSignin,value:Object(o.a)("Sign in to Sync"),autoFocus:!0,__source:{fileName:m,lineNumber:477}})),t}),p(this,"renderInActiveProfiles",()=>{const e=this.props.allProfiles.filter(e=>!e.active),t=[];return e.forEach(e=>{t.push(r.a.createElement("button",{className:"account-item",key:e.path,title:e.name,onClick:this.openNamedProfile.bind(this,e.path),__source:{fileName:m,lineNumber:494}},r.a.createElement("img",{src:e.image,__source:{fileName:m,lineNumber:500}}),r.a.createElement("span",{className:"profile-name",__source:{fileName:m,lineNumber:501}},e.name)))}),t}),p(this,"renderGuestEntry",()=>{const e=this.state.hasGuestSession?Object(o.a)("Exit Guest Session"):Object(o.a)("Open Guest Window");return r.a.createElement("button",{className:"account-item",key:"guest",onClick:this.toggleGuestProfile,title:e,dangerouslySetInnerHTML:{__html:u.tb.medium+e},__source:{fileName:m,lineNumber:513}})}),p(this,"renderManagePeople",()=>{const e=Object(o.a)("Manage People");return r.a.createElement("button",{className:"account-item",key:"manage",onClick:this.managePeople,title:e,dangerouslySetInnerHTML:{__html:u.tb.medium+e},__source:{fileName:m,lineNumber:525}})}),p(this,"renderExitUser",()=>{const e=Object(o.a)("Exit $1",[this.props.activeProfile.name]);return r.a.createElement("button",{className:"account-item",key:"exit",onClick:this.exitUser,title:e,dangerouslySetInnerHTML:{__html:u.hc+e},__source:{fileName:m,lineNumber:538}})}),this.state={hasGuestSession:!1,accountState:"none",editedName:e.activeProfile.name,suggestedName:"",activeImageIndex:e.activeProfile.imageIndex,activeImageUrl:e.activeProfile.image,profileImages:[],profileStats:[],selectedProfilePath:"",hasDesktopShortcut:!1,createDesktopShortcut:!1,canCreateDesktopShortcut:!0,canRemoveActive:!1}}componentDidMount(){this.attachListeners(),this.onWindowUpdated(),this.getAllProfileImages(),d.a.runtimePrivate.getProfileDefaults(e=>{this.setState({suggestedName:e})}),d.a.runtimePrivate.hasDesktopShortcut((e,t)=>{this.setState({hasDesktopShortcut:e,createDesktopShortcut:e,canCreateDesktopShortcut:t})})}componentWillUnmount(){this.detachListeners()}render(){return"edit"===this.state.accountState||"new"===this.state.accountState?r.a.createElement("form",{className:"account-dialog",onSubmit:this.onSave,__source:{fileName:m,lineNumber:553}},this.renderNavigationBack(),this.renderDialogHeader(),this.renderNameEdit(),this.renderSelectableProfileImages(),this.renderCreateProfileShortcut(),this.renderSaveCancel()):"list"===this.state.accountState?r.a.createElement("div",{className:"account-dialog",__source:{fileName:m,lineNumber:564}},this.renderNavigationBack(),r.a.createElement("div",{className:"account-listing-large",__source:{fileName:m,lineNumber:566}},this.renderAllProfiles()),r.a.createElement("footer",{className:"dialog-footer",__source:{fileName:m,lineNumber:569}},r.a.createElement("input",{type:"submit",className:"primary",onClick:this.createProfile,value:Object(o.a)("Add Person"),__source:{fileName:m,lineNumber:570}}))):"info"===this.state.accountState?r.a.createElement("div",{className:"account-dialog",__source:{fileName:m,lineNumber:579}},this.renderNavigationBack(),this.renderDialogHeader(),r.a.createElement("div",{className:"profile-stat",__source:{fileName:m,lineNumber:582}},this.renderProfileInfo())):this.props.activeProfile.guest?r.a.createElement("div",{className:"account-dialog",__source:{fileName:m,lineNumber:589}},this.renderInActiveProfiles(),this.renderGuestEntry()):r.a.createElement("div",{className:"account-dialog",__source:{fileName:m,lineNumber:595}},r.a.createElement("header",{__source:{fileName:m,lineNumber:596}},this.renderActiveProfileHeader()),r.a.createElement("div",{className:"popup-scrollarea",__source:{fileName:m,lineNumber:599}},this.renderInActiveProfiles(),this.renderGuestEntry(),this.renderManagePeople(),this.renderExitUser()))}}var b=Object(i.a)(g,[h.kKeyboardTabToAll]),f=a(26),_=a(101),N="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AccountButton.jsx";function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E extends r.a.PureComponent{constructor(...e){super(...e),v(this,"state",{popupVisible:!1,activeProfile:void 0,allProfiles:[],isLoggedIn:_.a.getState().hasToken,accountInfo:_.a.getState().accountInfo}),v(this,"profilesUpdated",()=>{d.a.runtimePrivate.getUserProfiles(0,0,e=>{const t=e.find(e=>!0===e.active);this.setState({allProfiles:e}),t&&this.setState({activeProfile:t})})}),v(this,"onVivaldiAccountChange",()=>{const e=_.a.getState();this.setState({isLoggedIn:e.hasToken&&e.isReady,accountInfo:e.accountInfo})}),v(this,"togglePopup",()=>{this.setState(e=>({popupVisible:!e.popupVisible}))}),v(this,"hidePopup",()=>{this.setState({popupVisible:!1})})}componentDidMount(){d.a.runtimePrivate.onProfilesUpdated.addListener(this.profilesUpdated),this.profilesUpdated(),this.vivaldiAccountStoreToken=_.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange()}componentWillUnmount(){d.a.runtimePrivate.onProfilesUpdated.removeListener(this.profilesUpdated)}render(){let e=this.state.accountInfo.username,t=this.state.accountInfo.pictureUrl;const a=this.state.activeProfile;return a?(a.guest?(a.image=t="/resources/contact-person.png",a.name=e=Object(o.a)("Guest User")):this.state.isLoggedIn||(e=a.name,t=a.image),t||(t="/resources/contact-person.png"),r.a.createElement(f.a,{imagePath:t,tooltip:e,onClick:this.togglePopup,popupPosition:this.props.popupPosition,hidePopup:this.hidePopup,isPopupVisible:this.state.popupVisible,className:"button-circularimage button-cropimage profile-popup",popupWidth:240,size:this.props.size,__source:{fileName:N,lineNumber:98}},r.a.createElement(b,{activeProfile:a,allProfiles:this.state.allProfiles,hidePopup:this.hidePopup,isLoggedIn:this.state.isLoggedIn,accountInfo:this.state.accountInfo,__source:{fileName:N,lineNumber:109}}))):null}}t.a=E},function(e,t,a){"use strict";var i=a(76),s=a(40),n=a(110),r=a(0),o=a.n(r),l=a(2),c=a(119),d=a(5),u=a(21),h=a(13),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentPopup.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends o.a.PureComponent{constructor(...e){super(...e),p(this,"handleClickOutside",e=>{this.props.onPopupClosed(e)}),p(this,"loadBlockedContent",()=>{const e=i.a.getActiveWebView();e&&e.allowBlockedInsecureContent(),n.a.resetPageHasBlockedContent(this.props.pageId)}),p(this,"allowCookiesContent",()=>{const e=new URL(this.props.url).origin;d.a.utilities.setContentSettings({type:"cookies",primaryPattern:e+"/*",secondaryPattern:"",value:"allow",incognito:!1}),n.a.resetPageHasBlockedContent(this.props.pageId)}),p(this,"openManageCookies",()=>{s.a.showSettings("privacy")})}render(){return o.a.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:m,lineNumber:103}},o.a.createElement("header",{className:"addressfield-popup-header blocked-content",__source:{fileName:m,lineNumber:104}},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.xb.small},__source:{fileName:m,lineNumber:105}}),o.a.createElement("h1",{__source:{fileName:m,lineNumber:108}},Object(l.a)("Blocked Content"))),o.a.createElement("div",{className:"addressfield-popup-content blocked-content",__source:{fileName:m,lineNumber:111}},(()=>{let e=Object(u.Map)();this.props.blockedPageContent.map(t=>{let a=e.get(t);e=a?e.set(t,++a):e.set(t,1)});const t=[];for(const[a,i]of e)switch(a){case"ads":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:m,lineNumber:64}},Object(l.a)("Advertisements on this page are flagged as abusive and blocked.")));break;case"cookies":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:m,lineNumber:71}},Object(l.a)("$1 cookie is blocked","$1 cookies are blocked",[i]),o.a.createElement("div",{className:"clickable",onClick:this.allowCookiesContent,__source:{fileName:m,lineNumber:73}},Object(l.a)("Allow cookies for this site"))));break;case"mixed-script":t.push(o.a.createElement("div",{className:"blocked-section",key:a,__source:{fileName:m,lineNumber:81}},Object(l.a)("$1 unsafe resource is blocked","$1 unsafe resources are blocked",[i]),o.a.createElement("div",{className:"clickable",onClick:this.loadBlockedContent,__source:{fileName:m,lineNumber:87}},Object(l.a)("Load the unsafe resource","Load the unsafe resources",[i]))));break;default:console.warn("Unhandled blocked content $1",a)}return t})()),o.a.createElement("footer",{className:"dialog-footer",__source:{fileName:m,lineNumber:115}},this.props.blockedPageContent.contains("cookies")&&o.a.createElement("input",{type:"button",onClick:this.openManageCookies,value:Object(l.a)("Manage Cookies"),__source:{fileName:m,lineNumber:117}}),o.a.createElement("input",{type:"button",onClick:this.props.onPopupClosed,value:Object(l.a)("Close"),__source:{fileName:m,lineNumber:123}})))}}var b=Object(c.a)(g),f=a(26),_="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\BlockedContentNotificator.jsx";function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class v extends o.a.Component{constructor(...e){super(...e),N(this,"state",{popupVisible:!1}),N(this,"onTogglePopupOpen",e=>{e.preventDefault(),this.setState(e=>({popupVisible:!e.popupVisible}))}),N(this,"onClosePopup",()=>{this.setState({popupVisible:!1})})}render(){return o.a.createElement("div",{className:"button-toolbar addressfield-popup-container",__source:{fileName:_,lineNumber:45}},o.a.createElement(f.a,{image:h.xb.small,tooltip:Object(l.a)("Content has been blocked."),onClick:this.onTogglePopupOpen,popupPosition:this.props.position,className:"button-addressfield permission-popup is-blocking",hidePopup:this.onClosePopup,isPopupVisible:this.state.popupVisible,popupWidth:240,__source:{fileName:_,lineNumber:46}},o.a.createElement(b,{pageId:this.props.pageId,url:this.props.url,onPopupClosed:this.onClosePopup,blockedPageContent:this.props.blockedPageContent,__source:{fileName:_,lineNumber:55}})))}}t.a=v},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(19),r=a(52),o=a(29),l=a.n(o),c=a(25),d=a(17),u=a.n(d),h=a(119),m=a(5),p=a(1);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=[p.kAddressBarPosition];class f extends s.a.Component{constructor(...e){super(...e),g(this,"state",{width:25,height:25,hasLoadedOnce:!1}),g(this,"popupContainer",s.a.createRef()),g(this,"webviewelm",null),g(this,"attachListeners",()=>{this.webviewelm&&(this.webviewelm.addEventListener("sizechanged",this.onSizeChanged),this.webviewelm.addEventListener("close",this.onClose),this.webviewelm.addEventListener("newwindow",this.onNewWindow),this.webviewelm.addEventListener("loadstop",this.onLoadStop)),r.a.bind("esc",this.onCloseWithKeyboard)}),g(this,"focusPopup",()=>{const e=document.getElementById("extensionPopupId");null!==e&&e.focus()}),g(this,"detachListeners",()=>{this.webviewelm&&(this.webviewelm.removeEventListener("sizechanged",this.onSizeChanged),this.webviewelm.removeEventListener("close",this.onClose),this.webviewelm.removeEventListener("newwindow",this.onNewWindow),this.webviewelm.removeEventListener("loadstop",this.onLoadStop)),r.a.unbind("esc",this.onCloseWithKeyboard)}),g(this,"handleClickOutside",e=>{this.props.popupWantsToClose()}),g(this,"recreateWebView",()=>{this.detachListeners(),this.webviewelm&&(this.webviewelm.parentNode.removeChild(this.webviewelm),this.webviewelm=null),m.a.zoom.getVivaldiUIZoom(e=>{const t=this.popupContainer.current;if(!t)return;let a=800,i=600;e>=1&&(a=Math.round(800*e),i=Math.round(600*e));const s=document.createElement("webview");s.setAttribute("autosize","on"),s.setAttribute("minwidth",25),s.setAttribute("minheight",25),s.setAttribute("maxwidth",a),s.setAttribute("maxheight",i),s.setAttribute("partition","persist:"+this.props.extensionId),s.setAttribute("class","ignore-react-onclickoutside"),s.setAttribute("vivaldi_view_type","extension_popup"),s.setAttribute("src",this.props.popupPage),l.a.findDOMNode(t).appendChild(s),this.webviewelm=s,this.attachListeners()})}),g(this,"onSizeChanged",e=>{this.setState({width:e.newWidth,height:e.newHeight})}),g(this,"onLoadStop",e=>{this.setState({hasLoadedOnce:!0}),setTimeout(e=>{this.webviewelm&&this.webviewelm.focus()},50)}),g(this,"onNewWindow",e=>{e.window.accept(this.context.vivaldiWindowId+";1")}),g(this,"onCloseWithKeyboard",()=>{this.setState({hasLoadedOnce:!1}),this.props.popupWantsToClose(),this.focusPopup()}),g(this,"onClose",()=>{this.setState({hasLoadedOnce:!1}),this.props.popupWantsToClose()})}componentWillUnmount(){this.detachListeners(),this.webviewelm=null}UNSAFE_componentWillReceiveProps(e){!0===this.props.popupVisible&&!1===e.popupVisible&&this.setState({hasLoadedOnce:!1})}UNSAFE_componentWillUpdate(e,t){!0===e.popupVisible?this.props.enableOnClickOutside():!1===e.popupVisible&&this.props.disableOnClickOutside()}render(){let e=0,t=0;if(this.props.popupRect){const a=this.props.popupRect;e="bottom"===this.props.prefValues[p.kAddressBarPosition]?a.top-parseInt(this.state.height,10)-10+6:a.bottom+10-6,t=a.left-this.state.width+a.width/2+17}const a=this.state.hasLoadedOnce&&this.props.popupVisible;return s.a.createElement("div",{className:u()({"extension-popup":!0,bottom:"bottom"===this.props.prefValues[p.kAddressBarPosition],top:"top"===this.props.prefValues[p.kAddressBarPosition],hidden:!a}),style:{height:this.state.height,width:this.state.width,position:"fixed",left:t,top:e,visibility:a?"visible":"hidden"},ref:this.popupContainer,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionPopup.jsx",lineNumber:183}})}}g(f,"contextType",c.a);var _=Object(n.a)(Object(h.a)(f),b),N=a(96),v=a(40),E=a(12),w=a(26),S=a(27),C=a(16),k=a(2),y=a(7),O=a(60),A=a(13),T="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\extensions\\ExtensionActionToolbar.jsx";function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=[p.kAddressBarPosition],x=["mousedown","pointerdown","touchstart"],M="vivaldi/x-button-extension";class L extends i.PureComponent{constructor(...e){super(...e),D(this,"state",{extensions:[],popupId:null,popupRect:null,popupPage:null,popupVisible:!1,extensionPopup:!1,shouldToggleHiddenExtensionsOnly:!1,shouldExpandHiddenExtensions:!0,shouldRenderHiddenExtensionsOnToolbar:!1,shouldRenderAllExtensionsOnToolbar:!1,toggleArrowIcon:A.k.large,isToggleArrowPointingRight:!0}),D(this,"_extensionActionShortcuts",[]),D(this,"_removedIdToIndex",{}),D(this,"_shortcutCallbacks",[]),D(this,"_toolbarButtons",[]),D(this,"extensionButtonRef",i.createRef()),D(this,"extensionActionPopupRef",i.createRef()),D(this,"getExtensionIndex",e=>this.state.extensions.findIndex(t=>t.id===e)),D(this,"onIconLoaded",({badgeIcon:e,id:t})=>{const a=this.getExtensionIndex(t);-1!==a&&this.setState(t=>{const i=t.extensions.slice();return i[a]&&(i[a].badgeIcon=e),{extensions:i}})}),D(this,"assignShortcut",(e,t,a)=>{t&&(this._extensionActionShortcuts[a]=t,this._shortcutCallbacks[a]=()=>{const t=this._toolbarButtons[a];t&&this.onExtensionActionClicked(e,t.getRect())},r.a.bind(t.toLowerCase(),this._shortcutCallbacks[a]))}),D(this,"removeShortcut",(e,t)=>{e&&(r.a.unbind(e.toLowerCase(),this._shortcutCallbacks[t]),this._extensionActionShortcuts[t]="",delete this._shortcutCallbacks[t])}),D(this,"updateShortcut",(e,t,a)=>{(t||this._extensionActionShortcuts[a])&&(t&&!this._extensionActionShortcuts[a]?this.assignShortcut(e,t,a):!t&&this._extensionActionShortcuts[a]?this.removeShortcut(t,a):t!==this._extensionActionShortcuts[a]&&(this.removeShortcut(t,a),this.assignShortcut(e,t,a)))}),D(this,"onActionChanged",(e,t)=>{if(t&&t===C.a.getId()){const t=this.getExtensionIndex(e.id);-1!==t&&this.setState(a=>{const i=a.extensions.slice();return i[t]=e,{extensions:i}},this.updateShortcut.bind(this,e.id,e.keyboardShortcut,t))}}),D(this,"onActionAdded",e=>{this.setState(t=>{const a=this._removedIdToIndex[e.id];delete this._removedIdToIndex[e.id];const i=t.extensions.slice();return"number"==typeof a&&a<t.extensions.length?i.splice(a,0,e):i.push(e),{extensions:i}},this.saveBrowserOrder)}),D(this,"onActionRemoved",e=>{const t=this.getExtensionIndex(e.id);-1!==t&&this.setState(a=>{this._removedIdToIndex[e.id]=t;const i=a.extensions.slice();return i.splice(t,1),{extensions:i}},this.saveBrowserOrder)}),D(this,"onCommandAdded",(e,t)=>{const a=this.getExtensionIndex(e);this.assignShortcut(e,t,a)}),D(this,"onCommandRemoved",(e,t)=>{const a=this.getExtensionIndex(e);this.removeShortcut(t,a)}),D(this,"onExtensionActionClicked",(e,t,a)=>{const i=this.getExtensionIndex(e),s=this.state.extensions[i];if(s&&!s.visible){let e;a&&a.target instanceof HTMLElement&&(e=a.target);const t="top"===this.props.prefValues[p.kAddressBarPosition]?"bottomLeft":"topRight";return void this.getContextMenu(s).then(a=>{Object(O.a)(this.context.vivaldiWindowId,a,void 0,t,e)()})}m.a.extensionActionUtils.executeExtensionAction(e,this.context.vivaldiWindowId,a=>{a&&(this.setState(i=>({popupVisible:!i.popupVisible,popupPage:a,popupRect:t,popupId:e})),this.state.popupVisible&&this.extensionActionPopupRef.current&&this.extensionActionPopupRef.current.recreateWebView())})}),D(this,"popupWantsToClose",()=>{this.setState({popupVisible:!1}),this.extensionButtonRef.current&&this.extensionButtonRef.current.focusPopup()}),D(this,"onDrop",(e,t,a)=>{if(!this._dragOverId)return;let i=this.getExtensionIndex(this._dragOverId);if(this._dragOverId=null,-1===i)return;const s=e.dataTransfer.getData(M);if(!s)return;const n=this.getExtensionIndex(s);if(-1===n||n===i)return;if("right"===t&&i++,n===i)return;const r=this.state.extensions[n],o=this.state.extensions.slice();o.splice(n,1),n<i&&i--,o.splice(i,0,r),this.setState(e=>({extensions:o}),this.saveBrowserOrder)}),D(this,"onDragStart",e=>{}),D(this,"onDragEnter",(e,t)=>{this._dragOverId=t}),D(this,"executeExtensionAction",(e,t)=>{t.target instanceof HTMLElement&&(this.state.popupId!==e&&this.setState({popupVisible:!1,popupPage:null,popupRect:null,popupId:null}),this.onExtensionActionClicked(e,t.target.getBoundingClientRect(),t))}),D(this,"removeExtension",e=>{m.a.extensionActionUtils.removeExtension(e,this.context.vivaldiWindowId)}),D(this,"showOptionsPage",e=>{m.a.extensionActionUtils.showExtensionOptions(e,this.context.vivaldiWindowId)}),D(this,"toggleVisiblity",e=>{this.state.extensionPopup&&this.hideHiddenExtensionsPopup(),m.a.extensionActionUtils.toggleBrowserActionVisibility(e)}),D(this,"isExtensionAvailable",e=>!(C.a.isIncognito(this.context.vivaldiWindowId)&&!e.allowInIncognito)),D(this,"getHiddenExtensions",()=>this.state.extensions.filter(e=>e.actionIsHidden)),D(this,"hasHiddenExtensions",()=>this.state.extensions.some(e=>e.actionIsHidden)),D(this,"toggleHiddenExtensionsPopup",()=>{this.setState(e=>({extensionPopup:!e.extensionPopup})),this.focusPopup()}),D(this,"hideHiddenExtensionsPopup",()=>{this.setState({extensionPopup:!1})}),D(this,"focusPopup",()=>{this.extensionButtonRef.current&&this.extensionButtonRef.current.focusPopup()}),D(this,"onCustomMenuSelected",(e,t)=>{m.a.extensionActionUtils.executeMenuAction(e,this.context.vivaldiWindowId,t,e=>{y.default.runtime.lastError&&y.default.runtime.lastError.message&&console.warn("Error invoking menu item action: "+y.default.runtime.lastError.message)})}),D(this,"getContextMenu",e=>new Promise((t,a)=>{const i=e.homepage||"https://chrome.google.com/webstore/detail/"+e.id,s=this.props.showHiddenExtensionsButton;m.a.extensionActionUtils.getExtensionMenu(e.id,n=>{y.default.runtime.lastError&&a(y.default.runtime.lastError);const r=n.map(t=>{const a={name:t.name,handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked};return t.submenu&&(a.items=t.submenu.map(t=>({name:t.name,handler:this.onCustomMenuSelected.bind(this,e.id,t.id),visible:t.visible,mnemonic:!1,checked:t.checked}))),a}),o=[{name:e.name||"",handler:E.a.openURL.bind(this,i)},...r.length>0?[{name:"---"},...r,{name:"---"}]:[],{name:Object(k.a)("Options"),handler:this.showOptionsPage.bind(this,e.id),visible:void 0!==e.optionspage&&""!==e.optionspage},{name:Object(k.a)("Remove Extension..."),handler:this.removeExtension.bind(this,e.id),visible:"componentAction"!==e.extensionType},...s?[{name:e.actionIsHidden?Object(k.a)("Show Button"):Object(k.a)("Hide Button"),handler:this.toggleVisiblity.bind(this,e.id),visible:!this.props.showToggleButton}]:[],{name:"---"},{name:Object(k.a)("Manage Extensions"),handler:v.a.showExtensions}];return t(o)})})),D(this,"toggleSwitcherOnToolbar",e=>{e?this.setState(e=>({shouldRenderAllExtensionsOnToolbar:!e.shouldRenderAllExtensionsOnToolbar})):this.setState(e=>({shouldRenderHiddenExtensionsOnToolbar:!e.shouldRenderHiddenExtensionsOnToolbar}))}),D(this,"switchToggleButton",()=>{this.props.showAllExtensionsButton?this.toggleSwitcherOnToolbar(!0):this.toggleSwitcherOnToolbar(!1),this.state.isToggleArrowPointingRight&&this.setState({toggleArrowIcon:A.l.large}),this.state.isToggleArrowPointingRight||this.setState({toggleArrowIcon:A.k.large}),this.setState(e=>({isToggleArrowPointingRight:!e.isToggleArrowPointingRight}))}),D(this,"renderExtensionToggleButton",()=>{const e=this.state.toggleArrowIcon,t=this.props.showAllExtensionsButton;return(this.hasHiddenExtensions()||t)&&(this.props.showToggleButton||this.state.extensions.length>0)?i.createElement(w.a,{tooltip:Object(k.a)("Toggle extensions"),onClick:()=>{this.switchToggleButton()},image:e,hidePopup:this.hideHiddenExtensionsPopup,__source:{fileName:T,lineNumber:540}}):null}),D(this,"renderHiddenExtensionInPopup",()=>{const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,a=this.getHiddenExtensions();return i.createElement(w.a,{image:A.j.large,tooltip:Object(k.a)("Show hidden extensions"),onClick:this.toggleHiddenExtensionsPopup,popupPosition:this.props.popupPosition,hidePopup:this.hideHiddenExtensionsPopup,isPopupVisible:this.state.extensionPopup,ref:this.extensionButtonRef,popupWidth:Math.min(34*a.length,442),className:"extensionPopupIcons",popupClassName:"extensionIconPopupMenu",hasLightArrow:!0,size:this.props.size,__source:{fileName:T,lineNumber:555}},i.createElement("div",{className:"toolbar toolbar-mainbar",__source:{fileName:T,lineNumber:570}},this.state.extensions.filter(a=>e?this.isExtensionAvailable:t?a.actionIsHidden&&this.isExtensionAvailable(a):void 0).map((e,t)=>{const a=this.getExtensionIndex(e.id);return i.createElement(w.a,{className:"ExtensionDropdownIcon extensionId",key:e.id,badgeText:e.badgeText,tooltip:e.name,tabIndex:0,imagePath:e.badgeIcon,ref:e=>{this._toolbarButtons[a]=e},onClick:this.executeExtensionAction.bind(this,e.id),menuPromise:this.getContextMenu.bind(this,e),dragImage:e.badgeIcon,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:M,mimeContent:e.id,onDrop:this.onDrop,__source:{fileName:T,lineNumber:584}})})))})}componentDidMount(){m.a.extensionActionUtils.onAdded.addListener(this.onActionAdded),m.a.extensionActionUtils.onRemoved.addListener(this.onActionRemoved),m.a.extensionActionUtils.onUpdated.addListener(this.onActionChanged),m.a.extensionActionUtils.onCommandAdded.addListener(this.onCommandAdded),m.a.extensionActionUtils.onCommandRemoved.addListener(this.onCommandRemoved),m.a.extensionActionUtils.onIconLoaded.addListener(this.onIconLoaded),m.a.extensionActionUtils.getToolbarExtensions(e=>{const t=S.a.getSync("EXTENSION_BUTTON_ORDER_BROWSER");e.sort((e,a)=>t.indexOf(e.id)-t.indexOf(a.id)),this.setState({extensions:e})})}componentWillUnmount(){m.a.extensionActionUtils.onAdded.removeListener(this.onActionAdded),m.a.extensionActionUtils.onRemoved.removeListener(this.onActionRemoved),m.a.extensionActionUtils.onUpdated.removeListener(this.onActionChanged),m.a.extensionActionUtils.onIconLoaded.removeListener(this.onIconLoaded),m.a.extensionActionUtils.onCommandAdded.removeListener(this.onCommandAdded),m.a.extensionActionUtils.onCommandRemoved.removeListener(this.onCommandRemoved)}saveBrowserOrder(){S.a.set({EXTENSION_BUTTON_ORDER_BROWSER:this.state.extensions.map(e=>e.id)})}render(){const e=this.props.showAllExtensionsButton,t=this.props.showHiddenExtensionsButton,a=this.state.shouldRenderAllExtensionsOnToolbar&&!this.props.renderInDropdown,s=this.state.shouldRenderHiddenExtensionsOnToolbar&&!this.props.renderInDropdown,n=this.state.extensions.filter(e=>!(C.a.isIncognito(this.context.vivaldiWindowId)&&!e.allowInIncognito));return i.createElement("div",{className:u()("toolbar",{"toolbar-mainbar":!0,"toolbar-extensions":!0,"toolbar-large":!0}),__source:{fileName:T,lineNumber:622}},n.filter(i=>t&&s||t&&!i.actionIsHidden||e&&a).map((e,a)=>{const s=e.badgeIcon?e.badgeIcon:"data:image/svg+xml;utf8,"+A.G,n={dragImage:s,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart,mimeType:M,mimeContent:e.id,onDrop:this.onDrop},r=this.getExtensionIndex(e.id);let o,l;return e.badgeIcon?(o=e.badgeText,l=e.badgeBackgroundColor):(o=e.name?e.name.charAt(0).toUpperCase():"",l=this.props.vivaldiSettings.BROWSER_COLOR_FG),i.createElement(w.a,I({key:e.id,badgeColor:l,badgeText:o,onClick:this.executeExtensionAction.bind(this,e.id),menuPromise:this.getContextMenu.bind(this,e),tooltip:e.badgeTooltip||e.name||Object(k.a)("Extension"),popupClassName:"extensionIconPopupMenu",size:this.props.size,className:u()(e.id,"ExtensionIcon","extensionId",{"ExtensionIcon--Hidden":t&&e.actionIsHidden}),menuOrigin:"bottomLeft",imagePath:s,ref:e=>{this._toolbarButtons[r]=e}},n,{__source:{fileName:T,lineNumber:660}}))}),n.length>0&&!this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.props.showHiddenExtensionsButton)&&this.renderExtensionToggleButton(),n.length>0&&this.props.renderInDropdown&&(this.props.showAllExtensionsButton||this.hasHiddenExtensions()&&this.props.showHiddenExtensionsButton)&&this.renderHiddenExtensionInPopup(),this.state.popupId&&i.createElement(_,{ref:this.extensionActionPopupRef,eventTypes:x,outsideClickIgnoreClass:"extensionId",popupVisible:this.state.popupVisible,popupPage:this.state.popupPage,popupRect:this.state.popupRect,extensionId:this.state.popupId,popupWantsToClose:this.popupWantsToClose,__source:{fileName:T,lineNumber:704}}))}}D(L,"contextType",c.a);t.a=Object(N.a)(Object(n.a)(L,P),["BROWSER_COLOR_FG"])},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(119),o="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerDialog.jsx";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.a.Component{constructor(...e){super(...e),l(this,"handleClickOutside",()=>{this.props.onDialogClosed()}),l(this,"onAllowBlockedClicked",(e,t)=>{t.preventDefault(),this.props.onPopupAllowed(e)}),l(this,"renderItem",e=>s.a.createElement("a",{className:"popupblocker-blocked-page",onClick:this.onAllowBlockedClicked.bind(this,e),key:e.targetUrl+e.timeStamp,title:e.targetUrl,href:e.targetUrl,__source:{fileName:o,lineNumber:29}},e.targetUrl)),l(this,"renderItems",e=>s.a.createElement("div",{className:"popupblocker-blocked-pages",__source:{fileName:o,lineNumber:41}},e.map(e=>this.renderItem(e)))),l(this,"onShouldBlockClicked",e=>{this.props.onShouldBlockClicked(e)}),l(this,"renderAlwaysBlockQuery",()=>s.a.createElement("section",{className:"dialog-footer",__source:{fileName:o,lineNumber:53}},s.a.createElement("label",{__source:{fileName:o,lineNumber:54}},s.a.createElement("input",{type:"radio",name:"blocked",value:"false",defaultChecked:!1!==this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!0),__source:{fileName:o,lineNumber:55}}),Object(n.a)("Block Popups")),s.a.createElement("label",{__source:{fileName:o,lineNumber:60}},s.a.createElement("input",{type:"radio",name:"blocked",value:"true",defaultChecked:!1===this.props.shouldBlockPopups,onChange:this.onShouldBlockClicked.bind(this,!1),__source:{fileName:o,lineNumber:61}}),Object(n.a)("Always Allow"))))}render(){return this.props.blockedPopups.size>0?s.a.createElement("div",{tabIndex:"0",className:"addressfield-popup",__source:{fileName:o,lineNumber:73}},s.a.createElement("header",{className:"addressfield-popup-header",__source:{fileName:o,lineNumber:75}},this.props.image&&s.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.image},__source:{fileName:o,lineNumber:77}}),s.a.createElement("h1",{__source:{fileName:o,lineNumber:79}},Object(n.a)("Blocked Popup Pages"))),s.a.createElement("div",{className:"addressfield-popup-content",__source:{fileName:o,lineNumber:81}},this.renderItems(this.props.blockedPopups)),this.renderAlwaysBlockQuery()):null}}var d=Object(r.a)(c),u=a(26),h=a(7),m=a(17),p=a.n(m),g=a(5),b=a(13),f="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\PopupBlockerNotificator.jsx";function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends s.a.Component{constructor(...e){super(...e),_(this,"state",{isDialogOpen:!1,shouldBlockPopups:!0}),_(this,"onNotificatorClicked",()=>{this.setState(e=>({isDialogOpen:!e.isDialogOpen}))}),_(this,"onDialogClosed",()=>{this.setState({isDialogOpen:!1})}),_(this,"onShouldBlockClicked",e=>{const t={primary_pattern:this.props.url,secondary_pattern:this.props.url,type:"popups",setting:e?"block":"allow"};g.a.settings.setContentSetting(t),this.setState({shouldBlockPopups:e})})}componentDidMount(){this.props.url&&h.default.contentSettings.popups.get({primaryUrl:this.props.url},e=>{if(h.default.runtime.lastError&&h.default.runtime.lastError.message)console.warn("ERROR getting content settings for popups. Original message:\n"+h.default.runtime.lastError.message);else if(e){var t="allow"!==e.setting;this.setState({shouldBlockPopups:t})}})}render(){var e={"button-addressfield":!0,"permission-popup":!0,"is-blocking":!0===this.state.shouldBlockPopups,"is-allowing":!1===this.state.shouldBlockPopups,"is-dialog-open":this.state.isDialogOpen};return s.a.createElement("div",{className:"button-toolbar addressfield-popup-container",__source:{fileName:f,lineNumber:87}},s.a.createElement(u.a,{tooltip:Object(n.a)("Blocked Popup Pages"),onClick:this.onNotificatorClicked,image:b.Db.small,popupPosition:this.props.popupPosition,hidePopup:this.onDialogClosed,isPopupVisible:this.state.isDialogOpen,className:p()(e),popupWidth:300,__source:{fileName:f,lineNumber:88}},s.a.createElement(d,{image:b.Db.medium,shouldBlockPopups:this.state.shouldBlockPopups,onShouldBlockClicked:this.onShouldBlockClicked,blockedPopups:this.props.blockedPopups,onPopupAllowed:this.props.onPopupAllowed,onDialogClosed:this.onDialogClosed,__source:{fileName:f,lineNumber:97}})))}}t.a=N},function(e,t,a){"use strict";var i=a(0),s=a.n(i);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends s.a.PureComponent{constructor(...e){super(...e),n(this,"state",{selectionStart:-1,selectionEnd:-1}),n(this,"inputField",s.a.createRef()),n(this,"focus",()=>{this.inputField.current&&this.inputField.current.focus()}),n(this,"select",()=>{this.inputField.current&&this.inputField.current.select()}),n(this,"blur",()=>{this.inputField.current&&this.inputField.current.blur()}),n(this,"onKeyPress",e=>{this.props.onKeyPress(e),this.props.typedValue+e.key===e.currentTarget.value&&this.props.onValueChange(e.currentTarget.value)}),n(this,"onChange",({currentTarget:e})=>{this.props.onValueChange(e.value||"")})}static getDerivedStateFromProps(e){const{typedValue:t,autocompleteValue:a}=e,{selectionStart:i,selectionEnd:s}=function(e,t){if(!e||!t)return{selectionStart:-1,selectionEnd:-1};if(!e.toLowerCase().startsWith(t.toLowerCase()))return{selectionStart:-1,selectionEnd:-1};const a=t.length,i=e.length;return a===i?{selectionStart:-1,selectionEnd:-1}:{selectionStart:a,selectionEnd:i}}(a,t);return{selectionStart:i,selectionEnd:s}}componentDidUpdate(e,t){const a=this.inputField.current;if(a){if(t.selectionStart!==this.state.selectionEnd){const e=this.state.selectionStart;if(-1===e)return;a.selectionStart!==e&&(a.selectionStart=e)}if(t.selectionEnd!==this.state.selectionEnd){const e=this.state.selectionEnd;if(-1===e)return;a.selectionEnd!==e&&(a.selectionEnd=e)}this.props.typedValue!==this.props.autocompleteValue&&(a.selectionDirection="backward")}}render(){return s.a.createElement("input",{ref:this.inputField,value:this.props.autocompleteValue,autoComplete:"off",spellCheck:"false",type:"text",autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onCompositionStart:this.props.onCompositionStart,onCompositionUpdate:this.props.onCompositionUpdate,onCompositionEnd:this.props.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onKeyDown:this.props.onKeyDown,onCut:this.props.onCut,onCopy:this.props.onCopy,onPaste:this.props.onPaste,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\InputElement.jsx",lineNumber:163}})}}var o=a(10),l=a(362),c=a(1);a.d(t,"a",(function(){return h}));function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(!e)return t;if("OMNI_RESULT_BOOKMARK_TITLE_EXACT"===e.type){return t+(e.title?e.title.substr(t.length):"")}if("OMNI_RESULT_BOOKMARK_NICKNAME"===e.type)return t+e.nickname.substring(t.length);e.url||"about:blank"!==e.title||(e.url="about:blank");const{url:a}=e,i=a.includes("://")?a.indexOf("://")+3:0,s=a.startsWith(t)?0:a.substr(i).toLowerCase().indexOf(t.toLowerCase())+i;return(a.substr(0,s)+t+a.substr(s+t.length)).substr(s)}class h extends s.a.PureComponent{constructor(...e){super(...e),d(this,"_suppressAutocomplete",!1),d(this,"isIMEOpen",!1),d(this,"selectedText",""),d(this,"urlInput",s.a.createRef()),d(this,"focus",()=>{this.urlInput.current&&this.urlInput.current.focus()}),d(this,"blur",()=>{this.urlInput.current&&this.urlInput.current.blur()}),d(this,"select",()=>{this.urlInput.current&&this.urlInput.current.select()}),d(this,"state",{typedValue:"",autocompleteValue:"",shouldAutocompleteValue:!0,autocompleteItem:void 0}),d(this,"_makeSubmit",e=>{const t={ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey},{typedValue:a}=this.state,i=this.state.autocompleteItem?this.state.autocompleteItem.url:this.state.autocompleteValue;this.props.onSubmit({autocompletedValue:i,typedValue:a},t)}),d(this,"onKeyDown",e=>{this.props.onKeyDown(e),"Enter"===e.key&&(e.altKey||e.ctrlKey||e.metaKey)?this._makeSubmit(e):"Backspace"===e.key&&this.isIMEOpen&&(this._suppressAutocomplete=!0)}),d(this,"onKeyPress",e=>{this.props.onKeyPress(e),"Enter"!==e.key&&13!==e.which||e.altKey||e.ctrlKey||this._makeSubmit(e)}),d(this,"onValueChange",e=>{const t=this.state.autocompleteValue;this.state.typedValue===e?this.setState({autocompleteValue:e,typedValue:e,autocompleteItem:void 0,shouldAutocompleteValue:!1}):this.setState(a=>({typedValue:e,shouldAutocompleteValue:!this.isIMEOpen&&(e.length>=a.typedValue.length||t===this.selectedText)})),this.props.onValueChange(e)}),d(this,"onSelect",e=>{const{selectionStart:t,selectionEnd:a,value:i}=e.currentTarget;t===a&&this.setState({typedValue:i}),this.props.onSelect(e),this.selectedText=i.substring(t,a)}),d(this,"onBlur",e=>{this.state.typedValue!==this.state.autocompleteValue&&this.props.onValueChange(this.state.autocompleteValue),this.props.onBlur(e)}),d(this,"onCompositionStart",()=>{this.isIMEOpen=!0}),d(this,"onCompositionUpdate",()=>{this.isIMEOpen=!0}),d(this,"onCompositionEnd",e=>{const t=e.currentTarget.value;this.setState(e=>{const a=!this._suppressAutocomplete&&t.length>=e.typedValue.length;return this._suppressAutocomplete=!1,{typedValue:t,shouldAutocompleteValue:a}}),this.isIMEOpen=!1})}static getDerivedStateFromProps(e,t){if(!t.shouldAutocompleteValue||!e.value)return{autocompleteItem:void 0,autocompleteValue:e.value,shouldAutocompleteValue:!1};const a={autocompleteOnTitle:e.autocompleteOnTitle},{autocompleteValue:i,autocompleteItem:s}=function(e,t,{autocompleteOnTitle:a}){if(0===e.length)return{autocompleteItem:void 0,autocompleteValue:t};const i=Object(l.c)(t,e,{preferBookmarks:o.a.get(c.kAddressBarAutocompletePreferBookmarks),autocompleteOnTitle:a});return i?{autocompleteItem:i,autocompleteValue:u(i,t)}:{autocompleteItem:void 0,autocompleteValue:t}}(e.autocompleteData,e.value,a);return{typedValue:e.value,autocompleteItem:s,autocompleteValue:i}}componentDidUpdate(e,t){t.autocompleteValue!==this.state.autocompleteValue&&this.props.onAutocompleteValueChange(this.state.autocompleteValue)}render(){return s.a.createElement(r,{ref:this.urlInput,autocompleteValue:this.state.autocompleteValue,typedValue:this.state.typedValue,autoFocus:this.props.autoFocus,className:this.props.className,disabled:this.props.disabled,placeholder:this.props.placeholder,title:this.props.title,readOnly:this.props.readOnly,onBlur:this.onBlur,onFocus:this.props.onFocus,onSelect:this.onSelect,onCompositionStart:this.onCompositionStart,onCompositionUpdate:this.onCompositionUpdate,onCompositionEnd:this.onCompositionEnd,onClick:this.props.onClick,onContextMenu:this.props.onClick,onDragStart:this.props.onDragStart,onDragEnter:this.props.onDragEnter,onDragOver:this.props.onDragOver,onDragLeave:this.props.onDragLeave,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onCut:this.props.onCut,onCopy:this.props.onCopy,onPaste:this.props.onPaste,onKeyDown:this.onKeyDown,onValueChange:this.onValueChange,onKeyPress:this.onKeyPress,__source:{fileName:"C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\urlfield\\AutocompleteInput\\AutocompleteInput.jsx",lineNumber:315}})}}},function(e,t,a){"use strict";var i=a(22),s=a(141);var n=function(e,t){return 0===(t=t.replace(/^https?\:\/\/(www+\.)?/,"")).indexOf(e)},r=a(20),o=a(362);function l({nickname:e,children:t,url:a,title:i,description:r},o){const l=o.join(" ");let c=[];return o[0].startsWith("data:")||(c=o.map(e=>new RegExp(Object(s.a)(e),"i"))),function(e,t){return!(!t||!e)&&!!t.toLowerCase().startsWith(e.toLowerCase())}(l,e)?"OMNI_RESULT_BOOKMARK_NICKNAME":t||"string"!=typeof a?void 0:n(l,a)?"OMNI_RESULT_BOOKMARK_URL_HOST":i&&i.toLowerCase().startsWith(l.toLowerCase())?"OMNI_RESULT_BOOKMARK_TITLE_EXACT":a&&c.every(e=>a.match(e))?a.endsWith("/")?"OMNI_RESULT_BOOKMARK_PROMOTED":"OMNI_RESULT_BOOKMARK_URL":i&&c.every(e=>i.match(e))?"OMNI_RESULT_BOOKMARK_TITLE":r&&c.every(e=>r.match(e))?"OMNI_RESULT_BOOKMARK_DESCRIPTION":void 0}a.d(t,"a",(function(){return c}));class c{constructor(){var e,t,a;a=e=>{if(!e)return Promise.resolve([]);const t=e.startsWith("data:")?[]:e.replace(/\s+/g," ").split(" ");return 0===t.length?Promise.resolve([]):function(e){const t=[];for(const a of i.a.iterateTree()){const i=l(a,e);if(!i)continue;const{id:s,title:n,nickname:c,children:d}=a,u=Object(o.a)(i);if(d){const e=a.children.filter(e=>!e.children);t.push({id:s,title:n,type:i,nickname:c,score:u,urls:e})}else{const e=r.a.getDisplayUrl(a.url);t.push({id:s,title:n,type:i,nickname:c,score:u,url:e})}}return Promise.resolve(t)}(t)},(t="search")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}}},function(e,t,a){"use strict";var i=a(547),s=a(19),n=a(0),r=a.n(n),o=a(2),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\LoggedInUserSection.jsx";function c({deviceName:e,pictureUrl:t,username:a,onLogout:i,onOpenProfilePage:s}){return n.createElement("div",{className:"setting-group-double",__source:{fileName:l,lineNumber:22}},n.createElement("div",{className:"sync-status",__source:{fileName:l,lineNumber:23}},n.createElement("div",{className:"avatar-username",__source:{fileName:l,lineNumber:24}},n.createElement("img",{src:t||"/resources/default-avatar.png",className:"profile-picture",title:Object(o.a)("View account profile page"),onClick:s,alt:"",__source:{fileName:l,lineNumber:25}}),n.createElement("div",{className:"user-info",__source:{fileName:l,lineNumber:34}},n.createElement("p",{className:"info",__source:{fileName:l,lineNumber:35}},Object(o.a)("Logged in as"),n.createElement("br",{__source:{fileName:l,lineNumber:38}}),n.createElement("span",{className:"username",onClick:s,__source:{fileName:l,lineNumber:39}},a)," ",Object(o.a)("on $1",[e])))),n.createElement("input",{type:"button",value:Object(o.a)("Logout"),onClick:i,__source:{fileName:l,lineNumber:46}})))}var d=a(12),u=a(8),h=a(443),m=a(101),p=a(25),g=a(16),b=a(15),f=a.n(b),_=a(5),N=a(1),v="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\settings\\vivaldi_services\\VivaldiAccount.jsx";function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w=[N.kSyncSessionName],S=u.a.getEventHandler;class C extends r.a.Component{constructor(e){super(e),E(this,"onVivaldiAccountChange",()=>{const e=m.a.getState();this.setState({accountState:e}),"•••••"!==this.state.password||e.hasSavedPassword||this.setState({password:""}),""===this.state.password&&e.hasSavedPassword&&this.setState({password:"•••••"})}),E(this,"onCountDownElapsed",e=>{this.setState({countdownElapsed:e})}),E(this,"onUsernameChange",e=>{this.setState({username:e.target.value})}),E(this,"onPasswordChange",e=>{this.setState({password:e.target.value})}),E(this,"onSavePasswordChange",e=>{this.setState({savePassword:e.target.checked})}),E(this,"onLogin",()=>{this.state.username&&this.state.password&&h.a.login(this.state.username,"•••••"===this.state.password?"":this.state.password,this.state.savePassword)}),E(this,"onLogout",()=>{h.a.logout()}),E(this,"onRegister",()=>{d.a.openURL("https://login.vivaldi.net/profile/id/signup"),this.setState({registering:!0})}),E(this,"openProfilePage",()=>{d.a.openURL("https://login.vivaldi.net/profile/samlsso")}),E(this,"renderForm",e=>{const t=""!==this.state.accountState.accountInfo.accountId,a=this.state.accountState.hasSavedPassword&&this.state.accountState.accountInfo.username===this.state.username;return r.a.createElement("form",{onSubmit:this.onLogin,className:"setting-group-double sync-login",__source:{fileName:v,lineNumber:146}},e?r.a.createElement("h3",{__source:{fileName:v,lineNumber:147}},e):null,r.a.createElement("div",{className:"grid-form",__source:{fileName:v,lineNumber:149}},r.a.createElement("label",{htmlFor:"sync_login_username",__source:{fileName:v,lineNumber:150}},Object(o.a)("User Name")),r.a.createElement("input",{type:"text",id:"sync_login_username",value:this.state.username,disabled:t,onChange:this.onUsernameChange,__source:{fileName:v,lineNumber:151}}),r.a.createElement("label",{htmlFor:"sync_login_password",__source:{fileName:v,lineNumber:157}},Object(o.a)("Password")),r.a.createElement("input",{type:"password",id:"sync_login_password",value:this.state.password,onChange:this.onPasswordChange,__source:{fileName:v,lineNumber:158}}),r.a.createElement("label",{className:"save-password",__source:{fileName:v,lineNumber:162}},r.a.createElement("input",{type:"checkbox",disabled:a&&"•••••"===this.state.password,checked:this.state.savePassword||a&&"•••••"===this.state.password,onChange:this.onSavePasswordChange,__source:{fileName:v,lineNumber:163}}),r.a.createElement("span",{__source:{fileName:v,lineNumber:170}},Object(o.a)("Save Password"))),r.a.createElement("label",{htmlFor:"device-name",__source:{fileName:v,lineNumber:172}},Object(o.a)("Device Name")),r.a.createElement("input",{id:"device-name",type:"text",placeholder:this.state.defaultSessionName,value:this.props.prefValues[N.kSyncSessionName],onChange:S(N.kSyncSessionName),__source:{fileName:v,lineNumber:175}}),r.a.createElement("div",{className:"login",__source:{fileName:v,lineNumber:182}},r.a.createElement("input",{type:"submit",value:Object(o.a)("Login"),__source:{fileName:v,lineNumber:183}}),t&&r.a.createElement("input",{type:"button",value:Object(o.a)("Cancel"),onClick:this.onLogout,__source:{fileName:v,lineNumber:185}}))))});const t=m.a.getState();this.state={username:t.accountInfo.username,password:"",defaultSessionName:"",registering:!1,savePassword:!1,countdownElapsed:!1,accountState:t}}componentDidMount(){this.vivaldiAccountStoreToken=m.a.addListener(this.onVivaldiAccountChange),this.onVivaldiAccountChange(),_.a.sync.getDefaultSessionName(e=>this.setState({defaultSessionName:e}))}componentWillUnmount(){this.vivaldiAccountStoreToken.remove()}render(){if(g.a.isIncognitoOrGuest(this.context.vivaldiWindowId))return null;const e=this.state.accountState,t=e.accountInfo.username,a=e.lastTokenFetchError.serverMessage,s=e.lastTokenFetchError.errorCode,n=f()(e.nextTokenRequestTime);let l=null;switch(Object(m.b)(e)){case"loggedIn":const d=this.props.prefValues[N.kSyncSessionName]?this.props.prefValues[N.kSyncSessionName]:this.state.defaultSessionName;return r.a.createElement(c,{deviceName:d,pictureUrl:e.accountInfo.pictureUrl,username:t,onLogout:this.onLogout,onOpenProfilePage:this.openProfilePage,__source:{fileName:v,lineNumber:214}});case"loginFailed":l=a?Object(o.a)("Vivaldi.net rejected your credentials: $1 ($2).",[a,s]):-1===s?Object(o.a)("You must use a vivaldi.net user account to log in."):Object(o.a)("Vivaldi.net rejected your credentials: Error code $1",[s]);break;case"loggingIn":return n.isAfter(f()())&&("network_error"===e.lastTokenFetchError.errorType&&(l=Object(o.a)("Unable to connect to vivaldi.net.")),"server_error"===e.lastTokenFetchError.errorType&&(l=a?Object(o.a)("Vivaldi.net is experiencing issues: $1 ($2).",[a,s]):Object(o.a)("Vivaldi.net is experiencing issues: Error code $1.",[s]))),r.a.createElement("div",{__source:{fileName:v,lineNumber:255}},r.a.createElement("p",{className:l?null:"in-progress",__source:{fileName:v,lineNumber:256}},Object(o.a)("Logging in to Vivaldi.net as $1. Please wait.",[t])),l&&r.a.createElement("p",{__source:{fileName:v,lineNumber:259}},l,r.a.createElement(i.a,{label:"Retrying in $1",end:n,onElapsed:this.onCountDownElapsed,__source:{fileName:v,lineNumber:261}})),r.a.createElement("input",{type:"button",value:Object(o.a)("Cancel"),onClick:this.onLogout,__source:{fileName:v,lineNumber:266}}));case"credentialsMissing":l=e.hasEncryptedToken?Object(o.a)("Failed to decrypt your credentials. Please log in again."):Object(o.a)("Failed to retreive your credentials. Please log in again.")}return this.state.registering?r.a.createElement("div",{__source:{fileName:v,lineNumber:287}},r.a.createElement("h3",{__source:{fileName:v,lineNumber:288}},Object(o.a)("Register to Vivaldi.net")),r.a.createElement("p",{className:"info",__source:{fileName:v,lineNumber:289}},Object(o.a)("Please follow the instructions on the Vivaldi.net registration webpage to create an account. Proceed to log in after you have verified your email address.")),this.renderForm(l)):r.a.createElement("div",{__source:{fileName:v,lineNumber:295}},r.a.createElement("p",{className:"info",__source:{fileName:v,lineNumber:296}},Object(o.a)("To begin with data synchronization, a confirmed Vivaldi account is required. Log in with your existing credentials or setup a new account.")),this.renderForm(l),r.a.createElement("div",{className:"setting-group",__source:{fileName:v,lineNumber:299}},r.a.createElement("div",{className:"register",className:"setting-single sync-new-account",__source:{fileName:v,lineNumber:300}},r.a.createElement("input",{type:"button",onClick:this.onRegister,value:Object(o.a)("Create Vivaldi.net Account"),__source:{fileName:v,lineNumber:301}}))))}}E(C,"contextType",p.a);t.a=Object(s.a)(C,w)},function(e,t,a){"use strict";var i=a(0),s=a.n(i),n=a(2),r=a(5),o=a(13),l="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBar.jsx";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.a.PureComponent{constructor(e){super(e),c(this,"onCloseClicked",()=>{r.a.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,"dismiss")}),c(this,"onActionClicked",(e,t)=>{t.stopPropagation(),t.preventDefault(),r.a.infobars.sendButtonAction(this.props.infoBar.tabId,this.props.infoBar.identifier,e)})}render(){return s.a.createElement("div",{className:"page-confirm-info-bar",__source:{fileName:l,lineNumber:35}},s.a.createElement("label",{__source:{fileName:l,lineNumber:36}},this.props.infoBar.messageText),s.a.createElement("div",{className:"infobar-controls",__source:{fileName:l,lineNumber:37}},this.props.infoBar.buttons.map(e=>s.a.createElement("input",{type:"button",value:e.text,key:e.action,title:Object(n.a)("Select action"),onClick:this.onActionClicked.bind(this,e.action),__source:{fileName:l,lineNumber:39}})),s.a.createElement("span",{className:"infobar-close",value:"close",title:Object(n.a)("Cancel infobar"),onMouseUp:this.onCloseClicked,dangerouslySetInnerHTML:{__html:o.L},__source:{fileName:l,lineNumber:45}})))}}var u=d,h=a(21),m="C:\\new-bot\\new-builder\\workers\\ow64\\build\\vivaldi\\vivapp\\src\\components\\infobar\\ConfirmInfoBarCollection.jsx";function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends s.a.PureComponent{constructor(e){super(e),p(this,"_onInfobarCreated",e=>{this.props.tabId===e.tabId&&this.setState(t=>({infoBars:t.infoBars.insert(0,e)}))}),p(this,"_onInfobarRemoved",(e,t)=>{this.props.tabId===e&&this.setState(e=>({infoBars:e.infoBars.filter(e=>{e.identifier})}))}),this.state={infoBars:Object(h.List)()}}componentDidMount(){r.a.infobars.onInfobarCreated.addListener(this._onInfobarCreated),r.a.infobars.onInfobarRemoved.addListener(this._onInfobarRemoved)}componentWillUnmount(){r.a.infobars.onInfobarRemoved.removeListener(this._onInfobarRemoved),r.a.infobars.onInfobarCreated.removeListener(this._onInfobarCreated)}render(){return s.a.createElement(s.a.Fragment,{__source:{fileName:m,lineNumber:57}},this.state.infoBars.map(e=>s.a.createElement(u,{key:e.identifier,infoBar:e,__source:{fileName:m,lineNumber:59}})))}}t.a=g},,,,,,,,,function(e,t,a){e.exports=a(1057)},function(e,t,a){"use strict";a.r(t),function(e){a(939);var t=a(37),i=a(88),s=a(117),n=a(202),r=a(182),o=a(132),l=(a(938),a(51),a(92)),c=a(12),d=a(57),u=a(10),h=a(442),m=a(0),p=a.n(m),g=a(29),b=a.n(g),f=a(127),_=a(217),N=a(194),v=a(116),E=a(72),w=a(443),S=a(143),C=a(27),k=a(87),y=a(16),O=a(7),A=(a(21),a(1030)),T=a(15),I=a.n(T),D=a(1025),P=a.n(D),x=a(1039),M=a(1026),L=a(1027),j=a(5),B=a(58);console.time("JS init startup");const R=(e,t)=>(e.displayName=t,P.a.log(e));const F=()=>{1};function U(){return new Promise(e=>{e()})}function W(){return y.a.isPopup()||y.a.isSettings()}B.EventEmitter.EventEmitter.defaultMaxListeners=100,W()||(Object(M.a)(),n.a.initFastForward()),R(u.a.loadPromise,"PrefsCache")().then(R(k.a.loadPromise,"WindowActions")).then(R(C.a.loadPromise,"vivaldiSettings")).then(R(S.a.loadPromise,"VivaldiFeatureFlags")).then(()=>Promise.all([R(W()?U:d.a.loadPromise,"PanelActions")(),R(f.a.loadPromise,"SearchEngineActions")()])).then(()=>new Promise((e,t)=>{let a=null;(y.a.isPopup()||y.a.isSettings())&&(a=p.a.createFactory(x.a)),a||(a=p.a.createFactory(A.a));try{j.a.utilities.getSystemDateFormat(t=>{t.longDateFormat&&I.a.defineLocale(o.a.fixMomentLocale(O.default.i18n.getUILanguage())+"-viv",o.a.getLocale(t)),b.a.render(a(),document.getElementById("app"),e)})}catch(e){t(e)}})).then(()=>F()).then(()=>Promise.all([R(w.a.loadPromise,"VivaldiAccountActions")(),R(N.a.loadPromise,"SyncActions")(),R(i.default.loadPromise,"CommandActions")(),R(c.a.loadPromise,"PageActions")(),R(t.a.loadPromise,"BookmarkActions")(),R(W()?U:l.a.loadPromise,"NoteActions")(),R(W()?U:v.a.loadPromise,"TrashActions")()])).then(()=>R(W()?U:r.a.loadPromise.bind(r.a),"HistoryActions")()).then(()=>Promise.all([W()?U():_.a.load(),W()?U():E.a.load()])).then(()=>R(W()?U:s.a.loadPromise,"DownloadActions")()).then(()=>{W()||L.a.start()}).then(()=>{h.a.init()}).then(()=>console.timeEnd("JS init startup")).catch(e=>{console.log("Startup Process Failure: "+e),F()})}.call(this,a(64))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var i={"./af":597,"./af.js":597,"./ar":809,"./ar-dz":810,"./ar-dz.js":810,"./ar-kw":811,"./ar-kw.js":811,"./ar-ly":812,"./ar-ly.js":812,"./ar-ma":813,"./ar-ma.js":813,"./ar-sa":814,"./ar-sa.js":814,"./ar-tn":815,"./ar-tn.js":815,"./ar.js":809,"./az":816,"./az.js":816,"./be":598,"./be.js":598,"./bg":599,"./bg.js":599,"./bm":817,"./bm.js":817,"./bn":818,"./bn.js":818,"./bo":819,"./bo.js":819,"./br":820,"./br.js":820,"./bs":821,"./bs.js":821,"./ca":822,"./ca.js":822,"./cs":600,"./cs.js":600,"./cv":823,"./cv.js":823,"./cy":824,"./cy.js":824,"./da":601,"./da.js":601,"./de":602,"./de-at":825,"./de-at.js":825,"./de-ch":603,"./de-ch.js":603,"./de.js":602,"./dv":826,"./dv.js":826,"./el":604,"./el.js":604,"./en-au":827,"./en-au.js":827,"./en-ca":828,"./en-ca.js":828,"./en-gb":605,"./en-gb.js":605,"./en-ie":829,"./en-ie.js":829,"./en-nz":830,"./en-nz.js":830,"./eo":831,"./eo.js":831,"./es":606,"./es-do":832,"./es-do.js":832,"./es-us":833,"./es-us.js":833,"./es.js":606,"./et":607,"./et.js":607,"./eu":834,"./eu.js":834,"./fa":608,"./fa.js":608,"./fi":609,"./fi.js":609,"./fo":835,"./fo.js":835,"./fr":610,"./fr-ca":836,"./fr-ca.js":836,"./fr-ch":837,"./fr-ch.js":837,"./fr.js":610,"./fy":611,"./fy.js":611,"./gd":612,"./gd.js":612,"./gl":838,"./gl.js":838,"./gom-latn":839,"./gom-latn.js":839,"./gu":840,"./gu.js":840,"./he":841,"./he.js":841,"./hi":842,"./hi.js":842,"./hr":613,"./hr.js":613,"./hu":614,"./hu.js":614,"./hy-am":615,"./hy-am.js":615,"./id":616,"./id.js":616,"./is":617,"./is.js":617,"./it":618,"./it.js":618,"./ja":619,"./ja.js":619,"./jv":843,"./jv.js":843,"./ka":844,"./ka.js":844,"./kk":845,"./kk.js":845,"./km":846,"./km.js":846,"./kn":847,"./kn.js":847,"./ko":620,"./ko.js":620,"./ky":848,"./ky.js":848,"./lb":849,"./lb.js":849,"./lo":850,"./lo.js":850,"./lt":621,"./lt.js":621,"./lv":851,"./lv.js":851,"./me":852,"./me.js":852,"./mi":853,"./mi.js":853,"./mk":854,"./mk.js":854,"./ml":855,"./ml.js":855,"./mr":856,"./mr.js":856,"./ms":857,"./ms-my":858,"./ms-my.js":858,"./ms.js":857,"./mt":859,"./mt.js":859,"./my":860,"./my.js":860,"./nb":622,"./nb.js":622,"./ne":861,"./ne.js":861,"./nl":623,"./nl-be":862,"./nl-be.js":862,"./nl.js":623,"./nn":624,"./nn.js":624,"./pa-in":863,"./pa-in.js":863,"./pl":625,"./pl.js":625,"./pt":626,"./pt-br":627,"./pt-br.js":627,"./pt.js":626,"./ro":628,"./ro.js":628,"./ru":629,"./ru.js":629,"./sd":864,"./sd.js":864,"./se":865,"./se.js":865,"./si":866,"./si.js":866,"./sk":630,"./sk.js":630,"./sl":631,"./sl.js":631,"./sq":632,"./sq.js":632,"./sr":867,"./sr-cyrl":633,"./sr-cyrl.js":633,"./sr.js":867,"./ss":868,"./ss.js":868,"./sv":634,"./sv.js":634,"./sw":869,"./sw.js":869,"./ta":870,"./ta.js":870,"./te":871,"./te.js":871,"./tet":872,"./tet.js":872,"./th":873,"./th.js":873,"./tl-ph":874,"./tl-ph.js":874,"./tlh":875,"./tlh.js":875,"./tr":635,"./tr.js":635,"./tzl":876,"./tzl.js":876,"./tzm":877,"./tzm-latn":878,"./tzm-latn.js":878,"./tzm.js":877,"./uk":636,"./uk.js":636,"./ur":879,"./ur.js":879,"./uz":880,"./uz-latn":881,"./uz-latn.js":881,"./uz.js":880,"./vi":637,"./vi.js":637,"./x-pseudo":882,"./x-pseudo.js":882,"./yo":883,"./yo.js":883,"./zh-cn":638,"./zh-cn.js":638,"./zh-hk":884,"./zh-hk.js":884,"./zh-tw":639,"./zh-tw.js":639};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=1173},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="180" height="32">\n  <rect class="gray-stroke" width="179" height="31" x=".5" y=".5" rx="3"/>\n  <path class="gray-stroke" d="M1 24.5h6.5v-17h81v17H179"/>\n  <path class="gray-stroke" d="M91.5 24V7.5h81V24"/>\n  <rect class="highlight-element" width="15" height="15" x="160.5" y="4.5" rx="3"/>\n  <path class="icon-selected" d="M165 7h8v8z"/>\n  <path class="gray-stroke" d="M11.5 11.5h9v9h-9zM95.5 11.5h9v9h-9z"/>\n</svg>'},,,,,,,function(e,t){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1 1h2v1H1V1zm1 1h2v1H2V2zm4 0h2v1H6V2zm1-1h2v1H7V1zM3 3h4v1H3V3zm1 1h2v1H4V4zM3 5h4v1H3V5zM2 6h2v1H2V6zm4 0h2v1H6V6zm1 1h2v1H7V7zM1 7h2v1H1V7z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n    <path d="M1 7h8v2H1z"/>\n</svg>'},function(e,t){e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M1 2h8v1H1V2zM0 1h10v1H0V1zm0 7h10v1H0V8zm0-6h1v6H0V2zm9 0h1v6H9V2z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M1 3h6v1H1V3zM0 2h8v1H0V2zm1 7h6v1H1V9zM0 3h1v7H0V3zm7 0h1v7H7V3zM2 0h8v1H2V0zm7 1h1v7H9V1z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n  <path d="M10.2.5l-.7-.7L5 4.3.5-.2l-.7.7L4.3 5-.2 9.5l.7.7L5 5.7l4.5 4.5.7-.7L5.7 5"/>\n</svg>\n'},function(e,t){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">\n  <path d="M0 5H10V6H0V5Z"/>\n</svg>\n'},function(e,t){e.exports='<svg class="window-maximize" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n\n  <g class="window-maximize-glyph">\n    <path d="M9 1v8H1V1h8m1-1H0v10h10V0z"/>\n  </g>\n\n  <g class="window-restore-glyph">\n    <path d="M3 0H2v2H0v8h8V8h2V0H3zm4 9H1V3h6v6zm2-2H8V2H3V1h6v6z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-close-glyph dpi-standard">\n    <path fill="#93120F" d="M8 7v-2h1v-2h-2v1h-2v-1h-2v2h1v2h-1v2h2v-1h2v1h2v-2h-1z" />\n    <path fill="#7E0200" d="M5 5h2v2h-2v-2zm-1-1h1v1h-1v-1zm-1-1h1v1h-1v-1zm5 0h1v1h-1v-1zm-1 1h1v1h-1v-1zm-3 3h1v1h-1v-1zm-1 1h1v1h-1v-1zm4-1h1v1h-1v-1zm1 1h1v1h-1v-1z" />\n  </g>\n  <g class="window-close-glyph dpi-high">\n    <polygon fill="#4c0102" points="9 3 8.29 3 6 5.29 3.71 3 3 3 3 3.71 5.29 6 3 8.29 3 9 3.71 9 6 6.71 8.29 9 9 9 9 8.29 6.71 6 9 3.71 9 3" />\n  </g>\n\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-minimize-glyph dpi-standard">\n    <rect x="3" y="5" width="6" height="2" fill="#965612"/>\n    <rect x="9" y="5" width="1" height="2" fill="#ab6e1c" class="semi" />\n    <rect x="2" y="5" width="1" height="2" fill="#ab6e1c" class="semi"/>\n  </g>\n  <g class="window-minimize-glyph dpi-high">\n    <rect x="2.5" y="5.5" width="7" height="1" fill="#965612"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#ab6e1c" class="semi"/>\n  </g>\n\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12">\n\n  <circle cx="6" cy="6" />\n\n  <g class="window-zoom-glyph dpi-standard">\n    <polygon points="9 5 7 5 7 3 5 3 5 5 3 5 3 7 5 7 5 9 7 9 7 7 9 7 9 5" fill="#0a630c"/>\n    <rect x="5" y="2" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="5" y="9" width="2" height="1" fill="#157e1b" class="semi"/>\n    <rect x="9" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n    <rect x="2" y="5" width="1" height="2" fill="#157e1b" class="semi"/>\n  </g>\n  <g class="window-zoom-glyph dpi-high">\n    <polygon points="9.5 5.5 6.5 5.5 6.5 2.5 5.5 2.5 5.5 5.5 2.5 5.5 2.5 6.5 5.5 6.5 5.5 9.5 6.5 9.5 6.5 6.5 9.5 6.5 9.5 5.5" fill="#0a630c"/>\n    <rect x="5.5" y="2" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="5.5" y="9.5" width="1" height="0.5" fill="#1b8e25" class="semi"/>\n    <rect x="9.5" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n    <rect x="2" y="5.5" width="0.5" height="1" fill="#1b8e25" class="semi"/>\n  </g>\n\n  <g class="window-fullscreen-glyph dpi-standard">\n    <polygon points="9 7.6 4.4 3 8.38 3.1 8.9 3.63" fill="#0a630c"/>\n    <polygon points="3 4.5 7.5 9 3.63 8.9 3.1 8.38" fill="#0a630c"/>\n  </g>\n  <g class="window-fullscreen-glyph dpi-high">\n    <polygon points="3 4.5 7.5 9 3.63 9 3 8.38 3 4.5" fill="#0a630c"/>\n    <polygon points="9 7.5 4.5 3 8.38 3 9 3.63 9 7.5" fill="#0a630c"/>\n  </g>\n\n  <g class="window-restore-glyph dpi-standard">\n    <polygon points="6 10 2 6 6 6 6 10" fill="#0a630c"/>\n    <polygon points="6 2 10 6 6 6 6 2" fill="#0a630c"/>\n  </g>\n  <g class="window-restore-glyph dpi-high">\n    <polygon points="6 1.5 10.5 6 6.50 6 6 5.50 6 1.5" fill="#0a630c"/>\n    <polygon points="6 10.5 1.5 6 5.50 6 6 6.50 6 10.5" fill="#0a630c"/>\n  </g>\n</svg>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 73">\n\t<path d="M3.5 15.2c.8.6 1.9.3 2.4-.5L7.1 13c4.6-6.7 12.9-10 22-8.8 8.7 1.1 15.8 6.1 18.1 12.7 2 5.7 1.3 10.3.5 14.6-.2 1.1.5 2.1 1.6 2.2 1.1.2 2-.6 2.2-1.6 1.1-5.8 1.3-10.8-.7-16.5C47.4 6 36.6 0 25.4 0 18 0 10.9 2.7 5.8 8.3 4.5 9.7 3.7 10.8 3 12.6c-.6 1.2-.4 2 .5 2.6z"/>\n\t<path d="M29.5 38.6c2.5-2.8 4.4-6 5.8-9.3 1.4-3.4 1.2-6.8-.7-9.6-1.9-2.9-5.4-4.7-9.2-4.7-2.1 0-4.1.6-5.8 1.7-1.9 1.2-3.4 3-4.3 5.2-1.9 4.6-7 8.4-14 10.3-.9.2-1.5 1-1.4 2 0 1.3 1.2 2.2 2.4 1.8 8.1-2.3 14.1-6.9 16.5-12.6 1.3-3.2 4-4.5 6.5-4.5 4.3 0 8.4 3.7 6.3 8.9-4.6 11-15.3 18-27.5 21.1-.5.1-1 .5-1.3 1-.3.5-.3 1.1-.1 1.6C3 52.4 4 53 5 52.7c6-1.5 11.5-3.9 16.1-7 3.4-2 6.1-4.4 8.4-7.1z"/>\n\t<path d="M3 27.6c5.6-1.9 7.4-4.9 9.1-7.8.9-1.5 1.7-3 3.2-4.3 3.4-3.2 8-4.7 12.6-4.2 4.4.5 8.2 2.7 10.5 6 3.3 4.7 2.4 9.4 1.6 14.2-.2 1.4 1 2.6 2.3 2.3.8-.2 1.3-.8 1.5-1.5.7-4.4 2.3-10.7-2.2-17.1-3-4.3-7.8-7.1-13.3-7.7-5.7-.6-11.5 1.3-15.7 5.2-1.9 1.7-2.9 3.6-3.9 5.2C7.2 20.4 6 22.6 1.8 24c-.7.2-1.2.8-1.3 1.6-.2 1.4 1.1 2.5 2.5 2zM27.1 51.5c.1-.7-.3-1.4-.9-1.8s-1.4-.4-2-.1c-3 1.7-6.8 4.2-16.4 7.1-1.2.4-1.8 1.8-1.1 2.9.4.7 1.3 1.1 2.2.9C20.6 57 23 54.5 26 53.3c.5-.4 1-1.1 1.1-1.8z"/>\n\t<path d="M27.6 26.1c.4-1 0-2.1-1-2.6-1-.4-2.1 0-2.5 1-3.2 7.6-11.2 13.4-21.8 16-1 .2-1.7 1.2-1.5 2.2.2 1.1 1.3 1.8 2.3 1.5 10.4-2.4 20.4-8.3 24.5-18.1zM27.8 61.1c.3-.6.4-1.3.2-1.9-.3-.9-1.3-1.5-2.2-1.2-.8.2-1.8.6-3.2 1.4-1.9 1-4.8 2.5-9.8 4.2-.6.2-1.1.8-1.3 1.4-.3 1.4 1 2.8 2.4 2.3 5.3-1.8 8.4-3.5 10.4-4.5 1.5-.7 2.8-.6 3.5-1.7zM46.5 39.4C39 39.4 33 45.5 33 53.1c0 7.5 6 13.6 13.5 13.6S60 60.6 60 53.1c0-7.6-6-13.7-13.5-13.7zM52 53h-4v3h2v2h-2v1h2v2h-2v1h-3v-9h-3v-6h10v6z"/>\n\t<path d="M44 49h6v2h-6zM33.1 69.1c-7.5-3.3-5.5-3.3-12.6 0-.7.3-1.1 1-1.1 1.8 0 1.2 1.1 1.9 2.1 1.9.3 0 .5-.1.8-.2 5.1-2.4 3.3-2.5 9.1 0 .2.1.5.2.8.2 1 0 2-.6 2.1-1.8 0-.8-.5-1.5-1.2-1.9z"/>\n</svg>'},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t,a){var i={"./rte-bold.svg":1346,"./rte-createLink.svg":1347,"./rte-indent.svg":1348,"./rte-insertImage.svg":1349,"./rte-insertOrderedList.svg":1350,"./rte-insertUnorderedList.svg":1351,"./rte-italic.svg":1352,"./rte-justifyCenter.svg":1353,"./rte-justifyFull.svg":1354,"./rte-justifyLeft.svg":1355,"./rte-justifyRight.svg":1356,"./rte-outdent.svg":1357,"./rte-redo.svg":1358,"./rte-removeFormat.svg":1359,"./rte-strikeThrough.svg":1360,"./rte-underline.svg":1361,"./rte-undo.svg":1362};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=1345},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M8.805 12h-5.805v-1h1v-7h-1v-1h5.866c.703 0 1.747.5 3.134 1.5l-.092 2.183c-.167.192-1.294.311-1.609.47.462.176 1.472 1.126 1.7 1.346v2c-.543.703-2.011 1.5-3.195 1.5zm-.644-1.042c.33 0 .566-.205.706-.615.088-.259.133-.573.133-.94 0-.619-.129-1.041-.387-1.265-.137-.12-.318-.18-.544-.18h-1.069v3zm-.077-3.941c.251 0 .447-.077.587-.231.22-.242.329-.677.329-1.305 0-.633-.117-1.059-.35-1.279-.132-.123-.327-.185-.587-.185h-1.063v3z" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.295 9.866l-.991.991c-.286.286-.67.444-1.081.444-.411 0-.794-.158-1.081-.444-.596-.596-.596-1.565 0-2.161l.991-.991-1.178-1.178-.991.991c-1.243 1.242-1.243 3.276 0 4.518.621.621 1.44.932 2.259.932s1.638-.311 2.259-.932l.991-.991-1.178-1.178M7.705 6.134l.991-.991c.286-.286.67-.444 1.081-.444.411 0 .794.158 1.081.444.286.286.444.67.444 1.081 0 .411-.158.794-.444 1.081l-.991.991 1.178 1.178.991-.991c1.242-1.242 1.242-3.276 0-4.518-.621-.621-1.44-.932-2.259-.932s-1.638.311-2.259.932l-.991.991 1.178 1.179"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path class="hl" d="M5 7.5l-4 3.5v-7z"/>\n  <g>\n    <path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zM6.001 8h8v1h-8zm0 2h8v1h-8z"/>\n    <path d="M2 12h3v1h-3zm4 0h4v1h-4z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 1.5C4 1.22386 4.22386 1 4.5 1H11.5C11.7761 1 12 1.22386 12 1.5C12 1.77614 11.7761 2 11.5 2H4.5C4.22386 2 4 1.77614 4 1.5Z"/>\n  <path d="M7 10L5 8L3 12H13L10 6L7 10Z"/>\n  <path fill-rule="evenodd" d="M2 3H14C14.5523 3 15 3.44772 15 4V13C15 13.5523 14.5523 14 14 14H2C1.44772 14 1 13.5523 1 13V4C1 3.44772 1.44772 3 2 3ZM14 4H2V13H14L14 4Z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl">\n    <path d="M3 2v-1h1v3h1v1h-3v-1h1v-1h-1v-1zm1 7h1v1h-3v-1h1v-1h1v1zm-2-3h2v1h-2v-1zm2 1h1v1h-1v-1zm0 5v1h-1v-1h-1v-1h3v1h-1zm0 1h1v1h-1v-1zm-2 1h2v1h-2v-1z"/>\n    <path opacity=".5" style="mix-blend-mode:multiply" d="M3 1h2v4h-2zm0 5h2v4h-2zm0 5h2v4h-2z"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M6 2h8v1h-8zm0 5h8v1h-8zm0 5h8v1h-8z"/>\n  <g class="hl" transform="translate(2 1)">\n    <circle id="Oval" cx="1.5" cy="1.5" r="1.5"/>\n    <circle cx="1.5" cy="6.5" r="1.5"/>\n    <circle cx="1.5" cy="11.5" r="1.5"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 11h2v1h-6v-1h2l3-7h-2v-1h6v1h-2z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm1 2h10v1h-10zm-1 2h12v1h-12zM2 10h12v1h-12zm2-2h8v1h-8z"/><path d="M5 12h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h12v1h-12zm0 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h11v1h-11zm0 2h10v1h-10zm0 2h12v1h-12zm0 2h9v1h-9zm0 2h11v1h-11zm0 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3 2h11v1h-11zm1 2h10v1h-10zM2 6h12v1h-12zm3 2h9v1h-9z"/><path d="M3 10h11v1h-11zm5 2h6v1h-6z"/></svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 2h3v1h-3zm4 0h8v1h-8zm.001 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm0 2h8v1h-8zm-4.001 2h3v1h-3zm4 0h4v1h-4z"/><path class="hl" d="M1 7.5l4-3.5v7z"/></svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M11.046 6.954c-.629-1.387-2.026-2.354-3.646-2.354-2.206 0-4 1.794-4 4s2.394 4 4.6 4v1.599c-3.093 0-6.2-2.507-6.2-5.599 0-3.094 2.507-5.6 5.6-5.6 2.06 0 3.86 1.112 4.832 2.768l1.768-1.768v5h-5z"/></svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M13.923 3.854c.59-.851.476-2.296-.423-2.854-.902-.557-2.25-.017-2.842.834-.557.804-.53 2.076-.949 2.987-.541 1.176-2.627 1.026-4.709 0-1.144 2.095-2.424 4.639-4 6.467l1.498.928c.674-.109 1.509-.662 1.849-1.269-.027.729-.316 1.375-.885 1.865l2.831 1.748c.361-.34.698-.61 1.07-.84-.211.402-.352.828-.417 1.244l1.676 1.036c.993-1.803 2.924-4.59 4.274-6.171-1.867-1.42-2.421-3.085-1.413-4.034.725-.685 1.903-1.165 2.441-1.942zm-.805-2.155c.427.242.546.743.264 1.112-.276.373-.851.476-1.276.234-.429-.243-.547-.74-.267-1.112.278-.372.851-.477 1.279-.234zm-3.091 10.029l-5.445-3.366 1.07-1.543 5.443 3.366z" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5 13H7V4H6.32005C6.11005 4 5.88005 4.02 5.62005 4.05C5.36005 4.09 5.10005 4.19 4.84005 4.35C4.58005 4.51 4.34005 4.78 4.10005 5.13C3.86005 5.49 3.65005 5.98 3.47005 6.61H3.30005V3H12.69V6.61H12.52C12.35 5.98 12.14 5.49 11.9 5.13C11.66 4.78 11.41 4.52 11.14 4.35C10.88 4.19 10.62 4.08 10.36 4.05C10.1 4.01 9.87005 4 9.66005 4H9V13H11V14H5V13Z"/>\n  <path d="M14 8H2V9H14V8Z"/>\n</svg>\n'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M3 13h9v1h-9zM7.5 10.75l1.5-.75v-6h-1v-1h4v1h-1v6l-2 2h-3l-2-2v-6h-1v-1h4v1h-1v6z"/></g></svg>'},function(e,t){e.exports='<svg height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path class="hl" d="M3.768 5.768c.973-1.656 2.773-2.768 4.832-2.768 3.093 0 5.6 2.506 5.6 5.6 0 3.092-3.107 5.599-6.2 5.599v-1.599c2.206 0 4.6-1.794 4.6-4s-1.794-4-4-4c-1.619 0-3.017.967-3.646 2.354l2.046 2.046h-5v-5z"/></svg>\n'},,,,function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M0 0h220v26H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 6h69v14H6z"/>\n    <path fill="#FFFFFF" d="M76 6h68v14H76zM145 6h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M0 0h81v156H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 6h69v14H6z"/>\n    <path fill="#FFFFFF" d="M6 21h69v14H6zM6 36h69v14H6z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M0 0h220v156H0z"/>\n    <path fill="#E3E3E3" d="M0 130h220v26H0z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M6 136h69v14H6z"/>\n    <path fill="#FFFFFF" d="M76 136h68v14H76zM145 136h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="220" height="156">\n    <path fill="#EFEFEF" d="M3 0h214a3 3 0 0 1 3 3v153H0V3a3 3 0 0 1 3-3z"/>\n    <path fill="#E3E3E3" d="M139 0h81v156h-81z"/>\n    <path class="active-tab-preview" fill="#EF3939" d="M145 6h69v14h-69z"/>\n    <path fill="#FFFFFF" d="M145 21h69v14h-69zM145 36h69v14h-69z"/>\n</svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="98" height="98">\n  <path d="M91 73.66l-9.5 6v-12zm-79-24l-9.5 6v-12zM62 22.6V1.4L78.7 12zm4-14v6.7l5.3-3.4L66 8.5z" fill-opacity=".2"/>\n  <path d="M37.5 90.15q1.86.64 3.8 1.12l1.2-.77-5-3.2z" fill-opacity=".05"/>\n   <path d="M88.21 71.86a42.93 42.93 0 0 0-12.57-57.92L62 22.6V7.8A43 43 0 0 0 8.56 47.32L12 49.5l-3.44 2.18A43.1 43.1 0 0 0 35.5 89.4v-5.7l11 6.8-2.23 1.38A42.82 42.82 0 0 0 83.1 78.61l-1.6 1v-12zM51.5 77.5a28 28 0 1 1 28-28 28 28 0 0 1-28 28z" fill-opacity=".06"/>\n  <path d="M35.5 97.28v-13.6l11 6.8zm2-10v6.4l5-3.2z" fill-opacity=".3"/>\n  <path d="M71.5 49.5a20.06 20.06 0 0 0-20-20v15.2l6.8 5.2-6.8 5v14.5a20 20 0 0 0 20-19.9z"/>\n  <path d="M51.5 55L48 58V42s2 1.4 3.5 2.7V29.5a20 20 0 0 0 0 40z" fill-opacity=".8"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="98" height="98">\n  <path d="M49 17.6c17.4 0 31.4 14 31.4 31.4S66.4 80.4 49 80.4 17.6 66.4 17.6 49s14-31.4 31.4-31.4m0-1c-18 0-32.4 14.6-32.4 32.4S31 81.4 49 81.4 81.4 67 81.4 49 67 16.6 49 16.6z" fill-opacity="0.2"/>\n  <path d="M49 17.6c17.4 0 31.4 14 31.4 31.4S66.4 80.4 49 80.4 17.6 66.4 17.6 49s14-31.4 31.4-31.4m0-17C22.3.6.6 22.3.6 49S22.3 97.4 49 97.4 97.4 75.7 97.4 49 75.7.6 49 .6z" fill-opacity="0.1"/>\n  <circle cx="4" cy="29.5" r="2" fill-opacity="0.8"/>\n  <circle cx="29.5" cy="4" r="2.5" fill-opacity="0.3"/>\n  <circle cx="95.5" cy="56" r="2.5" fill-opacity="0.3"/>\n  <circle cx="14.5" cy="49" r="2.5" fill-opacity="0.3"/>\n  <path d="M71 6.5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z" fill-opacity="0.3"/>\n  <path d="M31 92.5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z" fill-opacity="0.3"/>\n  <path d="M68 41c0-3.6-2.4-6.3-5.7-6.3-3.3 0-5.8 2.7-5.8 6.2s2.5 6 5.8 6 5.8-2.6 5.8-6zm-14.4-1.3c0-3.5-2.5-6.2-5.8-6.2S42 36.2 42 39.7s2.5 6.2 5.8 6.2 5.8-2.8 5.8-6.3zM36.2 55.2v7.2l12 3 11.2-3v-7.2C51 50 52.2 50 47.8 50s-4 0-11.6 5.2zm22.2-5c2.3 1.8 4 4.2 4 7v5.3h.6c3.6 0 11-3 11-3v-2.2c0-4.8-9.2-7.2-13.6-7.2-.6 0-1.2 0-2 .3zm-32-9.3c0-3.6 2.5-6.3 5.8-6.3S38 37.4 38 41s-2.5 6-5.8 6-5.8-2.6-5.8-6zm10.8 9.3c-2.3 1.7-4 4-4 7v5.2h-.6c-3.6 0-11-3-11-3v-2.2c0-4.8 9.2-7.2 13.6-7.2.6 0 1.2 0 2 .3z"  fill-opacity="0.8"/>\n  <path d="M68 41c0-3.6-2.4-6.3-5.7-6.3-3.3 0-5.8 2.7-5.8 6.2s2.5 6 5.8 6 5.8-2.6 5.8-6zm-14.3-1.5c.5-3.8-5.7-6-5.7-6V46c3.4 0 5.2-2.7 5.7-6.5zm-5.7 26l11.4-3v-7.2C51 50 51.8 50 48 50v15.5zm10.4-15.2c2.3 1.7 4 4 4 7v5.2h.6c3.6 0 11-3 11-3v-2.2c0-4.8-9.2-7.2-13.6-7.2-.6 0-1.2 0-2 .3z"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="114" height="114">\n    <path d="M13 25.72a5.29 5.29 0 0 0 0 10.57 5.29 5.29 0 0 0 0-10.57zm0 8.61a3.33 3.33 0 0 1 0-6.64 3.33 3.33 0 0 1 0 6.64zM65 50a4 4 0 1 0 4 4 4 4 0 0 0-4-4zm0 6.65A2.65 2.65 0 1 1 67.65 54 2.65 2.65 0 0 1 65 56.65z" opacity=".2"/>\n    <circle cx="52" cy="25" r="2.5" opacity=".2"/>\n    <circle cx="3" cy="72" r="2.5" opacity=".2"/>\n    <circle cx="40" cy="85" r="2.5" opacity=".2"/>\n    <circle cx="108" cy="77" r="2" opacity=".2"/>\n    <path d="M65.32 98.5c13.59 0 21-11.16 21-20.83v-.95A15 15 0 0 0 90 72.93a14.85 14.85 0 0 1-4.24 1.15A7.36 7.36 0 0 0 89 70a14.88 14.88 0 0 1-4.69 1.78 7.4 7.4 0 0 0-12.78 5 7.25 7.25 0 0 0 .19 1.67A21 21 0 0 1 56.5 70.8a7.28 7.28 0 0 0 2.29 9.77 7.38 7.38 0 0 1-3.35-.92v.09A7.34 7.34 0 0 0 61.37 87a7.44 7.44 0 0 1-3.34.13 7.39 7.39 0 0 0 6.9 5.08 14.91 14.91 0 0 1-9.17 3.13 15.15 15.15 0 0 1-1.76-.1 21 21 0 0 0 11.32 3.26" />\n    <path d="M112.3 42.6a7.67 7.67 0 0 0-.49-2.55 5.36 5.36 0 0 0-3.06-3.05 7.72 7.72 0 0 0-2.55-.49c-1.12-.05-1.48-.06-4.33-.06s-3.21 0-4.33.06A7.72 7.72 0 0 0 95 37a5.36 5.36 0 0 0-3.07 3.07 7.66 7.66 0 0 0-.49 2.55c-.05 1.12-.06 1.48-.06 4.33s0 3.21.06 4.33a7.66 7.66 0 0 0 .49 2.55A5.36 5.36 0 0 0 95 56.88a7.72 7.72 0 0 0 2.55.49c1.12.05 1.48.06 4.33.06s3.21 0 4.33-.06a7.72 7.72 0 0 0 2.55-.49 5.36 5.36 0 0 0 3.07-3.07 7.67 7.67 0 0 0 .49-2.55c.05-1.12.06-1.48.06-4.33s-.02-3.21-.08-4.33zm-1.89 8.57a5.83 5.83 0 0 1-.36 1.95 3.48 3.48 0 0 1-2 2 5.83 5.83 0 0 1-2 .36c-1.11 0-1.44.06-4.24.06s-3.14 0-4.24-.06a5.83 5.83 0 0 1-2-.36 3.48 3.48 0 0 1-2-2 5.83 5.83 0 0 1-.36-1.95c-.05-1.11-.06-1.44-.06-4.24s0-3.14.06-4.24a5.82 5.82 0 0 1 .36-1.95 3.48 3.48 0 0 1 2-2 5.79 5.79 0 0 1 2-.36c1.11 0 1.44-.06 4.24-.06s3.14 0 4.24.06a5.79 5.79 0 0 1 2 .36 3.48 3.48 0 0 1 2 2 5.82 5.82 0 0 1 .36 1.95c.05 1.11.06 1.44.06 4.24s0 3.14-.06 4.25z"/>\n    <path d="M101.87 41.54a5.39 5.39 0 1 0 5.39 5.39 5.39 5.39 0 0 0-5.39-5.39zm0 8.89a3.5 3.5 0 1 1 3.5-3.5 3.5 3.5 0 0 1-3.5 3.5z"/>\n    <circle cx="107.47" cy="41.33" r="1.26"/>\n    <path d="M22.52 58.14v-6.8L29 54.75zm14.24-8a5.25 5.25 0 0 0-1-2.4 3.42 3.42 0 0 0-2.4-1C30 46.5 25 46.5 25 46.5s-5 0-8.4.24a3.42 3.42 0 0 0-2.4 1 5.25 5.25 0 0 0-1 2.4 36.78 36.78 0 0 0-.2 3.94v1.83a36.78 36.78 0 0 0 .24 3.91 5.25 5.25 0 0 0 1 2.4 4 4 0 0 0 2.65 1c1.92.19 8.16.24 8.16.24s5 0 8.4-.25a3.42 3.42 0 0 0 2.4-1 5.25 5.25 0 0 0 1-2.4 36.86 36.86 0 0 0 .15-3.9v-1.83a36.86 36.86 0 0 0-.24-3.91zM69.94 41.5V30.1h3.83l.57-4.44h-4.4v-2.85c0-1.29.36-2.16 2.21-2.16h2.35v-4a31.58 31.58 0 0 0-3.43-.18c-3.4 0-5.72 2.07-5.72 5.87v3.28H61.5v4.48h3.84v11.4z" />\n</svg>\n'},,,,,,,,,,,function(e,t){e.exports='\x3c!--  Mask definitions for SVG icons --\x3e\n<defs>\n  \x3c!-- shared paths --\x3e\n  <path id="folder-shape"\n    d="M0 3 1 2 7 2 8 3 8 4 15 4 16 5 16 13 15 14 1 14 0 13 Z"\n    stroke="#fff"\n    stroke-width="2"\n    stroke-opacity="1" />\n\n  <path id="sync-cloud"\n    d="M13.996 7.172C15.164 7.585 16 8.697 16 10c0 1.657-1.337 3-3.01 3H3.01C1.346 13 0 11.653 0 10c0-1.314.84-2.43 2.022-2.836C2.187 5.942 3.232 5 4.5 5c.667 0 1.272.26 1.72.686C6.765 4.123 8.25 3 10 3c2.21 0 4 1.79 4 4 0 .058 0 .115-.004.172z"/>\n\n  <g id="sd-group">\n    <path fill="#000" d="M8 8h8v8h-8z"/>\n    <path fill="#fff" d="M13 9h3v3h-3z"/>\n    <path fill="#fff" d="M13 13h3v3h-3z"/>\n    <path fill="#fff" d="M9 9h3v3h-3z"/>\n    <path fill="#fff" d="M9 13h3v3h-3z"/>\n  </g>\n\n  <path id="sd-bookmark"\n    d="M44 29v34l11-5.667 11 5.667v-34h-22zm11 24.5l-8 4.41v-25.91h16v26l-8-4.5z"/>\n\n  <filter id="sd-bookmark-filter" x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox">\n    <feOffset dx="1" dy="1" in="SourceAlpha" result="shadowOffset"/>\n    <feGaussianBlur stdDeviation=".5" in="shadowOffset" result="shadowBlur"/>\n    <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0" in="shadowBlur"/>\n  </filter>\n\n  \x3c!-- gradients --\x3e\n  <linearGradient id="border-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0.3" offset="0"/>\n    <stop stop-color="#fff" stop-opacity="0.6" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="icon-gradient" x1="0" y1="0" x2="0" y2="1">\n    <stop stop-color="#fff" stop-opacity="0" offset="0.3"/>\n    <stop stop-color="#fff" stop-opacity="0.2" offset="1"/>\n  </linearGradient>\n\n  <linearGradient id="sd-bookmark-gradient" x1="0" y1="1" x2="1" y2="1">\n    <stop stop-color="#000" stop-opacity="0" offset="0.5"/>\n    <stop stop-color="#000" stop-opacity="1" offset="0.5"/>\n  </linearGradient>\n\n  <linearGradient id="sd-folder-gradient" x1="20%" y1="111%" x2="90%" y2="80%">\n    <stop stop-color="var(--colorBgLight)" offset="0%"/>\n    <stop stop-color="var(--colorBgLight)" offset="82%"/>\n    <stop stop-color="var(--colorBg)" offset="83%"/>\n    <stop stop-color="var(--colorBg)" offset="100%"/>\n  </linearGradient>\n\n  <linearGradient id="bookmark-graphic-gradient" x1="0%" y1="0%" x2="100%" y2="100%">\n    <stop stop-color="rgba(0,0,0, 0.1)" offset="0%"/>\n    <stop stop-color="transparent" offset="70%"/>\n  </linearGradient>\n\n  <linearGradient x1="0.15" y1="0.3" x2="0.3" y2="0.5" id="guest-intro-bg-gradient">\n    <stop offset="0" stop-color="var(--colorFg)" stop-opacity="0.03" />\n    <stop offset="1" stop-color="var(--colorFg)" stop-opacity="0.003" />\n  </linearGradient>\n\n  <linearGradient x1="1" y1="0" x2="0" y2="1" id="guest-intro-accent-gradient">\n    <stop offset="0" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n    <stop offset="0.5" stop-color="var(--colorAccentBg)" stop-opacity="1" />\n    <stop offset="1" stop-color="var(--colorAccentBg)" stop-opacity="0" />\n  </linearGradient>\n\n  \x3c!-- masks --\x3e\n  <mask id="trash-folder-mask">\n    <path d="M11 1v-1h-6v1h-4v1h14v-1h-4z" fill="#fff" />\n    <path d="M3 3h10v12h-10v-12z" fill="#000"\n      stroke="#fff" stroke-width="2" stroke-opacity="1" />\n    <path d="M6 6h1v6h-1z" fill="#fff" />\n    <path d="M9 6h1v6h-1z" fill="#fff" />\n  </mask>\n\n  <mask id="icon-mask">\n    <path d="M4 14v-12h7v12l-3.5-2.8-3.5 2.8z"\n      stroke="url(#border-gradient)"\n      stroke-width="2"\n      stroke-opacity="1"/>\n  </mask>\n\n  <mask id="mail-mask-unseen">\n    <circle cx="8" cy="8" r="4" fill="#fff" />\n    <circle cx="8" cy="8" r="2" fill="#000" />\n  </mask>\n\n  <mask id="sync-cloud-mask" x="0" y="0" width="16" height="10" fill="#fff">\n    <use xlink:href="#sync-cloud" />\n    <use mask="url(#sync-cloud-mask)"\n      xlink:href="#sync-cloud" />\n  </mask>\n</defs>\n'}]);